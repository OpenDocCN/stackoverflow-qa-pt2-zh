# StackOverflow 问答 12952000-12952999

# javascript - iOS6中元素的defineProperty是否损坏？

> ID：12952001
> 
> 赞同：0
> 
> 时间：2012-10-18T10:00:25.283
> 
> 标签：javascript, ios6, defineproperty

JavaScript 的 defineProperty 和 __defineSetter 不适用于 iOS6 中的元素。它可以在所有其他浏览器和早期版本的 iOS 上正常运行。有人知道更多吗？

```
<input id='Button1' type="button" value="test" onclick="test()">
<script>
Object.defineProperty(Button1,'width',{set: function(x){
    Button1.style.width=x},
    enumerable: true,
    configurable: true});

function test(){
  Button1.width="100px";
  alert(Button1.style.width);
  }
</script> 
```

这是小提琴：

[http://jsfiddle.net/ghenne/pnL7p/](http://jsfiddle.net/ghenne/pnL7p/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:28:52.573

实际上，iOS 6 似乎是第一个没有漏洞的 Safari 版本，该漏洞允许某些原生 DOM 属性（如宽度）被覆盖，即使它们是不可配置的。

在我能够测试的所有版本的 Safari（移动设备或其他）中，width 属性（和其他几个）是不可配置的（即可配置：false）。尽管如此，当前桌面版 Safari 和 iOS 5.1 及更低版本的移动版 Safari 将很乐意为 width 属性赋予新的描述符。在 iOS 6 中，描述符受到尊重。

值得一提的是，用户设置属性尊重可配置，只是这些预设属性有问题。

至于其他浏览器，Chrome 将这些属性设置为可配置，而 Firefox 似乎没有将描述符与属性相关联，这就是您在这些浏览器上没有问题的原因。我没有测试IE。

在我看来，真正的问题是 Safari 将这些属性设置为不可配置，并且在 iOS 6 中终于开始关注这一点。

# objective-c - 将 __unsafe_unretained 指针返回到 Objective C 中释放的对象会导致崩溃

> ID：12952004
> 
> 赞同：1
> 
> 时间：2012-10-18T10:00:33.763
> 
> 标签：objective-c, automatic-ref-counting, unsafe-unretained

**问题**：

我有一个`__unsafe_unretained id`指向已发布对象的指针。到目前为止一切顺利，只要我根本不“使用”指针（特别是，我不通过指针调用任何方法）。但是，当我尝试从方法返回其值时，它会**崩溃**，即使我已明确指定返回值具有 type `__unsafe_unretained id`。这是为什么？我想如果我使用`__unsafe_unretained`，它根本不会调用`retain`/ `release`/之类的方法`autorelease`吗？我想我可以使用`__unsafe_unretained id`它，就好像它是一个`void*`（意味着它只做简单的本地作业）？

**环境**：

*   发展于`Xcode 4.4.1`
*   使用`iOS SDK 5.1`
*   `ARC`是`enabled`
*   运行`iPhone 4.3 / 5.0 / 5.1 Simulator`或`iPhone 4.3 Device`
*   两者都崩溃`Debug`并`Release`构建

**源代码**：

```
// Declare my class with 1 member.
@interface MyClass : NSObject
{
    __unsafe_unretained id      m_MyMember;
}
@end

// **************************************************************************************************** //

// Implement my class.
@implementation MyClass

// Setter
-(void)SetMember:(__unsafe_unretained id)member
{
    m_MyMember = member;
}

// Getter: by passing parameter by reference
-(void)GetMember1:(__unsafe_unretained id*)member
{
    *member = m_MyMember;   // No problem.
}

// Getter: by return value
-(__unsafe_unretained id)GetMember2
{
    return m_MyMember;  // Crashed in here!
}

@end

// **************************************************************************************************** //

//! Application entry point.
int main(int argc, char *argv[])
{
    @autoreleasepool
    {       
        {
            // Create an object that dies immediately. deadObj is a dangling pointer.
            __unsafe_unretained id deadObj = [[NSMutableString alloc] initWithFormat:@"%d", 12];

            // Create my object.
            MyClass* myObject = [[MyClass alloc] init];

            // Assign my member.
            [myObject SetMember:deadObj];

            // Get back my member: by passing parameter by reference
            __unsafe_unretained id unsafePointer1;
            [myObject GetMember1:&unsafePointer1];  // No problem.

            // Get back my member: by return value
            __unsafe_unretained id unsafePointer2;
            unsafePointer2 = [myObject GetMember2]; // Crashed in here!

            int BreakpointHere = 0;
        }
    }
} 
```

**调用堆栈**（iPhone 4.3 模拟器/iOS 4.3 设备）：

```
#0  0x011db09b in objc_msgSend ()
#1  0x00106712 in __arclite_objc_retainAutoreleaseReturnValue at /SourceCache/arclite_host/arclite-29.1/source/arclite.m:259
#2  0x00001fec in -[MyClass GetMember2] at /Users/user/SourceCode/main.m:28
#3  0x00002147 in main at /Users/user/SourceCode/main.m:56 
```

**调用堆栈**（iPhone 5.0/5.1 模拟器）：

```
#0  0x014f6d25 in objc_retain ()
#1  0x014f7fe3 in objc_retainAutoreleaseReturnValue ()
#2  0x00001fec in -[MyClass GetMember2] at /Users/user/SourceCode/main.m:28
#3  0x00002147 in main at /Users/user/SourceCode/main.m:56 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:42:35.353

我认为该行为可以用以下信息[3.2.3 来解释。](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#objects.operands.other-returns)*自动引用计数*文档中未保留的[返回值：](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#objects.operands.other-returns)

> 返回可保留对象类型但不返回保留值的方法或函数必须确保对象在返回边界上仍然有效。
> 
> 当从这样的函数或方法返回时，ARC 在返回语句的求值点保留值，然后离开所有局部范围，然后平衡保留，同时确保值跨越调用边界。在最坏的情况下，这可能涉及自动释放，但调用者不能假定该值实际上在自动释放池中。

您的函数`GetMember2`返回一个`id`，它是一个可保留的对象类型。因此 ARC 编译器添加`retain`/`autorelease`调用以确保在函数返回时返回的对象仍然有效。这会崩溃，因为`m_MyMember`它没有指向有效的对象。

将返回类型声明为`(__unsafe_unretained id)`不会改变这种行为，事实上我假设`__unsafe_unretained`这里被忽略了。

# excel - 同名按钮的 Excel 形状行和列

> ID：12952006
> 
> 赞同：0
> 
> 时间：2012-10-18T10:00:36.307
> 
> 标签：excel, vba

我的 excel 07 工作表上有各种相同的形状（相同的名称，相同的函数链接到它）。

我需要知道其中哪一个被按下（左上行/列）。Application.Caller 正确识别了名称，但由于它有多个实例，因此我无法识别它按下了哪个实例。

由于我多次复制这些形状，因此希望它们都被称为相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:01:33.297

根据上面 Tim Williams 的评论，可以通过以下方式唯一地重命名所有形状

```
 Dim sh As Shape
  For Each sh In ActiveSheet.Shapes
       sh.Name = "Button_" & sh.ID
  Next sh 
```

然后 Application.Caller 工作正常。对于某些应用程序，此解决方案可能看起来不太好，但它确实有效。

# iphone - 无法在 UIDatepicker 中解锁前几个月和日期，并且还显示 ios 中的时间

> ID：12952008
> 
> 赞同：3
> 
> 时间：2012-10-18T10:00:55.690
> 
> 标签：iphone, objective-c, ios, xcode, uidatepicker

在我的项目中，我需要显示日期 18 并锁定我尝试过的 100 年，但我知道了，但这里锁定了那一年（1912 年）的日期和月份，我还需要显示那一年的所有日期和月份（ 1912）还有一件事，当我选择日期时它与时间一起显示我不想显示时间任何人都可以解决这个问题![检查当年的屏幕截图](../Images/60253dc259a6fc34c4aad96fa3d44ec9.png) ![显示日期和时间](../Images/b790b8271219fbbdb1fefce9953dda0c.png)

```
 -(IBAction)donePickerView:(id)sender
 {

 NSDate *minDate1 =[datePickerView date];
NSString *theDate = [NSString stringWithFormat:@"%@",minDate1];

 self.dob.text = theDate;
 DatePicView.hidden = TRUE;
  datePickerView.hidden =TRUE;

}
-(void)textFieldDidBeginEditing:(UITextField *)textField {  
   [self scrollViewToCenterOfScreen:textField];
   scrlView.scrollEnabled = FALSE;
    if (textField == dob) 
{
   DatePicView.hidden = FALSE;
   datePickerView.hidden =FALSE;
   NSCalendar * gregorian = [[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar];

   NSDate * currentDate = [NSDate date];

   NSDateComponents * comps = [[NSDateComponents alloc] init];
   [comps setYear: -18];
   NSDate * maxDate = [gregorian dateByAddingComponents: comps toDate: currentDate options: 0];
   [comps setYear: -100];
   NSDate * minDate = [gregorian dateByAddingComponents: comps toDate: currentDate options: 0];

      [datePickerView setMinimumDate:minDate];
   [datePickerView setMaximumDate:maxDate];
   [datePickerView setDate:minDate];
         [dob resignFirstResponder];

       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:06:59.243

您将 maxDate 设置为 -100 年。

所以 maxDate 比 minDate 低，这些应该反过来吗？

```
NSLog(@"Now: %@", currentDate);
NSLog(@"Max: %@", maxDate);
NSLog(@"Min: %@", minDate);

Now: 2012-10-18 10:04:43 +0000
Max: 1994-10-18 11:04:43 +0000
Min: 1912-10-18 11:45:11 +0000 
```

如果您选择 1980-12-12，这将低于最大日期并高于最小日期。

```
UIDatePicker *pickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 0, 320, 300)];
//  add this to display date only.
[pickerView setDatePickerMode:UIDatePickerModeDate];

[pickerView setMinimumDate:minDate];
[pickerView setMaximumDate:maxDate];
[pickerView setDate:minDate];
[[self view] addSubview:pickerView];
[pickerView setDatePickerMode:UIDatePickerModeDate]; 
```

# android - 完全使用适用于 Android 的 xml Mono

> ID：12952013
> 
> 赞同：1
> 
> 时间：2012-10-18T10:01:04.750
> 
> 标签：android, xml, xamarin.android

使用 Mono for Android 在标准平台中读取与 RSS 相同的 XML 文件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:44:57.167

使用 XDocument 类，可以在 System.Xml.Linq 中找到

```
XDocument xdoc = XDocument.Load("data.xml"); 
```

并查看 MSDN 上的文档。

[http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)

# html - 使用列计数时在悬停时显示文本

> ID：12952014
> 
> 赞同：0
> 
> 时间：2012-10-18T10:01:06.060
> 
> 标签：html, css

使用字体，我创建了一些图表。将鼠标悬停在图表上时，图表下方会显示文本。这按预期工作。现在我想创建一个页面，在两列中显示许多图表，我`column-count: 2;`在样式表中完成此操作。但是，现在悬停不适用于所有图表。例如，如果我创建 4 个图表并将它们清楚地显示在彼此下方，则悬停适用于每个单独的图表，但将列数设置为 2 将使悬停仅适用于左侧的两个图表。

CSS 代码：

```
@font-face {
font-family: diagramfont;
src: url("diagramfont.ttf");
}

body {
column-count: 2; /* Removing this instruction and hovering works on all diagrams */
}

.wrapper {
position: relative;
padding-bottom: 30px;
}

.diagram {
font-family: diagramfont;
font-size: x-large;
}

.overlay {
display: none;
position: absolute;
left: 0;
bottom: 0;
text-align: center;
}

.wrapper:hover .overlay {
display: block;
} 
```

xhtml:

```
<body>
<div class="wrapper">
  <div class="diagram">
  Text for diagram
  </div>
  <span class="overlay">
      Text to overlay
  </span>
</div>
<!-- Sequence of diagrams like recent structure --!>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:05:42.513

`</body>`结束标签被注释掉。写成——

```
<!-- Sequence of diagrams like recent structure -->
</body> 
```

尝试添加`column-count: 2;`到`.wrapper`

# oop - 包含和扩展在编程中对应什么？

> ID：12952016
> 
> 赞同：0
> 
> 时间：2012-10-18T10:01:06.887
> 
> 标签：oop, uml

正如 UML 中的泛化对应于继承一样，包含和扩展关系在 OOP 中对应于什么？我确实意识到泛化代表了一种“是”的关系。Include 会代表“有”关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:13:50.710

AFAIK，**包括**在用例图中使用。它显示了特定用例和常见用例之间的依赖关系。

例子：

**在 StackOverflow 上提问** *----include---->* **登录 StackOverflow**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:39:57.993

UML 类图中没有包含或扩展关系。如果您参考用例图，它们在代码级别上没有直接表示，因为您没有将用例实现为软件中的单个工件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:50:39.873

包含意味着直接依赖，这意味着包含用例需要包含用例。扩展意味着您可以在指定点添加到用例中的额外功能。

包含关系的一个示例是当您在 java 中包含一个类时。您必须拥有要执行的代码的类，但这并不意味着您总是调用另一个类。

扩展的一个示例是 eclipse 扩展点，它允许您在指定点为 eclipse 平台定义新功能，但平台不知道扩展。

# java - 如何在非基于 VO 的 ADF RichTable 中实现过滤器？

> ID：12952018
> 
> 赞同：1
> 
> 时间：2012-10-18T10:01:14.377
> 
> 标签：java, filter, oracle-adf

我需要使用以编程方式填充的 ArrayList 填充表，并且我的要求是为该表提供过滤器功能。但是，我还没有找到任何关于这方面的教程，因为大多数表都使用 VO 来填充它们的数据。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:29:06.950

你可以很容易地做到这一点：

制作一个bean，为您的arraylist 插入一个getter 和setter，并将您的bean 转换为DataControl。这样您就可以将其用作 VO（拖放，...）。包括带有过滤器的表。

# ant - ANT 的 JUNIT 的 HTML 报告

> ID：12952019
> 
> 赞同：5
> 
> 时间：2012-10-18T10:01:20.690
> 
> 标签：ant, junit

当测试失败时，如何使用 Ant 从 JUnit 生成 HTML 报告？

没有故障时会生成报告。

另外，我们如何定义我们自己的 XSLT 来生成报告？

**构建.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Ant Example" default="all" basedir=".">
    <property name="project_name" value="junitSamples" />
    <property name="src" location="src" />
    <property name="build" location="build/classes" />
    <property name="lib" location="lib" />
    <property name="reports" location="reports" />

    <target name="init" depends="clean">
        <mkdir dir="${build}" />
        <mkdir dir="${lib}" />
        <mkdir dir="${reports}" />
        <mkdir dir="${reports}/raw/" />
        <mkdir dir="${reports}/html/" />
    </target>

    <target name="compile" depends="init">
        <javac srcdir="${src}" destdir="${build}" description="compile the source code ">
            <classpath>
                <fileset dir="lib">
                    <include name="**/*.jar" />
                </fileset>
            </classpath>
        </javac>
    </target>

    <target name="clean">
        <delete dir="build" />
        <delete dir="${reports}" />
    </target>

    <target name="run-tests" depends="compile">
        <junit printsummary="yes" haltonfailure="yes" showoutput="yes">
            <classpath>
                <pathelement path="${build}" />
                <fileset dir="lib">
                    <include name="**/*.jar" />
                </fileset>
            </classpath>

            <batchtest fork="yes" todir="${reports}/raw/">
                <formatter type="xml" />
                <fileset dir="${src}">
                    <include name="**/*Test*.java" />
                </fileset>
            </batchtest>
        </junit>
    </target>

    <target name="test" depends="run-tests">
        <junitreport todir="${reports}">
            <fileset dir="${reports}/raw/">
                <include name="TEST-*.xml" />
            </fileset>
            <report format="noframes" todir="${reports}\html\" />
        </junitreport>
    </target>

    <target name="all" depends="clean, test" />
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:20:50.007

要指定您自己的样式表，请使用以下`"styledir"`属性：

```
<report styledir="${resources}/junit" format="..." todir="..." /> 
```

如前所述，您必须使用`"junit-noframes.xsl"`样式表名称。

[JUnit 报告文档](http://ant.apache.org/manual/Tasks/junitreport.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-01T05:47:37.303

您设置了 haltonfailure="yes" 这意味着如果一个测试失败，构建操作将停止。这来自 ant 文档：“如果测试失败，则停止构建过程（错误也被视为失败）。” 在这里阅读更多 - [https://ant.apache.org/manual/Tasks/junit.html](https://ant.apache.org/manual/Tasks/junit.html)

# jquery - 如何在 Jquery 中找到 html 标签 id 和选择（下拉） id

> ID：12952022
> 
> 赞同：0
> 
> 时间：2012-10-18T10:01:32.713
> 
> 标签：jquery

在这里我可以找到文本 id，就像我想找到标签 id 并选择 id

```
$('input[type="text"]').focus(function () {
   var id = $(this).attr('id');
   $('#' + id).draggable({ cancel: true });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:03:01.037

您可以将鼠标输入用于标签焦点事件，因为焦点事件不适用于标签。

**[现场演示](http://jsfiddle.net/TDK5e/)**

```
$('label').mouseenter(function () {
      var id = $(this).attr('id');
      $('#' + id).draggable({ cancel: true });
}); 
```

供选择

```
$('select').focus(function () {
      var id = $(this).attr('id');
      $('#' + id).draggable({ cancel: true });
}); 
```

# java - 如何在 Java 中实现无穷大？

> ID：12952024
> 
> 赞同：164
> 
> 时间：2012-10-18T10:01:38.567
> 
> 标签：java, integer, double, long-integer, infinity

对于每种数值数据类型，Java 是否有任何东西可以表示无穷大？它是如何实现的，以便我可以用它进行数学运算？

例如

```
int myInf = infinity; //However it is done
myInf + 5; //returns infinity
myInf*(-1); //returns negative infinity 
```

我尝试过使用非常大的数字，但我想要一个适当、**简单**的解决方案。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-10-18T10:04:20.667

`double`支持无限

```
double inf = Double.POSITIVE_INFINITY;
System.out.println(inf + 5);
System.out.println(inf - inf); // same as Double.NaN
System.out.println(inf * -1); // same as Double.NEGATIVE_INFINITY 
```

印刷

```
Infinity
NaN
-Infinity 
```

注意：`Infinity - Infinity`不是*数字*。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-07-31T14:21:57.317

我假设您使用整数数学是有原因的。如果是这样，您可以通过使用该类的 MAX_VALUE 字段获得在功能上与 POSITIVE_INFINITY 几乎相同的结果`Integer`：

```
Integer myInf = Integer.MAX_VALUE; 
```

（对于 NEGATIVE_INFINITY，您可以使用 MIN_VALUE。）当然会有一些功能差异，例如，当与`myInf`恰好是 MAX_VALUE 的值进行比较时：显然这个数字不小于`myInf`。此外，正如下面的评论中所指出的，增加正无穷大将使您回到负数（而减少负无穷大将使您回到正数）。

还有[一个库](http://jscience.org/experimental/javadoc/constant-values.html#org.jscience.mathematics.algebraic.numbers.Integer.POSITIVE_INFINITY)实际上具有字段 POSITIVE_INFINITY 和 NEGATIVE_INFINITY，但它们实际上只是 MAX_VALUE 和 MIN_VALUE 的新名称。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-18T10:06:03.327

要使用`Infinity`，您可以使用`Double`支持`Infinity`：-

```
 System.out.println(Double.POSITIVE_INFINITY);
    System.out.println(Double.POSITIVE_INFINITY * -1);
    System.out.println(Double.NEGATIVE_INFINITY);

    System.out.println(Double.POSITIVE_INFINITY - Double.NEGATIVE_INFINITY);
    System.out.println(Double.POSITIVE_INFINITY - Double.POSITIVE_INFINITY); 
```

**输出**： -

```
Infinity
-Infinity
-Infinity

Infinity 
NaN 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-18T10:04:32.227

和`Double`类型`Float`具有`POSITIVE_INFINITY`常数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-18T10:05:46.673

我不确定 Java 是否对每种数值类型都有无穷大，但对于某些数值数据类型，答案是肯定的：

```
Float.POSITIVE_INFINITY
Float.NEGATIVE_INFINITY 
```

或者

```
Double.POSITIVE_INFINITY
Double.NEGATIVE_INFINITY 
```

此外，您可能会发现以下文章很有用，它代表了一些涉及 +/- 无穷大的数学运算：[Java Floating-Point Number Intricacies](http://www.concentric.net/~ttwang/tech/javafloat.htm)。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-18T10:25:13.797

只有 Double 和 Float 类型支持`POSITIVE_INFINITY`常量。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2021-04-05T20:06:22.747

整数无穷大：

```
 Integer maxNumber = Integer.MAX_VALUE 
```

双无限

```
 Double maxNumber = Double.MAX_VALUE;
  Double positiveInf = Double.POSITIVE_INFINITY;
  Double negativeInf = Double.NEGATIVE_INFINITY 
```

浮动无穷大

```
 Float positiveInf = Float.POSITIVE_INFINITY;
   Float negativeInf = Float.NEGATIVE_INFINITY
   Float maxNumber = Float.MAX_VALUE; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-18T10:05:29.720

对于数字包装器类型。

例如 Double.POSITVE_INFINITY

希望这可以帮助你。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-07-08T13:24:01.547

一个通用的解决方案是引入一种新类型。它可能涉及更多，但它具有适用于任何未定义其自身无穷大的类型的优势。

如果`T`是一个`lteq`已定义的类型，您可以`InfiniteOr<T>`使用以下内容进行定义`lteq`：

```
class InfiniteOr with type parameter T:
    field the_T of type null-or-an-actual-T
    isInfinite()
        return this.the_T == null
    getFinite():
        assert(!isInfinite());
        return this.the_T
    lteq(that)
        if that.isInfinite()
            return true
        if this.isInfinite()
            return false
        return this.getFinite().lteq(that.getFinite()) 
```

我会留给你把它翻译成确切的 Java 语法。我希望这些想法很清楚；但无论如何，让我把它们拼出来。

这个想法是创建一个新类型，它具有与一些已经存在的类型相同的值，加上一个特殊的值——据你所知，你可以通过公共方法知道——完全按照你希望无穷大的行为方式，例如它大于还要别的吗。我在`null`这里用来表示无穷大，因为这在 Java 中似乎是最直接的。

如果你想添加算术运算，决定它们应该做什么，然后实现它。如果您首先处理无限情况，然后在原始类型的有限值上重用现有操作，这可能是最简单的。

对于在处理右手无穷大之前处理左侧无穷大或反之亦然的惯例是否有益，可能存在也可能不存在一般模式；如果不尝试，我无法判断，但对于小于或等于 ( `lteq`)，我认为首先查看右手边无穷大更简单。我注意到那*不是*`lteq`可交换的，而是和是；也许这是相关的。*`add``mul`*

 *注意：想出一个关于无限值应该发生什么的良好定义并不总是那么容易。它用于比较，加法和乘法，但可能不是减法。此外，您可能需要注意无限基数和序数之间的区别。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-08T16:29:54.523

由于课程编号不是最终的，这里有一个想法，我在其他帖子中还没有找到。即对类号进行子类化。

这将以某种方式提供一个对象，该对象可以被视为 Integer、Long、Double、Float、BigInteger 和 BigDecimal 的无穷大。

由于只有两个值，我们可以使用单例模式：

```
public final class Infinity extends Number {
    public final static Infinity POSITIVE = new Infinity(false);
    public final static Infinity NEGATIVE = new Infinity(true);
    private boolean negative;
    private Infinity(boolean n) {
        negative = n;
    }
} 
```

不知何故，我认为其余的方法 intValue()、longValue() 等应该被覆盖以引发异常。因此，如果没有进一步的预防措施，就无法使用无穷大值。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-02T14:12:57.260

我是 Java 的初学者...我在 Java 文档中找到了另一个实现 infinity 的`boolean`and`double`类型。 [https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3](https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3)

> 正零和负零比较相等；因此表达式 0.0==-0.0 的结果为真，而 0.0>-0.0 的结果为假。但其他操作可以区分正负零；例如，1.0/0.0 的值为正无穷大，而 1.0/-0.0 的值为负无穷大。

它看起来很丑，但它有效。

```
public class Main {

    public static void main(String[] args) {
        System.out.println(1.0/0.0);
        System.out.println(-1.0/0.0);
    }

} 
```*

# jquery - ClearTimeout 找不到变量

> ID：12952028
> 
> 赞同：0
> 
> 时间：2012-10-18T10:01:58.420
> 
> 标签：jquery, timeout, global-variables

我正在使用 jquery 线索提示插件来显示详细的工具提示。我遇到了以下问题中描述的问题，并遵循了已接受答案的建议：

[当鼠标离开链接时关闭提示](https://stackoverflow.com/questions/3246235/close-cluetip-when-mouse-out-of-the-link)

这是我正在使用的代码：

```
if (opts.mouseOutClose) {
    var closectip;
    $cluetip.hover(function() {
    clearTimeout(closectip);
    },
    function() {
    $closeLink.trigger('click');
    });
    $this.hover(function() {
    clearTimeout(closectip);

    }, function() {
    closectip = setTimeout(cluetipClose, 1000);
    });
} 
```

这应该在鼠标移出后隐藏线索提示。这在我第一次查看线索提示并将鼠标移出时有效 - 但是当我随后查看线索提示时，即使没有鼠标移出，它也会在 1 秒后隐藏提示。调试显示以下代码无法正常工作：

```
$this.hover(function() {
    clearTimeout(closectip);
} 
```

这应该确保当我们再次将鼠标悬停在线索提示元素上时清除超时，以便它不会在一秒钟后被隐藏。但是，执行悬停功能时，“closectip”超时变量未定义。

如何使`closectip`超时变量全局化，以便可以从悬停事件中访问和清除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:16:16.427

这是javascript全局变量的描述......

[http://snook.ca/archives/javascript/global_variable](http://snook.ca/archives/javascript/global_variable)

您需要做的就是摆脱变量声明，在所有函数之外声明它，或者声明（并将其称为）`window.closectip`

# php - JSON不读取php mysql numrows count

> ID：12952029
> 
> 赞同：-1
> 
> 时间：2012-10-18T10:01:57.693
> 
> 标签：php, jquery, mysql

```
include_once "connect_to_mysql.php";
$query = mysql_query("SELECT * FROM  data WHERE Email = '$email'");
$num = array();
//Caculate the number of rows that have macthing username
$numrows = mysql_num_rows($query);
$num[] = $numrows;

if ($num != 0){
    $data = array('success' => 'true', 'message' => 'Incorrect Email');
    echo json_encode($data);
} 
```

if 语句没有被处理并且没有 JSON 数据被回显，而是脚本冻结。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:09:46.860

```
$result = mysql_query("SELECT COUNT(*) AS num FROM data WHERE Email = '$email'");
$row = mysql_fetch_array($result, MYSQL_ASSOC);
$num = intval($row['num']);
if ($num != 0) {
    $data = array('success' => 'true', 'message' => 'Email found');
} else {
    $data = array('success' => 'false', 'message' => 'Incorrect Email');
}
echo json_encode($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:29:48.813

我不明白你为什么要使用`$num[]`.

```
include_once "connect_to_mysql.php";
$email = $_POST['email'];
$query = mysql_query("SELECT * FROM  data WHERE Email = '$email'");
 $numrows = mysql_num_rows($query);
    if ($numrows != 0){
        $data = array('success' => 'true', 'message' => 'Correct Email');
        echo json_encode($data);
    }else{
        $data = array('success' => 'false', 'message' => 'Incorrect Email');
        echo json_encode($data);
    } 
```

尝试使用以下 Jquery：

```
$.post('your_file.php',{email: 'your_email'},function(data){
  alert(data.success + ' ' + data.message);
},'json'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:29:40.280

您正在将标量值提取`$numrows`到数组`$num[]`中，因此出现错误。尝试`$numrows`直接在 if 语句中使用，如下所示：

```
if ($numrows != 0){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:46:54.070

```
$query = mysql_query("SELECT * FROM  data WHERE Email = '$email'");
if(mysql_num_rows($query)){
$data = array('success' => 'true', 'message' => 'Email found');
}
else{
$data = array('success' => 'false', 'message' => 'Incorrect Email');
}
echo json_encode($data); 
```

# android - 使 tabwidget 的孩子大于 tabwidget

> ID：12952032
> 
> 赞同：1
> 
> 时间：2012-10-18T10:02:02.307
> 
> 标签：android, tabwidget

我在选项卡小部件上有 5 个按钮，左起 2 个，右起 2 个与 tabwidget 的背景大小相同。中央按钮需要比 tabwidget 高两倍。

如果我将所有按钮都放到 tabhost 中，tabhost 的大小会上升到最大的按钮（中央按钮）。如何预防？

我想做这样的东西。标签栏的背景高度需要等于红色方块的高度。

![我想做这样的东西](../Images/3e18bb02bb3e4b30e46e79c164bdf1fc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:06:09.400

是的，您可以按照 Xml 代码执行此操作 -

**center_tab_indicator.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dip"
    android:layout_height="65dip"    
    android:layout_weight="1"
    android:orientation="vertical" 
    android:background="@drawable/center_tab_indicator"       
    android:padding="5dp">

    <ImageView android:id="@+id/icon"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/camera"
        android:scaleType="center"/> 

</RelativeLayout> 
```

**tab_indicator.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="0dip"
    android:layout_height="55dip"    
    android:layout_weight="1"
    android:orientation="vertical"
    android:layout_marginTop="10sp"
    android:background="@drawable/tab_indicator"
    android:padding="5dp">

    <ImageView android:id="@+id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:src="@drawable/icon" /> 

    <TextView android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" 
        android:layout_centerHorizontal="true"
        style="?android:attr/tabWidgetStyle"
    />    
</RelativeLayout> 
```

通过使用以上两个 XML 你可以得到你想要的输出。有关更多信息，请查看[此处](https://stackoverflow.com/a/6992662/940096) 您将获得如下输出 -

![图片](../Images/2a6f5bfbce9e3373952d505053b14fa8.png)

看看那个。还将提供示例项目。希望它可以帮助你。

# mysql - 如何优化透视表的条件检查？

> ID：12952034
> 
> 赞同：3
> 
> 时间：2012-10-18T10:02:03.943
> 
> 标签：mysql, query-optimization

在[最近的一个问题](https://stackoverflow.com/questions/12931709/how-to-store-data-pairs-in-a-mysql-database/12932652)中，StevieG 向我展示了如何使用数据透视表解决我的问题。新问题是我必须检查透视表的一些条件。让我们进行最后的查询：

```
SELECT 
  c.id, 
  GROUP_CONCAT(if(d.name = 'p1', d.value, NULL)) AS 'p1', 
  GROUP_CONCAT(if(d.name = 'p2', d.value, NULL)) AS 'p2', 
  GROUP_CONCAT(if(d.name = 'p3', d.value, NULL)) AS 'p3', 
  GROUP_CONCAT(if(d.name = 'p4', d.value, NULL)) AS 'p4', 
  GROUP_CONCAT(if(d.name = 'p5', d.value, NULL)) AS 'p5', 
  GROUP_CONCAT(if(d.name = 'p6', d.value, NULL)) AS 'p6'
FROM container c
JOIN data d ON c.id = d.container
GROUP BY c.id 
```

显然我不能添加 WHERE 子句（例如，如果我想检查 p5>30）。我找到了两种方法来克服这个问题。首先是通过在派生表中转换它：

```
SELECT * FROM (
    SELECT 
      c.id, 
      GROUP_CONCAT(if(d.name = 'p1', d.value, NULL)) AS 'p1', 
      GROUP_CONCAT(if(d.name = 'p2', d.value, NULL)) AS 'p2', 
      GROUP_CONCAT(if(d.name = 'p3', d.value, NULL)) AS 'p3', 
      GROUP_CONCAT(if(d.name = 'p4', d.value, NULL)) AS 'p4', 
      GROUP_CONCAT(if(d.name = 'p5', d.value, NULL)) AS 'p5', 
      GROUP_CONCAT(if(d.name = 'p6', d.value, NULL)) AS 'p6'
    FROM container c
    JOIN data d ON c.id = d.container
    GROUP BY c.id
) WHERE p5>30 
```

我发现的另一种方法是添加一个 HAVING 子句：

```
SELECT 
  c.id, 
  GROUP_CONCAT(if(d.name = 'p1', d.value, NULL)) AS 'p1', 
  GROUP_CONCAT(if(d.name = 'p2', d.value, NULL)) AS 'p2', 
  GROUP_CONCAT(if(d.name = 'p3', d.value, NULL)) AS 'p3', 
  GROUP_CONCAT(if(d.name = 'p4', d.value, NULL)) AS 'p4', 
  GROUP_CONCAT(if(d.name = 'p5', d.value, NULL)) AS 'p5', 
  GROUP_CONCAT(if(d.name = 'p6', d.value, NULL)) AS 'p6'
FROM container c
JOIN data d ON c.id = d.container
GROUP BY c.id
HAVING p5>30 
```

问题在于性能。我正在使用一个包含 50.000 个条目的测试数据库，但产量可能会达到 100 万个。第一个句子（没有检查 p5>30 的那个）在我的开发计算机上执行 1000 个句子需要 0'60 秒（没有缓存），但是第二个和第三个需要 5 多分钟才能完成。

我知道有一个没有数据索引的隐式派生表生成，但是我有哪些优化它的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:34:26.533

由于`data(container, name)`是唯一的，因此您不需要使用`GROUP_CONCAT`. 那这个呢：

```
SELECT 
  c.id, 
  d_p1.value AS 'p1', 
  d_p2.value AS 'p2', 
  d_p3.value AS 'p3', 
  d_p4.value AS 'p4', 
  d_p5.value AS 'p5'
FROM container AS c
LEFT JOIN data AS d_p1 ON (d_p1.container = c.id AND d_p1.name = 'p1')
LEFT JOIN data AS d_p2 ON (d_p2.container = c.id AND d_p2.name = 'p2')
LEFT JOIN data AS d_p3 ON (d_p3.container = c.id AND d_p3.name = 'p3')
LEFT JOIN data AS d_p4 ON (d_p4.container = c.id AND d_p4.name = 'p4')
LEFT JOIN data AS d_p5 ON (d_p5.container = c.id AND d_p5.name = 'p5')
WHERE d_p5.value > 30 
```

如果 上有索引`data(container, name)`，您的查询应该在几秒钟内运行。

如果`data.name`长度超过几个字符（比如 5 个字符），您可能应该使用代理（整数）键而不是`data.name`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:33:37.213

我将接近 Yak 的尝试，但如果您只寻找“p5.value”大于零的条目，我会重组以仅获取具有 P5 作为“预查询”的条目。如果您有 100,000 条记录，并且只有 20,000 条的“P5.value”大于您的范围 30，则只获取那些第一个...然后加入其余的...此外，请确保您在“数据”表上有一个索引“名称，值”作为索引...此外，确保“容器，名称”上的索引

第一个预查询将已经“连接”符合一个容器的 P5 值，然后作为连接的结果获取其他值

```
select STRAIGHT_JOIN
      PreQuery.QualifiedContainer ID,
      coalesce( d_p1.Value, ' ' ) p1,
      coalesce( d_p2.Value, ' ' ) p2,
      coalesce( d_p3.Value, ' ' ) p3,
      coalesce( d_p4.Value, ' ' ) p4,
      PreQuery.P5Value  p5,
      coalesce( d_p5.Value, ' ' ) p6
   from
      ( select 
              JustP5.Container as QualifiedContainer,
              JustP5.Value as P5Value
           from
              Container JustP5
           where
                  JustP5.Name = 'p5'
              AND JustP5.Value > 30 
           group by
              JustP5.Container ) as PreQuery

         LEFT JOIN data AS d_p1 
            ON PreQuery.QualifiedContainer = d_p1.container
           AND d_p1.name = 'p1'

         LEFT JOIN data AS d_p2
            ON PreQuery.QualifiedContainer = d_p2.container
           AND d_p2.name = 'p2'

         LEFT JOIN data AS d_p3
            ON PreQuery.QualifiedContainer = d_p3.container
           AND d_p3.name = 'p3'

         LEFT JOIN data AS d_p4
            ON PreQuery.QualifiedContainer = d_p4.container
           AND d_p4.name = 'p4'

         LEFT JOIN data AS d_p6
            ON PreQuery.QualifiedContainer = d_p6.container
           AND d_p6.name = 'p6' 
```

根据您引用的另一个问题，我认为不需要“分组依据”......因为对于给定容器，您只有一次给定“名称/值”对的实例......如果我不正确，那么我要做的就是将 COALESCE() 更改为 GROUP_CONCAT() 并添加 GROUP BY PreQuery.QualifiedContainer

# c++ - 当 name = null 时，getsockname 行为

> ID：12952037
> 
> 赞同：1
> 
> 时间：2012-10-18T10:02:15.437
> 
> 标签：c++, windows, null, winsock2

我在 windows 中有调用 getsockname 的代码，如下所示：

```
getsockname(*x,NULL,0) 
```

第三个参数（namelen）是 IN\Out 参数，包含名称缓冲区的大小，以字节为单位。返回时，namelen 参数包含 name 参数的实际大小（以字节为单位）。
现在，我的问题是如果 name 等于 null 并且 namelen 等于 0 会发生什么？我在 linux 中看到过，如果 name 为 NULL，namelen 将被忽略，但 MSDN 没有提及这种情况。 . MSDN 链接在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738543%28v=vs.85%29.aspx) linux 的 IBM 链接在[这里](http://publib.boulder.ibm.com/infocenter/zos/v1r12/index.jsp?topic=/com.ibm.zos.r12.bpxbd00/getsn.htm)

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:25:47.373

在您的代码中，您为第三个参数传递了零。

第三个参数不能为空，根据规范，它必须是一个指向整数的指针，给出第二个参数的长度，输出时给出地址的实际大小。传递零并不*意味着*您说没有分配存储空间，这意味着您说您没有传递信息，也没有在任何地方写入输出值。

根据 MSDN 和 Linux 文档，该函数应返回 -1 并设置`errno`为`EFAULT`（或 WSAGetLastError`WSAEFAULT`在 Windows 套接字中设置为 on）。这被定义为“使用指定的 name 和 namelen 参数将导致尝试访问调用者地址空间之外的存储。”

然而，这不是 Posix 规范的一部分，我不认为它***需要***检查地址的功能 - 只是它可以。换句话说，至少在 Posix 中，这是未定义的行为。这意味着任何事情都可能发生。

在 Linux 中，您说您观察到如果传递 null，则忽略这两个参数。我怀疑您的代码没有检查返回值，它可能是 -1 并`errno`设置为`EFAULT`.

Posix 函数不会抛出异常。您应该检查返回码，可能是这样的：

```
int result = getsockname(*x,NULL,0); 
if(result){
    /*Failed - handle here*/ 
} 
```

# asp.net - 使用 StateServer 服务时查询会话数据

> ID：12952040
> 
> 赞同：0
> 
> 时间：2012-10-18T10:02:21.417
> 
> 标签：asp.net, session, session-state, stateserver, inproc

在 .NET 4.0 Web 应用程序中使用 StateServer 服务时，有人知道查询所有活动会话的方法吗？

在我的场景中，当用户导航到我们的一个合作伙伴站点时，我正在设置一段会话数据。然后，合作伙伴站点会定期调用我们站点上的服务，以验证会话是否仍处于活动状态并返回一些其他数据。

当我最初使用 InProc 会话时，我设法让它工作，使用中概述的解决方案：[列出所有活动的 ASP.NET 会话](https://stackoverflow.com/questions/1470334/list-all-active-asp-net-sessions)，但是当我切换到使用 StateServer 服务时，这些技术不起作用，我无法查询会话.

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:41:05.550

我建议您阅读这篇文章 -[计算当前活动的会话](http://www.drdobbs.com/counting-the-currently-active-sessions/184416793)

> 会话状态存储在名为 ASPState 的数据库中。该数据库包括几个存储过程，并为 TempDB 数据库创建了几个表。这些表称为 ASPStateTempApplications 和 ASPStateTempSessions。了解当前有多少会话处于活动状态就像对 AspStateTempSessions 表运行 SELECT 一样简单。如果会话在 StateServer 模式下工作，这些技巧都不起作用。

参考： [会话状态管理](http://www.dotnetjohn.com/articles.aspx?articleid=249)
[安装 .NET 3.5 SP 后 ASP.NET 会话活动计数器（不是状态服务器）显示无效数字！](http://davidovitz.blogspot.in/2009/03/aspnet-sessions-active-counter-not.html)
[计算 ASP.Net](http://web-matters.blogspot.in/2009/11/count-active-sessions-in-aspnet.html)中的活动会话数，与您在问题中指定的链接有些相同。

# android - Android CookieManager 无法刷新 cookie

> ID：12952045
> 
> 赞同：1
> 
> 时间：2012-10-18T10:02:39.247
> 
> 标签：android

目前在我的 Android 应用程序中，我正在使用`CookieManager`和`CookieSyncManager`. 我注意到的是，cookie 没有正确更新。

例如：

```
Android ----> Server: No cookie
Server  ----> Android: Cookie C1
Android ----> Server: Cookie C1 (Correct)
Server  ----> Android: Cookie C2
Android ----> Server: Cookie C1 C2 (Incorrect) 
```

由于返回了 2 个 cookie，服务器端拒绝了交易。

我试图强制同步，但问题仍然存在。我什至试图增加一些睡眠，但它也没有帮助。

关于我还能尝试什么的任何建议？

非常感谢。

问候安德鲁

```
cookieManager = CookieManager.getInstance();

cookieInput = cookieManager.getCookie(Constants.HOST_URL);

write("Cookie from CookieManager 4:" + cookieInput);

cookieManager.removeAllCookie();

//SystemClock.sleep(2000);

cookieManager = CookieManager.getInstance();

cookieInput = cookieManager.getCookie(Constants.HOST_URL);

write("Cookie from CookieManager 5:" + cookieInput);

cookieManager.removeSessionCookie();

cookieManager.removeAllCookie();

//SystemClock.sleep(2000);

//CookieSyncManager.getInstance().sync();

cookieManager.setCookie(Constants.HOST_URL, cookieString);

cookieManager.setCookie(Constants.HOST_URL, cookieString1);

cookieManager.setCookie(Constants.HOST_URL, cookieString2);

//SystemClock.sleep(5000);

cookieManager = CookieManager.getInstance();

cookieInput = cookieManager.getCookie(Constants.HOST_URL);

write("Cookie from CookieManager 6:" + cookieInput); 

CookieSyncManager.getInstance().sync();

//SystemClock.sleep(30000); 
```

# linux - 如何在 linux shell 中正确使用 open 命令？

> ID：12952047
> 
> 赞同：-3
> 
> 时间：2012-10-18T10:02:46.200
> 
> 标签：linux, shell

我想打开一个 C 程序 /Users/abc/Desktop/thread_sock。

```
localhost:~ abc$ /Users/abc/Desktop/thread_sock 2 1 
```

2and1 是我的参数。但现在我想使用 open 命令。所以我输入

```
localhost:~ abc$ open /Users/abc/Desktop/thread_sock 2 1. 
```

但它失败了。结果是

```
The files /Users/abc/2 and /Users/abc/1 do not exist. 
```

我也试过

```
localhost:~ abc$ open /Users/abc/Desktop/thread_sock --args 2 1. 
```

就像'man open'说的那样。但它失败了。所以boaring.....看起来很容易。但我无法解决......正确的格式是什么？？？？？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:21:18.073

请查看[open 命令的手册页](http://linux.about.com/library/cmd/blcmdln_open.htm)，它可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:05:38.970

语法应该是（来自记忆）

```
$ /Users/abc/Desktop/thread_sock 2 1 
```

只需提供二进制文件的路径即可运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:12:23.143

在linux中打开一个C程序文件

```
 localhost:~ abc$ vim /Users/abc/Desktop/thread_sock.c 
```

您可以使用`vim,view ,less`可以在终端中使用的命令

运行文件：

```
 localhost:~ abc$ /Users/abc/Desktop/thread_sock 2 1 
```

# liferay - 登录后向用户显示警告消息

> ID：12952048
> 
> 赞同：0
> 
> 时间：2012-10-18T10:02:55.777
> 
> 标签：liferay, liferay-6

我有一个 Liferay 应用程序，其中用户有一个“会员计划”。当用户登录时，我需要检查他们的会员计划是否已过期并向他们显示警告消息。（会员计划独立于登录功能。即使他/她的会员计划已过期，用户仍然可以登录）。

我想创建一个登录后操作。但我无法`MemberPlanLocalServiceUtil.isPlanExpired()`从此或我创建的任何其他挂钩访问我的服务构建器方法 ( )。

我应该使用什么方法来解决这个问题？这里需要一个ext插件吗？或者我可以做点别的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:02:05.673

可以使用applicationContext.xml来实现，在WEB-INF中创建一个applicationContext.xml，把所有的bean引用都放在里面。在 Web.xml 和监听器类中设置上下文参数。

上下文参数

```
<context-param>
    <param-name>portalContextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

监听类

```
<listener>
    <listener-class>com.liferay.portal.kernel.spring.context.PortletContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>com.liferay.portal.kernel.servlet.SerializableSessionAttributeListener</listener-class>
</listener>
<listener>
    <listener-class>com.liferay.portal.kernel.servlet.HookContextListener</listener-class>
</listener> 
```

作为参考，您可以查看这篇文章 [http://www.liferay.com/zh/web/raymond.auge/blog/-/blogs/custom-velocity-tools-and-liferay-6-0](http://www.liferay.com/zh/web/raymond.auge/blog/-/blogs/custom-velocity-tools-and-liferay-6-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:51:44.283

您将“登录后操作”添加到 MemberPlan-Portlet（插件）。为此，您需要将钩子添加到您的 portlet。portlet 应该扩展`login.events.post=com.mypackage.MyLoginPostAction`，有关详细信息，请参阅 [http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/extending-and-overriding-%3Cem%3Eportal-properties-lt-e- 1](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/extending-and-overriding-%3Cem%3Eportal-properties-lt-e-1) .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:06:02.367

我最终解决了这个问题。（这是需要快速解决方案的情况之一，而且是一个肮脏的解决方案）

这就是我所做的

我添加了一个`LoginAction`在其中设置会话属性的：

```
public void run(HttpServletRequest request, HttpServletResponse response) throws ActionException {
        HttpSession session = request.getSession();
        session.setAttribute("LIFERAY_SHARED_checkMemberExpiry", true);
} 
```

然后，在主页上的 portlet 中，我检查是否设置了此会话属性，并在需要时显示我的警告消息。

# struts2 - 发送 URL 消息作为参数

> ID：12952059
> 
> 赞同：0
> 
> 时间：2012-10-18T10:03:58.293
> 
> 标签：struts2

在我使用的 servlet 中

```
 response.sendRedirect("index.jsp?msg=Login failed"); 
```

后发信息？在重定向时发送消息。如何用struts2做同样的事情

由于重定向是通过 struts.xml

```
 <result name="error">/index.jsp</result> 
```

我只是struts框架的初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:23:59.133

在您的动作类中扩展`ActionSupport`：

```
addActionError("Login failed"); 
```

在你的 index.jsp 中：

```
<s:actionerror/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:26:48.087

```
<result name="error" type="redirect" >
  <param name="location">index.jsp?msg=${actionMessage}</param>
  <param name="parse">true</param>
  <param name="encode">true</param>
</result> 
```

# android - Galaxy Note 10.1 多屏 API？

> ID：12952066
> 
> 赞同：0
> 
> 时间：2012-10-18T10:04:13.340
> 
> 标签：android

Galaxy Note 10.1 支持在单个屏幕上运行多个应用程序，基本上将其分成两半。这仅适用于有限的三星应用程序集。我在我的应用程序中找不到任何 SDK 或 API 来支持它，有什么方法可以模拟吗？

这就是我所说的：[http ://www.youtube.com/watch?v=nBii6rp5YNg](http://www.youtube.com/watch?v=nBii6rp5YNg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:16:23.450

我从一个与 Sammy 相关的人那里得到了一些信息。

我不知道细节。

但他告诉清单文件的类别支持它。没有特殊的 API。

我认为您可以通过分析反编译的清单文件找到方法。

其实这是 Galaxy Note 2 的多视图故事。但我猜 Galaxy Note 10.1 的技术和这个是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:12:39.973

以下链接谈论始终在所有视图顶部有一个按钮：

[创建系统覆盖窗口（始终在顶部）](https://stackoverflow.com/questions/4481226/creating-a-system-overlay-always-on-top-button-in-android)

这可能会帮助您获得应用程序的立足点。

# php - 在while循环中错误地写入数组变量

> ID：12952067
> 
> 赞同：0
> 
> 时间：2012-10-18T10:04:17.980
> 
> 标签：php, while-loop

我想将变量存储到我的 mysqli:fetch() 语句的 while 循环中，问题是我认为我编写的代码不正确。特别是对于变量`$dataArraySession`，任何人都可以查看下面的代码并说明编写下面代码的正确方法是什么：

```
 $sessionquery = "
             SELECT SessionId, SessionDate, SessionTime, ModuleId
             FROM Session
             WHERE
             (ModuleId = ?)
             ORDER BY SessionDate, SessionTime 
            ";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("s",$_POST['modulesDrop']);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId);

 $sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

    $dataArraySession = array();

 while ( $sessionqrystmt->fetch() ) { 

 $dataArraySession[$dbModuleId]['Sessions'][$dbSessionId]['SessionDate'] = $dbSessoonDate['SessionTime'] = $dbSessionTime; 

}

foreach ($dataArraySession as $sessionId => $sessionData) {

   $sessionHTML = ""; 
   $sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL;
   $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           
   $sessionHTML .= "<option value='$sessionId'>" . $sessionId . " - " . $sessionData['SessionDate']. " - " . $sessionData['SessionTime'] ."</option>".PHP_EOL;        
   $sessionHTML .= '</select>';
        }

 if ($sessionnum > 0) {

 ?>

     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Sessions: <?php echo $sessionHTML; ?><input id="sessionSubmit" type="submit" value="Submit" name="sesionsubmit" /></p>      
    </form>       

<?php

}

else {
 echo "<p>Sorry, You have No Sessions under this Module</p>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:06:28.437

看起来你打错了：

```
$dbSesisonDate['SessionTime']
     ^^^ 
```

如果您在开发环境中有 on，也应该抛出`undefined variable`错误。`display_errors`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:56:34.673

您的代码中有几个错误：

1.  后

    ```
    $dataArraySession = array(); 
    ```

    ,`$dataArraySession`是一个数组，仅此而已。所以分配

    ```
    $dataArraySession[$dbModuleId]=something; 
    ```

    有效，但访问/分配

    ```
    $dataArraySession[$dbModuleId]["Sesssions"] 
    ```

    （在你的while循环中）是无效的，因为`$dataArraySession[$dbModuleId]`它仍然是未定义的；

2.  `$dbSessionDate`是 的一个绑定值`$sessionqrystmt->bind_result()`，所以它可能是一个字符串或一个数字，所以

    ```
    ... = $dbSessionDate['SessionTime'] = ... 
    ```

    无效，因为它只是一个字符串，而不是数组；

3.  在您的输出循环中，您还回显了无效变量。

    在您的 while 循环中，`$dataArraySession`定义为

    ```
    array(
      [module_id]s => array(
        'Sessions' => array (
          [session_id]s => array (
            'SessionDate' => _value_
          )
        )
      )
    ) 
    ```

    所以随着

    ```
    foreach ($dataArraySession as $sessionId => $sessionData) 
    ```

    ,`$sessionData`仅在 的级别`'Sessions' => array (...`，因此`$sessionData`只有一个键，`'Sessions'`，并且两者`$sessionData['sessionDate']`和`$sessionData['sessionTime']`都是无效的。

# sql-server - 执行 UPDATE 时，是否有全局方法将日期时间设置为 GETDATE()？

> ID：12952072
> 
> 赞同：2
> 
> 时间：2012-10-18T10:04:25.833
> 
> 标签：sql-server

我有一个数据库模型，其中每个表都有一个`datetime`名为 _CDateTime 的字段。

编辑行时，SQL Server`INSERT`会将默认值`GETDATE()`写入此字段。

`UPDATE`另一方面，当对一行发出 an 时，SQL Server 不会自动更新 _CDateTime 字段。

我知道我可以使用`timestamp`日期类型，但这并不能传达任何时间信息（与其名称相反）。

另一种解决方案是为每个表编写一个触发器，但这是很多工作。

所以问题是：是否有任何全局方式可以像全局触发器一样在其中一个数据库表中更新行并自动将 _CDateTime 字段设置为当前日期和时间时触发？

PS：这个问题的答案表明没有这样的东西：[Multi table Triggers SQL Server noob](https://stackoverflow.com/questions/2619937/multi-table-triggers-sql-server-noob)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:12:50.870

您需要一个 UPDATE 触发器来将 getdate() 应用于 _CDateTime 字段，或者您必须在每次更新时提交 _CDateTime = getDate()。没有自动的方法可以做到这一点

# symfony - Symfony 2 - 重新排列表单域

> ID：12952074
> 
> 赞同：7
> 
> 时间：2012-10-18T10:04:27.827
> 
> 标签：symfony, symfony-forms, symfony-2.1

在我们的 Symfony2 项目中，我们有一个非常复杂的带有嵌入式表单的表单结构......现在我们需要按特定顺序输出表单。

这就是问题所在：我们使用 form_widget(form)，现在我们正在寻找对象中的解决方案（例如通过注释）或 formbuilder 将特定字段移动到表单的末尾。在 symfony 1.4 中，它是 widget-movefield() 函数，我猜......

谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-25T10:24:06.607

您可以使用此捆绑包重新排序字段：[https ://github.com/egeloen/IvoryOrderedFormBundle](https://github.com/egeloen/IvoryOrderedFormBundle)

这使您可以执行以下操作：

```
$builder
->add('g', 'text', array('position' => 'last'))
->add('a', 'text', array('position' => 'first'))
->add('c', 'text')
->add('f', 'text')
->add('e', 'text', array('position' => array('before' => 'f')))
->add('d', 'text', array('position' => array('after' => 'c')))
->add('b', 'text', array('position' => 'first')); 
```

这将是核心，但被拒绝并被拉成一个包。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-08T10:39:02.650

今天与表单元素排序有同样的问题。

最终得到了一个 trait，它将覆盖 finishView 方法并重新排序 FormView 的 children 属性中的项目：

```
trait OrderedTrait
{
    abstract function getFieldsOrder();

    public function finishView(FormView $view, FormInterface $form, array $options)
    {
        /** @var FormView[] $fields */
        $fields = [];
        foreach ($this->getFieldsOrder() as $field) {
            if ($view->offsetExists($field)) {
                $fields[$field] = $view->offsetGet($field);
                $view->offsetUnset($field);
            }
        }

        $view->children = $fields + $view->children;

        parent::finishView($view, $form, $options);
    }
} 
```

然后在类型中实现 getFieldsOrder 方法：

```
use OrderedTrait;

function getFieldsOrder()
{
    return [
        'first',
        'second',
        'next',
        'etc.',
    ];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-12T10:49:48.553

这是我想出的解决方案。

我创建了一个我的类型扩展的类。

```
namespace WF\CORE\CoreBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class WfBaseForm extends AbstractType
{

    protected function useFields(FormBuilderInterface $builder, $fields)
    {
        foreach ($builder->all() as $field) {

            if (!in_array($field->getName(), $fields))
                $builder->remove($field->getName());
        }
    }

    public function reorder(FormBuilderInterface $builder, $keys = array())
    {
        $fields         = $builder->all();
        $ordered_fields = array_merge(array_flip($keys), $fields);
        $this->useFields($builder, array());

        foreach($ordered_fields as $field)
            $builder->add($field);

    }

    public function getName()
    {
        return 'base';
    }
} 
```

然后你可以在你继承的类中使用它。

```
class AddressType extends WfBaseForm
{ 
public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // I add as many fields as I need
        $builder->add( '…');
} 
```

这个类扩展了上面的一个

```
class ModifyAddressType extends BaseType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        parent::buildForm($builder, $options);

        $builder->add('title', 'text', array('constraints' => array(new NotBlank())));

        $this->reorder($builder, array('title', 'firstname', 'lastname'));
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T11:12:01.477

无需“重新排序”字段。您需要做的就是单独调用`form_label`和/或`form_widget`为每个字段调用。假设你使用`Twig`你可以，例如，做：

```
<div>{{ form_label(form.firstName) }}</div>
<div>{{ form_widget(form.firstName) }}</div>

<div>{{ form_label(form.lastName) }}</div>
<div>{{ form_widget(form.lastName) }}</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-22T08:44:27.937

我有同样的问题，但以不同的方式解决了它。这是我的解决方案，作为寻找此问题的其他人的想法。

您可以在事件侦听器中添加所有表单字段，因为在这里您拥有所有对象数据来决定字段顺序。例如，您可以使用数据对象中的方法来决定字段顺序：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    // Don't use $builder->add(), or just for those fields which are always 
    // at the beginning of the form.

    $builder->addEventListener(FormEvents::PRE_SET_DATA, function (FormEvent $event) {
        $entry = $event->getData();
        $form = $event->getForm();

        // Now add all the fields in the order you need them to be, e.g by reading
        // the needed order from the data entry. 
        if ($entry->isFieldAFirst()) { 
             $form->add(fieldA);
             $form->add(fieldB);
        } else {
            $form->add(fieldB);
            $form->add(fieldA);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-18T06:55:42.933

据我了解，您只想在最终模板中使用 form_widget(form) 。

假设我们有两个继承的模型（ModelA、ModelB）和它们的表单类型（ModelAType、ModelBType）

```
class ModelA {
  private $A;
  private $B;

  // Getters and setters
}

class ModelB extends ModelA {
  private $C;

  // Getters and setters
}

/**
 * @DI\Service(id = "form.type.modelA")
 * @DI\Tag("form.type", attributes={ "alias":"model_a_type" })
 */
class FormAType extends AbstractType {
  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    $builder
      ->add('A')
      ->add('B')
    ;
  }

   // getName and so on
}

/**
 * @DI\Service(id = "form.type.modelA")
 * @DI\Tag("form.type", attributes={ "alias":"model_b_type" })
 */
class FormAType extends AbstractType {
  public function getParent() {
    return "model_a_type";
  }

  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    $builder
      ->add('C')
    ;
  }

   // getName and so on
} 
```

如果你渲染formB，你会得到A，B，C的顺序，但是你想要A，C，B。为此，请创建表单模板并添加对应用程序的引用。配置文件：

```
#app/config/config.yml
twig:
   ....
    form:
        resources:
            - YourAppBundle:Form:fields.html.twig

{# src/YourAppBundle/Resources/views/Form/fields.html.twig #}
{% block model_a_type_widget %}
   {{ form_widget(form.A) }}
   {{ form_widget(form.B) }}
{% endblock model_a_type_widget %}

{% block model_b_type_widget %}
   {{ form_widget(form.A) }}
   {{ form_widget(form.C) }}

   {{ block('model_a_type_widget') }}
{% endblock model_b_type_widget %} 
```

现在，当您渲染 formB 时，您将看到所需的顺序并保持代码结构化。发生这种情况是因为每个小部件只渲染一次，所以如果您在调用父块之前渲染它，您将更改它们的顺序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-04T22:34:17.333

在渲染模板之前，您可以在控制器中执行此操作：

```
$form = ...

$view = $form->createView();

// Perform standard array operations to reorder: `$view->children`
// Here's a very simple example:

$firstField = $view->children['firstField'];
unset($view->children['firstField']);
$view->children['firstField'] = $firstField;

return array('form' => $view); 
```

`uasort`也可以，但是`usort`会创建一个非关联数组，稍后会破坏表单呈现。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-01T07:16:02.157

```
{{ form_start(form) }}

    <div>{{ form_label(form.title) }}</div>
    <div>{{ form_widget(form.title,{'id': 'blog_title'} )}}</div>

    <div>{{ form_label(form.tag) }}</div>
    <div>{{ form_widget(form.tag,{'id': 'blog_tag'} )}}</div>

    <div>{{ form_label(form.category) }}</div>
    <div>{{ form_widget(form.category,{'id': 'blog_category'} )}}</div>

    <div>{{ form_label(form.image) }}</div>
    <div>{{ form_widget(form.image,{'id': 'blog_image'} )}}</div>

    <div>{{ form_label(form.body) }}</div>
    <div>{{ form_widget(form.body,{'id': 'editor'} )}}</div>

    <input type="submit" class="btn btn-success" value="Create" />
{{ form_end(form) }} 
```

# jquery - ajax jQuery请求是否有最大数据长度

> ID：12952075
> 
> 赞同：6
> 
> 时间：2012-10-18T10:04:27.067
> 
> 标签：jquery, ajax, max

我有以下 jQuery click() 函数，需要通过 ajax 将表单数据发送到数据库。

```
$("#maandbutton").live('click', function(event) {
    $.get("ajax.php",{"action":"addm","maandtekst":$('#maandtekstinput').val(),"maand":$('#maandselect').val(),"bovenonder":$('#bovenonder').val()},function(msg){
       $("#maandtable").append($('<tr><td class="left">' + $('#maandtekstinput').val() + '</td><td class="right">' + $('#bovenonder').val() + '</td><td class="right">' + $('#maandselect').val() + '</td><td class="icon"></td></tr>'));
       $('table.zebra tr').removeClass('odd');
       $('table.zebra tr:odd').addClass('odd');
       $('#maandtekstinput').val('');
       $('#maandselect').val('');
       $('#bovenonder').val('');
       $("#maandbutton").button({ disabled: true });
   })
}); 
```

问题是，如果 textarea #maandtekstinput 中有很多文本，则只有附加功能有效，但数据无法到达我的 sql 数据库。

我的 ajax.php 脚本有一个简单的 switch 语句。

```
$maandtekst = htmlspecialchars($_GET['maandtekst']);

switch($_GET['action'])
{
    case 'addm':
        $query = "INSERT INTO `site_maandteksten` (`id`, `maand`, `bovenonder`, `tekst`) VALUES (NULL, '".$maand."', '".$bovenonder."', '".htmlspecialchars_decode($maandtekst)."')";
        $result = mysql_query($query) or die(mysql_error());
        break;
} 
```

我想知道为什么我的脚本没有将我的 textarea 文本传送到数据库。在我的数据库中，它是一个包含 5000 个字符空间的长文本字段

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:06:42.723

不要对大数据使用 GET 查询：使用 POST 查询。

```
 $.post("ajax.php",{"action":"addm","maandtekst":$('#maandtekstinput').val(),"maand":$('#maandselect').val(),"bovenonder":$('#bovenonder').val()},function(msg){ 
```

（在 PHP 中使用`$_POST`or `$_REQUEST`）

GET 查询的问题在于参数嵌入在 URL 中，其大小受到限制（此限制取决于浏览器和服务器）。

# android - 在覆盖类中获取意图值时出错

> ID：12952079
> 
> 赞同：0
> 
> 时间：2012-10-18T10:04:32.303
> 
> 标签：android, android-intent

使用 android 项目，我在自定义覆盖类上遇到问题，我无法从上一个类获取 putextra 值到这个类，它在 getIntent() 方法上显示错误，任何人都可以帮助解决这个错误，这是我的代码..

```
import java.util.ArrayList;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.view.MotionEvent;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;

/**
 * Class used to place marker or any overlay items on Map
 * */
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

       private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

       private Context context;
       String place_reference;

       public AddItemizedOverlay(Drawable defaultMarker) {
            super(boundCenterBottom(defaultMarker));
       }

       public AddItemizedOverlay(Drawable defaultMarker, Context context) {
            this(defaultMarker);
            this.context = context;
       }

       @Override
       public boolean onTouchEvent(MotionEvent event, MapView mapView)
       {   

           if (event.getAction() == 1) {
               GeoPoint geopoint = mapView.getProjection().fromPixels(
                   (int) event.getX(),
                   (int) event.getY());
               // latitude
               double lat = geopoint.getLatitudeE6() / 1E6;
               // longitude
               double lon = geopoint.getLongitudeE6() / 1E6;
               //Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();
           }
           return false;
       } 

       @Override
       protected OverlayItem createItem(int i) {
          return mapOverlays.get(i);
       }

       @Override
       public int size() {
          return mapOverlays.size();
       }

       @Override
       protected boolean onTap(int index) {
         OverlayItem item = mapOverlays.get(index);
         AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
         dialog.setTitle(item.getTitle());
         dialog.setMessage(item.getSnippet());
         dialog.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

                Intent i = getIntent();
                i.getStringExtra(place_reference);

                Intent intent = new Intent(context, SinglePlaceActivity.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(intent );
            }
         })
            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
//                  MainActivity.this.finish();
                }
            });
         dialog.show();
         return true;
       }

       public void addOverlay(OverlayItem overlay) {
          mapOverlays.add(overlay);
       }

       public void populateNow(){
           this.populate();
       }

    } 
```

这是我在代码中发现的错误

![在此处输入图像描述](../Images/0ba9c4a6211743c378480b231845f7a9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:11:01.493

`getIntent()`是一种方法`Activity`。在你的情况下，我会让构造函数像这样：

```
private Activity activity;

public AddItemizedOverlay(Drawable defaultMarker, Context context, Activity a) {
    this(defaultMarker);
    this.context = context;
    this.activity = a;
} 
```

然后使用`activity.getIntent();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:18:57.993

写得像 `Intent i= context.getIntent();`

因为你的班级持有这个意图是一个内部班级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:13:34.720

您需要将 Activty 传递给您的 AddItemizedOverlay。然后你可以打电话

```
activity.getIntent(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:17:12.663

我认为最好将您传递`place_reference`给构造函数并将其保存为实例变量，而不是整个活动。显然，当你只需要一个额外的字符串时，这会更好，当它在这个类中只使用一次时也是如此。你可以试试：

```
String place_reference;    

public AddItemizedOverlay(Drawable defaultMarker, String place_reference) {
this(defaultMarker);
this.place_reference = place_reference;
}
// and then use place_reference any where you need 
```

# http - 如何通过 JCoAP 将 HTTP 转换为 CoAP？

> ID：12952081
> 
> 赞同：3
> 
> 时间：2012-10-18T10:04:33.880
> 
> 标签：http, coap

我使用项目[JCoAP](http://code.google.com/p/jcoap/)进行 HTTP/CoAP 转换。但我不知道如何使用它。我有一个HTTP客户端和一个CoAP服务器，我需要代理将HTTP转换为CoAP，似乎“JCoAP”项目已经实现了。但是我不知道使用“jCoAP”的细节，有人有经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-01T08:58:52.290

我偶然遇到了这个问题，正在寻找类似的东西，因为它没有得到回答，我设法找到了类似答案的东西，这里是：

您可以为此使用[californium](https://github.com/eclipse/californium)`ProxyHttpServer` ，更具体地说，它的. [这](http://www.programcreek.com/java-api-examples/index.php?source_dir=californium.core-master/cf-proxy/src/main/java/org/eclipse/californium/examples/ExampleCrossProxy.java)是一个如何做到这一点的例子，但基本上你需要一个`ProxyHttpServer`,`CoapServer`和`ProxyHttpClientResource`一点点*接线*。

# eclipse - 基于默认 Java 内容辅助结果的 Eclipse 自定义内容辅助

> ID：12952083
> 
> 赞同：4
> 
> 时间：2012-10-18T10:04:35.393
> 
> 标签：eclipse, eclipse-pde, eclipse-plugin

我正在实施任务工具。作为其中的一部分，我正在制作一个 Eclipse 插件来反映某些代码级别的问题。

在 Eclipse 插件中，我的目标是根据宿主任务的状态将一些视觉辅助工具附加到不同的 Java 元素。我已经成功地将多色标记添加到默认 Java 编辑器的垂直标尺以及概览显示的资源图标。但是，我无法更改 Java 内容辅助中的图标。

起初我认为通过使用扩展点`org.eclipse.ui.decorators`并将其启用设置为`org.eclipse.jdt.core.IJavaElement`，内容助手也会受到影响，因为概览中的元素图标就是这种情况。我已经尝试了其他几个支持类，一直到`ICompletionProposal`.

由于这种方法，一堆其他方法和扩展默认的 Java 内容辅助，都[行不通](https://stackoverflow.com/questions/4842256/interface-with-java-content-assist-in-eclipse)。我决定实施我自己的内容辅助。

现在的想法是以某种方式获取默认 Java 内容辅助的结果并对建议的元素运行一些检查，如果匹配，则更改内容辅助中显示的图标，以反映相关任务的级别。

我试图查看 Eclipse 的默认 Java 编辑器和 Mylyn 项目的源代码，但我无法理解它们如何提供 Java 内容帮助以及如何访问/重做它们。

我希望得到的最终结果：[LINK](https://i.imgur.com/lxIPU.png)

### 实际问题

当为 Eclipse 中的默认 Java 编辑器提供新的内容助手（类别）时，如何获得默认 Java 内容助手将为该点生成的建议列表？

我的第一个问题，当然还有很长的介绍，如果我应该以任何方式编辑它，请告诉我，最重要的是提前感谢所有帮助！

-J3lly

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:47:14.223

看看下面的扩展点：[**org.eclipse.jdt.ui.javaCompletionProposalComputer**](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/extension-points/org_eclipse_jdt_ui_javaCompletionProposalComputer.html)

要实现您自己的 Content Assist，您必须编写一个实现`org.eclipse.jdt.ui.text.java.IJavaCompletionProposalComputer`. 在您的情况下，由于您想要修改默认 Java Content Assist 的行为，您应该覆盖内部实现之一`org.eclipse.jdt.internal.ui.text.java.JavaCompletionProposalComputer`，`org.eclipse.jdt.internal.ui.text.java.JavaAllCompletionProposalComputer`或者根据您要修改的 Content Assist 覆盖任何其他实现。

现在您所要做的就是覆盖`computeCompletionProposals`返回完成建议列表的方法。被覆盖的方法应该调用`super.computeCompletionProposals(...)`以获取默认的完成建议，然后您可以根据需要对其进行修改。

# c# - 更改系统日期时间格式 c#

> ID：12952089
> 
> 赞同：1
> 
> 时间：2012-10-18T10:04:49.523
> 
> 标签：c#, winforms, datetime, datetime-format

**我需要以编程**方式永久更改/更新/设置我的系统（windows7）默认日期时间格式，直到我自己通过代码或通过 Windows GUI 更改它

我已经尝试了很多像这样来自[Code Project的解决方案](http://www.codeproject.com/Questions/168386/How-to-change-system-date-format-c)

```
 Console.Write(DateTime.Now + "");
       RegistryKey rkey = Registry.CurrentUser.OpenSubKey(@"
       Control Panel\International", true);
        rkey.SetValue("sShortDate", "dd/MM/yyyy");
        rkey.SetValue("sLongDate", "dd/MM/yyyy");
       Console.Write(DateTime.Now + ""); 
```

最接近且享有盛誉的答案来自[Set Default DateTime Format c#](https://stackoverflow.com/questions/1389187/set-default-datetime-format-c-sharp)，我尝试了此解决方案，但对我没有帮助。因为它不会改变我的系统日期时间格式（显示在任务栏中）。在我重新启动具有此代码的应用程序后，我在执行此代码之前再次获得旧格式。

```
using System;
using System.Globalization;
using System.Threading;

namespace test 
{
    public static class Program
    {
        public static void Main() {
          Console.Write(DateTime.Now + "");// MessageBox.Show(DateTime.Now + "");
          CultureInfo culture = (CultureInfo)CultureInfo.CurrentCulture.Clone();
          culture.DateTimeFormat.ShortDatePattern = "dd-MMM-yyyy";
          culture.DateTimeFormat.LongTimePattern = "";
          Thread.CurrentThread.CurrentCulture = culture;
          Console.Write(DateTime.Now + "");// MessageBox.Show(DateTime.Now + "");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:36:22.317

我尝试手动更改您的问题中提到的注册表项。

这是我所做的：

*   按`Win`+`R`并键入“regedit”以获取注册表编辑器。
*   Navigated the tree to Computer → HKEY_CURRENT_USER → Control Panel → International.
*   Double clicked the 'sShortDate' entry and changed the value to 'yyyy/MM/dd'.

I then opened Windows Explorer and all of the dates were shown in the new format, so this is definitely the right place in the registry.

I then tried the code you supplied to modify the registry and it, too, is changing the date shown in Explorer.

So, this leads me to believe that the Windows taskbar clock does not react to changes to this setting. I confirmed this by killing and restarting 'explorer.exe' from the Task Manager. If you restart Explorer you too should see the change take effect.

* * *

Edit: there appears to be no facility in .NET for setting the locale settings directly. You can, however, use P/Invoke to set it via the C++ Win API which should then cause the system clock (and other applications) to be notified of the change. See [this discussion](http://www.techtalkz.com/c-c-sharp/66751-determine-set-current-user-short-date-format.html).

# visual-studio-2010 - msbuild 转换一个配置几次

> ID：12952091
> 
> 赞同：8
> 
> 时间：2012-10-18T10:04:59.457
> 
> 标签：visual-studio-2010, visual-studio, msbuild, web-config, configuration-files

我的 Web.config 文件中有下一个配置

```
<Target Name="UpdateWebConfigForProjectsBeforeRun">
    <ItemGroup>
      <FilesToTransofm Include="ProjectsDeployBin\Web.*.$(Configuration).config"/>      
    </ItemGroup>    
    <Message Text="Transform file: %(FilesToTransofm.Identity)" />
    <TransformXml Source="web.config"
                  Transform="%(FilesToTransofm.Identity)"
                  Destination="web.config" />
  </Target> 
```

我正在尝试从 ProjectsDeployBin 目录中获取所有配置并将每个文件应用于主 web.config。

在第一次转换后，主 web.config 被 msbuild 锁定。

那么我该如何解决这个问题呢？还有其他方法可以通过文件集合来转换我的 web.config 吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T01:23:42.993

As you've noticed, the TransformXml task shipped with Visual Studio 2010 has a bug that leaves the source file locked.

To work around that, you can make a temporary copy of your source file before each transformation. Since you'll then be executing multiple tasks for each transform file (copy and transform), you'll need to switch to [Target Batching](http://msdn.microsoft.com/en-us/library/ms228229(v=vs.100).aspx) instead of [Task Batching](http://msdn.microsoft.com/en-US/library/ms171474%28v=vs.100%29.aspx).

Example:

```
<ItemGroup>
  <FilesToTransofm Include="ProjectsDeployBin\Web.*.$(Configuration).config"/>      
</ItemGroup>

<Target Name="UpdateWebConfigForProjectsBeforeRun"
        Inputs="@(FilesToTransofm)"
        Outputs="%(Identity).AlwaysRun">
  <Message Text="Transform file: %(FilesToTransofm.Identity)" />
  <Copy SourceFiles="web.config"
        DestinationFiles="web.pre-%(FilesToTransofm.Filename).temp.config" />
  <TransformXml Source="web.pre-%(FilesToTransofm.Filename).temp.config"
                Transform="%(FilesToTransofm.Identity)"
                Destination="web.config" />
</Target> 
```

*From a quick test, it looks like this bug is fixed in Visual Studio 2012, but I'm not able to find a reference / source that documents that, and the [original Connect bug](http://connect.microsoft.com/VisualStudio/feedback/details/562200/transformxml-task-locks-config-file-identified-in-source-attribute) isn't viewable anymore.*

# java - 我们可以在 applet 或 Swing 窗口中编译 Java 程序吗

> ID：12952095
> 
> 赞同：-2
> 
> 时间：2012-10-18T10:05:17.490
> 
> 标签：java, swing, compilation, applet

我们可以在 applet 窗口或 Swing 窗口中运行 Java 程序吗？如何查看编译程序的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:06:22.957

您可以使用[Compiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)（在 Java 6 中可用）来编译源代码。

您可以 exec() 新进程（如果它有一个 main() 入口）点，或者使用类加载将其加载到您的 JVM 中。请注意，如果您参加后一门课程，您可能每次都必须实例化一个新的类加载器 - 请参阅[此处](http://www.exampledepot.com/egs/java.lang/ReloadClass.html)了解更多详细信息。

您可能有安全问题。从小程序访问文件系统。因此，您*最好*只使用标准 Swing 应用程序（可能使用 Java Web Start 加载？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:03:30.613

Re. JavaCompiler API & Applet or Swing launched with JWS.

To compile source supplied in a text area, or by URL from the code-base would not require trust. OTOH the `JavaCompiler` is only available if the code is running in the JVM of a JDK (it requires the `tools.jar` to be on the run-time class-path). Applets and JWS based apps. are never run using a JDK and never have the `tools.jar` available.

## See also

*   [Example code for java compiler with a simple GUI](https://forums.oracle.com/forums/thread.jspa?threadID=1187455) code & discussion at OTN.
*   [STBC](http://pscode.org/stbc/) (based on that code).
*   [STBC Help](http://pscode.org/stbc/help.html). Goes into more detail on the `tools.jar` and the run-time class-path.

## Example code

To avoid 'link rot', here is the code seen in that linked thread.

```
import java.awt.BorderLayout;
import java.awt.Font;
import java.awt.EventQueue;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JLabel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.JButton;
import javax.swing.SwingWorker;
import javax.swing.border.EmptyBorder;

import java.util.ArrayList;

import java.net.URI;

import java.io.ByteArrayOutputStream;
import java.io.OutputStreamWriter;

import javax.tools.ToolProvider;
import javax.tools.JavaCompiler;
import javax.tools.SimpleJavaFileObject;

/** A simple Java compiler with a GUI.  Java 1.6+.
@author Andrew Thompson
@version 2008-06-13
*/
public class GuiCompiler extends JPanel {

  /** Instance of the compiler used for all compilations. */
  JavaCompiler compiler;

  /** The name of the public class.  For 'HelloWorld.java',
  this would be 'HelloWorld'. */
  JTextField name;
  /** The source code to be compiled. */
  JTextArea sourceCode;
  /** Errors and messages from the compiler. */
  JTextArea output;

  JButton compile;

  static int pad = 5;

  GuiCompiler() {
    super( new BorderLayout(pad,pad) );
    setBorder( new EmptyBorder(7,4,7,4) );
  }

  /** A worker to perform each compilation. Disables
  the GUI input elements during the work. */
  class SourceCompilation extends SwingWorker<String, Object> {
    @Override
    public String doInBackground() {
      return compileCode();
    }

    @Override
    protected void done() {
      try {
        enableComponents(true);
      } catch (Exception ignore) {
      }
    }
  }

  /** Construct the GUI. */
  public void initGui() {
    JPanel input = new JPanel( new BorderLayout(pad,pad) );
    Font outputFont = new Font("Monospaced",Font.PLAIN,12);

    sourceCode = new JTextArea("Paste code here..", 15, 60);
    sourceCode.setFont( outputFont );
    input.add( new JScrollPane( sourceCode ),
      BorderLayout.CENTER );
    sourceCode.select(0,sourceCode.getText().length());

    JPanel namePanel = new JPanel(new BorderLayout(pad,pad));
    name = new JTextField(15);
    name.setToolTipText("Name of the public class");
    namePanel.add( name, BorderLayout.CENTER );
    namePanel.add( new JLabel("Class name"), BorderLayout.WEST );

    input.add( namePanel, BorderLayout.NORTH );

    compile = new JButton( "Compile" );
    compile.addActionListener( new ActionListener() {
        public void actionPerformed(ActionEvent ae) {
          (new SourceCompilation()).execute();
        }
      } );
    input.add( compile, BorderLayout.SOUTH );

    this.add( input, BorderLayout.CENTER );

    output = new JTextArea("", 5, 40);
    output.setFont( outputFont );
    output.setEditable(false);
    this.add( new JScrollPane( output ), BorderLayout.SOUTH );
  }

  /** Compile the code in the source input area. */
  public String compileCode() {
    output.setText( "Compiling.." );
    enableComponents(false);
    String compResult = null;
    if (compiler==null) {
      compiler = ToolProvider.getSystemJavaCompiler();
    }
    if ( compiler!=null ) {
      String code = sourceCode.getText();
      String sourceName = name.getText().trim();
      if ( sourceName.toLowerCase().endsWith(".java") ) {
        sourceName = sourceName.substring(
          0,sourceName.length()-5 );
      }
      JavaSourceFromString javaString = new JavaSourceFromString(
        sourceName,
        code);
      ArrayList<JavaSourceFromString> al =
        new ArrayList<JavaSourceFromString>();
      al.add( javaString );

      ByteArrayOutputStream baos = new ByteArrayOutputStream();
      OutputStreamWriter osw = new OutputStreamWriter( baos );

      JavaCompiler.CompilationTask task = compiler.getTask(
        osw,
        null,
        null,
        null,
        null,
        al);

      boolean success = task.call();

      output.setText( baos.toString().replaceAll("\t", "  ") );
      compResult = "Compiled without errors: " + success;
      output.append( compResult );
      output.setCaretPosition(0);
    } else {
      output.setText( "No compilation possible - sorry!" );
      JOptionPane.showMessageDialog(this,
        "No compiler is available to this runtime!",
        "Compiler not found",
        JOptionPane.ERROR_MESSAGE
        );
      System.exit(-1);
    }
    return compResult;
  }

  /** Set the main GUI input components enabled
  according to the enable flag. */
  public void enableComponents(boolean enable) {
    compile.setEnabled(enable);
    name.setEnabled(enable);
    sourceCode.setEnabled(enable);
  }

  public static void main(String[] args) throws Exception {

    Runnable r = new Runnable() {
      public void run() {
        JFrame f = new JFrame("SSCCE text based compiler");
        f.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );

        GuiCompiler compilerPane = new GuiCompiler();
        compilerPane.initGui();

        f.getContentPane().add(compilerPane);

        f.pack();
        f.setMinimumSize( f.getSize() );
        f.setLocationRelativeTo(null);
        f.setVisible(true);
      }
    };
    EventQueue.invokeLater(r);
  }
}

/**
* A file object used to represent source coming from a string.
* This example is from the JavaDocs for JavaCompiler.
*/
class JavaSourceFromString extends SimpleJavaFileObject {
  /**
  * The source code of this "file".
  */
  final String code;

  /**
  * Constructs a new JavaSourceFromString.
  * @param name the name of the compilation unit represented
    by this file object
  * @param code the source code for the compilation unit
    represented by this file object
  */
  JavaSourceFromString(String name, String code) {
    super(URI.create(
      "string:///" +
      name.replace('.','/') +
      Kind.SOURCE.extension),
      Kind.SOURCE);
    this.code = code;
  }

  @Override
  public CharSequence getCharContent(boolean ignoreEncodingErrors) {
    return code;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:11:09.767

使用[Java Compiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)将源代码转换为字节码。之后使用[动态类加载](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.html)将编译后的字节码加载到 jvm 并启动它（以获取输出）。
此外，如果您想从 java 小程序内部执行此操作，则必须解决安全问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:12:27.283

好吧，applet 是在后台运行的程序。为了编译一个 java 程序，出于安全原因，你需要访问`IS NOT ALLOWED`一个 applet 的客户端本地磁盘（据我所知）。你想达到什么目的？我曾经尝试使用小程序访问 img 文件。

# maven - 为 Maven SCM URL 使用 WebSVN 链接

> ID：12952097
> 
> 赞同：1
> 
> 时间：2012-10-18T10:05:24.850
> 
> 标签：maven, maven-site-plugin, websvn

一个典型的 WebSVN 链接如下所示：

```
http://demo.websvn.info/listing.php?repname=WebSVN&path=%2Ftrunk%2F&#a0b40758157c8f16fa703ca3be466fa8a 
```

但是，如果您将其包含为您的 Maven scm/url，则尝试运行构建（或更具体地说，对我而言 - site:deploy）会在第二个“=”（等于）上失败，根据以下错误：

```
[ERROR]   The project  (C:\Subversion\MyProject\pom.xml) has 1 error 
[ERROR]     Non-parseable POM C:\Subversion\MyProject\pom.xml: entity 
reference name can not contain character =' (position: START_TAG     
seen ...ttp://mysvnserver.com/SVN/websvn/listing.php?repname=MyProject&path=... 
@510:81)  @ line 510, column 81 -> [Help 2] 
```

是否有解决方法，允许在已发布的 Maven 站点中使用 WebSVN？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:11:47.533

这行不通。WebSVN，如果你的人机交互而已。您需要提供与真实仓库的开发人员连接。

# c# - 在 C# T4 模板中通过 DTE 访问项目

> ID：12952110
> 
> 赞同：9
> 
> 时间：2012-10-18T10:05:50.493
> 
> 标签：c#, visual-studio-2012, t4, envdte

我目前正在尝试遍历我的所有项目（sharepoint）以将所有功能 guid 放入一个文件中。我想在它们前面加上项目名称。我的问题是 DTE.Solution.Item 和 DTE.Solution.Projects.Item（或 foreach 的枚举器）不会将整数作为参数，并且 foreach 返回一个不可转换为 Project 的对象。

这是我的代码片段：

```
var hostServiceProvider = (IServiceProvider) Host;
var dte = (DTE) hostServiceProvider.GetService(typeof(DTE));
var projectCount = dte.Solution.Projects.Count;

var projects = new Dictionary<string, string>();

foreach(Project dteProject in dte.Solution)
{
    var dteProject = dte.Solution.Item(i);
    projects.Add(dteProject.Name, dteProject.FullName);
} 
```

好的 - 代码没问题 - 调试器不是！我的异常在调试上下文中抛出，但如果未附加调试器，模板将运行良好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T10:14:45.767

试试[Solution.Projects](http://msdn.microsoft.com/en-us/library/envdte._solution.projects.aspx)属性：

```
<#@ template language="C#" debug="true" hostspecific="true" #>
<#@ assembly name="Microsoft.VisualStudio.Shell.Interop.8.0" #>
<#@ assembly name="EnvDTE" #>
<#@ assembly name="EnvDTE80" #>
<#@ assembly name="VSLangProj" #>
<#@ import namespace="Microsoft.VisualStudio.Shell.Interop" #>
<#@ import namespace="EnvDTE" #>
<#@ import namespace="EnvDTE80" #>
<#@ import namespace="Microsoft.VisualStudio.TextTemplating" #>
<#@ output extension=".txt" #>
<#

var hostServiceProvider = (IServiceProvider)this.Host;
var dte = (DTE)hostServiceProvider.GetService(typeof(DTE));

foreach (Project project in dte.Solution)
{
    #>
    <#= project.Name #>
    <#
}

#> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:17:33.583

试试这个

```
 var item = dte.Solution.Projects.GetEnumerator();
        while (item.MoveNext())
        {
            var project = item.Current as EnvDTE.Project;
            if (project == null)
            {
                continue;
            }
            ...
        } 
```

# spring - 从控制器返回 XML 元素列表

> ID：12952112
> 
> 赞同：1
> 
> 时间：2012-10-18T10:05:59.867
> 
> 标签：spring, spring-mvc, spring-3

我知道如何从我的控制器返回 XML 元素。

如果我需要返回特定类的列表怎么办？我能想到的是一个包含 List 的包装器对象。还有另一种方法可以做到这一点吗？

```
@RequestMapping(value = "/test", method = RequestMethod.GET, produces = "application/xml")
public @ResponseBody
Test getTest() {
    return new Test();
}

@XmlRootElement
public class Test {
    private String name = "kalle";

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T04:12:38.447

我没有尝试过，但您可以创建自定义消息转换器，将列表转换为 xml，反之亦然，然后将其注入应用程序上下文的消息转换器。

# jquery - jQuery LightBox 中的滚动条

> ID：12952116
> 
> 赞同：0
> 
> 时间：2012-10-18T10:06:12.397
> 
> 标签：jquery, asp.net, lightbox

我想在 ASP.net 中显示带有滚动条的缩略图。这是我的代码示例。

```
 <h2 id="example">Example</h2>
<p>Click in the image and see the <strong>jQuery lightBox plugin</strong> in action.</p>
<div id="gallery">
    <ul>
        <li>
            <a href="photos/image1.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image1.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image2.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image2.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image3.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image3.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image4.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image4.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image5.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image5.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image6.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image6.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image7.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image7.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image8.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image8.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image9.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image9.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image10.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image10.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image11.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image11.jpg" width="72" height="72" alt="" />
            </a>
        </li>
        <li>
            <a href="photos/image12.jpg" rel="lightbox" title="Media Monitors All Pakistan Newspapers Web Hub!">
                <img src="photos/thumb_image12.jpg" width="72" height="72" alt="" />
            </a>
        </li>
    </ul>
</div> 
```

这是现在显示的图像 ![在此处输入图像描述](../Images/c9d3ee23c905de1c3a0adb0c874875ae.png)

但我想要图像的水平滚动条（向左写）如何在缩略图显示中实现滚动条？任何的想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:11:20.553

你的意思是你想要一个水平滚动条`#gallery`吗？如果是这种情况，那么您应该设置您的宽度`#gallery`并将其设置为`overflow:auto;`. 并且您应该将 设置为`ul`比`#gallery`（以允许它滚动）更宽。

它看起来像这样：

```
#gallery {
    width:300px;
    overflow:auto;
}

ul { 
    width:600px;
} 
```

JSFiddle 粗略示例：http: [//jsfiddle.net/MHG4c/](http://jsfiddle.net/MHG4c/)

这很粗糙，但基本的想法是这样的。

# ios - 可以在没有图像的情况下在 Facebook 上发帖吗？iOS 6 - Social.framework

> ID：12952117
> 
> 赞同：0
> 
> 时间：2012-10-18T10:06:17.007
> 
> 标签：ios, facebook, uiimage, ios6, social

我正在尝试使用新的社交框架在 Facebook 上发布新帖子。

```
[controller setInitialText:@".Thank's for help!"];
[controller addImage:[UIImage imageNamed:@"image.png"]];
[controller addURL:[NSURL URLWithString:@"http://stackoverflow.com/questions/ask"]]; 
```

这3行代码没有问题。但是当我尝试消除 addImage: 时，我总是收到相同的 UIAlert：

![在此处输入图像描述](../Images/2617c67ce2d4a0ceff3d7d9d94f79464.png)

我的想法是在 Facebook 上发布一个带有小文本的典型 URL。但是当我使用 3 行代码时，新帖子是一个带有 text = setInitialText: + addURL: 的图像

有什么想法可以解决这个问题吗？这是facebook问题还是框架问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:55:40.880

今天，几天不工作后，我可以在没有 UIImage 的情况下向 Facebook 发送消息。听起来 Facebook/Apple 已经解决了这个问题。

# magento-1.7 - 在产品列表中添加按类别排序 Magento

> ID：12952123
> 
> 赞同：0
> 
> 时间：2012-10-18T10:06:22.883
> 
> 标签：magento-1.7

我试图为此找到一个可能的解决方案，但没有任何结果，我需要在产品列表页面的默认 Magento 工具栏中显示按类别排序的字段。有谁知道如何在不弄乱我的核心文件的情况下添加此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:40:42.417

您正在寻找的是 Magento 所谓的分层导航。

首先，您必须创建一个父类别 Apparel 和一个（或多个）子类别，例如： - 衬衫 - 鞋子 - 帽衫

然后对于所有子类别，转到管理后端并导航到：目录 -> 管理类别 -> 显示设置。

现在确保将字段“Is Anchor”设置为yes。将此设置应用于所有子类别。

在这些步骤之后，您的前端产品列表应如下所示： [http ://demo.magentocommerce.com/catalog/category/view/s/apparel/id/18/](http://demo.magentocommerce.com/catalog/category/view/s/apparel/id/18/)

在左侧边栏中，您可以看到作为父类别 Apparel 的子类别的类别。当然，您可以为不同的类别使用自己的名称。

干杯。

# mongodb - MongoDB集合

> ID：12952130
> 
> 赞同：1
> 
> 时间：2012-10-18T10:06:38.807
> 
> 标签：mongodb, collections

我想列出在我的数据库下创建的所有集合。我知道查询

> db.getCollectionNames();

但它只列出 - [“system.indexes”，“system.users”]

我试过

> 显示收藏

它列出以下 - system.indexes，system.users

它没有向我展示我的收藏。我怎样才能看到我所有的收藏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:26:42.400

`mongo`要使用shell 查看当前数据库中的所有集合：

*   `db.getCollectionNames()`将当前数据库中的集合作为 JavaScript 数组返回
*   `show collections`将当前数据库中的集合打印为列表

如果您没有看到预期的集合，您可以使用以下命令检查当前数据库：

```
db.getName() 
```

如果你想查看所有数据库中的所有集合，这里有一些 JavaScript 可以解决问题：

```
db.adminCommand("listDatabases").databases.forEach(function (d) {
    sdb = db.getSiblingDB(d.name);
    print("Collections in database: "+d.name);
    printjson(sdb.getCollectionNames())
    print("")
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T12:31:41.063

我认为那里一定有不止一个司机。我做了

```
npm install mongodb 
```

安装驱动程序，我认为我得到的驱动程序是此处记录的驱动程序

[http://mongodb.github.io/node-mongodb-native/2.0/api/](http://mongodb.github.io/node-mongodb-native/2.0/api/)

它没有 getCollectionNames() 或 collectionNames() 但它确实有 collections()

# javascript - javascript 表单上的超时仅在 Jenkins 上运行 Cucumber

> ID：12952132
> 
> 赞同：3
> 
> 时间：2012-10-18T10:06:43.543
> 
> 标签：javascript, continuous-integration, jenkins, cucumber, watir-webdriver

我正在**使用 Watir-webdriver 0.6.1 运行 Cucumber 1.2.1**来测试网页。

在本地，所有测试运行正常，但是**当尝试在 CI 机器（Jenkins）上启动它们时，我在填写 javascript 表单时超时**。我有一个电子邮件和密码文本字段，但 Cucumber 无法填写它们。有几次，两分钟后，只填写了电子邮件文本字段......

javascript 表单正确打开。这是打开它的链接：

```
`<a id="user_popup" class="textuser_popup" url="/en/bla/" href="javascript:void(0);" trackclick="click/unlogged/test/test/login" rel="nofollow"  gaclick="/en/bla/homepage/click:header-section>login">Sign in</a>` 
```

加载表单后，电子邮件和密码的代码为：

```
<ul class="signin">
<li class="reg_form">
<label class="reg_form_label">Your email</label>
<input id="yourEmail" class="l_email" type="text" value="" name="email">
</li>
<li class="password_area">
<label class="reg_form_label">Your password</label>
<input id="yourPassword" class="l_password" type="password" name="password">
</li>
</ul> 
```

我使用 PageObject 但直接在步骤上调用元素也不起作用。这就是我填写字段的方式：

`@browser.text_field(:id, "yourEmail").set("email@domain.com")`
`@browser.text_field(:id, "yourPassword").set("thePass")`

最后，错误是：

```
execution expired (Timeout::Error)
/usr/lib/ruby/1.8/timeout.rb:64:in `rbuf_fill'
/usr/lib/ruby/1.8/net/protocol.rb:134:in `rbuf_fill'
/usr/lib/ruby/1.8/net/protocol.rb:116:in `readuntil'
/usr/lib/ruby/1.8/net/protocol.rb:126:in `readline'
/usr/lib/ruby/1.8/net/http.rb:2028:in `read_status_line'
/usr/lib/ruby/1.8/net/http.rb:2017:in `read_new'
/usr/lib/ruby/1.8/net/http.rb:1051:in `request'
/usr/lib/ruby/1.8/net/http.rb:1037:in `request'
/usr/lib/ruby/1.8/net/http.rb:543:in `start'
/usr/lib/ruby/1.8/net/http.rb:1035:in `request' 
```

在本地启动测试时，它工作得非常好。不知道为什么远程运行时失败。远程浏览器（通常在无头模式下运行，但我打开了 X11 会话来查看执行情况）是 Firefox ESR 10.0.8，操作系统是 CentOS。

请问您对正在发生的事情有什么建议吗？如果您需要有关该问题的更多信息，请询问。

欢迎任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:00:45.823

我遇到了同样的问题，我在 env.rb 文件中添加了以下代码行，现在它工作正常。

```
client = Selenium::WebDriver::Remote::Http::Default.new
client.timeout = 300 # seconds – default is 60
$browser = Watir::Browser.new :firefox, :http_client => client 
```

# continuous-integration - 没有 NuGet 的 BitBucket + AppHarbor

> ID：12952139
> 
> 赞同：0
> 
> 时间：2012-10-18T10:07:02.817
> 
> 标签：continuous-integration, bitbucket, appharbor

我正在*BitBucket*上创建一个 OpenSource 项目（使用*Mercurial*）（在*C#*和*Visual Studio 2010*中，如果重要的话）。该项目有一些外部依赖项（*xUnit*，*StyleCop*，*Mono.Nat*，*BerkeleyDB*，...）。我想使用*AppHarbor*进行测试构建和运行测试。

*   我不想使用*NuGet*来下载它们（因为其中一些不在*NuGet*中，所以我必须创建一个私有*NuGet*存储库，因为*StyleCop* /*MsBuild*/ *NuGet*集成不能很好地工作。它需要两“轮”构建才能正确加载*StyleCop.targets*文件，但*AppHarbor*只会做一个，最后是因为我认为创建一个里面有一个 exe 文件的开源项目是非常糟糕的，该文件会在项目时自动启动已编译。您会启动从 Internet 下载的解决方案中包含的随机 exe 吗？）。
*   我不想在主树中包含外部依赖项（我非常反对）。
*   我想在其他地方拥有外部依赖项（例如，另一个*BitBucket*存储库）。
*   我没有可以执行*cron*工作并从一个存储库拉/推到另一个存储库的服务器，但是如果您能找到可以为我完成它的*免费服务，那么它可以作为一个解决方案。*

我该怎么做？我尝试将多个存储库添加到*AppHarbor*，但它们一次编译一个（从一个空文件夹）

# jpa - JPA / Hibernate OneToMany 映射，使用复合 PrimaryKey

> ID：12952141
> 
> 赞同：13
> 
> 时间：2012-10-18T10:07:08.763
> 
> 标签：jpa, one-to-many, embeddable

我目前正在为使用复合主键类的场景使用正确的映射注释。首先，我想用文字实现什么：

我有 2 个类：组和 FieldAccessRule。一个 Group 可以有多个 FieldAccessRule，而一个 FieldAccessRule 只能分配一个 Group。到目前为止，建模这不是问题（简化）：

```
public class Group{
    ...
    @OneToMany(mappedBy = "group")
    private Set<FieldAccessRule> fieldAccessRules;
    ... 
} 
```

对于 FieldAccessRule：

```
public class FieldAccessRule {
    ...
    @ManyToOne
    @JoinColumn(name = "group_id")
    private Group group;
    ...
} 
```

现在，我决定为 FieldAccessRule 使用复合 PK，因为规则对于 ONE Group 和 ONE Field 应该是唯一的。它看起来像这样：

```
@Embeddable
public class FieldAccessRulePK implements Serializable{
    private String fieldKey;
    private Group group;
    ...
} 
```

和ofc。FieldAccessRule 需要更改为

```
public class FieldAccessRule {
    ...
    @EmbeddedId
    private FieldAccessRulePK fieldAccessRulePK;
    ...
} 
```

我现在如何为 Group 的 FieldAccessRuleSet 创建正确的映射？这样做，我得到：

> 在属性“fieldAccessRules”中，“映射者”值“组”无法解析为目标实体上的 > 属性。

创建从 Group 到 PrimaryKey A PART 的映射的正确方法是什么？

编辑：我知道发现，使用

```
public class Group{
    ...
    @OneToMany(mappedBy = "fieldAccessRolePK.group")
    private Set<FieldAccessRule> fieldAccessRules;
    ... 
} 
```

完全按预期工作。它编译得很好，它可以很好地创建数据库，并且在加载具有预定义角色的组后，它们可以按预期使用。

但是，Eclipse 仍然说

> 在属性“fieldAccessRules”中，“映射者”值“fieldAccessRulePK.group”无法解析为目标实体上的属性。

我不确定，如果忽略错误并“假设”一切都很好......（我发现了一个帖子，据说，Hibernate 支持模式 attr1.attr2 的映射，但不支持 JPA-confirm。 )

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T07:54:42.207

在您的代码中，`EntityManager`无法解析`mappedBy`属性`fieldAccessRulePK.group`。

**原因**

`EntityManager`假设`FieldAccessRule`实体 在. **_**`FieldInjection`

根据**Java Naming Variables Rule**，您不能`fieldAccessRulePK.group`使用字符 dot > **'.'来命名。**

**Java 命名变量规则** [参考](http://wiki.answers.com/Q/What_are_the_rules_for_naming_variables_in_java)

所有变量名称必须以字母、下划线 (_) 或美元符号 ($) 开头。其余字符可以是前面提到的任何字符加上数字 0-9。惯例是始终使用字母表中的一个字母。不鼓励使用美元符号和下划线。

还有一件事：

不要在可嵌入类中使用`group`实例。`FieldAccessRulePK`更多参考[在这里](http://www.kawoolutions.com/Technology/JPA,_Hibernate,_and_Co./JPA_Composite_Key_Variants)。

尝试如下：

```
@Embeddable
public class FieldAccessRulePK implements Serializable{
    @Column(name = "FIELD_KEY")
    private String fieldKey;
    @Column(name = "GROUP_ID")
    private String groupId;
}

public class FieldAccessRule {
    @EmbeddedId
    private FieldAccessRulePK id;

    @ManyToOne
    @JoinColumn(name = "GROUP_ID", referencedColumnName = "ID")
    private Group group;
}

public class Group{
    @OneToMany(mappedBy = "group")
    private Set<FieldAccessRule> fieldAccessRules;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T14:39:23.413

我通过修改`mappedBy`父类的属性（使用点分符号）解决了类似的问题

```
public class Group{
    ...
    @OneToMany(mappedBy = "fieldAccessRulePK.group")
    private Set<FieldAccessRule> fieldAccessRules;
    ... 
} 
```

并通过将注释保留在 PK 类中：

```
@Embeddable
public class FieldAccessRulePK implements Serializable{
    private String fieldKey;

    @ManyToOne
    @JoinColumn(name = "group_id")
    private Group group;
    ...
} 
```

# maven - Maven 从 jasig CAS 中排除语言文件

> ID：12952143
> 
> 赞同：0
> 
> 时间：2012-10-18T10:07:17.063
> 
> 标签：maven, cas

我搜索禁用所有语言并将默认语言设置为英语。所以只有英文可用。但我认为在 jasig CAS 中不可能做到这一点。

所以我试图从我的 jasig CAS 构建的最终 .war 文件中删除所有语言文件。

她是我的 pom.xml 文件：

```
<modelVersion>4.0.0</modelVersion>
<groupId>lu.ion.cas</groupId>
<artifactId>cas-ion</artifactId>
<packaging>war</packaging>
<version>1.0-SNAPSHOT</version>
<name>cas-ion Maven Webapp</name>
<url>http://maven.apache.org</url>

<dependencies>
    <dependency>
        <groupId>org.jasig.cas</groupId>
        <artifactId>cas-server-webapp</artifactId>
        <version>${cas.version}</version>
        <type>war</type>
        <scope>runtime</scope>
    </dependency>

    <dependency>
        <groupId>org.jasig.cas</groupId>
        <artifactId>cas-server-support-ldap</artifactId>
        <version>${cas.version}</version>
        <type>jar</type>
        <scope>runtime</scope>
    </dependency>
</dependencies>

<properties>
    <cas.version>3.5.1</cas.version>
</properties>

<repositories>
    <repository>
        <id>ja-sig</id>
        <url>http://oss.sonatype.org/content/repositories/releases/</url>
    </repository>
</repositories>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <warName>cas-ion</warName>
                <excludes>
                    <exclude>**/messages_*.properties</exclude>
                </excludes>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

应该删除这些文件的部分：

```
<excludes>
    <exclude>**/messages_*.properties</exclude>
</excludes> 
```

但这些文件仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T07:30:27.063

使用此处描述的 Maven War 插件叠加层：[http ://maven.apache.org/plugins/maven-war-plugin/overlays.html](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)

在这种情况下，pom 是这样的：

```
<plugin>
<artifactId>maven-war-plugin</artifactId>
<version>2.4</version>
<configuration>
    <overlays>
        <overlay>
            <groupId>org.jasig.cas</groupId>
            <artifactId>cas-server-webapp</artifactId>
            <excludes>
                <exclude>WEB-INF/classes/messages_*.properties</exclude>        
            </excludes>
        </overlay>
    </overlays>
</configuration> 
```

如果您想包含一种语言，请添加另一个叠加层，如下所示：

```
<overlay>                           
<groupId>org.jasig.cas</groupId>
<artifactId>cas-server-webapp</artifactId>                          
<includes>
    <include>WEB-INF/classes/messages_en.properties</include>                       
</includes> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:25:08.847

使用`webResources`元素。[http://maven.apache.org/plugins/maven-war-plugin/faq.html#webresourcesexclude](http://maven.apache.org/plugins/maven-war-plugin/faq.html#webresourcesexclude)

```
<plugin>
  <artifactId>maven-war-plugin</artifactId>
  <version>2.3</version>
  <configuration>
    <webResources>
      <resource>
        <directory>path_to_messages</directory>
        <excludes>
          <exclude>messages_*.properties</exclude>
        </excludes>
      </resource>
    </webResources>
  </configuration>
</plugin> 
```

# php - IE8 未正确显示锚标记中的 utf-8 编码波斯文本

> ID：12952148
> 
> 赞同：1
> 
> 时间：2012-10-18T10:07:35.360
> 
> 标签：php, utf-8

我有一个波斯语项目。在这个项目的管理方面，锚标记和按钮标记中的一些波斯文本显示错误，尽管我使用`charset=utf-8`.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "w3.org/TR/html4/loose.dtd">; 
<html lang="fa" dir="rtl"> 
    <head> 
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type"> 
        <meta content="noindex,nofollow" name="robots"> 
        <title>osCommerce</title> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:56:59.270

如果您的 html 与 xhml 兼容

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fa" dir="rtl">
<head>
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8" />
...
</head> 
```

如果您使用 Netbeans 或 eclipse 或任何 IDE，请检查您的项目是否使用 utf-8 文件编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:00:08.883

除此之外，`<meta content="text/html; charset=utf-8" http-equiv="Content-Type">` 您还应该将`yourpage.php`脚本文件保存在`utf-8 format`.

# java - XMPP 中新用户请求的监听器

> ID：12952149
> 
> 赞同：0
> 
> 时间：2012-10-18T10:07:39.523
> 
> 标签：java, xmpp, messaging, smack, asmack

我正在尝试使用 xmpp 和 smack 设置聊天信使。

我可以连接，登录

```
m_connection.connect();
SASLAuthentication.supportSASLMechanism("PLAIN", 0);
m_connection.login(userName, password); 
```

我也可以以管理员身份创建新用户。

```
AccountManager ac = m_connection.getAccountManager();
ac.createAccount(user, password); 
```

我的周期中唯一缺少的是客户第一次想要注册的时候。管理员用户如何获得创建新用户的通知/请求。有没有我可能错过的听众？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:03:44.677

您只需向他们提供注册表单，然后使用`createAccount`您在示例中所做的方法。

# objective-c - iOS6：如何改变交叉溶解在过渡之间显示黑色

> ID：12952150
> 
> 赞同：1
> 
> 时间：2012-10-18T10:07:38.640
> 
> 标签：objective-c, ios6, xcode4.5, uistoryboardsegue, uiviewanimationtransition

我正在为我的过渡使用故事板 segue 交叉溶解，但在过渡期间它具有灰色效果。

有没有办法修改/删除它，这样我就可以添加一种颜色来匹配我的 vie 背景，这样过渡就不那么明显了。

# objective-c - 如何在不使用 segues 的情况下更改当前显示的 uiview？

> ID：12952160
> 
> 赞同：0
> 
> 时间：2012-10-18T10:08:12.493
> 
> 标签：objective-c, xcode4, uiviewcontroller, storyboard, loadview

![在此处输入图像描述](../Images/7bbf9c5175233729779d2b0e51f32f03.png)我想将显示更改为 UIViewController，该 UIViewController 在情节提要上有视图控制器，而 UIViewController 类在情节提要上没有视图控制器。情节提要中没有segue...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:20:24.490

我不完全确定我理解你想要做什么，但我想你是在问如何从故事板加载视图控制器，而不使用 segue，从视图控制器中的方法加载故事板。

首先，在故事板中，选择要加载的视图控制器，然后打开 Identity Inspector。设置视图控制器的 Storyboard ID。看起来您想加载一个`MapViewController`，所以假设您将情节提要 ID 设置为`map`。

在您的代码中，您可以像这样加载视图控制器：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
MapViewController *mapViewController = [storyboard instantiateViewControllerWithIdentifier:@"map"]; 
```

一旦你有了对视图控制器的引用，你就可以设置它的属性或者给它发送消息。然后，您可以以任何您想要的方式显示它——可能通过将它推到导航控制器上，或者通过呈现它，或者通过将它设置为窗口的根视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:17:49.740

像这样：

在您的 AppDelegate.m 中进行快速设置：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.

    ViewController *sourceViewController = [[ViewController alloc] init];
    UINavigationController * nav = [[UINavigationController alloc] initWithRootViewController:sourceViewController];
    [self.window setRootViewController:nav];
    return YES;
} 
```

在上面的示例中，将`ViewController`类替换为您自己的类`sourceViewCntroller`

```
- (IBAction) didPressMyButton {
    NewViewController* newVC = [[[NewViewController alloc] init] autorelease];
    [self.navigationController pushViewController:newVC animated:YES];
} 
```

将此操作连接到情节提要上的按钮或以任何方法嵌入视图更改。您需要先设置 UINavigation 控制器。

# django - Django 加入 2 个具有 2 个连接条件的表

> ID：12952163
> 
> 赞同：1
> 
> 时间：2012-10-18T10:08:30.240
> 
> 标签：django, django-models

我有 2 张桌子说 A 和 B

```
class A(models.Model):
  A_val= models.DecimalField(max_digits=4, decimal_places=0)
  A_name= models.CharField(max_length=32, blank=True)
  A_type= models.CharField(max_length=32, blank=True)
  unique_together(A_val,A_name)

 class B(models.Model):
    A_val=models.ForeignKey(A)
    A_name=models.ForeignKey(A) 
```

现在我想要

```
select * from B,A where A.A_val=B.A_val and A.A_name=B.B_name and A_type="typename" 
```

我按照 miki725 的指示做了以下事情来实现这一点

```
B.objects.filter(A_name__A_type='type_name').select_related('A_name', 'A_val') 
```

但这相当于

```
select * from B,A where A.A_name=B.B_name and A_type="typename" 
```

它忽略**A.A_val=B.A_val**。我希望加入基于所有 3 个条件。我怎样才能做到这一点

# javascript - 参考其父父级定位绝对 div

> ID：12952173
> 
> 赞同：0
> 
> 时间：2012-10-18T10:09:05.547
> 
> 标签：javascript, jquery, html, css

我有三个嵌套 div 的结构

```
<div id="div1"> 
   <div id="div2">     // has come content
      <div id="div3"> 
                        // has some content with a form
      </div>
   </div>
</div> 
```

所有三个 div 都是绝对的。现在我希望`#div3`根据`#div1` 如果我`#div3`是`right:0px;`那么它应该去最右边`#div1`

**注意**请不要要求更正结构，因为它不是我开发的，`#div1`也不`#div2`在我的控制范围内。

我唯一的想法是通过 jQuery 移动`#div3`并附加它。但如果可能的话`#div1`，我希望有一个纯粹的`CSS`解决方案。否则我会选择`jQuery append`

我以为我已经解释得很好，不需要 css。但听说是 **CSS**

```
#div1 {
position: absolute;
display: none;
}

#div2 
{
position: absolute;
top: 85px;
left: 56px;
width: 300px;
z-index: 2;
}

#div3 {//what ever you want to write to make it relative to #div1  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:18:48.000

如果位置`div3`是绝对的，它会在他的祖先中查找，直到找到一个相对定位的父。要实现您想要的，您需要：

```
#div1 { position: relative; }
#div2 { position: static; } // default positioning for DIVs
#div3 { position: absolute; right: 0; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:57:39.157

使用`position()`方法获取`DIV2`相对于其父级的位置，`DIV1`并将这些值用作负数，以使 DIV 3 出现在 div1 中。

以下应放在`DIV3`左上角`DIV1`

```
var div2Pos= $('#div2').position();
$('#div3').css({top: 0-div2Pos.top, left: 0-div2Pos.left}) 
```

演示：http: [//jsfiddle.net/q5RgZ/1](http://jsfiddle.net/q5RgZ/1)

另一个简单的解决方案是将 div3 移出 div2 并放入 div1

```
$('#div3').appendTo('#div1') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T10:25:13.780

将`#div1`位置设置为相对应该可以解决问题。但是如果需要使用`position:absolute`in `#div1`，那么包含这三个 div 标签的元素应该使用`position:relative`. 像这样：

HTML：

```
<div id="container">
  <div id="div1"> 
     <div id="div2">     // has come content
        <div id="div3"> 
                        // has some content with a form
        </div>
     </div>
  </div>
</div> 
```

CSS：

```
#container {
  position: relative;
} 
```

# tomcat - 部署到 Tomcat 上的非 appBase 位置

> ID：12952178
> 
> 赞同：3
> 
> 时间：2012-10-18T10:09:24.563
> 
> 标签：tomcat, tomcat7

Tomcat 7 正在使用中。

部署到`appBase`位置：

*   将WAR文件`myapp.war`放在`$CATALINA_HOME/webapps/`

*   浏览到`http://localhost:8080/myapp`-> 确定

部署到`non-appBase`位置：

*   将 WAR 文件移动`myapp.war`到`/path/to/nonappbase/`

*   `myctx.xml`在`$CATALINA_HOME/conf/Catalina/localhost/`下面创建上下文文件，

    `<context docBase="/path/to/nonappbase/" reloadable="true" > </context>`

*   浏览至`http://localhost:8080/myctx`-> 未找到

为什么部署到该`non-appBase`位置失败？

**@编辑**

根据来自 的回答`@Mads Nielsen`，经过下面的修改，现在可以使用了，

`<Context docBase="/path/to/nonappbase/myapp.war" reloadable="true" />`

很明显，该`Context`元素应该大写并采用简写形式，即由`/>`而不是封闭`</Context>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:57:59.850

该`context`标记应指向特定的 Web 应用程序，而不是指向 Web 应用程序集合的路径。

在您的上下文中添加`myapp.war`到 docBase 属性，我相信它会起作用。

请参阅此处的“docBase”属性文档： http: [//tomcat.apache.org/tomcat-7.0-doc/config/context.html](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)：

> 此 Web 应用程序的 Document Base（也称为 Context Root）目录，或 Web 应用程序归档文件的路径名（如果此 Web 应用程序直接从 WAR 文件执行）。

# javascript - Node.js：处理由异步回调组成的结果的更好方法

> ID：12952182
> 
> 赞同：0
> 
> 时间：2012-10-18T10:09:41.153
> 
> 标签：javascript, node.js, asynchronous

在我的 node.js 应用程序中，我有一个代码片段来组成一个 csv 数组：

```
function process(alerts, callback) {
    var csvList = [];
    var alertsLength = alerts.length;

    alerts.forEach(function(alert) {
        var name = alert.name;
        var msg = alert.msg;

        // retrieve from database
        // NOTE: the asynchronous part!
        PersonDao.getContact(name, function(error, contact) {
            var csv = "csv:" + contact + "|" + msg;
            csvList.push(csv);

            if (csvList.length == alertsLength) {
                // execute callback with the csvList
                callback(csvList);
            }
        });

    }); // end of alerts loop

} 
```

有没有更优雅（或更正确）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T10:26:05.133

只需为此使用 3rd 方库。

```
var async = require('async');

function process(alerts, callback) {
    //       v--- or async.map(...) to do it in parallel
    async.mapSeries(alerts, function(alert, cb) {
        PersonDao.getContact(alert.name, function(error, contact) {
            cb(error, "csv:" + contact + "|" + alert.msg);
        });
    }, callback);
} 
```

# python - TypeError: object.__new__(int) 不安全，使用 int.__new__()

> ID：12952184
> 
> 赞同：6
> 
> 时间：2012-10-18T10:09:45.340
> 
> 标签：python, metaclass

阅读本文时：[什么是 Python 中的元类？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)，我正在学习使用`__new__`以下代码段：-

```
class a(object):
    pass

a.__new__(int,'abcdef',(int,),{}) 
```

`__new__`使用调用可能会出现一些问题`a.`。但是，我收到以下错误，我不明白其含义：-

`TypeError: object.__new__(int) is not safe, use int.__new__()`

如果与 的用法有关`__new__`，我可以通过阅读一些书籍来修改它。但是，有人可以解释为什么会出现这条消息：

`object.__new__(int) is not safe, use int.__new__()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:20:20.583

简而言之，在 2.6 之前 -`object.__new__` **被忽略**的参数......现在它实际上可能会对它们做一些事情......所以警告是可能会发生不同的事情。

这篇文章[关于 __new__ 失去其论点的最佳解决方法有什么想法吗？](https://stackoverflow.com/questions/4028321/any-ideas-about-the-best-work-around-for-new-losing-its-arguments)- 有更详细的解释。

您可能还想查看[http://docs.python.org/library/functions.html#type](http://docs.python.org/library/functions.html#type)

了解 Python 中所有*元*数据的可能性是很棒的，但作为一个警告，我不会对此过于挂念 - 因为我已经看到了一些非常“聪明”的解决方案，这只是怪物......

# php - 如何演示二阶 SQL 注入？

> ID：12952187
> 
> 赞同：4
> 
> 时间：2012-10-18T10:09:52.053
> 
> 标签：php, pdo, sql-injection

所以我一直在尝试复制二阶 SQL 注入。这是我准备的两个基于 php 的站点的示例模板。我们就叫它选民登记表吧。用户可以注册，然后您可以检查您是否是注册选民。

插入.php

```
<?php

$db_selected = mysql_select_db('canada',$conn);
if (!db_selected)
    die("can't use mysql: ". mysql_error());

$sql_statement = "INSERT into canada (UserID,FirstName,LastName,Age,State,Town)
                    values ('".mysql_real_escape_string($_REQUEST["UserID"])."',
                    '".mysql_real_escape_string($_REQUEST["FirstName"])."',
                    '".mysql_real_escape_string($_REQUEST["LastName"])."',
                    ".intval($_REQUEST["Age"]).",
                    '".mysql_real_escape_string($_REQUEST["State"])."',
                    '".mysql_real_escape_string($_REQUEST["Town"])."')";

echo "You ran the sql query=".$sql_statement."<br/>";
$qry = mysql_query($sql_statement,$conn) || die (mysql_error());
mysql_close($conn);
Echo "Data inserted successfully";
}
?> 
```

选择.php

```
<?php

$db_selected = mysql_select_db('canada', $conn);
if(!db_selected)
    die('Can\'t use mysql:' . mysql_error());
$sql = "SELECT * FROM canada WHERE UserID='".addslashes($_POST["UserID"])."'";
echo "You ran the sql query=".$sql."<br/>";
$result = mysql_query($sql,$conn);
$row=mysql_fetch_row($result);

$sql1 = "SELECT * FROM canada WHERE FirstName = '".$row[1]."'";
echo "The web application ran the sql query internally=" .$sql1\. "<br/>";
$result1 = mysql_query($sql1, $conn);
$row1 = mysql_fetch_row($result1);

mysql_close($conn);
echo "<br><b><center>Database Output</center></b><br><br>";

echo "<br>$row1[1] $row1[2] , you are a voter! <br>";

echo "<b>VoterID: $row[0]</b><br>First Name: $row[1]<br>Last Name: $row[2]
    <br>Age: $row[3]<br>Town: $row[4]<br>State: $row[5]<br><hr><br>";
}
?> 
```

所以我故意让这个易受攻击来展示二阶 SQL 注入是如何工作的，用户可以在名字部分输入代码（我目前被卡住了，我尝试了很多不同的方法，但似乎我无法得到它可以做任何事情）。然后当一个人想要激活他在名字部分插入的代码时，他只需输入用户ID，代码就会被插入。

例如：我将在 insert.php 页面中键入：userid = 17

名字=（我需要在这里注入一些东西）

姓氏 = ..

年龄=..

镇=..

状态 = ..

然后当我检查我的详细信息并输入 17 时，注入的 SQL 脚本将被激活。我可以举几个例子来说明我可以通过这个展示什么样的漏洞吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:16:07.573

有什么可以证明的？

二阶SQL注入无非就是SQL注入，但不安全的代码不是第一行。

所以，为了证明：

1) 创建一个 SQL 注入字符串，该字符串在执行时会做一些不需要的事情而不会转义。

2）将该字符串安全地存储在您的数据库中（带有转义）。

3）让你的代码的其他部分获取该字符串，并在其他地方使用它而不转义。

编辑：添加了一些示例代码：

一张桌子：

```
CREATE TABLE tblUsers (
  userId serial PRIMARY KEY,
  firstName TEXT
) 
```

假设你有一些像这样的安全代码，从表单中接收名字：

```
$firstname = someEscapeFunction($_POST["firstname"]);

$SQL = "INSERT INTO tblUsers (firstname) VALUES ('{$firstname }');";
someConnection->execute($SQL); 
```

到目前为止，一切都很好，假设 someEscapeFunction() 做得很好。无法注入 SQL。

如果我将以下行作为 firstname 的值发送，您不会介意：

布拉'); 从 tblUsers 中删除；//

现在，假设同一系统上的某个人想要将 firstName 从 tblUsers 传输到 tblWhatever，然后这样做：

```
$userid = 42;
$SQL = "SELECT firstname FROM tblUsers WHERE (userId={$userid})";
$RS = con->fetchAll($SQL);
$firstName = $RS[0]["firstName"]; 
```

然后将其插入 tblWhatever 而不转义：

```
$SQL = "INSERT INTO tblWhatever (firstName) VALUES ('{$firstName}');"; 
```

现在，如果 firstname 包含一些删除命令，它仍然会被执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:31:30.403

使用以下名字：

```
' OR 1 OR ' 
```

这将在第二个 SQL 中产生一个 where 子句

> WHERE FirstName = '' OR 1 OR ''

因此，结果将是表中的第一条记录。

通过添加 LIMIT 子句，您可以从表中提取所有行：

> ' OR 1 ORDER BY UserID ASC LIMIT 0, 1 --

显然它一次只会提取 1 行，因此您需要重复该操作并在 LIMIT 中增加 0。此示例使用注释`--`来终止剩余的 SQL，否则会导致查询失败，因为它会在您的 LIMIT 之后添加一个单引号。

上面是一个简单的例子，更复杂的攻击是使用 UNION SELECT，它可以让你通过使用 information_schema 访问整个数据库。

您也在`addslashes()`其中一个查询中使用。这不如`mysql_real_escape_string()`反过来安全：使用任何一个转义引号不如使用准备好的语句或参数化查询安全，例如在 PDO 或 MySQLi 中。

# ios - Backbone.js/Zepto.js 的动画

> ID：12952190
> 
> 赞同：0
> 
> 时间：2012-10-18T10:10:06.193
> 
> 标签：ios, mobile, backbone.js, zepto

我目前正在使用 Zepto.js 制作 Backbone.js 中的移动应用程序来制作动画，在页面转换过程中会出现明显的白色闪烁，这在视觉上非常令人不快。我似乎无法弄清楚，有人知道为什么会发生这种情况吗？

我的动画代码如下：

```
var $old = $('.page').not(this.el);

        //This fix was hard-won, just doing .css(property, '') doesn't work!
        $old.get(0).style["margin-left"] = ""
        $old.get(0).style["-webkit-transform"] = ""

        this.$el.appendTo('body').hide();
        this.$el.show().css({"margin-left": 320 * direction_coefficient});
        var that=this;
        that.$el.anim({translateX: -320 * direction_coefficient +'px'}, 0.3, 'ease-out');
        $old.anim({translateX: -320 * direction_coefficient + 'px'}, 0.3, 'ease-out', function() {
            $old.remove();
            //$('.page').css({"position": "static"});
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:39:15.127

将动画元素（页面视图？）的背面可见性设置为隐藏以防止闪烁

```
-webkit-backface-visibility: hidden; 
```

如果这不起作用，您可能想尝试在身体或动画元素上使用

```
-webkit-transform:translate3d(0,0,0); 
```

这将防止将身体或您的元素转换为 GPU 加速层，从而将其栅格化以进行动画处理，这就是正常元素转换为动画层时可能发生闪烁的地方。

# vba - 如何在 Excel 文件中的所有工作表上运行相同的代码

> ID：12952194
> 
> 赞同：0
> 
> 时间：2012-10-18T10:10:08.120
> 
> 标签：vba, excel, spreadsheet

我想在 Excel 文件**中一次为每个工作表执行以下 VBA 代码：**

```
Sub sample_code()    
    Columns("B:B").Select
    Selection.Replace What:=" ", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
    Range("A:A,D:J").Select
    Range("D1").Activate
    Selection.Delete Shift:=xlToLeft
    Columns("F:P").Select
    Selection.Delete Shift:=xlToLeft
    Columns("A:E").EntireColumn.AutoFit
    Columns("B:B").ColumnWidth = 30.86
    Range("A1:E1").Select
    Selection.Font.Bold = True
End Sub 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:23:04.097

像这样：

```
Sub sample_code()
    Dim ws As Worksheet

    For Each ws In Worksheets
        With ws
            .Columns("B:B").Replace What:=" ", Replacement:="", LookAt:=xlPart, _
                SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
                ReplaceFormat:=False
            .Range("A:A,D:J").Delete Shift:=xlToLeft
            .Columns("F:P").Delete Shift:=xlToLeft
            .Columns("A:E").EntireColumn.AutoFit
            .Columns("B:B").ColumnWidth = 30.86
            .Range("A1:E1").Font.Bold = True
        End With
    Next ws
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:36:33.003

此外，在开头添加 Application.ScreenUpdating = False 并在末尾添加 Application.ScreenUpdating = True 以加快速度。

# c# - 将类添加到最后一项

> ID：12952201
> 
> 赞同：2
> 
> 时间：2012-10-18T10:10:30.047
> 
> 标签：c#, asp.net, .net, webforms

> **可能重复：**
> [如果第一个或最后一个更改中继器 li 项目类](https://stackoverflow.com/questions/5263696/change-repeater-li-item-class-if-first-or-last)

我在一个我以前从未使用过的.net 网站上工作。

我有以下输出4个div ...

```
<asp:Repeater ID="RT_Ranges" runat="server">
    <ItemTemplate>
        <div class="item">
            <h4>
                <%# Eval("Category_Name")%></h4>
            <asp:Image ID="Image1" ImageUrl='<%# Eval("Img") %>' runat="server" Height="92" Width="79" />
            <p>
                <%# Eval("des") %></p>
            <asp:HyperLink ID="HL_More" NavigateUrl='<%# Eval("nav") %>' runat="server">View More</asp:HyperLink>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

我想在上面输出的最后一个 DIV 中添加一个类，这可能吗？如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:16:18.487

[你在这里](https://stackoverflow.com/questions/5263696/change-repeater-li-item-class-if-first-or-last)有你的答案

让它像：

```
<asp:Repeater ID="RT_Ranges" runat="server">
    <ItemTemplate>
        <div class="<%# GetItemClass(Container.ItemIndex) %>">
            <h4>
                <%# Eval("Category_Name")%></h4>
            <asp:Image ID="Image1" ImageUrl='<%# Eval("Img") %>' runat="server" Height="92" Width="79" />
            <p>
                <%# Eval("des") %></p>
            <asp:HyperLink ID="HL_More" NavigateUrl='<%# Eval("nav") %>' runat="server">View More</asp:HyperLink>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

并在您的代码隐藏中：

```
protected string GetItemClass(int itemIndex)
{
if (itemIndex == this.ItemCount - 1)
        return "CSS_for_last_item";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:14:12.397

您可以在服务器上执行此操作：

*   在数据绑定后的代码中

或在客户端：

*   使用纯 CSS（参见[`:last-child`选择器](http://www.w3schools.com/cssref/sel_last-child.asp)）
*   使用脚本（参见[jQuery`:last-child`选择器](http://api.jquery.com/last-child-selector/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:14:24.597

你不能这样做。至少这并不容易。

如果您出于样式原因需要此类，请改用`:last-child`伪类，如果您在 javascript 中需要此类，则还有其他获取最后一个孩子的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:16:47.963

您可以使用 a`Panel`代替（呈现为 div）。然后您可以使用此代码获取最后一项并找到面板：

```
RepeaterItem lastRepeaterItem = RT_Ranges.Items[RT_Ranges.Items.Count - 1];
Panel lastPanel = (Panel)lastRepeaterItem.FindControl("PanelID");
lastPanel.CssClass = "yourclass"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T10:17:48.430

```
<asp:Repeater ID="RT_Ranges" runat="server">
    <ItemTemplate>
        <div <%# (Container.DataItemIndex != 0 && (Container.DataItemIndex+1) % 4 == 0) ? @"class='myClass'" : @"class='item'" %>>
            <h4>
                <%# Eval("Category_Name")%></h4>
            <asp:Image ID="Image1" ImageUrl='<%# Eval("Img") %>' runat="server" Height="92" Width="79" />
            <p>
                <%# Eval("des") %></p>
            <asp:HyperLink ID="HL_More" NavigateUrl='<%# Eval("nav") %>' runat="server">View More</asp:HyperLink>
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

或者使用 jQuery：

```
$("table.RT_Ranges div:last").attr("class", "last"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T10:20:08.587

Change class attribute value as follows,

```
 <div class="<%# GetItemClass(Container.ItemIndex) %>"> 
```

And create `GetItemClass` method in code behid,

```
protected string GetItemClass(int itemIndex)
{
    if (itemIndex == this.ItemCount - 1)
        return "last";
    else
        return "other";
} 
```

Also refer [Change repeater li item class if first or last](https://stackoverflow.com/questions/5263696/change-repeater-li-item-class-if-first-or-last)

# sharepoint - sharepoint 2010 无法从左侧导航菜单打开子网站

> ID：12952202
> 
> 赞同：0
> 
> 时间：2012-10-18T10:10:32.877
> 
> 标签：sharepoint, master-pages

我正在使用sharepoint 2010并进行应用程序我的问题是我不知道为什么我的网站无法打开子网站我有一个父网站和两个子网站作为>父EL

1.  >小时
2.  >账户

它能够打开人力资源，但是当我尝试打开帐户时，它在新页面上的提示显示错误消息如下

**`an unexpected error occured and showing co relation id.`**

请帮助我...提前谢谢

注意：这个问题是在我开始更改母版页的主题之前开始的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:51:30.933

[您可以在此处](http://sharepoint.microsoft.com/blogs/GetThePoint/Lists/Posts/Post.aspx?ID=353)使用此站点查看如何使用[uls 查看器](http://archive.msdn.microsoft.com/ULSViewer)调试相关 ID 问题。如果您需要更多信息，请打开查看器，检查问题并在此处发布。

# wpf - 使用 ItemTemplateSelector 在不同的网格中拆分 DataTemplate

> ID：12952204
> 
> 赞同：0
> 
> 时间：2012-10-18T10:10:46.200
> 
> 标签：wpf, xaml, itemscontrol

我正在研究 WPF-XAML。我的要求是：我需要在选项卡中添加树干集合（由边框和 TexBlocks 组成）。将有 2 种类型的此类中继（例如**RSPTrunkTemplate**和**ASPTrunkTemplate**）。现在我需要在一个网格中添加**RSPTrunkTemplate类型的树干集合。**然后会有GridSplitter，然后我需要在另一个网格中添加另一个**ASPTrunkTemplate类型的Trunks 集合。**

我正在使用 ItemTemplateSelector 如下：

```
<Grid>
                <ItemsControl Name="TrunkList"
                              ItemsSource="{Binding RSPTrunks}"
                              ItemTemplateSelector="{StaticResource TrunkItemTemplateSelector}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Vertical" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                </ItemsControl>
            </Grid> 
```

这个 TrunkItemTemplateSelector 如下：

```
<Helpers:TrunkItemTemplateSelector x:Key="TrunkItemTemplateSelector"
                                           RSPTrunkTemplate="{StaticResource RSPTrunkTemplate}"
                                           SPTrunkTemplate="{StaticResource ASPTrunkTemplate}" /> 
```

现在，**RSPTrunkTemplate**应该在一个网格中，而**ASPTrunkTemplate**应该在另一个网格中。这个怎么做。我必须改变我的方法吗？我寻求你们的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:50:15.667

ItemTemplateSelector，顾名思义，是用来为 ItemsControl 内的对象指定不同的模板，而不是做过滤。如果我理解正确你想应用分组也许这个链接可以帮助你[http://msdn.microsoft.com/en-us/library/ms742542.aspx](http://msdn.microsoft.com/en-us/library/ms742542.aspx)

# c# - asp.net 中的 PayPal 快速结帐

> ID：12952207
> 
> 赞同：2
> 
> 时间：2012-10-18T10:10:55.250
> 
> 标签：c#, asp.net, iis, paypal

我正在使用以下 Web 服务来实现快速结帐

```
//Demo
https://www.sandbox.paypal.com/wsdl/PayPalSvc.wsdl

//Live
https://www.paypal.com/wsdl/PayPalSvc.wsdl 
```

我从 belo 博客 URL 获得了帮助。

[http://blog.effectlabs.com/post/2011/11/07/Paypal-Express-Checkout-with-C-using-Paypal-web-services.aspx](http://blog.effectlabs.com/post/2011/11/07/Paypal-Express-Checkout-with-C-using-Paypal-web-services.aspx)

错误是 - 在响应对象中，当我在 xp-64 位（端口和 iis6 两者）、window server 2008（iis7 32 位模式）上运行相同的代码时，我得到“resp.Token is null”

但是在win-7 32位iis7和端口上运行良好（没有错误，令牌是坚果空值）

我的代码如下。

```
 protected void btnPaypal_Click(object sender, EventArgs e)
{

    CustomSecurityHeaderType type = new CustomSecurityHeaderType();

    type.Credentials = new UserIdPasswordType()
    {

        Username = "removed",
        Password = "removed",
        Signature = "removed"
    };

    SetExpressCheckoutRequestDetailsType sdt = new SetExpressCheckoutRequestDetailsType();
    sdt.NoShipping = "1";
    PaymentDetailsType pdt = new PaymentDetailsType()
    {
        OrderDescription = "Payment Details Sushant",
        OrderTotal = new BasicAmountType()
        {
            currencyID = CurrencyCodeType.USD,
            Value = "100.00"
        }
    };

    sdt.PaymentDetails = new PaymentDetailsType[] { pdt };
    sdt.CancelURL = "http://localhost/OAT/Default.aspx";
    sdt.ReturnURL = "http://localhost/OAT/ExpressCheckoutSuccess.aspx";

    SetExpressCheckoutReq req = new SetExpressCheckoutReq()
    {
        SetExpressCheckoutRequest = new SetExpressCheckoutRequestType()
        {
            SetExpressCheckoutRequestDetails = sdt,
            Version = "60.0"
        }
    };
    PayPalAPIAAInterfaceClient paypalAAInt = new PayPalAPIAAInterfaceClient();
    var resp = paypalAAInt.SetExpressCheckout(ref type, req);
    if (resp.Errors != null && resp.Errors.Length > 0)
    {
        // errors occured
        throw new Exception("Exception(s) occured when calling PayPal. First exception: " +
            resp.Errors[0].LongMessage + resp.Errors.Length.ToString());
    }

// error is here.. that resp.Token is null on xp-64 bit port and iis6 both, but running fine on win-7 32 bit iis7 and port, and w

    Response.Redirect(string.Format("{0}?cmd=_express-checkout&token={1}",
            "https://www.paypal.com/cgi-bin/webscr", resp.Token));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:24:55.557

在 PayPal Web Reference 的文件夹中，在文本编辑器中打开 Reference.cs 文件并搜索“System.Xml.XmlElement Any”

您会注意到如下代码：

```
[System.Xml.Serialization.XmlElementAttribute(Order=6)]
    public System.Xml.XmlElement Any {
        get {
            return this.anyField;
        }
        set {
            this.anyField = value;
            this.RaisePropertyChanged("Any");
        }
    } 
```

现在更换

`[System.Xml.Serialization.XmlElementAttribute(Order=6)]`

和

`[System.Xml.Serialization.XmlIgnoreAttribute()]`

并在重新编译后运行您的应用程序。

您现在将看到 resp.Token 填充了所需的值

# android - 如何在 Android 中将 base64Binary 字符串转换为图像？

> ID：12952208
> 
> 赞同：0
> 
> 时间：2012-10-18T10:10:58.050
> 
> 标签：android, base64

我试过这段代码

```
 byte decodedIcon[] = null;
 byte[] bb = (resposeString).getBytes("utf-8");
 decodedIcon = Base64.decodeBase64(bb);

Bitmap bitmap = BitmapFactory.decodeByteArray(decodedIcon, 0,decodedIcon.length); 
```

我包括了 commons-codec-1.3.jar

它仍然返回 null，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:16:30.857

我使用以下函数将 Base64 字符串转换为图像。

```
public Bitmap Base64ToImage(String base64String) {
    byte[] imageAsBytes = Base64.decode(base64String.getBytes(),
            Base64.DEFAULT);
    Bitmap mybitmap = BitmapFactory.decodeByteArray(imageAsBytes, 0,
            imageAsBytes.length);
    return mybitmap;
} 
```

# php - 当位置来自函数时，php标头方法不起作用

> ID：12952214
> 
> 赞同：0
> 
> 时间：2012-10-18T10:11:19.413
> 
> 标签：php, header

在我正在处理的页面上，它可以受密码保护，因此用户必须先登录才能看到内容。他们登录后，将调用以下代码：

```
//In one file
function current_page_url() {
    return 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
}

//In Another file
generate_page_cookie();
header('Location: ', current_page_url());
exit; 
```

这是行不通的。但是，以下内容可以：

```
generate_page_cookie();
header('Location: ', 'http://example.com');
exit; 
```

在标头函数中使用字符串似乎很奇怪，但在标头函数中调用函数却不行。

我认为这可能与访问 $_SERVER 变量有关，但我不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:14:23.327

将您的更改`,`为`.`, php 用于`.`连接字符串。

```
header('Location: ' . current_page_url()); 
```

# java - jboss 内存不足

> ID：12952216
> 
> 赞同：1
> 
> 时间：2012-10-18T10:11:24.643
> 
> 标签：java, out-of-memory, jboss-4.2.x

我们有一个使用 JBoss 4.2.0、EJB、Hibernate 的 java 应用程序。

在我们的一台生产服务器中，定期出现 OutOfMemory 错误。我们在 jboss 和服务器日志文件中看到用户定义的异常。当用户点击特定的代码时，我们故意从我们的代码中抛出这个用户定义的异常。但是这个客户的用户数量和使用量更多。所以它会抛出 400-500 个异常。之后我们得到一个

```
WARN org.jboss.mq.SpyJMSException: No pong received; 
```

我们已经实现了 ExceptionListener 以在失败的情况下重新连接 topicConnection。还有一些socketexception如下。

```
2012-10-12 10:33:57,824 ERROR [org.apache.tomcat.util.net.PoolTcpEndpoint] (http-0.0.0.0-8880-Processor1436) Socket error caused by remote host /125.236.40.205 java.net.SocketException: Connection reset 
```

已经分析了生成的堆转储。4.5 GB 内存被 jmsspyobject 异常占用。我们从 jmx 控制台获得了线程转储。我们是否需要将复制的线程转储加载到 TDA（线程转储分析器）工具？

OOM 是因为用户定义的异常数量如此之多吗？我们需要减少它吗？或用户定义的异常不是OOM错误的原因？

请找到附加的线程日志。我对分析 jboss 线程日志非常陌生。谁能帮我做到这一点？

[http://www.4shared.com/file/toRiqF1n/perf-info.html](http://www.4shared.com/file/toRiqF1n/perf-info.html)

谢谢。

# ios - 使用 startMonitoringSignificantLocationChanges 时是否应显示定位服务指示符（状态栏中的箭头）？

> ID：12952217
> 
> 赞同：4
> 
> 时间：2012-10-18T10:11:26.823
> 
> 标签：ios, xcode, geolocation, location, cllocationmanager

使用时状态栏中的“GPS 箭头”提示定位服务正在运行是否正常`startMonitoringSignificantLocationChanges`？

事实上，当我的应用程序处于后台时，我不希望此箭头出现在状态栏中（因为用户会认为我的应用程序会缩短其电池寿命）。但我需要跟踪显着的位置变化！

这是我到目前为止的行为：

1.  我的应用程序处于前台（状态栏中未显示箭头）
2.  用户单击主页按钮=>我`startMonitoringSignificantLocationChanges`在输入`applicationDidEnterBackground`委托方法时执行=>出现箭头...（我不想要什么！）

请告诉我启动时状态栏中的箭头是否正常，`startMonitoringSignificantLocationChanges`是否有办法将其删除。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T17:16:16.770

是的，这很正常。您的应用程序可能会被操作系统唤醒以响应重大的位置变化，这就是状态栏指示器所显示的内容。[Locationservice Indicators stays "on"](https://stackoverflow.com/questions/4872055/locationservice-indicator-stays-on?lq=1)有一个相关的 iOS 错误（Richard Groves 的回答）。我不知道有什么方法可以抑制状态栏指示。

# java - 读取 pdf 文件时出现 NoClassDefFoundError

> ID：12952218
> 
> 赞同：2
> 
> 时间：2012-10-18T10:11:31.240
> 
> 标签：java

我正在尝试阅读pdf文件，代码是

```
 try {

        File fileConn = new File(filePath);
        InputStream inp = new FileInputStream(fileConn);
        PdfReader reader = new PdfReader(inp);
        int pages = reader.getNumberOfPages();
        System.out.println("Pages" + pages);
    } catch (Exception e) {
        //Handle Exception
    } 
```

但是该方法正在抛出 NOClassDefFoundError。可能的原因是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:14:14.137

您是否将**pdfbox 和 itextpdf**添加到您的类路径中？

试试这个，如果你使用的是 maven：

```
 <dependency>
        <groupId>org.apache.pdfbox</groupId>
        <artifactId>pdfbox</artifactId>
        <version>1.6.0</version>
    </dependency>
    <dependency>
        <groupId>com.itextpdf</groupId>
        <artifactId>itextpdf</artifactId>
        <version>5.0.6</version>
    </dependency> 
```

# xsd - 从 DynamicForm 获取所有字段

> ID：12952221
> 
> 赞同：6
> 
> 时间：2012-10-18T10:11:40.853
> 
> 标签：xsd, smartgwt

我使用从 xsd 模式生成的 DataSource。我需要从 DataSource 中获取所有字段，包括嵌套字段。我的问题与[Smartclient forum forum 的这个主题](http://forums.smartclient.com/showthread.php?t=21986&highlight=xsd+datasource+fields)相同，当我使用`DataSource.getFields()`它只返回第一级字段时。

有谁知道我怎样才能获得嵌套字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:35:48.953

我不确定这是否会解决您的问题。`CompanySlaves`不是 xsd 中任何地方的引用。类型已定义但未使用。

我认为你需要有`<xsd:element name="SomeElementName" type="tns:CompanySlaves"></xsd:element> in your xsd definition`

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://xml.netbeans.org/schema/newXmlSchema"
    xmlns:tns="http://xml.netbeans.org/schema/newXmlSchema"
    elementFormDefault="qualified">
    <xsd:element name="SubrogationClaim" type="tns:SubrogationClame"></xsd:element>
    <xsd:complexType name="SubrogationClame">
        <xsd:sequence>
            <xsd:element name="CompanyName" type="xsd:string"></xsd:element>
            <xsd:element name="CompanyPlace" type="xsd:string"></xsd:element>
            <xsd:element name="CompanyEmploee" type="tns:SubrogationClame"></xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:complexType name="CompanySlaves">
        <xsd:sequence>
            <xsd:element name="EmploeeName" type="xsd:string"></xsd:element>
            <xsd:element name="EmploeeSalary" type="xsd:string"></xsd:element>
        </xsd:sequence>
    </xsd:ComplexType>
</xsd:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:02:44.180

我找到了解决方案。要获取嵌套字段，可以使用 DataSource.getDataSource(ID)。例如，如果 dataSource 是主 DataSource，则可以这样做：

```
 private List<DataSourceField> getAllFields(DataSource dataSource)
    {
        List <DataSourceField> fieldList = new ArrayList<DataSourceField>();
        DataSourceField [] fields = dataSource.getFields();
        fieldList.addAll(Arrays.asList(fields));
        for (DataSourceField field : fields);
        {
            String fieldName = field.getName();
            DataSource ds = DataSource.getDataSource(fieldName);
            if (ds != null)
            {
                fieldList.remove(field);
                DataSourceField[] nFields = ds.getFields();
                fieldList.addAll(Arrays.asList(nFields));
                getAllFields(ds);
            }
        }
        return fieldList;
    } 
```

# facebook - Facebook 签名请求返回 NULL

> ID：12952224
> 
> 赞同：2
> 
> 时间：2012-10-18T10:11:48.977
> 
> 标签：facebook, request, signed

我创建了一个标签应用程序并部署到我的三个粉丝页面。

当访问者访问我的粉丝页面时，我的 Web 后端将从 signed_request 中获取 pageID，以便它可以记录该用户正在访问的粉丝页面。

它适用于没有任何粉丝页面管理员角色的 facebook 用户。但是，如果具有管理员角色的用户访问这些粉丝页面，我不仅可以从 signed_request 参数中获取 Null 值。

有谁知道为什么？我该如何解决？

谢谢

伊恩

# .htaccess - 从 URL 中删除 index.php 和尾部斜杠

> ID：12952225
> 
> 赞同：0
> 
> 时间：2012-10-18T10:11:49.403
> 
> 标签：.htaccess

我的 .htaccess 中有以下重写规则，前 4 行应该处理允许在没有 index.php 的情况下访问该站点，并且工作正常，直到我添加我试图使用的最后一位从站点 URL 中删除尾部斜杠。

```
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5})$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond $1 !^(uploads|cache|themes|default|admin\.php|favicon\.ico|robots\.txt|index\.php) [NC]
RewriteRule ^(.*)$ /index.php/$1

# Remove trailing slashes
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

当我添加最后一行并访问网站的根目录时，index.php 部分会附加到 URL，这是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:08:23.137

> 当我添加最后一行并访问网站的根目录时，index.php 部分会附加到 URL，这是为什么呢？

这是因为规则是按顺序应用的。您希望在将*内容*路由到`/index.php`. 只需交换这些规则：

```
# Remove trailing slashes
RewriteRule ^(.+)/$ http://%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5})$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond $1 !^(uploads|cache|themes|default|admin\.php|favicon\.ico|robots\.txt|index\.php) [NC]
RewriteRule ^(.*)$ /index.php/$1  [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-24T11:37:01.487

遵循规则对我有用。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f

#Removing trailing slash
RewriteRule ^(.*)/$ /$1 [L,R]

#Removing index.php
RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=302,NE,L] 
```

# javascript - 通过匿名函数在javascript中调用函数时是否可以保留“this”？

> ID：12952231
> 
> 赞同：2
> 
> 时间：2012-10-18T10:12:04.903
> 
> 标签：javascript, jquery

假设我有一个具有 onSelect 属性的 jquery 插件。用户将其设置为一个函数，当调用该函数时，`this`指的是应用插件的对象。一切都很好。

如果我想编写一个包装这个插件的插件，以便将一些代码注入到 onSelect 中，我会这样做：

```
// Get whatever the user put in
var extOnSelect = options['onSelect'];

// delete the onSelect attribute
delete options['onSelect'];

// re-add onSelect as an anonymous function that calls my method and the user's
var options = $.extend({ 
    'onSelect': function() { onSelect(); extOnSelect(); }
    }, options);

// call the plugin that I am wrapping / injecting extra onSelect code into
$(this).externalPlugin(options); 
```

然后它将传入我自己的 onSelect 代码，同时保留用户输入的内容。

唯一的问题是，这两个函数中的每一个都`this`不再指代对象，它现在指的是我认为的泛型内联函数。

解决此问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:15:44.093

用途[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)和[`arguments`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)：

```
extOnSelect.apply(this, arguments); 
```

`extOnSelect`像当前函数一样调用。

您可以使用[`call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)，但是您需要显式传递事件对象（和其他可能的参数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:15:22.093

我认为您需要使用`call`javascript函数的方法。

```
var options = $.extend({ 
'onSelect': function() { onSelect.call(this); extOnSelect.call(this); }
}, options); 
```

# html - 使用 CSS 和 spritesheet 中的多个图像设置按钮样式

> ID：12952234
> 
> 赞同：0
> 
> 时间：2012-10-18T10:12:18.433
> 
> 标签：html, css, button, styling

我在精灵表中有以下图像，并想用它来设置按钮的样式：

![在此处输入图像描述](../Images/3547e0794d147906b3010ace59a570aa.png)

我已经尝试了所有我能想到的东西（甚至是伪元素），但我无法让它发挥作用。我曾认为这样的事情应该有效：

```
.ui-button {
height:45px;
background-image: url(../button.png), url(../button.png), url(../media/button.png);
background-size: 8px 45px, 8px 45px, 3px 45px !important;
background-position: -63px -1px, -77px -1px, -73px -1px; 
background-repeat: no-repeat, no-repeat, repeat;
} 
```

但事实并非如此。背景大小位是我正在使用的精灵表中每个块的大小，位置是精灵表中每个部分的左上角坐标。显然我做错了什么。什么？

编辑：这是整个图像：

![在此处输入图像描述](../Images/f1bce306808bcc50bc9551b6fc8df162.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:50:35.250

这是我用 JSFiddle 尝试过的：

[http://jsfiddle.net/Kpusc/](http://jsfiddle.net/Kpusc/)

```
.ui-button {
    height:45px;
    width:18px;
    background: url(http://i.stack.imgur.com/ipKrd.png);
    background-position: -72px -1px;
    background-repeat: no-repeat;
    position:relative;
    border:0;
}

.ui-button:before {
    content:"";
    display:block;
    height:45px;
    width:8px;
    background: url(http://i.stack.imgur.com/ipKrd.png);
    background-position: -64px -1px;
    background-repeat: no-repeat;
    position:absolute;left:0;top:0;
}

 .ui-button:after {
     content:"";
     display:block;
     height:45px;
     width:8px;
     background: url(http://i.stack.imgur.com/ipKrd.png);
     background-position: -78px -1px;
     background-repeat: no-repeat;
     position:absolute;right:0;top:0;
 } 
```

​</p>

不幸的是，我只能将其设为 34 像素。因为我不能让中心内容重复。

我想您需要使中心部分至少宽于 60 像素，以便可以将其用作`.ui-button`背景图像（或者可能将其完全作为单独的文件，因此可以重复）。

我想知道是否还有其他解决方法。

# java - 配置的 SessionFactory: null

> ID：12952243
> 
> 赞同：1
> 
> 时间：2012-10-18T10:12:46.890
> 
> 标签：java, hibernate, hibernate-mapping

我已经创建了基本的休眠应用程序。它抛出错误消息。

**错误是：**

```
 Oct 18, 2012 3:36:13 PM org.hibernate.cfg.Environment <clinit>
INFO: Hibernate 3.2.5
Oct 18, 2012 3:36:13 PM org.hibernate.cfg.Environment <clinit>
INFO: hibernate.properties not found
Oct 18, 2012 3:36:13 PM org.hibernate.cfg.Environment buildBytecodeProvider
INFO: Bytecode provider name : cglib
Oct 18, 2012 3:36:13 PM org.hibernate.cfg.Environment <clinit>
INFO: using JDK 1.4 java.sql.Timestamp handling
Oct 18, 2012 3:36:13 PM org.hibernate.cfg.Configuration configure
INFO: configuring from resource: /hibernate.cfg.xml
Oct 18, 2012 3:36:13 PM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: Configuration resource: /hibernate.cfg.xml
Oct 18, 2012 3:36:13 PM org.hibernate.cfg.Configuration addResource
INFO: Reading mappings from resource : com/crmcall/entity/CallUsers.hbm.xml
Oct 18, 2012 3:36:13 PM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
INFO: Mapping class: com.crmcall.entity.CallUsers -> crmcallusers
Oct 18, 2012 3:36:13 PM org.hibernate.cfg.Configuration addResource
INFO: Reading mappings from resource : com/crmcall/entity/Customers.hbm.xml
Oct 18, 2012 3:36:14 PM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
INFO: Mapping class: com.crmcall.entity.Customers -> crmcustomermaster
Oct 18, 2012 3:36:14 PM org.hibernate.cfg.Configuration addResource
INFO: Reading mappings from resource : com/crmcall/entity/User.hbm.xml
Oct 18, 2012 3:36:14 PM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
INFO: Mapping class: com.crmcall.entity.User -> crmusers
Oct 18, 2012 3:36:14 PM org.hibernate.cfg.Configuration doConfigure
INFO: Configured SessionFactory: null
Initial SessionFactory creation failed.org.hibernate.MappingException: component class not found: string
Exception in thread "main" java.lang.ExceptionInInitializerError
        at com.crmcall.util.HibernateUtil.<clinit>(HibernateUtil.java:27)
        at com.crmcall.dao.UserDAO.<init>(UserDAO.java:23)
        at com.crmcall.dao.UserDAO.main(UserDAO.java:36)
Caused by: org.hibernate.MappingException: component class not found: string
        at org.hibernate.mapping.Component.getComponentClass(Component.java:104)
        at org.hibernate.tuple.component.PojoComponentTuplizer.buildGetter(PojoComponentTuplizer.java:133)
        at org.hibernate.tuple.component.AbstractComponentTuplizer.<init>(AbstractComponentTuplizer.java:43)
        at org.hibernate.tuple.component.PojoComponentTuplizer.<init>(PojoComponentTuplizer.java:38)
        at org.hibernate.tuple.component.ComponentEntityModeToTuplizerMapping.<init>(ComponentEntityModeToTuplizerMapping.java:52)
        at org.hibernate.tuple.component.ComponentMetamodel.<init>(ComponentMetamodel.java:50)
        at org.hibernate.mapping.Component.buildType(Component.java:152)
        at org.hibernate.mapping.Component.getType(Component.java:145)
        at org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:253)
        at org.hibernate.mapping.RootClass.validate(RootClass.java:193)
        at org.hibernate.cfg.Configuration.validate(Configuration.java:1102)
        at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1287)
        at com.crmcall.util.HibernateUtil.<clinit>(HibernateUtil.java:24)
        ... 2 more
Caused by: java.lang.ClassNotFoundException: string
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Class.java:169)
        at org.hibernate.util.ReflectHelper.classForName(ReflectHelper.java:100)
        at org.hibernate.mapping.Component.getComponentClass(Component.java:101) 
```

这是我的 Hibernate.cfg.xml 文件：

```
 <hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://192.168.1.5:3306/crmtest</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password">root</property>
    <property name="hibernate.hbm2ddl.auto">create-drop</property>
    <property name="show_sql">true</property>
    <property name="format_sql">true</property>
    <!-- Enable Hibernate automatic session context management -->
    <property name="current_session_context_class">thread</property>

        <!-- Disable the second-level cache  -->
   <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

    <mapping resource="com/crmcall/entity/CallUsers.hbm.xml"/>
    <mapping resource="com/crmcall/entity/Customers.hbm.xml"/>
    <mapping resource="com/crmcall/entity/User.hbm.xml"/>
  </session-factory>
</hibernate-configuration> 
```

这是我的 User.hbm.xml

```
 <hibernate-mapping>
  <class name="com.crmcall.entity.User" table="crmusers">
      <composite-id name="userPK" >
           <key-property name="businessUnit" column="BusinessUnit" type="string"/>
           <key-property name="userID" column="UserID" type="string"/>
      </composite-id>

        <property name="recID" >
          <column name="RecID"/>
        </property>

        <property name="password">
          <column name="Password"/>
        </property>

        <property name="userName">
          <column name="UserName"/>
        </property>

        <property name="userType">
          <column name="UserType"/>
        </property>

        <property name="userLevel">
          <column name="UserLevel"/>
        </property>

        <property name="customerCode">
          <column name="CustomerCode"/>
        </property>

        <property name="customerCodeson">
          <column name="CustomerCodeson"/>
        </property>

        <property name="locationCode">
          <column name="LocationCode"/>
        </property>

        <property name="lastUpdatedBy">
          <column name="LastUpdatedBy"/>
        </property>

        <property name="lastUpdatedOn" type="timestamp">
          <column name="LastUpdatedOn"/>
        </property>

      <property name="email" type="string">
          <column name="Email"/>
        </property>

  </class>

</hibernate-mapping> 
```

这是我打电话的地方：

```
 public class UserDAO {
    private Session session = null;

    public UserDAO() {
        session =  HibernateUtil.currentSession();
    }

     public List<User> getAllUsers() {
        Transaction tn = session.beginTransaction();
        List<User> users = session.createQuery("from crmusers cu order by cu.UserID").list();
        System.out.println("==" + users.size());
        tn.commit();
        return users;
    }

     public static void main(String[] args){
         UserDAO userDAO = new UserDAO();
         userDAO.getAllUsers();
     }
} 
```

这是我的项目文件夹结构： ![在此处输入图像描述](../Images/36b6b44dc4ef61dee87a19fc8bf70ebd.png)

请告诉我我的代码有什么问题？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:18:51.663

在 User.hbm.xml 中，您必须使用`type="java.lang.String"`（带有大“S”）。而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:22:04.700

嗯，在你的映射文件中，你有

```
<key-property name="businessUnit" column="BusinessUnit" type="string"/>
<key-property name="userID" column="UserID" type="string"/> 
```

这应该是`...type="java.lang.String"...`相反的，但很可能你真的不需要它 - Hibernate 会做出（通常非常好的）有根据的猜测。

干杯，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:18:08.040

“string”和“java.lang.String”都是 org.hibernate.type.StringType 的别名，因此它们都应该在命名类型方面起作用。

我实际上不太确定问题出在用户的映射中。该映射看起来不错。基于那个例外，我更希望你在某个地方

```
<composite-id ... class="string"> 
```

或者

```
<component ... class="string"> 
```

或类似的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T11:11:31.017

Hibernate 使用`reflection`来确定映射类型`runtime`。看来您的映射是正确的，但是如果您仍然遇到同样的问题。我**建议**您`type attribute`暂时从所有`String`类型属性（例如 email、businessUnit、userId）中删除

`String`对所有类型属性尝试这种方式

```
 <property name="email">
          <column name="Email"/>
        </property> 
```

`java.lang.String`或者你也可以试试

```
 <property name="email" type="java.lang.String">
          <column name="Email"/>
        </property> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-02T15:03:49.890

```
<composite-id name="userPK" >
       <key-property name="businessUnit" column="BusinessUnit" type="String"/>
       <key-property name="userID" column="UserID" type="String"/>
  </composite-id> 
```

尝试将字符串更改为字符串

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T10:20:01.643

AS I understand the problem in your code was caused by your *User.hbm.xml* mapping file. To be more precised by *type="string"* attribute of *composite-id* tab.

As I understand you don't need to put type attribute obligatory so try to skip it at all; hibernate should detect it automatically. I'm not sure in last sentece because I have not used composite keys, but there are a lot of examples where peoples don't define type explicitly.

# c++ - 在 C++ 中释放多维数组

> ID：12952246
> 
> 赞同：2
> 
> 时间：2012-10-18T10:12:48.633
> 
> 标签：c++, multidimensional-array

我将如何销毁任意大小、维度和类型的动态数组？delete[] 会自动降低二维数组的级别，还是只删除第一级指针，因此程序需要手动迭代每个数组级别？

理想情况下，我需要一个命令（用于模板类）来破坏一到四维数组。如果有办法检查数组的维数，它也会起作用。

我正在使用动态数组，例如 double* ar = new double[100];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:26:26.993

如果您使用的是 C++，请使用`std::vector`and `std::unique_ptr`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:15:43.157

您需要手动遍历所有级别以删除它们。
如果有办法检查尺寸，您可以使用它来选择正确的销毁过程。

另外，为什么不使用向量？它们速度很快，并且在超出范围时会自动释放

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:22:17.343

如果你像这样实例化二维数组`new int[10][20]`将`delete[]`破坏所有数组，但如果你创建它迭代像`myarray[i] = new int[20]`这样你将不得不再次迭代以破坏每个维度。

如果您不确定如何销毁数组，我建议您使用 STL 向量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:33:04.843

基本上`1 new = 1 delete`and `10 new = 10 delete`，所以你必须删除你分配的所有东西，调用的那些操作的数量应该是相等的。

没有办法知道（从编译器/程序的角度来看）什么是真正的数据指针，什么只是一些垃圾或在其他地方引用了什么（并将被使用）等等。

# typescript - 具有构造签名而不是类型检查的接口

> ID：12952248
> 
> 赞同：10
> 
> 时间：2012-10-18T10:12:52.850
> 
> 标签：typescript

我一直在使用 TypeScript 中带有构造签名的接口，当以下类型检查失败时，我变得有点困惑：

```
class Foo {
    constructor () {
    }
}

interface Bar {
    new(): Bar;
}

function Baz(C : Bar) {
    return new C()
}

var o = Baz(Foo); 
```

类型错误是：

> 提供的参数与调用目标的任何签名都不匹配：“new() => Foo”和“Bar”类型的构造签名不兼容：“Bar”类型需要构造签名，但“Foo”类型缺少构造签名（C：Bar ) => 酒吧

Foo 的构造函数的类型是 () => Foo，这就是我认为 Bar 所说的。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:18:14.557

这是您的代码的更新版本，有细微的变化。

`Bar`我们用我们期望出现的任何函数和变量来定义接口。

接下来，我们`Bar`用接口扩展`NewableBar`接口。这只是定义了一个返回 a 的构造函数`Bar`。

因为`Foo`实现`Bar`并具有构造函数并且`Baz`需要 a `NewableBar`，所以检查所有内容。

这比`any`- 更详细一点，但可以为您提供所需的检查。

```
interface Bar {

}

interface NewableBar extends Bar {
    new();
}

class Foo implements Bar {
    constructor () {

    }
}

function Baz(C : NewableBar) {
    return new C()
}

var o = Baz(Foo); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:26:48.033

问题（至少从 TypeScript 编译器的角度来看）是`Bar`'`new`方法的签名。如果将 的定义替换为`Bar`以下内容，

```
interface Bar {
  new (): any;
} 
```

有用。您不妨使用`new (): Foo`，就像`Bar`返回值不起作用一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T04:26:18.880

我知道这是一个老问题，但我今天需要类似的东西并且遇到了帖子。经过反复试验，我想出了以下解决方案：

```
interface Bar { 
    sayHello(name: string);
}

class Foo implements Bar {
    sayHello(name: string) {
        window.alert("Hello " + name);
    }
}

function Baz(c: new() => Bar) {
    return new C();
}

var o = Baz(Foo);
o.sayHello("Bob"); 
```

基本上接口只能定义对象实例的契约，因此必须在将调用构造函数的函数上完成要求存在某个构造函数的操作。此方法也可以很好地与泛型配合使用：

```
function Baz<T extends Bar>(c: new() => T) {
    return new c();
}

var o = Baz(Foo); 
```

在上面的示例中，变量“o”将被推断为 Foo 类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T14:51:11.320

我想我知道你在做什么，我认为你需要一种微妙不同的方法。

这个例子说明了以下内容：

*   Baz**必须**传递一个新的项目。
*   Baz**将**返回一个 Bar
*   不是所有的 Bar 都需要是新的，只有那些被传递给 Baz

这是示例：

```
interface Bar {
    sayHello(name: string): void;
}

interface Newable {
    new();
}

class Foo implements Bar {
    constructor () {

    }

    sayHello(name: string) {
        window.alert('Hello ' + name);
    }
}

function Baz(C : Newable) {
    return <Bar> new C()
}

var o = Baz(Foo);
o.sayHello('Bob'); 
```

这种方法的唯一危险是您可能会将不是 Bar 的新事物传递给 Baz 函数。当您通过从参数创建对象来使用动态功能时，这在很大程度上是不可避免的，除非您愿意传入预初始化的对象，在这种情况下，Baz 会很乐意接受 Bar 而不是 newable。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-02T20:04:13.073

真的有一个简单的答案。看看你的`Bar`界面：

```
interface Bar {
    new(): Bar;
} 
```

假设您已经设法创建了一些`Magic`实现此接口的类。

```
class Magic implements Bar {
    // ...
} 
```

这意味着任何实例都`Magic`必须遵守`Bar`. 所以假设你有一个`Magic`被调用的实例`magic`。

由于`magic`遵守 的规范`Bar`，`magic`必须是可更新的，这意味着以下必须工作：

```
const foo = new magic() // lowercase m! 
```

此外，该调用的结果，即`foo`本身必须遵守`Bar`。这意味着以下内容也必须有效：

```
const zzz = new foo(); 
```

然后很明显，以下内容也必须有效：

```
new (new (new (new (new (new (new (new Magic()))))))) 
```

很明显，您的代码不满足此条件。因此，您的代码不会进行类型检查。

# php - 在 PHP 解析同一页面上的 XML 文件之前加载 HTML 元素

> ID：12952250
> 
> 赞同：-1
> 
> 时间：2012-10-18T10:12:58.077
> 
> 标签：php, javascript, jquery, html

我正在开发一个向人们推荐视频的网站。推荐系统存在于我轮询并接收一个 xml 文件作为回报的服务器上。

问题是这个推荐系统仍在开发中，可能需要 5 秒以上才能收到响应。所以我需要在页面上开发一个加载.gif，它将作为一个占位符，直到生成 xml 文件。

问题是我使用 PHP 解析 xml 文件，所以当我尝试加载页面时，它只是保持白色，直到 xml 被解析。如何让它首先加载页面的所有 html 元素，然后仅在它们完全加载时才推荐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:31:25.590

您需要通过 AJAX 加载推荐，例如：

```
$(document).ready(function() {
  $.ajax({
    url: 'YOUR_PHP_PARSER_FILE',
    success: function(data) {
      $('#recomendations-wrapper').html(data);
    }
  });  
}); 
```

如果您愿意，可以在 PHP 文件中以 JSON 或 XML 格式返回信息。

# spring - 在 JBoss Spring JSF Web 应用程序中配置 https

> ID：12952251
> 
> 赞同：1
> 
> 时间：2012-10-18T10:13:02.277
> 
> 标签：spring, jsf, ssl, https, jboss6.x

我已经在 Spring JSF Web 应用程序中使用 JBoss6 配置了 https，并且它适用于整个站点，但我只需要为特定文件夹和文件获取 https。在我的 web.xml 中，我以这种方式配置了它

文件夹特定代码块，但在访问页面后有效

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>secured folder</web-resource-name>
        <url-pattern>/myfolder/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

如果我仅在没有文件夹特定代码块的情况下放置以下代码并且它为整个站点启用 https，则以下代码有效。

```
<security-constraint>
     <web-resource-collection>
        <web-resource-name>Protected Area, so redirect to HTTPS</web-resource-name>
            <url-pattern>/*</url-pattern>
       </web-resource-collection>
       <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
</security-constraint> 
```

为了实现这一目标，我还缺少其他什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:35:19.820

我过去所做的是在 JBoss 前面放置一个 Apache Web 服务器，然后在上面安装和配置 SSL。然后，您可以轻松配置多个 URL 和上下文路径以转发到不同的内容。在生产环境中使用这种方法有很多优点。

1.  轻松使用轻量级和简单的 Apache 配置来建立公共上下文路径。

2.  反向代理 - 您可以使用 mod_jk Apache 插件以这种方式轻松设置反向代理。端口 80 和 443 将只对您的 Web 服务器开放，这意味着您的 JBoss 服务器可以完全位于防火墙后面，并且无法从外部访问。只有 Web 服务器可以与您选择的 AJP 端口上的应用程序服务器通信。

3.  提供静态内容 - 另一个额外的好处是，您可以将所有静态 Web 内容（例如图像、样式表、javascript、Flash 对象等）放在 Apache 可以提供的上下文中，同时转发JBoss 上所有动态 JSF 或 JSP 内容的不同上下文路径。这有助于减少应用服务器上的冗余负载。

4.  负载平衡 - 使用 mod_jk 甚至 mod_proxy Apache 插件，您可以将 Apache 配置为 JBoss 集群的负载平衡器。它将能够评估各个 JBoss 节点的健康状况，并智能地决定在哪个应用服务器上转发动态内容请求。

所有这些与 JBoss 上的 HTTPS 和 HTTP 请求有什么关系？显然很难正确地做到这一点，我从很多人那里听说过。这样做将允许您轻松设置一个 URL 和上下文路径以仅提供 HTTPS 动态内容，而另一个提供 HTTP 静态 Web 内容。以下博客文章是一个很好的入门教程。

[http://technicalmumbojumbo.wordpress.com/2009/04/21/configuring-http-and-https-on-jboss-server/](http://technicalmumbojumbo.wordpress.com/2009/04/21/configuring-http-and-https-on-jboss-server/)

# c# - 在另一个 silverlight 项目中调用方法时无法加载文件或程序集异常

> ID：12952255
> 
> 赞同：1
> 
> 时间：2012-10-18T10:13:12.317
> 
> 标签：c#, silverlight, silverlight-4.0

我有 silverlight 4 应用程序项目和 silverlight 4 库项目。在库项目中，我有依赖于 3rd 方程序集的类和方法，所以我引用它（添加引用-> 浏览）。但是，当我从 silverlight 应用程序调用此方法时，出现以下错误：

> System.IO.FileNotFoundException：无法加载文件或程序集“blabla”或其依赖项之一。该系统找不到指定的文件。

当我还将对 3rd 方库的引用添加到 silverlight 应用程序时，一切正常。所以我现在在两个项目中都提到了那个 3d 派对，即使我没有直接在其中一个项目中使用它。这在silverlight中是正常的还是我做错了什么？是否有任何合乎逻辑的解释为什么我需要添加对这两个项目的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:19:32.677

尝试以下操作：

在 Silverlight 应用程序中添加对第 3 方程序集的引用并将 Copy Local 属性设置为 true。

在 Silverlight 库项目中添加对第 3 方程序集的引用并将 Copy Local 属性设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T15:19:09.377

似乎问题出现是因为它无法正确访问 dll。
我通过将 dll 复制本地属性从 false 更改为 true 来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:19:15.543

Go to the properties of your project. In the application tab, set the Target Framework to .Net Framework x instead of .Net Framework x Client Profile

# macos - 如何在 NSTextField 中添加 Cocoa 控件？

> ID：12952257
> 
> 赞同：0
> 
> 时间：2012-10-18T10:13:21.713
> 
> 标签：macos, cocoa

在 OS X 系统偏好设置中，有一个窗格：

![系统偏好设置面板](../Images/8cf9e6428c8455d52a279bab29288306.png)

蓝色标签是可拖动的，甚至可以通过鼠标点击来显示菜单。

这些标签的性质是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:21:26.900

您正在寻找：

[NSTokenField](http://developer.apple.com/library/mac/#documentation/cocoa/reference/ApplicationKit/Classes/NSTokenField_Class/Reference/Reference.html)

[令牌字段编程指南](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/TokenField_Guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006555)

# c++ - 范围内的静态变量是否在线程之间共享？

> ID：12952261
> 
> 赞同：4
> 
> 时间：2012-10-18T10:13:28.637
> 
> 标签：c++, multithreading

例如，以下代码可以为其中一个线程打印“3”吗？

```
int foo()
{
   static int a = 1;
   return ++a;
}

void thread1()
{
   cout<<foo()<<endl;
}

void thread2()
{
   cout<<foo()<<endl;
} 
```

编辑：它是 C++ 98

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T10:18:29.340

当然它可以打印 3。这样做甚至是这段代码的“通常语义”。线程 1 用 1 初始化它并增加它，所以它是 2。线程 2 再次增加它，所以它是 3。

所以，是的，作用域静态变量是**静态**的，即全局变量。它们由线程共享。

当然，代码有一个竞争条件，所以结果可能是任何东西，但 3 是可能的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:16:30.010

局部静态变量在线程之间共享。

函数局部静态变量的初始化在 C++11 中是线程安全的（在此之前，线程甚至不存在；））。

另一方面，函数局部静态变量的修改不是线程安全的，因此您修改的代码具有未定义的行为（由于竞争条件）。

# c++ - 多线程环境中的信号处理函数

> ID：12952262
> 
> 赞同：15
> 
> 时间：2012-10-18T10:13:28.540
> 
> 标签：c++, c, multithreading, signal-handling

在我的多线程 GUI 应用程序中，我有以下信号处理代码。我想改进此代码，使其正确且线程安全，但在信号处理中有些事情我并不完全理解：

*   信号是在进程或线程级别处理的（我可以有线程特定的信号处理程序）吗？
*   signal_handler 函数在哪个线程上下文中执行？
*   是否可以在短时间内发送许多 SIGTERM 信号？
*   使用互斥锁来防止 signal_handler 的并行执行是否有意义？

* * *

```
void signal_handler(int sig)
{
        switch (sig)
        {
        case SIGTERM:
            ::wxLogMessage(wxT("SIGTERM signal received ..."));
            break;
        case SIGINT:
            ::wxLogMessage(wxT("SIGINT signal received ..."));
            break;
        case SIGUSR1:
            ::wxLogMessage(wxT("SIGUSR1 signal received ..."));
            break;
        default:
            ::wxLogMessage(wxT("Unknown signal received ..."));
        }

        // send wxCloseEvent to main application window
        ::wxGetApp().GetTopWindow()->Close(true);
} 
```

我在我的 init 函数中注册了信号处理程序：

```
// register signal handlers
signal(SIGTERM, signal_handler);
signal(SIGINT,  signal_handler);
signal(SIGUSR1, signal_handler); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T11:02:03.830

*   信号处理程序是每个进程的状态——也就是说，一个进程中的所有线程共享同一组已安装的信号处理程序函数。
*   信号掩码是每个线程的状态。信号可以在每个线程的基础上被阻塞或解除阻塞。
*   信号可以是进程导向的或线程导向的。如果信号是进程导向的，则选择当前没有阻塞信号类型的任意线程来处理它。

在多线程应用程序中处理信号的一种简单方法是创建一个线程作为专用的信号处理线程。所有感兴趣的信号在每个线程中都被阻塞；没有建立信号处理程序；并且信号处理线程`sigwaitinfo()`在循环中调用，在收到信号时对其进行处理。

这意味着您无需担心要调用的函数是否是*异步信号安全的*，因为信号不在信号处理程序中处理 - 它们由您的专用信号处理线程同步处理，它可以调用它喜欢的任何函数（例如，它可以使用普通的 pthreads 同步函数来唤醒另一个线程）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-18T10:18:34.530

要非常小心：正如[signal(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)页面所说，只有很少的函数（*“异步信号安全”*函数，请参阅[signal-safety(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal-safety.7.html)了解更多信息）可以（直接或间接）在信号处理程序内部调用. 可能不应该在信号处理程序中调用 Mutex 相关函数。另请参见[pthreads(7)](http://man7.org/linux/man-pages/man7/pthreads.7.html)

您可以考虑在信号处理程序中设置一个[volatile sigatomic_t](https://stackoverflow.com/questions/8488791/proper-usage-of-volatile-sig-atomic-t)变量，并不时测试该标志的值。如果你有 C++11（或 C11）原子，例如 C++11 [std::atomic](http://en.cppreference.com/w/cpp/atomic)或 C11 [`<stdatomic.h>`](http://en.cppreference.com/w/c/atomic)，你可以使该`volatile`变量在这个意义上也是原子的。然后使用原子加载工具对其进行测试。

Qt 文档建议了[以下技巧](http://doc.qt.io/qt-5/unix-signals.html)：在启动时创建一个[管道（2）](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html)到 self，然后让你的信号处理程序[write(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)（`write`系统调用被指定为异步信号安全）单个（或更多）字节 [s ] 到同一进程的管道，并让您的 GUI 事件循环[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)该管道的读取端。

使用Qt 处理信号*的特定于 Linux 的*方法可能是将[signalfd(2)](http://man7.org/linux/man-pages/man2/signalfd.2.html)可能与[QSocketNotifier](http://doc.qt.io/qt-5/qsocketnotifier.html)一起使用（尽管名称如此，但它适用于可轮询的文件描述符，而*不仅仅是*套接字）。使用其他 GUI 工具包，您可能还可以添加要轮询的文件描述符（来自`signalfd`或的那个）。`pipe`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-18T10:25:59.010

这个答案是指 POSIX 线程 ( `pthreads`)。

参考1：

可以在线程级别处理信号，是的。如果一个进程的多个线程处理一个信号并且该信号被发送到该进程，但是到一个特定线程，则无法确定哪个线程的处理程序将处理该信号。（详见`man pthread_kill()`）

参考2：

信号处理程序将在设置它的线程的上下文中执行。这包括主线程。

参考3：

如果不止一个相同类型的信号被发送到同一个进程，它们可能会在离开信号队列之前被压缩成一个信号。这是否可以区分为我不确定的线程级别，我不得不承认。

参考4：

如果游戏中涉及共享资源：是的，至少对于同时访问这些资源的处理程序代码的部分。此外，这还取决于您尝试实现的逻辑。

# android - 将自定义适配器设置为网格视图

> ID：12952265
> 
> 赞同：1
> 
> 时间：2012-10-18T10:13:43.267
> 
> 标签：android

在我的主要活动中，我有一个包含三个类别（全部、水平和垂直）的微调器，在其下方有一个 gridView。我在资源文件夹中有一些用于垂直和水平模式的图像。我需要根据微调器上的选定项目将图像设置为 gridView。我可以将一个类别设置为 gridView（例如所有类别）。选择其他类别时，gridView 没有更新。为了更新 gridView 我应该怎么做？请帮帮我？

我尝试通过在我的活动中放置三个 gridView 并将它们的可见性设置为消失，并在设置适配器时使其可见（我使用了三个单独的适配器但不工作。

我的代码如下。

```
 public class MainActivity extends Activity {
    Spinner vsel;
    ArrayList<String> vimage = new ArrayList<String>();
    ArrayList<String> all = new ArrayList<String>();
    ArrayList<String> himage = new ArrayList<String>();
    ArrayList<Integer> allid = new ArrayList<Integer>();   
    ArrayList<Integer> hid = new ArrayList<Integer>();
    ArrayList<Integer> vid = new ArrayList<Integer>();  
    ArrayList<Integer> tot = new ArrayList<Integer>();  
    ArrayList<String> spinner = new ArrayList<String>();
    GridView gv,sgv,gv1,gv2;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        gv = (GridView) findViewById(R.id.gridView1);
        gv1 = (GridView) findViewById(R.id.gridView2);
        gv2 = (GridView) findViewById(R.id.gridView3);
        Class resources = R.drawable.class;
        java.lang.reflect.Field[] fields = resources.getFields();
         for(java.lang.reflect.Field field : fields)
        {
             try {
                    if(field.getName().contains("split"))
                    {
                        all.add(field.getName());
                        allid.add(field.getInt(fields));
                    }
                    if(field.getName().contains("splith"))
                        {
                            //String iname = field.getName();
                            himage.add(field.getName());
                            hid.add(field.getInt(fields));
                        }
                    if(field.getName().contains("splitv"))
                        {
                            vimage.add(field.getName());
                            vid.add(field.getInt(fields));
                        }
                        /*else
                        {
                            all.add(field.getName());
                            allid.add(field.getInt(fields));
                        }*/
                    }
                 catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                }
        }
         System.out.println("All arraylist-> " + allid);
         System.out.println("Horizontal arraylist-> " + hid);
         System.out.println("Vertical arraylist-> " + vid);
      //  String[] viewsel = {"All","Vertical","Horizontal"};
         spinner.add("All");
         spinner.add("Vertical");
         spinner.add("Horizontal");
        vsel = (Spinner) findViewById(R.id.spinner1); 
        ArrayAdapter<String> sadpater = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,spinner);
        sadpater.setDropDownViewResource(android.R.layout.simple_spinner_item);
        vsel.setAdapter(sadpater);
        vsel.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                // TODO Auto-generated method stub
                //String item = parent.getItemAtPosition(position).toString();
                String item = parent.getSelectedItem().toString();

                if(item.equals("All"))
                {
                    gv2.setVisibility(View.INVISIBLE);
                    gv1.setVisibility(View.INVISIBLE);

                    Toast.makeText(MainActivity.this,item,Toast.LENGTH_SHORT).show();

                    gv.setVisibility(View.VISIBLE);
                     gv.setAdapter(new AppsAdapter(MainActivity.this,allid));
                }
                if(item.equals("Vertical"))
                {
                    gv.setVisibility(View.INVISIBLE);
                    gv2.setVisibility(View.INVISIBLE);

                    gv1.setVisibility(View.VISIBLE);
                    Toast.makeText(MainActivity.this,item,Toast.LENGTH_SHORT).show();

                     gv1.setAdapter(new AppsAdapter1(MainActivity.this,vid));
                }
                 if(item.equals("Horizontal"));
                {
                    gv.setVisibility(View.INVISIBLE);
                    gv1.setVisibility(View.INVISIBLE);

                    Toast.makeText(MainActivity.this,item,Toast.LENGTH_SHORT).show();

                    gv2.setVisibility(View.VISIBLE);
                     gv2.setAdapter(new AppsAdapter3(MainActivity.this,hid));
                }
            }

            public void onNothingSelected(AdapterView<?> view) {
                // TODO Auto-generated method stub

            }
        });
    }

    public class AppsAdapter extends BaseAdapter {
        private Context context;
        ArrayList<Integer> dirsTemp = new ArrayList<Integer>();
        public AppsAdapter(Context c,ArrayList<Integer> allid)
        {

            Log.d("In appsadapter1 all","Hii");
            dirsTemp = allid;

            context = c;

        }

        //---returns the number of images---

        public final int getCount() {

            return dirsTemp.size();

        }

         //---returns the ID of an item--- 

        public final Object getItem(int position) {
            return dirsTemp.get(position);
        }

        public final long getItemId(int position) {

            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            //final File f = (File) getItem(position);
            int i = (Integer) getItem(position);
            System.out.println("Dirstemp->"+dirsTemp);
            ImageView iv;
            if (convertView == null) 
            {
                    iv = new ImageView(context);
                    //iv.setPadding(5, 5, 5, 5);
            }

            else
            {
                    iv = (ImageView) convertView;
            }
            iv.setImageResource(dirsTemp.get(position));

            return iv;          
        }   
    }

    public class AppsAdapter1 extends BaseAdapter {
        private Context context1;
        ArrayList<Integer> dirsTemp1 = new ArrayList<Integer>();
        public AppsAdapter1(Context c,ArrayList<Integer>vid) {
            Log.d("In appsadapter1 vertical","Hii");
            dirsTemp1 = vid;

            context1 = c;

        }

        //---returns the number of images---

        public final int getCount() {

            return dirsTemp1.size();

        }

         //---returns the ID of an item--- 

        public final Object getItem(int position) {
            return dirsTemp1.get(position);
        }

        public final long getItemId(int position) {

            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            //final File f = (File) getItem(position);
            int i = (Integer) getItem(position);
            ImageView iv1;
            if (convertView == null) 
            {
                    iv1 = new ImageView(context1);
                    //iv.setPadding(5, 5, 5, 5);
            }

            else
            {
                    iv1 = (ImageView) convertView;
            }
            iv1.setImageResource(dirsTemp1.get(position));

            return iv1;         
        }   
    }  

    public class AppsAdapter3 extends BaseAdapter {
        private Context context2;
        ArrayList<Integer> dirsTemp2 = new ArrayList<Integer>();
        public AppsAdapter3(Context c,ArrayList<Integer>hid) {
            Log.d("In appsadapter1 horizontal","Hii");
            dirsTemp2 = hid;
            context2 = c;

        }

        //---returns the number of images---

        public final int getCount() {

            return dirsTemp2.size();

        }

         //---returns the ID of an item--- 

        public final Object getItem(int position) {
            return dirsTemp2.get(position);
        }

        public final long getItemId(int position) {

            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            //final File f = (File) getItem(position);
            int i = (Integer) getItem(position);
            ImageView iv2;
            if (convertView == null) 
            {
                    iv2 = new ImageView(context2);
                    //iv.setPadding(5, 5, 5, 5);
            }

            else
            {
                    iv2 = (ImageView) convertView;
            }
            iv2.setImageResource(dirsTemp2.get(position));

            return iv2;         
        }   
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:53:48.647

您不需要三个 gridViews 和三个适配器。一个就够了。从 spinner 更改类别时，刷新列表`allid, vid, hid`（在 Adapter 中用于显示 gridview），然后`notifyDataSetChanged()`在适配器上。

编辑：试试这个：

```
import java.util.ArrayList;

import org.apache.commons.logging.Log;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Spinner;
import android.widget.Toast;

    public class ddsds extends Activity {
   Spinner vsel;
   ArrayList<String> vimage = new ArrayList<String>();
   ArrayList<String> all = new ArrayList<String>();
   ArrayList<String> himage = new ArrayList<String>();
   ArrayList<Integer> allid = new ArrayList<Integer>();   
   ArrayList<Integer> hid = new ArrayList<Integer>();
   ArrayList<Integer> vid = new ArrayList<Integer>();  
   ArrayList<Integer> tot = new ArrayList<Integer>();  
   ArrayList<String> spinner = new ArrayList<String>();
   GridView gv;

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       gv = (GridView) findViewById(R.id.gridView1);

       Class resources = R.drawable.class;
       java.lang.reflect.Field[] fields = resources.getFields();
        for(java.lang.reflect.Field field : fields)
       {
            try {
                   if(field.getName().contains("split"))
                   {
                       all.add(field.getName());
                       allid.add(field.getInt(fields));
                   }
                   if(field.getName().contains("splith"))
                       {
                           //String iname = field.getName();
                           himage.add(field.getName());
                           hid.add(field.getInt(fields));
                       }
                   if(field.getName().contains("splitv"))
                       {
                           vimage.add(field.getName());
                           vid.add(field.getInt(fields));
                       }
                       /*else
                       {
                           all.add(field.getName());
                           allid.add(field.getInt(fields));
                       }*/
                   }
                catch (IllegalArgumentException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
               } catch (IllegalAccessException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
               }
       }
        System.out.println("All arraylist-> " + allid);
        System.out.println("Horizontal arraylist-> " + hid);
        System.out.println("Vertical arraylist-> " + vid);
     //  String[] viewsel = {"All","Vertical","Horizontal"};
        spinner.add("All");
        spinner.add("Vertical");
        spinner.add("Horizontal");
       vsel = (Spinner) findViewById(R.id.spinner1); 
       ArrayAdapter<String> sadpater = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,spinner);
       sadpater.setDropDownViewResource(android.R.layout.simple_spinner_item);
       vsel.setAdapter(sadpater);
       ArrayList<String> list ; 
       AppsAdapter adapter = null; 

       vsel.setOnItemSelectedListener(new OnItemSelectedListener() {

           public void onItemSelected(AdapterView<?> parent, View view,
                   int position, long id) {
               // TODO Auto-generated method stub
               //String item = parent.getItemAtPosition(position).toString();
               String item = parent.getSelectedItem().toString();

               if(item.equals("All"))
               {
                   list = allid;
               }
               if(item.equals("Vertical"))
               {
                   list = vid;
               }
                if(item.equals("Horizontal"));
               {
                   list = hid));
               }

               if (adapter = null ) {
                   adapter = new AppsAdapter(MainActivity.this, list);
                   gv.setAdapter(adapter);
               }
               adapter.notifyDataSetChanged();
           }

           public void onNothingSelected(AdapterView<?> view) {
               // TODO Auto-generated method stub

           }
       });
   }

   public class AppsAdapter extends BaseAdapter {
       private Context context;
       ArrayList<Integer> dirsTemp = new ArrayList<Integer>();
       public AppsAdapter(Context c,ArrayList<Integer> allid)
       {

           Log.d("In appsadapter1 all","Hii");
           dirsTemp = allid;

           context = c;

       }

       //---returns the number of images---

       public final int getCount() {

           return dirsTemp.size();

       }

        //---returns the ID of an item--- 

       public final Object getItem(int position) {
           return dirsTemp.get(position);
       }

       public final long getItemId(int position) {

           return position;
       }

       public View getView(int position, View convertView, ViewGroup parent) {
           // TODO Auto-generated method stub
           //final File f = (File) getItem(position);
           int i = (Integer) getItem(position);
           System.out.println("Dirstemp->"+dirsTemp);
           ImageView iv;
           if (convertView == null) 
           {
                   iv = new ImageView(context);
                   //iv.setPadding(5, 5, 5, 5);
           }

           else
           {
                   iv = (ImageView) convertView;
           }
           iv.setImageResource(dirsTemp.get(position));

           return iv;          
       }   
   }

}

} 
```

# c++ - 使用延迟加载加载正确的库 - 返回值类型错误

> ID：12952267
> 
> 赞同：1
> 
> 时间：2012-10-18T10:13:45.253
> 
> 标签：c++, winapi, compiler-errors, return-value, delay-load

我在这里使用了 msdn 文档：http: [//msdn.microsoft.com/en-us/library/f0fkfy9y (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/f0fkfy9y(v=vs.100).aspx)

它在那里指定：

```
case dliNotePreLoadLibrary :
//If you want to return control to the helper, return 0.
//Otherwise, return your own HMODULE to be used by the 
//instead of having it call LoadLibrary itself 
```

所以我尝试了以下方法：

```
FARPROC WINAPI delayHook(unsigned dliNotify, PDelayLoadInfo pdli)
{
    switch (dliNotify) {
        case dliStartProcessing :
        case dliNotePreGetProcAddress :
        case dliFailLoadLib :
        case dliFailGetProc :
        case dliNoteEndProcessing : 
          return 0;
          break;
        case dliNotePreLoadLibrary :
            {
                char* dllPath = getDllPath();
                HMODULE lib = LoadLibrary(dllPath);
                return lib;
            }
            break;      
        default :
            return NULL;
    }
    return NULL;
} 
```

返回 HMODULE 时出现错误：

> 'return' : 无法从 'HMODULE' 转换为 'FARPROC'。

问题是什么？我在做一些破旧的事吗？他们确实说返回你自己的 HMODULE，这就是我所做的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:28:28.357

`LoadLibrary()`返回一个`HMODULE`. 您的`delayHook()`函数返回一个`FARPROC`. 所以返回值不匹配。假设您真的想返回`HMODULE`返回的`LoadLibrary()`，您可能需要使用如下类型的转换`reinterpret_cast`：

```
case dliNotePreLoadLibrary :
{
    char* dllPath = getDllPath();
    HMODULE lib = LoadLibrary(dllPath);
    return reinterpret_cast<FARPROC>(lib);
} 
```

旁注：在当今世界，您应该使用 Unicode 而不是 ANSI/MBCS，因此您`dllPath`最好是 Unicode 字符串（例如`const wchar_t*`，或`CString`，或`std::wstring`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:27:47.183

所以你应该简单地将它转换为`FARPROC`：

```
return (FARPROC)lib; 
```

# ruby-on-rails - 我们如何在记录器生成的输出日志文件中设置字体和颜色？

> ID：12952270
> 
> 赞同：3
> 
> 时间：2012-10-18T10:13:52.503
> 
> 标签：ruby-on-rails, ruby

我们如何在记录器生成的输出日志文件中设置字体和颜色？

我在做

```
require 'logger'
logobj = Logger.new(file)
logobj.info "Its log file." 
```

我想要其他字体和颜色的文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:24:15.920

为了在 bash 提示符中添加颜色，您必须编写非打印转义序列。

我建议您阅读[ANSI Escape Sequences: Colors and Cursor Movement](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html)。

一个简单的例子可能是：

```
require 'logger'
logobj = Logger.new('a_file')
logobj.info "\033[31mThis text is red."
logobj.info "\033[32mThis text is green."

# And in your bash, you'll show colors by doing:
cat a_file 
```

**编辑**

您也可以使用[有色 gem](https://github.com/defunkt/colored)，其工作原理如下：

```
logobj.info "Its log file.".red 
```

# javascript - 注释写入文件代码时，Add-On Builder 中的构建失败

> ID：12952271
> 
> 赞同：1
> 
> 时间：2012-10-18T10:13:59.467
> 
> 标签：javascript, firefox-addon

我尝试构建我的插件，但是当我从这个页面注释代码 [写入文件示例](https://developer.mozilla.org/en-US/docs/Code_snippets/File_I_O#Writing_to_a_file)时 ，我得到了`XPI not built`.

这是我评论过的代码：

```
/*
function saveFile(file, data)
{
    Cu.import("resource://gre/modules/NetUtil.jsm");
    Cu.import("resource://gre/modules/FileUtils.jsm");

    var ostream = FileUtils.openSafeFileOutputStream(file)

    var converter = Cc["@mozilla.org/intl/scriptableunicodeconverter"].createInstance(Ci.nsIScriptableUnicodeConverter);
    converter.charset = "UTF-8";
    var istream = converter.convertToInputStream(data);

    // The last argument (the callback) is optional.
    NetUtil.asyncCopy(istream, ostream, function(status) {
        if (!Components.isSuccessCode(status)) {
        // Handle error!
        return;
    }

    // Data has been written to the file.
    });    
}
*/ 
```

如果我删除此代码（或整个注释块）构建将成功。

这是此插件的链接：[插件](https://builder.addons.mozilla.org/package/157767/revision/53/)

有什么问题？谢谢你。

编辑：我有 Firefox 15.0.1。更新到 16.0.1 没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:18:18.780

问题是通过关键字`Components`。我已经解决了这个问题，用 替换了这个词`C`，但是我添加了 C 作为所需的 chrome：

```
var {Cc, Ci, Cu, C} = require("chrome"); 
```

现在我可以编译插件并执行注释函数。

# javascript - 如果元素具有绑定，我可以在 Jquery 中检测到吗？

> ID：12952277
> 
> 赞同：3
> 
> 时间：2012-10-18T10:14:16.107
> 
> 标签：javascript, jquery, binding, detect

> **可能重复：**
> [测试事件处理程序是否绑定到 jQuery 中的元素](https://stackoverflow.com/questions/1236067/test-if-event-handler-is-bound-to-an-element-in-jquery)

我有一个带有相当大脚本的按钮。我像这样绑定到这个按钮：

```
 $(document).on( "click", '.basketSubmitter' , function(e) {

 ... stuff

 }); 
```

我无法确定它，但有时按钮会失去它的绑定 = 我点击所有我想要的东西，但没有任何反应。位于左右两侧的按钮仍然可以正常工作，因此必须在某处按钮未绑定的东西。脚本很大，所以

**问题：**
是否有一种简单的方法来列出元素绑定或检测元素何时在 Jquery 中失去绑定？

感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:18:34.207

此工具将帮助您找出绑定到任何 DOM 元素的事件

[http://www.sprymedia.co.uk/article/Visual+Event+2](http://www.sprymedia.co.uk/article/Visual+Event+2)

如果您想检查 dom 以查找绑定事件，那很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:19:17.373

Try namespacing your event. For eg click.myFunc

That can be used as

```
$('.basketSubmitter').off('click.myFunc')on( "click.myFunc" , function(e) {

 ... stuff

 }); 
```

# java - http 500 错误 Google App Engine

> ID：12952287
> 
> 赞同：0
> 
> 时间：2012-10-18T10:14:49.343
> 
> 标签：java, google-app-engine

我的程序正在发送邀请消息。

如果选择标签，将调用 XmppDServlet。

这是一个非常简单的程序，但我在调用 XmppDServlet 时得到了 http 500。

我应该怎么做？

错误：服务器错误

服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

公共类 XmppDServlet 扩展 HttpServlet {

```
public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException{
    //sendInvite(req,resp);

}
private void sendInvite(HttpServletRequest req, HttpServletResponse resp)
          throws IOException {
        XMPPService xmpp = XMPPServiceFactory.getXMPPService();

        try {
            //System.out.println(invitee);
          xmpp.sendInvitation(new JID("myaccount@gmail.com"));
          resp.getWriter().print("Chat invite sent to: ");
        } catch (Exception exception) {
          resp.getWriter().print("Unable to send chat invite to " );
        }
      } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:53:38.223

请访问您的应用程序的 AppEngine 管理控制台。您将`Logs`在左侧的主要部分下看到一个链接。单击它并查看服务器日志。这应该为您提供有关导致 500 错误的原因的更多信息。

# c# - 如果 DirectoryInfo 包含目录

> ID：12952289
> 
> 赞同：1
> 
> 时间：2012-10-18T10:15:04.240
> 
> 标签：c#, contains, directoryinfo

我正在测试以查看 a 是否`DirectoryInfo[]`包含我的代码在下面的目录

```
DirectoryInfo[] test = dir.GetDirectories();
if(test.Contains(new DirectoryInfo(dir.FullName +"\\"+ "Test_Folder")))
{
    ContainsTestFolder = true;
} 
```

对我来说，这应该有效，但它似乎并没有在应该的时候返回 true。关于我做错了什么的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:18:25.200

您试图比较所有属性不相等的两个复杂对象，更喜欢只比较它们的`FullName`属性。

更喜欢使用谓词使用`FirstOrDefault`并比较目录的全名

`FirstOrDefault`如果找到则返回一个对象，`null`如果没有找到

```
DirectoryInfo[] test = dir.GetDirectories();
if (test.FirstOrDefault(x => x.FullName.Equals(Path.Combine(dir.FullName,"Test_Folder"))) != null)
{
   ContainsTestFolder = true;
} 
```

您还可以使用`Any`返回 a 的谓词`bool`。

```
DirectoryInfo[] test = dir.GetDirectories();
if (test.Any(x => x.FullName.Equals(Path.Combine(dir.FullName,"Test_Folder"))))
{
    ContainsTestFolder = true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:19:39.850

使用[Enumerable.Any](http://msdn.microsoft.com/en-us/library/bb337697.aspx)

```
DirectoryInfo[] test = dir.GetDirectories();
if (test.Any(r => r.FullName.Equals(Path.Combine(dir.FullName,"Test_Folder"))))
{
   ContainsTestFolder = true;
} 
```

您没有得到想要的结果的原因是，包含比较对象引用，而不是它的值。还可以考虑使用[Path.Combine](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)而不是连接路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T10:20:06.110

您无法以这种方式对其进行测试，因为您正在检查 2 个具有相同属性的不同对象是否相等。

尝试

```
DirectoryInfo[] test = dir.GetDirectories();
if (test.Any(x => x.FullName.Equals(dir.FullName +"\\"+ "Test_Folder")))
{
   ContainsTestFolder = true;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-24T09:37:47.930

您还可以使用 .Contains 如下：

```
var path = Directory.GetCurrentDirectory();
var ctf = Directory.GetDirectories(path).Contains(Path.Combine(path, "Test_Folder")); 
```

这也完全避免了对 DirectoryInfo 的需要

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-09T02:53:27.710

检查您的目录状态（如果它包含任何子目录）

```
if(test.length >0) { // Do you coding here }enter code here 
```

# android - 没有在 ListView 上获得输出

> ID：12952290
> 
> 赞同：1
> 
> 时间：2012-10-18T10:15:06.473
> 
> 标签：android

我正在尝试获取数据库列表。它正在创建数据库，但我认为我在检索数据时遇到了问题。请帮我。主要活动。在模拟器中显示应用程序意外停止

MainActivity.java

公共类 MainActivity 扩展 ListActivity {

```
private DbAdapter Database;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ListView listContent = (ListView) findViewById(R.id.list);

    Database= new DbAdapter(this);
    Database.open();

    Cursor c = Database.GetUnits();
    startManagingCursor(c);

    String[] from = new String[]{Database.UNITS};
    int[] to = new int[]{R.id.list};

    SimpleCursorAdapter notes = new SimpleCursorAdapter(this,R.layout.activity_main,c,from,to);
    setListAdapter(notes);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

` DbAdapter.java

公共类 DbAdapter {

```
public static final String DATABASE_NAME="bible";
public static final String DATABASE_TABLE="test";
public static final int DATABASE_VERSION=1;
public static final String KEY_ID="_id";
public static final String UNITS="units";
public static final String CHAPTERS="chapters";

private static final String CREATE_DATABASE="create table test (_id integer primary key autoincrement, "
        +"units text not null, chapters text not null)";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

//constructor

public DbAdapter(Context c){
    context = c;
}

private static class SQLiteHelper extends SQLiteOpenHelper{

    public SQLiteHelper(Context context,String name,CursorFactory factory,int version){

        super(context,name,factory,version);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(CREATE_DATABASE);
        ContentValues insert = new ContentValues();
        insert.put(UNITS, "Unit1");
        insert.put(CHAPTERS, "CHAPTER1");
        db.insert(DATABASE_TABLE,null,insert);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

}

public DbAdapter open() throws SQLException{
    sqLiteHelper = new SQLiteHelper(context,DATABASE_NAME,null,DATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getWritableDatabase();
    return this;
}

public void close(){
    sqLiteHelper.close();
}

public Cursor GetUnits()
{
    Cursor mCursor=sqLiteDatabase.query(DATABASE_TABLE, new String[]{ UNITS}, null, null, null, null, null);
    if(mCursor!=null){
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

}

# c++ - C ++返回临时对象混乱

> ID：12952295
> 
> 赞同：13
> 
> 时间：2012-10-18T10:15:35.173
> 
> 标签：c++, temporary-objects

我有一个相当基本的 C++ 问题：考虑一个函数，它接受一些输入参数并`std::string`从这些参数创建一个，如下所示：

```
std::string constructString( int some_parameter ) {

    std::stringstream ss;

    // Construct a string (arbitrarily complex)
    ss << "Some parameter is " << some_parameter << " right now";

    return ss.str();    //Am I not returning a temporary object here?
} 
```

我知道`stringstream`当函数返回时对象将超出范围，但这不会使构造的字符串也无效吗？

如果我将返回类型更改为`const char *`并返回，会发生什么`ss.str().c_str()`？

上面的代码似乎可以工作，但我怀疑这只是因为包含“临时”对象的内存在我使用它时还没有被其他东西覆盖？

我不得不承认，一般来说，我在这种情况下很困惑。如果有人可以向我解释这整个“临时对象”的事情（或者只是指出我正确的方向），我将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T10:18:46.873

您正在返回一个临时对象，但是因为您按值返回它，所以创建了副本。如果您返回指向临时对象的指针或引用，那将是一个错误。

如果您将返回类型更改为`const char *`并返回`ss.str().c_str()`，您将返回指向临时`std::string`返回的某个缓冲区的指针`ss.str()`，这会很糟糕。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T10:21:07.883

如您所见[， Stringstream::str()](http://www.cplusplus.com/reference/iostream/stringstream/str/)返回`std::string`对象。您返回时`std::string`没有引用，这意味着如果没有 RVO(NRVO) 优化，复制构造函数将调用并创建有效`std::string`对象。使用优化`std::string`将在没有复制构造函数的情况下移动。但是如果将返回`std::string&`它会崩溃，因为这个对象将在函数返回后被销毁。效果相同，`const char *`因为销毁此指针后将指向坏内存，这是危险的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:26:21.193

假设：`T val = some_function()`，当您使用指定的复制构造函数或内置运算符从`some_function`C++ 复制值返回值时。`val`因此，如果您返回一个`int`或`std::string`根本没有问题，但是如果您返回一个指向将在函数结束时释放的内存的指针，哎呀！您的指针将指向无效的内存。例如考虑这个：

```
const char* some_function() {
    std::string res( ... );
    //...
    return res.c_str();
} 
```

您正在返回指向将在函数返回后立即释放的数据的指针（因为`res`将被销毁并且它将释放其内部数据），因此您将获得地址，但该地址并不指向您可能期望的！

# php - Symfony2：Twig：自定义位置的默认模板文件

> ID：12952309
> 
> 赞同：7
> 
> 时间：2012-10-18T10:16:09.043
> 
> 标签：php, symfony, twig

我尝试加载一个从 symfony 的默认位置移动到自定义位置的简单`base.html.twig`模板文件。`app/Resources/views/``theme/`

模板文件包含：

```
 <!DOCTYPE html>
    <html>
     <head>
     ...
     </head>
     <body>
      {% block body %}{% endblock %}
     </body>
    </html> 
```

`Acme\Core\CoreBundle\Controller`控制器使用控制器特定模板扩展上述模板文件

```
 {% extends '::base.html.twig' %}
    {% block body %}
      Hello world!
    {% endblock %} 
```

导致错误说`Unable to find template "::base.html.twig" in "AcmeCoreCoreBundle:Default:index.html.twig".`。

如何告诉 symfony 在全局空间中哪里可以找到模板文件？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-05-07T05:48:26.803

有一个本机功能可以以一种很好的方式完全满足您的需求。本质上，您可以像这样在 app/config.yml 中的 twig 配置中添加一个 twig 命名空间：

```
twig:
    # ...
    paths:
        "%kernel.root_dir%/../vendor/acme/foo-bar/templates": foo_bar 
```

这会为该文件夹创建一个别名`vendor/acme/foo-bar/templates`，然后您可以使用它从控制器中呈现您的模板：

```
return $this->render(
    '@foo_bar/template.html.twig',
    $data
); 
```

或来自其他树枝模板

```
{% include '@foo_bar/template.html.twig' %} 
```

资料来源：官方食谱[http://symfony.com/doc/current/cookbook/templating/namespaced_pa ​​ths.html](http://symfony.com/doc/current/cookbook/templating/namespaced_paths.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T09:47:08.027

由于亚当的暗示，我能够自己回答这个问题。因此，如果有人感兴趣，我想提供我的答案。

提供了一个可以简单使用的`AcmeDemoBundle`树枝扩展（类）。`Acme\DemoBundle\Twig\Extension\DemoExtension`将构造函数更改为

```
 public function __construct(FilesystemLoader $loader)
    {
     $this->loader = $loader;
     $this->loader->addPath('path/to/your/directory');
    } 
```

现在告诉 symfony 注册 twig 扩展。编辑您的`config.yml`文件（例如`app/config/config.yml`）并附加

```
 services:
     demo.twig.extension
      class: Acme\DemoBundle\Twig\Extension\DemoExtension
      tags:
       - { name: twig.extension }
      arguments:
       - @Twig.loader 
```

最后但并非最不重要的一点是更改扩展树枝文件并`::`从默认模板的命名空间中删除： `{% extends 'base.html.twig' %}`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-19T14:34:45.430

我设法找到了另一种实施起来更快的解决方案。我确实首先尝试了这个问题的公认答案，但仍然遇到路径问题。

就在我的渲染调用模板之前，我添加了 twig.loader 容器的路径，如下所示：

```
$this->container->get('twig.loader')->addPath('../../../../theme/', $namespace = '__main__'); 
```

现在树枝模板将从根文件夹中名为“主题”的目录呈现。我从 Fabien Pontencier 本人（Symfony 和 Twig 的创建者）那里找到了这个解决方案，在这里回复了一个 twig bug：[https ://github.com/symfony/symfony/issues/1912](https://github.com/symfony/symfony/issues/1912)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T10:25:41.467

通过一个操作，您可以从（服务）容器中获取“twig.loader”服务：

```
$this->get('twig.loader')->addPath('path/to/your/directory'); 
```

然后你可以在你的模板中使用这个路径。

@besta 使用 twig 扩展来做到这一点，将 twig 加载器注入到构造函数中。但在树枝扩展中，您可以使用环境：

```
class YourTwigExtension extends \Twig_Extension {
...
   public function initRuntime(\Twig_Environment $environment) {
      $this->environment = $environment;
      $this->environment->getLoader()->addPath(__DIR__ . '/Resources/views');
   }
...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-14T14:30:57.933

假设您希望在全局范围内完成此操作，则此类内容应在[编译器 pass](http://symfony.com/doc/current/components/dependency_injection/compilation.html#creating-a-compiler-pass)中完成。

像这样会更加清洁和高效：

```
<?php

use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\ContainerBuilder;

class CustomCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $loader = $container->getDefinition('twig.loader');
        $loader->addMethodCall('addPath', array('/path/to/views'));
    }
} 
```

# javascript - 在 Google Maps API v3 中获取特定地点的天气信息

> ID：12952316
> 
> 赞同：0
> 
> 时间：2012-10-18T10:16:25.013
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, weather

Google Maps 天气图层仅在默认位置显示“天气标记”，这些位置通常是主要城镇。

是否可以将天气标记放置在默认天气标记未覆盖的特定位置？关于天气图层管理的文档真的很差，图层文档页面中只有一段： [https ://developers.google.com/maps/documentation/javascript/layers#WeatherLayer](https://developers.google.com/maps/documentation/javascript/layers#WeatherLayer)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:38:18.313

文档很清楚：

> 启用天气图层将在您的地图上显示来自 weather.com 的当前天气状况，包括表示太阳、云、雨等的图标。单击特定区域的天气图标将打开一个信息窗口，其中包含详细数据，例如当前的湿度和风况，以及四天的预报。

您应该能够详细了解 weather.com 拥有数据的任何“特定地点”的天气。

# java - 在 Android 上解析 SSL 加密网站

> ID：12952318
> 
> 赞同：0
> 
> 时间：2012-10-18T10:16:29.437
> 
> 标签：java, android, ssl, https

有一个 SSL 加密（由 thawte 签名，因此没有自签名问题）需要登录的网站。我的目标是从该站点的子页面中读取一些数据。网络浏览器上的常规流程是：

*   转到“https://abc.de”
*   输入凭据并点击按钮
*   现在..登录你点击一个链接，可以看到数据

现在在 Android 中，我希望用户单击一个按钮，自动在后台执行所有这些操作，并以解析的形式向他显示结果。

由于我对 Android 编程了解不多，所以我的第一个猜测是 WebView。当使用凭据直接向登录页面发送 POST 请求时，这可以正常工作。但似乎我无法获得 WebView 的源代码。什么是做我想做的最好/最简单的技术/方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:06:36.003

与其只使用`WebView`，不如使用`HttpClient`或`HttpURLConnection`（有关使用哪个的讨论，请参阅[此博客文章](http://android-developers.blogspot.co.uk/2011/09/androids-http-clients.html)）从服务器初始加载页面。然后，您可以对返回的数据执行您需要执行的操作，然后将其传递给`WebView`显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:05:45.240

您可以使用[`HttpClient`](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)或[`HttpsUrlConnection`](http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html)直接与服务器通信，而无需`WebView`. 以我的[问题/答案](https://stackoverflow.com/a/4596713/512958)为例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:17:51.250

您可以为该用户提交表单吗？您可以使用 HTTPClient 并打开连接来提交表单。然而，这很容易变得棘手和丑陋。一些服务器在允许客户端登录之前将 nonce 传递给浏览器。如果你的服务器有这样的安全特性，你最终会在程序登录成功之前编写大量代码（如果有的话）。此外，您甚至需要使用 [1] 之类的 HTML 解析器来读取数据。

如果可能的话，要求网站公开 API 来检索这些数据要容易得多。这将是我建议的路线。Web 服务还可以通过 OAuth 或基于 HTTPS 的 BASIC auth 对您的用户进行身份验证。它消除了屏幕抓取的痛苦，但也需要一些时间投入来编写所述服务。

[1] - [http://htmlcleaner.sourceforge.net/](http://htmlcleaner.sourceforge.net/)

# vb.net - 打印 LayoutRoot 并适合页面

> ID：12952321
> 
> 赞同：1
> 
> 时间：2012-10-18T10:16:30.227
> 
> 标签：vb.net, silverlight, silverlight-5.0

我正在使用 Silverlight 5 和 VB.Net。

我的 LayoutRoot 是 Width=1300。

当我打印到纸张或 .xps 文件时，我丢失了输出的右侧。

如何强制 Silverlight 适合页面？

我的代码如下。谢谢，

捷通

```
Imports System.Windows.Printing

Partial Public Class Page3
    Inherits Page
    Public WithEvents pd As New PrintDocument()

Public Sub New()
        InitializeComponent()
        pd = New PrintDocument()

Private Sub Button1_Click(sender As Object, ByVal e As RoutedEventArgs) Handles Button1.Click
        pd.Print("People Framework")
    End Sub

    Private Sub pd_PrintPage(ByVal sender As Object, ByVal e As PrintPageEventArgs) Handles pd.PrintPage
        e.PageVisual = LayoutRoot
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:34:46.613

您需要先使用该`PrintableArea`参数来获取页面大小。

查看此博客文章[silverlight-printing-fit-to-page](http://jacekjura.blogspot.nl/2010/11/silverlight-printing-fit-to-page.html)以获得详细答案。它适用于 C#，但原理是相同的。

# android - Lwuit VideoComponent 在三星触摸屏手机上播放时转到表单的背景

> ID：12952322
> 
> 赞同：1
> 
> 时间：2012-10-18T10:16:38.103
> 
> 标签：android, java-me, lwuit

我正在使用 Lwuit videocomponent 播放一些媒体，如 3gp、mp4 等。启动组件时会出现问题，它会播放但立即进入后台。这只发生在三星触摸屏设备上，例如 Corby、GT S5620、Duos。

我使用的代码如下：

```
 videoComponent = VideoComponent.createVideoPeer(filePath);
                          player = (Player) videoComponent.getNativePeer();
                          player.prefetch();
                          player.realize();
                          player.start();
                          videoComponent.setVisible(true);
                          f.addComponent(videoComponent); 
```

媒体播放一秒钟，然后立即进入后台。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:50:39.970

LWUIT 中的视频组件有很多问题，我们在[Codename One](http://www.codenameone.com/)中修复了大部分问题。

# spring - Spring Security：登录后重定向到上一页

> ID：12952325
> 
> 赞同：3
> 
> 时间：2012-10-18T10:16:41.853
> 
> 标签：spring, security, redirect, login

我想在用户登录后重定向到上一页。

我知道当用户拒绝访问某个页面时，登录后重定向到上一页。

但我想知道，如果用户在单击登录链接后直接登录，或者我强制重定向登录页面。

当我提到上面的情况时，总是在登录后重定向到索引页面。

请帮我......

# database - Symfony2：获取持久化对象的 id

> ID：12952331
> 
> 赞同：36
> 
> 时间：2012-10-18T10:16:55.880
> 
> 标签：database, symfony, persistence, entity

我有两个实体：用户和个人。

在实体用户中，我需要相关人员的 id：user_id。

当我创建一个新用户时，我必须先创建人，然后再创建用户。在用户中，我必须输入相应人员的 id，为此我需要获取持久对象 person 的 id，这是一个自动增量。

之后是否可以获取对象的ID：

```
$em->persist($person);
$em->flush(); 
```

我该怎么做？

另一种方法是在 Person 表中搜索最大的 id 并取这个，但我认为应该有一种更好、更简单的方法来获取持久对象的 id。

例如，在 php 中，当我执行

```
$articleID = $_DB->queryRaw((....); 
```

我得到这样的身份证。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-18T10:20:06.527

[使用 Doctrine](http://symfony.com/doc/current/book/doctrine.html#persisting-objects-to-the-database)作为默认 ORM 的 Symfony2 将在数据存储到数据库后自动生成一个 ID。所以你可以通过`->getId()`

```
$id = $person->getId(); 
```

# javascript - 未定义时赋值

> ID：12952337
> 
> 赞同：0
> 
> 时间：2012-10-18T10:17:11.667
> 
> 标签：javascript

有没有更短的方法来做到这一点？

```
if (!someVar) {
    someVar = defaultVar;
} 
```

我知道这个：

```
someVar = someVar || defaultVar; 
```

但我不喜欢`someVar`在这里复制。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:21:22.443

不幸的是，javascript不支持这种`||=`方式，所以下面是最短的。

```
someVar = someVar || defaultVar; 
```

# sql - 如何仅在 Oracle SQL 中更新选定的行

> ID：12952346
> 
> 赞同：0
> 
> 时间：2012-10-18T10:17:35.607
> 
> 标签：sql, oracle-apex, multiple-columns, tabular-form

所以基本上我有一个表格形式。其中一列是复选框，另一列称为“隐藏”，将包含值“是”或“否”。

我有一个隐藏行的按钮，因此用户应该能够使用复选框选择某些行，然后单击隐藏按钮，它应该在“隐藏”列下将用户选择的行更改为“是”

所以我的 SQL 看起来像这样：

```
UPDATE nameOfTable
SET hidden = 'Yes'
WHERE hidden = 'No'; 
```

显然，这只会将当前为“否”的所有行的“隐藏”列更新为“是”，但我如何改为仅更新用户使用复选框选择的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:29:56.053

您将要使用 HTMLBD_APPLICATION 包来执行此操作。当您创建表格形式时，APEX 会自动为表格中的每个*可编辑*字段分配一个 ID。当您单击提交按钮时，您将需要一个循环遍历表中选定项目的函数。您可以通过检查该表中该字段的 HTML 来找出 APEX 分配给每个字段的名称（它将是 HTML id，并且看起来像 G_FXX，其中 X 是一个数字）。您还必须在表中有一些字段来标识每一行（如主键），以便数据库知道要在后端更新哪一行。

```
BEGIN
  FOR i IN 1..HTMLBD_APPLICATION.G_F01.COUNT LOOP
    UPDATE nameoftable SET hidden = 'yes' WHERE
      HTMLDB_APPLICATION.G_FXX(HTMLDB_APPLICATION.G_F01(i)) = row_key;
  END LOOP;
END; 
```

更新语句中的 XX 将是表中包含行 ID 的字段。这将获得选中框的列表，并通过列表循环更新已选中的每一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:23:28.960

```
update nameoftable 
  set hidden='yes'
   where id =selectedcheckboxid 
```

这里 id 是表的主键

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:33:11.457

只需将用户选择的主键 (id) 的值传递给数据库查询并将其与主键字段进行比较。显然@SRIRAM 的上述回答肯定会为你工作..!!

# mysql - 创建 Hive 表会自动更改 mysql Metastore 的字符集设置

> ID：12952348
> 
> 赞同：2
> 
> 时间：2012-10-18T10:17:45.270
> 
> 标签：mysql, hadoop, integration, hive, meta

我将 Hive 配置为使用 mysql 元存储。它工作正常。

但是，当我尝试删除表格时，会出现如下错误。

```
FAILED: Error in metadata: javax.jdo.JDODataStoreException: Error(s) were found while auto-creating/validating the datastore for classes. The errors are printed in the log, and are attached to this exception.
NestedThrowables:
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Specified key was too long; max key length is 767 bytes
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask 
```

我做了一些研究，谷歌和[官方常见问题解答](https://cwiki.apache.org/Hive/faq.html)告诉我更改 mysql 字符集设置将解决此问题。

我的mysql设置如下

```
mysql> show variables like '%char%';
+--------------------------+----------------------------------------+
| Variable_name            | Value                                  |
+--------------------------+----------------------------------------+
| character_set_client     | utf8                                   |
| character_set_connection | utf8                                   |
| character_set_database   | utf8                                   |
| character_set_filesystem | binary                                 |
| character_set_results    | utf8                                   |
| character_set_server     | utf8                                   |
| character_set_system     | utf8                                   |
| character_sets_dir       | /usr/local/mysql/share/mysql/charsets/ |
+--------------------------+----------------------------------------+
8 rows in set (0.02 sec) 
```

我将所有字符集设置从 更改`utf8`为`latin1`，除了`character_set_filesystem`, `character_set_system`, `character_sets_dir`。

即使这样做，当我尝试删除表时，我仍然会遇到相同的错误。更糟糕的是，每当我创建一个新表时，mysql 字符集设置将被重置为`utf-8`.

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T10:36:35.207

问题是在 hive-site.xml 中它在下面创建“hive”时使用了另一个数据库

```
 <property>
 <name>javax.jdo.option.ConnectionURL</name>
 <value>jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true</value>
 </property> 
```

将数据库名称更改为您已经在 mysql 中创建的“metastore”，如下所示

```
<property>
<name>javax.jdo.option.ConnectionURL</name>
<value>jdbc:mysql://localhost:3306/metastore?createDatabaseIfNotExist=true</value>
</property> 
```

希望这能解决我遇到同样问题的问题，并像这样修复它。友好的马图克

# epub - iBooks 脚注弹出框不跟随链接

> ID：12952352
> 
> 赞同：7
> 
> 时间：2012-10-18T10:17:55.303
> 
> 标签：epub, ibooks

[Liz Castro](http://www.pigsgourdsandwikis.com/2012/05/creating-pop-up-footnotes-in-epub-3-and.html)在此处详细介绍了 Apple 对 ePub 3 脚注的支持。

简而言之，如果脚注链接具有以下`epub:tupe="noteref"`格式：

```
<a epub:type="noteref" href="#n1">1</a> 
```

脚注文本位于具有以下格式的`<aside>`标签中：`epub:type="footnote"`

```
<aside epub:type="footnote" id="n1">
<p>This is the footnote text. However, if I <a href="http://stackoverflow.com">click this link</a> it does not work.</p>
</aside> 
```

然后，您会在 iBooks 上获得整洁的弹出式脚注。

![iBooks 中的弹出式脚注](../Images/4ec408d3e818fb98683376c2d46ab537.png)

然而，脚注中的链接（正如我在这里展示的那样）不起作用。当您点击链接时，弹出框会折叠：

![未能关注链接](../Images/c483ef1af0e9f065ea92c29e7698ad4d.png)

关于我需要做什么才能让它发挥作用的任何想法？我在某处缺少 epub 类型声明吗？或者它只是 iBooks 弹出框实现中的一个错误？

[注意：我目前的解决方法是将脚注放在章节末尾的 a 中——就像一个普通的尾注一样——带有相同的`epub:type="footnote"`标签。这意味着它将始终显示在那里（与`<aside>`隐藏的标签不同），您可以点击本章末尾的链接，但您仍然可以在文本流中获得就地弹出框以获取信息。]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:44:38.073

同样的问题，我得出的结论是，这是 iBooks popover 实现的一个限制。使用@_target 属性也没有效果。

在 Apple 修复它之前，我建议对具有复杂内容的笔记使用非线性文档（并且不要将它们包含在“导航”目录中）。在自动化的 XML 流程中，这可以很容易设置并且非常有效：当用户单击注释引用时，将打开一个包含复杂内容的新窗口（示例链接）。用户可以使用屏幕右上角的“确定”按钮关闭此窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-30T00:15:47.210

值得一提的是，Calibre 在弹出脚注的旁注约定方面存在问题。在单击参考之前或之后，旁白中的文本不会隐藏。我在弹出窗口中的一旁或旁白中获得了文本，但它在放置容器的点（内联或页面或章节的末尾）的文本中也可见。如果您将 s 放在本书末尾的另一个文档中，那是正确的。但是，放置在组分配中的所有文本都包含在弹出窗口中。我怀疑 epub:type="footnote" 没有被编程为在弹出窗口被激活和停用时切换隐藏属性。我已经在网上搜索过，但到目前为止，还没有找到解决问题的代码。详细信息标签有效，但不符合要求，以某种方式插入了换行符。

# jquery - 未捕获的 TypeError 对象没有“可排序”方法

> ID：12952353
> 
> 赞同：5
> 
> 时间：2012-10-18T10:17:58.153
> 
> 标签：jquery, wordpress, jquery-ui-sortable, typeerror

我已经找到了一些解决这个问题的方法，但它们并不是专门针对这个问题的。我读过一些简单的东西，比如 Sortable() 需要小写。当然，我没有先将它设置为大写。

我已经完成了这项工作，然后突然决定在控制台的 line:210 上吐出以下内容`Uncaught TypeError: Object [object Object] has no method 'sortable'`，对应于：

```
    // 第 210 行在下面
    $('.sortable').sortable({
         停止：get_post_order
    }).disableSelection();
    // 检查新订单
    函数 get_post_order() {
        var post_list = [], pids;
        $('.inner-pop-list li a').each(function() {
            pids = $(this).attr('rel');
            post_list.push(pids);
        });
        $('.export').attr('href', '?format=pdf&pids='+post_list);
    }

```

它应该在列表重新排序后更新 post_list 数组。`get_post_order`根本没有运行。我已经尝试将函数直接添加到`stop: function() {...}`但仍然没有变化。

任何想法，我都很难过。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:04:41.153

固定的，有时从其他人​​那里得到新的方法会引导你找到答案。谢谢你的帮助。它让我看看我网站的标题。我注意到我已经在标题中添加了 sortable() 声明。然后我在一个导致冲突的外部脚本（即第 210 行）中再次引用了 sortable。

所以答案是，引用 sortable() 一次！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:23:39.337

您的 javascript 代码可能不在 $(document).ready 中，并且在加载 ui 库之前正在执行。

# javascript - 使用javascript调用（或类似的）div来显示艺术品和描述？

> ID：12952354
> 
> 赞同：1
> 
> 时间：2012-10-18T10:18:05.210
> 
> 标签：javascript, image, gallery

首先快速免责声明：我是 javascript 新手，不是编码背景，但目前正在通过书籍、教程和经常访问这个站点来自己解决问题。但是，我非常感谢有关带有 javascript 函数的图片库的一些帮助。

我需要的解决方案是使用 javascript 将缩略图链接到同一页面上的较大图像，并在其下方显示相关文本描述。由于该网站是艺术家的作品集，因此目标是让艺术品以下面的标题、尺寸和价格显示 - 同时保持在同一页面上。

当前的网站[http://www.barrymckayart.co.uk/animals.html](http://www.barrymckayart.co.uk/animals.html)这样做，虽然没有任何脚本，并且为每个图像链接创建一个单独的页面（纯粹是我的经验不足）。

我目前正在试验的脚本是：

```
<script type="text/javascript">
  function showImage(imgName) {
    var curImage = document.getElementById('currentImg');
    var thePath = 'images/animals/';
    var theSource = thePath + imgName;

    curImage.src = theSource;
    curImage.alt = imgName;
    curImage.title = imgName; 
```

从视觉上看，这与现有网站相同，并且运行良好。但是，我不知道如何为每个图像引入特定的文本。我试图调用`img title=""`以及为每个缩略图创建一个 div 以包含`p`标签。不实用！我也尝试过创建一个`figcaption`，但所做的只是显示在缩略图下并使所有内容不对齐。

一个类似于我想要实现的画廊位于[http://www.thekitchen.org/auction2010/#artwork](http://www.thekitchen.org/auction2010/#artwork)。除了输入这篇文章之外，我还试图破译代码，因为我渴望学习 javascript，但解决这个问题的时间有限。

如果有人能提供任何指示、解决方案或建议，我将不胜感激。

谢谢你。

* * *

从那以后，我已经使用了这两种代码，现在正在玩弄哪个代码适合该站点。感谢大家的及时回答，感谢大家抽出宝贵的时间提供一些出色的支持。我想对这两个答案都投赞成票，但由于我是新手，我必须等到我的声望达到 16 岁。尽管如此，我真的不能感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:50:26.520

您需要为每个图像提供一个 id，然后您想使用 getAttribute("title") 来检索该属性。因此对于

```
<img src="../images/animals/thumbs/gorilla.jpg" id="gorilla" title="Gorilla (coloured pencils)" alt="Gorilla (coloured pencils)"> 
```

要获得这张图片的标题，你会做

```
g = document.getElementById("gorilla")
g.getAttribute("title"); // do what you need with the attribute 
```

但是，最好将额外的数据存储在索引到 html 中的 ids 的对象中，有点像这样：（这里有一个 jsfiddle

```
<html>
    <head></head>
    <body>

        <a href="#" onclick ="showPicture('leopard');return false;"><img src="http://www.barrymckayart.co.uk/images/animals/thumbs/leopard.jpg" title="Lone Leopard (
        watercolour)" alt="Lone Leopard (watercolour)" /></a>

        <a href="#" onclick ="showPicture('rhino'); return false;"><img src="http://www.barrymckayart.co.uk/images/animals/thumbs/rhino.jpg" id="rhino" title="Rhino (coloured pencils)" alt="Rhino (coloured pencils)" /></a>
        <div><img src="http://www.barrymckayart.co.uk/images/animals/leopard.jpg" id="full_picture">
        </div>
        <h1 id="main_title">Leopard</h1>
        <div id="description">
            Lone Leopard
        </div>
        <div id="price">
            $3,340
        </div>

        <script>
            var data = {
                "rhino" : {
                    "title" : "Lone Rhino",
                    "desc" : "watercolor",
                    "price" : "$3,340",
                    "full" : "http://www.barrymckayart.co.uk/images/animals/rhino.jpg"
                },
                "leopard" : {
                    "title" : "Lone Leopard",
                    "desc" : "watercolor",
                    "price" : "$3,000",
                    "full" : "http://www.barrymckayart.co.uk/images/animals/leopard.jpg"
                }

            };

            function showPicture(id) {
                var main_image = document.getElementById("full_picture");
                var price = document.getElementById("price");
                var main_title = document.getElementById("main_title");
                var description = document.getElementById("description");

                main_image.src = data[id].full;
                price.innerHTML = data[id].price;
                main_title.innerHTML = data[id].title;
                description.innerHTML = data[id].desc;

            }
        </script>

    </body>

</html> 
```

这有内联 onclick 事件，但是，嘿，如果时间有限....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:54:19.470

我更愿意将信息存储在图像中，而不是单独的数据对象：

```
<img src="img/gorilla_thumbnail.jpg" class="thumbnail" title="Gorilla" alt="Gorilla" data-price="$1000" data-description="Description about the item" data-full-image="gorilla.jpg" /> 
```

我还推荐[jQuery](http://www.jquery.com)（如果您以前没有使用过它，它有很好的文档）在用户单击缩略图时动态更新页面。

```
$(document).ready(function () { 
  // Following event will handle click to any img with class 'thumbnail':
  $('img.thumbnail').click(function () { 
    // 'this' will refer to the clicked thumbnail
    $('#mainImage').attr('src', 'folder/subfolder/' + $(this).attr('data-full-image')); // <img id="mainImage" /> to display full sized image
    $('#mainDescription').html($(this).attr('data-description')); // <p id="mainDescription"> or similar to display description
    $('#mainTitle').html($(this).attr('title')); // <p id="mainTitle"> or similar to display title
    // etc
  }); 
}); 
```

# api - 本机/计算属性获取器的最佳实践

> ID：12952357
> 
> 赞同：1
> 
> 时间：2012-10-18T10:18:18.233
> 
> 标签：api, language-agnostic, naming-conventions, getter, getter-setter

这是关于吸气剂的一般问题。

假设我有一个`User`具有 2 个本机属性`firstname`和`lastname`一个动态计算属性的类`fullname`。

为这些命名吸气剂的最佳方式是什么？

我很好：

```
user->get_firstname();
user->get_lastname();
// or
user->firstname;
user->lastname; 
```

但我更关心的是：

```
user->get_fullname();
// or
user->fullname; 
```

因为我们觉得它只是另一个原生属性，但事实并非如此。该`fullname`属性可以读取但不能写入，没有设置器。我们不能把它当作原生属性来操作。

我希望能够在这些属性（本机与动态计算）之间产生差异，我该怎么做？

来自现有框架的示例以及它们如何处理这个问题非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:28:45.673

我不确定你的问题到底是什么。

但是您不需要为不想拥有它们的字段创建设置器。让我做一个 C# 示例：

```
public String fullname { get; set; }
public String lastname { get; } 
```

这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:34:03.623

我会说它应该与其他吸气剂命名相同。无论是基本属性还是计算值，都归结为我希望从最终用户那里抽象出来的实现细节。全名今天可能是一个计算值，但将来可能不会。我希望将来可以自由地在一个地方更改它，但保持公共界面不变。

# regex - 具有多个域的虚拟主机的简单 htaccess 重定向

> ID：12952367
> 
> 赞同：0
> 
> 时间：2012-10-18T10:18:48.697
> 
> 标签：regex, apache, .htaccess

我正在一个有大约 5 或 6 个域的站点上工作，它们都指向同一个主机并且都显示同一个站点。我知道我真正应该做的是将每个域重定向到一个域，但客户端不希望这样做。

我需要重定向：

```
xyz.com/abc -> xyz.com/def
aaa.com/abc -> aaa.com/def
bbb.com/abc -> bbb.com/def 
```

其中共同因素是将 abc 映射到 def。

目前我正在使用

```
Redirect /abc http://xyz.com/def 
```

但这显然会从任何域重定向到 xyz.com，这不是我想要的。在不丢失当前域的情况下进行这些重定向的最简单/可靠的方法是什么？

干杯，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:56:28.210

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?(xyz|aaa|bbb)\.com$ [NC]
RewriteRule ^abc/?$ http://xyz.com/def [L,R=302,NC] 
```

在您对规则工作正常感到满意后，将其更改`302`为`301`将其标记为`"permanent redirect"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:27:11.713

怎么样：

```
Redirect /abc /def 
```

这会保留发出请求的主机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T13:49:24.790

看起来我只需要使用像这样的普通重写规则：

```
RewriteRule ^science.*$ /applications/ [R=301,L]

= science/whatever -> /applications/ 
```

# python - Python：访问嵌套在 for 循环中的 if 语句中的索引号

> ID：12952369
> 
> 赞同：1
> 
> 时间：2012-10-18T10:18:54.960
> 
> 标签：python, arrays, if-statement, for-loop

我有一个从直线渐变派生的整数数组。该数组称为 sign_slope，如下所示：

```
sign_slope = array([-1, 1, -1, ..., -1, -1, -1]) 
```

我正在寻找数组中的连续项为：1、-1 例如，您可以从上面的 sign_slope 输出中看到：sign_slope[1] = 1 和 sign_slope[2] = -1 这将是第一个许多我想检测项目/索引号的情况。在上述情况下，我希望代码输出与第 (n-1) 个索引对应的索引号数组或列表，即 sign_slope[1]。我已经写了以下似乎有效的打印声明。但是，我不知道如何输出索引号而不是当前情况下的值并将它们附加到列表或将它们输入到数组中。

```
for n in range(0, len(sign_slope)):
    if sign_slope[n] < 0 and sign_slope[n - 1] > 0:
        print sign_slope[n - 1]
    else:
        print 0 
```

谢谢提前，

凯恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:25:14.543

在一系列指标上循环通常被认为是非常不合常规的。它读起来很糟糕，掩盖了你真正想要做的事情。因此，找到子列表的更好解决方案是循环使用`enumerate()`内置函数来获取值旁边的索引。我们还可以提供更通用的解决方案，并使其成为易于使用的生成器。

```
def find_sublists(seq, sublist):
    length = len(sublist)
    for index, value in enumerate(seq):
        if value == sublist[0] and seq[index:index+length] == sublist:
            yield index 
```

我们在这里所做的是遍历列表，获取值与子列表开头匹配的索引。然后我们检查列表的那个段是否与我们的子列表匹配，如果匹配，我们`yield`就索引。这使我们能够快速找到列表中所有匹配的子列表。

然后我们可以像这样使用它，使用`list`内置函数从生成器创建一个列表：

```
>>> list(find_sublists([-1, 1, -1, -1, -1, 1, -1], [1, -1]))
[1, 5] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:41:23.100

`sign_slope`假设您的数组是一个数组，您可以在不编写循环的情况下执行此操作`numpy`：

```
import numpy as np

# some data
sign_slope = np.array([-1, 1, -1, 1, 1, -1, -1])

# compute the differences in s
d = np.diff(sign_slope)

# compute the indices of elements in d that are nonzero
pos = np.where(d != 0)[0]

# elements pos[i] and pos[i]+1 are the indices
# of s that differ:
print s[pos[i]], s[pos[i]+1] 
```

这是一个显示变量值的 ipython 会话：

```
In [1]: import numpy as np

In [2]: s = np.array([-1, 1, -1, 1, 1, -1, -1])

In [3]: d = np.diff(s)

In [4]: print d
[ 2 -2  2  0 -2  0]

In [5]: pos = np.where(d != 0)[0]

In [6]: print pos
[0 1 2 4]

In [7]: print s[pos[0]], s[pos[0]+1]
-1 1

In [8]: print s[pos[1]], s[pos[1]+1]
1 -1

In [9]: print s[pos[2]], s[pos[2]+1]
-1 1

In [10]: print s[pos[3]], s[pos[3]+1]
1 -1 
```

希望这可以帮助

编辑：实际上，回想起来，我错过了一些差异。我会回复你的。很抱歉有任何混淆。

编辑2：固定，我犯了一个愚蠢的错误。

# ruby-on-rails - 如何将 Ruby 数组从键中排序为散列？

> ID：12952371
> 
> 赞同：0
> 
> 时间：2012-10-18T10:19:11.900
> 
> 标签：ruby-on-rails, arrays, sorting, hash, mongoid

我有一个 Ruby 数组，它看起来像：

```
[
     #<Share _id: 507fd5a8ab432a6a35000006, _type: nil, price: {"cents"=>25535, "currency_iso"=>"USD"}, company_id: "507fcdb8ab432ac733000001", user_id: "507fcb06ab432a7c2e000001">,
     #<Share _id: 507fd5a8ab432a6a35000007, _type: nil, price: {"cents"=>25535, "currency_iso"=>"USD"}, company_id: "507fcdb8ab432ac733000001", user_id: "507fcb06ab432a7c2e000002">
] 
```

我怎么能通过键`company.symbol`（这是一个 Mongoid 关系，并且存在于每个 Share 对象中）对其进行排序，所以它最终变成一个像这样的哈希

```
{
    :appl => [#<Share _id: 507fd5a8ab432a6a35000006, _type: nil, price: {"cents"=>25535, "currency_iso"=>"USD"}, company_id: "507fcdb8ab432ac733000001", user_id: "507fcb06ab432a7c2e000001">]
    :msft => [#<Share _id: 507fd5a8ab432a6a35000007, _type: nil, price: {"cents"=>25535, "currency_iso"=>"USD"}, company_id: "507fcdb8ab432ac733000001", user_id: "507fcb06ab432a7c2e000002">]
} 
```

在哪里`aapl`和`msft`是股票上可用的公司符号`company.symbol`。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:31:08.827

不完全符合我的要求，但可以按我的意愿工作：

```
@companies = current_user.shares.map { |s| s.company }.uniq.each do |company|
    puts "#{company.name}: #{company.shares.map { |s| s if s.user == current_user and s.company == company }}"
    # this prints all the shares of every company
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:33:24.427

```
hash = {}
shares.each{ |share|
  hash[share.company.symbol] = [] unless hash[share.company.symbol]
  hash[share.company.symbol] << share
} 
```

# android - 如何强制 PageViewer 重新创建片段

> ID：12952372
> 
> 赞同：0
> 
> 时间：2012-10-18T10:19:12.790
> 
> 标签：android, fragment

我有片段，可以根据当前布局以两种不同的方式实例化。这些片段`PageViewer`使用从`FragmentStatePageAdapter`. 如果我以纵向或横向模式运行应用程序，一切都很好。片段已正确加载并且看起来不错。问题是当我改变方向时：片段没有改变，似乎它重用了为某个方向加载的那个，事实上如果我在下一个之后滚动寻呼机（它已经在前一个方向加载）新片段已正确加载，当我再次向后滚动时，即使“起始片段”已正确重新加载。

我想通过强制重新创建当前片段和相邻片段来解决问题，但我尝试过的解决方案似乎不完整/不起作用。

我以`startUpdate`这种方式覆盖了 Adapter 方法：

```
 public void startUpdate(ViewGroup container) {
        if(isPortrait != isLastOrientationPortrait){
            container.removeAllViews();
            instantiateItem(container, lastPosition);
        }
        super.startUpdate(container);
    } 
```

这迫使从容器中消除碎片。但是我不知道这是否是正确的方法以及如何将新安装的项目放回容器中。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:16:02.590

我找到了解决这个问题的方法：

而不是扩展`FragmentStatePagerAdapter`类我修改了它的源代码（如果你需要它，你可以在这里找到它：[https ://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/ android/support/v4/app/FragmentStatePagerAdapter.java](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/app/FragmentStatePagerAdapter.java) )

我所做的只是修改`restoreStateMethod`这种方式：

```
public void restoreState(Parcelable state, ClassLoader loader) {
        Log.d(TAG, "restoreState");
        //We don't want to restore the fragments if the orientation changes!
        if(isLastOrientationPortrait != isPortrait){
            if(state != null){
                Bundle bundle = (Bundle) state;
                bundle.setClassLoader(loader);
                Iterable<String> keys = bundle.keySet();
                if (mCurTransaction == null) {
                    mCurTransaction = mFragmentManager.beginTransaction();
                }
                for (String key : keys) {
                    if (key.startsWith("f")) {
                        Fragment f = mFragmentManager.getFragment(bundle,
                                key);
                        mCurTransaction.remove(f);
                    }
                }
            }
            isLastOrientationPortrait = isPortrait;
        }else{
            if (state != null) {
                Bundle bundle = (Bundle)state;
                bundle.setClassLoader(loader);
                Parcelable[] fss = bundle.getParcelableArray("states");
                mSavedState.clear();
                mFragments.clear();
                if (fss != null) {
                    for (int i=0; i<fss.length; i++) {
                        mSavedState.add((Fragment.SavedState)fss[i]);
                    }
                }
                Iterable<String> keys = bundle.keySet();
                for (String key: keys) {
                    if (key.startsWith("f")) {
                        int index = Integer.parseInt(key.substring(1));
                        Fragment f = mFragmentManager.getFragment(bundle, key);
                        if (f != null) {
                            while (mFragments.size() <= index) {
                                mFragments.add(null);
                            }
                            f.setMenuVisibility(false);
                            mFragments.set(index, f);
                        } else {
                            Log.w(TAG, "Bad fragment at key " + key);
                        }
                    }
                }
            }
        }
    } 
```

我基本上添加的是第一个 if 语句：

```
if(isLastOrientationPortrait != isPortrait){
            if(state != null){
                Bundle bundle = (Bundle) state;
                bundle.setClassLoader(loader);
                Iterable<String> keys = bundle.keySet();
                if (mCurTransaction == null) {
                    mCurTransaction = mFragmentManager.beginTransaction();
                }
                for (String key : keys) {
                    if (key.startsWith("f")) {
                        Fragment f = mFragmentManager.getFragment(bundle,
                                key);
                        mCurTransaction.remove(f);
                    }
                }
            }
            isLastOrientationPortrait = isPortrait;
        } 
```

其中`isPortrait`是当前方向的布尔值，`isLastOrientationPortrait`是通过`onSaveInstanceState`

这迫使丢弃所有保存的片段并在方向更改时重新创建它们。

# php - PHP executes Python but no output

> ID：12952376
> 
> 赞同：-1
> 
> 时间：2012-10-18T10:19:24.407
> 
> 标签：php, python, unix

I want to run a Python script from PHP via [`system`](http://php.net/system) with some arguments. My PHP doesn't throw any errors and `$retval` is 1\. But I don't see any generated output file `$f1` in the current directory. Is there a chance the output file goes somewhere else?

```
$outp1 = system("python plain.py {$url1} {$f1}", $retval); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:40:25.790

现在找到了答案，我需要将权限设置为 777 以便 apache 可以写入该文件夹。

# javascript - 在 IE8 和更低版本中使用 createElement 为 swf 添加后备图像？

> ID：12952385
> 
> 赞同：3
> 
> 时间：2012-10-18T10:19:56.920
> 
> 标签：javascript, flash, dom, internet-explorer-8, fallback

我正在创建一个脚本，该脚本应该创建嵌入式 SWF，并且如果用户没有可用的 Flash，则还使用图像作为后备。由于我不允许使用任何其他库，例如 SWFobject，因此我无法使用诸如 createElement/appendChild/setAttribute 之类的 DOM 技术。

我一直在使用这篇很棒的博客文章： http: [//pipwerks.com/2011/05/30/using-the-object-element-to-dynamically-embed-flash-swfs-in-internet-explorer/](http://pipwerks.com/2011/05/30/using-the-object-element-to-dynamically-embed-flash-swfs-in-internet-explorer/)作为指导方针，并且我在我测试过的所有浏览器中都启动并运行了 Flash，但它不包括任何解决方案来解决我如何将链接/图像组合注入到 Internet Explorer 8 中的对象中。

使用 createElement("a") 并同样用于图像并将其添加到任何其他 Div 元素都可以正常工作，但如果我尝试将其注入对象 MSIE8 会抛出“无效参数”。

我还尝试创建一个带有 id 的虚假参数，并尝试用我的链接/图像组合替换它，这在我测试过的其他浏览器中有效，但在 IE8 中无效。对此的任何想法将不胜感激。

这是我的代码（我使用 js 和 PHP 的组合来创建脚本）：

```
var alink = document.createElement("a");
alink.setAttribute("href", "URL_TO_TARGET_SITE_OR_CLICK_COUNTER");

var alinkImage = document.createElement("img");
alinkImage.setAttribute("src", "URL_TO_IMAGE");
alinkImage.setAttribute("alt", "");
alinkImage.setAttribute("width", "IMAGE_WIDTH");
alinkImage.setAttribute("height", "IMAGE_HEIGHT");

alink.appendChild(alinkImage);

if(!IE8) {
    flashObject.appendChild(alink);
    document.getElementById('ad_filler_placeholder').appendChild(flashObject);
} else {
    /* this code will be executed if IE8 or lower, sadly appending alink into flashobject fails */
    flashObject.appendChild(alink);
    document.getElementById('ad_filler_placeholder').appendChild(flashObject);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:50:52.343

好的，所以我不得不稍微调整我的脚本以匹配 pipwerks 博客文章中所述的最终结果。在检查 IE 时，我用 innerHTML 声明了 flashObject，如下所示：

```
var fallback=false;

flashObject = (isIE) ? createIeObject() : document.createElement("object");

if(!isIE) {
   flashObject.setAttribute("type", "application/x-shockwave-flash");
   flashObject.setAttribute("data", "URL_TO_SWF");
   fallback = true;
} 
```

createIeObject 函数执行此操作：

```
function createIeObject(){
   var div = document.createElement("div");
   div.innerHTML = "<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='URL_TO_SWF'><a href='URL_FOR_CLICK'><img src='URL_TO_FALLBACK_IMAGE' alt='' width='WIDTH' height='HEIGHT' border='0' /></a></object>";
   return div.firstChild;
} 
```

请注意，我在此段中添加了后备。而且我还必须在图像上使用宽度、高度和边框，否则 IE 会在所有内容周围添加一个烦人的蓝色边框。好的，一切都会按我的计划进行吗..？当然不是 =) IE8（可能还有其他版本）不能将任何子元素附加到我最初使用 document.write 创建的 div 中，因为在该状态下 DOM 未完全加载。这可以解决整个（几乎）的事情：

```
onload = function(){} 
```

我确实通过 DFP 尝试过，它至少可以在 IE7 及更高版本上运行。如原始问题中所述，其他优秀的浏览器通过常规 appendChild 添加了他们的fallbakc，我只是将它移到了 if 语句中，因为如果 IE 它将过时。

# magento - Magento 结帐挂钩

> ID：12952397
> 
> 赞同：1
> 
> 时间：2012-10-18T10:20:17.873
> 
> 标签：magento

我显然不希望有人为我写这个，但有人可以给我一个半详细的文件解释和方法来做这样简单的事情吗？？？

我一直试图解决这个问题 2 天。这里的想法是我们的​​一些产品应该在结账时创建一个简单的许可证密钥并将该密钥发送到第 3 方系统。

这是手头的任务：

1.  将一个名为 license_keys 的新表添加到数据库中，其中包含以下字段：customer_id、transaction_id、license_key 和 transaction_notes

2.  在配置名为 is_licensed_product 的产品时添加一个新复选框。

3.  如果此复选框=是，则：在结帐期间，magento 以这种格式生成一个随机的字母数字键 ########-######## 其中 # 是大写字母或数字。湾。这是为每个行项目生成的。C。这与 transaction_id 等一起存储在 licence_keys 数据库表中。对远程服务器进行 API 调用：test.com/recieve?key=12345&email={email}&transaction_id={transaction_id}&customer_id={customer_id}&license_key={license_key} e。对于每个 lineitem，将调用此 API，以便将每个单独的许可证发送到那里。

4.  然后应该可以看到此信息：在管理系统中 b. 在发送给客户的收据上 c. 在结帐页面上

5.  a) 生成许可证密钥时，b) 进行 API 调用时，以及 c) 收到 API 响应时，所有这些信息也应该放入一个数组并放入 db 中的 transaction_notes 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:13:32.813

有很多很多很多方法可以做到这一点。观察者可能会很有用，也许在[`sales_order_place_after`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Sales/Model/Order.php#L1096)上，您可以使用它来进行一些后期处理。

在您的观察者中，获取刚刚下达的订单对象，查找您的许可证密钥产品，生成密钥，进行插入，可能会联系您的 API 或对其进行排队（小心处理缓慢或无响应的远程系统）。

有关使用此事件执行销售规则使用后处理的核心示例，请参阅[Mage_SalesRule_Model_Observer::sales_order_afterPlace() [链接]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/SalesRule/Model/Observer.php#L60)。

# asp.net - 如何在动态 linq 查询中获取匿名字段的总和

> ID：12952399
> 
> 赞同：0
> 
> 时间：2012-10-18T10:20:20.757
> 
> 标签：asp.net, linq, dynamic

为了在 gridview 的页脚行中显示字段的总和，我想从我的动态列表中获取总和，InTopSuppliersView() 位于单独的程序集 DAL 中，而 gridview 位于表示层内。

DAL 中的代码：

```
public static dynamic InTopSuppliersView()
{

    var _pd = from pd in InTopSuppliers()
                join pm in PdnmasterDALC.InTopSuppliers() on pd.Pdnmasterid equals pm.Pdnmasterid
                select new
                {
                    RefNo = pm.PDNRefNo,
                    Date = pm.Date
                    Quantity = pd.QuantityApprovedUOM,
                    Rate = pd.Rate,
                    Amount = pd.Amount
                };

    return _pd;
} 
```

表格代码：

```
var tmp = InTopSuppliersView();
gvPDNDetail.DataSource = tmp;
gvPDNDetail.DataBind();

gvPDNDetail.FooterRow.Cells[3].Text = tmp.SUM(o => o.Quantity).ToString(); 
```

我想获得在查询中动态创建的字段数量和金额的总和

![在此处输入图像描述](../Images/5644a5ec8747c8e9335a74e38015f4d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:34:46.297

*让我们看看我是否理解正确：*

* * *

你返回一个`dynamic`from`InTopSuppliersView`是因为你想返回一个匿名类型的列表，对吧？然后你想`.Sum`在那个列表上调用，但它不适用于语法，因为 dynamic 不知道什么是 lambda 表达式（`o => o.Quantity`）：

> 如果不首先将 lambda 表达式转换为委托或表达式树类型，则无法将 lambda 表达式用作动态分派操作的参数

所以我猜你想做这样的事情：

```
gvPDNDetail.FooterRow.Cells[3].Text = ((IEnumerable<dynamic>)tmp).Sum(o => o.Quantity).ToString(); 
```

* * *

或者只是将返回类型更改为`IEnumerable<dynamic>`，如下所示：

```
public static IEnumerable<dynamic> InTopSuppliersView()
{
    return from pd in InTopSuppliers()
           join pm in PdnmasterDALC.InTopSuppliers() on pd.Pdnmasterid equals pm.Pdnmasterid
           select new
           {
               RefNo = pm.PDNRefNo,
               Date = pm.Date
               Quantity = pd.QuantityApprovedUOM,
               Rate = pd.Rate,
               Amount = pd.Amount
           };
} 
```

然后像以前一样调用它：

```
// Observe the casing on Sum
gvPDNDetail.FooterRow.Cells[3].Text = tmp.Sum(o => o.Quantity).ToString(); 
```

* * *

**编辑：**

从您的评论中，我想我知道发生了什么。您在一个程序集中拥有该`InTopSuppliersView`方法，在另一个程序集中使用该方法。我相信创建的匿名类型是默认创建的`internal`，因此不能在另一个程序集中使用。我认为如果你使用它会起作用`ExpandoObject`：

```
public static IEnumerable<dynamic> InTopSuppliersView()
{
    var _pd = from pd in InTopSuppliers()
              join pm in PdnmasterDALC.InTopSuppliers() on pd.Pdnmasterid equals pm.Pdnmasterid
              select new { pd, pm };

    return _pd.Select(o =>
    {
        dynamic obj = new ExpandoObject();

        obj.RefNo = o.pm.PDNRefNo;
        obj.Date = o.pm.Date;
        obj.Quantity = o.pd.QuantityApprovedUOM;
        obj.Rate = o.pd.Rate;
        obj.Amount = o.pd.Amount;

        return obj;
    });
} 
```

您也可以（而不是上面）`[assembly: InternalsVisibleTo("YourAssemblyName")]`在此方法所在的项目中使用，并将*“YourAssemblyName”*更改为表单项目的程序集名称。

# android - 在 Android 上旋转大图像

> ID：12952401
> 
> 赞同：4
> 
> 时间：2012-10-18T10:20:24.797
> 
> 标签：android

我正在尝试旋转手机摄像头（8 兆像素）拍摄的大图像。只是来自源位图的旋转矩阵的 Bitmap.createBitmap 会遇到 OutOfMemoryError。这就是为什么我试图分割成旋转的部分，然后将它们再次组合成单个旋转图像以避免在内存中保存 2 个大位图，但即使在我的三星 S3 上也需要长达 10 秒。还有其他方法可以做到这一点吗？

```
 public static void rotateImage(File file)
            throws FileNotFoundException {
        long time = System.currentTimeMillis();
        List<File> fileList = new ArrayList<File>();

        // For the number of rows and columns
        int rowsCols = 3;

        Matrix matrix = new Matrix();
        matrix.postRotate(-90);

        int chunkHeight, chunkWidth;

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;

        BitmapFactory.decodeStream(new FileInputStream(file), null, options);

        int height = options.outHeight;
        int width = options.outWidth;

        chunkHeight = height / rowsCols;
        chunkWidth = width / rowsCols;

        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = 1;
        o2.inPurgeable = true;
        o2.inInputShareable = true;
        o2.inPreferredConfig = Bitmap.Config.ARGB_8888;

        Bitmap bitmap = BitmapFactory.decodeStream(new FileInputStream(file),
                null, o2);

        // Cut the small rotated pieces and save to the files
        int yCoord = 0;
        for (int y = 0; y < rowsCols; y++) {
            int xCoord = 0;
            for (int x = 0; x < rowsCols; x++) {
                split(chunkHeight, chunkWidth, yCoord, x, xCoord, y, bitmap,
                        matrix, fileList);
                xCoord += chunkWidth;
            }
            yCoord += chunkHeight;
        }
        bitmap.recycle();
        Bitmap rotatedBitmap = Bitmap.createBitmap(height, width,
                Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(rotatedBitmap);

        // Combine the small pieces into the one output canvas
        int xCoord;
        xCoord = 0;
        for (int x = 0; x < rowsCols; x++) {  
            yCoord = 0;
            for (int y = 0; y < rowsCols; y++) {
                combineIntoCanvas(o2, canvas, xCoord, yCoord, fileList);
                yCoord -= chunkWidth;
            }
            xCoord += chunkHeight;
        }

        //Save the bitmap to the file
        rotatedBitmap.compress(Bitmap.CompressFormat.JPEG, 90,
                new FileOutputStream(file, false));
        rotatedBitmap.recycle();
        Log.add("combined in " + (System.currentTimeMillis() - time));
    }

    private static void combineIntoCanvas(BitmapFactory.Options o2,
            Canvas canvas, int xCoord, int yCoord, List<File> fileList)
            throws FileNotFoundException {
        File file = fileList.get(0);
        Bitmap bitmap = BitmapFactory.decodeStream(new FileInputStream(file),
                null, o2);
        canvas.drawBitmap(bitmap, xCoord, yCoord, null);
        bitmap.recycle();
        file.delete();
        fileList.remove(0);
    }

    private static void split(int chunkHeight, int chunkWidth, int yCoord,
            int x, int xCoord, int y, Bitmap bitmap, Matrix matrix,
            List<File> fileList) throws FileNotFoundException {

        Bitmap pieceOfBitmap = Bitmap.createBitmap(bitmap, xCoord, yCoord,
                chunkWidth, chunkHeight, matrix, true);
        File splitFile = new File(Globals.IMAGE_BASE_GALLERY_FOLDER() + "temp"
                + x + "_" + y + "." + "jpg");
        fileList.add(splitFile);

        pieceOfBitmap.compress(Bitmap.CompressFormat.PNG, 0,
                new FileOutputStream(splitFile, false));
        pieceOfBitmap.recycle();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:34:15.823

当您尝试拍摄从相机拍摄的照片时。照片尺寸太大，如果开始直接播放图像，则会出现 OutOfMemory。所以最好将图像更改为样本大小，然后尝试使用您的代码旋转。尽量控制使用的位图数量。在这里，当您这样做时，优化代码将对您有很大帮助，因为 OutOfMemory 是位图的常见问题。这篇文章的代码将帮助您使用 samplesize 解码图像文件。此[链接](https://stackoverflow.com/questions/11183210/handling-large-bitmap-in-android)可以帮助您

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:55:11.890

对于像我这样的其他人：

您可以让相机执行旋转， [https://stackoverflow.com/a/16010289/755804](https://stackoverflow.com/a/16010289/755804)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:22:01.843

最简单的方法就是使用OpenGL来显示和操作这么大的图像。1\. 纹理内存不包括在应用程序内存限制中 2\. 在所有现代设备上，此过程由 GPU 3 加速。它使许多其他工作变得容易 - 缩放、移动、动画等。

# python - 将补丁应用于 python 库

> ID：12952402
> 
> 赞同：0
> 
> 时间：2012-10-18T10:20:27.730
> 
> 标签：python, patch

我想应用Python 库的作者在他的网站上上传的[补丁。](http://hg.secdev.org/scapy/)有什么方法可以轻松做到这一点，而无需在每条受影响的线路上手动进行？

就像是：

```
$ applyPatch patchFile sourceCodeFile 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:30:26.683

如果您下载原始补丁（例如：[http](http://hg.secdev.org/scapy/raw-rev/7621f33286b9) ://hg.secdev.org/scapy/raw-rev/7621f33286b9 ），您可以使用它们来应用它们`patch`，例如：

```
patch -p1 < 7621f33286b9.patch 
```

您需要确保如果它们接触到相同的线，您会以正确的顺序应用它们；像被子这样的工具可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:36:03.033

首先，通过突触的版本实际上可能不是实际库存储库中的最新版本，因此您可能会发现某些补丁不可用。

如果您想在 3rd 方库上工作，那么通常：

1.  创建您自己的第 3 方源代码控制存储库
2.  克隆（或等效）最新版本
3.  在本地修改和推送（或等效）
4.  将你的补丁与原始分支/其他
5.  如果您有权访问，请发送补丁或推送

# ruby-on-rails - LogEntries 记录的 Heroku 路由器错误 H13

> ID：12952403
> 
> 赞同：4
> 
> 时间：2012-10-18T10:20:32.397
> 
> 标签：ruby-on-rails, heroku

我试图弄清楚我定期从 LogEntries 得到的这些错误是否值得担心。我有一个与 Heroku 上的 Rails API 对话的 iPhone 应用程序。我使用 HireFire 自动增加和减少应用程序所需的测功机和工作人员的数量。

我认为这些错误是由测功机按比例缩小然后调用该测功机并因此导致 H13 错误引起的。如果是这样，有没有办法阻止这种情况？用户请求肯定不会发送到不再存在的测功机吗？

以下是我在上下文中得到的最常见的日志：

**1.**

```
2012-10-18 10:01:15.170 209 <13>1 2012-10-18T10:01:14+00:00 app web.1 - - Started GET "/hirefireapp/xxxxxxxxxxxxxxxx/info" for 23.22.73.241 at Thu Oct 18 03:01:14 -0700 2012
2012-10-18 10:01:15.170 162 <13>1 2012-10-18T10:01:14+00:00 app web.1 - - cache: [GET /hirefireapp/xxxxxxxxxxxxxxxx/info] miss
2012-10-18 10:01:22.147 146 <13>1 2012-10-18T10:01:22+00:00 app web.2 - - Connected to NewRelic Service at collector-2.newrelic.com:80
2012-10-18 10:01:22.308 217 <13>1 2012-10-18T10:01:22+00:00 app web.2 - - ** [NewRelic][10/18/12 03:01:22 -0700 xxxxxxxxxxxxxxxx (2)] INFO : Reporting performance data every 60 seconds.
2012-10-18 10:01:38.118 86 <13>1 2012-10-18T10:01:38+00:00 app web.2 - -
2012-10-18 10:01:38.212 86 <13>1 2012-10-18T10:01:38+00:00 app web.2 - -
2012-10-18 10:01:38.212 154 <13>1 2012-10-18T10:01:38+00:00 app web.2 - - Started GET "/" for 204.93.223.151 at Thu Oct 18 03:01:38 -0700 2012
2012-10-18 10:01:38.212 128 <13>1 2012-10-18T10:01:38+00:00 app web.2 - -   Processing by CmsController#index as */*
2012-10-18 10:01:38.212 148 <13>1 2012-10-18T10:01:38+00:00 app web.2 - - Rendered cms/index.html.erb within layouts/application (4.8ms)
2012-10-18 10:01:41.291 124 <40>1 2012-10-18T10:01:41+00:00 heroku web.2 - - Stopping all processes with SIGTERM
2012-10-18 10:01:42.243 217 <158>1 2012-10-18T10:01:42+00:00 heroku router - - Error H13 (Connection closed without response) -> GET my-api.heroku.com/ dyno=web.2 queue= wait= service= status=503 bytes= 
```

**2.**

```
2012-10-16 17:31:25.184 189 <13>1 2012-10-16T17:31:25+00:00 app web.2 - - ** [NewRelic][10/16/12 10:31:25 -0700 (2)] INFO : Dispatcher: thin
2012-10-16 17:31:25.184 197 <13>1 2012-10-16T17:31:25+00:00 app web.2 - - ** [NewRelic][10/16/12 10:31:25 -0700 (2)] INFO : Application: my-api
2012-10-16 17:31:25.184 220 <13>1 2012-10-16T17:31:25+00:00 app web.2 - - ** [NewRelic][10/16/12 10:31:25 -0700 (2)] INFO : New Relic Ruby Agent 3.3.1 Initialized: pid = 2
2012-10-16 17:31:25.585 265 <13>1 2012-10-16T17:31:25+00:00 app web.2 - - ** [NewRelic][10/16/12 10:31:25 -0700 (2)] INFO : NewRelic::Agent::Samplers::DelayedJobLockSampler sampler not available: No DJ worker present
2012-10-16 17:31:37.068 217 <13>1 2012-10-16T17:31:37+00:00 app web.2 - - ** [NewRelic][10/16/12 10:31:36 -0700 (2)] INFO : Reporting performance data every 60 seconds.
2012-10-16 17:31:39.786 86 <13>1 2012-10-16T17:31:39+00:00 app web.2 - -
2012-10-16 17:31:39.884 86 <13>1 2012-10-16T17:31:39+00:00 app web.2 - -
2012-10-16 17:31:39.884 154 <13>1 2012-10-16T17:31:39+00:00 app web.2 - - Started GET "/" for xxx.xx.xxx.xxx at Tue Oct 16 10:31:39 -0700 2012
2012-10-16 17:31:39.884 128 <13>1 2012-10-16T17:31:39+00:00 app web.2 - -   Processing by CmsController#index as */*
2012-10-16 17:31:39.981 149 <13>1 2012-10-16T17:31:39+00:00 app web.2 - - Rendered cms/index.html.erb within layouts/application (18.1ms)
2012-10-16 17:31:46.082 217 <158>1 2012-10-16T17:31:46+00:00 heroku router - - Error H13 (Connection closed without response) -> GET my-api.heroku.com/ dyno=web.2 queue= wait= service= status=503 bytes= 
```

任何建议将不胜感激！

谢谢皮特

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T12:08:29.257

H13 问题的一个潜在原因是机架密钥空间。Rack 通过使用 HTTP 请求发送非常大的参数密钥来增加对潜在恶意攻击的保护。

Rack Utils 对 65536 的密钥空间设置了一个限制，如果您发送带有大参数集的 HTTP 请求，这可能不够大。

您可以通过将以下内容添加到 Rails 初始化程序文件来更改此限制：

```
if Rack::Utils.respond_to?("key_space_limit=")
  Rack::Utils.key_space_limit = 262144
end 
```

我发现这个数字（4 倍标准）足够大，可以为我解决 H13 问题，但您可能需要根据自己的个人要求测试不同的设置。

这可能不是您的特定 H13 问题的原因，但值得检查作为可能的解决方案。

# jsf - 包含表单的复合组件的问题

> ID：12952404
> 
> 赞同：2
> 
> 时间：2012-10-18T10:20:40.603
> 
> 标签：jsf, jsf-2, mojarra

我正在编写一个复合组件，例如复杂的输入文本，它需要一个完整的表单（它将显示一个搜索表单和一个结果列表，供用户选择其中一个）。

```
<composite:implementation>
    <div id="#{cc.clientId}" class="#{cc.attrs.styleClass}">
        <h:inputText id="txtIdentificador" ...>
        <h:graphicImage id="imgIdentificador" ...>
        <h:inputText id="txtDescripcion" ...>
        <h:form id="formF2ItemWidget">
        ...
        </h:form>
    </div>
</composite:implementation> 
```

从逻辑上讲，我想使用其他形式，但是这样做时遇到了问题。例如

```
<h:form id="formOuter" >
    <h:outputLabel value="Texto1" />
    <trkal:itemwidget id="txtTexto1">
    ...
</h:form> 
```

生成的 HTML 没有内部表单（formF2ItemWidget），它只有 id=formOuter 的表单。但在下面的例子中：

```
<h:form id="formOuter" >
    <h:outputLabel value="Texto1" />
    <trkal:itemwidget id="txtTexto1">
    <h:outputLabel value="Texto2" />
    <trkal:itemwidget id="txtTexto2">
    ...
</h:form> 
```

txtTexto1 的表单不存在，但 txtTexto2 的表单存在。为什么？

如何编写包含表单的复合组件而不会出现此问题？

我正在使用 mojarra 2.1.7、Java 6.0 和 Tomcat 7.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T11:19:11.013

嵌套`<form>`元素在 HTML 中是[非法的。](http://validator.w3.org)由于 JSF 只是一个 HTML 代码生成器，因此您不能在这里用 JSF 做任何魔术。

只是**不要**`<h:form>`在 JSF 中嵌套组件。从复合材料中删除它`<h:form>`并寻找处理“子表单”的替代方法。

# java - 遍历文件和目录以加载 SWT 树

> ID：12952405
> 
> 赞同：1
> 
> 时间：2012-10-18T10:20:43.050
> 
> 标签：java, swt

我制作了一个 Tree 对象，该对象加载了目录中的文件。preVisistDirectory 迭代得更快，然后 visitFile 可以跟随填充树。我尝试构建一个变量，该变量在读取文件并创建树项以读取下一个目录后调用，但没有工作。任何人？

```
public static void main(String[] args) {
    // getfiles(filepath,"*html");
    System.out.println("Help -> setHelp()  -> Path =  " + filepath);
    Display display = new Display();
    Shell shell = new Shell(display, SWT.CLOSE | SWT.RESIZE);
    shell.setText("Tree Object. ");
    shell.setSize(400, 300);

    final Tree tree = new Tree(shell, SWT.BORDER | SWT.SINGLE);
    tree.setSize(290, 290);
    try {
        Files.walkFileTree(filepath, new SimpleFileVisitor<Path>() {
            TreeItem parent, child;
            int baselevel = filepath.getNameCount();

            public FileVisitResult preVisitDirectory(Path dir,
                    BasicFileAttributes attrs) {
                System.out.println("Help -> FileVisitResults -> DirectoryName =  " + dir.getFileName().toString());
                System.out.println("Help -> FileVisitResults -> Find files and Directories :  " + dir.getName(0));
                System.out.println("Help -> FileVisitResults -> nameCount       :  " + (dir.getNameCount() - baselevel));
                System.out.println("Help -> FileVisitResults -> baselevel =       :  " + (dir.getNameCount() - baselevel));
                if (dir.getNameCount() - baselevel + 1 > 1) {
                    if (dir.getNameCount() - baselevel == 1) {
                        parent = null;
                    }
                    if (parent != null) {
                        child = new TreeItem(parent, 0);
                        child.setText(dir.getFileName().toString());
                        parent = child;
                    }
                    if (parent == null) {
                        child = new TreeItem(tree, 0);
                        child.setText(dir.getFileName().toString());
                        parent = child;
                    }
                }
                return FileVisitResult.CONTINUE;
            }

            public FileVisitResult visitFile(Path dir,
                    BasicFileAttributes attrs) {
                System.out.println("Help -> FileVisitResults -> FileName =  " + dir);
                if (dir.getNameCount() - baselevel + 1 > 1) {
                    if (dir.getNameCount() - baselevel == 1) {
                        parent = null;
                    }
                    if (parent != null) {
                        child = new TreeItem(parent, 0);
                        child.setText(dir.getFileName().toString());
                    }
                    if (parent == null) {
                        child = new TreeItem(tree, 0);
                        child.setText(dir.getFileName().toString());
                    }
                }
                return FileVisitResult.CONTINUE;
            }
        });
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    shell.open();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

回答：
没有例外，但是通过目录循环更快，然后文件可以添加到目录中。因此，当在 2 个文件之后要由 vistitFile 添加 5 个文件时，preDirectoryVisit 会将父目录设置为下一个目录，因此 visitFile 会跳过剩余的文件。

答案 2：
树使用 preVisitDirectory 方法加载目录，该方法在目录上迭代得更快，然后 visitFile 对文件进行迭代。因为找到的目录存储在父变量中，该变量用作父树项以将文件添加为子树项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:26:42.283

您的`parent`and`child`节点的概念并没有真正奏效。我设法使用两个`HashMap`s 让它工作。一个用于目录，一个用于文件。这样，您可以轻松找到`parent`当前文件/目录的：

```
private static Map<String, TreeItem> nodes = new HashMap<>();
private static Map<TreeItem, List<String>> children = new HashMap<>();

public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final Tree tree = new Tree(shell, SWT.BORDER);

    Path path = FileSystems.getDefault().getPath("/home/baz/TestFolder/", new String[] {});
    try {
        Files.walkFileTree(path, new SimpleFileVisitor<Path>() {
            @Override
            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs)
            {
                TreeItem parent = nodes.get(dir.getParent().toString());
                TreeItem item = null;
                if(parent == null)
                {
                    item = new TreeItem(tree, SWT.NONE);
                }
                else
                {
                    item = new TreeItem(parent, SWT.NONE);
                }
                item.setText(dir.getFileName().toString());

                nodes.put(dir.toString(), item);

                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult visitFile(Path dir, BasicFileAttributes attrs)
            {
                TreeItem parent = nodes.get(dir.getParent().toString());

                if(children.get(parent) == null)
                    children.put(parent, new ArrayList<String>());

                children.get(parent).add(dir.getFileName().toString());

                return FileVisitResult.CONTINUE;
            }
        });
    } catch (IOException e) {
        e.printStackTrace();
    }

    for(TreeItem parent : children.keySet())
    {
        for(String child : children.get(parent))
        {
            TreeItem item = new TreeItem(parent, SWT.NONE);
            item.setText(child);
        }

    }

    tree.layout();
    nodes = null;
    children = null;

    shell.setSize(400,400);
    shell.open();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }

    display.dispose();
} 
```

正如您[在此处](http://docs.oracle.com/javase/tutorial/essential/io/walk.html#order)所读到的，不能保证遍历的顺序与您的文件管理器中的相同。这就是为什么我在将目录的子项添加到树之前收集它们的原因。目录虽然不需要排序。

> 文件树首先遍历深度，但您不能对访问子目录的迭代顺序做出任何假设。

这是树的外观：

![在此处输入图像描述](../Images/da5cf3e773acbaef5e0683d50bdb0714.png)

这是文件夹结构：

![在此处输入图像描述](../Images/a608b237b9c454fa028365e71e130b84.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:26:51.343

在创建树项目时通过向树项目添加数据来完成代码。在树中单击时，数据用于在浏览器面板中打开文件。

```
 package object;
    import java.io.IOException;
    import java.io.InputStream;
    import java.io.InputStreamReader;
    import java.net.MalformedURLException;
    import java.net.URI;
    import java.net.URL;
    import java.nio.file.FileSystems;
    import java.nio.file.FileVisitResult;
    import java.nio.file.Files;
    import java.nio.file.Path;
    import java.nio.file.SimpleFileVisitor;
    import java.nio.file.attribute.BasicFileAttributes;
    import java.util.ArrayList;
    import java.util.HashMap;
    import java.util.List;
    import java.util.Map;
    import org.eclipse.swt.SWT;
    import org.eclipse.swt.browser.Browser;
    import org.eclipse.swt.events.SelectionAdapter;
    import org.eclipse.swt.events.SelectionEvent;
    import org.eclipse.swt.layout.GridData;
    import org.eclipse.swt.layout.GridLayout;
    import org.eclipse.swt.widgets.Display;
    import org.eclipse.swt.widgets.Event;
    import org.eclipse.swt.widgets.Listener;
    import org.eclipse.swt.widgets.Shell;
    import org.eclipse.swt.widgets.ToolBar;
    import org.eclipse.swt.widgets.ToolItem;
    import org.eclipse.swt.widgets.Tree;
    import org.eclipse.swt.widgets.TreeItem;

    public class Helpsystem {
    private static Tree tree;
    private static Browser browser; 
    private static Map<String, TreeItem> nodes = new HashMap<>();
    private static Map<TreeItem, List<Path>> children = new HashMap<>();
    private static String lang="gb";
    private static GridData griddatatree,griddatabrowser,griddatatoolbar;
    static Path path = FileSystems.getDefault().getPath("html/Help/"+lang+"/",new String[] {});

    public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    GridLayout gridlayout = new GridLayout(5,true);
        shell.setLayout(gridlayout);
    ToolBar toolbar = new ToolBar(shell, SWT.BORDER);
            toolbar.setSize(200, 30);

     griddatatoolbar = new GridData(SWT.FILL,SWT.FILL,true,false);
           griddatatoolbar.horizontalSpan=5;

    toolbar.setLayoutData(griddatatoolbar);
    ToolItem home = new ToolItem(toolbar,SWT.PUSH);
            home.setText("Home.");
            home.setToolTipText("Return to index.");
            home.addSelectionListener(new SelectionAdapter(){
                public void widgetSelected(SelectionEvent e){
                    browser.setText("loadPage(indexUrl.toURL())");
                            }});    
    ToolItem back = new ToolItem(toolbar,SWT.PUSH);
            back.setText("Back.");
            back.setEnabled(true);
            back.setToolTipText("Previous page.");
            back.addSelectionListener(new SelectionAdapter(){
                public void widgetSelected(SelectionEvent e){
                    browser.back();         
                            }});    

        tree = new Tree(shell, SWT.BORDER);
        griddatatree = new GridData(SWT.FILL,SWT.FILL,true,true);
                     griddatatree.horizontalSpan=2;
                     tree.setLayoutData(griddatatree);

        tree.addListener(SWT.Selection,new Listener(){
           public void handleEvent(Event e){
                      for(TreeItem selection:tree.getSelection()){ 
                               if(selection.getData()==null){return;};
                     try {
                             URL url=  ((URI) selection.getData()).toURL();
                             browser.setText(loadPage(url));

                      }  catch (MalformedURLException e1) { e1.printStackTrace(); }
                   }
                }
           });           

        browser = new Browser(shell, 0 );
        griddatabrowser = new GridData(SWT.FILL,SWT.FILL,true,true);
                griddatabrowser.horizontalSpan=3;
        browser.setLayoutData(griddatabrowser);

    try {
        Files.walkFileTree(path, new SimpleFileVisitor<Path>() {
            @Override
            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs)
            {
                TreeItem parent = nodes.get(dir.getParent().toString());
                TreeItem item = null;
                if(parent == null)
                {
                    item = new TreeItem(tree, SWT.NONE);
                }
                else
                {
                    item = new TreeItem(parent, SWT.NONE);
                }
                item.setText(dir.getFileName().toString());

                nodes.put(dir.toString(), item);

                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult visitFile(Path dir, BasicFileAttributes attrs)
            {
                TreeItem parent = nodes.get(dir.getParent().toString());

                if(children.get(parent) == null)
                    children.put(parent, new ArrayList<Path>());

                children.get(parent).add(dir);

                return FileVisitResult.CONTINUE;
            }
        });
    } catch (IOException e) {
        e.printStackTrace();
    }

    for(TreeItem parent : children.keySet())
    {
        for(Path child : children.get(parent))
        {
            TreeItem item = new TreeItem(parent, SWT.NONE);
            item.setText(child.getFileName().toString());
            item.setData(child.toUri());

        }

    }

    nodes = null;
    children = null;
    shell.setSize(800,600);
    shell.open();

    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }

    display.dispose();
    }
    protected static String loadPage(URL helppageUrl) {
        String str = null;
       try {
          InputStream is = helppageUrl.openStream();
          InputStreamReader r = new InputStreamReader(is);
          char[] buffer = new char[32];
          StringBuffer sb = new StringBuffer();
          int count;
          while ((count = r.read(buffer, 0, buffer.length)) > -1) {
            sb.append(buffer, 0, count);
          }
          str = sb.toString();
          is.close();
          r.close();
        } catch (IOException ex) {
          str = "Failed to load text";
        }
         return str;
    }
     } 
```

# matlab - 仅搜索矩阵的第一个（一对）特征值和特征向量 - MATLAB

> ID：12952406
> 
> 赞同：3
> 
> 时间：2012-10-18T10:20:47.703
> 
> 标签：matlab, eigenvector, eigenvalue

我想通过有限差分法解决 PDE 的特征值问题。因此我的问题被简化为矩阵特征值问题。问题是这个矩阵的大小会非常大，如果我使用这个函数`eig`，它会搜索所有的特征值和特征向量，这在我的情况下是浪费时间。

找到前k个特征值后是否有可能使特征值算法停止？（其中 k 是一个小的正整数）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T10:22:54.623

是[`eigs`](http://www.mathworks.de/de/help/matlab/ref/eigs.html)的，用于返回 K 个最大或最小的特征值。

示例：`eigs(A,[],K)`将返回矩阵的`K`最大特征向量`A`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:23:04.270

您正在寻找[`eigs`](http://www.mathworks.se/help/matlab/ref/eigs.html). 来自`help eigs`：

> 找到一个矩阵的几个特征值和特征向量

# c# - 迭代我的谷歌驱动器上的文件夹

> ID：12952410
> 
> 赞同：0
> 
> 时间：2012-10-18T10:20:54.487
> 
> 标签：c#

我想在身份验证文件夹查询行发送错误后从 google-drive 迭代文件夹。下面的代码显示身份验证过程，然后 itretating 文件夹但出现错误，请帮助我，等待回复。我不想在编码中使用用户凭据，我想使用客户端 ID 和客户端密码，以便任何人都可以登录到 Google 驱动器并迭代文件夹。

* * *

## “请求执行失败：[https](https://docs.google.com/feeds/default/private/full/-/folder) ://docs.google.com/feeds/default/private/full/-/folder ”

```
static void Main(string[] args)
        {
            String CLIENT_ID = "74138000159.com";
            String CLIENT_SECRET = "8AE3oJuZomO";
            var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description, CLIENT_ID, CLIENT_SECRET);
            var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);

            var service = new DriveService(auth);

            DocumentsService service1 = new DocumentsService("MyDocumentsListIntegration-v1");

            // Instantiate a FolderQuery object to retrieve folders.
            FolderQuery query = new FolderQuery();

            // Make a request to the API and get all documents.
           DocumentsFeed feed = service1.Query(query);

            // Iterate through all of the documents returned
            foreach (DocumentEntry entry in feed.Entries)
            {
                // Print the title of this document to the screen
                Console.WriteLine(entry.Title.Text);
            }

        }
          private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
        {

            // Get the auth URL:
            IAuthorizationState state = new AuthorizationState(new[] { DriveService.Scopes.Drive.GetStringValue() });
            state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
            Uri authUri = arg.RequestUserAuthorization(state);

            // Request authorization from the user (by opening a browser window):
            Process.Start(authUri.ToString());
            Console.Write("  Authorization Code: ");
            string authCode = Console.ReadLine();
            Console.WriteLine();

            // Retrieve the access token by using the authorization code:
            return arg.ProcessUserAuthorization(authCode, state);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:26:27.277

你这样做是完全错误的。您必须在[https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_oauth_20](https://developers.google.com/google-apps/documents-list/#authorizing_requests_with_oauth_20)中添加更多代码， 您缺少的是添加*service1.RequestFactory*设置。此外，您不需要创建*服务*对象。

另请注意，您使用的是 Google Documents List API 3.0 版，该版本已于 2012 年 9 月 14 日正式弃用。

# php - 如何在 Zend Framework 中集成 easybib 表单装饰器？

> ID：12952413
> 
> 赞同：0
> 
> 时间：2012-10-18T10:21:01.837
> 
> 标签：php, zend-framework, decorator, easyb

我是 Zend 框架的新手。我想学习**装饰器和引导**程序。

我已经从**https://github.com/easybib/EasyBib_Form_Decorator**链接下载了 zip 文件。我想在我的**zend项目中集成****easybib表单装饰器**，但我不知道该怎么做？

 **请告诉我整合的步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:26:51.250

下载它，将 EasyBib 文件夹解压缩到项目中的 \library\EasyBib。现在将其添加到 application.ini 中的 Autoloader：

```
autoloadernamespaces.3 = "EasyBib_" 
```

在此之后，您可以将它与 Zend_Form 一起使用，例如：

```
Class My_Form extends EasyBib_Form {} 
```

请参阅下载包中的示例！**

# jquery - Jquery 在 div 之间切换

> ID：12952414
> 
> 赞同：0
> 
> 时间：2012-10-18T10:21:04.270
> 
> 标签：jquery, html

嗨，我目前正在尝试使用 JQuery，我的目标是有一些 div 可以在使用箭头之间切换。我有一个 JSFiddle，它显示了我到目前为止所拥有的，但我认为有一种更简单的方法可以实现我想要实现的目标。

当我按下箭头而不是使用显示和隐藏时，我希望能够继续切换 div。

[http://jsfiddle.net/gutigrewal90/ZW3kY/](http://jsfiddle.net/gutigrewal90/ZW3kY/)

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:38:51.373

这是一个更新的[jsfiddle](http://jsfiddle.net/yzS36/)`div` ，您现在可以在其中向 DOM添加任意数量的 s。解决方案是寻找`next`或`first sibling`当前可见元素。

```
currentElem.hide();
if (currentElem.next().length > 0) {
  currentElem = currentElem.next().show();
} else {
  currentElem = currentElem.siblings().first().show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:26:11.263

以下是您修改后的小提琴：

[http://jsfiddle.net/hz2nT/1/](http://jsfiddle.net/hz2nT/1/)

问候，伊山

# java - 用于存储 1970-01-01 之前的日期的数据类型

> ID：12952419
> 
> 赞同：-2
> 
> 时间：2012-10-18T10:21:19.537
> 
> 标签：java, date, jodatime

> **可能重复：**
> [1970 年 1 月 1 日之前的日期](https://stackoverflow.com/questions/3706937/dates-before-january-1st-1970)

我正在寻找一种标准解决方案来存储值可能早于 1970-01-01 的日期。赞赏基于 Joda-time 的解决方案。

例如，我想存储专辑“弗兰克·辛纳屈之声”的发行日期，即 1946 年 3 月 4 日。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:27:09.133

```
DateTime dt = new DateTime(1946, 3, 4, 0, 0); 
```

然后调用`dt.getMillis()`只会产生一个负数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:28:02.163

> 我想存储专辑“弗兰克·辛纳屈之声”的发行日期，即 1946 年 3 月 4 日。

```
LocalDate date = new LocalDate(1948, 3, 4);
System.out.println(date); 
```

印刷

```
1948-03-04 
```

LocalDate 可用于公元 1 年或公元 1 年以来的任何年份，默认采用公历。

# jquery - 如何有效地将多个谷歌地图图标添加到大型 JSON 标记列表中？

> ID：12952424
> 
> 赞同：1
> 
> 时间：2012-10-18T10:21:30.740
> 
> 标签：jquery, google-maps-api-3, google-maps-markers, jquery-gmap3

我正在使用 Gmap3（Google Maps API v3 的 jquery 包装器），但这个问题应该适用于任何实现。

我的地图有几千个标记（通过 PHP 写入 JSON 变量）。对于所有这些，只有 5 个可能的图标。我正在寻找的是一种引用图标的方法，而不是每次都将它们完全包含在 JSON 中，因为它们只有 5 个，效率低得离谱。

所以我想在JS中声明图标，并在JSON中添加一个简单的标识符。

这样做的正确方法是什么？一个循环？

```
// JSON generated by PHP or whatever
var myMarkers = [
    { lat:12.34567, lng:123.4567, data:"Blah blah", options: { icon: img1 } },
    { lat:21.23456, lng:123.4567, data:"Blah blah", options: { icon: img2 } },
    { lat:32.12345, lng:123.4567, data:"Blah blah", options: { icon: img3 } },
    { lat:43.21234, lng:123.4567, data:"Blah blah", options: { icon: img1 } },
    { lat:54.32123, lng:123.4567, data:"Blah blah", options: { icon: img2 } },
    { lat:65.43212, lng:123.4567, data:"Blah blah", options: { icon: img3 } },
    { lat:76.54321, lng:123.4567, data:"Blah blah", options: { icon: img1 } }
    // ... add 2000 more records here ...
    ];

var img1 = new google.maps.MarkerImage('http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_red.png');
var img2 = new google.maps.MarkerImage('http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_green.png');
var img3 = new google.maps.MarkerImage('http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_blue.png');
var shadow = new google.maps.MarkerImage('http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_shadow.png');

$('#map_canvas').gmap3({
        action: 'init'
    },{
        action: 'addMarkers',
        markers: myMarkers,
        marker: {
            options:{
                // icon: markers.data.options.icon, or nothing, or what??
                shadow: myShadow
            }
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:01:14.730

我会有一组标记图像。您的 JSON 结构应该只需要引用数组的索引。或者使用对象作为哈希映射。

```
var myMarkers = [
    { lat:12.34567, lng:123.4567, data:"Blah blah", options: { icon: 0} },
    { lat:21.23456, lng:123.4567, data:"Blah blah", options: { icon: 1} },
...
];

var imgs = [
    new google.maps.MarkerImage('http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_red.png'),
    new google.maps.MarkerImage('http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_green.png'),
    new google.maps.MarkerImage('http://maps.gstatic.com/mapfiles/ridefinder-images/mm_20_blue.png')
]; 
```

然后循环获取 JSON 并更新它。

```
for (var i = 0, len = myMarkers.length; i < len; i++) {
    myMarkers[i].options.icon = imgs[myMarkers[i].options.icon];
} 
```

那么我假设您只需要指定阴影？（从未使用过gmap3）

```
 marker: {
            options:{
                shadow: myShadow
            }
        } 
```

# xml - XSL - 使用日期时间函数

> ID：12952425
> 
> 赞同：1
> 
> 时间：2012-10-18T10:21:33.380
> 
> 标签：xml, xslt

我有一个正在创建的 XSL 文档，但是当我尝试使用此处指定的 DateTime 函数时：http: [//www.w3schools.com/xpath/xpath_functions.asp](http://www.w3schools.com/xpath/xpath_functions.asp)

比如`dateTime`或者`year-from-dateTime`它说它们是无法识别的功能？

以下是我使用的命名空间：

```
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xheader="http://schemas.microsoft.com/dynamics/2008/01/documents/Message"
    xmlns:xsales="http://schemas.microsoft.com/dynamics/2008/01/documents/SalesInvoice"
    exclude-result-prefixes="xheader xsales"
> 
```

我目前正在 Visual Studio 中创建 XSL，是否有帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:32:52.723

如果您想使用 XSLT 和 XPath 2.0 功能（如这些功能），则需要使用 XSLT 2.0 处理器（如 Saxon 9 或 AltovaXML 或 XmlPrime）。Microsoft 的 XSLT 处理器（如从 MSXML 3 到 6 的各种 MSXML 版本以及 .NET 中的 XslCompiledTransform 和 XslTransform）仅支持 XSLT 1.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:25:41.223

`dateTime`和`year-from-dateTime`函数在 XSLT 2.0 中。您正在使用`version="1.0"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:30:39.337

看起来您使用的是 XSLT 1.0，但日期函数只能在 XSLT 2.0 中直接使用。不幸的是，从 VS 运行 XSLT 2.0 并不是很简单，但请参阅[链接](https://stackoverflow.com/questions/11205268/how-to-use-xslt-2-0-in-visual-studio-2010)以获取有关将其与 VS 集成的一些信息。

# android - 使用 FLAG_ACTIVITY_NO_HISTORY 和 startActivityForResult 在安卓应用中导航

> ID：12952426
> 
> 赞同：5
> 
> 时间：2012-10-18T10:21:33.940
> 
> 标签：android

我在使用`FLAG_ACTIVITY_NO_HISTORY`和的 android 应用程序中导航时遇到问题`startActivityForResult`。

这是一个例子：

我有页面 A 和页面 B。我使用`FLAG_ACTIVITY_NO_HISTORY`. 然后我和`startActivityForResult`.

问题是，现在我回到页面 A，但我想回到页面 B。

当我删除`FLAG_ACTIVITY_NO_HISTORY`我不想拥有的历史记录中的页面 B 时。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:53:09.830

使用历史记录，但是当您回到页面 B 时，只需调用 this.finish()。本次活动即将结束。您可能会看到您的页面 B 一秒钟（可能取决于您的代码，以进行测试）。

希望这个解决方案可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T13:10:37.833

你从

**1.**页面 A -> 带标志的页面 B`FLAG_ACTIVITY_NO_HISTORY`

**2.**您从页面 B 开始另一个活动`startActivityForResult`

现在，当您回来时，没有找到 Page B 的 bcoz of the flag `FLAG_ACTIVITY_NO_HISTORY`。

`FLAG_ACTIVITY_NO_HISTORY`现在从活动中删除标志，当您在活动中`Page B`获得回调时。`onActivityResult()``Page B``finish()``page B`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:16:27.713

这真的取决于你的代码。

希望你尝试过这种方式。

Intent intent = new Intent(this, SomeOtherClass.class);

意图.setFlags（意图.FLAG_ACTIVITY_NO_HISTORY）；// 不要将此意图保留在历史记录中。

开始活动（意图）；

试试看或上传您的代码，以便我可以详细查看。

# linux - bash 测试范围内的数字（使用浮点数）

> ID：12952427
> 
> 赞同：0
> 
> 时间：2012-10-18T10:21:34.877
> 
> 标签：linux, bash, shell

问题出在这一行

```
elif [  "$(echo $a '>' $v06 | bc -l)"  -eq 1  &&   "$(echo $a '<' $v08 | bc -l)" -eq 1  ];then 
```

如何测试数字是否在范围内？我知道可能有其他解决方案，但我想用 bc 以这种方式解决......

```
a=0.1
v06=0.6
v08=0.8

if [ "$(echo $a '<' $v06 | bc -l)" -eq 1 ];then
    echo " <0.6"
elif [  "$(echo $a '>' $v06 | bc -l)"  -eq 1  &&   "$(echo $a '<' $v08 | bc -l)" -eq 1  ];then
    echo " <0.6 >0.8"
else
    echo ">1.5"
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:14:26.330

实际上，唯一错误的是你在`&&`里面使用`[ ]`它不起作用。

只能`[[ ]]`包含`&&`多个测试条件。

你可以把`&&`外面的，像这样

```
elif [ "$(echo $a '>' $v06 | bc -l)" -eq 1 ] && [ "$(echo $a '<' $v08 | bc -l)" -eq 1 ]; then 
```

* * *

甚至*更好*，

```
elif [ $(echo "($a > $v06) && ($a < $v08)" | bc -l) -eq 1 ]; then 
```

因为`bc`实际上支持`(num1 > num2) && (num1 < num3)`符号

p / s：您不需要引号，`$( )`因为您只是期望`0`或`1`作为返回值

p/s2：`$( )`即使引号括在引号中，您也可以在其中添加引号，例如

```
"$(echo "1 + 2" | bc -l )" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:26:17.840

你可以去掉“0”。并使用 -gt 和 -lt 运算符：

```
v06="$(echo $v06 | sed 's/0.//')"
v08="$(echo $v08 | sed 's/0.//')"

elif [  $a -gt $v06 -a $a -lt $v08 ];then 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:32:16.420

如果你真的想使用 bc：

```
test1=$(bc -l <<< "${a} < ${v06}")
test2=$(bc -l <<< "${a} > ${v06}")
test3=$(bc -l <<< "${a} < ${v08}")
if [[ ${test1} -eq 1 ]]; then
   blabla
elif [[ ${test1} -eq 1 && ${test2} -eq 1 ]]; then 
   blabla
fi 
```

我建议在变量周围使用大括号（这样您就可以确定 06 和 08 不会附加到`$v`），如果您使用诸如`&&`.

# php - 如何在 sql 内连接中转换为 yii 活动记录？

> ID：12952428
> 
> 赞同：0
> 
> 时间：2012-10-18T10:21:40.770
> 
> 标签：php, oracle, yii

如何将此查询转换为 Yii 活动记录？

```
SELECT a.USERID, a.ADID, a.PAGEVIEW,a.EXPIRYDATE,a.ADTITLE,a.ADDESC
        from CKAD a INNER JOIN 
        (
            SELECT  b.USERID, max(b.PAGEVIEW) as PAGEVIEW
            FROM CKAD b WHERE b.DISPPUBLISHDATE >= current_date - 3
            AND b.EXPIRYDATE >= current_date and b.STATUS = 1 AND b.USERID IS NOT NULL
            GROUP BY b.USERID
        ) b
        ON (a.USERID = b.USERID and a.PAGEVIEW = b.PAGEVIEW)
        order by a.PAGEVIEW DESC"; 
```

# trac - 安装 Trac 以持续运行

> ID：12952432
> 
> 赞同：1
> 
> 时间：2012-10-18T10:22:08.820
> 
> 标签：trac

我最近将 Trac 添加到我的服务器以使用我的 Git 存储库。

我可以让它一切正常 `tracd --port 8000 /path/to/myproject`

但是一旦我关闭我的 Putty，站点就会离线，让 Trac 继续运行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:26:27.113

你有没有尝试过

```
nohup tracd --port 8000 /path/to/myproject & 
```

?

见[nohup](http://en.wikipedia.org/wiki/Nohup)

然后，您可以通过运行多个 tracd 实例来一次运行多个项目

```
nohup tracd --port 8000 /path/to/myproject1 &
nohup tracd --port 8001 /path/to/myproject2 &
nohup tracd --port 8002 /path/to/myproject3 & 
```

对于处理多个项目的更正确答案，我将您重定向到文档:)： [TracMultipleProjects/SingleEnvironment](http://trac.edgewall.org/wiki/TracMultipleProjects/SingleEnvironment)

[TracMultipleProjects/MultipleEnvironments](http://trac.edgewall.org/wiki/TracMultipleProjects/MultipleEnvironments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T14:56:29.843

如果性能和为许多用户提供服务对您很重要，那么使用另一个 Web 服务器运行[Trac](http://trac.edgewall.org/wiki/TracInstall#RunningTraconaWebServer)是很常见的，如果不是标准的话。那么 wsgi 通常被推荐为当前的最佳实践。但是 Apache 或其他成熟的网络服务器对于私人/小型工作组使用来说可能是过度的，如果你没有一个已经为其他目的运行的话。tracd 仍然可以为多达 5 个并发用户提供服务，并且您可以从该解决方案相当小的占用空间中受益。

但是 OP 的问题源于未能为该任务部署 tracd。我现在将跟进这种服务 Trac 的方式：

从启动控制台分离运行 tracd的*最佳方式*是它的守护程序模式：

```
./bin/tracd -p 8000 -d /data/trac/sandbox_1.0 
```

有关更多有价值的选项，请参阅随附的帮助：

```
>$ tracd --help
Usage: tracd [options] [projenv] ...

Options:
...
  -p PORT, --port=PORT  the port number to bind to
  -r, --auto-reload     restart automatically when sources are modified
  -s, --single-env      only serve a single project without the project list
  -d, --daemonize       run in the background as a daemon
  -e PARENTDIR, --env-parent-dir=PARENTDIR
... 
```

注意 1：请在 trac.egdewall.org 的 wiki 文档中*查看更多* [关于运行和相关页面的信息。`tracd`](http://trac.edgewall.org/wiki/TracStandalone)

注意 2：父目录选项允许检测任意数量的项目 Trac 环境文件夹并从 tracd 的单个实例运行。所有人都必须共享一个公共路径，这意味着：将它们全部放入同一个文件夹（您的父目录）。

注意3：如果不使用`-s`开关，tracd会显示一个项目索引页面。关于自定义该页面的提示也是trac.edgewall.org 上 Trac 项目[的优秀 wiki 文档的一部分。](http://trac.edgewall.org/wiki/TracInterfaceCustomization#ProjectList)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-07T06:59:22.357

使用 .检查`tracd`选项`tracd --help`。在那里你会发现一行说明：

`-d, --daemonize run in the background as a daemon`

瞧。

# android - 取消选中自定义列表视图中的复选框

> ID：12952433
> 
> 赞同：0
> 
> 时间：2012-10-18T10:22:14.703
> 
> 标签：android, android-listview, android-checkbox

我想在单击按钮时取消选中列表视图中的所有复选框。这是我的适配器类。它未选中所有复选框，但为此我必须滚动列表视图。当我滚动浏览它时，它根据可见的行取消选中。

```
public class ExpenseCalculatorAdapter extends ArrayAdapter<String>{
    private Activity context;
    private static LayoutInflater inflator = null;
    private  ArrayList<String> data;
    private  ArrayList<String> values;
    DataBaseUtil dbUtils;

    public ExpenseCalculatorAdapter(Activity context, ArrayList<String> data){
        super(context,R.layout.expenserow, data);
        this.context = context;
        this.data = data;
        dbUtils=new DataBaseUtil(context);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        String row=data.get(position);
        String date;
        String type;
        String cost;
        final String id;
        /*  result.add(c.getString(iRowid)+"&"+c.getString(iDate)+"~"+c.getString(iCost)+"#"+c.getString(iType)+"*");*/
        id=row.substring(0, row.indexOf("&"));
        date=row.substring(row.indexOf("&")+1,row.indexOf("~"));
        cost=row.substring(row.indexOf("~")+1,row.indexOf("#"));
        type=row.substring(row.indexOf("#")+1,row.indexOf("*"));

        if(convertView==null)
        {
            ViewHolder holder = new ViewHolder();
            inflator = context.getLayoutInflater();
            convertView = inflator.inflate(R.layout.expenserow, null);

            holder.togCheck=(CheckBox)convertView.findViewById(R.id.check);
            holder.textDate = (TextView) convertView.findViewById(R.id.txtrowDate);
            holder.textType = (TextView) convertView.findViewById(R.id.txtrowType);
            holder.textCost = (TextView) convertView.findViewById(R.id.txtrowCost);

            holder.togCheck.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    // TODO Auto-generated method stub
                    Intent intent=new Intent();
                    intent.setAction("clicked");
                    if(buttonView.isChecked())
                    {
                        try
                        {
                            dbUtils.open();
                            dbUtils.setVisibility(id);
                        }catch(SQLException sqx)
                        {
                            sqx.printStackTrace();
                        }
                        catch(Exception ex)
                        {
                            ex.printStackTrace();
                        }
                        finally
                        {
                            dbUtils.close();
                        }
                        intent.putExtra("isClicked","yes");
                        intent.putExtra("ID",""+id);
                        context.sendBroadcast(intent);
                    }
                    else
                    {
                        try
                        {
                            dbUtils.open();
                            dbUtils.setInVisibility(id);
                        }catch(SQLException sqx)
                        {
                            sqx.printStackTrace();
                        }
                        catch(Exception ex)
                        {
                            ex.printStackTrace();
                        }
                        finally
                        {
                            dbUtils.close();
                        }
                        intent.putExtra("isClicked","no");
                        intent.putExtra("ID",""+id);
                        context.sendBroadcast(intent);

                    }
                }
            });

            convertView.setTag(holder);

        }

        ViewHolder hold = (ViewHolder) convertView.getTag();

        //setting Data to List
        hold.textDate.setText(date);
        hold.textType.setText(type);
        hold.textCost.setText(cost);

        if(CheckReceiver.checkAll)
        {
            hold.togCheck.setChecked(true);

        }
        if(!CheckReceiver.checkAll)
        {
            hold.togCheck.setChecked(false);
        }

        return convertView;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();

    static class ViewHolder{

        public CheckBox togCheck;
        public TextView textDate;
        public TextView textType;
        public TextView textCost;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:06:59.483

由于 Listview 回收视图，仅使用 BroadCastReciver 是不可能做到这一点的。这真是个坏主意。我使用数据库和 BroadCastReciver 完成了这项工作。

```
holder.togCheck.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    /*Intent intent=new Intent();
                    intent.setAction("clicked")*/;
                    if(holder.togCheck.isChecked())
                    {
                        //holder.togCheck.setBackgroundResource(R.drawable.check);
                        try
                        {
                            dbUtils.open();
                            dbUtils.setVisibility(id);
                        //  Toast.makeText(context, "Checked ", Toast.LENGTH_SHORT).show();
                        }catch(SQLException sqx)
                        {
                            sqx.printStackTrace();
                        }
                        catch(Exception ex)
                        {
                            ex.printStackTrace();
                        }
                        finally
                        {
                            dbUtils.close();
                        }
                        intent.putExtra("isClicked","yes");
                        intent.putExtra("ID",""+id);
                        context.sendBroadcast(intent);
                    }
                    else
                    {
                    //  holder.togCheck.setBackgroundResource(R.drawable.uncheck);

                        try
                        {
                            dbUtils.open();
                            dbUtils.setInVisibility(id);
                            Toast.makeText(context, "UnChecked ", Toast.LENGTH_SHORT).show();
                        }catch(SQLException sqx)
                        {
                            sqx.printStackTrace();
                        }
                        catch(Exception ex)
                        {
                            ex.printStackTrace();
                        }
                        finally
                        {
                            dbUtils.close();
                        }
                        intent.putExtra("isClicked","no");
                        intent.putExtra("ID",""+id);
                        context.sendBroadcast(intent);
                    }
                }
            }); 
```

我所做的是根据数据库中的 id 设置复选框的选中或未选中状态。然后通过获取该 id 的状态，我完成了计算！。

# cakephp - 设置身份验证后的Cakephp登录不起作用

> ID：12952436
> 
> 赞同：1
> 
> 时间：2012-10-18T10:22:20.723
> 
> 标签：cakephp

设置 Auth 后，Cakephp Login 出现错误。

`$this->Auth->login()`它返回 1 表示 true 并且还`$this->Auth->user()`返回`$this->Session`存储在 auth 或 session 中的所有有效数据。我可以`something(id, username)`从会话中得到。但问题是我无法登录。由于设置了身份验证，所以它是 cakephp 默认功能让我登录到应用程序，但它没有发生。

我怎样才能让它工作？

# c# - 如何获取 MVC 中 @Html.ActionLink 中更新的文本框更改值

> ID：12952439
> 
> 赞同：2
> 
> 时间：2012-10-18T10:22:40.473
> 
> 标签：c#, asp.net, asp.net-mvc-4

我正在尝试从文本框中获取 textchanged 值以在我的控制器中更新。
看法

```
 @Html.TextBox("Quantity", item.Quantity)

  <a  href="@Url.Action("Update", "Shopping", new { id = Request.QueryString["UserID"], productid = item.ProductID, qty ="Quantity", unitrate = item.Rate })">     
<img alt="updateitem" style="vertical-align: middle;" height="17px" src="~/Images/product_updates_image.png"
 title="update" id="imgUpdate" />
</a> 
```

在我的控制器中更新

```
 public ActionResult Update(string id, string productid, int qty, decimal unitrate)
        {
            if (ModelState.IsValid)
            {
                int _records = UpdatePrice(id,productid,qty,unitrate);
                if (_records > 0)
                {
                    return RedirectToAction("Index1", "Shopping");
                }
                else
                {
                    ModelState.AddModelError("","Can Not Update");
                }
            }
            return View("Index1");
        } 
```

更新功能

```
public int UpdatePrice(string id,string productid, int qty, decimal unitrate)
    {
        con.Open();        
        var total = qty * unitrate;
        SqlCommand cmd = new SqlCommand("Update [Cpecial_Shopping_Cart_tbl] Set Price='"+ total +"' where [User ID]='" + id + "' and [Product ID]='" + productid + "'", con);
        cmd.Parameters.AddWithValue("@total", total);
        return cmd.ExecuteNonQuery();
    } 
```

我在 中传递了数量变量的文本框名称`@Html.ActionLink`。但是当文本框的值改变时，值不会传入其中。

编辑 ：

最初来自 DB 的文本框的值为 1。当我更改文本框的值时，它不会更新，即使发布表单也更新相同的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:30:50.103

您需要使用表单将（POST）值从视图发送到控制器。

这是一个粗略的例子：

```
@using (Html.BeginForm("Update", "Shopping", FormMethod.Post, new { @id = "myHtmlForm" }))
{
    @Html.Hidden("id", Request.QueryString["UserID"]);
    @Html.Hidden("productid", item.ProductID)
    @Html.Hidden("unitrate", item.Rate)

    @Html.TextBox("qty", item.Quantity)

    <a href="javascript:document.getElementById('myHtmlForm').submit();">
        <img alt="updateitem" style="vertical-align: middle;" height="17px" src="~/Images/product_updates_image.png"
            title="update" id="imgUpdate" />
    </a>
} 
```

# php - Php 使用连接优化我的请求？

> ID：12952448
> 
> 赞同：1
> 
> 时间：2012-10-18T10:23:09.043
> 
> 标签：php, mysql, ios

我带着一个关于mysql查询的问题来这里。我会尽量让它简单快速（并且可以理解，因为我说法语）这是我在 StackOverFlow 上的第一篇文章，它已经帮助我解决了各种问题，所以感谢所有社区 :)

我对 php 和 mysql 很陌生，我正在编写一个使用 php 和 mysql 的 iOS 应用程序。在此示例中，我使用了 2 个不同的表：

-Utilisateurs（法语用户），其中包含：

*   姓名
*   image_name（引用服务器上的 profileImage）
*   以及我在此示例中未使用的其他字段

-追随者，包含：

*   用户名（安静显式）
*   跟随（此字段包含 user_name 跟随的用户的名称

这是完美运行的查询

```
 if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

    mysql_select_db(db, $con);

    // By this request I select the users that my current user ($_GET['userName']) follows

    $result = mysql_query('SELECT user_name, follows FROM Followers WHERE user_name = "'.$_GET['userName'].'"');
    while($row = mysql_fetch_array($result)){

    //When I find a user that my current user follows, I select his name and the name of the user(s) that user has followed less than 2 days ago

     $user = $row['follows'];
     $res = mysql_query('SELECT user_name, follows, followed_on FROM Followers WHERE user_name = "'.$user.'" AND TO_DAYS(NOW()) - TO_DAYS(followed_on) <= 2');

    // Now when I find a user that is followed by the user that my current user follows, I select the profile image linked to his profile

     while($follow = mysql_fetch_array($res)){
     $img = mysql_query('SELECT image_name FROM Utilisateurs WHERE name = "'.$follow['follows'].'"');
     if(mysql_num_rows($img) != 0){

//And here I echo differents results if a profileImage has been found or not

        $imgProfile = mysql_fetch_row($img);
        echo $follow['user_name'].'$'.$follow['follows'].'$'.$imgProfile[0].'#';
    }else{
        echo $follow['user_name'].'$'.$follow['follows'].'$ #';
    }
 }
} 
```

当我使用例如“benben”（我的当前用户）作为 $_GET['username'] 的用户名执行此查询时，一切正常，这是我在 Webbrowser 中得到的结果

西蒙$Seba$#Simon$Seb$#Simon$benben$307233348488807.jpg#

在这里我可以看到：

*   西蒙跟着塞巴
*   西蒙已经关注了Seb
*   西蒙关注了本本（我），其image_name为307233348488807.jpg

我将所有这些都放在我的 iOS 应用程序中的数组中，一切都显示正确并且工作正常。

但是，如果我关注了许多用户，而这些用户又关注了许多其他用户，那么这就是很多查询。更糟糕的是，如果许多用户同时这样做。

所以我想我应该执行一些 JOINS 以执行更少的查询，但由于我是 php 和 mysql 的新手，我不知道该怎么做。我已经在比这个更简单的查询中执行了一些 JOINS，但是这个让我感到困惑。

因此，如果有人对我有一些建议或可以帮助我通过 JOINS 执行此请求，将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:31:16.870

我想说告诉我更多关于你想要实现的目标，因为这可能需要比简单的连接修复更底层的优化，在 2 天内回显跟踪链背后的逻辑是什么？此外，如果这将是一个重负载应用程序，最好使用 hadoop 或其他一些面向对象的数据库，而不是更容易扩展的 mysql。让我知道

# php - Joomla 1.5 文件安全问题

> ID：12952449
> 
> 赞同：0
> 
> 时间：2012-10-18T10:23:18.193
> 
> 标签：php, security, joomla

我在 1and1 UK 托管一个 Joomla 1.5.26 网站。本周我们被黑了，我不知道如何解决这个问题。

1and1 完全没用，回答这样的问题“index.php 如何从 644 更改为 200 权限”这个答案“要更改文件权限，请按照以下步骤操作”..

无论如何，我希望回答的问题是：

什么是正确的文件/文件夹权限设置？是：文件夹 755 和文件 644？

是否有“搜索所有文件和文件夹并重置正确权限”的组件或其他方式？

是否有组件或其他方式可以为文件/文件夹以及数据库安装额外的安全性，以防止此类攻击？

非常感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:46:28.243

我了解您的网站已被黑客入侵，但您需要更明确地说明到底发生了什么。

无论如何，作为一个大方向：

*   使用 .htaccess 登录文件保护您的管理员目录
*   将组件更新到最新版本，检查您安装的版本中的某些组件是否存在安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:41:23.207

我回答了一个与此类似的问题，关于 hacking a hele back。我想它可能对你有用。请参阅下面的链接。它为您提供了许多您应该考虑的事项以及安全扩展建议。

[Joomla！2.5.4 被黑：诊断有问题](https://stackoverflow.com/questions/11036763/joomla-2-54-hacked-having-trouble-with-diagnosis/11037642#11037642)

文件夹应始终为 755，文件应始终为 644。不要出于任何原因将它们中的任何一个设为 777，这会构成安全威胁。

我的专用服务器很可能不是解决方案。如果不正确，它不会阻止黑客并且相当昂贵。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:31:59.500

我建议使用这个插件 [http://www.corephp.com/joomla-products/jomdefender.html#.UICsh1TDgb8](http://www.corephp.com/joomla-products/jomdefender.html#.UICsh1TDgb8)

您提到的所有内容都可以抵抗机器人，文件完整性检查。

因为你有过时的 joomla 版本，几乎没有其他解决方案。

# e-commerce - 什么是 B2B（开源）的最佳电子商务平台？

> ID：12952452
> 
> 赞同：2
> 
> 时间：2012-10-18T10:23:24.783
> 
> 标签：e-commerce, b2b

除了现在似乎不可用的magento（B2B扩展）之外，是否有任何用于b2b的开源电子商务平台？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:49:12.023

检查[GoCart](http://gocartdv.com/)。这是一个基于 CodeIgniter 框架的非常好的解决方案，重量轻且易于适应。

# javascript - 在 RaphaelJS 中，如何将旋转的文本与底部对齐？

> ID：12952454
> 
> 赞同：1
> 
> 时间：2012-10-18T10:23:31.020
> 
> 标签：javascript, rotation, alignment, raphael, vertical-alignment

使用下面的代码，并受到[这个](https://stackoverflow.com/questions/2705174/vertical-text-inside-table-headers-using-a-javascript-based-svg-library)问题的启发，我设法在 HTML 表中使用垂直列标题，与 Internet Explorer 兼容。现在我需要设置的最后一个细节是标题垂直对齐：我想让我的标题固定在他们行的底部。

```
$(document).ready(function(){
$('tr th div').each(function (index, div){
R = Raphael($(div).attr('id'), 10, 200);
R.text(5, 100, $(div).find('span').text())
.rotate(-90, true);
$(div).find('span').hide();
});
}); 
```

使用此代码，我可以获得以下结果：

[![旋转的标题未对齐](../Images/9c8e6486048655fac74518196f9f457f.png)](https://i.stack.imgur.com/zuTFV.png)
[（来源：[ompldr.org](http://ompldr.org/vZnhhdw)）]

如您所见，标题已旋转但未与单元格底部对齐，我希望它们如此。我尝试使用：

```
vertical-align: bottom; 
```

但这并没有改变什么。

并且还要在 JS 代码中的 .rotate 指令之后或之前添加它：

```
.attr({'text-anchor': 'end'}); 
```

当放置在 .rotate 指令之前时，这只会使标题消失。当放置在 .rotate 指令之后时，我得到了更好的结果，但仍然不是我想要的，因为标题是根据它们的最后一个字符垂直对齐的：

[垂直对齐尝试 http://ompldr.org/vZnhiOQ](http://ompldr.org/vZnhiOQ)

我怎样才能将这些标题对齐到第一行的底部，以获得[这样](http://ompldr.org/vZnd4Mg)的结果？

谢谢，

雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:27:18.163

代替

```
.attr({'text-anchor': 'end'}); 
```

在旋转之前，使用这个在开始处对齐文本

```
.attr({'text-anchor': 'start'}); 
```

[MDN 文档`text-anchor`](https://developer.mozilla.org/en-US/docs/SVG/Attribute/text-anchor)

# wcf - 从 WCF WebApi 迁移到 MVC4 Api - 注册全局错误处理程序

> ID：12952456
> 
> 赞同：0
> 
> 时间：2012-10-18T10:23:44.400
> 
> 标签：wcf, asp.net-web-api, wcf-web-api

我正在将使用 WebApi Preview 5（当时它是 WCF 的一部分）开发的项目迁移到 WebApi 的最终版本（MVC4 的一部分）。有一个[文档](http://wcf.codeplex.com/wikipage?title=How%20to%20Migrate%20from%20WCF%20Web%20API%20to%20ASP.NET%20Web%20API)描述了这个过程，但它非常简单，并没有涵盖大部分问题。

现在我面临的问题之一是**GlobalErrorHandler**是通过从**HttpErrorHandler**继承然后覆盖**OnTryProvideResponse**而创建的，它用于与 Elmah 挂钩错误处理。现在它已在 AppStart 上注册，如下所示：

```
var configuration = new WebApiConfiguration();
//some other configuration for security and CreateInstance
configuration.ErrorHandlers = 
(handlers, endpoint, description) => handlers.Add(new GlobalErrorHandler())
};
//then some registration
RouteTable.Routes.MapServiceRoute<SomeObject>("routeName", configuration); 
```

然后将不同的路由映射到此配置。所有这些代码在 MVC4 WebApi 的新世界中都不起作用，似乎 HttpErrorHandler 之间存在冲突，**甚至**无法正确实现其成员。

现在我已经看到了关于如何使用 WebApi 注册 Elmah 的一般帖子，但我试图尽可能地坚持原始代码，并且我假设 - 可能我错了 - 有一个直接相当于微软在预览版以及他们在最终版中发布的内容。所以我的问题：

1.  ASP.NET MVC4 WebApi 中这个全局错误处理注册的等价物是什么？
2.  我是否需要像这里一样进行配置（默认的 webapi 示例项目似乎没有类似的代码）
3.  该路由注册行代码的等效项是什么：RouteTable.Routes.MapServiceRoute("routeName", configuration);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:29:47.873

如果您在 Visual Studio 中创建一个快速的一次性 WebApi MVC 项目，您将看到一个 App_Start 文件夹，其中包含一些具有处理注册的静态方法的类，特别是：

*   过滤器配置文件
*   WebApiConfig.cs

WebApi Config 是您需要注册路由等的地方...

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

过滤器配置是您处理全局错误所需要的...过滤器配置添加了一个默认错误处理程序属性，您可以将其换出或换出

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
    }
} 
```

Global.asax 像这样调用这些静态注册脚本：

```
 protected void Application_Start()
    {

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);

    } 
```

关于 Elmah 似乎只需包含 Nuget 包就会注册它......

寻找包 Elmah.Mvc

```
PM> Install-Package Elmah.MVC 
```

它曾经是这样的[如何让 ELMAH 与 ASP.NET MVC [HandleError] 属性一起工作？](https://stackoverflow.com/questions/766610/how-to-get-elmah-to-work-with-asp-net-mvc-handleerror-attribute)但现在根据这个[博客](http://www.beletsky.net/2012/06/elmahmvc-v200-release-candidate.html)它已经改变了：

> HandleErrorAttribute inside 如果您尝试在 ASP.NET MVC 中使用 ELMAH，您可能实现了自己的 HandleErrorAttribute，如本示例所示。您不再需要将此自定义代码与 Elmah.MVC 一起应用。一旦你安装了包，就可以安全地删除你的 HandleError 属性，因为它已经包含在包中。

这现在似乎在 Web.Config 中将自己注册为 managedHandler，因此您的代码不需要直接引用 Elmah。

# hibernate - 在一个事务中混合 JDO (DataNucleus) 和 JPA (Hibernate) 对象

> ID：12952460
> 
> 赞同：1
> 
> 时间：2012-10-18T10:23:52.257
> 
> 标签：hibernate, jpa, jdo, datanucleus

这会是个问题吗？

我有一个遗留系统，它使用 javax.jdo API 和 XML 映射来处理从数据库中写入/读取它的对象。

我还有一些扩展这个系统的代码，这部分使用 JPA 和 Hibernate（通过注释，使用 Spring 管理的声明性事务）。

我想把它们放在同一个保护伞下，这样我就可以更好地管理交易。我想重写我的代码以使用 DataNucleus，但我想坚持使用 JPA（所以我不必更改映射等 ..）。

所以问题是：是否可以在项目的两个部分中混合 JPA 和 JDO 并跨越混合的事务？还是我必须只选择一种方法？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:37:24.910

这在某些情况下实际上不起作用，基本上休眠和数据核都在持久类上使用自己生成的代理。所以在hibernate中生成的代理类在你尝试持久化时不会被数据核识别，因为它是一个代理类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:28:01.713

DataNucleus 显然允许您使用 JDO 或 JPA 注释（或同时使用 IIRC），并使用 JDO 或 JPA 使用持久性（因此 JPA 注释与 JDO PersistenceManager，反之亦然）。很可能，如果您有一个应用程序的一部分的 PM 和应用程序的另一部分的 EM，那么交易是分开的。

# .htaccess - htaccess 条件重写

> ID：12952463
> 
> 赞同：0
> 
> 时间：2012-10-18T10:23:59.553
> 
> 标签：.htaccess, mod-rewrite

我为我的 PHP 应用程序使用了一个 MVC 框架，效果很好。我的应用程序根文件夹中的 .htaccess 文件中有以下代码。这会将所有内容重定向到对我造成问题的公用文件夹。我想将以下内容应用于除一个之外的每个文件夹。我该怎么做呢？IE。需要访问 /dompdf/ 目录和所有子目录，通常没有以下重定向规则。

```
#<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    public/    [L]
    RewriteRule    (.*) public/$1    [L]
# </IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:32:36.137

我想如果我明白你想要什么，这应该会有所帮助 -

```
#<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule    ^dompdf    [L,NC]
RewriteRule    ^$    public/    [L]    
RewriteRule    (.*) public/$1    [L]
# </IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:21:00.773

用这个替换你现有的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule (?!^(dompdf|public)/)^.*$ public%{REQUEST_URI} [L,NC] 
```

负前瞻将阻止将这些规则应用于路径`dompdf`和`public`.

# python - WinPython中Cephes Scipy库的导入错误

> ID：12952470
> 
> 赞同：1
> 
> 时间：2012-10-18T10:24:15.587
> 
> 标签：python, scipy

我正在尝试测试[WinPython environment](http://code.google.com/p/winpython/)，一个可移植的 Python 环境，以创建一个包含更多包的版本。

我在 Windows Vista 32 位（但底层 CPU 是 64 位）、Service Pack 2、Python 2.7.3、WinPython-32bit-2.7.3.1 中的 Scipy 0.11 和 WinPython-32bit-2.7 中的 Scipy 0.10.1 中工作。 3.0。

我对 WinPython-32bit-2.7.3.1.exe 和以前的 WinPython-32bit-2.7.3.0.exe 版本都有同样的问题，尝试多次下载安装程序，在不同的文件夹中进行不同的安装（路径名中没有空格）。

当我从 Scipy 进行单元测试时：

```
scipy.test() 
```

我收到 8 个错误，都与 Cephes 库（_cephes.pyd 文件）的导入失败有关。典型的错误信息是：

```
packages\scipy\special__init__.py", line 525, in 
   from _cephes import * 
ImportError: DLL load failed: Impossibile trovare la procedura specificata. 
```

发行版创建者无法在类似环境中重现该错误，而同事也没有问题（在 Win 7 中，64 位）。

我还安装了[Python(x,y)](http://code.google.com/p/pythonxy/)（非便携式环境，来自同一作者），一切正常，我不记得在使用非便携式安装时遇到过类似的 Python/Scipy 问题。

感谢您的任何提示/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T09:37:46.897

仅供参考，我也遇到了问题，降级到 0.9，并且可以正常工作。

**编辑：**

我到处搜索，除了许多其他人对 0.10.x 有完全相同的问题外，没有发布任何解决方案。见这里： http: [//mail.scipy.org/pipermail/scipy-user/2012-February/031527.html](http://mail.scipy.org/pipermail/scipy-user/2012-February/031527.html)更一般地在这里：[https ://www.google.com/search?q=cephes+dll+load +失败](https://www.google.com/search?q=cephes+dll+load+failed)

这导致我尝试降级到 0.9.x 或升级......我的发行版不提供超过 0.10.1，但降级工作。

# c# - 错误 CS0103：当前上下文中不存在名称“HttpUtility”

> ID：12952472
> 
> 赞同：0
> 
> 时间：2012-10-18T10:24:21.210
> 
> 标签：c#, mono, opensuse

当我尝试使用“$ mcs file.cs”编译我的 c# 文件时，我收到此错误“错误 CS0103：当前上下文中不存在名称‘HttpUtility’”。我添加了“使用 System.Web”，并使用单声道框架在 Suse 12.1 上运行它。我是 C# 的新手，正在学习这里的教程[http://www.codeproject.com/Articles/9407/Introduction-to-Mono-Your-first-Mono-app](http://www.codeproject.com/Articles/9407/Introduction-to-Mono-Your-first-Mono-app)

这是我的 file.cs 中的代码

```
using System;
using System.Net;
using System.Web;
using System.Text;
using System.Text.RegularExpressions;

namespace Dela.Mono.Examples
{
        class GoogleSearch
         {
                static void Main(string[] args)
                 {
                        Console.Write("Please enter a string to search google for:");
                        string searchString = HttpUtility.UrlEncode(Console.ReadLine());

                        Console.WriteLine();
                        Console.Write("Please wait....\r");

                        //Query google
                        WebClient webClient = new WebClient();
                        byte[] response =     webClient.DownloadData("http://www.google.com/search?&num=5&q=" + searchString);

                        //Check reponse results
                        string regex = "g><a\\shref=\"?(?<URL>[^\">]*)[^>]*>(?<Name>[^<]*)";
                        MatchCollection matches = Regex.Matches(Encoding.ASCII.GetString(response), regex);

                        //output results
                        Console.WriteLine("===== Results =====");
                                 if(matches.Count > 0)
                                 {
                                        foreach(Match match in matches)
                                        {
                                                 Console.WriteLine(HttpUtility.HtmlDecode(
                                                        match.Groups["Name"].Value) +
                                                        " - " + match.Groups["URL"].Value);
                                        }
                                 }
                                 else
                                 {
                                        Console.WriteLine("0 results found");
                                 }
                } 
        }
} 
```

可能是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:23:25.587

如您链接到的文章中所述，尝试编译：

```
$ mcs file.cs -r System.Web.dll 
```

# javascript - 单击列标题时向表格添加排序选项

> ID：12952473
> 
> 赞同：-1
> 
> 时间：2012-10-18T10:24:28.617
> 
> 标签：javascript, jquery, jqgrid

![我的网格表](../Images/02c2675bb1211b175a6ecd87ce9690e2.png)

单击列标题时，将排序选项添加到表中，为其发布代码。

```
colNames: ['Incident key', 'Date', 'State', 'Incident no', 'FF death', 'OTH death', 'Property Loss', 'Cont Loss', 'Fire Cause'],
        colModel :[ 
        {
            name:'a.INC_KEY', 
            index:'a.INC_KEY',
            width: 220,
            hidden: true,
            editrules: {
                edithidden:true
            },
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        }, 

        {
            name:'a.INC_DATE', 
            index:'a.INC_DATE',
            width: 100,
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        }, 

        {
            name:'a.INC_NO', 
            index:'a.INC_NO',
            width: 100,
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        }, 

        {
            name:'a.STATE', 
            index:'a.STATE',
            width: 100,
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        }, 

        {
            name:'a.FF_DEATH', 
            index:'a.FF_DEATH',
            width: 80,
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        }, 

        {
            name:'a.OTH_DEATH', 
            index:'a.OTH_DEATH',
            width:80,
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        },

        {
            name:'a.PROP_LOSS', 
            index:'a.PROP_LOSS',
            width: 80,
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        },

        {
            name:'a.CONT_LOSS', 
            index:'a.CONT_LOSS',
            width: 80,
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        },

        {
            name:'a.CAUSE_CODE_DESC', 
            index:'a.CAUSE_CODE_DESC',
            width: 240,
            searchoptions: {
                sopt: ['eq', 'ne','cn']
            }
        },
        ],
        pager: '#pager',
        rowNum: 500,
        rowList:[500,100,20],
        sortname: 'INC_KEY',
        sortorder: 'desc',
        viewrecords: true,
        sortable: true,
        height: 400,
        width: 800, 
        shrinkToFit: false,
        gridview: true,
        caption: 'Reports'
    });

    jQuery("#list1").jqGrid('navGrid','#pager',{
        edit:false,
        add:false,
        del:false
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:26:50.303

有几个插件可用，其中一个是数据表，（ut只需要2行编码！最适合你）

以下是示例链接，

[http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html](http://datatables.net/release-datatables/examples/basic_init/multi_col_sort.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:57:04.390

您应该使用`name`某个列的属性值作为 的值`sortname`。您当前的代码使用`sortname: 'INC_KEY'`，但没有`colModel`对应名称的列。你应该`sortname: 'a.INC_KEY'`改用。

此外，我建议您将所有列重命名`.`为名称中没有。您应该了解该`name`属性将用于`id`在网格中构造一些值，并将在[选择器](http://api.jquery.com/category/selectors/)中使用。使用不带任何特殊字符的名称将降低您产生一些奇怪副作用的风险，并且 jqGrid 的某些功能将无法正常工作。如果你有 remote `datatype`( `"json"`or `"xml"`) 你可以使用`index`which has `a.`prefix ，但你不应该在`name`属性中有这样的前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:29:22.480

我认为您正在使用 JQGrid，我认为此代码将对您有所帮助

```
jQuery(function() {
        $("#list1").jqGrid({
            url:'file1.php',
            datatype: 'json',
            colNames:['Member Name','Administrstor Name' ,'Time', 'Status','Mobile'],
            colModel :[ 
                {name:'memberid', index:'memberid',align:'left',width: 142,searchoptions: { sopt: ['eq', 'ne','cn']}}, 
                {name:'adminid', index:'adminid',align:'left',search: false,width: 142}, 
                {name:'sendon', index:'senton',width: 167,searchoptions: { sopt: ['eq', 'ne','cn']}}, 
                {name:'status', index:'status',width: 117,search: false},
                {name:'mobile', index:'mobile',width: 162,search: false}
            ],
            pager: '#pager',
            rowNum: 5,
            rowList:[5,10],
            sortname: 'id',
            sortorder: 'desc',
            viewrecords: true,
            height: 'auto',
            width: 790, 
            shrinkToFit: false,
            rownumbers: true,
            gridview: true,
            caption: 'Message Sent Today'
        });
        jQuery("#list1").jqGrid('navGrid','#pager',{edit:false,add:false,del:false});

    }); 
```

# java - java中的window和linux是否需要单独的文件路径

> ID：12952476
> 
> 赞同：2
> 
> 时间：2012-10-18T10:24:58.523
> 
> 标签：java, io, java-server

我在以路径名**/home/kishor/project/detail/**托管的 linux ubuntu 服务器上有一个文件。当我在窗口中创建一个网络应用程序以从指定位置上传和下载文件时，我使用路径**“c:\kishor\projects\detail\”**保存在窗口中。

令我惊讶的是，当我在服务器中使用窗口文件路径名时，我仍然能够获取文件并上传它们，即**"c:\kishor\projects\detail\"**。

谁能解释它为什么起作用（因为window和linux都使用不同的文件路径模式）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:52:06.400

我也看过这个作品。linux 所做的是创建一个文件名`c:\kishor\projects\detail\`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:10:48.723

如果你说，你可以“上传”文件......也许现在有一个新的文件夹结构。

几个月前我看到了类似的事情：在/home/webadmin 下是一个新结构“/c:/Users/....”

# javascript - 嵌套浏览上下文技术？

> ID：12952477
> 
> 赞同：1
> 
> 时间：2012-10-18T10:25:00.150
> 
> 标签：javascript, html, dom, iframe

我很好奇是否有人知道在不使用 iFrame 的情况下创建嵌套浏览上下文的任何技术？有人问我这个问题，然后立即说，不，但现在我在猜测自己 - 也许有一些聪明的黑客可以在父文档中加载第 3 方文档？

我进行了快速搜索，发现了一些俗气的全屏抓取技术（http://feross.org/html5-fullscreen-api-attack/），但我的意思是更多地将子文档放置在父文档中而不使用 iFrame。我认为这是不可能的，但我想仔细检查:-)

# android - 如何避免打开软键盘时滚动主窗口布局？

> ID：12952478
> 
> 赞同：0
> 
> 时间：2012-10-18T10:24:59.937
> 
> 标签：android

我有一个主要活动，它有RelativeLaoyout @ root 和许多其他视图，包括一个带有2 列的GridView。现在，单击其中一个按钮会打开一个对话框，其中包含一个 EditText。当用户在 EditText 中点击时，主活动的整个 RelativeLayout 被向上推。

我已经尝试了几乎所有可以在 stackoverflow 和其他各种论坛上找到的解决方案，但没有一个对我有用！

到目前为止我尝试过的事情

1.  设置 android:windowSoftInputMode="adjustResize" 我也尝试了 adjustNothing 和 adjustPan 但没有任何效果
2.  为 GridView 设置 android:isScrollContainer="false" 我也尝试将其设置为 true。但这也无济于事。

这个问题真的很困扰我。请有人帮忙！

**编辑** 发现重复，但也没有回答！ [显示软键盘时背景布局移动 - android](https://stackoverflow.com/questions/3783318/background-layout-moving-when-soft-keyboard-displayed-android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:49:52.477

调整平移将如何工作它只是推动你的编辑文本而不是你的整个背景如果你的编辑文本是b / w键盘的高度出现在屏幕上，调整平移只是提升编辑文本而不是整个背景屏幕，如果您的编辑文本高于键盘高度，则不会发生任何变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T11:21:55.443

你有全屏主题吗？@android:style/Theme.Holo.NoActionBar.FullScreen

如果是这样，请尝试将其更改为：@android:style/Theme.Holo.NoActionBar

似乎在 HoneyComb 版本及以上版本中，全屏主题设置会覆盖 windowSoftInputMode 的 adjustResize 或 adjustPan 设置。

# vim - 如何在vim中水平居中打开文件的内容？

> ID：12952479
> 
> 赞同：23
> 
> 时间：2012-10-18T10:25:01.913
> 
> 标签：vim

如何使 vim 水平居中打开文件的文本？

我不想修改文件，只是为了改变 vim 显示它的方式。

更清楚地说，当我打开文件时，我目前遇到这种情况：

```
|<------ textwidth=80 ------->|<-------------- padding -------------->|
|lorem ipsum dolor sit amet.. 
|dsdsda da dsa dsa 
```

我想要的是以下内容：

```
|<--- padding/2 --->|<------ textwidth=80 ------->|<--- padding/2 --->|
|                    lorem ipsum dolor sit amet.. 
|                    dsdsda da dsa dsa 
```

当然，对于`textwidth`和的每个值`padding`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T10:58:11.003

Vim 并不是一个单一的、居中的文档编辑器（在编程时，您希望用相关信息填充每个像素），因此只有解决方法：

a）您可以通过展开折叠列来实现更大的左边距。不幸的是，这仅限于 12 个字符单元格：

```
:let &foldcolumn = (&columns - &textwidth) / 2 
```

b）您可以在左侧创建一个空的填充窗口（也可能在右侧，以实现对称）。

```
:execute 'topleft' ((&columns - &textwidth) / 2 - 1) . 'vsplit _paddding_' | wincmd p 
```

烦人的窗口拆分可以通过以下方式清除：

```
:hi VertSplit guifg=bg guibg=NONE gui=NONE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T10:44:05.007

我认为您可以使用屏幕达到目的。您可以打开三个垂直平铺的不同窗口

CTRL+a , SHIFT+|

然后移动到第二个。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-04T15:19:50.363

有几个插件可以让你获得那种外观，它们中的大多数似乎都受到 MacOS 的[Writerroom](http://www.hogbaysoftware.com/products/writeroom)编辑器的启发。

例如，参见[VimRoom](https://mikewest.github.io/vimroom/)插件的截图，或者只是在网上搜索“vim writeroom 插件”。

[![在此处输入图像描述](../Images/b082cbde575a1b66a077a6a5fe7a61e8.png)](https://i.stack.imgur.com/tbWfY.jpg)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-22T01:11:21.070

出于这个原因，我使用[NERDTree 。](https://github.com/scrooloose/nerdtree)*NERDTree*是 vim 的文件浏览器。您可以在启动时以您喜欢的任何宽度加载*NERDTree ：*

[![在此处输入图像描述](../Images/f4c45e20860a4a92da079956a9fb3a01.png)](https://i.stack.imgur.com/8aAaJ.jpg)

这就是我在启动时运行*NERDTree*以获取您在图像中看到的内容的方式。我使用[vim-plug](https://github.com/junegunn/vim-plug)（vim 的包管理器）来加载*NERDTree*。

```
# Load NERDTree Plugin via vim-plug
call plug#begin()
Plug 'scrooloose/nerdtree', { 'on': 'NERDTreeToggle' }
call plug#end()

let g:NERDTreeWinSize=60  # Set NERDTree width.
NERDTreeToggle            # Open NERDTree at startup.
au VimEnter * wincmd l    # Remove focus from NERDTree window at startup. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-28T19:31:04.257

我一直在寻找类似的东西，感谢@ingo-karkat 的[回答](https://stackoverflow.com/a/12953050/1712589)，我设法创建了一个功能来打开/关闭中心内容。

```
function! WriteRoomToggle()
  let l:name = '_writeroom_'
  if bufwinnr(l:name) > 0
    wincmd o
  else
    let l:width = (&columns - &textwidth) / 5
    execute 'topleft' l:width . 'vsplit +setlocal\ nobuflisted' l:name | wincmd p
    execute 'botright' l:width . 'vsplit +setlocal\ nobuflisted' l:name | wincmd p
    endif
endfunction 
```

建议的选项和映射：

```
" hide vertical split separator
hi VertSplit guifg=bg guibg=NONE gui=NONE
" Do not resize windows on close (good if you also use NERDTree)
set noequalalways

" toggle writeroom on/off
map <silent><Leader>v :call WriteRoomToggle()<CR>

" delete buffer without closing the window
command! Bdelete if len(getbufinfo({'buflisted':1})) > 1 | bprev | bdelete# | else | bdelete | endif
noremap <Leader>x :Bdelete<CR> 
```

# javascript - Twitter bootstrap 2.1.1 打开可折叠时折叠没有动画

> ID：12952480
> 
> 赞同：3
> 
> 时间：2012-10-18T10:25:07.483
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

我正在尝试创建一个简单的按钮来打开/关闭我在 twitter 引导程序中实现的网站的可折叠部分。我想使用可折叠的 javascript 插件，但它似乎不能正常工作：折叠动画“关闭”时发生，但“打开时”它是瞬时的。

这是一个 jsFiddle 演示这个问题。

[http://jsfiddle.net/whUvL/2/](http://jsfiddle.net/whUvL/2/)

在我的导航器（Mac 上的 Chrome 22.0.1229.94）上，第一次单击按钮时，h2 会立即“弹出”。再次单击该按钮会以漂亮的动画“折叠”h2。再次单击“显示它”很快。

**如何让动画在“打开时”和“关闭时”工作？我应该添加更多的 html/css，还是更改一些 js？**

另外，我注意到 jquery 1.8.2 和最新的 twitter boostrap 会发生这种情况。使用 jquery 1.7.2 和 bootstrap 2.0.2[它似乎工作得很好](http://jsfiddle.net/whUvL/1/)。如果可能的话，我想使用两者中的最新版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T15:57:43.640

好的，我发现了问题。它就[在文档中](http://twitter.github.com/bootstrap/javascript.html#collapse)：

> *   需要包含过渡插件。

在我的辩护中，我必须说那部分是灰色的，并不是很明显的要求。

一旦我包含了过渡模块，动画又开始工作了：

[http://jsfiddle.net/whUvL/4/](http://jsfiddle.net/whUvL/4/)

感谢@funzionpro，他让我走上了正轨——一旦我知道包括它工作的完整 javascripts 集，剩下的就很容易推断出来了。

（我会在两天内将此答案标记为正确，在那之前我必须将其保持打开状态，因为 SO 的自动回复政策）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:47:17.247

如果您添加 2.1.1 的 bootstrap.js，它似乎工作正常

工作小提琴：http: [//jsfiddle.net/whUvL/3/](http://jsfiddle.net/whUvL/3/)

# html - 如何创建两个不同的文本区域，其中多个项目可单击以在两个文本区域之间移动？

> ID：12952485
> 
> 赞同：1
> 
> 时间：2012-10-18T10:25:25.173
> 
> 标签：html, select, textarea

我已经找了几天了，还没有找到答案。我确实看到了这个：[jQuery - Copy / move text from select list to textarea](https://stackoverflow.com/questions/12365049/jquery-copy-move-text-from-select-list-to-textarea)我已经做过了，但是问题是如果在复制选定的下拉项进入文本区域后你改变主意并想要发送它回来还是摆脱它？

我不确定是否最好使用两个标签，或者我是否应该使用 textareas。这就是我在左侧字段中所拥有的：

```
<select size="10" name="options" variable="#available options" multiple="multiple">
  <option value="option1">Option 1</option>
  <option value="option2">Option 2</option>
</select> 
```

And then when options are selected and the button is clicked they are added to a list and my textarea on the right reflects that list. 我是否还应该将右侧的区域设置为一个可选择的下拉菜单，类似于我所有选项的下拉菜单？如果我这样做，那么我如何让它只反映我点击的选项？

对不起，如果这没有意义。这是我第一次在这里发帖，我不是程序员（但正在学习）。提前致谢！

# nhibernate - NHibernate Eager Load

> ID：12952488
> 
> 赞同：0
> 
> 时间：2012-10-18T10:25:30.380
> 
> 标签：nhibernate, hql, eager-loading

I've got an application that has the following HQL:

```
select distinct p from Position p
inner join fetch p.RequiredSkills rs
inner join fetch rs.Skill s
where s.Id in (:skills) 
```

I've searched the positions where the position has the skill searched for.

Currently the hql works as far as returning positions with that skill, but it's only fetching the filtered skills.

I now want to return all of the skills associated to the position.

Is there any way for me to do this?

Cheers,

James

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:31:29.990

You could try using a subquery:

```
select distinct p from Position p 
inner join fetch p.RequiredSkills rs 
inner join fetch rs.Skill s where p.Id in 
( select distinct pi.Id from Position pi
  inner join pi.RequiredSkills rsi
  inner join rsi.Skill si
  where si.Id in (:skills) ) 
```

# c# - 在 Web 服务应用程序中获取今天的日期

> ID：12952489
> 
> 赞同：0
> 
> 时间：2012-10-18T10:25:32.893
> 
> 标签：c#, web-services

我创建了一个网络服务来发送带有附件的电子邮件。附件位置通过名为“StrAttachment”的字符串传递。我可以传递文件夹的实际位置，但每次进行销售以将文档通过电子邮件发送给客户时，该服务都会运行。文件夹的位置将始终为“C:”，但每天都会创建一个以日期命名的新文件夹，例如：20121018。所以我需要将该名称传递给 StrAttachment 参数，这样我的 Web 服务就知道哪个文件夹进去看看。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:27:50.787

您可以使用 DateTime.ToString() 设置参数并指定格式：

```
string StrAttachment = "C:\\" + //your drive letter
                       DateTime.Today.ToString("yyyyMMdd") +  //your current date
                       "yourFoldername"; //other name in the folder (if any) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:28:00.007

看看这里：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

它应该类似于 DateTime.Now.ToString("yyyyMMdd")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:33:22.830

您可以使用 获取当前日期`DateTime.Today`。您可以使用它将格式化的当前数据提取为

```
folderName = DateTime.ParseExact(DateTime.Today, "yyyyMMdd", CultureInfo.InvariantCulture).ToString("yyyyMMdd"); 
```

有一个非常相似的问题（好吧，它不涉及文件夹部分） [Convert DateTime to string format("yyyyMMdd")](https://stackoverflow.com/questions/3477735/convert-datetime-to-string-formatyyyymmdd)

# regex - 大数组上的正则表达式

> ID：12952490
> 
> 赞同：0
> 
> 时间：2012-10-18T10:25:37.493
> 
> 标签：regex, jedit

我有一个非常大的字符串形式：

```
a1 + b1
a2 + b2
a3 + b3
.
.
.
an + bn 
```

我需要将其转换为 C 数组操作：

```
a[1]+b[1];
a[2]+a[2];
.
.
.
a[n]+b[n]; 
```

您建议使用什么正则表达式以及使用哪种工具？我正在尝试 jedit 的正则表达式，但如果需要我可以切换。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:34:47.777

使用 jEdit：

搜索：

```
([a-z]+)([0-9]+) 
```

用。。。来代替：

```
$1[$2] 
```

# javascript - 在jquery中的div之后重写css

> ID：12952498
> 
> 赞同：-1
> 
> 时间：2012-10-18T10:25:48.787
> 
> 标签：javascript, jquery

我有这个：

```
<dl id='1'></dl> <p>text from database</p> 
```

我想在 div id 1 之后这样做：

```
<dl id='1'></dl> <p style='float:left';>text from database</p> 
```

可以用javascript或jquery重写css吗？

问候

坦率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:27:02.360

使用[`next()`](http://api.jquery.com/next/)or[`siblings()`](http://api.jquery.com/siblings/)获取`<p>`元素并[`css()`](http://api.jquery.com/css/)设置样式：

```
$("#1").next("p").css("float", "left"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:27:42.037

你可以这样做

```
$("#first").next().css('float','left') 
```

# assembly - 尽管更改了 bl 中的值，为什么行只打印黄色？

> ID：12952499
> 
> 赞同：-2
> 
> 时间：2012-10-18T10:25:49.850
> 
> 标签：assembly, x86, nasm, bios

```
bits 32
main:

    mov ah, 09h
    mov bh, 0
    mov cx, 80
    mov bl, 01110000b
    mov al, ' '
    int 10h

    jmp $

times 512-($-$$) db 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:57:39.373

事实上，`bits 32`正是这一点阻止了它的工作。您可以使用 ndisasm 查看正在发生的事情。按原样组装它，然后用 ndisasm 拆卸它。ndisasm 的默认值为 16 位，但`-b16`为了清楚起见，您可以指定。如果 CPU 处于 16 位模式，这就是 CPU 将“看到”的内容……确实如此。切换到 32 位模式需要更多代码 - 您很快就会做到，但 CPU 以 16 位模式启动（甚至是 64 位 CPU）。要查看 CPU 在 32 位模式下会“看到”什么，请再次使用`-b32`. 看到不同？你`mov bl, 01110000b`已经消失了，被“吞噬”了`mov cx, 80`！然后在没有`bits 32`. 你可以说`bits 16`，但无论如何这是 Nasm 的默认设置。

`bits 32`告诉汇编程序和实际让 CPU 处于 32 位模式之间存在细微差别。通常，这不会造成太大的麻烦（其他人 - 操作系统 - 已确定 CPU 模式），但在引导扇区中它会！

当您真正将 CPU 切换到 32 位保护模式时，您会想要告诉 Nasm `bits 32`。

[在http://www.osdev.org](http://www.osdev.org)上有很多关于此的信息- 我推荐它！我也有一个例子发布到新闻组 - 很久以前 - 由 Alexey （实际上是“Alexei” - 那是你不是吗？）。

快乐开机，

坦率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:59:30.760

您尚未处于 32 位模式，因此请使用`bits 16`.

此外，在保护模式下，BIOS 功能不可用。只是为了让您知道并且不要在处于保护模式时尝试调用它们。

# javascript - Javascript 替换特殊字符 { } "

> ID：12952501
> 
> 赞同：0
> 
> 时间：2012-10-18T10:25:52.973
> 
> 标签：javascript, regex, replace

为什么此代码无法替换特殊字符：

[http://jsfiddle.net/TTfzu/26/](http://jsfiddle.net/TTfzu/26/)

```
var strOutput = 'aaa { " } '; 

strOutput.replace(/{/g, "");
strOutput.replace(/}/g, "");
strOutput.replace(/"/g, "");

document.write( strOutput ); 
```

需要改变什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:27:08.760

`replace`不改变它的参数，它返回一个新的字符串。您必须在某处分配结果，否则它会丢失：

```
var strOutput = 'aaa { " } '; 

strOutput = strOutput.replace(/{/g, "");
strOutput = strOutput.replace(/}/g, "");
strOutput = strOutput.replace(/"/g, "");

document.write( strOutput ); 
```

`[...]`或者只是在你的正则表达式中使用一个字符类：

```
var strOutput = 'aaa { " } '; 
strOutput = strOutput.replace(/[{}"]/g, ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:26:36.517

您将需要从替换中捕获结果。（你可以链接你的替换。）

```
var strOutput = 'aaa { " } '; 

strOutput = strOutput.replace(/{/g, "").replace(/}/g, "").replace(/"/g, "");

document.write( strOutput ); 
```

顺便说一句，你可以让它像这样简单：

```
strOutput = strOutput..replace(/({|"|})/g, ""); 
```

* * *

截至@Alnitak 评论：

```
strOutput = strOutput..replace(/[{}"]/g, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:29:07.260

根据其他答案，您需要*使用*.`.replace`

但是你不需要三个电话，你应该使用：

```
strOutput = strOutput.replace(/[{}"]/g, ''); 
```

其中`[...]`是一个*字符类*，它与该集中的任何单个字符匹配。在这样一个类中，唯一需要转义的字符是`^-]\`

# objective-c - iOS UIImageView dataWithContentsOfURL 返回空

> ID：12952505
> 
> 赞同：0
> 
> 时间：2012-10-18T10:26:17.310
> 
> 标签：objective-c, ios, image, uiimageview

我正在尝试在 UIImageView 中显示来自 URL 的图像，但我看到了一些非常奇特的结果。我正在测试的代码如下

```
imageURL = @"http://images.shopow.co.uk/image/user_dyn/1073/32/32";
imageURL = @"http://images.shopow.co.uk/assets/profile_images/default/32_32/avatar-male-01.jpg";

NSURL *imageURLRes = [NSURL URLWithString:imageURL];
NSData *imageData = [NSData dataWithContentsOfURL:imageURLRes];
UIImage *image = [UIImage imageWithData:imageData];

NSLog(@"Image Data: %@", imageData); 
```

在它的当前形式中，我可以在输出窗口中看到我所期望的数据。但是，如果注释掉第二个 imageURL，所以我引用第一个我得到空数据，因此 imageWithData 返回 nil。可能更令人困惑的是，第一个图像与第二个基本相同，但它是通过 PHP 处理脚本。我几乎可以肯定这不是导致问题的脚本，因为如果我改用它

```
imageURL = @"http://images.shopow.co.uk/image/product_dynimg/389620/32/32" 
```

显示图像，这使用相同的图像处理脚本。我正在努力寻找会导致这种情况发生的图像中的任何差异。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:53:12.700

这与服务器配置有关。

```
$ curl -v http://images.shopow.co.uk/assets/profile_images/default/32_32/avatar-male-01.jpg 
```

返回非零`Content-Length`和实际图像位。当我这样做时：

```
$ curl -v http://images.shopow.co.uk/image/user_dyn/633/32/32 
```

我得到以下标题和零长度响应：

```
> GET http://images.shopow.co.uk/image/user_dyn/633/32/32 HTTP/1.1
> User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
> Host: images.shopow.co.uk
> Accept: */*
> Proxy-Connection: Keep-Alive
> 
< HTTP/1.1 200 OK
< Date: Thu, 18 Oct 2012 10:51:31 GMT
< Server: Apache/2.2.3 (Red Hat)
< X-Powered-By: PHP/5.3.15
< Vary: Accept-Encoding,User-Agent
< Content-Type: text/html; charset=UTF-8
< Content-Length: 0
< Proxy-Connection: Keep-Alive
< Connection: Keep-Alive 
```

令人惊讶的是，在浏览器中，两个链接都可以正常工作并返回图像。

**更新：**我想通了。它是用户代理。试试这样：

```
$ curl -v \
    -A "User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4" \
    http://images.shopow.co.uk/image/user_dyn/633/32/32 
```

你得到你的图像位。

# unit-testing - 如何运行 GruntJS 测试？

> ID：12952506
> 
> 赞同：1
> 
> 时间：2012-10-18T10:26:16.103
> 
> 标签：unit-testing, node.js, gruntjs

我刚刚克隆了[gruntjs 存储库](https://github.com/gruntjs)。

我如何实际运行 GruntJS 的测试？

（我并不是说我想使用 GruntJS 运行我自己的测试。我的意思是我想为 GruntJS 本身运行测试。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:37:38.847

`grunt test`应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:45:36.177

咕噜吃自己的狗粮。

```
git clone https://github.com/gruntjs/grunt
cd grunt
grunt test 
```

或者，像任何 grunt 存储库一样（因为[package.json](https://github.com/gruntjs/grunt/blob/master/package.json#L23)格式正确）：

```
cd grunt
npm test 
```

# eclipse-rcp - 未选择任何内容时在导航器弹出窗口中启用操作

> ID：12952513
> 
> 赞同：0
> 
> 时间：2012-10-18T10:26:32.363
> 
> 标签：eclipse-rcp, cnf

我在 eclipse cnf 中添加了一个选项，如下所述：

```
<extension
     point="org.eclipse.ui.popupMenus">
  <objectContribution
        adaptable="true"
        objectClass="org.eclipse.core.resources.IProject"
        nameFilter="*"
        id="RemoteSync.contribution1">
     <action
           label="Enable RemoteSync"
           class="remotesync.builder.ToggleNatureAction"
           menubarPath="additions"
           enablesFor="1"
           id="RemoteSync.addRemoveNatureAction"
           style="toggle">
     </action>
  </objectContribution> 
```

Here enables for is set to 1\. So it enables when 1 items is selected. 但是我想在 cnf 中没有选择任何内容时启用该操作。enable 的值应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:41:31.543

这可以通过以下方式获得： enableFor="*"

您可以通过将鼠标悬停在 Eclipse 插件编辑器中的“enablesFor”上来了解“enablesFor”的所有可能值及其含义。

# magento - Magento：在类别页面上，如何以可配置的方式显示所有颜色选项的产品

> ID：12952516
> 
> 赞同：5
> 
> 时间：2012-10-18T10:26:44.660
> 
> 标签：magento

我有一个具有两个可配置属性大小和颜色的可配置产品，我想在类别页面上为可配置中的每种颜色显示一个产品。这些颜色需要在不同尺寸可用时显示。

当客户打开页面时，他们应该看到所有产品可用的所有颜色，然后如果他们按尺寸过滤，他们应该看到该尺寸的所有产品的所有颜色。

这个问题有两个问题。1\. 显示适当的产品和颜色 2\. 设置分层导航，使其显示所有正确的选项。

我试过只为每种颜色显示简单的产品并将它们链接到它们的父级可配置，但是分层导航全错了。我还尝试在后端显示可配置产品，以便将其添加到产品集合并在过滤器中使用，然后将其隐藏在类别页面上，这种工作但分层导航也计算所有简单产品. 另一个问题是，如果我尝试使用简单的产品并选择每种颜色中的一种，那么这些产品也有特定的尺寸，因此如果用户在过滤器中更改尺寸，这些将不会显示。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:56:42.880

在您的 list.phtml （或您想要创建的任何新模板）（**编辑：**或更好：在一个块中）试试这个：

```
$colors = array();
if ($_product->isConfigurable()) {
    $allProducts = $_product->getTypeInstance(true)->getUsedProducts(null, $_product);
    foreach ($allProducts as $subproduct) {
        if ($subproduct->isSaleable()) {
            $colors[$subproduct->getColor()] = $subproduct->getAttributeText('Color');
        }
    }
} 
```

并遍历 $colors 以构建您的自定义 HTML 颜色列表

# c# - 我可以在不编写控制台应用程序的情况下在单独的进程中运行 C# 代码吗？

> ID：12952518
> 
> 赞同：32
> 
> 时间：2012-10-18T10:26:46.777
> 
> 标签：c#, .net

我有一个 .NET 类库，它有一个带有静态方法的类。我希望我的代码在单独的进程中运行该静态方法 - 就像我在单独的线程中运行它只是在单独的进程中一样。

我知道我可以创建一个单独的控制台应用程序项目，从内部调用静态方法，`Main()`但这对于我的部署方案来说并不方便——我宁愿不携带额外的 .exe 文件。我知道我可以[使用 Powershell](https://stackoverflow.com/a/6813588/57428)来调用它，但这意味着依赖于我宁愿避免的 Powershell。

有没有办法仅使用 .NET 在单独的进程中运行代码？也许我可以在运行时为那个单独的进程创建可执行文件？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-18T11:28:30.893

[不幸的是，您不能`fork`像在 POSIX 兼容操作系统上的 C 中那样使用 C#。](https://stackoverflow.com/questions/3913120/fork-concept-in-c-sharp)

你有几个选择。由于您只是想防止无限循环，因此您可以生成一个新的`Thread`（一个*新*的，而不是`ThreadPool`一个或`Task`一个）。`Abort`然后，如果你需要杀死它，你可以调用线程。这将`ThreadAbortException`在另一个线程中触发。

您的另一个选择是`AppDomain`. [您可以相对简单地使用当前正在运行的程序集](http://msdn.microsoft.com/en-us/library/yb506139.aspx)[创建一个新程序集。`AppDomain`](http://msdn.microsoft.com/en-us/library/yb506139.aspx)然后，您调用跨域实际存在的代理对象。代理将使用老式 .NET 远程处理来调用真实对象上的方法（因此没有泛型传递等，因为您受到基于 .NET 1.1 的构造的限制）。

请注意，上述策略都不能保护您免受非托管代码崩溃的影响。由于 AppDomain 是一个托管构造，因此您不能使用它们来中止非托管挂起。

如果您真的、真的、*真的*下定决心要获得第二个操作系统级进程，您还可以在一个临时文件中动态生成一个新的可执行程序集，然后在一个新进程中启动它。[有关新一代程序集的 MSDN 文章，请参见此处。](http://msdn.microsoft.com/en-us/library/8ffc3x75.aspx)请注意，这根本不是微不足道的。

# api - Clickbank - 创建用于测试的产品（在沙盒中）

> ID：12952523
> 
> 赞同：3
> 
> 时间：2012-10-18T10:26:53.200
> 
> 标签：api, sandbox, product, clickbank

我是 Clickbank 的新手。我想尝试相同的 API。

但我被困在两者之间。

谁能指导我完成成功创建产品的步骤。

我收到一些错误

*   在提交此请求之前，您必须进行测试购买。
*   所有 Pitch 和Thank You 页面都需要页脚免责声明。

也想知道，比如如何设置沙盒帐户？

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-17T18:13:59.680

这个问题很久以前就被问过了，但我只是偶然发现它并知道答案。
首先，但是我认为任何从 ClickBank 开始的人，无论是技术上的还是其他方面的，都将从以下内容中受益：[https](https://www.clickbank.com/launch-checklist/)
://www.clickbank.com/launch-checklist/现在，回答问题：

**测试购买：**
• 必须先创建产品才能执行此操作
• 要创建产品，请执行以下操作：

1.  登录帐户
2.  点击：供应商设置 -> 我的产品
3.  在此页面上找到添加新按钮列表并单击产品
4.  产品编辑器很好地引导您完成整个过程，现在进行测试购买。
    该过程在此处描述：https: [//support.clickbank.com/hc/en-us/articles/360036958431-How-do-I-test-a-payment-link-](https://support.clickbank.com/hc/en-us/articles/360036958431-How-do-I-test-a-payment-link-)

**页脚/免责声明：**
这就是目前所谓的 ClickBank 信任徽章（大约 9 年前不确定）。这是一个小元素，您可以在从可用选项中配置您希望它的外观和位置之后，将其复制并粘贴到您的网页中。要查找并设置它：

1.  登录帐户
2.  点击供应商设置 -> 我的网站
3.  向下滚动到标题为“ClickBank 信任徽章 - 注入代码”的部分
4.  如果您喜欢默认设置，您可以复制 Javascript Snippet 字段中的内容
5.  如果您想更改它的位置和颜色，请单击“配置设置”按钮（这里不打算描述所有内容，因为它也很简单）

**ClickBank API**
最后，您提到想要使用 ClickBank API，我碰巧非常了解。但是，它的文档实际上也相当不错，所以让我从它开始：

*   [通用 ClickBank API 文档](https://support.clickbank.com/hc/en-us/articles/220376527-ClickBank-APIs)
*   此外，每个 API 的主要端点都是自我记录的。此外，该文档往往与程序员最相关
*   自我记录端点示例：[https ://api.clickbank.com/rest/1.3/orders2](https://api.clickbank.com/rest/1.3/orders2)

因此，值得注意的是使用 API 所需的以下内容：

*   您必须有一个“授权”的 HTTP 标头，并且它必须设置为帐户的两个 API 密钥。
*   这两个密钥都指 API-“Clerk Key”以及 DEV-“开发人员密钥”
*   将它们都输入，用冒号“：”分隔作为授权密钥的值，首先是 DEV- 密钥 (DEV-A23478C...:API-IA23456...)
*   您还必须为要进行的查询使用正确的 HTTP 请求类型（唯一使用的两个是 GET 和 POST）

示例：（注意：ACCOUNT_NAME_HERE 是 ClickBank 的“昵称”或帐户名称）

*   单笔交易：`https://api.clickbank.com/rest/1.3/orders2/RECEIPT_NUMBER_HERE`
*   按日期范围和特定帐户列出交易：`https://api.clickbank.com/rest/1.3/orders2/list?vendor=ACCOUNTNAME_HERE&startDate=2021-12-11&endDate=2021-12-14`
*   按日期范围划分的交易数量：`https://api.clickbank.com/rest/1.3/orders2/count/?vendor=ACCOUNT_NAME_HERE&startDate=2022-01-01&endDate=2022-01-01`
*   按日期范围划分的交易货币价值：`https://api.clickbank.com/rest/1.3/quickstats/count/?account=ACCOUNT_NAME_HERE&startDate=2022-02-01&endDate=2022-02-10`
*   发送实物产品的运输数据 (POST)：`https://api.clickbank.com/rest/1.3/shipping2/shipnotice/4NVXUFNW?item=2&date=2018-08-14&carrier=UPS&tracking=1NH323452345WODFS&comments=Test%20again%20comment%20with%20spaces10%20receipt=4NVXUFNW`

# c# - 从类创建 ObservableCollection

> ID：12952524
> 
> 赞同：0
> 
> 时间：2012-10-18T10:27:00.817
> 
> 标签：c#, wpf, observablecollection

我有一个带有事件日志的 WPF 应用程序。我有一个 EventLog 类，当应用程序启动时，我使用 XML 文件中保存的事件填充

```
namespace MyApp.Agent.EventLogging
{
    public enum EventType
    {
        Infomation,
        Error
    }
    public class EventLog
    {
        public String Image { get; set; }
        public DateTime EventDate { get; set; }
        public String EventText { get; set; }
    }
}

public List<EventLog> GetSavedEvents()
{
   string file = XmlUtilities.GetXmlLocation() + "\\Events.xml";
   List<EventLog> elog = new List<EventLog>();
   try
   {
       if (File.Exists(file))
       {
          Serialize<List<EventLog>> ser = new Serialize<List<EventLog>>();
          elog = ser.DeserializeDocToObj(file);
       }
   }
   catch
   {
          throw new InvalidEventLogException(ConfigurationManager.AppSettings.Get("EventLogFileInvalid"));
   }
 return elog;
} 
```

然后，我将其转换为 listview 绑定到的可观察集合

```
List<EventLog> _evtLog = new List<EventLog>();
ObservableCollection<EventLog> _eventLog = new ObservableCollection<EventLog>();
_evtLog = logger.GetSavedEvents();
_evtLog.ForEach(x => _eventLog.Add(x)); 
```

我读到这就是它必须完成的方式（尽管这似乎是一个冗长的方式）

当应用程序运行时，新事件被添加到 observable 集合中。当应用程序关闭时，我会反转此过程以保存事件。

虽然如果随着列表越来越大而只有少数已保存的事件，这可以正常工作，但执行此操作所需的时间变得不切实际（240K 事件需要 7 秒）。好的，您可能会问的第一个问题是，为什么我仍然想要这么多活动，事实是我不想要，但它确实强调了我不是以最好的方式做到这一点？

所以我的问题是：

我真的需要填充可观察的集合吗？我不能在`_evtLog`不填充另一个的情况下制作 Observable 吗？

我可以根据事件的日期将这些列表限制为 X 事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:35:52.423

您可以轻松更改`GetSavedEvents`为序列化和反序列化`ObservableCollection<EventLog>`a 而不是`List<EventLog>`.

话虽如此，将列表转换为可观察集合的代码看起来很奇怪。你为什么不只是使用适当的构造函数？

```
_eventLog = new ObservableCollection<EventLog>(logger.GetSavedEvents()); 
```

使用的问题`Add`是，对于每个要添加的项目，您都会引发一个事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:36:54.293

以下将创建`ObservableCollection`

```
var _eventLog = new ObservableCollection<EventLog>(logger.GetSavedEvents()); 
```

关于过滤结果，是的，您可以进行快速`LINQ`选择查询，在其中定义限制并将结果作为`List`您将传递给的结果`ObservableCollection`

**关于过滤结果的一些想法**

您可能需要根据您的需要进行一些调整

```
var _eventLog = new ObservableCollection<EventLog>(logger.GetSavedEvents().where(event => event.date == some date).ToList()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:55:00.310

这是生成 ObservableCollection 的实际代码吗？从 240k 元素列表生成 OC 不应该花费 7 秒，它应该几乎是瞬时的。

您确定没有将事件添加到已经绑定到列表视图的集合中，从而导致列表视图为每个项目更新吗？

尝试使用它而不是 ObservableCollection：

```
class MyObservableCollection<T> : ObservableCollection<T>
{
    private bool _notifyCollectionChanged = true;

    protected override void OnCollectionChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        if (_notifyCollectionChanged)
            base.OnCollectionChanged(e);
    }

    public void AddRange(IEnumerable<T> collection)
    {
        _notifyCollectionChanged = false;
        foreach (T element in collection)
            Add(element);
        _notifyCollectionChanged = true;
        OnCollectionChanged(new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
    }
} 
```

并使用 oc.AddRange(list) 将列表添加到 ObservableCollection。

如果这没有帮助，那么您的 GetSavedEvents 函数可能会运行 7 秒，它与 ObservableCollection 无关。

# android - Android: using image instead of text on a button

> ID：12952526
> 
> 赞同：7
> 
> 时间：2012-10-18T10:27:05.393
> 
> 标签：android, image, button, insert

I've been working on my android calculator and i can't seem to insert an image instead of text on a button. For example sqrt I don't want to have sqrt written on my button i want the image of the symbol on it, the same goes for x^y and alot of others. I have my custom background of the button working just fine. Thank you for your help in advance :)

EDIT: Thats not what i wanted i did manage to get my custom button and thats fine. On my button since its a calculator button i have android:text on it saying sqrt. I want to remove that and insert another png on my button showing the symbol of the square root instead of that text. Thank you for quick responses.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T10:32:41.383

```
<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:drawableTop="@drawable/imageName"/> 
```

You can have both text and image (or no text) when using the attribute `drawableTop`, `drawableBottom`, `drawableLeft` and `drawableRight`.

And for positioning the image how you want, consider using: `paddingTop`, `paddingBottom`, `paddingLeft` and `paddingRight`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:29:37.293

You can do this by ImageButton:

```
 <ImageButton
            android:id="@+id/submitEmailButton"
            android:layout_height="wrap_content" android:layout_width="wrap_content"
            android:layout_gravity="right" android:layout_marginRight="15dip"
            android:background="@drawable/ic_submit" /> 
```

Here ic_submit is the image you want to show as a button.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:30:17.690

I used this tutorial and it worked perfectly for me: [http://www.mkyong.com/android/android-imagebutton-selector-example/](http://www.mkyong.com/android/android-imagebutton-selector-example/)

I haven't seen your code but basically you should remove the "text" tag from your xml and it should appear the image without text then.

I don't know if that's exactly what you were looking for or not, but I reccomend you to follow the tutorial and for sure it will work for you ;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:34:07.013

There are a number of alternatives you can try to implement to build your SQRT button:

*   draw the button as a 9-patch drawable so your SQRT symbol won't get distorted;
*   use a RelativeLayout with a button inside and implement a selector

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T12:11:26.163

You can simply set background for the Button and keep its text blank.

# c++ - 如何在make下编译多个文件

> ID：12952533
> 
> 赞同：2
> 
> 时间：2012-10-18T10:27:17.340
> 
> 标签：c++, compiler-construction, linker, makefile, g++

我有几个 .cpp 和 .hpp 文件。我想使用 make 编译和链接它们。我怎样才能做到这一点 ？

```
 sample.cpp sample.hpp
    sample_2.cpp sample_2.hpp
    sample_3.cpp sample_3.hpp
    ...
    and 
    main.cpp

    I have done :

    default:

             g++ -c sample sample.cpp
             g++ -c sample_2 sample_2.cpp
             g++ -c sample_3 sample_3.cpp

             g++ -o main main.cpp sample sample_2 sample_3 
```

当我在终端上键入 make 时，它​​会给出错误：

```
 /usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 0 has invalid symbol index 10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:03:15.057

`default`每个单独的输出都应该是一个 make 目标，而不是让一个目标完成所有事情。这允许 make 正常工作，一次构建一件事，以正确的顺序（或者如果依赖关系图允许，则并行构建）并在每个步骤正确报告错误。此外，非常重要的是，通过告诉 make 关于每个单独的目标*以及它们所依赖的内容，*您可以确保当依赖项更改时，make 将准确地知道由于更改的依赖项需要重建哪些目标。这是 Make 的最大特点。

在您的情况下，最终目标是`main`您希望`default`目标构建它，您可以说这`main`是一个先决条件`main`：

```
default: main 
```

现在你需要说如何构建`main`，它取决于各种目标文件，所以我们告诉 make：

```
main: main.o sample.o sample_2.o sample_3.o 
```

这表示它取决于那些目标文件（它们是它的先决条件），因此它们将首先被构建。这些对象中的每一个都是另一个将单独构建的 make 目标。

当所有的先决条件都建立好后，将使用一个配方将它们链接到`main`中，因此我们需要向上述目标添加一个配方：

```
main: main.o sample.o sample_2.o sample_3.o
        g++ main.o sample.o sample_2.o sample_3.o -o main 
```

Make 有很多缩写来简化事情，例如`$(CXX)`C++ 编译器，`$@`表示当前目标和`$^`当前目标的先决条件，因此您可以将该规则简化为：

```
main: main.o sample.o sample_2.o sample_3.o
        $(CXX) $^ -o $@ 
```

这实际上就是你所需要的，Make 已经知道如何`.o`使用其内置规则构建先决条件，因此它会看到一个名为的文件`main.cpp`，并且知道它可以将其编译为 create `main.o`，并查看`sample.cpp`并将其编译为`sample.o`等。它将创建一个依赖关系图用于决定构建需要哪些目标的makefile `default`（这意味着它决定它需要`main`和那个需要`main.o`等等`sample.o`，他们需要`main.cpp`等等`sample.cpp`已经存在，所以它可以开始构建先决条件，直到它拥有链接所需的一切`main`然后它可以做到这一点并完成。）

现在，如果您更改`sample_2.cpp`并`make`再次运行，它将看到该文件`sample_2.o`已过期并需要重新编译，但其他`.o`文件仍然可以（它们比`.cpp`它们所依赖的文件更新），因此它将重新编译`sample_2.o`并重新链接`main` *而不是重建所有文件否则*。

实际上，您可以通过使用将对象链接到可执行文件的默认配方来进一步简化它：

```
LINK.o = $(CXX)

default: main

main: main.o sample.o sample_2.o sample_3.o 
```

这就是你所需要的！但通常更清楚，尤其是对于初学者来说，使用更详细的版本，因为当您不熟悉 Make 的所有自动规则和变量时更容易自定义。

告诉 make 关于头文件的依赖关系也很有帮助，以便在头文件更改时重新构建。这可以使用编译器自动生成先决条件，但对于简单的情况，您可以直接将其添加到 makefile 中，例如

```
sample.o: sample.hpp sample.cpp 
```

# c - 在 C 中定义一个全局结构指针？

> ID：12952534
> 
> 赞同：4
> 
> 时间：2012-10-18T10:27:19.803
> 
> 标签：c, arrays, string, pointers, global

我需要识别一个由 4 个整数组成的全局结构（数组）。问题是，该结构数组的大小事先不知道。

我正在努力做某事。像这样：

```
typedef struct
{
    int value;
    int MAXleft;
    int MAXright;
    int MAX;
} strnum;

int main ()
{
    int size;
    scanf("%d", &size);

    strnum numbers[size];

    return 0;
} 
```

我听说，可以通过指针来做到这一点，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:31:52.317

您可以像这样动态地为多个结构分配空间：

```
strnum *numbers = malloc( size * sizeof(strnum) ); 
```

然后你可以像使用任何常规数组一样使用它（大多数情况下）。

使用它可能更方便，`calloc`而不是`malloc`. 它分配多个块并用零填充它们。请注意，这`malloc`不会清除分配的内存。

```
strnum *numbers = calloc( size, sizeof(strnum) ); 
```

当您完成内存时，不要忘记调用`free( numbers )`，这会将分配的内存返回给内存管理器。

如果您`free`在不再需要它时不这样做，并且分配得越来越多，那么随着程序继续工作，程序的内存占用量将无缘无故地增长。这称为内存泄漏，应该避免。它最终可能导致程序内存不足和不可预测的结果。

并且不要忘记包含一个`stdlib.h`带有内存分配函数原型的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:31:46.480

它被称为[动态内存分配](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation)

您尝试做的事情可以按如下方式完成：

```
 strnum* number;
   int size = 0;

   scanf("%d",&size);

   number = malloc(size * sizeof(strnum)); 
```

另外，不要忘记在使用完数组后释放内存。

```
 free(number); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:49:24.817

您可以从 malloc() 开始，然后在大小不断增加时执行 realloc()。我建议您一次分配一个包含 10 个结构的池，以便减少对 realloc() 的调用次数。

# java - Spring/JSTL：如何遍历地图并将输入字段绑定到值？

> ID：12952544
> 
> 赞同：4
> 
> 时间：2012-10-18T10:27:48.913
> 
> 标签：java, spring, jstl, spring-webflow

所以我的命令对象有一个`public Map<ProductVO, String> availableProducts;`，它将网站的各种产品/服务作为键，将用户希望购买的数量作为值。当然也提供了普通的 getter/setter。

此地图被实例化（作为 HashMap）并在设置步骤中填充我们数据库中的所有产品，并且所有值最初设置为“0”。

然后在 jsp 中，我有一个表格来连续显示每个产品，每行包含 product.description、product.price，然后是一个输入字段，用户可以在其中输入他们想要的产品数量或将其保留为零（不用担心非数字验证，将在其他地方处理）。

我的 JSTL foreach 看起来像这样；

```
<c:forEach var="availableProductEntry" items="${credit.availableProducts}">
    <c:set var="product" value="${availableProductEntry.key}" />
    <tr>
        <td>${product.description}</td>
        <td>${product.price}"</td>
        <td><form:input path="${availableProductEntry.value}" /></td>
    </tr>
</c:forEach> 
```

这适用于显示，即表格完全按照我想要的方式显示，所有产品都迭代和显示，描述、价格和字段的初始值正确。

然而，在字段中输入一些数字并点击提交后，我检查了命令对象，看起来地图值没有更新，它们仍然是“0”。

我可能`path="${availableProductEntry.value}"`弄错了部分。

有没有办法让动态生成的输入字段更新他们最初从中提取值的 Map 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:28:39.347

你实际上需要使用这个：

```
<form:input path="availableProducts[${product}]" /> 
```

这当然是如果您的命令对象是“信用”，这听起来像是来自您的帖子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:33:16.140

我相信你需要使用这样的东西：

```
<form:input path="${availableProductEntry[product]}" /> 
```

您需要遵守 JavaBeans 命名约定（因此 getBean() 和 setBean()），因此您不能像以前那样使用 Map。

# python - sqlite3.InterfaceError：错误绑定参数 1 - 可能不支持的类型

> ID：12952546
> 
> 赞同：27
> 
> 时间：2012-10-18T10:27:50.637
> 
> 标签：python, sqlite

我遇到了这个我无法解决的烦人错误。这是我的功能

```
def savePicture(pic):
try:
    connection=sqlite3.connect('/home/faris/Desktop/site/site.db')
    db=connection.cursor()
    print type(pic.user.profile_picture)
    db.execute('INSERT INTO pictures (picture_id, caption, created_time, picture_url, link, username,full_name,profile_picture) VALUES (?,?,?,?,?,?,?,?)',
        [
        pic.id,
        pic.caption,
        pic.created_time,
        pic.get_standard_resolution_url(),
        pic.link,
        pic.user.username,
        pic.user.full_name,
        pic.user.profile_picture
        ])
    connection.commit()
    connection.close()
except sqlite3.IntegrityError:
    print 'pic already exist' 
```

这是我的表（Sqlite：D）

```
-- Describe PICTURES
CREATE TABLE "pictures" (
"picture_id" INTEGER PRIMARY KEY,
"caption" TEXT,
"created_time" TEXT,
"picture_url" TEXT,
"link" TEXT,
"username" TEXT,
"full_name" TEXT,
"profile_picture" TEXT
) 
```

这是我遇到的错误，

```
<type 'str'>
Traceback (most recent call last):
File "/home/faris/Desktop/site/cron/pictures.py", line 15, in <module>
savePicture(picture)
File "/home/faris/Desktop/site/db.py", line 36, in savePicture
pic.user.profile_picture
sqlite3.InterfaceError: Error binding parameter 1 - probably unsupported type. 
```

如您所见，我已经打印了“pic.user.profile_picture”的类型并返回了 str 我还尝试使用这两个函数（ unicode 和 str ），以确保它返回一个没有运气的字符串。

有任何想法吗？欢呼：D

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T10:56:34.080

好吧，那是愚蠢的大声笑

```
 pic.caption,
    pic.created_time, 
```

不是 TEXT 类型..但是错误消息是来自 pic.user.profile_picture 的问题。因此，如果您遇到此错误**，只需检查所有参数**:)

> > 阅读下面的评论:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-10-24T19:14:22.297

解决该问题的最简单方法是将所有数据框列转换为 str，并应用 to_sql 方法。 `df = df.applymap(str)` 否则，您可以在将数据框保存到 SQLite 表之前更改与 SQLite 数据类型兼容的每一列的数据类型。 `dtype`方法的参数`to_sql`对于在将数据插入 SQL 表时转换列的数据类型很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-21T11:52:45.623

错误信息

> 错误绑定参数 1 - 可能是不受支持的类型

报告传递给 cursor.execute 的值序列中位置 1 ^(*的值是)[Python 的 sqlite3 模块不支持](https://docs.python.org/3/library/sqlite3.html#sqlite-and-python-types)的类型的实例。

Python 的 sqlite3 模块默认支持传递`None`, `int`, `float`, `str`,`bytes`也知道如何适配`datetime.date`和`datetime.datetime`实例化。

要修复错误，请将报告位置的值转换为支持的类型。

可以通过注册适配器和转换器来模拟在数据库中存储不受支持的类型，以将该类型的对象与受支持的类型之一进行转换^(**)。这是用于处理`date`和`datetime`实例的机制。想象一下，我们有一个`Fruit`类，我们希望能够在数据库中存储和检索。

```
class Fruit:
    def __init__(self, name):
        self.name = name

    def __repr__(self):
        return f'Fruit({self.name!r})' 
```

我们创建适配器和转换器函数，并将它们注册到 sqlite：

```
def adapt_fruit(fruit):
    # We must return a supported type.
    return fruit.name

def convert_fruit(value):
    # value will always be bytes.
    return Fruit(value.decode('utf-8'))

sqlite3.register_adapter(Fruit, adapt_fruit)

# The first argument is the type of column that will store "fruits".
sqlite3.register_converter('fruit', convert_fruit) 
```

我们可以传递`detect_types`给连接并创建一个类型为列的表`fruit`：

```
apple = Fruit('Apple')
banana = Fruit('Banana')

with sqlite3.connect('so12952546.db', detect_types=sqlite3.PARSE_DECLTYPES) as conn:
    cur = conn.cursor()
    cur.execute("""DROP TABLE IF EXISTS tbl""")
    # Create a column with our "fruit" type.
    cur.execute("""CREATE TABLE tbl (name fruit)""")
    # Pass Fruit instances as values.
    cur.executemany("""INSERT INTO tbl (name) VALUES (?)""", [(apple,), (banana,)])
    conn.commit()
    cur.execute("""SELECT name FROM tbl""")
    # Fruit instances are returned.
    for row in cur:
        print(row) 
```

输出：

```
(Fruit('Apple'),)
(Fruit('Banana'),) 
```

该列将在 Sqlite 中具有类型，但在这种情况下，`fruit`它将与支持的存储类关联：`text`

```
sqlite> .schema tbl
CREATE TABLE tbl (name fruit);
sqlite> SELECT name, typeof(name) FROM tbl;
Apple|text
Banana|text 
```

* * *

^*位置是使用从零开始的计数来计算的，所以位置一是*第二个*值

^(**)此示例未涵盖所有选项 - 请阅读模块文档了解所有详细信息。

# ruby-on-rails - 更新 ActiveRecord (Rails) 中的当前值

> ID：12952548
> 
> 赞同：2
> 
> 时间：2012-10-18T10:27:57.870
> 
> 标签：ruby-on-rails, activerecord

在我的应用程序中，Rails 已经预加载了许多对象。

现在我想更新其中一些对象属性。不幸的是，其中一些对象与我数据库中的同一对象相关。当我向 myObject.balance( ) 添加一个值时， *differentButSameObject*`myObject.balance += value`中的属性 balance仍然具有相同的值。

 *一种解决方案可能是重新加载对象。我更愿意像这样更新值： `UPDATE myTable SET balance = balance + 10 WHERE id = 1`.

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T10:43:40.553

您可以使用 ActiveRecords update_all 语句：

```
Object.where(:id => 1).update_all("balance = balance + 1") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T15:55:32.427

您可以将以下代码添加到您的模型中。它使用 update_counters 执行正确的查询（例如，执行 COALESCE）：

```
 def inc(counter, by = 1)
  raise "Cannot update column of a non-persisted model" unless persisted?
  self.class.update_counters(id, counter => by)
  increment(counter, by)
end 

```*

# c - int 和signed int 声明的区别

> ID：12952553
> 
> 赞同：18
> 
> 时间：2012-10-18T10:28:09.730
> 
> 标签：c, types, int, standards, declaration

我正在阅读一些关于嵌入式编程的教程，其中一个说`int`并且`signed int`是不同的，但没有解释如何或为什么。

我理解为什么`unsigned int`和`int`不同，但是`int`不同`signed int`对我来说是一个新的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-18T10:38:19.850

这只是出于历史原因。今天，每当您声明时，`int`您都会得到一个`signed int`. 即使使用今天的编译器，您可能会看到差异的唯一一点是 with`char`与`signed char`规范不同（并且在分配文字字符串时值得注意）但与`int`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T10:46:23.180

据我所知，差异仅存在于 char 数据类型。在哪里`char a;`可以`signed char a;`或`unsigned char a;`取决于编译器选项。正如[这篇文章](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka11308.html)所说。`int`(--signed_chars) 对于 int 数据类型，和之间没有区别`signed int`。

# javascript - 循环中的jquery动画返回相同的索引

> ID：12952555
> 
> 赞同：0
> 
> 时间：2012-10-18T10:28:24.300
> 
> 标签：javascript, jquery, loops

我在这里有一个循环内的动画问题。输出就像我猜的那样，但不是我想要的。

```
for (var i = 0; i < slots.length; i++) {
  $('#slot-'+i).animate({
    marginTop: -10
  }, 200, function() {
    console.debug(i);
    if (i == 0) somefunction();
  });
} 
```

问题是 console.debug(i) 每次都输出 for 循环的最后一个索引。

我想要实现的是：在动画的完整功能中，我想调用一个函数 - 但只有一次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:31:19.323

```
for (var i = 0; i < slots.length; i++) {
    $('#slot-' + i).animate({
        marginTop: -10
    }, 200, (function(count) {
        return function() {
            console.debug(count);
            if (count == 0) somefunction();
        };
    })(i));
} 
```

这里的问题是，除非您使用立即调用的函数表达式来为每次迭代**返回**适当的成功处理程序，否则所有处理程序都将引用 i 的相同值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:33:48.823

试试这个：

```
var i = 0;
for (i=0; i < slots.length; i++) {
$('#slot-'+i).animate({
    marginTop: -10
  }, 200, function() {
    console.debug(i);
    if (i == 0) somefunction();
  });
} 
```

# php - 如何命名 RESTLER json 结果

> ID：12952556
> 
> 赞同：0
> 
> 时间：2012-10-18T10:28:25.207
> 
> 标签：php, json, restler

请原谅我的术语，我是网络开发的新手。

为了可视化我的问题，请参见下文。

这是 RESTLER 显示 json 的方式：

> ```
> [
>  {
>    "id": 1,
>    "name": "Daniel Craig",
>    "email": "dc@gmail.com"
>  },
>  {
>    "id": 2,
>    "name": "Tom Cruise",
>    "email": "tc@gmail.com"
>  }
> ] 
> ```

这就是我希望 RESTLER 显示 json 结果的方式：

> ```
> {"actors":[
>  {
>    "id": 1,
>    "name": "Daniel Craig",
>    "email": "dc@gmail.com"
>  },
>  {
>    "id": 2,
>    "name": "Tom Cruise",
>    "email": "tc@gmail.com"
>  }
> ]} 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:57:21.273

只需用另一个数组包装你的结果。如果我们假设`$result`返回上面的第一个结果，请执行以下操作

```
$result = array(
 array(
   "id" => 1,
   "name" => "Daniel Craig",
   "email" => "dc@gmail.com"
 ),
 array(
   "id" => 2,
   "name" => "Tom Cruise",
   "email" => "tc@gmail.com"
 )
);

return array('actors'=>$result); 
```

# javascript - 在没有 $.ajax() 的情况下设置 AJAX 超时

> ID：12952570
> 
> 赞同：1
> 
> 时间：2012-10-18T10:28:52.830
> 
> 标签：javascript, ajax, load, modal-dialog

我想在加载数据 2 秒后设置超时。我是 ajax 新手，所以请通过我的代码澄清...因为我已经看到很多（在 ajax 上设置超时）答案，但每个人都通过 $.ajax()。

我怎么能通过 .load() 做？有没有可能？

我的 AJAX 代码 1：

```
// Start of our new ajax code
        if (!url) {
            url = jQuery('#product_addtocart_form').attr('action');
        }
        url = url.replace("checkout/cart","ajax/index"); // New Code
        var data = jQuery('#product_addtocart_form').serialize();
        data += '&isAjax=1';
        jQuery('#ajax_loader').show();
        try {
            jQuery.ajax( {
                url : url,
                dataType : 'json',
                type : 'post',
                data : data,
                success : function(data) {
                    jQuery('#ajax_loader').hide();
                    parent.setAjaxData(data,true);
                }
            });
            jQuery("#productOptions").modal('hide');
        } catch (e) {
            //alert(e);
        }
        // End of our new ajax code 
```

2：

```
// AJAX product options modal
$('.optionsTrigger').on('click', function() {
    var target, url;
    target = $(this).attr('data-target');
    url = $(this).attr('href');
    $(target).load(url, function(){
        $(target).modal({
            show: true
        });
    });
});
$('#productOptions').on('hidden', function() {
    $('#productOptions').html('<img src="<?php echo $this->getSkinUrl("img/loading.gif"); ?>" id="optionsLoading" />');

    window.setTimeout("Tick()", 2000);

    function Tick()
     {

     }  
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:37:18.060

jQuery 有可用的[`ajaxSetup()`方法](http://docs.jquery.com/Ajax/jQuery.ajaxSetup)。您可以在那里将所有选项设置为正常`ajax()`方法，包括`timeout`选项。当您通过 调用 AJAX 请求时，设置的设置也应该可用`load()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:36:01.720

*首先，让您了解 Ajax 是异步*的（如）这一事实`setTimeout`——回调将在未来的某个时候被调用。

如何超时？你可以使用

```
var request = jQuery.ajax(…);
setTimeout(function() {
    request.abort();
}, 2000);
request.done(function callback(){ … }); 
```

但它比这简单得多，jQuery 已经为它的[option object](http://api.jquery.com/jQuery.ajax/)`timeout`提供了一个参数。[`ajax()`](http://api.jquery.com/jQuery.ajax/)

但是，这是不可能的[`load`](http://api.jquery.com/load/)- 这里不是返回 jqXHR 对象，而是当前的 jQuery DOM-selection。要么，您必须[全局配置 ajax](http://api.jquery.com/jQuery.ajaxSetup/)，要么您自己不使用`load`和构建该方法 - 这并不难，请参阅[源代码](https://github.com/jquery/jquery/blob/master/src/ajax.js#L164)

# java - BST 上的字典实现

> ID：12952571
> 
> 赞同：0
> 
> 时间：2012-10-18T10:28:59.023
> 
> 标签：java, dictionary, implementation, binary-search-tree

嗨，我是java新手，我需要在二叉搜索树上实现一个字典，但我真的不知道从哪里开始。我必须在这本字典中存储一些有名字和年龄的学生。因此，在 BST 中，我将存储年龄，但我在哪里存储学生的姓名以及如何将姓名与年龄字段联系起来。

如果您有这样的实现示例，我将不胜感激，不一定是所有代码，而只是开始，所以我可以开始。如果你在java中没有它，c++代码也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:35:19.760

字典是一种将键映射到值并允许查询给定键的值的数据结构。二叉搜索树还具有键（用于搜索）并且还可以具有进一步的有效负载数据（值）。因此，带有有效负载数据的 BST 实际上已经是一个字典。

因此，首先编写一个常用的 BST 实现（参见 Wikipedia 以获得简单的实现，例如[http://en.wikipedia.org/wiki/Binary_search_tree](http://en.wikipedia.org/wiki/Binary_search_tree)）。向节点添加有效负载属性。添加一个函数`lookup(key)`，它将首先使用键搜索节点`key`（使用通常的 BST 查找）并返回该节点的有效负载属性。等等，你有你的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:39:29.650

在 Internet 上有许多用于创建简单二叉搜索树的资源。字典被简单地定义为允许您检索给定键的值的数据结构。二叉搜索树已经做到了这一点。你真正需要做的是创建一个`Student`类，然后`Comparable`在类中实现接口`Student`。然后，此`compareTo`方法将按年龄对学生进行排序（假设年龄是`Student`班级中的一个字段）。

类似于：

```
public class Student implements Comparable<Student> {

    public Integer age;

    public Integer getAge() {
        return age;
    }

    public int compareTo(Student o) {
        return this.getAge().compareTo(o.getAge);
    }

} 
```

# ios5 - iOS6 中的 CollapsableTableView、UIViewControllerHierarchyInconsistency 错误

> ID：12952574
> 
> 赞同：4
> 
> 时间：2012-10-18T10:29:10.057
> 
> 标签：ios5, uiviewcontroller, uikit, ios6

我有一个使用 CollapsableTableView 的 iPhone 应用程序。升级到 iOS 6 后，应用程序崩溃并出现以下错误。

> “一个视图一次最多只能与一个视图控制器关联！视图与 CollapsableTableViewHeaderViewController：0x8a93430 关联。在将此视图与 CollapsableTableViewHeaderViewController 关联之前清除此关联：0x8a943c0”

如果你们中的任何人遇到同样的问题以便找到解决方案，那将会很有帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:05:59.117

你必须使用这样的东西：

[self.addSubView collapsableViewController.view];

不允许这种关联，因为一个视图不能与错误描述中所述的两个视图控制器关联。

# database - MVC 4 - 播种数据库网页后_Roles 仍然为空

> ID：12952575
> 
> 赞同：3
> 
> 时间：2012-10-18T10:29:15.187
> 
> 标签：database, asp.net-mvc-4, entity-framework-5

所以我有基本的 MVC 4 Internet 应用程序项目和 Entity Framework 5。

我已经为用户配置了使用我的表的 WebSecurity。

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "Users", "Id", "Email", autoCreateTables: true); 
```

然后在我的迁移配置类中，我使用新角色为 DB 播种并向它们添加用户。

```
internal sealed class Configuration : DbMigrationsConfiguration<Infrastructure.KlepecV2Db>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
    }

    protected override void Seed(Infrastructure.KlepecV2Db context)
    {
        if(!Roles.RoleExists("Admin"))
        {
            Roles.CreateRole("Admin");
        }
        if (!Roles.RoleExists("Test1"))
        {
            Roles.CreateRole("Test1");
        }
        if(Membership.GetUser("user1") != null)
        {
            if(!Roles.IsUserInRole("user1","Admin"))
            {
                Roles.AddUserToRole("user1", "Admin");
            }
        }
        if (Membership.GetUser("user2") != null)
        {
            if (!Roles.IsUserInRole("user2", "Admin"))
            {
                Roles.AddUserToRole("user2", "Admin");
            }
        }
    }
} 
```

因此，当我在 NuGet 控制台中键入“update-database”时，所有内容都会毫无错误地执行。但是，如果我查看 pages_Roles 表，它是空的。pages_UsersInRoles 也是空的。

为了测试，我删除了 Role.RoleExists() 调用并且更新数据库失败，因为角色已经存在。

我在这里想念什么？这个角色存储在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T22:16:37.123

我遇到了`The Role Manager feature has not been enabled`@Magnus 提到的一个错误。希望这可能与您的角色问题有关，其中默认角色提供者未知。

`The Role Manager feature has not been enabled`当我**将**`WebSecurity.InitializeDatabaseConnection`方法从 MVC 项目移动到**类库**（数据访问）以进行代码优先迁移种子时，发生了错误。

**关键是`App.config`需要配置包管理器`Update-Database`命令才能像`Web.config`存在时一样运行。**

下面是我的`App.config`和`Seed`。注意

1.  ~~我添加`"DefaultConnection"`连接字符串~~*
2.  添加`system.web->roleManager`以设置`enable="true"`
3.  添加以通过提供完整的程序集名称`runtime->assemblyBinding->qualifyAssembly`来提示编译器在哪里。`WebMatrix.WebData`

应用程序配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <!--<add name="DefaultConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=Db;Persist Security Info=True;User=user;Password=pass" providerName="System.Data.SqlClient" />-->
  </connectionStrings>
  <system.web>
    <roleManager enabled="true" defaultProvider="simple">
      <providers>
        <clear />
        <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData" />
      </providers>
    </roleManager>
    <membership defaultProvider="simple">
      <providers>
        <clear />
        <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
      </providers>
    </membership>
  </system.web>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <qualifyAssembly partialName="WebMatrix.WebData" fullName="WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

种子方法：

```
protected override void Seed(DatabaseContext context)
{
    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "Users", "Id", "Email", autoCreateTables: true);

    if(!Roles.RoleExists("Admin"))
    {
        Roles.CreateRole("Admin");
    }
    if (!Roles.RoleExists("Test1"))
    {
        Roles.CreateRole("Test1");
    }
    if(Membership.GetUser("user1") != null)
    {
        if(!Roles.IsUserInRole("user1","Admin"))
        {
            Roles.AddUserToRole("user1", "Admin");
        }
    }
    if (Membership.GetUser("user2") != null)
    {
        if (!Roles.IsUserInRole("user2", "Admin"))
        {
            Roles.AddUserToRole("user2", "Admin");
        }
    }
} 
```

希望这将有助于`The Role Manager feature has not been enabled`在类库中使用代码优先迁移种子时遇到问题的任何人。

## **更新**

`*`EF5 将读取 Mvc 项目的 Web.config 中的连接字符串，但不会读取带有 EF 迁移的项目的 App.config 中的连接字符串。但是，EF 迁移项目中仍然需要`membership`and设置。`roleManager`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T15:10:51.753

想在对话中增加我的 0.02 美元。我有与 CallMeLaNN 类似的设置，但仍然出现错误。我的解决方案是将我的“数据”项目设置为启动项目。之后，我的 app.config 文件开始被拾取，我现在可以从`Update-Database`命令中为我的用户播种。

# c# - 使用 OpenExcel 更改图纸方向

> ID：12952576
> 
> 赞同：2
> 
> 时间：2012-10-18T10:29:21.787
> 
> 标签：c#, excel

我使用这个[OpenXML 电子表格库](http://openexcel.codeplex.com/)在我的代码中创建 excel 文档。该项目没有任何文档。

我想将纸张方向**从左到右**更改为**从右到左**。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-28T05:59:15.163

您可以使用 SheetView.RightToLeft 属性

```
SheetViews sheetViews1 = new SheetViews();  
SheetView sheetView1 = new SheetView()
{
     WorkbookViewId = (UInt32Value)0U, 
     RightToLeft = true
};  
sheetViews1.Append(sheetView1); 

worksheet.Append(sheetViews1); 
```

# css - 指定百分比高度时，边框在 Chrome 中消失

> ID：12952580
> 
> 赞同：1
> 
> 时间：2012-10-18T10:29:29.587
> 
> 标签：css, google-chrome, border, percentage

我有一个1-pixel-border 和*height:29%的**div*。由于某种原因，Chrome 将其呈现为没有底部边框。

 *见[http://jsfiddle.net/9WVuC/4/](http://jsfiddle.net/9WVuC/4/)

这个问题取决于实际的百分比值和容器大小；当我更改它们时，边框有时会出现有时会消失。*Chrome 渲染引擎在计算实际div*的高度时似乎存在一些舍入误差。此外，仅当为该*div指定**溢出*和*位置时才会发生**时才会发生这种情况。*

 *这是一个已知的错误，也许存在一些解决方法？当然，我可以通过手动重新计算高度并使用 JS 设置它来摆脱那个百分比值，但这不是一个非常优雅的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:08:11.363

这是因为`overflow:hidden;`您在 div 上的样式，边框实际上出现在所讨论的 div 之外，所以根据 div 的高度（它是一个 %）它没有考虑这个边框。

查看您的代码，我建议您将您`overflow:hidden;`移至 div 的包含元素（the ），以解决问题，并且如果溢出`td`，将对元素的内容产生相同的影响。`class="lower"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:59:27.853

您可以通过将高度设置为来修复此“错误”`height: 28.95%;`

确保不要使用表格进行布局。它们应该只用于表格数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:00:16.697

降低高度或移除溢出：隐藏

```
lower{
height: 28%;
position: relative;
overflow: hidden;
border: solid 1px black;
} 
```

[小提琴演示](http://jsfiddle.net/9WVuC/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-11T09:03:28.157

这可能是一个渲染问题，具体取决于屏幕/窗口大小和元素的计算大小（带小数）。对我来说，一个解决方法是`box-shadow`在缺少边框的地方放置一个不可见的，它可以修复渲染。对于底部边框，它看起来像这样：

```
box-shadow: 0 1px 0 0 rgba(255,255,255,0); 
```**

# postgresql - 在 PostgreSQL 中搜索子字符串

> ID：12952581
> 
> 赞同：1
> 
> 时间：2012-10-18T10:29:33.053
> 
> 标签：postgresql

我有一个 PostgreSQL 8.4。我有一个表，我想使用子查询返回的子字符串（字符变化数据类型）在该表的一行（字符变化数据类型）中查找一个字符串：

```
SELECT  uchastki.kadnum
FROM  uchastki
WHERE kadnum LIKE (
    SELECT str
    FROM test
    WHERE str IS NOT NULL) 
```

但是得到一个错误

```
ERROR:  more than one row returned by a subquery used as an expression 
```

在字段中 ，`test.str`我有类似`66:07:21 01 001`in的字符串`uchastki.kadnum` `66:07:21 01 001:27`。

如何使用子查询的结果查找子字符串？

**更新**

表测试：

```
CREATE TABLE test
(
    id serial NOT NULL,
    str character varying(255)
)
WITH (
    OIDS=FALSE
);
ALTER TABLE test OWNER TO postgres; 
```

表 uchastki:

```
CREATE TABLE uchastki
(
    fid serial NOT NULL,
    the_geom geometry,
    id_uch integer,
    num_opora character varying,
    kod_lep integer,
    kadnum character varying,
    sq real,
    kod_type_opora character varying,
    num_f11s integer,
    num_opisanie character varying,
    CONSTRAINT uchastki_pkey PRIMARY KEY (fid),
    CONSTRAINT enforce_dims_the_geom CHECK (st_ndims(the_geom) = 2)
)
WITH (
    OIDS=FALSE
);
ALTER TABLE uchastki OWNER TO postgres; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T11:11:48.380

使用`like any`：

```
SELECT  uchastki.kadnum
FROM  uchastki
WHERE kadnum LIKE  ANY(
   SELECT str
   FROM test
WHERE str IS NOT NULL) 
```

也许：

```
SELECT  uchastki.kadnum
FROM  uchastki
WHERE kadnum LIKE  ANY(
   SELECT '%' || str || '%'
   FROM test
WHERE str IS NOT NULL) 
```

这是一个不错的功能，您可以使用不同的运算符，例如`= any (select ... )`，或`<> all (select...)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:18:29.610

我将在黑暗中大胆尝试，假设您的意思是要将 table 中的一个字符串与 table 中的一个或多个其他字符串进行匹配，`Sa`以`A`找出其中的任何其他字符串是否是.`S1 .. Sn``B``S1 .. Sn``Sa`

一个简单的例子来说明我的意思（提示，提示）：

鉴于：

```
CREATE TABLE tableA (string_a text);
INSERT INTO tableA(string_a) VALUES 
('the manual is great'), ('Chicken chicken chicken'), ('bork');

CREATE TABLE tableB(candidate_str text);
INSERT INTO tableB(candidate_str) VALUES
('man'),('great'),('chicken'); 
```

我想要结果集：

```
the manual is great
chicken chicken chicken 
```

因为`the manual is great`有`man`并且`great`在其中；因为里面`chicken chicken chicken`有`chicken`。无需显示匹配的子字符串。`bork`不匹配任何子字符串，因此找不到。

这是带有示例数据的[SQLFiddle 。](http://sqlfiddle.com/#!12/fc538/1)

如果是这样，厚颜无耻地窃取@maniek 的绝妙建议，您将使用：

```
SELECT string_a 
FROM tableA 
WHERE string_a LIKE ANY (SELECT '%'||candidate_str||'%' FROM tableB); 
```

（请为@maniek 投票，我只是在说明如何清楚地解释 - 我希望 - 你想要实现的目标、样本数据等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:32:47.540

（注：此答案是在进一步讨论澄清发帖人的实际意图之前写的）

`str`在`test`where 中似乎很可能不止一个`str IS NOT NULL`。这就是用作表达式的子查询返回多行的原因，也是语句失败的原因。

单独运行子查询以查看它返回的内容，您将看到。也许您希望它是一个[相关的子查询](http://en.wikipedia.org/wiki/Correlated_subquery)，但忘记了外部列引用？或者也许在外部表中也有一个列`str`，您打算写：

```
SELECT  uchastki.kadnum
FROM  uchastki
WHERE kadnum LIKE (
SELECT test.str
FROM test
WHERE uchastki.str IS NOT NULL) 
```

?

（*提示：在列引用上始终使用表别名有助于避免名称冲突混淆）*。

# image - 使用 G-WAN 上传文件

> ID：12952585
> 
> 赞同：0
> 
> 时间：2012-10-18T10:29:39.267
> 
> 标签：image, xmlhttprequest, form-data, g-wan

我正在尝试将带有 XMLHttpRequest 和 FormData API 的图像文件上传到我的 G-WAN 服务器，但我无法检索文件内容。这是 h_entities 中的输出：

```
-----------------------------75940917410019849751723987620 Content-Disposition: form-data; name="test_param" test_value 
-----------------------------75940917410019849751723987620 Content-Disposition: form-data; name="uploadedFile"; filename="test.png" Content-Type: image/png PNG 
```

“内容类型”是多部分/表单数据。有没有人设法将文件上传到 G-WAN？我找不到一个例子。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:32:40.897

我花了最后几个小时为 G-WAN v3.10+ 编写了一个名为`entity.html`（带有文件`[browse]`按钮的表单`POST`）的专用示例，它将调用`entity.c`servlet（报告有关`POST`实体的所有内容并列出其前 1,000 个字节）。

您的 G-WAN 版本 3.3 将遇到的第一件事是 POST 实体大小限制 - 您将收到 HTTP 错误 413（请求实体太大）。

我编写了一个 servlet 示例`entity_size.c`，用于显示如何修改此限制（这可以在处理程序或 servlet 中随时完成）。

您必须做的第二件事（使用 G-WAN v3.10+ 自动完成）是加载尚未加载 HTTP 请求的实体的任何缺失部分（在 v3.3 中，这需要一个处理程序使用返回码来阅读更多内容，直到所有内容都加载完毕）。

这两点是反复出现的问题（在现已解散的论坛上），所以是时候举个例子了。

因此，除非您非常勇敢（并且愿意遵循上述指示），否则您已经明白，等待本月晚些时候发布的 v3.10 可能会更好：它将为您完成工作，您将拥有一个几个经过测试的示例可供学习。

请注意，`entity.c`也可以调用它来分析任何类型的请求，不仅是`multipart/form-data`编码，而且不仅是`POST`请求（它还演示了`PUT`和`DELETE`）。

最后一点：我还修改了代码以确保 URI 参数和`POST/PUT`实体都列在 servlet 中`argc/argv main()`。

这允许执行以下操作：`POST /?blog/user/1245/day/24`您需要访问的所有内容`user=1245`和`day=24`（以及实体）都是读取`argv[]`.

希望这对您的项目有所帮助！

# css - 在 less 中转义字符串并传递变量

> ID：12952587
> 
> 赞同：7
> 
> 时间：2012-10-18T10:29:41.083
> 
> 标签：css, less

通过使用 Less，我需要转义 LESS 无法识别的字符串。

```
filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr=#26ffffff, endColorstr=#24ffffff)"; 
```

同时我需要将两个变量 startColor 和 endColor 传递给这个字符串

```
.get-ARGB(@startColor, @endColor){
    /* ARGB backgrounds for IE 7+8 (black background with 50% transparancy) */
    filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr=@startColor, endColorstr=@endColor)";
} 
```

有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T11:36:57.727

使用字符串插值：

```
 filter: ~"progid:DXImageTransform.Microsoft.gradient(startColorstr=@{startColor}, endColorstr=@{endColor})"; 
```

# asp.net - Web 应用程序 - 读取 USB 令牌

> ID：12952588
> 
> 赞同：1
> 
> 时间：2012-10-18T10:29:48.077
> 
> 标签：asp.net, asp.net-mvc, usb

我正在使用 ASP.NET MVC 4 开发一个网站，出于安全原因，只有几台计算机可以登录。

最近我看到这个视频显示了一个 USB 令牌登录： [http ://www.youtube.com/watch?v=J9z1xkng3FQ&feature=relmfu](http://www.youtube.com/watch?v=J9z1xkng3FQ&feature=relmfu)

我的问题是，我的应用程序如何从 USB 读取数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:35:35.343

您需要在客户端 PC 上安装某种浏览器插件或应用程序。

另一个想法是将密钥存储在模拟键盘并将密钥键入网站的棒上。

当您使用像“eToken”这样的商业代币时，它们会附带所需的工具。

# spring - Bean 中的构造函数

> ID：12952589
> 
> 赞同：1
> 
> 时间：2012-10-18T10:30:00.093
> 
> 标签：spring, spring-mvc, javabeans

我有一个关于创建新 bean 的小问题。基本上根据请求，我得到一些参数，这些参数需要传递给 bean。下面我为每个请求实例化 ControllerService。相反，我希望它是一个具有 scope=protype 的 bean。这样我就可以为每个请求获得一个新对象。但是，我如何设置通过 bean 中的构造函数发送的 2 个属性（kpiName、kpiInput）？

```
@Autowired
@Qualifier("serviceManager")
Cleanser serviceManager;  

@RequestMapping(method = RequestMethod.POST)
public @ResponseBody
String getKPIResult(@RequestParam("kpiName") String kpiName,
            @RequestParam("kpiInput") String kpiInput) {    

    return serviceManager.checkAndExecute(new ControllerService(kpiName, kpiInput));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:12:22.720

不。Spring MVC 中的 Controller 主要源自旧的 Java servlet，按照规范，它应该是无状态的。

事实上，控制器对象被硬缓存在处理程序映射框架内，而不是从每个请求的 bean 上下文中获取。将范围设置为“原型”实际上不会做任何事情，因为处理程序（控制器）实际上只得到一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:06:10.067

在这样的情况下，你违背了 Spring 的原则，我建议你可能正在以一种不被认为是最佳实践的方式做某事。没有更多的上下文很难看到。

Spring Social 使用`request`范围 bean 为特定用户体现存储库。我现在知道为什么，因为这是一种非常低效的做事方式，而且恕我直言，更难理解。

```
<bean id="connectionRepository" factory-method="createConnectionRepository"
    factory-bean="usersConnectionRepository" scope="request">
    <constructor-arg
        value="#{T(org.springframework.security.core.context.SecurityContextHolder).getContext().getAuthentication().getPrincipal()}" />
    <aop:scoped-proxy proxy-target-class="false" />
</bean> 
```

您可以在此处看到在需要类的实例时使用`factory-bean`and`factory-method`声明要调用的类/方法。构造函数参数使用 SpEL 传递。我不太确定如何使用 Spring MVC 响应 Web 请求来实现这一点，但我相当确定您可以使用 Spring Integration 传递消息并使用 SpEL 从该消息中获取标头/有效负载以传递给构造函数。

不过，我真的会在这里质疑您的设计模式——一个更常见的 SOA 习惯用法是在启动时创建服务，并从那里开始尽可能地让它们无状态，而不是为每个请求创建一个具有特定状态的实例。祝你好运！

# asp.net-mvc-3 - Linq To Entity 排除相关数据

> ID：12952590
> 
> 赞同：0
> 
> 时间：2012-10-18T10:30:01.410
> 
> 标签：asp.net-mvc-3, linq, linq-to-entities, entity-framework-4.1

我正在构建一个使用 Entity Framework 4.1 的 ASP.Net MVC 3 Web 应用程序。我还将工作单元模式与通用存储库一起使用。我的模型中有两个实体，**Shift**和**ShiftDate**。请参阅下图了解它们的结构。这个想法是，一个**Shift**可以有 1 个或多个**ShiftDates**，一个**ShiftDate**只能属于一个**Shift**。

![在此处输入图像描述](../Images/b2a4d15584e1f8319bfe1d9d60ea4865.png)

我希望创建一个查询，它将像这样返回所有**班次的列表**

```
public IList<Shift> GetShifts(int id)
{
   return _UoW.Shifts.Get(s => s.organisationID == id).OrderBy(s => s.startDate).ToList();
} 
```

然后在我的 Razor 视图中，我希望使用 foreach 循环并列出每个 Shift 的详细信息。其中一个细节是每个**Shift具有的****ShiftDates**总数。为此，我会做类似的事情

 **```
foreach(var shiftDate in Model.Shifts)
{
    @Html.DisplayFor(modelItem => item.ShiftDates.Count)
} 
```

这工作正常，但是，我希望计数排除**shiftDateStatusID**设置为 442 的 ShiftDates。为此，我尝试将我的 Linq 查询修改为此

```
return _UoW.Shifts.Get(s => s.organisationID == id && s.ShiftDates.Any(sd => sd.shiftDateStatusID != 442))
.OrderBy(s => s.startDate).ToList(); 
```

但是，这仍然会拉回 shiftDateStatusID 为 442 的 ShiftDates。

希望这是有道理的。

任何反馈将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:17:57.363

如果你这样做

```
_UoW.Shifts.Get(s => s.organisationID == id
                     && s.ShiftDates.Any(sd => sd.shiftDateStatusID != 442) 
```

你得到的班次至少`ShiftDate`有一个`shiftDateStatusID`不是 442。好吧，可能有很多班次满足这个条件。这些班次的`ShiftDates`集合将被完全加载，包括具有 442（如果有）的那些。

`ShiftDate`当您填充视图模型时，您必须排除状态为 442 的s，或者当它仅用于计数时，在您进行计数时排除它们：

```
item.ShiftDates.Count(sd => sd.shiftDateStatusID != 442) 
```**

# distinct - Hive 分区列似乎可以防止“选择不同”

> ID：12952595
> 
> 赞同：1
> 
> 时间：2012-10-18T10:30:36.120
> 
> 标签：distinct, hive, partitioning, hiveql

我在 Hive 中创建了一个表，如下所示：

```
CREATE TABLE application_path
    (userId STRING, sessId BIGINT, accesstime BIGINT, actionId STRING)
ROW FORMAT DELIMITED
FIELDS TERMINATED BY '#'
STORED AS TEXTFILE; 
```

在此表上运行查询：

```
SELECT DISTINCT userId FROM application_path; 
```

给出预期的结果：

```
user1@domain.com
user2@domain.com
user3@domain.com
... 
```

然后我更改了声明以添加一个分区：

```
CREATE TABLE application_path
    (sessId BIGINT, accesstime BIGINT, actionId STRING)
PARTITIONED BY(userId STRING)
ROW FORMAT DELIMITED
FIELDS TERMINATED BY '#'
STORED AS TEXTFILE; 
```

现在查询 SELECT DISTINCT userId... 像以前一样运行几秒钟，但最终返回任何内容。

我刚刚注意到语法：

```
SHOW PARTITIONS application_path; 
```

但我想知道这是否是从分区列中获取唯一（不同）值的唯一方法。SHOW PARTITION 的输出甚至不能完全替代您从 SELECT DISTINCT 获得的内容，因为列名是每一行的前缀：

```
hive> show partitions application_path;            
OK
userid=user1@domain.com
userid=user2@domain.com
userid=user3@domain.com
... 
```

对我来说奇怪的是 usedId 可以在 GROUP BY 中与其他列一起使用，例如：

```
SELECT userId, sessId FROM application_path GROUP BY userId, sessId; 
```

但确实返回任何内容：

```
SELECT userId FROM application_path GROUP BY userId; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:08:30.643

I experienced the same issue, it will be fixed in 0.10 [https://issues.apache.org/jira/browse/HIVE-2955](https://issues.apache.org/jira/browse/HIVE-2955)

# xpages - XPages - 对过滤后的视图进行排序

> ID：12952598
> 
> 赞同：2
> 
> 时间：2012-10-18T10:30:40.053
> 
> 标签：xpages

我的 XPage 上有一个 DominoView 数据源，它使用 URL 参数进行过滤，以便只显示与此参数匹配的文档。

然后需要按第二列（状态字段）的值对过滤后的文档进行排序。最好的方法是什么？

XPage 使用 jQuery Mobile 进行演示，理想情况下，文档将显示在一个可折叠列表中，每个状态值都有一个单独的可折叠列表。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T02:18:57.450

最简单的方法是将该视图也排序在第二列**中**。不需要额外的代码。您可以有多个不需要相邻的排序列。然后你可以有更好的过滤键。例如，您有 4 个排好序的列：您使用具有 1-4 个元素的数组作为过滤器。使用 1 个元素，它会在第一列上过滤。使用 2 个元素，它会在第一列和第二列等上进行过滤。返回的结果按剩余的排序列排序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T11:31:10.847

不确定这是否会对您的情况有所帮助，但我正在使用视图数据源构建重复，我需要根据我存储在 sessionScope 中的用户值进行搜索。执行搜索时，我丢失了视图中的默认排序。通过添加 sortColumn 和 sortOrder，我得到了我想要的结果。

这是源代码的示例；

```
 <xp:this.data>
    <xp:dominoView
        var="aprofiles"
        viewName="embAssessmentProfiles"
        sortOrder="ascending"
        sortColumn="apName">
        <xp:this.search><![CDATA[#{javascript:compositeData.searchFilter;}]]></xp:this.search>
    </xp:dominoView>
</xp:this.data> 
```

# php - 将教义2模型的“属性”转换为“吸气剂”？

> ID：12952602
> 
> 赞同：0
> 
> 时间：2012-10-18T10:30:53.877
> 
> 标签：php, doctrine-orm

我想这个问题的答案应该相当简单，但我似乎找不到它：

如何使用原则命名策略正确地将 Doctrine Model 属性转换为该属性的 getter？

```
<?php

class Bar {

    private $foo;

    public function getFoo() { }
}

$field = 'foo';
$getter = ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:41:14.800

这就是你所追求的吗？

```
$getter = sprinft('get%s', ucfirst($field)); 
```

这将至少处理这种特殊情况。

# c# - 在 HttpListener 中处理 post 请求

> ID：12952607
> 
> 赞同：0
> 
> 时间：2012-10-18T10:31:09.193
> 
> 标签：c#, javascript, httplistener

```
private void ListenerCallback(IAsyncResult ar)
        {
            _busy.WaitOne();
            try
            {
                HttpListenerContext context;
                try
                { context = _listener.EndGetContext(ar); }
                catch (HttpListenerException)
                { return; }

                if (_stop.WaitOne(0, false))
                    return;

                var sr = new StreamReader(context.Request.InputStream);
                string x = sr.ReadToEnd();
                Console.WriteLine("{0} {1}", context.Request.HttpMethod, x);
                //context.Response.SendChunked = true;
                using (TextWriter tw = new StreamWriter(context.Response.OutputStream))
                {
                    //for (int i = 0; i < 5; i++)
                    {
                        //tw.WriteLine("<p>{0} @ {1}</p>", i, DateTime.Now);
                        tw.WriteLine("<html><head></head><body>");
                        tw.WriteLine("Server Response");
                        tw.WriteLine("</body></html>");
                        tw.Flush(); //Catch http exception if client exists halfway through
                        //Thread.Sleep(1000);
                    }
                }
            }
            finally
            {
                if (_maxThreads == 1 + _busy.Release())
                    _idle.Set();
            }
        } 
```

以上是我的代码，我可以使用 Chrome 访问 URL，即使服务器显示它需要 2 个获取请求，我也可以很少回复，我希望能够处理 POST 请求，当我发送一个发布请求时它会正确读取它，但是客户没有得到答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:35:05.437

你应该添加`ctx.Response.ContentLength64=...`. （您可能还需要`ctx.Response.Close()`）

# mysql - MYSQL 按时间 am/pm 排序

> ID：12952608
> 
> 赞同：4
> 
> 时间：2012-10-18T10:31:11.003
> 
> 标签：mysql, time, sql-order-by

我在表格中有一行以上午/下午格式保存一天中的时间，例如

```
timeField
---------
9.00am
10.00pm
7.00am 
etc... 
```

mysql中有没有办法对这些值进行排序？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T10:34:13.717

您可以通过在 MySQL 中使用[STR_TO_DATE函数来做到这一点：](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)

```
SELECT STR_TO_DATE('10.00pm','%h.%i%p'); 
```

尝试这个：

```
SELECT * 
FROM table_name 
ORDER BY STR_TO_DATE(timeField,'%h.%i%p'); 
```

# 示例：[SQLFiddle](http://sqlfiddle.com/#!2/da5f9/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:37:49.463

为了订购它，您需要格式化日期字段。

尝试这个

```
SELECT COl1, COl2, DATE_FORMAT(yourdate, '%k:%i:%s') AS mydate
FROM your_table
ORDER BY mydate 
```

享受

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-24T12:43:46.697

**使用下面的查询**

```
select * from 'Your Table Name' order by str_to_date('yourtimefield', '%l:%i %p'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-01T05:34:01.123

```
SELECT * FROM table ORDER BY Name 
```

这为我安排了一切：按字母顺序排列，日期和时间

# eclipse - 如何创建eclipse信息中心的多个实例？

> ID：12952609
> 
> 赞同：0
> 
> 时间：2012-10-18T10:31:13.000
> 
> 标签：eclipse, eclipse-plugin

我们正在为我们的帮助系统使用 eclipse 信息中心。我正在尝试使用[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fua_help_setup_infocenter.htm](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fua_help_setup_infocenter.htm)中的步骤为不同的插件设置多个实例。

在上面的链接中运行信息中心的多个实例部分中有一个片段。

“一个信息中心的多个实例可以通过一个安装在一台机器上运行。每个启动的实例都必须使用自己的端口并且必须提供工作空间，因此必须指定 -port 和 -data 选项。这些实例可以提供文档通过使用 -configuration 选项提供有效的平台配置，从不同的插件集。"

有人可以指导如何创建新实例和在 -data 和 -configuration 参数中指定的值吗？

注意：我有一个帮助文档插件，并且能够在单个实例中启动它。但是，对于单个实例，您不需要指定 -data 或 -configuration 参数。

谢谢

# asp.net - 在 asp.net 中使用 access_token 访问所有 gmail 联系人

> ID：12952610
> 
> 赞同：0
> 
> 时间：2012-10-18T10:31:15.240
> 
> 标签：asp.net, google-apps, google-contacts-api

我正在尝试在 asp.net Web 应用程序中访问 gmail 联系人。

我仍然可以从 google 获取 access_token，但是当我将此 access_token 发送到 google 联系人 api 时，它给了我错误。

下面是我从我的应用程序重定向的 url，用户通过提供他的电子邮件和密码进行身份验证。

```
https://accounts.google.com/o/oauth2/auth?scope=https://www.google.com/m8/feeds&redirect_uri=http://localhost:3223/WebSite1/Default.aspx&response_type=token&client_id=881595232473.apps.googleusercontent.com 
```

在此用户使用访问令牌返回我的 Web 应用程序之后。

在这里，我使用了两种不同的方法来获取所有联系人：

**方法 1 - 网络请求**：

```
 HttpWebRequest request1 = (HttpWebRequest)WebRequest.Create(url1);

    HttpWebResponse response1 = (HttpWebResponse)request1.GetResponse();

    System.IO.Stream ReceiveStream1 = response1.GetResponseStream();
    StreamReader readStream1 = new StreamReader(ReceiveStream1);
    string result = readStream1.ReadToEnd(); 
```

它工作正常，并给了我 XML 的结果。但问题是它只提供前 25 个联系人，而我总共有 246 个联系人。

**方法 2 - 谷歌联系人 API**：

```
 RequestSettings rs = new RequestSettings("aman contact", Request.QueryString["access_token"].ToString());

    rs.AutoPaging = true;
    ContactsRequest cr = new ContactsRequest(rs);
    PrintAllContacts(cr);
    Feed<Contact> f = cr.GetContacts(); 
```

**这里它给了我以下错误：**

```
Execution of request failed: http://www.google.com/m8/feeds/contacts/default/full 
```

**在此之后，它向我显示了一个带有以下错误的黄页：**

```
The remote server returned an error: (401) Unauthorized. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:54:04.913

我只能评论您关于方法 1 - Web 请求的问题，因为我没有使用 .Net 与 Google Contacts API 集成。

我建议您尝试传入一个值`max-query`（默认为 25）。根据我的经验，从 api 中提取大约 500 个联系人需要不到一秒钟的时间，因此您应该能够一次安全地查询您的特定通讯录。但是，您应该根据应用程序的要求调整此值。例如，如果您需要您的应用程序响应速度非常快，您可能希望使该值更小，以便您可以开始更快地填充联系人。如果您在后台执行此工作，则等待 5 秒等待 5000 个联系人可能是可以接受的。

由于人们的通讯簿大小差异很大，因此您需要能够使用该`start-index`参数多次查询 API。在第一次查询之后，看看这里返回的值：

```
 <openSearch:totalResults>1</openSearch:totalResults>
  <openSearch:startIndex>1</openSearch:startIndex>
  <openSearch:itemsPerPage>25</openSearch:itemsPerPage> 
```

`total-results`将让您计算需要使用不同的查询`start-index`来获取所有数据的次数。

Google Contacts API (v3) 描述了这些[参数](https://developers.google.com/google-apps/contacts/v3/reference#Parameters)。作为警告，`start-index`是基于 1 的联系人数组索引，而不是页面索引，因此您必须进行数学计算。例如，您将请求`max-query=25&start-index=26`访问联系人的第 2 页。

# objective-c - 在 obj-c 中查看控制器类的 OO 方法

> ID：12952619
> 
> 赞同：0
> 
> 时间：2012-10-18T10:31:34.267
> 
> 标签：objective-c, uiviewcontroller, constructor

我在我的应用程序的滑块控件中内置了 10 个不同的页面，这些页面是使用故事板设置的。

每个页面的唯一区别是使用不同的 Web 视图来显示富文本，并使用不同的图像作为背景。

我是否可以为所有 10 个页面设置一个视图控制器，并在构造函数中设置一些标志，这些标志将在每个页面加载时执行，以告诉它要显示什么图像和 Web 视图？如果是这样，这会是什么样子？

谢谢，

刘易斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:39:19.410

我认为最好的方法是为您的视图控制器定义一个数据源。该数据源将具有以下接口，例如：

```
@protocol MyVCDataSource
- (NSUInteger)numberOfPages;
- (NSString*)htmlContentForPageIndex:(NSUInteger)index;
- (NSString*)backgroundForPageIndex:(NSUInteger)index;
@end 
```

您将为视图控制器提供一个名为的成员，该成员`datasource`将在`initWithDatasource`方法中初始化：

```
@interface MyVC : UIViewController
...
@property (nonatomic, weak) id<MyVCDataSource> datasource;
- (id)initWithDatasource:(id<MyVCDataSource>)ds; 
```

然后，您的视图控制器会在需要时向数据源询问 HTML 数据或背景文件名：

```
- (void)viewDidLoad {

    self.view.backgroundColor = GET_BACKGROUND_FROM_STRING([self.datasource backgroundForPageIndex:self.currentIndex]);

    [self.webView loadHTMLString: [self.datasource htmlContentForPageIndex:self.currentIndex]];
....

} 
```

我假设协议只返回字符串，但实际上你可以让它返回你需要的东西（例如，图像、颜色、URL），这完全取决于你的类的内部结构。

最后，您的数据源对象可以是任何对象（甚至是您的`MyVC`实例），并通过索引到数组中返回其数据：

```
- (NSString*)htmlContentForPageIndex:(NSUInteger)index {
    return [self.htmlPages objectAtIndex:index];
} 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:59:18.210

您可以创建 UIViewController 的子类，例如 MyViewController。然后将您的 .h 文件替换为：

```
#import <UIKit/UIKit.h>

@interface MyViewController : UIViewController

@property (nonatomic, strong) UIWebView *myWebView;
@property (nonatomic, strong) UIImageView *myImageView;

- (id)initWithURLString:(NSString *)urlString image:(NSString *)imageName;

@end 
```

和你的 .m 文件：

```
#import "MyViewController.h"

@interface MyViewController ()

@end

@implementation MyViewController

@synthesize myWebView = _myWebView;
@synthesize myImageView = _myImageView;

- (id)initWithURLString:(NSString *)urlString image:(NSString *)imageName
{
    self = [super init];

    if (self) {
        NSURL *url = [NSURL URLWithString:urlString];
        NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];

        _myWebView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 400)];
        [_myWebView loadRequest:urlRequest];

        _myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:imageName]];
        _myImageView.frame = CGRectMake(0, 400, 60, 60);
    }

    return self;
}

@end 
```

然后只需创建 UIViewController 子类的实例：

```
MyViewController *vCon = [[MyViewController alloc] initWithURLString:someURLString image:imageName]; 
```

# jquery - SpringMVC, Jquery, ajax post上升错误函数

> ID：12952620
> 
> 赞同：0
> 
> 时间：2012-10-18T10:31:42.890
> 
> 标签：jquery, ajax, spring-mvc

我不知道为什么对 Controller 的调用会引发错误 Ajax Jquery 函数。控制器功能执行成功并返回“OK”。并且误差函数的“e”参数是未定义的。

我有这个代码

**控制器代码 - SpringMVC**

```
@RequestMapping(value = "/updateItem/", method = RequestMethod.POST)
public String updateItem(Model model, HttpServletRequest request, 
    @RequestParam("id") String id, ...) {
        //Operations
        return "OK";
} 
```

**jQuery代码**

```
 function updateItem() {
     $.ajax({
        url : "/.../updateItem/",
            type : 'POST',
            async : false,
            data : {
                id : id.value,
                ...
            },
            success: function(response) { alert("second success"); },
            error: function(e) { alert("error " + e);},
            complete: function() { alert("complete"); },
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:37:52.627

打开chrome，按f12打开开发工具，查看控制台/网络

您在两个标签中收到的帖子的错误是什么？

顺便说一句，您的代码看起来不错。

# opencv - 使用 ffmpeg、OpenCV 的硬件加速 h264 解码

> ID：12952624
> 
> 赞同：6
> 
> 时间：2012-10-18T10:32:00.177
> 
> 标签：opencv, ffmpeg, h.264, hardware-acceleration, decoder

我正在开发一个视频分析应用程序，我必须解码一个 RTSP 流以提供 IplImage 帧，然后将这些帧输入我的分析管道。现在，OpenCV VideoCapture 结构允许我从 RTSP 流中提取帧（我认为它使用 ffmpeg 这样做），但性能不是很好。它需要实时工作。

我还继续编写了自己的 ffmpeg 解码器。但就像 OpenCv 一样，RTSP 流的性能并不好。丢了很多帧。但是，从本地文件解码工作正常。不过，我仍在努力改进代码。

我需要帮助的是这个。首先，我这里可以使用硬件加速解码来提高性能吗？我的应用程序应该是跨平台的，所以我可能需要使用 Directx VA（windows）和 VAAPI（linux）。如果是，那么有没有地方可以学习如何在代码中实现硬件加速，尤其是 ffmpeg 解码h264?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-17T02:37:48.900

据我所知，使用 ffmpeg 后端的 VideoCapture 不支持硬件加速。

我认为您可以使用 gstreamer 作为后端的 VideoCapture，您可以自定义管道并通过 vaapi 启用硬件加速。

我正在使用这个管道：

```
rtspsrc location=%s latency=0 ! queue ! rtph264depay ! h264parse ! vaapidecodebin ! videorate ! videoscale ! videoconvert ! video/x-raw,width=640,height=480,framerate=5/1,format=BGR ! appsink 
```

# hibernate - JPA 类别-语言关系

> ID：12952625
> 
> 赞同：1
> 
> 时间：2012-10-18T10:32:02.907
> 
> 标签：hibernate, jpa, eclipselink

我正在使用 JPA/Hibernate + Spring 构建基于类别的 Web 应用程序多语言

我目前构建了这三个 bean/实体：Category、CategoryLanguage 和 Language。

**类别：**

```
@Entity
public class Category implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    @ManyToOne
    private Category father;
    @OneToMany(mappedBy = "father")
    private List<Category> children;
    @OneToMany(mappedBy="category")
    private List<CategoryLanguage> categoryLanguages; 
```

**类别语言：**

```
@Entity
public class CategoryLanguage implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    @ManyToOne
    Category category;
    @Column(length = 20, nullable = false)
    private String name;
    @ManyToOne
    private Language language; 
```

和**语言**

```
public class Language implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Column(length=2)
    private String id; // en, de, fr, it, es,...

    @Column(length=25)
    private String name; // English, Deutsch, Français,... 
```

通过调用

```
from Category c join c.categoryLanguages cl where c.father = null and cl.language.id = :lang 
```

它返回具有正确语言的第一级类别，但包含所有语言作为子语言。

**为每种语言提取儿童，而不是我在查询中选择的语言。**

我能做些什么来解决这个问题？我不能在 JPQL 中使用“join **on ”，可以吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:29:39.937

您的查询要求提供完整的类别实体，因此您无法使用 JPA 严格完成您想要的。JPA 要求返回的类别实体反映数据库中的数据 - 这包括所有 CategoryLanguages，无论它们在选择查询中可能对应于哪种语言。

您可能想要做的是以不同的方式重新排列查询。在这种情况下，查询与所需语言关联的 CategoryLanguage 实体，然后使用它来获取 Category。category->CategoryLanguage 关系仍将被填充，但您的查询仅返回表示您想要的语言的 CategoryLanguage 而没有任何其他语言。如果需要，请按类别键入这些内容以使其更容易。

大多数提供程序确实允许直接向映射添加过滤条件，或者您甚至可以使用仅返回部分实体的查询，但我提醒您避免走这条路。一旦这样做，就很难正确维护应用程序和管理数据，并且最终可能会限制缓存等性能选项。例如，一旦您拥有所有部分类别实体并想要添加新的 CategoryLanguage 或进行任何其他更改，您如何处理它？合并不起作用，因为它会导致任何 CategoryLanguage 不在数据库列表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:12:32.947

确保使用`FetchType.EAGER`

使用如下：

```
SELECT c FROM Cagegory c INNER JOIN c.categoryLanguages l WHERE c.father = null AND l.id = :languageId

@OneToMany(mappedBy = "father", fetch = FetchType.EAGER)
private List<Category> children = new ArrayList();
@OneToMany(mappedBy="category", fetch = FetchType.EAGER)
private List<CategoryLanguage> categoryLanguages = new ArrayList(); 
```

# facebook-graph-api - 用户未登录时在facebook粉丝页面上发布

> ID：12952631
> 
> 赞同：3
> 
> 时间：2012-10-18T10:32:17.197
> 
> 标签：facebook-graph-api, access-token, facebook-page

我正在使用 Graph API 代码，该代码使用 an`acces_token`和 an 并`id_page`具有发布到粉丝页面的权限。只要用户登录它就可以工作，但是当我注销时`access_token`过期并且我无法发布到粉丝页面。

如何让我的应用程序能够随时发布，即使用户没有登录？

这是我的代码：

```
<?php
$page_access_token = 'AAAFNxxxx';
$page_id = '15203xxx'; 
$data['picture'] = "https://www.google.it/logos/2012/moby_dick12-hp.jpg";
$data['link'] = "http://www.google.it/";
$data['message'] = "Test";
$data['description'] = "Lorem ipsum dolor sit amet";
$data['access_token'] = $page_access_token;
//curl connection
$post_url = 'https://graph.facebook.com/'.$page_id.'/feed';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $post_url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$return = curl_exec($ch);
curl_close($ch); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:40:05.257

您可以使用[扩展令牌](https://developers.facebook.com/roadmap/offline-access-removal/#extend_token)在用户注销时发布，通过检索相同的交换您自己的 client_id（您的 app_id）、您的 app_secret 和未过期的、短暂的 access_token

```
https://graph.facebook.com/oauth/access_token?             
client_id=APP_ID&
client_secret=APP_SECRET&
grant_type=fb_exchange_token&
fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-09T10:33:47.300

在您的 word press 博客中发布待处理的帖子，将您的博客与 networkbloggers 和 fanpage.so 连接起来粉丝页面不需要应用程序。或更复杂的东西

# database - 尝试创建新的 Wordpress 数据库表

> ID：12952635
> 
> 赞同：7
> 
> 时间：2012-10-18T10:32:30.147
> 
> 标签：database, wordpress

只是试图在插件激活时创建一个新的数据库表。为了热爱生活，我无法弄清楚为什么这不起作用。

```
function super_simple_photo_activate() {
global $wpdb;
$table_name = $wpdb->prefix."super_simple_photo_options";
if ($wpdb->get_var('SHOW TABLES LIKE '.$table_name) != $table_name) {
    $sql = 'CREATE TABLE '.$table_name.'(
        thumbs_max VARCHAR(3),
        image_max VARCHAR(4),
        image_quality VARCHAR(3),
        PRIMARY KEY  (id))';

    require_once(ABSPATH.'wp-admin/includes/upgrade.php');
    dbDelta($sql);

    add_option("super_simple_photo_db_version", "1.0");
}
}
register_activation_hook(__FILE__, 'super_simple_photo_activate'); 
```

我已经花了至少 5 个小时来修补这个，但没有运气，激活也没有错误。

**诀窍是什么**- id INTEGER NOT NULL - 感谢 t.thielemans

```
$sql = 'CREATE TABLE '.$table_name.'(
        id INTEGER NOT NULL,
        thumbs_max VARCHAR(3),
        image_max VARCHAR(4),
        image_quality VARCHAR(3),
        PRIMARY KEY  (id))'; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T10:56:24.117

试试这个代码

```
register_activation_hook ( __FILE__, 'on_activate' );

function on_activate() {
    global $wpdb;
    $create_table_query = "
            CREATE TABLE IF NOT EXISTS `{$wpdb->prefix}table1` (
              `id` bigint(20) unsigned NOT NULL default '0',
              `name` text NOT NULL,
              `address` text NOT NULL
            ) ENGINE=MyISAM  DEFAULT CHARSET=utf8;
    ";
    require_once( ABSPATH . 'wp-admin/includes/upgrade.php' );
    dbDelta( $create_table_query );
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T10:37:34.533

您的创建表语法错误，应该是：

```
 $sql = 'CREAT TABLE '.$table_name.'(
-----
 $sql = 'CREATE TABLE '.$table_name.'( 
```

编辑：定义你的主键

```
 $sql = 'CREATE TABLE '.$table_name.'(
        id INTEGER NOT NULL,
        thumbs_max VARCHAR(3),
        image_max VARCHAR(4),
        image_quality VARCHAR(3),
        PRIMARY KEY (id))'; 
```

来自 W3schools 的一些关于 SQL 的额外信息：http: [//www.w3schools.com/sql/sql_primarykey.asp](http://www.w3schools.com/sql/sql_primarykey.asp)

# java - 在 foreach 循环中正确处理 NoSuchElementException？

> ID：12952639
> 
> 赞同：1
> 
> 时间：2012-10-18T10:32:47.040
> 
> 标签：java, iterator, loops

为什么在迭代器引发 NoSuchElementException 并停止循环执行时不考虑 foreach 循环？

让我解释。

通常迭代器需要提供两个重要的方法：hasNext 和 next。如果没有更多元素要迭代，则下一个方法可以引发 NoSuchElementException。hasNext 方法更像是一种语法糖，只是为了让你的代码更好一点。重要的方法实际上是 next ，这是应该做任何工作的方法，如果有的话，但不是 hasNext ，它需要在没有预先调用 hasNext 的假设的情况下实现。

假设我们有以下情况：

```
final Iterator<String> bogusIt01 = new Iterator<String>() {

    public boolean hasNext() {
        return true;
    }

    public String next() {
        throw new NoSuchElementException("no such element");
    }

    public void remove() {
        throw new UnsupportedOperationException("cannot remove element");
    }

};

final Iterable<String> bogusPr01 = new Iterable<String>() {

    public Iterator<String> iterator() {
        return bogusIt01;
    }

};

for (@SuppressWarnings("unused") String string:bogusPr01) {
    // pass
} 
```

这将引发 NoSuchElementException。我希望循环只是终止。我做错了吗？

我问的原因是因为使用这个模型很难编写一个迭代器来包裹另一个迭代器并对其输出进行一些处理。让我们想象以下场景：

Iterator1 <- 这是我们原来的迭代器，一切都很好。

Iterator2 <- 此迭代器环绕 Iterator1 并修改迭代元素的输出。

Iterator2 是这样实现的：

```
 public boolean hasNext() {
        return iterator1.hasNext();
    }

    public Object next() {
        if (!iterator1.hasNext()) {
            throw new NoSuchElementException("no such element");
        }

        Object nextValue = iterator1.next();

        try {
            // do something that could raise exception
        } catch (Exception e) {
            return this.next();
        }

        return productValue;
    }

    public void remove() {
        throw new UnsupportedOperationException("cannot remove element");
    } 
```

这样的设计根本不可能，尽管它对我来说很有意义。

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:42:41.893

这段代码的问题是，如果之前的调用返回 true ，则`Iterator`永远不应该抛出`NoSuchElementException`from 。你可以考虑做这样的事情：`getNext``hasNext`

1.  in`hasNext`从底层迭代器中获取下一个适当的元素并将其缓存到下一次调用`next`. 从`next`只返回缓存的值。如果缓存值为空，则`hasNext`不会调用，然后您可以适当地抛出 NSEE。

您可能要考虑的另一个选项是使用 Guava`Iterables.transform`或`Lists.transform`. 这旨在`Iterable`对每个元素进行并执行一些翻译。您可以返回`null`任何无法转换的值，并`Iterables.filter`使用`Predicates.notNull` `Predicate`删除不为空的元素。

[Iterables.transform](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Iterables.html#transform-java.lang.Iterable-com.google.common.base.Function-)

[Iterables.filter](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Iterables.html#filter-java.lang.Iterable-com.google.common.base.Predicate-)

[谓词.notNull](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/base/Predicates.html#notNull--)

使用番石榴，上面的代码将是：

```
Function<A, B> myFunction = new Function<A,B>(){
   public B apply(A input){
      try{ // do work
         return new B();
      catch(Exception e){ return null; }          
   }
}

Iterable<A> inputList = ...;
Iterable<B> newList = Iterables.filter(
       Iterables.transform(inputList, myFunction), 
       Predicates.notNull());

for (B b : newList)... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:42:17.637

[来自Iterator.hasNext()](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)的 Javadoc

> 如果迭代有更多元素，则返回 true。（换句话说，如果 next() 将返回一个元素而不是抛出异常，则返回 true。）

一般来说，如果您不符合指定的 API，JVM 不会尝试再次猜测它应该做什么或执行解决方法。相反，它会产生你得到的异常或错误。

如果您包装了一个可能导致异常的迭代器，您应该抛出该异常，或者如果您觉得最好假装它从未发生过（恕我直言，这不太可能），您必须在调用 next() 之前检查这一点。

```
Object productValue = null;
public boolean hasNext() {
    produceValue = null;
    while (iterator1.hasNext()) {
        Object nextValue = iterator1.next();

        try {
            // do something that could raise exception
            produceValue = ....
            return true;
        } catch (Exception e) {
            // handle the exception.
        }
    }
    return false;
}

public Object next() {
    if (produceValue == null && !hasNext())
        throw new NoSuchElementException("no such element");
    Object ret = productValue;
    productValue = null;
    return ret;
}

public void remove() {
    throw new UnsupportedOperationException("cannot remove element");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:04:15.150

How about the following?

```
import java.util.Iterator;

public class BreakingIterator<T> implements Iterator<T> {

    private Iterator<T> iterator;
    private T nextValue;
    private RuntimeException nextException;

    /* -------------------------------------------------------------------- */

    public BreakingIterator(Iterator<T> iterator) {
        this.iterator = iterator;
        this.nextValue = null;
        this.nextException = null;
    }

    /* -------------------------------------------------------------------- */

    public boolean hasNext() {
        if (this.iterator.hasNext()) {
            try {
                this.nextValue = this.iterator.next();
            } catch (RuntimeException e) {
                this.nextValue = null;
                this.nextException = e;

                return false;
            }

            return true;
        } else {
            return false;
        }
    }

    public T next() {
        if (this.nextException != null) {
            throw this.nextException;
        } else {
            return this.nextValue;
        }
    }

    public void remove() {
        this.iterator.remove();
    }

} 
```

This implementation will move all the hard work from next into hasNext.

# javascript - Chrome 和 Firefox 上的窗口宽度错误

> ID：12952641
> 
> 赞同：0
> 
> 时间：2012-10-18T10:32:50.177
> 
> 标签：javascript, jquery, browser, error-handling, width

我有以下代码：

```
function c() {
        var h = ($(window).height() - $('#maincontainer').outerHeight()) / 2;
        var w = ($(window).width() - $('#maincontainer').outerWidth()) / 2;

        $('#maincontainer').css('position', 'absolute');
        $('#maincontainer').css('top', h);
        $('#maincontainer').css('left', w);
    }

    $(window).resize(c);
    $(window).load(c); 
```

该`resize`事件在我尝试过的每个浏览器上都能正常工作，但`load`总是返回 8px 的宽度值，将`maincontainer`div 放在屏幕的左边框上。这仅在 IE8 上正确执行，在窗口中间放置一个 div，在 Chrome 22 和 Firefox 16 上失败。

编辑：似乎有效的解决方案：

```
 $(window).ready(c);
    $(window).load(c);
    $(window).resize(c); 
```

还有，`the body`应该有`width: 100%`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:36:12.797

代替：

```
$(window).resize(c);
$(window).load(c); 
```

做：

```
$(function(){
    c();
    $(window).resize(c);
}); 
```

发生的事情是您在加载任何内容之前询问文档的大小，因此您（几乎）什么也得不到。一旦文档“准备好”，就会立即执行此操作，从而为您提供更有用的价值。

您可能还需要使您的身体宽度和高度为 100%，并使用该尺寸而不是窗口。

# android - 如何在 android phonegap 中测试推送通知？

> ID：12952653
> 
> 赞同：3
> 
> 时间：2012-10-18T10:33:36.963
> 
> 标签：android, cordova, phonegap-plugins

[我从MarkNutter Project](https://github.com/marknutter/GCM-Cordova)下载了推送通知示例项目并将其导入为 android 项目，它现在工作正常我可以从设备注册

由于我没有一些服务器可以向设备发送通知，我该如何测试设备是否正在接收一些通知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T07:24:44.140

您可能还没有完成一些步骤：

1.  首先您必须在 Google APIs 站点注册，选择服务：[https ://code.google.com/apis/console/](https://code.google.com/apis/console/)
2.  将 Google Cloud Messaging 切换为 ON
3.  在服务条款页面中，接受条款。现在您需要创建服务器密钥
4.  按“API 访问”按钮
5.  按“创建新的服务器密钥”。服务器密钥或浏览器密钥应该可以工作。使用服务器密钥的优点是它允许您将 IP 地址列入白名单。
6.  按“创建”。
7.  您可以从 Google API 控制台中的 URL 找到您的 ProjectID。通常它看起来像这样：[https](https://code.google.com/apis/console/#project:12345678912:access) ://code.google.com/apis/console/#project :12345678912:access 在这个例子中，它会是：12345678912
8.  使用您的应用程序 ID 和发件人 ID，只需在您从 MarkNutter 项目获得的代码中更改它们，您就可以完成。

# javascript - 在winapi中运行javascript

> ID：12952655
> 
> 赞同：0
> 
> 时间：2012-10-18T10:33:43.753
> 
> 标签：javascript, winapi

我有一个非常简单的 js 文件：

```
function geoip_country_code() { return 'US'; }
function geoip_country_name() { return 'United States'; }
function geoip_city()         { return 'New York'; }
function geoip_region()       { return '06'; }
function geoip_region_name()  { return 'xxx'; }
function geoip_latitude()     { return '55'; }
function geoip_longitude()    { return '99'; }
function geoip_postal_code()  { return ''; }
function geoip_area_code()    { return ''; }
function geoip_metro_code()   { return ''; } 
```

我想`geoip_country_code`从一个win32代码调用。甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:44:34.267

您没有指定语言，但 COM 可以做到这一点；`MSScriptControl.ScriptControl`

```
sc->language="jscript";
sc->addcode("the js string");

result = sc->run("geoip_country_code", args); 
```

[http://support.microsoft.com/kb/229669](http://support.microsoft.com/kb/229669)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:40:25.643

如果您不会处理比这更复杂的代码，我建议您改用正则表达式并解析出您想要返回的值。否则，您需要提供有关您使用哪种语言编写此代码的信息。据我所知，Win32 API 不支持 JS（尽管可能是 COM），但有多种 API 可以运行 JS。

如果您想使用正则表达式，那么应该这样做：

```
function [a-zA-Z_]+\(\) { +return +'([a-zA-Z0-9 ]+)'; +} 
```

# python - Wamp 中的 Python 3.3 (Apache 2.4.2 – Mysql 5.5.24 – PHP 5.4.3)

> ID：12952661
> 
> 赞同：1
> 
> 时间：2012-10-18T10:34:11.367
> 
> 标签：python, wamp

我正在考虑使用我的 WAMP 设置启动并运行 python。我需要它来测试我正在学习构建的一些 py 应用程序。我看到 Mod_wsgi 项目已终止，这几乎是我找到的关于如何在 WAMP 上运行 python 的唯一方法。

谁能建议如何启动并运行它？太感谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:40:14.400

`mod_wsgi` is an active, working project, and you have essentially answered your own question, you should use it.

You may have been thinking of `mod_python`, a different, discontinuted project that has been superseeded by `mod_wsgi`.

I would suggest you follow [this guide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide).

# c# - Sharepoint爬虫数据和SPList数据互访

> ID：12952666
> 
> 赞同：2
> 
> 时间：2012-10-18T10:34:20.243
> 
> 标签：c#, sharepoint, web-crawler, splist

在我们的共享点系统中，我们有标记为**My Documents的文档库和标记为****All documents**的复杂文件结构。这所有文档都由爬虫索引，每个用户都可以通过搜索和他的文档库（我的文档之一）访问所有文档的数据。

我需要它们两个相同的功能（下载压缩包，复制它们等），并且由于系统不同，我不想以两种方式做同样的事情。

是否有某种方法可以在抽象方面以相同的方式处理两个“存储库”？就像我将拥有一些类 Repository 并且它将`IQueryables`从 MyDocuments 和 AllDocuments 中获取并对它们执行相同的任务？

我发现他们俩都可以将他们的项目视为`DataTable`. 这样做是一个好的解决方案吗？我更喜欢宁可`IQueryable`或`IEnumerable`对于我需要执行的那些特定任务

顺便提一句。我在 csharp 中实现它

# maven - 需要澄清 Maven 配置文件中资源定义的影响

> ID：12952667
> 
> 赞同：1
> 
> 时间：2012-10-18T10:34:20.787
> 
> 标签：maven, resources, profile, multi-module

在一个结构如下的 Maven 多模块项目中：

```
P // parent project
  * A // first module
  * B // second module, containing the test in question 
```

*A*包含以下内容`pom.xml`：

 *```
 <profile>
   <id>theProfile</id>
     <build>
       <resources>
         <resource>
           <directory>src/main/ctx/someDir</directory>
             <filtering>true</filtering>
         </resource>
         <resource>
         <resource>
           <directory>src/main/resources</directory>
         </resource>
       </resources>
     <build>
   </profile> 
```

当完整的项目*P*运行并激活此配置文件时，在*B*`src/test/resources`的测试期间作为类路径的一部分的可用性是否会受到任何影响？

 *如果是，以何种方式，以及如何更改定义以使给定的资源

a) 纯粹是额外的

b) 仅影响定义它们的*A。*

如果否，这`src/main/resources`部分是多余的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:22:45.573

TL；DR A）不；B) 否；如果你`<resources>`是`<resources combine.children="append">`那么你可以省略它，但正如所写，不

## 长答案

如果您从根目录运行构建，并假设 B 依赖于 A

您获得的类路径取决于您将整个反应器推进到的阶段。

如果阶段`package`在生命周期的阶段之前，则类路径将引用`${project.build.outputDirectory}`反应器内依赖项的目录

如果`package`阶段处于生命周期的阶段或之后，类路径将引用构建的 JAR 文件，例如`${project.build.directory}/${project.build.finalName}.jar`

所以给你一些具体的例子：

```
$ mvn compile 
```

这在 P 中不会做任何事情，因为 P 是 a`<packaging>pom</packaging>`并且默认情况下，打包不会将任何 [类路径相关] 插件绑定到`install`.

当我们点击 A 时，它会在编译类路径中列出 A 的所有依赖项，因为这些都不是来自反应器，它们将从本地缓存（即`~/.m2/repository`）中解析，所以如果 A 使用 log4j，你将有一个编译类路径，如

```
${JAVA_HOME}/lib/rt.jar:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar 
```

我们没有指定编译后的阶段，因此不会调用需要测试类路径的插件，因此此时不相关。

现在我们转到 B。B 的依赖项包括 A，因此它将引用 A 的主要工件（因为`jar:jar`尚未运行将指向 A `${project.build.outputDirectory}`）B 的编译类路径看起来有点像这样

```
${JAVA_HOME}/lib/rt.jar:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar
:./A/target/classes 
```

[注意：当我们从 P 目录调用时，当前目录是 P 的`${basedir}`所以 B 的值`${basedir}`将是`./B`]

尽管 B 自己的依赖项可能会根据其 pom 中依赖项的顺序以及它是否对传递依赖项应用排除或版本覆盖而改变类路径

好的。这很简单让我们开始......接下来我们将生命周期提升到`test`阶段

```
$ mvn test 
```

P的故事和以前一样

A 的编译故事与以前相同。当我们进入`test-compile`阶段时，测试将使用以下类路径编译（假设使用 junit 进行测试）

```
${JAVA_HOME}/lib/rt.jar:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar
:./A/target/classes:~/.m2/repository/junit/junit/4.10/junit-4.10.jar 
```

[我可能对元素的排序略有错误，因为我需要深入研究 mvn -X 来确认，但主要是正确的]

当我们进入`test`阶段时，`surefire:test`将建立测试类路径。默认情况下，它将测试依赖项放在非测试依赖项之前，但它是可配置的。所以 A 的测试类将使用类似这样的类路径执行

```
${JAVA_HOME}/lib/rt.jar:./A/target/test-classes:~/.m2/repository/junit/junit/4.10/junit-4.10.jar
:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar:./A/target/classes 
```

这允许使用测试类路径中的匹配资源来覆盖生产默认值以使代码可测试等。

B 的编译类路径和以前一样。我还认为 B 依赖于不同版本的 JUnit。类`test-compile`路径不应该是一个惊喜

```
${JAVA_HOME}/lib/rt.jar:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar
:./A/target/classes:./B/target/classes
:~/.m2/repository/junit/junit/4.11/junit-4.11.jar 
```

现在事情变得有趣了，B 的类路径由surefire 构建（同样可以修改测试范围依赖项的顺序，因此假设您使用的是默认值）。A 的测试类路径是不可传递的，因此不会暴露给 B。

```
${JAVA_HOME}/lib/rt.jar:./B/target/test-classes
:~/.m2/repository/junit/junit/4.11/junit-4.11.jar
:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar
:./A/target/classes:./B/target/classes 
```

最后，让我们深入到`package`阶段，看看它如何影响类路径。

```
$ mvn package 
```

P 和之前一样。

A 实际上和以前一样，因为它的依赖项都不是来自反应器内部。但这里的关键是，当`jar:jar`在`package`阶段运行时，它会替换暴露的类路径......这将影响 B 如何看待 A。

B 的类路径的构造与以前相同，只是现在 B 看到 A 的`.jar`而不是 A 的编译类。所以B的`compile`类路径将是

```
${JAVA_HOME}/lib/rt.jar:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar
:./A/target/A-1.0-SNAPSHOT.jar 
```

B 的`test-compile`类路径看起来像这样

```
${JAVA_HOME}/lib/rt.jar:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar
:./A/target/A-1.0-SNAPSHOT.jar:./B/target/classes
:~/.m2/repository/junit/junit/4.11/junit-4.11.jar 
```

B 的`test`类路径看起来像这样：

```
${JAVA_HOME}/lib/rt.jar:./B/target/test-classes
:~/.m2/repository/junit/junit/4.11/junit-4.11.jar
:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar
:./A/target/A-1.0-SNAPSHOT.jar:./B/target/classes 
```

现在只是给你最后的照片

```
$ mvn install -DskipTests
$ mvn test -f B/pom.xmml 
```

在 Maven 的第二次调用中，我们仅使用单个模块反应器运行（即 B 是反应器中的唯一模块），现在 A 将从本地缓存中解析，因此我们得到类似的测试类路径

```
${JAVA_HOME}/lib/rt.jar:./B/target/test-classes
:~/.m2/repository/junit/junit/4.11/junit-4.11.jar
:~/.m2/repository/log4j/log4j/1.2.16/log4j-1.2.16.jar
:~/.m2/repository/com/mydomain/myproject/A/1.0-SNAPSHOT/A-1.0-SNAPSHOT.jar
:./B/target/classes 
```

现在希望这在一定程度上阐明了 Maven 类路径的奥秘。

您的个人资料如何混入其中……好吧，它们对您的类路径没有任何作用。他们所做的是将文件复制到`${project.build.outputDirectory`.

当 A 到达`process-resources`阶段时，它会将所有定义的内容复制`resources`到`${project.build.outputDirectoy}`so

```
$ mvn package -PtheProfile 
```

将构造完全相同的类路径*，但*其中的文件`./A/src/main/ctx/someDir`将通过过滤复制到 A 中`${project.build.outputDirectoy}`，同时保留其目录结构，并且将其中的文件`./A/src/main/resources`复制到 A 中`${project.build.outputDirectoy}`而不进行过滤，同时保留其目录结构。然后，当我们进入`package`阶段时，`jar:jar`只会将所有这些文件吸进另一个`.jar`。

我希望这个答案可以帮助您更好地了解正在发生的事情......我也希望您开始了解为什么使用配置文件来影响构建的工件会导致头痛，例如

```
$ mvn clean install -PtheProfile -DskipTests
$ mvn test -f B/pom.xml 
```

会有不同的结果

```
$ mvn clean install -DskipTests
$ mvn test -f B/pom.xml 
```

由于本地存储库缓存不知道在将工件安装到本地存储库时哪些配置文件处于活动状态，因此第一种情况会构建与第二种情况不同的 A.jar...

但这更多地暗示了您将来可能遇到的问题以及为什么我们主张坚持使用 Maven 方式并避免使用配置文件来修改传递暴露的类路径或构建的工件。虽然使用配置文件来修改`test`类路径非常有用（例如，当测试在 JDK1.5、JDK1.6 和 JDK1.7 上运行时，您可能需要修改测试的类路径......这可以作为测试类路径是不可传递的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:21:54.713

简短的回答：不，也不。

`A/target/classes`在 process-resources 阶段，项目 A 中的资源将被复制到中。配置文件唯一要做的就是将更多资源复制到`target/classes`. 也就是说，它还将从`src/main/ctx/someDir`.

B 的测试类路径保持不变。假设 B 依赖于 A，那么它的测试类路径将包含 A.jar，其中将包含 A/target/classes 的内容。您可以使用`mvn dependency:build-classpath`. 但是，虽然类路径相同，但 A 的类路径条目的*内容*会有所不同。

我不知道你为什么提到`src/test/resource`（我假设你错字了`src/test/resources`）。`<testResources>`使用该元素单独管理测试资源。如果您的意思是`A/src/test/resources`，那么不，它们不会出现在 B 的测试类路径中。如果您的意思是`B/src/test/resources`，那么是的，它们将出现在 B 的测试类路径中。因此，激活配置文件不会以任何方式影响它。

指定`src/main/resources`不是多余的。如果要包含一个`<resources>`元素，那么它需要包含项目中包含资源的所有目录。**

# .net - Visual Studio 2012 winform 设计器非常慢

> ID：12952670
> 
> 赞同：10
> 
> 时间：2012-10-18T10:34:29.853
> 
> 标签：.net, winforms, c++-cli, visual-studio-2012, windows-forms-designer

我们最近将我们的一个 Winforms 项目从 Visual Studio 2008 迁移到 Visual Studio 2012。过渡非常顺利，一切都构建得很好，但是我们现在正与运行速度非常慢的 winforms 设计器作斗争。

举个例子，如果我们打开一个小表单（该表单包含两个文本框、一个数字上下和两个按钮 - 所有标准内置控件，没有第 3 方），但在 2012 年大约需要 40-45 秒在 2008 年，它将在 1 或 2 秒内打开。对于我们更大的形式，这种差异更加明显。在 2008 年，打开表单大约需要 7 秒，但在 2012 年，它需要**超过 6 分钟**。最糟糕的是这是一个阻塞动作，VS2012 在打开表单时几乎完全没有响应。只需单击表单的 .h 也会发生这种情况，因此我们不能仅仅通过坚持代码本身就可以轻松避免它。

有没有其他人经历过这个？有谁知道它为什么会发生，以及是否有什么可以做的？

附加信息：我们的应用程序是 C++/CLI winforms 应用程序。在我们所有运行 Windows 7 x64 的开发机器上都可以看到这种行为。我的机器是具有 12Gb RAM 的 Core i7 860 CPU（当我对上述内容进行基准测试时，现在有超过 60% 的空闲空间）——我想已经足够了。无论如何，我的系统绝不是运行缓慢，它只是 VS2012 设计器。

编辑：只是为了进一步澄清，我们没有安装任何插件或类似的东西。这是一个原始的 VS2012 安装。

EDIT2：它似乎也不是网络问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:04:29.207

我不知道延迟的原因，但我可以告诉你一种确定原因的方法。使用 Visual Studio 的另一个实例对其进行调试。附加到 devenv.exe 进程：[调试 Visual Studio](http://blogs.msdn.com/b/calvin_hsia/archive/2009/06/08/9711306.aspx)

如果你偶尔中断所有线程，在延迟期间，从统计学上讲，你很可能会找到一个堆栈，其中包含导致延迟的调用。这是一个“穷人的分析器”，但效果很好。我之前曾使用此技术来发现和报告 Visual Studio 2010 设计器代码生成器（Microsoft 未修复）中的回归性能变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:41:42.110

我在 Visual Studio 2010 上，我遇到了同样的事情。当我在设计器中并单击相应的 .h 文件或向 GUI 添加另一个元素时，VS 开始“计算”设计的新代码并完全阻塞 CPU 以完全挂起。

我的 Windows 窗体包含很多元素。随着时间的推移，随着我向用户界面添加越来越多的内容，从设计器到代码的切换变得越来越慢。目前，每次我更改设计中的任何内容时，从设计器切换到代码大约需要 4 分钟（！！！）。

正如我所看到的，它不可能是网络问题。更多的是VS本身的问题，无法快速有效地计算代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T18:39:05.797

我认为我遇到了同样的问题（尽管是***VS2013***），但也许我所观察到的可能对其他人有帮助......我责怪我从 32 位 WinXP 升级到 64 位 Win7。这就是为什么。

以前我在 WinXP 机器上安装了 VS2008 Express。主板坏了，所以我得到了一台闪亮的新 Windows 7 机器。相比之下，这款新机器配备了 SSD、两倍的内存和更快的处理器，速度非常快。

最初我安装了 VS2008，但在我有机会使用表单编辑器之前，我意识到出于其他原因我需要 VS2013。所以仍然安装了两个版本的 Visual Studio。

猜猜看，在我超快的 Windows 7 机器上，两个版本的 Visual Studio 都有一个非常慢的表单编辑器。我有一个非常复杂的表单，我已将其加载到两个版本的 VS 中。除了已移植到 Visual Studio 2013 之外，该表单是相同的。

这台计算机使用时间不到 2 周，我相信它没有恶意软件。

我还注意到，在任一版本的 Visual Studio 中，当我单击表单设计器中的任何控件时，在延迟期间鼠标指针会在几秒钟内变为指针和“大小”光标，并且两者都是半透明的......这告诉我它在两者之间快速交替鼠标光标，速度如此之快，以至于它们都显得半透明。

我的猜测是 Windows 7 具有不同的图形渲染方式，尤其是在表单编辑器中。（顺便说一句，我们是在查看表单编辑器中的真实控件，还是只是它们的图形表示？显然它们在表单编辑器中“不起作用”。）

我尝试将主题切换为“Windows 经典”（没有半透明、方角和灰色背景），但没有明显区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T17:40:11.993

我无法为解决这个问题提供任何指导。但我可以告诉你，我也有。它发生在 Visual Studio 2010 和 2012 中。我使用没有 WPF 的 Windows 窗体，所以我认为问题与此无关。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-29T15:53:01.083

好的，所以这个问题已经开放了一年多了，没有人能想出一个具体的答案来解释为什么 winform 设计器这么慢。

我最近回到 VS2012 并更新到 Update 3。尽管倾注了各种发行说明，但我没有看到任何提及这方面的性能提升，但我很高兴地报告**设计师现在快得多了**。

只是为了稍微混淆一下，我的开发机器自从我最初发布后已经升级，我现在使用 AMD FX-8350 CPU、16GB RAM 和 SSD。刚拿到这台新机的时候，第一时间尝试的是VS2012，发现还是和以前一样慢。现在它能够在大约 15 秒内加载过去需要 6 分钟以上的相同表单。这仍然是 VS2008 的近两倍，但我可以忍受它，因为它是 360s+ 的巨大飞跃。我只提到这一点是因为我无法确定设计器中是否修复了错误，或者只是性能改进 - 可能使用了额外的处理器内核。换句话说，您的里程可能会有所不同，但如果您尚未尝试过，请尝试安装 Update 3。

您可以在此处下载更新 3：http: [//www.microsoft.com/en-us/download/details.aspx?id=39305](http://www.microsoft.com/en-us/download/details.aspx?id=39305)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-18T10:46:41.677

尝试将 C++ 项目的编译器设置从 /clr:pure 更改为 /clr。

# android - 在 android 中保存草稿电子邮件

> ID：12952671
> 
> 赞同：0
> 
> 时间：2012-10-18T10:34:43.640
> 
> 标签：android, sqlite, android-internet

我有一个应用程序，我们可以从中发送电子邮件。我需要一些电子邮件发送方面的帮助。如果互联网不可用，需要存储邮件，当连接可用时发送保存的邮件。保存草稿邮件的有效选项是什么？（就像 gmail 中的草稿邮件，gmail 在哪里存储草稿邮件？）存储数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:39:56.197

如果互联网不可用，设备将在互联网再次可用时尝试发送。或者，您可以根据需要下载一些应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:52:23.840

我会使用带有加密电子邮件的数据库，使用像[this](https://stackoverflow.com/questions/4816771/android-encryption)或[this](https://stackoverflow.com/questions/11987641/failing-to-move-image-from-gallery-to-sdcard-after-encrypting-the-image)这样的 AES 之类的东西。

# django - Django通过额外选择中的计算字段进行注释

> ID：12952675
> 
> 赞同：3
> 
> 时间：2012-10-18T10:34:55.887
> 
> 标签：django, django-queryset

我有带有 City 和 Age 字段的 People 模型。我需要计算每个城市的人数，按 3 个不同的年龄范围 < 20、20 到 50 和 > 50 进行细分。我需要在一个 SQL 查询中执行此操作。

```
People.objects.extra(select={'young':'if(age < 20, 1, 0)', 
                             'med':'if (age > 20 and age < 50, 1, 0)',
                             'old':'if (age > 50, 1, 0)'}).\
                             values('city').\
                             annotate(sum_young=Sum('young'), 
                                      sum_med=Sum('med'), 
                                      sum_old=Sum('old')) 
```

这不起作用，似乎注释不能通过计算字段来完成。

MySQL 唯一的解决方案就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:16:05.260

是的，不幸的是，注释不适用于计算值，但您可以执行以下操作来实现您想要的：

```
objects = People.objects.extra(select={'young':'if(age < 20, 1, 0)', 
                                       'med':'if (age > 20 and age < 50, 1, 0)',
                                       'old':'if (age > 50, 1, 0)'})
d = {}
for obj in objects:
    if not d.get(obj.city):
        d[obj.city] = {'young': 0, 'med': 0, 'old': 0, objects=[]}
    d[obj.city]['objects'].append(obj)
    if obj.young:
        d[obj.city]['young'] += 1
    elif obj.med:
        d[obj.city]['med'] += 1
    elif obj.old:
        d[obj.city]['old'] += 1 
```

然后在`d`字典中你有城市作为键，然后你有城市的年轻、医学、老年计数和模型对象。

# c# - C# 中的套接字编程 - 客户端从不连接到服务器

> ID：12952679
> 
> 赞同：2
> 
> 时间：2012-10-18T10:35:06.417
> 
> 标签：c#, sockets, localhost

我不是在寻找完整的书面解决方案，我只想知道出了什么问题，因为它是学校作业的一部分。这两节课都是老师写的，所以我认为我的电脑出了点问题，但我不知道去哪里找。我搜索了一些其他解决方案，除了低级解决方案外，找不到任何与此不同的解决方案，但我也从我的老师那里得到了一个低级解决方案，但这也不起作用。

服务器：

```
var ipAddress = Dns.GetHostEntry("localhost").AddressList[0];
TcpListener server = new TcpListener(ipAddress, clientPort);
server.Start();
TcpClient client = server.AcceptTcpClient(); // The server gets here
StreamReader clientIn = new StreamReader(client.GetStream());
StreamWriter clientOut = new StreamWriter(client.GetStream());
clientOut.AutoFlush = true;
while (true)
{
    string msg = clientIn.ReadLine();
    Console.WriteLine(msg);
    clientOut.WriteLine(msg);  
} 
```

客户端：

```
TcpClient client = new TcpClient("localhost", serverPort); //The client gets here
StreamReader clientIn = new StreamReader(client.GetStream());
StreamWriter clientOut = new StreamWriter(client.GetStream());

clientOut.AutoFlush = true;

while (true)
{
    clientOut.WriteLine(Console.ReadLine());
    Console.WriteLine(clientIn.ReadLine());
} 
```

由于客户端处于 try-catch 块中，该块处于循环中，直到他获得连接，所以他多次尝试连接到服务器。服务器没有被捕获，因为 AcceptTcpClient 只是等待连接，但是当它们在同一个 ip 和另一个进程的端口上时，它们永远不会达到任何连接。

连接是在单独的线程中启动的，但主线程似乎要等到一个完成，这不是我所期望的。我试图让他们都睡在各种方法上（使用`Thread.Sleep(1000)`，`Thread.Sleep(0)`（文档说如果你这样做，将安排另一个线程）和`while(stopwatch<1000ms) {for(i<100000)}`），它们都没有帮助。主线程只有在连接线程的睡眠消失并且连接线程再次创建客户端的那一刻才有了一些进展。

该问题也出现在另一台 W7 64 位计算机上。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:31:09.913

几乎可以肯定，问题在于您`IPAddress.Any`在构建服务器时使用的事实。这是一个问题的原因是因为这不一定会解决`localhost`，尽管你可能很幸运，但它并不一致。因此，我建议使用如下 IP 地址启动服务器：

```
var ipAddress = Dns.GetHostEntry("localhost").AddressList[0];
TcpListener server = new TcpListener(ipAddress, clientPort); 
```

接下来，尽管我确信您正在执行此操作，但请确保 和 的端口`clientPort`相同`serverPort`。

接下来，`while (true)`循环对我来说非常可疑，因此在下面的示例中，我将对其进行更改。除非***不可能***总是避免`while (true)`，否则你实际上是在乞求一个问题。

最后，围绕你将如何在这里进行线程化，你将需要以某种方式构建两个单独的线程，我将推荐该`BackgroundWorker`课程（其他人可能会推荐`async-await`，但我对它的了解还不够，无法**推荐**你将需要使用 .NET 4.5，我不知道你是不是）。

所以，你可以`BackgroundWorker`为服务器构建一个这样的（你可以为客户端构建另一个类似的）：

```
var worker = new BackgroundWorker();
worker.WorkerReportsProgress = true;
worker.WorkerSupportsCancellation = true;

worker.ProgressChanged += (s, args) =>
{
    Console.WriteLine(args.UserState);
}

worker.DoWork += (s, args) =>
{
    // startup the server on localhost
    var ipAddress = Dns.GetHostEntry("localhost").AddressList[0];
    TcpListener server = new TcpListener(ipAddress, clientPort);
    server.Start();

    while (!worker.CancellationPending)
    {
        // as long as we're not pending a cancellation, let's keep accepting requests
        TcpClient client = server.AcceptTcpClient();

        StreamReader clientIn = new StreamReader(client.GetStream());
        StreamWriter clientOut = new StreamWriter(client.GetStream());
        clientOut.AutoFlush = true;

        while ((string msg = clientIn.ReadLine()) != null)
        {
            worker.ReportProgress(1, msg);  // this will fire the ProgressChanged event
            clientOut.WriteLine(msg);
        }
    }
} 
```

最后，在某个地方你需要通过`RunWorkerAsync`这样的调用来启动这些worker：

```
worker.RunWorkerAsync(); 
```

## 更新

好的，下面是连接到 2104 的完全正常工作的控制台应用程序。您需要注意的一件事是，使用时`var ipAddress = Dns.GetHostEntry("localhost").AddressList[0];`我们得到的 IP 地址看起来像这样`::1`，这就是问题所在。但是，如果我们在`127.0.0.1:2104`客户端上侦听，则可以连接，因为它在发出时尝试连接的内容`var result = client.BeginConnect("localhost", 2104, null, null);`，这与发出相同`new TcpClient("localhost", 2104);`。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Net.Sockets;
using System.ComponentModel;
using System.Threading;
using System.Net;

namespace ConsoleApplication13
{
    class Program
    {
        static void Main()
        {
            var worker = new BackgroundWorker();
            worker.WorkerReportsProgress = true;
            worker.WorkerSupportsCancellation = true;

            worker.ProgressChanged += (s, args) =>
            {
                Console.WriteLine(args.UserState);
            };

            worker.DoWork += (s, args) =>
            {
                // startup the server on localhost 
                var ipAddress = IPAddress.Parse("127.0.0.1");
                TcpListener server = new TcpListener(ipAddress, 2104);
                server.Start();

                while (!worker.CancellationPending)
                {
                    Console.WriteLine("The server is waiting on {0}:2104...", ipAddress.ToString());

                    // as long as we're not pending a cancellation, let's keep accepting requests 
                    TcpClient attachedClient = server.AcceptTcpClient();

                    StreamReader clientIn = new StreamReader(attachedClient.GetStream());
                    StreamWriter clientOut = new StreamWriter(attachedClient.GetStream());
                    clientOut.AutoFlush = true;

                    string msg;
                    while ((msg = clientIn.ReadLine()) != null)
                    {
                        Console.WriteLine("The server received: {0}", msg);
                        clientOut.WriteLine(string.Format("The server replied with: {0}", msg));
                    }
                }
            };

            worker.RunWorkerAsync();

            Console.WriteLine("Attempting to establish a connection to the server...");

            TcpClient client = new TcpClient();

            for (int i = 0; i < 3; i++)
            {
                var result = client.BeginConnect("localhost", 2104, null, null);

                // give the client 5 seconds to connect
                result.AsyncWaitHandle.WaitOne(5000);

                if (!client.Connected)
                {
                    try { client.EndConnect(result); }
                    catch (SocketException) { }

                    string message = "There was an error connecting to the server ... {0}";

                    if (i == 2) { Console.WriteLine(message, "aborting"); }
                    else { Console.WriteLine(message, "retrying"); }

                    continue;
                }

                break;
            }

            if (client.Connected)
            {
                Console.WriteLine("The client is connected to the server...");

                StreamReader clientIn = new StreamReader(client.GetStream());
                StreamWriter clientOut = new StreamWriter(client.GetStream());

                clientOut.AutoFlush = true;

                string key;
                while ((key = Console.ReadLine()) != string.Empty)
                {
                    clientOut.WriteLine(key);
                    Console.WriteLine(clientIn.ReadLine());
                }
            }
            else { Console.ReadKey(); }
        }
    }
} 
```

# c# - 使用 c# 在 instagram 中创建订阅

> ID：12952681
> 
> 赞同：3
> 
> 时间：2012-10-18T10:35:08.307
> 
> 标签：c#, instagram

我关注了此链接[OAuth 2.0 In .NET With Instagram API](https://stackoverflow.com/questions/7155192/oauth-2-0-in-net-with-instagram-api)，它帮助我解决了获取访问令牌的问题。

我的代码是这样的：

```
NameValueCollection parameters = new NameValueCollection
                                             {
                                                 {"client_id", ClientId},
                                                 {"client_secret", ClientSecretId},
                                                 {"object", "user"},
                                                 {"aspect", "media"},
                                                 {"verify_token", "thisIsANormalSubscription"},
                                                 {"callback_url", CallbackURI}
                                             };

        WebClient client = new WebClient();
        var result = client.UploadValues(SubscriptionURI, parameters); 
```

SubscriptionURI = " [https://api.instagram.com/v1/subscriptions](https://api.instagram.com/v1/subscriptions) "。

我正在遵循 instagram ( [http://instagram.com/developer/realtime/](http://instagram.com/developer/realtime/) ) 的指南，其中包括 POST 请求的所有参数。但是我只在执行 client.UploadValues 时收到 400 错误。

PS：这是我的第一篇文章，所以可能不像我希望的那样吸引眼球

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:49:41.537

如果你有访问令牌，你可以使用我找到的这个插件，它会从用户那里获取最新的照片。

[Instagram .NET](http://instagramdotnet.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T20:41:06.133

如果您使用 Instasharp 客户端 API ( [https://github.com/InstaSharp/InstaSharp](https://github.com/InstaSharp/InstaSharp) )，您可以执行以下操作：

```
 public InstagramConfig Config 
    {
        get
        {
            return new InstagramConfig(InstagramAuthorisationModel.ApplicationId, InstagramAuthorisationModel.Secret);
        }
    }

public void YourSubscribeMethod(string searchTerm)
{
    var result = await new Subscription(Config).CreateTag(searchTerm))
} 
```

其中 InstagramAuthorisationModel 是一个保存您注册的应用程序 ID 和机密的类 您可以为 Geography、(CreateGeography)、User (CreateUser) 和 (CreateLocation) 方法创建订阅。

# android - 在Android中删除xml字符串

> ID：12952684
> 
> 赞同：3
> 
> 时间：2012-10-18T10:35:24.140
> 
> 标签：android, xml, eclipse, string

此刻我有太多的 xml 字符串值。我开始删除我不使用的那些，但这很难（我真的不知道我使用哪个，而且我不知道）。eclipse中是否有可以为我做这个的功能，或者帮助我实现它？（像一些调用层次结构）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:41:34.297

[Android Lint](http://tools.android.com/tips/lint)应该能够帮助您解决这个问题。

在网站上，它声明它可以做以下事情：

```
Missing translations (and unused translations)
Layout performance problems (all the issues the old layoutopt tool used to find, and more)
Unused resources
Inconsistent array sizes (when arrays are defined in multiple configurations)
Accessibility and internationalization problems (hardcoded strings, missing contentDescription, etc)
Icon problems (like missing densities, duplicate icons, wrong sizes, etc)
Usability problems (like not specifying an input type on a text field)
Manifest errors 
```

# bash - 如何修改由自定义挂载助手创建的 /etc/mtab 条目，以便使用自定义 `umount`？

> ID：12952686
> 
> 赞同：2
> 
> 时间：2012-10-18T10:35:32.753
> 
> 标签：bash, mount

回答我的问题[如何仅使用 ? 安装 cryptsetup 容器`mount`？](https://unix.stackexchange.com/q/52078/863)在 unix.SE 上，我意识到这`mount -t luks`将调用脚本`mount.luks`，目前看起来像这样：

```
#!/bin/bash
set -e
MAPPER=$(mktemp -up /dev/mapper)
cryptsetup luksOpen $1 $(basename $MAPPER)
shift
mount $MAPPER $* || cryptsetup luksClose $(basename $MAPPER) 
```

也就是说，它确定了一个未使用的映射器名称，[cryptsetup](https://code.google.com/p/cryptsetup/)可以使用它来安装一个 LUKS/dm-crypt 加密设备（我知道`$*`如果涉及子类型很容易递归，请考虑这是一个原型）在解密之后（在提示输入密码）。

问题是，`mount -t luks /dev/hda /mnt/decrypted`in的结果条目`/etc/mtab`看起来像

```
/dev/mapper/tmp.mpI5ClExf8 on /mnt/decrypted type ext3 (rw,relatime,errors=continue,data=writeback) 
```

这样`umount /dev/hda`将失败并且`umount /mnt/decrypted`只会卸载映射器但使加密设备保持打开状态。映射器也无关紧要。我想要实现的是有一个条目

```
/dev/hda on /mnt/decrypted type luks.ext3 (rw,relatime,errors=continue,data=writeback,mapper=/dev/mapper/tmp.mpI5ClExf8) 
```

这样`umount`就会调用`umount.luks`，可能类似于

```
#!/bin/bash
set -e
umount $1
cryptsetup luksClose $MAPPER 
```

（同样，原型，这只会`umount /mnt/decrypted`正确处理调用，`MAPPER`需要从挂载选项中获取）

那么，`mount.luks`必须如何修改呢？直接修改`/etc/mtab`肯定是个坏主意。（例如可以以某种`mount -n`方式`mount -f`实现这一目标吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-10T14:48:35.167

我知道这个问题很老，但是我自己在寻找答案时遇到了它。

如果您有足够新的发行版，例如 Fedora 20，那么您可以修改 mount.luks 脚本以包含`'-o helper=luks'`.

例如：

```
#!/bin/bash
set -e
MAPPER=$(mktemp -up /dev/mapper)
cryptsetup luksOpen $1 $(basename $MAPPER)
shift
mount -o helper=luks $MAPPER $* || cryptsetup luksClose $(basename $MAPPER) 
```

umount 使用 helper 的值来确定要运行的正确 umount 脚本，类似于 mount 使用 -t 选项的方式。

注意：在 Fedora 20 上，/etc/mtab 是 /proc/self/mounts 的符号链接。如果您 cat /etc/mtab，则不会显示辅助选项。但是，如果您在没有选项的情况下执行 mount，则会出现 helper 选项。

# c# - 对从当前月份开始的月份名称列表进行排序

> ID：12952688
> 
> 赞同：2
> 
> 时间：2012-10-18T10:35:35.733
> 
> 标签：c#, date, sorting, datetime

> **可能重复：**
> [Linq orderby，从特定数字开始，然后返回最低](https://stackoverflow.com/questions/12579559/linq-orderby-start-with-specific-number-then-return-to-lowest)

我需要创建一个列出一年中月份的组合框，但需要它从当前月份开始，然后按月份顺序排列，例如：

10
月 11 月
12
月 1 月
2
月 3 月
等等......

数据源是数据库中的月份列表，根据月份编号（即一月 = 1 等）进行编号，然后对其进行操作以给出日期时间

如何在 C# 中对这个列表进行排序，以便得到我想要的顺序？

TIA。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T10:41:53.633

```
string[] months = CultureInfo.CurrentCulture.DateTimeFormat.MonthNames;
var ordered = months.Skip(DateTime.Today.Month - 1)
                    .Concat(months.Take(DateTime.Today.Month - 1))
                    .Where(s=>!String.IsNullOrEmpty(s))
                    .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:44:24.543

使用[DateTimeFormatInfo.GetMonthName 方法](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.getmonthname.aspx)

```
List<string> list = new List<string>();
DateTimeFormatInfo dtFI = new DateTimeFormatInfo();
DateTime currentDate = DateTime.Now;
DateTime nextyearDate = currentDate.AddYears(1).AddDays(-1);
while (currentDate < nextyearDate)
{
    list.Add(dtFI.GetMonthName(currentDate.Month));
    currentDate = currentDate.AddMonths(1);
} 
```

这将创建一个新的月份列表，从当前月份开始。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T10:47:30.223

LINQ 对此的另一种看法：

```
// month name source, use what you prefer
var monthNames = CultureInfo.CurrentCulture.DateTimeFormat.MonthNames;
var sorted = Enumerable.Range(1, 12).Zip(monthNames, Tuple.Create)
            .OrderBy(t => (t.Item1 - DateTime.Today.Month + 12) % 12)
            .Select(t => t.Item2)
            .ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:50:45.277

您可以在 C# 中使用`List<DateTime> monthNames = DateTimeFormatInfo.CurrentInfo.MonthNames.ToList();`. 它`List<DateTime>`包含 13 个元素（末尾为空月份名称，但您始终可以删除最后一个元素`monthNames.RemoveAt(monthNames.Count - 1);` [http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.monthnames.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.monthnames.aspx)

要重新排序此列表，您可以使用 获取当前月份编号索引`DateTime.Now.Month.ToString("00");`，然后重新构建列表`newMonthNames = monthNames.GetRange(index, 12 - index).AddRange(monthNames.GetRange(0, index);`

有很多方法可以做到这一点，就像其他人所展示的那样。

# ruby-on-rails - Rails 开发日志记录 - 限制请求值

> ID：12952694
> 
> 赞同：1
> 
> 时间：2012-10-18T10:36:01.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging

我正在开发一个 Rails 应用程序，我通过请求（base64）传递某些图像数据。我需要这样做，因为我在客户端进行了一些处理。这种方法的问题是它会向我的服务器日志发送大量垃圾邮件。

有没有一种很好的方法可以以某种方式钳制包含长 base64 字符串的请求部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:40:01.127

您可以`config.filter_parameters`在`environment.rb`文件中使用从日志记录中过滤特定参数。或者使用核选项并设置`config.log_level`为较低的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:43:03.650

我相信这个配置选项的存在是为了不同的意图，但你可以使用

```
config.filter_parameters += [:base64_data] 
```

在你的`config/application.rb`文件中。

# jquery - 多个下拉按钮上的重复键

> ID：12952698
> 
> 赞同：0
> 
> 时间：2012-10-18T10:36:08.993
> 
> 标签：jquery, drop-down-menu

我有一个搜索功能，我必须让用户动态添加下拉框中的搜索参数。我正在使用 jquery 克隆。

现在我还必须确保用户不会两次选择相同的搜索条件，因此为了防止这种情况，我必须禁用选定的选项。

当有两个以上的下拉菜单时，我尝试这样做会失败

[http://jsfiddle.net/V8uFE/](http://jsfiddle.net/V8uFE/)

任何帮助是极大的赞赏。

在此先感谢，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:40:25.230

相反，您可以在单个列表本身中使用多项选择。但是如果您想这样做，您可以使用 AJAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:00:11.733

检查这个[小提琴](http://jsfiddle.net/V8uFE/3/)。

着色作品。但不是残疾人财产。你必须对此进行调查。

您可以像这样使用而不是更改颜色。

```
if(flag)               
    $(this).css('display','none');               
else               
    $(this).css('display', 'block'); 
```

我认为禁用的属性也会触发更改事件。我不确定。但它不工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:20:51.337

试试代码，我认为应该以某种方式帮助你！

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<script>
        function disableValue(str){
                    var dis1=document.getElementsByTagName("option");
                     for(var i=0;i<dis1.length;i++){
                            if(dis1[i].value==str){
                                 dis1[i].disabled=true;
                            }
                     }
                    return true;
        }

    </script>
<body>

   <select  onchange="return disableValue(this.value)">
<option selected="selected">-Search Parameters-</option>
<option value="1" class="go1">1</option>
<option value="2" class="go2">2</option>
<option value="3" class="go3">3</option>
</select>

<select onchange="return disableValue(this.value)">
<option selected="selected">-Search Parameters-</option>
<option value="1" class="go1">1</option>
<option value="2" class="go2">2</option>
<option value="3" class="go3">3</option>
</select>

<select onchange="return disableValue(this.value)">
<option selected="selected">-Search Parameters-</option>
<option value="1" class="go1">1</option>
<option value="2" class="go2">2</option>
<option value="3" class="go3">3</option>
</select>

<div id="work"></div>
  </body>
</html> 
```

# java - Java以编程方式检查最新版本

> ID：12952699
> 
> 赞同：19
> 
> 时间：2012-10-18T10:36:09.567
> 
> 标签：java

**目标**：在机器上检查 java 的版本（我可以从中得到`java -version`）。将其与[java 网站提供的最新版本进行比较](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

假设我在机器上安装了 JRE/JDK，我想知道是否有任何方法可以检查最新的 Java 版本。

如果我可以通过 Java 本身做到这一点，我的解决方案将变得独立于平台。我可以使用`java.net.URL`类向 Java 网站发送请求并获取 HTML，但是响应将是动态的，因为 Oracle 可以更改其网站和样式，并且从长远来看可能会出现维护问题。

我看过[javatester.org](http://www.javatester.org/about.html)，但我不希望通过小程序而是通过命令行（我可以将其添加到脚本）。

通过 javacpl.exe，我可以安排定期检查，但我想按需进行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-13T19:49:06.890

答案其实很简单。[http://java.com/en/download/testjava.jsp向](http://java.com/en/download/testjava.jsp)[http://java.com/applet/JreCurrentVersion2.txt](http://java.com/applet/JreCurrentVersion2.txt)发出请求。该文件当前包含一个版本号：“1.7.0_11”……这确实是最新和最好的。

**Java 代码示例**

```
try (BufferedReader br = new BufferedReader(new InputStreamReader(new URL(
    "http://java.com/applet/JreCurrentVersion2.txt").openStream()))) {
  String fullVersion = br.readLine();
  String version = fullVersion.split("_")[0];
  String revision = fullVersion.split("_")[1];
  System.out.println("Version " + version + " revision " + revision);
} catch (IOException e) {
  // handle properly
} 
```

**2014-03-20 更新**

尽管[Java 8 最近发布了](http://www.oracle.com/technetwork/java/javase/downloads/index.html) [http://java.com/applet/JreCurrentVersion2.txt](http://java.com/applet/JreCurrentVersion2.txt)目前仍然返回 1.7.0_51。

**2016-07-13 更新**

看起来我们需要每隔几个月回来一次...目前您需要扫描[http://java.com/en/download/installed8.jsp](http://java.com/en/download/installed8.jsp)以获取 JavaScript 变量`latest8Version`。所以，你可以运行`curl -s https://java.com/en/download/installed8.jsp | grep latest8Version`.

**2018-08-19 更新**

[http://javadl-esd-secure.oracle.com/update/baseline.version](http://javadl-esd-secure.oracle.com/update/baseline.version)是其他一些答案中提到的另一个热点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-02T14:28:24.267

更新：我不推荐这种方法，因为这个 JRE 是带有 Ask.com 工具栏的那个。您最好自己下载并自己分发。

jusched.exe 程序访问以下 URL 以找出可用的版本。我认为它不太可能改变，因为 jusched 安装在数百万台计算机上。

[https://javadl-esd-secure.oracle.com/update/1.7.0/map-m-1.7.0.xml](https://javadl-esd-secure.oracle.com/update/1.7.0/map-m-1.7.0.xml)

这是它为我返回的内容的片段：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="yes" ?>

<java-update-map version="1.0">
      <mapping>
      <version>1.7.0_17</version>
      <url>https://javadl-esd-secure.oracle.com/update/1.7.0/au-descriptor-1.7.0_25-b17.xml</url>
   </mapping>
   <mapping>
      <version>1.7.0_21</version>
      <url>https://javadl-esd-secure.oracle.com/update/1.7.0/au-descriptor-1.7.0_25-b17.xml</url>
   </mapping>
   </java-update-map> 
```

要获取它指向的实际版本，您必须获取上述 URL。下面是这个 XML 的另一个片段：

```
xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- XML file to be staged anywhere, and pointed to by map.xml file -->
<java-update>
  <information version="1.0" xml:lang="en">
    <caption>Java Update - Update Available</caption>
    <title>Java Update Available</title>
    <description>Java 7 Update 25 is ready to install. Installing Java 7 Update 25 might uninstall the latest Java 6 from your system. Click the Install button to update Java now.  If you wish to update Java later, click the Later button.</description>
    <moreinfo>http://java.com/moreinfolink</moreinfo>
    <AlertTitle>Java Update Available</AlertTitle>
    <AlertText>A new version of Java is ready to be installed.</AlertText>
    <moreinfotxt>More information...</moreinfotxt>
    <url>http://javadl.sun.com/webapps/download/GetFile/1.7.0_25-b17/windows-i586/jre-7u25-windows-i586-iftw.exe</url>
    <version>1.7.0_25-b17</version>
    <post-status>https://nometrics.java.com</post-status>
    <cntry-lookup>http://rps-svcs.sun.com/services/countrylookup</cntry-lookup>
    <predownload></predownload>
    <options>/installmethod=jau FAMILYUPGRADE=1 SPWEB=http://javadl-esd.sun.com/update/1.7.0/sp-1.7.0_25-b17</options>
    <urlinfo>24595ec7f861bc67e572f1e4ad3992441335e1a7</urlinfo>
  </information>
</java-update> 
```

版本标签包含完整的版本号。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-20T04:04:55.937

一个与现已失效的“JreCurrentVersion2.txt”非常相似的 URL：

[http://javadl-esd-secure.oracle.com/update/baseline.version](http://javadl-esd-secure.oracle.com/update/baseline.version)

链接的内容如下所示：

```
1.8.0_111
1.7.0_121
1.6.0_131
1.5.0_99
1.4.2_43 
```

您可以轻松解析内容以找到最新的 JRE 版本。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-18T13:24:09.017

您可以解析**[Java SE 下载页面](http://www.oracle.com/technetwork/java/javase/downloads/index.html)**以提取 Java 版本。
这样，您将获得 JDK6 和 JDK7 的版本，这使您可以针对最新的 Oracle 版本测试特定的 JDK（6 或 7）。
（与仅列出 JDK7的[免费 Java 下载页面相反）](http://www.java.com/en/download/index.jsp)

Her 是[**Go**](http://golang.org/)*中的一个粗略*脚本[，](http://golang.org/)**您可以在 Windows、Unix、MacOs 上将其编译成一个独立的可执行文件，并在命令行或脚本中使用：**

 **```
package main

import (
    "bytes"
    "encoding/xml"
    "fmt"
    "io/ioutil"
    "net/http"
    "os/exec"
    "regexp"
)

type Jdk struct {
    Url    string
    Ver    string
    update string
}

func main() {
    resp, err := http.Get("http://www.oracle.com/technetwork/java/javase/downloads/index.html")
    if err != nil {
        fmt.Printf("Error on http Get: %v\n", err)
        return
    }
    bodyb, err := ioutil.ReadAll(resp.Body)
    if err != nil {
        fmt.Printf("QueriesForOwner: error in ReadAll: %v\n", err)
        return
    }
    br := bytes.NewBuffer(bodyb)
    jdkre, err := regexp.Compile(`h3[^\r\n]+(/technetwork/java/javase/downloads/(jdk(?:6|7)(?:u(\d+))?)-downloads-\d+\.html)`)
    if err != nil {
        fmt.Printf("extract: error in regexp compilation: %v\n", err)
        return
    }
    jdks := jdkre.FindAllSubmatch(br.Bytes(), -1)
    jdk7 := Jdk{string(jdks[0][4]), string(jdks[0][5]), string(jdks[0][6])}
    jdk6 := Jdk{string(jdks[1][7]), string(jdks[1][8]), string(jdks[1][9])}
    fmt.Printf("Jdk7: %v\nJdk6: %v\n", jdk7, jdk6)
    jver, err := exec.Command("java", "-version").CombinedOutput()
    if err != nil {
        fmt.Printf("*ExitError from java -version:", err)
        return
    }
    fmt.Println("JVer: '", string(jver), "'")
    jverre, err := regexp.Compile(`1.(\d).\d(?:_(\d+))"`)
    jvers := jverre.FindSubmatch(jver)
    jj := string(jvers[0])
    jv := string(jvers[1])
    ju := string(jvers[2])
    jdk := jdk6
    if jv == "7" {
        jdk = jdk7
    }
    if jdk.update != ju {
        fmt.Println("Local JDK *NOT* up-to-date: you have ", jj, ", Oracle has ", jdk.Ver)
    } else {
        fmt.Println("Local JDK *up-to-date*: you have ", jj, ", equals to Oracle, which has", jdk.Ver)
    }
} 
```

同样，这是一个面向 JDK 的*粗略*脚本，您需要根据您的特定需求对其进行调整，使其输出和退出状态与您的脚本所需的相匹配。

在我的（PC）工作站上，它返回：

```
Jdk7: {/technetwork/java/javase/downloads/jdk7u9-downloads-1859576.html jdk7u9 9}
Jdk6: {/technetwork/java/javase/downloads/jdk6u37-downloads-1859587.html jdk6u37 37}
JVer: ' java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b05)
Java HotSpot(TM) Client VM (build 20.6-b01, mixed mode, sharing)
 '
Local JDK *NOT* up-to-date: you have  1.6.0_31" , Oracle has  jdk6u37 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-18T10:47:24.180

我不知道您到底在寻找什么信息，但您可以使用获取一些版本信息

```
System.getProperty("java.version"); 
```

如果这不是您要查找的内容，请在此处检查其他可用属性：http: [//docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#getProperties) ()

至于最新的可用版本，我想你必须手动解析这个站点：http: [//java.com/en/download/index.jsp](http://java.com/en/download/index.jsp)

最新版本在那里，目前是

> 版本 7 更新 9

您写道，这不是您想要的，因为“Oracle 可以更改他们的网站和样式”。但是，您想通过访问他们的服务（在本例中为网站）来了解最新版本的 Java。只要您不为此付费，他们就对您没有义务，并且可以在未经您同意的情况下随时更改服务。即使您是付费客户，您最好的希望是他们会通知您即将发生的变化，并且您的维护问题仍然存在。

请记住，您要使用的是他们的服务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T13:05:48.710

前段时间我用这个 groovy 脚本解决了一个类似的问题（免责声明：在某种程度上是一个“玩具”脚本）：

```
@Grapes([
    @Grab(group='org.ccil.cowan.tagsoup', module='tagsoup', version='1.2.1')
])

def slurper = new XmlSlurper(new org.ccil.cowan.tagsoup.Parser())
def url = new URL("http://www.java.com/download/manual.jsp")

def html
url.withReader { reader ->
    html = slurper.parse(reader)
}
def lastJava = html.body.div.div.div.strong.text()

println "Last available java version: ${lastJava}"
println "Currently installed java version: ${System.properties["java.version"]}" 
```

它产生类似的东西：

```
Last available java version: 
Version 7 Update 9

Currently installed java version: 1.7.0_07 
```

如果您想避免因页面结构更改而导致的维护问题，也许更好的选择是搜索包含“Version x Update y”的行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-18T04:18:25.400

获取所有系统变量

```
Properties properties = System.getProperties();
System.out.println(properties); 
```

示例输出，这在您的系统中可能会有所不同，具体取决于您的操作系统和 Java JDK/JRE 版本。

```
{
    java.runtime.name = Java(TM) SE Runtime Environment,
    sun.boot.library.path = C:\Program Files\Java\jdk1.8.0_31\jre\bin,
    java.vm.version = 25.31-b07,
    java.vm.vendor = Oracle Corporation,
    java.vendor.url = http://java.oracle.com/,
    path.separator = ;,
    idea.launcher.port = 7534,
    java.vm.name = Java HotSpot(TM) 64-Bit Server VM,
    file.encoding.pkg = sun.io,
    user.country = NP,
    user.script = ,
    sun.java.launcher = SUN_STANDARD,
    sun.os.patch.level = ,
    java.vm.specification.name = Java Virtual Machine Specification,
    user.dir = C:\Users\...\roid,
    java.runtime.version = 1.8.0_31-b13,
    java.awt.graphicsenv = sun.awt.Win32GraphicsEnvironment,
    java.endorsed.dirs = C:\Program Files\Java\jdk1.8.0_31\jre\lib\endorsed,
    os.arch = amd64,
    java.io.tmpdir = C:\Windows\TEMP\,
    line.separator = ,
    java.vm.specification.vendor = Oracle Corporation,
    user.variant = ,
    os.name = Windows 8.1,
    sun.jnu.encoding = Cp1252,
    java.library.path = C:\Program...roid,
    java.specification.name = Java Platform API Specification,
    java.class.version = 52.0,
    sun.management.compiler = HotSpot 64-Bit Tiered Compilers,
    os.version = 6.3,
    user.home = C:\Users\Xxx,
    user.timezone = Asia/Kathmandu,
    java.awt.printerjob = sun.awt.windows.WPrinterJob,
    file.encoding = UTF-8,
    idea.launcher.bin.path = C:\Program Files (x86)\xxx\bin,
    java.specification.version = 1.8,
    java.class.path = C:\Program Files\Java\jdk1.8.0_31\jre\lib\charsets.jar;...,
    user.name = Xxx,
    java.vm.specification.version = 1.8,
    sun.java.command = com.xxxx.ameras,
    java.home = C:\Program Files\Java\jdk1.8.0_31\jre,
    sun.arch.data.model = 64,
    user.language = en,
    java.specification.vendor = Oracle Corporation,
    awt.toolkit = sun.awt.windows.WToolkit,
    java.vm.info = mixed mode,
    java.version = 1.8.0_31,
    java.ext.dirs = C:\Program Files\Java\jdk1.8.0_31\jre\lib\ext;...,
    java.vendor = Oracle Corporation,
    file.separator = \,
    java.vendor.url.bug = http://bugreport.sun.com/bugreport/,
    sun.io.unicode.encoding = UnicodeLittle,
    sun.cpu.endian = little,
    sun.desktop = windows,
    sun.cpu.isalist = amd64
} 
```

仅检索特定变量

```
String javaVersion = System.getProperty("java.version");
System.out.println(javaVersion); 
```

输出

```
1.8.0_31 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-12T14:24:40.317

~~[@MarcelStör 的解决方案](https://stackoverflow.com/a/14307459/96588)不再有效 -[文件中的版本](http://java.com/applet/JreCurrentVersion2.txt)是 1.8.0_51，而实际的最新版本是 1.8.0_91/92。~~如果您[在 Firefox 或 Chrome 中访问Java 测试页面](http://java.com/en/download/installed8.jsp)并打开开发控制台，您可以获取`latest8Version`当前为`1.8.0_91`. 这可以包含在 Selenium/Firefox 解决方案中，但这是获取此信息的一种非常骇人听闻的方式。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-04-29T12:41:11.510

```
System.getProperty("java.vm.specification.version");
System.getProperty("java.version"); 
```**

# jquery - Jquery - 我如何获得视频 src 值？

> ID：12952703
> 
> 赞同：6
> 
> 时间：2012-10-18T10:36:29.333
> 
> 标签：jquery, video

我需要获取视频的值并需要更改为新值...为此我使用了此功能：

```
var video = $('#task2ResultVideo').get(0);

console.log($(video).attr('poster')); // i am getting this

    $(video).attr('src',function(num,val){
        console.log(num,val)        // i am not getting this..
    }) ​ 
```

HTML：

```
<video id="task2ResultVideo" autobuffer poster="img/task2-results-host-poster.jpg">
    <source src="Video/webm/Task_2.4a_Host_treated.webm" type="video/webm" />
    <source src="Video/ogv/Task_2.4a_Host_treated.theora.ogv" type="video/ogg" />
    <source src="Video/MP4/Task_2.4a_Host_treated.mp4" type="video/mp4" />
</video>​ 
```

但我无法获得价值。我的代码有什么问题？如果我得到值，我该如何更改 src？

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T10:41:20.943

您的视频标签没有任何来源属性，因此您永远不会得到它。而是获取其内部源标签的 src 属性

```
$('video').find('Source:first').attr('src'); 
```

这将获得视频标签内第一个源标签的 src 属性值

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T10:39:06.650

尝试这个，

**[现场演示](http://jsfiddle.net/zSCce/1/)**

```
$('video source').each(function(num,val){
    console.log($(this).attr('src'));        // i am not getting this..
    $(this).attr('src', 'newSourceValue')
}); 
```

根据 OP 的评论，更改 src 文件名

**[现场演示](http://jsfiddle.net/zSCce/2/)**

```
$('video source').each(function(num,val){
    console.log($(this).attr('src'));        // i am not getting this..
    strSrc = $(this).attr('src'); 
    strPath = strSrc.substring(0, strSrc.lastIndexOf('/'));
    strExtenion = strSrc.substring(strSrc.lastIndexOf('.'));
    $(this).attr('src', strPath + "/" + "newFileName" + strExtenion );    
})​; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:39:53.967

```
var video = $('#task2ResultVideo');

video.find('source').each(function() {
  console.log($(this).attr('src'));
});​

// if you want to get array of the src
var arr = video.find('source').map(function() {
    return $(this).attr('src');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T10:38:49.663

尝试这个：

```
$(video).children().each(function(index) {
    console.log(index + " " + $(this).attr('src'));
}); 
```

# crystal-reports - 是在 Crystal Reports VS 2008 中可能吗？

> ID：12952706
> 
> 赞同：1
> 
> 时间：2012-10-18T10:36:39.883
> 
> 标签：crystal-reports

我要求将日期显示为“2012 年 10 月 27^日，星期三”（“th”应该是超级脚本）。在 VS 2008 的 Crystal Reports 中是否可行？

我使用了文本解释设置为“HTML 文本”的公式字段，但我仍然没有得到解决方案。任何人都可以建议我的方式吗？

谢谢，拉克什。

# django - 使用 take_context 对 Django 标签有性能影响吗？

> ID：12952707
> 
> 赞同：1
> 
> 时间：2012-10-18T10:36:40.910
> 
> 标签：django, performance, templates, render, nodes

我有时通过为 Django 标签提供“takes_context=True”来访问上下文；通常用于访问请求。

但是是否存在性能影响。

我对模板如何工作的心智模型是标签功能组装代表模板的节点，然后这些节点可以在不重新创建节点或重新解析模板的情况下呈现内容。

但是可以肯定的是，如果可以使标记函数返回不同的节点，这取决于上下文中的某事，那么每次上下文不同时（IE 每次）都必须重新创建节点。

要么是这样，要么你被第一次获得的节点所困扰，在这种情况下，你不应该根据上下文中的任何内容返回节点（在这种情况下，有什么意义？）。

有人可以帮我解决这个问题吗？我使用 Django 1.4.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:03:26.837

加载模板时会创建节点。当它被渲染时，上下文被简单地传递给节点的渲染方法。`simple_tag`参数的唯一区别`takes_context`是使生成的`Node.render`代码将上下文传递给您的函数。所以不，使用`takes_context`.

# c - 二维/多维数组的内存映射

> ID：12952708
> 
> 赞同：1
> 
> 时间：2012-10-18T10:36:42.063
> 
> 标签：c, arrays, memory, memory-management, 2d

谁能**直观地**解释一下2D 数组是如何存储在内存中的： a ， &a ， &a[0] ， a[0] 都有相同的地址......在某种程度上它似乎是一个指向自身的指针。 ..那不可能是正确的...这已经困扰了我将近一年，并且在网上搜索也导致我没有合适的答案.....非常感谢您的帮助....thanx

```
enter code here

#include<stdio.h>

int main()
{
    int a[2][3]={10,20,30,40,50,60};

    int row =0,col=0;

    printf("&a = %d ",&a);    
    printf("\na = %d ",a);
    printf("\n&a[0] = %d ",&a[0]);
    printf("\na[0] = %d ",a[0]);
    printf("\n&a[1] = %d ",&a[1]);
    printf("\na[1] = %d ",a[1]);
    printf("\n&a[0][0] = %d ",&a[0][0]);

    int *p;
    printf("\n\n sizeof(p) = %d ",sizeof(p) );

    printf("\n\n sizeof(a) = %d ",sizeof(a) );
    printf("\n\n sizeof(&a) = %d ",sizeof(&a) );
    printf("\n\n sizeof(&a[0]) = %d ",sizeof(&a[0]) );
    printf("\n\n sizeof(a[0]) = %d ",sizeof(a[0]) );
    printf("\n\n sizeof(&a[1]) = %d ",sizeof(&a[1]) );
    printf("\n\n sizeof(a[1]) = %d ",sizeof(a[1]) );
    printf("\n\n sizeof(&a[0][0]) = %d ",sizeof(&a[0][0]) );
} 
```

* * *

## 输出

```
&a = 2293536
a = 2293536
&a[0] = 2293536
a[0] = 2293536
&a[1] = 2293548
a[1] = 2293548
&a[0][0] = 2293536

sizeof(p) = 4

sizeof(a) = 24

sizeof(&a) = 4

sizeof(&a[0]) = 4

sizeof(a[0]) = 12

sizeof(&a[1]) = 4

sizeof(a[1]) = 12

sizeof(&a[0][0]) = 4 
```

不要让我参考[C 中二维数组的内存映射](https://stackoverflow.com/questions/6673719/memory-map-for-a-2d-array-in-c) ...这没有帮助...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:50:07.877

所以数组`a`是一个占用一块内存的对象：

```
| a                                                         | 
```

它是一个长度为 2 的数组，所以如果我们绘制组成它的元素，它看起来像这样：

```
| a[0]                        | a[1]                        | 
```

`a[0]`反过来是一个长度为 3 的数组，如下所示：

```
| a[0][0] | a[0][1] | a[0][2] | 
```

`a[1]`看起来一样，所以我们可以重绘数组`a`，如下所示：

```
| a[0][0] | a[0][1] | a[0][2] | a[1][0] | a[1][1] | a[1][2] | 
```

请注意`a`，`a[0]`和`a[0][0]`都位于内存中的同一点：对象的开头`a`。但是，它们确实有不同的大小：`a`是整个“二维数组”，`a[0]`是一个常规数组，并且`a[0][0]`是一个单一的 `int.

这解释了为什么`&a`和是相同`&a[0]`的`&a[0][0]`地址（尽管它们具有不同的类型）-它们是位于内存中同一点的事物的地址。

此外，还有一条规则，如果数组在不是一元`&`或`sizeof`运算符的主题的表达式中求值，则它的求值结果为指向其第一个元素的指针：也就是说，使用普通数组`a`等同于`&a[0]`. 因为`a[0]`也是一个数组，所以使用一个普通`a[0]`的等价于`&a[0][0]`. 这解释了为什么`a`并且还评估到与,和`a[0]` 相同的地址。`&a``&a[0]``&a[0][0]`

数组的地址和该数组中第一个元素的地址相同这一事实并不令人惊讶：同样的事情也会发生在 上`struct`。鉴于：

```
struct { int a; int b; } x; 
```

你会发现它是`&x`同`&x.a`一个地址（尽管类型不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:42:19.780

除非它是`sizeof` `_Alignof`, 或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N-element array of ”类型的*表达式*`T`将转换为“pointer to”类型的表达式`T`" 并且表达式的值将是数组中第一个元素的地址。

假设以下内存映射（假设 little-endian，4 字节`int`；地址凭空提取）：

```
项目地址 00 01 02 03 子数组 子数组元素
---- -------- -- -- -- -- --------- -----
   一个 0xfffebc00 00 00 00 0a [0] a[0][0]
             0xfffebc04 00 00 00 14 a[0][1]
             0xfffebc08 00 00 00 1e [0][2]
             0xfffebc0c 00 00 00 28 a[1] a[1][0]
             0xfffebc10 00 00 00 32 a[1][1]
             0xfffebc14 00 00 00 3c a[1][2]

```

按照上面提到的规则，*表达式* `a`将从类型“三元素数组的二元素数组`int`”转换为“指向三元素数组的指针`int`”，表达式的值将是第一个的地址数组的元素。is的第一个元素，`a`is`a[0]`的地址。 `a[0]``0xfffebc00`

类似地，表达式`a[0]`将从类型“三元素数组`int`”转换为“指针`int`”，其值将是数组第一个元素的地址。`a[0]`is的第一个元素`a[0][0]`，它的地址是 ... `0xfffebc00`。

该表达式`&a`是上述规则的例外之一。在这种情况下，`a`在应用运算符之前不会转换为指针类型`&`；`int`表达式的类型是“指向”( )的三元数组的二元数组的指针`int (*)[2][3]`，其值为`a`...的地址`0xfffebc00`。

类似地，表达式`&a[0]`的类型为“指向 3 元素数组的指针`int`”，其值为 的地址`a[0]`，即`0xfffebc00`...。

希望的类型和价值`&a[0][0]`应该是显而易见的。

所以是的，表达式`a`, `&a`, `*a`, `a[0]`,`&a[0]`和`&a[0][0]`都产生相同的*值*，但它们的类型不同：分别是`int (*)[3]`, `int (*)[2][3]`, ``int *`, `int *`, `int (*)[3]`, 和`int *`。

# android - windows phone 7 c# 中对于 android 库项目的等价物是什么？

> ID：12952709
> 
> 赞同：0
> 
> 时间：2012-10-18T10:36:51.360
> 
> 标签：android, windows-phone-7, library-project

我是 windows phone 7 编程的新手，我一直在为 android 开发，我使用 android 中的库项目开发了一个应用程序，并在我的客户端应用程序中引用它。我的问题是：Windows Phone 7 中是否有任何与图书馆项目相当的东西？提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:52:24.260

您可以在 Windows Phone 中创建库项目并在多个应用程序之间共享它们。只需点击解决方案：添加 -> 新建项目 -> Windows Phone 类库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:55:44.893

这将有助于您将 api 从 android 映射到 WP7 **[http://wp7mapping.interoperabilitybridges.com/Library](http://wp7mapping.interoperabilitybridges.com/Library)**

# qt4 - 在我自己的从 QTreeWidgetItem 派生的类上使用 addChildren() 函数？

> ID：12952712
> 
> 赞同：1
> 
> 时间：2012-10-18T10:37:01.813
> 
> 标签：qt4, qt-creator, derived-class, qtreewidgetitem

大家好，我已经创建了自己的类，该类派生自 QTreeWidgetItem，mytreewidgetitem。我使用以下命令创建了它们的列表：QList。我用 append() 函数填充它。然后我想使用 addChildren() 函数将列表添加到 QTreeWidgetItem 中，但是由于 addChildren() 需要 QList 变量作为输入，所以出现编译错误。是否有解决方法（例如重铸）使 addChildren() 函数与我的派生类一起工作？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:23:16.797

您可以创建`QList<QTreeWidgetItem *>`，然后附加您可以执行以下操作：

```
QList<QTreeWidgetItem *> list;

mytreewidgetitem *item = new mytreewidgetitem;
list << item; 
```

然后，当您填写列表时，您可以将其推送到`QTreeWidgetItem`by `addChildren(list)`。您不会将您的 item( `mytreewidgetitem`) 转换为 qt 的 item( `QTreeWidgetItem`)。

# asp.net - 如何在 asp.net 中共享本地化页面

> ID：12952716
> 
> 赞同：0
> 
> 时间：2012-10-18T10:37:24.370
> 
> 标签：asp.net, localization

我正在使用 asp.net，并且我已经在一个网站中实现了本地化，用户可以在该网站上在英语和法语之间切换，其中英语是默认语言，我在页面中添加了 shareThis 插件，问题是如果用户切换到法语然后在 facebook 上分享页面，或者例如将页面 url 通过邮件发送给朋友查看，页面将以英文而不是法文打开，我知道这是逻辑但问题是客户希望共享页面是使用用户选择的语言，这意味着如果我用法语分享页面，那么人们也会看到法语。

这个问题有解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:31:33.340

这是使用 URL 方案来本地化您的 Web 应用程序的有用之处。除了依赖会话状态，您的 Web 应用程序可以`CurrentUICulture`根据请求 URL 进行设置，并且您的语言切换可以通过执行重定向来工作（例如，到 www.yourapp/fr 表示法语）。这样，当您的法语用户共享页面时，他们将共享始终以法语显示的 www.yourapp/fr。

# android - 如何在Android中将大尺寸视频压缩为小尺寸？

> ID：12952718
> 
> 赞同：2
> 
> 时间：2012-10-18T10:37:24.963
> 
> 标签：android, compression

是否可以在上传到任何服务器之前将*大尺寸视频*压缩为小*尺寸视频*`Android`？

如何在 java 中以编程方式完成`Android`？

# silverlight - 更改 DataPager 文本

> ID：12952724
> 
> 赞同：0
> 
> 时间：2012-10-18T10:37:40.910
> 
> 标签：silverlight, datapager

这听起来像是一个奇怪的请求，我不确定它是否真的可行，但我有一个 Silverlight DataPager 控件，其中显示“X 页的第 1 页”，我想更改“页面”文本以表达不同的内容。

这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:44:32.167

在 DataPager 样式中，默认情况下有一个名为 CurrentPagePrefixTextBlock 的部分，其值为“Page”。您可以参考[http://msdn.microsoft.com/en-us/library/dd894495(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd894495(v=vs.95).aspx)了解更多信息。

解决方案之一是扩展 DataPager

这是执行此操作的代码

```
public class CustomDataPager:DataPager
{
    public static readonly DependencyProperty NewTextProperty = DependencyProperty.Register(
    "NewText",
    typeof(string),
    typeof(CustomDataPager),
    new PropertyMetadata(OnNewTextPropertyChanged));

    private static void OnNewTextPropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var newValue = (string)e.NewValue;
        if ((sender as CustomDataPager).CustomCurrentPagePrefixTextBlock != null)
        {
            (sender as CustomDataPager).CustomCurrentPagePrefixTextBlock.Text = newValue;
        }
    }

    public string NewText
    {
        get { return (string)GetValue(NewTextProperty); }
        set { SetValue(NewTextProperty, value); }
    }

    private TextBlock _customCurrentPagePrefixTextBlock;
    internal TextBlock CustomCurrentPagePrefixTextBlock
    {
        get
        {
            return _customCurrentPagePrefixTextBlock;
        }
        private set
        {
            _customCurrentPagePrefixTextBlock = value;
        }
    }

    public CustomDataPager() 
    {
        this.DefaultStyleKey = typeof(DataPager);
    }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        CustomCurrentPagePrefixTextBlock = GetTemplateChild("CurrentPagePrefixTextBlock") as TextBlock;
        if (NewText != null)
        {
            CustomCurrentPagePrefixTextBlock.Text = NewText;
        }
    }  

} 
```

现在通过在这个 CustomDataPager 中设置 NewText 属性，我们可以获得我们想要的任何文本而不是“Page”

xmlns:local="clr-namespace:Assembly 其中包含 CustomDataPager"

```
<local:CustomDataPager x:Name="dataPager1" 
                        PageSize="5"
                        AutoEllipsis="True"
                        NumericButtonCount="3"
                        DisplayMode="PreviousNext"
                        IsTotalItemCountFixed="True" NewText="My Text" /> 
```

现在它显示“我的文本”而不​​是“页面”。
但其他部分也需要定制才能正常工作！！
希望这能回答你的问题

# c# - 绑定到代码中的属性

> ID：12952726
> 
> 赞同：1
> 
> 时间：2012-10-18T10:37:44.327
> 
> 标签：c#, wpf, binding

好的，所以我知道有很多这样的问题，但似乎没有一个对我有帮助。

所以我有一个属性，我不想用来设置*TabItem*的可见性（所以我对属性的更新不感兴趣）。

问题只是绑定不起作用，我不确定为什么？VS 输出没有给我任何线索。

无论如何，这是 XAML 的代码示例：

```
<Window x:Class="WpfTestApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </Window.Resources>
    <Grid>
        <TabControl>
            <TabItem Header="tabItem1" />
            <TabItem Header="Hide me!" Visibility="{Binding ShowTab, Converter={StaticResource BoolToVis}}" />
        </TabControl>
    </Grid>
</Window> 
```

这是.cs

```
 public bool ShowTab { get; set; }

    public MainWindow()
    {
        ShowTab = false;
        InitializeComponent();
    } 
```

我错过了什么？某处应该有某种 DataContext 连接吗？还是代码是某种静态资源？为什么我没有从 VisualStudio 得到任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:40:30.660

添加**DataContext = this;** 到您的 MainWindow 构造函数

```
 public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        ShowTab = false;
    } 
```

请注意，如果您修改 ShowTab，您的 UI 将不会收到任何通知。

# macos - 来自 NSString 的 CGAffineTransform

> ID：12952727
> 
> 赞同：1
> 
> 时间：2012-10-18T10:37:46.210
> 
> 标签：macos, cocoa, cgaffinetransform

我怎样才能`CGAffineTransform`从`NSString`Cocoa 中获得一个？

在 iOS 上有`CGAffineTransformFromString`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:42:26.297

由于缺乏更好的解决方案，我目前正在这样做：

```
CGAffineTransform CGAffineTransformFromString(NSString *string)
{
    string = [string stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"[ ]"]];
    NSArray *components = [string componentsSeparatedByString:@","];
    CGAffineTransform transform;
    transform.a = [[components objectAtIndex:0] floatValue];
    transform.b = [[components objectAtIndex:1] floatValue];
    transform.c = [[components objectAtIndex:2] floatValue];
    transform.d = [[components objectAtIndex:3] floatValue];
    transform.tx = [[components objectAtIndex:4] floatValue];
    transform.ty = [[components objectAtIndex:5] floatValue];
    return transform;
} 
```

# c - 如何理解局部敏感哈希？

> ID：12952729
> 
> 赞同：159
> 
> 时间：2012-10-18T10:37:48.480
> 
> 标签：c, machine-learning, hashmap, nearest-neighbor, locality-sensitive-hash

我注意到 LSH 似乎是找到具有高维度属性的类似项目的好方法。

阅读论文[http://www.slaney.org/malcolm/yahoo/Slaney2008-LSHTutorial.pdf](http://www.slaney.org/malcolm/yahoo/Slaney2008-LSHTutorial.pdf)后，我仍然对这些公式感到困惑。

有谁知道解释这个简单方法的博客或文章？

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-10-19T04:45:20.427

我见过的关于 LSH 的最好的教程在这本书中：Mining of Massive Datasets。检查第 3 章 - 查找类似项目 [http://infolab.stanford.edu/~ullman/mmds/ch3a.pdf](http://infolab.stanford.edu/~ullman/mmds/ch3a.pdf)

我还推荐下面的幻灯片： [http](http://www.cs.jhu.edu/%7Evandurme/papers/VanDurmeLallACL10-slides.pdf) ://www.cs.jhu.edu/%7Evandurme/papers/VanDurmeLallACL10-slides.pdf 。幻灯片中的示例有助于我理解余弦相似度的散列。

[我从 ACL2010 的Benjamin Van Durme 和 Ashwin Lall](http://www.cs.jhu.edu/~vandurme/papers/VanDurmeLallACL10-slides.pdf)那里借了两张幻灯片，并尝试解释一下 LSH Families 对于余弦距离的直觉。 ![在此处输入图像描述](../Images/65e878b665a6b57f801b30baf7aee25f.png)

*   **在图中，有两个红色**和**黄色**的圆圈，代表两个二维数据点。我们正在尝试使用 LSH找到它们的[余弦相似度。](http://en.wikipedia.org/wiki/Cosine_similarity)
*   灰线是一些均匀随机选取的平面。
*   根据数据点是位于灰线之上还是之下，我们将此关系标记为 0/1。
*   左上角有两排白/黑方块，分别代表两个数据点的签名。每个方块对应一个位 0（白色）或 1（黑色）。
*   因此，一旦您拥有一个平面池，您就可以使用它们相对于平面的位置对数据点进行编码。想象一下，当我们在池中有更多平面时，签名中编码的角度差异更接近实际差异。因为只有位于两点之间的平面才会给两个数据不同的位值。

![在此处输入图像描述](../Images/929dd2380bc46d240a1a7c389e1d405e.png)

*   现在我们看看两个数据点的签名。如示例所示，我们仅使用 6 位（正方形）来表示每个数据。这是我们拥有的原始数据的 LSH 哈希。
*   两个散列值之间的汉明距离为 1，因为它们的签名仅相差 1 位。
*   考虑到签名的长度，我们可以计算它们的角度相似度，如图所示。

我在 python 中有一些使用余弦相似度的示例代码（只有 50 行）。 [https://gist.github.com/94a3d425009be0f94751](https://gist.github.com/94a3d425009be0f94751)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-09-18T21:52:06.267

向量空间中的推文可以是高维数据的一个很好的例子。

查看我的博客文章，将 Locality Sensitive Hashing 应用于推文以查找类似的推文。

[http://micvog.com/2013/09/08/storm-first-story-detection/](http://micvog.com/2013/09/08/storm-first-story-detection/)

因为一张图片是一千个单词，请查看下面的图片：

![在此处输入图像描述](../Images/b02bdea6e20537325934ef77af6c1bb3.png) [http://micvog.files.wordpress.com/2013/08/lsh1.png](http://micvog.files.wordpress.com/2013/08/lsh1.png)

希望能帮助到你。@mvogiatzis

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-03-24T09:14:59.970

这是斯坦福大学的一个演示文稿，对此进行了解释。这对我来说有很大的不同。第二部分更多关于 LSH，但第一部分也涵盖了它。

概述图片（幻灯片中有更多内容）：

![在此处输入图像描述](../Images/997db0bdf288cf534de5f2eb4087d64a.png)

高维数据中的近邻搜索 - 第 1 部分：http: [//www.stanford.edu/class/cs345a/slides/04-highdim.pdf](http://www.stanford.edu/class/cs345a/slides/04-highdim.pdf)

高维数据中的近邻搜索 - 第 2 部分：http: [//www.stanford.edu/class/cs345a/slides/05-LSH.pdf](http://www.stanford.edu/class/cs345a/slides/05-LSH.pdf)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-01-27T19:18:25.150

*   LSH 是将一组文档/图像/对象作为输入并输出一种哈希表的过程。
*   该表的索引包含文档，使得相同索引上的文档被认为是**相似**的，而不同索引上的文档是“**不同**的”。
*   其中**相似**性取决于度量系统以及阈值相似性**s**，其作用类似于 LSH 的全局参数。
*   您可以为您的问题定义适当的阈值**s 。**

[![在此处输入图像描述](../Images/8d4edaebff0b30d991b078186801b35d.png)](https://i.stack.imgur.com/GOBbB.png)

重要的是要强调不同的相似性度量有不同的 LSH 实现。

在我的博客中，我尝试对 minHashing（jaccard 相似性度量）和 simHashing（余弦距离度量）的情况进行彻底的 LSH 解释。我希望你觉得它有用： [https ://aerodatablog.wordpress.com/2017/11/29/locality-sensitive-hashing-lsh/](https://aerodatablog.wordpress.com/2017/11/29/locality-sensitive-hashing-lsh/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-18T17:42:21.083

我是一个视觉的人。这对我来说是一种直觉。

假设您要搜索的每个事物大致都是物理对象，例如苹果、立方体、椅子。

我对 LSH 的直觉是拍摄这些物体的阴影是相似的。就像如果你拍摄 3D 立方体的阴影，你会在一张纸上得到一个 2D 正方形，或者一个 3D 球体会给你一张纸上的圆形阴影。

最终，搜索问题中的维度不止三个（文本中的每个单词都可能是一个维度），但[阴影](https://www.youtube.com/watch?v=N0WjV6MmCyM)类比对我来说仍然非常有用。

现在我们可以有效地比较软件中的位串。固定长度的位串或多或少有点像单一维度中的一条线。

因此，使用 LSH，我最终将对象的阴影投影为单个固定长度的线/位字符串上的点（0 或 1）。

整个技巧是使阴影在较低维度上仍然有意义，例如它们以可以识别的足够好的方式与原始对象相似。

透视立方体的 2D 绘图告诉我这是一个立方体。但是我无法在没有透视的情况下轻易地区分 2D 正方形和 3D 立方体阴影：它们在我看来都像正方形。

我如何将我的物体呈现在灯光下将决定我是否得到一个可识别的良好阴影。所以我认为一个“好”的 LSH 可以将我的物体转向灯光前，这样它们的阴影就可以最好地识别为代表我的物体。

回顾一下：我认为用 LSH 索引的东西是像立方体、桌子或椅子这样的物理对象，我将它们的阴影投射到 2D 中，并最终沿着一条线（一条线）投射。一个“好的”LSH“功能”是我如何在灯光前呈现我的对象，以便在 2D 平地和后来的位串中获得大致可区分的形状。

最后，当我想搜索我拥有的对象是否与我索引的某些对象相似时，我使用相同的方式获取这个“查询”对象的阴影，以在灯光前呈现我的对象（最终以字符串也是）。现在，我可以比较该位字符串与我所有其他索引位字符串的相似程度，如果我找到一种好的且可识别的方式将我的对象呈现在我的灯光下，它是搜索我的整个对象的代理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-22T07:29:07.580

作为一个非常简短的**tldr**答案：

局部敏感散列的一个示例可能是首先在您的输入空间中随机设置平面（带有旋转和偏移）以进行散列，然后将您的点放到该空间中的散列中，并且对于每个平面，您测量该点是否为高于或低于它（例如：0 或 1），答案是哈希。因此，如果用之前或之后的余弦距离测量，空间中相似的点将具有相似的哈希值。

您可以使用 scikit-learn 阅读此示例：[https ://github.com/guillaume-chevalier/SGNN-Self-Governing-Neural-Networks-Projection-Layer](https://github.com/guillaume-chevalier/SGNN-Self-Governing-Neural-Networks-Projection-Layer)

# jquery - jQuery、CSS3 或 HTML5 过渡？

> ID：12952731
> 
> 赞同：1
> 
> 时间：2012-10-18T10:37:59.633
> 
> 标签：jquery, html, css

当您单击主菜单链接时，此网站会发生什么样的转换（如果是转换）？

[http://ivalladare7.wix.com/testepi#!home/mainPage](http://ivalladare7.wix.com/testepi#!home/mainPage)

这只是一个测试，但我认为这个想法很清楚。是 HTML5、CSS 还是 jQuery/JavaScript？

我在几个地方看到了它，但我不知道如何实现它，因为我不知道如何找到一个例子。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:42:50.587

这是一个 CSS 过渡（不是一个很好的过渡，因为它只是 webkit）。带有供应商前缀的更好版本是：

```
.menu a {
    color: #999;
            transition: color 0.4s ease; /* vendorless fallback */
         -o-transition: color 0.4s ease; /* opera */
        -ms-transition: color 0.4s ease; /* IE 10 */
       -moz-transition: color 0.4s ease; /* Firefox */
    -webkit-transition: color 0.4s ease; /*safari and chrome */
}

.menu a:hover {
    color: #340065;
} 
```

如果您的意思是滑动内容，那就是Javascript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:48:31.193

HTML 结构乍一看有点令人生畏。我不确定您是指哪个过渡（？），但我认为当我们单击菜单时它是滑动内容。

起初我怀疑它是某种 Javascript（最有可能是 jQuery），因为它在地址栏中的站点 URL 中添加了路径。然后我尝试查看源代码（使用 Chrome 的检查元素），发现`<a>`菜单上没有元素。我只发现了这个：

```
<p skinpart="label" class="wysiwyg_viewer_skins_dropmenubutton_TextOnlyMenuButtonNSkinddm1-label" style="line-height: 25px; width: auto; ">Articles&nbsp;&amp;&nbsp;Videos</p> 
```

然后为了确保这一点，我在浏览器上禁用了 Javascript。滑动内容停止工作。所以，是的，它是Javascript。

**编辑：**

实际上，如果您尝试直接查看源代码 (Ctrl+U)，您会发现一堆 Javascript 行。如果您尝试 Ctrl+F 文本`Home`，您会在 Javascript 行中找到它。所以这确实是一个JS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:41:48.430

这似乎是一个 CSS 过渡。

如果您看到规则：

```
.wysiwyg_viewer_skins_dropmenubutton_TextOnlyMenuButtonNSkinddm1 {
-webkit-transition: color 0.4s ease 0s;
} 
```

但是您可以在以下位置获得更好的东西：[http ://css3generator.com/](http://css3generator.com/)

选择过渡并使用该工具。它将帮助您获得更多跨浏览器的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-27T10:40:42.290

本网站上的简单过渡是使用 css3 过渡完成的。然而，内容转换的滑动是使用 TweenMax (Greensock) 进行的

这是一个轻量级的脚本，可以完美地与 jQuery 或 vanilla js 一起工作，特别是用于补间/动画。

查看他们的演示（使用 Greensock 制作动画）

[https://greensock.com/jump-start-js](https://greensock.com/jump-start-js)

# php - 使用facebook创建注册页面

> ID：12952738
> 
> 赞同：1
> 
> 时间：2012-10-18T10:38:40.030
> 
> 标签：php, javascript, facebook, yii

我想创建一个注册表单，可以选择使用我网页上的表单或使用 facebook 帐户进行注册。我怎样才能做到这一点 ？他们是否有任何教程可用于创建此类注册表单。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:45:47.793

请参考本教程，这是你问的：[http ://www.9lessons.info/2011/01/user-signup-using-facebook-data.html](http://www.9lessons.info/2011/01/user-signup-using-facebook-data.html)

# php - 使用 PHP 或查询选择字符串/mySQL 结果的中间部分

> ID：12952742
> 
> 赞同：0
> 
> 时间：2012-10-18T10:38:50.933
> 
> 标签：php, jquery, mysql, substring

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我从 mySQL 表中选择一列，其值如下：

```
<div class="article news group">
    <p class="news_info">18/10/12</p>
    <h2>Hello world!</h2>
    <p>ertwrt aerteartert</p>
    <p>ertaertert</p>
    <p>waertwertwertwaertweart</p>
</div> 
```

我现在只需要从中获取 3 p 标签 - 所以返回：

```
 <p>ertwrt aerteartert</p>
    <p>ertaertert</p>
    <p>waertwertwertwaertweart</p> 
```

有没有一种简单的方法可以用 php 做到这一点，或者我需要使用 jQuery 来删除不需要的代码。

无论哪种方式，有什么想法我会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:46:14.110

使用 PHP

```
$html = '<div class="article news group">
    <p class="news_info">18/10/12</p>
    <h2>Hello world!</h2>
    <p>ertwrt aerteartert</p>
    <p>ertaertert</p>
    <p>waertwertwertwaertweart</p>
</div>';

preg_match_all('~(<p>.+?</p>)~', $html, $match);

echo implode("\n", $match[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:34:15.483

如果您正在处理的 html 比您可能要考虑的示例更复杂 QueryPath (http://querypath.org/)

对于您的示例来说，这将是矫枉过正，但对于这种类型的操作可能非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:42:11.740

这可能对您的需求有所帮助：http: [//api.jquery.com/siblings/](http://api.jquery.com/siblings/)

# php - 解析 JSON 文档时出错

> ID：12952743
> 
> 赞同：0
> 
> 时间：2012-10-18T10:38:54.013
> 
> 标签：php, android, json, yii

目前，我正在从 Android 应用程序中调用 JSON 提要（来自 URL）。调用这个 URL 没有问题，但是我的 JSON 输出有一个非常烦人的问题。昨天我的 JSON 工作正常，但是当我今天调用它时，我收到一个错误，我的字符串无法转换为 JSON 对象。

我将结果打印到控制台，JSON 字符串看起来很好。

```
{"message":{"success":false,"error":22}} 
```

但是，使用 substring() 方法仅获取字符串的第一个字符，输出为：

```
· 
```

我假设这是一个编码问题，但我将以下标头提供给我的 JSON 提要：

```
content-type: application/json; charset=utf-8 
```

我正在使用 Yii 框架方法 CJSON::encode() 将数据编码为 JSON。它一直对我有用，直到今天早上。我将所有编码设置为 utf-8，但无济于事。

我还从我的浏览器调用了 JSON 提要，复制了 JSON 并使用了在线 JSON 验证器，它在第一行给出了“无效 JSON”结果，即“{”括号。我删除了括号并手动添加了它，再次验证了 JSON，验证器给出了“有效的 JSON”结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:27:11.320

`?>`您是否在所有自定义 PHP 文件上使用 PHP 结束标记？

如果是这样，请删除结束标记。它在 PHP 中是可选的。并确保 PHP 打开标记`<?php`始终从文件顶部开始，在您的类/模型/控制器中没有任何空格。

他们创建了这种特殊字符，因为在结束标记之后，您放置的任何内容都会输出到客户端。并非所有 PHP 编辑器都显示特殊字符，它们可能只显示一些空格。

```
<?php
    echo "Hello, World,";

?>
__//Here is a special character, but editor unable to display it. 
```

一种调试方法是......使用`ob_start() ob_end_clean()`

*   只需`ob_start()` 在前面的脚本上添加...即添加到 index.php

*   并在`CJSON::encode()` 使用清洁缓冲区之前`ob_end_clean()`

# c++ - C++ 中的 Gtk::TreeModelColumn / GType (gtkmm3)

> ID：12952744
> 
> 赞同：0
> 
> 时间：2012-10-18T10:38:57.147
> 
> 标签：c++, gtkmm, gtk3

（所有这些都是从实现自己的 TreeModel 的角度来看，而不是使用现有的）

我如何在自己的 TreeModel 的 C++ 实现中使用 Gtk::TreeModelColumn？

据我了解，它的目的是唯一标识列的类型，但是我如何在 C++ 域中以这种方式使用它？

有没有办法以某种方式将任意 GType（TreeModelColumn 内部的底层 gtk 对象）转换为 C++ 类型，所以我可以转换为它？

如果不是 - 为什么它存在于 gtkmm 中？那里的真正目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:27:11.733

> 我如何在自己的 TreeModel 的 C++ 实现中使用 Gtk::TreeModelColumn？

我认为您不需要这样做，而且我认为这样做没有意义。

Gtk::TreeModel::Column 供应用程序使用，当使用任何 Gtk::TreeModel 时：http: [//developer.gnome.org/gtkmm-tutorial/unstable/sec-treeview-model.html.en#treeview-model -列](http://developer.gnome.org/gtkmm-tutorial/unstable/sec-treeview-model.html.en#treeview-model-columns)

它在 API 中的目的是避免您（作为应用程序开发人员）必须记住列索引和列类型，并让您使用它的特定类型来调用重载方法，通常不用担心它是如何工作的。

但是，如果您尝试创建具有像 ListStore 和 TreeStore 这样的 create(TreeModelColumnRecord) 的通用数据模型，则会为您提供那些 TreeModelColumn<>s。在这种情况下，您可以通过调用 types() 来获得像 gtkmm 一样的 GType： [http ://git.gnome.org/browse/gtkmm/tree/gtk/src/liststore.ccg#n26](http://git.gnome.org/browse/gtkmm/tree/gtk/src/liststore.ccg#n26)

TreeModelColumn::ElementType 可以告诉你 C++ 类型： [http](http://git.gnome.org/browse/gtkmm/tree/gtk/gtkmm/treemodelcolumn.h#n131) ://git.gnome.org/browse/gtkmm/tree/gtk/gtkmm/treemodelcolumn.h#n131 但是你真的需要一些 dynamic_cast<>ing打开 C++ 类型。关于如何存储东西的决定完全取决于您。但如果我是你，我会尽可能使用 ListStore 或 TreeStore。

# python - python scrapy中管道文件中的多个process_item方法

> ID：12952746
> 
> 赞同：0
> 
> 时间：2012-10-18T10:39:04.997
> 
> 标签：python, scrapy, pipeline

我正在研究scrapy，我在一个scrapy项目中创建了两个具有两个不同url的蜘蛛文件。

当单独运行时，两只蜘蛛完美地刮擦。实际上问题是每个 url 都有不同的项目要获取，因此在`items.py`文件中声明了所有项目。在抓取之后，我将数据存储到使用蜘蛛名称动态创建的 csv 文件中。

因此，例如，当我需要运行时`spider1`，我需要声明单独`process_item`的方法，因为两个蜘蛛的项目不同，当我需要运行第二个蜘蛛时，我需要`process_item`通过注释其他方法来编写另一个。在scrapy中是否有任何方法可以使用两个process_item方法？下面是我的`pipeline.py`代码

**管道.py**

```
from w3c_browser.items import WCBrowserItem
import csv
from csv import DictWriter
from cStringIO import StringIO
from datetime import datetime
class W3CBrowserPipeline(object):
    def __init__(self):
        dispatcher.connect(self.spider_opened, signal=signals.spider_opened)
        dispatcher.connect(self.spider_closed, signal=signals.spider_closed)
        self.brandCategoryCsv = csv.writer(open('wcbbrowser.csv', 'wb'))

    def spider_opened(self, spider):
        spider.started_on = datetime.now()
        if spider.name == 'browser_statistics':
            log.msg("opened spider  %s at time %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
            self.brandCategoryCsv = csv.writer(open("csv/%s-%s.csv"% (spider.name,datetime.now().strftime('%d%m%y')), "wb"),
                       delimiter=',', quoting=csv.QUOTE_MINIMAL)
        elif spider.name == 'browser_os':
            log.msg("opened spider  %s at time %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
            self.brandCategoryCsv = csv.writer(open("csv/%s-%s.csv"% (spider.name,datetime.now().strftime('%d%m%y')), "wb"),
                       delimiter=',', quoting=csv.QUOTE_MINIMAL)

    def process_item(self, item, spider):
        self.brandCategoryCsv.writerow([item['year'],
                                        item['internet_explorer'],
                                        item['firefox'],
                                        item['chrome'],
                                        item['safari'],
                                        item['opera'],

        ])
        return item
# For Browser Os
#    def process_item(self, item, spider):
#        self.brandCategoryCsv.writerow([item['year'],
#                                        item['vista'],
#                                        item['nt'],
#                                        item['winxp'],
#                                        item['linux'],
#                                        item['mac'],
#                                        item['mobile'],
#                                        
#
#        ])
#        return item

    def spider_closed(self, spider):
        log.msg("closed spider %s at %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))
        work_time = datetime.now() - spider.started_on
        print str(work_time),"Total Time taken by the spider to run>>>>>>>>>>>" 
```

如您所见，在上面的代码中，当我使用名称运行蜘蛛时，`browser_statistics`它将创建一个具有`browser_statistics-date`格式的 csv 文件并将数据从项目写入 csv 文件

但是当我想用 name 运行第二个蜘蛛时`browser_os`， process_item 方法不起作用，因为两个蜘蛛都有不同的项目要获取

谁能告诉我

无论如何，是否可以运行多个具有相同 process_item 和不同项目的蜘蛛？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:35:40.613

最好的选择是您可以在 process_item 中使用基于蜘蛛名称的**IF ELSE**

喜欢

```
def process_item(self, item, spider):
    if 'spider1' in spider.name:
        #TODO write CSV for spider1
    else:
        #Should be a spider2
        #TODO write CSV for spider2
    return item 
```

# javascript - 可绘制圆圈之间的javascript碰撞检测

> ID：12952752
> 
> 赞同：8
> 
> 时间：2012-10-18T10:39:16.690
> 
> 标签：javascript, html, canvas, drag-and-drop, collision

* * *

首先请不要对我的英语太挑剔。我不是母语人士。我希望我能永远解释自己！此外，我读到我应该展示我自己为解决给定问题所做的一些努力。为了证明这一点，我的帖子变得相对较长。

## 我想做的事：

我是 javascript 新手（三周），我尝试通过 html5 画布和 javascript 构建一个台球桌。最后，用户应该能够通过拖动十六个球在虚拟台球表上呈现特定的游戏情况。我在 stackoverflow 上发现了很多关于路径和拖放的提示。

## 什么已经有效：

到那时，圆圈几乎看起来像台球，我可以用鼠标移动它们。到目前为止，一切都很好。

## 问题是什么：

当然，台球在现实中会发生碰撞并且不会重叠。关于碰撞检测，我发现了一篇有用的帖子，它告诉我使用毕达哥拉斯热 a*a + b*b = c*c 来做到这一点。我理解这个概念。我绝对不明白的是我必须在我的代码中实现检测的地方。在我的脚本中有一个函数 (moveBall00(e))，如果球被拖动 (dragok = true)，它会计算新的 x 和 y 坐标。但是如何在计算被拖动球的新坐标的同时计算球之间的距离呢？这很容易成为新手问题！

我试过这个：

1.  新变量“x”</p>

    变量 x = 真；

2.  检测球之间距离的新功能

    函数碰撞（） { if((Math.pow(bp[1][0] - bp[1][1], 2)) + (Math.pow(bp[2][0] - bp[2][ 1], 2)) <= 576) { x = false; } }

3.  每 10 毫秒调用一次“collision()”

    (function isIntersecting() { return setInterval(collision, 10); })();

4.  只有在“x=true”时才拖动球</p>

    函数 moveBall00(e) { if (dragok && x) { bp[1][0] = e.pageX - canvas.offsetLeft; bp[2][0] = e.pageY - canvas.offsetTop; } }

结果是圆圈（球）重叠直到它们停止。它们重叠得越多，我拖球的速度就越快。这似乎是一个先后后继的问题？！

对于经验丰富的开发人员来说，步行穿过公园是最确定的，但对我来说不是。

我是一个坚持不懈的人，会学习用 javascript 做这些事情，但目前我不知道如何解决上述问题。

我将不胜感激任何帮助，并将在此处发布未来的结果！

## 这是我到目前为止所做的：

（为简化起见，只有白球是可绘制的。）

```
<!doctype html>

<html>

    <head>
    <meta charset="UTF-8" />
            <title>Collision detection</title>
    </head>

    <body>

            <canvas id="pooltable" width="1200" height="660">This text is displayed if your browser does not support HTML5 Canvas</canvas>

        <script>

            var canvas;
            var ctx;
            var width = 1200;
            var height = 660;
            var dragok = false;

            var bp = new Array();
                // color of balls "ballColor"
                bp[0] = new Array("rgba(255,255,255,1)","rgba(231,214,8,1)");
                // x-position of balls "xBallPosition"
                bp[1] = new Array(20,50);
                // y-position of balls "yBallPosition"
                bp[2] = new Array(50,50);
                // color of stripes "stripe"
                bp[3] = new Array("rgba(255,255,255,0)","rgba(231,214,8,1)");
                // color of stripe strokes "stripeStroke"
                bp[4] = new Array("rgba(255,255,255,0)","rgba(231,214,8,1)");
                // ball numbers "ballNumber"
                bp[5] = new Array(" ","1");
                // position of ball numbers "positionBallNumber"
                bp[6] = new Array();

            function init() {
                canvas = document.getElementById("pooltable");
                ctx = canvas.getContext("2d");
                return setInterval(draw, 1);
            }

            function clear() {
                ctx.clearRect(0, 0, width, height);
            }

            function rect(x,y,w,h) {
                ctx.beginPath();
                ctx.rect(x,y,w,h);
                ctx.closePath();
                ctx.fill();
            }

            function ball(ballColor, xBallPosition, yBallPosition, ballRadius, angle, stripe, stripeStroke, circleRadius, ballNumber, positionBallNumber) {

                ctx.fillStyle = ballColor;
                ctx.shadowBlur = 5;
                ctx.shadowColor = "rgba(0,0,0,1)";
                ctx.beginPath();
                ctx.arc(xBallPosition, yBallPosition, ballRadius, angle, Math.PI * 2, true);
                ctx.closePath();
                ctx.fill();

                ctx.fillStyle = stripe;
                ctx.strokeStyle = stripeStroke;
                ctx.shadowColor = "rgba(0,0,0,0)";
                ctx.beginPath();
                ctx.moveTo(xBallPosition - 7, yBallPosition - 8);
                ctx.bezierCurveTo(xBallPosition - 8, yBallPosition - 13, xBallPosition + 8, yBallPosition - 13, xBallPosition + 7, yBallPosition - 8);
                ctx.lineTo(xBallPosition + 7, yBallPosition + 8);
                ctx.bezierCurveTo(xBallPosition + 8, yBallPosition + 13, xBallPosition - 8, yBallPosition + 13, xBallPosition - 7, yBallPosition + 8);
                ctx.closePath();
                ctx.stroke();
                ctx.fill();

                ctx.fillStyle =  "rgba(255,255,255,1)";
                ctx.shadowColor = "rgba(0,0,0,0)";
                ctx.beginPath();
                ctx.arc(xBallPosition, yBallPosition, circleRadius, angle, Math.PI * 2, true);
                ctx.closePath();
                ctx.fill();

                ctx.fillStyle = "rgba(0,0,0,1)";
                ctx.font = "normal normal lighter 7px Helvetica";
                ctx.textBaseline = "middle";
                ctx.fillText(ballNumber, xBallPosition - positionBallNumber, yBallPosition + 1);

                var gradient = ctx.createRadialGradient(xBallPosition, yBallPosition, 1, xBallPosition + 3, yBallPosition + 3, 12);
                gradient.addColorStop(0, "rgba(255,255,255,0.6)");
                gradient.addColorStop(1, "rgba(0,0,0,0.2)");
                ctx.fillStyle = gradient;
                ctx.strokeStyle = "rgba(0,0,0,0.4)";
                ctx.shadowColor = "rgba(0,0,0,0)";
                ctx.beginPath();
                ctx.arc(xBallPosition, yBallPosition, ballRadius, angle, Math.PI * 2, true);
                ctx.closePath();
                ctx.stroke();
                ctx.fill();

            }

            function draw() {

                clear();

                table = new rect(0,0,width,height);

                ball00 = new ball(bp[0][0], bp[1][0], bp[2][0], 12, 0, bp[3][0], bp[4][0], 6, bp[5][0], 0);
                ball01 = new ball(bp[0][1], bp[1][1], bp[2][1], 12, 0, bp[3][0], bp[4][1], 6, bp[5][1], 2);

            }

            function myDown(e) {
                if (e.pageX < bp[1][0] + 6 + canvas.offsetLeft && e.pageX > bp[1][0] - 6 + canvas.offsetLeft && e.pageY < bp[2][0] + 6 + canvas.offsetTop && e.pageY > bp[2][0] - 6 + canvas.offsetTop) {
                    bp[1][0] = e.pageX - canvas.offsetLeft;
                    bp[2][0] = e.pageY - canvas.offsetTop;
                    dragok = true;
                    canvas.onmousemove = moveBall00;
                }
                else {
                    dragok = false;
                }
            }

            function myUp() {
                dragok = false;
                canvas.onmousemove = null;
            }

            function moveBall00(e) {
                if (dragok) {
                    bp[1][0] = e.pageX - canvas.offsetLeft;
                    bp[2][0] = e.pageY - canvas.offsetTop;
                }
            }

            init();

            canvas.onmousedown = myDown;
            canvas.onmouseup = myUp;

        </script>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:01:00.083

您面临的问题与底层渲染技术完全无关。这只是一道数学题。

你基本上想要为你的情况做的是计算你拖动的球和桌子上任何球之间的距离。如果距离太短，就会发生碰撞。

对于两个对象，这很简单，您需要三个值：球的 x 和 y 坐标及其半径。

```
var ball = {
    x: 100,
    y: 100
    r: 10
}; 
```

要计算距离，请执行以下操作：

```
var squareX = Math.pow(Math.abs(ballA.x - ballB.x), 2);
var squareY = Math.pow(Math.abs(ballA.y - ballB.y), 2);
var hypothenuse = Math.sqrt(squareX + squareY);
var distance = hypothenuse - ballA.r - ballB.r;

if (distance >= 0) {
    // new position is valid
} 
```

由于您在台球桌上有许多球，您需要为桌子上每个未移动的球调用一次此代码以比较所有球。

```
function canMove(ballA, ballB) {
    var squareX = Math.pow(Math.abs(ballA.x - ballB.x), 2);
    var squareY = Math.pow(Math.abs(ballA.y - ballB.y), 2);
    var hypothenuse = Math.sqrt(squareX + squareY);
    var distance = hypothenuse - ballA.r - ballB.r;

    if (distance >= 0) {
        return true;
    }
    return false;
}

function canDrag(ball, balls) {
    var isMovable = true;
    for (var i = balls.length-1; i >= 0; i--) {
        isMovable = canMove(ball, balls[i]);
        if (!isMovable) {
            return false;
        }
    }
    return true;
} 
```

在最后一个片段中，我假设您的球对象存储在球数组中。我希望这有帮助。

# java - 将字符串 2012 年 10 月 18 日格式转换为 java utill 日期的 java 代码

> ID：12952761
> 
> 赞同：-3
> 
> 时间：2012-10-18T10:39:38.833
> 
> 标签：java, string

> **可能重复：**
> [如何在 Java 中将日期字符串转换为正确的格式？](https://stackoverflow.com/questions/1748883/how-to-convert-a-date-string-into-the-right-format-in-java)

请告诉我将字符串`18 oct, 2012`格式转换为 java utill 日期的 java 代码，我想再次检查 mysql 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:54:27.667

使用 SimpleDateFormat

```
String txtdate = "18 oct,2012";
SimpleDateFormat sdf = new SimpleDateFormat("dd MMM,yyyy");
Date date = sdf.parse(txtdate);
System.out.println(date); 
```

为我打印

```
Thu Oct 18 00:00:00 BST 2012 
```

正如预期的那样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T10:47:33.513

```
import java.util.Date;
import java.text.SimpleDateFormat;

// To convert a String Date into any form you want...

String txtdate ="18 oct,2012"
SimpleDateFormat dt = new SimpleDateFormat("dd MMM, yyyy");

Date date = dt.parse(txtdate);

SimpleDateFormat dt1 = new SimpleDateFormat("dd-MMM-yyyy");
dt1.format(date) 
```

希望这将帮助您解决您的问题..根据您的问题，第三行代码会有所帮助，我想如果我的问题正确...！

# magento - 如何在 magento 自定义模块中创建多个选项卡？

> ID：12952766
> 
> 赞同：-1
> 
> 时间：2012-10-18T10:40:00.193
> 
> 标签：magento, tabs

如何在管理端创建多个水平和垂直选项卡，如类别页面并将数据保存在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:47:13.803

我有关于在表单中添加垂直选项卡的想法，只需将以下代码放在模块的 tabs.php 文件中的 _beforeToHtml() 函数中

```
 $this->addTab('tabid', array(
            'label'     => Mage::helper('modulename')->__('Name of tab'),
            'class'     => 'ajax',
            'url'       => $this->getUrl('*/*/action controller name', array('_current' => true)),
        )); 
```

只需给 tabid 任何你想要的，并在 url 中给出动作名称，在你的 tabs.php 文件中添加这个函数来处理标签更新并调用 $this->_updateActiveTab(); 在 _beforeToHtml() 函数中

```
protected function _updateActiveTab()
{
    $tabId = $this->getRequest()->getParam('tab');
    if ($tabId) {
        $tabId = preg_replace("#{$this->getId()}_#", '', $tabId);
        if ($tabId) {
            $this->setActiveTab($tabId);
        }
    }
    else {
       $this->setActiveTab('form_section'); 
    }
} 
```

在控制器中添加类似这样的操作

```
public function yourAction() 
{
    $id = (int) $this->getRequest()->getParam('id');
    $model = Mage::getModel('modulename/modulename');

    if ($id) {
        $model->load($id);
    }

    Mage::register('modulename_data', $model);

    $this->getResponse()->setBody($this->getLayout()
      ->createBlock('modulename/adminhtml_modulename_edit_tab_tabid')->toHtml());
} 
```

# facebook - facebook oauth 对话框无法启动

> ID：12952769
> 
> 赞同：0
> 
> 时间：2012-10-18T10:40:10.593
> 
> 标签：facebook, oauth

您好我遇到了以下问题：我希望用户验证我的应用程序，所以我想显示授权对话框。为此，我尝试了 api 功能

```
FB.api("/dialog/oauth", "get", {client_id: APP_ID, redirect_uri: URI}, function(response){
    console.log(response);
}); 
```

但我得到这个错误：

```
code: 2500
message: "Unknown path components: /oauth"
type: "OAuthException" 
```

但为什么？FB.api 调用应该是一样的

```
http://www.facebook.com/dialog/oauth?client_id=<app-id>&redirect_uri=<uri> 
```

If i put this url in the browser directly, the dialog is shown. ('window.location' also doesn´t work because of x-frame-options)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:58:33.473

使用 JavaScript SDK 的**FB.login**方法[http://developers.facebook.com/docs/reference/javascript/FB.login/](http://developers.facebook.com/docs/reference/javascript/FB.login/)

# algorithm - 圆角多边形

> ID：12952771
> 
> 赞同：0
> 
> 时间：2012-10-18T10:40:16.383
> 
> 标签：algorithm, box2d, physics, polygons

早些时候我问了一个问题，但我认为我做错了......
无论如何。这是我的问题。我有这个从图像创建多边形的功能，但它是完美的像素，它为单个多边形创建了太多的点。所以我的问题是，我该如何舍入？使多边形变小一点，使边缘不那么锋利并同时去除一些边缘？我找不到任何算法，所以也许我只是搜索失败..

谢谢，
阿斯特阿尔夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:44:54.343

[Douglas-Peucker](http://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm)算法旨在简化折线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:28:21.497

考虑在生成多边形之前降低图像中的细节——生成多边形的处理会更少，而且它们本身也会更简单。实际上，您是在生成多边形之前而不是之后过滤信息。

在不了解多边形生成算法的情况下，我不能确切地说你应该如何降低细节，但考虑模糊和/或缩放图像 - 你提到每个像素得到一个多边形，所以缩放至少会减少像素数。模糊应该可以降低噪声水平，并且还可以消除原始图像中的任何锯齿。

我怀疑这会解决整个问题，因为几乎直线不会变得完全笔直，但它应该是一种性能改进，让你更接近你的结果。

# c# - Display an object for a few milliseconds in Unity3D

> ID：12952773
> 
> 赞同：3
> 
> 时间：2012-10-18T10:40:19.350
> 
> 标签：c#, unity3d

I'm using Unity3D to setup an "experiment" (university related) where I designed a maze and users receive subliminal cues (visual arrows displayed on the screen) that should appear just for 14 milliseconds and then disappear.

我已经设计了 3D 迷宫并且它真的很小（我不需要任何花哨的实验），因此当我使用第一人称控制器导航时我可以达到 1000fps（帧率不会成为问题）。我打算在 C# 中编写一个脚本，以在触发某些对象时显示这些箭头。

我想知道在 Unity 中是否可以仅以可接受的精度显示对象几毫秒（在我的情况下为 14 毫秒）......如果是这样，我应该使用哪种方法？有类似问题的任何想法或以前的经验吗？

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:46:06.947

使用协程只显示对象一段时间：

```
void *AnyTrigger*() // eg. replace with OnTriggerEnter if using triggers
{
    StartCoroutine(ShowObject(14f / 1000f));
}

IEnumerator ShowObject(float timeInSeconds)
{
    // Show object here
    yield return new WaitForSeconds(timeInSeconds);
    // Hide object
} 
```

## 准确性

显示对象时间的准确性在很大程度上取决于您使用的系统。如果您在快速系统上运行 Unity3D，它可能非常准确。如果系统很慢，时间很可能超过 14 毫秒。

**例子（不准确）：**

*   快速系统，每秒 950-1000 帧：可能在 0 毫秒到 1 毫秒之间
*   中等系统，每秒 300-600 帧：可能在 0.8 毫秒和 3.6 毫秒之间
*   慢速系统，每秒 50-100 帧：可能在 5ms 和 20ms 之间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:55:06.480

你也可以使用`System.Diagnostics.Stopwatch`你的时间。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

它*可能*更准确，因为它是按操作系统时间而不是 Unity 的内部时间保持的。

```
IEnumerator ShowObject(float timeInSeconds) {
    var stopwatch = new System.Diagnostics.Stopwatch();
    // Show object here
    stopwatch.Start();
    while (stopwatch.ElapsedMilliseconds < 14) {
        yield return null;
    }
    // Hide object
    stopwatch.Stop();
} 
```

# language-agnostic - 完成二叉搜索树插入

> ID：12952781
> 
> 赞同：2
> 
> 时间：2012-10-18T10:40:50.627
> 
> 标签：language-agnostic, binary-tree

我有一个应用程序需要具有以下特征的数据结构：

*   O(n) 中的中序遍历
*   在 O(log n) 中查找
*   在 O(log n) 中插入空间 O(log n) 或更小
*   高效的就地存储（= 树可以在没有孔的连续数组中就地修改）
*   迭代，如果可能的话
*   不需要删除

我发现**完整**的二叉搜索树对于这些操作来说是一个很好的结构。我已经很容易地实现了遍历和查找（它们非常通用），但是插入非常困难。我似乎无法插入任意元素并重新平衡树而不会丢失形状属性（完整树）或分区属性（节点左侧的所有元素都严格小于节点）。

我在网上也找不到其他任何东西，我找到的唯一参考资料是关于一般二叉树（没有形状属性）的，不适用于我的情况。出于某种原因，完整的树不受欢迎。

有没有人为完整的二叉树实现了插入，并且可以给我一些关于如何稳健有效地实现它的指示？这不是家庭作业，我需要它来完成一个真正的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:43:47.433

由于您希望在 O(log n) 中查找并在 O(log n) 中的任意位置插入，因此您需要一个自平衡搜索树。完整的二叉树不能有效地更新——它们被认为是为只读场景制作的静态数据结构。

# html - 带重音的 E 无法正确显示

> ID：12952784
> 
> 赞同：18
> 
> 时间：2012-10-18T10:40:54.907
> 
> 标签：html, character-encoding

在我的页面上，顶部中间的文本（« Ce site Internet. »）包含带有重音符号的 E，在我的计算机上显示为问号。

尽管我的 head 标记中有 meta charset="UTF-8" 并且包含文本的 PHP 文件在使用 Notepad++ 打开时显示为 UTF-8，但这是事实。

那是怎么回事？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T11:23:38.503

当浏览器无法理解它正在读取的数字时，它会显示这些。UTF-8 是自同步的。与其他多字节字符编码不同，您始终知道使用 UTF-8 的位置。如果您看到数字 192-247，您就知道您处于多字节序列的开头。如果你看到 128-191，你就知道你在其中之一。没有遗漏第一个数字和混淆文本其余部分的危险。这意味着在 UTF-8 中，191 后跟 224 的序列永远不会自然出现，因此浏览器不知道如何处理它，而是显示 ��。

在您的 head 标签中使用以下内容：

```
<meta charset="UTF-8">
<meta http-equiv="Content-type" content="text/html; charset=UTF-8"> 
```

见：[http ://coding.smashingmagazine.com/2012/06/06/all-about-unicode-utf8-character-sets/](http://coding.smashingmagazine.com/2012/06/06/all-about-unicode-utf8-character-sets/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T11:33:21.530

该页面实际上并未以 UTF-8 编码，而是以 Latin1 编码。您需要将源代码文件*实际*保存为 UTF-8 或以其他方式确保它们以 UTF-8 编码输出。目前，您在网站声称编码的内容与实际编码的内容之间存在分歧。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T11:55:45.477

尽管您在元数据和 HTTP 标头中宣布内容为 UTF-8，但发送的不是 UTF-8。您可能需要检查您的 PHP 设置，以确保它实际上以正确的编码输出内容。[http://php.net/manual/en/mbstring.configuration.php](http://php.net/manual/en/mbstring.configuration.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T11:22:50.247

您是否对重音字符使用了 ASCII/HTML 代码？如果没有，[这里是它们的列表](http://www.yellowpipe.com/yis/tools/ASCII-HTML-Characters/index.php)。搜索“E 急性”，你应该对那个字符的代码进行优化（`&Eacute;`我认为是这样）。起初我认为这是您使用的字体系列，但我不认为这是因为我在浏览器中禁用了所有样式，它们仍然显示为问号。

更多 HTML 字符实体可以在 [https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references找到](https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)

# javascript - 克隆表行中的问题

> ID：12952785
> 
> 赞同：-1
> 
> 时间：2012-10-18T10:40:56.947
> 
> 标签：javascript, jquery, clone

我的[表行克隆](http://jsfiddle.net/Manna/cpRa2/3/)有问题。例如，一旦我编辑了克隆行的两个列，然后单击添加按钮，我得到克隆的行已经像以前一样编辑，而不是像其他[示例中那样使用](http://jsfiddle.net/ambiguous/LAECx/)*占位符“单击以编辑”*

我的表中缺少什么函数来使行与我的占位符一起克隆而不被编辑？

 `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:48:31.707

如果您想克隆在文本框中输入的值相同的行，只需在单击事件中注释此行

```
 //$clone.find(':text').val(''); 
```

因为它清除了所有文本框

[jsfiddle](http://jsfiddle.net/LAECx/226/)`

# c++ - 将 UNC 路径转换为网络系统的本地路径

> ID：12952786
> 
> 赞同：0
> 
> 时间：2012-10-18T10:40:58.233
> 
> 标签：c++, mfc

在我的应用程序中，我正在访问网络系统上的图像。我想知道相对于该网络系统的本地路径。

例如图像位于`\\192.203.65.34\Images\Image1.jpg`然后我想在该系统上获取该图像的本地地址。这应该让我说`D:\Images\Image1.jpg`

我如何在 C++/MFC 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:03:10.390

你不能。甚至不确定是否*存在*本地路径。

# mysql - 具有多个表的 Sphinxsearch sql_query

> ID：12952796
> 
> 赞同：1
> 
> 时间：2012-10-18T10:41:24.793
> 
> 标签：mysql, sql, sphinx

我正在尝试以一种可以完全索引我的 MySQL 表的方式设置 Sphinxsearch。如果我是对的，所有被索引的东西都必须被`sql_query`. 每个查询都可以使用，但我对如何将其应用于下表感到困惑。

```
CREATE TABLE books (
    book_id INT(10) PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(200),
    abstract TEXT
); 

CREATE TABLE authors (
    author_id INT(10) PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(200)
);

CREATE TABLE book_author (
    book_author_id INT(10) PRIMARY KEY AUTO_INCREMENT,
    book_id INT(10),
    author_id INT(10)
); 
```

现在我希望能够搜索类似的内容：`Sphinx searching A. Aksyonoff`并在作者和书籍表中进行搜索。但是我应该如何组合这些结果，并获得匹配的作者列表和匹配查询的书籍列表。还是有更好的方法？所以基本上，我必须填写`sql_query`什么以及我应该将什么作为属性。

我尝试使用 JOIN，但是当有多个作者时，我会迷失方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:46:27.417

单程

```
sql_query = SELECT book_id, title, abstract, \
              GROUP_CONCAT(author_id) AS author_ids, \
              GROUP_CONCAT(name SEPERATOR '. ') AS authors \
            FROM books \
              LEFT JOIN book_author USING (book_id) \
              LEFT JOIN authors USING (author_id) \
            GROUP BY book_id \
            ORDER BY NULL
sql_attr_multi = uint author_ids from query; 
```

这会给你一个索引：

1.  每本书一个文档 - 标题和摘要完全可搜索。

2.  字段中的作者列表`authors`- 以便文本查询匹配。

3.  您还有一个 MVA 属性`author_ids`，它将在结果中为您提供作者的 ID。

    要再次获取名称以用于显示目的，可以将这些 id 用于数据库表（或者如果索引的大小允许使用字符串属性）。

    MVA 还可用于在 sphinx 中进行分组 - 为您提供与特定文本查询匹配的作者的细分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:05:17.383

希望对你有帮助

选择标题，姓名

来自书籍 b

在 g.book_id=b.book_id 上内部加入 book_author g

内部连接作者 a 在 a.author_id=g.author_id

# google-app-engine - 如何设置开发/生产

> ID：12952800
> 
> 赞同：-1
> 
> 时间：2012-10-18T10:41:47.177
> 
> 标签：google-app-engine, gwt, google-eclipse-plugin

我正在寻找将我的应用部署到 Google App Engine。

我在本地使用 GWT+Eclipse+GWT Eclipse Plugin+ Hibernate+Mysql 进行开发。一切皆好。我在开发模式下运行，我看到任何东西；所以我已经注册了 Google SQL Cloud 并激活了计费。

但是我无法找出如何在 Prod 的 Dev e SQL Cloud 中的 Mysql 之间切换。

当我在本地运行时，我获得了

```
 SEVERE: javax.servlet.ServletContext log: Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.util.Vector net.adeptus.client.util.UtilService.getCodex()' threw an unexpected exception: java.lang.NoClassDefFoundError: Could not initialize class com.mysql.jdbc.Driver
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class com.mysql.jdbc.Driver
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.hibernate.connection.DriverManagerConnectionProvider.configure(DriverManagerConnectionProvider.java:80)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:143)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:84)
    at org.hibernate.cfg.SettingsFactory.createConnectionProvider(SettingsFactory.java:438)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:91)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2159)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1383)
    at net.adeptus.server.HibernateUtil.initSessionFactory(HibernateUtil.java:21)
    at net.adeptus.server.HibernateUtil.getSessionFactory(HibernateUtil.java:15)
    at net.adeptus.server.HibernateUtil.getSession(HibernateUtil.java:29)
    at net.adeptus.server.util.UtilServiceImpl.getCodex(UtilServiceImpl.java:65)
    at net.adeptus.server.util.UtilServiceImpl.getCodex(UtilServiceImpl.java:130)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 34 more 
```

当我第一次使用 RPC 时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:19:09.453

您应该阅读入门指南。

[https://developers.google.com/appengine/docs/java/gettingstarted/uploading](https://developers.google.com/appengine/docs/java/gettingstarted/uploading)

# java - 如何使用 fromJson 方法解析 json

> ID：12952802
> 
> 赞同：0
> 
> 时间：2012-10-18T10:41:47.787
> 
> 标签：java, android, json

我想通过 fromJson 类解析我的 json，但是如果我的 json 如下所示，我无法理解我的类的结构应该是什么：

```
String json = "{"Result":{"Status":"SUCCESS","Message":""},"Response":{"Token":"ca0d7507-3907-4eed-af19-ad256bc71088","ZoneUrl":"https:\/\/qa.tritononline.com\/","CustomerID":1,"UserID":29,"DefaultLanguageID":1,"ZoneID":1,"IsTritonIntegrated":false,"Language":[{"LanguageId":1,"Language":"English","IsSelected":false}]}}" 
```

这就是我想做的

```
Response res = new Response();
        Gson gson = new Gson();
        res = gson.fromJson(json, Response.class); 
```

我想知道我应该在 Response 类中使用什么变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:50:36.513

```
String data = yourdata;
JSONObject jsonData = new JSONObject(data);
JSONOBject jsonResult = new JSONObject(jsonData.getString("Result"));
JSONOBject jsonResponse = new JSONObject(jsonData.getString("Response"));
String status = jsonResult.getString("Status"); 
```

一个简短的例子，你现在应该看到这个模式了。否则，只需谷歌搜索`JSONObject`和`JSONArray`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:58:14.453

```
String json = "{"Result":{"Status":"SUCCESS","Message":""},"Response":{"Token":"ca0d7507-3907-4eed-af19-ad256bc71088","ZoneUrl":"https:\/\/qa.tritononline.com\/","CustomerID":1,"UserID":29,"DefaultLanguageID":1,"ZoneID":1,"IsTritonIntegrated":false,"Language":[{"LanguageId":1,"Language":"English","IsSelected":false}]}}"

String[] langid=null;

JSONObject object;
JSONObject resultobj = new JSONObject(json);

object = resultobj;

JSONObject responseobj = object.getJSONObject("Response");
responseobj.getString("UserID"); 
```

> 像上面一样，你可以在你的 jsonobject 中得到你想要的。
> 
> 如果你想从你的 JSONARRAY 中得到任何东西，你需要通过以下方式。

```
JSONArray languageobj = object.getJSONArray("Language");

langid = new String[languageobj.length()];

for(int i=0;i<language.length();i++)
{
JSONObject e = languageobj.getJSONObject(i);
langid[i] = e.getString("LanguageId");
} 
```

> 上面显示的方式您将从 JSONArray 中获取所有值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:58:21.677

这是一个示例，可帮助您开始将 json 字符串解组为实际的对象结构。你会明白的。

```
import com.google.gson.Gson;
import com.google.gson.annotations.SerializedName;

// getters and setter omitted for brevity
public class Main {

    public static void main(String[] args) {
        String json = "{\"Result\":{\"Status\":\"SUCCESS\",\"Message\":\"\"},\"Response\":{\"Token\":\"ca0d7507-3907-4eed-af19-ad256bc71088\",\"ZoneUrl\":\"https://qa.tritononline.com/\",\"CustomerID\":1,\"UserID\":29,\"DefaultLanguageID\":1,\"ZoneID\":1,\"IsTritonIntegrated\":false,\"Language\":[{\"LanguageId\":1,\"Language\":\"English\",\"IsSelected\":false}]}}";
        Gson gson = new Gson();
        ServerResponse sr = gson.fromJson(json, ServerResponse.class);
        // do stuff with sr
    }

    public static class ServerResponse {
        public Result Result;
        public Response Response;
    }

    public static class Result {
        public String Status;

        // if you want to follow java conventions (lowercase field name) then
        // you need to add this annotation
        @SerializedName("Message")
        public String message;
    }

    public static class Response {
        public String Token;
        public String ZoneUrl;
        // ... etc
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T10:59:37.417

如果你还想坚持gson

```
 MyType fromJson = gsonHelper.fromJson("{'Result':{'Status':'SUCCESS','Message':''},'Response':{'Token':'ca0d7507-3907-4eed-af19-ad256bc71088','ZoneUrl':'https://qa.tritononline.com/','CustomerID':1,'UserID':29,'DefaultLanguageID':1,'ZoneID':1,'IsTritonIntegrated':false,'Language':[{'LanguageId':1,'Language':'English','IsSelected':false}]}}", MyType.class);
    System.out.println(fromJson.getResponse().getToken());
    System.out.println(fromJson.getResponse().getZoneUrl());

public class MyType
{
    private MyResult Result;
    private MyResponse Response;
    public MyResult getResult()
    {
        return Result;
    }
    public void setResult(MyResult result)
    {
        Result = result;
    }
    public MyResponse getResponse()
    {
        return Response;
    }
    public void setResponse(MyResponse response)
    {
        Response = response;
    }
}

public class MyResult
{
    private String Status;
    private String Message;
    public String getStatus()
    {
        return Status;
    }
    public void setStatus(String status)
    {
        Status = status;
    }
    public String getMessage()
    {
        return Message;
    }
    public void setMessage(String message)
    {
        Message = message;
    }
}

public class MyResponse
{
    private String Token;
    private String ZoneUrl;
    public String getToken()
    {
        return Token;
    }
    public void setToken(String token)
    {
        Token = token;
    }
    public String getZoneUrl()
    {
        return ZoneUrl;
    }
    public void setZoneUrl(String zoneUrl)
    {
        ZoneUrl = zoneUrl;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T11:06:42.813

这里 m 显示仅解析来自响应的令牌数据::

```
jsonObject = new JSONObject(json);
jSONObject object = jsonObject.getJSONObject("Response");

String attr1 = object.getString("Token");
Log.i("value for token",""+object); 
```

# jquery - 列表视图中与当前位置的距离 - Jquery

> ID：12952803
> 
> 赞同：2
> 
> 时间：2012-10-18T10:41:51.980
> 
> 标签：jquery, html, geolocation

我正在尝试创建一个场所列表，并在页面上的每个列表项旁边设置用户与每个场所的距离。目前，顶部列表项将文本更改为“关闭”，但我知道我不是，所以这不能正常工作，而且它也只针对顶部列表项而不是下面的任何项。

我的代码：

```
<script type="text/javascript">

      var Geolocation = {
          rad: function (x) { return x * Math.PI / 180 },

          // Distance in kilometers between two points using the Haversine algo.
          haversine: function (p1, p2) {
              var R = 3959 // Earth's mean radius in km.
              var dLat = this.rad(p2.latitude - p1.latitude)
              var dLong = this.rad(p2.longitude - p1.longitude)

              var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
              Math.cos(this.rad(p1.latitude)) * Math.cos(this.rad(p2.latitude)) * Math.sin(dLong / 2) * Math.sin(dLong / 2)
              var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))
              var d = R * c

              return Math.round(d)
          },

          // Distance between me and the passed position.

          distance_from: function (position) {
              $('ul li').each(function () {
                  Geolocation.display_location()
                  //-->>Added static location variable<<--

                  var long = $(".link").attr('data-longitude');
                  var lat = $(".link").attr("data-latitude");
                  var current_location = "{ latitude:" + lat + ", longitude:" + long + "}"
                  var distance = Geolocation.haversine(position.coords, current_location)

                  if (distance && distance > 0) $("#distance").text(distance + " m")
                  else $("#user_distance").html("close")
              });
          },

          // Hide spinner and show location.
          display_location: function () {
              $("#user_distance").show()
              $("#geolocating").hide()
          }
      }

      $(function () {

          // Geolocation.
          if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(Geolocation.distance_from, Geolocation.display_location)
              navigator.geolocation.watchPosition(Geolocation.distance_from)
          } else {
              Geolocation.display_location()
          }
      }); 
```

我的html是：

```
<ul id="iphone-scroll">
  <li>
    <a name="F"></a>
    <div class="nav-indicator" id="nav-f">F</div>
        <ul>
            <li>

                <a href="#"  class="link"  data-latitude="51.52828" data-longitude="-0.62011" title="Club 1">

                    <div id='location'>
                        <div id='user_distance'>
                           <strong>Club 1</strong>
                           <strong style="float: right" id='distance'></strong>
                        </div>
                    </div>
                </a>

      </li>
   </ul>
    <li>
    <a name="W"></a>
    <div class="nav-indicator" id="nav-w">W</div>
        <ul>
            <li><a href="#" class="link" data-latitude="51.52828" data-longitude="-0.62011" title="club 2"><strong>Club 2</strong></a></li>
        </ul>
    </li>

</ul> 
```

我需要做什么才能完成这项工作？任何帮助将不胜感激。

史蒂夫

# c++ - 在 C++ 中更新字符串的一部分

> ID：12952808
> 
> 赞同：-6
> 
> 时间：2012-10-18T10:42:09.423
> 
> 标签：c++, string, updating

有没有办法`string`通过在函数中传递它来更新 a 的一部分？

```
std::string str = "hello world"; 
```

我想反转部分字符串，例如从索引 4 到 8。

我有一个函数可以将字符串从开始索引反转到结束索引。如何将索引 4 到 8 的字符串传递给该函数，以便它在`str`字符串中自动更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:48:33.437

你为什么不直接使用[`std::reverse`](http://en.cppreference.com/w/cpp/algorithm/reverse)？

```
std::string str = "hello world";
std::reverse ( str.begin() + 4, str.begin() + 8 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T10:46:22.407

编写一个带有开始/结束迭代器的函数。例如，参见[std::reverse()](http://www.cplusplus.com/reference/algorithm/reverse/)。std::vector 的用法示例在同一页面上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T10:46:08.540

您可以通过引用传递字符串：

```
void foo( std::string & inputString )
{
  //anything you do here will directly affect the string passed.
} 
```

例如：

```
void foo( std::string & str )
{
    str.append("World!");
}

int main()
{
    std::string a = "Hello, ";
    foo(a);
    std::cout << a;
    return 0;
} 
```

将打印出“Hello, World!”。另一种选择是传递字符串的开始和结束迭代器。很多`std`功能都是这样工作的。

# continuous-integration - 如何确定部署缓慢的应用程序是否正确部署？

> ID：12952811
> 
> 赞同：1
> 
> 时间：2012-10-18T10:42:17.617
> 
> 标签：continuous-integration, jenkins, continuous-deployment

我有一个构建应用程序的 Jenkins 项目，然后，如果成功，将应用程序复制到我们的测试环境并重新启动 Tomcat 服务器。Tomcat 启动大约需要 90 秒。如何自动和/或以编程方式检查 Tomcat 启动是否成功，以便触发部署到我们的暂存环境？我们有一个我可以监控的监控 URL，但我不知道如何在 Jenkins 中实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T22:18:31.897

创建一个 ant scriptlet，并将两件事放入[并行](http://ant.apache.org/manual/Tasks/parallel.html)任务中：

*   [使用exec](http://ant.apache.org/manual/Tasks/exec.html)任务启动 Tomcat
*   一个带有套接字侦听器的[条件元素，用于在](http://ant.apache.org/manual/Tasks/conditions.html)[waitfor](http://ant.apache.org/manual/Tasks/waitfor.html)内的 tomcat 的 http 端口。您可以定义 timout 属性，如果它是在 waitfor 之后定义的，您可以使用[fail](http://ant.apache.org/manual/Tasks/fail.html)来使构建失败。要检查该属性，您可以简单地创建一个带有条件运行的子目标，在等待之后您可以调用它。

所以是这样的：

```
<target name="runCheckedTomcat">
    <parallel>
        <sequential>
            <echo>Tomcat starts</echo>
            <exec command="start.bat" dir="tomcatdir">
            </exec>
        </sequential>
        <sequential>
            <waitfor timeoutproperty="timeout" maxwait="15" maxwaitunit="second">
                <socket server="localhost" port="8080"/>
            </waitfor>
            <antcall target="fail"/>
        </sequential>
    </parallel>
</target>

<target name="fail" if="timeout">
    <fail message="Tomcat is not started in time"/>
</target> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T10:30:55.343

我只是通过在 Jenkins 中设置一个执行以下命令的简单 exec-job 来解决这个问题。

```
curl -f -m 120 -o /dev/null -s -S http://example.org:8080/application 
```

# java - 将代码添加到循环时Java循环不循环

> ID：12952815
> 
> 赞同：0
> 
> 时间：2012-10-18T10:42:31.990
> 
> 标签：java

我很困惑，因为当我在循环中添加代码时它会停止循环（在第一轮之后有效地结束）。

运行良好的代码

```
StringBuilder sb = new StringBuilder(4096);
  while ((rs.next())) {
  System.err.println(rs.getRow());
  sb.append(rs.getString(1)).append(",");
  }
writeToCell(sheet,"P",row.getRowNum()+1,sb.toString()); 
```

不循环的代码

```
StringBuilder sb = new StringBuilder(4096);
    while ((rs.next())) {
    System.err.println(rs.getRow());
    String p=rs.getString(1);
    ArrayList<Parent> pscore = new ArrayList();
    pscore.add(new Parent(p));
    String Score= getSegment(pscore);
    sb.append(p).append("(").append(Score).append("),");
    }
writeToCell(sheet,"P",row.getRowNum()+1,sb.toString()); 
```

我不知道为什么它会在顶级版本而不是底部版本中循环。没有错误被抛出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:05:14.703

我的猜测是

```
pscore.add(new Parent(p));
String Score= getSegment(pscore); 
```

执行一个数据库查询，替换`rs`在 getSegment 返回之前已完成的查询，因此下一次调用`rs.next()`将为 false。

为了避免这种情况，我会确保它`rs`是一个局部变量而不是一个字段。

如果是这种情况，最好的解决方案可能是使原始 SELECT 成为表之间的连接，以便拥有您需要的所有信息，而不是每行执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:00:22.373

Keppils 的评论将我引向了答案

“也许 rs 在 getSegment() 方法中发生了什么事？”

我不知道如何给予任何信任我赞成评论但不能接受评论是正确的

父类使用静态变量进行数据库连接，因此在定义它时会覆盖 rs 变量。

# objective-c - iOS如何知道UITableView中是否第二次点击了一行？

> ID：12952826
> 
> 赞同：1
> 
> 时间：2012-10-18T10:42:58.790
> 
> 标签：objective-c, ios5, uitableview

我正在开发一个 iOS 5 应用程序，在我的情况下，如果用户第一次从 UITableView 中点击一行，那么它将执行一些操作，如果第二次点击它，它将执行不同的操作。

现在，**问题是如何知道特定行是否被第二次点击？**

提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T11:12:59.923

那你为什么不将 UIGestures 与 TableView 一起使用。这将是最简单的解决方案，对我来说就像魅力一样。

**这是帮助您在代码中实现它的代码：**

```
 // Put this code in your ViewDidLoad:
    UITapGestureRecognizer *doublegesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTableViewCellDoubleTapping:)];
    doublegesture.numberOfTapsRequired = 2;
    [roomTableView addGestureRecognizer:doublegesture];
    [doublegesture release]; 
```

**//双击事件处理方法**

```
-(void)didTableViewCellDoubleTapping:(UITapGestureRecognizer *)gestureRecognizer 
{
    if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        CGPoint swipeLocation = [gestureRecognizer locationInView:roomTableView];
        NSIndexPath *swipedIndexPath = [roomTableView indexPathForRowAtPoint:swipeLocation];
        NSLog(@"%d",swipedIndexPath.row);

        // ... Here you can add your logic
    }
} 
```

**以类似的方式，如果您添加另一个 UIGesture for Single tap**

```
 UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTableViewSingleCellTapping:)];
    gesture.numberOfTapsRequired = 1;
    [roomTableView addGestureRecognizer:gesture];
    [gesture release];

    [gesture requireGestureRecognizerToFail:doublegesture];

-(void)didTableViewSingleCellTapping:(UITapGestureRecognizer *)gestureRecognizer 
{
    if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {
        CGPoint swipeLocation = [gestureRecognizer locationInView:roomTableView];
        NSIndexPath *swipedIndexPath = [roomTableView indexPathForRowAtPoint:swipeLocation];

        NSLog(@"%d",swipedIndexPath.row);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:15:14.953

这是我的解决方案（正如 Eiko 建议的那样）：

每当第一次在数组中选择行并调用第一个操作时，维护一个可变数组并存储行索引。当第二次选择行或选择另一行时，检查该行的索引是否存在于数组中，如果是，则调用第二个操作，否则将行的索引添加到数组并调用第一个操作。

# django - 在 Django 的管理端使用 Grappelii 进行导航

> ID：12952829
> 
> 赞同：1
> 
> 时间：2012-10-18T10:43:04.763
> 
> 标签：django, django-admin, django-grappelli

我安装了 grappelli.dashboard。按照所有步骤操作，但仍然不显示导航。安装仪表板后，将创建dashboard.py 文件。在该 dashboard.py 文件中，“Group: Administration & Applications”、“Support”、“Latest Django News”、“Recent Actions”将出现。

谁能告诉我如何添加导航？

我还想在 Django 中使用 grappelli 在管理员端添加书签功能。我将 Grappeli 2.3.8 与 Django 1.4 一起使用。Grappeli 2.0 具有书签、导航等功能，但新 Grappeli 版本确实具有这些功能。有什么方法可以自定义添加书签吗？

这是dashboard.py的代码

```
from django.utils.translation import ugettext_lazy as _
from django.core.urlresolvers import reverse

from grappelli.dashboard import modules, Dashboard
from grappelli.dashboard.utils import get_admin_site_name

class CustomIndexDashboard(Dashboard):
"""
Custom index dashboard for www.
"""

def init_with_context(self, context):
    site_name = get_admin_site_name(context)

    # append a group for "Administration" & "Applications"
    self.children.append(modules.Group(
        _('Group: Administration & Applications'),
        column=1,
        collapsible=True,
        children = [
            modules.AppList(
                _('Administration'),
                column=1,
                collapsible=False,
                models=('django.contrib.*',),
            ),
            modules.AppList(
                _('Applications'),
                column=1,
                css_classes=('collapse closed',),
                exclude=('django.contrib.*',),
            )
        ]
    ))

    # append an app list module for "Applications"
    self.children.append(modules.AppList(
        _('AppList: Applications'),
        collapsible=True,
        column=1,
        css_classes=('collapse closed',),
        exclude=('django.contrib.*',),
    ))

    # append an app list module for "Administration"
    self.children.append(modules.ModelList(
        _('ModelList: Administration'),
        column=1,
        collapsible=False,
        models=('django.contrib.*',),
    ))

    # append another link list module for "support".
    self.children.append(modules.LinkList(
        _('Media Management'),
        column=2,
        children=[
            {
                'title': _('FileBrowser'),
                'url': '/admin/filebrowser/browse/',
                'external': False,
            },
        ]
    ))

    # append another link list module for "support".
    self.children.append(modules.LinkList(
        _('Support'),
        column=2,
        children=[
            {
                'title': _('Django Documentation'),
                'url': 'http://docs.djangoproject.com/',
                'external': True,
            },
            {
                'title': _('Grappelli Documentation'),
                'url': 'http://packages.python.org/django-grappelli/',
                'external': True,
            },
            {
                'title': _('Grappelli Google-Code'),
                'url': 'http://code.google.com/p/django-grappelli/',
                'external': True,
            },
        ]
    ))

    # append a feed module
    self.children.append(modules.Feed(
        _('Latest Django News'),
        column=2,
        feed_url='http://www.djangoproject.com/rss/weblog/',
        limit=5
    ))

    # append a recent actions module
    self.children.append(modules.RecentActions(
        _('Recent Actions'),
        limit=5,
        collapsible=False,
        column=3,
    )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T05:03:35.270

我已经解决了这个问题。像旧的 grappelli 2.0 一样定制了 grappelli。将导航类添加到 models.py 中，并将导航块添加到 index.html 文件中，它就可以工作了。像新的 Grappelli 结构一样更改样式。

# jquery - jQuery加载/卸载？

> ID：12952831
> 
> 赞同：0
> 
> 时间：2012-10-18T10:43:09.830
> 
> 标签：jquery

所以我想知道你将如何做到这一点。

我有一个看起来像这样的代码：

```
<body>
  <div class="header">
  </div>

  <div class="content">
    <div class="001">
      Content
    </div>
    <div class="002">
      Content
    </div>
    <div class="003">
      Content
    </div>
  </div>

</body> 
```

我的 jQuery 是这样工作的：

```
jQuery('.001').click(function(){
    jQuery(this).load('pages/001.html');
}); 
```

所以我也想要添加一行，说如果我点击另一个 div（例如 002）来卸载/返回 divs 001 状态。

您将如何实现这一目标？

我正在考虑在 jQuery 代码的开头改变 contant 并在每次加载之前重新加载它，但我不知道这是否是最佳的。

任何想法/提示？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:47:13.763

如果你加载的页面不包含那么多复杂的数据，比如图片、视频等。使用 hide() 和 show() 而不是在 div 中加载 html 并丢失之前的状态。如果您将它用于不同目的，请创建另一个 div，使其不可见，并将您以前的状态内容存储在其中，因此您可以在这种情况下随时交换。

# linux - 查找 [HOST]：Go 中没有此类主机错误

> ID：12952833
> 
> 赞同：13
> 
> 时间：2012-10-18T10:43:39.190
> 
> 标签：linux, http, networking, concurrency, go

我有这个测试程序，它将并行获取 url，但是当我将并行数增加到大约 1040 时，我开始`lookup www.httpbin.org: no such host`出错。

经过一番谷歌，我发现其他人说不关闭响应会导致问题，但我确实用`res.Body.Close()`.

这里有什么问题？非常感谢。

```
package main

import (
    "fmt"
    "net/http"
    "io/ioutil"
)

func get(url string) ([]byte, error) {

    client := &http.Client{}
    req, _ := http.NewRequest("GET", url, nil)

    res, err := client.Do(req)

    if err != nil {
        fmt.Println(err)
        return nil, err
    } 

    bytes, read_err := ioutil.ReadAll(res.Body)
    res.Body.Close()

    fmt.Println(bytes)

    return bytes, read_err
}

func main() {
    for i := 0; i < 1040; i++ {
        go get(fmt.Sprintf("http://www.httpbin.org/get?a=%d", i))
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T15:21:57.433

从技术上讲，您的进程（受内核）限制为大约 1000 个打开的文件描述符。根据具体情况，您可能需要增加此数字。

在你的 shell 运行中（注意最后一行）：

```
$ ulimit -a
-t: cpu time (seconds)         unlimited
-f: file size (blocks)         unlimited
-d: data seg size (kbytes)     unlimited
-s: stack size (kbytes)        8192
-c: core file size (blocks)    0
-v: address space (kb)         unlimited
-l: locked-in-memory size (kb) unlimited
-u: processes                  709
-n: file descriptors           2560 
```

增加（暂时）：

```
$ ulimit -n 5000
(no output) 
```

然后验证 fd 限制：

```
$ ulimit -n
5000 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-18T11:10:23.343

那是因为您的代码中可能有多达 1040 个并发调用，因此您很可能处于打开 1040 个主体但尚未关闭的状态。

您需要限制使用的 goroutine 的数量。

这是一种可能的解决方案，最大并发调用数限制为 100：

```
func getThemAll() {
    nbConcurrentGet := 100
    urls :=  make(chan string, nbConcurrentGet)
    for i := 0; i < nbConcurrentGet; i++ {
        go func (){
            for url := range urls {
                get(url)
            }
        }()
    }
    for i:=0; i<1040; i++ {
        urls <- fmt.Sprintf("http://www.httpbin.org/get?a=%d", i)
    }
} 
```

如果在程序的 main 函数中调用它，它可能会在所有任务完成之前停止。您可以使用 a`sync.WaitGroup`来防止它：

```
func main() {
    nbConcurrentGet := 100
    urls :=  make(chan string, nbConcurrentGet)
    var wg sync.WaitGroup
    for i := 0; i < nbConcurrentGet; i++ {
        go func (){
            for url := range urls {
                get(url)
                wg.Done()
            }
        }()
    }
    for i:=0; i<1040; i++ {
        wg.Add(1)
        urls <- fmt.Sprintf("http://www.httpbin.org/get?a=%d", i)
    }
    wg.Wait()
    fmt.Println("Finished")
} 
```

# jquery - jQuery Splitter 拖动停止时触发事件

> ID：12952835
> 
> 赞同：0
> 
> 时间：2012-10-18T10:43:41.657
> 
> 标签：jquery, splitter, mouseup

我正在使用来自[https://github.com/jcubic/jquery.splitter](https://github.com/jcubic/jquery.splitter)的 jQuery Splitter 插件。分离器工作正常。我需要知道如何在停止拆分器的拖动后立即触发某些事件。我需要在后端保留新的拆分器左侧位置并下次使用。

mouseup、mousemove 事件未按预期工作。下面是我尝试过的方法。它仅在鼠标单击拆分器而不拖动它时才有效（鼠标单击同一位置）。拖动拆分器后，这将不起作用。

```
 jQuery('.vspliter').on("mouseup", function (e) {
            alert('Mouse is released now');
                    // call ajax function over here
      }); 
```

如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:53:26.070

我可以通过检测拖动使用以下代码解决此问题：

```
 var isDragging = false;
       jQuery('.spliter_panel').mousedown(function() {
           jQuery('.spliter_panel').mousemove(function() {
               isDragging = true;
               jQuery('.spliter_panel').unbind("mousemove");
           });
       });
       jQuery('.spliter_panel').mouseup(function() {
           var wasDragging = isDragging;
           isDragging = false;
           jQuery('.spliter_panel').unbind("mousemove");
           if (wasDragging) {
                //Call Ajax method
           }
       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T19:30:52.363

已经为 onDragStart、onDragEnd 和 onDrag 设置了拆分器表面处理程序，因此我能够简单地通过以下方式获取位置信息：

```
 $('.MySplitter').split({
     orientation: 'vertical',
     limit: 10,
     onDragEnd: getSplitterLocation
 });

 function getSplitterLocation(e) {
     console.log(e);  // jQuery.Event
 } 
```

也许这是在提出原始问题后添加到拆分器中的......

# android - SherlockActionBar：固定宽度的标签

> ID：12952838
> 
> 赞同：1
> 
> 时间：2012-10-18T10:43:51.950
> 
> 标签：android, actionbarsherlock, android-tabs

我在 Sherlock ActionBar 中有几个选项卡，一切正常，因为每个选项卡都会自动调整大小，直到达到手机的宽度。

现在，我添加了另一个选项卡，而不是自动调整大小，选项卡具有与以前相同的固定大小，因此包含三个条的条比手机的宽度宽。

像这样：

![在此处输入图像描述](../Images/3e76ad1824a30bd8cdb79c56377643d4.png)

如果我们用手指向右滑动..

![在此处输入图像描述](../Images/7b0ced0a10849177b2dec8c142ad43e8.png)

有什么办法可以减小每个标签的大小（或者无论如何它是自动完成的），这样标签栏就占据了手机的宽度并且我们不必滑动？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:39:25.280

我所做的只是将图像的宽度减小到 20 像素（可以是任意数字）。Android 会调整为更大的尺寸，但不会调整为更小的尺寸，因此即使它是 10、15 或任何比用作选项卡背景的图像的原始尺寸更小的值，它也会正确拉伸它。

# ruby-on-rails - TinyMCE 编辑器格式创建不需要的 200b 字符

> ID：12952840
> 
> 赞同：1
> 
> 时间：2012-10-18T10:44:03.903
> 
> 标签：ruby-on-rails, unicode, tinymce

我的页面上有一个 TinyMCE 编辑器。添加到编辑器的内容：

jfdkl

**​jfdslk**

```
tinyMCE.activeEditor.getContent({"format":"raw"}) 
```

返回这个：

```
"<p>jfdkl</p><p><strong data-mce-bogus="1">​jfdslk</strong><br></p>" 
```

将其复制到 vim 编辑器：

```
"<p>jfdkl</p><p><strong data-mce-bogus="1"><200b>jfdslk</strong><br></p>" 
```

问题在于这个额外的**<200b>**字符串。这插入了一个**？**我的 MySQL 数据库中的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:11:38.403

根据我的发现，添加这些东西的是 autoresize TinyMCE 插件：[问题已解决](http://www.tinymce.com/forum/viewtopic.php?id=26266)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:57:47.923

这不应该发生，但是有很多可能可以在编辑器中插入特殊字符。最好的选择是在保存到数据库之前删除此字符 - 在服务器端或客户端（使用 tinymce`onSubmit`事件）。

# c++ - 标准库头文件中奇怪的枚举语法

> ID：12952850
> 
> 赞同：3
> 
> 时间：2012-10-18T10:44:36.217
> 
> 标签：c++, std

我最近在使用字符串流

```
stringstream ss (stringstream::in | stringstream::out); 
```

我决定看一下**in**和**out**的声明，我对它们的声明方式有些困惑。有人能够澄清 A. 为什么他们这样写和 B. 它是如何工作的？我期待它们以标准枚举语法编写。

```
enum _Openmode
    {   // constants for file opening options
    _Openmask = 0xff};

static const _Openmode in = (_Openmode)0x01;
static const _Openmode out = (_Openmode)0x02;
static const _Openmode ate = (_Openmode)0x04; 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T10:51:21.003

该标准实际上要求这些常量是变量，而不仅仅是枚举数，即它们在内存中具有地址，而不仅仅是常量的标签。它*不*要求它们是枚举，它们可以是整数或位集。规范要求：

```
// *27.5.3.1.4*开放模式
typedef T3 开放模式；
static constexpr openmode app = *unspecified* ;
static constexpr openmode ate = *unspecified* ;
static constexpr openmode binary = *unspecified* ;
static constexpr openmode in = *unspecified* ;
static constexpr openmode out = *unspecified* ;
static constexpr openmode trunc = *unspecified* ;

```

因此，为了满足这个要求，声明类型（在标准库中作为枚举），然后声明该类型的几个变量，并具有必要的值。

另一种实现是：

```
enum _Openmode
    {   // constants for file opening options
    _In = 0x01,
    _Out = 0x02,
    _Ate = 0x04,
    _Openmask = 0xff};

static const _Openmode in = _In;
static const _Openmode out = _Out;
static const _Openmode ate = _Ate; 
```

这看起来更像您的预期，但这样做没有任何优势。如果有的话，更糟的是，因为它向命名空间添加了额外的未使用名称（_In、_Out、_Ate 等），从而阻止了在实现的其他地方使用这些相同的名称，并且（非常轻微地）减慢了名称查找速度。

与传统的应用程序或库代码相比，标准库的实现方式通常看起来很不寻常。这需要满足标准库的确切要求，该标准库必须在所有可能的情况下都可用，并且还避免导致用户代码出现问题（例如名称冲突或链接器错误）。

# android - 对不同的布局使用 convertview 但不更改 xml 值

> ID：12952858
> 
> 赞同：0
> 
> 时间：2012-10-18T10:45:11.230
> 
> 标签：android, convertview

如何在按钮单击时匹配页面指示器的不同布局上的字符串，例如 first.xml、second.xml 和 third.xml。我正在使用 convertview，但没有将每个布局 xml 的值加粗。

```
 mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  View convertView1 = mInflater.inflate(R.layout.first_screen,null); 
```

// 这是converview

```
String strfistsearch=   mylist.get(9).get("data1");  
      Log.v("strfistsearch", strfistsearch);
    if(strfistsearch.equals(strfistsearch))
      {   
             mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
              View   convertView1 = mInflater.inflate(R.layout.first_screen,null);        
               TextView txtf = (TextView)convertView1.findViewById(R.id.textView1);

     SpannableStringBuilder sb = new SpannableStringBuilder(strfistsearch);
    final StyleSpan bss = new StyleSpan(android.graphics.Typeface.BOLD); // Span to make text 
    sb.setSpan(bss, 0, 2, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold 
    sb.setSpan(iss, 4, 6, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make last 2 characters Italic
    sb.setSpan(new ForegroundColorSpan(Color.RED), 0, 2, 0);
    txtf.setText(sb);

       }
    else if(strfistsearch.equals(strfistsearch))
       {
               mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
              View   convertView1 = mInflater.inflate(R.layout.first_screen,null);        
               TextView txtf = (TextView)convertView1.findViewById(R.id.textView1);  
     SpannableStringBuilder sb = new SpannableStringBuilder(strfistsearch);
    final StyleSpan bss = new StyleSpan(android.graphics.Typeface.BOLD); // Span to make text 
    sb.setSpan(bss, 0, 2, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold 
    sb.setSpan(iss, 4, 6, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make last 2 characters Italic
    sb.setSpan(new ForegroundColorSpan(Color.RED), 0, 2, 0);
    txtf.setText(sb);

    }

    else if(strfistsearch.equals(strfistsearch))
    {
             mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
              View   convertView1 = mInflater.inflate(R.layout.first_screen,null);        
               TextView txtf = (TextView)convertView1.findViewById(R.id.textView1);  
     SpannableStringBuilder sb = new SpannableStringBuilder(strfistsearch);
    final StyleSpan bss = new StyleSpan(android.graphics.Typeface.BOLD); // Span to make text 
    sb.setSpan(bss, 0, 2, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make first 4 characters Bold 
    sb.setSpan(iss, 4, 6, Spannable.SPAN_INCLUSIVE_INCLUSIVE); // make last 2 characters Italic
    sb.setSpan(new ForegroundColorSpan(Color.RED), 0, 2, 0);
    txtf.setText(sb);
    } 
```

如何解决此问题..在此先感谢..

# android - 在 android 中使用 MediaStore.ACTION_IMAGE_CAPTURE 意图捕获图像

> ID：12952859
> 
> 赞同：11
> 
> 时间：2012-10-18T10:45:12.323
> 
> 标签：android, image, android-intent, capture

我正在使用 MediaStore.ACTION_IMAGE_CAPTURE 意图捕获图像。它在大多数设备中运行良好。但它在某些最新的 android 设备中无法正常工作。

我的意图是使用相机捕获图像并将其发送到服务器，但不将该图像存储在设备的默认图库中。

* ***：当我捕获图像时，它在 onActivityResult 方法中返回一些其他画廊图像，而不是在某些最新的 android 设备中捕获的图像。我正在使用下面的代码来捕获和存储图像。

```
public void launchCamera(View v) {
    Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(camera, CAMERA_PIC_REQUEST );
} 
```

在 onActivityResult 方法中，

```
String[] projection = { MediaStore.Images.ImageColumns.SIZE,
                    MediaStore.Images.ImageColumns.DISPLAY_NAME,
                    MediaStore.Images.ImageColumns.DATA, BaseColumns._ID, };
            Cursor c = null;
            Uri u = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
            try {
                if (u != null) {
                    c = managedQuery(u, projection, null, null, null);
                }
                if ((c != null) && (c.moveToLast())) {
                    Bitmap thumbnail = getBitMapFromLocalPath(c.getString(2), 3);
                    idsImagesgot.add(thumbnail);
                    ContentResolver cr = getContentResolver();
                    cr.delete( MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
                            BaseColumns._ID + "=" + c.getString(3), null);
                }
            } finally {
                if (c != null) {
                    c.close();
                }
            } 
```

任何人都可以在这方面帮助我。

提前致谢。

萨蒂什

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-18T11:32:49.650

ACTION_IMAGE_CAPTURE 拍摄的照片不会在所有设备上自动注册到 MediaStore。

官方的 Android 指南给出了这个例子： http: [//developer.android.com/guide/topics/media/camera.html#intent-receive](http://developer.android.com/guide/topics/media/camera.html#intent-receive) 但这并不适用于所有设备。

我知道的唯一可靠方法是将图片的路径保存在局部变量中。请注意，您的应用程序可能会在后台（相机应用程序正在运行时）被杀死，因此您必须在 onSaveInstanceState 期间保存路径。

评论后编辑：

创建一个临时文件名，启动 Intent 时将在其中存储照片。

```
File tempFile = File.createTempFile("my_app", ".jpg");
fileName = tempFile.getAbsolutePath();
Uri uri = Uri.fromFile(tempFile);
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, uri);
startActivityForResult(intent, PICTURE_REQUEST_CODE); 
```

`fileName`是一个字符串，你的活动的一个字段。您必须以这种方式保存它：

```
@Override
public void onSaveInstanceState(Bundle bundle)
{
 super.onSaveInstanceState(bundle);
 bundle.putString("fileName", fileName);
} 
```

并在 onCreate() 中恢复它：

```
public void onCreate(Bundle savedInstanceState)
{
 if (savedInstanceState != null)
  fileName = savedInstanceState.getString("fileName");
 // ...
} 
```

现在，在 onActivityResult 时，您知道存储照片的文件的名称 ( `fileName`)。你可以用它做任何你想做的事情，然后删除它。

2013-09-19 编辑：似乎某些相机应用程序忽略了 putExtra uri，并将图片存储在不同的位置。因此，在使用该值之前，`fileName`您应该检查意图是否为空。如果你得到一个非空意图，那么你应该更`intent.getData()`喜欢`fileName`. 仅在`fileName`需要时用作备份解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-07T22:17:37.563

我的 onActivityResult() 方法看起来像这样，它适用于从**MediaStore.ACTION_IMAGE_CAPTURE**获取图像：

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        Bitmap mImageBitmap = (Bitmap) extras.get("data");
    }
} 
```

# android - 如何从我的应用程序向 WhatsApp 分享文本？

> ID：12952865
> 
> 赞同：50
> 
> 时间：2012-10-18T10:45:45.657
> 
> 标签：android, android-intent, share, whatsapp

我开发了一个具有共享文本功能的应用程序。除了 WhatsApp，这一切正常。我该怎么办？是否有任何特定的API？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-09-03T06:44:37.690

您可以使用意图来执行此操作。无需使用 Whatsapp API。希望我没有误解你的问题。希望有帮助，谢谢。

```
Intent whatsappIntent = new Intent(Intent.ACTION_SEND);
whatsappIntent.setType("text/plain");
whatsappIntent.setPackage("com.whatsapp");
whatsappIntent.putExtra(Intent.EXTRA_TEXT, "The text you wanted to share");
try {
    activity.startActivity(whatsappIntent);
} catch (android.content.ActivityNotFoundException ex) {
    ToastHelper.MakeShortText("Whatsapp have not been installed.");
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-04-07T14:24:29.793

与 WhatsApp 集成的方法有两种：

*   通过自定义 URL 方案

*   通过Android的intent系统。

如果您有一个网站并且想要打开一个带有预填充消息的 WhatsApp 聊天，您可以使用我们的自定义 URL 方案来执行此操作。打开 whatsapp://send?text= 后跟要发送的文本，将打开 WhatsApp，允许用户选择联系人，并用指定的文本预先填写输入字段。

与 Android 上的大多数社交应用程序一样，WhatsApp 会倾听共享媒体和文本的意图。例如，只需创建一个共享文本的意图，系统选择器就会显示 WhatsApp：

```
Intent sendIntent = new Intent();
sendIntent.setAction(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
sendIntent.setType("text/plain");
startActivity(sendIntent); 
```

但是，如果您更喜欢直接分享到 WhatsApp 并绕过系统选择器，您可以通过在您的意图中使用 setPackage 来做到这一点：

```
sendIntent.setPackage("com.whatsapp"); 
```

这只需在您调用 startActivity(sendIntent); 之前设置。

请参考以下链接官方WhatsApp页面： [https](https://www.whatsapp.com/faq/en/android/28000012) ://www.whatsapp.com/faq/en/android/28000012 ，

如果您想与特定的 WhatsApp 联系人分享一些文本，请参考以下代码。

```
private void openWhatsApp() {
String smsNumber = "7****"; //without '+'
try {
    Intent sendIntent = new Intent("android.intent.action.MAIN");
    //sendIntent.setComponent(new ComponentName("com.whatsapp", "com.whatsapp.Conversation"));
    sendIntent.setAction(Intent.ACTION_SEND);
    sendIntent.setType("text/plain");
    sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
    sendIntent.putExtra("jid", smsNumber + "@s.whatsapp.net"); //phone number without "+" prefix
    sendIntent.setPackage("com.whatsapp");
    startActivity(sendIntent);
} catch(Exception e) {
    Toast.makeText(this, "Error/n" + e.toString(), Toast.LENGTH_SHORT).show();
 }

} 
```

有关更多详细信息，请参阅以下链接 [将文本发送给特定联系人（whatsapp）](https://stackoverflow.com/questions/19081654/send-text-to-specific-contact-whatsapp)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-08-10T06:34:13.143

如果用户的设备中没有 Whatsapp 应用程序，那么用户将收到**ActivityNotFoundException**

然后，您应该先让用户下载该应用程序。

```
public void shareViaWhatsApp() {
        Intent whatsappIntent = new Intent(Intent.ACTION_SEND);
        whatsappIntent.setType("text/plain");
        whatsappIntent.setPackage("com.whatsapp");
        whatsappIntent.putExtra(Intent.EXTRA_TEXT, "Application of social rating share with your friend");
        try {
            Objects.requireNonNull(getActivity()).startActivity(whatsappIntent);
        } catch (android.content.ActivityNotFoundException ex) {
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://play.google.com/store/apps/details?id=com.whatsapp")));
        }
    } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-07-18T10:49:11.760

```
Intent share = new Intent(Intent.ACTION_SEND);
    share.setType("text/plain");
    share.putExtra(Intent.EXTRA_TEXT, "Your text");
    startActivity(Intent.createChooser(share, "Share using")); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-28T10:57:36.753

```
 Intent sendIntent = new Intent();
    sendIntent.setAction(Intent.ACTION_SEND);
    sendIntent.putExtra(Intent.EXTRA_TEXT, "This is my text to send.");
    sendIntent.setType("text/plain");
sendIntent.setPackage("com.whatsapp");
    startActivity(sendIntent); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T17:34:40.547

我不是 100% 确定......但恐怕没有发布官方 API。我还想实现“向我们发送 whatsapp”功能，但我暂时放弃了，直到 whatsapp.inc 发布官方

有一些非官方的 API 但我不知道你是否想要...

[http://www.whatsapp-api.com/developers.php](http://www.whatsapp-api.com/developers.php)

[https://github.com/venomous0x/WhatsAPI](https://github.com/venomous0x/WhatsAPI)

祝你好运……如果你发现了什么，请告诉我；）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-16T13:49:40.630

您可以使用 WhatsApp API Android： http: [//www.whatsapp.com/faq/en/android/28000012](http://www.whatsapp.com/faq/en/android/28000012) iOS： http: [//www.whatsapp.com/faq/en/iphone/23559013](http://www.whatsapp.com/faq/en/iphone/23559013)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-31T21:14:05.773

```
 message = "this msg is sent from My App Time Track"
            val intent = Intent()//Empty as we don't know the destination i.e implicit intent
            intent.action = Intent.ACTION_SEND//intent will do work of sending something
            intent.putExtra(Intent.EXTRA_TEXT, message)//send given message
            intent.putExtra(Intent.EXTRA_SUBJECT,"Download Time Track App")//give the subject for your message
            //Intent.Extra_Text is actually a globol key
            intent.type = "plane/text"//type of intent

            startActivity(Intent.createChooser(intent,"Send to: "))//createChooser is a dialogBox which shows app available to send data 
```

* * *

## 回答 #9

> 赞同：-11
> 
> 时间：2012-11-06T13:23:30.667

什么应用程序没有公开的官方api....所以现在不可能。（2012 年 11 月 6 日回答）

# javascript - 动态生成的元素上的淘汰赛绑定

> ID：12952868
> 
> 赞同：8
> 
> 时间：2012-10-18T10:45:46.703
> 
> 标签：javascript, jquery, knockout.js

我正在使用 Knockout.js，我对此很陌生。我为我的问题创建了一个[示例。](http://jsbin.com/umusog/3/edit)在这里，我试图将淘汰赛绑定绑定到动态生成的元素。但是绑定没有正确应用于动态生成的元素。

我正在尝试将输入文本字段与标签元素同步。因此，无论我们在输入字段中输入什么，相同的文本都会反映在其相应的标签元素中。如果我对我的问题不清楚，请原谅我，请向我询问。帮帮我，伙计们？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T11:11:44.510

`knockout`在您的代码中，您没有使用自动生成 html的主要功能之一。而不是使用`jQuery`添加新行 - 使用`foreach`与`observableArray`. 当您向数组敲除添加新项目时，将自动生成 html 标记。

Javascript：

```
function CourseViewModel(){
    var self = this;
    self.textValue = ko.observable('');
}

function CeremonyViewModel() {
    var self = this;

    self.cources = ko.observableArray([new CourseViewModel()]);

    self.addCourse = function(){
        self.cources.push(new CourseViewModel());
    };
}

ko.applyBindings(new CeremonyViewModel()); 
```

html:

```
 <div id="menutab">
    <form id="createMForm">
        <input type="button" id="createmenu" value="Add menu" data-bind="click: addCourse"/>
        <div class="menu">
            <table data-bind="foreach: cources" class="ui-widget ui-widget-content" >
                <tr>
                    <td>
                        <label for="CourseName">CourseName</label>
                    </td>
                    <td>
                        <input type="text"  data-bind="value: textValue, valueUpdate:'keyup'" class="CreateCourseName" name="CourseName" />
                    </td>
                </tr>
            </table>
        </div>
    </form>
</div>
<div id="courseoptiontab">
    <form id="createCOForm">
        <div class="options">
            <table data-bind="foreach: cources" class="ui-widget ui-widget-content">
                <tr>
                    <td>
                        <label class="colabel">Course Name
                            <span class="forcourse" data-bind="text: textValue"></span>
                        </label>
                    </td>
                </tr>
          </table>
       </div>
    </form>
<div> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/g5vxr/](http://jsfiddle.net/vyshniakov/g5vxr/)

# jquery - 图像改变，src 属性保持不变

> ID：12952869
> 
> 赞同：0
> 
> 时间：2012-10-18T10:45:54.810
> 
> 标签：jquery, firefox, google-chrome

我遇到了一个问题，即图像元素的 src 属性在 ajax 请求后保持不变。该元素是另一个元素的“内部”元素，它被 .html(data) 函数@回调函数“替换”。奇怪的是，即使如我所说的 src 属性显示了源代码中最后一个图像的路径，新图像也会按原样显示。

这是JS：

```
 $('.toplistimages').each(function(){
    var filepath = $(this).attr('src');
    var next = "next"
    $(this).click(function(e){
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '?category=goto',
            data: {
                "filepath" : filepath,
                "next" : next
            },
            success: function(data){
                $('#rightvotecolumn').html(data);
            }
        });
        return false;
    });
}); 
```

内容替换成功，但 src 属性保持不变。

编辑：我还可以补充一点，当我尝试保存在 ajax 请求之后显示的图像时，会显示正确的文件名。我在 Firefox 和 chrome 上试试这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:51:44.527

我建议您不要通过“查看源代码”选项检查源代码，而是在 Chrome 或 Firefox 中使用 F12 在控制台中检查它。

因为，后面添加的动态数据在Page Source中是看不到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:54:10.717

这种行为的原因是您`src`只获得一次实际值并在每个`click`事件处理程序中使用该值。要解决此问题，请在每个点击事件上设置文件名变量值：

```
$('.toplistimages').each(function(){
var next = "next"
$(this).click(function(e){
    e.preventDefault();
    var filepath = $(this).attr('src');
    $.ajax({
        type: 'POST',
        url: '?category=goto',
        data: {
            "filepath" : filepath,
            "next" : next
        },
        success: function(data){
            $('#rightvotecolumn').html(data);
        }
    });
    return false;
}); 
```

});

# php - 从外部代码获取 Magento 运输报价/费率列表

> ID：12952870
> 
> 赞同：0
> 
> 时间：2012-10-18T10:45:54.177
> 
> 标签：php, magento, magento-1.7

我有一些代码位于 Magento 旁边的文件夹中。我正在拉着`Mage.php`做一些事情。我希望能够在我的代码中获取某种运输报价。我一直在寻找网络，我正在努力寻找任何对它有意义的地方。

请有人可以告诉我实现这一目标的最有效方法吗？

我只有这些信息可用于获取价格：

```
Product ID eg, 123
Quantity eg, 1020
Country Code eg, GB
Zip code if needed eg, SY12 6AX 
```

我想得到以下信息：

```
Rate eg, £2.50
Title eg, Royal Mail Special Delivery
ID eg, 6 
```

然后我想用我的代码上的选项填充一个单选列表，以便可以选择它们。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:23:38.553

好的，我得到它的工作。这是以编程方式从 magento 获取运输报价的最终代码。

该函数将返回特定产品、数量、国家/地区、邮政编码的所有可用运费。该代码不包括免费送货，这可以通过删除来撤消`if($_rate->getPrice() > 0) { ...`

```
<?php
require_once("Mage.php");
umask(0);
ini_set('display_errors',true); Mage::setIsDeveloperMode(true);
Mage::app();

function getShippingEstimate($productId,$productQty,$countryId,$postcode ) {

    $quote = Mage::getModel('sales/quote')->setStoreId(Mage::app()->getStore('default')->getId());
    $_product = Mage::getModel('catalog/product')->load($productId);

    $_product->getStockItem()->setUseConfigManageStock(false);
    $_product->getStockItem()->setManageStock(false);

    $quote->addProduct($_product, $productQty);
    $quote->getShippingAddress()->setCountryId($countryId)->setPostcode($postcode); 
    $quote->getShippingAddress()->collectTotals();
    $quote->getShippingAddress()->setCollectShippingRates(true);
    $quote->getShippingAddress()->collectShippingRates();

    $_rates = $quote->getShippingAddress()->getShippingRatesCollection();

    $shippingRates = array();
    foreach ($_rates as $_rate):
            if($_rate->getPrice() > 0) {
                $shippingRates[] =  array("Title" => $_rate->getMethodTitle(), "Price" => $_rate->getPrice());
            }
    endforeach;

    return $shippingRates;

}
echo "<pre>";
// product id, quantity, country, postcode
print_r(getShippingEstimate(1098,100,"GB","SY21 7NQ"));
echo "</pre>"; 
```

这可以放入这样的下拉列表中：

```
$results = getShippingEstimate(1098,100000,"GB","SY21 7NQ");
$count = -1;
echo "<select>";
foreach ($results as $result):
$count++;
?>
<option value="<?=$count?>"><?=$result["Title"]." - £".$result["Price"]?></option>
<?php
endforeach;
echo "</select>" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:28:54.663

对于运输报价，您需要将实际报价作为现有的和基本的地址数据（国家、地区、邮编）填充到帐单和送货地址，然后您可以询问费率：

```
$quote()->getShippingAddress()->getGroupedAllShippingRates(); 
```

请注意，这也取决于运输方式，以及事实上它们是否允许您在已经计算或即将计算报价时给出费率

# wpf - 将视图模型中的变量绑定到另一个视图模型中的不同变量

> ID：12952871
> 
> 赞同：0
> 
> 时间：2012-10-18T10:46:02.487
> 
> 标签：wpf, mvvm, binding, viewmodel

我正在使用 MVVM 模式实现 WPF 应用程序。

该应用程序基本上是一个通信面板（comms 面板），上面放置了控制部件（例如，拨号盘、内部通信线路等）。控件小部件也已使用 MVVM 模式实现，因为这使我们能够轻松地单独测试它们。

我有这个“拨号盘”控件小部件，它在其视图模型中公开了一个 DialedNumber 公共字段：

```
public string DialedNumber
    {
        get { return _dialPadModel.DialedNumber; }
        set
        {
            _dialPadModel.DialedNumber = value;
            RaisePropertyChanged("DialedNumber");
        }
    } 
```

“拨号盘”控件小部件还通过视图中的公共字段公开其视图模型：

```
public DialPadViewModel DialPadViewModel
    {
        get { return DataContext as DialPadViewModel; }
    } 
```

它还通过它的视图公开它，它只是从视图模型中的公共字段写入/读取：

```
public string DialedNumber
    {
        get
        {
            return DialPadViewModel.DialedNumber;
        }
        set
        {
            DialPadViewModel.DialedNumber = value;
        }
    } 
```

DialPad 放置在一个通讯面板中（也使用 MVVM 实现），它的视图模型中有一个 DialedPABXNumber 公共字段：

```
public string DialedPABXNumber
    {
        get { return _dialedPABXNumber; }
        set
        {
            _dialedPABXNumber = value;
            OnPropertyChanged("DialedPABXNumber");
        }
    } 
```

现在，我希望能够将 DialPad 中的 DialedNumber 字段链接到 comms 面板中的 DialedPABXNumber 字段。但是，为了做到这一点，我正在努力想出正确的 XAML 语法。我的方法是这样的：

```
<PanelControls:DialPad x:Name="MyDialPad2" DialPadViewModel.DialedNumber="{Binding Path=CommsPanelViewModel.DialedPABXNumber, Mode=OneWayToSource}"/> 
```

通过这样做，我在加载通信面板 XAML 时遇到运行时异常。进一步来说：

> 无法设置未知成员“{http://schemas.microsoft.com/winfx/2006/xaml/presentation}DialPadModel.DialedNumber”。

如何在 XAML 中指定我想访问 DialPadViewModel.DialedNumber？

编辑：添加有关组件如何组合在一起的背景信息。应用程序的主窗口有两个子窗口：左侧的控制面板和适当的通讯面板，它是动态加载的。

```
<Window x:Class="Comms.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Views="clr-namespace:Comms.View"
    xmlns:ViewModel="clr-namespace:Comms.ViewModel"
    Title="Comms" Height="350" Width="525" Closing="WindowClosing">
<Window.Resources>
    <DataTemplate x:Name="CommsControlPanelViewModel" DataType="{x:Type ViewModel:CommsControlPanelViewModel}">
        <Views:CommsControlPanelView x:Name="CommsControlPanelView"/>
    </DataTemplate>
    <DataTemplate x:Name="CommsPanelViewModel" DataType="{x:Type ViewModel:CommsPanelViewModel}">
        <Views:CommsPanelView x:Name="CommsPanelView"/>
    </DataTemplate>
</Window.Resources>

<StackPanel x:Name="Layout" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Orientation="Horizontal">
    <ContentControl Content="{Binding CommsControlPanelView}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
    <ContentControl Content="{Binding CommsPanelView}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
</StackPanel> 
```

通讯面板是动态加载的。这是面板的 XAML 文件：

```
<Border x:Name="CommsPanelBorder"
    Style="{DynamicResource BorderTemplate}"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:PanelControls="clr-namespace:CommsPanelControlsLib.View;assembly=CommsPanelControlsLib"
    VerticalAlignment="Top">
<StackPanel>
    <!-- PABX Dial Pad -->
    <StackPanel Orientation="Horizontal">
    <PanelControls:DialPad x:Name="MyDialPad2" DialPadViewModel.DialedNumber="{Binding Path=CommsPanelViewModel.DialedPABXNumber, Mode=OneWayToSource}"/>
    </StackPanel>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:24:02.807

我对您要执行的操作感到有些困惑，但是听起来您正在尝试将一个对象的属性绑定到另一个对象中的属性

首先，有两种类型的属性：常规属性和依赖属性。如果要设置具有绑定的属性，则它必须是 a `DependencyProperty`，`DialPadViewModel.DialedNumber`如果该值将由您拥有的绑定提供，则必须是依赖属性。

其次，您的实际绑定正在尝试引用`CommsPanelViewModel.DialedPABXNumber`. 这实际上将绑定到`MyDialPad2.DataContext.CommsPanelViewModel.DialedPABXNumber`，如果我正确理解您的代码，我认为它不是有效属性。

我认为您要做的是找到`CommsPanelViewModel`DataContext for`CommsPanelView`并绑定到它的`DialedPABXNumber`属性。

为此，您首先需要更改绑定的源以`CommsPanelView`通过[RelativeSource](http://msdn.microsoft.com/en-us/library/ms743599.aspx)或[ElementName](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.elementname.aspx)绑定找到您，并且您需要设置`Path`to `DataContext.DialedPABXNumber`，因为`DataContext`for`CommsPanelView`是 a `CommsPanelViewModel`，并且该视图模型具有属性`DialedPABXNumber`

```
<PanelControls:DialPad x:Name="MyDialPad2" DialPadViewModel.DialedNumber="{Binding ElementName=CommsPanelView, Path=DataContext.DialedPABXNumber, Mode=OneWayToSource}"/> 
```

`CommsPanelView`也就是说，由于涉及的模板，我不确定您是否能够使用当前的 XAML 布局找到具有绑定的绑定。试一试，但如果不是这种情况，您仍然可以使用一些选项。

您可以尝试将所需的属性存储在未使用的依赖属性中，例如`Tag`属性，然后您可以使用`RelativeSource`or`ElementName`属性找到 ContentControl 并绑定到其`Tag`属性

```
<ContentControl Content="{Binding CommsControlPanelView}" Tag="{Binding CommsPanelView.DialedPABXNumber}" /> 
```

您还可以使用某种消息系统，例如 MVVM Light`Messenger`或 Prism`EventAggregator`来传递值。[（我在博客上的一篇文章中对](http://rachel53461.wordpress.com/2011/06/05/communication-between-viewmodels-with-mvvm/)这些进行了简要总结）

或者您可以链接 ViewModel 层中的两个属性，因此`CommsControlPanelViewModel`包含要存储的属性，`CommsViewModel.DialedPABXNumber`并且该属性会在需要时从 ViewModel 层本身更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:37:31.520

要绑定到属性，此属性必须是 DependencyProperty。您可以在您的视图上创建一个虚拟属性，并通过 PropertyChangedCallback 操作您的 ViewModel：

```
public static DependencyProperty TestProperty = DependencyProperty.Register("Test", typeof(string), typeof(View), new PropertyMetadata("default", new PropertyChangedCallback(TestPropertyChanged)));
public string Test
{
    get { return GetValue(TestProperty).ToString(); }
    set { SetValue(TestProperty, value); }
}
public static void TestPropertyChanged(DependencyObject obj, DependencyPropertyChangedEventArgs e)
{
    ViewModel vm= ((View)obj).DataContext;
    if (vm.Test != e.NewValue.ToString())
    {
        vm.Test = e.NewValue.ToString();
    }
} 
```

现在您可以在视图中绑定到此属性。

但我认为这违反了 MVVM 模式，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:42:27.777

在与 Blachshma 长时间交谈后（感谢 Blachshma！），我修改了 DialPad 代码，去掉了它的模型并将视图模型中的代码移动到其后面的代码中。

我在面板的 XAML 文件中使用的绑定如下：

```
<PanelControls:DialPad x:Name="MyDialPad2" DialedNumber="{Binding Path=CommsPanelViewModel.DialedPABXNumber, Mode=OneWayToSource, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}}"/> 
```

我可以确认单击拨号盘中的按钮有效地触发了 CommsPanelViewModel 中的 DialedPABXNumber 字段的更改，这正是我想要的。但是，为了做到这一点，我对 DialPad 的代码进行了一些重大修改，现在我无法对其执行单元测试。我会将问题标记为已回答，然后我会打开一个新问题来处理这个新问题。

谢谢各位的意见！

# computer-science - 结束随身携带的原因

> ID：12952883
> 
> 赞同：4
> 
> 时间：2012-10-18T10:46:40.533
> 
> 标签：computer-science

我知道如果最高位有进位，r 基数的 r-1 补码应该在进位附近结束。

但我不知道为什么它应该这样做。

我只能想它的原因可能是关于零的两个表示。

前任：

```
 1 1 1 0    (-1)
 0 1 0 1    (+5)  
 ===============
10 0 1 1  =====>(0 1 0 0)
I just can explain it from the result that because its sum is positive, and 1's complement has two representations, so it should add one. 
```

前任：

```
 1 1 1 0    (-1)
 1 0 1 0    (-5)  
 ===============
11 0 1 1  =====>(1 0 0 1)
And I cannot explain it why should add one. 
```

结束随身携带的真正原因是什么？

谢谢你阅读它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T11:06:00.207

结束进位实际上相当简单：如果您认为数字是无符号的，它会将加法运算的模数从 r ^n更改为 r ^(n –1。)为了简单起见，让我们谈谈二进制。

让我们使用四位二进制补码算法计算 (-2) + (-4)：

```
  1 1 1 0 (-2)
+ 1 1 0 0 + (-4)
--------- ------
1 1 0 1 0 (-6)

```

让我们暂时保留进位位。如果您将数字视为无符号整数，我们计算的是 14 + 12 = 26。但是，加法是模 16 完成的，所以我们得到 10，它是代表 -6 的无符号数（正确结果）。

在一个的补码中，数字有不同的表示：

```
  1 1 0 1 (-2)
+ 1 0 1 1 + (-4)
--------- ------
1 1 0 0 0 (-6)

```

同样，让我们​​将进位位保持在原位。如果你把数字看成无符号整数，我们计算的是 13 + 11 = 24。但是，由于回绕进位，加法是模 15 完成的，所以我们最终得到 9，它代表 -6（正确的结果）。

所以在四位二进制补码中，-2 相当于 14 模 16，-4 相当于 12 模 16，-6 相当于 10 模 16。

在四位反码中，-2 相当于 13 模 15，-4 相当于 11 模 15，-6 相当于 9 模 15。

**有符号零：**你得到“有符号零”的原因是因为四位有 16 个可能的数字，但如果你正在做模 15 算术，那么 0 和 15 是等价的。这里的所有都是它的。

# javascript - 为什么 /}/ 是 javascript 中的有效正则表达式？

> ID：12952886
> 
> 赞同：5
> 
> 时间：2012-10-18T10:46:44.923
> 
> 标签：javascript, regex

`/}/`是 JS 中的有效正则表达式：

```
alert('}}}'.replace(/}/g, "!")) 
```

但是，[ECMA 标准](http://es5.github.com/#x15.10.1)似乎不允许这样做：

```
PatternCharacter ::SourceCharacter but not any of:
      ^ $ \ . * + ? ( ) [ ] { } | 
```

为什么上述工作？是否普遍支持此功能？它在任何地方都有记录吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:56:18.947

小修正：这些是`RegExp`es，和纯正则表达式不同。

> 为什么上述工作？

因为您使用的 JS 实现并不严格符合 ES5 标准，该标准规定它应该引发`SyntaxError`. 正如 Bergi 评论的那样，这在[$15.10.4.1](http://es5.github.com/#x15.10.4.1)中有所描述。

> 是否普遍支持此功能？

不，如果它不在标准中，则永远不应被视为普遍支持。

> 它在任何地方都有记录吗？

可能不是，它只是未定义行为的产物。查看您测试过的任何 JS 引擎的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:03:42.623

[http://www.regular-expressions.info/characters.html](http://www.regular-expressions.info/characters.html) :

> Most regular expression flavors treat the brace **{** as a literal character, unless it is part of a repetition operator like **{1,3}**. So you generally do not need to escape it with a backslash, though you can do so if you want. An exception to this rule is the **java.util.regex package: it requires all literal braces to be escaped**.

Seems that javascript is not an exception.

# iphone - 数据库在 iphone 中格式错误 + 错误磁盘 i/o 错误

> ID：12952887
> 
> 赞同：0
> 
> 时间：2012-10-18T10:46:50.337
> 
> 标签：iphone, ios, sqlite

我有超过 5000 条记录要从服务器加载到我的应用程序并插入数据库。在成功插入后插入这些记录时，我遇到了这种错误并且我的应用程序崩溃了。

**数据库在 iPhone 中格式错误 + 错误磁盘 i/o 错误**

以下是可能有用的代码片段，这里我一个一个地获取 5 个类别中的记录并将它们插入数据库

```
 if (tag==1) {
        NSMutableDictionary *catDic=[dic valueForKeyPath:@"GetAllRecords.results.categories.category"];
        [self performSelectorInBackground:@selector(insertDataInCategoryMaster:) withObject:catDic];

        NSMutableDictionary *levelDic=[dic valueForKeyPath:@"GetAllRecords.results.levels.level"];
        [self performSelectorInBackground:@selector(insertDataInLevelMaster:) withObject:levelDic];

        NSMutableDictionary *queDic=[dic valueForKeyPath:@"GetAllRecords.results.questions.question"];

        [self performSelectorInBackground:@selector(insertDataInQueMaster:) withObject:queDic];

        [self getQueCatLevelData:2];
    }
    else if(tag==2){

        NSMutableDictionary *queDic=[dic valueForKeyPath:@"GetAllRecords.results.questions.question"];
        [self performSelectorInBackground:@selector(insertDataInQueMaster:) withObject:queDic];

        [self getQueCatLevelData:3];

    }
    else if(tag==3){

        NSMutableDictionary *queDic=[dic valueForKeyPath:@"GetAllRecords.results.questions.question"];
        [self performSelectorInBackground:@selector(insertDataInQueMaster:) withObject:queDic];

        [self getQueCatLevelData:4];
    }//and so on for 5 also 
```

在每个 insertDataInQueMaster 中，我都在做以下事情。

```
 NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];
        for(NSDictionary *queDictionary in dictionary)
        {

            NSString *strQuery = [NSString stringWithFormat:@"insert into QuestionMaster values(%d,'%@','%@',%d,%d,%d,%d,%d,0,'%@')",[[queDictionary valueForKey:@"questionid"]intValue], [queDictionary valueForKey:@"questiontext"],[queDictionary valueForKey:@"answertext"],[[queDictionary valueForKey:@"categoryid"]intValue],[[queDictionary valueForKey:@"levelid"] intValue],[[queDictionary valueForKey:@"status"]intValue],[[queDictionary valueForKey:@"RangeFrom"]intValue],[[queDictionary valueForKey:@"RangeTo"]intValue],[queDictionary valueForKey:@"Fact"]];

            [NSNumber requestWithSynchronousExcuteQuery:strQuery withReturnningError:&error];

            if(error)
            {
                NSLog(@"error description:%@",[[error userInfo] description]);
                [[NSUserDefaults standardUserDefaults]setBool:NO forKey:@"FirstTime"];
            }

        }

        count++;
        [[NSUserDefaults standardUserDefaults]setInteger:count forKey:@"CheckCount"];
        [[NSUserDefaults standardUserDefaults]synchronize];
        [pool drain]; 
```

我在 AppDelegate.m 中加载 App 时正在做这些所有事情，这也是在后台成功在数据库中插入几条记录后出现错误，所以我认为数据库打开和插入没有问题。

我希望我清楚，如果有任何困惑，请发表评论。等待回复。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:13:47.783

欢呼，我得到了简单的解决方案

我刚刚放置

```
 @synchronized(self)
  {
      //My Whole Code  for Background methods goes here
  } 
```

就是这样，它也解决了我的错误和崩溃。

@synchronized() 指令锁定一段代码以供单个线程使用。其他线程被阻塞，直到线程退出受保护的代码——也就是说，当执行继续超过 @synchronized() 块中的最后一条语句时。

@synchronized() 指令将任何 Objective-C 对象（包括 self）作为其唯一参数。

# java - 如何根据标识符实例化某个子类，还是有更好的方法？

> ID：12952890
> 
> 赞同：1
> 
> 时间：2012-10-18T10:47:10.023
> 
> 标签：java, android, instantiation

**背景：**
我目前正在开发一款游戏，其中将有几种类型的家具，如椅子、桌子或绘画供玩家互动。为此，我创建了一个抽象类`GameObject`来处理所有这些对象共有的所有内容（例如绘图、保存位置变量等）。家具将有一些不同的参数，例如宽度和高度（整数），以及当用户选择与之交互时会发生什么（例如：椅子 -> 如果玩家靠近，坐下，桌子 -> 没有，绘画->检查独立于距离）。可以从菜单中创建家具，该菜单会返回所选作品的某种标识符（当前为整数）。

**问题：**
我应该如何实现不同的家具？
一种方法是为每件家具创建一个子类。但这有两个缺点；首先很难管理这么多类，其次当创建家具时，必须以某种方式基于标识符创建正确的 GameObject 子类（请参阅后续问题）。

对我来说最合乎逻辑的选择似乎是创建一个通用类，该类在构造函数中采用宽度和高度参数，以及当用户单击对象时可以运行的可运行/其他接口。不同的值可能会存储在数据库中并根据标识符进行检索，但不同的操作仍然会出现问题，因为 Runnables 无法存储在外部，这会导致与解决方案 1 相同的问题；许多不同的类必须为当前对象选择一个。

**后续问题：** 根据家具和动作的类型，似乎可能需要具有附加方法的更高级的子类。如果是这样，那么无论前一个问题的解决方案如何，根据标识符选择实施哪一个的问题仍然存在。我不想使用巨大的 switch 语句来实例化不同的类，那么有什么办法解决这个问题吗？

*该游戏适用于 Android 平台，但未来可能会有 IOS 端口，因此特定于 java 的答案不是可取的，但可以接受。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:08:04.003

忘记泛型类；正如您在第一个选项中介绍的那样，您应该创建子类。关于你的缺点：

> 管理这么多课程会很困难

为什么？如果您创建子类，您将执行以下操作：

```
GameObject chair = new Chair(); 
```

如果你遵循通用模式，你会做这样的事情：

```
GameObject chair = new GameObject(Type.CHAIR); 
```

创建两者的努力几乎相同，但是使用第一个可以带来更多好处。不同之处在于，如果不进行大量条件验证，您将无法使用第二种方法处理不同的操作。此外，您的核心将与现有对象高度耦合，这意味着如果您更改其中一个类，则需要更改核心，反之亦然。使用第一个选项，您可以执行以下操作：

```
selectedObject.makeAction(); 
```

它会根据它保留的实例调用正确的操作。如果您遵循通用方法，它将如下所示：

```
if(selectedObject.getType() == Type.CHAIR) {
    //do char action. Notice that this ins't even a method provided by GameObject, you will need to get this from another place, since the GameObject is generic.
}     if(selectedObject.getType() == Type.TABLE) {
     //do table action
} if.... 
```

> 创建家具时，必须以某种方式基于标识符创建正确的 GameObject 子类

我没明白你的意思。您不需要基于 id 创建，您只需要创建适当的类。当您创建对象时，您已经知道对象类型，您只需要实例化正确的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:49:29.623

如果不考虑所有 if 和 but 的问题，很难为这个问题提出一个完美的设计解决方案。

但是，游戏的一个关键部分是项目（家具、绘画等）与可以对每个项目执行的操作之间的关系。这是您可以建模这种关系的方式（使用组合）：

Action : 表示游戏动作的界面。包含一个名为 performAction 的方法。

SittingAction ：实现Action 的具体类。代表坐着的游戏动作。实现 performAction 方法来定义执行坐姿动作的代码。

ExamineAction ：实现Action 的具体类。表示检查项目的游戏动作。实现 performAction 方法以定义执行检查操作的代码。

同样，您可以为可以在游戏中执行的每种动作类型定义一个动作。

GameItem ：表示游戏中项目的类。包含所有项目共有的属性，例如项目名称、宽度、宽度、深度等，以及这些属性的 getter 和 setter。GameItem '有一个' Action 类型的实例变量和一个使用 Action 参数来初始化 Action 的构造函数。GameItem 还定义了一个名为 onInteraction 的方法，您可以在用户与 GameItem 交互时调用该方法。此方法将通过调用 Action 实例变量的 performAction 方法来委派执行与 GameItem 关联的 Action 的任务。因此，任何实例化 GameItem 的类都必须将适当的 Action 传递给代表与 GameItem 关联的 Action 的 GameItem 构造函数。当用户与项目交互时，只需调用 onIneraction 方法。

GameController ：监听用户事件并调用与之交互的 GameItem 上的 onIneraction 方法的类。

而已。干净简单。不需要任何 if else 语句来检查对什么项目执行什么操作。Simpy 使用适当的 Action 实例实例化您的所有 GameItem 实例，并让您的 GameController 监听用户输入，调用与之交互的 GameItem 上的 onIneraction 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T11:04:15.437

I'd definitely go with having subclasses for the differente types of furniture.

Instead of the menu returning an identifier, you may think on the menu returning the class name you need to instantiate (I suppose when displaying the menu you know which class will represent each of the entries). This way you avoid the identifier issue you are describing.

Regarding the actions that can be done on each piece, you can use interfaces :

Each furniture class will implement a set of interfaces depending on their posible actions :

```
Interface IExaminable {
  public <result> examine();
}

Interface IBuyable {
  public <result> buy();
} 
```

and then you can easily check if an object is examinable with the isntanceof operator (if needed).

Hope it helps

# ios - 透明 OpenGL CAEAGLLayer

> ID：12952896
> 
> 赞同：1
> 
> 时间：2012-10-18T10:47:21.190
> 
> 标签：ios, opengl-es, eaglview, caeagllayer

我试图渲染一个 opengl 视图（CAEAGLLayer）透明，这样我就可以在它后面放一个 UIView。我正在使用以下设置来实现透明的 opengl 背景。

```
CAEAGLLayer* layer = (CAEAGLLayer*)eaglLayer;
layer.opaque = NO;
layer.drawableProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                            [NSNumber numberWithBool:FALSE], kEAGLDrawablePropertyRetainedBacking,
                            kEAGLColorFormatRGBA8, kEAGLDrawablePropertyColorFormat,
                            nil
                            ]; 
```

我的问题是我的 opengl 场景中的对象现在是透明的，我可以看穿它们（大约 50% 的透明度）。

如何使opengl场景的背景透明，同时场景中的对象仍然不透明。

请注意，所有图层、UIView 和 UIWindows 的 alpha 值为 1.0，并且场景中的片段着色器不会导致问题，因为当 layer.opaque 设置为 YES 时，一切都是纯色。我还应该补充一点，如果有帮助的话，这是一个统一的项目。

编辑：

部分代码由统一设置。

```
int OpenEAGL_UnityCallback(UIWindow** window, int* screenWidth, int* screenHeight,  int* openglesVersion)
{
    CGRect rect = [[UIScreen mainScreen] bounds];

    // Create a full-screen window
    _window = [[UIWindow alloc] initWithFrame:rect];
    EAGLView* view = [[EAGLView alloc] initWithFrame:rect];
    UnityViewController *controller = [[UnityViewController alloc] init];
    sGLViewController = controller;

#if defined(__IPHONE_3_0)
    if( _ios30orNewer )
        controller.wantsFullScreenLayout = TRUE;
#endif

    controller.view = view;

    CreateSplashView( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone ? (UIView*)_window : (UIView*)view );
    CreateActivityIndicator(_splashView);

    // add only now so controller have chance to reorient *all* added views
    [_window addSubview:view];
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
        [_window bringSubviewToFront:_splashView];

    if( !UnityUseOSAutorotation() )
    {
        _autorotEnableHandling = true;
        [[NSNotificationCenter defaultCenter] postNotificationName: UIDeviceOrientationDidChangeNotification object: [UIDevice currentDevice]];
    }

    // reposition activity indicator after we rotated views
    if (_activityIndicator)
        _activityIndicator.center = CGPointMake([_splashView bounds].size.width/2, [_splashView bounds].size.height/2);

    int openglesApi =
#if defined(__IPHONE_3_0) && USE_OPENGLES20_IF_AVAILABLE
    kEAGLRenderingAPIOpenGLES2;
#else
    kEAGLRenderingAPIOpenGLES1;
#endif

    for (; openglesApi >= kEAGLRenderingAPIOpenGLES1 && !_context; --openglesApi)
    {
        if (!UnityIsRenderingAPISupported(openglesApi))
            continue;

        _context = [[EAGLContext alloc] initWithAPI:openglesApi];
    }

    if (!_context)
        return false;

    if (![EAGLContext setCurrentContext:_context]) {
        _context = 0;
        return false;
    }

    const GLuint colorFormat = UnityUse32bitDisplayBuffer() ? GL_RGBA8_OES : GL_RGB565_OES;

    if (!CreateWindowSurface(view, colorFormat, GL_DEPTH_COMPONENT16_OES, UnityGetDesiredMSAASampleCount(MSAA_DEFAULT_SAMPLE_COUNT), NO, &_surface)) {
        return false;
    }

    glViewport(0, 0, _surface.w, _surface.h);
    [_window makeKeyAndVisible];
    [view release];

    *window = _window;
    *screenWidth = _surface.w;
    *screenHeight = _surface.h;
    *openglesVersion = _context.API;

    _glesContextCreated = true;

    return true;
}

void PresentSurface(EAGLSurfaceDesc* surface)
{
    if(_skipPresent)
    {
        UNITY_DBG_LOG ("SKIP PresentSurface:\n");
        return;
    }
    UNITY_DBG_LOG ("PresentSurface:\n");

    EAGLContext *oldContext = [EAGLContext currentContext];
    if (oldContext != _context)
        [EAGLContext setCurrentContext:_context];

    PreparePresentSurfaceGLES(surface);

    // presentRenderbuffer presents currently bound RB, so make sure we have the correct one bound
    GLES_CHK( glBindRenderbufferOES(GL_RENDERBUFFER_OES, surface->renderbuffer) );
    if(![_context presentRenderbuffer:GL_RENDERBUFFER_OES])
        printf_console("failed to present renderbuffer (%s:%i)\n", __FILE__, __LINE__ );

    AfterPresentSurfaceGLES(surface);

    if(oldContext != _context)
        [EAGLContext setCurrentContext:oldContext];
}

bool CreateSurface(EAGLView *view, EAGLSurfaceDesc* surface)
{
    CAEAGLLayer* eaglLayer = (CAEAGLLayer*)surface->eaglLayer;
    assert(eaglLayer == [view layer]);

    CGSize newSize = [eaglLayer bounds].size;
    newSize.width  = roundf(newSize.width);
    newSize.height = roundf(newSize.height);

#ifdef __IPHONE_4_0
    int resolution = UnityGetTargetResolution();

    if (    (resolution == kTargetResolutionNative || resolution == kTargetResolutionHD)
         && [view respondsToSelector:@selector(setContentScaleFactor:)]
         && [[UIScreen mainScreen] respondsToSelector:@selector(scale)]
       )
    {
            CGFloat scaleFactor = [UIScreen mainScreen].scale;
            [view setContentScaleFactor:scaleFactor];
            newSize.width = roundf(newSize.width * scaleFactor);
            newSize.height = roundf(newSize.height * scaleFactor);
            UnitySetInputScaleFactor(scaleFactor);
    }
#endif

    surface->w = newSize.width;
    surface->h = newSize.height;

    UNITY_DBG_LOG ("CreateWindowSurface: FBO\n");
    CreateSurfaceGLES(surface);
    GLES_CHK( glBindRenderbufferOES(GL_RENDERBUFFER_OES, surface->renderbuffer) );

    return true;
}

extern "C" bool AllocateRenderBufferStorageFromEAGLLayer(void* eaglLayer)
{
    return [_context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(CAEAGLLayer*)eaglLayer];
}

extern "C" void InitEAGLLayer(void* eaglLayer, bool use32bitColor)
{
    CAEAGLLayer* layer = (CAEAGLLayer*)eaglLayer;

    const NSString* colorFormat = use32bitColor ? kEAGLColorFormatRGBA8 : kEAGLColorFormatRGB565;

    layer.opaque = NO;
    layer.drawableProperties =  [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithBool:FALSE], kEAGLDrawablePropertyRetainedBacking,
                                    colorFormat, kEAGLDrawablePropertyColorFormat,
                                    nil
                                ];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:15:41.877

好的，问题似乎与PSD有关。Unity 允许您在 psd 中加载纹理。他们正在制造奇怪的透明度问题。我把它们换成了jpegs，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:52:13.950

清除 alpha < 1 的帧缓冲区，即

```
glClearColor(r, g, b, alpha); // where alpha < 1
glClear(GL_COLOR_BUFFER_BIT | … ); 
```

对于完全透明，您需要 alpha = 0。

# animation - 动画快照

> ID：12952902
> 
> 赞同：1
> 
> 时间：2012-10-18T10:47:38.973
> 
> 标签：animation, unity3d

我有一个角色，它有一个循环的空闲或行走动画。在不同的图层上，我播放拍摄动画（使用 AddMixingTransform）。我在输入管理器中使用了一个事件，该事件向我的 WeaponAnimation 脚本发送信号以开始播放射击动画。这是一个循环动画。当我收到停止拍摄信号时，我将 WrapMode 设置为一次，然后在拍摄动画的剩余时间执行 Animation.Blend 以将权重设为 0。

当我立即射击并释放鼠标时，它会播放动画，直到与我的空闲动画平滑混合。但是当我在鼠标循环后松开鼠标时，动画会捕捉到没有混合的空闲动画。

我尝试在动画结束时使用 AnimationEvent 来调用我的 EndAnim 函数并检查我的 wrapMode 是否为 ClampForever，然后它混合到权重 0 并在混合完成后停止动画。这导致相同的行为。

谁能弄清楚出了什么问题？

如果你想要一些代码，问它哪一部分。因为我不想发布整个脚本，所以会很长；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:26:22.400

看起来你正在做大量的手工工作来混合这些动画。

您可以使用统一的内置交叉淡入淡出。

[http://docs.unity3d.com/Documentation/ScriptReference/Animation.CrossFade.html](http://docs.unity3d.com/Documentation/ScriptReference/Animation.CrossFade.html)

# mysql - MySQL ORDER BY - 减慢查询

> ID：12952903
> 
> 赞同：1
> 
> 时间：2012-10-18T10:47:39.977
> 
> 标签：mysql, performance, sql-order-by

问题与在两个表中保存列表数据和潜在客户数据的列表站点有关。在查询列表和每个列表的潜在客户总数时，添加 ORDER BY 后结果非常慢。如果没有 ORDER BY，检索结果会非常快。任何有关重组以下查询的建议或帮助都会很棒！仅供参考，有 20k 个列表和 100k 个潜在客户。

```
SELECT ls.*, IFNULL(ld.total_leads, 0) AS total_leads
FROM listing ls 
LEFT JOIN (SELECT listing_id, COUNT(listing_id) AS total_leads 
            FROM lead GROUP BY listing_id) ld
ON (ls.listing_id = ld.listing_id)
ORDER BY ls.listing_id DESC LIMIT 0,20 
```

解释：

```
id select_type table type pos key ke ref rows Extra 
1 PRIMARY ls ALL NULL NULL NULL NULL 17215 Using temporary; Using filesort 
1 PRIMARY 2> ALL NULL NULL NULL NULL 12865 
2 DERIVED lead ALL NULL NULL NULL NULL 117830 Using temporary; Using filesort 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:54:22.263

**简短回答：** 在`listing_id`.

**（半）长答案：** 这将加快该列的排序（但减慢插入速度）。更多信息：[http ://dev.mysql.com/doc/refman/5.5/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.5/en/order-by-optimization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:56:31.503

在两个表的 listing_id 上创建索引。

当您包含 order by 子句时，dabatase 必须以正确的顺序构建行列表，然后按该顺序返回数据。这可能需要大量额外的处理，从而转化为额外的时间。

对大量列进行排序可能需要更长的时间，而您的查询可能会返回这些列。在某些时候，您将用完缓冲区空间，数据库将不得不开始交换，性能将下降。

尝试返回更少的列（指定您需要的列而不是 Select *）并查看查询是否运行得更快。

# android - 左侧的标准操作栏和图标

> ID：12952908
> 
> 赞同：2
> 
> 时间：2012-10-18T10:48:06.357
> 
> 标签：android, android-layout, android-actionbar

我对 android 中的标准操作栏有疑问。我想创建左侧有：图标、图标、文本、图标和右侧：7 个图标的栏。这有可能吗？如果是，如何？如果左侧的文字很长，我想在右侧隐藏一些图标。你有什么建议或想法或例子吗？谢谢！

# url-rewriting - Nginx 重写规则 + CSS & JS

> ID：12952910
> 
> 赞同：2
> 
> 时间：2012-10-18T10:48:13.343
> 
> 标签：url-rewriting, nginx, webserver

我正在使用 Nginx 和一些重写规则，主要用于漂亮的 url。这是我的重写规则：

```
rewrite ^/([a-zA-Z0-9]+)?$                /index.php?module=$1 last;
rewrite ^/([a-zA-Z0-9]+)/([a-zA-Z0-9]+)?$ /index.php?module=$1&pid=$2 last; 
```

重写规则有效，但它们也影响了我的 .css 和 .js 文件。我的 .css 和 .js 文件位于我的网络服务器根目录中名为 /inc/static 的文件夹中。

示例： [http ://example.com/signup/member](http://example.com/signup/member)

现在我的 .css 和 .js 文件的路径也更改为 /signup/inc/static。

我可以为 .css 和 .js 文件使用静态子域，这可能会解决我的问题，但我也在使用带有证书的 https，因此如果我包含来自[https://static.example.com/的文件，我会收到警告js/jquery.js](https://static.example.com/js/jquery.js)例如，因为证书不会被签名。

有什么想法可以解决这个问题吗？

干杯!

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T14:54:07.427

我猜您在请求 CSS/JS 文件时使用的是相对地址，例如：

```
<script src="inc/static/myscript.js" /> 
```

您需要使用绝对地址，即使用前面的斜杠：

```
<script src="/inc/static/myscript.js" /> 
```

# c++ - 矢量::push_back 不适用于非默认构造函数

> ID：12952912
> 
> 赞同：0
> 
> 时间：2012-10-18T10:48:23.203
> 
> 标签：c++, qt

我有一个 `Controls`具有默认构造函数和复制构造函数和其他构造函数的类，以及一个赋值运算符，我想使用向量创建我的类的数组。当我调整矢量大小时，我会正确初始化对象；但是当我想使用非默认构造函数创建我的对象时，我得到了这个错误，

> 纯虚方法调用 terminate 调用时没有活动异常

```
Controls.h

class Controls : public QObject
{

private:

    QHBoxLayout Layout ;
    string Controlname;
    std::auto_ptr<QLabel> Label ;
    std::auto_ptr<QSlider> Slider ;
    std::auto_ptr<QSpinBox> Spin ;

public:

    Controls(QLayout &Parent , string name , const int &Default_value);
    Controls(const Controls &copy);
    Controls();
    ~Controls();

    QLabel *const Get_Label()const { return Label.get() ; }
    QSlider *const Get_Slider()const { return Slider.get() ; }
    QSpinBox *const Get_Spin()const { return Spin.get() ; }
    QHBoxLayout *const Get_Layout() {return &Layout;}

    void SetValue(const int &newvalue);

    Controls &operator= (const Controls &copy);

}; 
```

控件.cpp

```
Controls &Controls::operator= (const Controls &copy)
{
    Label = std::auto_ptr<QLabel> ( new QLabel() ) ;
    Slider = std::auto_ptr<QSlider> ( new QSlider() ) ;
    Spin = std::auto_ptr<QSpinBox> ( new QSpinBox() ) ;

    Slider->setValue(copy.Get_Slider()->value());
    Slider->setOrientation(Qt::Horizontal);
    Label->setText(QString ("unamed"));
    Spin->setValue(copy.Get_Spin()->value());

    Layout.addWidget(Label.get() , 0 , 0);
    Layout.addWidget(Slider.get() , 0 , 0);
    Layout.addWidget(Spin.get() , 0 , 0);

    QObject::connect(Slider.get() , SIGNAL(valueChanged(int) ) , Spin.get() , SLOT(setValue(int)));
    QObject::connect(Spin.get() , SIGNAL(valueChanged(int) ) , Slider.get() , SLOT(setValue(int)));

    return *this ;
}
Controls::Controls(const Controls &copy)
{
    *this = copy ;
}
Controls::Controls()
{

    Label = std::auto_ptr<QLabel> ( new QLabel() ) ;
    Slider = std::auto_ptr<QSlider> ( new QSlider() ) ;
    Spin = std::auto_ptr<QSpinBox> ( new QSpinBox() ) ;

    Slider->setValue(0);
    Slider->setOrientation(Qt::Horizontal);
    Label->setText(QString ("unamed"));
    Spin->setValue(0);

    Layout.addWidget(Label.get() , 0 , 0);
    Layout.addWidget(Slider.get() , 0 , 0);
    Layout.addWidget(Spin.get() , 0 , 0);

    QObject::connect(Slider.get() , SIGNAL(valueChanged(int) ) , Spin.get() , SLOT(setValue(int)));
    QObject::connect(Spin.get() , SIGNAL(valueChanged(int) ) , Slider.get() , SLOT(setValue(int)));
}
Controls::Controls(QLayout &Parent , string name , const int &Default_value)
{
    Controlname = name ;

    Label = std::auto_ptr<QLabel> ( new QLabel() ) ;
    Slider = std::auto_ptr<QSlider> ( new QSlider() ) ;
    Spin = std::auto_ptr<QSpinBox> ( new QSpinBox() ) ;

    Slider->setValue(Default_value);
    Slider->setOrientation(Qt::Horizontal);
    Label->setText(QString (name.c_str()));
    Spin->setValue(Default_value);

    Layout.addWidget(Label.get() , 0 , 0);
    Layout.addWidget(Slider.get() , 0 , 0);
    Layout.addWidget(Spin.get() , 0 , 0);

    QObject::connect(Slider.get() , SIGNAL(valueChanged(int) ) , Spin.get() , SLOT(setValue(int)));
    QObject::connect(Spin.get() , SIGNAL(valueChanged(int) ) , Slider.get() , SLOT(setValue(int)));

    Parent.addItem(&Layout);

}

void Controls::SetValue(const int &newvalue)
{
    Slider.get()->setValue(newvalue);
}
Controls::~Controls()
{

} 
```

主.cpp ......

```
 vector <Controls> i ;
      i.resize(2 ); // this is work 

     i.push_back(Controls(layout , "WHITE_BALANCE_RED_V" ,12);// this is not working 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:02:53.750

另外，我认为问题出在您的 auto_ptr 变量上。您应该检查它是否真的是您想要处理对象指针的方式。我宁愿坚持使用 shared_ptr 或 unique_ptr。然而，在后一种情况下，您根本不想拥有复制构​​造函数，因为指针可能只有一个所有者。

[C++ std::auto_ptr 复制构造函数](https://stackoverflow.com/questions/3971818/c-stdauto-ptr-copy-constructor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:04:35.520

我不确定您是否正确实现了复制语义，并且将其`std::auto_ptr`用作数据成员是一种“警告标志”。

你`Controls`真的可以深度复制吗？

也许您应该只使用`scoped_ptr`而不是`auto_ptr`数据成员，禁止复制声明*私有*复制构造函数和*私有* `operator=`，并使用`vector<shared_ptr<Controls>>`？

（或者使用 C++11 和移动语义，所以使用`unique_ptr`代替`auto_ptr`，并且只使用编译器自动生成的移动操作？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:06:59.443

`std::vector`这与非默认构造函数无关。您没有提供整个代码，但我认为这是上[一个问题](https://stackoverflow.com/questions/12929533/stdvector-do-not-create-list-of-my-class-type/12930251#12930251)的延续。

您`Controls::operator=`的无效，它会创建 的副本`QWidgets`，并将它们放入全新的`QLayout`. `Controls`您传递给`push_back`的对象是在调用后被销毁的临时对象，并且它的副本被放入向量中。但是被破坏的对象的`QWidget`成员被放入`QLayout`，它没有被破坏，并且被添加到您尝试显示的小部件中（`Panel`）。临时`Controls`对象被销毁后，`Panel->show()`调用 Panel 的`QLayout`方法来尝试访问已删除的小部件。

你真的需要在你的向量中保存你的对象的**副本吗？**`Controls`如果您存储指针，那将解决您的问题。为什么你需要那个向量？

再一次，**不要**使用`auto_ptr`，它已被弃用，您不需要它来正确管理`QObjects`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T11:10:58.413

使用时，`auto_ptr`您应该使用`release`不`get`将指针传递给新所有者：

不是这个`Controls::Controls(QLayout &Parent , string name , const int &Default_value)`：

```
Layout.addWidget(Label.get() , 0 , 0); 
```

但这：

```
Layout.addWidget(Label.release() , 0 , 0); 
```

否则 - 您`auto_ptr`正在删除此构造函数范围末尾的指针。

# c++ - 如何为 Fedora 安装 g++？

> ID：12952913
> 
> 赞同：198
> 
> 时间：2012-10-18T10:48:23.497
> 
> 标签：c++, linux, g++, fedora, dnf

如何`g++`为 Fedora Linux 安装？我一直在搜索`dnf`要安装的命令，`g++`但没有找到任何东西。

我该如何安装它？

我已经安装了`gcc`

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-10-18T10:50:16.073

您要查找的包名称令人困惑[`gcc-c++`](http://www.rpmfind.net/linux/rpm2html/search.php?query=gcc-c%2b%2b)。

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2012-10-18T10:50:39.213

而不是 g++ 你必须写 gcc-c++

```
sudo dnf install gcc-c++ 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-10-18T10:52:19.690

你应该执行：

```
dnf install gcc-c++ 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-05-28T08:05:54.910

我有同样的问题。至少我可以用这个来解决它：

```
sudo yum install gcc gcc-c++ 
```

希望它也能解决你的问题。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-03-30T02:50:46.737

在终端模拟器中运行以下命令：

```
sudo dnf install gcc-c++ 
```

输入密码，就是这样...

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-12-12T03:08:19.500

尝试 `sudo dnf update`然后 `sudo dnf install gcc-c++`

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-11-15T09:37:42.853

由于 Fedora 22 yum 已被弃用，因此其他答案中给出的命令实际上会启动“Dandified yum”，即`dnf`. 所以在最近的发行版中安装 g++ 的新命令是

```
su -c "dnf install gcc-c++" 
```

截至 2015 年 11 月，这将安装 5.1.1 版本。
另请注意，在 Fedora 23 中，当我发出命令时`g++ -v`，Fedora 会自动询问我是否要安装 gcc-c++ 包。我认为那很好。（安装后它还`g++ -v`为我运行了命令）
我能做的唯一选择是，`* Downloading packages...`如果您的互联网连接速度较慢，您只会收到您可能不喜欢的消息，而不是进度指示器.

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-01-29T05:11:21.410

在较新的发行版中，您只需键入命令作为打击

```
su root
dnf update
dnf install gcc-c++ 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-06T06:58:43.937

只需制作一个示例“Hello World”程序并尝试在终端中使用“g++ sam.cpp”编译它，它会询问您是否要下载 g++ 包。按 y 安装。

# android - Zxing Reader 在用户中安装

> ID：12952917
> 
> 赞同：0
> 
> 时间：2012-10-18T10:48:32.923
> 
> 标签：android, zxing

我想在我的 android 应用程序中实现条形码阅读器。如果我在我的应用程序中使用 Zxing，我的用户是否也需要下载 Zxing？或者我可以将代码集成到应用程序中，这样用户就不需要单独下载了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:15:22.517

我认为您正在谈论基于 Zxing 库的条形码扫描仪应用程序。您的应用程序将通过 Intent 调用 Barcode Scanner 并取回结果。因此，您必须捕获 ActivityNotFoundException。您可以使用 IntentIntegrator，它会为您完成所有这些工作：[IntentIntegrator](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:06:36.653

您可以通过 Intent 进行集成，这不需要嵌入库。如果应用程序不存在，提供的集成代码将处理安装应用程序。[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:55:35.830

我认为用户必须在他们的设备中安装 Zxing 条码阅读器应用程序才能使用条码阅读器。

另请参阅[此答案。](https://stackoverflow.com/a/4854637/1405983)

# c# - 在 CRM 4.0 中检索单个 Guid

> ID：12952918
> 
> 赞同：3
> 
> 时间：2012-10-18T10:48:33.543
> 
> 标签：c#, dynamics-crm, dynamics-crm-4

我是新手`CRM (version 4.0)`，我正在尝试根据给定的年份（也存储在实体中）返回“yearid”指南。到目前为止，我得到了：

```
 public static Guid GetYearID(string yearName)
    {

        ICrmService service = CrmServiceFactory.GetCrmService();

        // Create the query object.
        QueryExpression query = new QueryExpression("year");
        ColumnSet columns = new ColumnSet();
        columns.AddColumn("yearid");
        query.ColumnSet = columns;       

        FilterExpression filter = new FilterExpression();

        filter.FilterOperator = LogicalOperator.And;
        filter.AddCondition(new ConditionExpression
        {
            AttributeName = "yearName",
            Operator = ConditionOperator.Equal,
            Values = new object[] { yearName}
        });

        query.Criteria = filter;

    } 
```

**但我的问题是：**

A）除此之外还有哪些代码可以实际存储 Guid？
B) 使用 QueryExpression 是最有效的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:26:29.957

回复：B）使用 sql 可能更快（我不知道多少甚至是否），但我会认为在 99% 的情况下，QueryExpression 在性能方面是完全可以接受的。

回复：A）你已经很接近了，我已经完成了下面的代码。

```
public static Guid GetYearID(string yearName) 
{
    ICrmService service = CrmServiceFactory.GetCrmService(); 

    // Create the query object. 
    QueryExpression query = new QueryExpression("year"); 

    //No need to ask for the id, it is always returned
    //ColumnSet columns = new ColumnSet(); 
    //columns.AddColumn("yearid");
    //query.ColumnSet = columns;

    FilterExpression filter = new FilterExpression(); 

    filter.FilterOperator = LogicalOperator.And; 
    filter.AddCondition(new ConditionExpression 
    { 
        AttributeName = "yearName", 
        Operator = ConditionOperator.Equal, 
        Values = new object[] { yearName} 
    }); 

    query.Criteria = filter; 

    //We have to use a retrieve multiple here
    //In theory we could get multiple results but we will assume we only ever get one
    BusinessEntityCollection years = service.RetrieveMultiple(query);

    DynamicEntity year = (DynamicEntity)years.BusinessEntities.First();

    return ((Guid)year["yearid"]);
} 
```

# jquery-mobile - 无法使用 Phonegap for bada 获取生日字段

> ID：12952922
> 
> 赞同：1
> 
> 时间：2012-10-18T10:49:13.390
> 
> 标签：jquery-mobile, cordova, contacts, bada

在使用 PhoneGap 为 bada2 开发应用程序时，我遇到了以下问题：我试图参考我的电话联系人并查看他们的生日。但是当我试图获取字段生日的值时，我总是得到空值。正是因为 `alert(contacts[i].displayName)`运行顺利，联系人才接起来，我看到了这个名字。所有联系人生日已满。字段生日存在于cordova.js 中的对象联系人中。那么我做错了什么？

一个简单的例子`alert(contacts[i].birthday`返回null）：

```
var options = new ContactFindOptions();
options.multiple = true; 
options.filter = "";
var fields = ["*"];
var onError = function (contactError) {
    alert('Error!');
}
try {
  var onSuccess = function (contacts) {
    if(contacts.length != 0){
        for(var i=0; i<contacts.length; i++) {
            alert(contacts[i].displayName);  
            alert(contacts[i].birthday);  
        }
    }
  }
} catch(e) {alert("Error Occured: "+e.message);}         

navigator.contacts.find(fields, onSuccess, onError, options); 
```

# ssl - 在企业防火墙后面时，如何通过 443 远程访问 Windows Azure Web 角色？

> ID：12952923
> 
> 赞同：1
> 
> 时间：2012-10-18T10:49:18.743
> 
> 标签：ssl, azure, firewall, remote-desktop, webrole

我们正在尝试在企业防火墙后面将桌面远程访问到 Windows Azure Web 角色。这对我们来说非常重要，用于开发和调试目的。使用模拟器无法测试我们正在做的所有工作。

所有开发人员都可以在家中访问我们设置的角色，添加防火墙规则以临时访问各个角色也可以，但我们需要安全团队更满意的长期解决方案。

我们发现提到可以通过端口 443 设置远程访问，但是我们还没有找到足够好的东西来引导我们完成它，或者给我们足够的信息来弄清楚如何自己做。

有人能帮忙吗？非常感谢有用文章的链接和/或一些好的回复指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:55:58.383

好吧，你有一个棘手的问题要解决。RDP 在默认的 TCP 端口 3389 上工作。最简单的方法是您的网络管理员将出站 TCP 3389 开放到[指定 DataCenter 的 IP 地址范围](http://www.microsoft.com/en-us/download/details.aspx?id=29840)。

如果这不起作用，第二个简单的方法是使用[Windows Azure Connect](http://www.windowsazure.com/en-us/home/features/networking/)（[这里有一些演示该功能的视频](http://www.youtube.com/watch?v=uc3IievI774)）。尽管它仍处于 BETA/CTP 中，但它非常适合您的场景。当然，如果您的公司防火墙允许传出 IPSEC 协议。

您拥有的最后一个选项是真正的 Windows Azure 虚拟网络，但为此您已要求系统管理员在**受支持的硬件路由器**上配置 IPSEC 隧道（目前支持某些 CISCO 和 Juniper 路由器）。

我建议尝试协商选项一。

PS这里有人可能会说，嘿，我们可以在我们部署的角色上更改RDP端口！你当然可以通过启动任务来做到这一点。[以下是如何更改监听 RDP 的端口](http://support.microsoft.com/kb/306759)。**但是**，我强烈建议您不要这样做。原因是当您为 Windows Azure 云服务启用 RDP 时，您不只是连接到角色实例。有一个特殊的系统模块“RemoteForwarder”，它自动安装在一个角色实例上，它将 RDP 连接路由到适当的实例。而这个 RemoteForwarder 只能在端口 3389 上工作。所以这就是我说“不，你不能真正移动 Windows Azure***云服务***中的 RDP 端口”的地方，你必须接受我提到的三个选项之一。

# magento - Varien_Object $this->_data 是一个对象而不是数组引起的 Magento 警告

> ID：12952930
> 
> 赞同：1
> 
> 时间：2012-10-18T10:49:41.597
> 
> 标签：magento

我得到了 Magento 1.7，我得到了这个错误`Warning: array_keys() expects parameter 1 to be array, object given in ~/lib/Varien/Object.php on line 117`。它在我安装的插件上，但我不知道如何修复它。

这条线是

```
$existedShortKeys = array_intersect($this->_syncFieldsMap, array_keys($this->_data)); 
```

但是`$this->_data`是一个对象......那么它是插件错误还是Magento的错误？
该插件是 Affiliate+ [http://www.magestore.com/affiliateplus](http://www.magestore.com/affiliateplus)

===== FIX ====
所以我设法修复它，这只是一个警告，所以我们只在开发人员模式下看到这个问题。
在第`app/code/local/Magestore/Affiliateplus/Block/Adminhtml/Banner/Edit/Tab/Form.phtml`7页

```
$data = array();
if(Mage::getSingleton('adminhtml/session')->getBannerData()){
    $data = Mage::getSingleton('adminhtml/session')->getBannerData();
    Mage::getSingleton('adminhtml/session')->setBannerData(null);
} elseif ( Mage::registry('banner_data')) {
    //$data =  Mage::registry('banner_data'); This line must be disabled
}
$obj = new Varien_Object($data); 
```

而已。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:56:07.793

很可能是插件错误。通常`$this->_data`不是一个对象，而是一个数组。

要获取更多详细信息，您应该发布插件的名称、代码链接和错误的回溯。或联系插件的制造商。

# c - 理解 Unix 中的 fork 机制

> ID：12952932
> 
> 赞同：0
> 
> 时间：2012-10-18T10:49:44.947
> 
> 标签：c, unix, multiprocessing, fork

我试图弄清楚父进程和子进程的行为。下面是我的代码

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>

int main(void)
{
    int i,j,cnt=0;
    int pid,present_pid;
    int a[10];
    for(i=0; i<10; i++) {
        a[i] = i;
    }

    i = 0;
    j = 5;
    present_pid = getpid();
    printf("Now in process %d\n",getpid());
    printf("\n*******************before fork******************\n");
    for(i=0;i<10;i++) {
        printf("  %d",a[i]);
    }
    printf("\n*******************before fork******************\n");

    int ret = fork();
    if(ret == 0) {
        printf("\n*******************after fork******************\n");
        printf("Now in process %d\n",getpid());
        printf("Child Process created");
        for(i=0; i<5; i++) {
            a[i]= +1;
            i++;
        }
    }
    else if(ret > 0) {
        printf("\nNow in process %d\n",getpid());
        for(j=5; j<10; j++) {
            a[j] = +1;
            j++;
        }
        wait();
    }

    for(i=0;i<10;i++) {
        printf("  %d",a[i]);
    }
    return 0;
} 
```

这是程序的输出

```
Now in process 12248

*******************before fork******************
  0  1  2  3  4  5  6  7  8  9
*******************before fork******************

*******************after fork******************
Now in process 12249
Child Process created  1  1  3  3  5  5  6  7  8  9
Now in process 12248
  0  1  2  3  4  6  6  8  8 
```

因此，最初只有一个进程 12248 派生出另一个进程（12249）。现在这两个过程并行运行（如果我错了，请纠正我）。理想情况下，孩子应该只在前半部分的数组**a的内容中****添加 1 ，而父母应该对第二部分做同样的事情。**但是正如您所看到的，输出并不像预期的那样。请给建议..

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T10:52:58.917

创建的进程`fork`是真正的重量级 OS 进程，而不仅仅是轻量级线程！创建的进程不与派生它的进程共享任何内存。相反，内存被复制（懒惰地，所谓的写时复制），所以你`a`现在实际上有两个数组，每个进程都写入他自己的`a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T11:13:11.157

您的代码中有两个小错误。通常我们甚至不会注意到它们的存在。

1.  `a[i]= +1;`哦亲爱的。我猜你想写`a[i] += 1`or `a[i]++`。
2.  冗余`i++`和`j++`。`for`循环已为您完成此操作。

纠正他们，你会得到你预期的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:34:43.970

首先对您的代码进行一些更改

```
 printf("Now in process %d\n",getpid());
        printf("Child Process created");
        for(i=0; i<5; i++)
         {
   -->         a[i]+= 1;
    -->     //   i++; //comment this line you are jumping 2 steps in this loop
         } 
```

# 至于fork()的概念

每当您执行 fork() 调用时，都会为子进程创建进程地址空间的精确副本，并且程序计数器设置为 fork() 调用之后的行

在您的情况下，在此行之后

```
 int ret = fork();
Program Counter-->    if(ret == 0)
                           { 
```

下一个，

```
Now both the process run parallel 
```

是的，父进程确实并行运行，但它在执行完成后等待`SIGCHLD`来自子进程的信号。

如果子进程返回 SIGCHLD 信号但父进程还没有收到（即父进程处于等待状态），则子进程称为`ZOMBIE`进程。

如果父进程突然中止并且子进程仍在运行（或处于`READY`状态），则子进程称为`ORPHAN`进程。在这种情况下，被调用的进程`init`负责收集子进程的状态。

最后，程序流程。父进程最初运行。

```
int ret = fork();//A child process is created 
```

然后这段代码在子进程中执行

```
 if(ret == 0)
      {
        printf("\n*******************after fork******************\n");
        printf("Now in process %d\n",getpid());
        printf("Child Process created");
        for(i=0; i<5; i++)
         {
            a[i] += 1;
            //i++;
         }
      }
       else if(ret > 0)//this condition is false in child process
      {
          // rest of code
      } 
```

//最后这被执行了

```
for(i=0;i<10;i++)
  {
    printf("  %d",a[i]);
  }
return 0;
    then child process returns SIGCHLD signal 
```

以下代码在父进程中执行

```
 else if(ret > 0)//this is true for parent process
      {
        printf("\nNow in process %d\n",getpid());
        for(j=5; j<10; j++)
          {
            a[j] = +1;
            j++;
          }
        wait();
      }

    for(i=0;i<10;i++)
      {
        printf("  %d",a[i]);
      }
    return 0; 
```

}

注意：父进程也返回 SIGCHLD 信号，该信号由`init`进程收集

每当产生一个新进程时，它默认是进程的子`init`进程**

# python - html5lib 系统要求是什么？

> ID：12952935
> 
> 赞同：0
> 
> 时间：2012-10-18T10:50:08.583
> 
> 标签：python, html5lib

我一直在阅读[html5lib](http://code.google.com/p/html5lib/)文档，但我找不到任何有关要求的信息。它可以在仅 python 的环境中运行，还是需要 C 库（如 Lxml 解析器）。

它是在 Python 3 上运行还是需要 2.x，比如 Beautiful Soup？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T03:31:06.717

它有一些外部 Python 依赖项，但不需要任何 C 库。

# wpf - 禁用 WPF WebBrowser 安全警报

> ID：12952936
> 
> 赞同：1
> 
> 时间：2012-10-18T10:50:10.193
> 
> 标签：wpf, xaml

如何在 WPF Web 浏览器中防止如下安全警报？

留言提示：

```
Do you want to view only the webpage content that was delivered securely This webpage contains content that will not be delivered using a secure HTTPS connection, which could compromise the security of the entire webpage.”“This page contains both secure and nonsecure items. Do you want to display the nonsecure items?” 
```

谢谢你。

# java - BeanIO - “字段太少，预计最少 8 个”，为什么？

> ID：12952946
> 
> 赞同：0
> 
> 时间：2012-10-18T10:50:48.600
> 
> 标签：java, parsing, text-parsing, bean-io

我在 java 中使用 BeanIO 1.2，这是我的映射：

```
 <stream name="RecordImport" format="delimited">
    <record name="Record" minOccurs="1" maxOccurs="unbounded" class="com.myclasses.Record">
      <field name="date" type="date" format="MM/dd/yyyy" trim="true"/>
      <field name="user" type="string" trim="true"/>
      <field name="storage" type="string" trim="true"/>
      <field name="product" type="string" trim="true"/>
      <field name="qty" type="bigdecimal" format="#,##0" trim="true"/>
      <field name="altQty1" type="bigdecimal" format="#,##0" trim="true"/>
      <field name="altQty2" type="bigdecimal" format="#,##0" trim="true"/>
      <field name="altQty3" type="bigdecimal" format="#,##0" trim="true"/>
    </record>
  </stream> 
```

我的文本文件如下所示：

```
3/11/2012   lpq 200011  RDD1006 8           
3/11/2012   lpq 200011  RDD1006 8           
3/11/2012   lpq 200011  RDD1006 8   1   2   3
3/11/2012   lpq 200011  RDD1006 8 
```

结果是我收到了这条消息：

```
"- Line 4: Too few fields, expected 8 minimum." 
```

现在这很奇怪，因为我确实有适当的选项卡来指示第四行有 8 个字段。这似乎是因为第 4 行中的最后一个树字段为空。我需要使它们为空的能力，但不引发此消息。同样奇怪的是，这只发生在第 4 行而不是第 1 行或第 2 行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T20:04:20.823

如果不删除尾随字段/选项卡之一，我无法重新创建您看到的问题（使用 BeanIO 1.2.5）。如果它们确实是可选的，您可以在记录定义上设置 minLength="5"。BeanIO 2.x 更灵活一些，并且允许您在尾随可选字段上设置 minOccurs="0" ......

祝你好运！

# python - 在python中递归期间修改的计数器

> ID：12952953
> 
> 赞同：0
> 
> 时间：2012-10-18T10:51:23.390
> 
> 标签：python, recursion, counter, sage

为了从列表 li 中提取所有（可能不连续的）长度为 r 的子列表，我编写了函数

```
def sublist(li, r):
    output = list()
    if r == 1:
        return [ [element] for element in li ]
    for firstelement in [1,len(li)-r+1]:
        output +=  [ [li[firstelement-1]] + smallerlist for smallerlist in   sublist(li[firstelement:],r-1) ]
    return output 
```

它似乎不起作用：

```
sage: li = [20, 17, 33, 3001]
sage: sublist(li, 2)
[[20, 17], [20, 33], [20, 3001], [33, 3001]] 
```

请注意，以 17 开头的子列表会被跳过。问题似乎是在递归调用期间计数器*firstelement被修改。*有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:07:17.320

嗯，猜猜 - 你想复制[组合](http://docs.python.org/library/itertools.html#itertools.combinations)吗？：

```
from itertools import combinations
list(combinations(el, 2))
# [(20, 17), (20, 33), (20, 3001), (17, 33), (17, 3001), (33, 3001)] 
```

您可以使用“相当于：”部分帮助编写您自己的代码：

```
def combinations(iterable, r):
    # combinations('ABCD', 2) --> AB AC AD BC BD CD
    # combinations(range(4), 3) --> 012 013 023 123
    pool = tuple(iterable)
    n = len(pool)
    if r > n:
        return
    indices = range(r)
    yield tuple(pool[i] for i in indices)
    while True:
        for i in reversed(range(r)):
            if indices[i] != i + n - r:
                break
        else:
            return
        indices[i] += 1
        for j in range(i+1, r):
            indices[j] = indices[j-1] + 1
        yield tuple(pool[i] for i in indices) 
```

# c# - 如何动态生成必须放置在动态生成的 Groupboxes 内的 ToggleButtons

> ID：12952957
> 
> 赞同：2
> 
> 时间：2012-10-18T10:51:45.527
> 
> 标签：c#, .net, wpf, mvvm, toggle

我是一名 C++ 开发人员，最近转向 C#。我正在开发处理动态生成组框的 WPF 应用程序。相应组框中的 UI 组件（如 RadioButton、togglebutton 等）必须依次动态生成。

目前我有 2 个 xaml 文件`CodecView.xaml`和两个 xaml 文件`CodecWidgetView.xaml`的单独视图模型类。好吧，这个充满活力的一代很有趣，但对我来说肯定是一个棘手的情况。让我向您展示我在其中动态生成一组组框的代码。

**CodecView.xaml：**

```
<UserControl.Resources>
    <DataTemplate x:Key="CWDataTemplate">
        <StackPanel>
            <TextBlock Text="{Binding Description}" Margin="5,5,0,0"/>
            <local:CodecWidgetView Margin="5,10,5,5"/>
        </StackPanel>
    </DataTemplate>
</UserControl.Resources>

<Grid Grid.Row="0" Style="{DynamicResource styleBackground}">          
        <Grid Name="NumberofCodecs" >
            <ItemsControl ItemTemplate="{StaticResource CWDataTemplate}" ItemsSource="{Binding CodecWidgets}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </Grid>            
 </Grid> 
```

**CodecWidgetView.xaml：**

```
<Grid>
    <GroupBox Height="Auto" HorizontalAlignment="Stretch" Margin="5,5,5,5" Name="groupBox1" VerticalAlignment="Stretch" Width="Auto">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <ToggleButton Name="MasterBox" Content="Master" Command="{Binding MasterCommand}" IsChecked="{Binding MasterCheck}" Grid.Column="1" Height="25" Width="50" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0" />
                <ComboBox Grid.Column="2" ItemsSource="{Binding ModesList}" SelectedItem="{Binding SelectedModesList, Mode=OneWayToSource}" SelectedIndex="2" Height="23" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox2" VerticalAlignment="Center" Width="80" />
                <ComboBox Grid.Column="0" ItemsSource="{Binding FrequencyList}" SelectedItem="{Binding SelectedFrequencyList, Mode=OneWayToSource}" SelectedIndex="0" Height="23" HorizontalAlignment="Center" Margin="0,0,0,0" Name="comboBox1" VerticalAlignment="Center" Width="80" />
            </Grid>

            <Grid Grid.Row="1">
                //Here I want to dynamically generate 4 radio buttons
            </Grid>

            <Grid Grid.Row="2">
                <Label Name="BitDelay" Content="Bit Delay" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,0,205,0" Height="25" Width="55" />
                <Slider Height="23" HorizontalAlignment="Center" Value="{Binding BitDelayValue, Mode=TwoWay}" Minimum="0.0" Maximum="255.0" TickFrequency="1.0" Margin="95,0,0,0" Name="bitdelayslider" VerticalAlignment="Center" Width="160" />
                <TextBox Name="BitDelayValue" IsReadOnly="True" Text="{Binding ElementName=bitdelayslider,Path=Value, StringFormat=0.0}" Width="40" Height="20" Margin="0,0,110,0" HorizontalAlignment="Center" VerticalAlignment="Center" />
            </Grid>

            <Grid Grid.Row="3">
                <Label Name="DBGain" Content="DB Gain" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="0,0,205,0" Height="25" Width="55" />
                <TextBox Name="DBGainValue" IsReadOnly="True" Text="{Binding ElementName=dbgainslider,Path=Value, StringFormat=0.0}" Width="40" Height="20" Margin="0,0,110,0" HorizontalAlignment="Center" VerticalAlignment="Center" />
                <Slider Height="23" HorizontalAlignment="Center" Value="{Binding DBGainValue, Mode=TwoWay}" Minimum="0.0" Maximum="59.5" TickFrequency="0.5" Margin="95,0,0,0" Name="dbgainslider" VerticalAlignment="Center" Width="160" />
            </Grid>
        </Grid>
    </GroupBox>
</Grid> 
```

**CodecViewModel.cs：**

```
public ObservableCollection<CodecWidgetViewModel> CodecWidgets { get; set; }

    public CodecViewModel()
    {
        CodecWidgets = new ObservableCollection<CodecWidgetViewModel>();
        CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 8  - Dig Mic A" });
        CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 9  - Dig Mic B" });
        CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 10  - PCM A 3P3V" });
        CodecWidgets.Add(new CodecWidgetViewModel { Description = "Location 11  - PCM B 3P3V" });
    } 
```

**CodecWidgetViewModel.cs：**

```
private string _description;
    public string Description
    {
        get
        { 
            return _description; 
        }

        set
        {
            _description = value;
            OnPropertyChanged("Description");
        }
    } 
```

这在启动时给了我 4 个组框。现在是要求：

1.  看一下`CodecWidgetView.xaml`，你会发现我添加了组合框、滑块等，但`Grid.Row=2`我想动态生成 4 个切换按钮，内容为：`16 Bit, 20 Bit, 24 Bit and 32 Bit`。
2.  一旦发生这种情况，这个按钮上必须只有一个单击事件，它设置切换状态并执行一些语句。

这就是我在 C++ 中所做的：

```
//In Constructor
for(int jj = 0; jj < 4; jj++)
{
    m_codecBitLengthButton[jj] = new ToggleButton(bitLengthes[jj]); //Here bitlength consists of 16Bit, 20Bit, 24Bit and 32Bit
    m_codecBitLengthButton[jj]->setRadioGroupId(55); // make a custom group ID
    addAndMakeVisible(m_codecBitLengthButton[jj]);
    m_codecBitLengthButton[jj]->addButtonListener(this);
    m_codecBitLengthButton[jj]->setToggleState(false, false);
}
// check which button should be pressed
    cmd = (0x9400 | (m_slot & 0xFF));
m_msp430->ReadInternalCommand(cmd, 1, readBuf); //This returns some value in readBuf
m_bitLength = readBuf[0];
m_codecBitLengthButton[readBuf[0]]->setToggleState(true, false); //Togglestate set to true on startup based on readBuf[0]

//Gets called when any of the toggle button is clicked
while(jj < 4)
{
    if(button == m_codecBitLengthButton[jj])
    {
        // add code for bit length support
        cmd = ((CODEC_LENGTH_CMD & 0x7F00) | (m_slot & 0xFF));
        sendBuf[numBytes++] = jj; // this should represent the proper number of bits
        m_bitLength = jj;
        break;
    }
    jj++;
} 
```

我如何在 C# 中实现相同的目标？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:17:10.530

你可以用一个命令来做到这一点：

**CodecWidgetView.xaml：**

```
<Grid Grid.Row="1">
     <Grid.ColumnDefinitions>
           <ColumnDefinition />
           <ColumnDefinition />
           <ColumnDefinition />
           <ColumnDefinition />
     </Grid.ColumnDefinitions>
     <ToggleButton Grid.Column="0" Content="16Bit" Command="{Binding Path=ToogleButtonCommand}" CommandParameter="16"/>
     <ToggleButton Grid.Column="1" Content="20Bit" Command="{Binding Path=ToogleButtonCommand}" CommandParameter="20"/>
     <ToggleButton Grid.Column="2" Content="24Bit" Command="{Binding Path=ToogleButtonCommand}" CommandParameter="24"/>
     <ToggleButton Grid.Column="3" Content="32Bit" Command="{Binding Path=ToogleButtonCommand}" CommandParameter="32"/>
</Grid> 
```

这将非常简单，并且以 mvvm 方式。

好处是您可以指定 CommandParameter 将是哪个参数。在示例中，我对其进行了硬编码，但它也可以绑定。

**CodecWidgetViewModel.cs：**

```
 RelayCommand _toogleButtonCommand;
    public ICommand ToogleButtonCommand
    {
        get
        {
            if (_toogleButtonCommand == null)
            {
                _toogleButtonCommand = new RelayCommand(this.DoSomethingExecute,
                    this.DoSomethingCanExecute);
            }
            return _toogleButtonCommand;
        }
    }

    public void DoSomethingExecute(object param)
    {
       int result = Convert.ToInt32(param);

        if (result == 16)
        {
            //To this and so on for example
        }
    } 
```

希望这可以帮助。

**编辑：** 要定义哪个按钮 IsChecked 在任何时候绑定您的 ViewModel 中的 ToogleButtons IsChecked 属性和 ToogleButton 的值的属性。

```
private bool _isCheckedToogle1;
public bool IsCheckedToogle1
{
    get { return _isCheckedToogle1; }
    set
    {
        _isCheckedToogle1 = value;
        OnPropertyChanged("IsCheckedToogle1");
    }
}

private int _toogleButton1Value = 16;
public int ToogleButton1Value
{
   get { return _toogleButton1Value; }
   set
   {
      _toogleButton1Value = value;
      OnPropertyChanged("ToogleButton1Value");
   }
} 
```

XAML：

```
<ToggleButton Grid.Column="0" x:Name="toogleButton1" Content="16Bit" Command="{Binding Path=ToogleButtonCommand}" IsChecked="{Binding Path=IsCheckedToogle1}" >
    <ToggleButton.CommandParameter>
        <MultiBinding Converter="{StaticResource Converter}">
             <Binding Path="ToggleButton1Value" />
             <Binding />
        </MultiBinding>
    </ToggleButton.CommandParameter>
</ToggleButton> 
```

因为它现在是一个 MutliBinding 你需要一个转换器和一个新值的类，它是参数：

```
 public object Convert(object[] values, Type targetType, object parameter,
       System.Globalization.CultureInfo culture)
    {
        ToggleValue val = new ToggleValue();
        val.View = values[1] as CodecWidgetViewModel;
        val.Value = System.Convert.ToInt32(values[0]);
        return val;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter,
        System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();

    }
}

public class ToggleValue
{
    public int Value { get; set; }
    public CodecWidgetViewModel View { get; set; }
} 
```

还有你的新 CommandLogik

```
 public void DoSomethingExecute(object param)
    {
        ToggleValue result = param as ToggleValue;

        if (result.Value == 16)
        {
            result.View.IsCheckedToogle1 = true;
            result.View.IsCheckedToogle2 = false;
            result.View.IsCheckedToogle3 = false;
            result.View.IsCheckedToogle4 = false;
        }
    } 
```

# charts - Microsoft Chart ... 透明化

> ID：12952959
> 
> 赞同：0
> 
> 时间：2012-10-18T10:51:58.833
> 
> 标签：charts, data-visualization, mschart

我正在使用 Microsoft Charting 显示两个系列。

是否可以使其中一个系列透明以显示后面的系列？

类似于以下内容：

> [http://mvc.syncfusion.com/demos/ui/chart/ChartType/AreaChart](http://mvc.syncfusion.com/demos/ui/chart/ChartType/AreaChart)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:58:57.373

只需使用 alpha 组件定义系列颜色

`chart.Series["Default"].Color = Color.FromArgb(120, 0, 155, 155);`

# java - JasperReports：获取 java.lang.IllegalArgumentException：名称

> ID：12952960
> 
> 赞同：2
> 
> 时间：2012-10-18T10:52:01.010
> 
> 标签：java, jasper-reports, glassfish-3

我目前正在使用 jasper 报告、netbeans 7.1.1 和 Glassfish 服务器进行项目。似乎带有图像的报告在 Jasper 上成功运行，但是当我通过我的 Web 应用程序运行时，异常被抛出为`java.lang.IllegalArgumentException: name`.

```
SEVERE: java.lang.IllegalArgumentException: name
at sun.misc.URLClassPath$Loader.findResource(URLClassPath.java:460)
at sun.misc.URLClassPath.findResource(URLClassPath.java:146)
at java.net.URLClassLoader$2.run(URLClassLoader.java:385)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findResource(URLClassLoader.java:382)
at java.lang.ClassLoader.getResource(ClassLoader.java:1003)
at java.lang.ClassLoader.getResource(ClassLoader.java:998)
at com.sun.enterprise.v3.server.APIClassLoaderServiceImpl$APIClassLoader.getResource(APIClassLoaderServiceImpl.java:205)
at java.lang.ClassLoader.getResource(ClassLoader.java:998)
at java.lang.ClassLoader.getResource(ClassLoader.java:998)
at org.glassfish.web.loader.WebappClassLoader.getResource(WebappClassLoader.java:1153)
at net.sf.jasperreports.engine.util.JRResourcesUtil.findClassLoaderResource(JRResourcesUtil.java:473)
at net.sf.jasperreports.engine.util.JRLoader.loadBytesFromLocation(JRLoader.java:464)
at net.sf.jasperreports.engine.JRImageRenderer.getInstance(JRImageRenderer.java:176)
at net.sf.jasperreports.engine.fill.JRFillImage.evaluateImage(JRFillImage.java:944)
at net.sf.jasperreports.engine.fill.JRFillImage.evaluate(JRFillImage.java:891)
at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:256)
at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:482)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:2011)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillGroupHeader(JRVerticalFiller.java:603)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillGroupHeaders(JRVerticalFiller.java:523)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:250)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:110)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:923)
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:826)
at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:59)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:247)
at net.sf.jasperreports.engine.JasperRunManager.runReportToPdf(JasperRunManager.java:203)
at org.serv.ReportServlet.generateReport(ReportServlet.java:142)
at org.serv.ReportServlet.doPost(ReportServlet.java:86)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165) 
```

谁能帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:29:31.233

只需使用 try/catch 块包装对 ClasssLoader 上的 getResource 的调用：

```
URL url = null;
try {
    url = loader.getResource(fileName);
} catch (final Exception e) {
} 
```

在该语句之后，会检查 url 是否有 null 值，如果它为 null，则您已经尝试创建*fileName*`java.io.File`的对象。首先检查传递的文件名是否为有效文件，如果它不是现有文件，则仅向 ClassLoader 询问 URL 可能是一个更好的解决方案。

# logging - 为集群环境中的日志指出 weblogic 中的公共路径

> ID：12952961
> 
> 赞同：0
> 
> 时间：2012-10-18T10:52:00.933
> 
> 标签：logging, weblogic, load-balancing

我在集群中有两个节点，我想从我的应用程序访问日志并在 UI 中显示，但问题是，如何配置 weblogic 以在公共路径中为两个节点编写日志并从同一路径获取日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:56:35.890

指定要在机器上保存日志的路径：

可以从节点的设置中进行设置：

我的域->服务器->节点->日志记录->

**在文本框日志文件名**中输入路径和文件名：

# python - 如何使用带有动态卷名的python检查卷是否已挂载

> ID：12952962
> 
> 赞同：0
> 
> 时间：2012-10-18T10:52:02.430
> 
> 标签：python

```
import subprocess

def volumeCheck(volume_name):
    """This function will check volume name is mounted or not.
    """
volume_name = raw_input('Enter volume name:')
volumeCheck(volume_name)

print 'volume_name=',volume_name    
p = subprocess.Popen(['df', '-h'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
p1, err = p.communicate()
pattern = p1

if pattern.find(volume_name):
    print 'volume found'
else:
    print 'volume not found' 
```

运行时我总是得到错误的结果“找到卷”。

```
root@sr-query:/# df -h
Filesystem            Size  Used Avail Use% Mounted on
rootfs                938M  473M  418M  54% /
/dev/md0              938M  473M  418M  54% /
none                  250M  4.9M  245M   2% /dev
/dev/md2              9.7M  1.2M  8.0M  13% /usr/config
/dev/md7              961M   18M  895M   2% /downloads
tmpfs                 250M  7.9M  242M   4% /var/volatile
tmpfs                 250M     0  250M   0% /dev/shm
tmpfs                 250M     0  250M   0% /media/ram
**/dev/mapper/vg9-lv9  1016M   65M  901M   7% /VolumeData/sp
/dev/mapper/vg10-lv10
                     1016M   65M  901M   7% /VolumeData/cp**
root@sr-query:/# 
root@sr-query:/# 

root@sr-query:/# python volume_check.py

Enter volume name:raid_10volume

volume_name= raid_10volume
**volume found**
root@sr-query:/# 
```

我输入了 raid_10volume 它没有在这里列出请检查 df -h 命令输出（只有 2 个卷有 sp 和 cp），然后它是如何到达其他部分的。我的代码有什么问题？提前致谢。

有没有其他方法可以完成这项工作！?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T11:00:57.527

`pattern`是一个字符串，因此该`find`方法在未找到该模式时返回 -1。您需要将比较行更改为：

```
if pattern.find(volume_name) != -1: 
```

# iphone - 来自 iOS 6 中特定帐户的推文？

> ID：12952964
> 
> 赞同：2
> 
> 时间：2012-10-18T10:52:12.610
> 
> 标签：iphone, objective-c, twitter, ios6, social-framework

我正在一个应用程序中在 iOS6 上设置 twitter。我偶然发现的问题是：用户有多个 twitter 帐户我如何选择要分享到哪个帐户？

我已经设法将所有帐户放在一个数组中。但问题是我如何链接这个帐户：

```
 ACAccount *acct = [_accounts objectAtIndex:twitterAccountInt]; 
```

有了这个：

```
slComposerSheetController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
NSString *postText = [informationToBeShared objectForKey:@"postText"];
NSURL *postImageURL = [NSURL URLWithString:[informationToBeShared objectForKey:@"postImageURL"]];
NSURL *postURL = [NSURL URLWithString:[informationToBeShared objectForKey:@"postURL"]];

[slComposerSheetController setInitialText:[informationToBeShared objectForKey:@"postText"]];
[slComposerSheetController addImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:postImageURL]]];
[slComposerSheetController addURL:postURL];
[delegate presentViewController:slComposerSheetController animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:16:28.307

如果用户在设置中添加更多 Twitter 帐户，则操作系统会添加一个选项`SLComposeViewController`，供用户选择他想从哪个帐户发推文。

它不需要我做任何改变。

# objective-c - 无法从 xml 格式检索数据

> ID：12952966
> 
> 赞同：-3
> 
> 时间：2012-10-18T10:52:14.720
> 
> 标签：objective-c, ios, xml, xcode

我需要从给定的 xml 格式中检索数据。如何检索数据？[这是 XML 的链接](http://vowelsgroup.com/ItTutorialsBank/tutorials.xml)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T11:18:22.373

首先，添加 URLConnection 的委托并在头文件中传递：

要添加的代表是：

1.  `NSURLConnectionDelegate`
2.  `NSXMLParserDelegate`

那么您必须调用 XML URL：

```
 NSURL *url = [NSURL URLWithString:URLString];
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];
    [theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setTimeoutInterval:10];
    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
    if( theConnection )
    {
        responseData = [[NSMutableData data] retain];
    } 
```

实现如下`NSURLConnectionDelegate`方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    NSLog(@"didReceiveResponse");
    [responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSLog(@"didReceiveData");
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"didFailWithError = %@",[error description]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSLog(@"connectionDidFinishLoading");

    xmlParser= [[NSXMLParser alloc]initWithData:responseData];
    [xmlParser setDelegate:self];
    [xmlParser setShouldResolveExternalEntities: YES];
    [xmlParser parse];

    [responseData release];
    [connection release];
} 
```

然后添加 xmlParser 委托方法：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
//The tags in the xml data, the opening tags
}

-(void)parser:(NSXMLParser*)parser foundCharacters:(NSString*)string {
//The data in tags
}

-(void)parser:(NSXMLParser*)parser didEndElement:(NSString*)elementName namespaceURI:(NSString*)namespaceURI qualifiedName:(NSString*)qName {
//The end of each tags
} 
```

这是处理 XML 数据的一个很好的教程：[Tutorial](http://codesofa.com/blog/archive/2008/07/23/make-nsxmlparser-your-friend.html)

# java - eclipse中的冗余超级界面警告

> ID：12952975
> 
> 赞同：3
> 
> 时间：2012-10-18T10:53:01.143
> 
> 标签：java, eclipse

为什么这个构造会在 Eclipse 中生成错误/警告？我理解它将生成报告的原因，但我想一定有一些理由，如果你拼出那些多余的超级接口，可能会出现什么问题。

例子：

```
interface I1{
    void boo();
}

class A implements I1 {
    public void boo() {}
}

class B extends A implements I1 {
    public void boo() {}
} 
```

警告在 B 中，靠近**工具 I1**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T11:01:18.333

`A`如果类实现`I1`和类`B`扩展，则成像`A`。默认情况下`B`实现`I1`，即使它不需要在`I1`. 如果`A`要更改为 implementation `I2`，`B`仍然会编译。

但是，如果`B`显式`implements I1`但不提供方法，则此更改将导致`B`不再编译。

当然，我忽略了用户`B`可能假设`B`实现`I1`. 对于这种情况，我们假设这不是问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:05:08.707

这只是一个警告，我想它有两个原因：

*   它是多余的，因此可以删除。噪音越小越好。但这是风格问题
*   它告诉您不需要在 B 中实现任何接口方法，因为它们已经在 A 中实现。因此，实现接口方法不仅会实现接口，还会覆盖超类中的默认实现.

# ruby-on-rails - Rails 非标准资产类型预编译

> ID：12952979
> 
> 赞同：0
> 
> 时间：2012-10-18T10:53:17.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

我们现在正在开发一个 Rails 项目，我们的系统提供二进制文件。所以我们决定（实际上，不是*我们*，而是我的*高级队友*）将这些文件存储在**/app/assets/binaries**（我们这样称呼它）文件夹中。

由于某些原因，我们的管理员被解雇了，我开始自己管理服务器的一半。我发现了一些有趣的事情：在启动服务器和预编译资产时，发生了一些非常大量的操作。而且我们的硬盘可用空间开始以惊人的速度减少（*当然，因为 Capistrano 也经常部署*）。

所以，我要问的是：Rails 资产预编译是如何工作的？它是**为 /app/assets/ 目录**中的所有文件提供服务，还是只为 Rails *“可理解”的文件提供服务？*

我的理论是：`rake assets:precompile`处理我们的二进制文件并制作这些文件的某种副本。我错了还是我对了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:28:09.310

我相信预编译器只对清单文件起作用。因此，如果您没有告诉预编译其他文件夹/文件的清单，它将无法工作。
看一下教程的这一部分。
[http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

# javascript - 不能为输入值工作 jQuery

> ID：12952986
> 
> 赞同：2
> 
> 时间：2012-10-18T10:53:57.507
> 
> 标签：javascript, jquery, html-table, keyup

主要代码：

```
var clone = div.clone();
clone.attr('id', sabad_kala_id);
$('.content').append(clone);
$('div#'+sabad_kala_id).replaceWith('<tr id='+sabad_kala_id+'><td width="50"><a class="del_kala" id='+sabad_kala_id+'><img src="images/delete.png" alt="delete" /></a></td><td width="50">1.</td><td width="388">'+title+'</td><td width="80" clas="mm"><input class="count" type="text" value='+count+' /></td><td width="100">'+price+' $</td><td width="120">'+price_count+' $</td></tr>'); 
```

并且此代码在追加和替换后运行完美，用户可以`input.count`在表格中编辑并且下面的代码已经运行：

```
('input.count').keyup(function(e){

        alert(test);
    }); 
```

但这段代码不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T10:56:14.713

当您动态创建元素时，您应该委托事件：

```
$(document).on('keyup', 'input.count', function(e){
    alert('test');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T10:57:30.403

该代码不起作用，因为处理程序 keyup 在页面加载时执行，并且不会响应以后添加的任何对象。用于~~`$(".count").live('keyup', function(){})`~~修复您的代码。

更正：`$(document).on("keyup", ".count", null, function(){ // code here})`从 jQuery 1.7 开始使用（参见[http://api.jquery.com/live/](http://api.jquery.com/live/)）

# excel - 根据另一个选择从后续下拉列表中删除选项

> ID：12952989
> 
> 赞同：0
> 
> 时间：2012-10-18T10:54:08.833
> 
> 标签：excel, vba

我的 VBA 表单中有三个下拉菜单（**cbo_fac1**、**cbo_fac2**、**cbo_fac3**），每个下拉菜单都从同一来源提取数据。但是我想在选择列表组上实现级联更新，以便当用户从中选择一个选项时，它会从后续选择列表中删除。

例如，如果**cbo_fac1**具有以下选项：

```
Blu-ray DVD Player
Chalk board
Computer 
Data projector
Data projector trolley 
```

并且用户`Blu-ray DVD Player`从**cbo_fac1**中选择，那么接下来的两个下拉菜单（**cbo_fac2**和**cbo_fac3**）应该只有以下选项可用：

```
Chalk board
Computer 
Data projector
Data projector trolley 
```

如果用户随后决定`Data projector trolley`从**cbo_fac2**中进行选择，那么下一个也是最后一个下拉 ( **cbo_fac3** ) 应该只有以下选项可供选择：

```
Chalk board
Computer 
Data projector 
```

当然，如果用户决定返回并更改他们的选项，那么这也应该反映。我将如何实现这一目标。这是我到目前为止的代码：

```
 For Each c_fac In ws_misc.Range("fac")
        With Me.cbo_fac1
        .AddItem c_fac.Value
        .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
         End With
        With Me.cbo_fac2
        .AddItem c_fac.Value
        .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
        End With
        With Me.cbo_fac3
        .AddItem c_fac.Value
        .List(.ListCount - 1, 1) = c_fac.Offset(0, 1).Value
        End With
      Next c_fac 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:13:46.770

这比我想象的要长。我认为这会更容易:)

对于这个解决方案，我会在 VBA 中使用用户定义类型。请看这个例子：

把它放在一个模块中：

```
Option Explicit

Public Type listOptions
    name As String
    isUsed As Boolean
End Type 
```

在用户窗体上添加三个组合框。将组合框更改为名称：cbo_fac1、cbo_fac2、cbo_fac3。

然后在用户表单后面添加这段代码：

```
Option Explicit

' options needs to be persisted throughout the life of the program
Dim options() As listOptions

Private Sub UserForm_Initialize()
    ' setup options
    Call getOptionsFromWorksheet("Sheet1")

    fillComboBoxWithOptions "cbo_fac1"
    fillComboBoxWithOptions "cbo_fac2"
    fillComboBoxWithOptions "cbo_fac3"
End Sub

Private Sub getOptionsFromWorksheet(ByRef wsName As String)
    Dim ws As Excel.Worksheet
    Set ws = ThisWorkbook.Worksheets(wsName)

    ' assuming data begins at A1
    Dim lastCell As Long
    Dim i As Long

    lastCell = ws.Cells.SpecialCells(xlCellTypeLastCell).Row

    ReDim options(lastCell - 1)

    For i = 1 To lastCell
        options(i - 1) = createOption(ws.Cells(i, 1).Value)
    Next
End Sub

Private Function createOption(ByRef theName) As listOptions
    Dim opt As listOptions
    opt.name = theName
    opt.isUsed = False
    createOption = opt
End Function

Private Sub cbo_fac1_AfterUpdate()
    Call resetSelectedOptions

    ' reset other combo boxes with options
    fillComboBoxWithOptions "cbo_fac2"
    fillComboBoxWithOptions "cbo_fac3"
End Sub

Private Sub cbo_fac2_AfterUpdate()
    Call resetSelectedOptions

    ' reset other combo boxes with options
    fillComboBoxWithOptions "cbo_fac1"
    fillComboBoxWithOptions "cbo_fac3"
End Sub

Private Sub cbo_fac3_AfterUpdate()
    Call resetSelectedOptions

    ' reset other combo boxes with options
    fillComboBoxWithOptions "cbo_fac1"
    fillComboBoxWithOptions "cbo_fac2"
End Sub

' Resets the combobox control with the available options
Private Sub fillComboBoxWithOptions(ByRef comboBoxName)
    Dim selectedItem As String

    ' get and store the selected item, if any,
    ' so we can re-select it after we clear it out and re-fill it
    If (Me.Controls(comboBoxName).ListIndex <> -1) Then
        selectedItem = Me.Controls(comboBoxName).List(Me.Controls(comboBoxName).ListIndex)
    End If

    Me.Controls(comboBoxName).Clear
    Dim i As Long
    For i = 0 To UBound(options)
        If (options(i).name = selectedItem) Then
            Me.Controls(comboBoxName).AddItem options(i).name
        ElseIf (Not options(i).isUsed) Then
            Me.Controls(comboBoxName).AddItem options(i).name
        End If
    Next

    ' re-select the item
    For i = 0 To Me.Controls(comboBoxName).ListCount - 1
        If (Me.Controls(comboBoxName).List(i) = selectedItem) Then
            Me.Controls(comboBoxName).ListIndex = i
            Exit For
        End If
    Next
End Sub

Private Sub resetSelectedOptions()
    Dim i As Long
    For i = 0 To UBound(options)
        options(i).isUsed = False
    Next

    ' Since the list index will not match the index of the options() array
    ' we have to loop through until we find a matching name and set
    ' the isUsed = True
    If (cbo_fac1.ListIndex <> -1) Then
        For i = 0 To UBound(options)
            If (options(i).name = cbo_fac1.List(cbo_fac1.ListIndex)) Then
                options(i).isUsed = True
                Exit For
            End If
        Next
    End If

    If (cbo_fac2.ListIndex <> -1) Then
        For i = 0 To UBound(options)
            If (options(i).name = cbo_fac2.List(cbo_fac2.ListIndex)) Then
                options(i).isUsed = True
                Exit For
            End If
        Next
    End If

    If (cbo_fac3.ListIndex <> -1) Then
        For i = 0 To UBound(options)
            If (options(i).name = cbo_fac3.List(cbo_fac3.ListIndex)) Then
                options(i).isUsed = True
                Exit For
            End If
        Next
    End If

End Sub 
```

这里的想法是，在为每个组合框选择了一个值之后，它将使用 AferUpdate 事件重置其他组合框。它还考虑了组合框是否已经选择了一个值。

希望这可以帮助

编辑：我更改了代码以容纳工作表中的数据。我将工作表命名为“Sheet1”（将其更改为您需要的任何内容）并且我假设在该工作表中，唯一的数据是您想要列出的项目列表（因此，没有标题和其他数据工作表）。

# sed - 在Linux上的混合文件中Grep特定字符串

> ID：12952991
> 
> 赞同：0
> 
> 时间：2012-10-18T10:54:13.107
> 
> 标签：sed, awk, tr

如何从此输出中仅提取字符串**q9I9YP1V013809 ：**

```
q9I9YP1V013809     1472 Thu Oct 18 11:34  test@test.com 
                                          test1@test.com 
                                          test2@test.com 
                                          test3@test.com 
```

预期视图：

```
q9I9YP1V013809 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:56:04.060

One of many ways. If first field doesn't contain an `@`, print it.

```
awk '$1 !~ /@/ { print $1; }' infile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T11:04:17.023

You can check presence of `@` character or base it on # of fields present as in this command:

```
awk 'NF > 5 { print $1 }' input.file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T11:05:48.960

我会做：

```
awk 'NF>1{print $1}' file 
```

因为OP没有提到预期字符串的任何规则。它也可以有'@'。

测试：

```
kent$  echo "q9I9YP1V013809     1472 Thu Oct 18 11:34  test@test.com 
                                          test1@test.com 
                                          test2@test.com 
                                          test3@test.com"|awk 'NF>1{print $1}'
q9I9YP1V013809 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:13:34.623

如果它始终是第一个单词，并且其他行以空格为前缀，则使用：

```
<infile grep -Eo '^[^[:blank:]]+' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T10:57:33.207

要跳过所有以空格开头的行，并删除剩余文件的空格后的所有内容，请执行

```
grep -v '^ ' file.in | sed "s/ .*//" 
```

相比awk，你需要启动两个进程，*但是*做的事情要清楚得多。

另一种解决方案，`sed`仅：

```
sed "/^ /d;s/ .*//" file.in 
```

不是很清楚，但只有一个过程。第一个`sed`命令 ( `/^ /d`) 删除所有以空格开头的行；第二个命令与上面相同。

# sql-server - 通过经典 ASP 将凭据传递给报告服务

> ID：12952993
> 
> 赞同：3
> 
> 时间：2012-10-18T10:54:19.200
> 
> 标签：sql-server, reporting-services, asp-classic

我想通过经典 ASP 传递 SQL Server Reporting Services 的凭据，因为当前用户每次尝试访问报告时都被要求输入用户名和密码。

我可以使用 POST 方法将其作为参数从页面传递吗？

作为这段代码：

```
<body>
  <form id="frmRender" action="ReportViewer" method="post" target="Main">
    <input type="text" name="ID" value="" />
    <input type="text" name="Password" value="" />
    <input type="submit" value="View Report" />
  </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:52:26.227

那应该没问题。我不确定您是如何调用 SSRS 报告的，但如果您有一些 API，您应该能够从`Dim ID = Request.QueryString("ID")`和获取它们`Dim Password = Request.QueryString("Password")`。我会将您的密码文本输入更改为实际的密码输入，这样当他们在表单中输入密码时`<input type="password" name="Password" value=""/>`它会显示为*** 。**[这](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/cc864bc8-1225-489c-b901-8016d656a5db)是一个您可能会发现有用的 URL。

# extjs - 如何在 extjs 中捕获“X”按钮操作

> ID：12952995
> 
> 赞同：1
> 
> 时间：2012-10-18T10:54:24.440
> 
> 标签：extjs

当我单击取消按钮并显示带有确定和取消按钮的确认消息时，我在我的表单上做了一个肮脏的检查。我也想在单击“X”按钮时执行类似的操作。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:22:53.123

你需要听`close`事件。问题 - 你的处理程序应该立即返回一些东西，如果你向用户提出问题，它将异步完成。

所以你需要`false`从那个处理程序发送，防止表单关闭。向用户显示一个消息框，如果他接受关闭 - 自己调用 close 方法，并且在第二次关闭期间不做任何事情。

# c - 如何从这个输出中判断字节顺序？

> ID：12952996
> 
> 赞同：0
> 
> 时间：2012-10-18T10:54:26.450
> 
> 标签：c, pointers, endianness

我正在运行这个示例程序，并且我应该能够从输出中判断它是什么机器类型。我确定它来自检查一两个值，但我应该如何执行此检查？

```
/* pointers.c - Test pointers
 * Written 2012 by F Lundevall
 * Copyright abandoned. This file is in the public domain.
 *
 * To make this program work on as many systems as possible,
 * addresses are converted to unsigned long when printed.
 * The 'l' in formatting-codes %ld and %lx means a long operand. */

#include <stdio.h>
#include <stdlib.h>

int * ip; /* Declare a pointer to int, a.k.a. int pointer. */
char * cp; /* Pointer to char, a.k.a. char pointer. */

/* Declare fp as a pointer to function, where that function
 * has one parameter of type int and returns an int.
 * Use cdecl to get the syntax right, http://cdecl.org/ */
int ( *fp )( int );

int val1 = 111111;
int val2 = 222222;

int ia[ 17 ]; /* Declare an array of 17 ints, numbered 0 through 16\. */
char ca[ 17 ]; /* Declare an array of 17 chars. */

int fun( int parm )
{
  printf( "Function fun called with parameter %d\n", parm );
  return( parm + 1 );
}

/* Main function. */
int main()
{
  printf( "Message PT.01 from pointers.c: Hello, pointy World!\n" );

  /* Do some assignments. */
  ip = &val1;
  cp = &val2; /* The compiler should warn you about this. */
  fp = fun;

  ia[ 0 ] = 11; /* First element. */
  ia[ 1 ] = 17;
  ia[ 2 ] = 3;
  ia[ 16 ] = 58; /* Last element. */

  ca[ 0 ] = 11; /* First element. */
  ca[ 1 ] = 17;
  ca[ 2 ] = 3;
  ca[ 16 ] = 58; /* Last element. */

  printf( "PT.02: val1: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &val1, val1, val1 );
  printf( "PT.03: val2: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &val2, val2, val2 );
  printf( "PT.04: ip: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &ip, (long) ip, (long) ip );
  printf( "PT.05: Dereference pointer ip and we find: %d \n", *ip );
  printf( "PT.06: cp: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &cp, (long) cp, (long) cp );
  printf( "PT.07: Dereference pointer cp and we find: %d \n", *cp );

  *ip = 1234;
  printf( "\nPT.08: Executed *ip = 1234; \n" );
  printf( "PT.09: val1: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &val1, val1, val1 );
  printf( "PT.10: ip: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &ip, (long) ip, (long) ip );
  printf( "PT.11: Dereference pointer ip and we find: %d \n", *ip );
  printf( "PT.12: val1: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &val1, val1, val1 );

  *cp = 1234; /* The compiler should warn you about this. */
  printf( "\nPT.13: Executed *cp = 1234; \n" );
  printf( "PT.14: val2: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &val2, val2, val2 );
  printf( "PT.15: cp: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &cp, (long) cp, (long) cp );
  printf( "PT.16: Dereference pointer cp and we find: %d \n", *cp );
  printf( "PT.17: val2: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &val2, val2, val2 );

  ip = ia;
  printf( "\nPT.18: Executed ip = ia; \n" );
  printf( "PT.19: ia[0]: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &ia[0], ia[0], ia[0] );
  printf( "PT.20: ia[1]: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &ia[1], ia[1], ia[1] );
  printf( "PT.21: ip: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &ip, (long) ip, (long) ip );
  printf( "PT.22: Dereference pointer ip and we find: %d \n", *ip );

  ip = ip + 1; /* add 1 to pointer */
  printf( "\nPT.23: Executed ip = ip + 1; \n" );
  printf( "PT.24: ip: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &ip, (long) ip, (long) ip );
  printf( "PT.25: Dereference pointer ip and we find: %d \n", *ip );

  cp = ca;
  printf( "\nPT.26: Executed cp = ca; \n" );
  printf( "PT.27: ca[0]: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &ca[0], ca[0], ca[0] );
  printf( "PT.28: ca[1]: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &ca[1], ca[1], ca[1] );
  printf( "PT.29: cp: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &cp, (long) cp, (long) cp );
  printf( "PT.30: Dereference pointer cp and we find: %d \n", *cp );

  cp = cp + 1; /* add 1 to pointer */
  printf( "\nPT.31: Executed cp = cp + 1; \n" );
  printf( "PT.32: cp: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &cp, (long) cp, (long) cp );
  printf( "PT.33: Dereference pointer cp and we find: %d \n", *cp );

  ip = ca; /* The compiler should warn you about this. */
  printf( "\nPT.34: Executed ip = ca; \n" );
  printf( "PT.35: ca[0]: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &ca[0], ca[0], ca[0] );
  printf( "PT.36: ca[1]: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &ca[1], ca[1], ca[1] );
  printf( "PT.37: ip: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &ip, (long) ip, (long) ip );
  printf( "PT.38: Dereference pointer ip and we find: %d \n", *ip );

  cp = ia; /* The compiler should warn you about this. */
  printf( "\nPT.39: Executed cp = ia; \n" );
  printf( "PT.40: cp: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &cp, (long) cp, (long) cp );
  printf( "PT.41: Dereference pointer cp and we find: %d \n", *cp );

  printf( "\nPT.42: fp: stored at %lx (hex); value is %ld (dec), %lx (hex)\n",
          (long) &fp, (long) fp, (long) fp );
  printf( "PT.43: Dereference fp and see what happens.\n" );
  val1 = (*fp)(42);
  printf( "PT.44: Executed val1 = (*fp)(42); \n" );
  printf( "PT.45: val1: stored at %lx (hex); value is %d (dec), %x (hex)\n",
          (long) &val1, val1, val1 );

  return( 0 );
} 
```

输出

```
Message PT.01 from pointers.c: Hello, pointy World!
PT.02: val1: stored at 21e50 (hex); value is 111111 (dec), 1b207 (hex)
PT.03: val2: stored at 21e54 (hex); value is 222222 (dec), 3640e (hex)
PT.04: ip: stored at 21eb8 (hex); value is 138832 (dec), 21e50 (hex)
PT.05: Dereference pointer ip and we find: 111111
PT.06: cp: stored at 21e6c (hex); value is 138836 (dec), 21e54 (hex)
PT.07: Dereference pointer cp and we find: 0

PT.08: Executed *ip = 1234;
PT.09: val1: stored at 21e50 (hex); value is 1234 (dec), 4d2 (hex)
PT.10: ip: stored at 21eb8 (hex); value is 138832 (dec), 21e50 (hex)
PT.11: Dereference pointer ip and we find: 1234
PT.12: val1: stored at 21e50 (hex); value is 1234 (dec), 4d2 (hex)

PT.13: Executed *cp = 1234;
PT.14: val2: stored at 21e54 (hex); value is -771529714 (dec), d203640e (hex)
PT.15: cp: stored at 21e6c (hex); value is 138836 (dec), 21e54 (hex)
PT.16: Dereference pointer cp and we find: -46
PT.17: val2: stored at 21e54 (hex); value is -771529714 (dec), d203640e (hex)

PT.18: Executed ip = ia;
PT.19: ia[0]: stored at 21e74 (hex); value is 11 (dec), b (hex)
PT.20: ia[1]: stored at 21e78 (hex); value is 17 (dec), 11 (hex)
PT.21: ip: stored at 21eb8 (hex); value is 138868 (dec), 21e74 (hex)
PT.22: Dereference pointer ip and we find: 11

PT.23: Executed ip = ip + 1;
PT.24: ip: stored at 21eb8 (hex); value is 138872 (dec), 21e78 (hex)
PT.25: Dereference pointer ip and we find: 17

PT.26: Executed cp = ca;
PT.27: ca[0]: stored at 21e58 (hex); value is 11 (dec), b (hex)
PT.28: ca[1]: stored at 21e59 (hex); value is 17 (dec), 11 (hex)
PT.29: cp: stored at 21e6c (hex); value is 138840 (dec), 21e58 (hex)
PT.30: Dereference pointer cp and we find: 11

PT.31: Executed cp = cp + 1;
PT.32: cp: stored at 21e6c (hex); value is 138841 (dec), 21e59 (hex)
PT.33: Dereference pointer cp and we find: 17

PT.34: Executed ip = ca;
PT.35: ca[0]: stored at 21e58 (hex); value is 11 (dec), b (hex)
PT.36: ca[1]: stored at 21e59 (hex); value is 17 (dec), 11 (hex)
PT.37: ip: stored at 21eb8 (hex); value is 138840 (dec), 21e58 (hex)
PT.38: Dereference pointer ip and we find: 185664256

PT.39: Executed cp = ia;
PT.40: cp: stored at 21e6c (hex); value is 138868 (dec), 21e74 (hex)
PT.41: Dereference pointer cp and we find: 0

PT.42: fp: stored at 21e70 (hex); value is 69288 (dec), 10ea8 (hex)
PT.43: Dereference fp and see what happens.
Function fun called with parameter 42
PT.44: Executed val1 = (*fp)(42);
PT.45: val1: stored at 21e50 (hex); value is 43 (dec), 2b (hex) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T10:58:38.740

为什么不只是

```
unsigned short u = 0xABCD;
if ( *(const char *)&u == 0xAB )
   /*big endian*/;
else
   /*little endian*/; 
```

这就是它起作用的原因：在大端架构中，最高有效字节具有变量（原始类型）中所有字节的最低地址，IOW 最高有效字节排在第一位。在小端架构中则相反：最低有效字节在前。这段代码只是检查地址最低的字节是否包含数字的最高有效字节。

更多关于字节序[的信息](http://en.wikipedia.org/wiki/Endianness)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T11:54:11.400

是的，您可以通过查看输出行来判断此代码​​是在大端还是小端机器上运行`PT.07: Dereference pointer cp and we find: 0`。如果取消引用的指针`cp`是`0`一个大端机器，如果它是 14 它是一个小端机器。

**原因：**

`cp`是一个指向 char 的指针，它被分配了`val2`具有值的 int 变量的地址`222222`。如果你取消引用`cp`，你会得到第一个字节在大端但在小端`val2`中是二进制的。`0000 0000``0000 1110`