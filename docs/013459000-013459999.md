# StackOverflow 问答 13459000-13459999

# ruby-on-rails - 如何使用 ActiveRecord 在 Rails 中返回关联的模型对象

> ID：13459000
> 
> 赞同：2
> 
> 时间：2012-11-19T17:27:33.207
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

假设我有以下三个对象：

```
class Filing < ActiveRecord::Base
    belongs_to :company
    has_many :people , :dependent => :destroy
end

class Company < ActiveRecord::Base
    has_many :filings
end

class Person < ActiveRecord::Base
    belongs_to :filing
end 
```

我正在尝试发出**一个请求，该请求返回带有关联公司的文件和一个包含其关联人员的数组**。这用于 GET 归档/:id 的 API 请求

我看到了关于[使用 ActiveRecord 连接表](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)的文档，但是当我运行以下查询时：

```
Filing.joins(:people,:company) 
```

结果集中似乎没有包括关联的人员或公司。如果不返回关联的数据，我为什么要加入，我有点困惑。我在这里想念什么？我应该运行什么查询？

**更新**

如评论中所述。我希望能够生成以下输出：

```
{ "filing" => { "filing_id" => 123, "company" => { ... }, "people" => [{"person_id" => 1}, {"person_id" => 2}] } } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:03:01.930

在评论者的帮助下，我最终找到了答案。所有需要调用的是：

```
Filing.find( id , :include => [:company,:people] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:40:02.720

我认为您想要的是以下内容：

```
Filing.includes([:company, :people]).where(:filing => [:id => 756]) 
```

# icloud - 应用程序是否应该允许用户打开或关闭 iCloud？

> ID：13459003
> 
> 赞同：0
> 
> 时间：2012-11-19T17:27:35.447
> 
> 标签：icloud

苹果文件说：

> 当用户首次启动支持 iCloud 的应用程序时，请邀请他们使用 iCloud。
> 
> 永远不要再次提示用户他们是要使用 iCloud 还是本地存储。

如果用户第一次没有选择 iCloud，但后来决定使用它怎么办？

如果在使用 iCloud 几天后，用户决定切换回本地存储怎么办？

如果用户用完了 iCloud 存储空间，但又不想为额外空间付费怎么办？

应用程序是否应该设计为允许用户在本地和 iCloud 存储之间切换？如果是，那么处理这个问题的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T01:24:05.240

是的，您肯定需要能够在两种存储方法之间迁移用户，原因包括以上以及更多 - 如果用户退出 iCloud 怎么办？如果随后另一个 iCloud 用户登录怎么办？你需要处理这些东西，并且能够在可以移动的时候移动东西，即使你不能这样做，也要把东西保存在正确的地方和用户期望的地方。

您如何处理它取决于您使用的 iCloud 存储类型。对于键值存储，您还应该在本地缓存这些东西（它不是 NSUserDefaults 的替代品）。

对于文档和核心数据，您有时可以将持久存储迁移回本地存储，有时您可以将文档从 iCloud 移出到本地存储。我建议阅读 iOS 上的文档编程指南和 iCloud 指南，以至少了解如何处理这个问题。

可能很难检测其中的一些变化——API 在这方面有点不成熟。一些人使用的一种技术是您无处不在的“哨兵文件”——如果它们丢失了，您就知道您所知道的 iCloud 世界已经发生了变化。

看看 Apple 的应用程序是如何处理这个问题的，比如 iWork。他们的设置包中有一个 iCloud 开关。

# android - 无法在操作栏中添加操作项按钮

> ID：13459011
> 
> 赞同：2
> 
> 时间：2012-11-19T17:28:15.970
> 
> 标签：android

我已经使用 MasterDetailedFlow Activity 创建了一个项目，现在我想在操作栏上添加操作项按钮，如下所示：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    MenuItem add = menu.add("Add City");
    MenuItem delete = menu.add("Delete");
    add.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    delete.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    return true;
} 
```

在 onCreate 方法中添加了以下行：

```
// Show the Up button in the action bar.
    getActionBar().setDisplayHomeAsUpEnabled(true); 
```

现在我无法在操作栏中看到操作项按钮，请告诉我如何在此处显示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:56:53.603

如果您始终将显示设置为操作会发生什么？

add.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

# opencv - OpenCV，cvRemap 函数有一个奇怪的未处理异常

> ID：13459012
> 
> 赞同：2
> 
> 时间：2012-11-19T17:28:21.413
> 
> 标签：opencv, remap

我正在学习 OpenCV 来校准和校正相机。相机已经校准，现在我正在使用 cvRemap(src, dst, mapx, mapy) 来消除左右相机拍摄的两个图像的失真。

每次程序运行到包含 cvRemap() 的行时，它都会抛出一个未处理的异常，称为：

> testagain.exe 中 0x757dc41f 处未处理的异常：Microsoft C++ 异常：内存位置 0x003fe73c 处的 cv::Exception。

控制台说：

> OpenCV 错误：断言失败 (src.type() == dst.type() && dst.size() == mapx.size()) 在未知函数中，文件 ..\ ..\ ..\src\opencv\模块\imgproc\src\imgwarp.cpp，第 3294 行

我是根据*Learning OpenCV*做到的。注意 cvRemap 的格式是：`cvRemap(const CvMat* src, const CvMat* dst, const CvMat* mapx, const CvMat* mapy)`. 这里有一些猜测：

1.  由于mapx和mapy是另外一个程序生成的，自己读入的，有一些负值，也有一些大于图片分辨率（640*480）的值，我手动处理了这些值，设置回分辨率范围. 我希望这不会是一个问题。

2.  本次试用之前，我是通过 计算mapx和mapy `cvInitUndistortRectifyMap()`，调用cvRemap时也不例外。我不知道为什么。

# excel - 如何将帮助列的解决方案应用于完整的 excel 文件？

> ID：13459013
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:28:33.140
> 
> 标签：excel

[如何以可读的方式重写excel公式？](https://stackoverflow.com/questions/12713913/how-to-rewrite-excel-formulas-in-a-readable-manner)

我得到了很好的答案，解释了如何使用辅助列来制作它。我的问题是如何`20K`尽可能快速有效地为细胞做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:43:15.593

我在你原来的问题中建议了这个公式

```
=IF(ISERROR(G16&G17),X16,IF(OR(G16={"xxx","yyy","zzz"}), 

Y16,IF(G16="333","N\A",IF(G17="333",Z16,MAX(0,(HEX2DEC(IF(D17="",W$10,W17))-

HEX2DEC(W16))/VLOOKUP(F16,$M$36:$N$41,2,0)))))) 
```

如果您将其输入到与某些现有数据相邻的列中，则可以通过一次双击填充到数据的末尾。

将光标放在带有公式的单元格的右下角，直到看到黑色

“+”。这就是“填充句柄”。双击它，只要您在相邻列中有数据，公式就会“填写”

# c# - 使用 JsonConvert.SerializeObject 的序列化问题（服务器上缺少属性）

> ID：13459015
> 
> 赞同：0
> 
> 时间：2012-11-19T17:28:45.030
> 
> 标签：c#, web-services, asp.net-web-api, json.net

使用 JsonConvert.SerializeObject 时我的行为很奇怪。

我有一个如下所示的方法：

```
public class ServiceController : ApiController
{
    public object GetJSONConnectedResponse(object input)
    {
        return JsonConvert.SerializeObject(input, Formatting.Indented,
        new JsonSerializerSettings()
        {
            ReferenceLoopHandling = ReferenceLoopHandling.Serialize
        });
    }

    public object GetMediaGallery(int? id)
    {
        try
        {
            return GetJSONConnectedResponse(GalleryBLL.GetMediaGallery(id));
        }
        catch (Exception exc)
        {
            LogBLL.LogException(exc, HttpContext.Current.Request.RawUrl);
            return null;
        }
    }
} 
```

如您所见，我使用 MVC Web API 作为服务应用程序，我在客户端使用 javascript 查询 ajax 类型的数据。

GetMediaGallery 方法返回具有以下结构的持有者类：

```
public class MediaGalleryHolder
{
    public List<DB_Image> Images { get; set; }
    public List<string> SpinFrames { get; set; }
    public string FlyoverVideo { get; set; }
} 
```

DB_Images 是一个复杂的实体，我通过调用存储过程将其填充到业务逻辑方法中。在这个复杂的实体上，我添加了 2 个额外的属性。

```
public partial class DB_Image
{
    public string FullPath { get; set; }
    public string ThumbPath { get; set; }
} 
```

出于某种原因，在我的本地机器上，结果正确序列化（添加了两个额外的属性），但在服务器上，这些额外的属性没有添加到结果中（我知道它们已填充，但从未序列化）。

这是某种 JSON.NET 或 MVC Web API 版本控制问题，我该如何解决或解决这个问题？

任何帮助将不胜感激！

最好的，

部落84

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:56:02.050

您是否尝试过在每个课程上添加注释？您可以尝试添加 [Serializable]

```
 [Serializable] 
  public partial class DB_Image
  {
        public string FullPath { get; set; }
        public string ThumbPath { get; set; }
  }

  [Serializable]
  public class MediaGalleryHolder
  {
       public List<DB_Image> Images { get; set; }
       public List<string> SpinFrames { get; set; }
       public string FlyoverVideo { get; set; }
  } 
```

希望能帮助到你！

# javascript - 选择easeljs鼠标事件不起作用

> ID：13459016
> 
> 赞同：1
> 
> 时间：2012-11-19T17:28:48.510
> 
> 标签：javascript, easeljs

不知道我在这里做错了什么，但一些选择鼠标事件（拖放、onclick 和 onpress）不起作用。但是 onDoubleClick 有效。这就是我正在做的事情。

***.js 文件***

```
 var b2Vec2 = Box2D.Common.Math.b2Vec2;
            var b2DebugDraw = Box2D.Dynamics.b2DebugDraw;
            var b2BodyDef = Box2D.Dynamics.b2BodyDef;
            var b2Body = Box2D.Dynamics.b2Body;
            var b2FixtureDef = Box2D.Dynamics.b2FixtureDef;
            var b2Fixture = Box2D.Dynamics.b2Fixture;
            var b2World = Box2D.Dynamics.b2World;
            var b2PolygonShape = Box2D.Collision.Shapes.b2PolygonShape;
            var b2CircleShape = Box2D.Collision.Shapes.b2CircleShape;
            var b2DebugDraw = Box2D.Dynamics.b2DebugDraw;
            var b2AABB = Box2D.Collision.b2AABB;
            var b2ContactListener = Box2D.Dynamics.b2ContactListener;

            window.onblur = function(){ Ticker.setPaused(true); PAUSED = true; console.log("paused"); }
            window.onfocus = function(){ Ticker.setPaused(false); PAUSED = false; console.log("unpaused"); }

            var PAUSED = false;

            var Type = {
                WALL : 1,
                BOULDER : 2
            };

            var CategoryBits = {
                WALL : 0x0001,
                BOULDER : 0x0002
            };

            function Boundary(density, restitution, friction, angularDamping, linearDamping, position, size, scale, categoryBits, maskBits, type, world){
                var boundaryFixture = new b2FixtureDef;
                boundaryFixture.density = density;
                boundaryFixture.restitution = restitution;
                boundaryFixture.friction = friction;
                boundaryFixture.filter.categoryBits = categoryBits;
                boundaryFixture.filter.maskBits = maskBits;
                boundaryFixture.shape = new b2PolygonShape;
                boundaryFixture.shape.SetAsBox(size.length/scale, size.height/scale);
                var boundaryBodyDef = new b2BodyDef;
                boundaryBodyDef.type = b2Body.b2_staticBody;
                boundaryBodyDef.angularDamping =  angularDamping;
                boundaryBodyDef.linearDamping = linearDamping;
                boundaryBodyDef.position.x = position.x/ scale; 
                boundaryBodyDef.position.y = position.y/scale; 
                this.boundary = world.CreateBody(boundaryBodyDef);
                this.boundary.CreateFixture(boundaryFixture);
                this.boundary.SetUserData(this);
                this.type = type;
            };

            function Position(x, y){
                this.x = x;
                this.y = y;
            };

            function Size(length, height){
                this.length = length;
                this.height = height;
            };

            function Noir(size, scale, step, debug){
                this.GRAVITY = new b2Vec2(0, 10/(scale/5));
                this.FPS = 30;
                this.SCALE = scale; 
                this.STEP = step;
                this.TIMESTEP = 1/this.STEP;
                this.DEBUG = debug;
                this.LENGTH = size.length;
                this.LENGTH_OFFSET = 20;
                this.HEIGHT = size.height;
                this.HEIGHT_OFFSET = 10;
                this.BOUNDARY_WIDTH = 2;
                this.VELOCITY_ITERATIONS = 10;
                this.POSITION_ITERATIONS = 10;

                this.world;
                this.contactListener;
                this.canvas;
                this.debugCanvas;
                this.debugDraw;
                this.context;
                this.debugContext;
                this.stage;
                this.previousTime = Date.now();
                this.game;
            };

            Noir.prototype.initCanvas = function(){
                this.canvas = document.getElementById('canvas');
                this.context = canvas.getContext('2d');
                this.stage = new Stage(canvas);
                this.stage.snapPixelsEnabled = true;
                this.stage.mouseEventsEnabled = true;
                //this.stage.onDoubleClick = function(event){ console.log("moving.."); }

                this.stage.enableMouseOver();
                if(this.DEBUG){
                    this.debugCanvas = document.getElementById('debugCanvas');
                    this.debugContext = debugCanvas.getContext('2d');
                    console.log('Debug on');
                } 
            };

            Noir.prototype.initDebug = function(){
                this.debugDraw = new b2DebugDraw();
                this.debugDraw.SetSprite(this.debugContext);
                this.debugDraw.SetDrawScale(this.SCALE);
                this.debugDraw.SetFillAlpha(0.7);
                this.debugDraw.SetLineThickness(1.0);
                this.debugDraw.SetFlags(b2DebugDraw.e_shapeBit | b2DebugDraw.e_jointBit);
                this.world.SetDebugDraw(this.debugDraw);
            };

            Noir.prototype.setContactListener = function(){
                this.contactListener = new b2ContactListener;
                this.contactListener.events = this;
                this.contactListener.BeginContact = function(contact, manifold){
                    var bodyAUser = contact.GetFixtureA().GetBody().GetUserData();
                    var bodyBUser = contact.GetFixtureB().GetBody().GetUserData();
                    /* console.log(bodyAUser.type + " , " + bodyBUser.type); */
                    if((bodyAUser.type == Type.BOULDER) && (bodyBUser.type == Type.WALL)){ this.events.boulderWallContact(bodyAUser, bodyBUser); }
                    else if((bodyAUser.type == Type.WALL) && (bodyBUser.type == Type.BOULDER)){ this.events.boulderWallContact(bodyBUser, bodyAUser); }
                }
                this.world.SetContactListener(this.contactListener);
            };

            Noir.prototype.boulderWallContact = function(boulder, wall){ boulder.flagToDestroy(); };

            Noir.prototype.initPhysics = function(){
                this.lastTimestamp = Date.now();
                this.world = new b2World(this.GRAVITY, true);
                this.setContactListener();
                if(this.DEBUG){ this.initDebug(); console.log('Debug initialized'); } 
                var floor = new Boundary(1, 1, 0.6, 0.6, 0.6, new Position(-(this.LENGTH_OFFSET/2), (this.HEIGHT+ (this.HEIGHT_OFFSET - (this.HEIGHT_OFFSET - 1)))), 
                        new Size((this.LENGTH + this.LENGTH_OFFSET), this.BOUNDARY_WIDTH), this.SCALE, CategoryBits.WALL, CategoryBits.BOULDER, Type.WALL, this.world);
                /* var ceiling = new Boundary(1, 1, 0.6, 0.6, 0.6, new Position(-(this.LENGTH_OFFSET/2), (this.HEIGHT_OFFSET - (this.HEIGHT_OFFSET - 1))), 
                        new Size((this.LENGTH + this.LENGTH_OFFSET), this.BOUNDARY_WIDTH), this.SCALE, CategoryBits.WALL, CategoryBits.BOULDER, Type.WALL, this.world); */
                var leftFixture = new Boundary(1,1, 0.6, 0.6, 0.6, new Position(-(this.BOUNDARY_WIDTH - (this.BOUNDARY_WIDTH - 1)), -(this.LENGTH_OFFSET/2)),
                    new Size(this.BOUNDARY_WIDTH, (this.HEIGHT + this.HEIGHT_OFFSET)), this. SCALE, CategoryBits.WALL, CategoryBits.BOULDER, Type.WALL, this.world);
                var rightFixture = new Boundary(1,1, 0.6, 0.6, 0.6, new Position((this.LENGTH + (this.LENGTH_OFFSET - (this.LENGTH_OFFSET - 1))),  -(this.LENGTH_OFFSET/2)),
                    new Size(this.BOUNDARY_WIDTH,  (this.HEIGHT+ this.HEIGHT_OFFSET)), this.SCALE, CategoryBits.WALL, CategoryBits.BOULDER, Type.WALL, this.world);
            };

            Noir.prototype.tick = function(){
                this.updatePhysics();
                this.stage.update();
            };

            Noir.prototype.initTicker = function(){
                Ticker.setFPS(this.FPS);
                Ticker.useRAF = true;
                Ticker.addListener(this, true);
            };

            Noir.prototype.init = function(){
                this.initCanvas();
                this.initTicker();
                this.initPhysics();
                this.initGame(this.stage, this.world);
                var debug = document.getElementById('debug');
            };

            Noir.prototype.initOnLoadDocument = function(){
                console.log('running');
                if(document.loaded){ this.init(); }
                else{
                    if(window.addEventListener){ window.addEventListener('load', this.init(), false); }
                    else { window.attachEvent('onLoad', this.init); }
                }
            }

            Noir.prototype.updatePhysics = function(){
                    /* remove flagged objects for destruction */
                    /* update non-flagged objects */
                    if(!PAUSED){
                        this.updateGame();
                        this.world.Step(this.TIMESTEP, this.VELOCITY_ITERATIONS, this.POSITION_ITERATIONS);
                    this.world.ClearForces();
                    if(this.DEBUG){
                        this.world.m_debugDraw.m_sprite.graphics.clear();
                        this.world.DrawDebugData();
                    }
                }
            };

            Noir.prototype.initGame = function(){
                this.game = new Game(this.stage, this.SCALE, this.world);
                this.game.start();
            };

            Noir.prototype.updateGame = function(){ this.game.update(); }

            function Actor(density, restitution, friction, angularDamping, linearDamping, path, position, size, stage, scale, categoryBits, maskBits, type, world){
                this.skin = new Bitmap(path);
                this.skin.x = position.x;
                this.skin.y = position.y;
                this.skin.regX = (size.length/2);
                this.skin.regY = (size.height/2); 
                this.skin.snapToPixel = true;
                this.skin.mouseEnabled = false;
                stage.addChild(this.skin);

                var actorFixture = new b2FixtureDef;
                actorFixture.density = density;
                actorFixture.restitution = restitution;
                actorFixture.friction = friction;
                actorFixture.filter.categoryBits = categoryBits;
                actorFixture.filter.maskBits = maskBits;
                actorFixture.shape = new b2PolygonShape;
                actorFixture.shape.SetAsBox((size.length/2)/scale, (size.height/2)/scale);
                var actorBodyDef = new b2BodyDef;
                actorBodyDef.type = b2Body.b2_dynamicBody;
                actorBodyDef.angularDamping = angularDamping;
                actorBodyDef.linearDamping = linearDamping;
                actorBodyDef.position.x = this.skin.x/scale;
                actorBodyDef.position.y = this.skin.y/scale;
                this.body = world.CreateBody(actorBodyDef);
                this.body.CreateFixture(actorFixture);
                this.body.SetUserData(this);
                this.type = type;
                this.destroy = false;
            };

            Actor.prototype.flagToDestroy = function(){ this.destroy = true; };

            Actor.prototype.remove = function(game){
                game.stage.removeChild(this.skin);
                game.world.DestroyBody(this.body);
                game.actors.splice(game.actors.indexOf(this),1);
            };

            Actor.prototype.update = function(scale){  
                this.skin.rotation = this.body.GetAngle() * (180/Math.PI);
                this.skin.x = this.body.GetWorldCenter().x * scale;
                this.skin.y = this.body.GetWorldCenter().y * scale;
            };

            function Icon(path, position, size, stage){
                this.skin = new Bitmap(path);
                this.skin.x = position.x;
                this.skin.y = position.y;
                this.skin.regX = (size.length/2);
                this.skin.regY = (size.height/2); 
                stage.addChild(this.skin);
                //this.skin.onDoubleClick = function(event){ alert("click click"); }
                this.skin.onClick = function(event){ alert("click"); }
                this.skin.onPress = function(event){ console.log("pressing"); }
            };

            function Game(stage, scale, world){ 
                this.scale = scale;
                this.stage = stage;
                this.world = world;
                this.boulderSpawnDelayCounter = 0;
                this.actors = [];
                this.icon;
            };

            Game.prototype.start = function(){
                var  position = new Position(400, 200);
                var size = new Size(50, 50);
                console.log(this);
                this.icon = new Icon("images/bird.png", position, size, this.stage);
            };

            Game.prototype.controlledSpawn = function(stage, scale, world){
                var spawnInterval = (50 + Math.round(Math.random() * 10));
                this.boulderSpawnDelayCounter++;
                if(this.boulderSpawnDelayCounter % spawnInterval === 0){  
                    this.boulderSpawnDelayCounter = 0;
                    this.boulderSpawn();
                }
            };

            Game.prototype.boulderSpawn = function(stage, scale, world){
                var  position = new Position((100 + Math.round(Math.random() * 250)), -20);
                var size = new Size(50, 50);
                this.actors.push(new Actor(0.2, 0.6, 0.3, 0.3, 0.3, "images/bird.png", position, size, this.stage, this.scale, CategoryBits.BOULDER, CategoryBits.WALL, Type.BOULDER, this.world));
            };

            Game.prototype.update = function(){ 
                this.controlledSpawn();
                for(idx = 0; idx < this.actors.length; ++idx){
                 if(this.actors[idx].destroy == true){ this.actors[idx].remove(this); }}
                for(idx = 0; idx < this.actors.length; ++idx){ this.actors[idx].update(this.scale); }
            }; 
```

***.html 文件***

```
 <!doctype html>
                <html xmlns:og="http://ogp.me/ns#">
                    <head>
                        <meta charset="utf-8">
                        <title>Noir test</title>
                        <link href="css/style.css" rel="stylesheet" type="text/css" />
                    </head>
                    <body>
                        <canvas width="500" height="500" id="canvas"></canvas>
                        <canvas width="500" height="500" id="debugCanvas"></canvas>
                        <script> var createjs = window </script>
                        <script type="text/javascript" src="libs/easeljs-0.5.0.min.js"></script>
                        <script type="text/javascript" src="libs/Box2dWeb-2.1.a.3.min.js"></script>
                        <script type="text/javascript" src="js/noir.js"></script>
                        <script> var noir = new Noir(new Size(500, 500), 30, 20, false);  noir.initOnLoadDocument()</script>
                    </body>
                </html> 
```

我正在本地服务器上使用它，因此触发远程服务器的这种类似行为的服务器安全问题不适用（我认为）。伙计们，我被难住了。您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T17:04:04.787

如果没有看到你的 CSS，我猜你的调试画布在你的主画布之上。如果是这种情况，调试画布将成为任何鼠标事件的目标，从而阻止您的主画布（和相关舞台）接收它们。

由于一个错误（最近在 NEXT 版本中修复），EaselJS 在窗口而不是画布上订阅双击事件，这可能是 onDoubleClick 为您工作的原因。

此外，可能值得查看较新版本的 EaselJS。v0.7.0 包含一个很棒的新事件模型，v0.7.1 将很快推出，修复双击。

# sql - 寻找没有订购所有 3 种披萨的顾客

> ID：13459017
> 
> 赞同：3
> 
> 时间：2012-11-19T17:28:53.237
> 
> 标签：sql, oracle, sqlplus

```
customers:
+-----------+-----------+
| cid       | name      |
+-----------+-----------+
| 1         | a         | 
| 2         | b         |
| 3         | c         |
+-----------+-----------+

pizza:
+-----------+-----------+
| pid       | type      |
+-----------+-----------+
| 1         | sausage   |
| 2         | cheese    |
| 3         | veggies   |
| 4         | sausage   |
| 5         | veggies   |
| 6         | sausage   |
| 7         | sausage   |
+-----------+-----------+

orders:
+-----------+-----------+-----------+
| oid       | cid       | pid       |
+-----------+-----------+-----------+
| 1         | 1         | 1         | 
| 2         | 1         | 2         |
| 3         | 2         | 3         |
| 4         | 3         | 4         |
| 5         | 1         | 5         |
| 6         | 3         | 6         |
| 7         | 3         | 7         |
+-----------+-----------+-----------+ 
```

我在理解 sql 逻辑时遇到了一些麻烦。我如何找到没有订购所有 3 种披萨的顾客？这三种类型是香肠、奶酪和蔬菜。我需要使用`NOT EXIST`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:36:10.360

您可以使用一个`having`子句来查找订购少于 3 种披萨类型的客户：

```
select  c.name
from    customers c
join    orders c
on      c.cid = c.id
join    pizza p
on      p.id = c.pid
group by
        c.name
having
        count(distinct p.type) < 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:40:06.193

你可以使用这样的东西：

```
select c.cid,
  c.name
from customers c
left join orders o
  on c.cid = o.cid
left join pizza p
  on o.pid = p.pid
where p."type" in ('sausage', 'cheese', 'veggies')  -- if you have more pizza types list them here
group by c.cid, c.name
having count(distinct "type") <> (select count(distinct "type")
                                  from pizza) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/d365a/9)

或者

```
select c.cid,
  c.name
from customers c
left join orders o
  on c.cid = o.cid
left join pizza p
  on o.pid = p.pid
where p."type" in ('sausage', 'cheese', 'veggies')
group by c.cid, c.name
having count(distinct "type") <> 3  -- this is equal to the number of pizza types from the IN clause above 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:41:15.317

`select cid, count(distinct type) as c from orders join pizza on orders.pid = pizza.pid group by cid having c < 3;`

# objective-c - dyld：找不到符号：更新到 OSX 10.8 后的 __NSConcreteGlobalBlock

> ID：13459023
> 
> 赞同：3
> 
> 时间：2012-11-19T17:29:16.790
> 
> 标签：objective-c, macos, cocoa

我刚刚更新到 Mac OSX10.8，我正在尝试编译一个在使用 10.7 + Xcode 4.5 时可以完美运行的 Mac 应用程序。现在我得到这个错误：

dyld：找不到符号：__NSConcreteGlobalBlock

预期在：/System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices

我到处看了看，一切似乎都很好。该应用程序的部署目标是 10.6，它已经支持块。有任何想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T10:41:55.030

事实证明，我的项目正在尝试使用导致此问题的旧版本的 CoreServices 框架。我重新添加了我的项目正在使用的所有框架，问题就消失了:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T01:05:31.890

+1 关于您的问题...不确定这是否有助于找到 OS X 的问题，但 iPhone 应用程序也会发生类似的错误，下面的链接中提供了解决方案。我提供此链接的另一个原因是谷歌搜索 iPhone 的此错误让我访问了此页面。 [iOS 4 应用程序在 iOS 3.1.3 上启动时崩溃：找不到符号：__NSConcreteStackBlock](https://stackoverflow.com/questions/3313786/ios-4-app-crashes-at-startup-on-ios-3-1-3-symbol-not-found-nsconcretestackbl)

# java - JSP/JSF中列显示逻辑的改变顺序

> ID：13459024
> 
> 赞同：1
> 
> 时间：2012-11-19T17:29:29.777
> 
> 标签：java, jsp, jsf

我有问题。

我有一个数据库列作为 jan、feb、mar 直到 dec，每列都有不同的值。

我将这些值作为 jan、feb 等加载到 Java 对象中。在 UI、JSP 中，我遍历此对象列表并将列显示为 jan、feb 等。

但现在我的要求是根据当前月份显示。

例如。当前月份是 11 月，因此要显示的列是 11 月、12 月、1 月、2 月……直到 10 月。所以现在列的顺序会根据当前月份发生变化。我该怎么做？任何有关逻辑的帮助将不胜感激？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:01:54.567

你在寻找这样的东西。

```
<rich:dataTable value="#{aBean.aList}" var="_var">
    <c:forEach var="column" items="#{myBean.columnsList}" >
      <rich:column>
         <f:facet name="header">#{column.headerName}</f:facet>
         Hello!
      </rich:column>
    </c:forEach>
</rich:dataTable> 
```

你的豆子会是这样的。

```
public class MyBean {
  List<String> months = new ArrayList<String>();
  List<Column> columnsList = new ArrayList<Column>();
  String currentMonth = "Apr";

  public MyBean() {//Adding months
    months.add("Jan");
    months.add("Feb");
    months.add("Mar");
    months.add("Apr");
    months.add("May");
  }

  public List<Column> getColumnsList() {//Building columns
    for(int i = months.indexOf(currentMonth); ;) {
      Column c = new Column(months.get(i));
      columnsList.add(c);

      if(i == months.size() - 1) {
        i = 0;
      } else {
        i++;
      }
      if(i == months.indexOf(currentMonth)) {
        break;
      }
    }
    return columnsList;
  }

  public class Column {
    String headerName;
    Column(String headerName) {
      this.headerName = headerName;
    }
    public String getHeaderName() {
      return headerName;
    }
  }
} 
```

更改变量的值`currentMonth`并检查其行为是否符合您的预期。

编辑：

* * *

您必须导入命名空间`xmlns:c="http://java.sun.com/jstl/core"`

# java - 将 MySQL 几何映射到 EJB 实体时出错

> ID：13459027
> 
> 赞同：1
> 
> 时间：2012-11-19T17:29:45.947
> 
> 标签：java, mysql, ejb, persistence, spatial

我需要将地理空间信息（具体而言是“点”）添加到 MySQL 数据库（v5.5.28）的条目中。我尝试使用简单的代码将创建的列“位置”映射到我的 java EJB 实体 ServiceInfo 的相应属性：

```
@Column(name = "location")
private com.vividsolutions.jts.geom.Point location; 
```

但是，这会导致以下错误：

```
Exception [EclipseLink-66] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: Could not deserialize object from byte array.
Internal Exception: java.io.StreamCorruptedException: invalid stream header: 00000000
Mapping: org.eclipse.persistence.mappings.DirectToFieldMapping[location-->ServiceInfo.location]
Descriptor: RelationalDescriptor(ies.persistence.entity.ServiceInfo --> [DatabaseTable(ServiceInfo)])
at org.eclipse.persistence.exceptions.DescriptorException.notDeserializable(DescriptorException.java:1218)
at org.eclipse.persistence.mappings.converters.SerializedObjectConverter.convertDataValueToObjectValue(SerializedObjectConverter.java:72)
... 
```

我认为问题在于 java mysql 连接器（v5.1.22）不支持地理空间信息，这让我感到惊讶，因为数据库支持。有人可以确认是这种情况，还是告诉我我可能做错了什么并指出正确的方向？

我在 Netbeans 7.2 中工作，使用 JDK 1.7 和 GlassFish Server 3.1.2

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T11:27:30.620

好的，所以我最终通过对我的持久层进行以下更改来解决我的问题：

我使用空间扩展 PostGIS 从 MySQL 数据库切换到 PostgeSQL 数据库。原因是 MySQL 仅部分实现了 OpenGIS 规范。接下来，我不得不将 EclipseLink (JPA 2.0)（默认）的持久化单元更改为 Hibernate (JPA 2.0)。

包含在我的项目和 glassfish 的类路径中的罐子（否则似乎无法找到它们。我不得不将它们复制到 domain1 的根目录）是：

*   postgresql-9.2-1002.jdbc4.jar
*   postgis-jdbc-2.1.0SVN.jar
*   Hibernate 4.1.8（所有必需的 jars，可选的 ehcache 和 JPA 的 hibernate-entitymanager-4.1.8.Final.jar ......这些都包含在发布包中）
*   hibernate-spatial-4.0-M1.jar（hibernate-spatial-1.1.1.jar 和 hibernate-spatial-postgis-1.1.1.jar 与 Hibernate 4.x 不兼容！）。
*   jts-1.8.jar

生成的 persistence.xml 文件为：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="IES-ejbPU" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/postgresql_iesdb3</jta-data-source>
    <class>ies.persistence.entity.ServiceInfo</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties>
      <property name="hibernate.dialect" value="org.hibernate.spatial.dialect.postgis.PostgisDialect"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
  </persistence-unit>
</persistence> 
```

用于我的 EJB 实体的注释是：

```
@Type(type="org.hibernate.spatial.GeometryType") 
@Column(name = "location", columnDefinition="Geometry")
private com.vividsolutions.jts.geom.Geometry location; 
```

我们现在使用 Hibernate + JPA + PostgeSQL/PostGIS 进行了适当的映射。

# linux - -O2 优化会破坏某些机器上的 C++ 代码

> ID：13459028
> 
> 赞同：3
> 
> 时间：2012-11-19T17:29:50.470
> 
> 标签：linux, g++

我有 3 台不同的机器，配置如下：

1.  OpenSuSe 12.1、Linux 内核 3.1.10、gcc 4.6.2
2.  Debian 6，Linux 内核 2.6.32，gcc 4.4.5
3.  CentOS 5.6，linux内核2.6.18，gcc 4.1.2

他们所有的架构都是 x86_64。请注意，CentOS 的软件版本比 Debian 的旧，但 OpenSuSe 软件的版本比 Debian 的新。

我有以下示例代码：

```
#include <cstdio>
#include <cstdlib>

unsigned int cols=5;
unsigned int rows=6;

int main()
{
        //allocating...
        double **mat=new double*[rows];
        double *col=new double[rows];
        for(unsigned int i=0;i<rows;++i)
        {
                mat[i]=new double[cols];
        }

        //filling with something...
        for(unsigned int i=0;i<rows;++i)
        {
                for(unsigned int j=0;j<cols;++j)
                {
                        mat[i][j]=i+j;
                }
        }

        //testing...
        unsigned long long sum,add;
        for(unsigned int i=0;i<cols;++i)
        {
                sum=0;
                for(unsigned int j=0;j<rows;++j)
                {
                        col[j]=mat[j][i];
                        add=*((unsigned long long*) (&(col[j])));
                        sum+=add;
                }

                printf("%llu\n",sum);
        }

        return 0;
} 
```

如果我在没有任何选项的情况下编译此代码：

```
g++ code.cpp 
```

它在所有机器上以相同的方式运行。

但是如果我用 编译它`-O2`，它在第 1 台和第 3 台机器上的行为方式相同，但在第 2 台机器（Debian）上，`-O2`优化会破坏它。

这是此代码在第一台机器上的输出`-O2`：

```
4619567317775286272
9238008735643729920
9250393634618998784
9259400833873739776
9266719183268216832 
```

这是在第二台机器上`-O2`：

```
0
4619567317775286272
9238008735643729920
9250393634618998784
9259400833873739776 
```

第二台机器的输出看起来像第一个输出，向下移动了一行。

如果我替换`(&(col[j]))`为`(&(mat[j][i]))`，代码开始正常工作。

`-v`这是带有和`-O2`选项的第二台机器上编译器的输出：

```
Using built-in specs.
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Debian 4.4.5-8' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.4 --enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 --libdir=/usr/lib --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --with-arch-32=i586 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.4.5 (Debian 4.4.5-8) 
COLLECT_GCC_OPTIONS='-v' '-O2' '-shared-libgcc' '-mtune=generic'
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/cc1plus -quiet -v -D_GNU_SOURCE dmtest.cpp -quiet -dumpbase dmtest.cpp -mtune=generic -auxbase dmtest -O2 -version -o /tmp/cc6v7CNY.s
ignoring nonexistent directory "/usr/local/include/x86_64-linux-gnu"
ignoring nonexistent directory "/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../x86_64-linux-gnu/include"
ignoring nonexistent directory "/usr/include/x86_64-linux-gnu"
#include "..." search starts here:
#include <...> search starts here:
 /usr/include/c++/4.4
 /usr/include/c++/4.4/x86_64-linux-gnu
 /usr/include/c++/4.4/backward
 /usr/local/include
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/include
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/include-fixed
 /usr/include
End of search list.
GNU C++ (Debian 4.4.5-8) version 4.4.5 (x86_64-linux-gnu)
        compiled by GNU C version 4.4.5, GMP version 4.3.2, MPFR version 3.0.0-p3.
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 5a2e15051eaa06a84cf6320b754ba993
COLLECT_GCC_OPTIONS='-v' '-O2' '-shared-libgcc' '-mtune=generic'
 as -V -Qy -o /tmp/ccL37GHG.o /tmp/cc6v7CNY.s
GNU assembler version 2.20.1 (x86_64-linux-gnu) using BFD version (GNU Binutils for Debian) 2.20.1-system.20100303
COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/
LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/:/lib/../lib/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../:/lib/:/usr/lib/
COLLECT_GCC_OPTIONS='-v' '-O2' '-shared-libgcc' '-mtune=generic'
 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/collect2 --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=both -dynamic-linker /lib64/ld-linux-x86-64.so.2 /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crt1.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crti.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtbegin.o -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5 -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5 -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib -L/lib/../lib -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../.. /tmp/ccL37GHG.o -lstdc++ -lm -lgcc_s -lgcc -lc -lgcc_s -lgcc /usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crtn.o 
```

这种行为的原因是什么？我的代码不正确还是 gcc 4.4.5 中的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:39:21.033

这是类型双关语，因此是未定义的行为。我很惊讶你没有收到关于它的警告。

当然，它通常按您期望的方式工作，但它仍然是未定义的行为。

要绕过未定义的行为部分，您可以强制转换为 a`char *`并连续读取每个字节。这是否解决了您所看到的行为？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T09:05:16.930

根据[这篇博文](http://jeffreystedfast.blogspot.de/2010/01/weird-bugs-due-to-gcc-44-and-strict.html)，GCC 4.4 对`-O2`. 因此，类型双关语访问会导致未定义的行为。不幸的是，为了获得违反严格别名规则的警告，您必须使用`-Wstrict-aliasing`.

也许较新版本的 GCC 已经恢复到旧的行为，并将是否启用严格别名的决定留给用户。

# php - 将密码盐与密码哈希分开存储？

> ID：13459031
> 
> 赞同：0
> 
> 时间：2012-11-19T17:30:08.553
> 
> 标签：php, passwords, password-encryption

> **可能重复：**
> [腌制和储存盐的最佳方法是什么？](https://stackoverflow.com/questions/1753028/what-is-best-possible-way-of-salting-and-storing-salt)
> [使用随机盐改进密码散列](https://stackoverflow.com/questions/9420722/improve-password-hashing-with-a-random-salt)

假设使用正确的密码散列算法并为每个密码生成不同的盐......

将盐与密码哈希分开存储是否存在安全风险？例如。在数据库表中，将密码哈希存储在一列中，并将密码盐存储在单独的列中？

我看到了通过使用特定算法将盐嵌入密码哈希本身的策略。稍后可以从密码哈希中提取盐。这更安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:35:37.040

从我读过和做过的所有事情来看，将密码哈希和密码盐存储在单独的列中没有任何问题，这是最常见的方法。

身份验证的基本方法应该是这样的：

1.  使用用户提供的用户名或电子邮件检索 user_id 和 password_salt
2.  Concat 用户提供的密码输入和检索到的盐
3.  对组合字符串使用散列算法
4.  根据数据库中的哈希检查创建的哈希

# visual-studio - 有没有办法使用通配符指定过滤器？

> ID：13459039
> 
> 赞同：3
> 
> 时间：2012-11-19T17:30:35.740
> 
> 标签：visual-studio, visual-c++

我们的 Visual Studio 项目使用具有大量目录和文件的源代码库。其他程序员使用其他 IDE/系统，当他们在源库中添加新文件时，visual-studio 用户必须将这些文件重新添加到相应的过滤器目录中（即 1:1 以下目录结构）。

没有办法对visual studio说，自动遵循目录结构吗？如果这不可能，是否至少可以通过通配符指定过滤器内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-25T12:24:53.717

我没有找到让它在 Visual Studio 中工作的方法，但是为我们解决它的解决方法是使用 fastbuild ( [http://fastbuild.org](http://fastbuild.org) )。它不仅可以用来加速编译，还可以生成 Visual Studio 文件。这使我们可以从存储库中删除 Visual Studio 文件并即时生成它们。由于文件是在 fastbuild 中合理指定的（[recursive] 目录 + 文件列表 + 排除的文件/目录），因此当使用 linux 的人只是将新的 cpp 文件添加到其中时，它会自动工作。

# css - 需要帮助使用 CSS 定位背景图像

> ID：13459042
> 
> 赞同：2
> 
> 时间：2012-11-19T17:30:40.797
> 
> 标签：css, background-image

这是我第一次尝试非表格布局，我真的很挣扎。我确实花了几个小时反复试验和研究/阅读帖子和文章。因此，在有人说“询问并回答”并建议关闭此问题之前，请听我说完并提供一些建议。非常感谢。

我有两张图片，一张用于跨越页面顶部的标题，一张用于导航菜单，它应该位于左侧标题图片的正下方。标题将显示在标题图像的顶部（没有问题），一个简单的无序列表链接将显示在导航图像的顶部。显然，导航图像应该像“连接”到顶部图像一样无缝显示。我将使用 php include 将它们放在网站的所有页面上，在这两个图像和菜单正确定位后，我将把单个页面的内容放在标题下方和导航菜单的右侧。

在这一点上，我的挣扎是试图弄清楚 a）为什么导航图像根本不会显示，以及 b）为什么菜单显示在页面中间。

如果我只是对导航图像使用 img 标签，它会显示在页面上，所以我知道并不是浏览器无法“找到”它......

导航图像是否因为在 div 中而未显示？我在这里想念什么？

我还需要它尽可能跨浏览器兼容（至少 IE7+、FF3.6+、Safari、Chrome）。

编码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Some Website</title>
</head>
<body style="margin: 50%; padding; 0; width: 1000px; font-size: .8em; background-image: url(images/header.png); background-repeat: no-repeat; background-attachment: fixed; background-position: center top;">

    <div id="navMenu" style="background-image: url(images/navBackground.png); background-repeat: no-repeat; background-attachment: fixed; background-position: 0px 200px;">
        <ul>
            <li>Home</li>
            <li>Business Directory</li>
            <li>City Government</li>
            <li>Community Calendar</li>
            <li>News</li>
            <li>The Story of the Thing</li>
            <li>The History of Somewhere</li>
            <li>The Park</li>
            <li>Churches and Schools</li>
            <li>Recreation</li>
            <li>Fire Department</li>
            <li>Map</li>
            <li>Contact Us</li>
        </ul>
    </div>
</body> 
```

作为参考，header.png 为 1000x200px，navBackground.png 为 200x500px

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:41:31.550

背景图像未显示的原因是因为您使用的是“背景附件：固定”。通过删除它，您的背景位置将相对于它所附加的容器。

另一个问题是导航位置。样式 "margin: 50%" 将采用页面宽度的百分比并将其应用于容器的所有 4 个侧面。通过以像素为单位设置静态宽度，或使用速记正确设置边距，您应该会获得更理想的结果。这是我将使用“margin: 200px auto”的速记示例。这将使它排在一个更好的位置。要了解有关速记的更多信息，请查看此页面：[http ://www.dustindiaz.com/css-shorthand/](http://www.dustindiaz.com/css-shorthand/)

另外，我建议将您的样式表外部化以清理您的标记。基本上，您链接到文档头部的样式表，并使用类名和 ID 定位元素。看看这篇文章：[http ://www.tizag.com/cssT/external.php](http://www.tizag.com/cssT/external.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:40:16.927

在您的 CSS 中，您可以从 #navMenu 中删除此 CSS

```
#navMenu { background-attachment: fixed; } 
```

您可能还需要仔细检查图像的背景位置。

如果你摆脱它，背景图像应该会出现。

就第二个问题而言，由于页面正文的边距为 50%，因此它以页面为中心。这将导致一切都以这样的方式居中。

# opengl - GLSL Shadowmap 为某些视图方向生成不正确的阴影

> ID：13459047
> 
> 赞同：0
> 
> 时间：2012-11-19T17:30:59.380
> 
> 标签：opengl, glsl, shadow

我正在 GLSL 着色器中实现阴影贴图，并得到了类似于附加图像的东西。我很确定，因为您可以看到左侧球体的阴影不正确。谁能指出为什么会这样？当我使用鼠标移动场景时，这种阴影只出现在某些特定的视图方向上。

![阴影不正确的 Glsl 阴影贴图](../Images/8100b28065ff7ab82c2700499e60722d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:58:40.847

看起来您没有在阴影贴图中渲染整个场景，因此部分球体不适合。修复阴影相机（光源相机）属性应该会对您有所帮助。

# java - 在 Java 中播放不同的声音文件

> ID：13459050
> 
> 赞同：1
> 
> 时间：2012-11-19T17:31:08.300
> 
> 标签：java, audio

我正在尝试在 Java 中的不同时间播放多个声音文件。我通过停止一个文件然后在几秒钟后启动另一个文件来做到这一点。但是，每当我这样做时，每当我尝试切换文件时，Java 都会冻结或抛出错误。这是我用来播放不同文件的功能：

```
public void backgroundSound(String musicFile){
    System.out.println("1");
    if(this.clip!= null){
        if(this.clip.isRunning()){
            this.clip.close();
         }
    }
    System.out.println("2");
    try{
        File soundFile = new File(musicFile);
        AudioInputStream audioIn =
            AudioSystem.getAudioInputStream(soundFile);
        this.clip = AudioSystem.getClip();
        this.clip.open(audioIn); // line 538
        this.clip.start();
        this.clip.loop(Clip.LOOP_CONTINUOUSLY);
    }

    catch (UnsupportedAudioFileException e) {
            e.printStackTrace();
      } catch (IOException e) {
     e.printStackTrace();
      } catch (LineUnavailableException e) {
     e.printStackTrace();
      }
} 
```

任何帮助，将不胜感激。

`this.clip.flush()`这是使用而不是时的堆栈跟踪`this.clip.close()`：

```
javax.sound.sampled.LineUnavailableException: line with format PCM_SIGNED 44100.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian not supported.
        at com.sun.media.sound.DirectAudioDevice$DirectDL.implOpen(DirectAudioDevice.java:492)
        at com.sun.media.sound.DirectAudioDevice$DirectClip.implOpen(DirectAudioDevice.java:1278)
        at com.sun.media.sound.AbstractDataLine.open(AbstractDataLine.java:107)
        at com.sun.media.sound.DirectAudioDevice$DirectClip.open(DirectAudioDevice.java:1059)
        at com.sun.media.sound.DirectAudioDevice$DirectClip.open(DirectAudioDevice.java:1149)
        at MyGame.backgroundSound(MyGame.java:538)
        at MyGame.actionPerformed(MyGame.java:161)
        at javax.swing.Timer.fireActionPerformed(Timer.java:291)
        at javax.swing.Timer$DoPostEvent.run(Timer.java:221)
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:666)
        at java.awt.EventQueue.access$400(EventQueue.java:81)
        at java.awt.EventQueue$2.run(EventQueue.java:627)
        at java.awt.EventQueue$2.run(EventQueue.java:625)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:636)
        ... 
```

# jquery - 插入时表格元素被切断

> ID：13459053
> 
> 赞同：0
> 
> 时间：2012-11-19T17:31:22.917
> 
> 标签：jquery, html, jquery-1.7

下面是我的html

```
<table id="myTable" class="dropdown">
 <thead> ........... </thead>
 <tbody class="myTbody1">
            <!--     insert here       -->
 <tbody class="myTbody2">
 <tbody class="myTbody3">
</table> 
```

我需要在 tbody 之后插入下面的 html 字符串，`myTbody1`

```
var html = '<tbody class="details" colspan="9">
<table>
    <thead> 
        <tr>
            <th> Col1 </th>     
            <th> Col2 </th>     
            <th> Col3 </th>     
            <th> Col4 </th>     
            <th> Col5 </th>     
            <th> Col6 </th>     
            <th> Col7 </th>     
            <th> Col8 </th>     
            <th> Col9 </th> 
        </tr>
    </thead>    
    <tbody class="head">    
        <tr class="nestedRow">              
            <td> Data</td>      
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
        </tr>
    </tbody>
</table>
</tbody>' 
```

我尝试像下面那样做，它插入到正确的位置，但它正在从 html 字符串中剪切前两个标签 tbody 和 table。

```
$(html).insertAfter($(this)); 
```

哪里`$(this)`等于`tbody.myTbody1`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:53:36.900

[如指定](http://dev.w3.org/html5/spec/single-page.html#the-tbody-element)，`tbody`只能包含`tr`元素。由于您传递的 HTML 无效，因此 jQuery 仅适用于在 DOM 中创建的有效部分。

要制作这样的嵌套表，您必须添加一个`tr`and`td`元素作为 的子元素，`tbody`并将内部表放在`td`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:21:16.687

您可以使用 Shahil 提供的 JQuery 轻松嵌套表格，但您需要将整个嵌套表格包含在“tr”开始和结束标记中。您的第二个代码示例应阅读

```
var htmlToInsert = '<tr>
<td class="details" colspan="9">
<table>
    <thead> 
        <tr>
            <th> Col1 </th>     
            <th> Col2 </th>     
            <th> Col3 </th>     
            <th> Col4 </th>     
            <th> Col5 </th>     
            <th> Col6 </th>     
            <th> Col7 </th>     
            <th> Col8 </th>     
            <th> Col9 </th> 
        </tr>
    </thead>    
    <tbody class="head">    
        <tr class="nestedRow">              
            <td> Data</td>      
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
            <td> Data</td>
        </tr>
    </tbody>
</table>
<td>
</tr>' 
```

然后我会使用 JQuery`$('.myTBody1').html(htmlToInsert);`

最后，确保您的`<tbody>`标签具有匹配的`</tbody>`结束标签。

有关更多信息，请访问[JQuery API - .html()](http://api.jquery.com/html/)

# c++ - std::initializer_list 变体

> ID：13459057
> 
> 赞同：5
> 
> 时间：2012-11-19T17:31:41.547
> 
> 标签：c++, syntax, c++11, initialization, initializer-list

下面三个用s初始化有什么区别`std::initializer_list`？

```
std::vector<int> a{ 2, 3, 5, 7};
std::vector<int> b( { 2, 3, 5, 7} );
std::vector<int> c = { 2, 3, 5, 7}; 
```

在上面的示例中，`std::vector`只是一个占位符，但我对一般答案感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:08:51.513

> 在上面的示例中， std::vector 只是一个占位符，我对一般答案感兴趣。

你想要一个多“一般”的答案？因为这意味着什么*实际上*取决于您正在初始化的类型是什么以及它们具有哪些构造函数。

例如：

```
T a{ 2, 3, 5, 7};
T b( { 2, 3, 5, 7} ); 
```

这*可能*是两种不同的东西。或者他们可能不会。这取决于构造函数`T`有什么。如果`T`有一个构造函数接受一个`initializer_list<int>`（或其他一些`initializer_list<U>`，其中`U`是一个整数类型），那么这两个都将调用该构造函数。

但是，如果它没有那个，那么这两个将做不同的事情。第一个，将尝试调用一个构造函数，该构造函数接受 4 个可以由整数文字生成的参数。第二个将尝试调用一个带有*一个参数*的构造函数，它将尝试用它来初始化`{2, 3, 5, 7}`。这意味着它将遍历每个单参数构造函数，确定该参数的类型是什么，并尝试使用`R{2, 3, 5, 7}`如果这些都不起作用，那么它将尝试将其作为`initializer_list<int>`. 如果这不起作用，那么它就会失败。

`initializer_list`构造函数始终具有优先权。

请注意，`initializer_list`构造函数仅在起作用，因为`{2, 3, 5, 7}`它是一个花括号初始化列表，其中每个元素都具有相同的类型。如果你有`{2, 3, 5.3, 7.9}`，那么它不会检查`initializer_list`构造函数。

```
T c = { 2, 3, 5, 7}; 
```

这将表现得像`a`，除了它会做什么样的转换。由于这是复制列表初始化，它将尝试调用一个 initializer_list 构造函数。如果没有这样的构造函数可用，它将尝试调用 4 参数构造函数，但它只允许将其 for 参数*隐式转换*为类型参数。

这是唯一的区别。它不需要复制/移动构造函数或任何东西（规范只在 3 个地方提到了复制列表初始化。当复制/移动构造不可用时，它们都没有禁止它）。`a`除了它允许在其参数上进行的那种转换之外，它几乎完全等同于。

这就是它通常被称为“统一初始化”的原因：因为它几乎在任何地方都以相同的方式工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:10:45.690

传统上（C++98/03），初始化像`T x(T());`调用直接初始化，初始化像`T x = T();`调用复制初始化。当您使用复制初始化时，需要存在可用的复制ctor，即使它可能未使用（即通常未使用）。

初始化程序列出了一种更改。查看 §8.5/14 和 §8.5/15 表明术语*直接初始化*和*复制初始化*仍然适用——但查看 §8.5/16，我们发现对于带括号的初始化列表，这是一个没有区别的区别，至少对于您的第一个和第三个示例：

> — 如果初始值设定项是（无括号的）大括号初始化列表，则对象或引用是列表初始化的（8.5.4）。

因此，第一个和第三个示例的实际初始化是相同的，并且都不需要复制 ctor（或移动 ctor）。在这两种情况下，我们都在处理 §8.5.4/3 中的第四个项目符号：

> — 否则，如果 T 是类类型，则考虑构造函数。枚举适用的构造函数，并通过重载决议（13.3、13.3.1.7）选择最佳构造函数。如果需要缩小转换（见下文）来转换任何参数，则程序格式错误。

...所以两者都使用以 an作为参数`std::vector`的 ctor 。`std::initializer_list<T>`

然而，如上面的引用所述，这只处理“（非括号）括号初始化列表”。对于带有括号括起来的初始化列表的第二个示例，我们进入第 8.5/16 节的第六个项目符号的第一个子项目符号（geeze - 真的需要与某人讨论为这些项目添加数字）：

> — 如果初始化是直接初始化，或者如果是复制初始化，其中源类型的 cv 非限定版本与目标类相同或派生类，则考虑构造函数。枚举了适用的构造函数（13.3.1.3），并通过重载决议（13.3）选择最佳构造函数。调用如此选择的构造函数来初始化对象，使用初始化表达式或表达式列表作为其参数。如果没有构造函数适用，或者重载决议不明确，则初始化格式错误。

由于这使用了直接初始化的语法，并且括号内的表达式是一个花括号初始化器列表，并且`std::vector`有一个接受初始化器列表的 ctor，这就是选择的重载。

底线：虽然通过标准到达那里的路线不同，但所有三个最终都使用`std::vector`的构造函数重载 for `std::initializer_list<T>`。从任何实际的角度来看，这三者之间没有区别。这三个都将调用`vector::vector(std::initializer_list<T>`，而不会发生任何副本或其他转换（即使是那些可能被忽略并且仅在理论上真正发生的转换）。

但是，我相信值略有不同，但存在（或至少可能存在）一个微小的差异。§8.5.4/3 禁止缩小转换，因此您的第二个示例（可以说，它没有通过 §8.5.4/3）可能应该允许缩小转换，而其他两个显然没有。但是，即使我是个老赌徒，我也不会在编译器真正认识到这种区别并允许在一种情况下而不是其他情况下进行缩小转换上打赌（我觉得这有点令人惊讶，并且相当怀疑它是打算被允许）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T20:41:41.047

让我们从`std::vector`. 并调用它`T`。

```
T t{a, b, c};
T t = { a, b, c };
T t({a, b, c}); 
```

前两种形式是列表初始化（它们之间*唯一*的区别是 if`T`是一个类，因为第二种`explicit`构造函数是禁止调用的。如果调用了一个，程序就变成了病态的）。最后一种形式只是普通的直接初始化，正如我们在 C++03 中所知道的那样：

```
T t(arg); 
```

出现`{a, b, c}`as *arg*意味着构造函数调用的参数是一个大括号初始值设定项列表。第三种形式没有列表初始化所具有的特殊处理。`T` *那里必须*是类类型，即使花括号初始化列表只有 1 个参数。我很高兴我们在这种情况下发布 C++11 之前[制定了明确的规则。](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1214)

* * *

至于第三个调用什么构造函数，让我们假设

```
struct T {
  T(int);
  T(std::initializer_list<int>);
};

T t({1}); 
```

由于直接初始化只是对重载构造函数的调用，我们可以将其转换为

```
void ctor(int); 
void ctor(std::initializer_list<int>);
void ctor(T const&);
void ctor(T &&); 
```

我们可以使用两个尾随函数，但如果我们选择这些函数，我们将需要用户定义的转换。为了初始化`T ref`参数，将使用列表初始化，因为这不是带括号的直接初始化（因此参数初始化等效于`T ref t = { 1 }`）。前两个函数是完全匹配的。但是，标准说，在这种情况下，当一个函数转换为`std::initializer_list<T>`而另一个没有转换时，则前一个函数获胜。因此，在这种情况下，`ctor`将使用第二个。*请注意，在这种情况下，我们不会使用第一个初始化列表 ctor 进行两阶段重载解析 - 只有列表初始化会这样做*。

* * *

对于前两个，我们将使用列表初始化，它会做与上下文相关的事情。如果`T`是一个数组，它将初始化一个数组。以这个例子为例

```
struct T {
  T(long);
  T(std::initializer_list<int>);
};

T t = { 1L }; 
```

在这种情况下，我们进行*两阶段过载解决*。我们首先只考虑初始化列表构造函数并查看一个是否匹配，作为参数，我们采用整个大括号初始化列表。第二个ctor匹配，所以我们选择它。我们将忽略第一个构造函数。如果我们没有初始化列表 ctor 或者没有匹配项，我们将获取所有 ctor 和初始化列表的元素

```
struct T {
  T(long);

  template<typename A = std::initializer_list<int>>
  T(A);
};

T t = { 1L }; 
```

在这种情况下，我们选择第一个构造函数，因为`1L`无法转换为`std::initializer_list<int>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T17:51:48.417

我在 gcc 4.7.2 上使用了一个自定义类`std::initializer_list`，其中包含一个构造函数。我尝试了所有这些场景等等。对于这 3 个语句，该编译器的可观察结果似乎确实没有区别。

**编辑：**这是我用于测试的确切代码：

```
#include <iostream>
#include <initializer_list>

class A {
public:
  A()                    { std::cout << "A::ctr\n"; }
  A(const A&)            { std::cout << "A::ctr_copy\n"; }
  A(A&&)                 { std::cout << "A::ctr_move\n"; }
  A &operator=(const A&) { std::cout << "A::=_copy\n"; return *this; }
  A &operator=(A&&)      { std::cout << "A::=_move\n"; return *this; }
  ~A()                   { std::cout << "A::dstr\n"; }
};

class B {
  B(const B&)            { std::cout << "B::ctr_copy\n"; }
  B(B&&)                 { std::cout << "B::ctr_move\n"; }
  B &operator=(const B&) { std::cout << "B::=copy\n"; return *this; }
  B &operator=(B&&)      { std::cout << "B::=move\n"; return *this; }
public:
  B(std::initializer_list<A> init) { std::cout << "B::ctr_ user\n"; }
  ~B()                             { std::cout << "B::dstr\n"; }
};

int main()
{
  B a1{ {}, {}, {} };
  B a2({ {}, {}, {} });
  B a3 = { {}, {}, {} };
  // B a4 = B{ {}, {}, {} }; // does not compile on gcc 4.7.2, gcc 4.8 and clang (top version)
  std::cout << "--------------------\n";
} 
```

`a1`，`a2`并`a3`在 gcc 4.7.2、gcc 4.8 和最新的 clang 上编译良好。对于所有 3 个案例，我也没有看到在列表成员上执行的操作数量之间有任何可观察到的结果。`B`如果我将复制/移动构造函数设为私有/删除，则最后一种情况（不是来自问题）不会编译。

# jquery - 离开页面时执行功能或

> ID：13459062
> 
> 赞同：0
> 
> 时间：2012-11-19T17:32:08.620
> 
> 标签：jquery, ajax

我正在尝试编写一个函数来显示用户是否登录。当用户离开站点时，该函数应该在数据库中进行更改，这是我当前的代码：

```
$(window).bind('beforeunload', function(){
$.ajax({
        url: "change_to_logged_out.php",
        success: function(data){
            alert(data)
         }
      });
}); 
```

当用户重新加载页面时，代码不会执行，这是我想要的，但是当有人关闭选项卡或窗口时执行，也很好。但是，如果用户只是单击重定向到我网站上另一个页面的链接，则会执行代码。如果用户单击指向站点上其他位置的链接，但如果用户被重定向到不同的站点，我该如何使该功能忽略？也许有更好的方法来制作这样的功能？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:38:16.387

外部选择器取自这里：http: [//james.padolsey.com/javascript/extending-jquerys-selector-capabilities/](http://james.padolsey.com/javascript/extending-jquerys-selector-capabilities/)

```
$.expr[":"].external = function(el){
   if(!el.href) {return false;}
   return el.hostname && el.hostname !== window.location.hostname;
};
var clicked = 0;
$(window).bind('beforeunload', function(){
!clicked && $.ajax({
        url: "change_to_logged_out.php",
        success: function(data){
            alert(data)
         }
      });
});
$(document).on('click', 'a:external', function(){clicked = 1;}); 
```

# indentation - 崇高文本中的可见标签宽度2

> ID：13459063
> 
> 赞同：3
> 
> 时间：2012-11-19T17:32:12.013
> 
> 标签：indentation, sublimetext2

我想更改 \t （制表符）字符的宽度。我不是指设置中的 tab_size （除此之外我无法搜索其他任何内容），我指的是一个制表符字符的视觉宽度，等于 4 个空格。

如果我设置 "tab_size":4 然后将文件转换为制表符/空格，则四个空格将转换为一个制表符，或者将一个制表符转换为四个空格。那很好。但制表符的实际可见宽度似乎计算为（3 * tab_size * 空间大小）。这有效地使可见压痕增加了三倍。我不知道数字 3 是从哪里来的。我检查了设置，检查了插件，尝试在命令面板中设置不同的“选项卡宽度”，尝试了新文件和新项目（以防一些被遗忘的设置连接到旧项目）但没有成功。

我编辑了许多带有制表符和空格混合缩进的文件，即使在同一行，所以缩进在崇高的情况下被破坏了，我必须手动修复它。我想要的结果是，当我“转换为制表符”时" 或 "转换为空格" (tab_size: 4)，代码根本不动。4 个空格应转换为一个大小相同的选项卡，例如 4 个空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:57:52.120

只觉得我发现那是字体的变化。实际制表符宽度似乎计算为`tab_size`乘以 m 字符宽度。因此，唯一可能的方法似乎是切换到一种字体，其中空格与 m 字符（例如等宽字体）具有相同的宽度，以使制表符的大小`tab_size=1`等于一个空格宽度。我真的不喜欢等宽字体，但是是的，它们几乎是编程的必需品。

空间宽度似乎等于 3*tab_size 的原因是因为我的字体的空间宽度约为`m`字符的 1/3

# c++ - 尝试通过 statemetn 执行 sqlite3_step 时出现 SQL_MISUSE 错误

> ID：13459065
> 
> 赞同：0
> 
> 时间：2012-11-19T17:32:17.330
> 
> 标签：c++, sqlite

在我的 c++ 页面中，我有一个准备声明

```
sqlite3_stmt *sqlstmt; 
```

当它通过 int 传递数据时返回 SQLITE_OK

```
string query;
query = "select * from A;"
int rc = sqlite3_prepare_v2(db,query.c_str(),0,&stmt,0);
if (SQLITE_OK != rc ){ return; } 
```

功能。

然后开始下一行。

```
int rc;
rc = sqlite3_step(sqlstmt);
//rc = 21 here. 
```

SQLITE3 文档中的一个例外。我相信我当前的版本是 3.07.14.01。

[http://www.sqlite.org/c3ref/step.html](http://www.sqlite.org/c3ref/step.html)

> SQLITE_MISUSE 表示该例程被不当调用。也许它是在已经完成的准备好的语句上调用的，或者是在之前返回 SQLITE_ERROR 或 SQLITE_DONE 的语句上调用的。或者可能是同一数据库连接同时被两个或多个线程使用。
> 
> 对于 SQLite 直到 3.6.23.1（包括 3.6.23.1）的所有版本，在 sqlite3_step() 返回除 SQLITE_ROW 之外的任何内容之后，在任何后续调用 sqlite3_step() 之前都需要调用 sqlite3_reset()。未能使用 sqlite3_reset() 重置准备好的语句将导致从 sqlite3_step() 返回 SQLITE_MISUSE。但是在 3.6.23.1 版本之后，sqlite3_step() 开始在这种情况下自动调用 sqlite3_reset() 而不是返回 SQLITE_MISUSE。这不被视为兼容性中断，因为任何收到 SQLITE_MISUSE 错误的应用程序都被定义为中断。SQLITE_OMIT_AUTORESET 编译时选项可用于恢复旧行为。

**实际代码功能**

向量 cDataInterpretor::getWorkingSet(int userID){ 向量 t_val; 向量 retVal; sqlite3 *db; 国际协调委员会；rc = sqlite3_open(databasePath.c_str(), &db); if(rc != SQLITE_OK){ sqlite3_close(db); 返回 t_val；} string query = "select * from insp_Assets;"; char* 错误消息；

```
sqlite3_stmt *sqlstmt;
//rc = sqlite3_exec(db, query.c_str(), 0, 0, &errorMessage);

cout << "preparing statement"<<endl;
rc = sqlite3_prepare_v2(db, query.c_str(), 0, &sqlstmt, 0);
cout << "prepare code: "<<rc << endl;
if(rc != SQLITE_OK){
    sqlite3_close(db);
    return t_val;
}
cout << "Resetting call." <<endl;
rc = sqlite3_reset(sqlstmt);

cout << "about to start while"<<endl;
rc =sqlite3_step(sqlstmt);
cout << rc<<"|" << SQLITE_ROW <<"|" << SQLITE_OK <<"|"<<SQLITE_DONE<< endl;
while(rc == SQLITE_ROW){
    //sset retVal (id,name,code,typeId,reportTypeId,parentAsset);
    int id,typeID, reportTypeId;
    id = sqlite3_column_int(sqlstmt, 0);
    string name(reinterpret_cast<char const *>(sqlite3_column_text(sqlstmt, 1)));
    string code(reinterpret_cast<char const *>(sqlite3_column_text(sqlstmt, 2)));
    typeID = sqlite3_column_int(sqlstmt, 3);
    reportTypeId = sqlite3_column_int(sqlstmt, 4);
    string parentAsset(reinterpret_cast<const char *>(sqlite3_column_text(sqlstmt, 5)));
    cout <<"Fetched Asset Data: "<< id <<"|"<<name<<"|"<<code<<"|"<<typeID<<"|"<<reportTypeId<<"|"<<parentAsset << endl;
    Asset a (id, name, code, typeID, reportTypeId, parentAsset);
    retVal.push_back(a);
    rc = sqlite3_step(sqlstmt);
}
cout << "while ended, about to return."<<endl;
sqlite3_close(db);
return retVal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:21:28.920

你打错电话了`sqlite3_prepare_v2()`。从[文档](http://www.sqlite.org/c3ref/prepare.html)中：

> 如果 nByte 参数小于零，则读取 zSql 直到第一个零终止符。如果 nByte 为非负数，则它是从 zSql 读取的最大字节数。当 nByte 为非负数时，zSql 字符串以第一个 '\000' 或 '\u0000' 字符或第 nByte 字节结束，以先到者为准。

因此，您的准备语句应如下所示（至少是最简单的更改）：

```
int rc = sqlite3_prepare_v2(
   db,
   query.c_str(),
   -1,   // instructs SQLITE to read the entire statement up to the \0 terminator
   &stmt,
   0); 
```

# c# - 给定时间之前的会话超时

> ID：13459070
> 
> 赞同：2
> 
> 时间：2012-11-19T17:32:35.050
> 
> 标签：c#, asp.net, asp.net-mvc, forms, authentication

我在 Asp.Net MVC 应用程序中使用表单身份验证，如下所示：

**代码**

```
public void SignIn(string userName, bool isCookiePersistent)
        {

            FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(1, userName, DateTime.Now, DateTime.Now.AddDays(14),
                createPersistentCookie, string.Empty);

            HttpCookie authCookie = FormsAuthentication.GetAuthCookie(userName, isCookiePersistent);
            if (authTicket.IsPersistent)
            {
                authCookie.Expires = authTicket.Expiration;
            }

            authCookie.Value = FormsAuthentication.Encrypt(authTicket);
            HttpContext.Current.Response.Cookies.Add(authCookie);
        }

public void SignOut()
        {
            FormsAuthentication.SignOut();
        } 
```

**问题：** 问题是，如果我将表单身份验证超时设置为 4 小时，我的用户在登录半小时后仍然重定向到登录页面。

我已经尝试在 web.config 中包含`SessionSate`OR 排除`SessionState`，但注意到正在发生。问题仍然相同。这是我下面的 web.cofig 代码。

**Web.config（没有 sessionState 元素）**

```
 <authentication mode="Forms">
      <forms loginUrl="~/LogOn/LogOn" requireSSL="false" timeout="240" defaultUrl="~/Home/Home" name="__appcookie" path="/" slidingExpiration="true" ticketCompatibilityMode="Framework40" protection="All">
      </forms>
    </authentication> 
```

**Web.config（带有 sessionState 元素）**

```
<sessionState timeout="240"></sessionState>
 <authentication mode="Forms">
          <forms loginUrl="~/LogOn/LogOn" requireSSL="false" timeout="240" defaultUrl="~/Home/Home" name="__appcookie" path="/" slidingExpiration="true" ticketCompatibilityMode="Framework40" protection="All">
          </forms>
        </authentication> 
```

任何人都可以让我知道在 web.config中包含`sessionState`and真的很重要吗？`sessionTimeout`我不能只`formAuthentication`在我的应用程序中使用吗？

无论我是否使用`sessionState`，即使只有`form authentication`，我的用户在登录应用程序后半小时后重定向到登录页面。（但我已经将 240 分钟设置为 a `form authentication timeout`）。

谁能给我一些想法或解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T01:24:01.500

`forms ticketCompatibilityMode="Framework40"`指定票证到期日期存储为 UTC 。默认值`Framework20`指定票证到期日期存储为本地时间。如果您在`DateTime.Now`ticketCompatibilityMode 为 Framework40 时手动设置 FormsAuthenticationTicket 到期日期，则本地和 UTC 之间存在脱节（`DateTime.Now`vs. `DateTime.UtcNow`）。

这是我最近遇到的一个问题。有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-ca/library/system.web.configuration.ticketcompatibilitymode.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:44:22.600

尝试提高 IIS 中的会话超时值。其默认值为 20 分钟。您可以将 web.config 设置为 4 年内的会话超时，但 IIS 会话超时将覆盖它。假设您的用户在您的网站上不活跃...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:29:16.223

30 分钟是表单身份验证 cookie 的默认时间，这让我相信您的配置有问题。您可以尝试简化配置仅用于测试吗？

```
<authentication mode="Forms">
    <forms loginUrl="~/LogOn/LogOn" timeout="240" protection="All" />
</authentication> 
```

# c++ - 为什么在 VS2008 中使用单元测试的测试列表中没有显示我的所有测试方法？

> ID：13459072
> 
> 赞同：0
> 
> 时间：2012-11-19T17:32:42.280
> 
> 标签：c++, unit-testing, visual-studio-2008

我有一个单元测试项目，其中包含 4 个 .cpp 文件，每个文件包含一个 [TestClass] 和几个 [TestMethod]。我正在使用 Visual Studio 2008 中的内置单元测试框架。

问题是 .cpp 文件之一中定义的 7 个测试根本没有显示在“测试结果”窗口中。其他三个文件都很好。

前几天这工作正常，我不确定我做了什么来打破它。我已经进行了一些谷歌搜索，但没有遇到与此特定问题相关的任何内容。我已经完成了项目的重建并关闭/重新打开 Visual Studio 无济于事。

有没有人遇到过这个问题？如果是这样，你是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:32:53.140

我不确定它为什么起作用，但我在有问题的 .cpp 文件中选择了其中一个 TestMethods，然后转到测试 -> 调试 -> 当前上下文中的测试。然后测试运行并显示在 TestResults 窗口中。

下次我尝试运行所有测试时（通过 Debug -> Start Debugging (F5)），来自有问题的 .cpp 文件的所有测试都显示在 TestResults 中。

# recursion - 方案默认值函数

> ID：13459074
> 
> 赞同：3
> 
> 时间：2012-11-19T17:32:50.403
> 
> 标签：recursion, lisp, scheme, default, tail

几天来，我一直在为计划中的一个想法而苦苦挣扎。我经常以以下方式编写代码

```
(define fib_h (lambda (n a b) <body ...>))
(define fib (lambda (n) (fib_h n 0 1))) 
```

而且我认为这是将自己介绍给宏的好方法。不幸的是，关于如何将其宏化，这似乎有点超出我的理解。我想我在某一时刻接近了

```
(define-syntax dvf
  (syntax-rules ()
    ((_ f (args ...) (name value) ... body)
      <stuff that didn't work>))) 
```

这将定义一个函数“f”，该函数将采用“args ...”或“args ... name ...”，然后，如果它仅采用“args ...”，则应用“value ...”到“名称...”参数。我可以想到两种好方法来做到这一点。第一个需要 Y 组合器，我真的不想使用它们。另一种方式需要我以某种方式获取“name ...”和“args ...”中的变量数量如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:16:46.430

我可能错过了重点，但这与 Scheme 内置默认参数的工作方式不完全一样：

```
(define f1
  (lambda (n (a 0) (b 1))
    (printf "n:~a  b:~a  b:~a\n" n a b)))

(f1 10)
(f1 10 0 1)
(f1 10 8 3) 
```

产量

```
n:10  b:0  b:1
n:10  b:0  b:1
n:10  b:8  b:3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T21:53:33.063

您可能正在寻找[SRFI-16](http://srfi.schemers.org/srfi-16/srfi-16.html)`case-lambda`中描述的语法。这是那里给出的实现：

```
(define-syntax case-lambda
  (syntax-rules ()
    ((case-lambda)
     (lambda args
       (error "CASE-LAMBDA without any clauses.")))
    ((case-lambda 
      (?a1 ?e1 ...) 
      ?clause1 ...)
     (lambda args
       (let ((l (length args)))
         (case-lambda "CLAUSE" args l 
           (?a1 ?e1 ...)
           ?clause1 ...))))
    ((case-lambda "CLAUSE" ?args ?l 
      ((?a1 ...) ?e1 ...) 
      ?clause1 ...)
     (if (= ?l (length '(?a1 ...)))
         (apply (lambda (?a1 ...) ?e1 ...) ?args)
         (case-lambda "CLAUSE" ?args ?l 
           ?clause1 ...)))
    ((case-lambda "CLAUSE" ?args ?l
      ((?a1 . ?ar) ?e1 ...) 
      ?clause1 ...)
     (case-lambda "IMPROPER" ?args ?l 1 (?a1 . ?ar) (?ar ?e1 ...) 
       ?clause1 ...))
    ((case-lambda "CLAUSE" ?args ?l 
      (?a1 ?e1 ...)
      ?clause1 ...)
     (let ((?a1 ?args))
       ?e1 ...))
    ((case-lambda "CLAUSE" ?args ?l)
     (error "Wrong number of arguments to CASE-LAMBDA."))
    ((case-lambda "IMPROPER" ?args ?l ?k ?al ((?a1 . ?ar) ?e1 ...)
      ?clause1 ...)
     (case-lambda "IMPROPER" ?args ?l (+ ?k 1) ?al (?ar ?e1 ...) 
      ?clause1 ...))
    ((case-lambda "IMPROPER" ?args ?l ?k ?al (?ar ?e1 ...) 
      ?clause1 ...)
     (if (>= ?l ?k)
         (apply (lambda ?al ?e1 ...) ?args)
         (case-lambda "CLAUSE" ?args ?l 
           ?clause1 ...))))) 
```

# c# - 异步使用 AppDomain.DoCallBack()

> ID：13459075
> 
> 赞同：2
> 
> 时间：2012-11-19T17:32:51.337
> 
> 标签：c#, appdomain

我正在尝试为多个 AppDomain 调用 DoCallBack，但它不是异步的。有没有办法使调用异步？这是我正在尝试做的事情：

```
 var appDomain1 = System.AppDomain.CreateDomain("event1");
        var appDomain2 = System.AppDomain.CreateDomain("event2");

        Console.WriteLine("Executing appDomain1");
        appDomain1.DoCallBack(new CrossAppDomainDelegate(Event));
        Console.WriteLine("Executing appDomain2");
        appDomain2.DoCallBack(new CrossAppDomainDelegate(Event)); 
```

我正在尝试在多个 appDomain 中异步执行方法“Event”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:10:33.380

您可以使用 TPL，并从任务中调用 DoCallBack：

```
var task1 = Task.Factory.StartNew(() => appDomain1.DoCallBack(Event));
var task2 = Task.Factory.StartNew(() => appDomain2.DoCallBack(Event));
Task.WaitAll(task1, task2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T01:35:22.297

尽管它可以很好地满足您的需求，但 DoCallBack 有点受限。考虑一下这个（也可以并行工作）：

```
namespace ConsoleApplication1
{
    using System;
    using System.Threading.Tasks;
    using AppDomainToolkit;

    class Program
    {
        static void Main(string[] args)
        {
            using (var context1 = AppDomainContext.Create())
            using (var context2 = AppDomainContext.Create())
            {
                var task1 = Task.Factory.StartNew(
                    () =>
                    {
                        RemoteAction.Invoke(
                            context1.Domain, 
                            () => 
                            {
                                var appName = AppDomain.CurrentDomain.SetupInformation.ApplicationName;
                                Console.WriteLine("Hello from app domain " + appName);
                            });
                    });

                var task2 = Task.Factory.StartNew(
                    () =>
                    {
                        RemoteAction.Invoke(
                            context2.Domain,
                            () =>
                            {
                                var appName = AppDomain.CurrentDomain.SetupInformation.ApplicationName;
                                Console.WriteLine("Hello from app domain " + appName);
                            });
                    });

                // Be sure to wait, else the domains will dispose
                Task.WaitAll(task1, task2);
            }

            Console.ReadKey();
        }
    }
} 
```

更多信息可在此处获得：[https ://github.com/jduv/AppDomainToolkit](https://github.com/jduv/AppDomainToolkit)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T18:10:25.133

使用任何通用异步执行机制包装跨域调用它，并可能等到所有调用完成。例如

```
Parallel.ForEach(appDomains, domain => domain.DoCallBack(new CrossAppDomainDelegate(Event))); 
```

或者

```
var countDown = new CountdownEvent();
countDown.AddCount();
foreach (var domain in appdomains)
{
    countDown.AddCount();
    ThreadPool.QueueUserWorkItem(_ =>
        {
            domain.DoCallBack(new CrossAppDomainDelegate(Event));
            countDown.Signal();
        });
}

countDown.Signal();
countDown.Wait(); 
```

# php - 数据库条目未正确输出

> ID：13459080
> 
> 赞同：0
> 
> 时间：2012-11-19T17:33:11.380
> 
> 标签：php, html, mysql

我无法让我的网站正确显示数据库条目。我正在将带换行符的格式化文本复制并粘贴到我的 MySQL 数据库中。如果我在终端中查看条目，它将正确显示带有换行符的信息。当我在浏览器中查看时，它是所有输出，就好像它忽略了所有格式规则并使其成为一长串文本，刚好碰到 DIV 的边缘并创建一个没有任何格式的新行。我是新手，所以如果我的问题看起来含糊不清，我提前道歉，只需询问您可能认为对提供准确解决方案有用的任何其他信息。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title>
        Test Site!    
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <LINK href="CLLProfile.css" rel="stylesheet" type="text/css">
                    <script language="javascript" type="text/javascript">

// Roshan's Ajax dropdown code with php
// This notice must stay intact for legal use
// Copyright reserved to Roshan Bhattarai - nepaliboy007@yahoo.com
// If you have any problem contact me at http://roshanbh.com.np
function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
    }

    function getCategory(CatID) {       

        var strURL="Categories.php?category="+CatID;
        var req = getXMLHTTP();

        if (req) {

            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {                        
                        document.getElementById('categorydiv').innerHTML=req.responseText;                      
                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }               
            }           
            req.open("GET", strURL, true);
            req.send(null);
        }       
    }

    function getSub(CatID) {        

        var strURL="SubCategories.php?category="+CatID;
        var req = getXMLHTTP();

        if (req) {

            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {                        
                        document.getElementById('subcategorydiv').innerHTML=req.responseText;                       
                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }               
            }           
            req.open("GET", strURL, true);
            req.send(null);
        }       
    }

</script>

    </head>

    <body>
        <div id="wrapper">
        <div class="container">

            <div id="header">
                <a href="index.php"><img src="images/Logo.jpg"></a>

                <div class="login"> 
                    <a href="register.php">Sign Up</a> <a href="main_login.php">Login</a>
                </div>

                <div class="search">
                    <form id ="search" action="" method="post" enctype="multipart/form-data">
                        <label>Search:</label>
                        <input type="text" name="searchBox" id="searchBox" /> 
                        <input type="submit" id="Submit" value="Submit" />
                    </form> 
                </div>

            </div>

            <div class="navigation">

                <form id ="categoryForm" action="businesses.php" method="post">
                    <div id="categorydiv">
                        <select name="thing" onChange="getSub(this.value)">
                            <option value=0>Select Main Category<?=$options?>
                        </select> </div>

                    <div id="subcategorydiv">
                        <select name="subCats" >
                             <option>Select Sub Category</option>
                        </select></div>

                        <input type="submit" value="Submit" id="Submit" />
                </form>
                </div>

                <div class="content">

                   <?PHP                             

                     echo "<img src=" . "users/" . $username . "/images/" . $logo . " " . "width=" . "200" . " " . "height=" . "auto" . " " . "border=" . "0" . "/>" . "</a>" . "<br>";

                  ?>

                    <div class="description">

                   <?PHP                             
                     echo "<h2>" . $name . "</h2>";
                     echo "<p>" . $description . "</p>";

                  ?>
                    </div>

                    </div>
                </div>

        </div>

    </body>

</html> 
```

文本我粘贴到 MySQL 数据库中，它在描述字段中输出：

1930 年，查尔斯·海德 (Charles Hyde) 和大卫·弗雷登堡 (David Vredenburg) 在爱荷华州比肯斯菲尔德开了一家小杂货店。那家商店发展成为 Hy-Vee——一家以优质服务和低价而闻名的公司。作为一家员工所有的公司，Hy-Vee 鼓励我们 56,000 多名员工中的每一位帮助指导公司。

我们出色的成功证明了他们的辛勤工作和清晰的愿景。通过他们的努力，Hy-Vee 这个名字已经成为优质产品、低廉价格和优质客户服务的代名词。我们的口号“每个通道都有一个有益的微笑”表达了我们企业理念的基础。

Hy-Vee 是中西部消费者渴望获得有关饮食、营养和健康主题信息的试金石。以天然和有机产品为特色的健康市场部门；店内营养师的咨询服务；NuVal 营养评分系统；消费者和员工健康计划；Hy-Vee 铁人三项赛强调了公司对健康生活方式的承诺。

我们的公司办公室位于爱荷华州西得梅因。Hy-Vee 校园包括一个 12,000 平方英尺的会议中心，用于会议、培训和继续教育项目。

我们的配送业务位于爱荷华州 Chariton，我们拥有超过 150 万平方英尺的先进仓库空间。另一个大型配送中心位于爱荷华州切罗基，占地 650,000 平方英尺，用于存放干粮产品和一般商品。

Hy-Vee 的销售额超过 73 亿美元，在中西部八个州拥有超过 235 家零售店，跻身美国前 20 家连锁超市和前 50 家私营公司之列。食品行业的权威声音《超市新闻》授予该公司“全健康企业奖”，以表彰该公司在提供促进健康生活方式的服务和计划方面的领导地位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:35:29.980

换行符（“\n”和/或“\r”）需要转换为分行标记（<br />）才能在网络浏览器中正确显示

```
str_replace("\n", "<br />", "My string\n has line breaks"); 
```

如果你想使用段落标签，你可以这样做：

```
echo "<p>".str_replace("\n", "</p><p>", "My string\n has line breaks")."</p>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T17:41:10.187

为此，您可以使用[`nl2br()`](http://uk1.php.net/manual/en/function.nl2br.php)which 替换`\r\n`或`\n`使用`<br />`：

```
$text = "some\ntext\nwith new lines";
$text = nl2br($text); 
```

输出

```
some<br />
text<br />
with new lines 
```

因此，在您的代码中，将其更改为：

```
 echo "<h2>" . nl2br(htmlentities($name)) . "</h2>";
   echo "<p>" . nl2br(htmlentities($description)) . "</p>"; 
```

我还添加`htmlentities()`了防止 XSS 并使用正确的 HTML 实体对特殊字符进行编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T17:38:35.390

浏览器会忽略换行符（不过，当您检查源代码时会看到它们）。

您需要将它们转换为`<br />`（最简单的解决方案是`$str = str_replace ("\n", "<br />", $str);`）

# jquery - 使用 NSError 处理 WCF REST 服务和 iOS 错误

> ID：13459081
> 
> 赞同：1
> 
> 时间：2012-11-19T17:33:25.267
> 
> 标签：jquery, asp.net, ios, wcf, rest

我有一个 WCF RESTful 服务，并试图勾勒出我将如何处理服务器和各种客户端上的错误。该服务可以从 Web (jQuery) 和 iOS 产品中访问。下面看看我是如何在服务上抛出错误的：

```
 [WebGet(UriTemplate = "get/{id}", ResponseFormat = WebMessageFormat.Json)]
    public Person Get(string id)
    {
        //check security
        if(!SecurityHelper.IsAuthenticated()) { throw new WebFaultException<PersonException>(new PersonException { Reason = "Permission denied." }, HttpStatusCode.Unauthorized); } 
```

我可以使用 jQuery 来调用服务，如下所示：

```
 $.ajax({
          type: "GET",
          dataType: "json",
          url: "/person/get/123",
          success: function(data) {
            alert('success');
          },
          error: function(xhr, status, error) {
            alert("AJAX Error!");
            alert(xhr.responseText);
          }
        });
      }); 
```

...并且一切正常 - 调用并引发错误（因为我没有提供任何身份验证）并且错误：回调被调用。在检查 xhr.responseText 时的错误回调中，我得到了正确的 JSON 对象 ({"reason":"Permission denied!"})，显示了服务器提供的错误原因。

现在 - 我正在尝试将我的 iOS 应用程序放在一起来调用相同的服务，并且从那里开始一切正常，*除了*我无法获得该服务提供的错误详细信息。这是我从 iOS 调用 REST 服务时的代码：

```
//set up for any errors
NSError *error = nil;

//set up response
NSURLResponse *response = [[NSURLResponse alloc] init];

//make the request
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

//check for error
if(error)
{
    //debug
    NSLog(error.description);

    //send back error
    return error;
}
else 
{ 
```

在 error.description 中，我只收到一条通用消息，例如“操作无法完成”。

如何获取服务器发送的自定义错误信息？我一直在查看 NSError 类的 userInfo 属性，但不知道我是否可以获取自定义信息，如果可以，我该如何去做。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:56:53.657

错误消息将在请求返回的数据（响应正文）上：

```
//make the request
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

if (error) {
    if (data) {
        NSString *respBody = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    } else {
        NSLog(@"%@", error.description);
    }
}
else 
{
    // get response
} 
```

# asp.net - asp.net 中的多行文本框中的某些行为侧标题加粗

> ID：13459084
> 
> 赞同：0
> 
> 时间：2012-11-19T17:33:40.307
> 
> 标签：asp.net, webforms

我使用 asp.net 和 vb.net 作为后面的代码。在网络表单中，我想使用多行文本框。在这些文本框中，我需要以粗体输入某些文本行。怎么做？

编辑：

我不希望用户更改多行文本框中的内容。这是我想在那里提出的一种协议。一旦他选中复选框，多行文本框中的内容就会显示出来。在这些多行中，我需要一些标题，粗体，斜体等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:43:16.600

你需要的是一个富文本框，有几个例子做谷歌搜索。但是，[这](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=1636&lngWId=10)是我觉得很棒的一个。

另一个很棒的[免费富文本框](http://www.freetextbox.com/)。

问候

# python - 如何追溯日志记录错误？

> ID：13459085
> 
> 赞同：4
> 
> 时间：2012-11-19T17:33:42.507
> 
> 标签：python, debugging, logging, error-handling

我使用[日志记录](http://docs.python.org/2/library/logging.html)模块在我的应用程序上记录消息。

我经常遇到格式字符串或参数错误导致错误的情况，例如：

```
import logging
my_log = logging.getLogger("MyLog")
# this is obviously wrong
my_log.info('%d', "abc") 
```

结果是类似于以下错误的错误：

```
Traceback (most recent call last):
  File "/usr/lib64/python2.6/logging/__init__.py", line 776, in emit
    msg = self.format(record)
  File "/usr/lib64/python2.6/logging/__init__.py", line 654, in format
    return fmt.format(record)
  File "/usr/lib64/python2.6/logging/__init__.py", line 436, in format
    record.message = record.getMessage()
  File "/usr/lib64/python2.6/logging/__init__.py", line 306, in getMessage
    msg = msg % self.args
TypeError: %d format: a number is required, not str 
```

但是，它只显示了日志模块内部的回溯；它没有告诉我代码中发生错误的位置。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T02:27:55.163

我在寻找错误来源时遇到了同样的问题。日志模块处理此类异常并且不停止程序 - 这是日志模块可接受的行为。但是是抑制异常并且在处理它时没有提供足够的信息。

我发现并现在使用[这里描述的厚](https://stackoverflow.com/q/2477934/1296661)

`logging.LogRecord.getMessage`诀窍是用用异常处理子句包装调用的函数替换非常基本的记录字符串格式化的函数。
确保在使用 logger 之前进行了此替换。此替换也适用于您程序的其他模块。

所以你的例子会被这样修改：请注意我修改了一些代码以确保会生成异常。

```
def print_log_record_on_error(func):
    def wrap(self, *args, **kwargs):
        try:
            return func(self, *args, **kwargs)
        except:
            import sys
            print >>sys.stderr, "Unable to create log message msg=%r, args=%r " % (
                getattr(self, 'msg', '?'), getattr(self, 'args', '?'))
            raise
    return wrap
import logging
logging.LogRecord.getMessage = print_log_record_on_error(logging.LogRecord.getMessage)

logging.basicConfig()
my_log = logging.getLogger("MyLog")
# this is obviously wrong
my_log.error('%d' , "abc") 
```

它现在会产生更有用的异常：

```
Unable to create log message msg='%d', args=('abc',) 
Traceback (most recent call last):
  File "C:\Progs\Python262\Lib\logging\__init__.py", line 760, in emit
    msg = self.format(record)
  File "C:\Progs\Python262\Lib\logging\__init__.py", line 644, in format
    return fmt.format(record)
  File "C:\Progs\Python262\Lib\logging\__init__.py", line 432, in format
    record.message = record.getMessage()
  File "C:/Users/vvlad/PycharmProjects/stackoverflow/test1.py", line 6, in wrap
    return func(self, *args, **kwargs)
  File "C:\Progs\Python262\Lib\logging\__init__.py", line 302, in getMessage
    msg = msg % self.args
TypeError: %d format: a number is required, not str 
```

如果您有日志密集型应用程序，我建议添加选项以替换登录功能。因此，调试模式代码将使用重载函数，但在生产中 - 它不会，因此您将避免再进行一次异常处理的性能损失。

# java - 在布局中隐藏/显示带有表面视图的软键盘时出现黑色区域

> ID：13459087
> 
> 赞同：1
> 
> 时间：2012-11-19T17:33:43.583
> 
> 标签：java, android

我已经简化了问题以便轻松解释：我的测试的初始布局是：

![在此处输入图像描述](../Images/19d267e0ff850955c9cfd29dab57004d.png)

当我执行它时（在活动中只有一个 setContentView 调用），当我打开软键盘进行输入时，它会显示以下布局：

![在此处输入图像描述](../Images/779a142b3b40419f6b02ef523fb99cbc.png)

但是当我隐藏键盘时，它的行为有点问题将这个图像留在屏幕中（在surfaceview所在的插槽中的黑色矩形）：

![在此处输入图像描述](../Images/0072ef46fd9d49002618e63fdd518c26.png)

在模拟器中尝试了相同的结果。

我怎么解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:46:09.840

找到了解决方案。这是一个可以解决的错误

`theSurfaceView.setBackgroundColor(Color.Transparent);`或`android:background="#00000000"`在 XML

# java - 将复杂参数从 ksoap Android 传递到 WCF Web 服务

> ID：13459090
> 
> 赞同：7
> 
> 时间：2012-11-19T17:33:52.723
> 
> 标签：java, android, wcf, soap, android-ksoap2

我从 ksoap 调用 .NET WCF Web 服务，我的 WebMethod 采用一个复杂的参数 UpdatableCustomerInfo

```
public class UpdatableCustomerInfo implements KvmSerializable {

public String CustomerId;
public String Facebook;

@Override
public Object getProperty(int arg0) {
    String retVal = "";
     switch(arg0)
        {
        case 0:
            retVal = CustomerId;
            break;

        case 1:
            retVal = Facebook;
            break;
        }

        return retVal;
}

@Override
public int getPropertyCount() {
    return 2;
}

@Override
public void getPropertyInfo(int arg0, Hashtable arg1, PropertyInfo arg2) {
     switch(arg0)
        {
        case 0:
            arg2.type = PropertyInfo.STRING_CLASS;
            arg2.name = "CustomerId";
            break;
        case 1:
            arg2.type = PropertyInfo.STRING_CLASS;
            arg2.name = "Facebook";
            break;

        default:break;
        }
}

@Override
public void setProperty(int arg0, Object arg1) {
    switch(arg0)
    {
    case 0:
        CustomerId = arg1.toString();
        break;
    case 1:
        Facebook = arg1.toString();
        break;

    default:
        break;
    }
} 
```

}

这是我调用 WebService 的 Web Service

```
 UpdatableCustomerInfo ucInfo = new UpdatableCustomerInfo();
    ucInfo.CustomerId = "1f089071-c126-e211-9b2e-dca971c098f5";
    ucInfo.Facebook = "asdfqwer1234";

    PropertyInfo pInfo = new PropertyInfo();
    pInfo.setName("updatableInfo");
    pInfo.setValue(ucInfo);
    pInfo.setType(UpdatableCustomerInfo.class);

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty(pInfo);

    SoapSerializationEnvelope envelop = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelop.setOutputSoapObject(request);
    envelop.dotNet = true;

    HttpTransportSE hts = new HttpTransportSE(URL);
    hts.debug = true;

            try {
        hts.call(SOAP_ACTION, envelop);
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

但实际上我记录了 Web 服务方法，日志告诉我该方法被调用但参数为空。

我试图将 SoapEnvelope 版本更改为 SoapEnvelope.VER10 但这使得 Web 服务方法上的参数不为空，但没有我在 ucInfo 中指定的值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T13:54:29.243

好的。您想**“从 ksoap2 请求中传递复杂参数。”**

我遇到了您所面临的确切问题。

> **我有 AlertNative 方法来摆脱我描述如下的这个问题。**

**首先，**让我知道我有什么搜索[这里](https://stackoverflow.com/questions/9237082/how-to-query-a-web-service-via-post-request-in-android)、[这里](https://stackoverflow.com/questions/9023442/android-wsdl-web-service-ksoap2/9042267#9042267)、[这里](https://stackoverflow.com/questions/9237082/how-to-query-a-web-service-via-post-request-in-android)、[这里](https://stackoverflow.com/questions/13459090/pass-complex-parameter-from-ksoap-android-to-wcf-web-service)和更多 SO 链接。但没有找到解决这个问题的方法。

最后我来到链接[如何在android中发送soap请求？](https://stackoverflow.com/questions/6382241/how-to-send-a-soap-request-in-android)作为我迈向此解决方案的第一步。

**`Solution is`**：

> **我终于手动构造了请求XML，并将其发送到** **kSOAP进行发送和响应处理**

**`Question is How?`**通过以下方式

**我面临什么问题：** 这是[我的 SO 问题](https://stackoverflow.com/questions/14725755/not-getting-correct-response-of-soap-web-service-programatically)，我已将其作为问题放在此处，但无法获得解决方案。

现在你已经看到我在 SoapUI 中的 SOAP 请求是：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:test="http://test.login/">
   <soapenv:Header/>
   <soapenv:Body>
      <test:Login>
         <!--Optional:-->
         <arg0>best_buyer_editor</arg0>
         <!--Optional:-->
         <arg1>welcome</arg1>
         <!--Optional:-->
         <arg2>Mobile</arg2>
      </test:Login>
   </soapenv:Body>
</soapenv:Envelope> 
```

我在 soapUI 中的 SOAP 响应是：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:LoginResponse xmlns:ns2="http://test.login/">
         <return>{"LoginDetails":{"Result":"Success","UserName":"Best Buyer Editor","token":"M7M5RMQU6","rolelist":["buyer_editor","admin_role"],"parties":[{"partynumber":"BEST","type":"self","sites":[{"companyname":"www.bestmanufacture.com","sitecode":"BESTTXUSA-1","siteaddress":"225 E Industrial Blvd Waco USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYUSA-5","siteaddress":"20 Milburn St Buffalo USA"},{"companyname":"Best Engineers Manufacturing USA Inc","sitecode":"BESTHQ","siteaddress":"8976, Hope vision Lane Simple City USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYUSA-6","siteaddress":"Cedar &amp; Ellicott Sts Batavia USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTTXUSA-2","siteaddress":"9700 Richmond Ave Ste 201 Houston USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTTXUSA-4","siteaddress":"3315 Ashlock Dr Houston USA"},{"companyname":"Best Engineers Manufacturing USA Inc","sitecode":"BESTWH","siteaddress":"1021, Industrial Bolevar San Macros City USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYMEX-10","siteaddress":"271 Madison Ave Ste 1003 New York USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYUSA-8","siteaddress":"271 Madison Ave Ste 1003 New York USA"},{"companyname":"Best Engineers Manufacturing Europe Inc","sitecode":"BESTMO","siteaddress":"789,Future Vision Towers London GBR"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYUSA-7","siteaddress":"1580 Columbia Tpke Ste 5 Castleton On Hudson USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTNYMEX-9","siteaddress":"271 Madison Ave Ste 1003 New York USA"},{"companyname":"www.bestmanufacture.com","sitecode":"BESTTXUSA-3","siteaddress":"2821 Lackland Rd Ste 340 Fort Worth USA"}]},{"partynumber":"DHL","type":"sponsors","sites":[{"companyname":"www.dhl.com","sitecode":"DHLTXUSA-2","siteaddress":"11311 N Central Expy Dallas USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYUSA-7","siteaddress":"150 W 22nd St Fl 5 New York USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYMEX-9","siteaddress":"One Markin Lane Wyoming USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYUSA-6","siteaddress":"12685 State Route 38 Berkshire USA"},{"companyname":"www.dhl.com","sitecode":"DHLTXUSA-4","siteaddress":"2221 Canada Dry St Houston USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYUSA-5","siteaddress":"521 5th Ave Rm 2130 New York USA"},{"companyname":"www.dhl.com","sitecode":"DHLTXUSA-1","siteaddress":"6505 N Houston Rosslyn Rd Houston USA"},{"companyname":"www.dhl.com","sitecode":"DHLTXUSA-3","siteaddress":"9405 N County Road 2000 Lubbock USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYMEX-10","siteaddress":"One Markin Lane Wyoming USA"},{"companyname":"www.dhl.com","sitecode":"DHLNYUSA-8","siteaddress":"One Markin Lane Wyoming USA"}]},{"partynumber":"UPS","type":"sponsors","sites":[{"companyname":"www.ups.com","sitecode":"UPSTXUSA-3","siteaddress":"1455 West Loop S Houston USA"},{"companyname":"www.ups.com","sitecode":"UPSNYUSA-8","siteaddress":"1050 Hook Rd Farmington USA"},{"companyname":"www.ups.com","sitecode":"UPSNYMEX-10","siteaddress":"1050 Hook Rd Farmington USA"},{"companyname":"www.ups.com","sitecode":"UPSNYUSA-7","siteaddress":"1400 Broadway Fl 2 New York USA"},{"companyname":"www.ups.com","sitecode":"UPSTXUSA-4","siteaddress":"14902 Sommermeyer St Ste 100 Houston USA"},{"companyname":"www.ups.com","sitecode":"UPSNYMEX-9","siteaddress":"1050 Hook Rd Farmington USA"},{"companyname":"www.ups.com","sitecode":"UPSNYUSA-6","siteaddress":"101 Cranbrook Ext Tonawanda USA"},{"companyname":"www.ups.com","sitecode":"UPSNYUSA-5","siteaddress":"290 Barrett Hill Rd Mahopac USA"},{"companyname":"www.ups.com","sitecode":"UPSTXUSA-2","siteaddress":"11308 Midmorning Dr Austin USA"},{"companyname":"www.ups.com","sitecode":"UPSTXUSA-1","siteaddress":"3900 Harrisburg Blvd Houston USA"}]},{"partynumber":"HDEPO","type":"sponsors","sites":[{"companyname":"Home Depot USA.","sitecode":"HDEPOWH","siteaddress":"55031 Hdepo WH Road Bossier City USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYUSA-8","siteaddress":"166 Haverford Rd Hicksville USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPOTXUSA-4","siteaddress":"4901 Blaffer St Houston USA"},{"companyname":"Home Depot USA.","sitecode":"HDEPOHQ","siteaddress":"5031 Hdepo HQ Road Bossier City USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYMEX-9","siteaddress":"166 Haverford Rd Hicksville USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYUSA-6","siteaddress":"1790 Broadway Ste 702 New York USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPOTXUSA-3","siteaddress":"2203 Timberloch Pl Ste 252 The Woodlands USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYMEX-10","siteaddress":"166 Haverford Rd Hicksville USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYUSA-5","siteaddress":"1040 Avenue Of The Americas New York USA"},{"companyname":"Home Depot USA.","sitecode":"HDEPOMO","siteaddress":"5031 Hdepo MO Road Bossier City USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPOTXUSA-1","siteaddress":"14603 Chrisman Rd Houston USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPOTXUSA-2","siteaddress":"16103 University Oak San Antonio USA"},{"companyname":"www.homeDepot.com","sitecode":"HDEPONYUSA-7","siteaddress":"392 Pulteney St Corning USA"}]},{"partynumber":"GWILL","type":"sponsors","sites":[{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYMEX-9","siteaddress":"3300 Northern Blvd Fl 2 Long Island City USA"},{"companyname":"GoodWill Supplies and Construction","sitecode":"GWILLHQ","siteaddress":"543, Light Ray Street Wellknown city In"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYMEX-10","siteaddress":"3300 Northern Blvd Fl 2 Long Island City USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYUSA-7","siteaddress":"1800 New Hwy Farmingdale USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYUSA-8","siteaddress":"3300 Northern Blvd Fl 2 Long Island City USA"},{"companyname":"GoodWill Supplies and Construction","sitecode":"GWILLMO","siteaddress":"6789, Engineering Laner Large city GBR"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLTXUSA-2","siteaddress":"945 McKinney St # 237 Houston USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYUSA-6","siteaddress":"580 Broadway Menands USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLTXUSA-3","siteaddress":"6921 Olson Ln Pasadena USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLTXUSA-1","siteaddress":"7075 Ranch Road 2338 Georgetown USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLTXUSA-4","siteaddress":"3839 Dilido Rd Dallas USA"},{"companyname":"www.goodwillconstruct.com","sitecode":"GWILLNYUSA-5","siteaddress":"1 Radisson Plz Ste 803 New Rochelle USA"},{"companyname":"GoodWill Supplies and Construction","sitecode":"GWILLHQ","siteaddress":"543, Light Ray Street Wellknown city USA"},{"companyname":"GoodWill Supplies and Construction","sitecode":"GWILLWH","siteaddress":"2345, Well formed lane Hope in city USA"}]},{"partynumber":"FEDEX","type":"sponsors","sites":[{"companyname":"www.fedex.com","sitecode":"FEDEXTXUSA-2","siteaddress":"400 Langford St Clint USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYUSA-8","siteaddress":"3736 Kellogg Rd Cortland USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXTXUSA-4","siteaddress":"5025 East Business 20 Abilene USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYUSA-5","siteaddress":"637 New Loudon Rd Ste 2 Latham USA"},{"companyname":"Fedex USA.","sitecode":"FEDEXWH","siteaddress":"6754 Fedex WH  Road Fedex  City USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXTXUSA-1","siteaddress":"4305 N Interstate 35 Denton USA"},{"companyname":"Fedex USA.","sitecode":"FEDEXHQ","siteaddress":"7800 Fedex HQ  Road Bossier City USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXTXUSA-3","siteaddress":"14444 Stuebner Airline Rd Houston USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYMEX-10","siteaddress":"3736 Kellogg Rd Cortland USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYUSA-7","siteaddress":"65 Old Indian Rd Milton USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYMEX-9","siteaddress":"3736 Kellogg Rd Cortland USA"},{"companyname":"Fedex USA.","sitecode":"FEDEXMO","siteaddress":"9600 Fedex MO Road Bossier City USA"},{"companyname":"www.fedex.com","sitecode":"FEDEXNYUSA-6","siteaddress":"1254 Erie Ave North Tonawanda USA"}]}]}}</return>
      </ns2:LoginResponse>
   </soap:Body>
</soap:Envelope> 
```

但无法使用我之前完成的代码得到正确的响应，并且如我在我的问题中所描述的那样遇到错误。

**我对上述问题的解决方案：**

首先，我在任何你想动态添加参数`txt file`的地方都做了一个像 SOAP 请求一样的请求。`{%key%}`制作这个txt文件并将其放入`raw`文件夹创建的`res`文件夹中。现在您将拥有`yourfilename.txt`如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:test="http://test.login/">
   <soapenv:Header/>
   <soapenv:Body>
      <test:Login>
         <!--Optional:-->
         <arg0>{%arg0%}</arg0>
         <!--Optional:-->
         <arg1>{%arg1%}</arg1>
         <!--Optional:-->
         <arg2>{%arg2%}</arg2>
      </test:Login>
   </soapenv:Body>
</soapenv:Envelope> 
```

现在您将在您的 java 文件中执行如下代码来访问正确的响应：

您将通过调用以下方法得到响应：

```
response = new sendSoapRequest(
                        getApplicationContext(), yourargument1, yourargument2, yourargument3); 
```

包含以下方法：

```
/**
     * Sends SOAP request to the web service.
     * 
     * @param requestContent
     *            the SOAP request XML
     * @return KvmSerializable object generated from the SOAP response XML
     * @throws Exception
     *             if the web service can not be reached, or the response data
     *             can not be processed.
     */
    public String sendSoapRequest(Context c, String arg0, String arg1,
            String arg2) throws Exception {

 URL = "PASTE YOUR WS URL";//"http://test.tpsynergy.com:8080/tpsynergy/services/login";
        String FinalString = getStringFromRaw(c);
        Log.i("TAG", "*********************** FinalString Before "
                + FinalString);

        FinalString = getFinalString(FinalString, arg0, arg1, arg2);

        Log.i("TAG", "***********************After Finallyyy   :  FinalString "
                + FinalString);

        // send SOAP request
        InputStream responseIs = sendRequest(FinalString);

        // create the response SOAP envelope
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);

        // process SOAP response
        parseResponse(responseIs, envelope);

        Object bodyIn = envelope.bodyIn;

        SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
        String response = resultsRequestSOAP.getProperty(0).toString();

        Log.i(" Login Webservice Response",
                "Responce ---->" + response.toString());

        //

        if (bodyIn instanceof SoapFault) {
            throw (SoapFault) bodyIn;
        }

        return response.toString();
    }

    public String getFinalString(String ABC, String arg0, String arg1,
            String arg2) {
        // parse the template and replace all keywords

        HashMap<String, String> hashMap = new HashMap<String, String>();

        hashMap.put("arg0", arg0);
        hashMap.put("arg1", arg1);
        hashMap.put("arg2", arg2);

        StringBuffer sb = new StringBuffer();
        try {
            // find all keywords
            Pattern patern = Pattern.compile("\\{%(.*?)%\\}");
            Matcher matcher = patern.matcher(ABC);

            while (matcher.find()) {
                String keyName = matcher.group(1);

                Log.i("LOG_TAG", "Key Name" + keyName);
                String keyValue = hashMap.get(keyName);
                if (keyValue == null) {
                    keyValue = "";
                }
                // replace the key with value
                matcher.appendReplacement(sb, keyValue);
            }
            matcher.appendTail(sb);

            // return the final string
            return sb.toString();
        } catch (Throwable e) {
            Log.e("LOG_TAG", "Error parsing template", e);
            return null;
        }
    }

    private String getStringFromRaw(Context c) throws IOException {
        Resources r = c.getResources();
        InputStream is;
        if (MainActivity.PRODUCTION) {
            Log.i(TAG, "Inside Production Raw File");
            is = r.openRawResource(R.raw.logininfoproduction);
        } else {
            Log.i(TAG, "Inside Test Raw File");
            is = r.openRawResource(R.raw.logininfotest);
        }

        String statesText = convertStreamToString(is);
        is.close();
        return statesText;
    }

    private String convertStreamToString(InputStream is) throws IOException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        int i = is.read();
        while (i != -1) {
            baos.write(i);
            i = is.read();
        }
        return baos.toString();
    }

    /**
     * Sends SOAP request to the web service.
     * 
     * @param requestContent
     *            the content of the request
     * @return {@link InputStream} containing the response content
     * @throws Exception
     *             if communication with the web service can not be established,
     *             or when the response from the service can not be processed.
     */
    private InputStream sendRequest(String requestContent) throws Exception {

        // initialize HTTP post
        HttpPost httpPost = null;

        try {
            httpPost = new HttpPost(URL);
            httpPost.addHeader("Accept-Encoding", "gzip,deflate");
            httpPost.addHeader("Content-Type", "text/xml;charset=UTF-8");
            httpPost.addHeader("SOAPAction", "\"\"");
        } catch (Throwable e) {
            Log.e("LOG_TAG", "Error initializing HTTP post for SOAP request", e);
            // throw e;
        }

        // load content to be sent
        try {
            HttpEntity postEntity = new StringEntity(requestContent);
            httpPost.setEntity(postEntity);
        } catch (UnsupportedEncodingException e) {
            Log.e("LOG_TAG",
                    "Unsupported ensoding of content for SOAP request", e);
            throw e;
        }

        // send request
        HttpResponse httpResponse = null;
        HttpClient httpClient = new DefaultHttpClient();
        try {
            httpResponse = httpClient.execute(httpPost);
        } catch (Throwable e) {
            Log.e("LOG_TAG", "Error sending SOAP request", e);
            // throw e;
        }

        // get SOAP response
        try {
            // get response code
            int responseStatusCode = httpResponse.getStatusLine()
                    .getStatusCode();

            // if the response code is not 200 - OK, or 500 - Internal error,
            // then communication error occurred
            if (responseStatusCode != 200 && responseStatusCode != 500) {
                String errorMsg = "Got SOAP response code "
                        + responseStatusCode + " "
                        + httpResponse.getStatusLine().getReasonPhrase();
                // ...
            }

            // get the response content
            HttpEntity httpEntity = httpResponse.getEntity();
            InputStream is = httpEntity.getContent();
            return is;
        } catch (Throwable e) {
            Log.e("LOG_TAG", "Error getting SOAP response", e);
            // throw e;
        }
        return null;
    }

    /**
     * Parses the input stream from the response into SoapEnvelope object.
     */
    private void parseResponse(InputStream is, SoapEnvelope envelope)
            throws Exception {
        try {
            XmlPullParser xp = new KXmlParser();
            xp.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, true);
            xp.setInput(is, "UTF-8");
            envelope.parse(xp);
        } catch (Throwable e) {
            Log.e("LOG_TAG", "Error reading/parsing SOAP response", e);

        }

    } 
```

现在您不必担心 ComplexType 请求参数或任何其他事情。因为您正在传递与 XML 相同的格式，因为请求就像 SOAPUI 工具正在传递一样。

现在您有了所需的正确响应。

希望它会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T06:47:25.117

也许您应该尝试单独添加每个属性： [http ://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#Adding_an_array_of_complex_objects_to_the_request](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#Adding_an_array_of_complex_objects_to_the_request)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T06:26:20.480

你为什么不使用这个函数来调用 SOAP webservice 呢？

```
// Register User By Facebook
public static String RegisterUserByFacebook(String FBIDValue, String FBMailIDValue,String UserNameValue, String RegisterChipsValue) {

    String responce = null;

    SoapObject request = new SoapObject(SOAP_NAMESPACE, SOAP_METHOD_RegisterUserByFacebook);

    PropertyInfo FBID = new PropertyInfo();
    PropertyInfo FBMailID = new PropertyInfo();
    PropertyInfo UserName = new PropertyInfo();
    PropertyInfo DeviceType = new PropertyInfo();
    PropertyInfo RegisterChips = new PropertyInfo();

    FBID.setName("fbid");
    FBID.setValue(FBIDValue);

    FBMailID.setName("fbmailid");
    FBMailID.setValue(FBMailIDValue);

    UserName.setName("name");
    UserName.setValue(UserNameValue);

    DeviceType.setName("devicetype");
    DeviceType.setValue("android");

    RegisterChips.setName("Regchips");
    RegisterChips.setValue(RegisterChipsValue);

    request.addProperty(FBID);
    request.addProperty(FBMailID);
    request.addProperty(UserName);
    request.addProperty(DeviceType);
    request.addProperty(RegisterChips);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE aht = new HttpTransportSE(SOAP_URL);
    try {
        aht.call(SOAP_ACTION_RegisterUserByFacebook, envelope);
        SoapPrimitive LoginResult;
        LoginResult = (SoapPrimitive)envelope.getResponse();
        System.out.println("=================Register User Results: "+LoginResult.toString());
        //System.out.println(LoginResult.toString());
        responce = LoginResult.toString();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (XmlPullParserException e) {
            e.printStackTrace();
    }

    return responce;
} 
```

只需将我的参数、Property 和 URL 替换为您的参数、Property 和 URL，您就会得到结果。

上述方法在我的情况下非常有效。

随时发表评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T14:23:59.403

试试这个。

```
SoapObject respuesta = new SoapObject(NAMESPACE, METHOD_NAME);
Registro registro = new Registro();
registro.nombre = txtprod.getText().toString();
registro.codigo = txtcod.getText().toString();
respuesta.addProperty("cadena", "si llega");

PropertyInfo pi = new PropertyInfo();
pi.setName("registro");
pi.setValue(registro);
pi.setType(registro.getClass());
respuesta.addProperty(pi);

final SoapSerializationEnvelope sobre = new SoapSerializationEnvelope(
        SoapEnvelope.VER11);
//sobre.bodyOut;``
//sobre.implicitTypes=true;
sobre.dotNet = true;
//sobre.setAddAdornments(false);
sobre.setOutputSoapObject(respuesta);
//sobre.bodyIn=respuesta;
sobre.addMapping(NAMESPACE, "Registro", registro.getClass());
try
{
    HttpTransportSE transporte = new HttpTransportSE(URL, timeout);
    //transporte.debug = true;
    transporte.call(SOAP_ACTION, sobre);

        SoapPrimitive resultado_xml = (SoapPrimitive)sobre.getResponse();
        Log.e("valor de response", resultado_xml.toString());
                   int res = Integer.parseInt(resultado_xml.toString());

    if(res == 1)

    {
        Log.e("entra al if", "lelel");

    }
}
catch(IOException e)
{
    e.printStackTrace();
    result = false;
}catch(XmlPullParserException e)
{
    e.printStackTrace();
    result = false;
}
return result;

} 
```

# c# - 在方法中使用输入参数是一种好习惯吗

> ID：13459102
> 
> 赞同：2
> 
> 时间：2012-11-19T17:34:30.957
> 
> 标签：c#

我需要知道在方法中使用相同的输入参数而不将它们分配给方法局部变量是否是一种好习惯。以下代码块可以更清楚地描述查询。

选项 1：在方法内部使用输入参数

```
public int SumValues(List<int> pLValues)
        {
            int _sum = 0;

            for (int i = 0; i < pLValues.Count; i++)
            {
                _sum = +pLValues[i];
            }

            return _sum;
        } 
```

选项 2：分配给局部变量并在方法中使用它。

```
public int SumValues(List<int> pLValues)
{
    int _sum = 0;
    List<int> _lVal = pLValues;

    for (int i = 0; i < _lVal.Count; i++)
    {
        _sum = +_lVal[i];
    }

    return _sum;
} 
```

请告诉我什么是最好的方法，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T17:35:30.387

声明另一个局部变量没有任何好处，所以不要这样做。（将参数想象成一个局部变量，它肯定被分配开始。）

如果您有一个`ref`参数并且您不想更改该值，*那么*将它复制到一个新的局部变量中是有意义的，诚然。同样，如果您稍后需要原始值，当然。

但是，我*会对*您的代码进行各种更改：

*   我当然会使用 LINQ 的`Sum`方法开始:)
*   我会放弃你为变量设置的前缀
*   我可能会将输入类型更改为`IEnumerable<int>`
*   我会使用`foreach`循环而不是按索引获取

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T17:35:43.133

在您的情况下`_lVal`，它与`pLValues`.

C# 使用引用语义。那是你做的时候

```
_lVal = pLValues; 
```

您说的`_lVal`是对同一对象的引用，`pLValues`并且您对引用的对象所做的任何更改`_lVal`都可以通过`pLValues`.

那是

```
_lVal.Add(int.MaxValue);
if(pLValues.Last() == int.MaxValue){
   //this will be true because the element added in the first line
   //is added to the object that both _lVal and pLValues references
} 
```

在参数类型是 ValueType（例如 int）的情况下，这也无关紧要，但出于其他原因。因为任何赋值都将是一个副本赋值，并且参数是传递给方法调用的副本的副本。复制的范围与方法相同（在一般情况下，有一些奇怪的情况，例如关闭参数）。

所以最后简短的答案是。你最好不要创建一个局部变量，因为你只获得了松散的可读性，因为现在使用参数时它并不明显

# vim - Vim mksession 将变量作为文字

> ID：13459103
> 
> 赞同：2
> 
> 时间：2012-11-19T17:34:41.657
> 
> 标签：vim

我在 VIM 中有一个调用 mksession 的函数。我想让它使用函数参数，但它将变量作为文字：

```
func! MakeFullSession(name)
   execute mksession! a:name
   [...] 
```

会话被保存到一个名为“a:name”的文件中。我可以改变这种行为吗？最好的甚至是使用前置目录：

```
~/.vim/sessions/.a:name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:10:59.500

您需要将要执行的所有内容放在引号中，然后连接`a:name`. 试试这个：

```
execute "mksession! " . a:name 
```

# ios - 在保持客户端数据最新的同时保持 iOS 设备电池寿命的策略

> ID：13459109
> 
> 赞同：1
> 
> 时间：2012-11-19T17:34:57.920
> 
> 标签：ios, networking

我们有一个应用程序，对于某些状态，我们需要定期轮询服务器以获取新数据。我们发送给客户端的数据在 2-4K 之间，客户端必须多次询问才能发现服务器不会准备好任何新数据。

一种策略是在应用程序运行期间通过长轮询保持网络连接打开，就像我们进入这种状态一样。对于遭受周期性且可能频繁的网络连接不稳定的设备来说，长轮询似乎并不理想。

另一种是进行短轮询，其中包括每 30 秒左右询问服务器是否有新数据。

我看到人们讨论的第三个问题是使用推送通知，让服务器告诉客户端新的更新。但是，这似乎取决于用户是否允许应用启用推送通知。

在对设备电池友好的同时实现这一目标的最佳机制是什么？

我们使用 AFNetworking 作为我们的库来与服务器通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:31:54.877

推送通知对电池最友好，并且即使应用程序关闭也能正常工作。

如果通知被禁用，也许您可​​以回退到短轮询。

# android - 当我使用 VideoView 启动从 RTSP URL 播放视频的 Activity 时显示空白屏幕？

> ID：13459114
> 
> 赞同：1
> 
> 时间：2012-11-19T17:35:04.500
> 
> 标签：android, android-videoview

我正在尝试使用实时视频流制作一个 android 应用程序，但是每当相关活动（这个）打开时，除了空白屏幕之外什么都不显示。谁能帮帮我吗？

```
 package guc.edu.iremote;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.net.Uri;
import android.os.Bundle;
import android.os.PowerManager;
import android.os.PowerManager.WakeLock;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.MediaController;
import android.widget.VideoView;

public class Video extends Activity  implements OnTouchListener{

VideoView videoView;
int stopPosition;
boolean touched;
protected WakeLock mWakeLock;
Dialog dialog;

@SuppressWarnings("deprecation")
public void OnCreate(Bundle b) {
    super.onCreate(b);
    this.setContentView(R.layout.video);

    videoView = (VideoView) findViewById(R.id.videoView1);

    PowerManager lPwrMgr = (PowerManager) getSystemService(POWER_SERVICE);
    mWakeLock = lPwrMgr.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK,                 "Video");
    mWakeLock.acquire();

    videoView.setVisibility(View.VISIBLE);

    MediaController mc = new MediaController(this){
        @Override
        public void hide() {
            this.show(0);
        }

        @Override
        public void setMediaPlayer(MediaPlayerControl player) {
            super.setMediaPlayer(player);
            this.show();
        }
    };
    videoView.setMediaController(mc);
    mc.setAnchorView(videoView);

      dialog = ProgressDialog.show(Video.this, "", "Loading...",
            true);
    new Thread(new Runnable() {
        public void run() {

             String str = "rtsp://v4.cache2.c.youtube.com/"+
                    "CkELENy73wIaOAng93Xa-"+ 
                        "iQH5xMYESARFEIJbXYtZ29vZ2xlSARSBXdhdGNoWglDbGlja0xpbmtgg9fFkeTLublGDA==/"+ 
                    "0/0/0/video.3gp";  

            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
            Uri uri = Uri.parse(str);
            videoView.setVideoURI(uri);
             videoView.setOnTouchListener(this);
            videoView.requestFocus();
            videoView.setZOrderOnTop(false);
            videoView.start();
            dialog.dismiss();
        }
    }).start();

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    //videoView.seekTo(stopPosition);
    //videoView.resume();
}

protected void onPause() {
    super.onPause();
    if (videoView != null) {
        stopPosition = videoView.getCurrentPosition();
        videoView.pause();
    }

}

public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    if(v==videoView)
    {
        System.out.println("touched"); 

        if(!touched)
        {
            onPause();
            touched = true;
        }
        else
            onResume();
            touched  = false;
    }
    return false;
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();

    // release wake-lock 
    if(mWakeLock != null){
        mWakeLock.release();
    }
}
} 
```

这适用于 XML

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <VideoView
        android:id="@+id/videoView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:39:49.020

那个链接是什么：

rtsp://v4.cache2.c.youtube.com/CkELENy73wIaOAng93Xa-iQH5xMYESARFEIJbXYtZ29vZ2xlSARSBXdhdGNoWglDbGlja0xpbmtgg9fFkeTLublGDA==/0/0/0/video.3gp

?

它似乎不起作用。如果该链接已损坏，则应该修复该链接，然后尝试。但是...要验证这是问题所在，您可以将其替换为指向另一个正常工作的视频文件的链接吗？（如果您需要一些，请告诉我，但谷歌可以提供大量 :)

**编辑**

正如另一个人（之前的其他答案）评论的那样，您还需要在主线程中访问您的 UI，而不是在后台线程中。所以你应该发布到 UI 线程，如：

```
Runnable r = new Runnable(){ /* the updating videoView stuff you wanted to do*/ };
ctx.runOnUIThread(r); 
```

where`ctx`是对您当前活动的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T08:39:04.207

还：

```
videoView.setZOrderOnTop(false); <- wrong
videoView.setZOrderOnTop(true); <- right
```

# sql-server-2008 - 将列聚合为每年/每月/每周

> ID：13459115
> 
> 赞同：0
> 
> 时间：2012-11-19T17:35:09.843
> 
> 标签：sql-server-2008, tsql

我有一张桌子：

```
Table A
-------
SubscriberId int
ContentId int
SendDate DateTime

Sample Data
------------
1            190159      2012-11-07 00:00:00.000
1            190160      2012-11-07 00:00:00.000
1            190160      2012-11-07 00:00:00.000
1            190160      2012-11-07 00:00:00.000
1            190160      2012-11-07 00:00:00.000
1            190160      2012-11-07 00:00:00.000
1            190160      2012-11-07 00:00:00.000
1            190160      2012-11-19 00:00:00.000
2            190160      2012-11-19 00:00:00.000
2            190160      2012-10-19 00:00:00.000
2            190160      2012-10-01 00:00:00.000
2            190160      2011-10-01 00:00:00.000
2            190160      2011-10-01 00:00:00.000
2            190160      2011-10-01 00:00:00.000
2            190160      2011-10-19 00:00:00.000
2            190160      2011-10-18 00:00:00.000
2            190160      2011-10-17 00:00:00.000
2            190161      2011-10-20 00:00:00.000
2            190161      2011-10-01 01:01:01.000 
```

上表是一个平面表，没有标准化（我打算保持这种状态）

我需要的输出是，对于每个 SubscriberId，我需要计算 Senddate YEARLY、MONTHLY 和 WEEKLY 的 ContentId 数量，并以特定方式格式化它们：

```
Subscriber ID    YEARLYValidData
1                190159,1|190160,7
2                190160,9|190161,2 
```

上面的结果是部分结果，即我已经得到了适用于 YEARLY 数据的结果，但是在第二列中我需要 MONTHLYValiddata（即从 GetDate() 开始的 30 天内的内容），并且我还需要 WEEKLYValidData（即GetDate() 后 7 天

下面的查询给了我想要的结果，但每个结果都是分开的：

```
DECLARE NumberOfDays int = 365
SELECT  MAIN.SubscriberId,
            STUFF((
                SELECT '|' + 
                (CAST(SUB.ContentId AS nvarchar(10)) + ',' + 
                 CAST(Count(ContentId) as nvarchar(100))) 
                FROM TABLEA SUB
                Where
                SUB.SubscriberId = MAIN.SubscriberId
                GROUP BY ContentId
                FOR XML PATH('')
                ), 1, 1, '' )
            AS [Result]
            FROM  TABLEA MAIN
            WHERE 
            DATEADD(DAY, DATEDIFF(DAY, 0, SendDate), 0) >= 
            DATEADD(dd, DATEDIFF(dd, 0, getdate()), 0) - @NumberOfDays 
```

如何在单个 Select 语句中获得以下结果：

```
Subscriber ID    YEARLYValidData       MONTHLYValidData         WEEKLYValidData
1                190159,1|190160,7     190159,1|190160,7        190159,1|190160,7       
2                190160,9|190161,2     190160,9|190161,2        190160,1 
```

我知道我可以使用 TEMP 表（或表变量）并继续输入年/月/周数据，但如果可能的话，我想使用更有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T23:58:43.707

我不太明白，但这可能会让你走得更远，即使这不是最终答案：

```
SELECT  C.Interval,
        MAIN.SubscriberId,
        STUFF((
            SELECT '|' + 
            (CAST(SUB.ContentId AS nvarchar(10)) + ',' + 
             CAST(Count(ContentId) as nvarchar(100))) 
            FROM TABLEA SUB
            Where
            SUB.SubscriberId = MAIN.SubscriberId
            GROUP BY ContentId
            FOR XML PATH('')
            ), 1, 1, '' )
        AS [Result]
        FROM  TABLEA MAIN
        CROSS JOIN
        (    SELECT 356 As Days, 'Year' As Interval
             UNION ALL 
             SELECT 30 Days, 'Month' As Interval
             UNION ALL 
             SELECT 7 Days, 'Week' As Interval
        ) C
        WHERE 
        DATEADD(DAY, DATEDIFF(DAY, 0, SendDate), 0) >= 
        DATEADD(dd, DATEDIFF(dd, 0, getdate()), 0) - C.Days 
```

# objective-c - 如何接收组播 UDP？

> ID：13459116
> 
> 赞同：2
> 
> 时间：2012-11-19T17:35:19.847
> 
> 标签：objective-c, multicast, asyncsocket

我正在使用 GCDAsyncUdpSocket，我可以发送多播或普通 UDP 数据包。我可以正常接收数据包，但我无法从另一台 iOS 设备接收多播数据包。

要接收我使用：

```
- (void)udpSocket:(GCDAsyncUdpSocket *)sock didReceiveData:(NSData *)data fromAddress:   (NSData *)address withFilterContext:(id)filterContext
{ NSString *msg = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];

NSString *host = nil;
uint16_t port = 0;
[GCDAsyncUdpSocket getHost:&host port:&port fromAddress:address];

if (msg)
{   
    NSLog(@"Message = %@, Adress = %@ %i",msg,host,port);
}
else
{
    NSLog(@"Error converting received data into UTF-8 String");
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T03:01:08.877

确保套接字正确设置为多播。这是我在多播项目中所做的事情：

```
- (void)setupSocket
{
    udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
    NSError *error = nil;
    if (![udpSocket bindToPort:5555 error:&error])
    {
        NSLog(@"Error binding to port: %@", error);
        return;
    }
    if(![udpSocket joinMulticastGroup:@"226.1.1.1" error:&error]){
        NSLog(@"Error connecting to multicast group: %@", error);
        return;
    }
    if (![udpSocket beginReceiving:&error])
    {
        NSLog(@"Error receiving: %@", error);
        return;
    }
    NSLog(@"Socket Ready");
} 
```

# ruby-on-rails - 在 Rails 3 中查找未翻译的键

> ID：13459119
> 
> 赞同：0
> 
> 时间：2012-11-19T17:35:24.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-i18n

真的没有办法提取应用程序的所有 i18n 翻译键吗？

*视图/页面/index.html.erb*

```
<h1>Some content</h1>
<p><%= t('.some_translated_text') %></p> 
```

*视图/页面/show.html.erb*

```
<p><%= t('.some_other_stuff') %></p> 
```

拥有一个在应用程序上运行并提取所有密钥的工具会很棒，例如：

```
generic:
  views:
    pages:
      index:
        some_translated_text: "missing"
      show:
        some_other_stuff: "missing" 
```

我真的不敢相信直到现在还没有人写过这样的提取工具......

谢谢你的帮助。

**更新：**

我知道这个[i18n-missing_translations](https://github.com/svenfuchs/i18n-missing_translations)但希望有更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:10:43.063

似乎有许多可能的方法来解决这个问题。

1.  创建一个脚本（例如，使用`awk`or `sed`）以使用此问题中的正则表达式扫描您的文件： [Extract I18n translation keys from rails project](https://stackoverflow.com/questions/13011410/extract-i18n-translation-keys-from-rails-project)

2.  使用如下所示的 Rails 插件：[https](https://github.com/romanbsd/translate) ://github.com/romanbsd/translate 。

    您可以运行`rake translate:missing`，它会识别丢失的键。

3.  假设您的框架涵盖所有视图，则将丢失密钥的测试合并到您的测试套件框架中。请参阅[http://dev.innovationfactory.nl/2009/05/04/rails-i18n-caveats-and-tips/#translations](http://dev.innovationfactory.nl/2009/05/04/rails-i18n-caveats-and-tips/#translations)

# c# - 在地图/二维数组中查找最近的（几何上）非零值

> ID：13459121
> 
> 赞同：0
> 
> 时间：2012-11-19T17:35:29.637
> 
> 标签：c#, algorithm, graph, multidimensional-array, complexity-theory

我有一个二维数组，表示图片中的选择性数据。所有不感兴趣的数据都设置为 0。从两个索引中，我需要找到最接近的值 - 几何上 - 不是 0 到索引（表示坐标）。

到目前为止，我的方法是在圆圈中检查以兴趣点为中心的值，在没有找到非零值的每个圆圈经过后增加半径。

这种方法的复杂性似乎是指数级的，当最近的点距离约 25 像素远时，程序需要很长时间。

您对实现此目的的不同方法/现有算法有什么建议吗？

*编辑：*根据请求，我当前的代码如下：

```
 int height;
        int width;
        ushort[,] _2dfat;

        private ushort getAssociatedFat(int centerX, int centerY) 
        {
            int radiusmax = (int)Math.Ceiling(Math.Sqrt(Math.Pow(height,2) + Math.Pow(width, 2) + 1));
            return getAssociatedFat(1, centerX, centerY,radiusmax); 
        }

        private ushort getAssociatedFat(int radius, int centerX, int centerY,int radiusmax) //RECURSIVE METHOD: requires extensive analysis and testing
        {

            ushort max=circleSym8(centerX, centerY, radius);
            if (max != 0) return max;
            else if (radius <= radiusmax)
                return getAssociatedFat(radius + 1, centerX, centerY, radiusmax);
            else 
            { 
                MessageBox.Show("WARNING: empty fat array/image"); 
                return 0; 
            }
        }

        private ushort getMax(ushort max, int x, int y)
        {
            try
            {
                if (_2dfat[y, x] == 0) return max;
                else if (_2dfat[y, x] > max) return _2dfat[y, x];
                else return max;
            }
            catch (IndexOutOfRangeException) { return max; }

        }

        private ushort circleSym8(int xCenter, int yCenter, int radius)
        {
            int x, y, r2;
            r2 = radius * radius;
            ushort max=0;
            max=getMax(max, xCenter, yCenter + radius);
            max = getMax(max, xCenter, yCenter - radius);
            max = getMax(max, xCenter + radius, yCenter);
            max = getMax(max, xCenter - radius, yCenter);

            y = radius;
            x = 1;
            y = (int)(Math.Sqrt(r2 - 1) + 0.5);
            while (x < y)
            {
                max = getMax(max, xCenter + x, yCenter + y);
                max = getMax(max, xCenter + x, yCenter - y);
                max = getMax(max, xCenter - x, yCenter + y);
                max = getMax(max, xCenter - x, yCenter - y);
                max = getMax(max, xCenter + y, yCenter + x);
                max = getMax(max, xCenter + y, yCenter - x);
                max = getMax(max, xCenter - y, yCenter + x);
                max = getMax(max, xCenter - y, yCenter - x);
                x += 1;
                y = (int)(Math.Sqrt(r2 - x * x) + 0.5);
            }
            if (x == y)
            {
                max = getMax(max, xCenter + x, yCenter + y);
                max = getMax(max, xCenter + x, yCenter - y);
                max = getMax(max, xCenter - x, yCenter + y);
                max = getMax(max, xCenter - x, yCenter - y);
            }
            return max;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:38:11.160

您可以将感兴趣的数据存储为四[叉树](http://en.wikipedia.org/wiki/Quadtree)或[kd-tree](http://en.wikipedia.org/wiki/K-d_tree)中的点，并以这种方式执行范围搜索。这些数据结构针对您正在执行的查找类型进行了优化，并会降低每次搜索的复杂性。

我设想一个足够的四叉树实现提供以下内容：

```
// Given some point in the quadtree, walk upwards and outwards
// returning points found ordered by distance
var nearestNeighbor = quadTree.Neighbors(point)
                              .OrderBy(pp => point.Distance(pp))
                              .First(); 
```

# sql - 使用日期时间列的年份和月份作为表键

> ID：13459133
> 
> 赞同：2
> 
> 时间：2012-11-19T17:36:04.040
> 
> 标签：sql, database-design

这里是相对缺乏经验的 SQL 用户。我想做的是每年每个月只有一个条目。有没有办法在 SQL 中使用这样的日期时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:39:31.713

添加一个`month`和一个`year`列，以及一个唯一索引`(year, month)`。例如：

```
create unique index UX_YourTable_YearMonth on YourTable(year, month) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:15:18.763

我肯定会将其存储在单个日期/时间字段中，您可以将日期存储为该月的第一天。
您可以使用`DATEADD(month, DATEDIFF(month, 0, @mydate), 0)`

使用日期字段的优势在于，它将使**分组**更容易使用大多数报告工具（如 Excel Pivot、Access、SQL Server 报告服务...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:39:51.297

如果您的日期始终插入相同的日期和时间，则可以。例如，如果您的日期总是看起来像`mm/01/yyyy 12:00:00`这样，那就可以了。但是我怀疑你的日期会是这样的。我建议将密钥放在两个独立的列上`month, year`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:04:23.403

最好*不要*为此使用日期时间或时间戳。相反，请为年和月使用单独的列。使用 CHECK() 约束来保持值合理。如果您的 dbms 不强制执行 CHECK() 约束（例如 MySQL），请为有效年份和有效月份创建额外的表，并为它们设置外键引用。

```
create table your_table_name (
  year integer not null check (year between 2000 and 2050),
  month integer not null check (month between 1 and 12),
  -- Other columns go here.
  primary key (year, month)
); 
```

# sql-server-2008 - 将数据从 Excel 2007 导入 SQL Server 2008（两个关系表）

> ID：13459138
> 
> 赞同：0
> 
> 时间：2012-11-19T17:36:14.590
> 
> 标签：sql-server-2008, import, excel-2007

我刚刚从 SSMS 运行导入向导并为一个表创建了一个 SSIS 包。我真正需要的是能够将 32 列从我的电子表格导入到一个父表中，然后将 1 列附加到一个单独的表中，该表通过父表的 ID 绑定到父表。

因此，在将前 32 列作为一行导入后，我需要获取该行新插入的 ID，然后将第 33 列与父表中的 id 一起添加到另一个表中。这对 SSMS 中的导入向导是否可行，还是我需要对 SSIS 做一些更花哨的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:36:43.830

我最终只是将所有数据导入到临时表中，然后编写了一个存储过程来为我的父表选择初始列，获取范围标识，并将最后一列泵入相关表。能够一口气做到这一点会很酷，但我没时间了，不得不完成它。

# javascript - 将表单值映射到链接

> ID：13459140
> 
> 赞同：0
> 
> 时间：2012-11-19T17:36:21.963
> 
> 标签：javascript, jquery, html, forms, http-get

我的页面上有一个带有多个输入值和一个按钮的特定表单。例子：

```
<form id="myForm" method="get">
<input type="text" id="blah1" value="blah" />
<input type="hidden" id="blah2" value="blah2" />
</form>
<button type="button" id="awesomeButton">Click for Link</button>
<div id="link">http://mysite.com/?blah1=blah&blah2=blah2</div> 
```

我想找到一种简单的方法，所以当有人点击我网站上的按钮时，它会查看所有表单值并生成一个链接，这与表单设置为使用 method="get" 和提交。因此，如果他们单击“awesomeButton”，那么它将生成一个链接并将其显示给该人，例如[http://mysite.com/?blah1=blah&blah2=blah2](http://mysite.com/?blah1=blah&blah2=blah2)

有人知道从表单中获取值并建立链接的简单方法吗？

就像是...

```
$('button#awesomeButton').click(function()
{
//Grab all form elements, maybe something like var blah = $('#myForm :input'); ??
var link = ???;//Generate a link somehow
$('div#link').html(link);
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:43:15.657

假设`id`s 是`name`s，你想要`.serialize()`：

```
var link = "http://.../?" + $("#myForm").serialize(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:45:39.030

最简单的方法是使用像 jQuery 或 dojo 这样的库来为您完成这项工作。以 jQuery 为例：

```
$("#myForm").serialize(); 
```

文档在[这里](http://api.jquery.com/serialize/)。

在道场：

```
dijit.byId('myForm').get('value'); 
```

[按照此链接](http://dojotoolkit.org/api/)获取文档。

# class - 在 JPA 注释中使用变量作为表名

> ID：13459141
> 
> 赞同：1
> 
> 时间：2012-11-19T17:36:21.853
> 
> 标签：class, jpa, dynamic, entity, tablename

我有一个动态创建表的数据库（这些表具有相同的结构，但它们的名称后缀为年份，后跟当前月份的编号：data201201、data201202、data201203 ...）我创建了一个名为 Data 的实体类定义这些表的结构。我不知道如何动态地使用它。拜托，我希望你帮助我！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T14:35:03.920

您可以为此使用 EclipseLink 的动态实体或每个租户支持的多租户表。

[http://wiki.eclipse.org/EclipseLink/Examples/JPA/Dynamic](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Dynamic)

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_multitenant.htm](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_multitenant.htm)

此外，某些数据库（例如 Oracle）支持表分区，因此您不需要每月创建新的物理表。

您还可以定义一个从当前月份中选择的视图，以联合相关月份，并映射到该视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:19:54.867

不为每个表创建一个类是不可能的，但这与每个月都有一个表一样糟糕。最好的建议是通过将所有信息存储在具有一个`year`和一个`month`列的单个表中来规范您的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T20:11:14.350

在运行时更改映射是不可能的。在您的情况下，您可以将所有表合并为一个，并使用@Inheritance [和](http://docs.oracle.com/javaee/5/api/javax/persistence/Inheritance.html)@DiscriminatorColumn[的组合](http://docs.oracle.com/javaee/5/api/javax/persistence/DiscriminatorColumn.html)

**编辑**

你的组合表是

```
GLOBAL_DATE_TABLE
{
number : ID
varchar : MONTH <- this will be discriminator column
varchar : NAME
... all another fields
} 
```

你的映射

```
@Entity
@Table(name="GLOBAL_DATE_TABLE")
@Inheritance(strategy=SINGLE_TABLE)
@DiscriminatorColumn(name="MONTH", discriminatorType=STRING)
public class Date 
{ 
   @Column(name = "ID")
   @Id 
   private long id;   

   @Column(name = "NAME")
   private String name;

   // another fields
}

@Entity
@DiscriminatorValue("data201201")
public class Data201201
{
   // if column MONTH contains value "ata201201" this instance will be created
   // logic for this table here   
}

@Entity
@DiscriminatorValue("data201202")
public class Data201202
{
   // if column MONTH contains value "ata201202" this instance will be created
   // logic for this table here    
}

@Entity
@DiscriminatorValue("data201203")
public class Data201203
{
   // if column MONTH contains value "ata201203" this instance will be created
   // logic for this table here     
} 
```

# ruby-on-rails - 我可以在 Heroku 应用程序的 environment.rb 中运行“git describe”吗？

> ID：13459142
> 
> 赞同：5
> 
> 时间：2012-11-19T17:36:26.520
> 
> 标签：ruby-on-rails, git, heroku

当环境启动时（environment.rb），我有这段代码可以提取当前 repo 的 git 版本。

```
APP_VERSION = `git describe --always --long` unless defined? APP_VERSION 
```

那让我打开网站，转到某个页面，看看网站上的版本是正确的。这段代码在EngineYard上运行，但在Heroku上，当应用程序启动时我得到了这个：

`fatal: Not a git repository (or any of the parent directories): .git`

`git describe`在heroku上可以运行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:50:09.773

我认为你不能；当您使用 将您的应用程序部署到 Heroku 时`git push`，它似乎将其放入存储库中，然后在没有 git 存储库的情况下对您的代码进行干净签出。您可以使用该命令四处寻找`heroku run bash`，看看那里有什么。这是我的一个应用程序的内容：

```
$ heroku run bash
Running `bash` attached to terminal... up, run.1
~ $ ls -a
.    bin      config.ru  Gemfile       lib         public    .rspec  TODO.txt
..   .bundle  db         Gemfile.lock  Procfile    Rakefile  script  vendor
app  config   doc        .gitignore    .profile.d  README    spec 
```

没有`.git`目录，所以`git`命令不起作用。

如果您只想查看当前部署的版本，您可以在应用程序的 Heroku 仪表板的 Activity 选项卡下查看。( `https://dashboard.heroku.com/apps/[your app name]/activity`) 但我不确定如何将`git`版本添加到您的应用程序代码中，以便您可以将其显示为应用程序的一部分。

# java - EnumMap 与属性

> ID：13459144
> 
> 赞同：2
> 
> 时间：2012-11-19T17:36:44.897
> 
> 标签：java, data-structures, architecture, properties, enum-map

有没有人想过什么是优越的，`EnumMap`或者`Properties`（或至少在我的情况下？）我正在使用第 3 方软件包，它使用他们的方法在我的代码和他们的应用程序之间进行通信，如下所示：

```
TheirRuntime.getInstance().getParameter(String paramName) 
```

目前我已经创建了一个`enum`像这样工作的：

```
public enum MyEnum {
    FOO_BAR ("fooBar"), BAZ_QUUX ("bazQuux");

    private final String varName;
    private MyEnum(String varName) {
        this.varName = varName();
    }
    public String varName() {
        return varName();
    }
} 
```

然后我将值存储在 中`EnumMap<MyEnum, Double>`，当用户更改某些内容时会更新。[我的架构比这稍微复杂一些，但为了SSCCE](http://sscce.org)，我省略了一些细节。虽然我会提到我使用以下内容加载值：

```
for (MyEnum me : MyEnum.values()) {
     TheirRuntime.getInstance().getParameter(me.varName());
} 
```

我想知道的是，使用它会更有意义`Properties`吗？之所以出现这个问题，是因为我正在尝试构建一个根本不涉及 3rd 方软件的测试框架，并且我正在尝试寻找一种很好、简单的方法来加载不使用任何 3rd 的参数派对 API 调用，`Properties`文件似乎是一种简单的方法，这让我想知道我是否应该只`Properties`在主类中使用。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:45:32.637

枚举的好处很明显：
它为您提供枚举文字。您可以使用它们在编译级别捕获“错误密钥”问题。
属性允许您灵活 - 例如 - 您可以从文件中读取它们。
最大的问题是 - 你有多确定枚举提供的文字集是固定的，并且不会改变？
例如，我们的系统有一组枚举值，由于我们是一个开源项目，我们想在其上构建一个理论上应该使用枚举值的插件，
但插件编写者将无法使用原始枚举，因为它有一组固定的文字，所以我们要么将我们的枚举修改为属性对象，然后让插件编写者注册他们的“文字”，
或者我们必须为我们的枚举提供一个补充系统。
很抱歉，我在这里没有“明确”的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:44:50.377

使用 EnumMap 和普通 Properties （这也是一个 Map 在引擎盖下）之间的主要区别在于前者将强制执行可以存储在给定映射中的键的允许值，而 Properties 将允许对这些键使用任何字符串.

# java - 如何让 GWT Super Dev Mode / SuperDevMode 包含我的 html 文件？

> ID：13459150
> 
> 赞同：1
> 
> 时间：2012-11-19T17:37:13.847
> 
> 标签：java, gwt, gradle, gwt-super-dev-mode

我正在关注[这个答案](https://stackoverflow.com/questions/11265425/setting-the-java-classpath-for-super-dev-mode)（感谢 Ed），发现他没有完全解决问题。

我已经启动并运行了 SuperDevMode / CodeServer，但它不包含我的 html 文件，这使它有点没用。我真的需要运行 2 个 Web 服务器吗？

我正在使用 Gradle，如果这很重要的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T23:05:19.330

如果您没有任何服务器端，那么您可以简单地将您的 HTML 主机页面放在您的[公共路径](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects#DevGuideModules)中，而不是放在*war 文件夹*中，然后它将由 SuperDevMode CodeServer 提供服务，因为它现在是模块的一部分。不要忘记调整您的`<script>`:`*.nocache.js`将是页面的兄弟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:37:13.847

这是我想出的答案。在我的 HTML 文件中，我删除了加载 *.nocache.js 的脚本，而是动态生成它，如下所示：

```
<script type="text/javascript">
    function loadScript(scriptSrc)
    {
        var scriptTag = document.createElement('script');
        scriptTag.type = 'text/javascript';
        scriptTag.async = true;
        scriptTag.src = scriptSrc;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(scriptTag, s);
    }

    // Load the GWT script
    loadScript(('file:' == document.location.protocol ? "http://localhost:9876/" : "") + "admin/admin.nocache.js");
</script> 
```

我运行代码服务器的 Gradle 任务如下所示：

```
task codeServer(dependsOn: "war") << {
    println("*----------------------------------------------------------------------------------------------*")
    println("   Ignore what this says below about going to http://localhost:9876/")
    println("   Instead, once the server below is up, in a separate command line, type:")
    println("       start $buildDir\\exploded\\Admin.html")
    println("*----------------------------------------------------------------------------------------------*")

    def gwtTempDir = "$buildDir/gwtTemp"
    (new File(gwtTempDir)).mkdirs()

    ant.java(classname: "com.google.gwt.dev.codeserver.CodeServer", failonerror: "true", fork: "true") {
        classpath {
            pathElement(location: "src/main/java")
            pathElement(location: "src/main/resources")
            pathElement(location: "$buildDir/classes/main")
            pathElement(path: configurations.compile.asPath)
        }
        jvmarg(value: "-Xmx512m")
        sysproperty(key: "java.util.logging.SimpleFormatter.format", value: System.getProperty("java.util.logging.SimpleFormatter.format"));
        arg(line: "-workDir " + gwtTempDir)
        arg(line: "-src " + "src/main/java")
        arg(value: "com.onlyinsight.oventio.Admin")
    }
} 
```

所以现在，我可以将浏览器指向 file:///F:/projects/ConferenceModule/build/exploded/Admin.html 而不是第二个网络服务器，这一切都有效。

我希望这对其他人有所帮助。

# regex - 构造函数中的Scala正则表达式模式匹配实例化子类

> ID：13459154
> 
> 赞同：1
> 
> 时间：2012-11-19T17:37:47.567
> 
> 标签：regex, scala, pattern-matching, immutability

我有以下代码来进行正则表达式模式匹配。

```
class UserAgent(val ua: String) {
  val iOS = """.*(iPad|iPhone|iPod).*OS ([0-9_]+).*""".r
  val Android = """.*Android ([0-9.]+).*""".r
  val WindowsPhone = """.*Windows Phone OS.*""".r
  val WebOS = """.*webOS.*""".r
  val BlackBerry = """.*BlackBerry.*""".r
  val WAPBrowser = """.*(MIDP|UP\.Browser|Obigo|Polaris|BREW|Brew|NetFront).*""".r

  var platform = "UnknownPlatform"
  var platformVersion = "UnknownVersion"

  ua match {
    case iOS(_, version) => {
      platform = "IOS"
      platformVersion = version.replace("_", ".")
    }
    case Android(version) => {
      platform = "Android"
      platformVersion = version
    }
    case WindowsPhone() => platform = "WindowsPhone"
    case WebOS() => platform = "WebOS"
    case BlackBerry() => platform = "BlackBerry"
    case WAPBrowser(p) => platform = "WAPBrowser"
  }
} 
```

可以使用（简化的）代码进行测试：

```
val tests = for (
    str <- List("Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7",
      "Mozilla/5.0 (Linux; U; Android 2.2; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1",
      "bla bla Windows Phone OS bla bla",
      "bla bla webOS bla bla",
      "bla bla BlackBerry bla bla",
      "LG-LX600 Polaris/6.0 MMP/2.0 Profile/MIDP-2.1 Configuration/CLDC-1.1")
  ) yield new UserAgent(str)

tests foreach { ua => println(ua.platform + " " + ua.platformVersion) } 
```

这不是非常 scala-ish，因为我的类`UserAgent`有可变变量`platform`和`platformVersion`. 我想要实现的是具有不变性，因此要有类似 a 的东西`trait`，它定义`platform`和`platformVersion`子类，它们将返回不同的值。我缺少的是如何创建一个构造函数来实例化并返回这样的子类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:50:52.973

您可以使用`Tuple2`：

```
 val (platform, platformVersionOpt) = ua match {
    case iOS(_, version) => "IOS" -> Some(version.replace("_", "."))
    case Android(version) => "Android" -> Some(version)
    case WindowsPhone() => "WindowsPhone" -> None
    case WebOS() => "WebOS" -> None
    case BlackBerry() => "BlackBerry" -> None
    case WAPBrowser(p) => "WAPBrowser" -> None
  }

  val platformVersion = platformVersionOpt.getOrElse("UnknownPlatform") 
```

Scala的方式是用`unapply`方法创建对象：

```
object UserAgent {
  val iOS = """.*(iPad|iPhone|iPod).*OS ([0-9_]+).*""".r
  val Android = """.*Android ([0-9.]+).*""".r
  val WindowsPhone = """.*Windows Phone OS.*""".r
  val WebOS = """.*webOS.*""".r
  val BlackBerry = """.*BlackBerry.*""".r
  val WAPBrowser = """.*(MIDP|UP\.Browser|Obigo|Polaris|BREW|Brew|NetFront).*""".r

  def unapply(ua: String): Option[(String, Option[String])] = ua match {
      case iOS(_, version) => Some("IOS" -> Some(version.replace("_", ".")))
      case Android(version) => Some("Android" -> Some(version))
      case WindowsPhone() => Some("WindowsPhone" -> None)
      case WebOS() => Some("WebOS" -> None)
      case BlackBerry() => Some("BlackBerry" -> None)
      case WAPBrowser(p) => Some("WAPBrowser" -> None)
      case _ => None
    }
} 
```

用法：

```
scala> val tests = List("Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7", "Mozilla/5.0 (Linux; U; Android 2.2; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1", "bla bla Windows Phone OS bla bla", "bla bla webOS bla bla", "bla bla BlackBerry bla bla", "LG-LX600 Polaris/6.0 MMP/2.0 Profile/MIDP-2.1 Configuration/CLDC-1.1")

scala> tests foreach {
     |   case UserAgent(p, v) => println(p + " " + v.getOrElse("UnknownVersion"))
     |   case _ => println("UnknownPlatform UnknownVersion")
     | }
IOS 4.0
Android 2.2
WindowsPhone UnknownVersion
WebOS UnknownVersion
BlackBerry UnknownVersion
WAPBrowser UnknownVersion 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:03:01.427

一个可能的答案，使用 a`Tuple2`和 an`Option[String]`作为版本。我还将正则表达式移至伴随对象。

```
object UserAgent {
  val iOS = """.*(iPad|iPhone|iPod).*OS ([0-9_]+).*""".r
  val Android = """.*Android ([0-9.]+).*""".r
  val WindowsPhone = """.*Windows Phone OS.*""".r
  val WebOS = """.*webOS.*""".r
  val BlackBerry = """.*BlackBerry.*""".r
  val WAPBrowser = """.*(MIDP|UP\.Browser|Obigo|Polaris|BREW|Brew|NetFront).*""".r
}

class UserAgent(val ua: String) {
  import UserAgent._

  val (platform, version): (String, Option[String]) = ua match {
    case iOS(_, version) =>
      ("IOS", Some(version.replace("_", ".")))
    case Android(version) =>
      ("Android", Some(version))
    case WindowsPhone() => 
      ("WindowsPhone", None)
    case WebOS() => 
      ("WebOS", None)
    case BlackBerry() => 
      ("BlackBerry", None)
    case WAPBrowser(p) => 
      ("WAPBrowser", None)
  }
} 
```

# weblogic11g - 在 Weblogic 服务器中获取服务器停机时间的位置

> ID：13459155
> 
> 赞同：1
> 
> 时间：2012-11-19T17:37:46.303
> 
> 标签：weblogic11g

考虑一下，`Weblogic managed server`由于某种原因，其中一个在上午 10 点到 11 点之间停机。
是否有任何可用的日志表示它何时关闭（服务器关闭的时间）？如果是这样我在哪里可以找到它？
或者有没有一种方法可以监控 weblogic 服务器的停机时间？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:23:13.937

您可以使用“nohup.out”(linux) 配置 weblogic 控制台日志或监视默认控制台日志 (windows)。

[这](http://docs.oracle.com/cd/E13222_01/wls/docs100/ConsoleHelp/taskhelp/logging/ConfigureAndViewLogs.html)可能有助于从您的 Weblogic 控制台设置日志。

# php - Symfony2 防火墙需要很长时间

> ID：13459157
> 
> 赞同：7
> 
> 时间：2012-11-19T17:37:59.483
> 
> 标签：php, symfony

我对 Symfony2 防火墙组件在某些请求上花费了很长时间有疑问。

我注意到它主要发生在 AJAX 请求期间，而且非常具体 - 当我在学说中使用 LIKE %..% 语句搜索实体时（不确定它是否重要，但这就是我注意到的；））。

稍后（1 或 2 秒后）调用相同的 URL 会导致“正常”的防火墙处理时间。

我没有使用任何外部数据源进行身份验证，所有内容都存储在 PostgreSQL 中。

看看下面的时间线：

[![时间线](../Images/b537d0fe3a81bf35f739847b28f0f9ce.png)](https://i.stack.imgur.com/bHesD.png)

有没有办法直接调试防火墙？

我的配置如下所示：

```
security:
firewalls:
    admin_area:
        provider: db_users
        pattern: ^/admin
        anonymous: ~
        form_login:
          login_path: /admin/login
          check_path: /admin/login-check
        logout: 
          path: /admin/logout
          target: /admin
        switch_user: { role: ROLE_SUPERADMIN, parameter: _become_user }

    secured_area:
        pattern:    ~
        anonymous: ~
        http_basic:
            realm: "Secured Demo Area"

access_control:
    - { path: ^/admin/clip-manager/clip/encode/*, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
    - { path: ^/admin/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin/login-check, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin, roles: [ROLE_ADMIN_LOGIN, ADMIN_AREA] }

providers:
    db_users:
        entity: { class: Webility\Bundle\AppUserBundle\Entity\User, property: username }

encoders:
    Webility\Bundle\AppUserBundle\Entity\User:
        algorithm:          sha256
        iterations:         3
        encode_as_base64:   false

acl:
    connection: default 
```

我正在使用`Symfony\SecurityBundle`和`JMSSecurityExtraBundle`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-11-15T19:28:45.450

我遇到了同样的问题，想和大家分享解决方案。

[![服务器响应时间增加](../Images/896d2bd6f98d448e4259b91e23b92d64.png)](https://i.stack.imgur.com/Efk5E.png)

由 Symfony\Component\Security\Http\Firewall 引起的问题 ~ 107406 ms

[![申请时间表](../Images/f7dbaa90553fcec91e700fa9094359ac.png)](https://i.stack.imgur.com/9lfgl.png)

解决方案;

在我们的案例中，问题是我们在 php.ini 文件中使用的会话处理程序。

以前的配置；

```
session.save_handler = files 
```

新配置；

```
;session.save_handler = files

session.save_handler = memcached
session.save_path = "127.0.0.1:11212" 
```

我将会话处理程序更改为 memcached。因为我已经在使用 memcached，所以我需要第二个 memcached 实例，或者当我实现 memcached 侦听的额外端口时，解决了这个问题；

要运行 memcached 来监听两个端口，我编辑 memcached.conf

以前的配置；

```
-p 11211
-l 127.0.0.1 
```

新配置

```
#-p 11211
#-l 127.0.0.1

-l 127.0.0.1:11211
-l 127.0.0.1:11212 
```

并且只是重新启动 memcached 实例，memcached 开始监听同一实例上的两个端口。

```
service memcached restart 
```

要验证 memcached 是否在新端口上侦听和响应，您可以运行 telnet 命令；

```
telnet 127.0.0.1 11211
telnet 127.0.0.1 11212 
```

预期输出是；

```
Trying 127.0.0.1...
Connected to 127.0.0.1.
Escape character is '^]'. 
```

结果是非常快速的应用程序；

[![最终申请时间表](../Images/0cdc9f286b356a0cf3890fa6e95810f2.png)](https://i.stack.imgur.com/v4gRg.png)

我希望这个解决方案能帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:13:04.993

这是相当不寻常的行为（除非你正在做某事，嗯......不寻常;）。

尝试使用其中一个 PHP 分析器来查看发生了什么。我可以推荐[XHProf](https://github.com/facebook/xhprof)和[XHProf GUI](http://blog.preinheimer.com/index.php?/archives/355-A-GUI-for-XHProf.html)。它易于设置和使用。

我只是猜测，但问题可能与您提到的数据库查询有关。检查查询中使用的字段是否设置了适当的索引。

编辑：我偶然发现这篇文章链接自 Symfony 博客：http: [//12wiki.blogspot.com.es/2012/11/why-does-symfony-2-firewall-take-so.html](http://12wiki.blogspot.com.es/2012/11/why-does-symfony-2-firewall-take-so.html)

这似乎是一个DNS问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-21T19:31:38.290

尝试使用不同的会话处理程序。我的 Vagrant 盒子里也有同样的问题。不知道是什么原因造成的。有关详细信息，请参阅[http://ctors.net/2014/04/21/symfony_slow_in_vagrant](http://ctors.net/2014/04/21/symfony_slow_in_vagrant)。

# android - 我可以不将数组（只是普通的旧数组而不是数组列表）与基本适配器一起用于列表视图吗？

> ID：13459163
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:38:14.343
> 
> 标签：android, arrays, android-layout, listview, baseadapter

我想为列表视图使用基本适配器，但我的数据在 String[] 中，这是不允许的吗？似乎无法让项目在视图中膨胀……我的 XML 布局构建正确。下面发布了有关活动的 java。我没有得到任何例外，只是没有显示列表。

```
public class SuggestedRest extends Activity{
    MediaPlayer clickSound;
    Context context;
    private String[] restaurantSuggestions = {
            "Applebees",
            "Arby's",
            "Baskin Robbins",
            "Ben & Jerry's",
            "Bojangles'",
            "Bonefish Grill",
            "Buffalo Wild Wings",
            "Burger King",
            "Captain D's",
            "Carl's Jr.",
            "Carrabba's",
            "Checkers",
            "Cheeburger Cheeburger",
            "Cheesecake Factory",
            "Chick-Fil-A",
            "Chili's",
            "Church's",
            "Cold Stone Creamery",
            "Cracker Barrel",
            "Dairy Queen",
            "Dave & Buster's",
            "Denny's",
            "Domino's Pizza",
            "Dunkin' Donuts",
            "Five Guys",
            "Hardee's",
            "Hooters",
            "Huddle House",
            "IHOP",
            "Jack in the Box",
            "Jack's",
            "Jason's Deli",
            "Jersey Mike's Subs",
            "Jimmy John's",
            "KFC",
            "Krystal",
            "Little Caesars",
            "Logan's Roadhouse",
            "Lone Star",
            "Long John Silver's",
            "LongHorn Steakhouse",
            "Macaroni Grill",
            "McAlister's Deli",
            "McDonald's",
            "Moe's Southwest Grill",
            "Olive Garden",
            "Outback",
            "P. F. Chang's China Bistro",
            "Panda Express",
            "Panera Bread",
            "Papa John's",
            "Pizza Hut",
            "Popeyes Chicken & Biscuits",
            "Quiznos",
            "Rally's",
            "Red Lobster",
            "Red Robin",
            "Ruby Tuesday",
            "Ruth's Chris Steak House",
            "Sbarro",
            "Schlotzsky's",
            "Shoney's",
            "Smashburger",
            "Sonic",
            "Starbucks",
            "Steak 'n Shake",
            "Subway",
            "Taco Bell",
            "TGI Friday",
            "Waffle House",
            "Wendy's",
            "Whataburger",
            "White Castle",
            "Zaxby's"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.suggested_rest_layout);
        context = getApplicationContext();
        final AdapterSuggestionsList asl = new AdapterSuggestionsList(context, restaurantSuggestions);
        final ListView lv = (ListView) findViewById(R.id.list_view_suggested);
        //lv.setAdapter(asl);

    }

    public class AdapterSuggestionsList extends BaseAdapter {

        private final Context context;
        private final String[] sugArray;

        public AdapterSuggestionsList(Context context, String[] sugArray) {
                    super();
                    this.context = context;
                    this.sugArray = sugArray;
                }

                @Override
                public View getView(int position, View convertView , ViewGroup parent){
                    LayoutInflater inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    final ViewHolder holder;

                    if (convertView == null){  // if null then inflate view. if not null then get the view from the stored ViewHolder class object  ("holder")
                        // 
                    convertView = inflator.inflate(R.layout.suggested_row, parent, false);
                    holder = new ViewHolder();
                    // holder is used as a recycle bin of sorts. once we inflate the view we store it as a holder object and just update the values since inflating is expensive
                        holder.tv1 = (TextView) convertView.findViewById(R.id.suggested_name);
                        holder.btnAdd= (Button) convertView.findViewById(R.id.btn_add_sugg_to_fav);

                        convertView.setTag(holder);
                        }  
                    else{
                        holder = (ViewHolder) convertView.getTag();
                    }

                    // this is the restaurant name
                    holder.name_value = sugArray[position];
                    holder.tv1.setText(holder.name_value);

                    holder.btnAdd.setOnClickListener(new View.OnClickListener() {
                        @Override
                        public void onClick(View v) {
                            clickSound.start();
                            Intent intent  = new Intent(getApplicationContext(), AddMoreRestaurant.class);
                            intent.putExtra("TAG_THENAME", holder.name_value);  // this tag is opened by the AddMoreRestaurants activity when it is started by this intent
                            startActivity(intent);
                        }
                    });
                    return convertView;
                }

                @Override
                public int getCount() {
                    // TODO Auto-generated method stub
                    return sugArray.length;
                }
                @Override
                public Object getItem(int position) {
                    // TODO Auto-generated method stub
                    return position;
                }
                @Override
                public long getItemId(int position) {
                    // TODO Auto-generated method stub
                    return position;
                }
            }

        private static class ViewHolder {
            private TextView tv1;
            private Button btnAdd; // the button to add to the favorites
            private String name_value;  // set this to the name of the restaurant and pass it to the intent if needed
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:49:46.030

取消注释该行`lv.setAdapter(asl);`

您需要设置适配器。

# c# - 在c#中使用异步方法接收请求

> ID：13459166
> 
> 赞同：1
> 
> 时间：2012-11-19T17:38:34.957
> 
> 标签：c#, http, sockets, asynchronous

我正在尝试设置一些网络内容。出于这个原因，我需要通过网络发送和接收数据。特别是 HTTP 消息。我想用 C# 中的异步方法来实现它。当我从网络服务器接收 HTTP 响应时，我想接收数据，直到网络服务器关闭连接或（连接：保持活动状态）直到我收到 HTTP 响应的所有字节。我已经尝试设置此方法但失败了。你能告诉我如何实现这一点。我在 msdn 上看到过这个例子：

```
 private static void Receive(Socket client) {
    try {
        // Create the state object.
        StateObject state = new StateObject();
        state.workSocket = client;

        // Begin receiving the data from the remote device.
        client.BeginReceive( state.buffer, 0, StateObject.BufferSize, 0,
            new AsyncCallback(ReceiveCallback), state);
    } catch (Exception e) {
        Console.WriteLine(e.ToString());
    }
}

private static void ReceiveCallback( IAsyncResult ar ) {
    try {
        // Retrieve the state object and the client socket 
        // from the asynchronous state object.
        StateObject state = (StateObject) ar.AsyncState;
        Socket client = state.workSocket;

        // Read data from the remote device.
        int bytesRead = client.EndReceive(ar);

        if (bytesRead > 0) {
            // There might be more data, so store the data received so far.
        state.sb.Append(Encoding.ASCII.GetString(state.buffer,0,bytesRead));

            // Get the rest of the data.
            client.BeginReceive(state.buffer,0,StateObject.BufferSize,0,
                new AsyncCallback(ReceiveCallback), state);
        } else {
            // All the data has arrived; put it in response.
            if (state.sb.Length > 1) {
                response = state.sb.ToString();
            }
            // Signal that all bytes have been received.
            receiveDone.Set();
        }
    } catch (Exception e) {
        Console.WriteLine(e.ToString());
    }
} 
```

使用状态对象：

```
public class StateObject {
// Client socket.
public Socket workSocket = null;
// Size of receive buffer.
public const int BufferSize = 256;
// Receive buffer.
public byte[] buffer = new byte[BufferSize];
// Received data string.
public StringBuilder sb = new StringBuilder();
} 
```

如果我使用与此类似的代码，恐怕会遇到可怕的副作用，因为所有线程都使用相同的状态对象。此外，我必须立即重新发送接收到的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:08:46.353

[HTTP](http://en.wikipedia.org/wiki/HTTP)不是一个简单的协议。如果您坚持手动执行此操作，请暂时不要打扰线程，从单个 HTTP 客户端连接开始，找出正确的消息解析和***协议状态机***。一旦你开始工作，扩展/扩展/无论如何都会简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:59:17.287

我试图实现异步接收方法。好吧，它还没有完成，但基本结构应该清楚了。

```
private void BeginReceiveFromWebserver(ClientSocket clientSocket)
    {
        try
        {
            clientSocket.CommunicationSocket.BeginReceive(clientSocket.Buffer, 0, clientSocket.Buffer.Length,
                                                         SocketFlags.None, new AsyncCallback(ReceiveFromWebserverCallback), clientSocket);

        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message + "\nfrom Source: " + e.Source + "\nand Stack Trace: " + e.StackTrace);
            //XXX TODO
        }
    }

    private void ReceiveFromWebserverCallback(IAsyncResult ar)
    {            
        ClientSocket clientSocket = ar.AsyncState as ClientSocket;

        try
        {
            int bytesRead = clientSocket.CommunicationSocket.EndReceive(ar);

            if (bytesRead > 0)
            {
                if(!clientSocket.AllBytesReceived)
                {
                    // No locks needed here, because it works like a loop
                    clientSocket.TotalBytesReceived+=bytesRead;
                    clientSocket.BufferUsed++;
                    clientSocket.AddBuffer();
                    clientSocket.SendingToBrowserCompleted.WaitOne();
                    BeginSend(clientSocket, bytesRead);
                    clientSocket.CommunicationSocket.BeginReceive(clientSocket.Buffer, 0, clientSocket.Buffer.Length,
                                                        SocketFlags.None, new AsyncCallback(ReceiveFromWebserverCallback), clientSocket);
                }
                else
                {
                    // all bytes Received
                }
            }
            else
            {
                Console.WriteLine("Webserver Closed Connection");
                //XXX TODO, Webserver closed the Connection
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message + "\nfrom Source: " + e.Source + "\nand Stack Trace: " + e.StackTrace);
            //XXX TODO
        }
    } 
```

收到的每一条消息都会重新发送到浏览器。为了确保浏览器以正确的顺序获得这些和平，我在这里设置了 SendingToBrowserCompleted-AutoResetEvent。如果您对更多代码感兴趣，请询问。

# asp.net - 在 SQL Server 2008 R2 问题中复制 db

> ID：13459167
> 
> 赞同：1
> 
> 时间：2012-11-19T17:38:41.793
> 
> 标签：asp.net, visual-studio-2010, sql-server-2008, c#-4.0

为了开发目的，我使用向导在 SQL Server R2 中制作了一个数据库副本。那部分工作得很好。在我的代码中，我将 web.config 中的连接字符串更改为指向新数据库：

```
<add name="myConnectionString" connectionString="Data Source=\dev;Initial Catalog=live_DEV;Integrated Security=True" providerName="System.Data.SqlClient"/>
<!--<add name="liveConnectionString" connectionString="Data Source=\dev;Initial Catalog=live;Integrated Security=True" providerName="System.Data.SqlClient"/>--> 
```

出于安全原因，我更改了服务器等的实际名称，但格式相同。如您所见，我已将旧数据库注释掉并更改为副本。

我正在使用 VS2010 并将所有引用从旧连接更改为我的开发副本：

```
using (SqlConnection connIncident_TrackerDB = new SqlConnection(@"Data Source=\dev;Initial Catalog=live_DEV;Integrated Security=True"))
    { 
```

我检查了我的开发副本中的存储过程，它们都以 [USE live_DEV] 作为标题。我已经清理并重建了代码。我已经重新启动了我的 ASP.NET 开发服务器并运行了它。

当我这样做并检查数据库时，它会更新实时副本和开发副本。我错过了什么？

谢谢，保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:03:27.437

听起来您错过了代码中连接字符串被硬编码的某个地方。我建议两件事

首先更改您的权限以禁止访问生产。这将防止您意外地使用测试代码更新生产。它会导致您的应用程序在生产更新的地方中断（这可能会导致您找到问题的原因）。

其次从应用程序中删除所有硬编码的连接字符串，并且只使用 web.config 中的连接字符串

# iphone - 如何设计从移动设备上的联系人卡片自动填写的移动表单

> ID：13459172
> 
> 赞同：1
> 
> 时间：2012-11-19T17:38:47.690
> 
> 标签：iphone, html, safari, autofill

我正在为一个网站设计一个表单，所有内容（名字、姓氏、电子邮件等）都是从我在 Safari 中的联系人卡片中自动填充的，除了城市、州邮编。输入字段唯一奇怪的是它上面有一些自动完成的javascript。

```
<div class="clearfix">
    <input type="text" name="first_name" placeholder="First Name" class="form-inp required" />
</div>
<div class="clearfix">
    <input type="text" name="last_name" placeholder="Last Name" class="form-inp required"/>
</div>
<div class="clearfix">
    <input name="email" placeholder="Email Address" class="form-inp required email"/>
</div>
<div class="clearfix">
    <input type="tel" name="phone" placeholder="Phone Number" class="form-inp required phoneUS" />
</div>
<div class="clearfix">
        <input type="text" name="location" placeholder="City/State/Zip" class="required"/>
</div> 
```

导致 Safari 自动填充的输入元素的 ID 或名称是否有一些命名约定？

# clojure - 在 Clojure 中渲染 png 图像序列

> ID：13459174
> 
> 赞同：1
> 
> 时间：2012-11-19T17:38:51.547
> 
> 标签：clojure, png, rendering

如何创建所有内容都是用 png 序列生成的动画的窗口？

我找不到任何适合这个主题的文章。或者，如果我打算在 Clojure 中做一些小游戏，那么使用任何 java 游戏引擎可能会更好吗？你会用什么来实现这个目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:28:31.007

让我们改编[一个来自 Wikibooks 的例子](https://en.wikibooks.org/w/index.php?title=Clojure_Programming/Examples/Cookbook&oldid=2375131#Simple_Drawing_in_a_window)。

```
(import '(javax.swing JFrame JPanel)
        '(java.awt Dimension Toolkit)
        '(java.net URL))

(def url
  (URL. "http://www.gravatar.com/avatar/70fa7ca20ce9cbf4c97bb9538034cef7?s=200&d=identicon&r=PG"))

(def avatar
  (ref (-> (Toolkit/getDefaultToolkit) (.getImage url))))

(defn image
  []
  @avatar)

(defn make-panel []
  (let [panel (proxy [JPanel] []
                (paintComponent [g]
                  (.drawImage g (image) 0 0 this)))]
    (doto panel
      (.setPreferredSize (Dimension. 200 200)))))

(defn make-frame [panel]
  (doto (new JFrame)
    (.add panel)
    .pack
    .show))

(def frame
  (make-frame (make-panel))) 
```

现在`avatar`使用 . 将 ref 更新为新图像`ref-set`。记得之后重新绘制框架。

```
(dosync
  (ref-set avatar (-> (Toolkit/getDefaultToolkit) (.getImage "image.png"))))

(.repaint frame) 
```

现在让我们为它制作动画。

```
(def images
  (cycle (map #(-> (Toolkit/getDefaultToolkit) (.getImage %))
              ["1.png" "2.png" "3.png"])))

(loop [coll images]
  (when (.isVisible frame)
    (dosync (ref-set avatar (first coll)))
    (.repaint frame)
    (Thread/sleep 100)
    (recur (rest coll)))) 
```

我希望这足以让你开始。

说到 Java 生态系统的游戏引擎，您可能想看看[lwjgl](https://stackoverflow.com/tags/lwjgl/info)。

# javascript - 在哪里包含 jquery 和 jquery 移动库

> ID：13459175
> 
> 赞同：1
> 
> 时间：2012-11-19T17:38:58.103
> 
> 标签：javascript, jquery, html, cordova, jquery-mobile

我正在使用以下库：

```
 <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

如果我在标签中包含上述内容，`<HEAD>`则应用程序按预期工作。我的问题是，如果我在浏览器中打开同一个网页，在下载所有三个库之后，然后分别将它们包含在 CSS 和 JS 文件夹中，然后使用以下代码：

```
<script rel="external" type="text/javascript" src="js/jquery.js"></script>              
<script rel="external" type="text/javascript" src="js/jqm.js"></script> 
<link rel="stylesheet" type="text/css" href="css/jqm.css"/> 
```

该程序不起作用。我已经尝试将它们包含在 body 标签的最后一行，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:54:36.260

是的，您可以将您的图书馆存储在您的设备上，它也可以在没有互联网访问的情况下工作。
我曾经准备过一个例子，[看看这里怎么做](https://stackoverflow.com/questions/9892136/jquery-mobile-test-offline/13222844#13222844)......

![在此处输入图像描述](../Images/981662b10cf8e2653b9c773df3913989.png)

您的示例不起作用，因为您没有下载图标集。您必须将它们存储在子目录中`/images`。您还必须使用 jQuery Mobile CSS 结构文件...

# php - php 正则表达式和或 (|)

> ID：13459177
> 
> 赞同：0
> 
> 时间：2012-11-19T17:39:20.173
> 
> 标签：php, regex

我正在试验一个问题 | （或）和 php.ini 中的正则表达式。

这是我想做的，例如我有这 3 句话：

“苹果很好吃”

“一天一苹果，医生远离我”

“我喜欢吃苹果”

假设我想用橙色来改变苹果这个词，所以这是我的代码：

```
$oldWord="apple";
$newWord="orange";
$text = preg_replace('#^' . $oldWord . ' #', $newWord, $text);
$text = preg_replace('# ' . $oldWord . ' #', $newWord, $text);
$text = preg_replace('# ' . $oldWord . '$#', $newWord, $text); 
```

当然可以，但我还没有找到正确的组合，只用一行代码和关键字 | （或者）。

请问各位有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:45:16.970

因此，如果您只想替换**整个单词**，即不理会“菠萝”，那么该`str_replace`方法将行不通。您应该使用的是单词边界锚`\b`

```
preg_replace('#\b' + $oldWord + '\b#', $newWord, $text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:41:56.330

为什么不只是`str_replace('apple', 'orange', $text);`？

# 编辑：

根据用户的评论：

```
preg_replace('/\bapple\b/', 'orange', $text); 
```

如果您担心正确转义表达式中的搜索词：

```
$oldWord = preg_quote($oldWord, '/');
$text = preg_replace("/\b$oldWord\b/", $newWord, $text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:43:13.253

请注意，您的正则表达式会删除`apple`. 如果这不是您想要的，而是您只想替换`apple`完整的单词，那么，正如其他一些人建议的那样，使用单词边界：

```
$text = preg_replace('#\b' . $oldWord . '\b#', $newWord, $text); 
```

如果您**确实**打算删除空格，您也可能需要一个 wordboundary，但使空格是可选的：

```
$text = preg_replace('#[ ]?\b' . $oldWord . '\b[ ]?#', $newWord, $text); 
```

如果它们在那里，它们也将被删除。如果不是，则正则表达式不在乎。请注意，这`[ ]`完全等同于只输入一个空格，但我发现它在正则表达式中更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:43:14.247

简单地使用`preg_replace`而不是`preg_match`

```
preg_replace('⁓\b'.$oldWord.'\b⁓', $newWord, $text) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T17:44:57.033

我不能测试但是

```
$text = preg_match('#\b' . $oldWord . '\b#ig', $newWord, $text); 
```

应该拯救你的一天；）

# jquery - jQuery on click 触发第二个孩子

> ID：13459178
> 
> 赞同：0
> 
> 时间：2012-11-19T17:39:21.877
> 
> 标签：jquery, click, parent

我正在尝试使 div 具有单击功能，该功能可以打开分配给其中的链接`<a>` 。我已经尝试了一些变体，但似乎没有任何工作正常。

我的 jQuery

```
$('div#task_list').delegate("div.task_bucket", "click", function() {
  $(this + ' div.task_name a.show_task_link').click();
}) 
```

还有我的 HTML

```
<div class="grid_3 border_box task_bucket">
  <div class="date border_box">
    November 16, 2012
    <span class="comments">3</span>
  </div>
  <div class="task_name">
    <a href="/tasks/165" class="show_task_link" data-remote="true" id="165">Lorem Ipsum Dolor sit amen...</a>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:41:23.040

您需要`this`用作上下文

```
$('div.task_name a.show_task_link',this).click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:42:19.080

我建议，因为这似乎需要打开一个新页面（因为`href`前面没有`#`字符，所以建议在当前页面内移动）：

```
$('#task_list').on('click', 'a', function(e){
    window.location = e.target.href;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:45:41.837

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T19:06:09.467

```
$('div.tlist').click(function(){

var x= $('div.tlist').find('a').attr('href');
 window.open(x);

 }); 
```

Use find method to get the child attribute..

# android - android 应用程序在设备上完美运行，但总是在模拟器上强制关闭

> ID：13459179
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:39:27.173
> 
> 标签：android, android-emulator, android-2.2-froyo

我有一个正在开发的应用程序，其中包含适用于 Android 2.2 的着色器。当我在我的 HTC Desire 上安装应用程序时，它运行完美，但是当我从（启用了 GPU 的正确模拟器）运行它时，应用程序总是强制关闭，我不明白为什么。我不知道如何找到问题或在哪里可以找到一些额外的信息给你。如果需要一些，请告诉我。该应用程序是一个渲染草着色器（目前只有 2 个三角形设置）。但是我在 VD 上启用了 GPU 仿真

```
11-19 19:53:27.291: D/libEGL(274): egl.cfg not found, using default config
11-19 19:53:27.291: D/libEGL(274): loaded /system/lib/egl/libGLES_android.so
11-19 19:53:27.321: W/dalvikvm(274): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
11-19 19:53:27.361: E/AndroidRuntime(274): FATAL EXCEPTION: GLThread 8
11-19 19:53:27.361: E/AndroidRuntime(274): java.lang.IllegalArgumentException: No configs match configSpec
11-19 19:53:27.361: E/AndroidRuntime(274):  at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:760)
11-19 19:53:27.361: E/AndroidRuntime(274):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:916)
11-19 19:53:27.361: E/AndroidRuntime(274):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1246)
11-19 19:53:27.361: E/AndroidRuntime(274):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1116)
11-19 19:53:29.841: I/Process(274): Sending signal. PID: 274 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:35:09.173

你在用相机吗？似乎与此类似：

[“ java.lang.IllegalArgumentException: No configs match configSpec ” 打开相机意图时](https://stackoverflow.com/questions/6594636/java-lang-illegalargumentexception-no-configs-match-configspec-while-openin)

Android 模拟器不支持相机，所以不用担心。

如果您尝试运行 OpenGL，则模拟器也不支持。

请告诉我们您正在开发什么样的应用程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:19:29.850

看起来。尽管 GPU 仿真是可以打开的，但 OpenGL ES 并不是可以在仿真器上运行的东西。（截至本答案时）不可能在模拟器中执行着色器，因此带有着色器的应用程序无法在模拟器上运行

**更新：**当主机 GPU 选项打开时，从 Android 4 开始，[模拟器支持](http://android-developers.blogspot.in/2012/04/faster-emulator-with-better-hardware.html) OpenGL ES 2.0 。

# jquery - jquery touchmove chrome 手机

> ID：13459188
> 
> 赞同：1
> 
> 时间：2012-11-19T17:40:06.553
> 
> 标签：jquery, google-chrome, touchmove

如何在 touchmove 期间获取手指下元素的 id？

我想要实现的是：

*   绑定触摸[开始|结束|移动]
*   在 touchstart 开始选择
*   在 touchmove 期间，收集我手指下“触摸”的所有 dom 元素

示例代码

```
var collected = [];
$('body').bind('touchstart touchmove touchend', function(event) {
  event.preventDefault();
  if(event.type == 'touchstart') {
    collected = [];
  } else if(event.type == 'touchmove') {
    // id of the element under my finger??
    // insert in collected the id of the element
  } else if(event.type == 'touchend') {
    // some code
  }
}); 
```

解决了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:44:32.267

[您可以在此处](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safariwebcontent/HandlingEvents/HandlingEvents.html)找到有关 Safari 中所有触摸事件的信息。jQuery 没有任何触摸事件处理程序，您需要自己定义它们。取自[这个stackoverflow帖子](https://stackoverflow.com/questions/4755505/how-to-recognize-touch-events-using-jquery-in-safari-for-ipad-is-it-possible)

```
document.addEventListener('touchmove', function(e) {
    e.preventDefault();
    var touch = e.touches[0];
    alert(touch.pageX + " - " + touch.pageY);
}, false); 
```

通过这种方式，您可以定义所有触摸手势的方式。

# erlang - R15B03 中的 Erlang 退出/2 错误

> ID：13459190
> 
> 赞同：1
> 
> 时间：2012-11-19T17:40:14.167
> 
> 标签：erlang, erlang-shell

[来自这里](http://erlang.org/doc/man/erlang.html#exit-2)的简短副本：

> `exit(Pid, Reason) -> true`
> 
> 类型：
> 
> Pid =`pid()` 原因 =`term()`
> 
> `Reason`向进程发送带有退出原因的退出信号`Pid`。
> 
> `normal`如果 Reason 是除or之外的任何术语，则以下行为适用`kill`：
> 
> 如果`Pid`is not trapping exits，`Pid`它本身会以 exit reason 退出`Reason`。如果`Pid`是捕获出口，则出口信号被转换为消息`{'EXIT', From, Reason}`并传递到 的消息队列中`Pid`。`From`是发送退出信号的进程的 pid。另请参阅`process_flag/2`。
> 
> 如果`Reason`是 atom `normal`，`Pid`则不会退出。如果它正在捕获出口，则出口信号将转换为消息`{'EXIT', From, normal}`并传递到其消息队列。
> 
> If`Reason`是 atom `kill`，即 if`exit(Pid, kill)`被调用，将发送一个不可捕获的退出信号，该信号`Pid`将无条件退出并带有 exit reason `killed`。

当用作 a和as a时，我正在玩弄该`exit/2`函数及其行为。`self()``Pid``normal``Reason`

```
Erlang R15B03 (erts-5.9.3) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.3  (abort with ^G)
1> self().
<0.32.0>
2> exit(self(), normal).
** exception exit: normal
3> self().
<0.35.0> 
```

不应该是只向shell进程发送“正常”退出消息，所以没有理由退出吗？

相似地：

```
4> spawn(fun() -> receive Pid -> Pid ! ok end end). 
<0.38.0>
5> exit(v(4), normal).
true
6> v(4) ! self().
<0.35.0>
7> flush().
Shell got ok
ok 
```

但：

```
8> spawn(fun() -> exit(self(), normal), receive _ -> ok end end).         
<0.43.0>
9> is_process_alive(v(8)).
false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:36:12.890

看起来 Erlang shell ( [shell.erl](https://github.com/erlang/otp/blob/maint/lib/stdlib/src/shell.erl) ) 处理`'EXIT'`类型消息的`normal`方式与其他退出消息没有任何不同，这意味着它会发送错误并重新启动 shell。如果您真的想知道这一点，您可以使用[调试器](http://www.erlang.org/doc/apps/debugger/debugger_chapter.html)以这种方式跟踪程序流程：

1.  下载[shell.erl](http://www.erlang.org/doc/apps/debugger/debugger_chapter.html)
2.  将文件名更改为`shell2.erl`
3.  打开文件并将模块名称也更改`shell2`为。您需要这样做，因为编译器会抱怨`shell`位于粘性目录中。
4.  启动`erl`提示。
5.  `c(shell2, [debug_info]).`
6.  `debugger:start().`
7.  `Module -> Interpret`并选择 shell2.erl
8.  `shell2:start().`
9.  追踪！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:47:14.690

我认为原因可以从源代码'stdlib-1.18.2/src/shell.erl'中找到。

```
get_command(Prompt, Eval, Bs, RT, Ds) ->
    Parse = fun() -> exit(io:parse_erl_exprs(Prompt)) end,
    Pid = spawn_link(Parse),
    get_command1(Pid, Eval, Bs, RT, Ds).

get_command1(Pid, Eval, Bs, RT, Ds) ->
    receive
    {'EXIT', Pid, Res} ->
        {Res, Eval};
    {'EXIT', Eval, {Reason,Stacktrace}} ->
            report_exception(error, {Reason,Stacktrace}, RT),
        get_command1(Pid, start_eval(Bs, RT, Ds), Bs, RT, Ds);
    {'EXIT', Eval, Reason} ->
            report_exception(error, {Reason,[]}, RT),
        get_command1(Pid, start_eval(Bs, RT, Ds), Bs, RT, Ds)
    end.

report_exception(Class, Reason, RT) ->
    report_exception(Class, serious, Reason, RT).

report_exception(Class, Severity, {Reason,Stacktrace}, RT) ->
    Tag = severity_tag(Severity),
    I = iolist_size(Tag) + 1,
    PF = fun(Term, I1) -> pp(Term, I1, RT) end,
    SF = fun(M, _F, _A) -> (M =:= erl_eval) or (M =:= ?MODULE) end,
    io:requests([{put_chars, Tag},
                 {put_chars, 
                  lib:format_exception(I, Class, Reason, Stacktrace, SF, PF)},
                 nl]).

start_eval(Bs, RT, Ds) ->
    Self = self(),
    Eval = spawn_link(fun() -> evaluator(Self, Bs, RT, Ds) end), %%<========start a new shell pid
    put(evaluator, Eval),
    Eval.

severity_tag(fatal)   -> <<"*** ">>;
severity_tag(serious) -> <<"** ">>;
severity_tag(benign)  -> <<"* ">>. 
```

对于您的第一种情况（向 self() 发送消息），信号满足第二种情况`get_command1/5`，它将首先给出错误消息，并产生一个新的 shell pid。请注意`start_eval`功能。

对于您的第二种情况（向 spawn 发送消息`pid`），回到您关于该`exit`功能的帖子的第一部分，这是合乎逻辑的。您生成`pid`的不会捕获退出消息，并忽略该`(normal) exit`消息。因此只有在您的 spawn实际退出`shell`时才会收到退出消息。`pid`它将进入 的第一个条件`get_command1/5`。因为`start_evel`没有被调用，所以`shell pid`会保持不变。

对于你的第三种情况，我不知道为什么。我也认为`is_process_alive(v(8))`应该返回true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T15:32:35.877

正如您的第三个示例所示，如果**任何**进程执行`exit(self(), normal)`然后它会崩溃，而`exit(AnotherPid, normal)`不会导致其他进程崩溃。我已经在 R15B 上验证了它。我个人认为这是一个错误，因为向任何进程发送退出信号`normal`不应**导致**其崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T07:35:02.927

对于第三种情况，这里的关键点是 self() 是衍生进程的 pid，而不是 shell 的。

见下面的代码：

```
Eshell V5.9  (abort with ^G) 
```

1> 自我（）。

<0.32.0>

2> spawn(fun() -> io:format("This is ~p~n",[self()]),exit(self(), normal), receive _ -> ok end end)。

这是 <0.35.0> <0.35.0>

3> is_process_alive(v(2))。

错误的

4>

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T18:05:53.217

您引用的文档中没有问题：

```
If Pid is not trapping exits, Pid itself will exit with exit reason Reason. 
```

如果您不陷阱退出，那么您的进程将退出。

```
1> self().
<0.32.0>
2> process_flag(trap_exit, true).
false
3> exit(self(), normal).
true
4> self().
<0.32.0>
5> flush().             
Shell got {'EXIT',<0.32.0>,normal}
ok 
```

如果您不捕获退出，则不会发送有关退出的“消息”。这个过程就死了。与它相关的任何进程也是如此。这是`trap_exit`为了什么。

# mongodb - 仅获取 mongodb 中数组属性的第一项

> ID：13459195
> 
> 赞同：4
> 
> 时间：2012-11-19T17:40:44.367
> 
> 标签：mongodb, mongodb-query, aggregation-framework

鉴于集合中的以下布局...

```
{
  vehicle_id: 1
  ,// bunch of properties I don't want
  ,vehicle: {
    mfg_year: 1928
    ,mfg_make: "Ford"
    ,mfg_model: "Model A"
    ,mfg_trim: "T-Bucket"
    ,// bunch of properties I don't want
    ,images: [
      {url:'...',...}
      ,...
    ]
  }
}
```

我将如何返回仅包含上述字段的结果，并且仅返回图像下的第一个结果？我不介意结果是否在一个扁平对象中，只有图像是嵌套对象。

我查看了聚合框架，它似乎与我正在寻找的不匹配。我知道我可以在结果集上做一个 map/reduce，或者在 listing_id 上做一个组，我只是希望有一个更简单的查询结构，而不需要求助于组或 reduce。

如果目前通过聚合框架无法做到这一点，那么工作组或 map-reduce 将是一个可以接受的答案。

* * *

编辑：在最终结果中我不想要大约 50 多个属性。使用 $slice 指令，我似乎不能只指定我想要的字段。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T17:51:04.890

怎么样：

```
db.vehicles.find({"vehicle_id":1}, {images:{$slice: 1}}) 
```

来源： [http ://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-RetrievingaSubrangeofArrayElements](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields#RetrievingaSubsetofFields-RetrievingaSubrangeofArrayElements)

**例子**

```
db.vehicles.insert({"vehicle_id": 1, "mfg_year": "1928", "mfg_make": "Ford", "mfg_model": "Model A", "images": [{"url":"www.a.com"}, {"url":"www.b.com"}, {"url":"www.c.com"}]})

db.vehicles.insert({"vehicle_id": 2, "mfg_year": "1999", "mfg_make": "BMW", "mfg_model": "Model B", "images": [{"url":"www.a.com"}, {"url":"www.b.com"}, {"url":"www.c.com"}]})

db.vehicles.insert({"vehicle_id": 3, "mfg_year": "1998", "mfg_make": "FMerc", "mfg_model": "Model C", "images": [{"url":"www.a.com"}, {"url":"www.b.com"}, {"url":"www.c.com"}]})

//now the query
db.vehicles.find({"vehicle_id":1}, {images:{$slice: 1}}) 
```

输出：

```
{
        "vehicle_id" : 1,
        "mfg_year" : "1928",
        "mfg_make" : "Ford",
        "mfg_model" : "Model A",
        "images" : [
                {
                        "url" : "www.a.com"
                }
        ]
} 
```

**编辑**

您可以*只*指定要返回的字段，如下所示：

```
db.vehicles.find({"vehicle_id":1}, {"mfg_make":1, images:{$slice: 1}}) 
```

因此，在这种情况下，只返回`mfg_make`and `images`。

其他....

```
db.vehicles.find({"vehicle_id":1}, {"mfg_make":1, "some_other_field":1, images:{$slice: 1}}) 
```

如果这是一个 RDBMS，则此查询等效于：

```
SELECT mfg_make, some_other_field FROM tblVehicles WHERE vehicle_id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-04T15:42:12.993

使用聚合框架，您可以使用运算符[`$project`](https://docs.mongodb.com/manual/reference/operator/aggregation/project/)和[`$first`](https://docs.mongodb.com/manual/reference/operator/aggregation/first-array-element/#exp._S_first)（在 MongoDB 4.4 及更高版本中可用）来获得所需的结果：

```
db.collection.aggregate([
    { '$project': {
        'vehicle_id': 1,
        'vehicle': {
            'mfg_year': '$vehicle.mfg_year',
            'mfg_make': '$vehicle.mfg_make',
            'mfg_model': '$vehicle.mfg_model',
            'mfg_trim': '$vehicle.mfg_trim',
            'images': { '$first': '$vehicle.images' }
        }
    } }   
]) 
```

或与[`$arrayElemAt`](https://docs.mongodb.com/manual/reference/operator/aggregation/arrayElemAt/)

```
db.collection.aggregate([
    { '$project': {
        'vehicle_id': 1,
        'vehicle': {
            'mfg_year': '$vehicle.mfg_year',
            'mfg_make': '$vehicle.mfg_make',
            'mfg_model': '$vehicle.mfg_model',
            'mfg_trim': '$vehicle.mfg_trim',
            'images': { '$arrayElemAt': ['$vehicle.images', 0] }
        }
    } }   
]) 
```

或与[`$slice`](https://docs.mongodb.com/manual/reference/operator/aggregation/slice/)

```
db.collection.aggregate([
    { '$project': {
        'vehicle_id': 1,
        'vehicle': {
            'mfg_year': '$vehicle.mfg_year',
            'mfg_make': '$vehicle.mfg_make',
            'mfg_model': '$vehicle.mfg_model',
            'mfg_trim': '$vehicle.mfg_trim',
            'images': { '$slice': ['$vehicle.images', 1] }
        }
    } }   
]) 
```

# curl - 使用 curl php 的 Yahoo ouath 联系人破碎破碎

> ID：13459196
> 
> 赞同：1
> 
> 时间：2012-11-19T17:40:45.890
> 
> 标签：curl, oauth, contacts, yahoo, yql

好的，所以我现在已经浪费了大约 4 个小时.. 它应该很简单，125 个字符左右，总共 2 到 4 行。最终获取带有 Yahoo 联系人的数组。

我设法使用最新 sdk Yahoo 提供的 simpleauth.php 示例代码成功登录用户。现在，一旦用户登录，我需要运行 YQL：

这是一个yql查询：

```
select * from social.contacts where guid=me; 
```

它应该返回所有联系人，好的，不能让它工作，因为似乎有更多的东西要添加到以下代码中以使 yql 工作：

```
$yql_base_url = "http://query.yahooapis.com/v1/yql";  

$yql_query = "select * from social.contacts where guid=me";  

$yql_query_url = $yql_base_url . "?q=" . urlencode($yql_query); 
$yql_query_url .= "&format=json";

$curlParams = array (
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_FOLLOWLOCATION => 0,
  CURLOPT_FAILONERROR => false,
  CURLOPT_SSL_VERIFYPEER => true,
  CURLOPT_HEADER => true,
  CURLOPT_VERBOSE => false,
);

  $ch = curl_init();
curl_setopt_array($ch, $curlParams);
curl_setopt($ch, CURLOPT_URL, $yql_query_url);

 $content = curl_exec ( $ch );  
 print_r($content); 
```

我当然没有得到联系人，而是得到：

```
 HTTP/1.1 401 Unauthorized
X-YQL-Host: engine2.yql.sp2.yahoo.com
WWW-Authenticate: OAuth oauth_problem="OST_OAUTH_PARAMETER_ABSENT_ERROR", realm="yahooapis.com" 
```

它让我发疯，因为它应该以某种方式开箱即用，供人们毫无问题地使用 - 不是 4 小时的研究、编辑和阅读以确定它不会以简单的方式工作。与我已经设法工作的谷歌和微软联系人相反。

看来我应该以某种方式添加我的

```
$client->setClientId('client_id');
$client->setClientSecret('client_secret');
$client->setRedirectUri('redirect_uri');
$client->setDeveloperKey('developer_key'); 
```

到卷曲但我不知道该怎么做。

# xml - 使用 xml 文件中的折线绘制路径

> ID：13459202
> 
> 赞同：0
> 
> 时间：2012-11-19T17:41:11.730
> 
> 标签：xml, google-maps-api-3, google-polyline

我想使用从 xml 文件中获取的坐标在谷歌地图上绘制路径。我有下一个代码，但它不起作用：

有谁知道该怎么做？

最好的祝福。

```
downloadUrl("myfile.asp", function(data) {
    var xml = xmlParse(data);
    var markers = xml.documentElement.getElementsByTagName("marker");
    var points = [];
    for (var i = 0; i < markers.length; i++) {
    var lat = parseFloat(markers[i].getAttribute("lat"));
    var lng = parseFloat(markers[i].getAttribute("lng"));
    var point = new google.maps.LatLng(lat,lng);

      }//finish loop

    var lineCoordinates = [ new google.maps.LatLng(point)];

     var path = new google.maps.Polyline({
path: lineCoordinates,
strokeColor: "#FF0000",
strokeOpacity: 1.0,
strokeWeight: 2
 });
  path.setMap(map);

    }); //end download url 
```

xml 文件包含以下数据：

```
<markers>
<marker imei="1887" lat="37.184872837428" lng="-3.86559306991389"/>
<marker imei="1887" lat="37.1853220115895" lng="-3.86580098489519"/>
<marker imei="1887" lat="37.1852771929778" lng="-3.86576667518516"/>
<marker imei="1887" lat="37.185537832391" lng="-3.86587104505817"/>
<marker imei="1887" lat="37.1852233612396" lng="-3.86573226263189"/>
<marker imei="1887" lat="37.1851605163743" lng="-3.86569774724824"/>
<marker imei="1887" lat="37.185510710715" lng="-3.86588200146997"/>
<marker imei="1887" lat="37.1855652010503" lng="-3.86582629326349"/>
<marker imei="1887" lat="37.1855560232803" lng="-3.86584872061447"/>
</markers> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:54:11.117

您似乎缺少路径数组

```
downloadUrl("myfile.asp", function(data) {
    var xml = xmlParse(data);
    var markers = xml.documentElement.getElementsByTagName("marker");
    var path = [];
    for (var i = 0; i < markers.length; i++) {
      var lat = parseFloat(markers[i].getAttribute("lat"));
      var lng = parseFloat(markers[i].getAttribute("lng"));
      var point = new google.maps.LatLng(lat,lng);
      path.push(point);
    }//finish loop

    var polyline = new google.maps.Polyline({
      path: path,
      strokeColor: "#FF0000",
      strokeOpacity: 1.0,
      strokeWeight: 2
    });
    polyline.setMap(map);

}); //end download url 
```

[在 v3 中将 XML 解析为折线的工作示例](http://www.geocodezip.com/v3_GenericMapBrowser.asp?filename=I5Polyline.xml)

# webobjects - 在 WebObjects 应用程序中，是否可以在不重新启动应用程序的情况下更改数据库连接设置？

> ID：13459208
> 
> 赞同：0
> 
> 时间：2012-11-19T17:41:28.960
> 
> 标签：webobjects

我有一个使用 Project Wonder 框架的 WebObjects 应用程序。如果我没记错的话，似乎回到过去，在我们开始使用 Project Wonder 之前，我们可以在不重新启动应用程序的情况下更改我们的数据库连接设置。几年前迁移到 Wonder 项目后，我们失去了动态更改数据库设置的能力。看来 Project Wonder 预计连接设置在启动时已经作为 WebObjects 属性存在，因此在应用程序启动后更改属性没有任何影响。那时我们并没有过多地反对它，并且认为当数据库更改时简单地重新启动应用程序并没有什么大不了的，因为我们没有预料到这样的更改会经常出现。

多年来情况发生了变化，并且在更改数据库后要求重新启动不再像以前那样合理。我试着四处寻找，在 Project Wonder / WebObjects 中缓存设置的内容，但还没有找到答案。我想知道是否有人在 WebObjects / Project Wonder 应用程序中动态更改数据库设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T19:48:55.103

我不认为这是“过去”或“现在使用 Project Wonder”的问题。我认为当 WO 移植到 Java 时，这种行为发生了变化。

从理论上讲，一个人应该能够做到这一点。在实践中，我认为它的效果不够好，值得。WO 和 EOF 中的所有数据结构都是延迟实例化的。如果你想切换数据库，你需要销毁所有，我的意思是所有，引用旧数据库的对象。是否有可能找到大部分并清除它们？是的，这甚至不是太难。是否有可能找到所有这些？也许不吧。

一方面，Java 的动态性远低于 ObjC。很多东西都是在java中的静态块中实例化的。所有这些类都可以注册在 EOModel 更改时发生的通知。他们都注册了吗？可能不是。

因此，您可以摆脱一些应用程序的状态，您将能够使用新数据库做一些事情，事情可能会工作一段时间，然后它们可能会停止工作。你也许能找出原因。或者你可以重新启动该死的应用程序......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T11:00:10.407

或者你可以在这里按照这些 lil 说明进行操作；）

要在运行时更改连接，您必须基本上设置对象存储协调器

您可以像这样创建自定义对象存储协调器：

```
NSMutableDictionary<String, String> temp = new NSMutableDictionary<String, String>();
temp.put("URL", String.format("%s?useBundledJdbcInfo=true", url));
temp.put("username", username);
temp.put("password", password);
temp.put("name", name);

connectionDictionary=temp.immutableClone();

// Create a new Object store coordinator
objectStoreCoordinator = new ERXObjectStoreCoordinator();
ERXModelGroup.setModelGroupForObjectStoreCoordinator(
    objectStoreCoordinator, ERXModelGroup.defaultGroup()
);

// Set the model that you want to use to connect to multiple databases
EOAdaptor adaptor =ERXDatabaseContext.registeredDatabaseContextForModel(
    ERXModelGroup.defaultGroup().modelNamed("YourModelName"), 
    objectStoreCoordinator
).adaptorContext().adaptor();

// update the connection dictionary
adaptor.setConnectionDictionary(
    updateDictionary(adaptor.connectionDictionary(), 
    connectionDictionary)
); 
```

有了这个，您可以轻松创建指向您选择的数据库的新编辑上下文

```
ERXEC.newEditingContext(objectStoreCoordinator); 
```

如果您的应用程序被多个用户使用，并且他们都需要在多个 DB 之间切换而不相互干扰，我建议您不要使用 Shared Editing Context。

像这样，您可以避免人们更改对象存储协调器以导致其他人也指向该数据库（不是那么有趣）。

# javascript - 自动选择子复选框

> ID：13459209
> 
> 赞同：0
> 
> 时间：2012-11-19T17:41:29.747
> 
> 标签：javascript, jquery, asp.net

我必须处理我在 sql 库中的用户角色。每个角色都有一个复选框，想法是如果选中“父”，则选中“子”复选框，如果选中所有“子”，则选中“父”。

我在一个页面中尝试了这个脚本并且它有效，但我无法在我的 asp.net 中使它工作

这是我的脚本和代码。

```
$(document).ready(function () {
    $('.parent').click(function () {
        if ($(this).is(':checked'))
            $(this).parent().find('.children input[type="checkbox"]').attr('checked', 'checked');
    });

    $('.children input[type="checkbox"]').click(function () {
        var numberOfCheckboxes = $(this).parents('.children').find('input[type="checkbox"]').length;

        if ($(this).parents('.children').find('input[type="checkbox"]').filter('input[checked=checked]').length == numberOfCheckboxes)
            $(this).parents('div').find('.parent').attr('checked', 'checked');
    });
}); 
```

```
<div>
    <asp:DataList ID="outerDataList" runat="server" DataSourceID="ObjectDataSource2" >
        <ItemTemplate>
            <li>
                <asp:Label ID="idLabel" runat="server" Text='<%# Eval("id") %>'
                    Visible="False" />
                <asp:Label ID="typeLabel" runat="server" Text='<%# Eval("type") %>'
                    Visible="False" />
                <asp:CheckBox ID="chkEnabled" class="parent" runat="server"
                    Checked='<%# Eval("Enabled") %>' Text='<%# Eval("name") %>' />
            </li>
            <ul class="children">
                <asp:DataList ID="innerDataList" runat="server" DataSource='<%# Eval("Roles") %>'>
                    <ItemTemplate>                                
                        <li>
                            <asp:Label ID="idLabelInt" runat="server"
                                Text='<%# Eval("id") %>' Visible="False" />
                            <asp:Label ID="typeLabelInt" runat="server"
                                Text='<%# Eval("type") %>' Visible="False" />
                            <asp:CheckBox ID="chkEnabledInt" runat="server"
                                Checked='<%# Eval("Enabled") %>' Text='<%# Eval("name") %>' />
                        </li>
                    </ItemTemplate>
                </asp:DataList> 
            </ul>                   
        </ItemTemplate>
    </asp:DataList>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:20:26.423

移动列表项结束标记以封装子列表。

```
<div>
    <asp:DataList ID="outerDataList" runat="server" DataSourceID="ObjectDataSource2" >
        <ItemTemplate>
            <li>
                <asp:Label ID="idLabel" runat="server" Text='<%# Eval("id") %>'
                    Visible="False" />
                <asp:Label ID="typeLabel" runat="server" Text='<%# Eval("type") %>'
                    Visible="False" />
                <asp:CheckBox ID="chkEnabled" class="parent" runat="server"
                    Checked='<%# Eval("Enabled") %>' Text='<%# Eval("name") %>' />
                <ul class="children">
                    <asp:DataList ID="innerDataList" runat="server" DataSource='<%# Eval("Roles") %>'>
                        <ItemTemplate>
                            <li>
                                <asp:Label ID="idLabelInt" runat="server"
                                    Text='<%# Eval("id") %>' Visible="False" />
                                <asp:Label ID="typeLabelInt" runat="server"
                                    Text='<%# Eval("type") %>' Visible="False" />
                                <asp:CheckBox ID="chkEnabledInt" runat="server"
                                    Checked='<%# Eval("Enabled") %>' Text='<%# Eval("name") %>' />
                            </li>
                        </ItemTemplate>
                    </asp:DataList>
                </ul>
            </li>
        </ItemTemplate>
    </asp:DataList>
</div> 
```

在这里，您正在寻找具有以下类别的复选框父级的后代`children`：

```
$(this).parent().find('.children input[type="checkbox"]') 
```

正如您目前所拥有的那样，`<ul>`作为 的兄弟`<li>`而不是孩子，此选择器不起作用。

除了破坏您的选择器之外，它也是无效的 HTML。A`<li>`必须是 、 或 元素的`<ul>`子`<ol>`元素`<menu>`。这些元素的唯一允许的子元素是`<li>`元素。（例外情况是`<menu>`，它可以包含流内容*而不是*元素`<li>`。）要生成有效的 HTML，您必须将父`<div>`元素替换为`<ul>`、`<ol>`或`<menu>`。

另外，我认为您希望`.closest()`选择单个元素-匹配选择器的第一个祖先，而不是`.parents()`选择匹配选择器的*每个*祖先。

# jquery - 安全内容和手风琴脚本

> ID：13459216
> 
> 赞同：1
> 
> 时间：2012-11-19T17:41:53.053
> 
> 标签：jquery, asp.net, jquery-ui-accordion

好的，我正在进行 aspstorefront 重新设计，我在侧边栏手风琴和 https 遇到了一些问题：https://www.davidscottco.com/default.aspx?skinid [= 3](https://www.davidscottco.com/default.aspx?skinid=3)

在 IE9 中，我收到“仅显示安全内容”消息，并且手风琴不呈现。在 Chrome 中，我没有收到任何消息，但手风琴没有呈现。

这是我的代码：

```
<%@ Control Language="c#" AutoEventWireup="false"       Inherits="AspDotNetStorefront.TemplateBase" TargetSchema="http://schemas.microsoft.com/intellisense/ie5" %>
<%@ Register TagPrefix="ComponentArt" Namespace="ComponentArt.Web.UI" Assembly="ComponentArt.Web.UI" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml2/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>(!METATITLE!)</title>
(!CURRENCY_LOCALE_ROBOTS_TAG!)
<meta name="description" content="(!METADESCRIPTION!)">
<meta name="keywords" content="(!METAKEYWORDS!)">
<link href='https://fonts.googleapis.com/css?family=Cantora+One' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="skins/Skin_(!SKINID!)/style.css" type="text/css">
<script type="text/javascript" src="jscripts/formValidate.js"></script>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script>
$(function() {
    var icons = {
        header: "ui-icon-circle-arrow-e",
        activeHeader: "ui-icon-circle-arrow-s"
    };
    $( "#accordion" ).accordion({
        icons: icons
    });
    $( "#toggle" ).button().click(function() {
        if ( $( "#accordion" ).accordion( "option", "icons" ) ) {
            $( "#accordion" ).accordion( "option", "icons", null );
        } else {
            $( "#accordion" ).accordion( "option", "icons", icons );
        }
    });
});
</script>

<script runat="server">

protected void PageMenu_Load(object sender, EventArgs e) {

//the page being viewed
string mItem = Page.Request.FilePath.Substring(Page.Request.FilePath.LastIndexOf("/") + 1).ToLower();
string mItem2 = Page.Request.RawUrl.ToString().Substring(Page.Request.RawUrl.LastIndexOf("/") + 1).ToLower();

//If home page, Home selected
if (mItem == "default.aspx") {
    PageMenu.Items[0].LookId = "SelectedTopItemLook";

//If a category, Category selected
//} else if ((mItem == "showcategory.aspx") || (mItem == "showproduct.aspx")) {
//  PageMenu.Items[1].LookId = "SelectedTopItemLook";

//If a department, Department selected
} else if ((mItem == "showsection.aspx") || (mItem == "showproduct.aspx")) {
    PageMenu.Items[1].LookId = "SelectedTopItemLook";

//if one of the customer services, Customer Service selected
} else if (mItem2 == "t-about.aspx") {
    PageMenu.Items[2].LookId = "SelectedTopItemLook";
}

// product: (mItem == "showproduct.aspx")
}

</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
 </script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-3294475-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>

(!BUYSAFEJSURL!)
</head>
<body>
<div class="body_bg2"> (!XmlPackage Name="skin.adminalert.xml.config"!)
(!PAGEINFO!)
<div id="hbg">
<div id="hwrap">
<div id="login"> <span id="loginText"><a href="(!SIGNINOUT_LINK!)" class="btn_util">(!SIGNINOUT_TEXT!)</a></span> <span id="userName">(!USERNAME!)</span> <!-- Utility Links -->

            </div>
            <div class="utility">
                <a href="wishlist.aspx"><span class="btn_util_left">Your Wishlist</span></a><span class="pipe">|</span>
                <a href="shoppingcart.aspx"><span class="btn_util_left">Shopping Cart ((!NUM_CART_ITEMS!))</span></a><span class="pipe">|</span>
                <a href="t-contact.aspx"><span class="btn_util_left">Contact Us</span></a><span class="pipe">|</span>
                <a href="account.aspx"><span class="btn_util_left">Your Account</span></a><span class="pipe">|</span>
                <a href="account.aspx">Track Your Order</a><span class="pipe">|</span>
                <a href="t-returns.aspx">Returns</a><span class="pipe">|</span>
                <a href="t-shipping.aspx">Shipping Policy</a>
            </div>
            <!-- END Utility Links -->

        <div id="header">

            <a id="logo" href="default.aspx" title="YourCompany.com"><b>(!SITENAME!)</b></a>
            <div class="logo-tagline">Distributor of Medical Supplies<br>
                Manufacturer of Soft Format Pressure Management Products</div>
        </div>

        <div id="contact">
        <div id="soc"><a href="#"><img src="skins/Skin_(!SKINID!)/images/fb.png"></a><a href="#"><img src="skins/Skin_(!SKINID!)/images/tw.png"></a><a href="#"><img src="skins/Skin_(!SKINID!)/images/pin.png"></a><a href="#"><img src="skins/Skin_(!SKINID!)/images/yt.png"></a></div>
        <span class="number"><a href="tel:800-804-0333">1.800.804.0333</a></span>

        </div>
</div>
</div>
<div id="wrapper">

<div id="horizNav">
            <!-- TOP MENU -->
            <ComponentArt:Menu id="PageMenu" OnLoad="PageMenu_Load"
                ClientScriptLocation="skins/componentart_webui_client/"
              ImagesBaseUrl="skins/skin_1/images/"
              ScrollingEnabled="true"
              ScrollUpLookId="ScrollUpItemLook"
              ScrollDownLookId="ScrollDownItemLook"
              Orientation="horizontal"
              CssClass="TopMenuGroup"
              DefaultGroupCssClass="MenuGroup"
              DefaultItemLookID="DefaultItemLook"

                    DefaultSelectedItemLookId="SelectedTopItemLook"
                    DefaultChildSelectedItemLookId="SelectedTopItemLook"

              DefaultGroupItemSpacing="1"
              ExpandDelay="0"
              ExpandDuration="0"
              ExpandSlide="None"
              ExpandTransition="None"
              CascadeCollapse="false"
              CollapseDelay="0"
              CollapseSlide="None"
              CollapseTransition="None"
              EnableViewState="false"
              runat="server">
                <ItemLooks>
                      <ComponentArt:ItemLook LookId="DefaultItemLook" HoverCssClass="MenuItemHover" LabelPaddingTop="2px" ActiveCssClass="MenuItemDown" LabelPaddingRight="15px" LabelPaddingBottom="2px" ExpandedCssClass="MenuItemDown" LabelPaddingLeft="5px" CssClass="MenuItem" />

                      <ComponentArt:ItemLook LookId="TopItemLook" CssClass="TopMenuItem" HoverCssClass="TopMenuItemHover" LabelPaddingLeft="4" LabelPaddingRight="4" LabelPaddingTop="2" LabelPaddingBottom="2" />

                      <ComponentArt:ItemLook LookId="SelectedTopItemLook" CssClass="SelectedTopMenuItem" HoverCssClass="" LabelPaddingLeft="4" LabelPaddingRight="4" LabelPaddingTop="2" LabelPaddingBottom="2" />

                      <ComponentArt:ItemLook LookID="ScrollUpItemLook" ImageUrl="scroll_up.gif" ImageWidth="15" ImageHeight="13" CssClass="ScrollItem" HoverCssClass="ScrollItemH" ActiveCssClass="ScrollItemA" />
                      <ComponentArt:ItemLook LookID="ScrollDownItemLook" ImageUrl="scroll_down.gif" ImageWidth="15" ImageHeight="13" CssClass="ScrollItem" HoverCssClass="ScrollItemH" ActiveCssClass="ScrollItemA" />
                      <ComponentArt:ItemLook LookID="BreakItem" ImageUrl="break.gif" ImageHeight="1" ImageWidth="100%" />

                        </ItemLooks>
        </ComponentArt:Menu>
            <!-- END TOP MENU -->
            <div id="search">   
            <form name="topsearchform" method="get" action="search.aspx">
                <fieldset>
                <label>Search:</label>
                <input type="text" size="15" name="SearchTerm" class="searchBox" id="searchBox" autocomplete="off" onFocus="javascript:this.style.background='#ffffff';" onBlur="javascript:this.style.background='#dddddd';" />
                <input type="button" onClick="document.topsearchform.submit()" title="Click Go to Submit" id="Go" class="submit" value="Go" />
                <br />
                </fieldset>
            </form> 
            </div>  
        </div>

    <div class="wrapper_pad">

        <div id="bodyWrapper">
            <!-- <div id="miniCart">You have (!NUM_CART_ITEMS!) item(s) in your <a class="username" href="shoppingcart.aspx">
                (!CARTPROMPT!)</a></div> -->
            <div id="breadcrumb">Now In: (!SECTION_TITLE!)</div>
            <div id="leftWrap">

                <%--<div class="navHeader">Browse (!StringResource Name="AppConfig.ManufacturerPromptPlural"!)</div>

                                <div class="leftNav" id="manufacturers">(!XmlPackage Name="rev.manufacturers"!)</div>--%>
                <div id="accordion">

                            <h3>Industries</h3><%--Browse (!StringResource Name="AppConfig.SectionPromptPlural"!)--%>
                            <div class="submenu">
                            (!XmlPackage Name="rev.industries"!)
                            </div>                              
                            <h3>(!StringResource Name="AppConfig.CategoryPromptPlural"!)</h3>
                            <div class="submenu">
                            <div class="scroll-pane" id="categories">(!XmlPackage Name="rev.categoriesshow2ndlevel"!)</div> 
                            </div>      
                            <h3>Best Sellers</h3>
                            <div class="submenu">
                            (!XmlPackage Name="sidebar.bestsellers.xml.config"!)    
                            </div>
                </div>

                <div id="addess">
                <div class="street"><B>David Scott Company</B><br >59 Fountain Street<br />Framingham , MA 01702</div>
                <div class="phone">800.804.0333<br />508.875.3333</div>
                <div class="email"><a href="mailto:customerservice@davidscottco.com">Customerservice@davidscottco.com</a></div>
                </div>

                <div class="logo2" title="Blue Diamond">
                <div class="logo2-tagline">Blue Diamond&reg; Positioners &amp; Accessories</div>
                </div>

            </div>
            <div id="content">
                <!-- CONTENTS START -->
                <div class="mani-cats" id="hp-cats">(!XmlPackage Name="rev.industries2"!)</div>
                <asp:PlaceHolder ID="PageContent" runat="server"></asp:PlaceHolder>

                <!-- CONTENTS END -->
            </div>
        </div>
        <div id="footer">
            <div id="footerWrap">
                <ul class="tame" style="margin-bottom:5px;">
                    <li><strong>All Content &copy; 
                            <SCRIPT> //automatically update year.
                                    var year = new Date();
                                    year = year.getYear();
                                    if (year < 1900) year += 1900;
                                    document.write(year);
                            </SCRIPT>  David Scott Company. All Rights Reserved.
                        </strong>
                    </li>
                </ul>
                <ul class="tameHoriz">
                    <li><a href="/">Home</a> <span class="pipe">|</span></li>
                    <li><a href="t-about.aspx">About Us</a> <span class="pipe">|</span></li>

                    <li><a href="account.aspx">Track Your Order</a> <span class="pipe">|</span></li>
                    <li><a href="t-returns.aspx">Returns</a> <span class="pipe">|</span></li>
                    <li><a href="t-privacy.aspx">Privacy Policy</a> <span class="pipe">|</span></li>
                    <li><a href="t-faq.aspx">FAQ</a> <span class="pipe">|</span></li>
                    <li><a href="t-contact.aspx">Contact Us</a> <span class="pipe">|</span></li>
                    <li><a href="sitemap2.aspx">Site Map</a></li>
                </ul>
                <%--<ul class="tameHoriz" style="margin-top:5px;">
                    <li><a href="t-affiliate.aspx">Affiliates</a> <span class="pipe">|</span></li>
                    <li><a href="giftregistry.aspx">Gift Registry</a> <span class="pipe">|</span></li>
                    <li><a href="wishlist.aspx">Wishlist</a> <span class="pipe">|</span></li>
                    <li><a href="t-privacy.aspx">Privacy Policy</a> <span class="pipe">|</span></li>
                    <li><a href="t-security.aspx">Security</a></li>
                </ul>--%>
            </div>
        </div>
    </div>
</div>
<!-- wrapper -->
<table border="0" width="100%">
    <tr>
        <td align="center" width="100%">(!BUYSAFESEAL!)</td>
    </tr>
</table>
<noscript>
Powered by <a href="http://www.aspdotnetstorefront.com" target="_blank">shopping cart</a>
</noscript>
</div>

</body>
</html> 
```

这是我要设置的示例：http: [//jqueryui.com/accordion/#custom-icons](http://jqueryui.com/accordion/#custom-icons)

对此的任何帮助将不胜感激！

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T01:38:39.727

您的 jquery 和 jquery UI 脚本链接引用 http 位置，您需要自己托管它们或找到支持 https 的托管版本并通过 https 链接到它们

这就是显示不安全内容消息的原因

# git - 如果在同一个 repo 上并行运行更多 git 命令是否安全？

> ID：13459219
> 
> 赞同：24
> 
> 时间：2012-11-19T17:42:05.003
> 
> 标签：git, version-control, locking, race-condition

我很感兴趣是否可以安全地并行运行（例如在 cron 作业、jenkins 作业等中）`git push`。`git commit`git 中是否内置了一些锁定机制，以便这些操作被序列化，或者这会破坏存储库？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-19T17:46:14.227

是的。Git 通过以允​​许这样做的方式编写引用来工作。如果您在推送的同时进行提交，则推送只会从引用向下传递到它们包含的对象。如果提交完成并按时更新分支引用，它将被推送。如果没有，旧的引用将被推送。你不会被推高“半个提交”。

所有文件都以隐式保留任何指针的引用完整性的方式编写。最后写入的文件将是已经包含所有依赖项的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-06T21:57:15.983

从理论上讲，可能存在文件不可用的`git commit`零件竞争条件的罕见情况。 在 Git 2.15.x/2.16（2018 年第一季度）之前，这是沉默的。不会再沉默了。`HEAD`

请参阅[Andrey Okoshkin (``)的](https://github.com/)[提交 c26de08](https://github.com/git/git/commit/c26de08370ad5d927d93dbe6fb46103caabb889c)（2017 年 10 月 20 日） 。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 4a1638c](https://github.com/git/git/commit/4a1638cbd5ab1037cbf5cde652de0b041e952d55))^(中，2017 年 11 月 6 日）)
^([`gitster`](https://github.com/gitster))

> ## `commit`: resolve_ref_unsafe 的检查结果
> 
> 在打印提交摘要时添加对已解析的 HEAD 引用的检查。如果 . 的基础调用或失败，则
> `resolve_ref_unsafe()`可能返回`NULL`指针。 这种情况可能是由种族引起的：文件此时变得无法访问。`lstat()``open()``files_read_raw_ref()`

消息变为：

```
if (!head)
    die_errno(_("unable to resolve HEAD after creating commit")); 
```

* * *

使用 Git 2.36（2022 年第二季度），消息内容发生了变化：

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 ce14de0](https://github.com/git/git/commit/ce14de03db6e1a29ad92c747542f1eb4357f25d6)和[提交 09444e7](https://github.com/git/git/commit/09444e74e3acf4e726db60a5595eb7d3ebca8450)（2022 年 1 月 26 日[）](https://github.com/avar)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([03bdcfc 提交中](https://github.com/git/git/commit/03bdcfcc78f476d58449c9635e95916b7b71f3dd))^(，2022 年 2 月 11 日）)[`avar`](https://github.com/avar)
^([`gitster`](https://github.com/gitster))

> ## [`sequencer`](https://github.com/git/git/commit/09444e74e3acf4e726db60a5595eb7d3ebca8450): 不要`die_errno()`在`refs_resolve_ref_unsafe()`失败时使用
> 
> ^(签字人：Ævar Arnfjörð Bjarmason)

> 更改忠实迁移到[ed90f04](https://github.com/git/git/commit/ed90f04155df1ec757b241ae3f45889c05efae26)`"resolve_errno"`中的新API 的代码（“refs API: make not set errno”，2021-10-16，Git v2.35.0-rc0 --[批次 #1](https://github.com/git/git/commit/abe6bb3905392d5eb6b01fa6e54d7e784e0522aa)中列出的[合并](https://github.com/git/git/commit/96f6623ada056c24a60e10ad58acc42871dd9f41)）停止关心at全部。`resolve_ref_unsafe()``errno`
> 
> 当我们在序列器运行后无法解析“ ”时，说明“ ”值是`HEAD`什么并没有真正的帮助，因为假后端可能反映也可能不反映有关“ ”状态的任何真实情况。 随着即将到来的 reftable 后端，这种伪造将变得更加明显。`errno``errno``.git/HEAD`
> 
> 所以让我们`die()`不要在`die_errno()`这里。
> 这也将有助于简化`refs_resolve_ref_unsafe()`API。
> 这是唯一没有忽略“ `failure_errno`”输出参数的用户。

# jquery - 使用 jQuery 在输入更改时实时更新 CSS

> ID：13459220
> 
> 赞同：0
> 
> 时间：2012-11-19T17:42:07.947
> 
> 标签：jquery

我正在尝试根据输入值创建（或更新？）CSS。简而言之，我有一个从文本输入字段运行的颜色选择器。当输入值发生变化时（也就是颜色十六进制值），我需要`background`用这个值更新我页面上另一个元素上的 css。

我在做什么是行不通的。我究竟做错了什么？或者根据实时输入值更新/替换 CSS 的最佳方法是什么？

脚本：

```
 // Bar Background Color - Live Preview
    $('.bg_color').live("change", function() {

        var bg_color = $(this).val(); // grab color input value

        if ($(this).val().length > 0)
        {
            // replace css value on live preview 
            $('.campaignBar').css('background', bg_color);  
        } 
        else
        {
            //resorts back to default if no value entered
            $('.campaignBar').css('background', '#4575A1' });   
        }         

    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:55:39.853

这对我[有用](http://jsfiddle.net/eqE2R/)

```
$(document).ready(function() {
  $('.bg_color').miniColors({
    change: function(hex, rgba) {    
      if (hex.length > 0)
      {
       // replace css value on live preview 
       $('.campaignBar').css('backgroundColor', hex);  
      } 
      else
      {
        //resorts back to default if no value entered
        $('.campaignBar').css('backgroundColor', '#4575A1');   
      }         
     }
   }); 
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:59:32.063

**[JSFiddle](http://jsfiddle.net/W54Yu/1/)**

```
$('.bg_color').on("change", function() {
    var bg_color = $(this).val(); 
    if (bg_color.length > 2)
    {
        $('.campaignBar').css("background-color",'#'+bg_color);
    } 
    else
    {
        $('.campaignBar').css('background-color','#4575A1');   
    }         
});​ 
```

我已将其设置为大于 2，因为对于十六进制值，您需要有 3 个或更多数字才能将其识别为数字。

# webcam - 带远程处理的 C# 网络摄像头

> ID：13459221
> 
> 赞同：3
> 
> 时间：2012-11-19T17:42:16.147
> 
> 标签：webcam, remoting, marshalbyrefobject

我的项目是关于远程处理的，我想向它添加一个网络摄像头组件。在这里：我的解决方案中有 3 个项目...客户端、服务器、Remote.dll。在 Remote.dll 中是一个通用类，它具有在服务器机器上工作的方法。当我从客户端调用这些方法时，它在服务器端执行。所以现在我的问题是我将网络摄像头的代码放在 remote.dll 中，它有一个名为“video_NewFrame”的事件，每次网络摄像头捕捉到图像时它都会起作用。但是我无法从客户端访问图像，因为当代码下降到此事件时，它会无限执行，并且客户端中的计时器也无法正常工作。我试图将图像分配给我的全局变量，但是每当代码进入客户端并再次进入 Remote.dll 时，我的变量为空...如何从客户端同时获取捕获的图像？这是我的代码：

```
 private bool DeviceExist = true;
    private FilterInfoCollection videoDevices;
    private VideoCaptureDevice videoSource = null;

    public bool WebCamStart(int DeviceIndex)
    {
        if (DeviceExist)
        {
            videoDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);
            //string myDevice = videoDevices[0].Name;
            videoSource = new VideoCaptureDevice(videoDevices[0].MonikerString);
            videoSource.NewFrame += new NewFrameEventHandler(video_NewFrame);

            CloseVideoSource();
            videoSource.DesiredFrameSize = new Size(640, 480);
            //videoSource.DesiredFrameRate = 10;
            videoSource.Start();
            return true;
        }
        else return false;
    }

    public Bitmap lastImg;

    private void video_NewFrame(object sender, NewFrameEventArgs eventArgs)
    {
        Bitmap img = (Bitmap)eventArgs.Frame.Clone();
        //in executes infinitely when execution comes here and i cant reach from Cliend side...
    }

    public string getFPS()
    {
        return videoSource.FramesReceived.ToString();
    }

    public void CloseVideoSource()
    {
        if (!(videoSource == null))
            if (videoSource.IsRunning)
            {
                videoSource.SignalToStop();
                videoSource.Stop();
                videoSource = null;
            }
    }

    public string getCamList()
    {
        string result = "No Device Found";
        try
        {
            videoDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice);
            //comboBox1.Items.Clear();
            if (videoDevices.Count == 0)
                throw new ApplicationException();

            DeviceExist = true;
            foreach (FilterInfo device in videoDevices)
            {
                //comboBox1.Items.Add(device.Name);
                result = device.Name;
                return result;
            }
            //comboBox1.SelectedIndex = 0; //make dafault to first cam
        }
        catch (ApplicationException)
        {
            DeviceExist = false;
            //comboBox1.Items.Add("No capture device on your system");
            return "No capture device on your system";
        }
        return result;
    } 
```

//和我的客户端...

```
 private void timerWebCam_Tick(object sender, EventArgs e)
    {
        //lblFPS.Text ="Device Running... " + remObj.getFPS() + " FPS";
        pictureBox1.Image = remObj.lastImg;
    } 
```

# jquery - "=" 登录 JSON 文本会导致解析错误

> ID：13459227
> 
> 赞同：4
> 
> 时间：2012-11-19T17:42:42.677
> 
> 标签：jquery, json, parsing, equals, sign

```
 "Cost to Implement \nRate 5 to 1\nHigh = 5\nLow = 1" 
```

作为 JSON 的一部分，在 jsonlint 中解析得很好，但在 Chrome 中使用这些方法中的任何一种都失败了（每种方法都单独尝试）：

```
sections = $.parseJSON(myJSONstr);

sections = JSON.parse(myJSONstr);

sections = eval('(' + myJSONstr + ')'); 
```

当我从 JSON 中的字符串中删除“=”符号时，一切都很好。我的用户需要能够在他们输入的文本中输入 = 符号。有没有解决的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T17:47:43.563

看起来您正在输入换行符而不转义它。您需要转义反斜杠。

以下失败，因为您在 JSON 中输入了原始换行符，它们必须被转义

```
var obj = JSON.parse('{"prop": "Cost to Implement \nRate 5 to 1\nHigh = 5\nLow = 1"}'); 
```

转义反斜杠

```
// Works fine
var obj = JSON.parse('{"prop": "Cost to Implement \\nRate 5 to 1\\nHigh = 5\\nLow = 1"}'); 
```

请注意，如果您正确序列化 JSON 对象，这些新行（以及必须转义的其他字符，如制表符、退格...）将自动转义。例如

```
// Correctly parses the new line
JSON.parse(JSON.stringify({prop: "Line1\nLine2\tAfterTab"})) 
```

# c# - 使用 dropbox api 将文件从一个 Dropbox 帐户复制到 C# 中的另一个 Dropbox 帐户

> ID：13459229
> 
> 赞同：1
> 
> 时间：2012-11-19T17:42:52.353
> 
> 标签：c#, .net, dropbox-api, spring-social

我有两个用户说**Bob**和**Alice**已经授权我的应用程序**MyApp**。我可以将文件从 Bob 下载到我的服务器并将文件上传到 Alice。有没有办法直接将文件从 Bob 发送给 Alice，而不需要在服务器上下载和上传文件，也不需要文件夹共享？结果是同一个文件应该出现在两个用户的文件夹中，并且它们应该作为两个不同的实体存在。我正在将 SpringSocial .net 包用于保管箱服务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T06:18:25.750

此功能由 Dropbox API 的“复制参考”功能提供：

[https://www.dropbox.com/developers/blog/16](https://www.dropbox.com/developers/blog/16)

文档：

[https://www.dropbox.com/developers/reference/api#copy_ref](https://www.dropbox.com/developers/reference/api#copy_ref) https://www.dropbox.com/developers/reference/api#fileops-copy

# game-physics - 光线折射以及如何跟踪环境类型？

> ID：13459230
> 
> 赞同：0
> 
> 时间：2012-11-19T17:42:59.927
> 
> 标签：game-physics, raytracing

光线折射以及如何跟踪环境类型？

我的 Ray 对象应该知道它所处的环境吗？例如，它是空气、玻璃还是其他？通过了解环境，我的意思是了解折射率。这样，当它击中一个表面时，我可以获得击中表面的折射率，并且我可以计算折射光线。

任何建议如何管理这整个事情，光线在不同的环境中移动？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:37:21.363

问题实际上是关于代码设计，为您的需求找到最简单的答案。你可能会发现这个答案很有用，

[当光线从嵌套对象内部开始时如何处理折射](https://stackoverflow.com/questions/3858662/how-to-deal-with-refraction-when-the-rays-start-inside-of-a-nested-object/4584391#4584391)

它解决了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:48:04.817

表面应该保存折射率，所以当你检测到光线和表面之间的碰撞时，你会从表面对象中获取折射率，并根据计算结果进行计算以使光线偏离。如果索引对于环境中的一组对象是全局的，则表面对象可以具有对包含折射率的环境的静态引用，如下所示：

```
class Surface {
private:  
    Enviroment* pEnviroment;
    ...
}; 

Ray Ray::refract(const Surface& surface) { 
   double index = surface.getEnviroment()->getRefractionIndex();
   ...
   // Do refraction calculation
} 
```

# sql - 仅当它为空时更新列，否则不更新

> ID：13459239
> 
> 赞同：0
> 
> 时间：2012-11-19T17:43:20.430
> 
> 标签：sql, oracle

有没有办法只在列更新时才更新它，而当它不在一个多列更新查询中时保持`null`原样？`null`如下所示。（就像我们在 select 语句中如何使用 case 一样）

```
UPDATE users  SET users.city = 'Dallas',
      CASE
          WHEN users.Global_id IS NULL
          THEN
              users.Global_id = '123'
      END WHERE userid = '12312312' 
```

上面的更新语句抛出*ORA-00927: missing equal sign*错误。

我找这个的原因是什么？我有一个运行类似上面查询的计划作业。`users`如果您尝试更新 'not null' ，表中还存在一个触发器，该触发器将引发错误`global_id`。所以当我遇到这个触发器时，我的工作失败了。

我有一个选择...将此更新查询拆分为两个.. 一个用于更新 city ，一个用于更新`global_id`where `global_id is null`。

但想知道这是否可以通过任何其他方式实现......任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:11:55.873

有几个选项，但最接近您的代码的是这个（重新格式化并删除了多余的内容）：

```
UPDATE users SET
    city = 'Dallas',
    Global_id = 
        CASE 
            WHEN Global_id IS NULL THEN '123' 
            ELSE Global_id
        END
WHERE userid = '12312312'; 
```

但是，这相当于更简洁地使用`coalesce()`函数：

```
...
    Global_id = COALESCE(Global_id, '123')
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:02:24.283

您可以使用[合并](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions023.htm)功能：

```
UPDATE users  
SET 
   users.city = 'Dallas',
   users.Global_id = coalesce( users.Global_id, '123') 
```

此外，您可以将更新拆分为两句话，请记住，您可以将其包含在单个事务中：

```
UPDATE users  
SET 
   users.city = 'Dallas';

UPDATE users  
SET 
   users.Global_id = '123'
WHERE
    users.Global_id is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:16:34.700

假设您有此列名称未更新`city`

```
(UPDATE users SET city = 'Dallas' WHERE Global_id = your_variable_of_user 
                                 AND   city    = "" )  // it means it null here. 
```

全局id的第二条sql

```
(UPDATE users SET city = 'Dallas' WHERE Global_id = 0 
                                 AND   city    = "" )  // it means it null here. 
```

*   user_id 是您使用的用户 ID 的列名
*   你的意思是 global_id 会更新吗？因为如果 global_id 是 0 这意味着它的客人没有登录那么你将如何更新它？但我建议你使用 PDO 。希望它可以帮助你

# sql - 流和物化视图oracle之间的区别

> ID：13459241
> 
> 赞同：2
> 
> 时间：2012-11-19T17:43:29.113
> 
> 标签：sql, database, oracle, database-replication, materialized-views

使用 Oracle 数据库复制数据时，流和物化视图有什么区别？这些解决方案有什么优点或缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:06:13.923

Streams 是较新的首选架构。Streams 比物化视图更有效——Streams 从重做日志中异步读取数据，而物化视图（假设您只想复制更改）必须同步写入物化视图日志。它更灵活。这是 Oracle 投入时间和精力改进的解决方案（尽管 Oracle 现在正在将 Streams 与 Golden Gate 集成，而 Golden Gate 将成为未来首选的复制技术）。

物化视图是一种效率较低的方法，但它们更易于设置和配置（尤其是在源数据库的管理员对帮助您不感兴趣的情况下）。毫无疑问，有更多的人四处走动，他们有使用物化视图的经验，仅仅是因为他们已经存在了很长一段时间。如果您有相对简单的要求——例如，您希望每天在固定时间从源数据库复制一次数据——物化视图可能就足够了。如果您想要实时复制，使用 Streams 会更好。

# visual-studio-2010 - Visual Studio 快捷键

> ID：13459248
> 
> 赞同：1
> 
> 时间：2012-11-19T17:43:59.017
> 
> 标签：visual-studio-2010, visual-studio, sdk, keyboard-shortcuts

我正在做一个项目，在按下一些快捷键时，我注意到了 Visual Studio 2010 的状态栏：

![在此处输入图像描述](../Images/ae3a108274d62421205144c5c439a519.png)

请自己尝试一些捷径来注意 VS 的整体行为，然后......我怎样才能在相同的性能水平上达到这种效果？提前致谢！

PS我有以下代码块取自Stack Overlow，它做了类似的事情，但性能级别不同。我的代码适用于`CTRL`+ `K`, `P`。

```
protected override bool ProcessCmdKey( ref Message msg, Keys keyData )
{
    if (prefixSeen)
    {
        if (keyData == ( Keys.Control | Keys.P))
        {
            MessageBox.Show( "Got it!" );
            keyComb.Text = "Ready";
        }
        prefixSeen = false;
        return true;
    }
    if (keyData == ( Keys.Control | Keys.K))
    {
        prefixSeen = true;
        keyComb.Text = "CTRL + K was pressed. Waiting for a second chord of keys...";
        return true;
    }
    return base.ProcessCmdKey( ref msg, keyData );
} 
```

但是在按下`CTRL`+之后`K`，标签`keyComb`不采用值“CTRL + K 被按下。等待第二个和弦键......”

代码取自：[How to get a combination of keys in c#](https://stackoverflow.com/questions/3244063/how-to-get-a-combination-of-keys-in-c-sharp)

# ruby-on-rails - 尝试向资源添加自定义操作时没有路由错误

> ID：13459249
> 
> 赞同：0
> 
> 时间：2012-11-19T17:44:00.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, routes

我正在尝试向资源添加自定义操作，但出现路由错误`No route matches [GET] "/products/list/up"`。我尝试在 routes.rb 中注释掉 URI，但它们也不起作用。我究竟做错了什么？

我有这个`routes.rb`：

```
 namespace :api, :defaults =>{format: 'json'} do
 scope module:  :v1 ,constraints: ApiConstraints.new(version:1, default: true) do

resources :products do
member do
  match  "/list/up" =>"products#product_list" ,:via=>:get
  #get "/list/up" , :action=>"product_list"
  #get "/list/up" , :to=>"product_list"
end
end
 end
 end 
```

在`products_controller.rb`：

```
def product_list
  @products= Product.all
  respond_to do |format|
    format.json { render json: @products.to_json}
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:14:43.963

尝试`collection`代替，`member`因为您没有`id`在路径中提供任何内容：

```
resources :products do
    collection do # <-----<
        get  "/list/up" =>"products#product_list"
    end
end 
```

运行`rake routes`给出：

```
list_up_products GET    /products/list/up(.:format)  products#product_list
        products GET    /products(.:format)          products#index
                 POST   /products(.:format)          products#create
     new_product GET    /products/new(.:format)      products#new
    edit_product GET    /products/:id/edit(.:format) products#edit
         product GET    /products/:id(.:format)      products#show
                 PUT    /products/:id(.:format)      products#update
                 DELETE /products/:id(.:format)      products#destroy 
```

# google-sheets - 日期更改时如何更改谷歌电子表格中单元格中的值

> ID：13459251
> 
> 赞同：2
> 
> 时间：2012-11-19T17:44:06.493
> 
> 标签：google-sheets

我想在 Google 电子表格中创建一个祷告时间表。

将有两个不同的电子表格。一个应该显示整个月，另一个应该显示每日信息。我希望每日时间表在日期更改时从每月电子表格中提取数据。

有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T23:10:38.217

使用名为 Sheet2 的数据源工作表（右侧）并占用 ColumnsA:B，如左侧工作表的 B2 所示：

```
=VLOOKUP(DAY(NOW()),Sheet2!A:B,2,0) 
```

![SO13459251 示例](../Images/a9c12f1454d6015695d6d98edf4c75be.png)

应该能达到你的要求。`=DAY(NOW())`碰巧我在 ColumnA (一个保存。

# java - 在Java中设置类路径

> ID：13459266
> 
> 赞同：0
> 
> 时间：2012-11-19T17:44:53.937
> 
> 标签：java, eclipse, classpath

我曾经在我的笔记本电脑上运行 eclipse。我已经安装并使用了 Secunia PSI 应用程序来更新应用程序，但是一旦完成，我就无法运行 Eclipse。

这就是我所拥有的： ![在此处输入图像描述](../Images/7c592cd276e3b30dfa5a6c16835b26c7.png)

我将 PATH 设置为包含 javaw.exe 应用程序的目录。PATH 变量的路径与 CLASSPATH 变量的路径相同。那么，你的决心是什么？完成，现在可以使用了。我只需要添加'.;' 在 PATH 的路径链接的末尾。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:47:37.817

正如错误消息明确指出的那样，Eclipse 无法找到整个 JVM。

将包含的目录添加`javaw.exe`到您的 PATH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:08:00.007

最好通过单击并提供 JAVA 根安装文件夹的文件夹位置，在您看到类路径的同一屏幕中添加`JAVA_HOME`为新的系统变量，例如：`New`

```
 Variable Name= JAVA_HOME
    Variable Value= C:\Program Files\Java\jdk1.7.0_09 
```

# installation - NSIS 静默安装程序返回退出代码 1

> ID：13459268
> 
> 赞同：1
> 
> 时间：2012-11-19T17:45:01.230
> 
> 标签：installation, nsis, exit, silent-installer

我将 NSIS 脚本编译为 .exe 安装文件。我使用命令行 \S 静默选项启动 .exe。

安装按需要静默执行，但有退出代码 1。退出代码 1 对应于用户在向导上选择取消的情况。但是，安装成功并且模式为静默（无用户交互）。此外，此退出代码来自哪里，以及如何手动强制执行退出代码 0？

我有一个想法，我可以在 .onInstSuccess 函数中做一些事情，如果安装成功，则强制执行退出代码 1。

此外，ExecWait 将退出代码捕获到变量中，但没有“设置”选项。

你会推荐什么？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T01:23:47.813

没有任何示例代码，很难猜出问题可能是什么！

您可以使用 设置特定的退出代码`SetErrorLevel`。

就 ExecWait 而言，设置任何东西都是没有意义的，当它返回时，子进程已经结束。如果您想使用子进程的退出代码，您只需要获取它：

```
ExecWait '"c:\foo.exe"' $0
SetErrorLevel $0 
```

# php - 从 SQL 表中提取照片和照片 ID 并将它们显示在 PHP 页面上的列表中

> ID：13459269
> 
> 赞同：0
> 
> 时间：2012-11-19T17:45:06.717
> 
> 标签：php, html, mysql, css, arrays

我有一个包含 ID、photourl 和 thumbnailurl 的 SQL 表。现在我写了一个删除照片的脚本。一切正常，我想在列表中显示图像：

![像这样](../Images/a8e0e9741ff97e1f7e80b663ab3918bd.png)

如您所见，我想将照片和删除链接放在一个列表项中。

```
<ul>
    <li>
        <ul>
            <li><img src="#"/></li>
            <li><a href="#"> DELETE IMAGE </a></li>
        </ul>
    </li>

    <li>
        <ul>
            <li><img src="#"/></li>
            <li><a href="#"> DELETE IMAGE </a></li>
        </ul>
    </li>
</ul> 
```

我写了一些代码，但它似乎不起作用......它在列表中垂直显示照片。

```
<ul >
<li>
<?php
    while ($line = $db->fetchNextObject()) {
        //echo '<li>';
            echo '<ul>';
                echo '<li> <img class="thumb_image '.$line->category.'" src="'.$line->minurl.'"/> </li>';
                echo '<li>  <a href="index.php?remove=true&id='.$line->id.'">Verwijder</a> </li>';
            echo '</ul>';
        //echo '</li>';
        /*echo '<img class="thumb_image '.$line->category.'" src="'.$line->minurl.'"/> <br/> <a href="index.php?remove=true">Verwijder</a> ';
    */
    }

?>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:08:46.180

尝试像这样设置您的 HTML：

```
<ul>
   <li><img src="#"/><a href="#" class="deleteImage"> DELETE IMAGE </a></li>
 </ul> 
```

然后你的CSS如下：

```
.deleteImage { display: block; }​ 
```

这将允许您操作您希望删除图像文本在图像下方显示的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:01:34.287

一种方法来做到这一点......使用`<table>`，`<li>` 这会给你一个粗略的想法..尝试类似..

```
<table>
  <ul>
    <tr>
      <td><li> row1 - column1 (1,1) </li></td>
      <td><li> row1 - column2 (1,2) </li></td>
    </tr>
    <tr>
      <td><li> row2 - column1 (2,1) </li></td>
      <td><li> row2 - column2 (2,2) </li></td>
    </tr>
  </ul>
</table> 
```

休息你可以弄清楚自己..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:29:50.593

有时，您需要的是一张表格，但它不必看起来像：

CSS：

```
table {
    display: block;
}

tr {
    display: inline-block;
    border: 1px solid;
    margin: 1em;
}

td {
    display: block;
    text-align: center;
}

img {
    width: 100px;
    height: 100px;
    border: 1px solid red;
} 
```

HTML：

```
<table>
    <tr>
        <td><img /></td>
        <td><a href="#">Delete</td>
    </tr>

    <tr>
        <td><img /></td>
        <td><a href="#">Delete</td>
    </tr>
</table> 
```

[http://jsfiddle.net/52yTm/](http://jsfiddle.net/52yTm/)

您可以添加额外的列，例如谁上传了它或拍摄照片的时间等，并且设置这些样式是有意义的。

列表列表对我来说似乎不合适。在我看来，清单应该是类似的东西（杂货清单、颜色清单等）。图像和删除按钮是具有关系的不同项目（“删除”删除关联的图像）。用表格更好地表达关系。

# package - 增加传入包的 TTL

> ID：13459274
> 
> 赞同：1
> 
> 时间：2012-11-19T17:45:26.690
> 
> 标签：package, increment, ttl

我有这样的问题。
我想建立自己的基于Windows 2008 Server 的家庭局域网。该操作系统安装在具有两个网络接口的机器上（第一个连接到 Internet，第二个连接到本地网络）。
我需要为每个传入的包增加 TTL，因为我的提供商总是将 TTL 值设置为 1，所以每个包都被网关丢弃（它是一台带有服务器操作系统的计算机）。我不知道，如何做到这一点，谷歌什么也没说。**我不需要设置默认 TTL**，我知道，如何通过注册表来设置，**我需要为传入的包增加它**。

# php - 通过php跟踪点击动态按钮

> ID：13459277
> 
> 赞同：0
> 
> 时间：2012-11-19T17:45:33.267
> 
> 标签：php, analytics, tracking, outbound

我需要跟踪将用户发送到另一个 url 的动态按钮，具体取决于他的产品。像 pinterest 这样的东西。该网站是PHP。

我在跟踪有多少用户点击了该按钮时遇到了问题。尝试过 Piwik、Google、Clicky、Mixpanel 和 Kissmetrics。每个人给出不同的数据。对于我一直在搜索的内容，一些用户说这是一个 javascript 问题，因为出站时间。也尝试使用 sendmail 功能，但每次用户访问产品时它都会发送一封电子邮件，而不是每次点击按钮时

有没有一种简单的方法可以在不使用任何这些指标服务的情况下跟踪我网站内的这些点击？我只需要跟踪两件事：

*   url（将用户发送到哪里）
*   点击次数（点击次数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:53:17.083

这听起来就像您只需要向服务器发送一个 ajax 请求（假设您定义了全局变量`clicks`

```
var url = 'yourUrl';

clicks++;

$('#yourBtn').click(function() {
$.ajax({
   data: {url: url, clicks: clicks},
   url: 'ajax/test.html',
   success: function(data) {
     alert('Load was performed.');
   }
 });
}); 
```

# android - Android 4.2 - Environment.getExternalStorageDirectory().getPath() 行为

> ID：13459280
> 
> 赞同：5
> 
> 时间：2012-11-19T17:45:46.580
> 
> 标签：android, mobile

我一直在开发一个 android 应用程序，在上次更新到 4.2 之前，我使用

```
Environment.getExternalStorageDirectory().getPath() 
```

它返回了我/storage/sdcard0/，但自从更新后我现在得到/storage/emulated/0。

我一直在阅读有关 Android 4.2 上的多用户功能的信息，我猜这就是 0 的来源，但是，我仍然不知道如何到达更新前使用的路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T17:50:39.970

这是您的路径，所以请使用它。不要多想。由于多用户功能，自 4.2 起路径已更改。Android 将在固件升级时处理该问题，因此您无需费心。就像到目前为止一样使用它，不要担心它会改变。如果您的代码以某种方式依赖于旧值，请修复您的代码。

# r - 根据 R 中 Row 中的位置，用 1 或 0 替换 NA

> ID：13459281
> 
> 赞同：2
> 
> 时间：2012-11-19T17:45:48.433
> 
> 标签：r, replace, na

我有一些 R 数据帧，其中包含二进制数据`(0,1)`，以表示对特定子量表项目的不正确和正确响应。参与者没有被问到所有问题，并且必须`NA`指出这些缺失的数据。年长的参与者从较晚的项目开始，并且`NA`没有询问早期项目。此外，大多数参与者没有完成评估，导致`NA`行尾出现许多 s。示例行如下：

`Row 1 = NA, NA, NA, 1, 1, 0 , 1, 0, 0, 0, NA, NA Row 2 = 1, 1, 0, 0, 0, NA, NA, NA, NA, NA, NA, NA, NA`

我想将`NA`行开头的所有 s （如果它们存在）替换为，并将行末尾的 s 替换`1`为。`NA``0`

所以上面将是 `Row 1 = 1,1, 1, 1, 1, 0 , 1, 0, 0, 0, 0,0 Row 2 = 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,0, 0, 0`

我尝试使用以下功能：

```
datComp <- function (x){
  xmin <- min(which(!is.na(x)))
  xmax <- max(which(!is.na(x)))
  if (xmin >1){ 
  x[1:xmin-1] <- 1} 
  x[(xmax+1):length(x)] <- 0
  return(x)
  } 
```

但是对于某些数据帧会出现此错误：

```
Error in data.frame(`1` = c(1, 1, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0,  : 
  arguments imply differing number of rows: 36, 37 
```

是否有一个现有的功能可以满足我的需求？如果没有，任何人都可以用简单的代码来帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:19:49.270

我不知道任何现有的功能可以做到这一点。这是一种方法：

```
d <- read.csv(text="NA, NA, NA, 1, 1, 0 , 1, 0, 0, 0, NA, NA
1, 1, 0, 0, 0, NA, NA", header=FALSE, strip.white=TRUE, fill=TRUE)
#   V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12
# 1 NA NA NA  1  1  0  1  0  0   0  NA  NA
# 2  1  1  0  0  0 NA NA NA NA  NA  NA  NA

t( # apply returns its results in column form, so we transpose here
  apply(d, 
    MARGIN=1, # apply over the rows
    FUN=function(row) # for value in row, if NA and index less than min non-NA index, 1, else 0 
          ifelse(is.na(row), 
          ifelse(seq_along(row) < which.min(is.na(row)), 1, 0), 
          row)
  )
)
#      V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12
# [1,]  1  1  1  1  1  0  1  0  0   0   0   0
# [2,]  1  1  0  0  0  0  0  0  0   0   0   0 
```

# c# - Ria services - Beta 2009 Perview- 每个服务的最大 CRUD Opt 数量

> ID：13459283
> 
> 赞同：1
> 
> 时间：2012-11-19T17:45:52.533
> 
> 标签：c#, silverlight, ria

我有超过 78 个 POCO 实体，我想将所有 CRUD 操作放在单个服务中。

VS 2008 无法编译我检查了所有源文件：

> 错误：DomainOperation 实体不代表操作查询，因此它不能返回值。

RIA BETA (2009 perview) 中的一项服务暴露的实体数量是否有一些**限制？**

# matlab - matlab 中的“+”打包或模块化编程：python 导入的模拟？

> ID：13459284
> 
> 赞同：3
> 
> 时间：2012-11-19T17:46:04.713
> 
> 标签：matlab, namespaces, packaging

我具有 Java 或 Python 等语言的背景，其中模块化编程通过打包系统和导入指令（又名命名空间别名）启用。从历史上看，MATLAB 解决命名冲突等问题的方法归结为设置/使用 MATLABPATH、重命名/扩展带前缀的标识符等。到目前为止，我已经通过在文件夹名称前加上加号“+”成功地使用原生 MATLAB 打包（包的 MATLAB 表示法也请参见[此处](http://www.mathworks.com/help/matlab/matlab_oop/scoping-classes-with-packages.html)）。显然，它们的输入时间很长；-) 基本上我回到了[这里](https://stackoverflow.com/questions/13076365/what-is-the-scope-of-matlabs-import-function)讨论的类似问题，但没有解决方案。所以让我解释一下我的特定角度：

假设我定义了文件夹**+mypackage** ，其中包含具有同名功能代码的文件**myfun.m 。**

如何在用户（非 java）包中实现 MATLAB 函数的别名，如以下 python 代码所示：

```
from mypackage import myfun 
```

?

[**编辑**]~~请注意，AFAIK 导入关键字仅适用于[java 类](http://www.mathworks.com/help/matlab/ref/import.html)（将 jvm 附加到 MATLAB 进程）。~~不，对于 Java 和 MATLAB 来源的对象和函数的函数和别名，导入都可以正常工作。

可能相关但不[一样](https://stackoverflow.com/questions/6315047/using-matlab-to-import-another-m-file)。

[**编辑2** ]

蟒蛇的

```
from mypackage import myfun as anotherfun 
```

相当于 MATLAB 的

```
anotherfun = @mypackage.myfun 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:50:19.067

不

```
import mypackage.myfun 
```

工作？

[文档链接](http://www.mathworks.com/help/matlab/ref/import.html)

# asp.net - 如何使表格符合逻辑

> ID：13459285
> 
> 赞同：1
> 
> 时间：2012-11-19T17:46:06.897
> 
> 标签：asp.net, vb.net, sql-server-express

数据库图

我正在尝试创建除其他 3 个表之外还包含所有字段的主信息表。所以，主信息表有很多电话号码、很多编码器号码和很多控制室号码。因此，我以这种方式制作了它们，但我不确定如果我需要做相反的事情怎么办，比如将 statin_No 放在每个表中？而不是将每个表的主键放在 masterInfoTable 中，比如将 Audio_keyNo 放在 MasterInfoTable 中？

masterInfo 表包含（Station_No、Encoder_make、Encoder_Model、Audio_keyNo、ControlRoom_keyNo 和 Encoder_KeyNo） AudioTable 有（Audio_KeyNO、Audio_No） ControlRoom 表和 Encoder 表有 keyno 和控制室或编码器编号。任何以 KeyNO 结尾的东西都是主键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:10:58.420

您需要为编码器、电话、控制室创建主站表和其他三个表。将这三个表连接到您拥有的主表。因此，主表将有一个主键和三个表的三个外键。这是我从你的问题描述中能想到的最好的。如果您有任何进一步的问题，请告诉我。

# python - 在python中读取文件的前N行

> ID：13459290
> 
> 赞同：0
> 
> 时间：2012-11-19T17:46:22.980
> 
> 标签：python

通常，在读取文件时，我使用 for line n fileobject: 构造。有没有一种简单的方法可以遍历文件中的前 N ​​行（或任意子集），这样我就不必读取整个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:51:21.893

这是你想要的吗：

```
file = open('path/to/File.txt', 'r')
for i in range(1,n):
   file.readline() 
```

此处提供更多信息：[Python 输入和输出](http://docs.python.org/2/tutorial/inputoutput.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T17:50:40.080

尝试这个：

```
import itertools

f = open(filename, 'r')
N = 10 # Number of lines to take

for line in itertools.islice(f, N):
    pass # Your code here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:53:02.187

您可以使用`itertool.islice`，例如您想阅读第 6 到 10 行，然后：

```
In [66]: with open("data1.txt") as f:
           lines=list(islice(f,5,10,1))
           print lines 
```

# python - PyQt QFileDialog exec_ 很慢

> ID：13459294
> 
> 赞同：3
> 
> 时间：2012-11-19T17:46:34.803
> 
> 标签：python, qt, pyqt, qfiledialog

我正在使用自定义`QFileDialog`，因为我想选择多个目录。但是这个`exec_`功能很慢，我不知道为什么。我正在使用最新版本的 PyQt。

代码片段：

```
from PyQt4 import QtGui, QtCore, QtNetwork, uic

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)
        uic.loadUi('gui.ui', self)            
        self.connect(self.multiPackerAddDirsBtn,
                     QtCore.SIGNAL('clicked()'), self.multiPackerAddDirs)

    def multiPackerAddDirs(self):
        dialog = QtGui.QFileDialog(self)
        dialog.setFileMode(QtGui.QFileDialog.Directory)
        dialog.setOption(QtGui.QFileDialog.ShowDirsOnly, True)
        dialogTreeView = dialog.findChild(QtGui.QTreeView)
        dialogTreeView.setSelectionMode(
            QtGui.QAbstractItemView.ExtendedSelection)
        if dialog.exec_():
            for dirname in dialog.selectedFiles():
                self.multiPackerDirList.addItem(str(dirname))
                print(str(dirname))

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    window = MainWindow()
    window.show()
    app.exec_() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:23:43.280

构造`QFileDialog`函数创建一个 Qt 对话框，而静态函数（如`getSaveFileName`）将创建一个原生对话框（除非[DontUseNativeDialog](http://doc.qt.nokia.com/4.8-snapshot/qfiledialog.html#Option-enum)选项设置为`True`）。

根据使用的平台，本机对话框可能比 Qt 更快或更慢。

但是，对于某些平台，问题似乎更为严重。查看[这个长期存在的错误](https://bugreports.qt-project.org/browse/QTBUG-13182)，它影响带有 Qt 4.7 / 4.8 的 Windows XP 和 Windows 7（以及其他）。

**更新**

只是要清楚：

在 Windows 上，静态函数[QFileDialog.getExistingDirectory](http://qt-project.org/doc/qt-4.8/qfiledialog.html#getExistingDirectory)打开本机“浏览文件夹”对话框，该对话框只允许选择单个目录。所以 Qt 不能提供用于选择多个目录的*本机*对话框，因为 Windows 不提供。

另一个主要替代方法是使用 Qt 自己的非本机文件对话框并按照[此 faq](http://qt-project.org/faq/answer/when_the_filemode_is_directoryonly_in_my_qfiledialog_how_can_i_select_multi)中的建议对其进行猴子补丁。但是，正如您已经发现的那样，由于底层实现中的错误，这目前具有令人讨厌的缓慢的显着缺点。

剩下的唯一选择是编写您自己的目录列表对话框，或者尝试考虑另一种解决您当前问题的方法（即不使用文件对话框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T16:50:31.637

从默认的 Qt 文件浏览器对话框中，我的性能非常缓慢。列出一个目录大约需要 5 秒，选择一个文件大约需要 3 秒。添加“DontUseNativeDialog”选项完全解决了我的问题。

```
file_path = QtGui.QFileDialog.getSaveFileName( self, 'Title', path, "", "", QtGui.QFileDialog.DontUseNativeDialog )
print file_path 
```

# c++ - 可通过其菜单栏拖动的 C++ 窗口

> ID：13459296
> 
> 赞同：1
> 
> 时间：2012-11-19T17:46:35.357
> 
> 标签：c++, visual-studio-2012

所以我使用 Visual C++，并且创建了一个可拖动的无边框窗口。无论如何，顶部有一个工具栏，我希望能够通过该工具栏拖动窗口。我仍然希望工具栏能够正常工作，但我不知道如何能够通过它拖动窗口。这是我当前的窗口（参见顶部的工具栏）：

![窗户](../Images/80758b11e11190eefaeecb3c562b98ed.png)

这是我当前使其可拖动的代码：

```
case WM_NCHITTEST: {
    LRESULT hit = DefWindowProc(hWnd, message, wParam, lParam);
    if(hit == HTCLIENT) hit = HTCAPTION;
    return hit;
}
break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:30:50.433

钩住 WM_NCHITTEST，您走在了正确的轨道上。现在，您需要更改构成客户端点击与字幕点击的内容。如果我现在理解您的代码，那么您在窗口的客户区域内单击的任何位置（除了边框之外的所有内容）都将允许您将窗口拖到其他地方。这将使与您的应用程序的交互变得非常困难。相反，您应该仅在确定命中位于菜单栏区域内之后才返回 HTCAPTION。具体来说，菜单栏区域不包含文件/编辑/帮助按钮。

```
case WM_NCHITTEST: {
  LRESULT hit = DefWindowProc(hWnd, message, wParam, lParam);
  if (hit == HTCLIENT) { // The hit was somewhere in the client area. Don't know where yet.
    // Perform your test for whether the hit was in the region you would like to intercept as a move and set hit only when it is.
    // You will have to pay particular attention to whether the user is actually clicking on File/Edit/Help and take care not to intercept this case.
    // hit = HTCAPTION;
  }
  return hit;
  break;
} 
```

这里要记住一些事情：

*   对于想要最小化、关闭或移动您的应用程序的用户来说，这可能会非常令人困惑。菜单栏不会向用户传达您可以通过拖动它们来移动窗口。
*   如果您关心垂直像素，您可以考虑做 Windows 上的其他应用程序开始做的事情 - 将菜单栏功能移动到标题栏中绘制的单个按钮。（请参阅 Windows 8 中最新版本的 Firefox/Opera 或 Windows 资源管理器，了解将内容移至标题栏的一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:51:29.640

在我的一个应用程序中，我还想让窗口成为​​我所说的“客户区可拖动”。不幸的是，上述解决方案（用 HTCAPTION 替换 HTCLIENT）确实存在严重缺陷：

双击客户区现在显示与双击标题相同的行为（即最小化/最大化窗口）！

为了解决这个问题，我在消息处理程序（摘录）中执行了以下操作：

```
 case WM_MOUSEMOVE:
            // Move window if we are dragging it
            if (mIsDragging) // variable: bool mIsDragging;
            {
                POINT mousePos = {GET_X_LPARAM(lParam), GET_Y_LPARAM(lParam)};

                mIsDragging = (ClientToScreen(hWnd, &mousePos) &&
                               SetWindowPos(hWnd,
                               NULL,
                               mDragOrigin.left + mousePos.x - mDragPos.x,
                               mDragOrigin.top + mousePos.y - mDragPos.y,
                               0,
                               0,
                               SWP_NOSIZE | SWP_NOZORDER | SWP_NOACTIVATE));
            }
            break;

        case WM_LBUTTONDOWN:
            // Check if we are dragging and safe current cursor position in case
            if (wParam == MK_LBUTTON)
            {
                POINT mousePos = {GET_X_LPARAM(lParam), GET_Y_LPARAM(lParam)};
                if (ClientToScreen(hWnd, &mousePos) &&
                    DragDetect(hWnd, mousePos))
                {
                    // Check if the cursor is pointing to your new caption here!!!!
                    mIsDragging = true;
                    mDragPos = mousePos;

                    GetWindowRect(hWnd, &mDragOrigin);
                    SetCapture(hWnd);
                }
            }
            break;

        // Remove this case when ESC key handling not necessary
        case WM_KEYDOWN:
            // Restore original window position if ESC is pressed and dragging active
            if (!mIsDragging || wParam != VK_ESCAPE)
            {
                break;
            }

            // ESC key AND dragging... we restore original position of window
            // and fall through to WM_LBUTTONUP as if mouse button was released
            // (i.o.w. NO break;)
            SetWindowPos(hWnd, NULL, mDragOrigin.left, mDragOrigin.top, 0, 0,
                         SWP_NOSIZE | SWP_NOZORDER | SWP_NOACTIVATE);

        case WM_LBUTTONUP:
            ReleaseCapture();
            break;

        case WM_CAPTURECHANGED:
            mIsDragging = false;
    break; 
```

（伪）代码省略了返回值（默认值：0）和变量定义，但无论如何都应该使过程清晰！？（如果不给我留言，我会添加更多或所有代码）。

ps：我刚刚找到了另一个全面的描述，它也解释了这两种解决方案的区别：http: [//tinyurl.com/bqtyt3q](http://tinyurl.com/bqtyt3q)

# ruby-on-rails-3 - 一个模型上的两个 Form_For

> ID：13459297
> 
> 赞同：0
> 
> 时间：2012-11-19T17:46:43.700
> 
> 标签：ruby-on-rails-3

我有以下

*   页面模型
*   客户模型
*   商业模式

这些模型之间没有任何关系。

我想在页面的显示模板上有 Form_for 的

*   一份给客户
*   一个为企业

这可能吗？

目前有以下：

```
<div id="sidebar">
    <%= form_for (@business) do |f| %>
     <div id="contact_form_name">
     <p>Company</p>
     <%= f.text_field :company_name, :class =>'form_input_small'  %>
     <%= f.submit 'Submit', :class => 'button' %>
    <% end %>
</div>

<div id="sidebar">
    <%= form_for (@client) do |f| %>
     <div id="contact_form_name">
     <p>First Name</p>
     <%= f.text_field :first_name, :class =>'form_input_small'  %>
     <%= f.submit 'Submit', :class => 'button' %>
    <% end %>
</div> 
```

我在日志中出现的错误如下

```
 <div id="sidebar">
    78:                                 <%= form_for (@business) do |f| %>
    79:                                         <div id="contact_form_name">
    80:                                         <p>Company</p>
    81:                                         <%= f.text_field :company_name, :class =>'form_input_small'  %>
  app/views/pages/show.html.erb:78:in `_app_views_pages_show_html_erb___1556847543_65073939124600'
  app/controllers/pages_controller.rb:9:in `show' 
```

路线

```
 businesses GET    /businesses(.:format)                      {:action=>"index", :controller=>"businesses"}
                           POST   /businesses(.:format)                      {:action=>"create", :controller=>"businesses"}
              new_business GET    /businesses/new(.:format)                  {:action=>"new", :controller=>"businesses"}
             edit_business GET    /businesses/:id/edit(.:format)             {:action=>"edit", :controller=>"businesses"}
                  business GET    /businesses/:id(.:format)                  {:action=>"show", :controller=>"businesses"}
                           PUT    /businesses/:id(.:format)                  {:action=>"update", :controller=>"businesses"}
                           DELETE /businesses/:id(.:format)                  {:action=>"destroy", :controller=>"businesses"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:20:28.190

只要您向其提供必要的信息，Rails 并不真正关心您的表单在哪里，并且没有什么说您不能将各种模型混合到一个视图中。

假设您正在使用 RESTful 资源（如您所愿），您将拥有如下内容：

```
resources :pages
resources :companies
resources :clients 
```

在您的 routes.rb 中进行设置，这样可以很容易地指定您希望 form_fors 的操作方式。

例如，在您的 Page 模型的 show 操作中，您可以有如下内容：

```
<h1>New Company:</h1>
<%= form_for @company, :url => companies_path do |f| %>
...
<% end %> 

<h1>New Client:</h1>
<%= form_for @client, :url => clients_path do |f| %>
...
<% end %> 
```

确保您正在设置实例变量`@company`，并`@client`在您的页面控制器中显示类似`@company = Company.new`&的操作`@client = Client.new`。

在这两种情况下，您的表单都会发布到各自模型的创建操作中。您可以[依靠记录识别](http://guides.rubyonrails.org/form_helpers.html#relying-on-record-identification)进行检查以进一步阅读。

# jquery - 带有“更改”事件的克隆选择停止更新

> ID：13459304
> 
> 赞同：0
> 
> 时间：2012-11-19T17:47:33.220
> 
> 标签：jquery

我正在克隆一个选择下拉列表并使用新选项填充它：

```
var oldSelect = $("select[name='old']")
var newSelect = oldSelect.clone(true);
newSelect.html(newoptions);
oldSelect.replaceWith(newSelect); 
```

这带来了一个之前绑定的更改事件：

```
$("select[name='old']").bind('change', function(){ update(); }); 
```

我的新选择有效，更新事件正确触发，但用户选择的选项未出现在框中（见附图）。

![选择框不显示更改值](../Images/daf7c275348ab756b34ca1b3ad04e2f3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:16:37.870

事实证明，在更改时执行的更新函数正在重绘选择框，这会将所选选项重置为空。它发生得如此之快，以至于我没有注意到更换。

# windows - 一个进程的 read() 可以看到另一个进程的部分 write() 吗？

> ID：13459314
> 
> 赞同：1
> 
> 时间：2012-11-19T17:48:23.383
> 
> 标签：windows, unix, concurrency, operating-system, filesystems

如果一个进程执行大小（和对齐）S（例如 8KB）的 write()，那么另一个进程是否有可能执行读取（大小和对齐 S 以及同一个文件），看到混合的旧和新数据？

写入过程为每个数据块添加校验和，我想知道是否可以使用读取过程在后台验证校验和。如果读者可以看到部分写入，那么它将错误地指示损坏。

这里适用哪些标准或文件？有没有一种便携的方法来避免这里的问题，最好不要引入大量的锁定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:08:56.613

当一个函数保证完成而没有任何其他进程/线程/任何东西看到处于半完成状态的东西时，它被称为***atomic***。它要么发生了，要么没有发生，没有半途而废。虽然我不能与 Windows 对话，但在 POSIX（这是 Linux/BSD/etc 试图坚持的）中很少有文件操作可以保证是原子的。读和写**不保证是原子**的。

虽然您不太可能将 2 个字节写入文件而另一个进程只看到其中一个字节被写入，但如果运气不好，您的写入跨越了内存中的两个不同页面，并且 VM 系统必须做一些事情来准备第二个页面，您可能会在第二个进程中看到一个字节而没有另一个字节。通常，如果文件中的内容是页面对齐的，它们将在内存中，但同样你不能依赖它。

[这是一个](http://rcrowley.org/2010/01/06/things-unix-can-do-atomically.html)由 POSIX 中的原子组成的列表，它很短，我不能保证它的真实性。（例如，我想不出为什么没有列出 unlink ）。

我还提醒您不要测试似乎可以工作并使用它运行的东西，当您开始通过网络文件系统（Unix 上的 NFS，或 Windows 中的 SMB 挂载）访问文件的那一刻，很多事情在没有之前似乎是原子的更长的时间。

如果您希望在第一个进程写入文件时让第二个进程计算校验和，您可能希望在两者之间打开一个管道，并让第一个进程将管道中所有内容的副本写入校验和进程。这可能比处理锁定要快。

# php - PHP - 如果数组中的字段相等，则比较 2 个多维数组和输出值

> ID：13459315
> 
> 赞同：1
> 
> 时间：2012-11-19T17:48:32.760
> 
> 标签：php, arrays, multidimensional-array, compare

我在 2 个变量中有 2 个数组，并且它们都在字段中包含完全相同的值（在第一个数组 =“image_id”-field 和第二个数组 =“ID-field”中）。

我需要比较这两个字段并想输出第一个数组的图像路径字符串（如果第一个数组的“ID”字段和第二个数组的字段相等）

像这样：如果第一个多阵列中的“2146”等于第二个多阵列中的“2146”，则回显 apple.jpg.. 但它是如何工作的？最后几天真的把我吓坏了。提前感谢您的回复。

$多维数组1：

```
array(4) {
  [0]=>
  string(9) "apple.jpg"
  ["imagepath"]=>
  string(9) "apple.jpg"
  [1]=>
  string(4) "2146"
  ["image_id"]=>
  string(4) "2146"
}

array(4) {
  [0]=>
  string(10) "ananas.jpg"
  ["imagepath"]=>
  string(10) "ananas.jpg"
  [1]=>
  string(4) "2037"
  ["image_id"]=>
  string(4) "2037"
}

array(4) {
  [0]=>
  string(8) "nuts.jpg"
  ["imagepath"]=>
  string(8) "nuts.jpg"
  [1]=>
  string(4) "2024"
  ["image_id"]=>
  string(4) "2024"
} 
```

$多维数组2：

```
array(2) {
  [0]=>
  string(4) "2146"
  ["ID"]=>
  string(4) "2146"
}

array(2) {
  [0]=>
  string(4) "2037"
  ["ID"]=>
  string(4) "2037"
}

array(2) {
  [0]=>
  string(4) "2024"
  ["ID"]=>
  string(4) "2024"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:54:46.677

只要数组具有相同的键、长度和顺序，您就可以遍历一个并从两者中选择值。

```
$len = count($arr1);

for ($i = 0; $i < $len; $i++)
{
    if ($arr1[$i]['image_id'] == $arr2[$i]['ID'])
    {
        // output $arr1[$i]['imagepath']
    }
} 
```

如果信息来自同一个数据库中的两个表，最好将这些表连接在一起。如果数组的排序不同或长度不同（这样 $i 可能会引用两个数组中的不同元素），请使用一个作为查找表：

```
$lookup = array();

foreach ($arr2 as $element)
{
    $lookup[$element['ID']] = $element;
}

foreach ($arr1 as $element)
{
    if (isset($lookup[$element['image_id']]))
    {
        // output $element['imagepath']
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:56:15.777

```
foreach($multidimensional_array1 as $arr1){
    foreach($multidimensional_array2 as $arr2){
        if($arr2['id']==$arr1['image_id']){
            echo $arr1['imagepath'];
        }
    }
} 
```

注意：数组越大，所需的时间就越长。

# postgresql - 如何使用 Cake 在表名处设置表模式？

> ID：13459316
> 
> 赞同：0
> 
> 时间：2012-11-19T17:48:41.447
> 
> 标签：postgresql, cakephp

PostgreSQL、Oracle 和许多其他 DBMS 使用 SCHEMA，所以，表名是

```
schema_name.table_name 
```

但是 CakePHP 手册并没有说明这一点。CakePHP 默认值中的模型、视图和控制器名称怎么样？我可以使用前缀之类的解决方案，也就是说，在所有数据库操作中都将使用相同的模式名称。

* * *

PS1：请不要与[方法 Modelschema](http://api.cakephp.org/class/model#method-Modelschema)混淆，以及有关访问此方法的问题。

PS2：[Bill 的 2006 解决方案](http://cakephp.1045679.n5.nabble.com/Schema-support-in-Postgres-td1257601.html)不是更好的解决方案，因为没有更新（我使用的是 CakePHP2），也不是“官方 cakePHP 解决方案”。

PS3：database.php 有一些架构属性吗？CakePHP 文档的链接是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:55:17.133

对我来说好消息，有[关于 SQL-Schema 的 CakePHP 2.0 文档](http://book.cakephp.org/2.0/en/development/configuration.html)...没有其他文档或示例，但是一个起点...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-17T13:24:13.950

在 CakePHP 中你必须定义更多的数据库配置。

**在 CakePHP 2 中：**

*   将“模式”参数设置为您的配置
*   为您的所有架构创建新配置
*   在模型中使用正确的模式

例如，数据库配置：

```
public $default = array(
        'datasource' => 'Database/Postgres',
        'persistent' => false,
        'host'       => 'localhost',
        'login'      => 'my_db_user', 
        'password'   => 'my_db_passw', 
        'database'   => 'my_project_db', 
        'prefix'     => '',
        'encoding'   => 'utf8',
        'schema'     => 'postgres'
    );
public $other_schema = array(
        'datasource' => 'Database/Postgres',
        'persistent' => false,
        'host'       => 'localhost',
        'login'      => 'my_db_user', 
        'password'   => 'my_db_passw', 
        'database'   => 'my_project_db', 
        'prefix'     => '',
        'encoding'   => 'utf8',
        'schema'     => 'other_schema'
    ); 
```

如果你想在模型中使用它：

```
class AppModel extends AppModel {
    public $useDbConfig = 'other_schema';
} 
```

在 CakePHP3 中也是这样，只是数据库是 config/app.php 并且你必须使用

```
use Cake\Datasource\ConnectionManager;
$connection = ConnectionManager::get('default'); 
```

# iphone - iphone 分发（当前没有匹配的配置文件）疯狂

> ID：13459325
> 
> 赞同：1
> 
> 时间：2012-11-19T17:49:29.230
> 
> 标签：iphone, ios, xcode, code-signing

我是一个新手，已经开发 iOS 应用程序大约一年了。上周我的年度证书过期了，所以我从我的 Xcode 中删除了所有配置文件，并从我的 macbook 上的钥匙串中删除了证书和密钥。如这两篇文章所述，我从头开始重新创建了所有内容。（包括从苹果网站下载新证书和配置文件）

[iPhone 分发：当前没有匹配的配置文件](https://stackoverflow.com/questions/3608851/iphone-distribution-no-profiles-currently-match) [http://developer.coronalabs.com/forum/2012/01/10/ios-walkthrough-creating-your-certificates](http://developer.coronalabs.com/forum/2012/01/10/ios-walkthrough-creating-your-certificates)

到现在为止还挺好。好的，现在我的 iphone 分发疯狂问题。我在应用商店中有两个获批的应用，名为“Alarm Touch”和“ABC lite”。我为我的应用程序“Alarm Touch”打开了一个 Xcode 项目，当我查看代码签名时，它有 iphone 分发版（目前没有匹配的配置文件）。所以这就是我所做的。

*   我登录到[https://developer.apple.com/ios/manage/provisioningprofiles](https://developer.apple.com/ios/manage/provisioningprofiles)
*   更新了我的分发配置文件并在 App ID 下我选择了“Alarm Touch”
*   点击提交
*   刷新了页面
*   下载并双击分发配置文件。它在我的 Xcode 和代码签名下添加了它很高兴，即 iPhone 分发（当前匹配“iPhone 分发”）
*   看这个截图

![在此处输入图像描述](../Images/9c041dd22fd88e1955543b3f4c31ce56.png)

*   现在，如果我打开另一个名为“ABC lite”的 Xcode 项目，它的代码签名分发（当前没有匹配的配置文件）。
*   我是否需要每次都更新我的分发配置文件并按照上述步骤向我现有的已批准应用程序发布代码更新？
*   老实说，去年我的个人资料尚未过期时，我不必每次更新应用程序时都执行这些步骤。
*   我做错了什么或错过了什么？相信我，我一直在谷歌上搜索并阅读有关 stackoverflow 上有关此主题的现有帖子，但找不到解决这种古怪的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:55:57.037

您可以拥有多个配置文件。只需为第二个应用程序 ID 添加另一个。系统工作方式：您使用私有开发者/分发密钥和配置文件签署应用程序。对于一个团队帐户，只能存在一个分发配置文件。但是该分发配置文件可以附加许多配置文件 - 每个应用程序一个。

当所有的供应配置文件都安装好后，X-Code 将自动选择正确的供应配置文件与该应用程序一起使用。

如果您想省去麻烦并避免为您使用的每个应用程序 ID 创建新的配置文件，您可以创建所谓的通配符应用程序 ID，然后可以为此创建配置文件。
最简单的通配符是`.*` - 这匹配每个 Appid。
我们通常使用类似的东西`de.weptun.app.*`- 它允许我们使用共享的 App-ID 开头构建所有应用程序。

**然而**，通配符 App-ID 有一些主要缺点，因为它们不能用于 Apple 提供的几乎所有周边服务：

*   在应用程序内购买
*   推送通知（不确定位置通知 - 这些可能仍然有效）
*   iCloud

因此，如果我真的确定不需要使用任何这些服务，我只会使用通配符应用程序 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:43:58.017

好的，这真的是骗局。我不知道我在做什么，但它有效。

*   我为应用名称“iABC veryLite”创建了另一个名为 TU7J43B8JP.* 的应用 ID
*   更新了我的分发配置文件并选择了这个新的 iABCveryLite 应用程序 ID
*   更新后，我下载并双击了此分发配置文件
*   现在我在 Xcode 中的所有应用程序都说 iPhone 分发（当前匹配“iPhone 分发”）

一切又开始工作了。我希望苹果能让这个过程变得容易一些……只是一个愿望。

我希望这个答案对将来的任何人都有帮助。

# sql - 为多行选择一个序列 NEXTVAL

> ID：13459331
> 
> 赞同：1
> 
> 时间：2012-11-19T17:50:07.677
> 
> 标签：sql, sql-server, oracle, oracle10g, linked-server

我正在构建一个 SQL Server 作业，通过链接服务器将数据从 SQL Server 提取到 Oracle 数据库中。我需要填充的表具有名称 ID 的序列，这是我的主键。我很难找到一种简单的方法来做到这一点，而无需一些冗长的代码。到目前为止，这是我对 SELECT 部分的了解（一些实际名称被混淆了）：

```
SELECT (SELECT NEXTVAL FROM OPENQUERY(MYSERVER, 
    'SELECT ORCL.NAME_SEQNO.NEXTVAL FROM DUAL')), 
     psn.BirthDate, psn.FirstName, 
     psn.MiddleName, psn.LastName, c.REGION_CODE
FROM Person psn
LEFT JOIN MYSERVER..ORCL.COUNTRY c ON c.COUNTRY_CODE = psn.Country 
```

MYSERVER 是链接的 Oracle 服务器，ORCL 显然是模式。Person 是执行查询的 SQL Server 数据库上的本地表。

**当我运行此查询时，我会为 NEXTVAL 的所有记录获得相同的确切值。我需要的是它为每个返回的记录生成一个新值。**

我发现了这个类似的问题及其答案，但我不确定如何将其应用于我的案例（如果可能的话）：[Query multiple NEXTVAL from sequence in one statement](https://stackoverflow.com/questions/8292199/query-several-nextval-from-sequence-in-one-satement)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T18:54:39.767

把它放在一个 SQL 标量函数中。例子：

```
CREATE function [dbo].SEQ_PERSON() 
returns bigint as
begin
    return
    (   select NEXTVAL 
        from openquery(oraLinkedServer, 'select SEQ_PERSON.NEXTVAL FROM DUAL')
    )
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:42:14.400

我最终不得不遍历所有记录并单独设置 ID 值。凌乱而缓慢，但它似乎是这种情况下的唯一选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-14T15:56:09.560

非常简单，只需使用 CURSOR 来迭代代码：

```
SELECT NEXTVAL AS SQ from OPENQUERY(MYSERVER, 'SELECT  AC2012.NAME_SEQNO.NEXTVAL FROM DUAL') 
```

**所以你可以将这个select语句嵌入到任何Sql语句中，并通过CURSOR进行迭代。**

PS：

```
DECLARE SQCURS CURSOR  
FOR SELECT (SELECT NEXTVAL AS SQ FROM OPENQUERY(MYSERVER, 
'SELECT ORCL.NAME_SEQNO.NEXTVAL FROM DUAL')), 
 psn.BirthDate, psn.FirstName, psn.MiddleName, psn.LastName, c.REGION_CODE 
```

FROM Person psn LEFT JOIN MYSERVER..ORCL.COUNTRY c ON c.COUNTRY_CODE = psn.Country

打开 SQCURS 从 SQCURS 获取下一个；

我希望能有所帮助

# javascript - video.js：强制初始化已经手动初始化的视频

> ID：13459333
> 
> 赞同：0
> 
> 时间：2012-11-19T17:50:28.143
> 
> 标签：javascript, initialization, embed, video.js

我正在使用 javascript 动态生成和更改我的网站的内容。
我正在通过 javascript 添加视频文件和 videojs-javascript-files 并通过调用`_V_(videos[i].id);`.
但是，初始化视频只能在**第一次使用**！
当我更改网站内容然后再次移动到视频页面时，再次初始化视频（视频标签仍然具有相同的 id）不起作用。
浏览器的 HTML5 视频播放器在那里，但不是 videojs 风格的。

还有其他方法可以“强制”播放器初始化吗？什么可能导致这个问题？

这是我的脚本：

```
videoPlayer = {
    check: function() {
        videos = document.getElementsByTagName("video");
        if (videos.length > 0) {
            this.init();
        }
    },
    init: function() {
        if (isPlayer) {
            //alert("init");
            for (var i = 0; i < videos.length; i++) var player = _V_(videos[i].id, {}, function() {
                alert("player init!")
            });
        }
        else {
            this.build();
        }
    },
    build: function() {
        //alert("build");
        if (isPlayer == false) {
            var head = document.getElementsByTagName("head")[0];
            var videoScript = document.createElement('script');
            videoScript.type = 'text/javascript';
            videoScript.src = './min/g=videojs';
            var videocss = document.createElement('link');
            videocss.type = 'text/css';
            videocss.rel = 'stylesheet';
            videocss.href = './min/g=videocss';
            isPlayer = true;
            videoScript.onload = this.init;
            head.appendChild(videocss);
            head.appendChild(videoScript);
        }
    }
} 
```

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T10:57:07.333

我知道已经很晚了，但是您可以尝试检查视频元素的子元素。例如，如果它已经包含类 vjs-poster 的 div，则什么也不做，否则初始化 video-js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:31:06.347

您是否尝试过创建一个新的视频元素并（重新）初始化它而不是重新使用以前的视频元素？

您还可以尝试使用新值“重置”所有内容、src、曲目、字幕等

# javascript - 如何使用 jQuery 动态添加外部脚本？

> ID：13459334
> 
> 赞同：3
> 
> 时间：2012-11-19T17:50:30.170
> 
> 标签：javascript, jquery, dynamic, onload

我认为我可以只使用 jQuery 的 .append() 并将它们添加到头部，但这似乎不适用于我的外部脚本（Knockout.js）。

这是我在页面加载时运行的代码。它似乎适用于样式表，但不适用于外部脚本。

```
if (window.jQuery === undefined || window.jQuery.fn.jquery !== '1.8.0') {
    var script_tag = document.createElement('script');
    script_tag.setAttribute("type","text/javascript");
    script_tag.setAttribute("src",
        "http://code.jquery.com/jquery-1.8.0.min.js");
    if (script_tag.readyState) {
      script_tag.onreadystatechange = function () { // For old versions of IE
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
              scriptLoadHandler();
          }
      };
    } else {
      script_tag.onload = scriptLoadHandler;
    }
    // Try to find the head, otherwise default to the documentElement
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
} else {
    // The jQuery version on the window is the one we want to use
    jQuery = window.jQuery;
    main();
}

function main() { 
        jQuery(document).ready(function($) {
            $("head").append("<script type='text/javascript' src='http://knockoutjs.com/js/jquery.tmpl.js'></script>");
            $("head").append("<script type='text/javascript' src='http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-1.2.1.js'></script>");
            $("head").append("<link href='style.css' rel='stylesheet' type='text/css' />");

            // Then it appends the necessary HTML code [...]
        });
    } 
```

**[这是我的测试环境，您可以在其中看到我当前使用 Firebug 运行的代码。](http://jonathonmoore.com/proto/index2.html)**

这是页面加载后我在 Firebug 中看到的内容：

![在此处输入图像描述](../Images/802697a7c6c5b36dfb72755047b73bec.png)

**编辑：**看起来我的代码中的 Knockout.js 脚本有问题，所以我会调查一下。感谢您对动态脚本的评论和回答。我学到了一些东西:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T17:58:46.867

你试过 jQuery.getScript() 吗？它基本上从服务器加载一个脚本，然后执行它。

```
 $.getScript("yourScript.js", function(){}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:57:22.370

尝试以这种方式添加脚本，我之前在某些浏览器中看到过这个问题。

```
var script = document.createElement( 'script' );
script.type = 'text/javascript';
script.src = script_url;
$("head").append( script ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:12:22.303

根据这里的[jQuery API pages 评论](http://api.jquery.com/append/#comment-58013597)，这种行为是完全正常的，因为 jQuery*在你清理 DOM 之后*

无论您是通过`$.append()`ing 还是使用`$.getScript()`.

但是，加载您的网站至少给了我~~三个~~两个可靠的错误。你可能想研究这些。

错误：

```
ReferenceError: $ is not defined
search.js
Line 54 
```

和

```
TypeError: jQuery is undefined
http://knockoutjs.com/js/jquery.tmpl.js?_=1353351345859
Line 7 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-19T18:32:34.830

如果您的应用程序如此复杂，您应该使用 AngularJS 之类的东西。否则你就是在重新发明轮子。

# asp.net - ClientScript.RegisterStartupScript 不在服务器上工作

> ID：13459340
> 
> 赞同：2
> 
> 时间：2012-11-19T17:50:49.173
> 
> 标签：asp.net, registerstartupscript

我在使用以下代码时遇到问题。它在我的本地机器上运行得非常好，但是当我将它部署到开发服务器时它根本不起作用。我在很多地方搜索了解决方案，但没有成功。

我有一个gridview，其中一列是一个按钮字段。此按钮字段打开一个弹出窗口，显示所选销售订单的详细信息。

为了显示弹出窗口，我使用以下句子：

```
 private void OpenPopup(string name_)
    {
        Page.ClientScript.RegisterStartupScript(typeof(home), "Popup", string.Concat("<script type='text/javascript'>OpenPopup('", name_, "');</script>"));
    } 
```

OpenPopup() 是一个 javascript 函数，它只显示弹出窗口（我已经对其进行了测试，它工作正常，所以我不会显示不必要的代码）：

在我的本地环境中执行 RegisterStartupScript 时，它工作正常，页面源中的结果如下：

```
<script type='text/javascript'>OpenPopup('items');</script> 
```

现在，当我发布站点并将其部署在服务器中时，它根本不起作用。**我已经尝试使用Scriptmanager**使其工作，但结果相同；它在本地工作，但不在服务器中。

根本没有编写添加的脚本。

我真的很喜欢任何形式的帮助。我已经用很多方法搜索了很多，但对我来说没有解决方案......

非常感谢。

/编辑：我不在页面中使用更新面板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:25:09.863

您是否尝试过使用 .RegisterClientScriptBlock？这是我一直用来在代码隐藏中调用 JS 的方法。

你能试试下面的代码吗？

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    Boolean dne = false;
    StringBuilder errorMessage = new StringBuilder();
    String scriptName = "";

    if (AdminAccess.DoesUserExist(txtUsername.Text))
    {
        errorMessage.Append("alert('The selected username " + txtUsername.Text + " is already in use.  Please choose another. ');");
        scriptName = "duplicateUsername";
        if (!ClientScript.IsClientScriptBlockRegistered(scriptName))
        {
            ScriptManager.RegisterClientScriptBlock(this, this.GetType(), scriptName, errorMessage.ToString(), true);
        }
        dne = true;
    } 
```

}

# asp.net-web-api - 没有实体框架的 Web Api 和 Odata

> ID：13459345
> 
> 赞同：3
> 
> 时间：2012-11-19T17:51:06.487
> 
> 标签：asp.net-web-api, odata

当底层数据不是来自实体框架时，我无法让 OData 与 Asp.Net Web Api 一起使用。

我正在使用最新的 OData Nuget 包 ( `Microsoft ASP.NET Web API OData 0.2.0-alpha release`)，但是当我尝试传递 OData 查询（例如`$top=10`）时，我收到错误消息：

> *字典中不存在给定的键*

如果我不发送 OData 查询，我可以很好地调用该方法。同一 Web Api 项目中使用实体框架的其他方法可以很好地处理 OData 查询。一个不起作用的是使用 Subsonic ORM 查询底层 AS400 数据源。它返回一个 IQueryable。在 VS 2012 和 .NET 4.5 RTM 发布并将 OData 移入单独的包之前，这工作得很好。（即使用 VS2012 和 .NET 4.5 的 beta 和 RC 版本）

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:07:22.767

我猜这个问题是由稳定的排序引起的，它不适用于底层查询提供程序。你能把错误的调用堆栈放上去确认吗？

此版本中 OData 查询组合的一个重大变化是它确保在获取顶级项目之前稳定排序。这样做的原因是用户可能有随机数据源，这使得返回数据不断变化。

`OrderyBy [Keys]`web api odata 包的做法是在执行top之前添加查询。或者如果模型中没有定义键（键是 ID、EntityID 或 [Key] 属性属性），它将使用模型中的所有原始属性进行排序。

如果你能确保数据源总是返回有序稳定的数据，你可以通过代码关闭这个特性：

```
[Queryable(EnsureStableOrdering = false)] 
```

# json - 浏览器要求保存文件而不是使用 JSON 结果更新页面的原因

> ID：13459352
> 
> 赞同：2
> 
> 时间：2012-11-19T17:51:29.507
> 
> 标签：json, asp.net-mvc-3

是否有人列出了为什么浏览器会要求保存 JSON 数据文件而不是根据已经存在的功能使用它来更新页面的原因？我让这个工作了一段时间，但突然之间，我做了一些导致它不再工作的事情。我正在使用 asp.net MVC4。

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

如您所见，我已经包含了适当的脚本。

```
@using (Ajax.BeginForm("SearchByDemographic", "SearchPatients", null, new AjaxOptions { HttpMethod = "POST", LoadingElementId = Url.Content("~/Images/ajax-loader.gif"), OnSuccess = "binddata", OnFailure = "FailAlert" }, new { id = "searchByDemographics" })) 
```

如您所见，我使用 Ajax.BeginForm()。

这是我用来返回 JSON 结果的函数

```
 [HttpPost]
    public ActionResult SearchByDemographic(SearchByDemographicModel SearchByDemo)
    {
        string UID = HttpContext.User.Identity.Name;
        DataRepository dr = new DataRepository();
        List<SelectListItem> retVal = dr.SearchByDemographic(SearchByDemo, UID);
        if ((retVal == null) || (retVal.Count < 1))
            return Json("Empty Record: No Patient Found", JsonRequestBehavior.AllowGet);
        else
            if(retVal[0].Text.Contains("Error")){
                return Json(new {success = false, nameError = "General Return Exception"}, DataRepository.searchPatientJSonStr(retVal), JsonRequestBehavior.AllowGet);
            }
            else{
                return Json(DataRepository.searchPatientJSonStr(retVal), JsonRequestBehavior.AllowGet);
            }//return PartialView("_RetTable", Json(DataRepository.searchPatientJSonStr(retVal), JsonRequestBehavior.AllowGet));            
    } 
```

这一直发生在我身上。我不知道为什么会发生这种情况。如果我能弄清楚为什么这种情况不断发生，我将来会更好地解决它。

据我所知，浏览器期待 JSON 数据，不知何故，它没有得到它？
另外，这是传回的测试数据的 JSON ......如果有点不对，请原谅我，我试图从 20 个列表中得到一个结果......

```
"{\"total\":1,\"page\":1,\"records\":1,\"rows\":[{\"id\":11248971,\"cell\":[\"CRAYON \",\" RED \",\" 1956-03-04 \",\" M \",\" 11248971 \",\" 840006723 \",\" 737452545\"]}]} 
```

![我确实加载了 unobtrusive-ajax](../Images/f5ea6318b1ddbfc01101bc9496900328.png)

我仍然总是得到打开文件的提示。

![我的退货类型](../Images/243a1d322e49dfc590fa0d57c37092ee.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:35:01.327

由于名为“显示友好的 JSON 错误”的配置选项，此行为仅存在于 IE 中，如果它小于某个大小（我似乎记得 200 个字符）而不是正常使用

一个可能的解决方案是使用

```
return Json(result, "text/html"); 
```

这将使 IE 行为正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-02T11:21:00.307

```
 public JsonResult Index()
{
         Models.MyEntities Object = new Models.MyEntities();
        var vperson = Object.Person;
        return Json(vperson, "text/html", behavior:JsonRequestBehavior.AllowGet);
   } 
```

# spring-roo - JSON PUT Spring Roo

> ID：13459361
> 
> 赞同：1
> 
> 时间：2012-11-19T17:51:54.363
> 
> 标签：spring-roo

我已经用 ROO 构建了一个简单的 webapp，并添加了 JSON 支持。POST、GET 和 DELETE 工作正常，但是我发出的任何 PUT 请求都会通过 200 OK 消息得到确认，然后什么也没有发生 - 见下文：

```
**curl -i -X PUT -H "Content-Type: application/json" -H "Accept: application/json" -d '{regexDef:"test99"}' http://myserver:8080/emdr/valuedomains/55

HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: application/json;charset=utf-8
Content-Length: 82
Date: Mon, 19 Nov 2012 17:35:44 GMT
{"datatype":"test22","id":55,"regexDef":null,"unitOfMeasure":"test99","version":0}MacBook-Pro:bin$** 
```

目的是更新 regexDef 字段，但是虽然我从服务器收到 http 200 OK 消息，但应用程序并未按要求更新对象，如返回所示 - regexDef 仍然为空。

作为 ROO 的新手，并且由于所有 JSON 代码都是自动生成的，我不确定在生成文件中的确切位置，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T17:26:33.377

查看控制器中的 updateFromJson 方法。您可以通过单击红色箭头（方面标记）上的右键然后单击 Aspect Declarations -> ... 来达到此方法。我认为您需要使用 STS 才能看到这些。

在这种方法中，我看到了：

```
@RequestMapping(method = RequestMethod.PUT, headers = "Accept=application/json")
public ResponseEntity<String> AthleteController.updateFromJson(@RequestBody String json) { 
```

您可以在这里看到请求映射中没有提及“id”。这意味着您使用错误的路径来调用此方法。此外，您需要将 id 作为 json 有效负载的一部分传递，以便它知道要更新哪个对象。

# extjs - 网格面板工具栏无法渲染文本字段

> ID：13459362
> 
> 赞同：0
> 
> 时间：2012-11-19T17:51:56.953
> 
> 标签：extjs, extjs4, extjs4.1

我想将文本字段添加到网格面板的 tbar 中，但它不起作用。

我尝试使用按钮然后它工作..

此代码不起作用，错误消息说**TypeError: g.el is null**

```
var grid = Ext.create('Ext.grid.Panel', {
...
tbar : [
  {
     xtype : 'textfield',
     name : 'test'
  }
]
}); 
```

但是这段代码有效，

```
var grid = Ext.create('Ext.grid.Panel', {
...
tbar : [
  {
     xtype : 'button',
     text : 'keyword'
  }
]
}); 
```

有谁知道，为什么会这样？

我发现，

它*renderTo : 'tableID'*，但我改为**renderTo : Ext.getBody()**

然后它工作。但是我想把网格放到特定的html元素中，我该怎么办？

[编辑]

我想插入到#listTable，

```
<div id="wrap">
    <table id="listTable"></table>
</div> 
```

我只是试图“包装”然后它工作，

所以我尝试了，**renderTo : 'wrap > listTable'**

但它不起作用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:37:38.090

下面的代码在 4.1.3 中没有任何错误。这可能是您的版本中的错误？您可以在其中一个[API 演示](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel)框中对其进行测试。复制粘贴就行了。`tbar`prop 是 a `dockedItem`that get applied to的简写`top`。传递的数组会自动插入到`toolbar`. 没有更多的事情发生。所以它必须工作

```
Ext.create('Ext.data.Store', {
    storeId:'simpsonsStore',
    fields:['name', 'email', 'phone'],
    data:{'items':[
        { 'name': 'Lisa',  "email":"lisa@simpsons.com",  "phone":"555-111-1224"  },
        { 'name': 'Bart',  "email":"bart@simpsons.com",  "phone":"555-222-1234" },
        { 'name': 'Homer', "email":"home@simpsons.com",  "phone":"555-222-1244"  },
        { 'name': 'Marge', "email":"marge@simpsons.com", "phone":"555-222-1254"  }
    ]},
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.grid.Panel', {
    title: 'Simpsons',
    tbar: [
      {
         xtype : 'textfield',
         name : 'test'
      }
    ],
    store: Ext.data.StoreManager.lookup('simpsonsStore'),
    columns: [
        { text: 'Name',  dataIndex: 'name' },
        { text: 'Email', dataIndex: 'email', flex: 1 },
        { text: 'Phone', dataIndex: 'phone' }
    ],
    height: 200,
    width: 400,
    renderTo: Ext.getBody()
}); 
```

**编辑**

**[renderTo](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-cfg-renderTo)**需要一个有效`id`的 HTML 元素或**[Ext.Element](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Element)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:15:36.727

这在 ExtJS 4.1 上对我来说很好，虽然我通常在 initComponent 函数中初始化组件（尽管我不明白为什么它不应该像你那样工作）。所以这将是这样的：

```
initComponent: function() {
    this.dockedItems = [{
        xtype: 'toolbar',
        items: [ {xtype:'textfield', name:'test', value:'test'} ]
    }];
    this.callParent(arguments);
} 
```

# android - 活动确实出现了

> ID：13459365
> 
> 赞同：5
> 
> 时间：2012-11-19T17:52:34.823
> 
> 标签：android, android-activity, viewflipper, oncreate

我有 3 个活动，所有活动都有一个 ViewFlipper，其中一些图像一直在运行。问题是我从 SDCard 加载这些图像，并且大约有 180 张图像。

每次我调用其中一个活动时，ViewFlipper 都需要一些时间才能完成。我想知道 Android 是否有类似 onAppear 之类的东西。每次调用 Activity 时，它的内容都会发生变化，所以它不能成为单任务..

我想知道是否有办法刷新 Activity 内容，但不会丢失其内容。像这样：在 onCreate 上，一切都会正常进行，但在 onAppear 之类的东西上，我只会更改我需要的内容，这样 onCreate 只会被调用一次。

这就是我在三个活动之间进行更改的方式：

```
startActivity(new Intent(FirstOne.this, OtherOne.class)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T18:09:57.183

您可能需要覆盖[onResume()](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:12:14.810

如果您通过编写内存缓存将图像的加载与 Activity 分开，您可以优化将多次使用的图像的加载时间。

# javascript - 使用 Javascript 在 HTML5 时间字段中输入时间

> ID：13459368
> 
> 赞同：4
> 
> 时间：2012-11-19T17:52:36.520
> 
> 标签：javascript, html, time, input

我正在尝试在 JS 中创建一个函数，该函数将`<input type=time>`使用这样的格式填充 html5 `hh:mm:ss`。

```
function timeChange(){
var d = new Date();
d.getHours();
d.getMinutes();
d.getSeconds();

var hours = d.getHours();
var minutes = d.getMinutes();
var seconds = d.getSeconds();

document.getElementById("time_in").value = (....);
} 
```

我不确定如何为此编写 .value 代码。我试过使用`.value = (hours":"minutes":"seconds);`，但这只会给我一个编译错误。

有人有想法吗？我只需要它在 hh:mm:ss 中。

HTML5 代码：

```
 <button type="button" onClick="timeChange()">Time</button>

 <input id="time_in" type="time" name="time_in"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T17:55:27.037

`hours":"minutes":"seconds`不是连接字符串，你需要`+`s：`hours+":"+minutes+":"+seconds`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T02:04:39.993

```
var d = new Date();
// Need to create UTC time of which fields are same as local time.
d.setUTCHours(d.getHours(), d.getMinutes(), d.getSeconds(), 0);
document.getElementById("time_in").valueAsDate = d; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:06:02.113

最简单的方法是从 Date 对象中获取时间字符串：

`var time = (new Date()).toTimeString().split(' ')[0];`

拆分允许我们删除字符串的时区部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T17:58:05.573

```
document.getElementById('time_in').value = hours + ":" + minutes + ":" + seconds; 
```

否则，您不会创建一个连接的字符串。

# java - 从文件中读取，试图只提取一个 int 但得到 InputMismatchException

> ID：13459370
> 
> 赞同：0
> 
> 时间：2012-11-19T17:52:45.793
> 
> 标签：java, file, java.util.scanner

您好，我有一个文本文件，我正在尝试从中读取一组数字，该文件类似于：

```
st:ATTR1 20121011        0        0      127      122      -17 
```

我试图使用扫描仪，使用空格作为分隔符，并读取第一个字符串，其余作为整数。但是每当我尝试运行它时，我都会收到此错误：

```
Exception in thread "main" java.util.InputMismatchException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at prog8.prog8.main(prog8.java:22) 
```

我不确定为什么会这样，因为据我所知，这应该只允许我阅读下一个 int，而不必担心其他字符。

我的代码是：

```
package prog8;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class prog8 {

public static void main(String[] args) {
    File file = new File("files/Weather.txt");
    int date = 0;
    int prcp = 0;
    int snow = 0;
    int snwd = 0;
    int tmax = 0;
    int tmin = 0;

    try {
        Scanner reader = new Scanner(file).useDelimiter(" ");
        while (reader.hasNextLine()) {
            String station = reader.next();
            date = reader.nextInt();
            prcp = reader.nextInt();
            snow = reader.nextInt();
            snwd = reader.nextInt();
            tmax = reader.nextInt();
            tmin = reader.nextInt();
            System.out.printf("station: %s, date: %d, prcp: %d, snow: %d, snwd: %d, tmax: %d, tmin: %d", station, date, prcp, snow, snwd, tmax, tmin);

        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
}
} 
```

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T17:58:12.393

如果您将分隔符设置为单个空格，则不能使用多个空格。

删除`.useDelimiter(" ");`并且您的程序可以正常工作

# node.js - Node.Js 应用程序使用 90% 的 CPU 的原因是什么？

> ID：13459371
> 
> 赞同：0
> 
> 时间：2012-11-19T17:52:58.960
> 
> 标签：node.js, websocket, socket.io

我制作了订阅redis频道的简单通知应用程序，当它有新消息时，这个应用程序将它发送给用户。

```
 client.on("auth", function(sessId, userId){
      console.log('AUTH: userId ' + userId)
      var userIdFromRedis;
      redis1.get('PHPREDIS_SESSION:' + sessId, function (err , reply) {

          if (reply){
              reply = reply.toString();
              var result = reply.match(/s:2:\"id\";i:(\d+);/);

              if (result) {
                  userIdFromRedis = result[1]
                  console.log('AUTH: userIdFromRedis ' + userIdFromRedis)
              } else {
                  result = reply.match(/s:7:\"guestId\";i:(\d+);/); 
                  if (result) {
                      var guestIdFromRedis = result[1]
                      console.log('AUTH: guestIdFromRedis ' + guestIdFromRedis)
                  }
              }

              if (userIdFromRedis == userId) {
                  client.userId = userId;
                  subscribe.subscribe(channelPrefix + userId);
                  clients[userId] = client;
                  client.emit("auth", {"success":true});
                  console.log('AUTH: result - ok')
              } else if (guestIdFromRedis) {
                  client.guestId = guestIdFromRedis;
                  subscribe.subscribe(channelPrefix + guestIdFromRedis);
                  clients[guestIdFromRedis] = client;
                  client.emit("auth", {"success":true});
                  console.log('AUTH: result - ok')
              } else {
                client.disconnect();
                console.log('AUTH: result - fail')
              }
            } else {
              client.disconnect();
            }
      });
  })

  subscribe.on("message", function(channel, message) {
      var userId = Math.round(channel.substr(channelPrefix.length));
      if (client.userId == userId || client.guestId == userId) {
          console.log('Subscriber: ' + message)
          client.send(message);
      }
  });

  client.on("message", function(text){
           client.send(text);
  }) 
```

有时在日志文件中，我可以找到错误消息

> （节点）警告：检测到可能的 EventEmitter 内存泄漏。增加了 11 位听众。使用emitter.setMaxListeners() 增加限制。

而 node.js 应用程序的进程使用了​​ 90% 的 CPU。请建议我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:58:23.887

每当您的客户端连接到您的服务器时，您都会将另一个 EventEmitter 添加到堆栈中。不幸的是，您没有关闭它们，因此您达到了 11 的侦听器限制。您应该追踪添加 eventEmitters 的代码段，然后再声明，如果已经连接了客户端，则不应有任何其他产生的发射器。

# jquery - 同时切换然后淡化图像

> ID：13459377
> 
> 赞同：1
> 
> 时间：2012-11-19T17:53:19.150
> 
> 标签：jquery, html, fading

当用户单击小缩略图时，我希望在同一页面上使用更大的 div 元素来显示该图像。到目前为止，它适用于以下代码：

```
$(document).ready(function () {
    $("img#thumb").click(function () {              //when image with ID thumb is clicked change src 
    var imgpath = $(this).attr("src");
    $("img#cover").attr("src", imgpath);
});

}); 
```

但是，我现在希望旧图像淡出，同时根据用户单击的缩略图切换新图像。我通过让 jQuery 将 src 文件保存到一个变量来跟踪单击的拇指，然后使用`.attr()`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:58:13.993

我猜你的意思是淡出封面图像。

如果是这样，您可以尝试：

```
$("img#cover").fadeOut();
$("img#cover").attr("src", imgpath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:02:55.580

您应该[**关注**](http://api.jquery.com/on)事件而不是jquery 的[**单击**](http://api.jquery.com/click)事件。您甚至可以利用[**直播**](http://api.jquery.com/live)，但现在已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:11:04.987

不确定我是否抓住了您需要的东西，但这应该没问题，请尝试：

```
 $(function(){
        $("img#thumb").bind('click',function () {               
        var img = $(this).clone(); //this clones the img, so you do not need to re-load that using src path
        $(this).fadeOut(500);
        $("img#cover").hide().html(img).fadeIn(500); //remove .hide() segment if you just are hiding by css rules

        });

        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:19:25.260

这是我对您要完成的工作的解释：[DEMO](http://jsfiddle.net/2MPfa/7/)。

**HTML**

```
<img class="thumb" src="/img/logo.png" width="100" />
<img class="thumb" src="http://www.wpclipart.com/sign_language/thumbs_up_large.png" width="100" />

<div class="cover">
    <img id="cover" width="400"/>
    <img id="cover-old" width="400"/>
</div>
​ 
```

**Javascript**

```
$(function() {
    $("img.thumb").on('click', function() { //when image with ID thumb is clicked change src 
        var imgpath = $(this).attr("src");
        $("#cover-old").attr('src', $("#cover").attr('src'));
        $("#cover-old").show();
        $("#cover").hide();
        $("#cover").attr("src", imgpath);
        $("#cover-old").fadeOut('slow');
        $("#cover").fadeIn('slow');
    });
});​ 
```

**CSS**

```
.cover {
    position: relative;

}
.cover img {
    position: absolute;
}
​ 
```

# python - Flask python断言错误：未实现的方法'GET'

> ID：13459378
> 
> 赞同：1
> 
> 时间：2012-11-19T17:53:26.203
> 
> 标签：python, get, flask

有人可以向我解释这两个代码块之间的区别。第一个有效，而后者抛出我在标题中指出的错误。

```
def login_required(method):
@functools.wraps(method)
def wrapper(*args, **kwargs):
    if 'username' in flask.session:
        return method(*args, **kwargs)
    else:
        flask.flash("A login is required to see the page!")
        return flask.redirect(flask.url_for('index'))
return wrapper 
```

和

```
def login_required(method):
@functools.wraps(method)
def wrapper(*args,**kwargs):
    if "username" in flask.session:
        return method(*args,**kwargs)
    else:
        flask.flash("A login is required to see the page!")
        return flask.redirect(flask.url_for('index'))
    return wrapper 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:42:32.243

在第一个代码示例中，您在`wrapper`函数末尾正确地返回了`login_required`函数。

在第二个代码示例中，您已经了解了函数本身的`return wrapper` *内部。*`wrapper`只需去除最后一行，您就应该准备就绪。

# android - 使用多个 AsyncTask 的同时 HttpClient 请求

> ID：13459381
> 
> 赞同：9
> 
> 时间：2012-11-19T17:53:39.643
> 
> 标签：android, multithreading, http, download, httpclient

我正在开发一个需要同时下载多个文件的应用程序。我正在为每个文件创建一个`AsyncTask`自己`HttpClient`的文件，但下一个文件只有在前一个文件完成后才开始下载。

可能是服务器端的问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T17:58:25.873

这是因为 Honeycomb 中的 AsyncTask 管理发生了变化。以前，如果您启动 3 个 AsyncTasks，它们会同时运行。由于 HC，如果您`targetSdk`的设置为`12`或更高，这些将排队并一一执行（请参阅[此讨论](https://groups.google.com/d/msg/android-developers/8M0RTFfO7-M/xVPtz0Ax8ikJ)）。要解决这个问题，请以这种方式启动 AsyncTasks：

```
task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params); 
```

代替：

```
task.execute(params); 
```

如果您还针对较旧的 Android，则需要条件代码：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
   task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
} else {
   task.execute(params);
} 
```

或将其包装在一个单独的辅助类中：

```
public class Utils {

    public static <P, T extends AsyncTask<P, ?, ?>> void executeAsyncTask(T task) {
        executeAsyncTask(task, (P[]) null);
    }

    @SuppressLint("NewApi")
    public static <P, T extends AsyncTask<P, ?, ?>> void executeAsyncTask(T task, P... params) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
        } else {
            task.execute(params);
        }
    }
 } 
```

和用法将是即：

```
Utils.executeAsyncTask( new MyAsyncTask() ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:58:03.650

首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。[资源](http://developer.android.com/reference/android/os/AsyncTask.html)

因此，根据版本，AsyncTask 不会并行执行。对于文件下载等任务，您应该使用[Executor使用线程池](http://developer.android.com/reference/java/util/concurrent/Executor.html)

或者你可以使用[executeOnExecutor](http://developer.android.com/reference/android/os/AsyncTask.html#executeOnExecutor%28java.util.concurrent.Executor,%20Params...%29)方法..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:57:52.753

您似乎[在您的应用程序中共享一个 HttpClient 实例，](http://hc.apache.org/httpclient-3.x/performance.html)并为您的 AsyncTasks 提供自己的方法。顺便说一句，我完全知道该链接适用于旧版本，但该文档似乎没有针对 4.x 进行更新。

# windows-phone-7 - 按下硬件后退按钮时如何强制页面重新加载？

> ID：13459388
> 
> 赞同：1
> 
> 时间：2012-11-19T17:54:27.310
> 
> 标签：windows-phone-7, cordova, jquery-mobile, back-button

我正在使用适用于 Windows Phone 7 的 jQuery Mobile 框架开发一个 Cordova (PhoneGap) 应用程序。我希望在用户点击硬件后退按钮时刷新/重新加载一些页面。我没有使用任何 data-rel="back" 属性。

当用户点击硬件后退按钮时，如何强制重新加载页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:01:01.293

监听[后退按钮事件](http://docs.phonegap.com/en/2.2.0/cordova_events_events.md.html#backbutton)并在那里调用必要的代码。我对 jQuery Mobile 不熟悉，但您似乎可以[`changePage`](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)将`reloadPage`选项设置为`true`.

# asp.net - asp.net 网站不在服务器上运行

> ID：13459391
> 
> 赞同：2
> 
> 时间：2012-11-19T17:54:43.127
> 
> 标签：asp.net, visual-studio, runtime-error

当我尝试在服务器上访问我的 asp.net 网站时遇到运行时错误。当我测试它时，它在我的计算机上运行良好，但是一旦我将它上传到我的主机，就会出现运行时错误。

我收到这条消息：

说明：服务器上发生应用程序错误。此应用程序的当前自定义错误设置可防止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。

详细信息：要在远程计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“关闭”。

```
<!-- Web.Config Configuration File -->

<configuration>
<system.web>
    <customErrors mode="Off"/>
</system.web>
</configuration> 
```

我的虚拟主机是godaddy。该服务器确实是 Windows，根据他们的技术支持，他们安装了所有框架并且是最新的（无论如何我都可以从这么大的主机上想象）。

基本上他们说这是我的错误，但我不知道我做错了什么。我用 Visual Studio 2010 制作了这个网站。我是这项技术的新手。

# objective-c - 是否有知道视图的 useableSize 的功能？

> ID：13459397
> 
> 赞同：0
> 
> 时间：2012-11-19T17:55:09.643
> 
> 标签：objective-c, uinavigationcontroller, uitabbar, xcode4.5

它必须考虑到：

statusBar（如果你有热点，可以是 40 点） TabBar NavigationBar。

基本上在 viewDidLoad 我看到我的视图大小为 320*480。

我想知道iOS在哪里决定将其作为我屏幕的屏幕尺寸。我使用 UIStoryBoard。

所以，在 viewDidLoad 上，我打算调整它的大小。

我什至不确定这是否是正确的方法。

注意：如果我不使用storyBoard，我面临的问题似乎不会发生。

在viewDidLoad，当我使用XIB时，self.view的内容是正确的，即416，而不是480，由于UInavigationController和UITabBar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:05:04.007

尝试覆盖该`UIViewController viewWillLayoutSubviews`方法。届时将设置视图的框架。

在`viewWillLayoutSubviews`方法中，视图控制器的主视图是你需要知道的尺寸。它已针对状态栏和导航栏以及工具栏和标签栏进行了调整。它还考虑了方向。没有一种方法可以让您询问尺寸是多少。此外，没有必要问这样的问题。创建您想要的所有子视图`viewDidLoad`。但是根据视图的大小将它们布置在`viewWillLayoutSubviews`.

# html - 如何更改 CSS 中的滚动条样式？

> ID：13459398
> 
> 赞同：-1
> 
> 时间：2012-11-19T17:55:21.337
> 
> 标签：html, css

> **可能重复：**
> [更改我的站点](https://stackoverflow.com/questions/7645316/change-style-scrollbar-div-for-my-site)
> [css 滚动条样式跨浏览器的样式滚动条 div](https://stackoverflow.com/questions/7725652/css-scrollbar-style-cross-browser)

我想知道如何通过 CSS 更改 Web 滚动条的样式/外观/图像？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:05:38.303

尽管 IE 和 Opera 有这样做的专有方法，但没有标准的 CSS 来执行此操作。原因是您将更改用户的浏览器外观，这不是 CSS 的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:57:17.177

我认为 CSS 不可能（在所有浏览器中）。它可以通过 JavaScript 来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T17:58:17.853

由于不同的浏览器引擎/APIS，无法通过 CSS 执行此操作。但是您可能想使用[jQUERY](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T19:25:37.207

一篇关于如何为 Safari/Chrome 执行此操作的好帖子：http: [//css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/) Internet Explorer 用户不应该得到好的设计，对吧？:P

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-19T17:57:32.520

给你，这个脚本在大多数浏览器中都能很好地降级。

[JqueryScrollpane](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)

# java - 使用 Java 进行 IP 加密

> ID：13459402
> 
> 赞同：3
> 
> 时间：2012-11-19T17:55:53.100
> 
> 标签：java, encryption

我正在尝试在 Netbeans Java 中加密我捕获的 IP 地址，但是当我运行我的表单时，我收到了消息`addr is of illegal length`。为什么我会收到这个错误？

这是代码：

```
if (packet instanceof IPPacket) {

    IPPacket ipp = (IPPacket) packet;
    InetAddress dest = ipp.dst_ip;
    KeyGenerator keygenerator;

    try {
        keygenerator = KeyGenerator.getInstance("DES");
        SecretKey myDesKey = keygenerator.generateKey();
        Cipher desCipher;
        // Create the cipher
        desCipher = Cipher.getInstance("DES/ECB/PKCS5Padding");
        desCipher.init(Cipher.ENCRYPT_MODE, myDesKey);
        byte[] ipEncrypted = desCipher.doFinal(ipp.dst_ip.getAddress());
        InetAddress src = ipp.src_ip;
        //   System.out.println(dest);
        try {
            ipp.dst_ip = InetAddress.getByAddress(ipEncrypted);
        } catch(Exception e) {
             System.out.println(e.getMessage());
        }
        ipp.src_ip = src;
    } catch(Exception ex ) {
        System.out.println(ex.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:06:09.587

因为 DES 输出 8 字节块，而 IPv4 和 IPv6 地址分别需要 4 字节或 16 字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:05:54.497

public static InetAddress getByAddress(byte[] addr) throws UnknownHostException 返回给定原始 IP 地址的 InetAddress 对象。参数按网络字节顺序排列：地址的最高字节在 getAddress()[0] 中。此方法不阻塞，即不执行反向名称服务查找。

IPv4 地址字节数组必须为 4 字节长，IPv6 字节数组必须为 16 字节长

我相信对于 DES，块大小是 8 个字节......所以加密的输出大小是 8 的倍数。你可以通过检查 ipEncrypted 的长度来确认这一点。

# python - 如何测试对象是否可在所有平台上的 python 2.5+ 上迭代？

> ID：13459405
> 
> 赞同：0
> 
> 时间：2012-11-19T17:56:00.150
> 
> 标签：python, collections, python-2.5, iterable

我发现在带有 Python 2.5.5 的 Debian 上，该`collections`模块没有`Iterable`类。

示例： http: [//python.codepad.org/PxLHuRFx](http://python.codepad.org/PxLHuRFx)

使用 Python 2.5.6 在 OS X 10.8 上执行的相同代码可以正常工作，因此我认为由于某种原因缺少此代码。

我必须让我的代码在所有 Python 2.5+ 上通过什么解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T17:57:45.607

我会检查对象是否`__iter__`定义了函数。

所以`hasattr(myObj, '__iter__')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:06:37.410

这有效：

```
def f(): pass
import sys  
results={'iterable':[],'not iterable':[]}

def isiterable(obj):
    try:
        it=iter(obj)
        return True
    except TypeError:
        return False

for el in ['abcd',[1,2,3],{'a':1,'b':2},(1,2,3),2,f,sys, lambda x: x,set([1,2]),True]:
    if isiterable(el):
        results['iterable'].append('\t{}, a Python {}\n'.format(el,type(el).__name__))
    else:   
        results['not iterable'].append('\t{}, a Python {}\n'.format(el,type(el).__name__))

print 'Interable:'
print ''.join(results['iterable'])

print 'Not Interable:'
print ''.join(results['not iterable']) 
```

印刷：

```
Interable:
    abcd, a Python str
    [1, 2, 3], a Python list
    {'a': 1, 'b': 2}, a Python dict
    (1, 2, 3), a Python tuple
    set([1, 2]), a Python set

Not Interable:
    2, a Python int
    <function f at 0x100492d70>, a Python function
    <module 'sys' (built-in)>, a Python module
    <function <lambda> at 0x100492b90>, a Python function
    True, a Python bool 
```

[这在这个 SO 帖子](https://stackoverflow.com/a/1952481/455276)中得到了更充分的探讨。

# php - Wordpress WP_Query 'orderby' 不工作

> ID：13459410
> 
> 赞同：6
> 
> 时间：2012-11-19T17:56:47.777
> 
> 标签：php, sql, wordpress

我的查询没有使用该`orderby`参数对我的帖子进行排序。

一点背景：

我在一个 foreach 语句中，该语句循环遍历“类别”ID 的自定义分类。在该 foreach 语句中，我试图调用一个新的 WP_Query 从该 foreach 循环的每个“类别”中获取帖子。我的 args 数组如下：

```
$args = array(
    'post_type' => 'wpsc-product',
    'post_status' => 'publish',
    'showposts' => -1,
    'tax_query' => array(
        array(
            'taxonomy' => 'wpsc_product_category',
            'field' => 'term_id',
            'terms' => $cat_id,
        ),
        array(
            'taxonomy' => 'series',
            'field' => 'slug',
            'terms' => $series_name
        )
    ),
    'orderby' => 'title',
    'order' => 'DESC'
); 
```

`$cat_id`并且`$series_name`都是我在这个 post_type 中的自定义分类法中的数组。

`orderby`并且`order`根本不工作，我不知道为什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T19:10:41.883

我已经在我的测试博客上检查了你的代码。它按预期工作。所以参数

```
'orderby' => 'title',
'order' => 'DESC' 
```

你设置正确。

在这种情况下，您可以检查 SQL 请求。

```
$query = new WP_Query($args);
var_dump($query->request); 
```

# java - Java字符串到字节的转换问题

> ID：13459411
> 
> 赞同：3
> 
> 时间：2012-11-19T17:56:48.880
> 
> 标签：java, string, bytearray, ascii

我有一些测试代码没有按预期工作，在查看了各种站点和规范之后，我仍然无法弄清楚发生了什么。

这是我的测试代码：

```
byte[] b = new byte[8];
b[0] = (byte)0x72;
b[1] = (byte)0x3A;
b[2] = (byte)0x60;
b[3] = (byte)0x01;
b[4] = (byte)0x0E;
b[5] = (byte)0x10;
b[6] = (byte)0x8A;
b[7] = (byte)0x11;
String bitmapStr = new String(b);
try {
    b = bitmapStr.getBytes("US-ASCII");
} catch (Exception ex) {
    ex.printStackTrace();
}
System.out.println("DEBUG: bitmapStr = \"" +bitmapStr + "\"");
for (int i=0; i<=7; i++) {
    int byte1 = b[i];
    System.out.println("byte"+i + ": " + Integer.toHexString(byte1));
} 
```

当我运行程序时，我在控制台输出中得到以下信息：

```
DEBUG: bitmapStr = "r:`�"
byte0: 72
byte1: 3a
byte2: 60
byte3: 1
byte4: e
byte5: 10
byte6: 3f
byte7: 11 
```

看看我的字节数组中的 byte6 即 b[6] 如何输出 0x3F，但它应该是 0x8A。

任何想法为什么？

顺便说一句，如果我使用 UTF-8 编码，我会得到更时髦的输出（尽管 ASCII 是正确的）。

UTF-8 字符串编码输出：

```
byte0: 72
byte1: 3a
byte2: 60
byte3: 1
byte4: e
byte5: 10
byte6: ffffffef
byte7: ffffffbf 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:00:55.753

尝试另一种形式的 String 构造函数：

```
String bitmapStr = new String(b,"ISO-8859-1"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:01:17.173

尝试像这样将字符串更改为字节：-

```
 String source = "2675326";
 byte[] byteArray = source.getBytes("UTF-16LE"); 
```

或将您的代码更改为：-

```
 String bitmapStr = new String(b,"US-ASCII"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:15:54.710

您正在强制十六进制变为字节（8位）。这称为强制转换，您不能这样做。您注意到所有值都有良好的输出`except when 0xYZ where Y >=8 !` ，除非您确定不会丢失信息，否则不要使用强制转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:35:50.367

根据 Rahul 和不受欢迎的建议，我想通了：

当我更改为 UTF-16LE / ISO-8859-1 编码时，byte6 输出为：“ffffff8a”，然后我意识到我在这里执行了从 byte 到 int 的类型转换：

```
int byte1 = b[i]; 
```

所以我只是补充说：

```
int byte1 = b[i] & 0xFF; 
```

为正确的结果。

# iphone - 我在 Xcode 4.5.2 中收到“弃用”警告

> ID：13459412
> 
> 赞同：0
> 
> 时间：2012-11-19T17:56:52.017
> 
> 标签：iphone, ios, xcode

```
NSURL *jsonURL = [NSURL URLWithString:@"http://ambiguous.dubbelzinnig.com/index.php?    get_cat=1"];

NSString *jsonData = [[NSString alloc] initWithContentsOfURL:jsonURL];

if (jsonData == nil) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Webservice Down" message:@"The webservice you are accessing is down. Please try again later."  delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
    [alert show];
    [alert release];
}
else {... 
```

似乎需要更改 initWithContentsOfURL ，但我已经尝试了开发人员指南中所说的内容，但我无法让它工作......有人可以修复这个代码吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T17:59:21.047

使用`initWithContentsOfURL:encoding:error:`或`initWithContentsOfURL:usedEncoding:error:`代替。

例如：

```
NSURL *jsonURL = [NSURL URLWithString:@"http://ambiguous.dubbelzinnig.com/index.php?get_cat=1"];
NSError *error = nil;
NSString *jsonData = [[NSString alloc] initWithContentsOfURL:jsonURL encoding:NSUTF8StringEncoding error:&error];
if( error == nil ) {
    // Parse jsonData
} else {
    // There was a problem
} 
```

您需要将编码值替换为实际编码类型的枚举。NSString 类中有许多用于此目的的枚举......请参阅“字符串编码”部分：[https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/参考/NSString.html](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:03:48.323

你为什么不看一下[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/NSString/initWithContentsOfURL%3a)？

> **initWithContentsOfURL:**
> 
> 通过从给定 URL 命名的位置读取数据来初始化接收器，一个新分配的 NSString 对象。（在 OS X v10.4 中已弃用。使用 **initWithContentsOfURL:encoding:error:**或 **initWithContentsOfURL:usedEncoding:error:**代替。）

# c++ - 为函数加好友时出错

> ID：13459419
> 
> 赞同：0
> 
> 时间：2012-11-19T17:57:30.283
> 
> 标签：c++, visual-studio-2010

我试图通过将某些函数声明为朋友来解决自定义 Qt 元类型的默认 ctor 必须是公共的限制。

```
#include <QMetaType>

class QVariant;
template<typename T> inline T qvariant_cast(const QVariant &); // from qvariant.h

namespace foo
{
  class Bar
  {
  private:
    Bar(){};
    friend void *::qMetaTypeConstructHelper<Bar>(const Bar *t); // works
    friend inline Bar ::qvariant_cast<Bar>(const ::QVariant &v); // error C4430: missing type specifier
  };
} // namespace foo

Q_DECLARE_METATYPE(foo::Bar)

void main()
{
  QVariant v;
  v.value<foo::Bar>();
} 
```

注释掉标记的行时，出现以下错误，这是预期的：

```
1>[...]\qvariant.h(577): error C2248: 'foo::Bar::Bar' : cannot access private member declared in class 'foo::Bar' 
```

但是将函数声明为朋友不起作用：

```
Bar.cpp(13): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

似乎 MSVC 2010 没有看到“Bar”和“::”之间的空格。

除了公开默认的ctor之外，我怎样才能让它编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:02:48.987

> 似乎 MSVC 2010 没有看到“Bar”和“::”之间的空格。

空格无关紧要，`::`含义`foo::bar`与`foo ::bar`.

尝试在函数名称周围添加括号：

```
friend inline Bar (::qvariant_cast<Bar>)(const ::QVariant &v); 
```

# backbone.js - 骨干路由器混淆如何触发

> ID：13459427
> 
> 赞同：0
> 
> 时间：2012-11-19T17:58:04.127
> 
> 标签：backbone.js, coffeescript

我似乎无法让主干路由器以预期的方式工作。我 i) 实例化我的路由器，然后 ii) 调用 Backbone.history.start( { pushState: true, root: '/' } )。使用下面的代码...

*   1) 转到“/dashboard”或“/grid”，定义的函数不被调用
*   2) 当我调用 myrouter.navigate("grid") 时，未调用定义的函数
*   **) 但是，如果我随后返回或向前浏览历史记录，则会调用定义的函数。

```
 Router : Backbone.Router.extend

        routes:
          "dashboard":                  "dashboard"
          "grid/:storyid":              "grid"

        dashboard: ->
          console.log("...")

        grid: (storyid) ->
          console.log("...") 
```

我需要做什么才能让案例 1) 和 2) 正常工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T20:19:53.973

您的路由器工作正常。我认为你对它如何工作以及为什么工作的期望是错误的。

> 1) 转到“/dashboard”或“/grid”，定义的函数不被调用

当您在浏览器的 URL 栏中键入“/dashboard”或“/grid”时，您的浏览器会向您的服务器发出请求以获取该 URL。这绕过了路由器，因为浏览器正在向服务器发出请求。

在浏览器的 URL 输入中键入 URL 不会从服务器请求新页面的唯一情况是，当您仅修改哈希片段时：“#whatever”。

> 当我调用 myrouter.navigate("grid") 时，未调用定义的函数

的默认行为`router.navigate`是使用适当的路由更新 URL，但不是由路由器处理的路由 - 正是您所描述的。

如果要强制浏览器处理路由更改，请`true`作为第二个参数传递：`myrouter.navigate("grid", true)`

> **) 但是，如果我随后返回或向前浏览历史记录，则会调用定义的函数。

这是因为路由器已经使用浏览器历史 API 注册了自己，并且在浏览器返回服务器以获取请求的 URL 之前，有机会处理由 fwd / back 按钮引起的 URL 更改。

# powershell - 使用 cmdets 将文件上传到 Azure 上的存储

> ID：13459439
> 
> 赞同：6
> 
> 时间：2012-11-19T17:58:39.657
> 
> 标签：powershell, azure

我正在尝试使用 powershell 将图像上传到 Azure 存储。阅读[他们的文档](http://msdn.microsoft.com/en-us/library/windowsazure/jj156055.aspx)似乎支持它（我找不到如何做的参考）。这似乎是一个相当核心的功能，有什么遗漏吗？谁能把我链接到一个例子？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-03T07:06:10.190

Windows azure powershell 中有一个**Set-AzureStorageBlobContent** cmd。

```
Set-AzureStorageBlobContent -Container upload -File .\filename -Blob blobname 
```

详情请参考[http://msdn.microsoft.com/en-us/library/dn408487.aspx](http://msdn.microsoft.com/en-us/library/dn408487.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-19T18:27:39.783

与当前的 cmdlet 不同，“已停用”的 Windows Azure PowerShell Cmdlets 项目确实支持对 blob 存储的操作：

*   `Add-Blob`：将 blob 上传到 Windows Azure blob 存储中的指定容器。
*   `Clear-Container`：从 Windows Azure blob 存储中的一个或多个容器中删除 blob。
*   `Get-Container`：获取指定存储帐户中的 blob 容器。
*   `Save-Container`：从 Windows Azure blob 存储中的一个或多个容器下载 blob，并将它们保存到本地磁盘。

它仍然可以[在 CodePlex 上](http://wappowershell.codeplex.com/releases/view/84058)下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T12:32:17.210

在撰写本文时，受支持的[Windows Azure Powershell 下载](https://www.windowsazure.com/en-us/downloads/?fb=en-us)现在具有 blob 命令行开关。

这是[执行异步并行 blob 上传的演练](http://michaelwasham.com/2013/03/27/windows-azure-powershell-cmdlets-now-supports-storage/)。

但你真的想安装 Windows Azure Powershell 然后`man blob`

# iphone - 使用 Facebook Open Graph 发布故事时出错

> ID：13459442
> 
> 赞同：1
> 
> 时间：2012-11-19T17:59:02.657
> 
> 标签：iphone, objective-c, ios, facebook

我正在尝试发布一个故事，但 Open Graph 向我返回此错误：domain = com.facebook.sdk, code = 5

我使用这些权限：

```
 [NSArray arrayWithObjects: @ "status_update" @ "publish_actions" @ "publish_stream" @ "user_likes" @ "create_event", nil]; 
```

我用来创建历史的代码：

```
NSMutableDictionary * item = [FBGraphObject graphObject];      
[Item setObject: @ "http://mysite.com.br/cardapio/6/burger-de-carne" forKey: @ "object"];

NSMutableDictionary * action = (<FBOpenGraphAction> NSMutableDictionary *) [FBGraphObject graphObject];
 [Action setObject: item forKey: @ "Like"];

  [FBRequestConnection startForPostWithGraphPath: @ "me/og.like" graphObject: action  completionHandler: ^ (* FBRequestConnection connection,   id result,  NSError * error)
 {  NSString * alertText;

                              if(! error) 
                             { alertText = [NSString stringWithFormat: @ "Open Graph Posted action, id:% @", [Result objectForKey: @ "id"]]; 
                              Else { 
                                     alertText = [NSString stringWithFormat: @ "error:% @ domain =, code =% d",  error.domain, error.code];  }

 [[[UIAlertView alloc] initWithTitle: @ "Result"  message: alertText delegate: nil  cancelButtonTitle: @ "Thanks!"  otherButtonTitles: nil]  show];
  }]; 
```

# php - 如何减少 PHP 中表单验证的嵌套？

> ID：13459444
> 
> 赞同：0
> 
> 时间：2012-11-19T17:59:16.167
> 
> 标签：php

这是功能在我的功能页面上占用了很多行。

`foreach`除非将它们放入数组中，然后使用循环，否则我无法弄清楚如何将其取下来。但我希望它具体说明不允许为空白的内容。

```
if ($EmployeeID === "")
{
  echo "EmployeeID Is Blank.";

}
else
{
  if ($Firstname === "")
  {
    echo "Firstname Is Blank.";
  }
  else
  {
    if ($Lastname === "")
    {
      echo "Last Name Is Blank";

    }
    else
    {
      if ($PhoneNumber === "")
      {
        echo "Phone Number Is Blank";

      }
      else
      {
        if ($Address === "")
        {
          echo "Address Is Blank";

        }
        else
        {
          if ($City === "")
          {
            echo "City Is Blank";

          }
          else
          {
            if ($State === "")
            {
              echo "Sate Is Blank";

            }
            else
            {
              if ($Zip === "")
              {
                echo "Zip Is Blank";

              }
              else
              {
                if ($Email === "")
                {
                  echo "Email Is Blank";

                }
                else
                {
                  if ($Password === "")
                  {
                    echo "Password Is Blank";

                  }
                  else
                  {
                    echo "All Success";
                  }
                }
              }
            }
          }
        }
      }
    }
  }
} 
```

我找到的解决方案将行记下来，但没有给我确切的关于哪个字段留空的信息是：

```
$Array = array();
$Array[] = $EmpID;
$Array[] = $FirstName;
$Array[] = $Lastname;
$Array[] = $PhoneNumber;
$Array[] = $Address;
$Array[] = $City;
$Array[] = $State;
$Array[] = $Zip;
$Array[] = $Email;
$Array[] = $Password;   
foreach ($Array AS $Checking) 
{
  if (empty($Checking))
  {
    echo "One Or More Is Left Blank"; 
    exit;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:03:32.260

```
try{
    if(empty($EmployeeID)){
        throw new Exception('EmployeeID Is Blank.');
    }elseif(empty($Firstname)){
        throw new Exception('Firstname Is Blank.');
    }elseif(empty($Lastname)){
        throw new Exception('Lastname Is Blank.');
    }elseif(empty($PhoneNumber)){
        throw new Exception('PhoneNumber Is Blank.');
    }elseif(empty($Address)){
        throw new Exception('Address Is Blank.');
    }elseif(empty($City)){
        throw new Exception('City Is Blank.');
    }elseif(empty($State)){
        throw new Exception('State Is Blank.');
    }elseif(empty($Zip)){
        throw new Exception('Zip Is Blank.');
    }elseif(empty($Email)){
        throw new Exception('Email Is Blank.');
    }elseif(empty($Password)){
        throw new Exception('Password Is Blank.');
    }
    echo 'All Success';
}catch(Exception $e){
    echo $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T18:06:18.227

也许你可以像这样重新组织它：

```
$messages = array();

if (empty($EmployeeID)){
    $messages[] = "EmployeeID Is Blank."; 
}
if (empty($Firstname)){
    $messages[] = "Firstname Is Blank."; 
}

// and so on for the rest. 
```

最后，您可以检查是否`$messages`为空来验证：

```
if (empty($messages)){
    echo "All Success";
}else {
   echo "Errors:";
   foreach($messages as $message){
       echo "$message <br>";
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T18:05:21.520

你为什么要使用这些`else`陈述？我会一次显示所有错误以避免打扰用户（用户修复了错误，然后突然弹出另一个错误......）。

一个简单的例子：

```
echo empty($EmployeeID) ? 'EmployeeID Is Blank.' : '';
echo empty($Firstname) ? 'Firstname Is Blank.' : '';
//etc. 
```

我可能会将所有错误消息添加到数组并循环遍历该数组/检查它是否为空：

```
$errors = array();

if (empty($EmployeeID))
{
  $errors['employeeid'] = 'EmployeeID Is Blank.';
}
if (empty($Firstname))
{
  $errors['firstname'] = 'Firstname Is Blank.';
}
// etc.

if (count($errors) > 0)
{
  // error handling
}

// and you can use the array keys to display the appropriate messages at the appropriate place if it is set:
if (isset($errors['employeeid']))
{
  // display the EmployeeID error message where the field should be filled in
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T18:16:30.347

您可以使用这样的[关联数组](http://php.net/manual/en/language.types.array.php)：

```
$formValues = array(
  'Employee ID' => $EmployeeID,
  'First Name' => $Firstname,
  'Last Name'=> $Lastname,
  'Phone Number'=> $PhoneNumber,
  'Address'=> $Address,
  'City'=> $City,
  'State'=> $State,
  'Zip'=> $Zip,
  'Email'=> $Email,
  'Password'=> $Password,
);
$error=false;

foreach ($formValues as $key => $value) {
  if(empty($value)) {
    echo($key.' is blank');
    $error=true;
  }
}
if(!$error) {
  echo("All Success");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T18:03:05.860

将其全部包含在表单验证器中：

```
<?php
  function is_form_valid() {
    if ($Firstname === "") { return false; }
    if ($Lastname === "") { return false; }
    // ...

    return true;
  }
?> 
```

当然，这只是强调了这个想法，您需要确定传递表单字段的最佳方法。然后将其用作主处理例程中的单个调用：

```
<?php

  if (is_form_valid()) {
    // do stuff
  } else {
    // report error
  }
?> 
```

为了使它更有用，您可以为名称字段、电子邮件等中的有效输入创建一个共享类，并从您的表单验证中调用它。想象这样一个类存在，您的方法将如下所示：

```
<?php
  function is_form_valid() {
    if (! $validator->is_valid_name($Firstname)) { return false; }
    if (! $validator->is_valid_name($Lastname)) { return false; }
    if (! $validator->is_valid_email($Email)) { return false; }
    if (! $validator->is_valid_phone($Phone)) { return false; }
    // ...

    return true;
  }
?> 
```

[请注意姓名、电话号码、地址等方面的许多地区差异。您可以在此处](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)阅读常见陷阱。这个论坛上还有几个关于数据验证主题的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-19T18:03:33.373

```
$errors = "";

if($EmployeeID == "")
{
    $errors .= "Employee ID blank<br />";
}

if($Firstname == "")
{
    $errors .= "First Name blank<br />";
}

if($errors != "")
{
    echo $errors;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-19T18:30:48.980

大多数其他答案都更好，但你也应该学会使用`elseif()`：

```
if ($EmployeeID === "") {
    echo "EmployeeID Is Blank.";
} elseif ($Firstname === "") {
    echo "Firstname Is Blank.";
} elseif ($Lastname === "") {
    echo "Last Name Is Blank";
} //etc 
```

# javascript - 带有自动破折号的 Javascript

> ID：13459445
> 
> 赞同：0
> 
> 时间：2012-11-19T17:59:18.783
> 
> 标签：javascript

我目前使用下面的脚本来获取任何形式的信息并提取数字来制作一个带有破折号的电话号码。但是，如果我不小心单击了该字段，即使没有粘贴或键入任何内容，它也会在其中放置两个破折号。JS 是否有办法说只有在粘贴某些内容时才添加破折号？这很痛苦的原因是我有 2 个搜索字段，如果我想使用一个，另一个必须是空白的。因此，如果其中有 2 个破折号，我必须将它们删除并在同一字段中按 Enter 键，否则它将再次添加它们。

感谢您提供的任何帮助。

```
<SCRIPT LANGUAGE="JavaScript">
    function addDashes(f)
    {
        f.value = f.value.replace(/\D/g, '');
        f.value = f.value.slice(0,3)+"-"+f.value.slice(3,6)+"-"+f.value.slice(6,15);
    }
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:26:52.967

我会用这样的东西：

```
function addDashes(f) {
    f.value = f.value.replace(/(\d{3})-?(\d{3})-?(\d{9})/, '$1-$2-$3');
} 
```

只有当你有 15 位数字时它才会起作用（可能已经有破折号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:04:19.420

我不太确定这是否是您需要的，但这只是在格式化之前检查是否确实存在某些东西：

```
function addDashes(f)
{
    var oldVal = f.value.replace(/\D/g, '');
    if (oldVal.length) {
        f.value = oldVal.slice(0,3) + "-" + oldVal.slice(3,6) + "-" + oldVal.slice(6,15);
    }
} 
```

**编辑：**

根据您的评论，我认为提出验证可能会有所帮助。我不确定你是否在服务器端做任何事情来确保它是一个有效的电话号码，但是做一些验证可能会有所帮助，所以如果用户刚刚输入了一些，你就不要添加破折号空格。

首先，我会在您检查长度之前删除非数字值。我已经更新了上面的代码来做到这一点。

接下来，我会检查一些长度。如果数字长度至少为 9 位，您可能只想添加破折号。您可以决定要检查的长度。在这种情况下，您将添加：

```
if (oldVal.length >= 9) { ... 
```

这完全取决于您是否/如何验证此字段。

# c# - 我是否需要考虑处置任何 IEnumerable 我用？

> ID：13459447
> 
> 赞同：77
> 
> 时间：2012-11-19T17:59:23.943
> 
> 标签：c#, linq, ienumerable, dispose

最近有人向我指出，各种 Linq 扩展方法（例如`Where`,`Select`等）返回的 an`IEnumerable<T>`也恰好是`IDisposable`. 以下评估为`True`

```
new int[2] {0,1}.Select(x => x*2) is IDisposable 
```

我需要处理`Where`表达式的结果吗？

每当我调用一个方法时`IEnumerable<T>`，我是否（可能）在我完成后接受调用 dispose 的责任？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-11-19T18:02:27.153

不，你不需要担心这个。

他们返回一个实现的事实`IDisposable`是一个实现细节 - 这是因为 C# 编译器的 Microsoft 实现中的迭代器块碰巧创建了一个实现和的*单一*类型。后者 extends ，这就是你看到它的原因。`IEnumerable<T>``IEnumerator<T>``IDisposable`

示例代码来证明这一点：

```
using System;
using System.Collections.Generic;

public class Test 
{
    static void Main() 
    {
        IEnumerable<int> foo = Foo();
        Console.WriteLine(foo is IDisposable); // Prints True
    }

    static IEnumerable<int> Foo()
    {
        yield break;
    }
} 
```

请注意，您*确实*需要注意`IEnumerator<T>`实现`IDisposable`. 所以任何时候你明确地迭代，你都应该正确地处理它。例如，如果你想迭代某些东西并确保你总是有*一个*值，你可以使用类似的东西：

```
using (var enumerator = enumerable.GetEnumerator())
{
    if (!enumerator.MoveNext())
    {
        throw // some kind of exception;
    }
    var value = enumerator.Current;
    while (enumerator.MoveNext())
    {
        // Do something with value and enumerator.Current
    }
} 
```

（`foreach`当然，循环会自动执行此操作。）

# php - preg_replace 用于 html 标记

> ID：13459451
> 
> 赞同：0
> 
> 时间：2012-11-19T17:59:35.197
> 
> 标签：php, regex, preg-replace

我有这 2 个字符串并想将其更改为 html 标签

```
1 : bq. sometext /* bq.+space+sometext+space or return 
```

在此字符串中。我想将其转换为以 bq.+space 开头并以空格结尾或返回的字符串

```
<blockquote author="author" timestamp="unix time in secs">sometext</blockquote> 
```

在这个字符串中

```
2:  [quote author="author" date="unix time in secs"]
    some text
    [/quote] /* start with [qoute and get the text of author property then get
                sometext form between ']' and '[/qoute] 
```

我想将它们转换为：

```
<blockquote author="author" timestamp="unix time in secs">sometext</blockquote> 
```

这个正则表达式不起作用！：

```
#\bq(.| )(.*?)\n# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:07:58.977

你的逃跑有点混乱。转义`b`使其成为单词边界。不逃避`.`使其成为任意字符，并且`.`交替放置和空格意味着“要么......要么......”。这个正则表达式应该照顾你的第一个例子：

```
$str = preg_replace(
    '#bq\. (\S+)#',
    '<blockquote author="author" timestamp="unix time in secs">$1</blockquote>',
    $str
); 
```

如果有人用`quote`标记嵌套它，第二个会给你带来麻烦。但是假设 and 之间没有其他的`quotes`，你可以使用这样的东西：`[quote...]``[/quote]`

```
$str = preg_replace(
    '#\[quote(?=[^\]]*author="([^"]*))(?=[^\]]*timestamp="([^"]*))[^\]]*\](.*?)\[/quote\]#s',
    '<blockquote author="$1" timestamp="$2">$3</blockquote>',
    $str
); 
```

这使用两个[前瞻](http://www.regular-expressions.info/lookaround.html)来查找属性并在捕获组`$1`和捕获它们的值`$2`。所有这些都没有推进字符串中的实际位置。前瞻的好处是它独立于两个属性中的一个。然后我们匹配其余的开始标签，然后尽可能少地捕获 ( `.*?`) 直到遇到`[/quote]`.

[工作演示。](http://ideone.com/Kdq8su)

# ruby-on-rails - Rails 3 + angularjs + minification 在生产中不起作用：未知提供者：eProvider

> ID：13459452
> 
> 赞同：22
> 
> 时间：2012-11-19T17:59:34.807
> 
> 标签：ruby-on-rails, angularjs, assets, production, minify

我已经按照我能找到的所有说明来修复缩小，例如

```
var MyController = function(renamed$scope, renamedGreeter) {
...
}
MyController.$inject = ['$scope', 'greeter']; 
```

和

```
someModule.factory('greeter', ['$window', function(renamed$window) {
...;
}]); 
```

然而角度仍然拒绝工作。它总是抛出错误“未知提供者：eProvider”

这是我让它工作的两次尝试......有人可以帮忙吗？

[https://github.com/jemminger/angular-test1](https://github.com/jemminger/angular-test1)

[https://github.com/jemminger/angular-test2](https://github.com/jemminger/angular-test2)

他们已经对资产进行了预编译，并且将开发模式配置为生产模式，因此您应该能够“rails s”来查看它（不）工作。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-19T18:19:12.560

找到了！他们从未说过将注入修复程序也应用于服务......解决方案是改变这一点：

```
angular.module('itemServices', ['ngResource']).
    factory('Item', function($resource){
      return $resource('items/:item_id.json', {}, {
        query: {method:'GET', params:{ item_id: 'all' }, isArray:true}
      });
    }); 
```

对此：

```
angular.module('itemServices', ['ngResource']).
    factory('Item', ['$resource', function($resource){
      return $resource('items/:item_id.json', {}, {
        query: {method:'GET', params:{ item_id: 'all' }, isArray:true}
      });
    }]); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-04T16:52:29.283

请记住，还要在指令中的控制器上使用 DI。花了我几个小时...... CS示例：

错误的：

```
controller: ($scope) ->
  $scope.closeModal = ->
    ModalService.close() 
```

对：

```
controller: ["$scope"
  ($scope) ->
    $scope.closeModal = ->
      ModalService.close()
] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-13T20:50:22.063

确保将 DI 模式应用于需要在模块中注入的*所有*函数定义。很容易错过一个。如果您使用的是 routeProvider、工厂、服务等，它们都需要应用 DI 模式。我最终部署了多次，然后才全部抓到：P

# jquery - 带逗号的数字和不带逗号的数字之间的表格排序器格式问题

> ID：13459456
> 
> 赞同：0
> 
> 时间：2012-11-19T17:59:50.107
> 
> 标签：jquery, tablesorter

我有一个价格字段和一个总额字段：价格字段的值为 0.9999900 或 0.9000000 总额可以是 10,000.00 或 1,000,000.00。我正在使用 tablesorter 库对表格进行排序。

问题是如果我像下面这样设置 s （总量排序工作正常）

```
s=s.replace(new RegExp(/[^0-9\/A-Za-z ]/g),""); 
```

如果我设置如下（价格排序工作正常）

```
s=s.replace(new RegExp(/[^0-9\/A-Za-z. ]/g),""); 
```

但我不能让两者同时工作。我错过了什么：

```
ts.addParser({
    id: "digit",
    is: function(s,table) {
        var c = table.config;
        s=s.replace(new RegExp(/[^0-9\/A-Za-z ]/g),"");
        return $.tablesorter.isDigit(s,c);
    },
    format: function(s) {
        return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9\/A-Za-z ]/g),""));
    },
    type: "numeric"
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:00:01.857

**我找到了围绕不同列的工作：**

1）我在tablesorter中将两列都指向不同的功能，这样我就可以让价格和总量都以自己的方式工作。

在 tablesorter 下，我将标题修改为总金额列的数字和“总金额”列的千位。

```
headers: {8: { sorter: 'digit' },13: { sorter: 'thousands' }} 
```

其中 8, 13 是我表上的列号。

2）对于“总金额”第 8 列，我使用了 id:digits

3）对于“价格”第 13 列，我使用了自定义解析器 ID：“千”

**两者的 Tablesorter 代码都包含在下面**

**id: "digit"-->Tablesorter 库中的现有代码**

```
ts.addParser({
    id: "digit",
    is: function(s,table) {
        var c = table.config;
        s=s.replace(new RegExp(/[^0-9\/A-Za-z ]/g),"");
        return $.tablesorter.isDigit(s,c);
    },
    format: function(s) {
        return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9\/A-Za-z ]/g),""));
    },
    type: "numeric"
}); 
```

**id: 'thousands'--> 自定义表排序器添加到表排序器库中。**

```
ts.addParser({ 
    id: 'thousands',
    is: function(s) { 
        return false; 
    }, 
    format: function(s) {
        return s.replace(new RegExp(/[^0-9\/A-Za-z. ]/g),"");
    }, 
    type: 'numeric' 
});

$(function() {
    $("table").tablesorter({
        headers: {
            6: {//zero-based column index
                sorter:'thousands'
            }
        }
    });
}); 
```

# z3 - 测试 Z3 的（完整）实例化策略

> ID：13459457
> 
> 赞同：1
> 
> 时间：2012-11-19T17:59:53.967
> 
> 标签：z3, smt

我有兴趣测试 [1] 中讨论的决策/实例化过程（包括其实施）的“实际”影响。

我需要：

1) 一个“工具”，它采用 SMT 基准并返回它的（可能完整的）实例化版本，应用该策略。如果这是不可能的，

2) Z3 版本实现了这个策略和一个打开和关闭它的选项。

你能帮我吗？

[1] Satisfiabiliby Modulo Theories 中量化公式的完整实例化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:15:15.137

据我所知，没有工具可以返回 SMT 基准测试的实例化版本。Z3 使用 [1] 第 6 节中描述的基于模型的量词实例化 (MBQI) 按需实例化量词。最新 Z3 中的实际循环比本节中描述的更复杂。

以下是有关如何启用/禁用 MBQI 模块的一些说明。

*   首先，我们应该使用命令禁用自动配置

> （设置选项：自动配置假）

*   Z3 4.x 使用 MBQI 和 E-Matching 来处理量词。我们应该使用以下命令来禁用它们：

> ```
> (set-option :ematching false)
> (set-option :mbqi false) 
> ```

*   要启用它们，我们应该使用：

> ```
> (set-option :ematching true)
> (set-option :mbqi true) 
> ```

使用这些选项，您可以检查 MBQI 和 E-Matching 在不同问题中的效果。请注意，如果我们仅使用 E 匹配，则 Z3 将返回`unknown`任何包含量词的可满足问题。

MBQI 模块在文件`src/smt/smt_model_finder.cpp`和`src/smt/smt_model_checker.cpp`. 该文件`src/smt/smt_model_finder.cpp`本质上是转换为模型中的无量词公式生成的模型，该模型可能潜在地满足普遍量化的公式。请注意，该类`auf_solver`实际上是“解决”集合约束并“构建”[1] 中描述的投影函数的类。

如果我们想跟踪 MBQI 模块生成的实际实例，我们可以修改`void model_checker::assert_new_instances()`. `src/smt/smt_model_checker.cpp`请注意，这些方法已经有一些跟踪命令将数据发送到`tout`（跟踪输出）。我们可以替换`tout`为`std::cout`来获取标准输出的信息。例如，如果我们添加以下代码，那么每当`q`（通过 MBQI 模块）使用一些绑定实例化一个通用量词时，Z3 将在标准输出中显示信息：

```
std::cout << "[New-instance]\n" << mk_pp(q, m_manager) << "\n";
std::cout << "[Bindings]\n";
for (unsigned i = 0; i < num_decls; i++) {
    expr * b = inst->m_bindings[i];
    std::cout << mk_pp(b, m_manager) << "\n";
}
std::cout << "[End-New-Instance]\n"; 
```

# android - eclipse / android项目 - 更改包名称时的文件编码问题

> ID：13459461
> 
> 赞同：1
> 
> 时间：2012-11-19T18:00:16.147
> 
> 标签：android, eclipse

我有一个带有 Eclipse 的 android 项目，我在 AndroidManifest.xml 中更改了它的默认包名称。奇怪的是这个项目中的所有源，所有的UTF-8字符都显示错误和未知字符，就像文件搞砸了一样。

我google了很多，也将所有文件更改为UTF-8它不起作用，然后我在eclipse中也将默认设置更改为UTF-8，也不起作用。我现在在 Mac OSX 10.7 上运行 eclipse。

如果有人可以提供帮助，真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:04:12.363

一旦你使用 eclipse，我会建议从 android 工具中更改包名称。右键单击您的项目 --> Android 工具 --> 重命名应用程序包。

# wordpress - Nivo Slider 过渡效果和 Workz Wordpress 主题

> ID：13459462
> 
> 赞同：1
> 
> 时间：2012-11-19T18:00:16.500
> 
> 标签：wordpress, nivo-slider

我正在尝试更改 Workz 主题主页上的 Nivo Slider 上的过渡效果（在[此处](http://www.wpexplorer.com/workz-wordpress-theme)找到），但找不到 javascript。我查看了 PHP 文件，但除非我在这里丢失了它，否则我似乎无法看到相关的脚本。我想将效果更改为仅“淡入淡出”并将过渡减慢到大约 5-6 秒。没有带有主题的滑块菜单。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:27:01.290

如果您无法在主题中的任何位置找到设置，尤其是在 functions.php 中，请尝试更改此 javascript 文件

yourwordpressurl/wp-content/themes/workz/js/jquery.nivo.slider.js?ver=3.5

文件的第 8 行和第 9 行显示了您可以更改的速度和持续时间（以毫秒为单位）将 3000 更改为 5000 或 6000 具有效果的行：'random' change 'random' to 'fade'

```
jQuery(function($){
$(window).load(function() {
    $('#slider_nivo').nivoSlider({
        effect: 'random', // Specify sets like: 'fold,fade,sliceDown' <-- set to fade
        slices: 15, // For slice animations
        boxCols: 8, // For box animations
        boxRows: 4, // For box animations
        animSpeed: 300, // Slide transition speed
        pauseTime: 3000, // How long each slide will show <-- this is 3 seconds
        startSlide: 0, // Set starting Slide (0 index)
        directionNav: true, // Next & Prev navigation
        directionNavHide: false, // Only show on hover
        controlNav: true, // 1,2,3... navigation
        controlNavThumbs: false, // Use thumbnails for Control Nav
        controlNavThumbsFromRel: false, // Use image rel for thumbs
        controlNavThumbsSearch: '.jpg', // Replace this with...
        controlNavThumbsReplace: '_thumb.jpg', // ...this in thumb Image src
        keyboardNav: true, // Use left & right arrows
        pauseOnHover: true, // Stop animation while hovering
        manualAdvance: false, // Force manual transitions
        captionOpacity: 0.6, // Universal caption opacity
        prevText: 'Prev', // Prev directionNav text
        nextText: 'Next', // Next directionNav text
        beforeChange: function(){}, // Triggers before a slide transition
        afterChange: function(){}, // Triggers after a slide transition
        slideshowEnd: function(){}, // Triggers after all slides have been shown
        lastSlide: function(){}, // Triggers when last slide is shown
        afterLoad: function(){} // Triggers when slider has loaded
    }); // END nivo
    });// END window load
  });// END function 
```

将具有 3000 的行更改为 5000 或 6000 以设置为 5 或 6 秒。

# node.js - 如何限制 node.js 应用程序？

> ID：13459466
> 
> 赞同：2
> 
> 时间：2012-11-19T18:00:26.790
> 
> 标签：node.js

我正在尝试限制托管的 node.js 应用程序。这些应用程序是用户在 Web IDE 中创建的，它似乎可以摧毁整个服务器。

我们需要在 C++ 中应用它并通过 self 重建 node.js 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:12:12.333

如果您使用的是 linux，则可以尝试使用“renice”之类的方法来设置每个进程的优先级。Node.js 与托管 python、perl 或 PHP 应用程序没有什么不同，如果程序编写得不好或应用程序正在处理许多请求，它们中的任何一个都可能占用大量 CPU。

如果“淘汰整个服务器”是指可能导致内核崩溃，请确保您拥有最新版本的 node.js 并且您的服务器是最新的。这不应该发生。

# php - 从另一个字符串中提取字符串

> ID：13459468
> 
> 赞同：0
> 
> 时间：2012-11-19T18:00:50.810
> 
> 标签：php, xml, string

我在从另一个字符串中提取字符串时遇到问题。

我想提取这个字符串：

```
<?xml version="1.0"?> <!--  Tests completed in 1036 milliseconds. 6

    tests of 6 passed, 0 failed. 
    --> <testsuite name=" Tests" timestamp="2012-11-19T16:37:10Z" tests="6" failures="0" time="1.036"> <testcase name="dede"
    classname="test1"> </testcase> </testsuite> 
```

从这个字符串：

```
2012/11/19 17:37:09.689 - INFO. - début du test 1
2012/11/19 17:37:09.689 - INFO. - début du test 2
2012/11/19 17:38:09.689 - INFO. - début du test 3
2012/11/19 17:39:09.689 - INFO. - début du fr 4
2012/11/19 17:40:09.689 - INFO. - début du de 5
2012/11/19 17:40:48.689 - INFO. - début du de 6
2012/11/19 17:40:49.689 - INFO. - génération du résultat
<?xml version="1.0"?>
<!--
 Tests completed in 1036 milliseconds.
6 tests of 6 passed, 0 failed. 
-->
<testsuite name=" Tests" timestamp="2012-11-19T16:37:10Z" tests="6" failures="0" time="1.036">
<testcase name="dede" classname="test1">
</testcase>
</testsuite> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:11:16.730

您可以使用 PHP 的`substr`函数来执行此操作。我使用了这一`header('Content-Type: text/plain');`行，以便将 XML 显示在浏览器中，而不是转换为 XML。如果要将字符串用作实际的 XML 字符串，则可能需要删除它。

```
$string = '2012/11/19 17:37:09.689 - INFO. - début du test 1
2012/11/19 17:37:09.689 - INFO. - début du test 2
2012/11/19 17:38:09.689 - INFO. - début du test 3
2012/11/19 17:39:09.689 - INFO. - début du fr 4
2012/11/19 17:40:09.689 - INFO. - début du de 5
2012/11/19 17:40:48.689 - INFO. - début du de 6
2012/11/19 17:40:49.689 - INFO. - génération du résultat
<?xml version="1.0"?>
<!--
 Tests completed in 1036 milliseconds.
6 tests of 6 passed, 0 failed. 
-->
<testsuite name=" Tests" timestamp="2012-11-19T16:37:10Z" tests="6" failures="0" time="1.036">
<testcase name="dede" classname="test1">
</testcase>
</testsuite>';
header('Content-Type: text/plain');
echo substr($string, strpos($string, '<?xml')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:13:31.647

您最好不要在顶部转储测试信息，或者将它们包含在 XML 标记中，或者根本不显示它们。

但是，您可能可以`strpos`用来确定从哪里开始提取字符串。

```
$start_position = strpos ( $original_string , '<?xml' ); 
```

然后使用起始位置`substr()`：

```
$xml_string = substr( $original_string , $start_position ); 
```

这未经测试，但应该大致是您需要的。

strpos(): [http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)
substr(): [http://php.net/manual/en/function.substr.php](http://php.net/manual/en/function.substr.php)

# java - 为什么我的连接表是空的？（使用 Hibernate 映射多对多）

> ID：13459471
> 
> 赞同：1
> 
> 时间：2012-11-19T18:00:58.117
> 
> 标签：java, mysql, hibernate, mapping, many-to-many

我正在尝试进行多对多映射，但是下面的代码有问题。使用此代码创建的表看起来不错，外键添加正确。当我尝试创建相关对象并将它们保存到数据库时，就会出现问题。午餐应用程序后，我在 KURS 表中有一行，在 KATEGORIE 表中有一行，但第三个表 - KURSY_KATEGORIE 是空的:(

表格1：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 2012-11-08 11:48:42 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="model.Kurs" table="KURS" node="kurs">
       <id name="id" type="long">
           <column name="ID_KURSU" />
           <generator class="native" />
       </id>
       ...

       <set cascade="save-update" name="kategorie" inverse="true" lazy="true" table="KURSY_KATEGORIE">
           <key foreign-key="FK_KATEGORIE_KURSY">
               <column name="ID_KURSU" />
           </key>
           <many-to-many class="model.Kategoria" column="ID_KATEGORI"/>
       </set>   
    </class>
</hibernate-mapping> 
```

表2：

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated 2012-11-08 11:48:42 by Hibernate Tools 3.4.0.CR1 -->
<hibernate-mapping>
    <class name="model.Kategoria" table="KATEGORIA" node="kategoria">
        <id name="id" type="long">
            <column name="ID_KATEGORI" />
            <generator class="native" />
        </id>
        ...

        <set cascade="save-update" name="kursy" table="KURSY_KATEGORIE" inverse="true" lazy="true">
            <key foreign-key="FK_KURSY_KATEGORIE">
                <column name="ID_KATEGORI" />
            </key>
            <many-to-many class="model.Kurs" column="ID_KURSU"/>
        </set>
    </class>
</hibernate-mapping> 
```

和 .java 文件：

```
 Session session = SESSION_FACTORY.openSession();
    Transaction tx = session.beginTransaction();

    GregorianCalendar Data_rozp = new GregorianCalendar();
    Kategoria cat1 = new Kategoria("Kategoria1");

    Set<Kategoria> kategorie = new HashSet<Kategoria>(3);
    kategorie.add(cat1);

    Kurs k1 = new Kurs(Data_rozp, "kurs1", 100);   

    Set<Kurs> kursy = new HashSet<Kurs>(1);
    kursy.add(k1);

    cat1.setKursy(kursy);

    k1.setKategorie(kategorie);            

    session.save(cat1);
    session.save(k1);

    tx.commit();
    session.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:44:11.473

尝试改变：

```
<set cascade="save-update" name="kursy" table="KURSY_KATEGORIE" inverse="true" lazy="true"> 
```

到：

```
<set cascade="save-update" name="kursy" table="KURSY_KATEGORIE" lazy="true"> 
```

和：

```
<set cascade="save-update" name="kategorie" inverse="true" lazy="true" table="KURSY_KATEGORIE"> 
```

到：

```
<set name="kategorie" inverse="true" lazy="true" table="KURSY_KATEGORIE"> 
```

我很惊讶hibernate不会为无效配置抛出异常（两端不能设置为反向 - 一个必须是所有者）

# iphone - 为什么我的 iPhone 应用程序没有显示在 iPad App Store 上？

> ID：13459472
> 
> 赞同：0
> 
> 时间：2012-11-19T18:01:07.240
> 
> 标签：iphone, ios, xcode, ipad, app-store

我在我的国家（意大利）发布了一个新应用程序 Il Cervellone。

我的应用程序是 iPhone/iPod touch 应用程序，但通常 iPad 设备也可以安装 iPhone 应用程序，但我的应用程序未显示在 iPad App Store 中。为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:21:06.433

也许你在 iPad 上有 6.0.1 ......

[iOS 6 与 iPad：如果搜索查询没有 iPad 应用程序的结果，App Store 搜索将不会显示 iPhone 应用程序](https://discussions.apple.com/thread/4478440?start=0&tstart=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:44:16.767

您必须更改您的 App Store 帐户位置：

1.  在 iOS 设备的主菜单中点击“设置”。
2.  点击“iTunes 和应用商店”
3.  点击“查看 Apple ID”。
4.  输入您的用户名和密码。
5.  点击“更改国家或地区”下方的空间。
6.  选择您发布应用的地区”
7.  点击“完成”。

# php - 尝试切换到 pdo，随机图像脚本并不总是触发

> ID：13459475
> 
> 赞同：0
> 
> 时间：2012-11-19T18:01:24.053
> 
> 标签：php, mysql, random, pdo

我正在尝试切换到 PDO。虽然我很快遇到了一些问题，但我无法解决的一个问题是我的随机图像脚本。我之前有一篇关于这个不起作用的帖子，它与`SELECT MAX(id) needed to be SELECT MAX(id-6)`. 之前的问题是我得到了随机数量的随机图像，而不是 6 个。

现在的问题是有时我得到六张随机图像，有时我没有得到。我希望有人可以查看我的脚本，看看他们是否可以发现任何问题。

谢谢，有时只需要第二双眼睛：

```
<?php
$passed_cat = mysql_real_escape_string($_GET['cat']);
$passed_sub_cat = mysql_real_escape_string($_GET['sub_cat']);

include ('../../connection.php');

$related_images = "SELECT *,r1.id as main_id 
                   FROM images AS r1 
                   JOIN 
                   (
                        SELECT ROUND(RAND() * (SELECT MAX(id-6) 
                                               FROM images)) AS id
                    ) AS r2 
                    WHERE r1.id >= r2.id 
                        AND public_approved='Approved'
                        AND category = :category
                        AND sub_category = :sub_category
                    ORDER BY r1.id ASC 
                        LIMIT 6
                            OFFSET 20";

$q = $conn->prepare($related_images);
$q->execute(array(
':category' => $passed_cat,
':sub_category' => $passed_sub_cat));

if(!$q)
{
    die("Query failed due to: ". $conn->errorInfo());
}

$q->setFetchMode(PDO::FETCH_BOTH);

while($row = $q->fetch())
{
echo "<div style='float:left; margin:2px;' >";
echo '<a href="sub_page.php?cat='. $passed_cat .'&sub_cat='. $passed_sub_cat .'&id='. $row['main_id'] .'"><img src="../../files/small/thumb0_'. $row['item_name'] . '.' . $row['file_extension'] . '" style="width:96px;" border="0"></a>';
echo "</div>";
}
?> 
```

编辑：Connection.php

```
<?php

    $host = "localhost"; 
    $dbname = "all_sites";
    $db_username = "root";
    $db_password = "password";

try {
    $conn = new PDO("mysql:host=$host;dbname=$dbname",$db_username,$db_password);
}
catch (PDOException $pe)
{
    die('Connection error, due to: ' .$pe->GetMessage());
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:26:27.357

mysql_real_escape_string() 不是必需的，如果您不使用 mysql_connect() 可能会导致问题

[从手册：](http://php.net/manual/en/function.mysql-real-escape-string.php) `mysql_real_escape_string('',*link_identifier)`

> *   MySQL 连接。如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。如果未找到或建立连接，则会生成 E_WARNING 级别错误。

只需将您的 $_GET 变量传递给执行数组：

```
$q->execute(array(':category'=>$_GET['cat'], ':sub_category'=>$_GET['sub_cat'])); 
```

# iphone - SKStoreViewController 沙盒问题

> ID：13459478
> 
> 赞同：0
> 
> 时间：2012-11-19T18:01:30.910
> 
> 标签：iphone, ios, ios6, in-app-purchase, storekit

```
int productID = xxx;
    NSDictionary *parameters = @{SKStoreProductParameterITunesItemIdentifier:[NSNumber numberWithInteger:productID]};

    [self.storeViewController loadProductWithParameters:parameters
                                        completionBlock:^(BOOL result, NSError *error) {
                                            if (result)
                                            {
                                                [self presentViewController:self.storeViewController animated:YES completion:^{

                                                }];
                                            }
                                        }]; 
```

我还在 iTunes Connect 上创建了测试帐户，之前我可以通过测试帐户安装此应用程序，但现在每次或在其他设备上我都会出错。附上截图![在此处输入图像描述](../Images/9c92f080e3df2884521a66dbd79f27b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:34:53.790

警报视图显示您的测试成功。Apple 不允许您实际安装它，因为它希望避免在沙盒模式下购买应用程序。

# html - 在 HTML 页面中仅显示某些 XML 数据

> ID：13459481
> 
> 赞同：2
> 
> 时间：2012-11-19T18:01:45.970
> 
> 标签：html, xml, data-visualization

我对网站开发完全陌生，我正在学习东西。我是一所小型大学的体育信息总监，需要一些帮助来完善我们的网站。对于大多数运动，我们使用一个名为 Stat Crew 的程序。

以下是 xml 数据文件的示例。

```
<player name="Player 1" checkname="Player 1" uni="00" code="00" pos="G" year="SR" gs="4" gp="5" fgm="21" fga="42" fgm3="2" fga3="6" ftm="17" fta="24" tp="61" oreb="8" dreb="8" treb="16" blk="0" stl="10" ast="28" to="20" pf="10" tf="0" min="128" dq="0"/> 
```

我的 html 已经是平板电脑格式，每个“玩家”都有自己的桌子。我想要做的是显示赛季统计数据（当然每场比赛都会更新），而无需手动更新 html。我可以设置我的页面以从 XML（fgm、fgm3 等）中提取某些数据并让它自动进入指定的 html 表吗？

我试图阅读该站点上与 XML 相关的问题，但老实说，这令人困惑。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:23:19.293

您应该考虑研究[XSL Transforms](http://www.w3schools.com/xsl/)。这将允许您利用您的 XML 数据并以您熟悉的 HTML 生成所需的可视化。

# javascript - javascript中的错误或没有线索

> ID：13459485
> 
> 赞同：1
> 
> 时间：2012-11-19T18:02:16.557
> 
> 标签：javascript, jquery, internet-explorer

我得到了以下 javascript 代码。基本上，它可以在 FF 和 IE 上使用开发者工具。

```
$(function(){
    console.log("it is ok");
    var mybutton="";

    alert("ready1");
    $('button[name="delorder"]').click(function(){

        console.log($(this).val()+"hay i got a click");
        mybutton=$(this).val();
        alert("a click1");
        $.ajax({
            type:'POST',
            url:'deleteorderitem.php',
            data:mybutton,
            success:function(result){

                if((result.indexOf("t") < 3) && (result.indexOf("t") >= 0)){                    

                    $('#orderresult').html(result);                 

                    console.log("i am 3 ");
                    console.log("index of t is "+result.indexOf("t"));
                }else{
                    console.log("i am 4");                      
                    console.log("index of t is "+result.indexOf("t"));
                    $('#divOrderButton').hide();
                    $('#orderresult').html("");
                    $('#divNoinfo').html("There is no record to display at the moment.");
                    $('#divNoinfo').show(); 
                    $('#divOrder').hide();
                }
            }
        });
    });
});
</script> 
```

但是，它不适用于 IE（没有开发人员工具）。所以，任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:04:31.420

主要是因为

```
console.log() 
```

Windows IE8 及以下版本在开发者工具未打开时没有控制台对象。

要么注释掉控制台的行。或者预先创建控制台对象。

试试这个......不确定这是否是正确的方法......

```
var alertFallback = true;
   if (typeof console === "undefined" || typeof console.log === "undefined") {
     console = {};
     if (alertFallback) {
         console.log = function(msg) {
              alert(msg);
         };
     } else {
         console.log = function() {};
     }
   } 
```

如果控制台对象不存在，这将创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:04:39.193

如果您说如果没有打开开发人员工具就无法工作，（除非我弄错了）那是因为您拥有所有这些`console.log`，这一定是导致它崩溃的原因。

在主 JS 文件的最顶部尝试这样的操作，以防止在 IE 中出现这种情况。

```
if (typeof (console) === 'undefined' || !console) {
    window.console = {};
    window.console.log = function () { return; };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:07:57.107

我使用此功能为跨浏览器控制台日志编写日志：

```
/**
 *Log into the console if defined 
 */
function log(msg)
{       
    if (typeof console != "undefined") {
        console.log(msg);
    }       
} 
```

# javascript - 如果值在变量中，Firefox 和 IE 不会调用 window.location.href

> ID：13459487
> 
> 赞同：2
> 
> 时间：2012-11-19T18:02:26.307
> 
> 标签：javascript, firefox, google-chrome, mailto

我正在尝试调用`mailto:`存储在变量中的 URI。当我做`window.location.href = mailto_link;`Firefox 给我以下错误：

```
NS_ERROR_ILLEGAL_VALUE: Component returned failure code: 0x80070057        
(NS_ERROR_ILLEGAL_VALUE) [nsIDOMLocation.href] 

window.location.href = mailto_link;` 
```

什么 IE 说：

```
Object doesn't support this property or method 
```

该代码适用于 Chrome，但不适用于 IE 或 Firefox。

我原来的功能：

```
function email()
{
    var nom = $('#nom').val();nom = encodeURIComponent(nom);
    var compagnie = $('#compagnie').val();compagnie = encodeURIComponent(compagnie);
    var rue = $('#rue').val();rue = encodeURIComponent(rue);
    var ville = $('#ville').val();ville = encodeURIComponent(ville);
    var province = $('#province').val();province = encodeURIComponent(province);
    var cp = $('#cp').val();cp = encodeURIComponent(cp);
    var remarques = $('#remarques').val();if(remarques ==""){remarques = "Aucune remarque.";}remarques = encodeURIComponent(remarques);
    var quantite = $('#quantite').val(); 
    var email= "someEmail@somedomain.com";
    var subject= "Nouvelle commande";
    var body_message= "%0D%0D%0D%0D"+nom+"%0D"+compagnie+"%0D"+rue+"%0D"+ville+", "+province+"%0D"+cp+"%0D%0D%0DRemarques:"+remarques+"%0D%0D Quantit%E9:"+quantite;
    var mailto_link = 'mailto:'+email+'?subject='+subject+'&body='+body_message;
    window.location.href = mailto_link;
} 
```

**更新 1**

我发现了导致 IE 问题的原因，尽管我仍然希望为 Firefox 解决它。IE 的问题是我有一个`console.log();`无法识别的（IE8 和更低版本）。

这是`console.log()`mailto_link的内容：

```
mailto:someEmail@someDomain.com?subject=Nouvelle commande&body=Charger %0Dmodems des %CEseulement%0D%0D%0D%0Djshad%0Daskjda%0Daskdj%0Daskdj, askdj%0DJ9P%204A1%0D%0D%0DRemarques:asldk%0D%0D Quantit%E9:14 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:33:54.467

Firefox 显然无法处理 URL 中大于 128 的 ISO 8859-1 字符。如果您从记录的示例中删除`%CE`(Î) 和`%E9`(é)，问题就会消失。不幸的是，我能想到的唯一解决方法需要手动替换扩展字符，例如使用等效字符（可能是 HTMLEntities*）。由于在 Javascript 中没有本地函数可以这样做，这可能会很烦人。

**因为 HTMLEntities 仅在 HTML 上下文中正确呈现，而 mailto: URI 生成纯文本消息正文，这是一个不完美的解决方案。下面是一个函数，它将执行此操作，但消息将具有实例`&#233;`等。正如您在评论中提到的那样，也许更方便的解决方案是[将重音字符转换为前 128 个 ASCII 字符中的等价字符。*](https://stackoverflow.com/a/5912746/1451422)

* * *

```
function encodeISO8859 (str) {
    var rstr="";
    for(var i=0; i<str.length; i++) {
        var c = str.charCodeAt(i);
        if(c>191&&c<=255&&!(c==215||c==247)){
            console.log(c);
            rstr += "&#"+c+";";
        } else {
            rstr += str.charAt(i);
        }
    }
    return rstr;
} 
```

这会将[ISO8859-1 字符集中](http://www.w3schools.com/tags/ref_entities.asp)的任何字符（见页面底部）转换为等效的 HTMLEntity。对 URI 使用此 BEFORE 编码：

```
var nom = $('#nom').val();nom = encodeURIComponent(encodeISO8859(nom)); 
```

当然，只有当重音字符对于理解是绝对必要的并且使用相同基本字符（如`A`）的许多重音字符之间可能存在重叠时才这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:20:33.370

我试过了，它对我有用，但我认为错误代码可能与您在 Firefox 或 IE 中安装的插件之一有关，重新启动浏览器应该会有所帮助。

> 这可能是由一个插件/用户脚本引起的，该插件/用户脚本正在页面上进行一些操作/修改，而​​ google 重定向您执行搜索结果。您可以尝试在使用安全模式解决 Firefox 问题中运行 firefox 并查看错误是否仍然出现。如果不禁用所有插件并重新启用它们，以找出究竟是哪个插件导致它（您可能必须在每个插件之后重新启动浏览器）。

[更多的](http://support.mozilla.org/en-US/questions/927642)

# batch-file - if-then 批处理以映射驱动器

> ID：13459489
> 
> 赞同：2
> 
> 时间：2012-11-19T18:02:41.563
> 
> 标签：batch-file

我正在尝试让几个脚本相互配合，但我并不完全熟悉 if-then 命令，我正在使用 wizapp 并且我已经准备好我的信息，但我不知道如何映射基于 wizapp 输出的特定位置，例如，如果 %siteid%=="0"

如何将其映射到驱动器，我有 10 个不同的驱动器必须使用该信息进行映射，而我迷路了，每个 if then 语句中的 siteid 显然会有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T04:36:17.903

这相对容易做到。我将提供手动说明，因为它对学习非常有用，并且会提高您的编码技能。

```
C:\windows\system32> net view

Server Name                Remark
---------------------------------------------------------------------------------
\\PC1
\\PC2
\\PC3
\\PC4
\\PC5
\\PC6
\\PC7
\\PC8
\\PC9
\\SERVER
The command completed successfully.

C:\windows\system32> net view \\PC1

Shared resources at \\PC1

Share name  Type  Used as  Comment

-------------------------------------------------------------------------------
SharedDocs  Disk
The command completed successfully.

C:\windows\system32> net use ( Drive letter A-Z ) \\PC1\SharedDocs

The command completed successfully. 
```

* * *

现在打开我的电脑，您会看到 PC1 已注册为您计算机上的驱动器。

# android - 为什么我无法重新启动使用 REORDER_TO_FRONT 标志启动的活动？

> ID：13459490
> 
> 赞同：1
> 
> 时间：2012-11-19T18:02:48.327
> 
> 标签：android, android-intent

我正在使用此代码重新开始我的活动：

```
public void refreshActivity()
{
    final Intent intent = this.getIntent();
    this.overridePendingTransition(0, 0);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    this.finish();

    this.overridePendingTransition(0, 0);
    this.startActivity(intent);
} 
```

它工作得很好。但是如果我当前的 Activity 是使用 FLAG_ACTIVITY_REORDER_TO_FRONT 启动的，它就不会启动。

我发现[了这个](https://stackoverflow.com/a/13383025/351533)：但我认为这不是我的情况，因为我没有使用 FLAG_ACTIVITY_REORDER_TO_FRONT 重新启动当前活动。

**更新：** 我可以通过明确告知活动的名称来重新启动活动，如下所示：

```
 this.finish();

    final Intent intent = new Intent(this, InfoActivity.class);
    this.startActivity(intent); 
```

但我需要访问我的意图以获取他的所有参数（正确加载活动所需的参数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-30T09:31:18.403

`FLAG_ACTIVITY_REORDER_TO_FRONT`您应该在调用之前清除标志`startActivity()`。像这样：

```
final Intent intent = this.getIntent();
intent.setFlags(intent.getFlags() & ~Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
this.overridePendingTransition(0, 0);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
this.finish();

this.overridePendingTransition(0, 0);
this.startActivity(intent); 
```

# multidimensional-array - 多维矩阵加法

> ID：13459492
> 
> 赞同：1
> 
> 时间：2012-11-19T18:02:53.597
> 
> 标签：multidimensional-array, matrix

对于我的课程，我们必须做一个项目，其中用户可以分配最多 4 个矩阵 ABCD，然后使用 malloc 显示它。现在我想进入下一部分，并让用户添加他想要的任何矩阵。这是我的代码，可以完美运行以存储和显示矩阵：

```
#include<stdio.h>
#include <stdlib.h>

void matrix_display(int ****matrix, int row_count, int column_count);

int main (void)
{
int row_size1,col_size1,row_size2,col_size2,flag =1;
int ****A[4];
int i = 0, j = 0;
char a,c;

do
{
printf("\ncmd> ");
c = getchar();

if(c == 'A')
{
scanf("%d %d",&row_size1,&col_size1);
A[0]= malloc(row_size1*sizeof(int*));
for(i=0;i<row_size1;i++)
{
A[0][i]=malloc(col_size1*sizeof(int));
}
for(i=0;i<row_size1;i++)
{
for(j=0;j<col_size1;j++)
    {
scanf("%d",&A[0][i][j]);

    }
}
matrix_display(A[0], row_size1, col_size1);
  }

if(c == 'B')
{
scanf("%d %d",&row_size1,&col_size1);
A[1]= malloc(row_size1*sizeof(int*));
for(i=0;i<row_size1;i++)
{
A[1][i]=malloc(col_size1*sizeof(int));
}
for(i=0;i<row_size1;i++)
{
for(j=0;j<col_size1;j++)
  {
scanf("%d",&A[1][i][j]);

       }
   }
matrix_display(A[1], row_size1, col_size1);
}

if(c == 'C')
{
scanf("%d %d",&row_size1,&col_size1);
A[2]= malloc(row_size1*sizeof(int*));
for(i=0;i<row_size1;i++)
{
A[2][i]=malloc(col_size1*sizeof(int));
}
for(i=0;i<row_size1;i++)
{
for(j=0;j<col_size1;j++)
 {
scanf("%d",&A[2][i][j]);

       }
   }
matrix_display(A[2], row_size1, col_size1);
}

if(c == 'D')
{
scanf("%d %d",&row_size1,&col_size1);
A[3]= malloc(row_size1*sizeof(int*));
for(i=0;i<row_size1;i++)
{
A[3][i]=malloc(col_size1*sizeof(int));
}
for(i=0;i<row_size1;i++)
{
for(j=0;j<col_size1;j++)
 {
scanf("%d",&A[3][i][j]);

       }
   }
matrix_display(A[3], row_size1, col_size1);
 }

 }
while(flag == 1);
 }

void matrix_display(int ****A, int row_size1, int col_size1) 
{
int i,j;
printf("The required matrix is\n");
for(i=0;i<row_size1;i++)
{
for(j=0;j<col_size1;j++)
  printf("%d ",A[i][j]);
  printf("\n");
}
for(i=0;i<row_size1;i++)
{
  free(A[i]);
}
free(A);
} 
```

现在对于添加部分，我添加了以下内容：这就是我希望它运行的方式：cmd> + AD（显示矩阵 A 和 D 的加法）

我不知道该怎么做任何建议将不胜感激

我知道他们是更简单的方法，并且*** * 我没有使用过，但这次请例外

# matlab - 如何将估计序列添加到我的用于 matlab 的 Newton Raphson 代码？

> ID：13459494
> 
> 赞同：0
> 
> 时间：2012-11-19T18:02:58.293
> 
> 标签：matlab, newtons-method

我的代码有效，但我需要再添加 2 件事：

*   输出 - 包含估计序列的向量，包括初始猜测 x0，
*   输入-最大迭代

    ```
    function [ R, E ] = myNewton( f,df,x0,tol )
        i = 1;

        while abs(f(x0)) >= tol
            R(i) = x0;
            E(i) = abs(f(x0));
            i = i+1;
            x0 = x0 - f(x0)/df(x0);
        end

        if abs(f(x0)) < tol
            R(i) = x0;
            E(i) = abs(f(x0));
        end

    end 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:25:04.560

好吧，你需要的一切都已经完成了，你应该能够处理它，顺便说一句..

1.  最大迭代包含在变量`i`中，因此您需要返回它；添加这个

    ```
     function [ R, E , i] = myNewton( f,df,x0,tol ) 
    ```

2.  绘制估计序列：

    ```
    plot(R); %after you call myNewton 
    ```

3.  显示最大迭代次数

    ```
    disp(i); %after you call myNewton 
    ```

# ruby - Sinatra，仅检索帖子参数

> ID：13459497
> 
> 赞同：2
> 
> 时间：2012-11-19T18:03:04.720
> 
> 标签：ruby, sinatra

我知道我可以使用“params”检索 Sinatra 中的每个参数。但是，我怎样才能只检索帖子参数？我需要验证一个参数是由 POST 发送的，否则它应该被忽略。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T00:16:12.773

直接访问请求对象为您提供了一种访问 post 数据的简单方法，很像 php 的 $_POST 变量：

```
post '/' do
  request.POST.inspect # instead of params.inspect
end 
```

有关机架请求对象的更多信息：[http ://rack.rubyforge.org/doc/classes/Rack/Request.html#M000274](http://rack.rubyforge.org/doc/classes/Rack/Request.html#M000274)

# css - CSS3透视属性在IE10中不起作用

> ID：13459505
> 
> 赞同：3
> 
> 时间：2012-11-19T18:03:31.633
> 
> 标签：css, css-transforms, perspective, internet-explorer-10

我尝试在IE10中制作翻页效果。

因为 IE10 不支持`transform-style: preserve-3d;` 我必须分别翻转每一面。它在最近的浏览器中运行良好，但在 IE10 中没有透视。如果我
`perspective: 1000px;`
在容器（.flipper）中写入，则背面可见性/z-index 无法正常工作。

看看 tis jsfiddle：http: [//jsfiddle.net/wG6gk/2/](http://jsfiddle.net/wG6gk/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T22:29:10.473

我不知道为什么你`xpersepective`的 CSS 中有，IE10 在 CSS 中没有前缀，但是透视属性必须有某种深度单位，`perspective: 1000`不会应用，因为浏览器不知道它所在的单位，同样像宽度和高度等，您必须应用 px、em 等。唯一假定`perspective`属性单位（和像素）的浏览器是 Webkit 浏览器，并且只有当它在`transform`属性内时。

如果你做一点研究，[微软表示](http://msdn.microsoft.com/en-us/library/ie/hh673529%28v=vs.85%29.aspx#the_ms_transform_style_property)：

> W3C 规范为此属性定义了关键字值**preserve-3d**，表示不执行展平。目前，Internet Explorer 10 不支持**preserve-3d**关键字。除了子元素的正常变换之外，您可以通过手动将父元素的变换应用于每个子元素来解决此问题。

所以现在，如果你想走这条路，你只需要实施建议的修复。

如果没有，你很幸运。我花了一些时间试图让它顺利过渡。在我看来，最初在您的小提琴中，您的转换非常笨拙并且样式太多，所以这个 JSfiddle 中的技术应该会有所帮助：http: [//jsfiddle.net/NAy2r](http://jsfiddle.net/NAy2r)

* * *

## 解释小提琴

所以基本上前面的内容存在于容器 div 中，而后面的内容存在于后面的 div 中，后面的 div 存在于容器 div 中。这与 Apple 的 HTML5 Card 翻转演示非常相似，但在`backface-visibility`.

在 Apple 发布该演示时，它`backface-visibiity`无法在 Chrome 或 Firefox 上运行。Chrome有一些透视的概念，但是没有`backface-visibility`，所以当你翻转一个元素时，你仍然会看到背面，背面的内容也会从两边显示出来；但是在 Safari 上，它会是完美的，因为它最初理解了这些概念。

在随后几个月对 Chrome 的进一步更新中，Chrome 理解了该属性，但它是按字面意思应用的，并且背面完全隐藏**，**无论*您是否翻转它*！如果无论如何都要完全隐藏背部，那么拥有这个属性又有什么意义呢？如果你愿意，你可以申请`display:none`，等等，以显示背部！

这就是 IE 迄今为止所处的位置，它也`transform:rotateY(180deg)`不像其他现代浏览器那样识别元素的“背面”（一个元素被认为是背面）。所以当元素被翻转时，`backface-visibilty: hidden`就像在 Chrome 中一样！

所以这个小提琴监听容器 div 上的 AnimationStart 事件，在动画开始时，它会找到动画的持续时间并使用它来计算动画的中途，所以当动画中途时，它会`backface-visibility`变为`visible`，这样动画像它应该的那样平滑过渡。

开发起来很痛苦，IE10 有点不一致，因为第一次处理它需要时间（可能是 jQuery）。注意缓解，没有头痛和火红的眼睛。你周围的空气变得凉爽了，你终于可以呼吸了，因为现在你并不孤单。

**编辑：**我忘了补充，如果你的动画或过渡有不同的时间，这个脚本中的时间将不得不调整，因为它只适用于线性过渡，截至目前......

# php - PHP（内容类型：文本/纯文本）

> ID：13459506
> 
> 赞同：1
> 
> 时间：2012-11-19T18:03:31.597
> 
> 标签：php, json, header

添加 PHP 后`header("Content-type: text/plain");`会添加一个空格。我将它用于漂亮的 JSON。

我需要这个：

> {
>      “代码”：“200”}
> }

但我明白了：

> {
>      “代码”：“200”}
> }

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:05:52.657

仔细查看您的 PHP 页面，您可能只是在其中（在您的 PHP 标记之外）有您没有意识到的空白。`}`（而且你的 JSON 中有一个额外的......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:18:16.297

如果您使用的是 PHP 5.4 或更高版本，则可以使用`JSON_PRETTY_PRINT`flag。

但是我也认为你可能在打印之前有一个空格，如果不是在你的主页中，也许在`functions.php`.

# c# - 模型未传递给渲染视图

> ID：13459510
> 
> 赞同：1
> 
> 时间：2012-11-19T18:03:37.503
> 
> 标签：c#, asp.net-mvc, model

我在 MakePayment.cshmtl 视图的模型中获取数据时遇到问题。

AccountScreen.cshtml 正在调用 MakePayment.cshtml 视图：

```
@model SuburbanCustPortal.SuburbanService.CustomerData      

@{
    ViewBag.Title = "Account Screen";
 }

<h2>AccountScreen</h2>

<div class="leftdiv">
  <fieldset>
    <legend>customer info</legend>
    @Html.Partial("CustomerInfoPartialView", Model)
  </fieldset>

  <fieldset>
    <legend>delivery address</legend>
    @Html.Partial("DeliveryAddressPartialView", Model)
  </fieldset>

  <fieldset>
    <legend>delivery info</legend>
    @Html.Partial("DeliveryInfoPartialView", Model)
  </fieldset>
</div>

<div class="rightdiv">
  <fieldset> 
    <legend>balance</legend>
    <div>
      @Html.Partial("BalancePartialView", Model)
    </div>    
  </fieldset>

  <fieldset> 
    <legend>payment</legend>
    <div>
      @Html.Partial("MakePayment", Model)
    </div>    
  </fieldset>

  <fieldset> 
    <legend>billing info</legend>
    <div>
      @Html.Partial("BillingInfoPartialView", Model)
    </div>    
  </fieldset>
</div> 
```

我的 MakePayment.cshtml 视图：

```
@model SuburbanCustPortal.SuburbanService.CustomerData

  @using (Html.BeginForm("MakePayment2", "Customer", FormMethod.Post))
  {
    <div style="text-align:center;">
      <input class="makePaymentInput" type="submit" value="Make a Payment" />
    </div>       
  } 
```

我的客户控制器：

```
public ActionResult AccountScreen(LogOnModel model)
{
  return ShowCustomer(model.AccountNumber);
}

public ActionResult MakePayment(CustomerData model)
{
  return View("MakePayment", model);
}

[HttpPost]
public ActionResult MakePayment2(CustomerData model)
{
  //CustomerData model = new CustomerData();
  var newmodel = new PaymentModel.SendToGateway();
  newmodel.AccountBalance = model.TotalBalance;
  newmodel.Amount = model.TotalBalance;

  return RedirectToAction("PrePayment", "Payment", newmodel);
} 
```

`public ActionResult MakePayment(CustomerData model)`永远无法达到。

**我的问题：**正在`[HttpPost] public ActionResult MakePayment2(CustomerData model)`达到但模型中有空值。

我知道正在填充来自 AccountScreen 的数据初始模型，因为正在呈现的其他视图正在显示数据。

有人看到我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:14:24.523

问题是除了提交按钮之外，您的表单中没有任何内容。您需要确保存在输入字段（文本框、选择列表或隐藏字段），因为这些字段会将数据发送回控制器。

您可以尝试`EditorForModel`在局部视图中使用：

```
@using (Html.BeginForm("MakePayment2", "Customer", FormMethod.Post))
{
    @Html.EditorForModel()
    <div style="text-align:center;">
      <input class="makePaymentInput" type="submit" value="Make a Payment" />
    </div>       
} 
```

* * *

**根据评论编辑**

`Html.HiddenForModel()`无论出于何种原因，Razor 都不包含方法。可能的解决方法：

*   列出模型的每个属性`Html.HiddenFor(model => model.Property)`
*   [使用注释模型属性`\[HiddenInput\]`](https://stackoverflow.com/a/7965140/1001985)
*   使用`EditorForModel()`但将其包装起来`<div style="display: none;"></div>`（注意恶意用户仍然可以修改属性，就好像它们是可见的一样。）
*   [仅使用`Html.HiddenFor(model => model.id)`并获取控制器中的模型。](https://stackoverflow.com/a/7965116/1001985)
*   在[MVC Futures 程序集中使用序列化方法](http://nuget.org/packages/Mvc3Futures)

相关问题在这里：

*   [有没有办法使用 @Html.HiddenFor 来完成模型？](https://stackoverflow.com/q/7965096/1001985)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:16:33.243

问题是，您正在创建一个只包含提交按钮的表单。

当您提交它时，它不会将任何内容发回服务器，因此您的函数会收到一个空模型。

```
@using (Html.BeginForm("MakePayment2", "Customer", FormMethod.Post))
  {
    <div style="text-align:center;">
      <input class="makePaymentInput" type="submit" value="Make a Payment" />
    </div>       
  } 
```

这翻译为：

```
<form method="POST" action="{url}">
    <div style="text-align:center;">
      <input class="makePaymentInput" type="submit" value="Make a Payment" />
    </div>
</form> 
```

***更多细节 ：***

由于在逻辑中您随后会重定向到新页面以收集付款信息，因此您不想让用户有机会*弄乱*您的模型，因此您应该从您的上下文中查询您的客户数据，而不是相信提交的内容邮政。

因此，如果这是您真正需要添加的所有内容：

```
@using (Html.BeginForm("MakePayment2", "Customer", FormMethod.Post))
{
   @Html.HiddenFor(model => model.{ID Field})
   <div style="text-align:center;">
     <input class="makePaymentInput" type="submit" value="Make a Payment" />
   </div>       
} 
```

这样，您将能够在服务器端代码中恢复您的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:13:55.977

基本上，您的表单不提交任何内容，因为表单范围内没有输入字段。尝试将所有 html 包装在 inside`AccountScreen.cshtml`语句`@using (Html.BeginForm(`中（并将其从 中丢弃`MakePayment.cshtml`）。

# google-plugin-eclipse - Eclipse (Juno) 的 Google 插件 url 无效？

> ID：13459514
> 
> 赞同：2
> 
> 时间：2012-11-19T18:04:05.167
> 
> 标签：google-plugin-eclipse

我正在尝试从此网址安装适用于 Eclipse 的 Google 插件

```
http://dl.google.com/eclipse/plugin/4.2 
```

我收到此错误消息

```
Communication with repository at http://dl.google.com/eclipse/plugin/4.2 failed.
Read timed out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:13:09.227

防火墙或病毒防护似乎阻止了 .jar 文件的下载。无论如何，我的解决方法是使用此处 [https://developers.google.com/eclipse/docs/install-from-zip中的说明对站点进行本地更新](https://developers.google.com/eclipse/docs/install-from-zip)

确保在“安装新软件”对话框中选中“联系更新站点”，否则它将再次超时。

# javascript - decodeURIComponent 破坏路径

> ID：13459515
> 
> 赞同：1
> 
> 时间：2012-11-19T18:04:08.737
> 
> 标签：javascript, node.js

当我将以下内容发布到节点时（简化示例）：

```
var xhr = new XMLHttpRequest();
xhr.open("POST", "http://localhost:3000/action");
xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
xhr.send(JSON.stringify({path:encodeURIComponent("E:\foo\bar.baz")})); 
```

node.js 代码：

```
app.post('/action', function (request, response) {
    var file = request.body['path'];
    console.log(file);
    console.log(decodeURIComponent(file));
}); 
```

我得到以下输出：

```
E%3A%0Coo%08ar.baz
E:♀oar.baz 
```

我该如何正确解码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:24:28.467

您正在对路径中的[特殊字符](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Using_special_characters_in_strings)进行编码，因为反斜杠保留用于转义：

`\f Form feed`

`\b Backspace`

编码后，这些变为：

`%0C`

`%08`

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Escaping_characters)：

> 要在字符串中包含文字反斜杠，您必须转义反斜杠字符

`"E:\\foo\\bar.baz"`

# php - php mysql Group By获取最新记录，而不是第一条记录

> ID：13459516
> 
> 赞同：18
> 
> 时间：2012-11-19T18:04:10.087
> 
> 标签：php, mysql

桌子：

```
(`post_id`, `forum_id`, `topic_id`, `post_time`) 
(79, 8, 4, '2012-11-19 06:58:08');
(80, 3, 3, '2012-11-19 06:58:42'),
(81, 9, 9, '2012-11-19 06:59:04'),
(82, 11, 6, '2012-11-19 16:05:39'),
(83, 9, 9, '2012-11-19 16:07:46'),
(84, 9, 11, '2012-11-19 16:09:33'), 
```

查询：

```
SELECT  post_id, forum_id, topic_id FROM posts 
GROUP BY topic_id 
ORDER BY post_time DESC
LIMIT 5 
```

结果：

```
[0] => [post_id] => 84 [forum_id] => 9 [topic_id] => 11  
[1] => [post_id] => 82 [forum_id] => 11 [topic_id] => 6  
[2] => [post_id] => 81 [forum_id] => 9 [topic_id] => 9  
[3] => [post_id] => 80 [forum_id] => 3 [topic_id] => 3  
[4] => [post_id] => 79 [forum_id] => 8 [topic_id] => 4 
```

问题：

如何重写查询以使其返回 post_id -> 83 而不是 post_id -> 81 ？

他们都有相同的论坛和主题 ID，但 post_id -> 81 的日期比 post_id -> 83 的日期更早。

但似乎 Group By 获得了“第一”记录，而不是“最新”记录。

我尝试将查询更改为

```
SELECT  post_id, forum_id, topic_id, MAX(post_time) 
```

但这会返回 post_id 81 和 83

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-19T19:12:38.447

如果您选择未在 group 子句中使用且不是聚合的属性，则结果未指定。*即*，您不知道从哪些行中选择了其他属性。（sql标准不允许这样的查询，但是MySQL比较宽松）。

然后应该将查询编写为，例如

```
SELECT post_id, forum_id, topic_id
FROM posts p
WHERE post_time =
  (SELECT max(post_time) FROM posts p2
   WHERE p2.topic_id = p.topic_id
   AND p2.forum_id = p.forum_id)
GROUP BY forum_id, topic_id, post_id
ORDER BY post_time DESC
LIMIT 5; 
```

或者

```
SELECT post_id, forum_id, topic_id FROM posts
NATURAL JOIN
(SELECT forum_id, topic_id, max(post_time) AS post_time
 FROM posts
 GROUP BY forum_id, topic_id) p
ORDER BY post_time
LIMIT 5; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-19T18:15:27.397

它不是很漂亮，但它有效：

```
SELECT * FROM (SELECT  post_id, forum_id, topic_id FROM posts
ORDER BY post_time DESC) as temp
GROUP BY topic_id 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-19T18:15:36.633

尝试类似的东西

```
SELECT post_id, forum_id, topic_id 
FROM   (SELECT post_id, forum_id, topic_id
        FROM posts
        ORDER BY post_time DESC) 
GROUP BY topic_id 
ORDER BY topic_id desc
LIMIT 0,5 
```

根据需要更改`order by`和`limit`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-28T19:06:43.950

也许不是最好的方法，但有时函数**group_concat()**可以是全用户的，它会返回一个包含所有聚合值的字符串，这些值按您想要的方式排序并用逗号分隔（耦合值用空格分隔）。然后我使用函数 SPLIT_STRING() 来剪切字符串中的第一个 id。

```
SELECT  
post_id, 
SPLIT_STRING( group_concat( forum_id, post_time ORDER BY post_time DESC ) ,' ',1 )as forum_id, 
SPLIT_STRING( group_concat( topic_id, post_time ORDER BY post_time DESC ) ,' ',1 )as topic_id ,
FROM posts 
GROUP BY topic_id 
ORDER BY post_time DESC
LIMIT 5 
```

所以聚合的 forum_id, post_time 将是这样的：

> 81 2012-11-19 06:59:04,83 2012-11-19 16:07:46

因此，您需要使用整数和日期时间对的字符串表示形式，每对以逗号分隔，因此我使用此函数来获取第一个 INT ：

```
CREATE FUNCTION SPLIT_STRING(str VARCHAR(255), delim VARCHAR(12), pos INT)
RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(str, delim, pos),
       LENGTH(SUBSTRING_INDEX(str, delim, pos-1)) + 1),
       delim, ''); 
```

注意：函数 SPLIT_STRING(str, delim, pos) 在这里找到：[Equivalent of explode() to work with strings in MySQL](https://stackoverflow.com/questions/5928599/equivalent-of-explode-to-work-with-strings-in-mysql)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-22T06:21:07.963

这也适合你。

```
SELECT *
FROM (
  SELECT post_id, forum_id, topic_id FROM posts
  ORDER BY post_time DESC
  LIMIT 5
) customeTable
GROUP BY topic_id 
```

# qt - 如何将上下文菜单添加到 qml QDeclarativeView？

> ID：13459523
> 
> 赞同：1
> 
> 时间：2012-11-19T18:04:57.407
> 
> 标签：qt, qml, qmenu

我的 qml 小部件中需要 ContextMenu。我有一个解决方案：创建QGraphicsProxyWidget，其中包含QMenu，但是有一个问题：上下文菜单在主窗口之外是不可见的。如何将主窗口设置为菜单的父级？自定义组件是个坏主意 - 我需要 QMenu 的可能性：执行、操作、弹出窗口等。

主.qml

```
import QtQuick 1.1
import CustomComponents 1.0

Rectangle {
    width: 360
    height: 360
    QMLContextMenu {
        id: menu
    }

    Text {
        text: qsTr("Hello World")
        anchors.centerIn: parent
    }
    MouseArea {
        anchors.fill: parent
        acceptedButtons: Qt.RightButton | Qt.LeftButton
        onClicked: {
            if(mouse.button === Qt.RightButton)
                menu.exec(mouse.x, mouse.y);
            else
                Qt.quit();
        }
    }
} 
```

主文件

```
#include <QApplication>
#include "qmlapplicationviewer.h"
#include <QtCore>
#include <QtDeclarative>
#include <QtGui>

class QMLContextMenu : public QGraphicsProxyWidget
{
    Q_OBJECT
public:
    QMLContextMenu(QGraphicsItem* parent = 0) : QGraphicsProxyWidget(parent)
    {
        menuWidget = new QMenu("my menu");
        setWidget(menuWidget);
    }
public slots:
    QString exec(int x, int y)
    {
        menuWidget->clear();
        menuWidget->addAction("hello world!");
        menuWidget->addSeparator();
        menuWidget->addAction("or not...");
        //menuWidget->show();
        QAction *pResultAction = menuWidget->exec(QPoint(x, y));
        QString text;
        if(pResultAction)
            text = pResultAction->text();
        return text;
    }
private:
    QMenu *menuWidget;
}; 

Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QScopedPointer<QApplication> app(createApplication(argc, argv));
    qmlRegisterType<QMLContextMenu>("CustomComponents", 1, 0, "QMLContextMenu");
    QmlApplicationViewer viewer;
    viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer.setMainQmlFile(QLatin1String("qml/quick1/main.qml"));
    viewer.showExpanded();
    return app->exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T00:42:05.540

使用列表视图创建您自己的矩形。但是这种方式有很多问题，因为在 qml 1 中，qml 小部件不能是顶级窗口。我这样做了：

1.  创建单独的 ContextMenu.qml
2.  使用 loader 实例化它
3.  在我需要的时候展示它

# java - 如何在 jlabel 中的两个动态文本之间保持恒定的间隙？（见图）

> ID：13459526
> 
> 赞同：0
> 
> 时间：2012-11-19T18:05:11.090
> 
> 标签：java, swing, user-interface, jlabel

![在此处输入图像描述](../Images/41dc5dc6938715730cf5626406666bc4.png)

路径部分可能更长或更短，但锁定必须处于静态位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:53:47.150

我不完全确定我是否完全理解了这个要求。据我了解，以下应该可以解决问题

```
 public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame testFrame = new JFrame( "TestFrame" );
        JPanel contents = new JPanel( new BorderLayout(  ) );

        contents.add( new JLabel( "Locked" ), BorderLayout.EAST );

        JPanel textPanel = new JPanel( new FlowLayout( FlowLayout.LEFT ) );
        textPanel.add( new JLabel( "C:\\Users\\Pictures\\Sample pictures\\Chrysanthemum.jpg ") );

        contents.add( textPanel, BorderLayout.CENTER );

        testFrame.setContentPane( contents );
        testFrame.pack();
        testFrame.setDefaultCloseOperation( WindowConstants.DISPOSE_ON_CLOSE );
        testFrame.setVisible( true );
      }
    } );
  } 
```

由于`testFrame.pack()`通话，两个标签粘在一起。但是，如果您手动调整大小，您将看到`locked`标签保持在右侧，而 URI 获得所有可用空间。

# linux - 如何在gerrit中创建合并补丁和合并补丁之前的依赖关系？

> ID：13459528
> 
> 赞同：2
> 
> 时间：2012-11-19T18:05:13.157
> 
> 标签：linux, git, dependencies, patch, gerrit

我有两个补丁`gerrit`，我想让未合并的补丁依赖于合并的补丁。

两者都已上传到gerrit。

*   我该怎么做？有可能吗？

*   我可以通过gerrit来做吗？不是通过[git](http://www.mediawiki.org/wiki/Git/Workflow#Create_a_dependency)和cherry pick。

假设[https://gerrit.wikimedia.org/r/#/c/34106/](https://gerrit.wikimedia.org/r/#/c/34106/)是未合并的文件

合并后的文件[https://gerrit.wikimedia.org/r/#/c/25756/](https://gerrit.wikimedia.org/r/#/c/25756/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:33:17.660

Gerrit 中的依赖关系只是 Git 树图的一种表示。因此，要使变更 B 依赖于变更 A，B 必须以 A 作为其父项。

在您的情况下，您在两个不同的存储库中有两个更改。Gerrit 目前不支持跨存储库依赖项。然而，这是一个[普遍要求的功能](http://code.google.com/p/gerrit/issues/detail?id=377)，并且刚刚在上周末的 Gerrit 用户大会上进行了讨论。希望在 Gerrit 的未来版本中添加对跨存储库依赖项的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T10:34:43.447

使用从[这里](http://www.mediawiki.org/wiki/Git/Workflow#Create_a_dependency)获取的 git 命令：

```
git fetch --all # Make sure we have latest info from the repository
git review -d 1234 # Gerrit change number of the change you want as dependency ("parent")

git checkout -b bug/1234 # Creates a new branch, with the current branch (the dependency) as parent
# Edit files: make your changes
git add someFile.php some/other/file.js 
git commit # Commit your patch

git log -n5 --decorate --pretty=oneline # Verify that the last 5 entries of the log now start with:
# * (HEAD, bug/1234) your change
# * (review/john/700) the dependency
# * (gerrit/master)

git push gerrit HEAD:refs/for/master # Use this instead of `git review`

git branch # Take note of the review/* branch that was created for this, it has an "*" in front of it
git checkout bug/1234 # Check out the local topic branch of your change
git rebase review/john/7000 # The branch name of the gerrit change we checked out earlier

# Resolve conflicts if needed,
# - use "git status" to see the files that need resolution
# - after fixing it in your editor, "git add filename" for each of the fixed files 

git commit --amend -c HEAD # Re-commit your patch replacing the one with the wrong parent

git log -n5 --decorate --pretty=oneline # Verify that the last 5 entries of the log now start with:
# * (HEAD, bug/1234) your change
# * (review/john/700) the dependency
# * (gerrit/master)

git push gerrit HEAD:refs/for/master # Use this instead of `git review` 
```

# javascript - div jquery 可排序小部件的隐藏部分

> ID：13459530
> 
> 赞同：4
> 
> 时间：2012-11-19T18:05:19.977
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

我有一些类似于下面的标记，我试图隐藏“some_row”TR。

```
<div id="sortable">
<table>
    <tr><td>Some Title 1</td></tr>
    <tr class="some_row"><td><textarea ...></td><tr>
</table>    
<table>
    <tr><td>Some Title 2</td></tr>
    <tr class="some_row"><td><textarea ...></td><tr>
</table>
</div> 
```

这是我尝试过的：

```
$(function () {
    $("#sortable")
    .sortable({
        helper: function (e, o) {
            o.find("#some_row").hide();
            return o;
        },
        start: function () {
            $(".some_row").hide();
        },
        stop: function () {
            $(".some_row").show();
        }
    })
    .disableSelection();
}); 
```

最初我从 just`start`和`stop`events 开始，然后我添加`helper`了，因为我猜是一个克隆的选定行，有一个隐藏的 some_row div，但高度相同。

无论如何，就样式而言，上述工作完美，但似乎小部件仍在考虑周围 div 的原始高度。

我能做些什么来挽救这个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:25:24.013

您需要在**`.somerow`**返回帮助程序之前调用 hide on。

助手是原始 div 的克隆以及您看到的被拖动的内容。因此，当您隐藏行时，克隆已经创建。

启动后运行的刷新完成以重新加载可排序对象以调整新高度。

[小提琴示例](http://jsfiddle.net/6naRs/8/)

```
$(function () {
$("#sortable")
.sortable({
    cursor: 'move',
    cursorAt: { left: 0, top: 10 },
    helper: function (e, o) {
        $(".some_row").hide();
        o.find("#some_row").hide();
        return o;
    },
    start: function () {
        $( "#sortable" ).sortable( "refresh" );
    },
    stop: function () {
        $(".some_row").show();
    }
})
.disableSelection();
}); 
```

您还可以使用[jqueryui sortable api](http://api.jqueryui.com/sortable/)`cursor`的and`cursorAt`选项定义拖动时的光标位置（相对于助手）和悬停时显示的光标类型

# jquery - jQuery Ajax 调用中的触发更新进度

> ID：13459532
> 
> 赞同：1
> 
> 时间：2012-11-19T18:05:20.517
> 
> 标签：jquery, asp.net, ajax

jquery ajax调用获取数据时如何显示更新进度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:12:26.490

```
$.ajax({
          url :
          type : 

          beforeSend : function() {

             //Show some processing div
               $('#loader').show();
          },
          success : function() {
               /// Your code
          },

          complete : function() {
               //Hide the processing div
               $('#loader').hide();
          }
      }); 
```

您可以创建一个要在处理时显示的 div。

`beforeSend`您可以在请求之前调用的函数中显示 div 。将其隐藏在`complete`请求完成后调用的函数中。

# maven - 在 Jenkins Maven 作业中显示自定义测试结果

> ID：13459541
> 
> 赞同：10
> 
> 时间：2012-11-19T18:05:56.790
> 
> 标签：maven, jenkins, continuous-integration

我刚刚向现有的 Maven POM 添加了一些 Python 单元测试，但我似乎无法让 Jenkins 在运行构建时报告测试结果。

我在“测试”阶段使用[exec-maven-plugin](http://mojo.codehaus.org/exec-maven-plugin/)从 Maven运行[鼻子测试。](https://nose.readthedocs.org/en/latest/)测试从 Jenkins 作业成功运行，并生成与 xUnit 兼容的测试报告到*target/surefire-reports/TEST-nosetests.xml*，但 Jenkins 没有收到结果。

 *有趣的是，Maven 还报告在执行测试套件之前没有运行测试：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
There are no tests to run.

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- exec-maven-plugin:1.1.1:exec (nosetests) @ server ---
[INFO] ................
[INFO] ----------------------------------------------------------------------
[INFO] Ran 16 tests in 194.799s
[INFO] 
[INFO] OK
[INFO] Registering compile source root /Volumes/Data/workspace/myProject/target
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

那么这是 Jenkins 没有看到结果的问题，还是 Maven 没有将我的测试套件视为实际测试的问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T19:20:46.357

我通过在 Jenkins 中使用“自由风格的软件项目”而不是“maven2/3”项目来解决这个问题。

![新项目](../Images/127e4020a15a00133785f98c5f86059e.png)

在**Build**下，选择**Add build step**并将项目配置为**Invoke top-level Maven targets**。我正在使用*测试*目标。

![调用顶级 Maven 目标](../Images/57d3ba8ff758684ea0776af442636f74.png)

最后，在**Post-build Actions**下选择**Add post-build action** of **Publish JUnit test result report**并将其指向测试的 xUnit 输出。由于某种原因，此选项不适用于 Maven 2/3 作业。

![发布 JUnit 测试结果报告](../Images/ca8f633d544254181b4b702d9ae04e0a.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-15T20:26:10.690

为了建立[bpanulla](https://stackoverflow.com/a/13612767/2807423)的答案，如果您在项目的多个子目录中有测试，您可以在“测试报告 XMLs”字段中使用通配符，例如：`**/target/surefire-reports/*.xml`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-04T14:54:19.593

如果您使用免费项目的模块化程度更高的 Jenkins 设置将无法正确构建子模块。如果生成报告执行 id 的 maven-plugin 是`e2eTests`，则将以下代码段添加到您的 pom.xml 中，jenkins maven 插件将负责其余的工作！

```
<properties>
    <jenkins.e2eTests.reportsDirectory>target/protractor-reports</jenkins.e2eTests.reportsDirectory>
</properties> 
```

见[https://wiki.jenkins-ci.org/display/JENKINS/Building+a+maven2+project](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+maven2+project)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-12T16:43:58.993

添加maven编译器插件后试试

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.8.0</version>
            <executions>
                <execution>
                    <id>default-testCompile</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <encoding>ISO-8859-1</encoding>
                <source>1.8</source>
                <target>1.8</target>
                <useIncrementalCompilation>false</useIncrementalCompilation>
                <testSource>1.8</testSource>
                <testTarget>1.8</testTarget>
            </configuration>
        </plugin> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-19T19:43:21.753

正如您在测试运行输出中看到的那样，Maven 没有将测试识别为测试。此外，要查看 Jenkins 中的结果，您需要检查 nope 是否可以创建 junit 兼容的输出结果文件（我假设），jenkins 可以读取并显示这些文件。*

# android - 安卓歪文字

> ID：13459545
> 
> 赞同：-8
> 
> 时间：2012-11-19T18:06:07.837
> 
> 标签：android

我有一个问题，是否可以使文字倾斜？例如：

![在此处输入图像描述](../Images/a0ef547b23435c13eb185c3e2503220b.png)

任何想法我如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:08:28.700

使用自定义字体。在画布上使用该字体编写文本。旋转画布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:22:29.380

肮脏的方式：JQuery 旋转插件（http://code.google.com/p/jqueryrotate/）。

不错，但在 ie 和大多数旧浏览器 css3 中不受支持：

```
div {
transform:rotate(7deg);
-ms-transform:rotate(7deg); /* IE 9 */
-moz-transform:rotate(7deg); /* Firefox */
-webkit-transform:rotate(7deg); /* Safari and Chrome */
-o-transform:rotate(7deg); /* Opera */
} 
```

# python - csv.reader 只读取一行

> ID：13459553
> 
> 赞同：3
> 
> 时间：2012-11-19T18:06:50.897
> 
> 标签：python, csv, line, sliding-window

我对python很陌生。我正在尝试处理一个非常大的 .csv 文件（约 680 万行）上的数据。这些行的示例如下所示：

```
Group1.1    57645   0.0954454545 
Group1.1    57662   0.09556544778
Group1.13   500 0.357114538 
Group1.13   504 0.320618298 
Group1.13   2370    0.483851368 
Group1.14   42  0.5495688 
```

第一列给出了组，第二列给出了位置，第三列给出了我正在读取的值以运行计算。我正在尝试根据位置在“滑动窗口”中执行这些计算。另一个因素是每个组是彼此分开计算的，因为每个组的位置编号都会重新开始。在我的代码中，我首先尝试在执行任何操作之前将组 ID 作为列表读取，“唯一化”该列表，然后使用该列表作为仅在该特定组上执行“滑动窗口”的基础。然后我移动到唯一列表中的下一个组 ID 并再次运行计算。这是我的代码的基础知识（uniq1 函数是唯一化列表的简单方法：

```
for row in reader:
    scaffolds.append(row[0])
    unique1(scaffolds)
    newfile.seek(0)
    reader=csv.reader((line.replace('\0','') for line in newfile), delimiter="\t")
    if row[0] == unique_scaffolds[i]:
        #...perform the calculations
    else:
        i+=1 
```

我遇到的问题是它只读取我的数据集的第一行，仅此而已。因此，如果我在“for row in reader”之后插入一个“打印行”，我会得到如下输出：

```
['Group1.1', '424', '0.082048032'] 
```

如果我编写这个完全相同的代码而没有任何进一步的计算和循环，它将打印数据集中的每一行。在这种情况下，我将如何在此循环开始时读取每一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:10:50.067

您每次都在重新初始化阅读器。从本质上讲，这导致它卡在第一行。尝试这个

```
reader=csv.reader((line.replace('\0','') for line in newfile), delimiter="\t")
for row in reader:
    scaffolds.append(row[0])
    unique1(scaffolds)
    newfile.seek(0)

    if row[0] == unique_scaffolds[i]:
        #...perform the calculations
    else:
        i+=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:11:37.360

在我看来，您正在替换循环内的阅读器对象。修复它（或摆脱它），你可能会有更好的运气让它工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-28T11:30:59.973

意识到 cvsreader 一次只能读取一行。您必须通过一次一行地读取它们来生成您自己的列表。

# .net - 将工作项从团队项目集合复制到另一个时出现未经授权的访问异常

> ID：13459566
> 
> 赞同：1
> 
> 时间：2012-11-19T18:08:14.113
> 
> 标签：.net, tfs, workitem

在两个单独的团队项目集合中的两个项目之间迁移工作项时遇到问题，如下所示：

我使用 TFS SDK 从源项目中收集工作项并通过**`wi.Save()`**方法复制到目标项目。

它抛出`System.Unauthorizedaccessexcception`**（TF201038：链接的工作项不存在或访问被拒绝。请参阅链接的工作项权限...）

```
InnerException**:System.Web.Services.Protocols.SoapException-> Failed to modify links. The following linked work items do not exist or access is denied: % LinkFailues=\"-3,273123,... 
```

虽然如果我在同一个团队项目集合中的两个项目之间复制 wi 它运行良好

我认为这是一个权限错误，但我找不到任何可用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:58:42.763

我不认为你应该能够做到这一点。当然，普通界面不支持它，但我假设你知道这一点，因为你没有使用它:)

但是，根据[http://social.msdn.microsoft.com/Forums/en-US/tfsintegration/thread/96a49b98-94b3-40b7-bb54-0e3be83b550b/](http://social.msdn.microsoft.com/Forums/en-US/tfsintegration/thread/96a49b98-94b3-40b7-bb54-0e3be83b550b/)可以做到，请参阅他的博客链接：[http： //blogs.msdn.com/b/willy-peter_schaub/archive/2011/10/20/tfs-integration-tools-can-i-migrate-all-work-items-from-one-team-project-collection- to-another.aspx](http://blogs.msdn.com/b/willy-peter_schaub/archive/2011/10/20/tfs-integration-tools-can-i-migrate-all-work-items-from-one-team-project-collection-to-another.aspx)说可以

# iphone - phonegap 2.2 和 facebook 集成

> ID：13459568
> 
> 赞同：0
> 
> 时间：2012-11-19T18:08:26.133
> 
> 标签：iphone, facebook, cordova, web, social-networking

我最近开始使用 phonegap，我注意到没有最新版本 phonegap 2.2 的教程。更重要的是，自从 phonegap 2.0 以来，显然发生了巨大的变化。我在使用 phonegap 时遇到了很多麻烦，因为我是 web-iphone 应用程序的新手。

我正在尝试使用 phonegap 制作一个应用程序，以使用 facebook 登录来获取您的数据（图片、朋友等），然后在您的 facebook 页面上发布、更新状态等。基本上是一个社交应用程序。

似乎没有关于任何 facebook-phonegap 集成和基于社交网络的应用程序的教程是明确的。

我看过一个带有phonegap 1.8教程的视频并且非常接近它，只是得到了很多错误。

我关注了一个： [https ://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)

并有协议。

我尝试了很多不同的东西，但似乎 xcode 根本无法识别某些功能或协议。我正在查看是否遗漏了任何内容，但我已按照以下步骤添加了所有内容。我尝试添加 facebook.Framework，额外的标题，哎呀，我什至在包的 src 文件中添加了来自 facebook SDK 的所有文件： [https ://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

我似乎无法组合一个简单的 facebook 登录应用程序......有人让它工作吗？要遵循的具体步骤是什么？我对一个新的 2.2 科尔多瓦项目很满意，直到我把文件：FacebookCONnectPlugin.h 和 .m 都搞砸了。

我确实有 libsqlite3.0.dylib 并遵循了这些步骤，在各种 .plist 中添加了所有东西，以及所有这些奇怪的冗长而烦人的过程......我试过添加各种库，但就是想不出任何东西否则为什么我不能开始一个简单的cordova项目并获得登录connect fb的选项。就像一个简单的hackbook示例......我让它在Objective-c演示（新的单视图应用程序项目）中工作......为什么一切都必须如此困难并且无法正常工作。我只想得到一个页面来开始编码。光是走到这一步，连起手都这么难。

非常令人沮丧....

任何帮助深表感谢。

-- 我是网络应用程序和 iPhone 的新手...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T12:20:21.523

我让它工作了，但是你需要做很多问题和调整才能让它完全工作。

根据我的经验`PhoneGap`，插件确实有效，但你必须经常玩。例如，我确定`Facebook SDK`PhoneGap 插件不支持新的。即使您导入`Deprecated Headers`. 我不得不使用旧版本的 SDK。而且版本`2.7`并非所有插件都受支持，所以我不得不坚持使用旧版本`2.5`，这样我才能让我的项目正常工作。

即使我让这个插件工作起来很艰难`iOS`，它也不能工作`Android`。如果您正在寻找快速的生产力，那么它是一个非常好的开发平台，但我仍然对严重依赖未持续维护的插件感到有些奇观。

希望这可以帮助。

# ssis - SSIS 无法转换，因为可能会丢失数据

> ID：13459570
> 
> 赞同：26
> 
> 时间：2012-11-19T18:08:30.137
> 
> 标签：ssis

我有一个从 Excel 文档导入到数据库表的 SSIS 包。我收到以下错误：

```
[Excel Source [1]] Error: There was an error with output column "ShipTo" (47) on output
"Excel Source Output" (9). The column status returned was: "The value could not be 
converted because of a potential loss of data.".

[Excel Source [1]] Error: SSIS Error Code DTS_E_INDUCEDTRANSFORMFAILUREONERROR.  The
"output column "ShipTo" (47)" failed because error code 0xC0209072 occurred, and the
error row disposition on "output column "ShipTo" (47)" specifies failure on error. An
error occurred on the specified object of the specified component.  There may be error
messages posted before this with more information about the failure.

[SSIS.Pipeline] Error: SSIS Error Code DTS_E_PRIMEOUTPUTFAILED.  The PrimeOutput method
on component "Excel Source" (1) returned error code 0xC0209029\.  The component returned
a failure code when the pipeline engine called PrimeOutput(). The meaning of the
failure code is defined by the component, but the error is fatal and the pipeline 
stopped executing.  There may be error messages posted before this with more
information about the failure. 
```

我已经阅读并找到了确保我的数据类型匹配的文章，并且我已经做到了。在 Excel 文档中，有 184 行，在这些错误 (shipto) 中列出的列中，它们都具有相同的值，即“全部”。我上次运行时遇到了这个问题，但只有 4 行有“全部”，所以我只是手动输入了这些值，但这一次效率不高。

在目标表上，ShipTo 列是 Varchar(20)，所以我认为大小不是问题，因为它是以下三件事之一：1 位数字、2 位数字或单词 All。

有没有人有任何我可以尝试的其他想法？任何帮助是极大的赞赏。感谢任何可以提供任何帮助的人。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-19T18:29:01.653

当你第一次设置这个包时，我猜想一个或两个数字是 ShipTo 列中的第一个值。您从 Excel 读取的包为该输入字段选择了数字类型，并且“ALL”一词使包失败，因为该字段的输入规范是数字。有几种方法可以预先解决这个问题，但事后解决它，最简单的方法是右键单击 Excel 源并选择显示高级编辑器... 从那里选择显示输入和输出属性的选项卡。在该对话框的输入和输出部分的最顶部，找到 ShipTo 列。您必须深入挖掘才能找到它。将 DataType 设置为“string [DT_STR]”，长度设置为 20。

单击确定，然后尝试再次运行您的包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T01:05:39.523

对我来说，刚刚从 SSIS 中删除了 OLE DB 源并再次添加。工作！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-09T19:43:32.830

这可能不是最好的方法，但如果一切都失败了，您可以忽略转换错误。我的问题是空值不能正确转换，所以我只是忽略了错误，日期以日期形式出现，空值以空值形式出现，因此没有数据质量问题——并非总是如此。为此，请右键单击您的源，单击编辑，然后单击错误输出。转到让您感到悲伤的列，然后在错误下将其更改为忽略失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-10T12:57:26.697

我有同样的问题，单列中有多个数据类型值，包只加载数值。保持所有更新为空。

**解决方案**

要解决此问题，更改 excel 数据类型是解决方案之一。在 Excel 中**复制列数据**并粘贴到不同的文件中。**删除该列**并将**新列作为文本数据类型插入**，并将复制的数据粘贴到新列中。

现在在 ssis 包中**删除并重新创建 Excel 源**表和目标表，将列**数据类型更改为 varchar**。

这将起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-23T13:29:11.007

试试这个，因为它对我有用：

> [SSIS - 由于潜在的数据丢失，无法转换该值](https://stackoverflow.com/questions/11742496/ssis-the-value-cannot-be-converted-because-of-a-potential-loss-of-data)

# linux - Perl 帮助：无法在未定义的值上调用方法“显示”

> ID：13459571
> 
> 赞同：1
> 
> 时间：2012-11-19T18:08:37.963
> 
> 标签：linux, perl, cgi

让我们从基本的背景开始。我们最近将我们的网络托管带到了内部。很少有旧网站仍然使用 Perl。我没有使用 Perl 的经验。让我们开始。我们的主域上有一个这个子网站。

公共链接：[http ://www.gatewayrehab.org/eap/](http://www.gatewayrehab.org/eap)

当您访问网站时，我们会收到以下错误消息

```
 "Software error:

Can't call method "display" on an undefined value at /var/www/www.gatewayrehab.org/app/webroot/eap/index.cgi line 47." 
```

查看 EAP 网站/目录，所有文件都在适当的许可下就位，我再次没有使用 Perl/Cgi 的经验。下面是 index.cgi 文件：

```
#!/usr/bin/perl -w

### the main control file used in the system
BEGIN { unshift @INC, qw(./cgi-bin/include/); }

### send all fatal errors to the browser
use CGI::Carp qw(fatalsToBrowser);
use CGI qw(:standard);
use Error_Handler;
use File_Handler;
use Cookie_Handler;

require "./cgi-bin/setup.cgi";
do "./cgi-bin/include/common.cgi";

### initialize the file handling module
my $File = new File_Handler;
### initialize the cookie handling module
my $Cookie = new Cookie_Handler;

###parse 
$ENV{'REQUEST_METHOD'} =~ tr/a-z/A-Z/;
if ($ENV{'REQUEST_METHOD'} eq "POST"){
    read(STDIN, $buffer, $ENV{'CONTENT_LENGTH'});
} else {
    $buffer = $ENV{'QUERY_STRING'};
}
@pairs = split(/&/, $buffer);

#&error_check;

foreach $pair (@pairs){
    ($name, $value) = split(/=/, $pair);
    $value =~ tr/+/ /;
    $value =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
    $name =~ tr/+/ /;
    $name =~ s/\breq\_//ig;
    $name =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
    $name =~ tr/A-Z/a-z/;
    $name = trim($name);
    $FORM{$name} = trim($value);
}

my %cookiedata = $Cookie -> get_cookies();

### read the summary database
my $summary_ref = $File -> read($login_summary)|| $Error -> display("$!". __LINE__);
my (@summary) = @$summary_ref;

### read the companies database
my $companies_ref = $File -> read($companies_db)|| $Error -> display("$!". __LINE__);
my (@companies) = @$companies_ref;

my %COMP = ();
foreach (@companies) {
    $_ =~ s/\n|\r//g;
    my ($c_num, $c_name) = split(/\t/, $_);
    $COMP{$c_num} = $c_name;
}

if ( $cookiedata{'LOGIN'} != 1 ) {
    my $found = 0;
    my $company_number = $ENV{'REMOTE_USER'};
    $company_number =~ s/s|e|w//g;

    foreach (@summary) {
        $_ =~ s/\n|\r//g;
        my @field = split(/\t/, $_);
        $field[0] = &trim($field[0]);
        $field[2] = &trim($field[2]);       
        $field[3] = &trim($field[3]);
        $field[4] = &trim($field[4]);
        $field[5] = &trim($field[5]);
        $field[6] = &trim($field[6]);

        if ( $field[0] eq "$company_number" ) {
            $found = 1;

            my $firstletters = substr($ENV{'REMOTE_USER'}, 0, 2);
            $firstletters = trim($firstletters);
            if ( $firstletters ne "sw" && $firstletters ne "lf" ) {
                $firstletters = substr($firstletters, 0, 1);
            }
            if ( lc($firstletters) eq "e" ) {
                $field[3] = ($field[3] + 1);                
            } elsif ( lc($firstletters) eq "s" ) {
                $field[2] = ($field[2] + 1);
            } elsif ( lc($firstletters) eq "w" ) {
                $field[4] = ($field[4] + 1);
            } elsif ( lc($firstletters) eq "sw" ) {
                $field[5] = ($field[2] + 1);
            } elsif ( lc($firstletters) eq "lf" ) {
                $field[6] = ($field[6] + 1);
            } else {
                $field[3] = ($field[3] + 1);
            }           

            $_ = join("\t", @field);
        } 
    }

    if ( $found == 1 ) {
        # write data back to file
        # append to summary file
        open(LOG, ">$login_summary") || $Error -> display("$!". __LINE__);
        flock(LOG,2);
        foreach (@summary) {
            print LOG $_ ."\n";
        }
        flock(LOG,8);
        close(LOG);         
        #$File -> file($login_summary);
        #$File -> data(\@summary);
        #$File -> write() || $Error -> display("$!". __LINE__); 
    } else {
        $e = 0;
        $s = 0;
        $w = 0;
        $sw = 0;
        $lf = 0;

        my $firstletters = substr($ENV{'REMOTE_USER'}, 0, 2);
        $firstletters = trim($firstletters);
        if ( $firstletters ne "sw" && $firstletters ne "lf" ) {
            $firstletters = substr($firstletters, 0, 1);
        }
        if ( lc($firstletters) eq "e" ) {
            $e = 1;         
        } elsif ( lc($firstletters) eq "s" ) {
            $s = 1;
        } elsif ( lc($firstletters) eq "w" ) {
            $w = 1;
        } elsif ( lc($firstletters) eq "sw" ) {
            #$sw = 1;
            $s = 1;
        } elsif ( lc($firstletters) eq "lf" ) {
            $lf = 1;
        } else {
            $e = 1;
        }

        # append to summary file
        open(LOG, ">>$login_summary") || $Error -> display("$!". __LINE__);
        flock(LOG,2);
        print LOG $company_number ."\t". $COMP{$company_number} ."\t". $s ."\t". $e ."\t". $w . "\t". $sw ."\t". $lf ."\n";
        flock(LOG,8);
        close(LOG); 
    }

    my (@login_logs) = ();
    my $logline = "";
    $login_logs[0] = $ENV{'REMOTE_USER'};
    $login_logs[1] = $ENV{'REMOTE_ADDR'};
    $login_logs[2] = time();

    open(LOG, ">>$login_logs") || $Error -> display("$!". __LINE__);
    flock(LOG,2);
    print LOG $ENV{'REMOTE_USER'} ."\t". $ENV{'REMOTE_ADDR'} ."\t". time() ."\n";
    flock(LOG,8);
    close(LOG);

    print "Set-Cookie: LOGIN=1";
    print "; path=$cookiepath; domain=$cookiedomain;\n";    
}

my $firstletters = substr($ENV{'REMOTE_USER'}, 0, 2);
$firstletters = trim($firstletters);
if ( $firstletters ne "sw" && $firstletters ne "lf") {
    $firstletters = substr($firstletters, 0, 1);
}

if ( lc($firstletters) eq "e" ) {
    print "Location: http://www.gatewayrehab.org/eap/new/employee/member.htm\n\n";          
} elsif ( lc($firstletters) eq "s" ) {
    print "Location: http://www.gatewayrehab.org/eap/supervisor/\n\n";
} elsif ( lc($firstletters) eq "w" ) {
    print "Location: http://www.gatewayrehab.org/eap/new/worklife/member.htm\n\n";
} elsif ( lc($firstletters) eq "sw" ) {
    print "Location: http://www.gatewayrehab.org/eap/supervisor-wl/\n\n";
    exit;
} elsif ( lc($firstletters) eq "lf" ) {
    print "Location: http://www.gatewayrehab.org/eap/legalandfinancial/\n\n";
    exit;
} else {
    print "Location: http://www.gatewayrehab.org/eap/new/employee/member.htm\n\n";
}

#output html
print "Content-type: text/html\n\n";
print "<h1>hello world!</h1>";

$e = `perl -ver`;
$r = `whereis perl5`;
$z = `whereis sendmail`;#
$w = `top`;#
$d = `w`;

print "<pre>perl version:<br>$e<hr>perl path:<br>$r<hr>sendmail path:<br>$z<hr>top:<br>$w<hr>w:<br>$d<hr>environment vars:<br>";##

while (($key, $val) = each %ENV) {
    print "$key = $val\n";
}

$x= 'lowercase';
print "<hr>path tranlsated(NT)<br>$ENV{'PATH_TRANSLATED'}</pre>";
#$x = uc($x);
print "<br>$x";
exit; 
```

请让我知道我错过了什么。如果您需要查看更多“包含”文件，请告诉我。

这里也是我们的 cgi 配置的链接。[http://www.gatewayrehab.org/eap/cgi-bin/cgi.cgi](http://www.gatewayrehab.org/eap/cgi-bin/cgi.cgi)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:20:04.293

错误来自这一行：`my $summary_ref = $File -> read($login_summary)|| $Error -> display("$!". __LINE__);`。表示`$Error`不存在或其值为`undef`. 事实上，我没有看到这样的变量被声明或初始化。也许它应该是由 Error_Handler 导出的？？？

尝试报告另一个错误时发生此错误。您可以尝试替换（如果只是暂时的）`$Error -> display("$!". __LINE__);`并`die($!)`检查服务器的错误日志中的错误消息。也就是说，肯定是“没有这样的文件或目录”或“权限被拒绝”，所以也许不值得花时间找出确切的消息。（更新：实际上，我认为消息将被“重定向”到您的浏览器，这样会更容易。）

我在这里猜测，但看起来它正在尝试读取名为`$login_summary`. 我不知道这是在哪里设置的（如果有的话！），所以你可能想找出它的价值，也许它是在哪里设置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:50:17.383

正如 ikegami 指出的那样，您看到的错误表明它`$Error`没有被初始化，并且查看脚本的其余部分，我猜想（首先）需要的是以`$File`与`$Cookie`变量相同的方式初始化它. 在脚本的第 20 行之后添加这一行：

```
my $Error = new Error_Handler; 
```

这可能会给您一个更好的错误消息，但它可能只会告诉您在添加`die($!);`行时已经发现的内容：“没有这样的文件或目录”。

您的脚本也正在`do`生成一个名为`./cgi-bin/include/common.cgi`. 检查此文件中的`$login_summary`变量，以了解它试图访问的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:59:09.897

我已经通过快速修复解决了这个问题。我不知道它为什么起作用，但它对我有用。这是我所做的......在网上阅读后，我发现在所有 .(dot)cgi 文件的标题上添加“-w”可以使其工作。我确实希望有一种更好的方法可以在一个地方添加“-w”，然后将其添加到所有 .cgi 文件中。

简而言之`#!/usr/bin/perl`，改为`#!/usr/bin/perl -w`

谢谢大家。

# php - 进行第一次 Codeigniter 登录 - 我是否尝试做太多事情？

> ID：13459574
> 
> 赞同：1
> 
> 时间：2012-11-19T18:09:03.337
> 
> 标签：php, codeigniter

我这是我的第一个 CI 项目，我正在尝试构建一个登录系统（3 个用户组 = 管理员、成员、公共）。我正在使用离子身份验证。

如果你想跳过细节..

..我的问题是我在我的家庭控制器中没有正确地执行我的“require_once”，或者我不了解关于扩展类的一些东西。或者我没有我妈妈告诉我的那么聪明。我收到此错误：

```
Fatal error: require_once() [function.require]: Failed opening required 'application/Application/Core/public_controller.php' (include_path='.:/Applications/MAMP/bin/php/php5.3.6/lib/php') in /Applications/MAMP/htdocs/NOIR_FINAL/application/controllers/public/home.php on line 4 
```

我参考了这篇文章，因为它看起来是一个很好的做法。具体来说，我使用 MY_Controller 扩展了 CI_Controller（包含所有扩展 CI_Controller 的 Admin、Member 和 Public 控制器）。

[http://jondavidjohn.com/blog/2011/01/scalable-login-system-for-codeigniter-ion_auth](http://jondavidjohn.com/blog/2011/01/scalable-login-system-for-codeigniter-ion_auth)

然后我看到一些批评将所有这 3 个管理员、成员和公共控制器“打包”到一个“MY_Controller”中......所以根据 Phil Sturgeon，我试图将它们分成单独的类并使用 __autoload() 将它们拉入。

[http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY](http://philsturgeon.co.uk/blog/2010/02/CodeIgniter-Base-Classes-Keeping-it-DRY)

但不知何故，我觉得我现在只是让事情变得不必要地复杂化。

我想通过登录，然后根据用户组将它们发送到专用文件夹中的 3 个“家庭”控制器之一。这些家庭控制器扩展了Admin_controller、Member_controller 或Public_controller ...并且其中的每一个都扩展了MY_Controller，而MY_Controller 又扩展了CI_Controller。所以我会在他们各自的控制器中使用特定的方法，并在 MY_Controller 中使用一些通用的东西（检查站点是否处于活动状态/“打开”..检查用户代理..等）。对我来说，这似乎是一种很好的分离用户角色的方法。

根据 Sturgeon 的文章，我的配置中也有这个。

```
function __autoload($class)
{
    if(strpos($class, 'CI_') !== 0)
    {
        @include_once( APPPATH . 'core/'. $class . EXT );
    }
} 
```

那么我是否会以正确的方式进行？自从我第一次尝试这个，我开始认为这变得有点太“弗兰肯斯坦”了。这是“身份验证/登录”...

```
function login() {

    if($_POST) {   //clean public facing app input
        $this->form_validation->set_rules('email', 'Email', 'required|valid_email');
        $this->form_validation->set_rules('password', 'Password', 'required');

        if ($this->form_validation->run() == true)
        {
            $identity = $this->input->post('email', true);
            $password = $this->input->post('password', true);
            $remember = $this->input->post('remember');
            if($this->ion_auth->login($identity,$password, $remember)) 
            {
                if($this->ion_auth->in_group('1'))
                {
                    $this->session->set_flashdata('message','Welcome');
                    redirect('admin/home','refresh'); // this might have to change @todo
                }
                elseif($this->ion_auth->in_group('2'))
                {
                    $this->session->set_flashdata('message','Welcome');
                    redirect('member/home','refresh');
                }
                else
                {
                    redirect('public/home','refresh');
                }   
            }
        }
        else 
        {
            // set error flashdata
            $this->session->set_flashdata('message','Your login attempt failed.');
            redirect('/');
        }
    }

    redirect('/');
} 
```

..这里是“controllers/member/”中的 home.php .. 基本上只是设置视图并将 flashdata 消息（如果有）转换为 $data{'message']

```
class Home extends Member_Controller{
    require_once(APPPATH.'Application/Core/member_controller.php');
    public function __construct()
    {
        parent::__construct;
    }
    public function index()
    {
        // remember that $this->the_user is available in this controller
        // as is $the_user available in any view I load
        $this->load->model('Member_model');
        $this->data['message'] = $this->session->flashdata('message');
        $this->data['query'] = $this->Member_model->get_members();
        $this->data['title'] = 'Home';
        $this->load->view('member_view', $this->data);
    }
} 
```

这是我的成员控制器和一些成员方法

```
class Member_Controller extends MY_Controller{
    public function __construct()
    {
        parent::__construct();
    }
    public function index()
    {
        $this->load->view('member_view');
    }
    public function edit_profile(){}
    public function delete_profile(){} 
```

}

.. 和 MY_Controller 有一些常用的方法

```
class MY_Controller extends CI_Controller {
    protected $the_user;
    public function __construct()
    {
        parent::__construct();
        if( $this->config->item('site_open' ) === FALSE)
        {
            show_error("Sorry the site is shut right now.");
        }

        if( $this->ion_auth->logged_in() )
        {
            $this->the_user = $this->ion_auth->user()->row();
            $data->the_user = $this->the_user;
            $this->load->vars($data);
        }
        else
        {
            redirect('/','refresh');
        }

        //if the user is using a mobile, use a mobile theme
        $this->load->library('user_agent');
        if( $this->agent->is_mobile() )
        {
            $this->template->set_theme('mobile'); // what about admin @todo
        }
    }

    public function index()
    {
        redirect('/','refresh');
    }
} 
```

那么我正确地接近这个了吗？作为一个额外的问题，将索引方法放在只会被扩展的类上是否正确？例如，没有人会在 MY_Controller 上“登陆”。它总是会被延长。那么我需要放一个索引方法吗？它只是好的形式吗？我应该把它变成一个抽象类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:37:24.863

在使用 require/include 时，您需要指定它，`PATH`并且它必须是绝对的或相对的。

绝对：

```
/my/cool/folder/file.php //which means from the root ("/") of the server 
```

相对的：

```
./file.php //which means look in the current directory for file.php 
```

或者

```
../file.php //which means go up one directory and look for file.php 
```

如果 a`PATH`没有在`require`or中定义`include`，系统将使用[定义](http://www.php.net/manual/en/ini.core.php#ini.include-path)在`php.ini`

您设置的内容：`require_once('application/Application/Core/public_controller.php')`将不起作用，因为您没有设置相对值或绝对值，因此系统正在`PATH`寻找`public_controller.php`.`include_path``php.ini`

所有这一切，我们甚至还没有开始解释为什么你首先要包括你的公共控制器。

当你扩展一个类时，你就是让它作为现有类的附属物。因此，当您扩展时`CI_Controller`，由于`CI_Controller`在应用程序中已经可用，扩展功能也将可用，而无需包含文件。

不，您不需要`index`在`MY_Controller`.

最后，我不知道你需要做这一切......[扩展核心类通常是为了添加一些你可能需要或缺少的功能到核心或覆盖现有功能](http://codeigniter.com/user_guide/general/core_classes.html)。您正在做的是将在控制器中可以正常运行的代码移动到核心应用程序中。我认为它会起作用，但我认为这不是最佳实践，也不是很实用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T19:14:06.680

由于您提供的路径，您的包含失败，请查看错误消息。应用程序是不必要的，因为这是 CI 认为的应用程序路径。

```
require_once(APPPATH.'core/member_controller.php'); 
```

那应该可以解决它，**但是在重读该代码后，我意识到……您甚至不需要它。无论如何扩展它应该包括它？我知道我没有在我的扩展控制器中做任何类似的包含**。

至于过于复杂的事情。我个人不觉得你过于复杂，除非在一个方面。我们的应用程序有 Admin_Controller、User_Controller 和 MY_Controller。您可能只是过于复杂的地方是拥有 Public_Controller。正如我所看到的，管理员和用户将拥有 MY 的所有功能，这是应用程序本身的基本功能。所以这本质上是我的公共控制器。

能够在一个地方限制对站点某些部分的访问非常有意义，并且它确实使应用程序的整体流程也更有意义。在我看来，这也意味着更少的开销，因为您没有在每次加载页面时加载具有所有不同场景所需的所有功能的控制器。

# installation - rvm安装配置错误mac os x lion

> ID：13459575
> 
> 赞同：1
> 
> 时间：2012-11-19T18:09:05.817
> 
> 标签：installation, osx-lion, rvm, configure

由于配置错误，我的 rvm 无法安装任何东西：

```
configure:3489: error: C compiler cannot create executables 
```

看着`config.log`，我看到：

```
ac_cv_build=x86_64-apple-darwin11.4.2
ac_cv_env_CCC_set=
ac_cv_env_CCC_value=
ac_cv_env_CC_set=set
ac_cv_env_CC_value=/usr/local/bin/gcc-4.2
ac_cv_env_CFLAGS_set=
ac_cv_env_CFLAGS_value=
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_CXXFLAGS_set=
ac_cv_env_CXXFLAGS_value=
ac_cv_env_CXX_set=
ac_cv_env_CXX_value=
ac_cv_env_LDFLAGS_set=set
ac_cv_env_LDFLAGS_value='-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include -L/Users/davidholmgren/.rvm/usr/lib'
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value= 
```

似乎 configure 正在破坏标志变量的解析，但这发生在任何 rvm 安装中，所以我怀疑问题不在 rvm 的调用中`configure.in`，而是在 rvm 的调用中，但是`config.log`说

```
It was created by configure, which was
generated by GNU Autoconf 2.68\.  Invocation command line was

  $ ./configure --enable-shared --disable-install-doc --prefix=/Users/davidholmgren/.rvm/rubies/ruby-1.9.3-p327 
```

我怎样才能解决这个问题？

谢谢！

[在rvm install 1.9.3](https://stackoverflow.com/questions/13385273/rvm-install-1-9-3-failing?rq=1)中找到修复（编辑 /etc/rvmrc）失败

谢谢！

# sql - SQL，在多条件的多连接中，即使其他条件为假，我也想要一个值

> ID：13459577
> 
> 赞同：1
> 
> 时间：2012-11-19T18:09:22.260
> 
> 标签：sql, left-join, inner-join, where

这是我的查询，然后我解释：

```
SELECT 
    tyds.product_tyd,
    tyds.user_tyd,
    COALESCE(action_tyd, 'NONE') AS action_tyd 
FROM tyds
INNER JOIN users
    ON tyds.user_tyd = users.id_user
INNER JOIN products
    ON tyds.product_tyd = products.id_product
INNER JOIN companies
    ON products.id_company_product = companies.id_company 
WHERE users.key_user = '14967d378a580cdf020350f4eb626f16'
AND companies.module_key_company = 'daL/RqzZcfqc.'
AND products.cancelled_product >= 0
AND products.code_product = 'app_1' 
```

`users.key_user`给我 users.id_user 也是`tyds.user_tyd`. `companies.module_key_company`给我`products.company_id_product`

在`products`表中我允许一个`ID_product`带有 a`code_product`然后`company_id`我用它`ID_product`在我的`tyds`表中记录

我想知道这个用户是否在表`TYDS`中为指定的产品制作记录，然后得到他`id_user`和其他一些东西。它在找到记录时起作用，当然在表中没有记录或对应关系时不起作用`TYDS`。

但我想知道的是，如果表`users.id_user`中没有记录，我是否可以得到 EVEN `TYDs`。

所以实际上是得到`users.key_user`即使其他三个条件返回FALSE的结果。

我知道我上周问过类似的问题，但即使有先例的解决方案我也找不到。

非常感谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:28:29.787

从您的描述看来，您更像是想要列出所有用户及其相应的 tyds 记录，即使他们没有任何相关记录。我相信这就是你想要的。

```
SELECT
    users.id_user,
    tyds.product_tyd,
    tyds.user_tyd,
    COALESCE(action_tyd, 'NONE') AS action_tyd 
FROM users
LEFT JOIN tyds
    ON tyds.user_tyd = users.id_user
LEFT JOIN products
    ON tyds.product_tyd = products.id_product
    AND products.cancelled_product >= 0
    AND products.code_product = 'app_1'
LEFT JOIN companies
    ON products.id_company_product = companies.id_company
    AND companies.module_key_company = 'daL/RqzZcfqc.'
WHERE users.key_user = '14967d378a580cdf020350f4eb626f16' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:15:50.433

将这些条件移动到连接子句的`ON`条件中：

```
SELECT 
    tyds.product_tyd,
    tyds.user_tyd,
    COALESCE(action_tyd, 'NONE') AS action_tyd 
FROM tyds
INNER JOIN users
    ON tyds.user_tyd = users.id_user
INNER JOIN products
    ON tyds.product_tyd = products.id_product
    AND products.cancelled_product >= 0 -- moved from where clause to here
    AND products.code_product = 'app_1'-- moved from where clause to here
INNER JOIN companies
    ON products.id_company_product = companies.id_company 
    AND companies.module_key_company = 'daL/RqzZcfqc.' -- moved from where clause to here
WHERE users.key_user = '14967d378a580cdf020350f4eb626f16' 
```

连接条件可能不仅仅包含“id 匹配”。通过在子句中放置特殊条件`ON`，您可以将返回的行限制为仅以您想要的方式连接的行，但如果它们不这样做，仍然会得到一个空的左连接（即使有其他行具有相同的“id”）匹配）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T09:18:22.803

我会链接这样的东西：

```
SELECT B_user, tyds.product_tyd 
FROM tyds
INNER JOIN products ON tyds.`product_tyd` = products.id_product
AND products.`cancelled_product` >= 0
AND products.code_product = 'app_1'
INNER JOIN companies ON products.`id_company_product` = companies.`id_company`
AND companies.`module_key_company` = 'daL/RqzZcfqc.'
WHERE tyds.`user_tyd` IN 
(SELECT id_user AS B_user FROM users WHERE key_user = '14967d378a580cdf020350f4eb626f16') 
```

即使 products.code_product 错误等等，也可以获得 B_user ......

# asp.net - 在 Visual Studio 中打开网站时，将网站从 .NET 2.0 升级到 .NET 4.0 会发出警告“此项目的目标是 ASP.NET 2.0...”

> ID：13459578
> 
> 赞同：5
> 
> 时间：2012-11-19T18:09:32.133
> 
> 标签：asp.net, .net, visual-studio

我正在使用 Visual Studio 2012。我一直在使用 .NET 2.0 的旧网站上进行开发。它是在我的本地机器上使用 IIS 配置的，并为 .NET 2.0 设置了应用程序池。我可以使用 File-Open-Web Site 从 Visual Studio 打开这个网站……没问题。这是一个网站，而不是一个已编译的 Web 应用程序。

我刚刚将我的应用程序池更改为 .NET 4.0。我的网站运行良好。

但是，当我在 Visual Studio 中选择 File-Open-Web Site 时，我收到一条错误消息：

> 站点“....”当前配置为与较新版本的 ASP.NET (4.0) 一起使用。该项目面向 ASP.NET 2.0；如果未使用该工具配置某些功能，则可能无法正确呈现。您希望为使用 ASP.NET 2.0 的用户配置站点吗？

我可以单击“否”并附加到并调试应用程序没有问题。

我在网站或我的文档中的任何地方都没有 SLN、SUO、CSPROJ 或 USER 文件。我已删除 web.config 文件的内容，使其为空。每次打开网站时，我仍然会继续收到此消息。

*   这个消息是从哪里来的？
*   为什么 Visual Studio 认为网站是为 .NET 2.0 配置的？

这是我机器本地的东西。

该公司的其他开发人员已将他们的应用程序池升级到 4.0，并且在从 Visual Studio 打开网站时没有看到此消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:14:39.227

虽然您可能已将解决方案升级为由 Visual Studio 2012 打开，但您并未更改目标 .NET 运行时。

要以 .NET 2.0 运行时以外的其他对象为目标，您需要在项目属性中更改目标。

有关完整说明，请参阅[以下内容。](http://msdn.microsoft.com/en-us/library/bb398791%28v=vs.90%29.aspx)

# zend-framework - 如何验证 ZF2 中的复选框

> ID：13459581
> 
> 赞同：5
> 
> 时间：2012-11-19T18:09:49.883
> 
> 标签：zend-framework, zend-framework2

我已经阅读了许多 Zend Framework 缺少默认复选框验证的解决方法。

我最近开始使用 ZF2 并且文档有点缺乏。

有人可以演示如何使用 Zend 表单和验证机制验证复选框以确保它被勾选吗？我正在为我的表单使用数组配置（使用 ZF 网站上的示例应用程序中的默认设置）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-14T11:58:32.747

试试这个

表单元素：

```
$this->add(array(
            'type' => 'Zend\Form\Element\Checkbox',
            'name' => 'agreeterms',
            'options' => array(
                'label' => 'I agree to all terms and conditions',
                'use_hidden_element' => true,
                'checked_value' => 1,
                'unchecked_value' => 'no'
            ),
        )); 
```

在过滤器中，添加数字验证

```
use Zend\Validator\Digits; // at top

$inputFilter->add($factory->createInput(array(
                        'name' => 'agreeterms',
                        'validators' => array(
                            array(
                                'name' => 'Digits',
                                'break_chain_on_failure' => true,
                                'options' => array(
                                    'messages' => array(
                                        Digits::NOT_DIGITS => 'You must agree to the terms of use.',
                                    ),
                                ),
                            ),
                        ),
                    ))); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-09T02:21:34.867

您也可以从选项中删除隐藏的表单字段（从纯粹的 HTML 角度来看，我觉得有点奇怪），而不是像这样将其值设置为“否”：

```
$this->add(array(
        'type' => 'Zend\Form\Element\Checkbox',
        'name' => 'agreeterms',
        'options' => array(
            'label' => 'I agree to all terms and conditions',
            'use_hidden_element' => false
        ),
    )); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-19T14:44:56.003

我遇到了同样的问题，做了一些类似于[Optimus Crew 的建议](https://stackoverflow.com/a/14874347/1612219)，但使用了 Identical Validator。

如果您未设置`checked_value`复选框的选项并将其保留为默认值，则在发布数据时应传入“1”。如果需要，您可以设置它，但请确保您在`token`验证器的选项中检查相同的值。

```
$this->filter->add(array(
        'name' => 'agreeterms',
        'validators' => array(
            array(
                'name' => 'Identical',
                'options' => array(
                    'token' => '1',
                    'messages' => array(
                        Identical::NOT_SAME => 'You must agree to the terms of use.',
                    ),
                ),
            ),
        ),
    )); 
```

`'use_hidden_element' => false`如果您使用表单复选框的选项，这将不起作用。如果你这样做，你最终会显示默认的 NotEmpty 消息`Value is required and can't be empty`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-05T23:41:12.180

这与问题没有直接关系，但如果您希望将用户的响应存储在数据库中，这里有一些 zf2 复选框提示......

1.  **一定要使用“1”和“0”字符串，不要**费心去尝试让其他任何东西工作。另外，您可以将这些值直接用作位/布尔列的 SQL 值。
2.  **务必**使用隐藏元素。如果您不这样做，表格将不会发布任何价值，也没有人想要这样。
3.  **不要**尝试将值过滤为布尔值。出于某种原因，当布尔值为 false 时，尽管有`'required' => false;`

表单中的示例元素创建：

```
$this->add([
    'name' => 'cellPhoneHasWhatsApp',
    'type' => 'Checkbox',
    'options' => [
        'label' => 'Cell phone has WhatsApp?',
        'checked_value' => '1',
        'unchecked_value' => '0',
        'use_hidden_element' => true,
    ],
]); 
```

示例输入过滤器规范：

```
[
    'cellPhoneHasWhatsApp' => [
         'required' => false,
     ],
] 
```

如果您想使用引导程序隐藏其他一些表单字段，这是一个示例：

```
$this->add([
    'name' => 'automaticTitle',
    'type' => 'Checkbox',
    'options' => [
        'label' => 'Automatically generate title',
        'checked_value' => '1',
        'unchecked_value' => '0',
        'use_hidden_element' => true,
    ],
    'attributes' => [
        'data-toggle'     => 'collapse',
        'data-target'     => '#titleGroup',
        'aria-expanded'   => 'false',
        'aria-controls'   => 'titleGroup'
    ],
]); 
```

我是 ZF2 的粉丝，但归根结底，您只需要找出哪些适用于它，哪些不适用（尤其是 Forms）。希望这对某人有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-10T12:38:03.600

非常老的问题，但认为它可能仍然被像我这样仍在使用 Zend Framework 2 的人使用/引用。（在我的情况下使用[ZF 2.5.3 ）](https://github.com/zendframework/zendframework/releases/tag/release-2.5.3)

[杰夫上面的回答](https://stackoverflow.com/a/39885325/1155833)帮助我在这里为我正在使用的东西获得正确的配置。在我的用例中，我需要复选框，但将其留空将被视为“假”值，这是允许的。他的回答帮助我接受了`false`价值观，尤其是他的：

> 不要尝试将值过滤为布尔值。出于某种原因，当布尔值结果为假时

用例是启用/禁用某些实体，例如国家或语言，以便它们不会出现在`getEnabled[...]()`存储库功能中。

**表单元素**

```
$this->add([
    'name' => 'enabled',
    'required' => true,
    'type' => Checkbox::class,
    'options' => [
        'label' => _('Enabled'),
        'label_attributes' => [
            'class' => '',
        ],
        'use_hidden_element' => true,
        'checked_value' => 1,
        'unchecked_value' => 0,
    ],
    'attributes' => [
        'id' => '',
        'class' => '',
    ],
]); 
```

**输入过滤器**

```
$this->add([
    'name' => 'enabled',
    'required' => true,
    'validators' => [
        [
            'name' => InArray::class,
            'options' => [
                'haystack' => [true, false],
            ],
        ],
    ],
]) 
```

# php - 实现社交登录用户模型

> ID：13459582
> 
> 赞同：1
> 
> 时间：2012-11-19T18:09:50.707
> 
> 标签：php, facebook, database-schema

我希望用户能够从我的应用程序中的任何提供商（facebook、google 等）登录，并在我的服务器上创建一个帐户。我想弄清楚的是构建用户模型的最佳方法。

例如，

用户使用 facebook 登录，将创建一个新的用户记录，并且记录中会有一个标志告诉我该帐户是 facebook 帐户。如果同一用户在我的服务器上创建了一个标准帐户，然后使用 facebook 重新登录，我该如何处理？将这两个帐户相互合并/关联或将它们视为两个不同记录的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:40:32.080

目前我正在做同样的事情。我将使用这些规则：

*   检查电子邮件。它是识别用户的最佳方式。
*   注册成功后设置特殊的长期cookie。稍后您可以要求用户合并帐户。
*   用户名、实名、生日等可用作附加参数进行比较。

关于方案：我创建了一个表`users`（id、username、email）和`user_data`（id、user_id、email、service_id、service_name、service_type、is_active）。`service_id`是提供者特定的标识符，`service_type`是提供者名称（google/facebook/etc），并且`service_name`是来自提供者站点的显示名称（可能与`user`.不同`username`）。`service_id + service_type`必须是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:12:44.087

知道它们是否是同一个帐户的唯一方法是使用一些标识符。您可以请求从 FB 登录返回电子邮件并将该信息存储在表格中的电子邮件字段中，然后如果他们尝试使用该电子邮件创建帐户，您可以通知他们他们已经有一个帐户。

否则，我不明白你怎么知道他们是不是同一个人。

# iphone - 我的应用程序在低速连接时受到影响

> ID：13459589
> 
> 赞同：1
> 
> 时间：2012-11-19T18:10:08.470
> 
> 标签：iphone, objective-c, ios

我当前的应用程序正在使用互联网来下载谷歌地图（运行 iOS6）。此外，连接到服务器以从数据库中检索信息，获取用户详细信息等。我的问题是，当 iPhone 使用移动互联网并且信号太弱（没有 3G）时，地图视图加载了 Apple 地图在上面。需要等待 5-6 分钟才能下载谷歌地图并将它们作为叠加层放在上面。有任何有效的方法或技巧来解决这种情况。用户为了显示地图（谷歌）等待这么多看起来不太好。

提前致谢。

# parsing - LR(1) - 物品，向前看

> ID：13459590
> 
> 赞同：6
> 
> 时间：2012-11-19T18:10:09.277
> 
> 标签：parsing, context-free-grammar, formal-languages, automata-theory

我很难理解 LR(1) 中的前瞻原理 - 项目。如何计算前瞻集？

举个例子，我有以下语法：

```
S -> AB
A -> aAb | b
B -> d 
```

然后第一个状态将如下所示：

```
S -> .AB , {look ahead}
A -> .aAb, {look ahead}
A -> .b,   {look ahead} 
```

我知道前瞻是什么，但我不知道如何计算它们。*我已经用谷歌搜索了答案，但找不到以简单方式解释这一点的网页。*

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T22:20:46.667

我将为您的示例写下前两个状态：

```
S -> AB
A -> aAb | b
B -> d 
```

### 状态 0：

```
(1) S -> .AB, {$}   # Once we have done this rule it's EOF ($) 
(2) A -> .aAb, {d}  # from (1), after A there has to be a B whose first symbol has to be d
(3) A -> .b, {d}    # as above 
```

### 状态 1：

```
(4) A -> a.Ab, {d}   # from (2)
(5) A -> .aAb, {b}   # from (4), the symbol after the A has to be b
(6) A -> .b, {b}     # from (4), as above
(7) A -> b., {d}     # from (3)
(8) S -> A.B, {$}    # from (1) and (7)
(9) B -> .B, {$}     # from (8) 
```

依此类推，继续遵循与 LR(0) 解析器相同的移位/减少/关闭，但跟踪（**前瞻**）下一个符号......
（状态 2+ 更长，我不推荐手工制作它们！）

我建议查看[Udacity 的**编程语言**](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCIQFjAA&url=http%3A%2F%2Fwww.udacity.com%2Fcourse%2Fcs262&ei=J66qUJ3uAoq20QWTmoGQBw&usg=AFQjCNFqXXDveASa9cxKH1pRQbQc4GvIEA)课程，以了解有关词法分析和解析的更多信息。*还有[一个关于 wikipedia 的例子](http://en.wikipedia.org/wiki/Canonical_LR_parser#Constructing_LR.281.29_parsing_tables)和一个[相关的 SO question](https://stackoverflow.com/questions/1989922/building-lr1-configuration-lookahead)。*

# facebook - 使用 SessionLoginSample 时特定帐户的 OAuthException 代码 #2

> ID：13459594
> 
> 赞同：2
> 
> 时间：2012-11-19T18:10:19.770
> 
> 标签：facebook, facebook-graph-api, oauth, facebook-oauth

我们遇到了一个非常奇怪的案例，其中特定的 Facebook 帐户在成功登录后请求“https://graph.facebook.com/me/friends?access_token=XXX”时失败。在我们的应用程序中发现这种情况后，我验证了在使用 Facebook SDK 示例 - SessionLoginSample 时发生了完全相同的异常。成功登录此特定帐户并授予权限后，我返回示例应用程序并单击测试链接。这是回应：

```
{
   "error": {
      "message": "An unexpected error has occurred. Please retry your request later.",
      "type": "OAuthException",
      "code": 2
   }
} 
```

当我使用任何其他 Facebook 帐户登录时，我得到了我所期望的 - 列出我的 Facebook 朋友的 JSON 内容。

关于如何调查此问题的任何想法？在 FB 支持网站上运气不佳，我什至不清楚如何向他们发布错误报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:39:25.263

根据上面的评论，我认为您的问题是其中一个用户是来自旧测试用户系统的旧“平台测试用户” - 这可能不再起作用。

当前的测试用户框架记录在这里：[https](https://developers.facebook.com/docs/test_users/) ://developers.facebook.com/docs/test_users/ - 如果您不能使用真实帐户进行测试，这些可能是一个很好的解决方法

# python - 通过“from pymod import *”加载python模块时重新加载它

> ID：13459596
> 
> 赞同：2
> 
> 时间：2012-11-19T18:10:24.027
> 
> 标签：python

假设我通过以下方式从 python 模块导入几个函数：

```
import module1
from module2 import * 
```

现在，如果我更改 module1 中的一个函数，我可以运行

```
reload(module1) 
```

但是我不能对 module2 做同样的事情 我怎样才能做同样的事情来重新加载 module2 中的所有功能？目前，我必须退出并重新启动 iPython。

我正在使用 Python 2.7.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:14:57.410

最好的建议是不要使用`from module2 import *`.... 如果你不想`module2`每次都重新输入，你可以做类似的事情`import module2 as m2`

那么你就可以`reload(m2)`

# wikipedia - 如何从维基百科页面获取标题

> ID：13459598
> 
> 赞同：1
> 
> 时间：2012-11-19T18:10:28.983
> 
> 标签：wikipedia, wikipedia-api

是否有直接的 API 调用，我可以从维基百科页面获取标题。

例如，来自[http://en.wikipedia.org/wiki/Chicago](http://en.wikipedia.org/wiki/Chicago)，我想检索以下内容：

1 历史
 1.1 快速增长和发展
 1.2 20 世纪和 21 世纪
2 地理
 2.1 地形
 2.2 气候
3 城市景观
 3.1 建筑
等等-----------

我查看了[http://www.mediawiki.org/wiki/API:Lists/All](http://www.mediawiki.org/wiki/API:Lists/All)，但找不到从 wiki 页面上提供上述列表的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:56:00.340

您想要的不是页面列表，因此它不在您链接到的页面上。但是可以检索某些页面的部分标题列表。为此，您可以使用[`action=parse`](https://www.mediawiki.org/wiki/API%3aParse)with `prop=sections`。

例如，[http](http://en.wikipedia.org/w/api.php?format=xml&action=parse&prop=sections&page=Chicago) ://en.wikipedia.org/w/api.php?format=xml&action=parse&prop=sections&page=Chicago返回

```
<api>
    <parse title="Chicago">
        <sections>
            <s toclevel="1" level="2" line="History" number="1" index="1" fromtitle="Chicago" byteoffset="8123" anchor="History"/>
            <s toclevel="2" level="3" line="Rapid growth and development" number="1.1" index="2" fromtitle="Chicago" byteoffset="12922" anchor="Rapid_growth_and_development"/>
            <s toclevel="2" level="3" line="20th and 21st centuries" number="1.2" index="3" fromtitle="Chicago" byteoffset="21558" anchor="20th_and_21st_centuries"/>
            <s toclevel="1" level="2" line="Geography" number="2" index="4" fromtitle="Chicago" byteoffset="28176" anchor="Geography"/>
            … 
```

# bash - 添加变量的基本 bash 脚本功能

> ID：13459601
> 
> 赞同：0
> 
> 时间：2012-11-19T18:10:41.617
> 
> 标签：bash, function, variables, math, scripting

我正在尝试创建一个将时间字符串转换为总分钟数的函数，即“11:22”将返回 682

```
str_to_min(){
    ARR_T=$(echo $1 | tr ":" "\n")
    HOUR=${ARR_T[0]}
    MINUTE=${ARR_T[1]}
    let MIN=(60*$HOUR)
    let MIN=($MIN+$MINUTE)
    #echo total minutes $MIN
    return $MIN
}

str_to_min "11:22" 
```

但我不断收到以下错误：

./find_service_to_display.sh: line 5: let: MIN=(60*11: missing `)' (error token is "11") ./find_service_to_display.sh: line 6: let: MIN=(11: missing`)' （错误标记是“11”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:19:03.660

试试这个：

```
str_to_min() {
    local hours=${1%:*};
    local mins=${1#*:};
    echo $((hours * 60 + mins));
} 
```

除非您真的想要返回状态（其作用类似于程序退出代码），否则您可能想要“回声”而不是“返回”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:21:04.257

```
str_to_min() { echo $1 | awk -F: '{print 60*$1 + $2}'; } 
```

请注意，这不会返回值，而是将其打印到标准输出。您确实无法返回该值，因为返回值必须在 0-255 范围内，并且将被截断到该范围。相反，此函数始终返回零以指示成功。如果字符串格式不正确，则返回错误值可能是个好主意。简单检查的一个想法是：

```
str_to_min() { echo "$1" | awk -F: '/^[0-9]+:[0-9]+$/{ print 60*$1 + $2; exit(0)} 
    {exit 1}'; } 
```

# c++ - 如何摆脱 GCC 中已弃用函数中的已弃用警告？

> ID：13459602
> 
> 赞同：43
> 
> 时间：2012-11-19T18:10:44.800
> 
> 标签：c++, gcc, deprecated, gcc-warning

实现弃用警告的一种方法是在调用弃用函数时生成警告，除非您从弃用的上下文中调用。这样，遗留代码可以调用遗留代码，而不会产生仅相当于噪音的警告。

这是一个合理的思路，它反映在我在 OS X 上的 GCC 4.2 (1) 和 Clang 4.0 (2) 以及 Ubuntu 上的 Clang 3.0 (3) 中看到的实现。

*   (1)：i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2.1（基于 Apple Inc. build 5658）（LLVM build 2336.11.00）
*   (2)：Apple clang 4.0 版本（tags/Apple/clang-421.0.57）（基于LLVM 3.1svn）
*   (3)：Ubuntu clang 3.0-6ubuntu3 版本（tags/RELEASE_30/final）（基于LLVM 3.0）

* * *

但是，当我在 Ubuntu 上使用 GCC 4.6 (4) 进行编译时，我会收到所有已弃用函数调用的弃用警告，与上下文无关。这是功能的回归吗？是否有我可以用来获得其他行为的编译器选项？

*   (4): g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

* * *

示例程序：

```
int __attribute__((deprecated)) a() {
    return 10;
}

int __attribute__((deprecated)) b() {
    return a() * 2; //< I want to get rid of warnings from this line
}

int main() {
    return b(); //< I expect a warning on this line only
} 
```

GCC 4.2 的输出（是的，我确实收到了两次相同的警告。不过，我不在乎）：

```
main.cpp: In function ‘int main()’:
main.cpp:10: warning: ‘b’ is deprecated (declared at main.cpp:5)
main.cpp:10: warning: ‘b’ is deprecated (declared at main.cpp:5) 
```

GCC 4.6 的输出：

```
main.cpp: In function 'int b()':
main.cpp:6:9: warning: 'int a()' is deprecated (declared at main.cpp:1) [-Wdeprecated-declarations]
main.cpp:6:11: warning: 'int a()' is deprecated (declared at main.cpp:1) [-Wdeprecated-declarations]
main.cpp: In function 'int main()':
main.cpp:10:9: warning: 'int b()' is deprecated (declared at main.cpp:5) [-Wdeprecated-declarations]
main.cpp:10:11: warning: 'int b()' is deprecated (declared at main.cpp:5) [-Wdeprecated-declarations] 
```

* * *

如何说服 GCC 4.6 它应该给我与 GCC 4.2 相同的输出？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-19T18:14:05.937

`-Wno-deprecated`将删除所有已弃用的警告

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-11-19T18:33:10.237

gcc 4.6 添加了有助于解决此问题的诊断编译指示：

```
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wdeprecated-declarations"
int __attribute__((deprecated)) b() {
   return a() * 2; //< I want to get rid of warnings from this line
}
#pragma GCC diagnostic pop 
```

注意：这只适用于 gcc 4.6 及更高版本。`push`and`pop`是 4.6 扩展。在 gcc 4.5 中，`#pragma GCC diagnostic push`and`pop`将被忽略（带有警告）。不会被忽略的是`#pragma GCC diagnostic ignored "-Wdeprecated-declarations"`-- 但现在这一直有效，直到文件结束。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-19T20:04:24.887

您在 GCC 4.2 中看到的行为是由 Apple 特定的 GCC 补丁引起的。FSF GCC 4.2.4 警告使用`a`. Apple GCC 具有 FSF GCC 所没有的特定位是：

```
--- a/gcc/toplev.c
+++ b/gcc/toplev.c
@@ -902,6 +902,9 @@ warn_deprecated_use (tree node)
   if (node == 0 || !warn_deprecated_decl)
     return;

+  if (current_function_decl && TREE_DEPRECATED (current_function_decl))
+    return;
+
   if (DECL_P (node))
     {
       expanded_location xloc = expand_location (DECL_SOURCE_LOCATION (node)); 
```

（在 GPLv2 或更高版本下可用）

您可能希望将此补丁修改为更高版本的 GCC（可能不需要更改，可能需要进行重大更改），并使用此补丁从源代码构建 GCC。或者您可以在 FSF GCC bugzilla 上将此报告为功能请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-27T20:09:56.543

我遇到同样的问题。提出的解决方案如下

```
typedef OLD_A_NOT_TO_BE_USED a __attribute__((deprecated));

int OLD_A_NOT_TO_BE_USED () {
    return 10;
}

int __attribute__((deprecated)) b() {
    return OLD_A_NOT_TO_BE_USED () * 2; //< I want to get rid of warnings from this line
}

int main() {
    return b(); //< I expect a warning on this line only
} 
```

所以我只是将我的类重命名为 OLD_A_NOT_TO_BE_USED 类。我只在 return b(); 时收到警告。如果有人使用 a 他们仍然会收到弃用的警告。

# php - Codeigniter 和 SQLite - 将会话保存到数据库不起作用（ci_session）

> ID：13459603
> 
> 赞同：3
> 
> 时间：2012-11-19T18:10:49.633
> 
> 标签：php, codeigniter, session, sqlite, pdo

我刚刚设置 CI 以通过 PDO 与 sqlite 一起工作，一切都很顺利。（我可以查询sqlite db，一切都很好。）

现在我有一个问题，我设置：

```
$config['sess_use_database'] = TRUE; 
```

并出现问题：

```
Fatal error: Call to a member function execute() on a non-object in C:\wamp\www\CI\system\database\drivers\pdo\pdo_driver.php on line 193
Call Stack
# Time Memory Function Location
1 0.0030 151392 {main}( ) ..\index.php:0
2 0.0109 187664 require_once( 'C:\wamp\www\CI\system\core\CodeIgniter.php' ) ..\index.php:202
3 0.0885 669544 Login->__construct( ) ..\CodeIgniter.php:308
4 0.0885 669600 CI_Controller->__construct( ) ..\login.php:7
5 0.0986 793008 CI_Loader->initialize( ) ..\Controller.php:51
6 0.0986 792984 CI_Loader->_ci_autoloader( ) ..\Loader.php:152
7 0.1362 1331192 CI_Loader->library( ) ..\Loader.php:1178
8 0.1363 1331304 CI_Loader->_ci_load_class( ) ..\Loader.php:216
9 0.1445 1412936 CI_Loader->_ci_init_class( ) ..\Loader.php:975
10 0.1462 1414368 CI_Session->__construct( ) ..\Loader.php:1099
11 0.1601 1483408 CI_Session->sess_read( ) ..\Session.php:106
12 0.1731 1486592 CI_DB_active_record->get( ) ..\Session.php:213
13 0.1735 1487800 CI_DB_driver->query( ) ..\DB_active_rec.php:963
14 0.1736 1488824 CI_DB_driver->simple_query( ) ..\DB_driver.php:299
15 0.1736 1488856 CI_DB_pdo_driver->_execute( ) ..\DB_driver.php:453 
```

我不知道问题出在哪里。我的 sqlite ci_session 表是这样的：

```
CREATE TABLE ci_session (
 session_id VARCHAR(40) DEFAULT '0' NOT NULL,
 ip_address VARCHAR(45) DEFAULT '0' NOT NULL,
 user_agent VARCHAR(120) NOT NULL,
 last_activity INT(10) DEFAULT 0 NOT NULL,
 user_data VARCHAR(255) NOT NULL,
 PRIMARY KEY (session_id)
); 
```

我想这很好（除了我没有包括原始 SQL 语句的最后一行）：

```
KEY `last_activity_idx` (`last_activity`) 
```

我也很确定问题与此无关，但以防万一：原始 MySQL 表位于[“](http://codeigniter.com/user_guide/libraries/sessions.html)将会话数据保存到数据库”下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:28:38.417

我不使用 CodeIgniter，但我想对此有所了解，您收到的消息相当于 Null 引用异常，这发生在这里：

```
CI_DB_pdo_driver->_execute( ) 
```

由于这是 CodeIgniter 的一部分，您可能没有设置任何东西，或者您正面临 CodeIgniter 的错误。

# objective-c - GPUImage 色度键过滤器

> ID：13459607
> 
> 赞同：2
> 
> 时间：2012-11-19T18:10:56.797
> 
> 标签：objective-c, ios, cocoa-touch, gpuimage

我正在尝试使用 GPUImage 框架的色键过滤器。我遵循了 Filtershowcase 示例，但显然我错过了一些东西，因为它只显示视频，但没有绿屏抠像效果。这是我对摄像机/过滤器的初始化：

```
camera = [[GPUImageStillCamera alloc] initWithSessionPreset:AVCaptureSessionPreset640x480
                                             cameraPosition:AVCaptureDevicePositionBack];
camera.outputImageOrientation = UIInterfaceOrientationLandscapeLeft;
camera.horizontallyMirrorFrontFacingCamera = NO;
camera.horizontallyMirrorRearFacingCamera = NO;

chromaKeyFilter = [[GPUImageChromaKeyFilter alloc] init];
chromaKeyFilter.thresholdSensitivity = sliderThres.value;

UIImage *inputImage = [UIImage imageNamed:@"WID-small.jpg"];

GPUImagePicture *sourcePicture = [[GPUImagePicture alloc] initWithImage:inputImage
                                                    smoothlyScaleOutput:YES];

[camera addTarget:chromaKeyFilter];
[sourcePicture addTarget:chromaKeyFilter];
[sourcePicture processImage];

[chromaKeyFilter addTarget:viewCamera];

[camera startCameraCapture]; 
```

所以camera和sourcePicture都输入过滤器，过滤器比进入viewCamera。但现在，我只看到纯视频，没有色键效果。（我有一个改变阈值的滑块）。

**使用 GPUImageChromaKeyBlendFilter**更新****

 **```
camera = [[GPUImageVideoCamera alloc] initWithSessionPreset:AVCaptureSessionPreset640x480 cameraPosition:AVCaptureDevicePositionBack];
camera.outputImageOrientation = UIInterfaceOrientationLandscapeLeft;
chromaKeyFilter = [[GPUImageChromaKeyBlendFilter alloc] init];

UIImage *inputImage;
inputImage = [UIImage imageNamed:@"WID-small.jpg"];
GPUImagePicture *sourcePicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];

[camera addTarget:chromaKeyFilter];
[sourcePicture processImage];
[sourcePicture addTarget:chromaKeyFilter];
[chromaKeyFilter addTarget:viewCamera];

[camera startCameraCapture]; 
```

使用此滤镜，它只是将其替换为黑色，而不是实际图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-21T18:22:38.293

[经过几天的尝试找到了这个宝石](https://github.com/BradLarson/GPUImage/issues/597#issuecomment-9949345)...... 显然你应该坚持（强参考）GPUImagePicture。我的印象是过滤器链内部会有很强的参考，但事实并非如此。将其保留为实例 var 解决了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:29:48.910

我认为您想要 GPUImageChromaKeyBlendFilter，而不是 GPUImageChromaKeyFilter。

混合采用两个源图像，并用第二个图像中的像素替换与第一个图像中的键控颜色匹配的像素。常规色度键控过滤器只是将与目标颜色匹配的像素的 alpha 通道减少到 0.0，它不会混合到另一个图像中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T12:10:44.203

与原始问题类似，我想将绿屏视频放在自定义视图层次结构的顶部，包括。直播视频。事实证明，使用标准 GPUImage ChromaKey 过滤器是不可能的。它不是 alpha 混合，而是将绿色像素与背景像素混合。例如，红色背景变成黄色，蓝色变成青色。

让它工作的方法包括两个步骤：

**1）确保filterview具有透明背景：**

```
filterView.backgroundColor=[UIColor clearColor]; 
```

**2）修改GPUImageChromaKeyFilter.m**

```
old: gl_FragColor = vec4(textureColor.rgb, textureColor.a * blendValue);

new: gl_FragColor = vec4(textureColor.rgb * blendValue, 1.0 * blendValue); 
```

现在，视频中的所有键控（例如绿色）像素都变得透明，并显示过滤器视图下方的任何内容，包括。（现场）视频。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:27:40.830

您是否为滑块设置了目标和选择器？

这对我有用

```
[(GPUImageChromaKeyFilter *)filter setThresholdSensitivity:[(UISlider *)sender value]];
        [image setImage:[filter imageByFilteringImage:sourceImage]]; 
```

希望有帮助。**

# watir - watir ruby 跟随链接重定向并获得最终网址

> ID：13459610
> 
> 赞同：1
> 
> 时间：2012-11-19T18:11:02.067
> 
> 标签：watir, watir-webdriver

你好，我看到有办法用 ruby​​ 处理重定向，但我在想也许有办法用 watir 来做，然后它将是相同的浏览器和 coockie 等。

因此，如果任何人都可以给我举例说明如何关注 url。

让我们写一个例子：

这是链接www。ly.by/ldkfjfjgii 在 watir 我已经有了目的地链接，我可以说

```
link = b.frame(:id => 'main_top_right').link(:index => 0).click 
```

那么有没有办法捕获重定向的 url（最终目标 url），它在哪里登陆例如它可以登陆 http://somesite。com/jdkdjfk。

我想要在使用 watir 重定向后的最终 url，我希望我很清楚。tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T06:41:59.900

单击任何链接后，您可以使用以下命令获取页面的当前 URL

```
browser.url 
```

如果单击 URL 在新窗口/选项卡中打开链接，您可以使用

```
browser.windows.last.use do
browser.url
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:21:07.047

点击链接后，Watir::Browser 类的 .url 方法可以获取 URL。

[这是 rdoc 的链接： http:](http://rubydoc.info/gems/watir-webdriver/0.6.0/Watir/Browser#url-instance_method) //rubydoc.info/gems/watir-webdriver/0.6.0/Watir/Browser#url-instance_method

例子：

```
b.frame(:id => 'main_top_right').link(:index => 0).click  
url_after_click = b.url 
```

# delphi - Delphi XE下的DUnit在哪里？

> ID：13459615
> 
> 赞同：1
> 
> 时间：2012-11-19T18:11:11.077
> 
> 标签：delphi, dunit

看起来 DUNIT 已经集成在 Delphi XE 下。但我找不到它。我的问题是：

1.  我怎样才能访问它？我必须手动安装吗？我不记得 Delphi 设置询问我是否要安装 DUnit。
2.  如果我必须手动安装它，最好从 sourceforge.net 下载最新版本，还是 Embarcadero 提供的版本（在 Delphi 的 CD 上）（如果存在）与 Delphi 更好地集成？

更新：
我购买了没有 CD 的 Delphi（可下载版本）。也许它比 CD 上提供的版本小，所以不包括 DUnit 等工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:33:31.570

你总是可以从 sourceforge 获得 dunit：

[http://sourceforge.net/projects/dunit/](http://sourceforge.net/projects/dunit/)

最新的更改是来自 embarcadero 存储库的一些合并。然而，大多数重大更新似乎都来自于泛型、匿名函数和运算符重载等东西出现之前的时代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-26T07:37:47.857

[http://sourceforge.net/projects/dunit3/](http://sourceforge.net/projects/dunit3/)
这是 Embarcadero RAD Studio XE 的 DUnit

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-19T18:41:19.683

dUnit 通常与 Delphi XE 一起安装，您可以从 IDE 中启动一个新的测试项目。

例如，通过按 启动 IDE Insight`Ctrl``.`然后开始编写`test project`，您将获得：

![在此处输入图像描述](../Images/e0f22b4ecfc9fa95f562f758e94fe7bb.png)

按 Enter 键，您将看到一位专家使用 DUnit 配置您的测试项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:36:41.593

好的。找到了。我可以从以下位置创建一个 DUnit 文件：

文件 -> 新建 -> 其他... -> Delphi 项目 -> Delphi 文件 -> Dunit。

# zend-framework - Zend Framework OAuth $_GET 参数

> ID：13459618
> 
> 赞同：2
> 
> 时间：2012-11-19T18:11:19.023
> 
> 标签：zend-framework, oauth, oauth-provider, oauth-php

目标：创建一个 Oauth Provider 以在 Zend Framework Web 应用程序中使用。

到目前为止的过程：将 Zend Framework OAuth Client (ZF 1.12) 与 Google Code OAuth 类 [http://code.google.com/p/oauth/] 集成。ZF Client 用作 www 站点中的客户端，Google Code OAuth 用于 api 站点中的身份验证包装器。

寻求帮助以使解决方案发挥作用。

该解决方案适用于基本请求 - 除非 URL 中有 GET 参数，然后两个框架将生成不同的签名，从而破坏身份验证。

示例代码 www:

```
$uri = 'http://oauth.example.com/search?q=something';

$Application = array();
$Application['oauth_consumer_key'] = 'app';
$Application['oauth_consumer_secret'] = 'appsecret';

$token = new Zend_Oauth_Token_Access();

$config = array(
    'consumerKey' => $Application['oauth_consumer_key'],
    'consumerSecret' => $Application['oauth_consumer_secret'],
);

$client = $token->getHttpClient($config);
$client->setUri($uri);
$client->setMethod(Zend_Http_Client::POST);
$client->setHeaders('Content-Type', 'application/json');
$response = $client->request(); 
```

示例代码api：

```
require_once 'OAuth.php';

$userRequest = OAuthRequest::from_request(null, null, null);
$params = $userRequest->get_parameters();
$params['user_request'] = $userRequest;
$request = $params;

$application = array(
    'token' => 'app',
    'secret' => 'appsecret',
);

// Test OAuth tokens
$oauthConsumer = new OAuthConsumer($application['token'], $application['secret']);
$oauthToken = null;
$signatureMethod = new OAuthSignatureMethod_HMAC_SHA1();

$signature = $signatureMethod->build_signature(
    $request['user_request'],
    $oauthConsumer,
    $oauthToken
);

// If signatures match, return true
if ($request['oauth_signature'] == $signature) {
    return true;
}

return false; 
```

Zend_Oauth_Token_Access 似乎忽略了自定义参数（参见上面的'?q='），其中 oauth 类考虑了所有参数。这意味着当没有参数时，两个系统都会生成相同的签名。

我似乎无法让 Zend Oauth 客户端考虑 GET 参数。

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:32:30.323

ZF1 不包括 oauth 提供程序（oauth 1.0a 或 2）。我找到了一些 oauth 1.0a 提供程序，例如[https://github.com/smalyshev/Zend_OAuth_Provider](https://github.com/smalyshev/Zend_OAuth_Provider)，但我真的想在我的应用程序中添加 oauth 2.0 支持。

我最终选择了[https://github.com/quizlet/oauth2-php](https://github.com/quizlet/oauth2-php)并添加了对`Zend_Db_Table`作为存储适配器的支持。这个项目的一些代码很乱，但它是迄今为止我发现的最好的 php oauth2 提供程序。

如果您愿意，我可以在 github 存储库中分享我的代码。

# wpf - WPF datagrid行水平对齐问题

> ID：13459620
> 
> 赞同：7
> 
> 时间：2012-11-19T18:11:22.793
> 
> 标签：wpf, xaml, alignment, wpfdatagrid

我在表单中使用 DataGrid 来显示（用户 ID、姓名、余额等）列表。它有一个非常奇怪的问题，在某些行的开头（每 20 行中的一行）有一个小的空白区域导致该行未对齐。空白区域就像一个小矩形，位于行的第一个单元格之前。我回顾了我的风格和一切，但无法弄清楚为什么会这样。仅当我以编程方式滚动 DataGrid 时才会发生这种情况，滚动完成后会出现空白。

更糟糕的是，空白区域可以调整大小！当我用鼠标调整它的大小时，它会搞砸网格。我真的不想把这样的东西寄出去。

我在 WPF 方面没有太多经验，如果有人能给我一些关于在哪里看的想法，我将不胜感激。谢谢。

* * *

编辑：这是屏幕截图：

![在此处输入图像描述](../Images/bd3d2e82e2c1b0cad99574dd410d5112.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T19:02:01.973

此问题是由某些随机行的“显示”行标题引起的。

我不知道为什么会这样，但幸运的是修复很简单。

如果`RowHeaderWidth="0"`在 DataGrid 上设置，则行为应该与预期一致。

由于某种原因，即使`HeadersVisibility`设置为列，行标题仍然出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:47:03.577

我在多个项目中都遇到过同样的问题，据我所知，这只是一个普通的 ole 错误。这是蹩脚的。我发现的唯一工作是la脚。就像超级，超级跛脚。我希望我有更好的东西，但我没有。无论如何，我发现当我调整网格大小时，这些奇怪的滚动伪影会消失，所以我编写了一些代码来触发引擎更新布局。

```
Timer _timer;

void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    _timer = new Timer(1000);
    _timer.Elapsed += _timer_Elapsed;
    _timer.Start();
}

void _timer_Elapsed(object sender, ElapsedEventArgs e)
{
    //why the hell are we doing this?
    //well, the stupid error adorners on the grid like to be mis-aligned
    //forcing a layout to happen makes them not look off. lame, I know.
    Dispatcher.Invoke(new Action(() =>
    {
        MainDataGrid.Margin = new Thickness(MainDataGrid.Margin.Left, MainDataGrid.Margin.Top, MainDataGrid.Margin.Right, MainDataGrid.Margin.Bottom + 1);
        MainDataGrid.UpdateLayout();

        MainDataGrid.Margin = new Thickness(MainDataGrid.Margin.Left, MainDataGrid.Margin.Top, MainDataGrid.Margin.Right, MainDataGrid.Margin.Bottom - 1);
        MainDataGrid.UpdateLayout();
    }));

} 
```

# jquery - 非法调用 (jQuery)

> ID：13459623
> 
> 赞同：2
> 
> 时间：2012-11-19T18:11:30.563
> 
> 标签：jquery

> **可能重复：**
> [$.post 抛出“非法调用”</a>](https://stackoverflow.com/questions/11729442/post-throwing-illegal-invocation)
> 
> [](https://stackoverflow.com/questions/11729442/post-throwing-illegal-invocation)

[](https://stackoverflow.com/questions/11729442/post-throwing-illegal-invocation)

[尝试提交 AJAX 请求时出现以下错误：Uncaught TypeError: Illegal invocation。这是代码：](https://stackoverflow.com/questions/11729442/post-throwing-illegal-invocation)[http](http://pastie.org/private/px6qinlgydv6cgcwrghvxw) ://pastie.org/private/px6qinlgydv6cgcwrghvxw ，如果我删除 $.ajax() 函数，问题就会消失。

```
 <script type="text/javascript">
            $(document).ready(function() {
                $('.inquiry-button').on('click', function(e) {
                    if($('.x-box ul li').length > 0) {
                        $('.x-box, .x-box-bottom').fadeOut('slow', function() {
                            $('.inquiry-form, .inquiry-buttons').fadeIn();
                        })
                    }

                })
                $('.edit-inquiry-submit').on('click', function(e){
                    e.preventDefault();
                    $('.inquiry-form, .inquiry-buttons').fadeOut('slow', function() {
                        $('.x-box, .x-box-bottom').fadeIn();
                    })
                })

                $('.inquiry-submit').on('click', function(e) {
                    e.preventDefault();
                    var valid = 1;
                    var name = $('#your_name');
                    var email = $('#your_email');
                    var company = $('#company_name');

                    if (!name.val() && valid == 1) {
                        var valid = 0;
                        name.focus();           
                        alert('Please provide your Name');
                    }
                    if (!email.val() && valid == 1) {
                        var valid = 0;
                        email.focus();
                        alert('Please provide your Email Address');
                    }
                    if (!company.val() && valid == 1) {
                        //   var valid = 0;
                        //  company.focus();
                        //  alert('Please provide your Company Name');
                    }

                    if (valid == 1) {
                        $('#i-form, .inquiry-buttons').fadeOut('', function() {
                            $('.inquiry-thank-you').fadeIn('', function() {
                                $.ajax({
                                    url: 'http://projectsxxxxxdev.com/cooling/wp-admin/admin-ajax.php',
                                    data: {'action' : 'sendProducts', 'name' : name, 'email' : email, 'company' : company},
                                    dataType : 'json',
                                    type: 'POST',
                                    success : function(data){
                                        console.log(data)

                                    }})

                            });
                        });

                    }
                })  

            })

        </script> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T18:20:00.463

您正在尝试在数据参数中传递 jQuery 对象，调用`.val()`以使用它们的值

```
$.ajax({
    url: 'http://projectsxxxxxdev.com/cooling/wp-admin/admin-ajax.php',
    data: {'action' : 'sendProducts', 'name' : name.val(), 'email' : email.val(), 'company' : company.val()},
     dataType : 'json',
     type: 'POST',
     success : function(data){
         console.log(data)
     }
}); 
```

# c++ - 如何硬编码设置

> ID：13459627
> 
> 赞同：0
> 
> 时间：2012-11-19T18:11:47.057
> 
> 标签：c++, settings, quickfix, hardcode

如何对启动器和接受器的设置进行硬编码，以便不需要外部设置文件？

这是我迄今为止尝试过的：

```
FIX::SessionSettings serverSettings;
FIX::Dictionary serverDictionary;

serverDictionary.setString("BeginString", "FIX.4.4");
serverDictionary.setString("UseDataDictionary", "Y");
serverDictionary.setString("DataDictionary", "../../../spec/FIX.4.4.xml");
serverDictionary.setString("SenderCompID", "SRVR");
serverDictionary.setString("TargetCompID", "CLNT");
serverDictionary.setString("SocketAcceptHost", "localhost");
serverDictionary.setLong("SocketAcceptPort", 2024);

FIX::SessionID serverSessionID;
serverSettings.set(serverSessionID, serverDictionary);

Server server; // Extends FIX::Application

FIX::FileStoreFactory serverStoreFactory("server/fileStore/");
FIX::FileLogFactory serverLogFactory("server/logs/");

FIX::SocketAcceptor acceptor(server, serverStoreFactory, serverSettings, serverLogFactory); 
```

我认为我走在正确的道路上，但出现此错误：`Configuration failed: BeginString must be FIX.4.0 to FIX.4.4 or FIXT.1.1`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:16:42.400

它与“FIX.4.4”的值无关，它与`setString`s的定义有关；

void Dictionary::setString( const std::string& key, const std::string& value )

它通过引用获取这些字符串，并且您将其传递给它一个临时变量，该变量在`setString`尝试访问该值时被释放。因为你不能改变你需要做的函数定义；

```
std::string key = "current key";
std::string value = "current value";
serverDictionary.setString(key, value); 
```

为所有`setString`呼叫，以便此工作。至少对我来说，这会阻止我走这条路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T18:27:32.423

经过大量的斗争，我终于设法做到了这一点。这是在接受器中硬编码设置的功能代码，也可以在启动器中应用：

```
try {
    FIX::SessionSettings serverSettings;
    FIX::Dictionary serverDictionary;

    serverDictionary.setString("ConnectionType", "acceptor");
    serverDictionary.setString("DataDictionary", "FIX.4.4.xml");
    serverDictionary.setString("StartTime", "00:00:00");
    serverDictionary.setString("EndTime", "00:00:00");
    serverDictionary.setString("SocketAcceptHost", "localhost");
    serverDictionary.setString("SocketAcceptPort", "2024");

    FIX::SessionID serverSessionID("FIX.4.4", "SRVR", "CLNT");
    serverSettings.set(serverSessionID, serverDictionary);

    Server server;
    FIX::FileStoreFactory serverStoreFactory("server/fileStore/");
    FIX::FileLogFactory serverLogFactory("server/logs/");
    FIX::SocketAcceptor acceptor(server, serverStoreFactory, serverSettings, serverLogFactory);
    acceptor.start();
    // do something
    acceptor.stop();

    return 0;
} catch (FIX::ConfigError& e) {
    std::cout << e.what() << std::endl;
    return 1;
} 
```

# android - 设置相对布局的位置

> ID：13459631
> 
> 赞同：0
> 
> 时间：2012-11-19T18:12:03.347
> 
> 标签：android

由于某种原因，我创建的布局的位置（边距）未设置。布局显示在 x=0 和 y=0 处。我究竟做错了什么？

```
smallPopup = new LinearLayout(this);

LinearLayout.LayoutParams p = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
p.setMargins(100, 100, 10, 10);

smallPopup.setLayoutParams(p);
smallPopup.setGravity(Gravity.CENTER_VERTICAL);
smallPopup.setHorizontalGravity(Gravity.CENTER_HORIZONTAL);
smallPopup.setBackgroundResource(R.drawable.map_small_popup_overlay);
smallPopup.setPadding(20, 10, 20, 10);

map.addView(smallPopup, p); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:34:56.947

有几种类型的 LayoutParams，具体取决于您的视图的容器。

如果要在 MapView 中定位元素，则需要使用不支持边距的 MapView.LayoutParams（因为它不扩展 MargingLayoutParams）。

MapView.LayoutParams 扩展了 AbsoluteLayout.LayoutParams，这意味着您可以直接设置 x 和 y 值：

```
 WebView.LayoutParams p = new WebView.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT, 100, 100); 
```

# spring - JBoss 忽略 WEB-INF/lib/*.jar

> ID：13459634
> 
> 赞同：1
> 
> 时间：2012-11-19T18:12:12.303
> 
> 标签：spring, hibernate, windows-7, jboss6.x

我正在开发一个在 Tomcat 中运行良好的 Spring/Hibernate Web 应用程序，但是当我在 JBoss 6.1 上进行部署时，我遇到了 JBoss 似乎忽略了我的 WEB-INF/lib 文件夹中的 jar 的问题。我可以通过删除 common/lib/hibernate-*.jar 文件来证明这一点，然后我会得到：

```
Caused by: java.lang.NoClassDefFoundError: javax/persistence/PersistenceContextType 
```

我的 WEB-INF/lib 中有所有必需的休眠 jar。我添加了 -verbose:class 标志来查看所有加载的类，并且在解析 web.xml 之前没有从我的战争中加载任何类。

我主要想知道是否有人以前见过这个，以及是否有任何已知的原因导致 JBoss 会忽略这些罐子。如果有帮助，我可以发布项目的相关部分。

# java - 两个 Wi-Fi Direct 设备的“配对”时间

> ID：13459640
> 
> 赞同：2
> 
> 时间：2012-11-19T18:12:52.800
> 
> 标签：java, android, data-transfer, wifi-direct

`Wi-Fi Direct`带有硬件的设备之间直接连接的速度有多快？两个以正常速度在街上走过的人是否可以使用`Wi-Fi Direct`设备交换一些信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-10T13:56:15.273

正如*笑脸*所写，Wi-Fi Direct 发现和组形成/配对时间/延迟取决于各种因素：

*   硬件和驱动程序/协议实施
*   如果其中一台设备是*自治*组所有者 (GO)
*   如果使用服务发现

我测量了两台*三星 Galaxy S III*设备的时间，发现以下平均时间/延迟发现+组形成：

*   没有服务发现的自主 GO：**4 秒**
*   具有服务发现的自治 GO：**4.5 秒**
*   带/不带服务发现的标准组：**6 秒**

正常的步行速度在*1.4 m/s*左右，因此应该可以连接和交换少量数据，具体取决于信令条件。

关于在没有用户参与的情况下接受 Wi-Fi Direct 连接的问题，这可以通过使用`setDialogListener`.`android.net.wifi.p2p.WifiP2pManager`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T02:01:22.130

我猜连接时间会因各种因素而异。

但是，您的问题不在于两台设备之间的连接时间。相反，您的应用程序无法代表用户接受 Wi-Fi Direct 连接。

这是一些人已经在其他 stackoverflow 问题和[Android 开放手机联盟项目中指出的内容](https://code.google.com/p/android/issues/detail?id=30880 "问题 30880：用于接受连接的 Wi-Fi Direct API。")

# java - 在java中使用除法并得到一个int或乘以3

> ID：13459646
> 
> 赞同：0
> 
> 时间：2012-11-19T18:13:39.440
> 
> 标签：java, divide

这里有一个案子。试图解决它，但不明白如何去做。

情况是：如果数能被2整除，则减半——否则，应乘以3，这个结果加1，这样一直持续到结果为1

我不明白如何在java中设置它。我尝试了 if、else if 和 else。但我不知道如何让它工作。

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:17:14.757

这是伪代码..按照它应该可以工作。

```
while num > 1
   if num mod 2 is 0 
      num/=2
   else
      num*=3 
      ++num 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:23:55.500

我会在测试和除法步骤中使用按位运算，应该比数字除法和取模更快。

```
while (x != 1) {
  x = (x & 1) != 0 ? x * 3 + 1 : x >> 1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:17:13.830

不确定您要做什么，但有一个提示：

```
x = (x % 2 == 0) ? (x / 2) : (x * 3 + 1) 
```

# python - 在 pydev-eclipse 中重新排列 pythonpath？

> ID：13459647
> 
> 赞同：3
> 
> 时间：2012-11-19T18:13:46.283
> 
> 标签：python, eclipse, pydev

我在 Eclipse 中使用 pydev。

我希望 pydev 会首先使用我在源目录中开发的 python 类。但由于我还将内置的 egg 安装到系统目录中，pydev 也从系统目录中获取类。

问题是 pydev 首先在其 python 路径中使用系统目录。所以我安装了一个buggy版本后，通过pydev调试，并在本地源代码中进行了必要的更改，它没有生效，因为安装的egg没有改变。或者在相反的情况下，当我在调试时，pydev 将我带到 egg 文件，我修改了这些 egg 文件，所以真正的源代码没有改变。

那么我怎么能让 pydev 重新排列 pythonpath 顺序呢？（就像eclipse为java构建类路径所做的那样）？

谢谢杨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:25:20.840

如果您使用的是 setuptools，您可以尝试`sudo python setup.py develop`在 egg 上运行以及在 Eclipse 中添加两者之间的项目依赖项

# asp.net - 如何将一个网页加载到另一个网页

> ID：13459651
> 
> 赞同：0
> 
> 时间：2012-11-19T18:13:54.653
> 
> 标签：asp.net, visual-studio-2010, web-applications

我希望能够将网页（带有许多 asp:controls）加载到我的主 Web 应用程序的面板中。基本上从用户菜单中，将加载相应的网页。到目前为止，我已经尝试了以下...

1.  IFrame - 这不会保留控件的视图状态
2.  与网页相反，创建动态控件，但使用大量控件时速度非常慢，因为您必须在回发时重新创建每个控件。

有没有合理的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:46:14.540

我假设您正在根据问题中的控件细节使用 ASP.NET Web 表单。

根据您的描述，听起来您想将[UpdatePanel](http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx)控件添加到当前页面。更新面板可以托管您的自定义[UserControl](http://msdn.microsoft.com/en-us/library/system.web.ui.usercontrol.aspx)，这很可能有助于页面响应（通常这是[TreeView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treeview.aspx)控件所做的）。

话虽如此，除非您的动态控件的数据源很慢（或 Web 服务器超载），否则一百个动态控件不应该扼杀您的页面呈现时间。我已经编写了针对 SharePoint 实例使用超过 100 个动态控件的页面，并且响应速度相当快。请记住，所有服务器端控件都是创建、加载、渲染的类实例（跳过了一堆[生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)事件，但你明白了）。

# networking - 是否可以在连接到公司网络的同时拥有一个单独的内部域林？

> ID：13459653
> 
> 赞同：0
> 
> 时间：2012-11-19T18:14:14.740
> 
> 标签：networking, dns, windows-server-2008-r2, hyper-v, hypervisor

如果这已得到解答或完全是新手，我很抱歉，但我是程序员而不是网络人。请指出我正确的方向。

我想做的是创建一个单独的森林，称为 mydomain.com 作为虚拟域，但保持与公司网络的连接，以便我可以传输位。

我使用 windows server 2008 R2 作为我的桌面操作系统，并且我有 6 个 windows server 2008 R2 虚拟机在其管理程序上运行（其中一个虚拟机是 DNS/DC）。我无法与公司网络建立单向信任，因为我的公司有太多繁文缛节。

**加入 mydomain.com 域时，是否可以让我的虚拟机在我的虚拟机管理程序上运行，但仍然通过第二个网络适配器保持公司网络访问？**

我对这个问题的糟糕解决方案是使用快照。一张带有公司网络访问权限和相应网络适配器的快照，每当我需要获得网络访问权限时，我都会回滚到相应的网络适配器，然后在传输位后重置其网络适配器以加入 mydomain.com。

有没有更好的办法？我希望能够设置自己的静态 IPs/etc，因此有必要拥有自己的 DNS/DC。有很多繁文缛节。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:40:57.997

访问公司网时需要什么？如果您希望某些应用程序在您以个人域用户身份登录时访问某些网络资源时从您的公司网络验证自己为域用户，请尝试使用`cmdkey` [http://technet.microsoft.com/en-us /library/cc754243(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc754243(v=ws.10).aspx)可让您指定在访问远程计算机时要使用的用户。

# jquery - Chrome中的动画跳跃 - jquery

> ID：13459654
> 
> 赞同：0
> 
> 时间：2012-11-19T18:14:13.523
> 
> 标签：jquery, google-chrome, jquery-animate

我的动画在 Google Chrome 中遇到了一个小问题。

以下是我正在使用的功能：

```
function moveRight(){

var x=parseInt($('#position').val(),10);
if(x==-7200){x=0;}
else{x-=900;}
$('#position').val(x);
$('#slides').animate({'left': x + 'px'}, 1000 );

}

function moveLeft(){

var x=parseInt($('#position').val(),10);
if(x==0){x=-7200;}
else{x+=900;}
$('#position').val(x);
$('#slides').animate({'left': x + 'px'}, 1000 );
} 
```

我在页面上有一个隐藏的输入，它保持左右滑动的 div 的当前位置。

大约第 3 次或第 4 次单击右侧按钮 (moveRight();) 您会注意到它会跳跃然后动画。（在此处查看页面：http: [//ghcnow.com/savings-advantage.php](http://ghcnow.com/savings-advantage.php)）它在 Firefox 中没有这样做，似乎与 Chrome 有关。

我下载了最新版本的 jquery (1.7.2)

不知道除了重写整个事情还能做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T09:12:25.473

我有同样的问题，但通过改变解决了

```
position:relative 
```

至

```
position:absolute 
```

不知道是不是同一个问题

# java - Java 中的架构约束

> ID：13459657
> 
> 赞同：13
> 
> 时间：2012-11-19T18:14:35.007
> 
> 标签：java, maven, architecture

我想确保我的项目不包含包之间不必要的依赖关系。例如，我想确保项目具有分层结构。即模型在一切之下，业务逻辑依赖于模型，视图依赖于业务逻辑和模型。每一层都放在自己的包中。

您能否推荐任何允许我指定这些约束并将它们作为持续集成的一部分进行检查的开源工具？

PS 我知道我可以将项目分离到单独的 Maven 模块中。不幸的是，我的真实案例比三层系统更复杂。如果我使用 maven 模块，我会有几十个相当小的模块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:20:07.943

尽管我不确定是否可以在违反层依赖关系时强制构建失败，但至少有一个工具可以检查和可视化这些层：[Sonar](http://www.sonarsource.org/)。您可以将它与您的 maven 和 jenkins 构建以及 eclipse（可能还有其他 IDE）集成。

Sonar 具有一个[依赖矩阵视图](http://www.sonarsource.org/sonar-2-0-in-screenshots/)，可以可视化包的相互依赖关系。

编辑：似乎可以配置声纳以强制构建因违规触发而失败：[构建断路器插件](http://docs.codehaus.org/display/SONAR/Build+Breaker+Plugin)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T14:09:48.610

这是一个非常有效的问题，因为许多项目通过 Maven 模块强制执行依赖关系，这是对生产力和灵活性的巨大浪费。

在花了很多时间研究这个主题之后，我可以推荐两个工具：

*   Macker ( [http://innig.net/macker/](http://innig.net/macker/) ) 它有 Maven 插件
*   Classycle ( [http://classycle.sourceforge.net/](http://classycle.sourceforge.net/) ) 它必须使用 Ant 插入

这两种工具在过去几年都没有太大的发展，但运行良好。Macker 具有基于 XML 的语法，但 Classycle 具有简洁的 DSL。Classycle 是更高级的专用工具，具有层的概念。这些工具允许您在包和某些类类型之间实施严格的障碍。此工具应在构建过程中配置为立即因任何约束而失败。

[在此处（ http://innig.net/macker/example/layering/src/macker.xml](http://innig.net/macker/example/layering/src/macker.xml)）和此处（[http://classycle.sourceforge.net/ddf.html#layer](http://classycle.sourceforge.net/ddf.html#layer) ）检查分层示例。

一个好的开源工具仍然有一个利基市场，它可以连接到编译器，当你在 IDE 中而不是在构建工具中时会给你错误。[Structure101](http://structure101.com/)功能更丰富，但也很重，并且依赖于 Eclipse 插件。

**更新**

这些也是[JQAssistant](http://jqassistant.org)，它非常强大，但可能需要相当长的时间来学习和设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T18:19:51.953

[JDepend](http://clarkware.com/software/JDepend.html)可以分析您的代码库并为您提供您正在寻找的指标。您正在寻找的三个主要指标是Afferent **Couplings**、**Efferent Couplings**和**Package Dependency Cycles**。

[Architexa](http://www.architexa.com/)是另一个在这里可能有所帮助的工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T07:32:08.527

您可以使用 Checkstyle 来实现“自定义检查”。查看它以了解更多信息： [http ://saturnnetwork.wordpress.com/2012/11/26/ultimate-architecture-enforcement-prevent-code-violations-at-code-commit-time/](http://saturnnetwork.wordpress.com/2012/11/26/ultimate-architecture-enforcement-prevent-code-violations-at-code-commit-time/)

我自己没有尝试过，但我认为实施起来并不难，而且是免费的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-22T14:32:55.380

一般来说，有几种工具可以帮助您实施分层架构和依赖限制。这些工具是特定于语言的。如果您使用的是 Java，我建议您使用 checkstyle 创建自定义检查。

我撰写了 Anton 提到的文本（[Ultimate Architecture Enforcement](http://saturnnetwork.wordpress.com/2012/11/26/ultimate-architecture-enforcement-prevent-code-violations-at-code-commit-time/)）。这是基于我们自己的成功经验。自定义检查可以集成到 IDE（例如 Eclipse），可以集成到您的持续集成工具（例如 Jenkins），作为防止违规的最后手段，可以作为 Subversion 上的预提交验证自动执行。自定义检查本身是使用 checkstyle API 用 Ja​​va 编写的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T13:30:32.093

[Structure101](http://structure101.com)允许您将层可视化地定义为[架构图](http://structure101.com/help/java/structure101/intro_software-architecture.html)中的单元，这些单元映射到物理代码并检查一致性。这些图表在开发人员的 IDE 中可见，如果违反分层规则，则会生成编辑时警告。也可以在 CI 期间中断/报告构建。[SonarJ](http://www.hello2morrow.com/products/sonarj)和[Lattix](http://www.lattix.com/)是其他用于视觉依赖控制的工具。

# c++ - 将公共语言运行时 (/clr) .dll 链接到静态链接到 C/C++ 运行时库的静态库

> ID：13459658
> 
> 赞同：2
> 
> 时间：2012-11-19T18:14:36.933
> 
> 标签：c++, visual-studio-2010, dll, linker, c++-cli

我有一个在 Visual Studio 2010 中编译的 WPF 应用程序，它使用 CLR .dll 与一些非托管 C/C++ 代码进行交互。这个想法是 WPF 引用 CLR .dll 反过来引用非托管代码。不幸的是，我遇到了可怕的链接问题，因为非托管 C/C++ 代码和相关库都静态链接到 C/C++ 运行时，但是如果我尝试在 CLR .dll 上使用该代码生成方法，则会引发错误因为 /clr 选项和静态链接到 CRT 是不兼容的。我需要以某种方式将这些东西粘合在一起。

我的想法是尝试创建一个*额外*的.dll，它只包含单个包中的所有非托管代码（也静态链接到 CRT），然后将其链接*到*CLR .dll，然后链接到应用程序（blech ！）。我试图制作这样一个 .dll，但问题是（可能很明显？）它没有从静态 .lib 文件中提取任何符号，因为它不需要任何符号。我尝试强制符号引用（/OPT:NOREF），但这似乎没有做任何事情。它只是一个“链接”到库的空 .dll，但实际上并没有做任何事情。所以这个想法是一个很大的失败。

我接近这整个事情都错了吗？

我没有一些非托管库的源代码，所以我无法重新编译它们以动态链接到 CRT。这些链接问题变得非常令人沮丧！

感谢您的任何建议！

**更新：**我想这无异于尝试将模块混合在一起，`/MT`根据[this](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.100%29.aspx)，这是不可能的。您应该如何链接您无法控制第三方库的项目？您只是希望他们都选择使用相同的运行时库链接方法？！似乎是一个可怕的想法...`/MD`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T15:06:51.987

解决方案似乎是您不应该尝试将-compiled 库链接在一起`/MT`。`/MD`我对此有点惊讶，因为在某些情况下您可能无法控制必须链接到的库。如果你试图链接到一个 CLR 项目，你最好希望那些库是用 编译的`/MD`，否则你就有麻烦了！就我而言，我可以通过使用 /MD 重新编译一些外部库来解决它。特别是有一个我无法访问代码，它`DEFAULTLIB`是一个静态链接的 C 运行时 ( `libcmt.lib`)，但不知何故我能够毫无问题地链接到它。

# html - 当我使用绝对位置时，我的链接变得“不可点击”......我该如何解决？

> ID：13459661
> 
> 赞同：0
> 
> 时间：2012-11-19T18:14:42.950
> 
> 标签：html, css, positioning, hyperlink

```
<div id="cart-login" style="position:absolute;right:50px;top:30px;">
    <a href="login.php">LOGIN</a> or <a href="sign-in.php">SIGN UP</a> <a href="cart.php" class="no-underline">CART</a>
</div> 
```

我已经这样做了很多很多次，但由于某种原因，这次链接变得无法点击。我试过`float:right; margin-right:50px;`和`position:absolute; right:50px;`. 两者都呈现链接和文本不可选择和不可点击。我什至尝试过`z-index`，以防某处有一个不可见的层。为什么页面上的所有链接都可以工作，但这些链接不起作用？这些链接在我申请之前都很好，`position:absolute; right:50px;`然后它们被禁用但在页面上可见。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:21:47.580

`div`元素默认设置为占据 100% 的宽度。一旦设置为`position:absolute`它们的宽度和高度由它们的内容决定。尝试给出`#cart-login`明确的高度和宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:21:52.790

尝试给出更高的`z-index`，也许有些东西超出了元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T09:54:08.797

使用带有 li 菜单链接的固定 ul，增加 z-index 再次暴露链接。

# android - 如何通过 Android 的 java 代码调整 ImageView 的大小

> ID：13459664
> 
> 赞同：0
> 
> 时间：2012-11-19T18:14:57.537
> 
> 标签：android

按下 Image 时如何通过 java 代码调整 ImageView 的大小？

这是我的 xml

```
<ImageView
            android:id="@+id/MyPic"
            android:src="@drawable/clean"
            android:layout_gravity="center"
            android:gravity="center"
            android:layout_height="70dp"
            android:layout_width="90dp"
            android:adjustViewBounds="true"
            android:scaleType="fitXY"
             /> 
```

这是我的java

```
public class see_me extends Activity  {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.see_me);

 MyPic = (ImageView) findViewById(R.id.MyPic); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:23:07.713

您可以像下面这样调整图像的大小。

```
MyPic = (ImageView) findViewById(R.id.MyPic);
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(50, 50);
MyPic .setLayoutParams(layoutParams); 
```

# netty - 排队消息以防止服务器故障

> ID：13459668
> 
> 赞同：0
> 
> 时间：2012-11-19T18:15:20.337
> 
> 标签：netty

我有一个 Netty 客户端将消息异步发送到 TCP Netty 服务器。

为了保持服务器`ChannelPipeline`具有的顺序并`ExecutionHandler`与`OrderedMemoryAwareThreadPoolExecutor`.

我的理解是发送到服务器的消息在通道中排队。如果服务器在消息在通道中排队时死机，我需要防止消息丢失。

我目前的解决方案是将每条消息添加到客户端的队列中，并且仅当我从服务器收到每条消息的 Ack 消息时才将它们从队列中删除。你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:18:45.577

您的建议相当普遍，有时被称为发送窗口。我以前使用过类似的技术，尽管我将发送的消息存储在地图中，因为服务器理论上可以处理并确认它们是无序的。

TCP 使用类似的技术，SMPP 之类的协议甚至允许异步发送的 JMS 提供程序（例如hornetQ）也使用类似的技术。HTTP 流水线是类似的，尽管它确实需要按顺序处理和确认请求。

您必须考虑的一件事是服务器如何处理重新传输的消息。它可能已经处理了原始消息，但 ack 在到达您的客户端之前丢失了。例如，如果消息请求某种付款，您不想因为确认丢失而向该人收取两次费用。

# java - LWJGL 显示和 java swing

> ID：13459670
> 
> 赞同：1
> 
> 时间：2012-11-19T18:15:22.000
> 
> 标签：java, swing, lwjgl

我创建了一个 JFrame，其中包含一个 JSplitPane，其中包含左侧的画布和右侧的 JPanel。画布包含 LWJGL 显示，而 JPanel 中几乎没有 JTextField。问题是当我在 LWJGL 显示屏上按下鼠标按钮时，我无法再将文本写入 JTextFields。当我最小化应用程序并将其返回时，它会一直工作，直到我再次按下显示屏。

**为什么我会遇到这个问题？我该如何解决？**

*注意：我可以专注于文本字段，但我不能写任何东西。也许 LWJGL 以某种方式阻止了 Swings 键盘输入？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T21:15:39.853

通过将 a 添加`java.awt.Canvas`到 a `javax.swing.JSplitPane`，您将[*混合重量级和轻量级组件*](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)。作为替代方案，您可以尝试[此处](https://stackoverflow.com/a/12447916/230513)提到的一种方法。

# php - uasort 强制一个元素到顶部，其余的在下面正确排序

> ID：13459671
> 
> 赞同：0
> 
> 时间：2012-11-19T18:15:23.817
> 
> 标签：php, cakephp

是否甚至可以对数组进行排序，使得一个元素（在这种情况下，与当前用户匹配的元素）冒泡到顶部，而其余的则正确排序在其下方？

我试图这样做（是的，我的 PHP 版本没有关闭，这很遗憾）但没有运气。

```
 uasort($output, create_function('$a,$b',                                                        
        'if( $a["user_id"] == '.$this->user['id'].') { return -1; }'.                               
        'elseif( $b["user_id"] == '.$this->user['id'].') { return -1; }'.                           
        'elseif( $b["percent"] == $a["percent"]) { return strcasecmp($a["username"], $b["username"]); 
        'elseif($a["percent"] < $b["percent"]) { return 1; }'.                                      
        'elseif($a["percent"] > $b["percent"]) { return -1; }'.                                     
        'else { return 0; }'                                                                        
    )); 
```

我认为这是最好的方法，因为无论如何我都必须对数组进行排序 - 但我愿意接受建议。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T15:28:30.123

最好的方法可能是这样做：

```
function sortWithUserFirst($output) {
    $user_ids = Set::extract('/user_id', $output); // list of user ids
    $user_id_key = array_search($this->user['id']);
    $user_record = $output[$user_id_key];
    unset($output[$user_id_key]); // clear the key => value pair
    uasort($output, your_sort_function);
    array_unshift($output, $user_record); // put the user record at the beginning of the array
} 
```

# javascript - 谷歌地图 API v3 infoBubble 与数组

> ID：13459678
> 
> 赞同：-1
> 
> 时间：2012-11-19T18:15:47.760
> 
> 标签：javascript, arrays, google-maps-api-3, infobubble

有没有人看过或知道 Google maps v3 infoBubble 示例的好例子？

我正在考虑为其使用一组数据，但似乎无法理解是否有任何好的用途，或者它是否适用于使用 JavaScript 设置的简单数据数组。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-19T18:27:10.873

你见过这个例子吗，来自谷歌地图 api 文档

[https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max)

或者有点复杂的：

[http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/smartinfowindow/smartinfowindow.html)

# thumbnails - UIActivityViewController -- NSURL ActivityItemProvider 默认缩略图

> ID：13459680
> 
> 赞同：4
> 
> 时间：2012-11-19T18:16:08.117
> 
> 标签：thumbnails, nsurl, uiactivityviewcontroller

当您使用 NSURL 在 UIActivityViewController 中附加链接时，我试图弄清楚是什么设置了回形针下的默认缩略图（而不是浮雕的 Safari 图标）。我觉得我已经看到诸如 google 和 iTunes 商店等网站将这些缩略图设置为有用的图像。我觉得浮雕的 safari 图标太模糊，用户不知道他/她发送的是什么链接。

它可能是该链接的 html 标头中的内容吗？

谢谢！

![模糊的 Safari 图标](../Images/c0152c64514d8073a38841d27e4c7a22.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-06T23:17:49.360

我最近不得不解密所有`UIActivityViewController`文档。您可能不想在盲目的希望中包含 a `UIImage`，`NSURL`它会被用作缩略图。据我了解，您无法确定`UIActivity`该图像将做什么，它可能会发布该图像而不是 URL。

在您的 activityItems 数组参数中`initWithActivityItems:applicationActivities:`，而不是`NSURL`，传递您创建的符合`UIActivityItemSource`协议的对象。您可以让任何控制器打开`UIActivityViewController`符合此协议的对象，例如，在这种情况下，您的 activityItems 参数将为`@[self]`.

除了实现 2 个必需的方法`activityViewControllerPlaceholderItem:`并且`activityViewController:itemForActivityType:`都只返回您的`NSURL`，还实现这个以返回您喜欢的任何缩略图：

```
- (UIImage *)activityViewController:(UIActivityViewController *)activityViewController thumbnailImageForActivityType:(NSString *)activityType suggestedSize:(CGSize)size; 
```

请注意文档中没有真正说明的一件事，如果您确实需要在您的 activityItems 数组中有多个对象并且正在更新它以使用`UIActivityItemSource`（或`UIActivityItemProvider`）对象，那么它需要一个单独的此类对象来返回每个原始对象原始数组中的数据对象。例如，如果您的数据项是 an`NSURL`和 a ，`UIImage`则使一个`UIActivityItemSource`返回 the `NSURL`，另一个返回`UIImage`. 拥有一个`UIActivityItemSource`返回一个数组`NSURL`并`UIImage`与您的原始 activityItems 数组类似的数组是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T20:18:03.753

您是否尝试过将派生的 UIActivity 对象的 activityImage 属性设置为要在回形针下显示的图像？

" 对于 UIActivityTypePostToTwitter：对象将提供的内容发布到用户的 Twitter 提要。使用此服务时，您可以提供 NSString、NSAttributedString、UIImage、AVAsset 和 NSURL 对象作为活动项目的数据。您还可以指定 NSURL 对象的内容使用资产库计划。”

请注意您可以包含在传递到 UIActivityViewController 的数组中的 UIImage 对象。此链接描述了有关 activityImage 属性的更多信息，[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html#//apple_ref/occ/instm/UIActivity/activityType](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivity_Class/Reference/Reference.html#//apple_ref/occ/instm/UIActivity/activityType)。

凯文

# objective-c - 如何以编程方式截取 iPhone 主屏幕的屏幕截图

> ID：13459682
> 
> 赞同：1
> 
> 时间：2012-11-19T18:16:21.773
> 
> 标签：objective-c, ios, cocoa-touch, screenshot

是否可以`Home Screen`从我的应用程序内部以编程方式截取屏幕截图？

![截屏](../Images/957831a7763c0c9fb7de110910e93783.png)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:46:26.927

使用私有 API 是的。`UIGetScreenImage()`当应用程序在后台运行时也可以使用。我设置了一个应用程序，以便在引发异常时截取屏幕截图，并且当它在后台运行时崩溃时，它还会截取主屏幕/其他应用程序的屏幕截图。

这个问题有一些关于 AppStore 中的 DisplayRecorder 应用的有趣答案：[iOS 应用 Display Recorder 如何在不使用私有 API 的情况下记录屏幕？](https://stackoverflow.com/questions/11090184/how-does-the-ios-app-display-recorder-record-the-screen-without-using-private-ap)

这向您展示了如何使用 UIGetScreenImage：[https ://stackoverflow.com/a/2507740/832065](https://stackoverflow.com/a/2507740/832065)

**更新：**

`_UICreateScreenUIImage()`是一种更快的获取屏幕截图的方法。它还返回一个 UIImage 而不是 CGImageRef：

```
OBJC_EXTERN UIImage *_UICreateScreenUIImage(void) NS_RETURNS_RETAINED; 
```

# opengl - opengl中的内置函数用于获取最终变换点的坐标

> ID：13459688
> 
> 赞同：0
> 
> 时间：2012-11-19T18:16:41.590
> 
> 标签：opengl, graphics, transformation

比如说，我得到了一个点 [x,y,z]。我应用了一些变换矩阵（由缩放、旋转和平移组成）。当然，我可以编写自己的例程来获取最终转换点的坐标。opengl 中是否有任何内置功能可以实现相同的功能..

这种类型的函数可能优化得很好，而我将写的内容可能效率不高。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:36:19.793

您可以使用[`gluProject()`](http://www.opengl.org/sdk/docs/man2/xhtml/gluProject.xml)：

```
glMatrixMode( GL_MODELVIEW );
glLoadIdentity();
glRotatef( 90, 0, 0, 1 );
GLdouble modelview[16] = { 0 };
glGetDoublev( GL_MODELVIEW_MATRIX, modelview );

GLdouble identity[16] = { 
    1, 0, 0, 0,
    0, 1, 0, 0,
    0, 0, 1, 0,
    0, 0, 0, 1
};
GLint view[4] = { -1, -1, 2, 2 };

// rotate (1,0,0) by 90 degrees around the Z axis:
double x, y, z;
gluProject( 1, 0, 0, modelview, identity, view, &x, &y, &z );
z = ( z * 2 ) - 1;

// x,y,z should equal (0,1,0) 
```

尽管您最好使用像[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)这样的适当矩阵库，因为它只是一个矩阵向量乘法。

# virtualization - 非 SLAT 机器上的 Windows Phone 8 模拟器

> ID：13459692
> 
> 赞同：8
> 
> 时间：2012-11-19T18:16:49.847
> 
> 标签：virtualization, windows-phone, windows-phone-8

虽然这个话题出现在不同的论坛上，讨论也不同，但我在 StackOverflow 上找不到它的任何实例，这对许多人来说可能是一个重要问题，所以我就从这里开始，因为我目前也在努力这个问题是因为我的工作场所没有支持 SLAT 的硬件。

据说：

> “新的模拟器基于最新版本的 Microsoft Hyper-V 构建，它需要一个包含二级地址转换 (SLAT) 的 64 位 CPU，这是一种内存虚拟化技术，包含在英特尔和 AMD 的大多数现代 CPU 中。SLAT (Second Level Address Translation) 只需要运行 Windows Phone 模拟器。您仍然可以在非 SLAT 计算机上构建 Windows Phone 8 应用程序；您只需在物理设备上部署和测试它们。- *[Windows Phone 8 开发内部]*

现在的问题是我确实有 64 位 CPU（Intel Core2Quad），但它没有 SLAT 支持，而且许多其他的必须有很好但非 SLAT 的 PC（对于 i3 之前的英特尔主要处理器没有这种支持）

*   现在我的问题是它真的像这样一个死胡同吗？如果有人想为 windows phone 8 开发，他将不得不购买新系统或最新的 WP（即使使用 WP，在开发过程中也会很麻烦）

*   使用 VMware、Virtual box 等其他任何东西真的没有办法摆脱它吗？

*   是否有任何其他第三方仿真器或选项可用于实现这一目标？

*   如果不是为什么，那么新的 SDK 版本发生了如此显着的变化，导致无法向后兼容？

最后我再次重复我的主要问题： **`Is it really impossible to develop for windows phone 8 with its emulator functioning if you have one of non-SLAT supported PCs?`**

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-05T16:02:05.060

> 是的，这绝对是不可能的，完成，finito，acabado。
> 
> 为什么每个人都很难理解这一点？它到处都有记录，在安装和尝试运行模拟器时会被告知。

好吧，虽然我确信你是对的并且它在*某处*有记录，但只有在 Bootcamp 下的 iMac（带有 i5 处理器）上安装和运行 Windows Phone 8 SDK 之后，我才有信心在我的 MacBook 上覆盖 Windows 7 分区Pro（CoreDuo），购买 Windows 8，全部安装，再次安装（相当冗长的）Windows Phone 8 SDK，最后才被告知“这台计算机与 Windows Phone 8 不兼容”等消息.

好吧，我本可以更仔细地查看文档，但我认为在 iMac 上进行试运行是一个很好的测试。这也是一个非常不标准的要求——“必须有一个 SLAT 处理器”。

我得到了好处等，但我认为仅在安装过程的最后才被告知这一点是非常糟糕的用户体验。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-17T18:25:54.940

我必须承认，我有点惊讶。

它可以工作，但不适用于 Windows 8。Windows 2012 服务器使用 hyper-V 版本，无需 SLAT。

所以：

1.  Windows Server 2012 试用版（我使用开发版）。安装在物理设备上 - 而不是虚拟机上。
2.  安装无板条功能 Hyper-V。
3.  标准 WP8SDK。

瞧。它就像一个魅力。而且速度有点快。VS 列表中的第一个模拟器加载大约 30 秒。更高级的需要更长的时间，但不会太多。部署是即时的。如果您不购买手机或新电脑，请尝试一下：）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T08:47:41.073

你不能在这样的机器上使用 Windows Phone 8 模拟器，这是事实，但你仍然可以使用 Windows Phone 7 模拟器开发和测试你的 WP7 应用程序，或者你可以在实际设备上调试。

因此，如果你真的想开发 Windows Phone 应用程序，请先尝试为 WP7 开发，然后在获得一些资金后，购买真正的 WP8 设备，如 HTC 8S 并开始测试，你不需要 1000 美元以上的新开发机器来创建出色的应用程序！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T02:13:59.813

我已经等了好几个星期才在这里回答，因为我不想错，但答案是“是”和“否”。您不能在非 slat 机器上运行它。但是您可以使您的机器成为支持 SLAT 的机器。

如果我错了，请纠正我，但 SLAT 功能可以作为物理或虚拟功能存在。如果您的机器不是 iX（i3、i5、i7）或 AMD，那么您可能没有 SLAT 作为物理功能。

但是，如果您在工作中或在您的 BizSpark 帐户下载列表中安装了 Windows Server 2012，那么您很可能可以在您的计算机上运行 Windows Phone 8 SDK。

我确认过去几个月我在 Windows 8 中的 AMD 上运行 WP8 SDK，并将其安装在 Windows Server 2012 VM 中。我可以运行具有三种外形尺寸的模拟器进行调试。它们最多可能需要 2-3 分钟才能打开，但一旦打开，一切都会顺利进行。

显然，在您获得一台好的 PC 之前，这只是一个难题，因为您无法获得最佳性能。但是您可以“几乎”正常工作。至少足以编码东西并将其提交给市场商店。我已经更新了 VMWare 和 WS2012 并禁用了无用的设备和 ACPI。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-19T23:43:40.967

您仍然可以使用 Windows Phone 7 模拟器，但您必须升级到具有更好处理器的 PC 才能运行 Windows Phone 8 模拟器。Windows Phone 8 模拟器比 Windows Phone 7 模拟器运行得更好，所以这是升级的好处之一。

我以 500 美元的税后价格购买了带有 i5 和 6GB RAM 的 Acer Aspire V5-571，以获得 SLAT 支持。随着黑色星期五优惠的到来，您可能会找到更便宜的东西。

如果你买不起新的 PC 或 Windows Phone，你仍然可以开发你的应用程序并让别人为你测试它。这绝对不是一个理想的解决方案，但它可能会在短期内让你坚持下去。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-20T00:14:16.440

> 如果您拥有一台不支持 SLAT 的 PC，那么真的不可能使用其模拟器功能为 windows phone 8 进行开发吗？

是的，这**绝对是不可能的，完成了，finoto, acabado**。

为什么每个人都很难理解这一点？它*到处都有*文档，在安装和尝试运行模拟器时会被告知。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T05:27:57.737

无论如何，您都将在真机上测试您的应用程序（因为您这样做对吗？！？），您仍然可以在没有 SLAT 的情况下做到这一点。

# c++ - 未定义的符号？

> ID：13459694
> 
> 赞同：2
> 
> 时间：2012-11-19T18:17:01.833
> 
> 标签：c++, compiler-errors, g++, linker-errors, undefined-reference

我现在有两个具有继承的类，一个是基类并包含多态性，它是接口：

```
#include <vector>
#ifndef _Signal_h
#define _Signal_h
using namespace std;

typedef vector<double> DIMENTIONS_2;

class Signal {

public:

    Signal();
    Signal(const int N, const int M)
    {
        this->width = N;
        this->height = M;
    };

    virtual vector<DIMENTIONS_2> splitSignal(vector<double> &theData) const = 0;
    virtual vector<DIMENTIONS_2> filterSignal(vector<DIMENTIONS_2>&blocks) const = 0;
    virtual vector<double> returnRawSignal() const = 0;

    virtual int zerocross() const = 0;
    virtual double energy() const = 0;
    virtual int zerocrossmap() = 0;
    virtual bool readSignal() const = 0;

protected:

    vector<double> rawSignal;
    int width;
    int height;
};

#endif 
```

从中继承和实现的类之一：

```
#include "Signal.h"

#ifndef _Audio_h
#define _Audio_h

typedef vector<double> DIMENTIONS_2;

class Audio : public Signal {

  public:

     Audio();
     Audio(const int N, const int M);

     vector<DIMENTIONS_2> splitSignal(vector<double>&data, int N, int M);
     vector<DIMENTIONS_2> filter(vector<DIMENTIONS_2> &data, double sumthres, double zerothres);

     double energy(vector<double> &blocks);

     int zerocross(vector<double> &block);

     int zerocrossmap(vector<double> &strippedData);

     template<typename T>
     int sign(T n);
 };

 #endif 
```

Audio 类具有实现（.cpp），但每当我尝试使用它进行编译时：

```
g++ Signal.h Audio.h Audio.cpp main.cpp 
```

我收到以下错误：

> 架构 x86_64 的未定义符号：“Signal::Signal()”，引用自： ccdjMubM.o 中的 Audio::Audio() ccdjMubM.o 中的音频::Audio() ld：未找到架构 x86_64 collect2 的符号: ld 返回 1 个退出状态

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:25:55.840

构造函数`Signal()`没有实现。刚刚添加了它，它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:24:55.467

源文件是用来编译的，而头文件是用来包含的。

所以，编译命令应该是：

g++ Audio.cpp main.cpp

此外，您需要为 Signal 类的默认构造函数提供一个实现，它可以简单为

信号（）{};

在 Signal.h 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T18:20:16.273

链接器缺少`Signal`该类的默认构造函数的定义（主体）。

# asp.net-mvc - 我所有的视图都在名为 Index.cshtml 的文件中。一定要这样吗？

> ID：13459695
> 
> 赞同：1
> 
> 时间：2012-11-19T18:17:07.077
> 
> 标签：asp.net-mvc

对于控制器`Foo`、`Bar`和`Baz`，我的文件夹结构如下所示：

```
Views
    Foo
        Index.csthml
    Bar
        Index.csthml
    Baz
        Index.csthml
        _Rarity.cshtml 
```

真的必须这样吗？确定要编辑的正确文件有点痛苦，因为它们中的大多数都被称为`Index.cshtml`. 理想情况下，我想要更像这样的东西：

```
Views
    Foo.csthml
    Bar.csthml
    Baz.csthml
    Baz
        _Rarity.cshtml 
```

我知道我可以将完全限定的路径传递给`View()`Controller 类的方法；即在`FooController`'s`Index()`方法内部，我可以调用`this.View("~/Views/Foo.cshtml")`. 这是我能得到的最好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:32:03.520

这不符合默认 Razor 视图引擎的性质；如上所述，这是使用第一个设置的传统方法。但是，您可以通过自定义 Razor 视图引擎以及在其中查找视图所需的文件夹来构建自己的约定。但是，您在设计中可能遇到的问题是文件名冲突；例如，您可以将 Foo.cshtml 映射到 Foo 控制器 Index 操作，但这意味着您无法轻松地将 Foo 控制器的另一个操作方法映射到没有特殊约定的视图。

结论：是的，可以自定义，但要注意复杂性和边缘情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-08T20:58:59.970

您可以使用 RouteMap() 来更改每个控制器的默认操作，这样它们就不会全部使用 Index，而是您希望调用的 .cshtml 文件。这仍然应该在不重新发明轮子的情况下利用魔法。

希望这可以帮助...

# c# - 重载的 RadTextBox 控件中的服务器端自定义验证器不调用其客户端验证函数

> ID：13459701
> 
> 赞同：2
> 
> 时间：2012-11-19T18:17:30.137
> 
> 标签：c#, asp.net, validation, telerik, custom-controls

我正在为 ASP.NET AJAX 使用 Telerik 的 RadControls。

我正在尝试创建一个包含 RadTextBox 的所有功能的自定义控件，但添加了对文本进行 HTML 编码以确保用户无法进行任何 HTML 注入或意外导致应用程序错误。在 PageLoad 中，文本被设置为其编码值，因此当我们需要检索数据或将其存储在数据库中时，它是编码格式的。然后为了美观，我将文本框的文本值设置为解码值。

我正在尝试添加一个自定义验证器，以确保 HTML 编码过程不会意外地将文本框的字符数扩展到字段和/或数据库的字符限制之外（诸如“<”或“>”之类的字符被转换为 '< ' 和 '>'，这可能会超出给定的字符限制）。

服务器端验证工作正常，但是如果返回无效，我希望使用客户端验证功能来防止回发。是否有任何理由不会调用客户端验证功能？

**C＃ ：**

```
public partial class CustomTextBox : RadTextBox
{
    private CustomValidator cvTextBox;
    private string encodedText;
    private string decodedText;

    public CustomTextBox()
    {
        base.Init += Init;
        base.Load += Load;
        base.PreRender += PreRender;
    }

    public override string Text
    {
        get
        {
            return base.Text;
        }
        set
        {
            decodedText = HttpUtility.HtmlDecode(value);
            encodedText = decodedText == value ? HttpUtility.HtmlEncode(value) : value;
            base.Text = encodedText;
        }
    }

    protected new void Init(object sender, EventArgs e)
    {
        cvTextBox = new CustomValidator();
        cvTextBox.ID = this.ID + "_cvTextBox";
        cvTextBox.ControlToValidate = this.ID;
        cvTextBox.ClientIDMode = ClientIDMode.Static;
        cvTextBox.Display = ValidatorDisplay.Dynamic;
        cvTextBox.SetFocusOnError = false;
        cvTextBox.ErrorMessage = "<div class='validationMessage'>Field is too large after encoding. Remove any unnecessary '<', '>', or '&' characters.</div>";
        cvTextBox.ServerValidate += CustomTextBox_Validate;
        cvTextBox.EnableClientScript = true;
        cvTextBox.ClientValidationFunction = "testvalidate";
        cvTextBox.ValidateEmptyText = true;
        Controls.Add(cvTextBox);
    }

    protected new void Load(object sender, EventArgs e)
    {
        base.Text = encodedText;
    }

    protected new void PreRender(object sender, EventArgs e)
    {
        base.Text = decodedText;
    }

    protected override void Render(HtmlTextWriter writer)
    {
        base.Render(writer);
        cvTextBox.RenderControl(writer);
    }

    public void CustomTextBox_Validate(object source, ServerValidateEventArgs args)
    {
        CustomValidator cv = source as CustomValidator;
        args.IsValid = encodedText.Length < MaxLength;
    }
} 
```

**Javascript：**

```
function testvalidate(source, args) {
    try {
        console.log("Will this message show?");
        args.IsValid = $find(source.controltovalidate).get_value().length < 50;
    } catch (error) {
        logError(error);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:32:12.117

我相信在事件`this.ID`中是无效的。`Init`调试它的值，并将其与生成的 html 控件的值进行比较。

`cvTextBox.ControlToValidate = this.ID;`在你的`Load`方法中设置也将测试这个理论。

# c# - 一个二维向量

> ID：13459702
> 
> 赞同：0
> 
> 时间：2012-11-19T18:17:43.170
> 
> 标签：c#, winforms, vector, workflow-foundation, physics

我想用 C# windows 窗体制作一个横向滚动游戏，为此我需要为二维向量创建一个类。在网上搜索时，我发现的只是 3 维向量，这远远超出了我的需要，一旦我将“二维”添加到查询中，我只会得到多维数组的结果。

我需要为班级做的就是能够获得向量的极坐标表达式（大小和角度）并返回它的笛卡尔表达式（X，Y），反之亦然。我尝试用 Math.Sin 和 Math.Cos 来做，但我总是得到奇怪的结果。任何人都可以帮助我解释或准备代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:54:08.587

您可以使用命名空间[`Vector`](http://msdn.microsoft.com/en-us/library/system.windows.vector.aspx)中可用的结构`System.Windows`。如果添加对**WindowsBase.dll**的引用，则可以使用它。Vector struct 有许多有用的静态方法，但你不能这么简单地得到 Vector 的角度。您可以`Vector.AngleBetween`用于此目的。

# python - 在 cx_oracle python 中获取序列号

> ID：13459703
> 
> 赞同：1
> 
> 时间：2012-11-19T18:17:43.170
> 
> 标签：python, cx-oracle

我正在尝试执行具有序列号列但无法确定返回值的插入语句。

当我在没有绑定 seqvalue 的情况下执行以下语句时，出现错误。当我将 seqvalue 初始化为 0 并将其绑定时，输出为 0。

代码

```
 col2 = 'test'
    qry=insert into table1 (col1,col2) value (seq1.nextval,:col2) returning col1 into :seqvalue

   cur.excute(qry,:col2) 
```

请提供您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-12T20:18:06.693

您可以尝试使用绑定变量和准备语句，它们将使用与 SEQ.nextval 相同的 oracle 方法。脚步 ：

1.  使用 cx_Oracle 建立数据库连接。

2.  从数据库连接中获取游标。

3.  声明变量：将被推送到 Oracle 插入语句中。例如下面：

var_CHANGES = '测试更改' var_COMMENTS = '测试'

4.  使用下一行字符创建一个语句，如下例所示：

```
statement = "INSERT"                    + "\n" + \
       "INTO   CHANGE_LOG"    + "\n" + \
       "( CHANGE_LOG_ID"      + "\n" + \
       ", CHANGE_TYPE"             + "\n" + \
       ", CHANGE_DATE"            + "\n" + \
       ", COMMENTS )"              + "\n" + \
       "VALUES"                    + "\n" + \
       "( CHANGE_LOG_SEQ.nextval" + "\n" + \
       ", :bCHANGE_TYPE"               + "\n" + \
       ", sysdate"              + "\n" + \
       ", :bCOMMENTS )"
```

然后，使用正则表达式替换格式查询：

```
stmt = re.sub('\s+',' ',stmt.replace('\n',' ').replace('\r',''))
```

5.  使用 cursor.execute 执行查询。按照上面的例子：

```
cursor.execute(statement, bCHANGE_TYPE=var_CHANGES     \
                        , bCOMMENTS = var_COMMENTS )
```

6.  执行提交语句

因此，在这里您可以像在普通 SQL 查询中一样使用 SQL nextval() 和 sysdate。这应该为您完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-03T17:49:51.600

1.  在数据库中创建序列：创建序列 my_seq minvalue 1 maxvalue 99999999999999 以 1 为增量 start with 1 nocache noorder nocycle；

2.  创建Oracle函数生成数据库中的序列号： 创建或替换函数 gen_seq 返回数字为Seq_value数字；开始

    ```
     Select my_seq.nextval into seq_value from dual;
      Return seq_value; 
    ```

    结尾;

3.  self.emp_id = cur.callfunc('gen_seq', int)

4.  使用 self.emp_id 作为绑定变量，以便插入到您的数据库中。

任何疑问。请随时询问。

# android - 使用多个文件 Android 进行分段上传的进度条

> ID：13459704
> 
> 赞同：4
> 
> 时间：2012-11-19T18:17:47.153
> 
> 标签：android, progress-bar, multipart

编辑：已解决，向下滚动；）

按照[这里](http://toolongdidntread.com/android/android-multipart-post-with-progress-bar/)的教程，

我在 AsyncTask 中实现了一个进度条对话框来显示上传数据的百分比。目前它只是从 0% 显示到 100%，然后它会卡在 100% 直到所有数据上传。我正在尝试上传一个 Json 字符串和 4 张图片。

代码：

```
 private class UploaderTask extends AsyncTask<JSONArray, Integer, String> {

    private ProgressDialog dialog;
    protected Context mContext;
    long totalSize;

    public UploaderTask(Context context) {

        mContext = context;
    }

    @Override
    protected void onPreExecute() {

        dialog = new ProgressDialog(mContext);
        dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setTitle("Uploading data");
        dialog.setCancelable(false);
        //dialog.setIndeterminate(true);
        dialog.setMessage("Please wait...");
        dialog.show();
        //dialog.setProgress(0);

    }

    @Override
    public String doInBackground(JSONArray... json) {

        String responseMessage = "";
        int counter = 0;

        try {

            CustomMultiPartEntity entity = new CustomMultiPartEntity(new ProgressListener() {
                @Override
                public void transferred(long num) {
                    publishProgress((int) ((num / (float) totalSize) * 100));
                }
            });

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(URL);

            //convert JSON array to String (first element contains the whole of data)
            String json_encoded_string = json[0].toString();

            //add json data
            entity.addPart("json", new StringBody(json_encoded_string));

            //get all images plus data and add them to the Multipart Entity

            for (images_cursor.moveToFirst(); !images_cursor.isAfterLast(); images_cursor.moveToNext()) {

                counter++;

                //Get image and convert to byte array
                byte[] image_ba = images_cursor.getBlob(images_cursor.getColumnIndex("image"));
                long image_unit_id = images_cursor.getLong(images_cursor.getColumnIndex("unit_id"));
                String image_caption = images_cursor.getString(images_cursor.getColumnIndex("caption"));

                //add image to multipart
                entity.addPart("image" + counter, new ByteArrayBody(image_ba, "image" + counter + ".jpg"));

                //add unit _id to multipart
                entity.addPart("image_unit_id" + counter, new StringBody(String.valueOf(image_unit_id)));

                //add caption to multipart
                entity.addPart("image_caption" + counter, new StringBody(String.valueOf(image_caption)));

            }

                            totalSize = entity.getContentLength();
            httppost.setEntity(entity);

            HttpResponse response = httpclient.execute(httppost);
            InputStream inputStream = response.getEntity().getContent();
            responseMessage = inputStreamToString(inputStream);

            //log out response from server
            longInfo(responseMessage);

        }
        //show error if connection not working
        catch (SocketTimeoutException e) {
            e.printStackTrace();
            responseMessage = "unreachable";

        }

        catch (ConnectTimeoutException e) {
            e.printStackTrace();
            responseMessage = "unreachable";

        }

        catch (Exception e) {
            e.printStackTrace();
            responseMessage = "unreachable";

        }

        return responseMessage;
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        dialog.setProgress((int) (progress[0]));
    }

    @Override
    protected void onPostExecute(String result) {

        //result is the response back from "doInBackground"
        dialog.cancel();

        TextView response_holder = (TextView) findViewById(R.id.response);

        //check if there were errors upoloading
        if (result.equalsIgnoreCase("unreachable")) {
            response_holder.setText("Error while uploading...Please check your internet connection and retry.");
            return;
        }

        if (result.equalsIgnoreCase("error saving project data")) {
            response_holder.setText("There was an error on the server saving the project data, please retry.");
            return;
        }

        if (result.equalsIgnoreCase("error saving sites data")) {
            response_holder.setText("There was an error on the server saving the sites data, please retry.");
            return;
        }

        if (result.equalsIgnoreCase("project saved")) {
            response_holder.setText("Data uploaded successfully!");
            return;
        }

        if (result.equalsIgnoreCase("project already exist")) {
            response_holder.setText("This project already exist!");
            return;
        }

    }

 } 
```

我猜它只是计算 json 字符串的总大小，因为它是第一部分......有什么建议吗？

[编辑：可能重复，这里](https://stackoverflow.com/questions/13150978/progress-bar-not-update-where-upload-multipart)仍然没有解决方案

编辑：解决了`totalSize = entity.getContentLength();`在发布实体之前添加，代码已更新

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:20:01.210

看这段代码：

```
@Override
protected void onProgressUpdate(Integer... progress) {
    dialog.setProgress((int) (progress[0]));
} 
```

本质上，您只关心第一个进度值。这很好，因为您的代码中可能只有一个。`publishProgress`但是您可以通过在代码中添加语句来发布进度。这可以通过每次完成某件事时按一个百分比来完成，如下所示：

```
 int progress_done=20;
     publishProgress(progress_done);
     for (images_cursor.moveToFirst(); !images_cursor.isAfterLast(); images_cursor.moveToNext()) {

            counter++;

            //Get image and convert to byte array
            byte[] image_ba = images_cursor.getBlob(images_cursor.getColumnIndex("image"));
            long image_unit_id = images_cursor.getLong(images_cursor.getColumnIndex("unit_id"));
            String image_caption = images_cursor.getString(images_cursor.getColumnIndex("caption"));

            //add image to multipart
            entity.addPart("image" + counter, new ByteArrayBody(image_ba, "image" + counter + ".jpg"));

            //add unit _id to multipart
            entity.addPart("image_unit_id" + counter, new StringBody(String.valueOf(image_unit_id)));

            //add caption to multipart
            entity.addPart("image_caption" + counter, new StringBody(String.valueOf(image_caption)));

            progress_done+=20;
            publishProgress(progress_done);
        } 
```

# angularjs - 动态添加 angularjs 指令

> ID：13459705
> 
> 赞同：2
> 
> 时间：2012-11-19T18:17:51.113
> 
> 标签：angularjs

我正在尝试编写一个指令，将另一种类型的指令动态添加到 DOM 并编译它们。使用字符串模板时似乎有效，但使用 templateUrl 时失败。这是工作模板字符串的 jsfiddle：

```
app.directive('clicker', function($compile) {
    'use strict';

    return {
        compile: function(tElement, tAttrs) {
            var t = '<div data-pop>Pop</div>';

            return function(scope, iElement) {
                iElement.click(function() {
                    $('body').append($compile(t)(scope));
                });
            };
        }
    }
});

app.directive('pop', function() {
    'use strict';

    return {
        template: '<div>Testing template</div>'
        //templateUrl: 'partials/pop.html'
    };
}); 
```

[http://jsfiddle.net/89AYX/](http://jsfiddle.net/89AYX/)

但是如果换成 templateUrl（一个 html 文件包含模板字符串中的内容），它只会工作*一次*。它确实向 DOM 添加了一个元素，但它不包含 templateUrl 内容，也不在动态添加的指令中调用链接函数......

尝试添加其中两个将使 DOM 看起来像：

```
<div data-pop><!-- content of pop.html --></div>
<div data-pop></div>
<div data-pop></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:56:56.320

添加 scope.$apply() 对我有用。使用 jQuery 1.9.0 和 Angular 1.0.3 测试。

```
iElement.bind('click', function() {
    $('body').append($compile(t)(scope));
    scope.$apply();  // cause a $digest cycle to run, since we're "outside" Angular
}); 
```

这个[小提琴](http://jsfiddle.net/mrajcok/UuNe8/)使用内联模板，但我还使用本地网络服务器进行了测试，该服务器必须执行单独的 HTTP GET 才能获取部分。

# jquery - jQuery滚动偏移

> ID：13459707
> 
> 赞同：0
> 
> 时间：2012-11-19T18:17:56.260
> 
> 标签：jquery

使用这个 jQuery：[https ://github.com/JamyGolden/PlusAnchor](https://github.com/JamyGolden/PlusAnchor)

我希望让它滚动到特定的锚点，但给它一个 50px 的顶部偏移量。我有一个 50px 的固定页眉，当页面滚动时，页眉会覆盖该部分的一部分。

任何帮助或正确方向的观点表示赞赏。

谢谢

我的代码：

```
<script type="text/javascript">
$(document).ready(function(){
$('body').plusAnchor({
easing: 'easeInOutExpo',
speed: 800,
onInit: function( base ) {
if ( base.initHash != '' && $(base.initHash).length > 0 ) {

window.location.hash = 'hash_' + base.initHash.substring(1);

window.scrollTo(0, 0);

$(window).load( function() {

 timer = setTimeout(function() {

$(base.scrollEl).animate({
scrollTop: $( base.initHash ).offset().top

}, base.options.speed, base.options.easing);
}, 500); // setTimeout

}); // window.load
}; // if window.location.hash

} // onInit
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:49:22.430

这个问题的答案可以在这里找到：[https ://github.com/JamyGolden/PlusAnchor/issues/1](https://github.com/JamyGolden/PlusAnchor/issues/1)

# prolog - 序言中的六边形国际象棋AI

> ID：13459710
> 
> 赞同：4
> 
> 时间：2012-11-19T18:18:15.873
> 
> 标签：prolog, artificial-intelligence, chess

我期待着写一个“Shafrans hex chess AI in prolog”。是否有任何已经可用的开源代码可供参考？

[http://en.wikipedia.org/wiki/Hexagonal_chess](http://en.wikipedia.org/wiki/Hexagonal_chess)（有关 Shafrans 六角棋的信息）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:06:17.730

可以使用[alpha/beta 搜索](http://www.csupomona.edu/~jrfisher/www/prolog_tutorial/5_3.html)解决 2 个对手之间的游戏。这是最基本的“框架”，并介绍了您在改进游戏时需要的成分。

您至少会实现[MinMax](http://ai.ia.agh.edu.pl/wiki/prolog%3apllib%3abest-move_minimax)。这两个论点`The Art Of Prolog`由 Sterling & Shapiro说明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T19:55:01.107

有一个 codeplex 项目 - [https://hexchess.codeplex.com/](https://hexchess.codeplex.com/)用于几个六边形国际象棋变体，我认为包括 Shafrans。代码不在序言中，但代码就是代码，如果您仍在寻找，这应该会给您一个开始。

# performance - 有没有办法在 Sybase 中判断“set statistics io”是打开还是关闭？

> ID：13459713
> 
> 赞同：1
> 
> 时间：2012-11-19T18:18:23.187
> 
> 标签：performance, statistics, sybase

我在从数据库查询中收集我的 IO 统计信息时遇到了一个奇怪的错误。

在我看来（没有证据）的方式是，由于没有明显的原因，运行的查询之一将其`set statistics io`关闭。

**Sybase有什么方法可以查询`set statistics io`是ON还是OFF？**

* * *

注意：这对我的主要问题（上面粗体）无关紧要，但更高级别的问题如下：

*   我在 Perl 中使用 DBI 模块连接到 Sybase。

*   我正在运行以下代码：

    ```
    Run_Query("set statistics io on");
    Run_Query("set showplan on");
    Run_Query("$query1");
    Run_Query("$query2");
    # ...
    Run_Query("$queryN");
    Run_Query("set statistics io off");
    Run_Query("set showplan off"); 
    ```

*   出于某种原因，`$query3`打印来自 DBI 回调的 showplan 输出，而不是统计 IO 输出。

*   我想检查是否由于某种原因“set statistics io off”被提前调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:27:56.143

有一种方法可以检查它，但不是那么简单。您可以使用此变量：

```
select @@options 
```

它将向您显示所有会话的设置选项，但它是十六进制表示:)。

[在底部](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug611.htm)有一个表格，其中描述了 的值`@@options`。

我测试了它，在第 14 位有`2`or `A`，它取决于`set statistics io`状态：

```
80a10000000f014403
80210000000f014403 
```

# c++ - Windows.h 线程亲和性

> ID：13459714
> 
> 赞同：1
> 
> 时间：2012-11-19T18:18:30.177
> 
> 标签：c++, windows, multithreading, setthreadaffinitymask

下面的代码会编译并运行，只是输出不是我所期望的。我希望程序创建 n 个线程（取决于可用的多核数量）并运行一个在程序末尾找到的简单例程用于输出

“测试：”

后跟数字 1-10。相反，我得到的是一个输出，它确实写了一些数字，但最多不超过两个，并且函数 threadmain 似乎没有完全在一个线程上运行，但它在某种程度上输出 testing: 012 在其他线程上。我知道多线程会破坏输出，但我应该在屏幕上的某处看到数字 3、4、5、6、7、8、9，但它没有出现。

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <stdio.h>
#include <cmath>
#include <iostream>

HANDLE *m_threads = NULL;
static DWORD_PTR WINAPI threadMain(void* p);

DWORD_PTR GetNumCPUs()
{
  SYSTEM_INFO m_si = {0, };
  GetSystemInfo(&m_si);
  return (DWORD_PTR)m_si.dwNumberOfProcessors;
}

CRITICAL_SECTION g_crit_sec;
static int g_start = 0;

int main(int argc, char **args)
{
  DWORD_PTR c = GetNumCPUs();

  m_threads = new HANDLE[c];

  InitializeCriticalSectionAndSpinCount(&g_crit_sec, 0x80000400);

  for(DWORD_PTR i = 0; i < c; i++)
  {
    DWORD_PTR m_id = 0;
    DWORD_PTR m_mask = 1 << i;

    m_threads[i] = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)threadMain, (LPVOID)i, NULL, &m_id);
    SetThreadAffinityMask(m_threads[i], m_mask);

    //wprintf(L"Creating Thread %d (0x%08x) Assigning to CPU 0x%08x\r\n", i, (LONG_PTR)m_threads[i], m_mask);
  }

  return 0;
}
static DWORD_PTR WINAPI threadMain(void* p)
{
    double result = 0.0;

    for (int i = 0; i < 10; i++)
    {
        std::cout<<"testing: "<<i<<std::endl;
        //result = result + sin(i) * tan(i);
    }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:25:33.007

您的应用程序在您的线程完成运行之前终止。启动线程后，在主函数中调用或更恰当的调用，如下所示`Sleep()`：`WaitForMultipleObjects()`

```
int main(int argc, char **args)
{
  DWORD_PTR c = GetNumCPUs();

  m_threads = new HANDLE[c];

  InitializeCriticalSectionAndSpinCount(&g_crit_sec, 0x80000400);

  for(DWORD_PTR i = 0; i < c; i++)
  {
    DWORD_PTR m_id = 0;
    DWORD_PTR m_mask = 1 << i;

    m_threads[i] = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)threadMain, (LPVOID)i, NULL, (LPDWORD)&m_id);
    SetThreadAffinityMask(m_threads[i], m_mask);

    //wprintf(L"Creating Thread %d (0x%08x) Assigning to CPU 0x%08x\r\n", i, (LONG_PTR)m_threads[i], m_mask);
  }

  // Waits for all started threads to complete:
  WaitForMultipleObjects(c, m_threads, TRUE, INFINITE);

  return 0;
} 
```

# google-analytics - 谷歌分析过滤器不起作用

> ID：13459715
> 
> 赞同：9
> 
> 时间：2012-11-19T18:18:30.880
> 
> 标签：google-analytics

我将所有事件发送到同一个 Google Analytics 帐户，并使用带有过滤器的配置文件将它们过滤掉。

**我的暂存过滤器工作不正常**。在这里，很简单：

* * *

![](../Images/3d600db52b6f76db81cf1c4d491e8968.png)

* * *

**这是我在`All Traffic`个人资料**中的事件（无过滤器）：

![](../Images/e28a63827a1e98ab5196b81e4b7d889c.png)

* * *

根据我的过滤器，带有主机名的事件`stagingsecure.example.com`应该显示在`Staging`配置文件中。但他们没有。

任何想法为什么这些事件没有出现在我的`Staging`个人资料中？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-12-17T00:52:48.893

我有同样的问题。事实证明，GA 过滤器仅在您创建它们时才开始工作，而不是追溯。当您创建过滤器然后查看报告时，您将不会看到过滤器正在工作，除非您设置在过滤器创建后开始的时间范围。

将过滤器添加到新视图也是一个好主意，因为过滤器会从视图中永久删除数据并且无法恢复。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-03T22:03:36.267

我不是 100% 确定，但我认为这实际上只是耐心的问题，应用过滤器不是即时的（远非如此）。

# java - 无法序列化 HibernateProxy 的对象原因

> ID：13459718
> 
> 赞同：59
> 
> 时间：2012-11-19T18:18:54.910
> 
> 标签：java, hibernate, jakarta-ee, jax-rs, gson

我从服务器收到以下错误响应。

> HTTP 状态 500 -
> 
> 类型异常报告
> 
> 信息
> 
> 描述服务器遇到一个内部错误 () 阻止它完成这个请求。
> 
> 例外
> 
> javax.servlet.ServletException: java.lang.UnsupportedOperationException: 试图序列化 java.lang.Class: org.hibernate.proxy.HibernateProxy。忘记注册类型适配器？
> 
> 根本原因
> 
> java.lang.UnsupportedOperationException：试图序列化 java.lang.Class：org.hibernate.proxy.HibernateProxy。忘记注册类型适配器？

从 Java 调试器：

```
org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer@7632012e 
```

我正在使用 Gson 将我的 Java 对象转换为 JSON。下面我粘贴了一些我的代码。

这是我的资源：

```
@Stateless
@LocalBean
@Path("/autos")
@Produces(MediaType.APPLICATION_JSON)
public class AutoResource {

    @EJB
    private CarAssembler warehouse;
    @Context
    private UriInfo uriInfo;

    @GET
    public Response allAutos() {
        // Building a context, lots of code...
        // Creating a Gson instance and configures it...

        final Auto auto = warehouse.list(context);
        final String autoJson = gson.toJson(auto);

        return Response.ok(autoJson).build();
    }
} 
```

CarAssembler 只是一个调用存储库的服务。我没有在这里粘贴服务的代码。

存储库：

```
@Override
public Question findById(final int id, final FetchType fetchType) {

    final Auto question = getEntityManager().find(Auto.class, id);

    if (fetchType == FetchType.LAZY) {
        return auto;
    }

    Hibernate.initialize(auto.getManufacturer());
    Hibernate.initialize(auto.getAssemblyHouse());

    return auto;
} 
```

如您所见，我提供了对象的延迟加载和急切加载。我使用 Hibernate.initialize 来渴望获取 JPA 关联。但是，问题是如何修复我得到的代理错误。为什么只有AssemblyHouse仍然附加到JavaAssist，而Manufacturer没有（我在Java Debugger中看到了类型）。我如何知道何时取消代理对象？我应该取消代理该汽车可能具有的所有关联吗？在我的代码的哪一层？当我取消代理时，它会影响我的应用程序的性能吗？还有其他解决方案吗？我从错误消息中看到我可以制作类型适配器。是的，我可以，但我必须对所有域对象执行此操作，以确保正确完成转换。当我尝试将域中的其他对象也转换为 JSON 表示时，可能会开始失败，但我不知道何时或为什么。

这是我取消代理对象的方式，但我还没有实现它，因为我不知道这是好是坏，在哪一层做这个，什么时候做。我应该一直取消代理对象吗？

```
public class HibernateUtilities {

    public static <T> T unproxy(T proxy) {
        if (proxy == null) {
            return null;
        }

        if (proxy instanceof HibernateProxy) {
            Hibernate.initialize(proxy);

            HibernateProxy hibernateProxy = (HibernateProxy) proxy;
            T unproxiedObject = (T) hibernateProxy.getHibernateLazyInitializer().getImplementation();

            return unproxiedObject;
        }

        return proxy;
    }
} 
```

* * *

根据要求进行堆栈跟踪：

```
[#|2012-11-22T17:17:13.285+0100|警告|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=71;_ThreadName=Thread-8;| StandardWrapperValve [javax.ws.rs.core.Application]：
PWC1406：Servlet javax.ws.rs.core.Application 的 Servlet.service()
抛出异常 java.lang.UnsupportedOperationException: 试图
序列化 java.lang.Class：org.hibernate.proxy.HibernateProxy。忘记
注册一个类型适配器？
    在 com.google.gson.internal.bind.TypeAdapters$1.write(TypeAdapters.java:64)
    在 com.google.gson.internal.bind.TypeAdapters$1.write(TypeAdapters.java:61)
    在 com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    在 com.google.gson.internal.bind.ArrayTypeAdapter.write(ArrayTypeAdapter.java:93)
    在 com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    在 com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
    在 com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
    在 com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    在 com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
    在 com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
    在 com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    在 com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
    在 com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
    在 com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    在 com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write(CollectionTypeAdapterFactory.java:96)
    在 com.google.gson.internal.bind.CollectionTypeAdapterFactory$Adapter.write(CollectionTypeAdapterFactory.java:60)
    在 com.google.gson.internal.bind.TypeAdapterRuntimeTypeWrapper.write(TypeAdapterRuntimeTypeWrapper.java:68)
    在 com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.write(ReflectiveTypeAdapterFactory.java:89)
    在 com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.write(ReflectiveTypeAdapterFactory.java:195)
    在 com.google.gson.Gson.toJson(Gson.java:586)
    在 com.google.gson.Gson.toJson(Gson.java:565)
    在 com.google.gson.Gson.toJson(Gson.java:520)
    在 com.myapp.AutoResource.produceAuto(AutoResource.java:48)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    在 org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    在 com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    在 com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    在 com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    在 com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    在 com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    在 com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    在 com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    在 com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    在 com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    在 com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    在 com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    在 com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    在 com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    在 com.sun.jersey.server.impl.model.method.dispatch.Abs​​tractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    在 com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    在 com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    在 com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    在 com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    在 com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    在 com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    在 com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    在 com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    在 com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    在 com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    在 com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    在 com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    在 javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    在 org.apache.catalina.core.StandardWrapper.service（StandardWrapper.java:1550）
    在 org.apache.catalina.core.StandardWrapperValve.invoke（StandardWrapperValve.java:281）
    在 org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:175)
    在 org.apache.catalina.core.StandardContextValve.invoke（StandardContextValve.java）
    在 org.apache.catalina.core.StandardPipeline.doInvoke（StandardPipeline.java:655）
    在 org.apache.catalina.core.StandardPipeline.invoke（StandardPipeline.java:595）
    在 org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:161)
    在 org.apache.catalina.core.StandardHostValve.invoke（StandardHostValve.java）
    在 org.apache.catalina.connector.CoyoteAdapter.doService（CoyoteAdapter.java:331）
    在 org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:231）
    在 com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    在 com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    在 com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    在 com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    在 com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    在 com.sun.grizzly.http.DefaultProtocolFilter.execute（DefaultProtocolFilter.java:229）
    在 com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    在 com.sun.grizzly.DefaultProtocolChain.execute（DefaultProtocolChain.java:104）
    在 com.sun.grizzly.DefaultProtocolChain.execute（DefaultProtocolChain.java:90）
    在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    在 com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    在 com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    在 com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    在 java.lang.Thread.run(Thread.java:722) |#]

```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-11-23T08:44:50.353

您无需手动取消代理一切，只需使用自定义`TypeAdapter`. 这些方面的东西：

```
/**
 * This TypeAdapter unproxies Hibernate proxied objects, and serializes them
 * through the registered (or default) TypeAdapter of the base class.
 */
public class HibernateProxyTypeAdapter extends TypeAdapter<HibernateProxy> {

    public static final TypeAdapterFactory FACTORY = new TypeAdapterFactory() {
        @Override
        @SuppressWarnings("unchecked")
        public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
            return (HibernateProxy.class.isAssignableFrom(type.getRawType()) ? (TypeAdapter<T>) new HibernateProxyTypeAdapter(gson) : null);
        }
    };
    private final Gson context;

    private HibernateProxyTypeAdapter(Gson context) {
        this.context = context;
    }

    @Override
    public HibernateProxy read(JsonReader in) throws IOException {
        throw new UnsupportedOperationException("Not supported");
    }

    @SuppressWarnings({"rawtypes", "unchecked"})
    @Override
    public void write(JsonWriter out, HibernateProxy value) throws IOException {
        if (value == null) {
            out.nullValue();
            return;
        }
        // Retrieve the original (not proxy) class
        Class<?> baseType = Hibernate.getClass(value);
        // Get the TypeAdapter of the original class, to delegate the serialization
        TypeAdapter delegate = context.getAdapter(TypeToken.get(baseType));
        // Get a filled instance of the original class
        Object unproxiedValue = ((HibernateProxy) value).getHibernateLazyInitializer()
                .getImplementation();
        // Serialize the value
        delegate.write(out, unproxiedValue);
    }
} 
```

要使用它，您必须先注册它：

```
GsonBuilder b = new GsonBuilder();
...
b.registerTypeAdapterFactory(HibernateProxyTypeAdapter.FACTORY);
...
Gson gson = b.create(); 
```

请注意，这将递归地初始化对象层次结构中的每个代理；但是，因为您必须序列化整个数据，所以无论如何您都应该这样做。

**这是如何运作的？**

GSON 包含许多`TypeAdapterFactory`实现，适用于各种类型（原始类型、常见类型如`String`or `Date`、列表、数组......）。询问每个工厂是否能够序列化某个 Java 类型（参数 to`create`是 a`TypeToken`而不是 a `Class`，以便捕获有关泛型类型的可能信息，而后者`Class`没有）。如果工厂能够序列化/反序列化一个类型，它会响应一个`TypeAdapter`实例；否则它会以`null`.

`HibernateProxyTypeAdapter.FACTORY`验证*类型*是否实现`HibernateProxy`；在这种情况下，它返回一个`HibernateProxyTypeAdapter`用于序列化的实例。`write`当必须序列化实际对象时调用该方法；适配器提取底层对象的原始类型，并向 GSON 询问`TypeAdapter`原始类型的标准，通常为`ReflectiveTypeAdapter`.

然后它检索原始类的实例，而不是直接使用代理。这是必要的，因为直接`ReflectiveTypeAdapter`访问[fields](http://code.google.com/p/google-gson/issues/detail?id=5)，而不是使用 getter；访问代理对象的字段不起作用，这是一个经典的[Hibernate 陷阱](http://blog.xebia.com/2008/03/08/advanced-hibernate-proxy-pitfalls/)。

作为一种可能的性能改进，`TypeAdapter`应该在`create`方法中获取委托。我发现调用`getSuperclass()`代理`Class`似乎会产生原始基类。然后代码可以变成：

```
public static final TypeAdapterFactory FACTORY = new TypeAdapterFactory() {
    @Override
    @SuppressWarnings("unchecked")
    public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
        return (HibernateProxy.class.isAssignableFrom(type.getRawType())
                ? (TypeAdapter<T>) new HibernateProxyTypeAdapter((TypeAdapter)gson.getAdapter(TypeToken.get(type.getRawType().getSuperclass()))) 
     : null);
    }
};
private final TypeAdapter<Object> delegate;

private HibernateProxyTypeAdapter(TypeAdapter<Object> delegate) {
    this.delegate = delegate;
}

@SuppressWarnings({"rawtypes", "unchecked"})
@Override
public void write(JsonWriter out, HibernateProxy value) throws IOException {
    if (value == null) {
        out.nullValue();
        return;
    }
    delegate.write(out, ((HibernateProxy) value).getHibernateLazyInitializer()
            .getImplementation());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T13:51:54.913

看起来好像您提到过急切加载时仍然存在错误，那么问题可能不在于 Hibernate，而可能在于 GSON 实现。我认为您在创建 JSON 时需要一个类型，不确定它是否已注册，但可能是这样的：

```
public String autosToJson(Auto autos) {  
    GsonBuilder gsonBuilder = new GsonBuilder();
    Gson gson = gsonBuilder.registerTypeAdapter(Auto.class, new AutoAdapter()).create();
    return gson.toJson(autos);
} 
```

然后只需创建一个AdapterClass，例如：

```
public class AutoAdapter implements JsonSerializer<Auto> {
  @Override
  public JsonElement serialize(Auto auto, Type type, JsonSerializationContext jsc) {
    JsonObject jsonObject = new JsonObject();
    jsonObject.addProperty("auto_id", auto.getId());
    jsonObject.addProperty("auto_name", auto.getAutoName());
    jsonObject.addProperty("auto__manufacture_date", auto.getManufactureDate().toString());
    return jsonObject;      
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T07:02:49.927

在通常情况下，您不希望您的域对象通过服务公开为 XML/JSON，通常您需要创建一个 DTO，因为您的实体不符合您的消费者的需求。即使现在可以，在对数据库进行内部重构之后，明天也无法适应。因此，如果您遇到这样的麻烦，我的建议是立即创建 DTO。顺便说一句，您甚至可以在 Hibernate 级别上创建这些 DTO，方法是使用结果转换器或创建视图并将 Hibernate 实体映射到这些视图上。

另一个技巧是使用[Dozer](http://dozer.sourceforge.net/)将所需字段复制到另一个类（实际上是*同一个*类，但没有代理）。

并注意：您使用的是 Gson，它访问您的*fields*，而不是访问器，这使得它无法使用 Hibernate 代理，因为它会尝试访问代理本身的字段，这些字段始终是`null`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T20:25:30.990

是的，您可以一直取消代理，如果它有一个 HibernateProxy （不会序列化），它将消失并替换为实际的底层实现，或者它将保持原样并为您提供实现。我认为您的解决方案应该可以正常工作。请注意，我并没有真正使用 Hibernate，但它对我来说确实有意义。

另一方面，您可能更信任 Hibernate，但更简单的方法可能是：

```
Hibernate.getClass(obj); 
```

此解决方案不应为您提供已实现/初始化的类，仅提供类，或者该功能应由以下人员提供：

```
HibernateProxyHelper.getClassWithoutInitializingProxy(superClass) 
```

我相信后者可能会返回超类，所以你可以从 Hibernate.getClass(obj); 开始。

还：

```
public static <T> T initializeAndUnproxy(T entity) {
    if (entity == null) {
        throw new 
           NullPointerException("Entity passed for initialization is null");
    }

    Hibernate.initialize(entity);
    if (entity instanceof HibernateProxy) {
        entity = (T) ((HibernateProxy) entity).getHibernateLazyInitializer()
                .getImplementation();
    }
    return entity;
} 
```

[上面的代码是从： Converting Hibernate proxy to real object](https://stackoverflow.com/questions/2216547/converting-hibernate-proxy-to-real-object)中借用的，其中的变量名可能更好，因为它们并不意味着实体始终是代理。它也会抛出一个异常来警告你，但这取决于你是否想要异常。

当然你也可以摆脱延迟加载，但我认为这不是最好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-15T07:35:57.453

尝试通过**ObjectMapper**解析为

```
final Auto auto = warehouse.list(context);
final String autoJson = new ObjectMapper().writeValueAsString(auto);

return Response.ok(autoJson).build(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-23T03:49:45.613

当我碰到这篇文章时，我遇到了这个问题，这为我的情况指明了正确的方向。我意识到我不需要序列化整个实体，特别是因为我将一些字段标记为延迟加载。所以我试图找到一种跳过这些字段的方法，而 ExclusionStrategy 很神奇。这似乎解决了我的问题

```
public class ExcludeProxiedFields implements ExclusionStrategy{

    @Override
    public boolean shouldSkipField(FieldAttributes fa) {
        return fa.getAnnotation(ManyToOne.class) != null ||
           fa.getAnnotation(OneToOne.class) != null  ||
           fa.getAnnotation(ManyToMany.class) != null  ||
           fa.getAnnotation(OneToMany.class) != null ;
    }

    @Override
    public boolean shouldSkipClass(Class<?> type) {
        return false;
    }   
} 
```

然后我将这个类应用到 GsonBuilder 中，如下所示：

```
Gson gson = new GsonBuilder().setExclusionStrategies(new ExcludeProxiedFields()).create(); 
```

# javascript - jstree禁用自动选择孩子

> ID：13459720
> 
> 赞同：1
> 
> 时间：2012-11-19T18:19:02.143
> 
> 标签：javascript, jquery, jstree

我正在使用带有复选框插件和“two_state”选项的jstree。但是，我需要能够选择一个父节点，而不是让它自动检查该节点的子节点。我不能仅仅取消选中所有子项，因为我需要保留以前的选择。有任何想法吗？

谢谢，

麦克风

# objective-c - loadView 无法访问我的属性，抛出 EXC_BAD_ACCESS

> ID：13459723
> 
> 赞同：0
> 
> 时间：2012-11-19T18:19:14.487
> 
> 标签：objective-c, ios

我有一个在启动新视图控制器时设置的属性。

```
- (IBAction)headerPressed:(UIButton *)sender {
    RouteViewController *route = [[RouteViewController alloc] initWithRoute:[[Route getRoute:TEST_ROUTE] autorelease]];
    [[self navigationController] pushViewController:circle animated:NO];
} 
```

在新视图中，这是一个 UIViewController

**RouteViewController.h**

```
@interface =RouteViewController : UIViewController <MKMapViewDelegate> {
    Route *r;
}

-(id)initWithRoute:(Route *)route;

@property (retain, nonatomic) Route *r; 
```

**路由视图控制器.m**

```
-(id)initWithRoute:(Route *)route{
    self = [super init];

    r = route;

    return self;
}
- (void)loadView {
    [super loadView];

    NSLog(@"TEST: %d", r.Route);  // throws exception. Actually ANY time I access my r property

} 
```

r.Route 是 const`TEST_ROUTE`包含的 int 值。

现在，当我设置断点时，在 NSLog 时，检查器显示我的对象包含

```
Self >
    r >
       Route: 1 
```

和

```
r >
    Route: 1 
```

所以该属性是可用的，并且它确实包含正确的数据。但是当我尝试访问该属性时，它会抛出一个 EXC_BAD_ACCESS。

想法？:) （这在杀死我！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:25:40.283

看起来您没有使用 ARC，但您也没有在 init 方法中保留路由。改变这个：

```
r = route; 
```

对此：

```
r = [route retain]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:27:01.377

这里有几个问题：

`RouteViewController *route = [[RouteViewController alloc] initWithRoute:[[Route getRoute:TEST_ROUTE] autorelease]];`

我认为自动释放消息应该发送到`RouteViewController`这里而不是`Route`对象，因为`getRoute`由于命名约定，该方法应该返回一个自动释放的对象。

IE

```
RouteViewController *route = [[[RouteViewController alloc] initWithRoute:[Route getRoute:TEST_ROUTE]] autorelease]; 
```

您需要保留传递给`initWithRoute`方法的 Route 对象的所有权：

任何一个：

```
-(id)initWithRoute:(Route *)route{
    self = [super init];

    r = [route retain];

    return self;
} 
```

或者：

```
-(id)initWithRoute:(Route *)route{
    self = [super init];

    self.r = route;

    return self;
} 
```

# windows - 是否可以将 Windows Azure Mobile 服务与需要关系数据库的 Windows 8 应用程序一起使用？

> ID：13459728
> 
> 赞同：2
> 
> 时间：2012-11-19T18:19:30.587
> 
> 标签：windows, xaml, azure, cloud

我现在正在自学如何使用 C# 和 XAML 开发适用于 Windows 8 的应用程序，并且我想使用 Windows Azure 服务作为我的数据库的云服务器，就像 SQL 一样。我是这项技术的新手，据我所知，移动服务并不适用于通用工具，但我仍然想知道我是否可以像使用 SQL 一样使用它，其中许多表相互关联。

如果不是，我应该改用什么 Windows Azure 服务？虚拟机，也许？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:13:09.273

您可以将其简化为 Windows Azure 移动服务的方式取代了任何当前可用的 SQL 数据库访问 API 的基本要求，而不是使用 WAMS，您的应用程序可以通过您的应用程序可用的移动服务端点连接到相同的 SQL 数据库，并且独立于任何连接到 WAMS 的应用程序。

WAMS 简化了从任何移动应用程序对数据后端（托管在 Windows Azure 中）的快速创建和访问，所以是的，只要您的 SQL DB 要求具有固定的访问范围，您肯定可以将 WAMS 与 SQL DB 一起使用。当我说固定意味着即使 Windows Azure 移动服务 (WAMS) 使用 SQL 数据库作为后端，与通过 API 访问数据库相比，您将受限于 WAMS 框架内提供的功能。正如您已经知道的那样，您可以直接使用 SQL DB（使用 API 或其他接口）而不是使用 WAMS 来做其他事情。但是，一旦创建了 SQL DB，您仍然可以在 WAMS 范围之外访问它，并且仍然可以完成剩下的工作。

# xml - p 和 ul 标签的意外嵌套

> ID：13459730
> 
> 赞同：0
> 
> 时间：2012-11-19T18:19:41.963
> 
> 标签：xml, xslt, xslt-1.0

我目前在处理此 xml 时遇到问题

```
<detaileddescription>
    <para>

        ParamText1
        <itemizedlist>
            <listitem>
                <para>Test TextTest TextTest TextTest TextTest Text</para>
            </listitem>
            <listitem>
                <para>Test TextTest TextTest TextTest Text</para>
            </listitem>
        </itemizedlist>
        ParamText2  
    </para>
</detaileddescription> 
```

我使用以下 xslt 文件。

```
<!-- match each para tag and calls the child nodes -->
  <xsl:template match="para">
    <p class="para">      
      <xsl:apply-templates select="@* | node()" />
    </p>    
  </xsl:template>

  <xsl:template match="itemizedlist">
    <ul>
      <xsl:apply-templates select="*"/>
    </ul>
  </xsl:template>

  <xsl:template match="listitem/para">
    <li>
      <xsl:apply-templates select="@* | node()"/>
    </li>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:copy />
  </xsl:template> 
```

我希望收到以下结果

```
<p class="param">
    ParamText1
    <ul>
        <li>Test TextTest TextTest TextTest TextTest Text</li>
        <li>Test TextTest TextTest TextTest Text</li>
    </ul>
    ParamText2
</p> 
```

但 xslt 将内容转换为

```
<p class="param">
    ParamText1
</p>
<ul>
    <li>Test TextTest TextTest TextTest TextTest Text</li>
    <li>Test TextTest TextTest TextTest Text</li>
</ul>
ParamText2 
```

我不知道为什么`<p>`标签在标签之前关闭`<ul>`。

# c++ - 函数模板调用其他非模板成员函数

> ID：13459739
> 
> 赞同：0
> 
> 时间：2012-11-19T18:20:08.490
> 
> 标签：c++, templates

我的班级是在一个`dll`和一个班级中定义的，我将在其中介绍一个`dll`班级`function template`。该函数正在调用其他成员函数，但是当我编写客户端代码时，Visual Studio 编译器给了我“非模板函数”的链接错误。

这是我`function template`的`header`

```
void insertMetaInformation(std::string className, char const* typeString, void* pProperty);

template <typename CLASS, typename T> 
    void RegisterMember(  std::string className, 
      std::string propertyName, 
      std::string realClassName,
      typename MemberProperty<CLASS, T>::GetterType   getFn,        
      typename MemberProperty<CLASS, T>::SetterType   setFn,
      typename MemberProperty<CLASS, int>::LengthType lenFn     = NULL, 
      typename MemberProperty<CLASS, T>::ElemLenType  elemLenFn = NULL )
    {
      MemberProperty<CLASS, T>* pProperty = new MemberProperty<CLASS, T>();
      pProperty->m_getterFn               = getFn;
      pProperty->m_setterFn               = setFn;
      pProperty->m_lenFn                  = lenFn;
      pProperty->m_elementLenFn           = elemLenFn;
      pProperty->m_propertyName           = propertyName;
      pProperty->m_realClassName          = realClassName;

      char const *typeString = ToString<T>::value();

      insertMetaInformation(className, typeString, static_cast<void*>(pProperty));
    } 
```

我已经`insertMetaInformation`在一个`.cpp`文件中实现了。

# python - 将 ElementTree findall() 变成一个列表

> ID：13459741
> 
> 赞同：2
> 
> 时间：2012-11-19T18:20:14.797
> 
> 标签：python, list, elementtree

我正在使用 ElementTree findall() 在我的 XML 中查找具有特定标记的元素。我想把结果变成一个列表。目前，我正在遍历元素，为每个元素挑选 .text 并附加到列表中。我敢肯定有一种更优雅的方式来做到这一点。

```
#!/usr/bin/python2.7
#
from xml.etree import ElementTree
import os
myXML = '''<root>
<project project_name="my_big_project">
<event name="my_first_event">
<location>London</location>
<location>Dublin</location>
<location>New York</location>
<month>January</month>
<year>2013</year>
</event>
</project>
</root>
'''

tree = ElementTree.fromstring(myXML)
for node in tree.findall('.//project'):
  for element in node.findall('event'):
    event_name=element.attrib.get('name')
    print event_name
    locations = []
    if element.find('location') is not None:
      for events in element.findall('location'):
        locations.append(events.text)
# Could I use something like this instead?
#      locations.append(''.join.text(*events) for events in element.findall('location'))

print locations 
```

输出这个（这是正确的，但如果可能的话，我想以文本格式将 findall() 结果直接分配给一个列表；

```
my_first_event
['London', 'Dublin', 'New York'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:42:42.427

你可以试试这个——它使用[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)来生成列表，而不必创建一个空白然后追加。

```
if element.find('location') is not None:
  locations = [events.text for events in element.findall('location')] 
```

有了这个，你也可以摆脱`locations`上面的定义，所以你的代码是：

```
tree = ElementTree.fromstring(myXML)
for node in tree.findall('.//project'):
  for element in node.findall('event'):
    event_name=element.attrib.get('name')
    print event_name
    if element.find('location') is not None:
      locations = [events.text for events in element.findall('location')]

print locations 
```

您需要警惕的一件事是您对位置所做的事情 - 如果不存在，则不会定义它，因此如果您尝试打印它并且它不`location`存在，您将得到一个。`NameError`如果这是一个问题，您可以保留`locations = []`定义 - 如果找不到匹配的元素，结果将只是一个空列表。

# c# - SQLite 无法打开数据库

> ID：13459742
> 
> 赞同：5
> 
> 时间：2012-11-19T18:20:17.553
> 
> 标签：c#, sqlite

我刚刚开始研究一个示例应用程序，它只调用我的 SQLite 数据库上的一些表，并且我已经设法解决了除此之外发生的其他问题。

尽管我已经对此进行了搜索，但针对连接字符串、权限问题等的建议解决方案似乎都不是有效的并且对我有用。对于权限，我添加了`Everyone`具有完全控制权的用户，但仍然出现相同的错误。

下面是我试图执行的代码：

```
// calling function
void getRecords2()
    {
        MySqlLite.DataClass ss = new MySqlLite.DataClass();
        DataTable dt = ss.selectQuery("select * from english_words"); 
    }

// the SQLite class that execute the code
using System.Data;
using System.Data.SQLite;

namespace MySqlLite
{
    class DataClass
    {
        private SQLiteConnection sqlite;

        public DataClass()
        {            
            //This part killed me in the beginning.  I was specifying "DataSource"
            //instead of "Data Source"
            sqlite = new SQLiteConnection(@"Data Source=C:\testwork\db\MrPick.sqlite3.db;Version=3;FailIfMissing=True");

        }

        public DataTable selectQuery(string query)
        {
            SQLiteDataAdapter ad;
            DataTable dt = new DataTable();

            try
            {
                SQLiteCommand cmd;
                sqlite.Open();  //Initiate connection to the db
                cmd = sqlite.CreateCommand();
                cmd.CommandText = query;  //set the passed query
                ad = new SQLiteDataAdapter(cmd);
                ad.Fill(dt); //fill the datasource

                cmd.Dispose();
                sqlite.Dispose();  

            }
            catch (SQLiteException ex)
            {
                //Add your exception code here.
            }
            sqlite.Close();
            return dt;
        }
    }
} 
```

注意：我使用了以下程序集：

```
ADO.NET SQLite Data Provider
Version 1.0.82.0 September 3, 2012
Using SQLite 3.7.14
Originally written by Robert Simpson
Released to the public domain, use at your own risk!
Official provider website: http://system.data.sqlite.org/ 
```

我真的很感谢你在这方面的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T19:42:33.547

根据您的评论，您收到“无法打开数据库文件”错误，因为您将代码指向一个不存在的文件。

“未找到表”错误意味着它找到了数据库，但没有找到您要查找的表。另一方面，“无法打开数据库文件”意味着它甚至找不到数据库，甚至没有费心寻找表。当您收到“找不到表格”时，您离它正常工作更近了。

您应该将路径改回以匹配磁盘上的文件，然后使用[Firefox SQLite Manager](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)之类的工具来确认该`english_words`表确实存在于您的数据库中。

如果没有，您应该使用该工具创建它，如果是，您应该在此处发布另一个关于“找不到表”错误的问题。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-08-21T10:37:05.237

当我遇到这个错误时，我必须`parseViaFramework`在`SQLiteConnection`构造函数中设置为`true`.

```
SQLiteConnection connection = new SQLiteConnection(connectionString, true);
connection.Open(); 
```

# php - 条件不工作的 PDO 准备好的语句

> ID：13459746
> 
> 赞同：0
> 
> 时间：2012-11-19T18:20:32.747
> 
> 标签：php, mysql, pdo, prepared-statement

我正在尝试使用 PDO 从 MYSQL 获取我的数据，但我没有任何运气。

这是我尝试过的：

```
$postQuery = $DBH->prepare("SELECT title, views, rating, thumb FROM posts WHERE category=:category and status=1 ORDER BY :sort DESC");
$postQuery ->bindParam(':category', $category);
$postQuery ->bindParam(':sort', $sort);
$postQuery ->execute(); 
```

这可以正常工作，但它会按字母顺序返回所有帖子，忽略类别和排序。

我试过这个：

```
$postQuery = $DBH->query("SELECT title, views, rating, thumb FROM posts WHERE category={$category} and status=1 ORDER BY {$sort} DESC"); 
```

这确实有效，但我没有得到准备好的声明的保护。关于为什么一种说法有效而另一种说法无效的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:31:50.170

您的绑定参数`:sort`将扩展为字符串文字，而不是 SQL 标识符。也就是说，您正在有效地评估以下内容：

```
ORDER BY 'rating' DESC 
```

由于像这样的文字对于每条记录都是恒定的，因此它对结果集的顺序没有影响。

您不能参数化标识符，因此必须将该部分 SQL 连接到您准备好的语句中（最安全的方法是`$sort`根据适合您需要的任何逻辑从一组预定的安全值中进行设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:36:07.020

您不能在 ORDER BY 子句中使用占位符。看到这个问题：[如何使用准备好的 PDO 语句设置 ORDER BY 参数？](https://stackoverflow.com/questions/2542410/how-do-i-set-order-by-params-using-prepared-pdo-statement)

# .net - ListenUriMode.Unique 如何为客户工作？

> ID：13459749
> 
> 赞同：1
> 
> 时间：2012-11-19T18:20:55.087
> 
> 标签：.net, wcf, sockets, port

我正在编写 WCF 服务，并试图避免`AddressAlreadyInUseException`在我的端口已被占用时获取。这个[答案](https://stackoverflow.com/a/1291788/546561)指向使用[`ListenUriMode.Unique`](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.listenurimode.aspx)来解决这个问题。从 MSDN 看来，此选项会导致我的服务自动选择可用端口：

> 对于独占模式的 TCP（PortSharingEnabled 为 false），这意味着绑定到唯一可用的端口号。

我的问题是，如果在运行时选择了我的端口号，我的客户如何知道要使用的端口号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:27:18.923

您必须使用[WCF Discovery](http://msdn.microsoft.com/en-us/library/dd456783%28v=vs.100%29.aspx)来发现该服务。

# visual-c++ - 如何在 Visual C++ 中绘制一个点或一个点并在其旁边书写？

> ID：13459750
> 
> 赞同：1
> 
> 时间：2012-11-19T18:20:56.427
> 
> 标签：visual-c++, mfc

我想在 mfc alpplication 的客户区画一个粗点或一个点。有这样做的功能吗？或者，我什至可以画一个非常小的圆圈并用一种颜色填充它，使它看起来像一个点——但是我又该如何填充一个对象呢？尤其是弯曲的？
然后我还想在它旁边放一些文本——那么我可以用什么函数在客户区“写”呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:24:18.510

```
GetDC()->SetPixel(x, y, RGB(1,2,3)) 
```

其中 GetDC() 将返回当前 CWnd 的设备上下文，(x,y) 是坐标，RGB() 是红色/贪婪/蓝色。

查看 GetDC()->Ellipse() 以获取圆形等，并查看 GetDC()->TextOut() 以显示文本。

一般来说，熟悉设备上下文会很好，请参阅：

[MFC 疾病预防控制中心成员](http://msdn.microsoft.com/en-us/library/4acfw2ha%28v=vs.100%29.aspx)

# gwt - 除了标题外，看不到 DockLayoutPanel 内容

> ID：13459755
> 
> 赞同：1
> 
> 时间：2012-11-19T18:21:19.983
> 
> 标签：gwt, uibinder, gwt-platform, gwtp

我正在尝试使用 DockLayoutPanel 布局我的页面，并且我正在使用 gwt-platfrom 插件来创建演示者和视图对。当我在 view.ui.xml 中添加以下代码时，我只能看到标题部分而其余部分不可见，我的方法有什么问题？

```
 <ui:style>        
    .eastPanel {
        background-color: #F60;
    }
    .westPanel {
        background-color: #EEE;
    }
    .northPanel {
        background-color: #39F;
    }
    .southPanel {
        background-color: #99C;
    }
    .centerPanel {
        background-color: #FFC;
    }       
</ui:style>
 <g:DockLayoutPanel unit='EM'>
   <g:north size='5'>
     <g:FlowPanel styleName="{style.northPanel}">
       <g:Label>This is the NORTH panel</g:Label>
     </g:FlowPanel>
   </g:north>
   <g:west size='15'>
     <g:FlowPanel styleName="{style.westPanel}">
       <g:Label>This is the WEST panel</g:Label>
     </g:FlowPanel>
   </g:west>
   <g:center>
     <g:FlowPanel styleName="{style.centerPanel}">
       <g:Label>This is the CENTER panel</g:Label>
     </g:FlowPanel>
   </g:center>
 </g:DockLayoutPanel> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T10:38:08.003

发现页面不显示的原因，写的时候有两个错误，1.只用一个Unit(UM/PX/Percent)来构造DockLayoutPanel的各个面 2.由于我用的是gwt平台，所以需要使用 RevealRootLayoutContentEvent.fire(this,this); 在我的演示者的revealInParent() 而不是 RevealRootContentEvent.fire(this,this);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:52:35.670

如果您没有在任何地方更改 em，它的默认大小为 16px。因此，192 em 很容易意味着 3,072 像素。我不知道当区域大于屏幕时 DockLayoutPanel 的行为如何，但我很确定它看起来并不漂亮。

另一种可能性是您需要设置 DockLayoutPanel 的高度，如果它没有从父小部件获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T12:58:40.690

我以前遇到过这个问题。只需设置中心面板的高度。一切都会好起来的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-15T12:35:10.537

您需要添加`DockLayoutPanel`到`LayoutPanel`.

```
LayoutPanel panel = new LayoutPanel();
panel.add(Your DockLayoutPanel); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-02T08:40:13.120

我解决了这个问题。我正在使用 GWTP：

```
<ui:style>
.eastPanel {
    background-color: #F60;
}

.westPanel {
    background-color: #EEE;
}

.northPanel {
    background-color: #39F;
}

.southPanel {
    background-color: #99C;
}

.centerPanel {
    background-color: #FFC;
}

header {
    background: red;
}
</ui:style>

<g:RootLayoutPanel>
    <g:layer>
        <g:DockLayoutPanel >
            <g:north size='60'>
                <g:FlowPanel styleName="{style.northPanel}">
                    <g:Label>This is the WEST panel</g:Label>
                </g:FlowPanel>
            </g:north>
            <g:west size='300'>
                <g:FlowPanel styleName="{style.westPanel}">
                    <g:Label>This is the WEST panel</g:Label>
                </g:FlowPanel>
            </g:west>
            <g:center>
                <g:FlowPanel styleName="{style.centerPanel}">
                    <g:Label>This is the CENTER panel</g:Label>
                </g:FlowPanel>
            </g:center>
        </g:DockLayoutPanel>
    </g:layer>
</g:RootLayoutPanel> 
```

# entity-framework - .Where 在导航属性中

> ID：13459757
> 
> 赞同：0
> 
> 时间：2012-11-19T18:21:36.203
> 
> 标签：entity-framework

我有这个模型：

```
public class User
{
    //other properties
    public List<Task> Tasks {get;set;}
} 
```

如何选择用户的所有属性，并且只选择具有 的任务`Date = DateTime.Today`？我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:34:03.813

```
var today = DateTime.Today;
var tomorrow = today.AddDays(1);

var users = context.Users
    .Select(u => new
    {
        User = u,
        Tasks = u.Tasks.Where(t => t.Date >= today && t.Date < tomorrow)
    })
    .AsEnumerable()
    .Select(a => a.User)
    .ToList(); 
```

`user.Tasks`如果关系不是多对多，这将使用所选任务自动填充集合。如果您只想要另一个对象（匿名或其他一些非实体类）具有来自用户实体的选定数据，您可以使用：

```
var users = context.Users
    .Select(u => new    // or new SomeClass
    {
        Name = u.Name,
        // more properties
        Tasks = u.Tasks.Where(t => t.Date >= today && t.Date < tomorrow)
    })
    .ToList(); 
```

# jquery - Bootstrap Typeahead 重复搜索和自动完成

> ID：13459758
> 
> 赞同：1
> 
> 时间：2012-11-19T18:21:37.420
> 
> 标签：jquery, twitter-bootstrap, typeahead

我正在使用 bootstrap typeahead 插件来搜索术语列表并在选择时显示该术语的图像。

基本功能有效，但我有两个问题：

1.）当一个词被搜索两次时，图像第二次没有出现（假设更新函数没有处理两次相同的搜索？）

2.) 我可以让它在搜索时显示多个图像（即，当用户键入字母“a”时，与显示的术语相关联的所有图像......也是可见的）？我不希望用户必须等到选择一个选项。

感谢您的帮助（我是 JS 菜鸟，所以如果我需要进一步澄清我的问题，请告诉我！）

```
var array = $('.test').data('array');
$('.typeahead').typeahead({
      items:4,
      source: array,
      updater: function(item){
         var pic = $('img[name="'+item+'"]').css('visibility','visible').css('display','inline');
         $('#search').empty().append(pic);
         return item;
      }
}); 
```

# php - 通过重定向到出站链接的动态按钮跟踪购买

> ID：13459762
> 
> 赞同：0
> 
> 时间：2012-11-19T18:21:50.340
> 
> 标签：php, javascript, url, redirect, outbound

我需要通过重定向到另一个网站的动态按钮来跟踪我网站上的购买。

编码：

```
<div class="buyproduct">
<a onclick="target='_blank'" href="<?php echo $this->product['from'];?>">

<img src="http://xxx.com/data/images/buy.jpg" alt="Buy!"/>                          
</a>
</div> 
```

每次用户单击该按钮时，它都会重定向到我以外的另一个站点。

例如，如果我点击一条牛仔裤，然后点击购买按钮，它会重定向到 wrangler 网站。

每次发生这种情况时，我都需要进行跟踪，并确切知道用​​户正在重定向到哪个 url。

该网站使用 PHP 和 Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:27:15.110

您可以在服务器上创建一个中间页面，可能类似于 (out.php)。然后，您可以将所有流量重定向到 out.php 页面，在那里进行处理，然后重定向。

```
<a target="_blank" href="/out.php?url=<?php echo urlencode($this->product['from'])?>">
    <img src="http://xxx.com/data/images/buy.jpg" alt="Buy!"/>
</a> 
```

`out.php`

```
<?php
$url = urldecode($_GET['url']);
/*
MySQL CODE TO PROCESS TRACKING
*/
header("Location: ".$url);
exit;?> 
```

# flash - 使用自签名证书的 SecureSocket 连接

> ID：13459763
> 
> 赞同：0
> 
> 时间：2012-11-19T18:21:51.513
> 
> 标签：flash, ssl-certificate, ssl

我正在尝试使用 Flash 中的 SecureSocket 与 SSL 服务器（在 Node.js 中）通信。使用“远程登录”到服务器可以正常工作

```
openssl s_client -connect localhost:1337 
```

所以服务器似乎正在工作。但是当我尝试连接 Flash 客户端时，它不起作用。发生的情况是服务器检测到一个连接立即关闭而没有发送任何数据。在客户端需要一点时间，然后 SecureSocket 实例调度一个错误事件。

我正在使用 addBinaryChainBuildingCertificate 在客户端中加载证书，并且我尝试将 true 和 false 作为第二个参数传递给该函数。

证书采用 DER 格式，从 PEM 转换而来，使用：

```
openssl x509 -in input.pem -inform PEM –out output.der -outform DER 
```

如此处所述：http: [//support.citrix.com/article/CTX106631](http://support.citrix.com/article/CTX106631)

不知道接下来要尝试什么...顺便说一句，证书是自签名的，有问题吗？我认为无论如何它都会起作用，因为我正在调用 addBinaryChainBuildingCertificate 方法。

有任何想法吗？

# php - 为什么我的代码没有检测到 iPad iOS6？

> ID：13459768
> 
> 赞同：0
> 
> 时间：2012-11-19T18:22:11.473
> 
> 标签：php, user-agent

我正在尝试检测 iPad 和 iPhone 用户何时使用 iOS6 之前的 iOS 版本，并向他们显示他们需要升级到 iOS6 才能获得特定功能的消息。

我认为下面的代码可以工作，但我使用的是带有 iOS 6.0.0 的 iPad，但我仍然进入黑色代码以显示升级消息。

```
$iPod = stripos($_SERVER['HTTP_USER_AGENT'],"iPod");
$iPhone = stripos($_SERVER['HTTP_USER_AGENT'],"iPhone");
$iPad = stripos($_SERVER['HTTP_USER_AGENT'],"iPad");
$Android= stripos($_SERVER['HTTP_USER_AGENT'],"Android");
$webOS= stripos($_SERVER['HTTP_USER_AGENT'],"webOS");

//do something with this information
if( $iPad || $iPhone &&  
    (strpos($_SERVER['HTTP_USER_AGENT'], 'iPhone OS 6_0') == false &&
     strpos($_SERVER['HTTP_USER_AGENT'], 'OS 6_0') == false)){
   //some code to let user know this feature is not available for older versions of ios
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:26:03.623

[在这里](https://stackoverflow.com/questions/7768324/detect-ios-version-with-php)找到这个：

```
<?php
    if(strpos($_SERVER['HTTP_USER_AGENT'], 'iPhone OS 6_0') !== false) {
        //do something if it actually is iOS6
    }
?> 
```

应该管用。如果不是 iOS6，则反向执行某些操作，例如显示升级消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T07:37:40.887

我在 iphone 6 上也遇到了很多麻烦，但这对我有用

```
$isMobile = (bool)preg_match('/(android|bb\d+|meego).+mobile|avantgo|bada  \/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i',$user_agent)||preg_match('/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i', $_SERVER['HTTP_USER_AGENT'] );

if($isMobile==1)
 {
      // is mobile 
 } 
```

# android - 在 Android 上的 Paint 和 Canvas 中更改颜色

> ID：13459769
> 
> 赞同：5
> 
> 时间：2012-11-19T18:22:14.043
> 
> 标签：android, android-canvas, paint

对不起，如果这个问题很愚蠢，但我是 Android 新手。我在 developer.android.сom 上阅读了很多内容，但不幸的是，我的问题没有找到解决方案。我在 staсkoverflow 上找到的大部分代码都完成了部件本身。这个 View 插入到 FrameLayout 中的 Activity 中，覆盖了文本，并允许您在电子书中留下笔记。

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

public class PaintSurface extends View implements OnTouchListener {

    private Canvas canvas;
    private Path path;
    private Paint paint;
    private ArrayList<Path> paths = new ArrayList<Path>();

    public PaintSurface(Context context) {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);

        this.setOnTouchListener(this);

        paint = new Paint();
        paint.setAntiAlias(true);
        paint.setDither(true);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.MITER);
        paint.setStrokeCap(Paint.Cap.SQUARE);
        paint.setColor(Color.RED);
        paint.setStrokeWidth(16);
        paint.setAlpha(100);
        canvas = new Canvas();
        path = new Path();
        paths.add(path);

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        for (Path p : paths) {
            canvas.drawPath(p, paint);
        }

    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        path.reset();
        path.moveTo(x, y);
        mX = x;
        mY = y;
    }

    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            path.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;
        }

    }

    private void touch_up() {
        path.lineTo(mX, mY);
        canvas.drawPath(path, paint);

        path = new Path();
        paths.add(path);

    }

    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up();
            invalidate();
            break;
        }
        return true;

    }

    public void setColor(int color) {
        paint.setColor(color);

    }
} 
```

描述问题。我画了默认颜色的线，红色。然后，使用 setColor() 更改为绿色，在红线旁边绘制一条绿线。但是第一条红线也变成了绿色。如果您更改样式或笔划宽度，则会发生此类更改。怎么可能画出不同的颜色？

感觉几个月后这个问题在我看来是可笑和愚蠢的，我自己会觉得自己很傻，我会感到羞耻，但现在我不知道如何解决这个问题......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T18:34:36.850

颜色仅在`Paint`您绘制时生效。

从您的代码中，您一次绘制所有路径。

```
 for (Path p : paths) {
        canvas.drawPath(p, paint);
  } 
```

这需要相同的绘画对象并使用它来绘制路径，使用最后设置的颜色。

您需要做的是在绘图之间设置颜色。

```
 paint.setColor(color.RED); // Will apply to first path.

   for (Path p : paths) {           
        canvas.drawPath(p, paint);
        paint.setColor(color.GREEN); // Will be applied on next Path.
    } 
```

更好的解决方案是

```
 for (Path p : paths) {    
        //Determine Paint color Here.
        paint.setColor(myColor); // where myColor is your variable to use for this layer.
                                 // This could be from an array/List of colors matching to Paths.
        canvas.drawPath(p, paint);          
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T18:26:58.333

您可以尝试的一件事是为`Paint`数组 List 中的每个路径创建一个对象。这样您可以`Paint`为 ArrayList 中的每个路径指定不同的属性...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T09:36:16.133

试试这个代码，它将有助于改变画布背景颜色和油漆颜色。我在我的应用程序中使用它。

```
package com.kidsfingerpainting;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import android.annotation.SuppressLint;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PorterDuff.Mode;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

public class CanvasView extends View {

    private Paint mPaint;

    private Bitmap mBitmap;
    private Canvas mCanvas;
    private android.graphics.Path mPath;
    private Paint mBitmapPaint;
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>();
    public static int selectedcolor;
    private Map<Path, Integer> colorsMap = new HashMap<Path, Integer>();

    public CanvasView(Context c, int width, int height) {
        super(c);
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFF000000);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(10);
        mCanvas = new Canvas();
        mPath = new Path();
        mBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        selectedcolor = getResources().getColor(R.color.black);

    }

    public CanvasView(Context context, AttributeSet arr) {
        super(context, arr);

    }

    // ////////////////////////all color for brush/////////////////
    public void setPaintMode() {
        mPaint.setColor(0xFF000000);
        mPaint.setStrokeWidth(10);
    }

    public void set_PaintModetrans() {
        mPaint.setColor(0x00000000);
        mPaint.setStrokeWidth(10);
    }

    public void setPaintMode_violet() {
        mPaint.setColor(0xFF8B00FF);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.violet);
    }

    public void setPaintMode_indigo() {
        mPaint.setColor(0xFF000066);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.indigo);
    }

    public void setPaintMode_blue() {
        mPaint.setColor(0xFF0000FF);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.blue);
    }

    public void setPaintMode_green() {
        mPaint.setColor(0xFF00FF00);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.green);
    }

    public void setPaintMode_yellow() {
        mPaint.setColor(0xFFFFFF00);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.yellow);
    }

    public void setPaintMode_orange() {
        mPaint.setColor(0xFFFF7F00);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.orange);
    }

    public void setPaintMode_red() {
        mPaint.setColor(0xFFFF0000);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.red);
    }

    public void setPaintMode_redbg() {
        mCanvas.drawColor(0xFFFF0000);
        mPaint.setColor(0x00000000);
    }

    public void setPaintMode_pink() {
        mPaint.setColor(0xFFFF33CC);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.pink);
    }

    public void setPaintMode_white() {
        mPaint.setColor(0xFFFFFFFF);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.white);
    }

    public void setPaintMode_black() {
        mPaint.setColor(0xFF000000);
        mPaint.setStrokeWidth(10);
        selectedcolor = getResources().getColor(R.color.black);
    }

    // /////////////////////// all background color set code////////////
    public void setPaintMode_blackbg() {
        mCanvas.drawColor(0xFF000000);
    }

    public void setPaintMode_whitebg() {
        mCanvas.drawColor(0xFFFFFFFF);
    }

    public void setPaintMode_pinkbg() {
        mCanvas.drawColor(0xFFFF33CC);
    }

    public void setPaintMode_orangebg() {
        mCanvas.drawColor(0xFFFF7F00);
    }

    public void setPaintMode_yellowbg() {
        mCanvas.drawColor(0xFFFFFF00);
    }

    public void setPaintMode_greenbg() {
        mCanvas.drawColor(0xFF00FF00);
    }

    public void setPaintMode_bluebg() {
        mCanvas.drawColor(0xFF0000FF);

    }

    public void setPaintMode_indigobg() {
        mCanvas.drawColor(0xFF000066);

    }

    public void setPaintMode_violetbg() {
        mCanvas.drawColor(0xFF8B00FF);

    }

    // ////////////////////////////////////////////////////
    public void setEraseMode() {
        selectedcolor = getResources().getColor(R.color.white);
        mPaint.setColor(0xFFFFFFFF);
        mPaint.setStrokeWidth(10);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        for (Path p : paths) {
            mPaint.setColor(colorsMap.get(p));
            canvas.drawPath(p, mPaint);
        }

        mPaint.setColor(selectedcolor);
        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 8;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;

    }

    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;

        }
    }

    private void touch_up() {
        mPath.lineTo(mX, mY);
        paths.add(mPath);
        colorsMap.put(mPath, selectedcolor);
        mPath = new Path();
        mPath.reset();
        invalidate();

    }

    public void eraseAll() {

        if (mPath != null) {
            paths.clear();
        }
        invalidate();
    }

    @SuppressLint("ClickableViewAccessibility")
    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            // currentMoveList.add(mPath);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up();

            invalidate();
            break;
        }
        return true;
    }

    public void resetcanvas() {
        mCanvas.drawColor(Color.TRANSPARENT, Mode.CLEAR);
    }

    public void onClickUndo() {
        if (paths.size() > 0) {
            undonePaths.add(paths.remove(paths.size() - 1));
            invalidate();
        } else {

        }

    }
} 
```

您可以通过这样做从活动中调用它的任何方法。

```
CanvasView canvas = new CanvasView(MainActivity.this, width, height);
        frame_layout.addView(canvas); 
```

将此粘贴到 oncreate 方法中。

// 设置 Onclick 监听器并使用以下代码

```
undo = (ImageView) findViewById(R.id.undo);
        undo.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                canvas.onClickUndo();

            }
        });
        eraser = (ImageView) findViewById(R.id.eraser);
        eraser.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                canvas.setEraseMode();

            }
        });
        clear = (ImageView) findViewById(R.id.clear);
        clear.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                canvas.eraseAll();

            }
        }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-07T06:20:22.147

替换您的 onTouchEvent 和 onDraw 方法，或者您可以使用此自定义视图

```
package com.draw;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.PorterDuff.Mode;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

public class DrawingView extends View {
    private Paint paint;
    private Path path;
    private Paint canvasPaint;
    private Canvas drawCanvas;
    private Bitmap canvasBitmap;

    public DrawingView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.init();

        this.paint.setAntiAlias(true);
        this.paint.setStrokeWidth(4f);
        this.paint.setColor(Color.BLACK);
        this.paint.setStyle(Paint.Style.STROKE);
        this.paint.setStrokeJoin(Paint.Join.ROUND);
    }

    private void init() {
        this.paint = new Paint();
        this.path = new Path();
        this.canvasPaint = new Paint(Paint.DITHER_FLAG);
    }

    public void setStroke(float width) {
        this.paint.setStrokeWidth(width);
    }

    public void setColor(int color) {
        this.paint.setColor(color);
    }

    public void reset() {
        this.drawCanvas.drawColor(0, Mode.CLEAR);
        invalidate();
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        this.canvasBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        this.drawCanvas = new Canvas(this.canvasBitmap);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawBitmap(this.canvasBitmap, 0, 0, this.canvasPaint);
        canvas.drawPath(this.path, this.paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            this.path.moveTo(eventX, eventY);
            break;

        case MotionEvent.ACTION_MOVE:
            this.path.lineTo(eventX, eventY);
            break;

        case MotionEvent.ACTION_UP:
            this.drawCanvas.drawPath(this.path, this.paint);
            this.path.reset();
            break;

        default:
            return false;
        }

        invalidate();
        return true;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-10T04:45:13.530

我遇到了同样的问题，我的 DrawingView 类中有两种方法，一种是在调色板上选择不同颜色时更改颜色。另一种是每隔几秒随机改变一次颜色。

我必须在这两种方法中使用 invalidate() 来刷新主线程上受影响的内容，而不是更改之前绘制的任何内容。如果您只在方法中使用 invalidate 效果很好。

```
 public void setColor(String newColor) {
    //set color
    invalidate();
    paintColor = Color.parseColor(newColor);
    drawPaint.setColor(paintColor);
}

//random color chosen automatically
public void randomColor () {
    //invalidate needed here for the random color change every 30sec, to not change lines already drawn.
    invalidate();
    paintColor = Color.argb(255, rand.nextInt(256), rand.nextInt(256), rand.nextInt(256));
    drawPaint.setColor(paintColor);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T14:20:21.543

您描述了正确的方法，但是当第一次选择颜色时，它可以正常工作但再次更改然后发生同样的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-05T07:33:09.213

如果你想在 android 中设置颜色的十六进制代码，那么这里是字符串

```
 currentPaint.setColor(Color.parseColor("#B6B6B6")); 
```

# opengl - GLSL：顶点着色器中的sampler3D，纹理显示为空白

> ID：13459770
> 
> 赞同：2
> 
> 时间：2012-11-19T18:22:29.167
> 
> 标签：opengl, glsl, textures, shader, feedback

**编辑：认为我已经缩小了问题的范围。跳到跑步部分。**

我正在尝试在我的顶点着色器中对 3d 纹理进行采样，我将使用纹素值作为 Marching Cubes 中的角值。我遇到的问题是，无论我使用什么方法对其进行采样，我总是得到 (0,0,0,0)。我试过使用 texelFetch 和 texture3D 似乎都不起作用。

我也在使用转换反馈，但据我所知，这不应该导致这个问题。

着色器设置：

```
glEnable(GL_TEXTURE_3D);

Shader vertListTriangles(GL_VERTEX_SHADER_ARB);
vertListTriangles.setSource(lst_tri_vert); //Util to load from file.
vertListTriangles.compile();
vertListTriangles.errorCheck(); //Prints errors to console if they exist - shader compiles fine.

Shader geomListTriangles(GL_GEOMETRY_SHADER_ARB);
geomListTriangles.setSource(lst_tri_geom); //Util to load from file
geomListTriangles.compile();
geomListTriangles.errorCheck(); //Prints errors to console if they exist - shader compiles fine.

program.attach(vertListTriangles);
program.attach(geomListTriangles);

//Setup transform feedback varyings, also works as expected.
const GLchar* varyings1[1];

varyings1[0] = "gTriangle";
glTransformFeedbackVaryings(program.getID(), 1, varyings1, GL_INTERLEAVED_ATTRIBS);

program.link();

program.checkLink(); //Prints link errors to console - program links fine aparently. 
```

纹理设置：

```
glBindTexture(GL_TEXTURE_3D, textureID);
errorCheck("texture bind"); //<- Detects GL errors, I actually get a GL_INVALID_OPERATION here, not sure if its the cause of the problem though as all subsuquent binds go smoothly.

if(!(glIsTexture(textureID)==GL_TRUE)) consolePrint("Texture Binding Failed."); //Oddly the texture never registers as failed despite the previous error message.

//Generate Texture
GLfloat volumeData[32768*3];

for(int z = 0; z < 32; z++)
{
    for(int y = 0; y < 32; y++)
    {
        for(int x = 0; x < 32; x++)
        {
            //Set all 1s for testing purposes
            volumeData[(x*3)+(y*96)+(z*3072)] = 1.0f;
            volumeData[(x*3)+(y*96)+(z*3072)+1] = 1.0f;
            volumeData[(x*3)+(y*96)+(z*3072)+2] = 1.0f;
        }
    }
}

glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAX_LEVEL, 0);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_BASE_LEVEL, 0);
glTexImage3D(GL_TEXTURE_3D, 0, GL_RGB8, 32, 32, 32, 0, GL_RGB,
         GL_FLOAT, volumeData);

glBindTexture(GL_TEXTURE_3D, 0); 
```

运行着色器： **编辑：这里变得有趣了。如果我指定了不正确的统一名称或注释掉以下行，它似乎可以工作。**

```
program.use();

//Disable Rastering
glEnable(GL_RASTERIZER_DISCARD);

//Input buffer: Initial vertices
glBindBuffer(GL_ARRAY_BUFFER, mInitialDataBuffer);

glEnableVertexAttribArray(0);
glVertexAttribIPointer(0, 1, GL_UNSIGNED_INT, 0, 0); //Initial input is array of uints

//Output buffer: Triangles
glBindBufferBase(GL_TRANSFORM_FEEDBACK_BUFFER, 0, mTriangleBuffer); //Triangle Markers, in the form of uints. NOT actual triangles.

//Texture setup

//If I comment out from here....
GLint sampler = glGetUniformLocation(program.getID(), "densityVol");
glUniform1i(sampler, GL_TEXTURE0);
glActiveTexture(GL_TEXTURE0);
//To here. It appears to work.

glBindTexture(GL_TEXTURE_3D, textureID);

//Just using this to debug texture.
//test is all 1s, so the texture is uploading correctly.
GLfloat test[32768*3];
memset(test, 0, sizeof(test));
glGetTexImage(GL_TEXTURE_3D, 0, GL_RGB, GL_FLOAT, test);

//Transform Feedback and Draw
glBeginTransformFeedback(GL_POINTS);

    glDrawArrays(GL_POINTS, 0, 29790);

glEndTransformFeedback();

//Re-enable Rastering and cleanup
glDisable(GL_RASTERIZER_DISCARD);
glDisableVertexAttribArray(0);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

我的代码在现实中更加分散，但我希望我设法将它编辑成有凝聚力的东西。无论如何，如果我映射到输出缓冲区，它确实会输出一些信息，但是它会像所有纹理数据都是 0 一样处理。我破解了着色器只是输出了一些测试结果，但我找不到任何证据表明着色器正确使用了纹理：

```
#version 410
#extension GL_EXT_gpu_shader4 : require

layout (location = 0) in int x_y_z;
uniform sampler3D densityVol;

out Voxel
{
    /*
    Each triangle is the edges it joins. There are 12 edges and so we need 12 bits. 4 For each edge.
    There are up to 32 voxels, which means we need 6 bits for each coord, which is 18.
    30 bits total.
    int format 00xxxxxxyyyyyyzzzzzz111122223333
    */
    uint triangles[5];
    uint triangleCount;

} vVoxel;

//... Omitted some huge ref tables.

void main()
{
    vec4 sample0 = texture3D(densityVol, vec3(0.1,0.1,0.1) );
    vec4 sample1 = texture3D(densityVol, vec3(0.9,0.9,0.9) );
    vec4 sample2 = texture3D(densityVol, vec3(0.1,0.1,0.9) );
    vec4 sample3 = texture3D(densityVol, vec3(0.9,0.9,0.1) );

    if(sample0.r > 0.0f)
    {
        vVoxel.triangles[1] = 1;
    }
    if(sample1.r > 0.0f)
    {
        vVoxel.triangles[2] = 2;
    }
    if(sample2.r > 0.0f)
    {
        vVoxel.triangles[3] = 3;
    }
    if(sample3.r > 0.0f)
    {
        vVoxel.triangles[4] = 4;
    }

    vVoxel.triangleCount = 5;
} 
```

不是设计最好的测试，但我不想从头开始写东西。如果我将 if 子句更改为 if(true) 测试输出正确。如上编译着色器时，缓冲区为空白。我正在使用GS进行传递。

任何人都可以在那里看到明显的错误吗？我已经被难倒了大约 2 个小时，我看不出我在做什么与许多 GLSL 纹理教程不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T10:33:48.123

好吧想通了。

```
glUniform1i(sampler, GL_TEXTURE0); 
```

GL_TEXTURE0 在这里不正确。

```
glUniform1i(sampler, 0); 
```

是应该的样子。

# c# - 如何根据字符串检查组合框的索引？

> ID：13459772
> 
> 赞同：5
> 
> 时间：2012-11-19T18:22:29.897
> 
> 标签：c#, combobox, indexing

我有一个带有 3 个硬编码字符串值的 ComboBox：

```
A
B
C 
```

如果我尝试根据`SelectedValue`、`SelectedItem`或`SelectedText`都不会将索引更改为正确的项目。

目前我正在做类似的事情：

```
switch (str)
{
    case 'A':
        comboBox.SelectedIndex = 0;
        break;
    case 'B':
        comboBox.SelectedIndex = 1;
        break;
    case 'C':
        comboBox.SelectedIndex = 2;
        break;
} 
```

但正如您所看到的，这是一个相当薄弱的解决方案，如果项目被重新排序、编辑或附加，它就会中断。

还有更好的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T18:28:22.297

你可以这样做：

```
comboBox.SelectedIndex = comboBox.Items.IndexOf("B"); 
```

但这也适用于我的电脑：

```
comboBox.SelectedItem = "B"; 
```

在组合框中硬编码的字符串一定有问题。检查是否有一些异常字符或白色（空白）字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T18:29:09.660

```
 List<string> values = new List<string>() { "A", "B", "C" };
 comboBox.SelectedIndex = values.FindIndex(x => x == str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-22T09:16:59.500

我不知道为什么，但这有时效果不佳：

```
comboBox.Items.IndexOf("B"); 
```

所以我不得不这样做：

```
comboBox.SelectedIndex = comboBox.FindStringExact("B"); 
```

效果很好，特别是如果我将它绑定到类实体列表而不仅仅是字符串。

# c# - Java 继承约束

> ID：13459773
> 
> 赞同：2
> 
> 时间：2012-11-19T18:23:07.753
> 
> 标签：c#, java, inheritance, type-constraints

我正在尝试将我用 C# 编写的一些代码移植到 Java，但还不知道所有 Java 语法。我也不知道这种东西叫什么，所以很难搜索……我称之为“继承约束”。

基本上，是否有与此 C# 代码等效的 java：

```
public abstract class MyObj<T> where T : MyObj<T>, new()
{

} 
```

谢谢。

* * *

编辑：

有没有办法做到这一点：

```
public abstract class MyObj<T extends MyObj<T>> {
    public abstract String GetName();

    public virtual void Test() {
          T t = new T();                // Somehow instantiate T to call GetName()?
          String name = t.GetName();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T18:24:52.757

不完全的。有这个：

```
public abstract class MyObj<T extends MyObj<T>> 
```

但没有等同于`new()`约束。

编辑：要创建 的实例`T`，您将需要适当的`Class<T>`- 否则*类型擦除*将字节您。

通常，您会将其添加为构造函数参数：

```
public MyObj(Class<T> clazz) {
    // This can throw all kinds of things, which you need to catch here or
    // propagate.
    T t = clazz.newInstance(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:48:44.000

从您上面的评论来看，您正在寻找以下构造：

一个`interface`您将在代码中与 MyObj 对象交互的对象...您将调用 test() 方法（Java 中的标准样式是驼峰式方法，大写的类/接口）

```
public interface IMyObj {
    public void test();
} 
```

您将需要抽象超类...对于您选择的示例，您不需要指定任何泛型，尽管如果实际实现更依赖于类型安全，您绝对可以...这个类应该实现IMyObj 界面：

```
public abstract class MyObj implements IMyObj {

    String name;

    public abstract String getName();

    public void test() {
        name = getName();
    }
} 
```

从这里你可以将你的子类写到 MyObj...

```
public class MySubObj1 extends MyObj {
    public String getName() { return "MySubObj1"; }
}

public class MySubObj2 extends MyObj {
    public String getName() { return "MySubObj2"; }
} 
```

然后，您可以在另一个类中安全且正确地使用以下代码段：

```
IMyObj obj = new MySubObj1();
obj.test(); 
```

关键是您使用接口来隐藏实现，并使用抽象类来保存子类将在其实现中使用的公共代码。

希望这可以帮助！

# javascript - 如何将 HTML 元素锚定在其他两个元素之间的中心？

> ID：13459775
> 
> 赞同：0
> 
> 时间：2012-11-19T18:23:13.680
> 
> 标签：javascript, html, css

请注意这个简单的 jsFiddle：http: [//jsfiddle.net/mark69_fnd/vtLrt/10/](http://jsfiddle.net/mark69_fnd/vtLrt/10/)

HTML：

```
<div class="char">
  <div>
    <div class="char">A1</div>
    <div class="char anchorToMiddle">D1</div>
    <div class="char anchorToRight">G1</div>
  </div>
  <div>
    <div class="char">A2</div>
    <div class="char anchorToMiddle">D2</div>
    <div class="char anchorToRight">G2</div>
  </div>
  <div>
    <div class="char">A3</div>
    <div class="char">B3</div>
    <div class="char">C3</div>
    <div class="char">D3</div>
    <div class="char">E3</div>
    <div class="char">F3</div>
    <div class="char">G3</div>
  </div>
</div>​ 
```

CSS：

```
.char{
    display: inline-block;
}

.anchorToRight {
    float: right;
}​ 
```

输出：

![在此处输入图像描述](../Images/4f032312571ff7bffedfd6c7144114ff.png)

如何更改 HTML 和/或 CSS，以便标记为`anchorToMiddle`（D1 和 D2）的元素在 D3 正上方的中间对齐？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:13:31.703

我试图用一些 javascript 找到解决方案（因为问题是用 javascript 标记的）。

如果在“anchorToMiddle”中将 text-align 设置为“center”，则文本将居中，但前提是您指定了元素的宽度。为此，B3..F3 被包裹在另一个 div 中（id 为“charspan”）：

```
<div id="charspan" class="char">
    <div class="char">B3</div>
    <!-- etc. -->
</div> 
```

然后计算这个新 div 的宽度并将其应用于“anchorToMiddle”类。

```
var elems, i, width, span;
elems = document.getElementsByClassName("anchorToMiddle");
span = document.getElementById("charspan");
width = parseInt(window.getComputedStyle(span).width);
for (i = 0; i < elems.length; i++) {
        elems[i].style.width = width + 'px';
} 
```

更新小提琴：http: [//jsfiddle.net/Espesen/vtLrt/14/](http://jsfiddle.net/Espesen/vtLrt/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:39:34.743

如果你给它一个合适的宽度然后使用`text-align:center;`属性，它应该得到修复。

我已经更新了你的[**FIDDLE**](http://jsfiddle.net/vtLrt/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:27:05.210

```
div.anchorToMiddle
{
  width:someWidthValue less than parent;
  margin-left:auto;
  margin-right:auto;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:53:41.347

为什么不直接制作一个 3x7 的桌子呢？

```
<table>

    <tr>

        <td>A1</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>D1</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>G1</td>

    </tr>

    <tr>

        <td>A2</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>D2</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>G2</td>

    </tr>

    <tr>

        <td>A3</td>
        <td>B3</td>
        <td>C3</td>
        <td>D3</td>
        <td>E3</td>
        <td>F3</td>
        <td>G3</td>

    </tr>

</table> 
```

# c4 - 滚动和图像大小问题？

> ID：13459779
> 
> 赞同：1
> 
> 时间：2012-11-19T18:23:35.687
> 
> 标签：c4

下载了 testScrollView 文件，但无法正常工作。

[https://github.com/C4Code](https://github.com/C4Code)

似乎一切正常，没有弹出任何重大错误或任何东西，但是当我尝试在模拟器上运行它时，它会在右下角弹出“目标缓冲区大小太大（15360 x 768）；不能大于 4096 x 4096"，同时会弹出调试窗口。

是否需要添加某种特殊命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:14:38.687

我上周遇到了这个问题，显然模拟器不喜欢大图像。但是，此示例在设备上运行良好。原因是该示例将一张 15360x768 的大图像分解为 256x256 的图块。

如果您可以使用 iPad，请尝试为 iPad 编译。

# c# - 使用 IoC 链接层，将 lower 回调设置为 upper 并避免循环引用

> ID：13459780
> 
> 赞同：1
> 
> 时间：2012-11-19T18:23:42.350
> 
> 标签：c#, dependency-injection, inversion-of-control, ioc-container, simple-injector

我有一个场景，我需要下层由上层控制，就像木偶大师拉弦一样。

由于不时产生一些内部事件，下层也会回调上层。

我正在使用 SimpleInjector，我将 ILower 注入到 Upper 构造函数中。我不能将 Upper 注入到 Lower 中，因为它会导致循环引用。

相反，我有一个注册回调函数来链接两个层。但是，我必须使用空检查来分散我的代码。

有没有更好的方法或不同的架构来实现对象的这种链接？

```
// an interface that transport can callback from transport to client
public interface ILowerToUpperCallback
{
    void ReplyA();
    void ReplyB();
}

// transport interface that client calls
public interface ILower
{
    void Test1();
    void Test2();
    void RegisterCallback(ILowerToUpperCallback callback);
}

public class Upper : ILowerToUpperCallback
{
    private readonly ILower lower;

    public Upper(ILower lower)
    {
        this.lower = lower;
        this.lower.RegisterCallback(this);
    }

    void ReplyA()
    {
    }

    void ReplyB()
    {
    }
}

public class Lower : ILower
{
    private ILowerToUpperCallback callback;

    /* this is not possible, would cause a circular reference
    public Lower(ILowerToUpperCallback callback)
    {
        this.callback = callback;
    }
    */

    // set by different method instead, what happens if this is never set?!
    void RegisterCallback(ILowerToUpperCallback callback)
    {
        this.callback = callback;
    }

    void OnTimer()
    {
        // some timer function

        if(this.callback != null) // these null checks are everywhere :(
            this.callback.ReplyA();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T19:48:40.630

一种可能的方法是在您的最低层之一中拥有一个消息传递子系统，以便下层和上层都可以参与发布/订阅模型。

例如，消息传递子系统可以是一个`EventAggregator`. 它在将发布者与订阅者分离方面做得很好。使用可从两个层访问的专用事件模型，您几乎可以使用另一个对象控制任何对象。

不过，我并不反对你的做法。循环依赖没有错。例如，MVP（Model-View-Presenter）基于 Views 和 Presenters 之间的依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:03:33.163

我认为您的设计没有任何问题，尽管您已经注意到它不是最容易配置的东西。问题不在于您的 DI 框架的限制，而更多在于您必须执行的心理体操。

这是一个想法。将您的课程更改为以下内容：

```
public class Upper : IUpper, ILowerToUpperCallback
{
   public Upper(/* all depedencies except ILower */) { }

    // Promote ILower to property dependency
    public ILower Lower { get; set; }
}

public class Lower : ILower
{
    // Use the Null Object Pattern for default implementation to prevent
    // null checks.
    private ILowerToUpperCallback callback = new NullCallback();

    public Upper(/* all dependencies except ILowerToUpperCallback */)
    {
        this.callback = callback;
    }

    // Allow overriding the default implementation using a method, just
    // as you are already did.
    public SetCallback(ILowerToUpperCallback callback)
    {
        if (callback == null) throw new ArgumentNullException("callback");
        this.callback = callback;
    }
} 
```

使用这种设计，您可以按如下方式连接所有内容：

```
container.Register<ILower, Lower>();
container.Register<IUpper, Upper>();

container.RegisterInitializer<Upper>(upper =>
{
    var lower = (Lower)container.GetInstance<ILower>();
    lower.SetCallback(upper);
    upper.Lower = lower;
}); 
```

由于`Lower`和`Upper`是正常服务，您可以照常解决它们。通过为 注册一个初始化委托`Upper`，您可以在创建容器后进行一些额外的初始化`Upper`。这个初始化器连接`Lower`在一起`Upper`。由于 Composition Root 知道`ILower`and `Lower`，我们可以安全地从`ILower`to 转换`Lower`，而不会违反任何规则。这种设计的最佳之处在于`ILower`接口保持干净，并且忽略了`ILowerToUpperCallback`实际上是实现细节的 .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:54:27.263

您的示例有点抽象，难以理解您的架构，但您似乎可以从域事件的概念中受益。看起来你的回调想法也是一样的。我最近实现了一个简单版本的域事件模式，它可以让我的主要业务层组件协同工作，而无需组件相互引用。正如您所说，Upper 可以引用 ILower，但随后使用 Lower 引用 IUpper 会导致循环引用并可能导致问题。

这是帮助我解决问题的 SO 问题。

[业务层外观与混合业务组件](https://stackoverflow.com/questions/13278329/business-layer-facade-vs-mingled-business-components)

我还发现这两个链接有助于理解领域事件的概念和实现。

[http://jasondentler.com/blog/2009/11/simple-domain-events/](http://jasondentler.com/blog/2009/11/simple-domain-events/)

[http://blog.robustsoftware.co.uk/2009/08/better-domain-event-raiser.html](http://blog.robustsoftware.co.uk/2009/08/better-domain-event-raiser.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T19:56:21.790

首先，您的代码对我来说看起来不错。

但是，这看起来像[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

您的第二个问题（`null`检查）可以通过使用[Null 对象](http://en.wikipedia.org/wiki/Null_Object_pattern)`IObserver`（这是/的无操作实现`ILowerToUpperCallback`）初始化回调/观察者字段来处理。

# php - 仅替换第二个 html 标记

> ID：13459782
> 
> 赞同：0
> 
> 时间：2012-11-19T18:23:54.317
> 
> 标签：php, regex, html-parsing, preg-replace, preg-split

我想将第二个`h2`标签替换为`h3`，我希望有人可以帮助我替换正则表达式，或者可能是`preg_split`- 我不太确定。

例如，这个：

```
<h2>My text one</h2>
<h2>My text two</h2>
text …
<h2>My text three</h2> 
```

应该变成这样：

```
<h2>My text one</h2>
<h3>My text two</h3>
text …
<h2>My text three</h2> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:34:51.890

我同意其他评论，这应该通过 dom 解析器来完成。但是这里有一个有效的 php 解决方案。

```
<?php 
     // Fill $str with the html;

     preg_replace("/[h]{1}[2]/i", "h3", $str);
?> 
```

或者

```
<?php
     // Fill $str with the html;

     str_replace("h2", "h3", $str);      
?> 
```

这应该工作得很好。将 $matches 参数添加到 preg_replace 也将跟踪所做的更改数量。现在，使用循环您可以控制需要替换哪个元素，但是，上面编写的函数将检测**所有**出现的 h2。

此外，为了让您能够换出数字，我将正则表达式过度复杂化，以使其具有更有用的功能。只需使用“/(h2)/i”也可以解决问题。

因此，您的代码应该以正确的方式实现循环以防止替换所有标签，并且您应该决定该函数是仅处理 h2 还是应该更灵活。

最后，str_replace 比 preg_replace 快，所以如果这是您需要进行的唯一编辑，我会推荐 str_replace。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:42:51.683

您可以使用**Javascript**轻松做到这一点，真的需要使用 PHP 吗？

获取第二个`<h2>`值

```
$text = $("h2:eq(1)").html(); 
```

毁灭它。

```
$("h2:eq(1)").remove(); 
```

`<h3>`在第一个之后创建一个`<h2>`，其中`$text`包含

```
$("h2:eq(0)").after("<h3>" + $text + "</h3>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T19:00:50.160

您不需要为此使用服务器端 HTML 解析器，这在 imo 中完全是矫枉过正。以下是一个显然可以被某些 HTML 结构破坏的示例，但对于大多数标记来说，它不会有任何问题 - 并且比服务器端 HTML 解析器更优化。

```
$html = '
<h2>My text one</h2>
<h2>My text two</h2>
text ...
<h2>My text three</h2>
'; 
```

*preg_match_all*

```
/// the following preg match will find all <h2> mark-up, even if 
/// the content of the h2 splits over new lines - due to the `s` switch
/// It is a non-greedy match too - thanks to the `.+?` so it shouldn't 
/// have problems with spanning over more than one h2 tag. It will only
/// really break down if you have a h2 as a descendant of a h2 - which
/// would be illegal html - or if you have a `>` in one of your h2's
/// attributes i.e. <h2 title="this>will break">Text</h2> which again
/// is illegal as they should be encoded.

preg_match_all(
  '#(<)h2([^>]*>.+?</)h2(>)#is',
  $html,
  $matches,
  PREG_OFFSET_CAPTURE|PREG_SET_ORDER
); 
```

*更换和重建*

```
/// Because you wanted to only replace the 2nd item use the following. 
/// You could however make this code as general or as specific as you wanted.
/// The following works because the surrounding content for the found 
/// $matches was stored using the grouping brackets in the regular 
/// expression. This means you could easily change the regexp, and the 
/// following code would still work.

/// to get a better understanding of what is going on it would be best
/// to `echo '<xmp>';print_r( $matches );echo '/<xmp>';`

if ( isset($matches[1][0]) ) {
  $html = substr( $html, 0, $matches[1][0][1] ) . 
          $matches[1][1][0] . 'h3' . 
          $matches[1][2][0] . 'h3' . 
          $matches[1][3][0] .
          substr( $html, $matches[1][0][1] + strlen($matches[1][0][0]) );
} 
```

我不知道为什么很多人说要使用客户端 JavaScript 来进行这种更改，PHP 代表`PHP: Hypertext Preprocessor`它旨在预处理超文本。OP 只提到过 PHP 函数，并用 PHP 标记了这篇文章，所以没有任何东西指向客户端。

诚然，虽然客户端可以并且应该尽可能地用于减轻服务器端的处理，但不建议将其用于诸如标题之类的核心结构标签——屏幕阅读器和搜索引擎机器人将依赖这些标签。最好使用客户端 JavaScript 来增强用户体验。如果您使用它来批判性地增强您网站的功能，您最好确保您的整个用户群都支持它。

但是，如果你们中的任何人提到[Node.js](http://nodejs.org/)和[JSDOM](https://github.com/tmpvar/jsdom "JSDOM")，我会很高兴地同意。

# matlab - 如何在我的二分码上显示所有中点？

> ID：13459784
> 
> 赞同：0
> 
> 时间：2012-11-19T18:24:08.667
> 
> 标签：matlab, bisection

我有一个找到二等分的代码（它终于起作用了！），但我需要再包括 3 件事：

*   output- Root History 包含算法获得的中点序列的向量
*   输出——函数的绝对值
*   f(x) 在 r 处，即 fRoot = f(r) 输入-最大迭代次数

    ```
    function [R, E] = myBisection(f, a, b, tol)
        m = (a + b)/2;
        R = m;
        E = abs(f(m));
        while E(end) > tol
            if sign(f(a)) == sign(f(m))
                a = m;
            else
                b = m;
            end
            m = (a + b)/2;
            R = [R, m];
            E = [E, abs(f(m))];
        end 
    ```

我该怎么做呢？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:20:39.363

我已经更正了缩进，你可以看到你已经`end`从函数的末尾遗漏了。（这是可选的，但最好不要遗漏这些东西，这样你就知道你并不是要写几行到最后，但你忘记了。）

`R`并且`E`现在应该返回，如果你适当地调用 myBisection ，那就是

```
[R, E] = myBisection(f, a, b, tol); 
```

如果你只是打电话

```
myBisection(f, a, b, tol) 
```

它只会返回`R`。

要添加对迭代次数的限制，您可以`while`像这样更改 's 条件：

```
iter=0;
while (E(end) > tol) && (iter<max_iter)
    iter = iter+1;
    % ...

end 
```

或者最好在 for 循环中使用`if`加号`break`：

```
for iter=1:max_iter
    if(E(end) <= tol), break, end;
    % ...
end 
```

# ios - 将 1 个 iOS 代码库与相应服务器端部署的多个版本同步

> ID：13459787
> 
> 赞同：0
> 
> 时间：2012-11-19T18:24:23.143
> 
> 标签：ios, deployment, saas

我们目前有一个 .NET SaaS Web 应用程序，每个客户都有单独的部署。我们按月发布计划，每个客户都按独立的计划升级到当前版本。有时某个成员甚至可能跳过整个版本，在后续版本中升级。

我们正在寻求开发原生 iOS 应用程序，并试图找出使单个 iOS 代码库与多个受支持的服务器端部署保持同步的最佳方法。我知道 Citrix 在使用 GoToMeeting 时遇到了这个问题，因为在某一时刻，App Store 中有多个版本的原生应用程序可以通过各种服务器端版本来满足客户的需求。支持与 App Store 中当前支持的服务器端部署相对应的多个版本不是我们正在考虑的选项。我们已经讨论过在代码中使用条件分支来检查客户正在使用哪个版本的服务器端代码，并为这些用户禁用更多当前的代码和功能，但这也不理想。当然其他人（比如思杰）也遇到了这个问题，并提出了更清洁的解决方案，所以我想我' 我撒网，看看我能得到什么回应。非常感谢任何帮助或建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:28:41.167

在处理 API 版本的差异时，我认为 iOS 应用程序上的配置文件是必不可少的。通过配置文件，我的意思是一个 plist 或只是设置下载，它在应用程序运行时触发并告诉它去哪里获取 api。这使您可以使用其他 api 版本做您需要的事情，当您准备好时，您可以更改配置并将其指向新版本。

# ruby - 如何使用 RVM 让新贵优雅地工作？

> ID：13459788
> 
> 赞同：0
> 
> 时间：2012-11-19T18:24:25.420
> 
> 标签：ruby, ubuntu, rvm, thin, upstart

我有一个简单的瘦网络服务器，我想从 Upstart 开始。但是，upstart 需要使用 sudo 运行，它不能看到所有的 RVM gem，比如 Thin。rvmsudo 也没有帮助我。新贵看到您的 RVM 宝石的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T21:29:35.290

RVM 确实更适合个人使用。对于系统服务，我只需安装您想要的 Ruby 版本（与系统版本不冲突的地方，例如 /usr/local/）并在部署模式下使用 Bundler 来获取 gemset。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:29:32.453

您是否考虑过为您的项目创建一个 gemset 并默认使用特定的 gemset？

1.  默认为 Ruby：`rvm use 1.9.3`
2.  手动创建 Gemset（一次）：`rvm gemset create project-name`
3.  切换到此 Gemset：`rvm gemset use project-name`

看看这是否有效，您以后也许可以将其添加到您的`.rvmrc`文件中以进行自动上下文切换。但先试一试，看看这是否有效。

# javascript - 带有 node_redis 的 Node.js 回调

> ID：13459798
> 
> 赞同：1
> 
> 时间：2012-11-19T18:25:04.893
> 
> 标签：javascript, node.js, callback, redis

我仍在尝试进入 node.js 并且可能会得到一些不太正确的东西。我期待完成的是首先查询包含房间列表的 hmap。该列表将被迭代以获取每个房间的更多详细信息，例如房间名称等。

以下是查询应返回的内容：

```
redis 127.0.0.1:6379> lrange rooms 0 -1
1) "room:5000" 
```

和

```
redis 127.0.0.1:6379> hgetall room:5000
1) "name"
2) "room1"
3) "admin"
4) "user:1001"
5) "public"
6) "true" 
```

这是我在 routes.index 中的功能

```
exports.index = function(req, res){

    var render_rooms = new Array();

    req.app.settings.redis.lrange('rooms',0,-1, function(error, rooms) {

        if (error) {
            console.log('Error: '+ error);
            }
        else {

            rooms.forEach(function(room){
                console.log("room: " + room);

                req.app.settings.redis.hgetall(room, function(error, roomdetails){
                    if (error) {
                        console.log('Error: '+ error);
                        }
                    else {
                        console.log("roomdetails: " + roomdetails.public);

                        if(roomdetails.public == "true"){
                            render_rooms.push(roomdetails.name);

                        }

                    }
                });

            });

        //  console.log('Name: ' + result);
      //    res.render('account', { title: 'account title', user: req.user.username, votes: result });
        }

    });

    console.log("length: " + render_rooms.length);
    res.render('index', { title: 'Index', username: req.user.username, rooms: render_rooms });

}; 
```

我不确定我是否正确使用 node_redis 来实现这一点。此外，我想出了将所有房间详细信息存储在一个数组中的想法，我期待将其发送到视图中。显然，列表总是不显示任何元素，因为我猜想在填充列表之前调用它，因为我缺少一些基本的回调功能。但是我无法解决它。有人可以更详细地向我解释它“应该”如何工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T21:12:21.250

您的基本问题是您需要等待渲染`render_rooms`数组，直到所有异步处理完成。它现在的编写方式是`res.render`在任何异步 Redis 查询完成之前调用。

像这样的东西：

```
exports.index = function(req, res){

    var render_rooms = new Array();

    req.app.settings.redis.lrange('rooms',0,-1, function(error, rooms) {

        // Keep track of the number of rooms we have left to process.
        var roomcount = rooms.length;

        if (error) {
            console.log('Error: '+ error);
            }
        else {

            rooms.forEach(function(room){
                console.log("room: " + room);

                req.app.settings.redis.hgetall(room, function(error, roomdetails){
                    if (error) {
                        console.log('Error: '+ error);
                        }
                    else {
                        console.log("roomdetails: " + roomdetails.public);

                        if(roomdetails.public == "true"){
                            render_rooms.push(roomdetails.name);
                        }

                        // Render code moves to here and is only run after all rooms
                        // have been processed.
                        if (--roomcount === 0) {
                            console.log("length: " + render_rooms.length);
                            res.render('index', { 
                                title: 'Index', 
                                username: req.user.username, 
                                rooms: render_rooms 
                            });
                        }
                    }
                });
            });
        }
    });
}; 
```

一旦你对它的作用感到满意，看看通过使用[`async.forEach`](https://github.com/caolan/async#foreacharr-iterator-callback)或[`async.forEachSeries`](https://github.com/caolan/async#foreachseriesarr-iterator-callback)更干净地支持这种类型的流程来清理它。

# java - 欧拉计划 #11 java。没有得到正确的答案

> ID：13459805
> 
> 赞同：2
> 
> 时间：2012-11-19T18:25:20.537
> 
> 标签：java

我对 Project Euler的[问题 11](https://projecteuler.net/problem=11)有一些问题。我设法得到一个答案，但它不是正确的。我得到`51267216`。这是通过`greatestVert`方法找到的。我认为问题出在`greatestDiaglonal`方法上，但我不太确定。有人可以检查我的算法是否正确吗？

任务是找出任何方向（上、下、左、右或对角线）上四个相邻数字的最大乘积在 20x20 网格中。

```
package euler;

public class Problem11 {

int num1, num2, num3, num4;
int highestNum1, highestNum2, highestNum3, highestNum4;

private int sum = 0;

String[] l = {
"08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08",
"49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00",
"81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65",
"52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91",
"22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80",
"24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50",
"32 98 81 28 64 23 67 10 26 38 40 67 59 54 70 66 18 38 64 70",
"67 26 20 68 02 62 12 20 95 63 94 39 63 08 40 91 66 49 94 21",
"24 55 58 05 66 73 99 26 97 17 78 78 96 83 14 88 34 89 63 72",
"21 36 23 09 75 00 76 44 20 45 35 14 00 61 33 97 34 31 33 95",
"78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92",
"16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57",
"86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58",
"19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40",
"04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66",
"88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69",
"04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36",
"20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16",
"20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54",
"01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48"
};

int greatestSide() {
    for(int i = 0;i<=19;i++) {
        for(int n = 0;n<=l[i].length()-12;n+=3) {
            num1 = Integer.parseInt(l[i].substring(0+n,3+n).trim());
            num2 = Integer.parseInt(l[i].substring(3+n,6+n).trim());
            num3 = Integer.parseInt(l[i].substring(6+n,9+n).trim());
            num4 = Integer.parseInt(l[i].substring(9+n,12+n).trim());

            if(num1*num2*num3*num4 > sum) {
                sum = num1*num2*num3*num4;
                highestNum1 = num1;
                highestNum2 = num2;
                highestNum3 = num3;
                highestNum4 = num4;
            }   
        }
    }
    return sum;
}

int greatestVert() {
    for(int i = 0; i<=16; i++) {
        for(int n = 0; n<=l[i].length()-3; n+=3) {
            num1 = Integer.parseInt(l[i].substring(0+n,3+n).trim());
            num2 = Integer.parseInt(l[i+1].substring(0+n,3+n).trim());
            num3 = Integer.parseInt(l[i+2].substring(0+n,3+n).trim());
            num4 = Integer.parseInt(l[i+3].substring(0+n,3+n).trim());

            if(num1*num2*num3*num4 > sum) {
                sum = num1*num2*num3*num4;
                highestNum1 = num1;
                highestNum2 = num2;
                highestNum3 = num3;
                highestNum4 = num4;
            }   
        }
    }
    return sum;
}

int greatestDiagonal() {
    for(int i = 19; i>=3; i--) {
        for(int n = 0; n<=l[i].length()-12; n+=3) {
            num4 = Integer.parseInt(l[i].substring(9+n,12+n).trim());
            num3 = Integer.parseInt(l[i-1].substring(6+n,9+n).trim());
            num2 = Integer.parseInt(l[i-2].substring(3+n,6+n).trim());
            num1 = Integer.parseInt(l[i-3].substring(0+n,3+n).trim());

            if(num1*num2*num3*num4 > sum) {
                sum = num1*num2*num3*num4;
                highestNum1 = num1;
                highestNum2 = num2;
                highestNum3 = num3;
                highestNum4 = num4;
            }   
        }
    }

    for(int i = 0; i>=16; i++) {
        for(int n = 0; n<=l[i].length()-12; n+=3) {
            num4 = Integer.parseInt(l[i].substring(9+n,12+n).trim());
            num3 = Integer.parseInt(l[i+1].substring(6+n,9+n).trim());
            num2 = Integer.parseInt(l[i+2].substring(3+n,6+n).trim());
            num1 = Integer.parseInt(l[i+3].substring(0+n,3+n).trim());

            if(num1*num2*num3*num4 > sum) {
                sum = num1*num2*num3*num4;
                highestNum1 = num1;
                highestNum2 = num2;
                highestNum3 = num3;
                highestNum4 = num4;
            }   
        }
    }
    return sum;
}

public static void main(String[] args) {
    Problem11 prog = new Problem11();

    prog.greatestSide();
    prog.greatestVert();
    prog.greatestDiagonal();
    System.out.println(prog.sum);
    System.out.println(prog.highestNum1);
    System.out.println(prog.highestNum2);
    System.out.println(prog.highestNum3);
    System.out.println(prog.highestNum4);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:35:39.987

您省略了扫描对角线的一个方向：

```
for(int i = 0; i>=16; i++) { 
```

根本不运行。你的意思是`i <= 16`那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T23:51:56.827

这是另一个首先将 转换`String`为二维数组的解决方案：

```
public class P11 {

    public static void main(String[] args) throws Exception {
        String input = "08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08 49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00 81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65 52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91 22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80 24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50 32 98 81 28 64 23 67 10 26 38 40 67 59 54 70 66 18 38 64 70 67 26 20 68 02 62 12 20 95 63 94 39 63 08 40 91 66 49 94 21 24 55 58 05 66 73 99 26 97 17 78 78 96 83 14 88 34 89 63 72 21 36 23 09 75 00 76 44 20 45 35 14 00 61 33 97 34 31 33 95 78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92 16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57 86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58 19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40 04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66 88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69 04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36 20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16 20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54 01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48";
        int n = 20;
        int a[][] = getMatrixOfIntegers(input, n);
        System.out.println(maxProduct(a));
    }

    private static long maxProduct(int a[][]) {
        int size = a.length - 4;
        int l = a.length - 1;
        long pMax = 1;
        for ( int i = 0 ; i < size ; i++ ) {
            for ( int j = 0 ; j < size ; j++ ) {
                int prodDiag1 = a[i][j]*a[i+1][j+1]*a[i+2][j+2]*a[i+3][j+3];
                if ( pMax < prodDiag1 ) {
                    pMax = prodDiag1;
                }
                int prodCol = a[i][j]*a[i+1][j]*a[i+2][j]*a[i+3][j];
                if ( pMax < prodCol ) {
                    pMax = prodCol;
                }
                int prodRow = a[i][j]*a[i][j+1]*a[i][j+2]*a[i][j+3];
                if ( pMax < prodRow ) {
                    pMax = prodRow;
                }
                int prodDiag2 = a[i][l-j]*a[i+1][l-j-1]*a[i+2][l-j-2]*a[i+3][l-j-3];
                if ( pMax < prodDiag2 ) {
                    pMax = prodDiag2;
                }               
            }
        }
        return pMax;
    }

    private static int[][] getMatrixOfIntegers(String input, int n) {
        String m[] = input.split(" ");
        int a[][] = new int[n][n];      
        for ( int i = 0 ; i < n*n ; i++ ) {
            a[i/n][i%n] = Integer.parseInt(m[i]);
        }
        return a;
    }

} 
```

**时间**：`maxProduct`0.2 毫秒

# css - 将 Superfish 集成到 Wordpress 中

> ID：13459817
> 
> 赞同：0
> 
> 时间：2012-11-19T18:26:34.407
> 
> 标签：css, wordpress, superfish

我无法将超级鱼菜单加载到 Wordpress 中！我相信我已将 js 和 css 正确编码到标题中，并正确修改了 wp_menu。但它会使菜单消失！请问有人可以看看我的代码和帮助吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title><?php bloginfo('name'); ?> <?php if ( is_single() ) { ?> &raquo; Blog Archive <?php } ?> <?php wp_title(); ?></title>
 <meta name="keywords" content="Holiday, free CSS template, clean, neat, aqua, white, templatemo" />
<meta name="description" content="Holiday is a clean and neat free CSS template using aqua and white colors." />
<link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" type="text/css" />
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8"></script>
<!-- Include jQuery -->
<?php wp_enqueue_script('jquery'); ?>
<script src="<?php bloginfo("template_url"); ?>/js/superfish.js" type="text/javascript"></script>
<script> 

$(document).ready(function(){ 
    $("ul.sf-menu").superfish(); 
}); 

</script>
<?php wp_head(); ?> 
```

这是我的 wordpress 菜单调用

```
<?php wp_nav_menu( array( 'theme_location' => 'primary', 'menu_class' => 'sf-menu', ) ); ?> 
```

回应表示赞赏。感谢人们！

柯斯蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:56:51.693

superfish 只有 IE6 afaik 才需要，它不支持

li.menu > li.submenu { display:none } li.menu:hover > li.submenu { display:block }

东西。因此，如果这是您想要的 superfish 的唯一功能，请放弃它。

否则：

*   对 superfish.js 也使用 wp_enqueue_script
*   `$(document).ready(function(){`很可能不起作用，请查看：[wordpress codex on no conflict jQuery](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)
*   总是检查你的javascript控制台是否有错误:-)

# lambda - chez scheme special lambda

> ID：13459821
> 
> 赞同：2
> 
> 时间：2012-11-19T18:26:53.917
> 
> 标签：lambda, scheme, apply

```
(lambda (head . rest)
     (...)) 
```

I encountered this code on the net when trying to learn some scheme, but I couldn't find any useful explanation.

What is the meaning of this? Is it some kind of pattern matching as in ML? (Btw they apply this lambda to only one argument!)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T19:04:59.027

In this procedure:

```
(lambda (arg . args)
     (...)) 
```

The syntax indicates that the `lambda` form is expecting one mandatory argument bound to the name `arg` and a list with zero or more elements (a variable number of arguments) bound to the name `args`. This is an example of a [variadic function](https://en.wikipedia.org/wiki/Variadic_function).

The same syntax can be used for named procedures, noticing that any number of parameters can be specified as mandatory and after that the rest are considered optional; take a look at this example:

```
(define (test arg . args)
  (apply + arg args))

(test)        ; will cause an error, at least one argument is expected
(test 10)     ; returns 10
(test 10 4)   ; returns 14
(test 10 4 2) ; returns 16 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:36:50.460

This is »dotted-tail notation«. It allows you to pass an abritrary number of arguments to a function. For an explanation consider [SICP, exercise 2.20](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-15.html#%_sec_2.2.1) (please scroll down).

# multithreading - QWebFrame 在单独的线程中打印

> ID：13459834
> 
> 赞同：2
> 
> 时间：2012-11-19T18:27:33.837
> 
> 标签：multithreading, qt, printing, qwebpage

在我的 qt 应用程序中，我正在从 QWebFrame（来自 QWebPage 的 mainFrame）打印一些大型 html 代码。html 代码包含一些内联图像，需要一段时间才能打印出来。因此，我尝试将打印调用放入单独的线程中以保持 gui 响应。正如文档中提到的，我认为这应该是可能的[（在线程中绘画）](http://qt-project.org/doc/qt-4.8/threads-modules.html#painting-in-threads)。

但我还是得到了著名的“QPixmap：在 GUI 线程之外使用 pixmaps 是不安全的”

我的打印代码如下：

```
void PrintDialog::paintRequested(QPrinter *printer) {
  futureWatcher = new QFutureWatcher<void>();
  QEventLoop q;
  connect(futureWatcher, SIGNAL(finished()), &q, SLOT(quit()), Qt::UniqueConnection);
  futureWatcher->setFuture(QtConcurrent::run(m_webPage->mainFrame(), &QWebFrame::print, printer));
  q.exec();
} 
```

为了澄清所有对象都驻留在 gui 线程中，并且之前生成了 html。图像被内联如下：

```
QImage image
QByteArray ba;
QBuffer buffer(&ba);
buffer.open(QIODevice::WriteOnly);
image.save(&buffer, "PNG");

QString html = "<img src=\"data:image/png;base64," + QString(ba.toBase64() + "\"/>"; 
```

那么我在这里做错了什么？是不是 QWebFrame 内部使用了一些 QPixmaps？有没有在另一个线程中使用 QWebFrame::print 调用的解决方案？

# python - 使用 xticks，刻度未与图正确对齐

> ID：13459835
> 
> 赞同：0
> 
> 时间：2012-11-19T18:27:37.660
> 
> 标签：python, matplotlib

我使用下面的简单代码生成一个箱线图，其中 x 值的标签已更改：

```
subplot(221)
boxplot(list_of_lists_of_lengths)
xlabel('max gap')
ylabel('cluster lengths')
xticks(range(len(max_distance)), max_distance, size='small') 
```

如您所见，x 值没有正确偏移-我希望 0 低于第一个框，100 低于第二个框。

玩了一圈，没找到答案。请帮忙！

![在此处输入图像描述](../Images/8999f94a245ea9345201b8533bf18863.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:47:48.703

采用

```
locs, labels = plt.xticks() 
```

找出 matplotlib 将放置 xtick 标记的位置。然后更改标签：

```
plt.xticks(locs, max_distance, size='small') 
```

* * *

例如，

```
import matplotlib.pyplot as plt

list_of_lists_of_lengths = [range(1000),range(500,2000)]
plt.subplot(1,1,1)    
plt.boxplot(list_of_lists_of_lengths)
plt.xlabel('max gap')
plt.ylabel('cluster lengths')
max_distance = (0, 100)
locs, labels = plt.xticks()
plt.xticks(locs, max_distance, size='small')
plt.show() 
```

生产

![在此处输入图像描述](../Images/7b2937f9703e63f53c2c2d04377b3d65.png)

# ajax - 如何为嵌套资源和自定义控制器操作设置 rails 3 路由

> ID：13459836
> 
> 赞同：0
> 
> 时间：2012-11-19T18:27:38.457
> 
> 标签：ajax, ruby-on-rails-3, paperclip

我有一个嵌套在类别和奖项下面的建议。

所以 Category/:id/awards/:id/recommendations/:id

我有一个资产模型来处理推荐的回形针附件。A Recommendation has_many Assets, Assets belongs_to :recommendation

在我的推荐新/编辑视图中，我正在呈现一个部分表单（正常情况下），让用户可以选择上传多个资产。

如果有已经相关的资产，那么它会列出它们。我正在努力在建议控制器上设置自定义删除操作。

我当前的链接到：

```
<%= link_to "Delete Attachment", 
                {:controller => :recommendations, :action => :destroy_asset, :id => asset.id }, 
                {:remote => "true", :confirm => "Are you sure you want to delete this image?"} 
         %> 
```

我的控制器动作：

```
def destroy_asset
    #@recommendation = Recommendation.find(params[:id])
    @asset = Asset.find(params[:id])
    @asset.destroy
    respond_to do |format|
      format.js
    end
  end 
```

路线： 资源 :recommendations 资源 :categories 做资源 :awards 做资源 :recommendations end end

我还在学习远程 => true，以及如何路由这个傻瓜。不确定我是否需要嵌套路由。我倾向于认为不是。因为我的循环中有一个 Asset.id，所以我应该能够执行销毁而根本不需要推荐。

所以问题/s：我需要一个路由来访问我的推荐控制器中的自定义操作吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T19:03:35.707

试试这个：

```
resources :categories do
    resources :awards do
        resources :recommendations 
           member do
              get :destroy_asset
           end
        end
    end 
end 
```

或者，如果您只想`destroy_asset`在推荐控制器下执行操作，请执行以下操作：

```
resources :recommendations 
    member do
        get :destroy_asset
    end
end 
```

或者，如果您想要自定义匹配，请执行以下操作：

```
match "asset/:id/destroy_asset", :to => "recommendations#destroy_asset", 
:as=> "destroy_asset" 
```

# powershell - PowerShell - 将十六进制转换为字符串（AD 导出）

> ID：13459845
> 
> 赞同：2
> 
> 时间：2012-11-19T18:28:20.720
> 
> 标签：powershell, active-directory

我使用命令 CSVDE 导出我的活动目录并希望使用此数据。每当有一个特殊的德语字符 (ä,ö,ü) 时，该字段对我来说是不可读的。

我认为它转换为十六进制是因为特殊的德语字母。

我现在尝试了很长时间。但是没有将其转换为人类可读格式的解决方案:-(

如何使用 PowerShell 将其转换为可读格式？

先感谢您！

例如，我的导出文件中的两个条目：

> 名称：X'4b6172732048c3bc626e6572'
> 
> sn : X'48c3b6626e6572'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:56:05.973

你可以试试这个：

```
$Encode = new-object 'System.Text.UTF8Encoding'

$encode.getstring( ( "4b6172732048c3bc626e6572"  -split '(..)' |
 ? { $_ } |  %  {[BYTE]( [CONVERT]::toint16($_,16))  } ) )

Kars Hübner 
```

或单行

```
[System.Text.UTF8Encoding]::UTF8.GetString( ( "4b6172732048c3bc626e6572"  -split '(..)' |
 ? { $_ } |  %  {[BYTE]( [CONVERT]::toint16($_,16))  } ) ) 
```

# map - 如何在我的页面上加载我的地 图

> ID：13459847
> 
> 赞同：0
> 
> 时间：2012-11-19T18:28:27.880
> 
> 标签：map

如何在页面上显示纸张。我在加载地图时遇到问题。 [http://pinquest.eu/](http://pinquest.eu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:31:20.060

您可以使用 openlayers 在您的网站上获取带有标记的地图。这里有描述： [网站上的地图](http://wiki.openstreetmap.org/wiki/OpenLayers)

# javascript - 如何检查前进按钮是否被按下

> ID：13459853
> 
> 赞同：0
> 
> 时间：2012-11-19T18:28:59.937
> 
> 标签：javascript, button, back, forward

如果用户通过前进或后退按钮访问，我想重新加载页面，
那么，有没有什么好的方法可以使用 javascript 检查前进或后退按钮是否被按下？

是的，我开始觉得这不好...
实际上，页面应该通过 AJAX 加载多次，
所以我不想使用前进或后退按钮来保持数据一致性。

有什么想法可以解决这个问题吗？
我认为前进或后退到特定页面是一种想法。

# jquery - JSON的问题

> ID：13459854
> 
> 赞同：0
> 
> 时间：2012-11-19T18:29:00.543
> 
> 标签：jquery, json

使用 jquery 创建一个 JS 应用程序。使用 JSON 将数据导入我的脚本时遇到了真正的麻烦。

在 .php 脚本中创建以下数据集；

```
<?php
$golfer_id=45;
$score_arr[$golfer_id]["name"]="Dave Curry";
$score_arr[$golfer_id][1]=4;
$score_arr[$golfer_id][2]=3;
$score_arr[$golfer_id][3]=5;
$score_arr[$golfer_id][4]=5;
$score_arr[$golfer_id][5]=5;
$score_arr[$golfer_id][6]=5;
$score_arr[$golfer_id][7]=5;
$score_arr[$golfer_id][8]=5;
$score_arr[$golfer_id][9]=5;

$golfer_id=25;
$score_arr[$golfer_id]["name"]="John Doe";
$score_arr[$golfer_id][1]=2;
$score_arr[$golfer_id][2]=2;
$score_arr[$golfer_id][3]=1;
$score_arr[$golfer_id][4]=5;
$score_arr[$golfer_id][5]=5;
$score_arr[$golfer_id][6]=5;
$score_arr[$golfer_id][7]=5;
$score_arr[$golfer_id][8]=5;
$score_arr[$golfer_id][9]=5;

echo json_encode($score_arr);
?> 
```

最终，这些数据将来自 mysql 查询。

这会产生：

```
{"45":{"name":"Bob Test","1":4,"2":3,"3":5,"4":5,"5":5,"6":5,"7":5,"8":5,"9":5},"25":{"name":"John Doe","1":2,"2":2,"3":1,"4":5,"5":5,"6":5,"7":5,"8":5,"9":5}} 
```

我正在使用此代码

```
<?php
$hole=1;
$gid=$_REQUEST['gid'];

?>
<script type="text/javascript">

gid= <?php echo "$gid"; ?>+0;
hole = <?php echo "$hole"; ?>+0;

score_arr = new Object() ;
var total = new Array() ;

$(document).ready(function(){

// SET the intial values
$("#hole_num").text(hole);

// Get Data from db
$.getJSON("golf_be.php","", function(score_arr){
// score_arr = jQuery.parseJSON(score_arr);  Tried this it didn't work
console.log(score_arr); //uncomment this for debug
}); //End json
$("#score").text(score_arr[gid][hole]); \\ This has an error 
$("#golfer_name").text(score_arr[gid]["name"]); 
```

使用 Firebug 我在控制台上收到此错误。有趣的是，对象就在那里。

```
TypeError: score_arr[gid] is undefined
[Break On This Error]   

$("#score").text(score_arr[gid][hole]);

golf.php?gid=25 (line 94)

Object { 0={...}, 45={...}, 25={...}} 
```

尝试了很多东西，但在我看来，由于某种原因，JSON 中的对象没有正确进入 score_arr。如您所见，我也尝试了 parseJson，但没有成功。

其他一些历史，我从在同一个脚本中创建 php 数组开始。并使用 php echo 将编码的 JSON 数组直接放入 score var 中，一切正常。现在调整它以与数据库交互。

非常感谢任何帮助。有点 jQuery 和 JS 的新手，花了很多时间在这个很棒的网站上寻找答案，但没有运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:41:16.883

您需要在传递给 getJSON 调用的函数中设置文本，如下所示：

```
$.getJSON("golf_be.php","", function(data) {
    $("#score").text(data[gid][hole]);
    $("#golfer_name").text(data[gid]["name"]);
); 
```

这是因为您传递给 getJSON 的函数是一个回调函数，因此它将在从您的 PHP 页面检索到数据后执行。由于它在您的代码中并没有`score_arr`在主函数中设置，因此您正在创建一个本地范围的变量，以`score_arr`其中的数据命名，该变量仅在您传递给 getJSON 调用的函数内部可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:38:37.107

感谢zshooter，您的解决方案以及有关回调函数的更多教育，我让它按我想要的方式工作。将 score_arr 设为全局并根据您的建议进行更改。在这里帮助其他人是有效的代码。

```
var score_arr  ;
var total = new Array() ;

$(document).ready(function(){

// SET the intial values
$("#hole_num").text(hole);

// Get Data from db
$.getJSON("golf_be.php","", function(data){

console.log(data); //uncomment this for debug

$("#score").text(data[gid][hole]);
$("#golfer_name").text(data[gid]["name"]);
score_arr= data;
}); //End json 
```

# python-3.x - 如何创建一个简单的 python 蛮力函数？

> ID：13459856
> 
> 赞同：2
> 
> 时间：2012-11-19T18:29:06.483
> 
> 标签：python-3.x

我正在尝试创建一个将蛮力用于学术 python 项目的函数。可以限制密码我想传入密码，并且函数迭代一组字符（az，AZ，0-9）尝试组合，直到找到密码。我知道这将是低效的，所以为了测试让我们假设密码是 4 个字符长。任何有关开始编写此函数的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:47:15.780

```
gen = itertools.combinations_with_replacement(characters,password_length) #1
for password in gen:                                                      #2 
    check_password(password)                                              #3 
```

这是它的工作原理：

*   第 1 行：这将创建一个生成器。它就像一个函数，可以记住它停止的位置。查看更多信息： http: [//getpython3.com/diveintopython3/generators.html](http://getpython3.com/diveintopython3/generators.html)。这个特定的生成器会遍历给定长度的给定字符的所有可能组合。
*   第 2 行：对于 for 循环的每次迭代，调用 next(gen)。这*产生*下一个值
*   第 3 行：做你需要做的事

例如 if`characters = '01234567890'`和`password_length = 2`then 循环将通过组合运行：`('0','0'), ('0','1'), ('0','2')...('0','9'),('1','0'),('1','1')...('9','9')`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T12:10:28.710

对于预先知道的长度：

```
import random
a_z = "abcdefghijklmnopqrstuvwxyz_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
while password != curtry:
    currenttry = random.choice(a_z)+random.choice(a_z)+random.choice(a_z)+random.choice(a_z) 
```

对于随机长度：

```
import random
a_z = "abcdefghijklmnopqrstuvwxyz_0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"
while password != curtry:
    leng = random.randint(4,12) #random int between 4 and 12
    i = 0
    curtry = "lol"
    for i<leng:
         curtry += random.choice(a_z) 
```

# android - Android 上未清除的 StateListDrawable 行为

> ID：13459859
> 
> 赞同：5
> 
> 时间：2012-11-19T18:29:12.977
> 
> 标签：android, android-drawable

我尝试使用时有很奇怪的现象`StateListDrawable`：

我有一个扩展视图，`ImageView`我`StateListDrawable`在其构造函数中使用。我有 2 个代码片段来展示我的问题。第一个：

```
public class MyView extends ImageView{  
Resources r = getResources();
Drawable filteredDrawable = r.getDrawable(R.drawable.smallsale);                    
filteredDrawable.setColorFilter(new LightingColorFilter(Color.RED, 1));                                     
setImageDrawable(filteredDrawable); 
} 
```

第二个：

```
public class MyView extends ImageView{
Resources r = getResources();
Drawable filteredDrawable = r.getDrawable(R.drawable.smallsale);

filteredDrawable.setColorFilter(new LightingColorFilter(Color.RED, 1));

StateListDrawable states = new StateListDrawable();
states.addState(new int[] {android.R.attr.state_pressed},  filteredDrawable);
states.addState(new int[] {android.R.attr.state_focused}, filteredDrawable);
states.addState(new int[] {}, r.getDrawable(R.drawable.smallsale));

//Notice I do not use 'states' at all...
setImageDrawable(filteredDrawable); 
```

}

（我知道这段代码没有多大意义——我想简化问题以使问题更清楚）。问题是在第一个sinppet 上一切正常——我在drawable 上设置了一个滤色器并显示出来。但是在第二个片段中，`StateListDrawable`实例以某种方式对过滤器产生影响，并且正在显示**原始**可绘制对象，即使我从未`ImageView`通过调用将其连接到`setImageDrawable(states)`.

有人可以向我解释发生了什么吗？我的目标是`StateListDrawable`为不同的状态使用相同的可绘制对象，如下所示：

```
StateListDrawable states = new StateListDrawable();
states.addState(new int[] {android.R.attr.state_pressed},  filteredDrawable);
states.addState(new int[] {android.R.attr.state_focused}, filteredDrawable);
states.addState(new int[] {}, r.getDrawable(R.drawable.smallsale));
setImageDrawable(states); 
```

（我需要通过代码来完成，因为我的drawable应该从网络动态加载，而不是作为资源）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T22:21:12.053

好的。我找到[了这篇文章](https://stackoverflow.com/questions/6018602/statelistdrawable-to-switch-colorfilters/10571706#10571706)

事实证明，`StateListDrawables` 由于某种原因，过滤器松动了……我采用了 SnoK 的解决方案，它对我很有用。

我不知道为什么谷歌不认为它应该在文档上注明作为副作用......

# chrome-web-store - 开发 Chrome 应用程序我应该学习什么？

> ID：13459860
> 
> 赞同：1
> 
> 时间：2012-11-19T18:29:21.263
> 
> 标签：chrome-web-store

开发 Chrome 应用程序我应该学习什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:35:46.163

你的意思是用哪种语言？你的问题不是很清楚。好吧，如果您想学习开发 chrome 应用程序，您需要知道：Javascript、HTML、CSS（这些不是编程语言，而且它们很容易学习）

在这里你有一些很好的阅读：

[http://www.vikitech.com/2398/create-chrome-web-apps](http://www.vikitech.com/2398/create-chrome-web-apps)

希望能帮助到你 ：）

# android - Android 列表配色方案

> ID：13459861
> 
> 赞同：0
> 
> 时间：2012-11-19T18:29:39.500
> 
> 标签：android, eclipse, android-layout

我在 Mac 上使用 Eclipse，我想知道为什么这些应用程序的背景不同。

具有纯色背景的是示例应用程序（Android Basics），具有渐变的是地雷（Pixnake）。

我想知道的是如何使地雷变黑？我在哪里看？我从地雷中删除了主题，但这只是删除了白色。

![坚硬的](../Images/de386212b9e8d9e1cbc35cff3966d855.png)

![坡度](../Images/0df0e37347b75a755d5f7142ae785904.png)

渐变清单，现在是纯黑色应用程序：

[http://pastebin.com/eCEEE5Uu](http://pastebin.com/eCEEE5Uu)

实体清单，没有hardwareAccelerate标签：

[http://pastebin.com/Phqjv2j5](http://pastebin.com/Phqjv2j5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:37:27.037

渐变背景是 ICS 中使用硬件加速的应用程序的默认设置（这是默认设置）。`android:hardwareAccelerated="true"`您可以通过将应用程序标签放入清单中来关闭应用程序的硬件加速。

```
<application
android:hardwareAccelerated="true"
.../> 
```

应该摆脱渐变。

# c# - 解析xml的最佳方式

> ID：13459862
> 
> 赞同：0
> 
> 时间：2012-11-19T18:29:40.683
> 
> 标签：c#, .net, xml, xml-parsing

您建议使用什么来解析诸如此 XML 文件：

```
<file>
  <test1 a="true">
    <line1>aaa</line1>
    <line2>aaa</line2>
    <line3>aaa</line3>
    <line4>aaa</line4>
  </test1>
  <test2 a="true">
    <line1>aaa</line1>
    <line2>aaa</line2>
    <line3>aaa</line3>
    <line4>aaa</line4>
  </test2>
  <test3 a="false">
    <line1>aaa</line1>
    <line2>aaa</line2>
    <line3>aaa</line3>
    <line4>aaa</line4>
  </test3>
</file> 
```

*   XmlReader
*   XmlTextReader
*   别的东西？

我正在寻找最快和最短的方法。我尝试使用 XmlReader，但它需要更多额外的变量来检查当前正在解析哪个元素。
提前致谢。
甲烷

--update 1-- 我想做的工作是将测试的每个元素分配给 struct "test"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:43:11.690

查看[Linq to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。我不能说“最快”，但在使用 XML 时它确实让我的生活更轻松。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:52:25.820

如果文件格式不经常更改，请使用反序列化。它将为您提供用于反序列化文件的对象集合。这是最简单的方法。您可以阅读更多的序列化和反序列化。 [http://msdn.microsoft.com/en-us/library/ms731073(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms731073(v=vs.100).aspx)

为了最快，所有这些都取决于文件的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:18:05.593

如果性能是一个问题，那么这是一个非常快的解析器

[http://www.majestic12.co.uk/projects/html_parser.php](http://www.majestic12.co.uk/projects/html_parser.php)

# php - 如何将图像从 url 添加到 temp？

> ID：13459863
> 
> 赞同：2
> 
> 时间：2012-11-19T18:29:42.333
> 
> 标签：php

我正在使用来自[http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)的 SimpleImage.php 类来调整、压缩和保存图像。

通常将它与来自输入的图像一起使用：

```
$tmp_dir = $_FILES['file']['tmp_name'];
$file_name = 'something.jpg'; 

include('SimpleImage.php');
$image = new SimpleImage();
$image->load($tmp_dir);

$image->resizeToWidth($width);
$image->save('imgd/l'.$file_name); 
```

**但是我怎么能只处理图片网址呢？**（来自另一个网站）

```
$img = file_get_contents($url); 
```

上述`$img`变量保留实际图像。那么如何将其保存到 temp 以使用它呢？如果这是正确的方法。

如果有可能不必更改 SimpleImage.php 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:36:29.377

使用[tempnam()](http://php.net/manual/en/function.tempnam.php)

> 在指定目录中创建具有唯一文件名的文件，访问权限设置为 0600。如果该目录不存在， tempnam() 可能会在系统的临时目录中生成一个文件，并返回该文件的名称。

```
<?php 
$tmpfname = tempnam("/tmp", "UL_IMAGE");
$img = file_get_contents($url);
file_put_contents($tmpfname, $img);

include('SimpleImage.php');
$image = new SimpleImage();
$image->load($tmpfname);

$image->resizeToWidth($width);
$image->save('imgd/l'.$file_name);
?> 
```

# javascript - IScroll 包装器没有得到高度

> ID：13459864
> 
> 赞同：1
> 
> 时间：2012-11-19T18:29:43.323
> 
> 标签：javascript, android, jquery, jquery-mobile, scrollview

我有以下代码：

```
<div data-role="content" height="100%" data-iscroll>
    <div class="homebutton_zeile">
        <a id="picture_home" href="#pictures">
            <div class="homebutton_all">
                <div class="homebutton_name">Picture</div>
                    <div class="homebutton_picture">
                        <img src="images/picture.png" alt="image"
                                        style="position: relative;">
                    </div>
                </div>
            </a>        
        </div>
    </div>
</div> 
```

我的 CSS 类

```
.homebutton_zeile{
 width: 100%;
 height: 30%;
}

.homebutton_all{
 width: 30%;
 height: 90%;
 float:left;
 margin-left: 2%;
 margin-top:15px;
}

.homebutton_picture{
 position: relative;
 width: 100%;
 height: 85%;
 float: left;
 background-color: #AAC7BD;
 border: 1px solid black;
 border-radius: 15px;
 box-shadow:8px 8px 8px #666;
}

.homebutton_name{
 text-align:center;
 position: relative;
 top:-10px;
 width: 100%;
 height: 15%;
 margin-left: auto;
 text-decoration:none;
 color:black;
} 
```

我在用：

*   iscroll.js
*   jQuery 1.8.2
*   jQuery 移动 1.2.0
*   jQuery 移动 iscrollview。

如果它需要知道`jstorage.js`和`fastclick.js`

但是上面的 div 在 iscroll 的包装器上没有得到高度。还有一个登录前，登录后会自动显示此页面的`$.mobile.changePage("#home");`功能。

我尝试在 changePage 功能之前将其作为第一页，它给了我同样的效果。如果我`&nbsp;`在 The wrapper 之后放了一个例子， 那么对于里面的图像`<div data-role="content" height="100%" data-iscroll>&nbps;` 来说，高度为 15px 。`&nbsp;`

# javascript - Javascript 将日期更改为 (dd/mm/yyyy) 格式

> ID：13459866
> 
> 赞同：70
> 
> 时间：2012-11-19T18:29:44.903
> 
> 标签：javascript

如何转换以下日期格式（2012 年 11 月 19 日星期一 13:29:40）

进入：

日/月/年

```
<html>
    <head>
    <script type="text/javascript">
      function test(){
         var d = Date()
         alert(d)
      }
    </script>
    </head>

<body>
    <input onclick="test()" type="button" value="test" name="test">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2012-11-19T18:34:12.563

一些 JavaScript 引擎可以直接解析该格式，这使得任务非常简单：

```
function convertDate(inputFormat) {
  function pad(s) { return (s < 10) ? '0' + s : s; }
  var d = new Date(inputFormat)
  return [pad(d.getDate()), pad(d.getMonth()+1), d.getFullYear()].join('/')
}

console.log(convertDate('Mon Nov 19 13:29:40 2012')) // => "19/11/2012"
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-11-19T18:40:04.697

这将确保您获得两位数的日期和月份。

```
function formattedDate(d = new Date) {
  let month = String(d.getMonth() + 1);
  let day = String(d.getDate());
  const year = String(d.getFullYear());

  if (month.length < 2) month = '0' + month;
  if (day.length < 2) day = '0' + day;

  return `${day}/${month}/${year}`;
} 
```

或者更简洁：

```
function formattedDate(d = new Date) {
  return [d.getDate(), d.getMonth()+1, d.getFullYear()]
      .map(n => n < 10 ? `0${n}` : `${n}`).join('/');
} 
```

# objective-c - Main.1 输出文件在 XCode 中做了什么？

> ID：13459869
> 
> 赞同：2
> 
> 时间：2012-11-19T18:30:01.077
> 
> 标签：objective-c, ios, xcode, build

我做了一个名为“Stack”的示例项目，但意识到我需要更多的数据结构，所以我重命名了所有内容 - 项目，在 XCode 中创建了 2 个新文件夹及其匹配组，修改了目标构建路径以查找“Main/ DataStructures-Prefix.pch”。但是有一个文件我不明白 -> 早些时候，我的文件夹中有一个“Stack.1”，所以我只是将它重命名为“Main.1”，它似乎不会*影响*构建过程，但我很怀疑。这个“Main.1”有什么作用？它是像 C/C++ 中的链接中间文件吗？

这是一张图片：

![在此处输入图像描述](../Images/1642cd8df282c08fd2306befb1c85f61.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:41:25.867

“Main.1”是为您的程序创建“手册页”（即*在线手册页*）的模板。您可以通过调用来验证

```
man ./Main.1 
```

在“Main.1”所在目录的命令行上。

如果你跑

```
xcodebuild install 
```

然后在命令行上将手册页复制到

```
$DSTROOT/usr/share/man/man1/ 
```

目录，其中`DSTROOT`是“安装构建产品位置”。该文件不会在构建过程中以其他方式使用。

如果您不需要手册页，您可以从 Xcode 项目中删除该文件。

# jquery - jquery选项卡如何使用选择通过选项卡名称设置默认选项卡：

> ID：13459870
> 
> 赞同：0
> 
> 时间：2012-11-19T18:30:02.787
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

要选择的 jquery ui 选项卡语法是什么：tabname (not index).. 这可以独立工作，但我想将它与其他 .tabs 部分结合使用：

```
$("#Maintabs").tabs("select", "#Maintabs-1");  // set default tab 
```

我想将它包含在我现有的 .tabs 部分中，但不知道语法：

```
$('#Maintabs').tabs({
    selected: 1, // this is where I would like set by tabname NOT index

    select: function (event, ui) {
        var url = $.data(ui.tab, 'load.tabs');
        location.href = url;
            return false;
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:32:02.850

好吧，没有人回应，与此同时，我有动力去发现一个，因为 Firebug 在某些条件下显示错误并且部署指日可待。
目标是将默认选项卡设置为项目（编辑），在大多数情况下是第二个选项卡，除非他们没有插入新项目的权限并且只有编辑现有项目的权限。

因为有些用户没有创建新项目的权限，只能编辑现有项目，所以在 Asp.net 中将新项目选项卡设置为隐藏。通常，这将是第一个选项卡，但由于不是因为权限，因此只有第二个选项卡可见，这使得使用显式数字设置选项卡不可行。因此，在创建选项卡之前所做的工作是检查 NewItem 选项卡是否存在，并基于此设置默认选项卡，如下所示。

```
var intMainTabDef = 1;
if ($('#hlnkNewItem').length > 0) {
    intMainTabDef = 1;
} else {
    intMainTabDef = 0;
}

$('#Maintabs').tabs({
    create: function (event, ui) {
     selected: intMainTabDef
    }
}); 
```

# string - R中的字符串操作

> ID：13459872
> 
> 赞同：3
> 
> 时间：2012-11-19T18:30:05.847
> 
> 标签：string, r

我有一个字符串向量：

```
x<-c("abc.dat", "xyz.dat") 
```

首先，我想替换句点字符“。” 在每个字符串中使用另一个字符，即“-”减号，然后在每个字符串的开头再次附加“-”减号字符，最后连接向量中的所有字符串以形成最终的单个字符串并将其分配给某个对象像 str_final 这样。

```
>str_final (enter)
-abc-dat -xyz-dat 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:31:40.177

看`?gsub`和`?paste`

```
> paste0("-", gsub("\\.", "-", c("abc.dat", "xyz.dat")))
[1] "-abc-dat" "-xyz-dat" 
```

请注意，我用 2 个反斜杠转义了点。或者，您可以`fixed=TRUE`像这样使用`gsub(".", "-", c("abc.dat", "xyz.dat"), fixed=TRUE)`

* * *

如果你想要一个字符串，也许你想利用`collapse`参数`paste`

```
> paste(paste0("-", gsub("\\.", "-", c("abc.dat", "xyz.dat"))), collapse=" ")
[1] "-abc-dat -xyz-dat" 
```

# actionscript-3 - 用于 air 3.5 的命名空间和 sdk，带有 flex 中的工人

> ID：13459876
> 
> 赞同：2
> 
> 时间：2012-11-19T18:30:26.733
> 
> 标签：actionscript-3, apache-flex, air

我想在 Flex 中创建一个 AIR 项目。我尝试了很多组合，但我无法在 Flash Builder 中找到 flash.system.Worker。我假设我没有使用正确的 Flex/AIR SDK/Namespace 声明组合。我同时拥有 Flash Builder 4.6 和 4.7 beta，尝试了带有“下载器”的 Apache Flex SDK，从实验室（3.5）和发布（3.4）下载了 AIR SDK（不是 100% 确定如何安装它，但我已经覆盖它到当前的 flex sdk 文件夹..）我想看到 Builder 识别内置的 Worker 类（下面的代码不应该抛出错误），并使用它。我找到了 Flash Player 的示例，但我需要它用于 AIR。

```
import flash.system.Worker;
...
var w:Worker; 
```

testproject-app.xml：xmlns 是否正确？

```
<?xml version="1.0" encoding="utf-8" standalone="no"?>
<application xmlns="http://ns.adobe.com/air/application/3.5"> 
```

testproject.mxml：xmlns 是否正确？

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                   xmlns:s="library://ns.adobe.com/flex/spark" 
                   xmlns:mx="library://ns.adobe.com/flex/mx"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:18:58.833

还必须在编译器参数中设置 swfversion。-swf-版本=16

# jquery - jquerymobile 点击事件不起作用

> ID：13459879
> 
> 赞同：0
> 
> 时间：2012-11-19T18:30:34.500
> 
> 标签：jquery, events, jquery-mobile, click

我是 JqueryMobile 的新手。我想在一个按钮上尝试一个简单的点击事件，但它不起作用（我在 Firefox 中使用它）

HTML是

```
<!DOCTYPE html>
<html dir='ltr'>
<head>
<title>Test Page</title>
<link rel="stylesheet" href="/css/style.css"/>
<script src='js/jquery.mobile.js'></script>
<script src='js/script.js'></script>
</head>
<body> 
    <div data-role="page" id='mypage'>  
        <button id='load_ajax'>Carica</button>
        <br />
        <div id='content'></div>
    </div><!-- /content -->
</body>
</html> 
```

script.js 中的脚本是

```
$('#mypage').delegate('#load_ajax','click',function (e) {
    alert('test'); 
}); 
```

即使使用调试器，也不会弹出警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:07:50.233

我想问题是在您的代码调用.delegate() 时页面上不存在所选元素。此外，请检查 JS 文件是否正确加载。

以下包含您发布的代码的代码可以正常工作：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Page Title</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    </head> 
    <body>
        <!-- /page -->
        <div data-role="page" id='mypage'>  
            <div id='content'>
                <button id='load_ajax'>Carica</button>
            </div>
        </div>
        <script type="text/javascript">
            $('#mypage').delegate('#load_ajax','click', function (e) {
                alert('test'); 
            });
        </script>
    </body>
</html> 
```

此外，如 jQuery API 中所述：

> 从 jQuery 1.7 开始，.delegate() 已被 .on() 方法取代。然而，对于早期版本，它仍然是使用事件委托的最有效方法。
> 
> *事件处理程序仅绑定到**当前选定的元素**，并且在您的代码调用.on()**时它们必须存在于页面上***。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素***的文档就绪处理程序内执行事件绑定。***如果将新 HTML 注入页面，请***在将新 HTML 放入页面后***选择元素并附加事件处理程序。或者，***使用委托事件***来附加事件处理程序。
> 
> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。**在加载任何其他 HTML 之前，文档元素在文档的头部可用，因此在此处附加事件是安全的，而无需等待文档准备好**。

阅读上述内容后，您可能会考虑将代码更改为：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>Page Title</title> 
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript">
            $(document).on('click', '#load_ajax', function(e){
                // your code
                alert($(this).text());
            });
        </script>
    </head> 
    <body>
        <!-- /page -->
        <div data-role="page" id='mypage'>  
            <div id='content'>
                <button id='load_ajax'>Carica</button>
            </div>
        </div>
    </body>
</html> 
```

# php - Magento TopLinks 作为悬停时的下拉菜单

> ID：13459881
> 
> 赞同：3
> 
> 时间：2012-11-19T18:30:39.857
> 
> 标签：php, magento, e-commerce

我正在使用 Magento 1.7 社区并希望将顶部链接作为下拉列表，就像在此模板中一样：

[http://www.joomlart.com/demo/#magento-themes.joomlart.com/jm_wall](http://www.joomlart.com/demo/#magento-themes.joomlart.com/jm_wall)

但不知道我是怎么做的。我知道链接在哪里，但它们在 php foreach 循环中

我希望他们成为

*   我的帐户
    *   愿望清单
    *   登录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T05:54:36.787

链接由 xml 文件布局处理->customer.xml 创建带有块的新模块作为您的 jquery 导航，在模块 xml 中覆盖并从 customer.xml 中删除标签此提示可能对您有帮助，也有任何新想法请回复我

# iis - .atom 文件的 Web.config ASP 处理程序

> ID：13459882
> 
> 赞同：0
> 
> 时间：2012-11-19T18:30:39.733
> 
> 标签：iis, web-config, opera, mime, plesk

我有一个将 xsl 应用于 xhtml 页面的 asp 页面，以提供一些提要阅读器可识别的 application/xml+atom 输出页面。特别是 Opera，使用文件扩展名而不是 MIME 类型来检测提要！如果我将 ASP 粘贴到带有 .atom 扩展名的页面中，它会在没有服务器端脚本预处理的情况下返回！由于服务器正在与其他人共同托管我的网站，因此除了通过 Plesk 界面为明显遗漏的类型（例如 .svg 和 .xhtml）添加我的自定义类型外，我想阻止对服务器 MIME 的摆弄。通过论坛，我发现使用 .htaccess 的 Apache 隐藏扩展，但对于 IIS，所有提到的是使用 web.config 问题是我如何通过 web.config 等机制使用 .atom 文件的 url 从 .asp 地址提供输出?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T18:54:25.570

解决方案是在通过瓶颈时节省其他人的时间。要强制 Opera 解析 MIME 类型，请将 .asp 作为默认文档放在其自己的目录中，例如 /feed/。这将阻止在 url 中传递文件名。还要确保为使用 ASP 的 Atom 提要包含 <%Response.ContentType = "application/atom+xml"%>，因为它未知 Opera 何时解析链接的内容，如 <link rel="self" type="application/ atom+xml" href="http://domain/feed/" />

# coldfusion - Coldfusion 生成的电子表格不允许列格式

> ID：13459883
> 
> 赞同：0
> 
> 时间：2012-11-19T18:30:40.583
> 
> 标签：coldfusion, spreadsheet, cfspreadsheet

从查询创建电子表格时，生成的电子表格将不允许格式化日期时间数据类型的列。

电子表格的创建是：

```
 <cfset filenametouse = 'AllCaseData' />
    <!---Set directory and full file path--->
    <cfset theDir = GetDirectoryFromPath(GetCurrentTemplatePath()) /> 
    <!---Attach file extension to full file path and file name--->
    <cfset theFile = theDir & filenametouse & ".xls" /> 
    <cflock name="fileActionSentItems" type="exclusive" timeout="30" throwontimeout="true">
        <cfset SpreadsheetObj = spreadsheetNew()>
        <!---<cfset fcol = {}>
        <cfset fcol.dataformat = "@">--->
        <!---Create the column headings--->
        <cfset SpreadsheetAddRow(SpreadsheetObj, "Case_Number,Ship_Start,Projected_$,VA_$,Customer_ID,Customer,Project_Description,Stage,Sales,PM,J_Count,O_Count,S2_Count,S_Count,I_Count")>
        <!---add the column data to the spreadsheet--->
        <cfset SpreadsheetAddRows(SpreadsheetObj, caseData) />

        <cfset SpreadsheetFormatColumn(SpreadsheetObj, {dataformat="m/d/yyyy"}, 2)>

        <!---Generate the spreadsheet--->
        <cfspreadsheet action="write" filename="#theFile#" name="SpreadsheetObj" sheetname="Sheet1" overwrite="true" />

    </cflock>
    <cftry>
        <cflock name="fileActionSentItems" type="exclusive" timeout="30" throwontimeout="true"> 
            <cfmail to="#session.authUser.getEmail()#" from="noreply@pratt.com" subject="All Case Data" type="html" >
                <cfmailparam file="#theFile#" remove="true" />
                <p>The requested data is attached.</p>
            </cfmail>
        </cflock>
        <cfcatch type="any" >
            <cffile action="delete" file="#theFile#" /> 
        </cfcatch>
    </cftry>
    <cfoutput><h3 style="margin-top: 1em;">Email sent to <cfoutput>#session.authUser.getEmail()#</cfoutput></h3></cfoutput> 
```

所有数据都是正确的并且在正确的列中，但是“Ship_Start”列的格式类似于 2012-11-27 00:00:00.000，并且不能在 Excel 中更改为任何其他格式。

如果我在 SQL Server Management Studio 中手动运行查询，然后将带有标题的结果复制到 Excel 中，则可以对数据进行格式化。我还创建了一个 Excel 模板，其中列标题已格式化并用数据填充模板，但即使使用“日期”格式化该列也无法格式化。

我会错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:27:25.170

不幸的是，缺乏格式支持。如果您正在运行 Windows，您可以简单地自己使用循环和`SpreadSheetSetCellValue`：

```
<cfset obj = spreadsheetNew()>
<cfset SpreadSheetAddRow(obj, "Case_Number,Ship_Start")>
<cfset SpreadSheetAddRows(obj, yourQuery)>
<cfset spreadsheetFormatColumns(obj, {dataformat="m/d/yyyy"}, 2)>
<cfloop query="yourQuery">
    <cfset theValue = yourQuery.Ship_Start[currentRow]>
    <cfif IsDate(theValue)>
         <!--- offset by 1 row for header --->
         <cfset SpreadSheetSetCellValue(obj, theValue.toDouble(), currentRow+1, 2)>
    </cfif>
</cfloop>

<cfset SpreadSheetWRite(obj, theFilePath, true)> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T20:57:08.913

这似乎是一个错误。在 Raymond Camden 的博客上对此有一些很好的讨论 -[这里](http://www.raymondcamden.com/index.cfm/2011/6/1/ColdFusion-Sample--Create-an-Excel-File)。讨论在底部的用户评论中。看起来雷实际上为此输入了错误。我想我找到了 -[这里](https://bugbase.adobe.com/index.cfm?event=bug&id=3043981)。

我找到了两条可能对你有帮助的评论。它们是解决方法，但也许可以让您动起来。我已将我认为适用的评论部分**加粗**，但无论如何您可能都想通读 Ray 博客上的所有评论，以了解它们的上下文。

***开始引用博客条目*** Les *Konley*

发表的第一条评论 发表于**2011 年 6 月 20 日上午 11:12**

Ray & James，我有关于 CFSPREADSHEET 和 Excel 无法识别结果日期字段的其他信息。首先，我们的代码既使用了查询对象，也设置了明确的日期格式 [ie, cfset temp = QuerySetCell(GetExcelReport, "FollowUpDate", "DateFormat(GetResult.FollowUpDate, "MM/DD/YYYY")) ] . 当我们在 Excel 中打开电子表格（使用 CFSPREADSHEET 构建）时，日期列被格式化为常规文本或一般（左对齐）。在这个网站上 (http://www.appnitro.com/forums/topic/excel-不...）**提供了一种解决方法，因此业务用户可以突出显示该列（在 Excel 中），然后选择数据 > 文本到列，然后单击向导上的完成**（无需单步执行）......并且日期字段现在被 Excel 识别为 DATE。如果业务用户决定不希望这种额外的小不便，我们可能需要恢复在生产服务器上安装 MS Office 并继续使用旧的 CFX_Excel 标签，至少在未来版本中纠正该特定错误之前。感谢您向 Adob​​e 提交有关此问题的错误报告。

**Dan Murphy 发表于 2011 年 7 月 22 日上午 10:44** 发表的第二条评论

 **James、Ray 和 Les - 我知道我在这里玩游戏有点晚了，但我想我刚刚找到了 Excel 中日期格式的解决方法，对我来说效果很好。**首先，我使用基于另一个查询的 querynew 创建自己的查询，并使用它导出到 Excel。如果我将 querynew 中的数据类型设为 cf_sql_varchar 而不是 date 或 cf_sql_timestamp，然后将查询输出到 Excel 电子表格，它将采用您提供的任何格式。如果您停在那里，Excel 仍会将数据视为文本，而不是实际日期（尽管格式正确）。其次，只需使用电子表格格式列设置数据格式以匹配您在查询中指定的格式，Excel 现在将其全部识别为日期。**雷，我正在使用你的 CFLib 中的 DateTimeFormat 函数，所以这对我来说是这样的。（这显然只是其中的一部分，但你会明白的）。

这是查询...

```
<cfset mys = QueryNew("OrderNumber,InScan,OutScan","cf_sql_varchar,cf_sql_varchar,cf_sql_varchar")>
<cfloop query="qryThroughputScans">
<cfset queryAddRow(mys)>
<cfset querySetCell(mys,"OrderNumber",NumberFormat(qryThroughputScans.OrderNumber,000000))> 
<cfset querySetCell(mys,"InScan",DateTimeFormat(qryThroughputScans.InScan))> 
<cfset querySetCell(mys,"OutScan",DateTimeFormat(qryThroughputScans.OutScan))>
</cfloop> 
```

然后是我在创建 Excel 电子表格后使用的列格式......

```
<cfset spreadsheetFormatColumns(s,
{
alignment="center",
dataformat="m/d/yyyy h:mm AM/PM"
}, 
"2-3")> 
```

我用各种奇怪的格式对其进行了测试，以确保它可以正常工作，并且我取得了巨大的成功。也许这已经众所周知，但是当我寻找修复时我找不到任何东西。希望这可以帮助某人在寻找日期问题的答案时有所帮助。

谢谢，丹

****结束引用的博客条目******

# css - CSS渐变颜色，仅在开头和结尾

> ID：13459889
> 
> 赞同：1
> 
> 时间：2012-11-19T18:30:50.500
> 
> 标签：css, gradient

是否可以创建这样的渐变线？
![例子](../Images/d494c6793da31616b271516da7634881.png)

```
background: -webkit-gradient(linear, 0 0, 100% 0, from(#CCC), 
to(#CCC), color-stop(50%, #333)); 
```

这个 CSS 褪色的长度比我想要的要长。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:37:03.527

来自 colorzilla.com：

```
background: -moz-linear-gradient(left, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 10%, rgba(0,0,0,1) 90%, rgba(0,0,0,0) 100%);
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(0,0,0,0)), color-stop(10%,rgba(0,0,0,1)), color-stop(90%,rgba(0,0,0,1)), color-stop(100%,rgba(0,0,0,0)));
background: -webkit-linear-gradient(left, rgba(0,0,0,0) 0%,rgba(0,0,0,1) 10%,rgba(0,0,0,1) 90%,rgba(0,0,0,0) 100%);
background: -o-linear-gradient(left, rgba(0,0,0,0) 0%,rgba(0,0,0,1) 10%,rgba(0,0,0,1) 90%,rgba(0,0,0,0) 100%);
background: -ms-linear-gradient(left, rgba(0,0,0,0) 0%,rgba(0,0,0,1) 10%,rgba(0,0,0,1) 90%,rgba(0,0,0,0) 100%);
background: linear-gradient(to right, rgba(0,0,0,0) 0%,rgba(0,0,0,1) 10%,rgba(0,0,0,1) 90%,rgba(0,0,0,0) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00000000', endColorstr='#00000000',GradientType=1 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:39:48.460

试试这个：

`-webkit-linear-gradient(left, #ccc 0%, #333 3%, #333 97%, #ccc 100%)`

根据需要随意调整百分比。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T18:41:55.333

不幸的是，我不认为这种渐变可以在 IE9 或更低版本中完成。

```
background-image: -moz-linear-gradient(left, white 0%, black 10%, black 90%, white 100%);
background-image: -o-linear-gradient(left, white 0%, black 10%, black 90% white 100%);
background-image: -webkit-gradient(linear, right top, left top, color-stop(0, white), color-stop(0.1, black),color-stop(0.9, black),color-stop(1, white));
background-image: -ms-linear-gradient(right, white 0%, black 10%, black 90%, white 100%);
background-image: linear-gradient(to left, white 0%, black 10%, black 90%, white 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='white', endColorstr='black',GradientType=1 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:39:58.073

关于我的评论，在你尝试之前不要说不：

```
<div style="width:500px;height:20px;background:black;">

    <div style="position:absolute;left:0;width:100px;height:20px;background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2JhKDI1NSwyNTUsMjU1LDEpOyIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYmEoMCwwLDAsMSk7IiAvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IGZpbGw9InVybCgjZ3JhZGllbnQpIiBoZWlnaHQ9IjEwMCUiIHdpZHRoPSIxMDAlIiAvPjwvc3ZnPg==);background: -o-linear-gradient(left, rgba(255,255,255,1), rgba(0,0,0,1));background: -moz-linear-gradient(left, rgba(255,255,255,1), rgba(0,0,0,1));background: -webkit-gradient(linear, left top, right top, color-stop(0, rgba(255,255,255,1)), color-stop(1, rgba(0,0,0,1)));filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr=#FFFFFFFF,EndColorStr=#FF000000);-ms-filter: "progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr=#FFFFFFFF,EndColorStr=#FF000000)""></div>
    <div style="position:absolute;right:0;width:100px;height:20px;background: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj48c3RvcCBvZmZzZXQ9IjAlIiBzdHlsZT0ic3RvcC1jb2xvcjpyZ2JhKDAsMCwwLDEpOyIgLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOnJnYmEoMjU1LDI1NSwyNTUsMSk7IiAvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IGZpbGw9InVybCgjZ3JhZGllbnQpIiBoZWlnaHQ9IjEwMCUiIHdpZHRoPSIxMDAlIiAvPjwvc3ZnPg==);background: -o-linear-gradient(left, rgba(0,0,0,1), rgba(255,255,255,1));background: -moz-linear-gradient(left, rgba(0,0,0,1), rgba(255,255,255,1));background: -webkit-gradient(linear, left top, right top, color-stop(0, rgba(0,0,0,1)), color-stop(1, rgba(255,255,255,1)));filter: progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr=#FF000000,EndColorStr=#FFFFFFFF);-ms-filter: "progid:DXImageTransform.Microsoft.Gradient(GradientType=1,StartColorStr=#FF000000,EndColorStr=#FFFFFFFF)""></div>
</div>​ 
```

这是一个jsfiddle：http: [//jsfiddle.net/kEQKb/10/](http://jsfiddle.net/kEQKb/10/)

# entity-framework - 我可以一次性忽略 Automapper 属性吗？

> ID：13459891
> 
> 赞同：3
> 
> 时间：2012-11-19T18:31:08.487
> 
> 标签：entity-framework, automapper

我正在使用 Automapper 将 EF 对象映射到 DTO；许多对象是多对多排列的。例如：

```
committee (table) 1 =< m  committeemember (table)  m >= 1 person (table) 
```

这可能映射到：

```
public class CommitteeViewModel
{
    public int idCommittee { get; set; }
    public IEnumerable<CommitteeMemberViewModel> CommitteeMembers { get; set; }
}

public class CommitteeMemberViewModel
{
    public int idCommittee { get; set; }
    public int idCommitteeMember { get; set; }
    public PersonViewModel Members { get; set; }
} 
```

还有用于`<committee, CommitteeViewModel>`、`<committeemember, CommitteeMemberViewModel>`和的 Automapper 映射`<person, PersonViewModel>`。

当我想归还一个委员会及其成员时，一切都很好。

但是，当我想要一个没有成员的委员会列表时，有没有办法让 Automapper 忽略某些属性，只是为了那个电话？有点像：

```
var committeeList = Automapper.Mapper.Map
    <List<committee>, List<CommitteeViewModel>>(committees)
   .Ignore("CommitteeMembers"); 
```

当然，我可以创建忽略这些属性并映射到这些属性的新 DTO，但由于我基本上想要*除*一个属性之外的所有内容，我认为可能有更好的方法，例如创建不同的映射 - 但我没有设法找到它。

谢谢，

G。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:50:47.407

您可以通过这种方式获得所需的结果：创建新映射（即覆盖现有映射）、映射源实体并覆盖映射回：

```
Mapper.CreateMap<committee, CommitteeViewModel>()
      .ForMember(c => c.CommitteeMembers, o => o.Ignore());

var committeeList = Mapper
      .Map<List<committee>, List<CommitteeViewModel>>(committees);

Mapper.CreateMap<committee, CommitteeViewModel>(); 
```

但我认为最好保持一致。如果我从委员会映射到 CommitteeViewModel，我希望它每次都会产生相同的结果。因此，最好为“轻”版映射创建新的视图模型。

# php - PHP glob 选择 2 个文件夹

> ID：13459894
> 
> 赞同：1
> 
> 时间：2012-11-19T18:31:25.763
> 
> 标签：php, file, directory, glob

如何使用 PHP`glob()`函数从多个文件夹中获取所有文件的列表？

像这样的东西：`glob("data/['folder1', 'folder2']/*");`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T18:37:05.570

如[文档中所述`glob`](http://dk1.php.net/glob)，您可以扩展`{a,b,c}`为 match `a`、`b`或`c`只要您使用该`GLOB_BRACE`标志。

```
glob("data/{folder1,folder2}/*", GLOB_BRACE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:48:03.897

如果您不想指定子目录，请尝试：

```
$all_files = glob("{data/*/*}", GLOB_BRACE); 
```

# c++ - 我不明白我在取消分配内存时做错了什么

> ID：13459897
> 
> 赞同：3
> 
> 时间：2012-11-19T18:31:42.900
> 
> 标签：c++, list, memory, linked-list, delete-operator

所以我有一个正确创建的链接列表，正确链接但是当我尝试取消分配内存时，我似乎无法删除任何节点，该列表仍然存在。我的列表解构器的代码：

```
void LL_User::free_memory() {
    // TODO
    LL_User_Node *currentNode;
    currentNode = head;
    while(currentNode) {
        LL_User_Node *temp = currentNode;
        currentNode = currentNode->next;
        delete temp;
    }
    //cout << "LL_User::free_memory() is not implemented yet.\n";
}

LL_User::~LL_User() {
    if(head == NULL) {
        return;
    }
    free_memory();
} 
```

我的用户类为 vars 和 deconstructor 提供了这个：

```
User::User() {
    username = "";
    password = "";
    first_name = "";
    last_name = "";
    profile_pic_filename = "";
    birth_year = 0;
    birth_month = 0;
    birth_day = 0;
}

User::~User() {
    //Nothing placed in body because strings and ints are dealt with by OS?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:32:52.707

现在写的代码只有一个严重的缺陷；您删除了链接到 的列表`head`，但从未将 head 设置为`NULL`。从这一点开始接触它的任何人都会通过垃圾指针遇到未定义的行为。

Set head to NULL if you're wiping the list like this. Alternatively, since you know `head` should be `NULL` after this is done anyway, forego using `currentNode` at all. Simply use `head` itself as the pointer that is walking the list. Think about that for awhile and it will come to you.

Also, as-written the check for (`head == NULL`) is not needed in your destructor. It is already checked in your `free_memory()` function, as it should be.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-19T18:35:50.677

You're manually deallocating it, that's what you're doing wrong. Use a smart pointer like a wise man, have a program that works like a man who wants to get paid for his craft.

# objective-c - NSUserDefaults，比如 regedit？

> ID：13459898
> 
> 赞同：0
> 
> 时间：2012-11-19T18:31:43.490
> 
> 标签：objective-c, cocoa, nsuserdefaults

好的，因为我是 obj-c 的新手并且有 Windows 开发的背景，所以我正在寻找 Regedit 的对应物。

我知道我应该使用 NSUserDefaults，对吗？

所以，我创建了两个函数，一个用于设置，一个用于获取值。它们看起来像这样：（是的......忽略我愚蠢的函数名称）:)

```
//SET:
-(void)SetRegeditValue:(NSString*)Name:(NSString*)Value
{
    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:Value,Name, nil];
    [ud registerDefaults:dict];
}
//GET:
-(NSString*)GetRegeditValue:(NSString *)Name
{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSString *get = [prefs stringForKey:Name];

    if(get)
        return get;
    else
        return @"Not found!";
} 
```

我像这样使用它们：

```
//TO SET:
SetRegitValue:@"my_value":@"my_value_name";
//TO GET:
GetRegeditName:@"my_value_name"; 
```

我不知道这是否是“正确”的做法，但它确实有效。唯一的问题是，当我杀死该应用程序时，它不记得这些值并且我得到“未找到！”。有什么我必须设置的，所以它真的可以保存这些变量吗？

哦，我正在构建一个可可应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:41:22.913

该`registerDefaults:`方法用于分配在您请求未定义键时返回的默认值。要实际存储一个值，您需要使用其中一种`set*:forKey:`方法。具体来说，您应该使用，`setObject:forKey:`因为您正在保存作为对象的字符串。

```
- (void)SetRegeditValue:(NSString *)name :(NSString *)value {
    [[NSUserDefaults standardUserDefaults] setObject:value forKey:name];
} 
```

我使用了与您的代码相同的参数顺序，但请注意它与您显示的示例不匹配，该示例首先传递了值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:39:00.673

NSUserDefaults 方法的文档`synchronize`说，*“将对持久域的任何修改写入磁盘”*。...并且... *“由于此方法会定期自动调用，因此仅当您无法等待自动同步时（例如，如果您的应用程序即将退出）才使用此方法”*。

由于您说当您看到问题时您正在杀死应用程序，所以您可能属于需要显式同步的类别。

# android - 强制堆叠标签

> ID：13459902
> 
> 赞同：5
> 
> 时间：2012-11-19T18:31:58.670
> 
> 标签：android, tabs, android-actionbar, landscape, stacked

有没有办法强制堆叠标签？我希望标签与操作栏分开（在第二行），即使在横向模式下也是如此。

我试图强迫它，但我不能。例如，Android 中的 Twitter 应用程序，当更改为横向模式时，会继续显示两行（单独的行中的选项卡，称为堆叠选项卡）。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T18:33:27.963

您不仅不能强制堆叠选项卡，甚至不能强制使用*选项卡*——Android 可以并且将用下拉列表替换它们，以便在某些屏幕尺寸和方向上进行导航。

您唯一的解决方案是远离操作栏选项卡，例如使用`ViewPager`and `PagerTabStrip`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T09:12:45.453

我很幸运使用了以下反射“hack”：

```
private void forceStackedTabs() {
    ActionBar ab = getSupportActionBar();
    if ( ab instanceof ActionBarImpl ) {
        // Pre-ICS
        disableEmbeddedTabs( ab );
    } else if ( ab instanceof ActionBarWrapper ) {
        // ICS
        try {
            Field abField = ab.getClass().getDeclaredField( "mActionBar" );
            abField.setAccessible( true );
            disableEmbeddedTabs( abField.get( ab ) );
        } catch (NoSuchFieldException e) {
            Log.e( TAG, "Error disabling actionbar embedded", e );
        } catch (IllegalArgumentException e) {
            Log.e( TAG, "Error disabling actionbar embedded", e );
        } catch (IllegalAccessException e) {
            Log.e( TAG, "Error disabling actionbar embedded", e );
        }
    }
}
private void disableEmbeddedTabs(Object ab) {
    try {
        Method setHasEmbeddedTabsMethod = ab.getClass().getDeclaredMethod("setHasEmbeddedTabs", boolean.class);
        setHasEmbeddedTabsMethod.setAccessible(true);
        setHasEmbeddedTabsMethod.invoke(ab, false);
    } catch (Exception e) {
        Log.e( TAG, "Error disabling actionbar embedded", e );
    }
} 
```

请注意，我自己没有想到这一点，只是简单地重写了这个答案中给出的代码：[replicate ActionBar Tab(s) with custom view](https://stackoverflow.com/a/12906792 "使用自定义视图复制 ActionBar Tab(s)")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-16T13:24:27.303

我用它来强制从 Gingerbread 到 KitKat 的 ActionBar 堆叠或非堆叠选项卡。

改编自： http: [//www.blogc.at/2014/01/23/android-tabs-appear-above-or-below-actionbar/](http://www.blogc.at/2014/01/23/android-tabs-appear-above-or-below-actionbar/)

![在此处输入图像描述](../Images/0fba6535935f0cd7e6b8b207be74657d.png)

```
setHasEmbeddedTabs(mActionbar,false);

    public static void setHasEmbeddedTabs(Object inActionBar, final boolean inHasEmbeddedTabs)
    {
        // get the ActionBar class
        Class<?> actionBarClass = inActionBar.getClass();

        // if it is a Jelly Bean implementation (ActionBarImplJB), get the super class (ActionBarImplICS)
        if ("android.support.v7.app.ActionBarImplJB".equals(actionBarClass.getName()))
        {
            actionBarClass = actionBarClass.getSuperclass();
        }

        // if Android 4.3 >
        if ("android.support.v7.app.ActionBarImplJBMR2".equals(actionBarClass.getName())){
            actionBarClass = actionBarClass.getSuperclass().getSuperclass();
        }

        try
        {
            // try to get the mActionBar field, because the current ActionBar is probably just a wrapper Class
            // if this fails, no worries, this will be an instance of the native ActionBar class or from the ActionBarImplBase class
            final Field actionBarField = actionBarClass.getDeclaredField("mActionBar");
            actionBarField.setAccessible(true);
            inActionBar = actionBarField.get(inActionBar);
            actionBarClass = inActionBar.getClass();
        }
        catch (IllegalAccessException e) {}
        catch (IllegalArgumentException e) {}
        catch (NoSuchFieldException e) {}

        try
        {
            // now call the method setHasEmbeddedTabs, this will put the tabs inside the ActionBar
            // if this fails, you're on you own <img class="wp-smiley" alt=";-)" src="http://www.blogc.at/wp-includes/images/smilies/icon_wink.gif">
            final Method method = actionBarClass.getDeclaredMethod("setHasEmbeddedTabs", new Class[] { Boolean.TYPE });
            method.setAccessible(true);
            method.invoke(inActionBar, new Object[]{ inHasEmbeddedTabs });
        }
        catch (NoSuchMethodException e)        {}
        catch (InvocationTargetException e) {}
        catch (IllegalAccessException e) {}
        catch (IllegalArgumentException e) {}
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T12:31:22.253

如果您需要支持手机和平板电脑并且不想使用单独的实现，您可以将其放入您的活动中：

```
@Override
public Resources getResources() {
    if (mResourcesImpl == null) {
        mResourcesImpl = new ResourcesImpl(super.getResources());
    }
    return mResourcesImpl;
}

class ResourcesImpl extends Resources {
    private Resources mResources;
    private Set<Integer> mActionBarEmbedTabsIds = new HashSet<Integer>();

    ResourcesImpl(Resources resources) {
        super(resources.getAssets(), resources.getDisplayMetrics(), resources.getConfiguration());

        mResources = resources;

        String packageName = getPackageName();
        mActionBarEmbedTabsIds.add(mResources.getIdentifier("abc_action_bar_embed_tabs", "bool", packageName));
        mActionBarEmbedTabsIds.add(mResources.getIdentifier("abc_action_bar_embed_tabs_pre_jb", "bool", packageName));
        mActionBarEmbedTabsIds.add(mResources.getIdentifier("action_bar_embed_tabs", "bool", "android"));
        mActionBarEmbedTabsIds.add(mResources.getIdentifier("action_bar_embed_tabs_pre_jb", "bool", "android"));
        mActionBarEmbedTabsIds.remove(0);
    }

    @Override
    public boolean getBoolean(int id) throws NotFoundException {
        if (mActionBarEmbedTabsIds.contains(id)) {
            return areActionBarTabsEmbed(); // stacked ot embed goes here
        }
        return super.getBoolean(id);
    }
} 
```

# javascript - alert 和 window.alert 有什么区别？

> ID：13459907
> 
> 赞同：41
> 
> 时间：2012-11-19T18:32:10.713
> 
> 标签：javascript

`alert()`和功能有什么区别`window.alert()`？它似乎工作相同。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-19T18:33:33.517

因为`window`是全局对象，你可以`alert`通过它的简写来调用一个：`alert( 'Hello!' );`或者通过专门引用全局对象：`window.alert( 'Hello!' );`

他们是一样的。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-19T18:39:28.743

它们通常是相同的，但是，如果在您的范围内，请参见示例，警报函数被重新定义，那么警报和 window.alert 将不是同一个函数。

```
(function () {
    function alert(test) {
        document.write(test);
    }

    alert("hello page");
   window.alert("hello world");
})() 
```

希望这个例子比我的解释更能说明这个问题。

您还可以使用变量隐藏函数名称并在调用它时获取错误。

```
(function () {
    var alert;
    alert("Why don't you work, silly function?");
})() 
```

# c - 未定义对“WinMain@16”C 错误的引用

> ID：13459912
> 
> 赞同：4
> 
> 时间：2012-11-19T18:32:34.720
> 
> 标签：c, eclipse, eclipse-cdt

我正在使用 Eclipse（C 编程）并且我想出了这段代码，但每次构建它时，我都会收到错误消息，“未定义对 'WinMain@16' 的引用”。我花了两个多小时试图解决这个问题，但我无法弄清楚我的错误在哪里。任何人都可以帮忙吗？

这是代码：

```
#include <stdio.h> 

int main(void)
{
    int input;

    printf("Please enter an integer:\n");
    scanf("%d",&input);
    int temp = input;

    while(input<=temp+10)
    {
        printf("%d ",input);
        input++;
    }

    printf("\n");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T19:11:50.490

当您编译或构建时，Eclipse 不会自动将文件保存到磁盘。但是编译器正在使用磁盘文件。所以也许你只是在添加主函数后没有保存文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:16:46.543

如果您正在编译正确并保存的文件，则必须确保在使用`main`入口点时将子系统目标设置为控制台进行编译。

您可以通过更改生成文件来执行此操作。

如果您不知道如何执行此操作，或者您没有使用 makefile 并且不想更改编译器的参数行，则可以使用此指令：

```
#pragma comment(linker, "/subsystem:console") 
```

`WinMain`通常用于`/subsystem:windows`程序类型，并且当您尝试制作控制台应用程序时，您应该使用`/subsystem:console`和`main`入口点。

再次，确保您在磁盘上编译正确的文件。

# linux - 如何在 bash 提示符中添加图标

> ID：13459913
> 
> 赞同：8
> 
> 时间：2012-11-19T18:32:37.510
> 
> 标签：linux, bash, shell, fedora, ps1

我知道你可以通过编辑 ~/.bashrc 文件中的 PS1 变量来永久编辑 bash 提示符，我的看起来像这样：

```
PS1="\[\e[0;31m\]<HERP(._.)DERP>\[\e[0;0m\]"; 
```

但是你也可以在那里设置一个很小的图像吗？例如，如果我想在 "HERP(._.)DERP" 之前添加一个小美国国旗图标，我可以这样做吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-05-25T20:41:32.783

事实上，是的，你可以。

在最近的 Bash 版本中，至少有 4 个（我可以在 4.2 和 4.3 中做到这一点），您可以使用十六进制渲染表情符号。

使用`echo -e`旗帜。

粘贴[您查找的表情符号](http://emojipedia.org/flag-for-united-states/)并执行 hexdump 以查看其组成：

```
plasmarob ~ $ echo -n ""| hexdump

0000000 f0 9f 87 ba f0 9f 87 b8                        
0000008 
```

然后取第一行并用 \x 转义每个十六进制对：

```
plasmarob ~ $ echo -e 'See? \xf0\x9f\x87\xba\xf0\x9f\x87\xb8'
See? 
```

我实际上将我的修改为：

等离子~⚡

所以，是的，想出一个这样的并尝试将它添加到您的`.bashrc`or`.bash_profile`中。

编辑：SO 或浏览器渲染的某些内容可能已经改变，因为这篇文章中的标志现在呈现为“美国”字符。YMMV，但我认为它仍然可以在指定的 bash 版本中工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-05-22T08:56:01.370

如今，如果您有可识别表情符号的字体，则可以添加表情符号。我想当问题最初发布时，这不是一个容易可行的选择

几年前[我写了这篇关于它的博客文章。](http://beatworm.co.uk/blog/computers/cool-shell-prompts/)

我不知道美国国旗，但`export PS1="\360\237\232\251 > "`在你的提示中得到一面旗帜。

我还编写了一个 shell 工具，使打印 echo 或 shell prompt 的转义更容易一些。这叫[emo](https://github.com/cmstrickland/emo)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T19:59:31.513

距离越近，白旗和黑旗就越多：

```
⚐ → U+2690 ; WHITE FLAG
⚑ → U+2691 ; BLACK FLAG 
```

以上是Unicode字符。你也可以寻找带有标志的字体——我不知道。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T18:34:07.867

抱歉，没有。终端不做图形。

有关您*可以*做什么的完整描述，请参见 bash(1) 手册页的**PROMPTING**部分：

> ### 提示
> 
> 交互执行时，bash 在准备好读取命令时显示主要提示 PS1，在需要更多输入以完成命令时显示辅助提示 PS2。Bash 允许通过插入一些反斜杠转义的特殊字符来自定义这些提示字符串，这些特殊字符解码如下：
> 
> ```
> \a     an ASCII bell character (07)
> \d     the date in "Weekday Month Date" format (e.g., "Tue May 26")
> \D{format}
>        the  format  is  passed to strftime(3) and the result is inserted into the
>        prompt string; an empty format results in a locale-specific time
>        representation. The braces are required
> \e     an ASCII escape character (033)
> \h     the hostname up to the first ‘.’
> \H     the hostname
> \j     the number of jobs currently managed by the shell
> \l     the basename of the shell’s terminal device name
> \n     newline
> \r     carriage return
> \s     the name of the shell, the basename of $0 (the portion following the final
>        slash)
> \t     the current time in 24-hour HH:MM:SS format
> \T     the current time in 12-hour HH:MM:SS format
> \@     the current time in 12-hour am/pm format
> \A     the current time in 24-hour HH:MM format
> \u     the username of the current user
> \v     the version of bash (e.g., 2.00)
> \V     the release of bash, version + patch level (e.g., 2.00.0)
> \w     the current working directory, with $HOME abbreviated with a tilde (uses the
>        value of the PROMPT_DIRTRIM variable)
> \W     the basename of the current working directory, with $HOME abbreviated with a
>        tilde
> \!     the history number of this command
> \#     the command number of this command
> \$     if the effective UID is 0, a #, otherwise a $
> \nnn   the character corresponding to the octal number nnn
> \\     a backslash
> \[     begin a sequence of non-printing characters, which could be used to embed a
>        terminal control sequence into the prompt
> \]     end a sequence of non-printing characters 
> ```
> 
> 命令号和历史号通常是不同的：一个命令的历史号是它在历史列表中的位置，其中可能包括从历史文件中恢复的命令（见下面的HISTORY），而命令号是在序列中的位置在当前 shell 会话期间执行的命令。字符串解码后，通过参数扩展、命令替换、算术扩展和引号删除，取决于 promptvars shell 选项的值（参见下面 SHELL BUILTIN COMMANDS 下 shopt 命令的描述）。

和转义`\e`序列值得特别注意`\[`。`\]`使用这些，您可以插入[ANSI 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)来命令终端更改前景色、背景色、移动光标、擦除屏幕的某些部分，以及执行其他花哨的技巧。

也就是说，例如，您的提示如何更改颜色。`\[\e[0;31m\]`将前景色设置为红色，并将`\[\e[0;0m\]`其重置为默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-07T03:20:52.277

如果您希望能够做到这一点，您可以搜索大量不同的图标。

[https://emojipedia.org/](https://emojipedia.org/)

我从那个网站得到这个。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-19T18:51:28.777

无法在 bash 提示符中添加图标（位图或矢量图形）。

# spring - org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException

> ID：13459914
> 
> 赞同：2
> 
> 时间：2012-11-19T18:32:47.437
> 
> 标签：spring, saxparseexception

我正在做一些教程，我得到了这个错误。本教程是spring、hibernate和maven相关的教程。我附上以下错误：

```
INFO: Loading XML bean definitions from class path resource [applicationContext-mytutorial.xml]
Exception in thread "main" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 12 in XML document from class path resource [applicationContext-mytutorial.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'bean'. One of '{"http://www.springframework.org/schema/beans":meta, "http://www.springframework.org/schema/beans":constructor-arg, "http://www.springframework.org/schema/beans":property, "http://www.springframework.org/schema/beans":lookup-method, "http://www.springframework.org/schema/beans":replaced-method, WC[##other:"http://www.springframework.org/schema/beans"]}' is expected.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:404)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:342)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:310)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:113)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:80)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:123)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:422)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:352)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.mytutorial.App.main(App.java:13)
Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.a: Invalid content was found starting with element 'bean'. One of '{"http://www.springframework.org/schema/beans":meta, "http://www.springframework.org/schema/beans":constructor-arg, "http://www.springframework.org/schema/beans":property, "http://www.springframework.org/schema/beans":lookup-method, "http://www.springframework.org/schema/beans":replaced-method, WC[##other:"http://www.springframework.org/schema/beans"]}' is expected.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:318)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:423)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3188)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:1812)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(XMLSchemaValidator.java:731)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:377)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2756)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:232)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    ... 14 more 
```

这是 applicationContext-mytutorial.xml 文件：

```
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:util="http://www.springframework.org/schema/util" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd 
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-2.0.xsd">

    <bean id="courseService" class="com.mytutorial.CourseServiceImpl" scope="prototype">
        <property name="courseDAO" ref="courseDao" />

    <bean id="courseDao" class="com.mytutorial.CourseDaoImpl" scope="prototype" /> 
</beans> 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:41:34.450

您的 XML 格式不正确，您忘记关闭第一个 bean 定义：

```
<bean id="courseService" class="com.mytutorial.CourseServiceImpl" scope="prototype">
    <property name="courseDAO" ref="courseDao" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T04:19:45.843

就我而言，这个 xml 模式对我有用

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!--  Your code here -->
    <!--  Your code here -->
</beans> 
```

我试图让 Maven 帮助解决一个项目。这是在依赖方面找到的，但是，XML 并不完全正确。（对于带有简单依赖注入的 helloworld 程序）

# python - 如何将文件列表复制到另一个文件中？

> ID：13459916
> 
> 赞同：2
> 
> 时间：2012-11-19T18:32:51.520
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中连接文件？](https://stackoverflow.com/questions/1001538/how-do-i-concatenate-files-in-python)

```
def copy_file(file_name,copy_file_name,copies):
    i=0
    a=open(file_name,'r')
    f=open(copy_file_name,'w')
    for line in a:
        while i<copies:
            f.write(line)
            i+=1
    a.close()
    f.close()
    return 
copy_file("D:\student\example2.txt","D:\student\copy_file_name.txt",3) 
```

我需要将一个文本文件复制 3 次到另一个文件，并且循环在第一行之后停止:(

```
def merge_file(list,file_name):
    for i in range(len(list)):
        a=open(list[i],'r')
        f=open(file_name,'w')
        f.write(list[i])
    f.close
    a.close
    return
merge_file([("D:\student\example2.txt"),("D:\student\example3.txt")],"D:\student\copy_file_name.txt") 
```

我需要将文件列表复制到一个文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:06:51.817

如果我理解正确：

```
import fileinput
with open('output.txt') as fout:
    fout.writelines(fileinput.input(your_list)) 
```

这是“从指定的文件名中取出每一行`your_list`并将它们写入`output.txt`”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:38:36.797

您想使用 追加文件，`open(filename, 'a')`另请参阅：[如何追加到文件？](https://stackoverflow.com/questions/4706499/how-do-you-append-to-file-in-python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T19:42:51.413

使用[shutil.copyfileobj](http://docs.python.org/dev/library/shutil.html#shutil.copyfileobj)为您制作副本。请注意，这种方法完全不知道输入文件中的任何编码问题和特定于平台的行分隔符。将复制纯字节流。

```
import shutil

# the file to copy to
outfname = "D:\student\copy_file_name.txt"

# the files to copy from
infnames = ["D:\student\example2.txt", "D:\student\example3.txt"]

# the copy procedure
with open("outfile", 'w') as outfile:
    for fname in infnames:
        shutil.copyfileobj(open(fname, 'rb'), outfile) 
```

如果您想将单个文件的内容复制给定次数，只需`infnames`相应地制作：

```
# the file to copy from n_repetitions times
infnames = ["D:\student\example2.txt"] * n_repetitions

# same as above 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T18:50:14.930

要将一个文件的内容复制到另一个文件三次，您可以执行以下操作：

```
with open('outfile.txt','w') as outFile:
    for _ in range(3):
        with open('infile.txt','r') as inFile:
            for line in inFile:
                outFile.write(line) 
```

要将文件列表的内容复制到另一个文件中，您可以执行以下操作：

```
def merge_file(fileList, outFileName):
    with open(outFileName, 'w') as outFile:
        for fileName in fileList:
            with open(fileName, 'r') as inFile:
                for line in inFile:
                    outFile.write(line) 
```

这两个都未经测试，但它们应该可以工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-19T19:53:39.567

您对 merge_file 的调用正在传递 len 1 的列表，其中单个项目是 2 元组。

而不是你所拥有的：

```
merge_file([("D:\student\example2.txt"),("D:\student\example3.txt")],"D:\student\copy_file_name.txt") 
```

试试这个（我认为这就是你的意思：

```
merge_file(["D:\student\example2.txt","D:\student\example3.txt"],"D:\student\copy_file_name.txt") 
```

我希望你能看到区别。如果您不熟悉 python 以及列表和元组，我建议您进行一些研究：[http ://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-范围](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)

# c# - 服务堆栈上的 SSL

> ID：13459918
> 
> 赞同：7
> 
> 时间：2012-11-19T18:32:54.947
> 
> 标签：c#, mono, servicestack

Mono 上的服务堆栈是否支持 SSL？

我只能访问 mac，我在这里找到的说明要求您使用 windows 工具创建 pvk 文件：http: [//joshua.perina.com/geo/post/using-ssl-https-with-mono- httplistener](http://joshua.perina.com/geo/post/using-ssl-https-with-mono-httplistener)

该站点作为 linux 守护进程托管，使用 upstart 脚本来保持服务器正常运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T10:45:59.653

我最终在我的应用程序主机中编写了一些代码来启用对服务堆栈的 SSL 支持，它在幕后使用了 HttpListener。以下代码将为控制台应用程序的服务堆栈启用 SSL：

```
public class AppHost : AppHostHttpListenerBase
{
    public AppHost() : base("Service", typeof(AppHost).Assembly) 
    {
    }

    public override void Configure(Funq.Container container)
    {
        Plugins.Add(new RazorFormat());
    }

    static void AddP12 (string filename, string password, ushort port)
    {
        string dirname = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
        string path = Path.Combine(dirname, ".mono");
        path = Path.Combine(path, "httplistener");
        if (!Directory.Exists(path))
        {
            Console.WriteLine("Creating directory: " + path);
            Directory.CreateDirectory(path);
        }
        X509Certificate2 x509 = null;
        try {
            x509 = new X509Certificate2 (filename, password);
        } catch (Exception e) {
            Console.Error.WriteLine ("error loading certificate [{0}]", e.Message);
            return;
        }

        string target_cert = Path.Combine (path, String.Format ("{0}.cer", port));
        if (File.Exists(target_cert)) 
        {
            Console.Error.WriteLine ("error: there is already a certificate for that port.");
            return;
        }
        string target_pvk = Path.Combine (path, String.Format ("{0}.pvk", port));
        if (File.Exists(target_pvk)) {
            Console.Error.WriteLine ("error: there is already a certificate for that port.");
            return;
        }

        using (Stream cer = File.OpenWrite (target_cert)) 
        {
            byte[] raw = x509.RawData;
            cer.Write (raw, 0, raw.Length);
        }

        PrivateKey pvk = new PrivateKey();
        pvk.RSA = x509.PrivateKey as RSA;
        pvk.Save(target_pvk);           
    }

    public static void Main(string[] args)
    {
        string listeningOn = string.Empty;
        if (args.Length == 1)
            listeningOn = "http://*:" + args[0] + "/";
        else if (args.Length == 3)
        {
            listeningOn = "https://*:" + args[0] + "/";
            AddP12(args[1], args[2], Convert.ToUInt16(args[0]));
        }
        else
        {
            Console.WriteLine("Usage: [port] [p12 certificate] [p12 password]");
            return;
        }
        AppHost appHost = new AppHost();
        appHost.Init();
        appHost.Start(listeningOn);
        Console.WriteLine("Service Stack Server started at {0}, listening on {1}", DateTime.Now, listeningOn);
        while (true) System.Threading.Thread.Sleep(100);
    }
} 
```

# c++ - 在对象上使用 push_back，c++

> ID：13459919
> 
> 赞同：0
> 
> 时间：2012-11-19T18:32:57.083
> 
> 标签：c++, vector

我对 push_back 不太了解。
当我在对象上使用 push_back 时，它是否使用对象的
复制构造函数复制其所有元素？（如果对象没有复制构造函数怎么办？）

另一个问题：

```
vector<Course*> cs;
Course* c = new CScourse(); //CScourse inherits Course
cs.push_back(c); 
```

如果我使用

```
delete c; 
```

它会删除我刚刚推入向量的内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:36:31.557

是的，每个对象都被复制到一个`vector`. 如果`vector`必须增长，每个元素都将被复制到新位置。在您的情况下，您正在存储指向`Course`的指针，因此只有指针被复制，实际对象保持不变。

如果是你`delete c;`，它确实会删除`c`你在你的`vector`. `vector`仍然包含一个指向对象的指针，`c`这被认为是一个悬空指针。您通常会`vector`在删除之前将其从您的帐户中删除。

# css - CSS3 动画不起作用是显示属性设置为内联

> ID：13459920
> 
> 赞同：1
> 
> 时间：2012-11-19T18:33:02.653
> 
> 标签：css, css-transitions, css-animations

我一直在玩这个演示：[http](http://ademilter.com/lab/liffect/) ://ademilter.com/lab/liffect/（选择：zoomIn）

```
ul[data-liffect="zoomIn"] li {
  opacity: 0;
  position: relative;
  display:inline-block;
  margin:0;
  padding:0;
  -webkit-animation: zoomIn 600ms ease both;
  -webkit-animation-play-state: paused;
  -moz-animation: zoomIn 600ms ease both;
  -moz-animation-play-state: paused;
  -o-animation: zoomIn 600ms ease both;
  -o-animation-play-state: paused;
  animation: zoomIn 600ms ease both;
  animation-play-state: paused;
} 
```

然后我尝试自己重现这种效果，我发现如果列表项属性设置`inline`为而不是`inline-block`.

如果显示属性是`inline`它只会淡入。

有趣的是，如果您使用开发面板查看原始站点，演示中的列表项没有将 display 属性设置为`inline-block`.

所以我必须制作我的列表项`inline-block`，但这给了我元素的边距。

有没有办法解决？

[我在这里](http://jsfiddle.net/iki_xx/mDYDb/)挑出了动画效果。

如果元素的 display 属性设置为 ，您可以为元素的比例设置动画`inline`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:15:36.737

是的，有办法解决它。您可以`inline-block`通过键入不带空格的元素来删除您使用的空间。

像这样的东西：

```
<ul data-liffect="zoomIn"><li><img src="http://cambelt.co/100x100"></li><li><img src="http://cambelt.co/100x100"></li><li><img src="http://cambelt.co/100x100"></li><li><img src="http://cambelt.co/100x100"></li><li><img src="http://cambelt.co/100x100"></li><li><img src="http://cambelt.co/100x100"></li></ul>​ 
```

这样做的原因是因为你看到的空格实际上不是 a `margin`，它是一个空格字符，就像你在输入的单词之间得到的一样。内联块以相同的方式呈现这些。另一种解决方法可能是使用该`float`属性。

这是一个[演示。](http://jsfiddle.net/mDYDb/3/)

希望有帮助！

# php - 从现有选项中预选选择或多选选项，而不是添加和选择新选项

> ID：13459921
> 
> 赞同：0
> 
> 时间：2012-11-19T18:33:02.800
> 
> 标签：php, mysql, select, fetch, multi-select

此代码从数据库中检索并显示客户的帐户信息，并预先选择与其信息匹配的值。

问题在于，它不是从现有的 Select 或 Multi-Select 选项中进行选择，而是添加并选择具有相关值的新选项。如何更正它以便从现有选项中进行选择？

```
<option selected="selected" value="<?php echo $rows['notifications']; ?>"><?php echo $rows['notifications']; ?></option> 
```

完整的代码是：

```
<?php     
$result = mysql_query("SELECT * FROM customer_info WHERE customer_info.user_id=$user_id ") or die(mysql_error());
$row = mysql_fetch_array($result );
?>

<label>Notifications:</label><select name="notifications[]" class="multi" multiple="multiple" style="width:10em;">
<option selected="selected" value="<?php echo $rows['notifications']; ?>"><?php echo $rows['notifications']; ?></option>
<option value="New_Items">New items</option>
<option value="Sale_Items">Sale items</option>                        
<option value="Profile_Matches">Items matching my profile</option>
</select>

<label>Gift Program:</label>
<select name="gift_privacy" style="width:20em;">
<option selected="selected" value="<?php echo $rows['gift_privacy']; ?>"><?php echo $rows['gift_privacy']; ?></option>
<option value="Standard">Standard settings</option>
<option value="Gift_ID_Req">Require program ID</option>
<option value="Not_Enrolled">Do not enroll</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:38:35.497

```
<label>Gift Program:</label>
<select name="gift_privacy" style="width:20em;">
   <option <?php if($rows['notifaction] === "Standard") echo 'selected="selected'; ?> value="Standard">Standard settings</option>
   <option <?php .... ?> value="Gift_ID_Req">Require program ID</option>
   <option <?php .... ?> value="Not_Enrolled">Do not enroll</option>
</select> 
```

# .net - 使用多个 PropertyPlaceholderConfigurers 的 Spring.NET 不起作用

> ID：13459922
> 
> 赞同：3
> 
> 时间：2012-11-19T18:33:06.483
> 
> 标签：.net, spring, properties, configuration-files

我正在尝试使用两个属性占位符配置器，其中一个用于检索 base64 解码的值。我遇到的问题是其中只有一个正在将属性加载到名称/值集合中。哪一个取决于我在 XML 中放置它们的顺序（并且在切换它们时我确实将第一个设置为 ignoreUnresolvable ）。

这是配置的样子：

```
 <object id="propertyConfigurer" type="Spring.Objects.Factory.Config.PropertyPlaceholderConfigurer">
    <property name="locations">
      <list>
        <value>file://~Database.config</value>
      </list>
    </property>
    <property name="configSections">
      <list>
        <value>database</value>
      </list>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="true" />
  </object>

  <object id="encodedPropertyConfigurer" type="MyProject.Config.EncodedPropertyConfigurer">
    <property name="locations">
      <list>
        <value>file://~Database_auth.config</value>
      </list>
    </property>
    <property name="configSections">
      <list>
        <value>database_auth</value>
      </list>
    </property>
    <property name="ignoreUnresolvablePlaceholders" value="false" />
  </object> 
```

我扩展了 PropertyPlaceholderConfigurer，像这样覆盖虚拟方法：

```
public class EncodedPropertyConfigurer : PropertyPlaceholderConfigurer
{
    protected override string ResolvePlaceholder(string placeholder, System.Collections.Specialized.NameValueCollection props)
    {
        return System.Text.Encoding.ASCII.GetString(Convert.FromBase64String(base.ResolvePlaceholder(placeholder, props)));            
    }
} 
```

同样，根据我将它们放在 Web.config 中的顺序，只有一个文件被加载到 Name/Value 集合中。粘贴时，它将使用encodedPropertyConfigurer（例如，我会在集合中看到“用户名”和“密码”，但看不到连接字符串。如果我颠倒顺序，我会看到“connectionString”，但看不到用户名或密码。）我做错了什么？文档说支持多个 PropertyPlaceholderConfigurer，只是要小心 ignoreUnresolvable 设置。请注意，我使用两个实例作为 Spring PropertyPlaceholderConfigurer（而不是我的扩展类）进行了测试，并且发生了相同的行为 - 只有一个被加载到列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:07:59.877

与此相关：[https ://jira.springsource.org/browse/SPR-6428](https://jira.springsource.org/browse/SPR-6428)

为其他 PPC 指定不同的占位符前缀/后缀是可行的，但并不理想。像这样：

```
<!--  DB Properties (non-encoded) file configurer -->
  <object name="propertyConfigurer" type="Spring.Objects.Factory.Config.PropertyPlaceholderConfigurer">
      <property name="configSections" value="database"/>
      <property name="ignoreUnresolvablePlaceholders" value="true" />
  </object>

  <!--  DB Properties (encoded) file configurer -->
  <object name="encodedPropertyConfigurer" type="MyProject.Config.EncodedPropertyConfigurer">
    <property name="configSections" value="database_auth"/>
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="placeholderPrefix" value="$[" />
    <property name="placeholderSuffix" value="]" />
  </object> 
```

然后只需确保要从第二个检索到的那些与 $[] 一起使用，而不是默认的 ${}。

# c++ - 在构造和销毁期间调用虚拟方法

> ID：13459927
> 
> 赞同：1
> 
> 时间：2012-11-19T18:33:23.173
> 
> 标签：c++, inheritance, virtual-functions

在构造和销毁期间调用虚拟方法会导致编译器错误？我听说这样做很危险。

我知道如果我有一个`Class Base`定义虚拟方法的方法`foo()`，那么 的解析在 的所有子类中`foo()`都是**动态**`Base`的。因此，如果子类`Derived`覆盖`foo()`then`Derived::foo()`被调用。那么为什么在构造/销毁期间调用*虚方法会使编译器感到困惑呢？*

从构造函数和外部调用它们有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:37:17.577

在构造过程中`Base()`，派生类还没有被初始化，并且还没有真正存在。当您调用虚拟方法时，您的调用将转到`Base::foo()`. 这不一定是错误的，但通常是出乎意料的，因此普遍禁止它。

同样在销毁过程中，Derived 在`~Base()`被调用之前就被销毁了，所以再次调用虚拟方法会转到`Base::foo()`，这又是经常出乎意料的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T18:39:35.267

尝试运行此示例：

```
struct base {
   virtual int f() const { return 0; }
   base() { std::cout << f() << "\n"; }
   ~base() { std::cout << f() << "\n"; }
};
struct derived : base {
   const int value;
   derived(int v) : value(v) {}
   virtual int f() const { return value; }
};
derived d(100);       // What should this print? 
```

问题是，当基类型的构造函数正在运行时，对象的类型仍然是`base`，而不是`derived`。Dispatch 不会命中*final-overrider*（从用户的角度来看，它只创建了一个`derived`对象）。同样的情况也发生在破坏中。

# jquery - 如何告诉 jQuery 内容可编辑的 div 已更新

> ID：13459928
> 
> 赞同：2
> 
> 时间：2012-11-19T18:33:24.643
> 
> 标签：jquery, html, contenteditable

我想使用 jQuery 选择已添加到 HTML5 内容可编辑 div 的项目。它现在不起作用，因为加载页面时该项目不存在。**如何告诉 jQuery div 已更新？**

请参阅此 jsfiddle 以获取测试代码：http: [//jsfiddle.net/kthornbloom/sjHYQ/](http://jsfiddle.net/kthornbloom/sjHYQ/)

```
$(document).ready(function() {

<!-- This wont work on an image dragged into the div after page load -->
$('#editor img').click(function(){
    $(this).fadeOut();
});

});​ 
```

我已经看到了有关此的其他问题，但似乎没有一个适用于内容可编辑的 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:41:52.547

尝试：

```
$('#editor').on('click', 'img', function() {
    $(this).fadeOut();
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/sjHYQ/1/)**

由于您实际上是在绑定一个动态元素，因此您需要使用`.on()`来委托元素上的单击事件，`#editor`因为加载页面时编辑器 div 中没有图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:37:20.073

您需要使用[.on() JQuery 函数](http://api.jquery.com/on/)将事件附加到动态创建的元素

这是一个示例（我使用主体作为主要容器，但您需要更具体）：

```
$("#editor").on({
    click: function (event) {    
        console.log('test')
       $(this).fadeOut();
    }
    },
    "img"
); 
```

这是小提琴[http://jsfiddle.net/sjHYQ/2/](http://jsfiddle.net/sjHYQ/2/)

# c - 结构功能

> ID：13459932
> 
> 赞同：-1
> 
> 时间：2012-11-19T18:33:33.300
> 
> 标签：c

我需要编写一个函数来读取用户的输入并将其存储到结构中。在c。

```
typedef struct {
   float real, imag;
} complex_t;

complex_t read_complex(void)
{

} 
```

我应该如何扫描输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T18:44:19.547

```
#include < stdio.h >

typedef struct
{
  int re;// real part  
  int im;//imaginary part
} complex;

void add(complex a, complex b, complex * c)
{
  c->re = a.re + b.re;
  c->im = a.im + b.im;
}

void multiply(complex a, complex b, complex * c)
{
  c->re = a.re * b.re - a.im * b.im;
  c->im = a.re * b.im + a.im * b.re;
}

main()
{
  complex x, y, z;
  char Opr[2];

  printf("  Input first operand. \n");
  scanf("%d %d", &x.re, &x.im);
  printf("  Input second operand. \n");
  scanf("%d %d", &y.re, &y.im);
  printf("  Select operator.(+/x) \n");
  scanf("%1s", Opr);

  switch(Opr[0]){
    case '+':
          add(x, y, &z); 
          break;
    case 'x':
          multiply(x, y, &z);
          break;
    default:
      printf("Bad operator selection.\n");
      break;
  }
  printf("[%d + (%d)i]", x.re,x.im);
  printf(" %s ", Opr);
  printf("[%d + (%d)i] = ", y.re, y.im);
  printf("%d +(%d)i\n", z.re, z.im);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:45:01.337

你可以轻松做到。正如您提到的函数签名，您应该尝试以下操作：

```
complex_t read_complex(void)
{
    complex_t c;
    float a,b;
    printf("Enter real and imaginary values of complex :");
    scanf("%f",&a);
    scanf("%f",&b);
    c.real=a;
    c.imag=b;
    return c;
}

int main()
{
complex_t cobj;
cobj=read_complex(void);
printf("real  : %f  imag : %f",cobj.real,cobj.imag);
return 0;
} 
```

# java - 比较数组元素的代码错误

> ID：13459933
> 
> 赞同：0
> 
> 时间：2012-11-19T18:33:36.787
> 
> 标签：java, arrays

我是一名学生程序员，所以从 9 月才开始学习。本周有一项任务是从名为 datingdata.txt 的文本文件中读取数据，并为将每个人的信息存储在数组位置中的信息创建一个类。数据格式为“George Robson M 38 11000”，其中名称最多为 20 个字符。然后我们必须比较每个人的匹配情况，他们是异性，年龄在 5 岁以内，并且至少有 3 个共同兴趣（1 表示他们对该活动感兴趣，0 表示不感兴趣）。我已经让它在最后的嵌套 for 循环中工作，并且感觉我缺少括号，因为它不断出现无法找到符号的错误。有什么帮助吗？

```
 import java.io.*;
    import static java.lang.Math.*;
    class PersonInfo
   {
    String name;
    char sex;
    int age;
    String interest;

    public void setname (String anyName)
       { name = anyName; }

    public void setsex (char anysex)
       { sex = anysex; }

    public void setage (int anyage)
       { age = anyage; }

    public void setinterest (String anyinterest)
       { interest = anyinterest; }

    public String getName ()
       { return name; }

    public char getsex ()
       { return sex; }

    public int getage ()
    {return age;  }

    public String getinterest ()
    {return interest;    }

    void print ()
       {
        System.out.println(name + " " + sex + " " + age + " " + interest);
       }

    PersonInfo (String name, char sex, int age, String interest)
       {
        this.name = name;
        this.sex = sex;
        this.age = age;
        this.interest = interest;
       }
    }

    class Practical6
      {
    public static void main(String[] args) throws IOException
       {
        //read in file
        BufferedReader fileInput;
        fileInput = new BufferedReader(new FileReader("datingdata.txt"));

        //create an array for storing each persons information
        PersonInfo[] People = new PersonInfo[20];

        //fields to use in creating PersonInfo
        String name;
        char sex;
        int age;
        String interest;

        int i = 0;
        int count = 0;

        //read in each line and store in an array
        while (fileInput.ready ())                                  
           {                                                    
            String information;
            information = fileInput.readLine ();                                
           // System.out.println (information);
            name = information.substring(0,20);
            sex = information.charAt(20);
            age = Integer.parseInt(information.substring(22,24));   
            interest = information.substring(25,30);
            People[i]= new PersonInfo (name, sex, age, interest);
            i++;                                
           } 
        fileInput.close(); 

        //pring out the array

        for (int j = 0; j < People.length; j++)
            People[j].print();

        //go through each element of array and compare to another record for a match
        for (int k = 0; k < People.length; k++)
            for (int l = 0; l <People.length; l++)
            if (People[k].getsex() != People[l].getsex())
                if(math.abs(People[k].getage()-People[l].getage()) <=5)
                {for(int m = 0; m < 5; m++)
                    if((People[k].getinterest.charAt(m)=='1')  && (People[l].getinterest.charAt(m)=='1'));
                            count++;
                            if(count==3)
                                System.out.println(People[k].getname + " is a match with " + People[l].getname);
                }

            }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T04:24:31.880

```
for (int k = 0; k < People.length; k++)
    for (int l = 0; l <People.length; l++)
    if (People[k].getsex() != People[l].getsex())
        if(Math.abs(People[k].getage()-People[l].getage()) <=5)
        {for(int m = 0; m < 5; m++)
            if((People[k].getinterest().charAt(m)=='1')  && (People[l].getinterest().charAt(m)=='1'));
                    count++;
                    if(count==3)
                        System.out.println(People[k].getName() + " is a match with " + People[l].getName());
        } 
```

一些语法错误： 1\. Math.abs() 而不是 math.abs() 2\. getinterest() 而不是 getinterest 3\. getName() 而不是 getname

# jquery - 使用远程数据和格式化在 jqgrid 中进行过滤

> ID：13459934
> 
> 赞同：0
> 
> 时间：2012-11-19T18:33:40.423
> 
> 标签：jquery, jqgrid

我需要在 jqgrid 中本地过滤数据而不使用内置 UI。[我在帖子jqGrid Filtering Records](https://stackoverflow.com/questions/5749723/jqgrid-filtering-records)中遵循了 Oleg 给出的答案。它对我的设置进行了一些更改，就像一个魅力。但是，我似乎无法让它适用于记录格式化的字段。jqgrid 数据是远程的。

[从jqGrid Filtering Records](https://stackoverflow.com/questions/5749723/jqgrid-filtering-records)发布代码示例，因为这几乎是我所拥有的：

```
$("#search").click(function() {
var searchFiler = $("#filter").val(), grid = $("#list"), f;

if (searchFiler.length === 0) {
    grid[0].p.search = false;
    $.extend(grid[0].p.postData,{filters:""});
}
f = {groupOp:"OR",rules:[]};
f.rules.push({field:"name",op:"cn",data:searchFiler});
f.rules.push({field:"note",op:"cn",data:searchFiler});
grid[0].p.search = true;
$.extend(grid[0].p.postData,{filters:JSON.stringify(f)});
grid.trigger("reloadGrid",[{page:1,current:true}]);
}); 
```

就我而言，“名称”字段在 jqgrid 中格式化：

```
{name:"name", index:"name", width:250, align:'left',
  formatter: function(cellvalue, options, rowObject)
{
  return rowObject.Data[0]['userName'];
}
 },
 ...
 jsonReader : {
        repeatitems:false,
         root: 'rows',
         userdata: 'rows'
      },
loadonce: true,      
viewrecords: true,
autowidth: true,
multiselect: false,
height: 500,    
rowNum: 999,
subGrid: true, 
```

我们对后端进行一次查询，并将数据存储在“行”中，以便在子网格中显示。

非常感谢任何指针。

谢谢，

阿莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:57:21.563

我认为您不需要在这种情况下使用自定义格式化程序。我想你可以使用`jsonmap`. 可能`jsonmap: "Data.0.userName"`会想要你需要的。或者，您可以使用`jsonmap`as 函数（如此[处](https://stackoverflow.com/a/10731526/315935)或[此处](https://stackoverflow.com/search?q=user:315935%20%2bjsonmap%20%2barray)）。

通常，您应该始终将[unformatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter#unformatting)与[自定义 formatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)一起定义。这可能是您当前问题的原因。

# java - 处理朴素贝叶斯分类器中的缺失属性

> ID：13459935
> 
> 赞同：8
> 
> 时间：2012-11-19T18:33:40.190
> 
> 标签：java, machine-learning, data-mining, bayesian, classification

我正在编写一个朴素贝叶斯分类器，用于根据 WiFi 信号强度执行室内房间定位。到目前为止，它运行良好，但我对缺少的功能有一些疑问。这种情况经常发生，因为我使用 WiFi 信号，而 WiFi 接入点根本不是随处可用。

**问题 1**：假设我有两个类，Apple 和 Banana，我想将测试实例 T1 分类如下。

![在此处输入图像描述](../Images/44f314bfd2baeae327745c1f412b3553.png)

我完全理解朴素贝叶斯分类器的工作原理。下面是我在[维基百科](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)关于分类器的文章中使用的公式。我正在使用统一的先验概率*P(C=c)*，所以我在我的实现中省略了它。

![在此处输入图像描述](../Images/a69a00aa5941979d005dbdf8178e1c1c.png)

现在，当我计算等式的右侧并遍历所有类条件特征概率时，我使用哪一组特征？测试实例 T1 使用了特征 1、3 和 4，但是这两个类并不具备所有这些特征。因此，当我执行循环来计算概率积时，我看到了几个关于循环内容的选择：

1.  循环遍历训练中所有特征的并集，即特征 1、2、3、4。由于测试实例 T1 没有特征 2，因此使用人为的微小概率。
2.  仅循环测试实例的特征，即 1、3 和 4。
3.  循环遍历每个类可用的功能。要计算“Apple”的类别条件概率，我将使用特征 1、2 和 3，而对于“Banana”，我将使用 2、3 和 4。

我应该使用以上哪个？

**问题 2**：假设我想对测试实例 T2 进行分类，其中 T2 具有两个类中都没有的特征。我正在使用日志概率来帮助消除下溢，但我不确定循环的细节。我正在做这样的事情（在类似 Java 的伪代码中）：

```
Double bestLogProbability = -100000;
ClassLabel bestClassLabel = null;

for (ClassLabel classLabel : allClassLabels)
{
    Double logProbabilitySum = 0.0;

    for (Feature feature : allFeatures)
    {
        Double logProbability = getLogProbability(classLabel, feature);

        if (logProbability != null)
        {
            logProbabilitySum += logProbability;
        }
    }

    if (bestLogProbability < logProbability)
    {
        bestLogProbability = logProbabilitySum;
        bestClassLabel = classLabel;
    }
} 
```

问题是，如果没有一个类具有测试实例的特征（示例中的特征 5），那么 logProbabilitySum 将保持为 0.0，导致 bestLogProbability 为 0.0，或线性概率为 1.0，这显然是错误的。有什么更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:37:23.477

对于朴素贝叶斯分类器，等式的右侧应该遍历所有属性。如果您拥有稀疏填充的属性，通常的处理方法是使用概率的**m 估计**，该概率使用**等效样本量**来计算您的概率。当您的训练数据缺少属性值时，这将防止类条件概率变为零。对上面的两个粗体字词进行网络搜索，您会发现大量关于 m-estimate 公式的描述。描述这一点的一个很好的参考文本是Tom Mitchell 的[机器学习](https://rads.stackoverflow.com/amzn/click/com/0070428077)。基本公式是

P_i = (n_i + m*p_i) / (n + m)

n_i 是属性值为 f_i 的训练实例数，n 是训练实例数（使用当前分类），m 是等效样本大小，p_i 是 f_i 的先验概率。如果您设置 m=0，这只会恢复为标准概率值（可能为零，因为缺少属性值）。随着 m 变得非常大，P_i 接近 p_i（即概率由先验概率支配）。如果你没有使用的先验概率，只需将其设为 1/k，其中 k 是属性值的数量。

如果您使用这种方法，那么对于训练数据中不存在任何属性的实例 T2，结果将是训练数据中最常出现的类别。这是有道理的，因为训练数据中没有相关信息可以用来做出更好的决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T12:19:12.703

我很想简单地忽略培训中*所有*课程中没有的任何功能。如果您选择不这样做，您实际上是在对数据产生幻觉，然后将其与分类步骤中真正存在的数据同等对待。所以我对问题 1 的简单回答是简单地根据特征 3 做出决定（你只是没有足够的信息来做其他事情）。这是@bogatron 提到的 m 估计所做的一部分。

对于缺少某些特征的训练课程，有一个更复杂的答案，但这需要更多的工作。给定训练数据，m 估计实际上是 p_i 上的后验分布的点估计（在你的情况下是 mu_i，sigma_i），它由 p_i 上的先验（分数 n_i / n）和似然函数 p 组成（数据| p_i）。在您没有观察到数据点的情况下，您基本上可以恢复到该特征的预测分布的先验。

现在，您如何进行先验估计？好吧，如果问题中的类数相对于缺少某些特征值的类数而言很少，您可以从确实有数据的类中推断出先验的参数，并考虑缺失类的预测分布数据只是这个先验（对于具有数据的类，您的预测分布是后验）。对您有用的指示是，由于您似乎假设您的数据是正态分布的（或至少以它们的均值和标准差为特征），为了共轭，均值的先验也应该是正常的。我可能想避免对标准偏差的先验分布进行推断，因为如果您是新手，这有点繁琐。

但是请注意，这仅在您有足够多的类具有对该特征的观察值且分数缺失值很小的情况下才有意义。特别是，在您的示例中，您只有一个带有观察值的类，因此您可以为“香蕉”类中的特征一做的最好的事情是假设 mu_1 的不确定性由以“Apple”为中心的分布表示mu_1 具有一些任意方差。或者你可以假设他们的 mus 是平等的，在这种情况下，它不会对决定产生影响，你也可以忽略它！

因此，不幸的是，您的问题 2 的答案是您的代码正在做正确的事情。如果你的新测试实例只有在训练中从未观察到的特征，你怎么希望为它选择一个类？你只能根据先验选择。

# java - 获取jtable中勾选复选框的行值

> ID：13459936
> 
> 赞同：2
> 
> 时间：2012-11-19T18:33:45.327
> 
> 标签：java, swing, checkbox, jtable, abstracttablemodel

```
class TableModel extends AbstractTableModel {

        Object rowData[][] = DataAccess.getSentences();
        String columnNames[] = {"Category", "Sentences", "Boolean"};

        public int getColumnCount() {
            return columnNames.length;
        }

        public String getColumnName(int column) {
            return columnNames[column];
        }

        public int getRowCount() {
            return rowData.length;
        }

        public Object getValueAt(int row, int column) {
            return rowData[row][column];
        }

        public Class getColumnClass(int column) {
            return (getValueAt(0, column).getClass());
        }

        public void setValueAt(Object value, int row, int column) {
            rowData[row][column] = value;
        }

        public boolean isCellEditable(int row, int column) {
            return (column >= 2);
        }
    } 
```

示例场景：

标题：类别、句子、布尔值

第 1 行：苹果 | 这是一个苹果| 复选框

第 2 行：猫 | 这是一只猫| 复选框

当我勾选第一行时。它将 System.out.println() 中的“苹果”和“这是一个苹果”。

如果您有很多时间，如果有代码片段，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T06:53:36.983

**选中复选框时，JTable 获取 cehckbox 值：-**

```
table.getModel().addTableModelListener(new TableModelListener() {
              @Override
              public void tableChanged(TableModelEvent e) {
                   for(int i=0;i<table.getModel().getRowCount();i++)
                      {
                        if ((Boolean) table.getModel().getValueAt(i,0))
                        {  
                          System.out.println(">\t"+table.getSelectedRow());
                          break;
                        }
                     }     
                  }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T05:42:08.400

[`CheckABunch`](https://stackoverflow.com/a/4528604/230513)是一个可以帮助您入门的示例：

*   如果`getColumnClass()`返回`Boolean.class`一个列，默认的[渲染器和编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)将是一个`JCheckBox`.

*   对于`AbstractTableModel`，您的实现`setValueAt()`必须触发适当的事件，如此处和[此处](https://stackoverflow.com/a/11179669/230513)[所示](https://stackoverflow.com/a/11259671/230513)。

*   添加一个以接收模型触发的事件，如此[处](https://stackoverflow.com/a/7137801/230513)`TableModelListener`所示。

![图片](../Images/4af0c4a03e647eca4d80ae216ee8f432.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-05T06:23:40.113

要获取表格整行数据，请为 JTable 添加下面的 addTableModelListener。

```
table.getModel().addTableModelListener(new TableModelListener() {
            @Override
            public void tableChanged(TableModelEvent e) {
                for (int i = 0; i < table.getModel().getRowCount(); i++) {
                    if ((Boolean) table.getModel().getValueAt(i, 0)) {

                        if (table.getSelectedRow() != -1) {
                            int column = 1;
                            int row = table.getSelectedRow();
                            System.out.println("to get one cell Data:\t"
                                    + table.getModel().getValueAt(row, column).toString());
                            System.out.println("To get entire row data:\t"
                                    + model.getDataVector().elementAt(table.getSelectedRow()));
                            break;
                        }
                    }
                }
            }
        }); 
```

# ruby - 安装 Ruby 调试 IDE Gem

> ID：13459937
> 
> 赞同：2
> 
> 时间：2012-11-19T18:33:50.007
> 
> 标签：ruby, xcode, gem, aptana3

我正在尝试安装 ruby​​-debug-base 但似乎有问题找到我的 Xcode 4.5.2 命令行工具的路径？

看起来错误是由我在此处安装的命令行工具引起的： **/usr/bin/xcodebuild**

不在这里： **/Developer/usr/bin/xcodebuild**

有没有人遇到过这个路径问题？我该如何解决？我确实使用 Xcode 进行 iOS 开发，它运行良好。

谢谢！

```
admin$ sudo gem install ruby-debug-base      

Building native extensions.  This could take a while...
ERROR:  Error installing ruby-debug-base:
ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
creating Makefile

make
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common   -c trace_nums.c

sh: /Developer/usr/bin/xcodebuild: No such file or directory
/Developer/usr/bin/xcodebuild fails with 32512 - Unknown error: 32512

make: *** [trace_nums.o] Error 69

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/linecache-0.46 for inspection.

Results logged to /Library/Ruby/Gems/1.8/gems/linecache-0.46/ext/gem_make.out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:00:46.387

我通过转到

Xcode > Preferences > Downloads中的“Locations”选项卡解决了这个问题

![在此处输入图像描述](../Images/b5eec14d20d2817b210d0b30d577ab62.png)

到达那里后，我注意到“命令行工具”的下拉框没有选择 Xcode 版本，并且下拉框旁边有一个小警报图标。

单击下拉框后，我选择了作为下拉选项提供的唯一版本（4.5.2）。

然后我不得不从命令行接受 Xcode 最终用户协议，然后一切都很好。

**sudo xcodebuild -license**

# matlab - 查找和替换元胞数组中的单词

> ID：13459938
> 
> 赞同：1
> 
> 时间：2012-11-19T18:33:53.983
> 
> 标签：matlab

我有一个`4902x1`单元格数组，其中包含像 Blue 这样的字符串。或绿色。我想用另一个词替换其中的一些字符串。如何在 MATLAB 中做到这一点？

比如找

```
Blue.
Red. 
Green. 
```

用。。。来代替：

```
Colour. 
```

编辑：

```
strArray = {'green.','black.'};
strMatch = strmatch(strArray, Book2);
strArray( strMatch(str,strArray)) = {'colour'}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:43:20.357

为什么不使用

```
strArray( strmatch(str,strArray) ) = {'newString'}; 
```

在此示例中，您需要将变量 str 设置为您希望搜索的字符串，例如 str ='green。

**编辑**：更新以反映您对原始帖子的编辑。

```
strArray = {'green.','black.'};
strMatch = strmatch(strArray, Book2); % This line is unnecessary and if Book2 is not a string variable it will not work

strArray( strMatch(str,strArray)) = {'colour'}; % For this line to work you need declare a string value for the variable str, e.g. str='green.' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T19:00:36.440

如果您有一个字符串元胞数组（在您的示例中 strArray 不是元胞数组），我将定义一个小函数来执行逻辑，然后使用`cellfun`：

```
function y = changecolor(str)
if( strcmpi('green',str) || strcmpi('blue',str) )
    y = 'color';
else
    y = str;
end 
```

然后你可以得到你的新数组：

```
changed_array = cellfun(@changecolor, strCellArray,'Uniform',false) 
```

# javascript - 为什么 XMLHttpRequest 包含 Origin 标头？

> ID：13459942
> 
> 赞同：5
> 
> 时间：2012-11-19T18:34:05.603
> 
> 标签：javascript, jquery, xmlhttprequest, cross-domain

我想更好地理解这一点。我目前使用的心智模型是这样的：

1.  托管在 foo.com 的 JS 希望访问托管在 bar.com 的资源。这不是浏览器喜欢向用户展示的那种东西，除非可以表明 bar.com 对此请求表示欢迎。
2.  所以 foo.com JS 本质上将请求分成两半。首先，我们通过 XMLHttpRequest 对象发送适当类型的无数据请求（GET、POST 等）。bar.com 上的服务器返回它通常对基本上任何请求的响应，这些请求可能包含也可能不包含 Access-Control-Allow-Origin 标头。（编辑：这是一个误解 - 请参阅下面的 apsillers 的出色评论）
3.  如果浏览器确实得到了这样的标题，它会扫描它的 Origin（在本例中为 foo.com）。如果存在，它继续发送它被要求发送的实际请求。如果没有，它会拒绝。（编辑：这也不太正确）

如果这个模型是正确的，我很困惑为什么浏览器会发送一个带有这个初步请求的 Origin 标头。检查匹配不是发生在客户端吗？发送此标头有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T18:37:54.360

这就是[CORS 的工作原理](http://www.w3.org/TR/cors/)。这基本上是一个握手，表示欢迎您与我交谈。除非联系第三者，否则您无法知道是否有可能。

[以下是MDN 文章](https://developer.mozilla.org/en-US/docs/HTTP_access_control#Preflighted_requests)Preflighted_requests 部分的部分内容：

> 与简单请求（上面讨论过）不同，“预检”请求首先向另一个域上的资源发送 HTTP OPTIONS 请求标头，以确定实际请求是否可以安全发送。跨站点请求是这样预检的，因为它们可能对用户数据有影响。特别是，在以下情况下会预检请求：
> 
> 它使用 GET 或 POST 以外的方法。此外，如果 POST 用于发送 Content-Type 不是 application/x-www-form-urlencoded、multipart/form-data 或 text/plain 的请求数据，例如，如果 POST 请求向服务器发送 XML 有效负载使用 application/xml 或 text/xml，然后预检请求。它在请求中设置自定义标头（例如，请求使用诸如 X-PINGOTHER 之类的标头）

# java - ExecutorService.shutdownNow() 将变量设置为空

> ID：13459950
> 
> 赞同：0
> 
> 时间：2012-11-19T18:34:30.080
> 
> 标签：java, multithreading, runnable, executorservice

我正在创建一个`ExecutorService`with

```
ExecutorService executor = Executors.newFixedThreadPool(5); 
```

我`Runnables`加上

```
executor.execute(runnable) 
```

我有一个`java.sql.Connection`在可运行实现内部某处创建并在`finally`语句中关闭的实例。

在我打电话之前，这非常有效`executor.shutdownNow()`。当我这样做时，连接将其值设为 null，即使用我看到的检查器`connection = null`。如果我用该方法停止执行程序，`shutdown()`一切都会完美运行。

我一直在搜索和阅读（甚至是 java 的源代码），但无法理解可能导致这种情况的原因。

我试图抓住一个，`InterrupedException`但显然没有被抛出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:22:41.637

由于我们对您不需要的副作用一无所知`shutdownNow()`...
通常， a`shutdown()`应该足以导致`ExecutorService`拒绝新作业并且工作线程完成队列中的剩余作业。`shutdown()`不幸的是， （这将使所有先前提交的作业完成）和`shutdownNow()`（它将尝试中断当前正在执行的作业）之间似乎存在差距。应该有一个中间`shutdownAlmostNow()`部分让 ES 完成他们当前的工作，但返回那些仍在等待的`shutdownNow()`.

* * *

如果您使用 a `ThreadPoolExecutor`，您可以调用`shutdown()`，获取作业队列并将其排空，因此不会接受新作业并且旧作业会从队列中移除。然后你可以等待当前工作的终止。

# c++ - random_shuffle 不是真正随机的

> ID：13459953
> 
> 赞同：9
> 
> 时间：2012-11-19T18:34:43.320
> 
> 标签：c++, random, srand

我在`random_shuffle`这样的向量上使用：

```
#include <algorithm>
vector <Card> deck;
//some code to add cards to the deck here
random_shuffle ( deck.begin(), deck.end() ); 
```

运行时，deck 的内容是混杂的，但是当我重新启动程序时，这个混杂的顺序会保持不变。

我错过了什么？我怎样才能让它真正随机？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T18:37:33.847

您需要先使用[srand](http://en.cppreference.com/w/cpp/numeric/random/srand)播种伪随机数生成器。

```
#include <algorithm>
#include <cstdlib>

...

std::srand(std::time(0));

vector <Card> deck;
//some code to add cards to the deck here
random_shuffle ( deck.begin(), deck.end() ); 
```

上面链接的注释：

> 一般来说，伪随机数生成器应该只播种一次，在调用 rand() 和程序开始之前。每次您希望生成一批新的伪随机数时，不应重复播种或重新播种。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-06T09:11:00.717

使用当前的 C++（即 C++11），您可以使用`shuffle`可以将伪随机数生成器 (PRNG) 对象（您可以播种）作为第三个参数的算法：

```
#include <iostream>
#include <random>
#include <algorithm>
#include <vector>
#include <string>
#include <ctime>
using namespace std;

int main(int argc, char **argv)
{
  vector<string> v;
  for (int i = 1; i<argc; ++i)
    v.push_back(argv[i]);
  mt19937 g(static_cast<uint32_t>(time(0)));
  shuffle(v.begin(), v.end(), g);
  for (auto &x : v)
    cout << x << ' ';
  cout << '\n';
} 
```

（对于 GCC 4.8.2，您需要通过 编译它`g++ -std=c++11 -Wall -g shuffle.cc -o shuffle`）

在上面的示例中，PRNG 使用当前系统时间播种。

对于 C++11 之前的编译器，您只有`random_shuffle`STL 中的算法 - 但即使这样，您也可以选择为其指定数字生成器对象/函数。请注意，您不能只将 PRNG 对象`mtl19937`插入其中（因为它不提供`operator()(U upper_bound)`成员）。

因此，您可以像这样提供自己的适配器：

```
#include <iostream>
#include <random>
#include <algorithm>
#include <vector>
#include <string>
#include <ctime>
using namespace std;

struct Gen {
  mt19937 g;
  Gen()
   : g(static_cast<uint32_t>(time(0)))
  {
  }
  size_t operator()(size_t n)
  {
    std::uniform_int_distribution<size_t> d(0, n ? n-1 : 0);
    return d(g);
  }
};

int main(int argc, char **argv)
{
  vector<string> v;
  for (int i = 1; i<argc; ++i)
    v.push_back(argv[i]);
  random_shuffle(v.begin(), v.end(), Gen());
  for (vector<string>::const_iterator i = v.begin(); i != v.end(); ++i)
    cout << *i << ' ';
  cout << '\n';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-19T18:38:38.730

放置线：

```
srand (time (0)); 
```

在你做*任何*其他事情之前，在你的代码中，例如在`main()`.

否则，将始终使用默认种子 1，从而导致来自`rand()`和任何使用它的相同序列。

# c# - 通过 ActionLink 提交 Ajax.BeginForm

> ID：13459954
> 
> 赞同：2
> 
> 时间：2012-11-19T18:34:47.527
> 
> 标签：c#, asp.net-mvc-3, jquery, asp.net-ajax

我正在尝试使用超链接而不是提交按钮提交 Ajax.BeginForm。我使用提交按钮进行了测试，并且该操作通过测试 Request.IsAjaxRequest 将帖子识别为基于 Ajax，但是如果我尝试以下 IsAjaxRequest 则返回 false：

```
<a href="javascript:void(0)" onclick="javascript:document.forms[0].submit(); return false;">Update</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T19:46:41.030

该表单与 Microsoft 的 Ajax 库挂钩，因此您不能只调用 form.submit()，因为未激活已连接的 ajax 事件。你有几个选择：

*   使用提交按钮而不是链接
*   删除 MS Ajax 的东西并使用 jQuery 手动连接你的 ajax 帖子（这就是我会做的）
*   调用 MS Ajax 提交函数

对于第三个选项，而不是

```
onclick="javascript:document.forms[0].submit(); return false;" 
```

尝试

```
onclick="javascript:$('#form').onSubmit(); return false;" 
```

但是我没用过，不知道能不能用。您也可以在[此处](http://paululvinius.wordpress.com/2009/03/03/how-you-dynamically-submit-a-aspnet-mvc-ajax-form-from-javascript-and-jquery/)查看解决方案，因为这听起来与您想要完成的完全一样。

# java - 模式匹配的正则表达式

> ID：13459955
> 
> 赞同：-3
> 
> 时间：2012-11-19T18:34:51.530
> 
> 标签：java, regex, pattern-matching

谁能帮我修复正则表达式以查找两个 @ 符号之间的子字符串。

例子-`fghgkghfk@hello@ggjgkglgll@hello@ghfufjkfk.`

现在我想要检索这两个 HELLO 子字符串。提前致谢。这有助于我在检索数据时进行模式匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T18:36:48.370

这将匹配字符之间的文本`@`：

```
(?<=@).*?(?=@) 
```

这些是两端的环视（非消耗匹配），并且我在两者之间使用了非贪婪匹配，因此匹配不会一直运行到*下一个* `@`包围匹配的末尾

* * *

如果您想要一个提取所有此类短语的优雅单行，请执行以下操作：

```
String[] phrases = input.replaceAll("(^.*?@)|(@[^@]*$)", "").split("@.*?@"); 
```

下面是一些测试代码：

```
public static void main(String[] args) {
    String input = "fghgkghfk@hello@ggjgkglgll@hello@ghfufjkfk";
    String[] phrases = input.replaceAll("(^.*?@)|(@[^@]*$)", "").split("@.*?@");
    System.out.println(Arrays.toString(phrases));
} 
```

输出：

```
[hello, hello] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T18:38:37.057

```
 String text = "fghgkghfk@hello1@ggjgkglgll@hello2@ghfufjkfk";

    Pattern ptrn = Pattern.compile("@(\\w+)@");

    Matcher mtchr = ptrn.matcher(text);

    while(mtchr.find())
    {
        String match = mtchr.group(1);

        System.out.println("Match = <" + match + ">");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T18:39:20.043

之间字符串的简单正则表达式`@`：

```
'@(.*?)@' 
```

解释：

```
@      # Match starts at literal @
(.*?)  # Capture everything inbetween (non-greedy)
@      # Match ends at literal @ 
```

[在这里](http://rubular.com/r/9Hm4GR9e2W)查看它的实际应用。

# c# - 获取网页高度

> ID：13459960
> 
> 赞同：1
> 
> 时间：2012-11-19T18:34:58.550
> 
> 标签：c#, .net

我尝试获取网页的屏幕截图。

所以我需要知道文档高度。

任何线索我可以在哪里申请？

谢谢！

```
private void WebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
            {
                WebBrowser m_WebBrowser = (WebBrowser)sender;
                m_WebBrowser.ClientSize = new Size(this.m_BrowserWidth, this.m_BrowserHeight);
                m_WebBrowser.ScrollBarsEnabled = false;
                m_Bitmap = new Bitmap(m_WebBrowser.Bounds.Width, ?????); 
                m_WebBrowser.BringToFront();
                m_WebBrowser.DrawToBitmap(m_Bitmap, m_WebBrowser.Bounds);

            } 
```

# asp.net-mvc - MembershipUser.createUser 不工作，也没有抛出异常

> ID：13459966
> 
> 赞同：0
> 
> 时间：2012-11-19T18:35:38.967
> 
> 标签：asp.net-mvc, createuser, membershipuser

我在让 MembershipUser.createUser 在我的数据库中创建用户时遇到了一些问题。我也没有收到任何错误。

这是模型：所有必填字段都在这里...

```
public class RegisterModel
{
    [Required]
    [Display(Name = "Usuário")]
    public string UserName { get; set; }

    [Display(Name = "Email")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "A {0} deve ter no mínimo {2} caracteres.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Senha")]
    public string Password { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Repetir Senha")]
    [Compare("Password", ErrorMessage = "As senhas não coincidem")]
    public string ConfirmPassword { get; set; }

    [Required]
    [Display(Name = "Pergunta Secreta")]
    public string SecretQuestion { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "A {0} deve ter no mínimo {2} caracteres.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Senha Pergunta Secreta")]
    public string SecretQuestionPassword { get; set; }

    [Required]
    [Display(Name = "Ativo")]
    public bool Active { get; set; }
} 
```

看法：

```
@using (Ajax.BeginForm("Register", "Account", new AjaxOptions { HttpMethod = "POST", OnSuccess = "closeDialog('RegistroUsuario')" }))
{

   <fieldset>
        <legend>Cadastro novo Usuário</legend>
       <table id="changePassword">
                <tr>
                    <td class="smallField">Username:</td>
                    <td>@Html.TextBoxFor(m => m.UserName)</td>
                </tr>
                <tr>
                    <td>Password:</td>
                    <td>@Html.PasswordFor(m => m.Password)</td>
                </tr>
                <tr>
                    <td>Repetir Senha:</td>
                    <td>@Html.PasswordFor(m => m.ConfirmPassword)</td>
                </tr>
                <tr>
                    <td>Email:</td>
                    <td>@Html.TextBoxFor(m => m.Email)</td>
                </tr>
                <tr>
                    <td>Pergunta Secreta:</td>
                    <td>@Html.TextBoxFor(m => m.SecretQuestion)</td>
                </tr>
                               <tr>
                    <td>Resposta:</td>
                    <td>@Html.TextBoxFor(m => m.SecretQuestionPassword)</td>
                </tr>
                <tr>
                    <td>Ativo:</td>
                    <td>@Html.CheckBox("status")</td>
                </tr>    
            </table>           
    </fieldset>
    <input type="submit" value="Criar Usuário" />
} 
```

控制器：只是一个关于 ProviderUserKey 的问题：这是获取通用 ProviderUserKey 的正确方法吗？

```
[HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            MembershipProvider mp  = Membership.Provider;
            MembershipCreateStatus Status;
            object ProviderUserKey = Membership.GetUser().ProviderUserKey;

            // Attempt to register the user
            try
            {
                MembershipUser newUser = mp.CreateUser(model.UserName, model.Password, model.Email, model.SecretQuestion, model.SecretQuestionPassword, model.Active, ProviderUserKey, out Status);

                if (newUser == null)
                {
                    ViewBag.message = "O Usuário não pode ser cadastrado";
                    return null;
                }
                else
                {
                    return RedirectToAction("Index", "Home");   
                }

            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return PartialView(model);
    } 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:40:58.720

我发现...

我未能创建一个 Guid。

我只是为此更改了控制器功能：

```
MembershipUser newUser = mp.CreateUser(model.UserName, model.Password, model.Email, model.SecretQuestion, model.SecretQuestionPassword, model.Active, Guid.NewGuid(), out Status); 
```

谢谢

# ruby - 使用 Gem 在 JRuby 中解压缩文件 (.gz)

> ID：13459972
> 
> 赞同：1
> 
> 时间：2012-11-19T18:35:49.360
> 
> 标签：ruby, gem, gzip, jruby, unzip

有谁知道可以从 .gz zip 文件中提取文件的与 JRuby 1.6.5 兼容的 gem？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T00:04:07.000

我`Zlib`在我的 JRuby 应用程序中使用。它是一个标准的 Ruby 库。 [http://www.ruby-doc.org/stdlib-1.8.7/libdoc/zlib/rdoc/index.html](http://www.ruby-doc.org/stdlib-1.8.7/libdoc/zlib/rdoc/index.html)

在 Rails 中，您还可以使用`ActiveSupport::Gzip` [http://api.rubyonrails.org/classes/ActiveSupport/Gzip.html](http://api.rubyonrails.org/classes/ActiveSupport/Gzip.html)

以下是如何解压缩文件的示例：[Zlib in Ruby to uncompress .gz](https://stackoverflow.com/questions/3169373/zlib-in-ruby-to-uncompress-gz)

# java - 棋盘棋子运动

> ID：13459976
> 
> 赞同：0
> 
> 时间：2012-11-19T18:36:04.087
> 
> 标签：java, swing, chess

第一次打听nn

我正在为拼贴下棋（还处于早期阶段），我在移动棋子时遇到问题。我将复制似乎给我带来麻烦的代码并解释：

```
public void choosePiece(int x, int y){
    GUI.recolour();
    if(active==null){
        if(gameArray[x][y].isWhite()==whiteActive){
            active=gameArray[x][y];
            GUI.displayMoves(showMoves(active));
        }
    }else{
        if(gameArray[x][y]==null){
            gameArray[x][y]=active;
            gameArray[x][y].setCoordinades(x,y);
            gameArray[active.getX()][active.getY()]=null;
            active=null;
        }else if(gameArray[x][y].isWhite()==whiteActive){
            active=gameArray[x][y];
            GUI.displayMoves(showMoves(active));
        }else{
            if(whiteActive)
                blackDied.add(gameArray[x][y]);
            else
                whiteDied.add(gameArray[x][y]);
            gameArray[x][y]=active;
            gameArray[x][y].setCoordinades(x,y);
            gameArray[active.getX()][active.getY()]=null;
            active=null;
        }
        guiRefresh();
    }
} 
```

用户应该单击板上的一块（JButton 网格），GUI 类将调用带有所述 JButton 坐标的 GameHandler 类。

此代码应该从 JButton 网格中获取那些 x;y 坐标，并检查是否没有活动片段；如果是这样，则选择 gameArray[x][y]（从一组棋子中选出一个棋子）作为活动棋子，并在 JButton 网格中显示将 JButton 背景更改为绿色的可用移动。

如果已经有一个活动部分，它应该检查 x;y 目标是否为空或另一个部分：

第一种情况，它会将活动部分放置在空白空间中。如果目标 x;y 中有另一块，它将检查该块是否来自其他颜色。

如果它是相同的颜色，它会改变活跃的棋子，并显示它的动作。如果它是另一种颜色，它将“杀死”该部分，并将其替换为活动部分。

请注意，所有其他空按钮，除了那些可以到达的部分都未启用。最后一个 guiRefresh() 方法遍历整个 gameArray 并要求 GUI 在 x,y 位置放置一个代表 X 类型棋子的按钮。我使用网格布局从 8x8 按钮矩阵中添加按钮。

好吧..这听起来对我有用..但它没有：S 照原样，当 A 吃 B 时，B 从板上消失了，但 A 永远不会被放置而不是 B.. 它保持不变.. 但是如果再次单击 A，显示可能运动的绿色按钮看起来好像 A 实际上在 B 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:47:30.467

如果 setCoordinates 改变了什么`getX()`并`getY()`返回，那么以下语句的顺序是错误的：

```
gameArray[x][y].setCoordinades(x,y);
gameArray[active.getX()][active.getY()]=null; 
```

# c++ - 在getline c ++上复制最后一个数据

> ID：13459978
> 
> 赞同：0
> 
> 时间：2012-11-19T18:36:07.983
> 
> 标签：c++, getline

从文件读取时，我有一个关于 getline 的奇怪问题。

下面是代码。

```
#include <fstream>
#include <iostream>
#include <vector>
#include <sstream>
using namespace std;

struct call {
    string l;
            string k;
};

int main () {
    ifstream read;
    string fn = "in.txt";
    string temp;
    call mc;
    vector<call> vcall;

    read.open (fn.c_str ());

    while (getline (read, temp)) {

        temp.erase (temp.end () - 1);

        if (temp.substr (0,1).compare ("L") == 0) {
            temp = temp.substr (7);
            stringstream ss (temp);
            while (ss) {
                getline (ss, mc.l, ':');
                getline (ss, mc.k, ':');
                vcall.push_back (mc);
            }
        }
    }
    for (int i = 0; i < vcall.size (); i++) {
        cout << vcall [i].i << vcall [i].k << endl;
    }

} 
```

文本文件 in.txt 包含一行。

```
Los:0:A:1:B:2:C:3:D:4:E: 
```

程序的输出给了我。

```
0A
1B
2C
3D
4E
4E 
```

不知道为什么会这样。它不应该在输出中包含最后一个（另一个）4。

我尝试重新创建文本文件，在另一个文件中重新编写代码并编译。在 Ubuntu (g++) 和 Windows (mingw) 中尝试过，但仍然遇到同样的问题。

更新：

我没有使用 while (getline (ss, mc.l, ':')) 的原因是因为我需要多个部分。我对上面的代码做了一些改动，结构有 2 个字符串要存储。还对我的文本文件进行了更改以反映更改。

那么我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T18:38:52.443

改变这个：

```
 while (ss) {
     getline (ss, mc.l, ':');
     vcall.push_back (mc);
 } 
```

对此：

```
while (getline(ss, mc.l, ':')) {
    vcall.push_back(mc);
} 
```

问题是在您已经将项目添加到向量之前，您不会检查读取是否失败。因此，当最后一次读取失败时，与上次调用 getline 保持不变的项目再次被推回向量上。一旦读取失败，修改后的版本就会退出。您在主 for 循环中使用了这个习惯用法，即从文件中读取行的循环。所以我想知道你为什么不将它与字符串流一起使用。

响应更新：

```
while (getline(ss, mc.l, ':') && getline(ss, mc.k, ':')) {
    vcall.push_back(mc);
} 
```

如果您发现 while 语句中的条件变得过于笨拙，您可以随时执行以下操作：

```
while (true) {
    getline(ss, mc.l, ':');
    getline(ss, mc.k, ':');
    if (!ss)
        break;
    vcall.push_back(mc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T18:39:21.487

内循环：

```
while (ss)
{
  getline (ss, mc.l, ':');
  vcall.push_back (mc);
} 
```

应该写成：

```
while (getline (ss, mc.l, ':'))
{
  vcall.push_back (mc);
} 
```

您已经为外部循环编写了这个惯用循环。

# html - 边角：三角形

> ID：13459985
> 
> 赞同：3
> 
> 时间：2012-11-19T18:36:48.097
> 
> 标签：html, css

是否有可能摆脱边框角落的“三角形”形状？（使用不同颜色边框时）

看这个例子：

[http://jsfiddle.net/GLsqV/](http://jsfiddle.net/GLsqV/)

任何解决方法？基本上我只希望顶部和底部边框继续，而不是混合在一起。

```
 .borders {  
   width:500px;
   height:500px;
   background:#efefef;
   border:10px solid black;
   border-top:10px solid red;
   border-bottom:10px solid green;
 }​ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T18:44:43.020

使用生成内容的一种选择：

```
.borders {
    width:500px;
    height:500px;
    position: relative;
    background:#efefef;
    border-top:10px solid red;
    border-bottom:10px solid green;
}

.borders::before,
.borders::after {
    content: '';
    position: absolute;
    width: 10px;
    top: 0;
    bottom: 0;
    background-color: #000;
}

.borders::before {
    left: 0;
}

.borders::after {
    right: 0;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GLsqV/1/)。

或者使用嵌套的 HTML（如果你真的必须）：

```
<div class="borders">
    <div class="innerBorder left"></div>
    <div class="innerBorder right"></div>
</div>​

.borders {
    width:500px;
    height:500px;
    position: relative;
    background:#efefef;
    border-top:10px solid red;
    border-bottom:10px solid green;
}

.borders .innerBorder{
    content: '';
    position: absolute;
    width: 10px;
    top: 0;
    bottom: 0;
    background-color: #000;
}

.borders .left {
    left: 0;
}

.borders .right {
    right: 0;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/GLsqV/2/)。

还有一个单嵌套元素解决方案，其中左和右`border-color`是`background-color`包装元素的 ，而宽度由`margin`后代的 控制：

```
<div class="borders">
    <div class="inner"></div>
</div>​ 
```

CSS：

```
.borders {
    width:500px;
    height:500px;
    background-color: #000;
    border-top:10px solid red;
    border-bottom:10px solid green;
}

.borders .inner {
    background-color: #efefef;
    height: 100%;
    margin: 0 10px;
} 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/GLsqV/3/)。​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T18:59:45.367

不是到处都有一个元素。（实际上，默认的三角形边框使伟大的事情成为可能：[CSS 的形状](http://css-tricks.com/examples/ShapesOfCSS/)）

但是，您所要求的内容很容易在任何地方都可以使用另一个子元素。

CSS：

```
.borders {
  width: 520px;
  height: 500px;
  border-top: 10px solid red;
  border-bottom: 10px solid green;
}

.borders2 {
  background: #efefef;
  width: 500px;
  height: 500px;    
  border-left: 10px solid black;
  border-right: 10px solid black;
} 
```

​ HTML：

```
<div class="borders">
  <div class="borders2">
  </div>
</div>​ 
```

使用这些值，outer`DIV`的边界框仍将具有 520×520 像素的大小。

另见[这个小提琴](http://jsfiddle.net/KY6vP/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T18:39:43.547

这就是边界的工作方式。否则浏览器将如何决定哪些与角落重叠？

您可以使用嵌套的 DIV 或使用带有 :before 和 :after 的技巧以及一些绝对定位来实现此效果。

# java - java乌龟递归

> ID：13459987
> 
> 赞同：0
> 
> 时间：2012-11-19T18:36:50.090
> 
> 标签：java, recursion, turtle-graphics

我需要编写一个将 T 画成圆圈的方法。

int s= T 的长度 int c= 要绘制的 T 的数量和转动每个 T 的度数

这是我的代码：

```
public static void r(int s,int c)
    {

        t.penDown();
        t.forward(s/2);
        t.left(90);
        t.forward(s/4);
        t.right(180);
        t.forward((s/4)*2);
        t.right(180);
        t.forward(s/4);
        t.left(90);
        t.forward(s/2);
        t.left(360/c);

    } 
```

int s = 线的长度 int c= 要绘制的 T 的数量（以及每次转动的度数）

绘制的是：一个 4 圈 T 的这个方法在递归中被调用，我找不到这个方法的任何停止条件，因为 int c 参数可以改变，因为它是转角，但它需要改变，因为那是我的停止参数.

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-06T05:36:05.933

假设您试图避免更改 的参数`r()`，则可以使用内部类的递归方法来解决此问题：

```
public static void r(Turtle t, int s, int c) {

    class InnerClass {

        private void r_recursive(Turtle t, int s, int c, int m) {
            if (m == 0) {
                return;
            }

            t.penDown();

            t.forward(s / 2);
            t.left(90);
            t.forward(s / 4);
            t.right(180);
            t.forward(s / 2);
            t.right(180);
            t.forward(s / 4);
            t.right(90);
            t.backward(s / 2);

            t.penUp();
            t.left(c);

            r_recursive(t, s, c, m - c);
        }
    }

    new InnerClass().r_recursive(t, s, c, 360);
} 
```

通过调用：

```
Turtle bob = new Turtle();

r(bob, 200, 30); 
```

你应该得到：

[![在此处输入图像描述](../Images/067063871d13329507487c0adc120e30.png)](https://i.stack.imgur.com/Rzdir.png)

# java - DropdownChoice 选择与模型值不同，在 ajax 更新时更改

> ID：13459993
> 
> 赞同：0
> 
> 时间：2012-11-19T18:36:55.347
> 
> 标签：java, ajax, wicket

我有一个列表视图，里面的列表视图是

EnumdropDrop - 文本域 - DropdownChoice - Ajaxbutton | 对于每个项目

第一个下拉列表是货币，第二个是 Account 对象，帐户下拉列表中的一个选项是创建一个新帐户，然后以该货币命名。

创建新帐户时应该是帐户下拉列表中的选定值。

这适用于第一个帐户，但第二个和所有后续新创建的帐户被正确创建并添加到可能性列表中，但它们不是选定的帐户。每次我进行 ajax 刷新时，所有新创建的项目中的选定帐户都设置为第一个创建的帐户。有趣的是，当我提交表格时，帐户选择是正确的。

```
package com.trifork.pengeplan.web.components.lists;

import com.trifork.pengeplan.domain.*;
import com.trifork.pengeplan.web.components.choice.EnumDropDownChoice;
import com.trifork.pengeplan.web.components.choice.OwnedAccountCreateNewDropDownChoice;
import org.apache.wicket.ajax.AjaxRequestTarget;
import org.apache.wicket.ajax.form.AjaxFormComponentUpdatingBehavior;
import org.apache.wicket.ajax.markup.html.form.AjaxButton;
import org.apache.wicket.markup.html.form.Form;
import org.apache.wicket.markup.html.form.TextField;
import org.apache.wicket.markup.html.list.ListItem;
import org.apache.wicket.markup.html.list.PropertyListView;
import org.apache.wicket.model.IModel;
import org.apache.wicket.model.PropertyModel;
import org.apache.wicket.model.ResourceModel;

import java.util.List;

/**
 * Created by IntelliJ IDEA.
 * User: tommysadiqhinrichsen
 * Date: 21/09/12
 * Time: 11.55
 */
public class MultipleCurrenciesListView extends PropertyListView<FinanceAccountCurrencyMapping> {

    IModel<OwnedAccount> ownedAccountIModel;

    public MultipleCurrenciesListView(String id, IModel model) {
        super(id, new PropertyModel<List<FinanceAccountCurrencyMapping>>(model, "financeAccountCurrencyMappings"));
        ownedAccountIModel = model;

    }

    @Override
    protected void populateItem(final ListItem<FinanceAccountCurrencyMapping> item) {

        EnumDropDownChoice<MoneyCurrency> moneyCurrency = new EnumDropDownChoice<MoneyCurrency>("moneyCurrency");
        moneyCurrency.add(new AjaxFormComponentUpdatingBehavior("onchange") {
            @Override
            protected void onUpdate(AjaxRequestTarget target) {
                MoneyCurrency moneyCurrency = (MoneyCurrency) getFormComponent().getModelObject();
            }
        });
        item.add(moneyCurrency);

        item.add(new TextField("financeAccount.accountNumber"));

        final OwnedAccountCreateNewDropDownChoice accountForCash = new OwnedAccountCreateNewDropDownChoice("accountForCash", ownedAccountIModel.getObject().getLegalEntity().getOwnedBankAccounts());

        accountForCash.add(new AjaxFormComponentUpdatingBehavior("onchange") {
            @Override
            protected void onUpdate(AjaxRequestTarget target) {
                OwnedAccount ownedAccount = (OwnedAccount) getFormComponent().getModelObject();
                if (ownedAccount != null && ownedAccount.getId() == -1) {

                    OwnedAccount newOwnedAccount = new OwnedAccount();
                    FinanceAccountCurrencyMapping financeAccountCurrencyMapping = item.getModelObject();
                    financeAccountCurrencyMapping.setAccountForCash(ownedAccount);

                    newOwnedAccount.setName(financeAccountCurrencyMapping.getOwnedAccount().getName() + " - " + financeAccountCurrencyMapping.getMoneyCurrency().name());
                    newOwnedAccount.setLegalEntity(financeAccountCurrencyMapping.getOwnedAccount().getLegalEntity());
                    newOwnedAccount.setAssetOrLiability(AssetOrLiability.ASSET);
                    newOwnedAccount.setAssetType(AssetType.BANK_ACCOUNT);
                    newOwnedAccount.setCurrency(financeAccountCurrencyMapping.getMoneyCurrency());
                    newOwnedAccount.getFinanceAccountCurrencyMappings().add(new FinanceAccountCurrencyMapping(newOwnedAccount));
                    ownedAccountIModel.getObject().getLegalEntity().getOwnedAccounts().add(ownedAccountIModel.getObject().getLegalEntity().getOwnedAccounts().size() - 1, newOwnedAccount);

                    accountForCash.setDefaultModelObject(newOwnedAccount);

                    target.add(getFormComponent().getForm().getPage());

                }

            }
        });
        item.add(accountForCash);

        item.add(new AjaxButton("deleteFinanceAccount", new ResourceModel("button.delete")) {
            @Override
            protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
                ownedAccountIModel.getObject().getFinanceAccountCurrencyMappings().remove(item.getModelObject());
                target.add(this.getForm());
            }

            @Override
            protected void onError(AjaxRequestTarget target, Form<?> form) {
                super.onError();
            }
        });
    }

} 
```

有人可以告诉我问题是什么吗？

![Created first account](../Images/475744b8c5322f93a808edc7f81ac6bb.png) ![Created second account](../Images/4b896060ae0ef0da8623787d4e65428f.png) ![About to create third account](../Images/e05d68714f6b905a07fb97ab4f1c8943.png) ![Created third account but not selecte](../Images/89f875a4a50d57d0473c3daa310ab13c.png) ![Refresh reset all](../Images/ad91df48e91c059937cb26129fd06068.png) ![Saved values from image 5](../Images/44c1a80706f7eb9b9a9876807400b008.png)

更新

```
package com.trifork.pengeplan.web.components.choice;

import com.trifork.pengeplan.domain.OwnedAccount;
import org.apache.wicket.markup.html.form.ChoiceRenderer;
import org.apache.wicket.markup.html.form.DropDownChoice;
import org.apache.wicket.model.IModel;
import org.apache.wicket.model.Model;
import org.apache.wicket.model.PropertyModel;
import org.apache.wicket.model.ResourceModel;

import java.util.List;

/**
 * Created by IntelliJ IDEA.
 * User: tommysadiqhinrichsen
 * Date: 18/09/12
 * Time: 16.01
 * To change this template use File | Settings | File Templates.
 */
public class OwnedAccountCreateNewDropDownChoice extends DropDownChoice<OwnedAccount> {

    public OwnedAccountCreateNewDropDownChoice(String id) {
        super(id);
        List<OwnedAccount> choices = (List<OwnedAccount>) getChoices();
        choices.add(new OwnedAccount(-1, new ResourceModel("create.new").getObject()));
        setChoices(choices);
        init();
    }

    public OwnedAccountCreateNewDropDownChoice(String id, IModel model) {
        super(id, model);
        List<OwnedAccount> choices = (List<OwnedAccount>) getChoices();
        choices.add(new OwnedAccount(-1, new ResourceModel("create.new").getObject()));
        setChoices(choices);
        init();

    }

    public OwnedAccountCreateNewDropDownChoice(String id, List<OwnedAccount> choices) {
        super(id, choices);
        List<OwnedAccount> choices1 = (List<OwnedAccount>) getChoices();
        choices.add(new OwnedAccount(-1, new ResourceModel("create.new").getObject()));
        setChoices(choices);
        init();
    }

    public OwnedAccountCreateNewDropDownChoice(String id, List<OwnedAccount> choices, ChoiceRenderer<OwnedAccount> renderer) {
        super(id, choices, renderer);
        List<OwnedAccount> choices2 = (List<OwnedAccount>) getChoices();
        choices.add(new OwnedAccount(-1, new ResourceModel("create.new").getObject()));
        setChoices(choices);
        init();
    }

    public OwnedAccountCreateNewDropDownChoice(String id, Model<OwnedAccount> model, List<OwnedAccount> choices, ChoiceRenderer<OwnedAccount> renderer) {
        super(id, model, choices, renderer);
        List<OwnedAccount> choices3 = (List<OwnedAccount>) getChoices();
        choices.add(new OwnedAccount(-1, new ResourceModel("create.new").getObject()));
        setChoices(choices);
        init();
    }

    public OwnedAccountCreateNewDropDownChoice(String id, PropertyModel<OwnedAccount> model, List<OwnedAccount> choices, ChoiceRenderer<OwnedAccount> renderer) {
        super(id, model, choices, renderer);
        List<OwnedAccount> choices4 = (List<OwnedAccount>) getChoices();
        choices.add(new OwnedAccount(-1, new ResourceModel("create.new").getObject()));
        setChoices(choices);
        init();
    }

    public void init() {

    }

    public void addChoice(OwnedAccount ownedAccount) {

        List<OwnedAccount> choices = (List<OwnedAccount>) getChoices();
        choices.add(choices.size() - 1, ownedAccount);
        setChoices(choices);
    }
} 
```

![Ajax response](../Images/e22a91b3426540795d73f87a8ec678d4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:19:07.520

如果不知道 OwnedAccountCreateNewDropDownChoice 做了什么，就很难找到问题所在。

但请查看这一行：

```
new OwnedAccountCreateNewDropDownChoice("accountForCash",
  ownedAccountIModel.getObject().getLegalEntity().getOwnedBankAccounts()); 
```

由于您稍后要修改银行帐户，因此此列表可能会过时。

遵循黄金 Wicket 规则，您永远不应该从模型中拉出某些东西来将其放入另一个模型中：

```
new OwnedAccountCreateNewDropDownChoice("accountForCash",
  new PropertyModel(ownedAccountIModel, "legalEntity.ownedBankAccounts"); 
```

也许这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:57:05.070

我发现了问题:)

Listviews are not good in forms because the can't handle dynamic changes because the list items dont keep track of their index.

I've implemented a listview based on a guide found at this website

[http://wicketinaction.com/2008/10/building-a-listeditor-form-component/](http://wicketinaction.com/2008/10/building-a-listeditor-form-component/)

I works like a charm.