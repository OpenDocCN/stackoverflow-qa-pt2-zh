# StackOverflow 问答 15838000-15838999

# ruby-on-rails - 如何配置 Haml 的 :markdown 过滤器以使用带有选项的 Redcarpet？

> ID：15838007
> 
> 赞同：4
> 
> 时间：2013-04-05T15:38:26.287
> 
> 标签：ruby-on-rails, haml, redcarpet

我正在使用 Rails 3.2.11、Haml 4.0 和 Redcarpet 2.2.2。

我想将 Haml 的`:markdown`过滤器配置为使用 Redcarpet 和`with_toc_data: true`. 在`ApplicationHelper`我尝试定义：

```
def markdown(text)
  markdown = Redcarpet::Markdown.new(Redcarpet::Render::HTML.new(with_toc_data: true))
  raw markdown.render(text.to_s)
end 
```

虽然内容`:markdown`被渲染，但没有 TOC 数据。如何更改`:markdown`解析方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T16:29:37.720

目前没有办法将选项传递给 Haml 中的过滤器引擎。目前最好的解决方案可能是用`:markdown`具有您想要的选项的新过滤器替换现有过滤器。

尝试将这样的内容添加到初始化程序中：

```
module Haml::Filters

  remove_filter("Markdown") #remove the existing Markdown filter

  module Markdown

    include Haml::Filters::Base

    def render(text)
      Redcarpet::Markdown.new(Redcarpet::Render::HTML.new(with_toc_data: true)).render(text)
    end

  end
end 
```

# asp.net - 它是否容易受到 ASP Padding oracle 的攻击

> ID：15838011
> 
> 赞同：1
> 
> 时间：2013-04-05T15:38:49.533
> 
> 标签：asp.net, security, encryption, cryptography, padding-oracle-attack

1.  当我打开 chat.mysite.com/WebResource.axd?d=jzjghMVYzFihd9Uhe_arpA2 它给我：填充无效，无法删除。

2.  当我打开 chat.mysite.com/WebResource.axd?d=acunetix 它给了我：无效的视图状态。

3.  当我打开 chat.mysite.com/WebResource.axd?d= 它给我：找不到资源。

但是，当我打开其中任何一个 /WebResource.axd 到我的主站点 www.mysite.com 时，不会发生错误......

我的问题是，我的网站是否容易受到 padding oracle 的攻击，如果是，哪些数据会被盗？另一件事是，一旦我打开 www.mysite.com 的“查看源代码”，就没有 script=webresource.axd 之类的东西......我很困惑，如果攻击者想要控制网站，他能做什么？他将如何进行攻击？攻击者能否获得管理员权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:48:08.200

由于提供的信息很少，我会说这很可能容易受到填充 oracle 的攻击。填充预言可用于解密密文，一次一个字节，从消息的最后开始向后工作。

所有密文都应使用 MAC 保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:18:22.267

根据对问题的评论进行回答。

是的，您目前容易受到 padding oracle 攻击。

这意味着他们可以下载您的配置文件之类的内容并解密您的视图状态和 cookie。

关于访问“管理员权限”，也许。取决于找到什么。例如，如果您在 web.config 文件中有一个数据库连接字符串，并且该数据库服务器可以在 Internet 上访问，那么攻击者可能会完全绕过该应用程序并直接进入数据库。这里肯定有许多因素可能会限制 web.config 信息暴露造成的损害，但不幸的是，很多开发人员不知道他们在做什么。他们往往不会考虑这一点。

**那么，你能做些什么呢？**

首先，用他们的补丁让你的服务器保持最新。Windows 有办法通过自动更新自动执行此操作。我强烈推荐用于 Web 服务器。MS倾向于很快地修补东西。此外，在让 Windows 服务器自行修补的 10 多年中，我从未遇到过问题。我希望我可以对数据库补丁说同样的话，但即使是那些也开始成为你必须做的事情。

其次，看应用程序本身。web.config 中是否有任何可能导致数据泄露的内容。诸如对数据库服务器的引用，对其他系统的密码等。如果是这样，那么我建议您在修补后立即更改所有这些密码。对于数据库访问，我倾向于确保即使应用程序也没有查询表的直接权限。但这是一个完全独立的讨论。

第三，养成不信任任何事物的倾向。不是您自己的服务器，甚至不是您自己的代码。无论如何，这将导致成为一个更好的程序员。如果攻击者能够在您的网站中放置一个可执行文件，他们就可以访问您的 Web 应用程序可以访问的所有内容。

第四，只向互联网公开必要的内容。这需要大量的教育和测试，以确保您的路由器/防火墙/等配置正确。不幸的是，一旦出现不便，开发人员往往会降低这些防御措施。例如，在服务器上安装调试工具或将数据库暴露在互联网上以便在家中访问它......这与上面的＃3 一致。

五、研究研究研究。花时间了解事情是如何受到损害的以及这意味着什么。当您知道要保护什么以及要保护它免受什么侵害时，进行防御性编码会容易得多。那里有大量不良信息，了解攻击的工作原理将使您更容易将其过滤掉。一个简单的示例是展示如何动态构建 sql 语句的站点。其中绝大多数不使用参数；而那些完全忽略了Web应用程序本身可以被绕过的想法的人。

还有更多，更多，但现在足以咀嚼。

# php - PHP：将 URL 内容作为附件发送给电子邮件（无需下载）？

> ID：15838012
> 
> 赞同：0
> 
> 时间：2013-04-05T15:38:56.397
> 
> 标签：php, curl, sendmail, email-attachments

**底部有更新的问题**

我想编写一个 PHP 脚本，它可以将给定 URL 的内容附加到电子邮件中，而无需再次下载和上传。

我的资源有限：使用*PHP*和*64M 内存限制*和*~1GB 存储空间的普通主机帐户*

我的第一个代码是一个简单的 sendmail `fopen()`，但如果给定的文件太大，就会出现内存问题。我怎样才能解决这个问题？

```
<?php
// return the file size of remote file
function ffilesize($remoteFile,$verbose=0){
    $ch = curl_init($remoteFile);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); //not necessary unless the file redirects (like the PHP example we're using here)
    $data = curl_exec($ch);
    curl_close($ch);
    if ($data === false) {
      echo 'cURL failed';
      exit;
    }

    $contentLength = 'unknown';
    $status = 'unknown';
    if (preg_match('/^HTTP\/1\.[01] (\d\d\d)/', $data, $matches)) {
      $status = (int)$matches[1];
    }
    if (preg_match('/Content-Length: (\d+)/', $data, $matches)) {
      $contentLength = (int)$matches[1];
    }
    return ($verbose)?number_format($contentLength)." bytes":$contentLength;
}

$file_url=$_GET['q']; // the given URL

print ffilesize($file_url,1); // check the file size of given URL

if ($_GET['m']) { // allow to send mail
    $filesize=ffilesize($file_url);
    $to=$_GET['to']; // For the file to be sent.
    $from="no-reply@domain.com"; // For the from line on the received email
    $name=$_GET['fname']; // virtual name of attached file
    $type="application/x-gzip";
                $subject = "subj";
                $mime_boundary = "==Multipart_Boundary_x".md5(mt_rand())."x";
             // open the file for a binary read
                $file = file_get_contents($file_url);
             // read the file content into a variable
                $data = chunk_split(base64_encode(file_get_contents($file_url)));
             // now we encode it and split it into acceptable length lines
                //ALREADY DONE, MOVE UP A FEW LINES
             // message body
                $message = "file attached";
             // build headers
                $headers = "Content-Type: multipart/mixed;\r\n" .
                " boundary=\"{$mime_boundary}\"";
             // put message body in mime boundries
                $message = "This is a multi-part message in MIME format.\n\n" .
                "--{$mime_boundary}\n" .
                "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
                "Content-Transfer-Encoding: 7bit\n\n" .
                $message . "\n\n";
             // attachment with mime babble
                 $message .= "--{$mime_boundary}\n" .
                "Content-Type: {$type};\n" .
                " name=\"{$name}\"\n" .
                //"Content-Disposition: attachment;\n" .
                //" filename=\"{$backfile}\"\n" .
                "Content-Transfer-Encoding: base64\n\n" .
                $data . "\n\n" .
                "--{$mime_boundary}--\n";
             // send mail
                mail($to, $subject, $message, $headers);
}
?> 
```

这种方法的问题：

> 73,214,655 字节致命错误：第 58 行 /url2mail.php 中允许的内存大小为 67108864 字节已用尽（尝试分配 66846720 字节）第 58*行*是：`$file = file_get_contents($file_url);`

更新粘贴在下面的工作版本，但仍受最大允许内存的限制。我喜欢在内存中制作*Base 64 编码切片*，而不是将文件下载到服务器。

```
<html><head><title></title>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
</head><body bgcolor="#000000" color="#00ff00" style="padding: 3em;margin: 0;color: #00ff00;">
<pre><?php

if(preg_match("/ ***my top secret user agent string*** /i",$_SERVER['HTTP_USER_AGENT'])){
// security check    
    $mem=($_GET['M'])?$_GET['M']:'32M'; // change memory limit if needed
    ini_set('memory_limit', $mem);

    function ffilesize($remoteFile,$verbose=0){ // return the file size of remote file
        $ch = curl_init($remoteFile);
        curl_setopt($ch, CURLOPT_NOBODY, true);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_HEADER, true);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); //not necessary unless the file redirects (like the PHP example we're using here)
        $data = curl_exec($ch);
        curl_close($ch);
        if ($data === false) {
          echo 'cURL failed';
          exit;
        }

        $contentLength = 'unknown';
        $status = 'unknown';
        if (preg_match('/^HTTP\/1\.[01] (\d\d\d)/', $data, $matches)) {
          $status = (int)$matches[1];
        }
        if (preg_match('/Content-Length: (\d+)/', $data, $matches)) {
          $contentLength = (int)$matches[1];
        }

        return ($verbose)?number_format($contentLength)." bytes":$contentLength;
    }

    $furl=$_GET['q'];  // the given URL
    $fname=pathinfo(parse_url($furl, PHP_URL_PATH), PATHINFO_BASENAME); // name of given file

    function return_bytes($val) {  // convert size to bytes
        $val = trim($val);
        $last = strtolower($val[strlen($val)-1]);
        switch($last) {
            // The 'G' modifier is available since PHP 5.1.0
            case 'g':
                $val *= 1024;
            case 'm':
                $val *= 1024;
            case 'k':
                $val *= 1024;
        }
        return $val;
    }

    function mem($c=FALSE){  // checking allowed memory and used memory
        $limit=return_bytes(ini_get('memory_limit'));
        if ($c) {
            return $limit - (memory_get_usage()*$c);
    } else {
            return $limit - memory_get_usage();
        }
    }

    $filesize=(file_exists($fname))?filesize($furl):ffilesize($furl);

    echo "<br /> file: ".number_format($filesize);  // debug formatted file size
    echo "<br /> mfree: ".number_format(mem());  // debug free memory
    echo "<br /> mopt: ".number_format(mem(6));  // debug optimal memory usage

    if($filesize>(mem())){  // debug file size information
        echo "<br /> [".$filesize."] too large <br />";
    } else {
        echo "<br /> [".$filesize."] is cool <br />";
    }

    if ($_GET['to']) {  // allow to send email
        if (function_exists('curl_init')&&!file_exists($fname)) {  // downloading the file
            $ch = curl_init($furl);
            $fh = fopen($fname, "w");
            curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0');
            curl_setopt($ch, CURLOPT_FILE, $fh);
            curl_exec($ch);
            curl_close($ch);
        } else {
            echo 'file existing on server';
        }

        $furl = $fname;  // redeclare the $furl to local

        $to=$_GET['to']."@gmail.com"; // For the file to be sent.
        $from="no-reply@".$_SERVER['SERVER_NAME']; // For the from line on the received email
        $name="asd.gif"; // virtual name .gif for content protection
        $type="application/x-gzip";
           $subject = "subj";
           $mime_boundary = "==Multipart_Boundary_x".md5($rand)."x";
        // open the file for a binary read
           $file = fopen($furl,'rb');
        // read the file content into a variable and encode it and split it into acceptable length lines
           $data = chunk_split(base64_encode(fread($file,$filesize)));
        // message body
           $message = $furl." (".number_format(filesize($furl)).")";
        // build headers
           $headers = "Content-Type: multipart/mixed;\r\n" .
           " boundary=\"{$mime_boundary}\"";
        // put message body in mime boundries
           $message = "This is a multi-part message in MIME format.\n\n" .
           "--{$mime_boundary}\n" .
           "Content-Type: text/plain; charset=\"iso-8859-1\"\n" .
           "Content-Transfer-Encoding: 7bit\n\n" .
           $message . "\n\n";
        // attachment with mime babble
            $message .= "--{$mime_boundary}\n" .
           "Content-Type: {$type};\n" .
           " name=\"{$name}\"\n" .
           "Content-Transfer-Encoding: base64\n\n" .
           $data . "\n\n" .
           "--{$mime_boundary}--\n";
        // close the file
        fclose($file);
        // send mail
        if (mail($to, $subject, $message, $headers)) {
            echo " done";
            unlink($furl);
        } else {
            echo $furl;
        }
    }
} else {
    echo "unauthorized request";
}
?></body></html> 
```

所以，我的问题是：**如何将给定文件（通过 URL）拆分为内存限制允许的切片？**

例如：*32M*内存限制允许我在内存中存储*约 30M*，所以我应该将*30M*文件拆分为 3 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:49:10.737

这个函数可以完成以下任务：

```
function mail_page_contents( $url = '' )
{
    if( $url && ( $contents = file_get_contents( $url ) ) )
    {
        $emailto    = 'receiver@email.com';

        $subject    = 'Webpage Contents';

        mail( $emailto , $subject , $contents );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:48:08.970

我会执行以下步骤：

```
1) a) Store url-s in a `mysql` table 
   b) if you does not have mysql than store the urls in a `csv` file.

2) - Php reads the urls 
       a) from the table (with `mysqli` php lib)
       b) with `fgetcsv` function
   - and dowload the content of the url with `curl`
   - zip the content with `ZipArchive` class. /if you want to use less space and bandwith/
   - Send the zipped content as attached file with `PHPMailer`

3) The 2) should run over the urls (and somehow flag what url-s are examined) 
     (if the runtime of the script reaches MAX_EXECUTION_TIME it is stops. 
      So if the script run again, it should start where it is ended at last run)

4) Setup a `cron` job to call your script as often as you need. 
```

如果您像这样创建脚本，您不必做更多的事情，只需将 url-s 放入您的 db 表或 csv 文件，然后等待电子邮件。

# sharepoint-2010 - 将共享点站点备份到 .bak 文件

> ID：15838013
> 
> 赞同：1
> 
> 时间：2013-04-05T15:38:59.513
> 
> 标签：sharepoint-2010, backup

我有一个带有不同 Web 应用程序的共享点农场，我想备份两个 Web 应用程序。

使用 Sharepoint 2010 中央管理面板 -> 备份和还原，我看到我可以选择 Web 应用程序，然后选择完整或差异备份，然后创建备份。

此方法创建一个包含许多小文件的文件夹。在机器上，我可以看到历史备份是单个非常大的 .BAK 文件。我担心我没有正确执行此操作。

如何创建一个类似的文件 - 单个 .BAK 文件？这可能是数据库备份而不是 Web 应用程序备份吗？我将在 Web 应用程序上完成一些工作，并希望能够将 Web 应用程序恢复到当前状态，以防出现问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:45:44.740

你没有做错任何事。当您在 SharePoint 中运行完整备份时，它会创建所有这些小的 .BAK 文件，以便您可以有选择地还原组件。查看备份目录并找到一个名为 的文件`spbackup.xml`，这是备份的每个项目的完整细分以及相关的 .BAK 文件。您的 SQL 数据库也包含在此处，只需在该 xml 文件中查找您的内容数据库名称，您将看到备份的详细信息。它应该看起来像这样：

```
<SPBackupObject Name="WSS_Content">
    <SPBackupRestoreClass>Microsoft.SharePoint.Administration.SPContentDatabase, Microsoft.SharePoint, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c</SPBackupRestoreClass>
    <SPBackupSelectable>True</SPBackupSelectable>
    <SPRestoreSelectable>True</SPRestoreSelectable>
    <SPName>WSS_Content</SPName>
    <SPId>f1f517f9-00b0-4863-96c0-fb57ae1ac579</SPId>
    <SPCanBackup>True</SPCanBackup>
    <SPCanRestore>True</SPCanRestore>
    <SPCurrentProgress>100</SPCurrentProgress>
    <SPLastUpdate>03/19/2013 10:01:08</SPLastUpdate>
    <SPCurrentPhase>Done</SPCurrentPhase>
    <SPParameters>
        <SPParameter Key="f1f517f9-00b0-4863-96c0-fb57ae1ac438STATE.xml"><![CDATA[00000016.bak]]></SPParameter>
        <SPParameter Key="InstanceId"><![CDATA[12ef83f5-8e21-4696-afb5-8210f2baadfb]]></SPParameter>
        <SPParameter Key="ServerId"><![CDATA[735385ba-f55a-4a8b-bc5c-3ef7ff7221c1]]></SPParameter>
        <SPParameter Key="SPDescription"><![CDATA[Content for the Web Application.]]></SPParameter>
        <SPParameter Key="SPDiskSize"><![CDATA[140181504]]></SPParameter>
        <SPParameter Key="SPLocation"><![CDATA[C:\Program Files\Microsoft SQL Server\MSSQL10_50.SHAREPOINT\MSSQL\DATA]]></SPParameter>
        <SPParameter Key="SPName"><![CDATA[WSS_Content_EOTA]]></SPParameter>
        <SPParameter Key="SPServer"><![CDATA[SQL\SHAREPOINT]]></SPParameter>
        <SPParameter Key="SPSqlFullLocation"><![CDATA[\\backupsrv\Backup\SharePoint\spbr0055\0000010A.bak]]></SPParameter>
        <SPParameter Key="SPSqlPreviousPosition"><![CDATA[1]]></SPParameter>
        <SPParameter Key="SPTimeout"><![CDATA[3600]]></SPParameter>
        <SPParameter Key="SQL\SHAREPOINT:WSS_Content.dat"><![CDATA[000000F9.bak]]></SPParameter>
        <SPParameter Key="Url"><![CDATA[http://dev.sharepoint.local/]]></SPParameter>
    </SPParameters>
</SPBackupObject> 
```

# json - Spring Web MVC JSON 生成

> ID：15838014
> 
> 赞同：1
> 
> 时间：2013-04-05T15:39:02.440
> 
> 标签：json, spring, rest, spring-mvc

我们应用程序的 Web 服务层从内部业务对象创建 JSON。

有些属性是完全隐藏的，这很容易

```
public class User {

    @JsonIgnore
    public String getHash() {
        return hash;
    }

    // lot more getters and setters
} 
```

由于性能原因，我认为并不总是提供完整的用户（任何其他）对象。

因此，当使用 /rest/users 时，它应该只为每个用户提供一部分属性。

使用 /rest/user/{id} 时，它将提供所有

这也可以通过将用户对象包装到不同的模型中来或多或少地实现，这些模型的吸气剂比用户少。

```
public class PublicUserModel {
    private User user;

    public PublicUserModel(User user) {
        this.user = user;
    }

    public String getFirstname() {
        return user.getFirstname();
    }

    public String getLastname() {
        return user.getLastname();
    }
} 
```

但这需要大量编码，并且对于不同的视图不是很灵活。

理想情况下，有一种方法可以告诉@Controller 哪些属性应该可用。所有其他代码都需要大量工作。

```
@Controller
public class MainController {

    @Autowired
    private UserService userService;

    @ResponseBody
    @RequestMapping(value = "/users/{id}")
    public MyUserModel getUser(@PathVariable String id) {
        User user = userService.getUser(id);
        if (user != null) {
            return new MyUserModel(user);
        }
        return null;
    }

    @ResponseBody
    @RequestMapping(value = "/users")
    public Collection<PublicUserModel> getUsers() {
        Collection<User> users = userService.getAllUsers();
        Collection<PublicUserModel> publicUsers = new ArrayList<>();
        for (User user : users) {
            publicUsers.add(new PublicUserModel(user));
        }
        return publicUsers;
    }

} 
```

对通用模型有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:10:35.080

查看 Jackson 的 JSON 视图和过滤器

[http://wiki.fasterxml.com/JacksonJsonViews](http://wiki.fasterxml.com/JacksonJsonViews)

[http://wiki.fasterxml.com/JacksonFeatureJsonFilter](http://wiki.fasterxml.com/JacksonFeatureJsonFilter)

# r - 在 R 中自定义热图

> ID：15838016
> 
> 赞同：1
> 
> 时间：2013-04-05T15:39:10.310
> 
> 标签：r, visualization

我在 R 中有以下代码来创建一个简单的热图。

```
data <- c(rnorm(80), rep(NA,20))
image(matrix(sample(data),nrow=50, ncol=2), las=1) 
```

我想做以下两件事：-

1.  我希望`NA`当前为白色的 s 有一条红色（或黑色）对角线。
2.  我想增加热图中每个框周围的笔划宽度，以便清楚地描绘每个单元格。

我怎样才能实现（1）和（2）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:38:22.570

这应该很接近：

```
# fix the data because we're going to use it twice:
d=sample(data)
# plot it with X and Y coords known (note 1 larger than dimension)
image(1:51,1:3,matrix(d,nrow=50, ncol=2),las=1)
# add diagonal shading
polygon(x=c(1,51,51,1),y=c(1,1,3,3),density=3,col="red")
# replot. The NA's show through:
image(1:51,1:3,matrix(d,nrow=50, ncol=2),las=1,add=TRUE)
# outline the cells.
abline(h=1:3)
abline(v=1:51) 
```

如果您真的想要每个框中的单个红色斜杠：

```
x0=c(1:50,1:50)
x1=x0+1
y0=c(rep(1,50),rep(2,50))
y1=y0+1
image(1:51,1:3,matrix(d,nrow=50, ncol=2),las=1)
segments(x0,y0,x1,y1,col="red",lwd=2)
image(1:51,1:3,matrix(d,nrow=50, ncol=2),las=1,add=TRUE)
abline(v=1:51);abline(h=1:3) 
```

# db2 - 如何限制 DB2 CLP (z/OS) 中返回的字段的显示长度？

> ID：15838018
> 
> 赞同：8
> 
> 时间：2013-04-05T15:39:16.203
> 
> 标签：db2, format, zos

我是 Unix 黑客，所以我有一个脚本，每当我想运行一些 SQL 时，我都会运行它。我用我的查询调用 DB2 并将标准输出转储到一个文件中。非常尼安德特人，但它有效。我有一张桌子，里面有一个 varchar(28672)。该字段从来没有那么长，但 db2 将其格式化为 28k 宽。

很明显，我将查询更改为选择 substr(field, 1,100) 以获取字段的开头，这就是它返回的内容，只是前 100 个字符，但它仍然将输出的字段格式化为 28672 个字符。知道如何将其格式化为数据输出的大小吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T16:15:58.283

DB2 的 CLP 将始终根据列的长度在其输出中返回字段所需的最大数量。

但是，您可以将字段转换为其他大小的 VARCHAR：

```
SELECT CAST(your_field AS VARCHAR(100)) FROM your_table 
```

如果你这样做，你可能想要禁止字符截断的警告，你可以使用 CLP 命令来做到这一点[`UPDATE COMMAND OPTIONS`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0001975.html)：

```
UPDATE COMMAND OPTIONS USING w OFF 
```

# facebook - FacebookSDK (php) 无法识别多查询调用中的“#”字符

> ID：15838022
> 
> 赞同：0
> 
> 时间：2013-04-05T15:39:31.707
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我在使用 Facebok PHP SDK 时遇到了一个奇怪的错误。我试图根据第一个角色的名字和他们的个人资料图像获取朋友列表。

我寻找“约翰”朋友的功能如下所示：

```
public function searchFriends($fbToken, $search) {
    # atualizar a api do facebook com o token de acesso:
    $this->facebookAPI->setAccessToken($token);

    $multiquery = array(
        "q1" => 'SELECT name, uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me()) AND strpos(lower(name), "john") = 0',
        "q2" => "SELECT url FROM profile_pic WHERE width = 32 AND height = 32 AND id in #q1"
    );

    $send = array();
    $send['method'] = 'fql.multiquery';
    $send['queries'] = $multiquery;
    $send['callback'] = '';

    $friends = $this->facebookAPI->api($send);

    return $friends;
} 
```

我得到的错误是：

**致命错误：未捕获的异常：601：解析器错误：位置 71 处出现意外的“#q1”。抛出 /nfs/c03/h03/mnt/55868/domains/secure.thegoodfellas.com.br/html/tamojuntometro/php/fb /base_facebook.php 第 1252 行**

看起来 FacebookAPI 无法识别指向第一个查询的“#”字符。有人对此有任何线索吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:41:54.787

我发现了错误。

问题出在我的第二个查询上：

从

"q2" => "从 profile_pic 中选择 url，其中 width = 32 AND height = 32 AND **id in #q1** "

至

"q2" => "SELECT url FROM profile_pic id in **(SELECT id in #q1)** "

# radio-button - 为单选按钮添加方形背景

> ID：15838025
> 
> 赞同：0
> 
> 时间：2013-04-05T15:39:33.807
> 
> 标签：radio-button, background-color

我可能错过了一些简单的东西，但这里有。

我的表单上有几个单选按钮，我希望每个按钮都有一个比按钮本身大几个像素的方形背景。我也希望按钮的内部与背景颜色相同。

我尝试使用 CSS 来更改单选按钮本身的背景颜色：

```
.Blue{
   background: blue;
}

<input type="radio" class="Blue" value="1"/> 
```

但这没有任何样式。

是否像在每个周围添加标签一样简单，`<div>`或者是否有另一种方式来设置无线电输入的样式而无需额外的标签？

好奇的解释：颜色代表情绪，悬停时会有一个工具提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:29:39.800

正如我上面的评论所说，单选按钮输入只是按钮本身，没有背景样式。为了解决这个问题，我在每个周围添加了一个并设置了适合我需要`<div>`的样式。`<div>`

# python - 字段后读取txt文件

> ID：15838038
> 
> 赞同：0
> 
> 时间：2013-04-05T15:40:14.057
> 
> 标签：python, field

你好，我有一个 txt 文件，它由 N 行和 96 个值组成，我预计它是 N*96 组织的，但实际上行数不是两倍，第一行是 50 秒 46 等等

我写了一个代码来重新组合原始行，其他 2 行读取一行，但我问是否有一种方法可以连续读取每个字段。每个值都用空格字符分隔。

```
for j in range (239) :
    L=[]
    lc1 = f.readline().split()
    lc2 = f.readline().split()

    for i in range(50) :
        L.append(lc1[i])

    for i in range(46) :
        L.append(lc2[i])

    table[j][:]=L   

f.close() 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:00:11.450

嗯...关于分割线部分，阅读代码比阅读您的描述更有意义。:)

鉴于您的文本的输入结构是已知的。即，每行 96 个单词，您可以改为执行以下操作：

```
ValuesPerLine=96
ResultsTable=[]
TableIndex=0
NewLine=[]

for line in f:
    for value in line.split():
        NewLine.append(value)
        if len(NewLine) == ValuesPerLine:
             ResultsTable[TableIndex][:]=NewLine
             NewLine=[]
             TableIndex=TableIndex+1 
```

以这种方式，即使这些行后来以不同的方式拆分，只要期望结果中每行有 96 个值，这将从您的源中生成。

“for line in f:”的好处是它可以像“readlines()”与“readline()”一样有效地处理它，因此您可以获得一些性能改进。

编辑：

根据您打开的文件类型，从文件读取的行中删除任何“\n”可能会有所帮助，以避免在集合中出现一个值，不时地嵌入一个“\n”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:03:04.437

我不确定我是否理解您的问题，但这是一种将您的两个循环收集到一个语句中的方法：

```
for j in range (239) :
    lc1 = f.readline().split()
    lc2 = f.readline().split()

    L = lc1[:50] + lc2[:46]

    table[j][:]=L   

f.close() 
```

我不禁尝试回收@jon-clements 在[Copy the last three lines of a text file in python? 中提出的好技巧？](https://stackoverflow.com/questions/15647467/copy-the-last-three-lines-of-a-text-file-in-python/15647564#15647564)

```
q = collections.deque(2) # define max size of deque 
table = []
with open("test.txt") as f:
    for line in f :
        q.append(line)
        if len(q) != 2 or len(q[0]) != 50 :
            continue
        table.append(q[0] + q[1]) 
```

适用于 python 2.7 或更高版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:47:24.980

假设文件可以轻松加载到内存中，我会执行以下操作：

```
all_fields = f.read().split():
for i in range(0, len(all_fields), 96):
    fields = all_fields[i:i+96]
    # process fields 
```

# c++ - 静态成员函数会增加类的开销吗？

> ID：15838039
> 
> 赞同：3
> 
> 时间：2013-04-05T15:40:15.163
> 
> 标签：c++, inheritance, methods, static

我想提供静态辅助函数来处理类的数据类型。我考虑将它们包括在课堂上。它们会为每个新的类实例实例化还是只实例化一次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T15:43:37.843

**函数不是“实例化的”**（除非它们是函数*模板*）。

*类*是实例化的，类的实例是*对象*。每个对象都占用内存空间，但函数只是过程，由编译器一次性生成的代码片段，并且每次实例化新对象时都不会为它们分配内存空间。

函数可以隐式地作用于类的实例（如果函数是成员函数），但这只是通过将隐式指针传递给它们工作的对象来完成。因此，即使在成员函数的情况下，无论是它们`static`还是非¹`static`，代码片段都不会激增。

如果您要问是否只为`static`函数生成一段代码，而不是几段单独的代码，那么答案是“**是**”；但是对于成员函数，答案还是一样的。

¹实际上，`virtual`成员函数确实需要为具有至少一个成员`virtual`函数的类的每个实例存储一个附加指针（该指针将指向所谓的*vtable*）。但是，`static`函数不能是`virtual`，因此这不适用于您在问题中考虑的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T15:41:27.217

不，没有与`static`成员函数相关的每个实例的开销。

**此外，除了一个例外，任何**成员函数都没有与每个实例相关的开销。例外是向一个没有任何虚函数的类添加一个虚函数；通常，这会为类的每个实例添加一个额外的指针。添加更多的虚拟函数不会产生更多的每个实例的开销。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:41:20.560

成员函数（静态或其他）只被实例化一次。在任何情况下，他们都不会给班级增加任何开销。

# php - 意外的 T_VARIABLE 第 12 行

> ID：15838040
> 
> 赞同：0
> 
> 时间：2013-04-05T15:40:21.193
> 
> 标签：php

这是我的代码。我对此非常陌生，不到 2 周，我知道这里某处存在语法错误，但它一直告诉我 T_variable 在第 12 行是意外的。它匹配“...input type="text" name=" firstname" value="First Name...\" 信息所以有人可以帮忙吗？Noob 需要帮助！只是一点点...？你能告诉我的任何事情都会非常感激。

```
<?
$correct = true;
if ($_GET["name"] == "")
    $correct = false;
if (preg_match("/^.+@\w+\.\w{2,4}$/", $_GET["email"]))
    $correct = false;

$to = "sample@domain.com";
$subject = "Application request";

$message = "A new request has come in!;\n\n"
$message .= $_GET["firstname"].;
$message .= $_GET["lastname"].;

$message .= $_GET["email"]."\n";

$message .= $_GET["phone"]."\n";
$message .= $_GET["dropdown"]."\n";
$message .= $_GET["address"]."\n";
$message .= $_GET["dropdown2"]."\n";
$message .= $_GET["textarea"]."\n";

(mail($to, $subject, $message);

?>

<body>
<? if ($correct): ?>
Thank you for applying. We will get back to you shortly.<br>
<? if else: ?>
Please complete the form.
</ end if ?>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:41:14.810

几个问题：

1

```
$message = "A new request has come in!;\n\n" 
```

应该变成：

```
$message = "A new request has come in!;\n\n"; 
```

2.

```
$message .= $_GET["firstname"].; 
```

应该变成：

```
$message .= $_GET["firstname"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:41:16.353

半冒号在错误的地方

```
$message = "A new request has come in!;\n\n"
                                      ^ 
```

应该：

```
$message = "A new request has come in!\n\n";
                                           ^ 
```

你也有错误的时期：

```
$message .= $_GET["firstname"].;
$message .= $_GET["lastname"].;
                             ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:48:57.863

```
$message .= $_GET["firstname"].;
                              ^ Remove
$message .= $_GET["lastname"].;
                             ^ Remove

$message = "A new request has come in!;\n\n"
                                            ^ -> semicolon here 
(mail($to, $subject, $message);
^ -> remove this 
```

# android - 如果光标为空/null

> ID：15838041
> 
> 赞同：0
> 
> 时间：2013-04-05T15:40:23.317
> 
> 标签：android, sqlite, cursor

如果 cursor 为空/null ，我想添加一行。

但是我使用的代码不起作用：（错误：索引 -1 请求大小为 1）

```
 final String query = "SELECT  category.CategoryID, " +
                        "category.Title, category.ParentID " +
                        " FROM category" +
                        " WHERE category.Title = '"+ _TopCategory  
                        +"'";

                Cursor cursorKayita = db.rawQuery(query, null);

                if ( cursorKayita.moveToFirst() ) {
                    // start activity 
                } else {
                _Categories.put("Title", _TopCategory);
                 db.insert("category", null, _Categories);  

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:50:38.167

> 索引 -1 请求大小为 1

这是一个 CursorIndexOutOfBoundsException。[您会看到此错误](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.2.2_r1/android/database/AbstractCursor.java#AbstractCursor.checkPosition%28%29)的唯一一次是当您尝试从 Cursor 读取数据而不调用`moveToFirst()`（或类似`moveTo___()`方法）时。但是在您发布的代码中，您没有尝试从光标中读取...

好消息是 LogCat 错误会为您提供发生此错误的行号，如果您在阅读 LogCat 时需要帮助，请单击问题下方的[“编辑”](https://stackoverflow.com/posts/15838041/edit)以发布它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:58:46.903

您应该添加一行使该问题出现在光标上

```
try{
   Lite = open_bd(); //Open database
   Cursor x = Lite.query(/*Your query*/);

   if (x.getCount() != 0 && x != null) {
      x.moveToFirst();
      //Do your activity
   }else{
      _Categories.put("Title", _TopCategory);
      db.insert("category", null, _Categories);  
   }
}catch (Exception error) {
   //Whatever with your error
} finally {
   Lite.close();
} 
```

这就是我管理游标的方式，因为当您询问游标是否为空时，我发现它们非常不稳定。它们可以为空，但并不总是为空

:D 希望有帮助

* * *

当您管理游标和数据库时，总是会执行类似的操作

```
where (cursor.getCount() < Xnumber){
   //code
} 
```

与 if 相同，您应该使用“小于”而不是“小于或等于”，因为游标和数据库从 -1 索引开始读取。

看看这个：

```
for (int i = 0; i < x.getCount(); i++) {
   if (x.getInt(1) == 0) {
      //CODE
   }
   x.moveToNext();
} 
```

# ms-access - 在访问搜索表单中解析逗号

> ID：15838043
> 
> 赞同：0
> 
> 时间：2013-04-05T15:40:28.240
> 
> 标签：ms-access

我有一个搜索表单设置访问代码来搜索关键字，代码是：

```
Like "*" & [Forms]![Search_Form]![KW_Text] & "*" 
```

我希望能够在搜索中输入多个关键字，以便它提取多个结果，截至目前，如果我输入单词“Manager”，它会返回带有单词 Manager 的所有结果。我希望能够输入经理、主管并让它返回经理和/或主管的所有结果。有任何想法吗？

# php - 如何使用 APIv3 和 PHP 禁用 youtube 中的视频评论？

> ID：15838045
> 
> 赞同：1
> 
> 时间：2013-04-05T15:40:34.113
> 
> 标签：php, youtube-api, google-api-php-client

我正在使用 google-api-php-client 将视频上传到 youtube，它使用带有 OAuth 的 API (v3) 的最新版本，我正在寻找一种方法来禁用对我上传的视频的评论。

我找到了使用 JAVA 和遗留 gdata API 的方法，但如果我是对的，我不能使用 OAuth（而且它不受 google-api-php-client 支持）。

# c# - 创建带参数的字典方法

> ID：15838047
> 
> 赞同：-2
> 
> 时间：2013-04-05T15:40:54.880
> 
> 标签：c#, dictionary

我很确定你可以从代码中看出我想要做什么，但我的语法显然是错误的......

我想要一个返回字典但也接受一些参数的方法......

```
 private Dictionary<string,Term> (SPField fld)
            {
                 var terms = new Dictionary<string, Term>();
...do something...                 
return terms;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:45:44.690

如果您要做的只是创建一个接受参数并返回字典的函数，那么您几乎已经在那里了。

```
private Dictionary<string, Term> MyFunc(SPField field)
{
    var terms = new Dictionary<string, Term>();
    \\code to do stuff goes here
    return terms;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T15:42:55.317

`return`必须全部小写。它不能有大写的“R”。

您的方法没有名称：

```
private Dictionary<string, Term> MethodNameGoesHere(SPField field)
{
    var terms = new Dictionary<string, Term>();
    return terms;
} 
```

# c++ - 结合 GetMessage 和 PeekMessage

> ID：15838059
> 
> 赞同：4
> 
> 时间：2013-04-05T15:41:26.133
> 
> 标签：c++, winapi, getmessage, peekmessage

我打算创建一个带有 2 个窗口的小应用程序，一个带有控件的普通窗口和一个 3D 窗口，用 DirectX 渲染。推荐用于 3D 窗口`PeekMessage()`，因为它在检查消息后不会等待，但对于普通窗口（无 3D 渲染），该`GetMessage()`函数用于避免处理器无意义的过度使用。因此，当 3D 窗口处于活动状态（`WM_ACTIVE`收到消息）时，我想使用`PeekMessage()`，而当普通窗口处于活动状态时，我想使用`GetMessage()`。

主循环如下所示：

```
NormalWindowActive = false;
Window3DActive = false;
MSG msg;

while (TRUE) {
    if (PeekMessage(&msg, NULL, 0U, 0U, PM_REMOVE)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    if (NormalWindowActive) {
        if (GetMessage(&msg, NULL, 0, 0)) {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    } else {
        RenderWindow();
    }
} 
```

在这些窗口的消息处理程序中，我有`WM_ACTIVATE`消息：

```
HWND NormalWindow, Window3D; // These windows are global vars

LRESULT CALLBACK WndProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam) {
    // ...
    case WM_ACTIVATE:
        if (wParam!= WA_INACTIVE) {
            if (hWnd == NormalWindow) {
                NormalWindowActive = true;
                Window3DActive = false;
            } else {
                Window3DActive = true;
                NormalWindowActive = false;
            }
        }
    break;
    // ...
} 
```

我对 TaskManager 的期望是在 3D 窗口处于活动状态时显示应用程序繁忙（大约 50% 的处理器使用），而在正常窗口处于活动状态时显示应用程序繁忙（大约 5% 的处理器使用）。当两个窗口都失去焦点时，我只看到 50% 的处理器使用率，但当它们中的任何一个处于活动状态时，我看到 0-5% 的处理器使用率。我相信应该有区别，所以我不确定这是否真的有效（甚至可能）。3D 窗口被渲染，普通窗口也响应事件，但处理器的使用让我感到困惑。我只是不希望这影响 3D 窗口的 F​​PS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T02:28:29.653

您应该检查 3D 窗口是否处于非活动状态，而不是检查普通窗口是否处于活动状态。您也可以使用`WaitMessage`代替，`GetMessage`因为它可以避免重复代码。

例如：

```
if (Window3DActive)
    RenderWindow();
else
    WaitMessage(); 
```

您的问题似乎是当普通窗口处于非活动状态时，即使 3D 窗口处于非活动状态，消息循环也不会等待。

如果您决定使用`WaitMessage`，您还应该循环，`PeekMessage`因为队列中可能有不止一条消息，并且`WaitMessage`在有新消息到达之前不会返回。

# ruby-on-rails - 使用 link_to 按钮在 2 个不同的控制器上调用操作

> ID：15838064
> 
> 赞同：1
> 
> 时间：2013-04-05T15:41:42.140
> 
> 标签：ruby-on-rails

我想用 link_to 按钮调用 2 个不同的操作。当我放置以下代码时，按钮仅显示为蓝色链接，并且不会调用第二个操作。有人知道解决这个问题的策略吗？

```
<%= link_to "Remove from Cabinet", { :controller => 'devices', :action => 'detach_device_from_cabinet', :id => device.id }, 
            { :controller => 'cabinets', :action => 'unmark_validated', :id => @cabinet.id }, :class => "btn btn-danger", :confirm => "Detach Device: are you sure?" %> 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:07:46.773

从单个 link_to 调用多个控制器操作不是一个好习惯。您在视图中添加了太多逻辑。

有一种称为“胖模型，瘦控制器”的导轨设计模式。您希望所有业务逻辑都在模型中完成，并且控制器只调用模型的方法。在这个具体的例子中，您想从一个机柜中分离设备，每个设备可以在一个机柜上，每个机柜可以容纳多个设备。

我没有检查过这段代码，但它应该接近你想要的：

`cabinet.rb`

```
class Cabinet < ActiveRecord::Base
  has_many :devices
  ...

  def self.detach_device(id)
    cabinet = Cabinet.where(device: id).first
    cabinet.devices.drop(id)
    cabinet.unmark_validated
  end

  def unmark_validated
     cabinet.marked == false
  end
end 
```

`device.rb`

```
class Device < ActiveRecord::Base
  belongs_to :cabinet
  ...

end 
```

`cabinets_controller.rb`

```
class CabinetsController < ApplicationController
  def detach_from_cabinet
    @cabinet = Cabinet.detach_device(params[id])

  end
end 
```

`<%= link_to "Remove from Cabinet", :controller => 'cabinets', :action => 'detach_device', id => device.id %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:46:13.050

我以前从来没有这样过，我不明白逻辑，但是你应该进行重构......调用一个动作，发送数据，那个动作可以调用一个函数来执行你想做的其他事情。此外，您应该使用别名，在路由中定义它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T15:36:50.143

有类似的情况，我需要用户在一个模型视图中按下按钮并在不同模型的控制器中创建一个新行，然后同时更改源模型中的布尔属性。我最终细化了我的控制器并在相应的模型中创建了一个新方法并在操作中指向它。捎带@John的回答，这对我有用，对于您或任何需要在一个用户按下按钮时执行多个操作的人来说，这可能是一种替代策略，并且可能在多个模型之间：

FOO 控制器/新

```
 def new
    ...
    # After button is pushed sending params to this action, thusly 
    # creating the new row, and saving it 
    @foo.save
    # Then to the newly created method
    @foo.new_method 
    # and back for a redirect
    redirect_to :foos, notice: "..."
  end 
```

foo.rb

```
 def new_method
    @bar = Bar.find_by(:attribute => true)
    # Simply need to fllip attribute from true to false
    if @bar.attribute == true
      @bar.attribute = false
    end
    @bar.save
  end 
```

# php - 通过 php 从 mysql 接收旧数据

> ID：15838067
> 
> 赞同：0
> 
> 时间：2013-04-05T15:42:04.213
> 
> 标签：php, mysql, crud

我已经用 php 构建了一个小型 web 表单，我可以从 mysql db 更新和插入一些数据。表单预先填充了数据库中的数据......到目前为止一切正常......问题是当我重新加载表单时，我从数据库接收到旧数据......但是当我正在查看数据库时更新/新数据在那里...实际上我没有在网页中使用任何缓存...不知道该怎么办？？？

...

```
if(isset($_REQUEST['createTranslationSet']) && (!empty($id)) ) {

    $connect = new mysqli($dbhost, $dbuser, $dbpass, $dbname);
    $mysqli->autocommit(false);

    $mysqli = $connect->prepare("INSERT INTO `translation-ids`(`ID`) VALUES (NULL)");       
    $mysqli->execute();
    $l10id = $mysqli->insert_id;

    $mysqli = $connect->prepare("UPDATE places SET places.translationID = ? WHERE places.id = ?");
    $mysqli->bind_param('ii', $l10id, $id); 
    $mysqli->execute();

    $mysqli = $connect->prepare("SELECT * FROM places WHERE places.id = ?");
    $mysqli->bind_param('i', $id);
    $mysqli->execute();

    $mysqli->fetch();

    echo ($translationID); 
```

# bash - sed（或 awk）替换列表中的主机

> ID：15838068
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:42:05.070
> 
> 标签：bash, sed, awk

抱歉标题令人困惑，如果没有示例，我无法完全表达我正在尝试做的事情。

我运行了一串命令，生成如下所示的输出：

```
Host_A
Host_B
Net_X
Group_Y 
```

等等等等

然后我想获取该输出并将其提供给 sed，以便它将在上一个列表中找到的字符串的任何实例替换为新字符串，例如 Host_Q。

```
sed 's/Host_A/Host_Q/g' 
```

工作正常，但是我想避免手动为每个主机编写一个 sed 字符串。

谢谢！

编辑：更好的例子

grep 流产生：

```
Host_A
Host_B
Host_C
Host_D
+lots more 
```

我想将该 grep 流通过管道传输到 sed，并让 sed 用新的（尽管相同的）主机名替换这些主机的所有实例。

Editx2：此外，列表是动态的。因此，我针对新文件运行的每种类型，内容都会有所不同，这就是为什么我不能（也不想）对原始值进行硬编码。

编辑：：：

我自己想出来的，对不起各位。

我正在这样处理流：

```
awk '{print "sed \x27s\/"$1"/HOST_Q/g\x27"}' 
```

抱歉让我如此混乱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:53:27.450

你想像这样在同一个命令中放置多个替换字符串吗？

```
mycommands | sed '
s/Host_A/Host1/g 
s/Host_B/Host2/g 
s/Net_X/Net1/g 
s/Group_Y/Group2/g' 
```

或者像这样创建一个命令文件：

```
#!/bin/sed -f
s/Host_A/Host1/g 
s/Host_B/Host2/g 
s/Net_X/Net1/g 
s/Group_Y/Group2/g' 
```

将此脚本另存为“chgnames”之类的文件并使其可执行，您可以使用简单的命令：

我的命令 | ./chgnames

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:55:59.633

```
sed 's#^\(Host_A\|Host_B\)$#Host_Q#' 
```

那？

# c# - 想在字符的 ASCII 码或位移位上加一个数字

> ID：15838075
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:42:33.667
> 
> 标签：c#, ascii

好的，我接受一个字符串输入，将其转换为 char 数组并将其 ASCII 保存在一个数组中。

```
Random r = new Random();
        Console.WriteLine("Enter name : ");
        char[] name = Console.ReadLine().ToCharArray();
        byte[] by = new byte [name.Length];
        int[] arr = new int[name.Length];
        FileStream fs = new FileStream("F:\\abc.txt", FileMode.Create, FileAccess.Write);
        for (int i = 0; i < name.Length; i++)
        {
            fs.WriteByte((byte)name[i]);
        }

        for (int i = 0; i <name.Length ; i++)
        {
            by[i] =  ( ((byte )name[i]));

        }
        //for (int i = 0; i < name.Length; i++)
        //{
        //   arr[i] = (byte by[i] (Convert.ToInt16);
        //}
        // fs.WriteByte(48); fs.WriteByte(8); fs.WriteByte(60); fs.WriteByte(80);
        fs.Flush();
        fs.Close(); 
```

它保存了 ASCII ......我们可以通过任何方式将其转换为 int 并在值中添加某个数字。我基本上是为了加密而做的，它只是其中的一小部分。并且如果我们添加的数字可以随机生成......我们可以在解密文本时继续使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:57:55.237

这可能会帮助你。您实际上不需要在语言级别转换为数字 - 您的信息更容易作为字符串或字节数组进行操作。

以下代码替换现有代码的输出部分，并使用`Random`实例对随机数进行按位相加`r`。

```
byte[] randomNumber = new byte[name.Length];
r.NextBytes(randomNumber);
for (int i = 0; i <name.Length ; i++)
{
    fs.WriteByte((byte)name[i] ^ randomNumber[i]);
} 
```

假设您打算`randomNumber`单独存储某处，您将使用相同的按位运算符`^`进行“解密”，其方式与此处用于“加密”的方式相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:10:29.920

使用 C# 有点棘手，因为（根据[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/x9h8tsay.aspx)） Char 是 16 位 Unicode 数值，而不仅仅是 ASCII，所以您必须小心使用非 ASCII 符号和解析具有奇怪编码的文件。另一方面，它可以很容易地转换为 Unsigned Short Int、Int、Double 和其他一些类型。

基本上，简单的类型转换可以解决问题：

```
char character;
int ascii_code = (int)character;
//some fency math and encoding with ascii_code goes here...
char encrypted_char = (char)ascii_code; 
```

不确定，如果 Visual Studio 允许直接使用`char`类型变量进行数学运算（C、C++ 可以）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:33:50.373

正确执行此操作的方法是：

```
Console.WriteLine("Enter your name:");
string name = Console.ReadLine();
byte[] ascii = Encoding.ASCII.GetBytes(name);
short[] shorts = bytes.Select(b => (short)b).ToArray();
int[] finalBytes = new int[shorts.length];
int[] randomKey = new int[shorts.length];
int ndx = 0;
Random r = new Random();

foreach (short b in shorts)
{
    int rByte = r.Next(1, 5000);
    int singleByte = b + rByte;
    finalBytes[ndx] = singleByte;
    randomKey[ndx] = rByte;
    ndx++;
}

// finalBytes now holds your data. Do something with it!
// randomKey holds your hash data. To decode this, you'll
// need to subtract the value in randomKey[n] from finalBytes[n] 
```

正如其他人所说，强烈建议不要在任何生产代码中使用此代码！

# c# - 检测线程何时关闭

> ID：15838077
> 
> 赞同：1
> 
> 时间：2013-04-05T15:42:33.990
> 
> 标签：c#

在我的`C#`应用程序中，我有一个单独的窗口，其中包含一个在单独线程中运行的进度条。它每 30 秒从服务器发送一个数据请求，并相应地填充进度条。

问题是，当我关闭主程序时，带有进度条的第二个窗口保持打开状态。

如何对第二个线程进行编程以检测第一个线程何时关闭，并相应地关闭自己？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:46:20.067

您可以使用第一个窗口中的 Window_Closed 事件：

```
private void Window1_Closed(object sender, EventArgs e)
{
    Window2.Close(); // Close your second window
} 
```

然后在第二个窗口中：

```
private void Window2_Closed(object sender, EventArgs e)
{
    // abort all Threads
    thread.Abort();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:52:54.987

使工作线程成为后台线程。 [http://msdn.microsoft.com/en-us/library/h339syd0.aspx](http://msdn.microsoft.com/en-us/library/h339syd0.aspx)

不建议从其父线程关闭子线程，因为这很可能会阻止某些资源被正确释放。

# glassfish - Eclipselink JPARS 异常“未找到 ECLIPSELINK_OXM_XML_KEY”

> ID：15838089
> 
> 赞同：1
> 
> 时间：2013-04-05T15:43:01.350
> 
> 标签：glassfish, eclipselink, derby

我正在使用 Glassfish 3.1.2 和 Eclipselink 2.4.1（至少我是这么认为的！）和 derby（来自 Glassfish 作为 JTA 资源）。

通过“XXXX:8080/myapp/persistence/”访问我的应用程序中的实体时，出现以下错误。请注意：“Eclipselink Persistence Service”报告的版本为 2.3.2，这对我来说也很奇怪。我希望看到我配置的版本 2.4.1（见下文）。

有任何想法吗？

```
INFO: JTS5014: Recoverable JTS instance, serverId = [100]
INFO: [EL Info]: 2013-04-05 17:11:09.876--ServerSession(478107)--file:Server/glassfish3/glassfish/domains/domain1/eclipseApps/stats/WEB-INF/classes/_onLocal login successful

FINE: An Exception was thrown while creating a JAXBContext for persistence unit [onLocal]: [javax.xml.bind.JAXBException
 - with linked exception:
[Exception [EclipseLink-50055] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.JAXBException
Exception Description: Error creating DynamicJAXBContext: ECLIPSELINK_OXM_XML_KEY not found in properties map, or map was null.]]
INFO: [EL Info]: 2013-04-05 17:11:10.191--ServerSession(478107)--file:Server/glassfish3/glassfish/domains/domain1/eclipseApps/tracktron_stats/WEB-INF/classes/_tracktronLocal logout successful

FINE: You are requesting types [[*/*]] from JPA RS.
FINE: exception_marshalling_persitence_unit (There is no English translation for this message.) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:39:08.887

主要原因是这里使用的 Glassfish 版本（V3.1.2）：该项目是使用 eclipselink 2.4.1 构建的，但 Glassfish 带有旧版本（见日志）。这不是那么容易解决的，但还有另一个 stackoverflow 解决方案终于奏效了：

[Glassfish 3 类加载器序列](https://stackoverflow.com/questions/6814459/glassfish-3-classloader-sequence)

# c# - MVC4 - 滑块的 JQueryUI Html Helper 正在呈现但不可见

> ID：15838090
> 
> 赞同：0
> 
> 时间：2013-04-05T15:43:01.147
> 
> 标签：c#, jquery-ui, razor, asp.net-mvc-4, html-helper

我在我的 MVC4 应用程序中使用[jQuery UI Helpers ：](http://jqueryuihelpers.apphb.com/Docmo/GettingStarted)

```
<div class="span6">
    @Html.JQueryUI().SliderFor(x => x.WantsStudentWeighting).Min(1).Max(10)
</div> 
```

当我运行我的应用程序时，滑块在那里，但不是 100% 可见。我知道它在那里，因为当我在滑块所在的区域内和周围单击并沿比例移动它时，我可以看到滑块手柄 - 加权值也会发生变化。这是证据：

![在此处输入图像描述](https://i.stack.imgur.com/aAsJy.gif)

我所有的脚本和 css 文件都在那里。我试图编辑 jqueryui.slider.css 文件但无济于事。我还更改了包含 DIV 的背景颜色，以确保滑块没有呈现为白色。

我的想法已经用完了 - 一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T06:40:46.957

在 BundleConfig 文件中为 jquery-ui.unobtrusive-xyzjs 创建一个新的包。也可以将它添加到 jQuery UI 包中，以便在引用 jQuery UI 时始终包含它。下面的示例演示了这一点。

```
 bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
            "~/Scripts/jquery-ui-{version}.js",
            "~/Scripts/jquery-ui.unobtrusive-{version}.js")); 
```

在布局页面或需要它们的视图上渲染包。像这样添加 jQuery UI CSS 文件：

```
@Styles.Render("~/Content/css")
@Styles.Render("~/Content/themes/base/css") 
```

和 JavaScript 文件：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui") 
```

捆绑包将自动处理版本号，因此您在升级包时不必担心它们。

如果您使用客户端验证，请在 jQuery UI Helpers 脚本之前包含验证脚本。[更多信息。](http://jqueryuihelpers.apphb.com/Docmo/Datepicker#format-validation)

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval")
@Scripts.Render("~/bundles/jqueryui") 
```

我希望这有帮助

# merge - 使用dos“copy”函数合并两个文件

> ID：15838091
> 
> 赞同：0
> 
> 时间：2013-04-05T15:43:06.377
> 
> 标签：merge, copy, dos

我想使用复制功能将 2 个文本文件合并为一个

第一个文本

```
Results = 
```

第二个文本

```
Fine 
```

所以我试图像这样复制它：

```
copy 1.txt + 2.txt 
```

或者

```
copy /A 1.txt + 2.txt 
```

或者

```
copy /B 1.txt + 2.txt 
```

但结果总是一样的：

```
Results = 
Fine 
```

我已经用十六进制检查了这个文件，并且总是将它们添加 0x0D 0x0A

但我需要这种格式：

```
Results = Fine 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:17:09.833

如果两个文本文件中的每一个中总是只有一行，那么您可以通过以下方式实现您想要的：

```
for /f "delims=" %%i in (1.txt) do set line1=%%i
for /f "delims=" %%i in (2.txt) do set line2=%%i
echo %line1%%line2%>3.txt 
```

该`copy /b`命令应该可以工作，但是您的`1.txt`文件必须在`Result =`. 所以它被流式传输到新文件。使用上述命令将忽略每个文件末尾的 0x0D 0x0A 并将最后一行的文本与两个文件中的文本结合起来。这就是为什么两个文件都应该只包含*一行*文本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:28:55.513

@Jamel L. 谢谢你的作品就像一个魅力:)

```
@echo off
echo ContentID = > package.conf
for /f "delims=" %%i in (package.conf) do set line1=%%i
for /f "delims=" %%i in (CID.txt) do set line2=%%i
echo %line1%%line2%>package.conf
echo Klicensee = 0x2A6AFBCF43D1579F7D738741A13BD42E>> package.conf
echo DRMType = Free>> package.conf
echo ContentType = minis>> package.conf
echo PackageVersion = 01.00>> package.conf 
```

输出文件：

```
ContentID = UP4306-NPUZ00210_00-MADBLOCKERALPHA1
Klicensee = 0x2A6AFBCF43D1579F7D738741A13BD42E
DRMType = Free
ContentType = minis
PackageVersion = 01.00 
```

在 eof 有新行，但它可以在那里 :)

# sql - 改善较差的间歇性 SQL 查询性能

> ID：15838092
> 
> 赞同：1
> 
> 时间：2013-04-05T15:43:07.443
> 
> 标签：sql, sql-server, tsql, query-performance

我有一个中等复杂的嵌套 T-SQL 查询，它在大多数情况下具有良好的性能，除了在我的每个 2 周支付期开始时（要处理的记录更少！）查询陷入了数量级慢点。然后在双周期间的某个时间点，SQL Server (2008) 确定执行计划应该改变并且一切都恢复到正常速度。我有“好”和“坏”场景的执行计划，但我是这方面的 n00b，我不知道如何解释它们。下一步对我来说是什么？发布查询？执行计划？阅读一些文章/书籍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:54:54.557

尝试在 2 周开始时更新查询中表的统计信息：

DBCC UPDATE STATISTICS 表名

有一些选项，比如 WITH FULLSCAN 你也可以尝试。查看 SQL Server 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T13:22:27.840

我在 answers.sqlperformance.com 上得到了一些帮助，虽然`UPDATE STATISTICS <table>`确实有帮助，但它似乎掩盖了真正的问题。我正在使用这些构造`(SELECT COUNT(*) ...) = 0`，`(SELECT * ...) IS NULL`我应该在什么时候使用`NOT EXISTS (SELECT * ...)`. 在所有情况下，改变这些导致几乎另一个数量级的改进。看起来 SQL 计划优化器在这种情况下能够更好地工作。

# javascript - HTML元素的完美重叠？

> ID：15838095
> 
> 赞同：8
> 
> 时间：2013-04-05T15:43:22.723
> 
> 标签：javascript, html, css

是否可以编写一个 JavaScript 函数，给定任何 HTML 元素（在屏幕上可见），它会创建另一个 HTML 元素堆叠在它上面（以便覆盖它）？然后，如果我调整页面大小，它会完全按照它所覆盖的组件移动。

（例如，如果我使用 getBoundingClientRect 如果原始组件的宽度以百分比表示，它将不起作用）

该函数应该处理元素（在输入中）是否具有边距、填充、边框、其显示是块还是内联等的任何情况。

我尝试添加一个位置：相对于父组件，然后在“封面”组件上创建一个位置：绝对。这不起作用，因为它不处理填充或边距等情况。

注意：没有 jQuery。如果可能的话，纯“跨浏览器”JavaScript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:52:03.053

使用jQuery写在下面的封面函数请试试这是否适合你

嗨，我已经更新了满足您需求的代码...

```
function coverDiv(sourceId, targetId){  
    var source = document.getElementById(sourceId);
    var sourceComputed = window.getComputedStyle(source);
    var target = document.getElementById(targetId); 
    var positioningProps = ["float","width","height","left","top","marginLeft","marginTop","paddingLeft","paddingTop"];
    var cssText = "";
    for(var i in positioningProps){        
            cProp = positioningProps[i];              
            if(source.style[cProp] == "" || source.style[cProp] == null)
                target.style[cProp] =  sourceComputed[cProp];
            else
                target.style[cProp] = source.style[cProp];
    }
    source.style['position'] = "absolute";
    source.style['zIndex'] = "1";
    target.style['position'] = "absolute";
    target.style['zIndex'] = "999";
} 
```

在这里尝试演示:: [http://jsfiddle.net/tushhtrivedi/RDFRm/10/](http://jsfiddle.net/tushhtrivedi/RDFRm/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:51:14.850

我建议您将一个元素附加到您希望“覆盖”的元素，给父元素位置：相对，并给附加元素位置：绝对；顶部：0；左：0；底部：0；右：0；

例子...

标记：

```
...
<div id="content">
    <div class="cover"></div>
    <div></div>
</div>
... 
```

CSS：

```
.cover { position: relative; }
.cover .mask { position: absolute; top:0; left:0; bottom: 0; right: 0; } 
```

jQuery

```
$(function(){
    $('.cover').append('<div class="mask" />');
}); 
```

此方法将允许您忽略任何调整大小时发生的情况......

==========================

根据反馈改进...

填充应该按绝对位置排序，对于边框和边距，您需要使用一些 js 并在掩码元素上设置负边距。我包含的演示链接仅处理具有统一填充/边距的元素 - 如果您在每一侧都有具有不同填充/边距的元素，那么您将不得不做更多的解析。

附加的 javascript 看起来像：

```
var $hideme = $('.cover');
$('.mask',$hideme).css("margin", "-="+$hideme.css('border-width'));
$('.mask',$hideme).css("margin", "-="+$hideme.css('margin')); 
```

[演示](http://jsfiddle.net/PHPsycho/NE9Zt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T11:14:42.143

```
function addCover(id) {
 var element = document.getElementById(id);

 var wrapper = document.createElement('div');
 var cover = document.createElement('div');

 wrapper.setAttribute('style', 'position: relative;');

 cover.setAttribute('style','position:absolute; top: 0; bottom:0; right: 0; left: 0; width: 100%; height: 100%; z-index:10;')

 element.parentElement.replaceChild(wrapper, element);

 wrapper.appendChild(element);
 wrapper.appendChild(cover);    

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T15:50:43.717

添加 position:relative to parent 组件和 position:absolute 在封面上听起来是可行的，实际上，只要你考虑到 padding、margin 和border。将顶部设置为 -1*(padding-top+margin-top+border-width-top)，其他边以此类推。在不设置宽度或高度的情况下执行此操作，它会自行调整大小以将其边缘贴在您放置它们的位置。但是，这将无法在不能包含 div 的组件上工作。

详细说明：

您使用这种方法遇到的问题是，如果您尝试使用 width:100px; 覆盖一个元素；填充：10px；边框：1px 纯黑色，封面只有 100 像素宽，不覆盖 10 像素的填充或 1 像素的边框。您可以通过将 left 和 right 设置为 -11px 而不是 0 来补偿这一点。您必须在添加封面的 javascript 函数中对此进行补偿，除非您有兴趣覆盖的所有内容都具有相同的填充、边框和边距.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T11:21:13.660

那么，一个元素应该完全隐藏另一个元素吗？直到什么？一个给定的时间，它被隐藏以显示它下面的元素？

为什么不直接用新元素***替换***元素，直到您希望原始元素可见？这将解决滚动问题。

使用纯 JavaScript 更容易做到。

除非您要替换框架站点上的元素，否则您首先不应该这样做，恕我直言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T10:07:35.800

我希望这是你想要的

```
//https://stackoverflow.com/a/442474/1989562
function getOffset(el) {
var _x = 0;
var _y = 0;
while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {
    _x += el.offsetLeft - el.scrollLeft;
    _y += el.offsetTop - el.scrollTop;
    el = el.offsetParent;
}
return {
    top: _y,
    left: _x
};
}

function overlap(element) {
this.element = element;
this.overlapper = document.createElement("Div");
this.__constructor = function () {
    var left = getOffset(this.element).left;
    var top = getOffset(this.element).top;
    var width = this.element.offsetWidth;
    var height = this.element.offsetHeight;
    this.overlapper.style.position = "absolute";
    this.overlapper.style.width = width + "px";
    this.overlapper.style.height = height + "px";
    this.overlapper.style.left = left + "px";
    this.overlapper.style.top = top + "px";
    this.overlapper.style.background = "black";
    this.overlapper.style.zIndex = 999;
    document.body.appendChild(this.overlapper);
}
this.update = function () {
    var left = getOffset(this.element).left;
    var top = getOffset(this.element).top;
    var width = this.element.offsetWidth;
    var height = this.element.offsetHeight;
    this.overlapper.style.top = top + "px";
    this.overlapper.style.left = left + "px";
    this.overlapper.style.width = width + "px";
    this.overlapper.style.height = height + "px";
}
this.__constructor();
} 
```

元素函数的偏移量在这篇文章 [https://stackoverflow.com/a/442474/1989562](https://stackoverflow.com/a/442474/1989562)

我以小提琴为例

[http://jsfiddle.net/takedownbig/ASuEJ/](http://jsfiddle.net/takedownbig/ASuEJ/)

它将获取元素在屏幕上的实际位置，要使元素更新必须触发对象的更新功能，我建议像我的示例一样使用。在 ie9+ 上工作我也想在 ie8 上工作：/

@edit：该函数没有所有的更新方式，但如果你找到它们，你可以简单地触发更新函数来修复实际的位置和宽度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-09T17:20:54.770

假设我对您的理解正确，那么简单（也是最好）的方法是在您要覆盖的元素内嵌套一个元素。外部元素应具有相对位置，嵌套元素应具有绝对定位（每边设置为 0）。为每个元素使用 z-index，您可以将它们叠加在一起，而不管填充或边距。

```
<style>
.layer-1 {
    width: 100px;
    height: 100px;
    background: red;
    position: relative;
    z-index: 1;
}
.layer-2 {
    background: blue;
    position: absolute;
    z-index:2;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
</style>
<div class="layer-1">
    <span class="layer-2"></span>
</div> 
```

只有几行代码的实时示例，仅 CSS/HTML：http: [//jsfiddle.net/3hBsZ/](http://jsfiddle.net/3hBsZ/)

编辑：重新阅读了这个问题，我确实误读了它。您正在寻找一种 javascript 解决方案，而不是基于 CSS 的解决方案。但是，这种 CSS 解决方案将比基于 javascript 的解决方案更有效且跨浏览器。只是我的观点...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-08T15:43:50.223

这是一个甚至适用于固定或绝对定位元素的版本，并且在滚动或重排更改元素的位置或大小时不会中断：

```
function cover(el, filling) {
  var c = document.createElement('div');
  c.style.background = filling;
  var els = window.getComputedStyle(el)
  c.style.position = els.position=='fixed' ? 'fixed':'absolute';
  c.style.zIndex = parseInt(els.zIndex)+1;
  document.body.appendChild(c);
  var place = function() {   
    c.style.width = el.offsetWidth+'px';
    c.style.height = el.offsetHeight+'px';
    c.style.left = el.offsetLeft+'px';
    c.style.top = el.offsetTop+'px';
  };
  place(); 
  window.addEventListener('resize', place);
} 
```

你这样称呼它：

```
cover(myElement, 'black'); 
```

**[示范](http://jsbin.com/ifoseq/12)**

有两个限制：

*   对于某些多行内联块，它不能正常工作
*   由于它涉及对调整大小事件做出反应的脚本，因此可以通过快速调整大小来临时查看背后的元素

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-11T21:43:18.627

通常，这是一个看起来要简单得多的问题，但当您开始尝试解决它时就会发现它。我试了一下，虽然它还不是我喜欢的 100%，但我会与你分享我的结果。

首先我应该注意到 jQuery 是完全有效的跨浏览器 JavaScript，所以我想不出任何不使用它的充分理由。当然，如果您从 Google CDN 或类似网站加载它，它可能已经在您的用户缓存中。所以我继续写了一个小的 jQuery 插件（老实说，我的老式 JavaScript 实在是太生疏了）。

首先是代码：

```
// jQuery plugin to create overlays
// apply to any container that contains DOM elements to be overlayed
$.fn.overlayDiv = function() {
    // remove any old overlays (could be there on resize)
    $(this).find('.overlay').remove();

    // loop trough the remaining children
    $(this).find('*').each(function() {
        // cache some variables
        var $el =  $(this);
        var $parent = $el.parent();

        // make the parent relative, if not yet absolute or fixed, for easy positioning
        if ($parent.css('position') !== 'fixed' && $parent.css('position') !== 'absolute') {
            $parent.css('position', 'relative');            
        }

        // prepare the css
        var css = {};
        css.zIndex = $el.css('z-index');
        css.position = $el.css('position') == 'fixed' ? 'fixed' : 'absolute';
        css.display = 'block';
        // check if inline or block, and calculate settings appropriately
        if ($el.css('display') == 'inline') {
            // -- inline
            // clone the element and render it on one line
            var $clone = $el.clone();
            $clone.css({
                width: 'auto',
                display: 'block',
                whiteSpace: 'nowrap'
            });
            $clone.insertAfter($el);
            // compare height of element and clone
            if ($el.outerHeight(true) == $clone.outerHeight(true)) {
                // if the $el is on a single line
                css.width = $el.outerWidth(true);
                css.height = $el.outerHeight(true);
                css.top = $el.position().top;
                css.left = $el.position().left;  
                // apply the styling to an overlay div and include it in the DOM
                $('<div class="overlay"></div>').css(css).insertAfter($el);
            } else {
                // if the $el is on multiple lines (we need up to 3 divs to overlay)
                // -- this part of the code needs improving --
                var lineHeight = $clone.outerHeight();
                var totalWidth = $clone.outerWidth();
                var lines = $el.outerHeight() / lineHeight;
                var maxWidth = $parent.width();
                // top overlay
                css.width = maxWidth - $el.position().left;
                css.height = lineHeight;
                css.top = $el.position().top;
                css.left = $el.position().left;
                $('<div class="overlay top"></div>').css(css).insertAfter($el);
                // bottom overlay
                css.width = totalWidth - css.width - ((lines-2) * maxWidth);
                css.top = css.top + (lineHeight*lines);
                css.left = 0;
                $('<div class="overlay bottom"></div>').css(css).insertAfter($el);
                // center overlay
                css.width = maxWidth;
                css.height = (lines- 2) * lineHeight;
                // -- /needs improving -- //
            }
            $clone.remove();
        } else {
            // -- block
            css.width = $el.outerWidth(true);
            css.left = $el.position().left;
            // -- height and top might need to improved if you want collapsing margins taken into account
            css.height = $el.outerHeight(true);
            css.top = $el.position().top;
            // apply the styling to an overlay div and include it in the DOM
            $('<div class="overlay"></div>').css(css).insertAfter($el);
        }
    });
}

// when the window is loaded or resized (not just ready, the images need to be there to copy their position and size)
$(window).on('load resize', function() {
    // apply the overlay plugin to the body to cover all elements, or recalculate their positioning
    $('body').overlayDiv();
}); 
```

那里有很多评论，所以我认为应该可以理解，但请随时询问您是否需要任何澄清。

你可以在这里看到代码：http: [//jsfiddle.net/pP96f/7/](http://jsfiddle.net/pP96f/7/)

关于剩下的 2 个问题：

*   最大的问题是跨多行的内联元素。如果您只想覆盖元素内的文本，则最多需要三个单独的叠加层才能实现此目的。我一直在努力解决尺寸问题（尤其是底部 div 的宽度），最终我放弃了。任何输入将不胜感激！
*   一个较小的问题是边距塌陷。这应该不难解决，但我不确定您希望如何处理。（而且我已经在这个问题上花费了很多时间......）

希望我的意见能对您有所帮助！

**编辑：**

对于允许您选择要覆盖的特定元素的版本，而不仅仅是选择一个父项并让所有子项（递归地）覆盖，请查看代码的略微更改版本：[http://jsfiddle。净/ARWBD/2/](http://jsfiddle.net/ARWBD/2/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-11T19:35:07.547

刚刚在谷歌搜索其他内容时遇到了这个旧线程。

如果您只想突出显示要覆盖的元素并在叠加层中放置一些文本，那么您可以在没有任何 javascript 的情况下执行此操作，只需使用 CSS :after （要覆盖的元素需要 position: relative 虽然）。

```
div#source {
    position: relative;
}

div#source:after {
    content: "Covered";
    background: purple;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
} 
```

[http://jsfiddle.net/kfdmta7w/](http://jsfiddle.net/kfdmta7w/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-30T12:44:43.610

通过使用 jquery UI [position](http://api.jqueryui.com/position/)试试这个：

```
 _overlapTwoElements(topElement, baseElement) {
       if(baseElement.length && topElement.length) {
          topElement.width(baseElement.width());
          topElement.height(baseElement.height());
          topElement.position({ my: "left bottom", at: "left bottom", of: baseElement });
       }
    } 
```

# android - 接收器中的 getApplication()

> ID：15838103
> 
> 赞同：0
> 
> 时间：2013-04-05T15:43:38.077
> 
> 标签：android, broadcastreceiver

我为一个涉及 SMS 的应用程序编写了一个接收器，它使用硬编码的联系人进行了很好的测试，但现在我想使用一个使用偏好活动从用户那里获取的电话号码。

我在我的应用程序对象中设置了一个 SharedPrefernces 对象，并且由于服务/活动和接收器 getApplication() 之间的上下文差异无法使用，并且 getApplicationContext() 仅在您的上下文之后才相似，因此我已经阅读了该对象。

有什么方法可以参考我的接收器中的联系人，还是我应该完全改变我的方法？Java新手，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:53:34.933

接收者确实收到了上下文，从那里你可以调用相同的共享首选项：

[context.getSharedPreferences(String, int);](https://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)

# git - 在 webspace 上发布 git 存储库

> ID：15838106
> 
> 赞同：2
> 
> 时间：2013-04-05T15:43:43.273
> 
> 标签：git, repository, hosting, publish

我是版本控制概念的新手，几天前才开始使用 git。我认为这是管理项目的一种非常酷的方式，我正计划使用 git 创建自己的网站。

我基本上知道如何使用它。我在 bitbucket 上有一个存储库。但我不明白如何从存储库发布项目。所以我想把我所有的代码都放在里面，当我完成后，我想在我的网络空间中获取所有文件，而不需要手动上传。有没有办法做到这一点？

Git 似乎真的很有用，我也喜欢 bitbucket，但我绝对不明白在存储库中工作后如何在我的网络空间上发布文件。对不起，如果答案很明显，我用谷歌搜索了很多，没有找到一个好的答案。

顺便说一句：我还没有选择网络托管服务，所以请告诉我是否需要 SSH 之类的东西来完成我想做的事情。我没有root访问权限。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T13:17:33.680

这里有一个不错的指南：http: [//toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)虽然您需要通过 SSH 访问您的网络主机。

# jquery - 导航栏的 jQuery 悬停效果不起作用？

> ID：15838112
> 
> 赞同：5
> 
> 时间：2013-04-05T15:44:01.453
> 
> 标签：jquery, html, navigation, hover, navbar

出于某种原因，我只是无法让悬停效果工作
HTML：

```
<div id="navbarcontainer">
    <ul>
        <li id="left" class="current">
            <a id="current">Home</a></li>
        <li class="dependant1">
            <a id="dependant1">Services</a></li>
        <li id="right" class="dependant2">
            <a id="dependant2">Contact</a></li>
    </ul>
</div> 
```

CSS：

```
#navbarcontainer {
margin: 0;
padding: 0;
height: 50px;
background: #01216D;
}

#navbarcontainer ul {
    clear: both;
    margin: 0;
    padding: 0;
    list-style: none;
}

#navbarcontainer li {
    display: inline-block;
    height: 50px;
    width: 100px;
    list-style: none;
    text-align: center;
    -moz-transition: .5s;
    -o-transition: .5s;
    -webkit-transition: .5s;
    transition: .5s;
    /* Firefox 4 */
    /* Opera */
    /* Safari and Chrome */
}

    #navbarcontainer ul li a {
        text-decoration: none;
        line-height: 50px;
        width: 100px;
        font-size: 20px;
        font-family: Calibri;
        cursor: pointer;
    }

#left {
    margin-right: 40px;
    margin-left: 20px;
}

#right {
    margin-left: 40px;
}

.current {
    background: #fff;
}

#current {
    color: #01216D;
font-weight: bold;
}

#dependant1, #dependant2 {
   color: #fff;
} 
```

jQuery：

```
$("#dependant1").hover(function () {
    $('.dependant1').stop().animate({background: '#fff' }, "slow");
    $('#dependant1').stop().animate({color: '#01216D', 'font-weight': 'bold'}, "slow");
}, function () {
    $('.dependant1').stop().animate({ background: 'none' }, "slow");
    $('#dependant1').stop().animate({color: '#fff', 'font-weight': 'normal'}, "slow");
}); 
```

我觉得它与jQuery有关，但我在document.load中有它，所以我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:45:06.827

您需要在以下内容之后`jQuery`包含`jQuery UI Library`：

`**[LIVE DEMO](http://jsbin.com/amarog/1/edit)**`

```
$("#navbarcontainer li").hover(function () {
    $(this).find('a').stop().animate({ color: '#01216D', backgroundColor: '#fff'}, 800);
}, function () {
    $(this).find('a').stop().animate({ color: '#fff', backgroundColor: '#01216D'}, 800);
 }); 
```

HTML：

```
 <div id="navbarcontainer">
    <ul>
      <li><a id="current">Home</a></li>
      <li><a>Services</a></li>
      <li><a>Contact</a></li>
    </ul>
</div> 
```

CSS：

```
#navbarcontainer {
    margin: 0;
    padding: 0;
    background: #01216D;
}
#navbarcontainer ul {
    clear: both;
    margin: 0;
    padding: 0;
    list-style: none;
    overflow:hidden;
}
#navbarcontainer li {
    list-style: none;
    text-align: center;
    -moz-transition: .5s;
    -o-transition: .5s;
    -webkit-transition: .5s;
    transition: .5s;
}
#navbarcontainer ul li a {
    float:left;
    color:#fff;
    background: #01216D;
    padding:10px 30px;
    text-decoration: none;
    line-height: 50px;
    font-size: 20px;
    font-family: Calibri;
    cursor: pointer;
}
#current {
    background: #fff !important;
    color: #01216D !important;
    font-weight: bold;
} 
```

或另一个脚本：

```
$("#navbarcontainer li").on('mouseenter mouseleave',function ( e ) {
  var set = e.type=='mouseenter' ? {c:"#01216D", bg:"#fff"} : {c:"#fff", bg:"#01216D"} ;
  $('a', this).stop().animate({ color: set.c, backgroundColor: set.bg}, 800);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:49:21.190

在你的 a 标签 CSS 中试试这个

```
#navbarcontainer ul li a {

        display: block;
        height: 50px;

        text-decoration: none;
        line-height: 50px;
        width: 100px;
        font-size: 20px;
        font-family: Calibri;
        cursor: pointer;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:54:06.587

您正在尝试为单独使用 jQuery 无法实现的背景颜色和文本颜色设置动画。要在您的描述中实现您在上面尝试做的事情，您需要包含[此处](http://www.bitstorm.org/jquery/color-animation/)提供的彩色动画插件。

包含后，您的代码应该按预期工作。

**编辑**

请参阅包含插件的 这个[Fiddle 示例。](http://jsfiddle.net/SfWAS/)

```
$('#color').on('click',function(){
    $(this).animate({backgroundColor:'#400101', color:'#fff'}); 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T16:00:05.997

您需要一个[库来](https://github.com/jquery/jquery-color)使用 jQuery 为颜色设置动画，并且您需要为背景颜色而不是背景设置动画，并且在淡出时您需要淡出回蓝色，而不是没有。

这个 js fiddle 展示了你的演示工作：http: [//jsfiddle.net/Mbppv/](http://jsfiddle.net/Mbppv/)

这是我将您的 js 更改为：

```
$("#dependant1").hover(function () {
    $('.dependant1').stop().animate({"background-color": '#fff' }, "slow");
    $('#dependant1').stop().animate({color: '#01216D', 'font-weight': 'bold'}, "slow");
}, function () {
    $('.dependant1').stop().animate({"background-color": '#01216D' }, "slow");
    $('#dependant1').stop().animate({color: '#fff', 'font-weight': 'normal'}, "slow");
}); 
```

另请参阅有关动画颜色的相关帖子：[jQuery animate backgroundColor](https://stackoverflow.com/questions/190560/jquery-animate-backgroundcolor)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T15:53:21.037

您可以使用 CSS 伪类向元素添加悬停效果`hover`。将此样式添加到您的 CSS 文件会`li`在悬停时应用红色背景：

```
li.dependant1:hover {
    background-color: red;
} 
```

[http://jsfiddle.net/xuHjJ/](http://jsfiddle.net/xuHjJ/)

# c# - c# 不选择我想要的函数，基于参数类型（继承）

> ID：15838118
> 
> 赞同：2
> 
> 时间：2013-04-05T15:44:24.140
> 
> 标签：c#, inheritance, types, parameters

我不确定如何解释这一点，所以我将展示我的示例并详细说明。

```
using System;

namespace Demo
{
    static class Program
    {
        static void Main()
        {
            var test = new ExampleClass(new Bar());

            Console.WriteLine(test);
        }
    }

    class ExampleClass {
        public Foo _foo;

        public ExampleClass(Bar bar)
        {
            _foo = bar;
        }

        public override String ToString() {
            return print(_foo);
        }

        String print(Bar bar) {
            return bar.Name;
        }

        String print(Foo foo) {
            return foo.ToString();
        }
    }

    class Bar : Foo
    {
        public String Name;
    }

    class Foo
    { }
} 
```

好的，所以这不起作用。

虽然我可以在声明中看到`_foo`is的类型`Foo`，但它也可以是`Bar`，因为它继承自`Foo`.

**我的问题是：**

为什么编译器看不到 的实际类型`_foo`？

为什么`print(Foo)`总是执行，即使类型是派生类`Foo`？

***已编辑***

编辑了我的示例代码，因为它仍然包含我的大部分原始代码。

感谢安东尼佩格拉姆的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:07:56.800

您的代码并没有很好地展示您的问题，因为您引入了一个类型字段，`SyntaxNode`而没有显示它与您的`BaseClass/BaseClassExtension`类型层次结构的关系。但是，当给定可理解的类型时，仍然可以回答一些问题。

> 我的问题是：为什么.net 运行时看不到 originalNode 的实际类型？为什么它总是去打印（BaseClass），即使类型是BaseClassExtention？

.NET 运行时不是决定使用哪个重载的东西。这是编译器的一个属性，它使用它所拥有的关于*变量*（或字段、属性）类型的信息来确定要使用的重载。

一个简单的演示。说我们有

```
class Foo { }
class Bar : Foo { }

void Do(Foo foo)
{
     Console.WriteLine("Foo overload");
}

void Do(Bar bar)
{
    Console.WriteLine("Bar overload");
} 
```

然后你有代码

```
Foo foo = new Bar();
Do(foo); 
```

您有一个类型的变量`Foo`碰巧引用了一个类型的对象`Bar`。编译器在编译时发出代码来调用`Foo`重载，因为这是它所知道的，坦率地说，这就是你告诉它要做的事情。（我们在上一行将它实例化为一个类型的对象这一事实`Bar`并不特别相关。在下一行，只需考虑它`foo`可能来自*任何地方*，我们知道变量`foo`是类型的`Foo`。）

如果您希望在运行时使用更具体的重载，您可以探索双重调度机制，例如[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)。我不特别推荐的另一种方法是在运行时通过`dynamic`关键字确定类型（如果问题很好理解，通常会有更好的选择，但有时它适合）。

```
Foo foo = new Bar();
Do((dynamic)foo); 
```

运行时动态的语义是您可以在自己的时间研究的东西，但这有效地产生了您似乎想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:04:54.673

我试过了，但如果 SyntaxNode 类派生自 BaseClassExtention 类，它会按预期工作 - 所以很难从您向我们展示的代码中判断问题出在哪里。

这如我所料：

```
using System;

namespace Demo
{
    static class Program
    {
        static void Main()
        {
            var test = new myNode();

            Console.WriteLine(test);
        }
    }

    class myNode
    {
        public SyntaxNode originalNode = new SyntaxNode{Name = "SyntaxNode"};

        public override string ToString()
        {
            return print(originalNode); // This calls print(BaseClassExtention Class)
        }

        string print(BaseClassExtention Class) // <= This gets called.
        {
            return Class.Name;
        }

        string print(BaseClass b)
        {
            return b.ToString();
        }
    }

    class BaseClass
    {}

    class BaseClassExtention : BaseClass
    {
        public string Name { get; set; }
    }

    class SyntaxNode: BaseClassExtention
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:09:27.460

看起来您预计`print`将根据`originalNode`. C# 正在选择要在编译时调用的函数 -`print`不是虚拟方法，因此必须在编译时解析调用。

所以你有了

```
 public SyntaxNode originalNode;
 string print(BaseClassExtention Class)...
 string print(BaseClass base)... 
```

在编译时，将选择 2 个打印函数之一（基于 if `SyntaxNode`is`BaseClass`或`BaseClassExtension`）。如果`SyntaxNode`派生自`BaseClassExtension`比`string print(BaseClassExtention Class)`使用版本（因为它比`BaseClass`一个更具体，甚至两者都可以使用），否则使用另一个版本。

如果您希望基于运行时类型的行为有所不同，`originalNode`您需要调用一些虚拟方法`originalNode`作为其中的一部分，`print`或者手动检查类型并在您的`print`方法内部执行某些操作。

# c# - 在c#中创建文件和文件夹

> ID：15838122
> 
> 赞同：1
> 
> 时间：2013-04-05T15:44:40.360
> 
> 标签：c#, asp.net, .net

我正在尝试在用户文件夹中创建一个文件并用一些基本文本填充它。看起来很简单，但我不断收到错误消息：

> 找不到路径“C:\websites\admin\upload\users\testuserID\testuserIDSampleRecord.txt”的一部分。”} System.Exception {System.IO.DirectoryNotFoundException}

我的网站位于: 下`c:\websites\testsite\`，因此完整路径应为：

```
c:/websites/testsite/admin/upload/users/ 
```

IIS localhost 设置为指向，`c:/websites/`因此当我运行它时，我键入`localhost/testsite`以获取它

这是我所拥有的：

```
 try
            {
           string SampleCaseText =  BuildTextRecord();
           string username = (string)Session["userid"];
           string folderPath = "/testsite/admin/upload/users/" + username;
           bool IsExists = System.IO.Directory.Exists(Server.MapPath(folderPath));

            if(!IsExists)
                System.IO.Directory.CreateDirectory(Server.MapPath(folderPath));

            System.IO.File.Create(folderPath + "/" + username + "SampleRecord.txt");

            File.WriteAllText(Path.Combine(folderPath, username + "SampleRecord.txt"), SampleCaseText);

            } 
```

它在正确的位置创建了新文件夹 testuserID，但在尝试创建/写入文件时失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:53:52.210

我看到了一些**可能**导致麻烦的错误...

首先，不要使用 web`/`文件夹分隔符，而是使用 windows 分隔符`\`。

其次，你没有`Server.MapPath`在所有你应该使用的位置使用......导致使用网络相对路径而不是本地 Windows 路径。

尝试这样的事情，我在开始时将文件夹转换为windows路径，并将转换`userFilename`后的变量放入它自己的变量中，然后使用它来代替......

```
string folderPath = Server.MapPath("/testsite/admin/upload/users/" + username);
bool IsExists = System.IO.Directory.Exists(folderPath);
if(!IsExists)
    System.IO.Directory.CreateDirectory(folderPath);

string userFilename = Path.Combine(folderPath, username + "SampleRecord.txt");
System.IO.File.Create(userFilename);
File.WriteAllText(userFilename, SampleCaseText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:07:15.593

这可能会有所帮助 - 为了让它更容易一点，我没有包含创建文件或文件夹的代码，而只是抓取现有文件，打开它并写入它。

希望这能给你一些方向，你可以从那里开始。

```
private void Error(string error)
    {
        var dir= new DirectoryInfo(@"yourpathhere");
        var fi = new FileInfo(Path.Combine(dir.FullName, "errors.txt"));

        using (FileStream fs = fi.OpenWrite())
        {
            StreamWriter sw = new StreamWriter(fs);
            sw.Write(error);
            sw.Close();
            sw.Dispose();
        }

    } 
```

需要注意的一件事：确保您对要写入的文件夹和文件具有权限。

# css - 如何让我的 div 正确居中

> ID：15838124
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:44:45.783
> 
> 标签：css, html, web, center

我试图让我的内容 div 居中，但使用当前方法它是在右边而不是死在中心。

```
#content {
    width: 620px;
    height: 2000px;
    position:absolute;
    top: 300px;
    left:50%;
    margin-right: 310px;
    background-color: #0F0;
    padding: 0;
    margin: 0px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:51:30.363

你应该使用`margin: 0 auto;`宽度；那么它将位于其父项的中心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T15:50:51.493

只要你 div 有一个宽度：

```
 #content {
   width: 620px;
   margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:47:47.770

以绝对定位居中对象，

```
top:50%;
left:50%;
margin-top:-1000px; /* half of size */
margin-left:-310px; /* half of size */ 
```

就那么简单！

**绝对是最后的手段，通常在相对位置元素中使用。小心，如果您遇到绝对“divitis”的情况（对所有内容使用 div 并将它们定位为 absolute，因为您不熟悉最佳实践）

最好使用`margin:auto`水平居中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T15:46:27.897

```
#content{
    width: 620px;
    Left: 50%;
    margin-left: -310px;
} 
```

你想使用 -50% 的总宽度`#content` `div`来移动它`50%`——有点棘手:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T15:52:15.737

首先，您不应该将其`position: absolute;`用于此目的。

您只需要定义一个宽度，然后用于`margin: 0 auto;`使 div 居中。

例如...

```
#content {
width: 960px;
margin: 0 auto;
} 
```

这是一个 JSFiddle... [http://jsfiddle.net/cD6pe/](http://jsfiddle.net/cD6pe/)

# controller - 无法关闭 imagePickerController didFinishPickingMediaWithInfo 中的 ZBarReaderViewController

> ID：15838125
> 
> 赞同：4
> 
> 时间：2013-04-05T15:44:48.107
> 
> 标签：controller, warnings, barcode, dismiss, zbar

嗨，我正在开发一个 QR 码阅读器应用程序，并且在关闭 ZBarReaderViewController 时遇到了很多麻烦。我有一个带有按钮的视图控制器，它可以创建阅读器并呈现它。

```
- (IBAction)scanAction:(id)sender {

    ZBarReaderViewController *reader = [ZBarReaderViewController new];

    reader.readerDelegate = self;
    [reader.scanner setSymbology: ZBAR_I25
                               config: ZBAR_CFG_ENABLE
                                   to: 0];
    reader.readerView.zoom = 1.0;

//    [self presentViewController:reader animated:YES completion:nil];
    [self presentModalViewController:reader animated:YES];
} 
```

然后在读者代表上我正在这样做（我评论了结果处理行，但我仍然得到同样的错误）：

```
- (void) imagePickerController: (UIImagePickerController*) reader
 didFinishPickingMediaWithInfo: (NSDictionary*) info
{
//    id<NSFastEnumeration> results =  [info objectForKey: ZBarReaderControllerResults];
//    
//    ZBarSymbol *symbol = nil;
//    NSURL *url;
//    NSString * textUrl;
//    
//    for(symbol in results){
//        textUrl = symbol.data;
//        NSLog(@"%@",textUrl);
//        url = [NSURL URLWithString:textUrl];
//        break;
//    }
//    
//    if (url != nil) {
////        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
////        [self.webView loadRequest:requestObj];
//        [self.urlLabel setText:textUrl];
//    }

//    [reader dismissViewControllerAnimated:NO completion:nil];
    [reader dismissModalViewControllerAnimated:YES];
} 
```

这是我随机得到的错误：

```
QR reader[10159:907] Warning: Attempt to dismiss from view controller <ViewController: 0x1ed4c930> while a presentation or dismiss is in progress! 
```

有时它会在没有任何警告的情况下扫描并关闭，但是当我收到该警告时，读者会继续扫描，并且代表会再次被调用，直到不再显示警告为止。

我尝试了其他有同样问题的用户的一些建议，但在我的特定情况下不起作用：

1.  使用dismissModalViewController 而不是已弃用的模态视图。
2.  围绕dismissViewControllerAnimated方法的完成块中的结果处理。

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T22:47:01.663

有同样的问题， performSeletor:withObject:afterDelay: 对我来说很好。

```
- (void)imagePickerController:(UIImagePickerController *)reader didFinishPickingMediaWithInfo:(NSDictionary *)info {
     // do some userful stuff

     [self performSelector:@selector(dismissZBar) withObject:nil afterDelay:1];
}

- (void)dismissZBar {
     [self.presentedViewController dismissViewControllerAnimated:YES completion:^{
          // do some stuff after dismiss
      }];
} 
```

# php - MySQL 数据导入模板

> ID：15838127
> 
> 赞同：0
> 
> 时间：2013-04-05T15:44:50.410
> 
> 标签：php, mysql, templates

我从 PHP 开始，我的代码可以正常工作：

```
<body>

<?

require("conexaoBD.php");

$sql = "SELECT * FROM tb_materia_prima";

$limite = mysql_query("$sql");

while ($sql = mysql_fetch_array($limite) ) {
    $data       = $sql["data"];
    $lote       = $sql["lote"];
    $material   = $sql["material"];
    $cor        = $sql["cor"];
    $quantidade = $sql["quantidade"];
    $prazo      = $sql["prazo"];

    echo "<div id=\"testeID\">
            Data: $data<br> Lote: $lote<br> Material: $material<br> Cor: $cor<br> Quantidade: $quantidade Kilos<br> Previsão de entrega: $prazo<br><a href=\"#\">Editar</a>
          </div>";
}

?>

</body> 
```

但是，现在我想将回显数据放入 HTML 中，如下所示：

```
<div>

Data: <p><?php echo $data ?></p>
<br /><br />
Lote: <p><?php echo $lote ?></p>
<br /><br />
Material: <p><?php echo $material ?></p>
<br /><br />
Cor: <p><?php echo $cor ?></p>
<br /><br />
Quantidade: <p><?php echo $quantidade ?></p>
<br /><br />
Prazo: <p><?php echo $prazo ?></p>

</div> 
```

它也可以正常工作，但只返回最后一个 MySQL 条目。如何显示所有条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:03:40.377

先获取你的数据，然后开始 HTML 模板

```
<?php
require("conexaoBD.php");
$sql = "SELECT * FROM tb_materia_prima";
$limite = mysql_query($sql);
$data = array();
while ($sql = mysql_fetch_array($limite) ) {
    $data[] = $sql;
}
?>
<body>
<?php foreach ($data as $row): ?>
    <div id="testeID">
        Data:                <?=$row['data']?><br> 
        Lote:                <?=$row['lote']?><br> 
        Material:            <?=$row['material']?><br>
        Cor:                 <?=$row['cor']?><br> 
        Quantidade:          <?=$row['quantidade']?> Kilos<br> 
        Previsão de entrega: <?=$row['prazo']?><br>
        <a href="#">Editar</a>
    </div>
<?php endforeach ?>
</body> 
```

但是，最好使用[PDO](https://stackoverflow.com/tags/pdo/info)获取数据：

```
<?php
require("conexaoBD.php");
$sql = "SELECT * FROM tb_materia_prima";
$stm = $pdo->prepare($sql);
$stm->execute();
$data = $stm->fetchAll();
?> 
```

当然，模板部分将保持不变。**这就是模板的重点**：在更改程序逻辑时，您的模板将保持不变。反之亦然

# c - 使用 C 使用头文件中定义的结构时出现编译错误

> ID：15838132
> 
> 赞同：1
> 
> 时间：2013-04-05T15:45:01.267
> 
> 标签：c, struct

我有一个奇怪的问题。我已经阅读了我能找到的所有文章，我认为我所做的一切都是正确的：

我在头文件中定义了一个结构`a.h`

```
typedef struct{
  int io;
} apa; 
```

这个文件位于一个文件夹中，可以说`src/model`

此外，在根目录中，我有主文件，其中包含以下头文件：

```
#include "a.h" 

int main(){
  apa X;
 return 0;
} 
```

当我使用 gcc 编译它时`I-flag`，`-Isrc/model`
我收到错误编译警告，上面写着：

```
'apa' undeclared (first use in this function)
(Each undeclare identifier is reported only once for each function it appears in)
X undeclared (first use in this function) 
```

我似乎找不到问题所在。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:54:03.897

如果主文件与头文件位于不同的文件夹中，则应提及头文件与主文件的总路径。

例如）

```
#include "/src/model/a.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:54:04.180

如果包含头文件，`#include "a.h"`编译器将首先在当前目录中搜索头文件，然后在标准库目录中搜索。在您的情况下，您已将头文件保存在名为的目录`src/model`中，并将主文件保存在名为`root`. 所以编译器不定位头文件。为了克服这个问题，您将头文件和主文件保存在同一目录中，或者在包含头文件的同时给出整个路径，如下所示。

```
#include "/src/model/a.h" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T17:00:04.127

如果您的头文件位于不同的文件夹中，那么您需要在主文件中提及头文件的完整路径

例如

```
instead of just using
#include "a.h"
you have to use   
#include "path to header file/a.h" 
```

# wpf - 资源字典无法对转换器进行编目

> ID：15838138
> 
> 赞同：0
> 
> 时间：2013-04-05T15:45:15.050
> 
> 标签：wpf, resourcedictionary

我试图将我们的转换器拉到应用程序顶部的一个公共位置。当我这样做时，我最终会出现以下错误：

> Windows Presentation Foundation (WPF) 项目不支持 SourceDefaultValueConverter。

这是引发错误的 App.xaml：

```
<Application x:Class="MSMS.DataCollector.App.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:App="clr-namespace:App"
             xmlns:commonControls="clr-namespace:CommonControls;assembly=CommonControls"
             StartupUri="LoginWindow.xaml">
    <Application.Resources>
        <App:NinjectServiceLocator x:Key="ServiceLocator" />
        <ResourceDictionary x:Key="Resources">
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/Converters.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <commonControls:FieldLayoutRuntimeControlConverter x:Key="FieldLayoutConverter" />
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

当我直接在 UserControl 中添加资源时，它可以正常工作

```
<UserControl.Resources>
    <commonControls:FieldLayoutRuntimeControlConverter x:Key="FieldLayoutConverter"/>
</UserControl.Resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:16:49.963

您`ServiceLocator`在`ResourceDictionary`. 将它与您的`FieldLayoutConverter`资源一起移动。我不确定这是否会导致您的问题，但这肯定是错误的，并且可能会使 WPF 感到困惑（唉，这并不难）。

# javascript - 使用正则表达式和 javascript 每 2 个字插入回车

> ID：15838144
> 
> 赞同：3
> 
> 时间：2013-04-05T15:45:25.757
> 
> 标签：javascript, regex, insert, return

我想做一个正则表达式，每 2 个单词插入一个回车符......而且要格式化的字符串在一个数组中（这有什么区别吗？）问题是：我在 2 周前和到目前为止听说过正则表达式这让我觉得有人在乱踩我的大脑。所以暂时我想出了那个（忍受我......）

```
ticketName[i] = 'Lorem ipsum dolor sit amet consectetur adipisicing';
ticketName[i] = ticketName[i].replace(/(?:[a-zA-Z])* {2}/ig, ','); 
```

令人惊讶的是......它不起作用！

谁能帮我？

此外，当我完成此操作后，当句子超过一定数量的字符时，我需要用“...”替换句子的结尾。如果您对此有任何见解，因为我可能还会回来找那个...搜索该网站，只发现用回车替换句子的结尾。我猜我的 pb 在于这个词的定义。谢谢一堆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:08:03.810

被宠坏了，你是。我只是想我会再添加一个选项，并同时回答您的第二个问题：

```
var mytest = "lorem ipsum dolor sit amet consectetur adipisicing";
var newtext = mytest.replace(/(\w+\W+\w+)\W+/ig,"$1\n");
alert(newtext);

result:
lorem ipsum
dolor sit
amet consectetur
adipisicing 
```

注意 - 最后一个词（'adipisicing'）不匹配，所以没有被替换。它就在最后（并且没有尾随`\n`）。

*解释：*

正则表达式：

```
(     start a capture group comprising:
\w+   one or more "word" characters
\W+   one or more "not a word" characters
\w+   one or more "word" characters
)     end capture group
\W    followed by non-word
/ig   case insensitive, global (repeat as often as possible) 
```

并替换为：

```
$1    "The thing in the first capture group (everything matched in parentheses)
\n    followed by a newline 
```

**第二个问题：**

顺便说一句 - 由于您询问的是“其他”问题 - 如何在`...`一定数量的单词后终止句子，您可以执行以下操作：

```
var abbrev = mytest.replace(/((\w+\W+){5}).*$/,"$1...");
alert(abbrev);

result:
lorem ipsum dolor sit amet ... 
```

解释：

```
(    start capture group
(    start second group (to be used for counting)
\w+  one or more "word" characters
\W+  one or more "non word" characters
){5} match exactly five of these
)    end of capture group
.*$  followed by any number of characters up to the end of the string 
```

并替换为

```
$1   the contents of the capture group (the first five words)
...  followed by three dots 
```

那里-一个问题有两个答案！

如果你想两者都做，那么先做“缩写一个长句子”，然后把它切成更短的片段。使用正则表达式计算多行中的单词有点困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:04:33.610

我认为这应该有效：

```
str.replace(/((\s*\w+\s+){2})/g, "$1\n"); 
```

例如：

```
var str = 'Lorem ipsum dolor sit amet consectetur adipisicing';
str.replace(/((\s*\w+\s+){2})/ig, "$1\n");
"Lorem ipsum 
dolor sit 
amet consectetur 
adipisicing" 
```

正则表达式的解释：

```
(         -> start of capture group. We want to capture the two words that we match on
(         -> start of an inner capture group. This is just so that we can consider a "word" as one unit.
\s*\w+\s+ -> I'm consider a "word" as something that starts with zero or more spaces, contains one or more "word" characters and ends with one or more spaces.
)         -> end of capture group that defines a "word" unit.
{2}       -> we want two words
)         -> end of capture group for entire match. 
```

在替换中，我们`$1\n`简单地说“使用第一个捕获组并附加换行符”。

[小提琴](http://jsfiddle.net/hUsXY/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T16:12:32.193

我希望您发现此处发布的正则表达式解决方案之一适合您。

或者，同样可以使用字符串 split() 和 substring() 方法来完成。下面的代码做到了这一点，[这里](http://jsfiddle.net/VCTLB/1/)有一个小提琴。不过，这并不像使用正则表达式那样优雅。

示例源代码

```
ticketName = new Array();
ticketName[0] = 'Lorem ipsum dolor sit amet consectetur adipisicing';
tmparray = new Array();
tmparray = ticketName[0].split(" ");

finalName = ""; // hold final name
totallength=0;
maxlength = 30;

// add a carriage return (windows) every two words
for (var i=0; i<tmparray.length; i++){
    finalName += tmparray[i]+" ";
    if ((i>0) && (((i-1)%2) == 0))
        finalName +="\r\n";
}

// truncate result if exceed final length and add .... where truncated
if (finalName.length>maxlength)
    finalName= finalName.substring(0,maxlength)+ ".....";

alert(finalName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T16:00:12.353

让我们从您的正则表达式中的问题开始：
-`[a-zA-Z]`您不需要指定`A-Z`，因为您正在使用*i*修饰符
-`{2}`正如 Matt Ball 在评论中所述，您只是想在这里匹配 2 个连续的空格，您会需要使用括号来重复整个组
-`','`你说你想用回车符 (\r) 替换，但是你插入了一个逗号

现在，匹配单词的最佳方法（在我看来）如下：

```
/\b[a-z]+\b/ 
```

（[这里](http://www.regular-expressions.info/wordboundaries.html)是 \b，我们将使用[惰性运算符](http://www.regular-expressions.info/repeat.html)）
你可以这样做：

```
replace(/(\b[a-z]+\b.*?\b[a-z]+\b)/, '$1\r') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T16:00:15.150

尝试：

```
'Lorem ipsum dolor sit amet consectetur adipisicing'
  .match(/([a-z]+\s){2,2}/gi)
  .join('\n'); 
```

# c++ - 具有隐式转换的 C++ 类字符串类

> ID：15838153
> 
> 赞同：6
> 
> 时间：2013-04-05T15:45:46.647
> 
> 标签：c++, string, operator-overloading, implicit-conversion

我有几个可以隐式转换为字符串的类字符串类。我对这些有一些用途；[一个例子是通过gettext](http://www.gnu.org/software/gettext/)保存需要在运行时翻译的文本：

```
class TranslatableString
{
public:
  explicit TranslatableString(const char *s) : native_text_(s) {}
  operator const char *() const { return gettext(native_text_); }

  // Or not - see below:
  operator const std::string() const { return gettext(native_text_); }

private:
  const char * const native_text_;
}; 
```

现在我试图使使用这个类尽可能简单（即，使用它应该尽可能像字符串文字）。特别是，我希望以下两种示例用法都能正常工作：

```
const TranslatableString HELLO = TranslatableString("Hello, world!");

std::string ExampleA() {
  return HELLO;
}

void ExampleB() {
  std::string s;
  s = HELLO;
} 
```

有什么办法可以让这两个例子都起作用吗？

*   如果我 include `operator std::string`，则 ExampleB 无法编译，说`std::string::operator=(const char *)`and之间存在歧义`std::string operator=(const std::string&)`（这是有道理的）。
*   如果我不包含`operator std::string`，则 ExampleA 无法编译；显然不允许将 TranslatableString 隐式转换为 const char * 到 std::string，尽管我不太了解 C++ 的隐式转换规则来解释原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:52:59.457

每个转换序列中只允许一个用户定义的转换，这就是你不能“通过” a 的原因`const char*`。（注意`const char*`to`std::string`也是用户定义的转换）。

您需要转换为`const char*`吗？没有它（并且覆盖到`std::string`），这两个例子都可以工作。

可能还值得考虑将数据存储为`std::string`内部，而不是`const char*`. 您不必担心释放问题、数据在您手下“消失”等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:53:33.673

你将不得不放弃拥有`operator const char *`. 制作它`explicit`（C ++ 11）或将其作为`c_str`方法提供。

不允许转换`TranslatableString`为`const char *`to，因为它包含两个用户定义的转换。`std::string`

# vxworks - VxWorks tftpLib。链接器错误

> ID：15838155
> 
> 赞同：1
> 
> 时间：2013-04-05T15:46:02.973
> 
> 标签：vxworks, tftp

我尝试为 VxWorks 创建应用程序，它只会使用 tftp 获取文件。但是链接器不知道 tftpInit() 函数是什么。这些是错误示例：

```
dld: warning: Undefined symbol 'tftpPeerSet' in file 'lava-test/NonDebug/Objects/lava-test/lava-tests.o'
dld: warning: Undefined symbol 'tftpModeSet' in file 'lava-test/NonDebug/Objects/lava-test/lava-tests.o'
dld: warning: Undefined symbol 'tftpInit' in file 'lava-test/NonDebug/Objects/lava-test/lava-tests.o'
dld: warning: Undefined symbol 'tftpGet' in file 'lava-test/NonDebug/Objects/lava-test/lava-tests.o'
dld: warning: Undefined symbol 'tftpQuit' in file 'lava-test/NonDebug/Objects/lava-test/lava-tests.o' 
```

在包含`vxcoreip`库（应该实现 tftpInit 的地方）之后，我得到了下一个链接器错误：

```
dld: warning: Undefined symbol '__ctype' in file 'inetAddrLib.o(C:/WindRiver/vxworks-6.9/target/lib/arm/ARMARCH7/common\libvxcoreip.a)'
dld: warning: Undefined symbol 'iosDrvInstall' in file 'sockLib.o(C:/WindRiver/vxworks-6.9/target/lib/arm/ARMARCH7/common\libvxcoreip.a)'
dld: warning: Undefined symbol 'iosFdDrvValue' in file 'sockLib.o(C:/WindRiver/vxworks-6.9/target/lib/arm/ARMARCH7/common\libvxcoreip.a)'
dld: warning: Undefined symbol 'iosMaxFiles' in file 'sockLib.o(C:/WindRiver/vxworks-6.9/target/lib/arm/ARMARCH7/common\libvxcoreip.a)'
dld: warning: Undefined symbol 'iosFdNew' in file 'sockLib.o(C:/WindRiver/vxworks-6.9/target/lib/arm/ARMARCH7/common\libvxcoreip.a)' 
```

请建议如何链接 tftpLib。需要哪些库？

PS 项目类型 - RTP (VxWorks 6.9)。开发环境 - Workbench 3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-03T14:53:41.520

确保您的“vxworks 映像项目”包含 TFTP 客户端组件。

```
vxprj component list | grep TFTP 
```

并添加任何缺失的：

```
vxprj component add INCLUDE_TFTP_CLIENT
vxprj component add INCLUDE_IPTFTPC
vxprj component add INCLUDE_IPTFTP_CLIENT_COMMAND 
```

# javascript - qTip Text Tip 简单插件不起作用

> ID：15838158
> 
> 赞同：1
> 
> 时间：2013-04-05T15:46:11.207
> 
> 标签：javascript, jquery, qtip2

我正在尝试从以下站点安装一个名为 qtip 的简单文本提示 jquery：[http://craigsworks.com/projects/qtip2/](http://craigsworks.com/projects/qtip2/)，没有成功。它根本不起作用，我没有收到任何错误。我已经尝试解决这个问题一个多小时了。

我的代码下面有一个空白类的 div`.something`我只是想`qtip`在框悬停时使用 a 显示任何文本以确认它正在工作。

Javascript

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript" src="jquery.qtip.min.js"></script>
<script>
 $(document).ready(function(){
    $(".myform").validate({
        highlight: function(element, errorClass, validClass) {
             $(element).css('border', '1px solid red');
          },
          unhighlight: function(element, errorClass, validClass) {
             $(element).css('border', '1px solid #ddd');
          },
        messages: {
            first: "Please specify your name",
        }
    });

    $('.something').qtip('hello');
  });
</script> 
```

标记

```
<form class="myForm" method="post" action="action.php">
    First <input type="text" name="first" class="required"/><br/>
    Last <input type="text" name="last"  /><br/>
    Phone <input type="text" name="phone"  class="required"/><br/>
    <div class="something" style="border:1px solid red; height:150px; width:300px;"></div>
    <input type="submit">
</form> 
```

我很感激任何关于可能是什么问题的建议。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:17:53.350

您的工具提示未按预期显示，因为忘记将标题属性添加到您的 div 以及您没有包含 qtip 2 的 css 文件。

```
http://qtip2.com/v/nightly/jquery.qtip.css 
```

只需完成这两个步骤，您的代码就可以运行。

演示：http: [//jsfiddle.net/dzcc5/](http://jsfiddle.net/dzcc5/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T15:52:17.637

从您引用的文档中，qTip 插件正在寻找内容以显示为工具提示的默认区域是“标题”属性。

尝试将您的 div 更改为：

```
<div title="hello" class="something" style="border:1px solid red; height:150px; width:300px;"></div> 
```

和你的 qTip 初始化器：

```
$('.something').qtip(); 
```

编辑：虽然这是默认设置，但您可能不想将标题标签添加到 div。

看起来您可以通过执行以下操作来设置消息内容：

```
$('.something').qtip({
    content:{
        text: 'hello'
    }
}); 
```

请仔细查看有关该插件可用的样式和其他选项的[文档。](http://craigsworks.com/projects/qtip2/docs/)

# asp.net-mvc-3 - 如何在整个 asp.net mvc (razor 3) 应用程序中存储值？

> ID：15838167
> 
> 赞同：1
> 
> 时间：2013-04-05T15:46:58.323
> 
> 标签：asp.net-mvc-3, session-state

例如，如果用户已登录，存储用户 ID 和/或他/她的角色/组的最佳方法是什么？显而易见的方法是 cookie 和会话？还有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:00:11.400

如果要存储每个用户的值，I session 是最好的选择。会话是基于每个用户/浏览器创建的。每个用户都有他/她自己的会话对象，因此通过这种方式，您可以在整个应用程序中保留用户角色信息，直到会话结束。

我绝对不建议将用户安全信息存储在 cookie 中，因为这会在您的应用程序中造成很大的安全漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:38:07.613

至少，使用 Forms 身份验证，您可以将用户 ID 和角色放在 Formst Auth Ticket 中。

这是我如何做到的一个例子：

```
 public static HttpCookie CreateCookie(IUserIdValue userId, string name, IEnumerable<int> group, bool isPersistent = false)
    {
        var user = new AuthenticationTicketData() { Groups = @group, UserId = userId };
        var ft = new FormsAuthenticationTicket(2, name, DateTime.Now, DateTime.Now.Add(FormsAuthentication.Timeout),
                                               isPersistent, user.Pack());
        var ck = new HttpCookie(FormsAuthentication.FormsCookieName)
                     {
                         Value = FormsAuthentication.Encrypt(ft),
                         Path = FormsAuthentication.FormsCookiePath,
                         Domain = FormsAuthentication.CookieDomain
                     };
        if (isPersistent)
        {
            ck.Expires = DateTime.Now.Add(FormsAuthentication.Timeout);
        }
        return ck;
    }

 public static string Pack(this AuthenticationTicketData data)
    {
        if (data == null) throw new ArgumentNullException("data");
        return String.Format("{0};{1}",PackUserId(data.UserId),string.Join(",",data.Groups));
    }

    static string PackUserId(IUserIdValue uid)
    {
        if (uid == null) throw new ArgumentNullException("uid");
        var tpn = uid.GetType().GetFullTypeName();
        return String.Format("{0}|{1}",tpn,uid.ToString());
    }

 public static HttpCookie SetAuthCookie(this HttpResponse response,IUserIdValue userId, string name, IEnumerable<int> group, bool isPersistent = false)
    {
        var ck = CreateCookie(userId, name, group, isPersistent);
        response.AppendCookie(ck);
        return ck;
    } 
```

另一种选择是将用户会话（与会话无关）保留在数据库中，类似于表（guid、用户名、用户 ID、角色、expireAt）。但是，如果您想跟踪用户何时登录/注销，或者您使用自己的身份验证（不是 Forms 身份验证），这种方法更适合。

# javascript - Twitter Bootstrap 在 IE 8 或 IE 9 中不起作用

> ID：15838169
> 
> 赞同：2
> 
> 时间：2013-04-05T15:47:13.197
> 
> 标签：javascript, internet-explorer, twitter-bootstrap

我很困惑为什么 Twitter Bootstrap 不能在 Internet Explorer 8 或 9 中运行。它在包括 Safari、Firefox 和 Chrome 在内的所有其他浏览器上运行良好。我一直在通过更高版本的 Internet Explorer 调试代码，我发现了这个错误： SCRIPT5009: '$' is undefined。这是它指向的代码：

```
$('#myTab a').click(function (e) {
e.preventDefault();
$(this).tab('show');
}) 
```

它说这是第一行，第一个字符。它允许用户单击下拉菜单，但它混乱且不可读。我正在使用标准的 Bootstrap javascript 文件。任何帮助将不胜感激，如果我应该提供更多代码，请告诉我。

以下是该页面的源代码：

```
<head>
<script>
jQuery('#myTab a').click(function (e) {
e.preventDefault();
jQuery(this).tab('show');
})
</script>
<script src="_internal/js/jquery.js" type="text/javascript" ></script>
<script src="http://platform.twitter.com/widgets.js" type="text/javascript" ></script> 
<script src="_internal/js/bootstrap.js" type="text/javascript" ></script>
<script src="_internal/js/bootstrap-transition.js" type="text/javascript" ></script>
<script src="_internal/js/bootstrap.min.js" type="text/javascript" ></script> 
<script src="_internal/js/bootstrap-tab.js" type="text/javascript" ></script> 

<link href="_internal/css/bootstrap.css" rel="stylesheet" type="text/css" />
<link href="_internal/css/style.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div class="accordion-group">
<div class="accordion-heading">
<a class="accordion-toggle" data-parent="#accordion2" data-toggle="collapse" 
href = "#collapseFive">
    Title goes here
  </a>
</div>
<div class="accordion-body collapse" id="collapseFive" style="height: 0px;">
<div class="accordion-inner">
<table cellpadding="15" summary="table">
<tbody cellpadding="4">
<tr class="table-row">
<td width="250">Text</td>
<td width="250">Text</td>
<td width="200">Text</td>
</tr>
<tr>
<td width="250"><a href="link" title="title">title</a></td>
<td width="250">text/td>
<td width="200">text</td>
</tr>
<tr>
<td width="250"><a href="link">title</a></td>
<td width="250">text</td>
<td width="200">text</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:17:40.327

您可能在包含 jquery***之前***运行/声明此函数。当您没有将函数包装到 a`document.ready()`中时，在执行点也`$`没有`jQuery`定义。

人们经常忘记这一点，当他们复制粘贴引导主页 html 或示例时，然后开始按照他们习惯的方式编写 jquery 代码 - 因为 jquery 包含在`<head>`而不是之前`</body>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T11:37:06.587

这应该使事情正常进行。

```
<script type="text/javascript">
 $.noConflict(); //Case sensitive
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:50:44.183

使用`jQuery()`而不是`$()`. 我不知道为什么 jQuery 没有加载`$()`选择器，但前几天我遇到了这样的问题，并更改了所有`$()`选择器以`jQuery()`修复它。

# c# - asp:TreeView 与 SQL 中的父子关系

> ID：15838170
> 
> 赞同：1
> 
> 时间：2013-04-05T15:47:13.210
> 
> 标签：c#, recursion, treeview

我写了一些代码：

```
 protected void RootNodes()
{
    var contents = ListContentRootNodes(0, this.Culture, true);
    foreach (var content in contents)
    {
        TreeNode newNode = new TreeNode
        {
            Value = content.Title
        };

        List<TreeNode> childNode = ChildNode(content.ContentId);
        if (childNode != null)
        {
            foreach (var item in childNode)
            {
                newNode.ChildNodes.Add(item);
            }
            treeView.Nodes.Add(newNode);
        }
        treeView.ExpandAll();
    }
}

protected List<TreeNode> ChildNode(int contentId)
{
    var subContents = ListContentChildNodesAll(contentId, this.Culture);

    List<TreeNode> nodes = new List<TreeNode>();
    foreach (var sub in subContents)
    {
        nodes.Add(new TreeNode { Value = sub.Title });
        ChildNode(sub.ContentId);
    }
    return nodes;
} 
```

**'ListContentRootNodes'返回****'ParentId'**设置为**'-1'**的第一级数据行。**ListContentChildNodesAll**调用存储过程：

```
CREATE PROCEDURE [dbo].[ListChildNodesAll]
@ContentId int,
@Culture nvarchar(5)

AS SET NOCOUNT ON
SELECT * FROM Content WHERE ParentId=@ContentId AND Culture=@Culture 
```

据我在网上搜索，我了解到我需要递归方法才能从**'DB'**填充行，但我无法管理它。我需要创建将表示所有子节点的站点地图。我的代码只返回第一级而不是所有子行。我应该如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:53:47.997

我终于找到了解决方案。我完整的工作代码是：

```
 protected void RootNodes()
{
    var contents = ListContentRootNodes(0, this.Culture, true);
    foreach (var content in contents)
    {
        TreeNode newNode = new TreeNode { Value = content.Title };

        List<TreeNode> childNode = ChildNode(content.ContentId);
        if (childNode != null)
        {
            foreach (var item in childNode)
            {
                newNode.ChildNodes.Add(item);
            }
            treeView.Nodes.Add(newNode);
        }
        treeView.ExpandAll();
    }
}

protected List<TreeNode> ChildNode(int contentId)
{
    var subContents = ListContentChildNodesAll(contentId, this.Culture);
    List<TreeNode> nodes = new List<TreeNode>();

    foreach (var sub in subContents)
    {
        TreeNode nod = new TreeNode { Value = sub.Title };
        nodes.Add(nod);
        List<TreeNode> leafNodes = ChildNode(sub.ContentId);
        foreach (var leaf in leafNodes)
        {
            nod.ChildNodes.Add(leaf);
        }
    }
    return nodes;
} 
```

# c# - 排列无边界 MDI 子窗体

> ID：15838171
> 
> 赞同：2
> 
> 时间：2013-04-05T15:47:15.450
> 
> 标签：c#, .net, winforms, mdi

我有一个可能有很多孩子的 MDI 父母表格。所以，我有孩子的边界占用大量空间的问题。我的解决方案是为用户提供一个易于访问的选项来删除子窗体边框。这很容易

```
child.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None; 
```

问题是，重点是让他们点击“水平平铺”，一切都安排得很好，比以前有更多的空间。唯一的问题是边框消失了，边框所在的地方是空白的，当单击“平铺水平”时，什么也没有发生。我假设这是因为当它们的边框没有时，子窗体无法调整大小。

有没有办法在不手动重新排列的情况下做到这一点？

# ajax - Ajax.BeginForm 不做异步发布

> ID：15838179
> 
> 赞同：2
> 
> 时间：2013-04-05T15:47:30.230
> 
> 标签：ajax, asp.net-mvc, ajax.beginform

我长期以来一直对 Ajax.BeginForm 有问题是在互联网上进行搜索，但是大多数包含`jquery.unobtrusive-ajax.min`或编辑的解决方案都`web.config`允许`UnobtrusiveJavaScriptEnabled`在我的情况下完成，但我的 ajax 表单仍然在做一个完整的回发并且不能明白为什么。

在`View`

```
@using (Ajax.BeginForm("Login", "User", new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "loginResult" }, new { @id = "loginForm", @name = "loginForm" }))
    {
        <span id="loginResultx">@(TempData["loginResult"] != null ? TempData["loginResult"].ToString() : "")</span>
        <span id="loginResult"></span>
        <span>
            @Html.Label("User Id")
            @Html.TextBox("id")</span>
        <span>@Html.Label("Password")
            @Html.Password("pwd")
        </span>
        <span>
            <input type="submit" value="Submit" />
        </span>
    } 
```

在`Controller`

```
public ActionResult Login(FormCollection loginForm)
    {
        if (Request.HttpMethod == "POST")
        {
            var id= loginForm["id"];
            var pwd = loginForm["pwd"];
            bool status = false;
            User obj = new User();
            status = obj.Login(id, pwd);
            if (status)
            {
                Session["id "] = id;
                return RedirectToRoute("Profile");

            }

            TempData["loginResult"] = "Login Failed";
        }
        return View();
    } 
```

在 `BundleConfig`

```
bundles.Add(new ScriptBundle("~/scr").Include("~/Scripts/jquery-1.7.1.min.js", "~/Scripts/modernizr-2.5.3.js", "~/Scripts/jquery.validate.min.js", "~/Scripts/jquery.unobtrusive-ajax.min")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:39:45.143

你确定不是这条线有问题吗？

```
bundles.Add(new ScriptBundle("~/scr").Include("~/Scripts/jquery-1.7.1.min.js", "~/Scripts/modernizr-2.5.3.js", "~/Scripts/jquery.validate.min.js", "~/Scripts/jquery.unobtrusive-ajax.min")); 
```

您在 ajax 文件包含中缺少 .js。你看到了吗？

无论哪种方式，我都会使用 Chrome 检查器/Fiddler 来分析任何 JS 错误或缺少的包含。

# jquery-mobile - 滑动过渡changepage jquery mobile

> ID：15838180
> 
> 赞同：2
> 
> 时间：2013-04-05T15:47:30.853
> 
> 标签：jquery-mobile, swipe-gesture

我对 jQueryMobile 有疑问，我搜索了好几个小时的答案，但没有任何效果:(

我可以通过向左或向右滑动来移动下一个或上一个项目。

上面的代码工作正常，但过了一段时间它变得疯狂。

我在“A 区”，向右滑动，然后“B 区”，向左滑动，返回“A”，然后再次向右滑动，进入“C”，如果我滑动，则在“C”上一次又是连接的旋转木马

我从页面 C 传递到 A，然后我回到 B 返回 C 等等……经过十年的改变，它停在一个页面上，我滑动这更像是一个完全疯狂的滚动显示效果

下一个和上一个是网址

在 HTML 中

```
 <div data-role="page" data-dom-cache="false" class="actus-page" id="news" data-theme="a" data-next="http://wip17.kenjidev.com/n/39409" data-prev="http://wip17.kenjidev.com/n/39423" data-title="La vitalité de la traduction, levier décisif de la diversité éditoriale"> 
```

如果我把线路加载页面，这个费用有一个无限的ajax页面（有超过50 000个项目..）

和js

```
 $( document ).on( "pageinit", "[data-role='page'].actus-page", function() {
    var page = "#" + $( this ).attr( "id" ),
        next = $( this ).jqmData( "next" ),
        prev = $( this ).jqmData( "prev" );

    if ( next ) {
        //$.mobile.loadPage( next + ".htm" );
        $( document ).on( "swipeleft", page, function() {
            console.log(next +' : ' + page + ' : ' + prev );
            $.mobile.changePage( next  , {transition: "slide"});
        });
    }
    if ( prev ) {
        $( document ).on( "swiperight", page, function() {
            console.log(prev +' : ' + page + ' : ' + next );
            $.mobile.changePage( prev, { transition: "slide" , reverse: true } );
        });
    }
}); 
```

感谢帮助

* * *

**编辑：已解决**

感谢奥马尔的帮助

最后这里的代码解决了所有问题：

```
 $( document ).on( "pageinit", ".actus-page", function() {
var 
    $page = $(this),
    page = "#" + $page.attr( "id" ), 
    next = $page.jqmData( "next" ), 
    prev = $page.jqmData( "prev" ); 

if ( next ) {  
    $page.on( "swipeleft", function() { 
        $.mobile.changePage( next , {transition: "slide"}); 
    }); 
} 

if ( prev ) { 
    $page.on( "swiperight", function() { 
        $.mobile.changePage( prev, { transition: "slide" , reverse: true} ); 
    }); 
}}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T16:02:40.373

如果每个页面都有一个 ID，请使用以下代码在 DOM 中的页面之间动态导航。

```
$(document).on('swipeleft swiperight', function (event) {
 if(event.type == 'swiperight') {
  var prevpage = '#' + $.mobile.activePage.prev('div[data-role="page"]')[0].id;
  $.mobile.changePage(prevpage, {
   transition: 'slide',
   reverse: true
  });
 }

 if(event.type == 'swipeleft') {
  var nextpage = '#' + $.mobile.activePage.next('div[data-role="page"]')[0].id;
  $.mobile.changePage(nextpage, {
   transition: 'slide',
   reverse: false
  });
 }
}); 
```

# python - 使用点斜杠运行 python 脚本 ./

> ID：15838183
> 
> 赞同：5
> 
> 时间：2013-04-05T15:47:44.523
> 
> 标签：python

我在我的主目录中安装了两个 python 2.7.3

```
 one is for Linux:           /home/luban/Linux/Python/2.7.3
   another is for Solaris:   /home/luban/SunOS/Python/2.7.3 
```

然后我在 /home/luban/bin 中创建一个名为“python”的包装器，以便在我在不同系统上工作时调用不同的 python。

[luban@lunbanworks 1] ~ > cat /home/luban/bin/python

```
#!/bin/sh

CMD=`basename $0`

OS=`uname -s`

CMD_PATH="/home/luban/$OS/Python/2.7.3/bin"

if [ -x "${CMD_PATH}/${CMD}" ];then

    export PATH="${CMD_PATH}:${PATH}"

    exec ${CMD_PATH}/${CMD} ${1+"$@"}

else

    echo "${CMD} is not available for ${OS}" 1>&2

exit 1

fi 
```

```
[luban@lunbanworks 2] `ls -l /home/luban/bin/python`

-rwxrwxr-x  1 luban lunban  221 Apr  5 19:11 python* 
```

我使用下面的脚本来测试包装器`/home/luban/bin/python`

```
[luban@lunbanworks 3] ~ > cat myscript.py

    #!/home/luban/bin/python

    myname="lunban"

    print "myname is %s" % myname

[luban@lunbanworks 4] chmod +x myscript.py 
```

我想用`./ run myscript.py`

```
[luban@lunbanworks 5] ~ >./myscript.py

    myname=luban: Command not found.
    lpr: Unable to access "myname" - No such file or directory 
```

使用`/home/luban/bin/python myscript.py`可以工作：

```
[luban@lunbanworks 5] ~ > `/home/luban/bin/python myscript.py`

    myname is luban 
```

在我将 shebang 行更改为 后`#!/home/luban/Linux/Python/2.7.3/bin/python`，使用`./`可以执行脚本。

```
[luban@lunbanworks 6] ~ >cat myscript.py

    #!/home/luban/Linux/Python/2.7.3/bin/python
    myname="lunban"

    print "myname is %s" % myname

[luban@lunbanworks 7] ~ >./myscript.py

    myname is luban 
```

为什么我`#!/home/luban/Linux/Python/2.7.3/bin/python`在myscript.py开头使用的时候，`./myscript.py`可以工作，

`#!/home/luban/bin/python`但是如果我在我的python脚本中使用包装器，`./` 用来运行脚本，它不能工作吗？

`#!/home/luban/bin/python`我只在Linux下安装python时使用了很多脚本`#!/home/luban/`，它们可以运行`./`，我不想更改它们，

`./`那么，如果我想将包装器`#!/home/luban/bin/python`保留为 shebang 行，如何让运行 python 脚本？

* * *

代特：

`./myscript.py`不能使用下面的包装`#!/home/luban/bin/python`器`CentOS 5.4, Bash 3.2.25`

今天，我有一个测试`CentOS 6.4, Bash 4.1.2`：

我添加了

```
echo '$0 =' $0
echo '${COMMAND_PATH}/${COMMAND} ${1+"$@"} =' ${COMMAND_PATH}/${COMMAND} ${1+"$@"} 
```

进入包装器`#!/home/luban/bin/python`进行跟踪。

`./myscript.py`与包装器一起使用`#!/home/luban/bin/python`

```
[luban@lunbanworks 20] ./myscript.py 
      $0 =  /home/luban/bin/python
      ${COMMAND_PATH}/${COMMAND} ${1+"$@"} =  /home/luban/Linux/Python/2.7.3/bin/python ./myscript.py
      myname is luban 
```

所以我想当`./`我使用包装器时它可能是一个 Bash 3.2.25 错误`#!/home/luban/bin/python`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T16:12:24.600

你有没有考虑过：

```
#!/usr/bin/env python 
```

这通常对我有用，只要在搜索路径中找到 python。

在您的情况下，您希望您的个人资料在个人资料设置中具有以下内容：

```
# Adjust for your preferred shell
export PATH=/home/luban/Linux/Python/2.7.3:/home/luban/SunOS/Python/2.7.3:$PATH 
```

然后，当你的 python 脚本使用 "#!/usr/bin/env python" shebang 运行时，它会为你找到合适的 python。

# iphone - iOS PDF 表格和报告

> ID：15838188
> 
> 赞同：0
> 
> 时间：2013-04-05T15:48:03.030
> 
> 标签：iphone, ios, pdf

我们正在开发一种解决方案，该解决方案需要 iOS 为各种业务交易（即销售订单、采购订单、报价单、发票等）创建 PDF 文档。

进入 PDF 文档的基础数据是相同的；但是，许多用户会想要自己的公司徽标，并且很可能需要自己的格式化布局。

我们可以使用一组默认表单和更改公司徽标的动态方式来交付产品，但我们正在尝试确定一种机制来自定义设计表单布局（使用相同的底层数据模型）并以某种方式发送/更新/交付仅限已为自定义表单开发付费的用户。

由于 PDF 生成过程是客观的 c 并且我知道苹果不允许我们在发布后下载代码，我想知道是否还有其他人对如何解决这个问题有想法。

编辑：我希望以某种方式模块化 PDF 表单布局所需的代码。无论是通过应用内购买还是从我们服务器上的文件列表中进行选择，都不是一个大问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:05:59.633

您可以在 XML 中定义表单模板，然后将这些模板下载到您的应用程序。在您的应用程序中，您解析 XML 并将其转换为 PDF 绘图指令。
例如，您的 XML 可能如下所示：

```
<form>
    <page width="612" height="792">
        <line x1="20" y1="20" x2="500" y2="20" />
    </page>
</form> 
```

此 XML 将生成一个 PDF 文件，该文件具有大小为 612*792 点的单页，页面内容由从 (20, 20) 到 (500, 20) 绘制的单条水平线组成。
您可以以任何您想要的方式定义您的 XML，以便它最适合您的需要。

# android - 添加 (AdMob) 大小可以是 fill_parent insted wrap_content？

> ID：15838190
> 
> 赞同：1
> 
> 时间：2013-04-05T15:48:03.323
> 
> 标签：android, android-layout, view, admob, banner

我的添加造成了一些视图比例问题。我通过制作 android:layout_width fill_parent insted wrap_content 解决了这个问题。

```
 <com.google.ads.AdView
                android:id="@+id/ad"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                ads:adSize="BANNER"
                ads:adUnitId="axxxxxx"
                ads:loadAdOnCreate="true" /> 
```

有什么我应该注意的问题还是可以的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T01:46:08.670

`Fill_parent`对宽度没问题，只要你明白它的意思。基本上，广告将是 320x50，但视图将跨越整个宽度，因此您不能在该区域放置任何其他视图。

如果您要使用全宽，您也可以考虑`SMART_BANNER`广告尺寸，这将用广告填满整个空间。

# excel - Excel VBA图表->在图表中使用“单元格”进行范围选择

> ID：15838191
> 
> 赞同：0
> 
> 时间：2013-04-05T15:48:05.980
> 
> 标签：excel, charts, runtime-error, office-2007, vba

我正在尝试修改现有的 VBA 代码 (Excel)，它可以制作图表，并使其更加灵活。

我知道以下代码基本上做同样的事情：

```
Range(Cells(12, 2), Cells(15, 2)).Select 
```

或多或少等同于：

```
Range("B12:B15").Select 
```

我的目标是有一个图表，它代表灵活的行数。

所以我改变了现有的代码：

```
ActiveChart.SetSourceData Source:=Sheets("Log-Data").Range("B12:B200"), PlotBy:=xlColumns 
```

至

```
Dim LastRow As Integer
LastRow = ActiveSheet.UsedRange.Rows(ActiveSheet.UsedRange.Rows.Count).Row    
ActiveChart.SetSourceData Source:=Sheets("Log-Data").Range(Cells(12, 2), Cells(LastRow, 2)), PlotBy:=xlColumns 
```

现在，每当我执行代码时，我都会收到：

> 运行时错误“1004”：应用程序定义的或对象定义的错误

`LastRow`变量不是问题：如果我用 200 替换它，我会得到相同的结果。

我究竟做错了什么？

干杯

彼得

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-21T06:30:55.660

我尝试了以下并且它有效（在 Cells 单词之前添加一个句点）

```
Dim LastRow As Integer
LastRow = ActiveSheet.UsedRange.Rows.Count

With Sheets("Log-Data")
Set Myrange = .Range(.Cells(12, 2), .Cells(LastRow, 2))
End With

ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Myrange, PlotBy:=xlColumns 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-23T15:08:17.940

`LastRow = ActiveSheet.UsedRange.Rows(ActiveSheet.UsedRange.Rows.Count).Row`

和

`LastRow = ActiveSheet.UsedRange.Rows.Count`

是相同的。

就实际错误而言，运行代码时看起来好像没有活动图表对象。所以`ActiveChart.`返回一个对象错误。

尝试这个：

```
Dim LastRow As Integer
LastRow = ActiveSheet.UsedRange.Rows.Count
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Sheets("Log-Data").Range(Cells(12, 2), Cells(LastRow, 2)), PlotBy:=xlColumns 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-02-24T16:15:18.983

**试试下面，让我知道**

```
Dim LastRow As Integer
LastRow = ActiveSheet.UsedRange.Rows.Count

With Sheets("Log-Data")
Set Myrange = .Range(Cells(12, 2), Cells(LastRow, 2))
End With

ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Myrange, PlotBy:=xlColumns 
```

# git - 使用 git 管理本地功能分支的最佳方法？

> ID：15838192
> 
> 赞同：1
> 
> 时间：2013-04-05T15:48:06.737
> 
> 标签：git, branching-and-merging, feature-branch

我正在研究使用 git 进行分支管理的一些更好的点，并基于本文做出了一些决定：

[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

现在我们在这里有一个稍微简单的场景，在远程我们有`master`和`development_branch`. 就所有开发人员而言`development_branch`，主要是从那里进行克隆，并且只有在我们有稳定版本时才会从开发合并到主库。

现在考虑到这一点，我们每个 sprint 都有一堆故事需要完成，所以我们目前所做的是克隆`development_branch`然后为我们正在处理的故事/功能创建一个新分支，例如`product_description_feature`. 然后处理这个本地分支，因此如果我们需要执行另一项任务或进行某种修复，我们可以`development_branch`返回并从中分支。

现在问题是围绕以这种方式工作的过程，目前安全的选择似乎是以下过程：

*   克隆`development_branch`
*   为任务创建新分支（我们将`feature_a`在本例中调用它）
*   提交到`feature_a`分支直到任务完成
*   切换到本地`development_branch`
*   将任何新的更改从原点拉下来（通常是经常发生的事情）
*   将更改合并 `feature_a`到`development_branch`
*   将本地推`development_branch`送到原点
*   为下一个任务创建新分支

现在效果很好，每个人都很高兴，但是在以下场景中你想更频繁地拉取：

*   克隆`development_branch`
*   为任务创建新分支（我们将`feature_b`在本例中调用它）
*   提交到`feature_b`分支
*   你意识到一个障碍，必须拉最新的变化
*   切换到`development_branch`
*   将原点`development_branch`拉到本地
*   切换到`feature_b`
*   从`development_branch`本地合并到`feature_b`
*   继续工作直到完成

现在这看起来很安全，每个人都很高兴，但是我不确定我是否**需要**切换到`development_branch`并下拉然后切换回来并合并到我的本地功能分支中。那么我在这里是否过于谨慎，应该从`development_branch`原产地拉到当地`feature_b`分支机构？

这似乎应该没问题，因为我所做的只是将更改直接放入我的本地功能分支而不更新我的本地`development_branch`，然后如果我需要推送更改，我将再次切换、拉取、合并、推送。

那么有人可以确认这是否是好的做法等吗？

也不会过多地污染问题，因为这些功能分支只存在于每台开发人员的机器上，如果有人做了一半的任务，然后其他人需要接手，会发生什么？您可以将该分支推到原点并让他们将其取下然后对其进行处理，但随后需要进一步清理，所以我认为没有*很好的*方法来解决这个问题，但我很想听听如何其他人解决了这个问题，而不会远程创建一个过时功能分支的荒地。

* * *

还有一些需要提及的事情，我们目前只是 ffwd 合并，所以虽然在引用的原始文章中提到了 NOT ffwd 合并，但我看不出如何在不创建大量远程分支的情况下做到这一点。我使用的是 Tortoise GIT 而不是命令行，但这不应该真正改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T21:17:27.347

如果您想要来自另一个分支的最新更新，您可以跳过两个分支开关。

```
git fetch
git merge origin/development_branch 
```

至于您对工作流程的问题，这完全是政策问题。我的工作地点使用项目分支，我们只是自己清楚地确定它们的寿命。我们知道一个分支何时诞生，我们也知道它何时需要死亡。这是使用`-d`标志删除分支的好处。

```
git branch -d feature_branch 
```

通过这种方式（而不是使用`-D`），您可以确保分支已合并回主线。否则它会阻止你。所以，你可以相当自由地使用这个删除命令。

# java - 奇怪的 assertEquals 并包含行为

> ID：15838197
> 
> 赞同：1
> 
> 时间：2013-04-05T15:48:15.030
> 
> 标签：java, list, junit

我有一个非常简单的 Pair 类，定义如下：

```
public class Pair<L, R> {

    private L left;
    private R right;

    public Pair(L left, R right) {
        this.left = left;
        this.right = right;
    }

    public L getLeft() {
        return this.left;
    }

    public R getRight() {
        return this.right;
    }

    public String toString() {
        return String.format("(%s, %s)", left, right);
    }

    public int hashCode() {
        int hashFirst = left != null ? left.hashCode() : 0;
        int hashSecond = left != null ? right.hashCode() : 0;

        return (hashFirst + hashSecond) * hashSecond + hashFirst;
    }

    public Boolean equals(Pair other) {
        if (other == null) {
            return false;
        }

        return left.equals(other.getLeft()) && right.equals(other.getRight());
    }
} 
```

然后我有一个 Position 类定义如下：

```
public class Position {

    private Pair<Integer, Integer> pair;

    public Position(Integer x, Integer y) {
        this.pair = new Pair<Integer, Integer>(x, y);
    }

    public Integer getX() {
        return this.pair.getLeft();
    }

    public Integer getY() {
        return this.pair.getRight();
    }

    public boolean equals(Position other) {
        if (other == null) {
            return false;
        }

        boolean b = getX() == other.getX() && getY() == other.getY();
        System.out.println(String.format("%s.equals(%s): %s", this, other, b));
        return b;
    }

    public int hashCode() {
        return pair.hashCode();
    }

    public String toString() {
        return String.format("(%d, %d)", this.pair.getLeft(),
                              this.pair.getRight());
    }

} 
```

这一切都很好。但是，当我尝试对其进行测试时，会发生一些奇怪的事情。

```
public class PositionTests extends TestCase {

    private Position posOne;
    private Position posTwo;
    private Position posThree;

    public PositionTests() {
        posOne = new Position(7, 6);
        posTwo = new Position(12, 7);
        posThree = new Position(7, 6);
    }

    public void testCreationX() {
        assertEquals(posOne.getX(), (Integer) 7);
    }

    public void testCreationY() {
        assertEquals(posOne.getY(), (Integer) 6);
    }

    public void testEquality() {
        // System.out.println("p1.e(p3): " + posOne.equals(posThree));
        // System.out.println("p3.e(p1): " + posThree.equals(posOne));
        //assertEquals(posOne, posThree);
        assertEquals(posThree, posOne);
    }

    public void testInequality() {
        assertFalse(posOne.equals(posTwo));
    }

    public void testXEquality() {
        assertEquals(posOne.getX(), posThree.getX());
    }

    public void testYEquality() {
        assertEquals(posOne.getY(), posThree.getY());
    }

    public void testSymmTrue() {
        assertTrue(posOne.equals(posThree) == posThree.equals(posOne));
    }

    public void testSymmFalse() {
        assertTrue(posOne.equals(posTwo) == posThree.equals(posTwo));
    }

    public void testHashSetSame() {
        Set<Position> hSet = new HashSet<Position>();
        hSet.add(posOne);
        hSet.add(posThree);
        hSet.add(posTwo);
        hSet.add(posOne);
        hSet.add(posOne);
        hSet.add(posOne);
        assertTrue(hSet.size() == 3);
    }

    public void testListContainsSuccess() {
        List<Position> pList = new ArrayList<Position>();
        pList.add(posOne);
        pList.add(posTwo);
        assertTrue(pList.contains(posOne));
    }

    public void testListContainsSuccessDiff() {
        List<Position> pList = new ArrayList<Position>();
        pList.add(posOne);
        pList.add(posTwo);
        // System.out.println(pList);
        // System.out.println(posThree);
        Boolean b = pList.contains(posThree);
        System.out.println("contains: " + b);
        assertTrue(pList.contains(posThree));
    }

    public void testListContainsFail() {
        List<Position> pList = new ArrayList<Position>();
        pList.add(posOne);
        pList.add(posThree);
        assertFalse(pList.contains(posTwo));
    }

} 
```

测试的相关输出如下：

```
 [junit] ------------- Standard Output ---------------
    [junit] JUnit version is: 3.8.2
    [junit] contains: false
    [junit] (7, 6).equals((7, 6)): true
    [junit] (7, 6).equals((7, 6)): true
    [junit] (7, 6).equals((12, 7)): false
    [junit] (7, 6).equals((12, 7)): false
    [junit] (7, 6).equals((12, 7)): false
    [junit] (7, 3).equals((7, 4)): false
    [junit] ------------- ---------------- ---------------
    [junit] 
    [junit] Testcase: testListContainsSuccessDiff took 0.005 sec
    [junit]     FAILED
    [junit] null
    [junit] junit.framework.AssertionFailedError
    [junit]     at com.group7.dragonwars.tests.PositionTests.testListContainsSuccessDiff(PositionTests.java:92)
    [junit] 
    [junit] Testcase: testListContainsFail took 0 sec
    [junit] Testcase: testYEquality took 0 sec
    [junit] Testcase: testSymmTrue took 0.014 sec
    [junit] Testcase: testSymmFalse took 0.001 sec
    [junit] Testcase: testHashSetSame took 0 sec
    [junit] Testcase: testListContainsSuccess took 0 sec
    [junit] Testcase: testCreationY took 0 sec
    [junit] Testcase: testEquality took 0.001 sec
    [junit]     FAILED
    [junit] expected:<(7, 6)> but was:<(7, 6)>
    [junit] junit.framework.AssertionFailedError: expected:<(7, 6)> but was:<(7, 6)>
    [junit]     at com.group7.dragonwars.tests.PositionTests.testEquality(PositionTests.java:43)
    [junit] 
    [junit] Testcase: testInequality took 0.001 sec
    [junit] Testcase: testXEquality took 0 sec
    [junit] Testcase: testCreationX took 0 sec
    [junit] Test com.group7.dragonwars.tests.AllTests FAILED 
```

现在发布了我所有的相关代码和测试结果，我的问题是为什么 assertEquals(posOne, posThree) 以及对 contains() 的调用会失败？正如您在测试输出顶部看到的那样，.equals() 返回 true。我很困惑为什么这些失败。在我的整个程序中，我不得不使用手动列表遍历和手动调用 equals() 来检查列表成员，但*为什么*？List 的文档说

```
Returns true if this list contains the specified element. More formally, returns true if and only if this list contains at least one element e such that (o==null ? e==null : o.equals(e)). 
```

然而，`.contains()`失败了。什么……？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:52:20.523

如果您`@Override`向 equals() 方法添加注释，您将看到问题。参数类型必须是`Object`，不是`Position`。

```
@Override
public boolean equals(Object other) { 
```

另外，里面有错别字`Pair.hashCode()`。

```
 int hashFirst = left != null ? left.hashCode() : 0;
    int hashSecond = left != null ? right.hashCode() : 0;
                     ^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:54:03.707

您希望 Position 和 Pair 上的 equals 采用 Object —— 您只是用采用 Pair 的声明重载它。

您在 Pair 上的 hashCode 实现也很奇怪 :) 也许使用 Apache EqualsBuilder 和 HashBuilder 类？

相关javadoc：[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals(java.lang.Object)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals(java.lang.Object))

# macos - Mac/iPad MobileProvision 未添加

> ID：15838198
> 
> 赞同：0
> 
> 时间：2013-04-05T15:48:16.803
> 
> 标签：macos, ipad

我完成了他们的证书设置，它创建了一个 .mobileprovision ，我将其下载到我的下载文件夹中。我在连接 iPad 的情况下打开了管理器。在我的 iPad 下的 Provisioning Profiles 下，我将 .mobileprovision 文件拖入其中，但它没有将其添加到列表中。我也尝试通过 +（添加）按钮，但无论我做什么，文件都不会添加到我的 iPad 的配置文件中。

有什么想法可以添加它以便在 iPad 上进行测试吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:57:49.707

看起来有一个配置按钮，上面写着“用作开发”。必须先单击它，然后我才能添加配置文件。

# mysql - 在 MySQL 中将逗号分隔的字符串作为表处理

> ID：15838201
> 
> 赞同：0
> 
> 时间：2013-04-05T15:48:29.263
> 
> 标签：mysql, reporting-services

我正在将 SSRS 与 MySQL 一起使用，并且需要处理来自 SSRS 的多选参数进入我在 MySQL 中的例程（存储过程）。

SSRS 将多选参数作为逗号分隔的字符串传递：

“1,2,3,4”

在 SQL Server 中执行此操作的常用方法是使用表值函数，该函数将返回一个表，其中每个值对应一行。然后你加入这张桌子，一切都很好。

由于 MySQL 没有等效的表值函数，因此在 MySQL 中处理这种情况的最佳方法是什么？

我已经看到了在函数中使用临时表的建议，但是我将同时调用多个它，因此很可能无法正常工作。

# asp.net-mvc - 基于模拟控制器创建动作

> ID：15838204
> 
> 赞同：0
> 
> 时间：2013-04-05T15:48:35.897
> 
> 标签：asp.net-mvc, unit-testing, mocking, moq

我有以下用于测试控制器的测试方法。

```
[TestMethod()]
    public void ResetTest()
    {
        var target = new Mock<PROJECT.Reset.Controllers.ResetController>();
        //var target = new PROJECT.Reset.Controllers.ResetController();

        FormCollection form = new FormCollection();
        form.Set("username","domain\\username");
        form.Set("password","testpass123");
        form.Set("confirmpassword","testpass123");

        ViewResult expected = new ViewResult();
        expected.ViewName = "Reset";
        expected.ViewData.Model = rm;
        ActionResult action = target.Object.;

        action = target.Object.Reset(form);
        ViewResult actual = (ViewResult)action;            
        Assert.AreEqual(expected, actual);
    } 
```

如果我使用：

```
var target = new Mock<PROJECT.Reset.Controllers.ResetController>(); 
```

然后该操作被评估为空。如果我将其更改为未注释的代码行下方，则正在设置操作。任何想法可能导致这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:15:26.903

你为什么嘲笑这个？看来这是您的实际 SUT（正在测试的解决方案）。所以，你根本不应该嘲笑它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T21:51:12.533

您对 Mocking 框架的理解可能不正确。您不应模拟要测试的对象（在您的情况下为控制器对象）。您可以/仅对依赖对象进行模拟。

例如：存储库对象等。

# javascript - 使用 javascript 或 jquery 切换效果动作

> ID：15838205
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:48:41.617
> 
> 标签：javascript, jquery, joomla, toggle

我资助了一个完美运行的切换代码，但我想添加一个速度效果以在打开和关闭时减慢它的速度。我确实尝试在其上插入此代码`<p onclick="javascript:setTimeout(toggle(), 3000);">OPEN</p>`，`<h1>OPEN</h1>`但没有成功。

我有一个 joomla 网站，一些插件使用 jquery。似乎 Jquery 可以用`.toggle( [duration ] [, complete ] )`我已经看到 JQ 是一个“Javascript 库”的东西来解决这个问题，所以它应该与下面的代码一起工作，但不知道我应该如何插入它。我不知道“简单地”在下面的代码中添加 jquery 代码是否可行，或者我是否应该在 FTP 网站中添加一些 XX.js 文件（正如我在一些教程中看到的那样）。我迷路了...

```
<script type="text/javascript">
    // <![CDATA[
    function toggle(id, link) {
        var elem = document.getElementById(id);
        var text = document.getElementById(link);
        if (elem.style.display != "none") {
            elem.style.display = "none";
            text.innerHTML = "show";
        } else {
            elem.style.display = "block";
            text.innerHTML = "hide";
        }
    }
    // ]]>

</script>
<ul>
    <li><a id="displayText" href="javascript:toggle('toggleText', 'displayText');">show</a>
        <div id="toggleText" style="display: none;">
            <h1>OPEN</h1>
        </div></li>
    <li><a id="toggler2" href="javascript:toggle('secondText', 'toggler2');">show</a>
        <div id="secondText" style="display: none;">
            <h1>OPEN</h1>
        </div></li>

</ul> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:06:18.393

由于您使用的是 jquery，因此请对标记进行一些小改动以方便使用

```
<ul id="container">
  <li>
    <a class="opener">show</a>
    <div style="display: none;">
      <h1>OPEN</h1>
    </div>
  </li>

  <li>
    <a class="opener">show</a>
    <div style="display: none;">
      <h1>OPEN</h1>
    </div>
  </li>
</ul> 
```

然后

```
$(function(){
  $('#container').on('click', 'a.opener', function(){
    $(this).next().toggle('slow')
  });
}); 
```

演示：[小提琴](http://plnkr.co/edit/Z0kCOsMk2MIOQLipoPT9?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T13:06:53.930

对于 joomla：

1/ 在标签后面添加 index.php：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.js"></script>
    <script type="text/javascript" src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript"></script> 
```

2/ 在 ftp 中创建一个名为 app.js 的文件并在其中写入：

```
var $j = jQuery.noConflict();
$(function(){
  $('#container').on('click', 'a.opener', function(){
    $(this).next().toggle('slow')
  });
}); 
```

3/文章源码中：

```
<ul id="container">
  <li>
    <a class="opener">show</a>
    <div style="display: none;">
      <h1>OPEN</h1>
    </div>
  </li>

  <li>
    <a class="opener">show</a>
    <div style="display: none;">
      <h1>OPEN</h1>
    </div>
  </li>
</ul> 
```

# visual-studio-2010 - 为什么我的项目转换成功后卸载了？

> ID：15838208
> 
> 赞同：0
> 
> 时间：2013-04-05T15:48:45.633
> 
> 标签：visual-studio-2010, visual-studio, resharper

为了在我目前维护的大量恶意（由我）项目中使用最新版本的 resharper，我将所有源代码复制到一个单独的文件夹并在 VS 2010 中打开该项目。

它转换成功，所以转换报告说（在通知我它似乎在版本控制下但由于它缺少所需的信息而不受约束，我接受了）。然而，虽然转换名义上是成功的，但在解决方案资源管理器中，在项目名称下方，它显示“项目已卸载”

现在是细节：该项目有两个相关的解决方案，一个“常规”（.exe）和一个库（.dll）项目；它们都显示在解决方案资源管理器中，但都显示“项目已卸载”。

现在是奇怪的部分：当我意识到我什至没有从 .dll 项目中复制文件时，我重新开始并为它们创建了两个单独的文件夹（就像它们在开发设置中一样），并将每个文件复制到每个文件夹。

但是现在，当我尝试从这个新位置打开 .exe 项目（之前声称已成功转换的项目）时，选择 File | 打开项目并选择*.sln 文件，我得到，“* \.csdproj' 无法打开，因为此版本的应用程序不支持其项目类型 (.csdproj)。要打开它，请使用支持此类型的版本项目。*

开发环境是XP Mode虚拟机中的VS2003；我正在尝试在 Windows 7 的 VS2010 中打开项目。

有没有办法让这个项目在 VS2010 中打开和编译，这样我就可以将它重新锐化（并将其中的一些修复程序，尽管是手动的，一次一个）到项目的“实时”版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T16:50:15.603

最好的方法是在 Visual Studio 2010 中创建一个新项目，就像您所做的那样。这将创建项目文件夹和任何必要的设置。

接下来，将文件从旧项目复制到这个新文件夹。当您将文件复制到新文件夹中时，还要将该文件“拖放”到您的 Visual Studio 解决方案中。

从上一个版本到下一个版本，Visual Studio 转换向导很好，但是从 VS2003 到 VS2010 可能是一个太大的跳跃。

如果我不得不猜测，这种转换是轰炸的，因为您的旧项目以 .NET Framework 1.0 为目标，而 VS2010 不支持 1.0。

由于框架的变化，您可能不得不重建您的项目并修复许多小错误，但没有一个应该是主要的。

# selenium - 寻找一个 Jubula hack / 替代方案，它可以使用 XPATH 识别组件

> ID：15838211
> 
> 赞同：0
> 
> 时间：2013-04-05T15:49:04.533
> 
> 标签：selenium, functional-testing, jubula

我们计划使用 Jubula 来测试我们的 Web 应用程序的功能，但是在评估 Jubula 之后我们遇到了问题。我们不能制作具有不同 id（生成）的 Jubula 点击字段。

我知道 Jubula 在内部使用 Selenium，因此使用 XPATH 处理 DOM 中的元素应该不是问题。您是否知道任何使这成为可能的 Jubula hack 或替代/衍生产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T07:05:59.647

我认为直接在 Jubula 中使用 XPATH 并不容易。但是，Jubula 在内部使用 XPATH 来处理网页中的组件。

您的问题可能可以通过忽略 id 并使用上下文和层次结构进行组件映射来解决。为此，只需尝试在对象映射编辑器（在配置视图上）中将名称权重设置为零。您可能还需要调整阈值滑块。

# php - 在 PHP 登录页面中使用 cookie

> ID：15838216
> 
> 赞同：0
> 
> 时间：2013-04-05T15:49:22.563
> 
> 标签：php, session, cookies, login

我正在创建一个表单以使用 PHP（显然还有 MySQL）登录。这是PHP代码：

```
<?php
$host = 'localhost';
$db_user = 'root';
$db_password = '';
$db_name = 'learningsql';

$username = stripslashes($_POST['username']);
$password = stripslashes($_POST['password']);

if (strlen($username) < 1 || strlen($password) < 1){
    echo "Username or password incorrect";
} else {
    $username = trim(filter_var($_POST['username'], FILTER_SANITIZE_STRING));
    $password = trim(filter_var($_POST['password'], FILTER_SANITIZE_STRING));
    $hash = hash("sha512",$username. $password);
    $connection = mysqli_connect($host, $db_user, $db_password);
    $db = mysqli_select_db($connection, $db_name);
    $result = mysqli_query("SELECT * FROM utenti WHERE username = '$username' AND password = '$hash'");
    if(mysqli_num_rows($result)==0{
        die("Username or password incorrect");
    } else{
        $_SESSION['loggedin']=1;
        $user = mysqli_fetch_array($result);
        header("location:loggato.php");

    }
}
?> 
```

带有表单的 .html 页面包含会话的 PHP 代码：

```
<?php
session_start();
if(isset($_SESSION['loggedin']))
    header('location:loggato.html');
?> 
```

但是，我有一个问题。我现在使用登录会话，但我想使用 cookie。如何？感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:52:28.570

PHP 会话存储一个 cookie 以启用会话。使用该函数`session_start()`启动会话（duhh），会话将设置一个名为 PHPSESSID 的 cookie。使用一些开发工具在浏览器中检查它。

# windows - pushd \\network\path 返回 CMD 不支持 UNC 路径作为当前目录

> ID：15838217
> 
> 赞同：3
> 
> 时间：2013-04-05T15:49:30.440
> 
> 标签：windows, cmd

我正在使用批处理文件从网络访问一些文件。

我在用

```
pushd \\Network\path 
```

导航到网络目录以启动一些脚本

我的 bat 文件工作得非常好，直到今天早上我看到“返回 CMD 的 cmd 不支持将 UNC 路径作为当前目录”。

我在使用 cd 而不是 pushd 导航到网络目录时看到了此错误消息，但我可以弄清楚为什么我在以前工作的 bat 文件中出现错误。

而且我确实确保网络位置在线并且可以通过其他方式访问。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-15T17:36:56.947

确保还检查您是否没有用完驱动器号。如果您有一个恶意脚本在完成驱动器后没有使用 popd，或者在它到达 popd 之前崩溃，您最终可能会得到一堆垃圾映射驱动器。易于检查，因为它们会显示在`net use`“我的电脑”中。出于某种原因，cmd 会给出这个神秘的错误 ( `CMD does not support UNC paths as current directories.`)，而不是告诉你它的驱动器用完了来映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:59:39.537

来自`pushd /?`：

> 如果启用了命令扩展，则 PUSHD 命令除了接受正常的驱动器号和路径外，还接受网络路径。如果指定了网络路径，PUSHD 将创建一个指向指定网络资源的临时驱动器号，然后更改当前驱动器和目录。

`net use`执行后是否显示任何映射的驱动器`pushd`？

如果您没有收到某种网络授权错误，请确保启用了命令扩展（我不确定为什么不会。）

`cmd /x`将为当前 CMD 会话启用扩展。在执行批处理脚本之前尝试一下。

“主开关”在`HKEY_CURRENT_USER\Software\Microsoft\Command Processor`. `EnableExtensions`应该`(DWORD) 1`

# php - 如何使用 JS/jQuery 设置复选框的活动状态

> ID：15838220
> 
> 赞同：0
> 
> 时间：2013-04-05T15:49:50.253
> 
> 标签：php, jquery, css

我有几个用 php 对属性列表进行排序的函数。排序有效，但是我需要为当前活动单击的 href 设置活动状态。当然，我不能幸运地仅使用 CSS 进行设置（尽管我在下面包含了我的 CSS 片段以供参考）所以我尝试使用 jQuery 这样做，但到目前为止没有成功。你可以找到我的php、jquery 和 css 下面。如果有人能引导我朝着正确的方向前进，我将非常感谢任何帮助。提前致谢！

```
<div>   
    <?php
        foreach( array('desc'=>$main_floor_master) as $asc_desc => $asc_desc_name ) {
        echo '<a class="filter-checkboxes" href="'; 
        echo add_query_arg( array( 'orderby' => main_floor_master, 'order' => $asc_desc)
        );
        echo "\">Main Floor Master</a>";
        }
    ?>  

    <?php
        foreach( array('desc'=>$locality_status) as $asc_desc => $asc_desc_name ) {
        echo '<a class="filter-checkboxes"  href="'; 
        echo add_query_arg( array( 'orderby' => status, 'order' => $asc_desc)
        );
        echo "\">Quick Move In</a>";
        }
    ?>
</div>

<!-- Active states -->
<script>
$(document).ready(function(){

    //active state  
    $(function() {
        $('a').click(function(e) {
            e.preventDefault();
            var $this = $(this);
            $this.parent().addClass('active');

        });
    });
});
</script>

<!-- CSS -->
a.filter-checkboxes {color: #cacaca !important; font-weight: bold; background: url(images/btn-checkboxbg.jpg) no-repeat 0 0; padding-left: 24px; margin-left: 10px;}
a.filter-checkboxes:active {color: #cacaca; font-weight: bold; background: url(images/btn-checkboxbg_selected.jpg) no-repeat 0 0; padding-left: 24px; margin-left: 10px;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:54:35.277

```
$('a').click(function(e) {
    e.preventDefault();
    $(this).addClass('active');
}); 
```

试试上面的代码。您不必缓存对象，除非您在代码片段中多次使用它。

并为

```
a.active{ // 
   // style you want the active link to have
} 
```

请注意，它不`a.filter-checkboxes.active`应该`a.filter-checkboxes:active`

[类似的问题](https://stackoverflow.com/questions/14039968/jquery-make-a-link-in-active-status)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:01:48.790

```
 $('.filter-checkboxes').click(function(e) {
         e.preventDefault();
         $('.active').toggleClass('active');
         $(this).toggleClass('active');

    }); 
```

这将删除以前的活动类（假设您不能同时激活两种活动），并将类设置在新单击的元素上。另外，我更改了选择器以使其更具体，因此它不会`<a>`在页面上的每个标签上运行。

还将css更改为：

```
a.filter-checkboxes {color: #cacaca !important; font-weight: bold; background: url(images/btn-checkboxbg.jpg) no-repeat 0 0; padding-left: 24px; margin-left: 10px;}    
a.filter-checkboxes.active {color: #cacaca; font-weight: bold; background: url(images/btn-checkboxbg_selected.jpg) no-repeat 0 0; padding-left: 24px; margin-left: 10px;} 
```

希望有帮助。

# xml - XSLT：匹配 N 级节点

> ID：15838222
> 
> 赞同：1
> 
> 时间：2013-04-05T15:49:57.987
> 
> 标签：xml, recursion, xslt-1.0

需要通过 id 匹配节点。（比如说a2-2）

XML:

```
<node id="a" title="Title a">
  <node id="a1" title="Title a1" />
  <node id="a2" title="Title a2" >
    <node id="a2-1" title="Title a2-1" />
    <node id="a2-2" title="Title a2-2" />
    <node id="a2-3" title="Title a2-3" />
  </node>
  <node id="a3" title="Title a3" />
</node>
<node id="b">
  <node id="b1" title="Title b1" />
</node> 
```

当前解决方案：

```
<xsl:apply-templates select="node" mode="all">
  <xsl:with-param name="id" select="'a2-2'" />
</xsl:apply-templates>

 <xsl:template match="node" mode="all">
    <xsl:param name="id" />
    <xsl:choose>
      <xsl:when test="@id=$id">
        <xsl:apply-templates mode="match" select="." />
      </xsl:when>
      <xsl:otherwise>
        <xsl:apply-templates mode="all" select="node">
          <xsl:with-param name="id" select="$id" />
        </xsl:apply-templates>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="node" mode="match">
    <h3><xsl:value-of select="@title"/>.</h3>
  </xsl:template> 
```

问题：
对于一个非常常见的问题，上述解决方案似乎非常庞大。
我是否过于复杂？有没有更简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:31:26.383

**此解决方案要短两倍且简单得多（单个模板且无模式）**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>
 <xsl:param name="pId" select="'a2-2'"/>

 <xsl:template match="node">
  <xsl:choose>
   <xsl:when test="@id = $pId">
    <h3><xsl:value-of select="@title"/>.</h3>
   </xsl:when>
   <xsl:otherwise><xsl:apply-templates/></xsl:otherwise>
  </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

# android - 我从 sqlite 获取对象数据输出，而不是我需要的数据

> ID：15838223
> 
> 赞同：0
> 
> 时间：2013-04-05T15:50:00.803
> 
> 标签：android, sqlite

我在这里从我的代码中获取对象数据，但我不知道我该怎么做。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_manage);

    Log.d(TAG, "onCreate");

    datasource = new DataSource(this);
    datasource.open();

    List<Encouragement> values = datasource.getAllEncouragements();

    Log.d(TAG, "values");

    ArrayAdapter<Encouragement> adapter = new ArrayAdapter<Encouragement>(this,
        android.R.layout.simple_list_item_1, values);

    setListAdapter(adapter);
    Log.d(TAG, "end of onCreate");
} 
```

和

```
public List<Encouragement> getAllEncouragements() {

    List<Encouragement> encouragements = new ArrayList<Encouragement>();

    Cursor cursor = database.query(DatabaseHelper.TABLE_ENCOURAGEMENTS,
            allColumns, null, null, null, null, null);

    cursor.moveToFirst();

    while (!cursor.isAfterLast()) {
        Encouragement encouragement = cursorToEncouragement(cursor);
        encouragements.add(encouragement);
        cursor.moveToNext();
    }

    cursor.close();
    return encouragements;
} 
```

正在列表项中生成**com.example.myActivity.myObject@34563475**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:52:14.130

listview 正在调用`toString()`以表示 myObject。您没有覆盖该方法，因此调用`toString()`了默认方法。`Object.toString()`

```
@Override
public String toString(){
   return this.name; // whatever you need to represent this instance of myObject.
} 
```

# python - python3使用自定义属性重新引发异常？

> ID：15838224
> 
> 赞同：7
> 
> 时间：2013-04-05T15:50:07.073
> 
> 标签：python, python-3.x

这是我需要移植的python2代码：

```
try:
  do_something_with_file(filename)

except:
  exc_type, exc_inst, tb = sys.exc_info()
  exc_inst.filename = filename
  raise exc_type, exc_inst, tb 
```

使用上面的代码，我可以通过检查异常是否具有“文件名”属性来获取有问题的输入文件的整个异常。

但是 python3 的 raise 已经改变。这就是 2to3 给我的上述代码：

```
except Exception as e:
  et, ei, tb = sys.exc_info()
  e.filename = filename
  raise et(e).with_traceback(tb) 
```

这给了我另一个错误，我不认为文件名属性被保留：

```
in __call__
    raise et(e).with_traceback(tb)
TypeError: function takes exactly 5 arguments (1 given) 
```

我只想用一些信息透明地传递异常来跟踪输入文件。我想念python2 `raise [exception_type[,exception_instance[,traceback]]]`- 我怎么能在python3中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T15:55:05.570

您可以设置`__traceback__`属性：

```
except Exception as e:
    et, ei, tb = sys.exc_info()
    ei.filename = filename
    ei.__traceback__ = tb
    raise ei 
```

或`.with_traceback()`直接调用旧实例：

```
except Exception as e:
    et, ei, tb = sys.exc_info()
    ei.filename = filename
    raise ei.with_traceback(tb) 
```

**但是**，traceback 已经自动附加了，真的不需要重新附加它。

请参阅[`raise`声明文档](http://docs.python.org/3/reference/simple_stmts.html#the-raise-statement)：

> 回溯对象通常在引发异常时自动创建并作为`__traceback__`可写属性附加到它。

在这种特定情况下，也许您想要一个不同的异常，而不是上下文？

```
class FilenameException(Exception):
    filename = None
    def __init__(self, filename):
        super().__init__(filename)
        self.filename = filename

try:
    something(filename)
except Exception as e:
    raise FilenameException(filename) from e 
```

这将创建一个链式异常，如果未捕获两个异常都将被打印，并且原始异常以`newexception.__context__`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T16:01:14.167

你不需要做任何事情；在 Python 3 中，重新引发的异常会自动从它们最初引发的位置获得完整的回溯。

```
try:
  do_something_with_file(filename)
except Exception as exc_inst:
  exc_inst.filename = filename
  raise exc_inst 
```

这是有效的，因为在捕获语句中的异常时适当地`PyErr_NormalizeException`设置了属性；见[http://www.python.org/dev/peps/pep-3134/](http://www.python.org/dev/peps/pep-3134/)。`__traceback__``except`

# sql - 我应该在 SQL 中使用什么 Join

> ID：15838226
> 
> 赞同：0
> 
> 时间：2013-04-05T15:50:14.037
> 
> 标签：sql, sql-server-2008

我的数据库中有四个表：包含 ID(PK) 和名称的人员。Person_Skill 包含 ID(PK)、PID(FK)、Skill(FK) 和 SkillLevel(FK)。包含 ID(PK) 和 SkillLabel 的技能。包含 ID(PK) 和名称的技能级别。

每个技能都有从0到7的等级

现在我想显示该人拥有的所有技能（包括技能级别 = 0）

```
Select
   [dbo].Person.Name as Name,
   [Skill].SkillLabel as SkillName,
   [Person_Skill].[SkillLevel] as SkillLevel
From
   ([dbo].Person inner join [dbo].[Person_Skill] ON [dbo].[Person_Skill].PID= Person.ID)
   inner join [dbo].[Skill] ON [dbo].[Person_Skill].Skill=Skill.ID 
```

上面的代码只显示了这个人从1级到7级的技能。

我相信我只获得 1 到 7 级技能的原因是因为 person 表只包含 1 到 7 级的技能，但我不确定这一点。我从其他人那里得到了数据库。如果我的假设是正确的，有没有办法做到这一点？获取技能表中的所有技能并显示该人拥有的技能等级（包括技能等级=0）。

```
Sample Data:
Person
ID    Name
----------
1     Michael
2     Alex

Person_Skill
ID    PID  SkillID Skill_Level
5     1     10          5
6     2     11          1
7     1     12          7
8     1     13          5

Skill
ID    Name
10    java
11    C++
12    HTML
13    ASP
14    C
15    .NET
16    C#
17    Objective

The expect results are;
Name    SkillName SkillLevel
----------------------------
Alex    java        0
Alex    C++         1
Alex    HTML        0
Alex    ASP         0
Alex    C           0
Alex    .NET        0
Alex    C#          0
Alex    Objective C 0
Michael    java      5
Michael    C++       0
Michael    HTML      7
Michael    ASP       0
Michael    C         0
Michael    .NET      5
Michael    C#        0
Michael    Objective C0 
```

当前查询只输出

```
Alex    C++         1
Michael    java      5
Michael    HTML      7
Michael    .NET      5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:56:37.357

编辑，如果您想返回每个人的所有技能名称，那么您将需要使用：

```
select d.p_name,
  d.s_name SkillName,
  coalesce(ps.Skill_Level, 0) Skill_Level
from
(
  select p.id p_id, p.name p_name, s.id s_id, s.name s_name
  from person p
  cross join skill s
) d
left join person_skill ps
  on d.p_id = ps.pid
  and d.s_id = ps.skillid
left join skill s
  on ps.skillid = s.id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/f0136/13)

~~如果要包括所有`Skills`0-7，则需要使用`LEFT JOIN`. 您的查询将类似于以下内容：~~

 ~~```
select p.Name as Name,
   s.SkillLabel as SkillName,
   ps.[SkillLevel] as SkillLevel
from [dbo].[Skill] s
left join [dbo].[Person_Skill] ps
  on ps.Skill=s.ID
left join [dbo].Person p
  on ps.PID = p.ID 
```~~ 

编辑，没有看到任何数据很难确定。但是，如果您想检索 all `SkillLevels`，则需要包含该表。您可能需要使用：

```
select 
  p.Name as Name,
  s.SkillLabel as SkillName,
  sl.[Name] as SkillLevel
from SkillLevel sl
left join [dbo].[Person_Skill] ps
  on ps.SkillLevel=sl.ID
left join [dbo].[Skill] s
  on ps.Skill = s.Id
left join [dbo].Person p
  on ps.PID = p.ID 
```

 ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:53:29.087

您可能希望使用`LEFT JOIN`which when `tableA`is inner join on`tableb`将返回所有记录，`tableA`无论是否存在匹配项`tableB`

因此，如果没有具有 技能的人`0`，您仍然可以取回所有`person`记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:55:01.177

An`INNER JOIN`只会返回双方都匹配的行。因此，在您的代码中，如果一个人没有 0 级技能，则不会返回。

您可以执行 a `LEFT`or `RIGHT`join ，然后这些从左侧或右侧的表中获取所有行。我*认为*您可能想使用左连接，但是如果不了解更多有关您的架构的信息，就很难确定。有关不同连接类型差异的更多详细信息，请参阅[SQL Server 中的左连接和左外连接](https://stackoverflow.com/a/406333/96505)问题的答案~~

# google-chrome-devtools - 在隐身模式Chrome开发工具中永久禁用缓存？

> ID：15838229
> 
> 赞同：3
> 
> 时间：2013-04-05T15:50:34.693
> 
> 标签：google-chrome-devtools

每次我打开一个新的隐身实例时，我都必须打开设置并单击`Disable Cache`和`Enable Sourcemaps`。这很烦人，我希望永久保存这些设置。这可能吗？

# c++ - cin 在读取数学运算时无法正常工作

> ID：15838233
> 
> 赞同：3
> 
> 时间：2013-04-05T15:50:39.377
> 
> 标签：c++

我尝试编写一个函数，将表达式切成标记，如下所示。

```
while(true)
{
    cin >> d_tmp;               
    if(!cin){
        cin.clear();
        cin >> ch_tmp;

        cout << ch_tmp << endl;
    }
    else
    {
        cout << d_tmp << endl;
    }
} 
```

但是，该功能没有按我的预期工作。当我输入一个随机数和字符序列时它工作正常当我输入“a 3 b”时返回“a”“3”和“b”，但是当我输入“3 + 4”时，所有返回都是“3” '和'4'。

我已经使用以下代码尝试了几个测试用例。看来如果我想让程序打印'3''+''4'，我必须输入“3 ++ 4”。这完全让我感到困惑。有人对此有任何想法吗？？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:22:52.487

您声明变量的类型是：

```
int d_tmp;
char ch_tmp; 
```

使用 input `3 + 4`，执行如下：

*   `cin >> d_tmp;`读取 3，读取空间，停止
*   `if(!cin)`是假的，去别的地方，然后打印`3`
*   `cin >> d_tmp;`读取`+`，读取空间，错误
*   `if(!cin)`是真的
*   `cin >> ch_tmp;`读`4`

输入流的数字解析器将其视为数字，因此如果看到它`+12`就会消耗它。`+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:32:17.440

`cin >> d_tmp;`“+”字符在尝试将其解析为`int`并设置失败标志时被吃掉

# dns - 如何将主机名配置为与子域具有相同的名称？

> ID：15838239
> 
> 赞同：1
> 
> 时间：2013-04-05T15:50:51.860
> 
> 标签：dns, windows-server-2008, subdomain, windows-server-2008-r2

我在 unix 系统上轻松完成了以下操作，但我无法在 MS Windows 服务器上进行相同的配置：

`subdomain.example.org`是一个区域，因此我可以设置子主机名，例如`host.subdomain.example.org`. 此外，`subdomain.example.org`它也是子域的入口点并运行网络服务器。为此，我创建了一个`A record`指向 IP 地址的地址。也就是说，主机名与子域名相同。

我似乎无法在 Windows 服务器上重现这一点。创建子域后，我无法添加`A record`. 启动并运行它的秘诀是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:58:32.503

创建 A 记录时，您可以使用`@`记录名称的符号来指示父记录，即没有记录名称。在您的情况下，这适用于子域区域（及其他区域）。

```
example.com = @ IN A 1.2.3.4  
www.example.com = www IN A 192.168.0.2 
```

示例原始 dns 区域文件：

```
$TTL    14400
$ORIGIN example.com.
@  1D  IN    SOA ns1.example.com.   hostmaster.example.com. (
                  2002022401 ; serial
                  3H ; refresh
                  15 ; retry
                  1w ; expire
                  3h ; minimum
                 )
       IN  NS     ns1.example.com. ; in the domain
       IN  NS     ns2.smokeyjoe.com. ; external to domain
       IN  MX  10 mail.another.com. ; external mail provider

@      IN  A      1.2.3.4   ; root record here would be value for example.com
ns1    IN  A      192.168.0.1  ;name server definition     
www    IN  A      192.168.0.2  ;web server definition
ftp    IN  CNAME  www.example.com.  ;ftp server definition

bill   IN  A      192.168.0.3
fred   IN  A      192.168.0.4 
```

# java - 执行 .getImage 时出现 java.lang.NullPointerException

> ID：15838243
> 
> 赞同：2
> 
> 时间：2013-04-05T15:50:59.900
> 
> 标签：java, nullpointerexception

我已经在这个网站和谷歌上搜索了好几天，并且想知道为什么这不起作用。我正在制作像 FFII 这样的 2D rpg 风格游戏，并且能够根据方向使用不同的图像让角色在屏幕上走动，并且代码运行良好，直到我将其`Image[]`放入一个新类中以使其对以后的编码更有用。这是完美运行的代码部分：

```
package alpharpg;

import java.awt.Image;
import javax.swing.ImageIcon;

public class AlphaCharacterSheet extends AlphaConstants{                

    Image[] avatar;

public AlphaCharacterSheet() {      

            avatar = new Image[NUMOFAVATARS];
}

public void GetCharacter (int c){

        switch (c){
                case BARD:

                    ImageIcon tempii;

                    tempii = new ImageIcon(this.getClass().getResource(FRANTIKMENU));
                    avatar[MENUAVATAR] = tempii.getImage();
                    tempii = new ImageIcon(this.getClass().getResource(FRANTIKBATTLE));
                    avatar[BATTLEAVATAR] = tempii.getImage();
                    tempii = new ImageIcon(this.getClass().getResource(FRANTIKFRONT));
                    avatar[FRONTAVATAR] = tempii.getImage();
                    tempii = new ImageIcon(this.getClass().getResource(FRANTIKBACK));
                    avatar[BACKAVATAR] = tempii.getImage();
                    tempii = new ImageIcon(this.getClass().getResource(FRANTIKLEFT));
                    avatar[LEFTAVATAR] = tempii.getImage();
                    tempii = new ImageIcon(this.getClass().getResource(FRANTIKWALKFRONT));
                    avatar[FRONTWALKAVATAR] = tempii.getImage();
                    tempii = new ImageIcon(this.getClass().getResource(FRANTIKWALKBACK));
                    avatar[BACKWALKAVATAR] = tempii.getImage();
                    tempii = new ImageIcon(this.getClass().getResource(FRANTIKWALKLEFT));
                    avatar[LEFTWALKAVATAR] = tempii.getImage();

                default:
                break;
            }

    } 
```

工作的呼吁`GetCharacter(BARD)`，`paint()`我用

`drawImage(party.players[inputcounter].avatar[currentzone.avatarfacing], currentzone.avatarx, currentzone.avatary, null);`

然而，即使当我把它放进去时它工作得很好

```
public Image[] img;

public void AlphaAvatar(){

    img = new Image[NUMOFAVATARS];

}

public void SetAvatar (int avatarid){

    switch (avatarid){

        case BARD:

        ImageIcon tempii;
        tempii = new ImageIcon(this.getClass().getResource(FRANTIKBATTLE));
        img[BATTLEAVATAR] = tempii.getImage();
        tempii = new ImageIcon(this.getClass().getResource(FRANTIKFRONT));
        img[FRONTAVATAR] = tempii.getImage();
        tempii = new ImageIcon(this.getClass().getResource(FRANTIKBACK));
        img[BACKAVATAR] = tempii.getImage();
        tempii = new ImageIcon(this.getClass().getResource(FRANTIKLEFT));
        img[LEFTAVATAR] = tempii.getImage();
        tempii = new ImageIcon(this.getClass().getResource(FRANTIKWALKFRONT));
        img[FRONTWALKAVATAR] = tempii.getImage();
        tempii = new ImageIcon(this.getClass().getResource(FRANTIKWALKBACK));
        img[BACKWALKAVATAR] = tempii.getImage();
        tempii = new ImageIcon(this.getClass().getResource(FRANTIKWALKLEFT));
        img[LEFTWALKAVATAR] = tempii.getImage(); 
```

现在在 CharacterSheet 我有 AlphaAvatar 头像；

在`CharacterSheet()`我有`avatar = new AlphaAvatar();`

然后当`GetCharacter(BARD)`被调用时，我打电话给`avatar.SetAvatar(BARD)`它，它首先给出了错误`img[] = tempii.getImage();`

关于为什么我可以通过一个类而不是另一个类加载图像的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:53:48.600

好像您的 ImageIcon (tempii) 为空。您是否尝试过调试代码以检查对象的状态？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:54:51.997

更换

```
public void AlphaAvatar(){

    img = new Image[NUMOFAVATARS];

} 
```

经过

```
public AlphaAvatar(){

    img = new Image[NUMOFAVATARS];

} 
```

`public void AlphaAvatar()`不是构造函数，它是一个`AlphaAvatar`不返回任何内容的调用方法......它解释了为什么 img 没有在其中初始化。

# vb.net - VB.NET Lambda 表达式而不是迭代器

> ID：15838245
> 
> 赞同：1
> 
> 时间：2013-04-05T15:51:12.470
> 
> 标签：vb.net, lambda

我相当肯定这可以重写为 Lambda 表达式，但每次尝试都惨遭失败。我知道，C# Lambda 读起来更干净，但我坚持使用 VB.NET。这是代码-有人可以指出我正确的方向吗？谢谢！

```
For Each e As EventToMonitor In Events
    If e.TypeID = 1 Then
        If ("," & e.Values).Contains("," & b.ChoiceID & ",") Then
            Notify(cacheValues, e, "Event notification (button press)", "Button pressed: " & b.Text & " on screen: " & b.GroupBox.Text & Environment.NewLine & 
                       "User: " & cacheValues.CurrentUserName & Environment.NewLine & _
                       "Pressed at: " & Date.Now.ToShortDateString & " " & Date.Now.ToShortTimeString)
        End If
    End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:58:33.580

如果您想将整个东西转换为 lambda，这样的东西应该可以工作：

```
Events.Where(Function(e) e.TypeID = 1 AndAlso ("," & e.Values).Contains("," & b.ChoiceID & ",")) _
      .ToList() _
      .ForEach(Sub(e) Notify(cacheValues, e, "Event notification (button press)", "Button pressed: " & b.Text & " on screen: " & b.GroupBox.Text & Environment.NewLine & _
              "User: " & cacheValues.CurrentUserName & Environment.NewLine & _
              "Pressed at: " & Date.Now.ToShortDateString & " " & Date.Now.ToShortTimeString)) 
```

不过，老实说，我通常更喜欢只使用它们来过滤结果或构建集合：

```
Dim eventsList = Events.Where(Function(e) e.TypeID = 1 AndAlso ("," & e.Values).Contains("," & b.ChoiceID & ","))

For Each e As EventToMonitor In eventsList
    Notify(cacheValues, e, "Event notification (button press)", "Button pressed: " & b.Text & " on screen: " & b.GroupBox.Text & Environment.NewLine & 
               "User: " & cacheValues.CurrentUserName & Environment.NewLine & _
               "Pressed at: " & Date.Now.ToShortDateString & " " & Date.Now.ToShortTimeString)
Next 
```

# c - C not operator 为什么我会收到警告

> ID：15838249
> 
> 赞同：4
> 
> 时间：2013-04-05T15:51:17.783
> 
> 标签：c

这段代码有什么问题

```
typedef unsigned char datum; /* Set the data bus width to 8 bits. */

    datum pattern;
    datum antipattern;

    antipattern = ~pattern;

Remark[Pa091]: operator operates on value promoted to int (with possibly unexpected result) C:\filepath...\file.c 386 
```

编译器是 IAR EWARM 为什么需要将两个 char 变量转换为 int。当一切都被宣布为无符号时，它为什么要抱怨符号的变化。

知道要使用什么演员来消除此警告吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:55:44.023

C 的规则要求将`unsigned char`操作数转换为`int`（不正当的 C 实现除外）。

一旦操作数是`int`，它就是有符号的，并且`~`操作符可能会给你意想不到的结果，因为有符号整数的语义和它们的位表示没有完全由 C 指定。编译器会帮助你警告这一点。

你应该使用`antipattern = ~ (unsigned int) pattern;`. 使用`unsigned int`，您可以保证该值用简单的二进制表示。

# python - numpy 不能通过终端工作

> ID：15838252
> 
> 赞同：1
> 
> 时间：2013-04-05T15:51:24.493
> 
> 标签：python, python-2.7, numpy, terminal

d我通过执行在 ubuntu 上安装了 numpy

```
sudo apt-get install python-numpy 
```

在终端上执行时出现此错误。

```
>>> import numpy as np
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named numpy
>>> 
```

为什么会这样？我通过互联网尝试了很多次，但我找不到解决方案。你能告诉我如何解决这个问题吗？

**编辑1：** 我知道我必须为我在终端上运行的python版本安装numpy，使用pip ..当我在终端上输入'python'时运行Python 2.7.3。所以这意味着我必须为 python 2.7.3 安装 numpy。有人可以指导我怎么做吗？我自己想不通。顺便说一句，如果有帮助，我正在使用 Ubuntu 12.04。

**编辑2：** 我对此做了更多的挖掘。我的/usr/lib包含两个目录python2.7和python3。而Python2.7目录由大量文件和子目录组成，python3目录只有dist-packages子目录其中由 deb_conf.py 和 f lsb_release.py 组成。我想几个月前我尝试了 python3，然后删除了它。但现在 python2.7 是我唯一拥有的东西。

**编辑3：**

所以这里是你让我输入的命令的输出

```
~$ virtualenv --no-site-package -p /usr/bin/python2.7 my_env
Running virtualenv with interpreter /usr/bin/python2.7
The --no-site-packages flag is deprecated; it is now the default behavior.
New python executable in my_env/bin/python2.7
Not overwriting existing python script my_env/bin/python (you must use my_env/bin/python2.7)
Installing  distribute..............................................................................................................................................................................................done.
~$ source my_env/bin/activate
~$ pip install numpy 
```

最后一个命令生成了很多日志，这些日志以这样的结尾..

```
Creating build/scripts.linux-i686-2.7/f2py2.7
  adding 'build/scripts.linux-i686-2.7/f2py2.7' to scripts
changing mode of build/scripts.linux-i686-2.7/f2py2.7 from 664 to 775

changing mode of /home/sandeep/my_env/bin/f2py2.7 to 775
Successfully installed numpy
Cleaning up... 
```

在所有这些之后，我尝试再次运行 python，这就是输出。

```
~$ python
Python 2.7.3 (default, Jan 20 2013, 21:40:19) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy as np
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named numpy
>>> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T21:13:29.830

万一没有任何效果。

1.  如果尚未完成，请安装 python-virtualenv。
2.  创建一个虚拟环境

    > 虚拟环境名称

3.  启动虚拟环境

    > 源名称/bin/激活

4.  安装或`numpy`_`easy_install``pip`

5.  利润

**注意**：

Virtualenv 激活必须每次都进行。但是您可以使用 virtualenv 包装器使该任务更容易。

[http://virtualenvwrapper.readthedocs.org/en/latest/](http://virtualenvwrapper.readthedocs.org/en/latest/)

使用 virtualenv 而不是 ubuntu 包的原因有很多。在某种程度上，我建议不要尽可能多地接触“OS”python。如果项目需要它，请使用 virtualenv。virtualenv 中的 Python 不会与其他应用程序混淆，您不必使用它`sudo`来安装新包。

# ruby-on-rails - 思考狮身人面像 :sort_mode => :time_segments 或 :sort_mode => :expr 与 @weight*created_at？

> ID：15838256
> 
> 赞同：0
> 
> 时间：2013-04-05T15:51:31.920
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

我正在研究 sphinx 和 thinking-sphinx，我需要你的意见和帮助，我想做的是以下几点：

我有一个新闻列表（noticias），我想按日期和相关性对结果进行排序，因为如果我搜索的内容在创建新闻时并不重要，则不会考虑查询。如果我至少可以指定更接近的年份或年份和月份具有更大的相关性，那么我的问题应该已经得到解决。

我看到了很多东西，但不是很确定，也许是因为我对狮身人面像和思考狮身人面像的经验不足。

如何解决这个问题？你认为最好的方法是什么？谢谢。

我的模型：

```
define_index do
  indexes :titulo
  indexes :chamada
  indexes :texto
  indexes :description
  indexes :keywords
  indexes :otimizador_de_busca
  indexes :created_at, :sortable => true
  indexes tags.nome, :as => :tag
  indexes usuario.nome, :as => :autor
  where "validacao = '1'"
end 
```

我在控制器上的搜索功能：

```
termo = params[:termo].first(50)
@noticias = Noticia.search termo,
:field_weights => {:tag => 150, :autor => 120, :titulo => 100, :chamada => 80, :otimizador_de_busca => 65, :description => 50, :keywords => 50, :texto => 10},
:match_mode => :all,
:page => params[:pagina],
:sort_mode => :extended,
:order => "@relevance DESC, created_at DESC",
:per_page => 15 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T01:10:33.293

有几点需要注意。首先，Sphinx 的字段和属性之间存在差异，将 created_at 作为字段并没有真正获得太多好处，但它作为属性（本机可排序）要有用得多。所以，让我们更新索引定义：

```
define_index do
  indexes :titulo
  indexes :chamada
  indexes :texto
  indexes :description
  indexes :keywords
  indexes :otimizador_de_busca
  indexes tags.nome, :as => :tag
  indexes usuario.nome, :as => :autor

  has :created_at

  where "validacao = '1'"
end 
```

然后运行`rake ts:rebuild`以使更改反映在您的索引文件中，并且 Sphinx 守护程序也知道它。

至于你如何排序......你有几个选择。在您的示例中，您主要按相关性进行排序，但是具有匹配相关性分数的任何内容都会首先列出较新的项目。我认为这会很好。

如果您想使用 Sphinx 的 time_segments 排序，那么这也可能会很好，因为它会首先按年龄分组结果（不太具体），然后根据相关性自动在每个年龄组内排序：

```
termo = params[:termo].first(50)
@noticias = Noticia.search termo,
  :field_weights => {:tag => 150, :autor => 120, :titulo => 100, :chamada => 80, :otimizador_de_busca => 65, :description => 50, :keywords => 50, :texto => 10},
  :match_mode    => :extended,
  :page          => params[:pagina],
  :sort_mode     => :time_segments,
  :order         => :created_at,
  :per_page      => 15 
```

我还将匹配模式更改为扩展，我通常会推荐。

最后，正如您所建议的，您可以将 created_at 时间戳与表达式中的相关性考虑在内 - 这取决于您。可能有一些公式可以帮助解决这个问题，但我认为这是你可能不需要的额外复杂性。

如果您认为首先获得更新的结果更重要，请使用时间段。如果您认为首先获得与搜索查询相关的结果更重要，请在您自己的示例中使用扩展排序模式。我认为那个更好，但这取决于你。

# javascript - 可定制和跨浏览器友好的音频播放器 标签

> ID：15838257
> 
> 赞同：0
> 
> 时间：2013-04-05T15:51:35.857
> 
> 标签：javascript, jquery, html, css, audio

我正在努力寻找一种可以轻松自定义并应用于我的网站的 jQuery 播放器。基本上我正在尝试自定义我的音频标签：

```
<audio preload="none" controls src="http://api.soundcloud.com/tracks/75868018/stream?client_id=7a17129ba9cd5fff34f847e3539829b7">
</audio> 
```

由于 src 来自 sound-cloud，它始终是 .mp3 格式，因此我需要一个可以在不支持 .mp3 格式的浏览器中回退的播放器。

谁能推荐这样的播放器？最好是轻量级、易于安装和高度可自定义的 css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:54:09.697

[MediaElement.js](http://mediaelementjs.com/)对我来说是个不错的选择——它似乎是跨浏览器、轻量级且易于实现的。

您可能感兴趣的其他几个选项可能是[HTML5 Video Player](http://videojs.com/)和[Video for Everyone](http://camendesign.com/code/video_for_everybody)。

# android - 获取 SOAP Web 服务的设备或模拟器信息运行时

> ID：15838260
> 
> 赞同：4
> 
> 时间：2013-04-05T15:51:49.013
> 
> 标签：android, iphone, soap, codenameone

`SOAP`从设备调用 Web 服务时，我在这里遇到了 Codenameone 的一个小问题。您可能知道，`SOAP`Web 服务有自己的方式来编码 http 请求。`SOAP`无论您使用1.1 还是 1.2，这些编码规则也不同。

当我在模拟器中运行时，它似乎使用了 v1.2，这需要以某种方式指定 http 标头以使服务正常工作。

当您在设备上（此处为 iPhone）时，它会切换到`SOAP`1.1，因此需要对 http 标头进行不同的编码（soap 操作、内容类型）。

所以问题是：在我的代码中，我怎样才能确定在哪个环境、模拟器或真实设备中运行？在此过程中，如果我们需要根据设备性质执行此类特定逻辑，我们如何进行此检查？

提前感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T20:10:13.873

您可以使用

```
Display.getInstance().getPlatformName() 
```

返回您正在运行的平台的名称。

如果它在 iPhone 上运行，它将返回“ios”。我做了一个快速测试，发现它也在模拟器中返回“ios”。

希望这可以帮助

# angularjs - ng-repeat 索引到数组中

> ID：15838262
> 
> 赞同：6
> 
> 时间：2013-04-05T15:51:58.593
> 
> 标签：angularjs

我有一个通过 ajax 流式传输数据的 angularjs 应用程序，我想对数据进行 ng-repeat。我有数据流和显示，但现在我想模板化对象。我遇到的问题是我使用 ng-repeat 只是为了索引到控制器中的数组。我现在需要一个

```
 <div class="row" data-ng-repeat="row in rows">
        <div class="span3" data-ng-repeat="col in cols">
            //displays the raw json fine
            {{ data[$parent.$index * numColumns + $index] }}                           
            // also displays the raw json
            {{ item = data[$parent.$index * numColumns + $index] }}                           
            <div>Id: {{item.Id}} </div>
            <div>Title: {{ item.ClientJobTitle }}</div>
            ...
        </div>
    </div> 
```

我总是可以为每个属性重复数组索引表达式，但是会有几十个属性，所以代码会很丑，所有重复的计算都会减慢速度。

这样做的正确（角度）方法是什么？

**更新** 我也需要它响应，我将根据窗口宽度动态调整列数。

**更新** 我想我真正想要的是类似于以下非工作示例

```
 <div class="row" data-ng-repeat="row in rows">
        <div class="span3" data-ng-repeat="col in cols">
            <div ng-model="data[$parent.$index * numColumns + $index]">
                <!-- Here $model would refer to the ng-model above -->
                <div>Id: {{$model.Id}} </div>
                <div>Title: {{ $model.Title }}</div>
                ...
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-26T21:27:57.800

您可能已经以某种方式处理了这个问题，但值得一提的是，即使没有指令，您的非工作示例也是绝对可能的：

```
var app = angular.module('app',[])
app.controller('myCtrl', function($scope) {
	$scope.numColumns = 2
	$scope.rows = [1,2,3]
	$scope.cols = [1,2]
	$scope.data = [
		{Id:'abc',Title:'cde'},
		{Id:'qwe',Title:'rty'},
		{Id:'asd',Title:'fgh'},
		{Id:'foo',Title:'bar'},
		{Id:'uni',Title:'corn'},
		{Id:'mag',Title:'ic'},
	];
	$scope.change1 = function(){
			$scope.numColumns = 2
		$scope.rows = [1,2,3]
		$scope.cols = [1,2]
	}
		$scope.change2 = function(){
			$scope.numColumns = 3
		$scope.rows = [1,2]
		$scope.cols = [1,2,3]
	}
});
```

```
.span3 {
	display:inline-block;
	padding:5px;
	margin:5px;
	background: pink;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.5/angular.min.js"></script>
<body ng-app="app">
	<div ng-controller="myCtrl">
		<button ng-click="change1()">2x3</button>
				<button ng-click="change2()">3x2</button>

	<div class="row" data-ng-repeat="row in rows">
        <div class="span3" data-ng-repeat="col in cols">
            <div>
							{{($model = data[$parent.$index * numColumns + $index])?'':''}}

                <!-- Here $model would refer to the ng-model above -->
                <div>Id: {{$model.Id}} </div>
                <div>Title: {{ $model.Title }}</div>
                ...
            </div>
        </div>
    </div>
	</div>
</body>
```

基本上，可以在表达式内部动态创建诸如“$model”之类的变量：

```
{{($model = data[$parent.$index * numColumns + $index])?'':''}} 
```

它不会自己打印，它会响应，在 ng-repeat 中工作。不过，这是一种解决方法，指令可能是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:52:57.160

我认为这样做的方法是简单地遍历项目本身，并放弃所有 numRows 和 numColumns。

[http://plnkr.co/edit/Qu6X5FnZY3TpgyNjnBXy?p=preview](http://plnkr.co/edit/Qu6X5FnZY3TpgyNjnBXy?p=preview)

*那就是用更*简单的 angularjs 代码输出你正在做的事情。

似乎您正在使用行/列计数来限制您在一行中水平显示的项目数。我认为你可以用纯 css 处理这个问题，你可以在我的 plunk 中看到我限制了父容器的宽度。我是手动完成的，但您可以轻松地将动态 css 类附加到父容器，并更灵活地控制一行中出现的项目数量。

# java - 将 Long 转换为原始 jdbc

> ID：15838263
> 
> 赞同：0
> 
> 时间：2013-04-05T15:51:58.647
> 
> 标签：java, sql, oracle, jdbc

我定义了以下函数：

```
private RAW[] longToRaw(long[] toConvert) throws SQLException  
{  
     final RAW[] toReturn = new RAW(toConvert.length);  
     for(int i = 0; i <toReturn.length;i++)
     {
          toReturn[i] = new RAW(toConvert[i]);
     }  
} 
```

一个客户经过我`long[]`，这不会改变。我与之交谈的 Oracle 数据库将数据存储为`RAW`. 数据似乎已正确保留。然而，在检索时，我得到了难以理解的结果。

检索代码：

```
...
while(results.next())  
{    
     String s = new String(results.getBytes(1));
}    
... 
```

这不会给出传递到数据库中的所需长值。我该如何解决这个问题？也就是说是我转换的方式问题`long`还是`RAW`我的检索代码中的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:11:58.613

看来您正在调用已弃用的构造函数，该构造函数还仅适用于`byte`数组和`String`s。我相信适当的方式是这样的：

```
toReturn[i] = RAW.newRAW(Long.toHexString(toConvert[i])); 
```

编辑：如果`results`是`Iterator<RAW>`，则`while`-loop 应更改为：

```
while(results.hasNext()) {
    String s = new String(results.next().getBytes());
} 
```

如果`results`是`RAW`-array，你应该这样做：

```
for(RAW result : results) {
    String s = new String(result.getBytes());
} 
```

# ruby-on-rails - {wrap}bootstrap 主题中的 data.* 引用是什么？

> ID：15838272
> 
> 赞同：0
> 
> 时间：2013-04-05T15:52:23.340
> 
> 标签：ruby-on-rails, twitter-bootstrap

我购买了一个 {wrap}bootstrap 主题。在将资产移动到我的 Rails 2.3.x 应用程序的过程中（别笑），我注意到视图和助手中有很多地方`data`可以访问某些对象。例如：

```
 def active(id)
    if data.page.menukey == id
        return 'active'
    end

    return ''
  end 
```

这个对象在哪里`data`定义？实现主题的人用自己的对象替换它只是一个笨拙的占位符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:52:23.340

您在 {wrap}bootstrap 主题中看到的`data`对象来自 MiddleMan “[本地数据](http://middlemanapp.com/advanced/local-data/)”。MiddleMan 不需要实现 {wrap} 引导主题。您可能希望搜索每个实例并将其替换为`data`对您的应用程序有意义的内容。

# orchardcms - 带有多种内容类型过滤器的果园查询排序顺序

> ID：15838277
> 
> 赞同：1
> 
> 时间：2013-04-05T15:52:36.700
> 
> 标签：orchardcms, orchardcms-1.6

我对内容类型 BlogPost 和 Page 进行了果园查询过滤。作为排序标准，我添加了“按修改日期排序，降序”。

我希望结果列表的排序独立于内容类型，但首先对所有页面进行排序，然后对所有博客文章进行排序。

如何实现排序独立于内容类型？

# python - 正则表达式从字符串中提取和排除数据

> ID：15838278
> 
> 赞同：0
> 
> 时间：2013-04-05T15:52:41.953
> 
> 标签：python, regex

我有一个类似 html 的字符串，我想从中提取数据。

```
s="<ul><li>this is a bullet lev 1&nbsp;</li><li><ul><li><strong>&nbsp;this</strong> is a bullet lev&nbsp;</li></ul></li><li>&nbsp;<ul><li><ul><li>this is a bullet lev 3</li></ul></li></ul></li></ul></ul><strong></li> 
```

"

我想提取包含 <li> 元素的所有*数据*的内容，这些元素在它们之间包含诸如“这是一个子弹 lev 1”之类的元素，而不是像在多级元素中那样包含其他 <li> 的元素，例如

```
<li><ul><li><strong>&nbsp;this</strong> is a bullet lev&nbsp;</li></ul></li> 
```

我为此写了一个正则表达式

```
<li>([\w &;/<>]*?)</li> 
```

然而，这最终也会拉取不需要的数据

```
<li>this is a bullet lev 1&nbsp;</li>
<li><ul><li><strong>&nbsp;this</strong> is a bullet lev&nbsp;</li>
<li>&nbsp;<ul><li><ul><li>this is a bullet lev 3</li> 
```

虽然我想让它拉

```
<li>this is a bullet lev 1&nbsp;</li>
<li><strong>&nbsp;this</strong> is a bullet lev&nbsp;</li>
<li>&nbsp;<ul><li><ul><li>this is a bullet lev 3</li> 
```

这个想法是我想排除提取数据中已经有 <li> 的任何结果并继续前进。

从研究中我了解到我可能必须使用前瞻或后视，我尝试了几次但无济于事。

有什么线索吗？我正在使用 python，它内置了 re 模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:29:53.190

我以前从未使用过 BeautifulSoup，但我在 15 分钟内安装了它并且没有阅读任何文档：

```
>>> s="<ul><li>this is a bullet lev 1&nbsp;</li><li><ul><li><strong>&nbsp;this</strong> is a bullet lev&nbsp;</li></ul></li><li>&nbsp;<ul><li><ul><li>this is a bullet lev 3</li></ul></li></ul></li></ul></ul><strong></li>"
>>> from BeautifulSoup import BeautifulSoup
>>> soup = BeautifulSoup(s)
>>> for liRaw in soup.findAll('li'):
...   if liRaw.findParent().findParent().name == u'[document]':
...     print liRaw.text
this is a bullet lev 1&nbsp;
&nbsp;thisis a bullet lev&nbsp;
&nbsp;this is a bullet lev 3 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:33:08.953

我认为这可能会完成这项工作。

```
<li>((?!<li>).)*?</li> 
```

只要它们不包含 a （使用[前瞻](http://www.regular-expressions.info/lookaround.html)） ，就应该匹配任何`<li>`后面的内容和中间的任何内容`</li>``<li>`

这假设您实际上并不想要`<li>&nbsp;<ul><li><ul><li>this is a bullet lev 3</li>`，而是：`<li>this is a bullet lev 3</li>`在您的示例中，这似乎与您的描述更一致。

也就是说，一般来说，解析器对于这类事情确实是一个更好的主意。

# javascript - 本地存储不工作

> ID：15838293
> 
> 赞同：0
> 
> 时间：2013-04-05T15:53:43.467
> 
> 标签：javascript, local-storage

我有这个javascript，我只需要运行一次而不是本地存储来保存状态。脚本在注销时更改登录。即使页面刷新，我也不希望执行脚本：

```
var str=document.getElementById("tst").innerHTML;
var n=str.replace("Login","Logout");
document.getElementById("tst").innerHTML=n; 
```

html：

```
<a href="login" title="log in" class="login_button" id="tst">Login</a></span> 
```

我尝试使用此代码，但现在根本没有触发脚本：

```
 var eventsFired = localStorage.getItem('fired');
 if (eventsFired != '1'){
 if (document.getElementById('tst')){
 var str=document.getElementById("tst").innerHTML;
 var n=str.replace("Login","Logout");
 document.getElementById("tst").innerHTML=n;
 localStorage.setItem('fired', '1'); 
 } } 
```

Js小提琴链接[http://jsfiddle.net/9t4Wb/4/](http://jsfiddle.net/9t4Wb/4/)

我什至尝试使用 jquery.cookies.js 使用 cookie，结果相同：

```
var eventsFired = ($.cookie('eventsFired') != null)
? $.cookie('eventsFired')
: 0;

if (eventsFired == 0){

if (document.getElementById('tst'))
{
var str=document.getElementById("tst").innerHTML;
var n=str.replace("Login","Logout");
document.getElementById("tst").innerHTML=n;
eventsFired++;
$.cookie('eventsFired', eventsFired);
}} 
```

Cookies Jsfiddle 测试 [http://jsfiddle.net/JqxVj/5/](http://jsfiddle.net/JqxVj/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:22:55.400

If you need support for more than Chrome users, you can use [AmplifyJS](http://amplifyjs.com/)

It's let you use only one syntax on all browsers...

```
//Set value
amplify.store("myKey", myObject)

//Get value
amplify.store("myKey") // return myObject 
```

You can also check [the documentation](http://amplifyjs.com/api/request/) and see the advantages of this plugin

# git - 与分支混淆，旧的主分支显示来自新分支的文件？

> ID：15838297
> 
> 赞同：1
> 
> 时间：2013-04-05T15:53:52.193
> 
> 标签：git, version-control, github, branch, git-branch

正如你所理解的，我仍在学习 Git 以及分支是如何工作的。无论如何：

1.  我在当地的一家`master`分公司工作。
2.  我使用我的 IDE 创建并切换到一个新`fcwdetection`分支来添加一些代码，这意味着不是通过命令行。
3.  IDE 要求我将我创建的新文件（比如`A.php`）添加到存储库。我已经添加并修改了`B.php`（已经添加）。

结果**是**`master`分支（我切换回它）现在`A.php`具有与分支`B.php`中相同的`B.php`编辑`fcwdetection`。

这怎么可能？这是来自 IDE 的错误，还是我完全误解了分支的工作方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:03:17.610

您的工作流程似乎正确。看起来像 IDE 中的错误。如果您只想在`fcwdetection`分支中拥有修改后的文件，您应该在该分支中提交它们。在命令行中，您执行以下操作：

创建分支：

```
git checkout -b fcwdetection 
```

编辑`A.php`并创建`B.php` 添加所有文件，包括新`B.php`的`git`：

```
git add -A . 
```

将它们提交到`fcwdetection`：

```
git commit -m 'Commit message' 
```

此时，如果您重新签入，`master`您会看到文件的旧版本：

```
git checkout master 
```

如果您不断看到 的修改版本`A.php`并且`B.php`您应该检查它们的状态，它们是否已经添加到`index`? 我这么说是`git`因为不要让你从一个分支切换到另一个修改过的未提交文件，在命令行中你会得到这个错误：

```
error: Your local changes to the following files would be overwritten by checkout:
[some files]
Please, commit your changes or stash them before you can switch branches.

Aborting 
```

# php - 使用 mysql 在矩形或圆形中查找点

> ID：15838298
> 
> 赞同：4
> 
> 时间：2013-04-05T15:53:52.287
> 
> 标签：php, mysql, geometry, cartesian

我有一个带有坐标（x，y）的列表点的mysql数据库表

我想找到落在矩形内的点列表。如果矩形的任何一侧平行或垂直于任何轴对齐，这将很简单。但不是。这意味着矩形被旋转。我还必须找到一个圆圈内的点。

矩形的已知数据 - 所有四个点的坐标 圆形的已知数据 - 中心和半径的坐标。

如何查询 mysql 表以找到落在矩形和圆形中的点？

如果这很重要，那么我使用的前端是 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:09:09.383

一个矩形可以由代表相对角的两个点来定义，例如：A(x,y) 和 B(x,y)。如果您要测试一个点 C(x,y) 以查看它是否在矩形内，则：

```
IF( (Cx BETWEEN Ax AND Bx) AND (Cy BETWEEN Ay AND By) ) THEN
  point C is in the rectangle defined by points A and B
ELSE
  nope
ENDIF 
```

圆可以由单个点 C(x,y) 和半径 R 定义。如果圆心与点 P(x,y) 之间的距离 D 小于半径 R，则它在圆内：

你当然记得勾股定理，对吧？

```
C² = A² + B² SO C = SQRT(A² + B²) 
```

所以：

```
D = SQRT( ABS(Cx - Px)² + ABS(Cy - Py)²)

IF( D <= R ) THEN
  point P is inside the circle with center C and radius R
ELSE
  nope
ENDIF 
```

## 编辑：

检查一个点是否在多边形内的算法比我希望在 SQL 查询或存储过程中编写的算法复杂一些，但这是完全可能的。值得注意的是，它以恒定时间运行并且非常轻量级。[对于 poly 中的每个点大约需要 6 个算术运算，并且可能需要 2 或 3 个逻辑运算]

要减少所需的数字计算，您可以简单地编写您的选择以在粗略的边界框中获取点，然后再进一步处理它们：

```
WHERE
  x BETWEEN MIN(x1,x2,x3,x4) AND MAX(x1,x2,x3,x4)
  AND
  y BETWEEN MIN(y1,y2,y3,y4) AND MAX(y1,y2,y3,y4) 
```

假设对包含 x 和 y 值的列进行了索引，这*可能会*比简单地进行数学运算使用更少的 CPU 周期，但这是值得商榷的，我倾向于称之为洗牌。

至于圈子，你不可能比

```
WHERE
  SQRT( POW(ABS($Cx - x),2) + POW(ABS($Cy - y),2) ) < $radius 
```

您太关心这些计算的*感知*成本，只需编写代码并使其工作即可。这不是执行这种琐碎优化的阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-07T10:08:28.813

要添加到@Sammitch 的答案的一件事是，如果您正在查看世界地图上的纬度和经度，计算半正弦距离（球面上的距离计算，因为地球是一个球体；） [https://en.wikipedia.org/维基/Haversine_formula](https://en.wikipedia.org/wiki/Haversine_formula) )

这是一个用于计算的普通 Javascript 示例：

```
 function calculateHaversineDistance(lat1x, lon1, lat2x, lon2) {
            var R = 6371; // km
            var dLat = toRad(lat2x-lat1x);
            var dLon = toRad(lon2-lon1);
            var lat1 = toRad(lat1x);
            var lat2 = toRad(lat2x);
            var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
          }
          function toRad(x) {
             return x * Math.PI / 180;
          } 
```

编辑->

这是我写的一个php版本：

```
function toRad($x) {
 return $x * pi() / 180;
}

function calculateHaversineDistance($lat1, $lon1, $lat2, $lon2) {

    $R = 6371; // km
    $dLat = $this->toRad($lat2-$lat1);

    $dLon = $this->toRad($lon2-$lon1);

    $lat1 = $this->toRad($lat1);

    $lat2 = $this->toRad($lat2);

    $a = sin($dLat/2) * sin($dLat/2) +
            sin($dLon/2) * sin($dLon/2) * cos($lat1) * cos($lat2);

    $c = 2 * atan2(sqrt($a), sqrt(1-$a));

    return $R * $c;
} 
```

# ruby-on-rails - 独角兽和设计的 capistrano 错误

> ID：15838305
> 
> 赞同：1
> 
> 时间：2013-04-05T15:54:04.553
> 
> 标签：ruby-on-rails, devise, capistrano, unicorn

我正在尝试使用 capistrano 和 unicorn 进行部署。不幸的是，我得到了

```
 We're sorry, but something went wrong. 
```

信息。在我的开发环境中一切正常。production.log 没有显示任何错误。以下是 unicorn.log——Devise 似乎有问题？任何帮助将非常感激！

```
/var/www/shared/bundle/ruby/2.0.0/bin/unicorn:23:in `load'
/var/www/shared/bundle/ruby/2.0.0/bin/unicorn:23:in `<main>'
E, [2013-04-05T15:45:46.051101 #18179] ERROR -- : uninitialized constant Devise (NameError)
/var/www/releases/20130405154134/config/initializers/devise.rb:3:in `<top (required)>'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/engine.rb:587:in `each'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/engine.rb:587:in `block in <class:Engine>'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `block in run_initializers'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
/var/www/shared/bundle/ruby/2.0.0/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
/var/www/releases/20130405154134/config/environment.rb:5:in `<top (required)>'
config.ru:4:in `require'
config.ru:4:in `block in <main>'
/var/www/shared/bundle/ruby/2.0.0/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
/var/www/shared/bundle/ruby/2.0.0/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
config.ru:1:in `new'
config.ru:1:in `<main>'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn.rb:44:in `eval'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn.rb:44:in `block in builder'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:722:in `call'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:722:in `build_app!'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:595:in `init_worker_process'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:615:in `worker_loop'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:511:in `maintain_worker_count'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:277:in `join'
/var/www/shared/bundle/ruby/2.0.0/gems/unicorn-4.6.2/bin/unicorn:126:in `<top (required)>'
/var/www/shared/bundle/ruby/2.0.0/bin/unicorn:23:in `load'
/var/www/shared/bundle/ruby/2.0.0/bin/unicorn:23:in `<main>'
E, [2013-04-05T15:50:20.918137 #5363] ERROR -- : reaped #<Process::Status: pid 18942 exit 1> worker=0
I, [2013-04-05T15:50:20.918399 #5363]  INFO -- : worker=0 spawning... 
```

# ruby - Ruby、nokogiri 和 csv：关于不同的数据集

> ID：15838308
> 
> 赞同：1
> 
> 时间：2013-04-05T15:54:10.540
> 
> 标签：ruby, arrays, parsing, csv, nokogiri

我有这样的事情：

```
require 'nokogiri'
require 'open-uri'
require 'csv'

fields = ['Full name', 'Address', 'Valid phone', 'E-mail']
availableFields = []
availableDataFields = []

CSV.open('myfile4.csv', 'a', {:col_sep => ';', :force_quotes => true}) do |csv|
    doc = Nokogiri::HTML(open(some_of_my_urls))

    #We are on the right page if we have content in this tag
    if doc.xpath('//div[@class = "pad8"]/h3').length > 0

        availableFields << 'Full name'
        availableFields << doc.xpath('//div[@class = "pad8"]/div[@class = "block pad8"]/table/tr/td[1]').text.gsub(/\n+|\r/, "").strip.split(':')
        #We received and parsed available fields on this page from td[1]
        #availableFields = ['Full name', 'Address', 'E-mail']

        availableDataFields << doc.xpath('//div[@class = "pad8"]/h3').text
        availableDataFields << doc.xpath('//div[@class = "pad8"]/div[@class = "block pad8"]/table/tr/td[3]').text.gsub(/\n+|\r/, "").strip
        #We received and parsed available fields data on this page from another td (td[3])
        #availableDataFields = ['John Doe', 'New York', 'john.doe@mail.com']

    end

    #Write to CSV file
    csv << fields
    csv << availableDataFields

end 
```

所以当我打开 CSV 文件时，我有这个：

```
------------------------------------------------------------------------------------------------------
|     Full name    |    Address   |         Valid phone       |              E-mail                  |
| ---------------------------------------------------------------------------------------------------|
|     John Doe     |   New York   |      john.doe@mail.com    |                                      |
------------------------------------------------------------------------------------------------------ 
```

而不是这个

```
------------------------------------------------------------------------------------------------------
|     Full name    |    Address   |         Valid phone       |               E-mail                 |
| ---------------------------------------------------------------------------------------------------|
|     John Doe     |   New York   |                           |          john.doe@mail.com           |
------------------------------------------------------------------------------------------------------ 
```

因为我的某些`some_of_my_urls`页面`fields`（

我该如何正确解决这个问题以及我如何（可能）使用`availableFields`它。也许比较`fields`and`availableFields`并基于此生成正确的 csv 数据行？但是怎么做？

编辑：这是 HTML 代码：[案例 1](http://9503.selcdn.ru/i/case.html "情况1")，[案例 2](http://9503.selcdn.ru/i/case2.html)

# mongodb - eval 有那么邪恶吗？

> ID：15838310
> 
> 赞同：0
> 
> 时间：2013-04-05T15:54:15.493
> 
> 标签：mongodb, eval

我知道[`eval`](http://docs.mongodb.org/manual/reference/command/eval/)锁定整个数据库，这对吞吐量不利 - 但是我有一个场景，涉及多个文档的非常具体的事务必须被隔离。

因为该事务不经常发生并且相当快（索引查询的一些更新），所以我正在考虑使用`eval`它来执行它。

他们有什么我应该注意的陷阱吗（我看过几个 eval=evil 帖子，但没有太多解释）？
如果数据库是副本集的一部分，会有所不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:23:53.813

许多开发人员会建议使用`eval`is "evil"，因为在 MongoDB 实例的上下文中执行可能未经处理的 JavaScript 代码是明显的安全问题。通常 MongoDB 对这些类型的注入攻击是免疫的。

通过命令在 MongoDB 中使用 JavaScript 的一些性能问题在[2.4](http://docs.mongodb.org/manual/reference/command/eval/)`eval`版本中得到缓解，因为可以同时执行多个 JavaScript 操作（取决于选项的设置）。但默认情况下，它需要一个全局锁（这显然是您特别想要的）。`nolock`

当使用 a`eval`尝试对多个文档执行（类似 ACID 的）事务更新时，有一个主要问题。最大的问题是，如果所有操作都必须成功才能使数据处于一致状态，那么开发人员将面临操作中途失败可能导致数据库部分完整更新的风险（如硬件故障）例如）。根据正在执行的工作的性质、复制设置等，数据可能正常，也可能不正常。

对于部分完成`eval`操作可能导致数据库损坏的情况，我建议考虑替代模式设计并避免`eval`. 这并不是说它在 99.9999% 的时间里都行不通，这真的取决于你最终决定是否值得冒险。

在您描述的情况下，有几个选项：

```
{ version: 7, isCurrent: true} 
```

当`version 8`文档变为最新时，您可以例如：

*   创建包含当前版本的第二个文档，这将是一个原子集操作。这意味着所有读取都可能需要先读取“查找当前版本”文档，然后再读取完整文档。
*   使用时间戳代替`boolean`值。根据时间戳查找最新文档（一旦设置了当前文档，如果需要，您的代码可以清除旧文档的字段）

# matlab - 如何使用函数将笛卡尔坐标转换为极坐标

> ID：15838311
> 
> 赞同：0
> 
> 时间：2013-04-05T15:54:22.650
> 
> 标签：matlab, function

我正在尝试在 MATLAB 中创建一个函数，该函数采用笛卡尔坐标并将其转换为极坐标。

```
function [homework5] = Cartesian(X,Y)

M = size(X,1)

for N=1:M
if X,Y;

r=sqrt(X^2+Y^2)
theta=atan(Y/X)

else
disp('input incorrect')

end   

 if r > 10
    disp('Far from Origin')
else
    disp('Close to Origin')

 end

end 
```

我对 MATLAB 非常陌生，我对答案和阅读教程等的搜索被证明是徒劳的。

我有它可以很好地转换1个坐标的位置，但是我需要一次转换多个坐标（因此是forloop）但我无法得到它！用户需要能够输入这样的数组：>>Cartesian = [2,3;4,5;6,7] 并转换每一行。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:57:51.673

你不想使用 MATLAB 的函数[CART2POL](http://www.mathworks.com/help/matlab/ref/cart2pol.html)吗？

如果你看里面，只需这样做：

```
th = atan2(y,x);
r = hypot(x,y); 
```

* * *

至于您的代码，它在语法和逻辑方面存在许多问题。

首先，您不需要循环。MATLAB 专门设计用于处理向量和矩阵。`.*`您必须使用,`./`和运算符使用逐元素乘法、除法和幂`.^`。

也`if X,Y;`什么都不做。阅读文档如何`if`正确使用。您预先分配`M`但不使用它。该函数应该返回`homework5`，但它没有在函数体中定义。您必须阅读有关功能的信息。确保将函数保存到同名文件中，并保存`Cartesian.m`在当前目录或 MATLAB 路径中。

# javascript - 解析 JSON 数据集时，JSON 中的空数组会影响性能吗？

> ID：15838320
> 
> 赞同：0
> 
> 时间：2013-04-05T15:54:59.583
> 
> 标签：javascript, json, templates, dot.js

我有一个相当大的 JSON 数据集，我正在使用 DoT.js 解析它以填充模板以进行显示。我看到部分 JSON 中有超过 3400 个空数组，我什至没有使用这些数组来填充模板。这是一段未使用的 JSON。

```
,"COMMENTS":[] 
```

我在代码中的较早时间点解析它，以将整个 JSON 数据集中的键转换为小写。

`,"comments":[]`

像这样的空数组会对性能产生负面影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:05:56.623

是的，它对性能有影响。首先，数据传输会花费更长的时间，而且 JSON 解析也会更慢。

[http://jsperf.com/json-empty-arrays-perf](http://jsperf.com/json-empty-arrays-perf)

# html - XSLT 从具有不同命名空间的 HTML 生成 xsl fo

> ID：15838324
> 
> 赞同：2
> 
> 时间：2013-04-05T15:55:07.943
> 
> 标签：html, xslt, xml-namespaces, xsl-fo, apache-fop

我有一个 XSLT 文件，用于使用 fop 引擎将 html 转换为 xsl-fo。它具有 HTML 元素的模板，如下所示

```
<pre>

    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    xmlns:fo="http://www.w3.org/1999/XSL/Format"
                    version="2.0">

    <xsl:template match="html">
    //handle html element
    </xsl:template>

    <xsl:template match="head/title">
    //handle head/title elements
    </xsl:template>

    </xsl:stylesheet>

</pre> 
```

我需要将作为输入提供给处理器的各种 HTML 文件进行转换。没有命名空间的 HTML 文件的处理没有任何问题。但是，某些 HTML 文件具有名称空间 ( `<html xmlns="http://www.w3.org/1999/xhtml">`)，在这种情况下 fop 处理器会抛出异常。处理此类案件的最佳方法是什么？我可以创建一些基于本地名称（）调用正确模板的模板吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:52:00.413

在这种情况下，我的偏好是在做任何其他事情之前，在单独的通道中规范化输入。这可以通过类似这样的模板规则来完成：

```
<xsl:template match="*">
  <xsl:element name="lower-case(local-name())">
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates/>
  </xsl:element>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:21:42.800

你可以这样做：

```
<xsl:template match="*[local-name()='html' or local-name()='HTML']">
  //handle html element
</xsl:template> 
```

将匹配`html`或`HTML`任何命名空间中的元素。

不幸的是，HTML 可以有很多变体，并且还包含无效的 XML（例如未关闭的标签）。如果你想要一个真正的通用解决方案，你需要一个 HTML 解析器。

# python - 如何只抓取两个预定义的页面，但它们抓取不同的项目？

> ID：15838325
> 
> 赞同：1
> 
> 时间：2013-04-05T15:55:10.570
> 
> 标签：python, xml, web-scraping, scrapy

我正在尝试抓取由一些用户输入驱动的网站。例如，用户给我一个产品的 pid 和一个名称，一个单独的程序将启动蜘蛛，收集数据，并将其返回给用户。

但是，我想要的唯一信息是产品和人员，它们位于指向 xml 的两个链接中。如果我知道这两个链接和模式，我如何构建回调来解析不同的项目？

例如，如果我定义了这两个项目：

```
class PersonItem(Item):
     name = Field()
     ...

class ProductItem(Item):
     pid = Field()
     ... 
```

我知道他们的链接有模式：

```
www.example.com/person/*<name_of_person>*/person.xml
www.example.com/*<product_pid>*/product.xml 
```

然后我的蜘蛛看起来像这样：

```
class MySpider(BaseSpider):
     name = "myspider"

     # simulated given by user
     pid = "4545-fw"
     person = "bob"

     allowed_domains = ["http://www.example.com"]
     start_urls = ['http://www.example.com/person/%s/person.xml'%person, 'http://www.example.com/%s/product.xml'%pid]

     def parse(self, response):

          # Not sure here if scrapping person or item 
```

我知道我也可以使用定义规则`Rule(SgmlLinkExtractor())`，然后为人和产品各自提供自己的解析回调。但是，我不确定它们如何在这里应用，因为我认为规则是为了更深入地爬行，而我只需要刮擦表面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:07:44.383

如果你想追溯，你可以把你的逻辑放在`parse()`：

```
def parse(self, response):
    if 'person.xml' in response.url:
        item = PersonItem()
    elif 'product.xml' in response.url:
        item = ProductItem()
    else:
        raise Exception('Could not determine item type') 
```

**更新：**

如果你想积极主动，你可以覆盖`start_requests()`：

```
class MySpider(BaseSpider):
    name = "myspider"
    allowed_domains = ["example.com"]
    pid = "4545-fw"
    person = "bob"

    def start_requests(self):
        start_urls = (
            ('http://www.example.com/person/%s/person.xml' % self.person, PersonItem),
            ('http://www.example.com/%s/product.xml' % self.pid, ProductItem),
        )
        for url, cls in start_urls:
            yield Request(url, meta=dict(cls=cls))

    def parse(self, response):
        item = response.meta['cls']() 
```

# mysql - 插入 SQL 错误

> ID：15838326
> 
> 赞同：0
> 
> 时间：2013-04-05T15:55:14.473
> 
> 标签：mysql, sql, sql-insert

我的脚本中有这个：

```
$db->q("INSERT INTO 'keys' (key,grupo,dias) VALUES ('$key','VIP',$love);"); 
```

生成这样的sql

```
INSERT INTO 'keys' ('key','grupo','dias') VALUES ('35F3','VIP',28) 
```

但我明白了

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''keys' ('key','grupo','dias') VALUES ('35F3','VIP',28)' 附近使用正确的语法

我正在添加我的表格结构的屏幕截图：http: [//i.stack.imgur.com/luKfm.png](https://i.stack.imgur.com/luKfm.png)

![在此处输入图像描述](https://i.stack.imgur.com/liraO.png)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:56:22.400

表名称是标识符而不是字符串文字。所以在他们逃跑的情况下，你应该使用反引号，

```
INSERT INTO `keys` (`key`,`grupo`,`dias`) VALUES ('35F3','VIP',28) 
```

*   [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)
*   [MySQL保留关键字列表（*反引号适用*）](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# agents-jade - JADE 代理与 siemens S7 1200 PLC 之间的通信

> ID：15838327
> 
> 赞同：1
> 
> 时间：2013-04-05T15:55:24.227
> 
> 标签：agents-jade, s7-1200, siemens

我想了解如何使我的代理与 PLC（西门子 S7 1200）进行通信。基本上，代理是在 JADE 中创建的，并做出一种决定，即他们将发送 PLC 的真假决定。如果它为真，则 PLC 被激活或以其他方式激活。我听说过使用简单对象访问协议的概念，但不熟悉它（如果有人知道如何使用它，他们可以帮助我提供示例程序或链接我的程序的方法）。在 2013 年 4 月 8 日之前完成这项工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:49:16.437

我认为您在谈论 OPC。OPC 是由 OPC 基金会保护和维护的“开放”标准。

每个 PLC 制造商都有一个 OPC 服务器，通过他们自己的协议与他们的 PLC 进行通信。可以下载、购买或创建 OPC 客户端。简而言之 [S7-1200]以太网*电缆上的**电缆*S7 [PC OPC Server *intern* OPC Protocol *intern* OPC Client]

 ***在您的情况下，您需要西门子为 S7-1200 提供的 OPC 服务器。OPC 客户端将成为您的代理。JADE 需要一个 OPC 库才能通过 OPC 进行通信。有关可能性，请参见 www.opcfoundation.org 的网站。现在您可以直接读写PLC。

但是，您使用的是 S7-1200。西门子的新型微型自动化 PLC。这有一个新的内存布局，OPC 需要一些技巧才能使其工作。（与旧 S7 PLC 中的直接寻址和 S7-1200 中的命名值有关）。以下来自西门子的常见问题解答将进一步帮助您

如何使用 OPC 将 PC 站连接到 S7-1200？ [http://support.automation.siemens.com/WW/view/en/39960679](http://support.automation.siemens.com/WW/view/en/39960679)

或者您可以尝试通过 TCP/IP 发送值。这需要对 PLC 重新编程。CPU CPU 通信 [http://support.automation.siemens.com/WW/view/en/20982954](http://support.automation.siemens.com/WW/view/en/20982954)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-04T18:33:34.460

我知道这有点晚了，但 libnodave 是一个用于与西门子 PLC 通信的包。它也可以在 Java 中运行，这是一个很大的优势。我认为它不适合工业应用。我记得西门子有自己的库版本。只是谷歌它。***

# javascript - 如何在第二页显示详细信息？

> ID：15838328
> 
> 赞同：0
> 
> 时间：2013-04-05T15:55:26.373
> 
> 标签：javascript, jquery, html, json

我正在尝试在搜索后显示员工列表。它可以找到，但我想扩展我的代码以在用户单击单元格或其旁边的按钮后在第二页上显示更多详细信息。

这是我的代码：

```
<form action="" method="POST"><span><div id="result" class="span5"></div></span></table>    
</form><script language="javascript">
$('#search').click(function() {
$.get("index.php/find/findemp",{firstname : $('#fn').val(),lastname :     $('#ln').val(),dept : $('#dt').val() },function(data) {  //  ,jobtitle : $('#jt').val()
        var names = '<table class="table table-hover">';
        var x = 0;
        $.each(data, function(index, element) {
            if (index > 0) {x++, names;}

            names += "<tr class = x><td>"+element.firstName +"</td> "+"<td>"+ element.lastName+ "</td> <td>"+ element.department+"<td/> <td> "+ element.officeDay+"</td><td>"+element.AvStatus+"</td></tr>"+ "<br/>";
        });
        names+='';
        $('#result').html(names);
    },"json");
    return false;
}); 
```

我的计划是获取`x`作为标识符并在第二页上显示详细信息。

我想使用这段代码，虽然我不太理解，所以我会很感激一些建议。

```
$(".X").click(function() {
var name = $(".name",this).html();}); 
```

第二页代码：

```
<form action="" method="GET">
            <div >

                <div>First name:        <br /> <input value="<?php echo $name[1]; ?>" type=text id="fn" name='firstname'> </div>
                <div>Last name:        <br />  <input value="<?php echo $name[2]; ?>"type=text id="ln" name='lastname'> </div>
                <div>Department Name:  <br />  <input value="<?php echo $name[3]; ?>" type=text id="dt" name='dept'></div>
                <div>Current job Title: <br /> <input value="<?php echo $name[4]; ?>" type=text id="jt" name='jobtitle'> </div>
                <div>Birth Date:  <br />  <input value="<?php echo $name[5]; ?>" type=text id="dt" name='dept'></div>
                <div>Hire Date:  <br />  <input value="<?php echo $name[6]; ?>" type=text id="dt" name='dept'></div>
                <div>Gender:  <br />  <input value="<?php echo $name[7]; ?>" type=text id="dt" name='dept'></div>

                <br /><div><input value="Update" type="submit" id="update"></div> 
```

重启

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T11:38:25.003

答案并不容易，但是我研究了很长时间，现在它可以工作了：

```
$(document).on('click', '.x', function(e) {
    var emp_no = $(e.currentTarget).attr('data-emp-no');

    window.location = 'index.php/find/display/' + emp_no;

}); 
```

我还被迫创建另一个模型文件以通过 id 获取员工，后来我只是通过 `<?= $lecturer_data[0]['firstName'] ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:01:57.817

您可以首先在第一页上仅获取员工的姓名和身份证号码，然后在每个姓名旁边创建一些提交按钮，将身份证号码发送到下一页，其中包含获取该身份证号码的更多详细信息的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:03:30.340

让我为你解释代码

```
$(".X").click(function() {
 var name = $(".name",this).html();
}); 
```

1.  它查找具有该类的元素`.X`并绑定单击事件。
2.  单击该特定元素时，它会选择具有类的元素`.name`并检索 HTML。`jQuery( selector [, context ] )` [阅读更多](http://api.jquery.com/jQuery/#jQuery-selector-context)
3.  这些 HTML 保存在`name`变量中。

# 来自文档

```
$( "div.foo" ).click(function() {
  $(  "span", this ).addClass( "bar" );
}); 
```

> 当对 span 选择器的搜索仅限于 this 的上下文时，只有单击元素内的 span 才会获得附加类。
> 
> 在内部，选择器上下文是用 .find() 方法实现的，所以 $( "span", this ) 等价于 $( this ).find( "span" )。

# c++ - 为 LLVM libc++ 3.3 构建静态库和共享库

> ID：15838329
> 
> 赞同：5
> 
> 时间：2013-04-05T15:55:32.617
> 
> 标签：c++, cmake, clang, libc++, cpack

来自 SVN的最新 LLVM `libc++`3.3 带有一个`CMakeLists.txt`. 我是 CMake 新手，但昨天我学习到能够`libc++`在 RHEL 6.4 x86_64 主机上构建签出。

此外，我能够在其中添加足够多的`CPack`相关命令`CMakeLists.txt`来生成`libcxx-3.3.svn-0.el6.x86_64.rpm`. 但很可能由于是新手`CMake`，我无法同时构建静态库和共享库。

是的。我回顾了[是否可以让 CMake 构建同一库的静态和共享版本？](https://stackoverflow.com/questions/2152077/is-it-possible-to-get-cmake-to-build-both-a-static-and-shared-version-of-the-sam). 但是，我不想使用`add_library`and 枚举所有源文件，而是想使用`libc++`'s `CMakeList.txt`- using所采用的方法`APPEND`。

我可以通过将`ON`下面的第 40 行替换`OFF`为构建静态库来生成静态库

```
40  option(LIBCXX_ENABLE_SHARED "Build libc++ as a shared library." ON)
41 
```

或者我可以保持原样并构建一个共享库。

我还修改了以下几行，`NOT`例如删除或注释掉第 232 和 233 行。但无论我尝试了什么，我似乎都无法让静态库与共享库一起构建。

```
232  if (NOT LIBCXX_ENABLE_SHARED)
233    list(APPEND LIBCXX_CXX_FEATURE_FLAGS -D_LIBCPP_BUILD_STATIC)
234  endif() 
```

如何调整`CMakeList.txt`文件以便同时构建两者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T02:55:48.713

好的。我决定使用使用命令的“久经考验”的方法，并列出`add_library`所有内容。`*.cpp`它适用于 OOTB，因此我认为它是一种解决方案。

一旦我有时间提高我对`CMake`.

# jms - 为什么我会收到“TimeoutHandler Expiring message ID”警告

> ID：15838330
> 
> 赞同：3
> 
> 时间：2013-04-05T15:55:36.013
> 
> 标签：jms, wso2esb

我有几个代理（使用 JMS 传递消息），我猜有一个代理总是在我的`wso2carbon.log`文件中生成警告：

```
WARN {org.apache.axis2.transport.jms.JMSSender} -  Did not receive a JMS response within 30000 ms to destination : temp-queue://ID:EAI-P01-59160-1365080800632-57287:1:1 with JMS correlation ID : ID:EAI-P01-59160-1365080800632-57285:1:1:1:1 {org.apache.axis2.transport.jms.JMSSender}
WARN {org.apache.synapse.core.axis2.TimeoutHandler} -  Expiring message ID : urn:uuid:5428da0b-8f52-49ea-bcff-66df02a54daf; dropping message after global timeout of : 120 seconds {org.apache.synapse.core.axis2.TimeoutHandler} 
```

为什么我会收到这些警告，我总是指定属性`<property name="OUT_ONLY" value="true"/>`。

不幸的是，我无法真正重现它，但也许有人知道为什么会这样（发送到 JMS？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:08:01.370

搜索了这么久，我只是忘了设置`<property name="OUT_ONLY" value="true"/>`一个发送到 JMS 的代理。

我把问题留在这里 - 所以也许有人会寻找这些信息。

# algorithm - 未加权图/树中两个给定节点之间的最短路径

> ID：15838336
> 
> 赞同：3
> 
> 时间：2013-04-05T15:56:01.213
> 
> 标签：algorithm, shortest-path

我正在寻找一种算法来通过使用邻接矩阵来确定未加权图中两个节点之间的最短路径。我知道 Dijkstra 和 Bellman - Ford，但没有找到特定于确定两个给定节点之间的最短路径的。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T16:04:39.917

一个简单的选择是从第一个节点开始运行广度优先搜索，直到找到第二个节点。如果为每个节点存储父指针，则可以读取从第一个节点到第二个节点的路径。此外，这在图的大小上以线性时间运行。

希望这可以帮助！

# javascript - 如何处理类中的所有链接？

> ID：15838337
> 
> 赞同：1
> 
> 时间：2013-04-05T15:56:02.150
> 
> 标签：javascript, dom

我知道如何处理带有 id 的链接：

```
var a = document.getElementById("mylink");
a.onclick = function() {
  alert("ok");
}; 
```

但是，如果我在一个类*.lotsOfLinks*中有 3 个链接，并且我想像处理 Id 一样处理每个链接。

什么是最好和最短的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T15:59:13.717

像这样做：

```
var elements = document.getElementsByClassName("lotsOfLinks");
for (var i = 0; i < elements.length; i++) {
    elements[i].onclick = function() {
        alert("ok");
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:59:29.203

```
// use querySelectorAll for greater browser compatibility
var a = document.querySelectorAll(".mylink");

// make your handler
var handler = function() {
  alert("ok");
};

// iterate the collection, and assign the handler
for (var i = 0; i < a.length; i++) {
    a[i].onclick = handler;
} 
```

请注意，`querySelectorAll`这在 IE6/7 中不起作用，但我想您此时不支持那些 JavaScript 环境。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:59:51.320

```
var a = document.getElementsByTagName('a');
for (var i = 0; i < a.length; i++){
    if (a[i].className == "lotsOfLinks"){
        a[i].onclick = function(){ alert("ok"); }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T16:00:48.587

您可以尝试`document.getElementsByClassName('myClass');`，但在 9 之前的 IE 版本中不支持没有 polyfill

[http://caniuse.com/getelementsbyclassname](http://caniuse.com/getelementsbyclassname)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T16:01:47.903

```
 var elements = document.getElementsByClassName("lotsOfLinks");
  for(var i = 0; i < elements.length; i++) {
     elements[i].addEventListener("click", function() {
         alert("ok");
     }
  } 
```

使用了 addEventListener() 函数。

# autohotkey - Autohotkey 获取当前链接的位置

> ID：15838339
> 
> 赞同：-1
> 
> 时间：2013-04-05T15:56:16.293
> 
> 标签：autohotkey

如果您使用 Tab 和 shift-Tab 浏览网页

有什么方法可以获取当前标记链接的 X、Y 位置吗？（整个下午都在谷歌上搜索）：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:35:19.937

你有没有尝试过：

消息框，%A_CaretX% %a_carety%

# asp.net-mvc - 从数据库加载 jqgrid 不起作用 filterToolbar

> ID：15838346
> 
> 赞同：0
> 
> 时间：2013-04-05T15:56:33.840
> 
> 标签：asp.net-mvc, jquery-ui, asp.net-mvc-4, jqgrid, jqgrid-asp.net

我正在使用 Asp.net MVC4、jqgrid 4.4.4 和 jquery 1.9 jqGrid 从查询加载到数据库，但我无法过滤字段，当我输入值时不搜索，它向我显示相同的值，但是当我在 jqgrid 中定义值 loadonce: true 仅在第一个搜索页面中，我该如何解决这个问题？我应该在哪里修改代码？

这是我的代码，jqgrid：

```
jQuery(document).ready(function () {
        jQuery("#tbBuscaRec").jqGrid({  
            url: '@Url.Action("DatosBuscaPersona", "raTabPersonaReclamante")',
            datatype: 'json',
            mtype: 'POST',    
            postData: { Parametro: Param },
            colNames: ['Id', 'IdPer', 'Doc', 'CI/NIT', 'Nombres', 'Apellido Paterno', 'Apellido Materno', 'Apellido Esposo'],
            colModel:
            [
              { name: 'ip_idpersona', index: 'ip_idpersona', formatter: 'number', hidden: true },
              { name: 'ip_idpersonadoc', index: 'ip_idpersonadoc', formatter: 'text', hidden: true },
              { name: 'ip_partipodoc', index: 'ip_partipodoc', align: 'left', width: '4', editable: true, edittype: 'text', editoptions: { readonly: true }, search: false },
              { name: 'ip_nrodoc', index: 'ip_nrodoc', sortable: true, align: 'left', width: '8', editable: true, edittype: 'text', editoptions: { readonly: true} },
              { name: 'ip_nombres', index: 'ip_nombres', sortable: true, align: 'left', width: '15', editable: true, edittype: 'text', editoptions: { readonly: true} },
              { name: 'ip_appaterno', index: 'ip_appaterno', sortable: true, align: 'left', width: '15', editable: true, edittype: 'text', editoptions: { readonly: true } },
              { name: 'ip_apmaterno', index: 'ip_apmaterno', sortable: true, align: 'left', width: '15', editable: true, edittype: 'text', editoptions: { readonly: true} },
              { name: 'ip_apesposo', index: 'ip_apesposo', sortable: false, align: 'left', width: '15', editable: true, edittype: 'text', editoptions: { readonly: true} }
            ],
            pager: '#pg_tbBuscaRec',
            rowNum: 100,
            rowList: [100, 200, 300],
            sortname: 'ip_nombres',
            sortorder: 'asc',
            rownumbers: true,
            multiselect: false,
            gridview: true,
            height: 180,
            width: 490,
            ignoreCase: true,
//            loadonce: true,
        });
    });
    jQuery("#tbBuscaRec").jqGrid('navGrid', '#pg_tbBuscaRec', { view: false, edit: false, add: false, del: false }, {}, {}, {}, { multipleSearch: true, closeAfterSearch: true, closeOnEscape: true });
    jQuery("#tbBuscaRec").jqGrid('filterToolbar');
    jQuery("#tbBuscaRec").trigger("reloadGrid", [{ current: true}]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:08:45.893

默认情况下，过滤将由您的控制器处理，您将看到这些值在`_search`and中传递给控制器`filters`​​。

在第一页上工作的原因`loadonce: true`是它正在客户端进行过滤。

我建议在下面的链接中查看 Oleg 关于过滤的答案，这让我走上了为我的应用程序进行服务器端过滤的轨道上。

[ASP.NET MVC 2.0 jqgrid中搜索的实现](https://stackoverflow.com/questions/5500805/asp-net-mvc-2-0-implementation-of-searching-in-jqgrid)

# java - 如何在 Java 中返回布尔值？

> ID：15838354
> 
> 赞同：4
> 
> 时间：2013-04-05T15:57:00.223
> 
> 标签：java, if-statement, boolean

```
public boolean isOdd (int value) {
    if ((value % 2)== 0){ 
        return false; 
    } else if ((value % 2) > 0){ 
        return true; 
    }
} 
```

我收到一条错误消息： private boolean isOdd(int value) throws Exception{ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ This方法必须返回布尔类型的结果

我试着做：

```
public boolean isOdd (int value) {
    boolean isOdd =  ((value % 2) > 0);
    return true; 
} 

public boolean isEven (int value) {
    boolean isEven = ((value % 2) > 0);
    return true;
} 
```

它只返回 true 作为输出。

我不知道我在这里做错了什么！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T15:59:52.500

您的第一个代码段导致错误，因为您没有满足这种`else`情况。您不需要`else if`此处，因为您希望在不满足 if 语句的所有情况下执行第二个条件。尝试将其更改为：

```
public boolean isOdd (int value) {

    if ((value % 2)== 0){ 
        return false; 
    } 
    else { return true; }

} 
```

或更简单地说：

```
public boolean isOdd (int value) {
    return ((value % 2) != 0);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T15:58:53.007

您需要在第一个片段中添加一个默认返回值，也就是不在任何 if 中的返回值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T16:00:14.540

做就是了

```
public boolean isOdd(int value) {
    return (value % 2) != 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T16:00:22.057

你需要一个 else 或至少另一个回报。如果您的两个 if 语句都不匹配，则不会返回任何内容，这是不允许的。

```
public boolean isOdd (int value) {

if ((value % 2)== 0){ 
return false; } 

else if ((value % 2) > 0){ 
return true; }

return true;

} 
```

您可以用以下方法替换该方法：

```
public boolean isOdd (int value) {
return (value % 2) != 0; } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-05T16:00:52.503

如果您添加一条语句，编译错误就会消失`else`，即

```
if ((value % 2)== 0) { 
    return false;
} else if ((value % 2) > 0){ 
   return true;
} else {
   return ??; // default value
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-05T15:59:34.570

万一`((value % 2) < 0)`呢？你没有考虑到这种可能性，如果发生这种情况，就没有返回路径。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T15:58:53.050

```
public boolean isEven (int value) {
  return value%2==0;
} 

public boolean isOdd (int value) {
  return value%2!=0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-11T20:46:49.120

你也可以这样做：

```
public boolean isOdd (int value) {
    if ((value % 2) == 0)
        return false; 
    return true; 
} 
```

# cmd - 如何以编程方式使用 gui 安排任务

> ID：15838357
> 
> 赞同：1
> 
> 时间：2013-04-05T15:57:14.453
> 
> 标签：cmd, windows-xp, scheduled-tasks, windows-task-scheduler

（我在 Windows XP 下工作）

我正在采用的方法（不起作用）的简化如下：

```
C:\>schtasks /create /tn "MyTask" /tr "mspaint" /sc daily /st 11:43:00 /ru "System" 
```

我知道任务正在计划中，因为您可以在任务计划程序中查看它。

我知道它会运行并且不会停止，因为您可以在任务调度程序中查看它。

但是： Paint 程序永远不会变得可见。（它可能以另一个用户身份运行吗？）

如何使用 GUI 安排任务，以便在任务运行时可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:50:49.703

您需要指定应在其上下文中运行任务的用户，并选中“仅在登录时运行”复选框。AFAIK 这只能在 GUI 中完成，而不是通过`schtasks`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:41:07.653

您可以使用简单的“ `schtasks`”命令检查所有任务。对于想法，我认为编写混合软件的最佳方法是通过进程/命令行处理任务接口 2.0 和 schtasks 命令。

您还可以在后台查看 schtasks 命令行响应。

完整的 schtasks 列表在[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx)

# ios - 从循环更新视图

> ID：15838359
> 
> 赞同：1
> 
> 时间：2013-04-05T15:57:27.423
> 
> 标签：ios, ipad, loops, user-interface

我已经阅读了关于这个主题的几个主题，但还没有找到答案。在我的 iOS 应用程序中，我使用 sudzc.com 提供的类从 SOAP Web 服务下载数据。然后我将数据保存到 CoreData 数据库。为此，我必须遍历数据集（for-loop）。由于可能有很多数据，我想为 UI 提供状态更新。保存由 WebServiceHelper 类管理，该类定义了将状态信息推送到视图控制器的委托。代理设置正确，因为一些消息正在显示，但我没有设法从循环内部更新视图或在一个长时间运行的方法中调用代理两次。
我试过`performSelector:withObject:afterDelay:`了，但这并没有改变任何东西。
有没有其他方法可以强制 UI 更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T15:59:54.040

UI 更改需要在主线程上进行，而您的长时间运行的操作应该在后台线程上进行。

假设您的循环在后台线程中运行，您可以通过执行以下操作触发 UI 更新：

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
    // update UI here
}]; 
```

这将在主运行循环上执行块。另一种方法是使用 GCD API，但如果可能的话，我喜欢留在 Obj-C/Foundation 级别。

# mysql - 在 MySQL 中解析下划线分隔的字段

> ID：15838368
> 
> 赞同：0
> 
> 时间：2013-04-05T15:57:52.137
> 
> 标签：mysql, sql, parsing, mysql-workbench, string-parsing

我有下表：

```
Patent      AssigneeName                        AssigneeUnparsed
-------     --------------                      ---------------
D452605     Louis Vuitton Malletier, S.A.       Paris_None_FR
D452606     Nike, Inc.                          Beaverton_OR_US
D452607     Salomon S.A.                        Metz-Tessy_None_FR 
```

我已经搜索了该站点，但找不到任何关于如何解释将带下划线的字段解析为单独字段的具体内容。我想获取 AssigneeAddress 字段并将其解析为三个字段（AssigneeCity、AssigneeState、AssigneeCountry）

有人可以解释如何做到这一点或指向我的教程，以便我可以尝试弄清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:03:46.640

```
select 
    substring_index('Beaverton_OR_US', '_', - 1) as AssigneeCity,
    substring_index(substring_index('Beaverton_OR_US', '_', 2),
            '_',
            - 1) as AssigneeState,
    substring_index('Beaverton_OR_US', '_', 1) as AssigneeCountry; 
```

更新 ：

```
update tablename 
set 
    AssigneeCity = substring_index('Beaverton_OR_US', '_', - 1),
    AssigneeState = substring_index(substring_index('Beaverton_OR_US', '_', 2),
            '_',
            - 1),
    AssigneeCountry = substring_index('Beaverton_OR_US', '_', 1); 
```

# php - PHP cookie变量在程序之间被删除

> ID：15838369
> 
> 赞同：0
> 
> 时间：2013-04-05T15:57:52.723
> 
> 标签：php, session, cookies

我尝试在这个论坛上搜索这个问题，但无法得到它。于是发新帖。如果可用，请您将我重定向到正确的解决方案。

问题：我正在尝试使用 javascript SDK 在我的程序中使用 Facebook 登录。一旦验证了用户的接受，我将用户传递给一个 php 程序，该程序验证电子邮件 ID 是否已经注册，连接帐户并将用户重定向到他的主页。

我正在尝试在我的验证程序中的 cookie 中注册用户的用户 ID。问题是，当我在验证程序的最后一行对 $_COOKIE 执行 var_dump 时，我可以看到一个名为 userid 的变量，但是当我在主页的第一行执行相同操作时，我看不到多变的。cookie 变量在页面之间的某处丢失。

两个页面都将 session_start() 作为它们的第一行代码。

感谢期待。

问候， Himanshu

添加代码

```
setcookie("user", $user, time()-86400); 
setcookie("user", $user, time()+86400,"/"); 
setcookie("userid", $id, time()-86400); 
setcookie("userid", $id, time()+86400,"/"); 
setcookie("name", $fname, time()-86400); 
setcookie("name", $fname, time()+86400,"/"); 
setcookie("fb", '1', time()-86400); 
setcookie("fb", '1', time()+86400,"/"); 

if((!$_SESSION['where'])||($_SESSION['where'] == ''))
{
    header("Location: http://www.xyz.com/mypage.php"); 
}
else
{
header("Location: $url");
} 
```

在 mypage.php 中，前两行如下：

```
<?php
session_start();
print_r($_COOKIE); 
```

希望现在更清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:04:15.937

[`setcookie`](http://php.net/manual/fr/function.setcookie.php)除了设置 $_COOKIE 变量之外， 您还在使用吗？`setcookie`写入 cookie 文件，而 $_COOKIE 只是用户在页面加载时作为 cookie 拥有的状态。

更简单的版本：用 $_COOKIE 写入`setcookie`，用 $_COOKIE 读取。如果您需要立即访问 $_COOKIE，只需将 $_COOKIE 与 setcookie 调用一起设置即可。

例子 ：

```
<?php
//write
    setcookie('name', $value, $expirationInSeconds);
    $_COOKIE['name'] = $value;
//read
    $id = $_COOKIE['name']; 
```

# c# - 根据条件在gridview的列中显示图像

> ID：15838373
> 
> 赞同：0
> 
> 时间：2013-04-05T15:58:03.643
> 
> 标签：c#

嗨，我有一个 6 列的网格视图，其中我的第一列是复选框。我想在复选框旁边插入一个图像，以便每当对该行的验证出现一些错误时，如果没有错误，则应该显示图像，而不是显示图像。如何做到这一点。请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:29:54.303

像下面这样的东西应该这样做。在您的 aspx 文件中创建一个 TemplateField

```
<asp:TemplateField HeaderText="Header" >
<ItemTemplate>
<asp:CheckBox runat="server" ID="cbWhatever" ></asp:CheckBox>
<asp:Image runat="server" ID="img1" ImageUrl="~/filename1" Visible="false"/>
<asp:Image runat="server" ID="img2" ImageUrl="~/filename2" Visible="false"//>
</ItemTemplate>
</asp:TemplateField> 
```

然后在后面的代码中，当您进行验证时，根据您的验证结果执行以下操作：

```
Image img = (Image)e.Row.FindControl("img1");
img1.Visible = true; 
```

或者

```
Image img = (Image)e.Row.FindControl("img2");
img2.Visible = true; 
```

# c# - Umbraco 4.7.2 AfterSave 在年/月结构中创建和移动节点导致左侧内容树重新加载

> ID：15838374
> 
> 赞同：0
> 
> 时间：2013-04-05T15:58:08.710
> 
> 标签：c#, asp.net, umbraco

我有这个 AfterSave 事件，它运行代码将我的新闻项目分类为年和月节点。该部分工作正常，但我有一个问题，因为 lfet 内容树菜单不断“重新加载”，只显示主节点。

我读过很多帖子告诉我使用：

```
BasePage.Current.ClientTools.SyncTree(sender.Path, true); 
```

现在这在逻辑上应该有效，但事实并非如此。

我试过打电话：

```
umbraco.library.RefreshContent(); 
```

在调用 SyncTree 之前，但没有帮助。

我已经得到了“可接受”的结果：

```
string _returnUrl = "editContent.aspx?id=" + sender.Id.ToString() + "&isNew=true";
BasePage.Current.ClientTools.ChangeContentFrameUrl(_returnUrl); 
```

但那是一些怪异的hacky代码。

有人可以阐明这里的困难吗？

谢谢！

# python - 制作经过训练的数据集 python 的图形

> ID：15838375
> 
> 赞同：2
> 
> 时间：2013-04-05T15:58:14.197
> 
> 标签：python, networking, dataset, graphic

```
y1 = []
y2 = []
x = []
for i in range(40):
    #fer dos llistes (error y epoch) y despres fer un plot
    trainer.trainEpochs( 1 )
    trnresult = percentError( trainer.testOnClassData(),trndata['class'] )
    tstresult = percentError( trainer.testOnClassData(dataset=tstdata ),tstdata['class'] )

    print "epoch: %4d" % trainer.totalepochs, \
          "  train error: %5.2f%%" % trnresult, \
          "  test error: %5.2f%%" % tstresult

    if i==1:
        g=Gnuplot.Gnuplot()
    else:
        y1 = y1.append(float(trnresult))
        y2 = y2.append(float(tstresult))
        x = x.append(i)
d1=Gnuplot.Data(x,y1,with_="line")
d2=Gnuplot.Data(x,y2,with_="line")
g.plot(d1,d2) 
```

大家好，我第一次在这里发帖，但感谢您的工作。

好的，我正在使用神经网络（多层感知器）并且我正在使用 UCI ML 存储库进行测试，我必须以图形方式显示错误与 epoch 的数量，但我不知道我是什么做错了，这是我得到的错误：

```
y1 = y1.append(float(trnresult))
AttributeError: 'NoneType' object has no attribute 'append' 
```

我已经尝试在 y1.append() 使用 int 和 float，但我遇到了同样的错误。这就是我在控制台上得到的全部内容：

```
Number of training patterns:  233

Input and output dimensions:  6 2

First sample (input, target, class):

[ 63.03  22.55  39.61  40.48  98.67  -0.25] [1 0] [ 0.]

Total error: 0.110573541007

epoch:    1   train error: 33.05%   test error: 29.87%

Total error: 0.0953749484982

epoch:    2   train error: 32.19%   test error: 35.06%

Total error: 0.0977600868845

epoch:    3   train error: 27.90%   test error: 29.87%

Traceback (most recent call last):
  File "C:\Python\Practice\dataset.py", line 79, in <module>
    y1 = y1.append(float(trnresult))
AttributeError: 'NoneType' object has no attribute 'append' 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:08:26.703

列表上的`append()`函数不返回值。因此`y1`替换为`None`。你应该做`y1.append()`and`y2.append()`而不分配回`y1`and `y2`。

进一步来说

```
>>> a = []
>>> b = a.append(1)
>>> b is None
True
>>> a
[1]
>>> a.append(2)
>>> a
[1, 2] 
```

如果需要，可以`+`在列表上使用运算符（注意`[]`around `3`）：

```
>>> a = a + [3]
>>> a
[1, 2, 3] 
```

# ruby-on-rails - 在 Rails 上连接到 virtualbox postgresql 时出现问题

> ID：15838376
> 
> 赞同：0
> 
> 时间：2013-04-05T15:58:18.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我无法从本地的 rails 副本连接到 postgres。Postgresql 在用户 postgres 的虚拟机上运行，​​但是当我尝试运行 rake db:migrate 时，我得到一个

致命：用户“[我的 mac 登录用户名]”的密码验证失败

它不应该尝试连接我的 database.yml 中指定的用户名吗？

这是一个链接。

[http://pastie.org/7329321](http://pastie.org/7329321)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:13:33.560

尝试在您的 database.yml 中将“用户”更改为“用户名”。

# nginx - Nginx密码保护root，子目录单独密码

> ID：15838379
> 
> 赞同：5
> 
> 时间：2013-04-05T15:58:23.863
> 
> 标签：nginx, .htpasswd

我正在尝试使用多层的 Nginx 设置基本的 HTTP 身份验证。除了某个子目录（URL）之外，我想为整个站点设置一个用户名和密码，并为该子目录设置一个单独的用户名和密码。如果有人导航到该子目录，我希望仅提示他们输入特定于子目录的凭据，而不是站点根目录的凭据。

我该如何设置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T08:26:49.577

参考： http: [//nginx.org/en/docs/http/ngx_http_auth_basic_module.html](http://nginx.org/en/docs/http/ngx_http_auth_basic_module.html)

假设子目录 url 是[http://www.example.com/admin/](http://www.example.com/admin/)。

第 1 步：使用创建 2 个存储用户名/密码（加密）对的文件`htpasswd`

```
# to secure the admin site
htpasswd -bc /tmp/admin_passwd.txt admin adminpassword
# to secure the main site
htpasswd -bc /tmp/site_passwd.txt user userpassword 
```

第 2 步：设置您的 nginx 配置：

```
server {
    listen                      80;
    server_name                 www.example.com;
    root        /tmp/www;

    location ^~ /admin/ {
        auth_basic           "secured site admin";
        auth_basic_user_file /tmp/admin_passwd.txt;
    }

    location / {
        auth_basic           "secured site";
        auth_basic_user_file /tmp/site_passwd.txt;
    }
} 
```

# objective-c - C 中的 OpenSSL Diffie Hellman DER 编码

> ID：15838381
> 
> 赞同：3
> 
> 时间：2013-04-05T15:58:26.540
> 
> 标签：objective-c, c, openssl, asn.1, diffie-hellman

我有一个问题，过去两天一直在寻找答案。

我在 C 中使用 OpenSSL 生成了一个 DH 对象（更具体的 Objective-C，但我认为没有类似的东西），现在可以访问 Bignums 的 p、q 和 publickey 值。我需要将这些值作为 ASN.1 DER 编码作为一个 base64 字符串发送到服务器。

在 Android 客户端上，重要的步骤是*.getPublic().getEncoded() 后跟 base64 编码。（*是有密钥协议的东西）

我如何在 c 或 Objective-c 上做到这一点？代码示例会非常非常棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:03:46.977

对于 DER 编码，您可以 i2d_DHParams 可以解决您的目的。

假设你在dh中有DH参数，那么你可以调用

```
 int len;
  len  = i2d_DHParams (dh, &buf);
  //It should write encoded dh to buf and len should be number of bytes written. 
```

[您可以在此处](http://www.openssl.org/docs/crypto/dh.html)查看 DH 方法。

# python - 函数和类，__str__ 的用法

> ID：15838392
> 
> 赞同：0
> 
> 时间：2013-04-05T15:58:52.863
> 
> 标签：python, string, list, class, function

我在函数、方法之间的交互方面遇到了一些问题，并且不确定如何使用内置函数`__str__`。

首先，我有一个名为 vara 的类，它看起来像：

```
class vara(object):

    def __init__(self, kod, namn, pris, butikantal):
        self.kod = kod
        self.namn = namn
        self.pris = pris
        self.antal = butikantal 
```

我有一个函数可以为 vara klass 创建一个对象列表，如下所示：

```
def mina_varor():

  varor_fran_fil = open("varor.txt", "r")
  varulista = []
  for rad in varor_fran_fil:
      varje_vara1 = rad
      varje_vara2 = varje_vara1.split("/")
      varorna = vara(varje_vara2[0], varje_vara2[1], varje_vara2[2], varje_vara2[3])
      varulista.append(varorna)

  return(varulista) 
```

现在我希望能够通过简单地键入对象的“kod”来访问此列表中的单个对象。但我在我的列表中找不到任何“kod”。看起来很奇怪，所以我尝试打印列表，并得到了：

`[<__main__.vara object at 0x00000000031503C8>, <__main__.vara object at 0x00000000031507F0>, <__main__.vara object at 0x0000000003150710>, <__main__.vara object at 0x00000000031502B0>, <__main__.vara object at 0x00000000031505F8>, <__main__.vara object at 0x00000000031504E0>]`

我查了一下，似乎 python 无法决定如何解释我的列表。我想我需要一种`__str__`方法来做到这一点，但是`__str__`如果我想让我的方法看起来像这样打印：

```
Name: Hat
Price: 150
Quantity: 100
Code: 223 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:09:35.163

## 问题 1：打印容器时未调用 __str__()

并不是 Python 无法解释您的列表，而是它不知道您希望它如何显示。

`__str__`如果您想做类似的事情，请实施该方法

```
print(varulista[0]) 
```

类似下面的内容会给您带来您对该列表条目的期望：

```
def __str__(self):
    s  = "Name:    %s\n" % self.namn
    s += "Price:   %s\n" % self.pris
    s += "Quantity:%s\n" % self.antal
    s += "Code:    %s\n" % self.kod 
```

但是，如果您想`print(varulista)`理解，您还必须实现该`__repr__`方法，因为`varulista`它是一个列表，并且在打印它时 Python 会查找该`__repr__`方法。

但话虽如此，其想法`__repr__`是能够将其传递回`eval()`并创建等效对象。因此，您可以采用以下两种方式之一：

**1.忽略`__repr__()`/`eval()`交互**

在这种情况下，只需按照`__repr__()`您的意愿实施即可。请记住，当它是您正在打印的容器中的项目时，将调用此方法，因此将输出保持在单行可能会有所帮助。只要知道，除非您在`__repr__()`输出中明确表示对象的状态，否则您将无法使用`eval()`.

**2.（首选选项，IMO）`__repr__()`正确实施，如果您不喜欢容器的外观，就不要打印容器。**

如果输出像

```
[Item{Name:"Hat",Price:150,Quantity:100,Code:223},Item{Name:"Shirt",Price:450,Quantity:10,Code:225}] 
```

由于您必须如何实施，所以太不友好了`__repr()__`，只是不要打印容器。换句话说，不要使用

```
print(varulista) 
```

而是使用

```
for item in varulista: print item 
```

这将调用`__str__()`您定义的方法，即人性化的方法。

**编辑：** @bernie 链接到@AlexMartelli 的[一个很好的答案，](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python/1436756#1436756)关于两者之间的区别`__str__`，`__repr__`值得链接两次。

* * *

## 问题 2：能够通过其代码访问列表元素

你说

> 现在我希望能够通过简单地键入对象的“kod”来访问此列表中的单个对象。但我在我的列表中找不到任何“kod”。看起来很奇怪，所以我尝试打印列表，并得到了：

您在这里有两个主要选择。(1) 使用以项目代码为关键字的字典。(2) 使用列表推导在列表中搜索代码。我只会展示 (1)，因为我认为这是一个更好的选择。

**选项 1：使用键入项目代码的字典**

考虑这段代码：

```
# Define a convenience function to add items to the dictionary
def add_item(d,i): d[i.kod] = i

# Create a new dictionary
items = {}

# Add items to dictionary
add_item(items, vara(223, "Hat", 150, 100))
add_item(items, vara(225, "Shirt", 450, 10)) 
```

您现在可以访问`items`字典中的任何已定义项目，如下所示：

```
items[223] #<-- This is the "Hat" item
items[225] #<-- This is the "Shirt" item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:14:56.113

你可以这样覆盖`__repr__`：

```
class vara():
    def __init__(self, kod, namn, pris, butikantal):
        self.kod = kod
        self.namn = namn
        self.pris = pris
        self.antal = butikantal

    def __repr__(self):
        return 'Name: %s\nPrice: %s\nQuantity:%s\nCode: %s\n'\
               % (self.namn, self.pris, self.antal, self.kod) 
```

输出：

```
>>> print([vara('223', 'Hat', '150', '100'), vara('115', 'Bla', '154', '200')])
[Name: Hat
Price: 150
Quantity:100
Code: 223
, Name: Bla
Price: 154
Quantity:200
Code: 115
] 
```

**编辑：**

但正如@jedwards 所解释的，这是一种更好的方法来覆盖`__str__`我所做的相同方式并`__repr__`单独打印每个对象，而不是打印整个列表。

# android - 安卓：Facebook安卓应用

> ID：15838396
> 
> 赞同：1
> 
> 时间：2013-04-05T15:58:59.023
> 
> 标签：android, facebook-java-sdk

每次我尝试在模拟器上运行它时，我的 Facebook android 应用程序都会崩溃。我正在关注来自 facebook 网站的代码[https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)

我也尝试了其他教程，但无论我使用什么......每次它崩溃......这是代码

```
package com.example.fblogin;

import com.facebook.Session;
import com.facebook.SessionState;
import com.facebook.UiLifecycleHelper;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.Menu;

public class MainActivity extends FragmentActivity {
private static final int SPLASH = 0;
private static final int SELECTION = 1;
private static final int FRAGMENT_COUNT = SELECTION +1;
private boolean isResumed = false;
private UiLifecycleHelper uiHelper;
private Session.StatusCallback callback = 
    new Session.StatusCallback() {
    @Override
    public void call(Session session, 
            SessionState state, Exception exception) {
        onSessionStateChange(session, state, exception);
    }
};

private Fragment[] fragments = new Fragment[FRAGMENT_COUNT];
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    uiHelper = new UiLifecycleHelper(this, callback);
    uiHelper.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FragmentManager fm = getSupportFragmentManager();
    fragments[SPLASH] = fm.findFragmentById(R.id.splashFragment);
    fragments[SELECTION] = fm.findFragmentById(R.id.selectionFragment);

    FragmentTransaction transaction = fm.beginTransaction();
    for(int i = 0; i < fragments.length; i++) {
        transaction.hide(fragments[i]);
    }
    transaction.commit();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

private void showFragment(int fragmentIndex, boolean addToBackStack) {
    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction transaction = fm.beginTransaction();
    for (int i = 0; i < fragments.length; i++) {
        if (i == fragmentIndex) {
            transaction.show(fragments[i]);
        } else {
            transaction.hide(fragments[i]);
        }
    }
    if (addToBackStack) {
        transaction.addToBackStack(null);
    }
    transaction.commit();
}

@Override
public void onResume() {
    super.onResume();
    uiHelper.onResume();
    isResumed = true;
}

@Override
public void onPause() {
    super.onPause();
    uiHelper.onPause();
    isResumed = false;
}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
}

@Override
public void onDestroy() {
    super.onDestroy();
    uiHelper.onDestroy();
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    uiHelper.onSaveInstanceState(outState);
}
private void onSessionStateChange(Session session, SessionState state,             Exception      exception) {
    // Only make changes if the activity is visible
    if (isResumed) {
        FragmentManager manager = getSupportFragmentManager();
        // Get the number of entries in the back stack
        int backStackSize = manager.getBackStackEntryCount();
        // Clear the back stack
        for (int i = 0; i < backStackSize; i++) {
            manager.popBackStack();
        }
        if (state.isOpened()) {
            // If the session state is open:
            // Show the authenticated fragment
            showFragment(SELECTION, false);
        } else if (state.isClosed()) {
            // If the session state is closed:
            // Show the login fragment
            showFragment(SPLASH, false);
        }
    }
}

@Override
protected void onResumeFragments() {
    super.onResumeFragments();
    Session session = Session.getActiveSession();

    if (session != null && session.isOpened()) {
        // if the session is already open,
        // try to show the selection fragment
        showFragment(SELECTION, false);
    } else {
        // otherwise present the splash screen
        // and ask the user to login.
        showFragment(SPLASH, false);
    }
}
} 
```

`

# java - IllegalAccessError: 试图访问类 com.sun.media.sound.JSSecurity 错误

> ID：15838398
> 
> 赞同：0
> 
> 时间：2013-04-05T15:59:04.077
> 
> 标签：java, audio

我只是尝试使用`getAudioInputStream(file)`class中的方法`AudioSystem`，但出现以下异常：

```
IllegalAccessError: tried to access class com.sun.media.sound.JSSecurity from class com.sun.media.sound.SoftMidiAudioFileReader at 
```

com.sun.media.sound.SoftMidiAudioFileReader.getAudioInputStream 类（未知来源）

我不知道问题出在哪里。是图书馆的问题吗？

# python - 如何从子集列表中过滤出唯一组合

> ID：15838399
> 
> 赞同：1
> 
> 时间：2013-04-05T15:59:07.483
> 
> 标签：python, arrays, list, subset

[在这篇文章](https://stackoverflow.com/questions/4632322/finding-all-possible-combinations-of-numbers-to-reach-a-given-sum)的第一个脚本的帮助下，我试图想出一个脚本来实现[Subset sum Prob](http://en.wikipedia.org/wiki/Subset_sum_problem)。所以，现在运行我的脚本，我得到了这个：

```
maci:python sant$ ./subsetSum.py -n3,4,5,6,7,8,9,3,4,5 -t12
[3, 4, 5] => 12
[3, 4, 5] => 12
[3, 5, 4] => 12
[3, 6, 3] => 12
[3, 9] => 12
[3, 4, 5] => 12
[4, 5, 3] => 12
[4, 8] => 12
[4, 3, 5] => 12
[5, 7] => 12
[5, 3, 4] => 12
[7, 5] => 12
[8, 4] => 12
[9, 3] => 12
[3, 4, 5] => 12 
```

哪个工作得很好。但是如何只过滤掉唯一的子集呢？结果，1、2、15完全一样，还有其他6个，是[3,4,5]的组合。如何只打印一个而不是全部打印？干杯！！

PS。我知道 Q 可能没有反映我真正想要的，所以请随时改进它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:07:44.440

而不是在您的列表中多次添加数字，只需添加 (number, multiplicity) 的元组，这样您的输入就会变为`[(3, 2), (4, 2), (5, 2), (6, 1), (7, 1), (8, 1), (9, 1)]`.

这使得创建没有重复的子集变得容易。您可以执行以下操作：

```
for i in n[1]:
    subset_sum_recursive(remaining, target, partial + i * [n[0]]) 
```

或者，不仅保留“部分”列表而且保留“丢弃”列表可能更容易。然后你可以检查

```
if(n not in discarded)
    subset_sum_recursive(remaining,target,partial + [n]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T20:43:35.057

使用元组（不可变）而不是列表。然后您可以将它们的列表转换为集合（删除重复项），最后将集合转换回列表。

即`list(set([(3,4,5),(3,4,5),(3,5,4),(3,6,3) ...]))`生产`[(3,4,5),(3,5,4),(3,6,3) ...]`

您可以使用 map 将项目与元组相互转换：

```
map(tuple, your list of lists) 
```

和

```
map(list, your list of tuples) 
```

# sql - 在 Select 语句中使用函数进行转换

> ID：15838408
> 
> 赞同：2
> 
> 时间：2013-04-05T15:59:32.210
> 
> 标签：sql, sql-server, ssms

假设我有这两张表，有五列，其中四列完美匹配，但最后一个具有不同的数据类型，一个是 char，另一个是 uniqueidentifier。但是我有这个函数，我们称它为 dbo.x，它接受 uniqueidentifier 并在数据库的其他地方寻找对应的名称。

所以我需要做的是开发这个脚本，它将数据从 table1 复制到 table2 并使用函数转换最后一列。

在做了一些研究之后，我尝试了这个（显然没有奏效）：

```
INSERT INTO table1 (col1, col2, col3, col4, col5)
SELECT col1, col2, col3, col4, col5 AS dbo.x(table2.col5)
FROM table2 
```

有人可以给我一些关于从这里去哪里的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:02:32.013

您已切换表达式和别名 - 语法应如下所示：

```
INSERT INTO table1 (col1, col2, col3, col4, col5)
SELECT col1, col2, col3, col4, dbo.x(table2.col5) AS col5
FROM table2 
```

通常，当您在 select 语句中使用表达式并希望为结果列命名时，您首先编写表达式，然后编写它的别名，例如

```
SELECT <expression> AS <column-name>
FROM ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T16:03:04.197

这个怎么样

```
INSERT INTO table1 (col1, col2, col3, col4, col5)
SELECT col1, col2, col3, col4, dbo.x(col5)
FROM table2 
```

# javascript - 提交表单后如何保留下拉选择的值？

> ID：15838418
> 
> 赞同：1
> 
> 时间：2013-04-05T16:00:02.623
> 
> 标签：javascript, jquery, html, drop-down-menu, option

提交表单后如何保留下拉选择的值？我有一个通过提交的表格`onchange`但问题是当我从下拉列表中选择值时，表单被提交但下拉值被选中`Select Option`

**Javascript**

```
<script>
function getdropdownvalue(){
var e = document.getElementById("size");
var strUser = e.options[e.selectedIndex].value;
}
</script> 
```

**下拉选择**

```
<form name="size" id="size">
<select style="background-color:#CCC" name="size[]" 
id="size"  onchange="this.form.submit();getdropdownvalue();" >
<option value="">Select</option>
<option value="Small">Small</option>
<option value="Medium">Medium</option>
<option value="Large">Large</option>
<option value="XL">XL</option>
</select></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:02:23.717

您想`getdropdownvalue();`在提交表单之前运行：

`<select style="background-color:#CCC" name="size[]" id="size" onchange="getdropdownvalue();this.form.submit();" >`

要确保保留下拉值，请将表单提交到不可见的`iframe`. 这允许在不刷新页面的情况下提交表单：

```
<form target="invisible">...</form>
<iframe name="invisible" style="display: none"></iframe> 
```

# php - 将古怪的字符转换为 UTF-8 代码参考

> ID：15838419
> 
> 赞同：1
> 
> 时间：2013-04-05T16:00:05.163
> 
> 标签：php, utf-8, html-entities, htmlspecialchars, utf8-decode

我正在使用 pbkdf2()，我需要打印它的输出来调试错误。它会生成奇怪的字符串，例如“�O�BIa���!J��”。

htmlentities() 或 htmlSpecialChars() 都无法将这些字符转换为更易读的字符。

我正在考虑将它们转换为 UTF-8 实体，例如`&#28608;`，看看浏览器是否会以这种方式更好地呈现它们。如果没有，我宁愿看到他们的 UTF-8 数字而不是这些字符。

我单独尝试了 utf8_encode() 和 utf8_decode()，并与 htmlentities() 和 htmlSpecialChars() 结合使用。一点运气都没有。

知道可以做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:03:24.443

试试这个功能：

```
function convert_smart_quotes($string)
{
$string = htmlentities($string);
$string = mb_convert_encoding($string, 'HTML-ENTITIES', 'utf-8');
$string = htmlspecialchars_decode(utf8_decode(htmlentities($string, ENT_COMPAT, 'utf-8', false)));

$s = array(
    chr(145) => "'",
    chr(146) => "'",
    chr(147) => '"',
    chr(148) => '"',
    chr(151) => '-',
    's&#169;' => '©',
    '&#174;' => '®',
    '&#153;' => '™', //&trade;
    'â€œ' => '"', // left side double smart quote
    'â€' => '"', // right side double smart quote
    'â€˜' => "'", // left side single smart quote
    'â€™' => "'", // right side single smart quote
    'â€¦' => '...', // elipsis
    'â€”' => '-', // em dash
    'â€“' => '-', // en dash
);

return strtr($string, $s);
} 
```

# knockout.js - 订阅不适用于淘汰模型作为功能

> ID：15838420
> 
> 赞同：0
> 
> 时间：2013-04-05T16:00:05.073
> 
> 标签：knockout.js

我想我在这里的基础知识正在挣扎。编码：

```
var VehicleSearchViewModel = function() {

  this.VehicleVariantId = ko.observable(0);

  this.VehicleVariantId.subscribe(function (id) {
      console.log(id);
  });
}; 
```

**在此之外**的功能中，我执行以下操作：

```
VehicleSearchViewModel.VehicleVariantId = 777; 
```

...并且`console.log` **不开火**。尽管如果我`VehicleSearchViewModel.VehicleVariantId`在控制台中输入，我可以看到它已更新为新值。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:03:34.190

Knockout [observables](http://knockoutjs.com/documentation/observables.html)是**函数**。您需要通过将新值作为参数传递来设置它们。

`VehicleSearchViewModel.VehicleVariantId(777);`

您真的应该[阅读教程](http://learn.knockoutjs.com/)，您将有很多可以回答的问题。

# android - GridView getChildAt() 返回 null

> ID：15838422
> 
> 赞同：4
> 
> 时间：2013-04-05T16:00:11.310
> 
> 标签：android, gridview, view

我正在尝试从 GridView 获取视图。不幸的是，它返回`null`。

**创建（）：**

```
GridView gridview = (GridView) findViewById(R.id.gridView);
gridview.getChildAt(3).setBackgroundResource(R.drawable.list_selector_holo_light); 
```

`gridview.getChildCount()`也返回 0！

我该怎么做才能获得此视图？我知道有一个选项可以更改适配器中的背景，但我必须动态地进行。

感谢帮助！

* * *

*编辑*

**设置适配器：**

```
gridview.setAdapter(new ImageAdapter(this)); 
```

**图像适配器：**

```
public View getView(int position, View convertView, ViewGroup parent) {
    final ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T17:15:31.403

`GridView`将在第一次布局传递期间从适配器填充自身。这意味着它不会在`onCreate()`. 等待第一个布局传递的最简单方法是使用`ViewTreeObserver`（请参阅 参考资料`View.getViewTreeObserver()`）注册一个全局布局侦听器。第一次调用侦听器时，网格应包含子项。

请注意，如果您想更改 a 的其中一个孩子的背景，`GridView`您确实应该从适配器中进行。由于视图被回收，背景可能会在稍后“移动”到另一个视图。

# c# - 带有形状的 WPF 剪辑

> ID：15838426
> 
> 赞同：2
> 
> 时间：2013-04-05T16:00:12.127
> 
> 标签：c#, .net, wpf, xaml

我正在尝试以用户控件的形式创建 3..2..1 倒计时。像[这样](http://4.bp.blogspot.com/-4he5VBGRjHM/Tgc5YhrgUTI/AAAAAAAAAR4/tzPbabYtmf0/s1600/83countdown.jpg)的东西。我的想法是在彼此的顶部创建两个矩形，一个浅色和一个深色，并有一个径向圆作为深色矩形的剪裁器。径向圆将动画角度属性，因此它会转身。

我找到了一个径向圆的实现，并将矩形的 Clip 属性绑定在我的圆的 RenderedGeometry 属性上。这是结果：

![问题截图](https://i.stack.imgur.com/qJ0VX.jpg)

红色的笔划是我的理发器的形状。这似乎是剪裁的一种奇怪行为，但我有点理解它，但我想知道是否有办法解决我的剪裁对象似乎以一种奇怪的方式使用 RenderedGeometry 的事实。

**编辑 1**：我正在寻找的效果[http://www.youtube.com/watch?v=9FPHTo5V2BQ](http://www.youtube.com/watch?v=9FPHTo5V2BQ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:06:43.530

下面显示的简单派生形状控件绘制倒计时矩形。您必须设置它的`Fill`（也许还有`Stroke`）、`Width`和`Height`属性`Angle`，并且您可以在 0 到 360 之间设置动画`Angle`。

```
public class CountdownRect : Shape
{
    static CountdownRect()
    {
        WidthProperty.OverrideMetadata(typeof(CountdownRect),
            new FrameworkPropertyMetadata((o, e) => ((CountdownRect)o).UpdateGeometry()));

        HeightProperty.OverrideMetadata(typeof(CountdownRect),
            new FrameworkPropertyMetadata((o, e) => ((CountdownRect)o).UpdateGeometry()));

        StrokeLineJoinProperty.OverrideMetadata(typeof(CountdownRect),
            new FrameworkPropertyMetadata(PenLineJoin.Round));
    }

    public static readonly DependencyProperty AngleProperty =
        DependencyProperty.Register("Angle", typeof(double), typeof(CountdownRect),
            new FrameworkPropertyMetadata((o, e) => ((CountdownRect)o).UpdateGeometry()));

    public double Angle
    {
        get { return (double)GetValue(AngleProperty); }
        set { SetValue(AngleProperty, value); }
    }

    private readonly StreamGeometry geometry = new StreamGeometry();

    protected override Geometry DefiningGeometry
    {
        get { return geometry; }
    }

    private void UpdateGeometry()
    {
        if (!double.IsNaN(Width) && !double.IsNaN(Height))
        {
            var angle = ((Angle % 360d) + 360d) % 360d;
            var margin = StrokeThickness / 2d;
            var p0 = new Point(margin, margin);
            var p1 = new Point(Width - margin, margin);
            var p2 = new Point(Width - margin, Height - margin);
            var p3 = new Point(margin, Height - margin);

            using (var context = geometry.Open())
            {
                if (angle == 0d)
                {
                    context.BeginFigure(p0, true, true);
                    context.LineTo(p1, true, false);
                    context.LineTo(p2, true, false);
                    context.LineTo(p3, true, false);
                }
                else
                {
                    var x = p2.X / 2d;
                    var y = p2.Y / 2d;
                    var a = Math.Atan2(x, y) / Math.PI * 180d;
                    var t = Math.Tan(angle * Math.PI / 180d);

                    context.BeginFigure(new Point(x, y), true, true);

                    if (angle < a)
                    {
                        context.LineTo(new Point(x + y * t, p0.Y), true, false);
                        context.LineTo(p1, true, false);
                        context.LineTo(p2, true, false);
                        context.LineTo(p3, true, false);
                        context.LineTo(p0, true, false);
                    }
                    else if (angle < 180d - a)
                    {
                        context.LineTo(new Point(p2.X, y - x / t), true, false);
                        context.LineTo(p2, true, false);
                        context.LineTo(p3, true, false);
                        context.LineTo(p0, true, false);
                    }
                    else if (angle < 180d + a)
                    {
                        context.LineTo(new Point(x - y * t, p2.Y), true, false);
                        context.LineTo(p3, true, false);
                        context.LineTo(p0, true, false);
                    }
                    else if (angle < 360d - a)
                    {
                        context.LineTo(new Point(p0.X, y + x / t), true, false);
                        context.LineTo(p0, true, false);
                    }
                    else
                    {
                        context.LineTo(new Point(x + y * t, p0.Y), true, false);
                    }

                    context.LineTo(new Point(x, p0.Y), true, false);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T20:43:32.347

您可以使用剪辑`ArcSegment`中的 来剪辑矩形，并为其端点 ( )`PathGeometry`设置动画。`ArcSegment``Point`

端点可以通过动画进行`PointAnimationUsingPath`动画处理，使用与其路径相同`ArcSegment`的路径。以下是基于 Charlez Petzold 在此处的出色回答的建议：[绘制馅饼片](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/81a0a141-d02f-4713-93fc-9f2547597c7f#da644ea6-aa29-41a7-b824-16e5449d0f16)

```
<UserControl ... >

    <UserControl.Resources>
        <Point x:Key="SweepCenter" X="100" Y="100" />
        <Size x:Key="SweepRadius" Width="130" Height="130" />

        <!-- Start sweeping at twelve o'clock.. -->
        <Point x:Key="SweepStart" X="100" Y="-30" />
        <!-- ..and keep sweeping clockwise until we're (almost) back at the start point: -->
        <Point x:Key="SweepEnd" X="99.99" Y="-30" />

        <Storyboard x:Key="Sweeper" RepeatBehavior="Forever" AutoReverse="False" >

            <PointAnimationUsingPath Storyboard.TargetName="arc"
                                     Storyboard.TargetProperty="Point"
                                     Duration="0:0:5">
                <PointAnimationUsingPath.PathGeometry>
                    <PathGeometry>
                        <PathFigure StartPoint="{StaticResource SweepStart}">
                            <ArcSegment Size="{StaticResource SweepRadius}" 
                                        Point="{StaticResource SweepEnd}"
                                        SweepDirection="Clockwise"
                                        IsLargeArc="True" />
                        </PathFigure>
                    </PathGeometry>
                </PointAnimationUsingPath.PathGeometry>
            </PointAnimationUsingPath>

            <BooleanAnimationUsingKeyFrames Storyboard.TargetName="arc"
                                            Storyboard.TargetProperty="IsLargeArc" >
                <DiscreteBooleanKeyFrame KeyTime="0:0:2.5" Value="True" />
                <DiscreteBooleanKeyFrame KeyTime="0:0:5" Value="False" />
            </BooleanAnimationUsingKeyFrames>
        </Storyboard>

    </UserControl.Resources>

    <Grid Width="200" Height="200" >
        <Rectangle Fill="Black" />
        <Rectangle Fill="Gray" >
            <Rectangle.Triggers>
                <EventTrigger RoutedEvent="Loaded">
                    <BeginStoryboard Storyboard="{StaticResource Sweeper}" />
                </EventTrigger>
            </Rectangle.Triggers>
            <Rectangle.Clip>
                <PathGeometry>
                    <PathFigure StartPoint="{StaticResource SweepCenter}" 
                                IsClosed="True" >
                        <LineSegment Point="{StaticResource SweepStart}" />
                        <ArcSegment x:Name="arc"
                                    Size="{StaticResource SweepRadius}"
                                    Point="{StaticResource SweepStart}"
                                    SweepDirection="Clockwise" />
                    </PathFigure>
                </PathGeometry>
            </Rectangle.Clip>
        </Rectangle>
    </Grid>

</UserControl> 
```

# networking - 如何解析客户消息？

> ID：15838430
> 
> 赞同：2
> 
> 时间：2013-04-05T16:00:19.103
> 
> 标签：networking, wireless, xserver, tinyos, nesc

我使用客户消息并通过无线电频道发送广播，我使用此[链接](http://cs.acadiau.ca/%7Eshussain/wsn/apps/tos1/)`6`中的示例（**CounterSend ）** ） 。

当我在 mote 1 上将这个项目构建为 micAz 时，之后我在 mote 上使用 Xsniffer (TOSBase)，我将在串行 USB 板 (520) 上使用它。

之后我打开 Xsniffer 程序查看无线电数据包，它们显示如下：

![在此处输入图像描述](https://i.stack.imgur.com/teZpK.png)

另一方面，要使用我使用的 Xserver，`XMeshBase`然后在 cygwin 终端上键入：

```
xserve -device=com4 
```

我懂了！！但我不明白它收到​​了什么？

![在此处输入图像描述](https://i.stack.imgur.com/T0ATm.png)

我如何解析收到的数据？并按我的意愿命名它们？？例如：我需要第一个字节作为源？怎么做 ？

# android - 扩展 Fragment 而不是 ListFragment

> ID：15838431
> 
> 赞同：0
> 
> 时间：2013-04-05T16:00:20.350
> 
> 标签：android

我正在使用 ListFragment，但我需要使用 Fragment 来显示列表视图。我如何使用 Fragment 而不是 ListFragment 请帮助我。也给我一些解释哪个更好用。我想改用扩展片段 * 扩展 ListFragment *

```
 import java.util.ArrayList;

import android.app.Activity;
import android.app.ListFragment;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.ListView;
import android.widget.Toast;

public class CountryListFragment extends ListFragment{

    ArrayList<Video> videos;
    Activity mactivity;

    /** List of countries to be displayed in the ListFragment */

    ListFragmentItemClickListener ifaceItemClickListener;   

    /** An interface for defining the callback method */
    public interface ListFragmentItemClickListener {
        /** This method will be invoked when an item in the ListFragment is clicked */
        void onListFragmentItemClick(int position);
    }   

    /** A callback function, executed when this fragment is attached to an activity */  
    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        mactivity=activity;

        try{
            /** This statement ensures that the hosting activity implements ListFragmentItemClickListener */
            ifaceItemClickListener = (ListFragmentItemClickListener) activity;          
        }catch(Exception e){
            Toast.makeText(activity.getBaseContext(), "Exception",Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new SubTask().execute();
    }

    private class SubTask extends AsyncTask<Void, Void, ArrayList<Video>>{

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
        }

        @Override
        protected ArrayList<Video> doInBackground(Void... params) {
            //Crearte instance to http call
            GetHttpCall getCall=new GetHttpCall();
            String response=null;
            try {
                response=getCall.connect();
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            JSONParser _parser=new JSONParser();
            _parser.parseHttpJson(response);

            String [] item = JSONParser.num_title;
            int []id=JSONParser.num_id;

            videos=new ArrayList<Video>();

            for(int i=0;i<item.length;i++)
            {
                Video vid=new Video();
                vid.setTitle(item[i]);
                vid.setId(id[i]);

                videos.add(vid);
            }

            return videos;
        }

        @Override
        protected void onProgressUpdate(Void... values) {
            // TODO Auto-generated method stub
            super.onProgressUpdate(values);
        }

        @Override
        protected void onPostExecute(ArrayList<Video> result) {
            super.onPostExecute(result);
            BindDataAdapter adapter = new BindDataAdapter(mactivity, videos);
            setListAdapter(adapter);
        }
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {    
        /** Invokes the implementation of the method onListFragmentItemClick in the hosting activity */
        ifaceItemClickListener.onListFragmentItemClick(position);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:08:55.627

看看[这个](https://github.com/bauerca/drag-sort-listview)

克隆它，在您的 IDE 中创建项目并查看示例应用程序“TestBedDSLV”以及它如何使用“DSLVFragment”和 ListFragment。

# c# - 微风js - 如何刷新子实体

> ID：15838434
> 
> 赞同：0
> 
> 时间：2013-04-05T16:00:22.133
> 
> 标签：c#, javascript, .net, breeze

如何强制微风刷新子实体？

我的数据库已被其他应用程序/站点（不是微风）更新。现在我知道在 javascript 级别上，这是什么时候发生的。但我不想用所有子实体刷新洞对象/实体。我要更新的只是具有特定属性的（子）实体（如帐户-> id === '3'），但它可能是所需的实体未在本地缓存。

```
 user-entity
   -- accounts
   ----account 2
   ----account 3   <--- update this entity
   ----...... 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:42:42.777

不确定我是否理解问题。为什么不简单地对具有“accountId == 3”的子对象执行查询？这将覆盖本地缓存中具有与查询返回的实体匹配的实体键的任何现有实体。即刷新这些实体。

也许我不明白这个问题。

# javascript - 生成报告数据的有效方法

> ID：15838436
> 
> 赞同：0
> 
> 时间：2013-04-05T16:00:31.533
> 
> 标签：javascript, business-intelligence

我有一些可用的报告数据，我从 webService 中获取这些数据。数据采用 JSON 格式，格式如下：

*   Year -> Region ->Items == 有 12 个月的数据（一个简单的数组）
*   (3) -> (3) -> (10)
*   即3年，每个包含5个区域，每个区域有10个产品。

在javascript中生成此数据的各种表示形式的有效方法是什么。或 将采用何种方法来生成此类报告。

我正在使用 javascript 构建 BI 解决方案。我的应用程序为各个组件使用不同格式的数据。这些组件之间的切换不断涉及数据的再生。因此，要么我需要提前生成这些组件的数据集，要么有一种有效的方式在旅途中进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:06:30.090

> 我需要提前生成这些组件的数据集

我相信这是一种简单直接的方法；事先汇总数据并将其存储在单独的表中。

这将需要一个 cron 或某种中间进程。将检索聚合并存储在单独的表中，而不是在每个页面加载数据上使用 javascript 处理和生成报告。

然后，javascript 将只需要检索和呈现聚合表中的数据。

# c++ - C++11 延迟“线程”创建（即指定线程函数但不等待创建物理线程）

> ID：15838437
> 
> 赞同：4
> 
> 时间：2013-04-05T16:00:32.367
> 
> 标签：c++, multithreading, concurrency, c++11

我的目标是我在标题中询问我希望调用者线程在使用 std::thread ctor 和线程函数（非 void ctors）时不等待子线程被物理创建和恢复

当我在 DLL 加载期间尝试使用线程函数创建 std::thread 对象时，我的问题出现了（在 Windows 中）。这是一个问题，因为（据我所知）-线程构造函数尝试创建一个物理线程-Ctor 以某种方式（对我来说不幸）等待物理线程恢复（上线）-不幸的是，Win API 不允许线程如果它们是在该函数调用期间创建的，则在 LoadLibrary 调用中恢复。- 所以我有一个死锁：LoadLibrary 创建一个线程，它等待它恢复，Windows 不允许它恢复。

我可以为这个问题发明一些解决方案（通过有一个不使用 std::thread 的不同线程，它将构造额外的线程（std::threads），但是我错过了使用“仅”std::thread 的全部意义我的线程需要:-)）。但是，如果 std::thread 是用线程函数（或 lambda 或其他）构造的，最好告诉它不要等待物理线程恢复。有没有办法做到这一点，或者我应该去解决问题？谢谢

*   **另一个需要相同的情况** 在快速路径中，我可能会（懒惰地）创建一个 std::thread 对象，向它发布一些任务（许多任务可能），然后继续（在快速路径中）而不需要延迟！我可能不在乎何时真正创建并恢复子线程。如果不能懒惰地在这样的快速路径中或在 DllMain 等期间创建物理线程，那将是很可惜的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:13:13.370

问题不在于您创建线程的*方式*，而在于您在加载 DLL 时正在创建线程这一事实本身。虽然调用`CreateThread`可能是安全的（只要启动的线程不执行等待操作），[但在`DllMain`](http://blogs.msdn.com/b/oldnewthing/archive/2004/01/27/63401.aspx).

您应该在这里做的是导出一个初始化函数并要求加载模块在您的 DLL 加载后调用它。然后初始化函数将实例化所有需要的对象并创建所有必要的线程。

另请参阅[StackOverflow 上的问答](https://stackoverflow.com/questions/1688290/creating-a-thread-in-dllmain)。

# embedded-linux - 如何在linux中使用-wall和-werror并编译c文件

> ID：15838438
> 
> 赞同：1
> 
> 时间：2013-04-05T16:00:35.783
> 
> 标签：embedded-linux

我在我的嵌入式 linux 分配中使用 soekris 框，我必须使用 -war 和 -werror 编译我的 c 文件。任何人都可以帮助我在编译时如何使用这两个最小标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:24:00.760

只需打开终端并输入如下内容： `gcc -x c -c -Wall -Werror ./path/to/our/fency/c/file.c`？

我添加了更多标志：

```
`-x c` - tells the compiler that it's a C code.
`-c` - tells the compiler just to compile, no linking. 
```

还有你要求的：

```
`-Wall` - turns all warning reporting.
`-Werror` - tells to make all warnings into errors. 
```

`gcc --help`您可以通过检查或在[文档](http://gcc.gnu.org/onlinedocs/gcc-4.3.3/gcc/Warning-Options.html)中阅读更多关于 gcc 标志的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:20:27.010

将它们作为 CFLAGS 添加到您的 Makefile 中。

```
CFLAGS = -Wall -Werror 
```

# python - 使用 asyncore 的异步 DNS 解析器

> ID：15838440
> 
> 赞同：0
> 
> 时间：2013-04-05T16:00:40.213
> 
> 标签：python, dns, asyncore

有没有办法使用 Python 和 asyncore 进行 DNS 解析？

我无法安装 adns，也不喜欢使用 gevent 库。

（对于 URL 下载 gevent 给我的性能比 syncore.loop 慢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:51:48.333

我问谷歌你的问题，它告诉我[http://subvert-rpki.hactrn.net/trunk/rpkid/rpki/adns.py](http://subvert-rpki.hactrn.net/trunk/rpkid/rpki/adns.py)这似乎是一个基于 asyncore 的 DNS 客户端实现。所以，你有它，有一种方法。

# iphone - iphone相机显示焦点矩形

> ID：15838443
> 
> 赞同：10
> 
> 时间：2013-04-05T16:00:53.893
> 
> 标签：iphone, avcapturesession, autofocus

我正在使用基于 Apple 的 AppCam 应用程序示例的 AVCaptureSession 克隆 Apple 的相机应用程序。问题是我在视频预览屏幕中看不到焦点矩形。我使用以下代码设置焦点，但仍然没有显示焦点矩形。

```
 AVCaptureDevice *device = [[self videoInput] device];
if ([device isFocusModeSupported:focusMode] && [device focusMode] != focusMode) {
    NSError *error;

      printf(" setFocusMode    \n");
    if ([device lockForConfiguration:&error]) {
        [device setFocusMode:focusMode];
        [device unlockForConfiguration];
    } else {
        id delegate = [self delegate];
        if ([delegate respondsToSelector:@selector(acquiringDeviceLockFailedWithError:)]) {
            [delegate acquiringDeviceLockFailedWithError:error];
        }
    }    
} 
```

当我使用 UIImagePickerController 时，默认支持自动对焦，点击对焦，并且可以看到焦点矩形。有没有办法使用 AVCaptureSession 在视频预览层中显示焦点矩形？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-10T13:28:47.407

焦点动画是一个完整的自定义动画，您必须自己创建。我目前遇到和你一样的问题：我想在用户点击预览层后显示一个矩形作为反馈。

您要做的第一件事是实现点击对焦，可能是您启动预览层的位置：

```
UITapGestureRecognizer *tapGR = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapToFocus:)];
[tapGR setNumberOfTapsRequired:1];
[tapGR setNumberOfTouchesRequired:1];
[self.captureVideoPreviewView addGestureRecognizer:tapGR]; 
```

现在实现点击聚焦方法本身：

```
-(void)tapToFocus:(UITapGestureRecognizer *)singleTap{
    CGPoint touchPoint = [singleTap locationInView:self.captureVideoPreviewView];
    CGPoint convertedPoint = [self.captureVideoPreviewLayer captureDevicePointOfInterestForPoint:touchPoint];
    AVCaptureDevice *currentDevice = currentInput.device;

    if([currentDevice isFocusPointOfInterestSupported] && [currentDevice isFocusModeSupported:AVCaptureFocusModeAutoFocus]){
        NSError *error = nil;
        [currentDevice lockForConfiguration:&error];
        if(!error){
            [currentDevice setFocusPointOfInterest:convertedPoint];
            [currentDevice setFocusMode:AVCaptureFocusModeAutoFocus];
            [currentDevice unlockForConfiguration];
        }    
    }
} 
```

最后一件事，我自己还没有实现，是将聚焦动画添加到预览层，或者更确切地说是持有预览层的视图控制器。我相信这可以在 tapToFocus: 中完成。你已经有了接触点。只需添加一个动画图像视图或其他以触摸位置为中心的视图。动画完成后，移除图像视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-31T07:17:12.993

**快速实施**

手势：

```
 private func focusGesture() -> UITapGestureRecognizer {

    let tapRec: UITapGestureRecognizer = UITapGestureRecognizer(target: self, action: #selector(kTapToFocus))
    tapRec.cancelsTouchesInView = false
    tapRec.numberOfTapsRequired = 1
    tapRec.numberOfTouchesRequired = 1

    return tapRec
} 
```

行动：

```
 private func tapToFocus(gesture : UITapGestureRecognizer) {

    let touchPoint:CGPoint = gesture.locationInView(self.previewView)
    let convertedPoint:CGPoint = previewLayer!.captureDevicePointOfInterestForPoint(touchPoint)

    let currentDevice:AVCaptureDevice = videoDeviceInput!.device

    if currentDevice.focusPointOfInterestSupported && currentDevice.isFocusModeSupported(AVCaptureFocusMode.AutoFocus){
        do {
            try currentDevice.lockForConfiguration()
            currentDevice.focusPointOfInterest = convertedPoint
            currentDevice.focusMode = AVCaptureFocusMode.AutoFocus
            currentDevice.unlockForConfiguration()
        } catch {

        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T11:49:13.823

# swift3实现

```
lazy var focusGesture: UITapGestureRecognizer = {
    let instance = UITapGestureRecognizer(target: self, action: #selector(tapToFocus(_:)))
    instance.cancelsTouchesInView = false
    instance.numberOfTapsRequired = 1
    instance.numberOfTouchesRequired = 1
    return instance
}()

func tapToFocus(_ gesture: UITapGestureRecognizer) {
    guard let previewLayer = previewLayer else {
        print("Expected a previewLayer")
        return
    }
    guard let device = device else {
        print("Expected a device")
        return
    }

    let touchPoint: CGPoint = gesture.location(in: cameraView)
    let convertedPoint: CGPoint = previewLayer.captureDevicePointOfInterest(for: touchPoint)
    if device.isFocusPointOfInterestSupported && device.isFocusModeSupported(AVCaptureFocusMode.autoFocus) {
        do {
            try device.lockForConfiguration()
            device.focusPointOfInterest = convertedPoint
            device.focusMode = AVCaptureFocusMode.autoFocus
            device.unlockForConfiguration()
        } catch {
            print("unable to focus")
        }
    }
} 
```

# memory - cudaHostAllocMapped 的一致性规则

> ID：15838446
> 
> 赞同：1
> 
> 时间：2013-04-05T16:01:02.713
> 
> 标签：memory, cuda, gpgpu, consistency, mapped-memory

有谁知道有关分配给内存区域的内存一致性模型保证的文档`cudaHostAlloc(..., cudaHostAllocMapped)`？例如，当来自设备的写入对来自主机的读取变得可见时（可能是在内核完成之后，在内核执行期间的最早可能时间等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:05:24.327

在执行线程执行调用后，来自设备的写入保证在主机（或对等设备）上可见[`__threadfence_system()`](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#memory-fence-functions)（仅在计算能力 2.0 或更高版本上可用）。
它们在内核完成后也可见，即在[编程指南的“显式同步”部分中](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)`cudaDeviceSynchronize()`列出的其他同步方法之一或之后成功完成。

当使用它的内核正在或可能正在运行时，不应从主机修改映射的内存，因为 CUDA 目前不提供任何同步方式。

# javascript - AJAX 网址更新

> ID：15838447
> 
> 赞同：0
> 
> 时间：2013-04-05T16:01:13.177
> 
> 标签：javascript, html, ajax, jquery

我确定有一个简单的解决方案，但我有问题，

我有一个外部 ajax.js 文件，它有一个 AJAX 调用，如下所示：

```
$(function() {
    $.ajax({
        url: url,
        success: function( data, status ) 
```

在 AJAX 调用之上，我有两个名为ticker 和 url 的全局变量，如下所示：

```
 var ticker = 'AAPL'
 var url = 'http://blahblahblah' + ticker 
```

在我的 HTML 文件中，我有一个输入框，用户在其中输入一个股票代码（例如 GOOG），然后单击一个按钮来更新股票代码变量，以便使用新 URL 再次完成 AJAX 调用。

```
 <form id="form">
            <h3>Enter the ticker symbol of the company you wish to view:</h3>
            <input type="text" id="userInput">
            <button onclick="myFunction()">Try it</button>
        </form>

        <script type="text/javascript" src="ajax.js">
        <script>
        function myFunction()
        {
                //old value
                alert(ticker);

                ticker = document.getElementById('userInput').value;

                //new value
                alert(ticker);
        }
        </script> 
```

此代码更改了ticker 变量，但AJAX 调用仍在使用旧的ticker url 执行。我认为它没有被正确分配？我对 AJAX 很陌生，但我在网上找不到任何解释这个问题的教程。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:15:29.060

字符串在 Javascript 中是不可变的，这意味着 url 将保持不变，即使您更改代码。改为这样做：

```
$(function() {
    $.ajax({
        url: "http:/blah" + ticker,
        success: function(data, status) {}
    });
}); 
```

编辑：现在我考虑一下，它与字符串不可变无关。Doing`url = "http:/" + ticker`不会创建一个值为 的闭包`ticker`，它只是创建一个新的字符串值并将其存储在`url`. 创建新值后，它不会以`ticker`任何方式链接到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:22:10.407

据我从您发布的代码中可以看出，您的 ajax 例程仅在页面加载时被调用，这解释了为什么结果中只显示默认 url/ticker。

您需要将 ajax 例程包装在一个函数中，并在用户输入符号后调用它：

在您的 ajax.js 文件中：

```
function getSymbolInfo(ticker) { // consider passing ticker to this function instead of using a global var
    $.ajax({
        url: url + ticker,
        success: function( data, status ) {
           // show results
        }
    });
} 
```

并来自 MyFunction：

```
function myFunction()
{
    var ticker = document.getElementById('userInput').value;
    getSymbolInfo(ticker);

} 
```

# c++ - C++ 分配的奇怪减速

> ID：15838449
> 
> 赞同：9
> 
> 时间：2013-04-05T16:01:21.457
> 
> 标签：c++, memory, allocation, memory-fragmentation

有人可以告诉我为什么会发生以下事情：

我有两台电脑：

1.  我的工作补偿
2.  服务器

我维护的 C++ 程序（msvc 2005 c++ 编译）仅在服务器上运行太慢，但在我的计算机上却没有。

我进行了测量（GetThreadTimes 等），可以肯定地说狭窄的地方 - 它的内存分配（new/malloc）。它只发生在服务器上！

我可以声称它是由于内存碎片造成的，因为程序的第一次服务器实例工作正常，只有在数据重新加载到内存（1-150 万分配/释放）之后，它才开始在分配上失去时间。

如果由于两台计算机（我的计算机和服务器）上的内存碎片而看到相同的行为，我不会感到如此惊讶，但我看到的是：1）。在我的补偿分配上花费约 5% 的时间（不准确，但类似）2）。在服务器上，这些分配需要大约 75% 的时间

这怎么可能发生？什么可能会减慢服务器计算机上的 C++ 分配，同时对我的工作站来说还可以。哪里可能有区别？可能它与操作系统级内存管理功能有关？因为 C++ 级别管理器在这两种情况下都是一样的。

这是两种配置：

1）。我的电脑（allocs 占用约 5%）：

```
OS Name:                   Microsoft Windows 7 Enterprise 
OS Version:                6.1.7600 N/A Build 7600
OS Manufacturer:           Microsoft Corporation
OS Configuration:          Member Workstation
OS Build Type:             Multiprocessor Free
Registered Owner:          Windows User
Original Install Date:     16/09/2011, 19:37:43
System Boot Time:          05/04/2013, 11:58:11
System Model:              7304A58
System Type:               x64-based PC
Processor(s):              1 Processor(s) Installed.
                           [01]: Intel64 Family 6 Model 23 Stepping 10 GenuineIntel ~2642 Mhz
Windows Directory:         C:\Windows
System Directory:          C:\Windows\system32
Boot Device:               \Device\HarddiskVolume2
System Locale:             ru;Russian
Input Locale:              en-us;English (United States)
Total Physical Memory:     4,061 MB
Available Physical Memory: 872 MB
Virtual Memory: Max Size:  8,121 MB
Virtual Memory: Available: 4,579 MB
Virtual Memory: In Use:    3,542 MB
Page File Location(s):     C:\pagefile.sys 
```

2）。服务器（allocs 占 ~75%）：

```
OS Name:                   Microsoft(R) Windows(R) Server 2003, Enterprise Edition
OS Version:                5.2.3790 Service Pack 2 Build 3790
OS Manufacturer:           Microsoft Corporation
OS Configuration:          Member Server
OS Build Type:             Multiprocessor Free
Original Install Date:     11/12/2008, 01:22:57
System Up Time:            1 Days, 8 Hours, 35 Minutes, 52 Seconds
System Manufacturer:       HP
System Model:              ProLiant BL685c G5  
System Type:               X86-based PC
Processor(s):              4 Processor(s) Installed.
                           [01]: x86 Family 16 Model 2 Stepping 3 AuthenticAMD ~2210 Mhz
                           [02]: x86 Family 16 Model 2 Stepping 3 AuthenticAMD ~2210 Mhz
                           [03]: x86 Family 16 Model 2 Stepping 3 AuthenticAMD ~2210 Mhz
                           [04]: x86 Family 16 Model 2 Stepping 3 AuthenticAMD ~2210 Mhz
Windows Directory:         C:\WINNT
System Directory:          C:\WINNT\system32
Boot Device:               \Device\HarddiskVolume1
Total Physical Memory:     65,534 MB
Available Physical Memory: 61,284 MB
Page File: Max Size:       97,696 MB
Page File: Available:      93,445 MB
Page File: In Use:         4,251 MB
Page File Location(s):     C:\pagefile.sys
                           D:\pagefile1\pagefile.sys
                           D:\pagefile2\pagefile.sys
                           D:\pagefile3\pagefile.sys
                           D:\pagefile4\pagefile.sys
                           D:\pagefile5\pagefile.sys
                           D:\pagefile6\pagefile.sys
                           D:\pagefile7\pagefile.sys 
```

将不胜感激澄清这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T16:14:58.393

问题可能是内存函数只使用一个互斥锁来锁定内存以进行分配和释放。

# iphone - 在rubymotion中按下按钮后如何启动NavigationController

> ID：15838451
> 
> 赞同：1
> 
> 时间：2013-04-05T16:01:25.503
> 
> 标签：iphone, ios, objective-c, rubymotion

我第一次在 RubyMotion 中尝试一个简单的应用程序。我只是希望能够单击一个按钮，然后启动一个`UINavigationController`

步骤： - 用户按下按钮 - 屏幕向左移动并开始新的导航

如果我从第一个视图本身开始导航，我可以做到这一点，但我希望能够在按钮按下时启动它。

这是我到目前为止所拥有的

**应用委托：**

```
#below commented line starts the navigation from the first view
#navController = UINavigationController.alloc.initWithRootViewController(HomeController.alloc.init)
@window.rootViewController = HomeController.alloc.init
true 
```

**家庭控制器：**

```
 def viewDidLoad
    self.title = "ONE"
    button = UIButton.buttonWithType(UIButtonTypeRoundedRect)
    button.frame = [[15,300], [280,50]]
    button.setTitle("Move to next view", forState: UIControlStateNormal)
    button.addTarget(self, 
                     action: "startNavigationOne:",
                     forControlEvents: UIControlEventTouchUpInside)

    view.addSubview(button)
  end

  def startNavigationOne (sender)
   #what can I do here to start the navigation? 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:21:38.817

在 appDelegate.m 文件中使用以下 3 个步骤创建基于导航的应用程序

第一步：首先创建一个RootViewController

```
ViewController *rootViewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

第 2 步：使用 RootviewController 创建导航控制器

```
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController]; 
```

第 3 步：将 Navigation Controller 添加到 Window 的 Root ViewController

```
self.window.rootViewController = self.navController; 
```

现在导航按钮点击写这个

创建您想要推送/导航的 viewController 对象

```
ViewController *startNavigationOne = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

使用导航控制器推送该视图

```
[self.navController pushViewController:startNavigationOne animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T05:06:00.653

尚未测试此代码并从内存中写入，但它应该可以工作。

```
def startNavigationOne (sender)
  # Create your next controller and its navigation controller
  next_controller = UIViewController.alloc.initWithNibname(nil, bundle: nil)
  nav = UINavigationController.alloc.initWithRootViewController(next_controller)

  # Now set it as the root view controller
  UIApplication.sharedApplication.delegate.window.rootViewController = nav

  # The current UIViewController will be deallocated when this method exits
end 
```

# java - “无法从元素类型 Object 转换为 WifiConfiguration”

> ID：15838453
> 
> 赞同：1
> 
> 时间：2013-04-05T16:01:36.527
> 
> 标签：java, android, wifi, nfc

问题：

类型不匹配：无法从元素类型 Object 转换为 WifiConfiguration 第 124 行

问题位置第 124 行：`for( WifiConfiguration i : list ) {`

源代码：

```
import java.util.List;

import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.nfc.NdefMessage;
import android.nfc.NfcAdapter;
import android.os.Bundle;
import android.os.Parcelable;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Connect2 extends Activity {
private EditText wifiname;
private String password;
private  NfcAdapter mAdapter;
private  PendingIntent mPendingIntent;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.connect2);

        mAdapter = NfcAdapter.getDefaultAdapter(this);
        // Create a generic PendingIntent that will be deliver to this activity.
        // The NFC stack
        // will fill in the intent with the details of the discovered tag before
        // delivering to
        // this activity.
        mPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,
                getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

        // Setup an intent filter for all MIME based dispatches
        IntentFilter ndef = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);

        WifiManager wifiMgr = (WifiManager)getSystemService(Context.WIFI_SERVICE);
        WifiInfo wifiInfo = wifiMgr.getConnectionInfo();
        String connectionName = wifiInfo.getSSID();

        TextView tv=(TextView)findViewById(R.id.wifiname);
        if(connectionName==null){
            tv.setText("You are not connected  ");
        }else{

            tv.setText("You are connected to: "+connectionName+"   ");
        }

        Button close=(Button)findViewById(R.id.close);
        close.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
                System.exit(0);
            }
        });

    }
    @Override
    public void onResume(){
        super.onResume();

        if(NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())||NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())){
            processReadIntent(getIntent());
        }
    }
    @Override
    public void onNewIntent(Intent intent){
        setIntent(intent);
    }
    public void processReadIntent(Intent intent){
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                NfcAdapter.EXTRA_NDEF_MESSAGES);

        // only one message sent during the beam
        NdefMessage msg = (NdefMessage) rawMsgs[0];

        // record 0 contains the MIME type, record 1 is the AAR, if present
        Log.d("msg", msg.getRecords()[0].getPayload().toString());

        byte[]payload=msg.getRecords()[0].getPayload();
        String msgtext=null;
        try{

        //Get the Text Encoding
        String textEncoding = ((payload[0] & 0200) == 0) ? "UTF-8" : "UTF-16";

        //Get the Language Code
        int languageCodeLength = payload[0] & 0077;
        String languageCode = new String(payload, 1, languageCodeLength, "US-ASCII");

        //Get the Text
        msgtext = new String(payload, languageCodeLength + 1, payload.length - languageCodeLength - 1, textEncoding);
        }catch(Exception e){

        }

        // splitting the message by comma. The first part is the name and 2nd part is the password.
        String[]tagdata=msgtext.split(",");

        String networkSSID = tagdata[0].toString();
        String networkPass = tagdata[1].toString();

        WifiConfiguration conf = new WifiConfiguration();
        conf.SSID = "\"" + networkSSID + "\"";   // Please note the quotes. String should contain ssid in quotes

        conf.preSharedKey = "\""+ networkPass +"\"";
        WifiManager wifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE); 
        wifiManager.addNetwork(conf);

        List list = wifiManager.getConfiguredNetworks();
        for( WifiConfiguration i : list ) {
            if(i.SSID != null && i.SSID.equals("\"" + networkSSID + "\"")) {
                 wifiManager.disconnect();
                 wifiManager.enableNetwork(i.networkId, true);
                 wifiManager.reconnect();               
                 break;
            }           
         }

        TextView wifiname=(TextView)findViewById(R.id.wifiname);
        wifiname.setText("You are now connected to"+networkSSID +"   ");

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:03:03.763

```
List list = wifiManager.getConfiguredNetworks(); 
```

应该：

```
List<WifiConfiguration> list = wifiManager.getConfiguredNetworks(); 
```

请参阅[`WifiManager#getConfiguredNetworks()`的 JavaDoc](http://developer.android.com/reference/android/net/wifi/WifiManager.html#getConfiguredNetworks%28%29)。

* * *

错误是因为`List`是一个不知道其元素类型的原始类型，所以它假定它是 type `Object`。当将列表声明为 时`List<WifiConfiguration>`，这将保证在编译时添加到列表中的任何元素都必须是 类型`WifiConfiguration`。

# javascript - 匹配不是函数 - 错误

> ID：15838454
> 
> 赞同：0
> 
> 时间：2013-04-05T16:01:36.677
> 
> 标签：javascript, jquery

我只是想测试我的对象的模式和输出，但控制台给了我一个错误，说 match 不是一个函数，而[w3School](http://www.w3schools.com/jsref/jsref_match.asp)说它是一个 javascript 函数

```
var templateRegex = '/\${([\S\s]*?)\}/g';

    var getTextNodesIn = function(el) {
            return $(el).find("*").addBack().contents().filter(function() {
                return this.nodeType == 3 ;
            });
        };

        var textNodes = getTextNodesIn('#'+currentId);

        console.log(textNodes.length);
        for(var i=0; i<textNodes.length; i++) {
            console.log(textNodes[i]);
            if(textNodes[i].match(templateRegex)) {
                console.log(textNodes[i]);
            }
        } 
```

请帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:11:50.020

看起来您正在尝试将 RegExp 与节点匹配；match 是一个字符串方法，而不是 HTMLElement 方法。

请注意，jQuery 的`contents()`方法返回文本节点，而不是字符串。您可能想使用`text()`or`html()`代替（只是一目了然地检查 jQuery 的 API ref，我不是 jQuery 专家）。

# ios - 从 NSMutableDictionary 生成 JSON

> ID：15838458
> 
> 赞同：0
> 
> 时间：2013-04-05T16:01:43.840
> 
> 标签：ios, nsmutabledictionary

我是 Objective-C 和 iOS 开发的新手，正在尝试编写一种生成 JSON 字符串的方法，但是当我 NSLog 时，我得到一堆十六进制代码（我猜它们是指针地址）有人可以看看这个方法并告诉我做错了什么..

```
 -(NSData *)generateInputJSON
{

    NSError* error = nil;

    NSString* region = [[NSLocale currentLocale]localeIdentifier];

    NSString* language = [[NSLocale preferredLanguages]objectAtIndex:0];

    NSMutableDictionary* properties = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                              _sphereODNumber,@"sphereOD",
                              _sphereOSNumber,@"sphereOS",
                              _cylinderODNumber,@"cylinderOD",
                              _cylinderOSNumber,@"cylinderOS",
                              _visionCorrection,@"visionCorrection",
                                       region,@"region",
                                       language,@"language",
                              nil];

    if([_visionCorrection isEqualToString:@"multiFocal"] ||
       [_visionCorrection isEqualToString: @"progressive"])
    {
        [properties setValue:_addODNumber forKey:@"addOD"];
        [properties setValue:_addOSNumber forKey:@"addOS"];
    }

    if([_visionCorrection isEqualToString: @"progressive"])
    {
        [properties setValue:_fittingHeightNumber forKeyPath:@"fittingHeight"];
    }

    NSData* inputJSON = [NSJSONSerialization dataWithJSONObject:properties options:NSJSONWritingPrettyPrinted error:&error];

    return inputJSON;
} 
```

我的日志返回：

<7b0a2020 226c616e 67756167 6522203a 2022656e 222c0a20 20227669 73696f6e 436f7272 65637469 6f6e2220 3a202270 726f6772 65737369 7665222c 0a202022 6164644f 4422203a 20342e35 2c0a2020 22616464 4f532220 3a20342e 352c0a20 20227370 68657265 4f532220 3a20342e 352c0a20 20227265 67696f6e 22203a20 22656e5f 5553222c 0a202022 63796c69 6e646572 4f532220 3a20342e 352c0a20 20226669 7474696e 67486569 67687422 203a2031 372c0a20 20227370 68657265 4f442220 3a20342e 352c0a20 20226379 6c696e64 65724f44 22203a20 342e350a 7d>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:07:01.333

将数据转换成`NSString`这样

```
NSString *string = [[NSString alloc]initWithData:inputJSON encoding:NSUTF8StringEncoding]; 
```

然后用 NSLog 打印出来

```
NSLog(@"%@", string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:07:41.773

您看到的是对 NSData 对象的描述，它只是十六进制数据中的字节。如果您要（比如说）将该数据写入文件并使用文本编辑器打开文件，您实际上会看到您想要的字符串。由于您想从函数中返回一个字符串，您可以将 NSData 转换为一个字符串，如下所示：

```
return [[NSString alloc] initWithData:inputJSON encoding:NSUTF8StringEncoding]; 
```

如果您使用的是非 ARC 代码，请记住自动释放。如果要返回字符串，还应该将方法的`NSData*`返回类型从更改为。`NSString*`

# javascript - Kendo UI KendoTreeView HierarchicalDataSource 不显示节点

> ID：15838459
> 
> 赞同：0
> 
> 时间：2013-04-05T16:01:45.353
> 
> 标签：javascript, html, model-view-controller, kendo-ui

我的 Kendo UI TreeView 没有将返回的 JSON 对象添加到树视图中。

我可以从被调用的控制器方法中看到，提供给 DataSource 的 Json 看起来像这样（但有更多的文件和文件夹）

`{"NodeID":-842352767, "Name":"/", "Folders":[{"NodeID":1804712307,"Name":"/$Recycle.Bin","Folders":null,"Files":null},{"NodeID":-582712839,"Name":"/Windows","Folders":null,"Files":null}], "Files":["/.rnd","/msdia80.dll"]}`

我的看法如下：

```
@model ProjName.Models.BrowseNode

<div id ="wrapper">
<h1>Browser</h1>
<div id="treeview" style="float:left;margin: 40px;">
</div>
</div>
<script>
function populateTreeView() {
    var remoteDataSource = new kendo.data.HierarchicalDataSource({
        type: "json",
        transport: {
            read: "FileBrowser/GetHierarchy"
        },
        schema: {
            model: {
                id: "NodeID",
                text: "Name",
                expanded: false,
                children: "Folders",
            },
        }
    });

    $("#treeview").kendoTreeView({
        dataSource: remoteDataSource,
        dataTextField: "Name"
    });
}

$(document).ready(function () {
    populateTreeView();
}); 
```

BrowseNode 定义为：

```
public class BrowseNode
{
    public int NodeID { 
        get
        {
            if (null == Name)
                return default(int);
            return Name.GetHashCode();   
        }
    }
    public string Name { get; set; }
    public List<BrowseNode> Folders { get; set; }
    public List<string> Files { get; set; }
} 
```

有什么明显错误或调试这类事情的任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T10:52:56.840

原来我的 JSON 不是 DataSource 想要的。它应该是在顶层返回的数组，因此 JSON 被 [ ] 括号包围，如下所示：

`[{"NodeID":-842352767, "Name":"/", "Folders":[{"NodeID":1804712307,"Name":"/$Recycle.Bin","Folders":null,"Files":null},{"NodeID":-582712839,"Name":"/Windows","Folders":null,"Files":null}], "Files":["/.rnd","/msdia80.dll"]}]`

# c# - 字典不一致的可访问性

> ID：15838470
> 
> 赞同：0
> 
> 时间：2013-04-05T16:02:23.093
> 
> 标签：c#, dictionary, static, public

第一次提到单词表时，我在下面的代码中出现错误。我需要该字典可供所有班级使用。

错误内容如下：

> 错误 1 ​​可访问性不一致：字段类型“System.Collections.Generic.Dictionary”的可访问性低于字段“RiskRatingReevaluation.RiskRatingLogic.tables”C:\Users\jholland\Documents\Visual Studio 2012\Projects\RiskRatingReevaluation\RiskRatingReevaluation\RiskRatingLogic.cs 13 49 风险评级重新评估

```
public static class RiskRatingLogic
{

    public static Dictionary<string, Table> tables;

    public static void Main()
    {

        tables = new Dictionary<string, Table>();
        ImportRegionIndexes(tables); 
```

关于改变什么的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:04:14.193

听起来您的 Table 课程不是`public`。错误就像它听起来的那样，一个类比调用它的类更难访问（公共、内部、私有、受保护）

查看[可访问性级别](http://msdn.microsoft.com/en-us/library/ba0a1yw2.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-25T05:53:29.537

正如 Justin Pihony 所建议的那样，更改类访问修饰符应该可以解决问题。我也面临同样的问题。

# css - iOS5上的双倍文本

> ID：15838472
> 
> 赞同：0
> 
> 时间：2013-04-05T16:02:28.820
> 
> 标签：css, ios5

我正在开发一个响应式网站。在运行 iOS5 的设备上查看后，我注意到我所有的 h2 标签似乎显示了两次，一个在另一个之上。我在装有 iOS6 的设备上检查了它，它看起来更好，但在 iOS5 上却没有。但是，当我将 h2 标签更改为 span（将它们更改为 display: inline-block）时，它似乎也可以正常工作。

我没有对我的 HTML 或 CSS 做任何看似不寻常的事情，而且我也没有在文档中的任何地方使用 z-index，所以有人知道发生了什么吗？

```
 <h2>Hello</h2>

 h2 {
display: block;
font-family: "Segoe UI Light";
font-size: 36px;
color: #C41230;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:14:31.870

似乎您的问题可能是字体重量渲染错误。它可能继承了大胆的样式。请参阅[此 SO 帖子](https://stackoverflow.com/questions/5069752/ios-4-2-webfont-ttf-s-bold-font-weight-rendering-bug)。您可以尝试将字体粗细设置为正常的`h1`,`h2`等。

# hash - Typo3 登录密码哈希

> ID：15838476
> 
> 赞同：0
> 
> 时间：2013-04-05T16:02:35.860
> 
> 标签：hash, passwords, rsa, typo3

如何在 php 中手动构建 Typo3 登录的 rsa 哈希？我需要创建一个只访问每个站点的蜘蛛脚本，问题是我必须登录。所以我想我是通过 CURL 登录的。但是后来我看到了这个密码的 rsa 哈希，现在我不知道如何将像“blablabla”这样的密码转换成这样的 rsa 哈希。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:00:44.233

您可能会在此处从自动登录扩展中找到一些帮助：[http ://typo3.org/extensions/repository/?id=23&L=0&q=auto+login](http://typo3.org/extensions/repository/?id=23&L=0&q=auto+login)

或调试`tx_rsaauth_sv1::authUser`。在那里调用了一个 RSA 解密函数。但是我现在没有时间真正深入研究它。

* * *

另一种解决方案是登录一次并保存 cookie。然后将这些 cookie 与您的 CURL 请求一起发送。

要使 cookie 的有效期更长，您可以在登录前临时更改后端会话超时设置。像这样：

```
$TYPO3_CONF_VARS['BE']['sessionTimeout'] = strtotime('+1 year')-time(); 
```

`typo3conf/localconf.php`您可以在(Typo3 < 6) 或 `typo3conf/AdditionalConfiguration.php`(Typo3 6+)中添加/更改此行。

# ruby-on-rails - Rails 将日期范围保存到数据库

> ID：15838477
> 
> 赞同：2
> 
> 时间：2013-04-05T16:02:36.080
> 
> 标签：ruby-on-rails

我有一个表单字段，它以“05/14/2013 - 05/22/2013”​​格式发布日期范围。我的模型有两个单独的日期字段，`begin`分别`end`用于表单字段的开始日期和结束日期。将日期范围放入正确字段的最佳 MVC 方法是什么？

我一直在尝试手动解构控制器`create`方法中的日期范围，但在创建记录之前，模型中似乎没有正确看到更新的参数。

编辑：日期范围以这种格式出现，因为我使用的是 Keith Wood 的 datepick，它在单个输入字段中输出日期。

我目前一直在尝试做的是（`contract`是我的模型的名称，并且`dates`是输入日期范围：
`beginDate = params[:dates].split("-")[0].strip()
endDate = params[:dates].split("-")[1].strip()
params.delete :dates
params[:contract][:begin] = Date.strptime(beginDate, '%m/%d/%Y')
params[:contract][:end] = Date.strptime(endDate, '%m/%d/%Y')
@contract = Contract.new(params[:contract])`

...但是这些对参数的更改不会在创建和验证记录时出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:21:29.160

在您的模型上定义一个设置器，它获取字段，拆分它，并将每个部分放入适当的字段中。

```
def date_range=(val)
  begin_str, end_str = val.split(' - ')
  self.begin_at = Date.parse(begin_str)
  self.end_at = Date.parse(end_str)
end 
```

这将在直接调用或从质量分配方法（例如`update_attributes`or ）调用时起作用`create`。如果您已经在模型中定义了这个，请确保添加`date_range`（或相关的参数名称） 。`attr_accessible`

我已经更改了示例中的字段名称，`begin`并且`end`应该避免作为字段名称，因为一个是方法，另一个是 ruby​​ 语法的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:28:31.653

您可以使用虚拟属性将日期范围文本转换为模型级别的单个日期。在模型中添加如下的 setter 和 getter，

```
def date_range_text
   return "#{start_date.to_s} - #{end_date.to_s}"
end
def date_range_text= val
  start_date_text,end_date_text = val.split[" - "]
  start_date = Time.zone.parse(start_date_text) unless start_date_text.nil?
  end_date = Time.zone.parse(end_date_text) unless end_date_text.nil?
end 
```

并在您的表单中使用 data_range_text。有关我的信息，请查看下面的 railscast。

[http://railscasts.com/episodes/16-virtual-attributes-revised](http://railscasts.com/episodes/16-virtual-attributes-revised)

这是处理数据库结构和用户输入表单之间差异的最佳方式。

# php - Symfony2 - 缓存文件中的相对路径

> ID：15838479
> 
> 赞同：2
> 
> 时间：2013-04-05T16:02:42.580
> 
> 标签：php, symfony, caching, path, relative-path

我与 Symfony2 一起工作。我想在将它们放在服务器（不是同一台机器）之前准备缓存文件。

问题出在内容文件中，因为其中一些包含资源的绝对路径，例如：

```
file: ./dev/classes.php.meta , 
file: ./dev/templates.php,
file: ./dev/assetic/routing.yml

'WebProfilerBundle:Profiler:toolbar_item.html.twig' => '/var/www/symfony/vendor/symfony/symfony/src/Symfony/Bundle/WebProfilerBundle/Resources/views/Profiler/toolbar_item.html.twig', 
```

有什么办法可以将其更改为**相对**路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T14:27:45.407

运行时[`TemplatePathsCacheWarmer`](https://github.com/symfony/symfony/blob/2.7/src/Symfony/Bundle/FrameworkBundle/CacheWarmer/TemplatePathsCacheWarmer.php)，它被配置为使用`kernel.cache_dir`. 如果您知道已安装应用程序的路径，则可以通过运行`cache:warmup` [环境变量来替换参数](http://symfony.com/doc/current/cookbook/configuration/external_parameters.html)来覆盖它：

```
SYMFONY__kernel__cache_dir=/srv/myapp/app/cache php app/console cache:warmup 
```

我在这里尝试使用相对路径的成功有限（可以传入`"../"`，但我不是 100% 确定模板是相对于什么的）。当您有可变的应用程序目录路径（例如带时间戳的发布文件夹）时，这会变得很棘手。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T16:07:31.907

最好的方法是使用`warmup`缓存命令中的进程。
只需运行命令以清除缓存而不传递`no-warmup`选项：

```
php app/console cache:clear --env=prod --no-debug 
```

如果使用该`no-warmup`选项或手动删除`cache`文件夹内容，则需要运行`warmup`命令：

```
php app/console cache:warmup --env=prod 
```

[http://symfony.com/doc/master/cookbook/deployment-tools.html#c-clear-your-symfony-cache](http://symfony.com/doc/master/cookbook/deployment-tools.html#c-clear-your-symfony-cache)

# javascript - 多个 HTML 文件仅链接到一个 Javascript 文件

> ID：15838481
> 
> 赞同：1
> 
> 时间：2013-04-05T16:02:50.760
> 
> 标签：javascript, html

我想在外部 Javascript 文件中有函数链接到我的每个 html 文件。但是，我希望将某些函数链接到一个 html 文件，而将其他函数链接到另一个 html 文件。我需要有多个 Javascript 文件还是可以将它们压缩成一个文件？当我尝试使用一个 Javascript 文件时，每个函数都会在我的每个页面上运行。有没有办法在没有整个代码的情况下调用 html 中的特定函数？就像 css 使用html`#example`中的 id一样。`example`

我在 index.html 文件中使用了这个链接：

`<script type="text/javascript" src="example.js"></script>`

虽然这个在另一个 html 文件中：

`<script type="text/javascript" src="example2.js"></script>`

这些链接是我的 html 文件中包含的唯一 Javascript。

我不确定是否需要额外的 Javascript 或 html 代码示例，因为这似乎是一个普遍问题。虽然，如果需要更多代码，请告诉我具体是什么，我很乐意添加它。我也是编码新手，所以如果你能在投票之前问一下，我将不胜感激。

我想我找到了问题所在。我有一个来自免费网站的 RSS 提要，但该功能旁边没有任何内容。

html 文件链接到其中包含此内容的 Javascript 文件，并且由于该函数为空白，它会自动运行，或者这就是我的假设。

```
(function(){
var a=window;
var b="";
for(i=0;i<a.rssfeed_url.length;i++) {
    b=b+"rssfeed[url]["+i+"]="+encodeURIComponent(a.rssfeed_url[i])+"&"
}
var c="http://feed.surfing-waves.com/php/rssfeed.php"+"?"+b+"rssfeed[type]="+(a.rssfeed_type?a.rssfeed_type:"")+"&rssfeed[frame_width]="+a.rssfeed_frame_width+"&rssfeed[frame_height]="+a.rssfeed_frame_height+"&rssfeed[scroll]="+(a.rssfeed_scroll?a.rssfeed_scroll:"")+"&rssfeed[scroll_step]="+(a.rssfeed_scroll_step?a.rssfeed_scroll_step:"")+"&rssfeed[scroll_bar]="+(a.rssfeed_scroll_bar?a.rssfeed_scroll_bar:"")+"&rssfeed[target]="+(a.rssfeed_target?a.rssfeed_target:"")+"&rssfeed[font_size]="+(a.rssfeed_font_size?a.rssfeed_font_size:"")+"&rssfeed[font_face]="+(a.rssfeed_font_face?a.rssfeed_font_face:"")+"&rssfeed[border]="+(a.rssfeed_border?a.rssfeed_border:"")+"&rssfeed[css_url]="+(a.rssfeed_css_url?encodeURIComponent(a.rssfeed_css_url):"")+"&rssfeed[title]="+(a.rssfeed_title?a.rssfeed_title:"")+"&rssfeed[title_name]="+(a.rssfeed_title_name?a.rssfeed_title_name:"")+"&rssfeed[title_bgcolor]="+(a.rssfeed_title_bgcolor?encodeURIComponent(a.rssfeed_title_bgcolor):"")+"&rssfeed[title_color]="+(a.rssfeed_title_color?encodeURIComponent(a.rssfeed_title_color):"")+"&rssfeed[title_bgimage]="+(a.rssfeed_title_bgimage?encodeURIComponent(a.rssfeed_title_bgimage):"")+"&rssfeed[footer]="+(a.rssfeed_footer?a.rssfeed_footer:"")+"&rssfeed[footer_name]="+(a.rssfeed_footer_name?a.rssfeed_footer_name:"")+"&rssfeed[footer_bgcolor]="+(a.rssfeed_footer_bgcolor?encodeURIComponent(a.rssfeed_footer_bgcolor):"")+"&rssfeed[footer_color]="+(a.rssfeed_footer_color?encodeURIComponent(a.rssfeed_footer_color):"")+"&rssfeed[footer_bgimage]="+(a.rssfeed_footer_bgimage?encodeURIComponent(a.rssfeed_footer_bgimage):"")+"&rssfeed[item_bgcolor]="+(a.rssfeed_item_bgcolor?encodeURIComponent(a.rssfeed_item_bgcolor):"")+"&rssfeed[item_bgimage]="+(a.rssfeed_item_bgimage?encodeURIComponent(a.rssfeed_item_bgimage):"")+"&rssfeed[item_title_length]="+(a.rssfeed_item_title_length?a.rssfeed_item_title_length:"")+"&rssfeed[item_title_color]="+(a.rssfeed_item_title_color?encodeURIComponent(a.rssfeed_item_title_color):"")+"&rssfeed[item_border_bottom]="+(a.rssfeed_item_border_bottom?a.rssfeed_item_border_bottom:"")+"&rssfeed[item_source_icon]="+(a.rssfeed_item_source_icon?a.rssfeed_item_source_icon:"")+"&rssfeed[item_date]="+(a.rssfeed_item_date?a.rssfeed_item_date:"")+"&rssfeed[item_description]="+(a.rssfeed_item_description?a.rssfeed_item_description:"")+"&rssfeed[item_description_length]="+(a.rssfeed_item_description_length?a.rssfeed_item_description_length:"")+"&rssfeed[item_description_color]="+(a.rssfeed_item_description_color?encodeURIComponent(a.rssfeed_item_description_color):"")+"&rssfeed[item_description_link_color]="+(a.rssfeed_item_description_link_color?encodeURIComponent(a.rssfeed_item_description_link_color):"")+"&rssfeed[item_description_tag]="+(a.rssfeed_item_description_tag?a.rssfeed_item_description_tag:"")+"&rssfeed[no_items]="+(a.rssfeed_no_items?a.rssfeed_no_items:"")+"&rssfeed[cache]="+(a.rssfeed_cache?a.rssfeed_cache:"");
if(a.rssfeed_border!="off"&&!a.rssfeed_css_url){}
document.write('<iframe name="rssfeed_frame" width="'+a.rssfeed_frame_width+'" height="'+a.rssfeed_frame_height+'" frameborder="0" src="'+c+'" marginwidth="0" marginheight="0" vspace="0" hspace="0" scrolling="no" ALLOWTRANSPARENCY="true"></iframe>')
})() 
```

现在唯一的问题是我不知道如何调用该函数。我有另一个函数被调用，因为我有`onClick="example()"`这很好，但 RSS 提要需要自动加载。我不想点击按钮来显示提要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:06:27.437

函数只有在你调用它们时才会运行。因此，您可以拥有一个 JS 文件，其中包含一个 HTML 文件永远不会调用的函数，并且不会出错——它们对页面的功能没有影响。额外未使用代码的唯一缺点是加载时间更长，但在文件变得非常大之前，这并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:07:20.850

您可以拥有一个名为“common.js”的文件，其中包含所有相关的 JavaScript 功能。但是您将需要单独的 JavaScript（在单独的文件中或嵌入在 HTML 页面本身中）以根据不同页面的需要具体使用通用功能。

看到一些代码后，也许可以提供更好的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T16:08:44.817

在适当的地方将您的 javascript 代码拆分为多个文件更合乎逻辑。但是，如果您将代码放入函数中，即使它链接到您的 html 页面，您也不必在您的 javascript 文件中运行任何代码。

```
function myFunction()
{
    // do something.
} 
```

除非您在 html 中调用它，否则此函数中的代码不会运行。

```
<body onload="myFunction()">
  ...
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T16:07:56.177

我认为您可以通过将 id 或 class 添加到 html 或 body 来做到这一点，然后编写条件，如果元素（html 或 body）包含 id/class 执行适当的功能。什么时候调用函数？在页面加载？如果您提供示例代码，那就更好了。

# c# - 多种字体样式

> ID：15838485
> 
> 赞同：-1
> 
> 时间：2013-04-05T16:03:11.917
> 
> 标签：c#, fonts

`Fontstyle.Bold`是否可以使用and务实地创建新字体`FontStyles.Oblique`？

虽然`FontStyles.Oblique`不被认为是我的一种方法（导入系统？）:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:33:02.953

如果您想要将字体设置为**粗体**和*斜体*（即***两者***）。然后你可以使用

```
FontStyle newFontStyle = new FontStyle();
newFontStyle = FontStyle.Regular;
newFontStyle = FontStyle.Bold | FontStyle.Italic; 
```

我希望这有帮助。

*笔记。这是假设您使用的是 WinForms。*

# php - 如何在没有子 div 文本数据的情况下获取 div 的文本数据 - 使用 php xpath？

> ID：15838487
> 
> 赞同：0
> 
> 时间：2013-04-05T16:03:13.463
> 
> 标签：php, text, xpath

```
<div class="date">
  <div class="rating">good</div>
  Movie Review - Mar 24, 2013
</div>

<div class="date">
  Movie Review - Mar 23, 2013
</div> 
```

什么 xpath 查询将获得“Movie Review ..”部分而没有评级 div 内容（它说好）。有时评级 div 有时不存在。

当我得到一个 div 节点时，我尝试了这种事情`$reviewnode:`

```
 $thedate = $xpath->query('text()[1]',$reviewdate)->item(0) ; 
```

但它也捕获了评级 div 的内容。

解析后的文档是 html5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:13:41.537

这应该返回包含字符串“Movie”的 div 的文本子项：

```
//div[@class = "date"]/text()[contains(., "Movie")] 
```

如果您只想要第一个非空白文本节点，您可以使用

```
//div[@class = "date"]/text()[normalize-space(.) != ''][1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T11:41:17.880

您正在寻找不是仅空白节点的第一个文本节点子节点：

```
// xpath: text()[normalize-space(.)][1]

$thedate = $xpath->query(
    'text()[normalize-space(.)][1]', $reviewdate
)->item(0); 
```

结果（`var_dump($thedate->data)`）：

```
string(39) "\n      Movie Review - Mar 24, 2013\n    "
string(39) "\n      Movie Review - Mar 23, 2013\n    " 
```

此外，当您正在寻找一个值时，您可能希望直接检索字符串值：

```
// xpath: normalize-space(text()[normalize-space(.)])

$thedate = $xpath->evaluate(
    'normalize-space(text()[normalize-space(.)])', $reviewdate
); 
```

结果（`var_dump($thedate)`）：

```
string(27) "Movie Review - Mar 24, 2013"
string(27) "Movie Review - Mar 23, 2013" 
```

我希望这是有帮助的。另请参阅[在线演示](http://eval.in/15474)和完整的代码示例：

```
<?php
/**
 * how can I get the text data of a div without the child divs text data - with php xpath?
 *
 * @link http://stackoverflow.com/q/15838487/367456
 * @link http://eval.in/15474
 */
$buffer = <<<BUFFER
<html>
    <div class="date">
      <div class="rating">good</div>
      Movie Review - Mar 24, 2013
    </div>

    <div class="date">
      Movie Review - Mar 23, 2013
    </div>
</html>
BUFFER;

$doc = new DOMDocument();
$doc->loadHTML($buffer);
$xpath = new DOMXPath($doc);

foreach ($xpath->query('/*/body/div[@class = "date"]') as $reviewdate) {
    $thedate = $xpath->query('text()[normalize-space(.)][1]', $reviewdate)->item(0);
    var_dump($thedate->data);

    // string:
    $thedate = $xpath->evaluate('normalize-space(text()[normalize-space(.)])', $reviewdate);
    var_dump($thedate);
} 
```

# ruby - Ruby 1.8.6 `gem install` 段错误与“中止陷阱 6”

> ID：15838494
> 
> 赞同：2
> 
> 时间：2013-04-05T16:03:26.277
> 
> 标签：ruby, gcc, rubygems, segmentation-fault, rbenv

我无法在 Mountain Lion 上全新安装 rbenv 的 Ruby 1.8.6 上安装任何 gem。`gem install`段错误和外壳打印“中止陷阱：6”：

```
$ RUBYLIB= RUBYOPT= bash

$ gem install --verbose bundler
  GET http://rubygems.org/latest_specs.4.8.gz
  302 Moved Temporarily
  GET http://production.s3.rubygems.org/latest_specs.4.8.gz
  304 Not Modified
  Installing gem bundler-1.3.5
  Abort trap: 6 
```

[报告了类似的问题](https://stackoverflow.com/questions/6786983/how-do-i-get-gem-install-to-work-on-os-x-lion-with-ruby-1-8-7-without-seg-faul)，但所有问题的答案都是他们需要使用非 Apple GCC 4.2 来构建这样一个旧版本的 Ruby。这不适用于我，因为我已经安装了 GCC，`brew install apple-gcc42`并且 rbenv 安装过程选择了它，如下所示：

```
$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.7
  - RUBY VERSION: 1.8.6 (2010-09-02 patchlevel 420) [i686-darwin12.3.0]
  - INSTALLATION DIRECTORY: /Users/mislav/.rbenv/versions/1.8.6-p420/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: /Users/mislav/.rbenv/versions/1.8.6-p420/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/mislav/.rbenv/versions/1.8.6-p420/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-darwin-12
  - GEM PATHS:
     - /Users/mislav/.rbenv/versions/1.8.6-p420/lib/ruby/gems/1.8
     - /Users/mislav/.gem/ruby/1.8
  - GEM CONFIGURATION:
     - "gem" => "--no-ri --no-rdoc"
  - REMOTE SOURCES:
     - http://rubygems.org/

$ ruby -rrbconfig -e 'puts RbConfig::CONFIG["configure_args"]'
  '--prefix=/Users/mislav/.rbenv/versions/1.8.6-p420'
  'CC=/usr/local/bin/gcc-4.2'
  'CFLAGS=  -Wno-error=shorten-64-to-32'
  'LDFLAGS=-L'\\''/Users/mislav/.rbenv/versions/1.8.6-p420/lib'\\'' '
  'CPPFLAGS=-I'\\''/Users/mislav/.rbenv/versions/1.8.6-p420/include'\\'' '

$ /usr/local/bin/gcc-4.2 --version
  i686-apple-darwin11-gcc-4.2.1 (GCC) 4.2.1 (Apple Inc. build 5666) (dot 3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:47:03.247

我一眼就能看出的唯一区别是我安装`gcc-4.2`到`/usr/bin`而你使用`/usr/local/bin`. 这*不应该*有什么不同，但我想有可能一些 Makefile 硬编码`/usr/bin`（这更常见 - 我猜？）为`gcc`.

既然您提到您使用 Homebrew 进行安装`gcc-4.2`，我还要补充一点，我使用了手动方法，按照以下说明操作：[http ://caiustheory.com/install-gcc-421-apple-build-56663-with-xcode- 42](http://caiustheory.com/install-gcc-421-apple-build-56663-with-xcode-42) . 再说一次，我认为这*不会*有什么不同，但你永远不知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:18:56.103

较新版本`rubygems`的 Ruby 可能无法在 Ruby 1.8.6 及之前的版本上运行。

您可以随时尝试[使用 slimgems](https://github.com/slimgems/slimgems)作为替代方案。这是 1.3.x 系列系统的一个分支，`rubygems`针对错误而不是功能进行了修补。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T22:36:29.300

Prob OS X 的版本。Apple 在新的 OS X 和 Xcode 中更改了他们的编译器。gcc 安装在哪里？尝试运行哪个 gcc。

# android - 用“OnPreferenceChangeListener”覆盖时首选项值不会改变 - Android

> ID：15838495
> 
> 赞同：0
> 
> 时间：2013-04-05T16:03:27.890
> 
> 标签：android, overriding, preferences

我已经`OnPreferenceChangeListener`在我的首选项页面（扩展`PreferenceActivity`）中实现了两个首选项对象
但是自从首选项值没有在更改时更新，
我什至尝试使用：

```
SharedPreferences sharedPreferences = getSharedPreferences("myCustomSharedPrefs",
        Activity.MODE_PRIVATE);
SharedPreferences.Editor editor = sharedPreferences.edit();
editor.putInt(preference.getKey(), Integer.parseInt(newValue.toString()));
editor.commit(); 
```

`preference`改变的偏好在哪里`newValue`，新的价值在哪里……
我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:05:49.177

您需要返回 true 才能更新值，请参阅[Android 文档](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:16:36.110

你能看看 preference.getKey() 是否给出了正确的名称吗？您可以在控制台中打印并查看。代码对我来说看起来很干净。可能名称与预期不同。

还要确保该值也具有正确的值。

# wpf - 单击选项卡时 WPF 控件失去焦点

> ID：15838497
> 
> 赞同：2
> 
> 时间：2013-04-05T16:03:32.780
> 
> 标签：wpf, binding, prism, tabcontrol, lostfocus

在选项卡控件上，我有几个选项卡，其中一个选项卡的内容中有一个文本框。

此文本框的内容与简单的 Path=PropertyName 和 UpdateSourceTrigger=LostFocus 绑定。我使用 LostFocus 的原因是我捕获了 Textbox 的 Lost focus 事件并可能重新格式化文本。这是一个“时间”文本框，如果他们输入“0900”，我想重新格式化为“09:00”。当我按 Tab 键移动到下一个控件时，这部分效果很好，但是如果我键入“0900”然后按其他选项卡之一，我会失去焦点并重新格式化文本框中的值，但绑定永远不会被调用来更新我的对象。当我回到选项卡时，该值被空白（或重置为对象上的原始值）

任何想法为什么在更改标签页时文本框不会触发绑定更新？

注意：这也发生在与失去焦点事件相关的常规文本框上。它似乎与单击选项卡有关。

[[添加代码]]更多注释：1.我正在动态创建选项卡和选项卡上的控件（不确定是否与它有关）2.我正在使用Prism库

主窗口 Xaml

```
<Window.Resources>
    <DataTemplate DataType="{x:Type ctrls:myTextBoxDef}">
        <Grid Width="300">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MinWidth="100" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="28" />
            </Grid.RowDefinitions>
            <TextBlock Grid.Column="0"
                   HorizontalAlignment="Stretch"
                   VerticalAlignment="Center"
                   Text="{Binding LabelText}" />

            <TextBox Grid.Column="1"
                 HorizontalAlignment="Stretch"
                 VerticalAlignment="Center"
                 Text="{Binding DocValue,
                                Mode=TwoWay,
                                ValidatesOnDataErrors=True,
                                UpdateSourceTrigger=LostFocus}"
                         />
        </Grid>
    </DataTemplate>
</Window.Resources>

<Grid>
    <TabControl HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch"
                HorizontalContentAlignment="Stretch"
                VerticalContentAlignment="Stretch"
                IsTabStop="False"                 
                ItemsSource="{Binding Tabs, Mode=OneWay}"
                SelectedItem="{Binding SelectedTab,
                                Mode=TwoWay,
                                NotifyOnSourceUpdated=True}"
                >
        <TabControl.ItemTemplate>
            <DataTemplate>
                <Grid>  
                    <TextBlock Margin="18,14,22,0"                                       
                               Text="{Binding HeaderText}" />
                </Grid>
            </DataTemplate>
        </TabControl.ItemTemplate>
        <!--  Content  -->
        <TabControl.ContentTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <AdornerDecorator Grid.Column="0">
                        <ItemsControl Grid.Column="0"
                                          HorizontalAlignment="Stretch"
                                          VerticalAlignment="Stretch"
                                          IsTabStop="False"
                                          ItemsSource="{Binding Controls,
                                                                Mode=OneWay}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <WrapPanel Grid.Column="0"
                                                   Margin="10,5,0,0"
                                                   HorizontalAlignment="Stretch"
                                                   VerticalAlignment="Stretch"
                                                   Orientation="Vertical" />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                        </ItemsControl>
                    </AdornerDecorator>
                    </Grid>
                </DataTemplate>
            </TabControl.ContentTemplate>
        </TabControl>
    </Grid>
</Window> 
```

主窗口代码背后

```
public partial class MainWindow : Window
{
    private DataContextObject obj = new DataContextObject();
    public MainWindow()
    {
        InitializeComponent();

        myTextBoxDef txt1 = new myTextBoxDef(obj, "Textbox 1", "TAB1TextBox1");
        myTextBoxDef txt1b = new myTextBoxDef(obj, "Textbox 1 value", "TAB1TextBox1");

        myTextBoxDef txt2 = new myTextBoxDef(obj, "Textbox 2", "TAB1TextBox2");
        myTextBoxDef txt2b = new myTextBoxDef(obj, "Textbox 2 value", "TAB1TextBox2");

        obj.Tabs.Add(new myTabDef("Tab 1", new ObservableCollection<myTextBoxDef>() { txt1, txt2 }));
        obj.Tabs.Add(new myTabDef("Tab 2", new ObservableCollection<myTextBoxDef>() { txt1b, txt2b }));

        obj.SelectedTab = obj.Tabs[0];

        this.DataContext = obj;
    }
} 
```

支持对象

```
public class DataContextObject : NotificationObject
{
    List<myTabDef> _tabs = new List<myTabDef>();
    public List<myTabDef> Tabs
    {
        get
        {
            return _tabs;
        }
    }

    private myTabDef _item;
    public myTabDef SelectedTab
    {
        get
        { return _item; }
        set
        {
            _item = value;
            this.RaisePropertyChanged("SelectedItem");
        }
    }

    private string _txt1 = "";
    public string TAB1TextBox1
    {
        get { return _txt1; }
        set
        {
            _txt1 = value;
            this.RaisePropertyChanged("TAB1TextBox1");
        }
    }

    private string _txt2 = "";
    public string TAB1TextBox2
    {
        get { return _txt2; }
        set
        {
            _txt2 = value;
            this.RaisePropertyChanged("TAB1TextBox2");
        }
    }

    private string _txt3 = "";
    public string TAB2TextBox1
    {
        get { return _txt3; }
        set
        {
            _txt3 = value;
            this.RaisePropertyChanged("TAB2TextBox1");
        }
    }
}

public class myTabDef
{
    public myTabDef(string tabText, ObservableCollection<myTextBoxDef> controls)
    {
        HeaderText = tabText;
        _left = controls;
    }

    public string HeaderText { get; set; }

    private ObservableCollection<myTextBoxDef> _left = new ObservableCollection<myTextBoxDef>();
    public ObservableCollection<myTextBoxDef> Controls
    {
        get
        {
            return _left;
        }
    }
}

public class myTextBoxDef : NotificationObject
{
    public myTextBoxDef(NotificationObject bound, string label, string bindingPath)
    {
        LabelText = label;
        Path = bindingPath;
        BoundObject = bound;

        BoundObject.PropertyChanged += BoundObject_PropertyChanged;
    }

    public string LabelText
    {
        get;
        set;
    }

    public NotificationObject BoundObject
    {
        get;
        set;
    }

    public string DocValue
    {
        get
        {
            return PropInfo.GetValue(BoundObject, null) as string;
        }
        set
        {
            PropInfo.SetValue(BoundObject, value, null);
        }
    }

    protected virtual void BoundObject_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
    {
        if (e.PropertyName.Equals(Path))
        {
            this.RaisePropertyChanged("DocValue");
        }
    }

    public string Path
    {
        get;
        set;
    }

    private PropertyInfo pi = null;
    protected PropertyInfo PropInfo
    {
        get
        {
            if (pi == null && BoundObject != null && !string.IsNullOrEmpty(Path))
            {
                PropertyInfo[] properties = BoundObject.GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance);

                pi = properties.Where((prop) => string.Compare(prop.Name, Path, true) == 0).FirstOrDefault();
            }

            return pi;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T00:02:44.007

我们找到了解决方案。我穿越了这组帖子

[https://groups.google.com/forum/#!topic/wpf-disciples/HKUU61A5l74](https://groups.google.com/forum/#!topic/wpf-disciples/HKUU61A5l74)

他们谈论了一个名为 TabControlEx 的控件。在底部（倒数第 5 个），您将看到 Sacha Barber 的帖子，其中包含带有示例的 zip 文件。

它解决了我们遇到的所有问题。

这也是另一个链接，其中发布了该类的代码

[http://updatecontrols.codeplex.com/discussions/214434](http://updatecontrols.codeplex.com/discussions/214434)

# asp.net-web-api - Breeze API 控制器 - 'ObjectContent`1' 类型未能序列化内容类型的响应正文

> ID：15838506
> 
> 赞同：0
> 
> 时间：2013-04-05T16:03:55.430
> 
> 标签：asp.net-web-api, breeze, single-page-application, hottowel

尝试调用时出现此错误

```
public object Lookups() {

  var divisions = _contextProvider.Context.Divisions;                      

  return divisions;
} 
```

在 Breeze API 控制器上。

ObjectContent`1' 类型无法序列化内容类型的响应正文

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:51:26.173

返回一个对象，而不是 IQueryable。

```
public object Lookups() {

  var divisions = _contextProvider.Context.Divisions;                      

  return new { divisions };
} 
```

# java - 我收到 JOptionPane 的一些有线错误，它说 IllegalArgumentException

> ID：15838510
> 
> 赞同：-1
> 
> 时间：2013-04-05T16:04:03.710
> 
> 标签：java, swing, jscrollpane

我尝试自己做一些 GUI，我在 youtube 上找到了一个使用它的示例。它适用于他的屏幕，但不适用于我的电脑。

这是代码示例

```
 SP_CONVERSATION.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
    SP_CONVERSATION.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    SP_CONVERSATION.setViewportView(TA_Conversation);
    MainWindow.getContentPane().add(SP_CONVERSATION);
    SP_CONVERSATION.setBounds(10, 90, 330, 180); 
```

它说这个

```
Exception in thread "main" java.lang.IllegalArgumentException: invalid horizontalScrollBarPolicy
at javax.swing.JScrollPane.setHorizontalScrollBarPolicy(Unknown Source) 
```

我对此有点陌生，所以我不知道该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:11:40.400

将常量更改`JScrollPane`为如下所示，它应该可以工作。

```
SP_CONVERSATION.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
SP_CONVERSATION.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS); 
```

# php - nginx 防止从缓存中加载

> ID：15838512
> 
> 赞同：5
> 
> 时间：2013-04-05T16:04:11.777
> 
> 标签：php, nginx

在完成更新后，我经常更新我的网站，我的客户报告说正在加载旧图像和脚本而不是新的。我知道它们来自浏览器缓存，但是有什么方法可以强制脚本不要从服务器的缓存中加载。

我正在使用带有 php-fpm 的 nginx。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T16:08:25.880

您可以强制 HTTP 标头影响浏览器缓存行为，但是在您想要缓存的生产环境中，这可能不是一个好主意。

所以只需使用类似的东西：

```
expires -1 
```

强制`Cache-Control no-cache`标头

在这里查看更多信息：

[http://wiki.nginx.org/HttpHeadersModule](http://wiki.nginx.org/HttpHeadersModule)

话虽如此，我已经养成了在修改图像和静态文件名称时更改它们的习惯。也许这来自与 CDN 的合作，这可能会非常有帮助。所以假设我有可能经常更新的静态文件（即它们不是某些特定内容的一部分）。我会这样命名它们：

```
someimagev1.jpg
someimagev2.jpg
somejs1.js
somejs2.js
etc. 
```

我根据需要更改值（和 HTML 源代码中的链接）。

# java - 字符串处理算法

> ID：15838520
> 
> 赞同：1
> 
> 时间：2013-04-05T16:04:50.727
> 
> 标签：java, string, algorithm, compiler-construction

我有一个问题让我思考如何提高系统的速度和内存。我将通过示例来描述它，我有这个文件，其中包含一些字符串：

```
<e>Customer</e>
    <a1>Customer Id</a1>
    <a2>Customer Name</a2>
<e>Person</e> 
```

它类似于 xml 文件。

现在，我的解决方案是，当我阅读时`<e>Customer</e>`，我会从它读取到最近的标签，然后从子串读取到`<e>Customer</e>`最近的标签。

它使系统需要处理这么多。我只使用正则表达式来做到这一点。我想我会像真正的编译器一样做同样的事情，它有一些阶段（词法分析，解析器）。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:08:44.897

正则表达式不是解析此类复杂结构的正确工具。由于您的文件看起来很像 XML，因此添加缺少的内容以使其成为 XML（即标题）并将结果提供给 XML 解析器可能是有意义的。

XML 解析器针对快速处理大量数据（尤其是 SAX 类型）进行了优化。如果您从使用正则表达式处理大量文本切换到解析 XML，您应该会看到性能显着提高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:12:31.493

如果您真的不想使用免费且可靠的 xml 解析器之一，那么真正快速的解决方案几乎肯定会涉及状态机。

请参阅此[如何在 java 中创建简单状态机](https://stackoverflow.com/q/5790297/823393)问题以获得良好的开端。

请务必有**充分**的理由选择这条路线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T16:07:53.470

只是不要把时间花在 XML 词法分析器/解析器上（它不值得），而是使用已经存在的东西。

例如[http://www.mkyong.com/tutorials/java-xml-tutorials/](http://www.mkyong.com/tutorials/java-xml-tutorials/)是一个很好的教程，只需使用 google。

# excel - Excel VBA中从列格式到多列格式

> ID：15838523
> 
> 赞同：0
> 
> 时间：2013-04-05T16:05:06.237
> 
> 标签：excel, string-formatting, vba

我有块格式的 .txt 数据：

```
1
1
2
2
3
3 
```

在这个例子中，我有 3 个大小为 2 的块。大小不随块而变化，它是固定的。我的真实案例有大约 500 个大小为 500 的块。我想在 Excel 中以格式导入此类数据

```
1 2 3
1 2 3 
```

即每一列代表一个块。我正在寻找一个在线工具，它可以为此提供简单的复制到剪贴板工具，但我没有找到。考虑到我的列的范围和块的大小（此处为范围 A1:A6 和块大小 2），您将如何在 Excel VBA 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:09:37.770

```
Sub Tester()
    ReadBlocks "C:\local files\tmp.txt", 100, ActiveSheet.Range("a1")
End Sub

Sub ReadBlocks(sPath As String, BlockSize As Long, rngDest As Range)

    Dim fso As Object, f As Object, val, r As Long, c As Long

    On Error GoTo haveError

    Set fso = CreateObject("scripting.filesystemobject")
    Set f = fso.opentextfile(sPath, 1) '1=forReading

    r = 0
    c = 0
    Application.ScreenUpdating = False
    Application.Calculation = xlCalculationManual
    Do Until f.AtEndOfStream
        rngDest.Offset(r, c).Value = f.ReadLine
        If (r + 1) Mod BlockSize = 0 Then
            r = 0
            c = c + 1
        Else
            r = r + 1
        End If
    Loop

haveError:

    Application.ScreenUpdating = True
    Application.Calculation = xlCalculationAutomatic
End Sub 
```

# javascript - 如何创建自定义 CSS3 加载圈？

> ID：15838525
> 
> 赞同：9
> 
> 时间：2013-04-05T16:05:10.580
> 
> 标签：javascript, html, css

我想创建这样的 CSS3 加载圈：

![在此处输入图像描述](https://i.stack.imgur.com/lYJ7f.png)

内圈将使用计时器增长。

问题是我可以用什么技术来像这样增长内圈？

我有这个 CSS 代码：

```
.circle {
width:100px;
height:100px;
border-radius:50px;
background:#fff;
} 
```

`.circle`只是一个`div`

外圈可以用作背景图像，因为它将是静态的。它永远不会改变，只有内部的会根据计时器而改变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:10:57.997

HTML

在第一个示例中，仅创建两个 div 并且由于border-radius 属性，它们将采用圆形。

```
<div class="ball"></div>
<div class="ball1"></div> 
```

CSS

因为 CSS 样式很简单，只要根据你想要的图形的参数来玩，关于动画只需使用 transform:rotateproperty。

```
.ball {
    background-color: rgba(0,0,0,0);
    border: 5px solid rgba(0,183,229,0.9);
    opacity: .9;
    border-top: 5px solid rgba(0,0,0,0);
    border-left: 5px solid rgba(0,0,0,0);
    border-radius: 50px;
    box-shadow: 0 0 35px #2187e7;
    width: 50px;
    height: 50px;
    margin: 0 auto;
    -moz-animation: spin .5s infinite linear;
    -webkit-animation: spin .5s infinite linear;
}

.ball1 {
    background-color: rgba(0,0,0,0);
    border: 5px solid rgba(0,183,229,0.9);
    opacity: .9;
    border-top: 5px solid rgba(0,0,0,0);
    border-left: 5px solid rgba(0,0,0,0);
    border-radius: 50px;
    box-shadow: 0 0 15px #2187e7;
    width: 30px;
    height: 30px;
    margin: 0 auto;
    position: relative;
    top: -50px;
    -moz-animation: spinoff .5s infinite linear;
    -webkit-animation: spinoff .5s infinite linear;
}

@-moz-keyframes spin {
    0% {
        -moz-transform: rotate(0deg);
    }

    100% {
        -moz-transform: rotate(360deg);
    };
}

@-moz-keyframes spinoff {
    0% {
        -moz-transform: rotate(0deg);
    }

    100% {
        -moz-transform: rotate(-360deg);
    };
}

@-webkit-keyframes spin {
    0% {
        -webkit-transform: rotate(0deg);
    }

    100% {
        -webkit-transform: rotate(360deg);
    };
}

@-webkit-keyframes spinoff {
    0% {
        -webkit-transform: rotate(0deg);
    }

    100% {
        -webkit-transform: rotate(-360deg);
    };
} 
```

第二个示例 CSS3 加载动画循环 HTML

第二个示例与标记的先例相同，您将在 CSS 中找到它的主要区别。

```
<div class="circle"></div>
<div class="circle1"></div> 
```

CSS

简单地说，在这个例子中，我们将作用于旋转，并且我们插入一个动画，让我们有一个脉冲效果。此效果仅在第一个圆圈中有效。

```
.circle {
    background-color: rgba(0,0,0,0);
    border: 5px solid rgba(0,183,229,0.9);
    opacity: .9;
    border-right: 5px solid rgba(0,0,0,0);
    border-left: 5px solid rgba(0,0,0,0);
    border-radius: 50px;
    box-shadow: 0 0 35px #2187e7;
    width: 50px;
    height: 50px;
    margin: 0 auto;
    -moz-animation: spinPulse 1s infinite ease-in-out;
    -webkit-animation: spinPulse 1s infinite linear;
}

.circle1 {
    background-color: rgba(0,0,0,0);
    border: 5px solid rgba(0,183,229,0.9);
    opacity: .9;
    border-left: 5px solid rgba(0,0,0,0);
    border-right: 5px solid rgba(0,0,0,0);
    border-radius: 50px;
    box-shadow: 0 0 15px #2187e7;
    width: 30px;
    height: 30px;
    margin: 0 auto;
    position: relative;
    top: -50px;
    -moz-animation: spinoffPulse 1s infinite linear;
    -webkit-animation: spinoffPulse 1s infinite linear;
}

@-moz-keyframes spinPulse {
    0% {
        -moz-transform: rotate(160deg);
        opacity: 0;
        box-shadow: 0 0 1px #2187e7;
    }

    50% {
        -moz-transform: rotate(145deg);
        opacity: 1;
    }

    100% {
        -moz-transform: rotate(-320deg);
        opacity: 0;
    };
}

@-moz-keyframes spinoffPulse {
    0% {
        -moz-transform: rotate(0deg);
    }

    100% {
        -moz-transform: rotate(360deg);
    };
}

@-webkit-keyframes spinPulse {
    0% {
        -webkit-transform: rotate(160deg);
        opacity: 0;
        box-shadow: 0 0 1px #2187e7;
    }

    50% {
        -webkit-transform: rotate(145deg);
        opacity: 1;
    }

    100% {
        -webkit-transform: rotate(-320deg);
        opacity: 0;
    };
}

@-webkit-keyframes spinoffPulse {
    0% {
        -webkit-transform: rotate(0deg);
    }

    100% {
        -webkit-transform: rotate(360deg);
    };
} 
```

第三个示例 CSS3 加载动画循环 HTML

在这个最新的例子中，我们发现了一个简单的循环，由于 transform:scale 属性而动画。标记比其前身更长，但这可能会根据您要插入的块而有所不同。

```
<div id="block_1" class="barlittle"></div>
<div id="block_2" class="barlittle"></div>
<div id="block_3" class="barlittle"></div>
<div id="block_4" class="barlittle"></div>
<div id="block_5" class="barlittle"></div> 
```

CSS

这里的样式更容易处理，因为我们将把效果应用于每个块的动画：延迟属性。

```
.barlittle {
    background-color: #2187e7;
    background-image: -moz-linear-gradient(45deg, #2187e7 25%, #a0eaff);
    background-image: -webkit-linear-gradient(45deg, #2187e7 25%, #a0eaff);
    border-left: 1px solid #111;
    border-top: 1px solid #111;
    border-right: 1px solid #333;
    border-bottom: 1px solid #333;
    width: 10px;
    height: 10px;
    float: left;
    margin-left: 5px;
    opacity: 0.1;
    -moz-transform: scale(0.7);
    -webkit-transform: scale(0.7);
    -moz-animation: move 1s infinite linear;
    -webkit-animation: move 1s infinite linear;
}

#block_1 {
    -moz-animation-delay: .4s;
    -webkit-animation-delay: .4s;
}

#block_2 {
    -moz-animation-delay: .3s;
    -webkit-animation-delay: .3s;
}

#block_3 {
    -moz-animation-delay: .2s;
    -webkit-animation-delay: .2s;
}

#block_4 {
    -moz-animation-delay: .3s;
    -webkit-animation-delay: .3s;
}

#block_5 {
    -moz-animation-delay: .4s;
    -webkit-animation-delay: .4s;
}

@-moz-keyframes move {
    0% {
        -moz-transform: scale(1.2);
        opacity: 1;
    }

    100% {
        -moz-transform: scale(0.7);
        opacity: 0.1;
    };
}

@-webkit-keyframes move {
    0% {
        -webkit-transform: scale(1.2);
        opacity: 1;
    }

    100% {
        -webkit-transform: scale(0.7);
        opacity: 0.1;
    };
} 
```

结论

我希望通过本教程，您学会了如何仅使用 CSS3 属性创建简单的动画循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:09:24.367

```
<style>
#floatingCirclesG{
position:relative;
width:128px;
height:128px;
-moz-transform:scale(0.6);
-webkit-transform:scale(0.6);
-ms-transform:scale(0.6);
-o-transform:scale(0.6);
transform:scale(0.6);
}

.f_circleG{
position:absolute;
background-color:#FFFFFF;
height:23px;
width:23px;
-moz-border-radius:12px;
-moz-animation-name:f_fadeG;
-moz-animation-duration:1.04s;
-moz-animation-iteration-count:infinite;
-moz-animation-direction:linear;
-webkit-border-radius:12px;
-webkit-animation-name:f_fadeG;
-webkit-animation-duration:1.04s;
-webkit-animation-iteration-count:infinite;
-webkit-animation-direction:linear;
-ms-border-radius:12px;
-ms-animation-name:f_fadeG;
-ms-animation-duration:1.04s;
-ms-animation-iteration-count:infinite;
-ms-animation-direction:linear;
-o-border-radius:12px;
-o-animation-name:f_fadeG;
-o-animation-duration:1.04s;
-o-animation-iteration-count:infinite;
-o-animation-direction:linear;
border-radius:12px;
animation-name:f_fadeG;
animation-duration:1.04s;
animation-iteration-count:infinite;
animation-direction:linear;
}

#frotateG_01{
left:0;
top:52px;
-moz-animation-delay:0.39s;
-webkit-animation-delay:0.39s;
-ms-animation-delay:0.39s;
-o-animation-delay:0.39s;
animation-delay:0.39s;
}

#frotateG_02{
left:15px;
top:15px;
-moz-animation-delay:0.52s;
-webkit-animation-delay:0.52s;
-ms-animation-delay:0.52s;
-o-animation-delay:0.52s;
animation-delay:0.52s;
}

#frotateG_03{
left:52px;
top:0;
-moz-animation-delay:0.65s;
-webkit-animation-delay:0.65s;
-ms-animation-delay:0.65s;
-o-animation-delay:0.65s;
animation-delay:0.65s;
}

#frotateG_04{
right:15px;
top:15px;
-moz-animation-delay:0.78s;
-webkit-animation-delay:0.78s;
-ms-animation-delay:0.78s;
-o-animation-delay:0.78s;
animation-delay:0.78s;
}

#frotateG_05{
right:0;
top:52px;
-moz-animation-delay:0.91s;
-webkit-animation-delay:0.91s;
-ms-animation-delay:0.91s;
-o-animation-delay:0.91s;
animation-delay:0.91s;
}

#frotateG_06{
right:15px;
bottom:15px;
-moz-animation-delay:1.04s;
-webkit-animation-delay:1.04s;
-ms-animation-delay:1.04s;
-o-animation-delay:1.04s;
animation-delay:1.04s;
}

#frotateG_07{
left:52px;
bottom:0;
-moz-animation-delay:1.17s;
-webkit-animation-delay:1.17s;
-ms-animation-delay:1.17s;
-o-animation-delay:1.17s;
animation-delay:1.17s;
}

#frotateG_08{
left:15px;
bottom:15px;
-moz-animation-delay:1.3s;
-webkit-animation-delay:1.3s;
-ms-animation-delay:1.3s;
-o-animation-delay:1.3s;
animation-delay:1.3s;
}

@-moz-keyframes f_fadeG{
0%{
background-color:#000000}

100%{
background-color:#FFFFFF}

}

@-webkit-keyframes f_fadeG{
0%{
background-color:#000000}

100%{
background-color:#FFFFFF}

}

@-ms-keyframes f_fadeG{
0%{
background-color:#000000}

100%{
background-color:#FFFFFF}

}

@-o-keyframes f_fadeG{
0%{
background-color:#000000}

100%{
background-color:#FFFFFF}

}

@keyframes f_fadeG{
0%{
background-color:#000000}

100%{
background-color:#FFFFFF}

}

</style>
<div id="floatingCirclesG">
<div class="f_circleG" id="frotateG_01">
</div>
<div class="f_circleG" id="frotateG_02">
</div>
<div class="f_circleG" id="frotateG_03">
</div>
<div class="f_circleG" id="frotateG_04">
</div>
<div class="f_circleG" id="frotateG_05">
</div>
<div class="f_circleG" id="frotateG_06">
</div>
<div class="f_circleG" id="frotateG_07">
</div>
<div class="f_circleG" id="frotateG_08">
</div>
</div> 
```

要创建这样的加载器，您可以尝试[http://cssload.net/](http://cssload.net/)

# java - HtmlUnitDriver 在获取 url 时导致问题

> ID：15838526
> 
> 赞同：2
> 
> 时间：2013-04-05T16:05:11.480
> 
> 标签：java, selenium, htmlunit

我有一个使用 Selenium 库用 Java 开发的页面爬虫。爬虫通过一个网站，该网站通过 Javascript 3 应用程序启动，这些应用程序在弹出窗口中显示为 HTML。

爬虫在启动 2 个应用程序时没有问题，但在第 3 个应用程序中，爬虫永远冻结。

我使用的代码类似于

```
public void applicationSelect() {
  ...
  //obtain url by parsing tag href attributed
  ...

  this.driver = new HtmlUnitDriver(BrowserVersion.INTERNET_EXPLORER_8);
  this.driver.seJavascriptEnabled(true);
  this.driver.get(url); //the code does not execute after this point for the 3rd app
  ...
} 
```

我还尝试通过以下代码单击 web 元素

```
public void applicationSelect() {
  ...
  WebElement element = this.driver.findElementByLinkText("linkText");
  element.click(); //the code does not execute after this point for the 3rd app
  ...
} 
```

单击它会产生完全相同的结果。对于上面的代码，我确保我得到了正确的元素。

谁能告诉我我遇到的问题可能是什么？

在应用程序方面，我不能透露有关 html 代码的任何信息。我知道这使尝试解决问题变得更加困难，为此我提前道歉。

=== 2013-04-10 更新 ===

因此，我将源代码添加到了我的爬虫中，并在 this.driver.get(url) 中看到了它被卡住的位置。

基本上，驱动程序会在无限刷新循环中丢失。在由 HtmlUnitDriver 实例化的 WebClient 对象中，加载了一个 HtmlPage，该 HtmlPage 不断刷新，似乎没有尽头。

这是来自 com.gargoylesoftware.htmlunit 的 WaitingRefreshHandler 的代码：

```
public void handleRefresh(final Page page, final URL url, final int requestedWait) throws IOException {
  int seconds = requestedWait;
  if (seconds > maxwait_ && maxwait_ > 0) {
    seconds = maxwait_;
  }
  try {
    Thread.sleep(seconds * 1000);
  }
  catch (final InterruptedException e) {
    /* This can happen when the refresh is happening from a navigation that started
     * from a setTimeout or setInterval. The navigation will cause all threads to get
     * interrupted, including the current thread in this case. It should be safe to
     * ignore it since this is the thread now doing the navigation. Eventually we should
     * refactor to force all navigation to happen back on the main thread.
     */
    if (LOG.isDebugEnabled()) {
      LOG.debug("Waiting thread was interrupted. Ignoring interruption to continue navigation.");
    }
  }
  final WebWindow window = page.getEnclosingWindow();
  if (window == null) {
    return;
  }
  final WebClient client = window.getWebClient();
  client.getPage(window, new WebRequest(url));
} 
```

指令“client.getPage(window, new WebRequest(url))”再次调用 WebClient 来重新加载页面，只是再次调用这个相同的刷新方法。这似乎无限地进行，仅因为“Thread.sleep(seconds * 1000)”而没有快速填满内存，这会在重试之前强制等待 3m。

有没有人对我如何解决这个问题有任何建议？我建议创建 2 个新的 HtmlUnitDriver 和 WebClient 类来扩展原始类。然后重写相关方法以避免这个问题。

再次感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T12:59:42.023

我通过创建一个什么都不做的 RefreshHandler 类解决了我的永恒刷新问题：

```
public class RefreshHandler implements com.gargoylesoftware.htmlunit.RefreshHandler {   
  public RefreshHandler() { }
  public void handleRefresh(final Page page, final URL url, final int secods) { }
} 
```

此外，我扩展了 HtmlUnitDriver 类并通过覆盖方法 modifyWebClient，我设置了新的 RefreshHandler：

```
public class HtmlUnitDriverExt extends HtmlUnitDriver { 
  public HtmlUnitDriverExt(BrowserVersion version) {
    super(version);
  }
  @Override
  protected WebClient modifyWebClient(WebClient client) {
    client.setRefreshHandler(new RefreshHandler());
    return client;
  }
} 
```

方法 modifyWebClient 是在 HtmlUnitDriver 中专门为此目的而创建的无操作方法。

干杯。

# r - 日期格式的旋转轴标签

> ID：15838533
> 
> 赞同：20
> 
> 时间：2013-04-05T16:05:38.340
> 
> 标签：r, ggplot2

有谁知道如何使用 ggplot2 以日期格式旋转轴刻度？我想在 x 轴上以 45° 角获得带有“日期-月份”（例如“1985-5”）的标签。

数据样本：

```
Station Date Ptot
A 1980-02 16
A 1980-03 19
A 1980-04 40
A 1980-05 48
A 1980-06 NA
A 1980-07 18.5
A 1980-08 24.6
B 1980-07 50.8
B 1980-08 28.9
B 1980-09 32.9
B 1980-10 47.9
B 1980-11 16.3 
```

我试过这个：

```
library(ggplot2)
library(scales)

plot <- ggplot(data=na.omit(data), aes(x=Date, y=Ptot, group=Station))+
   geom_line()+
   facet_grid(Station~.)+
   scale_x_date(breaks = "year", labels=date_format("%Y-%m"))+
   xlab("Year")+
   ylab("Prec (mm)")+
   labs(colour = "Station")+
   theme(axis.text.x = element_text(angle = 45, hjust = 1))+
   theme_bw()

plot 
```

但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-05T16:12:38.813

首先，您应该将列`Date`设为日期。由于它没有提供日期，因此您应该在每个日期中添加例如 01 并进行转换。

```
data$Date<-as.Date(paste(data$Date,"-01",sep=""),format="%Y-%m-%d") 
```

要在 x 轴下正确放置标签，您不仅应该设置`angle=`，还`hjust=1`应该确保标签的末端位于刻度线下方。也`theme_bw()`应该放在轴文本的主题规范之前。

```
ggplot(data=na.omit(data), aes(x=Date, y=Ptot, group=Station))+
  geom_line()+
  facet_grid(Station~.)+
  scale_x_date(breaks = "month", labels=date_format("%Y-%m"))+
  xlab("Year")+
  ylab("Prec (mm)")+theme_bw()+
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/qGUc1.png)

# javascript - 获取动态添加的 Attr (ID) 带有 jQ uery 的元素

> ID：15838535
> 
> 赞同：0
> 
> 时间：2013-04-05T16:05:42.607
> 
> 标签：javascript, jquery

我在获取动态添加的列表元素的 ID 时遇到问题。正在添加以下内容：

```
$(".detail-view button").on("click", function(){
    var noItems = $("ul#cart-items li").eq(0).attr("id");
    var detailID = $(this).attr('id');

    var orderTitle = $("#detail-"+ detailID + " span.order-title").text();
    var insertTitle = $("<li><a href=\"#\" class=\"remove-item\"><img src=\"/assets/images/global/intra_remove_item_btn.png\" /></a>"+ orderTitle +"</li>").attr("id", detailID);

    if(noItems == "emptycart") {
        $("ul#cart-items li#emptycart").replaceWith(insertTitle);
        $("#lp-orderform li:even").addClass("highlight");
    } else {
        $(insertTitle).insertAfter("ul#cart-items li:last");
        $("#lp-orderform li:even").addClass("highlight");
    }
}); 
```

它从以下内容更新了我的原始 HTML...

```
<ul id="cart-items">
    <li id="emptycart">You have no items in your cart.</li>
</ul> 
```

并更新到...

```
<ul id="cart-items">
    <li id="6955" class="highlight"><a href="#" class="remove-item"><img src="/assets/images/global/intra_remove_item_btn.png"></a>Chicken with Garlic Sauce</li>
    <li id="6966"><a href="#" class="remove-item"><img src="/assets/images/global/intra_remove_item_btn.png"></a>Hunan Shrimp with Black Bean Sauce</li>
    <li id="6965" class="highlight"><a href="#" class="remove-item"><img src="/assets/images/global/intra_remove_item_btn.png"></a>Hunan Pork with Black Bean Sauce</li>
</ul> 
```

当单击 a.remove-item 以删除该列表元素时，我正在尝试获取列表项的 ID。

```
$("ul#cart-items").live("click", "li a.replace-item", function(){
    var removeItemID = $("li a.replace-item").attr("id");
    alert(removeItemID);
}); 
```

但我似乎只得到“未定义”的值。任何投入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:20:45.770

## **更新**

`li`点击`<a>`链接获取 id

```
$("#cart-items").on("click", "a", function(){
var removeItemID = $(this).parent("li").attr('id');
alert(removeItemID);
}); 
```

***工作[的jsFiddle](http://jsfiddle.net/dL8Vh/1/)***

获得`id`点击`li`使用

```
$("#cart-items").on("click", "li", function(){
var removeItemID = $(this).attr('id');
alert(removeItemID);
}); 
```

***工作[的jsFiddle](http://jsfiddle.net/xzJzC/4/)***

* * *

您的`li`元素没有`remove-item`class ，但`a`超链接有

如果要检测`li`项目单击

```
 $("#cart-items").on("click", "li", function(){
    var removeItemID = $(this).find('a').attr("class");
    alert(removeItemID);
}); 
```

***工作[的jsFiddle](http://jsfiddle.net/ZMQMA/)***

否则，如果你想检测`a`超链接点击

```
 $("#cart-items").on("click", "a", function(){
    var removeItemID = $(this).attr("class");
    alert(removeItemID);
}); 
```

***工作[的jsFiddle](http://jsfiddle.net/xzJzC/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:10:37.287

您请求 ID 的元素没有 ID。试试这个代码：

```
$("ul#cart-items").live("click", "li a.replace-item", function(){
    var removeItemID = $(this).parent().attr("id");
    alert(removeItemID);
}); 
```

如果 jQuery 1.7 或更高版本你应该使用 on 而不是 live 像这样：

```
$("ul#cart-items").on("click", "li a.replace-item", function(){
    var removeItemID = $(this).parent().attr("id");
    alert(removeItemID);
}); 
```

# amazon-web-services - 如何在 CloudFormation 的 Auto Scaling 组中安排额外的 EC2 实例？

> ID：15838536
> 
> 赞同：6
> 
> 时间：2013-04-05T16:05:45.290
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudformation

我找遍了所有地方，但找不到配置为按计划添加/删除容量的[Auto Scaling 组的好的](http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/AS_Concepts.html#AutoScalingGroup)[Amazon CloudFormation](http://aws.amazon.com/cloudformation/)示例。

[使用命令行工具](http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/schedule_time.html)当然可以，但我找不到相应的[CloudFormation 语言](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-policy.html#cfn-as-scalingpolicy-adjustmenttype)。

有人知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T13:49:02.930

[AWS CloudFormation](http://aws.amazon.com/cloudformation/)有时不涵盖其他[AWS 产品和服务](http://aws.amazon.com/products-solutions/)中可用的所有（新）API 操作，尽管它们通常会在几个月后推出。

不幸的是，尽管[Scale Based on a Schedule](http://docs.aws.amazon.com/AutoScaling/latest/DeveloperGuide/schedule_time.html)[已于 2010 年 12 月推出，](http://aws.typepad.com/aws/2010/12/auto-scaling-follow-the-line.html)但截至今天仍不支持此功能，请参阅 Eric Hammond 最近的[请求：CloudFormation support for Auto Scaling schedules and suspend](https://forums.aws.amazon.com/thread.jspa?threadID=115302) from January 2013 - [AWS 团队的响应](https://forums.aws.amazon.com/message.jspa?messageID=419224#419224)异常稀疏在这里（虽然从不宣布日期，但他们通常至少暗示优先事项），因此它看起来并不完全有希望 - 因此您暂时需要解决它。

## 解决方法

您仍然可以通过专用的[CustomResource](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-cfn-customresource.html)类型将自定义解决方法与 CloudFormation 集成，这些类型是*特殊的 AWS CloudFormation 资源，为模板开发人员提供了一种将资源包含在 AWS CloudFormation 堆栈中的方法，这些资源由非亚马逊网络服务。*- [AWS CloudFormation 自定义资源演练](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/crpg-walkthrough.html)很好地概述了这一切的内容、工作原理以及实施您自己的资源所需的条件。

您的自定义资源需要通过显式调用[PutScheduledUpdateGroupAction](http://docs.aws.amazon.com/AutoScaling/latest/APIReference/API_PutScheduledUpdateGroupAction.html) API 来实现对计划操作的缺失支持，然后您可以将此资源集成到您的模板中，以补充（甚至替换）目前尚不充分的官方[ScalingPolicy](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-policy.html)资源。

# r - R read.table 列向左移动

> ID：15838538
> 
> 赞同：0
> 
> 时间：2013-04-05T16:05:53.897
> 
> 标签：r, fill, read.table

我创建了一个名为 test2.txt 的文件，其中包含以下信息：

```
col1 col2 col3 col4
1    A    B 
2    A    B 
3    A    B 
4    A    B 
5    A    B 
6    A    B 
7    A         C
8    A         C 
```

使用以下命令读取时：

```
test.ws=read.table(paste(inputDir,'test2.txt',sep=''),fill=T,header=T) 
```

我得到以下信息：

```
 col1 col2 col3 col4
1    1    A    B   NA
2    2    A    B   NA
3    3    A    B   NA
4    4    A    B   NA
5    5    A    B   NA
6    6    A    B   NA
7    7    A    C   NA
8    8    A    C   NA 
```

列向左移动。是什么赋予了？！

我尝试了以下方法：

```
> count.fields(paste(inputDir,'test.txt',sep=''))
[1] 4 3 3 3 3 3 3 4 4 
```

它告诉我标签的数量不同，但事实并非如此！我该如何处理这些信息？值得一提的是，当将此 .txt 文件导入 Excel 时，它会正确读取选项卡并且不会跳过或移动任何列。

我试图这样做分别分配列名，但这不起作用：

```
colNames=names(test.ws)
test.ws=read.table(paste(inputDir,'test2.txt',sep=''),skip=1,fill=T,header=T,col.names=colNames) 
```

产量：

```
Warning message:
In read.table(paste(inputDir, "test2.txt", sep = ""), skip = 1,  :
  header and 'col.names' are of different lengths 
```

我在网上发现了一个类似的问题：[https](https://stat.ethz.ch/pipermail/r-help/2008-July/166676.html) ://stat.ethz.ch/pipermail/r-help/2008-July/166676.html 。那个问题没有回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T16:26:13.690

如果那是制表符分隔的数据，请相应地设置分隔符：`sep="\t"`. 否则（从帮助上`read.table`）

> 如果`sep = ""`（read.table 的默认值）分隔符是“空白”，即一个或多个空格、制表符、换行符或回车符。

因此，多个连续的制表符被视为一个分隔符。

或者使用`read.delim`而不是`read.table`因为它的默认值更适合制表符分隔的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:27:34.087

也许你有固定宽度的列？

```
read.fwf(textConnection("col1 col2 col3 col4
1    A    B 
2    A    B 
3    A    B 
4    A    B 
5    A    B 
6    A    B 
7    A         C
8    A         C"),widths = rep(5,4))

     V1    V2    V3   V4
1 col1  col2  col3  col4
2 1     A        B  <NA>
3 2     A        B  <NA>
4 3     A        B  <NA>
5 4     A        B  <NA>
6 5     A        B  <NA>
7 6     A        B  <NA>
8 7     A              C
9 8     A              C 
```

# python - Python拆分和合并行

> ID：15838541
> 
> 赞同：0
> 
> 时间：2013-04-05T16:06:01.377
> 
> 标签：python

```
df = subprocess.Popen(["df", options.partname], stdout=subprocess.PIPE)
output = df.communicate()[0]
print output 
```

给出以下内容：

```
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/mapper/sys-scratch
                     1446412616 847216452 524555652  62% /scratch 
```

在某些情况下（机器），

```
output.split("\n")[1] 
```

给我

```
/dev/mapper/sys-scratch 
```

我想在哪里

```
/dev/mapper/sys-scratch 1446412616 847216452 524555652  62% /scratch  # in one line 
```

我正在使用输出中的值，如下所示：

```
device, size, used, available, percent, mountpoint = output.split("\n")[1].split() 
```

对于某些机器，这会失败，因为`output.split("\n")[1]`只有一个值。我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:13:24.677

在这种特定情况下，您可以重新加入最后两行：

```
df = subprocess.Popen(["df", options.partname], stdout=subprocess.PIPE)
output = df.communicate()[0]
output = ' '.join(output.splitlines()[1:])
device, size, used, available, percent, mountpoint = output.split() 
```

# rest - RESTful Webservices - Spring MVC 3.x 中的基本身份验证

> ID：15838542
> 
> 赞同：0
> 
> 时间：2013-04-05T16:06:09.687
> 
> 标签：rest, authentication, spring-mvc, basic-authentication, interceptor

我们正在使用 Spring MVC 3.x 开发 RESTful Web 服务。我想知道实现基本身份验证的最佳方法是什么。请注意，我们不想使用 Spring Security。我们只想使用常规的基本身份验证。

每个请求都应该经过身份验证。没有状态保持。它的常规 u/p 身份验证和凭据根据数据库进行验证。

*   我正在考虑使用`Interceptors`. 所以对服务器的每个请求都会首先通过拦截器。这是最佳做法吗？
*   我不确定`filters`。这和拦截器一样吗？
*   还有其他更好的方法来实现吗？此实施的行业标准是什么？
*   如果这两个不同， `interceptors`/的用例是什么？`filters`

想法？非常感谢！

# excel - 按月统计出现次数

> ID：15838543
> 
> 赞同：5
> 
> 时间：2013-04-05T16:06:15.373
> 
> 标签：excel, formula

我正在创建一个电子表格，其中一张表上的所有数据和另一张表上的指标。

在单元格的第 1 页上，`A2:A50`我有这种格式的日期（2013 年 4 月 5 日）。在单元格的第 2 页上，`E5`我有四月，我希望它总计在 F5 中创建的采购订单的数量。

我怎样才能做到这一点？

我试过使用

`=COUNTIF('2013'!$A$2:$A$50,'2013 Metrics'!E5)`.

我有一种感觉，因为我的范围是 4/5/13 格式，而我的标准是 4 月，那是行不通的。

我可以使用这个公式计算每月的总支出：

`=SUM(IF(MONTH('2013'!$A$2:$A$19)=4,'2013'!$D$2:$D$19,0))`

但不是每个月有多少 PO 的运气。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T16:31:45.243

使用数据透视表。您可以通过右键单击数据源并单击刷新来手动刷新数据透视表的数据源。否则，您可以设置一个 worksheet_change 宏 - 或者只是一个刷新按钮。数据透视表教程在这里：[http ://chandoo.org/wp/2009/08/19/excel-pivot-tables-tutorial/](http://chandoo.org/wp/2009/08/19/excel-pivot-tables-tutorial/)

1）从您的日期列创建一个月份列（例如`=TEXT(B2,"MMM")`）

![图像1](https://i.stack.imgur.com/ImQ5W.png)

2）从您的日期列创建一个年份列（例如`=TEXT(B2,"YYYY")`）

![图2](https://i.stack.imgur.com/JOYUJ.png)

3）添加一个计数列，每个值都有“1”

![图3](https://i.stack.imgur.com/Vsenc.png)

4) 创建一个包含字段、计数、月份和年份的数据透视表 5) 将年份和月份字段拖到行标签中。确保年高于月，以便您的数据透视表首先按年分组，然后按月分组 6) 将计数字段拖到值中以创建计数计数

![图4](https://i.stack.imgur.com/NU5yQ.png)

有更好的教程我敢肯定只是 google/bing “数据透视表教程”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-13T12:17:06.350

对于任何通过谷歌找到这篇文章的人（就像我一样），这是上面示例中单元格 F5 的正确公式：

```
=SUMPRODUCT((MONTH(Sheet1!$A$1:$A$50)=MONTH(DATEVALUE(E5&" 1")))*(Sheet1!$A$1:$A$50<>"")) 
```

公式假定 Sheet1!A1:A50 中的日期列表和单元格 E5 中的月份名称或缩写（“April”或“Apr”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:15:55.637

Make column B in sheet1 the dates but where the day of the month is always the first day of the month, e.g. in B2 put =DATE(YEAR(A2),MONTH(A2),1). Then make E5 on sheet 2 contain the first date of the month you need, e.g. Date(2013,4,1). After that, putting in F5 COUNTIF(Sheet1!B2:B50, E5) will give you the count for the month specified in E5.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T16:17:36.733

我会在数据表上添加另一列，公式 =month(A2)，然后在该列上运行 countif...如果您仍想使用文本月（'APRIL'），则需要一个查找表来引用名称为月份编号。否则，只需在度量表上使用 4 而不是 April。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-08T10:07:06.013

建议您使用`FREQUENCY`而不是使用`COUNTIF`.

在你的封面；进入，进入等`01/04/2014`_`E5``01/05/2014``E6`

选择要填充的相邻单元格的范围。进入：

```
=FREQUENCY(2013!!$A$2:$A$50,'2013 Metrics'!E5:EN) 
```

（其中 N 是您范围内的最后一行引用）

点击`Ctrl`+ `Shift`+`Enter`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-05T11:49:54.043

在原始公式中使用 count 而不是 sum 你会得到你的结果

**原版**

> =SUM(IF(MONTH('2013'!$A$2:$A$19)=4,'2013'!$D$2:$D$19,0))

**修改一**

> =COUNT(IF(MONTH('2013'!$A$2:$A$19)=4,'2013'!$D$2:$D$19,0))

并用于`ctrl+shift+enter`执行

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-08-23T01:35:32.697

太好了，我也有同样的问题。这是我的答案： COUNTIFS(sheet1!$A:$A,">="&D1,sheet1!$A:$A,"<="&D2)

您不需要指定 A2:A50，除非您希望排除第 50 行之后的日期。从某种意义上说，随着更多 PO 数据进入 sheet1，您不必返回并调整行，这更清晰。

此外，对 D1 和 D2 的引用是每个月的开始和结束日期（分别）。在 sheet2 上，您可以有一个隐藏列，将 April 转换为 2014 年 4 月 1 日，May 转换为 2014 年 5 月 1 日等。然后，D1 将引用包含 4/1/2014 的单元格，D2 将引用该单元格其中包含 2014 年 5 月 1 日。

如果你想求和，它的工作方式相同，除了第一个参数是 sum 数组（列或行），然后其余的范围/数组和参数与 countifs 公式相同。

顺便说一句，这适用于 excel 和 google 表格。干杯

# jquery - 如何使用 jQuery 播放 wav 音频文件？为什么不能解码wav文件？

> ID：15838544
> 
> 赞同：1
> 
> 时间：2013-04-05T16:06:15.497
> 
> 标签：jquery, html, html5-audio

我试图在按下提交按钮时播放一个 wav 文件。出于某种原因，我一直看到此错误：
无法解码媒体资源文件：///Users/Bryan/webapp/buzzer.wav。

我究竟做错了什么？

```
<!DOCTYPE html>   
<html>   
    <head>    
    <meta name="viewport" content="width=device-width, initial-scale=1">   
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />  
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>  
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>  
</head>   

<body>   

<audio id="buzzer" src="buzzer.wav" type="audio/wav">Your browser does not support the &#60;audio&#62; element.</audio>  
<form id='sample' action="#" data-ajax="false">  
    <fieldset>  
     <input value="Start" type="submit">  
     </fieldset>  
</form>  
<script type="text/javascript">  

var buzzer = $('buzzer')[0];  

$(document).on('submit', '#sample', function()  {  
    alert("submitted");  
    buzzer.play();  
    return false;  
});  

</script>  
</body>  
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:10:19.967

听起来问题出在您的 wav 文件上，也可能出在您所在的特定浏览器上。

请参阅此相关帖子：[Firefox 不会使用 HTML5 <audio> 标签播放 .WAV 文件？](https://stackoverflow.com/questions/10404005/firefox-wont-play-wav-files-using-the-html5-audio-tag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T20:11:38.930

请注意，在编写 FireFox 时不会播放 24 位 .wav 文件。将它们转换为 16 位，他们会很高兴。

# java - 使用 AvroMultipleOutputs 创建多个输出文件

> ID：15838547
> 
> 赞同：2
> 
> 时间：2013-04-05T16:06:22.853
> 
> 标签：java, hadoop, mapreduce, hdfs, avro

我有一个使用 AvroKeyOutput 作为输出格式的 Reducer。默认情况下，MapReduce 会将我的所有键写入单个输出文件。我想为每个键值写入一个单独的输出文件。Avro 提供了 AvroMultipleOutputs 方法，但示例很少。Apache [AvroMultipleOutputs](http://avro.apache.org/docs/1.7.4/api/java/org/apache/avro/mapred/AvroMultipleOutputs.html)提供的一个展示了如何在定义作业时预先配置各种输出。示例显示：

工作：
`AvroMultipleOutputs.addNamedOutput(job, "avro1", AvroOutputFormat.class, schema);`
`AvroMultipleOutputs.addNamedOutput(job, "avro2", AvroOutputFormat.class, null);`

减速机：
`amos = new AvroMultipleOutputs(conf);`
`amos.getCollector("avro1", reporter).collect(datum);`
`amos.getCollector("avro2", "A", reporter).collect(datum);`
`amos.getCollector("avro3", "B", reporter).collect(datum);`

但我不知道我需要多少个文件或者它们的名称是什么，因为它是基于我的 reducer 的键值。我该如何修改它以适应动态文件命名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T21:00:40.057

您可以在这种情况下使用的策略：

*   使用仅 Map 作业（零减少任务）
*   有一个命名的多输出配置
*   在将`map()`您的键值用于基本输出路径的过程中`AvroMultipleOutputs.write(String namedOutput, Object key, Object value, String baseOutputPath)`

# r - 在 R 中解析 ISO8601 日期和时间格式

> ID：15838548
> 
> 赞同：10
> 
> 时间：2013-04-05T16:06:24.330
> 
> 标签：r, datetime

这应该很快 - 我们在 R 中解析以下格式：

2013-04-05T07:49:54-07:00

我目前的做法是

```
require(stringr) 
timenoT <- str_replace_all("2013-04-05T07:49:54-07:00", "T", " ") 
timep <- strptime(timenoT, "%Y-%m-%d %H:%M:%S%z", tz="UTC") 
```

但它给了`NA`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T16:14:53.650

`%z`是以小时为单位的有符号偏移量，格式为`hhmm`，而不是`hh:mm`。这是删除最后一个`:`.

```
newstring <- gsub("(.*).(..)$","\\1\\2","2013-04-05T07:49:54-07:00")
(timep <- strptime(newstring, "%Y-%m-%dT%H:%M:%S%z", tz="UTC"))
# [1] "2013-04-05 14:49:54 UTC" 
```

另请注意，您不必删除`"T"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:12:31.593

你没有字符串替换。

NA 只是意味着整体没有工作，所以做它来构建你的表达：

```
R> strptime("2013-04-05T07:49:54-07:00", "%Y-%m-%d") 
[1] "2013-04-05"
R> strptime("2013-04-05T07:49:54-07:00", "%Y-%m-%dT%H:%M") 
[1] "2013-04-05 07:49:00"
R> strptime("2013-04-05T07:49:54-07:00", "%Y-%m-%dT%H:%M:%S")
[1] "2013-04-05 07:49:54" 
R> 
```

此外，由于我从未完全理解的原因 - 但可能与它底层的 C 库函数一起存在，`%z`仅适用于输出，而不是输入。因此，您的 NA 很可能来自您对`%z`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:12:25.457

`strptime("2013-04-05 07:49:54-07:00", "%Y-%m-%d %H:%M:%S", tz="UTC")`给`2013-04-05 07:49:54 UTC`

尝试

```
timep <- strptime(timenoT, "%Y-%m-%d %H:%M:%S", tz="UTC") 
```

# android-sqlite - 在真实设备上调试时访问 db 文件

> ID：15838552
> 
> 赞同：0
> 
> 时间：2013-04-05T16:06:32.207
> 
> 标签：android-sqlite

它是否受到限制（安全原因等）或我的开发环境有问题？我看不到“数据”文件夹中的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T05:57:41.867

[从这里](https://stackoverflow.com/a/11150168/2219600)回答：

如果您使用的是实际设备，除非您对手机进行 root，否则您将无法从外部查看或访问它。

如果您使用的是模拟器，DDMS 视图将让您导航到它并从那里拉取它。

或者，您可能在创建数据库时遇到问题。没有看到您的代码，我们无法判断。

# opencv - 如何检测具有特定角度的角

> ID：15838555
> 
> 赞同：11
> 
> 时间：2013-04-05T16:06:46.677
> 
> 标签：opencv, image-processing, feature-detection, corner-detection

我有一个等边三角形和一个矩形的图像：
![等边三角形和矩形](https://i.stack.imgur.com/RjqWs.png)
我只想检测三角形的 3 个角。我遵循[OpenCV Harris 角点检测器教程](http://docs.opencv.org/doc/tutorials/features2d/trackingmotion/harris_detector/harris_detector.html)，我看到三角形的所有角点的阈值 = 80（当矩形阈值的所有 4 个角点 = 255 时）。但我没有找到阈值和程度之间的联系。

例如，如何找到在 [55,65] 度范围内的角？
这是输出垫[http://pastebin.com/raw.php?i=qNidEAG0](http://pastebin.com/raw.php?i=qNidEAG0)

P/s：我对CV很陌生，希望你能提供更多的细节！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T14:11:42.993

看来我找到了可能的解决方案。我已经在 Mathematica 上实现了它并且能够解释基本步骤。

1.  使用查找角落运算符并采取最强的角落。使用 Harris 算子。 ![角落](https://i.stack.imgur.com/JnClb.png)
2.  查找轮廓（cv::FindContours）。

    ![轮廓](https://i.stack.imgur.com/s9hCG.png)

3.  为每个轮廓中的每个角画一个圆并找到圆和轮廓之间的交点。OpenCV 中没有现成的函数，你应该自己实现它。

    ![十字路口](https://i.stack.imgur.com/0AfF1.png)

4.  现在对于每个角，您都有三个点的坐标：角和轮廓两侧的两个点。[使用点积](http://en.wikipedia.org/wiki/Scalar_product)来评估角度就足够了：

    ![角度估计](https://i.stack.imgur.com/tNUUX.png)

结果：

![发现角落](https://i.stack.imgur.com/h2QGh.png)

# oracle - 使用 SUBSTR 和 INSTR 获取名称的后缀

> ID：15838556
> 
> 赞同：0
> 
> 时间：2013-04-05T16:06:50.610
> 
> 标签：oracle, oracle11g

我需要从姓氏中获取后缀。例如，我可能会得到带有如下后缀的姓氏：*Smith Jr*或*Smith* Jr。或*Smith LCSW*或*Smith JACG*，甚至是这样的：Abardo Torres Jr 或 Abbas Feinberg LCSW 等。

我知道我必须使用 SUBSTR 和 INSTR，但我被卡住了。我只能做以下事情，不能让它工作。谁能帮我？

```
subtr(last_name,instr(last_name,' ',1) + 1
     ,(instr(last_name,' ', instr(last_name,' ',1)+1 - (instr(last_name,' ',1)+1) 
```

即使我可以使它起作用，它也可能仅适用于由 1 个单词 + 后缀组成的姓氏，例如*Smith Jr*，但不适用于由 2 个单词组成的姓氏，例如*Abardo Torres Jr*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:29:57.940

```
select 
  last_name,
  regexp_replace(last_name, '\s*((Esq|KBE|MSc|BSc|Jr|LCSW|PhD|J\.A\.C\.G)\.?\s*)*$') 
    as name_without_suffix,
  regexp_substr(last_name, '((Esq|KBE|MSc|BSc|Jr|LCSW|PhD|J\.A\.C\.G)\.?\s*)*$') 
    as suffix
from your_table 
```

* * *

要简单地获取字符串中的最后一个单词：

```
regexp_substr(string, '(\S+)\s*$', 1, 1, 'i', 1) 
```

[小提琴](http://www.sqlfiddle.com/#!4/7c562/2)

# c# - 将对象中包含的数据动态绑定到 Windows 窗体中的标签

> ID：15838557
> 
> 赞同：2
> 
> 时间：2013-04-05T16:06:55.483
> 
> 标签：c#, reflection

我的程序中有以下数据和对象。

包含以下对象的 DynamicObjectContainer。

1.  `MeasurementParameters : DataContainer`（DataContainer 是基类）

这个对象有很多公共属性，我*只*在运行时`MeasurementParameters`知道它们的名字。我还在基类中设置了内部连接，这样我就可以使用易于使用的接口访问类中包含的属性的值。*`DataContainer``MeasurementParameters`*

 *例如：假设我有一个`MeasurementParameters`名为“pumpspeed”（类型字符串）的属性。我可以使用此函数访问该属性的值。

```
MeasurementParameters.GetStringValue("pumpspeed"); 
```

我通过在`DataContainer`对象构造期间使用反射在对象内部创建委托列表来实现这一点。（这是一次性的事情。）

到目前为止，一切都很好。

现在我被困在我想`MeasurementParameters`在 Windows 窗体中显示这些值的地方。

因为我只知道运行时的属性名称，所以我必须为用户提供一些方法来将属性名称（仅由他在脚本文件中定义）映射到表单中的固定标签。所以用户将映射数据以如下格式保存到表中。

```
Entry : "pumpspeed" "label22" 
```

我想要一种快速有效的方法来从数据库中获取此映射，从`MeasuremetParameters`对象中获取所需的数据并将其显示在 windows 窗体中。

注意：如果这是一次性操作，我有很多解决方案。问题有两个方面。

1.  有大量的属性`MeasurementParameters`（大约 200 处）
2.  该`MeasurementParameters`对象包含不断更新其属性的函数。所以我的 windows 窗体必须调用这些函数来更新`MeasurementParameters`对象数据、获取数据并将其显示在正确的标签中。

此外，这应该以每秒 2 -3 次左右的周期发生。（理想情况下）

任何人都可以帮助我为此设计一个解决方案吗？一般的对象结构和关系建议也会对我有所帮助。

如果需要，我可以发布我正在使用的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:34:36.907

在这里没有看到很大的问题

所以你有表 ObjectID、PropertyName、ControlName

在打开表单/选择对象时，查询它们 用标签的值构建`Dictionary`由 PropertyName 键入的键（通过查询中的控件名称查找`MyForm.Controls.FindByName(Somename).`添加`OnPropertyChangedEvent`到您的类中，在事件中抛出属性的名称args 然后在表单上添加一个处理程序

```
Mappings[e.PropertyName].Text = Object[e.PropertyName].GetStringValue; 
```

可能不得不使用它来处理不是标签或表单上的面板的显示控件，但它应该只是击退。*

# bash - 获取 uniq 行的前 N 次出现，而不仅仅是一个

> ID：15838568
> 
> 赞同：0
> 
> 时间：2013-04-05T16:07:39.940
> 
> 标签：bash, uniq

我有行的文件，其中两个字段由空格分隔：

```
fieldA fieldX
fieldB fieldX
fieldC fieldX
fieldD fieldX
fieldE fieldX
fieldA fieldY
fieldB fieldY
fieldC fieldY 
```

我需要在第二列中获取前 N 行类型。我所做的是 `sort -k2 | uniq -f1 --all-repeated=prepend | grep "^$" -A3` 应该工作但`uniq -f1`给我的东西不同于`uniq -f1 --all-repeated=prepend`. 我是否正确理解 prepend 应该只在唯一块之前添加空行？

还是有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:32:36.073

这是使用的一个想法`awk`：

```
awk -v maxlines=<N> ' ++count[$2] <= maxlines { print } ' 
```

这不需要对文件进行排序（但如果有其他原因，您仍然可以先对其进行排序......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:35:56.710

不，您对 prepend 不太正确。

`prepend`告诉在每个**重复**`uniq`块之前打印一个空白文件。请记住，通过添加选项，您告诉只打印具有重复的行，即那些出现多次的行。它不会像打印出只出现**一次**的行一样。**`--all-repeated``uniq`**`uniq -f1`****

 ****例如，如果您在文件中添加另一行，例如，`fieldA fieldZ`如果您有选项，它将不会被输出，`--all-repeated`因为它只在文件中出现一次。****

# mysql - Jquery UI插入到mysql错误

> ID：15838570
> 
> 赞同：0
> 
> 时间：2013-04-05T16:07:41.290
> 
> 标签：mysql, forms, insert, modal-dialog

我正在制作一个脚本来将一个国家/地区插入我的数据库，但我根本不工作，我尝试了很多方法，但没有运行。我测试了php代码并且插入是正确的，模态窗口可以工作，但是我不能从模态表单中插入国家。我的英语不是很好，但也许你通过代码更了解我，在此先感谢

**形式**

```
<div id="dialog-form" title="insertar pais">
        <form name="registeracc" id="registeracc" action="insertpais.php" method="post">
            <input required type="text" id="pais" name="pais" class="span2" />
        </form>
</div> 
```

**脚本**

```
 $(function(){
            var username=$("#pais").val();
            $( "#dialog-form" ).dialog({
                autoOpen: false,
                height: 200,
                width: 600,
                modal: true,
                buttons: {
                    "Registrar": function() {
                            $.post("insertpais.php", { pais: "pais"} );
                        $(this).dialog("close");
                    }//End function
                }//end buttons
            });//end dialog
    </script> 
```

**插入派斯.php**

```
include("database.inc.php");    
if(isset($_GET['pais']) ){
$pais = $_GET['pais'];
$sql="INSERT INTO countries (id,iso,name) VALUES ('','','$pais')";
mysqli_query($link2,$sql);
} 
```

# iis - IIS - 将所有请求从一个域重定向到特定文件夹

> ID：15838574
> 
> 赞同：0
> 
> 时间：2013-04-05T16:07:48.170
> 
> 标签：iis, iis-7

我在 IIS 上配置了一个网站，并在我的主机文件上配置了多个域以指向我的本地主机。

我的问题是我需要将所有请求从： [http://domain.com/folder/](http://domain.com/folder/)重定向到[http://domain.com/](http://domain.com/)

[所以对http://domain.com/folder/test/image.jpeg](http://domain.com/folder/test/image.jpeg)的请求 应该转化为： [http ://domain.com/test/image.jpeg](http://domain.com/test/image.jpeg)

我无法更改文件，因为我正在尝试模拟 cdn 行为。

任何人都可以帮忙吗？

谢谢若奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:37:03.570

使用[rewrite 模块](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)，您可以使用：

```
<rule name="skip folder" stopProcessing="true">
    <match url="^folder/(.*)$" />
    <action type="Redirect" url="{R:1}" />
</rule> 
```

默认重定向是永久的 (301)。
如果要保留 url`http://domain.com/folder/test/image.jpeg`但显示 content `http://domain.com/test/image.jpeg`，则必须使用重写：

```
<rule name="skip folder" stopProcessing="true">
    <match url="^folder/(.*)$" />
    <action type="Rewrite" url="{R:1}" />
</rule> 
```

# c# - 在 iFrame 中加载 OWA Web 部件，如何通过 windows 身份验证

> ID：15838576
> 
> 赞同：3
> 
> 时间：2013-04-05T16:07:52.540
> 
> 标签：c#, asp.net-mvc, iframe, exchange-server, outlook-web-app

所以我对这个问题做了一些研究。根据此链接：

```
http://technet.microsoft.com/en-us/library/bb232199(EXCHG.80).aspx 
```

在“使用 Outlook 的权限......”部分它说：

> 要使用 Outlook Web Access Web 部件，您必须至少被委派“审阅者”访问您正在打开的内容。如果您已将需要身份验证的 Outlook Web Access Web 部件嵌入到应用程序中，则必须将身份验证信息与对 Web 部件的请求一起传递。**一种方法**是将 Outlook Web Access 虚拟目录配置为使用集成 Windows 身份验证。集成的 Windows 身份验证允许已使用其 Active Directory 帐户登录的用户使用 Outlook Web Access，而无需再次输入其凭据。

这里的系统管理员不想这样做，因为让 OWA 使用集成安全性的回退（如果没有在正确的域上并且身份验证失败）我猜想发送一个带有纯文本密码的表单。据他介绍，还没有研究。

我有一个正在开发的 asp.net MVC4 Intranet 应用程序，它使用 Windows 身份验证。所以两个问题：

1.  有没有办法在不弄乱交换服务器设置的情况下将凭据传递给 iframe？

2.  如果是这样，我该怎么做？

我撒谎了，三个问题：

/3。如果我有交换设置以允许集成 Windows 身份验证，并且我尝试从未经授权的不同域访问该站点，它如何回退到登录表单，这真的存在安全风险吗？

这是 iframe 代码：

```
 <h2>Inbox</h2>
    <iframe  

        src="http://server/exchange/user/?cmd=contents&fpath=inbox"
        width="100%" 
        height="300" 
        sandbox="allow-scripts allow-same-origin"
        seamless 
        frameborder="0"></iframe> 
```

# security - cakePHP 和 CRUD 操作授权

> ID：15838578
> 
> 赞同：1
> 
> 时间：2013-04-05T16:07:54.080
> 
> 标签：security, cakephp

我有一个 cakephp 1.3 应用程序，但我遇到了“数据泄漏”安全漏洞。我正在寻找使用蛋糕的最佳解决方案，而不仅仅是可行的方法。该应用程序是一个成绩跟踪系统，教师可以输入成绩，学生可以检索他们的成绩。一切都按预期工作，但是当我开始审核安全性时，我发现基本的 CRUD 操作存在漏洞。这意味着学生 X 可以看到学生 Y 的成绩。学生应该只看到自己的成绩。我将把这个问题限制在读取操作上。

使用 cake，我有一个带有此视图功能的grade_controller.php 文件：

```
function view($id = null) {
   // Extra, not related code removed
   $this->set('grade', $this->grade->read(null, $id));
} 
```

和

```
http://localhost/grade/view/5 
```

显示学生 $id=5 的成绩。那太棒了。但是，如果学生#5 操作 URL 并将其更改为 6，则会显示第 6 人的成绩。经典的数据泄露安全漏洞。

我对解决这个问题的最佳方法有两个想法。1）我可以为控制器中调用的每个 CRUD 操作添加检查。或者 2) 向模型添加代码（例如使用 beforeFind()）来检查人员 X 是否有权访问该数据元素。

选项 #1 似乎很耗时且容易出错。选项#2 似乎是最好的方法。但是，它需要在某些操作之前调用 find()。上面的 read() 示例从不执行 beforeFind() 并且没有 beforeRead() 回调。

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:20:04.393

与其`read()`在控制器中使用泛型，不如将所有查找、查询等移动到相应的模型中。

然后，检查每个模型并在需要限制的任何发现上添加所需的任何类型的安全检查。1）它将是更多的 DRY 编码，并且 2）您将能够更好地管理这样的安全风险，因为您知道所有查询都保存在哪里。

对于您的示例，我将在我的模型中创建一个`getGrade($id)`方法并根据您的身份验证用户 ID 检查字段（或其他）`Grade``student_id``CakeSession::read("Auth.User.id");`

您还可以构建一些类似于`is_owner()`在多个方法中重用相同逻辑的通用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T06:28:58.963

如果 CakePHP 支持 isAuthorized，你可以这样做：

创建一个具有用户类型的列（例如“学生”、“教师”……）

现在，如果用户类型是“学生”，您可以限制他们的访问权限，只查看他们的数据。isAuthorized 的一个示例如下。我只允许学生编辑他们的个人资料信息。你可以扩展这个概念。

```
if ((($role['User']['role'] & $this->user_type['student']) == $this->user_type['student']) {
      if (in_array($this->action, array('view')) == true) {
                $id = $this->params->pass[0];
                if ($id == $user_id) {
                    return (true);
                }
            } 
        }
} 
```

# javascript - 在 HTML 数据属性上添加 JSON 是不是很糟糕？

> ID：15838593
> 
> 赞同：35
> 
> 时间：2013-04-05T16:08:44.820
> 
> 标签：javascript, html, json

由于 HTML`data`属性允许添加任何自定义数据，我想知道包含一组`JSON`列表作为`data`属性是否是个好主意？然后，`JSON`可以通过`JavaScript`带有 的事件轻松访问相应的内容`getAttribute("data-x")`。

其实我的问题是：将一大组数据添加到一个`HTML`属性中，是否标准、高效、合理？

例如

```
<div data-x="A LARGE SET OF JSON DATA" id="x"> 
```

或者大量的 JSON 数据必须存储在`<script>`标签中，而一个`HTML`属性不是一个适合大量数据的地方，即使对于`data`属性也是如此。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-05T16:47:48.400

您可以使用标识符来访问数据，而不是将所有内容存储在数据属性中。

因此，例如，您可以这样做：

```
var myBigJsonObj = { 
                      data1 : { //lots of data}, 
                      data2 : { //lots of data}                   

                   }; 
```

然后你有一些像这样的html：

```
<div data-dataId="data1" id="x"> 
```

您现在可以使用 jquery 来获取数据，如下所示：

```
var dataId = $('#x').attr('data-dataId');

var myData = myBigJsonObj[dataId]; 
```

这是最好的方法恕我直言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-10T20:31:19.430

假设您要将对象保存`var dataObj = { foo: 'something', bar: 'something else' };`到 html 数据属性。

考虑首先对对象进行字符串化，使得我们有 `var stringifiedDataObj = JSON.stringify(dataObj);`

然后您可以使用 jQuery 将 stringifiedDataObj 设置为数据属性，例如使用`jQuery.data()`API

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-30T13:04:28.423

虽然没有什么可以阻止您在数据属性中嵌入一长串 JSON，但可以说更“正确”的做法是为 JSON 数据的每个属性添加一个数据属性。例如：

Javascript：

```
var dataObj = { foo: 'something', bar: 'something else' } 
```

HTML：

```
<div data-foo="something" data-bar="something else"></div> 
```

这样，JSON 对象中的每条数据都对应于附加到 DOM 元素的单独的、可独立访问的数据。

请记住，无论哪种方式，您都需要转义要插入 HTML 的值 - 否则杂散的 " 字符会破坏您的页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-27T08:06:30.017

从技术上讲，您可以，而且我已经看到几个站点这样做，但另一种解决方案是将您的 JSON 存储在`<script>`标签中，并在属性中放置对脚本标签的引用`data`。如果将数据呈现到页面服务器端，那么这比仅将数据作为 JS 对象存储在实际脚本中更好的解决方案，但是例如对内联脚本标签有 CSP 限制。

HTML

```
<div data-data-id="#MyScriptData" id="x"></div>

<script type="application/json" id="MyScriptData">
{
    "fruit": "apple",
    ...
}
</script> 
```

JS

```
$(function () {
    var dataId = $("#x").data("data-id");
    var dataTag = $(dataId);
    var dataJson = dataTag.html(); // returns a string containing the JSON data
    var data = JSON.parse(dataJson);

    ...
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-27T07:33:40.157

您可以使用[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)。您的元素将成为键，而该键的值可能是您存储所需数据的对象。像这样的东西（虽然没有测试）：

```
(function(global) {

  const map = new Map();

  global.CustomData = {
    add(element, key, data) {
      if (!map.has(element)) {
        map.set(element, {});
      }

      map.get(element)[key] = data;

      return map.get(element);
    },

    get(element, key) {
      if (!map.has(element)) {
        return null;
      }

      if (key !== undefined) {
        return map.get(element)[key];
      }

      return map.get(element)
    },

    remove(element, key) {
      if (!map.has(element)) {
        return false;
      }

      delete map.get(element)[key];

      if (Object.keys(map.get(element)).length === 0) {
        map.delete(element);
      }

      return true;
    },

    clear(element) {

      if (!map.has(element)) {
        return false;
      }

      map.delete(element);

      return true;
    }
  }

})(window);
```

# java - android - 显示变量变化

> ID：15838596
> 
> 赞同：0
> 
> 时间：2013-04-05T16:08:47.083
> 
> 标签：java, android, android-activity

好的 - 我知道必须有一个简单的解决方案，但对于我的生活，我无法弄清楚。

编写一个非常基本的 android 活动来简单地遍历 0-99。我有一个要显示计数的文本视图。发生的情况是它只是保持空白直到结束，然后显示结束计数（99）。

不确定 textview 是否是正确的显示方式或答案是什么。任何帮助是极大的赞赏。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:15:40.523

我的猜测是您`onCreate()`的代码如下：

```
for (int i=0;i<100;i++) {
  tv.setText(String.valueOf(i));
  Thread.sleep(100); // or something to delay for a bit
} 
```

这将为您提供您所描述的输出。

与许多 GUI 框架一样，Android 的 UI 是事件驱动的。呼叫`setText()`不会更新屏幕。相反，它将消息放在队列中，要求更新屏幕。该队列由主应用程序线程处理......`onCreate()`首先调用的同一线程。因此，您正在做的是排队 100 个`setText()`调用，在您的循环完成之前不会处理任何调用。应用其中的 100 个需要很短的时间，给出只看到最后一个变化的视觉结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:31:16.223

尝试在 onCreate 中使用这样的代码（其中`number`定义为字段）：

```
textView.post(new Runnable() {
    @Override
    public void run() {
        number++;
        textView.setText("counting: " + number);
        if (number < 100) {
            textView.postDelayed(this, 50);
        }
    }
}); 
```

**编辑**：代码被编辑为 View 类具有 post 和 postDelayed，它将调用传播到它们在内部具有的 Handler 实例。

您需要阅读一些有关[Handler 类](http://developer.android.com/reference/android/os/Handler.html)的信息。

**警告**：此代码泄漏 Activity 大约 5 秒，不应直接在生产代码中使用。您需要`Runnable`在适当的时候从消息队列中删除（可能在 onDestroy 中，但这取决于您的需要）。

[View.removeCallbacks](http://developer.android.com/reference/android/view/View.html#removeCallbacks%28java.lang.Runnable%29)用于防内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:34:19.497

使用按固定速率安排的计时器。每秒增加一个计数器。在 UI 线程上设置文本。需要时取消计时器。

```
public class MainActivity extends Activity {
TextView _tv;
Timer _t;
int _count=0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    _tv = (TextView) findViewById( R.id.textView1 );
    _t = new Timer();
    _tv.setText(""+_count);
    _t.scheduleAtFixedRate( new TimerTask() {
            @Override
            public void run() {
                _count++;

                runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  { 

                      _tv.setText(""+_count);
                      if(_count==99)
                      {
                          _t.cancel();
                      }
                 }
                 });
            }
        }, 1000, 1000 ); 

    }
@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();

    _t.cancel();
}  
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T17:03:43.223

使用倒数计时器，在下面的代码中，onTick() 将每秒调用一次，在这里您可以每秒显示/更新您的号码。根据您的需要设置间隔。以毫秒为单位。

公共类 TimerActivity 扩展 Activity {

```
private final long startTime = 100 * 1000;
private final long interval = 1 * 1000;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_timer);
    countDownTimer = new MyCountDownTimer(startTime, interval);
    countDownTimer.start();

public class MyCountDownTimer extends CountDownTimer {
    public MyCountDownTimer(long startTime, long interval) {
        super(startTime, interval);
    }

    @Override
    public void onFinish() {
        text.setText("Time's up!");
    }

    @Override
    public void onTick(long millisUntilFinished) {
        text.setText(100 - millisUntilFinished/1000);
    }
} 
```

}

# sql - 这是正确的sql吗？

> ID：15838597
> 
> 赞同：0
> 
> 时间：2013-04-05T16:08:54.280
> 
> 标签：sql

我有一些电子商务网站的优惠券软件。我想一次生成一堆优惠券。它由 2 张桌子组成。1 用于优惠券，1 用于优惠券描述。主键是 coupon_id。

这是执行sql的正确方法吗？coupon_id 会匹配吗？由于它是自动递增的，而且我没有输入我认为应该输入的数字。

编辑：我刚刚重新检查，只有优惠券表中的 coupon_id 字段自动递增，而不是 coupon_description 中的字段

但我不确定使用 2 个插入是否是正确的方法。

```
 INSERT INTO  coupons (
    coupon_id,
    coupon_type,
    coupon_code,
    coupon_amount,
    coupon_minimum_order,
    coupon_start_date,
    coupon_expire_date,
    uses_per_coupon,
    uses_per_user,
    restrict_to_products,
    restrict_to_categories,
    restrict_to_customers,
    coupon_active,
    date_created,
    date_modified
    )
    VALUES (
    '' , '',  '" . substr(md5(uniqid(rand(), true)), 0, 8) ."', '100' , '1' , '06/05/2013' , '06/11/2013' , '1' ,  '1',  '',  '',  '',  '',  '',  '')

    INSERT INTO coupons_description (
    coupon_id,
    language_id,
    coupon_name,
    coupon_description
    )

    VALUES (
    '', '1', 'test coupon', 'test'  

    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:35:27.637

我可能会去“优惠券”表检查最大的优惠券 ID 并在插入中明确指定新 ID。我认为这是防止任何不匹配的更安全的方法。

假设您已经有 100 张优惠券。所以在你的情况下：

```
INSERT INTO  coupons (
    coupon_id,
    coupon_type,
    ...
) VALUES (101 , '', ...);

INSERT INTO coupons_description (
    coupon_id,
    language_id,
    coupon_name,
    coupon_description
) VALUES (101, '1', 'test coupon', 'test') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:12:08.433

我建议要么合并这两个表（它们似乎具有 1:1 的关系），要么更改描述表，以便 coupon_id 是第一个表的外键，并删除自动增量。之后你可以插入到第一个表中，而不是试图猜测要插入到第二个表中的 id，你只需使用 select @@identity; （或选择 scope_identity(); 如果在 sql server 上）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:23:30.797

由于只有一个是自动递增的，我会先插入该表，然后查找该值并将其硬编码到依赖表中。那是：

```
INSERT INTO  coupons (
coupon_type,
coupon_code,
...)
VALUES ('',  '" . substr(md5(uniqid(rand(), true)), 0, 8) ."', '100' ,...). 
```

请注意，coupon_id 不在插入语句中。数据库将自行分配（假设自动增量正在做它应该做的事情）。一些数据库允许你分配这个，但我认为这种形式不好。那么，问题是再次找到该记录。我会使用：

```
select * from coupons order by coupon_id desc; 
```

除非其他人同时添加优惠券，否则您应该会在顶部看到您的优惠券。如果您使用唯一的优惠券名称或描述，将会有所帮助。无论如何，您必须获取分配的 ID，然后在没有自动增量的情况下更新表：

```
INSERT INTO coupons_description (
coupon_id,
language_id,
coupon_name,
coupon_description)

VALUES ('123', '1', 'test coupon', 'test') 
```

其中“123”实际上是您从 select 语句中找到的任何 coupon_id。

但是您的语法看起来确实正确，否则。

# html - 表的 TD 高度没有拉伸到 100%

> ID：15838600
> 
> 赞同：1
> 
> 时间：2013-04-05T16:09:00.570
> 
> 标签：html, css, html-table

我在这里有一张桌子：[http ://www.friedmanllp.com/partnerdetailbiopage3.php?ContID=22](http://www.friedmanllp.com/partnerdetailbiopage3.php?ContID=22)

灰色框的 TD 需要与右手栏 bio 的文字锁定。外围的 TD 只是延伸到内部，而不是内部。

有人有想法吗？

请不要使用表格进行网站设计的讲座，只是试图使这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:14:25.030

两列共享同一个表，因此列的高度必须相同，您必须拆分为两个表，甚至更好地使用 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:48:18.323

不要拘泥于 HTML4.0 规范，尝试使用[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/table)页面中所述[的 HTML5 表格的新功能。](https://developer.mozilla.org/en-US/docs/HTML/Element/table)给那个 td 或 table 一个 class/id 并通过使用所有可能的对齐方法（如,等）来使用它。一切都很容易处理。`margin``padding``text-align` `float`

# xamarin.android - 无法使用计时器、自定义视图和 Xamarin 关闭 AlertDialog

> ID：15838603
> 
> 赞同：2
> 
> 时间：2013-04-05T16:09:13.383
> 
> 标签：xamarin.android, android-alertdialog, splash-screen, xamarin

我想使用 AlertDialog.Builder、自定义视图和计时器制作启动画面。

我正在使用 Xamarin.Android - 我似乎没有“解雇”方法，我可以调用“处置”，但 alertDialog 视图没有关闭。

下面的示例代码：

```
public class SplashDialog
{
    private readonly AlertDialog.Builder _alert;
    private readonly View _view;

    public SplashDialog(Context context)
    {
        _alert = new AlertDialog.Builder(context);

        var layoutInflater = (LayoutInflater)context.GetSystemService(Context.LayoutInflaterService);
        _view = layoutInflater.Inflate(Resource.Layout.splash, null);
        _alert.SetView(_view);

    }

    public void Show()
    {
        _alert.Show();

      /*
        new Thread(() =>
        {
            Thread.Sleep(3000);
            _view.Dispose();
            _alert.Dispose();

        }).Start();
         * */

        new Handler().PostDelayed(() =>
            {
                _view.Dispose();
                _alert.Dispose();

            }, 3000);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T21:02:55.000

确实`AlertDialog.Builder`没有`Dismiss()`方法，但是当您调用时`_alert.Show()`，它会返回一个`AlertDialog`具有该`Dismiss()`方法的实例。您只需要将实例保存在某处并在需要时调用它，就像这样

```
private AlertDialog _dialog;

public void Dismiss()
{
    _dialog.Dismiss();
} 
```

# asp.net - 在ie10中强制浏览器和文档模式为ie9

> ID：15838605
> 
> 赞同：4
> 
> 时间：2013-04-05T16:09:16.997
> 
> 标签：asp.net, html, internet-explorer-10

这段代码：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

似乎只将文档更改为 ie9 而不是浏览器。除了按 F12 并手动更改之外还有什么想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T22:21:30.907

一个站点不能设置浏览器模式。在浏览器从站点请求内容之前选择浏览器模式。这指定了站点如何识别浏览器，例如 UA 字符串。

正如您所提到的，文档模式可以由作者通过包含 X-UA-Compatible 元元素或使用的 DOCTYPE 来设置。这将覆盖浏览器为该浏览器模式设置的默认值。

更改浏览器模式仅对使用 IE 测试早期版本的 IE 将如何处理站点有用。您可以通过在 F12 工具中更改它在本地计算机上更改它（但不能对整个站点进行更改）。

用户（以及开发人员）可以通过单击 URL 字段中的兼容性视图图标来更改浏览器模式。这也将仅适用于该机器，而不适用于所有用户。

全局更改浏览器模式的唯一方法是将站点添加到 MS 的兼容视图列表中。但是您不希望这样，除非该站点使用大量旧的 MS 供应商特定代码，并且不会更新。

您可以在[http://blogs.msdn.com/b/ie/archive/2010/10/19/testing-sites-with-browser-mode-vs-doc-mode.aspx阅读更多内容](http://blogs.msdn.com/b/ie/archive/2010/10/19/testing-sites-with-browser-mode-vs-doc-mode.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-26T20:26:45.443

或者，您也可以更改 Web.config 文件来完成此操作。（您必须在发布后重新启动服务才能看到更改。）

```
<system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="X-UA-Compatible" value="IE=Edge" />
      </customHeaders>
    </httpProtocol>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T14:00:59.347

您可以使用 Internet Explorer 的 FEATURE_BROWSER_EMULATION 功能。

启动regedit.exe，转到

HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION

或者

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION

创建一个 DWORD iexplore.exe 并将值设置为 9999 (0x270F)。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-11-27T12:13:16.740

看到[这个](https://stackoverflow.com/questions/10800290/ie9-force-ie9-browser-mode-and-document-mode)。

您可以通过添加强制最高模式：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# ruby-on-rails - Rails - 复选框调用方法

> ID：15838606
> 
> 赞同：0
> 
> 时间：2013-04-05T16:09:19.963
> 
> 标签：ruby-on-rails, checkbox

我正在为我的公司制作一个“check_list”。表格的每一行都将是一个事件，其中包含 10 多个标有表格标题的复选框。每次单击复选框时，我都想保存该用户的 ID 和日期。有没有办法在不提交表单的情况下调用服务器端方法来保存它？

我只是不想使用提交按钮，因为我需要尽可能多的空间来放置复选框。

我欢迎任何想法或提示/技巧。

我正在使用 Ruby on Rails。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:18:53.623

使用 jQuery，附加到 change 事件，并使用 ajax 调用方法。

# google-apps-script - 用于电子表格的 Google 脚本 - 错误：参数必须是一个范围

> ID：15838610
> 
> 赞同：0
> 
> 时间：2013-04-05T16:09:29.150
> 
> 标签：google-apps-script, google-sheets

我是谷歌脚本的新手，遇到了一些我无法弄清楚的事情。我试图命名一个范围，希望最终将其放入一个数组并用数据填充另一张表。

我在命名范围时遇到了问题。我希望最终能够遍历并命名许多范围，因此我希望能够将变量用于行号。

如果我试试这个：

```
var rngProject = "A8:Y21";
var RngName = "project1"; 
```

然后一切正常，我有一个数组中的数据。但是，如前所述，我想为行号以及范围名称使用变量，如下所示。

如果我试试这个：

```
 var rngProject = "A" + strtRow + ":Y" + totRows + strtRow - 1;
  var RngName = "project" + toString(i); 
```

在这条线上：

```
var rng_to_name = active_spreadsheet.getSheetByName(sheet_name).getRange(address); 
```

我收到错误消息：“参数必须是一个范围。” 在调试器中，地址值显示为 NaN，所以我认为这是不对的。但是我也尝试过使用 strRange （在下面注释掉），我在同一行得到了同样的错误。

有没有办法可以获取这个值并将其转换为范围类型，或者我做错了什么？

```
function namePrjRange () {
  var i = 1
  var strtRow = 8;
  var shtName = "USER INPUT by week: TEST";
  var totRows = 14;
  //var strRange = "A" + toString(strtRow) + ":Y" + toString(totRows + strtRow - 1);
  var rngProject = "A" + strtRow + ":Y" + totRows + strtRow - 1;
  var RngName = "project" + toString(i);

  //Logger.log(strRange);
  Logger.log(rngProject);
  Logger.log(RngName);

  nameRange(shtName, rngProject, RngName);
}

// Given a sheet name (assumed to be in the active spreadsheet, an address using "A1"     notation,
// and a name string, assign that name to the range address in the given sheet.
function nameRange(sheet_name, address, rng_name) {
    // Create an spreadsheet object.
    Logger.log("Entered nameRange function")
    var active_spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
    // Get a range object by firstly getting a sheet object from the spreadsheet object and then pass the
    // "address" argument to the sheet "getRange()" method.
    var rng_to_name = active_spreadsheet.getSheetByName(sheet_name).getRange(address);
    // Use the spreadsheet object method "setNamedRange()" to assign a range name to a range object.
    Logger.log("About to set Named Range");
    Logger.log(rng_name);
    Logger.log(rng_to_name);
    active_spreadsheet.setNamedRange(rng_name, rng_to_name);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:48:16.913

采用：

`var rngProject = "A" + strtRow + ":Y" + (totRows + strtRow - 1);`

当您在此处执行字符串连接时，解析器将尝试将所有内容连接在一起（即实际上并未将 totRows 添加到 strtRow），并最终在到达负号时将其丢弃，这不是有效的字符串运算符。所以你只需要在算术部分周围加上括号。

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#String_operators](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#String_operators)

# javascript - 显示意外逻辑行为的 Javascript 代码

> ID：15838612
> 
> 赞同：0
> 
> 时间：2013-04-05T16:09:41.673
> 
> 标签：javascript, html

我的程序正在响应，表现出意外的行为。

**selectQuestion() 的预期行为：**

随机选择一个问题类别并检查所需的难度级别。搜索问题列表，将任何符合条件但最近未播放的问题添加到潜在问题列表中。如果没有符合此随机选择标准的问题，则重复上述步骤，直到找到问题。

**selectQuestion() 的实际行为：**

`selectQuestion()`将选择 中的问题`recentQuestions[]`，而不是随机选择新类别。

**附加信息：**

`dda[]`是一个对象数组，每个对象都有 a`category`和 a `difficulty`。

`question[]`是一个对象数组，每个对象都有一个`question`, `answers[]`, `correctAnswer`,`category`和`difficulty`.

`recentQuestions[]`是一个整数数组。（每个整数是一个问题的索引`question[]`）

```
function selectQuestion()
{
    //Create an array we can use to store the numbers of any questions which meet our criteria
    var potentialQuestions = new Array();
    // While there are no questions which meet our criteria, pick new critieria
    // (This prevents the program from getting 'stuck' if criteria can't be met)
    while(potentialQuestions.length == 0) {
        // Select a category at random, retrieve the difficulty we're looking for
        var randomSelection = Math.floor(Math.random()*dda.length);
        var category = dda[randomSelection].category; 
        var difficulty = Math.floor(dda[randomSelection].difficulty+0.5);
        // For each question we have (in question[]) 
        for(q = 0; q < question.length; q++) {
                    // If the category and the difficulty meet our criteria
            if(question[q].category == category & question[q].difficulty == difficulty) {
                            // Check if the question has been played recently
                            // by looping through recentQuestions[] 
                var playedRecently = false; 
                for(r = recentQuestions.length; r=0; r++) {
                    if(recentQuestions[r] == q) {
                        playedRecently = true; 
                    }
                }
                // If the question has not been played recently 
                if(!playedRecently) {
                                    // Add it to potentialQuestions[]
                    potentialQuestions.push(q); 
                }
            }
        }
    }

    // Select a question at random from our potential questions 
    var selectedQuestion = potentialQuestions[Math.floor(Math.random()*potentialQuestions.length)]; 

    // If 5 recent questions have been stored, remove the oldest 
    if (recentQuestions.length == 5) {
        recentQuestions.shift(); 
    }

    // Add the selected level to recentQuestions[]
    recentQuestions.push(selectedQuestion); 
    return selectedQuestion; 
} 
```

我不确定这种行为来自哪里。任何想法都将受到欢迎！谢谢！

**解决了！**

`for (r= recentQuestions.length; r=0; r++)`事实上应该是`for (r=0; r<recentQuestions; r++)`- 绝对是那些日子之一！呸！谢谢大家:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:17:48.647

第二个答案和第一个一样。您在 for 循环条件中有一个分配，而不是比较。（`=`而不是`==`）。

看起来你也打算倒计时？那么，你的增量应该是`r--`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:10:44.593

在您的 if 语句中，您有一个`&`; 你可能想要一个`&&`. `&`是按位与，而不是逻辑与。

# javascript - 如何在 jQuery 之前加载的闭包中检查/使用 jQuery？

> ID：15838614
> 
> 赞同：0
> 
> 时间：2013-04-05T16:09:54.017
> 
> 标签：javascript, jquery, closures

我有一个包含我的闭包的 js 文件，这个文件是在 jQuery 之前加载的，假设它不能移动。如何传入或检查 jQuery 以在闭包中使用它？

这是我到目前为止所得到的：

```
(function MyClosure() {

    var interval = setInterval(function() {
        if (typeof jQuery !== 'undefined') {
            doJqueryStuff();
            clearInterval(interval);
        }
    }, 500);

    function doJqueryStuff() {
        // Some stuff with jQuery.
    }
})(); 
```

它确实有效，但有没有“更好”的方法？每当我用于这样的事情时，我总是认为我做错了什么`setInterval()`，而且我在那 500 毫秒内浪费了时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T16:24:52.923

您可以等待并将您的执行附加到`window.onload`事件，假设在加载窗口后加载 jQuery...

```
window.onload = function() {
    // do stuff with jQuery
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:27:36.113

别担心 - 虽然它看起来确实很老套（至少对我和你来说），但它还不错。很多时候你需要等到一个复杂的对象被初始化并且你需要做同样的事情。最好的办法是确保脚本加载的顺序以解决任何依赖问题 - 但根据您的要求，让我们假设无法调整顺序。

我建议的唯一改进是：向匿名 setInterval 函数添加一个逃生舱口。这样，如果 jQuery 由于某种原因永远不可用，脚本可以通知用户并停止检查。

```
var checkCount = 0;
var interval = setInterval(function() {
    if (checkCount++ > 20) {
        alert("jQuery could not be loaded - degrading user experience");
        clearInterval(interval);
    }
    if (typeof jQuery !== 'undefined') {
        doJqueryStuff();
        clearInterval(interval);
    }
}, 500); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:05:52.440

等待脚本标签上的 onload 事件。在这种情况下，doJqueryStuff 应该是一个全局函数。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" onload='doJqueryStuff()'></script> 
```

# log4cxx - log4cxx：基于时间的滚动不起作用

> ID：15838616
> 
> 赞同：1
> 
> 时间：2013-04-05T16:10:16.343
> 
> 标签：log4cxx

我想通过 xml 配置 log4cxx，以便每分钟滚动一次我的日志文件。我尝试使用以下 log4j.xml 文件，但它似乎只是有时随机工作。我也尝试使用 TimeBasedRollingPolicy 处理另一个 xml 文件，但它不起作用。任何帮助，将不胜感激。

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">  

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
    <appender name="appxRollingAppenderDaily" class="org.apache.log4j.rolling.RollingFileAppender">
        <rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
            <param name="FileNamePattern" value="TimeBasedLog.%d{yyyy-MM-dd-HH-mm}.log"/>
            <param name="activeFileName" value="appxDailyLog.log"/>
        </rollingPolicy>

        <layout class="org.apache.log4j.PatternLayout">
             <param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss,SSS} %x [%p] (%F:%L) %m%n"/>
        </layout>
        <param name="file" value="appxDailyLog.log"/>
        <param name="append" value="true"/>
    </appender>

    <root>
        <priority value="all" />
        <appender-ref ref="appxRollingAppenderDaily"/>
    </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:47:13.130

尝试这个：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"> 
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"> 

    <appender name="appxRollingAppenderDaily" class="org.apache.log4j.DailyRollingFileAppender"> 
      <param name="Threshold" value="ALL"/> 
      <param name="file" value="./appxDailyLog.log"/> 
      <param name="DatePattern" value="'.'yyyy-MM-dd" /> 
      <layout class="org.apache.log4j.PatternLayout"> 
<!--        <param name="ConversionPattern" value="%p %t %c - %m%n"/> --> 
<!--        <param name="ConversionPattern" value="%d{ISO8601} [%15.15t] %-5p %l - %m%n"/> --> 
<!--        <param name="ConversionPattern" value="%d{ISO8601} [%-8.8t] %-5p (%t) - %m%n"/> --> 
        <param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss,SSS} %x [%p] (%F:%L) %m%n"/> 
      </layout> 
    </appender> 

    <root> 
      <priority value="ALL" /> 
      <appender-ref ref="appxRollingAppenderDaily"/> 
    </root> 

    </log4j:configuration> 
```

# .htaccess - .htaccess 和 magento

> ID：15838618
> 
> 赞同：0
> 
> 时间：2013-04-05T16:10:20.543
> 
> 标签：.htaccess, magento

我正在尝试用来`.htaccess`处理 404，但由于某种原因，默认页面 CMS/indes/noRoute 一直在干扰，有没有办法使用 .htaccess 而不是默认的无路由来更改 magento 的 404，这个想法是发送 404包含他们正在寻找的关键字的搜索结果。我之前让它在其他网站上工作，但在 magento 上，他们有一种奇怪的处理 404 的方式，我不知道如何绕过它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:37:41.510

一种可能的方法是重写 Mage_Core_Controller_Varien_Router_Default 类，该类正在重定向到 noroute。您可以重定向到您自己的控制器，该控制器正在显示搜索结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-31T17:16:17.957

是的，您可以使用 .htaccess 来完成。请在您的 .htaccess 文件中尝试以下代码。

```
ErrorDocument 404 http://demowebsite.com/custom404error.php 
```

custom404error.php 可以是您想要显示为 404 错误的任何网页。这个技巧对我有用。

# jquery - jquery css 和单选按钮

> ID：15838619
> 
> 赞同：-2
> 
> 时间：2013-04-05T16:10:27.840
> 
> 标签：jquery, css

有人可以告诉我（并记住我只是在玩），为什么这不起作用：

```
$('.radio input[type="radio"]').css('margin-top', '-5px'); 
```

我想要它做的只是将带有assign css属性的单选框向上移动-5px。但它不会这样做。我已经在网上看到过这样的例子，你可以通过这种方式向 CSS 对象添加属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:12:18.333

你试过这个吗？

```
$('input[type="radio"]').css('margin-top', '-5px'); 
```

# node.js - Node.js 请求网页

> ID：15838623
> 
> 赞同：8
> 
> 时间：2013-04-05T16:10:36.733
> 
> 标签：node.js, http

我需要连接到一个网页并返回页面的状态代码，我已经能够使用它来实现，`http.request`但是我需要请求的页面可能需要很长时间，有时是几分钟，所以我总是得到一个`socket hang up`错误。

到目前为止，我正在使用以下代码：

```
var reqPage = function(urlString, cb) {
    // Resolve the URL
    var path = url.parse(urlString);
    var req = http.request({
        host: path.hostname,
        path: path.pathname,
        port: 80,
        method: 'GET'
    });
    req.on('end', function() {
        cb.call(this, res);
    });
    req.on('error', function(e) {
        winston.error(e.message);
    });
}; 
```

我需要做些什么来确保我的应用程序仍然尝试连接到页面，即使它需要几分钟？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T16:19:16.733

使用[请求](https://github.com/mikeal/request)模块并将超时选项设置为适当的值（以毫秒为单位）

```
var request = require('request')
var url = 'http://www.google.com' // input your url here

// use a timeout value of 10 seconds
var timeoutInMilliseconds = 10*1000
var opts = {
  url: url,
  timeout: timeoutInMilliseconds
}

request(opts, function (err, res, body) {
  if (err) {
    console.dir(err)
    return
  }
  var statusCode = res.statusCode
  console.log('status code: ' + statusCode)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:24:27.780

如果您不想使用更高级别的 http 客户端（如[request](https://github.com/mikeal/request)或[superagent](https://github.com/visionmedia/superagent) ），请添加此内容，然后添加此内容...

```
req.on("connection", function(socket){
    socket.setTimeout((1000*60*5)); //5 mins  
}); 
```

# jquery - jQuery：仅当元素存在时如何做某事？

> ID：15838628
> 
> 赞同：2
> 
> 时间：2013-04-05T16:10:49.983
> 
> 标签：jquery

我是 jQuery 新手，我认为这个问题已经回答了很多次。但我不能建议如何找到它。在编写 jQuery 代码时，我经常编写重复选择器的结构：

```
if( $( ".someclass .someclass #someid" ).filter( ":visible" ) )
{
  $( ".someclass .someclass #someid" ).filter( ":visible" ).click();
  // This must be executed only if element was found.
  return;
}
// This must be executed only if first element not found
if( $( ".someotherclass #someotherid" ).filter( ":hidden" ) )
{
  $( ".someotherclass #someotherid" ).filter( ":hidden" ).show();
  return;
} 
```

如您所见，选择器文本是重复的。有没有办法在“if()”中重用最后匹配的选择器的结果？例如，类似：

```
if( $( ".someclass .someclass #someid" ).filter( ":visible" ) )
{
  $( ":last-result" ).click();
  return;
}
if( $( ".someotherclass #someotherid" ).filter( ":hidden" ) )
{
  $( ":last-result" ).show();
  return;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:11:40.113

简单地不要测试，如果没有匹配的元素，这不会产生任何错误：

```
$( ".someclass .someclass #someid:visible").click(); 
```

话虽这么说，因为您只能拥有一个具有给定 id 的元素，您可能应该使用

```
$("#someid:visible").click(); 
```

现在，假设你真的想做一个测试，那么你可以使用

```
$("#someid:visible").each(function(){
     var $element = $(this);

     // use $element

}); 
```

另一个基本解决方案是在测试之前缓存您的元素：

```
 var $element = $("#someid");
 if ($element.is(":visible")) {
     // use $element
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:17:24.893

如果你真的只想在元素存在的情况下做某事

```
$('element').length == 0; // no element found 
```

通过使用该`.length`属性，我们可以测试元素是否存在，或者是否已在页面中找到。

[阅读更多](https://stackoverflow.com/questions/31044/is-there-an-exists-function-for-jquery)

# angularjs - 可以在不定义 CSS3 类或 JavaScript 的情况下使用 ngAnimate 吗？

> ID：15838636
> 
> 赞同：3
> 
> 时间：2013-04-05T16:11:15.953
> 
> 标签：angularjs, ng-animate

是否可以在没有任何 CSS3 或 JavaScript的情况下使用[ngAnimate ？](http://code.angularjs.org/1.1.4/docs/api/ng.directive%3angAnimate)假设您只需要切换不透明度，您可以在标记中进行吗？

```
<div ng-show='foo == 'yes'' ng-animate="show: 'opacity:1', hide: 'opacity:0'" >
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:28:56.093

浏览器中的动画要么需要通过 (1) 让浏览器的渲染引擎通过 CSS 处理它，要么 (2) 自己使用 JavaScript 控制它。所以，在某个地方，这两件事中的一件需要发生。

也就是说，您可以构建自己的指令，即时*构建*正确的 CSS 和/或 JavaScript 并将其附加/应用到给定元素，但我相信`ngAnimate`按照提供的方式使用可能更容易。

第一次进入的例子`ngAnimate`：

HTML：

```
<div ng-show="foo == 'yes'" ng-animate="{show: 'fade'}"></div> 
```

CSS：

```
.enter-fade {
  -webkit-transition: 1s linear opacity;
  -moz-transition: 1s linear opacity;
  -o-transition: 1s linear opacity;
  transition: 1s linear opacity;

  opacity: 0;
}

.enter-fade.enter-fade-active {
  opacity: 1;
} 
```

或者，如果您支持不支持 CSS3 过渡的浏览器，则可以使用 JavaScript 进行过渡：

```
myModule.animation('fade', function() {
  return { 
    setup : function(element) {
      element.css({'opacity': 0}); 
    },
    start : function(element, done, memo) {
      element.animate({'opacity': 1}, function() {
        done(); 
      });
    }
  };
}); 
```

您可以在这些很棒的 Yearofmoo 文章中找到更多信息：

*   [AngularJS 中的动画](http://www.yearofmoo.com/2013/04/animation-in-angularjs.html)
*   [AngularJS 中的增强动画](http://www.yearofmoo.com/2013/05/enhanced-animations-in-angularjs.html)

# cocos2d-iphone - cocos2d，将图像分割成单独的 RBG 通道？

> ID：15838646
> 
> 赞同：0
> 
> 时间：2013-04-05T16:11:56.420
> 
> 标签：cocos2d-iphone, opengl-es-2.0

我想创建一个效果，在我的角色被杀死后，角色精灵的红色、蓝色、绿色通道会分成不同的方向。

类似的东西> [http://active.tutsplus.com/tutorials/effects/create-a-retro-crt-distortion-effect-using-rgb-shifting/](http://active.tutsplus.com/tutorials/effects/create-a-retro-crt-distortion-effect-using-rgb-shifting/)

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:14:59.673

在片段着色器中查找各个颜色时，您可以添加不同的偏移量。为了提高效率，您可能应该首先渲染到中间缓冲区。

以下是如何执行此操作的示例：

```
vec4 mainOld( vec2 offset ) {

    ... (gl_FragCoord.xy + offset) ...
}

void main( void ) {
    vec4 foo;
    foo.r = mainOld(vec2(-3.0, 0.0)).r;
    foo.g = mainOld(vec2(0.0, 5.0)).g;
    foo.b = mainOld(vec2(0.0, 0.0)).b;
    foo.a = mainOld(vec2(0.0, 0.0)).a;
    gl_FragColor = foo;
} 
```

基本上，原来的着色器现在被调用了 3 次，所以效率有点低，这就是我建议使用缓冲区的原因，但这可能是过早的优化。

您可以在此处的实际着色器中查看上述代码的结果：http: [//glsl.heroku.com/e#7971.0](http://glsl.heroku.com/e#7971.0)（不确定这些链接的持久性，抱歉）

# android - DialogFragment 中的 ViewPager，IllegalStateException: Fragment 没有视图

> ID：15838649
> 
> 赞同：5
> 
> 时间：2013-04-05T16:12:06.237
> 
> 标签：android, android-fragments, android-viewpager

**EDIT3：似乎只有 API17 及更高版本才能让 ViewPager 与 ChildFragmentManager 一起正常工作............**

我正在尝试向`ViewPager`我的 DialogFragment 添加一个：

```
public class FirstLaunchDialogFragment extends DialogFragment {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NORMAL, R.style.Theme_Sherlock_Light_Dialog);
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    final View v = getActivity().getLayoutInflater().inflate(
            R.layout.fragment_dialog_first_launch, null);
    ViewPager viewPager = (ViewPager) v.findViewById(R.id.pager);

    viewPager.setAdapter(new FirstLaunchFragmentsAdapter(getChildFragmentManager()));

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setView(v).setInverseBackgroundForced(true);
    return builder.create();
}
} 
```

由于某些原因，它会崩溃说：

```
04-06 00:00:49.600: E/AndroidRuntime(3734): java.lang.IllegalStateException: Fragment does not have a view
04-06 00:00:49.600: E/AndroidRuntime(3734):     at android.support.v4.app.Fragment$1.findViewById(Fragment.java:1425)
04-06 00:00:49.600: E/AndroidRuntime(3734):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:901)
04-06 00:00:49.600: E/AndroidRuntime(3734):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
04-06 00:00:49.600: E/AndroidRuntime(3734):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
04-06 00:00:49.600: E/AndroidRuntime(3734):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
04-06 00:00:49.600: E/AndroidRuntime(3734):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
..... 
```

我已经在谷歌上搜索`Fragment does not have a view`了半天没有结果

在我看来，适配器无法膨胀布局或其他东西......

这是我的片段和适配器

```
public static class UserWelcomeFragment extends Fragment {

    public static UserWelcomeFragment newInstance() {
        return new UserWelcomeFragment();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_welcome_user, container, false);

        return v;
    }

}

private class FirstLaunchFragmentsAdapter extends FragmentPagerAdapter {

    public FirstLaunchFragmentsAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int arg0) {
        switch (arg0) {
        case 0:
            return UserWelcomeFragment.newInstance();

        case 1:
            return new IntegrationSelectingDialogFragment();

        default:
            return UserWelcomeFragment.newInstance();
        }

    }

    @Override
    public int getCount() {
        return 2;
    }

} 
```

**编辑：[https](https://code.google.com/p/android/issues/detail?id=42601) ://code.google.com/p/android/issues/detail?id=42601看起来相关**

**EDIT2：我正在对 API 16 进行测试，并且该项目正在使用支持库 v4 修订版 12**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:14:03.003

您在哪个 Android 版本上进行测试？ViewPager 使用片段，并且因为您的 ViewPager 位于片段本身中，所以您正在嵌套片段。仅 API 17 (Jellybean) 支持嵌套片段，因此此实现仅适用于 Android 4.1+ 的设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T17:17:40.357

当我`setContentView()`在轮换后忽略调用时出现此错误。我想我可能也一直在尝试设置片段`onResume()`——这导致了非法状态（试图将片段添加到不存在的视图中）。

所以对我来说，删除的解决方案

```
android:configChanges="keyboardHidden|orientation" 
```

从我的清单中，并检查`savedInstanceState`/ `Bundle`in `onResume`（所以我可以确保让系统重新创建我的片段，而不是自己添加它们。

虽然由于这个错误有点神秘，但可能有比我的问题/解决方案更多的原因

编辑：一些简单/有用代码的链接：

[旋转时保留片段对象](https://stackoverflow.com/questions/5164126/retain-the-fragment-object-while-rotating)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-19T12:07:53.607

确保您在片段的 onCreateView() 方法中返回 rootView。

```
@Nullable
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    rootView = inflater.inflate(R.layout.fragment_layout, container, false);

    getChildFragmentManager().beginTransaction().add(R.id.fragment_container, MyFragment.getInstance() ).commit();

    return rootView;
} 
```

否则，android 将在活动的 XML 中搜索片段容器。

# sql - 根据状态修改列值，并添加额外的行。(SQL)

> ID：15838656
> 
> 赞同：0
> 
> 时间：2013-04-05T16:12:20.130
> 
> 标签：sql, sql-server, sql-server-2008

在我的表中，我有一个“名称”列和一个“状态”列。
状态为真或假。
另一个表包含一个数字，即总金额。

我想要得到的结果是一个包含两列的表：名称 | 数据的状态
和示例：

一个 | 可用
一个| 可用
一个| 不可用
| 不可用
| 可用的

当“a”在名称列中并且可用性是状态列时。

第二个表中的总数表示我需要拥有的“a”行的总数，状态取决于原始表中状态列的真/假。

如果状态为“真”，我需要写“可用”，当“假”时，则“不可用”。

如果总金额值大于我在第一个表中的数据，我需要根据状态为“可用”的总金额添加行。

例如，如果我有 3 条记录“a”，当一条状态为“true”，另外两条状态为“false”，总金额为 4，结果我需要得到 4 行名称“a”，其中 2 个“可用”和 2 个“不可用”（给定的 3 行，加上一行使其成为 4）。

我的问题是，如何根据表中的数据更改值？（写可用/不可用）
以及如何添加一定数量的具有预设值的行（与以前相同的名称，以及“可用”状态）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:13:49.360

> *“...如何根据表中的数据更改值？”*

您可以使用`CASE()`来测试列的值。

```
SELECT  name,
        CASE WHEN status = 'true' 
            THEN 'available' 
            ELSE 'not available' 
        END status
FROM    tableName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:54:25.943

对于未来的答案寻求者：

要获得“假”行，一种方法是使用递归 CTE：

```
WITH Expanded_Data as (SELECT Counted_Data.name, 
                              CAST('true' as VARCHAR(5)) as status, 
                              Counted_Data.count + 1 as count, 
                              Total.count as limit
                       FROM (SELECT name, COUNT(*) as count
                             FROM Data 
                             GROUP BY name) Counted_Data
                       JOIN Total 
                         ON Counted_Data.name = Total.name
                            AND Counted_Data.count < Total.count
                       UNION ALL
                       SELECT name, status, count + 1, limit
                       FROM Expanded_Data 
                       WHERE count < limit)

SELECT name, CASE WHEN status = 'true' 
                  THEN 'available'
                  ELSE 'not available' END
FROM (SELECT name, status
      FROM Data
      UNION ALL
      SELECT name, status
      FROM Expanded_Data) d; 
```

（有一个有效的[SQL Fiddle 示例](http://sqlfiddle.com/#!3/082ab/22)。）

不过，我有点担心源数据中的初始重复；我只能希望还有更多“独特”的信息。

# heroku - 提交 heroku - 不是 git 存储库错误

> ID：15838658
> 
> 赞同：0
> 
> 时间：2013-04-05T16:12:20.747
> 
> 标签：heroku, github, heroku-toolbelt

我已将我的应用程序从 heroku 克隆到我的计算机并进行了更改。现在，我正在尝试提交这些更改...

我已经通过终端登录heroku并写道：**git commit -am "add widget" git push heroku master**

我收到以下错误：**“不是 git 存储库或任何父目录：.git”**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:25:46.220

I solved the problem entering in folder from my application

# html - 和高度和布局麻烦

> ID：15838667
> 
> 赞同：0
> 
> 时间：2013-04-05T16:12:33.017
> 
> 标签：html, css, height, wrapper

我有两个页面，页面 A 有很多内容，需要向下滚动，页面 B 内容很少，只占浏览器窗口的一半。我试图在两个页面的最底部放置一个页脚，无论其内容的大小如何。

这是我一直在尝试做的。我在体内有两个容器，一个用于页脚，一个用于其他所有内容，称之为 main-wrapper。我已经在包装纸和主体周围设置了边框，以查看它们占据的位置。Main wrapper 将占据页面 A 上的所有内容，但在页面 B 上它只会围绕实际内容，它的底部边框位于页面的一半，即使 body 占据了整个屏幕。我已将主整经机高度设置为 100%，那为什么不占用全身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:37:11.590

这就是我处理这种情况的方式。听起来您需要在主包装器上设置最小高度，而不仅仅是将其高度设置为填充容器的 100%。由于屏幕尺寸因用户而异，您需要使用一点 javascript/jquery 来尝试计算页面高度。尝试这样的事情

```
$(document).ready(function() {
   var pageHeight = $("body").height();
   pageHeight -= 200; // Whatever the height of your footer is. Make sure to subtract that out
   $("#main-wrapper").css("min-height", pageHeight + "px");
}); 
```

# c# - 通过引用 BackgroundWorker 传递参数

> ID：15838668
> 
> 赞同：-2
> 
> 时间：2013-04-05T16:12:35.407
> 
> 标签：c#, winforms, visual-studio-2010

我需要调用一个 C dll 作为后台进程。dll 的执行很耗时，因此我想在主 GUI 上显示一个进度条。为了使用 ReportProgress，我需要能够通过引用传递两个参数，并在参数值发生变化时更新进度条。但是， RunWorkerAsync 似乎只接受值（而不是引用）。

我该怎么做？

谢谢。

这是简化的代码：

```
public void button1_Click(object sender, EventArgs e)
    {
       //Variable declarations and initializations

       List<object> arguments = new List<object>();
                arguments.Add(curgen);
                arguments.Add(dataindex);

        backgroundWorker1.RunWorkerAsync(arguments);
        backgroundWorker1.ReportProgress(curgen * 100 / ngen, "GEN");
        backgroundWorker1.ReportProgress(dataindex * 100 / (DIMENSION * FITNESSCASES), "DATA");

    }

 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        List<object> genericlist = e.Argument as List<object>;
        // Getting variables from object
         calldll.gpinnovization(ref curgen, ref dataindex);
    } 
```

我想通过引用传递“curgen”和“dataindex”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:24:05.223

您可以为事件处理程序使用 lambda`DoWork`来关闭变量（请注意，闭包关闭变量，而不是值，因此这不会只是复制值）。从那里您可以在 lambda 中直接完成工作，或者通过引用将变量传递给其他方法。

```
int someValue = 5;

BackgroundWorker worker = new BackgroundWorker();
worker.DoWork += (s, args) =>
{
    ProcessValue(ref someValue);
};
worker.RunWorkerAsync(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-08T09:30:58.747

为了他人的利益，这就是我最终做到的方式。感谢 Servy 建议 lambda 表达式：

```
 BackgroundWorker backgroundWorker1 = new BackgroundWorker();
        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.DoWork += (s, args) =>
            {
                Mydll.MyCfunction(ref curgen, ref dataindex);
            };
        backgroundWorker1.RunWorkerAsync();
        backgroundWorker1.ProgressChanged += backgroundWorker1_ProgressChanged;

        while (backgroundWorker1.IsBusy)
        {
            backgroundWorker1.ReportProgress(curgen * 100 / ngen, "GEN");
            backgroundWorker1.ReportProgress(dataindex * 100 / (DIMENSION * FITNESSCASES), "DATA");
            Application.DoEvents();
        }

private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e1)
    {
        switch (e1.UserState.ToString())
        {
            case "GEN":
                progressBar1.Value = e1.ProgressPercentage;
                break;
            case "DATA":
                progressBar2.Value = e1.ProgressPercentage;
                break;
        }

    } 
```

# vbscript - WShell.Run 返回 143

> ID：15838679
> 
> 赞同：0
> 
> 时间：2013-04-05T16:12:53.470
> 
> 标签：vbscript

我正在使用 WShell.Run 从 VB 脚本调用 java 代码。它返回一个代码 143。这是什么意思？我在哪里可以获得运行方法可以返回的错误代码列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T20:15:49.130

这是对[系统错误代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)的参考。

> ERROR_SAME_DRIVE 143 (0x8F) 系统无法将驱动器加入或替代同一驱动器上的目录。

**PS**我认为下一个笔记是不可能的，但以防万一......

请注意，对于大多数代码，`Err`对象具有“虚拟” `Description`（*未知运行时错误）。*如果您想获得包含所有合理描述的过滤列表，您可以执行以下操作：

```
With CreateObject("InternetExplorer.Application")
    Const DUMMY = "Unknown runtime error"
    ReDim aryLines(15999)
    Dim cnt, i, w, h
    cnt = -1

    .Navigate "about:blank"
    .Document.Title = "Error Codes " & String(100, Chr(1))
    .ToolBar        = False
    .Resizable      = True
    .StatusBar      = False
    .Width          = 420
    .Height         = 380

    With .Document.ParentWindow.Screen
        w = .AvailWidth
        h = .AvailHeight
    End With
    .Left = (w - .Width ) \ 2
    .Top  = (h - .Height) \ 2

    Do While .Busy : WScript.Sleep 200 : Loop

    On Error Resume Next
    With Err
        For i = 1 To 15999
            .Raise i
            If .Description <> DUMMY Then
                cnt = cnt + 1
                aryLines(cnt) = AddZero(i) & .Description
            End If
            .Clear
        Next
    End With
    On Error GoTo 0

    ReDim Preserve aryLines(cnt)
    .Document.Body.InnerHTML = "<pre id=x>" & Join(aryLines, vbNewLine)
    .Document.Body.Style.overflow = "auto"
    .Document.All.X.Style.fontFamily = "Verdana, sans-serif"
    .Visible = True
End With

Function AddZero(nVar)
    AddZero = "<b>" & Right("00000" & nVar, 5) & "</b> "
End Function 
```

![截屏结果](https://i.stack.imgur.com/7OyTN.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:23:37.930

this code returned by your java application. From [MSDN](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)

*The following VBScript code does the same thing, except it specifies the window type, waits for Notepad to be shut down by the user, and saves the error code returned from Notepad when it is shut down.*

```
Set WshShell = WScript.CreateObject("WScript.Shell")
Return = WshShell.Run("notepad " & WScript.ScriptFullName, 1, true) 
```

* * *

# asp.net-mvc - ASP.NET MVC4 表单身份验证 - 在对用户进行身份验证时，我如何知道我的应用正在寻找哪个数据库？

> ID：15838681
> 
> 赞同：1
> 
> 时间：2013-04-05T16:13:00.977
> 
> 标签：asp.net-mvc, asp.net-membership, forms-authentication, aspnetdb

我希望这个问题的答案和我想的一样直截了当。我只是想确定一下。所以，我有一个使用表单身份验证的 ASP.NET MVC4 应用程序。我有一个由 Arvixe 托管的数据库，其中包含 aspnet_ 成员表。这是我在 web.config 的连接字符串中指定的数据库。那么，当我点击我的应用程序的 Login.cshtml 页面并输入我的凭据时，它是否针对我在 web.config 中指定的数据库中的数据进行身份验证？

带来这个问题的原因是我通过 MyWSAT（允许管理用户帐户、角色等的第三方网站管理工具）在我的数据库中设置了一个用户。我已经确认该用户现在已添加到 aspnet_Membership 和 aspnet_User 表（以及任何其他表）中。但是，当我尝试使用我的应用程序中的这些凭据登录时，它`Membership.ValidateUser`在我的 AccountController 中失败。它回来说无效的用户名/密码。关于我可能做错了什么的任何想法？

这是我的会员提供商：

```
<membership defaultProvider="SqlMembershipProvider" userIsOnlineTimeWindow="15">
  <providers>
    <add
      name="SqlMembershipProvider"
      type="System.Web.Security.SqlMembershipProvider"
      connectionStringName="DefaultConnection"
      applicationName="/"
      enablePasswordRetrieval="true"
      enablePasswordReset="true"
      maxInvalidPasswordAttempts="5"
      requiresQuestionAndAnswer="true"
      requiresUniqueEmail="true"
      passwordFormat="Encrypted" />
  </providers>
</membership> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:22:23.080

你看到下面的“connectionStringName”了吗？这命名了它使用的连接字符串。因此，请查看您的 web.config 并找到名为“DefaultConnection”的连接字符串，并确保它指向正确的数据库或更改 connectionStringName 以指向正确的连接字符串。

```
<membership defaultProvider="SqlMembershipProvider" userIsOnlineTimeWindow="15">
  <providers>
    <add
      name="SqlMembershipProvider"
      type="System.Web.Security.SqlMembershipProvider"
      connectionStringName="DefaultConnection"
      applicationName="/"
      enablePasswordRetrieval="true"
      enablePasswordReset="true"
      maxInvalidPasswordAttempts="5"
      requiresQuestionAndAnswer="true"
      requiresUniqueEmail="true"
      passwordFormat="Encrypted" />
  </providers>
</membership> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:33:38.400

问题是我的应用程序名称需要是“MyCMS”而不是空白。当我从 MyWSAT 工具设置用户帐户时，我最初在 MyWSAT 项目（ASP.NET 配置网站）中的 WSAT 工具下设置了管理员帐户，与此关联的应用程序名称是 MyCMS。

# c++ - 对象的动态内存分配

> ID：15838683
> 
> 赞同：0
> 
> 时间：2013-04-05T16:13:02.000
> 
> 标签：c++

```
 #include <iostream>

  class MyClass
   {
      public:
          MyClass() {
              itsAge = 1;
              itsWeight = 5;
          }

          ~MyClass() {}
          int GetAge() const { return itsAge; }
          int GetWeight() const { return itsWeight; } 
          void SetAge(int age) { itsAge = age; }

      private:
          int itsAge;
          int itsWeight;

  };

  int main()
  {
      MyClass * myObject[50]; // define array of objects...define the type as the object
      int i;
      MyClass * objectPointer;
      for (i = 0; i < 50; i++)
      {
          objectPointer = new MyClass;
          objectPointer->SetAge(2*i + 1);
          myObject[i] = objectPointer;
      }

      for (i = 0; i < 50; i++)
          std::cout << "#" << i + 1 << ": " << myObject[i]->GetAge() << std::endl;

      for (i = 0; i < 50; i++)
      {
          delete myObject[i];
          myObject[i] = NULL;
      } 
```

我想知道为什么 objectPointer 必须在 for 循环内，如果我把它拿出来放在 for 循环之前，我会得到无意义的结果。帮助将不胜感激，谢谢...抱歉格式很糟糕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:16:18.000

```
 myObject[i] = objectPointer; 
```

它应该在循环内，因为您将新引用存储在指针数组中。如果它在循环之外，那么所有的指针数组都指向同一个引用。在这种情况下，您在释放时应该小心，因为所有指针数组都指向相同的内存位置。

# c++ - 向量的向量 push_back

> ID：15838689
> 
> 赞同：23
> 
> 时间：2013-04-05T16:13:21.757
> 
> 标签：c++, vector, process, push-back, multi-level

我正在用 C++ 设计一个多级队列过程模拟器，但是在尝试实现多个队列时遇到了问题（我的队列是向量）。所以，“多级”是一个 4 元素数组（不是向量）。在这些元素中的每一个内部都有一个向量（类型 t_PCB）。

```
vector<vector<t_PCB>> multilevel[4]; 
```

我的问题是：如何在这 4 个`t_PCB`向量之一的末尾插入一个元素？先感谢您。

我已经尝试了下面的代码行，但它不起作用（**错误**：不匹配调用'push_back'的成员函数）

```
multilevel[0].push_back(p); //where "p" is a t_PCB object 
```

在谈论“多级”时不能使用上面的行，因为这个数组只接受参数类型：vector < t_PCB >

所以，正如我一开始问的那样：如何将对象类型“t_PCB”推入“多级”？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-05T16:18:11.297

通过做这个：

```
vector<vector<t_PCB> > multilevel[4]; 
```

您声明了一个由四个大小为零的*数组*`vectors`，每个数组都可以包含类型为 的对象`vector<t_PCB>`。您可能想要做的是：

```
vector<vector<t_PCB> > multilevel(4);
//                               ^^^ 
```

这将实例化一个由四个默认初始化类型的对象组成的向量`vector<t_PCB>`。然后，你可以这样做：

```
multilevel[size].push_back(p); 
```

但请注意，向量索引（如数组索引）是从零开始的，因此`size`必须小于向量的大小。

在上面的表达式中，子表达式`multilevel[size]`返回对`size`inside 的第-个向量的引用`multilevel`，然后在该向量上调用成员函数`push_back(p)`，该函数将元素附加`p`到它。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-11-08T07:38:55.257

声明一个二维向量类似于声明一个数组。你也可以用同样的方法...

```
vector<vector<int> > vec;

for(int i = 0; i < 5; i++)
{
    vector<int> row;
    vec.push_back(row);
}

vec[0].push_back(5);
cout << vec[0][0] << endl; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T16:17:02.970

您正在创建一个数组`vector<vector<t_PCB>>`而不是单个对象。

我认为做你想做的事情的正确方法是：

```
vector<vector<t_PCB>> multilevel(4);
multilevel[0].push_back(p) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T16:25:07.187

您可以创建一个向量而不是数组：

```
std::vector< std::vector<t_PCB>> multilevel(4); // 2 dim array, 1st dim is 4 
```

然后你可以[push_back](http://en.cppreference.com/w/cpp/container/vector/push_back)`WHICH`在用这种方式索引的向量的末尾：

```
multilevel[WHICH].push_back(p) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-11T19:42:54.817

只是把它放在那里，访问向量的向量：

```
multilevel[outer][inner] 
```

where`outer`将返回该索引处的向量，进一步索引 with`inner`将返回`t_PCB`对象。[您还可以使用.at()](http://www.cplusplus.com/reference/vector/vector/at/)函数替换数组样式索引以进行边界检查。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-05-25T06:59:45.623

```
vector<vector<int>> vec; // declare 2D vector

    for (int i=0; i<=3; i++) {
        vector<int> row;  // create a row vector which adds a row to vec
        for (int j=0; j<=4; j++) {
            row.push_back(j*10); // push elements 0,10,20,30,40 to row 
        }
        vec.push_back(row); // add this row to vec
        // Repeat this procedure 4 times to make a 4*5 2D vector
    }

    cout<<"output is "<<vec[2][4]; // output is 40 
```

# c# - 更改部分工具栏的背景

> ID：15838692
> 
> 赞同：2
> 
> 时间：2013-04-05T16:13:25.073
> 
> 标签：c#, wpf, toolbar

如何更改标记元素的背景（工具栏的一部分，在 xaml 中）？![标记元素](https://i.stack.imgur.com/p4gWT.png)

```
<ToolBar Grid.Column="1" x:Name="AdditionalModuleButtonsStackPanel" Background="{x:Null}"/> 
```

我什至不知道该元素是如何被调用的。我需要使背景透明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:41:21.037

根据[这个答案](https://stackoverflow.com/questions/2765040/color-of-overflowbutton-in-wpf-toolbar#answer-2765314)，

> 不幸的是，溢出按钮具有固定的背景。

这意味着您必须提供整个模板。这是工具栏的样式（我知道很久了...），请确保将其包含在您的 XAML 中（我将其添加到我的`Window.Resources`）中：

资源：

```
<Window.Resources>
        <LinearGradientBrush x:Key="ToolBarHorizontalBackground" EndPoint="0,1" StartPoint="0,0">
            <GradientStop Color="#E2E0DB" Offset="0"/>
            <GradientStop Color="#EAE8E4" Offset="0.5"/>
            <GradientStop Color="#D5D2CA" Offset="0.9"/>
            <GradientStop Color="#DBD8D1" Offset="1"/>
        </LinearGradientBrush>
        <LinearGradientBrush x:Key="ToolBarToggleButtonVerticalBackground" EndPoint="1,0" StartPoint="0,0">
            <GradientStop Color="#E6E6E6" Offset="0"/>
            <GradientStop Color="#D2D2D2" Offset="0.5"/>
            <GradientStop Color="#808080" Offset="1"/>
        </LinearGradientBrush>
        <SolidColorBrush x:Key="ToolBarButtonHover" Color="#B6BDD2"/>
        <SolidColorBrush x:Key="ToolBarGripper" Color="#A0A0A0"/>
        <Style x:Key="ToolBarVerticalOverflowButtonStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Background" Value="{StaticResource ToolBarToggleButtonVerticalBackground}"/>
            <Setter Property="MinHeight" Value="0"/>
            <Setter Property="MinWidth" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Border x:Name="Bd" Background="{TemplateBinding Background}" CornerRadius="0,0,3,3" SnapsToDevicePixels="true">
                            <Canvas HorizontalAlignment="Right" Height="6" Margin="2,7,2,2" SnapsToDevicePixels="true" VerticalAlignment="Bottom" Width="7">
                                <Path Data="M 1.5 1 L 1.5 6" Stroke="White"/>
                                <Path Data="M 0.5 0 L 0.5 5" Stroke="{TemplateBinding Foreground}"/>
                                <Path Data="M 3.5 0.5 L 7 3.5 L 4 6.5 Z" Fill="White"/>
                                <Path Data="M 3 -0.5 L 6 2.5 L 3 5.5 Z" Fill="{TemplateBinding Foreground}"/>
                            </Canvas>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Background" TargetName="Bd" Value="{StaticResource ToolBarButtonHover}"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="true">
                                <Setter Property="Background" TargetName="Bd" Value="{StaticResource ToolBarButtonHover}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{StaticResource ToolBarGripper}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Source={x:Static SystemParameters.HighContrast}}" Value="true">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <LinearGradientBrush x:Key="ToolBarVerticalBackground" EndPoint="1,0" StartPoint="0,0">
            <GradientStop Color="#E2E0DB" Offset="0"/>
            <GradientStop Color="#EAE8E4" Offset="0.5"/>
            <GradientStop Color="#D5D2CA" Offset="0.9"/>
            <GradientStop Color="#DBD8D1" Offset="1"/>
        </LinearGradientBrush>
        <LinearGradientBrush x:Key="ToolBarToggleButtonHorizontalBackground" EndPoint="0,1" StartPoint="0,0">
            <GradientStop Color="#E6E6E6" Offset="0"/>
            <GradientStop Color="#D2D2D2" Offset="0.5"/>
            <GradientStop Color="#808080" Offset="1"/>
        </LinearGradientBrush>
        <Style x:Key="ToolBarHorizontalOverflowButtonStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Background" Value="{StaticResource ToolBarToggleButtonHorizontalBackground}"/>
            <Setter Property="MinHeight" Value="0"/>
            <Setter Property="MinWidth" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Border x:Name="Bd" Background="{TemplateBinding Background}" CornerRadius="0,3,3,0" SnapsToDevicePixels="true">
                            <Canvas HorizontalAlignment="Right" Height="7" Margin="7,2,2,2" SnapsToDevicePixels="true" VerticalAlignment="Bottom" Width="6">
                                <Path Data="M 1 1.5 L 6 1.5" Stroke="White"/>
                                <Path Data="M 0 0.5 L 5 0.5" Stroke="{TemplateBinding Foreground}"/>
                                <Path Data="M 0.5 4 L 6.5 4 L 3.5 7 Z" Fill="White"/>
                                <Path Data="M -0.5 3 L 5.5 3 L 2.5 6 Z" Fill="{TemplateBinding Foreground}"/>
                            </Canvas>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Background" TargetName="Bd" Value="{StaticResource ToolBarButtonHover}"/>
                            </Trigger>
                            <Trigger Property="IsKeyboardFocused" Value="true">
                                <Setter Property="Background" TargetName="Bd" Value="{StaticResource ToolBarButtonHover}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{StaticResource ToolBarGripper}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Source={x:Static SystemParameters.HighContrast}}" Value="true">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <SolidColorBrush x:Key="ToolBarMenuBorder" Color="#666666"/>
        <SolidColorBrush x:Key="ToolBarSubMenuBackground" Color="#F9F8F7"/>
        <Style x:Key="ToolBarThumbStyle" TargetType="{x:Type Thumb}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Border Background="Transparent" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
                            <Rectangle>
                                <Rectangle.Fill>
                                    <DrawingBrush TileMode="Tile" Viewbox="0,0,4,4" Viewport="0,0,4,4" ViewportUnits="Absolute" ViewboxUnits="Absolute">
                                        <DrawingBrush.Drawing>
                                            <DrawingGroup>
                                                <GeometryDrawing Brush="White" Geometry="M 1 1 L 1 3 L 3 3 L 3 1 z"/>
                                                <GeometryDrawing Brush="{StaticResource ToolBarGripper}" Geometry="M 0 0 L 0 2 L 2 2 L 2 0 z"/>
                                            </DrawingGroup>
                                        </DrawingBrush.Drawing>
                                    </DrawingBrush>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Cursor" Value="SizeAll"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ToolBarMainPanelBorderStyle" TargetType="{x:Type Border}">
            <Setter Property="Margin" Value="0,0,11,0"/>
            <Setter Property="CornerRadius" Value="3,3,3,3"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Source={x:Static SystemParameters.HighContrast}}" Value="true">
                    <Setter Property="CornerRadius" Value="0,0,0,0"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style x:Key="ToolBarStyle1" TargetType="{x:Type ToolBar}">
            <Setter Property="Background" Value="{StaticResource ToolBarHorizontalBackground}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToolBar}">
                        <Grid x:Name="Grid" Margin="3,1,1,1" SnapsToDevicePixels="true">
                            <Grid x:Name="OverflowGrid" HorizontalAlignment="Right">
                                <ToggleButton x:Name="OverflowButton" Background="Transparent" ClickMode="Press" FocusVisualStyle="{x:Null}" IsChecked="{Binding IsOverflowOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" IsEnabled="{TemplateBinding HasOverflowItems}" Style="{StaticResource ToolBarHorizontalOverflowButtonStyle}"/>
                                <Popup x:Name="OverflowPopup" AllowsTransparency="true" Focusable="false" IsOpen="{Binding IsOverflowOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom" StaysOpen="false">
                                    <Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent">
                                        <Border x:Name="ToolBarSubMenuBorder" BorderBrush="{StaticResource ToolBarMenuBorder}" BorderThickness="1" Background="{StaticResource ToolBarSubMenuBackground}" RenderOptions.ClearTypeHint="Enabled">
                                            <ToolBarOverflowPanel x:Name="PART_ToolBarOverflowPanel" KeyboardNavigation.DirectionalNavigation="Cycle" FocusVisualStyle="{x:Null}" Focusable="true" Margin="2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" KeyboardNavigation.TabNavigation="Cycle" WrapWidth="200"/>
                                        </Border>
                                    </Themes:SystemDropShadowChrome>
                                </Popup>
                            </Grid>
                            <Border x:Name="MainPanelBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" Style="{StaticResource ToolBarMainPanelBorderStyle}">
                                <DockPanel KeyboardNavigation.TabIndex="1" KeyboardNavigation.TabNavigation="Local">
                                    <Thumb x:Name="ToolBarThumb" Margin="-3,-1,0,0" Padding="6,5,1,6" Style="{StaticResource ToolBarThumbStyle}" Width="10"/>
                                    <ContentPresenter x:Name="ToolBarHeader" ContentSource="Header" HorizontalAlignment="Center" Margin="4,0,4,0" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center"/>
                                    <ToolBarPanel x:Name="PART_ToolBarPanel" IsItemsHost="true" Margin="0,1,2,2" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                </DockPanel>
                            </Border>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsOverflowOpen" Value="true">
                                <Setter Property="IsEnabled" TargetName="ToolBarThumb" Value="false"/>
                            </Trigger>
                            <Trigger Property="Header" Value="{x:Null}">
                                <Setter Property="Visibility" TargetName="ToolBarHeader" Value="Collapsed"/>
                            </Trigger>
                            <Trigger Property="ToolBarTray.IsLocked" Value="true">
                                <Setter Property="Visibility" TargetName="ToolBarThumb" Value="Collapsed"/>
                            </Trigger>
                            <Trigger Property="HasDropShadow" SourceName="OverflowPopup" Value="true">
                                <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                                <Setter Property="SnapsToDevicePixels" TargetName="Shdw" Value="true"/>
                                <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                            </Trigger>
                            <Trigger Property="Orientation" Value="Vertical">
                                <Setter Property="Margin" TargetName="Grid" Value="1,3,1,1"/>
                                <Setter Property="Style" TargetName="OverflowButton" Value="{StaticResource ToolBarVerticalOverflowButtonStyle}"/>
                                <Setter Property="Height" TargetName="ToolBarThumb" Value="10"/>
                                <Setter Property="Width" TargetName="ToolBarThumb" Value="Auto"/>
                                <Setter Property="Margin" TargetName="ToolBarThumb" Value="-1,-3,0,0"/>
                                <Setter Property="Padding" TargetName="ToolBarThumb" Value="5,6,6,1"/>
                                <Setter Property="Margin" TargetName="ToolBarHeader" Value="0,0,0,4"/>
                                <Setter Property="Margin" TargetName="PART_ToolBarPanel" Value="1,0,2,2"/>
                                <Setter Property="DockPanel.Dock" TargetName="ToolBarThumb" Value="Top"/>
                                <Setter Property="DockPanel.Dock" TargetName="ToolBarHeader" Value="Top"/>
                                <Setter Property="HorizontalAlignment" TargetName="OverflowGrid" Value="Stretch"/>
                                <Setter Property="VerticalAlignment" TargetName="OverflowGrid" Value="Bottom"/>
                                <Setter Property="Placement" TargetName="OverflowPopup" Value="Right"/>
                                <Setter Property="Margin" TargetName="MainPanelBorder" Value="0,0,0,11"/>
                                <Setter Property="Background" Value="{StaticResource ToolBarVerticalBackground}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Source={x:Static SystemParameters.HighContrast}}" Value="true">
                    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources> 
```

然后通过执行以下操作添加样式：

```
 <Grid>
     <ToolBar x:Name="AdditionalModuleButtonsStackPanel" Background="{x:Null}" Style="{DynamicResource ToolBarStyle1}" />
 </Grid> 
```

# jquery - 重置属性 jquery

> ID：15838700
> 
> 赞同：0
> 
> 时间：2013-04-05T16:13:58.553
> 
> 标签：jquery, transition

我有以下代码：

```
jQuery(document).ready(function() {
document.ontouchmove = function(e) {e.preventDefault()};

// *************** NAVEGACION **************************

$('.botMenu').click(function(){
    var index = $(this).attr('id').split('_')[1];
    $(this).transition({ scale: 1.2},200);
    $('#section_'+ index).css('display','block');
    $('.section').transition({opacity : '0'},400);
    $('#section_'+ index).transition({opacity : '1'},400, 'snap');

    $('#section_'+ index).transition({perspective: '100px',rotateX: '180deg'});

    setTimeout(function(){
        $(this).transition({ scale: 1.0},200);
    },400);
});
}); 
```

问题是转换只是在第一次单击时完成，我希望每次单击它时都产生效果。我想做一些重置所有属性的事件以便再次完成，这可能吗？

# javascript - 声音不能在 if 语句中定义

> ID：15838704
> 
> 赞同：-1
> 
> 时间：2013-04-05T16:14:01.227
> 
> 标签：javascript, audio

我有这样的代码：

```
 var snd = [new Audio("bla/blo.wav"), new Audio("bla/bli.wav")]

    function playSnd(x) {
        if (x == 1) {snd[0].play()}
        if (x == 2) {snd[1].play()}
    }

    playSnd(2) 
```

这里是“playSnd(2)”的问题，它会播放两种声音，为什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:25:03.700

```
var snd = ["bla/blo.wav", "bla/bli.wav"]

function playSnd(x) {
    if (x == 1) {(new Audio( snd[0] )).play()}
    if (x == 2)  {(new Audio( snd[1] )).play()}
}

playSnd(2) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-05T16:35:30.697

我似乎找不到您的代码有什么问题。但是您可以先使用 else if 来调试代码出错的地方。

```
var snd = [new Audio("bla/blo.wav"), new Audio("bla/bli.wav")]

function playSnd(x) {
    if (x == 1) {snd[0].play()}
    else if (x == 2) {snd[1].play()}
}

playSnd(2) 
```

# java - JODA 每次迭代的时间错误值

> ID：15838710
> 
> 赞同：3
> 
> 时间：2013-04-05T16:14:28.077
> 
> 标签：java, calendar, jodatime

我正在使用最新版本 2.2 在 java 中尝试 Joda time 我写了一个小片段这是我的代码

```
public static void main(String[] args) 
{
    BoilerTester clazz = new BoilerTester();
    Calendar today = Calendar.getInstance();
    Calendar born  = Calendar.getInstance();
    //when returns 0 is 10363 when returning 1 = 10362 just a millisecond what have to do with days??
    System.out.println(Math.abs(today.getTimeInMillis()-born.getTimeInMillis()));
    born.set(1984,10,20);        
    clazz.compute(born,today);
}   
private void compute(Calendar born, Calendar today)
{
    System.out.println("JODA:  " + org.joda.time.Days.daysBetween(new org.joda.time.DateTime(born.getTime()),new org.joda.time.DateTime(today.getTime())).getDays());    
} 
```

当我运行源代码时，我得到了这个值

> 乔达：10363

后来我运行相同的代码，我得到了

> 乔达：10362

是的，我可能已经运行了 2 到 3 次相同的代码来获得不同的值，但为什么会这样？？？

多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:25:19.440

我的猜测是，有时`today`和`born`日期在完全相同的毫秒上，有时它们相差几毫秒（第一次调用`Calendar.getInstance()`和第二次调用之间经过的时间）。由于 getDays() 返回完整天数，因此几毫秒可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:44:12.173

我正在写我的答案，但 JB Nizet 更快（他对正在发生的事情绝对正确）。如果你想摆脱这类问题，你应该在 joda-time 中利用[partial的概念：](http://joda-time.sourceforge.net/key_partial.html)

*Joda-Time 中的部分是部分日期和时间表示。所有实现都代表本地日期和时间，并且不引用时区。因此，它们仅部分表示日期时间连续体中的日期或时间。*

例如，使用[`LocalDate`](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html)：

```
LocalDate born = new LocalDate(1984, 11, 20); // BE CAREFUL!: months in JDK are 0-11, but in Joda-Time are 1-12
System.out.println(Days.daysBetween(born, LocalDate.now()).getDays()); 
```

使用这种“部分”表示，您不会在内部使用小时、分钟、秒或毫秒，因此您不会因为毫秒而面临这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:18:31.867

您正在运行 JDK 和 Joda 的混合 - 不要那样做 - Joda**完全**替换了 JDK 时间类。

# php - 如何从 ajax 轮询更改为长轮询

> ID：15838715
> 
> 赞同：2
> 
> 时间：2013-04-05T16:14:41.180
> 
> 标签：php, ajax, polling

我有一个 ajax 轮询脚本（聊天），它工作得很好，但问题是它每 1 秒收到一次请求，所以我可能认为长轮询会更好，那么我怎样才能将这个正常的 ajax 轮询更改为长轮询？

这是我的 ajax 轮询代码：-

```
var chat = {}

chat.fetchMessages = function () {
$.ajax({
    url: 'ajax/ajax/chat.php',
    type: 'POST',
    data: { method: 'fetch' },
    success: function(data) {
        $('#chats').html(data);
        $('#chats').scrollTop($('#chats')[0].scrollHeight);
    }
}); 
}

chat.interval = setInterval(chat.fetchMessages, 1000);
chat.fetchMessages(); 
```

# ios - ios 以UDP快速读取数据

> ID：15838716
> 
> 赞同：0
> 
> 时间：2013-04-05T16:14:41.367
> 
> 标签：ios, udp, asyncsocket

我正在使用 GCDAsyncSocket（ios 设备）建立 UDP 连接。一切正常，我能够发送和接收消息，我的问题是我想快速交换数据。我可以从我的 iphone 向 pc 发送相当快的数据，但我无法以这种速度从 pc 获取数据，更具体地说，我希望能够每 100 毫秒获取一次数据。我连接成功时使用此功能：

```
-(void)startRead {
   [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(startRead) userInfo:nil repeats:YES];
   [asyncSocket readDataWithTimeout:-1 tag:0];
} 
```

有了这个，我可以以 1 秒的间隔读取数据，但如果我尝试设置 0.1 秒，我的程序会冻结。（与 1 秒以下的值相同）我确信我在这里做错了，会有一种方法来实现我想要的，所以如果有人知道请帮忙！！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T13:20:15.427

我相信上面的评论是正确的，你没有在 init 上正确设置 Delegate。套接字创建应该是这样的

```
GCDAsyncUdpSocket* udpSocket = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSError *error = nil;

    if (![udpSocket bindToPort:0 error:&error])
    {
        [self logError:[NSString stringWithFormat:@"Error binding: %@", error]];
        return;
    }
    if (![udpSocket beginReceiving:&error])
    {
        [self logError:[NSString stringWithFormat:@"Error receiving: %@", error]];
        return;
    }

    NSString *_host = nil;
    uint16_t _port = 0;
    [GCDAsyncUdpSocket getHost:&_host port:&_port fromAddress:udpSocket.localAddress];
    [self logInfo:[NSString stringWithFormat:@"Socket setup on host %@:%d", _host, _port]];

    [self logInfo:@"Socket created successfully."]; 
```

除非您使用的 GCDAsyncUdpSocket 版本与我熟悉的不同，否则正确的回调方法实际上是下面的方法。当设置了委托并且在正确的端口上接收到数据包时，它会自动调用。

```
- (void)udpSocket:(GCDAsyncUdpSocket *)sock didReceiveData:(NSData *)data fromAddress:(NSData *)address withFilterContext:(id)filterContext 
```

# jquery - jquery 中的 $(window).height 错误

> ID：15838718
> 
> 赞同：0
> 
> 时间：2013-04-05T16:14:44.870
> 
> 标签：jquery

我正在使用`$(window).height`in jquery 并使用 firebug 打印出该值，它说该值是`8`而不是`800`.

`$(window).width`工作正常。有什么想法可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:16:37.953

使用`height()`, 和`width()`函数，而不是属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:18:17.177

以下是一些选项：

*   尝试关闭 Firebug 并改用警告框。可能是 Firebug 导致您的窗口缩小。还可以尝试将 Firebug 最大化到一个新窗口中

*   我建议确保您的 jQuery 版本是最新的。或者，如果您使用的是 1.9 版，请降级到 1.8。

*   如果一切都失败了，你可以求助于普通的旧 JavaScript：`window.innerWidth`和`window.innerHeight`

# linux - perl 指向一个子例程的多个 sig 处理程序

> ID：15838719
> 
> 赞同：3
> 
> 时间：2013-04-05T16:14:47.433
> 
> 标签：linux, perl, unix, signals

我是 perl 的新手，并尝试向我的脚本添加功能以捕获键盘中断和术语信号（如果抛出），然后发出操作系统命令来处理。在没有信号被抛出并且脚本成功执行的情况下，还需要发出相同的 OS 命令和子命令（注意 END 块）。据我从研究和测试中得知，您必须为每个信号注册一个信号处理程序。在每种情况下，它们都需要触发相同的 sub。这可以在一个 $SIG 中完成，还是我必须同时注册两个，每个信号一个？这是我的代码。

```
sub issueKdestroy{
    system("kdestroy -q");
    exit(1);
}
$SIG{INT} = (\&issueKdestroy);
$SIG{TERM} = (\&issueKdestroy);
END{
    issueKdestroy();
} 
```

从测试来看，这不起作用：

```
$SIG{'INT', 'TERM'} = (\&issueKdestroy); 
```

它不会识别上述代码中的 INT 或 TERM。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:35:35.150

`$SIG{'INT', 'TERM'}`不是你的意思；要像这样为两个键分配值，请使用哈希切片（并提供两个值）：

```
@SIG{'INT', 'TERM'} = (\&issueKdestroy, \&issueKdestroy); 
```

相反，您正在调用 perl4 样式的多维数组仿真，该`$`仿真允许指定多个键，但将它们全部存储在单个哈希中，相当于：

```
$SIG{ join $;, 'INT', 'TERM' } 
```

`$;`默认情况下在哪里`chr(0x1c)`。

# c# - 在 C# 中接收最新的 UDP 数据包

> ID：15838726
> 
> 赞同：3
> 
> 时间：2013-04-05T16:15:02.037
> 
> 标签：c#, udp, unity3d, simulink

我正在使用 Unity 可视化模拟，其中来自模拟的数据通过来自 Simulink 的 UDP 数据包发送给它。我遇到的问题源于 Simulink 发送 UDP 数据包的速率以及我在 Unity 中的脚本尝试从 UDP 客户端接收数据的速率。

对于我的 Unity 脚本，我创建了一个线程，该线程使用一个 while 循环执行一个简单的函数，并休眠与客户端超时相同的时间（由我任意设置）：

```
public void Start() {
    //  Setup listener.
    this.mSenderAddress = IPAddress.Parse("127.0.0.1");
    this.mSender = new IPEndPoint(this.mSenderAddress, 30001);

    //  Setup background UDP listener thread.
    this.mReceiveThread = new Thread(new ThreadStart(ReceiveData));
    this.mReceiveThread.IsBackground = true;
    this.mReceiveThread.Start();
}

//  Function to receive UDP data.
private void ReceiveData() {
    try {
        //  Setup UDP client.
        this.mClient = new UdpClient(30001);
        this.mClient.Client.ReceiveTimeout = 250;

        //  While thread is still alive.
        while(Thread.CurrentThread.IsAlive) {
            try {
                //  Grab the data.
                byte[] data = this.mClient.Receive(ref this.mSender);

                //  Convert the data from bytes to doubles.
                double[] convertedData = new double[data.Length / 8];
                for(int ii = 0; ii < convertedData.Length; ii++)
                    convertedData[ii] = BitConverter.ToDouble(data, 8 * ii);

                //  DO WHATEVER WITH THE DATA

                //  Sleep the thread.
                Thread.Sleep(this.mClient.Client.ReceiveTimeout);
            } catch(SocketException e) {
                continue;
            }
        }
    } catch(Exception e) {
        Debug.Log(e.ToString());
    }
} 
```

在这里，如果超时/休眠时间大于 Simulink 发送 UDP 数据包的时间差，我的可视化将落后于模拟，因为它将读取*下一个*发出的数据包，而不是*最后一个*发出的数据包. 它将数据包视为一个队列。

无论如何只能从收到的**最后一个**数据包中获取数据？我知道至少有一种方法可以解决这个问题，因为如果我使用`Rate Transfer Block`设置为等于或更大的采样时间作为 UdpClient 超时，它将起作用；但我想让它比这更强大。

由于我的数据包包含有关我的模拟状态（位置、方向、时间等）的完整信息，因此我是否从不使用来自中间数据包的数据并不重要；只要我得到最新的数据，这将来自最后一个数据包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:47:01.163

UDP 是不可靠的，并且不能保证以与发送的相同顺序接收数据包。我的建议是使用 TCP 或在数据包标头中放置某种序列号，并继续读取 UDP 数据包并只选择最新的数据包。

# foreign-key-relationship - Dynamics AX 2012 外键约束

> ID：15838727
> 
> 赞同：3
> 
> 时间：2013-04-05T16:15:13.130
> 
> 标签：foreign-key-relationship, axapta, dynamics-ax-2012

假设我有两张桌子：

```
Items
  Property1 (relates to PropertyName)
  Property2 (relates to PropertyName)
Properties
  PropertyName (index, single key alternate) 
```

在 Dynamics AX 2012 中建立正常关系时，我收到以下最佳实践错误：此表只允许外键约束。

我可以创建一个单键备用外键关系来修复最佳实践错误。但是，我只能对其中一个字段执行此操作。如果我对两者都这样做，我会收到有关重复备用键的编译错误。

是否有某种方法可以像我们在 AX 2009 中使用的那样创建正常关系而不会出现最佳实践错误？

或.. 如何在与同一列相关的两个字段上执行两个外键关系？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T10:18:30.837

在关系上设置属性时，设置`UseDefaultRoleNames`为否，然后给每个关系一个唯一的`Role`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T13:05:10.233

如果添加关系字段，则必须添加为外键字段。它还会在您的表格中自动添加一个字段。然后必须解决BP错误。

# django - django 无休止的分页使第二页在引导程序中使用不同的 css

> ID：15838729
> 
> 赞同：1
> 
> 时间：2013-04-05T16:15:14.260
> 
> 标签：django, twitter-bootstrap, django-endless-pagination

我在我的网站上使用 django-endless-pagination 和 twitter 样式分页和 twitter 引导程序。

现在，使用 django-endless-pagination，当显示第一页时，系统使用以下样式。

```
 .row-fluid .offset1:first-child {
        margin-left: 8.547008547008547%;
     } 
```

但是从第二页开始，第一个元素使用的样式如下。

```
 .row-fluid .offset1 {
        margin-left: 11.11111111111111%;
     } 
```

由于两个页面第一个元素的左边距不同，因此第 1 页和第 2 页之间的行没有对齐。我如何更改它，以便第二页第一个元素也使用第一个子样式并且它是对齐的。

编辑 ：-

我的代码在模板中如下所示

```
 <div class="offset1 span10">

            <div class="span4">
                {% lazy_paginate column_1_items_list %}
                {% if column_1_items_list %}
                    {% for column_1_item in column_1_items_list %}
                        <div class="row-fluid image_div" style="padding-top:20px">
                            <h4 class="text-center"><a href="link">name_of_item</a></h4>
                             <a target="_blank" href="link_for_item">
                                <img class="item-size" src="photo.url" alt="name_of_item "/>
                            </a>
                            <p> quick_summary|safe </p>
                            <div class="row-fluid bottom">
                                <span class="price"><b>£ price</b></span>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
                {% show_more " " %}
            </div>
      </div> 
```

谢谢斯里坎特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T15:14:05.483

您可能只使用`forloop.first`并向您的 css 添加一个类。

```
{% for column_1_item in column_1_items_list %}
    <div class="row-fluid image_div{% if forloop.first %} first_child{% endif %}" style="padding-top:20px">
    ...
{% endfor %} 
```

# php - PHP curl 命中特殊字符

> ID：15838730
> 
> 赞同：2
> 
> 时间：2013-04-05T16:15:16.027
> 
> 标签：php

API 响应显示特殊字符而不是实际单词（实际单词来自泰米尔语）

我应该在其中添加什么标题？请提供一些例子。

像下面这样变得特别：

```
à®•à®¿à®´à®®à¯ˆ 
```

功能

```
function get_data($url) {
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:20:11.170

您可能需要使用泰米尔语字符集。查看以下链接：

[http://www.iam.uni-bonn.de/~alt/html/unicode_25.html](http://www.iam.uni-bonn.de/~alt/html/unicode_25.html)

像这样使用标题：

```
$headers = array("Content-Type: application/x-www-form-urlencoded; charset: UTF-8");
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_HEADER, 1); 
```

# python - numpy中的分层抽样

> ID：15838733
> 
> 赞同：7
> 
> 时间：2013-04-05T16:15:24.827
> 
> 标签：python, numpy

在 numpy 中，我有一个这样的数据集。前两列是索引。我可以通过索引将我的数据集划分为块，即第一个块是 0 0 第二个块是 0 1 第三个块 0 2 然后是 1 0、1 1、1 2 等等。每个块至少有两个元素。索引列中的数字可能会有所不同

我需要将数据集沿这些块随机拆分 80%-20%，以便在拆分后两个数据集中的每个块至少有 1 个元素。我怎么能那样做？

```
indices | real data
        |
0   0   | 43.25 665.32 ...  } 1st block
0   0   | 11.234            }
0   1     ...               } 2nd block
0   1                       } 
0   2                       } 3rd block
0   2                       }
1   0                       } 4th block
1   0                       }
1   0                       }
1   1                       ...
1   1                       
1   2
1   2
2   0
2   0 
2   1
2   1
2   1
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T18:35:45.450

看看你喜欢这个。为了引入随机性，我对整个数据集进行了洗牌。这是我想出如何进行矢量化分割的唯一方法。也许你可以简单地打乱一个索引数组，但对于我今天的大脑来说，这是一种太多的间接方式。我还使用了结构化数组，以便于提取块。首先，让我们创建一个示例数据集：

```
from __future__ import division
import numpy as np

# Create a sample data set
c1, c2 = 10, 5
idx1, idx2 = np.arange(c1), np.arange(c2)
idx1, idx2 = np.repeat(idx1, c2), np.tile(idx2, c1)

items = 1000
i = np.random.randint(c1*c2, size=(items - 2*c1*c2,))
d = np.random.rand(items+5)

dataset = np.empty((items+5,), [('idx1', np.int), ('idx2', np.int),
                             ('data', np.float)])
dataset['idx1'][:2*c1*c2] =  np.tile(idx1, 2)
dataset['idx1'][2*c1*c2:-5] = idx1[i]
dataset['idx2'][:2*c1*c2] = np.tile(idx2, 2)
dataset['idx2'][2*c1*c2:-5] = idx2[i]
dataset['data'] = d
# Add blocks with only 2 and only 3 elements to test corner case
dataset['idx1'][-5:] = -1
dataset['idx2'][-5:] = [0] * 2 + [1]*3 
```

现在是分层抽样：

```
# For randomness, shuffle the entire array
np.random.shuffle(dataset)

blocks, _ = np.unique(dataset[['idx1', 'idx2']], return_inverse=True)
block_count = np.bincount(_)
where = np.argsort(_)
block_start = np.concatenate(([0], np.cumsum(block_count)[:-1]))

# If we have n elements in a block, and we assign 1 to each array, we
# are left with only n-2\. If we randomly assign a fraction x of these
# to the first array, the expected ratio of items will be
# (x*(n-2) + 1) : ((1-x)*(n-2) + 1)
# Setting the ratio equal to 4 (80/20) and solving for x, we get
# x = 4/5 + 3/5/(n-2)

x = 4/5 + 3/5/(block_count - 2)
x = np.clip(x, 0, 1) # if n in (2, 3), the ratio is larger than 1
threshold = np.repeat(x, block_count)
threshold[block_start] = 1 # first item goes to A
threshold[block_start + 1] = 0 # seconf item goes to B

a_idx = threshold > np.random.rand(len(dataset))

A = dataset[where[a_idx]]
B = dataset[where[~a_idx]] 
```

运行后，分割大约为 80/20，所有块都表示在两个数组中：

```
>>> len(A)
815
>>> len(B)
190
>>> np.all(np.unique(A[['idx1', 'idx2']]) == np.unique(B[['idx1', 'idx2']]))
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:27:33.967

这是一个替代解决方案。如果有可能以更 numpy 的方式实现这一点（没有 for 循环），我愿意进行代码审查。@Jamie 的答案非常好，只是有时它会在数据块内产生倾斜的比率。

```
 ratio = 0.8
    IDX1 = 0
    IDX2 = 1
    idx1s = np.arange(len(np.unique(self.data[:,IDX1])))
    idx2s = np.arange(len(np.unique(self.data[:,IDX2])))
    valid = None
    train = None
    for i1 in idx1s:
        for i2 in idx2:
            mask = np.nonzero((data[:,IDX1] == i1) & (data[:,IDX2] == i2))
            curr_data = data[mask,:]
            np.random.shuffle(curr_data)
            start = np.min(mask)
            end = np.max(mask)
            thres = start + np.around((end - start) * ratio).astype(np.int)

            selected = mask < thres
            train_idx = mask[0][selected[0]]
            valid_idx = mask[0][~selected[0]]
            if train != None:
                train = np.vstack((train,data[train_idx]))
                valid = np.vstack((valid,data[valid_idx]))
            else:
                train = data[train_idx]
                valid = data[valid_idx] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:53:54.797

我假设每个块至少有两个条目，并且如果它有两个以上，您希望它们尽可能接近 80/20。最简单的方法似乎是为所有行分配一个随机数，然后根据每个分层样本中的百分位数进行选择。假设这是文件 strat_sample.csv 中的数据：

```
Index_1,Index_2,Data_1,Data_2
0,0,0.614583182,0.677644482
0,0,0.321384981,0.598450854
0,0,0.303029607,0.300593782
0,0,0.646010758,0.612006715
0,0,0.484572883,0.30052535
0,1,0.010625416,0.118671475
0,1,0.428967984,0.23795173
0,1,0.523440618,0.457275922
0,1,0.379612652,0.337640868
0,1,0.338180659,0.206399031
1,0,0.079386,0.890939911
1,0,0.572864624,0.725615079
1,0,0.045891404,0.300128917
1,0,0.578792198,0.100698871
1,0,0.776485138,0.475135948
1,0,0.401850419,0.784835723
1,1,0.087660923,0.497299605
1,1,0.8460978,0.825774802
1,1,0.526015021,0.581905971
1,1,0.23324672,0.299475291 
```

然后此代码（使用 Pandas 数据结构）按需要工作

```
import numpy as np
import random as rnd
import pandas as pd
#sample data strat_sample.csv, contents to follow

def TreatmentOneCount(n , *args):
    #assign a minimum one to each group but as close as possible to fraction OptimalRatio in group 1\. 
    OptimalRatio = args[0]
    if n < 2:
        print("N too small, assignment not defined.")
        a = NaN
    elif n == 2:
        a = 1
    else:
        """
        There are one of two numbers that are close to the target ratio, one above, the other below
        If the number above is N and it is closest to optimal, then you need to set things to N-1 to ensure both groups have at least one member (recall n>2)
        If the number below is 0 and it is closest to optimal, then you need to set things to 1 to ensure both groups have at least one member (recall n>2)
        """
        targetassigment = OptimalRatio * n
        if  targetassigment - floor(targetassigment) > 0.5:
            a = min(ceil(targetassigment),n-1)
        else:
            a = max(floor(targetassigment),1)
    return a

df = pd.read_csv('strat_sample.csv', sep=','  , header=0)

#assign a random number to each entry
df['RandScore'] =  np.random.uniform(0,1,df.shape[0])
df.sort(columns= ['Index_1' ,'Index_2','RandScore'], inplace = True)

#Within each block assign a rank based on random number. 
df['RandRank'] = df.groupby(['Index_1','Index_2'])['RandScore'].rank()

#make a group index
df['MasterIdx'] = df['Index_1'].apply(str) + df['Index_2'].apply(str)

#Store the counts for members of each block
seriestest = df.groupby('MasterIdx')['RandRank'].count()
seriestest.name = "Counts"
dftest = pd.DataFrame(seriestest)

#Add the block counts to the data
df = df.merge(dftest, how='left',  left_on = 'MasterIdx', right_index= True)

#Make the actual assignments to the two groups
df['Assignment'] = (df['RandRank'] <=  df['Counts'].apply(TreatmentOneCount, args = (0.8,))) * -1 + 2
df.drop(['MasterIdx', 'Counts', 'RandRank', 'RandScore'], axis=1) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2015-01-02T11:06:41.170

```
from sklearn import cross_validation

X_train, X_test, Y_train, Y_test = cross_validation.train_test_split(X, y, test_size=0.2, random_state=0) 
```

# ios - 带有滚动背景图案的 UITableView

> ID：15838734
> 
> 赞同：4
> 
> 时间：2013-04-05T16:15:25.857
> 
> 标签：ios, objective-c, uitableview, uibackgroundcolor

我有一个 UITableView，其 backgroundColor 属性设置如下：

```
tableview.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"IMAGE"]]; 
```

这为 tableview 提供了一个滚动的背景，这正是我想要的。

问题是，当我向 中添加单元格时，在每个单元格中，*新*开始/重新开始`tableview`的背景图案：`tableview`

 *![UIScrollView 问题](https://i.stack.imgur.com/5fdD1.png)

在上图中，您可以在红色圆圈区域看到问题。

对于`tableview`单元格，我已将所有`backgroundColors`设置`clearColor`为

*   背景视图
*   文本标签
*   详细的文本标签
*   内容视图

我也试过设置

```
cell.backgroundView = [UIView new];
cell.backgroundView.backgroundColor = [UIColor clearColor]; 
```

contentView 也是如此。

**附加说明**：设置 tableview 的 backgroundView 没有帮助，因为从那时起背景不再滚动！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T22:14:13.313

刚刚遇到这个问题，发现这修复了具有自己的 backgroundColor 副本的单元格

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    [cell setBackgroundColor:[UIColor clearColor]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:58:04.573

这是我要做的：

1）创建一个视图控制器并将视图背景颜色设置为您的图案图像。

2）将您的表视图控制器作为子视图控制器添加到新创建的视图控制器中。这可以在代码中完成，或者如果您使用的是 iOS 6 和故事板，则可以使用嵌入 segue。如果您在代码中执行此操作，您可能需要手动设置表格视图控制器的框架。

3) 将表格视图控制器的背景颜色设置为 [UIColor clearColor]

我有一个类似的问题，这对我有用。*

# json - KnockoutJS - 数据绑定到字典集合 - 更新

> ID：15838739
> 
> 赞同：0
> 
> 时间：2013-04-05T16:15:38.047
> 
> 标签：json, knockout.js

这个问题在这里 [KnockoutJS - Databind to a dictionary collection](https://stackoverflow.com/questions/7400387/knockoutjs-databind-to-a-dictionary-collection)

我正在从来自服务器的 JSON 创建一个下拉选择。但是在创建它之后的某个时候，我希望更新数据。我创建了一个小提琴 [http://jsfiddle.net/LPrf3/](http://jsfiddle.net/LPrf3/)

这显示了我目前的位置。我成功更新了选择的可观察数组。但是...由于某种原因，您需要单击下拉菜单中的选择以使其刷新

Javascript：

```
$(function() {

var destinationsFromServer = {"Europe":"Europe incl Egypt, Turkey & Tunisia","ANZO":"Australia & New Zealand","WorldwideUSA":"Worldwide (incl USA & Canada)"};

var updatedDestinationsFromServer = {"Arctic":"Includes Polar bears and seals","Antarctic":"Just Penguins"};

function mapDictionaryToArray(dictionary) {
    var result = [];
    for (var key in dictionary) {
        if (dictionary.hasOwnProperty(key)) {
            result.push({ key: key, value: dictionary[key] }); 
        }  
    }

    return result;
}

function  viewModel () {
    destinations= ko.observableArray(mapDictionaryToArray(destinationsFromServer));
    selectedDestination= ko.observable();
    updateDestinations = function()
    {
        destinations= ko.observableArray(mapDictionaryToArray(updatedDestinationsFromServer));
    };
};

ko.applyBindings(new viewModel());

}); 
```

HTML

```
<select data-bind="options: destinations, optionsText: 'key', optionsValue: 'value', value: selectedDestination"></select>

<hr />

<div data-bind="text: selectedDestination"></div>
<button data-bind="click:updateDestinations">UPDATE</button> 
```

如何让选择更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:32:14.330

您正在重新评估`destinations`新的`observabelArray`而不是更新数组。看到[这个小提琴](http://jsfiddle.net/tyrsius/LPrf3/1/)。更新**任何**observable 时，始终将新值作为参数传入，切勿向`=`操作员分配新值。

错误道：

```
updateDestinations = function(){
    destinations=ko.observableArray(mapDictionaryToArray(updatedDestinationsFromServer));
}; 
```

正确的方法：

```
updateDestinations = function(){
    destinations(mapDictionaryToArray(updatedDestinationsFromServer));
}; 
```

# google-app-engine - JPA 和应用引擎中的子实体身份（危机）

> ID：15838741
> 
> 赞同：4
> 
> 时间：2013-04-05T16:15:39.763
> 
> 标签：google-app-engine, google-cloud-datastore, datanucleus, google-eclipse-plugin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:16:09.513

我认为这个问题显然与 Book 和 Author 的键有关。

您可能不喜欢我的解决方案，也可能不是最好的解决方案。至于我在 GAE 数据存储中处理自有关系的（短暂）经验，我遇到了许多与密钥相关的错误，所以我最终做了以下事情：

我用它作为我**所有**课程的主键：

```
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key; 
```

我让应用程序完全创建密钥，我的意思是，我不会尝试向密钥添加任何应用程序创建的值。我只有 getter 和 setter 作为键，但我在构造函数中没有用它做任何事情。

如果我想为我的对象拥有自己的 id/code/key，我只需在类中添加 antoher 属性。

我知道这可能是“懦夫”的解决方案，但现在一切对我来说都更好了......

编辑：如前所述，这不是最好的方法，因为关键查询比其他字段的查询更快，所以如果有人有一个好的解决方案，我也会很感激......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T10:28:43.643

我不知道这是否仍然相关，但它会解决作者类中的问题 -

```
 private long ssn; 
```

应该是

```
 private Long ssn; 
```

# javascript - Layout mess-up when javascript "keyup" run in google chrome

> ID：15838745
> 
> 赞同：0
> 
> 时间：2013-04-05T16:16:01.287
> 
> 标签：javascript, jquery, google-chrome, javascript-events

i create simple function when keyup using javascript like so :

```
<script>
//when press enter, submit this form, when press shift and enter create new line
$("#text_reply1778").keyup(function(e) {
    var textVal = $(this).val();
    if(e.which == 13 && e.shiftKey) {
        //here create new line
    }
    else if (e.which == 13) {
       e.preventDefault(); 
       var text_input = $("#text_reply1778").val();

       if(text_input != '') { //dont submit if value is empty

           $('#reply1778').ajaxSubmit( {
                target: '#reply_output1778', 
                success: function() { 
                    //do somthing here
                } 
            });  
       }
    }
});
</script> 
```

when i run this using browser Google Chrome *Version 26.0.1410.43* my layout will mess-up but this not happen when im using Firefox.

You can try from here (full code) [chat1.html](http://www.bsx-multihack.org/chat1.html) , then type any message inside textarea(*chat box*) then you will see layout will mess-up.

So how to avoid this ? any method that i can use , i try replace keyup with keypress but result still same.

# functional-programming - 使用 Scheme 抓取网页

> ID：15838749
> 
> 赞同：8
> 
> 时间：2013-04-05T16:16:19.600
> 
> 标签：functional-programming, scheme, web-scraping, mechanize, racket

是否有一个好的库/包可以使用 Scheme（最好是 Racket）进行网络抓取？

[例如mechanize](http://wwwsearch.sourceforge.net/mechanize/)的 Scheme 等价物？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T19:30:31.527

我使用了 Racket [net/url](http://docs.racket-lang.org/net/url.html)库、[html-parsing 包](http://planet.racket-lang.org/display.ss?package=html-parsing.plt&owner=neil)和[SXML](http://planet.racket-lang.org/display.ss?package=sxml2.plt&owner=clements)（尤其是`sxpath`用于 XPath 查询）的组合。实际上，我在 net/url 周围编写了[一些包装器](http://planet.racket-lang.org/package-source/ryanc/webapi.plt/1/1/private/net.rkt)，使其更易于使用，IMO。

当我需要处理 cookie 时，我调用了`curl`命令而不是使用 net/url。

# ruby-on-rails - 在 Rails 中根据对象类型渲染模板

> ID：15838758
> 
> 赞同：1
> 
> 时间：2013-04-05T16:16:44.110
> 
> 标签：ruby-on-rails, ruby, templates, rendering

我正在编写一个小型论坛应用程序，用户可以在其中创建不同类型的论坛。例如，公告、讨论或问题论坛。

论坛模型有很多帖子和一个`forum_type`专栏。我想`posts#show`根据`@post.forum_type`列使用不同的模板进行渲染。

因此，每个论坛，根据其类型，其帖子将具有不同的外观。

我怎样才能做到这一点，而不用乱扔我的代码`if @post.forum_type == 'something'`......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:32:09.997

代表团。编写一个帖子渲染器，然后为每个论坛类型实现一个具体的渲染器子类：

```
class Post
  attr_accessor :forum_type       
end

class BaseRenderer
  def renderer_for(post) 
    # create the correct renderer for the post here
  end

  def render_post(post)
    renderer = renderer_for(post)
    renderer.to_html  # return the results
end

class ForumAPostRenderer
  def initialize(post)
    @post = post
  end

  def render
    # render the post for forum A here\
  end
end

class ForumBPostRenderer
  def initialize(post)
    @post = post
  end

  def render
    #render post for forum B here
  end
end 
```

这意味着您可以通过仅实现一个渲染器并向 renderer_for 方法添加一点逻辑来轻松地为不同的论坛设置皮肤。

# jquery - Modelstate 总是抛出无效的日期时间错误

> ID：15838760
> 
> 赞同：0
> 
> 时间：2013-04-05T16:16:53.183
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我对 Asp.net MVC4 中的日期验证有疑问。我正在使用数据注释进行日期验证，如下所示

```
 [DataType(DataType.Date)]
   [AllowHtml]
   [DisplayFormat(HtmlEncode = false, ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]      
   [Display(Name = "Date Of Birth")]
   public Nullable<System.DateTime> DateOfBirth { get; set; } 
```

接下来，在 Html 页面中，我在 MVC Html 表单中使用以下内容

```
@Html.TextBoxFor(model => model.UserSettings.DateOfBirth, 
                          String.Format("{0:dd/MM/yyyy}",
                          model.UserSettings.DateOfBirth), 
                       new { id = "DoB", @class = "brth-ipt" }) 
```

最后，我正在使用 Jquery 日期选择器，如下所示

```
$(function () {
    $("#DoB").datepicker("destroy");
    $("#DoB").datepicker({
        showOn: "both",
        beforeShow: customRange,
        dateFormat: "dd/mm/yy",  //"mm-dd-yy",
        firstDay: 1,
        changeFirstDay: false,
        changeMonth: true,
        changeYear: true,
        yearRange: "-150:+0"
    });
}); 
```

我的问题是，当我从 datepicker 中选择一个日期时，它显示为 mm/dd/yyyy 格式并且工作正常。

但是当我再次加载页面以编辑表单时，它以 mm-dd-yyyy 格式显示。现在，当我保存表单而不更改前一个日期（mm-dd-yyyy 格式）时，我无法保存表单，因为数据注释验证给我一个错误。“日期格式无效”。

我无法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:31:27.887

尝试这个：

```
 [DataType(DataType.Date)]
    [DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:d}")]
    [Display(Name = "Date Of Birth:")]
    public DateTime? DateOfBirth { get; set; } 
```

据我所知，你甚至不需要使用`Jquery Date picker`. 该框架带有内置的帮助器来选择您的日期。

**在你看来**

```
 <div class="editor-label">
        @Html.LabelFor(model => model.DateOfBirth )
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.DateOfBirth )
        @Html.ValidationMessageFor(model => model.DateOfBirth )
    </div> 
```

**这是在谷歌浏览器中测试的**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:37:31.520

`Html.TextBoxFox()`不`[DisplayFormat]`考虑。要利用此属性并实现您的目标，您可以使用

```
Html.EditorFor(x => x.UserSettings.DateOfBirth, new {id = "DoB", @class = "brth-ipt"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-29T08:02:17.497

我遇到了同样的事情，终于找到了解决我的问题的方法。我在 ViewModel 中做了这个数据注释

```
[DataType(DataType.Date)]
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")] 
```

我的日期选择器中的这段代码 < div >

```
<div class="input-group date" id="mydatepicker" data-date-format="MM-dd-yyyy">
   <input asp-for="MyDate" type="text" class="form-control" />
   <span class="input-group-addon">
      <i class="glyphicon glyphicon-calendar"></i>
   </span>
</div> 
```

我把这段代码放在jquery中通过ajax发送

```
$('#calender-container .input-group.date').datepicker({
   todayBtn: true,
   calendarWeeks: true,
   todayHighlight: true,
   autoclose: true,
}).datepicker('update', new Date()); 
```

当我将数据日期格式从“mm-dd-yyyy”更改为
“MM-dd-yyyy”时，这很有趣，这给了我无效的模型状态，一切都变得有效。

# java - 为什么要减去'a'

> ID：15838762
> 
> 赞同：-2
> 
> 时间：2013-04-05T16:16:56.067
> 
> 标签：java

有人可以解释这行代码的作用吗？

```
for(k=0; k < limit; k++)
{
    int index = s.charAt(k) - 'a';     <---> THIS LINE
}
t.myIsWord = true; 
```

为什么是-'a'？我不明白

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T16:17:44.320

它转换`'a'`为`0`, `'b'`to `1`, `'c'`to`2`等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:22:53.850

```
int index = s.charAt(k) - 'a'; 
```

在 Java 中，char 可以转换为 int。每个字符都有一些 int 值，但 'a' 为 0 而 'b' 为 1 是不正确的。这些值是不同的（基于 ASCII 表中的位置）。

要将“a”设为 0，将“b”设为 1，等等，您需要从给定字符中减去“a”。

这就是这条线的作用。

# entity-framework-5 - 实体框架：如何从 edmx 文件重新创建 tt 记录...是否缺少 tt 记录导致找不到概念模型错误

> ID：15838764
> 
> 赞同：0
> 
> 时间：2013-04-05T16:16:59.410
> 
> 标签：entity-framework-5

我一直在针对现有数据库和大量存储过程进行一些数据库优先实体框架开发。当我进行开发时，我会创建 tt 文件，这些文件会导致与 edmx 文件发生冲突......我忘记了确切的消息，但许多生成的类被找到了两次。当试图解决这个问题时，我发现如果我删除了 tt 文件，它会清除问题......并且似乎没有任何不利的一面。

我的代码正在运行，一切都很好。

但是现在我已经取得了足够的进展，以至于其他人第一次尝试使用我的代码......他们将代码从存储库中取出，我发现在除了我的原始开发机器之外的每台机器上，代码都可以正常编译，但是尝试运行时，我收到“无法为类型 xxxxx 找到概念模型”的错误...我知道这与实体框架有关，并且在阅读时我开始认为这是由于没有 tt其他机器上的记录....

我不知道为什么它在我的机器上运行而不是在其他机器上运行......是因为我删除了 tt 记录吗？如果是这样，我怎样才能从 edmx 文件生成新的 tt 记录？我已经看过并没有找到任何关于如何纠正我的错误的信息....

第二个问题是如何防止 tt 记录和 edmx 文件发生冲突？我的记忆是 tt 记录会创建文件......但是当我更新 edmx 文件时，它会开始产生冲突......就像 edmx 和 tt 记录会不同步......并且 tt 记录是edmx 文件时未更新。

这仍然是开发代码....我现在正在考虑尝试先编写代码 EF...我已经阅读过有关此内容，但认为我无法利用它，因为所有业务逻辑都存储在存储过程，所以我首先要使用数据库....但这不起作用，因为有大量的GETS，每个GETS的属性集略有不同....从我所看到的数据库首先可以工作，但是当我真正需要的是一个基类时，我得到了很多不同的类......也许具有可选或可为空的值......在同样的情况下，一个完整的类层次......所以现在我才刚刚开始使用现有数据库（我希望它支持存储过程）阅读代码优先 EF。

# javascript - 滚动 div 后，如何将引导导航栏固定到顶部？

> ID：15838776
> 
> 赞同：6
> 
> 时间：2013-04-05T16:17:48.280
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我试图让我的带有引导程序的导航栏出现在某个名为“A”的 div 之后。div“a”位于页面顶部，高度约为 400px。一旦用户滚动过去 div "a" 和滚动条，我希望滚动条贴在顶部。类似于这样的内容：[https](https://www.facebook.com/home) ://www.facebook.com/home但顶部没有视频，它是图像。

我们能做到我们自己引导吗？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T17:16:58.070

如果您想使用 Twitter 的 Bootstrap 来实现这一点，请查看“Affix”js。您使用“data-offset-top”定义“固定”点，然后当用户向下滚动时，导航栏将固定在顶部。

CSS：

```
#con .well {
    height:390px;
}

#nav.affix {
    position: fixed;
    top: 0;
    width: 100%
} 
```

HTML：

```
<div class="container" data-spy="affix" data-offset-top="400" id="nav">
    <div id="nav" class="navbar">
        <div class="navbar-inner"> ... 
```

Javascript：

```
$('#nav').affix(); 
```

这是工作小提琴：http: [//jsfiddle.net/skelly/df8tb/](http://jsfiddle.net/skelly/df8tb/)

这是一个工作示例（针对 Bootstrap 3 更新）：[http ://bootply.com/90936](http://bootply.com/90936)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:22:34.990

要在 facebook.com/home 上显示效果，您的导航栏位置应设置为静态（或相对/绝对），直到用户滚动超过 400 像素，然后您需要将其位置设置为固定，以便保持在顶部屏幕。这可以用一点 javascript 来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:25:16.127

这个答案不再正确。请参阅下面的@zim 答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-23T17:13:51.967

请按照这个。当菜单栏到达顶部位置时，您将看不到快照。

```
<!DOCTYPE html>
<html>
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <style>
  body {
      position: relative; 
  }
  .affix {
      top:0;
      width: 100%;
      z-index: 9999 !important;
  }
  .navbar {
      margin-bottom: 0px;
  }

  .affix ~ .container-fluid {
     position: relative;
     top: 50px;
  }
  #section1 {padding-top:50px;height:500px;color: #fff; background-color: #1E88E5;}
  #section2 {padding-top:50px;height:500px;color: #fff; background-color: #673ab7;}
  #section3 {padding-top:50px;height:500px;color: #fff; background-color: #ff9800;}
  #section41 {padding-top:50px;height:500px;color: #fff; background-color: #00bcd4;}
  #section42 {padding-top:50px;height:500px;color: #fff; background-color: #009688;}
  </style>
</head>
<body data-spy="scroll" data-target=".navbar" data-offset="50">

<div class="container-fluid" style="background-color:#F44336;color:#fff;height:200px;">
  <h1>Scrollspy & Affix Example</h1>
  <h3>Fixed navbar on scroll</h3>
  <p>Scroll this page to see how the navbar behaves with data-spy="affix" and data-spy="scrollspy".</p>
  <p>The navbar is attached to the top of the page after you have scrolled a specified amount of pixels, and the links in the navbar are automatically updated based on scroll position.</p>
</div>

<nav class="navbar navbar-inverse" data-spy="affix" data-offset-top="197">
  <div class="container-fluid">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="#">WebSiteName</a>
    </div>
    <div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li><a href="#section1">Section 1</a></li>
          <li><a href="#section2">Section 2</a></li>
          <li><a href="#section3">Section 3</a></li>
          <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Section 4 <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="#section41">Section 4-1</a></li>
              <li><a href="#section42">Section 4-2</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>    

<div id="section1" class="container-fluid">
  <h1>Section 1</h1>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
</div>
<div id="section2" class="container-fluid">
  <h1>Section 2</h1>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
</div>
<div id="section3" class="container-fluid">
  <h1>Section 3</h1>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
</div>
<div id="section41" class="container-fluid">
  <h1>Section 4 Submenu 1</h1>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
</div>
<div id="section42" class="container-fluid">
  <h1>Section 4 Submenu 2</h1>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
  <p>Try to scroll this section and look at the navigation bar while scrolling! Try to scroll this section and look at the navigation bar while scrolling!</p>
</div>

</body>
</html> 
```

* * *

参考： [https ://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_scrollspy_affix&stacked=h](https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_scrollspy_affix&stacked=h)

# java - 从单元格编辑器组件显示对话框时，JTable 失去焦点

> ID：15838778
> 
> 赞同：2
> 
> 时间：2013-04-05T16:17:51.657
> 
> 标签：java, swing, jtable, jdialog, tablecelleditor

在我的主应用程序中，当从单元格编辑器组件显示对话框时，JTable 失去焦点。

下面是我为您制作的简单 SSCCE 以查看问题。

做这些简单的实验：

*   在第一个表格列中按 F2 开始编辑。然后将列内容更改为数字 2 并按 ENTER 键。表格将失去焦点，表单中的第一个字段将失去焦点。
*   在第一个表格列中按 F2 开始编辑。然后将列内容更改为数字 2 并按 TAB 键。表格将失去焦点，表单中的第一个字段将失去焦点。

表单中的第一个字段也是一个 SearchField 组件。因为它不在 JTable 中，所以当您将其内容更改为数字 2 并提交编辑（使用 ENTER 或 TAB）时，它会正常运行。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.text.NumberFormat;
import java.text.ParseException;
import java.util.Objects;

import javax.swing.BorderFactory;
import javax.swing.Box;
import javax.swing.BoxLayout;
import javax.swing.DefaultCellEditor;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;
import javax.swing.text.DefaultFormatterFactory;
import javax.swing.text.NumberFormatter;

public class SSCCE extends JPanel
{
    private SSCCE()
    {
        setLayout(new BorderLayout());
        setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));

        JPanel pnlFields = new JPanel();
        pnlFields.setLayout(new BoxLayout(pnlFields, BoxLayout.PAGE_AXIS));
        pnlFields.setBorder(BorderFactory.createEmptyBorder(0, 0, 10, 0));

        SearchField field1 = new SearchField();
        configureField(field1);
        pnlFields.add(field1);

        pnlFields.add(Box.createRigidArea(new Dimension(0, 3)));

        JTextField field2 = new JTextField();
        configureField(field2);
        pnlFields.add(field2);

        add(pnlFields, BorderLayout.PAGE_START);
        add(new JScrollPane(createTable()), BorderLayout.CENTER);
    }

    private void configureField(JTextField field)
    {
        field.setPreferredSize(new Dimension(150, field.getPreferredSize().height));
        field.setMaximumSize(field.getPreferredSize());
        field.setAlignmentX(LEFT_ALIGNMENT);
    }

    private JTable createTable()
    {
        JTable table = new JTable(new CustomTableModel());

        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.setCellSelectionEnabled(true);
        table.getTableHeader().setReorderingAllowed(false);
        table.setPreferredScrollableViewportSize(new Dimension(500, 170));

        table.setDefaultEditor(Integer.class, new SearchFieldCellEditor(new SearchField()));

        return table;
    }

    private static void createAndShowGUI()
    {
        JFrame frame = new JFrame("SSCCE (JTable Loses Focus)");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new SSCCE());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(
            new Runnable()
            {
                @Override
                public void run()
                {
                    createAndShowGUI();
                }
            }
        );
    }
}

class CustomTableModel extends AbstractTableModel
{
    private String[] columnNames = {"Column1 (Search Field)", "Column 2"};
    private Class<?>[] columnTypes = {Integer.class, String.class};
    private Object[][] data = {{1, ""}, {3, ""}, {4, ""}, {5, ""}, {6, ""}};

    @Override
    public int getColumnCount()
    {
        return columnNames.length;
    }

    @Override
    public int getRowCount()
    {
        return data.length;
    }

    @Override
    public String getColumnName(int col)
    {
        return columnNames[col];
    }

    @Override
    public Object getValueAt(int row, int col)
    {
        return data[row][col];
    }

    @Override
    public Class<?> getColumnClass(int c)
    {
        return columnTypes[c];
    }

    @Override
    public boolean isCellEditable(int rowIndex, int columnIndex)
    {
        return true;
    }

    @Override
    public void setValueAt(Object value, int row, int col)
    {
        data[row][col] = value;
        fireTableCellUpdated(row, col);
    }
}

class SearchFieldCellEditor extends DefaultCellEditor
{
    SearchFieldCellEditor(final SearchField searchField)
    {
        super(searchField);
        searchField.removeActionListener(delegate);
        delegate = new EditorDelegate()
        {
            @Override
            public void setValue(Object value)
            {
                searchField.setValue(value);
            }

            @Override
            public Object getCellEditorValue()
            {
                return searchField.getValue();
            }
        };
        searchField.addActionListener(delegate);
    }

    @Override
    public boolean stopCellEditing()
    {
        try
        {
            ((SearchField) getComponent()).commitEdit();
        }
        catch (ParseException ex)
        {
            ex.printStackTrace();
        }
        return super.stopCellEditing();
    }
}

class SearchField extends JFormattedTextField implements PropertyChangeListener
{
    private Object _oldValue;

    SearchField()
    {
        setupFormatter();
        addPropertyChangeListener("value", this);
    }

    private void setupFormatter()
    {
        NumberFormat integerFormat = NumberFormat.getIntegerInstance();
        integerFormat.setGroupingUsed(false);

        NumberFormatter integerFormatter =
            new NumberFormatter(integerFormat)
            {
                @Override
                public Object stringToValue(String text) throws ParseException
                {
                    return text.isEmpty() ? null : super.stringToValue(text);
                }
            };
        integerFormatter.setValueClass(Integer.class);
        integerFormatter.setMinimum(Integer.MIN_VALUE);
        integerFormatter.setMaximum(Integer.MAX_VALUE);

        setFormatterFactory(new DefaultFormatterFactory(integerFormatter));
    }

    @Override
    public void propertyChange(PropertyChangeEvent evt)
    {
        Object newValue = evt.getNewValue();
        if (!Objects.equals(newValue, _oldValue))
        {
            _oldValue = newValue;
            // Suppose that a value of 2 means that the data wasn't found.
            // So we display a message to the user.
            if (new Integer(2).equals(newValue))
            {
                JOptionPane.showMessageDialog(
                    null, "Not found: " + newValue + ".", "Warning",
                    JOptionPane.WARNING_MESSAGE);
            }
        }
    }
} 
```

那么，有没有办法解决这个问题呢？这个问题的解决方案对我来说非常重要。

谢谢你。

马科斯

*****更新*******

 **我想我已经找到了一个解决方案，但如果它真的是一个值得信赖的解决方案，我想听听你的意见。

将*stopCellEditing*方法更改为此并再次测试 SSCCE：

```
@Override
public boolean stopCellEditing()
{
    SearchField searchField = (SearchField) getComponent();

    try
    {
        searchField.commitEdit();
    }
    catch (ParseException ex)
    {
        ex.printStackTrace();
    }

    Component table = searchField.getParent();
    table.requestFocusInWindow();

    return super.stopCellEditing();
} 
```

那么，您认为这真的解决了问题还是有任何缺陷？

马科斯

**更新 2**

我发现了一个小漏洞。通过以下更改进行了更正：

```
class SearchFieldCellEditor extends DefaultCellEditor
{
    SearchFieldCellEditor(final SearchField searchField)
    {
        super(searchField);
        searchField.removeActionListener(delegate);
        delegate = new EditorDelegate()
        {
            @Override
            public void setValue(Object value)
            {
                searchField.setValue(value);
            }

            @Override
            public Object getCellEditorValue()
            {
                return searchField.getValue();
            }
        };
        searchField.addActionListener(delegate);
    }

    @Override
    public Component getTableCellEditorComponent(
        JTable table, Object value, boolean isSelected, int row, int column)
    {
        SearchField searchField = (SearchField) getComponent();
        searchField.setPreparingForEdit(true);
        try
        {
            return super.getTableCellEditorComponent(
                table, value, isSelected, row, column);
        }
        finally
        {
            searchField.setPreparingForEdit(false);
        }
    }

    @Override
    public boolean stopCellEditing()
    {
        SearchField searchField = (SearchField) getComponent();

        try
        {
            searchField.commitEdit();
        }
        catch (ParseException ex)
        {
            ex.printStackTrace();
        }

        Component table = searchField.getParent();
        table.requestFocusInWindow();

        return super.stopCellEditing();
    }
}

class SearchField extends JFormattedTextField implements PropertyChangeListener
{
    private boolean _isPreparingForEdit;
    private Object _oldValue;

    SearchField()
    {
        setupFormatter();
        addPropertyChangeListener("value", this);
    }

    void setPreparingForEdit(boolean isPreparingForEdit)
    {
        _isPreparingForEdit = isPreparingForEdit;
    }

    private void setupFormatter()
    {
        NumberFormat integerFormat = NumberFormat.getIntegerInstance();
        integerFormat.setGroupingUsed(false);

        NumberFormatter integerFormatter =
            new NumberFormatter(integerFormat)
            {
                @Override
                public Object stringToValue(String text) throws ParseException
                {
                    return text.isEmpty() ? null : super.stringToValue(text);
                }
            };
        integerFormatter.setValueClass(Integer.class);
        integerFormatter.setMinimum(Integer.MIN_VALUE);
        integerFormatter.setMaximum(Integer.MAX_VALUE);

        setFormatterFactory(new DefaultFormatterFactory(integerFormatter));
    }

    @Override
    public void propertyChange(PropertyChangeEvent evt)
    {
        final Object newValue = evt.getNewValue();
        if (!Objects.equals(newValue, _oldValue))
        {
            _oldValue = newValue;
            // Suppose that a value of 2 means that the data wasn't found.
            // So we display a message to the user.
            if (new Integer(2).equals(newValue) && !_isPreparingForEdit)
            {
                JOptionPane.showMessageDialog(null, "Not found: " + newValue + ".", "Warning",
                    JOptionPane.WARNING_MESSAGE);
            }
        }
    }
} 
```

你是否也发现了更多的漏洞？我想听听你的评论。

马科斯

**更新 3**

*kleopatra*建议后的另一个解决方案：

```
class SearchFieldCellEditor extends DefaultCellEditor
{
    SearchFieldCellEditor(final SearchField searchField)
    {
        super(searchField);
        searchField.setShowMessageAsynchronously(true);
        searchField.removeActionListener(delegate);
        delegate = new EditorDelegate()
        {
            @Override
            public void setValue(Object value)
            {
                searchField.setValue(value);
            }

            @Override
            public Object getCellEditorValue()
            {
                return searchField.getValue();
            }
        };
        searchField.addActionListener(delegate);
    }

    @Override
    public Component getTableCellEditorComponent(
        JTable table, Object value, boolean isSelected, int row, int column)
    {
        SearchField searchField = (SearchField) getComponent();
        searchField.setPreparingForEdit(true);
        try
        {
            return super.getTableCellEditorComponent(
                table, value, isSelected, row, column);
        }
        finally
        {
            searchField.setPreparingForEdit(false);
        }
    }

    @Override
    public boolean stopCellEditing()
    {
        SearchField searchField = (SearchField) getComponent();

        try
        {
            searchField.commitEdit();
        }
        catch (ParseException ex)
        {
            ex.printStackTrace();
        }

        return super.stopCellEditing();
    }
}

class SearchField extends JFormattedTextField implements PropertyChangeListener
{
    private boolean _showMessageAsynchronously;
    private boolean _isPreparingForEdit;
    private Object _oldValue;

    SearchField()
    {
        setupFormatter();
        addPropertyChangeListener("value", this);
    }

    public boolean isShowMessageAsynchronously()
    {
        return _showMessageAsynchronously;
    }

    public void setShowMessageAsynchronously(boolean showMessageAsynchronously)
    {
        _showMessageAsynchronously = showMessageAsynchronously;
    }

    void setPreparingForEdit(boolean isPreparingForEdit)
    {
        _isPreparingForEdit = isPreparingForEdit;
    }

    private void setupFormatter()
    {
        NumberFormat integerFormat = NumberFormat.getIntegerInstance();
        integerFormat.setGroupingUsed(false);

        NumberFormatter integerFormatter =
            new NumberFormatter(integerFormat)
            {
                @Override
                public Object stringToValue(String text) throws ParseException
                {
                    return text.isEmpty() ? null : super.stringToValue(text);
                }
            };
        integerFormatter.setValueClass(Integer.class);
        integerFormatter.setMinimum(Integer.MIN_VALUE);
        integerFormatter.setMaximum(Integer.MAX_VALUE);

        setFormatterFactory(new DefaultFormatterFactory(integerFormatter));
    }

    @Override
    public void propertyChange(PropertyChangeEvent evt)
    {
        final Object newValue = evt.getNewValue();
        if (!Objects.equals(newValue, _oldValue))
        {
            _oldValue = newValue;
            // Suppose that a value of 2 means that the data wasn't found.
            // So we display a message to the user.
            if (new Integer(2).equals(newValue) && !_isPreparingForEdit)
            {
                if (_showMessageAsynchronously)
                {
                    SwingUtilities.invokeLater(
                        new Runnable()
                        {
                            @Override
                            public void run()
                            {
                                showMessage(newValue);
                            }
                        }
                    );
                }
                else
                {
                    showMessage(newValue);
                }
            }
        }
    }

    private void showMessage(Object value)
    {
        JOptionPane.showMessageDialog(null, "Not found: " + value + ".",
            "Warning", JOptionPane.WARNING_MESSAGE);
    }
} 
```

关于最后一个解决方案的评论和建议仍然受到赞赏。这是最终和最优的解决方案吗？

马科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:45:48.430

在 stopCellEditing() 方法中进行编辑。

在此示例中，您必须输入 5 个字符的字符串：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.*;
import javax.swing.event.*;
import javax.swing.border.*;
import javax.swing.table.*;

public class TableEdit extends JFrame
{
    TableEdit()
    {
        JTable table = new JTable(5,5);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());

        JScrollPane scrollpane = new JScrollPane(table);
        add(scrollpane);

        //  Use a custom editor

        TableCellEditor fce = new FiveCharacterEditor();
        table.setDefaultEditor(Object.class, fce);

        add(new JTextField(), BorderLayout.NORTH);
    }

    class FiveCharacterEditor extends DefaultCellEditor
    {
        FiveCharacterEditor()
        {
            super( new JTextField() );
        }

        public boolean stopCellEditing()
        {
            JTable table = (JTable)getComponent().getParent();

            try
            {
                System.out.println(getCellEditorValue().getClass());
                String editingValue = (String)getCellEditorValue();

                if(editingValue.length() != 5)
                {
                    JTextField textField = (JTextField)getComponent();
                    textField.setBorder(new LineBorder(Color.red));
                    textField.selectAll();
                    textField.requestFocusInWindow();

                    JOptionPane.showMessageDialog(
                        null,
                        "Please enter string with 5 letters.",
                        "Alert!",JOptionPane.ERROR_MESSAGE);
                    return false;
                }
            }
            catch(ClassCastException exception)
            {
                return false;
            }

            return super.stopCellEditing();
        }

        public Component getTableCellEditorComponent(
            JTable table, Object value, boolean isSelected, int row, int column)
        {
            Component c = super.getTableCellEditorComponent(
                table, value, isSelected, row, column);
            ((JComponent)c).setBorder(new LineBorder(Color.black));

            return c;
        }

    }

    public static void main(String [] args)
    {
        JFrame frame = new TableEdit();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo( null );
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T09:43:36.350

正如我已经评论过的：在编辑器中更改表格的状态有点可疑，特别是如果它与即使在最好的情况下也很脆弱的焦点有关。所以我会竭尽全力避免它。

错误行为感觉类似于错误实现的 InputVerifier，它在其验证与在其 shouldYieldFocus 中具有副作用（如抓住焦点），这是正确的：在这种情况下，focusManager 会感到困惑，它“忘记”了自然last-focusOwner-before。

补救措施可能是让经理先完成其工作，并仅在完成后才显示信息。在您的示例代码中，可以通过包装到 invokeLater 中来实现：

```
if (needsMessage()) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            JOptionPane.showMessageDialog(null, "Not found: " +
                    newValue + ".", "Warning",
                    JOptionPane.WARNING_MESSAGE);

        }
    });
} 
```**

# python - 创建分层python对象，其中方法的参数来自层次结构

> ID：15838780
> 
> 赞同：1
> 
> 时间：2013-04-05T16:17:58.000
> 
> 标签：python, class, inheritance, module

我使用的现有模块包含一个类，该类具有带有字符串参数的方法，这些方法采用以下形式：

```
existing_object.existing_method("arg1") 
```

或者

```
existing_object.existing_method("arg1:arg2") 
```

论点采用层次结构。我想创建一个模块，将参数对象化，并使它们成为导入模块类的方法，这样使用看起来像这样：

```
my_object.arg1.my_method() 
```

或者

```
my_object.arg1.arg2.my_method() 
```

my_method() 将调用existing_method()，同时将“arg1:arg2”作为参数传递给它。

如果有人能指出我正确的开始方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:30:21.317

您可以使用`__getattr__`返回特殊方法调用者实例的自定义来执行此操作：

```
class MethodCaller(object):
    def __init__(self, args, parent):
        self.args = args
        self.parent = parent
    def __getattr__(self, name):
        return MethodCaller(self.args + (name,), self.parent)
    def my_method(self):
        return self.parent.existing_method(':'.join(self.args))

class MyClass(object):
    def __getattr__(self, name):
        return MethodCaller((name,), self)
    def existing_method(self, arg):
        print arg 
```

例子：

```
>>> MyClass().arg1.my_method()
arg1
>>> MyClass().arg1.arg2.my_method()
arg1:arg2
>>> MyClass().foo.bar.my_method()
foo:bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:45:41.230

更清楚地考虑这一点，我意识到我真正想要的是能够使用模块的 IPython 自省来导航层次结构。这意味着我只需要创建这样的对象：

```
class Foo():
    def __init__(self, arg):
        self.arg = arg
    def my_method(self.arg)

arg1 = Foo("arg1")
arg1.arg2 = Foo("arg1:arg2") 
```

# jsf - 使用 MyFaces 2.1.11 构建的应用程序能否在 Tomcat 6.0.24 上运行？

> ID：15838787
> 
> 赞同：0
> 
> 时间：2013-04-05T16:18:12.510
> 
> 标签：jsf, tomcat, jsf-2, myfaces

我刚刚开始一个新的 Web 应用程序（作为一个学习项目）。我可以自由选择使用什么框架，但我必须使用 JavaEE，它必须是 MVC，并且必须在 Tomcat 6.0.24 上运行。我决定使用 JSF 2，使用 MyFaces 实现（MyFaces 的选择是任意的......我只需要开始学习一些东西，但我希望它能够在实际应用中使用）。最新版本是 2.1.11，我想我会去的。但是，尝试在 Tomcat 6.0.24 上运行使用 MyFaces 2.1.11 构建的应用程序时会遇到任何问题吗？我是 Java Web 开发和 JSF 的新手，所以我不确定是否会有任何问题，但我不想走这条路（尤其是从头开始使用我使用的任何框架）并意识到我的应用程序不适用于 Tomcat 6.0.24。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:52:29.010

好吧，过去一周我做了更多的阅读和练习，事情变得更加清晰，被流行语压倒的感觉已经消退了一点。回想起来，让 JSF 2 和 JSTL 就位非常容易，而且我现在拥有了我认为功能齐全的开发环境。

确认[Tomcat 中支持的 Servlet/JSF 版本](http://tomcat.apache.org/whichversion.html)是小菜一碟。使用 Eclipse Indigo、JavaEE 6、Apache MyFaces 2.1.11 和 JSTL 1.2.1，我的（非常简单的）测试应用程序在 Tomcat 6.0.24 上运行。

这是一个非常具体的问题，所以我不确定它是否对其他人有用，但我想我会给出一个完整的答案。感谢 BalusC 对这个问题的投入以及他对 SO 的许多其他贡献！

# vb.net - 文件夹浏览器对话框检查空间

> ID：15838791
> 
> 赞同：0
> 
> 时间：2013-04-05T16:18:23.667
> 
> 标签：vb.net, vb.net-2010, checklistbox, checkeditems

我对 VB 比较陌生，我正在尝试弄清楚如何执行某个例程。我正在编写一个存档程序，其中包含一个复选框，其中填充了某个驱动器上的所有目录。当用户检查目录时，它进入一个 for 循环，该循环获取目录大小并将其显示在表单上。但是我遇到的问题是，一旦您开始选择超过 4 或 5 个，它就会变得越来越慢，因为它正在读取所有已检查的项目并验证文件大小。有没有一种方法可以让我抓住最后一个选中或未选中的项目，这样我就可以从当前大小中添加/减去？这是我当前的代码循环遍历所有选中的项目。先感谢您。

```
Dim fsize As Long = 0
Private Sub chklstbxWorkspace_SelectedIndexChanged(sender As Object, e As EventArgs) Handles chklstbxWorkspace.SelectedIndexChanged

    Dim entry As Object

    If chklstbxWorkspace.CheckedIndices.Count > 0 Then
        btnStartArchive.Enabled = True
    Else
        btnStartArchive.Enabled = False
    End If
    lblWorkspaceSize.Text = chklstbxWorkspace.CheckedIndices.Count.ToString & " folders selected."

    For Each entry In chklstbxWorkspace.CheckedItems
        fsize += DirectorySize("w:\" & entry.ToString, True)
        lblWorkspaceSize.Text = chklstbxWorkspace.CheckedIndices.Count.ToString & " folders selected.  " & Format(fsize, "###,###,###,###,##0") & " bytes."
    Next
    Application.DoEvents()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:08:40.163

您可能可以使用[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)来存储以前记录的目录及其大小，这样您就不必再次计算大小。

Dictionary 是一个存储键和值的集合（键是唯一的 - 因为您正在查看文件夹，所以我认为这应该可以保持，但这是需要注意的事情）。在这种情况下，您的 Key 是文件夹名称，Value 是文件夹大小。

假设我有一个`Form`叫`Form1`我可以像这样声明我的字典：

```
Imports System.Collections.Generic

Public Class Form1
    Dim fileSizesDict As Dictionary(Of String, Long) = New Dictionary(Of String, Long)() 
```

注意`System.Collections.Generic`.

然后你的`SelectedIndexChanged`处理程序可能是这样的：

```
Private Sub chklstbxWorkspace_SelectedIndexChanged(sender As Object, e As EventArgs) Handles chklstbxWorkspace.SelectedIndexChanged
    Dim fsize As Long = 0
    Dim entry As Object

    If chklstbxWorkspace.CheckedIndices.Count > 0 Then
        btnStartArchive.Enabled = True
    Else
        btnStartArchive.Enabled = False
    End If
    lblWorkspaceSize.Text = chklstbxWorkspace.CheckedIndices.Count.ToString & " folders selected."

    For Each entry In chklstbxWorkspace.CheckedItems
        If fileSizesDict.ContainsKey(entry.ToString()) Then
            fsize += fileSizesDict(entry.ToString())
        Else
            Dim directorySize As Long = directorySize("w:\" & entry.ToString, True)
            fsize += directorySize

            fileSizesDict.Add(entry.ToString(), directorySize)
        End If
    Next

    lblWorkspaceSize.Text = chklstbxWorkspace.CheckedIndices.Count.ToString & " folders selected.  " & Format(fsize, "###,###,###,###,##0") & " bytes."
End Sub 
```

需要注意的几点：

1.  我们做的第一件事是搜索 Dictionary 看看我们是否已经通过使用`ContainsKey`方法计算了文件夹的大小
2.  如果之前已经计算过文件夹大小，那么我们只需从 Dictionary 中获取内容
3.  否则，我们计算大小，然后通过该`Add`方法将其存储在 Dictionary 中以供将来使用
4.  我移到`lblWorkspaceSize.Text = chklstbxWorkspace.CheckedIndices.Count.ToString & " folders selected. " & Format(fsize, "###,###,###,###,##0") & " bytes."`了`For`循环之外……我不确定您的具体用例，但在这种情况下，标签只会使用最终计算结果进行更新；切碎并根据需要进行更改:-)

* * *

**警告**：这种方法有一个警告，如果有人向之前计算过其大小的目录添加了更多文件（或从中删除了一些文件），那么我们将不会选择大小更改，因为它不会重新计算...我不确定这是否会对您的用例产生重大影响，但这只是值得注意的事情。

# c# - 如何为 Visual Studio 使用的 IIS Express 添加 net.tcp 协议支持？

> ID：15838792
> 
> 赞同：8
> 
> 时间：2013-04-05T16:18:29.243
> 
> 标签：c#, vb.net, wcf, visual-studio, iis

我正在使用 Visual Studio 的默认配置在开发方案中托管我的 wcf 服务。我想添加一个 net.tcp 端点，但总是出错。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-05T16:27:05.633

根据[此](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-faq)常见问题解答，此功能在 IIS Express 中不可用：

以下是常见问题解答中相关问题的摘录：

> 问：IIS Express 是否支持非 HTTP 协议，例如 net.tcp 或 MSMQ？
> 
> 答：不能。IIS Express 仅支持 HTTP 和 HTTPS 作为其协议。

对于 TCP 绑定，您可能必须创建自己的服务主机（例如，如果它只是用于测试或类似用途，可能在控制台应用程序中）。要么使用[完整](http://technet.microsoft.com/en-us/library/cc725762.aspx)的IIS 安装（抱歉，我假设您使用的是 Win7）并在那里部署您的应用程序。

# asp.net - 在 html 文件中运行剃须刀代码

> ID：15838796
> 
> 赞同：0
> 
> 时间：2013-04-05T16:18:44.663
> 
> 标签：asp.net, html, razor

我正在开发一个phonegap应用程序。我正在使用 asp.net 项目进行开发，然后将所有文件编译为 phonegap 应用程序的静态 html 文件。

我想利用剃刀语法来处理包括文件和简单逻辑之类的事情。

有没有办法在 html 文件中运行剃须刀代码？

我目前使用的是 cshtml 文件，但 PhoneGap 只接受 html 文件。我目前有 RazorEngine 来将 cshtml 文件编译为 html 文件，但是我还需要将每个链接从 .cshtml 更新为 .html ，事情变得越来越复杂。

剃刀模板的代码示例...

```
@using System.IO;
@using RazorEngine;

@{  // render panelhtml and header html once, and then print it out below in each page
    string panelHtml = Razor.Parse(File.ReadAllText(AppDomain.CurrentDomain.BaseDirectory + "/Views/Shared/_Panel.cshtml"));  
    string headerHtml = Razor.Parse(File.ReadAllText(AppDomain.CurrentDomain.BaseDirectory + "/Views/Shared/_HeaderLoggedIn.cshtml"));  
    string topHtml = Razor.Parse(File.ReadAllText(AppDomain.CurrentDomain.BaseDirectory + "/Views/Shared/_HeaderLoggedIn.cshtml"));

    WriteLiteral(topHtml);          
}

<!-- pageDebug -->
    <div data-role="page" id="pageDebug"  data-add-back-btn="true">

        @{  WriteLiteral(panelHtml);  }

        @{  WriteLiteral(headerHtml);  } 
```

# linux - 使用 Windows 共享在 debian 来宾 apache 中拒绝访问

> ID：15838797
> 
> 赞同：0
> 
> 时间：2013-04-05T16:18:50.130
> 
> 标签：linux, apache, networking, permissions, virtualbox

这是一个复杂的（至少对我来说）问题，所以请多多包涵。

我在 VirtualBox 4.2.10 中运行了三个带有各种来宾操作系统（如下所列）的虚拟机，它们都运行 Apache 2.2+ 或 IIS 7.5 Web 服务器，它们指向主机（Windows 8）上的相同网络共享。

来宾操作系统/服务器/PHP 版本：

1.  Windows 7 旗舰版 - IIS 7.5 - PHP 5.3.23
2.  Windows XP Pro - Apache/2.2.24 - PHP/5.2.9
3.  Debian 6.0.7 - Apache/2.2.16 - PHP 5.3.3

所有 3 台服务器（4 台，包括主机）都可以正常访问和显示网页，PHP 脚本也可以正确执行，但有一个主要例外：Apache 和 PHP 都不能写入网络共享中的任何位置。

使用以下命令，通过 fstab 以（假定的）读/写权限安装网络共享：

```
//dmorton/http /var/www cifs rw,user=dmorton/server,password=****** 
```

共享安装得很好，我可以通过 gedit 或终端读取/写入文件，所以我知道共享已正确安装，尽管我希望 fstab 中的代码可以进行一些改造。我通过网络使用连接，而不是使用 VirtualBox 的共享文件夹功能，因为无论我尝试什么，我都无法让 Apache 以这种方式识别共享。

正如我上面提到的，Apache 可以很好地显示网页和执行 PHP 脚本，除非它尝试写入日志文件 (apache) 或调试文件 (PHP)。我不得不重新定位 Apache 日志以便能够读取它们，因为在配置为写入共享时它们甚至没有被写入，就像其他 2 位来宾一样。以下是相关错误日志的摘录：

```
[Fri Apr 05 08:02:23 2013] [error] [client 192.168.1.100] PHP Warning:  file_put_contents(/var/www/PGO2.1/chatbot/debug/7o13ii3te7a6u2q52hpu1b3m86.mem_trace.txt): failed to open stream: Permission denied in /var/www/PGO2.1/library/error_functions.php on line 333, referer: http://dmorton-deb64/PGO2.1/gui/plain/index.php?say=test&submit=say&bot_id=1&format=html

Fri Apr 05 09:01:25 2013] [error] [client 192.168.1.100] PHP Warning:  file_put_contents(commonWords.dat): failed to open stream: Permission denied in /var/www/tmp/sort_cw.php on line 6, referer: http://dmorton-deb64/tmp/ 
```

如您所见，PHP 被拒绝访问文档根目录中至少两个不同位置的文件。我知道这是一个权限问题，我尝试了不同的方法（如下所列）来纠正这个问题，但我显然在这里遗漏了一些东西。对于 *nix 系统，我是一个相对较新的人，所以我希望这很简单。无论如何，这里是我试图“修复”这个的方法：*

1.  在主机操作系统上创建了一个特殊帐户，所有 VM 都可以使用该帐户以完全权限访问共享
2.  为“所有人”设置对主机文件夹的“完全控制”权限
3.  在 Debian 中使用与主机帐户相同的凭据设置一个帐户，并为其授予完全权限
4.  将 Apache 配置为以 #3 中提到的用户身份运行，并具有“root”组权限
5.  尝试在 fstab 中使用其他挂载选项以使共享对所有人都可写

> *   请注意，我知道部分或全部这些设置所涉及的安全隐患。一旦我找到了解决问题的方法，我将把它们恢复到更安全的基础上，一次一个。

好的，现在您已经了解了问题的总体要点，我不得不问：

如何纠正上述问题，我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:28:34.300

我做了一些进一步的戳戳和刺激，我偶然发现了答案。为了使 *nix 系统能够对 Windows 共享具有读/写权限，它们必须连接一组特定的凭据（我已经知道），并且所述凭据集不属于一般类别“每个人”（我不知道）。我必须进入文件夹属性的“共享”选项卡下的“高级共享”，然后单击那里的“权限”按钮（不在“安全”下，我已经尝试过，但没有成功）。然后我添加了正确的凭据并将权限设置为完全访问，根据需要点击应用/确定，然后再试一次。中提琴！我的 Debian 和 Ubuntu 服务器现在可以写入正确的文件夹，并且我能够将安全设置恢复为它们所属的方式。

# javascript - 从 GeoJSON 绘制 SVG 路径时解析错误

> ID：15838799
> 
> 赞同：1
> 
> 时间：2013-04-05T16:18:55.837
> 
> 标签：javascript, d3.js, gis, geojson, geomap

我用 D3.js 制作了一张世界地图。一切都像一个魅力。然后，我将相同的代码用于不同的 geojson 文件，仅描述瑞典，并得到多个解析错误。两个 json 文件具有相同的结构，格式良好等。唯一的区别是坐标，所以我怀疑这就是问题所在。有任何想法吗？

我正在使用 QGIS 将 shapefile 转换为 geojson 格式。我得到的错误是：“错误：解析 d='[路径字符串]'时出现问题”。并且路径字符串在这里和那里都包含 NaN。

**瑞典.json 摘录：**

```
{
"type": "Feature",
"id": 0,
"properties": {
    "KNKOD": "0114",
    "KNNAMN": "Upplands Väsby",
    "LANDAREAKM": 75.4
},
"geometry": {
    "type": "Polygon",
    "coordinates": [
        [
            [
                1620218.000425555,
                6599561.998826771
            ],... 
```

**Country.json 摘录**

```
{
"type": "Feature",
"id": 0,
"properties": {
    "type": "Country",
    "name": "Aruba"
},
"geometry": {
    "type": "Polygon",
    "coordinates": [
        [
            [
                -69.89912109375,
                12.452001953124991
            ],... 
```

**Javascript**

```
var canvas = d3.select("body").append("svg")
    .attr("width", 960)
    .attr("height", 1000)

d3.json("sweden/countries.geojson", function (data) {

var group = canvas.selectAll("g")
    .data(data.features)
    .enter()
    .append("g")

var path = d3.geo.path().projection(d3.geo.mercator());

var areas = group.append("path")
    .attr("d", path)
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:53:35.563

您的 GeoJSON 文件不在同一个坐标系中。瑞典的坐标看起来像是在[UTM](http://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system)中。使用 QGIS 转换为 GeoJSON 时，请确保您使用的瑞典坐标系与您对世界文件使用的坐标系相同——这应该可以解决错误。

# mysql - 使用来自其他字段的日期操作进行 MySQL 更新

> ID：15838802
> 
> 赞同：2
> 
> 时间：2013-04-05T16:19:13.623
> 
> 标签：mysql, sql, sql-update

我有一个 MySQL 表：

```
fields:

tag
duedate 
```

在“标签”字段中，我有一个包含日期的字符串（“MYWHATEVER_20130401”）。

所有带有“标签”的行，如“MYWHATEVER_%”，我现在需要通过使用“标签”中的“20130401”并添加 14 天并以“2013-04-15”格式存储它来更新“duedate”。

有什么办法可以用一个查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:22:07.000

您可以使用`RIGHT()`函数根据指定的长度从字符串中修剪字符。在从字符串中添加之前`14 days`，您需要先将其转换为 date 使用`STR_TO_DATE()`，例如。

```
UPDATE  tableName
SET     duedate = STR_TO_DATE(RIGHT(tag, 8),'%Y%m%d') + INTERVAL 14 DAY
WHERE   tag LIKE 'MYWHATEVER\_%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:27:08.777

您可以使用[STR_TO_DATE](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)函数：

```
UPDATE yourtable
SET
  duedate = STR_TO_DATE(tag, 'MYWHATEVER_%Y%m%d') + INTERVAL 14 DAY
WHERE
  tag LIKE 'MYWHATEVER\_%' 
```

我逃脱`_`了 LIKE 子句，因为它是一个快乐的角色。

# bash - 从名称中带有空格的服务器挂载 SMB 共享

> ID：15838803
> 
> 赞同：5
> 
> 时间：2013-04-05T16:19:14.607
> 
> 标签：bash, shell, escaping, mount, smb

我正在尝试在终端上安装 SMB 共享。如果服务器名称中没有空格，我可以使用以下命令：

```
$ mount -t smbfs //user:password@server/resource /Volumes/resource 
```

但是在我的情况下，服务器名称有一个空格，我不知道如何正确传递这样的名称。

我尝试使用双引号或单引号：

```
$ mount -t smbfs "//user:password@ser ver/resource" /Volumes/resource
mount_smbfs: URL parsing failed, please correct the URL and try again: Invalid argument 
```

我试图逃离空间：

```
$ mount -t smbfs //user:password@ser\ ver/resource /Volumes/resource
mount_smbfs: URL parsing failed, please correct the URL and try again: Invalid argument 
```

我也尝试使用`%20`,`\x20`和`\040`，但出现错误：

```
mount_smbfs: server connection failed: No route to host 
```

我知道我可以使用 IP 地址或重命名服务器，但这将是一种解决方法，而不是解决方案，我想知道我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:03:52.940

如果将引号和转义结合起来会发生什么：

```
mount -t smbfs "//user:password@ser\ ver/resource" /Volumes/resource 
```

据报道，在[安装 smbfs 卷时，这对用户名中带有空格的](http://www.linuxquestions.org/questions/linux-networking-3/mount-t-smbfs-username-in-with-space-not-accepted-73557/)人有用。

# c++ - 如何将顶点添加到 OpenGL C++ triangle_fan

> ID：15838805
> 
> 赞同：1
> 
> 时间：2013-04-05T16:19:27.607
> 
> 标签：c++, opengl

我需要为使用 TRIANGLE_FAN 填充的 OpenGL 不规则多边形添加正确的光照。

```
glBegin(GL_TRIANGLE_FAN);

glNormal3f(0.0, 0.0, 1.0);
glVertex3f(0.0f, 0.0f,0.0f);
glVertex3f(b[0][0],b[0][1], 0);
glVertex3f(b[11][0], b[11][1], 0);
glVertex3f(b[7][0], b[7][1], 0);
glVertex3f(b[10][0], b[10][1], 0);
glVertex3f(b[6][0],b[6][1], 0);
glVertex3f(b[5][0],b[5][1], 0);
glVertex3f(b[4][0],b[4][1], 0);
glVertex3f(b[8][0],b[8][1], 0);
glVertex3f(b[3][0],b[3][1], 0);
glVertex3f(b[9][0],b[9][1], 0);
glVertex3f(b[2][0],b[2][1], 0);
glVertex3f(b[1][0],b[1][1], 0);
glVertex3f(b[0][0],b[0][1], 0);

glEnd(); 
```

我当前多边形的问题是它不能正确反射光线。它仅从其顶点执行此操作，这使照射到它的光线呈 X 形。我猜我需要向我的多边形添加顶点。有没有一种简单的方法来保持我的三角形扇形但添加顶点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T18:06:58.067

要在照亮对象时获得“正确”的结果，您需要定义适当的法线。由于每个顶点只有一个法线，因此它显然没有正确着色。

但是，没有*正确*的方法来计算任何模型的法线。您必须定义对象应*如何*着色，然后添加更多`glNormal`调用以告知 OpenGL 您希望如何着色。

# android - GLS 错误：谷歌云端点中的 INVALID_AUDIENCE

> ID：15838807
> 
> 赞同：5
> 
> 时间：2013-04-05T16:19:38.983
> 
> 标签：android, python, google-app-engine, google-oauth, google-cloud-endpoints

我试图让谷歌端点工作。我创建了一个端点服务，并能够通过谷歌 API exploer 测试它的工作正常。然后我生成了 android 客户端并尝试调用我的端点服务。我在日志中看到这个错误，

```
04-05 08:48:20.547: I/GLSUser(13505): GLS error: INVALID_AUDIENCE myemail@gmail.com audience:server:client_id:334082396285-hfn3t2g5pg0gv8fshf22kaadq9fs23e2.apps.googleusercontent.com 
```

这是我用于构建凭据的 android java 代码，即用于访问我的服务，

```
AUDIENCE = "server:client_id:334082396285-hfn3t2g5pg0gv8fshf22kaadq9fs23e2.apps.googleusercontent.com";
credential = GoogleAccountCredential.usingAudience(this, AUDIENCE);
            setAccountName(settings.getString(PREF_ACCOUNT_NAME, null)); 
```

看起来client_id 有一些不匹配。这是我所做的，

1) 在一个 API 项目的 Google API 控制台中创建了 2 个 client_id，a) WEB_CLIENT_ID = 我为 Web 应用程序创建了一个 client_id，其中重定向 URIs = None & JavaScript origins = None。b) ANDROID_CLIENT_ID = 为带有包名和 sha1 证书指纹的 android 应用创建了一个 client_id。

2）然后在我的python端点服务中使用这些，

```
@endpoints.api(name='devices',
               version='v1',
               description='Service to register devices',
               allowed_client_ids=[ANDROID_CLIENT_ID,WEB_CLIENT_ID,endpoints.API_EXPLORER_CLIENT_ID],
               audiences = [WEB_CLIENT_ID]) 
```

**完整的日志**

```
04-05 08:48:20.397: D/overlay(159): Set pipe=RGB1 dpy=0; Set pipe=VG0 dpy=0; 
04-05 08:48:20.547: W/GLSUser(13505): Status from wire: INVALID_AUDIENCE status: null
04-05 08:48:20.547: W/GLSUser(13505): Status from wire: INVALID_AUDIENCE status: null
04-05 08:48:20.547: I/GLSUser(13505): GLS error: INVALID_AUDIENCE myemail@gmail.com audience:server:client_id:334082396285-hfn3t2g5pg0gv8fshf22kaadq9fs23e2.apps.googleusercontent.com
04-05 08:48:20.547: W/GLSUser(13505): Status from wire: Unknown status: UNKNOWN
04-05 08:48:20.547: W/System.err(31908): com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAuthIOException
04-05 08:48:20.547: W/System.err(31908):    at com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential$RequestHandler.intercept(GoogleAccountCredential.java:224)
04-05 08:48:20.547: W/System.err(31908):    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:836)
04-05 08:48:20.547: W/System.err(31908):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:412)
04-05 08:48:20.557: W/System.err(31908):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:345)
04-05 08:48:20.557: W/System.err(31908):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:463)
04-05 08:48:20.557: W/System.err(31908):    at com.package.appname.SetupActivity$SendResultToServerTask.doInBackground(SetupActivity.java:174)
04-05 08:48:20.557: W/System.err(31908):    at com.package.appname.SetupActivity$SendResultToServerTask.doInBackground(SetupActivity.java:1)
04-05 08:48:20.557: W/System.err(31908):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-05 08:48:20.557: W/System.err(31908):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
04-05 08:48:20.557: W/System.err(31908):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
04-05 08:48:20.557: W/System.err(31908):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
04-05 08:48:20.557: W/System.err(31908):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
04-05 08:48:20.557: W/System.err(31908):    at java.lang.Thread.run(Thread.java:856)
04-05 08:48:20.557: W/System.err(31908): Caused by: com.google.android.gms.auth.GoogleAuthException: Unknown
04-05 08:48:20.557: W/System.err(31908):    at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
04-05 08:48:20.557: W/System.err(31908):    at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source) 
```

已经看到类似的线程，他们没有帮助， [Google Api 和 android Oauth INVALID_AUDIENCE 错误](https://stackoverflow.com/questions/15031238/google-api-and-android-oauth-invalid-audience-error)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-09T05:55:00.197

我解决了在 google api 控制台中为项目设置名称的问题。

在 [APIs & auth] --> [Consent screen] 中的新 UI API 控制台中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T03:31:05.650

呸！终于让它工作了。不知道出了什么问题。尝试了这些东西，删除了调试密钥库文件并重新生成了它。将 sha1 指纹复制到 api 控制台。然后按照这里的说明 - [http://android-developers.blogspot.com/2013/01/verifying-back-end-calls-from-android.html](http://android-developers.blogspot.com/2013/01/verifying-back-end-calls-from-android.html)确保我至少可以在 android 设备上获得令牌。然后我改为使用端点生成的客户端类。现在我的应用程序能够通过端点服务与应用程序引擎后端通信。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-12T02:18:00.687

如果您注释 @Api#clientIds 的 ANDROID_CLIENT_ID 与 Android 客户端的 Android 程序包名称不同，您将收到此错误。

例如

```
@Api(
    name = "yourFirstService",
    version = "v1",
    namespace = @ApiNamespace(ownerDomain = "myorg.org", ownerName = "My Org", packagePath = "firstservice" ),
    scopes = {Constant.API_EMAIL_SCOPE},
    clientIds = {Constants.ANDROID_CLIENT_ID, Constant.API_EXPLORER_CLIENT_ID},
    audiences = {Constants.ANDROID_AUDIENCE}
)
public class YourFirstAPI { 
  ...
} 
```

兴趣点是 clientId 属性。那里的 ANDROID_CLIENT_ID 需要

1.  匹配应用程序中的 clientId `Cloud Console->APIS & Auth->Credentials->Client ID for Android`。
2.  该 clientId 的包名称需要与您用作客户端的 Android 应用程序相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-01T00:31:53.853

当我在另一个系统上创建新的开发环境时，我遇到了这个问题。我在新系统上安装了 Android Studio 并复制了代码。在我的旧系统上工作的相同代码在新系统上不起作用，带有 INVALID_AUDIENCE。在尝试了几件事之后，最终奏效的是将 debug.keystore 文件从我的旧系统复制到新系统。在 Windows 上，该文件位于 %USERPROFILE%.android。这是有道理的，因为 debug.keystore 是由 Android Studio 在安装时专门为该计算机生成的。debug.keystore 有一个过期日期（我听说是 365 天），所以这也可能是原因。所以对我来说真正的解决方案是在新系统上重新生成 debug.keystore 文件。删除 debug.keystore 文件并重新启动 Android Studio 将重新生成该文件。然后运行 ​​keytool 以获取 SHA1 证书指纹。然后去[http://console.developers.google.com](http://console.developers.google.com)以使用指纹创建新的客户端 ID。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-18T10:54:17.413

发生在我的团队中，尽管它在我的设备上运行良好。原来是因为`debug.keystore`我们的 Eclipse 安装不同。

为了解决这个问题，我们将公司的`debug.keystore`文件复制到`~/.android/` （这是 mac 上的目录，在 linux 和 windows 上是不同的）

# css - 浮动按钮 HTML5

> ID：15838818
> 
> 赞同：-1
> 
> 时间：2013-04-05T16:20:20.207
> 
> 标签：css, html, iframe

我似乎无法解决这个浮动按钮问题。我相信这与 iframe 标签的某些属性不适用于 html5 有关。是否有任何简单的替代方法可以使这项工作正常工作？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >

<head>

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

   <title>Quadax Registration</title>

<script language="javascript" id="clientEventHandlersJS">
    function btnComplete_onclick() {
        frmQuadMaX.OBKey_REG_Ticket_Status_1.value = "C";
        frmQuadMaX.OBBtn_Yes.click();
        btnComplete.disabled = true;
    }
</script>

<script language="javascript" id="Script1">
    function btnCancel_onclick() {
        frmQuadMaX.OBBtn_Yes.click();
    }
</script>

<script type="text/javascript">
    function submitform(){
        //Parent Submit Form Function
        frmQuadMaX.OBBtn_Yes.click();
    }

    function calcHeight(){
        //find the height of the internal page
        var the_height= document.getElementById('fraQuadMaX').contentWindow.document.body.scrollHeight;
        //change the height of the iframe
        document.getElementById('fraQuadMaX').height= the_height;
    }

function resizeFrame()
{
//resize the iframe so complete and cancel buttons are always visible
var frameHeights= document.getElementById('fraQuadMaX').scrollHeight;
var frameHeight= document.getElementById('fraQuadMaX').innerHTML = window.innerHeight;
var bodyHeight = document.body.clientHeight;

if (frameHeight > 40)
{
var scroll = ((bodyHeight - 60)/bodyHeight * 100);
document.getElementById('fraQuadMaX').style.height=("length" + scroll);
}

var frameHeight= document.getElementById('fraQuadMaX').scrollHeight;
var formHeight = frameHeight + 10;
document.getElementById('btnCancel').style.top = formHeight - 10;
document.getElementById('btnComplete').style.top = formHeight - 10;

}

</script>
</head>

<body onload="resizeFrame()" onresize="resizeFrame()" style="overflow: hidden">          

<FORM id="frmQuadMaX" action ="--Webbot-Self--" name="frmQuadMaX"  
    method="post">
    <INPUT id="OBKey_HARP_Account_Number_1" 
        style="Z-INDEX: 101; VISIBILITY: hidden; LEFT: 136px; POSITION: absolute; TOP: 31px"
        tabIndex="0" type="text" name="OBKey_HARP_Account_Number_1"/> 
    <INPUT id="OBKey_Collection_Date_1" 
        style="Z-INDEX: 106; VISIBILITY: hidden; LEFT: 136px; POSITION: absolute; TOP: 56px"
        tabIndex="0" type="text" name="OBKey_Collection_Date_1"/> 
    <INPUT id="OBKey_Patient_Last_Name_1" 
        style="Z-INDEX: 103; VISIBILITY: hidden; LEFT: 136px; POSITION: absolute; TOP: 80px"
        tabIndex="0" type="text" name="OBKey_Patient_Last_Name_1"/>
    <INPUT id="OBKey_Patient_First_Name_1" 
        style="Z-INDEX: 104; VISIBILITY: hidden; LEFT: 136px; POSITION: absolute; TOP: 80px"
        tabIndex="0" type="text" name="OBKey_Patient_First_Name_1"/>
    <INPUT id="OBKey_Date_of_Birth_1" 
        style="Z-INDEX: 102; VISIBILITY: hidden; LEFT: 136px; POSITION: absolute; TOP: 80px"
        tabIndex="0" type="text" name="OBKey_Date_of_Birth_1"/>
    <INPUT id="OBKey_REG_Ticket_Status_1" 
        style="Z-INDEX: 105; VISIBILITY: hidden; LEFT: 136px; POSITION: absolute; TOP: 80px"
        tabIndex="0" type="text" name="OBKey_REG_Ticket_Status_1"/>
    <INPUT id="OBKey_Requisition_Number_1" 
        style="Z-INDEX: 110; VISIBILITY: hidden; LEFT: 135px; POSITION: absolute; TOP: 128px"
        tabIndex="0" type="text" name="OBKey_Requisition_Number_1"/>

    <INPUT id="OBBtn_Yes" Style=" visibility:hidden"
        type="submit" value="Submit" name="OBBtn_Yes"/> 
    <INPUT id="btnComplete" 
        style="FONT-WEIGHT: bold; Z-INDEX: 115; LEFT: 9px; VISIBILITY: visible; WIDTH: 92px; COLOR: darkblue; BORDER-TOP-STYLE: outset; BORDER-RIGHT-STYLE: outset; BORDER-LEFT-STYLE: outset; POSITION: absolute; BOTTOM: 107px; HEIGHT: 24px; BACKGROUND-COLOR: transparent; BORDER-BOTTOM-STYLE: outset"
        type="button" value="Complete" name="btnComplete" 
        language="javascript" onclick="return btnComplete_onclick()" 
        tabIndex="1"/>  
    <INPUT id="btnCancel" 
        style="FONT-WEIGHT: bold; Z-INDEX: 109; LEFT: 108px; VISIBILITY: visible; WIDTH: 92px; COLOR: darkblue; BORDER-TOP-STYLE: outset; BORDER-RIGHT-STYLE: outset; BORDER-LEFT-STYLE: outset; POSITION: absolute; BOTTOM: 107px; HEIGHT: 24px; BACKGROUND-COLOR: transparent; BORDER-BOTTOM-STYLE: outset"
        type="button" value="Cancel" name="btnCancel" 
        language="javascript" onclick="return btnCancel_onclick()" 
        tabIndex="1"/>      

</FORM>

<IFRAME id="fraQuadMaX" tabIndex="0" name="fraQuadMaX" 
        style="OVERFLOW:auto; WIDTH:101%; HEIGHT:91%; position:absolute; top:0px; z-index: 100; left: 8px;"
        height="2000px" >
</IFRAME>

<script>

    fraQuadMaX.document.write("Please Wait...")

    var lvURL = "https://atbsvr.quadax.com/static/HarpDemoRedirect.htm?X=OPEN&acct=" + 
        frmQuadMaX.OBKey_HARP_Account_Number_1.value + "&cli=SX" + "&virt=QUADAX" + "&EDI_DOS=" + 
        frmQuadMaX.OBKey_Collection_Date_1.value + "&PT_LAST_NAME=" + 
        frmQuadMaX.OBKey_Patient_Last_Name_1.value + "&PT_FIRST_NAME=" + 
        frmQuadMaX.OBKey_Patient_First_Name_1.value + "&EDI_REQ_NUM=" + 
        frmQuadMaX.OBKey_Requisition_Number_1.value + "&PT_BIRTH_DT=" +
        frmQuadMaX.OBKey_Date_of_Birth_1.value; 

    fraQuadMaX.document.location.href = lvURL;

</script>

</body>
</html> 
```

[浮动按钮](http://i.stack.imgur.com/26Z4m.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:24:53.013

```
body{
    height:2000px;
}
#float{
    background:red;
    width:20px;
    height:100px;
    position:fixed;
    top:50px;
    left:0;
} 
```

This will create a floating menu to add social network icons etc in the page side.

Check this fiddle : [http://jsfiddle.net/TVwAv/](http://jsfiddle.net/TVwAv/)

# javascript - 表示二维笛卡尔平面中的纬度和经度

> ID：15838826
> 
> 赞同：0
> 
> 时间：2013-04-05T16:20:57.457
> 
> 标签：javascript, jquery, html

您好，我必须在笛卡尔平面上表示一系列经纬度点，在笛卡尔平面的 0,0 中，我的位置在我周围的另一点。

你知道是否有一些算法可以做到这一点？

谢谢。

# php - 尝试在文本输入后自动提交表单

> ID：15838827
> 
> 赞同：1
> 
> 时间：2013-04-05T16:21:00.933
> 
> 标签：php, javascript, jquery, ajax, forms

以下是表单的执行方式：

```
 <script>
    $(document).ready(function(){

    $("#submit").click(function(){

        //access token stuff
        var token = $("#link_input").val(); ... etc</script> 
```

.

一旦超过 10 个字符，我将尝试自动提交此信息。通常，您在输入字段中填写文本区域，然后单击提交。单击提交按钮后，JS 会验证输入框中的文本，如果有效，则执行。如何在不点击提交按钮的情况下自动提交输入框中的文本？

```
<script language="JavaScript" type="text/JavaScript"> 
var x=10;//nr characters 
function submitT(t,f){ 
if(t.value.length==x){ 
f.submit() 
} 
} 
</script> 

                    <input id="link_input" onkeyup="submitT(this,this.form)" autofocus="true" autocomplete="off" placeholder="http://www.facebook.com/connect/login_success.html#access_token=AAAZDCiOS6Ls0BAMUKJDvLZCTgZDZD" style="width: 600px;margin-left: -11%;" value="" name="url">

                    <br/>

<div id="Wait" style="display:none;"><center>Processing your form<br><img src="http://i.imgur.com/kKqSe.gif"></center></div>

                    <br/>

                    <center>
                    <a href="javascript:void(0)" id="submit" onkeyup="submitT(this,this.form)" autofocus="true"><img src="http://i.imgur.com/eA6fv.png" style="border:0px;padding-top:5px;"></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:31:54.667

```
$('#link_input').on('keyup', function() { 
    if($(this).val().length > 10) {
        $('form').submit();
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:36:51.123

只需针对与您已经拥有的类似的 keyup 进行测试。

```
<form action='someplace' id='myform' method='post'>
  <input type='text' id='link_input' ...other stuff />
</form> 
```

jQuery：

```
$('#link_input').on('keyup',function(){
  var val = $(this).val();
  var len = val.length;

  if(len == 10){
    $('#myform').submit();
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T16:31:47.637

将您的 btn 从 submit 重命名为 btnSubmit。

submit 的 id 将与 f.submit() 混淆

# jquery - 动态按钮未触发

> ID：15838831
> 
> 赞同：1
> 
> 时间：2013-04-05T16:21:29.723
> 
> 标签：jquery

我正在使用 jQuery 生成一些包含按钮的 html。出于某种原因，我无法为生成的按钮触发按钮事件。

当我查看源代码时，生成的 html 看起来很好……我还查看了 Firebug，我没有发现任何错误……按钮单击事件没有为动态生成的按钮触发。

任何帮助将不胜感激。

这是我的代码：

```
$(document).ready(function () {

    $("#btnSearch).click(function () {
         var html = "";
         html += "<tr><td>Test</td></tr>";
         html += "<tr><td>Test 2</td></tr>";
         html += "<tr><td><input id="btnTest" type="button" value="Test Button" /></td></tr>";

        $(html).appendTo("#TestTable");
    });

    $("#btnTest").on("click", function () {
         alert('hey');
    });

}); 
```

我的静态 html 很简单：

```
<table id="TestTable"></table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:23:05.547

```
$('body').on('click', '#btnTest' function () {
     alert('hey');
}); 
```

您需要阅读`.on`文档并了解它在哪些方面做得更好。它与旧`.live`方法不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:56:01.970

我对jquery“on”方法的工作原理知之甚少。因此，我对您的代码进行了一些更改，这可能会解决您的目的。

$(文档).ready(函数 () {

```
 $("#btnSearch").click(function () {
                 var html = "";
                 html += "<tr><td>Test</td></tr>";
                 html += "<tr><td>Test 2</td></tr>";
                 html += '<tr><td><input id="btnTest" type="button" value="Test Button" onclick="myfun()"/></td></tr>';
                $(html).appendTo("#TestTable");
            });

            /*$("body").on("click",'btnTest' ,function () {
                 alert('hey');
            });
        */

        });

        function myfun()
        {alert("hey");} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:28:13.873

放

```
$("#btnTest").on("click", function () {
     alert('hey');
}); 
```

在上一个按钮（btnSearch）的点击事件函数中。请注意，如果您在搜索按钮上单击多次，您有几个 btnTest... 正常吗？

# java - 匿名类错误

> ID：15838833
> 
> 赞同：3
> 
> 时间：2013-04-05T16:21:38.387
> 
> 标签：java, anonymous-class

```
public interface IMethodCallback 
{
    boolean Execute();
}

...

IMethodCallback callback = new IMethodCallback
            {
                boolean Execute()
                {
                    return false;
                }
            }; 
```

这会导致错误。我怎样才能用Java做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:22:31.313

你错过了构造函数的括号：

```
IMethodCallback callback = new IMethodCallback()
{
    public boolean Execute()
    {
        return false;
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:22:07.767

你缺少括号`()`

```
IMethodCallback callback = new IMethodCsallback() {
          // your impl method
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T16:26:54.037

正如其他人所提到的，您缺少 . 之后的括号`new IMethodCallback`。但是你还需要声明你的实现方法`Execute()` `public`，因为那是实现你的接口的方法。接口中的方法是隐式的`public`。

```
IMethodCallback callback = new IMethodCallback()
{
    // Implements an interface; must be public
    public boolean Execute()
    {
        return false;
    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T16:22:56.333

```
IMethodCallback callback = new IMethodCallback() //You have missed the parenthesis of constructor.
{
     public boolean Execute() {
         return false;
     }
 }; 
```

and follow the java naming convention (**Camel Case**)

# c# - 从另一个项目访问 Web.config

> ID：15838836
> 
> 赞同：12
> 
> 时间：2013-04-05T16:21:59.833
> 
> 标签：c#

我正在使用控制台应用程序为一些半自动化测试编写一个测试平台，但我需要从我正在测试的项目中获取连接字符串。我不想直接引用其他应用程序，或者在我正在测试的项目中有访问器。

到目前为止，我所做的是在我的 TestUtility 项目中创建指向另一个项目的 Web.config 文件的链接，并将其设置为`Copy if newer`. 它是我的测试项目的根文件夹中唯一的 Web.config，但`WebConfigurationManager.OpenWebConfiguration(null)`似乎正在打开一些 OTHER Web.config，因为其中唯一的连接字符串指的是 .\SQLEXPRESS（不在我的解决方案的任何文件中，我的路径将是 . \sql2008 在此配置中 - 这会有所不同）。

关于如何从另一个项目访问该配置部分的任何提示或提示？

（耶第一个问题）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-07-01T13:30:41.473

迟到总比不到好：

```
var filePath = @"D:\PathToConfig\Web.config";
var map = new ExeConfigurationFileMap { ExeConfigFilename = filePath };
var configFile = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None); 
```

我不能把这个归功于这个，我在[这里](http://web.archive.org/web/20160619143645/http://blog.thekfactor.info/posts/programatically-accessing-a-web-config/)找到了它！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T17:19:18.553

我找到的解决方案是将其打开`XDocument`并手动解析：

```
 XDocument xdoc = XDocument.Load("Test/Web.config");

        var path = xdoc.Element("configuration").Element("connectionStrings").Element("add").Attribute("connectionString").Value; 
```

尽管如果您有多个连接字符串，您可能希望`.Elements("add")`在元素上使用该方法`connectionStrings` 并遍历各种字符串。

# objective-c - kCGTextStroke 的 Fill 和 Stroke 定位不正确

> ID：15838844
> 
> 赞同：2
> 
> 时间：2013-04-05T16:22:25.647
> 
> 标签：objective-c, cgcontext, core-text, quartz-core, stroke

所以我使用下面的代码对 a 中的文本应用描边（和填充），`UILabel`结果如下图所示。笔画的一侧比另一侧重（看字母的顶部与底部相比，右侧与左侧相比。末尾的句点也使它非常明显，看起来像一只粘糊糊的眼睛）。我根本没有打开任何阴影，所以我不认为是阴影干扰了笔画。

这可能是什么原因造成的？

```
- (void) drawTextInRect: (CGRect) rect
{
    CGContextRef c = UIGraphicsGetCurrentContext();
    CGContextSetTextDrawingMode(c, kCGTextFillStroke);
    CGContextSaveGState(c);
    CGContextSetRGBFillColor(c, 1.0, 0.0, 0.0, 1.0);
    CGContextSetRGBStrokeColor(c, 0.0, 1.0, 0.0, 1.0);
    [super drawTextInRect: rect];
    CGContextRestoreGState(c);
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/f0D0F.png)

**编辑：**所以，为了踢球，我看了看标签，只有填充，只有中风。关闭描边会创建一个看起来非常正常的文本，就好像我刚刚在 Interface Builder 中给它上色一样。然而，关闭填充只显示笔划，它在任何一侧看起来都不比其他任何一侧重。**这使我相信问题在于填充相对于笔划的*位置*，并且填充或笔划本身都没有错误。对此还有其他想法吗？如何使填充直接居中于笔划？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T10:40:50.997

您可能应该只使用`kCGTextFillStroke`绘图模式并且只绘制一次（设置单独的笔触和填充颜色）。

```
CGContextSetRGBFillColor(context, 1.0, 0.0, 0.0, 1.0);   // any color you want (this is red)
CGContextSetRGBStrokeColor(context, 0.0, 1.0, 0.0, 1.0); // any color you want (this is green)
CGContextSetTextDrawingMode(context, kCGTextFillStroke);
[self.text drawInRect:rect withFont:self.font]; 
```

或者，您可以事后抚摸。笔画通常从中心开始，这意味着一半宽度向内，一半向外。这意味着如果你在描边后填充，一些描边会被填充覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T08:42:43.183

一种可能性是被覆盖的方法使用`CGContextTranslateCTM`或类似的函数来转换 CTM。CTM 是上下文状态的一部分，并为所有后续绘制调用指定变换。

您应该尝试在调用被覆盖的方法之前保存上下文并在之后恢复它：

```
CGContextSaveGState(c);
[super drawTextInRect: rect];
CGContextRestoreGState(c); 
```

# asp.net - 图片src属性问题

> ID：15838848
> 
> 赞同：0
> 
> 时间：2013-04-05T16:22:37.787
> 
> 标签：asp.net, html, css, image

我将图像存储在 asp.net 网站的本地主机上的文件夹中。

图像在那里，并且 src 属性正确形成，但图像未显示在 img 元素中。

有人可以告诉我可能是什么问题或遗漏..当我检查浏览器网址中的图像时，它会正确显示

```
 localhost:xxxx/TenModified/setX/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.Jpeg 
```

这是我对元素的标记

```
<img id="ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolderChild_ListViewThumbs_ctrl1_ctl03_Image1" src="localhost:59657/ProfileTenModified/setP/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.Jpeg" style="border-width:1px;border-style:Solid;height:172px;width:172px;" alt=""> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:40:42.293

您不需要包括域和端口。以下将适用于 src： `/ProfileTenModified/setP/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.Jpeg`

或完整的标签：

```
<img id="ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolderChild_ListViewThumbs_ctrl1_ctl03_Image1" src="/ProfileTenModified/setP/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.Jpeg" style="border-width:1px;border-style:Solid;height:172px;width:172px;" alt="" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:48:50.260

用这个：

```
src="ProfileTenModified/setP..." 
```

完整代码：

```
<img id="ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolderChild_ListViewThumbs_ctrl1_ctl03_Image1" src="ProfileTenModified/setP/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.Jpeg" style="border-width:1px;border-style:Solid;height:172px;width:172px;" alt="" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T17:23:16.743

您应该从路径中删除“localhost:59657”。你真的不需要它，只是相对于root。当您启动没有“localhost:59657”并且只是相对于 root 的应用程序时，这将为您节省大量时间。您无需更改所有路径。任何锚点都是如此。也使这些根相对。

```
<img id="ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolderChild_ListViewThumbs_ctrl1_ctl03_Image1" src="/ProfileTenModified/setP/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.Jpeg"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T16:32:17.623

您的链接缺少协议中的两个正斜杠？

```
<img id="ctl00_ctl00_ContentPlaceHolder1_ContentPlaceHolderChild_ListViewThumbs_ctrl1_ctl03_Image1" src="localhost//:59657/ProfileTenModified/setP/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.Jpeg" style="border-width:1px;border-style:Solid;height:172px;width:172px;" alt="" /> 
```

以及用于关闭图像标签的斜线

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T16:38:01.393

尝试使用前缀。Http 或 Https

http://localhost:xxxx/TenModified/setX/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.Jpeg

```
<img src="http :// domain:port/TenModified/setX/8fd7976b-d4b0-467a-bc3e-bf2a51d60299.jpeg" /> 
```

# c# - WPF TwoWay 不适用于 X（退出）但适用于 TAB 或单击其他位置

> ID：15838849
> 
> 赞同：1
> 
> 时间：2013-04-05T16:22:39.127
> 
> 标签：c#, wpf, xaml, binding, two-way-binding

我的 XAML 中有以下内容：

```
<TextBox Name="TitleValue" 
         Text="{Binding ElementName=ListValue, Path=SelectedItem.Title, Mode=TwoWay}"

<TextBox Name="DescValue"
         Text="{Binding ElementName=ListValue, 
                        Path=SelectedItem.Description, Mode=TwoWay}" 
```

当我在 TitleValue 或 DescValue 和 Tab 中输入值或单击窗口中的不同位置时，集合类属性会正确更新。然后当我点击 X 退出窗口时，集合类中的数据就被正确保存了。

但是，当我在其中任何一个字段中输入值，然后单击 X 退出窗口时，集合类中的数据将被保存，但输入的值不会保存为我在单击 X 时正在编辑的特定字段。

我在字段上实现了失去焦点事件并且它们工作，即使单击 X 也是如此。在这些事件中，我输入了代码：

```
private void Event_DescValue_LoseFocus(object sender, RoutedEventArgs e)
{
    ((Import)ListValue.SelectedItem).Description = ((TextBox)e.OriginalSource).Text;
} 
```

但这也没有用。以下也不起作用：

```
Imports[ListValue.SelectedIndex].Description = ((TextBox)e.OriginalSource).Text; 
```

在正在编辑的字段中单击 X 时，如何获取集合类 Imports 以更新选定的类 Import？

它的工作方式应该与我在正在编辑的字段或单击窗口中的其他地方的选项卡上完全一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:44:40.277

将绑定的[UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)修改为 PropertyChanged。

像这样：

```
<TextBox Name="TitleValue" Text="{Binding ElementName=ListValue, 
     Path=SelectedItem.Title, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

# java - How to read only inner segments of a file using NIO

> ID：15838850
> 
> 赞同：1
> 
> 时间：2013-04-05T16:22:41.940
> 
> 标签：java, nio

My batch process needs to be reading lines from huge files (1-3G), each of which can be processed independently of another. The files can have 10-50M rows. I was thinking of spawning about a dozen threads each of which would be processing a predetermined range of buffers, e.g. T1 will read range 0-1, T2 1-2, etc. concurrently. That means, of course, that T2 needs to jump instantly into the buffer position 2, without reading 0-2.

Is this type of segmentation of buffered file reading for the purposes of concurrency possible with Java NIO?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T00:33:32.370

这没有任何意义。CPU 可能允许多线程，但磁盘仍然是单线程的。所有这一切都会导致磁盘抖动。忘了它。

# perl - CGI - Perl Script - Html Files - Execute From same directory

> ID：15838856
> 
> 赞同：0
> 
> 时间：2013-04-05T16:22:55.957
> 
> 标签：perl, cgi

I received an old site from a customer that was written in perl and used CGI. The CGI files are mixed in with html files that call up a xls file as a data source.

My current hosting company says that the cgi files have to be in the cgi-bin to be executed, but the static html/html files cannnot be called from the cgi-bin directory.

How was this guy hosting these files all in the same directory?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:50:36.330

这是如何配置 Web 服务器的问题。新的托管公司完全有能力允许所有文件从同一目录运行。但是，将脚本限制为只能从专用`cgi-bin`目录执行，而不能从其他位置执行，在某些圈子中被认为是一种良好的安全实践，新的托管公司显然也认同这一信念。

换句话说，当他们告诉您必须分离文件时，这是“这是我们的政策”意义上的“必须”，而不是“这是技术限制”。

# sql - Improving specific SQL Server Query Performance

> ID：15838859
> 
> 赞同：0
> 
> 时间：2013-04-05T16:22:59.070
> 
> 标签：sql, sql-server, performance

I have the following query which is being executed in SQL Server 2008 R2 several times a day on multiple client databases.

```
UPDATE    Propane.RecordKey
With (TabLock)
SET              LookupKey = System.Param_RecordKey.LookupKey
FROM         Propane.RecordKey INNER JOIN 
                  System.Param_RecordKey ON 
                  Propane.RecordKey.IndexId = System.Param_RecordKey.IndexId
                  And Propane.RecordKey.RecordNumber = System.Param_RecordKey.RecordNumber                       
                  AND Propane.RecordKey.LookupKey <> System.Param_RecordKey.LookupKey
WHERE     (System.Param_RecordKey.ParameterKeyId = @key) 
```

I am looking for any suggestion on how to make this query run as quickly as possible. Currently I am having delays which can last from a few seconds to a minute or more.

The performance is not consistent, with some cases where many records are affected are running relatively quickly and other cases with many fewer affected records running quite slowly. On my test machine the performance is generally acceptable (i.e a few seconds for 10,000+ records), but there is significant delays occurring on some of our clients.

This extreme variation which I am unable to account for, combined with my admittedly limited knowledge of how to tweak query performance, makes me reluctant to experiment with alterations which may not show much benefit and might make the query run worse.

The table being updated, RecordKey, is read from frequently (hundreds to thousands of times a day) and updated occasionally (a few times per day).

RecordKey's primary index is IndexId and RecordNumber. Param_RecordKey has key fields of ParameterKeyId, IndexId, and RecordNumber. I.e. I am filtering and joining on the primary key fields of both tables. All these fields are ints.

RecordKey will have hundreds of thousands to a few million records in it. Param_RecordKey will have just the records being updated. Typically Param_RecordKey will contain a few thousand records, though 10's of thousands of records are common and 100,000 or more is possible.

The LookupKey field in both tables is varchar(27). In most cases the text stored in the field will have a length between 5-10 characters. Lengths of 10-15 characters are common and lengths over 20 are rare. In the vast majority of cases the values in the respective LookUpKeys will be the same, i.e. few records will be updated. In rare cases ALL of the records will be updated.

One question I have is: Would I get better performance if I were to remove the check Propane.RecordKey.LookupKey <> System.Param_RecordKey.LookupKey? i.e. if I were to update all records and not just those with different LookupKeys. My expectation is that the time to update all the records would be greater than just updating those that have changed, but I'm uncertain this is true.

Any advice on how to improve this query would be greatly appreciated.

* * *

**April 9th 2013, New info.**

After removing the With (TabLock) and testing the changes at the client's site, the results are mixed. In some cases the query executed much faster, in some cases much slower, and in many cases there was no significant change in how long it took to process the records.

Since making the change did not result a significant and repeatable improvement in performance, I'm leaving this question open and marked as unanswered. I am still interested in any assistance with this problem.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T17:06:28.377

表提示 TABLOCK 可能会在正在更新的表上获取排他锁。这样的锁不兼容其他锁，甚至是共享锁，会影响性能。如果查询需要独占表锁，则必须等到没有其他锁被占用。删除提示，让数据库引擎决定锁定策略——它非常擅长。您的开发机器上的性能是可以接受的，因为您（可能）是唯一访问该表的人，因此没有其他锁被占用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-20T18:11:27.190

我在带有变量的此类脚本中看到的最佳改进之一是创建动态查询并将变量转换为 sql，然后执行生成的 sql。当然，在执行此操作时，请确保重建索引（或至少更新统计信息）。DBCC TRACEON 2301 和 8780 也可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T21:53:00.877

我为您提供了两种解决方案，第二种可能比您现在拥有的更快。

```
UPDATE    Propane.RecordKey
With (TabLock)
SET              LookupKey = System.Param_RecordKey.LookupKey
FROM         Propane.RecordKey K ,  System.Param_RecordKey R
 ON 
              K.IndexId = R.IndexId
              And K.RecordNumber = R.RecordNumber                       
              AND K.LookupKey <> R.LookupKey
WHERE     (R.ParameterKeyId = @key)

UPDATE    Propane.RecordKey
With (TabLock)
SET              LookupKey = System.Param_RecordKey.LookupKey
FROM         Propane.RecordKey K ,  System.Param_RecordKey R
 ON 
              K.IndexId = R.IndexId
              And K.RecordNumber = R.RecordNumber                       
               WHERE     (R.ParameterKeyId = @key) and K.LookupKey not in          (Select LookupKey from System.Param_RecordKey) 
```

# sql - 在 OUTPUT 子句中加入/子查询

> ID：15838864
> 
> 赞同：1
> 
> 时间：2013-04-05T16:23:19.790
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我正在使用 TSQL OUTPUT 子句更新表并添加有关更改的数据。问题是更新后的表只包含我想要输出的数据的规范化 ID，我需要它以人类可读的形式。这是一个简化的示例来说明我的意思

```
CREATE TABLE LOCATION
(locationid INT, name VARCHAR(50))

CREATE TABLE USER
(userid INT, username VARCHAR(50), locationid INT)

--insert some test data

UPDATE USER
SET locationid = @somevalue
WHERE userid = @someothervalue 
```

我知道我可以添加类似

```
OUTPUT inserted.username
+ ' location changed from ' + deleted.locationid
+ ' to ' + inserted.locationid 
```

但这对于想知道位置名称而不是其数据库 ID 的最终用户来说是没有用的。我尝试用`deleted.locationid`,`(SELECT name from LOCATION WHERE locationid = deleted.locationid)`和类似的方式替换`inserted.locationid`并且遇到了错误`Subqueries are not allowed in the OUTPUT clause`

`inserted`我已经看到几个答案说在 OUTPUT 子句中允许加入，但我还没有找到在and上单独加入的方法`deleted`。这是否可以在 SQL Server 2008 R2 中的一个步骤中完成，或者我是否需要通过存储旧值和新值的中间步骤然后加入第二个查询以获得我需要的输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T18:23:24.500

以下微软文章[输出](http://msdn.microsoft.com/en-in/library/ms177564.aspx)清楚地描述了输出子句在任何 DML 操作（如插入、更新和删除）中的限制。

它还描述了您不能将子查询与输出子句一起使用

因此，您可以在此处记录插入和删除行以及表变量中的 locationid，并可以使用与 Location 表的连接进一步获取位置名称

例子

```
INSERT INTO location VALUES(1,'Delhi')
INSERT INTO location VALUES(2,'Noida')

INSERT INTO [USER] VALUES(1,'Sandeep',1)

DECLARE  @result table(UserName varchar(50), OldLocationId Int,NewLocaionId Int)

UPDATE [USER] SET locationid=2
OUTPUT  INSERTED.UserName, DELETED.locationid,INSERTED.locationid INTO @result
WHERE userid=1

SELECT * FROM @result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:33:02.733

为什么不：

```
OUTPUT inserted.username
+ ' location changed from ' + deleted.name + ' to ' + inserted.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:05:54.603

将您的加入和删除联合到一个子查询中并加入它。

# joomla - Error changes folder permissions

> ID：15838867
> 
> 赞同：1
> 
> 时间：2013-04-05T16:23:29.227
> 
> 标签：joomla, foreach, jomsocial

In using jomsocial 2.8.4 and Joomla 2.5.9 we tried uploading an image to his feed using the "multifunction" status box. Which then crashed the site. After investigating it turns out that my root folder /public_html/ permissions were changed to 777 when this error looped and changed permissions from 755 so by the security set in my cPanel, it threw the 500 error..once fixing the permission issue my site was back online but the status he was trying to upload the picture now displays.

The error from the error log before it crashes is:

Warning: Invalid argument supplied for foreach() in /home/gamer/public_html/components/com_community/libraries/photos.php on line 11

Any fixes for this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-14T09:16:50.060

我自己的 joomla 组件也有同样的问题。

*   它不依赖于图像大小。同一个图像文件有时会正确上传，有时会将 /public_html/ 的权限更改为 777。
*   我只尝试过 jpg 文件。

看起来它是 Joomla 错误，而不是 Joomsocial。

**更新：** 问题出在 JFile::delete();

```
// somehow set 777 rights to the /public_html/ directory
JFile::delete(JPATH_SITE.$table->img_orig);

//solution
if (JFile::exists(JPATH_SITE.$table->img_orig))
  JFile::delete(JPATH_SITE.$table->img_orig); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T17:16:17.347

好的，所以将您上传的图像更改为 .png 以查看它是否因为扩展而没有加载，接下来您的图像有多大。这也可能导致上传错误，还要检查以使您的执行时间设置为高于 8mb 就像 32mb 一样，您可以在 php.ini 中更改它

您也可以卸载 jomsocial 并重新安装它，还可以检查后端媒体下的 jomsocial 设置，以确保这些设置符合您的需要。

# android - android - set live wallpaper on app install

> ID：15838868
> 
> 赞同：1
> 
> 时间：2013-04-05T16:23:37.583
> 
> 标签：android, live-wallpaper

I am trying multiple solutions but all are requiring user interaction to set the live wallpaper (I don't want user interaction), where I want to set it automatically only on first run of application means right after installation not always on opening the app which is done through keeping record in preference.

I used following code to make it happen but it is requiring user interaction.

```
 SharedPreferences p = PreferenceManager
            .getDefaultSharedPreferences(this);
    boolean firstRun = p.getBoolean(PREFERENCE_FIRST_RUN, true);
    if (firstRun) {
        p.edit().putBoolean(PREFERENCE_FIRST_RUN, false).commit();

        try {

            Intent intent = new Intent(
                    WallpaperManager.ACTION_CHANGE_LIVE_WALLPAPER);
            ComponentName component = new ComponentName(this,
                    MyWallpaperService.class);

            intent.putExtra(
                    WallpaperManager.EXTRA_LIVE_WALLPAPER_COMPONENT,
                    component);
            startActivityForResult(intent, 0);

        } catch (Exception e) {
            Toast.makeText(this, "Error setting wallpaper",
                    Toast.LENGTH_SHORT).show();
        }
    } 
```

Please guide me if there is any way of doing this, thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:40:34.977

我不知道这是否是个好主意，但您可以将您的逻辑放在 onCreate() 中。当您的活动开始/启动时，它每次都会被调用。

# css - 如何在以后的样式表中取消过于宽泛的 CSS 颜色声明？

> ID：15838872
> 
> 赞同：1
> 
> 时间：2013-04-05T16:23:45.367
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, overriding

在 Rails 应用程序中，我使用 Twitter Bootstrap 作为起点。Twitter Bootstrap 使用了一些 HTML5 Boilerplate 重置，其中包括这个 gem：

```
@media print {
    * {
        color: #000 !important; /* Black prints faster: h5bp.com/s */
    }
} 
```

（注意链接的文章来自 200-effing-8）

我的应用程序使用 pdfkit/wkhtmltopdf 输出 PDF，并且由于上述声明，所有 pdf 输出都是白底黑字。pdfkit/wkhtmltopdf（对我来说，在这个应用程序中）的全部意义在于 PDF 输出与屏幕匹配。

导入 Bootstrap 后，我有什么方法可以在样式表中覆盖此声明？我希望它是类似于“自动”的东西，但这似乎是无效的。

当然，我可以在 Bootstrap 中注释掉该行，但如果可以的话，我宁愿避免更改源代码（因为我通过 bootstrap-sass gem 将其全部引入）。我还可以告诉 pdfkit/wkhtmltopdf 不要使用“打印”样式表，但这会产生不同的问题。

我尝试将其设置为“继承”，但在功能上这不是我所追求的，而且它似乎也不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:39:42.457

我会在引导 css 中将其注释掉。星号选择器是一个通配符，它​​将所有文本内容设置为黑色。否则，您将不得不使用 id 或 class 写出许多单独的 CSS 规则来覆盖。如果您网站上的大部分文本内容已经设置为黑色或足够深的颜色，那么您不需要该 CSS 打印规则。

# iphone - 为 UIPicker 设置延迟动画？

> ID：15838876
> 
> 赞同：-1
> 
> 时间：2013-04-05T16:23:57.083
> 
> 标签：iphone, xcode, delay, uipicker

如果我在下面有这段代码告诉 UIPicker 如果没有选择任何东西来将脚设置为 1，我怎样才能延迟这个动作几秒钟？

```
// If feet values are zero.
if (([feetPicker selectedRowInComponent:0] == 0 & [feetPicker selectedRowInComponent:1] == 0)){
// Set to one foot.
[feetPicker selectRow:1
          inComponent:1
             animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:13:32.397

```
[NSTimer    scheduledTimerWithTimeInterval:2.0    target:self    selector:@selector(fireMethod)    userInfo:nil repeats:NO]; 
```

* * *

上面的代码可以在你想启动定时器的任何时候放置。

```
-(void)fireMethod {
    // If feet values are zero.
if (([feetPicker selectedRowInComponent:0] == 0 & [feetPicker selectedRowInComponent:1] == 0)){
// Set to one foot.
[feetPicker selectRow:1
          inComponent:1
             animated:YES];

    }
} 
```

# javascript - Thumbnail grid issue

> ID：15838882
> 
> 赞同：0
> 
> 时间：2013-04-05T16:24:14.217
> 
> 标签：javascript, html, css, multiple-instances

I was hoping someone could take a look at the thumbnail grids on this page and help me understand why the first functions but the second does not.

[http://bitfidelity.com/temp/index.html](http://bitfidelity.com/temp/index.html)

Both are supposed to expand when clicked, but the images in the second just act as regular image links. I assume I have to uniquely identify each thumbnail grid so the script activates more than once, but I'm not sure how to go about that.

The grid is taken from a codrops article at [http://tympanus.net/codrops/2013/03/19/thumbnail-grid-with-expanding-preview](http://tympanus.net/codrops/2013/03/19/thumbnail-grid-with-expanding-preview).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:30:58.443

您不能对两个`<ul>`元素使用相同的 ID - 这就是为什么只有第一个列表有效，因为 jQuery 只会选择第一个出现的位置。您将不得不使用不同的 ID（不太实用），或者只是使用一个类（即应用于`<ul>`您希望效果起作用的所有元素）。

选择器在您的`grid.js`文件中，第 167 行：

```
var $grid = $('#og-grid'), 
```

尝试使用不同的选择器，例如：

```
var $grid = $('.og-grid'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T04:08:58.263

BitFidelity，我遇到了同样的问题，只需将 a`<li class="divider">`插入缩略图然后设置该类的样式（即`display:block; margin-top:200px;`

本质上，您只需将分隔线插入到单个实例中，而不是创建网格的两个实例。我使用 H3 为网格的每个部分命名。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T13:12:00.790

我创建了一个新函数`grid.js`，将在其中找到类`"og-expanded"` 并删除其内联 css 并在`showPreview()`函数和函数中调用此`initItemsEvents()`函数。

```
function removeinlinecss(){ $ ('ul li').each(function(){
    if($(this).hasClass('og-expanded')){ $(this).removeAttr("style");}});
} 
```

# python - python：文件读取的性能改进？

> ID：15838883
> 
> 赞同：0
> 
> 时间：2013-04-05T16:24:16.370
> 
> 标签：python, performance

如果我有一个 Python 模块，它在开始时（不在函数或类中）从文件中读取一个值，那么每次都会执行吗？还是pyc文件读取a中的值将值存储在编译文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:43:32.010

缺少 using `reload`，一个模块只会在程序第一次导入时被导入和执行一次。同一个模块的进一步导入只是在导入发生的范围内绑定现有名称，因此读取只会执行一次。

如果您询问编译步骤是否读取文件并将其嵌入到 中`.pyc`，那么没有。代码在编译时根本不运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:24:53.353

是的，每次加载模块时都会执行此操作。

# git - 推送后 Git 搞砸了我的文件

> ID：15838887
> 
> 赞同：2
> 
> 时间：2013-04-05T16:24:32.433
> 
> 标签：git, tortoisegit

我确定这是我的错，但是在推送之后，我的目标存储库中的所有文件都包含两个副本。看起来像：

```
<<<<<<< HEAD

code goes here

======

same code again

/* End of file config.php */
/* Location: ./application/config/config.php */
>>>>>>> 6962176130afe295144f1f6a27146da27b604762 
```

这是网站上的每个文件。尝试另一个推送并不能解决问题。我认为有一个问题，我的所有文件都有差异，因为我的 Windows 机器没有在末尾附加新行之类的。我该如何解决这个问题？

编辑：我应该提到它对所有 1000 个（左右）文件都这样做了。这些文件中的大多数根本没有被编辑过，也不是我提交的一部分。它只是对每个文件都这样做。我想不出为什么，到目前为止所有的答案都只是告诉我手动编辑所有 1000 个文件，这不是一个合理的解决方案。再推一次也没有用，什么也没有发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T16:47:26.510

据我所知，在您解决合并冲突之前，`push`不应实际**提交**您的更改，因此您应该能够使用`git reset --hard`.

为确保不再发生这种情况，请查看此页面：[https ://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:27:24.930

这是一个矛盾的结果 `merge`。单独的 Git 无法合并文件，因此将文件中的差异留给您编辑。您应该在编辑器中打开文件并将所需的部分保留在

```
<<<<<<< HEAD

====== 
```

编辑后再次提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:27:07.393

它只是向您显示冲突。最上面的是你的头部修订，下面的 ===== 很可能是你推动的。我猜你添加了注释代码或者还有一些其他的细微差别。删除一组代码（你不想要的那一组），你就很好了。

# php - How to disable use of special php functions on a subdirectory with suhosin extension?

> ID：15838897
> 
> 赞同：0
> 
> 时间：2013-04-05T16:25:12.657
> 
> 标签：php, apache, xampp, concrete5, suhosin

I have a Website using Concrete5\.

I need to allow the client to access the subpage domain\blocks.

The problem is that if the person with this permissions create a Block and put some code like:

```
file_get_contents('C:\xampp\htdocs\somefile.php'); 
```

He will get the source code the the website.

I am trying to use the suhosin extension to block some functions:

In php.ini

```
suhosin.executor.func.blacklist = "" 
```

In httpd-xampp.conf

```
<Directory "C:/xampp/htdocs/blocks">
     php_admin_value suhosin.executor.func.blacklist "opendir, file_get_contents, phpinfo"
</Directory> 
```

The problem is that this is not working. Since Concrete5 use a index.php to manage all the url connections.

Basicly when a call to url: www.domain.com/somepage/title; This is just an example, what actually is called is:

```
C:/xampp/htdocs/index.php/somepage/title 
```

Then concrete5 translate that into the CMS and eventualy calls the block code.

Since the call is to the root of the domain, it has access to all php functions.

I just want to protect the rest of the website.

# matlab - 在 Matlab 中使用`spy`获取不同数字的不同颜色

> ID：15838900
> 
> 赞同：3
> 
> 时间：2013-04-05T16:25:19.893
> 
> 标签：matlab, sparse-matrix

当我使用 spy 检查稀疏模式时，它无法区分某些元素和其他元素。有没有办法做到这一点？例如，等于的元素`10`是红色的，所有等于的元素`9`都是蓝色的。我可以在一个`spy`情节中得到这个吗？

我只能更改情节点的大小和样式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T16:32:47.870

您可以这样做：

```
spy(a,'k')
hold on
spy(a==10,'r')
spy(a==9,'b')
hold off 
```

* * *

另一种方法是使用`scatter`代替`spy`：

```
[x,y] = find(a);
clr = a(a~=0);
scatter(x,y,[],clr)
set(gca,'YDir','rev') 
```

在这种情况下，这些点将`a`根据当前图形颜色图按值着色。

# php - What to replace mysql_result with for MySQLi

> ID：15838901
> 
> 赞同：1
> 
> 时间：2013-04-05T16:25:43.500
> 
> 标签：php, mysql

what to replace `mysql_result` with?

im watching a tutorial now but it was made in 2011 so it is not working now. Here is the situation, I will be very grateful if you tell me what to replace mysql_result with here, and what to put in the parenthesis

```
function update_count() {
    global $link;
    $query  = "SELECT `count`, FROM `hits_count`";
    if($query_run = mysqli_query($link, $query)) {
        $count = mysql_result($query_run, 0, 'count');
        $count_inc = $count + 1;
        echo $count;
    } 
}
update_count(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T16:34:27.733

[`mysqli_query`](http://php.net/mysqli_query)返回一个[`mysqli_result`对象](http://www.php.net/manual/en/class.mysqli-result.php)。从那里，您可以获得您想要的价值。

```
if($query_run = mysqli_query($link, $query)) {
    // This gets you one row at a time, use a while if there are multiple rows
    // while($row = mysqli_fetch_assoc($query_run)){}
    $row = mysqli_fetch_assoc($query_run);
    $count = $row['count'];
    // Do whatever with $count
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T16:50:36.377

用证明代码支持 tadman 的简洁答案

与 mysqli 不同，[PDO](https://stackoverflow.com/tags/pdo/info)有一个长期寻求的 mysql_result 等效项：

```
function update_count() {
    global $link;
    $query  = "SELECT `count` FROM `hits_count`";
    $stmt = $link->prepare($query);
    $stmp->execute();
    return $stmt->fetchColumn();
}
echo update_count(); 
```

任何说 mysqli 不比 PDO 差的人，都必须先尝试`IN()`使用准备好的语句将数组绑定到语句中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T16:40:40.237

根据[php.net](http://php.net/manual/en/function.mysql-result.php) `mysql_result()`自 PHP 5.5.0 起已弃用。

因此，在这种情况下，您应该使用[类](http://www.php.net/manual/en/class.mysqli-result.php)[`mysqli_fetch_all()`](http://www.php.net/manual/en/mysqli-result.fetch-all.php)中的其他方法。[`mysqli_result::*`](http://www.php.net/manual/en/class.mysqli-result.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T16:32:34.797

```
function update_count() {
    global $link;
    $query  = "SELECT `count` FROM `hits_count` ;";
    if(($result = mysqli_query($link, $query)) && $result->num_rows >= 1) {
        $count = 0 ;
        while($row = $result->fetch_assoc()){
          $count+= $row['count'] ;
        }
        echo $count;
    } 
} 
```

通常最好将该链接传递给函数：

```
function update_count($link) {
    $query  = "SELECT `count` FROM `hits_count` ;";
    if(($result = mysqli_query($link, $query)) && $result->num_rows >= 1) {
        $count = 0 ;
        while($row = $result->fetch_assoc()){
          $count+= $row['count'] ;
        }
        echo $count;
    }
} 
```

# c# - 验证 2 个字段的 CustomAttribute

> ID：15838909
> 
> 赞同：0
> 
> 时间：2013-04-05T16:26:06.787
> 
> 标签：c#, asp.net-mvc, custom-attributes

所以我有这两个输入字段Fromdate和ToDate，

在 MVC 中，我想创建一个 CustomAttribute 以确保 Fromdate 在 ToDate 之前。

这可能吗？如果是这样怎么办？或者有什么选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:22:03.833

MVC FoolProof Validation 是解决此问题的好方法。它通过引用在服务器端运行，并通过脚本包含传播客户端。

[http://foolproof.codeplex.com/](http://foolproof.codeplex.com/)

下面是一个实际的属性示例：

```
public class EventViewModel
{
    [Required]
    public string Name { get; set; }

    [Required]
    public DateTime Start { get; set; }

    [Required]
    [GreaterThan("Start")]
    public DateTime End { get; set; }
} 
```

请参阅日期的 GreaterThan 属性。这将节省您自己编写的所有内容。

您也可以将它 nuGet 到您的项目中：http: [//nuget.org/packages/foolproof](http://nuget.org/packages/foolproof)

```
PM> Install-Package foolproof 
```

我希望这有帮助。

# java - 如何在 JTabbedPane 上添加图片 - 在空面板布局上？

> ID：15838912
> 
> 赞同：1
> 
> 时间：2013-04-05T16:26:21.393
> 
> 标签：java, swing, jframe, image, jtabbedpane

我想从 src 文件夹在我的 JTabbed 窗格布局上实现 200 * 200 图片。

我的问题是*什么都没有显示*-没有错误，没有例外，也没有图片。

我认为我不必声明该目录并将其设置为私有，因为它已包含在 src 文件夹中。

```
import java.awt.*;
import javax.swing.*;

import java.awt.event.KeyEvent;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JFrame;

public class Example1 
        extends JFrame 

{
    private     JTabbedPane tabbedPane;
    private     JPanel      panel1;

    public Example1()
    {
        // NOTE: to reduce the amount of code in this example, it uses
        // panels with a NULL layout.  This is NOT suitable for
        // production code since it may not display correctly for
        // a look-and-feel.

        setTitle( "Program" );
        setSize( 800, 400 );
        setBackground( Color.gray );

        JPanel topPanel = new JPanel();
        topPanel.setLayout( new BorderLayout() );
        getContentPane().add( topPanel );

        // Create the tab pages
        createPage1();

        // Create a tabbed pane
        tabbedPane = new JTabbedPane();
        tabbedPane.addTab( "Tab Page", panel1 );
        topPanel.add( tabbedPane, BorderLayout.CENTER );
    }

    public void createPage1()
    {
        panel1 = new JPanel();
        panel1.setLayout( null );

        ImageIcon pic = new ImageIcon("test.png");
        JLabel label = new JLabel (pic);
        panel1.add(label);
        label.setVisible (true);
        label.setBounds( 200, 200, 200, 400 );
}

// Main method to get things started
    public static void main( String args[] )
    {
        // Create an instance of the test application
        Example1 mainFrame  = new Example1();
        mainFrame.setVisible( true );

    }
} 
```

**如果您希望我提供更多信息，请索取。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:31:04.320

不要在面板上使用空布局（并使用 setBounds()）。

面板没有首选尺寸，因此 Swing 认为没有什么可绘制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:32:56.573

`ImageIcon`如果找不到图像，则不会显示任何错误 - 确保图像位于应用程序的应用程序目录中

重新使用[文档](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)`null`中的布局

> 尽管可以不使用布局管理器，但您应该尽可能使用布局管理**器**。

# c++ - 无法返回 POINT 以在另一个函数中使用

> ID：15838913
> 
> 赞同：0
> 
> 时间：2013-04-05T16:26:25.507
> 
> 标签：c++, visual-c++, point, firebreath

得到这个代码：（
我正在使用 FireBreath）

```
TestPluginAPI.h
FB::variant ClickSemulationMove(POINT);
FB::variant ClickSemulationClick(POINT);

TestPluginAPI.cpp

FB::variant TestPluginAPI::ClickSemulationClick(POINT pt)
{
ShowCursor(true);
MouseLeft();
MouseReturn(pt.x, pt.y);
ShowCursor(true);
return 0;
}

FB::variant TestPluginAPI::ClickSemulationMove(POINT &pt)
{
MouseMove(-325, 605);
POINT pt;
GetCursorPos(&pt);
return 0;
} 
```

这个想法是，首先`ClickSemulationMove`保存`pt`（`GetCursorPos`我需要这个pt，因为我必须在移动鼠标之前得到它，然后返回那里。）然后将它传递`ClickSemulationClick`给使用`MouseReturn`。
但是我遇到了以下错误：
`C2511: FB::variant TestPluginAPI::ClickSemulationMove(POINT &) overloaded member function not found in "TestPluginAPI"` 并且 `error C2665: FB::variant_detail::conversion::convert_variant: none of the 5 overloads can convert all parameter`（这个错误在下面有一堆代码和参数，如果需要会发布）这听起来很简单，但我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T05:03:33.360

这里有2个问题；第一个是您不能通过引用将参数传递给 NPAPI 方法，因此也不能传递给 firebreath 方法。其次，您不能只使用任意类型。

你有几个选择：

1.  对于输入，我建议您将 int x, int y 传递给函数。
2.  对于输出，您可以传递您解码的字符串或带有您需要的值的 FB::VariantList，这将成为一个 javascript 数组。您还可以返回一个 FB::VariantMap ，它将成为一个 javascript 对象，允许您传递命名的 x 和 y 值。
3.  如果您真的希望能够通过引用传递事物，您可以传入一个 FB::JSObjectPtr，它需要是您保存在 javascript 中的 javascript 对象或数组（{} 或 []）。然后，您可以通过调用 ->SetProperty("x", xval) 等或 ->SetProperty(0, xval) 来更改它（如果您使用了数组）。你也可以调用 ->Invoke("push", FB::variant_list_of(xval)) 来推入数组。

# clojure - 如何在 Clojure 中使用 Ring 运行 Jetty 示例

> ID：15838917
> 
> 赞同：6
> 
> 时间：2013-04-05T16:26:35.257
> 
> 标签：clojure, jetty, leiningen, ring

我正在跟随[这个示例](http://mmcgrana.github.com/2010/08/clojure-rest-api.html)使用环和码头在 Clojure 中创建一个简单的 Web 服务。

我的 project.clj 中有这个：

```
(defproject ws-example "0.0.1"
  :description "REST datastore interface."
  :dependencies
    [[org.clojure/clojure "1.5.1"]
     [ring/ring-jetty-adapter "0.2.5"]
     [ring-json-params "0.1.0"]
     [compojure "0.4.0"]
     [clj-json "0.5.3"]]
   :dev-dependencies
     [[lein-run "1.0.0-SNAPSHOT"]]) 
```

这在 script/run.clj

```
(use 'ring.adapter.jetty)
(require '[ws-example.web :as web])

(run-jetty #'web/app {:port 8080}) 
```

这在 src/ws_example/web.clj

```
(ns ws-example.web
  (:use compojure.core)
  (:use ring.middleware.json-params)
  (:require [clj-json.core :as json]))

(defn json-response [data & [status]]
  {:status (or status 200)
   :headers {"Content-Type" "application/json"}
   :body (json/generate-string data)})

(defroutes handler
  (GET "/" []
    (json-response {"hello" "world"}))

  (PUT "/" [name]
    (json-response {"hello" name})))

(def app
  (-> handler
    wrap-json-params)) 
```

但是，当我执行时：

```
lein run script/run.clj 
```

我收到此错误：

```
No :main namespace specified in project.clj. 
```

为什么我会得到这个，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-06T14:53:21.770

您收到此错误是因为`lein run`（根据`lein help run`）的目的是“运行项目的 -main 函数”。您的命名空间中没有`-main`函数，文件中`ws-example.web`也没有`:main`指定的函数`project.clj`，这`lein run`就是抱怨的原因。

要解决此问题，您有几个选择。您可以将`run-jetty`代码移动到该函数的新`-main`函数`ws-example.web`，然后说`lein run -m ws-example.web`. 或者您可以这样做并添加一行`:main ws-example.web`，`project.clj`然后说`lein run`. 或者您可以尝试使用[`lein exec`插件](https://github.com/kumarshantanu/lein-exec)来执行文件，而不是命名空间。

有关更多信息，请查看[Leiningen 教程](https://github.com/technomancy/leiningen/blob/master/doc/TUTORIAL.md#running-code)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:34:51.000

你必须把这些`(run-jetty)`东西放在`-main`某个地方，然后把它添加到`project.clj`类似的地方

```
:main ws-example.core) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T17:27:22.187

来自`lein help run`：

```
USAGE: lein run -m NAMESPACE[/MAIN_FUNCTION] [ARGS...]
Calls the main function in the specified namespace. 
```

因此，您需要将您的`script.clj`某处放在项目源路径上，然后将其称为：

```
lein run -m script 
```

# eclipse - 更新多个eclipse运行配置用户类路径设置

> ID：15838920
> 
> 赞同：1
> 
> 时间：2013-04-05T16:26:38.380
> 
> 标签：eclipse, junit, classpath

背景：ProjectA 是一个 Eclipse 4.2.1 java 项目，有许多 junit 4 测试类。每个 junit 测试有时会单独运行，因此具有相应的运行配置。每个运行配置都将 ProjectB 中的配置文件夹指定为用户类路径条目。

```
ProjectA
  test
    classATest.java (run configuration user class path entry -> ProjectB/config)
    classBtest.java (run configuration user class path entry -> ProjectB/config)
    ...
ProjectB
  config *deleted*
ProjectC
  config *created* 
```

问：如果配置文件夹从 ProjectB 移动到 ProjectC，有没有办法使用新的用户类路径条目对所有 junit 运行配置进行批量更新。

约束：在 ProjectA 中维护配置文件夹和内容的副本是不可取的，因为它经常更新。手动更新每个运行配置是不可取的。将 junit 测试类添加到 junit 套件并具有单个运行配置可能会起作用，但是为了运行单个测试，我需要运行套件，将其杀死，然后从 junit 窗口运行单个测试。

尝试：我无法找到通过 Eclipse GUI 执行此类更新的方法。也许直接操作 eclipse 文件会起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T21:53:42.043

据此[，](https://stackoverflow.com/questions/5094786/eclipse-java-launch-configuration-file-path) eclipse将运行配置存储在：

```
<workspace>/.metadata/.plugins/.org.eclipse.debug.core/.launches 
```

因此，在文本编辑器或 linux 测试操作程序中使用查找/替换功能，使用新的用户类路径条目重构运行配置应该是微不足道的。

# c# - IIS8 net.tcp 上没有端点监听：

> ID：15838921
> 
> 赞同：5
> 
> 时间：2013-04-05T16:26:50.787
> 
> 标签：c#, wcf, net.tcp, iis-8

我在 IIS8 中有一个 WCF 服务主机，我想使用 net.tcp 绑定。

我有这个配置：

网络配置：

```
<service behaviorConfiguration="MyBehavior"
  name="DecryptService.EmailCenterDecryptTCP">
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://XX.XX.XX.XX:808/VirtualFolder/Service.svc" />
      </baseAddresses>
    </host>

    <endpoint address=""
          binding="netTcpBinding"
          bindingConfiguration="portSharingBinding"
          name="MyServiceEndpoint"
          contract="ServiceNamespace.IService">
    </endpoint>

    <endpoint address="mextcp"
          binding="mexHttpBinding"
          bindingConfiguration=""
          name="MyServiceMexTcpBidingEndpoint"
          contract="IMetadataExchange" />
</service> 
```

当我尝试在与 IIS8 相同的机器上使用该服务时，以下配置工作正常：

```
<client>
        <endpoint address="net.tcp://YY.YY.YY.YY:808/VirtualFolder/Service.svc"
            binding="netTcpBinding" bindingConfiguration="MyServiceEndpoint"
            contract="ServiceReference1.IService" name="MyServiceEndpoint" />
    </client> 
```

YY.YY.YY.YY 是机器的本地 IP，但是当我尝试在另一台机器上使用服务时，将 YY.YY.YY.YY 更改为运行 IIS8 的机器的外部 IP (ZZ.ZZ.ZZ.ZZ)我收到以下错误：

```
There was no endpoint listening at net.tcp://ZZ.ZZ.ZZ.ZZ/VirtualFolder/Service.svc that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details. 
```

有任何想法吗？感谢和抱歉我的英语不好

**编辑：**

我制作了一个运行 ServiceHost 替换 IIS 的控制台应用程序，并且使用此配置它可以在 Internet 上运行

```
var svh = new ServiceHost(typeof (Service));
svh.AddServiceEndpoint(typeof (ServiceNamespace.IService), new NetTcpBinding(SecurityMode.None), "net.tcp://serverLocalIp:808");
svh.Open();

Console.WriteLine("SERVER - Running...");
stopFlag.WaitOne();

Console.WriteLine("SERVER - Shutting down...");
svh.Close();

Console.WriteLine("SERVER - Shut down!"); 
```

知道通过 Internet 运行相同服务的 IIS 有什么问题吗？本地工作。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T16:40:03.240

您还需要设置 IIS 以接收 Net.TCP 连接。

在`Advanced Settings`你的 IIS 应用程序下，然后`Enabled Protocols`确保你`http,net.tcp`注意到没有空间，如果你有空间它会失败。

[http://blogs.msdn.com/b/swiss_dpe_team/archive/2008/02/08/iis-7-support-for-non-http-protocols.aspx](http://blogs.msdn.com/b/swiss_dpe_team/archive/2008/02/08/iis-7-support-for-non-http-protocols.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-11-11T22:25:11.570

如果您有一天突然收到此错误，则它与劫持 net.tcp 端口的另一个进程有关。就我而言，它是端口 808。这是我在大约 3 天后发现的方法——是的，这就是我现在所做的，谷歌并试图找出其他人的错误，而不是自己做。

无论如何：

* * *

1.  Net.TCP 依赖于 2 个正在运行的 Windows 服务。转到 services 并找到*Net.Tcp Listener Adapter*和*Net.Tcp Port Sharing Service*。**如果您没有看到它们，则此答案不适用于您。**这意味着您还没有激活控制面板中的*功能 打开或关闭 Windows 功能*。您将找到有关在线启用内容的大量信息。
2.  停止*Net.Tcp 端口共享服务*并在*停止其他服务*弹出窗口中单击*是。*
**   重新启动这两个服务。*   打开*事件查看器 > Windows 日志 > 系统*并查看是否在*源*列中看到*SMSvcHost 4.0.0.0*的任何错误（您的版本可能不同） 。我遇到了这个错误：*尝试侦听站点“1”时，协议“net.tcp”的激活服务“NetTcpActivator”发生错误，因此该站点暂时禁用了该协议。***是的，谢谢女士！**您启动了一项服务，但并未真正启动它，只是向事件查看器添加了一条消息？伟大的！因为在 Windows 服务启动期间告诉我太难了，对吗？好吧，无论如何，让我们继续。*****   然后我需要根据上面 4 中的错误弄清楚是什么在使用端口。所以我运行了以下命令（您可能需要在管理员模式下启动命令提示符。）
    *   运行*netstat -ano | findstr "808"*并记下列中的数字。这些是使用端口的进程 ID。
    *   运行*任务列表 | 9*，其中 9 将是来自上述步骤的进程 ID。*   现在您知道使用端口的进程名称，您需要谷歌并找出该进程的用途。在我的情况下，它与使用端口 808 的 Intel 图形驱动程序有关： [OneApp.IGCC.WinService.exe](https://community.intel.com/t5/Graphics/OneApp-IGCC-WinService-exe-is-occupying-TCP-default-port-808/td-p/1218045)。*****

 ****这是有道理的，因为其他一些进程已经在使用端口 808，因此它不适用于*Net.TCP*。

* * *

此时我有两个选择：

1.  禁用该进程
2.  也许看看我是否可以更改它的端口。

幸运的是，他们已经对驱动程序进行了更新，所以我只是从[这里](https://downloadcenter.intel.com/download/29904)下载并安装了它。

* * *

重新启动，然后再次运行以下命令以确保端口对 net.tcp 可用：

1.  运行*netstat -ano | findstr "808"*并记下列中的数字。这些是使用端口的进程 ID。
2.  运行*任务列表 | 9*，其中 9 将是来自上述步骤的进程 ID。现在您应该看到我们想要的*SMSvcHost.exe 。*

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-29T12:23:23.013

简单的答案，将 IIS -> 编辑绑定 -> net.tcp 下的端口号更改为其他内容。我将其更改为 12345，这解决了我的问题。

这是与使用默认端口 808 的另一个进程相关的问题，如上文所述。如果这没有帮助，请检查上面的答案和休闲程序。****

# c++ - FFMPEG - 读取视频文件并转换为位图

> ID：15838924
> 
> 赞同：0
> 
> 时间：2013-04-05T16:26:57.413
> 
> 标签：c++, visual-c++, ffmpeg

我可以使用 ffmpeg 成功读取视频文件

现在我想在我的 MFC mdi 上显示这些视频帧。

为此，我需要一个位图来提供我的 CBitmap::FromHandle() 函数

```
memDC.CreateCompatibleDC(dc);

CBitmap * bmp = CBitmap::FromHandle();

CBitmap * oldBmp = memDC.SelectObject(bmp);

dc->BitBlt(0,0,320,240,&memDC,0,0,SRCCOPY); 
```

对于 ffmpeg，我正在使用 dranger 教程 01

[http://dranger.com/ffmpeg/tutorial01.html](http://dranger.com/ffmpeg/tutorial01.html)

请告知如何将帧转换为位图

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:06:44.707

我在过去 3 天里一直在研究它并做到了这一点

现在帧是 BitBlt 到 dc 成功，但它们是颠倒的

请让我知道代码是否有任何问题

```
avpicture_fill((AVPicture *)pFrameRGB, buffer, PIX_FMT_RGB24,
               pCodecCtx->width, pCodecCtx->height);

int w = pCodecCtx->width;
int h = pCodecCtx->height;
img_convert_ctx = sws_getContext(w, h, pCodecCtx->pix_fmt,
                                 w, h, PIX_FMT_RGB24,
                                 SWS_BICUBIC, NULL, NULL, NULL);

/*CClientDC dc;*/
BITMAPINFO bmi = {0};
bmi.bmiHeader.biBitCount = 24;
bmi.bmiHeader.biCompression = BI_RGB;
bmi.bmiHeader.biHeight = -pCodecCtx->height;
bmi.bmiHeader.biWidth = pCodecCtx->width;
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
bmi.bmiHeader.biSizeImage = pCodecCtx->height * pCodecCtx->width * 3;
hbmp = CreateDIBSection(hdcmem, &bmi, DIB_RGB_COLORS, &pbmpdata , NULL, 0); //&pbmpdata

hdcscr = GetDC(0);
hdcmem = CreateCompatibleDC(hdcscr);

i=0;
while((av_read_frame(pFormatCtx, &packet)>=0)) { 
    // Is this a packet from the video stream?
    if(packet.stream_index==videoStreamIdx) {

        /// Decode video frame
        //avcodec_decode_video(pCodecCtx, pFrame, &frameFinished,packet.data, packet.size);
        avcodec_decode_video2(pCodecCtx, pFrame, &frameFinished, &packet);

        // Did we get a video frame?
        if(frameFinished) {
            i++;
            sws_scale(img_convert_ctx, pFrame->data,
                      pFrame->linesize, 0, pCodecCtx->height,
                      pFrameRGB->data, pFrameRGB->linesize);

            pFrameRGB->data[0] = (uint8_t*)pbmpdata;
            pFrameRGB->linesize[0] = pCodecCtx->width * 3;

            SelectObject(hdcmem, hbmp);//hbmp

            BitBlt(hdcscr, 0, 0, pCodecCtx->width, pCodecCtx->height, hdcmem , 0, 0, SRCCOPY);
            Sleep(10);
        }
    }

    // Free the packet that was allocated by av_read_frame
    av_free_packet(&packet);
} 
```

# bash - 将 shell 变量传递给 ssh

> ID：15838927
> 
> 赞同：5
> 
> 时间：2013-04-05T16:27:02.677
> 
> 标签：bash, shell, variables, ssh

我阅读了有关在远程 ssh 中传递变量的其他帖子，但这些解决方案似乎对我不起作用。

这是我的情况：我在整个 shell 脚本（在本地机器上）中填充变量的值，然后通过 ssh在**另一个系统上使用这些值。**我理解为什么这不起作用，但我想找到一种通过 ssh 在另一个系统上使用本地 shell 中的值的方法。

```
BUILD_SERVER="my_server"
ANOTHER_SERVER="my_server2"
ssh $USERNAME@$BUILD_SERVER << 'ENDSSH'

echo "$BUILD_SERVER"
echo "$ANOTHER_SERVER"

ENDSSH 
```

当我运行此代码时，这些变量为空。有什么方法可以将值传递给 ssh？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T16:44:40.717

我想到了。在我正在执行以下操作的行上：

```
ssh $USERNAME@$BUILD_SERVER << 'ENDSSH' 
```

我删除了单引号，它现在解释允许我的局部变量。如果我想在远程服务器上使用变量，我只需用“\”转义它们

```
ssh $USERNAME@$BUILD_SERVER << ENDSSH

echo $BUILD_SERVER     # echos the local server variable
LOCAL_SERVER="local_server"

echo \$LOCAL_SERVER    # echos the remote server variable

ENDSSH 
```

# java - 动态更改提交给 Executor 服务的命令列表

> ID：15838932
> 
> 赞同：1
> 
> 时间：2013-04-05T16:27:18.353
> 
> 标签：java, multithreading, executorservice

我想在运行时更改提交给执行器服务的命令列表。有没有人尝试过这样做？可以通过单个执行器服务实例提交多个命令吗？提交的命令列表是否可以在运行时更改（我可能会在运行时添加或删除以前提交给执行器的命令）

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:40:58.157

Singlethreadexecutor 可以接受多个请求。一旦你提交 requests ，你就可以从中得到 Future 。可以取消尚未开始的任务，提交新的任务。

# batch-file - 1分钟后关闭计算机的批处理脚本

> ID：15838935
> 
> 赞同：-6
> 
> 时间：2013-04-05T16:27:25.307
> 
> 标签：batch-file

我想编写一个批处理脚本，这样当我运行该批处理脚本时，它会在 1 分钟后自动关闭我的计算机。请 ！帮我创建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:29:13.327

我不确定它的用途，但你去：

```
@echo off
shutdown /t 60 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:31:42.807

用这个：

“C:\Windows\System32\shutdown.exe”-s -t 60

-s 关闭本地电脑

-t 在 60 秒内

# jquery - Rails 和 jQuery Mobile：

> ID：15838938
> 
> 赞同：0
> 
> 时间：2013-04-05T16:27:47.140
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, jquery-mobile

我有一个我正在处理的项目的桌面版本和移动版本（目前不是全功能）。

对于桌面，我可以很容易地渲染部分和替换 DOM 对象：

'控制器.rb'

```
def func
    @blah = "hey"
    @button_label = "button"
    respond_to do |format|
        format.html
        format.js
    end
end 
```

'_func.html.erb'

```
<%= blah %>
<%= button_to @button_label, {:controller => "controller", :action => "func"}, :method => "put", :remote => true, "data-role" => 'button' %> 
```

'func.js.erb'

```
$('#camera_container').html("<%=j render 'func' %>") 
```

上面的代码不像在桌面上那样运行。我有一个完全独立的移动部分，因此任何代码更改都不会影响桌面，**但控制器是共享的。**

当然，最初加载了一个按钮，其动作指向 controller.rb 中的 func 函数，但随后无法“替换自身”。

上面的代码片段适用于使用标准 jQuery 的桌面版本。使用 jQuery-mobile，我收到页面加载错误。现在，我觉得这与按钮没有得到增强以及我想用不同的按钮替换一个按钮（至少，至少）有关。

# java - 如何在单元测试期间访问 .war 类路径中的文件？

> ID：15838942
> 
> 赞同：-1
> 
> 时间：2013-04-05T16:28:12.500
> 
> 标签：java, unit-testing, maven, web-applications, freemarker

我有一个 Web 应用程序项目，我正在尝试对使用 FreeMarker 模板创建文件的方法进行单元测试。我的方法 createFile() 应该采用 MyFile 类型 - 包含要创建的文件名和 FreeMarker 需要的 rootMap 以及模板名称 - 并使用我提供的模板创建文件。

我正在按照[Freemarker 手册](http://freemarker.sourceforge.net/docs/pgui_config_templateloading.html/)设置模板加载器。问题是，我正在使用 TemplateLoader setClassForTemplateLoading(Class, String) 方法来查找模板路径。这个模板加载器使用 Class.getResource() 来获取类路径。

但是，由于我使用的是 Maven，所以我的 java 代码在 /src/main/java 中，我的模板在 /src/main/webapp/templates/ 中，我的测试代码在 /src/test/java 中。因此，我的 Class.getResource("/") （根类路径）总是返回`<PATH_TO_PROJECT>/target/test-classes/`.

因为我要部署战争，所以我不能使用 setDirectoryForTemplateLoading(File)。此外，由于我正在测试我的应用程序，因此我没有可与 setServletContextForTemplateLoading(Object, String) 一起使用的 ServletContext。

如何从测试用例访问我的模板文件夹？

这是我的测试代码的简化示例（我使用 mockito 来模拟 MyFile 类的行为）：

```
private MyFile myFile;
private FileGenerator fileGenerator;

@Before
public void setUp() {
    myFile = new MyFile(...);
    fileGenerator = new FileGenerator(myFile, ...);
}

@Test
public void shouldCreateFile() {
    final MyFile mockedMyFile = spy(file);
    final Map<String, Object> rootMap = new HashMap<String, Object>();

    // populates rootMap with stuff needed for the Template

    // mocking method return
    when(mockedMyFile.getRootMap()).thenReturn(rootMap);

    // replacing the MyFile implementation with my Mock
    fileGenerator.setMyFile(mockedMyFile);

    // calling the method I want to test
    fileGenerator.createFile();

    assertTrue(MyFile.getFile().exists());
} 
```

这是我正在测试的代码的简化：

```
public void createFile() {
    final Configuration cfg = new Configuration();
    cfg.setClassForTemplateLoading(getClass(), "templates/");
    try {
        myFile.getFile().createNewFile();
        final Template template = cfg.getTemplate("template.ftl");
        final Writer writer = new FileWriter(myFile.getFile());
        template.process(myFile.getRootMap(), writer);
        writer.flush();
        writer.close();
    }
    // exception handling
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:39:45.753

我应用了 Charles Forsythe 的建议，结果很好。

我刚刚向 FileGenerator 类添加了一个 templateLoader 成员，它有自己的 getter 和 setter。

接下来，在我的 createFile 方法中，我使用 Configuration 类中的方法 setTemplateLoader(TemplateLoader)，如下所示：

```
public void createFile() {
    final Configuration cfg = new Configuration();
    // Changed
    cfg.setTemplateLoader(templateLoader);
    // the rest
} 
```

最后，我只是为我的测试创建了一个模板加载器：

```
@Test
public void shouldCreateFile() {
    final MyFile mockedMyFile = spy(file);
    final Map<String, Object> rootMap = new HashMap<String, Object>();
    TemplateLoader templateLoader = null;

    try {
        templateLoader = new FileTemplateLoader(new File("<PATH TO TEMPLATE FOLDER>"));
    } catch (final IOException e) {
        e.printStackTrace();
    }

    gerador.setTemplateLoader(templateLoader);
    // the rest
} 
```

并且问题解决了。在我的生产代码中，我使用 ClassTemplateLoader 而不是 FileTemplateLoader。

# list - 在 Sublime Text 2 中将一行单词更改为垂直列表的快捷方式

> ID：15838945
> 
> 赞同：1
> 
> 时间：2013-04-05T16:28:28.073
> 
> 标签：list, sublimetext2, keyboard-shortcuts

![在此处输入图像描述](https://i.stack.imgur.com/cfNN4.jpg)是否可以在第 1 行使此标题成为每个单词或符号的项目列表，并使用键盘快捷键用空格分隔。这样我就可以选择标题，然后点击快捷方式，它将使标题成为如下项目列表：

![在此处输入图像描述](https://i.stack.imgur.com/5wi4P.jpg)

尝试保存键绑定文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T18:48:08.397

没有内置任何东西，但您可以使用插件来完成。

```
import sublime
import sublime_plugin
import re

class SplitLineCommand(sublime_plugin.TextCommand):
    def run(self, edit, split_pattern=" "):
        view = self.view
        cursors = view.sel()
        if len(cursors) == 1:
            cursor = cursors[0]
            begin_offset = 0
            end_offset = 0
            if cursor.empty():
                region = view.line(cursor)
                content = view.substr(region)
                new_content = re.sub(split_pattern, "\n", content)

                view.replace(edit, region, new_content)
            else:
                region = cursor
                content = view.substr(region)
                new_content = ""
                if view.line(region).begin() != region.begin():
                    new_content = "\n"
                    begin_offset = 1
                new_content += re.sub(split_pattern, "\n", content)

                if view.line(region).end() != region.end():
                    new_content += "\n"
                    end_offset = - 1

            view.replace(edit, region, new_content)
            cursors.clear()
            cursors.add(sublime.Region(region.begin() + begin_offset, region.begin() + len(new_content) + end_offset))
            view.run_command("split_selection_into_lines") 
```

然后，您可以在密钥绑定文件中添加以下内容。

```
[
    { "keys": ["f8"], "command": "split_line", "args": {"split_pattern": " "}}
] 
```

当然，将密钥更改为您想要的东西。`args`如果您只是使用空格，则实际上不需要该参数。它默认为。为了完整起见，我只是将其包括在内。

**编辑：** 我已经更新了插件，因此它现在可以处理选择，尽管此时它不处理多个光标。

**编辑 2** 如果它不起作用，请尝试打开控制台并输入`view.run_command("split_line")`. 这将在切换到控制台之前在您所在的任何视图中运行命令。这样你就知道命令是否真的有效。如果没有，则说明插件有问题。如果是这样，则键绑定存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-08T03:41:13.550

我修改了上面的代码供我自己使用，所以它现在尊重空格。但我硬编码制表符而不是空格，所以如果你使用空格，你可能需要进一步改变它。它现在还假设您没有选择文本，而是将光标放在要更改为垂直间距的行中间。我将 intro/outro 作为参数保留，因此您也可以将其用于 [] 或 ()，尽管在这种情况下，对于正则表达式可能需要更多的转义。

前：

```
 fields = { 'Team1', 'Team2', 'Player1', 'Player2', 'Tab=Round', 'DateTime_UTC=DateTime', 'HasTime=TimeEntered', 'OverviewPage=Tournament', 'ShownName', 'Winner', 'Stream' }, 
```

后：

```
 fields = {
            'Team1',
            'Team2',
            'Player1',
            'Player2',
            'Tab=Round',
            'DateTime_UTC=DateTime',
            'HasTime=TimeEntered',
            'OverviewPage=Tournament',
            'ShownName',
            'Winner',
            'Stream',
        }, 
```

```
import sublime
import sublime_plugin
import re

class SplitLineCommand(sublime_plugin.TextCommand):
    def run(self, edit, sep=",", repl= "\n", intro="{", outro="}"):
        view = self.view
        find = re.escape(sep + ' ') + '*(?! *$| *\n)'
        intro_repl = intro + repl
        intro = intro + ' *'
        outro_repl_start = sep + repl
        outro_repl_end = outro
        outro = ',? *' + outro
        repl = sep + repl
        cursors = view.sel()
        if len(cursors) == 1:
            cursor = cursors[0]
            begin_offset = 0
            end_offset = 0
            if cursor.empty():
                region = view.line(cursor)
                content = view.substr(region)
                line_str = view.substr(view.line(view.sel()[0]))
                tabs = len(line_str) - len(line_str.lstrip())
                intro_repl = intro_repl + '\t' * (tabs + 1)
                repl = repl + '\t' * (tabs + 1)
                outro_repl = outro_repl_start + ('\t' * tabs) + outro_repl_end
                content = re.sub(outro, outro_repl, content)
                content = re.sub(find, repl, content)
                content = re.sub(intro, intro_repl, content)
                view.replace(edit, region, content)
            cursors.clear()
            cursors.add(sublime.Region(region.begin() + begin_offset, region.begin() + len(content) + end_offset))
            view.run_command("split_selection_into_lines") 
```

# c# - 无法捕获的 WinRT 应用程序中引发的 WebException

> ID：15838953
> 
> 赞同：0
> 
> 时间：2013-04-05T16:29:22.857
> 
> 标签：c#, windows-runtime, system.net.webexception, winrt-async

这个问题真的很奇怪，并且已经避开了我的调试尝试。仅在 Surface 平板电脑上运行应用程序时才会发生。它不会出现在华硕平板电脑上或在 Visual Studio 中运行时。在飞行模式已打开的特定场景中，会引发我绝对无法捕捉到的 WebException。我什至不完全确定我的代码中的什么导致它发生，因为我的一些日志记录在代码中的某个点之后由于未知原因没有发生。我只能假设它是由 HttpWebRequest 引起的，因为抛出的异常类型似乎来自内部 .NET 组件。这是我能够获得的唯一调试信息。它来自 Windows 事件查看器：

```
Application: <myappname.exe>
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Net.WebException
Stack:
    at System.Net.ServicePoint.ConnectSocketCallback(System.IAsyncResult)
    at System.Net.LazyAsyncResult.Complete(IntPtr)
    at System.Net.ContextAwareResult.Complete(IntPtr)
    at System.Net.LazyAsyncResult.ProtectedInvokeCallback(System.Object, IntPtr)
    at System.Net.Sockets.Socket.ConnectCallback()
    at System.Net.Sockets.Socket.RegisteredWaitCallback(System.Object, Boolean)
    at System.Threading._ThreadPoolWaitOrTimerCallback.PerformWaitOrTimerCallback(System.Object, Boolean) 
```

我真的希望我有更多的调试信息可以提供，但是我已经尝试了所有我能想到的一切，到处都有大量的 try/catch 块并在大多数调用后记录——其中一些没有被执行。有没有人知道可能导致这种情况的原因？

编辑1：

根据跟踪，异常似乎是在这里的某个地方抛出的。几乎所有东西都包裹在一个 try/catch 块中，所以我看不出 WebException 是如何漏掉的。

```
byte[] bytes = Encoding.UTF8.GetBytes(requestXml.ToString());
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
request.Method = "POST";
request.ContentType = "text/xml";

try
{
    IAsyncResult requestResult = (IAsyncResult)request.BeginGetRequestStream((rAsyncResult) =>
    {
        using (Stream uploadStream = request.EndGetRequestStream(rAsyncResult))
        {
            try
            {
                uploadStream.Write(bytes, 0, bytes.Length);
                uploadStream.Flush();
            }
            catch (Exception e)
            {
                // Exception handling
            }
            finally
            {
                uploadStream.Dispose();
            }
        }

        IAsyncResult responseResult = (IAsyncResult)request.BeginGetResponse((resAsyncResult) =>
        {
            try
            {
                using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(resAsyncResult))
                {
                    try
                    {
                        data = ProcessResponse(XmlReader.Create(response.GetResponseStream()));
                    }
                    catch (Exception e)
                    {
                        // Exception handling
                    }
                    finally
                    {
                        response.Dispose();
                    }
                }
            }
            catch (WebException e)
            {
                // Exception handling
            }

        }, null);
    }, null);
}
catch (Exception e)
{
    // Exception handling
} 
```

编辑2：

我仍然没有找到可接受的解决方案。我目前正在事先检查连接类型，如果代码未连接到 WiFi、移动或以太网，则不允许代码继续运行，但这并没有捕捉到它连接到没有 Internet 连接的网络的情况。WinRT 没有检查互联网连接的解决方案，甚至我使用的方法也不友好（它只是传回一个数字-- [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp /thread/d8e76732-19d3-47b3-840f-70d87c75ce9f](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/d8e76732-19d3-47b3-840f-70d87c75ce9f)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:27:26.697

Did you try handling the [`Application.UnhandledException`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)?

Add the event handler to the event in the `App` class constructor:

```
public App()
{
    // keep the rest of the constructor
    this.UnhandledException += OnUnhandledException;
} 
```

In the event handler you can log the exception and mark is handled to prevent the app from closing / crashing:

```
void OnUnhandledException(object sender, UnhandledExceptionEventArgs e)
{
    // log e.Exception details for investigation
    e.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T19:05:31.520

就像 Efran Cobisi 所说的 EndGetRequestStream 可能是引发异常的函数。即使有异常， using 语句也会处理对象，因此不需要 try finally 来处理它。但是在任何情况下，您都应该使用异步方法，这将使代码更具可读性并且更容易捕获异常。相当于您的代码将是：

```
byte[] bytes = Encoding.UTF8.GetBytes(requestXml.ToString());
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
request.Method = "POST";
request.ContentType = "text/xml";

try
{

    using (Stream uploadStream = await request.GetRequestStreamAsync())
    {
        await uploadStream.WriteAsync(bytes, 0, bytes.Length);
        await uploadStream.FlushAsync();
    }

    using (HttpWebResponse response = (HttpWebResponse) await request.GetRequestStreamAsync())
    {
        data = ProcessResponse(XmlReader.Create(response.GetResponseStream()));
    }

}
catch (Exception e)
{
    // Exception
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T10:08:18.353

该问题可能是由于您的回调中引发了未处理的异常；回调在与调用初始线程不同的线程中异步执行的可能性很高，`request.BeginGetRequestStream`这就是为什么您没有在外部 try/catch 块中捕获它的原因。您应该能够通过将回调的全部内容包装在 try/catch 块中来解决此问题，即：

```
IAsyncResult requestResult = (IAsyncResult)request.BeginGetRequestStream((rAsyncResult) =>
{
    try
    {
        using (Stream uploadStream = request.EndGetRequestStream(rAsyncResult))
        {
            try
            {
                uploadStream.Write(bytes, 0, bytes.Length);
                uploadStream.Flush();
            }
            catch (Exception e)
            {
                // Exception handling
            }
            finally
            {
                uploadStream.Dispose();
            }
        }

        IAsyncResult responseResult = (IAsyncResult)request.BeginGetResponse((resAsyncResult) =>
        {
            try
            {
                using (HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(resAsyncResult))
                {
                    try
                    {
                        data = ProcessResponse(XmlReader.Create(response.GetResponseStream()));
                    }
                    catch (Exception e)
                    {
                        // Exception handling
                    }
                    finally
                    {
                        response.Dispose();
                    }
                }
            }
            catch (WebException e)
            {
                // Exception handling
            }

        }, null);
    }
    catch (Exception ex)
    {
        // Handle the exception as you wish
    }
}, null); 
```

# java - Spring 扫描器 bean

> ID：15838955
> 
> 赞同：2
> 
> 时间：2013-04-05T16:29:27.987
> 
> 标签：java, spring

我正在尝试在 Spring 中配置一个 Scanner bean，我认为它会接近：

```
<bean id="input" class="java.util.Scanner">
    <constructor-arg type="InputStream"><value>java.lang.System.in</value></constructor-arg>
</bean> 
```

我想知道是否有办法做到这一点？如果不是，请您提供一个理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:19:43.463

我不确定，你想从中获得什么，

您可以创建一个 InputStream spring bean，

```
<bean id="stream" class="java.io.InputStream">

<bean id="input" class="java.util.Scanner">
        <constructor-arg index="0"><ref bean="stream"/></constructor-arg>
</bean> 
```

# mysql - 如果 id 不是重复的，MySql 触发器会在另一个表中插入一条记录

> ID：15838957
> 
> 赞同：0
> 
> 时间：2013-04-05T16:29:38.220
> 
> 标签：mysql, database, triggers

我见过与我类似的问题，但似乎没有什么完全适合这种情况。

我有 2 张桌子、账单和帐户。

如果账单被推送到账单表中并且还没有账户，我想在账户表中创建一条记录。

我有：

```
 ...
    BEFORE INSERT ON bills
    FOR EACH ROW 
    BEGIN
        INSERT INTO accounts (id, field1, field2, field3, field4)
        SELECT accountID, 'value1', value2, value3, value4
        FROM bills
        WHERE ((SELECT LEFT(accountID, 5) = 'XXXXX' |
        (SELECT LEFT(accountID, 5) = 'XXXXX' |
        (SELECT LEFT(accountID, 5) = 'XXXXX' |
        (SELECT LEFT(accountID, 5) = 'XXXXX' |
        (SELECT LEFT(accountID, 5) = 'XXXXX')) &&
        accountID NOT IN (SELECT id from accounts); ## I know this line is not right
    END$$ 
```

根据我在其他地方读到的内容，我的选项似乎是在重复密钥更新或插入忽略，这两个我似乎都无法工作，我也找不到涉及插入、选择、来自和何处的示例。

我错过了什么？

编辑：我可以让它插入记录，但根据我的尝试方式，我总是得到“重复的 id”错误，或者它不插入记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:14:41.423

已经有一段时间没有在 MySQL 中编码了，因此如果有一些小的语法错误，请原谅。但是，您将了解需要在以下代码中完成的操作：

```
before insert on bills
for each row
begin
  declare @li_cnt int;
  select count('') into @li_cnt from accounts where accounts.id_account = inserted.id_account;
  if @li_cnt = 0 then
    insert into accounts (id_account) values (inserted.id_account)
  end

end 
```

但是，此类问题应在中间层应用程序服务器级别处理，而不是在数据库触发器级别处理，在数据库触发器级别应该实际实施严格的策略并且不符合业务要求。因此，在这方面，假设您的应用程序是 PHP Web 应用程序，您应该拥有账单的类方法 save()，它应该检查相同的内容并使用 accounts 表的类将值插入到 accounts 表中，然后将行插入到账单表。使用这种方法可以真正实现现代复杂的逻辑，例如，如果您从帐单插入调用的帐户类方法发送回拒绝响应，您可以限制特定帐户的帐单插入。

# php - CakePHP：从 url 参数中删除“page:#”

> ID：15838958
> 
> 赞同：1
> 
> 时间：2013-04-05T16:29:41.927
> 
> 标签：php, forms, cakephp, parameters, cakephp-2.3

我有一个使用该`get`方法的搜索表单。该表单可以正常工作，直到我在对结果进行分页后使用它。

用户可以从任意数量的 url 进入网站，看起来`domain.com/serach/results/something/something_else/`重要的部分是`domain.com/serach/results/`.

这是我的表单代码：

```
echo $this->Form->create(null, array(
    'type' => 'get',
    'url' => $this->Html->url(null, true),
)); 
```

这将使表单看起来像这样：

```
<form action="http://domain.com/serach/results/something/something_else/" method="get"> 
```

问题是，当我对结果进行分页时，它会将 page:2 或 page:3 添加到操作中，因此它看起来像：

```
<form action="http://domain.com/serach/results/something/something_else/page:3" method="get"> 
```

CakePHP 中是否有一个内置函数可以让我`page:3`从传递给表单操作的 url 中删除 ，还是我必须创建一个函数来查找并删除`page:#`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T16:45:21.540

只需以详细的方式设置您的网址：

```
'url' => array('controller' => 'x', 'action' => 'y') + $this->request->params['pass'] 
```

完毕！

# php - 如何获取声明的 PHP 变量作为 jQuery 选择器？

> ID：15838966
> 
> 赞同：1
> 
> 时间：2013-04-05T16:30:04.603
> 
> 标签：php, jquery

我无法弄清楚如何获取 PHP 变量并将其用作 jQuery 变量。

所以，我有例如这个变量：

> $content = "bla bla bla";

它在一个 DIV 里面：

> div id='contentWrapper'
> 
> > $content = "bla bla bla";
> 
> /div

我知道如何抓取 DIV contentWrapper 的 ID、类和内容（文本），但是如何抓取 $content？我希望我足够清楚:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:32:03.660

你不能。PHP 在服务器上运行。PHP 的输出被发送到浏览器。JavaScript 在浏览器中运行。JavaScript 无法访问生成运行它的页面的脚本的内部。

您必须修改 PHP 以输出您想要提供给 JS 的信息，以便它出现在页面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:31:47.750

在 javascript 中，您可以执行以下操作：

编辑：

基于@Marc B 的评论。

```
var jsvar = <?php echo json_encode($content); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T16:37:27.527

根据我认为 PHP 是对浏览器隐藏的服务器端脚本，而 Jquery 脚本由浏览器执行。因此，要获得变量值，您需要向浏览器回显并显示您的内容以完成 JQuery。使用 Jonathan Sampson 提供的方法

# ruby - 有没有一种简单的方法可以在 Ruby 中执行多行缩进字符串？

> ID：15838974
> 
> 赞同：20
> 
> 时间：2013-04-05T16:30:33.770
> 
> 标签：ruby, string

假设我想在我的 ruby​​ 代码中内嵌一大块漂亮的打印 html 代码。在不丢失字符串中的任何格式或不必记住某种 gsub 正则表达式的情况下，最干净的方法是什么。

将它们全部编码在一行中很容易，但很难阅读：

```
1.times do
  # Note that the spaces have been changed to _ so that they are easy to see here.
  doc = "\n<html>\n__<head>\n____<title>\n______Title\n____</title>\n__</head>\n__<body>\n____Body\n__</body>\n</html>\n"
  ans = "Your document: %s" % [doc]
  puts ans
end 
```

ruby 中的多行文本更易于阅读，但字符串不能与其余代码一起缩进：

```
1.times do
  doc = "
<html>
  <head>
    <title>
      Title
    </title>
  </head>
  <body>
    Body
  </body>
</html>
"
  ans = "Your document: %s" % [doc]
  puts ans
end 
```

例如，以下代码与我的代码一起缩进，但字符串现在每行前面有四个额外的空格：

```
1.times do
  doc = <<-EOM

    <html>
      <head>
        <title>
          Title
        </title>
      </head>
      <body>
        Body
      </body>
    </html>
  EOM
  ans = "Your document: %s" % [doc]
  puts ans
end 
```

大多数人使用上面的 HEREDOC 代码，并对结果进行正则表达式替换，以去除每行开头的额外空格。我想要一种不必每次都经历正则表达式的麻烦的方法。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-03-31T08:11:25.693

从 Ruby 2.3 开始，`<<~`heredoc 去除了前导内容空格：

```
def make_doc(body)
  <<~EOF
  <html>
    <body>
      #{body}
    </body>
  </html>
  EOF
end

puts make_doc('hello') 
```

对于较旧的 Ruby 版本，以下内容比其他答案中提供的解决方案更详细，但几乎没有性能开销。它与单个长字符串文字一样快：

```
def make_doc(body)
  "<html>\n"       \
  "  <body>\n"     \
  "    #{body}\n"  \
  "  </body>\n"    \
  "</html>"
end 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-05T16:39:04.720

```
string = %q{This
    is
        indented
  and
    has
         newlines} 
```

[这](http://simpleror.wordpress.com/2009/03/15/q-q-w-w-x-r-s/)是一个博客，其中包含一些示例`%q{}`和`%Q{}`其他示例。

就容易记住而言，认为“Q”代表“引号”。

**旁注：** 从技术上讲，您在报价时不需要“q”。

```
string = %{This
   also
      is indented
  and
     has
   newlines
      and handles interpolation like 1 + 1 = #{1+1}
} 
```

但是，最好的做法是使用`%Q{}`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-05T16:30:33.770

“|” 在 YAML 中，您可以创建可以缩进的多行字符串。只有在第一行第一个非空白字符之后的列中，才会计算空白。通过这种方式，您可以拥有具有缩进的多行字符串，但也可以在代码中缩进。

```
require 'yaml'

1.times do
  doc = YAML::load(<<-EOM)
  |

     <html>
       <head>
         <title>
           Title
         </title>
       </head>
       <body>
         Body
       </body>
     </html>  
  EOM
  ans = "Your document: %s" % [doc]
  puts ans
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-05T19:19:14.810

你要求什么并不明显。如果我想生成如下字符串：

```
"when \n the\n clock\n strikes\n ten\n" 
```

在运行中，我会动态构建它们：

```
%w[when the clock strikes ten].join("\n ")
=> "when\n the\n clock\n strikes\n ten" 
```

连接尾随`"\n"`将添加尾随回车：

```
%w[when the clock strikes ten].join("\n ") + "\n"
=> "when\n the\n clock\n strikes\n ten\n" 
```

如果我正在处理嵌入空格的子字符串，我会将数组调整为：

```
['when the', 'clock strikes', 'ten'].join("\n ") + "\n"
=> "when the\n clock strikes\n ten\n" 
```

# java - 多态性与继承

> ID：15838978
> 
> 赞同：21
> 
> 时间：2013-04-05T16:30:45.683
> 
> 标签：java, polymorphism

假设我有两个类：Animal 和 Dog。狗是动物的子类。我执行以下代码：

```
Animal a = new Dog(); 
```

现在我可以通过 a 变量调用 Dog 类的方法。

但我的问题是：如果我可以通过 Dog 对象（继承）调用 Animal 的所有方法，那么我为什么要使用多态性原理？我可以声明：

```
Dog d = new Dog(); 
```

有了这个声明，就可以使用 Animal 的所有方法和 Dog 方法。那么为什么要使用多态呢？非常感谢您的回答。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-05T16:39:56.250

在 Java 中，多态和继承的概念是“焊接在一起的”；一般来说，它不必是这样的：

*   多态性使您可以在不知道类的确切类型的情况下调用类的方法
*   继承允许派生类共享其基类的接口和代码

有些语言将继承与多态性分离：

*   在 C++ 中，您可以在不产生多态行为的情况下继承一个类（即不要用 标记基类中的函数`virtual`）
*   在 Objective C 中，您可以在不相关的类上实现方法，并从只知道方法签名的地方调用它。

回到 Java，使用多态性的原因是将你的代码与其对应方的实现细节解耦：例如，如果你可以编写一个`Feed(Animal animal)`适用于各种动物的方法，那么当你添加更多的子类或实现`Animal`。这与一种`Feed(Dog dog)`与狗紧密耦合的方法形成对比。

至于

```
Dog d = new Dog(); 
```

声明去，如果你知道你的方法的其余部分专门处理狗，没有一般的理由来避免这种情况。但是，在许多情况下，后者并非如此：例如，您的类或您的方法通常对确切的实现不敏感，例如

```
List<Integer> numbers = new ArrayList<Integer>(); 
```

在这种情况下，您可以替换`new ArrayList<Integer>()`为`new LinkedList<Integer>()`，并且*知道*您的代码将要编译。相反，如果您的`numbers`列表被声明为`ArrayList<Integer> numbers`，则这种切换可能不是确定性的。

这称为“对接口编程”。Stack Overflow 上有一个很好的[答案来解释它。](https://stackoverflow.com/q/383947/335858)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T16:33:05.377

您可以拥有`Animal`该类的其他实现，例如`Cat`. 然后你可以说

```
Animal a = new Dog();
Animal b = new Cat(); 
```

你可以调用`Animal`类的方法而不用关心它到底是哪个实现，[多态](http://docs.oracle.com/javase/tutorial/java/IandI/polymorphism.html)会调用正确的方法。例如

```
a.speak();  // "Woof"

b.speak();  // "Meow" 
```

真的，这不是“多态与继承”，而是“使用继承的多态”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-05T16:33:13.017

多态性允许您编写适用于任何的方法`Animal`：

```
public void pet(Animal animal) {
   ...
} 
```

此方法将接受`Dog`,`Cat`等，包括`Animal`尚未编写的子类。

如果采用该方法`Dog`，它将不适用于`Cat`等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T16:40:09.333

如果你确定它永远是一只狗，那就没有理由了。你也可以使用*Dog d = new Dog();* 正如你所描述的。但是，假设您使用了方法而不是构造函数。该方法返回了一个动物，你不知道你会得到哪个动物实现。您仍然可以对动物使用相同的方法（即使它是狗、象猫等）。

出于可扩展性的目的，继承简化了事情。当你想创建一个也共享一些动物方法的大象或猫时，你可以通过将动物作为超类来轻松获得这些方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-11T20:00:30.327

通常你问的问题更类似于继承与组合:)更多“现实生活”的例子说明为什么使用多态是好的例如策略设计模式的使用。您可以有许多 TaxPolicy 实现：UsaTaxPolicy、CanadaTaxPolicy、EuTaxPolicy 等。如果您有方法 calculateFinalPrice，它还必须计算税款，那么您注入正确的实现并执行良好的计算，无论您是否通过美国、加拿大或欧盟实施。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-07T15:54:49.783

继承是动态多态性。我的意思是当你删除继承时，你不能再覆盖了。

# python - ImportError：无法导入名称 Ghost

> ID：15838979
> 
> 赞同：5
> 
> 时间：2013-04-05T16:30:49.773
> 
> 标签：python

我知道有类似的问题，但我找不到这个问题的解决方案。这是我所做的。

我使用 pip 安装了 ghost 模块。site-packages/ghost 文件夹有 3 个文件 `__init__.py`，`ghost.py`和`test.py`.

`__init__.py`有以下内容

```
from ghost import Ghost
from test import GhostTestCase 
```

模块建议方法

```
from ghost import Ghost 
```

但它会引发以下错误。

```
File "<pyshell#3>", line 1, in <module>
    from ghost import ghost
  File "G:\Python33\lib\site-packages\ghost\__init__.py", line 1, in <module>
    from ghost import Ghost
ImportError: cannot import name Ghost 
```

我尝试将路径添加到 PYTHONPATH；它没有用。我不知道为什么它会发生在标准模块上。我正在使用 python 3.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T16:50:23.013

使用 Python 3，尝试将该行更改`__init__.py`为

```
from .ghost import Ghost 
```

进行相对于包的导入。如果可行，那是模块中的一个错误，您应该[报告它](https://github.com/jeanphix/Ghost.py/issues)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-17T16:20:30.487

你是什​​么命令行？应该`pip install Ghost.py` 与否`pip install ghost`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T14:26:30.500

我有同样的问题，

如果脚本文件名为`ghost.py`or `Ghost.py`，则必须将它们重命名为`ghost`.

之后，您必须删除`.pyc`先前脚本创建的文件。

现在你可以运行你的代码了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T16:42:42.893

你是不是打错字了

```
 from ghost import ghost 
```

代替

```
 from ghost import Ghost 
```

使模块 ghost 尝试导入“ghost”而不是“Ghost”给出错误？

# symfony - Capifony + Symfony2 无法写入缓存文件

> ID：15838981
> 
> 赞同：3
> 
> 时间：2013-04-05T16:30:53.387
> 
> 标签：symfony, deployment, capifony

使用 capistrano 将我的开发环境部署到我的外部开发服务器时，我总是收到以下错误：

```
RuntimeException: Failed to write cache file "/var/www/xyz.co.uk/app/cache/dev/classes.php". 
```

然后我必须登录到我的开发服务器并删除我的 app/cache/dev/ 目录。

这是我的 development.rb 文件：

```
server 'x.xx.xx.xxx', :app, :web, :db, :primary => true
ssh_options[:port] = 1234
ssh_options[:forward_agent] = true
set :deploy_to, "/var/www/xyz.co.uk"
set :symfony_env_prod, "dev"
set :branch, "develop"

# Need to clear *_dev controllers
set :clear_controllers,     false 
```

还有我的 deploy.rb 文件：

```
set :stage_dir, 'app/config/deploy' # needed for Symfony2 only
set :stages, %w(production staging development)
require 'capistrano/ext/multistage'

set :application,           "xyz.co.uk"
set :user,                  "root"  # The server's user for deploys

set :normalize_asset_timestamps, false

set :repository,            "git@github.com:xyz/xyz.co.uk.git"
set :scm,                   :git
set :keep_releases,         3
set :use_sudo,              false
set :web_path,              "web"
set :shared_files,          ["app/config/parameters.yml"]
set :shared_children,       [app_path + "/logs", web_path + "/uploads"]
set :use_composer,          true
set :update_vendors,        true
set :dump_assetic_assets,   true
set :deploy_via,            :remote_cache

#logger.level = Logger::MAX_LEVEL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T13:18:05.523

我在我的`deploy.rb`文件中有这个来设置缓存目录的权限：

```
after "deploy:update_code" do
  capifony_pretty_print "--> Ensuring cache directory permissions"
  run "setfacl -R -m u:www-data:rwX -m u:`whoami`:rwX #{latest_release}/#{cache_path}"
  run "setfacl -dR -m u:www-data:rwX -m u:`whoami`:rwX #{latest_release}/#{cache_path}"
  capifony_puts_ok
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:35:47.977

您正在部署为`root`，因此您必须使用`sudo`：

```
set :use_sudo, true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T06:40:56.787

添加此代码

```
set :writable_dirs,       ["app/cache", "app/logs"]
set :webserver_user,      "www-data"
set :permission_method,   :acl
set :use_set_permissions, true 
```

确保您启用了 acl。如果没有，请参阅此链接[http://vvv.tobiassjosten.net/symfony/symfony2-file-permissions-in-ubuntu/](http://vvv.tobiassjosten.net/symfony/symfony2-file-permissions-in-ubuntu/)

# bower - Bower 不安装组件

> ID：15838985
> 
> 赞同：1
> 
> 时间：2013-04-05T16:31:15.953
> 
> 标签：bower

这是我运行的命令

```
c:\projectname\www>bower install jquery --save
bower cloning git://github.com/components/jquery.git
bower cached git://github.com/components/jquery.git
bower fetching jquery
bower checking out jquery#1.9.1
bower copying C:\Users\jesse\AppData\Roaming\bower\cache\jquery\cf68c4c4e7507c8d20fee7b5f26709d9
bower installing jquery#1.9.1 
```

这是我的 component.json

```
{
  "name": "projectname",
  "version": "0.0.1",
  "directory" : "scripts/components"
} 
```

我希望能在其中找到一些东西，`c:\projectname\www\scripts\components`但什么也没有出现。

我究竟做错了什么？

此外，值得注意的是，在将`directory`属性添加到我的`component.json`文件之前，我尝试运行相同的命令，但目录中没有出现任何内容`components`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T16:59:06.723

所以事实证明，使用`component.json`文件不是正确的做法。

我创建了一个`.bowerrc`文件

```
{
  "directory" : "scripts/components"
} 
```

它就像一个魅力。

# css - 在标题中居中徽标

> ID：15838989
> 
> 赞同：-2
> 
> 时间：2013-04-05T16:31:22.110
> 
> 标签：css, wordpress, header, safari

我想在[此页面](http://www.beau-velo.com/WordPress)上居中我的标题徽标。

我试过：

```
.site-header {
    margin-left: 30px;
    margin-right: 30px;
    padding: 20px 0;
    text-align:center; 
}
.site-header hgroup {
    display: inline;
    margin-left: auto;
    margin-right:auto;
} 
```

这是原始代码：

```
.site-header {
    margin-left: 30px;
    margin-right: 30px;
    padding: 20px 0;
}
.site-header hgroup {
    display: inline;
    float: left;
}
.site-header .site-title {
    display: inline;
    float: left;
    margin-right: 10px;
}
.site-header .site-title a, .site-header .site-title img {
    display: block;
}
.site-header #site-description {
    display: inline;
    float: left;
    font-size: 10px;
    font-weight: 600;
    padding: 20px 0;
} 
```

顺便说一句，我还有一个问题，Safari 并不总是显示徽标（.png 图像）（Chrome 可以），有时您必须调整窗口大小或单击菜单项才能使其显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:47:41.603

`.site-header hgroup { display: block; margin: 0 auto; float: none; width: 120px; }`

# ios - 检测 iOS 上的向上滑动手势

> ID：15838990
> 
> 赞同：1
> 
> 时间：2013-04-05T16:31:22.710
> 
> 标签：ios, objective-c, ios5, ios6, uigesturerecognizer

如果我想检测用户何时向上滑动他/她的手指（想想在歌曲中擦洗，那种动作，但向上）并因此调整设置（我不希望使用 UISlider）。

你们会为此推荐什么？那是平移手势识别器还是滑动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T17:22:34.223

试试这个：

```
UISwipeGestureRecognizer *swipeRecognizer = 
[[UISwipeGestureRecognizer alloc]
 initWithTarget:self 
 action:@selector(swipeDetected)];
swipeRecognizer.direction = UISwipeGestureRecognizerDirectionUp;
[self.view addGestureRecognizer:swipeRecognizer]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:35:57.170

滑动是一次性的简单动作；观察它的发生，然后你做出*回应*。平移手势是您希望在它发生时能够跟踪的连续运动。你想要其中的哪一个？

# java - Java android解析json应用程序崩溃

> ID：15838999
> 
> 赞同：-4
> 
> 时间：2013-04-05T16:31:59.690
> 
> 标签：java, android, json

我有这样的json：

```
[
   {
      "bank":{
         "central_office_address":"ddd",
         "license":"12312312",
         "location_id":3,
         "name":"prior",
         "tax_number":"12312312",
         "year_of_foundation":1987
      }
   }
] 
```

我尝试在这里解析它：http: [//p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/](http://p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/)

我这样做是出于教育和学习测试的兴趣。

我的活动：

```
package com.example.tespapp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends Activity {
    TextView tvHello;

    private static String url = "http://localhost/denwer/banks.json";

    // JSON Node names

    JSONArray contacts = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tvHello = (TextView) findViewById(R.id.textView1);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void onClick(View v){
        tvHello.setText("Hello Kitty!");

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

    }

} 
```

JSONParser 与下面的链接相同......

但我无法解析甚至看不到它......点击我的应用程序崩溃（

在目录中我看到：

```
04-05 16:30:43.713: E/Trace(1218): error opening trace file: No such file or directory (2)
04-05 16:30:44.943: D/libEGL(1218): loaded /system/lib/egl/libEGL_emulation.so
04-05 16:30:44.953: D/(1218): HostConnection::get() New Host Connection established 0x2a149640, tid 1218
04-05 16:30:45.113: D/libEGL(1218): loaded /system/lib/egl/libGLESv1_CM_emulation.so
04-05 16:30:45.123: D/libEGL(1218): loaded /system/lib/egl/libGLESv2_emulation.so
04-05 16:30:45.433: W/EGL_emulation(1218): eglSurfaceAttrib not implemented
04-05 16:30:45.803: D/OpenGLRenderer(1218): Enabling debug mode 0
04-05 16:31:29.633: D/AndroidRuntime(1218): Shutting down VM
04-05 16:31:29.633: W/dalvikvm(1218): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-05 16:31:29.703: E/AndroidRuntime(1218): FATAL EXCEPTION: main
04-05 16:31:29.703: E/AndroidRuntime(1218): java.lang.IllegalStateException: Could not execute method of the activity
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.view.View$1.onClick(View.java:3599)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.view.View.performClick(View.java:4204)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.view.View$PerformClick.run(View.java:17355)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.os.Handler.handleCallback(Handler.java:725)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.os.Looper.loop(Looper.java:137)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at java.lang.reflect.Method.invokeNative(Native Method)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at java.lang.reflect.Method.invoke(Method.java:511)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at dalvik.system.NativeStart.main(Native Method)
04-05 16:31:29.703: E/AndroidRuntime(1218): Caused by: java.lang.reflect.InvocationTargetException
04-05 16:31:29.703: E/AndroidRuntime(1218):     at java.lang.reflect.Method.invokeNative(Native Method)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at java.lang.reflect.Method.invoke(Method.java:511)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.view.View$1.onClick(View.java:3594)
04-05 16:31:29.703: E/AndroidRuntime(1218):     ... 11 more
04-05 16:31:29.703: E/AndroidRuntime(1218): Caused by: android.os.NetworkOnMainThreadException
04-05 16:31:29.703: E/AndroidRuntime(1218):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at com.example.tespapp.JSONParser.getJSONFromUrl(JSONParser.java:38)
04-05 16:31:29.703: E/AndroidRuntime(1218):     at com.example.tespapp.MainActivity.onClick(MainActivity.java:68)
04-05 16:31:29.703: E/AndroidRuntime(1218):     ... 14 more
04-05 16:31:32.023: I/Process(1218): Sending signal. PID: 1218 SIG: 9 
```

我也尝试其他 json，其他链接....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:37:03.890

您的根本问题是：

```
android.os.NetworkOnMainThreadException 
```

您不能在 android 的 UI 线程上执行长时间运行的网络操作。操作系统阻止您这样做，这首先阻止您获取 json 对象，从而导致引发所有其他异常。

您需要创建一个 AsyncTask（或其他类型的线程）来处理您的网络操作。然后，您创建该类的一个实例并在主线程中对其调用 execute() 方法。

[这是AsyncTasks](http://developer.android.com/reference/android/os/AsyncTask.html)的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:37:31.880

仅用于测试/代码运行：（不建议在实际项目中使用）

尝试在 android OS 低于 4+ 的模拟器/设备上测试代码，其中添加了不允许主 UI 线程上的连接！这可以通过日志行看到`Caused by: android.os.NetworkOnMainThreadException`

* * *

**真正的解决方案：**

您需要添加一个`AsyncTask`或一个`Thread`并执行连接：

看这里：[AsyncTask Android 示例](https://stackoverflow.com/q/9671546/944070)

为了让它工作改变

```
public void onClick(View view){ 
    new LongOperation().execute("");
} 
```

并添加一个内部类：

```
private class LongOperation extends AsyncTask<String, Void, JSONObject> {

      @Override
      protected JSONObject doInBackground(String... params) {
          // Hashmap for ListView
          ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
          try {
             // Creating JSON Parser instance
             JSONParser jParser = new JSONParser();

             // getting JSON string from URL
             JSONObject json = jParser.getJSONFromUrl(url);
          } catch(Exception ex) { // many diffent exceptions better handle seperatelly
              Log.e("error", "error", ex);
              return null;
          }

            return json;
      }      

      @Override
      protected void onPostExecute(JSONObject result) {

            // do smth with the result
            String str = (json == null)?"json = null":json.toString(4);
            tvHello.setText(str);
      }

} 
```