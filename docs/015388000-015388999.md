# StackOverflow 问答 15388000-15388999

# batch-file - 使用批处理文件执行 msbuild 项目

> ID：15388004
> 
> 赞同：2
> 
> 时间：2013-03-13T14:23:35.380
> 
> 标签：batch-file, msbuild

我是一名实习生，创建了一个 msbuild 项目，用于构建存储库中的所有 .csproj 文件。现在我必须创建一个批处理文件来调用我创建的 msbuild.csproj 并按每日计划执行它（比如每天下午 12:00）。我不知道如何制作批处理文件，需要一些帮助才能开始。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T14:36:48.717

将其放在 .bat 文件中：

```
set msBuildDir=%WINDIR%\Microsoft.NET\Framework\v3.5    
REM perhaps you need a different framework? %WINDIR%\Microsoft.NET\Framework\v4.0.30319

call %msBuildDir%\msbuild /target:AllTargetsWrapper "MySolutionOrCsProj.sln" /p:Configuration=Debug;FavoriteFood=Twix /l:FileLogger,Microsoft.Build.Engine;logfile=ZZZZZMSBuildSetupAndBuildAllTargetsWrapper_Debug.log

set msBuildDir= 
```

您必须调整目标名称。

等等，我只记得我之前更详细地回答过这个问题。看：

[通过命令行构建 Visual Studio 项目](https://stackoverflow.com/questions/5669765/build-visual-studio-project-through-the-command-line/5669820#5669820)

# css - 通过 jquery 添加对象时，引导边距/填充消失

> ID：15388006
> 
> 赞同：0
> 
> 时间：2013-03-13T14:23:40.373
> 
> 标签：css, twitter-bootstrap

我在使用引导程序和在我的页面上动态添加元素时遇到了一点问题。

我有一个表格，我想在其中动态添加新输入。所有这些都可以正常工作，但渲染效果不是很好，因为标签和选择之间似乎缺少一些边距填充。

我使用引导程序作为主要 css。

这是一个例子：http: [//jsfiddle.net/4Uf2U/1/](http://jsfiddle.net/4Uf2U/1/)

```
<div class="form-inline">
<label>Label</label>
<select><option>Option</option></select></div> 
```

有谁知道为什么会发生这种情况以及如何纠正这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:31:56.007

这是因为`select`. 非动态的格式如下：

```
<div class="form-inline">
    <label>Label</label>
    <select><option>Option</option></select>
</div> 
```

动态的是这样的一个衬垫：

```
<div class="form-inline"><label>Label</label><select><option>Option</option></select></div> 
```

所以使用一种方式，风格（外观）将是相同的。

这是一个更新的 jsFiddle：[单击](http://jsfiddle.net/4Uf2U/3/)

# xslt - XSLT if 条件为没有节点

> ID：15388007
> 
> 赞同：0
> 
> 时间：2013-03-13T14:23:43.150
> 
> 标签：xslt

我对 xslt 比较陌生，如果节点数不等于 0，我想做点什么，但是 XSLT 不适用于 if 条件

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="CSS.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div class="main_cont">
<div class="page3">
<xsl:if test="(Count(/PrecisionVestor/OtherIncomeSection/OtherIncome) != 0)">
    <div class="rent_roll">

    <div class="othr_inc">
      <div class="fst_r_box">
        <div class="fst_r_box_fst_row" style="width:100%; height:30px; float:left;">
          <div class="item" style="width:25%; height:30px; float:left; line-height:30px;">Description</div>
          <div class="cost" style="width:18%; height:30px; float:left; text-align:center; line-height:30px;">Monthly Rent</div>
          <div class="cost" style="width:18%; height:30px; float:left; text-align:center; line-height:30px;">Lease Start</div>
          <div class="cost" style="width:18%; height:30px; float:left; text-align:center; line-height:30px;">Lease End</div>
          <div class="cost" style="width:18%; height:30px; float:left; text-align:center; line-height:30px; ">Escalator</div>
        </div>
         <xsl:for-each select="PrecisionVestor/OtherIncomeSection/OtherIncome">
        <div class="fst_r_box_fst_row_inn">
          <div class="item_b" style="width:25%; "><xsl:value-of select="Description"/></div>
          <div class="cost_b" style="width:12%; margin-right:6%; text-align:right; float:left;"><xsl:value-of select="MonthlyRent"/></div>
          <div class="cost_b" style="width:12%; margin-right:6%; text-align:right; float:left;"><xsl:value-of select="LeaseStart"/></div>
          <div class="cost_b" style="width:12%; margin-right:6%; text-align:right; float:left;"><xsl:value-of select="LeaseEnd"/></div>
          <div class="cost_b" style="width:12%; margin-right:6%; text-align:right; float:left;"><xsl:value-of select="Escalator"/></div>
        </div>
        </xsl:for-each>

        <xsl:for-each select="PrecisionVestor/OtherIncomeSection/TotalOtherIncome">     
        <div class="fst_r_box_btm_row">
          <div class="item_b" style="width:25%; "><xsl:value-of select="Description"/></div>
          <div class="cost_b" style="width:12%; margin-right:6%; text-align:right; float:left;"><xsl:value-of select="MonthlyRent"/></div>
          <div class="cost_b" style="width:12%; margin-right:6%; text-align:right; float:left;"></div>
          <div class="cost_b" style="width:12%; margin-right:6%; text-align:right; float:left;"></div>
          <div class="cost_b" style="width:12%; margin-right:6%; text-align:right; float:left;"><xsl:value-of select="Escalator"/></div>
        </div>
        </xsl:for-each>
      </div>

    </div>
</xsl:if>
</div>
</div>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

这是 xslt 的 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="xslStyle1.xsl"?>
<PrecisionVestor>
    <OtherIncomeSection>
        <OtherIncome>
            <Description>Rent</Description>
            <MonthlyRent>200</MonthlyRent>
            <LeaseStart>3/12/13</LeaseStart>
            <LeaseEnd>3/12/14</LeaseEnd>
            <Escalator>2</Escalator>
        </OtherIncome>
        <TotalOtherIncome>
            <Description>Totals</Description>
            <MonthlyRent>200</MonthlyRent>
            <Escalator>2</Escalator>
        </TotalOtherIncome>
    </OtherIncomeSection>
</PrecisionVestor> 
```

它工作正常，直到我添加 if 条件一旦我添加了 if 条件我得到空白 html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:29:34.600

一个问题是您在`Count`应该使用大写 C 时：

```
<xsl:if test="count(/PrecisionVestor/OtherIncomeSection/OtherIncome) != 0"> 
```

但`count()`实际上并不需要检查节点是否存在。你可以简单地这样做：

```
<xsl:if test="/PrecisionVestor/OtherIncomeSection/OtherIncome"> 
```

导致 XSLT 失败的另一个问题是您在`</div>`标记之前缺少一个结束`<xsl:if>`标记。如果这两个问题都得到解决，XSLT 应该会运行。

我还建议稍微整理一下 XSLT，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" />
  <xsl:template match="/">
    <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Untitled Document</title>
        <link href="CSS.css" rel="stylesheet" type="text/css" />
        <style>
          .item, .item_b { width: 25%; }
          .item, .cost { height: 30px; float:left; line-height: 30px; }
          .cost { width: 18%; text-align: center; }
          .cost_b { width: 12%; margin-right: 6%; text-align: right; float: left; }
        </style>
      </head>

      <body>
        <div class="main_cont">
          <div class="page3">
            <xsl:apply-templates select="PrecisionVestor/OtherIncomeSection[OtherIncome]" />
          </div>
        </div>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="OtherIncomeSection">
    <div class="rent_roll">

      <div class="othr_inc">
        <div class="fst_r_box">
          <div class="fst_r_box_fst_row" style="width:100%; height:30px; float:left;">
            <div class="item">Description</div>
            <div class="cost">Monthly Rent</div>
            <div class="cost">Lease Start</div>
            <div class="cost">Lease End</div>
            <div class="cost">Escalator</div>
          </div>
          <xsl:apply-templates select="OtherIncome">
            <xsl:with-param name="rowClass" select="'fst_r_box_fst_row_inn'" />
          </xsl:apply-templates>
          <xsl:apply-templates select="OtherIncome">
            <xsl:with-param name="rowClass" select="'fst_r_box_btm_row'" />
          </xsl:apply-templates>
        </div>

      </div>
    </div>
  </xsl:template>

  <xsl:template match="OtherIncome | TotalOtherIncome">
    <xsl:param name="rowClass" />
    <div class="$rowClass">
      <xsl:apply-templates select="Description | MonthlyRent" />
      <xsl:apply-templates select="LeaseStart | LeaseEnd" />
      <xsl:apply-templates select="self::TotalOtherIncome" mode="leaseColumns" />
      <xsl:apply-templates select="Escalator" />
    </div>
  </xsl:template>

  <xsl:template match="Description">
    <div class="item_b">
      <xsl:value-of select="."/>
    </div>
  </xsl:template>

  <xsl:template match="MonthlyRent | LeaseStart | LeaseEnd | Escalator">
    <div class="cost_b">
      <xsl:value-of select="."/>
    </div>
  </xsl:template>

  <xsl:template match="TotalOtherIncome" mode="leaseColumns">
    <div class="cost_b"></div>
    <div class="cost_b"></div>
  </xsl:template>
</xsl:stylesheet> 
```

# android - 将数据从 Android Thread 类发送到 Service Class

> ID：15388008
> 
> 赞同：0
> 
> 时间：2013-03-13T14:23:44.857
> 
> 标签：android, multithreading, service

您可能认为这个问题是重复的，但我仍然没有在其他帖子中找到答案

我在服务中有一个名为“Update”的服务类和一个名为“SyncData”的单独线程类。我需要在服务类的 onCreate() 方法中运行 SyncData 线程。当线程开始运行时，它将只运行一次，并且应该将字符串值返回给 Service onCreate() 方法。但在我的情况下，它总是在 Service onCreate() 方法中返回 null 。但是我通过放置日志在我的 Thread 类中看到了相同的数据字符串。

在许多不同的帖子中，我看到将数据从线程传递到活动或通过处理程序在线程之间传递数据。我没有看到任何关于将数据从线程发送到服务类的帖子。

有人可以帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:42:33.563

你不能。因为如果您生成一个新线程，onCreate 方法会返回，而不是等待线程完成。另一方面，您不能阻止它，否则您会阻止 ui 线程并导致 ANR 错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:51:41.787

```
Make the String value static and define it in service class.
Eg: 

public class abcd extends service
{
public static String string;
....
.......
... oncreate()
{
Thread t=new Thread(new Otherclass());
t.start();
}
}

Try this . Also be sure to stopservice only after executing thread. 
```

# c# - 局部变量 C#

> ID：15388011
> 
> 赞同：1
> 
> 时间：2013-03-13T14:23:48.287
> 
> 标签：c#, asp.net

我怎样才能得到一个局部变量？

我有这个代码

```
if (ctrl is Control)
{
    Control c = (Control)ctrl;
    foreach (object innerCtrl in c.Controls)
    {
        if (innerCtrl is System.Web.UI.WebControls.CheckBox)
        if (((CheckBox)innerCtrl).Checked == true)
        {
            string resultado = (((CheckBox)innerCtrl).Text);
        }
        else
        {
            TextBox1.Text = "não";
        }
    }
} 
```

我怎样才能得到变量**resultado**？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T14:27:03.433

这个答案对你的意思做了一个巨大的假设，“我怎样才能得到变量”（你已经*有了*变量......）。

您可以在您需要的任何范围内声明该变量：

```
string resultado = null;
if (ctrl is Control)
{
    Control c = (Control)ctrl;
    foreach (object innerCtrl in c.Controls)
    {
        if (innerCtrl is System.Web.UI.WebControls.CheckBox)
        {
            if (((CheckBox)innerCtrl).Checked)
            {
                resultado = (((CheckBox)innerCtrl).Text);
            }
            else
            {
                TextBox1.Text = "não";
            }
        }
    }
}

if (resultado != null) /* use the variable */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:25:00.077

~~将定义更改为可以编译的内容：~~ 您似乎只是试图将变量名称**加粗**，并且它周围带有星号 - 抱歉。

如果您想在循环之外使用它，请在上面定义它，`c`如下所示：

```
Control c = (Control)ctrl;
string resultado = null; 
```

然后像这样稍后使用它：

```
resultado = (((CheckBox)innerCtrl).Text); 
```

如果您希望变量是`global`然后在类中定义它。假设类是这样的：

```
public class YourClass
{
    string resultado = null;
} 
```

现在您不需要在其他任何地方定义它，只需在方法中使用它即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:29:04.287

假设您可能会得到多个结果。我建议使用[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)来存储所有结果。这样，您可以在函数完成后访问 List 并使用它来访问所有值。

```
List<String> results = new List<String>;

if (ctrl is Control)
{
    Control c = (Control)ctrl;
    foreach (object innerCtrl in c.Controls)
    {
        if (innerCtrl is System.Web.UI.WebControls.CheckBox)
            if (((CheckBox)innerCtrl).Checked == true)
            {
                string resultado = (((CheckBox)innerCtrl).Text);
                if (!String.IsNullOrEmpty(resultado))
                    results.Add(resultado);
            }
            else
            {
                TextBox1.Text = "não";
            }
    }
}

if (results.Count > 0)
{
    // We got results. Do something with our results.
    foreach (var result in results)
    {
        Console.Write(results);
    }
} 
```

我建议您将代码移动到它自己的函数中。通常我更喜欢让我的函数只做一件事以保持简单，但首先你可以把它变成这样的东西。

```
public List<String> FetchTextFromCheckBoxes(Control cntrl)
{
    List<String> results = new List<String>();

    if (ctrl is Control)
    {
        Control c = (Control)ctrl;
        foreach (object innerCtrl in c.Controls)
        {
            if (innerCtrl is System.Web.UI.WebControls.CheckBox)
                if (((CheckBox)innerCtrl).Checked == true)
                {
                    string resultado = (((CheckBox)innerCtrl).Text);
                    if (!String.IsNullOrEmpty(resultado))
                        results.Add(resultado);
                }
                else
                {
                    TextBox1.Text = "não";
                }
        }
    }

    return results;
} 
```

然后，您只需在应用程序的主要部分中像这样使用它。

```
List<String> results = FetchTextFromCheckBoxes(ctrl);

if (results.Count > 0)
{
    // We got results. Do something with our results.
    foreach (var result in results)
    {
        Console.Write(results);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:29:54.160

考虑到方法中的局部变量总是由编译器声明在作用域的顶部，无论代码中真正的*可见性*作用域如何。`if`因此，将变量移出语句对性能/内存没有任何影响，如下所示：

```
foreach (object innerCtrl in c.Controls)
{
     if (innerCtrl is System.Web.UI.WebControls.CheckBox) {

        string resultado = string.Empty;
        if (((CheckBox)innerCtrl).Checked)
        {
             resultado = (((CheckBox)innerCtrl).Text);
        }
        else
        {
           TextBox1.Text = "não";
        }

        //CAN READ variable here
     }
} 
```

# sencha-touch-2 - 如何根据 sencha 中 json 响应的第一个组合值填充第二个组合

> ID：15388014
> 
> 赞同：1
> 
> 时间：2013-03-13T14:23:52.373
> 
> 标签：sencha-touch-2, extjs4.1, sencha-architect

我正在尝试根据来自 json 响应的第一个组合填充第二个组合，例如使用第一个组合中的类别值在第二个组合中显示子类别值。我所有的值都来自 json 数组响应，我正在尝试动态设置 root 属性并在第一个组合更改函数中加载控制器中第二个组合框的存储，但它没有填充数据。谁能告诉我问题是什么。我如何解决它？我在下面发布了第一个组合的更改功能的代码：

```
valueChange:function(combo, ewVal, oldVal,optionsVal) {
    for(var i=0;i<tempstore.getCount();i++){
          var record = tempstore.getAt(i);

//checking for user selection id  with store id 
 if(record.get('categoryId')==ewVal)         
 {
   value="category.category1.category["+i+"].subCategory.subCategory1";
tempsecondCompostore.getProxy().getReader().setRootProperty(value);    
tempsecondCompostore.load();
cmbSecond.setStore(tempsecondCompostore);

mdSecond.setDisplayField('subCategoryName');
cmdSecond.setValueField('subCategoryId');
 break;
       }
      } 
```

这是我的第二个组合模型：

```
Ext.define('Test.model.SubCategoryModel', {
    extend : 'Ext.data.Model',
    fields : [
     {
      name:'subCategoryName',
      type:'string'

     },
     {
      name:'subCategoryId',
      type:'string'
     }

    ]

}); 
```

这是我的第二个组合商店：

```
Ext.define('Test.store.SubCategoryStore', {
    extend : 'Ext.data.Store',
    storeId : 'secondcombo',
    model : 'Test.model.SubCategoryModel',
    //autoLoad : 'true',
    proxy : {
        type : 'ajax',
        url : 'data.json',
        reader : {
            type : 'json',
            rootProperty:'category.category1.category[0].subCategory.subCategory1
        }
    } 
```

});

在视图中显示组合：

```
xtype: 'fieldset',
            width:400,
            heigth:200,
            items: [
                {
                    xtype: 'selectfield',
                    label: 'Select',
                    store : 'secondcombo',
                    width:400,
                    heigth:200,
                    queryMode: 'local',
                    displayField :'subCategoryName',
                    valueField :'subCategoryId',
                    id:'cmbSecond'

                }
            ] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:56:05.987

问题是 store 的 load() 是异步的，您需要在回调中包含此调用之后的行。

# macos - Node.js - 使用 socks5 模块

> ID：15388018
> 
> 赞同：0
> 
> 时间：2013-03-13T14:24:00.673
> 
> 标签：macos, node.js, socks

我在运行 OSX 10.8.2 的 Mac 上。我正在学习 Node.js 并想使用袜子做请求。

在我使用的终端中

`git clone https://github.com/mattcg/socks5-http-client.git`

获取 socks5 http 客户端源。

在下载的源文件夹中有一个名为 example-tor 的示例，所以我跑了

`node example-tor.js`

这给了我一条消息“找不到模块'socks5-client'”。

此错误在源文件夹中名为**agent.js**的 js 文件中抛出，其中一行显示**var socksClient = require('socks5-client');**

**我究竟做错了什么？**

老实说，我刚刚开始使用 Node.js。我不确定我是否完全了解模块的工作原理、它们在我的 Mac 上的位置以及 Node.js 应该如何知道它们的位置。

我一直在阅读文档、“hello world”教程和安装诸如“npm”包管理器之类的东西的教程，但是让某些东西工作的整个过程似乎非常混乱和不清楚。

希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:03:38.763

尝试从顶部文件夹`npm install`中的终端运行（与文件相同）`socks5-http-client``package.json`

# wordpress - WordPress 简码 unautop 不起作用

> ID：15388024
> 
> 赞同：1
> 
> 时间：2013-03-13T14:24:39.810
> 
> 标签：wordpress, mailchimp

我在客户的网站上使用 WordPress 插件 Mailchimp，一切都很好，除了 WordPress 正在使用其（讨厌和喜爱的）wpautop 功能杀死布局。

我发现了几个讨论相同问题的网站（wpautop 弄乱了短代码内容）。然后，网站提供了几行代码，这些代码将在调用 wpautop 后生成简码，每个人都说它对他们有用。

我将这些行上传到我的functions.php 并且......什么也没发生。

我在另一个站点上运行了 mailchimp，wpautop 在该站点上以某种方式不会弄乱代码（没有代码并且根本没有删除 wpautop）。没有一个functions.php 文件会永久删除wpautop 功能。

现在的问题是，代码不执行任何操作的原因可能是什么？

```
remove_filter( 'the_content', 'wpautop' );
add_filter( 'the_content', 'wpautop' , 99 );
add_filter( 'the_content', 'shortcode_unautop', 100 ); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T15:39:29.127

尝试为您的`remove_filter()`喜欢添加优先级：

`remove_filter("the_content", "wpautop", 30);`

有时您需要的只是为不同的过滤器添加优先级。

我也很好奇`wpautop`你的简码是怎么弄乱的？

我创建了许多简码，而且我从来没有遇到过`wpautop`弄乱我的布局的问题。

# sql - 将 SQL 列移动到新表中的新条目

> ID：15388030
> 
> 赞同：1
> 
> 时间：2013-03-13T14:24:50.510
> 
> 标签：sql, sql-server-2008, sql-update

这是我在 C# 程序中很容易做到的事情，但是在 SQL 中，好吧，我不知道你是否可以。

我有一个表格格式。该表具有“文件名”和“大小”。我想用外键将这些移到一个新表 DigitalFormat 中。

到目前为止，我已经完成了简单的部分：

```
CREATE TABLE FormatDigital
(
FormatDigitalId uniqueidentifier NOT NULL,
Filename nvarchar(MAX) NOT NULL,
Size int NOT NULL
PRIMARY KEY (FormatDigitalId)
);

ALTER TABLE Formats
ADD FormatDigital uniqueidentifier
GO

ALTER TABLE Formats
ADD CONSTRAINT FK_FormatDigital_FormatDigital FOREIGN KEY (FormatDigital)
REFERENCES FormatDigital(FormatDigitalId); 
```

我现在想要获取 Formats 中的所有记录，在 FormatDigital 中创建新条目，并确保 Format.FormatDigitalId 外键指向正确的 ID。

这是您可以在 SQL 中执行的操作吗？或者我应该只是连接一个 C# 程序并且很棒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:30:19.847

只是做类似的事情

```
INSERT INTO FormatDigital
Select Filename, Size from Format 
```

进而

```
UPDATE F
SET
FormatDigital = FD.FormatDigitalID
FROM
Format F
Inner Join
FormatDigital FD
on FD.FileName = F.FileName and FD.Size = F.Size 
```

如果您的文件名和大小不是唯一的，请在第一个查询中添加 DISTINCT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:40:03.350

在创建 FormatDigital 表之后，就像你一样，（除了使用整数主键，设置为身份）

```
 CREATE TABLE FormatDigital
    ( FormatDigitalId integer Identity Primary Key NOT NULL,
      Filename nvarchar(MAX) NOT NULL,
      Size int NOT NULL);

   Insert FormatDigital(FileName, Size)
   Select distinct FileName, Size From Formats
   -- ----------------------------------------
   Update F Set FormatDigital =
        D.FormatDigitalId 
   From Format F Join FormatDigital D 
      On  D.Filename = F.Filename
         And D.Size = F.Size 
```

如果您真的想使用 Guid 作为键，（这有很多缺点。）
稍后添加，然后删除整数键

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:42:48.827

首先，将您更改`FormatDigitalId`为默认使用顺序 GUID：

```
FormatDigitalId uniqueidentifier NOT NULL DEFAULT newsequentialid() 
```

现在您可以使用以下光标。请注意，此代码假定`Formats`具有一个名为的整数主键`Id`- 如果不是这种情况，请更改`@nextId`为正确的类型并更改`Id`为正确的名称：

```
DECLARE @nextId int
DECLARE @filename nvarchar(max)
DECLARE @size int
DECLARE @newId guid

DECLARE loop CURSOR FOR
SELECT Id, Filename, Size
FROM Formats

OPEN loop
FETCH NEXT FROM loop INTO @nextId, @filename, @size

WHILE @@FETCH_STATUS = 0
BEGIN

    INSERT INTO FormatsDigital (Filename, Size) 
            OUTPUT inserted.FormatDigitalID INTO @newId 
            VALUES (@filename, @size)

    UPDATE Formats SET FormatDigitalId = @newID WHERE Id = @nextId

    FETCH NEXT FROM loop INTO @nextId, @filename, @size
END

CLOSE loop
DEALLOCATE loop 
```

# cordova - 当 iTunes 从网络链接启动时，Phonegap 媒体对象停止播放

> ID：15388036
> 
> 赞同：0
> 
> 时间：2013-03-13T14:25:03.973
> 
> 标签：cordova, audio, ios6, uiwebview, itunes

我们有一个 Phonegap 应用程序（目前仅适用于 iPhone），它同时使用 HTML5 Audio 标签（用于流式传输）和 Media 对象（用于播放本地存储的 mp3）。它们都提供到 iTunes 商店的网络链接。

过去的情况是（至少使用 Media 对象），即使由于启动了另一个应用程序或加载了 iTunes 链接，即使应用程序在后台运行，音频也会继续播放。只需在项目配置中向 UIBackgroundModes 添加“音频”即可实现这一点。（信息.plist）

我知道随着 iOS6 的出现，这种情况发生了变化：[UIWebView: HTML5 audio pauses in iOS 6 when app enters background](https://stackoverflow.com/questions/11616001/uiwebview-html5-audio-pauses-in-ios-6-when-app-enters-background/12414719#12414719)

这解决了 HTML5 音频的问题（即，当我使用网络链接启动 iTunes 时，流式音频继续播放），但对于媒体对象 - 当我点击 iTunes 链接时，音频仍然中断）。奇怪的是，当我使用 itms-apps:// 而不是 http:// 时，音频不会中断，但随后它会启动应用商店而不是 iTunes。换句话说，iTunes 是唯一会导致音频中断的应用程序，但*只有*在从 Media 对象播放音频时才会如此。

有谁知道为什么启动 iTunes 可能会切断 Media 对象产生的音频，而其他应用程序却没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:26:42.067

似乎问题仅在通过 Cordova WebView 启动 iTunes 时发生，即使用以下方法之一：

```
url = 'https://itunes.apple.com/gb/album/elliphant-ep/id590384846'

1\. window.location.href = url
2\. window.open(url);
3\. window.open(url , '_self'); 
```

解决方案是让它使用另一个应用程序来启动 iTunes：

```
window.open(url , '_system'); 
```

将在系统浏览器中打开url，系统截取itunes链接，通过系统浏览器启动itunes。

```
w = window.open(url, '_blank'); 
```

将强制 url 在 InAppBrowser 中启动，系统再次拦截 itunes 链接并通过 InAppBrowser 启动 iTunes。这是一个更丑陋的解决方案，因为 InAppBrowser 不会自动关闭，并且当用户返回应用程序时，InAppBrowser 仍然可见。要关闭它，需要调用 w.close()

# ios - 在 iOS 中跟踪触摸

> ID：15388038
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:25:05.097
> 
> 标签：ios, touch, user-input, collectionview

我正在为 iPhone 创建一个单词搜索游戏，但无法确定对游戏的主要组件（单词搜索谜题）采取的最佳方法是什么。

我目前正在使用集合视图来显示拼图。但是，我无法弄清楚如何跟踪用户在集合视图上的触摸以在他们将手指滑过拼图时突出显示字母。

Iv 查看了集合视图的选择和突出显示功能，但它们似乎没有提供我需要的功能。

所以基本上我的问题如下：集合视图是这类游戏（单词搜索）的最佳方法吗？如果是，那么我该如何跟踪用户输入以突出显示并返回他们手指滑过的单元格？如果这不是最好的方法，还有哪些其他选项可以更轻松地跟踪用户在显示等网格上的输入？

我厌倦了发布我正在谈论的内容的图片，但不能如此，所以希望我的问题很清楚，如果没有，请告诉我，我会尝试更具体。

提前感谢您的任何意见和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:56:54.220

解决此问题的一种方法是将平移手势识别器添加到集合视图中。然后，您可以使用 indexPathForItemAtPoint: 和 cellForItemAtIndexPath: 在用户平移时获取正确的单元格。然后，您可以对单个单元格做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:56:57.510

有一个很棒的 iOS SDK，叫做 HeatMap。[你可以在这里](https://heatma.ps/)获得更多信息。我已经阅读了很多关于开发人员和服务的好东西。允许您跟踪选择性视图上的触摸事件。

这是该站点上演示的屏幕截图：

![堆映射](../Images/d76350e5e1a437a9e416cc616fcb8e40.png)

# c++ - 如何将 std::string 写入文件？

> ID：15388041
> 
> 赞同：101
> 
> 时间：2013-03-13T14:25:20.433
> 
> 标签：c++

我想将`std::string`我从用户接受的变量写入文件。我尝试使用该`write()`方法并将其写入文件。但是当我打开文件时，我看到的是框而不是字符串。

该字符串只是一个可变长度的单个单词。`std::string`适合这个还是我应该使用字符数组什么的。

```
ofstream write;
std::string studentName, roll, studentPassword, filename;

public:

void studentRegister()
{
    cout<<"Enter roll number"<<endl;
    cin>>roll;
    cout<<"Enter your name"<<endl;
    cin>>studentName;
    cout<<"Enter password"<<endl;
    cin>>studentPassword;

    filename = roll + ".txt";
    write.open(filename.c_str(), ios::out | ios::binary);

    write.put(ch);
    write.seekp(3, ios::beg);

    write.write((char *)&studentPassword, sizeof(std::string));
    write.close();`
} 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-03-13T14:31:04.627

您当前正在将`string`-object 中的二进制数据写入文件。这个二进制数据可能只包含一个指向实际数据的指针和一个表示字符串长度的整数。

如果您想写入文本文件，最好的方法可能是使用`ofstream`“输出文件流”。它的行为与 完全一样`std::cout`，但输出被写入文件。

以下示例从标准输入读取一个字符串，然后将该字符串写入文件`output.txt`。

```
#include <fstream>
#include <string>
#include <iostream>

int main()
{
    std::string input;
    std::cin >> input;
    std::ofstream out("output.txt");
    out << input;
    out.close();
    return 0;
} 
```

请注意，`out.close()`这里并不是绝对必要的：`ofstream`一旦`out`超出范围， 的解构器就可以为我们处理这个问题。

有关更多信息，请参阅 C++ 参考：[http ://cplusplus.com/reference/fstream/ofstream/ofstream/](http://cplusplus.com/reference/fstream/ofstream/ofstream/)

现在，如果您需要以二进制形式写入文件，您应该使用字符串中的实际数据来执行此操作。获取此数据的最简单方法是使用`string::c_str()`. 所以你可以使用：

```
write.write( studentPassword.c_str(), sizeof(char)*studentPassword.size() ); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-13T14:31:34.407

假设您使用 a`std::ofstream`写入文件，以下代码段将以`std::string`人类可读的形式写入文件：

```
std::ofstream file("filename");
std::string my_string = "Hello text in file\n";
file << my_string; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T21:13:40.477

`ios::binary`从您的 ofstream 中的模式中删除并使用而`studentPassword.c_str()`不是`(char *)&studentPassword`在您的`write.write()`

# php - 如何生成由 CSS 属性定义的图像文件？

> ID：15388042
> 
> 赞同：-2
> 
> 时间：2013-03-13T14:25:22.537
> 
> 标签：php, css, gdlib

有没有办法从一些由 CSS 样式属性定义的 html DIV 创建图像文件（jpeg 或 png）。

例如：

![HTML页面上的div区域](../Images/cf7bedb3f032896416e1ee894693dcf7.png)

```
#canvas_base {
 width: 400px;
 height: 200px;
 background-color: #1155aa;
}

div.text_div{
 font-size: 15px;
 font-family: Tahoma;
 color: #770000;
 line-height: 19px;
 position: absolute;
 top: 76px;
 left: 114px;
 display: inline-block;
 -webkit-transform: rotate(0deg);
} 
img.image_div{
 position: absolute;
 top: 14px;
 left: 61px;
 display: inline-block;
 width: 240px;
 height: 240px;
 -webkit-transform: rotate(0deg);
} 
```

我正在开发一个用户用来设计自己的名片的 Web 应用程序。提交后，他们应该会收到一个 jpeg 模型样本（带有设计的名片） - 如下所示：

![在此处输入图像描述](../Images/98b58679d73107db6352c91cc7ec7827.png)

你能给我一些简短的指导吗（PHP 类的名称、应该使用的技术等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:27:51.527

您应该看一下[PHP 的 GD 库，](http://php.net/manual/en/book.image.php)它使您能够创建图像和添加文本。

[这是](http://alvarotrigo.com/blog/using-php-gd-library-to-write-text-over-images-using-truetype-fonts/)我写的一篇与[我创建的类](https://github.com/alvarotrigo/PHP-Backend/blob/master/textPainter/class.textPainter.php)相关的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:53:11.100

我建议你使用[Phantomjs](http://phantomjs.org/)。这将允许您创建 HTML 文档并将其转换为图像。您可以使用图形库按照您认为合适的方式合成此图像。

# c# - 为什么我的 OpenFileDialog 不起作用？

> ID：15388047
> 
> 赞同：1
> 
> 时间：2013-03-13T14:25:29.603
> 
> 标签：c#, openfiledialog

我正在尝试保存并打开一个包含对象列表的文件。我现在的问题是，当我打开我保存的文件时，什么也没有发生。该程序应该使用一个 dragTo 事件。当我使用该事件时，被拖动的对象被保存在列表“ojl”中这是我的保存和打开方法。

```
 DragTo dragto1 = new DragTo();
    OpenFileDialog openDialog = new OpenFileDialog();
    SaveFileDialog saveDialog = new SaveFileDialog();
    BinaryFormatter form = new BinaryFormatter();

 public void Save()  // Method to save list of objects (Save)
    {
        saveDialog.Filter = "dat files (*.dat)|*.dat|All files (*.*)|*.*";
        if (saveDialog.ShowDialog() == DialogResult.OK)
        {
            FileStream outStr = new FileStream(saveDialog.FileName, FileMode.Create);  //Create new FileStream
            form.Serialize(outStr, dragto1.Ojl);
            outStr.Close();
        }
    }

    public void Open()  // Method for open saved list of objects (Load/Open)
    {
        openDialog.Filter = "dat files (*.dat)|*.dat|All files (*.*)|*.*";
        if (openDialog.ShowDialog() == DialogResult.OK)
        {
            FileStream inStr = new FileStream(openDialog.FileName, FileMode.Open);  //Create new FileStream
            dragto1.Ojl = (List<DrawnObject>)form.Deserialize(inStr);
            inStr.Close();
        } 
```

并且该列表在另一个类中（DragTo）

```
 private List<DrawnObject> ojl = new List<DrawnObject>();
    public List<DrawnObject> Ojl
    {
        get { return ojl; }
        set { ojl = value; }
    } 
```

我还刷新了对象所在的控制器。但是该列表没有从 open 方法中获得新值。文件的格式与它有什么关系（.dat）？

# adobe-illustrator - 更改 EMF 图像文件的分辨率以防止 PowerPoint 中的质量损失

> ID：15388048
> 
> 赞同：5
> 
> 时间：2013-03-13T14:25:33.090
> 
> 标签：adobe-illustrator, .emf

从 Illustrator CS5 [和其他经过测试的版本] 导出 .emf（增强型元文件）矢量以用于 PowerPoint 等 MS 办公文档，可能是一种痛苦。

如果您以合理的大小导出它们，则矢量没有足够的点，最终您的形状和笔划会失去准确性 - 因此它们看起来质量非常低。

如果您在导出前在 Illustrator 中将它们放大，则文件大小保持大致相同，但矢量精度要好得多。但是当您导入 PowerPoint 时，您必须将它们缩小，这令人沮丧。

我搜索了几个小时的解决方案，下载了我能找到的所有元数据编辑器，但最终找到了一种更简单的方法来调整 emf 文件的大小/更改分辨率 - 在下面回答......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:25:33.090

答案就是使用 PowerPoint 重新保存 emf 文件：

*   导出您的 emf 文件，比所需文件大 10 倍
*   拖入 PowerPoint
*   右键单击图像并选择“大小和位置”
*   将比例更改为 10%**，然后在“位置”选项卡上，将其设置为 0cm，距左上角 0cm（这样您就不会在屏幕外丢失它）。然后按确定。
*   右键单击此（现在大小正确）图像，然后选择“另存为图片”
*   另存为 emf - 它的大小合适，而且质量仍然很高

请注意，字体确实会搞砸这个过程。确保列出所有文本，否则您可能会遇到问题。

** 一位评论者发现，他们的 emf 在拖入 PowerPoint 时大约大了 15%（因此将大 11.5 倍而不是 10 倍）。如果您发现这一点，请不要将比例设置为 10%，而是将 PowerPoint 中的宽度更改为应为的精确测量值（以厘米为单位），然后按照上述说明继续操作。任务完成。

# c# - 在给定特定请求类的情况下，如何让结构映射注入特定实例？

> ID：15388053
> 
> 赞同：1
> 
> 时间：2013-03-13T14:25:47.327
> 
> 标签：c#, dependency-injection, structuremap

我以为我已经用对象模型解决了这个问题，但显然我一直不正确地拼凑在一起。“queueName”是父方法中的一个Func，最终只是返回一个字符串。

我正在添加以下依赖项：

```
conf.For<IMessageQueueFactory<TQueue>>()
    .Use<MicrosoftMessageQueueFactory<TQueue>>()
    .Named(instanceName)
    .Ctor<string>("path")
    .Is(context => queueName(context.GetInstance<IProjectSettings>()))
    .Ctor<QueueAccessMode>("queueAccessMode")
    .Is(QueueAccessMode.SendAndReceive)
    .Ctor<int>("readTimeoutMilliseconds")
    .Is(60000);

conf.For<IMessageQueueReader<TQueue>>()
    .Use(context => context.GetInstance<IMessageQueueFactory<TQueue>>().CreateMessageQueueReader())
    .Named(instanceName + ".reader");

conf.For<IMessageQueueWriter<TQueue>>()
    .Use(context => context.GetInstance<IMessageQueueFactory<TQueue>>().CreateMessageQueueWriter())
    .Named(instanceName + ".writer"); 
```

这段代码在不同的队列配置下被调用了大约 6 次，因为大部分`TQueue`是不同的对象。我们有一个情况`TQueue`是一样的（一个是初始生产，另一个是作为其他5个区域的错误处理队列），所以我需要控制注入哪个，这就是实例都命名的原因。

```
conf.For<IMessageQueueReader<CopiedObject>>()
    .ConditionallyUse(a => a.If(c => typeof(FooEngine).IsAssignableFrom(c.ParentType))
        .ThenIt.Is.TheInstanceNamed("queue.copiedobject.writer"));

conf.For<IMessageQueueWriter<CopiedObject>>()
    .ConditionallyUse(a => a.If(c => typeof(BarEngine).IsAssignableFrom(c.ParentType))
        .ThenIt.Is.TheInstanceNamed("queue.copiedobject.reader")); 
```

我在其中拥有的每个 *Engine 对象都有一个 IQueueReader 和一个 IQueueWriter 被注入。我试图只覆盖一个引擎的读者和另一个引擎的作者，让其他一切都是“默认值”。我错过了什么？

编辑：我缺少的一件事显然是我收到的错误消息——其中最重要的是“双向引用”。IMessageQueueReader 或 IMessageQueueWriter 绝对不需要我写的任何东西，因为它们甚至不在同一个程序集中。它是`c.ParentType`需要部分实例化的部分吗？

EDIT2：将覆盖更改为以下代码会停止错误，但 StructureMap 未使用覆盖的对象。它仍然使用默认值：

```
conf.ForConcreteType<FooEngine>().Configure
    .Ctor<IMessageQueueWriter<FetchedEmail>>()
    .Is(i => i.TheInstanceNamed("queue.copiedobject.writer"));

conf.ForConcreteType<BarEngine>().Configure
    .Ctor<IMessageQueueReader<FetchedEmail>>()
    .Is(i => i.TheInstanceNamed("queue.copiedobject.reader")); 
```

# c# - 在 sql 查询中使用会话变量

> ID：15388055
> 
> 赞同：0
> 
> 时间：2013-03-13T14:25:50.833
> 
> 标签：c#, asp.net, sql, session-variables

我有一个用户登录并可以编辑他/其他人的数据的应用程序。但是，如果用户是管理员，他将获得一个网格视图，其中包含他可以编辑的所有用户记录。如果用户不是管理员，他只会得到一个列表视图，他可以在其中编辑自己的数据。

当用户登录页面时，他的用户 ID 本身也存储在 db 中，作为会话变量存储在 Session["ID"] 中。现在我需要用用户的数据填充列表视图。我认为只根据 Session["ID"] 参数查询数据会很好。但我不知道该怎么做。

编辑：

好的，我对此几乎没有代码，因为我不知道该怎么做，但我会发布我所拥有的。首先是我设置用户标识的会话变量的方法：

```
 objda = new SqlDataAdapter("[GetIDOfUser]", objcon);
            objda.SelectCommand.CommandType = CommandType.StoredProcedure;
            objda.SelectCommand.Parameters.Add("@Username", SqlDbType.VarChar).Value = tbUsername.Text;
            objda.SelectCommand.Parameters.Add("@UserPassword", SqlDbType.VarChar).Value = tbPassword.Text;
            String id = (string)objda.SelectCommand.ExecuteScalar();
            Session["ID"] = id; 
```

这是我的标记：

```
 <asp:ListView ID="ListView1" Visible="False" runat="server" DataSourceID="SqlDataSource2"></asp:ListView> 
```

这是我启用列表视图的代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (Session["UserAuthentication"] == null)
            {
                Response.Redirect("Login.aspx");
            }

            if (Session["Benutzerart"].ToString() == Enums.Enumerations.Benutzer.Administrator.ToString())
            {
                GridView1.Visible = true;  

                //Set controls for admin
            }

            if (Session["Benutzerart"].ToString() != Enums.Enumerations.Benutzer.Administrator.ToString())
            {
                ListView1.Visible = true;
                //Set controls for other users
            }
        } 
```

好吧，伙计们，我想通了：

我只是像上面的代码一样制作普通的列表视图。只有数据源在标记中没有 selectcommand 属性。此属性在代码中设置：

```
if (Session["Benutzerart"].ToString() != Enums.Enumerations.Benutzer.Administrator.ToString())
            {
                ListView1.Visible = true;
                SqlDataSource2.SelectCommand = "SELECT [Titel], [Bezeichnung], [Vorname], [Nachname], [Geburtsdatum], [Geburtsort], [Straße], [Nationalität], [Hausnummer], [PLZ], [Ort], [Land], [Mobil], [UrlaubstageGenommen], [UrlaubstageInsgesamt], [Status], [Benutzerart], [Homepage], [Email], [Festnetz], [Fax], [UrlaubstageRest], [Username], [UserPassword] FROM [Benutzer] WHERE [BenutzerID] = '" + Session["ID"] + "'";
            } 
```

数据源标记：

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" ></asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:09:49.920

您正在将列表视图与 SqlDataSource 绑定，使用 sqldatasource SelectParameter

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
                                ConnectionString="<%$ ConnectionStrings:yourConnection %>" 
                                SelectCommand="SELECT * FROM yourTable WHERE userid = @userid">
                                <SelectParameters>
                                    <asp:SessionParameter Name="userid" SessionField="ID" Type="String" />
                                </SelectParameters>
                            </asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:56:46.143

要从 DB 中选择数据，您可以创建 sql 数据源并将其绑定到 ListView：

```
 SqlDataSource ds = new SqlDataSource();

    ds.ConnectionString = yourDBconnectionString;

    ds.SelectCommand = "SELECT * FROM records_table WHERE user_id=@user_id";
    ds.SelectParameters.Add("user_id", Convert.ToInt32(Session["id"]));

    ListView1.DataSource = ds;
    ListView1.DataBind(); 
```

然后将记录字段绑定到 aspx 页面上的 ListView 使用（只是一个示例）：

```
<%# Eval("recort_title") %> 
```

# python - 使用 Selenium Webdriver 和 Python 从 XPath 中提取链接？

> ID：15388057
> 
> 赞同：8
> 
> 时间：2013-03-13T14:25:52.787
> 
> 标签：python, python-2.7, selenium-webdriver

我对 Seleniun WebDriver 和 Python 比较陌生，我的问题可能有点基本。

所以，我有以下 HTML 代码：

```
<a class="wp-first-item" href="admin.php?page=account">Account</a> 
```

我*试图从中提取 href*，作为 XPath 的手段，知道它的 XPath 是`".//*[@id='toplevel_page_menu']/ul/li[2]/a"`.

我怎么做？

```
driver.find_element_by_xpath(".//*[@id='toplevel_page_menu']/ul/li[2]/a").link 
```

或者

```
driver.find_element_by_xpath(".//*[@id='toplevel_page_menu']/ul/li[2]/a").href 
```

似乎不起作用，导致：

```
AttributeError: 'WebElement' object has no attribute 'link' 
```

我期待结果是这样的`"admin.php?page=account"`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-13T14:51:32.383

你可以使用`get_attribute`：

```
element = driver.find_element_by_xpath(".//*[@id='toplevel_page_menu']/ul/li[2]/a")
href = element.get_attribute('href')
print href 
```

通常我使用 Selenium 导航到页面，检索源并使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)解析它：

```
from BeautifulSoup import BeautifulSoup

# On the current page
source = driver.page_source
soup = BeautifulSoup(source)

href = soup('<the tag containing the anchor>',{'id':'toplevel_page_menu'})[0]('ul')[0]('li')[2]('a')[0]['href'] 
```

不幸的是，BeautifulSoup 不支持 xpath，所以上面是您的 xpath 的 BS 表示（据我所知）。

# drupal - 迁移后无法访问 drupal 6 页面

> ID：15388058
> 
> 赞同：0
> 
> 时间：2013-03-13T14:25:57.170
> 
> 标签：drupal, drupal-6

请我刚刚将一个 Drupal 6 站点从运行良好的 Suse Linux 服务器移动到我为它设置了测试域的 Mac lion 服务器。我已成功导入现有数据库，并使用完全相同的数据库名称、用户名、密码和服务器名称配置了 settings.php。当我在服务器上输入测试域的 url 时，我可以看到该站点的索引页面，但是当我单击任何链接时，我收到一条类似这样的错误消息“请求的 URL /content/about 不是在此服务器上找到。”

请问有人知道我该如何解决这个问题吗？我复制了整个站点文件夹和数据库，包括 .htaccess 文件夹。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:33:07.117

首先，尝试使用`?q=`. 例如`site.com/?q=admin`。并禁用清除 URL。

确保您已将 drupal 的默认`.htaccess`文件上传到您的网站根目录。显然是因为你在 MAC 上工作，你忘了上传`.htaccess`文件，因为它默认是隐藏的。

希望这可以帮助。

# javascript - MooTools：如何让对象捕获其嵌套对象中发生的自定义事件？

> ID：15388071
> 
> 赞同：1
> 
> 时间：2013-03-13T14:26:23.363
> 
> 标签：javascript, events, mootools

这是简化的代码：

```
<html>
<head>
    <script type="text/javascript">
        var ParentDiv = new Class ({    
            initialize : function(htmlElement) {
                console.log('debug: parent object created');    
                $$('.childDiv').each(function(childDiv){
                    childDiv = new ChildDiv(childDiv);
                })    
                htmlElement.addEvents({
                    'click': function (){
                        console.log('debug: clicked parent');
                    },    
                    'testEvent' : function(){
                        console.log('debug: complex logic altering inner HTML of the element');
                    }
                })
            }
        });

        function initParent () {
            $$('.parentDiv').each(function(parentDiv){parentDiv = new ParentDiv(parentDiv);})
        }

        var ChildDiv = new Class ({
            initialize : function(htmlElement) {
                console.log('debug: child object created');
                htmlElement.addEvent('click', function (){
                    console.log('debug: clicked child');
                    this.addEvent('testEvent', function(){console.log('debug: grabbed an event in child element, fired by child element')})
                    this.fireEvent('testEvent');
                })
            }

        });

        document.addEvent('domready', function(){
            initParent();
        });

    </script>
</head>

<body>
<div class="parentDiv">
    <div>
        <div>
            <div>
                <div class="childDiv">Clicky Thingy</div>
            </div>
        </div>
    </div>
</div>
</body>
</html> 
```

结果如下：父对象的事件侦听器都没有捕获任何事件，而捕获事件是我想要实现的目标。这种结构的一种可能出现：我们在页面上有一堆控制元素，它们都触发自己的事件，而文档或任何其他类型的容器根据捕获的事件的类型来操作其中的内容。

那么，有没有办法使用自定义事件使“调试：改变元素内部 HTML 的复杂逻辑”出现在控制台框中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:53:21.443

这有很多问题。为了让你的生活更轻松，不要使用这么多嵌套的匿名函数，它们可以工作，但有时很难解开。我把它清理干净并给你做了一个小提琴，这样你就可以看到它是如何工作的。

[http://jsfiddle.net/WQCDd/](http://jsfiddle.net/WQCDd/)

你需要了解事件绑定来做你想做的事：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

另外，你没有在课堂上实现“事件”，所以你不能这样做。fireevent

几乎任何 mootools 类的良好开端都应该是这样的：

```
var ClassName = new Class({
        Implements: [Options, Events],

    options: {

    },

    initialize: function(options){      
        this.setOptions(options);   
    }
}); 
```

# c# - 如何向 Enums 添加扩展方法

> ID：15388072
> 
> 赞同：158
> 
> 时间：2013-03-13T14:26:24.080
> 
> 标签：c#, .net, enums

我有这个枚举代码：

```
enum Duration { Day, Week, Month }; 
```

我可以为此枚举添加扩展方法吗？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-03-13T14:29:12.907

根据这个[网站](http://damieng.com/blog/2012/10/29/8-things-you-probably-didnt-know-about-csharp)：

扩展方法提供了一种为现有类编写方法的方法，您团队中的其他人可能会实际发现和使用这种方法。鉴于枚举和其他任何类一样，您可以扩展它们应该不会太令人惊讶，例如：

```
enum Duration { Day, Week, Month };

static class DurationExtensions 
{
  public static DateTime From(this Duration duration, DateTime dateTime) 
  {
    switch (duration) 
    {
      case Day:   return dateTime.AddDays(1);
      case Week:  return dateTime.AddDays(7);
      case Month: return dateTime.AddMonths(1);
      default:    throw new ArgumentOutOfRangeException("duration");
    }
  }
} 
```

我认为枚举通常不是最好的选择，但至少这可以让你集中一些 switch/if 处理并将它们抽象一点，直到你可以做得更好。请记住检查值也在范围内。

您可以在 Microsft MSDN 上阅读更多[内容](http://msdn.microsoft.com/en-us/library/bb383974.aspx)。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2016-10-16T21:43:54.437

您还可以将扩展方法添加到 Enum 类型而不是 Enum 的实例：

```
/// <summary> Enum Extension Methods </summary>
/// <typeparam name="T"> type of Enum </typeparam>
public class Enum<T> where T : struct, IConvertible
{
    public static int Count
    {
        get
        {
            if (!typeof(T).IsEnum)
                throw new ArgumentException("T must be an enumerated type");

            return Enum.GetNames(typeof(T)).Length;
        }
    }
} 
```

您可以通过执行以下操作调用上面的扩展方法：

```
var result = Enum<Duration>.Count; 
```

这不是真正的扩展方法。它之所以有效，是因为 Enum<> 是与 System.Enum 不同的类型。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2016-06-04T20:39:23.003

当然，您可以说，例如，您想`DescriptionAttribue`在您的`enum`值上使用：

```
using System.ComponentModel;

public enum Duration 
{ 
    [Description("Eight hours")]
    Day,

    [Description("Five days")]
    Week,

    [Description("Twenty-one days")] 
    Month 
} 
```

现在您希望能够执行以下操作：

```
Duration duration = Duration.Week;
var description = duration.GetDescription(); // will return "Five days" 
```

你的扩展方法`GetDescription()`可以写成如下：

```
using System.ComponentModel;
using System.Reflection;

public static string GetDescription(this Enum value)
{
    FieldInfo fieldInfo = value.GetType().GetField(value.ToString());
    if (fieldInfo == null) return null;
    var attribute = (DescriptionAttribute)fieldInfo.GetCustomAttribute(typeof(DescriptionAttribute));
    return attribute.Description;
} 
```

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2016-11-01T10:50:30.280

所有答案都很好，但他们正在谈论将扩展方法添加到特定类型的枚举。

如果你想为所有枚举添加一个方法，比如返回一个当前值的 int 而不是显式转换怎么办？

```
public static class EnumExtensions
{
    public static int ToInt<T>(this T soure) where T : IConvertible//enum
    {
        if (!typeof(T).IsEnum)
            throw new ArgumentException("T must be an enumerated type");

        return (int) (IConvertible) soure;
    }

    //ShawnFeatherly funtion (above answer) but as extention method
    public static int Count<T>(this T soure) where T : IConvertible//enum
    {
        if (!typeof(T).IsEnum)
            throw new ArgumentException("T must be an enumerated type");

        return Enum.GetNames(typeof(T)).Length;
    }
} 
```

背后的诀窍`IConvertible`是它的继承层次结构参见[MDSN](https://msdn.microsoft.com/en-us/library/system.enum(v=vs.110).aspx#Anchor_1)

感谢[ShawnFeatherly 的回答](https://stackoverflow.com/a/40075817/4251431)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-13T14:32:03.307

你可以为任何东西创建一个扩展，甚至`object`（尽管这[不被认为是最佳实践](https://stackoverflow.com/questions/7652118/is-there-a-performance-hit-for-creating-extension-methods-that-operate-off-the-o/7652359#7652359)）。将扩展方法理解为一种`public static`方法。您可以在方法上使用您喜欢的任何参数类型。

```
public static class DurationExtensions
{
  public static int CalculateDistanceBetween(this Duration first, Duration last)
  {
    //Do something here
  }
} 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-05-06T02:22:19.033

**一个简单的解决方法。**

```
public static class EnumExtensions
{
    public static int ToInt(this Enum payLoad) {

        return ( int ) ( IConvertible ) payLoad;

    }
}

int num = YourEnum.AItem.ToInt();
Console.WriteLine("num : ", num); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-13T14:29:04.733

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/bb383974.aspx)。

```
public static class Extensions
{
  public static string SomeMethod(this Duration enumValue)
  {
    //Do something here
    return enumValue.ToString("D"); 
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-07T14:32:53.657

我们刚刚为 c# [https://github.com/simonmau/enum_ext做了一个枚举扩展](https://github.com/simonmau/enum_ext)

它只是 typesafeenum 的一个实现，但它工作得很好，所以我们制作了一个包来分享 - 玩得开心

```
public sealed class Weekday : TypeSafeNameEnum<Weekday, int>
{
    public static readonly Weekday Monday = new Weekday(1, "--Monday--");
    public static readonly Weekday Tuesday = new Weekday(2, "--Tuesday--");
    public static readonly Weekday Wednesday = new Weekday(3, "--Wednesday--");
    ....

    private Weekday(int id, string name) : base(id, name)
    {
    }

    public string AppendName(string input)
    {
        return $"{Name} {input}";
    }
} 
```

我知道这个例子有点没用，但你明白了；）

# html - 如果变量不为空，则显示 div

> ID：15388077
> 
> 赞同：1
> 
> 时间：2013-03-13T14:26:31.430
> 
> 标签：html, show

如果 $row_thumbs['Listino 9'] 中包含的价格不为空，我想用“添加到购物车”按钮显示这个 div。那怎么能做到呢？jQuery？

```
<div id="button" style="padding: 10px 0px 10px 0px;">    
      <form name="eCart1_1_ATC_<?php echo $row_thumbs["Cod."]; ?>" method="POST" action="<?php echo $_SERVER["PHP_SELF"]; ?><?php echo (isset($_SERVER["QUERY_STRING"]) && $_SERVER["QUERY_STRING"] != "")?"?".$_SERVER["QUERY_STRING"]:""; ?>">
      <input type="hidden" name="eCart1_1_ID_Add" value="<?php echo $row_thumbs["Cod."]; ?>" >
      <input type="hidden" name="eCart1_1_Quantity_Add" value="1" size="2" >
      <input type="image" src="images/acquista.png" width="95"  border="0" class="eC_ImageButton" value="Aggiungi al carrello" name="eCart1_1_ATC"></form>     
      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:30:29.927

取消注释第一行，然后将显示 BUTTON，确保脚本在服务器上运行，而且我永远不会创建空格 $row_thumbs['ListinoHERE9']

```
<?php

    //$row_thumbs['Listino_9']='cheater';

    if($row_thumbs['Listino_9']!='') {
        echo '<div class="button"> B U T T O N</div>';
    }
?>
<style type="text/css">
.button {
    padding:5px;
    width:100px;
    background-color:gray;
}
.button:hover {
    cursor:pointer;
    background-color:orange;

}
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

$(document).ready(function(){
    $('.button').click(function(){
        $('.show-div-if-button-gets-clicked').toggle();
    });
});
</script>

<div class="show-div-if-button-gets-clicked" style="display:none;">
    <form name="eCart1_1_ATC_<?php echo $row_thumbs["Cod."]; ?>" method="POST" action="<?php echo $_SERVER["PHP_SELF"]; ?><?php echo (isset($_SERVER["QUERY_STRING"]) && $_SERVER["QUERY_STRING"] != "")?"?".$_SERVER["QUERY_STRING"]:""; ?>">
    <input type="hidden" name="eCart1_1_ID_Add" value="<?php echo $row_thumbs["Cod."]; ?>" >
    <input type="hidden" name="eCart1_1_Quantity_Add" value="1" size="2" >
    <input type="image" src="images/acquista.png" width="95"  border="0" class="eC_ImageButton" value="Aggiungi al carrello" name="eCart1_1_ATC"></form>     
</div> 
```

# javascript - 如何将变量带入 d3 中的 .each 方法的范围

> ID：15388078
> 
> 赞同：1
> 
> 时间：2013-03-13T14:26:31.837
> 
> 标签：javascript, d3.js

我正在使用 d3 并希望将一些变量传递到由 selection.each() 调用运行的函数的范围内。我在一个外部函数中声明变量`e`，`D`然后在该函数中，在声明我的变量之后，在类的所有内容上运行一个匿名函数`.points`。`D`我的问题是，如果不使它们成为全局变量，我似乎无法`e`进入内部函数的范围。有没有一种简单的方法可以将这些传递给内部函数？

```
function endSelection(d){
    var e = selector.extent();
    var D = d;

    mainSVG.selectAll(".points")
        .each(function(d){
            if(d[D.x] >= e[0][0]){
                d3.select(this).call(addClass,["foo"])
                d3.select(this).call(removeClass,["bar"])
            } else {
                d3.select(this).call(addClass,["bar"])
                d3.select(this).call(removeClass,["foo"])
            };
        });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:27:34.563

您不需要在该匿名函数的形式参数中列出“d”。

```
mainSVG.selectAll(".points")
    .each(function(){
        if(d[D.x] >= e[0][0]){ 
```

在外部作用域中声明的变量在内部作用域中**始终**可用，除非它们被相同标识符的更内部声明“遮蔽”。这就是您的代码中发生的事情。

你根本不需要“D”；只需引用“d”。现在，如果 d3 代码将一些有用的东西传递给用作`.each()`迭代器的函数，则声明它，但给它一个不同于“d”的名称：

```
mainSVG.selectAll(".points")
    .each(function(not_d){
        if(not_d[d.x] >= e[0][0]){ 
```

# c# - 如何初始化一个Point数组？

> ID：15388079
> 
> 赞同：3
> 
> 时间：2013-03-13T14:26:32.083
> 
> 标签：c#, arrays, constructor, initialization, point

我需要初始化一个包含三个点的数组。我想像下面这样写，但三个元素只写一次。

```
Point P = new Point { X = 0, Y = 1 };

Point[] P = new Point[3];// <----  ? 
```

如何正确书写？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T14:29:28.257

这是创建 3 个不同点的数组的代码：

```
Point[] points = new Point[] { new Point { X = 0, Y = 1 }, new Point { X = 2, Y = 1 }, new Point { X = 0, Y = 3 } }; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T14:28:25.000

没有真正的速记。三，写三遍即可：

```
Point initial = new Point { X = 0, Y = 1 };
Point[] P = new Point[3] { initial, initial, initial }; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T14:31:27.553

下面的示例您可以`Point`使用创建 10`Enumerable.Range`

```
var points = Enumerable.Range(0, 10)
            .Select(x => new Point {X = 0, Y = 1})
            .ToArray(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-13T14:29:50.313

因为您的问题涉及具有静态坐标的静态固定长度点数组，所以当数组初始化如此简单时，无需在此上下文中使用 LINQ 和循环。

所以你可以这样初始化一个数组：

```
Point[] P = new Point[] 
{ 
    new Point { X = 0, Y = 1 }, 
    new Point { X = 0, Y = 1 }, 
    new Point { X = 0, Y = 1 },
    ...
}; 
```

或使用~~鸭子~~类型推断（感谢[minitech](https://stackoverflow.com/users/707111/minitech)）：

```
var P = new [] 
{ 
    new Point { X = 0, Y = 1 }, 
    new Point { X = 0, Y = 1 }, 
    new Point { X = 0, Y = 1 },
    ...
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-13T14:32:53.873

这是最短的解决方案：

```
Point[] points = Enumerable.Repeat<Point>(new Point(0, 1), 3).ToArray(); 
```

# r - 了解 R 中的热图树状图聚类

> ID：15388082
> 
> 赞同：2
> 
> 时间：2013-03-13T14:26:35.210
> 
> 标签：r, cluster-analysis, heatmap

我将不胜感激有关 R 的热图函数的树状图（Colv，Rowv）的任何信息材料。比如聚类是如何工作的（是欧几里得距离吗？）。你不必发布冗长的解释，我已经很高兴有一些关键词可以让我走上正轨，这样我就可以做一些在线研究。

这是帮助手册的摘录，这让我有点困惑。在这种情况下，“尊敬”是什么意思？它与重新排序有何不同？

> 如果 Rowv 或 Colv 是树状图，则它们被尊重（而不是重新排序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:48:43.843

`Rowv`并`Colv`控制是否应重新排序数据集的行和列以及如何重新排序。

它们的可能值是`TRUE`、`NULL`、`FALSE`、整数向量或树状图对象。

*   在默认模式下`TRUE`，heatmap.2 使用`hclustfun`和`distfun`参数进行聚类。这默认使用欧几里德距离度量来完成链接聚类。然后使用行/列方式对树状图重新排序。`hclustfun`您可以通过为或指定不同的功能来控制它`distfun`。例如，要使用曼哈顿距离而不是欧几里得距离，您可以这样做：

    ```
    heatmap.2(x,...,distfun=function (y) dist(y,method = "manhattan") ) 
    ```

    签出`?dist`和`?hclust`。如果您想了解有关聚类的更多信息，可以从“距离度量”和“聚集方法”开始。

*   如果`Rowv`/`Colv`是`NULL`或`FALSE`则不进行重新排序或聚类，并且按原样绘制矩阵。

*   如果`Rowv`/`Colv`是一个数值向量，则按照 for 计算聚类，`TRUE`并使用提供给`Rowv`/的向量完成树状图的重新排序`Colv`。

*   如果`Rowv`/`Colv`是一个树状图对象，那么这个树状图将用于对矩阵进行重新排序。例如，可以通过以下方式生成树状图对象：

    ```
    rowDistance = dist(x, method = "manhattan")
    rowCluster = hclust(rowDistance, method = "complete")
    rowDend = as.dendrogram(rowCluster)
    rowDend = reorder(rowDend, rowMeans(x)) 
    ```

    它在曼哈顿距离上生成完整的聚类，按行方式排序。您现在可以传递`rowDend`给`Rowv`.

    ```
    heatmap.2(x,...,Rowv = rowDend) 
    ```

    这可能很有用，例如，如果您想以不同的方式对行和列进行聚类，或者使用其他人给您的聚类，或者您想做一些仅通过指定 hclustfun 和 distfun 无法适应的时髦的事情. 这就是“尊重树状图”的含义：使用它来代替 hclustfun 和 distfun 指定的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:29:16.873

要查看它如何准确地处理 Rowv/Colv，您还可以使用`body(heatmap)`它来显示它的源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:33:13.820

从手册：

> distfun ：用于计算行和列之间的距离（相异性）的函数。默认为 dist。
> 
> hclustfun ：当 Rowv 或 Colv 不是树状图时，用于计算层次聚类的函数。默认为 hclust。应该将 distfun 的结果作为参数并返回一个可以应用 as.dendrogram 的对象。

`dist()`默认具有欧式距离和`hclust()`完整的链接方法。

# eclipse - 为什么 web.xml 'context-param' 不能有字符 [children]？

> ID：15388084
> 
> 赞同：7
> 
> 时间：2013-03-13T14:26:38.220
> 
> 标签：eclipse, jakarta-ee

我只是好奇这段`web.xml`代码在`cvc-complex-type.2.3: Element 'context-param' cannot have character [children], because the type's content type is element-only.`Eclipse（juno 版本）`Markers`视图中出现此错误时发生了什么。

这是代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" 
        version="2.5" 
        xmlns="http://java.sun.com/xml/ns/javaee" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

  <display-name>Spring security web application (series)</display-name>

﻿  <!-- to specifically stop trouble with multiple apps on tomcat -->
﻿  <context-param>
﻿  ﻿  <param-name>webAppRootKey</param-name>
﻿  ﻿  <param-value>customauth_root</param-value>
﻿  </context-param>

﻿  <!-- Location of the XML file that defines the root application context
﻿  ﻿  applied by ContextLoaderListener. -->
﻿  <context-param>
﻿  ﻿  <param-name>contextConfigLocation</param-name>
﻿  ﻿  <param-value>
﻿      ﻿  WEB-INF/applicationContext.xml
﻿      ﻿  WEB-INF/applicationContext-security.xml
        </param-value>
﻿  </context-param>

﻿  <!-- Loads the root application context of this web app at startup. The
﻿  ﻿  application context is then available via WebApplicationContextUtils.getWebApplicationContext(servletContext). -->
﻿  <listener>
﻿  ﻿  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
﻿  </listener>

﻿  <listener>
﻿  ﻿  <listener-class>
﻿  ﻿  ﻿  org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
﻿  </listener>

﻿  <filter>
﻿  ﻿  <filter-name>springSecurityFilterChain</filter-name>
﻿  ﻿  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
﻿  </filter>

﻿  <filter-mapping>
﻿  ﻿  <filter-name>springSecurityFilterChain</filter-name>
﻿  ﻿  <url-pattern>/*</url-pattern>
﻿  </filter-mapping>

﻿  <!-- Provides core MVC application controller. See customauth-servlet.xml. -->
﻿  <servlet>
﻿  ﻿  <servlet-name>customauth</servlet-name>
﻿  ﻿  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
﻿  ﻿  <load-on-startup>1</load-on-startup>
﻿  </servlet>

﻿  <servlet-mapping>
﻿  ﻿  <servlet-name>customauth</servlet-name>
﻿  ﻿  <url-pattern>*.htm</url-pattern>
﻿  </servlet-mapping>

﻿  <servlet-mapping>
﻿  ﻿  <servlet-name>customauth</servlet-name>
﻿  ﻿  <url-pattern>*.do</url-pattern>
﻿  </servlet-mapping>

﻿  <welcome-file-list>
﻿  ﻿  <welcome-file>index.jsp</welcome-file>
﻿  </welcome-file-list>

</web-app> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T13:38:09.027

对于初学者，您在 XML 节点参数值中使用了非法字符

不允许在节点内使用“/”、“<”和其他字符，因为这会破坏 XML 文档的解析。

您应该在 XML 节点内围绕您的值使用 CDATA 或 PCDATA 包装器。

例如

```
 <param-value><![CDATA[
﻿      ﻿  WEB-INF/applicationContext.xml
﻿      ﻿  WEB-INF/applicationContext-security.xml]]>
    </param-value> 
```

这就是导致您的问题的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T16:29:03.183

一些不可见字符不被视为 XML 空白，因此会显示错误。通过配置Eclipse“文本编辑器”首选项显示所有空白字符，然后胭脂字符将突出。您还可以使用此工具来验证您的 XML 文件：

```
xmllint --noout --schema http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd XML_FILE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-18T20:06:01.403

此错误仅表示您的 xml 中有**错字**。尝试**格式化**您的 XML，您的拼写错误将脱颖而出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T17:02:28.390

您正在评论结束标签，请再次查看`<filter-mapping>`：

```
 <filter-mapping>
 <filter-name>springSecurityFilterChain</filter-name>
 <url-pattern>      /*</url-pattern> 
 </filter-mapping>` 
```

# c++ - 使用 OpenCV 进行面部特征点检测

> ID：15388089
> 
> 赞同：12
> 
> 时间：2013-03-13T14:26:58.120
> 
> 标签：c++, opencv, image-processing, computer-vision, face-detection

我想检测一张脸上的点，如图所示

![在此处输入图像描述](../Images/10c110e98fc4a5fcd0d9b451e06fbe1a.png)

我正在使用 OpenCV [CascadeClassifier::detectMultiScale](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-detectmultiscale)。
我正在使用 haarcascade_frontalface_alt、haarcascade_eye、haarcascade_mcs_mouth xml 文件。

我对面部检测感到满意，但**对**面部特征点检测不满意。

我希望特征点检测适用于最**远距离为 8 英尺**的图像。

我正在寻找姿势（15 度）和张开嘴的更准确和稳健性，同时不**影响速度。**
我在 i5 处理器上寻找 25fps 的速度。

**任何人都可以为我的问题建议/推荐任何库/开源代码。**

C++ 平台。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T07:17:24.813

尝试 Flandmarks [http://cmp.felk.cvut.cz/~uricamic/flandmark/](http://cmp.felk.cvut.cz/~uricamic/flandmark/) 它提取了 7 个特征点，但您将无法获得上唇和下唇的特征点。

您可以尝试使用 ASM 网格来拟合面部。有几种使用 ASM/AAM 的实现。 [https://code.google.com/p/asmlib-opencv/](https://code.google.com/p/asmlib-opencv/)是一个开源库，内置人脸图像数据集。一定要调查一下。

干杯

# ejb - RAD 的自动生成的 EJB 存根，它们是必要的吗？

> ID：15388092
> 
> 赞同：0
> 
> 时间：2013-03-13T14:27:02.433
> 
> 标签：ejb, build-automation, ibm-rad

最近我参与了一个项目的维护。
这个项目很老了，构建过程都是 IBM RAD 要求的。
我们必须从头开始重建整个项目，但同时我们必须维护这个旧项目。
我想迁移到 CI 系统并使用 Maven 或 Gradle（首选）等软件自动化构建过程。
问题是这个项目正在使用一些 IBM 库来处理 EJB（我在这个领域的知识和经验非常贫乏），并且我有一个*ejbModule*，其中充满了不在 SVN 中并且是自动生成的类来自 RAD（所有存根类）。
存根的目的是什么？
看到这个后，我不太确定是否可以自动化构建过程，有人有这方面的经验吗？

抱歉缺少细节，我不知道我可以添加什么更详细，以防需要更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:10:41.687

我们有一个使用 ejb 2.0 在 RAD 中开发的系统，部署在 websphere 6.1 服务器上

如果您有类似的设置，您可能能够复制我们使用的结构。

我们使用 maven 作为构建工具，使用以下插件；

1.  maven-ejb-插件
2.  was6-maven-插件
3.  xdoclet-maven-插件

我们使用配置文件在任何接口更改时激活存根的生成，并使用 xdoclet 来注释 bean 类，包括 websphere 特定绑定以生成 ejb-jar.xml 和其他 ibm 部署文件。

花了几个星期才让它工作，我们有一个使用 hudson-ci 的自动构建，所以可能需要调整 pom 和插件的设置以适应你的项目。

我们的 pom.xml 样本；

```
<groupId>your.group.id</groupId>
<artifactId>your.artifact.id</artifactId>
<packaging>ejb</packaging>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-ejb-plugin</artifactId>
            <configuration>
                <ejbVersion>2.0</ejbVersion>
                <generateClient>true</generateClient>
                <clientIncludes>
                    <clientInclude>**/interface/**</clientInclude>
                </clientIncludes>
            </configuration>
        </plugin>
    </plugins>
</build>

<profiles>
    <profile>
        <id>xdoclet</id>
        <activation>
            <property>
                <name>xdoclet</name>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>xdoclet-maven-plugin</artifactId>
                    <executions>
                        <execution>
                            <phase>generate-sources</phase>
                            <goals>
                                <goal>xdoclet</goal>
                            </goals>
                            <configuration>
                                <tasks>
                                    <ejbdoclet
                                        destDir="${project.build.sourceDirectory}"
                                        force="true" ejbSpec="2.0"
                                        verbose="true">
                                        <fileset
                                            dir="${project.build.sourceDirectory}">
                                            <include name="**/*Bean.java" />
                                        </fileset>
                                        <packageSubstitution
                                            packages="service" useFirst="true"
                                            substituteWith="interface" />
                                        <homeinterface />
                                        <remoteinterface />
                                        <deploymentdescriptor
                                            displayname="Service Name"
                                            description=""
                                            destDir="${basedir}/src/main/resources/META-INF"
                                            validateXML="true" useIds="true" />
                                        <websphere
                                            destDir="${basedir}/src/main/resources/META-INF"
                                            validateXML="true" />
                                    </ejbdoclet>
                                </tasks>
                           </configuration>
                            </execution>
                </executions>
                </plugin>
    </profile>

    <profile>
        <id>was-ejb</id>
        <activation>
            <property>
                <name>was-ejb</name>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>was6-maven-plugin</artifactId>
                    <executions>
                        <execution>
                            <goals>
                                <goal>ejbdeploy</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <wasHome>C:/Program Files/IBM/WebSphere/AppServer</wasHome>
                    </configuration>
                </plugin>

            </plugins>
    </profile>

</profiles> 
```

# java - IntelliJ Maven Selenium 构建 jar

> ID：15388094
> 
> 赞同：0
> 
> 时间：2013-03-13T14:27:08.720
> 
> 标签：java, maven, selenium, jar, intellij-idea

我正在使用 IntelliJ 12、Java 7、Selenium 2.31.0 和 Maven。我可以很好地从 IDE 中运行我的测试，但是我在尝试创建 jar 文件时遇到了问题。我可以创建 jar 文件，双击 mvn clean 然后双击安装。一切都很好，并且创建了 jar。当我通过命令行运行 jar 时会出现问题。

java -jar xyz-selenium-test-1.0.jar

返回：线程“main”中的异常 java.lang.NoClassDefFoundError: org/openqa/selenium/WebDriver

我已将 selenium-server-standalone-2.31.0.jar 添加为项目设置中的库和项目设置中的依赖模块。我的 pom 文件中一定遗漏了一些东西，但我只是不知道它是什么。我也附上了我的pom文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.xyz.selenium.test</groupId>
<artifactId>xyz-selenium-test</artifactId>
<packaging>jar</packaging>
<version>1.0</version>
<name>xyz-selenium-test</name>
<dependencies>
<dependency>
<groupId>org.seleniumhq.selenium</groupId>
<artifactId>selenium-java</artifactId>
<version>2.31.0</version>
</dependency>
<dependency>
<groupId>org.seleniumhq.selenium</groupId>
<artifactId>selenium-firefox-driver</artifactId>
<version>2.31.0</version>
</dependency>
<dependency>
<groupId>org.seleniumhq.selenium</groupId>
<artifactId>selenium-htmlunit-driver</artifactId>
<version>2.31.0</version>
</dependency>
<dependency>
<groupId>junit</groupId>
<artifactId>junit</artifactId>
<version>4.11</version>
</dependency>
<dependency>
<groupId>selenium-jar</groupId>
<artifactId>selenium-server-standalone-2.31.0.jar</artifactId>
<version>2.31.0</version>
<scope>system</scope>
<systemPath>/usr/local/selenium/selenium-server-standalone-2.31.0.jar</systemPath>
</dependency>
</dependencies>
<dependencyManagement>
<dependencies>
<dependency>
<groupId>org.seleniumhq.selenium</groupId>
<artifactId>selenium-firefox-driver</artifactId>
<version>2.31.0</version>
<exclusions>
<exclusion>
<groupId>org.seleniumhq.selenium</groupId>
<artifactId>selenium-remote-driver</artifactId>
</exclusion>
</exclusions>
</dependency>
</dependencies>
</dependencyManagement>
<build>
<plugins>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-plugin-plugin</artifactId>
<version>3.0</version>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<version>3.0</version>
<configuration>
<source>1.7</source>
<target>1.7</target>
</configuration>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-jar-plugin</artifactId>
<version>2.4</version>
<configuration>
<archive>
<index>true</index>
<manifest>
<addClasspath>true</addClasspath>
<mainClass>com.setup.test.Setup</mainClass>
</manifest>
<manifestEntries>
<mode>development</mode>
<url>${project.url}</url>
<key>value</key>
</manifestEntries>
</archive>
</configuration>
</plugin>
</plugins>
</build>
</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:17:33.857

运行程序时，您必须将依赖项添加到类路径中：

```
java -cp "selenium-java.jar:..." -jar xyz-selenium-test-1.0.jar 
```

Maven 还允许您在类路径中[运行`Main`具有所有必需依赖](http://www.vineetmanohar.com/2009/11/3-ways-to-run-java-main-from-maven/)项的类（请参阅上一个链接中的选项 1）。

否则，您可以创建一个[带有 dependencies 的 Jar](https://stackoverflow.com/a/574650/500478)，其中将包含运行代码所需的一切：

```
<plugin>
  <artifactId>maven-assembly-plugin</artifactId>
  <configuration>
    <archive>
      <manifest>
        <mainClass>com.setup.test.Setup</mainClass>
      </manifest>
    </archive>
    <descriptorRefs>
      <descriptorRef>jar-with-dependencies</descriptorRef>
    </descriptorRefs>
  </configuration>
  <executions>
    <execution>
      <id>make-assembly</id>
      <phase>package</phase>
      <goals>
        <goal>single</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

并运行

```
java -jar xyz-selenium-test-jar-with-dependencies-1.0.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T04:21:14.057

您还可以使用 OneJar 插件

```
 <plugin>
            <groupId>org.dstovall</groupId>
            <artifactId>onejar-maven-plugin</artifactId>
            <version>1.4.4</version>
            <executions>
                <execution>
                    <configuration>
                        <onejarVersion>0.97</onejarVersion>
                        <attachToBuild>true</attachToBuild>
                        <!-- Optional, default is "onejar" -->
                        <classifier>onejar</classifier>
                    </configuration>
                    <goals>
                        <goal>one-jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# ruby - Dashing Dashboard Framework 将标签和值传递给列表小部件

> ID：15388096
> 
> 赞同：2
> 
> 时间：2013-03-13T14:27:13.843
> 
> 标签：ruby, sinatra, dashing

要将数据传递到视图中，通用的“作业”设置如下：

```
SCHEDULER.every '1m', :first_in => 0 do |job|
  send_event('widget_id', { })
end 
```

在视图中，它是这样处理的：

```
<li data-foreach-item="items">
  <span class="label" data-bind="item.label"></span>
  <span class="value" data-bind="item.value"></span>
</li> 
```

我不确定如何传入能够以该标签、值格式读取的哈希（或更广泛地说，集合）。如果有人能指出我正确的方向，我肯定会很感激。我找不到任何有用的文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T12:40:03.040

不过，文档很有欺骗性，你传入一个带有哈希的数组

这是我使用列表所做的

```
buzz  = [{:label=>"Count", :value=>10}, { :label=>"Sort", :value=>30}]
 send_event('buzzwords', { items: buzz }) 
```

以上有效，但如果我执行以下操作：

```
buzz  = [{:label=>"Count", :value=>10}, { :label=>"Sort", :value=>30}]
items = buzz.to_json
send_event('buzzwords', { items: items}) 
```

这不起作用，但文档说`send_event(widget_id, json_formatted_data)` The `item`is json formatted but that doesn't work,而是传入一个带有哈希的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:48:24.777

免责声明：我没有使用 Dashing（虽然它看起来很有趣）。

从文档：

> …<br> send_event('karma', { current: rand(1000) })
> …
> 
> 该作业将每分钟运行一次，并将向所有 data-id 设置为“业力”的小部件发送一个随机数。
> 
> 您使用以下方法发送数据：
> 
> 发送事件（widget_id，json_formatted_data）

因此，对于您的集合，您需要一个哈希数组，每个哈希都有键`label`，并且`value`（因为咖啡脚本中对象的实例方法调用（在 Ruby 中）实际上只是[哈希上的访问器](http://arcturo.github.com/library/coffeescript/03_classes.html)）。

拥有该集合后，将其转换为 JSON，并将其粘贴到带有访问器的对象中`items`，例如

```
require 'json'
items = [{label: "l1", value: "v1"},{label: "l2", value: "v2"},{label: "l3", value: "v3"}]
json_formatted_items = items.to_json
# => "[{\"label\":\"l1\",\"value\":\"v1\"},{\"label\":\"l2\",\"value\":\"v2\"},{\"label\":\"l3\",\"value\":\"v3\"}]"

SCHEDULER.every '1m', :first_in => 0 do |job|
  send_event('widget_id', {items: json_formatted_items })
end 
```

我不知道这是否会奏效，但这就是我认为会奏效的方法。希望能帮助到你。

# elisp - 使用 Emac 的 SMIE 解析带有 optional 的语言；用于语句终止

> ID：15388097
> 
> 赞同：3
> 
> 时间：2013-03-13T14:27:14.460
> 
> 标签：elisp, bnf, smie

我正在使用 SMIE 来解析一种并不总是需要`;`终止语句的语言。如果行尾位于大括号构造 ( `{}`, `()`, `[]`) 之外，并且最后一个非注释标记不是运算符，则`\n`充当语句终止符。否则，如果行尾在大括号结构内或最后一个标记是运算符，则`\n`充当延续。

例如，

```
variable := 172 + 92; 

variable := 172 + 92

variable :=
    172 + 92;

variable :=
    172 + 92

variable := (172 +
    92) 
```

都是有效的陈述。但，

```
variable 
    := 172 + 92 
```

不是。

我如何编码这是 SMIE 的 BNF 语法（或初学者的任何 BNF）？或者，这不可能吗？

我了解如何将其放入词法分析器并`;`酌情添加标记，但如果可能的话，我宁愿将其放入语法中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:15:06.077

不，您不能在 BNF 中对其进行编码（因为 SMIE 只接受无法表达的非常弱的 BNF）。看看我在 Octave 模式下是如何做到的：当分词器`";"`遇到`\n`大括号/括号/括号之外的 a 时，它会返回（您可以使用 进行检查`(zerop (car (syntax-ppss)))`）。

# mysql - 自动递增第二列

> ID：15388098
> 
> 赞同：3
> 
> 时间：2013-03-13T14:27:22.103
> 
> 标签：mysql

我有一个有 2 列的表。ID 列自动递增。我正在尝试使用与列相同的 ID 自动递增用户列`id`，但使用“用户”前缀（例如：user100，其中 ID 也是 100），基本上就像在 stackoverflow 上所做的一样。

```
CREATE TABLE test_table (
     id MEDIUMINT NOT NULL AUTO_INCREMENT,
     user CHAR(30) NOT NULL,
     PRIMARY KEY (id)
) ENGINE=MyISAM; 
```

有没有办法在 1 个查询中做到这一点？而不是插入数据库，然后查询以获取 ID，并将 ID 插入用户列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:46:13.523

使用 BEFORE 触发器：

```
DELIMITER $$
CREATE TRIGGER test_table_trigger
BEFORE INSERT ON test_table
FOR EACH ROW BEGIN
    SET NEW.`user` = CONCAT(NEW.`user`, NEW.id);
END $$
DELIMITER ; 
```

文档：[MySQL 触发器](http://dev.mysql.com/doc/refman/5.6/en/create-trigger.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:33:06.223

你可以做一个触发器

**触发前：**

```
mysql> truncate table test_table;
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter $$
mysql> CREATE TRIGGER test_table_trigger
    -> BEFORE insert ON test_table
    -> FOR EACH ROW
    -> BEGIN
    ->    SET new.user = CONCAT('user', (SELECT AUTO_INCREMENT FROM information_schema.TABLES WHERE TABLE_SCHEMA=DATABASE() AND TABLE_NAME='test_table'));
    -> END $$
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter ;
mysql> INSERT INTO test_table values ();
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> INSERT INTO test_table values ();
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> INSERT INTO test_table values ();
Query OK, 1 row affected, 1 warning (0.00 sec)

mysql> select * FROM test_table;
+----+-------+
| id | user  |
+----+-------+
|  1 | user1 |
|  2 | user2 |
|  3 | user3 |
+----+-------+
3 rows in set (0.00 sec) 
```

上面的内容应该在指定给列后使用自动增量`id`并将其附加到 string `user`。自动增量 ID 是从 中提取的`Information_Schema`，好像这是在一个事务或许多查询中，它可能设置错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:45:40.500

也许你可以试试这个，拿起最后插入的 id 并将字符串与转换后的值连接起来：

```
INSERT INTO test_table (user) VALUES ('user')

UPDATE test_table
SET user = user + CAST(LAST_INSERT_ID() AS VARCHAR)
WHERE id = LAST_INSERT_ID() 
```

# mysql - 更新表 mysql，如果值为 10，则更新另一个表

> ID：15388101
> 
> 赞同：2
> 
> 时间：2013-03-13T14:27:35.477
> 
> 标签：mysql, sql

我遵循 sql 来更新结果表：

```
$mysqli->query("UPDATE results
                SET result_value = IF('$logo_value' - result_tries < 0 OR '$logo_value' - result_tries = 0, 1, '$logo_value' - result_tries)
                WHERE logo_id = '$logo_id'
                AND user_id = '$user_id'
                AND result_value = 0"); 
```

在同一个 sql 命令中是否可以根据 result_value 更新另一个表？

```
if result_value = 10
Update users SET user_hints = user_hints +1 WHERE user_id = '$user_id' 
```

我如何将其合并到上面的 sql 语法中？

我能想到的很长的方法是选择这个值将它放入 php 变量中。而不是基于 php 变量值的另一个更新......但这似乎又长又乏味

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:34:49.203

这是一个长镜头（未经测试），但怎么样：

```
$mysqli->query("UPDATE results, users
                SET result_value = 
                        IF('$logo_value' - results.result_tries < 0 OR 
                           '$logo_value' - results.result_tries = 0, 
                            1, '$logo_value' - result_tries),
                    users.user_hints = 
                        IF(results.result_value >= 10, 
                           users.user_hints + 1, users.user_hints)
                WHERE results.logo_id = '$logo_id'
                AND results.user_id = '$user_id'
                AND results.user_id = users.user_id
                AND results.result_value = 0"); 
```

如果两个表有一些相同的列名，当然，你必须指定哪个表（如`results.user_id`-or- `users.user_id`）

# python - 如何在机器人框架或 python 中将日期格式（如“Wed Mar 13 10:10 EDT 2013” 转换为“2013-03-13 10:10”）

> ID：15388102
> 
> 赞同：1
> 
> 时间：2013-03-13T14:27:36.343
> 
> 标签：python, python-2.7, selenium-webdriver, robotframework

任何人都可以帮我将“Wed Mar 13 10:10 EDT 2013”​​之类的日期格式转换为“2013-03-13 10:10”之类的格式，我尝试过内置的“get time”关键字在这种情况下不起作用，因为 RF 无法识别日期格式，例如 "Wed Mar 13 10:10 EDT 2013" 。那么在 python 中是否有任何可能的解决方案来解决这个问题。请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:36:30.117

```
from dateutil.parser import parse as dateparser
dateparser("Wed Mar 13 10:10 EDT 2013").strftime("%Y-%m-%d %H:%M") 
```

> 出[6]：'2013-03-13 10:10'

# java - 通过套接字（TCP）发送字符和字节

> ID：15388112
> 
> 赞同：0
> 
> 时间：2013-03-13T14:27:57.673
> 
> 标签：java, sockets

我进行了运行良好的多客户端聊天。我正在发送数据`PrintWriter`并使用`BufferedReader`. 就他们的角色而言，一切都很好。但我也想增加发送语音的可能性。在这里我遇到了问题。我已经使用了套接字输入和输出流并使用它们来传输字符。如何解决这个问题并使发送字节也成为可能？不可能创建负责传输字节的第二个流吗？它会让事情变得更容易。如果不是如何以其他方式解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:32:17.117

我不会使用 TCP 进行语音传输，请参阅 TCP 和 UDP 之间的区别。

但是，您可以通过仅发送字节并将所有字符消息转换为字节消息来混合它吗？我不会混合作家流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:40:02.567

在你的情况下，我只需打开另一个套接字。由于您正在考虑使用 VoIP，因此您可能需要考虑使用 UDP 套接字而不是 TCP（假设您使用 TCP 进行聊天）。

但请记住，最终您总是通过套接字发送字节；不管是文本数据还是语音数据；文本字符串也被转换为字节。

# magento - 如何替换整个站点上的块。Magento

> ID：15388115
> 
> 赞同：0
> 
> 时间：2013-03-13T14:28:06.480
> 
> 标签：magento

我创建了我的自定义块，它应该替换现有的 Magento 块。想在整个网站上用我的块替换现有的 Magento 块，独立于页面和现有 Magento 块存在的位置。应该参考什么？其实我有这样的事情：

```
<default>
<reference name="left">
    <remove name="left.newsletter" />
        <block type="newsletter/subscribe" name="newsletter" after="-" template="mynewsletter/subscribe.phtml"/>
</reference>
</default> 
```

我删除了左侧的默认时事通讯，然后创建我的时事通讯块。它可以工作，但仅替换左侧的通讯块。想要在整个网站上使用我的块来代替 left.newsletter，即使该块在其他引用中，如内容或权利等。我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:18:46.983

如果您想`Mage_Newsletter_Block_Subscribe`用自己的 block替换每次出现的 ，请`My_Module_Block_Subscribe`使用类重写。在您的模块**config.xml**中：

```
<global>
    <blocks>
        <newsletter>
            <rewrite>
                <subscribe>My_Module_Block_Subscribe</subscribe>
            </rewrite>
        </newsletter>
    </block>
</global> 
```

但是从您的代码来看，您实际上没有自定义块，只是一个自定义模板。`core_block_tohtml_before`您可以使用事件的观察者更改模板，`setTemplate('mynewsletter/subscribe.phtml')`如果其类为`Mage_Newsletter_Block_Subscribe`.

# java - SSL 连接中的 IllegalStateException，执行 SAML 登录？

> ID：15388116
> 
> 赞同：2
> 
> 时间：2013-03-13T14:28:07.510
> 
> 标签：java, android, ssl, https, saml

我正在实现一小段代码以登录到受 SAML 保护的网站。

我有这段代码：

```
HttpsURLConnection connection = (HttpsURLConnection)url.openConnection(); 
```

通过它我与某些 URL 建立了安全的 SSL 连接。在前两次，使用两个不同的 URL，它可以完美运行，但是当我尝试执行特定请求（准确地说是对 IDP 服务器的 SAMLRequest）时，脚本会出现此错误：

```
[ATTENTION] An error occured: java.lang.IllegalStateException: connection not yet open 
```

我真的不明白发生了什么。在连接到 SP 时，连接良好（我也能够获取此信息，所以我认为 SSL 正在工作`con.getCipherSuite() = TLS_RSA_WITH_AES_128_CBC_SHA`），但随后它停止了。

由于我尝试发出的请求是 SAML 方案中唯一真正重要的请求，因此在我尝试执行的三个请求中，我认为这是一个服务器端问题：

```
Connect to the homepage of the service provider (SP) in order to get JSESSIONID cookie: it works
Connect to the SP login page in order to get the SAML Request: it works
Connect to the IDP in order to send (via GET) the SAML Request: ERROR. 
```

我怎样才能摆脱这个问题，并确保连接是安全的？我*非常*需要避免 MINM 攻击，因为脚本将在需要强大安全级别的 Android 应用程序中实现......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:10:58.487

对不起，我可能有点跑题了！您是否为此使用 Google 应用引擎？由于谷歌应用引擎不支持 HttpsUrlConnection。[请在这里](http://esxx.blogspot.fr/2009/06/using-apaches-httpclient-on-google-app.html)阅读更多

# c++ - 表示盒子的推荐类是什么？

> ID：15388117
> 
> 赞同：5
> 
> 时间：2013-03-13T14:28:08.637
> 
> 标签：c++, 3d, ogre

在 Ogre 中，有一个类*看起来*`Ogre::Box`可以支持 3D 盒子。但是，此类使用数据类型来存储其坐标。由于[本质上是一个无符号整数](https://stackoverflow.com/a/2550799/521032)，它不能处理负数，因此不可能将它用于任何实际几何。我知道我可以只保留一些数字或自己发明一个自制盒子类，但是通常的食人魔方法是什么？此外，我不在乎盒子是使用整数还是浮点数进行存储，它只是发生了，因此对于手头的任务并不重要。*`size_t`[`size_t`](https://stackoverflow.com/a/2550799/521032)*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:23:28.670

你可以看看[Ogre::AxisAlignedBox](http://www.ogre3d.org/docs/api/html/classOgre_1_1AxisAlignedBox.html)。如果您正在寻找将立方体表示为网格的类，您将找不到它。但是，有一个方便的类可以`Ogre::Mesh`为你创建一个：[Ogre::PrefabFactory](http://www.ogre3d.org/docs/api/html/classOgre_1_1PrefabFactory.html)*

# angularjs - 什么样的事情会导致 ngSanitize 抛出 Parse Error

> ID：15388125
> 
> 赞同：0
> 
> 时间：2013-03-13T14:28:20.363
> 
> 标签：angularjs

我有一个 AngularJS 应用程序，它解析主要来自电子邮件的 HTML。在某些情况下 data-bind-html 会抛出 Parse Error 但并非所有情况。我一直无法确定原因。

有谁知道可能导致错误的某些类型的标记或语法？

这是一个文件的示例，它会绊倒它：

> ，
> 
> 我收到以下错误消息...：
> 
> -------------------------------------------------- ---------------------- 服务器遇到了阻止它的意外情况
> 
> ## 满足请求。
> 
> HTTP_Status = 500（内部服务器错误）
> 
> 网址 =
> 
> ----------------------------------------- 请求标头 -------- ---------------------------------- POST /ss/servlet/FooServlet/ HTTP/1.1 接受：接受：*/*主机：mydomain.org 内容长度：141 用户代理：FooBar/2.1.94 编译指示：无缓存缓存控制：无缓存内容类型：应用程序/x-www-form-urlencoded；charset="utf-8" 连接：保持活动 Cookie：BIGipServerpool_cookie_apps_ss_8188=rd860o00000000000000000000ffff0a0ad0aco8188；JSESSIONID=5215F941A173B6127E9A95B3E99E3A74
> 
> ----------------------------------------- 响应头 -------- ---------------------------------- HTTP/1.1 500 内部服务器错误服务器：Apache-Coyote/1.1 Set- Cookie：JSESSIONID=A9B7C98E5359D961DC8958F87CCCF49E；Path=/ss Content-Disposition：附件；filename="spreadsheet.csv" 内容描述：电子表格.csv 内容传输编码：二进制内容类型：应用程序/csv；charset=ISO-8859-1 传输编码：分块日期：2013 年 3 月 6 日，星期三 18：格林威治标准时间 46:19 连接：关闭
> 
> -------------...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:30:59.343

电子邮件可能包含大量任意编码和无效的 HTML，例如`<email@domain.com>`. 为了消除解析错误，我实现了自己的过滤器，它在通过 ngSanitize/bind-html 之前生效。

`ng-bind-html="obj.emailContent | sanitizeEmail"`

```
myModule.filter('sanitizeEmail', function() {
  return function(input) {
    return input.replace(/<[\w-]*\.[\w-]*>/g, '').replace(/<[\w\.\$-]+[\:@].*>/g, '');
  };
}); 
```

# mongodb - Mongodb排序内部数组

> ID：15388127
> 
> 赞同：38
> 
> 时间：2013-03-13T14:28:33.057
> 
> 标签：mongodb, aggregation-framework

我一直在寻找一段时间，似乎无法对内部数组进行排序并将其保存在我目前正在使用的文档中。

```
{
    "service": {
        "apps": {
            "updates": [
              {
                "n" : 1
                "date": ISODate("2012-03-10T16:15:00Z")
              },
              {
                "n" : 2
                "date": ISODate("2012-01-10T16:15:00Z")
              },
              {
                "n" : 5
                "date": ISODate("2012-07-10T16:15:00Z")
              }
            ]
        }
     }
 } 
```

所以我想保留要作为服务返回的项目，但要对我的更新数组进行排序。到目前为止，我拥有的外壳：

```
db.servers.aggregate(
        {$unwind:'$service'},
        {$project:{'service.apps':1}},
        {$unwind:'$service.apps'}, 
        {$project: {'service.apps.updates':1}}, 
        {$sort:{'service.apps.updates.date':1}}); 
```

有人认为他们可以在这方面提供帮助吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-13T15:09:43.450

您可以通过`$unwind`ing`updates`数组、按 对结果文档进行排序`date`，然后使用排序顺序将`$group`它们重新组合在一起。`_id`

```
db.servers.aggregate(
    {$unwind: '$service.apps.updates'}, 
    {$sort: {'service.apps.updates.date': 1}}, 
    {$group: {_id: '$_id', 'updates': {$push: '$service.apps.updates'}}}, 
    {$project: {'service.apps.updates': '$updates'}}) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2020-03-31T18:14:14.023

从 开始`Mongo 4.4`，[`$function`](https://docs.mongodb.com/master/reference/operator/aggregation/function/index.html)聚合运算符允许应用自定义 javascript 函数来实现 MongoDB 查询语言不支持的行为。

例如，为了按其中一个字段对对象数组进行排序：

```
// {
//   "service" : { "apps" : { "updates" : [
//     { "n" : 1, "date" : ISODate("2012-03-10T16:15:00Z") },
//     { "n" : 2, "date" : ISODate("2012-01-10T16:15:00Z") },
//     { "n" : 5, "date" : ISODate("2012-07-10T16:15:00Z") }
//   ]}}
// }
db.collection.aggregate(
  { $set: {
    { "service.apps.updates":
      { $function: {
          body: function(updates) {
            updates.sort((a, b) => a.date - b.date);
            return updates;
          },
          args: ["$service.apps.updates"],
          lang: "js"
      }}
    }
  }
)
// {
//   "service" : { "apps" : { "updates" : [
//     { "n" : 2, "date" : ISODate("2012-01-10T16:15:00Z") },
//     { "n" : 1, "date" : ISODate("2012-03-10T16:15:00Z") },
//     { "n" : 5, "date" : ISODate("2012-07-10T16:15:00Z") }
//   ]}}
// } 
```

* * *

这会在适当的位置修改数组，而无需应用昂贵`$unwind`的`$sort`和`$group`阶段的组合。

`$function`接受3个参数：

*   `body`，这是要应用的函数，其参数是要修改的数组。
*   `args`，其中包含`body`函数作为参数的记录中的字段。在我们的例子`"$service.apps.updates"`中。
*   `lang`，这`body`是编写函数的语言。仅`js`当前可用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-12-24T17:55:22.903

从`Mongo 5.2`^([发布计划](https://docs.mongodb.com/upcoming/release-notes/5.2/))开始，这是新[`$sortArray`](https://docs.mongodb.com/upcoming/reference/operator/aggregation/sortArray/#mongodb-expression-exp.-sortArray)聚合运算符的确切用例：

```
// {
//   service: { apps: { updates: [
//     { n: 1, date: ISODate("2012-03-10") },
//     { n: 2, date: ISODate("2012-01-10") },
//     { n: 5, date: ISODate("2012-07-10") }
//   ]}}
// }
db.collection.aggregate([
  { $set: {
    "service.apps.updates": {
      $sortArray: {
        input: "$service.apps.updates",
        sortBy: { date: 1 }
      }
    }
  }}
])
// {
//   service: { apps: { updates: [
//     { n: 2, date: ISODate("2012-01-10") },
//     { n: 1, date: ISODate("2012-03-10") },
//     { n: 5, date: ISODate("2012-07-10") }
//   ]}}
// } 
```

* * *

这：

*   排序 ( `$sortArray`)`service.apps.updates`数组 ( `input: "$service.apps.updates"`)
*   通过对`date`s ( `sortBy: { date: 1 }`)进行排序
*   无需应用昂贵`$unwind`的`$sort`和`$group`阶段的组合

# uiview - 根 UIView 中的子 UIView 因某种原因被压扁，即使在 XIB 中明确设置了宽度

> ID：15388131
> 
> 赞同：0
> 
> 时间：2013-03-13T14:28:42.157
> 
> 标签：uiview, ios6

我有一个简单的应用程序，它具有以下层次结构：

*   Root UIView (blank) - 绑定到根视图控制器
*   带有一大堆东西的子 UIView - 绑定到根视图控制器在 viewDidLoad 时插入的子视图控制器。

在 XIBs（父子元素的独立 xib）中，两个 UIViews 具有完全相同的尺寸 (1004x768)。但是，由于某种原因，当它启动时，根 UIView 和子 UIView 之间的右侧有一个间隙。我通过导入 QuartzCore 并让 UIViews 在它周围绘制彩色边框来证明这一点。请看我附上的图表。有谁知道为什么会这样？我什至尝试过使用约束优先级（使孩子的约束抵抗优先级更高），但它仍然不起作用。

将不胜感激任何提示放在正确的方向。![在此处输入图像描述](../Images/1d135152af33d8b750d2477fa215d6df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T20:02:40.127

根 UIView 始终由窗口管理以具有全屏大小：

从 UIViewController 类参考的“视图管理”部分：

> 如果视图控制器由窗口对象拥有，则它充当窗口的根视图控制器。视图控制器的根视图作为窗口的子视图添加并调整大小以填充窗口。

# sql-server-2008 - 更新脚本以使用查找表进行搜索和替换

> ID：15388134
> 
> 赞同：0
> 
> 时间：2013-03-13T14:28:47.610
> 
> 标签：sql-server-2008, tsql, sql-update

我有一个包含楼层名称的表格，我需要用数值替换它。我正在手动构建一个查找表。不知道下一步该怎么做...有更好的方法吗？

截图：http: [//i49.tinypic.com/2mc921e.png](http://i49.tinypic.com/2mc921e.png)

```
BEGIN TRY
BEGIN TRANSACTION

-- lookup table
DECLARE @FloorLkup TABLE(
    FloorName VARCHAR(MAX) NOT NULL,
    FloorNum INT NOT NULL
);

INSERT INTO @FloorLkup SELECT 'First floor', '1'
INSERT INTO @FloorLkup SELECT 'First', '1'
INSERT INTO @FloorLkup SELECT 'Second floor', '2'
INSERT INTO @FloorLkup SELECT 'Second', '2'
-- etc.
INSERT INTO @FloorLkup SELECT 'Ninth', '9'

print 'Done'
COMMIT TRANSACTION
END TRY
BEGIN CATCH
print 'Did not work'
ROLLBACK
END CATCH 
```

另外，问题是：某些楼层被命名为`First`and`First floor`等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:42:01.227

```
-- populate your @FloorLkup table here

-- now add a new numeric column:
ALTER TABLE dbo.UnknownTableName
  ADD FloorNumber INT;

-- now update based on matches in @FloorLkup
UPDATE t
  SET FloorNumber = fl.FloorNum
  FROM dbo.UnknownTableName AS t
  INNER JOIN @FloorLkup AS fl
  ON t.FloorName = fl.FloorName;

-- check your work
SELECT * FROM dbo.UnknownTableName;

-- if it's correct:
ALTER TABLE dbo.UnknownTableName
  DROP COLUMN FloorName; 
```

您必须`UnknownTableName`用目标表的名称替换，因为您忘了告诉我们。您可能还需要删除任何约束或对`FloorName`列的其他显式引用，然后才能删除它。

也请不要害怕元音或更长的名字。`Lookup`并且`FloorNumber`实际上比*and*`Lkup`更容易输入`FloorNum`。

# ruby - Ruby Socket.pair：“使用了与请求的协议不兼容的地址”

> ID：15388135
> 
> 赞同：0
> 
> 时间：2013-03-13T14:28:50.790
> 
> 标签：ruby

只是出于我自己的好奇心，我一直在研究各种 Ruby 标准库。'socket' 库有一个创建套接字对的方法。当我尝试创建一个时，我收到以下错误消息：

```
Errno::EAFNOSUPPORT: An address incompatible with the requested protocol was used. - socketpair(2) 
```

我使用的代码直接来自[文档](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/socket/rdoc/Socket.html#method-c-pair)：

```
s1, s2 = Socket.pair(:UNIX, :DGRAM, 0)
s1.send "a", 0
s1.send "b", 0
p s2.recv(10) #=> "a"
p s2.recv(10) #=> "b" 
```

关于可能导致这种情况的任何想法？

注意：我在 Windows 机器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:32:35.600

由于您使用的是 Windows，因此问题出在这一行：

```
Socket.pair(:UNIX, :DGRAM, 0)  #=> :UNIT refers to UNIX stream socket 
```

试试这个：

```
Socket.pair(:INET, :STREAM, 0) # TCP socket 
```

# optimization - SOLR 一个集合（核心）VS。许多

> ID：15388140
> 
> 赞同：4
> 
> 时间：2013-03-13T14:29:03.533
> 
> 标签：optimization, solr, solaris

我有来自 MySQL 数据库的多个实体，它们将在 SOLR 中被索引。

为了获得最佳性能结果（查询时间），最好的方法是什么？

*   使用带有实体类型字段的单个 SOLR 集合（核心）
*   或者为每个实体类型拥有一个集合（核心）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:31:52.343

我会添加更多参数供您考虑（主要是不鼓励每个实体使用一个核心方法，但不仅仅是出于您特别要求的性能原因）

1.  更多的核心意味着更多的端点。您的应用程序需要了解这一点。您可能会发现跨内核运行查询很困难。例如，如果您通过一个通用属性（比如名称）进行搜索，您将不得不对每个核心运行多个查询并聚合结果。这将错过您在查询单个核心时开箱即用的相关性方面。

2.  考虑向您的数据库发出最少的请求。N+1 jdbc 连接大大减慢了索引速度。相反，尝试在视图中聚合您的结果，如果您可以触发单个查询，您的索引将更快。

3.  跨核心将无法对公共属性进行范围查询。例如 - 如果您有存储在不同内核中的书籍和音乐 Cd 的价格，您无法获得 X 和 Y 价格范围之间的所有产品。

4.  刻面功能也将受到影响。

因此，虽然您可能会通过以每个实体 1 个核心的形式进行并行化来获得一些索引时间性能提升，但我认为这可能会减少您可以从中受益的功能。

# web-services - 为 TigerLogic D3 DB 应用程序创建浏览器前端

> ID：15388146
> 
> 赞同：1
> 
> 时间：2013-03-13T14:29:17.527
> 
> 标签：web-services, web-applications, browser, multivalue-database, pick

我有一个有趣的难题。我一直在寻找最合适的过程来为在 TigerLogic/Pick D3 环境中构建的现有多用户应用程序创建“浏览器前端”。我的研究表明有很多方法可以做到这一点。但我正在努力决定哪种方法最好或从哪里开始。我已经“玩过”一些技术，但需要对其中一种技术做出承诺才能开始。

这些方法包括：

*   使用 MVS Toolkit 创建复杂的 Web 服务；并从头开始或使用 maven/wsimport 从 WSDL 设计客户端。测试表明，这个过程比最初的简单 WSDL 还要多。
*   开发利用 MVSPJavaAPI 的基于 Java 的 Web 应用程序 - 我不是 JAVA 开发人员，所以这意味着学习一门新语言。开发很可能在 Eclipse 中进行。
*   使用 TigerLogics FlashCONNECT - 导致客户额外支出因此不可取 - 或多或少被排除
    在外。

还有 .NET 选项——但基于需要可移植性，我已将其排除在外。

我的问题是，有没有其他人做过类似的事情，你能分享你的经验吗？我的第一个任务是构建一个 Web 应用程序，它可以在我可以自定义的浏览器中可靠地为我提供 D3 TCL 提示。

我不确定这里是否有明确的答案，但希望得到人们的想法，并将最有用的标记为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:24:12.443

您选择的路径在某种程度上取决于您现有的技能组合以及这是否符合您的便携性需求。由于不知道在链的哪个部分需要可移植性，因此很难为您的问题提供具体答案。

然而，可以使用 .NET 开发一个可以在 Linux 或 Windows 上运行的 Web 浏览器前端，所以我认为这里没有可移植性问题。您的 Web 服务器必须基于 Windows，但无论 D3 在服务器端运行在 Linux 还是 Windows 上，或者客户端桌面运行在 Linux 还是 Windows 上都无关紧要。

您可以尝试 TigerLogics MVSP .NET API，但我不知道它是否有能力根据您的需求进行交付。我相信您可能会发现[Bluefinity 的 mv.NET](http://www.bluefinity.com/site/mvnet.html)可以满足您的需求。在我看来，这是 MultiValue 市场上用于实现您心目中的目标的领先产品。这当然意味着花钱。为此，您将获得一套非常强大的工具。此外，在时间、精力和潜在复杂性方面，投资一个好的工具的成本最终可能会小于尝试在**不**花费任何额外资金的情况下零敲碎打的成本。我相信 Flashconnect 也能完成这项工作。您将不得不权衡不同选项的成本，以找出在技术和财务上都适合您的选项。

不知道您的技能组合中是否有 .NET，我不知道 .NET 选项对您来说是否更容易。然而，这在技术上是可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T09:51:01.297

我建议使用 Rocket 的 D3（以前称为 TigerLogic D3）.NET API 并创建一个 Web API RESTful 服务，您可以在任何其他 Web 技术中使用 JavaScript 使用该服务，如果您需要从 D3 子例程调用（以防万一）然后使用MVS 工具包。

但要求是 D3 9.0 或更高版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T18:37:27.790

我已经使用了所有描述的技术，以及更多与 D3 交互的技术。我同意@Glenn 并将添加...我了解您正在远离.NET。没关系，你不需要它。但考虑到大多数 LAMP 实现将 DBMS 服务器与 Web 服务器分开。该拓扑在层之间引入了短暂的延迟，但在您想要使用多个 Web 服务器或多个数据库时将它们解耦 - 即使使用 D3 / MV 也是一种常见的拓扑。

我有一个客户端，我们有一个基于 Linux 的 Java/Grails 前端，所有数据查询都通过一个从应用程序逻辑中抽象出来的优雅的数据提供者类进行过滤。它使用我用 Java 编写的 Web 服务调用，调用 .NET Web 服务。该服务很容易生成/修改，就像来自 WSDL 的客户端一样。从那里 IIS 通过 mv.NET 向 D3 进行入站查询，此时 D3 DBMS 是在 Linux 还是 Windows 中并不重要。我的 Web 服务可以很容易地在带有 Java 的 Linux 中使用，但它会缺少池机制 - 见下文。

如果您想要所有 Linux，那么您可以使用 MVSP Java 库。TigerLogic（现在被 Rocket Software 收购）几个月前致力于 MVSP 的 PHP 绑定。我的一个客户没有等待，而是围绕 mv.NET 创建了一个 PHP 包装器，尽管 MVSP 很简单。因此，生成的应用程序本质上是 LAMP，但具有 M = 多值。我也写过这样的代码——我们可以用任何语言编写一个封装器，它公开有用的 API 并抽象连接方法和操作系统依赖项。换句话说，我们想要使用什么语言或涉及什么操作系统并不重要。这部分相当琐碎，以后可能会更改。最好专注于应用程序而不是通信。

您也可以离开菜单，可以说，围绕操作系统级 d3tcl 命令创建自己的 Java/PHP 包装器，该命令是 d3 可执行文件的脚本/包装器。这允许您自己打开连接并传入命令。

无论您选择什么选项，您都需要考虑打开和关闭 DBMS 连接是一个缓慢的过程。您不想围绕每个数据请求编写登录脚本。您确实希望打开一个连接并保持该连接持久打开，而您的客户端代码会根据需要访问和释放该持久连接。这就是我们喜欢 mv.NET 和 FlashCONNECT 的原因。使用 MVSP 和其他机制，您需要创建自己的持久性模型。您还需要管理一个连接资源池——当您同时获得 10 个查询时会发生什么，或者只有一个短一个又一个长的查询？您不想备份查询，不想拒绝或超时连接，也不想为每个客户端启动连接。您确实需要适当数量的 DBMS 会话等待入站连接。MV。

就我个人而言，我会回避 FlashCONNECT。我在那里进行了最初的开发和测试以及多年的最终用户实施。它不像其他选项那样广泛使用，对于那些不熟悉其他选项的人来说，它更像是一种工具。如果您在谈论 Java，那么您可能不倾向于使用 FlashCONNECT。也就是说，如果您的开发人员不熟悉 D3 之外的任何内容，那么 FlashCONNECT 对他们来说是一个不错的服务器端工具，而其他人则专注于使用其他技术的客户端。每个人都应该使用他们最好的技能。

最后，（已经？）如果有人不熟悉外部技术，并且更熟悉 D3，那么存在其他选项，例如 DesignBAIS 和 Viságe，主要是消除通信负担，并允许开发人员处理客户端功能并返回 - BASIC 中的结束规则。

[我在博客](http://Nebula-RnD.com/blog)上讨论了所有这些主题以及移动和电话。

高温高压

# javascript - 如何通过在 html 页面末尾附加 var 将一些变量插入到 html 中

> ID：15388149
> 
> 赞同：0
> 
> 时间：2013-03-13T14:29:25.677
> 
> 标签：javascript, html

我正在使用微控制器，并通过 html 页面与它进行通信。

这些页面作为一些常量存储在微控制器中，并被发送到 PC 以供显示。

我想在发送到 PC 的 html 页面的末尾附加我的变量数据，以在页面中间的框中显示它们。

在此之前，我被迫在框中的 html 中找到变量的确切位置。

有没有办法在页面的中间框中显示附加在 html 末尾的数据？

```
<!DOCTYPE html>
<html>
<head>
<title>SAAT Co</title>
<h1><center><font color="red"> SAAT Co </font></center></h1>\r\n<h1><fontcolor="blue">   Ethernet Display T24M08 </font></h1>\r\n
<script>
<--
function validateForm()
{
var x=document.forms["myForm"]["fname"].value;
if (x==null || x=="")
  {
  alert("First name must be filled out");
  return false;
  }
}
-->
</script>
</head>

<body>

   <form name="myForm" action="http://192.168.1.250" onsubmit="return validateForm()" method="post">
<table>
  <tr>
    <td>Firmware Version :</td>
    <td><input type="text" name="dev-info" value=" " ></td>

  </tr>
  <tr>
    <td>MAC Adress :</td>
    <td><input type="text" name="mac-addr"></td>

  </tr>
  <tr>
    <td>IP Adress :</td>
    <td><input type="text" name="ip-addr"></td>

  </tr>
</table>
<input type="submit" value="Apply/Reboot">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:36:19.877

如果我对您的理解正确，您可以通过将您的值分配给相应的文本框来完成您想要做的事情。下面的示例通过为您的文本框提供一个 ID，然后使用 javascript 将您的值插入该文本框来实现这一点。

```
 <td>MAC Adress :</td>
      <td><input type="text" id='MacAddy' name="mac-addr"></td>
      ...
      </form>
   </body>
</html>

<script>
    document.getElementById('MacAddy').value = "your_value_here";
</script> 
```

可以按照您在帖子中描述的方式将 javascript 附加到文档中。

# ios - + [NSString stringWithContentsOfFile:] 性能

> ID：15388155
> 
> 赞同：3
> 
> 时间：2013-03-13T14:29:36.787
> 
> 标签：ios, objective-c, performance, io, nsstring

我需要在 iOS 中加载文件，现在我使用`+ [NSString stringWithContentsOfFile:]`. 这些文件大多是 500kb 到 5mb。我加载一个大约。4mb 大文件，仪器和秒表告诉我加载这个文件需要 1.5 秒。在我看来它有点慢，有没有办法让字符串更快？

编辑：

我尝试了一些事情，现在注意到，创建 NSString 是我的问题，它需要 97% 的时间，而不是从磁盘真正加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:10:15.820

如果您知道或可以确定编码（您现在使用的 API 是基本的），您可以将其视为`char`缓冲区（以编码感知的方式）。

我将首先使用内存映射数据打开它（`mmap`您也可以使用`NSData`）。`madvise`可用于提示您将如何访问该文件。

如果内存映射 I/O 消耗了太多内存供您使用，您应该下降到增量读取，例如 CI/O 设施 - `fopen`、`fread`等。这通常需要比内存映射数据更多的 I/O 事件（可能很多较慢，具体取决于访问数据的方式）。

在这两种情况下，您都会将该字符串视为 C 字符串——不要`NSString`在打开时简单地将整个文件转换为一个。

Foundation 有很多技巧，因此请确保这实际上可以提高您特定用例的性能。

如果这些解决方案对您来说太“核心”，只需考虑改用较小的文件（划分现有文件）。

# php - 使用哈希表访问 C 中的 PHP 变量 - 指针间接级别的更改

> ID：15388156
> 
> 赞同：2
> 
> 时间：2013-03-13T14:19:58.830
> 
> 标签：php, c++, c

我指的是 Sara Golemon “扩展和嵌入 PHP”。我对以下代码段感到困惑

```
zval **fooval;    
if (zend_hash_find(EG(active_symbol_table), "foo", sizeof("foo"), (void**)&fooval) == SUCCESS) 
```

为什么`&fooval`将评估为 a 的is 转换`zval***`为 a `void**` ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:35:06.323

该函数正在分配一个指向指针值的指针。它不关心它分配的是什么类型的指针，只是它正在获取一个指针。`void`因此，或多或少意味着“通用”。

我承认这是一个严重的过度简化，但与在 PHP 中使用它是一样的：

```
function foo(stdClass $bar){
   // do something
}

class Bat extends stdClass{

}
$bat = new Bat();
foo((stdClass)$bat); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:50:45.080

可以使用以下代码段解释更改指针间接级别的混淆。

在这种情况下 ipNew 是单级指针，但使用（单或链的）间接运算符，您可以使用它来检索值，直到 '*' 右侧的值是地址

```
#include<iostream>
using namespace std;
int main()
{

int i = 1;
int* ip = &i;
int** ipp = &ip;

cout<<"i = "<<i<<"\nip =  "<<ip<<"\nipp = "<<ipp<<"\n*ip = "<<(*ip)<<"\n**ipp = "<<(**ipp);

int * ipNew = (int *)&ip;
cout<<"\n\ni="<<i<<"\nip="<<ip<<"\nipp="<<ipp<<"\n"<<"*ip="<<(*ip)<<"\n**ipp="<<(**ipp)<<endl<<"\nipNew="<<ipNew<<"\n*ipNew="<<(int *)*ipNew<<"\n**ipNew="<<*((int*)*ipNew)<<endl;

return 0;
} 
```

# ruby - 从 cli ruby 脚本打开邮件客户端，如 mailto 链接

> ID：15388159
> 
> 赞同：0
> 
> 时间：2013-03-13T14:29:44.550
> 
> 标签：ruby, email, mailto

我编写了一个 ruby​​ cli 脚本，它采用 CSV 并基于所述 CSV 生成 PDF 报告。我对 Ruby 还很陌生，所以虽然它可能不是最好的代码，但我为我所做的感到非常自豪。

无论如何，我现在真正想做的是让我的脚本电子邮件将 PDF 作为附件。我确定有一个库可以理解 SMTP 并可以代表我发送，但我想修改电子邮件正文，并在发送前查看附件。所以看起来最简单的事情是让脚本在我的系统默认邮件客户端中启动一封新电子邮件，提供收件人、主题和样板文本，并附加生成的文件，有点像 mailto: link in a网页（mailto 是否支持附件？）。

似乎有一个系统命令可以做到这一点，与 Ruby 完全无关，我可以调用我的 Ruby 脚本。那会很好。如果它依赖于平台，我在 OSX 上，但我四处走动，所以对 Windows 和 Linux 解决方案也很感兴趣。

我猜 B 计划是将一个简单的 CLI 编辑器塞进我的 Ruby 脚本中，让我编辑电子邮件文本，然后使用 SMTP 库发送电子邮件的一种方法。这似乎更难，除非它已经完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-16T08:55:13.867

[实际上，您可以使用console_runner](https://github.com/yuri-karpovich/console_runner) gem从命令行界面 (CLI) 执行任何 ruby​​ 文件。如果您已经编写了代码，则可以从命令行运行它。您只需要在 Ruby 代码中添加注释（[类似于 YARD](https://yardoc.org/)的语法），然后从命令行执行它：

```
$ c_run /path/your_file.rb say_hello 
```

**/path/your_file.rb**：

```
# @runnable
class MyClass

    # @runnable
    def say_hello
      puts 'Hello!'
    end

end 
```

# svn - 在与特定模式匹配的文件夹中的许多文件上运行 svn rename

> ID：15388162
> 
> 赞同：1
> 
> 时间：2013-03-13T14:29:54.020
> 
> 标签：svn

给定一个文件夹，其中包含使用设计名称作为文件一部分的文件，我想`svn rename`在与设计名称匹配的情况下运行。显示文件的目录列表（比此处显示的更多）具有以下格式：

```
 reg_ptst_lib_ptst_rtl_12.ngc
    reg_ptst_lib_ptst_rtl_13.ngc
    reg_ptst_lib_ptst_rtl_14.ngc
    reg_ptst_lib_ptst_rtl_15.ngc 
```

设计名称字符串是 ptst。我想让脚本遍历每个文件，执行如下命令：

```
$svn rename reg_ptst_lib_ptst_rtl_12.ngc reg_scst3_lib_scst3_rtl_12.ngc 
```

将设计名称从更改为`ptst`颠覆`scst3`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T14:40:56.817

无需使用 ruby​​ 或 perl，这是一个带有`find`,`awk`和`bash`. 在包含您的文件的目录中：

```
find *.ngc | awk '{ str=$0; gsub(/ptst/,"scst3",str); print "svn rename " $0 " " str }' | bash 
```

您可以首先通过删除 final 来测试它`| bash`，它将 svn rename 命令打印到终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-09T20:02:06.093

与 Jon 相同的方法，只是在文件名周围添加引号，以防其他人（如我）想要在文件名包含空格时执行类似的操作。

```
find *.ngc | awk '{ str=$0; gsub(/ptst/,"scst3",str); print "svn rename \"" $0 "\" \"" str "\""}' | bash 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T19:08:40.640

我已经为此任务（称为`tacklebar`项目）使用了总指挥官 + Windows 批处理文件。您可以采用任何其他命令器，例如 Far 或 Double Commander，只要它可以通过键盘快捷键或工具栏按钮调用带有所选文件参数的脚本（当前安装程序仅支持 Total Commander）。

想法是在指挥官应用程序中选择要重命名的文件/目录（无论它们是否受版本控制）并将它们放入临时创建的文本文件中（Total Commander 通过`%L`变量自动执行）和然后调用脚本来重命名该列表文件选择的路径。

该脚本只是将列表文件复制到 2 个临时列表文件中并打开，例如，Notepad++ 以编辑第二个列表文件。在 Notepad++ 中完成文件重命名后，关闭编辑器并保存更改，然后脚本比较两个列表并进行重命名。

您可以通过运行以下命令将脚本和所有其他脚本安装到 Total Commander 按钮栏中`_install.bat`：

[https://sf.net/p/tacklebar/tacklebar/HEAD/tree/trunk/](https://sf.net/p/tacklebar/tacklebar/HEAD/tree/trunk/)

要安装 3d 方依赖项，请`_install.bat`从以下位置运行：

[https://sf.net/p/tacklebar/external_tools/HEAD/tree/trunk/](https://sf.net/p/tacklebar/external_tools/HEAD/tree/trunk/)

github上的项目：

[https://github.com/andry81/tacklebar](https://github.com/andry81/tacklebar) [https://github.com/andry81/tacklebar/blob/trunk/README.md](https://github.com/andry81/tacklebar/blob/trunk/README.md)

# ruby-on-rails - 除了类图之外，还有另一种方式（有或没有 UML）来建模 MVC Web 应用程序设计吗？

> ID：15388164
> 
> 赞同：2
> 
> 时间：2013-03-13T14:29:59.020
> 
> 标签：ruby-on-rails, model-view-controller, model, uml, diagram

我正在构建一个 Rails 应用程序，但无法确定如何为应用程序架构创建图表。

我过去创建了 UML 类图，因此这就是我的目标。我找到了通过 rake 任务生成 UML 类图的 railroady gem，但是它将模型与控制器分开——这对我来说是支离破碎的。

我想知道是否有另一种（最好是更好的）方法来建模 MVC（rails）Web 应用程序。

我不一定要寻找一个 gem 来为我生成图表，我很高兴在 visio 中手动创建它，我只是不知道我应该使用哪种类型的图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:59:41.790

您可能想尝试鲁棒性图，有时也称为 MVC 图。例如，请参见[此处](http://iconixprocess.com/iconix-process/analysis-and-preliminary-design/robustness-analysis/)和[此处](http://alvinalexander.com/uml/uml-model-view-controller-mvc-diagram)。

它并不是真正的 UML 图，但大多数 UML 工具通过构造型和自定义图标来管理它。我使用的工具 Magicdraw UML 使用类图，但我想我听说过使用通信图的工具（虽然不确定）。

但是，它可能会也可能不会满足您的期望，因为它是一个非常全球化的图表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:42:23.533

存在一种名为 UWA（[Ubiquitous Web Application](http://www.academia.edu/2445027/Model-driven_development_of_web_applications_with_UWA_MVC_and_JavaServer_faces)）的方法，它不仅可以描述数据结构，还可以描述导航、表示和事务模型。

UWA 方法采用以用户为中心的方法，可改进需求和设计定义。由于这种方法是专门为 Web 应用程序建模而开发的，它允许内容、导航、事务、发布和操作元素的清晰分离。

UWA 从面向目标的需求工程开始，该工程自然出现在后期设计阶段，揭示了应该实施的关键特性。这导致对一些可能没有事先确定或可能被低估的需求进行推理。

[您可以在此处](http://citeseerx.ist.psu.edu/viewdoc/similar;?doi=10.1.1.216.8011&type=ab)找到有关 UWA 的更多信息。

即使您决定不应用此方法，它也可以为您提供一些关于将 UML 图适应 Web 应用程序的技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-31T15:19:14.717

您以前遇到过**用例图**吗？严格来说，它不是概述系统架构的图表，但它确实提供了在给定“用例”（或过程）期间与系统其他部分/外部参与者进行通信的良好可视化表示。

**例如：** 用户（参与者）-->更新状态（用例）--包括-->（登录）

在这里，我们有一个用户想要更新他们的状态。为了做到这一点，他们需要登录到站点（一个包含的用例）。在 MVC 模式下考虑这一点，我们知道“更新状态”和“登录”都是控制器方法，它们都将与被吸引的网站数据库（也是一个参与者）进行通信，从而展示系统内的通信路径。

系统的参与者可以是在一个过程中与实际系统进行通信的任何东西，通常是在外部，如用户、浏览器、数据库、客户端等。就 MVC 架构建模而言，这最好由类图完成，但使用案例图也将有助于视觉表示。

**在开始编码之前**，我总是一起绘制用例和类图，作为**提取系统需求**并将它们布置在工作设计中的一种方式。UML 图毕竟是设计工具——在您编写完系统代码之后再创建一个并没有多大意义！

无论如何都要考虑一些事情-希望这会有所帮助！ [基本用例图的简要概述](http://www.agilemodeling.com/artifacts/useCaseDiagram.htm)

# c - GCC 模块依赖

> ID：15388171
> 
> 赞同：-2
> 
> 时间：2013-03-13T14:30:12.343
> 
> 标签：c, gcc, module, include, c-preprocessor

有没有办法编译使用跨模块依赖的应用程序？当我尝试使用标准函数和其他模块函数编译模块时

```
gcc module.c -c
gcc module2.c -c
gcc module.o module2.o -o app 
```

我收到类似的错误

```
implicit declaration of function printf 
```

我知道可以通过在每个文件中包含所有标题并使用#define & #ifndef 来处理它，但它非常难看。我想在 app 文件中包含所有文件，如下所示：app.c

```
#include "macro.h"
#include "module.h"
#include "module2.h"

#include <math.h>
#include <stdio.h>
#include <stdlib.h>

int main(void) {} 
```

(module.h & module2.h 省略)

宏.h

```
#define macro(var1, var2) var1 ? printf(var2) : moduleFunc(var2)
#define macro2(var) some math func 
```

模块.c

```
void moduleFunc(char* var) {macro2(); module2Func();} 
```

模块2.c

```
void module2Func(...) {macro(); printf(...); some math func} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:39:18.330

包括`stdio.h`在你的`macro.h`. 这样，任何试图标`macro.h`头的模块都将使用`printf`来自的声明`stdio.h`

# java - Sublime Text 2 - 编译java代码错误

> ID：15388176
> 
> 赞同：1
> 
> 时间：2013-03-13T14:30:26.443
> 
> 标签：java, sublimetext2, sublimetext

我准备我的 Sublime Text 来使用教程[http://www.compilr.org/compile-and-run-java-programs/](http://www.compilr.org/compile-and-run-java-programs/)编译 Java ，当我点击 ctrl+b 时，我得到了类似的东西：

```
[Error 2] The system cannot find the file specified
[cmd:  [u'runJava.bat', u'C:\\Users\\xx\\Desktop\\Test.java']]
[dir:  C:\Users\xx\Desktop]
[path: ?C:\Program Files\Java\jdk1.7.0_13\bin]
[Finished] 
```

它是`.bat`，但它仍然不起作用。我的`JavaC.sublime-build`文件是：

```
{
    "cmd": ["runJava.bat", "$file"],
    "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
    "selector": "source.java",
    "encoding": "ISO-8859-2"
} 
```

我在Windows 8上。

# java - Mockito not recognizing my mocked class when passing through when()

> ID：15388177
> 
> 赞同：4
> 
> 时间：2013-03-13T14:30:42.620
> 
> 标签：java, junit, mockito

I want the `closeSession()` method to throw an Exception when it is called so that I can test to see my logging is being done. I have mocked the `Crypto` object as `mockCrypto` and set it up as follows:

```
@Test
  public void testdecrpyMcpDataExceptions() throws Exception {
    Crypto mockCrypto = Mockito.mock(Crypto.class);
      try {
            mockCrypto = CryptoManager.getCrypto();
            logger.info("Cyrpto Initialized");
      } finally {
            logger.info("Finally");
            try {
                logger.info("About to close Crypto!");
                Mockito.doThrow(new CryptoException("")).when(mockCrypto).closeSession();
                mockCrypto.closeSession();
                } catch (CryptoException e) {
                    logger.warn("CryptoException occurred when closing crypto session at decryptMcpData() in CipherUtil : esi");

                }
            }
    } 
```

However when I run it I get the error :

```
Argument passed to when() is not a mock! 
```

Am I mocking the class wrong or am I just missing something?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:37:04.267

don't you overwrite your mock at

```
mockCrypto = CryptoManager.getCrypto(); 
```

Tested

```
@Test(expected=RuntimeException.class)
    public void testdecrpyMcpDataExceptions() throws Exception {
        Crypto mockCrypto = mock(Crypto.class);

        doThrow(new RuntimeException()).when(mockCrypto).closeSession();
        mockCrypto.closeSession();

    } 
```

works fine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:37:14.950

this line is overwriting your mock:

```
mockCrypto = CryptoManager.getCrypto(); 
```

and thats why it fails.

# wpf - 以 Grid 为模板的 ItemsControl：向 Grid 添加控件

> ID：15388178
> 
> 赞同：4
> 
> 时间：2013-03-13T14:30:42.470
> 
> 标签：wpf, windows-phone-7, windows-phone-8

Windows Phone 7.1 项目 (XAML)。我有一个以网格为模板的 itemscontrol，绑定到数据元素的集合，一切正常。但是，我必须向网格中添加一个额外的图像，它不会绑定到集合。某种标题图像。

我有这个代码：

```
<ItemsControl ...>
    <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Grid ShowGridLines="True" x:Name="ShipsGrid">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                        <ColumnDefinition Width="0.1*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                        <RowDefinition Height="0.1*"></RowDefinition>
                    </Grid.RowDefinitions>

                    <!--<Image Source="/images/image.png" x:Name="SuperImage"/>-->

                </Grid>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>

        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Image x:Name="ElementImage" Source="{Binding ImageUri, Mode=OneWay}" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </controls:ShipItemsGridControl> 
```

如果我取消注释 ItemsPanelTemplate (x:Name SuperImage) 中的图像，我会收到以下错误：无法显式修改用作 ItemsControl 的 ItemsPanel 的 Panel 的 Children 集合。ItemsControl 为 Panel 生成子元素。

我已经尝试了几件事，但我无法让它工作。当然，我可以将它添加到 itemtemplate 中，并且只让它在第一个 item 中可见，但这非常非常难看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:42:47.973

通过将两者放在允许重叠控件（例如 a或 a ）的父面板中，将它们堆叠在`Image`您的顶部怎么样？`ItemsControl``Grid``Canvas`

```
<Grid>
    <ItemsControl ... />
    <Image Source="/images/image.png"
           VerticalAlignment="Top" HorizontalAlignment="Left" 
           Margin="5,5,0,0" />
</Grid> 
```

在代码示例中，我只是为顶部和左侧边距设置了 5 的边距，但您可能需要稍微弄乱一下，以便将图像与您的第一个 Grid 单元格对齐。

此外，如果您需要动态设置图像的高度/宽度以使其与网格单元格大小相同，您可以将图像的`Height`和`Width`属性绑定到 ItemsControl 的 ActualHeight/ActualWidth 并使用转换器计算出 1/10th那个大小（我的[博客上有一个 MathConverter](http://rachel53461.wordpress.com/tag/math-converter/)可以很容易）

我能想到的唯一其他选择是在生成项目后将其添加到代码隐藏中

```
void MyItemsControl_Loaded(object sender, EventArgs e)
{
    MyItemsControl.ItemContainerGenerator.StatusChanged += 
        ItemContainerGenerator_StatusChanged;
}

void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
{
    if (MyItemsControl.ItemContainerGenerator.Status == 
        System.Windows.Controls.Primitives.GeneratorStatus.ContainersGenerated)
    {
        // Remove ItemContainerGenerator event
        MyItemsControl.ItemContainerGenerator.StatusChanged
            -= ItemContainerGenerator_StatusChanged;

        // Add Image to ItemsControl here
    }
} 
```

不过，这并不是很理想，我会尽力先将 Image 放在 ItemsControl 的顶部。

# delphi - WideChar 到字节？

> ID：15388183
> 
> 赞同：6
> 
> 时间：2013-03-13T14:31:06.353
> 
> 标签：delphi, bytearray, byte, widechar

我在这里有一个简单的问题。如何在 Delphi - 7中转换`WideChar`为 2x ？`Byte`我搜索了互联网和[StackOverflow](http://www.stackoverflow.com)，但没有结果......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T14:54:34.863

[大卫](https://stackoverflow.com/a/15388217/282848)给了你更好的方法，即，

```
var
  b1, b2: Byte;
  wc: WideChar;

...

b1 := WordRec(wc).Lo;
b2 := WordRec(wc).Hi; 
```

其他一些选项（只是为了好玩）：

```
b1 := Lo(Word(wc));
b2 := Hi(Word(wc)); 
```

和

```
b1 := Byte(wc);
b2 := Byte(Word(wc) shr 8); 
```

和

```
b1 := PByte(@wc)^;
b2 := PByte(NativeUInt(@wc) + 1)^; 
```

和

```
var
  wc: WideChar;
  bytes: WordRec absolute wc;

begin

  // Magic! The bytes are already found in bytes.Lo and bytes.Hi! 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T14:32:23.903

很多方法可以做到这一点。例如，我个人的选择是：

```
var
  b1, b2: Byte;
  wc: WideChar;

....

b1 := WordRec(wc).Lo;
b2 := WordRec(wc).Hi; 
```

# winapi - PROPERTYKEY::pid 含义

> ID：15388184
> 
> 赞同：3
> 
> 时间：2013-03-13T14:31:07.447
> 
> 标签：winapi, windows-7, ipropertystorage

有人可以解释结构中的`pid`字段是什么吗？[`PROPERTYKEY`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773381.aspx)微软说不要使用`0`or`1`你很好，但是当我需要`IPropertyStore`在我的代码中实现时这并没有帮助。是否`pid`应该是键的一部分，所以可能存在多个相同`fmtid`但不同的值？`pid`还是应该忽略它，所以`GetValue`应该返回任何匹配的值`fmtid`，忽略`pid`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:00:26.677

这种 fmtid+pid 组合在历史上与 OLE 相关（是的，这已经很老了）。

那时的`fmtid`（格式id）就像一个类别，pid（属性id）是类别中的属性标识符。例如，您在这里定义了第一个 FMTID：[Predefined Property Set Format Identifiers](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380060%28v=vs.85%29.aspx)。这些属性仍然用于 Office 文档（作者、关键字等）所以每个类别都有很多属性（对于很多属性来说 fmtid 很少），但是 fmtid 和 pid 的组合总是使属性在空间和星系。

此后出现了其他 FMTID，您可以在 Windows SDK 的 propkey.h 中查看：FMTID_AudioSummaryInformation、FMTID_Volume、FMTID_ShellDetails 等...

今天，对于一些新的属性，FMTID 不再意味着任何东西。例如，[System.Contact.Birthday](http://msdn.microsoft.com/fr-fr/library/windows/desktop/bb787596%28v=vs.85%29.aspx)的 fmtid 为 1 `76DC63C-2688-4E89-8143-A347800F25E9`，id 为`47`，但 fmtid 没有特殊含义，也没有具体定义，因此实际上可以单独用于 key。

因此，对于给定的属性，您必须考虑键仍然是两者的组合（因此结构名称：PROPERTYKEY），但您可以使用 pid 将自己的属性定义为大于或等于 2 的值（如官方文档指定）如果您愿意，可以将 fmtid 作为新的 guid。我个人还是更喜欢为一组属性定义一个通用的 FMTID。

# java - Reconcillation - 任何基于 Java 的库？

> ID：15388193
> 
> 赞同：0
> 
> 时间：2013-03-13T14:31:20.157
> 
> 标签：java

我正在编写一个基于 java 的组件来对大约一百万个数据项进行一些协调（因此性能至关重要）。

两个数据源是 1\. 数据库中的表 2\. 平面文件。

数据库中有几列，应该与文件中的几列相匹配。数据没有排序或任何东西。因此，数据库和平面文件中的每个数据项（可以说是名称和相应的电话号码）应该相同。例如，如果数据库中的一行显示“john”的数字是“220 343 123”，那么平面文件中“john”的行的数字必须是“220 343 123”。如果没有，我报告休息并继续前进。

当然，我可以选择每一行（从数据库中）并尝试将其与文件中的某行匹配（糟糕的性能）。或者我可以在我这样做之前（以某种方式）对表格和文件进行排序（仍然很笨重）或者......别的

论坛的问题是，您是否知道任何可以用于此目的的库/工具（在 Java 世界中）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:40:19.020

您可以读取平面文件并将数据放入某种`Map`结构中。接下来，您遍历数据库行并与`Map`.

这样，您只需将两个数据源迭代一次...

# ruby-on-rails-3 - 设计重定向问题

> ID：15388199
> 
> 赞同：0
> 
> 时间：2013-03-13T14:31:48.020
> 
> 标签：ruby-on-rails-3

我在我的 rails3 项目中使用设计。登录后，我需要将用户重定向到不同的页面。如果没有覆盖会话控制器，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:42:22.857

[问题看起来像https://stackoverflow.com/a/12854498/790737](https://stackoverflow.com/a/12854498/790737)的副本

试着把它放在你的 ApplicationController 中：

```
def after_sign_in_path_for(resource)
    different_page_path  # this should be a path helper
end 
```

我假设您知道如何使用路径和 url 助手，并且您可以使用

```
rake routes 
```

列出它们。祝你好运。

# android - 在 Android 应用程序中使用 Maven 项目时出现 NoClassDefFoundError

> ID：15388200
> 
> 赞同：2
> 
> 时间：2013-03-13T14:31:50.570
> 
> 标签：android, maven

导入到 Eclipse 的 Maven 投影的所有内容似乎都很好。此 Maven 项目已添加到 Android 应用程序的构建路径中。该应用程序可以毫无问题地构建。但是，每当实例化 Maven 项目的一个类时，就会发生 java.lang.NoClassDefFoundError。对于测试，这是一个简单的类：

```
package com.my.maven;
public class Foo {

    public String sFoo;
    public Foo ()
    {
        sFoo = "Foo";
    }
} 
```

每当应用程序到达以下语句时：

```
Foo foo = new Foo(); 
```

出现以下错误：

```
java.lang.NoClassDefFoundError: com.my.maven.Foo 
```

有很多关于 NoClassDefFoundError 的帖子，我花了很多时间阅读和尝试解决方案，但没有一个有效。

任何提示将不胜感激。

# url - 在 URL 中使用非 Google Analytics 标记以及常规 Google Analytics 标记

> ID：15388201
> 
> 赞同：0
> 
> 时间：2013-03-13T14:31:52.590
> 
> 标签：url, parameters, google-analytics

我在使用 Google Analytics（分析）网址参数时遇到了一些问题。以前，我使用 Google Analytics URL Builder 构建了 URL。这些使我能够跟踪访问我网站的访问者的来源、各种营销活动的成功程度等。

最近，我开始在 URL 中使用另一个标签，它与 Google Analytics（分析）无关，但会在访问者到达我的网站时更改我网站上的电话号码。例如，我将 &ctcc=adwords 添加到跟踪 URL 的末尾，当用户访问时，我的网站上会显示一个指定的电话号码，这样我就可以跟踪我的 adwords 花费了多少次调用。

然而，当我一直在使用这个 ctcc 代码时，Google Analytics 似乎不再跟踪我网站的流量数字:(

知道如何将这两个参数合并到 URl 中，并确保它们都按预期工作吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:21:17.760

看起来这是您的服务器如何使用 ctcc 查询参数重定向流量的问题。查看以下请求及其响应标头：

![要求](../Images/0f78901db0d8137bc9f5e01b6ccdcfbc.png)

![回复](../Images/5af1c774e93ee44833e2b94735615e8e.png)

因此 ctcc 参数用于某些服务器端跟踪（据我所知），并且服务器设置为在收到 ctcc 请求时重定向和剥离 ctcc。不熟悉使用的系统，我无法提供详细信息，但您需要重新配置重定向以停止更改`&`为`;`. 用分号替换 & 号会弄乱您的 GA 数据。

# richtextbox - 在 Sitecore 富文本字段中插入动态文本

> ID：15388205
> 
> 赞同：2
> 
> 时间：2013-03-13T14:31:56.373
> 
> 标签：richtextbox, sitecore

我最近在 Sitecore 上花了一些时间，我注意到我正在开发的网站在某个`Rich Text`领域有版权日期。不幸的是，现在是2012年。现在，解决这个问题的简单方法是简单地进入并更改`Rich Text`具有版权信息的字段，但我不想担心在2014年更改它。

有没有办法在控件中插入动态文本`Text`？即使我可以有一个可以在 C# 中手动替换的印记，这也比每年切换`Text`a或强制手动更新要好。`Literal`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T14:42:10.943

您可以将自己的处理器添加到`renderField`管道中，检查当前字段是否为**RichText**字段并将标记（例如 __YEAR__）替换为当前年份：

```
<renderField>
  <!--... other processors -->
  <processor type="My.Assembly.Namespace.ReplaceTokenProcessor, My.Assembly" />
  <!--... other processors -->
</renderField> 
```

和处理器的代码：

```
namespace My.Assembly.Namespace
{
  public class ReplaceTokenProcessor
  {
    public virtual void Process(RenderFieldArgs args)
    {
      if (args.FieldTypeKey != "rich text")
        return;

      args.Result.FirstPart = (args.Result.FirstPart == null) ? null : args.Result.FirstPart.Replace("__YEAR__", DateTime.Now.Year.ToString());
      args.Result.LastPart = (args.Result.LastPart == null) ? null : args.Result.LastPart.Replace("__YEAR__", DateTime.Now.Year.ToString());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T15:22:15.140

Maras 提出的解决方案是可行的，但对我来说，对于 RTE 领域的一个日期来说，这听起来有点矫枉过正。除此之外，在您网站的每个页面上呈现的每个 RTE 字段都会被处理。

如果它仅用于一个年份值，我将使用 Literal 并填充并替换 Codebehind 中 Literal 的 Text 属性：

```
Literal.Text = FieldRenderer.Render(Context.Item, "RTE_FieldName")
                  .Replace("__YEAR__", DateTime.Now.Year.ToString()); 
```

然后将缓存添加到子布局中，并且仅在清除缓存后才渲染一次。

# javascript - Passport.js 身份验证失败时发回 JSON 响应

> ID：15388206
> 
> 赞同：64
> 
> 时间：2013-03-13T14:32:00.327
> 
> 标签：javascript, node.js, authentication, passport.js, passport-local

我正在`Node.js`用作 iPhone 客户端的后端 API 服务器。我正在`Passport.js`使用`local strategy`. 相关代码如下：

```
// This is in user.js, my user model
UserSchema.static('authenticate', function(username, password, callback) {
    this.findOne({ username: username }, function(err, user) {
        if (err){
            console.log('findOne error occurred');
            return callback(err);
        }
        if (!user){
            return callback(null, false);
        }
        user.verifyPassword(password, function(err, passwordCorrect){
            if (err){
                console.log('verifyPassword error occurred');
                return callback(err);
            }
            if (!passwordCorrect){
                console.log('Wrong password');
                return callback(err, false);
            }
            console.log('User Found, returning user');
            return callback(null, user);
        });
    });
}); 
```

和

```
// This is in app.js
app.get('/loginfail', function(req, res){
    res.json(403, {message: 'Invalid username/password'});
});

app.post('/login',
    passport.authenticate('local', { failureRedirect: '/loginfail', failureFlash: false }),
    function(req, res) {
       res.redirect('/');
}); 
```

现在，我设法将失败的登录重定向到 /loginfail，在那里我将一些 JSON 发送回 iPhone 客户端。但是，这没有足够的粒度。我希望能够将适当的错误发送回 iPhone 客户端，例如：“未找到用户”或“密码错误”。使用我现有的代码，我看不出这是如何实现的。

我尝试在 passport.js 网站上按照示例进行自定义回调，但由于缺乏对节点的理解，我无法让它工作。我怎样才能修改我的代码，以便能够发回带有适当错误代码/消息的 res.json？

我现在正在尝试这样的事情：

```
// In app.js
app.post('/login', function(req, res, next) {
    passport.authenticate('local', function(err, user, info) {
        if (err) { return next(err) }
        if (!user) {
            console.log(info);
            // *** Display message without using flash option
            // re-render the login form with a message
            return res.redirect('/login');
        }
        console.log('got user');
        return res.json(200, {user_id: user._id});
    })(req, res, next);
});

// In user.js
UserSchema.static('authenticate', function(username, password, callback) {
    this.findOne({ username: username }, function(err, user) {
        if (err){
            console.log('findOne error occurred');
            return callback(err);
        }
        if (!user){
            return callback(null, false);
        }
        user.verifyPassword(password, function(err, passwordCorrect){
            if (err){
                return callback(err);
            }
            if (!passwordCorrect){
                return callback(err, false, {message: 'bad password'});
            }
            console.log('User Found, returning user');
            return callback(null, user);
        });
    });
}); 
```

但是当我尝试 console.log(info) 时，它只是说未定义。我不知道如何让这个自定义回调工作......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2016-01-09T21:32:27.603

我遇到了类似的问题`Passport`并且登录响应失败。我正在构建一个 API，并希望所有响应都以`JSON`. `401`Passport 以 status:和 body:响应无效密码`Unauthorized`。**那只是正文中的一个文本字符串，而不是 JSON，所以它破坏了我期望所有 JSON 的客户端。**

事实证明，有一种方法可以让 Passport 只将错误返回给框架，而不是尝试自己发送响应。

答案是设置`failWithError`传递给身份验证的选项： [https ://github.com/jaredhanson/passport/issues/126#issuecomment-32333163](https://github.com/jaredhanson/passport/issues/126#issuecomment-32333163)

来自 jaredhanson 在问题中的评论：

```
app.post('/login',
  passport.authenticate('local', { failWithError: true }),
  function(req, res, next) {
    // handle success
    if (req.xhr) { return res.json({ id: req.user.id }); }
    return res.redirect('/');
  },
  function(err, req, res, next) {
    // handle error
    if (req.xhr) { return res.json(err); }
    return res.redirect('/login');
  }
); 
```

这将在 Passport 调用之后调用错误处理程序`next(err)`。对于我的应用程序，我编写了一个通用错误处理程序，该处理程序特定于我仅提供 JSON 错误的用例：

```
// Middleware error handler for json response
function handleError(err,req,res,next){
    var output = {
        error: {
            name: err.name,
            message: err.message,
            text: err.toString()
        }
    };
    var statusCode = err.status || 500;
    res.status(statusCode).json(output);
} 
```

然后我将它用于所有 api 路由：

```
var api = express.Router();
...
//set up some routes here, attached to api
...
// error handling middleware last
api.use( [
        handleError
        ] ); 
```

我没有`failWithError`在文档中找到该选项。我在调试器中跟踪代码时偶然发现了它。

此外，在我弄清楚这一点之前，我尝试了@Kevin_Dente 答案中提到的“自定义回调”，但它对我不起作用。我不确定这是针对旧版本的 Passport 还是我做错了。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-13T22:07:32.470

我相信您的“身份验证”静态调用的回调函数（在您的代码中称为“回调”）接受您的代码可以提供的第三个参数 - “信息”。然后，不是传入 { failureRedirect: ...} 对象，而是传入一个接受 3 个参数的函数 - err、user 和 info。您在身份验证方法中提供的“信息”将传递给此回调。

Passport 将此场景称为“自定义回调”。请参阅此处的文档：http: [//passportjs.org/guide/authenticate/](http://passportjs.org/guide/authenticate/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-29T12:57:41.810

**自定义回调**有一个官方文档：

```
app.get('/login', function(req, res, next) {
  passport.authenticate('local', function(err, user, info) {
    if (err) { return next(err); }
    if (!user) { return res.redirect('/login'); }
    req.logIn(user, function(err) {
      if (err) { return next(err); }
      return res.redirect('/users/' + user.username);
    });
  })(req, res, next);
}); 
```

[https://github.com/passport/www.passportjs.org/blob/master/views/docs/authenticate.md](https://github.com/passport/www.passportjs.org/blob/master/views/docs/authenticate.md)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-24T04:48:34.847

根据您的官方文档，`Passport`可以使用[自定义回调](http://www.passportjs.org/docs/authenticate/#custom-callback)函数来处理授权失败的情况并覆盖默认消息。

如果您正在开发 REST API，然后您希望发送漂亮的 JSON 响应，如下所示：

```
{
    "error": {
        "name": "JsonWebTokenError",
        "message": "invalid signature"
    },
    "message": "You are not authorized to access this protected resource",
    "statusCode": 401,
    "data": [],
    "success": false
} 
```

我正在使用`Passport JWT`身份验证来保护我的一些路由，并应用`authMiddleware`如下：

**应用程序/中间件/authMiddleware.js**

```
const express = require('express');
const router = express.Router();
const passport = require('passport');
const _ = require('lodash');

router.all('*', function (req, res, next) {
  passport.authenticate('local', function(err, user, info) {

    // If authentication failed, `user` will be set to false. If an exception occurred, `err` will be set.
    if (err || !user || _.isEmpty(user)) {
      // PASS THE ERROR OBJECT TO THE NEXT ROUTE i.e THE APP'S COMMON ERROR HANDLING MIDDLEWARE
      return next(info);
    } else {
      return next();
    }
  })(req, res, next);
});

module.exports = router; 
```

**应用程序/路由/approutes.js**

```
const authMiddleware = require('../middlewares/authMiddleware');

module.exports = function (app) {
  // secure the route by applying authentication middleware
  app.use('/users', authMiddleware);
  .....
  ...
  ..

  // ERROR-HANDLING MIDDLEWARE FOR SENDING ERROR RESPONSES TO MAINTAIN A CONSISTENT FORMAT
  app.use((err, req, res, next) => {
    let responseStatusCode = 500;
    let responseObj = {
      success: false,
      data: [],
      error: err,
      message: 'There was some internal server error',
    };

    // IF THERE WAS SOME ERROR THROWN BY PREVIOUS REQUEST
    if (!_.isNil(err)) {
      // IF THE ERROR IS REALTED TO JWT AUTHENTICATE, SET STATUS CODE TO 401 AND SET A CUSTOM MESSAGE FOR UNAUTHORIZED
      if (err.name === 'JsonWebTokenError') {
        responseStatusCode = 401;
        responseObj.message = 'You are not authorized to access this protected resource';
      }
    }

    if (!res.headersSent) {
      res.status(responseStatusCode).json(responseObj);
    }
  });
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-20T16:44:50.723

您可以在不使用`passReqToCallback`策略定义中的属性的情况下进行自定义回调：

```
passport.use(new LocalStrategy({passReqToCallback: true}, validateUserPassword)); 
```

然后，您可以将自定义身份验证错误代码添加到策略代码中的请求中：

```
var validateUserPassword = function (req, username, password, done) {
    userService.findUser(username)
        .then(user => {
            if (!user) {
                req.authError = "UserNotFound";
                return done(null, false);
            } 
```

最后，您可以在路线中处理这些自定义错误：

```
app.post('/login', passport.authenticate('local', { failWithError: true })      
    function (req, res) {
        ....
    }, function(err, req, res, next) {
        if(req.autherror) {
            res.status(401).send(req.autherror)
        } else {
            ....
        }
    }
); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-19T21:12:57.850

一个简短的解决方法是模拟最初旨在支持连接闪存的 Flash 方法调用，并使用此方法返回 JSON 对象。

首先定义“模拟器”：

```
var emulateFlash = function (req, res, next) {
        req.flash = (type, message) => {
            return res.status(403).send({ status: "fail", message });
        }
        next();
    } 
```

这将注入 flash 方法，该方法将在失败时发送错误 JSON 对象。

在路线中执行以下操作：

1st，使用模拟器全面使用：

```
router.use(emulateFlash); 
```

可以改为在所需的每条路线上使用 emulateFlash 方法。

2、在路由上使用authenticate时，使用消息指定failureFlash选项：

```
router.route("/signin")
    .post(.authenticate('local', { session: false,  failureFlash: "Invalid email or password."}), UsersController.signIn); 
```

我对失败的身份验证和成功的身份验证都进行了测试，发现它有效。查看代码，除了实现需要更多工作的回调方法之外，我找不到任何其他方法来返回对象。

# javascript - Jquery Slider 从第二张幻灯片开始

> ID：15388208
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:32:00.923
> 
> 标签：javascript, jquery, html, css

我想创建一个类似于我附加的图像的内容滑块。我想知道是否通过使用普通内容滑块并将溢出设置为可见，我将能够显示 3 张幻灯片。但是滑块是否有可能将 slide2 定位在通常可见的区域中？

[滑块图片 http://img835.imageshack.us/img835/3994/sliderew.jpg](http://img835.imageshack.us/img835/3994/sliderew.jpg)

jsfiddle.net/craigie2204/WMF2N/2

```
jQuery(document).ready(function($){
// Setup Variables
var slides = $('#slider_mask .slide_container').children();
var total_slides = slides.length; // ***CHANGED***
var slide_width = $('#slider_mask').width();
var current_slide = 0;

// ***REMOVED*** slides.not(':first').hide();
// Set the width of the slide_container to total width of all slides
$('#slider_mask .slide_container').width(slide_width*total_slides);

slides.width(slide_width); // ***ADDED***

// Handle Right Arrow Click
$('#slider_mask .right_button').on('click', function() {

current_slide++;

if(current_slide == total_slides){ current_slide = 0; }

var negative_margin_required = current_slide*slide_width;
$('#slider_mask .slide_container').stop().animate({marginLeft:-      negative_margin_required+'px'},'fast');

});

// Handle Left Arrow Click
$('#slider_mask .left_button').on('click', function() {

current_slide--;

if(current_slide < 0){ current_slide = total_slides-1; }

var negative_margin_required = current_slide*slide_width;
$('#slider_mask .slide_container').stop().animate({marginLeft:-    negative_margin_required+'px'},'fast');

});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:17:40.570

根据您的小提琴，无需深入研究代码，您就可以使用它：

```
var current_slide = 1;
$('#slider_mask .slide_container').css('marginLeft', -current_slide*slide_width+'px'); 
```

有了这个，您可以通过设置的初始值从您想要的任何幻灯片开始`current_slide`。

这是一个演示：

[http://jsfiddle.net/bMv6P/](http://jsfiddle.net/bMv6P/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:17:57.443

获得幻灯片宽度后，您可以将其添加到 javascript 中：

```
 $('#slider_mask .slide_container').css({marginLeft:-slide_width+'px'}); 
```

或者只是将css中的边距属性设置为固定的幻灯片宽度。

这是小提琴：http: [//jsfiddle.net/WMF2N/3/](http://jsfiddle.net/WMF2N/3/)

# groovy - Groovy：从每个内部操作变量

> ID：15388210
> 
> 赞同：0
> 
> 时间：2013-03-13T14:32:04.530
> 
> 标签：groovy, closures, each

我想在每个闭包中操作 Groovy 中的一个变量，如下所示：

```
def stringTest = ''
def foo = ['one', 'two', 'three']
foo.each {
    stringTest.concat(it)
}
println stringTest 
```

但这给了我以下错误：

> | 错误 2013-03-13 15:26:12,330 [http-bio-8080-exec-2] 错误错误。GrailsExceptionResolver - 处理请求时发生 NoSuchMethodError：[GET] /Reporting-Web/reporting/show/1 reporting.web。 AppFiguresService$_getProductIDs_closure2.(Ljava/lang/Object;Ljava/lang/Object;Lgroovy/lang/Reference;)V. Stacktrace 如下：消息：执行控制器 [com.xyz.reporting.ReportingController] 的操作 [show] 导致异常：运行时错误执行操作行 | 方法 ->> 195 | grails.plugin.cache.web.filter.PageFragmentCachingFilter中的doFilter - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | 63 | grails.plugin.cache.web.filter.AbstractFilter 中的 doFilter | 第895章 java.util.concurrent.ThreadPoolExecutor$Worker 中的 runTask | 918 | 运行 '' ^ 680 | 跑 。. 在 java.lang 中。
> 
> 由 ControllerExecutionException 引起：运行时错误执行操作 ->> 195 | grails.plugin.cache.web.filter.PageFragmentCachingFilter中的doFilter - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | 63 | grails.plugin.cache.web.filter.AbstractFilter 中的 doFilter | 第895章 java.util.concurrent.ThreadPoolExecutor$Worker 中的 runTask | 918 | 运行 '' ^ 680 | 跑 。. 在 java.lang.Thread
> 
> 由 InvocationTargetException 引起：null ->> 195 | grails.plugin.cache.web.filter.PageFragmentCachingFilter中的doFilter - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | 63 | grails.plugin.cache.web.filter.AbstractFilter 中的 doFilter | 第895章 java.util.concurrent.ThreadPoolExecutor$Worker 中的 runTask | 918 | 运行 '' ^ 680 | 跑 。. 在 java.lang.Thread
> 
> 由 NoSuchMethodError 引起：reporting.web.Foo$_getProductIDs_closure2.(Ljava/lang/Object;Ljava/lang/Object;Lgroovy/lang/Reference;)V ->> 77 | report.web.Foo$$ENzya8Hg 中的 getProductIDs - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - | 45 | 显示在 com.xyz.reporting.Foo | 195 | grails.plugin.cache.web.filter.PageFragmentCachingFilter 中的 doFilter | 63 | grails.plugin.cache.web.filter.AbstractFilter 中的 doFilter | 第895章 java.util.concurrent.ThreadPoolExecutor$Worker 中的 runTask | 918 | 运行 '' ^ 680 | 跑 。. 在 java.lang.Thread

我对 Groovy 很陌生，在这里任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:45:43.680

函数“concat()”返回一个字符串：

```
stringTest = stringTest.concat(it) 
```

修改闭包中的迭代器是不可能的。

//编辑错误消息是grails错误，而控制器无法打开函数“show()”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:36:51.673

这有效...

```
def stringTest = ''
def foo = ['one', 'two', 'three']
foo.each {
    stringTest += it
}
println stringTest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:58:47.907

Java 字符串是不可变的。您可以收集连接的字符串：

```
def stringTest = ''
def foo = ['one', 'two', 'three']
stringTest = foo.collect { stringTest + it }.join()

assert stringTest == "onetwothree" 
```

# bash - 如何使用 bash/unix 工具根据唯一值的出现顺序重新排序 CSV 的行？

> ID：15388212
> 
> 赞同：1
> 
> 时间：2013-03-13T14:32:07.223
> 
> 标签：bash, sorting, command-line, unix

我已经使用 Python 来解析飞行数据的大型测试结果文件，但需要通过按出现顺序将相同的值分组在一起来重新排序其行。

CSV 当前已订购：

```
 (Flight ID)                  (Trajectory Data)
20110117559515, , , , , , , , ,2446,6720,370,42  (Time 0)                               
20110117559572, , , , , , , , ,2390,6274,410,54  (Time 0)                               
20110117559574, , , , , , , , ,2391,6284,390,54  (Time 0)                               
20110117559587, , , , , , , , ,2385,6273,390,54  (Time 0)                               
20110117559588, , , , , , , , ,2816,6847,250,32  (Time 0) 
... 
```

其中每个唯一 ID 都与它在某个时间点的当前轨迹数据一起列出。然后，这些飞行在空中的每一分钟都会使用新的轨迹数据重复此命令。

我需要重新排序的方式是：

```
20110117559515, , , , , , , , ,2446,6720,370,42  (Time 0)
20110117559515, , , , , , , , ,24xx,67xx,3xx,42  (Time 1)
20110117559515, , , , , , , , ,24xx,67xx,3xx,42  (Time 2)
20110117559515, , , , , , , , ,24xx,67xx,3xx,42  (Time 3)
20110117559515, , , , , , , , ,24xx,67xx,3xx,42  (Time N)
20110117559572, , , , , , , , ,2390,6274,410,54  (Time 0)
20110117559572, , , , , , , , ,23xx,62xx,4xx,54  (Time 1)
20110117559572, , , , , , , , ,23xx,62xx,4xx,54  (Time 2)
... and so on 
```

我编写了另一个 Python 脚本来处理这项工作，但由于文件很大，需要 3-4 小时。我想找到使用 bash/unix 工具执行此操作的方法，在这种情况下我不熟悉这些工具，并且正在查看类似于 sort 实用程序的内容：

```
sort -n -s -t, -k1,1 infile.csv > outfile.csv 
```

-t 设置分隔符，-k 设置排序键，-s 稳定排序，-n 使用数字比较。

有任何想法吗？（如果您可以使用单线，我会考虑添加代表）。

**澄清：** 我希望输入数据文件中出现的第一次飞行的所有详细信息在输出文件的开头组合在一起；然后您希望输入文件中出现的第二个航班号的所有详细信息接下来组合在一起，并重复令人作呕。——乔纳森·莱弗勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:31:23.320

我认为您需要对文件进行预处理以强制排序，使用强制排序对其进行排序，然后删除排序信息。该`awk`脚本删除了空格，因此它适合在没有水平滚动条的情况下在 SO 中的一行 - 删除空格会造成伤害。

```
awk -F, '{if(order[$1]==0)order[$1]=++counter;print order[$1]","$0;}' infile.csv |
sort -t, -s -k1,1n |
sed 's/^[^,]*,//' 
```

这可以查看之前是否`$1`已经看到过航班号（字段）。如果不是，则为其分配一个新的序号。然后输出该记录，并在行首输出序号，后跟逗号和原始记录。输出排序稳定（即使程序不支持，也可以修改，`awk`以便获得稳定排序）。`sort`然后排序后的输出去掉了序号；我选择使用`sed`but `cut`or `awk`or a number of other programs can be used instead。

我使用下面显示的输入文件进行了测试，该文件基于问题中的数据，但我已经重新排序，以便文件 '587 和 '588 出现在输入中的 '572 之前（所以这是一个更严格的测试排序）并且我还通过将第四轨迹列中的最后一位数字设置为每条记录的不同值来使每一行唯一（但这些值是按降序排列的，因此如果排序正在处理数据，它将被淘汰顺序）。

```
20110117559515, , , , , , , , ,2446,6720,370,42
20110117559587, , , , , , , , ,2385,6273,390,54
20110117559588, , , , , , , , ,2816,6847,250,32
20110117559572, , , , , , , , ,2390,6274,410,54
20110117559574, , , , , , , , ,2391,6284,390,54
20110117559515, , , , , , , , ,24xx,67xx,3xx,49
20110117559515, , , , , , , , ,24xx,67xx,3xx,48
20110117559572, , , , , , , , ,2390,6274,410,59
20110117559515, , , , , , , , ,2446,6720,370,47
20110117559515, , , , , , , , ,24xx,67xx,3xx,46
20110117559515, , , , , , , , ,24xx,67xx,3xx,45
20110117559572, , , , , , , , ,23xx,62xx,4xx,58
20110117559572, , , , , , , , ,23xx,62xx,4xx,57 
```

这个输出对我来说是正确的：

```
20110117559515, , , , , , , , ,2446,6720,370,42
20110117559515, , , , , , , , ,24xx,67xx,3xx,49
20110117559515, , , , , , , , ,24xx,67xx,3xx,48
20110117559515, , , , , , , , ,2446,6720,370,47
20110117559515, , , , , , , , ,24xx,67xx,3xx,46
20110117559515, , , , , , , , ,24xx,67xx,3xx,45
20110117559587, , , , , , , , ,2385,6273,390,54
20110117559588, , , , , , , , ,2816,6847,250,32
20110117559572, , , , , , , , ,2390,6274,410,54
20110117559572, , , , , , , , ,2390,6274,410,59
20110117559572, , , , , , , , ,23xx,62xx,4xx,58
20110117559572, , , , , , , , ,23xx,62xx,4xx,57
20110117559574, , , , , , , , ,2391,6284,390,54 
```

你也可以在 Perl 中相当快地完成整个事情。在具有一个或多个 GiB RAM 的机器中，66 MiB 的数据量几乎不会是过多的数据。

这个 Perl 脚本 (genflights.pl) 创建了大约 69 MiB 的数据：

```
#!/usr/bin/env perl
use strict;
use warnings;

my $seq = 1000000;

for my $time (0..1500)
{
    for my $flight (0..1000)
    {
        my $r0 = int(rand(1000)) + 20110117559000;
        my $r1 = int(rand(10000));
        my $r2 = int(rand(10000));
        my $r3 = int(rand(1000));
        my $r4 = int(rand(100));
        printf "%s, , ,%07d, ,%04d,%04d,%03d,%02d\n", $r0, ++$seq, $r1, $r2, $r3, $r4;
    }
} 
```

一次运行的前几行输出是：

```
20110117559486, , ,1000001, ,2670,6847,792,91
20110117559489, , ,1000002, ,0278,1929,972,25
20110117559845, , ,1000003, ,9169,4915,145,21
20110117559356, , ,1000004, ,3519,1660,106,97
20110117559976, , ,1000005, ,8988,7830,884,64
20110117559446, , ,1000006, ,7459,7458,791,93
20110117559442, , ,1000007, ,7265,5853,012,41
20110117559686, , ,1000008, ,4624,0682,859,32
20110117559081, , ,1000009, ,3624,0264,017,06
20110117559336, , ,1000010, ,6501,9033,329,33
20110117559869, , ,1000011, ,5020,3008,919,96
20110117559047, , ,1000012, ,5747,4140,693,83
20110117559531, , ,1000013, ,0591,1866,482,68
20110117559355, , ,1000014, ,2254,2731,946,99
20110117559952, , ,1000015, ,0941,0531,743,85 
```

生成 69 MiB（文件）大约需要 3 秒`flights`。然后我在“时间”下运行上面的脚本（将输出重定向到文件`flights.out`）并得到输出：

```
+ awk -F, '{if(order[$1]==0)order[$1]=++counter;print order[$1]","$0;}' flights
+ sort -t, -s -k1,1n
+ sed 's/^[^,]*,//'

real    0m8.658s
user    0m7.881s
sys     0m0.441s 
```

处理 69 MiB 的时间不到 10 秒。

```
-rw-r--r--  1 jleffler  staff  69115046 Mar 13 09:04 flights
-rw-r--r--  1 jleffler  staff  69115046 Mar 13 09:06 flights.out 
```

输出文件开始：

```
20110117559486, , ,1000001, ,2670,6847,792,91
20110117559486, , ,1001621, ,2274,5287,188,57
20110117559486, , ,1001642, ,2716,6983,778,49
20110117559486, , ,1002791, ,1704,9426,430,05
...
20110117559486, , ,2501369, ,4900,8239,048,70
20110117559486, , ,2501850, ,7114,8721,684,40
20110117559489, , ,1000002, ,0278,1929,972,25
20110117559489, , ,1000090, ,0114,7462,862,55
20110117559489, , ,1000904, ,7780,8559,121,47
20110117559489, , ,1001499, ,9320,8459,592,01
...
20110117559489, , ,2499635, ,5199,8313,668,30
20110117559489, , ,2499955, ,3386,6280,102,19
20110117559489, , ,2500748, ,5740,6370,594,15
20110117559489, , ,2501534, ,1222,9866,714,24
20110117559845, , ,1000003, ,9169,4915,145,21
20110117559845, , ,1000220, ,5341,8347,724,25
20110117559845, , ,1000295, ,5722,4031,045,11
... 
```

这是在 2.3 GHz Intel Core i7 MacBook Pro、16 GiB RAM、Mac OS X 10.7.5 上运行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:36:47.667

完全不同的方法

```
awk -F',' '{print $0 >> $1;close($1)}' ~/Downloads/newtrajectory.csv 
```

需要`close()`在文件上使用，因为有很多要保持它们全部打开。

上面的 awk 脚本将输出与唯一航班 ID 一样多的文件

即，该文件`20110117559515`将包含该 id 的所有项目，依此类推。

它几乎与该方法一样快`sort`，200k 行测试文件约 5 秒。

作为后处理步骤，使用`cat`和 for 循环将所有内容连接到一个文件中。

要获取第一个唯一 ID：

```
NR>1{
  a[$1]+=1
  if (a[$1] == 2) {
    exit
  }
  else {
    print $1
  }
} 
```

然后你可以使用一个简单的while循环来连接everyting

```
 while read line; do cat $line >> final.csv; done < cnt.txt 
```

输出：

```
$ head final.csv 
20110117559572, , , , , , , , ,2390,6274,410,54
20110117559572, , , , , , , , ,2391,6268,410,101
20110117559572, , , , , , , , ,2392,6261,410,144
20110117559572, , , , , , , , ,2394,6254,410,183
20110117559572, , , , , , , , ,2395,6247,410,219
20110117559572, , , , , , , , ,2397,6240,410,251
20110117559572, , , , , , , , ,2399,6232,410,279
20110117559572, , , , , , , , ,2400,6223,410,304
20110117559572, , , , , , , , ,2402,6215,410,326
20110117559572, , , , , , , , ,2404,6207,410,347 
```

这对我来说看起来不错。

一些时间安排：

```
$ time awk -F',' '{print $0 >> $1;close($1)}' ~/Downloads/newtrajectory.csv

real    0m14.534s
user    0m4.096s
sys     0m10.101s

$ time awk -F',' -f u.awk ~/Downloads/newtrajectory.csv > cnt.txt

real    0m0.008s
user    0m0.000s
sys     0m0.008s

$ time while read line; do cat $line >> final.csv; done < cnt.txt 

real    0m4.282s
user    0m0.236s
sys     0m1.028s 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:31:30.137

这是我的解决方案尝试。

```
#!/bin/bash
declare -a ids
declare -A flights
i=0
while IFS= read -r line;
do
   id=$(echo $line | cut -d, -f1)
   if [[ -z ${flights[$id]} ]]; then
       flights[$id]=$line
       ids[$i]=$id
       i=$((i+1))
   else
       flights[$id]=${flights[$id]}$'\n'$line
   fi  
done < infile.csv
for id in "${ids[@]}"
do
    echo "${flights[$id]}"
done > outfile.csv 
```

这使用关联数组`flights`来构建包含每个航班的所有信息的字符串。此外，它使用一个普通数组`ids`来跟踪航班在文件中出现的顺序。

要输出，我们只需遍历`ids`数组并继续打印`flights`数组中的字符串。

这不会尝试进行任何类型的排序，并且只读取一次文件。

# java - 并发动作和线程

> ID：15388216
> 
> 赞同：0
> 
> 时间：2013-03-13T14:32:23.873
> 
> 标签：java, multithreading

我想同时执行两个方法，名为 A 和 B。

我也希望 B 等待 A 完成。

如何通过在 Java 中实现线程来实现这样的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:35:03.320

使用[Thread#join()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)。在要等待死亡的线程对象上调用它。

> join 方法允许一个线程等待另一个线程完成。

来自[官方教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/simple.html)的示例：

```
public class SimpleThreads {

    // Display a message, preceded by
    // the name of the current thread
    static void threadMessage(String message) {
        String threadName =
            Thread.currentThread().getName();
        System.out.format("%s: %s%n",
                          threadName,
                          message);
    }

    private static class MessageLoop
        implements Runnable {
        public void run() {
            String importantInfo[] = {
                "Mares eat oats",
                "Does eat oats",
                "Little lambs eat ivy",
                "A kid will eat ivy too"
            };
            try {
                for (int i = 0;
                     i < importantInfo.length;
                     i++) {
                    // Pause for 4 seconds
                    Thread.sleep(4000);
                    // Print a message
                    threadMessage(importantInfo[i]);
                }
            } catch (InterruptedException e) {
                threadMessage("I wasn't done!");
            }
        }
    }

    public static void main(String args[])
        throws InterruptedException {

        // Delay, in milliseconds before
        // we interrupt MessageLoop
        // thread (default one hour).
        long patience = 1000 * 60 * 60;

        // If command line argument
        // present, gives patience
        // in seconds.
        if (args.length > 0) {
            try {
                patience = Long.parseLong(args[0]) * 1000;
            } catch (NumberFormatException e) {
                System.err.println("Argument must be an integer.");
                System.exit(1);
            }
        }

        threadMessage("Starting MessageLoop thread");
        long startTime = System.currentTimeMillis();
        Thread t = new Thread(new MessageLoop());
        t.start();

        threadMessage("Waiting for MessageLoop thread to finish");
        // loop until MessageLoop
        // thread exits
        while (t.isAlive()) {
            threadMessage("Still waiting...");
            // Wait maximum of 1 second
            // for MessageLoop thread
            // to finish.
            t.join(1000);
            if (((System.currentTimeMillis() - startTime) > patience)
                  && t.isAlive()) {
                threadMessage("Tired of waiting!");
                t.interrupt();
                // Shouldn't be long now
                // -- wait indefinitely
                t.join();
            }
        }
        threadMessage("Finally!");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:35:53.633

这是您应该能够开始使用的示例双线程代码片段：

```
public class TwoThreads {
  public static void main(String args[]) throws InterruptedException {
    System.out.println("TwoThreads:Test");
    new TwoThreads().test();
  }
  // The end of the list.
  private static final Integer End = -1;

  static class Producer implements Runnable {
    final Queue<Integer> queue;

    public Producer(Queue<Integer> queue) {
      this.queue = queue;
    }

    @Override
    public void run() {
      try {
        for (int i = 0; i < 1000; i++) {
          queue.add(i);
          Thread.sleep(1);
        }
        // Finish the queue.
        queue.add(End);
      } catch (InterruptedException ex) {
        // Just exit.
      }
    }
  }

  static class Consumer implements Runnable {
    final Queue<Integer> queue;

    public Consumer(Queue<Integer> queue) {
      this.queue = queue;
    }

    @Override
    public void run() {
      boolean ended = false;
      while (!ended) {
        Integer i = queue.poll();
        if (i != null) {
          ended = i == End;
          System.out.println(i);
        }
      }
    }
  }

  public void test() throws InterruptedException {
    Queue queue = new LinkedBlockingQueue();
    Thread pt = new Thread(new Producer(queue));
    Thread ct = new Thread(new Consumer(queue));
    // Start it all going.
    pt.start();
    ct.start();
    // Wait for it to finish.
    pt.join();
    ct.join();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:39:12.577

你需要的是`Future`Java类。访问异步调用的方法的结果非常简单。
检查 Javadocs [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)以获得更好的解释。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:48:50.377

我不确定您所说的“我希望 B 等待 A 完成”是什么意思，我认为它的意思是 B 需要在 A 之后运行。

您可以使用 轻松完成此操作`ExecutorService`，在此示例中它是 a `singleThreadExecutorService`，因此可以保证在 A 之后运行 B。

唯一的问题是，如果 A 出现问题退出，它将不会被拾取，因此您可能希望分配一个看门狗线程来使用该`Future.get`方法获取 A 的状态，然后在 A 成功时调度 B。

```
public static Object a() {
    return new Object();

}

public static Object b() {
    return new Object();
}

public static class CallA implements Callable<Object> {

    public Object call() throws Exception {
        return a();
    }
}

public static class CallB implements Callable<Object> {

    public Object call() throws Exception {
        return b();
    }
}

public static void main(String[] args) {
    final ExecutorService executorService = Executors.newSingleThreadExecutor();
    final Future<Object> aFuture = executorService.submit(new CallA());
    final Future<Object> bFuture = executorService.submit(new CallB());
    try {
        aFuture.get();
        bFuture.get();
    } catch (InterruptedException ex) {
        Thread.currentThread().interrupt();
    } catch (ExecutionException ex) {
        throw new RuntimeException(ex);
    }
} 
```

我建议你不要弄乱`Thread`s 除非你知道你在做什么 - 它可能会导致危险的道路。使用`Executor`提供的 s，您遇到并发问题的可能性要小得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T14:57:46.230

在公共对象上使用等待和通知方法

```
Class ClassA implements runnable{
    Message messageA;
    public ClassA(Message messageA){
        this.messageA = messageA;
    }
    public void run(){
                    //code here
            messageA.notify();

    }
}
Class ClassB implements runnable{
    Message messageA;
    public ClassB(Message messageA){
        this.messageA = messageA;

    }
    public void run(){
            messageA.wait();
            //code here
    }
}

public static void main(){
     Message message = new Message();// a simplest object here can be String
     //ctreate thread of ClassA(message);
    //create thread of classB(message);
} 
```

线程 B 将等待，直到线程 A 发送消息对象的通知。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T14:58:16.157

[在此处](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)使用 oracle javadocs 中的 Thread#join()

# excel - 按日期范围着色的列

> ID：15388219
> 
> 赞同：0
> 
> 时间：2013-03-13T14:32:28.003
> 
> 标签：excel, excel-formula, excel-2011, vba

我有一个电子表格，其中有各种颜色填充的行，而列以文本形式设置为月份 - 'mmm'

我想要做的是格式化工作表，使当前月份的列带有阴影 - 例如 - 三月 - 以显示它是当前月份。这会随着我们进入四月等而改变

我只希望当前月份列被遮蔽，但我需要保留我原来的“填充行”，如下面的屏幕示例所示，因为它们突出显示了其他重要信息。

示例表：-![在此处输入图像描述](../Images/24c20e83b01ffb6fea9649e942bed698.png)

谁能指出我正确的方向？

非常欢迎所有建议。

我正在使用 Excel 2011 for Mac。

我希望的结果类似于以下内容：

![在此处输入图像描述](../Images/4c4705f481b1e6ca730289aad692a1e8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:02:39.937

您可以使用条件格式轻松完成此操作。

假设您的所有日期都在 E 列中，您可以执行条件格式规则，例如：

```
=MONTH($E1) = MONTH(NOW()) 
```

将其设置为您想要突出显示的所有数据，然后选择您想要的填充颜色。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:23:09.967

这是另一个适用于您的设置的条件格式公式。在您的情况下，将此格式规则从 A2 添加到 L22：

```
=LOWER(A$1)= LOWER(TEXT(NOW(),"MMM")) 
```

请注意，条件格式会覆盖您的行颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:09:10.040

如果您插入带有月份编号（A2 = 1、B2=2 等）的第二行（可以隐藏），则可以应用以下条件格式

=month(now())=A$2 然后根据需要应用格式。

您需要确保这适用于整个范围。

# c# - 时间：2019-04-10 标签：c#predefine LINQ select

> ID：15388221
> 
> 赞同：0
> 
> 时间：2013-03-13T14:32:34.493
> 
> 标签：c#, linq, select

我想将相同`SELECT`的应用程序应用于一定数量的`queries`，我该怎么做？我正在寻找某种我猜的模板？

```
var query = (from b in db.routes select new 
{ name = b.name,
age = b.age}); 
```

我想预定义 name=b.name 和 age = b.age。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:36:00.663

您可以创建带有`IEnumerable<SomeBaseClassOrInterfacee>`参数的方法。然后您可以针对方法中的给定参数进行选择。

```
public class Generic
{
    protected Generic(string name, int age)
    {
        Name = name;
        Age = age;
    }

    public string Name { get; private set; }
    public int Age { get; private set; }
}

public class Human : Generic 
{
    public Human(string name, string surname, int age) : base(name, age)
    {
        Surname = surname;
    }

    public string Surname { get; private set; }
}

public class Pet : Generic
{
    public Pet(string name, int registrationCode, int age)
        : base(name, age)
    {
        RegistrationCode = registrationCode;
    }

    public int RegistrationCode { get; private set; }
}

static void Main(string[] args)
{
    IEnumerable<Pet> pets = new List<Pet>();
    IEnumerable<Human> palls = new List<Human>();

    var resPets = SelectAgeGreaterThen10<Pet>(from p in pets where p.Name.StartsWith("A") select p);
    var resHumans = SelectAgeGreaterThen10<Human>(from p in palls where p.Name.StartsWith("B") select p);

}

private static IEnumerable<T> SelectAgeGreaterThen10<T>(IEnumerable<Generic> source) where T : Generic
{
    return from s in source where s.Age > 10 select (T)s;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:41:43.607

您的示例的棘手之处在于您使用的是匿名类型 - 这意味着您无法编写方法（您无法声明返回类型）并且您无法将 lambda 表达式分配给局部变量（您需要能够指定将 lambda 表达式转换为的类型）。

您*也*不能只使用类型推断从泛型方法返回某些内容 - 因为您无法仅指定输入类型。但是，您可以对泛型类使用类型推断：

```
public static class Functions<T>
{
    public static Func<T, TResult> Create<TResult>(Func<T, TResult> func)
    {
        return func;
    }
} 
```

然后你可以写：

```
var projection = Functions<Route>.Create(r => new { r.name, r.age });

var query = db.routes
              .Select(projection)
              ...; 
```

但是如果你真的想在多个地方使用相同的投影，你应该考虑创建一个命名的结果类型——此时你*可以*使用任何其他选项，包括转换方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:51:18.987

这个样子怎么样：

```
class NameAndAge
{
    public String Name;
    public Int32 Age;
}

class Whatever
{
    public IEnumerable<NameAndAge> GetNameAndAges(IEnumerable<dynamic> enumerable)
    {
         return from b in enumerable select new NameAndAge { Name = b.name,
                                                             Age = b.age};
    } 
} 
```

您可能希望用`dynamic`其中元素的类型替换参数类型`db.routes`。

# ruby - 以编程方式更改页面（场景）的样式，“Page.use_style =”不返回 nil

> ID：15388223
> 
> 赞同：0
> 
> 时间：2013-03-13T14:32:39.873
> 
> 标签：ruby, sketchup

我想使用[SketchUp Ruby API](http://www.sketchup.com/intl/en/developer/)[`Style`](http://www.sketchup.com/intl/en/developer/docs/ourdoc/style)更改场景（以编程方式称为 a [`Page`](http://www.sketchup.com/intl/en/developer/docs/ourdoc/page)）。

首先，我只是通过[SketchUp 中的 Ruby 控制台进行](http://www.sketchup.com/intl/en/developer/docs/tutorial_console)测试。为了清楚起见，我已经预先添加了我运行的所有代码`>`。

假设我从所有开始[`Styles`](http://www.sketchup.com/intl/en/developer/docs/ourdoc/styles)：

```
> styles = Sketchup.active_model.styles
#<Sketchup::Styles:0xad9cd08> 
```

`Style`我在 的“池”中添加了一个新的`Styles`，并检查是否可以引用它

```
> styles.add_style("MyStyle.style", false)
true
> styles["MyStyle"]
#<Sketchup::Style:0xad6f45c> 
```

当我尝试将 应用`Style`到 a `Page`（在 SketchUp GUI 中，a`Page`称为场景）时，使用[`use_style=`](http://www.sketchup.com/intl/en/developer/docs/ourdoc/page#use_style=)：

```
> pages = Sketchup.active_model.pages
#<Sketchup::Pages:0xad9cccc>
> pages[0].use_style?
true
> pages[0].style
#<Sketchup::Style:0xad7fdac>
> pages[0].style.name
[Design Style]
> styles["MyStyle"].name
MyStyle
> pages[0].use_style = styles["MyStyle"]
#<Sketchup::Style:0xad6f45c> 
```

根据 API 文档，`use_style=` **应该总是 return** `nil`，所以我觉得这里有些不对劲。无论如何，这是我`pages[0].style`在运行上面的代码后得到的：

```
> pages[0].style
#<Sketchup::Style:0xad7fdac>
> pages[0].style.name
[Design Style] 
```

在 API 中查看了更多信息后，我找到了`Page`'[`update`](http://www.sketchup.com/intl/en/developer/docs/ourdoc/page#update)方法。然而，尝试它产生了相同的结果。（无论如何，我觉得它在这里无关紧要，因为我认为它是基于用户当前的看法。）

```
> pages[0].update(2)
true
> pages[0].style.name
[Design Style] 
```

我在这里错过了什么公然的东西，还是 API 刚刚坏了？

（我正在运行 SketchUp 8.0）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:49:27.747

这应该有效：

```
styles.selected_style = styles["MyStyle"]
pages[0].update(2) 
```

* * *

API 文档并不总是正确的。有时缺乏信息，有时令人困惑，有时完全错误。

`Page.use_style=`设置页面（现在在 SketchUp 中称为场景）是否存储样式。如果您在“场景”工具窗口中选择您的页面（场景），您会看到有一系列复选框可让您保存相机、隐藏的几何体、图层、剖面等。这是您设置的属性 `Page.use_style=`

例如，选择一个页面（场景）并对其进行引用 - 保持场景窗口打开并键入以下命令：

```
page.use_style = false
UI.refresh_inspectors 
```

请注意，“样式和雾”复选框未选中。另请注意，在设置此属性时，您需要调用`UI.refresh_inspectors`以更新 UI。

# c# - Linq To SQL：按任意属性（列）名称对查询进行排序

> ID：15388230
> 
> 赞同：14
> 
> 时间：2013-03-13T14:32:58.177
> 
> 标签：c#, linq, c#-4.0, linq-to-sql

我有一个更大/更复杂的问题，但为了简单起见，让我们考虑以下问题：

假设我在**SQL 数据库**中有一个名为**Product**的表，有两列**ID** *(int, primary key)*和**Name** *(varchar/string)*。我也有一个简单的**LINQ DataContext**。

我有一个查询被构造并交给“我的”函数。让我们说它是这样的：（*虽然它可能有点复杂）*

```
IQueryable<Product> query = from p in db.Products select p; 
```

一旦我的方法得到这个查询，作为参数传入，它必须改变排序顺序，例如

```
IQueryable<Product> sortedQuery = query.OrderBy(x => x.Name); 
```

我想让它更通用，即指定要排序的字段。通常，我可以做一个`switch`带字符串的语句。但是我想知道是否有办法直接传递参数。我打算将此扩展到其他数据库表，因此这些`switch`语句会变得乏味。

我正在尝试类似的东西：

```
IQueryable<Product> sortedQuery = query.OrderBy(x => (typeof(Product)).GetProperty(“Name”)); 
```

但这不起作用。我还想确保维护 LINQ to SQL，即在 SQL Server 上进行的排序。因此，如果我调试，我应该从这个 LINQ 查询中得到一个 SQL 查询。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-13T15:16:04.913

您可以`Dynamic Linq`用于此目的。

请参阅此处[动态 LINQ（第 1 部分：使用 LINQ 动态查询库）](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

然后你可以像这样拨打电话：

```
var query = DBContext.Users.Where( "Age > 3" ).OrderBy( "Name asc" ); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T14:35:53.177

试试这个：

```
query.OrderBy(x => x.GetType().GetProperty(“Name”).GetValue(x, null)); 
```

你不能只抢财产。您需要从该属性中获取值，因此调用`GetValue`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:00:39.727

这并不像看起来那么容易。LINQ to SQL 引擎解析您传递给`OrderBy`方法的表达式以获得您正在引用的属性的名称，然后使用此信息来组成一个普通的 SQL`order by`子句。

我想也许它可以通过使用反射来完成，无论如何。[也许你可以从这个 SO question](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)的接受答案中得到一些有用的东西。

# gwt - GWT Query DropEvent：我可以得到放置坐标吗？

> ID：15388231
> 
> 赞同：0
> 
> 时间：2013-03-13T14:32:59.187
> 
> 标签：gwt, canvas, gwtquery

我正在为我的 Web 应用程序使用 GWT 和 GWT 查询插件。我有一个可拖动的图像和一个包裹在 Droppable 中的 GWT 画布。我的代码如下所示：

```
final Canvas canvas = Canvas.createIfSupported();
    canvas.setHeight("340px");
    DroppableWidget<Canvas> test = new DroppableWidget<Canvas>(canvas);

    test.addDropHandler(new DropEventHandler() {
        @Override
        public void onDrop(DropEvent event) {
            Context2d context = canvas.getContext2d();
            Image img = new Image("image");
            ImageElement i = ImageElement.as(img.getElement());
            //get x and y coordinates out of the drop event
            context.drawImage(i, x, y);
        }

    }); 
```

问题是...如何从放置事件中获取这些 x 和 y 坐标，以便可以在放置位置的画布上绘制图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:26:56.017

首先，您应该通过 DropEvent 检索您的图像元素

```
ImageElement i = ImageElement.as(event.getDraggable()); 
```

之后，如果您想知道可拖动对象的放置位置（与可放置对象相关），您可以像这样计算坐标：

```
Offest droppableOffset = $(event.getDroppable()).offset();
Offset draggableOffset = $(event.getDraggable()).offset();

int x = draggableOffset.left - droppableOffset.left;
int y = draggableOffset.top - droppableOffset.top; 
```

# java - 遵循 MVC 模式在 Java 中实现 JFileChooser

> ID：15388234
> 
> 赞同：1
> 
> 时间：2013-03-13T14:33:05.207
> 
> 标签：java, swing, model-view-controller, jfilechooser

如何/在 Java 的 MVC 架构中处理 JFileChooser 的最佳方法是什么？我的控制器正在侦听主 GUI 中的事件，它适用于其上的按钮，即控制器调用模型上的适当方法，并且它（控制器）更新视图。问题是现在我想添加一个 JFileChooser 并且我想通过控制器使用所选文件的完整路径更新模型。
我正在使用此答案中的代码[How to manage view updates from controllers in a Java Swing app](https://stackoverflow.com/questions/11066015/how-to-manage-view-updates-from-controllers-in-a-java-swing-app/) by @Hovercraft Full Of Eels 作为我项目的基础。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:41:44.227

这是一个简单的版本。此方法来自我`ActionListener`的一个由`JMenuItem`.

您必须将 GUI 框架的实例和 GUI 模型的实例传递给包含此方法的类。

```
protected int chooseOpenFile() {
    JFileChooser fileChooser = new JFileChooser(model.getSavedInputFile());

    int status = fileChooser.showOpenDialog(frame.getFrame());

    if (status == JFileChooser.APPROVE_OPTION) {
        File selectedFile = fileChooser.getSelectedFile();
        model.setSavedInputFile(selectedFile);
    }

    return status;
} 
```

# c# - C#中的旋转图片剪切图片

> ID：15388238
> 
> 赞同：3
> 
> 时间：2013-03-13T14:33:12.737
> 
> 标签：c#, .net, image

我正在尝试使用 C# 旋转图片，并且正在使用以下代码：

```
///create a new empty bitmap to hold rotated image
Bitmap returnBitmap = new Bitmap(newBMP.Width, newBMP.Height);
//make a graphics object from the empty bitmap
Graphics g = Graphics.FromImage(returnBitmap);
//move rotation point to center of image
g.TranslateTransform((float)newBMP.Width / 2, (float)newBMP.Height / 2);
//rotate
g.RotateTransform(-90);
//move image back
g.TranslateTransform(-(float)newBMP.Width / 2, -(float)newBMP.Height / 2);
//draw passed in image onto graphics object
g.DrawImage(newBMP, new Point(0, 0)); 
```

这`newBMP`是我从表单中获取的位图，我正在更改它的大小。然后我想旋转它，但是当我尝试上面的代码时，它会切割图片的顶部和底部。在这一切之后，我将新图片保存在服务器上。

一切正常，除了旋转...

有人看到问题了吗？

**解决**了我用这个：[C#将位图旋转90度](https://stackoverflow.com/questions/2225363/c-sharp-rotate-bitmap-90-degrees)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:42:28.270

如果位图的宽度大于高度，则将其旋转 90 度时将进行裁剪。打电话时需要考虑到这一点`g.TranslateTranform`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T22:24:01.013

堆栈溢出时 vb.net 刚刚回答了这个答案（对于任何角度）......

[如何使用 Graphics.RotateTransform 旋转 JPEG 而无需剪辑](https://stackoverflow.com/questions/23277221/how-to-rotate-jpeg-using-graphics-rotatetransform-without-clipping/23277295#23277295)

应该很容易转换为 C#

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-26T20:10:14.013

```
 public static Bitmap RotateImage(Bitmap image, float angle)
    {
        //create a new empty bitmap to hold rotated image

        double radius = Math.Sqrt(Math.Pow(image.Width, 2) + Math.Pow(image.Height, 2));

        Bitmap returnBitmap = new Bitmap((int)radius, (int)radius);

        //make a graphics object from the empty bitmap
        using (Graphics graphic = Graphics.FromImage(returnBitmap))
        {
            //move rotation point to center of image
            graphic.TranslateTransform((float)radius / 2, (float)radius / 2);
            //rotate
            graphic.RotateTransform(angle);
            //move image back
            graphic.TranslateTransform(-(float)image.Width / 2, -(float)image.Height / 2);
            //draw passed in image onto graphics object
            graphic.DrawImage(image, new Point(0, 0));
        }
        return returnBitmap;
    } 
```

# rest - RESTful Model，去掉GET请求中的id查询参数

> ID：15388240
> 
> 赞同：1
> 
> 时间：2013-03-13T14:33:16.660
> 
> 标签：rest, model, extjs4.1, extjs-mvc, restful-url

我有点卡在这里。我的型号代码是

```
Ext.define('MyFancyModel', {
    extend: 'Ext.data.Model',

    fields: [
        { name: 'id', type: 'string' },
        { name: 'name', type: 'string' }
    ],

    proxy: {
        type: 'rest',
        url: '/fancymodel',
        noCache: false
    }
}); 
```

当我尝试使用 id 加载数据时

```
Ext.ModelManager.getModel('MyFancyModel').load('some-id', {}); 
```

请求 url 是**/fancymodel/some-id?id=some-id**这显然是不正确的。那么如何在没有任何补丁或覆盖的情况下实现正确的请求 url： **/fancymodel/some-id ？**

**编辑：**

[jsfiddle](http://jsfiddle.net/6peZN/)

在开发者控制台中，您可以看到失败的 GET 请求

```
http://fiddle.jshell.net/fancymodel/some-id?id=some-id 
```

**编辑：**

[Sencha 论坛上的主题](http://www.sencha.com/forum/showthread.php?258809-Model-and-Rest-proxy.-Query-id-parameter-in-the-GET-request-url)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:18:27.840

我还没有找到任何 ExtJS 解决方案，所以我写了一个小补丁（不确定它是否适用于所有情况）：

```
Ext.override(Ext.data.proxy.Rest, {
    buildUrl: function (request) {
        delete request.params.id;
        return this.callParent(arguments);
    }
}); 
```

[标准](http://docs.sencha.com/ext-js/4-1/#!/guide/command_code-section-5)方式：

```
Ext.define('MyPatches.data.proxy.Rest', {
    override: 'Ext.data.proxy.Rest',
    buildUrl: function (request) {
        delete request.params.id;
        return this.callParent(arguments);
    }
}); 
```

# algorithm - 以所有独特方式在桶之间划分/分配总和的算法

> ID：15388241
> 
> 赞同：2
> 
> 时间：2013-03-13T14:33:23.267
> 
> 标签：algorithm, unique, distribution, partitioning

## 问题

我需要一个算法来做到这一点：

> 找到所有独特的方法来在不关心顺序的“桶”中划分给定的总和

我希望我是~~清除~~合理连贯地表达自己。

## 例子

对于总和 5 和 3 桶，算法应该返回的是：

> [5, 0, 0]
> [4, 1, 0]
> [3, 2, 0]
> [3, 1, 1] [2, 2, 1]

## 免责声明

如果这个问题可能是一个骗子，我很抱歉，但我不知道这些问题到底是什么。尽管如此，我还是使用我能想到的所有措辞在 Google 和 SO 上进行了搜索，但只找到了以最*均匀*的方式分发的结果，而不是所有独特的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:17:46.967

对我来说，写几行代码比写一篇关于算法的 5 页文章要容易一些。想到的最简单的版本：

```
vector<int> ans;

void solve(int amount, int buckets, int max){
  if(amount <= 0) { printAnswer(); return;}
  if(amount > buckets * max) return; // we wont be able to fulfill this request anymore

  for(int i = max; i >= 1; i--){
    ans.push_back(i);
    solve(amount-i, buckets-1, i);
    ans.pop_back();
  } 
}

void printAnswer(){
  for(int i = 0; i < ans.size(); i++) printf("%d ", ans[i]);
  for(int i = 0; i < all_my_buckets - ans.size(); i++) printf("0 ");
  printf("\n");
} 
```

它也值得改进到您堆叠您的选择的地步`solve( amount-k*i, buckets-k, i-1)`- 这样您就不会产生太深的重复。（据我所知，堆栈的大小为 O(sqrt(n)) 。

为什么没有动态规划？

我们不想找到所有这些可能性的计数，所以即使我们再次到达相同的点，无论如何我们都必须打印每个数字，所以复杂性将保持不变。

希望对你有帮助，有什么问题可以问我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:57:16.270

这是 Haskell 中依赖于[这个答案](https://stackoverflow.com/questions/4197096/list-comprehension-making-lists-of-lists/4197304#4197304)的东西：

```
import Data.List (nub, sort)

parts 0 = []
parts n = nub $ map sort $ [n] : [x:xs | x <- [1..n`div`2], xs <- parts(n - x)]

partitions n buckets = 
  let p = filter (\x -> length x <= buckets) $ parts n 
  in map (\x -> if length x == buckets then x else addZeros x) p  
    where addZeros xs = xs ++ replicate (buckets - length xs) 0

OUTPUT:
*Main> partitions 5 3
[[5,0,0],[1,4,0],[1,1,3],[1,2,2],[2,3,0]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:59:06.843

一种完全不同的方法，但如果您不关心效率或优化，您总是可以使用旧的“无桶”分区算法。然后，您可以通过检查答案中零的数量来过滤搜索。

例如`[1,1,1,1,1]`将被忽略，因为它有超过 3 个桶，但`[2,2,1,0,0]`会通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:10:32.960

这称为整数分区。

[Fast Integer Partition Algorithms](http://www.site.uottawa.ca/~ivan/F49-int-part.pdf)是一篇全面的论文，描述了执行整数分区的所有最快算法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T15:18:41.423

如果只有三个桶，这将是最简单的代码。

```
for(int i=0;i<=5;i++){
        for(int j=0;j<=5-i&&j<=i;j++){
            if(5-i-j<=i && 5-i-j<=j)
                System.out.println("["+i+","+j+","+(5-i-j)+"]");
        }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T13:33:18.833

只需在此处添加我的方法以及其他方法即可。它是用 Python 编写的，所以它实际上就像伪代码。

我的第一种方法奏效了，但效率极低：

```
def intPart(buckets, balls):
    return uniqify(_intPart(buckets, balls))

def _intPart(buckets, balls):
    solutions = []

    # base case
    if buckets == 1:
        return [[balls]]

    # recursive strategy
    for i in range(balls + 1):
        for sol in _intPart(buckets - 1, balls - i):
            cur = [i]
            cur.extend(sol)
            solutions.append(cur)

    return solutions

def uniqify(seq):
    seen = set()
    sort = [list(reversed(sorted(elem))) for elem in seq]
    return [elem for elem in sort if str(elem) not in seen and not seen.add(str(elem))] 
```

这是我重新设计的解决方案。它完全避免了通过使用 max_ 变量跟踪前一个桶中的球来“唯一化”它的需要。这会对列表进行排序并防止任何欺骗：

```
def intPart(buckets, balls, max_ = None):
    # init vars
    sols = []
    if max_ is None:
        max_ = balls
    min_ = max(0, balls - max_)

    # assert stuff
    assert buckets >= 1
    assert balls >= 0

    # base cases
    if (buckets == 1):
        if balls <= max_:
            sols.append([balls])
    elif balls == 0:
        sol = [0] * buckets
        sols.append(sol)

    # recursive strategy
    else:
        for there in range(min_, balls + 1):
            here = balls - there
            ways = intPart(buckets - 1, there, here)
            for way in ways:
                sol = [here]
                sol.extend(way)
                sols.append(sol)

    return sols 
```

只是为了全面起见，这是从 用 Perl 编写的[MJD偷来的另一个答案：](https://stackoverflow.com/users/1277934/)

```
#!/usr/bin/perl

sub part {
  my ($n, $b, $min) = @_;
  $min = 0 unless defined $min;

  # base case
  if ($b == 0) {
    if ($n == 0) { return ([]) }
    else         { return ()   }
  }

  my @partitions;
  for my $first ($min .. $n) {
    my @sub_partitions = part($n - $first, $b-1, $first);
    for my $sp (@sub_partitions) {
      push @partitions, [$first, @$sp];
    }
  }
  return @partitions;
} 
```

# ios - 字符串分配不起作用

> ID：15388244
> 
> 赞同：0
> 
> 时间：2013-03-13T14:33:35.117
> 
> 标签：ios, uiviewcontroller, nsstring

我想在两个视图控制器之间传递一个字符串，但总是（空）

我的代码

GridViewController.h

```
 #import <UIKit/UIKit.h>

 @interface GridViewController : UIViewController {

 }

 @property (nonatomic, strong)UILabel * labelTitle;

 @end 
```

视图控制器.m

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:
    (NSIndexPath *)indexPath{

       NSString *currow =[self.mutableArray objectAtIndex:indexPath.row];
       NSLog(@"the string is %@", currow);
       //the string is Grappe, Brandy and Cognac

       GridViewController * grid = [[GridViewController alloc]initWithNibName:@"GridViewController~iPhone" bundle:nil];

       grid.labelTitle.text = currow;

       NSLog(@"the string is %@", grid.labelTitle.text);
       //the string is (null)

       NSLog(@"the string is  %@", currow);
       //the string is Grappe, Brandy and Cognac

    [self.navigationController pushViewController:grid animated:YES];

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:37:36.870

在您将文本分配给它时，不存在 labelTitle 实例。Label 从 xib 实例化，然后它才能保存该值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:37:41.200

`labelTtitle`是 的 GUI 元素，`GridViewController`当您尝试在其他类中访问时它不会获得任何值，您最好尝试`NSString` 在您的类中创建一个`GridViewController`并将值分配给其他类中的此字符串，但是当您加载您`viewDidLoad`的`GridViewController`时像这样将此字符串分配给您的标签

```
-(void)viewDidLoad{

    [super viewDidLoad]; 
    self.labelTitle.text=self.stringYouCreated;

} 
```

在`ViewController.m`为您创建的字符串属性赋值时，`GridViewcontroller`像这样

```
 grid.stringYouCreated = currow; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:39:31.843

你`labelTitle`似乎是零。它应该是用以下`viewDidLoad`方法创建的`GridViewController`

# google-app-engine - 如何在 NDB 查询中将 python 日期与 DateTimeProperty 进行比较

> ID：15388245
> 
> 赞同：5
> 
> 时间：2013-03-13T14:33:36.583
> 
> 标签：google-app-engine, python-2.7, app-engine-ndb

我在尝试使用 python 日期对象过滤 NDB 查询中的 DateTimeProperty 时遇到了一些困难。我意识到 DateTimeProperty (some_date) 没有日期属性，但是我可以做一些简单的事情，如下所示：

```
cls.query(supplied_date == cls.some_date.date).fetch() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:52:55.023

不改变你的模型是不可能的。

最简单的选择是在 datetime 属性上使用两个不等式过滤器（> date 00:00 和 <= date 23:59），但是您不能在查询中使用任何其他不等式。

（一个？）其他选项是引入第二个属性，其中包含您过滤的日期值：

```
class YourModel(ndb.Model):
  some_datetime = ndb.DateTimeProperty()
  some_date = ndb.ComputedProperty(lambda self: self.some_datetime.date) 
```

如果您只需要按日期过滤，那么您的 datetime 属性可以具有`indexed=False`，否则您将需要额外索引的成本。

# django - 如何使用 DetailView 覆盖不存在的对象的视图？

> ID：15388246
> 
> 赞同：1
> 
> 时间：2013-03-13T14:33:40.950
> 
> 标签：django, admin

当对象不存在时，我想覆盖对象的管理员默认详细信息视图以使用不同的模板，即

```
<mydomain>/admin/<myapp>/<mymodel>/<someidthatdoesexist>/ 
```

应该呈现默认的对象详细信息视图，并且

```
<mydomain>/admin/<myapp>/<mymodel>/<someidthatdoesNOTexist>/ 
```

应该呈现一个自定义模板，而不是默认的 404 错误。

从我读过的内容来看，我应该使用`django.views.generic.detail.DetailView`，但我不确定如何实现我想要的。

我试过了：

```
<b>in urls.py</b>

    url(r'^admin/<myapp>/<mymodel>/(?P<pk>\d+)/$', views.MyModelDetailView.as_view(), name='mymodel_detail'),
    url(r'^admin/', include(admin.site.urls)),

<b>in models.py</b>

class MyModelDetailView(DetailView):

    model = MyModel

    def get(self, request, *args, **kwargs):
        try:
            self.model.objects.get(pk=kwargs['pk'])           
            return super(MyModelDetailView, self).get(request, **kwargs)
        except Http404:
            # render custom template 
```

但我得到一个`TemplateDoesNotExist`错误：

```
<myapp>/mymodel_detail.html 
```

当对象存在时，我应该设置什么模板来呈现默认对象详细信息视图？

**编辑**

从[这里](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/#detailview)给出的示例中，不需要设置模板...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:01:45.113

`DetailView`不会`TemplateDoesNotExist`在其源代码中的任何地方引发。因此，引发异常的唯一可能位置是在您的重定向 ( `return redirect(url)`) 中。

顺便说一下，浏览基于类的视图代码的一个非常有用的地方是[http://ccbv.co.uk/projects/Django/1.5/django.views.generic.detail/Det ​​ailView/ 上的经典视图](http://ccbv.co.uk/projects/Django/1.5/django.views.generic.detail/DetailView/)

至于在对象不存在时渲染自定义模板，您可以轻松地修改您的`get`函数以使其工作：

```
class MyModelDetailView(DetailView):
    model = MyModel
    template_name = 'object_is_found.html' # <= make sure to have this

    def get(self, request, *args, **kwargs):
        try:
            self.object = self.get_object()
        except Http404:
            # return custom template
            return render(request, 'no_object.html', status=404)
        context = self.get_context_data(object=self.object)
        return self.render_to_response(context) 
```

# css - 在不知道父级位置的情况下选择了一个类的第一个实例

> ID：15388252
> 
> 赞同：1
> 
> 时间：2013-03-13T14:33:58.343
> 
> 标签：css, css-selectors

我试图始终选择“.chartKeyListItem”类的第一个元素。它位于父级“chartKey”下。因此，如果它是第一个元素，这对第一个子选择器非常有效，但有时我在它之前有 3 个项目，所以我必须使用 nth-selector(4) 这适用于该实例。但是我的代码应该能够同时处理这两者而不会互相破坏。（如果加载了两个 CSS 类，它会这样做，因为对于第一个实例，它针对第一个和第四个“chartKeyListItem”）有没有办法只选择第一个“.chartKeyListItem”？

此外，chartKeyListItem div 的数量并不确定，可以在 2 到 20 之间，MinMax 标签只会显示在某些页面上，但 CSS 需要能够处理它们存在和不存在的情况。 ..

下面的代码： 实例 1：

```
<div class='chartKey'>"
    <div class='chartKeyListItem'> //Just want to add margin to this one
    <div class='chartKeyListItem'>
    <div class='chartKeyListItem'>
    <div class='chartKeyListItem'> //THIS ONE GETS BOTH CLASSES WHICH I DONT WANT
</div> 
```

实例 2：

```
<div class='chartKey'>"
    <div class='pollResultsMinMaxLabel' style='width:auto;float:left;margin-left:20px;'>Min</div>
    <div class='pollResultsMinMaxLabel' style='width:auto;float:left;margin-left:20px;'>Max</div>
    <br/>
    <div class='chartKeyListItem'> //Just want to add margin to this one
    <div class='chartKeyListItem'>
    <div class='chartKeyListItem'>
    <div class='chartKeyListItem'>
    <div class='chartKeyListItem'> //This one will get both class too
</div> 
```

CSS：

```
.chartKeyListItem:first-child{
     margin-left: 60px !important;
 }
.chartKeyListItem:nth-child(4) {
     margin-left: 60px !important;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:38:31.627

为此，您需要某种`first-of-class`选择器，遗憾的是我们还没有。但是，您可以达到相同的效果:)

```
.chartKeyListItem {
   margin-left: 60px !important;
}

.chartKeyListItem ~ .chartKeyListItem {
   margin-left: 0 !important;
} 
```

它是如何工作的：您正在为该类设置样式，然后该类前面的该类的任何实例都被覆盖为 0 margin-left。[您可以在此处](https://stackoverflow.com/questions/10782054/what-does-the-css-tilde-squiggle-twiddle-selector-do)了解其`~`工作原理。

# javascript - AddThis - 打开和关闭它

> ID：15388255
> 
> 赞同：0
> 
> 时间：2013-03-13T14:34:07.407
> 
> 标签：javascript, addthis

我遇到了一个问题，我似乎可以找到解决办法。

本质上，我有一个带有“addthis_button”类的按钮，将鼠标悬停在按钮上会显示 AddThis 框。完美运行:)

但是，我需要根据用户在页面周围的其他操作来打开和关闭它，是否可以在需要时打开和关闭 AddThis 悬停事件？

例如，我的页面顶部有一个显示“分享”的按钮。滚动它会显示 AddThis。然后我去点击页面上的一些东西。分享按钮已经很好地变灰了，但是当我翻过它时，我仍然得到 AddThis。

我已经尝试完全重新初始化 AddThis，但无济于事。

感谢您提供的任何帮助。

编辑：jsFiddle 链接 hjsfiddle.net/49Pgf/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:18:36.240

我认为这应该可以禁止 AddThis 在悬停时显示菜单：

```
addthis.button('.addthis_button', {ui_click:true}, {}); 
```

这需要实际单击您的链接以显示菜单。然后当然，您可以通过调用相反的方法重新启用它：

```
addthis.button('.addthis_button', {ui_click:false}, {}); 
```

希望这对你有用。

# java - 休眠代理

> ID：15388256
> 
> 赞同：3
> 
> 时间：2013-03-13T14:34:08.783
> 
> 标签：java, hibernate

我正在使用休眠进行持久化。在我的数据访问层中，我根据场景指定了要急切加载的结果的某些部分。

现在我需要将这些结果作为 JAX WS 响应发送。

有什么方法可以让我有一些更简洁的方法，它将获取一个实体对象，遍历它，并设置为未初始化的字段，以便当对象传递到 Web 服务层时`null`休眠不会抛出。`LazyInitializationException`

或者有没有其他方法可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:51:17.637

有诸如[Hibernate#initialize()](http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/4.1.9.Final/org/hibernate/Hibernate.java#Hibernate.initialize%28java.lang.Object%29)之类的东西，您可以在加载实体后在活动会话中运行，但它会在您传递的实体（或集合）的根级别初始化字段/引用 - 如果实体是 Hibernate代理人。正如 JavaDoc 所述：

> 注意：这只确保代理对象或集合的初始化；不能保证集合内的元素将被初始化/物化。

将 NULL 分配给未初始化的字段不是一个好方法，因为它会破坏数据的一致性（如果有人访问这些字段，那么他们应该返回实际值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:04:43.860

如果您使用的是 Spring，则可以使用 OpenSessionInView(Interceptor|Filter)。这是延迟初始化异常的简单修复，因为它将会话边界与请求边界对齐。我通常不喜欢这种方法，因为它通过对数据库进行额外查询以获取代理数据，从而消除了错误。

在像您这样的情况下，我的偏好是使用具有您对每个呼叫感兴趣的特定字段的传输对象。来回发送不必要的数据是没有意义的，或者更糟的是，发送歪曲持久层实际状态的数据是没有意义的。

我实际上会更进一步，让您的会话边界保持原样，并确保您的 DAO 方法返回的是传输对象而不是实体。人们经常会争辩说实体只是 POJO，这只是更多的工作。但现实情况是，正如您的问题所示，将实体视为 POJO 的尝试可能会导致隐式数据访问，该访问属于专用于数据访问的层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:44:03.647

我在这里有相同的架构，我们在业务层进行加载工作。无法自动执行此操作，因为您只知道 ws 响应中需要哪些数据。基本上，我有一个方法可以将实体模型（JPA 映射）转换为简单的 POJO，反之亦然，在这种方法中我解决了需要加载哪个属性。

你可以使用这样的东西：

```
public interface IBusiness<Model, VO> {

    public Model toModel(VO vo);
    public VO toVO(Model model);
    public List<Model> toModelList(List<VO> vos);
    public List<VO> toVOList(List<Model> models);

} 
```

您在业务层上实现此接口并解决在此方法中加载您需要的所有内容的惰性问题。

祝你好运=）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:42:35.207

另一种方法可能是根本不使用延迟初始化。

如何做到这一点取决于您处理的情况。您将在 SO 上找到答案。

# wso2 - WSO2 身份服务器和 Active Directory 集成

> ID：15388264
> 
> 赞同：0
> 
> 时间：2013-03-13T14:34:55.590
> 
> 标签：wso2, federated-identity, wso2carbon

所以我一直在玩 WSO2 身份服务器，我不得不说它对我的伤害大于它的帮助。无论如何，我对如何与 Active Directory 集成有疑问。我已经到了可以在 WSO2 IS 中看到我所有 AD 的用户和组的地步。但是，我遇到了以下情况：

*   我无法使用任何 AD 凭据登录 WSO2 IS。
*   我无法在 WSO2 中为 AD 用户配置域 (foo.com\)。
*   当我以管理员身份登录 WSO2 时，我看到所有 AD 用户，但他们没有任何角色（组）。不知何故，当 WSO2 从 AD 读取这些用户时，它不会读取用户所属的 AD 组。

我漫长而无聊的 WSO2 IS 配置：

```
<UserManager>
  <Realm>
    <Configuration>
      <AdminRole>admin</AdminRole>
      <AdminUser>
        <UserName>admin</UserName>
        <Password>admin</Password>
      </AdminUser>
      <EveryOneRoleName>everyone</EveryOneRoleName>
      <!-- By default users in this role sees the registry root -->
      <Property name="dataSource">jdbc/WSO2CarbonDB</Property>
      <Property name="MultiTenantRealmConfigBuilder">org.wso2.carbon.user.core.config.multitenancy.CommonLDAPRealmConfigBuilder</Property>
    </Configuration>

    <UserStoreManager class="org.wso2.carbon.user.core.ldap.ReadWriteLDAPUserStoreManager">
      <Property name="defaultRealmName">WSO2.ORG</Property>
      <Property name="kdcEnabled">false</Property>
      <Property name="ConnectionURL">ldap://localhost:${Ports.EmbeddedLDAP.LDAPServerPort}</Property>
      <Property name="ConnectionName">uid=admin,ou=system</Property>
      <Property name="ConnectionPassword">admin</Property>
      <Property name="passwordHashMethod">SHA</Property>
      <Property name="UserNameListFilter">(objectClass=person)</Property>
      <Property name="UserEntryObjectClass">identityPerson</Property>
      <Property name="UserSearchBase">ou=Users,dc=wso2,dc=org</Property>
      <Property name="UserNameSearchFilter">(&amp;(objectClass=person)(uid=?))</Property>
      <Property name="UserNameAttribute">uid</Property>
      <Property name="PasswordJavaScriptRegEx">^[\\S]{5,30}$</Property>
      <Property name="ServicePasswordJavaRegEx">^[\\S]{5,30}$</Property>
      <Property name="ServiceNameJavaRegEx">^[\\S]{2,30}/[\\S]{2,30}$</Property>
      <Property name="UsernameJavaScriptRegEx">^[\\S]{3,30}$</Property>
      <Property name="UsernameJavaRegEx">[a-zA-Z0-9._-|//]{3,30}$</Property>
      <Property name="RolenameJavaScriptRegEx">^[\\S]{3,30}$</Property>
      <Property name="RolenameJavaRegEx">[a-zA-Z0-9._-|//]{3,30}$</Property>
      <Property name="ReadLDAPGroups">true</Property>
      <Property name="WriteLDAPGroups">true</Property>
      <Property name="EmptyRolesAllowed">true</Property>
      <Property name="GroupSearchBase">ou=Groups,dc=wso2,dc=org</Property>
      <Property name="GroupNameListFilter">(objectClass=groupOfNames)</Property>
      <Property name="GroupEntryObjectClass">groupOfNames</Property>
      <Property name="GroupNameSearchFilter">(&amp;(objectClass=groupOfNames)(cn=?))</Property>
      <Property name="GroupNameAttribute">cn</Property>
      <Property name="MembershipAttribute">member</Property>
      <Property name="UserRolesCacheEnabled">true</Property>
      <Property name="UserDNPattern">uid={0},ou=Users,dc=wso2,dc=org</Property>
      <Property name="SCIMEnabled">true</Property>
      <Property name="maxFailedLoginAttempt">0</Property>
    </UserStoreManager>

    <UserStoreManager class="org.wso2.carbon.user.core.ldap.ReadOnlyLDAPUserStoreManager">
      <Property name="ReadOnly">true</Property>
      <Property name="MaxUserNameListLength">100</Property>
      <Property name="ConnectionURL">ldap://10.10.10.72:389</Property>
      <Property name="ConnectionName">CN=Firstname Lastname,OU=Users,OU=New York,OU=Offices,DC=foo,DC=bar,DC=com</Property>
      <Property name="ConnectionPassword">Password1*</Property>
      <Property name="passwordHashMethod">SHA</Property>
      <Property name="UserSearchBase">ou=Users,dc=wso2,dc=org</Property>
      <Property name="UserNameListFilter">(objectClass=person)</Property>
      <Property name="UserNameAttribute">sAMAccountName</Property>
      <Property name="ReadLDAPGroups">false</Property>
      <Property name="GroupSearchBase">ou=Groups,dc=wso2,dc=org</Property>
      <Property name="GroupNameListFilter">(objectClass=groupOfNames)</Property>
      <Property name="GroupNameAttribute">cn</Property>
      <Property name="MembershipAttribute">member</Property>
      <Property name="UserRolesCacheEnabled">true</Property>
      <Property name="ReplaceEscapeCharactersAtUserLogin">true</Property>
      <Property name="maxFailedLoginAttempt">0</Property>
      <!--Property name="DomainName">foo.com</Property-->
    </UserStoreManager>

    <UserStoreManager class="org.wso2.carbon.user.core.ldap.ActiveDirectoryUserStoreManager">
      <Property name="defaultRealmName">NYSTSTest</Property>
      <Property name="kdcEnabled">false</Property>
      <Property name="ConnectionURL">ldap://10.10.10.72:389</Property>
      <Property name="ConnectionName">CN=Firstname Lastname,OU=Users,OU=New York,OU=Offices,DC=foo,DC=bar,DC=com</Property>
      <Property name="ConnectionPassword">Password1*</Property>
      <Property name="passwordHashMethod">PLAIN_TEXT</Property>
      <Property name="UserSearchBase">OU=Users,OU=New York,OU=Offices,DC=foo,DC=bar,DC=com</Property>
      <Property name="UserEntryObjectClass">person</Property>
      <Property name="UserNameAttribute">sAMAccountName</Property>
      <Property name="isADLDSRole">false</Property>
      <Property name="userAccountControl">512</Property>
      <Property name="UserNameListFilter">(objectClass=person)</Property>
      <Property name="UserNameSearchFilter">(&amp;(objectClass=user)(cn=?))</Property>
      <Property name="UsernameJavaRegEx">[a-zA-Z0-9._-|//]{3,30}$</Property>
      <Property name="UsernameJavaScriptRegEx">^[\\S]{3,30}$</Property>
      <Property name="PasswordJavaScriptRegEx">^[\\S]{5,30}$</Property>
      <Property name="RolenameJavaScriptRegEx">^[\\S]{3,30}$</Property>
      <Property name="RolenameJavaRegEx">[a-zA-Z0-9._-|//]{3,30}$</Property>
      <Property name="ReadLDAPGroups">true</Property>
      <Property name="WriteLDAPGroups">false</Property>
      <Property name="EmptyRolesAllowed">true</Property>
      <Property name="GroupSearchBase">OU=Groups,OU=New York,OU=Offices,DC=foo,DC=bar,DC=com</Property>
      <Property name="GroupEntryObjectClass">group</Property>
      <Property name="GroupNameAttribute">sAMAccountName</Property>
      <Property name="MembershipAttribute">member</Property>
      <Property name="GroupNameListFilter">(objectCategory=group)</Property>
      <Property name="GroupNameSearchFilter">(&amp;(objectClass=group)(cn=?))</Property>
      <Property name="UserRolesCacheEnabled">true</Property>
      <!--Property name="Referral">follow</Property-->
      <Property name="BackLinksEnabled">false</Property>
      <Property name="maxFailedLoginAttempt">0</Property>
      <!--Property name="DomainName">foo.com</Property-->
    </UserStoreManager>

    <AuthorizationManager
            class="org.wso2.carbon.user.core.authorization.JDBCAuthorizationManager">
      <Property name="AdminRoleManagementPermissions">/permission</Property>
      <Property name="AuthorizationCacheEnabled">true</Property>
    </AuthorizationManager>
  </Realm>
</UserManager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:23:17.580

您似乎配置了多个用户存储。在这种情况下，您需要使用此属性指定一个域名：

```
 <!--Property name="DomainName">foo.com</Property--> 
```

请参阅：[http](http://docs.wso2.org/wiki/display/IS400/Configuring+Multiple+User+Stores) ://docs.wso2.org/wiki/display/IS400/Configuring+Multiple+User+Stores 。

希望这会有所帮助，伊莎贝尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T21:54:20.677

这在最新的 WSO2 IS 版本中得到了解决，但仍在 Alpha 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T15:06:55.107

我正在经历，我相信的，完全相同的事情。当我查看“角色”时，一切看起来都很好，我可以看到扮演该角色的用户。但是当我从用户那里去并尝试查看它分配给了哪些角色时，它说没有分配任何角色。 [wso2 api manager 1.6.0 使用 ActiveDirectoryUserStoreManager 管理用户存储的问题](https://stackoverflow.com/questions/22989985/wso2-api-manager-1-6-0-problems-with-user-store-management-using-activedirectory)

你是如何让你的设置工作的，它是否仍在使用 API-manager 1.6.0？

# c++ - SIGSEGV 使用汇编访问数组元素时

> ID：15388269
> 
> 赞同：0
> 
> 时间：2013-03-13T14:34:59.700
> 
> 标签：c++, arrays, segmentation-fault, inline-assembly, gnu-assembler

## 背景：

我是组装新手。当我学习编程时，我编写了一个程序，它实现了高达 1000 * 1000 的乘法表。这些表被格式化，以便每个答案都在线`factor1 << 10 | factor2`（我知道，我知道，它不漂亮）。然后将这些表加载到数组中：`int* tables`. 空行用 0 填充。[这](http://dl.dropbox.com/u/97304035/tables.multiplicationTables)是表格文件的链接 (7.3 MB)。我知道使用汇编不会大大加快速度，但我只是为了好玩（和一些练习）。

## 问题：

我正在尝试将此代码转换为内联汇编（`tables`是全局的）：

```
int answer;
// ...
answer = tables [factor1 << 10 | factor2]; 
```

这就是我想出的：

```
asm volatile ( "shll $10, %1;"
           "orl %1, %2;"
           "movl _tables(,%2,4), %0;" : "=r" (answer) : "r" (factor1), "r" (factor2) ); 
```

我的 C++ 代码工作正常，但我的程序集失败了。**与我的 C++ 相比，****我的程序集（尤其是零件）有什么问题`movl _tables(,%2,4), %0;`**

## 我为解决它所做的工作：

我使用了一些随机数： 89 796`factor1`和`factor2`. 我*知道*`89 << 10 | 786`（即）处有一个元素`91922`——用 C++ 验证了这一点。当我运行它时`gdb`，我得到一个 SIGSEGV：

> 程序收到信号 SIGSEGV，分段错误。

在这一行：

```
"movl _tables(,%2,4), %0;" : "=r" (answer) : "r" (factor1), "r" (factor2) ); 
```

我在我的周围添加了两种方法`asm`，这就是我知道`asm`块在反汇编中的位置。

### `asm`我的块的拆卸：

拆卸`objdump -M att -d`看起来不错（虽然我不确定，我是组装新手，正如我所说）：

```
402096: 8b 45 08                mov    0x8(%ebp),%eax
402099: 8b 55 0c                mov    0xc(%ebp),%edx
40209c: c1 e0 0a                shl    $0xa,%eax
40209f: 09 c2                   or     %eax,%edx
4020a1: 8b 04 95 18 e0 47 00    mov    0x47e018(,%edx,4),%eax
4020a8: 89 45 ec                mov    %eax,-0x14(%ebp) 
```

反汇编来自`objdump -M intel -d`：

```
402096: 8b 45 08                mov    eax,DWORD PTR [ebp+0x8]
402099: 8b 55 0c                mov    edx,DWORD PTR [ebp+0xc]
40209c: c1 e0 0a                shl    eax,0xa
40209f: 09 c2                   or     edx,eax
4020a1: 8b 04 95 18 e0 47 00    mov    eax,DWORD PTR [edx*4+0x47e018]
4020a8: 89 45 ec                mov    DWORD PTR [ebp-0x14],eax 
```

据我了解，它将我`void calc ( int factor1, int factor2 )`函数的第一个参数移动到`eax`. 然后它将第二个参数移动到`edx`. 然后它向左移动`eax`10 并`or`用 s 它`edx`。一个 32 位整数是 4 个字节，所以[`[edx*4+base_address]`](http://cs.smith.edu/%7Ethiebaut/ArtOfAssembly/CH05/CH05-2.html#HEADING2-4). 将结果移动到`eax`然后放入`eax`（`int answer`我猜它在`-0x14`堆栈上）。**我真的看不出有什么问题。**

### 编译器的反汇编`.exe`：

当我`asm`用普通的 C++ ( `answer = tables [factor1 << 10 | factor2];`) 替换块并反汇编它时，这就是我在 Intel 语法中得到的：

```
402096: a1 18 e0 47 00          mov    eax,ds:0x47e018
40209b: 8b 55 08                mov    edx,DWORD PTR [ebp+0x8]
40209e: c1 e2 0a                shl    edx,0xa
4020a1: 0b 55 0c                or     edx,DWORD PTR [ebp+0xc]
4020a4: c1 e2 02                shl    edx,0x2
4020a7: 01 d0                   add    eax,edx
4020a9: 8b 00                   mov    eax,DWORD PTR [eax]
4020ab: 89 45 ec                mov    DWORD PTR [ebp-0x14],eax 
```

AT&T 语法：

```
402096: a1 18 e0 47 00          mov    0x47e018,%eax
40209b: 8b 55 08                mov    0x8(%ebp),%edx
40209e: c1 e2 0a                shl    $0xa,%edx
4020a1: 0b 55 0c                or     0xc(%ebp),%edx
4020a4: c1 e2 02                shl    $0x2,%edx
4020a7: 01 d0                   add    %edx,%eax
4020a9: 8b 00                   mov    (%eax),%eax
4020ab: 89 45 ec                mov    %eax,-0x14(%ebp) 
```

我对 Intel 语法不是很熟悉，所以我将尝试理解 AT&T 语法：

它首先将`tables`数组的基地址移动到`%eax`. 然后，将第一个参数移入`%edx`. 它向左移动`%edx`10，然后`or`使用第二个参数。然后，通过`%edx`向左移动 2，它实际上乘以`%edx`4。然后，它将它添加到`%eax`（数组的基地址）。所以，基本上它只是这样做了：（`[edx*4+0x47e018]`英特尔语法）或`0x47e018(,%edx,4)`AT&T。它移动它进入的元素的值`%eax`并将其放入`int answer`. **这种方法更“扩展”，但它和我的手写组装一样！那么为什么我`SIGSEGV`的编译器工作正常呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:45:38.553

我打赌（从反汇编中）这`tables`是一个指向数组的指针，而不是数组本身。

所以你需要：

```
 asm volatile ( "shll $10, %1;"
        movl  _tables,%%eax
       "orl %1, %2;"
       "movl (%%eax,%2,4)",
       : "=r" (answer) : "r" (factor1), "r" (factor2) : "eax" ) 
```

（不要忘记最后一行中的额外破坏）。

当然有变化，如果代码在循环中，这可能会更有效：

```
 asm volatile ( "shll $10, %1;"
       "orl %1, %2;"
       "movl (%3,%2,4)",
       : "=r" (answer) : "r" (factor1), "r" (factor2), "r"(tables) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:42:17.020

这是对 Mats Petersson 答案的补充——我之所以写它只是因为我并不清楚为什么 OP 对反汇编的分析（他的汇编和编译器生成的反汇编是等价的）是不正确的。

正如 Mats Petersson 解释的那样，问题在于它`tables`实际上是一个指向数组的指针，因此要访问一个元素，您必须取消引用两次。现在对我来说，在编译器生成的代码中发生这种情况*并不*清楚。罪魁祸首是这条看似无辜的线：

```
a1 18 e0 47 00          mov    0x47e018,%eax 
```

对于未经训练的眼睛（包括我的眼睛）来说，这可能看起来像是将*值* `0x47e018`移动到`eax`，但实际上并非如此。相同操作码的 Intel 语法表示为我们提供了线索：

```
a1 18 e0 47 00          mov    eax,ds:0x47e018 
```

啊 - `ds:`- 所以它实际上不是一个值，而是一个地址！

对于现在想知道的任何人，以下是用于将*值* `0x47e018`移动到的操作码和 ATT 语法程序集`eax`：

```
b8 18 e0 47 00          mov    $0x47e018,%eax 
```

# dry - 有没有一种 DRY 方法可以重用 forloop？

> ID：15388270
> 
> 赞同：3
> 
> 时间：2013-03-13T14:35:01.830
> 
> 标签：dry

假设我有一个稍微复杂的 for 循环，用于不同的情况。有没有办法提取那个forloop并且仍然保持代码可读？

例如：

```
private function bar(){
    for(i=0;i<arrayA.length;i++){
       if(arrayA[i].someVar == foobar){
         doSomethingA();
       }
    }
}
private function foo(){
    for(i=0;i<arrayA.length;i++){
       if(arrayA[i].someVar == foobar){
         doSomethingB();
       }
    }
} 
```

我会这样做/回答问题的方式是写这样的东西：

```
private function loopFunction(callback:Function){
        for(i=0;i<arrayA.length;i++){
           if(arrayA[i].someVar == foobar){
             callback();
           }
        }
    }
  private function bar(){
       loopFunction(doSomethingA);
  }
  private function foo(){
       loopFunction(doSomethingB);
   } 
```

但是我发现这种方法有时会使代码变得难以阅读，因为您不太确定谁在什么时候做什么。特别是如果传入的函数来自另一个类。有一个更好的方法吗？

此解决方案可能不起作用的另一个原因是您是否需要将不同的参数传递给回调函数。例如。

```
private function bar(){
        for(i=0;i<arrayA.length;i++){
           if(arrayA[i].someVar == foobar){
             doSomethingA(arrayA);
           }
        }
    }
    private function foo(){
        for(i=0;i<arrayA.length;i++){
           if(arrayA[i].someVar == foobar){
             doSomethingB(i);
           }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:41:42.590

正如其他人指出的那样，[高阶函数](http://en.wikipedia.org/wiki/Higher-order_function)如`map`,`fold`和`filter`提供这种功能。当然，精确的实现会因语言而异。

这是 C# 中的示例：

```
var foobarList = arrayA.Where(x => x.someVar == foobar).ToList();
foobarList.ForEach(x => doSomethingA());
foobarList.ForEach(x => doSomethingB()); 
```

和 VB.NET：

```
Dim foobarList = arrayA.Where(Function(x) x.someVar = foobar).ToList()
foobarList.ForEach(Function(x) doSomethingA())
foobarList.ForEach(Function(x) doSomethingB()) 
```

和 Javascript：

```
var foobarList = arrayA.filter(function(x) { return x.someVar == foobar });
foobarList.forEach(function(x) { doSomethingA(); });
foobarList.forEach(function(x) { doSomethingB(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:39:32.483

当它使您的代码变得更糟时，您应该停止抽象:)

许多语言都内置了更高级别的结构来处理常见的迭代模式。C++11 具有基于范围的 for 循环，以减少对数据结构的迭代。函数式语言通常有`map`,`fold`和`filter`.

# linq - 有条件地删除 SQL 行

> ID：15388278
> 
> 赞同：0
> 
> 时间：2013-03-13T14:35:08.580
> 
> 标签：linq, windows-phone-7, linq-to-sql, sql-server-ce

在 Windows Phone 7.1 上使用 Linq 2 SQL CE，如何触发“DELETE FROM table_name WHERE some_column=some_value”SQL 命令？

不幸的是，即使在将“最大缓冲区大小”参数增加到 1024 之后，使用 Table.DeleteAllOnSubmit() 方法擦除项目的速度也非常慢：stupud Linq 会反序列化每条记录，因此 DataContext.SubmitChanges() 方法永远不会返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:59:16.107

您无法触发所需的 DELETE 语句，但可以执行以下操作：

使用 .Take(100) 仅 fetech 并删除每个 SubmitChanges() 调用的一组记录，并在循环中运行，直到不再返回任何行。

在我的测试中，使用 rowversion 列加快删除速度，从 320 毫秒到 70 毫秒以下 - 请参阅[http://erikej.blogspot.dk/2012/04/windows-phone-local-database-tip.html](http://erikej.blogspot.dk/2012/04/windows-phone-local-database-tip.html)

# javascript - 如何使用 jQuery 中加载页面的新标题更改 .load() 上的页面标题

> ID：15388279
> 
> 赞同：2
> 
> 时间：2013-03-13T14:35:14.160
> 
> 标签：javascript, jquery, html

我对`.load()`and感到困惑`$.ajax`。我的 jQuery 代码如下`index.html`：

```
$('.load_ext').click(function(e) {    
    var url = $(this).attr("href");
    parentContainer.append($(document.createElement("div")).load(url + ' #content_to_load').html('<p class="loading">Loading&#8230;</p>').hide().fadeIn('slow'));
}) 
```

和 HTML：

```
<a href="test.html" class="load_ext">test</a> 
```

在上面的示例中，我从`test.html`（ id 的内容`#content_to_load`）加载部分内容。我还想获取该页面的标题并将标题页`test.html`替换为该`index.html`页面。

我尝试做类似的事情：

```
var url = $(this).attr("href");
parentContainer.append($(document.createElement("div")).load(url + ' #content_to_load', function() { 
     console.log($(document).attr('title'));
}).html('<p class="loading">Loading&#8230;</p>').hide().fadeIn('slow')); 
```

没有任何运气。它给了我当前页面的标题。如何通过执行以下操作替换标题：

```
$('title').text(newPageTitle); 
```

谢谢！

* * *

**编辑：** 感谢@Jeff Schafer、@dystroy 和@zeroflagL，我设法解决了这个问题。这是更改后的代码：

```
var url = $(this).attr("href");
parentContainer.append($(document.createElement("div")).load(url + ' #content_to_load', function(responseText) {
  var title = responseText.match(/<title>([^<]*)/)[1];
  document.title = title;
}).html('<p class="loading">Loading&#8230;</p>').hide().fadeIn('slow')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:50:44.720

主要问题`load`是 jQuery 在构建 DOM 片段时会剥离不是主体的内容。您可以使用它来获取远程页面的标题：

```
$.get(url, function(html){
    var matches = html.match(/<title>([^<]*)/);
    if (matches.length>0) {
        var title = matches[1];
        document.title = title;
    }
}); 
```

请注意，如果远程页面来自不同的来源并且不明确允许跨域请求，这将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:50:35.487

可以通过responseText获取新页面的标题：

`.load(url + ' #content_to_load', function(responseText) {`

`repsonseText`字面意思是文本，但是，页面的源代码。例如，您可以使用正则表达式来提取`test.html`. 然后您可以使用 更改标题`document.title = newTitle`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:36:36.510

试试这个代码来改变页面标题

```
document.title = newPageTitle; 
```

希望能帮助到你

# android - 从中删除对象时数组列表大小为零

> ID：15388283
> 
> 赞同：0
> 
> 时间：2013-03-13T14:35:36.707
> 
> 标签：android, arraylist

我有数组列表，我在适配器类中使用它。一切正常，但是当我从数组列表中删除特定索引（在我的情况下`data`）时，数组列表的大小为零。

这是我的适配器类

```
public class MainLocalListAdapter extends BaseAdapter{
public static final int LIMIT_LIST_COUNT = 20;
private Activity activity;
private static ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
private int count = LIMIT_LIST_COUNT;
private int customPosition = 0;

public MainLocalListAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data = d;
    if(count > data.size()) count = data.size();

    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return count;//data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;

    if(convertView==null){
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.playlist_local_item, null);
        holder.textView = (TextView)convertView.findViewById(R.id.waveTitle2); // title
        holder.textView.setTypeface(UtiliShare.getTf());

        holder.btnCancel = (ImageView) convertView.findViewById(R.id.btndel);
        holder.btnCancel.setOnClickListener(mOnClickListener);  

        convertView.setTag(holder);
    }else{
         holder = (ViewHolder)convertView.getTag();
    }
    if(!data.isEmpty()) {
        HashMap<String, String> song = data.get(position);
        holder.btnCancel.setTag(position);
        holder.textView.setText(song.get(UtiliShare.KEY_TITLE));
    }

    return convertView;
}

private static class ViewHolder{
    TextView textView;
    ImageView btnCancel;
}

private OnClickListener mOnClickListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        Toast.makeText(MainLocalListAdapter.this.activity, ""+v.getTag(), Toast.LENGTH_SHORT).show();

        data.remove((Integer) v.getTag());

        // Here data.size = 0 ????????????
        int nval = data.size();
        Log.d("list", ""+nval);
        notifyDataSetChanged();
    }
};

public int getCustomPosition() {
    return customPosition;
}

public void setCustomPosition(int cPosition) {
    customPosition = cPosition;

    int nval = (data.size() - customPosition); 
    if(nval < LIMIT_LIST_COUNT) this.count = nval;
    else  count = LIMIT_LIST_COUNT;
}

} 
```

我没有错误，因为我在从中获取数据之前检查了数据大小`getView()`。

我怎样才能解决这个问题？？

# sql - INSERT INTO .. SELECT .. 违反唯一约束

> ID：15388287
> 
> 赞同：6
> 
> 时间：2013-03-13T14:35:48.987
> 
> 标签：sql, sql-server, unique-constraint

我正在运行一个存储过程，它选择我的临时表的值并将它们插入到数据库中，如下所示：

```
 INSERT INTO emails (EmailAddress)   (
     SELECT
       DISTINCT eit.EmailAddress
     FROM #EmailInfoTemp eit
       LEFT JOIN emails ea
         ON eit.EmailAddress = ea.EmailAddress
     WHERE ea.EmailAddressID IS NULL   ) 
```

在极少数情况下（在每分钟处理数千个请求的服务器上每隔几个小时一次），然后我会在 EmailAddress 列的索引上收到唯一约束错误“违反 UNIQUE KEY 约束...”。

我可以确认我没有传递重复的值。即使我是，它也应该被 DISTINCT 抓住。

-SQL Server 2008 - 存储过程 + 不使用事务 + JDBC 可调用语句

在 SELECT 和随后的 INSERT 之间是否会发生另一个对相同/不同存储过程的调用，该调用完成了具有相似数据的 INSERT？如果是这样，防止这种情况的最佳方法是什么？

一些想法：我们有许多重复的“客户端”实例在生产中一次与这个 SQL Server 通信，所以我的第一反应是并发问题，但我自己似乎无法复制它。这是我最好的猜测，但到目前为止还没有。这不会发生在我们的暂存环境中，与生产环境相比，负载微不足道。这是我开始研究并发问题的主要原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:52:21.913

该错误可能是由两个会话同时执行插入引起的。

您可以使用[MERGE](http://technet.microsoft.com/en-us/library/bb510625.aspx)使您的 SQL 代码更安全。正如 Aaron Bertrand 的评论所说（谢谢！），[您必须包含一个`with (holdlock)`提示以确保`merge`真正安全](http://weblogs.sqlteam.com/dang/archive/2009/01/31/UPSERT-Race-Condition-With-MERGE.aspx)。

```
; merge emails e with (holdlock)
using   #EmailInfoTemp eit
on      e.EmailAddress = eit.EmailAddress
when    not matched then insert
        (EmailAddress) values (eit.EmailAddress) 
```

该`merge`语句将采用适当的锁定以确保没有其他会话可以在它的“不匹配”检查和“插入”之间潜入。

如果你不能使用`merge`，你可以在客户端解决问题。确保没有两个插件同时运行。这通常很容易通过[互斥锁](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)或其他同步结构来实现。

# email - 将 SendGrid SMTP 集成用于批量电子邮件

> ID：15388288
> 
> 赞同：10
> 
> 时间：2013-03-13T14:35:50.897
> 
> 标签：email, smtp, bulk, sendgrid

有没有办法使用 SendGrid 的 SMTP 集成 API 来发送批量邮件？

这就是我的想法：我需要向订阅者发送大量电子邮件。由于 SendGrid 文档建议尽可能使用 SMTP 集成，因此我希望能够单次点击 SendGrid 并让它根据电子邮件列表发送整个批量。我知道这可以通过 REST API 实现。

这甚至可以通过 SMTP 实现吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T18:15:32.640

是的，这也可以通过 SMTP api 实现。您可以查看 SMTP 开发人员指南以了解如何设计它，[https://sendgrid.com/docs/API_Reference/SMTP_API/integrating_with_the_smtp_api.html](https://sendgrid.com/docs/API_Reference/SMTP_API/integrating_with_the_smtp_api.html)。

您还可以在此处查看另一个 Sendgrid 用户的使用 SMTP api 发送批量邮件的实现，[http://community.sendgrid.com/sendgrid/topics/_net_c_cshap_api ?from_gsfn=true](https://web.archive.org/web/20120419145345/http://community.sendgrid.com/sendgrid/topics/_net_c_cshap_api)

# ruby-on-rails - 忽略来自 Facebook、dotMailer 的 HTTP 请求以检查 URL 有效性

> ID：15388295
> 
> 赞同：1
> 
> 时间：2013-03-13T14:36:19.803
> 
> 标签：ruby-on-rails, ruby, facebook, filtering

希望有人对此有所了解。我有一个系统，它允许用户使用名为 dotMailer 的 ESP 发布到 facebook 或通过电子邮件发送链接。然而，在创建墙贴/电子邮件活动时，Facebook 和 dotMailer 都会“测试”嵌入在内容中的 URL 以查看它是否有效。

我正在存储URL 的查看日期，因此我希望能够忽略 Facebook 和 dotMailer 的 HTTP 请求，而不是存储它们通过点击 URL 触发的查看日期**。**

就我尝试过的/不起作用的而言：

*   IP 过滤 - 不能依赖 IP 每次都相同
*   基于时间的延迟 - 取决于 dotMailer/Facebook 处理请求的速度，因此不能依赖此

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:44:24.667

我是 dotMailer 的开发人员 - 对我们来说，您可以依赖来自以下两个不同位置之一的请求：94.143.104.0/21、80.249.97.113 或 80.249.97.114。使用 Facebook，您可以简单地检查 UserAgent。我们使用 IE 用户代理，因为大量网站在使用非标准用户代理时表现不同，从而降低了链接检查的可靠性。

我们有一个很棒的论坛，所以如果您有任何问题，请继续！[https://support.dotmailer.com/forums](https://support.dotmailer.com/forums)

# asp.net - 从带有 URL 的 RadioButtonList 中选择单选按钮

> ID：15388297
> 
> 赞同：0
> 
> 时间：2013-03-13T14:36:22.320
> 
> 标签：asp.net, post

我有一个带有动态创建的 Web 表单`RadioButtonList`、一个主题文本框、一个消息文本框和一个提交按钮。我需要 Solarwinds 的监控才能使用 post 方法提交表单。我正在使用`QueryString`文本框，但我迷失了单选按钮。有没有办法通过 URL 选择单选按钮并提交表单？以下是生成的 HTML 示例：

```
<input id="RadioButtonList1_0" type="radio" name="RadioButtonList1" value="value 1" /><label for="RadioButtonList1_0">Topic 1</label>

<input id="RadioButtonList1_1" type="radio" name="RadioButtonList1" value="value 2" /><label for="RadioButtonList1_1">Topic 2</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:48:57.693

这就是我所需要的。今天过得很慢！

`RadioButtonList1.SelectedValue = Request.QueryString["selected"];`

www.myurl.com?selected=值 1

# c# - 将 C# 属性添加到 wsdl.exe 生成的属性？

> ID：15388298
> 
> 赞同：4
> 
> 时间：2013-03-13T14:36:23.093
> 
> 标签：c#, c#-2.0, wsdl.exe

我有一个通过 wsdl.exe 自动生成的类，我需要将**[System.Xml.Serialization.XmlIgnoreAttribute()]**属性添加到其中一个属性中，但是我无法直接修改该类，因为它会在每个时不时。

有没有办法做到这一点？我已经尝试使用继承、部分类和反射寻找解决方案，但没有运气。由于客户的限制，我坚持使用 .NET Framework 2.0。

（关于为什么我需要在此处执行此操作的更多详细信息：[Prevent timezone conversion on deserialization of DateTime value](https://stackoverflow.com/questions/3188933/prevent-timezone-conversion-on-deserialization-of-datetime-value)，我在部分类中添加字符串属性）

编辑：请求的代码片段很简单：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://common.ws.model.plx.ids.it/")]
public partial class publication {
    private System.DateTime dateFromField;

    //[System.Xml.Serialization.XmlIgnoreAttribute()] I would like to add this
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public System.DateTime dateFrom {
        get {
            return this.dateFromField;
        }
        set {
            this.dateFromField = value;
        }
    }

    ///// This method has been moved in the other partial class
    //[System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified, ElementName = "dateFrom")]
    //public string dateFromString
    //{
    //    get
    //    {
    //        return XmlConvert.ToString(dateFrom, XmlDateTimeSerializationMode.RoundtripKind);
    //    }
    //    set
    //    {
    //        dateFrom = DateTimeOffset.Parse(value).DateTime;
    //    }
    //}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:53:51.067

您可以使用 postsharp 将缺失的属性动态添加到属性中。看看[如何使用 PostSharp 属性注入属性？](https://stackoverflow.com/questions/7851365/how-to-inject-an-attribute-using-a-postsharp-attribute).

它展示了如何将 XmlIgnore 属性应用于每个公共属性，但您可以更改方面代码以在您的情况下具有不同的行为。

# android - Wifi热点组播/广播

> ID：15388300
> 
> 赞同：2
> 
> 时间：2013-03-13T14:36:25.780
> 
> 标签：android, wifi, android-wifi

如果我将我的 android 设备变成便携式热点并将一些设备连接到它，我是否可以向从我的设备（即热点）连接的设备广播/多播数据？如果是，如何？Android中的一个片段会很棒！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T06:34:47.520

是的，您可以在热点中多播或广播 udp 数据包

在此处查看详细信息： [热点/网络共享模式下 Android 上的多播支持](https://stackoverflow.com/questions/6550618/multicast-support-on-android-in-hotspot-tethering-mode/27699370#27699370)

# excel - Excel VBA联盟

> ID：15388307
> 
> 赞同：0
> 
> 时间：2013-03-13T14:36:53.280
> 
> 标签：excel, vba

在 Excel 2010 中，如何使用 VBA 从两个单独的区域创建两列区域？

下面的代码使用联合，但组合范围 (rngAll) 仅包含第一列 (rng1)：

```
Dim rng1 As Range
Dim rng2 As Range
Dim rngAll As Range

Set rng1 = Range(TableColumn1)
Set rng2 = Range(TableColumn2)
Set rngAll = Application.Union(rng1, rng2) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:46:54.500

`Range`通过使用 限定对象来试试这个`Sheet`：

```
Set rng1 = Sheets(1).Range(TableColumn1)
Set rng2 = Sheets(1).Range(TableColumn2)
Set rngAll = Application.Union(rng1, rng2) 
```

然后在`Watch Window`或`Immediate Window`中，您可以检查`rngAll.Address`。它应该向您显示两个范围。

# javascript - javascript：变量范围的问题。无法访问 jquery 事件中的外部变量

> ID：15388310
> 
> 赞同：0
> 
> 时间：2013-03-13T14:37:07.423
> 
> 标签：javascript

在一个 JS 文件中，我有这个：

```
task_categories = new CategoryTree();

$('input:radio[name=what_tasks]').click(function () {
    var where = getLocation();
    taskList(where.project, task_categories.selected_elements, where.page);
}); 
```

Firefox 调试器不会抱怨我试图访问 task_categories 但不幸的是，task_categories 将是未定义的。

我怎样才能使这项工作？谢谢！

# android - 如何在java中显示两位数之后的点？

> ID：15388312
> 
> 赞同：1
> 
> 时间：2013-03-13T14:37:20.433
> 
> 标签：android

我是 Android 开发人员。我从网络服务结果 45.0000 中获得。我存储了 ArrayList。但我只想在两位数之后显示它。

仅示例输出 45.00。请给我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:38:44.193

使用`DecimalFormat`类来实现这一点。

```
DecimalFormat df=new DecimalFormat("##.##");
String formate = df.format(value); 
double finalValue = (Double)df.parse(formate) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:04:46.887

你可以使用`String.format`，它使用指定的格式字符串和参数返回一个格式化的字符串

```
String.format("$%.2f", value); 
```

还`String.format`使用您的`Locale`

整数索引 = 0；for (; index < yourList.size (); index++) { String tmpvalue = yourList.get(index); String conValue = String.format("$%.2f", Float.parse(tmpvalue)); yourList.set(index, conValue); 索引++；}

# iphone - 在 UIWebView 中设置 HTML 的宽度

> ID：15388314
> 
> 赞同：0
> 
> 时间：2013-03-13T14:37:32.697
> 
> 标签：iphone, ios

我可以以编程方式设置我放入 UIWebView 的 HTML 文件的宽度吗？我的问题是 UIWebView 框架设置在 TableView 单元格中，所以我必须设置 CGRectMake 以使其适合单元格。但是现在内容的大小比框架大......我可以在 UIWebView 中为 HTML 设置宽度吗？

这是 HTML 代码：

```
<div id="attachment_16505" class="wp-caption alignnone" style="width: 460px"><img src="http://www.floorballmagazin.de/wp-content/uploads/2013/03/20130303_schweiz.jpg" alt="Maßgeblich beteiligt - Mathias Hofbauer sprang von der Strafbank und netzte zum 3:1 ein. / Foto: Hans Ulrich Muelchi, Swiss Unihockey" width="460" height="318" class="size-full wp-image-16505 colorbox-16504" /> <p class="wp-caption-text">Maßgeblich beteiligt &#8211; Mathias Hofbauer sprang von der Strafbank und netzte zum 3:1 ein. / Foto: Hans Ulrich Muelchi, Swiss Unihockey</p> </div> <p><em>In der Schweiz kann Wiler sein historisches Ausscheiden aus den Playoffs mit einem versöhnlichen Cupsieg kurieren. Vor über 3.000 Zuschauern besiegen die Berner Grünenmatt mit 3:1\. Bei den Damen kann Sandra Dirksen ihren Titelreigen nicht fortsetzen, die Red Ants brachten eine versprechende Führung nicht über die Runden.</em></p> <p>Als Wilers Kapitän Mathias Hofbauer in 56\. Spielminute auf die Strafbank wanderte, wurde es nochmal eng für den noch aktuellen Meister. Sein Unterzahlspiel überstand man aber mit Bravour und als Hofbauer wieder zurück aufs Feld durfte, dauerte es gerade mal sechs Sekunden und der WM-Rekordscorer machte mit einem scharfen Schlenzer alles klar.</p> <p>Bei den Damen waren Deutschlands Ex-Nationalspielerin Sandra Dirksen und ihre Red Ants auf dem Weg zum vierten Cupsieg in Folge. Rychenberg führte zu Beginn des Schlussdrittels mit 2:0, brach aber ein und unterlag Chur mit 2:5\. &#8220;Wer den Pokal mit nach Hause nehmen will, muss drei Drittel gut spielen und nicht nur zwei&#8221;, bedauert Dirksen.</p> <p>&#8220;Wir hatten zwar den besseren Start, aber am Ende doch nur Silber. Fünfzehn Sekunden vor der 2\. Drittelspause haben wir ein abgelenktes, unglückliches Tor kassiert, das war der Knackpunkt leider.&#8221; Dafür sei man umso motivierter für die bevorstehenden Play-Offs. &#8220;Die Atmosphäre bei einem Cup-Finale ist und bleibt einzigartig. Unsere Fans waren toll&#8221;, schätzt Dirksen.</p> 
```

这是在单元格中发生的事情：

![这就是发生的事情](../Images/c70fe0259a9dd8d71a9fa12fe575250c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:39:17.193

如果您正在加载自己的 HTML，您可以在它的 CSS 中执行此操作。

```
body,
.yourClass,
#yourDiv {
  width: 30px;
} 
```

如果不是，为什么不尝试更改宽度`UIWebView`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:41:06.353

您可以在 HTML 文件中使用 br 标签来调整宽度。

# c# - 从 URL 读取内容，放入文本框

> ID：15388319
> 
> 赞同：0
> 
> 时间：2013-03-13T14:37:50.150
> 
> 标签：c#

*我正在尝试从网站读取行，然后将其复制到我的`textBox2`. `textBox1`将有一个网站的 URL，如`http://example.com`. 当我单击时，`button1`我想从上面的 URL 中读取 HTML 内容，并请提供该信息`textBox2`。我应该使用 HtmlAgilityPack 吗？如何才能做到这一点？*

# 2 ==================================================

因此，例如，我将此链接复制到我的“textBox1” [http://www.mineshaftersquared.com/server/DareCraft#](http://www.mineshaftersquared.com/server/DareCraft#)

那么，有没有办法让应用程序从以下位置复制所有内容：

//*[@id="插件"]

至

//*[@id="rightInfo"]/section[2]/div/div[1]/table[2]

/这是 XPath

/它不必在 XPath 中，但这是我可以展示的唯一方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:40:27.457

您不安装 HtmlAgilityPack，如果从您的项目中引用。

阅读有关[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.openread.aspx)类（`OpenRead`方法）的信息，您可能想使用它来获取页面。

这是您可能想要开始的教程：http: [//www.codeproject.com/Articles/33798/HTTP-GET-with-NET-WebClient](http://www.codeproject.com/Articles/33798/HTTP-GET-with-NET-WebClient)

# jquery - jQuery 显示隐藏 div

> ID：15388320
> 
> 赞同：1
> 
> 时间：2013-03-13T14:37:50.380
> 
> 标签：jquery, accordion

我正在尝试组合不同的脚本但没有成功。见下文 1) 2) 和 3)。我结合了 2) 和 3) 见专栏 NEWS。即将到来的列使用 1) 并且有效。我想结合这两个功能。两列都独立工作。

你可以看到我的工作（新网站正在建设中，一些字体会丢失，photoshop 工作还有待完成）：[http ://www.brunovansina.be/wais/index2.htm](http://www.brunovansina.be/wais/index2.htm)

1）我有不同的div。如果点击一个，其他打开的div关闭，只能打开一个：

```
$(document).ready(function() {
    $('.show').click(function() {
        if ( !$(this).next('div').is(':visible') ) {
            $(".slidingDiv").slideUp();
            $(this).next('div').slideToggle();
        }
    });

    $('.hide').click(function() {
        $(this).parent().slideUp();
    });
}); 
```

2）如果打开了一个 div，我希望能够通过再次单击它来关闭它，这样所有 div 都没有打开。

```
$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".slidingDiv").slideToggle();
    });

}); 
```

3) 当一个链接被点击时，它会改变颜色，所以你可以看到它是活跃的。再次单击时，div 关闭并且链接返回非活动状态。

```
$('.show_hide').click(function() {
    $(this).toggleClass('active');
}); 
```

感谢您的帮助，布鲁诺。

# javascript - 如何插入 HTML 片段并保持对外部元素的引用？

> ID：15388321
> 
> 赞同：0
> 
> 时间：2013-03-13T14:37:52.977
> 
> 标签：javascript, dom, element, innerhtml

我一直想知道这个 jQuery 功能是如何工作的：`$('<span>Hello world</span>')[0]` 它应该返回对新创建的 span 元素的引用。如何使用本机 DOM 方法获得相同的结果？插入相邻的HTML？内部HTML？文档片段？我需要插入一个 HTML 片段并保存对外部元素的引用，而无需使用 createElement/appendChild。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:44:35.607

可以创建一个元素，设置它的 innerHTML，然后返回第一个子元素。容器元素永远不会添加到 DOM 中：

```
var el = document.createElement('div');
el.innerHTML = '<span>Hello world</span>';
console.log(el.firstChild); 
```

如果它包含在一个函数中，我相信只要将孩子附加到其他地方，原始容器就有资格进行垃圾收集。

jQuery 似乎在做一些更复杂的事情，检查字符串是否包含单个标签，并为更复杂的字符串创建片段。请参阅jQuery 源代码上[的`parseHTML`方法。](https://github.com/jquery/jquery/blob/master/src/core.js#l465)

# random - 什么是与随机数生成算法相关的种子，为什么计算机时间经常用于创建这个种子？

> ID：15388324
> 
> 赞同：6
> 
> 时间：2013-03-13T14:37:57.837
> 
> 标签：random, language-agnostic

我读到*种子*用于初始化随机数生成器。但似乎种子的随机性对于从生成器获得良好的随机性并不重要。所以我想了解什么是*种子*？为什么这样称呼？最后，为什么要使用计算机系统中的*时间*来生成这些种子？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T14:45:56.437

一个伪随机数生成器产生一个数字序列。它不是真正随机的，但通常是一种数学计算，它产生的输出与一些理想的分布相匹配，并且没有明显的模式。为了生成这样的序列，必须为生成器存储*状态*，以便能够生成该序列中的下一个数字。每次使用上一步的输出的某些部分来更新状态。

播种显式初始化此状态。'种子'是一个起点，从它开始生长。在这种情况下，一个数字序列。

这可以用于始终生成相同的序列（通过使用已知的常量种子），这对于具有确定性行为很有用。这对于调试、某些网络应用程序、密码学等很有用。

或者，在您希望行为不可预测的情况下（每次运行程序时总是不同，可能是纸牌游戏），您可以使用可能不断变化的数字作为种子，例如时间。

序列的“随机性”不取决于选择的种子，尽管它确实取决于不*重新播种*序列。

# python - 如何使用 urllib2 将数据发布到服务器？

> ID：15388331
> 
> 赞同：0
> 
> 时间：2013-03-13T14:38:34.433
> 
> 标签：python

我正在为 python 制作一个 python twitch.tv API Wrapper，到目前为止我有：

```
import urllib2
import json
import time

waittime = 1
baseurl = 'https://api.twitch.tv/kraken/'
secret = '(CLASSIFIED)'

class twitchchannelinfo(): #Ignore me ;D I'm Here for reference's sake
    def __init__ (self,channel):
        self.channel = channel
        time.sleep(waittime)
        self.dict1 = json.loads(urllib2.urlopen(baseurl + 'channels/' + channel).read())

    def getstatus(self):
        return self.dict1 ['status']
    def getdisplay_name(self):
        return self.dict1 ['display_name']
    def getmature(self):
        return self.dict1 ['mature']
    def getchanurl(self):
        return self.dict1 ['url']
    def getcreated_at(self):
        return self.dict1 ['created_at']
    def getteams(self):
        return self.dict1 ['teams']
    def getgame(self):
        return self.dict1 ['game']
    def getupdated_at(self):
        return self.dict1 ['updated_at']

class twichtvwrapper():
    def __init__(self,username,password):        
        self.username = username
        self.password = password
        self.dict1 = json.loads(urllib2.urlopen(baseurl + 'oauth2/token',\
                        "client_id=<3kfp6al05voejvv7ofmpc94g4jga0tb>&\
                        client_secret=<" + secret + ">&\
                        username=<" + self.username + ">&\
                        password=<" + self.password + ">&\
                        scope=user_read&\
                        grant_type=password"))
        print self.dict1

me = twichtvwrapper('martincharles07','(CLASSIFIED)') 
```

（秘密是一个 API 标识符，密码已被撤回，原因很明显；D）。

服务器应返回如下 JSON 响应：

```
{
    "scope":["user_read"],
    "access_token":"df4yofxyn2s7240ojfrh9chz8"
} 
```

[这是 API 参考。](https://github.com/justintv/Twitch-API/blob/master/password-credentials.md)

程序因异常而崩溃`urllib2.HTTPError: HTTP Error 400: Bad Request`。我不知道我做错了什么，是线路分裂还是 urllib2 的使用不正确？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:52:35.740

而不是将你的字符串连接在一起尝试类似的东西

```
body={'username':'someusername','password':'somepassword', ...}
txdata = urllib.urlencode(body) 
```

您必须使用`urllib`而不是`urllib2`使用该方法。

这是一个未经测试的片段。

```
import json
import urllib
import urllib2

def wrapper(user, password, secret):

    data = {"client_id":"<3kfp6al05voejvv7ofmpc94g4jga0tb>",
            "client_secret":secret,
            "username":username,
            "password":password,
            "scope":"user_read",
            "grant_type":"password",
            }

    txdata = urllib.urlencode(data)
    response = urllib2.urlopen(baseurl + 'oauth2/token', txdata)
    return_data = json.loads(response.read())

    return return_data 
```

# mysql - 使用 mysql 的桌面应用程序

> ID：15388332
> 
> 赞同：-4
> 
> 时间：2013-03-13T14:38:38.990
> 
> 标签：mysql

我想知道是否有任何免费的 Windows 应用程序允许连接到托管在服务器上的数据库，并能够从桌面编辑其记录、行和表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:40:21.483

*   [MySQL Workbench](http://www.mysql.com/downloads/workbench/)可以很好地为您完成这项工作
*   ~~[PHPMyAdmin](http://www.phpmyadmin.net/home_page/index.php)如果您有本地网络服务器~~
*   [Toad for MySQL](http://www.quest.com/toad-for-mysql/)为您带来部分成功

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:40:31.313

许多[Navicat](http://www.navicat.com/)只是其中之一。

# iphone - textview 光标位置在水平线后更改

> ID：15388334
> 
> 赞同：0
> 
> 时间：2013-03-13T14:38:42.047
> 
> 标签：iphone, objective-c

我想更改 TextView 中的光标位置...

![在此处输入图像描述](../Images/c725291416ca262b211376fe72da82dc.png)

![在此处输入图像描述](../Images/5275bdb66395f36de0ad5a78b1b931b6.png)

// NoteView 目标 _c 类，它的超类是 TextView...

```
 #import "NoteView.h"

    @implementation NoteView

    - (id)initWithFrame:(CGRect)frame
    {
        self = [super initWithFrame:frame];
        if (self) {
            // Initialization code

           self.backgroundColor =[UIColor whiteColor];
    self.contentMode = UIViewContentModeRedraw;
            self.font = [UIFont fontWithName:@"Helvetica Neue" size:14];
        }
        return self;
    }

    // Only override drawRect: if you perform custom drawing.
    // An empty implementation adversely affects performance during animation.
    - (void)drawRect:(CGRect)rect
    {

        //Get the current drawing context
        CGContextRef context = UIGraphicsGetCurrentContext();
        //Set the line color and width
    //    CGContextSetStrokeColorWithColor(context, [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.2f].CGColor);

        CGContextSetStrokeColorWithColor(context,[UIColor colorWithRed:0.29804f green:0.12157f blue:0.9f alpha:0.1].CGColor);

        //Start a new Path
        CGContextBeginPath(context);

        //Find the number of lines in our textView + add a bit more height to draw lines in the empty part of the view
        NSUInteger numberOfLines = (self.contentSize.height + self.bounds.size.height) / self.font.leading;

        //Set the line offset from the baseline. (I'm sure there's a concrete way to calculate this.)
        CGFloat baselineOffset = 6.0f;

        //iterate over numberOfLines and draw each line
        for (int x = 0; x < numberOfLines; x++) {
            //0.5f offset lines up line with pixel boundary
            CGContextMoveToPoint(context, self.bounds.origin.x, self.font.leading*x +     0.5f + baselineOffset);
            CGContextAddLineToPoint(context, self.bounds.size.width, self.font.leading*x + 0.5f + baselineOffset);
        }

        //Close our Path and Stroke (draw) it
        CGContextClosePath(context);
        CGContextStrokePath(context);
    }

     //its a view controller class and here i imported NotesView here
    #import "NotesViewController.h"

    @interface NotesViewController ()

    @end

    @implementation NotesViewController

// i load the textView frame  whatever i created class above
    - (void)loadView {
        [super loadView];
      CGSize  result = [[UIScreen mainScreen] bounds].size;
CGFloat scale = [UIScreen mainScreen].scale;
result = CGSizeMake(result.width*scale, result.height * scale);
if (result.height==1136)
{
    _TextView = [[NoteView alloc] initWithFrame:CGRectMake(29,50,266,430)];
    backgroundView.frame=CGRectMake(10,32,300,450);

}
else
{
    _TextView = [[NoteView alloc] initWithFrame:CGRectMake(29,50,266,340)];
    backgroundView.frame=CGRectMake(10,32,300,360);

}
[self.view addSubview:_TextView];
_TextView.delegate = self;
UIView *lineView = [[UIView alloc]initWithFrame:CGRectMake(30,40,1,backgroundView.frame.size.height-5)];
lineView.backgroundColor = [UIColor brownColor];
lineView.alpha=0.3;
[self.view addSubview:lineView];
UIView *lineView1 = [[UIView alloc]initWithFrame:CGRectMake(32,40,1,backgroundView.frame.size.height-5)];
lineView1.backgroundColor = [UIColor brownColor];
lineView1.alpha=0.3;
[self.view addSubview:lineView1]; 
```

}

```
 }

    }
// in view did load i set the delegate and code for cursor position
    - (void)viewDidLoad
    {
        [super viewDidLoad];

        // setting delegate here
        _TextView.delegate=self;
        _TextView.editable = YES;    
       [_TextView setSelectedRange:NSMakeRange(10, 0)];
    } 
```

我为Textview的Textview和ScrollView编写了所有委托方法我光标位置是在垂直线之后开始的......我表达得不好请根据图像理解......我想要光标位置......我想要在 iPhone 中使用真正的笔记应用程序设置我的 Textview .. 我将 Textview 添加到 ViewController 一切正常，但光标统计起始位置...我想光标位置始终为水平线........尝试根据图片..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:07:25.977

像这张图片一样做。

![在此处输入图像描述](../Images/6d59c07e91edc9f2bfcd0132bbb15985.png)

在这里，您必须在 VC 中设置 textview 的位置，使其位于水平线之后。

# wolfram-mathematica - 如何在 Mathematica 中使用 FindRoot[] 假设？

> ID：15388341
> 
> 赞同：0
> 
> 时间：2013-03-13T14:39:06.833
> 
> 标签：wolfram-mathematica, equation-solving

在 Mathematica 我有类似的东西

```
FindRoot[f[x], {x, a}] 
```

现在我希望 FindRoot 将解决方案限制为 0 < x < 1。

我怎样才能得到这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:24:46.490

此函数有一个四参数选项：FindRoot[f[x],{x,xstart,xmin,xmax}] 如果搜索超出区间 [xmin,xmax] 则停止搜索。

# angularjs - ng-repeat 中 ng-click 调用的赋值表达式的行为

> ID：15388344
> 
> 赞同：34
> 
> 时间：2013-03-13T14:39:10.940
> 
> 标签：angularjs, angularjs-scope

我正在尝试使用`ng-click`附加到`<p>`.

我对 .之外*的*赋值表达式`ng-repeat`或*在*`ng-repeat`. *但是，如果我在*中使用赋值`ng-repeat`，它似乎被忽略了。我在 Firefox 控制台中没有看到任何消息报告，但没有尝试设置断点来查看事件是否被触发。

```
<!DOCTYPE html>
<html>
<head>
    <title>Test of ng-click</title>
    <script type='text/javascript' src='http://code.angularjs.org/1.1.1/angular.js'></script>
    <script type='text/javascript'>//<![CDATA[ 

        function MyCtrl($scope) {
            $scope.selected = "";
            $scope.defaultValue = "test";
            $scope.values = ["foo", "bar", "baz"];

            $scope.doSelect = function(val) {
                $scope.selected = val;
            }
        }
        //]]>  

    </script>
</head>

<body ng-app>
    <div ng-controller='MyCtrl'>
        <p>Selected = {{selected}}</p>
        <hr/>
        <p ng-click='selected = defaultValue'>Click me</p>
        <hr/>
        <p ng-repeat='value in values' ng-click='selected = value'>{{value}}</p>
        <hr/>
        <p ng-repeat='value in values' ng-click='doSelect(value)'>{{value}}</p>
    </div>
</body>
</html> 
```

Fiddle 在[这里](http://jsfiddle.net/uy9Ba/2/)，如果您愿意（以及几个早期的变体）。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-13T14:45:58.977

指令 ngRepeat 为每次迭代创建一个新范围，因此您需要在父范围中引用您的变量。

使用`$parent.selected = value`，如：

```
<p ng-repeat='value in values' ng-click='$parent.selected = value'>{{value}}</p> 
```

注意：函数调用由于原型继承而传播。

如果您想了解更多信息：[范围原型继承的细微差别](https://github.com/angular/angular.js/wiki/Understanding-Scopes#wiki-JSproto)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-13T19:05:47.317

正如@Stewie 提到的， $parent 是解决此问题的一种方法。但是，推荐的（[由 Angular 团队](http://www.youtube.com/watch?v=ZhfUv0spHCY&feature=youtu.be&t=30m)）解决方案是不要在 $scope 上定义原始属性。相反， $scope 应该引用您的模型。使用引用也可以避免这个问题（因为不会在隐藏/隐藏同名父作用域属性的子作用域上创建原始属性），并且您不必记住何时使用 $parent：

HTML：

```
<p>Selected = {{model.selected}}</p>
<hr/>
<p ng-click='model.selected = defaultValue'>Click me</p>
<hr/>
<p ng-repeat='value in values' ng-click='model.selected = value'>{{value}}</p>
<hr/>
<p ng-repeat='value in values' ng-click='doSelect(value)'>{{value}}</p> 
```

JavaScript：

```
$scope.model = { selected: ""};
...
$scope.doSelect = function (val) {
   $scope.model.selected = val;
} 
```

[小提琴](http://jsfiddle.net/mrajcok/LsweT/)。

我最近更新了@Stewie 提到的 wiki 页面，以始终推荐这种方法。

# clojure - 使用 Hiccup 和 Compojure 编写模板

> ID：15388345
> 
> 赞同：7
> 
> 时间：2013-03-13T14:39:11.860
> 
> 标签：clojure, compojure, hiccup

我对 Clojure 和 Compojure Web 开发比较陌生。在我正在构建的玩具示例中，我注意到的第一个问题是 HTML 模板问题。我想支持 Rails 中的部分内容，或 Django 使用的模板框架。

目前我有：

```
(defn index-page []
(html5
    [:head
        [:title "Home | Compojure Docs"]
        (include-css "/css/bootstrap.min.css")
        (include-css "/css/bootstrap-responsive.min.css")]
    [:body
        [:div {:class "container-fluid"}
            [:div {:class "row-fluid"}
                [:div {:class "span2 menu"}]
                [:div {:class "span10 content"}
                    [:h1 "Compojure Docs"]
                    [:ul
                        [:li
                            [:a {:href "/getting-started"} "Getting Started"]]
                        [:li
                            [:a {:href "/routes-in-detail"} "Routes in Detail"]]
                        [:li
                            [:a {:href "/destructuring-syntax"} "Destructuring Syntax"]]
                        [:li
                            [:a {:href "/nesting-routes"} "Nesting Routes"]]
                        [:li
                            [:a {:href "/api-documentation"} "API Documentation"]]
                        [:li
                            [:a {:href "/paas-platforms"} "PaaS Platforms"]]
                        [:li
                            [:a {:href "/example-project"} "Example Project"]]
                        [:li
                            [:a {:href "/example-project-on-cloudbees"} "Example Project on CloudBees"]]
                        [:li
                            [:a {:href "/interactive-development-with-ring"} "Interactive Development with Ring"]]
                        [:li
                            [:a {:href "/emacs-indentation"} "Emacs Indentation"]]
                        [:li
                            [:a {:href "/sessions"} "Sessions"]]
                        [:li
                            [:a {:href "/common-problems"} "Common Problems"]]]
                    (include-js "/js/jquery-1.9.1.min.js")
                    (include-js "/js/bootstrap.min.js")]]]]))

(defn routes-in-detail []
(html5
    [:head
        [:title "Routes in Detail | Compojure Docs"]
        (include-css "/css/style.css")]
    [:body
        [:h1 "Routes in Detail"]])) 
```

有没有不重复代码的好方法？我希望 HEAD 标记中的内容在它自己的模板文件或函数中，然后能够在我去的时候包含它。例如，我想将它包含在“详细路线”功能中。我看过 Enlive，但我不确定如何将它与 Hiccup 一起使用。任何关于最佳实践的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T15:32:44.607

您可以将部分标记拉出到单独的变量中：

```
(def head
  [:head
    [:title "Home | Compojure Docs"]
    (include-css "/css/bootstrap.min.css")
     ... ])

(defn routes-in-detail []
  (html5
    head
    [:body
      ... ])) 
```

如果您需要您的片段/部分来获取参数，您可以将其变成一个函数，例如：

```
(defn head [title]
  [:head
    [:title title]
    (include-css "/css/bootstrap.min.css")
     ... ])

(defn routes-in-detail []
  (html5
    (head "Routes in detail")
    ... )) 
```

有时您会希望您的“片段”由多个顶级元素组成，而不是单个元素。在这种情况下，您可以将它们包装在一个列表中 - hiccup 将内联扩展它：

```
(defn head-contents [title]
  (list [:title title]
        (include-css "/css/bootstrap.min.css")
        ... )))

(defn routes-in-detail []
  (html5
    [:head (head-contents "Routes in detail")]
    [:body ... ])) 
```

一旦您意识到打嗝标记是由普通的 clojure 数据结构构成的事实，您就会发现使用函数操作/构建它既简单又灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T00:25:26.517

有一个名为的新模板库`clabango`，它以 Django 模板库为模型，它可能就是您所关注的：[https ://github.com/danlarkin/clabango](https://github.com/danlarkin/clabango)

# java - 在 Java 中使用 psql

> ID：15388350
> 
> 赞同：0
> 
> 时间：2013-03-13T14:39:22.343
> 
> 标签：java, sql

我在 Java 中使用 PostgreSQL，我想创建一个数据库结构。

如何使用 psql 运行 SQL 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:20:16.630

与任何其他 SQL 脚本一样，只需确保已将对话设置为 PSQL。如果您使用的是 JDBC，请确保您使用的是[此处找到的驱动程序](http://jdbc.postgresql.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:30:43.383

我发现这段代码像 psql 一样工作：

```
public void ejecutarScript(String file) throws IOException, SQLException {
    Statement st3 = conexion.createStatement();
    BufferedReader in = new BufferedReader(new FileReader(file));
    String str;
    StringBuffer sb = new StringBuffer();
    while ((str = in.readLine()) != null) {
        sb.append(str + "\n ");
    }
    in.close();
    st3.executeUpdate(sb.toString());
} 
```

# java - 如果我们从字符串数组列表中删除一个元素，记录不应该被移动

> ID：15388351
> 
> 赞同：0
> 
> 时间：2013-03-13T14:39:27.467
> 
> 标签：java, arraylist

我正在研究使用字符串数组列表的项目。我应该从 arraylist 中删除一个元素，但该元素应该变为 null，并且 arraylist 不应该在删除元素后移动。例如..

```
List<String> lister= new ArrayList<String>();
lister.add("abc");
lister.add("def");
lister.add("tur"); 
```

现在，如果我想从列表中删除第二个元素，我将使用 lister.remove(1)。但我希望删除后该位置应变为空，并且元素不应后退一步，因为我需要再次在该位置添加一个元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T14:40:57.090

不要删除它。将其设置为`null`。

```
lister.set(1, null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:41:22.903

那么，也许您想改用 String[] 。或者不要使用`remove`，而只需将要删除的索引设置为空值。

# .net - 检查客户端是否连接到工作流服务

> ID：15388356
> 
> 赞同：0
> 
> 时间：2013-03-13T14:39:33.233
> 
> 标签：.net, wcf, workflow, workflow-foundation-4, workflowservice

我想编写一个这样的自托管 .NET 工作流服务：

![在此处输入图像描述](../Images/1ed8d40df9c5f464642bef60f75f6b46.png) ( [http://i.stack.imgur.com/Hij20.png](https://i.stack.imgur.com/Hij20.png) )

但是如何确定客户是否还活着？WCF 绑定的 InactivityTimeout 似乎没有触发。我可以编写一个超时函数（测量上次请求与现在之间的时间）。但这并不能确保客户端断开连接，而不仅仅是空闲。.NET Framework 中没有通用方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:22:34.827

你从某个地方运行这个服务，你必须运行一个服务器来从服务中获取响应。您可以使用以下代码创建回调服务器：

```
 var host = new ServiceHost(serviceCallback, new Uri("localhost:8080")); 
```

然后在服务中您需要将信息发送回该地址。因此您可以在调用者客户端中动态跟踪服务的当前状态。

# php - CodeIgniter 的文件上传库忽略了 allowed_types？

> ID：15388366
> 
> 赞同：0
> 
> 时间：2013-03-13T14:40:03.547
> 
> 标签：php, codeigniter, file-upload, file-extension

我尝试上传证书文件并失败：

```
$config["allowed_types"] = "cer";
$this->load->library("upload", $config);
$this->upload->do_upload("fieldname"); 
```

即使我上传 .cer 文件，我总是会收到以下错误：

```
The filetype you are attempting to upload is not allowed 
```

那是谎言，我上传了一个允许类型的文件！为什么此类忽略其[记录](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)的设置 allowed_types？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:05:54.537

您需要在`mimes.php`配置文件中添加 mime 类型。它应该是这样的：

```
'cer' => array('application/x-x509-ca-cert', 'application/octet-stream'), 
```

mime 的位置：application/config/mime.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:46:49.617

当它们由excel生成时，我在尝试上传csv时遇到了类似的问题 - 最后我不得不使用扩展的mime类型列表来允许上传文件。我快速搜索了 .cer mime-types 并得到了两个候选者，尝试使用：

```
 $config['allowed_types']  = 'cer|application/x-x509-ca-cert|application/pkix-cert'; 
```

# powershell - 创建自定义 PSObject PowerShell 2.0

> ID：15388367
> 
> 赞同：7
> 
> 时间：2013-03-13T14:40:03.933
> 
> 标签：powershell

是否可以创建自定义对象 (PSObject) 并在程序执行之前和之后定义其属性，我们不断向对象添加值数组。

例如；

```
$c = @()

$c = New-Object PSObject
$c | Add-Member -type NoteProperty -name Name 
$c | Add-Member -type NoteProperty -name Gender
$c | Add-Member -type NoteProperty -name Age

$c | Add-Member -type NoteProperty -name Name -value "John"
$c | Add-Member -type NoteProperty -name Gender -value "Male"
$c | Add-Member -type NoteProperty -name Age -value "30" 
```

提前感谢任何线索或建议。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T15:22:18.537

我不确定我是否跟随。你想要一个具有指定属性的对象数组吗？因为您的示例首先创建了一个数组，然后您将其覆盖为单个对象。所以你失去了你的阵列。

您可以使用参数中的哈希表来创建对象`new-object`并将其值指定为属性`-Property`。像这样：

```
$c = New-Object psobject -Property @{
    Name = "John"
    Gender = "Male"
    Age = 30
} 
```

要制作它们的数组，您可以使用：

```
$myarray = @()

$myarray += New-Object psobject -Property @{
    Name = "John"
    Gender = "Male"
    Age = 30
} 
```

如果您有多个要逐个运行的测试，则可以在测试并创建“结果对象”的函数中运行测试，然后收集它：

```
$myresults = @()

function mytests($computer) {
    #Test connection
    $online = Test-Connection $computer

    #Get buildnumber
    $build = (Get-WmiObject win32_operatingsystem -ComputerName $computer).buildnumber

    #other tests

    #output results
    New-Object psobject -Property @{
        Online = $online
        WinBuild = $build
    }
}

$myresults += mytests -computer "mycomputername" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-08T21:43:53.833

是的，所以我知道这是一篇旧帖子，但[唐·琼斯](https://twitter.com/concentrateddon)做了这样的事情：

```
$props = @{
    Name = "John"
    Gender = "Male"
    Age = 30
}

$c = New-Object PSObject -Property $props 
```

您可以运行以下命令来查看新对象的属性和值：

```
c$ | Get-Member 
```

我想这就是你要找的。

# php - 如果未启用 javascript，则停止加载 PHP 页面

> ID：15388370
> 
> 赞同：4
> 
> 时间：2013-03-13T14:40:12.050
> 
> 标签：php, javascript, noscript

如果用户计算机上未启用 javascript，我将尝试停止加载我的 php 页面。

下面的方法工作正常。但是，请让我知道它是否跨浏览器并且安全吗？

```
<noscript>
<?php
echo "Please Enable JavaScript in your browser!";
exit;
?>
</noscript>

  <div id="main">
    <!-- #header -->
    <div id="header"> 
        <div id="logo"><a href="homepage.php" title="Go to Homepage"><span><?php echo $Name;?></span></a></div>..... 
```

请让我知道我可以做到的任何其他专业方式。

PS：我的一些用户试图在页面加载后禁用 JavaScript。这件事也影响了我的一些页面。由于 js 禁用，我在提交时收到错误的值。我想克服这种情况。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-13T14:42:13.173

您可以插入标签

```
<title>Your title</title>    
<noscript><meta http-equiv="refresh" content="0; URL=/badbrowser.html"></noscript> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-03T09:04:55.867

虽然重定向确实有效，但页面仍将继续加载。

我有这个问题，并希望找到解决方案。答案介于目前提供的解决方案之间：

```
<noscript>
<meta http-equiv="refresh" content="0; URL=/badbrowser.html">
<?php
exit;
?>
</noscript> 
```

这会启动重定向，但也会阻止 PHP 页面的其余部分加载。

# c# - 区域持久侧边栏 MVC 3

> ID：15388371
> 
> 赞同：1
> 
> 时间：2013-03-13T14:40:14.413
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我的 Web 应用程序中有一个区域。这个区域有几个控制器。有一个控制器负责处理该区域的入口（即一切都通过该控制器访问该区域中的其他控制器）。此控制器需要将 ID 传递给操作：

```
 public ActionResult Index(Guid appID)
    {
        var vm = new DeviceManagementViewModel
        {
            SelectedApp = appID,
            App = _repository.AUTs.FirstOrDefault(x => x.ID.Equals(appID)),
            Devices = GetDevices()
        };

        return View(vm);
    } 
```

它创建的视图然后用另一个 ID 发回。因此，现在有两个 ID 已获得并在整个区域中持续存在。

每个控制器中的每个创建、编辑和详细信息操作都需要传递这两个 ID，以便它可以显示正确的数据，例如：

```
 public ActionResult Create(Guid appID, Guid deviceID)
    {
        var vm = new InputViewModel
        {
            Device = deviceID,
            Application = appID
        };

        return View(vm);
    } 
```

现在，如果我可以有一个侧边栏，其中包含指向每个详细信息和创建操作的快速链接并填写相关 ID，那就太好了，例如：

```
@Html.ActionLink("Create Input Methods", "Create", "Input", new { appID = <-- ID ONE -->, deviceID = <-- ID TWO --> }, null) 
```

而且，在整个区域中保留此侧边栏会更好，因此您可以快速切换每个控制器。我读过这个[博客](http://blog.voltje.be/2012/08/21/creating-a-dynamic-sidebar-with-asp-net-mvc/)我想知道它是如何工作的，如果它是我正在寻找的？如果实际上有一种更简单的方法。

所以快速回顾一下，我需要一个侧边栏，它可以在输入这个特定区域（只能通过一个点输入）时动态更新，它将（使用额外参数传递两个 ID）链接到它们相应的动作和控制器和也贯穿该地区的所有观点。

谢谢，

- - - 编辑 - - - -

好的，帮助推动这一点。我希望我将有一个 Action 将这 2 个 ID 参数传递给：

```
public ActionResult Menu(Guid appID, Guid deviceID)
{
    var vm = MenuViewModel
    {
        DeviceID = deviceID,
        ApplicationID = appID
    };

    return PartialView(vm);
} 
```

这将有一个像这样的 ViewModel：

```
public class MenuViewModel
{
    public Guid ApplicationID {get; set;}
    public Guid DeviceID {get; set;}
} 
```

和像这样的部分视图：

```
<aside id="dashboard_menu">
<div id="extras">
    <div class="oi">
        <h2 class="screenreader-only">Menu</h2>

        <div class="rollup section">
            <h3 class="rollup-trigger">Input Methods</h3> 
            <p>View or Add more Input Methods</p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Input", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Input", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        </div>
        <div class="rollup section">
            <h3 class="rollup-trigger">Launch &amp; Exit</h3> 
            <p>View or Add more Launch &amp; Exit</p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Launch", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Launch", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        </div>
        <div class="rollup section">
            <h3 class="rollup-trigger">Performance</h3> 
            <p>View or Add more Performance</p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Performance", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Performance", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        </div>
        <div class="rollup section">
            <h3 class="rollup-trigger">Power Consumption</h3> 
            <p>View or Add more Power Consumption</p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Power", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Power", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        </div>
        <div class="rollup section">
            <h3 class="rollup-trigger">Qualitative Validation</h3> 
            <p>View or Add more Qualitative Validation</p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Qual", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
            <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Qual", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        </div>

    </div>
</div> 
```

那么现在，如何使这个持久化，我是否在该区域的 _Layout.cshtml 中使用它？如果是这样怎么办？

如果是这样，我是否在每个视图页面中都使用它，我怎么能不这样做，因为它似乎比必要的工作更多？

我所困惑的是，您如何将这些 ID 参数传递给局部视图以及局部视图从何处加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:17:47.093

如果您需要能够为每个视图指定不同的侧边栏操作，那么您的解决方案非常棒；但是，如果您想要特定区域的侧边栏，这会在每个视图中增加不必要的开销和重复，如果有任何变化，这可能会使您的解决方案难以管理。

为避免这种情况，您可以尝试`BaseController`为每个区域创建一个，它指定侧边栏操作。然后，您可以确定视图中的当前区域并使用它来调用正确的操作`RenderAction`

```
public class SomeAreaBaseController : Controller
{
    public SomeAreaBaseController()
    {
        ViewBag.HasSidebar = true;
        ViewBag.Application = ...;
        ViewBag.Device = ...;
    }
    public ActionResult Menu(Guid appID, Guid deviceID)
    {
        ...
    }
} 
```

现在，在此区域的其他控制器中继承此：

```
public class SomeController : SomeAreaBaseController 
```

然后，在`Layout.cshtml`...

```
@if (ViewBag.HasSidebar) {
    @Html.RenderAction("Menu", ViewContext.RouteData.Values["controller"], 
        new { appID = ViewBag.Application, deviceID = ViewBag.Device })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:04:04.490

所以，答案是在这个[博客](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)的帮助下：

不幸的是，这是一个按浏览页面的答案。

在布局页面中定义一个部分：

```
@if (IsSectionDefined("SideBar"))
{
    @RenderSection("SideBar")
}
else
{
    <div id="extras">
        <div class="oi">
            <h2 class="screenreader-only">Menu</h2>

            <div class="rollup section">
                <h3 class="rollup-trigger">Application Validation</h3> 
                <p>Goto all Applications</p>
                <p class="more"><a href="#">&raquo; @Html.ActionLink("All Applications", "Index", "Application", new { area = "Validation" }, null)</a></p>
            </div>
        </div>
    </div>   
} 
```

然后在每个带有视图的页面上（我猜如果您首先创建此布局页面，那么视图将自动放入侧边栏部分供您填写）放入：

```
@section SideBar {
    @{Html.RenderAction("Menu", "DeviceManagement", new { appID = Model.Application, deviceID = Model.Device })}
} 
```

在菜单部分视图内，将是：

```
<div id="extras">
<div class="oi">
    <h2 class="screenreader-only">Menu</h2>

    <div class="rollup section">
        <h3 class="rollup-trigger">Input Methods</h3> 
        <p>View or Add more Input Methods</p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Input", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Input", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
    </div>
    <div class="rollup section">
        <h3 class="rollup-trigger">Launch &amp; Exit</h3> 
        <p>View or Add more Launch &amp; Exit</p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Launch", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Launch", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
    </div>
    <div class="rollup section">
        <h3 class="rollup-trigger">Performance</h3> 
        <p>View or Add more Performance</p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Performance", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Performance", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
    </div>
    <div class="rollup section">
        <h3 class="rollup-trigger">Power Consumption</h3> 
        <p>View or Add more Power Consumption</p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Power", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Power", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
    </div>
    <div class="rollup section">
        <h3 class="rollup-trigger">Qualitative Validation</h3> 
        <p>View or Add more Qualitative Validation</p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("View", "Index", "Qual", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
        <p class="more"><a href="#">&raquo; @Html.ActionLink("Add", "Create", "Qual", new { appID = Model.ApplicationID, deviceID = Model.DeviceID}, null)</a></p>
    </div>

</div> 
```

并且菜单操作看起来像问题中的那个。

完毕。在没有答案之后，它比我预期的更优雅。但这是我需要的。

# delphi - 如何将字符串保存在另一个过程中创建的字符串列表中？

> ID：15388376
> 
> 赞同：1
> 
> 时间：2013-03-13T14:40:22.280
> 
> 标签：delphi, procedure, delphi-xe3, tstringlist

我的程序需要一些帮助。我想将一些字符串保存在另一个过程中创建的字符串列表中。我怎样才能做到这一点？

我在正确的地方写了一条评论，以便更好地理解它。

```
procedure GetIniNamesWithoutExt(IniPfade: TStringList);
var
  i, suchPunkt: integer;
  ini: TIniFile;
  Modul, fullFileName, IniName: String;
begin
  try
  for i := 0 to IniPfade.Count-1 do
  begin
    fullFileName := IniPfade.Strings[i];
    Modul := ExtractFileName(fullFileName);  // Dateiname aktueller Ini + .Ini Endung
    suchPunkt := Pos('.', Modul);
    IniName := Copy(Modul, 1, suchPunkt-1);  // Aktueller Modulname ohne ini Endung
    // Here should be the Code for saving the String "IniName" to a StringList which is created in procedure a. Procedure a calls the procedure GetIniNamesWithoutExt.
  end;
  finally

  end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:48:03.507

怎么样

```
procedure GetIniNamesWithoutExt(IniPfade, Module: TStrings);
var
  i, suchPunkt: integer;
  ini: TIniFile;
  Modul, fullFileName, IniName: String;
begin
  Module.BeginUpdate;
  try
    for i := 0 to IniPfade.Count-1 do
    begin
      fullFileName := IniPfade.Strings[i];
      Modul := ExtractFileName(fullFileName);  // Dateiname aktueller Ini + .Ini Endung
      suchPunkt := Pos('.', Modul);
      IniName := Copy(Modul, 1, suchPunkt-1);  // Aktueller Modulname ohne ini Endung
      Module.Add(IniName);
    end;
  finally
    Module.EndUpdate;
  end;   
end; 
```

并从程序A：

```
procedure A;
var 
  Module: TStringList;
begin
  Module := TStringList.Create;
  try
    GetIniNamesWithoutExt(IniPfade , Module);
    // Do Whatever you want with "Module"
  finally
    Module.Free;
  end;
end; 
```

# jinja2 - Jinja2 - 在多个文件中拆分宏

> ID：15388387
> 
> 赞同：4
> 
> 时间：2013-03-13T14:40:51.483
> 
> 标签：jinja2

给定一个文件中有大量 Jinja2 宏，我们称它为`macros.html`.

我想将该文件分解为多个较小的文件，但是当我使用`import`.

例如，假设我有

### 宏.html

```
{% macro A_1() %} A_1 {% endmacro %}
{% macro A_2() %} A_2 {% endmacro %}
{% macro A_3() %} A_3 {% endmacro %}

{% macro B_1() %} B_1 {% endmacro %}
{% macro B_1() %} B_1 {% endmacro %} 
```

在其他地方我用`import "macros.html" as macros`.

我想分解`macros.html`成多个文件，比如`A.html`和`B.html`在这个例子中，像这样：

### 一个.html

```
{% macro A_1() %} A_1 {% endmacro %}
{% macro A_2() %} A_2 {% endmacro %}
{% macro A_3() %} A_3 {% endmacro %} 
```

### B.html

```
{% macro B_1() %} B_1 {% endmacro %}
{% macro B_1() %} B_1 {% endmacro %} 
```

但是，我希望`macros.html`以前能够将其包含在`import "macros.html" as macros`.

我已经尝试了很多事情，但它们并没有按预期工作。`jinja2.environment.TemplateModule object has no attribute 'A_1'`在执行以下任何操作时，我通常会遇到错误`macros.html`

```
{% include "A.html" %}

{# or #}

{% from "A.html" import A_1 %} 
```

似乎有点工作的唯一选择是：

```
{% import "A.html" as XYZ %}
{% set A_1 = XYZ.A_1 %} 
```

不幸的是，在这种情况下，宏`A.html`无法从主文件访问全局宏，这与将宏全部包含在`macros.html`.

无论如何，那里有很多不必要的重复，因为我会为每个导入的文件有效地导入匿名模块名称，只是为了访问和手动命名它的每个宏成员。

似乎应该有更好的选择。

我考虑过的一个是编写我自己的文件加载器来加载和连接宏的全局。基本上是一个从头开始创建“macros.html”的预处理器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-19T13:56:58.973

您可以使用扩展从现有的宏文件继承。如果在“A”中您从“B”继承，则将“A”导入页面，您可以调用 B 的宏，就好像它们是文件“A”的一部分一样，无需在页面中额外导入。正如您所要求的，它在外观上看起来是同一个文件。这是如何完成的：

```
{% extends 'macrosdir/file.html' %} 
```

# android - 无法从图像文件中解码位图

> ID：15388388
> 
> 赞同：1
> 
> 时间：2013-03-13T14:40:53.503
> 
> 标签：android, httpurlconnection, android-image

我正在尝试从 URL 下载图像。图像类型为 PNG，分辨率为 400x400 像素。

这是下载代码片段。

```
Bitmap bitmap=null;
URL imageUrl = new URL(url);
conn = (HttpURLConnection)imageUrl.openConnection();
conn.setConnectTimeout(30000);
conn.setReadTimeout(30000);
conn.setInstanceFollowRedirects(true);
InputStream ins=conn.getInputStream();
os = new FileOutputStream(f);
Utilities.getUtilities().copyStream(ins, os);
os.flush();

Log.i(TAG_NAME, "file size : "+ f.length());
Log.i(TAG_NAME, "file exists in cache? " + f.exists());
bitmap = decodeFile(f);
return bitmap; 
```

这是文件编写器。

```
public void copyStream(InputStream is, OutputStream os) {
  final int buffer_size=1024;
    try
    {
        byte[] bytes=new byte[buffer_size];
        for(;;)
        {
          int count=is.read(bytes, 0, buffer_size);
          if(count==-1)
              break;
          os.write(bytes, 0, count);
        }
    }
    catch(Exception ex){
        ex.printStackTrace();
    }
} 
```

以及解码方法

```
private Bitmap decodeFile(File f){
   //decode image size
   BitmapFactory.Options o = new BitmapFactory.Options();
   o.inJustDecodeBounds = true;
   try {
     BitmapFactory.decodeStream(new FileInputStream(f));
   } catch (FileNotFoundException e) {
      e.printStackTrace();
   }

   final int REQUIRED_SIZE = 400; //for testing, it is set to b a constant
   System.out.println("REQUIRED_SIZE >>> " + REQUIRED_SIZE);
   int width_tmp=o.outWidth, height_tmp=o.outHeight;
   int scale=1;
   while(true){
      if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
            break;
      width_tmp/=2;
      height_tmp/=2;
        scale*=2;
    }

    //decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    //o2.inJustDecodeBounds = true;
    o2.inPreferredConfig = Bitmap.Config.ARGB_8888;
    o2.inSampleSize=scale; //scale is set off since android:src automatically scales the image to fit the screen

    try {
        return BitmapFactory.decodeStream(new FileInputStream(f));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

} 
```

我可以看到该文件存在于设备中。但是，解码流失败。我花了几个小时在互联网上搜索；几乎尝试了一切，没有成功，几乎我的脑袋都在转动。

解码流导致以下错误。

```
SkImageDecoder::Factory returned null 
```

你发现这里有什么遗漏吗？

**编辑：**

问题现已解决。服务器期待我未能附加的 cookie 详细信息。花了将近一天的时间，在灌木丛中跳来跳去:-)

感谢大家的宝贵意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:21:22.000

IMO，您可能需要重新评估 httpurlconn 与本机[httpclient](https://code.google.com/p/httpclientandroidlib/)实现的优点。Android/google 选择 httpurlconn，但许多人选择更好地控制网络协议的底层细节。

这是包含在位图处理程序中的[示例异步](http://masl.cis.gvsu.edu/2010/04/05/android-code-sample-asynchronous-http-connections/)httpclient。`method=processBitmapEntity()`您可以使用影响 bmp 大小的规则轻松扩展示例。

示例 getbitmap 网址：

```
 public  int getBitmap(String mediaurl, int ctr){

           Handler handler = new Handler() {
               public void handleMessage(Message message) {
                 switch (message.what) {
                 case HttpConnection.DID_START: {
                   Log.d(TAG, "Starting connection...");
                   break;
                 }
                 case HttpConnection.DID_SUCCEED: {
                     //message obj is type bitmap
                     Log.d(TAG, "OK bmpARRAY " +message.arg1); 
                    Bitmap response = (Bitmap) message.obj;
                   break;
                 }
                 case HttpConnection.DID_ERROR: {

                   Exception e = (Exception) message.obj;
                   e.printStackTrace();
                   Log.d(TAG, "Connection failed.");
                   break;
                 }
               }
             }
           };        
           new HttpConnection(handler, PreferenceManager.getDefaultSharedPreferences(this), ctr).bitmap(mediaurl);

       return -1; 
```

HttpConnection 类中的位图处理程序是上面链接示例的一部分：

```
private void processBitmapEntity(HttpEntity entity) throws IOException {
    BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
    Bitmap bm = BitmapFactory.decodeStream(bufHttpEntity.getContent());
    handler.sendMessage(Message.obtain(handler, DID_SUCCEED, bm));
} 
```

还有一个[git 项目](https://github.com/rowntreerob/gpsclipper/blob/master/src/com/b2bpo/media/geophoto/HttpConnection.java)

# java - JTable 模型填充

> ID：15388391
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:40:59.387
> 
> 标签：java, swing

我在 GUI 上的表格有字段，我想要发生的是当调用此方法来创建新行并简单地填写信息时。错误是这个

> 没有找到合适的方法`getrow`

```
public void UpdateTable()
{
    DefaultTableModel TableModel = new DefaultTableModel();
    for(Patient k: PatientList)
    {
        int TableID = k.getAccountNumber();
        String TableName = k.getName();
        int TableAge = k.getAge();
        String TableAddress = k.getAddress();
        String TableSex = k.getSex();
        String TablePhone = k.getPhone();

        //I get the error here
        TableModel.addRow(TableID,TableName,TableAge,TableAddress,TableSex,TablePhone);

        TableView.setModel(TableModel);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:46:29.553

查看. [_](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29) _ 需要一个*数组*。你可以这样做：`DefaultTableModel#addRow``addRow`*`Objects`*

 *```
tableModel.addRow(new String[] { tableID, tableName, ... }); 
```

*旁白*：

*   您是否知道您正在为*每个* `Patient`设置模型？这将导致表包含单行。您可能希望将呼叫移到循环`setModel` *之外。*`for`
*   Java 命名约定表明变量名称以*小写*字母开头`TableModel` `tableModel`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:47:47.320

您确实应该使用以下代码：

```
public void UpdateTable()
{
DefaultTableModel tableModel = (DefaultTableModel)TableName.getModel();
for(Patient k: PatientList)
{
   int TableID = k.getAccountNumber();
   String TableName = k.getName();
   int TableAge = k.getAge();
    String TableAddress = k.getAddress();
    String TableSex = k.getSex();
    String TablePhone = k.getPhone();

    //Add row here.
    tableModel.addRow(new String[]{TableID,TableName,TableAge,TableAddress,TableSex,TablePhone });
   }
} 
```

看看这里 [DefaultTableModel.addRow()](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5B%5D%29)了解如何使用`addRow()`方法`DefaultTableModel`*

# .net - Rapidshare API 上传文件

> ID：15388393
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:41:00.753
> 
> 标签：.net, vb.net, razor, upload, rapidshare

我尝试使用 API 文档上传到 Rapidshare。我已经看过很多文章，但仍然无法“完成”。目前我不断收到以下响应错误：

> 错误：子程序无效。(b6ba5d82)

我使用了以下文档：

[http://images.rapidshare.com/apidoc.txt](http://images.rapidshare.com/apidoc.txt)

并且还使用了我在stackoverflow上找到的一个例子：

[使用 HTTPWebrequest (multipart/form-data) 上传文件](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data/2996904#2996904)

我正在使用以下代码：

```
Sub Main
    Dim freeurl As String = "http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver"
    Dim req As WebRequest = WebRequest.Create(freeurl)
    Dim response = req.GetResponse().GetResponseStream()
    Dim reader As New StreamReader(response)
    Dim nextfreeserver = reader.ReadToEnd()
    req = Nothing
    response = Nothing
    reader= Nothing 

    Dim login As String = "********"
    Dim password As String = "********"
    Dim filename As string = "test12345.txt"
    Dim filepath = "C:\Users\Public\Documents\" & filename

    Dim uploadurl As String = "https://rs" & nextfreeserver & ".rapidshare.com/cgi-bin/rsapi.cgi?sub=upload"
    uploadurl = uploadurl & "&login=" & login & "&password=" & password & "&filename" & filename & "&filecontent=" & filepath

    Dim nvc As NameValueCollection = new NameValueCollection()

    nvc.Add("sub", "upload")
    nvc.Add("login", login)
    nvc.Add("password", password)

    Dim resp As String = ""
    resp =  HttpUploadFile("https://rs" & nextfreeserver & ".rapidshare.com/cgi-bin/rsapi.cgi", filepath, "filecontent", "application/octet-stream", nvc)

End Sub

Public Shared Function HttpUploadFile(url As String, file As String, paramName As String, contentType As String, nvc As NameValueCollection) As string

    Dim boundary As String = "---------------------------" & DateTime.Now.Ticks.ToString("x")
    Dim boundarybytes As Byte() = System.Text.Encoding.ASCII.GetBytes(vbCr & vbLf & "--" & boundary & vbCr & vbLf)

    Dim wr As HttpWebRequest = DirectCast(WebRequest.Create(url), HttpWebRequest)
    wr.ContentType = "multipart/form-data; boundary=" & boundary
    wr.Method = "POST"
    wr.KeepAlive = True
    wr.Credentials = System.Net.CredentialCache.DefaultCredentials

    Dim rs As Stream = wr.GetRequestStream()

    Dim formdataTemplate As String = "Content-Disposition: form-data; name=""{0}""" & vbCr & vbLf & vbCr & vbLf & "{1}"
    For Each key As String In nvc.Keys
        rs.Write(boundarybytes, 0, boundarybytes.Length)
        Dim formitem As String = String.Format(formdataTemplate, key, nvc(key))
        Dim formitembytes As Byte() = System.Text.Encoding.UTF8.GetBytes(formitem)
        rs.Write(formitembytes, 0, formitembytes.Length)
    Next
    rs.Write(boundarybytes, 0, boundarybytes.Length)

    Dim headerTemplate As String = "Content-Disposition: form-data; name=""{0}""; filename=""{1}""" & vbCr & vbLf & "Content-Type: {2}" & vbCr & vbLf & vbCr & vbLf
    Dim header As String = String.Format(headerTemplate, paramName, file, contentType)
    Dim headerbytes As Byte() = System.Text.Encoding.UTF8.GetBytes(header)
    rs.Write(headerbytes, 0, headerbytes.Length)

    Dim fileStream As New FileStream(file, FileMode.Open, FileAccess.Read)
    Dim buffer As Byte() = New Byte(4095) {}
    Dim bytesRead As Integer = 0
    While (InlineAssignHelper(bytesRead, fileStream.Read(buffer, 0, buffer.Length))) <> 0
        rs.Write(buffer, 0, bytesRead)
    End While
    fileStream.Close()

    Dim trailer As Byte() = System.Text.Encoding.ASCII.GetBytes(vbCr & vbLf & "--" & boundary & "--" & vbCr & vbLf)
    rs.Write(trailer, 0, trailer.Length)
    rs.Close()

    Dim wresp As WebResponse = Nothing
    Try
        wresp = wr.GetResponse()

        Dim stream2 As Stream = wresp.GetResponseStream()
        Dim reader2 As New StreamReader(stream2)
        return reader2.ReadToEnd()

        If wresp IsNot Nothing Then
            wresp.Close()
            wresp = Nothing
        End If
    Finally
        wr = Nothing
    End Try
End Function    

Private Shared Function InlineAssignHelper(Of T)(ByRef target As T, value As T) As T
   target = value
   Return value
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:00:00.367

它不起作用，因为您不应该将数据放入 URL 本身。rapidshare 上传的基本 URL 仅为：

```
https://rs + nextfreeserver + .rapidshare.com/cgi-bin/rsapi.cgi 
```

所有其他的东西都必须放在多部分形式本身中。

要获取更多信息，请在 shell 中尝试：

```
nextserver=$( \
    curl http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver) 
```

接着：

```
curl -F sub=upload \
     -F filecontent="@foo;filename=foo" \
     -F login=myname -F password=mypassword \
     https://rs$nextserver.rapidshare.com/cgi-bin/rsapi.cgi 
```

使用`--verbose`或`--trace`开关，您可以查看文件上传期间发生的所有情况（发送和接收的标题、发布的数据等）。这对于调试目的来说足够方便

# spring - 检索实体自动生成的 Id

> ID：15388399
> 
> 赞同：0
> 
> 时间：2013-03-13T14:41:08.750
> 
> 标签：spring, hibernate, jpa, spring-data

我正在尝试找到一种方法来检索通过级联持久保存在数据库中的实体的自动生成的 ID。我正在使用 Hibernate 4.1.9、Spring 数据 1.2 和 Spring 框架 3.2.1。以下是有问题的实体：位置、家庭、房间。

位置父类

```
@Entity
@Table(name = "location")
@Inheritance(strategy = InheritanceType.JOINED)
public class Location implements Serializable
{

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "location_id", unique = true)
private long uuid;

// other attributes and methods not relevant
} 
```

扩展 Location 的 Home 类，引用一组 Rooms

```
@Entity
@Table(name = "home")
@Inheritance(strategy = InheritanceType.JOINED)
@PrimaryKeyJoinColumn(name = "home_id")
public class Home extends Location implements Serializable
{

@OneToMany(mappedBy = "containingHome", cascade = {CascadeType.ALL}, orphanRemoval = true)
private Set<Room> rooms;
// other attributes and methods not relevant
} 
```

最后是引用 Home 对象的 Room 类

```
@Entity
@Table(name = "room")
@PrimaryKeyJoinColumn(name = "room_id")
public class Room extends Location implements Serializable
{

@ManyToOne()
@JoinColumn(name = "home_id")
protected Home containingHome;
// other attributes and methods not relevant
} 
```

我正在使用 Spring 数据为实体创建存储库。

位置存储库

```
public interface LocationRepository extends JpaRepository<Location, Long>
{ } 
```

我遇到的问题是我需要 id 以便能够从数据库中检索不同的对象，并且它是自动生成的。我可以通过元素访问 id 的唯一方法是当我将托管对象保存到数据库时获取它。但是，如果我尝试像这样依次保存每个位置：

```
Home home = new Home();
home = locationService.save(home) // service that just calls locationRepository.save method
Room bedroom = new Room(home);
bedroom = locationService.save(bedroom); 
```

我在数据库中得到一个重复的房间条目，我认为这与 Hibernate 问题[https://hibernate.onjira.com/browse/HHH-7404](https://hibernate.onjira.com/browse/HHH-7404)有关。如果我只是打电话

```
Home home = new Home();
Room bedroom = new Room(home);
locationService.save(home) 
```

没有双打，但我无法检索房间对象，因为它在级联上持续存在并且它的 ID 为 0。有没有办法解决这个问题而无需在该位置引入其他字段，例如我必须自己生成的唯一名称? 任何帮助深表感谢。

**编辑**

如果在最后一种情况下我有`home = locationService.save(home)`然后调用`home.getUuid()`我得到正确的值，我认为这是正常的，因为我检索了一个托管对象。但是如果我这样做，`bedroom.getUuid()`我会得到 0，因为卧室没有被管理，所以它的 id 字段没有用数据库中的值更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:35:13.753

您是否尝试`home.getUuid();`在持久调用之后调用（假设您有该字段的吸气剂）？

您可能会感到惊讶，但 Hibernate（和 JPA）将使用 id 更新内存中的副本。

# c# - 在 WP7 上画线时性能不佳的问题

> ID：15388400
> 
> 赞同：0
> 
> 时间：2013-03-13T14:41:14.723
> 
> 标签：c#, windows-phone-7, draw

我正在开发一个应用程序，它有一部分可以让你用手指画画。

为此，我遵循了本教程（这里也是带有源代码的应用程序）： [http ://sigurdsnorteland.wordpress.com/2010/10/20/fingerpaint-a-little-wp7-paint-app/](http://sigurdsnorteland.wordpress.com/2010/10/20/fingerpaint-a-little-wp7-paint-app/)

这（几乎相同）： [http ://www.geekchamp.com/tips/drawing-in-wp7-2-drawing-shapes-with-finger](http://www.geekchamp.com/tips/drawing-in-wp7-2-drawing-shapes-with-finger)

问题（对于两者）是，如果我画了很多线，应用程序会变得非常慢，无法正常绘制。发生这种情况是因为我创建了太多保存在内存中的行吗？我该如何解决这个问题？我在市场上看到了许多不受此问题影响的应用程序...

提前致谢 ：）。

# c++ - std::bad_alloc 和 GSL ODE 求解器

> ID：15388403
> 
> 赞同：0
> 
> 时间：2013-03-13T14:41:25.437
> 
> 标签：c++, memory-management, gsl, ode, bad-alloc

我正在尝试使用 GSL 求解器求解（大型）ODE 系统。当我使用驱动程序方法时，我收到一条错误消息`could not allocate space for gsl_interp_accel`，当我手动定义控件、错误和步进器时，我得到`bad_alloc`异常，据我了解，这是由在另一种情况下导致的相同原因引起`could not allocate space for gsl_interp_accel`的 - 缺少的记忆。

我已经咨询过其他`bad_alloc`查询，例如[这个](https://stackoverflow.com/questions/8378797/stdbad-alloc-am-i-using-too-much-memory)，但我没有发现任何对我的特定案例有用的东西。此外，我尝试过其他 ODE 求解器，但它们也最终会出现内存错误。我还用 valgrind 检查了我的程序，以确保除了求解器之外的其他任何地方都没有内存错误/泄漏。

任何求解器都有“积分限制”，在我的案例中，程序在大约 10% 的上限（与下限相比很大 - 我很确定这是我得到的错误的来源 - 但我确实需要在这些特定限制之间进行整合），然后以我上面引用的例外之一终止。我尝试了各种（固定/自适应）步长，但从未达到我想要的 10% 以上。

给出异常的代码是：

```
gsl_ode_struct inputstruct;  // Struct that contains parameters for ODEs 
gsl_odeiv2_system sys = {func, NULL, 2*G.getsize(), &inputstruct};
const gsl_odeiv2_step_type * T = gsl_odeiv2_step_rk8pd;
gsl_odeiv2_step * stepper = gsl_odeiv2_step_alloc (T, size_of_the_system);
gsl_odeiv2_control * control = gsl_odeiv2_control_standard_new (1.e-6, 0.0, 1., 0.);
gsl_odeiv2_evolve * error = gsl_odeiv2_evolve_alloc (size_of_the_system);
double hparam = 1.e-6; // Initial step size
double t = xspan[0]; // Initial time
while(t < final_time){
    // Here the excpection comes
    int status = gsl_odeiv2_evolve_apply (error, control, stepper, &sys, &t, final_time, &hparam, array);
    if(status != GSL_SUCCESS)
        break;
    // Do some stuff that includes reading all the intermediate results to a container as I need them later.
    }
    gsl_odeiv2_evolve_free (error);
    gsl_odeiv2_control_free (control);
    gsl_odeiv2_step_free (stepper); 
```

因此，如果我更改`final_time`为`final_time/10`执行代码，但结果没有任何意义。但是，即使在求解器之后什么都不做，仍然会抛出异常`could not allocate space for gsl_interp_accel`。

我试图将循环拆分为几个（许多）循环，并在其间擦除内存，但这并没有太大帮助。

如果这很重要，我使用 Ubuntu 12.10，使用 GNU 编译器和 Intel C++ Composer 编译。还在 Mac 上进行了测试（不知道是哪个版本的操作系统），结果相同。

问题是：有没有办法“欺骗”求解器并使程序正常工作？

PS：ODEint 求解器，具有更智能的获取中间结果的方法，也会引发异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T11:02:29.107

我遇到了类似的问题。程序在某个 final_time 以 bad_alloc 错误终止。如果我缩短积分时间，程序会正常终止，但这不是我想要的。然后我将 epsabs 从 1e-9 减少到 1e-6，程序可以正常运行，直到我需要的 final_time。

这不是解决方案，而是妥协。

# c# - 是否可以向 C# 或 VB.NET 添加关键字？

> ID：15388407
> 
> 赞同：7
> 
> 时间：2013-03-13T14:41:38.873
> 
> 标签：c#, .net, vb.net, visual-studio, language-design

我知道这可能不值得，但只是出于教育目的，我想知道是否有办法将您自己的关键字注入 .NET 语言。

例如，我认为在 C# 中有 C++ asm 关键字很好。
请记住，我不是在谈论如何实现 asm 关键字，而是在 C# 中添加关键字的一般方法。

我想象的代码：

```
asm{
    mov ax,1
    add ax,4
} 
```

那么有没有办法做到这一点？
涵盖实施的答案`keyword{ }`足以解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:15:52.240

目前这是不可能的。然而，微软正在开发一个名为[Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)的项目，可以概括为“编译器即服务”。除其他外，它还允许您通过 API 扩展或修改编译器的行为。

当 Roslyn 可用时，我相信这应该是可行的（小心！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:43:19.920

不幸的是，这是不可能的。您不能以任何方式扩展或更改语言。

您可以以某种晦涩的方式使用 PostSharp 读取和解析字符串，并在编译时将它们转换为自定义代码（预处理器）。但是你不会对此很满意，因为它很容易出错，而且你不会为你的魔术字符串获得任何类型的智能感知或代码完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:47:00.563

在将代码发送到 C# 编译器之前，您可以使用任何您想要预处理代码的工具。例如，您可以使用 VS 宏来进行预处理，将您发明的给定语法映射成可以编译成 C# 代码的东西，*如果*出现问题，可能会生成错误。如果 VS 宏对您来说功能不够强大，那么您始终可以使用自己的 IDE，该 IDE 在将文本发送到编译器之前对文本执行任何代码操作。

编译器中没有内置支持来指定您自己的关键字/语法；您需要完全独立于编译器来处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:45:38.280

根据[MSDN](http://msdn.microsoft.com/en-us/library/x53a06bb.aspx) ，关键字是预定义的，不能更改。所以你不能添加任何东西，因为你需要告诉编译器如何处理它们。就目前而言，不，你不能。

# java - 为什么这个 If 语句返回 True？

> ID：15388415
> 
> 赞同：0
> 
> 时间：2013-03-13T14:41:51.217
> 
> 标签：java, if-statement

我正在使用摆动表在 Eclipse 中开发一个计时器应用程序来存储数据。我遇到的主要问题是这个 if 语句一直返回 true，即使这些变量中的值相同（如输出所示）。这可能是什么原因造成的？

这是我的代码片段：

```
String currentPID = lblCurrentPID.getText();
for (int i = 0; i < tableActive.getRowCount(); i++) {
    String currentValue = (String) tableActive.getValueAt(i, 2);
    System.out.println(i + ": Current Value: " + currentValue + " - Current PID: "+ currentPID);
    if (currentPID != currentValue) {
        System.out.println("The value and PID are not the same for some reason!");
    }
    else {
        tableActive.setValueAt(ts1.getOverallTotalTime(), i, 3);
        System.out.println(i + ": Row Was Changed!");
    }
} 
```

这是输出：

0：当前值：Test3 - 当前 PID：Test3

由于某种原因，值和PID不一样！

1：当前值：12345 - 当前 PID：Test3

由于某种原因，值和PID不一样！

2：当前值：54321 - 当前 PID：Test3

由于某种原因，值和PID不一样！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:42:59.360

```
 if (currentPID != currentValue){ 
```

应该

```
 if (!currentPID.equals(currentValue)){ 
```

用于`equals()`检查字符串是否相等。`==`运算符仅检查两个 ref 变量是否引用同一个 String 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:43:02.033

当您进行`String`（或）`Object`比较时，最好使用`equals()`

```
 if (!currentPID.equals(currentValue)){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:44:10.040

应该`if (!currentPID.equals(currentValue))`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T14:44:29.813

为了比较 java 中的字符串，使用`equals`而不是`==`（或`!=`）查看[Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)以获得所有充分的理由。

# c#-4.0 - 如何在 C# 中创建可以从服务器断开连接中恢复的 TCP 客户端

> ID：15388417
> 
> 赞同：0
> 
> 时间：2013-03-13T14:41:53.673
> 
> 标签：c#-4.0, tcpclient

我正在用 C# 构建一个 TCP 客户端应用程序。它连接到服务器。在正常情况下，服务器每秒都会发送新数据。我的客户端应用程序解析字节流，将其保存到数据库中，然后等待来自服务器的下一条消息。它在单独的线程上运行，只要主应用程序正在运行，它就应该继续接收消息并处理它们。但是，有时服务器会消失或网络连接暂时丢失等。如果服务器重新联机或再次可访问，我的代码需要能够从中恢复并继续处理服务器消息。当服务器断开连接时，我当前的代码似乎挂起，让它再次处理的唯一方法是完全关闭它然后重新启动它。我究竟做错了什么？

```
bool IsCancelled = false;
IPEndPoint _ipEndPoint = new IPEndPoint(IPAddress.Parse(myIPAddress), myPort);
TCPClient _tcpClient = new TCPClient();
_tcpClient.Connect(_ipEndPoint);
NetworkStream _networkStream = _tcpClient.GetStream();

while(!IsCancelled)
{
  _data = new byte[10025];
  if(_networkStream.CanRead)
  {
    _bytesRead = _networkStream.Read(_data, 0, (int)_tcpClient.ReceiveBufferSize);
    if(_bytesRead > 0)
    {
      ...Process data...
    }
  }
} 
```

# java - Jumblr 创建 Photoset 帖子

> ID：15388418
> 
> 赞同：0
> 
> 时间：2013-03-13T14:41:54.273
> 
> 标签：java, tumblr

我正在使用 Java 的 [jumblr][1] API 包装器。现在我想像这样将照片添加到 PhotoPost：

```
PhotoPost pp = client.newPost(blogName, PhotoPost.class);
pp.isPhotoSet(true);
List<Photo> photos = new ArrayList<Photo>();

Photo photo = new Photo();
photo.setSource("http://example.com/a.jpg");

Photo photo2 = new Photo();
photo.setSource("http://example.com/b.jpg");

photos.add(photo);
photos.add(photo2);

pp.setPhotos(photos);
pp.save(); 
```

我目前的问题是：

*   如何在照片对象中设置 URL
*   如何在 PhotoPost 中设置 Photos[] 数组

有人对此有想法吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:13:21.367

目前 Jumblr 不支持照片集，但如果您在[https://github.com/tumblr/jumblr](https://github.com/tumblr/jumblr)请求该功能，我很乐意添加它

# algorithm - “确定列表是否包含两个总和为 0 的整数”的替代解决方案

> ID：15388421
> 
> 赞同：3
> 
> 时间：2013-03-13T14:41:55.443
> 
> 标签：algorithm, sorting

假设您有一个任意整数列表，`True`如果列表中存在总和为 0 的对，则返回。

我能够产生 n*log(n) 复杂度的解决方案。这是一个简短的草图（虽然有一个更简单的方法，见下文）：

1.  对数组进行排序。设置指向第一个元素的指针。
2.  调查指针的元素（首先调用它）和数组对面的元素（最后调用它）。如果第一个元素的大小大于最后一个元素，则删除第一个元素并将指针移动到最后一个元素。否则开始向后遍历数组以寻找（可能的）总和。
3.  如果没有找到总和，将指针移动到下一个元素并重复 2。

上面的解释并不重要。**显然还有另一种使用字典的解决方案。**有人可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:46:54.183

如果元素是 -x 和 x，则总和可以得到 0。遍历所有元素并将值存储在字典中。如果您有 x 检查是否设置了 -x。

顺便说一句，您的解决方案是 n*log(n)+n 而不是 n*log(n) `</nitpick>`:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:45:52.920

您将`key=n`和添加`value=0-n`到字典中。如果字典已经包含`0-n`作为键 -> 找到该对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:52:44.100

您可以通过使用 hashmap 数据结构轻松实现 O(n) 时间/空间复杂度。

1.  遍历所有元素并将它们放入 hashmap（时间复杂度为 O(n)，考虑到 hashmap 操作插入、查找和删除的分摊时间复杂度为 O(1)）
2.  遍历所有元素并为每一个元素检查hashmap 是否包含逆值（即，对于每个值V 检查，如果hashmap 包含-V 值）。时间复杂度再次为 O(n)。

O(n) + O(n) = O(n)

# php - 根据给定的 id 显示单个数据库记录

> ID：15388422
> 
> 赞同：0
> 
> 时间：2013-03-13T14:41:57.873
> 
> 标签：php, mysql, codeigniter, search, show

## 我仍然无法让它工作，这对我作为一个 codeigniter 新手来说有点棘手。请帮我。

我正在使用 codeigniter，现在我想一一展示我的工厂。

我做了一个搜索功能，我可以搜索我的工厂。我在 html 表中显示结果。

现在我想为工厂名称创建一个超链接。因此，当我单击工厂名称时，将打开一个页面，其中包含有关该特定工厂的所有信息。

我希望有人知道我的意思。

我的搜索视图：

```
<div id="bigcontent">
<h1>Bedrijven zoeken</h1>
<br />
<form name="input" action="searchresults" method="post">
<input type="search" placeholder="Zoeken..." name="search">
<input type="submit" value="Zoeken" class="searchbutton">
</form>

<br /><br />
<form method="link" action="<?php echo base_url('home/bedrijven')?>">
<input type="submit" value="Bedrijven">
</form>
</div> 
```

搜索结果：

```
<div id="bigcontent">
<h2>Zoekresultaten:</h2>
<br /> <br />
<table>
<tr><th>Bedrijf</th><th>Adres</th><th>Postcode</th><th>Plaats</th><th>Website</th><th>Email</th></tr>
<hr>
<br /> <br />

<?php foreach($query as $item):?>
<tr>
<td><a href="<?php echo base_url('home/showindividueel')?>"><?= $item->Bedrijfsnaam ?></td>
<td><?= $item->Adres ?></td>
<td><?= $item->Postcode ?></td>
<td><?= $item->Plaats ?></td>
<td><?= $item->Website ?></td>
<td><?= $item->Email ?></td>
</tr>
<?php endforeach;?>

</table>

<br /> <br />
<hr>
<br />
<<<a href="<?php echo base_url('home/search') ?>">Terug</a>
</div> 
```

搜索控制器：

```
function search()
{
    $this->load->view('header');
    $this->load->view('search');
    $this->load->view('footer');
}

function searchresults()
{
    $match = $this->input->post('search');
    $data['query'] = $this->bedrijven_model->get_search($match);
    $this->load->view('header');
    $this->load->view('searchresults', $data);
    $this->load->view('footer');
} 
```

搜索模型：

```
function get_search($match)
{
    $this->db->like('Bedrijfsnaam', $match);
    $this->db->or_like('Postcode', $match);
    $this->db->or_like('Plaats', $match);
    $this->db->or_like('Telefoonnummer', $match);
    $this->db->or_like('Email', $match);
    $this->db->or_like('Website', $match);
    $this->db->or_like('Profiel', $match);
    $this->db->or_like('Adres', $match);
    $query = $this->db->get('bedrijven');

    return $query->result();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:14:28.343

将此代码用于您的**搜索结果**并将这些行替换为您的。

```
 <?php foreach($query as $item):?>
 <tr>
  <td><a href="<?php echo base_url()?>'home/showindividueel/<?php echo $item->idbedrijven?>'"><?= $item->Bedrijfsnaam   ?></td>
   <td><?= $item->Adres ?></td>
    <td><?= $item->Postcode ?></td>
    <td><?= $item->Plaats ?></td>
    <td><?= $item->Website ?></td>
     <td><?= $item->Email ?></td>
     </tr>
 <?php endforeach;?> 
```

然后在您的家庭控制器中创建一个 showindividueel 功能

```
 function showindividueel($id)
      {
           $data['query'] = $this->bedrijven_model->get_result($id);
           $this-load->view('table_individual',$data);
      } 
```

这是您的型号代码

```
 function get_result($id);
     {
        $this->db->select('*');
        $this->db->from('bedrijven');

        $this->db->where('idbedrijven', $id);
        $result = $this->db->get();
        return $result->result();   
     } 
```

然后查看**table_individual.php**并粘贴此代码

```
 <table>
       <tr><th>Adres</th><th>Postcode</th><th>Plaats</th><th>Website</th><th>Email</th></tr>
<hr>
<br /> <br />

 <?php foreach($query as $item):?>
   <tr>

 <td><?= $item->Adres ?></td>
 <td><?= $item->Postcode ?></td>
 <td><?= $item->Plaats ?></td>
 <td><?= $item->Website ?></td>
 <td><?= $item->Email ?></td>
 </tr>
 <?php endforeach;?>

  </table> 
```

## 更新

# .net - Control.ResumeLayout 中的 bool 有什么作用？

> ID：15388424
> 
> 赞同：0
> 
> 时间：2013-03-13T14:41:59.883
> 
> 标签：.net, winforms

[Control.ResumeLayout](http://msdn.microsoft.com/en-us/library/w8k76wfs.aspx)有一个 MSDN 声明的 bool

> true 执行挂起的布局请求；否则为假。

这并不能很好地解释这意味着什么，以及被设置为`true`或`false`将是什么后果。备注部分似乎也有矛盾的信息（看起来有人从无参数版本复制粘贴然后添加了第二句）

> 如果有任何挂起的布局请求，调用 ResumeLayout 方法会强制立即布局。当 performLayout 参数设置为 true 时，如果有任何挂起的布局请求，则会立即进行布局。

我认为如果将其设置为`true`它将立即执行任何布局更改，但我不明白当它是`false`. 布局更改是否会推迟到以后，它们是否已经完成，您为什么需要使用`false`？

`true`那么传递或传递`false`给函数有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:48:00.043

您的理解是正确的（我同意文本看起来存在复制粘贴问题）。

如果传递`true`（或使用不带参数的重载）会发生两件事：

1.  如果在布局暂停期间任何布局触发事件被抑制，则立即执行布局。
2.  未来的布局触发器会导致布局被执行。

如果通过`false`，则 #1 不会发生。

# javascript - Tornado 一键检查所有元素

> ID：15388426
> 
> 赞同：0
> 
> 时间：2013-03-13T14:42:03.513
> 
> 标签：javascript, python, checkbox, tornado

我的 html 页面中有这部分代码：

```
{% if users %}
        {% for user in users %}

        <form name="form_user_{{ user.id }}" method="post" action="/networks/{{ net.id }}/sensors/{{ sens.id }}/rights">
          <tr>
            <td>
              <div>
                {{ escape(user.name) }}
                <input type='hidden' name="id" value='{{ user.id }}'>
              </div>
            </td>
            <td>

              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_0" value="0">
                None
              </label>
              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_1" value="1">
                Read
              </label>
              <label class="radio inline" onclick="document.forms['form_user_{{ user.id }}'].submit();">
                <input type="radio" name="perms" id="perms_{{user.id}}_4" value="4">
                Read + Commands
              </label>

              {{ xsrf_form_html() }}
            </td>

          </tr>
        </form>
        {% end %}
        {% end %} 
```

我有一个来自 Tornado 的用户列表，我可以为他们设置传感器的权限。我会在这个列表的顶部为每个权限创建一个检查元素，以便将相同的权限分配给用户太快。

例如，如果我们单击值为 4 的权限的检查元素，我希望对于用户列表中的每个用户，权限都设置为 4。就像每次单击每个检查一样。

我很抱歉我的英语。我怎样才能做到这一点？

# c - 你可以在 Clang 编译的 C 中内联 LLVM 位代码吗？

> ID：15388428
> 
> 赞同：3
> 
> 时间：2013-03-13T14:42:06.227
> 
> 标签：c, llvm, clang

我很羡慕将[内联汇编器](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#s2)放入 GCC 编译的代码中的能力，我想知道你是否可以用 Clang 做类似的事情？例如，有什么方法可以用[LLVM 汇编器](http://llvm.org/docs/LangRef.html)完成函数的定义：

```
int add_two_ints(int a, int b) {
  /* 
   * some bitcode stuff goes here to add
   * the ints and return the result
   */
} 
```

完成上述示例的任何参考资料或代码都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T22:09:01.870

clang 支持内联汇编，包括 GCC 的扩展，您可以在其中声明输入、输出和破坏寄存器：

```
int add_two_ints(int a, int b) {
   int result;
   asm( "addl %1, %2;"
        "movl %2, %0;"
        : "=r"(result)
        : "r"(a), "r"(b)
        :);
   return result;
} 
```

Clang 还对 Microsoft 的`__asm { }`语法和英特尔风格的程序集提供实验性支持。

它不支持在 C 或 C++ 源代码中包含 LLVM-IR。这样的功能在很大程度上只是一种新颖性，因为内联汇编通常用于访问特殊指令，而 LLVM-IR 不能实现这一点。

# python - 从 pandas.DataFrame 中选择包含数组的单元格的成员资格测试

> ID：15388434
> 
> 赞同：1
> 
> 时间：2013-03-13T14:42:29.037
> 
> 标签：python, pandas, dataframe, containers, contains

这个问题是我[上一个问题的第 2 部分](https://stackoverflow.com/questions/15315452/selecting-with-complex-criteria-from-pandas-dataframe)

例如，我有这样的 DF：

```
df = pd.DataFrame({
    'A': [[e for e in xrange(x+1, x+4)] for x in xrange(0, 15, 3)],
    'B': [[e*10 for e in xrange(x+1, x+4)] for x in xrange(0, 15, 3)],
    'C': [[e*100 for e in xrange(x+1, x+4)] for x in xrange(0, 15, 3)]
})

              A                B                   C
0     [1, 2, 3]     [10, 20, 30]     [100, 200, 300]
1     [4, 5, 6]     [40, 50, 60]     [400, 500, 600]
2     [7, 8, 9]     [70, 80, 90]     [700, 800, 900]
3  [10, 11, 12]  [100, 110, 120]  [1000, 1100, 1200]
4  [13, 14, 15]  [130, 140, 150]  [1300, 1400, 1500] 
```

我需要获取`'A'`包含 10的行。
现在我使用：

```
f = lambda x: 10 in x
mask = df['A'].apply(f)
df[mask] 
```

我的问题是：

*   这是通过会员测试检索的好方法吗？有更好的吗？

*   将列表（和集合）放入 DF 单元格中是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:13:30.480

你最好构建一个多索引框架。这要快得多，因为这些是底层数据的本机类型（提示：在你的框架上执行 df.dtypes，它们将是对象）

```
In [3]: A = pd.DataFrame([[e for e in xrange(x+1, x+4)] for x in xrange(0, 15, 3)])

In [4]: B = pd.DataFrame([[e*10 for e in xrange(x+1, x+4)] for x in xrange(0, 15, 3)])

In [5]: C = pd.DataFrame([[e*100 for e in xrange(x+1, x+4)] for x in xrange(0, 15, 3)])

# this creates a 2-level hierarchy
In [9]: df = pd.concat([A,B,C],keys=['A','B','C'],axis=1)

Out[8]: 
    A            B               C            
    0   1   2    0    1    2     0     1     2
0   1   2   3   10   20   30   100   200   300
1   4   5   6   40   50   60   400   500   600
2   7   8   9   70   80   90   700   800   900
3  10  11  12  100  110  120  1000  1100  1200
4  13  14  15  130  140  150  1300  1400  1500

# select out A
In [14]: df['A']
Out[14]: 
    0   1   2
0   1   2   3
1   4   5   6
2   7   8   9
3  10  11  12
4  13  14  15

# this is a boolean array
In [11]: df['A']>10
Out[11]: 
       0      1      2
0  False  False  False
1  False  False  False
2  False  False  False
3  False   True   True
4   True   True   True 
```

选择特定切片

```
In [26]: df.ix[:,('A',1)]
Out[26]: 
0     2
1     5
2     8
3    11
4    14
Name: (A, 1), dtype: int64 
```

# c++ - 返回向量元素的地址 C++

> ID：15388440
> 
> 赞同：0
> 
> 时间：2013-03-13T14:42:39.160
> 
> 标签：c++, pointers, vector, memory-address

我有2个班，一个叫A，另一个叫B。

在 B 类中有一个类型为 A 的元素的向量。我们称它为 vectorofAs。

我正在 B 中编写一个函数，该函数返回一个指向 A 的指针，而这个 A 是向量的一个元素。

这是功能

```
A* B::function() const {
 *do something to find the needed element index i*
 return &vectorofAs[i];
} 
```

这不应该返回向量的第 i 个元素的地址吗？Intellisense 说“错误：返回值类型与函数类型不匹配”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:47:31.053

您没有指定，但我假设：`vectorOfAs`被定义为 B 类的成员，类型为`std::vector<A>`。

在这种情况下，问题在于您的`function`is defined `const`，这意味着实例的所有成员`B`在此函数中也是 const 。这意味着你`vectorOfAs`是一个`const std::vector<A>`. 这意味着您的函数返回的类型`&vectorOfAs[i]`不是。`A const *``A *`

你有两个选择：

1.  将函数返回类型更改为`A const *`
2.  使函数非常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:45:42.800

您已将该函数标记为 const。

`this`a 也是如此`const B*`，vectorofAs 变成 a `const vector<A>`，并且`vectorofAs[i]`is`const A&`和`&vectorofAs[i]`is a`const A*`与 an 不同`A*`

所以要么在前面放一个 const 要么在最后删除一个

# d3.js - 在 D3.js 中导入和解析 SVG 文件

> ID：15388444
> 
> 赞同：6
> 
> 时间：2013-03-13T14:42:53.680
> 
> 标签：d3.js

我在其他地方创建了 SVG 文件（使用 MS Visio），我想将其用作可视化的背景，其中一些定位是由 SVG 图形中的项目放置驱动的。理想情况下，我将能够直接操作导入的 SVG 数据，然后使用它在使用 D3 的调用文档中创建元素。

有没有一种简单的方法可以使用 D3 将现有的 SVG 文档导入数据结构，类似于导入 JSON 的方式？我试过 d3.xml，但似乎没有得到有用的数据结构。据我所知，使用 IMG 标签导入图形不会用 SVG 元素填充 DOM。

一个小问题：它也必须在 IE9 中工作！（ImportNode 不起作用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T21:33:58.000

感谢您的想法。我发现了最后该怎么做。可以使用 d3.xml 调用导入 SVG 文件。解析完成了，但复杂的是如何理解生成的 DOM 结构。IE9 似乎在放置导入的节点时存在问题，但我不需要这种行为，因为我只想使用传入 SVG 的各个方面，并且将使用 D3 重新生成 SVG

# django - 使用 Django Rest 框架

> ID：15388446
> 
> 赞同：0
> 
> 时间：2013-03-13T14:43:00.673
> 
> 标签：django, django-rest-framework

我有以下模型，它基本上为与特定用户关联的每个标签存储随机哈希值。

```
class PublicTags(models.Model):
    tag = models.ForeignKey(Tag, related_name='hashes')
    hash_value = models.CharField(max_length=103)
    user = models.ForeignKey(User, related_name='tags')
    public = models.BooleanField(default=False)

    class Meta:
        unique_together = ('tag', 'user')
        verbose_name_plural = 'Public Tag Hashes'

    def __unicode__(self):
        return u'%s: %s' % (self.tag, self.user, self.hash_value) 
```

我正在尝试使用 Django Rest Framework 来执行以下操作：

*   创建将在 api/v1/public_tags 访问的视图。
*   我将使用 AJAX 通过 Django Rest API 发布数据。
*   在帖子上，系统会执行以下操作：它检查是否已经有标签 ID 的公共标签行（通过帖子发送）如果没有，它会为该标签和用户创建一个随机 hash_value。

我对如何使用 Django Rest Framework 来完成这项任务感到困惑。

我做到了这一点：

```
class PublicTagView(RetrieveUpdateAPIView):
    model = PublicTags
    serializer_class = serializers.PublicTagSerializer
    permission_classes = (IsAuthenticated,)

class RetrieveUpdateAPIView(mixins.RetrieveModelMixin,
                            mixins.UpdateModelMixin,
                            generics.SingleObjectAPIView):
    """
    Concrete view for retrieving or updating a model instance.
    FIXME: the newest version of rest_framework has this class
    """

    def get(self, request, *args, **kwargs):
        return self.retrieve(request, *args, **kwargs)

    def put(self, request, *args, **kwargs):
        return self.update(request, *args, **kwargs)

    def create(self, request, *args, **kwargs):
        return self.create(request, *args, **kwargs) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:09:56.687

据我了解，您需要查询单个记录并创建记录。在这种情况下，[基于通用类的视图](http://django-rest-framework.org/tutorial/3-class-based-views.html#using-generic-class-based-views)可以很好地开始。

然后，您可以像这样在 urls.py 中映射这些视图：

```
urlpatterns = patterns('',
    url(r'^api/v1/public_tags/$', views.PublicTagsList.as_view()),
    url(r'^api/v1/public_tags/(?P<pk>[0-9]+)/$', views.PublicTagsDetail.as_view()),
) 
```

如果您使用主键来获取单个记录，则这是有效的。

# asp.net-web-api - 访问 ASP.NET Web API 中的默认 JSON.NET 序列化程序

> ID：15388452
> 
> 赞同：3
> 
> 时间：2013-03-13T14:43:23.687
> 
> 标签：asp.net-web-api, json.net

我有一个 ASP.NET Web API 项目，因为它不支持有 2 个主体参数，所以我使用 JObject 参数，然后从中提取实际参数。像这样。

```
Public bool mymethod(JObject data){
   myclassA a = data["a"].toObject<myclassA>();
   myclassA b = data["b"].toObject<myclassB>();
} 
```

但是这 2 个类类型实现了 ISerializable，我需要 JSON.NET 来忽略它。我已经设置了默认的 JSON.NET 序列化程序来执行此操作，并且在自动完成序列化时它工作正常。

但是我需要获取对内置 JSON.NET 序列化程序的引用，以便我可以在上面的代码中像这样使用它。

```
myclassA b = data["b"].toObject<myclassB>(defaultSerializer); 
```

目前我创建了一个 JSON.NET 序列化程序的新实例并使用它。但是如何在 asp.net WEB API 中获得对默认内置序列化程序的引用？

此外，我无法更改类类型中的任何内容，因为这是我正在转换为 web api 的遗留应用程序。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T20:34:46.630

试试这个：

```
JsonSerializer serializer = JsonSerializer.Create(Configuration.Formatters.JsonFormatter.SerializerSettings); 
```

这应该为您提供相同的序列化程序 Web API 使用。

# prolog - 使用列表的 Prolog 祖先子句

> ID：15388454
> 
> 赞同：3
> 
> 时间：2013-03-13T14:43:36.210
> 
> 标签：prolog

我正在努力理解这个基本的 Prolog 概念。

我理解确定一个人的祖先的基本条款如下：

```
ancestor(X, Y) :- parent(X, Y).
ancestor(X, Y) :- parent(X, Z), ancestor(Z, Y). 
```

但是，我试图弄清楚这对于实现列表以确定父母的孩子的序言程序是如何工作的，即：

```
parent_of(simon, [matthew, andrea, joanne]). 
```

为了确定某人是否是某人的父亲，我正在使用这个完美的方法：

```
father_of(X, Y) :- parent_of(X, List), my_member(Y, List), male(X). 
```

但是，我似乎无法弄清楚如何使它适用于上面的祖先子句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:04:38.023

member/2 它是元素和列表之间更简单的关系：

```
ancestor_of(X, Y) :- parent_of(X, Ys), member(Y, Ys).
ancestor_of(X, Y) :- parent_of(X, Zs), member(Z, Zs), ancestor_of(Z, Y). 
```

我添加了一个关系来测试传递规则

```
parent_of(simon, [matthew, andrea, joanne]).
parent_of(andrea, [bill, joan]). 
```

产量

```
?- ancestor_of(andrea,A).
A = bill ;
A = joan ;
false.

?- ancestor_of(simon,A).
A = matthew ;
A = andrea ;
A = joanne ;
A = bill ;
A = joan ;
false.

?- ancestor_of(X,bill).
X = andrea ;
X = simon ;
false. 
```

# forms - Symfony2 默认选择单选按钮

> ID：15388455
> 
> 赞同：1
> 
> 时间：2013-03-13T14:43:38.290
> 
> 标签：forms, symfony, radio-button, default, selected

我知道网络上的各个论坛上已经有很多关于这个主题的帖子。然而，没有一个解决方案实际上对我有用，尽管这个问题看起来很简单。

我想在我的 symfony2 表单中预先选择一个单选按钮：

我的实体：

```
namespace Helloworld\CoreBundle\Entity;

class User {
   ...

   /**
    * @var string
    *
    * @ORM\Column(name="gender", type="string", length=6)
    * @Assert\Choice(choices = {"male","female"}, multiple = false, message = "You must choose a valid gender.")
    */
   protected gender;

   ...
} 
```

（getter 和 setter 都在那里）

我的PHP代码：

```
$user = new User();
$user->setGender('male');

$form = $this->createFormBuilder($user)
    ->add('gender', 'choice', array(
        'choices' => array(
          'male' => 'Male',
          'female' => 'Female'
        ),
        'multiple' => false,
        'expanded' => true,
        'required' => true,
    ))
    ->getForm(); 
```

现在，不幸的是，默认情况下没有选择单选按钮！

有人可以帮忙吗？请？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-24T10:02:31.697

如果您想在表单中预选按钮，请尝试使用“数据”属性和选择数组中的所需键，例如：

```
->add('gender', 'choice', array(
        'choices' => array(
          'male' => 'Male',
          'female' => 'Female'
        ),
        'multiple' => false,
        'expanded' => true,
        'required' => true,
        'data'     => 'male'
    )) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:46:47.277

我认为您需要在创建表单之前保留（和/或刷新？）您的实体，因此该实体有一个 ID 等。（顺便说一句，这是一种预先选择单选按钮的糟糕方式）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T15:42:53.060

对我来说，选择具有值“ ”的单选按钮似乎很合乎逻辑，`male`因为您的实体已经将“男性”作为性别。`symfony2`这是框架的预期行为。

如果您不希望默认情况下不选择单选按钮，只需在将实体传递给表单构建器之前不要将性别设置为实体。

```
$user = new User();
$user->setGender('male'); //<- remove this line

$form = $this->createFormBuilder($user)
    ->add('gender', 'choice', array(
        'choices' => array(
          'male' => 'Male',
          'female' => 'Female'
        ),
        'multiple' => false,
        'expanded' => true,
        'required' => true,
    ))
    ->getForm(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-15T13:58:45.537

对于那些仍在寻找解决方案的人。我能够简单地为`$gender`变量设置一个默认值来解决这个问题：

```
class User {
   ...

   /**
    * @var string
    *
    * @ORM\Column(name="gender", type="string", length=6)
    * @Assert\Choice(choices = {"male","female"}, multiple = false, message = "You must choose a valid gender.")
    */
   protected gender = "male";

   ...
} 
```

# powershell - 将目录中一种类型的所有文件复制到一个文件夹中

> ID：15388457
> 
> 赞同：2
> 
> 时间：2013-03-13T14:43:42.687
> 
> 标签：powershell, batch-file, directory, robocopy

这对我来说是一个新的，所以我几乎是盲目的。

我有一个文件夹，`192.168.1.2\mainFolder`其中包含`folder1`、`folder2`和`folder3`。在每个文件夹中都有一些不同的文件扩展名，以及每种类型的几个文件。我需要获取类型内部存在的所有文件，`mainFolder`并将`.dep`它们复制到`192.168.1.2\copyFolder`

`copyFolder`里面不会有任何文件夹，但只有很多很多文件。

这样做的最佳方法是什么？TPTB 告诉我 robocopy 会有所帮助，但是我从未使用过 robocopy 并认为你们可能知道更好的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:36:31.317

所以你不想要`.dep`里面的文件`folder1`，2等？`Robocopy`/`xcopy`通常是一个不错的选择。如此简单的操作，Powershell 很慢。如果您只想要`.dep`文件`mainfolder`而不是子文件夹中的文件，请尝试：

```
robocopy \\192.168.1.2\mainFolder \\192.168.1.2\copyFolder *.dep 
```

# c++ - 计算文件中唯一单词的最有效结构 [C++]

> ID：15388464
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:44:08.613
> 
> 标签：c++, performance, sorting, data-structures, word-count

我正在尝试创建一个程序来计算文件中单词的唯一出现次数，然后按字母顺序显示它们的计数。

关键是以最快和最有效的方式做到这一点。

请记住，我正在使用 C++ 编写代码，但我并不反对纯理论答案。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:52:33.413

这是一个使用 cin 的示例。

```
#include <iostream>
#include <string>
#include <map>
using namespace std;

int main() {
    string word;
    std::map<std::string, int> word_count;

    while (std::getline(cin, word, ' ')) {
        word_count[word]++;
    }

    typedef std::map<std::string, int>::iterator iter;
    iter end = word_count.end();
    for(iter it = word_count.begin(); it != end; ++it) {
        cout << it->first << ", count= " << it->second << endl;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:50:08.510

我认为您应该将 2 个 std::set 与一些“1 次使用的单词”和“禁止的单词：使用两次或更多次”一起使用。

所以你处理了一个词：cur_word。如果forbidden_​​words 包含它，则忽略它，否则检查allowed_words 是否包含，将其删除并添加到forbidden_​​words，否则只需添加它do allowed_words。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:53:42.100

`std::unordered_set`可能比`std::set`（尤其是在文件很大的情况下）更快。

不过，这不太可能有太大的不同——除非你写得非常糟糕，否则这项工作将受到严重的 I/O 限制，所以你的大部分工作应该放在加速 I/O 上。

如何从那里开始可能取决于目标操作系统。对于 Linux，快速文件读取主要等同于`mmap`. 对于 Windows，您通常希望避免使用内存映射文件，并`ReadFile`与`FILE_FLAG_NO_BUFFERING`标志一起使用。

# c - 这个奇怪的 C++ 定义是什么意思？

> ID：15388468
> 
> 赞同：3
> 
> 时间：2013-03-13T14:44:16.077
> 
> 标签：c, function, definition, kr-c

我的作业代码中有这个奇怪的函数定义，我真的不知道它应该是什么意思。

```
char *
sh_single_quote (string)
char *string;
{...} 
```

尤其是“char *string;” 行，最后的分号是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T14:46:12.873

它是 C 语言中函数的 K&R 风格声明。

在 C 中，您通常将函数编写为：

```
size_t strlen(const char *str)
{
    //code
} 
```

在 K&R 风格中，这将被写为：

```
size_t strlen(str)  <--- here you write only the param name
const char *str;    <--- here you write the type along with param name!
{
   //code
} 
```

# android - Unity 主服务器与简单客户端服务器

> ID：15388471
> 
> 赞同：0
> 
> 时间：2013-03-13T14:44:21.207
> 
> 标签：android, unity3d, client-server, wifi, unityscript

我已经编写了两个程序，我希望这两个程序都在我的 android 设备上运行，它们在同一个网络上，但一个是简单的客户端服务器程序，它将在两个设备上运行并建立连接......但是 Unity Master Server 将运行不正常，无法连接同一网络上的两个 android wifi 设备，该程序将在 localhost 上正常运行。这是简单的客户端服务器代码..此代码运行良好

```
var object:Transform;
 static var Isconnected:boolean=false;
//172.16.11.4
function Start()
{
Application.runInBackground = true;
Debug.Log("run in back groud");
}
function Update()
{
if(Isconnected)
  var temp:Transform;
  temp=Instantiate(object,transform.position, transform.rotation);
}
function OnGUI()
{
if(Network.peerType==NetworkPeerType.Disconnected)
{
  if(GUILayout.Button(" Initlized server"))
  {
   var useNat = !Network.HavePublicAddress();
   Network.InitializeServer(32,25001,useNat);
   Debug.Log("Server has been Initlized");
  }
 } 
  if(GUILayout.Button("connect to server"))
  {
    Network.Connect("172.16.11.4",25001);
  }
}
function OnConnectedToServer() {
    Debug.Log("Connected to server");
    Isconnected=true;
    // Send local player name to server ...
} 
```

但是这段代码不会在 wifi 上运行......如果我们给 ip 127.0.0.1，这段代码在 localhost 上运行

```
#pragma strict
private var rotAngle : float = 0;
private var pivotPoint : Vector2;
var Gamename:String="MyGame";
var refreshing:boolean=false;
private var hostdata:HostData[];

function Start () {

}

function Update () {
var farword=Input.GetKey("up");
if(farword==true)
{
//animation.Play("ArmatureAction");

}
transform.Translate(0,0,Input.GetAxis("Vertical"));
transform.Rotate(0,Input.GetAxis("Horizontal"),0);
if(refreshing)
{
if(MasterServer.PollHostList().Length>0)
{
refreshing=false;
hostdata=MasterServer.PollHostList();
Debug.Log(MasterServer.PollHostList().Length);

}
}

}
function startServer()
{
Network.InitializeServer(32,25001,!Network.HavePublicAddress);
MasterServer.RegisterHost(Gamename,"THis is tutorial","THis is tutorial game");
}
function OnServerInitialized()
{
Debug.Log("Sever is initlized");
}
function OnMasterServerEvent(mgs:MasterServerEvent)
{
if(mgs==MasterServerEvent.RegistrationSucceeded)
{
Debug.Log("Register server");
}

}
function refreshHostList(){
MasterServer.RequestHostList(Gamename);
  refreshing=true;

}

function OnGUI()
{
if((!Network.isClient && !Network.isServer))
{
if(GUI.Button(Rect(100,100,100,100),"Start Sever"))
{
Debug.Log("Start Server");
startServer();
}
if(GUI.Button(Rect(100,220,100,100),"Refresg Hosts"))
{
Debug.Log("Refresh HOsts");
refreshHostList();
}

if(hostdata)
{
for(var i:int=0;i<hostdata.length;i++)
{
 if(GUI.Button(Rect(230,100,100,100),hostdata[i].gameName))
 {
 Network.Connect("172.16.11.4",25001);
 }
}
}
}
if(GUI.Button(Rect(300,300,100,100),"back"))
{
transform.Translate(9,0,0);
}
if(GUI.Button(Rect(300,400,100,100),"farword"))
{
transform.Translate(-9,0,0);
}

} 
```

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T13:43:05.107

我认为在第二个代码中

```
if(hostdata) 
{ 
for(var i:int=0;i<hostdata.length;i++) 
{ 
  if(GUI.Button(Rect(230,100,100,100),hostdata[i].gameName)) 
  { 
  Network.Connect("172.16.11.4",25001); 
  } 
} 
```

需要改变

```
if(hostdata) 
{ 
for(var i:int=0;i<hostdata.length;i++) 
{ 
  if(GUI.Button(Rect(230,100,100,100),hostdata[i].gameName)) 
  { 
   Network.Connect(hostdata[i]); //Or Network.Connect( hostdata[i].ip[ 0 ], hostdata[i].port ); 
  } 
} 
```

而且你的按钮也会覆盖自己。（如果超过 1 个服务器初始化并找到）。您需要创建具有动态起始高度值的 Rect。喜欢：

```
if(hostdata) 
{ 

 var y = 100;  // or other start y position like 0
 for(var i:int=0;i<hostdata.length;i++) 
 { 

  if(GUI.Button(Rect(230,y,100,100),hostdata[i].gameName)) 
  { 
   Network.Connect(hostdata[i]); //Or Network.Connect( hostdata[i].ip[ 0 ], hostdata[i].port ); 
  } 
  y+=100+ 5 //Some padding.
} 
```

如果发生任何问题，例如无法连接服务器，请记住 NAT 穿透通常会导致问题。

# ios - TouchEvent 常量有什么区别？

> ID：15388472
> 
> 赞同：0
> 
> 时间：2013-03-13T14:44:24.877
> 
> 标签：ios, actionscript-3, flash, air, touch-event

AS3 的 TouchEvent 中的 TOUCH_BEGIN、TOUCH_OVER 和 TOUCH_ROLL_OVER 有什么区别？

我正在尝试找到正确的用于“点击”/点击状态的方法，以及用于“点击”按钮后的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:16:41.250

算作`TOUCH_BEGIN`触摸板的`MOUSE_DOWN`版本，带有一个附加参数 - 触摸点的索引（从 0 开始），这样您就不会混淆触摸事件。`TOUCH_END`是触摸板的`MOUSE_UP`，`TOUCH_ROLLOVER`大致同时映射到`MOUSE_DOWN`条件和`MOUSE_OVER`事件。

# java - 在代码中添加和删除 JButton

> ID：15388475
> 
> 赞同：1
> 
> 时间：2013-03-13T14:44:28.847
> 
> 标签：java, swing, jbutton, actionlistener

所以我对 Java 比较陌生，并尝试使用 JButtons 为棋盘和棋子创建一个跳棋游戏。但是我似乎无法通过 ActionListener 删除 JButton。任何意见，将不胜感激。

```
 public static void main(String[] args) {
    checkersBeBitchin begin = new checkersBeBitchin();

}

public checkersBeBitchin(){
    box.setLayout(new BorderLayout());
    makeBoard();
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setSize(600,600);
    setTitle("Checkers");

        }

private void makeBoard() {
    JPanel board = new JPanel();
    board.setLayout(new GridLayout(8,8));
    for (int i=0; i<8; i++){
        for (int j=0; j<8; j++) {
            squares[i][j] = new JButton();
            ActionListener actionListener = new Board();
            squares[i][j].addActionListener(actionListener);
            if((i%2 != 0 && j%2 !=0) ||(i%2==0 && j%2 == 0) ){
                    squares[i][j].setBackground(Color.black);
                    pieceTracker[i][j]=0;
                    //System.out.println("Black"+i+","+j); debugging
                    if(i<3){
                        int blue = 1;
                        Icon piece = new ImageIcon(getClass().getResource("/resources/piece.png"));
                        JButton button = new JButton(piece);
                        //squares[i][j].setRolloverIcon("image dir") to make it prettier down the road.
                        squares[i][j].add(button);
                        pieceTracker[i][j]=blue;
                        ActionListener Listener = new Blue();
                        button.addActionListener(Listener);
                        }
                    else if (i>4){
                        int red=-1;
                        Icon piece = new ImageIcon(getClass().getResource("/resources/piece2.png"));
                        JButton button = new JButton(piece);

                        squares[i][j].add(button);
                        pieceTracker[i][j]=red;
                        ActionListener Listener = new Red();
                        button.addActionListener(Listener);
                        //squares[i][j].setRolloverSelectedIcon("/resources/piece2alt.png");
                        }

            }
            else{
                squares[i][j].setBackground(Color.white);
                pieceTracker[i][j]=0;
                //System.out.println("White"+i+","+j); //debugging
                }
            board.add(squares[i][j]);

            }

        }
    box.add(board, BorderLayout.CENTER);
    }
private class Blue implements ActionListener{

    public void actionPerformed (ActionEvent e){
        System.out.println("You sexy Blue beast.");
        Object x = e.getSource();
        System.err.println(x);
        squares.remove(x); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:48:24.600

方格。删除？它应该读为 squares.remove(x) 吗？我们能看到正方形的定义吗？它是一个数组吗？您必须从板上删除按钮而不是正方形，例如`board.remove(x)`

# javascript - 具有正值和负值的 d3.js 直方图

> ID：15388481
> 
> 赞同：6
> 
> 时间：2013-03-13T14:44:39.940
> 
> 标签：javascript, d3.js

我无法弄清楚如何正确创建数据数组中同时存在正值和负值的直方图。

我在这里使用了直方图示例[http://bl.ocks.org/mbostock/3048450](http://bl.ocks.org/mbostock/3048450)作为基础，虽然 x 轴值和刻度是正确的，但这些条形图是午餐时间。

### 数据

```
var values = [-15, -20, -22, -18, 2, 6, -26, -18, -15, -20, -22, -18, 2, 6, -26, -18]; 
```

### X 比例

```
var x0 = Math.max(-d3.min(values), d3.max(values));

var x = d3.scale.linear()
    .domain([-x0, x0])
    .range([0, width])
    .nice(); 
```

在此处检查 jfiddle：http: [//jsfiddle.net/tNdJj/2/](http://jsfiddle.net/tNdJj/2/)

我认为这是“rect”创作中缺少的东西，但我没有看到它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T16:52:17.707

使用来自以下问题的直方图示例：[带负值的条形图](https://stackoverflow.com/questions/10127402/bar-chart-with-negative-values)

我反转了 x 和 y 并调整了显示。现在你有了一个很好的基础。

![在此处输入图像描述](../Images/55f4b51a0656253d8d24d6c183360270.png)

这是相应的jsFiddle：http: [//jsfiddle.net/chrisJamesC/tNdJj/4/](http://jsfiddle.net/chrisJamesC/tNdJj/4/)

以下是相关代码：

```
var data = [-15, -20, -22, -18, 2, 6, -26, -18];

var margin = {top: 30, right: 10, bottom: 10, left: 30},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var y0 = Math.max(Math.abs(d3.min(data)), Math.abs(d3.max(data)));

var y = d3.scale.linear()
    .domain([-y0, y0])
    .range([height,0])
    .nice();

var x = d3.scale.ordinal()
    .domain(d3.range(data.length))
    .rangeRoundBands([0, width], .2);

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

svg.selectAll(".bar")
    .data(data)
  .enter().append("rect")
    .attr("class", function(d) { return d < 0 ? "bar negative" : "bar positive"; })
    .attr("y", function(d) { return y(Math.max(0, d)); })
    .attr("x", function(d, i) { return x(i); })
    .attr("height", function(d) { return Math.abs(y(d) - y(0)); })
    .attr("width", x.rangeBand());

svg.append("g")
    .attr("class", "x axis")
    .call(yAxis);

svg.append("g")
    .attr("class", "y axis")
  .append("line")
    .attr("y1", y(0))
    .attr("y2", y(0))
    .attr("x1", 0)
    .attr("x2", width); 
```

**注意：**对于像这样的简单可视化，我建议使用[nvd3.js](http://nvd3.org/examples/discreteBar.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-18T12:02:08.913

诀窍是演示代码过于乐观，假设它的输入是正数：

```
bar.append("rect")
    .attr("x", 1)
    // .attr("width", x(data[0].dx) - 1)   // Does the wrong thing for negative buckets.
    .attr("width", x(data[0].x  + data[0].dx) - 1)
    .attr("height", function(d) { return height - y(d.y); }); 
```

[http://jsfiddle.net/tNdJj/46/](http://jsfiddle.net/tNdJj/46/)

# magento - 如何更改购物车页面上“运输和处理”行的 HTML

> ID：15388484
> 
> 赞同：0
> 
> 时间：2013-03-13T14:44:51.280
> 
> 标签：magento, magento-1.5

在我的 magento 商店的购物车页面中，有一个用于运输和处理的行项目。我正在尝试更改此行的 HTML 输出。我已经想出如何更改实际文本 "Shipping & handling - Method" ，但我想更改实际的 HTML 输出。我查看了我所有的主题文件，但不知道在哪里可以访问它。我只需要为该行添加一个 CSS 类，以便我可以设置它的样式。有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:18:46.980

如果您不是开发人员，一个更简单的解决方案是更新翻译文件中该行文本的翻译，`/app/locale/en_US/Mage_Checkout.csv`如果它还没有，只需在末尾添加一行。第一部分是文本当前的内容，第二部分是您希望它阅读的内容。

轻轻一点，它会影响您网站上任何地方的那一行文本。

如果您只需要设置一些文本的样式，请添加该部分的 html，我可以帮助您使用选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T08:45:30.480

您要查找的文件是 app/code/core/Mage/Sales/Model/Quote/Address/Total/Shipping.php 您将

```
 $title = Mage::helper('sales')->__('Shipping & Handling'); 
```

在 fetch(Mage_Sales_Model_Quote_Address $address) 函数下和第 20 行左右。您可以在那里更改，但不建议编辑 magento 核心文件。所以你有两个解决方案

1.  将 Shipping.php 文件复制到本地代码池并在那里编辑
2.  [这是通过扩展 Mage_Sales_Model_Quote_Address_Total_Shipping 类创建您自己的模块以覆盖 Shipping.php 文件的最佳方法，您可以在 steve perrys 的博客](http://www.steveperrycreative.com/how-to-change-the-magento-shipping-handling-output/)中找到创建模块的教程

# jquery - Paypal Cordova 插件 - IOS - Phonegap - '错误：请确保已输入所有字段；

> ID：15388485
> 
> 赞同：1
> 
> 时间：2013-03-13T14:44:56.593
> 
> 标签：jquery, html, cordova, paypal, phonegap-plugins

有没有人成功地将 Paypal Cordova 插件 ( [https://github.com/shazron/PayPalPlugin](https://github.com/shazron/PayPalPlugin) ) 集成到 IOS Phonegap 应用程序中？

我已遵循所有说明，并且在沙盒模式下一切正常 - 但是当我将环境设置为“实时”时，我收到错误“请确保已输入所有字段”，我注意到即使您输入了错误的 ID，也会发生这种情况/密码组合。

控制台中没有错误 - 真令人沮丧 - 我找不到任何有用的信息来提供帮助。

任何提示都会非常受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T20:31:58.487

[在https://github.com/SnareChops/PayPalPlugin](https://github.com/SnareChops/PayPalPlugin)查看插件。这已使用 PayPal 的最新 SDK 完全重写和测试。这是对您最初尝试的旧存储库的重大重写和修复，在新的管理下已经修复并重新发布。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:07:17.493

我也遇到了实时模式的问题。我用 MPL 库分叉并更新了插件，因为最初的库是问题所在。你可以在这里找到代码：[https ://github.com/searchtool/PayPalPlugin](https://github.com/searchtool/PayPalPlugin)

也许它并不完美，我不是 Objective C 开发人员，但它对我们有用，该应用程序在 AppStore 上。希望它有所帮助，而且还为时不晚。

# javascript - 即使使用 erlang，使用 couchDB 的过滤器也非常慢

> ID：15388488
> 
> 赞同：12
> 
> 时间：2013-03-13T14:45:02.563
> 
> 标签：javascript, view, filter, erlang, couchdb

我有一个数据库（couchDB），里面有大约 90k 个文档。文件非常简单，如下所示：

```
{
   "_id": "1894496e-1c9e-4b40-9ba6-65ffeaca2ccf",
   "_rev": "1-2d978d19-3651-4af9-a8d5-b70759655e6a",
   "productName": "Cola"
} 
```

现在我想有一天将这个数据库与移动设备同步。显然 90k 文档不应该一次全部转到电话上。这就是我编写过滤器函数的原因。这些应该按“productName”过滤。起初在 Javascript 中，后来在 Erlang 中获得性能。这些过滤器函数在 JavaScript 中如下所示：

```
{
   "_id": "_design/local_filters",
   "_rev": "11-57abe842a82c9835d63597be2b05117d",
   "filters": {
       "by_fanta": "function(doc, req){ if(doc.productName == 'Fanta'){ return doc;}}",
       "by_wasser": "function(doc, req){if(doc.productName == 'Wasser'){ return doc;}}",
       "by_sprite": "function(doc, req){if(doc.productName == 'Sprite'){ return doc;}}"
   }
} 
```

在 Erlang 中就像这样：

```
{
   "_id": "_design/erlang_filter",
   "_rev": "74-f537ec4b6508cee1995baacfddffa6d4",
   "language": "erlang",
   "filters": {
       "by_fanta": "fun({Doc}, {Req}) ->  case proplists:get_value(<<\"productName\">>, Doc) of <<\"Fanta\">> -> true; _ -> false end end.",
       "by_wasser": "fun({Doc}, {Req}) ->  case proplists:get_value(<<\"productName\">>, Doc) of <<\"Wasser\">> -> true; _ -> false end end.",
       "by_sprite": "fun({Doc}, {Req}) ->  case proplists:get_value(<<\"productName\">>, Doc) of <<\"Sprite\">> -> true; _ -> false end end."       
   }
} 
```

为简单起见，目前还没有查询，只有一个“硬编码”字符串。过滤器一切正常。问题是它们的速度很慢。我先用 Java 编写了一个测试程序，后来又用 Perl 编写了一个测试程序来测试过滤文档所需的时间。这是我的 Perl 脚本之一：

```
$dt = DBIx::Class::TimeStamp->get_timestamp();

$content = get("http://127.0.0.1:5984/mobile_product_test/_changes?filter=local_filters/by_sprite");

$dy = DBIx::Class::TimeStamp->get_timestamp() - $dt;
$dm = $dy->minutes();
$dz = $dy->seconds();

@contArr = split("\n", $content);

$arraysz = @contArr;
$arraysz = $arraysz - 3;

$\="\n";
print($dm.':'.$dz.' with '.$arraysz.' Elements (JavaScript)'); 
```

现在是可悲的部分。这些是我得到的时间：

```
2:35 with 2 Elements (Erlang)
2:40 with 10000 Elements (Erlang)
2:38 with 30000 Elements (Erlang)
2:31 with 2 Elements (JavaScript)
2:40 with 10000 Elements (JavaScript)
2:51 with 30000 Elements (JavaScript) 
```

顺便说一句，这些是分钟：秒。该数字是过滤器返回的元素数，数据库中有 90k 个元素。最大的惊喜是 Erlang 过滤器一点也不快。

请求所有元素只需要 9 秒。并创建大约 15 个视图。但我无法在手机上使用来传输所有文档（出于数量和安全原因）。

有没有办法过滤视图以提高性能？或者我的 erlang 过滤器函数有问题（我对 JavaScript 过滤器的时代并不感到惊讶）。

编辑：正如 pgras 所指出的那样，这很慢的原因发布在[这个](https://stackoverflow.com/questions/13195302/couchdb-filtered-replication-can-the-speed-be-improved?rq=1)问题的答案中。为了让 erlang 过滤器运行得更快，我需要在下面添加一个“层”并将 erlang 直接编程到数据库中，而不是作为 _design 文档。但我真的不知道从哪里开始以及如何做到这一点。任何提示都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-27T17:24:03.147

自从我问这个问题以来已经有一段时间了。但我想我会回到它并分享我们最终为解决这个问题所做的事情。

所以简短的回答是过滤速度不能真正提高。

原因在于过滤器的工作方式。如果您检查数据库更改。他们在这里：

```
http://<ip>:<port>/<databaseName>/_changes 
```

本文档包含属于您的数据库的所有更改。如果您在数据库中执行任何操作，则会添加新行。当人们现在想要使用过滤器时，过滤器会从 json 解析为指定的语言，并用于此文件中的每一行。要清楚，据我所知，解析也是针对每一行完成的。这不是很有效，无法更改。

所以我个人认为对于大多数用例来说，过滤器会变慢并且无法使用。这意味着我们必须找到解决方法。我并不是说我有一个通用的解决方案。我只能说，对我们来说，可以使用视图而不是过滤器。视图在内部生成树，与过滤器相比，速度与光一样快。一个简单的过滤器也存储在设计文档中，看起来像这样：

```
{
"_id": "_design/all",
"language": "javascript",
"views": {
    "fantaView": {
        "map": "function(doc) { \n   if (doc.productName == 'Fanta')  \n    emit(doc.locale, doc)\n} "
    }
}
} 
```

其中 fantaView 是视图的名称。我想这个功能是不言自明的。所以这就是我们所做的，如果他遇到类似的问题，我希望它对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:36:36.930

我可能错了，但过滤器函数应该返回布尔值，所以尝试将一个更改为：

```
function(doc, req){ return doc.productName === 'Fanta';} 
```

~~它可能会解决您的性能问题...~~

**编辑：**

[这](https://stackoverflow.com/questions/13195302/couchdb-filtered-replication-can-the-speed-be-improved?rq=1)是关于为什么它很慢的解释（至少在 JavaScript 中）......

一种解决方案是使用视图来*选择*要同步的文档的 ID，然后通过指定要同步的 doc_ids 来开始同步。

例如，视图将是：

```
function(doc){
  emit(doc.productName, doc._id)
} 
```

您可以使用 _design/docs/_view/by_producName?key="Fanta" 调用视图

然后使用找到的文档 ID 开始复制...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-21T10:01:41.440

一般来说，couchDB 过滤器很慢。其他人已经解释了为什么他们很慢。我发现使用过滤器的唯一合理方法是使用“since”。否则在一个相当大的数据库中（我的有 47k 文档，它们是复杂的文档）过滤器不起作用。我们通过从 dev 迁移到 prod [从几百个文档到大约 47k 个文档] 来艰难地学到了这一点。我们还将设计更改为查询视图，因为我们需要类似行为的连续提要，所以我们使用了 Spring 的 @Scheduled

# c# - 在不引用其类的情况下检查 C# 属性？

> ID：15388489
> 
> 赞同：0
> 
> 时间：2013-03-13T14:45:06.170
> 
> 标签：c#, oop

我有一个类'App'，它有一个'DeviceManager'类和一个存储为字段的Windows窗体'MainForm'的实例。MainForm 通过单击系统托盘图标可见。DeviceManager 有 Docked 和 Undoked 方法，其中 Docked 启动同步操作。只有在 MainForm 不可见时，Docked 方法才应该开始操作。

DeviceManager 无权访问 App 的成员，因此它不能使用 App 对 MainForm 的引用来检查表单的状态。让 App 将自身传递到 DeviceManager 的构造函数中，当 DeviceManager 没有其他需要此类引用时（MainForm 和 DeviceManager 迄今为止彼此不知道），这似乎是很多耦合。

我现在正在考虑让 App.IsUserActive 属性的设置器引发一个事件，DeviceManager 可以使用该事件来维护自己的“IsUserActive”字段。

我还有其他方法可以研究吗？

编辑：添加代码来说明：

```
internal class App
{
    private DeviceManager _deviceMgr;
    private MainForm _mainForm;

    internal App()
    {
        _deviceMgr = new DeviceManager();
        _mainForm = new MainForm { Visible = false };
    }
}

internal class DeviceManager
{
    private void Docked()
    {
        if (!_mainForm.Visible) //can't see MainForm or App from here
        {
            Connect();
            StartSynchronization();  
        }
    }

    private void Undocked()
    {
        Disconnect();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:08:09.787

您可以使用的表格有一个全局参考。这是一个简单的例子：

```
//Inside of DeviceManager class
private bool CheckFormVisibility<TForm>() where TForm : Form
{
    TForm form = System.Windows.Forms.Application.OpenForms.OfType<TForm>().SingleOrDefault();
    return form != null && form.Visible;
} 
```

然后调用`CheckFormVisibility<MyForm>()`或删除泛型并专门用于您的`MyForm`.

**我在这里假设您将只有零/一个表单实例。

# c# - 使用函数填充属性的命名约定

> ID：15388490
> 
> 赞同：1
> 
> 时间：2013-03-13T14:45:10.370
> 
> 标签：c#, properties, naming-conventions

我正在尝试将代码分离/重构到文件夹中，并将我的所有“填充”属性移动到一个合乎逻辑的位置。

是否有使用函数填充属性的技术名称

例子：

```
public class AccountsView
{
    public string Email { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

这将放在它自己的类中..现在它在上面的类中

```
public static AccountsView FillCustomerView(Account data)
{
    view.Email = data.Email;
    view.FirstName = data.FirstName;
    view.LastName = data.LastName;
    return view;
} 
```

这个“FillCustomerView()”函数会被调用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:32:39.010

此处描述的概念称为对象映射，在此示例中，它被实现为视图模型上的方法。

这种实现的缺点是它将视图模型与域模型耦合，这通常是不受欢迎的。为了避免这种情况，通常使用映射器对象——它们定义从一个模型到另一个模型的投影。

您可以使用一些已经存在的实现。最受欢迎的似乎是[Automapper](http://automapper.codeplex.com/)，但还有其他的。例如，优秀的[ServiceStack](https://github.com/ServiceStack/ServiceStack/wiki/Auto-mapping)框架也支持它。

# python - re.sub() 覆盖我的字符串

> ID：15388492
> 
> 赞同：0
> 
> 时间：2013-03-13T14:45:10.870
> 
> 标签：python, string, replace

我`re.sub()`在 Python 中遇到了一个奇怪的行为。

在一个字符串中，我想替换所有出现的情况，例如

```
- list 1
- list 2 
```

使用 HTML 代码，例如

```
<li>list 1</li>
<li>list 2</li> 
```

所以我用

```
text = re.sub('(- (?P<id>.))', '<li>\g<id></li>', text) 
```

它工作并返回

```
<li>l</li>ist 1
<li>l</li>ist 2 
```

然后我`+`在正则表达式中添加以匹配整个句子（即“list 1”、“list 2”）

```
text = re.sub('(- (?P<id>.+))', '<li>\g<id></li>', text) 
```

令人惊讶的是，它返回

```
</li>ist 1
</li>ist 2 
```

之后的文本`\g<id>`覆盖了字符串的左侧部分。

如果我尝试`<li>\g<id>foo`改为返回`foot 1`

你们是否已经面临这种行为？我在这里缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:09:53.370

`'\r'`您的输入文件在行尾有回车符 ( )。所以，第一行输入是这样的：

```
 - list 1\r\n 
```

由于`\r`将光标移动到当前行的开头，并`\n`移动到下一行的开头，您可以`print`看到该字符串而不会注意到。

替换后，您的行如下所示：

```
<li>list 1\r</li>\n 
```

这会导致`</li>`打印时出现在当前行的开头。

您有几个可能的解决方案：

*   剥离`\r`on 输入
*   `\r`从匹配的字符类中排除

第一个示例是使用`open(fname, 'rU')`.

第二个例子是`re.sub('(- (?P<id>[^\r\n]+))', '<li>\g<id></li>', text)`

# javascript - 获取新对象参数的 HTML 输入范围值

> ID：15388494
> 
> 赞同：0
> 
> 时间：2013-03-13T14:45:31.213
> 
> 标签：javascript, web-audio-api

我想动态获取一个 HTML 输入范围滑块值到 snareDrum 变量的**sliderVal**参数槽。

```
document.getElementById('slider').addEventListener('change', function() {
var sliderVal = document.getElementById("slider").value;

// Event handler code....I tried a bunch of different things

}); 

// Don't know how to get it to the sliderVal  argument.

var snareDrum = new audioApiKey("snareDrum","snare.mp3",false, sliderVal); 

// Abstracted Web Audio playback Block

var context = new webkitAudioContext();
 function audioApiKey(domNode,fileDirectory,loopOnOff,playBackSpeed) {
    this.domNode = domNode;
    this.fileDirectory = fileDirectory;
    this.playBackSpeed = playBackSpeed;
    var bufferFunctionName = bufferFunctionName;
    var incomingBuffer;
    var savedBuffer;
    var xhr;

       bufferFunctionName = function () {          
       var source = context.createBufferSource();
       source.buffer = savedBuffer;
       source.loop = loopOnOff;
       source.playbackRate.value = playBackSpeed;
       source.connect(context.destination);
       source.noteOn(0); // Play sound immediately
       };
    var xhr = new XMLHttpRequest();
    xhr.open('get',fileDirectory, true);
    xhr.responseType = 'arraybuffer';
    xhr.onload = function () {
    context.decodeAudioData(xhr.response,
       function(incomingBuffer) {
       savedBuffer = incomingBuffer;
       var note = document.getElementById(domNode);
       note.addEventListener("click", bufferFunctionName , false);
         }
      );
   };
 xhr.send();
 }; 
```

下面是工作代码，但它是通过修改**audioApiKey**和**bufferFunctionName来完成的**

```
var snareDrumPitchSlider = document.getElementById("snareDrumPitchSlider");
var snareDrum = new audioApiKey("snareDrum","snare.mp3",false,"snareDrumPitchSlider");

// Abstracted Web Audio playback Block

var context = new webkitAudioContext();

 function audioApiKey(domNode,fileDirectory,loopOnOff,pitchSlider) {
    this.domNode = domNode;
    this.fileDirectory = fileDirectory;
    this.pitchSlider = pitchSlider;
    var bufferFunctionName = bufferFunctionName;
    var incomingBuffer;
    var savedBuffer;
    var xhr;

       bufferFunctionName = function () {          
       var source = context.createBufferSource();
       source.buffer = savedBuffer;
       source.loop = loopOnOff;
       var speed = document.getElementById(pitchSlider).value; // Added
       source.playbackRate.value = speed;
       source.connect(context.destination);
       source.noteOn(0); // Play sound immediately

       };

    var xhr = new XMLHttpRequest();
    xhr.open('get',fileDirectory, true);
    xhr.responseType = 'arraybuffer';
    xhr.onload = function () {
    context.decodeAudioData(xhr.response,
       function(incomingBuffer) {
       savedBuffer = incomingBuffer;
       var note = document.getElementById(domNode);
       note.addEventListener("click", bufferFunctionName , false);

         }

      );
   };
 xhr.send();
 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:23:41.643

从外观上看，这是一个范围问题。尝试将 sliderVal 的声明移到侦听器之外，如下所示：

```
var sliderVal; //feel free to set it to a default
document.getElementById('slider').addEventListener('change', function() {
    sliderVal = document.getElementById("slider").value;
    // Event handler code....
}); 

// sliderVal should now be accessible
var snareDrum = new audioApiKey("snareDrum","snare.mp3",false, sliderVal); 
```

# javascript - Chrome 中的 toLocaleString() 格式已更改

> ID：15388495
> 
> 赞同：2
> 
> 时间：2013-03-13T14:45:31.353
> 
> 标签：javascript, google-chrome

`new Date().toLocaleString()`在 Chrome 中现在返回：2013 年 3 月 13 日上午 9:25:28

它曾经返回：Tue Oct 30 2012 23:59:59 GMT-0500 (Central Daylight Time)

为什么/何时改变？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:57:57.123

该字符串取决于语言环境，您最近升级了浏览器吗？这可能就是原因。

检查调试中的 (window.)navigator 语言参数，例如 navigator.language 以确定您的浏览器的语言是否与您预期的有所不同。

您可能希望挑选出 Date 对象的一部分并构造您自己的字符串（最好在某些标准之后）来避免用户发生此类事件。

# regex - 以“x”开头但不是“x98”的字符串的正则表达式

> ID：15388496
> 
> 赞同：1
> 
> 时间：2013-03-13T14:45:32.483
> 
> 标签：regex

我正在尝试为一个字符串编写一个正则表达式 -

1.  以“x”开头。
2.  在'x'之后，它没有'98'

我写了以下正则表达式，但它不起作用

```
^x[0-8]|^x9[0-7]|^x99.*$ 
```

有人可以指出其中有什么问题吗？或者对于这种情况，什么是更好的正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:48:54.857

应该是这样的：

```
^x(?!98).* //(?!pattern) is a negative lookahead 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:48:29.710

您可以使用负前瞻：

```
^x(?!98)\d{2}.*$ 
```

这将匹配一个字符串

*   `^x`- 以。。开始`x`
*   `\d{2}`– 后跟两位数字（我从您的正则表达式中猜到了这一点；您的描述没有提到这一点）
*   `(?!98)`–*不是*98
*   `.*$`– 并任意延伸到字符串的结尾

（我不确定最后一个要求是什么；我可能会选择`^x(?!98)\d{2}`.）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:50:57.407

这可能适用于您的情况：

```
^x(?!98) 
```

# c - 使用 Swig 将字符串列表从 C 函数发送到 TCL procs

> ID：15388498
> 
> 赞同：0
> 
> 时间：2013-03-13T14:45:35.270
> 
> 标签：c, list, return, tcl, swig

我需要有关将字符串列表从 C 函数发送到 TCL 调用函数的指导。在 swig 的帮助下，我能够将整数、浮点值列表从 C 函数发送回 TCL 过程以及函数返回值。但是我无法将诸如“test1”、“test2”之类的字符串列表从 swig 连同返回值一起发送回 TCL procs。任何对此的指导/指针都会很棒。

那个正在工作的代码是这样的

```
int addsub (int a, int b, int *result1, int *result2) {
  *result1 = a + b;
  *result2 = a - b;
  printf("\n The value is: %i, %i  \n",*result1, *result2);
  return 8;
} 
```

Swig 界面看起来像

```
%apply int *OUTPUT {int *result1, int *result2}; 
```

TCL Calling 就像

```
tclsh
% Addsub 10 5

8 15 5. 
```

它将结果输出作为列表

但是当我尝试在字符串中做类似的事情时，TCL 中的返回列表只返回字符串中的第一个字符

代码不工作

```
int test_str (char *out1, char *out2) {
  char *str1, *str2;
  str1 = "Test1";
  str2 = "Test2";
  strcpy (out1,str1);
  strcpy (out2,str2);
  printf ("Out 1 is %s\n", out1);
  printf ("Out 2 is %s\n", out2);
  return 100;
} 
```

Swig 接口文件看起来像

```
%apply int *OUTPUT {char *out1, char *out2}; 
```

TCL Calling 就像

```
Tclsh

% Teststr

Out 1 is est2
Out 2 is Test2
100 101 84 
```

它没有给出整个字符串。给出字符串中第一个字母的 ASCII 值。

或者如果我的 C 函数是这样的

```
int test_str (char *out1, char *out2) {
  char *str1,*str2;
  str1 ="Test1";
  str2 = "Test2";
  out1=str1;
  out2=str2;
  //strcpy (out1,str1);
  //strcpy (out2,str2);
  printf ("String 1 is %s\n", str1);
  printf ("String 2 is %s\n", str2);
  printf ("Out 1 is %s\n", out1);
  printf ("Out 2 is %s\n", out2);
  return 100;
} 
```

Swig 接口文件看起来像

```
%apply int *OUTPUT {char *out1, char *out2}; 
```

tclsh

```
% test_str

String 1 is Test1
String 2 is Test2
Out 1 is Test1
Out 2 is Test2
100 0 -127 
```

有人可以指出这里缺少什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:50:19.433

这是一个非常棘手的案例。SWIG 在处理`char *`用于输出的变量时存在特殊问题；它缺少太多信息，无法自动计算出它需要做的所有事情。（我认为它最终默认将它们视为长度为 1 的字符数组，这不是很有帮助。）

您需要指定一个[`argout`类型映射](http://www.swig.org/Doc1.3/SWIGDocumentation.html#Typemaps_nn32)（和一个辅助`in`类型映射）来解决此问题：

```
// Allocate a (short) working buffer for the string; this is the part that
// SWIG *cannot* guess for you.
%typemap(in, numinputs=0) char *OUTPUT (char temp[50]) {
    $1 = &temp;
}
// Actually how to do the mapping of strings from a local buffer into Tcl values
%typemap(tcl,argout) char * {
    $result = Tcl_NewStringObj($1, -1);
} 
```

然后，您必须`%apply`实际获得正确值的缓冲区分配。（请注意，使用此类事情正确管理缓冲区非常棘手，并且您正在使用的函数签名不是做好它的好人选。）

* * *

您的最后一个示例根本行不通；您没有通过任何机制返回值（由于 C 字符串的工作方式；您只是在函数内部设置内容，而不是告诉调用者）。除非您这样做，否则*实际上*不会复制字符串`strcpy`……</p>

# pic - Microchip PIC 编程建议

> ID：15388503
> 
> 赞同：0
> 
> 时间：2013-03-13T14:45:42.197
> 
> 标签：pic, microchip

我需要一些建议，我有一堆用于家庭自动化的小板，我不断地做出改变，不得不重新刷到板上。我在我所有的板上都添加了 ICSP 头，因此很容易刷新它们。

这是我的问题，我是一个巨大的小工具怪胎，想要构建一个按钮编程器，我可以加载一个 hex 文件并转到我的不同设备并刷新它们。就代码而言，我只需要朝着正确的方向轻推，比如说一些例子或其他东西。我知道有 pickit3 和 3rd 方工具可以解决这个问题，但这并不能帮助我学习大声笑。

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T22:15:51.760

在我看来，最好的方法是 Pickit3，但如果你想学习......请参考我对硬件接口的建议：

1）网上有很多通过串口（RS232）烧写icsp的设计，找一个你喜欢的，下一步修改。举个[例子](http://www.instructables.com/id/Understanding-ICSP-for-PIC-Microcontrollers/)。

2）取决于您要加载的 HEX 文件有多大，在市场上寻找一些具有足够大的 EEPROM 和两个 UART 的 PIC（Microchip 有 1024 或更多的廉价 PIC，带有两个 UART，如 PIC18F25K80）。将 uart1 连接到计算机的串行端口，将 UART2 连接到 1) 的电路。

3）在电路中添加一个电池电源（例如，使用四节 AA 电池获得超过 5V，如果您的 Mcus 允许使用较低电压进行编程，则对其进行调整，可能需要添加稳压器 LM7805 或类似产品）

4) 将开关添加到 PIC 的空闲 i/o 引脚之一以生成 INT_X 中断，以激活 icsp 编程读取 EEPROM 并通过 UART2 发送。（PIC Rutine 必须被编程）

5) 你需要编程或寻找一个规则来从 PC 发送文件到 PIC_EEPROM (INT_RDA)。（必须定义 PC rutine 和 PIC rutine）

可能是如果您将二进制数据从 PC 复制到 EEPROM（听 MPLAB IPE Microchip 应用程序或类似应用程序），然后以相同的方式将这些数据直接加载到 ICSP 电路中，但我怀疑这不太可能，另一方面您必须将 HEX 文件加载到 EEPROM 中，并根据制造商的规范将 ICSP“协议”实施到 PIC-EEPROM 中（这可能是一项巨大的工作），例如对于 Microchip PIC24，ICSP 实施的说明在第 3.0 节[数据表](http://ww1.microchip.com/downloads/en/DeviceDoc/39970c.pdf)中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:42:00.100

您是否尝试过引导加载程序？Microchip 有一堆与 TCP/IP、USB、UART 配合使用的引导加载程序……如果您采用 TCP/IP 方式，您可以按下键盘上的一个按钮，它可以即时更新。

# windows-phone-7 - WP7/8 中的动态程序集加载

> ID：15388509
> 
> 赞同：1
> 
> 时间：2013-03-13T14:45:52.717
> 
> 标签：windows-phone-7

我希望我的移动应用程序自行更新，是否可以在 Windows Phone 应用程序中动态加载 dll？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:31:41.107

这是不可能的。您可以加载的唯一程序集是系统程序集和包含在 XAP 中的程序集。正是为了避免您所描述的情况（如果应用程序可以绕过它，那么进行市场认证过程将毫无意义）。

# iphone - 添加应用程序包

> ID：15388514
> 
> 赞同：1
> 
> 时间：2013-03-13T14:46:00.317
> 
> 标签：iphone, ios, xcode

如何创建一个新包作为我的应用程序的附加组件。例如。我有一个带有一些图像的照片应用程序。我需要在我的应用程序中添加更多图像。如何创建另一个将在我的应用程序中安装图像的应用程序包。我知道我将不得不发布一个新版本，但对于未来，添加更多图像将非常容易。这样我可以创建多个包，用户可以下载他们喜欢的包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:48:50.307

更新您的应用程序，增加版本号并将其作为更新发布。

如果您想以金钱出售更新“包”，您应该研究[应用内购买](https://developer.apple.com/in-app-purchase/)模式。

在处理图像时，最好从服务器下载图像并将它们存储在应用程序沙箱内的目录中。然后从那里加载图像以供本地使用。

# css - 我应该在 jquery mobile 上使用 normalize.css 吗？

> ID：15388515
> 
> 赞同：5
> 
> 时间：2013-03-13T14:46:00.513
> 
> 标签：css, jquery-mobile

将 normalize.css 与 jquery-mobile 的默认主题/css 文件一起使用有什么危害/缺点吗？

我项目中的开发人员出于习惯包含该文件，但我认为 jquery-mobile 已经使用其默认样式完成了 normalize.css 的含义（使浏览器呈现一致）

声明是否将是多余的，只是增加了页面的权重。

如果将 normalize.css 与 jquery-mobile 样式一起使用有一定的意义，我应该首先包含 normalize 还是 jquery-mobile？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T19:49:13.833

你好文森特这是一个很好的问题（+1）我有同样的问题。我会告诉你，在查看 jQuery mobile 的 css 之后，我发现它不包含 reset.css 或 normalize.css ，如果你包含这些文件，在 jquery mobile css 之前，它将有助于确保你的项目看起来在所有设备上都一样，

然而，由于 jQuery mobile 是针对移动设备的，考虑到这些设备没有 unqiue 和专有的默认用户代理样式并遵循相当相似的默认样式表（因为它们都是在必须使用这些设计方法时构建的，并且默认 css 已被证明会造成浏览器不兼容问题）因此不包含 normalize.css 文件并不会真正产生太大影响，但是如果您比较两者的像素完美度，它将做出某些改变。

我自己已经决定在我的项目中不使用这些文件，并编写一个非常自定义的规范化 css，特别是与字体大小有关。

如果您想拥有一个像素完美的网站，我认为您应该使用 reset.css 而不是 normalize.css 之类的方法，因为 jquery mobile 会设置所需的所有样式，因此一切看起来都应该像他们应该的那样，并且极少数例外都会在所有设备中都相同，因为它们已由您手动重置，reset.css 的优点是我相信它的尺寸更小，但是如果您使用通配符将其应用于所有内容，渲染可能会很昂贵`* { /*code*/ }`。

请记住，如果您对 jQM UI 进行了大量自定义，那么您将需要彻底测试它或必须使用 normalize.css

# ember.js - Ember JS：观察对象后代的变化

> ID：15388516
> 
> 赞同：1
> 
> 时间：2013-03-13T14:46:04.970
> 
> 标签：ember.js, ember-data

我有一个引用另一个对象的对象“观察者”：“爸爸”。每次“爸爸”发生变化时，都应该通知“观察者”。

它在爸爸的孩子被改变时有效，但在爸爸的孙子被改变时不起作用。在后一种情况下，我无法让观察者触发。我猜嵌套@each 可能是错误的，但我不知道该怎么做。

当爸爸或其后代中的某些内容被修改时，有没有办法简单地向观察者发送通用通知？

```
App.Dad = DS.Model.extend({
    sons: DS.hasMany('App.Son'),
    name: null
})

App.Son = DS.Model.extend({
    dad: DS.belongsTo('App.Dad'),
    sons: DS.hasMany('App.GrandSon'),
    name: null
})

App.GrandSon = DS.Model.extend({
    dad: DS.belongsTo('App.Son'),
    name: null
})

App.Watcher = Ember.Object.extend({
    dad: null, // will be set later
    dadChanged: function(){
        // Fires if a son is changed, but not
        // if a grand son is changed
    }.observes('dad.sons.@each.name','dad.sons.@each.sons.@each.name')
}) 
```

参见说明这一点的 jsFiddle：http: [//jsfiddle.net/4kUzr/1/](http://jsfiddle.net/4kUzr/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:41:24.343

您没有详细概述您的用例，但从对象建模的角度来看，我怀疑以这种方式工作：

```
App.Person = DS.Model.extend({
    dad: DS.belongsTo('App.Person'),
    sons: DS.hasMany('App.Person'),
    name: null,
    nameObserver : function(){
       var dad = this.get("dad");
       // do some logic
       // hand it afterwards to the dad of this person
       if(dad)
         dad.nameObserver()
    }.observes("name")
}); 
```

所以只有**1 个类而不是多个类，我建立了父子关系**。

# ruby-on-rails - 将 ActiveRecord::Relation 作为 json 返回到 rails 中的 ajax 调用

> ID：15388520
> 
> 赞同：0
> 
> 时间：2013-03-13T14:46:28.830
> 
> 标签：ruby-on-rails, ajax, json, activerecord

我的问题可能有一个简单的解决方案，但密集的谷歌搜索却一无所获。

我有一个ajax调用：

```
$.get(path,{ section_id: "a", field_id: "b"})
 .done(function(data) {alert(data);})
 .fail(function() { alert("error"); }); 
```

这个 ajax 调用转到指定的控制器并执行一个查询，返回一个 ActiveRecord::Relation 对象。到现在为止还挺好。现在，我想做的是将此 ActiveRecord::Relation 对象作为 json 返回给 done 函数。我怎样才能做到这一点？感谢所有帮助者！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:54:49.310

我假设您想从关系中返回一个对象，而不是活动记录类。在您的控制器中，您应该以适当的格式呈现您的对象，例如：

```
respond_to do |format|
    format.json { render json: @your_object}
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-15T14:03:57.470

如果要返回 ActiveRecord::Relation 对象中使用的条件哈希，可以这样做：

@relation.where_values_hash.to_json

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:07:39.480

做这样的事情

```
@post = Post.where(id: params[:id])
# @post at the moment is an AR::Relation
render json: @post, status: :ok 
```

实际上只会返回序列化为 JSON 的记录。实际上，您可以通过执行以下操作在 rails 控制台中对此进行测试：

```
@record = YourModel.where(some_condition: some_parameter)
@record.class #=> ActiveRecord::Relation
@json_record = @record.to_json
@json_record.class #=> String
# @json_record will be the JSON representation of whatever the Relation fetched for you. 
```

# android - 如何从xml在android tabwidget中设置标签高度？

> ID：15388523
> 
> 赞同：1
> 
> 时间：2013-03-13T14:46:40.300
> 
> 标签：android

我尝试了解决方案：

```
mTabHost.getTabWidget().getChildAt(i).setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,100)); 
```

但我想在 XML 中做到这一点。

这是我的布局：

```
<android.support.v4.app.FragmentTabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginRight="10dp" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                style="@style/tab"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="0"
                android:orientation="horizontal"
                android:textColor="@drawable/tab_text_selector" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_weight="0" />

            <FrameLayout
                android:id="@+android:id/realtabcontent"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1" />
        </LinearLayout>
    </android.support.v4.app.FragmentTabHost> 
```

我试图设置 TabWidget 的高度但没有结果。

我为单个选项卡使用自定义视图：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <ImageView android:id="@+id/img_tab"
        android:layout_height="30dp"
        android:layout_width="30dp"
        android:scaleType="centerCrop"
        android:layout_alignParentLeft="true"
        android:layout_margin="5dp"
    />

    <TextView
        android:id="@+id/txv_tab"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textSize="22sp"
        android:textAllCaps="true"
        android:textIsSelectable="false"
        android:layout_toRightOf="@+id/img_tab"
        android:layout_margin="5dp">
    </TextView>

    <View android:id="@+id/tab_border" 
        android:layout_width="match_parent"
        android:layout_height="5dp"
        android:layout_alignParentBottom="true"
        android:background="@android:color/holo_green_light"
        />

</RelativeLayout> 
```

我试图设置相对布局高度，但每次我得到全屏高度标签时。

如何设置高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-24T22:12:37.750

我认为不可能从 xml 在 android tabwidget 中设置标签高度。我从来没有找到办法做到这一点。为了避免效果不好的问题，我创建了一个非常简单的类，如下所示：

```
public class TipoDisp 
{ 

  public static int alt_tabs(Context cont)
  {
    int alt;
    int dx, dy;
    DisplayMetrics metrics = cont.getResources().getDisplayMetrics();

    dx = metrics.widthPixels;
    dy = metrics.heightPixels;
    if (dx < dy)
        alt = dy/15;
    else
        alt = dy/10;

    return alt;
   }
} 
```

然后，在活动中我使用这样的东西：

```
 int alt = TipoDisp.alt_tabs(myactivity.this);
    mTabHost.getTabWidget().getChildAt(i).getLayoutParams().height = alt;
    ..... 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T20:27:11.597

比方说，我们想设置第一个选项卡的高度，那么你要做的是：

```
 mTabHost.getTabWidget().getChildAt(0).getLayoutParams().height=100; 
```

mTabHost= 这是我自己的标签主机。将您的标签主机名称放在那里，我将高度设置为 100dp。现在您根据您的要求进行更改。谢谢

# ember.js - Ember 数组数据

> ID：15388524
> 
> 赞同：2
> 
> 时间：2013-03-13T14:46:43.947
> 
> 标签：ember.js, ember-data

在 Ember 数据模型中使用数组的正确方法是什么？Tom Dale 指出 ember 在此[评论](https://github.com/emberjs/data/issues/53#issuecomment-10788301)中“嵌入了 hasOne 关系” ，但我无法找到任何实际的文档或示例。

例如，我有一个`Category`像这样的数据模型，它有一个名为`conditionValues`

```
App.Category = DS.Model.extend({
  name: DS.attr('string'),
  conditionValues: //this is an array
}); 
```

我想用从我的服务器返回的数组填充这个属性，如下所示。`Each category has many condition values`. 怎么可能这样做呢？

```
[condition_values] => Array
    (
        [0] => Array
            (
                [DisplayName] => Brand New
            )

        [1] => Array
            (
                [DisplayName] => Like New
            )

        [2] => Array
            (
                [DisplayName] => Very Good
            )

        [3] => Array
            (
                [DisplayName] => Good
            )

        [4] => Array
            (
                [DisplayName] => Acceptable
            )

    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T16:51:05.347

### 2014 年 2 月 26 日更新

自 Ember Data 1.0 beta 及更高版本以来，此答案中的代码不再有效。

* * *

您可以通过两种方式处理它：

第一种方法是定义一个模型`App.ConditionValues`，然后定义一个关系：

```
App.Category = DS.Model.extend({
  //.. your attributes
  conditionValues: DS.hasMany('App.ConditionValues')
}); 
```

第二种方法是创建您自己的[自定义转换](http://emberjs.com/guides/models/the-rest-adapter/#toc_creating-custom-transformations)。

```
DS.RESTAdapter.registerTransform('array', {
  serialize: function(value) {
    if (Em.typeOf(value) === 'array') {
      return value;
    } else {
      return [];
    }
  },
  deserialize: function(value) {
    return value;
  }
}); 
```

然后在你的模型中：

```
App.Category = DS.Model.extend({
  //.. your attributes
  conditionValues: DS.attr('array')
}); 
```

# c# - OpenOffice uno.util.Bootstrap.bootstrap() 挂起并且不返回

> ID：15388526
> 
> 赞同：4
> 
> 时间：2013-03-13T14:46:46.643
> 
> 标签：c#, asp.net, openoffice.org, bootstrapping

视窗服务器 2003 - IIS 6.0

我有一个 Asp.Net 4.0 (C#) web 应用程序，它使用 OpenOffice 将 microsoft office 文档转换为 PDF，以便它们可以显示在 web 上。

一切正常。

然后我在 Web 服务器上将 OpenOffice 从 3.2.1 升级到 3.4.1，现在它不起作用。问题发生在引导调用上。

```
private static XComponentLoader LoadOO()
{ 
    XComponentContext OO = uno.util.Bootstrap.bootstrap(); // this will either start OOo or Find one that's running. (The code hangs here)
    XMultiServiceFactory oServMan = (XMultiServiceFactory)OO.getServiceManager(); // Get Service Manager
    XComponentLoader aLoader = (XComponentLoader)oServMan.createInstance("com.sun.star.frame.Desktop"); // Get a CompontLoader
    return aLoader;
} 
```

uno.util.Bootstrap.bootstrap(); 挂起并且不返回任何内容。

该调用确实会在网络服务用户名下启动 OpenOffice，但该调用永远不会返回。每次调用该方法时，它都会打开另一个 OpenOffice 实例，而不是附加到已经打开的实例。

我已经尝试再次降级到 3.2.1，但同样的事情发生了。

我尝试[了此处](http://www.codeproject.com/Questions/64686/OpenOFFICE-BOOTSTRAP-PROBLEM)概述的解决方案 3，但没有成功。

我尝试重新启动 IIS 并回收应用程序池以及与用户权限有关的各种事情。我无处可去，需要一些帮助。

我不是最初让这个在网络服务器上工作的人，所以不知道是否采取了任何特殊步骤。让它在我的开发机器上使用任一版本的 OpenOffice 都没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T14:44:10.537

我知道使用 LocalSystem 作为您的应用程序池标识将解决该问题。

我知道这并不理想，在您的情况下甚至可能是不允许的。因此，您还可以尝试修改 ASPNET 用户或自定义本地或域用户的本地策略。用户当然需要对 ooo 可执行文件夹的读取/执行权限，也许还需要临时权限。

在 Vista/Server 2008 及更高版本上，如果没有本地管理员或本地系统，我无法让它工作。我认为这与对 PROCESS_QUERY_INFORMATION 权限的更改有关，因为“.Bootstrap()”调用希望附加到您刚刚创建的 OO 进程。如果您运行较旧，可以尝试以下操作：

在本地策略/用户权限分配中运行 secpol.msc 或管理工具/本地安全策略：

*   找到“拒绝本地登录”和“拒绝通过终端登录”（如果存在，可能因 win 版本而异）
*   如果存在，则从此列表中删除 ASPNET 或 {your user} 用户。
*   然后找到“允许本地登录”并将您的用户添加到此列表中。

[http://support.microsoft.com/default.aspx?scid=kb;en-us;317012](http://support.microsoft.com/default.aspx?scid=kb;en-us;317012) [http://support.microsoft.com/kb/555134](http://support.microsoft.com/kb/555134)

应用程序池还必须启用 32 位，但我相信如果您已经达到了这一步，那么您已经拥有了该设置。

# c# - 内存泄漏风险的可能性 - 从 c# 中的字节数组获取 IntPtr

> ID：15388537
> 
> 赞同：4
> 
> 时间：2013-03-13T14:47:19.990
> 
> 标签：c#, pointers

我必须使用外部 DLL 将数据发送到设备。我在 DLL 中使用的方法将指向字节数组的指针作为参数。当我使用 C# 时，我使用 GCHandle.Alloc 方法来获取内存地址并将其分配给 IntPtr 实例。然后我将 IntPtr 作为参数传递。我担心代码中可能存在内存泄漏风险，因为我之前没有在 C# 中使用过指针和内存分配。该代码当前的工作方式如下所示：

```
GCHandle pinned = GCHandle.Alloc(byteArray, GCHAndleType.Pinned);
IntPtr arrayPtr = pinned.AddrOfPinnedObject();

var result = _externalDll.SendInfo(arrayPtr, byteArray.Length);   

pinned.Free(); 
```

这是分配和使用 IntPtr 的正确方法吗？它似乎有效，但由于这将在生产机器上每天同时运行大约 100 次，我宁愿避免任何重大问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:57:40.697

通常，您需要使用**GCHandle**的唯一时间是非托管代码将保留对您的指针的引用以供以后使用。

在这里，您似乎只是在传递指针，然后立即释放它。如果是这种情况，那么您根本不应该使用**GCHandle**。只需将您的第一个参数设为 byte[] 并直接传递 byteArray 即可。运行时将在调用期间负责固定数组对象，并将指向数组第一个元素的指针传递给非托管代码。

# php - Twitter API 的 Wordpress PHP 代理/帮助页面

> ID：15388539
> 
> 赞同：1
> 
> 时间：2013-03-13T14:47:30.817
> 
> 标签：php, jquery, wordpress, twitter

好的，我目前正在我的个人博客上做一些工作。

在主页上，我正在使用一些 jQuery 代码显示我最新的推文。

```
$.getJSON('https://api.twitter.com/1/statuses/user_timeline/killfall.json?count=1&callback=?', function(data) {
    tweet = data[0]['text'];
    tweet = tweet.replace(/([\w]+\:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i, "<a target=\"_blank\" href=\"$1\">$1</A>");
    $('#tweet-text').html("&ldquo;" + tweet + "&ldquo;");
}); 
```

这只是从 twitter 获取我的最新推文，将任何 URL 转换为锚标签，并将其放入 id 为 的 div 中`tweet-text`。

但是我觉得我可能应该使用 oauth 和更新版本的 twitter api，因为我不断收到一条错误消息说

```
"error":"Rate limit exceeded. Clients may not make more than 150 requests per hour." 
```

我相信使用誓言会解决这个问题。

我想知道的是如何最好地实现这一点。我想继续在 jQuery 中使用 ajax 来加载推文，以便在页面完成加载后加载它。

我的直觉让我觉得我应该有一些 JavaScript

```
var jqxhr = $.ajax( "<?php bloginfo('template_directory');?>/ajax/get_tweet.php" )
.done(function() { 
    tweet = tweet.replace(/([\w]+\:\/\/[\w-?&;#~=\.\/\@]+[\w\/])/i, "<a target=\"_blank\" href=\"$1\">$1</A>");
    $('#tweet-text').html("&ldquo;" + tweet + "&ldquo;");
 }) 
```

然后创建一个 php 文件，该文件将充当主题文件夹中名为 ajax 的目录中的代理/帮助程序，该目录`get_tweet.php`将执行 oauth 内容并仅回显 JavaScript 将使用的最新推文。

但我只是想知道将随机 php 文件放入这样的 wordpress 主题中是否是一种好习惯，或者是否有更好的方法？

# hibernate - 如何在hql中选择员工？

> ID：15388540
> 
> 赞同：0
> 
> 时间：2013-03-13T14:47:30.957
> 
> 标签：hibernate, hql

我有这样的场景：

在我的日程表中`Appointments`，其中包含不同的`Services`. 每个`Service`都与一个相关`Employee`，即提供它。

代码看起来像这样：

```
class Appointment extends BaseEntity{
    ...
    private List<Service> services;
    private Date start, end;
    ...
    // getter/setter
}

class Service extends BaseEntity{
    ...
    private Employee employee;
    ...
    // getter/setter
}

class Employee extends BaseEntity{
    ...
    private String id;
    ...
    // getter/setter
} 
```

我想编写一个查询，它选择`Employee`all 的 id，这些 id`Services`在`Appointments`指定的时间间隔（从 date1 到 date2）内提供。

我尝试了几件事，但我没有什么是正确的。我的主要问题是我不知道如何正确使用`List`in`Appointment`并将其与`Employee`id 连接起来。我试过这个，但它不起作用：

“从约会 a 中选择 e.id，服务 s 离开加入 s.employee e where s in elements(a.services) and s.start <= date1 and s.end >= date2”；

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:01:28.640

尝试以下操作：

```
SELECT e.id 
FROM Appointment a 
INNER JOIN a.services s 
INNER JOIN s.employee e 
where s.start <= ? and s.end >= ? 
```

# c++ - 这个初始化列表是什么意思？

> ID：15388542
> 
> 赞同：2
> 
> 时间：2013-03-13T14:47:33.533
> 
> 标签：c++

```
// Use multiple inheritance. We want 
// both a string and an Object:
class MyString: public string, public Object {
public:
  ~MyString() {
    cout << "deleting string: " << *this << endl;
  }
  MyString(string s) : string(s) {}
}; 
```

对于上面的代码，我不明白是什么`string(s)`意思？实际上没有调用变量`string`，但为什么它可以工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:50:50.763

通常，在构造派生类时，会调用默认的基构造函数（如果存在）。如果您想为某个派生构造函数显式调用不同的基构造函数，您可以使用初始化列表来执行此操作。

在这种情况下，在构造 时`MyString`，`string`将 a`string`作为其唯一参数的 -constructor（复制构造函数）将被调用 with`s`作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:49:29.917

正在构造with的`string(s)`父类实例。`MyString``s`

请注意，`MyString`继承自`string`，这就是使用 of`string`所指的内容。

这被称为“初始化列表”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:49:39.363

它初始化类型的父子对象`string`。实际上，它指定为父级调用哪个父级构造函数`string`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T14:49:41.543

`MyString`源自`string`。您引用的语法`string(s)`将基类构造函数`s`作为唯一参数调用。

# ruby-on-rails - Validates numbers with regular expression

> ID：15388555
> 
> 赞同：0
> 
> 时间：2013-03-13T14:48:05.383
> 
> 标签：ruby-on-rails, regex, validation

I would like to validates format of a decimal, which need to be like : 0 or 0.5 or 1 or 1.5 ... Also, I must be able to accept "," or "." (for users of differents countries)

Could you help me please ? I'm not really good with regular expressions...

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:56:10.750

You can use this regex

```
 /^\d+([.,]\d+)?$/ 
```

`^` is start of the string

`$` is end of the string

`^`,`$` is essential else it would match anywhere in between..for example the above regex without ^,$ would also match `xyz344.66xyz`

`\d` matches a **single** digit

`+` is a **quantifier** that matches 1 to many **preceding** character or group..so \d+ means match 1 to many digits

`?` means match preceding character or group optionally that is 0 to 1 time

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:55:25.483

This regexp could help:

```
 ^\d+[,\.]?\d+$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T14:55:33.037

`/^\d+((\.|\,)\d)?$/`

Matches `12`, `12,0`, `12.0`. If you wanted to add many trailing digits, `/^\d+(\.|\,)?\d+$/`

# php - PHP 多表单字段搜索

> ID：15388556
> 
> 赞同：0
> 
> 时间：2013-03-13T14:48:09.457
> 
> 标签：php, mysql

通过阅读和搜索网络，我设法构建了一个 HTML 表单和 PHP 脚本，它将在我拥有的 MySQL 数据库上进行文本搜索。我可以让它从输入到表单中的 1 个字段的文本中成功搜索。我想知道如何扩展它，以便我可以给用户 2 个字段，他们可以在 1 个或两个字段中输入数据以优化他们的结果，即搜索所有名为“John”的条目，或所有名为“John”的条目 & in “都柏林”之城。我尝试了许多对 MySQL 查询的操作，但未能成功使其令人满意地工作。如何编写下面的代码以使其正常工作？

我的 HTML 表单代码是：

```
<form method="POST" action="search.php" name="formid">
   Name: <input type="text" name="query" /><br>
   City: <input type="text" name="city" /><br>
   <input type="submit" name="submit" value="Start Search" />
</form> 
```

＆PHP代码是：

```
<?php

include 'db_details.php';

$connection = mysql_connect($server, $user, $password);

mysql_select_db($db, $connection);

$query=mysql_real_escape_string($_POST['query']);

$query = htmlspecialchars($query);

$result=mysql_query("SELECT * FROM colour WHERE (firstname LIKE '%".$query."%') ", $connection) or die ("Cannot run query");

echo "<h2>Search Results</h2>";

while ($row = mysql_fetch_assoc($result))
{
    foreach ($row as $attribute)
    echo "{$attribute} ";
    echo "<br>";
}

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:51:43.713

只需将 city 字段的值放入变量中`$city`：

```
$city = mysql_real_escape_string($_POST['city']);

$city = htmlspecialchars($city); 
```

然后像这样查询它：

```
$result = mysql_query("SELECT * FROM colour WHERE (firstname LIKE '%".$query."%' OR city LIKE '%".$city."%') ", $connection) or die ("Cannot run query"); 
```

它将查询`colour`名字所在的地方`$query`或城市所在的所有结果`$city`

注意：这种方法没有优先级，匹配两个条件的颜色行的优先级不会高于只有 1 个匹配的行

对于更高级的搜索方法，我建议您也查看[全文](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)搜索

# macos - Excel：在具有多个结果的列中搜索数据

> ID：15388560
> 
> 赞同：0
> 
> 时间：2013-03-13T14:48:20.777
> 
> 标签：macos, excel, search

我有两个工作表，都有相同的“代码”列。工作表 1 有多行具有相同的代码，以及一个名为“状态”的列，可以是“已批准”或其他内容。

所以我想在工作表 1 中搜索工作表 2 中的代码，如果工作表 1 中有一行包含该代码并且状态为“已批准”，那么工作表 2 中的相应列将获得“是”。

我知道我可以通过使用宏来实现这一点，但我宁愿（如果可能）使用 Excel 内置函数。我尝试更改我在网上找到的一些 VBA 代码，但由于 Excel 2011（适用于 Mac OS X）中的某些功能不同，因此出现了许多错误，我想让它尽可能便携。

我很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:55:23.783

您可以通过`SumProduct`-

假设您的工作表如下所示：

表 1：

```
ColA     ColB
Code1    Approved
Code2    Declined
Code2    Approved
... 
```

表2：

```
ColA     ColB
Code1    =IF(SUMPRODUCT(--(Sheet1!$A$1:$A$27=Sheet2!A1),--(Sheet1!$B$1:$B$27="Approved"))>0,"Yes","No") 
```

当然，更改公式中的`$A$27`&`$B$27`引用以覆盖尽可能多的单元格`Sheet1`，但这应该会给你你想要的，而且它是跨平台的。

希望这能解决问题！

# dynamics-crm-2011 - 导入 CRM 4.0 组织后无法在 CRM 2011 中创建托管解决方案

> ID：15388563
> 
> 赞同：2
> 
> 时间：2013-03-13T14:48:26.210
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4

我正在将 CRM 4.0 组织升级到 CRM 2011 组织。我通过将 CRM 4.0 组织导入 CRM 2011 组织开始了这个过程。我现在似乎无法从我导入的内容中创建托管解决方案。它目前在默认/活动解决方案下都有我的自定义，我只能将它们导出为非托管解决方案。然后，当我导入此非托管解决方案时，它会再次将所有自定义项导入默认/活动解决方案。有没有办法从这些更改中创建托管解决方案？还是我唯一的选择是在新的非托管解决方案中手动重新创建所有自定义项并将导出作为托管解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-11T14:01:47.537

您似乎对默认解决方案感到困惑。您只能在非托管状态下导入/导出默认解决方案，因为它是对 CRM 组织进行的所有自定义的库，而不是包含您选择的特定更改的传统“解决方案”。

您可以完全控制哪些项目进入托管或非托管解决方案。只需设置一个解决方案，当您导出它时，选择将其导出为托管（只有默认解决方案不允许您这样做）。要清楚 - 您不必重新创建任何自定义，您只需在最终将成为非托管解决方案的解决方案中“添加现有”，然后在“添加现有”窗口中选择全部。

# mysql - MySql 插入和全选合二为一

> ID：15388564
> 
> 赞同：0
> 
> 时间：2013-03-13T14:48:25.870
> 
> 标签：mysql, select, insert

我想要做的是在表中插入一条记录，并在同一个查询中的 select 语句中返回主键。主键是自动增量，我想将此值发送到另一个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:50:52.363

您不能在一个查询中同时执行这两项操作。您可以做的是[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)在您的第二个查询中使用。

```
INSERT INTO tableA(rowA, rowB) VALUES('a', 'b');

SELECT * FROM tableB WHERE rowID = LAST_INSERT_ID(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:50:17.110

您可以创建一个函数，该函数在新数据行中插入并返回 Id 值，如下所示：

```
CREATE FUNCTION INSERTANDRETURN(Data to enter as parameters)
  RETURNS INT
  DETERMINISTIC
   BEGIN
    DECLARE id INT;
    -- Insert data
    SET id = last id according to Maxvalue or last inserted data
    RETURN id;
   END 
```

有关过程和功能的进一步阅读，请参阅[文档](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

# ruby - 如何编写自定义 Datamapper 适配器？

> ID：15388571
> 
> 赞同：3
> 
> 时间：2013-03-13T14:48:44.897
> 
> 标签：ruby, ruby-datamapper

我正在尝试编写一个简单的 Datamapper 适配器，用于查询 HTTP API。我花了很长时间试图找到一些文档，但一切似乎都很旧（除了来自台湾的中文 Ruby Conf ......）。

我们需要重写哪些方法？

看起来我只需要继承 an`AbstractAdapter`并覆盖`create`,`read`和方法，但不确定它们应该采用什么参数`update`以及`delete`它们应该返回什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-27T19:45:36.923

查看以下页面，其中包含贡献的数据映射器适配器列表：

[https://github.com/datamapper/dm-core/wiki/Adapters](https://github.com/datamapper/dm-core/wiki/Adapters)

列表中有几个与 Web 服务交互的示例可以作为很好的示例。例如，检查销售人员数据映射器适配器。

# css - 响应式设计和 clearfix

> ID：15388577
> 
> 赞同：0
> 
> 时间：2013-03-13T14:48:56.743
> 
> 标签：css, css-float, responsive-design, clearfix

我有一个页面的响应式布局。`<aside>`是具有恒定宽度的并且该区域`.main`具有`margin-right`。我这样做是因为我希望该`.main`区域能够适应不同的设备，同时`<aside>`保持不变。

[http://jsfiddle.net/c6mZN/1/](http://jsfiddle.net/c6mZN/1/)

如您所见，问题在于我在主区域内有一个也使用 clearfix 的对象列表，并且第一个元素一直清除对象，直到侧边栏结束。我想要的是它看起来和其他的完全一样`.block`

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:57:50.403

[用固定代码分叉你的小提琴。](http://jsfiddle.net/barney/3SEv8/)

您的`.main`元素需要知道它有一个单独的“格式化上下文”，以便其子元素可以忽略外部布局流：在符合标准的浏览器中执行此操作的唯一方法是`overflow: hidden`：

```
.main {
    overflow: hidden;
} 
```

顺便说一句，你可以去掉边距`.main`，它会自动占据剩下的任何空间（这样你就可以根据需要改变宽度`aside`，甚至添加额外的列）——然后我给了`aside` `margin-left: 10px`它来决定它的间隙需要保持布局不变。

# php - 将日期转换为日期名称，例如周一、周二、周三

> ID：15388578
> 
> 赞同：31
> 
> 时间：2013-03-13T14:48:57.430
> 
> 标签：php

我有一个以以下格式输出日期的变量：

```
201308131830 
```

这是 2013 年 - 8 月 - 13 - 18:30

我正在使用它来检索日期名称，但它得到了错误的日期：

```
$dayname = date('D', strtotime($longdate)); 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-13T14:51:52.300

当您以非标准格式存储日期和时间时，就会发生这种情况。与他们合作变得有问题。

```
$datetime = DateTime::createFromFormat('YmdHi', '201308131830');
echo $datetime->format('D'); 
```

[看到它在行动](https://3v4l.org/WS2nT)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-05-08T07:56:47.337

```
echo date('D', strtotime($date));
echo date('l', strtotime($date)); 
```

结果

```
Tue
Tuesday 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-12-18T01:31:21.527

你的代码对我有用

```
$date = '15-12-2016';
$nameOfDay = date('D', strtotime($date));
echo $nameOfDay; 
```

如果您更喜欢名称的完整文本表示，请使用 l 而不是 D

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-13T15:01:13.510

你的代码对我有用。

```
$input = 201308131830; 
echo date("Y-M-d H:i:s",strtotime($input)) . "\n";
echo date("D", strtotime($input)) . "\n"; 
```

输出：

```
2013-Aug-13 18:30:00
Tue 
```

*但是*，如果您`201308131830`作为*数字*传递，则它比 32 位整数表示的大 50 到 100 倍。[取决于您的系统的具体实现] 如果您的服务器/PHP 版本不支持 64 位整数，那么该数字将溢出并可能最终输出为负数并`date()`默认为`Jan 1, 1970 00:00:00 GMT`.

确保您从中检索此数据的任何来源都将该日期作为*字符串*返回，并将其保留为字符串。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-11-14T18:59:11.017

对于其他语言，使用星期几来识别日期名称

例如对于波斯语使用下面的代码

```
$dayName = getDayName(date('w', strtotime('2019-11-14')));

    function getDayName($dayOfWeek) {

        switch ($dayOfWeek){
            case 6:
                return 'شنبه';
            case 0:
                return 'یک شنبه';
            case 1:
                return 'دو شنبه';
            case 2:
                return 'سه شنبه';
            case 3:
                return 'چهار شنبه';
            case 4:
                return 'پنج شنبه';
            case 5:
                return 'جمعه';
            default:
                return '';
        }

    } 
```

更多信息：[https ://www.php.net/manual/en/function.date.php](https://www.php.net/manual/en/function.date.php)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-04T19:11:21.050

似乎您可以通过以下方式使用 date() 和小写“L”格式字符：

```
$weekday_name = date("l", $timestamp); 
```

对我来说效果很好，这里是文档： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-02-16T17:45:42.970

带有月份和年份的非常简单的简短工作日名称

```
echo date('D, d-M-y'); 
```

输出

```
Tue, 16-Feb-21 
```

根据我的要求

```
return $item->start_time->format("D, d-M"); 
```

输出

```
Tue, 16-Feb 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-13T14:52:20.353

您不能使用`strtotime`，因为您的时间格式不在[PHP 支持的日期和时间格式范围内。](http://www.php.net/manual/en/datetime.formats.php)

因此，您必须首先使用[createFromFormat 函数](http://php.net/manual/en/function.date.php)创建一个有效的日期格式。

```
//creating a valid date format
$newDate = DateTime::createFromFormat('YmdHi', $longdate);

//formating the date as we want
$finalDate = $newDate->format('D'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-28T04:58:12.397

```
$date = new \DateTime("now", new \DateTimeZone('Asia/Calcutta') );
         $day = $date->format('D');
         $weekendnaame = weekedName();
         $weekid =$weekendnaame[$day];
          $dayname = 0;
        $weekiarray = weekendArray($weekid);
        foreach ($weekiarray as $key => $value) {
            if (in_array($value, $request->get('week_id')))
          {
            $dayname = $key+1;
            break;
          }
        }

weeknDate($dayname),

function weeked(){
  $week = array("1"=>"Sunday", "2"=>"Monday", "3"=>"Tuesday", "4"=>"Wednesday", "5"=>"Thursday", "6"=>"Friday", "7"=>"Saturday");
  return $week;
}
function weekendArray($day){
        $favcolor = $day;

switch ($favcolor) {
  case 1:
    $array = array(2,3,4,5,6,7,1);
    break;
  case 2:
    $array = array(3,4,5,6,7,1,2);
    break;
  case 3:
    $array = array(4,5,6,7,1,2,3);
    break;
    case 4:
    $array = array(5,6,7,1,2,3,4);
    break;
    case 5:
    $array = array(6,7,1,2,3,4,5);
    break;
    case 6:
    $array = array(7,1,2,3,4,5,6);
    break;
     case 7:
    $array = array(1,2,3,4,5,6,7);
    break;
  default:
    $array = array(1,2,3,4,5,6,7);
}
return  $array;
}
function weekedName(){
  $week = array("Sun"=>0,"Mun"=>1,"Tue"=>3,"Wed"=>4,"Thu"=>5,"Fri"=>6,"Sat"=>7);
  return $week;
} 
```

# html - 看不到 html 5 标签

> ID：15388583
> 
> 赞同：0
> 
> 时间：2013-03-13T14:49:22.960
> 
> 标签：html

这是代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Html Basics</title>
</head>
<body>
    <header style="background-color:lightcoral">
        <img src="C:\Users\Public\Pictures\Sample Pictures\Koala.jpg" width="50px" height="50px"/>
        <nav>
            <ul>
                <li>One</li>
                <li>Two</li>
                <li>Three</li>
                <li>Go!!!</li>
            </ul>
        </nav>
    </header>
    <section>
        <article style="background-color:aqua">Article 1</article>
        <article style="background-color:grey">Article 2</article>
    </section>
    <aside style="background-color:palegreen">Aside</aside>
    <footer style="background-color:aliceblue">Footer</footer>
</body>
</html> 
```

我在 Chorme 浏览器版本 25.0.1364.152 m 中看不到任何 HTML 5 效果，例如 side 标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:01:37.123

标签定义了除了它所在的内容之外的一些内容。

旁边的内容应该与周围的内容相关。

请看下面的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Lorem</title>
</head>
<body>
<div style="font:Arial, Helvetica, Sans-Serif;width:50%;">
<aside style="font-size:larger;font-style:italic;color:green;float:right;width:35%;padding:15px;">
Lorem ipsum dolor sit amet, consectetur adipiscing elit.
</aside>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce nec arcu sit amet orci sodales adipiscing. Proin imperdiet accumsan ipsum a eleifend. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Sed diam dolor, scelerisque a dictum id, tempor non est. Nam sit amet congue diam. Curabitur vel nunc nisl. Fusce vel sollicitudin dui. Morbi faucibus, eros vel 
</div>

</body>
</html> 
```

# javascript - 在页面上查找字符串并单击旁边的链接的功能？

> ID：15388584
> 
> 赞同：0
> 
> 时间：2013-03-13T14:49:25.180
> 
> 标签：javascript

我想知道是否可以设计一个脚本来搜索网页中的特定文本字符串，然后直接单击右侧元素 ID 中的链接。

这可能吗。也许是javascript，php？

请提供帮助，并感谢所做的一切。:)

@Four_lo

感谢您的回复。对不起，也许是因为我对 javascript 很陌生，但我无法真正理解您建议的页面上的任何内容。

我整理了一些 javascript，它们将在页面中搜索元素 ID，然后单击其中的链接。

```
<html>
<head>
<script type="text/javascript">
function init(){
    var linkPage = document.getElementById('linkid').href;
    window.location.href = linkPage;
}
onload=init;
</script>
</head>
<body>

<a href="http://www.barnsley-chronicle.co.uk" id="linkid">GO HERE</a>
<a href="test.html" id="thisone">I WANT TO CLICK HERE!</a>

</body>
</html> 
```

所以基本上，我需要在页面上搜索 GO HERE。然后，一旦找到它，我需要单击 id="thisone" 中的链接，如果这有意义的话。

上面的代码有效，并单击指定 id 内的链接。但是，我想在该 id 中找到某些文本，然后移动到下一个 id，然后单击该 id 中的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T19:58:38.707

比它需要的稍微复杂一点：

```
function performAfterLinkWithText(text, perform) {
    // get all the links
    var $links = document.getElementsByTagName('a');

    // scan them for your text
    for(var i in $links) {
        if($links[i].innerHTML === text) {
            var $next = $links[i] // ready for loop
                , terminateAfter = 20 // don't repeat forever
                ;
            // keep checking the adjacent element
            // because newlines show up as #text
            do {
                $next = $next.nextSibling;
            } while( !$next.href && terminateAfter-- > 0 );

            // do your thing
            perform($next.href, $next); // window.location.href = $next.href;
        }
    }
}

// test -- performAfterLinkWithText('GO HERE', function(url, link) { console.log(url, link); });

performAfterLinkWithText('GO HERE', function(url) { window.location.href = $next.href; }); 
```

或者使用 jQuery：

```
window.location.href = $('a:contains("GO HERE")').next().attr('href') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:11:35.037

有可能的。这可能需要一些技巧，但这里是您应该开始访问所需字符串的地方。我相信正则表达式也是必须的。

[http://dom.spec.whatwg.org/#processinginstruction](http://dom.spec.whatwg.org/#processinginstruction) [http://domparsing.spec.whatwg.org/](http://domparsing.spec.whatwg.org/)

# java - 通过避免创建对象进行优化

> ID：15388587
> 
> 赞同：1
> 
> 时间：2013-03-13T14:49:31.987
> 
> 标签：java

您好我试图通过使用普通数组存储 2 个键值来避免创建对象，但它似乎不起作用。

我可以知道是否有任何解决方案可以避免创建一个对象，或者我只是太努力了？

忘记添加：

1）我知道为什么它不起作用......如果我不这样做，我将不会为 key 实现 equals() 和 hashcode()。

2）基本上我试图在检索密钥时避免创建 1 个对象。通常在服务类中会有一个方法

```
public void get(String key1, String key2){
       return keyMap.get(new Key(key1,key2)); <>>avoiding the new Key()
} 
```

断线

```
import java.util.HashMap;
import java.util.Map;

public class ArrayMap {

    /**
     * @param args
     */
    public static void main(String[] args) {

        /*start A  Possible to get this to work? */
        Map<String[], String> arrMap = new HashMap<>();
        arrMap.put(new String[] { "hello", "hi" }, "hello motto");
        System.out.println(arrMap);
        System.out.println(arrMap.get(new String[] { "hello", "hi" })); // print
                                                                        // null
         /* end of A */

        /*Start of B: Reason: to avoid this */
        Map<Key, String> keyMap = new HashMap<Key, String>();
        keyMap.put(new Key("hello", "hi"), "hello motto"); // I wish to avoid one object creation 

        System.out.println(keyMap.get(new Key("hello", "hi"))); // print
                                                                // "hello motto"
        /*End of B: Reason: to avoid this */
    }
}

class Key {
    private final String key1;
    private final String key2;

    public Key(String key1, String key2) {
        this.key1 = key1;
        this.key2 = key2;
    }

    public String getKey1() {
        return key1;
    }

    public String getKey2() {
        return key2;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((key1 == null) ? 0 : key1.hashCode());
        result = prime * result + ((key2 == null) ? 0 : key2.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Key other = (Key) obj;
        if (key1 == null) {
            if (other.key1 != null)
                return false;
        } else if (!key1.equals(other.key1))
            return false;
        if (key2 == null) {
            if (other.key2 != null)
                return false;
        } else if (!key2.equals(other.key2))
            return false;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T14:54:39.777

这种方法有几个问题。

**1\. 您不能覆盖数组的`equals()`/`hashcode()`方法**- 这是一个问题，因为`HashMap`无法正确确定它是否查找了正确的键。

**2\. 每次要创建密钥时，您仍在创建新对象。**数组是对象——每次都创建一个新的，你什么也没有保存。不妨使用您的原始`Key`对象。

*可能的解决方案*

因此，我将假设您希望避免每次都创建新对象的原因是因为您将经常调用`get(key)`该对象`HashMap`。如果是这种情况，为什么不创建一个`Key`保留在`ArrayMap`对象内部的可变实例。每次您想键入两个`String`s 时，只需将它们设置在您的可变`Key`实例中并使用该可变实例进行查找。然后，您不必在`Key`每次要查找一对`Strings`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:53:06.807

在这些行中

```
arrMap.put(new String[] { "hello", "hi" }, "hello motto");
System.out.println(arrMap);
System.out.println(arrMap.get(new String[] { "hello", "hi" })); // print
                                                                    // null 
```

您使用 a`String[]`作为键。该对象没有自定义`equals()`方法，如您在`Key`类中可以比较内容的方法。因此，当您尝试`map.get()`传入一个新的`String[]`（但具有相同的内容）时，它不会找到任何东西，因为它不是同一个对象。

你可能想做的是这个

```
String[] array = new String[] { "hello", "hi" };
arrMap.put(array , "hello motto");
System.out.println(arrMap);
System.out.println(arrMap.get(array)); // print hello motto 
```

你真的不应该使用数组类型作为 Maps 的键。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:56:41.663

> 我可以知道是否有任何解决方案可以避免创建一个对象，**或者我只是太努力了？**

如果你不确定你是否努力过头，那么你可能是。根据您提供给我们的信息，这看起来像是过早的优化。

几个相关的点：

1.  对象的创建并不昂贵，特别是如果对象是短暂的。
2.  确定一个软件的性能特征的唯一方法是通过分析。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T14:55:17.143

在 java 中，array1.equals(array2) 仅当 array1 == array2 时，即它们在内存中是完全相同的实例。这会导致 Map 将它们视为单独的键。你最好使用你的 Key 类作为地图的键

# .net - ValueTypes 如何从 Object (ReferenceType) 派生并且仍然是 ValueTypes

> ID：15388589
> 
> 赞同：-2
> 
> 时间：2013-03-13T14:49:37.720
> 
> 标签：.net

为什么 System.Object 是 int 和 string 的基类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:55:57.763

正如[MSDN](http://msdn.microsoft.com/ru-ru/library/ms173104)所说：

值类型派生自 System.ValueType，后者派生自 System.Object。从 System.ValueType 派生的类型在 CLR 中具有特殊行为。值类型变量直接包含它们的值，这意味着内存是在声明变量的任何上下文中内联分配的。值类型变量没有单独的堆分配或垃圾收集开销。

# javascript - 如何在 JavaScript 中调用当前对象的公共方法？

> ID：15388595
> 
> 赞同：1
> 
> 时间：2013-03-13T14:49:55.353
> 
> 标签：javascript, oop

此刻我已经走到了这一步。

```
function Class() {

    var privateMethod = function () {
        return 'private'
    }

    this.publicMethod = function () {
        return 'public'
    }

    var _constructor = function () {
        $(document).on('click', _onClick)
    }

    var _onClick = function () {
        // My error is `this`, focus now on the click event, but I need the object itself
        console.log(privateMethod())
        console.log(this.publicMethod())
    }

    _constructor()
}

$(document).ready(init)

function init() {
    new Class()
} 
```

问题是，在点击事件中，我无法调用publicMethod。我可以调用私有方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:52:06.537

问题是，在您的处理程序中，您丢失了上下文（`this`不再意味着您的 Class 实例，而是指触发您的事件的对象。您需要创建一个闭包范围的版本`this`来保留该上下文。

```
var self = this;
var _onClick = function () {
    // My error is `this`, focus now on the click event, but I need the object itself
    console.log(privateMethod())
    console.log(self.publicMethod())
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:53:28.850

您有范围问题，`this`onclick 指向的对象与您期望的对象不同。在你的情况下，它是`document`

```
var that = this;
var _onClick = function () {
    // My error is `this`, focus now on the click event, but I need the object itself
    console.log(privateMethod())
    console.log(that.publicMethod())
} 
```

[运行示例](http://jsfiddle.net/C4t5S/)

# php - PHP 使用 preg_match 从自定义标签中检索文本值

> ID：15388596
> 
> 赞同：1
> 
> 时间：2013-03-13T14:49:55.733
> 
> 标签：php, preg-match, custom-tag

大家好，我已经在 php 网站上搜索了一个快速简单的解决方案，我也在 google 上搜索过，但没有找到可以工作的接缝。

```
preg_match("/\[video-code\](.*?)\[\/video-code\]/", the_content(), $match);
echo "result=".$match[1]; 
```

我正在尝试将这些文本之间的文本添加到标签“[video-code]...[/video-code]” 有没有人可以帮助我解决这个小问题？我尝试了不同的东西，但似乎我做错了什么！？

一些帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:54:02.570

`'¬\[BeginingOfTag](.*?)\[/EndOfTag]¬is'`

我在我的大多数网站上都使用了这种模式，过去我在 preg_match 中使用过它，但主要用于 preg_replace.. 所以试一试，让我知道它是否有效。

# php - 比较并突出显示php中包含html的两个字符串的差异

> ID：15388597
> 
> 赞同：2
> 
> 时间：2013-03-13T14:49:59.783
> 
> 标签：php, highlighting, string-comparison

我正在尝试比较两个都包含 HTML 的 PHP 字符串。（它们都通过所见即所得的编辑器放入数据库中）。

我想要得到的结果是看看哪些词被删除了，哪些词被添加了。

为此，我使用如下[代码：](http://pastebin.com/dU45FKNL)

```
$old = "<p>Lorem ipsum is standard dummy text</p>";
$new = "<p>Lorem ipsum was standard dummy jibbrish</p>";
echo htmlDiff($old, $new); 
```

效果很好。但是，当我添加一些标签时`<li>`，乐趣就结束了。

例如，如果我有以下内容：

```
$old = "<p>Lorem ipsum is standard dummy text. <ul><li>Lorem</li><li>Ipsum</li><li>Dolor</li></ul></p>";

$new = "<p>Lorem ipsum was standard dummy jibbrish. <ul><li>Lorem</li><li>Dolor</li></ul></p>";

echo htmlDiff($old, $new); 
```

标签在第`<del>`一个列表项之后被正确添加，但被删除的列表项被放置在`<del>`标签之外，使它看起来像没有被删除。

我可以通过剥离所有标签来解决这个问题，但我想保留两个字符串的布局。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T19:33:30.850

您可以尝试以下 htmlDiff 函数的替代方法之一：

1.  [PHP inline diff](http://web.archive.org/web/20080506155528/http://software.zuavra.net/inline-diff/ "PHP 内联差异")迷你库产生[这样的结果](http://web.archive.org/web/20080419063437/http://software.zuavra.net/inline-diff/diff_example_0.2.html)
2.  [Horde_Text_Diff](http://www.horde.org/libraries/Horde_Text_Diff/download)库
3.  xdiff扩展中的[xdiff_string_diff函数](http://bd.php.net/manual/en/function.xdiff-string-diff.php)

# sitecore - 在 Sitecore 中锁定用户时向管理员发送电子邮件

> ID：15388602
> 
> 赞同：0
> 
> 时间：2013-03-13T14:50:10.773
> 
> 标签：sitecore

每当用户因输入错误密码太多次而被锁定在 Sitecore 之外时，我需要让 Sitecore 向特定电子邮件地址发送电子邮件。我有发送电子邮件的代码；但是，我没有看到在登录过程中触发的管道（登录和登录仅在成功登录时触发）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T08:36:32.887

必须稍微修改@Maras 的答案才能使其正常工作，因为域没有作为 LoggingIn 事件中 UserName 属性的前缀。除此之外，代码效果很好。

```
namespace My.Namespace.Login
{
    public class CustomLoginPage : LoginPage
    {
        private bool _userIsNotLockedOut;

        protected override void OnInit(EventArgs e)
        {
            Login.LoggingIn += Login_LoggingIn;
            Login.LoginError += Login_LoginError;
            base.OnInit(e);
        }

        private void Login_LoggingIn(object sender, LoginCancelEventArgs e)
        {
            string domainUser = Login.UserName;
            if (!domainUser.Contains("sitecore\\"))
            {
                var domain = Sitecore.Context.Domain;
                domainUser = domain + @"\" + domainUser;
            }

            var user = Membership.GetUser(domainUser, false);

            if (user != null)
            {
                _userIsNotLockedOut = !user.IsLockedOut;
            }
        }

        private void Login_LoginError(object sender, EventArgs e)
        {
            if (_userIsNotLockedOut)
            {
                var user = Membership.GetUser(Login.UserName, false);
                if (user != null && user.IsLockedOut)
                {
                    SendEmail();
                }
            }
        }
    }
} 
```

您还需要参考 Sitecore.Client.dll，在 Sitecore 7 中完成测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T22:40:20.503

此解决方案假定您使用的是标准**Sitecore**登录页面。

**我设法通过覆盖Sitecore**登录页面来实现您所需要的。您需要做的是创建一个继承自`Sitecore.sitecore.login.LoginPage`（它不是拼写错误）类的类，然后添加2个方法，这些方法将在登录系统之前和登录失败后执行，如下所示：

```
namespace My.Assembly.Namespace
{
  public class MyLoginPage : LoginPage
  {
    private bool maybeWillBeLockedOut;

    protected override void OnInit(EventArgs e)
    {
      Login.LoggingIn += Login_LoggingIn;
      Login.LoginError += Login_LoginError;
      base.OnInit(e);
    }

    void Login_LoggingIn(object sender, LoginCancelEventArgs e)
    {
      MembershipUser user = Membership.Provider.GetUser(Login.UserName, false);
      // user with username exists and is not locked out yet
      maybeWillBeLockedOut = user != null && !user.IsLockedOut;
    }

    void Login_LoginError(object sender, EventArgs e)
    {
      if (maybeWillBeLockedOut)
      {
        // login failed - lets check if locked out now
        MembershipUser user = Membership.Provider.GetUser(Login.UserName, false);
        if (user != null && user.IsLockedOut)
        {
          // user wasn't locked out but is now - send an email
          SendEmail();
        }
      }
    }
  }
} 
```

然后更新**sitecore\login\default.aspx文件并在****Inherits**属性中设置新类：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="default.aspx.cs"
    Inherits="My.Assembly.Namespace.MyLoginPage" %> 
```

这不是最优雅的解决方案，但正如您和 @OptimizedQuery 所注意到的那样，`LoggingIn`在`LoggedIn`这种情况下管道是不够的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:14:42.413

`Sitecore.Pipelines.LoggingIn.CheckStartPage, Sitecore.Kernel`我在管道进程中的处理器之前添加了一个自定义管道`loggingin`进程。当我输入一个有效的用户名和无效的密码时，我的断点在我被通知我的登录不成功之前被击中。如果您的自定义处理器在`CheckStartPage`处理器之后，那么它只会在成功登录时受到打击，因为`CheckStartPage`如果用户名/密码组合验证失败，该进程会中止管道。我不确定如何检查被锁定的用户，但看起来您应该能够在处理器之前添加`CheckStartPage`处理器或覆盖该处理器。

我的测试和反思是在 Sitecore 6.6 解决方案上完成的。

# java - 使用 JAVA 更新独立于操作系统的 PATH 环境变量

> ID：15388606
> 
> 赞同：0
> 
> 时间：2013-03-13T14:50:17.660
> 
> 标签：java, windows, unix, environment-variables

如何使用 java 更新环境变量 PATH。使用相同的代码，当我在各自的操作系统中运行代码时，我应该能够更新 Windows 和 Unix 中的 PATH 变量。

提前致谢。

问候，桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:24:34.247

在 Unix（c 语言）中，您可以使用不同形式的“exec”命令更改 PATH，但它只能用于将附加/更新的变量传递给当前程序将执行的任何内容。

Unix 的原则之一是环境与您开始执行代码时的环境不同。因此，即使您的代码（java）是通过 JVM 执行的，它仍然必须遵守此规则。一旦 JVM 退出，对 PATH 的所有更新都将丢失。

在 Windows 中情况并非如此。一个程序可以改变当前的环境，这就是为什么你经常在windows平台上执行一些代码后发现自己在不同的目录中。

不幸的是，正因为如此，您将无法在 Windows 和 Unix 中执行此操作。在 Unix 中你能期望的最好的东西是这样的：

myScript.sh：

```
# This is a script that executes the program and then 'includes' a script
/path/to/my/program  # which writes the following file containing environment changes
. /this/file/created/by/above 
```

在“shell”解释器中（如果您愿意，可以使用命令提示符）：

```
# Execute my program using myScript.sh
. ./myScript.sh 
```

这应该会保留您的路径更改，但您永远不能在没有前导点的情况下调用“myScript.sh”。如果你忘记了，你可以在执行后包含“/this/file/created/by/above”。

当然，当您使用它时，您需要处理多个用户可能同时执行的操作。所以文件“/this/file/created/by/above”对于每次执行都应该是不同的。调查“$$”参数的可能用途。

附言。“/path/to/my/program”可以是一个 JVM，它将执行你的 java 代码。

安全性：如果我是“root”用户，我绝对不想执行您的代码。您的程序可以在该文件“/this/file/created/by/above”中放入任何内容，并且它将由 root 执行。

# image - 使用红色激光进行物体检测

> ID：15388607
> 
> 赞同：1
> 
> 时间：2013-03-13T14:50:19.170
> 
> 标签：image, matlab, image-processing, detection, matlab-guide

我想在matlab中用激光做物体检测。当我将激光对准一个物体时，我可以检测到那个物体；但是，因为我的激光是红色的，所以当激光指向红色物体时，我无法检测到那个物体。

这是我的过程：首先，我使用不同的方法分离红色对象。如果一个物体的R值等于255，我说这是激光激光。但是，如果另一个物体的R值等于255（即物体是红色的），我就无法检测到激光（因为它们是相同的颜色）。我能怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:57:12.840

使用两种不同颜色的激光。例如，如果您有红色和蓝色激光，则红色激光将显示在蓝色物体上，而蓝色激光将显示在红色物体上。

如果您一心想要使用单个激光，您可以检查激光点的强度，但这在实际环境中会困难得多。

# objective-c - Objective C - JSON数据在正确返回后不可用

> ID：15388611
> 
> 赞同：0
> 
> 时间：2013-03-13T14:50:37.363
> 
> 标签：objective-c, json

我正在尝试将正确返回的 JSON 的结果放入 tableview 中。问题是我只能访问返回信息的块内的数据，甚至将结果分配给实例变量。我的代码如下：

```
NSURL *url = [NSURL URLWithString:@"http://www.my_url.com.br/app/?type=list&info=15,16&lat=some_data&long=some_data"];

ASIHTTPRequest *_request = [ASIHTTPRequest requestWithURL:url];
ASIHTTPRequest *request = _request;

request.requestMethod = @"POST";
[request addRequestHeader:@"Content-Type" value:@"application/json"];

[request setDelegate:self];
[request setCompletionBlock:^{
    NSString *responseString = [request responseString];

    NSLog(@"Response: %@", responseString);
    NSDictionary *root = [NSJSONSerialization JSONObjectWithData:request.responseData options:0 error:nil];
    self.data = [root objectForKey:@"listing"];

    NSLog(@"Data returned: %@", data);  //Everything works well. The data returned is printed correctly

}];
[request setFailedBlock:^{
    NSError *error = [request error];
    NSLog(@"Error: %@", error.localizedDescription);
}];

[request startAsynchronous];

NSLog(@"Data only: %@", data);  //At this point, the "data" content is nil 
```

这是我的“ListDataController.h”文件定义：

```
@interface ListDataController : UITableViewController{
ApplicationCell *tmpCell;
    NSArray *data;
    UILabel *status ;       
UINib *cellNib;
}

@property (nonatomic, retain) IBOutlet ApplicationCell *tmpCell;
@property (nonatomic, retain) NSArray *data; 
```

返回的 JSON：数据自身：（{ Icon = "Baseball.png"; Name = Baseball; NumRatings = 106; Price = "$2.98"; Publisher = "Super Sportz, Inc."; Rating = "3.5"; }, {图标 = “Checkers.png”；名称 = Checkers；NumRatings = 87；价格 = 免费；出版商 =“Gameitoids, Inc.”；评级 = 4；}）

问题是：为什么我无法访问块外的实例变量“数据”，甚至将其分配为 json 的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:58:35.913

您可以`data`在块外访问，但它设置为`nil`. 您可能设置`data`正确，只是不是在您想的那一刻。

当您执行最终日志时，完成块尚未运行。该请求是**异步**的，这意味着完成块将在将来的某个时间点执行。这是使用块时要理解的关键概念。

**更新**：

要在检索数据后对其进行处理，您可以从完成块中调用所需的数据：

```
[request setCompletionBlock:^{
    NSString *responseString = [request responseString];

    NSLog(@"Response: %@", responseString);
    NSDictionary *root = [NSJSONSerialization JSONObjectWithData:request.responseData options:0 error:nil];
    self.data = [root objectForKey:@"listing"];

NSLog(@"Data returned: %@", data);  //Everything works well. The data returned is printed correctly

    [self handleData:self.data];  // you would have to define this method your self

}]; 
```

需要考虑的一件事是，如果您基于 更新 UI `self.data`，则需要确保`handleData`在主线程上执行。

一些链接：

*   [目标 C 块](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)
*   [并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:05:42.683

1.  时间（如上面的2个答案）
2.  要写入块外的变量，您必须在变量声明之前使用 __block 指令。我不确定实例变量是否对此特别，但要确保您可以使用一些临时变量来存储结果，然后再将其最终分配给 ivar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:08:36.900

```
NSLog(@"Data returned: %@", data);  //Everything works well. The data returned is printed correctly 
```

美好的。你有什么问题？这是完成块。它在接收到所有数据时执行。在该时间点之前对数据的任何访问在最好的情况下最终将为零，在最坏的情况下将导致过时/错误/不可预测的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T14:53:49.593

这里发生的是你的日志

```
NSLog(@"Data only: %@", data);  //At this point, the "data" content is nil 
```

将在获取数据之前很好地执行。您正在使用使用块的异步请求，即执行将在单独的线程上发生，而不会影响主线程的执行

并且在单独的线程完成时，完成块被执行。因此响应仅在此时加载到数据中

为了更好地理解

*   在日志和完成块中放置断点

您可以看到日志上的执行发生在完成块之前

编辑：您可以在将响应分配给`data`

```
 [request setCompletionBlock:^{
        NSString *responseString = [request responseString];

        NSLog(@"Response: %@", responseString);
        NSDictionary *root = [NSJSONSerialization JSONObjectWithData:request.responseData options:0 error:nil];
        self.data = [root objectForKey:@"listing"];

        NSLog(@"Data returned: %@", data);  //Everything works well. The data returned is printed correctly

        //DO here WHATEVER you want to do after getting response
    //eg:
        [table reloadData]

    }]; 
```

获取所有数据的请求会执行完成块，所以你得到响应后想要做的任何事情都可以在完成块中完成

# php - PHP循环遍历简单的xml并将数组中的值作为字符串存储

> ID：15388613
> 
> 赞同：0
> 
> 时间：2013-03-13T14:50:41.933
> 
> 标签：php, xml, arrays

我有一个返回 xml 字符串的 php 函数 ($get_user_info)。我正在尝试遍历 xml 并将 $user->id 的值添加到数组中。这可行，但它会将 $user->id 作为对象添加到数组中。有没有办法只生成一个值数组。例如数组（10、12、13 等）？

这是我正在使用的一些示例代码：

```
$users = simplexml_load_string($get_user_info);
$user_ids = array();
foreach ($users->user as $user) {
//echo "$user->id";       // this echoes the value which is what I want
$user_ids[] = $user->id;  // this adds an object to the array
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:52:55.037

简单的解析到`string`呢？

```
$user_ids[] = (string) $user->id; 
```

或者`int`

```
$user_ids[] = (int) $user->id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:53:02.400

您应该将对象转换为您想要的原始类型

所以

```
$user_ids[] = (int) $user->id; 
```

# php - Doctrine2 Entites - 是否可以将“脏”对象与数据库中的对象进行比较

> ID：15388618
> 
> 赞同：7
> 
> 时间：2013-03-13T14:50:50.200
> 
> 标签：php, symfony, doctrine-orm, doctrine-odm

是否可以比较当前“脏”版本（其某些属性已更改但尚未持久化的对象）和“原始”版本（仍在数据库中的数据）之间的实体对象的状态。

我的假设是我可以有一个“脏”对象，然后从数据库中提取一个新对象并比较两者。例如：

```
$entity = $em->getRepository('MyContentBundle:DynamicContent')->find($id);

$editForm = $this->createContentForm($entity);
$editForm->bind($request);

if ($editForm->isValid()) {
    $db_entity = $em->getRepository('MyContentBundle:DynamicContent')->find($id);

    // compare $entity to $db_entity

    $em->persist($entity);
    $em->flush();

    return $this->redirect($this->generateUrl('content_edit', array('id' => $id)));
} 
```

但根据我的经验，$entity 和 $db_entity 始终是同一个对象（并且在 $request 绑定形式之后具有与 $entity 相同的数据）。为了比较，有没有办法在“脏”版本旁边获得新版本的 $entity ？我见过的解决方案都是在表单绑定发生之前提取所需的数据，但我宁愿没有这个限制。

**更新：**为了澄清，我不仅在寻找对实体属性的更改，而且还在寻找其相关的实体集合。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T14:56:32.707

您可以通过 Doctine 的 UnityOfWork 获取实体上发生的变化。这很简单：在你持久化实体之后，Doctrine 知道要在数据库中更新什么。您可以通过以下方式获取这些信息：

```
// Run these AFTER persist and BEFORE flush
$uow = $em->getUnitOfWork();
$uow->computeChangeSets();
$changeset = $uow->getEntityChangeSet($entity); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T14:57:41.980

在你刷新`$em`它之后它在数据库中发生（它被提交）......所以......你可能想要检索`$db_entity`之前`flush()`

* * *

1.  我不确定你想要什么.. 但你也可以使用`merge`而不是`persist`.

    *   `merge`正在返回修改的对象 - 生成和设置的 id
    *   `persist`正在修改您的实例
2.  如果您想修改对象并且`persisted`之前不使用它`flush`。

3.  `EntityManager`给你同样的例子，因为你没有`$em->clear()`
    *   `flush`正在提交所有更改（所有`dirty`对象）
    *   `clear`正在清除内存缓存。所以当你`find(..., $id)`，你会得到一个全新的实例
4.  `clone`关键字对您有用吗？就像在这个例子中：

* * *

```
$entity = $em->find('My\Entity', $id);
$clonedEntity = clone $entity; 
```

您可能还想阅读以下内容：[实现唤醒或克隆](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/implementing-wakeup-or-clone.html)

# c# - 每当对该类的任何方法发出请求时，自动调用通用方法

> ID：15388621
> 
> 赞同：1
> 
> 时间：2013-03-13T14:50:52.530
> 
> 标签：c#, asp.net

我正在维护一个 ASP.net + c# [.net version 3.5] 应用程序。要求是，在整个应用程序中，必须检查传递给 DAL 层的任何字符串变量是否有某些指定的单词和符号。

在这种情况下，我必须使用每个方法，然后使用每个字符串参数来检查特定的单词和符号，这将花费大量时间。所以我正在考虑一种我不知道可能或不喜欢的方法

每当请求从 BLL 层调用 DAL 层类的任何方法时，必须使用传递给实际 DAL 方法的所有参数自动调用在 DAL 层下定义的通用方法（我应该在 DAL 的构造函数上抵制这种通用方法）。在常用方法中，我应该检查所有字符串参数并在需要时更改它们的值，然后在从该方法返回后，实际方法将以更改的值调用。

如果这是不可能的，请向我建议任何其他方法，这需要最少的努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:00:06.927

您可以使用 AOP Fameworks 之一在您的 DAL 方法中注入代码。 [Postsharp](http://www.postsharp.net)将是更好的之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:01:45.847

实现这种功能的唯一方法是使用一些面向方面的编程库，例如这里讨论的：[什么是 .Net 中 AOP 的最佳实现？](https://stackoverflow.com/questions/633710/what-is-the-best-implementation-for-aop-in-net)

听起来您确实需要验证用户是否没有尝试创建 SQL 注入。首先，任何设计良好的应用程序都不会产生 SQL 注入的可能性，因此不需要此类验证。如果某些其他要求（记录此类尝试）需要它，则可以改为在 HTTP 请求级别执行此操作。您可以创建一个`IHttpModule`（或者只是编写代码`global.asax`来检查`Request`对象中的所有值，看看是否有任何包含坏词等。

```
protected void Application_PostAuthorizeRequest(object sender, EventArgs e)
{
    var collection = this.Context.Request.Params;
    foreach (var key in collection.Keys)
    {
        if (ContainsBadWords(collection[key]))
            Log("Request key " + key + " contains bad words: " + collection[key]);
    }
} 
```

# java - 从 URL 中提取参数并将它们传递到数据库

> ID：15388623
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:50:54.723
> 
> 标签：java, php, web-services, jsp

假设我不关心这方面的安全性，客户端计算机调用 url：

```
myurl.com/file.ext?Param1=value&param2=value2&param3=value3 
```

然后我想做一个简单的插入数据库

```
Insert into myDB(Col1, Col2, Col3)VALUES(Param1, Param2, Param3) 
```

我将对输入进行自己的字符剥离，我只是找不到任何关于如何做到这一点的简洁内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:53:56.953

见 [URL.getQuery()](http://download.oracle.com/javase/1.4.2/docs/api/java/net/URL.html#getQuery%28%29) 会返回 url 的查询部分，然后使用这个方法

```
URl u = new URL("myurl.com/file.ext?Param1=value&param2=value2&param3=value3");
Map<String, String> params = getQueryMap(u.getQuery());

public static Map<String, String> getQueryMap(String query)  
{  
    String[] params = query.split("&");  
    Map<String, String> map = new HashMap<String, String>();  
    for (String param : params)  
    {  
        String[] parts = param.split("=");
        String name = parts[0];  
        String value = parts[1];  
        map.put(name, value);  
    }  
    return map;  
} 
```

现在您将拥有地图中的所有参数，可以访问。[使用JDBC](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)格式化并执行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:59:15.133

```
 String s = "myurl.com/file.ext?Param1=value&param2=value2&param3=value3";
    int index = s.indexOf("Param1");
    String ss = s.substring(index);
    String[] arr = ss.split("&");
    for(int i=0; i < arr.length; i++){
        String[] value= arr[i].split("=");//value[i] will be value i+1th value
    } 
```

# php - PHP到python包（'H'）

> ID：15388627
> 
> 赞同：4
> 
> 时间：2013-03-13T14:51:01.357
> 
> 标签：php, python, hex, pack, nibble

我正在将一个用 PHP 编写的身份验证库翻译成 Python。这都是遗留代码，原始开发人员早已不复存在。他们使用 PHP 的“pack”命令使用“H”标志将字符串转换为十六进制。PHP 的[文档](http://www.php.net/manual/en/function.pack.php)将其描述为“十六进制字符串，高位优先”。我读了另一个建议使用 binascii.unhexlify() 的问题（[Python 等效于 php pack](https://stackoverflow.com/questions/13892734/python-equivalent-of-php-pack)），但是每当我传入非十六进制字符时都会抱怨。

所以我的问题是 PHP pack 函数对非十六进制字符有什么作用？是把它们扔掉，还是有一个额外的步骤来执行翻译。Python中有比bina​​scii.unhexlify更好的方法吗？

所以打包'H *'

```
php -r 'print pack("H*", md5("Dummy String"));' 
```

退货

```
??????=?PW?? 
```

在蟒蛇中：

```
secret = binascii.unhexlify( "Dummy String" )
TypeError: Non-hexadecimal digit found 
```

谢谢您的帮助。

[编辑]

所以 DJV 基本上是正确的。我需要先将值转换为 md5，但这就是有趣的地方。在 python 中，md5 库通过“digest”方法返回二进制数据。

在我的情况下，我可以跳过所有 binascii 调用并使用

```
md5.md5('Dummy String').digest() 
```

这在 PHP 中与以下内容相同：

pack("H*", md5("虚拟字符串"));

好玩的东西。很高兴知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:11:26.803

我认为你需要它反过来。`"Dummy String"`不是 中的有效数字`hex`。你可以`hexlify`：

```
>>> binascii.hexlify('Dummy String')
'44756d6d7920537472696e67' 
```

但不是`unhexlify`。`unhexlify`接受一个字符串`hex`并将其转换为它的 ASCII 表示：

```
>>> binascii.unhexlify('44756d6d7920537472696e67')
'Dummy String' 
```

您需要的是`md5`字符串（`"Dummy String"`在我们的例子中），`unhexlify`它是哈希：

```
import binascii
import hashlib

the_hash = hashlib.md5('Dummy String').hexdigest()
print the_hash
the_unhex = binascii.unhexlify(the_hash)
print the_unhex 
```

这会产生哈希和未十六进制的哈希：

```
ec041da9f891c09b3d1617ba5057b3f5
ЛLЬ-ю?=¦PWЁУ 
```

**注意：**虽然输出看起来与您的不完全一样 - “??????=?PW??”，但两者中的“PW”和“=”让我非常确定它是正确的。

更多关于[hashlib](http://docs.python.org/2/library/hashlib.html)和[binascii](http://docs.python.org/2/library/binascii.html)

# java - 从两个 sql server 快速加载数据

> ID：15388628
> 
> 赞同：2
> 
> 时间：2013-03-13T14:51:02.210
> 
> 标签：java, multithreading, jakarta-ee, glassfish-3

我需要从两个不同的 sql 服务器 (JDBC) 加载和合并数据，并通过 REST 将结果提供给客户端。

我不想加载第一个数据 a 然后是数据 b 我想开始加载数据 a 然后开始加载数据 b 并等待两者完成然后合并数据。在标准 Java 中，我会使用 Callable Threads 来执行此操作。但是我可以在 Glassfish (Java EE) 中做什么。

我可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:00:05.727

在 Java EE 应用服务器中，执行此类操作的标准方法是使用[异步方法调用](http://docs.oracle.com/javaee/6/tutorial/doc/gkkqg.html)（我相信 Java EE 6 中的新方法）。您的“主要”调用将依次调用 2 个异步 EJB 方法，然后它们将并行运行。您的主调用将等待它们都完成，然后合并结果并将它们返回给调用者。

# java - 如何自动装配 Spring Environment 对象

> ID：15388629
> 
> 赞同：15
> 
> 时间：2013-03-13T14:51:04.693
> 
> 标签：java, spring, properties, dependency-injection

我正在尝试从我的应用程序对象中的 .properties 文件中获取属性。我唯一知道如何做到这一点的是通过`Environment`对象。

它在我的配置中效果很好......

```
@Configuration
@ComponentScan(basePackages = {
        "com.production"
})
@PropertySource(value = {
        "classpath:/application.properties",
        "classpath:/environment-${FETTER_ENVIRONMENT}.properties"
})
@EnableJpaRepositories("com.production.repositories")
@EnableTransactionManagement
public class Config {
    private static final String PROPERTY_NAME_DATABASE_URL = "db.url";
    private static final String PROPERTY_NAME_DATABASE_USER = "db.user";
    private static final String PROPERTY_NAME_DATABASE_PASSWORD = "db.password";

    private static final String PROPERTY_NAME_HIBERNATE_DIALECT = "hibernate.dialect";
    private static final String PROPERTY_NAME_HIBERNATE_FORMAT_SQL = "hibernate.format_sql";
    private static final String PROPERTY_NAME_HIBERNATE_SHOW_SQL = "hibernate.show_sql";
    private static final String PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN = "entitymanager.packages.to.scan";

    @Resource
    Environment environment; 
```

但我尝试在另一个班级做它，它是空的。我试过使用`@Resource`和`@Autowired`手动注入。

有什么特别`Environment`的东西可以防止这种情况发生吗？

```
@Component
public class Vendor {
    private String token;

    @Autowired
    private Environment environment;

    public Vendor() {
        //get token from config
        //Environment environment = (Environment) ApplicationContextProvider.getApplicationContext().getBean("environment");
        setToken(environment.getProperty("api.vendor.token"));
    }

    public String getToken() {
        return token;
    }

    public void setToken(String token) {
        this.token = token;
    }
} 
```

**更新：**我发现[这个资源](http://learningviacode.blogspot.com/2012/04/property-files-and-value.html)突出了 的用法`@Value`，但我没有在我的应用程序中使用任何 XML 配置。

看起来这可能是我正在寻找的内容：[Loading properties in Spring 3.1 programmatically](https://stackoverflow.com/questions/14167332/loading-properties-in-spring-3-1-programmatically)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T15:02:42.990

您需要为此使用[@Value](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/Value.html)注释。但之前需要`<context:property-placeholder`在xml中声明。

有关详细信息，请参见[此处](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/PropertySource.html)。

另外，另一种方式：

```
@Inject
ApplicationContext context;
......
Enviroment env = context.getEnvironment(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-02-14T11:29:27.780

您可以使用`@Autowired`下面的 spring 注释，但请确保您使用`@Component`或类似的注释您的类。

```
@Autowired
Environment env; 
```

还要确保您的 bean 对扫描可见，即它应该`com.production`在您的情况下的包内。应该像这样启用组件扫描

```
<context:component-scan base-package="com.production"/> 
```

或者

```
@ComponentScan(basePackages = {"com.production"} ) 
```

# erlang - 在erlang中传输.txt文件中的数据

> ID：15388630
> 
> 赞同：-4
> 
> 时间：2013-03-13T14:51:09.093
> 
> 标签：erlang

我在二郎工作

现在，我有一个大问题

我想有一个表 mnesia 的日志，这个日志应该写在 excel 文件中

所以目标是将数据从表mnesia写入excel文件

我认为这与在这个论坛中找到的一些代码有关，最好的方法是编写 .txt 文件，然后将数据从 .txt 文件传输到 excel 文件

我在这个论坛的这个[链接](https://stackoverflow.com/questions/15344434/call-an-undefined-function-in-erlang)中找到了这个代码。

```
exporttxt()->
     F = fun(T) -> mnesia:foldl(fun(X,Acc) -> [X|Acc] end, [],T) end,
{atomic,L} = mnesia:transaction(F(user)),
file:write_file("test.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                 #user{id = F1,adress = F2,birthday = F3} <- L]). 
```

但是这段代码会产生错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:39:41.310

在你提到的主题中，我说我没有测试代码，当然有语法错误。这是运行的代码。

```
1> ok = mnesia:create_schema([node()]).
ok
2> rd(my_user,{firstname,lastname,age}).
my_user
3> ok =application:start(mnesia).
ok
4> {atomic,ok} = mnesia:create_table(my_user,[{attributes,record_info(fields,my_user)},{disc_copies,[node()]},{type,bag}]).
{atomic,ok}
5> Add_user = fun(Fn,Ln,Ag) ->
5>      F = fun() -> mnesia:write(my_user,#my_user{firstname=Fn,lastname=Ln,age=Ag},write) end,
5>      mnesia:activity(transaction,F)
5> end.
#Fun<erl_eval.18.82930912>
6> ok = Add_user("Georges","Boy",25).
ok
7> ok = Add_user("Joe","Armstrong",52).
ok
8> ok = Add_user("Pascal","Me",55).
ok
9> F = fun(T) -> mnesia:foldl(fun(X,Acc) -> [X|Acc] end, [],T) end.
#Fun<erl_eval.6.82930912>
10> {atomic,L} = mnesia:transaction(F,[my_user]).
{atomic,[#my_user{firstname = "Pascal",lastname = "Me",
                  age = 55},
         #my_user{firstname = "Joe",lastname = "Armstrong",age = 52},
         #my_user{firstname = "Georges",lastname = "Boy",age = 25}]}
11> ok = file:write_file("test.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || #my_user{firstname = F1, lastname = F2, age = F3} <- L]).
ok
12> 
```

您将在工作目录中有一个名为 test.txt 的文件，其中包含

```
"Pascal"    "Me"    55
"Joe"   "Armstrong" 52
"Georges"   "Boy"   25 
```

如果你用excel打开它，你会得到

![在此处输入图像描述](../Images/761b2ce541ff25ffb3441b668f4abbfb.png)

但这不是您应该直接使用的代码序列。

*   第 1 行应该发生在用于部署应用程序的代码中。
*   第 2 行是一个记录定义，对于 shell 理解下一行是必要的。它应该被模块或包含文件中的 -record(...) 替换。
*   第 3 行和第 4 行应该在更高级别主管之一的 init 函数中进行（通过一些测试来检查已经启动的应用程序、现有表......）
*   第 5 行应该在服务器的接口定义中
*   第 6,7,8 行应由某些客户端中的用户界面生成
*   最后一行 9,10,11 在另一个界面中（对于管理员？）。

**给 Lost_with_coding 和他的伙伴们的信息，**

如果我可以给你我的意见，你正在燃烧步骤。您应该专注于掌握 Erlang 语法、模式匹配和变量边界的概念......在您应该了解更高级的构造（例如列表和二进制推导式）之后。花时间查看错误消息并使用它们来解决简单的问题。Erlang 官方文档非常适合此目的。我总是在我的浏览器中打开它，有时当我寻找我不知道的功能时，我也会使用这个链接[http://erldocs.com/R15B/ 。](http://erldocs.com/R15B/)

接下来是高阶函数、错误处理、进程、并发、OTP……以及高效但不性感的 Erlang 工具（tv、appmon、调试器……）的使用。

我经常推荐它，但使用了不起的 Fred Hebert 的网站[http://learnyousomeerlang.com/](http://learnyousomeerlang.com/)并一步一步地遵循它，重写代码，而不是复制/粘贴；这真的值得付出努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:15:34.797

[正如所评论的，链接](https://stackoverflow.com/questions/15344434/call-an-undefined-function-in-erlang/15351931#15351931)本身清楚地解释了问题。如果你想要代码，那么就在这里。但是在直接跳入代码之前请先理解。

```
exporttxt()->
    F = fun() -> mnesia:foldl(fun(X,Acc) -> [X|Acc] end, [],user) end,
    {atomic,L} = mnesia:transaction(F),
    file:write_file("test.txt",[io_lib:format("~p\t~p\t~p~n",[F1,F2,F3]) || 
                     #user{id = F1,adress = F2,birthday = F3} <- L]). 
```

# cakephp - 从 url 抓取变量进行路由

> ID：15388632
> 
> 赞同：0
> 
> 时间：2013-03-13T14:51:17.450
> 
> 标签：cakephp

我想从我的 cakephp 应用程序中的重定向 URL 中获取一个变量，即

```
example.com/value -> example.com/controller/this:value 
```

显然，路由的其余部分应该保持不变。在 cakephp 中路由可以实现吗？

我使用 cakephp 1.3

我想首先针对数据库表中的字段检查 URL，如果它不存在，则通过路由传递它。我假设这将在应用程序控制器的 beforeFilter 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:36:54.837

AFAIK，您无法在 routes.php 之前访问数据库。

正如您所假设的那样，替代方法是将您的逻辑构建到 的`beforeFilter`中`AppController`，这应该没问题。

可能是你想要缓存的东西，因为它会在每个页面加载时命中。

# fortran - 带有子程序的 Fortran + OpenMP 代码突然停止

> ID：15388637
> 
> 赞同：1
> 
> 时间：2013-03-13T14:51:35.707
> 
> 标签：fortran, openmp

我有一段实验代码可以完美地与串行编译和执行配合使用。当我在 ifort（在 ubuntu 上）上使用 openmp 选项编译它时，编译进行得很好，但执行突然停止。代码如下：

```
!!!!!!!! module
module array
implicit none
  real(kind=8),allocatable :: y(:)
end module array

module nonarray
implicit none
 real(kind=8):: aa
end module nonarray

use nonarray; use array
implicit none
integer(kind=8):: iter,i
integer(kind=8),parameter:: id=1
real(kind=8),allocatable:: yt(:)

allocate(y(id)); allocate(yt(id)); y=0.d0; yt=0.d0

aa=4.d0 !!A SYSTEM PARAMETER

 !$OMP PARALLEL PRIVATE(y,yt,iter,i)
 !$OMP DO

   loop1: do iter=1,20 !! THE INITIAL CONDITION LOOP
    call random_number(y)!! RANDOM INITIALIZATION OF THE VARIABLE

      loop2: do i=1,10000  !! ITERATION OF THE SYSTEM
       call evolve(yt)
       y=yt
      enddo loop2     !! END OF SYSTEM ITERATION

     write(1,*)aa,yt

   enddo loop1 !!INITIAL CONDITION ITERATION DONE

 !$OMP ENDDO
 !$OMP END PARALLEL
stop
end

recursive subroutine evolve(yevl)
use nonarray; use array
implicit none
integer(kind=8),parameter:: id=1
real(kind=8):: xf
real(kind=8),intent(out):: yevl(id)

  xf=aa*y(1)*(1.d0-y(1))
  yevl(1)=xf

end subroutine evolve 
```

对于编译，我使用以下命令： *ifort -openmp -fpp test.f90*。

test.f90 是程序的名称。非常感谢任何建议或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:57:14.213

我不是 OMP 专家，但我认为如果子例程`evolve`应该在每个线程中看到不同的（私有）`y`，您应该将其直接从并行化代码块中传递给子例程，而不是从外部模块导入它：

```
module common
  use iso_fortran_env
  implicit none

  integer, parameter :: dp = real64
  real(dp) :: aa

contains

  subroutine evolve(y, yevl)
    implicit none
    real(dp), intent(in) :: y(:)
    real(dp), intent(out):: yevl(:)

    yevl(1) = aa * y(1) * (1.0_dp - y(1))

  end subroutine evolve

end module common

program test
  use common
  implicit none

  integer :: iter, i
  real(dp), allocatable :: yt(:), y(:)

  allocate(yt(1), y(1))
  y(:) = 0.0_dp
  yt(:) = 0.0_dp
  aa = 4.0_dp

  !$OMP PARALLEL DO PRIVATE(y,yt,iter,i)
  loop1: do iter = 1, 20
    call random_number(y)
    loop2: do i = 1, 10000
      call evolve(y, yt)
      y = yt
    end do loop2
    write(*,*) aa, yt
  end do loop1
  !$OMP END PARALLEL DO

end program test 
```

只是一个额外的警告：上面的代码适用于各种编译器（nagfor 5.3.1、gfortran 4.6.3、ifort 13.0.1），但不适用于 ifort 12.1.6。所以，虽然我看不到任何明显的问题，但我可能搞砸了一些事情。

# javascript - 如何在 DOM 中引用引用者

> ID：15388638
> 
> 赞同：0
> 
> 时间：2013-03-13T14:51:36.357
> 
> 标签：javascript, jquery, python, html, dom

我加载一个页面'A'并从该页面使用这样的表单操作，

```
<form method="post" enctype="multipart/form-data" action="/blah">
     <input id="browse4File" type="file" name="thefile" style="important:relative; width: 300px; top:75px; left:20px; "><br/>
     <input id="la" type="submit" name="SUBMIT" value="UPLOAD"  style="position:relative; font-size:14px; left:300px; top:70px;"/>
</form>
<div id="RetMessage" style="position:relative; left:30px; top:70px; color:#a22; font-size:14px;">This is some comment that needs to disappear</div> 
```

此表单调用另一个页面“B”，但它不会直接使用`window.open`. 我认为它被称为 CGI 请求，而不是 AJAX 请求。JavaScript 中的“B”页面需要访问“A”页面的内容才能进行修改。我尝试了很多方法来访问它：

```
document.parent.getElementById('RetMessage').innerHTML
document.referrer...
document.opener...
window.parent... 
```

我没有成功访问引用页面

家里有没有天才可以帮我解决这个问题。在我看来，引用页面没有在 DOM 中链接到被引用页面。有没有其他方法可以实现这一点

帮助！

丹尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:53:05.877

> 在我看来，引用页面未在 DOM 中链接到被引用页面

正确的。浏览器已离开该页面。它不会继续运行其 DOM 的内存消耗量副本。

> 有没有其他方法可以实现这一点

用于`XMLHttpRequest`加载该页面的源并对其进行解析。

显然，这将受到限制，因为 DOM 的 JS 操作不会自动运行，并且将适用同源策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:00:21.887

你不能，如果一个页面可以访问上一页的DOM，会有很多安全问题....然后，上一个......然后上一个....

但是，您可以在查询字符串中使用 retMessage 的内容调用页面 B，但请注意最终用户可以修改它。

# php - 带有索引和键的php array_push

> ID：15388641
> 
> 赞同：13
> 
> 时间：2013-03-13T14:51:43.200
> 
> 标签：php, array-push

我不确定我的标题中的条款是否正确，但我正在尝试做一个`array_push`像这样的 php

```
array_push($countryList, "US" => "United States"); 
```

但这给了我一个语法错误。

我这样做不正确吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T14:52:48.663

添加喜欢

```
$countryList["US"] = "United States"; 
```

将一个值推入数组会自动为其创建一个数字键。

将键值对添加到数组时，您已经拥有键，不需要为您创建一个。将键推入数组没有意义。您只能设置数组中特定键的值。

```
// no key
array_push($array, $value);
// same as:
$array[] = $value;

// key already known
$array[$key] = $value 
```

;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-17T06:28:47.473

尝试使用此数组合并方法：

```
$countryList = array_merge($countryList, array("US" => "United States")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T11:43:09.370

如果要在数组中使用键推送值，则可以使用以下函数：

```
function array_push_assoc($array, $key, $value){
    $array[$key] = $value;
    return $array;
}

Usage: $array= array_push_assoc($array, 'US', 'United States'); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-13T14:54:36.773

参考在线php文档...

"US" => "United States" 不是 var ！

# sql - 从另一台计算机连接到 SQL Server

> ID：15388651
> 
> 赞同：-2
> 
> 时间：2013-03-13T14:52:16.013
> 
> 标签：sql, sql-server

我有名为 razatube.com 的网站数据库服务器，但我的机器上没有服务器。如何从另一台机器连接到此服务器以获取数据库项目？任何帮助将不胜感激。PS：我通常不使用微软产品，所以如果答案直接盯着我的脸，请原谅我:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:06:45.527

您只需要数据库服务器的 IP 地址或 URL 以及 SQL Server 数据库的端口号、登录名和密码。当您拥有所有这些后，您可以访问[http://www.connectionstrings.com/](http://www.connectionstrings.com/)并获取所需的连接字符串并将其用于您的 Web 程序以连接您的 Web 服务器和数据库服务器。

# javascript - Javascript 全局范围分配

> ID：15388654
> 
> 赞同：5
> 
> 时间：2013-03-13T14:52:21.777
> 
> 标签：javascript, global-variables

我了解全局范围和 javascript 变量的问题及其普遍的不受欢迎程度；并且你到处都能找到它们。以下（在浏览器中）是等效的：

```
var foo = 3; // foo === 3, window.foo === 3
bazz = 10; // bazz === 10, window.bazz === 10 
```

在全局范围内使用 var 关键字声明变量与在代码中的任何位置不使用 var 声明变量相同：您的变量被分配给根（窗口）对象。

我经常看到的一种技术（例如设置谷歌分析）是这样的：

```
var _gaq = _gaq || []; 
```

...并且我遵循的推理是，如果 _gaq 已被声明，则使用它，如果不将其创建为数组。它允许粗心的编码不会覆盖已分配给全局变量 _gaq 的任何值。

我不明白为什么这会引发错误：

```
_gaq = _gaq || []; 
```

它们看起来和我一样：_gaq 应该取 _gaq 的值或者被初始化为一个数组。但它会引发参考错误 - 我的问题是：为什么它们不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T15:03:37.610

您永远无法**读取**尚未声明的变量，这就是您`_gaq || []`在最后一种情况下尝试使用的表达式。

在这种情况下

```
 _gaq = _gaq || []; 
```

`_qaq``_gaq || []`之前没有声明过，当评估右侧 ( ) 时，它会抛出错误。

以下是对这种情况下发生的事情的逐步解释：

赋值运算符在规范的[第 11.13.1 节](http://es5.github.com/#x11.13.1)中描述：

> 生产`AssignmentExpression : LeftHandSideExpression = AssignmentExpression`评估如下：
> 
> 1\. 让`lref`是评估的结果`LeftHandSideExpression`。
> 2\. 让`rref`是评估的结果`AssignmentExpression`。
> ...

`LeftHandSideExpression`是`_gaq`，`AssignmentExpression`是`_gqa || []`。

所以 first`_qaq`被评估，这导致一个[***不可解析的引用***](http://es5.github.com/#x8.7)，因为变量`_gaq`没有被声明。此评估**不会**引发错误。

然后`_gqa || []`进行评估。这是 a`LogicalORExpression`并且在[第 11.11 节](http://es5.github.com/#x11.11)中描述为`LogicalORExpression || LogicalANDExpression`。在这种情况下，`LogicalORExpression`，左侧，是`_gaq`并且`LogicalANDExpression`，右侧，是`[]`。
表达式计算如下：

> 1\. 让`lref`是评估的结果`LogicalORExpression`。
> 2.`lval`让`GetValue(lref)`。
> ...

我们已经知道这`lref`将是一个无法解决的引用，因为`_gaq`没有声明。所以让我们看看`GetValue`在做什么（在[第 8.7.1 节](http://es5.github.com/#x8.7.1)中定义，`V`是传递给的值`GetValue`）：

> 1.如果`Type(V)`不是`Reference`，返回`V`。
> 2\. 让`base`成为调用的结果`GetBase(V)`。
> 3\. 如果`IsUnresolvableReference(V)`，则抛出`ReferenceError`异常。
> ...

如您所见，`ReferenceError`在此过程的第三步中引发了错误，该错误又通过评估赋值的右侧来执行，这就是引发错误的地方。

**那么，为什么这不会发生`var _gaq = _gaq || [];`呢？**

这一行：

```
var _gaq = _gaq || []; 
```

实际上是

```
var _gaq;
_gaq = _gaq || []; 
```

因为一个叫做[提升*^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Scope_Cheatsheet#Hoisting)的东西。这意味着当`_gaq`被评估时，它**不会**导致无法*解析的引用*，而是带有 value 的引用`undefined`。

（如果变量`_gaq`已经声明（并且可能具有值），则`var _gaq`不会产生任何影响。）

* * *

如果您想`_gaq`从函数内部全局创建，请通过引用*显式*`window`执行：

```
window._gaq = window._gaq || []; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T14:55:54.643

如果`_gaq`右边的`=`之前没有用 声明过`var`，它会抛出一个引用错误。您试图引用一个不存在的变量。“魔术”仅适用于*分配*给不存在的变量。

这就像说`x = y + 1`; 问题不是不存在`x`，而是不存在`y`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T15:09:42.683

这将引发错误，因为在当前执行上下文的上下文链中找不到该变量。访问无法解析的变量将导致错误。

```
_gaq = _gaq || []; 
```

另一方面，这将尝试解析 _gac 尝试将其作为窗口对象的成员来查找，结果是全局上下文“持有人”对象。这种情况的不同之处在于它不会抛出错误，但是`window._gaq`会返回 undefined，因为在 window 对象中找不到该属性。

```
_gaq = window._gaq || []; 
```

因此，由于全局上下文对象是窗口（当谈到浏览器时），如果定义了 _gaq，这两个语句将具有相同的效果。当 _gaq 未定义时会注意到差异，并且使用窗口对象访问它可以具有不会出错的优点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T15:37:07.430

这里的基本概念是[提升](https://stackoverflow.com/questions/14299659/questions-on-javascript-hoisting)，在实践中通常很棘手。变量定义在函数作用域的顶部，而赋值仍然发生在定义它的地方。

这样`var _gaq = _gaq`，变量实际上是在执行分配的实际代码行*之前定义的。*这意味着当赋值发生时，变量已经在窗口范围内。如果没有 _gaq 前面的 var，则不会发生提升，因此在分配运行时 _gaq 还不存在，导致引用错误。

如果您想查看此操作，您可以使用以下命令检查 _gaq 变量何时添加到窗口对象：

```
function printIsPropOnWindow(propToCheck)
{
    for (prop in window)
    {
        if (prop == propToCheck)
        {
            console.warn('YES, prop ' + prop + ' was on the window object');
            return;
        }
    }
    console.warn('NO, prop ' + propToCheck + ' was NOT on the window object');
}

try {
    var _gaq = function() {
        printIsPropOnWindow("_gaq");
        return a;
    }();
} catch (ex) {
    printIsPropOnWindow("_gaq");
}
_gaq = "1";
printIsPropOnWindow("_gaq"); 
```

如果您按原样尝试一次，并且在删除 _gaq 之前使用 var 尝试一次，您将看到非常不同的结果，因为一个提升了 _gaq 而另一个没有提升。

# javascript - JayData 的基本数据存储

> ID：15388657
> 
> 赞同：1
> 
> 时间：2013-03-13T14:52:24.850
> 
> 标签：javascript, html, web, jaydata

我尝试实现我的第一个基于 JayData 的应用程序。我需要我的 HTML5/JavaScript 应用程序来存储复杂的数据客户端（主要是一对多关系）。

我的模型看起来像这样（对不起，如果名称不是很明确）：

![在此处输入图像描述](../Images/eb4533f602a36fe0006ea3f4011d1a01.png)

我试图用 JayData 翻译它，如果我错了，请纠正我：

```
$data.Entity.extend("Test", {
    Id: { type: "int", key: true, computed: true },
    Name: { type: "string", required: true, maxLength: 200 },
    Chapters: { type: Array, elementType: "Chapter", inverseProperty: "Test" }
});

$data.Entity.extend("Chapter", {
    Id: { type: "int", key: true, computed: true },
    Name: { type: String, required: true, maxLength: 200 },
    Test: {type: "Test", inverseProperty: "Chapters" },
    Checks: { type: Array, elementType: "Check", inverseProperty: "Chapter" }
});

$data.Entity.extend("Check", {
    Id: { type: "int", key: true, computed: true },
    Name: { type: String, required: true, maxLength: 200 },
    Status: { type: "int", required: true },
    Chapter: { type: Chapter, inverseProperty: "Checks" }
});

$data.EntityContext.extend("CheckDb", {
    Tests: { type: $data.EntitySet, elementType: Test },
    Chapters: { type: $data.EntitySet, elementType: Chapter },
    Checks: { type: $data.EntitySet, elementType: Check }
}); 
```

**编辑**

如何填写所有表格？首先，我尝试过：

```
var myDB = new CheckDb({ 
    name: 'local', databaseName: 'CheckDatabase'
});

myDB.onReady(function() {
    myDB.Tests.add({
        Name: "Test 1"
    });
    myDB.saveChanges();
}); 
```

但是，如果我想将`Chapters`and添加`Checks`到我的`Test`?

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:28:48.233

好的，我终于自己找到了：

```
myDB.onReady(function() {
    var check = new Check({Name: "Check 1", Status: 1});
    var chapter = new Chapter({Name: "Chapter 1"});
    chapter.Checks = new Array();
    chapter.Checks.push(check);

    var myTest = myDB.Tests.add({
        Name: "Test 1",
        Chapters: [chapter]
    });
    myDB.saveChanges();
}); 
```

这并不难:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:30:10.420

你的代码没问题。我用您的代码创建了一个 jsfiddle，它无需更改单个字符即可工作。包括 jQuery 1.8+，*然后是* [http://include.jaydata.org/jaydata.js](http://include.jaydata.org/jaydata.js)

# php - PHP转到替代

> ID：15388659
> 
> 赞同：0
> 
> 时间：2013-03-13T14:52:30.990
> 
> 标签：php, loops

我最近才开始使用 PHP 5.4，并注意到从 5.3 开始，您可以使用 goto 跳转到我用来从循环部分跳转的代码部分。我的问题是在阅读了这篇文章之后...... [PHP 中的 GOTO 是邪恶的吗？](https://stackoverflow.com/questions/1900017/is-goto-in-php-evil)在这种情况下这是不好的做法还是可行的解决方案？

```
<?php
while ($thisResult = mysql_fetch_array($result)) {      
    if($article && $i > 0) {
        goto comments;
    }

?>
    <h2>
        <a href="/plugins/<?=$thisResult['post_name']?>"><?=$thisResult['post_title']?></a>
        <span><?=$thisResult['post_modified_gmt']?></span>
    </h2>
    <p class="content">
        <?=nl2br($thisResult['post_content']);?>
    </p>
    <br />  
 <?php
    comments: 
        if ($article) {
?>
        <p class="comment"><?=$thisResult['comment_content']?>
<?php
        }

    $i++;
}

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:56:39.653

这被称为意大利面条式编程，是一种不好的做法。 [http://en.wikipedia.org/wiki/Spaghetti_code](http://en.wikipedia.org/wiki/Spaghetti_code)

这是您可以为您的代码做的事情

```
 <?php
    while ($thisResult = mysql_fetch_array($result)) {      
        if($article && $i > 0) {

        }
    else {
    ?>
        <h2>
            <a href="/plugins/<?php $thisResult['post_name']?>"><?php $thisResult['post_title']?></a>
            <span><?php $thisResult['post_modified_gmt']?></span>
        </h2>
        <p class="content">
            <?php nl2br($thisResult['post_content']);?>
        </p>
        <br />  
     <?php
    }
            if ($article) {
    ?>
            <p class="comment"><?php $thisResult['comment_content']?>
    <?php
            }

        $i++;
    }

     ?> 
```

一个简单的 else 解决了它。您可能可以使用开关盒或标志找到更优雅的解决方案。

问题是你的代码很难编辑和添加东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:57:44.820

这是在不使用的情况下重写相同的代码`goto`，向您展示没有它也可以随时完成

```
<?php
    while ($thisResult = mysql_fetch_array($result)):
        if(!$article || $i <= 0): ?>
            <h2>
                <a href="/plugins/<?php echo $thisResult['post_name']; ?>"><?php echo $thisResult['post_title']; ?></a>
                <span><?php echo $thisResult['post_modified_gmt']; ?></span>
            </h2>
            <p class="content">
                <?php echo nl2br($thisResult['post_content']); ?>
            </p>
            <br />
        <?php endif; ?>
        <?php if ($article): ?>
            <p class="comment"><?php echo $thisResult['comment_content']; ?></p>
        <?php endif;
        $i++;
    endwhile; 
```

我对控制结构使用了替代语法，并替换`<?=`为`<?php echo`它对我来说更具可读性。另外，其他评论者给了你一些关于标记和数据库函数分离等的好建议，所以请考虑一下

# android - 我可以部分隐藏布局吗？

> ID：15388661
> 
> 赞同：2
> 
> 时间：2013-03-13T14:52:32.887
> 
> 标签：android, android-layout, android-animation

因为我是 MS Paint 的高手，所以我将上传一张自描述我想要实现的目标的图片。

![在此处输入图像描述](../Images/24f57d7cf08eb90e70d57b4bd492ed4a.png)

我已经搜索过了，但我不确定我要搜索什么。我发现了一个叫做动画的东西。我设法从视图中旋转、淡化等元素（通过这个很棒的教程[http://www.vogella.com/articles/AndroidAnimation/article.html](http://www.vogella.com/articles/AndroidAnimation/article.html)）

但这对于我想要实现的目标有点限制，现在，我被卡住了，因为我不知道这在 android 开发中是如何真正调用的。试过像“滚动布局”这样的词，但我没有得到更好的结果。

你能给我一些建议吗？

谢谢你。

你可以看到一个活生生的例子，这个应用程序：[https ://play.google.com/store/apps/details?id=alexcrusher.just6weeks](https://play.google.com/store/apps/details?id=alexcrusher.just6weeks)

真挚地，

塞尔吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:02:42.117

您可以通过在事件 onClick() 上使用 setvisibility 功能手动执行此操作

或者

用这个

[动态添加两个视图，一个在另一个之下](https://stackoverflow.com/questions/9426036/dynamically-adding-two-views-one-below-other)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:12:42.383

使用类似这样的布局（如果您愿意，可以使用线性、相对或其他布局）：

```
<LinearLayout
    android:id="@+id/lty_parent">
    <LinearLayout
        android:id="@+id/lyt_first" />
    <LinearLayout 
        android:id="@+id/lyt_second"/>
</LinearLayout> 
```

然后在`onClick`任何你想用来控制它的方法中，设置`Visibility`介于`Visible`和`Gone.`

```
public void buttonClickListener(){

    ((Button) findViewById(R.id.your_button))
        .setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

        if (lyt_second.getVisibility() == View.GONE) {
            lyt_second.setVisibility(View.VISIBILE);
        } 
        else {
            lyt_second.setVisibility(View.GONE);            
        }
    }); 
```

如果您只想简单地出现/消失而没有什么花哨的，那很好。如果你想为它制作动画，事情会变得有点复杂，因为你需要使用负边距来让它看起来像这样增长和缩小：

我们使用与`onClick`之前相同的方法，但这次当我们单击它时，会启动`SlideAnimation`隐藏/可见视图的自定义。

```
@Override
public void onClick(View v) {
    SlideAnimation slideAnim = new SlideAnimation(lyt_second, time);
    lyt_second.startAnimation(slideAnim);
} 
```

的实现`SlideAnimation`基于一个通用`Animation`类，我们对其进行扩展然后覆盖转换。

```
public SlideAnimation(View view, int duration) {

        //Set the duration of the animation to the int we passed in
        setDuration(duration);

        //Set the view to be animated to the view we passed in
        viewToBeAnimated = view;

        //Get the Margin Parameters for the view so we can edit them
        viewMarginParams = (MarginLayoutParams) view.getLayoutParams();

        //If the view is VISIBLE, hide it after. If it's GONE, show it before we start.
        hideAfter = (view.getVisibility() == View.VISIBLE);

        //First off, start the margin at the bottom margin we've already set. 
        //You need your layout to have a negative margin for this to work correctly.
        marginStart = viewMarginParams.bottomMargin;

        //Decide if we're expanding or collapsing
        if (marginStart == 0){
            marginEnd = 0 - view.getHeight();
        }
        else {
            marginEnd = 0;
        }

        //Make sure the view is visible for our animation
        view.setVisibility(View.VISIBLE);
    }

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        super.applyTransformation(interpolatedTime, t);

        if (interpolatedTime < 1.0f) {

            // Setting the new bottom margin to the start of the margin 
            // plus the inbetween bits
            viewMarginParams.bottomMargin = marginStart
                    + (int) ((marginEnd - marginStart) * interpolatedTime);

            // Request the layout as it happens so we can see it redrawing
            viewToBeAnimated.requestLayout();

        // Make sure we have finished before we mess about with the rest of it
        } else if (!alreadyFinished) {
            viewMarginParams.bottomMargin = marginEnd;
            viewToBeAnimated.requestLayout();

            if (hideAfter) {
                viewToBeAnimated.setVisibility(View.GONE);
            }
            alreadyFinished = true;
        }
            hideAfter = false;
    }
} 
```

**编辑：**如果有人以前使用过此代码并发现如果您在动画完成之前多次单击启动动画的按钮，那么它会从那时起弄乱动画，导致它总是在之后隐藏视图动画完成。我错过了`hideAfter`代码底部附近布尔值的重置，现在添加它。

# html - 带有引导程序的弹出窗口

> ID：15388670
> 
> 赞同：0
> 
> 时间：2013-03-13T14:52:50.763
> 
> 标签：html, asp.net-mvc, twitter-bootstrap

如何使用 MVC 引导程序创建弹出窗口？

我有这个代码，当我点击“生成密码”调用一个函数（它在我的控制器管理员中）并返回一个字符串。如何在弹出窗口中显示字符串？

```
<div class="editor-field" title="User Password">
    <a class="btn btn-primary btn-small" href="#" 
    onclick="location.href='@Url.Action("GeneratePsw", "Admin", null)'; return false;">
        <i class="icon-lock icon-white"></i> Generate password
    </a> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:06:10.293

由于事件监听器比点击事件更好，我可能会做这样的事情：

```
<div class="editor-field" title="User Password">
    <a id="pwd_gen" class="btn btn-primary btn-small" href="#">
        <i class="icon-lock icon-white"></i> Generate password
    </a> 
</div>

$(function() { // document.ready shorthand
    $('#pwd_gen').click(function() {
        var myPwd = $(this).location.href='@Url.Action("GeneratePsw", "Admin", null);
        alert(myPwd); // or however you want to handle it with Bootstrap
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:23:21.177

```
$(document).on("click", ".open-ShowPwdDialogUser", function () { 

    var pwd="";

    $.get("@Url.Action("GeneratePsw", "Admin")",function(data){

        pwd=data;

        $(".modal-body #pwdUser").val(pwd);
        $('#1').modal('show');

    }); 

}) 
```

# html - 为什么CSS没有生效？

> ID：15388672
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:52:55.900
> 
> 标签：html, css

下一页是正文，包括一些项目符号文本。我需要项目符号文本与正文文本大小相同（更大）。

[http://www.a-quick-sale.co.uk/howitworks/](http://www.a-quick-sale.co.uk/howitworks/)

站点中有一个全局样式表（/global.css），我在其中添加了一个条目：

```
li { font-size: 14px;} 
```

但是没有应用该字体大小样式。我不想开始懒惰并直接将样式应用于页面上下文，但为什么我创建的全局样式没有被应用？

十多年来，我没有做过任何 CSS 或 HTML 的工作，所以请保持温和——对于任何掌握当前技能的人来说，答案可能是显而易见的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:55:04.693

因为`div#content li`它比单个类型选择器更具体，所以您需要在级联中包含更高的元素以覆盖特异性

特异性可以被认为是四个数字（0,0,0,0）

*   内联样式是第一 - 最高优先级
*   ID 选择器是第二个数字
*   第三类是伪类和属性选择器
*   类型选择器是第四个
*   通用选择器`*`的特异性为 0，任何东西都会覆盖它。

因此，仅指定`li`具有 (0,0,0,1) 的值 vs`div#content li`具有 (0,1,0,1) 的特异性，后者获胜。只需使用这个概念来提出更高的选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T14:54:55.487

在 global.css 文件中，有一个更具体的选择器`div#content li`已`font-size`在其中选择。与您的选择器一样具体，或者更具体地使其适用于整个内容区域。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T14:55:02.410

在同一个 global.css 中，有一个`div#content li { font-size: 12px;}`which 被应用，因为它更具体。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T14:56:10.507

尝试强制样式，如下所示：

```
li { font-size: 14px !important ;} 
```

因此它优先于该元素的现有样式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T14:56:33.690

如果您使用 Chrome 开发者工具 (F12)，您可以看到哪些样式被应用到每个元素，甚至可以看到样式在被划掉时被覆盖，这对于调试此类 CSS 问题非常有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T14:55:16.153

因为在同一个文件中，在第 208 行，您定义`div#content li {font-size: 12px;}`了哪个比`li`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T14:57:27.763

我应该说您需要将样式应用于链接本身，而不仅仅是`li`.

```
li a { font-size: 14px;} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-13T14:58:40.453

在你的 global.css 的 108 行，你有一个 CSS 规则`div#content li { font-size: 12px;}` 覆盖你的：`li { font-size: 14px;}`规则。

# php - drupal 6 迷你寻呼机主题

> ID：15388674
> 
> 赞同：0
> 
> 时间：2013-03-13T14:52:58.587
> 
> 标签：php, drupal-6, overriding, block, pager

我正在尝试为网站上的特定寻呼机设置主题，无论我尝试什么 id，它似乎都没有被接收到。这就是我现在用来为所有寻呼机设置主题的方法。

```
function Subtle_Hightlights_views_mini_pager($tags = array(), $limit = 10, $element = 0, $parameters = array(), $quantity = 9) {
  global $pager_page_array, $pager_total;

  // Calculate various markers within this pager piece:
  // Middle is used to "center" pages around the current page.
  $pager_middle = ceil($quantity / 2);
  // current is the page we are currently paged to
  $pager_current = $pager_page_array[$element] + 1;
  // max is the maximum page number
  $pager_max = $quantity;
  // End of marker calculations.

  $li_previous = theme('pager_previous', (isset($tags[1]) ? $tags[1] : t('')), $limit, $element, 1, $parameters);
  if (empty($li_previous)) {
    $li_previous = "";
  }

  $li_next = theme('pager_next', (isset($tags[3]) ? $tags[3] : t('')), $limit, $element, 1, $parameters);
  if (empty($li_next)) {
    $li_next = "";
  }

  if ($pager_total[$element] > 1) {
    $items[] = array(
      'class' => 'pager-previous-mini',
      'data' => $li_previous,
    );
 if ($pager_current == 9){
    $li_next = "";
 }
    $items[] = array(
      'class' => 'pager-current-mini',
      'data' => t('@current of @max', array('@current' => $pager_current, '@max' => $pager_max)),
    );

    $items[] = array(
      'class' => 'pager-next-mini',
      'data' => $li_next,
    );
    return theme('item_list', $items, NULL, 'ul', array('class' => 'pager'));
  }
} 
```

现在这适用于所有迷你寻呼机的主题，但是当我尝试应用视图的名称并像这样阻止时。

`function Subtle_Hightlights_views_mini_pager__news_items__block_2($tags = array(), $limit = ``10, $element = 0, $parameters = array(), $quantity = 9) {`

什么都不做，就好像代码不再存在一样。其他人尝试过这个并且它确实有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T16:52:09.803

关于如何覆盖寻呼机（迷你或完整）有一个很好的分步说明。我建议您做不同的唯一步骤是，当您获得*可用于覆盖`template.php`文件*中的视图分页器的主题函数名称列表时，只需使用此模块：[主题开发人员](http://drupal.org/project/devel_themer)。一旦启用，它将以更简单的方式提供建议。如果失败了，那么只需尝试文章的方法。

[Drupal 6 覆盖视图寻呼机主题功能](http://codekarate.com/blog/drupal-6-override-views-pager-theme-function)

# date - 使用批处理文件计算工作日

> ID：15388675
> 
> 赞同：1
> 
> 时间：2013-03-13T14:52:59.430
> 
> 标签：date, batch-file, command

我正在尝试编写一个非常简单的批处理文件。

如果今天是 03/13，我希望我的批处理文件输出：

“我会在 03/15 给你回电话”

因此需要日期并添加 2 个工作日。因此，如果是 03/15：

“我会在 03/19 给你回电话”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T17:36:39.013

下面的批处理文件做你想做的事：

```
@echo off
rem AddBusinessDays.bat date numOfDays
rem Antonio Perez Ayala

rem Convert the date to Julian Day Number + number of days
for /F "tokens=1-3 delims=/" %%a in ("%1") do (
   set /A mm=10%%a %% 100, dd=10%%b %% 100, yy=%%c
)
set /A a=mm-14, jd=(1461*(yy+4800+a/12))/4+(367*(mm-2-12*(a/12)))/12-(3*((yy+4900+a/12)/100))/4+dd-32075+2+%2, dow=jd%%7

rem Adjust Julian Day Number to avoid weekends
if %dow% lss 2 set /A jd+=2-dow

rem Convert Julian Day Number back to date
set /A l=jd+68569-2,n=(4*l)/146097,l=l-(146097*n+3)/4,i=(4000*(l+1))/1461001,l=l-(1461*i)/4+31,j=(80*l)/2447,dd=l-(2447*j)/80,l=j/11,mm=j+2-(12*l),yy=100*(n-49)+i+l

rem Assemble the result
if %dd% lss 10 set dd=0%dd%
if %mm% lss 10 set mm=0%mm%
set newDate=%mm%/%dd%/%yy%
echo %newDate% 
```

参考：[http ://www.hermetic.ch/cal_stud/jdn.htm#comp](http://www.hermetic.ch/cal_stud/jdn.htm#comp)

例如：

```
>echo %date%
03/13/2013

>AddBusinessDays.bat %date% 2
03/15/2013

>AddBusinessDays.bat %date% 3
03/18/2013

>AddBusinessDays.bat %date% 4
03/18/2013

>AddBusinessDays.bat %date% 5
03/18/2013

>AddBusinessDays.bat %date% 6
03/19/2013 
```

安东尼奥

PS - 是的，我知道这种方法不适用于世界上的*每个人*。好消息是我不是为他们所有人编写了这个解决方案，而是为 OP 编写了这个解决方案，尽管很容易为每台计算机修改它。例如，以前的程序在我的计算机上*不起作用*，因为我的语言环境是 DD/MM/YYYY，但是我可以在以前的程序的两行中互换`dd`，`mm`我很确定这个世界上的大多数人也有能力这样做！ **;-)**

嗨安东尼奥，就在今天，我发现您共享的代码提前 7 天以上都不能工作，我改变了一些东西，现在它可以工作了。

```
@echo off
rem AddBusinessDays.bat date numOfDays
rem adapted by Leonardo Contreras based on Antonio Perez Ayala with handling for more than 7 days

rem to convert Dow mm/dd/yyyy to mm/dd/yy
set mydate=%date:~4,2%/%date:~7,2%/%date:~10,4%

rem Convert the date to Julian Day Number + number of days
for /F "tokens=1-3 delims=/" %%a in ("%mydate%") do (
   set /A mm=10%%a %% 100, dd=10%%b %% 100, yy=%%c
)
rem dow_orig is based on a 0-6 days statrting on Monday
set /A a=mm-14, jd_orig = (1461*(yy+4800+a/12))/4+(367*(mm-2-12*(a/12)))/12-(3*((yy+4900+a/12)/100))/4+dd-32075, dow_orig=jd_orig%%7

rem calculate new julian's day
set /A numw = (dow_orig+%3)/5, njd = jd_orig+%3+numw*2, dow=(njd)%%7 

rem Adjust Julian Day Number to avoid weekends
if %dow% gtr 5 (set /A jd+=2 )

rem Convert Julian Day Number back to date
set /A l=njd+68569,n=(4*l)/146097,l=l-(146097*n+3)/4,i=(4000*(l+1))/1461001,l=l-(1461*i)/4+31,j=(80*l)/2447,dd=l-(2447*j)/80,l=j/11,mm=j+2-(12*l),yy=100*(n-49)+i+l

rem Assemble the result
if %dd% lss 10 set dd=0%dd%
if %mm% lss 10 set mm=0%mm%
set newDate=%mm%/%dd%/%yy%
echo %newDate% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:00:03.527

嗯，别着急，可以分批完成的。**`:)`** 这是我的一个实现（约 150 行代码）。

### 例子

[https://gist.github.com/DavidRuhmann/4666270](https://gist.github.com/DavidRuhmann/4666270)

### 用法

做这样的事情来适应周末。

```
if "%Date:~0,3%"=="Thu" call :DaysAhead 4
if "%Date:~0,3%"=="Fri" call :DaysAhead 4
if "%Date:~0,3%"=="Sat" call :DaysAhead 3
if "%Date:~0,3%"=="Sun" call :DaysAhead 2
if "%Date:~0,3%"=="Mon" call :DaysAhead 2
if "%Date:~0,3%"=="Tue" call :DaysAhead 2
if "%Date:~0,3%"=="Wed" call :DaysAhead 2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T16:07:34.663

使用 JScript 来计算日期，你就成功了。

```
@if (@X)==(@Y) @end /* (batch + jscript hybrid script init)

:: *** Batch script *****

@echo off
setlocal
for /f %%I in ('cscript /nologo /e:jscript "%~f0"') do (
    echo I will call you back on %%I
)

goto :EOF

:: *** JScript script *****/
var dow = new Date().getDay();
var days = (dow > 4) ? 9 - dow : (dow == 4 ? 4 : 2);
var d = new Date(new Date().getTime() + (1000 * 60 * 60 * 24) * days);
WScript.echo((d.getMonth() + 1) + '/' + d.getDate()); 
```

如果今天是星期四，脚本将返回下一个星期一。周五至周日，下周二。周一到周三，提前两天。而且您不必担心语言环境、闰年、闰年、农历周期等。

# c# - 在 C# 中测试泛型集合的引用相等性是一个愚蠢的想法吗？

> ID：15388681
> 
> 赞同：9
> 
> 时间：2013-03-13T14:53:13.370
> 
> 标签：c#, collections, equality, fluent-assertions

我正在实现一个不可变字典的特殊情况，为了方便实现`IEnumerable<KeyValuePair<Foo, Bar>>`. 通常会修改字典的操作应该返回一个新实例。

到现在为止还挺好。但是当我尝试为该类编写一个流利风格的单元测试时，我发现我尝试过的两个流利断言库（[应该](https://github.com/erichexter/Should)和[流利断言](http://fluentassertions.codeplex.com/)）都不支持对`NotBeSameAs()`实现的对象的操作`IEnumerable`——除非你先强制转换他们到`Object`.

当我第一次遇到这个问题时，我认为它只是框架中的一个洞，但是当我看到 Fluent Assertions 有同样的洞时，我认为（因为我是 C# 的新手）我可能遗漏了一些关于 C# 集合的概念性内容——当我提交问题时，Should 的作者也[暗示了这一点。](https://github.com/erichexter/Should/issues/1)

显然还有其他方法可以对此进行测试——cast to`Object`和 use `NotBeSameAs()`，just use`Object.ReferenceEquals`等等——但如果有充分的理由不这样做，我想知道那是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:24:48.573

An`IEnumerable<T>`不一定是真实的对象。`IEnumerable<T>`保证您可以枚举它的状态。在简单的情况下，您有一个像 a 这样的容器类`List<T>`，它已经物化了。然后你可以比较两个列表的地址。但是，您`IEnumerable<T>`也可能指向一系列命令，这些命令将在您枚举后执行。基本上是一个状态机：

```
public IEnumerable<int> GetInts()
{
    yield return 10;
    yield return 20;
    yield return 30;
} 
```

如果将其保存在变量中，则没有可比较的对象（一切都是对象，因此您可以...但没有意义）：

```
var x = GetInts(); 
```

您的比较仅适用于物化（`.ToList()`或`.ToArray()`）IEnumerables，因为这些状态机已被评估并且它们的结果已保存到集合中。所以是的，这个库实际上是有意义的，如果你*知道*你已经实现了 IEnumerables，你需要通过将它们转换为 Object 并“手动”调用这个对象上的所需函数来公开这些知识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:44:57.043

此外，Jon Skeet 建议看看 Ted Neward 在 2013 年 2 月发表的这篇 MSDN 文章：

[.NET 集合，第 2 部分：使用 C5](http://msdn.microsoft.com/en-us/magazine/jj891057.aspx)

> **不可变（受保护）集合**
> 
> 随着函数式概念和编程风格的兴起，很多重点已经转向不可变数据和不可变对象，这主要是因为不可变对象相对于并发和并行编程提供了很多好处，而且还因为许多开发人员发现不可变对象更容易理解和推理。因此，该概念的推论遵循不可变集合的概念——无论集合中的对象是否不可变，集合本身都是固定的，无法更改（添加或删除）集合中的元素。[（注意：您可以在bit.ly/12AXD78](http://bit.ly/12AXD78)的 MSDN 基类库 (BCL) 博客中查看 NuGet 上发布的不可变集合的预览 。）

It describes the use of an open source library of collection goodness called C5. Look at [http://itu.dk/research/c5/](http://itu.dk/research/c5/)

# dart - 如何防止 Dart、Dartium 中的默认光标样式

> ID：15388682
> 
> 赞同：2
> 
> 时间：2013-03-13T14:53:13.850
> 
> 标签：dart, dartium

我试图阻止在 Dart 中拖动的默认光标样式。在 onDragStart 方法中，我将光标样式设置为“移动”，然后在 onDragEnd 中恢复为默认值：

```
onDragStart(e) {
    prevCursor = placeholder.style.cursor;      
    placeholder.style.cursor = 'move';
}

onDragEnd(e) {
    placeholder.style.cursor = prevCursor;
} 
```

拖动时，光标仍默认为“不允许”样式。我已经尝试了很多方法来防止这种情况发生，例如在 onDragStart 方法中阻止默认为 onSelectStart，这被推荐作为 javascript 中 chromium 的修复，但在 Dart 中不起作用：

```
document.onSelectStart.listen( (e) {
    e.preventDefault();
    return false; 
}); 
```

我也尝试在 CSS 中设置默认值，这不是我想要实现的方式，但它仍然不起作用：

```
a:drag {
 cursor:move;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T18:15:29.153

嗯......只是一个猜测，但也许尝试看看您是否还需要处理 onDragEnter？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T15:16:09.230

如果它的处理程序取消了拖入事件等，则放置目标将光标图标设置为“不允许”。
为放置区域编写处理程序是最简单的解决方案。

为了规避这个问题，可以捕获鼠标按下事件、鼠标移动事件等并用于移动元素，就像我在这里所做的那样：[通过在 Dart 中拖动来移动元素](https://stackoverflow.com/questions/33360151/moving-elements-by-dragging-in-dart/35133073#35133073)

这家伙更详细地解释了相关问题：http: [//mereskin.github.io/dnd/](http://mereskin.github.io/dnd/)

有点无关紧要，但是对于某些浏览器，在拖动元素时仅使用默认光标图标可用，并且无法更改该默认值。

# sql - 从 SQL CE 中的关键字列中选择数据

> ID：15388683
> 
> 赞同：2
> 
> 时间：2013-03-13T14:53:15.283
> 
> 标签：sql, sql-server-ce

我正在尝试查询我的 SQL CE 以检索数据库元数据 - 目前我正在尝试使用以下方法获取索引数据：

`select * from information_schema.indexes`

但是，此查询将以编程方式运行 - 并且需要以正确的顺序返回所需的列。因此，我构建了以下选择语句：

`select Table_Name, Table_Schema, Index_Name, Clustered, Unique, Column_Name from information_schema.indexes`

但是，`Clustered`and`Unique`是保留关键字，不能在 select 语句中使用。这样做，我收到以下错误：`There was an error parsing the query. [Token line number: 1,Token line offset: 45, 0,Token in error: Clustered,,]`

我在这里发现了一个类似的问题（[在表或列的标题中使用 SQL 关键字](https://stackoverflow.com/questions/14921770/using-sql-keyword-in-title-of-table-or-column)），但该解决方案似乎不适用于 SQL CE（将列名包装在反引号中）。

有什么想法可以从 SQL CE 中的关键字列中实际选择数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T14:56:31.713

那篇文章是关于在 MySQL 中执行此操作的。SQL Server（SQL CE 是其衍生产品）使用方括号作为字段标识符，因此将字段括在方括号 [] 中。

```
select
    Table_Name,
    Table_Schema,
    Index_Name,
    [Clustered],
    [Unique],
    Column_Name
from information_schema.indexes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:56:34.707

用方括号括起来：

```
select [Table_Name], [Table_Schema], [Index_Name], [Clustered], [Unique], [Column_Name] from [information_schema].[indexes] 
```

# php - 登录系统不工作找不到verifylogin.php - 404错误

> ID：15388684
> 
> 赞同：0
> 
> 时间：2013-03-13T14:53:26.483
> 
> 标签：php, codeigniter, authentication

要创建登录系统，我一直在使用本教程 - www.codefactorycr.com/login-with-codeigniter-php.html。问题是当我将数据库中的用户名和密码输入表单并单击登录时，它会出现 404 错误页面并且找不到 verifylogin.php。我已经在下面包含了我的所有文件，但我仍然无法弄清楚为什么这没有登录到 home.php

自动加载.php

```
 Prototype:
        $autoload['libraries'] = array('database', 'session', 'xmlrpc');

        $autoload['libraries'] = array(); 
```

路由.php

```
 $route['login'] = "login";
          $route['news/update/(:num)'] = 'news/update/$1';
          $route['news/create'] = 'news/create';
          $route['news/(:any)'] = 'news/view/$1';
          $route['news'] = 'news';
          $route['(:any)'] = 'pages/view/$1';
          $route['default_controller'] = 'pages/view'; 
```

配置文件

```
 $config['base_url']   = 'http://shaek.co.uk/codeigniter';
          $config['index_page'] = 'index.php'; 
```

控制器 - login.php

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

               class Login extends CI_Controller {

                function __construct()
                {
                    parent::__construct();
                }

                 function index()
                 {
                    $this->load->helper(array('form'));
                    $this->load->view('login_view');
                 }

              }

           ?> 
```

控制器 - verifylogin.php

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

      class VerifyLogin extends CI_Controller {

           function __construct()
           {
        parent::__construct();
        $this->load->model('user','',TRUE);
              }

          function index()
                   {
         //This method will have the credentials validation
             $this->load->library('form_validation');

            $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
               $this->form_validation->set_rules('password', 'Password',      'trim|required|xss_clean|callback_check_database');

         if($this->form_validation->run() == FALSE)
              {
       //Field validation failed.  User redirected to login page
          $this->load->view('login_view');
          }
             else
             {
              //Go to private area
             redirect('home_view', 'refresh');
            }

            }

            function check_database($password)
            {
                //Field validation succeeded.  Validate against database
                  $username = $this->input->post('username');

               //query the database
                    $result = $this->user->login($username, $password);

                if($result)
         {
                 $sess_array = array();
                foreach($result as $row)
       {
               $sess_array = array(
               'id' => $row->id,
                username' => $row->username
     );
              $this->session->set_userdata('logged_in', $sess_array);
            }
              return TRUE;
           }
              else
           {
                $this->form_validation->set_message('check_database', 'Invalid username or password');
             return false;
           }
          }
         }
       ?> 
```

控制器 home.php

```
 <?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
       session_start(); //we need to call PHP's session object to access it through CI
       class Home extends CI_Controller {

              function __construct()
            {
              parent::__construct();
            }

              function index()
            {
              if($this->session->userdata('logged_in'))
            {
            $session_data = $this->session->userdata('logged_in');
            $data['username'] = $session_data['username'];
            $this->load->view('home_view', $data);
           }
               else
              {
                 //If no session, redirect to login page
                   redirect('login', 'refresh');
               }
             }

                 function logout()
             {
                $this->session->unset_userdata('logged_in');
                session_destroy();
                redirect('home', 'refresh');
              }

           }

        ?> 
```

模型 - users.php

```
 <?php
                 Class User extends CI_Model
              {
                function login($username, $password)
              {
                 $this -> db -> select('id, username, password');
                 $this -> db -> from('users1');
                 $this -> db -> where('username', $username);
                 $this -> db -> where('password', MD5($password));
                 $this -> db -> limit(1);

                 $query = $this -> db -> get();

                 if($query -> num_rows() == 1)
           {
                    return $query->result();
                  }
             else
              {
                    return false;
            }
        }
     }
   ?> 
```

视图 - home_view.php

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">
      <head>
      <title>Simple Login with CodeIgniter - Private Area</title>
      </head>
        <body>
          <h1>Home</h1>
               <h2>Welcome <?php echo $username; ?>!</h2>
                <a href="home/logout">Logout</a>
            </body>
             </html> 
```

意见 - login_view.php

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
   <title>Simple Login with CodeIgniter</title>
   </head>
   <body>
      <h1>Simple Login with CodeIgniter</h1>
     <?php echo validation_errors(); ?>
      <?php echo form_open('verifylogin'); ?>
      <label for="username">Username:</label>
       <input type="text" size="20" id="username" name="username"/>
       <br/>
     <label for="password">Password:</label>
     <input type="password" size="20" id="passowrd" name="password"/>
      <br/>
       <input type="submit" value="Login"/>
            </form>
         </body>
         </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:08:56.927

在相关说明中，您还必须将模型类名称更改为“用户”而不是“用户”。

* * *

**正如 Jaspal 所说，没有必要：**

您有控制器/类名称问题。

如果您将控制器命名为“verifylogin.php”，则必须将类命名为**相同的名称，且****首字母**大写。您将班级命名为“VerifyLogin”。它必须是“验证登录”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:06:31.713

首先，

```
$route['(:any)'] = 'pages/view/$1'; 
//((:any) will match a segment containing any character.) 
//and throw it to pages/view/$1 
```

我建议将其更改为

```
$route['pages/view/(:any)'] = 'pages/view/$1'; 
```

[http://shaek.co.uk/codeigniter/index.php/verifylogin](http://shaek.co.uk/codeigniter/index.php/verifylogin)本身就是一个 404 页面

此外，[http](http://shaek.co.uk/codeigniter/index.php/pages/view/) ://shaek.co.uk/codeigniter/index.php/pages/view/无法访问。内部路由导致请求被传递到页面控制器视图操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:49:31.777

将“ `Controller - verifylogin.php`”类名从VerifyLogin 更改为Verifylogin，看看它是否有效。

似乎无法找到控制器名称，可能是由于类名。

你的另一件事在`verifylogin.php`用户名之前错过了一个“'”。更改自：

```
 $sess_array = array(
               'id' => $row->id,
                username' => $row->username

); 
```

至：

```
 $sess_array = array(
               'id' => $row->id,
                'username' => $row->username

); 
```

# asp.net-mvc-3 - MVC3 ASP用视图上的空白替换空值

> ID：15388693
> 
> 赞同：0
> 
> 时间：2013-03-13T14:53:47.517
> 
> 标签：asp.net-mvc-3, if-statement, replace, null

如果 POnumber 为空，我有以下视图返回一些文本。我认为我需要而不是 if(Model.Invoice.PONumber == null) 是一个检查机制（可能是多个 if 语句），它将检查 LineNumber、Description、UnitOfMeasure、QtyOrdered 字段以及它们是否为空它将用 N/A 或空白空间替换它，但它仍然允许用户查看其余可用信息。你有什么建议吗？我是 MVC 的新手，任何帮助都将不胜感激。

提前感谢您的时间和帮助，鲍比

```
<div class="contentWrapper2">
    <div class="content2">
        <div class="clr lfl w100">
            <h1>Invoice Detail</h1>
            <div class="return-btn">
                <a class="btn btnStyleC btn-back-invoice" href="@Url.Action("InvoiceHistory", "Account")">
                    Back to Invoice List</a>
            </div>
        </div>
        @if (Model.ErpError.Length > 0)
        {
            <div class="clr lfl w100 error">
                @Html.Raw(Model.ErpError)
            </div>
        }
        else
        {
            if(Model.Invoice.PONumber == null)
            {
                <div class="lfl w100 clr messaging">
                    <p>No information available at the moment for current invoice.
                       Please call our sales department for further assistance.
                    </p>
                </div>   
            }
            else
            {
                <div class="clr lfl w100">
                    <div class="order-number-date">
                        <table>
                            <tr>
                                <th class="col-1">
                                    <h3>Invoice #:</h3>
                                </th>
                                <td class="col-2">
                                    <h3>@Model.Invoice.InvoiceNumber</h3>
                                </td>
                            </tr>
                            <tr>
                                <th class="col-1">
                                    <h3>Invoice Date:</h3>
                                </th>
                                <td class="col-2">
                                    <h3>@Model.Invoice.InvoiceDate.ToShortDateString()</h3>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="order-number-date">
                        <table>
                            <tr>
                                <th class="col-1">
                                    <h3>Order #:</h3>
                                </th>
                                <td class="col-2">
                                    <h3>@Model.Invoice.OrderNumber</h3>
                                </td>
                            </tr>
                            <tr>
                                <th class="col-1">
                                    <h3>PO #:</h3>
                                </th>
                                <td class="col-2">
                                    <h3>@Model.Invoice.PONumber</h3>
                                </td>
                            </tr>
                            <tr>
                                <th class="col-1">
                                    <h3>Due Date:</h3>
                                </th>
                                <td class="col-2">
                                    <h3>@Model.Invoice.DueDate.ToShortDateString()</h3>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            <div class="clr lfl w100">
                <div class="bill-ship">
                    <table>
                        <tr>
                            <th>
                                <h4>Billing Information</h4>
                            </th>
                        </tr>
                        <tr>
                            <td>@Model.Invoice.BTDisplayName
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <@Html.Raw(Model.Invoice.BTAddress1)
                            </td>
                        </tr>
                        @if (!string.IsNullOrEmpty(Model.Invoice.BTAddress2))
                        {
                            <tr>
                                <td>@Html.Raw(Model.Invoice.BTAddress2)
                                </td>
                            </tr>
                        }
                        <tr>
                            <td>@Html.CityCommaStateZip(Model.Invoice.BTCity, Model.Invoice.BTState, Model.Invoice.BTZip)</td>
                        </tr>
                        <tr>
                            <td>@Model.Invoice.BTCountry
                            </td>
                        </tr>
                        <tr>
                            <td>@Model.Invoice.BTPhone1</td>
                        </tr>
                        <tr>
                            <td>@Model.Invoice.BTEmail
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            if (Model.Invoice.InvoiceLines.Count > 0)
            {
                <div class="clr lfl w100 line-item-detail">
                    <table class="info-tbl">
                        <tr>
                            <th class="vid-item">Item #</th>
                            <th class="vid-desc">Description</th>
                            <th class="vid-um">
                                U/M
                            </th>
                            <th class="vid-qty">
                                Qty
                            </th>
                            <th class="vid-ship">
                                Ship Date
                            </th>
                            @if (Model.ShowPackslip)
                            {
                                <th class="vid-pack">Pack Slip</th>
                            }
                            <th class="vid-unit">Unit Price</th>
                            <th class="vid-ext">Ext Price</th>
                        </tr>
                        @foreach (var invoiceLine in Model.Invoice.InvoiceLines)
                        {
                            <tr>
                                <td class="vid-line">@invoiceLine.LineNumber</td>
                                <td class="vid-desc">@invoiceLine.Description</td>
                                <td class="vid-um">@invoiceLine.UnitOfMeasure</td>
                                <td class="vid-qty">@invoiceLine.QtyOrdered</td>
                                <td class="vid-ship">
                                @if (invoiceLine.ShipDate.ToShortDateString() == "1/1/0001")
                                {
                                }
                                else
                                {
                                    @invoiceLine.ShipDate.ToShortDateString()
                                }
                                </td>
                                @if (Model.ShowPackslip)
                                {
                                    <td class="vid-pack">
                                    <a href="@Url.RouteUrl(new { controller = "Account", action = "ShipmentDetail", PackSlipNum = invoiceLine.PackSlip })">@invoiceLine.PackSlip</a>
                                    </td>
                                }
                                <td class="vid-unit">@invoiceLine.UnitPrice.ToCurrency()
                                </td>
                                <td class="vid-ext">@invoiceLine.ExtendedPrice.ToCurrency()
                                </td>
                            </tr>
                        }
                    </table>
                </div>
            }
            <div class="clr lfl w100">
                <table class="tbl-total">
                    <tr class="subtotal">
                        <th class="col-1">Subtotal</th>
                        <td class="col-2">@Model.Invoice.OrderSubTotal.ToCurrency()
                        </td>
                    </tr>
                    @if (Model.Invoice.DollarOffOrder > 0)
                    {
                        <tr>
                            <th class="col-1">Order Discount</th>
                            <td class="col-2">@Model.Invoice.DollarOffOrder.ToCurrency()</td>
                        </tr>
                    }
                    @if (Model.Invoice.ShippingAndHandling > 0)
                    {
                        <tr>
                            <th class="col-1">Shipping</th>
                            <td class="col-2">@Model.Invoice.ShippingAndHandling.ToCurrency()
                            </td>
                        </tr>
                    }
                    @if (Model.Invoice.MiscCharges > 0)
                    {
                        <tr>
                            <th class="col-1">Misc. Charges</th>
                            <td class="col-2">@Model.Invoice.MiscCharges.ToCurrency()</td>
                        </tr>
                    }
                    <tr>
                        <th class="col-1">Sales Tax</th>
                        <td class="col-2">@Model.Invoice.TotalTax.ToCurrency()</td>
                    </tr>
                    <tr>
                        <th class="col-1">Invoice Total</th>
                        <td class="col-2">@Model.Invoice.InvoiceTotal.ToCurrency()</td>
                    </tr>
                </table>
            </div>
            <div class="clr lfl w100">
        <a class="btn btnStyleB btn-print" href="javascript:window.print();">Print</a>
        </div>
    }
}
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:59:23.140

您可以创建一个名为“nullcheck.cshtml”的模板，例如：

```
@if (ViewBag.ValueToCheck == null) {
  <div class="lfl w100 clr messaging">
     <p>
         No information available at the moment for @(ViewBag.Field).
        Please call our sales department for further assistance.
     </p>
  </div>  
}
else {
   @Html.Partial(ViewBag.TargetTemplate, Model)
} 
```

然后你从你的主视图调用它：

```
@{
    ViewBag.TargetTemplate = "okModel";
    ViewBag.Field = "P.O.Number";
    ViewBag.ValueToCheck = Model.Invoice.PONumber; 
    Html.RenderPartial("nullCheck", Model, ViewBag);
} 
```

okModel.cshtml 应该是模板的一部分，当值不为空时您将显示...

我自己没有测试过这个，但它应该会给你一些想法......如果出现问题，请联系我 XD

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:32:16.527

这似乎是您应该在控制器中处理的事情。

```
public ActionResult YourControllerAction()
{
    var myViewModel = SomeService.GetMyViewModel();
    if (myViewModel.Invoice.PONumber == null)
    {
        myViewModel.Invoice.PONumber = "N/A";
    }

    //etc
} 
```

这使您的视图更清晰（我的个人喜好）

但是在视图中，您可以像这样简单地使用[空合并运算符](http://msdn.microsoft.com/en-GB/library/ms173224.aspx)：

```
@Model.Invoice.PONumber ?? "NA" 
```

# python - SessionAuthentication 在 Tastypie 中是否适用于 HTTP POST？

> ID：15388694
> 
> 赞同：6
> 
> 时间：2013-03-13T14:53:48.513
> 
> 标签：python, django, rest, tastypie

我可以使用 GET 来使用 SessionAuthentication 和 Tastypie，而无需设置除`content-type`to之外的任何标头`application/json`。然而，即使 Header 中的 Cookie 具有会话 ID，HTTP POST 也会失败。它以 401 AuthorizationHeader 失败，但与授权无关。将 SessionAuthentication 更改为 BasicAuthentication 并传递用户名/密码也可以。

有没有人让 SessionAuthentication 与 Tastypie 一起使用 POST？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T17:53:39.837

是的，我已经让它工作了。您需要做的就是传递 csfr 令牌：

> ## 会话认证
> 
> 此身份验证方案使用内置的 Django 会话来检查用户是否已登录。这在托管 API 的同一站点上由 Javascript 使用时通常很有用。
> 
> 它要求用户已登录并具有活动会话。**他们还必须有一个有效的 CSRF 令牌**。

这就是您在 jQuery 中执行此操作的方式：

```
// sending a csrftoken with every ajax request
function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
$.ajaxSetup({
    crossDomain: false, // obviates need for sameOrigin test
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type)) {
            xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken'));
        }
    }
});

$.ajax({
    type: "POST",
    // ... 
```

注意说的部分`$.cookie('csrftoken')`。它从 Django 设置的 cookie 中获取 csrf 令牌。

### 更新：

我在 Django 没有在 Firefox 和 Opera 上设置 cookie 时遇到了一些问题。将模板标签放在`{% csrf_token %}`模板中可以解决这个问题。正确的解决方案可能是使用 decorator `ensure_csrf_cookie()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-23T00:01:42.610

以下是丹的回答的一些补充。如果有问题，请纠正我，我自己还是有点困惑。

在继续之前，请阅读[Django 中的 CSRF 保护](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)。**仔细阅读。**您需要将 cookie 中的令牌放入 header`X-CSRFToken`中。如果 cookie 是 Httponly，这将不起作用，也就是说，如果您设置`CSRF-COOKIE-HTTPONLY = True`了`settings.py`. 然后您必须将 cookie 嵌入到文档中，这当然会产生更多漏洞并减少使用`Httponly`.

据我所知，如果 cookie 不是`Httponly`，**jQuery 会自动设置 X-CSRFToken**。如果我错了，请纠正我，但我刚刚花了几个小时玩它，这就是我一直得到的。这让我想知道，Django 文档中的建议有什么意义？它是 jQuery 中的新功能吗？

进一步讨论：

Tastypie 禁用 CSRF 保护，但会话身份验证除外，它在`authentication.py`. 您必须同时传递 cookie `csrftoken`cookie 和标头`X-CSRFToken`才能进行身份验证。（这是 Tastypie 的要求。）假设域相同，浏览器将传递 cookie。除非 csrftoken cookie 是 Httponly，否则 JQuery 将为您传递标头。相反，如果 cookie 是 Httponly，我什至无法在`$.ajaxSetup{beforeSend...`. `null`如果`csrftoken`cookie 是 Httponly ，jQuery 会自动将 X-CSRFToken 设置为。至少我能够将标头 X-CS_RFToken 设置为我想要的，所以我知道我正确地传递了这个值。我正在使用 jQuery 1.10。

If you are using `curl` for testing, you have to pass two cookies (`sessionid` and `csrftoken`), set the headers `X-CSRFToken` and, if the protocol is HTTPS, also set the `Referrer`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T16:25:32.743

我在tastepie 源代码中找到了这个。基本上意味着 SessionAuthentication 不支持 HTTP POST。

```
class SessionAuthentication(Authentication):
    """
    An authentication mechanism that piggy-backs on Django sessions.

    This is useful when the API is talking to Javascript on the same site.
    Relies on the user being logged in through the standard Django login
    setup.

    Requires a valid CSRF token.
    """
    def is_authenticated(self, request, **kwargs):
        """
        Checks to make sure the user is logged in & has a Django session.
        """
        # Cargo-culted from Django 1.3/1.4's ``django/middleware/csrf.py``.
        # We can't just use what's there, since the return values will be
        # wrong.
        # We also can't risk accessing ``request.POST``, which will break with
        # the serialized bodies.
        if request.method in ('GET', 'HEAD', 'OPTIONS', 'TRACE'):
            return request.user.is_authenticated() 
```

所以在这里回答我自己的问题，但如果有人可以更好地解释它并提出一个好的方法来做到这一点，那也很棒。

编辑

我目前正在使用来自[https://github.com/amezcua/TastyPie-DjangoCookie-Auth/blob/master/DjangoCookieAuth.py](https://github.com/amezcua/TastyPie-DjangoCookie-Auth/blob/master/DjangoCookieAuth.py)的解决方法，它基本上是一个自定义身份验证方案，它`session_id`从 cookie 中获取并检查后端是否存在已通过身份验证。可能不是最完整的证明解决方案，但效果很好。

# ios - 结合 drawRect 和 KeyPathAnimation 来取消闪烁

> ID：15388700
> 
> 赞同：0
> 
> 时间：2013-03-13T14:54:05.630
> 
> 标签：ios, core-animation

我正在 UIView 的 drawRect 方法中绘制路径。在某些情况下，路径会消失，我想对此进行动画处理 - 我们称之为路径的“取消绘制”。

对于动画，我正在创建一个 CAShapeLayer，给它 myPath，然后设置一个 CABasicAnimation (animationWithKeyPath:@"strokeEnd")。

我的问题是如何从 drawRect 中绘制的内容切换到动画。我必须从 drawRect 绘制的内容中删除 myPath 并调用 setNeedsDisplay - 否则动画将被从 drawRect 绘制的路径隐藏。

```
- (void)animationDidStart:(CAAnimation *)theAnimation
  {
    myPath = nil;
    [self setNeedsDisplay];
  } 
```

但是这样我看到了我的路径，然后快速闪烁，没有路径，然后路径再次由 CoreAnimation 渲染并且很好地未绘制。

我可以更好地避免闪烁吗？

**背景** 这是我设置动画的方式：

```
- (void) startAnimation
{
  pathLayer.path = myPath.CGPath;
  pathLayer.hidden = false;

  CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
  pathAnimation.duration = 1; 
  pathAnimation.fromValue = [NSNumber numberWithFloat:1.0f];
  pathAnimation.toValue = [NSNumber numberWithFloat:0.0f];
  pathAnimation.fillMode = kCAFillModeForwards;
  pathAnimation.removedOnCompletion = NO;
  pathAnimation.delegate = self;
  [pathLayer addAnimation:pathAnimation forKey:@"strokeEnd"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T16:44:20.540

我相信闪烁的原因是您调用时运行的隐式动画

```
pathLayer.hidden = NO; 
```

默认情况下，独立的 CALayers 会隐式地为大多数属性更改设置动画。如果您禁用 hidden 属性的隐式动画，它应该运行而不会闪烁（无论您使用`drawRect:`还是`drawLayer:inContext:`）：

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
pathLayer.hidden = NO;
[CATransaction commit]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T13:46:04.843

这是我的解决方案：不要将 UIKits drawRect 与 CAAnimation 结合使用，而是绘制到 CALayer 中：

```
- (void)drawLayer:(CALayer *)theLayer inContext:(CGContextRef)theContext 
```

这允许从绘图到动画的无闪烁切换。

# php - Doctrine 多行分组计数

> ID：15388704
> 
> 赞同：0
> 
> 时间：2013-03-13T14:54:11.227
> 
> 标签：php, count, doctrine, symfony-1.4, doctrine-1.2

我有以下关于学说的查询：

```
$q = Doctrine_Query::create()
    ->select("q.id, q.user_id, count(ua.id) as quantity")
    ->from("question q")
    ->leftJoin("q.Answers a")
    ->leftJoin("a.UserAnswers ua")
    ->groupBy("ua.user_id"); 
```

生成的 SQL 为：

```
SELECT q.id AS q__id, q.user_id AS q__user_id, COUNT(u.id) AS u__0 FROM question q LEFT JOIN answer a ON q.id = a.question_id LEFT JOIN user_answer u ON a.id = u.answer_id GROUP BY u.user_id 
```

这个查询在 MySQL 中的结果是这样的：

```
+-------+------------+------+
+ q__id + q__user_id + u__0 +
+-------+------------+------+
+     1 +          1 +    0 +
+-------+------------+------+
+    26 +          6 +    2 +
+-------+------------+------+
+    26 +          6 +    1 +
+-------+------------+------+ 
```

使用 Doctrine，有没有办法获得“u__0”列值？

我试过了：

```
$questions = $q->execute();
echo (count($questions)); 
```

但结果只有 2 行（不是 3 行）。

如何获取“u__0”列值？(0, 2, 1) 使用教义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:26:44.340

您必须为每个结果循环并检索`quantity`值：

```
$q = Doctrine_Query::create()
    ->select("q.id as id, q.user_id as question_user_id, ua.user_id as answer_user_id, count(ua.id) as quantity")
    ->from("question q")
    ->leftJoin("q.Answers a")
    ->leftJoin("a.UserAnswers ua")
    ->groupBy("answer_user_id");

$results = $q->execute(array(), Doctrine_Core::HYDRATE_ARRAY);
foreach ($results as $result)
{
    var_dump($result['quantity']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:07:23.323

我将 SQL 查询更改为：

```
$q = Doctrine_Query::create()
    ->select("q.id, q.user_id, a.id, count(ua.id) as quantity")
    ->from("Answer a")
    ->leftJoin("a.Question q")
    ->leftJoin("a.UserAnswers ua")
    ->groupBy("ua.user_id"); 
```

它有效；）

# solrnet - Solrnet日期转换问题

> ID：15388705
> 
> 赞同：1
> 
> 时间：2013-03-13T14:54:12.710
> 
> 标签：solrnet

我们正在使用 SolrNet API 来索引和搜索一组包含三个日期字段的文档：Date1、Date2、Date3。C# 类对三个字段有以下定义

```
public DateTime? Date1{ get; set; }
public DateTime? Date2{ get; set; }
public DateTime? Date3{ get; set; } 
```

Solr 架构定义如下：

```
<field name="Date1" type="date" indexed="false" stored="true" required="false"/>
<field name="Date2" type="date" indexed="false" stored="true" required="false"/>
<field name="Date3" type="date" indexed="false" stored="true" required="false"/> 
```

当我们使用已经被索引的文档执行查询时，我们会在 SolrAdmin 界面中返回以下值：

```
<date name="Date1">0001-01-01T00:00:00Z</date>
<date name="Date2">2010-04-10T08:21:18.281Z</date>
<date name="Date3">2007-12-01T03:09:41.093Z</date> 
```

但是当我们检查与 SolrQueryResults 一起返回的 C# 对象时，它显示以下内容：

```
Date1 : {01-01-0001 12:00:00 AM}
Date2 : null
Date3 : null 
```

第一个日期表示为预期的日期时间最小值。但是，当这些日期是 UTC 格式的有效日期时，为什么其他日期会获得空值？

将日期字段存储为 Solr 中的字符串并使用复制字段将其存储为 solr 日期格式并将此字段用于日期范围查询是否更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:29:10.123

检查您是否在 SolrNet 查询结果中返回 Date2 和 Date3 字段。例如，确保您没有`&fl`通过 SolrNet QueryOptions 限制带有参数的字段，`Fields`或者在过滤字段且不包含这些字段的 Solr 实例上使用 requestHandler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-11T14:28:53.720

请尝试以下代码，希望对您有所帮助

```
using SolrNet;

    public List<ISolrQuery> BuildFitlerQuery(DateTime StartDate, DateTime EndDate, string FiledName)
    {
        var filter = new List<ISolrQuery>();

        if (EndDate.Year != 1)// Will create query when end date value is also send
            filter.Add(new SolrQueryByRange<DateTime?>(FiledName, StartDate, EndDate));
        else
            filter.Add(new SolrQueryByRange<DateTime?>(FiledName, StartDate, null));
        return filter;

    } 
```

# android - 无法正确控制 PullToRefresh

> ID：15388706
> 
> 赞同：0
> 
> 时间：2013-03-13T14:54:14.907
> 
> 标签：android, listview

我正在使用 ListView 和 PullToRefresh 编写自己的 Android 应用程序以刷新此列表。添加下拉刷新后，我遇到了这个错误：当我拉动列表以刷新某些项目时，单击了一些项目。我该如何解决？这是我的 MainActivity 的代码：

```
package ua.iqw.mistinfo.news;

import android.os.Bundle;

import android.view.Menu;
import android.view.MotionEvent;
import android.view.View.OnTouchListener;

import java.util.ArrayList;
import java.util.concurrent.ExecutionException;

import ua.iqw.mistinfo.news.trace.ExceptionHandler;
import ua.iqw.mistinfo.news.PullToRefreshListView;
import ua.iqw.mistinfo.news.PullToRefreshListView.OnRefreshListener;

import android.app.ListActivity;
import android.app.ProgressDialog;

import android.content.Intent;
import android.util.Log;

import android.view.View;

  import android.widget.ListView;
  import android.widget.Toast;

public class MainActivity extends ListActivity implements OnTouchListener{

ArrayList<ListData> news;
AsyncLoad asyncNews;
RefreshList refresh;
ProgressDialog spinner;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // ExceptionHandler.register(this,
    // "http://errors.bazalt-cms.com/add-android/");

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final PullToRefreshListView listView = (PullToRefreshListView)findViewById(android.R.id.list);
    spinner = new ProgressDialog(MainActivity.this);
    spinner.setMessage(getString(R.string.loading));
    spinner.show();

    Network net = new Network(this);
    if (net.isNetworkAvailable() == true) {
        Log.d("NETWORK", "Network is available!");
    } else {

        Toast.makeText(this, getString(R.string.connect_error),
                Toast.LENGTH_LONG).show();
    }

    asyncNews = new AsyncLoad(MainActivity.this);
    asyncNews.execute();

    listView.setOnRefreshListener(new OnRefreshListener() {
        @Override
        public void onRefresh() {

            refresh = new RefreshList(MainActivity.this, listView);
            refresh.execute();
        }

    });

}

public void onResume() {
    super.onResume();

    if (spinner.isShowing()) {
        spinner.dismiss();
    }

}

public void onListItemClick(ListView parent, View v, int position, long id) {//listener for click on listView item

    try {
        news = asyncNews.get();
    } catch (InterruptedException e) {

        e.printStackTrace();
    } catch (ExecutionException e) {

        e.printStackTrace();
    }
    ListData ld = news.get(position);

    spinner.setMessage(getString(R.string.loading));
    spinner.show();

    Intent intent = new Intent(MainActivity.this, DetailsActivity.class);
    intent.putExtra("id", ld.id);

    startActivity(intent);

}
} 
```

是否可以为 onListItemClick 设置一些超时？还是可以通过其他方式解决？请帮我！PS对不起我的英语）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:05:28.017

```
import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.view.animation.LinearInterpolator;
import android.view.animation.RotateAnimation;
import android.widget.AbsListView;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.AbsListView.OnScrollListener;

public class PullToRefreshListView extends ListView implements OnScrollListener {

    private static final int TAP_TO_REFRESH = 1;
    private static final int PULL_TO_REFRESH = 2;
    private static final int RELEASE_TO_REFRESH = 3;
    private static final int REFRESHING = 4;

    private static final String TAG = "PullToRefreshListView";

    private OnRefreshListener mOnRefreshListener;

    /**
     * Listener that will receive notifications every time the list scrolls.
     */
    private OnScrollListener mOnScrollListener;
    private LayoutInflater mInflater;

    private RelativeLayout mRefreshView;
    private TextView mRefreshViewText;
    private ImageView mRefreshViewImage;
    private ProgressBar mRefreshViewProgress;
    private TextView mRefreshViewLastUpdated;

    private int mCurrentScrollState;
    private int mRefreshState;

    private RotateAnimation mFlipAnimation;
    private RotateAnimation mReverseFlipAnimation;

    private int mRefreshViewHeight;
    private int mRefreshOriginalTopPadding;
    private int mLastMotionY;

    private boolean mBounceHack;

    public PullToRefreshListView(Context context) {
        super(context);
        init(context);
    }

    public PullToRefreshListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public PullToRefreshListView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context);
    }

    private void init(Context context) {
        // Load all of the animations we need in code rather than through XML
        mFlipAnimation = new RotateAnimation(0, -180,
                RotateAnimation.RELATIVE_TO_SELF, 0.5f,
                RotateAnimation.RELATIVE_TO_SELF, 0.5f);
        mFlipAnimation.setInterpolator(new LinearInterpolator());
        mFlipAnimation.setDuration(250);
        mFlipAnimation.setFillAfter(true);
        mReverseFlipAnimation = new RotateAnimation(-180, 0,
                RotateAnimation.RELATIVE_TO_SELF, 0.5f,
                RotateAnimation.RELATIVE_TO_SELF, 0.5f);
        mReverseFlipAnimation.setInterpolator(new LinearInterpolator());
        mReverseFlipAnimation.setDuration(250);
        mReverseFlipAnimation.setFillAfter(true);

        mInflater = (LayoutInflater) context.getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);

        mRefreshView = (RelativeLayout) mInflater.inflate(
                R.layout.pull_to_refresh_header, this, false);
        mRefreshViewText =
            (TextView) mRefreshView.findViewById(R.id.pull_to_refresh_text);
        mRefreshViewImage =
            (ImageView) mRefreshView.findViewById(R.id.pull_to_refresh_image);
        mRefreshViewProgress =
            (ProgressBar) mRefreshView.findViewById(R.id.pull_to_refresh_progress);
        mRefreshViewLastUpdated =
            (TextView) mRefreshView.findViewById(R.id.pull_to_refresh_updated_at);

        mRefreshViewImage.setMinimumHeight(50);
        mRefreshView.setOnClickListener(new OnClickRefreshListener());
        mRefreshOriginalTopPadding = mRefreshView.getPaddingTop();

        mRefreshState = TAP_TO_REFRESH;

        addHeaderView(mRefreshView);

        super.setOnScrollListener(this);

        measureView(mRefreshView);
        mRefreshViewHeight = mRefreshView.getMeasuredHeight();
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();
        setSelection(1);
    }

    @Override
    public void setAdapter(ListAdapter adapter) {
        super.setAdapter(adapter);

        setSelection(1);
    }

    /**
     * Set the listener that will receive notifications every time the list
     * scrolls.
     * 
     * @param l The scroll listener. 
     */
    @Override
    public void setOnScrollListener(AbsListView.OnScrollListener l) {
        mOnScrollListener = l;
    }

    /**
     * Register a callback to be invoked when this list should be refreshed.
     * 
     * @param onRefreshListener The callback to run.
     */
    public void setOnRefreshListener(OnRefreshListener onRefreshListener) {
        mOnRefreshListener = onRefreshListener;
    }

    /**
     * Set a text to represent when the list was last updated. 
     * @param lastUpdated Last updated at.
     */
    public void setLastUpdated(CharSequence lastUpdated) {
        if (lastUpdated != null) {
            mRefreshViewLastUpdated.setVisibility(View.VISIBLE);
            mRefreshViewLastUpdated.setText(lastUpdated);
        } else {
            mRefreshViewLastUpdated.setVisibility(View.GONE);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        final int y = (int) event.getY();
        mBounceHack = false;

        switch (event.getAction()) {
            case MotionEvent.ACTION_UP:
                if (!isVerticalScrollBarEnabled()) {
                    setVerticalScrollBarEnabled(true);
                }
                if (getFirstVisiblePosition() == 0 && mRefreshState != REFRESHING) {
                    if ((mRefreshView.getBottom() >= mRefreshViewHeight
                            || mRefreshView.getTop() >= 0)
                            && mRefreshState == RELEASE_TO_REFRESH) {
                        // Initiate the refresh
                        mRefreshState = REFRESHING;
                        prepareForRefresh();
                        onRefresh();
                    } else if (mRefreshView.getBottom() < mRefreshViewHeight
                            || mRefreshView.getTop() <= 0) {
                        // Abort refresh and scroll down below the refresh view
                        resetHeader();
                        setSelection(1);
                    }
                }
                break;
            case MotionEvent.ACTION_DOWN:
                mLastMotionY = y;
                break;
            case MotionEvent.ACTION_MOVE:
                applyHeaderPadding(event);
                break;
        }
        return super.onTouchEvent(event);
    }

    private void applyHeaderPadding(MotionEvent ev) {
        // getHistorySize has been available since API 1
        int pointerCount = ev.getHistorySize();

        for (int p = 0; p < pointerCount; p++) {
            if (mRefreshState == RELEASE_TO_REFRESH) {
                if (isVerticalFadingEdgeEnabled()) {
                    setVerticalScrollBarEnabled(false);
                }

                int historicalY = (int) ev.getHistoricalY(p);

                // Calculate the padding to apply, we divide by 1.7 to
                // simulate a more resistant effect during pull.
                int topPadding = (int) (((historicalY - mLastMotionY)
                        - mRefreshViewHeight) / 1.7);

                mRefreshView.setPadding(
                        mRefreshView.getPaddingLeft(),
                        topPadding,
                        mRefreshView.getPaddingRight(),
                        mRefreshView.getPaddingBottom());
            }
        }
    }

    /**
     * Sets the header padding back to original size.
     */
    private void resetHeaderPadding() {
        mRefreshView.setPadding(
                mRefreshView.getPaddingLeft(),
                mRefreshOriginalTopPadding,
                mRefreshView.getPaddingRight(),
                mRefreshView.getPaddingBottom());
    }

    /**
     * Resets the header to the original state.
     */
    private void resetHeader() {
        if (mRefreshState != TAP_TO_REFRESH) {
            mRefreshState = TAP_TO_REFRESH;

            resetHeaderPadding();

            // Set refresh view text to the pull label
            mRefreshViewText.setText(R.string.pull_to_refresh_tap_label);
            // Replace refresh drawable with arrow drawable
            mRefreshViewImage.setImageResource(R.drawable.ic_pulltorefresh_arrow);
            // Clear the full rotation animation
            mRefreshViewImage.clearAnimation();
            // Hide progress bar and arrow.
            mRefreshViewImage.setVisibility(View.GONE);
            mRefreshViewProgress.setVisibility(View.GONE);
        }
    }

    private void measureView(View child) {
        ViewGroup.LayoutParams p = child.getLayoutParams();
        if (p == null) {
            p = new ViewGroup.LayoutParams(
                    ViewGroup.LayoutParams.FILL_PARENT,
                    ViewGroup.LayoutParams.WRAP_CONTENT);
        }

        int childWidthSpec = ViewGroup.getChildMeasureSpec(0,
                0 + 0, p.width);
        int lpHeight = p.height;
        int childHeightSpec;
        if (lpHeight > 0) {
            childHeightSpec = MeasureSpec.makeMeasureSpec(lpHeight, MeasureSpec.EXACTLY);
        } else {
            childHeightSpec = MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED);
        }
        child.measure(childWidthSpec, childHeightSpec);
    }

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
            int visibleItemCount, int totalItemCount) {
        // When the refresh view is completely visible, change the text to say
        // "Release to refresh..." and flip the arrow drawable.
        if (mCurrentScrollState == SCROLL_STATE_TOUCH_SCROLL
                && mRefreshState != REFRESHING) {
            if (firstVisibleItem == 0) {
                mRefreshViewImage.setVisibility(View.VISIBLE);
                if ((mRefreshView.getBottom() >= mRefreshViewHeight + 20
                        || mRefreshView.getTop() >= 0)
                        && mRefreshState != RELEASE_TO_REFRESH) {
                    mRefreshViewText.setText(R.string.pull_to_refresh_release_label);
                    mRefreshViewImage.clearAnimation();
                    mRefreshViewImage.startAnimation(mFlipAnimation);
                    mRefreshState = RELEASE_TO_REFRESH;
                } else if (mRefreshView.getBottom() < mRefreshViewHeight + 20
                        && mRefreshState != PULL_TO_REFRESH) {
                    mRefreshViewText.setText(R.string.pull_to_refresh_pull_label);
                    if (mRefreshState != TAP_TO_REFRESH) {
                        mRefreshViewImage.clearAnimation();
                        mRefreshViewImage.startAnimation(mReverseFlipAnimation);
                    }
                    mRefreshState = PULL_TO_REFRESH;
                }
            } else {
                mRefreshViewImage.setVisibility(View.GONE);
                resetHeader();
            }
        } else if (mCurrentScrollState == SCROLL_STATE_FLING
                && firstVisibleItem == 0
                && mRefreshState != REFRESHING) {
            setSelection(1);
            mBounceHack = true;
        } else if (mBounceHack && mCurrentScrollState == SCROLL_STATE_FLING) {
            setSelection(1);
        }

        if (mOnScrollListener != null) {
            mOnScrollListener.onScroll(view, firstVisibleItem,
                    visibleItemCount, totalItemCount);
        }
    }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
        mCurrentScrollState = scrollState;

        if (mCurrentScrollState == SCROLL_STATE_IDLE) {
            mBounceHack = false;
        }

        if (mOnScrollListener != null) {
            mOnScrollListener.onScrollStateChanged(view, scrollState);
        }
    }

    public void prepareForRefresh() {
        resetHeaderPadding();

        mRefreshViewImage.setVisibility(View.GONE);
        // We need this hack, otherwise it will keep the previous drawable.
        mRefreshViewImage.setImageDrawable(null);
        mRefreshViewProgress.setVisibility(View.VISIBLE);

        // Set refresh view text to the refreshing label
        mRefreshViewText.setText(R.string.pull_to_refresh_refreshing_label);

        mRefreshState = REFRESHING;
    }

    public void onRefresh() {
        Log.d(TAG, "onRefresh");

        if (mOnRefreshListener != null) {
            mOnRefreshListener.onRefresh();
        }
    }

    /**
     * Resets the list to a normal state after a refresh.
     * @param lastUpdated Last updated at.
     */
    public void onRefreshComplete(CharSequence lastUpdated) {
        setLastUpdated(lastUpdated);
        onRefreshComplete();
    }

    /**
     * Resets the list to a normal state after a refresh.
     */
    public void onRefreshComplete() {        
        Log.d(TAG, "onRefreshComplete");

        resetHeader();

        // If refresh view is visible when loading completes, scroll down to
        // the next item.
        if (mRefreshView.getBottom() > 0) {
            invalidateViews();
            setSelection(1);
        }
    }

    /**
     * Invoked when the refresh view is clicked on. This is mainly used when
     * there's only a few items in the list and it's not possible to drag the
     * list.
     */
    private class OnClickRefreshListener implements OnClickListener {

        @Override
        public void onClick(View v) {
            if (mRefreshState != REFRESHING) {
                prepareForRefresh();
                onRefresh();
            }
        }

    }

    /**
     * Interface definition for a callback to be invoked when list should be
     * refreshed.
     */
    public interface OnRefreshListener {
        /**
         * Called when the list should be refreshed.
         * <p>
         * A call to {@link PullToRefreshListView #onRefreshComplete()} is
         * expected to indicate that the refresh has completed.
         */
        public void onRefresh();
    }
} 
```

试试看

# ios - 当 iPhone 连接到计算机时，iOS 访问临时私人文件

> ID：15388708
> 
> 赞同：0
> 
> 时间：2013-03-13T14:54:17.340
> 
> 标签：ios, security, pdf, filesystems, password-protection

我有一个 iOS 应用程序正在下载受密码保护的 PDF 文件。我使用一些代码来使用密码解锁 PDF，但我必须将其临时保存到磁盘以便在屏幕上的视图中显示（我不能仅通过将其存储在内存中来显示它）。

我的问题：将设备连接到计算机时，该临时文件是否可见？是否有任何私有应用程序命名空间使应用程序文件对计算机不可见？

我注意到如果我将 iPhone 连接到 Windows 机器，除了图像之外，我看不到任何文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:05:55.043

有关完整的详细信息，请参阅[文件系统编程指南](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)。

您希望应用程序私有的文件应该放在 中`~/Library`，在您的情况下我可能会使用`~/Library/Caches`，因为它明确没有备份，这似乎是缓存信息（即，如果需要，您可以再次下载它）。`~/tmp`如果这实际上只是一个临时文件，可以在您的应用程序未运行时随时安全删除（您仍然负责实际删除这些文件），您也可以使用。

请注意，这不是一个强大的保护，因为越狱设备可以读取和复制这些数据，但它确实会阻止它出现在文件共享中。

# r - 使用 fread、data.table 包读取 strand (+, -) 列

> ID：15388714
> 
> 赞同：6
> 
> 时间：2013-03-13T14:54:32.907
> 
> 标签：r, data.table

我正在尝试使用 fread 将基因组比对读入`data.table`R 中。这是比对文件的快照：

```
USI-EAS28:1:100:1786:674#0/1    +   1_maternal  68326824      CTCAATTATACTGAAAGAAACACAATATATCATA    IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   
USI-EAS28:1:100:1786:940#0/1    +   16_maternal 11407541    CTATTAGTGACCTGCTGTGGGACCTTGGGATGGT  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   
USI-EAS28:1:100:1786:705#0/1    +   1_maternal  63849584    CTGAGGGTTTGTGTCAGGAAGGGGTGTGGAATTG  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   0:T>C
USI-EAS28:1:100:1786:1168#0/1   -   5_maternal  31381649    GCATCATTCATGAAACAATTTTCAAGAGAGGAAA  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   
 USI-EAS28:1:100:1787:582#0/1   +   10_maternal 54587781    CTACAATAATAATAGGGGACTAAAACACCCCACT  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   
 USI-EAS28:1:100:1787:62#0/1    +   10_maternal 70390747     CTATTTGCTACTGAATTGTTAATTTTAAAACAGT IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   
 USI-EAS28:1:100:1788:573#0/1   -   7_maternal  92583837     CACTGTCAACATTAGACAGACCAATGAGACAAAG IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   
 USI-EAS28:1:100:1788:854#0/1   +   7_maternal  129611206    GTTTGTTTTTTTTTTTGAGATGGAGTCTCATTTT IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   32:C>T
 USI-EAS28:1:100:1788:185#0/1   -   13_maternal 23694307    CAAACAAACTCAAAATGGACTATCGACTGAAAAA  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   
 USI-EAS28:1:100:1788:1339#0/1  -   13_maternal 33699510    TTAACTCTAGTTTTTAGGGATTGCAAATTAGACG  IIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII  0   0:A>G 
```

第二列报告读取对齐的链（`+`正向，`-`反向）。不幸的是，fread 试图将这一列读入一个整数，并将该值始终赋值为 0。就此而言，这一列应该被读取为一个字符，甚至是一个布尔值。试图玩弄争论`sep`并`sep2`没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:11:05.273

感谢您的报告。现在在 v1.8.9 中修复了提交 849。`+`现在`-`被读取为字符，添加了测试。

顺便说一句，我们还打算添加`colClasses`，以便您可以覆盖`fread`检测到的列类型。相关的待办事项列表`fread`位于源文件的顶部：
[https ://r-forge.r-project.org/scm/viewvc.php/pkg/src/fread.c?view=markup&root=datatable](https://r-forge.r-project.org/scm/viewvc.php/pkg/src/fread.c?view=markup&root=datatable)

# c++ - 使用 Xcode 4.6 在 Mac OS X Lion (10.8.2) 上安装 OpenCV

> ID：15388715
> 
> 赞同：0
> 
> 时间：2013-03-13T14:54:33.753
> 
> 标签：c++, xcode, opencv, compilation, cmake

在我的机器上安装 OpenCV 的步骤（MBP、15"、2.5 GHz i7、16GB RAM、AMD Radeon HD 6770M、128GB SSD）

1.  我安装 git 命令行工具
2.  已安装最新的 macports 版本
3.  安装了cmake`$ sudo port install cmake`
4.  opencv的克隆repo `$ git clone git://code.opencv.org/opencv.git`
5.  repo 在我的机器上后，我更改为这个目录并创建一个新目录

    `$ cd opencv $ mkdir build $ cd build`

6.  然后我跑`$ cmake -G “Unix Makefiles” ../`

7.  之后我得到

    `--检查模块'libdc1394-2'--未找到包'libdc1394-2'--检查模块'libdc1394'--未找到包'libdc1394'--检查模块'libv4l1'--包'libv4l1 ' 未找到 -- 寻找 linux/videodev.h -- 寻找 linux/videodev.h - 未找到 -- 寻找 linux/videodev2.h -- 寻找 linux/videodev2.h - 未找到 -- 寻找 sys /videoio.h -- 寻找 sys/videoio.h - 未找到 -- 检查模块 'libavcodec' -- 未找到包 'libavcodec' -- 检查模块 'libavformat' -- 未找到包 'libavformat' --检查模块“libavutil”——未找到包“libavutil”——检查模块“libswscale”——包“libswscale”未找到 -- 正在寻找 libavformat/avformat.h -- 正在寻找 libavformat/avformat.h - 未找到 -- 正在寻找 ffmpeg/avformat.h -- 正在寻找 ffmpeg/avformat.h - 未找到 -- 找不到 PythonLibs ：发现不合适的版本“2.7.2”，但需要准确的版本“2.7.3”（找到/usr/lib/libpython2.7.dylib） Traceback（最近一次调用最后）：文件“”，第 1 行，在 ImportError : 没有名为 numpy.distutils 的模块

    ## -- 找到 apache ant 1.8.2: /usr/bin/ant

    -- OpenCV 2.4.9 的一般配置 ======================================

    ## -- 版本控制：2.4.4-642-g061dd7e

    -- 平台: -- 主机: Darwin 12.2.0 i386 -- CMake: 2.8.10 -- CMake 生成器: Unix Makefiles -- CMake 构建工具: /usr/bin/make

    ## -- 配置：发布

    -- C/C++: -- 构建为动态库？: 是 -- C++ 编译器: /usr/bin/c++ (ver 4.2.0) -- C++ 标志（发布）: -W -Werror=return-type -Werror =non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign -promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -O3 -DNDEBUG -DNDEBUG——C++ 标志（调试）：-W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit -self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -g -O0 -DDEBUG -D_DEBUG -ggdb3 -- C 编译器：/usr/bin/cc -- C 标志（发布）：-W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit -self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -O3 -DNDEBUG -DNDEBUG -- C 标志（调试）：-W -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit -self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -fno-omit-frame-pointer -msse -msse2 -msse3 -g -O0 -DDEBUG -D_DEBUG -ggdb3 -- 链接器标志（发布）：
    -- 链接器标志（调试）：

    ## -- 预编译头文件：否

    -- OpenCV 模块： -- 待构建：核心 imgproc flann highgui features2d calib3d ml video objdetect contrib nonfree photo legacy gpu java softcascade 拼接 ts videostab -- 已禁用：world -- 依赖项禁用：-

    ## -- 不可用：androidcamera ocl python

    -- GUI: -- QT 4.x: 否 -- Cocoa: 是

    ## -- OpenGL 支持：否

    -- 媒体 I/O： -- ZLib：构建（版本 1.2.7） -- JPEG：构建（版本 90） -- WEBP：构建（版本 0.2.1） -- PNG：构建（版本 1.5.12） - - TIFF：构建（版本 42 - 4.0.2） - JPEG 2000：构建（版本 1.900.1）

    ## -- OpenEXR：构建（版本 1.7.1）

    -- 视频 I/O： -- DC1394 1.x：否 -- DC1394 2.x：否 -- FFMPEG：是 -- 编解码器：是（版本未知） -- 格式：是（版本未知） -- 实用程序： YES (ver Unknown) -- swscale: YES (ver Unknown) -- gentoo-style: YES -- OpenNI: NO -- OpenNI PrimeSensor Modules: NO -- PvAPI: NO -- GigEVisionSDK: NO -- QuickTime: NO -- QTKit：是的

    ## -- V4L/V4L2：无/无

    -- 其他第三方库: -- 使用 IPP: NO -- 使用 Eigen: NO -- 使用 TBB: NO -- 使用 OpenMP: NO -- 使用 GCD YES -- 使用并发 NO -- 使用 C=: NO - - 使用 Cuda：否

    ## -- 使用 OpenCL：否

    - Python：

    ## -- 解释器：/opt/local/bin/python2 (ver 2.7.3)

    -- Java: -- ant: /usr/bin/ant (ver 1.8.2) -- JNI: /System/Library/Frameworks/JavaVM.framework/Headers /System/Library/Frameworks/JavaVM.framework/Headers /System /Library/Frameworks/JavaVM.framework/Headers

    ## -- Java 测试：是

    -- 文档： -- 构建文档： 否 -- 狮身人面像： 否

    ## -- PdfLaTeX 编译器：否

    -- 测试和样品： -- 测试：是 -- 性能测试：是

    ## -- C/C++ 示例：否

    ## -- 安装路径：/usr/local

    -- cvconfig.h 在：/Users/miralemcebic/Desktop/ocv/opencv/build

    ## -------------------------------------------------- -----------------

    -- 配置完成 -- 生成完成 -- 构建文件已写入：/Users/miralemcebic/Desktop/ocv/opencv/build`

8.  比我跑`$ cmake -G “Unix Makefiles” ../`

9.  现在出现了错误，最后我得到了 30%

    `ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation) make[2]: *** [lib/libopencv_highgui.2.4.9.dylib] Error 1 make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2 make: *** [all] Error 2`

这是什么问题？我也有 Python 2.7 和 Python >3

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:56:45.450

安装[macports](http://macports.org)

```
$ sudo port selfupdate
$ sudo port install opencv 
```

等待。

# c# - Windows服务中的Gmail smtp身份验证问题

> ID：15388720
> 
> 赞同：0
> 
> 时间：2013-03-13T14:54:42.223
> 
> 标签：c#, authentication, windows-services, smtp, gmail

我使用以下代码通过 Windows 服务发送电子邮件没有问题：

```
 public bool Send()
    {
        bool RetSt = false;

        try
        {
            MailMessage mail = new MailMessage();
            mail.From = new MailAddress(_from);
            for (int i = 0; i < _to.Count; i++)
                mail.To.Add(_to[i]);
            mail.Subject = _subject;
            mail.Body = _body;
            for (int i = 0; i < _attachmentList.Count; i++)
                mail.Attachments.Add(_attachmentList[i]);

            SmtpClient smtp = new SmtpClient();
            smtp.Host = _smtpHost;
            smtp.Port = _smtpPort;
            smtp.Credentials = new NetworkCredential(_userName, _password);
            smtp.EnableSsl = true;
            smtp.Send(mail);

            for (int i = 0; i < _attachmentList.Count; i++)
                _ms[i].Dispose();

            RetSt = true;
        }
        catch (Exception ex)
        {
            Service.WriteEventLog(ex.ToString(), EventLogEntryType.Error);
        }

        return RetSt;
    } 
```

服务开始后约 2-3 天，由于 Gmail 的身份验证问题，服务停止发送电子邮件。这是该问题的例外：

> “System.Net.Mail.SmtpException：SMTP 服务器需要安全连接或客户端未通过身份验证。服务器响应为：5.5.1 需要身份验证。了解更多信息，请访问 System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode , String response) 在 System.Net.Mail.MailCommand.Send(SmtpConnection conn, Byte[] command, MailAddress from, Boolean allowUnicode) 在 System.Net.Mail.SmtpTransport.SendMail(MailAddress sender, MailAddressCollection 收件人, String deliveryNotify, Boolean allowUnicode, SmtpFailedRecipientException& exception) at System.Net.Mail.SmtpClient.Send(MailMessage message) at MaintenanceService.Email.Send() in c:\Users\aydogan.ersoz\Desktop\maintenanceservice\trunk\MaintenanceServiceTest\Email.cs:line 75"

当我控制 Gmail 帐户时，Gmail 会要求验证码。我正确输入了验证码，我的 Windows 服务再次开始正常工作。

我尝试了谷歌的[解决方案](https://accounts.google.com/DisplayUnlockCaptcha)，但没有奏效。

我应该怎么做才能禁用验证码保护，或者是否可以在不从网络输入验证码字符串的情况下以编程方式发送电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:01:18.097

GMail 对垃圾邮件过滤有许多安全考虑，例如您每小时发送的电子邮件数量，您的电子邮件被收件人标记为垃圾邮件......

如果您打算使用 GMail 进行批量邮寄，您会遇到很多问题。在这种情况下使用您自己的邮件服务器。

# javascript - 调用 javascript 函数后进行下载

> ID：15388721
> 
> 赞同：0
> 
> 时间：2013-03-13T14:54:43.487
> 
> 标签：javascript, jquery

我想这样做，我有一个带有 href attr 的标签，通常情况下会下载一个文件，但我想在更改网页中的一些信息后下载它，看看这段代码：

这是我拥有 html 和用户可以下载文件的 html。

```
 <li class="imprimir"><h2><a href="javascript:descargarNoticia()" id="descargar"  >Descargar Noticia</a></h2></li> 
```

这里的 JS 会更改信息然后下载文件，但我不能这样做。

```
function descargarNoticia(){
$.post("http://www.xxx.com/noticia/datosUsuarios",
   function(data){
    $("#empresa").show();
    $("#email").html(data['email'])
    $("#telefono").html(data['telefono'])
    $("#direccion").html(data['direccion'])
    $("#empresa").html(data['empresa'])

    var words = $('#wrapper-960').text().split(' ').length;
    var alto=words*0.264583333;
   $("#descargar").attr("href","http://pdfcrowd.com/url_to_pdf/?width=500mm&height="+alto+"mm")
            }
           },'json');
}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:03:36.700

如果您有文件的地址，只需打开该地址：

```
window.open("http://..."); 
```

编辑：该死的，ctrl-alt-dileep 打败了我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:09:08.810

更改后不能直接访问该 URL 吗？

```
var URL= "http://pdfcrowd.com/url_to_pdf/?width=500mm&height="+alto+"mm";
$("#descargar").attr("href",URL)
window.location = URL; 
```

# jakarta-ee - 无效的握手响应异常

> ID：15388724
> 
> 赞同：1
> 
> 时间：2013-03-13T14:54:50.900
> 
> 标签：jakarta-ee, websocket, ioexception

我正在使用我们的 tomcat 服务器进行压力测试，该服务器通过 websocket 技术与其客户端进行通信。所以当我在客户端尝试超过 150 个并发用户时，我收到了这个异常，我不知道服务器想说什么。

```
java.util.concurrent.ExecutionException: java.io.IOException: Invalid handshake response
    at com.ning.http.client.providers.netty.NettyResponseFuture.abort(NettyResponseFuture.java:297)
    at com.ning.http.client.providers.netty.NettyAsyncHttpProvider.abort(NettyAsyncHttpProvider.java:1376)
    at com.ning.http.client.providers.netty.NettyAsyncHttpProvider.access$800(NettyAsyncHttpProvider.java:137)
    at com.ning.http.client.providers.netty.NettyAsyncHttpProvider$WebSocketProtocol.handle(NettyAsyncHttpProvider.java:2400)
    at com.ning.http.client.providers.netty.NettyAsyncHttpProvider.messageReceived(NettyAsyncHttpProvider.java:1178)
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:792)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.unfoldAndFireMessageReceived(ReplayingDecoder.java:600)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:584)
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:445)
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75)
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:94)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:372)
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:246)
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:38)
    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102)
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException: Invalid handshake response
    ... 23 more 
```

让我知道您是否可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T07:31:06.683

最可能的原因是您可能没有没有“websocket”的客户端URL，例如：

"ws://"+HOST+":"+ PORT+"/websocket"

如果您在与服务器通信时错过客户端代码中的 /websocket，您将收到此异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:35:21.843

您必须遵循与浏览器客户端相同的规则

那是在您的客户端，您可能已经添加了以下代码

$atmosphere.subscribe(请求);

你也必须在你的 java 客户端上做同样的事情，因为你的请求没有订阅气氛，所以气氛不会验证你的请求。在 java 方面，首先你要进行气氛连接，然后你必须触发你的请求......

# plugins - Vim：用我自己的表达式包装插件映射

> ID：15388726
> 
> 赞同：2
> 
> 时间：2013-03-13T14:54:57.157
> 
> 标签：plugins, configuration, vim

我有一个具有以下映射的插件：

```
:i <CR>          <CR><Plug>DiscretionaryEnd 
```

我还想创建`<CR>`属于这个原始映射的我自己的表达式。但是，当我做这样的事情时：

```
:inoremap <expr> <CR> test ? '<CR><Plug>DiscretionaryEnd' : '<Esc>' 
```

`CR`打印`\n<Plug>DiscretionaryEnd`而不是仅仅`\n`跟随插件`DiscretionaryEnd`功能的委托。

`:h <Plug>`说它用于内部映射，所以我可能会出错。但我认为有一种方法可以包装插件的行为，而无需深入了解它的内部。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:12:30.620

尽管通常建议[使用`:noremap`](http://learnvimscriptthehardway.stevelosh.com/chapters/05.html)，因为它使映射不受重映射和递归的影响，但这是该规则的一个例外。

在表达式映射中，映射应用于表达式本身，而不是返回的字符流。

```
:imap <expr> <CR> test ? '<CR><Plug>DiscretionaryEnd' : '<Esc>' 
```

# css - CSS - ul 列表样式未呈现

> ID：15388727
> 
> 赞同：-1
> 
> 时间：2013-03-13T14:55:00.853
> 
> 标签：css, html-lists

想不通这个 我正在尝试设置一个简单的列表图像，但它没有显示。这发生在 chrome 和 firefox 上，但在 IE8 中，列表图像显示完美。

这是我正在开发的页面：http: [//www.clarionproject.com/](http://www.clarionproject.com/)

PS：当我尝试设置时： list-style:none 它也不起作用。它一直显示光盘类型。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T15:00:17.233

将列表样式添加到您的“li”

截图：[https ://www.box.net/shared/u1bdwuzh2fwk2pcol4x9](https://www.box.net/shared/u1bdwuzh2fwk2pcol4x9)

# jquery - jQuery children() 没有选择 tfoot tr 元素

> ID：15388731
> 
> 赞同：0
> 
> 时间：2013-03-13T14:55:07.243
> 
> 标签：jquery

我有以下 HTML。

```
<div>
    <table></table>
    <div><table id="startingPoint"></table></div>
    <table><tfoot><tr id="getThis"></tr></tfoot></table>
</div> 
```

使用 find() 按预期选择 #getThis。

```
$('#startingPoint').parent().next().find('tfoot tr') 
```

使用 children() 不会选择 #getThis。为什么？

```
$('#startingPoint').parent().next().children('tfoot tr') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:03:20.477

这种方式`children`有效，它获取元素的所有直接子元素，然后将它们全部与选择器匹配。没有直接的孩子匹配选择器`tfoot tr`。

实际上，这个选择器不可能匹配一个直接的孩子，因为它确实自相矛盾。它要求直接子代是后代的后代。（本质上是一个直接的孩子，至少也是一个孙子）。

我相信这会做你想做的事情：

```
$('#startingPoint').parent().next().find('> tfoot > tr') 
```

请注意，这`>`是子选择器。这将得到任何`tr`是`tfoot`表的直接子代的 a 的直接子代。

# c# - 连接日期时间

> ID：15388736
> 
> 赞同：0
> 
> 时间：2013-03-13T14:55:13.397
> 
> 标签：c#, wpf, wpftoolkit, datetimepicker, timepicker

在 wpf 应用程序上，我有一个 DatePicker 和一个 TimePicker（来自 Extended WPF Toolkit）。这两个控件返回一个日期时间值。

我想将这两个控件的结果存储在一个 DateTime 变量中。

我试过了 ：

```
myNewEvenement.dDate = DateTimePicker_Date.SelectedDate.Value;
myNewEvenement.dDate += (DateTime)TimePicker_Heure.Value; 
```

但我无法编译这段代码。

请问有什么想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:56:46.833

使用[DateTime.Add(TimeSpan value)](http://msdn.microsoft.com/en-us/library/system.datetime.add.aspx)方法创建新`DateTime`对象（您不能更改现有`DateTime`结构的值，因为它是不可变的）：

```
myNewEvenement.dDate = DateTimePicker_Date.SelectedDate.Value.Value
                           .Add(TimePicker_Heure.Value.Value.TimeOfDay); 
```

或者更具可读性：

```
DateTime date = DateTimePicker_Date.SelectedDate.Value.Value;
TimeSpan time = TimePicker_Heure.Value.Value.TimeOfDay;
myNewEvenement.dDate = date.Add(time); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T14:57:31.477

TimePicker`Value`是一个`DateTime`. 既然要给日期加上时间，那么在添加的时候只要加上时间选择器的值的TimeOfDay属性即可，如：

```
myNewEvenement.dDate = DateTimePicker_Date.SelectedDate.Value;
myNewEvenement.dDate += TimePicker_Heure.Value.TimeOfDay; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:59:59.450

`DateTime`是一个结构，因此它是[不可变](https://stackoverflow.com/questions/608542/immutability-of-structs)的。`DateTime`您可以使用`DateTime.Add`适当的方法创建一个新的`TimeSpan`：

```
long ticks = ((DateTime)TimePicker_Heure.Value).Ticks;
TimeSpan ts = TimeSpan.FromTicks(ticks);
myNewEvenement.dDate = myNewEvenement.dDate.Add(ts); 
```

或直接通过`DateTime.AddTicks`

```
myNewEvenement.dDate = myNewEvenement.dDate.AddTicks(ticks); 
```

# c++ - 为什么我在输入字符串时会出现分段错误？

> ID：15388740
> 
> 赞同：2
> 
> 时间：2013-03-13T14:55:16.517
> 
> 标签：c++, g++, segmentation-fault, stdin

好吧，我正在尝试制作一个消息加密和解密程序。那么，为什么我会出现分段错误？如果有人可以请帮助我，我将非常感激！我只运行了加密功能。它产生了适当的结果。有什么线索吗？

```
 #include <iostream>
        using namespace std;
        #define max 1000
        #include <string.h>
        #include <cstdlib>
        #include <stdlib.h>
        #include <math.h>
        #include <stdio.h>

        char * encrypt(char *s)
        {
            int x = (rand()/((RAND_MAX+1u)/5));
            char *res;
            int ascii;
            switch(x)
            {
                case 0:
                for(int i=0;i<strlen(s);i++)
                {
                    ascii = (int)s[i];
                    ascii = ascii-19;
                    res[i+2] = (char)ascii;

                }
                res[0]='a';
                res[1]='$';
                break; 
                case 1:
                for(int i=0;i<strlen(s);i++)
                {
                    ascii = (int)s[i];
                    ascii = ascii+sqrt(strlen(s));
                    res[i+2] = (char)ascii;
                }
                res[0]='x';
                res[1]='&';
                break;
                case 2:
                case 3:
                for(int i=0;i<strlen(s);i++)
                {
                    ascii = (int)s[i];
                    ascii = ascii-sqrt(strlen(s));
                    res[i+2] = (char)ascii;
                }
                res[0]='z';
                res[1]='^';
                break;
                case 4: 
                for(int i=0;i<strlen(s);i++)
                {
                    ascii = (int)s[i];
                    ascii = ascii+13;
                    res[i+2] = (char)ascii;
                }
                res[0]='a';
                res[1]='j';
                break;
            }
            return res;

        }

        char * decrypt(char *s)
        {
            int ascii;
            char *res;
            if(s[0]=='a' &&s[1]=='$')
            {
                for(int i=0;i<strlen(s);i++)
                {
                    ascii = (int)s[i+2];
                    ascii += 19;
                    res[i] = ascii;
                }   
            }
            else if(s[0]=='b' &&s[1]=='&')
            {
                for(int i=0;i<strlen(s);i++)
                {
                    ascii = (int)s[i+2];
                    ascii -= (strlen(s)*strlen(s));
                    res[i] = ascii;
                }   
            }
            else if(s[0]=='z' &&s[1]=='^')
            {
                for(int i=0;i<strlen(s);i++)
                {
                    ascii = (int)s[i+2];
                    ascii +=(strlen(s)*strlen(s));
                    res[i] = ascii;
                }   
            }
            else if(s[0]=='a' &&s[1]=='j')
            {
                for(int i=0;i<strlen(s);i++)
                {
                    ascii = (int)s[i+2];
                    ascii -= 13;
                    res[i] = ascii;
                }   
            }

            return res;

        }

        int main()
        {
            int ch;
            int i=0;
            char *s;
            char *res;
            while(1) {

            cout<<endl<<"1.Encrypt\n2.Decrypt";
            cout<<endl<<"Choice: ";

            cin>>ch;
            switch(ch)
            {
                case 1: 
                cout<<"\nEnter a message: ";
                cin>>s;

                res=encrypt(s);
                cout<<"\nEncrypted message is: "<<res<<endl;
                break;

                case 2:
                cout<<"\nEnter an Encrypted message: ";
                cin>>s;

                res=decrypt(s);
                cout<<"\nDecrypted message is: "<<res<<endl;
                break; 
                default: exit(0);
            }
        }
            return 0;
        } 
```

gdb 给了我这个信息：

```
Starting program: /home/prasanna/encdec 

1.Encrypt
2.Decrypt
Choice: 1

Enter a message: Test Line

Program received signal SIGSEGV, Segmentation fault.
0xb7f41aab in std::basic_istream<char, std::char_traits<char> >& std::operator>><char,     std::char_traits<char> >(std::basic_istream<char, std::char_traits<char> >&, char*) ()
   from /usr/lib/i386-linux-gnu/libstdc++.so.6 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T14:58:20.843

直接原因是`char *s;`声明了一个**未初始化的指针**，您尝试在其中读取某些内容 - `cin>>s;`。

**真正的原因**是您正在编写 C 代码并将其称为 C++。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:57:50.317

你还没有分配内存

```
char *res; 
```

但是你

```
res[i+2] = (char)ascii; 
```

写入那个内存。这是未定义的行为，通常会导致崩溃。

你在做同样的`main`事情`char *s;`：

```
cin>>s; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:08:28.113

您还没有`char* s`在 main 中分配任何内存。没有空间决定存储您作为输入收到的字符串。您只声明了指向某个区域的指针（尚未确定）

采用 `std::string`

或者你可以使用`new`

```
char *s = new char[15]; 
```

# r - ggplot2错误“绘图中没有图层”

> ID：15388748
> 
> 赞同：19
> 
> 时间：2013-03-13T14:55:38.887
> 
> 标签：r, ggplot2

我已经看到已经提出的问题......并解决了添加`stat = "identity"`到`geom_bar`. 但就我而言，这并不能解决任何问题（我仍然收到“绘图中没有图层”的消息）。

我得到了一个简单的 data.frame (data3)，其中包含 2 个因子（MonthNB 和 StationNAME）和一个数值变量（Ptot）：

```
 MonthNB StationNAME      Ptot
   1     stationA  21.70625
   2     stationA  16.19375
   3     stationA  16.64688
   4     stationA  27.37813
   5     stationA  38.26774
   6     stationA  52.91250
   7     stationA  69.36875
   8     stationA  43.18125
   9     stationA  33.24688
  10     stationA  35.74839
  11     stationA  36.01333
  12     stationA  30.24194
   1    stationB  25.14242
   2    stationB  18.62121
   3    stationB  22.11818
   4    stationB  32.70909
   5    stationB  33.83750
   6    stationB  63.65937
   7    stationB  69.05312
   8    stationB  50.70606
   9    stationB  46.96364
  10    stationB  50.28710
  11    stationB  46.81935
  12    stationB  39.88750 
```

我尝试使用以下方法绘制 Ptot=f(MonthNB)：

```
d <- ggplot(data=data3, aes(x=MonthNB, y=Ptot, colour=StationNAME))
d + geom_line()
d 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-13T15:00:05.943

错误消息是由于您没有保存`d+geom_line()`为对象。

```
#Save ggplot() as object
d <- ggplot(data=data3, aes(x=MonthNB, y=Ptot, colour=StationNAME))

#Add to d geom_line() - this makes the plot to appear on the screen but not saved.
d + geom_line() 
```

将图层保存到对象

```
d<-d+geom_line()
#No error message
d 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-19T15:21:48.237

该错误是因为未添加 geom_line() 或 geom_point() 选项。添加此选项时，您可以直接绘制它而不将其保存为对象。

# python - 根据 django 字典中的数据计数分配颜色

> ID：15388749
> 
> 赞同：2
> 
> 时间：2013-03-13T14:55:39.210
> 
> 标签：python, django, dictionary

从 db 我得到以下数据。然后我正在根据这些数据准备一个 python 字典。现在我想为每一行分配一种颜色，但是有一个条件。如果一个代码区与多个拉链相关联，则该行将变为灰色。与单个拉链相关的区域将获得其他颜色。如何根据以下数据准备字典。

```
+----------+-------+--------------+
| codeZone | ZipCd | Longitude    |
+----------+-------+--------------+
| Zone 81  | 13064 | -76.70275100 |
| Zone 81  | 13143 | -76.73114800 |
| Zone 81  | 13146 | -76.76016600 |
| Zone 72  | 13148 | -76.78488000 |
| Zone 72  | 13165 | -76.87704600 |
| Zone 50  | 14011 | -78.28090700 |
| Zone 50  | 14020 | -78.19062500 |
| Zone 50  | 14058 | -78.15694600 |
| Zone 50  | 14098 | -78.37735300 |
| Zone 50  | 14103 | -78.38546900 |
| Zone 50  | 14125 | -78.27249300 |
| Zone 50  | 14143 | -78.08089700 |
| Zone 50  | 14411 | -78.20223900 |
| Zone 81  | 14413 | -76.98321400 |
| Zone 60  | 14414 | -77.73609300 |
| Zone 50  | 14416 | -77.98543200 |
| Zone 72  | 14418 | -77.21132300 |
| Zone 14  | 14420 | -77.92950200 |
| Zone 50  | 14422 | -78.07160700 |
| Zone 60  | 14423 | -77.84307800 |
| Zone 71  | 14424 | -77.30122500 |
| Zone 70  | 14425 | -77.31024000 |
| Zone 61  | 14427 | -78.04682800 |
| Zone 16  | 14428 | -77.81500000 |
+----------+-------+--------------+ 
```

我的数据看起来有点像这个

[{'zone': 1, 'zip': 1, 'spec': a}, {'zone': 1, 'zip': 2, 'spec': m}, {'zone': 2, 'zip '：3，'规格'：PC}]

现在区域 1 与 zip 1 和 zip 2 相关联。区域 2 仅与 zip 3 相关联。所以我想为字典分配第四个键（即颜色），这将基于区域的计数（如果超过一个区域然后是灰色）。因此对于 zip 1 和 zip 2，颜色将为灰色。对于 zip 3 任何其他颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:01:34.387

计算每个区域的邮政编码，然后在映射中包含该信息：

```
from collections import defaultdict

zipcount = defaultdict(set)
for zone, zip, longitude in datarows:
    zipcount[zone].add(zip)

# Create the output dictionary
output_dict = {}
for zone, zip, longitude in datarows:
    count = len(zipcount[zone])
    # adjust output dictionary based on the count (1 or more) 
```

# php - 如何使用php调用/检查会话数组中只有一行mysql数据库的数据？

> ID：15388750
> 
> 赞同：0
> 
> 时间：2013-03-13T14:55:43.000
> 
> 标签：php, mysql

比如说，有两个名为的数据库表

`user`

```
id    name
--   -----
1     Mike
2     Bob
3     Tony
4     Christina
5     James 
```

`product`

```
product_id    chooser_id   chooser_name   selection_status
----------    ----------   ------------   -----------------
   1               1             Mike              0
   2               2             Bob               1
   3               3             Tony              0
   4               3             Tony              1
   5               3             Tony              1 
```

这里上`product`表中可用的数据是由表的登录用户`user`根据以下mysql语法插入的。

```
mysql_select_db($database_XYZ, $XYZ);
$query_test = "SELECT user.id, user.name, product.product_id, product.chooser_id, product.chooser_name, product.selection_status FROM user, product WHERE user.id = '$_SESSION[userid]' AND user.id = product.chooser_id AND product.selection_status = 1 ";
$test = mysql_query($query_$test, $XYZ) or die(mysql_error());
$row_test  = mysql_fetch_assoc($test );
$totalRows_test  = mysql_num_rows($test ); 
```

现在，如果用户**Tony**想要检查他在登录会话中插入的表的`selection_status`（`0`&`1`是标记值），`product`具体取决于以下语法

```
if (isset($row_test ["selection_status"]) == "1") {
echo $row_test ["selection_status"];
} 
```

语法异常返回`1`，因为他在检查数据时仍处于登录状态，并且它从表的以下部分`1`获取意外似乎与查询匹配的所有行：`mysql``product`

```
product_id    chooser_id   chooser_name   selection_status
----------   -----------   -------------  -----------------
   4               3             Tony              1
   5               3             Tony              1 
```

如何使用替代php条件语句在会话数组中仅调用/检查一行mysql数据库，以便在每次检查或调用中仅返回一行数据？

```
product_id    chooser_id   chooser_name   selection_status
----------   -----------   -------------  -----------------
   4               3             Tony              1 
```

或者

```
product_id    chooser_id   chooser_name   selection_status
----------   -----------   -------------  -----------------
   5               3             Tony              1 
```

请注意，`mysql LIMIT`等`WHERE product_id=4`将不适用于此处，因为数据应通过会话填充到此处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:27:28.960

问题已解决。在 if (isset($row_test ["selection_status"]) == "1"){ 。isset 在可用数据上返回真或非空。所以我删除了它并将语法更改为 if ($row_test ["selection_status"] == "1"){ 。`AND product.selection_status = 1`此外，我从 mysql 语法中删除了条件。

**从这篇文章中学到的教训：** `flagged value`作为基于会话的复杂`mysql`查询中的条件，用于过滤唯一/主 id 特定行的条件不能维持`session variable`. 这是不遵循的例外情况`session rule`。在这种情况下，应该在必要时使用 php 条件或比较语句调用标记值，而不是 mysql 查询。

# jquery - glDatePicker 可选日期范围的倒序

> ID：15388751
> 
> 赞同：0
> 
> 时间：2013-03-13T14:55:45.547
> 
> 标签：jquery, math

规格显然发生了变化，我无法理解为什么这不起作用。我有一个带有 #StartDate 和 #EndDate 字段的表单

```
<ul>
    <li>
        <label for="StartDate">Start Date</label>
        <input type="text" id="StartDate" name="StartDate">
    </li>
    <li>    
        <label for="EndDate">End Date</label>
        <input type="text" id="EndDate" name="EndDate">
        <input type="submit" id="Button6" value="foo" />
    </li>
    <li>
        <label for="AllDates"><input type="checkbox" name="AllDates" id="AllDates" value="YES">All Dates</label>
    </li>
</ul> 
```

以前当日期范围从今天开始时 - 向前这有效：

```
$("#bottomContent").on('focus', "#StartDate", function(){
    var today = new Date();
    var datelimit = new Date(today);
    datelimit.setDate(today.getDate() + 31);

    $(this).glDatePicker({
        showAlways: false,
        allowMonthSelect: true,
        allowYearSelect: true,
        prevArrow:'<',
        nextArrow:'>',
        selectedDate:today,
        selectableDateRange: [{
            from: today,
            to: datelimit
        }, ],
        onClick: function (target, cell, date, data) {
            target.val((date.getMonth() +1) + '/' + date.getDate() + '/' + date.getFullYear());
            $('#AllDates').prop('checked', false);
            if (data != null) {
                alert(data.message + '\n' + date);
            }
        }
}).glDatePicker(true);

var to = $('#EndDate').glDatePicker({
    showAlways: false,
    onClick: function (target, cell, date, data) {
        target.val((date.getMonth() +1) + '/' + date.getDate() + '/' + date.getFullYear());
        $('#AllDates').prop('checked', false);
        if (data != null) {
            alert(data.message + '\n' + date);
        }
    }
}).glDatePicker(true);
$("#bottomContent").on('focus', "#EndDate", function(){
    var dateFrom = new Date($("#StartDate").val());
    var toLimit = new Date();
    toLimit.setDate(dateFrom.getDate() + 31);
    to.options.selectableDateRange = [{
    from: dateFrom,
    to: toLimit
}, ],
    to.options.showAlways = false;
    to.render();
});}); 
```

我需要让它从今天开始 = newDate() 并让它向后退（-365 天），但只需将所有“+ 31”切换为“- 365”，这将使其前进一个月是行不通的，任何想法?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:18:45.113

如果有人遇到同样的问题，就这样做了。

```
$("#bottomContent").on('focus', "#StartDate", function(){
var today = new Date("January 1, 2013");
var datelimit = new Date();
datelimit.setDate(today.getDate() +14);

$(this).glDatePicker({
    showAlways: false,
    allowMonthSelect: true,
    allowYearSelect: true,
    prevArrow:'<',
    nextArrow:'>',
    selectedDate:today,
    selectableDateRange: [{
        from: today,
        to: datelimit
    }, ],
    onClick: function (target, cell, date, data) {
    target.val((date.getMonth() +1) + '/' + date.getDate() + '/' + date.getFullYear());
        $('#AllDates').prop('checked', false);
    if (data != null) {
        alert(data.message + '\n' + date);
    }
}
}).glDatePicker(true);

var to = $('#EndDate').glDatePicker({
    showAlways: false,
    prevArrow:'<',
    nextArrow:'>',
    selectedDate:today,
    onClick: function (target, cell, date, data) {
        target.val((date.getMonth() +1) + '/' + date.getDate() + '/' + date.getFullYear());
        $('#AllDates').prop('checked', false);
        if (data != null) {
            alert(data.message + '\n' + date);
        }
    }
    }).glDatePicker(true);
$("#bottomContent").on('focus', "#EndDate", function(){

var dateFrom = new Date($("#StartDate").val());
var toLimit = new Date();
//toLimit.setDate(dateFrom.getDate());
to.options.selectableDateRange = [{
    from: dateFrom,
    to: toLimit
}, ],
to.options.showAlways = false;
to.render();
});
}); 
```

# mysql - MySql：LEFT JOIN、ORDER 和 LIMIT 管理它们

> ID：15388755
> 
> 赞同：0
> 
> 时间：2013-03-13T14:56:03.147
> 
> 标签：mysql, sql

下面的 mysql 将返回我的数据库中的前 10 个帖子，以及与这 10 个帖子相关的评论，以及与帖子相关的用户，整个事情按帖子的标题排序。

```
SELECT * FROM 
    (SELECT * FROM posts LIMIT 0,10 ORDER BY posts.title) as post 
       LEFT JOIN comments AS comment ON comment.postId = post.id, 
       authors AS author 
WHERE post.authorId = author.id 
```

如何按 author.name 排序？将 posts.title 更改为 author.name 会给我一个错误：

```
Table 'comment' from one of the SELECTs cannot be used in global ORDER clause 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:03:06.410

您需要在子查询中切换 ORDER BY 和 LIMIT。但是，您还希望将 ORDER BY 移动到主查询，而不是子查询。所以你要：

```
SELECT * FROM (SELECT * FROM posts LIMIT 0,10) as post 
LEFT JOIN comments as comment on comment.postId = post.id, authors as author 
WHERE post.authorId = author.id ORDER BY author.name, posts.title 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:03:15.627

更新答案 - 误读问题

您正在对内部选择进行排序，该选择仅使用帖子表，它也仅对选择进行排序，而不是对整个选择进行排序。您想要的是按外部选择上的 author.name 排序。

# css - iOS 6 中的页面切换时文本溢出

> ID：15388756
> 
> 赞同：2
> 
> 时间：2013-03-13T14:56:03.063
> 
> 标签：css, html, ios6

我在 iOS 6 的网站上遇到了这个非常奇怪的问题。

在我的登录屏幕上，我有两个`<input/>`字段，用户名和密码。我在`<input/>`字段中输入文本，如果文本的宽度大于`<input/>`（当文本溢出时）的宽度，整个屏幕将移动`50px`到右下角。当我使用虚拟键盘中的删除按钮连续键入字符或删除字符时，就会发生这种情况。一旦文本宽度小于`<input/>`宽度，页面就不会移动。这发生在 iOS 6、Safari 和 iOS 6 应用程序中。

我尝试将父母设置为`overflow: hidden`没有运气。

**`<input/>`当字段中的文本溢出时，如何防止页面移动？**

[这是一个展示它的例子。](http://pastehtml.com/view/d2yjcn570.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T01:40:41.393

也许试试`position:fixed`？我没有 iPhone / iPod Touch / iPad，所以我无法测试它。

# windows-8 - Visual Studio 2012 快速安装 - mscorpe.dll 并非设计为在 Windows 上运行

> ID：15388761
> 
> 赞同：2
> 
> 时间：2013-03-13T14:56:16.600
> 
> 标签：windows-8, visual-studio-2012

我尝试在 Windows 8 中安装 VS2012 express，遇到了这个错误

![在此处输入图像描述](../Images/3ef003670f316e0f44a2edad5c1ed980.png)

> mscorpe.dll 的设计可能不适合在 Windows 上运行或包含错误

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:21:38.557

由于您的错误是“C:\windows\microsoft.net\framework\v2.0.50727\mscorpe.dll 不是设计为在 Windows 上运行或包含错误”，因此您的操作系统上的 .net framework 2.0 似乎已损坏。

.NET 2.0 包含在 .NET 3.5 中，.NET 3.5 实际上是 Win 8 的一个组件。

我建议你先参考这个页面：

[http://msdn.microsoft.com/en-us/library/hh506443.aspx](http://msdn.microsoft.com/en-us/library/hh506443.aspx)

首先尝试在 Win 8 上启用 .NET 3.5。

然后使用此工具验证 .NET 2.0 并将结果粘贴到此处：

[http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx](http://blogs.msdn.com/b/astebner/archive/2008/10/13/8999004.aspx)

如果它说 .NET 2.0 已损坏，请参阅此页面[http://www.eightforums.com/tutorials/3047-sfc-scannow-command-run-windows-8-a.html](http://www.eightforums.com/tutorials/3047-sfc-scannow-command-run-windows-8-a.html)使用 sfc /scannow 修复您的 Win 8.

# c# - 通过 WCF 服务传递 NetworkCredential 以与 EWS API 一起使用

> ID：15388762
> 
> 赞同：2
> 
> 时间：2013-03-13T14:56:19.303
> 
> 标签：c#, wcf, exchangewebservices

我有一个 WCF 服务正在运行，托管在使用 netTcp 端点公开的 IIS7 上，并使用 Windows 身份验证（`Transport`安全和`clientCredentialType="Windows"`）进行配置，这一切都很好。

在服务中，我使用 EWS API 发送电子邮件，并检查 Exchange 服务器上的收件箱。我有部分工作，就目前而言，我已经通过创建一个`NetworkCredential`要传入的对象手动指定了 Credentials 属性。

我想做的是使用调用服务的用户的身份，这样我就可以像他们一样发送邮件并遍历他们的收件箱。

我可以通过使用来访问呼叫用户的详细信息

```
ServiceSecurityContext.Current.PrimaryIdentity 
```

但这会返回一个`IIdentity`对象，而不是我创建与 Exchange 服务器的连接所需的凭据。

如果没有密码，我显然无法创建一个`NetworkCredential`对象，而我没有密码，而且据我所知，我无法`NetworkCredential`从该`IIdentity`对象创建一个。

必须有一种方法来实现这一点。欢迎所有建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T16:24:59.717

关于什么

```
using(ServiceSecurityContext.Current.WindowsIdentity.Impersonate())
{
    ExchangeService service = new ExchangeService(...)
    service.UseDefaultCredentials = true; 

} 
```

调用您的服务器的客户端必须允许委托：

```
proxy.ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Delegation; 
```

如果您的 WCF 服务器使用 localSystem 或 NetworkService 帐户运行，您还需要在 AD 中为您的计算机帐户启用“受信任的委派”属性（通常是网络管理员的工作）。如果它使用另一个域用户帐户运行，您需要为该帐户启用“受信任的委派”属性并为您的服务器创建服务器主体名称 (SPN)。老实说，我自己从来没有这样做过，因为我更喜欢使用 NetworkService 帐户。她来了几个链接：[这里](http://support.microsoft.com/kb/907272)、[这里](http://msdn.microsoft.com/en-us/library/ff647248.aspx)和[这里](http://msdn.microsoft.com/en-us/library/ms730088.aspx)

# python - 多次调用 python 文件中的模块

> ID：15388765
> 
> 赞同：0
> 
> 时间：2013-03-13T14:56:28.060
> 
> 标签：python, python-3.3

我正在尝试仅使用 python 制作一个非常基本的操作系统，它是这样的：

```
print ("welcome to ben's operating system V 0.1.0")
ten = 0
while (ten < 1000000):
    do = input()
    if do == ("pythag"):
        from bensos import pythag
    elif do == ("word"):
        from bensos import word
    else :
        print ("invalid input") 
```

pythag 代码是这样的

```
from math import sqrt
a = float(input ("a="))

b = float(input ("b="))
a = a*a

b = b*b

c = a+b

c = sqrt (c)
print ("c=")
print (c)
d = input("end") 
```

我只有两个程序，一个词不起作用，我还没有完美地完成循环，但它可以工作。我遇到的问题是重新加载代码；我把它放在底部，它说某种错误，所以我尝试将它放入模块中，但仍然出现错误。如果没有重新加载，它运行良好，但我只能使用这些模块一次，而且我到处寻找，没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:54:06.180

你最好把所有的进口放在顶部，所以

```
from bensos import pythag
from bensos import word
... 
```

然后在 pythag 和 word 模块中定义一个过程 runModule 并用模块中当前的所有代码填充它。

```
def runModule():
    #The contents of your files at the moment 
```

所以你的 pythag 文件看起来像

```
from math import sqrt

def runModule():
    a = float(input ("a="))

    b = float(input ("b="))
    a = a*a

    b = b*b

    c = a+b

    c = sqrt (c)
    print ("c=")
    print (c)
    d = input("end") 
```

这样，您的代码将首先加载模块，然后您可以随时调用它们

```
pythag.runModule() 
```

让我知道是否不清楚，或者您是否仍有问题。

# java - 如何对齐我的 Jframe 标签和按钮

> ID：15388772
> 
> 赞同：0
> 
> 时间：2013-03-13T14:56:44.323
> 
> 标签：java, swing, jframe, layout-manager, springlayout

我正在尝试编辑我发现的一段示例代码来创建表单。示例代码包括完美对齐的 4 个标签和文本字段。我试图在最后添加一个按钮，但该按钮与屏幕左上角的标签重叠。我怎样才能解决这个问题？

```
public class SpringDemo {
private static void createAndShowGUI() {
    String[] labels = {"Name: ", "Fax: ", "Email: ", "Address: "};
    int labelsLength = labels.length;

    //Create and populate the panel.
    JPanel p = new JPanel(new SpringLayout());
    for (int i = 0; i < labelsLength; i++) {
        JLabel l = new JLabel(labels[i], JLabel.TRAILING);
        p.add(l);
        JTextField textField = new JTextField(10);
        l.setLabelFor(textField);
        p.add(textField);
    }
    JButton l = new JButton("Submit");
    p.add(l);

    //Lay out the panel.
    SpringUtilities.makeCompactGrid(p,
                                    labelsLength, 2, //rows, cols
                                    7, 7,        //initX, initY
                                    7, 7);       //xPad, yPad

    //Create and set up the window.
    JFrame frame = new JFrame("SpringForm");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    //Set up the content pane.
    p.setOpaque(true);  //content panes must be opaque
    frame.setContentPane(p);

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}

public static void main(String[] args) {
    //Schedule a job for the event-dispatching thread:
    //creating and showing this application's GUI.
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:39:35.470

问题的发生是因为该方法将标签及其文本字段`makeCompactGrid`压缩到所需的大小，并且您没有对按钮施加任何约束以让布局知道将其放置在哪里。`JPanel`

您可以创建一个空标签并将其添加到您的按钮之后，然后调用`makeCompactGrid`这会将按钮放在最后一个标签下。

像这样

```
JButton l = new JButton("Submit");
p.add(l);
p.add(new JLabel());
SpringUtilities.makeCompactGrid(p,
                                labelsLength + 1, 2, //rows, cols
                                7, 7,        //initX, initY
                                7, 7);       //xPad, yPad 
```

您还可以尝试对按钮施加约束，以强制布局将其放置在您想要的位置，但这可能效果不佳，`makeCompactGrid`因为该方法不会知道按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:02:21.350

可以试试这个方法吗？

```
private void addComponent(Container container, Component c, int x, int y,int width, int    
height){ 

c.setBounds(x, y, width, height);
container.add(c);
} 
```

并这样称呼它：

```
addComponent(container such as JPanel, component such as a JButton, x position, yposition,    
 width, height); 
```

# xpages - 在 XPage 中以编程方式标记视图控件中的复选框

> ID：15388778
> 
> 赞同：1
> 
> 时间：2013-03-13T14:56:55.103
> 
> 标签：xpages, lotus-domino

我需要根据组合框值的选择在视图控件中标记复选框。

例如，我有一个客户订单文档视图，我需要选择所有“待处理”的订单。最终用户可以向下滚动屏幕并选中具有“待处理”状态的每一行，但可能有 50 个分散在整个视图中。我想要一个组合框，最终用户可以在其中选择“待定”，XPages 会为他们选中所有匹配的文档。然后我有一个按钮可以`.getSelectedIds()`用来处理这些文件。

我尝试过使用`rowData.setSelected(true)`，但这并没有在该行的 viewColumn 中显示复选标记。

有没有办法访问 viewPanel 中的 XPage 默认复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:27:45.177

我不是 View Control 的忠实粉丝。我确定您所描述的可以完成，但我会提供另一种方法。

我做了这个视频，展示了一种从重复控件中执行 getSelectedIDs() 的方法（不要使用 IE）：http: [//xpages.tv/xtv3.nsf/episode_user.xsp ?action=openDocument&documentId=94A](http://xpages.tv/xtv3.nsf/episode_user.xsp?action=openDocument&documentId=94A)

在该示例中，用户可以单击一行，我认为我会将该 ID 添加到 sessionScope 中的地图中。也许 viewScope - 我忘了。我使用 CSS 突出显示该行以显示它已被选中。有一个按钮可以从地图中删除 id 并刷新以删除突出显示。

现在你想做什么 - 让我们暂时忘记复选框。您应该能够使用这种重复控制技术，然后在您的重复上方有一个按钮，例如选择所有待处理。该按钮将运行一个 SSJS 函数，该函数将遍历后端的数据并获取正确的 UNIDS，然后将它们添加到地图中。重复的部分刷新将显示它们全部被选中。另一个需要作用于所选列表的按钮将只引用该 ID 的映射。

在我使用 css 突出显示行的地方，我想你可以有一个复选框控件，并且该特定行在地图中 - 添加检查，否则将其留空。

无论如何-这是处理它的一种方法，您应该能够在短期内开始工作。

真的，如果您使用的是视图控件，我想您仍然可以有一个按钮通过后端获取文档并进行类似的处理。在这种情况下，您可能不需要添加检查视图，因为选择实际上是硬编码的。我想问题是如果你有那个硬编码按钮，你是否还需要标记它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:19:34.840

使用 David Leedy 的回复中的一些花絮，我能够通过将所选 UNID 的集合保存在范围变量中来创建解决方案，使用`java.util.ArrayList()`

```
// in the postOpenView of the custom control I put...
if (sessionScope.myList==null) {
    var myList = new java.util.ArrayList();
    sessionScope.put('myList',myList);
}

// in the onchange event of my combobox I put the following code,
// and set the partial update to viewPanel1
var myArray = sessionScope.get("myList");
var keycode;
var vp:com.ibm.xsp.component.xp.XspViewPanel = getComponent("viewPanel1");

for(i=0; i < vp.getRowCount() ; i++){

    vp.setRowIndex(i);
    var rowData=vp.getRowData();

    keycode = rowData.getUniversalID();

    //my combobox is bound to the sessionScope viewFilter
    var test1 = sessionScope.get("viewFilter")==" "; //(used for select all)
    var test2 = rowData.getColumnValue("$3").toString().startsWith(sessionScope.get("viewFilter"));

    if (test2 || test1) {

        if (!myArray.contains(keycode)) {
            myArray.add(keycode);
        }

    } else {
        myArray.remove(keycode);
    }
} 
```

我还在视图中添加了一个带有人造复选框的列（这只是装饰性的），我可以在其中选择要从“myArray”中添加（或删除）的其他行

```
// the onclick event of my faux checkbox column
// with partial update set to viewPanel1 

var myArray = sessionScope.get("myList");
var keycode = rowData.getUniversalID();

if (!myArray.contains(keycode)) {
    myArray.add(keycode);
} else {
    myArray.remove(keycode);
} 
```

感谢所有的帮助！

# javascript - AngularJS我遇到了一个奇怪的问题。我在我的应用程序中使用 AngularJS，但我遇到了标签问题。我有一个控制器让我的元素处理城市和州： function MeuController($scope, $http) { $scope.states = []; $scope.selectedState = ''; $scope.cities = []; $scope.selectedCity = ''; $http.get('/state/GetStates').success(fun

> ID：15388779
> 
> 赞同：3
> 
> 时间：2013-03-13T14:56:54.650
> 
> 标签：javascript, angularjs

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:31:47.923

好的，实际上问题出在`ng-model`and之间`ng-options`。

当你这样做时：

```
<select class="span6" name="SelectedCity" ng-model="selectedCity"  
ng-options="city.ID as city.Name for city in cities"></select> 
```

然后`$scope.selectedCity`被分配给`city.ID`而不只是`city`（检查这个[小提琴](http://jsfiddle.net/bvD2a/3/)）。

你应该这样写：

```
<select class="span6" name="SelectedCity" ng-model="selectedCity"  
ng-options="city.Name for city in cities"></select> 
```

检查这个[fiddle](http://jsfiddle.net/bvD2a/4/)中的结果。

它解决了你的问题吗？

# c++ - cv::namedWindow() hangs when called

> ID：15388781
> 
> 赞同：0
> 
> 时间：2013-03-13T14:57:03.467
> 
> 标签：c++, c, opencv

I am using Netbeans C++ to create a small project. I have this simple code:

```
int main(int argc, char** argv) {
    cv::namedWindow("Output");

    // Create Receiver and Decoder on another thread
    boost::thread t1 = boost::thread(startReceiver); // Details irrelevant
    boost::thread t2 = boost::thread(startDecoder);  // Details irrelevant

    std::cout << "Waiting..." << std::endl;

    t2.join();
    t1.join();

    std::cout << "Finished." << std::endl;

    return 0;
} 
```

The program hangs on `cv::namedWindow("Output");`. I have paused the program using GDB and this is the call stack:

```
poll ()
?? ()
xcb_connect_to_fd ()
xcb_connect_to_display_with_auth_info ()
_XConnectXCB ()
XOpenDisplay ()
gdk_display_open ()
gdk_display_open_default_libgtk_only ()
gtk_init_check ()
gtk_init ()
cvInitSystem ()
cvNamedWindow ()
main (argc=1, argv=0x7fffffffe4c8) 
```

It is polling for something, I don't know what... Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:10:52.527

It seems to be a problem related to GTK. Try to use a standard window:

```
cv::namedWindow("Output", CV_WINDOW_NORMAL|CV_GUI_NORMAL); 
```

# python - 使用海龟的不同填充和边框

> ID：15388785
> 
> 赞同：0
> 
> 时间：2013-03-13T14:57:11.307
> 
> 标签：python, python-2.7, turtle-graphics

我有一个制作窗口的功能：

```
import turtle
t=turtle.Pen()       

def drawindow(dis):
    t.down()
    t.seth(0)
    drawshape(4, 15)
    t.up()
    t.fd(7.5)
    t.seth(90)
    t.down()
    t.fd(15)
    t.up()
    t.seth(180)
    t.fd(7.5)
    t.seth(270)
    t.fd(7.5)
    t.seth(0)
    t.down()
    t.fd(15)
    t.end_fill() 
```

我希望笔的颜色为黑色，但填充为另一种颜色。我已经定义了一个`drawhouse()`包含这个函数的函数，在此之前，笔的颜色设置为黑色，然后开始填充。我试过做`t.begin_fill('blue')`，但这不起作用。请帮忙。

`drawshape(x, y)`绘制一个具有 x 边的多边形，每边 y 长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:46:24.217

在你开始画画之前，试着打电话

```
t.color('black', 'blue') 
```

这会将填充颜色设置为蓝色，将线条颜色设置为黑色。

或者，您可以致电

```
t.pencolor('black')
t.fillcolor('blue') 
```

如果您愿意，可以单独使用。[在http://docs.python.org/3.2/library/turtle.html#turtle.color](http://docs.python.org/3.2/library/turtle.html#turtle.color)查看文档

# xpages - 在 8.5.3 UP1 上使用 OneUI V2.1 缺少 .js/.css 文件

> ID：15388787
> 
> 赞同：1
> 
> 时间：2013-03-13T14:57:17.243
> 
> 标签：xpages, xpages-extlib

在 Domino 服务器日志中，我收到以下错误消息：

HTTP Web 服务器：找不到设计说明 - xpDocLinks.js [数据库路径和名称]

HTTP Web 服务器：找不到设计说明 - oneuiv2_1.css [数据库路径和名称]

所以数据库中需要这些元素，但我不知道在哪里可以找到它们。这是全新的 8.5.3 UP1 安装。我正在使用扩展库应用程序布局和其他标准控件。

有小费吗？

谢谢，肯德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:47:48.587

这些元素不是扩展库/UP1 的一部分。它们是增强的 XPages Teamroom 模板的一部分。

因此，这些元素在您正在访问的数据库中被引用 - 并且在数据库中不可用或由于例如替换规则而无法访问。

我建议您在 db（使用 CTRL+H）中搜索设计元素的名称，以查看它们被引用的位置。

# python - 使用 distutils 制作适合 zipimport 的包

> ID：15388790
> 
> 赞同：2
> 
> 时间：2013-03-13T14:57:30.120
> 
> 标签：python, distutils

我正在将 python 嵌入到我正在创建的应用程序中，并且我正在寻找一种方便的方法来分发 python 代码。我最近阅读`zipimport`并认为这将是一种方便的方式来分发我的所有 python 代码，而不是包括完全扩展的树。所以，我设置我的包类似于这个：

```
.
├── setup.py
└── testpack
    ├── __init__.py
    └── pack1
        ├── foo.py
        └── __init__.py 
```

`setup.py`看起来像：

```
from distutils.core import setup

setup(
    name='testpack',
    author='FatalError',
    version='1.0',
    packages=['testpack.pack1']
) 
```

然后我跑了`python setup.py bdist --format=zip`。但是当我查看 zip 的内容时：

```
$ unzip -l testpack-1.0.linux-x86_64.zip 
Archive:  testpack-1.0.linux-x86_64.zip
  Length      Date    Time    Name
---------  ---------- -----   ----
      183  2013-03-13 10:47   usr/local/lib/python2.7/dist-packages/testpack-1.0.egg-info
      152  2013-03-13 10:47   usr/local/lib/python2.7/dist-packages/testpack/pack1/__init__.pyc
      181  2013-03-13 10:47   usr/local/lib/python2.7/dist-packages/testpack/pack1/foo.pyc
        0  2013-03-13 10:41   usr/local/lib/python2.7/dist-packages/testpack/pack1/__init__.py
       33  2013-03-13 10:41   usr/local/lib/python2.7/dist-packages/testpack/pack1/foo.py
---------                     -------
      549                     5 files 
```

显然，结果（并不奇怪）不适合与`zipimport`. 相反，这是一个 zip 存档，旨在解压缩`/`以安装软件包。

有没有办法让`distutils`（或`setuptools`等）来构建包，以便它可以使用`zipimport`？由于我拥有的代码确实是特定于应用程序的，因此它不属于安装到系统库中。

我意识到我可以自己编写脚本，但是，那有什么乐趣呢？例如，我想确保所有内容都已预编译，并且我的包包含一个不打算分发的单元测试包。所以，我希望这些工具之一可以为我做这件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:03:11.440

`egg`档案支持 zipimport（除非有相反的标记，在这种情况下，它们将在安装过程中被解压）。

使用`python setup.py bdist --formats=egg`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T21:24:20.017

distutils 的 bdist 格式并非旨在生成可直接导入的 zip 文件，而是可以手动或通过 pip 等工具下载和安装的发行版。您可以使用轮子（格式取代鸡蛋），或使用 distutils 创建 pyc 文件，然后手动压缩 build/mypackage 目录并发布它。

# c# - 静态变量顺序

> ID：15388793
> 
> 赞同：5
> 
> 时间：2013-03-13T14:57:35.210
> 
> 标签：c#, .net, static-variables

我对 C# 中静态变量声明的顺序有疑问

当我运行此代码时：

```
static class Program {
  private static int v1 = 15;
  private static int v2 = v1;

  static void Main(string[] args) {
   Console.WriteLine("v2 = "+v2);
  }
} 
```

输出是：

```
v2=15 
```

但是当我像这样更改静态变量声明顺序时：

```
 static class Program {
      private static int v2 = v1;
      private static int v1 = 15;

      static void Main(string[] args) {
       Console.WriteLine("v2 = "+v2);
      }
    } 
```

输出是：

```
v2 = 0 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T14:59:22.413

静态字段的初始化顺序与声明的顺序相同。当你`v2`用 的值初始化时`v1`，`v1`还没有初始化，所以它的值为 0。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T14:59:50.683

静态变量是按照它们的声明顺序初始化的，所以当你`v2`在第二个例子中赋值时，`v1`仍然有它的默认值`0`。

我希望你知道这样做是个坏主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T15:01:22.927

字段初始化的`static`顺序与它们的声明相同。

在您的第二个代码中，`v1`未初始化。既然`v1`是`Int32`，所以它是一个*值类型*，并且所有值类型的默认值都是`0`。

> 从第 74 页的 C#4.0 简而言之。
> 
> 静态字段初始化程序按照声明字段的顺序运行。

在你的情况下；

```
private static int v2 = v1;
// v2 initialized 0 because of the default value of value types.
private static int v1 = 15;
// v1 initialized 15 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T14:59:10.830

静态变量获取值的方式意味着在第二个示例中，`v1`未初始化，因此在分配给时采用默认值 0 `v2`。

# web-services - Restful WebService 部署策略 - 最佳实践

> ID：15388806
> 
> 赞同：1
> 
> 时间：2013-03-13T14:58:12.613
> 
> 标签：web-services, api, soa, restful-url, restful-architecture

我们正在开发 Restful 网络服务 (JAX-RS)。我们有如下资源组织：

**基本 URI**：api.example.com
->Accounts
    [AccountId]
->contacts
->orders
->cart

为了说明，如果我想访问联系人资源，我的 URI 将是这样的：

`http://api.example.com/Accounts/233/V1/contacts/`

对于订单， `http://api.example.com/Accounts/233/V1/orders/`

我们希望为上述表示中的联系人、订单、购物车等部署单独的 Web 应用程序（作为 WAR），当然是集群的。要求是消费者应用程序需要使用上述 URL 方案访问这些应用程序。消费者应用程序不知道部署了多个应用程序。基本问题是，单独部署此类应用程序并且仍然能够坚持面向资源的架构的最佳实践是什么？

注意：我们现在还没有使用任何 ESB。所有这些 API 目前都在内部使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:55:06.460

[最佳实践是使用Service Façade](http://soapatterns.org/design_patterns/service_facade)从逻辑 uri 中抽象出物理 url 。有很多方法可以做到这一点；从[WebSever 级别的 url 重写](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html) 到第 7 层和 Sonic 等 Web 服务治理工具。

# java - OptionPane 中显示的 Java 多维数组

> ID：15388810
> 
> 赞同：1
> 
> 时间：2013-03-13T14:58:17.600
> 
> 标签：java, swing, multidimensional-array, joptionpane

我找不到如何让 JOptionPane 显示多维数组的方法。

这是我的第一次尝试。

```
public static void main (String [] args)
{
    int[][] numbers = new int[5][5];

    int rows = 5;
    int columns = 5;

    numbers[0][0] = 30;
    numbers[0][1] = 29;
    numbers[0][2] = 28;
    numbers[0][3] = 27;
    numbers[0][4] = 26;

    numbers[1][0] = 26;
    numbers[1][2] = 25;
    numbers[1][2] = 24;
    numbers[1][3] = 23;
    numbers[1][4] = 22;

    int x, y;

    for (x = 0;  x < rows; x++)
    {
        for (y = 0; y < columns; y++)
        {
            System.out.print(numbers[x][y] + " ");
        }
        System.out.println("");

    }
    JOptionPane.showMessageDialog(null, numbers,"Arrays",JOptionPane.INFORMATION_MESSAGE);
    System.exit(0);
} 
```

这是 JOptionPane 输出

[https://www.dropbox.com/s/hfyjsgeaimpr2dh/JOptionPane%20output.PNG](https://www.dropbox.com/s/hfyjsgeaimpr2dh/JOptionPane%20output.PNG)

如您所见，有些地方出了问题。

控制台输出如下所示。

[https://www.dropbox.com/s/ac0a65kttdora27/Console%20output.PNG](https://www.dropbox.com/s/ac0a65kttdora27/Console%20output.PNG)

我想要的是您看到控制台输出显示在 JOptionPane 中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:05:59.197

您可以使用[StringBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)以与打印到控制台相同的方式：

```
public static void main (String [] args)
{
    int[][] numbers = new int[5][5];

    int rows = 5;
    int columns = 5;

    numbers[0][0] = 30;
    numbers[0][1] = 29;
    numbers[0][2] = 28;
    numbers[0][3] = 27;
    numbers[0][4] = 26;

    numbers[1][0] = 26;
    numbers[1][2] = 25;
    numbers[1][2] = 24;
    numbers[1][3] = 23;
    numbers[1][4] = 22;

    int x, y;
    StringBuilder builder = new StringBuilder();
    for (x = 0;  x < rows; x++)
    {
        for (y = 0; y < columns; y++)
        {
            builder.append(numbers[x][y] + " ");
        }
        builder.append("\n");
    }
    JOptionPane.showMessageDialog(null, builder,"Arrays",JOptionPane.INFORMATION_MESSAGE);
    System.exit(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:05:13.360

您不能简单地将`numbers`数组传递给`showMessageDialog()`并期望它知道您希望它如何显示。您必须自己寻找合适的布局。也许您创建一个`JPanel`并在其上布局一些`JLabels`以显示您想要的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:09:18.410

OK 您可以按照以下步骤进行：

```
StringBuilder sBuilder = new StringBuilder();
sBuilder.append("<Html><Body>");
sBuilder.append("<Table>");
for (int i = 0  ; i < numbers.length ;i++)
{
  sBuilder.append("<tr>");
  for ( int j = 0 ; j < numbers[i].length; j++)
  {
    sBuilder.append("<td>"+numbers[i][j]+"</td>");
  }
  sBuilder.append("</tr>");
}
sBuilder.append("</Table>");
sBuilder.append("</Body></Html>");
JOptionPane.showMessageDialog(null, sBuilder.toString(),"Arrays",JOptionPane.INFORMATION_MESSAGE); 
```

# ios - 使用 spinLocation:mid 放大 UIPageViewController

> ID：15388813
> 
> 赞同：1
> 
> 时间：2013-03-13T14:58:25.600
> 
> 标签：ios, uiscrollview, zooming, landscape, uipageviewcontroller

我正在尝试在横向模式的 iPad 上实现具有整洁的翻页动画和缩放两页展览的 PDF 阅读器。

`UIScrollView`我可以通过在`UIPageViewController`里面创建一个来部分地做到这一点。用户能够自然地翻页并使用捏合进行缩放。但是随后出现了两个问题，尽管我在 StackOverFlow、Apple 的文档和许多其他地方进行了很多努力，但[还是](https://stackoverflow.com/questions/9052553/how-to-implement-a-zoomable-uipageviewcontroller-when-in-two-pages-mode)找不到我需要的东西。

**1\. 我无法`PageViewController`在缩放时以正确的分辨率重绘 PDF。**

在调试时，我发现`drawRect`我用来绘制 PDF 的自定义函数接收的默认大小与它在没有缩放的情况下始终接收的默认大小相同。即使页面`frame`现在比整个 iPad 屏幕大得多，该`setNeedsDisplay`功能仍会不断发送请求以在仅 500x700px 上重绘 PDF `rect`。所以，图像总是模糊的。

当我尝试手动更改页面的`frame`内部时`PageViewController`，我最终遇到了一些非常奇怪的行为，并且只有当我在 PageViewController 上再次向前和向后导航时页面才正确呈现。换句话说，它没有工作。

**2\. 应用缩放时无法忽略翻页。**

理想的情况是`PageViewController`缩放时无法导航。一旦用户回到 1:1 缩放，它的行为将与任何其他 PageViewController 一样。有没有办法*仅*在这些特定情况下从 PVC 中“窃取”手势？

我正在寻求帮助，但实际上在想：我是不是从错误的地方看这个问题？有没有更好的方法来实现这些功能？

提前感谢您的帮助。

# sass - 如何写“IF值IN数组”？

> ID：15388814
> 
> 赞同：6
> 
> 时间：2013-03-13T14:58:28.840
> 
> 标签：sass, conditional-statements

嗨，我是 SASS 新手，想知道如何编写类似“ `if value in array`”的内容

例如：

```
$animal : dog;
$landAnimal : (dog, cat, lion);
$seaAnimal : (fish, squid, whale);

//keyword IN doesn't work
@if $animal in $landAnimal{
    //do something
}@else if $animal in $seaAnimal{
    //do something
} 
```

我尝试搜索文档和谷歌搜索，但没有找到任何答案。这里有人有解决方案吗？我相信这很简单。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T15:21:20.170

您正在寻找该`index`功能： [http ://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#index-instance_method](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#index-instance_method)

```
@if index($landAnimal, $animal) {
    //do something
} @else if index($seaAnimal, $animal) {
    //do something
} 
```

# jquery - jQuery切换不适用于表单上的图像/复选框

> ID：15388818
> 
> 赞同：1
> 
> 时间：2013-03-13T14:58:34.270
> 
> 标签：jquery, wordpress

我有一个表单设置，它使用 DIV 作为复选框的切换。我有一些 jQuery 代码可以监视 DIV 以进行单击，然后切换类以更改图像。很容易，对吧？

我的一切工作都很好，但是当我使用复选框加上产品选项定价（由我正在使用的表单和购物车的插件决定）时，jQuery 不起作用。

我假设有另一个类，或者与定价结构相关的东西，覆盖了代码，但 DIV 在工作和非工作版本之间看起来是一样的。我对正在发生的事情感到茫然——根据我所看到的，jQuery 应该仍然可以工作。

你可以在这里查看表格：http: [//bit.ly/YZBdbc](http://bit.ly/YZBdbc)

我已经发布了两个复选框示例，因此您可以看到差异（在“选择您的选项”下）。最上面的一个可以在视觉上按照我的意愿工作，但不添加定价，底部的不切换，但定价有效。*叹。*

在此先感谢您的帮助！

编辑：这是 jQuery 代码：

```
jQuery('#cart_option_1').click(function() {
    jQuery(this).toggleClass('active');
});
    jQuery('#cart_option_2').click(function() {
    jQuery(this).toggleClass('active');
});
    jQuery('#cart_option_3').click(function() {
    jQuery(this).toggleClass('active');
}); 
```

这是工作块中的 DIV 代码：

`<div class='ginput_container'><ul class='gfield_checkbox' id='input_1_25'><li class='gchoice_25_1'><input name='input_25.1' type='checkbox' value='Month-to-Month +$10.00' id='choice_25_1' tabindex='2' /><label for='choice_25_1'><div id="cart_option_1b"></div></label></li>`

以及来自非工作块的代码（基本相同）：

`<div class='ginput_container'><ul class='gfield_checkbox' id='input_1_26'><li class='gchoice_26_1'><input name='input_26.1' type='checkbox' value='Month-to-month|10' id='choice_26_1' tabindex='5' /><label for='choice_26_1'><div id="cart_option_1"></div></label></li>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:19:29.627

把它变成一个班级。

```
<div class="cart_option" id="cart_option_1"></div> 
```

然后将点击事件应用到类。

```
$('.cart_option').on('click',function(){
    $(this).toggleClass('active');
}); 
```

为澄清而编辑：您仍然可以将唯一图像应用于`cart_option_1`, `cart_option_1b`, 等等，但点击事件适用于所有人，因为它们都具有关联的类。

# c++ - 使用之前的一些属性重新启动应用程序

> ID：15388821
> 
> 赞同：0
> 
> 时间：2013-03-13T14:58:42.297
> 
> 标签：c++, qt

我有一个 Qt 应用程序，我想在其中放置一个重新启动按钮，但是当它重新启动时，我希望它自动重新连接到我的蓝牙设备。这是我的代码：

```
// Restart app
void gui::restartapp()
{
    int index_combo;

    index_combo= ui->devices_infile->currentIndex();

    QProcess::startDetached(QApplication::applicationFilePath());
    QCoreApplication::exit()

    char *dest;
    dest = addr_infile[index_combo];

    sock = linkup_directmain(dest, sock);

    if (sock != 0 && sock >0)
    {
        ui->console_1->setText("Connected to:");
        ui->console_2->setText(name_infile[index_combo]);
    }

    else if (sock == -1)
    {
        ui->console_1->setText("Error connecting");
        ui->console_2->setText("Check device status");
    }
} 
```

但它只会重新启动。任何的想法？

先感谢您。

更新：

我让它工作。我稍后会发布它以防其他人需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:14:30.770

`QCoreApplication::exit()`只告诉应用程序退出。之后的代码在与被调用`exit()`的应用程序实例相同的应用程序实例中执行。`restartapp()`该应用程序的另一个实例只是启动。您应该将设置存储在某处，然后在应用程序启动时加载它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:31:13.340

```
// Restart app
void gui::restartapp()
{
    close_s(sock);

    last_session = true;

    settings.setValue("deviceid", ui->devices_infile->currentIndex());
    settings.setValue("lastsession", last_session);

    QProcess::startDetached(QApplication::applicationFilePath());
    QCoreApplication::exit();
} 
```

# ember.js - 将自定义结果搜索/加载到 ember 商店？

> ID：15388825
> 
> 赞同：2
> 
> 时间：2013-03-13T14:58:58.793
> 
> 标签：ember.js

一直在做一些搜索和阅读 ember-data 的源代码，但我无法弄清楚如何做到这一点。所以我的索引页面像这样加载数据：

```
App.SaleRecordsRoute = Ember.Route.extend({
  setupController: function(controller) {
    controller.set('content', App.SaleRecord.find());
  }
}); 
```

在服务器上，我只回复最新的 10 条记录。我还想做的是查询相同的 url，传递一个搜索字段。对照数据库中的几个字段检查此搜索字段或条件。这些字段在 join 语句中跨越几个不同的模型，所以我认为我不能这样做：

```
App.SaleRecord.find({ book.title: critera }); 
```

Book 是 belongsTo 记录。

在该路由的控制器中，这是我至少用于查询数据的内容，它按预期工作：

```
App.SaleRecordsController = Ember.ArrayController.extend({
  search: function() {
    $.getJSON('/search?criteria=' + $('.criteria').val(), function(data) {

    });
  }
}); 
```

但我不确定从这里做什么。

1.  如果某些记录由于是最近 10 个结果的一部分而已经在商店中，我需要先卸载它们吗？
2.  如何从 json 哈希将数据加载到存储中？我知道如何创建记录并填充它，所以我可以遍历数据，但我想知道是否有一个衬里。

谢谢。我希望问题很清楚:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T20:36:47.807

设法找到答案，主要归功于这里的问题/答案：[Ember.js Ajax call is not working as expected](https://stackoverflow.com/questions/15653525/ember-js-ajax-call-is-not-working-as-expected)

我将 ajax 调用移出控制器并进入模型函数。所以就像在链接的问题中一样，我制作了一个自定义函数来调用控制器：

```
LocalBookFinder.SaleRecord = DS.Model.extend({
  isbn: DS.attr('string'),
  price: DS.attr('number'),
  condition: DS.attr('string'),
  book: DS.belongsTo('LocalBookFinder.Book')
});

LocalBookFinder.SaleRecord.reopenClass({
  search: function(criteria) {
    var result = Ember.ArrayProxy.create({content: []});
    var _this = this;
    $.getJSON('/search?criteria=' + criteria, function(data) {
      var ids = [];
      var arr = data.sale_records;
      for(var i = 0; i < arr.length; i++) {
        var sale_record = arr[i];
        if(ids.indexOf(sale_record.book_id) == -1) {
          ids.push(sale_record.book_id);
        }
      }

      var ajax_count = ids.length;
      var sale_records = [];
      for(var i = 0; i < ids.length; i++) {
        $.getJSON("/books/" + ids[i], function(data) {
          for(var j = 0; j < arr.length; j++) {
            var sale_record = arr[j];
            if(sale_record.book_id == data.book.id) {
              sale_record.book = data.book;
              sale_records.push(sale_record);
            }
          }
          if(i == ajax_count) {
            console.log(sale_records);
            result.set('content', sale_records);
          }
        });
      }
    });
    return result;
  }
}); 
```

然后在控制器中，我只需执行以下操作：

```
search: function() {
  var _this = this;
  var result = LocalBookFinder.SaleRecord.search($('.criteria').val());
  this.set('content', result);
} 
```

我认为模型中搜索功能的第一个 ajax 位非常简单。它请求数据，并设置一个空的 ember 数组代理来存储它。现在，由于我从子记录加载书籍图像和标题，我需要单独调用它们。因此，使用第一个结果集，我填充了我需要请求的书籍 ID 数组。对于每个 ajax 调用，我都会遍历销售记录数组，并将 book 属性设置为生成的哈希数据。完成后（通过计数器），我使用 JSON 数据设置结果内容。

# entity-framework - 如何在与实体框架的一对多关系中删除子记录？

> ID：15388829
> 
> 赞同：1
> 
> 时间：2013-03-13T14:59:06.237
> 
> 标签：entity-framework, parent-child

这个问题已经被讨论/问了很多次，但我仍然找不到这个问题的决定性答案。我为冗长的解释提前道歉，这对我来说意义重大，以至于您花时间阅读并理解我的问题。

我正在为基于预订的多层商业实体开发一个停车场管理系统，在该系统中，客户致电系统管理员，他们让他们知道他们希望在什么日期和时间范围内有可用的停车场给他们。

对于有人在系统中注册一个新停车场，他们首先必须注册并选择一个楼层。所以楼层和停车场之间是一对多的关系。一层可以有很多停车场。这就是我的类的实现方式：

**楼层类**

```
public class Nivel
{
    #region Campos

    int _IdNivel;

    #endregion

    #region Propiedades

    public int IdNivel
    {
        get
        {
            return _IdNivel;
        }

        private set
        {
            _IdNivel = value;
        }
    }

    public string NombreNivel { get; set; }
    public int CantidadParqueos { get; set; }
    public List<Parqueo> Parqueos { get; set; }

    #endregion

    #region Constructores

    public Nivel()
    {
        Parqueos = new List<Parqueo>();
    }

    #endregion
} 
```

**停车场类**

```
public class Parqueo
{
    #region Campos

    int _IdParqueo;
    int _IdNivel;

    #endregion

    #region Propiedades

    public int IdParqueo
    {
        get
        {
            return _IdParqueo;
        }

        private set
        {
            _IdParqueo = value;
        }
    }

    public int IdNivel
    {
        get
        {
            return _IdNivel;
        }
        private set
        {
            _IdNivel = value;
        }
    }

    public string NombreParqueo { get; set; }
    public string EstadoParqueo { get; set; }
    public Nivel Nivel { get; set; }

    #endregion

    #region Constructores

    public Parqueo()
    {

    }

    public Parqueo(string NombreParqueo, string EstadoParqueo)
    {            
        this.NombreParqueo = NombreParqueo;
        this.EstadoParqueo = EstadoParqueo;
    }

    #endregion
} 
```

现在这一切都很好，花花公子。正如标题所说，我的主要问题与删除给定楼层上的特定停车场有关。我已经解决了这个问题，但我想要一个比我已经拥有的更优雅的解决方案。这是我在停车场登记表的表单加载事件中的内容：

```
 private void FrmRegistroParqueos_Load(object sender, EventArgs e)
    {
        this.groupBox3.Left = (this.Parent.Width / 2) - (this.groupBox3.Width / 2);
        this.groupBox3.Top = (this.Parent.Height / 2) - (this.groupBox3.Height / 2);            

        contexto.Niveles.Include("Parqueos").Load();            

        bindingSourceNiveles.DataSource = contexto.Niveles.Local.ToBindingList<Nivel>();

        bindingSourceParqueos.DataSource = bindingSourceNiveles;

        bindingSourceParqueos.DataMember = "Parqueos";

        this.DgvNiveles.DataSource = bindingSourceNiveles;
        this.DgvParqueos.DataSource = bindingSourceParqueos;            

        if (this.DgvNiveles.Rows.Count > 0)
        {
            this.DgvNiveles.ClearSelection();
        }
    } 
```

简而言之，这就是我正在做的事情：我正在实例化上下文以及两个绑定源，以便我可以使用两个 datagridviews 实现主/详细信息表单，以便在其中一个 datagridviews 上选择特定楼层来填充另一个datagridview 与所选楼层上的可用停车场。然后，我对上下文运行查询，以便我可以将数据库中所有可用的楼层加载到本地内存中，包括停车场，以便填充绑定源并将信息反映到 datagridviews。

这是我删除选定停车场的代码：

```
 private void BtnEliminarParqueo_Click(object sender, EventArgs e)
    {
        ((Nivel)bindingSourceNiveles.Current).CantidadParqueos -= 1;

        bindingSourceNiveles.ResetCurrentItem();            

        Parqueo parqueoEliminado = new Parqueo();

        parqueoEliminado = (Parqueo)bindingSourceParqueos.Current;

        bindingSourceParqueos.RemoveCurrent();

        contexto.Parqueos.Remove(parqueoEliminado);

        contexto.SaveChanges();
    } 
```

如果您了解实体框架，那么您已经知道一些背景信息。从导航对象集合中删除相关的子对象实际上并没有从数据库中删除该对象：它只是删除了父子对象之间的关系。现在，在我的代码中，楼层和停车场之间建立的关系是严格的——如果没有与特定楼层相关的停车场，就不能添加停车场。这意味着停车场表中的外键不可为空。因此，通过从楼层的停车场集合中删除它来删除我的程序中的特定停车场违反了此规则，然后上下文抛出一个异常，说我在调用上下文上的方法 SaveChanges 时尝试将外键设置为空。

由于这种繁琐的行为，我在找到我的解决方案之前尝试了一种解决方法：如果实体框架不允许我通过程序中的对象删除子对象，那么我会通过从上下文本身中删除它来删除它，这样然后这些更改会反映到我的停车场的 datagridview 中，用户可以看到停车场确实被移除了。现在，这种方法“有效”，因为它确实确实从数据库中删除了子记录，但是停车场 datagridview 抛出一个索引越界异常，说在删除的停车场的位置没有任何东西曾是。这是异常的图片，我很抱歉无法在此处插入图片（我没有足够的声望点，这是我第一次在这里提问）：

[https://www.dropbox.com/s/vank28utf7bpzdg/Exception.png?m](https://www.dropbox.com/s/vank28utf7bpzdg/Exception.png?m)

这个失败的解决方法的代码给了我一个讨厌的异常（顺便说一下，在单击消息框上的确定按钮后触发超过 3 次）：

```
 private void BtnEliminarParqueo_Click(object sender, EventArgs e)
    {
        ((Nivel)bindingSourceNiveles.Current).CantidadParqueos -= 1;

        bindingSourceNiveles.ResetCurrentItem();            

        contexto.Parqueos.Remove((Parqueo)bindingSourceParqueos.Current);

        contexto.SaveChanges();
    } 
```

虽然失败了，但这是我想在我的程序中实现的，在我看来，事情应该是这样的。通过对象集合删除当前选定的对象并将其反映回数据库或从数据库中删除子记录并将其反映回对datagridviews的更改-这就是我想要的。但这些都不起作用，第一个解决方案不起作用，因为我的外键中不能有空值，第二个解决方案是因为 datagridview 抛出异常。我只想能够以用户可以在datagridview中实际看到的方式删除我的datagridview中的一条记录，并从数据库中删除它。

因此，我得出了当前的解决方案：

**1** - 实例化一个新的停车场

**2** - 将其设置为停车场datagridview上当前选择的停车场

**3** - 通过停车场的 bindingsource RemoveCurrent() 方法删除当前选定的对象，以便用户可以看到停车场已从 datagridview 中删除。此时，通过将此对象的外键属性设置为 null 来将关系设置为在上下文中删除

**4** - 通过上下文的 Remove() 方法从数据库中删除已删除的记录

**5** - 在上下文中调用 SaveChanges() 方法，以便从数据库中删除子记录

基本上我正在做的是两次删除对象，一次是为了让用户可以看到停车场已在 datagridview 中删除，另一次是从数据库中删除不相关的子对象（空外键）。这样，当我调用 SaveChanges 时，我可以防止上下文抱怨子记录具有空外键。

在我看来，这是一个丑陋的问题解决方案，我想就您可能对此采取的任何其他方法提供一些反馈。预先感谢您花时间阅读这长篇文字墙，我很抱歉如此冗长，但我觉得有必要准确了解发生了什么。

祝你们有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:53:25.847

您可以尝试使一对多关系成为*识别关系*。您可以通过将外键`Parqueo.IdNivel`from包含`Parqueo`到`Nivel`主键中来做到这一点。的主键`Parqueo`成为复合键，然后由 组成`(IdParqueo, IdNivel)`。

线索是，在识别关系中，为了删除依赖项，您只需`Parqueo`从`Nivel.Parqueos`集合中删除 。当你调用`SaveChanges`removed`Parqueo`时会自动从数据库中删除，从而避免外键约束违反。您无需调用`contexto.Parqueos.Remove(parqueo)`即可将其从数据库中删除。

有关识别关系的更多详细信息和示例如下：

[https://stackoverflow.com/a/11033988/270591](https://stackoverflow.com/a/11033988/270591)

# python - NLTK 的所有可能的 pos 标签是什么？

> ID：15388831
> 
> 赞同：160
> 
> 时间：2013-03-13T14:59:09.057
> 
> 标签：python, nltk

如何找到包含自然语言工具包 (nltk) 使用的所有可能 pos 标签的列表？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2016-07-08T10:22:13.937

为了节省一些时间，这是我从一个小型语料库中提取的列表。我不知道它是否完整，但它应该包含来自 upenn_tagset 的大部分（如果不是全部）帮助定义......

**CC** : 联合，协调

```
& 'n and both but either et for less minus neither nor or plus so
therefore times v. versus vs. whether yet 
```

**CD**：数字，基数

```
mid-1890 nine-thirty forty-two one-tenth ten million 0.5 one forty-
seven 1987 twenty '79 zero two 78-degrees eighty-four IX '60s .025
fifteen 271,124 dozen quintillion DM2,000 ... 
```

**DT** : 决定者

```
all an another any both del each either every half la many much nary
neither no some such that the them these this those 
```

**EX** : 存在的存在

```
there 
```

**IN**：介词或连词，从属

```
astride among upon whether out inside pro despite on by throughout
below within for towards near behind atop around if like until below
next into if beside ... 
```

**JJ**：形容词或数词，序数

```
third ill-mannered pre-war regrettable oiled calamitous first separable
ectoplasmic battery-powered participatory fourth still-to-be-named
multilingual multi-disciplinary ... 
```

**JJR**：形容词，比较级

```
bleaker braver breezier briefer brighter brisker broader bumper busier
calmer cheaper choosier cleaner clearer closer colder commoner costlier
cozier creamier crunchier cuter ... 
```

**JJS**：形容词，最高级

```
calmest cheapest choicest classiest cleanest clearest closest commonest
corniest costliest crassest creepiest crudest cutest darkest deadliest
dearest deepest densest dinkiest ... 
```

**LS** : 列表项标记

```
A A. B B. C C. D E F First G H I J K One SP-44001 SP-44002 SP-44005
SP-44007 Second Third Three Two * a b c d first five four one six three
two 
```

**MD** : 模态辅助

```
can cannot could couldn't dare may might must need ought shall should
shouldn't will would 
```

**NN**：名词、普通、单数或质量

```
common-carrier cabbage knuckle-duster Casino afghan shed thermostat
investment slide humour falloff slick wind hyena override subhumanity
machinist ... 
```

**NNP**：名词、专有名词、单数

```
Motown Venneboerger Czestochwa Ranzer Conchita Trumplane Christos
Oceanside Escobar Kreisler Sawyer Cougar Yvette Ervin ODI Darryl CTCA
Shannon A.K.C. Meltex Liverpool ... 
```

**NNS**：名词，普通，复数

```
undergraduates scotches bric-a-brac products bodyguards facets coasts
divestitures storehouses designs clubs fragrances averages
subjectivists apprehensions muses factory-jobs ... 
```

**PDT** : 预定义器

```
all both half many quite such sure this 
```

**POS** : 属格标记

```
' 's 
```

**PRP**：代词，个人

```
hers herself him himself hisself it itself me myself one oneself ours
ourselves ownself self she thee theirs them themselves they thou thy us 
```

**PRP** $：代词，所有格

```
her his mine my our ours their thy your 
```

**RB**：副词

```
occasionally unabatingly maddeningly adventurously professedly
stirringly prominently technologically magisterially predominately
swiftly fiscally pitilessly ... 
```

**RBR**：副词，比较

```
further gloomier grander graver greater grimmer harder harsher
healthier heavier higher however larger later leaner lengthier less-
perfectly lesser lonelier longer louder lower more ... 
```

**RBS**：副词，最高级

```
best biggest bluntest earliest farthest first furthest hardest
heartiest highest largest least less most nearest second tightest worst 
```

**RP** : 粒子

```
aboard about across along apart around aside at away back before behind
by crop down ever fast for forth from go high i.e. in into just later
low more off on open out over per pie raising start teeth that through
under unto up up-pp upon whole with you 
```

**TO** : "to" 作为介词或不定式标记

```
to 
```

**呃**：感叹词

```
Goodbye Goody Gosh Wow Jeepers Jee-sus Hubba Hey Kee-reist Oops amen
huh howdy uh dammit whammo shucks heck anyways whodunnit honey golly
man baby diddle hush sonuvabitch ... 
```

**VB**：动词，基本形式

```
ask assemble assess assign assume atone attention avoid bake balkanize
bank begin behold believe bend benefit bevel beware bless boil bomb
boost brace break bring broil brush build ... 
```

**VBD** : 动词，过去式

```
dipped pleaded swiped regummed soaked tidied convened halted registered
cushioned exacted snubbed strode aimed adopted belied figgered
speculated wore appreciated contemplated ... 
```

**VBG** : 动词、现在分词或动名词

```
telegraphing stirring focusing angering judging stalling lactating
hankerin' alleging veering capping approaching traveling besieging
encrypting interrupting erasing wincing ... 
```

**VBN** : 动词，过去分词

```
multihulled dilapidated aerosolized chaired languished panelized used
experimented flourished imitated reunifed factored condensed sheared
unsettled primed dubbed desired ... 
```

**VBP**：动词，现在时，不是第三人称单数

```
predominate wrap resort sue twist spill cure lengthen brush terminate
appear tend stray glisten obtain comprise detest tease attract
emphasize mold postpone sever return wag ... 
```

**VBZ**：动词，现在时，第三人称单数

```
bases reconstructs marks mixes displeases seals carps weaves snatches
slumps stretches authorizes smolders pictures emerges stockpiles
seduces fizzes uses bolsters slaps speaks pleads ... 
```

**WDT** : WH-确定器

```
that what whatever which whichever 
```

**WP** : WH-代词

```
that what whatever whatsoever which who whom whosoever 
```

**WRB** : Wh-副词

```
how however whence whenever where whereby whereever wherein whereof why 
```

* * *

## 回答 #2

> 赞同：166
> 
> 时间：2013-03-13T15:12:23.387

[这本书](http://nltk.org/book/ch05.html)有一个说明如何找到标签集的帮助，例如：

```
nltk.help.upenn_tagset() 
```

其他的可能类似。（注意：也许你首先必须`tagsets`从下载助手的*模型*部分下载这个）

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2013-03-13T15:33:50.727

标签集取决于用于训练标注器的语料库。默认标注器`nltk.pos_tag()`使用[Penn Treebank Tag Set](http://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html)。

在 NLTK 2 中，您可以检查哪个标记器是默认标记器，如下所示：

```
import nltk
nltk.tag._POS_TAGGER
>>> 'taggers/maxent_treebank_pos_tagger/english.pickle' 
```

这意味着它是在 Treebank 语料库上训练的最大熵标注器。

`nltk.tag._POS_TAGGER`在 NLTK 3 中不再存在，但[文档指出](http://www.nltk.org/api/nltk.tag.html)现成的标记器仍然使用 Penn Treebank 标记集。

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2015-09-01T16:46:21.590

以下内容可用于访问以缩写为键的字典：

```
>>> from nltk.data import load
>>> tagdict = load('help/tagsets/upenn_tagset.pickle')
>>> tagdict['NN'][0]
'noun, common, singular or mass'
>>> tagdict.keys()
['PRP$', 'VBG', 'VBD', '``', 'VBN', ',', "''", 'VBP', 'WDT', ... 
```

* * *

## 回答 #5

> 赞同：37
> 
> 时间：2016-12-14T18:53:29.937

参考资料可在[官方网站上找到](https://www.ling.upenn.edu/courses/Fall_2003/ling001/penn_treebank_pos.html)

从那里复制和粘贴：

*   抄送 | 协调连词 |
*   光盘 | 基数|
*   DT | 确定者 |
*   前 | 存在*那里*|
*   固件 | 外来词 |
*   输入 | 介词或从属连词 |
*   JJ | 形容词 |
*   JJR | 形容词，比较级 |
*   JJS | 形容词，最高级 |
*   LS | 列表项标记 |
*   医学博士 | 模态 |
*   神经网络 | 名词，单数或质量 |
*   神经网络 | 名词，复数 |
*   神经网络 | 专有名词，单数 |
*   神经网络 | 专有名词，复数 |
*   光动力技术 | 预定者 |
*   销售点 | 所有格结尾 |
*   PRP | 人称代词 |
*   PRP$ | 所有格代词 |
*   RB | 副词 |
*   RBR | 副词，比较 |
*   苏格兰皇家银行 | 副词，最高级 |
*   反相| 粒子 |
*   SYM | 符号 |
*   到 | *到*|
*   呃 | 感叹词 |
*   VB | 动词，基本形式 |
*   VBD | 动词，过去式 |
*   VBG | 动词、动名词或现在分词 |
*   宽带网络 | 动词，过去分词 |
*   VBP | 动词，非第三人称单数现在时 |
*   VBZ | 动词，第三人称单数现在时 |
*   看门狗| Wh-确定器 |
*   可湿性粉剂 | 代词 |
*   WP$ | 所有格 wh 代词 |
*   水利局 | Wh-副词 |

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-02-20T04:28:37.287

```
['LS', 'TO', 'VBN', "''", 'WP', 'UH', 'VBG', 'JJ', 'VBZ', '--', 'VBP', 'NN', 'DT', 'PRP', ':', 'WP$', 'NNPS', 'PRP$', 'WDT', '(', ')', '.', ',', '``', '$', 'RB', 'RBR', 'RBS', 'VBD', 'IN', 'FW', 'RP', 'JJR', 'JJS', 'PDT', 'MD', 'VB', 'WRB', 'NNP', 'EX', 'NNS', 'SYM', 'CC', 'CD', 'POS'] 
```

基于 Doug Shore 的方法，但使其更易于复制粘贴

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-28T19:28:40.370

您可以在此处下载列表：ftp: [//ftp.cis.upenn.edu/pub/treebank/doc/tagguide.ps.gz](ftp://ftp.cis.upenn.edu/pub/treebank/doc/tagguide.ps.gz)。它包括令人困惑的词性、大小写和其他约定。此外，[维基百科](https://en.wikipedia.org/wiki/Brown_Corpus)有一个与此类似的有趣部分。部分：使用的词性标签。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-16T19:00:59.487

只需逐字运行。

```
import nltk
nltk.download('tagsets')
nltk.help.upenn_tagset() 
```

`nltk.tag._POS_TAGGER`不会工作。它将给出**AttributeError: module 'nltk.tag' has no attribute '_POS_TAGGER'**。它不再在 NLTK 3 中可用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-26T20:14:44.367

在 python 中运行以下代码以获取有关所有 pos 标签的信息。

```
import nltk
nltk.help.upenn_tagset() 
```

# c - 生成一个可变长度的空白字符数组

> ID：15388835
> 
> 赞同：1
> 
> 时间：2013-03-13T14:59:13.597
> 
> 标签：c, printf, space

我正在用 C 编写一个代码，该代码应该打印到屏幕上（使用 printf()）一个乘法表，其中右下角（表的最大乘积）作为 MaxMult 传递给函数。

例如对于 MaxMult = 4 它应该打印：

```
 1  2  3  4

  2  4  6  8

  3  6  9 12

  4  8 12 16 
```

要求是表格将向右对齐，这就是我的问题：

对于每个数字，其左侧的空格数是不同的。并且因为我需要它遵循 MaxMult 左侧只有 1 个空格的要求，所以其他所有内容都参考它。

起初我想也许我可以将一个变量传递给 printf。像这样的东西：

```
printf("% Num_Of_Wite_Space d", currNum) 
```

但我似乎无法做到这一点。

所以现在我需要一种方法来生成一串空白，根据每个数字的位数长度不同，因此将 IT 传递给 printf。（希望我足够清楚..）

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:03:22.587

> 像这样的东西：
> 
> `printf("% Num_Of_Wite_Space d", currNum)`
> 
> 但我似乎无法做到这一点。

你当然可以这样做。语法是：

```
printf("%*d", fieldWidth, currNum); 
```

请注意，fieldWidth 是（空格 + 数字）的总宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:01:20.760

最简单的方法是为每个值使用固定的字段宽度，例如

```
printf("%3d", a[i][j]); 
```

这将导致每个输出值在必要时用前导空格填充，以提供 3 的字段宽度，例如

```
1  2  3  4

2  4  6  8

3  6  9 12

4  8 12 16 
```

显然，如果您需要打印超过两位数的值，您应该相应地增加字段宽度。

如果您需要在运行时确定而不是在编译时固定的字段宽度，您可以使用：

```
printf("%*d", field_width, a[i][j]); 
```

有关详细信息，请参阅[man printf](http://linux.die.net/man/3/printf)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:15:58.133

这不是太难：

```
int width = 10; //< number of chars in one column
printf("%*d", width, a[i][j]); 
```

您可以将列宽设置为固定，或使用数组中的一些计算值：

```
int width[COLS];
int a[ROWS][COLS];
int row, col;

... // fill in a and width

for (row = 0; row < ROWS; ++row)
{
    for (col = 0; col < COLS; ++col)
    {
        printf("%*d", width[col], a[row][col]);
    }
    printf("\n");
} 
```

# nhibernate - 使用 Fluent Validator 验证 Bool

> ID：15388840
> 
> 赞同：7
> 
> 时间：2013-03-13T14:59:24.423
> 
> 标签：nhibernate, fluent-nhibernate, fluentvalidation

我想使用流利的验证器验证 bool 属性。我应该使用哪种方法？

.NotNull() 和 .NotEmpty() 函数不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-05T16:34:02.827

你应该使用`.NotNull()`.

`NotEmpty()`将仅`true`作为有效财产。`NotNull()`将把`true`和`false`作为有效属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-20T11:22:44.810

为了使用流利的验证器验证布尔值：

创建以下规则

```
 RuleFor(x => x.BooleanProperty)
            .Must(ValidateBoolean)
            .WithErrorCode("Boolean Validation Failed"); 
```

定义谓词验证器

```
 private bool ValidateBoolean(T arg1, bool arg2, PropertyValidatorContext arg3)
    {
        // validate arg2, return true if validation successful or false if failed
        throw new System.NotImplementedException();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T21:45:58.353

请看看[这个问题](https://stackoverflow.com/questions/9808794/validate-checkbox-on-the-client-with-fluentvalidation-mvc-3)。它已成功回答，我想这就是您要寻找的。

他们在其中创建流利的验证器来检查是否`@Html.CheckBox`被选中。如果我理解你的问题，这正是你要找的。

请让我知道这是否有帮助。- 谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:01:32.763

尝试使用`.Equal(true)`- 那不能这样做。

# if-statement - 一周中某天的 IF 语句

> ID：15388848
> 
> 赞同：0
> 
> 时间：2013-03-13T14:59:43.853
> 
> 标签：if-statement, dayofweek

我的 winForm 上有一组 7 个复选框，允许用户选择他们希望在一周中的哪几天分配正在创建的订单。我正在尝试创建正确实现这些复选框决策的 IF 语句。我尝试了许多 If、IfElse 和 Select 语句的组合，但都无济于事。

```
If cbMon.Checked = True Then
            .WriteString("Monday")
            If cbTues.Checked = True Then
                .WriteString("Tuesday")
                If cbWed.Checked = True Then
                    .WriteString("Wednesday")
                    If cbThur.Checked = True Then
                        .WriteString("Thursday")
                        If cbFri.Checked = True Then
                            .WriteString("Friday")
                            If cbSat.Checked = True Then
                                .WriteString("Saturday")
                                If cbSun.Checked = True Then
                                    .WriteString("Sunday")
                                End If
                            End If
                        End If
                    End If
                End If
            End If
        End If 
```

到目前为止，我所拥有的效果最好。但问题是，如果我在 winForm 上选中“星期一、星期二和星期四”...星期一和星期二会出现，但星期四会被跳过，因为它显然超出了 if 语句。有什么指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:05:21.503

问题是你不应该嵌套你的 if 语句。在您的示例中，只有在检查前一天（一直到星期一）时，代码的任何部分才会生效。

只需将 if 语句展平，不要嵌套它们，如下所示：

```
If cbMon.Checked = True Then
            .WriteString("Monday")
End If

If cbTue.Checked = True Then
            .WriteString("Tuesday")
End If 
```

...ETC...

如果您希望用户只选择一个选项，那么下拉列表或单选按钮列表可能比复选框更合适。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T15:05:08.507

不要使用嵌套

如果这里需要循环很简单

```
Initialise an array

if monday
 add monday to array

if tuesday checked
 add tuesday to array

.
.
.
if sunday checked
 add sunday to array

get the string by append all values in array with ',' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:11:22.373

是的，你的问题是你嵌套了你的 if 语句，这就是为什么周四被跳过，因为周三被证明是错误的。

您需要做的是运行一个 for 循环，该循环将遍历每个复选框并检查其选中的值是否为真。

# html - CSS - 标题留在容器顶部

> ID：15388857
> 
> 赞同：0
> 
> 时间：2013-03-13T15:00:10.430
> 
> 标签：html, css

我有这个可以滚动内容的容器。我希望这个容器中的标题始终保持在顶部。

[http://jsfiddle.net/z9ze5/](http://jsfiddle.net/z9ze5/)

容器：

```
.lists {
    width: 300px;
    height: 250px;  
    margin: 30px auto;
    background: #39C;
    overflow: scroll;
    position: relative;
} 
```

标题：

```
.box_header {
    width: 100%;
    height:30px;
    overflow:hidden;
    position: absolute;
    margin: 0;
    background: #DDD;
    z-index: 999;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:15:14.340

如果您想要非 css 修复，请添加此侦听器...

```
$('.lists').scroll(function() {
    $('.box_header', this).css('top', $(this).scrollTop()+'px');
}); 
```

然后更改 .lists css 以提供相对定位

```
.box_header {
    width: 100%;
    height:30px;
    overflow:hidden;
    position: relative;
    margin: 0;
    background: #DDD;
    z-index: 999;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T15:16:07.137

如果您愿意更改标记，这是一种方法：

```
<div class="lists">
    <header class="box_header">
        <h1>HEADER 2</h1>
        <div class="setting" id="btn2"></div>
    </header>
    <section class="content">
        <p>Lorem Ipsum ....</p>
    </section>
</div> 
```

将滚动区域包裹在`<section>`（或其他块级元素）中。

对于您的 CSS：

```
.lists {
width: 300px;
height: 250px;
margin: 30px auto;
background: #39C;
position: relative;
}
section.content {
width: 300px;
height: 220px;
margin: 0 auto;
background: #39C;
position: relative;
top: 30px;
overflow: scroll;
} 
```

请看小提琴：http: [//jsfiddle.net/audetwebdesign/nGGXx/](http://jsfiddle.net/audetwebdesign/nGGXx/)

**更高级的例子**

如果您研究以下示例：

[http://jsfiddle.net/audetwebdesign/fBNTP/](http://jsfiddle.net/audetwebdesign/fBNTP/)

你可以看到你的滚动框可以如何应用在一个半灵活的布局中。我将两个滚动框并排排列，并使其宽度与页面宽度成比例。

高度更难调整。我固定了父容器的高度，见以下规则：

```
.contentWrapper {
    border: 1px solid red;
    margin-top: 1.00em;
    padding: 30px 0;
    overflow: auto;
    height: 400px;
} 
```

如果将高度从 400px 更改为其他值，滚动框将自行调整。

希望这些示例能让您和其他人对如何构建这些更高级的布局设计有更多的了解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:02:49.043

相对位置中的任何绝对位置对于相对容器都是绝对的。为了使标题保持原位，您需要将其放置在滚动容器上方而不是内部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T23:28:52.960

查看添加位置：固定到您的标题 div .box_header。您可能必须将框标题 div 的高度的填充添加到 section.content ，但因为您将其设置为 30px 应该没问题。IE6 及更低版本存在固定定位问题，但希望我们现在可以忍受 - 使用它的人比仍在听 Moby 的人少。

# jquery - 隐藏输入 simple_form，Ruby on Rails

> ID：15388858
> 
> 赞同：2
> 
> 时间：2013-03-13T15:00:14.320
> 
> 标签：jquery, ruby-on-rails, simple-form, input-field

我有一个表单，其中某些文本字段仅在某些条件下才可见。基本上，有一个选择列表，根据选择的内容，是否显示其他字段。因此，默认情况下，我需要隐藏以 simple_form gem 生成的表单包装输入的 div。

例子：

```
= simple_form_for
  = f.select ...
  = f.input :s_n1, :required => true
  = f.input :s_n2, :required => true
  = f.input :s_n3, :required => true 
```

它的行为应该与 jqyuery 的 hide() 相同：

```
$("div.s_n1").hide();
$("div.s_n2").hide();
$("div.s_n3").hide(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:25:56.253

在简单的表单上，如果您需要将输入字段设为隐藏，请使用这些代码 <%= f.input :s_n ,:as => :hidden%> 我认为它比使用 jquery 代码更好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-19T17:18:42.417

使用简单的表单`wrapper_html`属性：

```
= simple_form_for
  = f.select ...
  = f.input :s_n1, required: true, wrapper_html: { class: 'hide' }
  = f.input :s_n2, required: true, wrapper_html: { class: 'hide' }
  = f.input :s_n3, required: true, wrapper_html: { class: 'hide' } 
```

# reporting-services - 放置报表查看器/报表管理器图标的位置

> ID：15388860
> 
> 赞同：4
> 
> 时间：2013-03-13T15:00:17.513
> 
> 标签：reporting-services, ssrs-2008

我在哪里放置 SQL Server 报告服务 2008 的 FAVICON.ICO 文件？

我可以在网上找到 2005（IIS 根目录并重新启动 IIS）的 2008 R2（RS 安装和重新启动服务下方的 ReportManager 目录）和 2012（与 2008 R2 相同？）的信息，但这些似乎都不适用于 2008。

重申这个问题，如果您不使用 IIS，那么使用 SSRS 2008 的服务器上的 webroot 在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T03:48:02.753

favicon 本身与 SSRS 没有任何关系，只要它位于网站的根文件夹中，[大多数浏览器](http://en.wikipedia.org/wiki/Favicon#How_to_use)都会自动检索它。添加网站图标的唯一其他方法是向网页`<link>`的一部分添加标签，但我不相信您可以在这种程度上修改报告管理器网站。`<head>`

确保您已将图标放置在整个网站的实际根目录中，而不仅仅是报表管理器的根文件夹，因为它通常映射为`http://reportserver/reports/`将其放置在实际的 webroot 中，据我所知，这是默认的IIS 是`c:\inetpub\wwwroot\`

更新：我不知道 SSRS 2008+ 不再需要 IIS。这太有趣了。

从 2008 年起，SSRS 使用 http.sys 来处理 HTTP 请求，因此它不需要 IIS。这意味着您在配置它的方式上受到严重限制。[MSDN Social 上的这个论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/aa66d29d-a3cd-4996-8de3-3728995047bf/)似乎暗示你不能在 web 根目录中放置任何东西，除非你有 IIS。这篇[博客文章](http://blogs.devhorizon.com/reza/2008/10/20/say-goodbye-to-iis-say-hello-to-httpsys/)提供了有关 http.sys 及其工作原理的更多信息。

MSDN 确实有一个关于[配置内核模式驱动程序 http.sys](http://msdn.microsoft.com/en-au/library/ms184379%28v=sql.105%29.aspx)和[保留 url 名称空间](http://msdn.microsoft.com/en-au/library/ms188682%28v=sql.105%29.aspx)的页面。但是这些都在谈论将请求转发到 SQL 服务器，所以我不确定它是否会有很大帮助。

您可以尝试将 SSRS 服务的虚拟目录更改为 webroot 本身，并将 favicon.ico 文件放在 \Reporting Services\Report Manager\ 文件夹中，但我不确定这是否可行，我无法在片刻。

当然，最简单的解决方案是安装 IIS 并使用它。然后将 favicon.ico 添加到适当的位置会很简单。

# iphone - iOS 应用内购买自动更新订阅免费试用选项不可用？

> ID：15388863
> 
> 赞同：6
> 
> 时间：2013-03-13T15:00:26.143
> 
> 标签：iphone, ios, in-app-purchase, app-store-connect, subscription

从苹果的文档中可以向用户提供免费试用，之后他们将在试用结束时自动计费

> 如果您提供免费试用，它将在用户订阅时开始。免费试用期结束后将自动向他们收费，除非他们关闭了自动续订。如果您选择提供免费试用，将显示一个下拉菜单，让您可以选择免费试用期限。

[http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases_Robert/ManagingIn-AppPurchases.html](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases_Robert/ManagingIn-AppPurchases.html)

现在，当我创建新的自动续订订阅时，我看不到此选项可用。

我看到这样的屏幕，如文档中所示 ![在此处输入图像描述](../Images/2ecfeb2f075780021249b6eee4e14395.png)

有人知道在哪里启用它，或者它甚至可能吗？

还是我必须通过保存免费试用开始日期来手动开发该功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:07:47.527

在 iTunes 中，免费试用自动续订订阅仅适用于作为报亭应用程序管理的应用程序。如果您创建一个新应用并将其标记为报亭，然后创建一个自动更新产品，您可以验证这一点。

干杯!

乔尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T11:21:42.583

对于那些遇到同样问题的人：Apple 更新了他们的文档，现在它说（请注意突出显示的段落）：

“如果您提供免费试用，它将在用户订阅时开始。免费试用结束后将自动向用户收费，除非用户关闭了自动续订。如果您选择提供免费试用，则下降- 将显示下拉菜单，允许您选择免费试用期。

**您必须有一个现有的问题才能提供免费试用。如果您在“管理报亭”页面中没有添加任何问题，您将不会看到添加免费试用的选项。**"

但是，在我的情况下，只需在我的应用程序的管理报亭部分启用报亭模式就足够了。

现在我可以在我的自动续订订阅的持续时间和定价屏幕上看到免费试用选项。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-18T12:01:26.980

您忘记将一个选项设为`YES`. 当您添加`Offer a marketing opt-in incentive?`到您的. 您将有另一个为多少您的. 持续时间可能是`YES``Duration``Auto Renewable Subscription``Option box``days``Incentive Duration`

```
 - 7 days
 - 1 Month
 - 2 Months
 - 3 Months
 - 6 Months
 - 1 Year 
```

查看屏幕截图
![在此处输入图像描述](../Images/a45c612a3174042506c7feb1c350db46.png)

# sql-server-2008 - 在大表上将地址列拆分为多个

> ID：15388866
> 
> 赞同：0
> 
> 时间：2013-03-13T15:00:29.823
> 
> 标签：sql-server-2008, tsql

我有一个包含 500k 行的表，其中地址位于一个字段中，由 Char(13)+Char(10) 分隔。我在表中添加了 5 个字段，希望能将其拆分。

在网上找到了[这个似乎表现良好的拆分功能](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=153458)，因为我无法使用`parsename`，因为它有 5 个部分，而且`.`可能在现场。

这是一个表值函数，因此我必须循环行并更新记录，以前我会使用游标或 sql while 甚至可能使用 c# 来执行此操作，但我觉得它们必须是基于*cte*或*set*的答案做这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:06:06.150

你有几个选择：

您可以创建一个临时表，然后将地址解析到临时表中，然后通过将原始表加入临时表来更新原始表。

或者

您可以编写自己的 T-SQL 函数并在更新语句函数中使用这些函数，如下所示：

```
UPDATE myTable
   SET address1 = myGetAddress1Function(address),
       address2 = myGetAddress2Function(address).... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T15:32:44.363

所以给定一些源数据：

```
CREATE TABLE dbo.Addresses
(
  AddressID INT IDENTITY(1,1),
  [Address] VARCHAR(255),
  Address1  VARCHAR(255),
  Address2  VARCHAR(255),
  Address3  VARCHAR(255),
  Address4  VARCHAR(255),
  Address5  VARCHAR(255)
);

INSERT dbo.Addresses([Address])
SELECT 'foo
bar'
UNION ALL SELECT 'add1
add2
add3
add4
add5'; 
```

让我们创建一个按顺序返回地址部分的函数：

```
CREATE FUNCTION dbo.SplitAddressOrdered
(
    @AddressID  INT,
    @List       VARCHAR(MAX),
    @Delimiter  VARCHAR(32)
)
RETURNS TABLE
AS
    RETURN 
    (
      SELECT  
          AddressID = @AddressID, 
          rn = ROW_NUMBER() OVER (ORDER BY Number), 
          AddressItem = Item 
        FROM (SELECT Number, Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
          CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
        FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
          FROM sys.all_objects) AS n(Number)
        WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, LEN(@Delimiter)) = @Delimiter
      ) AS y
    );
GO 
```

现在您可以执行此操作（您必须运行查询 5 次）：

```
DECLARE 
  @i INT = 1, 
  @sql NVARCHAR(MAX),
  @src NVARCHAR(MAX) = N';WITH x AS 
    (
      SELECT a.*, Original = s.AddressID, s.rn, s.AddressItem
      FROM dbo.Addresses AS a
      CROSS APPLY dbo.SplitAddressOrdered(a.AddressID, a.Address, 
        CHAR(13) + CHAR(10)) AS s WHERE rn = @i
    )';
WHILE @i <= 5
BEGIN
   SET @sql = @src + N'UPDATE x SET Address' + RTRIM(@i)
     + ' = CASE WHEN AddressID = Original AND rn = ' 
     + RTRIM(@i) + ' THEN AddressItem END;';

   EXEC sp_executesql @sql, N'@i INT', @i;

   SET @i += 1;
END 
```

然后您可以删除该`Address`列：

```
ALTER TABLE dbo.Addresses DROP COLUMN [Address]; 
```

然后表有：

```
AddressID  Address1  Address2  Address3  Address4  Address5
---------  --------  --------  --------  --------  --------
1          foo       bar       NULL      NULL      NULL
2          add1      add2      add3      add4      add5 
```

我敢肯定，比我更聪明的人会展示如何在无需循环的情况下使用该功能。

我还可以设想对功能稍作改动，让您可以简单地拉出某个元素……请稍等……

**编辑**

这是一个标量函数，它本身更昂贵，但允许您对表进行一次而不是 5 次：

```
CREATE FUNCTION dbo.ElementFromOrderedList
(
    @List       VARCHAR(MAX),
    @Delimiter  VARCHAR(32),
    @Index      SMALLINT
)
RETURNS VARCHAR(255)
AS
BEGIN
    RETURN 
    (
      SELECT Item 
        FROM (SELECT rn = ROW_NUMBER() OVER (ORDER BY Number),
          Item = LTRIM(RTRIM(SUBSTRING(@List, Number, 
          CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)))
        FROM (SELECT ROW_NUMBER() OVER (ORDER BY [object_id])
          FROM sys.all_objects) AS n(Number)
        WHERE Number <= CONVERT(INT, LEN(@List))
        AND SUBSTRING(@Delimiter + @List, Number, LEN(@Delimiter)) = @Delimiter
      ) AS y WHERE rn = @Index
    );
END
GO 
```

现在，根据上表（更新之前和删除之前），更新很简单：

```
UPDATE dbo.Addresses
  SET Address1 = dbo.ElementFromOrderedList([Address], CHAR(13) + CHAR(10), 1),
      Address2 = dbo.ElementFromOrderedList([Address], CHAR(13) + CHAR(10), 2),
      Address3 = dbo.ElementFromOrderedList([Address], CHAR(13) + CHAR(10), 3),
      Address4 = dbo.ElementFromOrderedList([Address], CHAR(13) + CHAR(10), 4),
      Address5 = dbo.ElementFromOrderedList([Address], CHAR(13) + CHAR(10), 5); 
```

# java - 在 gridLayout 中设置 JButton 大小

> ID：15388870
> 
> 赞同：1
> 
> 时间：2013-03-13T15:00:40.930
> 
> 标签：java, swing, awt, jbutton

如何在gridlayout中设置jbutton的大小？否则按钮大小有很多宽度，它不听 setSize 或 setBounds 或 setPreferedSize。

```
 addBut = new JButton("Add");

    addBut.addActionListener(this);
    deleteBut = new JButton("Delete");
    deleteBut.addActionListener(this);
    selectionPanel = new JPanel();
    selectionPanel.setLayout(new GridLayout(2,2));
    TitledBorder selectionBorder = new TitledBorder("Options");
    selectionBorder.setTitleColor(Color.BLUE);
    selectionPanel.setBorder(selectionBorder);
    selectionPanel.add(new JLabel("Department Name"));
    selectionPanel.add(new JTextField(deptName));
    selectionPanel.add(addBut);
    selectionPanel.add(deleteBut);

    selectionPanel.setPreferredSize(new Dimension(900,100)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:10:01.327

我相信设置 GridLayout(2,2) 将覆盖对面板的大小更改。更准确地说，使用 GridBagConStraints；

```
private JTextField field1 = new JTextField();
private JButton addBtn = new JButton("Save: ");

 public void addComponents(Container pane) {
        pane.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
// Components
    c.gridwidth = 1;
    c.weightx = .01;
    c.weighty = .2;
    c.gridx = 0;
    c.gridy = 1;
    pane.add(field1, c);

        c.gridwidth = 1;
    c.weightx = .01;
    c.weighty = .2;
    c.gridx = 0;
    c.gridy = 1;
    pane.add(addBtn, c);
}
public MainView()  {
        //Create and set up the window.
        JFrame frame = new JFrame("NAME");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Set up the content pane.
        addComponents(frame.getContentPane());

        //Display the window.
        frame.pack();
        frame.setVisible(true);
        frame.setResizable(false);
        frame.setSize(400, 125);
        frame.setLocation(400, 300);
    } 
```

# batch-file - 批量将文件复制到一个文件夹，并且只有一个子文件夹深

> ID：15388871
> 
> 赞同：1
> 
> 时间：2013-03-13T15:00:40.790
> 
> 标签：batch-file, copy, cmd, subdirectory

我现在有这个批处理文件，它可以复制`example.jpg`到`C:\Temp`测试文件夹及其所有子文件夹。

我希望它仅将文件复制到测试文件夹中的 1 个子文件夹深处。例如将图片复制到`Test\subfolder`但不复制到`Test\subfolder\subfolder2`

```
@echo off
for /r "C:\Temp\Test" %%f in (.) do (
    copy "C:\Temp\example.jpg" "%%~ff" > nul
)

PAUSE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:08:31.657

如果您只想深入 1 级，请不要使用递归。试试这个：

```
@echo off

set src=C:\Temp\example.jpg
set dst=C:\Temp\Test

copy "%src%" "%dst%" >nul

for /d %%d in ("%dst%\*") do (
  copy "%src%" "%%~fd" >nul
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:32:50.960

```
@ECHO OFF
SETLOCAL
SET destroot=c:\temp
FOR /f "delims=" %%i IN ( ' dir /ad/b "%destroot%"' ) DO ECHO COPY "c:\temp\example.jpg" "%destroot%\%%i\" 
```

简单地显示批处理建议做什么。删除`ECHO`关键字以激活复制并添加`>nul`以抑制“已复制”消息

# powershell - 为 New-AzureStorageAccount cmdlet 指定超时

> ID：15388874
> 
> 赞同：2
> 
> 时间：2013-03-13T15:00:45.707
> 
> 标签：powershell, azure-storage, azure-powershell

有没有办法在使用 [New-AzureStorageAccount] cmdlet 时指定超时值？

通过powershell创建存储帐户时，我偶尔会收到此错误...

> [New-AzureStorageAccount ：对“ https://management.core.windows.net/XXXX/operations/YYYY](https://management.core.windows.net/XXXX/operations/YYYY) ”的 HTTP 请求已超过分配的超时 00:00:59.9930000。分配给此操作的时间可能是较长超时的一部分。在 C:\Temp\20130305_150221\somefile.ps1:212 char:36 + New-AzureStorageAccount <<<< + CategoryInfo : CloseError: (:) [New-AzureStorageAccount], TimeoutException + FullyQualifiedErrorId : Microsoft.WindowsAzure.Management.ServiceManagement。 StorageServices.NewAzureStorageAccountCommand

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:53:34.843

有趣的。目前没有办法为此命令设置超时，在 github 存储库中为 powershell 提交了一个 sisue:: [https://github.com/WindowsAzure/azure-sdk-tools/issues/1175](https://github.com/WindowsAzure/azure-sdk-tools/issues/1175)

如果您对快速修复感兴趣，因为这是一个开源项目，您应该能够通过代码设置超时并在 VS 中编译自己的修复。

# jquery - 添加多个上传文件并清除浏览输入中的文本

> ID：15388875
> 
> 赞同：0
> 
> 时间：2013-03-13T15:00:54.150
> 
> 标签：jquery, file, field, add

我已经自定义了设计上传文件输入，使其在所有浏览器中看起来都一样。现在我想通过单击添加另一个文件链接来一个一个地添加 10 个上传文件输入。这 10 个上传文件在设计上应该与自定义的上传文件输入相同。

我还希望有一个清晰的链接，这样如果用户点击清除，如果上传文件输入中有任何文本，文本应该会变得清晰。

并且我们也可以清除这10个上传文件。

就像我可以同时添加和清除上传文件。

我能在这方面得到任何帮助吗？

这是我的代码：

```
<script language="JavaScript"> 
function validate_fileext() {
        var check = true;
        var error_msg = "Only PDF, JPG, JPEG, HTML, HTM and TIF accepted, please try again.";
            for (var j = 0; j <=upload_number; j++) {
                if (document.getElementById("attachment"+j) != null) {
                    var file = document.getElementById("attachment" + j).value.toLowerCase();
                    if (file != "" && !(file.lastIndexOf(".pdf") > 0 || file.lastIndexOf(".jpg") > 0 || file.lastIndexOf(".jpeg") > 0 ||                
                        file.lastIndexOf(".htm") > 0 || file.lastIndexOf(".html") > 0 || file.lastIndexOf(".tif") > 0)) {
                        check = false;
                       document.getElementById("static_error_message").innerHTML = 'Error : Only PDF, JPG, JPEG, HTML, HTM and TIF accepted as attachment(s).';
                        document.getElementById("attachment" + j).focus();
                        break;
                    }   
                }
            }
           return check; 
} 

function togglePOAttachment(){
   if (document.forms["frm_payment"].opt_payment[0].checked){
        document.getElementById("attachment0").disabled = false;
        document.getElementById("link_clear").setAttribute("href","javascript:resetFileContent();")
        document.getElementById("link_clear").disabled = false;
        document.getElementById('moreUploadsLink').style.visibility = 'visible'; 
   }else if (document.forms["frm_payment"].opt_payment[1].checked) {
         for (var j = 1; j < upload_number; j++) {          
            reSetPOAttachments("f"+j);
         }
        upload_number = 1;
        resetFileContent();
        document.getElementById('moreUploadsLink').style.visibility = 'hidden'; 
        document.getElementById("attachment0").disabled = true;
        document.getElementById("link_clear").disabled = true;
        document.getElementById("link_clear").removeAttribute("href");
   }
}

function resetFileContent(){
    document.getElementById("static_attachment").innerHTML = '<input type="file" name="attachment0" id="attachment0" onchange="document.getElementById(\'moreUploadsLink\').style.display  = \'block\';" /><a  id="link_clear" href="javascript:resetFileContent();">Clear</a> ';   
}

 function reSetPOAttachments(i){
     var elm = document.getElementById(i);
     document.getElementById("moreUploads").removeChild(elm); 
 }   
</script> 
```

当我单击清除链接以清除上传文件输入中的默认文本时，它将输入替换为显示默认值的自定义输入。

这是您将在上述脚本中找到的函数：

```
function resetFileContent(){
    document.getElementById("static_attachment").innerHTML = '<input type="file" name="attachment0" id="attachment0" onchange="document.getElementById(\'moreUploadsLink\').style.display  = \'block\';" /><a  id="link_clear" href="javascript:resetFileContent();">Clear</a> ';   
} 
```

我想为此上传文件输入自定义设计。对于那些重复的人。

* * *

我可以修改从 JavaScript 生成的输入类型文件的样式吗？像下面这样一个：-

```
<script language="JavaScript"> 
 var upload_number = 1; 
function addFileInput()
   {

      var d = document.createElement("div");
      var l = document.createElement("a");
      var file = document.createElement("input");
      file.setAttribute("type", "file");
      file.setAttribute("name", "attachment"+upload_number);
      file.setAttribute("id", "attachment"+upload_number);
      l.setAttribute("href", "javascript:removeFileInput('f"+upload_number+"');");
      l.appendChild(document.createTextNode("Clear"));
      d.setAttribute("id", "f"+upload_number);  
       d.appendChild(file);
      d.appendChild(l);

      document.getElementById("moreUploads").appendChild(d);
      document.getElementById("attachments").value = upload_number;
      upload_number++;
   }
   function removeFileInput(i)
   {
     var elm = document.getElementById(i);
     document.getElementById("moreUploads").removeChild(elm);
   }   
</script> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:15:56.317

**编辑**

好的，我想我现在明白了。不幸的是，您无法修改输入类型文件的样式，因为浏览器供应商认为它存在某种安全风险（您可能在人们没有意识到的情况下上传文件？）

不管怎样，看看这个线程

[如何自定义 <input type="file">？](https://stackoverflow.com/questions/5813344/how-to-customize-html-input-type-file)

**原文**

首先制作添加+新文件按钮和输入文件的目标位置：

```
<!-- runat="server" is only if you are using ASP.Net -->
<div id="addFileTarget"></div>
<input type="button" id="addFileButton" />
<input type="button" id="clearFilesButton" />
<input type="submit" id="uploadFilesButton" runat="server" /> 
```

然后使用jquery将点击事件附加到`addFileButton`

```
var i = 0;

$("#addFileButton").click(function () {
    // define id for upcoming element and increment for next time
    var id = 'file_' + (i++);

    //add new file input element as last child to our div
    $("#addFileTarget").append("<input type='file' id='" + id + "' runat='server' />");
});

$("#clearFilesButton").click(function () {
    // remove all child elements
    $("#addFileTarget").empty();

    // reset IDs
    i = 0;
}); 
```

不确定您将什么用于服务器端技术，但如果它

*   PHP：（`($_FILES)`我认为）

*   ASP.NET：`Request.Files`

两者都是数组。

# selenium - 如何让詹金斯显示跳过的测试

> ID：15388877
> 
> 赞同：1
> 
> 时间：2013-03-13T15:00:58.277
> 
> 标签：selenium, junit, jenkins

我发现了这个詹金斯图：

[https://wiki.jenkins-ci.org/display/JENKINS/TAP+Plugin#TAPPlugin-JenkinsJUnitcompatiblereportsandgraphs](https://wiki.jenkins-ci.org/display/JENKINS/TAP+Plugin#TAPPlugin-JenkinsJUnitcompatiblereportsandgraphs)

它清楚地显示了红色、蓝色和黄色部分，黄色被“跳过”测试。我在测试中定义了一些“忽略”标签，但这些标签在 Jenkins 中没有显示为黄色。我正在运行 JUnit Selenium 测试。

如何让 Jenkins 将跳过的测试显示为单独的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:13:56.723

那是用 TAP（测试任何协议）编写的测试工具。如果您使用 PERL 作为您选择的语言，您可以在模块中设置带有`SKIP`条件的测试。`TEST::More`有关更多信息，请查看[此](http://perldoc.perl.org/Test/More.html)（查看示例代码中的第 26 行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:01:38.350

在邮件列表的[这篇文章中：](http://jenkins.361315.n4.nabble.com/Is-it-possible-to-show-Ignore-JUnit-tests-td1565288.html#a1566166)

> 它适用于 m2 作业类型，因此 Hudson 确实支持这一点。
> 
> 您需要在 m2 作业中深入挖掘以找到实际跳过的测试，但条形颜色为红色=失败蓝色=通过黄色=跳过。

所以这在 Ant 构建中不起作用，只有 Maven 构建。[但是，在 2013-03-07 发布](http://ant.apache.org/antnews.html)的 Ant 1.9.0 中修复了一个相关错误 ( [#43969](https://issues.apache.org/bugzilla/show_bug.cgi?id=43969) ) ，因此升级到该版本的 Ant 可能会改善结果。

# java - 正则表达式 Eclipse

> ID：15388878
> 
> 赞同：0
> 
> 时间：2013-03-13T15:01:02.443
> 
> 标签：java, regex, search

我的 Java 文件中有以下字符串，我想用所有 Java 文件中的另一个字符串替换。你能告诉我搜索正则表达式模式吗？

不同java文件中的以下字符串类型

```
private static ILog logger = LogManager.GetLogger(Foo1.class);
private static ILog logger = LogManager.GetLogger(Service2.class);
private static ILog logger = LogManager.GetLogger(Data.class); 
```

我想替换为

```
final protected Logger logger = Logger.getLogger(this.getClass().getName()); 
```

有人可以告诉我正则表达式搜索模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:06:49.677

```
private static ILog logger = LogManager.GetLogger\((.*)\); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:18:16.573

您可以在 Eclipse 中使用此正则表达式

```
private\s+static\s+ILog\s+logger\s*=\s*LogManager\.GetLogger([^)]+)\s*; 
```

# class - ActionScript 包中有多个类？

> ID：15388880
> 
> 赞同：5
> 
> 时间：2013-03-13T15:01:08.173
> 
> 标签：class, actionscript, packages

我读过你只能在 ActionScript 中按包拥有一个类。如果您需要帮助类，您可以将这些类从包中编写出来。例子：

```
package {
  public class A {}
}

class B {} 
```

但是，我在 adobe 网站中找到了以下示例（： [http](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9e.html) ://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9e.html ）：

```
package flash.xml 
{ 
  class XMLDocument {} 
  class XMLNode {} 
  class XMLSocket {} 
} 
```

在以下网页（[http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/packages.html](http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/packages.html)）中，他们说您只能通过文件编写一类包：

```
// SampleCode.as file 
package samples{ 
  public class SampleCode {} 
} 

// CodeFormatter.as file 
package samples { 
   class CodeFormatter {}
} 
```

然后我的结论是：你不能按文件编写一个包的多个类，对吧？而这个限制只是为了推广 AS3 中的良好实践，对吧？

对不起，如果这个问题太简单了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T15:06:45.717

当然你可以在同一个包中有多个类

文件 mypackage/MyClass1.as：

```
package mypackage {
    public class MyClass1{

    }
} 
```

文件 mypackage/MyClass2.as：

```
package mypackage {
    public class MyClass2{

    }
} 
```

但是每个文件不能有一个以上的公共类（应该与类同名）。

您可以在包块之外（在同一个文件中）拥有帮助程序类，它们只能由该文件中的其他类访问：

文件 mypackage/MyClass3.as：

```
package mypackage {
    public class MyClass3{

    }
}

class HelperForClass3Only() {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:55:47.990

以下可能是[http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/packages.html](http://www.adobe.com/devnet/actionscript/learning/as3-fundamentals/packages.html)上的一些有用信息：

大多数软件项目包含许多类。有时一个项目包含数百个（如果不是数千个）类。将这些课程组织成相关的组是标准做法并且很有帮助。您使用包将您的课程组织成相关的组。编译器还使用包来定义它们包含的类的全名并添加访问控制级别。

# opencv - 精明的边缘与骨架化

> ID：15388881
> 
> 赞同：2
> 
> 时间：2013-03-13T15:01:10.777
> 
> 标签：opencv, image-processing, edge-detection, mathematical-morphology

到目前为止，我一直在我的项目中使用 Canny 边缘算法，因为有很多关于它的教程和示例。然而，就我而言，骨架化似乎产生了更好的结果。

第一张图：原始图，第二张图：canny，第三张图：骨架化

![在此处输入图像描述](../Images/8860ef9f9fefa219bc1a0dc38b70ef86.png)

我想使用骨架化，但我一直在避免，因为在我的脑海里，我一直在想它一定有我不知道的缺点，因为似乎没有人喜欢这个。

我想知道每种方法的优缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:14:34.813

您应该阅读以下链接：

[http://en.wikipedia.org/wiki/Topological_skeleton](http://en.wikipedia.org/wiki/Topological_skeleton)

[http://en.wikipedia.org/wiki/Canny_edge_detector](http://en.wikipedia.org/wiki/Canny_edge_detector)

更多信息：

[Canny边缘算法中只需要一个边缘](https://stackoverflow.com/questions/11492533/need-only-one-edge-in-canny-edge-algorithm)

[在 C# 中骨架化 OpenCV](https://stackoverflow.com/questions/10658325/skeletonization-opencv-in-c-sharp)

# sql - SQL： Last_Value() 返回错误的结果（但 First_Value() 工作正常）

> ID：15388892
> 
> 赞同：13
> 
> 时间：2013-03-13T15:01:27.810
> 
> 标签：sql, sql-server, sql-server-2012, sql-function

如快照所示，我在 SQL Server 2012 中有一个表：

![在此处输入图像描述](../Images/9ac91f7103d6fb8a3eabaf50c4bc86cb.png)

然后我使用 Last_Value() 和 First Value 来获取不同 YearMonth 的每个 EmpID 的 AverageAmount。脚本如下：

```
SELECT A.EmpID,  
       First_Value(A.AverageAmount) OVER (PARTITION BY A.EmpID Order by A.DimYearMonthKey asc) AS  '200901AvgAmount', 
       Last_Value(A.AverageAmount) OVER (PARTITION BY A.EmpID Order by A.DimYearMonthKey asc) AS '201112AvgAmount'

FROM  Emp_Amt  AS A 
```

但是，此查询的结果是：

![结果](../Images/bafc6d010504d9059d0a06d7bba326bb.png)

在“201112AvgAmount”列中，每个 EmpID 显示不同的值，而“200901AvgAmount”具有正确的值。

我的 SQL 脚本有什么问题吗？我在网上做了很多研究，但仍然找不到答案......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-11-07T17:09:05.983

这是一个快速查询来说明行为：

```
select 
  v,

  -- FIRST_VALUE() and LAST_VALUE()
  first_value(v) over(order by v) f1,
  first_value(v) over(order by v rows between unbounded preceding and current row) f2,
  first_value(v) over(order by v rows between unbounded preceding and unbounded following) f3,
  last_value (v) over(order by v) l1,
  last_value (v) over(order by v rows between unbounded preceding and current row) l2,
  last_value (v) over(order by v rows between unbounded preceding and unbounded following) l3,

  -- For completeness' sake, let's also compare the above with MAX()
  max        (v) over() m1,
  max        (v) over(order by v) m2,
  max        (v) over(order by v rows between unbounded preceding and current row) m3,
  max        (v) over(order by v rows between unbounded preceding and unbounded following) m4
from (values(1),(2),(3),(4)) t(v) 
```

可以在这里看到上述查询的输出（此处为[SQLFiddle](http://sqlfiddle.com/#!6/d41d8/22802)）：

```
| V | F1 | F2 | F3 | L1 | L2 | L3 | M1 | M2 | M3 | M4 |
|---|----|----|----|----|----|----|----|----|----|----|
| 1 |  1 |  1 |  1 |  1 |  1 |  4 |  4 |  1 |  1 |  4 |
| 2 |  1 |  1 |  1 |  2 |  2 |  4 |  4 |  2 |  2 |  4 |
| 3 |  1 |  1 |  1 |  3 |  3 |  4 |  4 |  3 |  3 |  4 |
| 4 |  1 |  1 |  1 |  4 |  4 |  4 |  4 |  4 |  4 |  4 | 
```

很少有人会想到应用于带有`ORDER BY`子句的窗口函数的隐式框架。在这种情况下，窗口默认为 frame `RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW`。（RANGE 与 ROWS 并不完全相同，但那是另一回事了）。这样想：

*   在`v = 1`有序窗口的框架跨度的行上`v IN (1)`
*   在`v = 2`有序窗口的框架跨度的行上`v IN (1, 2)`
*   在`v = 3`有序窗口的框架跨度的行上`v IN (1, 2, 3)`
*   在`v = 4`有序窗口的框架跨度的行上`v IN (1, 2, 3, 4)`

如果你想阻止这种行为，你有两个选择：

*   *对有序*窗口函数使用显式`ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING`子句
**   `ORDER BY`在那些允许省略它们的窗口函数中使用 no子句（as `MAX(v) OVER()`）*

 *更多细节在[这篇文章中解释了关于`LEAD()`, `LAG()`,`FIRST_VALUE()`和`LAST_VALUE()`](http://blog.jooq.org/2014/11/07/dont-miss-out-on-awesome-sql-power-with-first_value-last_value-lead-and-lag/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-13T15:53:01.897

您的脚本没有任何问题，这是分区在 SQL Server 中的工作方式：/。如果您将 LAST_VALUE 更改为 MAX 结果将是相同的。解决方案是：

```
SELECT A.EmpID,  
       First_Value(A.AverageAmount) OVER (PARTITION BY A.EmpID Order by A.DimYearMonthKey asc) AS  '200901AvgAmount', 
       Last_Value(A.AverageAmount) OVER (PARTITION BY A.EmpID Order by A.DimYearMonthKey ROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS '201112AvgAmount'  
FROM  Emp_Amt  AS A 
```

有一个很棒的帖子，[链接](http://blog.sqlauthority.com/2011/11/09/sql-server-introduction-to-first-_value-and-last_value-analytic-functions-introduced-in-sql-server-2012/)。GL！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-24T09:37:53.053

最简单的方法是使用 first_value 重复查询，只需将第一种情况的顺序设为 asc，第二种情况的顺序为 desc。

```
SELECT A.EmpID,  
       First_Value(A.AverageAmount) OVER (PARTITION BY A.EmpID Order by A.DimYearMonthKey asc) AS  '200901AvgAmount', 
       First_Value(A.AverageAmount) OVER (PARTITION BY A.EmpID Order by A.DimYearMonthKey desc) AS '201112AvgAmount'

FROM  Emp_Amt  AS A 
```*

# google-bigquery - Google Bigquery 命令行返回限制

> ID：15388896
> 
> 赞同：3
> 
> 时间：2013-03-13T15:01:34.943
> 
> 标签：google-bigquery

我刚刚升级了 bigquery 命令行程序，现在运行查询时返回的行数受到了限制。限制似乎是 100 行。在升级之前，我能够返回数千行。我正在使用 Debian。有没有办法扩大返回的行数限制？让我知道我是否可以提供更多信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T19:10:02.180

试试`--max_rows`国旗。查看输出`bq help query`：

```
USAGE: bq.py [--global_flags] <command> [--command_flags] [args]
    query      Execute a query.
... 
  --max_rows: How many rows to return in the result.
    (default: '100')
    (an integer) 
```

# javascript - iframe 内的谷歌地图未加载

> ID：15388897
> 
> 赞同：27
> 
> 时间：2013-03-13T15:01:35.987
> 
> 标签：javascript, jquery, google-maps

我遇到了一个奇怪的问题，我不知道问题是什么。以下 jQuery 代码是我想要实现的简化版本：

```
var iframe = $('<iframe />');
iframe.prop('src', 'https://maps.google.com/maps?q=London&hl=en&sll=37.0625,-95.677068&sspn=46.677964,93.076172&t=h&hnear=London,+United+Kingdom&z=10');
iframe.appendTo($('body')); 

// When the iframe loads:
iframe.load(function() {
    alert(1);
}); 
```

永远不会加载地图，也`load()`永远不会触发事件。Chrome 报告以下错误：

`Refused to display 'https://maps.google.com/maps?q=London&hl=en&sll=37.0625,-95.677068&sspn=46.677964,93.076172&t=h&hnear=London,+United+Kingdom&z=10' in a frame because it set 'X-Frame-Options' to 'SAMEORIGIN'.`

如何绕过这一点？

这是一个[**jsFiddle 演示**](http://jsfiddle.net/RLuYw/)。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-13T15:14:21.833

附加`&output=embed`到 URL 的末尾可以解决问题。

**更新**：谷歌禁用了此功能，该功能在最初发布答案时有效。此解决方案不再有效。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-07-28T02:57:35.410

自 2014 年起，该选项`&output=embed`不再起作用。Google 建议您切换到 Google Maps Embed API。这是一个[快速入门](https://developers.google.com/maps/documentation/embed/start)。

基本上，新的 iframe 链接是：

```
https://www.google.com/maps/embed/v1/place?key={BROWSER_KEY}&q={YOUR_ADDRESS_ENCODED} 
```

请记住在 API 控制台中启用**Google Maps Embed API 。**

*ps 在我写这个答案时检查了工作*

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-12-28T15:27:22.277

确保除了地点 API 之外还启用了 google maps embed api。

从这里生成地图：

[https://developers.google.com/maps/documentation/embed/start](https://developers.google.com/maps/documentation/embed/start)

# php - Magento - 想要在管理部分的 magento 中插入记录

> ID：15388899
> 
> 赞同：0
> 
> 时间：2013-03-13T15:01:39.200
> 
> 标签：php, mysql, magento

大家好，我是 magento 的新手，我正在尝试在管理部分的数据库中插入记录。这是控制器文件的功能。

```
public function saveAction()
    {
        $data = $this->getRequest()->getParams();
        $arrData = array('number_of_products'=>$data['number_of_products'],'price'=>$data['price']);  
        $model = Mage::getModel('a/totebags')->setData($arrData);  
        try {  
            $insertId = $model->save()->getId();  
            echo "Data successfully inserted. Insert ID: ".$insertId;  
        } catch (Exception $e){  
            echo $e->getMessage();  
        }  
    } 
```

我的问题是，当运行此代码时，我收到此错误：

```
Fatal error: Call to a member function setData() on a non-object in /Library/WebServer/Documents/magento/app/code/community/ToteBags/Adminform/controllers/Adminhtml/AdminformController.php on line 40 
```

这是我的`config.xml`

```
<?xml version="1.0"?>
<config>
    <modules>
        <ToteBags_Adminform>
            <version>1.0.0</version>
        </ToteBags_Adminform>
    </modules>

    <global>
        <blocks>
            <totebags_adminform>
                <class>ToteBags_Adminform_Block</class>
            </totebags_adminform>
        </blocks>

        <helpers>
            <totebags_adminform>
                <class>ToteBags_Adminform_Helper</class>
            </totebags_adminform>
        </helpers>

        <models>
            <totebags_adminform>
                <class>ToteBags_Adminform_Model</class>
                <resourceModel>totebags_adminform_mysql4</resourceModel>
            </totebags_adminform>
            <totebags_adminform_mysql4>
                <class>ToteBags_Adminform_Model_Mysql4</class>
                <entities>
                    <category>
                        <table>totebags_fbstore_category</table>
                    </category>
                    <category_product>
                        <table>totebags_fbstore_category_product</table>
                    </category_product>
                </entities>
            </totebags_adminform_mysql4>
        </models>

        <resources>
            <totebags_adminform_setup>
                <setup>
                    <module>ToteBags_Adminform</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </totebags_adminform_setup>
            <totebags_adminform_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </totebags_adminform_write>
            <totebags_adminform_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </totebags_adminform_read>
        </resources>
    </global>

    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <totebags_adminform after="Mage_Adminhtml">ToteBags_Adminform_Adminhtml</totebags_adminform>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>

    <adminhtml>
        <layout>
            <updates>
                <totebags_adminform>
                    <file>totebags_adminform.xml</file>
                </totebags_adminform>
            </updates>
        </layout>
        <translate>
            <modules>
                <ToteBags_Adminform>
                    <files>
                        <default>ToteBags_Adminform.csv</default>
                    </files>
                </ToteBags_Adminform>
            </modules>
        </translate>
    </adminhtml>

    <default>
        <totebags_adminform>
            <general>
                <default_sort_by><![CDATA[position]]></default_sort_by>
            </general>
        </totebags_adminform>
    </default>
</config> 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:28:35.603

您是否上传了 app/etc/modules/modulename.xml 文件，其中包含类似这样的 codePool 详细信息

真正的核心

将 Mage_Connect 替换为 namespace_modulename

看起来你已经完成了上面的部分。

Controller 没有使用类 Varien_Object 扩展，因此没有 setData 与 Controller 类实例一起使用。$model = Mage::getModel('a/totebags')->setData($arrData);

扩展了什么类来创建你的模型。你可能已经扩展了一些控制器。由于错误指向某些控制器。

# google-calendar-api - 我可以设置 Google 日历活动按钮 - 隐私吗？

> ID：15388900
> 
> 赞同：1
> 
> 时间：2013-03-13T15:01:39.450
> 
> 标签：google-calendar-api

单击日历按钮时，是否可以将 Google 日历事件按钮默认设置为私有。

例子：

[我的按钮](https://www.google.com/calendar/render?action=TEMPLATE&text=Your%20Upcoming%20Appointment&dates=20130314T080000/20130314T090000&details=Reason%3a%20Your%20Upcoming%20Appointment%0A%0ATest%20Email%0A123%20Drive%20City,%20STATE%2036606%0A%0AWeb%20Site%3a%20%0A%0ADefault%0APhone%3a%20%28555%29555-9252%0AEmail%3a%20noreply@email.com&location=123%20Drive%20Test,%20State%20123456&trp=true&sprop=website%3a&sprop=name%3aTest%20Email&sf=true&output=xml)

默认为日历默认值

我知道日历 API 支持这一点，但这需要我创建一个自定义登录页面，而不是直接点击 Google 日历页面，并且会推出我的项目时间表。

谢谢。

# android - R.java not generating R.id in Android

> ID：15388904
> 
> 赞同：0
> 
> 时间：2013-03-13T15:01:45.363
> 
> 标签：android, android-xml, r.java-file

Maybe my Googling skills aren't the greatest, but whenever I Google this problem, I only find solutions to when the whole R file isn't generated which isn't my problem. Everything else is generating just fine, however, there is no ID within R, so I have no way of referencing the views in my XML. I've already tried project->clean, and restarting the adb server and eclipse, neither to any avail. All help is greatly appreciated. Below is my code.

```
public class MainMenu extends Activity {

    /*
     * Class member variables
     */
    private Button mMicrophoneButton;
    private ListView mMessageList;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_menu_layout);
        setWidgets();
    }

    private void setWidgets() {
        this.mMicrophoneButton = (Button) findViewById(R.id.bMicrophone);
    }

} 
```

Below is my XML, there's a lot of new stuff here that I don't recognize from previous projects I've done. But I'm not finding any mistakes, which I know is usually the first cause of problems like this.:

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainMenu"
    tools:ignore="HardcodedText" >

    <ScrollView
        android:id="@+id/svMessageView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="9" >

        <TextView
            android:id="@+id/tvTest"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="test" />

    </ScrollView>

    <Button
        android:id="@+id/bMicrophone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_gravity="center"
        android:minHeight="30dp"
        android:text="Speak Now" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:16:40.753

*   Make sure all of your files under res are building properly. Even if your R file is already generated it won't update if you have any errors.
*   If you're referencing any library projects then you may have issues if there are any errors in that library project (src or res).
*   In eclipse do a Project-->Clean on your project and all library projects it references.
*   Delete gen folder and let eclipse auto generate it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T21:52:42.663

you need to save the xml file before cleaning the project for the ids to show up in R.java

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T12:12:30.747

I have Got the Same error but I got it solved by cleaning and rebuilding the project.

Actually, we can add Id there manually as well. I have done that couple of times.

But you can solve it by following the steps below

*   Open the Android Studio
*   Go to the Build
*   Then Clean project
*   after that Rebuild project

It will work definitely.

# mysql - 没有删除语句的 MySQL 复制

> ID：15388907
> 
> 赞同：7
> 
> 时间：2013-03-13T15:01:48.933
> 
> 标签：mysql

我一直在寻找一种方法来防止 MySQL 删除语句被从站处理，我正在从事数据仓库项目，并且我想在将数据复制到从站后从生产服务器中删除数据。

完成这项工作的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T15:13:32.443

有几种方法可以做到这一点。

1.  `SET SQL_LOG_BIN=0;`在执行删除之前在主服务器上运行相关会话。这样它就不会写入二进制日志
2.  在从属设备上实施`BEFORE DELETE`触发器以忽略删除。

对于我不想复制的语句，我倾向于使用方法 #1。它需要`SUPER`特权。

我没有尝试过＃2，但应该可以。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T15:12:48.123

您只能通过 hack 来实现这一点，并且可能会导致问题。MySQL 复制不是为此而设计的。

想象一下，您在主服务器中插入一条记录，它会复制到从服务器。然后您从主服务器中删除，但它不会从从服务器中删除。如果有人添加了具有相同唯一键的记录，那么从服务器上就会发生冲突。

一些替代方案：

1.  如果您要进行备份，我会通过另一种方式进行。您可以使用运行 mysqldump 的 cronjob 进行定期备份，但这假设您不想保存每条记录，只创建定期还原点。
2.  触发更新第二个镜像数据库。但是，这不能跨服务器，您必须使用不同的名称重新创建每个表。此外，计算成本会很高，并且从该备份恢复会很困难。
3.  实际上不要删除任何内容，只需创建一个“活动”或“禁用”的状态字段，然后对用户隐藏“禁用”。这也有问题，例如，不能使用 ON DELETE CASCADE，它必须全部在代码中手动完成。

也许如果你提供你想要这个镜像数据库而不删除的原因，我可以给你一个更有针对性的解决方案。

# android - 来自蓝牙绘图的动态数据

> ID：15388908
> 
> 赞同：1
> 
> 时间：2013-03-13T15:01:51.293
> 
> 标签：android, charts, bluetooth, plot

首先，我对 Java 编程语言非常陌生，我尝试搜索我想要的东西，但没有什么是具体的。其次，我正在尝试从蓝牙设备绘制动态数据，

`Sensorgraph`可以使用应用程序（开源应用程序）简单地绘制数据，但是绘图不是很清楚（我不能放大或缩小，没有 x 或 y 轴......）。因此，我需要另一种方法来尝试绘制数据以更好地显示它。这是`SensorGraph`代码：

```
public class SensorGraph extends Activity {
Button Start, Stop, Pause;

private static final String TAG = "SensorGraph";

// change this to your Bluetooth device address 
private static final String DEVICE_ADDRESS =  "00:06:66:4B:E2:B7"; //"00:06:66:03:73:7B";

private GraphView mGraph; 
private TextView mValueTV;
private ArduinoReceiver arduinoReceiver = new ArduinoReceiver();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    // get handles to Views defined in our layout file
    mGraph = (GraphView)findViewById(R.id.graph);
    mValueTV = (TextView) findViewById(R.id.value);
    mGraph.setMaxValue(1024);

}

@Override
protected void onStart() {
    super.onStart();
    // in order to receive broadcasted intents we need to register our receiver
    registerReceiver(arduinoReceiver, new IntentFilter(AmarinoIntent.ACTION_RECEIVED));

    // this is how you tell Amarino to connect to a specific BT device from within your own code
    Amarino.connect(this, DEVICE_ADDRESS);
}

@Override
protected void onStop() {
    super.onStop();

    // if you connect in onStart() you must not forget to disconnect when your app is closed
    Amarino.disconnect(this, DEVICE_ADDRESS);

    // do never forget to unregister a registered receiver
    unregisterReceiver(arduinoReceiver);
}

/**
 * ArduinoReceiver is responsible for catching broadcasted Amarino
 * events.
 * 
 * It extracts data from the intent and updates the graph accordingly.
 */
public class ArduinoReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        String data = null;

        // the device address from which the data was sent, we don't need it here but to demonstrate how you retrieve it
        final String address = intent.getStringExtra(AmarinoIntent.EXTRA_DEVICE_ADDRESS);

        // the type of data which is added to the intent
        final int dataType = intent.getIntExtra(AmarinoIntent.EXTRA_DATA_TYPE, -1);

        // we only expect String data though, but it is better to check if really string was sent
        // later Amarino will support differnt data types, so far data comes always as string and
        // you have to parse the data to the type you have sent from Arduino, like it is shown below
        if (dataType == AmarinoIntent.STRING_EXTRA){
            data = intent.getStringExtra(AmarinoIntent.EXTRA_DATA);

            if (data != null){
                mValueTV.setText(data);
                try {
                    // since we know that our string value is an int number we can parse it to an integer
                    final int sensorReading = Integer.parseInt(data);
                    mGraph.addDataPoint(sensorReading);
                }
                catch (NumberFormatException e) { /* oh data was not an integer */ }
            }
        }
    }
}

 } 
```

图视图代码如下：

```
 public class GraphView extends View {

private Bitmap  mBitmap;
private Paint   mPaint = new Paint();
private Canvas  mCanvas = new Canvas();

private float   mSpeed = 1.0f;
private float   mLastX;
private float   mScale;
private float   mLastValue;
private float   mYOffset;
private int     mColor;
private float   mWidth;
private float   maxValue = 1024f;

public GraphView(Context context) {
    super(context);
    init();
}

public GraphView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

private void init(){
    mColor = Color.argb(192, 64, 128, 64);
    mPaint.setFlags(Paint.ANTI_ALIAS_FLAG);
}

public void addDataPoint(float value){
    final Paint paint = mPaint;
    float newX = mLastX + mSpeed;
    final float v = mYOffset + value * mScale;

    paint.setColor(mColor);
    mCanvas.drawLine(mLastX, mLastValue, newX, v, paint);
    mLastValue = v;
    mLastX += mSpeed;

    invalidate();
}

public void setMaxValue(int max){
    maxValue = max;
    mScale = - (mYOffset * (1.0f / maxValue));
}

public void setSpeed(float speed){
    mSpeed = speed;
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.RGB_565);
    mCanvas.setBitmap(mBitmap);
    mCanvas.drawColor(0xFFFFFFFF);
    mYOffset = h;
    mScale = - (mYOffset * (1.0f / maxValue));
    mWidth = w;
    mLastX = mWidth;
    super.onSizeChanged(w, h, oldw, oldh);
}

@Override
protected void onDraw(Canvas canvas) {
    synchronized (this) {
        if (mBitmap != null) {
            if (mLastX >= mWidth) {
                mLastX = 0;
                final Canvas cavas = mCanvas;
                cavas.drawColor(0xFFFFFFFF);
                mPaint.setColor(0xFF777777);
                cavas.drawLine(0, mYOffset, mWidth, mYOffset, mPaint);
            }
            canvas.drawBitmap(mBitmap, 0, 0, null);
        }
    } 
} 
```

}

我需要更改的部分主要是传感器读数并将其绘制在另一个图表上！非常感谢你，我很感激任何帮助。如果您有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T20:29:58.543

[http://androidplot.com/docs/dynamically-plotting-sensor-data/](http://androidplot.com/docs/dynamically-plotting-sensor-data/)

试试这个，它是使用 android plot library 的 Android Plot 示例代码

# ios - 我的 ipa 文件 ios 中不包含 coredata 值

> ID：15388909
> 
> 赞同：0
> 
> 时间：2013-03-13T15:01:51.170
> 
> 标签：ios, core-data, ipa

我在我的项目中成功使用了核心数据。但是当我构建 ipa 以在设备上进行测试时，它不包含存储在核心数据中的值。任何人都可以在这种情况下帮助我吗？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:21:22.980

使用模拟器进行测试时，您创建/保存的任何对象都存储在 Mac 的本地存储中。因此，当您开始在设备上进行测试时，本地存储将从头开始创建。您需要编写代码来预填充您的商店。

另一种方法是将 sqlite 文件从模拟器移动到设备。查看 [从模拟器到设备的核心数据迁移以](https://stackoverflow.com/questions/3877107/core-data-migration-from-simulator-to-device)获取更多信息。

# dropbox - 是否可以禁用应用文件夹的 Dropbox 通知

> ID：15388910
> 
> 赞同：14
> 
> 时间：2013-03-13T15:01:51.730
> 
> 标签：dropbox, dropbox-api

我正在玩，`dropbox.js`并创建了一个网络应用程序来记笔记并将它们保存到我的 Dropbox 帐户。

是否有可能只关闭这个 App 文件夹的通知而不关闭所有通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-18T04:07:02.983

`mute`如今，使用 API v2，您可以通过/files/upload 上的参数将单个上传操作的通知静音。

有关详细的 API 文档，请参阅[https://www.dropbox.com/developers/documentation/http/documentation#files-upload](https://www.dropbox.com/developers/documentation/http/documentation#files-upload)。

# sql - 如何使用 SSDT 和 Visual Studio 2012 数据库项目正确管理数据库部署？

> ID：15388914
> 
> 赞同：62
> 
> 时间：2013-03-13T15:02:13.237
> 
> 标签：sql, visual-studio-2012, sqlcmd, database-project, sql-server-data-tools

我正处于研究阶段，试图在现有的小型项目中采用 2012 年数据库项目。我是 C# 开发人员，而不是 DBA，所以我对最佳实践不是特别精通。我已经搜索 google 和 stackoverflow 几个小时了，但我仍然不知道如何正确处理一些关键部署场景。

1) 在几个开发周期的过程中，我如何管理我的数据库的多个版本？如果我的数据库 v3 上有一个客户端，并且我想将它们升级到 v8，我该如何管理？我们目前为我们产品的每个版本管理手工制作的架构和数据迁移脚本。我们是否仍需要单独执行此操作，或者新范式中是否有某些东西支持或替代它？

2）如果模式以需要移动数据的方式发生变化，处理这个问题的最佳方法是什么？我假设在 Pre-Deployment 脚本中进行了一些工作以保留数据，然后 Post-Deploy 脚本将其放回正确的位置。是这样还是有更好的方法？

3) 任何其他关于如何最好地使用这些新技术的建议或指导也非常感谢！

**更新：**自从我最初提出这个问题以来，我对这个问题的理解有所增加，虽然我想出了一个可行的解决方案，但这并不是我所希望的解决方案。这是我的问题的改写：

我遇到的问题纯粹是与数据相关的。如果我的应用程序版本 1 上有一个客户端，并且我想将它们升级到我的应用程序版本 5，那么如果他们的数据库没有数据，我这样做不会有任何问题。我只是让 SSDT 智能地比较模式并一次性迁移数据库。不幸的是，客户有数据，所以事情没那么简单。从我的应用程序的版本 1 到版本 2 到版本 3（等等）的架构更改都会影响数据。我目前管理数据的策略要求我为每个版本升级（1 到 2、2 到 3 等）维护一个脚本。这使我无法从应用程序的版本 1 直接转到版本 5，因为我没有数据迁移脚本可以直接转到那里。为每个客户端创建自定义升级脚本或管理升级脚本以从每个版本到每个更高版本的前景呈指数级难以管理。我所希望的是，SSDT 启用了某种策略，使管理事物的数据方面变得更容易，甚至可能与事物的模式方面一样容易。我最近在 SSDT 的经历并没有让我对这种策略存在任何希望，但我很想找出不同的答案。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-30T23:37:44.387

我自己一直在做这件事，我可以告诉你这并不容易。

首先，要解决 JT 的回复 - 即使 SSDT 具有声明性更新机制，您也不能忽略“版本”。SSDT 在将任何源模式移动到任何目标模式方面做了一项“相当不错”的工作（前提是你知道所有的开关和陷阱），这确实不需要验证本身，但它不知道如何管理“数据运动”（至少我看不到！）。因此，就像 DBProj 一样，您可以在 Pre/Post 脚本中使用自己的设备。由于数据移动脚本依赖于已知的开始和结束模式状态，因此您无法避免对数据库进行版本控制。因此，“数据移动”脚本必须应用于模式的版本化快照，这意味着您不能随意将数据库从 v1 更新到 v8 并期望数据移动脚本 v2 到 v8 能够工作（大概，您不会

遗憾的是，我在 SSDT 发布中看不到任何允许我以集成方式处理这种情况的机制。这意味着您必须添加自己的脚手架。

第一个技巧是跟踪数据库（和 SSDT 项目）中的版本。我开始在 DBProj 中使用一个技巧，并将其带到 SSDT，经过一些研究，结果发现其他人也在使用它。您可以将数据库扩展属性应用于数据库本身（称其为“BuildVersion”或“AppVersion”或类似名称），并将版本值应用于它。然后，您可以在 SSDT 项目本身中捕获此扩展属性，SSDT 会将其添加为脚本（然后您可以检查包含扩展属性的发布选项）。然后，我使用 SQLCMD 变量来识别当前传递中应用的源版本和目标版本。一旦确定了源（项目快照）和目标（即将更新的目标数据库）之间的版本增量，您就可以找到所有需要应用的快照。*在*SSDT 部署中，您可能必须将其移动到构建或部署管道（我们使用 TFS 自动部署并有自定义操作来执行此操作）。

下一个障碍是保留模式的快照及其相关的数据移动脚本。在这种情况下，它有助于使脚本尽可能具有幂等性（这意味着，您可以重新运行脚本而不会产生任何不良副作用）。它有助于将可以安全地重新运行的脚本与必须只执行一次的脚本分开。我们对静态参考数据（字典或查找表）做同样的事情 - 换句话说，我们有一个 MERGE 脚本库（每个表一个），它使参考数据保持同步，这些脚本包含在帖子中-部署脚本（通过 SQLCMD :r 命令）。这里要注意的重要一点是，您*必须*以正确的顺序执行它们，以防这些引用表中的任何一个具有彼此的 FK 引用。我们按顺序将它们包含在主要的部署后脚本中，这有助于我们创建一个为我们生成这些脚本的工具——它还解决了依赖顺序。我们在“版本”结束时运行此生成工具，以捕获静态参考数据的当前状态。您的所有其他数据移动脚本基本上都是特殊情况，并且很可能只是一次性使用。在这种情况下，您可以做以下两件事之一：您可以针对 db build/app 版本使用 IF 语句，或者您可以在创建每个快照包后清除 1 次脚本。

它有助于记住 SSDT 将禁用 FK 检查约束，并且仅在部署后脚本运行后重新启用它们。例如，这使您有机会填充新的非空字段（顺便说一句，您必须启用为非空列生成临时“智能”默认值的选项才能使其工作）。但是，仅对 SSDT 由于架构更改而重新创建的表禁用 FK 检查约束。对于其他情况，您有责任确保数据移动脚本以正确的顺序运行以避免检查约束投诉（或者您在脚本中手动禁用/重新启用它们）。

DACPAC 可以帮助您，因为 DACPAC 本质上是一个快照。它将包含几个描述架构的 XML 文件（类似于项目的构建输出），但在您创建它时会及时冻结。然后，您可以使用 SQLPACKAGE.EXE 或部署提供程序发布该包快照。我还没有完全弄清楚如何使用 DACPAC 版本控制，因为它更依赖于“注册”数据应用程序，所以我们坚持使用自己的版本控制方案，但我们确实将自己的版本信息放入 DACPAC 文件名。

我希望我能提供一个更有说服力和详尽的例子，但我们仍在解决这里的问题。

SSDT 真正糟糕的一件事是，与 DBProj 不同，它目前不可扩展。尽管它在很多不同的事情上都比 DBProj 做得更好，但你不能覆盖它的默认行为，除非你能在前/后脚本中找到解决问题的方法。我们现在试图解决的问题之一是，当您拥有数千万条记录时，重新创建更新表 (CCDR) 的默认方法确实很糟糕。

-更新：我已经有一段时间没有看到这个帖子了，但显然它最近很活跃，所以我想我会添加一些重要的注意事项：如果你使用的是 VS2012，2013 年 6 月发布的 SSDT 现在有一个数据内置比较工具，还提供扩展点——也就是说，您现在可以为项目包含 Build Contributors 和 Deployment Plan Modifiers。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T19:28:31.397

我还没有真正找到关于这个主题的更多有用信息，但我花了一些时间来了解这些工具、修补和玩耍，我想我已经为我的问题找到了一些可以接受的答案。这些不一定是最好的答案。我仍然不知道是否有其他机制或最佳实践来更好地支持这些场景，但这是我想出的：

给定数据库版本的部署前和部署后脚本仅用于从先前版本迁移数据。在每个开发周期开始时，脚本都会被清理掉，随着开发的进行，它们会被充实为安全地将数据从先前版本迁移到新版本所需的任何 sql。这里的一个例外是数据库中的静态数据。此数据在设计时是已知的，并以 T-SQL MERGE 语句的形式永久存在于部署后脚本中。这有助于使用最新的发布脚本将任何版本的数据库部署到新环境。在每个开发周期结束时，都会生成一个从先前版本到新版本的发布脚本。该脚本将包括生成的用于迁移架构的 sql 和手工制作的部署脚本。是的，我知道发布工具可以直接用于数据库，但这对我们的客户来说不是一个好的选择。我也知道 dacpac 文件，但我不确定如何使用它们。生成的发布脚本似乎是我所知道的生产升级的最佳选择。

所以回答我的场景：

1) 要将数据库从 v3 升级到 v8，我必须为 v4、v5、v6 等执行生成的发布脚本。这与我们现在的操作非常相似。众所周知，数据库项目似乎使创建/维护这些脚本变得更加容易。

2) 当架构从底层数据发生变化时，部署前和部署后脚本用于将数据迁移到新版本所需的位置。受影响的数据基本上在 Pre-Deploy 脚本中备份，并在 Post-Deploy 脚本中放回原处。

3）我仍在寻找有关如何在这些场景和其他场景中最好地使用这些工具的建议。如果我在这里有任何问题，或者我应该注意其他任何问题，请告诉我！谢谢！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T08:23:43.690

根据我使用 SSDT 的经验，数据库版本号（即 v1、v2...vX 等）的概念有点消失了。这是因为 SSDT 提供了一种称为声明式数据库开发的开发范式，这大致意味着您告诉 SSDT 您希望您的模式处于什么状态，然后让 SSDT 通过与您已有的进行比较来负责使其进入该状态。在这个范例中，部署 v4 然后 v5 等的概念消失了。

正如您正确陈述的那样，您的部署前和部署后脚本是为了管理数据而存在的。

希望有帮助。

捷通

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-17T12:53:52.057

我只想说，到目前为止，这个线程非常出色。

我一直在努力解决完全相同的问题，并试图在我们的组织中解决这个问题，在一个相当大的遗留应用程序上。我们已经开始向 SSDT 迁移（在 TFS 分支上），但我们确实需要了解部署过程，并在此过程中管理自定义迁移和参考/查找数据。

更复杂的是，我们的应用程序是一个代码库，但可以为每个“客户”定制，所以我们有大约 190 个数据库我们正在处理，对于这个项目，不仅仅是 3 个左右，这可能是正常的。我们一直在进行部署，甚至经常设置新客户。我们现在严重依赖 PowerShell 以及老式的增量发布脚本（以及在该版本中创建新客户的相关脚本）。一旦我们弄清楚这一切，我计划做出贡献，但请分享您学到的任何其他内容。我相信我们最终会维护每个版本的自定义发布脚本，但我们会看到的。在项目中维护每个脚本并包含 From 和 To SqlCmd 变量的想法非常有趣。如果我们这样做，我们可能会一路修剪，

顺便说一句 - 旁注 - 关于最小化浪费的话题，我们还花了很多时间来弄清楚如何自动执行列的正确命名/数据类型约定，以及自动生成所有主键和外键，基于关于命名约定，以及索引和检查约束等。最困难的部分是处理不遵守规则的“偏差”。如果有人感兴趣，也许有一天我也会分享，但现在，我需要大力推进这个部署、迁移和参考数据的故事。再次感谢。就好像你们今天早上在说我脑子里想的东西。

# jquery - jQuery focusout 事件无法正常工作

> ID：15388915
> 
> 赞同：0
> 
> 时间：2013-03-13T15:02:13.643
> 
> 标签：jquery

我有以下代码：

```
 <div id="id1">
        <div id="id2">
            <p> some text </p>
        </div>
        <div id="id3">
             <!--some other div elements-->
        </div>
    </div> 
```

`#id2`是`contenteditable`当点击页面上的某个按钮时。

我的脚本有以下代码：

```
jQuery("#id1").focousout(focousoutFunction); 
```

问题是，如果`#id2`失去焦点，就会`focousoutFunction`被解雇。有没有办法`focusout`只在实际元素失去焦点而不是在元素内部时才捕获事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:28:28.190

> **当某个元素或**其中的任何元素失去焦点时，会将 focusout 事件发送到该元素。这与 blur 事件不同，它支持检测对后代元素失去焦点（换句话说，它支持事件冒泡）。

[jQuery 文档](http://api.jquery.com/focusout/)

每次内部元素`#id1`失去焦点时，即使`#id1`没有失去焦点，focusout 也会触发（尽管我不确定您是否可以将焦点事件分配给 div 元素）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:26:56.833

您可以强制 javascript 停止传播。

```
jQuery("#id1 div").focusout(function(event) {
   event.stopPropagation();
}); 
```

# java - 我想与变量进行比较并从最大的中减去最小的

> ID：15388919
> 
> 赞同：-2
> 
> 时间：2013-03-13T15:02:27.213
> 
> 标签：java, variables, int, compare

对不起，伙计们，但我对此真的很陌生。

我有两个变量： totalMonthsA 和 totalMonthsB 每个代表一个 int 值。任何一个值都可以大于或小于另一个。如何比较它们以找到要从较大变量中减去的较小变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:03:47.293

```
int result = Math.abs(totalMonthsA - totalMonthsB); 
```

这将计算差值的绝对值，这与从较大值中减去较小值相同。

弄清楚为什么会这样，留给读者作为练习:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:05:04.753

```
int result = totalMonthsA > totalMonthsB ?  
             totalMonthsA - totalMonthsB : totalMonthsB - totalMonthsA 
```

这使用三元（或 ?: ）运算符。

`cond ? a : b`本质上的意思是：if `cond`then `a`else`b`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T15:05:16.823

看看[java.lang.Math](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)类，那里有[min](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#max%28int,%20int%29)和[max](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#min%28int,%20int%29)方法可以帮助简化数学。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T15:04:11.837

```
 int a=5;
    int b =7;
    int result = a>b?a-b:b-a;
    System.out.println(result); 
```

# scope - 如何使用angularJS正确绑定指令和控制器之间的范围

> ID：15388922
> 
> 赞同：18
> 
> 时间：2013-03-13T15:02:34.723
> 
> 标签：scope, angularjs, hierarchy, using-directives

我正在尝试使用 anugularJS 生成一个 n 级分层无序列表，并且已经能够成功地做到这一点。但是现在，我在指令和控制器之间遇到了范围问题。我需要在指令模板中通过 ng-click 调用的函数中更改父级的范围属性。

请参阅[http://jsfiddle.net/ahonaker/ADukg/2046/](http://jsfiddle.net/ahonaker/ADukg/2046/) - 这是 JS

```
var app = angular.module('myApp', []);

//myApp.directive('myDirective', function() {});
//myApp.factory('myService', function() {});

function MyCtrl($scope) {
    $scope.itemselected = "None";
    $scope.organizations = {
        "_id": "SEC Power Generation",
        "Entity": "OPUNITS",
        "EntityIDAttribute": "OPUNIT_SEQ_ID",
        "EntityID": 2,
        "descendants": ["Eastern Conf Business Unit", "Western Conf Business Unit", "Atlanta", "Sewanee"],
        children: [{
            "_id": "Eastern Conf Business Unit",
            "Entity": "",
            "EntityIDAttribute": "",
            "EntityID": null,
            "parent": "SEC Power Generation",
            "descendants": ["Lexington", "Columbia", "Knoxville", "Nashville"],
            children: [{
                "_id": "Lexington",
                "Entity": "OPUNITS",
                "EntityIDAttribute": "OPUNIT_SEQ_ID",
                "EntityID": 10,
                "parent": "Eastern Conf Business Unit"
            }, {
                "_id": "Columbia",
                "Entity": "OPUNITS",
                "EntityIDAttribute": "OPUNIT_SEQ_ID",
                "EntityID": 12,
                "parent": "Eastern Conf Business Unit"
            }, {
                "_id": "Knoxville",
                "Entity": "OPUNITS",
                "EntityIDAttribute": "OPUNIT_SEQ_ID",
                "EntityID": 14,
                "parent": "Eastern Conf Business Unit"
            }, {
                "_id": "Nashville",
                "Entity": "OPUNITS",
                "EntityIDAttribute": "OPUNIT_SEQ_ID",
                "EntityID": 4,
                "parent": "Eastern Conf Business Unit"
            }]
        }]
    };

    $scope.itemSelect = function (ID) {
        $scope.itemselected = ID;
    }
}

app.directive('navtree', function () {
    return {
        template: '<ul><navtree-node ng-repeat="item in items" item="item" itemselected="itemselected"></navtree-node></ul>',
        restrict: 'E',
        replace: true,
        scope: {
            items: '='
        }
    };
});

app.directive('navtreeNode', function ($compile) {
    return {
        restrict: 'E',
        template: '<li><a ng-click="itemSelect(item._id)">{{item._id}} - {{itemselected}}</a></li>',
        scope: {
            item: "=",
            itemselected: '='
        },
        controller: 'MyCtrl',
        link: function (scope, elm, attrs) {
            if ((angular.isDefined(scope.item.children)) && (scope.item.children.length > 0)) {
                var children = $compile('<navtree items="item.children"></navtree>')(scope);
                elm.append(children);
            }
        }
    };
}); 
```

这是HTML

```
<div ng-controller="MyCtrl">
    Selected: {{itemselected}}

    <navtree items="organizations.children"></navtree>
</div> 
```

请注意，该列表是从模型生成的。而ng-click调用该函数设置父作用域属性（itemselected），但改变只发生在本地。当我单击一个项目时，预期的行为是“已选择：无”应更改为“已选择：xxx”，其中 xxx 是单击的项目。

我是否没有适当地绑定父范围和指令之间的属性？如何将属性更改传递给父范围？

希望这很清楚。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T19:00:41.033

请看看这个工作小提琴，[http://jsfiddle.net/eeuSv/](http://jsfiddle.net/eeuSv/)

我所做的是要求`navtree-node`指令中的父控制器，并调用该控制器中定义的成员函数。成员函数是`setSelected`。请注意，它`this.setSelected`不是`$scope.setSelected`. 然后定义一个`navtree-node`范围方法`itemSelect`。当您单击锚标记时，它将调用范围`itemSelect`上的方法`navtree-node`。这反过来将调用`setSelected`传递所选 id 的控制器成员方法。

`scope.itemSelect = function(id){ myGreatParentControler.setSelected(id) }`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T18:45:29.413

Maxdec 是对的，这与范围界定有关。不幸的是，这种情况非常复杂，以至于 AngularJS 文档可能会误导初学者（比如我自己）。

**警告：**当我试图解释这一点时，请做好准备，因为我有点啰嗦。如果您只想查看代码，请转到此[JSFiddle](http://jsfiddle.net/beej/kWkXd/)。我还发现[egghead.io](http://egghead.io)视频对于了解 AngularJS 非常宝贵。

这是我对问题的理解：您有一个指令层次结构（navtree，navitem），并且您希望将信息从 navitem“向上”传递到根控制器。AngularJS 与一般编写良好的 Javascript 一样，被设置为对变量的范围非常严格，这样您就不会意外地弄乱页面上也在运行的其他脚本。

Angular 中有一个特殊的语法 ( `&`)，它可以让你创建一个隔离作用域并在父作用域上调用一个函数：

```
// in your directive
scope: {
   parentFunc: '&'
} 
```

到现在为止还挺好。当您有多个级别的指令时，事情会变得很棘手，因为您本质上想要执行以下操作：

1.  在根控制器中有一个接受变量并更新模型的函数
2.  中级指令
3.  可以与根控制器通信的子级指令

问题是，子级指令看不到根控制器。我的理解是，您必须在指令结构中设置一个“链”，其作用如下：

**首先：**在你的根控制器中有一个函数，它返回一个函数（它引用了根视图控制器的范围）：

```
$scope.selectFunctionRoot = function () {
    return function (ID) {
        $scope.itemselected = ID;
    }
} 
```

**第二：**设置中级指令，使其拥有自己的选择函数（它将传递给子函数），该函数返回如下内容。注意我们必须如何保存中级指令的范围，因为当这段代码实际执行时，它将在子级指令的上下文中：

```
// in the link function of the mid-level directive. the 'navtreelist'
scope.selectFunctionMid = function () {
    // if we don't capture our mid-level scope, then when we call the function in the navtreeNode it won't be able to find the mid-level-scope's functions            
    _scope = scope;
    return function (item_id) {
        console.log('mid');
        console.log(item_id);

        // this will be the "root" select function
        parentSelectFunction = _scope.selectFunction();
        parentSelectFunction(item_id);
    };
}; 
```

**第三：**在子级指令 ( `navtreeNode`) 中将一个函数绑定到`ng-click`一个调用本地函数的函数，该函数又将“调用链”一直到根控制器：

```
// in 'navtreeNode' link function
scope.childSelect = function (item_id) {
    console.log('child');
    console.log(item_id);

    // this will be the "mid" select function  
    parentSelectFunction = scope.selectFunction();
    parentSelectFunction(item_id);
}; 
```

[这是您的 JSFiddle](http://jsfiddle.net/beej/kWkXd/)的更新分支，在代码中有注释。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T17:24:47.513

这可能是因为每个指令都创建了自己的范围（实际上是您告诉他们这样做的）。[您可以在此处](http://docs.angularjs.org/guide/directive)
阅读有关指令的更多信息，尤其是“编写指令（长版）”一章。

> **范围**- 如果设置为：
> 
> **true** - 然后将为此指令创建一个新范围。如果同一元素上的多个指令请求一个新范围，则只会创建一个新范围。新的范围规则不适用于模板的根，因为模板的根总是获得一个新的范围。
> 
> **{}（对象哈希）** - 然后创建一个新的“隔离”范围。“隔离”作用域与普通作用域的不同之处在于它在原型上并不从父作用域继承。这在创建可重用组件时很有用，这些组件不应意外读取或修改父范围内的数据。

因此，您所做的更改不会反映在 MyCtrl 范围中，因为每个指令都有自己的“隔离”范围。

这就是为什么单击只会更改局部`$scope.itemselected`变量而不是“全部”的原因。

# log4cplus - log4cplus 不打印文件名和行号

> ID：15388923
> 
> 赞同：2
> 
> 时间：2013-03-13T15:02:35.873
> 
> 标签：log4cplus

我正在使用[log4cplus](http://log4cplus.sourceforge.net/)库（v1.0.0），记录器设置如下：

```
std::string formatString("%-5p [%F,%L] %m%n");
std::auto_ptr <log4cplus::Layout> layout(new log4cplus::PatternLayout(formatString));
logAppender->setLayout(layout); 
```

我正在使用以下功能进行记录：

```
log4cplus::Logger logger;
logger.log(INFO_LOG_LEVEL, msg); 
```

日志中打印的日志信息为：

```
DEBUG [,] My log message
INFO  [,] My other log message 
```

它不会在日志中打印文件名或行号。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:31:52.177

这是因为您没有将任何信息传递给`log()`函数。`log()`函数声明如下：

```
void log(LogLevel ll, const log4cplus::tstring& message,
         const char* file=NULL, int line=-1) const; 
```

如您所见，除非您提供文件和行信息，否则它会传入“空”值。

要么您自己传递信息，要么包含`log4cplus/loggingmacros.h`并使用提供的日志记录宏，这些宏会为您执行此操作。

# sql - 如何检索与某个 WHERE 条件匹配的每组记录的计数？

> ID：15388935
> 
> 赞同：1
> 
> 时间：2013-03-13T15:02:55.033
> 
> 标签：sql, where

让您了解我正在尝试做的事情。简化的表结构将是：

```
homeTeamName | awayTeamName | homeTeamGoals | awayTeamGoals
-----------------------------------------------------------
Team1        | Team2        |      4        |       3
Team1        | Team3        |      0        |       1
Team3        | Team2        |      0        |       0 
```

数据来自一场足球比赛。我要做的是检索“表格”球队，即赢得最多比赛的球队（假设上表充满了更多数据）。如果我要检索特定团队的“获胜次数”，查询相当简单，如下所示。

```
SELECT COUNT(*) as winCount FROM matches_new 
  WHERE (
      homeTeamName = 'Team1' AND 
      homeTeamGoals > awayTeamGoals
    ) OR (
      awayTeamName = 'Team1' AND 
      awayTeamGoals > homeTeamGoals
    )
  ORDER BY winCount DESC LIMIT 1 
```

该查询将返回特定团队将拥有的“胜利”数量。现在我想做的是让我的查询检查所有团队，然后返回“获胜”最多的团队的名称以及“获胜”的数量（获胜次数）。

我真的不知道如何做到这一点！我已经尝试了很多搜索，但很难想象人们会如何描述这种类型的任务，或者想到任何类似的东西。我的麻烦似乎源于这样一个事实，即我不知道如何在没有具体说明值应该相等的情况下如何执行 WHERE 子句。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:11:58.067

您可以使用 case 语句来做到这一点：

```
select winningTeam, count(*) as winCount from (
    select case 
             when homeTeamGoals > awayTeamGoals then homeTeamName
             when awayTeamGoals > homeTeamGoals then awayTeamName
             else null
           end as winningTeam
        from matches_new
  ) winners
  where winningTeam is not null
  group by winningTeam
  order by winCount desc limit 1 
```

或者你可以用一个联合来解决它：

```
SELECT teamName, COUNT(*) as winCount from (
     select homeTeamName as teamName from  matches_new 
        WHERE homeTeamGoals > awayTeamGoals
     union all
     select awayTeamName as teamName from  matches_new 
        WHERE awayTeamGoals > homeTeamGoals
  ) as allWinners
  GROUP BY teamName
  ORDER BY winCount DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:09:16.007

尝试这个

```
select teamname, count(*) winCount from 
(
select case when homeTeamGoals > awayTeamGoals then hometeamname
            when wayTeamGoals > homeTeamGoals then awayTeamName end Teamname
from matches_new
where (homeTeamGoals > awayTeamGoals or wayTeamGoals > homeTeamGoals)
)
group by teamname
ORDER BY winCount DESC LIMIT 1 
```

# php - Zend php 在控制器中生成文件然后包含它

> ID：15388936
> 
> 赞同：0
> 
> 时间：2013-03-13T15:02:58.030
> 
> 标签：php, zend-framework, controller

我正在研究一个通用模型，所以我试图生成一个带有 DBTable 名称的 php 文件，然后将它包含在同一个 ActionController 中。但是页面已经加载了，我的文件无法包含！！

```
$myIniFile = parse_ini_file (MELIS_MODULES_PATH ."/Genericform/application/etc/config.ini",TRUE);
      $this->generateClass("test"); // to create the php file 
     $val="Genericform_Model_".ucfirst($myIniFile["Table"]["name"])."()"; // call it 

    $model = new $val; 
```

这是我的代码的一部分。你有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:57:19.660

我只是将文件生成更改为 _ini() 函数，然后将 include/require_once 放入。

# java - java.lang.ClassNotFoundException: org.apache.log4j.PatterLayout

> ID：15388937
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:02:59.370
> 
> 标签：java, log4j

通过旧问题修复后，我已经修复了此链接中指定的内容

[如何使用属性文件配置 log4j](https://stackoverflow.com/questions/2288876/how-to-configure-log4j-with-a-properties-file)但现在我面临一个新问题，即

我收到以下错误消息：

```
log4j:ERROR Could not instantiate class [org.apache.log4j.PatterLayout].

java.lang.ClassNotFoundException: org.apache.log4j.PatterLayout
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.ClassLoader.loadClassInternal(Unknown Source)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Unknown Source)
    at org.apache.log4j.helpers.Loader.loadClass(Loader.java:169)
    at org.apache.log4j.helpers.OptionConverter.instantiateByClassName(OptionConverter.java:317)
    at org.apache.log4j.helpers.OptionConverter.instantiateByKey(OptionConverter.java:120)
    at org.apache.log4j.PropertyConfigurator.parseAppender(PropertyConfigurator.java:641)
    at org.apache.log4j.PropertyConfigurator.parseCategory(PropertyConfigurator.java:612)
    at org.apache.log4j.PropertyConfigurator.configureRootCategory(PropertyConfigurator.java:509)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:415)
    at org.apache.log4j.PropertyConfigurator.doConfigure(PropertyConfigurator.java:441)
    at org.apache.log4j.PropertyConfigurator.configure(PropertyConfigurator.java:336)
    at com.akak.book.shop.listener.JlcindiaContextListener.contextInitialized(JlcindiaContextListener.java:33)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

任何人都可以帮我解决这个问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:19:14.663

`PatternLayout`您在 log4j.properties 中拼写错误。你错过了“N”！

# wireshark - 如何处理来自wireshark的包裹日期

> ID：15388941
> 
> 赞同：0
> 
> 时间：2013-03-13T15:03:09.237
> 
> 标签：wireshark, bigdata

事情是这样的。当我在 Wireshark 中处理 Internet 数据包信息时遇到问题。我需要一个工具可以帮助我处理大量数据包并获取数据包信息（我的意思是数据包内的数据显示为十六进制并从Wireshark中剪下特定部分），可以按特定订单订购。好吧，如果它可以生成一个表格，我将非常感激。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:41:25.720

> 我在Wireshark中处理Internet包信息时遇到问题

（在英语中，通常使用的术语是“数据包”，而不是“包”；我假设您在这里指的是网络数据包。）

您是使用 Wireshark 还是其他程序处理它们？

> 我需要一个工具可以帮助我处理大量的包，并从 Wireshark 中取出包信息（我的意思是包内的数据显示为十六进制并删除特定部分），并且可以按特定顺序订购。

Wireshark 编写的捕获文件要么是 pcap 要么是 pcap-ng 格式；libpcap/WinPcap 可以读取 pcap 文件，而 libpcap 1.1.0 及更高版本可以读取许多 pcap-ng 文件。这些文件中的数据包记录有一个时间戳，给出了接收数据包的日期和时间（以 UTC 表示，表示为自 1970 年 1 月 1 日 00:00:00 UTC 以来的时间），数据包出现在网络，保存的数据包数据量（可以告诉捕获程序保存不超过*N*字节的数据包数据，用户指定*N*的值），以及二进制形式的原始数据包数据。

您可以使用 libpcap/WinPcap 来读取这些文件（尽管旧版本的 libpcap 和当前版本的 WinPcap 无法读取 pcap-ng 文件）。不能保证文件中的数据包按时间戳值排序，因此您必须自己对它们进行排序。

我不知道您所说的“删除特定部分”是什么意思；如果您想提取数据包数据的特定部分，您要么必须编写自己的代码来理解这一点，要么找到一些可以帮助您做到这一点的工具 - TShark`-T fields`选项可能在这里起作用，[Scapy](http://www.secdev.org/projects/scapy/)也可能如此。

# vba - 将范围复制到新工作簿

> ID：15388952
> 
> 赞同：-1
> 
> 时间：2013-03-13T15:03:40.897
> 
> 标签：vba, excel, copy

我遇到了一些将范围复制到新工作簿的代码，但我不确定它为什么有效。

```
Worksheets("Short Form").Copy
Set wb = ActiveWorkbook 
```

当代码所说的只是将活动工作簿分配给引用'wb'时，如何将工作表'Short Form'复制到新工作簿？它甚至不使用 .add 方法。现在我只想将值粘贴到这个新工作簿中，但不太确定如何执行此操作，因为我不理解这段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:19:39.527

试试这个 - 因为以下手动步骤与您的代码片段相同：

1.打开一个空白工作簿
2.按记录宏
3.右键单击 Sheet1 工作簿选项卡4.选择
“移动或复制”
5.在“预订”组合中选择（新书）
6.选中“创建副本”框，使窗口现在看起来像这样：
![在此处输入图像描述](../Images/5007046ee4ba56a1f5c3b8d4efec38bb.png) 7.停止记录器
8.Go 并找到您记录的代码......瞧......我的看起来像这样

```
Option Explicit

Sub Macro1()
'
' Macro1 Macro
'

'
    Sheets("Sheet1").Select
    Sheets("Sheet1").Copy
End Sub 
```

您的代码与这些手动步骤描述的相同。

* * *

您必须在 `Dim wb as workbook`某处有一条线，否则它将无法运行。

然后，此行`Set wb = ActiveWorkbook`将使对象`wb`等于您复制到的新工作簿，因为它处于活动状态，因此您可以对其进行进一步的操作。您可以轻松切换 wb 指向的工作簿：

```
Sub Macro1()
Dim wb As Workbook

ThisWorkbook.Sheets("Sheet1").Copy
Set wb = ActiveWorkbook
MsgBox wb.Name
ThisWorkbook.Activate
Set wb = ActiveWorkbook
MsgBox wb.Name

End Sub 
```

**但是**
在我的生产代码中，我通常从不使用`Set x To ActiveWorkbook`我总是命名工作簿然后使用`Set x To Workbooks("DefiniteName")`

* * *

**不使用剪贴板**
如果您想避免使用剪贴板，则以下示例显示如何在不使用粘贴的情况下移动仅值数据：

```
Sub WithoutPastespecial()

Dim firstRange As Range
Set firstRange = ThisWorkbook.Worksheets("Short Form").Range("S4:S2000") 'can change S4:S2000 to the range you want to copy

Dim newBk As Workbook
Dim secondRange As Range
Set newBk = Workbooks.Add
Set secondRange = newBk.Worksheets("Sheet1").Range("A1")

With firstRange
      Set secondRange = secondRange.Resize(.Rows.Count, .Columns.Count)
End With
secondRange.Value = firstRange.Value

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:27:17.833

请注意，这不是复制`Range`整个工作表:)

如果您使用该方法：

`Worksheets("Short Form").Cells.Copy`

然后您将仅复制单元格，而不是整个工作表，并且此方法不会创建新工作簿。您可以告诉它在必要时添加工作簿。

这是一个例子：

```
Option Explicit

Sub CopyNew()
Dim wbNew As Workbook
Dim wb As Workbook

Set wb = ThisWorkbook  'It is a good idea to explicitly control workbooks using either a defined variable like "wb" or the "ThisWorkbook" object, instead of using "ActiveWorkbook" or referring to files by name.

Application.CutCopyMode = False
wb.Sheets("Short Form").Cells.Copy

'Add a new workbook for the values:
Set wbNew = Workbooks.Add

wbNew.Sheets(1).Cells.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False

End Sub 
```

# qt - Qt槽可以作为普通方法使用吗？

> ID：15388953
> 
> 赞同：2
> 
> 时间：2013-03-13T15:03:42.267
> 
> 标签：qt, signals, slot

我是 Qt 编程的新手。我掌握了发出信号并用插槽捕获信号的窍门，但是是否可以将插槽作为常规方法调用？

例如，在以下代码片段中：

```
class someClass{
..
..
//method
    void emitsig1(int val)
    {
      emit sig1(val);
    }
public signals:
    void sig1(int a);
};

class someOtherClass{
..
..   
public slots:

    int onSig1(int a)
    {
    //some computation on a
    return a;
    }
};

int main(argc, char** argv){
..
..

someClass obj1 = new someClass();
someOtherClass obj2 = new someOtherClass();
int value = 10, result =0;
obj1.emitsig1(value);

QObject::connect(obj1, SIGNAL(sig1(int), obj2, SLOT(onSig1(int)));

int newvalue = 100;

//is it legal to do this, and if so, what value should I expect "result" to have?
result = obj2.onSig1(newvalue); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:10:11.640

当然。

你试过了吗？

在 Qt 中，您有一个信号/插槽系统。信号必须使用 执行`emit`，但槽是普通函数（声明为槽），可以在信号发出后与`connect`函数连接时自动执行。

# php - 如何使用 php 按任何字段对 mysql 表的内容进行排序？

> ID：15388955
> 
> 赞同：0
> 
> 时间：2013-03-13T15:03:53.443
> 
> 标签：php, mysql, sorting

基本上，我有一个 MySQL 数据库，其中有一个名为“游戏”的表，我想出了如何使用 PHP 显示表中的所有游戏，如您在此处看到的：

[http://rawgameshop.com/index/all/](http://rawgameshop.com/index/all/)

基本上这就是它的作用：

```
 while ($row = mysqli_fetch_array($result))
   {
   echo $row['Name']."<br />";
   echo $row['Price']."<br />";
   echo $row['Stock']."<br />";
   echo $row['Platform']."<br />";
   } 
```

数据库中的表按“名称”值排序。我想要完成的是按“价格”值排序，从例如 9.99 降序，这样我就可以使用首页上的“9.99 欧元以下的游戏”按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:08:28.507

那么你的 SQL 查询是什么？你可以`ORDER BY`给它添加子句。

```
SELECT * from games ORDER BY Price DESC 
```

对于 9.99 以下的所有游戏，您可以

```
SELECT * from games where Price < 10 ORDER BY Price DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:09:44.693

您遗漏了创建查询的部分。但是您的查询应该是：

```
SELECT *
FROM games
WHERE price < 10 ORDER BY price DESC 
```

在 PHP 中：

```
if (result = mysqli->query('SELECT * FROM games WHERE price < 10 ORDER BY price DESC')) {
    //print out all games here
    result->close();
} 
```

# c# - 无法从 C# 表单应用程序访问 MYSQL 服务器 - 连接字符串中的错误

> ID：15388956
> 
> 赞同：0
> 
> 时间：2013-03-13T15:03:57.933
> 
> 标签：c#, mysql

```
myConnection = new SqlConnection("user id=champion3_test;" +
                                       "password=test;server=10.168.1.58;" +
                                       "Trusted_Connection=true;" +
                                       "database=champion3_sabdb; " +
                                       "connection timeout=30"); 
```

此代码给出了错误：

```
Thrown: "A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)" (System.Data.SqlClient.SqlException) Exception Message = "A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server)", Exception Type = "System.Data.SqlClient.SqlException", Exception WinRT Data = "" 
```

以下是一些可能有助于调试我的服务器设置的屏幕截图：http: [//imgur.com/a/PeRby](http://imgur.com/a/PeRby)

我知道'champion3_test'是一个有效的用户ID'test'是champion3_test的有效密码数据库名称是'champion3_sabdb'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T15:06:24.683

SQL 服务器不是 MySQL。如果您使用的是 MySQL，请下载 MySQL .NET 连接器并使用它们的连接类[MySqlConnection](http://dev.mysql.com/doc/refman/5.6/en/connector-net-ref-mysqlclient.html#connector-net-ref-mysqlclient-mysqlconnection)。

要了解如何使用 MySQL 连接器，您可以从[这里](http://dev.mysql.com/doc/refman/5.6/en/connector-net.html)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:09:59.703

[您可以在此处](http://dev.mysql.com/downloads/connector/net/)下载适用于 .Net 的 MySql 连接器。

安装驱动程序后，您可以使用 MySql 连接器类进行连接：

```
 string connStr = "server=localhost;user=root;database=world;port=3306;password=******;";
 MySqlConnection conn = new MySqlConnection(connStr); 
```

# python - 使用 Clang 绑定提取类型字符串

> ID：15388961
> 
> 赞同：4
> 
> 时间：2013-03-13T15:04:02.583
> 
> 标签：python, clang, llvm-clang

我正在编写一个 python 脚本（使用 python clang 绑定），它解析 C 头文件并提取有关函数的信息：名称、返回类型、参数类型。

提取函数名称没有问题，但我找不到将 a 转换`clang.cindex.Type`为 C 类型字符串的方法。（例如`clang.cindex.TypeKind.UINT`到`unsigned int`）

目前，作为临时解决方案，我有一个字典`clang.cindex.TypeKind -> C type string`和代码来处理指针和 const 限定符，但我没有找到提取结构名称的方法。

有没有一种通用的方法来获得 C 的定义`clang.cindex.Type`？如果没有，我如何获取`clang.cindex.TypeKind.RECORD`和`clang.cindex.TypeKind.FUNCTIONPROTO`类型的 C 类型字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T14:04:11.867

对于`RECORD`，函数`get_declaration()`指向类型的声明（a `union`、`enum`、`struct`或`typedef`）；获取节点的拼写返回其名称。（显然，要注意区分`TYPEDEF_DECL`底层声明类型。）

对于`FUNCTIONPROTO`，您必须使用`get_result()`和的组合`get_arguments()`。

# javascript - 仅使用 Javascript 进行图像编辑

> ID：15388966
> 
> 赞同：-2
> 
> 时间：2013-03-13T15:04:15.443
> 
> 标签：javascript, css, image

我只想用javascript实时编辑图像。我是 Js 新手，所以这可能是个愚蠢的问题......

我有 3 张图片：

*   背景
*   一号车
*   车二

我想实时显示一个。它应该如下所示：

![](../Images/737ed360ac0a11cedf397529d57e6566.png)

并且汽车应该在那里和回来（我必须能够在不刷新页面的情况下编辑它们的位置）。

我不要求完整的解决方案，只是几个链接或页面以及一些从哪里开始的信息。我知道 Javascript 语法，但我从未在任何网站上使用过它。如果不可能，或者太难，我会使用 flash 或 Java aplet，我可以使用 jQuery 或其他 Javascript 库。感谢您提供任何线索！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:07:24.077

您可能想查看 jQuery animate 和 z-indexes。您要做的是使用 z-index 将一个放在另一个之上，然后使用 jQuery 进行相应的动画处理。

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

[http://css-tricks.com/almanac/properties/z/z-index/](http://css-tricks.com/almanac/properties/z/z-index/)

# javascript - 可以禁用@media 查询或强制解决吗？原因：允许 iphone 查看桌面站点？

> ID：15388967
> 
> 赞同：21
> 
> 时间：2013-03-13T15:04:16.237
> 
> 标签：javascript, html, css, media-queries

我通过@media 查询对我的网站进行了重大修改，以在手机上显示非常精简。但是，我的用户要求提供该站点的桌面版本（可通过链接获得）。

更进一步，桌面站点本身也会根据分辨率被@media 查询修改。我正在考虑选择一种“桌面”分辨率，比如 1440x900 并强制手机以该分辨率显示？

这可能吗，也许是通过JavaScript？或者，可以完全禁用这些@media 查询吗？

谢谢！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-22T05:21:54.997

我和客户有同样的问题。但问题是有 120 多个 CSS 文件包含媒体查询。所以我所做的是，设置视口宽度。我在那个网站上使用了这个片段并且工作正常。使用它，您甚至可以为用户提供在响应式设计和非响应式设计之间切换的选项。

```
$(document).ready(function(){
   $('meta[name="viewport"]').prop('content', 'width=1440');
}); 
```

> **注意**：1440 是您首选的屏幕宽度。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T17:43:23.727

我会向您的`<html>`或`<body>`诸如此类的类添加一个类`class="force-desktop"`，然后在您的媒体选择器上添加

```
@media () {
    body:not(.force-desktop) {
        //styles
    }
} 
```

或类似的东西

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-07T14:49:14.617

没有 JQuery 的 IJas 的解决方案如下所示：

```
var viewport = document.querySelector("meta[name=viewport]");
viewport.setAttribute('content', width=1440); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T17:03:06.970

将可能需要禁用的任何样式放在自己的样式表中是最容易的，并带有标题属性，以便更容易找到它们。它们可以是内联样式或链接到 .css 文件的元素。

```
function toggleSheet(title){
  var S=document.styleSheets, L=S.length, temp;
  while(L){
    temp=S[--L];
    if(temp.title===title){
    temp.disabled=!temp.disabled;
    return temp;
  }  
} 
```

# html - 使用 jQuery Ajax 同时下载文件和更新数据库

> ID：15388968
> 
> 赞同：0
> 
> 时间：2013-03-13T15:04:22.257
> 
> 标签：html, jquery

我有一个应该下载文件的链接，同时通过 Ajax 将数据发送到 PHP 脚本以更新数据库。链接的 HTML 是：

```
<a class="rel_link" href="document.docx">Download</a> 
```

jquery代码是：

```
$("#downloadtable a").click(function(){
  $.ajax({
            url: "download.php",
            type: "POST",
            data: {dlname: dlname, dlaccount: dlaccount, dlmodule: dlmodule, dlemail: dlemail, dlsub: dlsub, dlpath: dlpath},
            success: function(data){
             $("#die2").detach();
            }

         });
 }); 
```

不幸的是，两者似乎不能同时工作。如果 jQuery 被禁用，文档下载完美。如果启用了 jQuery 并且 href 属性设置为`href="#"', the jQuery works and the data is written to the database. However, if jQuery is enabled and the href is set to`href="document.docx"`，则文件会下载，但数据不会传递到数据库。我在控制台上收到的唯一错误消息是：

```
Resource interpreted as Document but transferred with MIME type application/vnd.openxmlformats-officedocument.wordprocessingml.document: "http://www.mysite.org.uk/downloads/document.docx". 
```

任何人都可以了解如何通过 Ajax 同时下载文档和写入数据库吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:09:09.017

如果您将 href 切换为指向 php，您的问题可能会得到解决。然后您可以写入数据库，并使用适当的 header() 调用启动下载。

查看示例#1： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

# javascript - 隐藏元素还是即时创建？

> ID：15388972
> 
> 赞同：7
> 
> 时间：2013-03-13T15:04:37.947
> 
> 标签：javascript, html, css

哪个选项最好：

*   在标记中有一个元素，用 CSS 隐藏。如果启用了 JS，则显示该元素。

*   如果启用了 JS，则标记中没有元素并动态创建它。

如果用户没有 JS，我不希望显示 div。我的问题不是如何编码不同的情况，而是最好的以及为什么。

**编辑**：当我说“最好”时，我的意思是支持你的回答，说明为什么它最适合你。可以是速度/语义/等。我想要的是能够更好地了解每个人的优缺点。速度也几乎不是问题，因为它只是一个元素，所以它就像毫秒一样。

对于第一个选项，它可能更快，但是我们有不必要的标记和 CSS 规则。因为如果没有 JS，那么拥有元素就毫无意义，更不用说隐藏它了。

现在是第二个选项，即使它可能没有那么快，我将不同的部分分开，只真正加载必须加载的部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T15:06:46.017

DOM 操作是最昂贵的。显示现有代码比注入它更快。

# webforms - 获取键值以从 Telerik 网格中的 LinkBut ton 传入另一个页面

> ID：15388974
> 
> 赞同：0
> 
> 时间：2013-03-13T15:04:43.223
> 
> 标签：webforms, telerik-grid, linkbutton

我有一个网格，它的 CarrierID 指定为“DataKeyNames”，这也是网格中的一个不可见属性。

我有一个超链接列，单击该列时应将 CarrierNetID 的值（该数据项的键值）传递到我的代码隐藏中，这样我就可以将其传递到另一个页面，以根据该键值调出一条记录进行编辑。

我无法收到附加的错误：

我的标记如下： 你可以看到 lnkPLMN 是超链接。一切都很好，我似乎无法传递价值。

```
<telerik:RadGrid ID="RadGrid1" DataSourceID="SqlDataSource1" ShowStatusBar="true"
    runat="server" AllowPaging="True" AllowSorting="True" AllowFilteringByColumn="True"
    AutoGenerateColumns="false" ClientSettings-Resizing-AllowColumnResize="true"
    DataKeyNames="CarrierNetID" OnItemDataBound="RadGrid_ItemDataBound">

    <MasterTableView PageSize="10" Width="100%">
        <Columns>
            <telerik:GridBoundColumn DataField="CarrierNetID" Visible="false" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"></telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Name" HeaderText="Carrier Name" UniqueName="Name" SortExpression="Name" ReadOnly="true" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"></telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Region" HeaderText="Region" UniqueName="Region" AllowFiltering="true" SortExpression="Region" ReadOnly="true" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"></telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="Country" HeaderText="Country" UniqueName="Country" SortExpression="Country" ReadOnly="true" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"></telerik:GridBoundColumn>
            <telerik:GridTemplateColumn HeaderText="PLMN" UniqueName="PLMN">
                <ItemTemplate>
                    <asp:HyperLink ID="lnkPLMN" runat="server" Target="_blank" ForeColor="Blue">
                    </asp:HyperLink>
                </ItemTemplate>
            </telerik:GridTemplateColumn>
            <telerik:GridBoundColumn DataField="TechnologyTypeCode" HeaderText="Technology" UniqueName="TechnologyTypeCode" SortExpression="TechnologyTypeCode" ReadOnly="true" ItemStyle-HorizontalAlign="Left" HeaderStyle-HorizontalAlign="Left"></telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="SMSMORate" HeaderText="SSMSO Rate" UniqueName="SMSMORate" AllowFiltering="false" SortExpression="SMSMORate" ReadOnly="true" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right" DataFormatString="{0:G}"></telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="SMSMTRate" HeaderText="SMSMT Rate" UniqueName="SMSMTRate" AllowFiltering="false" SortExpression="SMSMTRate" ReadOnly="true" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right" DataFormatString="{0:G}"></telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="DataRate" HeaderText="Data Rate" UniqueName="DataRate" AllowFiltering="false" SortExpression="DataRate" ReadOnly="true" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right" DataFormatString="{0:G}"></telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="MOCRate" HeaderText="MOC Rate" UniqueName="MOCRate" AllowFiltering="false" SortExpression="MOCRate" ReadOnly="true" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right" DataFormatString="{0:G}"></telerik:GridBoundColumn>
            <telerik:GridBoundColumn DataField="MTCRate" HeaderText="MTC Rate" UniqueName="MTCRate" AllowFiltering="false" SortExpression="MTCRate" ReadOnly="true" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right" DataFormatString="{0:G}"></telerik:GridBoundColumn>
            <telerik:GridCheckBoxColumn DataField="FlatRate" HeaderText="Flat Rate" UniqueName="FlatRate" SortExpression="FlatRate" ReadOnly="true" ItemStyle-HorizontalAlign="Center" HeaderStyle-HorizontalAlign="Center"></telerik:GridCheckBoxColumn>
            <telerik:GridCheckBoxColumn DataField="Discount" HeaderText="Discount" UniqueName="Discount" SortExpression="Discount" ReadOnly="true" ItemStyle-HorizontalAlign="Center" HeaderStyle-HorizontalAlign="Center"></telerik:GridCheckBoxColumn>
            <telerik:GridCheckBoxColumn DataField="ActiveFlag" HeaderText="Active" UniqueName="ActiveFlag" SortExpression="ActiveFlag" ReadOnly="true" ItemStyle-HorizontalAlign="Center" HeaderStyle-HorizontalAlign="Center"></telerik:GridCheckBoxColumn>
        </Columns>
    </MasterTableView>
    <ClientSettings EnableRowHoverStyle="true">
    </ClientSettings>
    <PagerStyle Mode="NumericPages"></PagerStyle>
</telerik:RadGrid> 
```

这是我的代码隐藏，它在以下行中获取附加错误： `HyperLink link = (HyperLink)item["PLMN"].Controls[0];`

```
protected void RadGrid_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridDataItem)
    {
        GridDataItem item = (GridDataItem)e.Item;
        HyperLink link = (HyperLink)item["PLMN"].Controls[0];
        string value = item.GetDataKeyValue("CarrierNetID").ToString();
        link.NavigateUrl = "~/CarrierLaunchStatusForm.aspx?addRecord=0&ID=" + value;
    }
} 
```

有人可以帮忙吗？

将超链接放在标记中（而不是后面的代码）后，我收到以下编译错误：

```
Error   2   The GridHyperLinkColumn control with a two-way databinding to field PLMN must have an ID.   C:\Projects\NPP\NPP\NPP\NPP\CarrierLaunchStatus.ascx    53
Error   3   Literal content ('</telerik:GridHyperLinkColumn>') is not allowed within a 'Telerik.Web.UI.GridColumnCollection'.   C:\Projects\NPP\NPP\NPP\NPP\CarrierLaunchStatus.ascx    56 
```

超链接列如下所示：

```
<telerik:GridHyperLinkColumn UniqueName="PLMN" DataTextFormatString='<%# Bind("PLMN") %>'
                    DataTextField="PLMN" DataNavigateUrlFields="CarrierNetID" DataNavigateUrlFormatString="~/CarrierLaunchStatusForm.aspx?addRecord=0&ID={0}"
                    Target="_blank">
                </telerik:GridHyperLinkColumn> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:06:19.010

Unless you really need to modify data on the `ItemDataBound` event, You can just use the `GridHyperLinkColumn`:

```
<telerik:GridHyperLinkColumn DataNavigateUrlFields="CarrierNetID"
    DataNavigateUrlFormatString="~/CarrierLaunchStatusForm.aspx?addRecord=0&ID={0}"
    Target="_blank" Text="Your Link Text"></telerik:GridHyperLinkColumn> 
```

# python - TypeError：字符串索引必须是整数，而不是 str

> ID：15388980
> 
> 赞同：-4
> 
> 时间：2013-03-13T15:04:52.813
> 
> 标签：python, dictionary

```
 import urllib2

    currency = 'EURO'
    req = urllib2.urlopen(' http://rate-exchange.appspot.com/currency?from=USD&to='+ currency +'') 
    result = req.read() 
    print p
    p = result["rate"]
    print int(p) 
```

这是我得到的`print p` 结果 = {“to”：“EURO”，“rate”：0.76810814999999999，“from”：“USD”}

但我有错误：

```
TypeError: string indices must be integers, not str 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T15:40:36.170

您`.read()`调用的结果不是字典，而是字符串：

```
>>> import urllib2
>>> currency = "EURO"
>>> req = urllib2.urlopen('http://rate-exchange.appspot.com/currency?from=USD&to='+ currency +'')
>>> result = req.read()
>>> result
'{"to": "EURO", "rate": 0.76810814999999999, "from": "USD"}'
>>> type(result)
<type 'str'> 
```

看起来结果是一个 JSON 编码的字典，所以你可以使用类似的东西

```
>>> import json, urllib2
>>> currency = "EURO"
>>> url = "http://rate-exchange.appspot.com/currency?from=USD&to=" + currency
>>> response = urllib2.urlopen(url)
>>> result = json.load(response)
>>> result
{u'to': u'EURO', u'rate': 0.76810815, u'from': u'USD'}
>>> type(result)
<type 'dict'>
>>> result["rate"]
0.76810815
>>> type(result["rate"])
<type 'float'> 
```

[请注意，尽管我认为有更好的方法来处理添加参数，例如`from`and `to`另请注意，在这种情况下，将转换率转换为`int`.]

# vba - 在 VBA 中捕获 MSXML2.DOMDocument 的 onreadystatechange 时出错

> ID：15388990
> 
> 赞同：1
> 
> 时间：2013-03-13T15:05:34.437
> 
> 标签：vba, asynchronous, msxml

我在尝试使用包装类在 VBA 中安排异步加载和解析 XML 文档时遇到错误。

按照[这篇 msdn 文章](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms757030%28v=vs.85%29.aspx)和[本教程](http://www.tushar-mehta.com/publish_train/xl_vba_cases/vba_web_pages_services/#_Toc173749362)中描述的想法，这些想法对于 MSXML2.XMLHTTP40.send 方法的异步处理非常有效，我尝试对 DOMDocument.loadXML 做类似的事情。

这是包装类的代码`DOMMonitor`

```
Private domDoc As MSXML2.DOMDocument
Public Event onXmlLoadComplete(d As MSXML2.DOMDocument)

Public Sub loadXML(XmlFilePath As String)
    Set domDoc = CreateObject("MSXML2.DOMDocument")
    domDoc.async = True
    domDoc.onreadystatechange = Me ' error occurs here
    domDoc.Load XmlFilePath
End Sub

Public Sub onLoadComplete()
    If domDoc.readyState = "4" Then
        RaiseEvent onXmlLoadComplete(domDoc)
    End If
End Sub 
```

我`onLoadComplete`通过设置 VB_UserMemId = 0 设置了默认方法，因此应该在`domDoc`fires时调用它`onreadystatechange`。

但是，当我调用`loadXML`

```
Dim dm As DomMonitor
Set dm = New DomMonitor
dm.loadXML txtXMLData 
```

我在这一行中收到以下运行时错误：

```
domDoc.onreadystatechange = Me 
```

**此对象无法接收“onreadystatechange”事件。编组对象的 IDispatch 接口时发生错误**

我做错了什么，这里有一个好的解决方法吗？

提前致谢。

PS我重新发布事件的原因是我不一定要为此使用最终订阅者的默认方法。然而，就目前的情况来看，我什至没有达到那个阶段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:34:17.030

我阅读该 msdn 文章的方式是，要将包装类分配给 readystatechange，该对象必须是 IXMLHTTPRequest 或 IServerXMLHTTPRequest 对象（第 3 条）。由于您的对象是 DOMDocument，因此 readystatechange 不接受对象。

但是，您可以实例化一个 DOMDocument WithEvents（第 2 条），我猜另一种方式是多余的。我没有足够大的 xml 文件来测试，但我认为这应该可以。我假设如果班级失去范围，所有的赌注都会被取消，所以我把它设为一个全局变量。

在标准模块中

```
Public clsDOMMonitor As CDOMMonitor

Sub test()

    Set clsDOMMonitor = New CDOMMonitor
    clsDOMMonitor.loadXML "C:\Users\dkusleika\Downloads\wurfl-2.3.xml"

End Sub 
```

在 CDOMMonitor 类中

```
Private WithEvents mDoc As MSXML2.DOMDocument

Private Sub mDoc_onreadystatechange()

    If mDoc.readyState = 4 Then
        MsgBox "second"
    End If

End Sub

Public Sub loadXML(XmlFilePath As String)

    Set mDoc = New MSXML2.DOMDocument
    mDoc.async = True
    mDoc.Load XmlFilePath

    MsgBox "first"

End Sub 
```

我假设将 async 设置为 True 是正常工作所需要的。我的 100k xml 文件可能完成得如此之快，以至于事件永远不会放弃控制。但是，如果您有足够大的 xml 文件，我认为您会在“第二”之前获得“第一”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T11:47:42.670

将类的 Instancing 属性从后期绑定更改为，同时还应用您提到的调整`Private`。`PublicNotCreatable`

早期绑定时使用上面的示例（如您的情况）。

# z3 - Z3 可以为无约束的 UF 值输出“任何东西”吗？

> ID：15388999
> 
> 赞同：1
> 
> 时间：2013-03-13T15:06:06.013
> 
> 标签：z3

在搜索过程中，一些未解释函数的值可以不受约束。例如，如果在 smt 中仅`f(1)`调用查询，则`f(2)`,`f(3)`可以是任何东西。有没有办法（某些选项可能）知道在求解过程中没有使用哪些值，因此可以是任何值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:51:33.837

对于无量词问题，您可以使用 to 选项`:model-partial`来实现`true`。这是一个示例（也可[在此处](http://rise4fun.com/Z3/7t5)获得）：

```
(set-option :model-partial true)

(declare-fun f (Int) Int)

(assert (> (f 0) 0))
(assert (< (f 1) 0))

(check-sat)
(get-model) 
```

在这个例子中，我们得到输出：

```
sat
(model 
  (define-fun f ((x!1 Int)) Int
    (ite (= x!1 0) 1
    (ite (= x!1 1) (- 1)
      #unspecified)))
) 
```

顺便说一句，在下一个版本（Z3 4.3.2）中，这个选项被重命名为`:model.partial`. 在下一个版本中，这些选项按模块分组。