# StackOverflow 问答 13064000-13064999

# c++ - 测试构造函数初始化列表

> ID：13064006
> 
> 赞同：2
> 
> 时间：2012-10-25T07:51:34.890
> 
> 标签：c++, unit-testing

我正在做一个测试，检查是否所有类属性都在构造函数中初始化。我当前的解决方案适用于非指针属性：

```
void CSplitVectorTest::TestConstructorInitialization()
{
    const size_t memorySize = sizeof(CSplitVector);
    char* pBuffer1 = (char*) malloc(memorySize);
    char* pBuffer2 = (char*) malloc(memorySize);
    memset(pBuffer1,'?',memorySize);
    memset(pBuffer2,'-',memorySize);
    new(pBuffer1) CSplitVector;
    new(pBuffer2) CSplitVector;
    const bool bObjectsAreEqual = memcmp(pBuffer1,pBuffer2,memorySize)==0;
    if (!TEST(bObjectsAreEqual))
    {
        COMMENT("Constructor initialization list not complete!");
    }
    free(pBuffer1);
    free(pBuffer2);
} 
```

您是否知道如何改进测试指针是否已初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:45:39.293

我找到了上述问题的解决方案，用初始化/未初始化的指针和不同的长度类型对其进行了测试。

在测试标题中，我添加了#pragma pack(1)（我正在研究 gcc）

```
#pragma pack(1)
#include <CSplitVector> 
```

测试有点复杂：

```
void CSplitVectorTest::TestConstructorInitialization()
{
    const size_t memorySize = sizeof(CSplitVector);
    char* pBuffer = (char*) malloc(memorySize);
    memset(pBuffer,'?',memorySize);
    CSplitVector* pSplitVector = new(pBuffer) CSplitVector;

    // find pointers for all '?'
    QList<char*> aFound;
    char* pFoundChar = (char*) memchr(pBuffer,'?',memorySize);
    while (pFoundChar)
    {
        aFound.append(pFoundChar);
        char* pStartFrom = pFoundChar+1;
        pFoundChar = (char*) memchr(pStartFrom,'?',memorySize-(int)(pStartFrom-pBuffer));
    }
    // if there are any '?'....
    if (aFound.count())
    {
        // allocate the same area with '-'...
        pSplitVector->~CSplitVector();
        memset(pBuffer,'-',memorySize);
        pSplitVector = new(pBuffer) CSplitVector;
        // and check if places found before contain '-'
        while (aFound.count())
        {
            pFoundChar = aFound.takeFirst();
            if (*pFoundChar=='-')
            {
                // if yes then class has uninitialized attribute
                TEST_FAILED("Constructor initialization list not complete!");
                pSplitVector->~CSplitVector();
                free(pBuffer);
                return;
            }
        }
    }
    // if no then all attributes are initialized
    pSplitVector->~CSplitVector();
    free(pBuffer);
    TEST(true);
} 
```

随时指出此解决方案中的任何缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:23:39.147

而不是逐字节比较，您可能应该使用正确的填充或字长，并测试每个字的*任何*字节是否被初始化。这样，您可能会使用填充和构造函数绕过编译器，在填充的短于单词的字段之间留下未初始化的字节。

为了测试真正的填充大小，从臀部拍摄，下面的代码应该非常可靠：

```
struct PaddingTest {
  volatile char c; // volatile probably not needed, but will not hurt either
  volatile int i;

  static int getCharPadding() { 
    PaddingTest *t = new PaddingTest;
    int diff = (int)(&(t->i)) - (int)&((t->c));
    delete t;
    return diff;
  }
} 
```

编辑：您仍然需要这两个对象，但您不再将它们相互比较，您只需将每个初始化数据与 memset 值进行比较，如果其中一个对象有任何变化，则意味着这个词被触及（也在另一个，它只是有可能被初始化为与你 memset 相同的值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:07:06.910

您的测试检查对象的每个字节是否已被构造函数覆盖。作为一个直接的内存检查，它看起来不错，尽管如果该类包含其他不一定完全初始化自己的对象，您可能会遇到麻烦。

也就是说，我的主要问题是：这真的是一个有效的测试吗？例如，`CSplitVector`类中的每个属性都由初始化列表初始化是否至关重要？您是否有一些此时可能不需要初始化？另外，如何检查属性是否设置为您期望的值？

# magento - Magento 社区版的主题？

> ID：13064014
> 
> 赞同：0
> 
> 时间：2012-10-25T07:51:57.000
> 
> 标签：magento, themes

只是一个简单的问题，我有点困惑。

Magento Community Edition 和 Magento Premium 之间的唯一区别是支持，对吗？

是否有特定 Magento 版本的主题，或者所有主题都适用于所有版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:30:36.360

请参阅[Magento 的官方页面，](http://www.magentocommerce.com/product/compare)该页面比较了所有不同 Magento 版本的功能。

最有可能的主题将在所有版本上工作 90%，除非它们使用不同 Magento 版本之间的代码。

# java - 刽子手程序：显示用户输入的猜测

> ID：13064017
> 
> 赞同：2
> 
> 时间：2012-10-25T07:52:05.447
> 
> 标签：java, bluej

我正在做一个刽子手项目，我需要一点帮助。我想在 bluej 的终端窗口右侧显示用户输入的所有猜测。我想将它存储在一个数组中，并在每个 clearScreen() 方法之后不断地在右侧显示它。这是我的代码。请试一试。

```
import java.io.*;
public class Hangman
{
    String word,clue;
    int option;
    PrintWriter p = new PrintWriter(System.out,true);
    private void clearScreen()
    {
      System.out.print('\u000C');
    }
    public void Hang1()
    {
        p.println("      _______   ");
        p.println("     |       |");
        p.println("     |");
        p.println("     |");
        p.println("     |");
        p.println("     |");
        p.println("     |");
        p.println("_____|_____ ");
    }
    public void Hang2()
    {
        p.println("      _______ ");
        p.println("     |       |");
        p.println("     |      ( )");
        p.println("     |       ");
        p.println("     |");
        p.println("     |");
        p.println("     |");
        p.println("_____|_____ ");
    }
    public void Hang3()
    {
        p.println("      _______ ");
        p.println("     |       |");
        p.println("     |      ( )");
        p.println("     |       |");
        p.println("     |       |");
        p.println("     |       |");
        p.println("     |");
        p.println("_____|_____ ");
    }
    public void Hang4()
    {
        p.println("      _______ ");
        p.println("     |       |");
        p.println("     |      ( )");
        p.println("     |       |");
        p.println("     |       |");
        p.println("     |       |");
        p.println("     |      /");
        p.println("_____|_____ ");
    }
    public void Hang5()
    {
        p.println("      _______ ");
        p.println("     |       |");
        p.println("     |      ( )");
        p.println("     |       |");
        p.println("     |       |");
        p.println("     |       |");
        p.println("     |      / \\");
        p.println("_____|_____ ");
    }
    public void Hang6()
    {
        p.println("      _______ ");
        p.println("     |       |");
        p.println("     |      ( )");
        p.println("     |       |");
        p.println("     |      /|");
        p.println("     |       |");
        p.println("     |      / \\");
        p.println("_____|_____ ");
    }
    public void Hang7()
    {
        p.println("      _______ ");
        p.println("     |       |");
        p.println("     |      ( )");
        p.println("     |       |");
        p.println("     |      /|\\");
        p.println("     |       |");
        p.println("     |      / \\");
        p.println("_____|_____ ");
    }
    public String[] Sports()
    {
        option = (int)(Math.random()*10);
        switch(option)
        {
            case 0:
            {
                clue = "He is an Argentine footballer who plays for La Liga club FC Barcelona and is the captain of the Argentina national team, playing mainly as a forward.";
                word = "L I O N E L | M E S S I";
            }
            break;
            case 1:
            {
                clue = "First person to score 200 in ODIs";
                word = "S A C H I N | T E N D U L K A R";
            }
            break;
            case 2:
            {
                clue = "It is a South Asian team sport.";
                word = "K A B A D D I";
            }
            break;
            case 3:
            {
                clue = "It is a two-player board game";
                word = "C H E S S";
            }
            break;
            case 4:
            {
                clue = "It is a team sport in which two teams of six players are separated by a net.";
                word = "V O L L E Y B A L L";
            }
            break;
            case 5:
            {
                clue = "Known as 'The wall'";
                word = "R A H U L | D R A V I D";
            }
            break;
            case 6:
            {
                clue = "World Table Tennis Champion";
                word = "Z H A N G | J I K E";
            }
            break;
            case 7:
            {
                clue = "A famous sport";
                word = "F O O T B A L L";
            }
            break;
            case 8:
            {
                clue = "Played on a hard board divided by a net";
                word = "T A B L E | T E N N I S";
            }
            break;
            case 9:
            {
                clue = "Grandmaster of chess";
                word = "V I S H W A N A T A N | A N A N D";
            }
            break;
        }
        return new String[] {word,clue};
    }
    public String[] Movies()
    {
        option = (int)(Math.random()*10);
        switch(option)
        {
            case 0:
            {
                clue = "Movie in which Daniel Radcliffe has acted";
                word = "T H E | W O M A N | I N | B L A C K";
            }
            break;
            case 1:
            {
                clue = "It is a 2012 Indian satirical comedy film that satires organized religion directed by Umesh Shukla";
                word = "O H | M Y | G O D";
            }
            break;
            case 2:
            {
                clue = "Schwarzenegger plays the role of a cyborg assassin sent back in time from the year 2029 to 1984 to kill Sarah Connor";
                word = "T H E | T E R M I N A T O R";
            }
            break;
            case 3:
            {
                clue = "It is a movie about 2 kids who become sspies";
                word = "S P Y | K I D S";
            }
            break;
            case 4:
            {
                clue = "This film stars Jason Statham as Frank Martin, a driver for hire – a mercenary transporter who will deliver anything, anywhere – no questions asked – for the right price";
                word = "T H E | T R A N S P O R T E R";
            }
            break;
            case 5:
            {
                clue = "This film tells the story of Jamal Malik, a young man from the Juhu slums of Mumbai who appears on the Indian version of Who Wants to Be a Millionaire?";
                word = "S L U M D O G | M I L L I O N A R E";
            }
            break;
            case 6:
            {
                clue = "Set during the Sierra Leone Civil War in 1996–2001, the film shows a country torn apart by the struggle between government soldiers and rebel forces";
                word = "B L O O D | D I A M O N D";
            }
            break;
            case 7:
            {
                clue = "This film stars Macaulay Culkin as Kevin McCallister, an eight-year-old boy, who is mistakenly left behind when his family flies to Paris for their Christmas vacation";
                word = "H O M E | A L O N E";
            }
            break;
            case 8:
            {
                clue = "This film follows Dominic Toretto, Brian O'Conner and Mia Toretto as they plan a heist to steal $100 million from corrupt businessman Hernan Reyes";
                word = "F A S T | F I V E";
            }
            break;
            case 9:
            {
                clue = "This film consists of many superheroes";
                word = "T H E | A V E N G E R S";
            }
            break;
        }
        return new String[] {word,clue};        
    }
    public String[] Computers()
    {
        option = (int)(Math.random()*10);
        switch(option)
        {
            case 0:
            {
                clue = "The brain of the computer";
                word = "C E N T R A L | P R O C E S S I N G | U N I T";
            }
            break;
            case 1:
            {
                clue = "Stores a real world 2d object in the form of a digital image";
                word = "S C A N N E R";
            }
            break;
            case 2:
            {
                clue = "A screen that displays output from a computer";
                word = "M O N I T O R";
            }
            break;
            case 3:
            {
                clue = "It is a family of computer networking technologies for LANs";
                word = "E T H E R N E T";
            }
            break;
            case 4:
            {
                clue = "It is a computer network that uses Internet Protocol technology to share information, operational systems, or computing services within an organization";
                word = "I N T R A N E T";
            }
            break;
            case 5:
            {
                clue = "It is an IDE for Java";
                word = "B L U E J";
            }
            break;
            case 6:
            {
                clue = "It is an application developed by Microsoft that is used for playing audio, video and viewing images";
                word = "W I N D O W S | M E D I A | P L A Y E R";
            }
            break;
            case 7:
            {
                clue = "It is a software application that provides comprehensive facilities to computer programmers for software development";
                word = "I N T E G R A T E D | D E V E L O P M E N T | E N V I R O N M E N T";
            }
            break;
            case 8:
            {
                clue = "It is a temporary form of computer data storage";
                word = "R A N D O M | A C C E S S | M E M O R Y";
            }
            break;
            case 9:
            {
                clue = "It is a digital circuit that performs arithmetic and logical operations.";
                word = "A R I T H M E T I C | A N D | L O G I C | U N I T";
            }
            break;
        }
        return new String[] {word,clue};        
    }
    public String[] Food()
    {
        option = (int)(Math.random()*10);
        switch(option)
        {
            case 0:
            {
                clue = "It is an Indian food cited as top ten tasty foods of the world";
                word = "M A S A L A | D O S A";
            }
            break;
            case 1:
            {
                clue = "A fruit which has the same name as its colour";
                word = "O R A N G E";
            }
            break;
            case 2:
            {
                clue = "It is an oven-baked, flat, round bread typically topped with a tomato sauce, cheese and various toppings";
                word = "P I Z Z A";
            }
            break;
            case 3:
            {
                clue = "It is a type of staple food made from some type of unleavened dough which is rolled flat and cut into long thin strips";
                word = "N O O D L E S";
            }
            break;
            case 4:
            {
                clue = "Sorry. No clue for this one";
                word = "P I N E A P P L E";
            }
            break;
            case 5:
            {
                clue = "A bun between which a patty is kept";
                word = "B U R G E R";
            }
            break;
            case 6:
            {
                clue = "It is a chat";
                word = "P A N I | P U R I";
            }
            break;
            case 7:
            {
                clue = "Is perfect for completing the idiom - As cool as a ______________";
                word = "C U C U M B E R";
            }
            break;
            case 8:
            {
                clue = "Consists of two or more slices of bread with fillings between them";
                word = "S A N D W I C H";
            }
            break;
            case 9:
            {
                clue = "Sorry. No clue for this one";
                word = "P A S T A";
            }
            break;
        }
        return new String[] {word,clue};        
    }
    public String[] Countries()
    {
        option = (int)(Math.random()*10);
        switch(option)
        {
            case 0:
            {
                clue = "Means 'Rich Coast' in Spanish";
                word = "C O S T A | R I C A";
            }
            break;
            case 1:
            {
                clue = "Sorry. No clue for this one";
                word = "I N D I A";
            }
            break;
            case 2:
            {
                clue = "T&T";
                word = "T R I N I D A D | A N D | T O B A G O";
            }
            break;
            case 3:
            {
                clue = "Consists of nearly one thousand islands";
                word = "S O L O M O N | I S L A N D S";
            }
            break;
            case 4:
            {
                clue = "It's capital is Riyadh";
                word = "S A U D I | A R A B I A";
            }
            break;
            case 5:
            {
                clue = "Lucky guy : You're getting a free letter : P";
                word = "T H E | P H I L I P P I N E S";
            }
            break;
            case 6:
            {
                clue = "The fastest man on Earth is from this country";
                word = "J A M A I C A";
            }
            break;
            case 7:
            {
                clue = "3 movies have been filmed using this country's name";
                word = "M A D A G A S C A R";
            }
            break;
            case 8:
            {
                clue = "Greatest world power";
                word = "U N I T E D | S T A T E S | O F | A M E R I C A";
            }
            break;
            case 9:
            {
                clue = "Lucky guy : You're getting a free letter : Y";
                word = "M A L A Y S I A";
            }
            break;
        }
        return new String[] {word,clue};
    }
    public static void main()throws IOException
    {
        Hangman obj = new Hangman();
        InputStreamReader isr = new InputStreamReader(System.in);
        BufferedReader br = new BufferedReader(isr);
        PrintWriter p = new PrintWriter(System.out,true);
        p.println("Lets play HANGMAN");
        p.println();
        p.println("Enter your choice according to the following options.\nNOTE: Words are related to the topics given below.\n\n1\. Sports\n2\. Movies\n3\. Computer\n4\. Food\n5\. Countries");
        p.println();
        int choice = Integer.parseInt(br.readLine());
        obj.clearScreen();
        String bothwordandclue[] = new String[2];
        if(choice == 1)
        bothwordandclue = obj.Sports();
        else if(choice == 2)
        bothwordandclue = obj.Movies();
        else if(choice == 3)
        bothwordandclue = obj.Computers();
        else if(choice == 4)
        bothwordandclue = obj.Food();
        else if(choice == 5)
        bothwordandclue = obj.Countries();
        else
        p.println("Wrong choice");
        int counter = 6;
        String guessword = bothwordandclue[0];
        String wordclue = bothwordandclue[1];
        int lengthofword = (int)(Math.round(((double)guessword.length()/2)));
        int checkguess = 0;
        String a;
        String guesses[] = new String[50];
        StringBuffer guessit = new StringBuffer();
        for (int i = 0;i<lengthofword;i++)
        guessit = guessit.append("_ ");
        guessit.delete((2 * lengthofword)-1,(2 * lengthofword));
        int index = guessword.indexOf("|");
        while(index >= 0)
        {
            guessit.setCharAt(index, '|');
            index = guessword.indexOf("|", index+1);// Start searching for next "|" after this index
        }
        p.println(guessit + "\t\t\t\t\t\t\t\t\t The letters you have entered so far");
        do
        {
            p.println();
            if(counter == 6)
            obj.Hang1();
            else if(counter == 5)
            obj.Hang2();
            else if(counter == 4)
            obj.Hang3();
            else if(counter == 3)
            obj.Hang4();
            else if(counter == 2)
            obj.Hang5();
            else if(counter == 1)
            obj.Hang6();
            p.println();
            p.println("Enter your guess letter");
            String guessletter2 = br.readLine();
            String guessletter = guessletter2.toUpperCase();
            obj.clearScreen();
            for(int i = 0;i<lengthofword;i++)
            {
                if(guessletter.charAt(0) == guessword.charAt(2*i))
                {
                    guessit.setCharAt(2*i,guessletter.charAt(0));
                    checkguess=1;
                }                
            }
            if(checkguess == 1)
            {
                p.println("Correct Guess. You have " + counter + " incorrect guesses left\t\t\t\t\t\t\t The letters you have entered so far");
                p.println(guessit);
            }
            else
            {
                counter--;
                if(counter == 0)
                {
                    p.println("Wrong guess. You hanged the man :(");
                    p.println(guessit);
                    obj.Hang7();
                }
                else
                {
                    p.println("Wrong guess. You have " + counter + " incorrect guesses left\t\t\t\t\t\t\t\t\t The letters you have entered so far");
                    p.println(guessit);
                }
            }
            checkguess = 0;
            if(counter == 0)
            p.println("\nSorry you lost the game\n\nThe correct word is " + guessword);
            a = guessit.toString();
            if(a.equals(guessword))
            {
                p.println("You guessed the word!!!!!");
                counter=0;
            }        
        }while(counter>0);
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:15:28.483

您的 main() 缺少字符串数组参数，它应该是：

```
public static void main(String args[]) throws IOException { 
```

添加它，它会运行。

此外，您没有存储您的猜测字母，也没有将其打印出来，因此它不会被显示。要解决此问题，请将您的猜测字符串数组更改为一个简单的字符串，并在您对猜测字母执行大写之后添加以下行：

```
guesses += guessletter; 
```

然后在每个 println() 之后显示“到目前为止您输入的字母”打印出猜测字符串。这将显示猜测的字母列表。

我们都从某个地方开始，你的代码让我想起了 30 年前我写的第一批东西。一旦一切正常，请查看您的代码并找出可以改进的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-19T19:38:20.057

您只需创建一个字符串`madeGuesses="";`并继续向其中添加字符，然后将其打印出来，例如

```
System.out.print(\u000method  clearScreen method Email..e for more 
```

# nhibernate - NHibernate：当实际数据链接通过另一个表时，将集合映射到实体上

> ID：13064020
> 
> 赞同：0
> 
> 时间：2012-10-25T07:52:21.800
> 
> 标签：nhibernate, nhibernate-mapping

将 NHibernate 3.3 与 XML 映射文件一起使用。

我有以下数据库结构，但希望我的 NHibernate 实体将 ReportComponentOverrides 反映为 ReportComponent 上的一个集合。然后，我将根据我正在使用的 ReportDefinition 查找我感兴趣的覆盖。

由于中间 (ReportDefinitionComponent) 表，我看不到将覆盖映射到组件的方法。

谁能给我一些指示？

```
 ReportDefinition
                                   |
                                   |
                                   *
                        ReportDefinitionComponent *--- ReportComponentOverride
                                   *
                                   |
                                   |
 ReportComponentType *----  ReportComponent 
```

我目前的努力：

```
<class name="ReportComponent" table="ReportComponent">
  <id name="ID" type="Int32">
    <column name="ID" />
    <generator class="identity" />
  </id>
  <map name="Overrides" table="ReportDefinitionComponent">
    <key column="ReportComponentID"/>
    <many-to-many column="ReportDefinitionComponentID" class="ReportComponentOverride" />
  </map>
</class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:53:50.613

我希望像

```
<map name="Overrides" table="ReportDefinitionComponent">
  <key column="ReportComponentID"/>
  <index-many-to-many column="ReportDefinition_Id" class="ReportDefinition"/>
  <many-to-many column="ReportComponentOverrideID" class="ReportComponentOverride" />
</map> 
```

# c# - C# Crystal Report 警告 您请求的报告需要更多信息

> ID：13064022
> 
> 赞同：0
> 
> 时间：2012-10-25T07:52:28.743
> 
> 标签：c#, logging, input, crystal-reports, logonserver

我使用 C#.NET (WebApp) VS 2008 SP1

我想从水晶报告 v.10.5.3700（框架 3.5）单击下一页，但它会将输入数据显示到下一页

**您要求的报告需要更多信息 服务器名称：
数据库名称：
用户名：
密码：**

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.OleDb;
using System.Diagnostics;
using System.Data.SqlClient;
using System.Web.Configuration;
using System.Transactions;
using System.Drawing;
using System.Globalization;
using System.Text;
using System.Text.RegularExpressions;
using System.IO;
using CrystalDecisions.Web;
using CrystalDecisions.CrystalReports;
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;
using CrystalDecisions.ReportSource;

namespace testReport
{
    public partial class _cldClass : System.Web.UI.Page
    {
        SqlConnection objConn = new SqlConnection();
        SqlCommand objCmd = new SqlCommand();
        SqlDataAdapter dtAdapter = new SqlDataAdapter();
        SqlConnection Conn;

        DataSet ds = new DataSet();
        DataTable dt = null;
        string strConnString = WebConfigurationManager.ConnectionStrings["connDB"].ConnectionString;
        string strSQL = null;

        public string userDB
        {
            get { return WebConfigurationManager.AppSettings["userDB"]; }
        }
        public string pwdDB
        {
            get { return WebConfigurationManager.AppSettings["pwdDB"]; }
        }
        public string srvDB
        {
            get { return WebConfigurationManager.AppSettings["srvDB"]; }
        }
        public string dbName
        {
            get { return WebConfigurationManager.AppSettings["dbName"]; }
        }

        //protected void Page_Load(object sender, EventArgs e)
        //{
        //}

        protected void Page_Init(object sender, EventArgs e)
        {
            TextBox2.Text = DateTime.Now.ToString("yyyy-MM-dd", new CultureInfo("en-US"));
            Conn = new SqlConnection(strConnString);
            Conn.Open();

            if (Conn.State == ConnectionState.Open)
            {
                this.Label1.Text = "Connected";
            }
            else
            {
                this.Label1.Text = "Connect Failed";
            }
        }

        protected void Button2_Click(object sender, EventArgs e)
        {
            strSQL = "SELECT * FROM fTime WHERE fDate='" + TextBox2.Text + "'";

            objConn.ConnectionString = strConnString;
            var _with1 = objCmd;
            _with1.Connection = objConn;
            _with1.CommandText = strSQL;
            _with1.CommandType = CommandType.Text;
            dtAdapter.SelectCommand = objCmd;

            dtAdapter.Fill(ds, "cReport");
            dt = ds.Tables[0];

            dtAdapter = null;
            objConn.Close();
            objConn = null;

            ReportDocument rpt = new ReportDocument();
            rpt.Load(Server.MapPath("Report\\CrystalReport.rpt"));
            rpt.SetDataSource(dt);
            rpt.SetDatabaseLogon(userDB, pwdDB, srvDB, dbName);
            CrystalReportViewer1.ReportSource = rpt;
            CrystalReportViewer1.RefreshReport();       
        }
    }
} 
```

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:36:16.457

我今天遇到了这个问题，我收到错误的原因是因为我的服务器上没有安装正确的提供程序。

我所做的是这样的：

```
 CrystalReportViewer1.EnableDatabaseLogonPrompt = false; 
```

这给了我一个新错误：登录失败。详细信息：ADO 错误代码：0x 源：ADODB.Connection 描述：找不到提供程序。可能没有正确安装

之后，我检查了报告中的 OLE DB 提供程序。安装 SQL Native Client 工具解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:01:31.060

通常，当您直接从数据库创建报表文档时需要输入这些信息，这意味着当您使用报表向导并从数据库中选择一个表时。报表文档本身包含与该数据源的连接信息，但不保存登录信息。

为了克服这个问题，您可以首先从您喜欢在报告中使用的数据库表中创建一个类型化的数据集。然后创建一个报表文档并使用向导将数据集（不是直接的数据库表）设置为报表的数据源。然后，您可以在您的代码中填充数据集并将其传递给报告。

# string - 读取 XML 数据时已超出最大字符串内容长度配额 (8192)。

> ID：13064032
> 
> 赞同：1
> 
> 时间：2012-10-25T07:53:29.853
> 
> 标签：string, wcf, max

我收到以下错误

> 服务器在处理请求时遇到错误。异常消息是“格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数[http://tempuri.org/:commentText](http://tempuri.org/:commentText)时出错。InnerException 消息是“反序列化 System.String 类型的对象时出错。读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额。有关更多详细信息，请参阅 InnerException。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> ```
> at System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameterPart(XmlDictionaryReader 
> ```
> 
> 阅读器，PartInfo 部分）在 System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameter（XmlDictionaryReader 阅读器，PartInfo 部分）在 System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeParameters（XmlDictionaryReader 阅读器，PartInfo[] 部分，Object[] 参数，PartInfo returnInfo，Object& returnValue) 在 System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeBodyCore(XmlDictionaryReader reader, Object[] parameters, Boolean isRequest) at System.ServiceModel.Dispatcher.DataContractJsonSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[]参数，布尔 isRequest）在 System.ServiceModel.Dispatcher。System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest（消息消息，Object[] 参数）处 System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest 处的 OperationFormatter.DeserializeBodyContents（消息消息，Object[] 参数，布尔 isRequest） ] 参数）在 System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.DispatchOperationRuntime。 DeserializeInputs(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime。ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System。 ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

这些是我的 web.config

```
<services>
      <service behaviorConfiguration="Frontiers.WCF.Services.MyHomeServiceBehavior" name="Frontiers.WCF.Services.MyHomeService">
        <endpoint address="" behaviorConfiguration="EndpBehavior" binding="webHttpBinding" contract="Frontiers.WCF.Services.IMyHomeService" />
      </service>
      <service behaviorConfiguration="Frontiers.WCF.Services.NetworkServiceBehavior" name="Frontiers.WCF.Services.NetworkService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="EndpBehavior" contract="Frontiers.WCF.Services.INetworkService" >
        </endpoint>
      </service>
      <service behaviorConfiguration="Frontiers.WCF.Services.WidgetServiceBehaviour" name="Frontiers.WCF.Services.WidgetService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="EndpBehavior" contract="Frontiers.WCF.Services.IWidgetService">
        </endpoint>
      </service>
      <service behaviorConfiguration="Frontiers.SharePoint.Site.Navigation.NavigationServiceBehaviour" name="Frontiers.SharePoint.Site.Navigation.NavigationService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="EndpBehavior" contract="Frontiers.SharePoint.Site.Navigation.INavigationService">
        </endpoint>
      </service>
      <service behaviorConfiguration="Frontiers.WCF.Services.UserProfileServiceBehavior" name="Frontiers.WCF.Services.UserProfileService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="EndpBehavior" contract="Frontiers.WCF.Services.IUserProfileService">
        </endpoint>
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="ContactsImporterSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="819200" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="JournalActivityReportSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="eUtilsServiceSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
                    bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="eUtilsServiceSoap1" closeTimeout="00:01:00" openTimeout="00:01:00"
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="eUtilsServiceSoap2" closeTimeout="00:01:00" openTimeout="00:01:00"
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="eUtilsServiceSoap3" closeTimeout="00:01:00" openTimeout="00:01:00"
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings> 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:50:05.763

你应该增加你的 maxStringContentLength="8192"，错误说它试图读取一个更高的字符串作为 8192 个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T20:51:20.010

`maxStringContentLength="8192"`在服务**主机**的 app.config中设置。

# loops - 计算浮点数提前达到 0 的时间

> ID：13064037
> 
> 赞同：0
> 
> 时间：2012-10-25T07:53:52.123
> 
> 标签：loops, floating-point, future

我有一个循环，运行在`1000 / 60`〜`16.67`毫秒。

我有一个百分比浮点数（`0.0 - 1.0`），每次迭代我都会`.05`从中减去。

如何计算将来的哪个迭代将我的百分比浮动设置为`0`？

我有一种感觉，这是简单的数学运算，但我就是想不出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:57:45.900

您的 Float/0.05 = 达到 0 所需的迭代次数（假设 float 可以被 0.05 整除）。如果不是，它将是天花板（YourFloat/0.05）。

# java - 我在 gwt 中的文件 (web.xml) 有错误

> ID：13064039
> 
> 赞同：0
> 
> 时间：2012-10-25T07:53:55.650
> 
> 标签：java, gwt

我有一个错误，我不知道解决它。问题是：当我在我的 java 类中做某事并按下保存后，我已经转到文件 web.xml 以保存它而无需下一个代码：

```
<servlet>
    <servlet-name>SystemServiceServlet</servlet-name>
    <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
    <init-param>
      <param-name>services</param-name>
      <param-value/>
    </init-param>
  </servlet>

  <servlet-mapping>
    <servlet-name>SystemServiceServlet</servlet-name>
    <url-pattern>/_ah/spi/*</url-pattern>
  </servlet-mapping> 
```

这段代码我有评论，然后保存如果我不这样做，那么我会出现下一条消息错误：

```
 25-oct-2012 9:29:01 com.google.apphosting.utils.jetty.JettyLogger warn
ADVERTENCIA: EXCEPTION 
java.lang.ClassNotFoundException: com.google.api.server.spi.SystemServiceServlet
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:176)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:191)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.restart(DevAppServerImpl.java:265)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher$AppEngineServletContainer.refresh(AppEngineLauncher.java:51)
    at com.google.gwt.dev.DevMode.onRestartServer(DevMode.java:349)
    at com.google.gwt.dev.shell.remoteui.RemoteUI.restartWebServer(RemoteUI.java:166)
    at com.google.gwt.dev.shell.remoteui.DevModeServiceRequestProcessor.processRestartServer(DevModeServiceRequestProcessor.java:94)
    at com.google.gwt.dev.shell.remoteui.DevModeServiceRequestProcessor.execute(DevModeServiceRequestProcessor.java:59)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.processClientRequest(MessageTransport.java:362)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.processMessage(MessageTransport.java:404)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.access$400(MessageTransport.java:44)
    at com.google.gwt.dev.shell.remoteui.MessageTransport$3.run(MessageTransport.java:322)
    at java.lang.Thread.run(Unknown Source)
25-oct-2012 9:29:01 com.google.appengine.tools.development.ApiProxyLocalImpl log
GRAVE: javax.servlet.ServletContext log: unavailable
javax.servlet.UnavailableException: com.google.api.server.spi.SystemServiceServlet
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:79)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:191)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.restart(DevAppServerImpl.java:265)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher$AppEngineServletContainer.refresh(AppEngineLauncher.java:51)
    at com.google.gwt.dev.DevMode.onRestartServer(DevMode.java:349)
    at com.google.gwt.dev.shell.remoteui.RemoteUI.restartWebServer(RemoteUI.java:166)
    at com.google.gwt.dev.shell.remoteui.DevModeServiceRequestProcessor.processRestartServer(DevModeServiceRequestProcessor.java:94)
    at com.google.gwt.dev.shell.remoteui.DevModeServiceRequestProcessor.execute(DevModeServiceRequestProcessor.java:59)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.processClientRequest(MessageTransport.java:362)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.processMessage(MessageTransport.java:404)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.access$400(MessageTransport.java:44)
    at com.google.gwt.dev.shell.remoteui.MessageTransport$3.run(MessageTransport.java:322)
    at java.lang.Thread.run(Unknown Source)

25-oct-2012 9:29:01 com.google.apphosting.utils.jetty.JettyLogger warn
ADVERTENCIA: failed SystemServiceServlet: java.lang.NullPointerException
25-oct-2012 9:29:01 com.google.apphosting.utils.jetty.JettyLogger warn
ADVERTENCIA: Failed startup of context com.google.appengine.tools.development.DevAppEngineWebAppContext@8d5bff{/,C:\Alberto\workspace\uned\RepresentacionAfc\war}
java.lang.NullPointerException
    at java.lang.Class.isAssignableFrom(Native Method)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:256)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:191)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:239)
    at com.google.appengine.tools.development.DevAppServerImpl.restart(DevAppServerImpl.java:265)
    at com.google.appengine.tools.development.gwt.AppEngineLauncher$AppEngineServletContainer.refresh(AppEngineLauncher.java:51)
    at com.google.gwt.dev.DevMode.onRestartServer(DevMode.java:349)
    at com.google.gwt.dev.shell.remoteui.RemoteUI.restartWebServer(RemoteUI.java:166)
    at com.google.gwt.dev.shell.remoteui.DevModeServiceRequestProcessor.processRestartServer(DevModeServiceRequestProcessor.java:94)
    at com.google.gwt.dev.shell.remoteui.DevModeServiceRequestProcessor.execute(DevModeServiceRequestProcessor.java:59)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.processClientRequest(MessageTransport.java:362)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.processMessage(MessageTransport.java:404)
    at com.google.gwt.dev.shell.remoteui.MessageTransport.access$400(MessageTransport.java:44)
    at com.google.gwt.dev.shell.remoteui.MessageTransport$3.run(MessageTransport.java:322)
    at java.lang.Thread.run(Unknown Source) 
```

有人知道原因吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:41:14.447

感谢您的回答。

我一直在寻找，我已经导入了所有 *.jar 文件

我已经实现了我的应用程序所需的同步方法，这些方法在 web.xml 文件中声明

```
 <servlet>
    <servlet-name>afcService</servlet-name>
    <servlet-class>com.afc.server.AfcServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>afcService</servlet-name>
    <url-pattern>/representacionafc/afcService</url-pattern>
  </servlet-mapping> 
```

如果我没有将代码放在上面，那么应用程序没有任何错误，但是如果我取消注释上面的代码，那么我就有问题了。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:27:01.783

我有同样的问题，我花了一段时间才弄清楚。

起初我意识到我肯定需要 SystemServiceServlet 来发送邮件，例如

然后我发现这不是 google 或 eclipse 问题，因为如果我在 eclipse 向导上创建了一个全新的 GEA 项目，它对我来说效果很好。

我认为这是一个 maven gwt-maven-plugin 版本 2.5.0-rc1 的问题，因为这个版本的插件没有将 GAE 构建器添加到 eclipse 的构建器部分。

我迁移到版本 2.5.0-rc2 关闭了 eclipse 中的项目清理所有 m2e 内容（.settings、bin 文件夹等）。之后我重新导入了项目并启用了 GAE，一切都恢复了。

无论如何，这真的很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:01:44.443

您是否导入了已实现“com.google.api.server.spi.SystemServiceServlet”的 *.jar 文件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:03:54.990

例外情况是您的班级：

```
<servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class> 
```

找不到。尝试确保您已在编译和其他运行时导入了相应的 .jar 文件

# sql - sql server 2005 中的数据透视表

> ID：13064040
> 
> 赞同：0
> 
> 时间：2012-10-25T07:53:56.773
> 
> 标签：sql, sql-server-2005

这是我桌子上的记录

```
GuestName      F1    H1    F2  H2  F3   H3
Ryan Palma     1200  Room  12  SC  14   VAT
Richard Palma  1500  Room  15  SC  17   VAT
Ruth Palma     1600  Room  16  SV  18   VAT 
```

我想要这样的输出

```
GuestName      Room  SC  VAT
Ryan Palma     1200  12  14
Richard Palma  1500  15  17
Ruth Palma     1600  16  18 
```

我如何使用查询来做到这一点，

在此先感谢，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:56:40.187

你可以试试这个

```
select guestname,f1 as Room,f2 as SC,f3 as VAT from table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T07:56:57.637

您可以使用此查询执行此操作：-

```
Select GuestName, F1 as Room, F2 as SC, F3 as VAT from your_table_name; 
```

# java - XmlRpcClient 使用多种变量类型解析响应

> ID：13064050
> 
> 赞同：0
> 
> 时间：2012-10-25T07:54:40.850
> 
> 标签：java, xml-parsing, xml-rpc, xmlrpcclient

我正在使用 XmlRpcClient 连接到 XML-RPC 服务器在 XML 响应中对我的请求的响应中，我将得到：

```
int cpuLoad, 
String fanStatus, 
String fanStatusWorst, 
String temperatureStatus, 
String temperatureStatusWorst,
String rtcBatteryStatus,
String rtcBatteryStatusWorst, 
String voltagesStatus, 
String voltagesStatusWorst, 
String operationalStatus 
```

我正在使用

```
HashMap result = (HashMap) xmlRpcClient.execute(METHOD_DEVICE_HEALTH, params ); 
```

检索结果，但不确定如何遍历每个值以找到 operationStatus 值。是否有更优雅的解决方案来使用 xmlRpcClient 解析结果？所以我只检索我感兴趣的字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:40:53.830

实际上，根据您的场景，您的问题有不止一个答案。

```
1) 如果您使用 XML-RPC 与基于 Java 的系统进行通信

```

Apache XML-RPC 库带有一个名为`ClientFactory`. 此类允许您将您的服务接口（在您的情况下是您正在调用的对象的接口）绑定到`METHOD_DEVICE_HEALTH`您的消费者的 JVM 中的一个对象（调用的对象`xmlRpcClient.execute(METHOD_DEVICE_HEALTH, params)`）。有关实施的更多详细信息，请查看[此链接](http://ws.apache.org/xmlrpc/advanced.html)。

在这个场景中，你甚至可以有一个像

```
public class DeviceHealth {
  int cpuLoad, 
  String fanStatus, 
  String fanStatusWorst, 
  String temperatureStatus, 
  String temperatureStatusWorst,
  String rtcBatteryStatus,
  String rtcBatteryStatusWorst, 
  String voltagesStatus, 
  String voltagesStatusWorst, 
  String operationalStatus

  // getters and setters
} 
```

以及服务类中的一个方法直接返回其类型

```
public interface HealthService {
   DeviceHealth checkDeviceHealth(int id);
}

public class DefaultHealthService implements HealthService {
    public DeviceHealth checkDeviceHealth(int id) {}
} 
```

框架会自动为你序列化和反序列化这个对象。

```
2）如果您正在与其他系统进行通信

```

好吧，在这种情况下，您的 gona 必须自己处理序列化和反序列化过程。您可以使用该 JAXB，它具有内置 JDK 1.6 和 1.7 的参考实现。[这篇文章](https://stackoverflow.com/questions/5189690/how-to-serialize-and-de-serialize-objects-using-jaxb)为您提供了如何做到这一点的想法。

# file - 如何使用 cakephp 2.x 上传文件并将其附加到电子邮件？

> ID：13064051
> 
> 赞同：2
> 
> 时间：2012-10-25T07:54:46.537
> 
> 标签：file, email, cakephp, upload, attachment

我是 cakephp 2.x 的新手。我想为用户构建一个简单的表单来上传他们的简历文件，然后将它们作为电子邮件附件发送。不知何故，我找不到将上传的文件附加到电子邮件的方法。欢迎任何帮助！这是我的 send.ctp：

```
<?php 
   echo $this -> Form -> create(null, array('enctype' =>'multipart/form-data'));
   echo $this -> Form -> input('first_name', array('type'=>'text')); 
   echo $this -> Form ->input('last_name', array('type'=>'text'));
   echo $this -> Form ->input('contact_number',array('type'=>'text')); 
   echo $this -> Form ->input('email',array('type'=>'text'));
   echo $this -> Form ->input('resume', array('type' => 'file',));
   echo $this -> Form ->end('Submit');      
?> 
```

这是我的 HomesController.php

```
<?php 
   class HomesController extends AppController {
public $name = 'Homes';
public $uses = null;
public $helpers = array('Html', 'Form');

    public function index() {
    }
public function send(){
   if (!empty($this->data)) {
      echo $this->data['last_name'];
      echo $this->data['contact_number'];
      echo $this->data['email'];
          echo $this->data['resume'];

      App::uses('CakeEmail', 'Network/Email');
      $email = new CakeEmail();
      $email->from('xyz@gmail.com');
          $email->to('abc@gmail.com');
          $email->subject('About');
          $email->attachments = array($this->data['resume']);
      $email->send($this->data['last_name']);
      $this->redirect(array('action' => 'index'));
   }
     }
   }?> 
```

电子邮件实际上可以发送和接收，但没有附件。当我尝试“echo $this->data['resume']”时，它只显示一个字符串---'Array'。但是像“echo $this->data['last_name']”这样的其他字段可以正常工作。

[http://cakebaker.42dh.com/2006/04/15/file-upload-with-cakephp/](http://cakebaker.42dh.com/2006/04/15/file-upload-with-cakephp/) 以上一个使用数据库，我不想使用数据库来存储文件。它使用无法在 2.x 中运行的 cakephp 1.x。

[如何在 CakePHP 中进行基于表单的文件上传？](https://stackoverflow.com/questions/1290253/how-to-do-form-based-file-uploads-in-cakephp) 这个没有说明如何将文件附加到电子邮件。

这是我的 Config/email.php，我使用 gmail smtp：class EmailConfig {

```
public $default = array(
    'transport' => 'Smtp',
    'from' => 'XXX@gmail.com',
    //'charset' => 'utf-8',
    //'headerCharset' => 'utf-8',
);

public $smtp = array(
    'transport' => 'Smtp',
    'from' => array('XXX@gmail.com' => 'Sender'),
    'host' => 'smtp.gmail.com',
    'port' => 465,
    'timeout' => 30,
    'username' => 'XXX',
    'password' => '@password',
    'client' => null,
    'log' => false,
    //'charset' => 'utf-8',
    //'headerCharset' => 'utf-8',
);

public $fast = array(
    'from' => 'you@localhost',
    'sender' => null,
    'to' => null,
    'cc' => null,
    'bcc' => null,
    'replyTo' => null,
    'readReceipt' => null,
    'returnPath' => null,
    'messageId' => true,
    'subject' => null,
    'message' => null,
    'headers' => null,
    'viewRender' => null,
    'template' => false,
    'layout' => false,
    'viewVars' => null,
    'attachments' => null,
    'emailFormat' => null,
    'transport' => 'Smtp',
    'host' => 'localhost',
    'port' => 25,
    'timeout' => 30,
    'username' => 'user',
    'password' => 'secret',
    'client' => null,
    'log' => true,
    //'charset' => 'utf-8',
    //'headerCharset' => 'utf-8',
); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:58:55.163

`$this->data['resume']`是一个包含文件上传信息的数组。

数组看起来像这样：

```
array(
   'name' => '(filename)',
   'type' => '(filetype)',
   'tmp_name' => '(file location)',
   'error' => (int) 0,
   'size' => (int) 1
) 
```

尝试使用以下方法设置附件：

```
$email->attachments(array($this->data['resume']['name'] => $this->data['resume']['tmp_name'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T10:59:50.963

```
$Path = WWW_ROOT."img";
$fileName = 'image.png';    
$this->Email->to = $to;
$this->Email->subject = $subject;
$this->Email->attachments = array($Path.$fileName);
$this->Email->from = $from; 
```

# search - 使用批处理脚本搜索和排序目录和子目录

> ID：13064055
> 
> 赞同：3
> 
> 时间：2012-10-25T07:55:11.113
> 
> 标签：search, sorting, batch-file

我一直在尝试在小学的用户目录和子目录中搜索所有应用程序、音乐、视频和存档文件，以检查孩子们对我隐藏了什么。我一直在使用与此类似的基本目录脚本：

```
dir C:\Sample\*.exe, C:\Sample\*.rar, C:\Sample\*.mp3  /s /b /OE > D:\Result.txt 
```

这为我提供了按用户名排序的所有类型文件的输出。

我想知道的是，是否有一种简单的方法可以将搜索更改为按类型排序，或者之后使用排序命令按文件的最后一个字符进行排序。

输出样本：

```
U:\adwan4\My Documents\My Videos\PhotoStory1.wmv
U:\ageeg2\My Documents\install_flashplayer11x32ax_gtbp_chra_aih.exe
U:\amcka55\My Documents\My Music\Angus.wmv 
```

我想出了一些似乎可以使用 Find 来解决问题的方法：

```
Find ".exe" D:\Result.txt >>D:\Sorted.txt 
```

这似乎适用于 avi、exe 等。但是我会很高兴有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:25:13.703

干得好

```
for %%x in (exe,mp3) do (
for /r C:\Dir %%a in (*.%%x) do echo %%a >>D:\Results.txt
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:19:34.947

对于任何有兴趣的人，我最初的解决方案（因为它没有循环而需要更多的输入）看起来像这样：

```
ECHO Off
dir U:\*.exe, U:\*.rar, U:\*.mp3  /s /b > D:\Result.txt
Echo Applications > D:\Sorted.txt
Echo --------------------------- >>D:\Sorted.txt
Find ".exe" D:\Result.txt >>D:\Sorted.txt
Echo Music >> D:\Sorted.txt
Echo --------------------------- >>D:\Sorted.txt
Find ".mp3" D:\Result.txt >>D:\Sorted.txt
Echo --------------------------- >>D:\Sorted.txt
Find ".wma" D:\Result.txt >>D:\Sorted.txt 
```

ETC

需要做更多的设置工作，并且是一个 2 步过程。该解决方案看起来也不像呈现给我的任何一个选项那样优雅。谢谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:43:07.647

在没有 /S 选项的情况下运行 DIR /O 排序选项可以正常工作。但是，当您使用 /S 选项时，它会单独对每个目录中的结果进行排序，而您希望对整个结果集进行排序。

Bali C 的编辑答案通过单独执行多个搜索来解决问题，每个文件扩展名一个。他选择使用 FOR 命令来迭代文件并 ECHO 结果。我相信使用多个 DIR 命令会更简单。

```
>d:result.txt (
  dir /s /b C:\Sample\*.exe
  dir /s /b C:\Sample\*.rar
  dir /s /b C:\Sample\*.mp3
) 
```

或者，也许少一点打字

```
>d:result.txt (
  for %%X in (exe rar mp3) do dir /s /b C:\Sample\*.%%X
) 
```

# java - 方法 fillArrayList 填充两个 arraylist 列表

> ID：13064056
> 
> 赞同：0
> 
> 时间：2012-10-25T07:55:12.853
> 
> 标签：java, arraylist

如何在方法 fillArrayList 中用相应的元素填充两个列表，用户必须输入值

```
import java.util.ArrayList;
import java.util.Scanner;

class Assignment1
{
    public static void main(String[] args)
    {
      ArrayList<Integer> list1 = new ArrayList<Integer>();
      ArrayList<Integer> list2 = new ArrayList<Integer>();

      System.out.println("Enter your lists = ");
      fillArrayList(list1,list2);

    }

    public static void fillArrayList(ArrayList<Integer> L1 ,ArrayList<Integer> L2 )
    {
           //don't know what to do here to fill two lists from the user , really need help

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:06:46.083

在您的 fillArrayList 中，您需要一个循环。由于 arraylist 的大小未确定，因此您将需要某种终止输入。如果所需的数字都是正数，那么简单的终止输入将是一个负数。换句话说，使用 while 循环，如果输入为负数，则停止循环。

为了从用户那里获取值，请使用 Scanner 类。获取整数所需的方法是 nextInt() 方法。

获得整数后，只需使用 add 方法将其添加到列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:21:05.777

我认为你应该修改你的`fillArrayList`签名，一次只填写一个列表。你可以为你的两个数组列表调用它两次。

所以，你的方法应该是这样的： -

```
public static void fillArrayList(ArrayList<Integer> myList) {
    /* Let the code be same as the one in @AmitD's post */

    Scanner scanner = new Scanner(System.in);
    System.out.println("Enter elemetns for List: Enter -1 to end ");

    while (scanner.hasNext()) {
        if (scanner.hasNextInt()) {
            int i = scanner.nextInt();
            if (i == -1)
                break;

            myList.add(i);
        } else {
            System.out.println("Invalid value Please enter integer");
            scanner.next();
        }
    }

} 
```

然后在 main 方法之外将您的两个列表声明为实例变量。并`List`用于参考类型。

```
List<Integer> list1 = new ArrayList<Integer>();
List<Integer> list2 = new ArrayList<Integer>(); 
```

现在，从 main 方法中，您可以为每个列表调用此方法两次，如下所示：-

```
fillArrayList(list1);
fillArrayList(list2); 
```

回到您的主要方法中，您可以打印您的列表，因为您在`fillArrayList`方法中所做的更改也会在那里反映出来。

```
System.out.println(list1);
System.out.println(list2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:04:59.240

您需要做的就是从用户那里获取输入，将其读取为`int`or`Integer`并调用[ArrayList.add(E o)](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html#add%28E%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:05:07.233

您需要使用[Scanner](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html)从用户那里获取输入并将其添加到列表中。

```
public static void fillArrayList(ArrayList<Integer> l1,
        ArrayList<Integer> l2) {
    // don't know what to do here to fill two lists from the user , really
    // need help
    Scanner scanner = new Scanner(System.in);

    System.out.println("Enter elemetns for List 1: Enter -1 to end ");

    while (scanner.hasNext()) {
        if (scanner.hasNextInt()) {
            int i = scanner.nextInt();
            if (i == -1)
                break;
            l1.add(i);
        } else {
            System.out.println("Invalid value Please enter integer");
            scanner.next();
        }
    }
    System.out.println("Your List :"+ l1);

    //Do same for List 2
} 
```

# javascript - java脚本函数中识别IE8和IE9

> ID：13064057
> 
> 赞同：-2
> 
> 时间：2012-10-25T07:55:23.183
> 
> 标签：javascript, internet-explorer, cross-browser

如何识别正在运行的 Internet Explorer 版本是 IE7、IE8 还是 IE9。据此，我需要使用 java 脚本函数调用 css 样式。请编写该javascript代码。

帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:10:26.307

如果您的目标纯粹是为特定版本的 Internet Explorer 包含特定样式表，则您希望使用条件包含：

**HTML**

```
<!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8.css">
<![endif]-->

<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]-->

<!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6.css">
<![endif]--> 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:01:07.483

通常检测特征是最好的事情，但在这种特殊情况下一个相当好的点是检测条件注释的存在，它仅由 IE 支持。

这是我通常做的：

```
var div = document.createElement("div"), IE;
div.innerHTML = "<!--[if IE 5]>5<![endif]--><!--[if IE 5.0]>5.0<![endif]--><!--[if IE 5.5]>5.5<![endif]-->\
    <!--[if IE 6]>6<![endif]--><!--[if IE 7]>7<![endif]--><!--[if IE 8]>8<![endif]--><!--[if IE 9]>9<![endif]-->";
IE = d.firstChild && d.firstChild.nodeType===3 ? +d.innerHTML : false; 
```

# ipad - 从 iPad 上的 websocket 连接中获取错误信息

> ID：13064058
> 
> 赞同：1
> 
> 时间：2012-10-25T07:55:38.037
> 
> 标签：ipad, websocket

我正在尝试实现 websocket 协议，但由于某种原因 iPad 不与我合作。iPad 运行[Hybi-00 规范](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-00)，问题出在握手的某个地方。我正在阅读请求和以下魔术字节，并以我认为正确的答复进行响应。iPad 不同意我并关闭了连接。

协议处理程序适用于大多数现代浏览器运行的[Hybi-06 。](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-06)

我真的很想用某种方法让 iPad 告诉我*为什么*它决定关闭 websocket 连接，以便我可以解决这个问题。要么就是让 chrome 或其他浏览器将他们的 websocket 版本降级到 iPad 支持的相同版本，这样我就可以得到一些关于实际情况的线索。

有没有办法获取这些信息？

好的，所以，即使解释实际的错误会很好，这里是握手：

```
GET /myurl HTTP/1.1
Upgrade:WebSocket
Connection:Upgrade
Host:my-host.com
Origin:https://my-host.com
Sec-WebSocket-Key1:1  QB  9 ,  $169780@8A`@4
Sec-WebSocket-Key2:3 160RhGi7mu  97*66br9 
```

以下八个字节是关键：

```
{byte[8]}
    [0]: 105
    [1]: 199
    [2]: 161
    [3]: 204
    [4]: 5
    [5]: 176
    [6]: 104
    [7]: 199 
```

服务器回复这个

```
HTTP/1.1 101 Web Socket Protocol Handshake
Upgrade:WebSocket
Connection:Upgrade
Sec-WebSocket-Origin:https://my-host.com
Sec-WebSocket-Location:ws://my-host.com/ 
```

和关键

```
{byte[16]}
    [0]: 100
    [1]: 132
    [2]: 37
    [3]: 58
    [4]: 243
    [5]: 195
    [6]: 173
    [7]: 26
    [8]: 180
    [9]: 239
    [10]: 33
    [11]: 56
    [12]: 40
    [13]: 192
    [14]: 123
    [15]: 255 
```

这是通过 HTTPS 连接运行的，所以它基本上是来自我的调试器的数据，因为我无法正确配置 wireshark 以在我的一生中提取它。据我所知，握手键也是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:33:30.850

Hybi-06 是协议的一个版本，它只是一个规范，如果我没记错的话，实际上没有任何浏览器实现该版本。我认为大多数浏览器都使用了 Hybi-10，然后是 Hybi-17（Rfc6455），正如你所说的 iOS 目前使用的是 Hybi00。有几个服务器支持该特定握手。我也知道有一些支持草稿的每个版本。

我运行[XSockets.NET](http://xsockets.net)，我们选择支持 Hybi-00 和 RFC6455 版本，因为它们是在浏览器中实现的协议。（Safari 仍在 Hybi00 上）

在 RFC6455 中有一个关于支持多协议的部分；

[https://www.rfc-editor.org/rfc/rfc6455#page-26](https://www.rfc-editor.org/rfc/rfc6455#page-26)

如果您正在实施某事，我的建议是执行 RFC6455

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:33:02.147

看看[这个线程](http://forums.asp.net/t/1828462.aspx/1)。

正如 Cybear 所指出的，我建议升级到 iOS6。目前的统计数据显示[，大约 60% 的 iOS 用户在 iOS6 上](http://iphoners.org/tag/ios-6-penetration-rate/)。

# php - sql查询中的连字符导致问题

> ID：13064062
> 
> 赞同：0
> 
> 时间：2012-10-25T07:55:44.560
> 
> 标签：php, mysql

我正在尝试使用此过滤器从数据库中查询数据。我希望在我的结果查询中不存在之后的单词。但我的结果仍然是那个词。

```
select * from table where titel not like '%word-word%' 
```

但我仍然得到标题有单词的查询`'word-word'`。

我是否必须逃避查询`'-'`

`like`和`not like`在这个意义上有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:02:52.010

我使用了以下查询，它对我来说工作正常

```
select * from table1 where titel 
not like '%word-word%' 
```

检查表中的“word-word”数据。并确保它不包含任何不需要的空格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:05:58.790

首先在这里

1）“Like”将检查数据库中的单词或字符，如果找到则显示在结果中。

2）“不喜欢”也会做同样的事情，但在这里它不会显示结果。它将被排除在外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:10:14.410

您的查询没有问题。检查您的表是否包含“word-word”。

试试这个

```
select * from table where title not like '%word-word%' 
```

# floating-point - 解释为什么浮点格式的隐藏位不需要表示

> ID：13064063
> 
> 赞同：9
> 
> 时间：2012-10-25T07:55:45.793
> 
> 标签：floating-point

解释为什么浮点格式的隐藏位不需要表示。

帮助？我知道隐藏位的存在是为了更精确，但为什么不需要表示它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:01:35.407

如果你的意思是隐藏位是尾数 H.xxxxxxx 之前的那个，H=hidden，答案是它隐含地为 1，当指数>0 时，它为零，当指数==0。

如果可以从指数中计算出该位，则省略该位可以在尾数中增加一位精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T20:44:43.270

@Aki 的回答是正确的。隐含位并不总是 1。

对于 0.0、-0.0 和非正规数（逐渐下溢），隐含位（如果有）将为 0。
这些数字都是具有零偏置指数的数字。

非有限浮点 (+inf -inf NaN) 根本不需要任何隐含位的概念。
虽然，添加这样一点不会伤害
这些数字都是将有偏指数设置为所有数字的数字。

对于每个其他浮点数，隐含位将为 1。

从技术上讲，答案是我们不需要存储隐含位，因为我们在 FPU 电路中添加了额外的逻辑以根据上述规则对其进行重构；）。

例如，隐含位可以通过 ORing 偏置指数的所有位来获得，所以它毕竟不是那么昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-02T19:53:26.027

它总是一个所以我们不表示它当你规范化一个二进制数时你只会得到一个隐藏位，规范化的意思是写一个形式的数字

1.xxxx x 2^x（例如：110.11 变为 1.1011x2^2）

所以第一位总是变成 1 所以我们不需要表示它

# .net - .NET MVC3 - 从 XML 读取 HTML 部分并以剃刀视图显示

> ID：13064064
> 
> 赞同：0
> 
> 时间：2012-10-25T07:55:48.727
> 
> 标签：.net, html, xml, asp.net-mvc-3, razor

我需要从 XML 文件将一些文本和图像数据（在 html 标记中）显示到 Razor 视图中。例如，我有以下 XML：

```
<newsitems>
    <news id="1">
         <body>
             <p>lorem ipsum <h2>dolor</h2>.</p>
         </body>
    </news>
</newsitems> 
```

然后我需要将该内部 html 显示到视图中。如果可能的话，请告诉我最好的方法和代码！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:12:46.123

如果有的话，在 MVC 应用程序的目录中创建一个视图模型（这只是用于以易于理解的结构化方式表示数据的类的一个花哨名称）`Models`，例如：

```
public class NewsItemViewModel
{
   public int Id { get; set; }
   public string Body { get; set; }
} 
```

在您的控制器中创建一个操作以`NewsItemViewModel`从 XML 中提取实例。我会使用 LINQ-to-XML。假设您的目录中有一个名为的`NewsController`控制器`Controllers`。

```
public class NewsController : Controller
{
    public ActionResult Index()
    {
        // replace XElement.Parse(...) below to your own routine to load the XML file
        var newsItems = (from news in XElement.Parse(@"<newsitems>
<news id=""1"">
     <body>
         <p>lorem ipsum <h2>dolor</h2>.</p>
     </body>
</news>
  </newsitems>").Descendants("news")
         let body = news.Descendants("body").First()
         select new NewsItemViewModel {Id = (int)news.Attribute("id"), Body = body.Value });

        return View(newsItems);
    }
} 
```

`NewsController.Index`现在为（按照我的示例，那就是）创建一个视图`Views/News/Index.cshtml`。

```
@model IEnumerable<YourApplicationNameSpace.Models.NewsItemViewModel>

@foreach(var newsItem in Model)
{
      <div class="newsitem">
       @Html.Raw(newsItem.Body)
      </div>
} 
```

几点注意事项：

1.  我假设您是 XML 的作者，或者信任 XML 的来源。如果您不这样做，我会考虑预处理该`NewsItemViewModel.Body`属性以去除潜在危险的 HTML 或脚本，以防止恶意内容破坏您的网站或更糟。
2.  将 HTML 内容包装在XML 中`body`每个`news`元素的节点中，[`CDATA`](https://stackoverflow.com/questions/2784183/what-does-cdata-in-xml-mean)以便 HTML 内容不会破坏您的 XML 文件，从而能够成功解析它。

# magento - Magento 子类别产品未显示在前端站点

> ID：13064066
> 
> 赞同：0
> 
> 时间：2012-10-25T07:56:03.030
> 
> 标签：magento, product

当我将新产品添加到 magento 管理员并仅选择子类别而不是根类别时，该产品将不会显示在站点中。

当我返回并分配根类别和子类别时，它都会显示。我再次进入管理员并删除了根类别，所以现在产品像以前一样只有子类别。它仍然在现场显示。

问题是我正在从 .csv 文件导入产品，所以它只需要子类别并将产品添加到管理员但不会显示在前面。

类别结构是这样的：默认类别（根类别）-鞋子（子类别）-衣服（子类别）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:15:09.210

您确定您已将该类别添加为真正的子类别，而不是意外添加到顶层的另一个根类别吗？

这会产生你所说的效果。

为确保将其添加为子类别，您首先需要单击根类别，然后在选择后添加子类别。

如果您的类别已经是子类别，则该产品确实应该显示而不必将其添加到根目录，这就是我问的原因:)

# entity-framework - 在 json.net 中处理实体框架关系

> ID：13064073
> 
> 赞同：0
> 
> 时间：2012-10-25T07:56:23.780
> 
> 标签：entity-framework, asp.net-web-api, json.net

我有一个使用 json.net 输出 json 的 ASP MVC Web Api 项目。例如，我有以下模型：

```
public class ModelA
{
    public int Id {get;set;}
    public string Name {get;set;}

    [JsonIgnore]
    public int TypeModelId {get;set;}
    public virtual TypeModel TypeModel {get;set;}
}

public class TypeModel
{
    [JsonIgnore]
    public int Id {get;set;}

    public string Name {get;set;}

    [JsonIgnore]
    public virtual IList<ModelA> ModelAs {get;set;}
} 
```

当我序列化 a 时`ModelA`，输出将是这样的：

```
[
  {
    "Id": 1,
    "Name": "test",
    "TypeModel": {
      "Name": "testtype1"
    }
  }
] 
```

是否有可能使用 json.net 有这样的输出..

```
[
  {
    "Id": 1,
    "Name": "test",
    "TypeModel": "testtype1"
  }
] 
```

..或者我是否必须将内容复制到一个将关系存储为字符串而不是引用`ModelA`的新类？`TypeModel`也许有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:35:45.953

正如您所说，这样做的唯一方法是使用[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)。这是因为，正如您所指出的，TypeModel 的类型是一个类`TypeModel`而不是一个字符串。如果您使用的是 Linq，您也可以通过以下方式使用匿名类型。

```
return db.ModelAs.Single(x=>x.Id == id).Select(x=> new{
    x.Id,
    x.Name,
    TypeModel = x.TypeModel.Name
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T15:34:19.310

Actually this is not true, json.net can handle loop reference handling, dto is an old method, still good, but you can enable in the serializer the option to handle loopreferences as long as it is mvc5 and maybe also mvc4. More details here: [https://stackoverflow.com/a/23044770/1345207](https://stackoverflow.com/a/23044770/1345207)

# google-app-engine - 如何修复主要的 appengine 问题？

> ID：13064081
> 
> 赞同：2
> 
> 时间：2012-10-25T07:56:40.513
> 
> 标签：google-app-engine, redirect, https, pagespeed

嗨，appengine 开发人员，

我们对欧洲银行应用程序有一个重大影响问题，这是他们的第一次 Google Apps 和 Google Cloud 体验。我们需要解决这个问题，以保持对 Google 可以提供该服务的信任。是否有任何选择可以在合理的时间内解决如此重大的问题？最好不要支付高级帐户，此时此试点产品不需要。

该问题已在 appengine 公共问题跟踪器上报告了一个多月：[http ://code.google.com/p/googleappengine/issues/detail?id=7979](http://code.google.com/p/googleappengine/issues/detail?id=7979)

当 app.yaml 中设置了 secure:always 时， App Engine 在[http://customdomain.example.com](http://customdomain.example.com)上返回 403 ，而不是将其重定向到 https。应用程序的身份验证设置为 Google Apps 域，这可能（也可能不会）在触发问题中发挥作用。

*   [http://appid.appspot.com](http://appid.appspot.com)正确重定向到[https://appid.appspot.com](https://appid.appspot.com)
*   [http://customdomain.example.com](http://customdomain.example.com) -> 返回 403
*   [https://customdomain.example.com](https://customdomain.example.com) -> 有效

感谢您提供设计精美的服务，否则

简

**更新：**

该问题已证明与 Google Page Speed 服务有关联。在应用程序控制台中禁用时，重定向工作正常。重新启用后，它再次失败。

在具有 PageSpeed、**VIP SSL**、Google Apps 域授权、仅存储在**欧盟**数据中心的 Google Apps 数据集的生产应用程序上**观察**到此问题。

 ****在没有欧盟数据位置限制的情况下，使用 PageSpeed、**SNI SSL**、Google Apps 域授权测试应用程序时**未观察**到此问题。

 ***作为临时解决方法，我们在app.yaml*中为站点入口 url注释掉了*secure:always ，并用*[https://gist.github.com/3974365](https://gist.github.com/3974365)修饰了它们的处理程序方法。

 *还有google group讨论，如果你有类似的问题，或者寻找解决方案。 [https://groups.google.com/d/topic/google-appengine/w3aKx9KxYoU/discussion](https://groups.google.com/d/topic/google-appengine/w3aKx9KxYoU/discussion)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T13:02:45.533

也许这会有所帮助，直到问题得到解决。在 webapp2 中，您可以限制 URI 方案。这意味着：当您允许 http 和 https 时，您可以为 http 和 https 定义两条路由，如果选择了 http，则重定向到 https。

Webapp2：[http ://webapp-improved.appspot.com/guide/routing.html#restricting-uri-schemes](http://webapp-improved.appspot.com/guide/routing.html#restricting-uri-schemes)*******

# android - Android 项目中的 HTML 文件中的错误 - `用于非空 HTML 元素的自闭合语法 (/>)`

> ID：13064088
> 
> 赞同：0
> 
> 时间：2012-10-25T07:56:56.660
> 
> 标签：android, html, eclipse

我的项目的 Assets 文件夹中有一些 HTML 文件包含错误：`Self-closing syntax (/>) used on a non-void HTML element`

由于这些错误，我无法编译我的项目。

我不知道这里有什么问题，所以我列出了所有可能与错误相关的内容。

*   我最近切换到 Mac（从 PC）。
*   在 Eclipse JUNO 上安装了最新的 ADK 和 ADT 插件。
*   相同的代码在我的最后一台机器上运行良好（Linux，也在 Windows 上尝试过）。

*   我研究了一下，发现 HTML5 中不允许使用自闭合标签，但在 HTML4 中是可以的。

*   我猜，有一些配置可以让我切换到我的 html 文件的 HTML4 解析，但我无法找到。
*   我搜索并找不到如何禁用 HTML 验证。（验证没有选项，即 `Preferences->Validation`）

以前有人遇到过这个错误吗？这个奇怪的问题有什么解决方案吗？

注意：有数百个 HTML 文件，它们都有相同的错误。代码库也被许多人共享。所以更改 HTML 代码不是一个可行的选择。

# asp.net-mvc - 停止 MVC4 发射脚本标签

> ID：13064091
> 
> 赞同：1
> 
> 时间：2012-10-25T07:57:01.420
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个 xml 布局模板，其中没有 <script> 标记。但是，当页面生成时，<script/> 已经生成为根元素的第一个子元素。有什么办法可以关闭它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:59:50.217

这不是默认行为。您可以检查视图的 html 并确保其中没有空脚本吗？

# android - 如何在布局中包含的图像视图中添加多个图像？

> ID：13064094
> 
> 赞同：-1
> 
> 时间：2012-10-25T07:57:05.960
> 
> 标签：android

我正在处理一个项目，其中我有一个带有“添加照片”按钮的布局，一个图像视图允许每当我按下“添加照片”按钮时从 SD 卡添加多个图像？你能给我一些关于这个项目的指南吗？我是 android 新手，所以每一个帮助都值得赞赏:)。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:02:17.633

我认为您可以创建一个 GridView 以在用户单击将图像添加到适配器中的数据并刷新时显示所有图像，请参阅此[链接](http://www.androidhive.info/2012/02/android-gridview-layout-tutorial/)

# struts - 我的简单 struts 应用程序中的错误

> ID：13064095
> 
> 赞同：1
> 
> 时间：2012-10-25T07:57:10.950
> 
> 标签：struts, struts-1

错误：不可转换的类型

我的 loginAction 文件的代码：

```
public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response) throws Exception 
{
    LoginForm loginForm = (LoginForm) form;

    if (loginForm.getUserName().equals(loginForm.getPassword())) 
    {
        return mapping.findForward(SUCCESS);
    } 
    else 
    {
        return mapping.findForward(FAILURE);
    }
} 
```

我的 struts-config 文件的代码：

```
<action-mappings>
    <action input="/login.jsp" name="LoginForm" path="/Login" scope="session"                type="com.strutsmyaction.LoginAction">
         <forward name="success" path="/success.jsp" />
         <forward name="failure" path="/failure.jsp" />
    </action>
</action-mappings> 
```

我的登录表单文件的代码

> 公共类 LoginForm { 字符串用户名；字符串密码；public String getUserName() { System.out.println("内部getter "+userName); 返回用户名；} public void setUserName(String userName) { System.out.println("Inside setter "+userName); this.userName = 用户名；} public String getPassword() { 返回密码；} public void setPassword(String password) { this.password = password; } }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T13:04:50.563

我认为这会奏效..

```
if (loginForm.getUserName().equals(loginForm.getPassword())) 
{
    return mapping.findForward("success");
} 
else 
{
    return mapping.findForward("failure");
} 
```

# php - Café 进入 mysql 数据库后变成 Café

> ID：13064097
> 
> 赞同：1
> 
> 时间：2012-10-25T07:57:20.763
> 
> 标签：php, mysql, curl

> **可能重复：**
> [一直到 UTF-8](https://stackoverflow.com/questions/279170/utf-8-all-the-way-through)

我正在从带有 Café 字样的网络上用 curl 抓取数据。当我回显它时它看起来很好，但在插入 mysql 数据库后它变成了 Café
如何处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:00:13.127

## PHP：内部编码，文件编码

运行时配置：

```
mb_internal_encoding("UTF-8"); 
```

并将文本编辑器中的文件编码设置为不带 BOM 的 UTF8（例如在 Notepad++ 中：编码菜单，然后在不带 BOM 的情况下转换为 UTF8）

## MySQL：表、列编码/整理

在您的编辑器/设计器 (PhpMyAdmin) 中将所有编码和排序规则设置为 UTF8。

## 它们之间：连接编码/整理

我不知道您使用的是什么驱动程序，用于 mysqli （以及用于 mysql 但请不要使用它）：

```
"SET CHARACTER SET 'utf8'"
'SET NAMES utf8' 
```

PDO 对此有自己的配置，请参阅 php.net。

## 响应编码

使用标头调用设置它：

`header('Content-Type: text/html; charset=utf-8');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:00:10.937

您需要检查几件事。首先检查您使用的表上的编码是否能够支持您需要的任何特殊字符。使用类似的东西`utf-unicode-ci`。我建议阅读一下这些内容。

有几种 utf8 字符编码，它们针对不同语言的搜索进行了优化，因此它们的名称。有关 unicode 字符集的更多信息，请阅读[此处](http://dev.mysql.com/doc/refman/5.0/en/charset-unicode-sets.html)

您还必须确保您的连接知道您在 php.ini 中使用的字符编码。

# firefly-mv - 萤火虫是否支持枚举

> ID：13064102
> 
> 赞同：1
> 
> 时间：2012-10-25T07:57:39.453
> 
> 标签：firefly-mv

有谁知道`firefly.box`基础设施是否支持基于`Enum`我添加到代码中的列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:02:03.513

您可以使用：`Firefly.Box.Data.EnumColumn<EnumType>`

也看看：`Firefly.Box.Data.Advanced.CustomColumn<T>`

# jquery - 如何在 jquery 中加载 youtube 视频？

> ID：13064107
> 
> 赞同：1
> 
> 时间：2012-10-25T07:57:47.650
> 
> 标签：jquery, youtube

我想在 js 函数中加载一个 youtube 文件。

这是我尝试过的代码：

当我使用引号内的链接时，它会加载 youtube 文件。

例如，

```
function loadVideo(){            
 var image=$('<iframe width="100%" height="100%" />');
 image.attr('src',"http://www.youtube.com/embed/XGSy3_Czz8k");              
 $('#screen2').html(image); 
} 
```

但是当我通过 getAttribute() 检索链接时，它不会加载该 youtube 文件。

代码是，

```
function loadVideo(){       
 var videopath='<%=request.getAttribute("videofile")%>';     
 var image=$('<iframe width="100%" height="100%" />');
 image.attr('src',videopath);               
 $('#screen2').html(image); 
} 
```

请回复。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:18:23.827

JavaScript 是否内嵌在文档中？还是在单独的 .js 文件中？如果它位于单独的 .js 文件中，您将无法评估 ASP 标记。您必须`loadVideo`从文档中进行内联调用。

.js 文件：

```
function loadVideo(src){            
 var image=$('<iframe width="100%" height="100%" />');
 image.attr('src',src);
 $('#screen2').html(image); 
} 
```

内联在文档中：

```
<script type="text/javascript">
  $(function() {
    loadVideo('<%=request.getAttribute("videofile")%>');
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:01:35.897

尝试这个

```
<div onclick="loadVideo('<%=request.getAttribute("videofile")%>');"></div> 
```

# objective-c - 仪器在 [NSBundle mainBundle] loadNibNamed 上显示内存泄漏

> ID：13064111
> 
> 赞同：2
> 
> 时间：2012-10-25T07:58:18.113
> 
> 标签：objective-c, ios

朋友们，

我在仪器中运行我的代码，它在 5 行中显示内存泄漏（超出以下代码），即 `cell = [[[NSBundle mainBundle] loadNibNamed:@"ZoomCustomVideoCell" owner:self options:nil] objectAtIndex:0];`

我不知道为什么它在那里显示内存泄漏以及相同的解决方案是什么

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"ZoomCustomVideoCell";

    ZoomCustomVideoCell *cell = (ZoomCustomVideoCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[NSBundle mainBundle] loadNibNamed:@"ZoomCustomVideoCell" owner:self options:nil] objectAtIndex:0];

        cell.m_zoomMsg = [[[ZoomMessage alloc] init] autorelease];
        [[cell m_zoomMsg] initWithJSON:[m_tmpVideoList objectAtIndex: indexPath.row]];
        [[cell videoLabel] setText:[cell.m_zoomMsg _from]];
        [[cell m_labelLocation] setText:[NSString stringWithFormat:@"%@", cell.m_zoomMsg._location]];
        [[cell videoLabelB] setText:[cell.m_zoomMsg _uploadDesc]];
        NSLog(@"UserName: %@", [[cell videoLabel] text]);

        [cell refreshImage];

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:46:45.020

该方法将作为nib 的“文件所有者”`loadNibNamed:owner:options:`传递的参数。`owner:`这意味着笔尖中的插座将连接到您作为所有者传递的任何内容。由于您是`self`作为所有者传递的，因此它将用`self`新加载的笔尖中的那些覆盖任何先前分配的出口。为了建立插座连接，笔尖加载器`setValue:forKey:`在提供的所有者上使用。如果您已将 outlet 设置为具有正确内存管理的属性，则应该没有泄漏。如果您仅将您的插座作为实例变量，那么（尚不清楚，但我假设）对象在设置时会自动保留。

这里有两种解决方案：

1.  为您的插座提供适当的内存管理，例如，如果它们还没有，则将它们转换为属性，并确保它们具有正确的内存管理属性。

2.  为该方法提供一个不同的所有者`loadNibNamed:owner:options:`，一个尚未建立任何插座的所有者，并且您知道将适当地处理插座的一个所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:14:53.173

此行导致内存泄漏：

```
cell = [[[NSBundle mainBundle] loadNibNamed:@"ZoomCustomVideoCell" owner:self options:nil] objectAtIndex:0]; 
```

将其更改为：

```
cell = [[[[NSBundle mainBundle] loadNibNamed:@"ZoomCustomVideoCell" owner:self options:nil] objectAtIndex:0] autorelease]; 
```

# ruby - 多线程循环

> ID：13064113
> 
> 赞同：5
> 
> 时间：2012-10-25T07:58:27.457
> 
> 标签：ruby, multithreading, ruby-1.9

我有以下代码（[来自 Ruby 教程](http://www.tutorialspoint.com/ruby/ruby_multithreading.htm)）：

```
require 'thread'

count1 = count2 = 0
difference = 0
counter = Thread.new do
   loop do
      count1 += 1
      count2 += 1
   end
end
spy = Thread.new do
   loop do
      difference += (count1 - count2).abs
   end
end
sleep 1

puts "count1 :  #{count1}"
puts "count2 :  #{count2}"
puts "difference : #{difference}"
counter.join(2)
spy.join(2)
puts "count1 :  #{count1}"
puts "count2 :  #{count2}"
puts "difference : #{difference}" 
```

这是使用`Mutex.synchronize`. 在我的电脑上，结果与教程完全不同。调用 后`join`，计数有时相等：

```
count1 :  5321211
count2 :  6812638
difference : 0
count1 :  27307724
count2 :  27307724
difference : 0 
```

有时不是：

```
count1 :  4456390
count2 :  5981589
difference : 0
count1 :  25887977
count2 :  28204117
difference : 0 
```

我不明白`0`即使计数显示的数字非常不同，差异怎么可能仍然存在。

`add`操作大概是这样的：

```
val = fetch_current(count1)
add 1 to val
store val back into count1 
```

和类似的东西`count2`。Ruby 可以在线程之间切换执行，因此它可能无法完成对变量的写入，但是当 CPU 回到线程时，它应该从中断的那一行继续，对吧？

并且仍然只有一个线程正在写入变量。怎么可能在`loop do`块内`count2 += 1`执行更多次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:53:41.360

执行

```
puts "count1 :  #{count1}" 
```

需要一些时间（尽管可能很短）。它不是在一个实例中完成的。因此，连续的两行并不神秘：

```
puts "count1 :  #{count1}"
puts "count2 :  #{count2}" 
```

显示不同的计数。简单地说，`counter`线程经历了一些循环周期，并在`puts`执行第一个循环时增加了计数。

同样，当

```
difference += (count1 - count2).abs 
```

计算时，原则上计数可以在`count1`被引用之前递增`count2`。但是在那个时间跨度内没有执行任何命令，我猜它引用`count1`的时间比`counter`线程经过另一个循环所用的时间短得多。请注意，前者完成的操作是后者完成的操作的适当子集。如果差异足够显着，这意味着`counter`线程在方法的参数调用期间没有经过循环循环`-`，那么`count1`和`count2`将显示为相同的值。

一个预测是，如果您在引用之后`count1`但在引用之前进行一些昂贵的计算`count2`，那么`difference`将会出现：

```
difference += (count1.tap{some_expensive_calculation} - count2).abs
# => larger `difference` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:02:52.637

这是答案。我认为您已经假设线程在`join(2)`返回后停止执行。

不是这种情况！即使`join(2)`将执行（暂时）返回到主线程，线程也会继续运行。

如果您将代码更改为此，您将看到会发生什么：

```
...
counter.join(2)
spy.join(2)

counter.kill
spy.kill

puts "count1 :  #{count1}"
puts "count2 :  #{count2}"
puts "difference : #{difference}" 
```

这在 ruby​​ 1.8 中似乎有点不同，在主线程执行时线程似乎没有机会运行。

本教程可能是为 ruby​​ 1.8 编写的，但线程模型从那时起在 1.9 中发生了变化。

事实上，它在 1.8 中工作是纯粹的“运气”，因为在`join(2)`1.8 和 1.9 都没有返回时线程没有完成执行。

# mysql - 选择列中具有最大值的行 - MySQL

> ID：13064114
> 
> 赞同：2
> 
> 时间：2012-10-25T07:58:29.937
> 
> 标签：mysql, sql

我有下表称为 MyTable

```
 First     Second     Third    Fourth
    1         Ab         Cd       2.3
    1         Cq         Fe       3.4
    2         Dr         Dh       1.2
    3         Bb         Qd       9.8
   ..........ETC..................... 
```

如何选择按 First 分组的具有最大`Fourth`列值的行。所以这将是一个导致的查询

```
 First     Second     Third    Fourth
    1         Cq         Fe       3.4
    2         Dr         Dh       1.2
    3         Bb         Qd       9.8 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:00:25.283

试试这个：

```
select * 
from   MyTable T
join      (Select First,max(Fourth) as Fourth
          from MyTable
          group by First)a
on    T.First=a.First
and   T.Fourth=a.Fourth 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f0b66/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:00:52.400

试试这个解决方案：

```
select MT.First, MT.Second, MT.Third, MT.Fourth 
from MyTable MT
join ( select first, max(Fourth) as Fourth
       from MyTable
       group by first
     ) T on T.first = MT.First
         and T.Fourth = MT.Fourth 
```

## [SQL 小提琴](http://www.sqlfiddle.com/#!2/0a81d/1/0)演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:03:57.203

```
select
    B.*
from (select T.First, max(T.Fourth) as Fourth from Table as T) as A
    inner join Table as B on B.First = B.First and B.Fourth = A.Fourth 
```

# mysql - 需要帮助加快 MySQL 查询

> ID：13064117
> 
> 赞同：0
> 
> 时间：2012-10-25T07:58:43.903
> 
> 标签：mysql

我需要一个查询来快速显示用户尚未为其上传 PDF 的特定模块（文章的子集）中的文章。我在下面使用的查询大约需要 37 秒，因为文章表中有 300,000 篇文章，模块中有 6,000 篇文章。

```
SELECT * 
FROM article a 
INNER JOIN article_module_map amm ON amm.article=a.id 
WHERE amm.module = 2 AND
    a.id NOT IN ( 
        SELECT afm.article 
        FROM article_file_map afm 
        INNER JOIN article_module_map amm ON amm.article = afm.article 
        WHERE afm.organization = 4 AND 
            amm.module = 2 
    ) 
```

我在上述查询中所做的是首先将文章列表截断为所选模块，然后进一步将该列表截断为不在子查询中的文章。子查询正在生成组织已为其上传 PDF 的文章列表。因此，最终结果是组织尚未上传 PDF 的文章列表。

非常感谢您的帮助，在此先感谢！

**编辑 2012/10/25**

在@fthiella 的帮助下，下面的查询运行了惊人的 1.02 秒，低于 37+ 秒！

```
SELECT a.* FROM (
    SELECT article.* FROM article 
    INNER JOIN article_module_map
        ON article.id = article_module_map.article
    WHERE article_module_map.module = 2
) AS a
LEFT JOIN article_file_map
    ON a.id = article_file_map.article
    AND article_file_map.organization=4
WHERE article_file_map.id IS NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:36:22.913

在优化查询时，我会检查以下几点：

首先：我会避免在 SELECT 子句中使用 *，而是命名您想要的不同字段。这极大地提高了速度（我有一个用 * 花了 7 秒，并且命名字段减少到 0.1 秒）。

第二：正如@Adder 所说，为您的表添加索引。

第三：尝试使用 INNER JOIN 而不是 WHERE amm.module = 2 AND a.id NOT IN ( ... )。我想我读过（我记不太清了，所以请仔细阅读）通常 MySQL 会优化 INNER JOINS，并且由于您的子查询是一个过滤器，也许使用三个 INNER JOINS 加上 WHERE 会更快地检索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:01:06.273

我不确定我能否正确理解表格的逻辑和结构。这是我的查询：

```
SELECT
  article.id
FROM
  article
    INNER JOIN
  article_module_map
    ON article.id = article_module_map.article
    AND article_module_map.module=2
  LEFT JOIN
    article_file_map
    ON article.id = article_file_map.article
    AND article_file_map.organization=4
WHERE
  article_file_map.id IS NULL 
```

我提取所有具有模块 2 的文章。然后我选择组织 4 未提供文件的那些文章。

我使用了 LEFT JOIN 而不是子查询。在某些情况下，这可能会更快。

**编辑**感谢您的评论。我不确定它会跑得更快，但令我惊讶的是它慢得多！无论如何，值得一试！

现在，出于好奇，我想尝试 LEFT/INNER JOIN 和子查询的所有组合，看看哪个运行得更快，例如：

```
SELECT *
FROM
  (SELECT *
   FROM
     article INNER JOIN article_module_map
     ON article.id = article_module_map.article
   WHERE
     article_module_map.module=2)
  LEFT JOIN
etc. 
```

也许删除 *，我想看看 WHERE 子句和 ON 子句的条件之间有什么变化......无论如何我认为它没有多大帮助，你现在应该专注于索引。

键/外键上的索引应该已经可以了，但是如果您在`article_module_map.module`and/or上添加索引`article_file_map.organization`怎么办？

# qt - 避免在 Qt 中重用安装文件

> ID：13064118
> 
> 赞同：1
> 
> 时间：2012-10-25T07:58:50.140
> 
> 标签：qt

我为android设备开发了一个代码。现在我想制作一个安装文件。我可以在我的应用程序中添加一段代码以在执行安装后删除源文件（安装程序）吗？我希望我的客户不再访问设置或无法将其用于其他设备，是否有其他解决方案？

# scala - scala中条件过滤和排序的功能方式

> ID：13064123
> 
> 赞同：6
> 
> 时间：2012-10-25T07:59:05.163
> 
> 标签：scala, functional-programming

我想对序列进行排序和/或过滤。基本上是这样的：

```
var result = getReallyLongSeq() // returns Seq[SomeClass]

if (doFilter) {
  result = result.filter( ... )
}

if (doSort) {
  result = result.sortWith( ... )
} 
```

现在，这显然是一种有效的方法，但有没有更实用的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:20:23.937

它是否更具可读性还有待商榷。它的效率有点低，但它也纯粹是功能性的。这种方法也很容易扩展并且相当可维护。

```
val f: Seq[SomeClass] => Seq[SomeClass] = if(doFilter) _.filter(...) else identity
val s: Seq[SomeClass] => Seq[SomeClass] = if(doSort) _.sortWith(...) else identity
(s compose f)(result) 
```

您也可以编写以下内容，这更像是OP中的代码。它也稍微更有效（但不太通用）。

```
val filtered = if(doFilter) result.filter(...) else result
if(doSort) filtered.sortWith(...) else filtered 
```

* * *

### 基于评论的讨论

如果由于某些原因您更喜欢在第一个示例中使用 curried 函数（如评论中所述），您可以编写以下内容：

```
def fc(df: Boolean)(xs: Seq[SomeClass]) = if(df) _.filter(...) else identity
def sc(ds: Boolean)(xs: Seq[SomeClass]) = if(ds) _.sortWith(...) else identity
(sc(doSort) compose fc(doFilter))(result) 
```

但是你可能会像这样进一步编写它，并最终得到与第一个示例中给出的几乎相同的内容：

```
def fc(df: Boolean)(xs: Seq[SomeClass]) = if(df) _.filter(...) else identity
def sc(ds: Boolean)(xs: Seq[SomeClass]) = if(ds) _.sortWith(...) else identity
val f = fc(doFilter)
val s = sc(doSort)
(s compose f)(result) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:49:46.037

您可以使用[scalaz oparator`|>`](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Identity.scala#L58)或定义自己的：

```
class PipedObject[T](value: T)
{
    def |>[R](f: T => R) = f(value)
}

implicit def toPiped[T](value: T) =  new PipedObject[T](value)

(result |> (r => if (doFilter) r.filter(...) else r) 
        |> (r => if (doSort) r.sortWith(...) else r)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T14:47:59.273

如果没有库支持，您可以推出自己的*Boolean Reader Monad*。

这是*功能性的、纯粹的和可配置*的。

**布尔阅读器**

```
case class BoolConf[A](run: Boolean => A) {
    def apply(b: Boolean) = run(b)
    def map[B](f: A => B): BoolConf[B] = BoolConf(b => f(run(b)))
    def flatMap[B](f: A => BoolConf[B]): BoolConf[B] = BoolConf(b => f(run(b))(b))
} 
```

`Boolean => A`在这里，我们为 a 制作了一个允许单子组合的包装器，它可能已经在某些库中实现，例如[scalaz](https://github.com/scalaz/scalaz)。

对于这种情况，我们只对`run`方法感兴趣，但您可以对其他机会感兴趣。

**配置过滤和排序**

然后我们用`Reader`

```
val mFilter: Seq[SomeClass] => BoolConf[Seq[SomeClass]] = seq => BoolConf(if(_) seq.filter(...) else seq)
val mSort: Seq[SomeClass] => BoolConf[Seq[SomeClass]] = seq => BoolConf(if(_) seq.sortWith(...) else seq) 
```

**起重**

现在，要*组合*这些函数，由于输出不再是简单的`Seq`，我们需要*提升*其中一个以在 a`BoolConf`

```
def lift2Bool[A, B]: (A => B) => (BoolConf[A] => BoolConf[B]) =
    fun => cfg => BoolConf(bool => fun(cfg(bool))) 
```

现在我们可以将任何函数 from 转换`A => B`为*提升*函数 from`BoolConf[A] => BoolConf[B]`

**构成**

现在我们可以函数式地组合：

```
val filterAndSort = lift2Bool(mSort) compose mFilter
//or the equivalent
val filterAndSort = mFilter andThen lift2Bool(mSort)
//applies as in filterAndSort(<sequence>)(<do filter>)(<do sort>) 
```

* * *

**还有更多**

我们还可以为我们的`mFilter`和创建一个通用的“构建器”`mSort`

```
val configFilter[SomeClass]: (SomeClass => Boolean) => Seq[MyClass] => BoolConf[Seq[SomeClass]] = 
    filterer => seq => BoolConf(if(_) seq.filter(filterer)) 
```

您可以自己“排序”排序等价物

*感谢 Runar 的启发*

# javascript - 在窗口准备好并滚动后运行代码

> ID：13064124
> 
> 赞同：1
> 
> 时间：2012-10-25T07:59:25.573
> 
> 标签：javascript, jquery

我在这件事上看到了 FF 和 Chrome（版本 22.0.1229.94 m）之间的区别。FF 是对的（我会说）。

当向下滚动页面并点击然后刷新它时，回调

```
$(window).ready(function(){
    console.log( $(document).scrollTop() );
}); 
```

控制台应该说窗口准备好后滚动的数量，但在 Chrome 中它总是`0`

**如何在 Chrome 中显示获取滚动顶部的数量？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:36:11.777

就像评论中的一些人说的那样，Chrome 加载页面，然后向下滚动。因此，当触发 jQuery 事件时，滚动为 0。您可以像这样做一些工作：

```
$(document).ready(function() {
    function getScroll() {
        var scroll = $(window).scrollTop();
        ...
    }
    getScroll();

    $(window).scroll(getScroll);
});​ 
```

因此，Chrome`$(window).scroll();`会在页面加载后立即触发。

编辑：在那里测试[http://fiddle.jshell.net/azaret/Mt65R/show/light/](http://fiddle.jshell.net/azaret/Mt65R/show/light/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:48:24.893

问题是 Chrome 中的*document.ready()*在浏览器向下滚动到上一点**之前执行，这就是为什么你总是得到一个零值。**此处提供了一个解决方案：[当 url 包含锚点时，获取页面加载时网页滚动条的垂直位置](https://stackoverflow.com/questions/6234195/get-vertical-position-of-scrollbar-for-a-webpage-on-pageload-when-the-url-contai)

# search - 如何在 Dojo DataGrid 上执行简单搜索

> ID：13064129
> 
> 赞同：0
> 
> 时间：2012-10-25T07:59:39.107
> 
> 标签：search, datagrid, dojo

对于一个项目，我不得不从 DataTable jquery 插件切换到 Dojo。道场很棒，一切正常！

但是，我想念 dataTable 的简单搜索表单 ( [http://datatables.net/](http://datatables.net/) )。

我知道 Dojo 有 Filter 插件可以做到这一点，但对于用户来说，作为 dataTable 输入字段（在更少的两次单击以在表上进行全局搜索：/），这并不简单。

我搜索了所有的网络，但我找不到它的例子：/

如果有人有线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:21:26.947

这取决于您为电网供电的后端数据存储类型。

通常只是一个简单的调用问题`grid.setQuery({name: "FooBar" , ignoreCase: true });`

但是假设您使用的是`[AndOrReadStore][1]`，而不是简单的 ItemFileReadStore，那么您也可以指定 the`columsToQuery`和 the `columnValue`。

记住，您总是查询您的*网格*而不是商店。网格会将查询传递给商店。

所以，要做你想做的事，只需在你的页面上创建一个新的输入。捕获按键或 onchange，然后相应地查询您的网格。这将过滤不匹配的结果。

您可能使用查询的原因是因为如果您的商店是由服务器供电的，它将确保重新查询后端。

但是，如果您的网格完全加载到内存中，那么您可以使用`filter()`.

# html - 如何在jsp中显示选定的选项（下拉菜单）？

> ID：13064141
> 
> 赞同：0
> 
> 时间：2012-10-25T08:00:19.733
> 
> 标签：html, jsp

如何在jsp中显示下面的选定选项

```
<td width="75%" valign="center">
   Start Date : &nbsp;
   <input id="startDate" name="startDate" id = "startDate" type="text" size="20"><a href="javascript:NewCal('startDate','ddmmyyyy')"><img src="$
   Start Time :&nbsp;&nbsp;
   <select name="startTime" id = "startTime">
        <option value="0">10:00</option>
        <option value="1">11:00</option>
        <option value="2">12:00</option>
        <option value="3">13:00</option>
        <option value="4">14:00</option>
        <option value="5">15:00</option>
        <option value="6">16:00</option>
        <option value="7">17:00</option>
        <option value="8">18:00</option>
        <option value="9">19:00</option>
        <option value="10">20:00</option>
        <option value="11">21:00</option>
   </select>
</td> 
```

我认为`request.getParameterValues`这将是有价值的，但它只显示类似的东西，`value="something"`但不显示两个`options`标签之间的价值。有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:02:27.110

最好的方法是使用[EL](https://stackoverflow.com/tags/el/info)（表达式语言）。请求参数可用作 EL 中的隐式对象。`${param.startTime}`等于`request.getParameter("startTime")`。

如果您需要选项的文本而不是值，最好创建一个`ArrayList`可`Strings`用于生成下拉列表和查找值的文本：

```
List<String> startTimeList = new ArrayList<String>();
startTimeList.add("10:00");
startTimeList.add("11:00");
request.setAttribute("startTimeList", startTimeList); 
```

您可以使用[JSTL](https://stackoverflow.com/tags/jstl/info) ( [`c:forEach`](http://docs.oracle.com/javaee/5/tutorial/doc/bnakh.html#bnakm)) 生成列表，使用[索引](http://docs.oracle.com/javaee/5/jstl/1.1/docs/api/javax/servlet/jsp/jstl/core/LoopTagStatus.html)（请参阅[`varStatus`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forEach.html)属性）作为您的选项`value`：

```
<c:forEach items="${startTimeList}" var="startTime" varStatus="status">
  <option value="${status.index}">${startTime}</option>
</c:forEach> 
```

然后，您可以使用`value`(index) 从列表中获取项目：`${startTimeList[param.startTime]}`.

# spring - Spring Cache：如何根据响应对象使用缓存键

> ID：13064154
> 
> 赞同：1
> 
> 时间：2012-10-25T08:01:07.643
> 
> 标签：spring, caching

我有这些方法：

```
@Cacheable(value="products")
public Product findByName(String name)
@CacheEvict(value = "products", key="#productId")
public boolean updateProduct(int productID) 
```

产品有一个字段 id，它是键。

现在我遇到了问题，findByName 方法在使用更新方法后仍然可以找到旧对象。我认为，问题在于 findByName 将对象存储在键名而不是 productId 下。在方法参数中，我没有 productId。但我不知道，如何告诉 Spring 缓存使用返回对象的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:05:00.227

您不能将返回对象的字段用作缓存键。只有输入参数对`key="#someFieldName"`参数有效。

如果您在处理过时的对象时遇到问题，您可能需要在使用与以下方法不同的键类型的产品更新后逐出整个缓存`findByName`：

```
@CacheEvict(value = "products", allEntries = true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:58:53.900

这是与 Spring-cache 框架一起运行的相当常见的限制。当它成为一个问题时，我通常围绕它设计的方式是在调用中包含应该驱逐缓存的所需参数，即使它不需要。像这样：

```
@CacheEvict(value = "products", key="#productName")
/* productName only needed for CacheEvict... */
public boolean updateProduct(int productID, String productName) {
...
} 
```

# c# - 在网格视图中显示包含列表的对象列表

> ID：13064156
> 
> 赞同：6
> 
> 时间：2012-10-25T08:01:18.803
> 
> 标签：c#, .net, winforms, c#-4.0, datagridview

我目前正在开发具有高级搜索功能的书签管理器应用程序（Windows 窗体）。

我创建了一个`Links`类，每次用户输入 URL 时，我都会创建一个 Link 对象并将详细信息存储在那里。它当前具有属性`Name`,`URL`和`Tags`, 其中`Tags`是一个列表。

在运行时，当我将`DataSource`gridview 的属性设置为`List<Links>`对象时，`Name`会`URL`出现，但*标签不会*。

如何`List<Links>`在 gridview 中显示对象内的标签列表？

**编辑：**刚刚有一个想法。如果我编写一个函数将 转换`List<Links>`为`DataTable`，然后将 的`DataSource`属性设置`DataGrid`为`DataTable`怎么办？

这样做的问题是，每次对 I 进行更改时，`List<Links>`我都必须再次生成`DataTable`，从性能的角度来看，这似乎并不理想。

**编辑 2：** 我希望将列表中的每个项目显示为 DataGridViewTextBox 列。

谢谢，

阿比杰特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T23:18:10.707

也许这就是你想要的……一个看起来比它实际拥有的更多属性的对象。

该`DataGridView`控件支持`ComponentModel`命名空间，因此您可以创建看似具有不存在的属性的类。它与`PropertyGrid`使用的机制相同。

**示例代码**

此示例是一个完全工作的 Windows 窗体类，其窗体包含一个`DataGridView`. 我使用一个列表添加了一些对象，然后将其设置为`DataSource`属性。

该列表中的对象根本没有属性......但它们使用组件模型来描述`DataGridView`.

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            this.dataGridView1.Dock = DockStyle.Fill;
        }

        protected override void OnLoad(EventArgs e)
        {
            base.OnLoad(e);

            dataGridView1.DataSource = new List<MyClass>
                    {
                      new MyClass("value 1", "value 2", "value 3"),
                      new MyClass("value 1", "value 2"),
                    };
        }

        class MyClass : CustomTypeDescriptor
        {
            public MyClass(params string[] tags)
            {
                this.tags = new List<string>(tags);
            }

            public override PropertyDescriptorCollection GetProperties(Attribute[] attributes)
            {
                var listProps = new List<PropertyDescriptor>();

                // adding properties dynamically
                for (int i = 0; i < tags.Count; i++)
                    listProps.Add(new PropDesc("Tag" + i, i));

                return new PropertyDescriptorCollection(listProps.ToArray());
            }

            private List<string> tags = new List<string>();

            class PropDesc : PropertyDescriptor
            {
                private int index;

                public PropDesc(string propName, int index)
                    : base(propName, new Attribute[0])
                {
                    this.index = index;
                }

                public override bool CanResetValue(object component) { return false; }

                public override Type ComponentType { get { return typeof(MyClass); } }

                public override object GetValue(object component)
                {
                    if (index >= ((MyClass)component).tags.Count)
                        return null;

                    return ((MyClass)component).tags[index];
                }

                public override bool IsReadOnly { get { return true; } }

                public override Type PropertyType { get { return typeof(string); } }

                public override void ResetValue(object component) { }

                public override void SetValue(object component, object value) { }

                public override bool ShouldSerializeValue(object component) { return false; }
            }
        }

        private void InitializeComponent()
        {
            this.dataGridView1 = new DataGridView();
            ((ISupportInitialize)(this.dataGridView1)).BeginInit();
            this.SuspendLayout();
            // dataGridView1
            this.dataGridView1.ColumnHeadersHeightSizeMode = DataGridViewColumnHeadersHeightSizeMode.AutoSize;
            this.dataGridView1.Dock = DockStyle.Fill;
            this.dataGridView1.Location = new System.Drawing.Point(0, 0);
            this.dataGridView1.Name = "dataGridView1";
            this.dataGridView1.Size = new System.Drawing.Size(284, 262);
            this.dataGridView1.TabIndex = 1;
            // Form1
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(284, 262);
            this.Controls.Add(this.dataGridView1);
            this.Name = "Form1";
            this.Text = "Form1";
            ((ISupportInitialize)(this.dataGridView1)).EndInit();
            this.ResumeLayout(false);

        }

        private DataGridView dataGridView1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:26:37.890

如果您像我想的那样在 WPF 中工作，为什么不使用 DataGridView 行详细信息模板？您可以将第二个网格作为与标签列表绑定的行的详细信息模板。

# configuration - OSGI 配置包

> ID：13064159
> 
> 赞同：6
> 
> 时间：2012-10-25T08:01:33.743
> 
> 标签：configuration, osgi

我是在 OSGi 世界中潜水的新手。我正在尝试使用以下模块（捆绑包）开发应用程序：

*   模型
*   服务-api
*   默认服务
*   网络

假设 default-service 包包含内部数据访问服务。因此，它需要对数据库访问进行一些配置。我觉得将数据库配置放在 default-services 包中是不对的。此外，web 包不应该知道默认服务是如何在内部连接的。

我的问题是：OSGi 有配置包的概念吗？我的想法是部署一个负责默认服务配置的包。有没有类似的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:51:52.037

您看过 ConfigurationAdmin 服务吗？你的包应该使用 ConfigurationAdmin 来接收他们的配置。如果您在捆绑包中使用声明式服务，DS 将自动为您使用 ConfigurationAdmin。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T14:12:59.687

根据您期望的配置方式，片段可能适合您的需求。它们允许您向现有的捆绑包类路径添加额外信息。我们使用它来为不同的运行时环境（开发、测试……）提供不同的配置。您只需部署适当的片段包即可获得正确的配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T09:38:04.390

我实际上开发了一个小包，它可以使用扩展器模式检测其他包中的配置数据。就我而言，这是一个 Jason 文件。获得了一些特殊技巧来处理密码和二进制文件，如 ssl 证书。

# php - vimeo 如何播放按钮点击事件？

> ID：13064164
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:01:38.500
> 
> 标签：php, javascript, jquery, html, web-applications

我的站点中有积分系统。仅基于这些点，我必须显示 vimeo 视频。在 vimeo 播放器中触发播放事件时，我需要检查用户是否有足够的积分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:10:11.387

我从来没有这样做过，但是，这个页面[http://developer.vimeo.com/player/js-api](http://developer.vimeo.com/player/js-api)建议，这样做可以：

```
var iframe = $('#player1')[0],
    player = $f(iframe);
player.addEvent('ready', function() {
    player.addEvent('playProgress', onPlayProgress);
});

function onPlayProgress(data, id) {
    if(user.points < threshold)
        player.pause();
} 
```

# php - 将关联数组分配给 php 变量

> ID：13064166
> 
> 赞同：0
> 
> 时间：2012-10-25T08:01:50.493
> 
> 标签：php, associative-array

我有一个数组

> Array ( [0] => Array ( [username] => phizy [id] => 1 ) [1] => Array ( [username] => rapik [id] => 4 ) [2] => Array ( [用户名] => asas [id] => 5 ) )

我如何提取并将它们放入 php 变量中？

> ```
> <li><?php $username." with id of ".$userid."</li>"; 
> ```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:41:10.883

如果你真的想把一个数组的所有键都变成变量，你可以使用这个[`extract()`](http://php.net/manual/en/function.extract.php)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:09:33.287

试试这样：

```
foreach($array as $arobj)
{
    ?>
    <li><?php $arobj['username']." with id of ".$arobj['id']; ?></li>
    <?php
} 
```

或者，如果你想分配给变量，那么，

```
foreach($array as $arobj)
{
    $username =  $arobj['username'];
    $userid = $arobj['id'];
    ?>
    <li><?php $username." with id of ".$userid; ?></li>
    <?php
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:17:28.137

只是*为了好玩*，如果你**必须**根据数组键分配变量，你可以试试这个：

```
foreach($array as $subArr)
{
  foreach($subArr as $key=>$value)
  {
    $$key=$value;
  }
  echo "<li>$username with id of $id.</li>";
} 
```

[文档](http://www.php.net/manual/en/language.variables.variable.php)

# android - 无响应的 HttpClient

> ID：13064170
> 
> 赞同：0
> 
> 时间：2012-10-25T08:02:00.847
> 
> 标签：android, httpclient

我正在尝试使用下面的代码从服务器下载 json 文件。但是，我的应用程序表现得很奇怪。有时，json 会在 1-2 秒内被下载，有时它会永远卡在这个函数上。我还尝试了其他下载方式，例如 HttpUrlConnection。然而，这也无济于事。任何人都可以建议我解决它！

```
public String getJSONString(String url) {
        String json = null;
        HttpClient httpclient = null;
        try {
            Log.d("MARKER","PARSING SE PEHLE");
            HttpParams params = new BasicHttpParams();
            Log.d("MARKER","1st line");
            HttpClient httpclient = new DefaultHttpClient(params);              HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpclient.execute(httpPost);

            HttpEntity httpEntity = httpResponse.getEntity();    
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 80000);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) 
            {sb.append(line + "\n");}
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }
        Log.d("MARKER","DOWNLOAD COMPLETE");
        HttpClientProvider.safeClose(httpclient);
        return json;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:07:17.020

尝试这个：

```
public class JSONParser {

   static InputStream is = null;
   static JSONObject jObj = null;
   static String json = "";

   // constructor
   public JSONParser() {

   }

   // function get json from url
   // by making HTTP POST or GET method
   public JSONObject makeHttpRequest(String url, String method, List<NameValuePair> params) {

      // Making HTTP request
      try {

         // check for request method
         if (method == "POST") {
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

         } else if (method == "GET") {
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
         }

      } catch (UnsupportedEncodingException e) {
         e.printStackTrace();
      } catch (ClientProtocolException e) {
         e.printStackTrace();
      } catch (IOException e) {
         e.printStackTrace();
      }

      if (is == null)
         return new JSONObject();

      try {
         BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
         StringBuilder sb = new StringBuilder();
         String line = null;
         while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
         }
         is.close();
         json = sb.toString();
      } catch (Exception e) {
         Log.e("Buffer Error", "Error converting result " + e.toString());
      }

      // try parse the string to a JSON object
      try {
         jObj = new JSONObject(json);
      } catch (JSONException e) {
         Log.e("JSON Parser", "Error parsing data " + e.toString());
      }

      // return JSON String
      return jObj;

   }
} 
```

您可以在 AsyncTask 中填充相关对象以避免另一个问题。玩得开心

```
String SERVER_URL ="";

List<NameValuePair> params = new ArrayList<NameValuePair>();
// getting JSON string from URL
JSONObject json = jsonParser.makeHttpRequest(SERVER_URL, "GET", params); 
```

# eclipse - 更改 Eclipse 窗口颜色

> ID：13064171
> 
> 赞同：3
> 
> 时间：2012-10-25T08:02:02.690
> 
> 标签：eclipse, colors, background, themes, color-scheme

我已经使用 Eclipse 一段时间了，因为我们在课堂上需要它来处理 xml 文件。

我更喜欢使用深色背景，因为我发现它对眼睛更容易。
我找到[了](https://stackoverflow.com/questions/120621/dark-color-scheme-for-eclipse "日食配色方案")关于如何在 Eclipse 中更改主题的主题，但这只会更改编码窗口中的配色方案。

有没有办法像在 Visual Studio 中一样在 Eclipse 中更改整个程序的整个配色方案（侧边栏、背景颜色、前景色……）？

offtopic：我想在 NetBeans 中做同样的事情

编辑：终于让它工作了，但我的配色方案很糟糕。
有没有人有一个我可以使用的好方案或我可以导入的一些 CSS 文件？
如果它适合任何深色主题（Monokai、NightLion Aptana 主题、Oblivion、Obsidian、Pastel、RecognEyes、Sublime Text 2、Sunburst、Wombat 或 zenburn），那将是完美的。看着这个列表，我注意到很多主题都是黑暗的。太糟糕了，程序本身没有主题（除非 Chrome 主题自己改变一切）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T14:32:05.857

如果您使用的是 Eclipse 4，则可以使用[Eclipse 4 Chrome 主题](http://marketplace.eclipse.org/content/eclipse-4-chrome-theme#.UIlNHCGlwz8)使用 CSS（或最常用的 UI 元素的属性）对程序中的*所有内容*进行样式设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T13:57:01.833

许多颜色可以通过*Preferences* > *General* > *Appearance* > *Colors and Fonts*进行调整。对于在那里无法配置的东西，它们由游览操作系统颜色设置控制。

# php - 没有出现 Codeigniter 分页

> ID：13064173
> 
> 赞同：1
> 
> 时间：2012-10-25T08:02:09.180
> 
> 标签：php, database, codeigniter, activerecord, pagination

我有这样的`vkategorimaterial`看法

```
<table border="1">
                <tr>
                    <td colspan="4">Tampilkan<?php 
                    echo form_open('c_kategorimaterial/cari');
                    echo nbs();$intext=array('name' => 'cari', 'class' => 'GUI');
                    echo form_input($intext);
                    echo nbs(); $inbutton=array('value' => 'Cari', 'class' => 'button');
                    echo form_submit($inbutton);
                    echo form_close();
                    ?></td>
                </tr>

                <tr>
                    <td colspan="4"><a href="<?php echo base_url(); ?>index.php/c_kategorimaterial/tambah"><img class ="create" src="<?php echo base_url();?>img/create.png"></a></td>
                </tr>

                <tr>
                    <td>Nomor</td>
                    <td>Kode Kategori Material / Jasa</td>
                    <td>Nama Material / Jasa</td>
                    <td>Perintah</td>
                </tr>
                 <?php     if ( !empty($rows) ) 
                      {  
                            $no = 1;   
                            foreach ($rows as $row) { ?>  
                            <tr id="row">  
                             <td><?php echo $no;?></td>  
                             <td><?php echo $row->Kode_Kategori_Material_Jasa;?></td>  
                             <td><?php echo $row->Nama_Material_Jasa;?></td>  
                             <td> <a href="<?php echo site_url('c_kategorimaterial/ubah/'.$row->Kode_Kategori_Material_Jasa.'/'.$row->Nama_Material_Jasa);?>"><img class="perintah" src="<?php echo base_url(); ?>img/update.png"></a><a href="<?php echo site_url('c_kategorimaterial/hapus/'.$row->Kode_Kategori_Material_Jasa);?>" onclick="return confirm('akan dihapus, anda yakin ?');"><img class="perintah" src="<?php echo base_url(); ?>img/delete.png"></a></td>                           

                            </tr>  
                            <?php  
                             $no++;  
                            }  
                     } 
                     else { ?>  
            <tr id="row">  
            <td colspan="6" align="center">Tabel Kosong</td>  
            </tr>

        <?php  
        }  
        ?>  
        </table>
       <?php echo $this->pagination->create_links(); ?> 
```

然后我做了这里命名的控制器`c_kategorimaterial`是`index`零件

```
function index()
{
    $query = $this->m_kategorimaterial->get();  
    $config['base_url'] =  base_url().'index.php/c_kategorimaterial/index/';
    $config['total_rows'] = $query->num_rows();
    $config['per_page'] = 5; 
    $this->pagination->initialize($config);
    $data['rows'] = $query->result();
    $data['title'] = 'QB Kategori Material';
    $this->load->view('menu',$data);
    $this->load->view('v/vkategorimaterial');

} 
```

我想做一个分页，每页显示 5 行。这是模型`m_kategorimaterial->get`

```
 $this->db->order_by('Kode_Kategori_Material_Jasa','DESC');
    $query = $this->db->get('ms_kategori_material',5);
    return $query; 
```

为什么分页不显示？这是结果`print_r($data['rows']);`

```
Array ( [0] => stdClass Object ( [Kode_Kategori_Material_Jasa] => KKMJ006 [Nama_Material_Jasa] => Biji ) [1] => stdClass Object ( [Kode_Kategori_Material_Jasa] => KKMJ004 [Nama_Material_Jasa] => Teneh ) [2] => stdClass Object ( [Kode_Kategori_Material_Jasa] => KKMJ001 [Nama_Material_Jasa] => Air ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:11:14.423

试试这个块

```
function index()
{
   $query = $this->m_kategorimaterial->get();  
   $config['base_url'] =  base_url().'index.php/c_kategorimaterial/index/';
   $config['total_rows'] = $query->num_rows();
   $config['per_page'] = 5;        
   $data['rows'] = $query->result();
   $this->pagination->initialize($config);
   $this->load->vars($data); // !!!
   $data['title'] = 'QB Kategori Material';
   $this->load->view('menu',$data);
   $this->load->view('v/vkategorimaterial');

} 
```

在你看来试试这个，

```
echo $this->pagination->create_links(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:12:52.597

`echo $this->pagination->create_links();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T08:48:21.817

在控制器中包含分页库

```
$this->load->library('pagination');

And alter a line in your controller to

$this->load->view('v/vkategorimaterial',$data); 
```

这是对您[Codeigniter 分页](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)有用的链接：

# javascript - 如何在同一个提交按钮中放置 onclick 和 return false 语句？

> ID：13064179
> 
> 赞同：8
> 
> 时间：2012-10-25T08:02:27.467
> 
> 标签：javascript, html

据我了解，return false 的默认处理是：

```
<input type="submit" onclick="return false" /> 
```

但是在我的代码中，我想让一个提交按钮运行一个单独的 js 函数`onclick`，该函数将根据用户选择的单选按钮提供 ajax 输出。

但由于我使用 ajax 和我的 js 函数来处理输出，我希望提交按钮返回 false。

但如果我已经使用`onclick`指向函数：

```
<input type="submit" onclick="jsfunction()" /> 
```

我在哪里把return false？

我可以有2个`onclick`陈述吗？

我想的另一个选择是，如果我知道无论函数返回哪个值我都不会提交表单，那么它根本不应该是提交按钮吗？

但如果是这种情况，是否有一个我可以在 html 中编码的按钮，它看起来与提交相同但没有提交属性？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T08:04:59.127

尝试像这样将您的方法（jsmethod）添加到您的表单 onsubmit 处理程序

```
<form onsubmit="jsfunction(); return false;"> 
```

并删除输入 onclick 处理程序。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-25T08:06:22.493

就这样做

```
<input type="submit" onclick="return jsfunction()" /> 
```

功能变化

```
function jsfunction()
{
  //you code 
  return false;
} 
```

或者如果您不想更改功能，请尝试

```
<input type="submit" onclick="jsfunction();return false;" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T08:05:09.193

像这样：

```
<input type="submit" onclick="jsfunction();return false;" /> 
```

或者只使用一个按钮而不是提交按钮：

```
<input type="button" value="Submit" onclick="jsfunction();" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:06:22.523

不，您不能有 2 个`onclick`声明，但您可以调用多个函数，`onclick`例如：

```
<input type="submit" onclick="jsfunction();anotherFunction();" /> 
```

在其他功能中，您可以拥有：

```
function anotherFunction(){
  return false;
} 
```

# wordpress - 元框仅保存多个输入字段中的第一个

> ID：13064186
> 
> 赞同：1
> 
> 时间：2012-10-25T08:02:53.093
> 
> 标签：wordpress, meta, meta-boxes

简而言之：我构建了一个包含 3 个字段的元框，但它只保存了第一个字段。我可能做错了什么？

```
// --- METABOX: CAREER ... CONTENTS --- //
function career_meta(){
global $post;
$career1 = get_post_meta( $post->ID, 'career1', true );
$career2 = get_post_meta( $post->ID, 'career2', true );
$career3 = get_post_meta( $post->ID, 'career3', true );
?>
<label for="career_subtitle">Subtitle</label><input type="text" class="widefat" id="career-subtitle" name="career_subtitle" value="<?php echo $career1; ?>" />
<label for="career_text_1">Left Column</label><textarea class="widefat" id="career-text-1" name="career_text_1" value="<?php echo $career2; ?>"></textarea>
<label for="career_text_2">Right Column</label><textarea class="widefat" id="career-text-2" name="career_text_2" value="<?php echo $career3; ?>"></textarea>
<?php }

// --- METABOX: CAREER ... SAVE --- //
add_action('save_post', 'save_career');
function save_career(){
    global $post;
    update_post_meta($post->ID, "career1", $_POST["career_subtitle"]);
    update_post_meta($post->ID, "career2", $_POST["career_text_1"]);
    update_post_meta($post->ID, "career3", $_POST["career_text_2"]);
}
add_action('save_post','function_save_var');
function function_save_var()
{
  if ( defined('DOING_AUTOSAVE') && DOING_AUTOSAVE )
    return $post_id;

} 
```

这就是我现在所拥有的。它保存第一个字段（career_subtitle），但不保存其他 2 个字段。解决这个问题非常重要，所以我真的很感激一个有效的答案:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:16:19.897

这可能不是您问题的解决方案，但您确定 textarea 具有 value 属性？？？？

这可以解决您的问题：-

`<label for="career_text_1">Left Column</label><textarea class="widefat" id="career-text-1" name="career_text_1"><?php echo $career2; ?></textarea> <label for="career_text_2">Right Column</label><textarea class="widefat" id="career-text-2" name="career_text_2"><?php echo $career3; ?></textarea>`

# c# - 如何在没有 C/C++ 的情况下在 C# 中装饰代码——比如宏

> ID：13064189
> 
> 赞同：1
> 
> 时间：2012-10-25T08:03:04.150
> 
> 标签：c#, logging, log4net

C# 不支持 C/C++ 宏。StackOverflow 中有很多与此相关的问答，但我找不到特定问题的答案。

假设我正在使用[http://logging.apache.org/log4net/release/faq.html](http://logging.apache.org/log4net/release/faq.html)建议的代码：

```
if(log.IsDebugEnabled) 
{
    log.Debug("Entry number: " + i + " is " + entry[i]);
} 
```

这种启用/禁用日志记录的方式有明显的缺点。在 C++ 中，我会使用像 LOG(expr) 这样的宏来提高代码的可读性并更好地控制代码的“if(log.IsDebugEnabled)”部分（这可能在项目中重复数千次）。

如何在 C# 中实现 LOG(expr) - 类似结果？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:09:41.330

你不能……因为 C# 没有宏！

当然，您可以这样做：

定义采用 lambda 的 log 函数

```
void Log(Func<string> f) {
  if(log.IsDebugEnabled) 
  {
    log.Debug(f());
  }
} 
```

当你想记录一些东西时这样调用它：

```
Log(()=>"Entry number: " + i + " is " + entry[i]); 
```

这样，仅在启用日志记录时才评估该参数，我认为这是您想要实现的。

（我的 C# 有点生疏，所以语法可能会有些偏差）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:08:11.793

您可以将其定义为方法并将其标记为有条件的调试器：

```
internal static SomeClass
{
    [Conditional("DEBUG")] 
    internal static void Log(string expr)
    {
     //...
    }
} 
```

如果未定义编译器常量“DEBUG”，编译器将删除此方法以及对该方法的任何调用或引用。是的，它也适用于其他人。它类似于：

```
internal static SomeClass
{
    #if DEBUG
    internal static void Log(string expr)
    {
     //...
    }
    #endif
} 
```

但是使用它不会删除对这个方法的引用，所以你也必须包装它们。

* * *

是的，这只允许在编译时禁用日志。[jalf](https://stackoverflow.com/users/33213/jalf)有[更好的方法](https://stackoverflow.com/a/13064287/402022)在运行时处理这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:01:51.583

请改用新的 log4net`XXXXFormat`方法。它们是这样实现的：

```
public virtual void DebugFormat(string format, params object[] args)
{
    if (this.IsDebugEnabled)
    {
       this.Logger.Log(declaringType, m_levelDebug, String.Format(format, args));
    }
} 
```

此外，您将拥有`String.Format`而不是简单的字符串连接的权力

```
log.DebugFormat("Entry number: {0} is {1}", i, entry[i]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:06:36.947

作为一个想法，您可以使用一个静态方法创建类，该方法将接受字符串表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T08:07:33.573

> ...部分代码（可能在项目中**重复**数千次）。

每当你在想这样的事情时，首先应该在你脑海中浮现的就是[封装，封装，封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)！

你可以简单地创建你自己的 Logger 类，它有一个`IsDebugEnabled`属性和你自己的`Log`方法。

```
void Log( string message )
{
  if ( IsDebugEnabled ) 
  {
     log.Debug( message );
  }
} 
```

可能更好地寻找现有的记录器库，它们可能已经支持您需要的所有功能。

例如[log4net](http://logging.apache.org/log4net/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-25T08:22:16.647

面向方面的编程是您想要的，因为日志记录和缓存之类的事情与您的业务逻辑关系不大。所以他们应该分开。

有很多可用的框架，看看 postsharp(http://www.sharpcrafters.com/) 或 snap (http://www.simpleaspects.com/)。如果您使用受支持的依赖注入框架之一，也许 snap 是不错的选择。

更新：如果你使用 log4net，你应该可以从配置文件中关闭它，`<log4net threshold="OFF" />`所以你应该有一个调试配置和一个发布配置

# .htaccess - htaccess 将站点根目录重定向到 public_html 文件夹

> ID：13064190
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:03:09.020
> 
> 标签：.htaccess, redirect, directory, public

当用户访问 foo.com/bar 时，他们应该会看到位于 foo.com/bar/public 的站点。公共部分必须隐藏。如何使用 .htaccess 实现这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:07:22.833

将这些规则放在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/bar/(.*)$
RewriteCond %{DOCUMENT_ROOT}/bar/public/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/bar/public/%1 -d
RewriteRule ^/?bar/(.*)$ /bar/public/$1 [L] 
```

第一个条件检查 URI 是否以“/bar”开头，然后对请求的其余部分进行分组。接下来的 2 个条件检查请求的其余部分（由 反向引用`%1`）是否映射到现有文件或目录。如果所有条件都满足，那么它会在内部将 URI 重写为`/bar/public`.

# php - 无法在命名空间类中创建对象

> ID：13064196
> 
> 赞同：0
> 
> 时间：2012-10-25T08:03:43.913
> 
> 标签：php, namespaces, fuelphp

我有一个类似这样的结构

```
namespace Html;  

class MyHtml extends Fuel\Core\Html {
        private $table = null;

        public function __construct($table) {
            $this->table = $table;
        }

        public function textarea() { 

        }
    ... 
```

在我的模板上

```
<article class="modal hide fade" id="add-journal">
                <section class="modal-header">Add Journal</section>
                <section class="modal-body">
                    <?php 
                        $form = new Html\MyHtml('form-item');
                        ...other code...
                    ?>
                </section>
                <section class="modal-footer"></section>
            </article> 
```

我收到此错误：

```
ErrorException [ Error ]: Class 'Html\MyHtml' not found 
```

这可能不是一个fuelphp 问题，而更像是一个PHP 问题。这是否意味着如果它在命名空间中，我不能基于我的类创建对象？我必须为它提供一个静态函数吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:05:33.660

您正在使用相对名称空间路径创建对象。

使用命名空间的绝对路径：

```
 $form = new \Html\MyHtml('form-item'); 
```

当然，您的*自动加载器*需要自动包含您的文件。如果您没有自动加载器，请确保包含该文件：

```
include_once 'path_to_your_class/your_classfile.php';
$form = new \Html\MyHtml('form-item'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:06:44.963

你应该使用`$form = new \Html\MyHtml('form-item');`.

这`\`意味着你是从根开始的。如果您不是从根目录开始，则您正在`Html\MyHtml`从模板所属的名称空间中进行搜索。

此外，请确保使用自动加载器或`require_once`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T17:17:24.150

FuelPHP 视图在全局命名空间中解析，因此在这种特定情况下 Html\MyHTML 应该可以工作。

最大的问题是你在哪里创建了这个类，因为它使用非标准的类命名，你是否将它添加到引导程序中？FuelPHP 的自动加载器是区分大小写的，所以它会寻找一个 Myhtml 类...

第二个问题是我想知道你到底想做什么？FuelPHP 的 HTML 类是一个静态帮助类，实例化它是毫无意义的，因为它只包含静态方法......

# ios - 如何将 UITextView 插入 UIImageView

> ID：13064197
> 
> 赞同：0
> 
> 时间：2012-10-25T08:03:45.857
> 
> 标签：ios, uiimageview, uitextview

我正在编写一个应用程序，您可以在其中创建 UIImageView 对象。
可以设置这些对象的颜色。

但下一步我想做的是：在imageView中设置一个TextView，但是这个文本应该由用户输入（当然是用UIKeyboard类实现的。）

我总结：我有一个 imageView，它需要一个可编辑的 UITextView。

你知道它是如何实现的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:08:26.433

你的方法是错误的。

您需要图像视图，因为该应用程序允许您“创建图像”

实际上，从技术上讲，这是不正确的，您要做的是使用简单`UIView`的方法来设置区域的颜色，然后再设置一个`UITextField`或`UITextView`多个位置。

A是用于显示图像`UIImageView`的非常具体的子类。`UIView`你不能在其中添加你的其他 UI，你能做的最好的就是在它上面。

我确实使用 a `UIView`，完成后，您需要将您的图像“转换”`UIView`为图像，然后您可以使用它来保存、发送等

有关更多信息，请查看[将 UIView 的表示保存到文件](https://stackoverflow.com/questions/3051630/save-uiviews-representation-to-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:14:26.923

您只想继承 UIImageView 并在初始化期间添加 UITextView。像这样

```
@interface MyImageView : UIImageView {   

}
@property (nonatomic, strong) UITextView *textView;
@end 
```

以及实施

```
@implementation MyImageView
- (id)init {
    if ((self = [super init])) {
        self.textView = [[UITextView alloc] initWithFrame:CGRectMake(...)];
        [self addSubview:self.textView];
    }
    return self;
}
@end 
```

# linux - 在 bash 中搜索并回显部分字符串

> ID：13064201
> 
> 赞同：2
> 
> 时间：2012-10-25T08:03:53.990
> 
> 标签：linux, bash, sed, grep

在字符串中搜索给定模式并在不使用 awk 的情况下回显它的最佳方法是什么（在 bash 中）？我想使用标准命令，如`grep`, `cat`, `cut`, 或`sed`.

**例子：**

我想从`lspci`命令的输出中去掉所有 USB 控制器的设备地址：

```
[artlab@localhost ~]$ lspci

00:00.0 Host bridge: Intel Corporation Core Processor DRAM Controller (rev 18)
00:1a.0 USB controller: Intel Corporation 5 Series/3400 Series Chipset USB2 Enhanced Host Controller (rev 05)
00:1c.0 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 1 (rev 05)
00:1c.4 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 5 (rev 05)
00:1c.5 PCI bridge: Intel Corporation 5 Series/3400 Series Chipset PCI Express Root Port 6 (rev 05)
00:1d.0 USB controller: Intel Corporation 5 Series/3400 Series Chipset USB2 Enhanced Host Controller (rev 05)
00:1e.0 PCI bridge: Intel Corporation 82801 PCI Bridge (rev a5)
00:1f.0 ISA bridge: Intel Corporation 3400 Series Chipset LPC Interface Controller (rev 05)
00:1f.2 RAID bus controller: Intel Corporation 82801 SATA Controller [RAID mode] (rev 05)
00:1f.3 SMBus: Intel Corporation 5 Series/3400 Series Chipset SMBus Controller (rev 05)
02:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection
03:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection
04:03.0 VGA compatible controller: Matrox Graphics, Inc. MGA G200eW WPCM450 (rev 0a) 
```

我想检索（打印）这两个字符串：

```
00:1a.0
00:1d.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:08:17.670

我不知道谁会想出更多的可能性。

```
lspci | grep 'USB Controller' | sed "s/ .*//"
lspci | grep 'USB Controller' | grep -o '^[^ ]*'
lspci | grep 'USB Controller' | while read id rest ; do echo $id ; done
lspci | grep 'USB Controller' | cut -f 1 -d ' ' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:09:35.697

```
sed -n '/USB controller/{s/ .*//;p}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:10:19.213

```
lspci | grep 'USB Controller' | cut -d' ' -f1 
```

# android - Android：抱歉，此视频无法在 videoview 中播放

> ID：13064205
> 
> 赞同：0
> 
> 时间：2012-10-25T08:04:01.073
> 
> 标签：android

我知道这方面有很多问题和答案，但我经历了所有，但我找不到任何解决方案，并且近两个月我一次又一次地遇到“对不起这个视频无法播放”的问题。

这是我的xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
 >

<VideoView
    android:id="@+id/booksanimation"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />
</RelativeLayout> 
```

这是我的代码..

```
 getWindow().setFormat(PixelFormat.TRANSLUCENT);
    videoview = (VideoView) findViewById(R.id.booksanimation);
    videoview.setVideoURI(Uri.parse("android.resource://com.d4sys.sabaq/" + R.raw.booksanimation));
    videoview.setMediaController(new MediaController(this));
    videoview.requestFocus();
    videoview.start(); 
```

我不知道是什么问题，有时当我放置另一个分辨率不同的视频时，会播放该视频但并非所有视频都播放..如果某些视频在平板电脑上播放，它不会在小型设备上播放，什么是问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:54:32.527

你检查视频格式了吗？并非Android本机支持的所有格式我之前都遇到过类似的问题，最后我将所有mov更改为mp4

`http://developer.android.com/guide/appendix/media-formats.html`

# c# - 如何使用 OOP 对这个场景进行建模？（继承问题）

> ID：13064206
> 
> 赞同：0
> 
> 时间：2012-10-25T08:04:08.607
> 
> 标签：c#, .net, oop, inheritance, interface

我有很多实现不同算法的不同引擎。它们都实现了相同的接口，但具有不同的配置方法。大部分都是不带参数配置的，有的只带一个整数，少的带两个整数。将来我们将有三个甚至四个整数的可能性很小。

我需要创建一个引擎控制器来决定何时必须启动或停止引擎，因为这对所有引擎都很常见。我认为的选项如下：

1.  创建一个独特的接口，其参数与可用的最大配置方法一样多，并忽略引擎中不需要的参数。这样我就只有一个EngineController。
2.  为每个不同的配置方法创建一个接口，并为每个不同的接口创建一个 EngineController（但这将使我创建很多只在参数数量上有所不同的类，并且每次新的类都需要 2 个新类参数被添加到引擎。
3.  ...

我真的对这两种解决方案中的任何一种都不满意，因为传递不需要的参数看起来很“丑陋”，并且由于使用第二个选项生成的类数量众多（只有很小的差异）。

有什么设计或模式可以避免这个问题？

## 编辑（感谢您的回答，此编辑回答了所有问题并澄清了问题）：

举个例子，这些是引擎。

```
abstract class EngineBase
{
    public void Start() {...}
    public void Stop() {...}
}

class EngineOne : EngineBase
{
    public void Configure(int parameter1) {...};
}

class EngineTwo : EngineBase
{
    public void Configure(int parameter1, int parameter2) {...};
}

class EngineThree : EngineBase
{
    public void Configure(int parameter1, int parameter2, int parameter3) {...};
} 
```

由于所有引擎都有相同的逻辑来决定何时开始或结束，我想创建一个处理它们的新类，称为 EngineController。控制器将在需要时调用配置、启动和停止：

```
class EngineController
{
    EngineBase _engine; ??? or what?

    void SuperviseEngine() { ... _engine.Configure(x,x,...) ... _engine.Start() ... 
} 
```

我的第一个想法是在 EngineBase 类中添加下一个方法：

```
abstract class EngineBase
{
    public void Start() {...}
    public void Stop() {...}
    public void Configure(int parameter1, int parameter2, int parameter3) {...}
}

class EngineController
{
    EngineBase _engine;

    void SuperviseEngine() { ... _engine.Configure(x,y,z) ... _engine.Start() ... 
} 
```

并忽略不需要的参数，但我不喜欢这个主意。然后我想到了做以下事情：

```
interface I1ParameterConfigurable
{
    public void Configure(int parameter1) {...};
}

interface I2ParameterConfigurable
{
    public void Configure(int parameter1, int parameter2) {...};
}

interface I3ParameterConfigurable
{
    public void Configure(int parameter1, int parameter2, int parameter3) {...};
} 
```

然后为每种引擎创建 3 个不同的控制器：

```
class EngineController1Parameter
{
    EngineBase _engine;
    I1ParameterConfigurable _configurableEngine = _engine as I1ParameterConfigurable;

    void SuperviseEngine() { ... _configurableEngine .Configure(x) ... _engine.Start()
}

class EngineController2Parameter
{
    EngineBase _engine;
    I2ParameterConfigurable _configurableEngine = _engine as I2ParameterConfigurable;

    void SuperviseEngine() { ... _configurableEngine .Configure(x, y) ... _engine.Start()
} 
```

你明白了，但我觉得这会创建很多接口/类，也许有办法避免这种情况。

感谢您的回答，我有了第三个选项，它类似于第一个选项，但使用数组（或 IEnumerable 或其他）来传递未定义数量的参数。这个想法不错，但是我会丢失参数名称。但也许这是迄今为止最好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:22:28.253

也许我不完全理解，但我认为你想要这样的东西：

```
public interface IEngineController //I dont see a need to expose the enigine here in this pseudo code
{
    void Start(); 
    IConfiguration Config { get; }
}

public interface IEngine
{
    void Start();
}

public interface IConfiguration
{
    bool IsOkToStart { get; }
}

public class Configuration : IConfiguration
{
    public Configuration(List<IConfigurationParameter> configurationParameters)
    {
        ConfigurationParameters = configurationParameters;
    }

    public bool IsOkToStart
    {
        get { return ConfigurationParameters.All(cfg=>cfg.IsOkToStart); }
    }
    protected List<IConfigurationParameter> ConfigurationParameters { get; private set; }
}

public interface IConfigurationParameter
{
    bool IsOkToStart { get; }
}

public interface IMaxTemp : IConfigurationParameter
{
    double MaxTemp { get; }
}

public interface ISafetyParameter : IConfigurationParameter
{
    ISafetyCondition SafetyCondition { get; }
} 
```

这有点长，为简洁起见，我省略了 Stop() 。这个想法是：

*   控制器有一个 IEngine（未暴露在接口中）和一个 IConfig
*   IEngine 具有 Start() 方法。
*   配置是具有布尔值的 IConfigparameters 列表可以启动（如果所有参数都可以）。
*   每个参数都有一个根据某些条件计算的 IsOkToStart 也许这为您提供了灵活性？组合您需要的参数，并可能在将来添加 ned 参数。我相信界面非常小且具有凝聚力是一件好事。甚至可能将它们拆分为 IStartParameter 和 IstopParameter 并结合到所需的配置？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:16:24.517

这对你有帮助吗。

```
 interface IEngine
    {
        void startEngine(params int[] engineParam);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:30:53.447

我将其建模类似于：

```
 public interface IEngine1 {

 }

 public interface IEngine1Config {
     int Param1 {get;}
 }

 public Engine1 : IEngine1 {
     IEngine1Config _config;
     public Engine1(IEngine1Config config) {
        _config = config;
     }
 } 
```

然后，您可以选择让一个类实现不同的引擎配置：

```
 class AllEnginesConfig : IEngine1Config, IEngine2Config {
      int Param1 {get;set;}
      // ... etc
 } 
```

（当然，在您的情况下，在单独的类中实现配置可能会更好）

如果你有很多引擎，我会使用 IoC 容器来注册所有不同的类型，并让它连接所有依赖项。

```
 container.Register<IEngine1, Engine1>();
 var theOneAndOnlyConfig = new AllEnginesConfig() {}; // properly initialized, of course
 container.RegisterInstance<IEngine1Config>(theOneAndOnlyConfig); 
 container.RegisterInstance<IEngine2Config>(theOneAndOnlyConfig); 
 // ... 
```

然后，要实例化引擎，您只需使用容器：

```
 container.Get<IEngine1>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:19:04.870

IOC 容器来调用您需要的引擎或您需要的一堆引擎并在运行时注入它们，您可以在调用容器时将它们与可选参数结合使用。我已经在 .NET FW 的许多属性中看到了可选参数的用法。或使用对象参数列表来获取所有输入，并且在调用时可以解析列表并决定它打算调用哪个引擎。它们都不会难以掌握和使用

# javascript - 对象方法比全局函数快吗？

> ID：13064209
> 
> 赞同：7
> 
> 时间：2012-10-25T08:04:31.100
> 
> 标签：javascript, jquery, oop, optimization

## 问题

不敢相信我在网上找不到任何东西，也许我正在寻找错误的东西......

可能几乎没有区别，但是当我尽可能地优化我的代码时，我觉得值得一问。

很简单，我想知道在对象中定义和运行方法是否比全局定义和运行函数更快。

## 例子

**考虑一下：**

```
(function($){  
    $.fn.test = function() {  
        // do something here
    };  
})(jQuery); 
```

**还有这个：**

```
function test(){
    // do something here
} 
```

## 我的问题

以上哪个更快，为什么？如果速度没有差异，那么您建议使用哪个？

提前致谢

## 更新 1

由于它可能是相关的，我觉得有必要解释我为什么要问这个问题。我有一个多年来编写的库，其中包含多种功能。因为它们太多了，我想知道如果我要扩展 jQuery 对象，它们是否会运行得更快，或者保持它们原样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:21:59.847

理论上，您只需要计算必须搜索的对象的数量即可确定哪个更快。变量是根据作用域链解析的，脚本引擎必须首先搜索函数的执行上下文，然后是外部上下文，最后是全局上下文。

属性解析必须首先找到作用域链上的对象，然后是对象或其`[[Prototype]]`链上的属性。

但在实践中，编译器优化意味着上述简单化的分析是错误的，也是正确的，并且在不同的浏览器中针对不同的情况提供不同的结果。

通常，此类优化会带来微小的性能变化，不应仅出于性能原因考虑。为您的应用程序架构、易于维护和逻辑分组设计任何有意义的对象和方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T08:21:29.470

我大约一年前做过这项研究，我可以说它使用起来更快`this.test()`。

但这取决于你需要什么。如果您只想为特定的“小部件”创建一个对象，我不建议向 jQuery 添加不必要的函数。

简单的面向对象用法：

```
function Car(name) {
    this.name = name;
}

Car.prototype.startEngine = function() {
    // Start the engine...
};

Car.prototype.drive = function() {
    this.startEngine();

    // Switch the lights, fasten your seatbelt...
};

// create a new car
var bmw = new Car('BMW');

// Drive the car
bmw.drive(); 
```

您必须了解的另一件事是环境（我希望您理解我的意思）。最好为变量和函数创造一个新鲜的空间，这样就没有太多的变量/函数需要寻找。把它想象成一个列表——如果它更小，在其中找到东西会更快。所以，你创造了一个新的“空间”：

```
(function(){
    // Your fresh space.
})(); 
```

JavaScript 将尝试在“本地”空间中查找内容，然后尝试在全局空间中查找内容。想象它是这样的：

```
|- global
     |- function aaa
     |- function bbb
     |- var myName
     |- your local space
           |- function ccc
           |- function aaa  It will not overwrite global function with the same name
           |- var someVariable 
```

如您所见，在“本地空间”中只有 3 个项目，因此查找内容更快。

在本地“空间”中调用半全局函数更快。而且，如果你想做一些面向对象的东西，扩展“对象”会更好更快。

**更新** 如果你想整理你的函数库，那么你可以将它们分组到一个对象中。我不认为它会更慢。

```
var lib = {
    foo: function() {},
    bar: function() {},
    test: function() {}
};

lib.test(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T08:23:18.570

当您想知道两种方法中哪一种更快时，最好的方法是分析它们。这将为您提供与您的代码相关的结果，而不是一个通用概念。

在我看来，你不应该为了速度而优化它，而是为了 API 的可维护性和丰富性。从你的问题

```
function test(){
    // do something here
} 
```

在全局范围内，这总是很糟糕。理想情况下，您应该将这些方法放在命名空间中，并且问题中的示例 1 将其作为 jQuery 命名空间的一部分。

# jquery - 如何使用 jquery.validate.js 验证 jqgrid 中的单元格？

> ID：13064210
> 
> 赞同：1
> 
> 时间：2012-10-25T08:04:32.200
> 
> 标签：jquery, jqgrid, jquery-validate

我有一个*jqgrid*，它有多个列和行，所有这些都是动态加载的。每列都有自己的验证标准，我使用**jquery.validate.js**来验证字段。我得到的所有帮助都是关于对简单表单字段进行的验证。

有什么方法可以验证 jqgrid 单元格吗？

例如，我有一个数字字段，每次我在 jqgrid 中将焦点从一个单元格更改为另一个单元格时，都应该运行验证检查。我已经有一个正在运行的机制来检查单元格是否已切换以及该单元格中的值。

这是我必须执行验证的代码：

```
function performCellValidation(rowId, colId, colName) {
var cellValue = $grid.jqGrid('getCell', rowId, colName);
switch (colName) {
    case 'Employee_OID':
        {
            //perform validation here
        }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:14:16.833

基于此：[Common Editing Properties/Editrules](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editrules)

在colmodel中：

```
colModel: [ 
  ... 
  {name:'Employee_OID', ..., 
   editrules: {
       custom:true,
       custom_func: function(value,colname) {
                        switch (colName) {
                            case 'Employee_OID':
                            {
                                //perform validation here
                            }
                        }
                    }
   },
   editable:true },
  ... 
```

]

这也可能有帮助：[jqGrid custom edit rule function using Ajax ...](https://stackoverflow.com/questions/9489909/jqgrid-custom-edit-rule-function-using-ajax-displays-custom-function-should-ret)

# seo - SEO，多语言，会话变量

> ID：13064213
> 
> 赞同：1
> 
> 时间：2012-10-25T08:04:49.227
> 
> 标签：seo

有多语言网站。当用户想要更改语言时，他必须单击相关链接，并且会话变量设置为语言 ID。然后在此会话之后用于从数据库中获取正确的内容。首次进入网站时默认语言为英文。（会话变量设置为英语局域网ID）我的问题是：谷歌机器人将如何索引这个站点？只能说英语？如果机器人将在索引开始时从语言链接中“单击”一个怎么办？然后将其设置为给定的语言吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:08:25.723

您的网站只会以英文编入索引。如果你想做多站点，我建议 OR 多域（.de .nl .fr. es 等）或使用不同语言的多子域（nl.domain.tld、de.domain.tld、. fr.domain.tld 等...）然后使用 cookie 将用户重定向到正确的域/子域，如果他们偏好某种语言。

这样，谷歌可以索引所有语言并增加您在“本地”/国家范围搜索结果中排名的变化。

# c# - 删除 ItemTemplate 上的事件处理程序

> ID：13064215
> 
> 赞同：0
> 
> 时间：2012-10-25T08:04:54.173
> 
> 标签：c#, asp.net

我想在 asp .net 中删除 ItemTemplate 的事件处理程序。这是asp代码

```
 <ItemTemplate>
            <asp:RadioButton runat="server" ID="rdbAnswer"  GroupName="Group"  AutoPostBack="True" 
        OnCheckedChanged="rdbAnswer_CheckedChanged" />
        </ItemTemplate> 
```

我想删除后面代码上的 checkedchanged 事件。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:09:59.693

用于`-=`删除事件处理程序。你可以这样做[`RowCreated`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcreated.aspx)：

```
protected void gridView1_RowCreated(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        RadioButton rdbAnswer = (RadioButton)e.Row.FindControl("rdbAnswer");
        if(YourCondition)
        {
            // Remove event handler
            rdbAnswer.CheckedChanged -= new EventHandler(rdbAnswer_CheckedChanged);
            // maybe you also want to set rdbAnswer.AutoPostBack="false" to prevent the postback
        }
    }
} 
```

记得注册`RowCreated`事件处理程序：

```
<asp:GridView ID="gridView1" OnRowCreated="gridView1_RowCreated" runat="server"> 
```

# php - 对象中的Mysql查询

> ID：13064218
> 
> 赞同：1
> 
> 时间：2012-10-25T08:05:02.243
> 
> 标签：php, mysql, oop

到目前为止，我已经写了一个月的面向对象风格，现在我想知道哪种方法是使用 sql 查询的正确方法。因此，例如，我在类中有函数 getPlayerData。那么哪种方式更好 - 1）在课堂外执行一个mysql过程并将获取的数组提供给getPlayerData 2）在课堂上执行所有过程

如果你建议第二种情况，那么我应该用全局 $variable 启动每个函数，它启动了 mysqli 实例吗？

抱歉，如果我没有使用正确的术语，您可以随时纠正我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:13:42.147

您可以执行以下操作，而不是给每个类函数一个全局变量：

```
class Test{

    protected $mysqli = null;

    function __construct($mysqli = null){
        $this->mysqli = $mysqli;
    }

    public function setMySqli($mysqli){
        $this->mysqli = $mysqli;
    }

    public function getSomething(){
        $result = $this->mysqli->query("SELECT something FROM table");
        //do something with result here
        return $result;
    }

} 
```

允许您像这样使用您的对象：

```
$test = new Test($mysqli);
$result = $test->getSomething(); 
```

或者

```
$test = new Test();
$test->setMySqli($mysqli);
$result = $test->getSomething(); 
```

# perl - 子例程中奇怪的 perl 语法（ $$ ）

> ID：13064220
> 
> 赞同：4
> 
> 时间：2012-10-25T08:05:03.197
> 
> 标签：perl

`( $$ )`在这段代码中做了什么。我已经编写 Perl 很长时间了，但直到最近我打开一个非常旧的 Perl .plx 文件时才遇到这种语法

这些行阻止我升级到更现代的 Perl 版本。

```
sub help( $$ ){

} 
```

它影响我的原因是因为我收到一条错误消息，指出在声明帮助函数之前调用了它。知道如何在不删除 ( $$ ) 块的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T08:10:48.430

被称为[原型](http://perldoc.perl.org/perlsub.html#Prototypes)。这个特定的说，子例程期望使用恰好 2 个标量变量来调用。尽管原型有时很有用，但大多数情况下没有用。

如果你可以删除它们取决于代码的其余部分......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T08:11:35.257

那是一个函数原型，用于指定子例程采用的参数的数量和类型。请参阅[文档](http://perldoc.perl.org/perlsub.html#Prototypes)。

由于它在当前文档中，我不明白为什么它会阻止您升级。

你得到的错误是`help called too early to check prototype`什么？这是[perldiag](http://perldoc.perl.org/perldiag.html)文档中的解释：

> （W 原型）在解析器看到它的定义或声明之前，您已经调用了一个具有原型的函数，而 Perl 无法检查该调用是否符合原型。您需要为相关子例程添加早期原型声明，或者将子例程定义移动到调用之前以进行正确的原型检查。或者，如果您确定您正确调用了该函数，您可以在名称前添加一个 & 号以避免警告。请参阅 perlsub。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T17:23:24.880

这是一个[原型](http://perldoc.perl.org/perlsub.html#Prototypes)。`$$`指定函数需要两个参数，`help`并且每个参数都应该在标量上下文中进行计算。请注意，这*并不*意味着它们是标量值！Perl 的原型与其他语言的原型不同。它们允许您定义行为类似于内置函数的函数：括号是可选的，并且对参数施加上下文。

```
sub f($$) { print "@_\n" }
my @a = ('a' .. 'c');
f(@a, 'd'); # prints "3 d" 
```

我猜你看到的错误信息是

```
help() called too early to check prototype 
```

这意味着 Perl 在看到函数声明并知道原型之前就看到了对该函数的调用。这意味着原型没有被强制执行，并且调用可能不会像预期的那样运行。

```
my @a = ('a' .. 'c');
f(@a, 'd'); # prints "a b c d"
sub f($$) { print "@_\n" } 
```

要修复错误，您需要在调用之前移动子例程定义，或者在调用之前添加声明。

```
sub f($$); # forward declaration
my @a = ('a' .. 'c');
f(@a, 'd'); # prints "3 d"
sub f($$) { print "@_\n" } 
```

所有这一切都与您升级到更新版本的 Perl 的能力完全无关。

# hibernate - 休眠 @SecondaryTable 和 @OrderBy

> ID：13064223
> 
> 赞同：1
> 
> 时间：2012-10-25T08:05:13.817
> 
> 标签：hibernate, jpa

当@OneToMany 的目标是映射到多个表的实体（使用@SecondaryTable）并且排序属性位于辅助表中时，我在尝试使用@OrderBy 注释对@OneToMany 集合进行排序时遇到问题。

尝试访问属性时会引发“未找到列”异常，因为生成的 SQL order by 子句使用主表而不是辅助表的别名引用排序列。

我看不到我可以添加任何东西来完成这项工作。有什么想法吗？

```
public class Product{

    @OneToMany(orphanRemoval = true, mappedBy = "product", cascade = CascadeType.ALL)
    // @OrderBy(value = "displaySequence")
    public Set<Benefit> getBenefits() {
    return benefits;
    }
}

public class Benefit{
    @Column(table = SECONDARY_TABLE_NAME, name = "display_sequence", nullable = false)
    public Integer getDisplaySequence() {
    return displaySequence;
    }
} 
```

这是使用 JPA @OrderBy 注释而不是特定于 Hibernate。

Hibernate 的版本是 3.6.9。

在这些类中，所有内容都使用属性进行映射。

其他不相关的类使用混合访问模式

有一个现有的 JIRA 项目似乎证明了与 @Where 子句相同的问题：

[https://hibernate.onjira.com/browse/HHH-4246](https://hibernate.onjira.com/browse/HHH-4246)

例外是标准 SQL 无效列错误。

生成的 SQL 如下。'order by' 应参考 display_sequence 并参考别名 benefit0_。

```
select 
.....
from as_benefits_additional_data benefits0_ 
inner join as_benefits benefit1_ on benefits0_.id=benefit1_.id 
left outer join as_benefits_additional_data benefit1_1_ on benefit1_.id=benefit1_1_.id 
inner join as_products product2_ on benefit1_1_.product_id=product2_.id 
left outer join as_products_additional_data product2_1_ on product2_.id=product2_1_.id 
where benefits0_.product_id=1 
order by benefit1_.display_sequence asc 
```

# performance - 与选择的性能

> ID：13064224
> 
> 赞同：0
> 
> 时间：2012-10-25T08:05:13.727
> 
> 标签：performance, linq, select, for-loop

我在 Bill Wagners 的书“Effective C#”中读到，人们应该倾向于使用更多声明性的*select*语句而不是传统的循环（*for*）。

例如：

```
 int[] foo = new int[1000];
 for (int i = 0; i < foo.Length; i++)
     foo[i] = i * i; 
```

是传统的命令式代码，而这将是声明性的 Linq 代码：

```
 int[] foo2 = (from i in Enumerable.Range(0, 1000)
               select i * i).ToArray(); 
```

作为一个老式程序员，我更喜欢第一个版本。

问题是性能如何？我想第一个版本也更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:11:23.110

方式会`for`更快！因为不会有任何 LINQ 侧表达式树评估/优化等......

但是您从使用 a 中获得的真正利润`select`是“延迟执行”。

当`for`程序指针位于放置 的代码部分时，循环将立即执行`for`。该`select`语句将仅在需要时执行，并且仅在需要时执行。

# scala - 玩！框架：自定义运行哪些测试

> ID：13064226
> 
> 赞同：13
> 
> 时间：2012-10-25T08:05:16.200
> 
> 标签：scala, testing, playframework-2.0, sbt, specs2

我有戏！2 用于 Scala 应用程序，我正在使用 Specs2 进行测试。我可以使用`test`命令运行所有测试，或者使用`test-only MyParticularSpec`.

我想做的是标记一些特定的规范，甚至是规范中的单个方法，以便执行以下操作：

*   运行所有非集成的测试（即不访问外部资源）
*   在写入模式下运行所有​​不访问外部资源的测试（但仍在运行读取测试）
*   运行所有测试，但给定一个

等等。

我想这样的事情应该是可行的，也许通过添加一些注释，但我不知道如何去做。

> 是否存在一种机制来选择性地运行某些测试而不是其他测试？

**编辑**我在使用时已经回答了自己`test-only`。命令行选项仍然不适用于该`test`任务。按照[sbt 指南](http://www.scala-sbt.org/release/docs/Detailed-Topics/Testing.html#additional-test-configurations)，我尝试创建一个额外的 sbt 配置，比如

```
object ApplicationBuild extends Build {
  // more settings
  lazy val UnitTest = config("unit") extend(Test)
  lazy val specs = "org.scala-tools.testing" %% "specs" % "1.6.9" % "unit"

  val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA)
    .configs(UnitTest)
    .settings(inConfig(UnitTest)(Defaults.testTasks) : _*)
    .settings(
      testOptions in UnitTest += Tests.Argument("exclude integration"),
      libraryDependencies += specs
    )
} 
```

这在我传递不带选项的参数时有效，例如当我输入`Test.Argument("plan")`. 但我无法找到如何传递更复杂的论点。我试过了

```
Tests.Argument("exclude integration")
Tests.Argument("exclude=integration")
Tests.Argument("-exclude integration")
Tests.Argument("-exclude=integration")
Tests.Argument("exclude", "integration")
Tests.Argument("exclude \"integration\"") 
```

可能还有更多。仍然不知道什么是正确的语法。

> 有谁知道如何将带有选项的参数从 sbt 传递给 specs2？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:47:01.913

首先，按照[specs2 指南](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Structure)，必须在规范中添加标签，像这样

```
class MySpec extends Specification with Tags {
  "My spec" should {
    "exclude this test" in {
      true
    } tag ("foo")

    "include this one" in {
      true
    }
  }
} 
```

要包含的命令行参数记录[在此处](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Runners.html)

然后可以有选择地包括或排除测试

```
test-only MySpec -- exclude foo
test-only MySpec -- include foo 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T10:33:38.517

您也可以在不更改构建的情况下使用

```
test-only * -- exclude integration 
```

在 Play 2.1-RC3 中测试

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-26T09:45:04.733

如果要传递多个参数，可以将多个字符串添加到一个`Test.Argument`

```
testOptions in Test += Tests.Argument("include", "unit") 
```

*此处的specs2*用户指南和[此处](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Runners.html#with+sbt+%3E+0.9.x)的 Play 文档[中有](http://www.playframework.org/documentation/2.0.1/SBTSettings)这方面的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-22T04:16:32.697

我正在使用 Play2.2，有两种方法可以做到这一点，具体取决于您是否在游戏控制台中。

1.  从控制台类型：`test-only full.namespace.to.TestSpec`
2.  从终端类型：`test-only "full.namespace.to.TestSpec"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T12:29:09.103

我在试图弄清楚如何为 ScalaTest with Play 做类似的事情时遇到了这个问题。SBT 有关于如何配置[额外测试配置](http://www.scala-sbt.org/release/docs/Detailed-Topics/Testing)的详细文档，但这些可能需要对 Play 进行一些调整。

除了细微不同的项目配置之外，我发现我想从[PlaySettings](https://github.com/playframework/Play20/blob/master/framework/src/sbt-plugin/src/main/scala/PlaySettings.scala)中复制一堆测试设置。以下是在“ **/it** ”目录中运行并生成一个带有集成测试源的 Intellij 项目。我可能仍然缺少报告和生命周期挂钩，

```
object BuildSettings {
  def testSettings = {
    // required for ScalaTest. See http://stackoverflow.com/questions/10362388/using-scalatest-in-a-playframework-project
    testOptions in Test := Nil
  }

  def itSettings = {
    // variously cribbed from https://github.com/playframework/Play20/blob/master/framework/src/sbt-plugin/src/main/scala/PlaySettings.scala
    sourceDirectory in IntegrationTest <<= baseDirectory / "it"
    scalaSource in Test <<= baseDirectory / "it"
    libraryDependencies += "play" %% "play-test" % play.core.PlayVersion.current % "it"
  }
}

object ApplicationBuild extends Build {
  val main = play.Project(
    appName,
    appVersion,
    Dependencies.dependencies)
    .configs( IntegrationTest )
    .settings(Dependencies.resolutionRepos)
    .settings(BuildSettings.testSettings)
    .settings(Defaults.itSettings : _*)
    .settings(BuildSettings.itSettings)
} 
```

# android - 复杂的 ListView 项目布局，每个项目的所有元素大小相同？

> ID：13064241
> 
> 赞同：1
> 
> 时间：2012-10-25T08:06:10.050
> 
> 标签：android, android-layout, android-listview

我正在尝试构建一个复杂的列表视图项目布局，其中所有元素的每个列表视图项目的尺寸都相同，整个布局占据了屏幕的整个宽度。到目前为止，我尝试使用线性布局来执行此操作，发现这是错误的方法。然后我尝试使用相对布局，但这对我不起作用，所以我希望有人能指出我如何才能完成这项工作。

这是我正在尝试构建的图表。 ![ListView 项目布局](../Images/9dd712bf100b2f087b8077a279f19090.png)

以下是有关图表的更多详细信息：

*   对于每个列表项，只有元素 5 和 6 具有相同的内容。其余元素都将具有不同的文本，但布局应始终具有相同的大小。

*   元素 4 应该只有 2 行。元素 1、2 和 3 应该只有 1
    行。

*   元素 2 应左对齐，元素 3 应
    右对齐。

*   元素 2 和 3 应该是元素 4 宽度的一半。

这是我使用RelativeLayout 对此布局的尝试。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="2dp">
<TextView
    android:id="@+id/txtRaceNumber"
    android:layout_width="20dp"
    android:layout_height="fill_parent"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center"
    android:layout_gravity="center" 
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true" />
    <TextView
        android:id="@+id/txtRaceName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_toRightOf="@id/txtRaceNumber"
        android:layout_alignParentTop="true" />
    <TextView
        android:id="@+id/txtRaceClass"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:maxLines="1"
        android:ellipsize="marquee"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_toRightOf="@id/txtRaceNumber" />
    <TextView
        android:id="@+id/txtRaceStartTime"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:maxLines="1"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/txtRaceClass" />
     <ImageButton
        android:id="@+id/btnTracklist"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="@null"
        android:paddingRight="8dip"
        android:focusable="false"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@id/txtRaceStartTime" />
    <ImageView
        android:src="@drawable/go"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center_vertical"
        android:layout_alignParentTop="true"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_toRightOf="@id/btnTracklist" />
</RelativeLayout> 
```

使用这个RelativeLayout，所有元素在布局中都显得混乱。

我怎样才能让所有这些元素像我在图中显示的那样对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:21:09.877

按照下面的结构我觉得你可以使用 weight 和 weightSum 来实现你想要的。

```
<LinearLayout orientation="horizontal">
    <LinearLayout>
    <TextView/>
    </LinearLayout>
    <LinearLayout orientation="vertical">
    <TextView/>
    <LinearLayout orientation="horizontal">
    <TextView/>
    <TextView/>
    </LinearLayout>
    <ImageButton/>
    <ImageView/>
</LinearLayout> 
```

**编辑**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:baselineAligned="false"
    android:orientation="horizontal"
    android:padding="2dp"
    android:weightSum="1" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.2" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:orientation="vertical"
        android:weightSum="1" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="0.7"
            android:gravity="center" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="0.3"
            android:orientation="horizontal"
            android:weightSum="1" >

            <TextView
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.5"
                android:gravity="center" />

            <TextView
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="0.5"
                android:gravity="center" />
        </LinearLayout>
    </LinearLayout>

    <ImageButton
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.15" />

    <ImageButton
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="0.15" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:39:32.633

这是你需要的吗？

```
<LinearLayout
    android:id="@+id/lin1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
   android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txtRaceNumber"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"

        android:gravity="center"
        android:text="TExt1"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:orientation="vertical" 
    android:layout_toRightOf="@+id/lin1"
    android:layout_toLeftOf="@+id/lin3">

    <TextView
        android:id="@+id/txtRaceName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text4"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/txtRaceClass"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:maxLines="1"
            android:text="text2"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <TextView
            android:id="@+id/txtRaceStartTime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:maxLines="1"
            android:text="text3"
            android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/lin3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:layout_alignParentRight="true"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/btnTracklist"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="@null"
        android:focusable="false"
        android:paddingRight="8dip" />

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center_vertical"
        android:src="@drawable/ic_launcher" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:47:28.593

试试这个代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="90dp"
    android:gravity="center|left"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="left|center"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="TextView"
        android:textColor="#FFFFFF"
        android:textSize="15sp" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="left|center"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center"
                android:text="TextView"
                android:textColor="#FFFFFF"
                android:textSize="15sp" />
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="left|center"
            android:orientation="horizontal" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center"
                android:layout_weight="1"
                android:text="TextView"
                android:textColor="#FFFFFF"
                android:textSize="15sp" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="left|center"
                android:layout_weight="1"
                android:text="TextView"
                android:textColor="#FFFFFF"
                android:textSize="15sp" />
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="left|center" >
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_marginRight="3dp"
        android:gravity="center"
        android:orientation="vertical" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|center"
            android:src="@drawable/ic_launcher"
           />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:layout_marginRight="3dp"
        android:gravity="center"
        android:orientation="vertical" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right|center"
            android:src="@drawable/ic_launcher"
            />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T20:50:11.747

我已经设法在主布局上使用 weightSum 获得所需的布局。

这是代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/twolinechecked"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:minHeight="?android:attr/listPreferredItemHeight"
android:maxHeight="?android:attr/listPreferredItemHeight"
android:paddingTop="2dip"
android:paddingBottom="2dip"
android:orientation="horizontal"
android:weightSum="1"
android:descendantFocusability="blocksDescendants">
<TextView
    android:id="@+id/txtRaceNumber"
    android:layout_width="40dip"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center"
    android:layout_gravity="center"
    android:paddingRight="5dip"
    android:paddingLeft="5dip"
    android:textStyle="bold" />
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:layout_weight="1"
    android:layout_gravity="center_vertical|center_horizontal"
    android:layout_marginLeft="6dip">
    <TextView
        android:id="@+id/txtRaceName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium" />
    <LinearLayout
        android:id="@+id/linearTextInner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_gravity="center_vertical|center_horizontal">
        <TextView
            android:id="@+id/txtRaceClass"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:maxLines="1"
            android:ellipsize="marquee"
            android:layout_alignParentLeft="true" />
        <TextView
            android:id="@+id/txtRaceStartTime"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:layout_weight="1"
            android:maxLines="1"
            android:layout_alignParentRight="true"
            android:gravity="right" />
    </LinearLayout>
</LinearLayout>
<ImageButton
    android:id="@+id/btnTracklist"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@null"
    android:layout_marginLeft="5dip"
    android:paddingRight="8dip"
    android:layout_gravity="center_vertical|center_horizontal" />
<ImageView
    android:src="@drawable/go"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:layout_alignParentRight="true" />
</LinearLayout> 
```

# javascript - 在JS问题中搜索带有字符串的字符串

> ID：13064242
> 
> 赞同：1
> 
> 时间：2012-10-25T08:06:14.357
> 
> 标签：javascript

我正在使用 HTML5 并且 indexOf 给了我一个错误，那么我还能用什么来搜索字符串中的“正确”一词：`a001_new_quiz_multiple_choice_new_mc4_correct.html`它位于一个名为的变量中`value1`

```
function SetAPIValue(key1, value1)
{
   // alert("action is " + key1 + " and data is " + value1);
   console.log(value1);

   var str = "wrong";
   var n = str.search(value1);
   if (n > 0)
     alert("found");
} 
```

我得到的错误：0x800a01b6 - Microsoft JScript 运行时错误：对象不支持属性或方法'indexOf'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:08:47.357

我不知道您如何使用 indexOf，但这有效：

```
var value1 = "a001_new_quiz_multiple_choice_new_mc4_correct.html";
var n = value1.indexOf("correct");
if (n >= 0) alert("found"); 
```

也许你试过`"correct".indexOf(value1);`而不是`value1.indexOf("correct");`？

[示范](http://jsfiddle.net/gUdjD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:14:18.463

此错误是否仅在 IE 上发生？如果是这样 - 你应该注意 indexOf 没有在他们的 JS 中实现。尝试在 indexOf 中第一次使用之前添加以下代码：

```
if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(obj, start) {
         for (var i = (start || 0), j = this.length; i < j; i++) {
             if (this[i] === obj) { return i; }
         }
         return -1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:21:07.650

> 函数 SetAPIValue(key1, value1) {
>    var regEx = new RegExp("正确");
>    警报（regEx.test（value1））；
> }

# java - 重定向到配置的错误页面

> ID：13064255
> 
> 赞同：0
> 
> 时间：2012-10-25T08:07:09.407
> 
> 标签：java, jakarta-ee, tomcat, web-applications

我有一个 servlet 处理与模式 (*.sth) 匹配的请求。现在我想抛出一个 404，如果一个 URL 被调用，它与模式匹配但不应该被调用。我通过设置 HttpServletResponse 的状态来做到这一点。在 web.xml 中是为 404s 配置的自定义错误页面。如果 tomcat 本身抛出 404，但不是我的 servlet，则会打开此错误页面。当然我可以直接调用页面，但我对更通用的方式感兴趣，因为 servlet 也用于其他 Web 应用程序。有没有办法让配置的错误页面能够重定向到它们或告诉 Web 容器使用它们？

web.xml 片段：

```
<servlet>
    <display-name>Controller</display-name>
    <servlet-name>Controller</servlet-name>
    <servlet-class>com.example.Controller</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Controller</servlet-name>
    <url-pattern >*.do</url-pattern>
</servlet-mapping>

<error-page>
    <error-code>404</error-code>
    <location>
        /error.do
    </location>
</error-page> 
```

设置状态：

```
response.setStatus(HttpServletResponse.SC_NOT_FOUND); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:53:46.523

我想

```
<error-page>
    <error-code>404</error-code>
    <location>/error.do</location>
</error-page> 
```

应该在`web.xml inside conf`tomcat的文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:34:22.923

“家”给出了正确的线索。使用`sendError()`而不是`setStatus()`做我想要的。谢谢！

# php - 具有多个持久层的 PHP DataMapper

> ID：13064256
> 
> 赞同：8
> 
> 时间：2012-10-25T08:07:09.870
> 
> 标签：php, oop, architecture, datamapper

我正在用 PHP 编写一个必须写入三个持久层的系统：

*   一项网络服务
*   两个数据库（一个mysql一个mssql）

原因是遗留系统，无法更改。

我想使用 DataMapper 模式，并试图建立实现我想要的最佳方式。我有一个如下界面：

```
<?php
    $service = $factory->getService()->create($entity);
?> 
```

为了简洁起见，下面是一些人为的和精简的代码：

```
<?php
class Post extends AbstractService
{
    protected $_mapper;

    public function create(Entity $post)
    {
        return $this->_mapper->create($post);
    }
}

class AbstractMapper
{
    protected $_persistence;

    public function create(Entity $entity)
    {
        $data = $this->_prepareForPersistence($entity);
        return $this->_persistence->create($data);
    }   
}
?> 
```

我的问题是，由于存在三个持久层，因此每个持久层也可能需要三个映射器。我想要一个干净的设计模式启发的界面来完成这项工作。

我认为它具有三个选项：

1.  将三个映射器注入服务并在每个映射器上调用 create
2.  $_mapper 是一个数组/集合，它遍历它们在每个上调用 create
3.  $_mapper 实际上是一个容器对象，它充当进一步的代理并在每个对象上调用 create

这些解决方案中的每一个都让我觉得有些错误，并且希望任何可能适合此的反馈/公认的设计模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T19:28:17.453

我不得不解决一个类似的问题，但在很多年前的 PEAR DB 时代。在这种特殊情况下，需要跨多个数据库复制数据。

我们没有遇到不同数据库具有不同映射的问题，所以它更简单一些。

我们所做的是对 DB 类进行外观并覆盖 getResult 函数（或任何它被调用的函数）。然后，该函数分析 SQL，如果它是读取的，它会将其发送给一个支持的，如果它是一个写入的，它会将它发送给所有的。

对于一个使用率非常高的网站，这实际上非常有效。

从这个背景来看，我建议完全覆盖所有持久性操作。完成此操作后，实施细节的相关性就会降低，并且可以随时更改。

从这个角度来看，您的任何实现想法似乎都是一种合理的方法。不过，您会想考虑很多事情。

*   如果其中一个后端抛出错误怎么办？
*   写入三个数据库服务器对性能有何影响？
*   是否可以异步完成写入（如果可以，请再次询问第一个问题）

可能还有另一种方法可以解决这个问题。那就是使用存储过程。如果您有一个主数据库服务器，您可以编写一个触发器，该触发器在提交（或大约）时连接到另一个数据库并同步数据。

如果数据更新不需要立即进行，您可以让主数据库记录更改并使用另一个脚本定期“馈送”这些数据到另一个系统。同样，需要考虑错误问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:39:29.850

首先，有点术语：你所说的三层，实际上是三个模块，而不是层。也就是说，在持久层中有三个模块。

现在，这个问题的基本前提是：你必须有三种不同的持久化逻辑，对应三种不同的存储源。这是你无法避免的。因此，问题只是关于如何在此模块上调用写入操作（假设对于读取，您不需要调用所有三个，或者如果您这样做，那是一个单独的问题）。

从您列出的三个选项中，我认为第一个更好。因为，那是三者中最简单的。另外两个，仍然需要分别调用三个模块，以及引入容器或某种数据结构的额外工作。您仍然无法避免在某处调用三个模块。

如果使用第一个选项，那么您显然需要使用接口，为用户/客户端（在本例中为服务）提供统一的抽象。

我的观点是： 1\. 它们是您的问题固有的复杂性，您无法进一步简化。2.第一个选项更好，因为另外两个，让事情变得更复杂，而不是简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T22:51:56.897

我认为选项＃2是我认为最好的。我会同意的。如果您有 10 多个映射器而不是选项＃3 将创建逻辑转移到映射器本身是有意义的，但是由于您有合理数量的映射器，因此只注入它们并迭代它们更有意义。通过添加另一个映射器来扩展功能只需在依赖注入配置中添加 1 行。

# jquery - IE 问题中的 this.value

> ID：13064257
> 
> 赞同：1
> 
> 时间：2012-10-25T08:07:11.523
> 
> 标签：jquery, ajax, internet-explorer

我`this.value`在 IE(7-9) 中遇到问题。我使用这段代码：

```
<script language="javascript" type="text/javascript">
  $(document).ready(function(){
    $(".inputbox").keyup(function(){
      value = this.value;
      $("#searchRe").load("suggestionSearch.php?value=" + value);
    });
});    
</script> 
```

这适用于 Firefox 和 Chrome，但不要在 IE 中将“值”传递给“suggestionSearch.php”。我认为`value = this.value`是问题。请帮我 ：）

注意：`.inputbox`是一个文本框。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:10:21.440

因为您已经在使用 jQuery，所以只需尝试使用 jquery 来获取值，使用这一行

```
var value = $(this).val() 
```

jQuery 可以很好地处理任意浏览器行为。

**编辑**

这是一个适用于 IE 的快速解决方案，您可以根据自己的需要进行修改。

[http://jsfiddle.net/FeRsB/](http://jsfiddle.net/FeRsB/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T14:51:47.880

我已经尝试了您的代码，并且似乎运行良好；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >  
    <head>
        <title></title>
    </head>
    <body>
        <input type="text" class="inputbox" />
        <div id="searchRe"></div>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.js" ></script>
        <script language="javascript" type="text/javascript">
          $(document).ready(function(){
            $(".inputbox").keyup(function(){
              value = this.value;
              $("#searchRe").load("s.php?value=" + value);
            });
        });    
        </script>
    </body>
</html> 
```

这是我的 php 临时代码（因为你没有指定你的）

```
<?php

    echo $_GET['value'];

?> 
```

你能给我们更多的信息吗？（例如从php文件返回什么样的数据）

**编辑：**

替换这个

```
$("#searchRe").load("s.php?value=" + value); 
```

有了这个

```
$("#searchRe").load("s.php?value=" + encodeURIComponent(value)); 
```

请注意函数 encodeURIComponent，点击[此链接](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)了解更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T10:20:00.903

`id = "value"`你的页面上有一个元素吗？在这种情况下，IE 将创建一个为其命名的全局变量`value`，并拒绝将全局变量值分配给其他东西。

如果这是正在发生的事情，解决方案很简单

```
<script language="javascript" type="text/javascript">
    $(document).ready(function(){
        $(".inputbox").keyup(function(){
            var value = this.value;
            $("#searchRe").load("suggestionSearch.php?value=" + value);
        });
    });    
</script> 
```

（注意**var**前面的`value`）。无论如何，这是你应该做的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T13:00:12.483

您可以乘坐该事件并使用它来获取所需的数据。这是一个示例代码：

```
<input class="inputbox" type="text" value="-default-" />

<script>

function changeHandler(event) {
    console.log("changeHandler: ",event.target.value);
}
function keyPressHandler(event) {
    console.log("keyPressHandler: ",event.target.value);
}
function keyDownHandler(event) {
    console.log("keyDownHandler: ",event.target.value);
}
function keyUpHandler(event) {
    console.log("keyUpHandler: ",event.target.value);
}
$(function(){
    $(".inputbox")
        .on("change",{},changeHandler)
        .on("keypress",{},keyPressHandler)
        .on("keydown",{},keyDownHandler)
        .on("keyup",{},keyUpHandler);
})
</script> 
```

聚焦输入字段并单击“s”键后的控制台结果：

```
 LOG: keyDownHandler: -default- 
    LOG: keyPressHandler: -default- 
    LOG: keyUpHandler: -default-s 
    LOG: changeHandler: -default-s 
```

因此，可以通过事件本身获得所需的数据（如果需要，还可以在绑定事件时作为第二个 {} 参数加上任何附加参数。

注意：在输入字段实际模糊（失去焦点）后触发“更改”事件。

ps 你的“onkyeup”处理程序可能是这样的：

```
 function(event){
            $("#searchRe")
                  .load("suggestionSearch.php?value=" + event.target.value);
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T14:29:28.317

尝试将请求参数作为参数传递，而不是修改 URL。

```
//                        arguement ----------v
$("#searchRe").load("suggestionSearch.php", {value: this.value}); 
```

**完整代码：**

```
$(document).ready(function(){
   $(".inputbox").keyup(function(){
       $("#searchRe").load("suggestionSearch.php", {value: this.value});
   });
}); 
```

还要确保将 ajax`cache`设置为`false`,

```
$.ajaxSetup ({
    // Disable caching of AJAX responses
    cache: false
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T22:38:53.253

你试过这个吗？

```
<script language="javascript" type="text/javascript">
    $(document).ready(function(){
        $(".inputbox").keyup('', function(){
            var value = $(this).val();
            $("#searchRe").load("suggestionSearch.php?value=" + value);
        });
    });    
</script> 
```

我只是添加了`Event Data`（可能不需要，谁知道），声明`var value`并更改了获取值的方式`$(this).val()`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T14:03:35.250

对于这个问题，你想要追加而不是加载

```
 StrTemp  = "<ul>"
 $.each(function(value){
  StrTemp += "<li><a id='" + value + "'>" + value + "</a></li>";
 })
 StrTemp += "</ul>"
 $("#searchRe").append(StrTemp); 
```

此代码适用于 IE 和其他

最好的祝福

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-10-25T08:15:30.033

你也可以 alert($(this).serialize());

# eclipse - Play framework 2.0 未解决的依赖

> ID：13064258
> 
> 赞同：1
> 
> 时间：2012-10-25T08:07:13.247
> 
> 标签：eclipse, scala, playframework-2.0, sbt

我用 play framework 2.0 创建了一个 scala 项目。`sbt`该项目使用和`play`命令编译并运行良好。

但是，当我尝试将另一个 play 项目作为依赖项添加到我的项目时，问题就开始了，因为我需要重用它的一些类。 `sbt compile`成功，但`play compile/run`没有。他们给了我以下错误：

> `sbt.ResolveException: unresolved dependency: name_of_old_project_play_dependency: not found`

我也无法运行该项目`sbt run`；每当我向播放框架发出请求时，都会收到空指针异常。

那是因为这两个项目都是游戏项目，也许某处有冲突吗？任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:11:06.180

请务必查看 play 版本，因为 sbt（构建系统 play 使用）可能有不同的版本。

请验证 build.properties 和 plugins.sbt 播放版本。

我用来解决未解决依赖关系的一种技术是检查 sbt 尝试访问的链接。我手动尝试通过访问失败的站点来获取文件。我通常会发现我有一个版本故障。

# php - 如何将 2 个数组合并为 1 个数组

> ID：13064265
> 
> 赞同：0
> 
> 时间：2012-10-25T08:07:50.527
> 
> 标签：php

我有2个这样的数组：

```
array1
      (
        [0] => Array
                   (
                     [id] => 133
                   )

        [1] => Array
                   (
                     [id] => 134
                   )

      )

array2
      (
        [0] => 1
        [1] => 2

      ) 
```

我的问题是：如何将两个数组组合成一个数组，例如：

```
array3
      (
        [133] => 1
        [134] => 2

      ) 
```

感谢您的帮助：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:11:24.200

尝试

```
$array3 = array();
foreach ($array1 as $key => $value) {
  $array3[$value['id']] = $array2[$key];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:12:16.087

```
$array3 = array_combine(array_map('current', $array1), $array2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:18:54.650

我已经这样做了：

```
<?php
    $arrayOne = array(
        array("id" => 133),
        array("id" => 134)
    );
    $arrayTwo = array(1,2);
    $arrayThree = array();
    foreach($arrayOne as $index => $value){
        $arrayThree[$value['id']] = $arrayTwo[$index];
    } 
```

如果你做一个

```
print_r($arrayThree); 
```

现在您将获得第三个数组：

```
Array
(
    [133] => 1
    [134] => 2
) 
```

# maven - -D 在 maven 命令中表示什么？

> ID：13064266
> 
> 赞同：4
> 
> 时间：2012-10-25T08:07:52.457
> 
> 标签：maven

谁能解释一下 -D 在 maven 命令中的含义： `mvn clean install -DskipTests`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:13:21.497

您定义一个可以被[Maven 插件](http://maven.apache.org/plugins/index.html)读取或[在 pom 中使用](http://maven.apache.org/pom.html#Properties)的属性。

```
$> mvn --帮助

用法：mvn [选项] [] []

选项：
 ...
 -D,--define 定义一个系统属性
 ...

```

在这种特殊情况下，您告诉[`maven-surefire-plugin`](http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html)跳过测试。

# iphone - 滚动视图委托方法应用程序在 iPad 第一代中崩溃

> ID：13064270
> 
> 赞同：1
> 
> 时间：2012-10-25T08:08:21.207
> 
> 标签：iphone, uiscrollview

我的情况是，当滚动视图水平移动时，它必须用表格视图和表格视图内的一些控件显示一个问题。

水平移动滚动视图时，我正在释放以前的表格和标签并创建新表格和新标签。

但是我的应用程序在滚动大约 20 次后崩溃，即仅在设备中但在模拟器中运行良好。

我用仪器运行应用程序没有泄漏..

我怀疑这个 iPAD 第一代 RAM 是否有任何问题意味着不够或任何其他问题.. 这是我的代码..

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
@try {

cancelScroll = NO;

if (scrollEnabled) {

scrollEnabled = NO;
NSLog(@"Begin Scroll Dragging");
NSLog(@"%f -- %f",scrollView.contentOffset.x,scrollView.contentOffset.y);

if (scrollDirection == 1) {

    scrollDirection = 0;
    rect = mainTable.frame;
    [scrollTableView scrollRectToVisible:rect animated:NO];
    return;
}

else if (scrollDirection == 2) {

    scrollDirection = 0;
    HUDProgress.alpha=0;

    pageWidth = scrollTableView.frame.size.width;
    if (pageControlBeingUsed) {

        page = pageControl.currentPage;

    }

    else {

        page= floor((scrollTableView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    }

    NSLog(@"%d",page);

    if (page == [questionTextArray count] - 1) {

        if (maxValueReached) {

            rect = mainTable.frame;
            [scrollTableView scrollRectToVisible:rect animated:NO];
            return;
        }

    }

    photoAlbumView.alpha = 0;
    photoView.alpha = 0;
    FileAddView.alpha = 0;
    settingsView.alpha = 0;
    refreshView.alpha = 0;

    photoAlbumViewPortrait.alpha = 0;
    FileAddViewPortrait.alpha = 0;
    settingsViewPortrait.alpha = 0;
    refreshViewPortrait.alpha = 0;

    checkValueForTableView = TRUE;

    if (orientation == 1 ) {

        if (!expandAction) {

            scrollTableView.contentSize = CGSizeMake([questionTextArray count] * 720.0, 596.0);

        }
        else {

            scrollTableView.contentSize = CGSizeMake([questionTextArray count] * 930.0, 596.0);

        }
    }
    else {
        if (!expandAction) {

            scrollTableView.contentSize = CGSizeMake([questionTextArray count] * 520.0, 680.0);

        }
        else {

            scrollTableView.contentSize = CGSizeMake([questionTextArray count] * 720.0, 680.0);

        }

    }

    if (page >= 0) {

        if (page > tempPage) {

             difference = page - tempPage;

            NSLog(@"%d",difference);
            NSLog(@"%f",tableXPosition);

            tableXPosition =  (tableXPosition  + (difference * tableWidthPosition));
            NSLog(@"%f",tableXPosition);
        }

        else if (page < tempPage){

             difference = tempPage - page;

            NSLog(@"%d",difference);

            tableXPosition = abs ((difference * tableWidthPosition) - tableXPosition);

            NSLog(@"%f",tableXPosition);

        }

        else {

            rect = mainTable.frame;
            [scrollTableView scrollRectToVisible:rect animated:NO];

        }

    }

    if([questionTextArray count] > 1)
    {
        pageControl.numberOfPages = [questionTextArray count];

        [pageControl addTarget:self action:@selector(changePage) forControlEvents:UIControlEventValueChanged];

        if(scrollTableView != nil)
        {
            if (mainTable != nil) {

         //       mainTable.delegate = nil;
                [mainTable release];
                mainTable = [[UITableView alloc] initWithFrame:CGRectMake(tableXPosition , 45.0, tableWidthPosition, 565.0) style:UITableViewStyleGrouped];
            }

            mainTable.delegate = self;
            mainTable.dataSource = self;
            mainTable.scrollEnabled = YES;
            mainTable.backgroundColor = [UIColor clearColor];
            [mainTable reloadData];
            [scrollTableView addSubview:mainTable];

        }

        NSLog(@"%d  %d",page,previousPage);

        if (page >= 0) {

            if (previousPage != page) {

                pageControl.currentPage= page;
            }
        }

        if (page >= 0) {

            if (previousPage != page) {

                UIImageView *imgView = [[UIImageView alloc] init];
                UILabel *questionTextLbl1 = [[UILabel alloc] init];
                UILabel *questionNumberLbl1 = [[UILabel alloc] init];

                if (orientation == 1) {
                      if (!expandAction) {

                        imgView.frame = CGRectMake(tableXPosition, 0.0, 710.0, 39.0);
                        questionTextLbl1.frame =  CGRectMake(10.0, 2.0, 430.0, 35.0);
                        questionNumberLbl1.frame = CGRectMake(550.0, 2.0, 200.0, 35.0);
                    }
                    else {

                        imgView.frame = CGRectMake(tableXPosition, 0.0, 920.0, 39.0);
                        questionTextLbl1.frame =  CGRectMake(50.0, 2.0, 500.0, 35.0);
                        questionNumberLbl1.frame = CGRectMake(800.0, 2.0, 150.0, 35.0);

                        compressButton = [UIButton buttonWithType:UIButtonTypeCustom];
                        compressButton.frame = CGRectMake(10.0, 10.0, 25.0, 25.0);
                        [compressButton setImage:[UIImage imageNamed:@"Drop Down small2.png"] forState:UIControlStateNormal];
                        [compressButton addTarget:self action:@selector(compressAction) forControlEvents:UIControlEventTouchUpInside];

                    }

                    imgView.contentMode = UIViewContentModeScaleToFill;
                    imgView.backgroundColor = [UIColor clearColor];
                    imgView.image = [UIImage imageNamed:@"Top gary header.png"];
                    [scrollTableView addSubview:imgView];

                    if (!expandAction) {

                        NSLog(@"expandAction"); 
                    }
                    else {
                        compressButton.backgroundColor = [UIColor clearColor];
                        [compressButton addTarget:self action:@selector(compressAction) forControlEvents:UIControlEventTouchUpInside];
                      [imgView addSubview:compressButton];
                        imgView.userInteractionEnabled = YES;

                    }

                    questionTextLbl1.backgroundColor = [UIColor clearColor];
                    questionTextLbl1.numberOfLines = 0;
                    questionTextLbl1.text = [NSString stringWithFormat:@"%d.%@?",page + 1,[questionTextArray objectAtIndex:page]];
                    NSLog(@"Question arry %@", questionTextArray);
                    [imgView addSubview:questionTextLbl1];

                    if([questionTextArray count] > 1)
                    {
                        questionNumberLbl1.text = [NSString stringWithFormat:@"Question %d/%d",page + 1,[questionTextArray count]];

                    }
                    else {
                        questionNumberLbl1.text = [NSString stringWithFormat:@"Question 1"];
                    }

                    questionNumberLbl1.backgroundColor = [UIColor clearColor];
                    questionNumberLbl1.numberOfLines = 0;
                    [imgView addSubview:questionNumberLbl1];
                }

                else {

                    if (!expandAction) {

                        imgView.frame = CGRectMake(tableXPosition, 0.0, 530.0, 38.0);
                        questionTextLbl1.frame =  CGRectMake(10.0, 2.0, 350.0, 35.0);
                        questionNumberLbl1.frame = CGRectMake(380.0, 2.0, 150.0, 35.0);
                    }
                    else {
                        imgView.frame = CGRectMake(tableXPosition, 0.0, 720.0, 38.0);
                        questionTextLbl1.frame =  CGRectMake(40.0, 2.0, 500.0, 35.0);
                        questionNumberLbl1.frame = CGRectMake(550.0, 2.0, 150.0, 35.0);

                        compressButton = [UIButton buttonWithType:UIButtonTypeCustom];
                        compressButton.frame = CGRectMake(10.0, 10.0, 25.0, 25.0);
                        [compressButton setImage:[UIImage imageNamed:@"Drop Down small2.png"] forState:UIControlStateNormal];
                        [compressButton addTarget:self action:@selector(compressAction) forControlEvents:UIControlEventTouchUpInside];

                    }

                    imgView.contentMode = UIViewContentModeScaleToFill;
                    imgView.backgroundColor = [UIColor clearColor];
                    imgView.image = [UIImage imageNamed:@"Top gary header.png"];
                    [scrollTableView addSubview:imgView];

                    if (!expandAction) {

                        NSLog(@"expandAction");
                    }
                    else {
                    [imgView addSubview:compressButton];
                    imgView.userInteractionEnabled = YES;

                    }

                    questionTextLbl1.backgroundColor = [UIColor clearColor];
                    questionTextLbl1.numberOfLines = 0;
                    questionTextLbl1.font = [UIFont systemFontOfSize:14.0];
                    questionTextLbl1.text = [NSString stringWithFormat:@"%d.%@?",page + 1,[questionTextArray objectAtIndex:page]];
                    NSLog(@"Question arry %@", questionTextArray);
                    [imgView addSubview:questionTextLbl1];

                    if([questionTextArray count] > 1)
                    {
                        questionNumberLbl1.text = [NSString stringWithFormat:@"Question %d/%d",page + 1,[questionTextArray count]];

                    }
                    else {
                        questionNumberLbl1.text = [NSString stringWithFormat:@"Question 1"];
                    }

                    questionNumberLbl1.backgroundColor = [UIColor clearColor];
                    questionNumberLbl1.numberOfLines = 0;
                    [imgView addSubview:questionNumberLbl1];

        }

                [mainTable reloadData];
           //     [scrollTableView  addSubview:mainTable];

                rect = mainTable.frame;

                if (pageControlBeingUsed) {

                    [scrollTableView scrollRectToVisible:rect animated:YES];
                    pageControlBeingUsed = NO;

                }

                else {

                    [scrollTableView scrollRectToVisible:rect animated:NO];
                }

                tempPage = page;
                previousPage = page;

                if (page == [questionTextArray count] - 1){

                    maxValueReached = YES;
                }

                else {

                    maxValueReached = NO;
                }

                [imgView release];
                [questionNumberLbl1 release];
                [questionTextLbl1 release];

            }

        }

        NSLog(@"page:%d  previous page:%d temp page:%d",page,previousPage,tempPage);

    }

}

}

else {

    [self killScroll];
    scrollDirection = 0;

}

}
@catch (NSException *exception) {

    NSLog(@"Exception: %@---%@",[exception name],[exception reason]);
}
@finally {

    NSLog(@"Finally block");
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:16:32.300

> 我的疑问是这个 iPAD 第 1 代 RAM 是否有任何问题意味着不够或任何其他问题。

IMO，您对记忆的直觉是正确的。你的方法真的很难遵循，所以我不确定，但似乎你正在实例化视图和标签的日志并将它们添加到你的主 scrollTableView，但从不删除它们。这可以解释内存填充。

拿`imgView`，你实例化它：

```
 UIImageView *imgView = [[UIImageView alloc] init]; 
```

将其添加到`scrollTableView`：

```
 [scrollTableView addSubview:imgView]; 
```

添加几个子视图`imgView`：

```
 [imgView addSubview:questionTextLbl1];
 [imgView addSubview:questionNumberLbl1]; 
```

你正确地释放它：

```
[imgView release]; 
```

但我看不到您在添加新内容之前删除`imgView`的任何地方...所以您只需继续添加...`scrollTableView``imgView``imgView``imgView`

检查我所说的是否属实的一种简单方法是将以下语句添加到`scrollViewDidEndDecelerating`：

```
 NSLog(@"LOGGING NUMBER OF SUBVIEWS: %d", [scrollTableView.subviews count]); 
```

例如，

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
  @try {

   cancelScroll = NO;
   if (scrollEnabled) {
      NSLog(@"LOGGING NUMBER OF SUBVIEWS: %d", [scrollTableView.subviews count]);
      ... 
```

你会发现每次滚动时，子视图的数量都会增加。

# php - 通过 PHP 将分层 .ai 转换为 PDF

> ID：13064277
> 
> 赞同：8
> 
> 时间：2012-10-25T08:09:00.103
> 
> 标签：php, pdf, pdf-generation, imagick, adobe-illustrator

我有一个带有 2 个图层组的 .ai 文件，我想将它们通过管道传输到一个带有图层的 .pdf 文件中。我已经尝试过 ImageMagick，但我无法获得选择器。我试过这个：

```
exec("convert 'test.ai[0]' output0.png");
exec("convert 'test.ai[1]' output1.png"); 
```

第一个给了我整个文件。我首先尝试使用 .png 来更快地预览内容。任何人都知道如何处理这个问题？PDF 文件将包含更多信息，然后是 .ai。友好的问候凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:32:26.040

Layer 0 is always the "all lower layers combined" layer.

# php - 在 wamp 2.0 php 中安装 ffmpeg

> ID：13064289
> 
> 赞同：0
> 
> 时间：2012-10-25T08:09:51.917
> 
> 标签：php

我也遇到了同样的问题，我从[http://raghuram2404.blogspot.in/2012/06/install-ffmpeg-in-wamp-server-20.html](http://raghuram2404.blogspot.in/2012/06/install-ffmpeg-in-wamp-server-20.html)获取 dll 文件并将其复制到 system32

按照给出的指示。我重新启动 wamp 并运行 phpinfo();

但没有在列表中获得 ffmpeg

还是有其他方法可以从视频上传生成缩略图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:24:03.607

您是否将 php_ffmpeg.dll 提取并放入您的 php ext 文件夹？

尝试阅读此[链接](https://stackoverflow.com/questions/1172916/how-to-install-ffmpeg-in-wampserver-2-0-windows-xp)

# c# - 在 WindowsFormsHost 中使用 Geckofx-15 的 WPF 应用程序

> ID：13064307
> 
> 赞同：1
> 
> 时间：2012-10-25T08:10:50.717
> 
> 标签：c#, wpf, ui-thread, geckofx

我有 wpf 应用程序，它在 WindowsFormshost 中使用 geckofx 来显示网站

有时 GeckoWebBrowser 变得不响应

特别是在加载重页时

我知道如何在单独的 UI 线程中运行 Window 但是否可以在单独的 UI 线程中运行 WindowsFormsHost ？

# c# - C# 是否存在异常 ID

> ID：13064317
> 
> 赞同：3
> 
> 时间：2012-10-25T08:11:38.973
> 
> 标签：c#, try-catch

我的软件使用 Try Catch 来捕捉错误；最近发生了一个错误（与数据库的超时连接），并弹出 Messagebox.Show() 提醒用户该问题。这种内部软件的最终用户根本不具备 IT 知识。收到这条信息的女士问我她和谁失去了联系（我真的认为她认为这是一种精神上的“联系”，因为她看起来像一个嬉皮士）。

所以我想做的是简化错误消息。

我考虑过的事情：

我可以检查/比较 ex.Message 字符串与我想要满足的字符串列表，如果它匹配一个，我将显示简化版本。国际海事组织，不现实。

然后我想有多个捕获，如果它是某种类型，则显示简单的消息。但是我的代码会有多混乱！不仅如此，它还可能以误导性消息告终，因为并非所有（例如）TimeOutExceptions 都是相同的。

或者，我必须尝试编写自己的异常类型来满足这一点。

然后我认为，如果每个 .NET 异常都有一个关联的 ID，那将非常方便——这样，我可以用每个 ID 和我自己的好且易于准备/理解的消息编写一个很好的 case 语句。

有没有其他人考虑过这个问题，他们是否找到了合适的安排。还是只在屏幕上显示一条消息“错误 - 一封电子邮件已发送给软件供应商......”更好）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:21:04.323

您永远不应该向最终用户显示 Exception.message。这是有助于识别错误类型的信息性文本。

任何时候你捕捉到异常，你都应该正确处理它或重新抛出/抛出另一个。如果您处于通过显示一些错误消息来处理异常的代码点，您应该能够从异常本身正确推断上下文。您可以使用适当的异常类型来创建一些基本的异常域（DatabaseException、CommunicationException），并使用错误代码在其域内进一步区分异常。

您可以使用属于 Exception 类并且是 IDictionary 类型的 Data 属性，从而用作 Exception 状态包。然后，您可以在此处存储类似 'ERR_CODE' = CONSTANT 的内容，并使用一些单点异常处理来检查错误代码，如果存在，则使用一些用户友好的输出处理异常。

您甚至可以在当前 AppDomain 中注册全局异常处理程序以捕获任何未捕获的异常并显示一些消息。这是常见的做法，但您必须意识到这种方法会破坏自然的代码流，如果发生这种情况，您将得到已处理的异常但未捕获的异常流（您没有在调用者站点上处理异常然后不知道调用失败并且行为可能无法预测）。因此，仅通过打印一些用户友好的消息并结束应用程序或终止当前用例来使用这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:23:41.393

如果你**写过**这样的代码，`catch (Exception ex)`那么你**做错了什么**。对于异常的编码情况，您应该**始终**捕获特定的异常。

阅读 Eric Lippert 的[“Vexing exceptions”博客条目](http://blogs.msdn.com/b/ericlippert/archive/2008/09/10/vexing-exceptions.aspx)。

捕获异常并仅显示消息属于“愚蠢”的异常类别。你永远不应该拥有它们。

相反，您应该只有 Eric 阐述的其他三种类型的例外。而且您应该捕获所涉及的特定异常类型，而不是泛型`Exception`类型。

**如果您捕获特定异常，那么您可以向最终用户提供非常合理的消息——甚至提供有关如何解决问题的信息。**

更好的是，没有所有通用异常捕获您的代码将更容易调试、更清洁和更简洁。代码中错误的主要预测因素是您编写的实际代码行。编写更少的代码并减少错误。

所以我的建议是改变你的代码设计并适当地处理异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T08:26:09.363

通常，您需要按类型处理异常（例如`catch (SomeSpecificException)`）

某些派生的异常类型确实有额外的代码，例如

例如`SqlException`具有`Number`可用于控制流/信息的属性

```
catch (System.Data.SqlClient.SqlException sqlEx)
{
  if (sqlEx.Number == 1205) // Deadlock
     ...
  if (sqlEx.Number == -2) // = TimeOut
     ...
  // etc.
} 
```

*编辑*

实际上，`System.Exception` *确实*有一个受保护的[HRESULT](http://msdn.microsoft.com/en-us/library/system.exception.hresult(v=vs.95).aspx) [属性](http://msdn.microsoft.com/en-us/library/system.exception.hresult.aspx)。请参阅[如何确定 System.IO.IOException 的 HResult？](https://stackoverflow.com/questions/991537/how-do-i-determine-the-hresult-for-a-system-io-ioexception)以及 [如何在 C# 中获取异常错误代码](https://stackoverflow.com/questions/6893165/how-to-get-exception-error-code-in-c-sharp)

虽然它不能直接访问，但您可以通过`Marshal.GetHRForException(ex)`. 不同的异常有不同的 HRESULT，例如

```
System.Exception :  HRESULT COR_E_EXCEPTION (0x80131500)
System.SystemException : HRESULT COR_E_SYSTEM (0x80131501) 
```

也就是说，根据其他答案，捕获特定异常仍然是 IMO 的首选机制 - 大概 HRESULT 机制是 COM 宿醉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:21:58.757

您应该为那些只有您预期代码中可能出现的异常处理并提供有意义的消息，并且可以处理异常。任何您没有预料到的异常，都会显示一条通用消息并将消息记录到日志文件或事件日志中。您可能还想为未处理/意外异常设置策略，以便显示消息以联系支持人员并退出应用程序。

# python - Google App Engine 仅在数据存储区查看器中显示一个实体。如何让它显示我的所有实体？

> ID：13064320
> 
> 赞同：0
> 
> 时间：2012-10-25T08:12:02.137
> 
> 标签：python, google-app-engine, google-cloud-datastore, dashboard

当我转到 Google App Engine 仪表板查看存储在我创建的实体中的数据时，它并没有显示我的所有实体。我需要做些什么来查看我丢失的实体吗？

例如，这是我的代码的简化版本。

```
from google.appengine.ext import db

class ClassOne (db.Model):
  someVar = db.StringProperty()

class ClassTwo (db.Model):
  someOtherVar = db.IntegerProperty() 
```

在数据存储查看器中，ClassOne 显示在下拉列表中，但 ClassTwo 不显示。我需要将每个模型分成自己的文件吗？这在本地使用 Launcher 中的数据存储查看器以这两种方式工作。

*   这两个实体都列在下拉列表中。
*   当用户单击按钮时，我的 someOtherVar 会增加。数量确实是

在生产中，我看不到用户是否单击了这样的按钮，因为实体未显示在仪表板的数据存储查看器中。

当我尝试从仪表板运行 GQL 查询时，我还得到“空命名空间中没有结果”。作为返回值。

```
SELECT * FROM ClassTwo # returns empty 
```

或者，如果这种行为的根源在于某些未报告为错误或作为异常抛出的错误，请随时提出！我可以将注意力集中在调试脚本的每个组件上，而不是尝试从一些神秘的语法或设置解决方案中进行搜索。

# jquery - Jquery css选择菜单问题

> ID：13064322
> 
> 赞同：1
> 
> 时间：2012-10-25T08:12:08.890
> 
> 标签：jquery, html, css

嗨，我有一个 jquery，用于在选择时更改菜单颜色

```
.selected{
    background-color: red;
} 
```

```
$("#nav-container>li").click(function(){
    $(this).addClass('selected')
        .siblings()
        .removeClass('selected');
}); 
```

HTML如下：

```
<ul id="nav-container">
    <li id="welcome">
        <a href="/" >Welcome</a>
    </li>

    <li id="find">
        <a href="/find">Find</a>
    </li>

    <li id="talk">
        <a href="/talk">Talk</a>
    </li>

    <li id="events">
        <a href="/event">Events</a>
    </li>
</ul> 
```

颜色发生变化，但是当页面处于新页面或页面重新加载到新页面时，不再选择颜色。我还没有添加什么？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:15:28.627

jQuery 不知道您在页面重新加载后选择了哪一个，您必须`selected`通过服务器端代码 (php) 设置类或在页面加载时检查您在 jQuery 中的哪个页面并`selected`在元素上设置类.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:15:04.343

请记住，addClass 的效果只对当前文档生效。您可以使用 SessionID 和 PHP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:23:13.480

你可以试试这个：

```
$(function(){
    var $ul = $("#nav-container");
    var path = window.location.pathname;
    var $a = $('a[href="'+path+'"]', $ul);
    if ( $a && $a.length ) {
        var $li = $a.parent();
        $li.addClass('selected');
    }
}); 
```

并删除您拥有的点击功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:24:29.833

这是正常行为。Javascript 上下文特定于页面。如果您重新加载页面，即使某些 HTML 标记是相同的，它的 Javascript 设置属性也会被重置。

您可以使用 cookie 或服务器端代码（会话）实现持久元素突出显示。

如果您使用[jquery-cookie 插件](https://github.com/carhartl/jquery-cookie)，您可以[像这样](http://www.electrictoolbox.com/jquery-cookies/)设置 cookie ：

```
 $("#nav-container>li").click(function(){
        $(this).addClass('selected')
        .siblings()
        .removeClass('selected');
        $.cookie("selected", $(this).attr('id'), { path: '/' })
 });

 $(document).ready(function() {
        $("#" + $.cookie("selected")).addClass('selected')
 }); 
```

注意：没有测试此代码，但它应该可以工作。当然，用户需要启用 cookie 才能使用它。

# ruby - 通过 Cramp(Ruby) 和 SSE(HTML5) 实时更新

> ID：13064323
> 
> 赞同：1
> 
> 时间：2012-10-25T08:12:09.863
> 
> 标签：ruby, html, ruby-on-rails-3, server-sent-events, cramp

[我准备了一个示例应用程序，以使用Cramp(Ruby)](http://cramp.in/)和[SSE(HTML5)](http://www.html5rocks.com/en/tutorials/eventsource/basics/)从服务器实时获取更新。

通过访问 html 时出现以下错误`http://localhost/sse_time.html`

```
Errors:
Chrome:
  Uncaught Error: SECURITY_ERR: DOM Exception 18 sse_time.html:9
  Uncaught TypeError: Cannot read property 'key-preview' of undefined 

Firefox:
  Error: The character encoding of the HTML document was not declared. The document will render with garbled text in some browser configurations if the document contains characters from outside the US-ASCII range. The character encoding of the page must to be declared in the document or in the transfer protocol.
Line: 0

  Error: The connection to http://localhost:3000/time was interrupted while the page was loading.
  Line: 9 
```

**sse_time.html**

```
<!DOCTYPE html>
<html>
<body>
<h1>Getting server updates</h1>
<div id="result"></div>
<script>
  if (!!window.EventSource) {

    var source = new EventSource('http://localhost:3000/time');

    source.addEventListener('message', function(e) {
      console.log(e.data);
    }, false);

    source.addEventListener('open', function(e) {
      // Connection was opened.
      console.log('Connection was opened.');
    }, false);

    source.addEventListener('error', function(e) {
      if (e.readyState == EventSource.CLOSED) {
        // Connection was closed.
        console.log('Connection was closed.');
      }
    }, false);

  } else {
    document.getElementById("result").innerHTML="Sorry, your browser does not support server-sent events...";
  }
</script>

</body>
</html> 
```

**应用程序/动作/time_action.rb**

```
class TimeAction < Cramp::Action
  self.transport = :sse

  periodic_timer :send_latest_time, every: 5

  def send_latest_time
    render "Current time : #{Time.now}"
  end
end 
```

`line 9`在哪里`var source = new EventSource('http://localhost:3000/time');`

如果我`http://localhost:3000/time`在 chrome 中点击，它会在每 5 秒后显示时间，没有任何错误。

但是使用 PHP 代码可以很好地`http://localhost:3000/time`用`stream.php`in替换 URI`sse_time.html`

**流.php**

```
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache'); // recommended to prevent caching of event data.

/**
 * Constructs the SSE data format and flushes that data to the client.
 *
 * @param string $id Timestamp/id of this connection.
 * @param string $msg Line of text that should be transmitted.
 */
function sendMsg($id, $msg) {
  echo "id: $id" . PHP_EOL;
  echo "data: $msg" . PHP_EOL;
  echo PHP_EOL;
  ob_flush();
  flush();
}

$serverTime = time();

sendMsg($serverTime, 'server time: ' . date("h:i:s", time())); 
```

这里`stream.php`和`sse_time.html`居住在同一地点。

有人可以指导我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:19:14.073

参考[案例研究：STREAM CONGRESS 中的实时更新](http://www.html5rocks.com/en/tutorials/casestudies/sunlight_streamcongress/)

> 使用 EventSource 需要牢记的一个重要问题是不允许跨域连接。这意味着必须从与主 Rails 应用程序相同的 streamcongress.com 域提供 Cramp 应用程序。

我意识到 html 页面也需要成为 cramp 应用程序的一部分（尽管有替代方案）。因此，我进行了以下更改，并且成功了。

`app/actions/home_action.rb`基于[使用 Redis Pub/Sub + WebSockets 的 Cramp 聊天](https://github.com/lifo/cramp-pub-sub-chat-demo)修改

```
class HomeAction < Cramp::Action
  @@template = ERB.new(File.read(PocRailsCramp::Application.root('app/views/index.html.erb')))

  def start
    render @@template.result(binding)
    finish
  end
end 
```

的内容与问题本身`app/views/index.html.erb`的内容相同。`sse_time.html`

现在点击`http://localhost:3000`开始在浏览器控制台上每 5 秒显示一次服务器时间。

# php - 不同填充百分比的饼图

> ID：13064324
> 
> 赞同：3
> 
> 时间：2012-10-25T08:12:14.437
> 
> 标签：php, pie-chart

我想问一些关于 jquery 饼图或饼图的事情。我想制作饼图/轮子，其中每个切片的填充百分比不是像这样的 100%：

[http://i1191.photobucket.com/albums/z462/rikides/a.png](http://i1191.photobucket.com/albums/z462/rikides/a.png)

我已经使用 GD 饼图制作了基本饼图，但我真的不知道如何做或从哪里开始配置。有人能帮助我吗？我在这个问题上停留了 1 周，我尝试过用谷歌搜索，但找不到任何类似的教程。

**编辑**：我也尝试过使用 JP Graph，但到目前为止我所做的只是基本的饼图，如果可以使用 JP Graph，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:53:05.627

不幸的是，[Highcharts](http://www.highcharts.com/demo/pie-basic)、[Google Chart Tools](https://developers.google.com/chart/interactive/docs/gallery/piechart)、[wijmo](http://wijmo.com/wiki/index.php/Piechart)和[RGraph](http://www.rgraph.net/) **不**支持每个切片的单独直径。如果有人知道具有该功能的 API，请告诉我。

编辑：但是如果您已经熟悉 GD 并创建了一个基本的饼图，您可能只需要更改方法[imagefilledarc](http://php.net/manual/de/function.imagefilledarc.php)中每个切片的*$width*参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:07:05.403

像你一样，我搜索类似的东西。

我正在使用[http://www.highcharts.com/demo/pie-donut](http://www.highcharts.com/demo/pie-donut)并将外部部分分为 2 部分，即“填充值”和“未填充值”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-22T14:25:38.913

谷歌图表中有此选项。您可以选择像这样单独分解切片：

```
slices: {  
     1: {offset: 0.2},
     3: {offset: 0.3}                  
  } 
```

如果您将偏移量设置为负值，它将如下所示： [饼图](https://i.stack.imgur.com/vo918.png)

这个代码看起来像：

```
slices: {  
 1: {offset: -0.3} 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T08:15:32.910

如果你在 jquery 中有 exp，那么我建议你去[Highcharts](http://www.highcharts.com/demo/pie-basic)一个基于 jquery 的图表。

# linux-kernel - 当 PCI 中断使用 CPU 的两个内核时，“netif_rx(skb)”是否可能导致乱序？

> ID：13064326
> 
> 赞同：0
> 
> 时间：2012-10-25T08:12:23.670
> 
> 标签：linux-kernel

我正在使用 Linux 版本 2.6.32.28，我只是想知道：因为使用时每个 CPU 有一个队列`netif_rx(skb)`，并且如果 PCI 中断将使用 CPU 的两个内核处理（现在它只使用一个，另一个好问题是为什么），内核如何不弄乱接收包的顺序？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:08:27.997

在 Linux 版本 2.6.32.28 中，在这种情况下基本上使用 NAPI，如果第一个数据包到来，则生成中断并使用其相关的处理程序来处理数据包。

并且数据包处理基本上分两部分完成......

**1-> 硬中断** 在这种情况下，数据包仅在NIC的**DMA 引擎的帮助下被放置在内核内存中。**因此，不需要 CPU，并且为此数据包分配了**sk_buff 结构。**& 这个**sk_buff 的先锋**位于 CPU 积压中。

**2-> 软中断** 在这种情况下，会产生一个软中断，负责从 CPU 积压中删除数据包并为网络堆栈中的上层处理它。

＆对于您的问题，使用 2 个 cpu 核心，只使用一个 cpu 核心，因为在**NAPI**
中 ，如果在处理前一个数据包期间出现另一个数据包，则不会产生中断，但只有这个数据包在 linux-kernel 的帮助下被放置的DMA。＆运行中断只是拍摄数据包并继续处理。

# android - Nexus S 4G (SCH-i515)“您所在国家/地区无法安装此项目”

> ID：13064329
> 
> 赞同：1
> 
> 时间：2012-10-25T08:12:34.373
> 
> 标签：android, google-play

我无法在*Samsung Nexus S 4G (SCH-i515)上从***Google play**下载我的应用程序。**Google play**提示**“您所在国家/地区无法安装此项目”**。*****![在此处输入图像描述](../Images/64597868522f5e376119ea4e2e0ec1dc.png)*****

 *****设备来自美国，但用于乌克兰和乌克兰 IP 地址。

在开发者控制台中，我只为应用选择了乌克兰。

我的清单设置是：

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="com.android.vending.CHECK_LICENSE"/>
<supports-screens android:xlargeScreens="true"/> 
```

我必须更改清单中的某些内容还是必须更改设备上的某些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:41:34.567

Google Play 不会检查您的 GPS 或网络位置，它只会查看您使用的运营商。在 GSM 手机上，来自 SIM 卡的信息用于确定您的运营商。由于您拥有 CDMA Galaxy Nexus（我猜是威瑞森？）并且无法选择将 SIM 卡换成乌克兰卡，因此您的手机可能仍显示为美国威瑞森设备。

基本上，您必须以某种方式更改手机上存储的运营商信息。有一个名为 Market Enabler 的应用程序可以让您更改网络代码，但我不确定它是否适用于最新的 Android/Play 版本。网络代码列表在[这里](http://en.wikipedia.org/wiki/Mobile_Network_Code#U)。*****

# c++ - 函数参数变了：如何重构代码，尽量少变

> ID：13064330
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:12:39.040
> 
> 标签：c++, refactoring

有一个 C++ 函数可以计算一些东西（我不确定 C++ 在这里是否重要，无论如何......）。它在 50 个或更多地方被调用。现在事实证明，这个功能是错误的。为了正常工作，它还需要三个参数。

就必要更改的数量和紧凑性而言，如何最有效地重构此代码。

顺便说一句，新添加的参数使得为它们设置默认值是不合理的。它们应该始终传递给函数。

许多人要求举个例子。这里是：

```
//old syntax of function
int f(int a1, int a2)
{
    return a + b;
}

//new syntax of function
int f(int a1, int a2, int a3, int a4, int a5)
{
    if (a3 == 10)
    {
        return a1 + a2;
    }
    else
    {
        return a1 + a2 + a4 + a5;
    }
} 
```

**这个例子有帮助吗？我需要一种使用通用方法来执行此操作的方法，例如设计模式，重构原则，但不适用于特定示例...**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:14:28.290

您可以为这 3 个参数定义默认值，并且只需要更改它们必须位于的位置。或者`find`在整个项目的 IDE 中使用并更正它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:36:01.773

这真的取决于这三个论点的来源。如果我们不能有默认值并且不可能为额外参数创建一个通用模式，那么您可能别无选择，只能分组攻击 50 个调用中的每一个。在这种情况下，您将保留原始调用并制作一个名称稍有不同的直接副本。然后您逐渐移动，以便最终所有调用都使用额外参数调用新函数。然后，您可以退休旧的。

另一方面，如果我们可以从默认值开始，或者至少使它们独立于调用代码，那么以下可能是一个不错的计划。需要牢记的是，作为一个巨大的变化，这可能必须分阶段进行，以控制出现任何问题时的潜在影响。

首先，我会将函数的名称从`xxxx`where`xxxx_<tag>`更改`<tag>`为更改句柄 - 可能是来自缺陷跟踪器或更改管理系统的 bug #。然后我会创建一个名为的新函数`xxxx`，它只是调用`xxxx_<tag>`重新编译所有内容。到现在为止还挺好：

```
void xxxx_tag(int p1, int p2)
{
    // ....
}

void xxxx(int p1, int p2)
{
    xxxx_tag(p1, p2);
} 
```

接下来，我将更改 的签名`xxxx_<tag>`以添加额外的三个参数和对它的调用。现在我将再次重建：

```
void xxxx_tag(int p1, int p2, int p3, int p4, int p5)
{
    // ....
}

void xxxx(int p1, int p2)
{
    // XXX, YYY, and ZZZ and constants or at least can be derived at this point.
    xxxx_tag(p1, p2, XXX, YYY, ZZZ);
} 
```

这里的关键点也是为未来的维护者添加注释，描述为什么这个包装器存在。不幸的是，就这些更改中的一些而言，代码被抛在后面，其目的并不是很明显。

然后，我将计划分阶段进行 50 次更改，例如 5 或 10 组，以便您将原始呼叫更改为新呼叫：

```
xxxx(p1, p2); 
```

变成：

```
xxxx_tag(p1, p2, p3, p4, p5); 
```

调用代码的每个部分都可以单独测试，因此您很高兴（a）它像往常一样工作（即完全向后兼容）和（b）它修复了任何问题。

最后，一旦完成所有这些，您就可以进行一次更改以删除新功能`xxxx()`并重命名`xxxx_<tag>`为`xxxx`Again，您必须完全重建和测试。

**结论**

无论你走哪条路，我都会推荐：

1.  分阶段进行 - 这样可以最大限度地减少出错的风险。
2.  测试，测试和测试 - 再次，这减少了您遇到问题的机会。

# android - Android：使用 registerContentObserver 时的 cursor.close()

> ID：13064335
> 
> 赞同：0
> 
> 时间：2012-10-25T08:13:07.577
> 
> 标签：android, cursor, contentobserver

使用时是否必须关闭光标

```
 startManagingCursor(cursor); //I know its deprecated 
```

和

```
cursor.registerContentObserver(.. 
```

如果是这样，在哪里关闭它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:18:59.080

如果使用`startManagingCursor`您不需要关闭光标，Activity 会为您处理。

但如果你已经打电话`registerContentObserver`，你需要打电话`unregisterContentObserver`。通常您在 OnResume 中调用 registerContentObserver 并在 OnPause 中调用 unregisterContentObserver，但它可能会根据您执行的操作类型而改变`ContentObserver`。

# java - 无法运行程序“...\keytool.exe”：CreateProcess 错误=2

> ID：13064336
> 
> 赞同：1
> 
> 时间：2012-10-25T08:13:09.580
> 
> 标签：java, android, windows, eclipse, keytool

我是 Stack Overflow 的新手，所以如果我犯了错误，请不要对我不利。这是我的问题，我在 Eclipse 中创建了一个简单的 Android 应用程序，当我尝试运行它时出现此错误：

> > 生成最终存档时出错：无法创建密钥：无法运行程序“D:\Program Files\Java\jre7\bin\keytool.exe”：CreateProcess error=2，Le fichier spécifié est introuvable JAVA_HOME 设置为：D:\Program Files\Java\jre7 必要时更新，或者手动执行以下命令： "D:\Program Files\Java\jre7\bin\keytool.exe" -genkey -alias AndroidDebugKey -keyalg RSA -dname "CN=Android Debug, O=Android,C=US" -validity 10950 -keypass android -keystore C:\Users\Vincent.android\debug.keystore -storepass android LunarLander 未知的Android打包问题

我每次都尝试过用于 x64 和 x86 的 JDK 1.6 和 1.7。我正在运行 Windows 7 Ultimate x64。我尝试使用 cmd.exe 和资源管理器运行 keytool.exe（JRE 和 JDK 版本），但它说：

> > Windows 找不到“D:\Program Files\JAVA\jre7\bin\keytool.exe”。请确保您输入了正确的名称，然后重试。要搜索文件，请单击开始按钮，然后单击搜索。

认为这是“程序”和“文件”之间的空间问题，我尝试将 JDK 安装在“D:\Java\jdk ...”中。

**编辑 ：**

我找到了解决方案！您需要做的就是从注册表中的**HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options中删除****keytool.exe**。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:34:11.780

您可以使用以下步骤将“Java”添加到您的路径中。

[http://java.com/en/download/help/path.xml](http://java.com/en/download/help/path.xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:21:32.750

您需要将“D:\Program Files\JAVA\jre7\bin”添加到 PATH 系统变量中。设置 JAVA_HOME 不足以运行 BIN 文件夹中的内容。因此，只需将 bin 文件夹添加到 PATH，然后在“cmd”中运行“keytool”（从实际 bin 文件夹之外的任何位置）。如果可行，那么它也应该来自您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:53:41.263

谢谢大家，但我已经将“D:\Program Files\JAVA\jre7\bin\”添加到 PATH 系统变量中，但它不起作用。

我的问题来自文件本身，因为“D:\Program Files\JAVA\jre7\bin\”中的所有其他文件（javac.exe 等）都有效。**

# security - Instagram 如何锁定他们的照片上传私有 API 端点？

> ID：13064337
> 
> 赞同：4
> 
> 时间：2012-10-25T08:13:10.397
> 
> 标签：security, rest, instagram

我正在为我正在开发的移动应用程序构建 REST API。像 Instagram 一样，我正在考虑锁定一些端点，以便只能从我的移动应用程序访问它们（比如他们的照片上传端点）。

有没有人对他们如何将某些端点锁定到他们的应用程序有任何见解？我想一个可能的解决方案是使用共享密钥对这些特定请求进行签名，并在处理上传之前对其进行服务器端验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T15:46:33.643

看起来他们

1.  检查 User-Agent == "Instagram" 的请求标头
2.  检查是否设置了有效的身份验证 cookie
3.  使用某种哈希对他们的请求正文进行签名。

我不确定哈希是如何创建的。

查看一些文档，但看起来身份验证部分已被空白。

[https://github.com/mislav/instagram/wiki](https://github.com/mislav/instagram/wiki)

# javascript - 在javascript中增加grails值

> ID：13064338
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:13:13.430
> 
> 标签：javascript, jquery, grails

我一直在研究一个对我来说没有意义的javascript函数。我的脚本中有这个：

```
 function increment(){
     alert("incremented number ${inc++ }\n");
     } 
```

我在我的控制器中有这个来返回 inc 值：

```
 def test(){
    def inc = 1;
    [inc:inc]
    } 
```

在同一个 gsp 中，我有这个：

```
 <button onclick="increment()">click me</button> 
```

现在，当我第一次单击该按钮时，将显示一个警报，其中变量 inc 增加到 2。现在，当我再次单击它时，它不再增加，即使您单击它多少它也保持 2。它不再增加。每次单击按钮时，如何使它增加？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:15:28.947

无法通过 Javascript 更改您在 Grails 中定义的变量的值。

Grails 的工作方式如下：根据请求，找到并执行相应的脚本。该脚本返回一个 HTML 文档，可能包括 Javascript 函数，并将该文档发送到浏览器。

然后，您的 Javascript 函数可以在浏览器中运行。它无法通知 Grails 进行增量。

更新：如果您想在每次单击按钮时增加值，则必须在 Javascript 中定义一个变量，并在单击按钮时增加此变量。

# javascript - 有没有办法将“chrome.extension”库/参考/类添加到我的 html

> ID：13064349
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:14:22.640
> 
> 标签：javascript, browser, google-chrome-extension, cross-browser, firefox-addon

当我查看 Chrome 扩展插件时，有一个类或类似的东西叫做`Chrome.extension`

例如：

```
chrome.extension.onRequest.addListener(function(request, sender, response) {
  if (request.msg == 'page_capturable') {
    $('tip').style.display = 'none';
    $('capture........
    ........................
    ........................ 
```

[示例的 URL](http://code.google.com/p/chrome-screen-capture/source/browse/trunk/src/popup.js)

如您所见，此 chrome.extension 中有几个功能，例如 `onRequest`,`getBackgroundPage()`和其他...

我检查了 Firefox 浏览器，它也支持这个**chrome.extension** ......

我想尝试将此类添加到我的 html 文件中，以使用 JavaScript 或类似的东西启用此功能

我将尝试在**Internet Explorer**中使用它。

有没有人可以在这个话题上照亮我？也许是一个 URL 或它自己的包？

**顺便说一句**：我使用了 google chrome 扩展并设法将其转换为 Firefox 这是我证明 Firefox 支持这个 chrome.extension 的东西 [Chrome on Firefox](https://developer.mozilla.org/en-US/docs/Chrome)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:45:09.760

我找到了 chrome.extension 库。google 分享为 JS 文件

大多数功能都在那里，并且有几个空功能:(

希望它会帮助某人...

**[http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/chrome_extensions.js](http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/chrome_extensions.js)**

# c# - 在 C# 中在运行时更改表单大小

> ID：13064350
> 
> 赞同：17
> 
> 时间：2012-10-25T08:14:24.553
> 
> 标签：c#, resize

如何在运行时更改窗口窗体大小？

我看到了一些例子，但每个例子都需要 Form.Size 属性。这个属性可以在这里设置：http: [//msdn.microsoft.com/en-us/library/25w4thew.aspx#Y456](http://msdn.microsoft.com/en-us/library/25w4thew.aspx#Y456)，但我已经在可视化工具中创建了我的应用程序表单，并且表单是这样创建的：

```
static void Main()
{
    Application.Run(new Form());
} 
```

我如何设置该`Size`属性，然后通过`Form.Height`and`Form.Width`方法更改它？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-25T08:23:37.057

您不能更改 Form 的 Width 和 Height 属性，因为它们是只读的。您可以像这样更改表单的大小：

```
button1_Click(object sender, EventArgs e)
{
    // This will change the Form's Width and Height, respectively.
    this.Size = new Size(420, 200);
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-25T08:16:57.220

如果您想以编程方式操作表单，最简单的解决方案是保留对它的引用：

```
static Form myForm;

static void Main()
{
    myForm = new Form();
    Application.Run(myForm);
} 
```

然后，您可以在运行时使用它来更改大小（或您想做的其他事情）。尽管正如[箭头指出的那样，](https://stackoverflow.com/a/13064501/59303)您不能直接设置`Width`and`Height`而必须设置`Size`属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T08:16:42.650

为了调用它，您必须存储对表单的引用并将引用传递给 run 方法。然后你可以在 actionhandler 中调用它。

```
public partial class Form1 : Form
{
    public void ChangeSize(int width, int height)
    {
        this.Size = new Size(width, height);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-12T11:51:46.360

您可以通过在要更改大小的地方执行以下操作来更改表单的高度（将“10”替换为您的大小）：

```
this.Height = 10; 
```

这也可以通过宽度来完成：

```
this.Width = 10; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-07T13:00:53.053

像这样的东西对我来说很好：

```
public partial class Form1 : Form
{
    Form mainFormHandler;
...
}

private void Form1_Load(object sender, EventArgs e){
    mainFormHandler = Application.OpenForms[0];
   //or instead use this one:
   //mainFormHandler = Application.OpenForms["Form1"];
} 
```

然后你可以改变大小如下：

```
mainFormHandler.Width = 600;
mainFormHandler.Height= 400; 
```

或者

```
mainFormHandler.Size = new Size(600, 400); 
```

另一个有用的点是，如果你想改变`mainForm`另一个的大小`Form`，你可以简单地使用属性来设置大小。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-09T15:06:45.737

作为对上述答案的补充；不要忘记 Form MinimumSize 属性，以防您需要创建更小的表单。

示例如下：

```
private void SetDefaultWindowSize()
{
   int sizeW, sizeH;
   sizeW = 180;
   sizeH = 100;

   var size = new Size(sizeW, sizeH);

   Size = size;
   MinimumSize = size;
}

private void SetNewSize()
{
   Size = new Size(Width, 10);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-06T17:42:09.120

试试 this.ClientSize 而不是 this.Size：

```
private void Form1_Load(object sender, EventArgs e)
{
   this.ClientSize = new Size(mywidth, myheight);
} 
```

为我工作。

# windows-phone-7 - pivotItems wp7中的数据模板

> ID：13064355
> 
> 赞同：1
> 
> 时间：2012-10-25T08:15:02.463
> 
> 标签：windows-phone-7, xaml, windows-phone-7.1

我想在 wp7 中创建一个数据透视页：

```
 <Grid x:Name="LayoutRoot" Background="Transparent">
    <!--Pivot Control-->
    <controls:Pivot Title="MY APPLICATION">
        <!--Pivot item one-->
        <controls:PivotItem Header="item1">
            <Grid/>
        </controls:PivotItem>

        <!--Pivot item two-->
        <controls:PivotItem Header="item2">
            <Grid/>
        </controls:PivotItem>
    </controls:Pivot>
</Grid> 
```

我需要 pivoItems 将与我的自动绑定， `List<Article>`并且类 Article 定义如下：

```
 public class Article
{
    private string _logoUrl;
    public string LogoUrl
    {
        get { return _logoUrl; }
        set { _logoUrl = value; }
    }
    private string _title;
    public string Title
    {
        get { return _title; }
        set { _title = value; }
    }
    private string _descrption;
    public string Descrption
    {
        get { return _descrption; }
        set { _descrption = value; }
    }
} 
```

如何使用 Datatemplate 将每个 PivotItem 与每个 Article 绑定（我需要每个 Article 的标题将显示在 PivotItem 的标题和 webbrowser 中的描述中，因为它是 HTML）

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:28:28.327

`PivotItem`首先，要为每篇文章创建一个，只需使用以下`ItemsSource`属性：

```
<controls:Pivot Title="MY APPLICATION" ItemsSource="{Binding Path=TheListOfArticles}"> 
```

要更改标题，请覆盖`HeaderTemplate`：

```
<controls:Pivot ItemsSource="{Binding Path=TheListOfArticles}" Title="MY APPLICATION">
    <controls:Pivot.HeaderTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=Title}" />
        </DataTemplate>
    </controls:Pivot.HeaderTemplate>
</controls:Pivot> 
```

以同样的方式，覆盖`ItemTemplate`以定义每个`PivotItem`将如何显示：

```
<controls:Pivot.ItemTemplate>
    <DataTemplate>
        <!-- whatever -->
    </DataTemplate>
</controls:Pivot.ItemTemplate> 
```

# jquery - Jquery悬停在页面加载时激活而不是悬停

> ID：13064358
> 
> 赞同：0
> 
> 时间：2012-10-25T08:15:08.800
> 
> 标签：jquery

我写了一个小脚本，当一个 div 悬停在上面时，会弹出一个位于 div 底部的选项卡（通过 css 中的溢出隐藏）。

当我直接加载页面时它工作得很好——但是，当我第一次从链接访问页面时，选项卡已经弹出，并覆盖了整个 div。当我将鼠标悬停（或刷新页面）时，它会立即弹回并开始正常工作。

谁能帮助我在这里做错了什么？

```
$(document).ready(function() {
   $(".linkbox").hover(
   function(){
     $(".linkbox_text", this).filter(':not(:animated)').animate({
        marginTop:'-175px'
     },'400','swing');
   },

   function() {
     $(".linkbox_text", this).animate({
        marginTop:'-35px'
     },'400','swing');
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:35:39.873

尝试在准备好的文档上重新定位您的 div

```
$(document).ready(function() {

    // reposition the div on document ready
    $(".linkbox .linkbox_text").css({marginTop:'-35px'});

   $(".linkbox").hover(
   function(){
     $(".linkbox_text", this).filter(':not(:animated)').animate({
        marginTop:'-175px'
     },'400','swing');
   },

   function() {
     $(".linkbox_text", this).animate({
        marginTop:'-35px'
     },'400','swing');
   });
}); 
```

# asp.net - 使一个 ASP .net Web 应用程序脱机

> ID：13064360
> 
> 赞同：3
> 
> 时间：2012-10-25T08:15:09.727
> 
> 标签：asp.net

基本上是一个我们分发给客户的网络应用程序，其中一个人将试用它，所以我需要能够在某个时候将其关闭。不想将结束日期放在 web.config 中，以防万一他们发现他们可以更改它，我想在 global.asax 中放置一些带有硬编码日期的东西，但是我不确定我是如何做到的可以“关闭”应用程序。我正在考虑检查 Authenticate Request 部分中的日期并简单地重定向到显示您的试用已完成（或类似内容）的页面，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:29:48.160

你可以这样做`global.asax`：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
   if(DateTime.UtcNow > cTheTimeLimitDate)
   {
        HttpContext.Current.Response.TrySkipIisCustomErrors = true;
        HttpContext.Current.Response.Write("...message to show...");
        HttpContext.Current.Response.StatusCode = 403;
        HttpContext.Current.Response.End();
        return ;    
   }    
} 
```

这比将它放在 web.config 上更安全，但没有什么是足够安全的。将他们重定向到一个页面，或者不向他们显示消息，或者你的想法更好。

要重定向到页面，您还需要检查是否调用了页面，代码如下：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
   string cTheFile = HttpContext.Current.Request.Path;
   string sExtentionOfThisFile = System.IO.Path.GetExtension(cTheFile);
   if (sExtentionOfThisFile.Equals(".aspx", StringComparison.InvariantCultureIgnoreCase))
   {
     // and here is the time limit.
     if(DateTime.UtcNow > cTheTimeLimitDate)
     {
        // make here the redirect
        HttpContext.Current.Response.End();
        return ;    
    }    
  }
} 
```

为了让它变得更加困难，您可以制作一个自定义 BasePage ，所有页面都来自它（而不是来自`System.Web.UI.Page`），并在那里对页面的呈现设置限制 - 或者在每个页面呈现的顶部显示一条消息，即时间是结束。

```
public abstract class BasePage : System.Web.UI.Page
{
    protected override void Render(System.Web.UI.HtmlTextWriter writer)        
    {
        if(DateTime.UtcNow > cTheTimeLimitDate)
        {
            System.IO.StringWriter stringWriter = new System.IO.StringWriter();

            HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter);

            // render page inside the buffer
            base.Render(htmlWriter);

            string html = stringWriter.ToString();

            writer.Write("<h1>This evaluation is expired</h1><br><br>" + html);         
        }
        else
        {
            base.Render(writer);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:33:36.923

只需添加 app_offline.htm，您甚至可以为您的用户创建一条好消息。此外，让网站重新上线也很容易，只需删除或重命名 app_offline.htm。

[http://weblogs.asp.net/dotnetstories/archive/2011/09/24/take-an-asp-net-application-offline.aspx](http://weblogs.asp.net/dotnetstories/archive/2011/09/24/take-an-asp-net-application-offline.aspx)

# ios5 - iOS UIWebView 中的 wysihtml5 文本编辑器

> ID：13064361
> 
> 赞同：1
> 
> 时间：2012-10-25T08:15:09.843
> 
> 标签：ios5, uiwebview, wysihtml5

我正在尝试使用 wysihtml5 的简单实现来执行富文本编辑（并直接存储 html 以便能够以标准格式保存格式）。

为此，我已经像这样实现了 wysihtml5

```
<form>
    <textarea id="textarea"></textarea>
</form>

<script src="./wysihtml5/parser_rules/simple.js"></script>
<script src="./wysihtml5/dist/wysihtml5-0.3.0.js"></script>
<script>    
  var editor = new wysihtml5.Editor("textarea", {
    parserRules:    wysihtml5ParserRules,
    useLineBreaks:  false
  });
</script> 
```

为了能够在 iOS 中操作它，我使用`stringByEvaluatingJavaScriptFromString`as

```
- (void) setText:(NSString *)text
{                              
    [self.webView 
        stringByEvaluatingJavaScriptFromString:[NSString 
                                 stringWithFormat:@"editor.setValue(%@)", text]];
}
- (NSString *)getText
{
    NSString *text = [self.webView 
                    stringByEvaluatingJavaScriptFromString:@"editor.getValue()"];
    return text;
} 
```

但是，set 和 get 都不起作用（总是返回一个空字符串）。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T07:18:43.523

```
- (void)insertHTMLContent:(NSString *)HTMLBody
{
    if (HTMLBody) {
        NSString *query = [NSString stringWithFormat:@"editor.composer.commands.exec('insertHTML', '%@')", HTMLBody];
        [self stringByEvaluatingJavaScriptFromString:query];
    }
}

- (NSString *)getContentHtml {
    return [self stringByEvaluatingJavaScriptFromString: @"editor.getValue()"];
} 
```

# sql - SQL Server INSERT ... SELECT 语句不会解析

> ID：13064362
> 
> 赞同：1
> 
> 时间：2012-10-25T08:15:12.300
> 
> 标签：sql, sql-server, sql-server-2005, stored-procedures

我在 SQL Server 2005 中收到以下错误消息

> *消息 120，级别 15，状态 1，过程 EPIN，第 37 行*
> *INSERT 语句的选择列表包含的项目少于插入列表。SELECT 值的数量必须与 INSERT 列的数量相匹配。*

我已将选择列表和插入列表复制并粘贴到 excel 中，并验证每个列表中的项目数量相同。两个表的附加主键字段都没有在插入语句或选择列表中列出。我不确定这是否相关，但可能是可疑的。

这是我的存储过程的来源：

```
 set ANSI_NULLS ON
 set QUOTED_IDENTIFIER ON
 go

 -- =============================================
 -- Author:     Kristian Manuel
 -- Create date: 10/3/2012
 -- Description:    
 -- =============================================
 ALTER PROCEDURE [dbo].[EPIN] 
-- Add the parameters for the stored procedure here
     @PLUCODE varchar(30),      --Table tblPolicy
     @ECPAYFEES numeric(18,2),
     @COSTPAYABLE numeric(18,2),
     @RETAILPRICE numeric(18,2),
     @DENOMINATION varchar(50),
     @CARDNAME varchar(50),
     @DistributorID varchar(8),
     @AccntID decimal(18,0)

 --PO1  
 AS
 BEGIN
     -- SET NOCOUNT ON added to prevent extra result sets from
     -- interfering with SELECT statements.
     SET NOCOUNT ON;

     INSERT INTO [ECPAY-PC].[GENESIS].[dbo].[tblPolicy]
     ( 
       PolicyID                 ,
       AccountTID               ,
       DistributorID            ,
       CARDNAME                 ,
       DENOMINATION             ,
       RETAILPRICE              ,
       COSTPAYABLE              ,
       ECPAYFEES                ,
       PLUCODE 
     ) 
     SELECT 
         t.* 
     FROM
        (SELECT 
            AccountTID = @AccntID, 
            DistributorID = @DistributorID, 
            CARDNAME = @CARDNAME,      
            DENOMINATION = @DENOMINATION, 
            RETAILPRICE = @RETAILPRICE, 
            COSTPAYABLE = @COSTPAYABLE,      
            ECPAYFEES = @ECPAYFEES, 
            PLUCODE = @PLUCODE) t,
        [ECPAY-PC].[ECPNWEB].[dbo].[account] a
     WHERE
        a.AccntID = t.AccountTID --for account
 END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:19:26.820

错误消息非常清楚 - 您的`INSERT`语句需要**9 列**

```
 1\. PolicyID                 
   2\. AccountTID               
   3\. DistributorID            
   4\. CARDNAME                 
   5\. DENOMINATION             
   6\. RETAILPRICE              
   7\. COSTPAYABLE              
   8\. ECPAYFEES                
   9\. PLUCODE 
```

要填写 - 但您`SELECT`只提供**8 个值**

```
 1\. AccountTID               
   2\. DistributorID            
   3\. CARDNAME                 
   4\. DENOMINATION             
   5\. RETAILPRICE              
   6\. COSTPAYABLE              
   7\. ECPAYFEES                
   8\. PLUCODE 
```

看来您**没有**为您的声明中的`PolicyID`列（ yoru 中的第一列）提供任何值.....`INSERT``SELECT`

**更新：**如果您`PolicyID`的目标表中的列是“自动增量”（或`IDENTITY`）列 - 那么您**不能**在您的`INSERT`语句中包含！

只需使用这个：

```
 INSERT INTO [ECPAY-PC].[GENESIS].[dbo].[tblPolicy]
 (AccountTID, DistributorID, CARDNAME, DENOMINATION,
  RETAILPRICE, COSTPAYABLE, ECPAYFEES, PLUCODE)

    SELECT (that provides those 8 values) .... 
```

如果您`PolicyID`从`INSERT`语句中省略了，那么 SQL Server 将自动为其分配一个`identity`值，并且您的`INSERT .... SELECT`语句将不起作用，因为您向`INSERT`需要 8 列的 an 提供 8 个值...

# asp.net - asp.net mvc4中的Gridview

> ID：13064371
> 
> 赞同：1
> 
> 时间：2012-10-25T08:15:33.270
> 
> 标签：asp.net, gridview, asp.net-mvc-4, syncfusion

我正在研究 MVC4 Gridview。

我看了视频[MVC4 Gridview](https://www.youtube.com/watch?v=E5HwUTYMbjM)

在这段视频中，叙述者说要添加 4 个 dll 文件，即

1.  Syncfusion.Core.dll
2.  Syncfusion.Grid.Mvc.dll
3.  Syncfusion.Linq.Base.dll
4.  Syncfusion.Shared.Mvc.dll

在此列表中，我下载了**文件 1（Syncfusion.Core.dll）**，但找不到其他 3 个文件的任何帮助，所以我该怎么做才能下载它们或请告诉它们的任何替代品。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:26:47.537

如果您访问此链接[http://www.syncfusion.com/products/user-interface-edition/aspnet-mvc/grid](http://www.syncfusion.com/products/user-interface-edition/aspnet-mvc/grid)，您应该会找到要下载的演示和软件包。

# python - Python 中的基本事件循环

> ID：13064373
> 
> 赞同：5
> 
> 时间：2012-10-25T08:15:44.390
> 
> 标签：python, event-loop

> **可能重复：**
> [Python 3 的事件循环实现？](https://stackoverflow.com/questions/6812397/event-loop-implementation-for-python-3)

我正在尝试在 python2.7 中实现事件循环。我希望能够根据时间事件触发事件，并作为另一个动作发生的结果。

我知道我可以利用`select`做类似的事情。

这是正确的前进方式还是我错过了更好的方式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T08:32:43.710

事件循环是处理/处理事件的循环。

事件是系统中发生的某些代码部分可能感兴趣的事情。

一开始，所有组件都会注册事件，然后触发一个 init 事件：

我只是在这里提供原始代码：

```
listeners = [component1, component2, component3]
eventqueue.add(InitEvent())
while True:
    event = eventqueue.pop()
    for listener in listeners:
        listener.handle_event(event) 
```

an 如何`eventqueue`实现以及`Event()`类层次结构是什么样的留给读者练习。注意使用`threading.(R)Lock`s 等`.pop()`方法。

此外，您可以为每种事件类型设置单独的侦听器列表。因此，一个事件可以通过调用它（或其`.fire()`方法）来“触发”，并具有一种机制来识别它自己和父级的所有侦听器，以便通知他们有关事件的信息。

在任何情况下，听众可以根据事件自行决定如何处理。

# ios - iPhone 应用启动时的两个状态栏

> ID：13064374
> 
> 赞同：2
> 
> 时间：2012-10-25T08:15:47.343
> 
> 标签：ios, ios-simulator, uistatusbar, uilaunchimagefile

这毫无意义，但突然间，我正在开发的 iPhone（iOS 5.0 目标）应用程序之一**以两 (2) 个状态栏启动**！此外，并非总是如此，只有与某些人进行一些安装。

这是我能找到的唯一相关问题：[为什么在启动我的应用程序时会看到双状态栏？](https://stackoverflow.com/questions/1758376/why-do-i-see-double-status-bars-when-starting-my-app)

App 有**三个 default.png 文件**，都是通过打开 iPhone 模拟器并截屏创建的。这些文件被拖放到项目目标“启动图像”部分。没有黄色警告三角形，所以一切都应该没问题：

```
Default.png           320 x 480  (iPhone simulator)
Default@2x.png        640 x 960  (iPhone Retina 3.5-inch simulator)
Default-568h@2x.png   640 x 1136 (iPhone Retina 4.0-inch simulator) 
```

有什么想法可能是错的吗？[Apple 文档](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)似乎说这个设置是正确的 - 但现在我什至开始在启动时看到 2 个状态栏！

**更新：**

越来越疯狂！我编辑了前两个文件 - 并按原样**保存而不进行编辑**。问题已解决。与第三张图片相同 - 问题仍然存在！**iPhone Retina 4寸模拟器开始使用3.5寸启动图**！！！

是的，我给照片贴上了标签。用不同的数字。

所以前两种情况可能是一些图像文件格式问题，而第三种情况看起来像是 Apple 缺陷。还有其他猜测吗？

Xcode项目目标摘要框内有**Default-568h@2x.png**图片，是编号正确的真实图片，没有黄色警告标志。该文件确实存在于文件系统中，与其他两个文件位于同一文件夹中，并且包含在“复制捆绑资源”构建阶段。我还能检查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:25:33.397

我不确定为什么会不规律地发生这种情况，但我想我有一个想法。当您说您使用 iOS 模拟器截屏时，状态栏可能已保存为图像的一部分。然后，iOS 显示您的 Default.png 被压缩了 20 像素，从而在启动过程中产生了两个状态栏的错觉。

# php - 解析错误：语法错误，意外的 T_FUNCTION

> ID：13064376
> 
> 赞同：-2
> 
> 时间：2012-10-25T08:15:58.413
> 
> 标签：php

> **可能重复：**
> [解析错误：语法错误，意外的 T_FUNCTION 第 10 行？帮助？](https://stackoverflow.com/questions/4949573/parse-error-syntax-error-unexpected-t-function-line-10-help)
> [参考 - 这个错误在 PHP 中是什么意思？](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php)

这是导致错误的代码。

```
$remaining = array_filter($allmodels, function ($var) use ($existmodels) {
                return !in_array($var, $existmodels);
        }); 
```

代码的逻辑是（下面都是数组）

```
$remaining = $allmodels - $existmodels; 
```

我认为我的 PHP 版本在服务器中已过时。是不是问题。如何创建类似的代码片段？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:18:25.907

注意：当然全局不是一个好习惯

```
function fil($var) {
 global $existmodels;
 return !in_array($var, $existmodels);
}

$remaining = array_filter($allmodels, 'fil'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:27:47.407

我是 OO 编程的忠实粉丝，所以只是为了好玩：

```
class MyArrayOperations
{
  private $base;

  public function __construct(array $base)
  {
    $this->base = $base;
  }

  public function dif (array $vars ) 
  {
    $result = array();
    foreach ( $this->base as $base )
    if(!in_array($base, $vars))
      $result[] = $base;
    return $result;
  }

$result = (new MyArrayOperations($allmodels))->dif($existmodels); 
```

该类可以放在单独的文件中以供重用，然后只需使用 oneliner。而且，当然可以使用一种方便的数组操作来扩展该类。

**更新**

我意识到 oneliner 只能在 php 5.4+ 中工作，所以对于旧版本使用这个：

```
$arrayops = new MyArrayOperations($allmodels);
$result = $arrayops->dif($existmodels); 
```

结果在[Codepad](http://codepad.org/A3Ut1tgl)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:32:55.713

将以下代码添加到 htaccess 解决了问题

```
# Use PHP 5.3
AddType application/x-httpd-php53 .php 
```

# sql - Oracle，无法从同一列获取详细信息

> ID：13064378
> 
> 赞同：0
> 
> 时间：2012-10-25T08:16:07.273
> 
> 标签：sql, oracle, entity-attribute-value

我有一个名为 PARAMETER 的表，如下所示：

```
ID - number
NAME - varchar2
VALUE - varchar2 
```

我有这个查询女巫正在从字符串中“提取”日期：

```
SELECT * from PARAMETER
where (NAME = 'From') and SUBSTR(VALUE, 1, 2)>='01' 
and SUBSTR(ALUE, -7, 5)>='11' and SUBSTR(VALUE, -4, 4) >='2012' 
```

`where (NAME = 'From')` 现在我需要 再次运行它只改变：`where (NAME = 'To')`

并比较结果。我找不到办法做到这一点。有诀窍吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:20:29.423

您必须查询该表两次并比较两个子查询的结果，例如：

```
with v_from as (
  SELECT * from PARAMETER
  where (NAME = 'From') and SUBSTR(VALUE, 1, 2)>='01' 
  and SUBSTR(VALUE, -7, 5)>='11' and SUBSTR(VALUE, -4, 4) >='2012'),
v_to as (
  SELECT * from PARAMETER
  where (NAME = 'From') and SUBSTR(VALUE, 1, 2)>='01' 
  and SUBSTR(VALUE, -7, 5)>='11' and SUBSTR(VALUE, -4, 4) >='2012')
select f.id, f.name, f.value as from_value, t.value as to_value 
from v_from f
join v_to t on f.id = t.id 
```

这假设您始终同时具有 to 和 from 值；如果没有，您将不得不使用外部联接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:37:16.800

```
Select * From Parameter
Where Name='From'
AND TO_DATE(VALUE, 'DD/MM/YYYY') >= TO_DATE('01/11/2012', 'DD/MM/YYYY')
AND TO_DATE(VALUE, 'DD/MM/YYYY') <= TO_DATE('20/11/2012', 'DD/MM/YYYY')
UNION
Select * From Parameter
Where Name='To'
AND TO_DATE(VALUE, 'DD/MM/YYYY') >= TO_DATE('01/11/2012', 'DD/MM/YYYY')
AND TO_DATE(VALUE, 'DD/MM/YYYY') <= TO_DATE('20/11/2012', 'DD/MM/YYYY') 
```

这将为您提供从 01/11/2012 到 20/11/2012 的所有日期以及在该期间结束的所有日期。我不知道那是不是你要求的。

# validation - 设置 symfony2 路由中需要的参数

> ID：13064380
> 
> 赞同：0
> 
> 时间：2012-10-25T08:16:09.767
> 
> 标签：validation, symfony, parameters, routing

长话短说，我有一个表格，我希望 id 字段是强制性的，也是一个数字。基于 symfony2 的书，这应该可以通过以下路由轻松实现：

```
acme_demo_users_save:
    pattern:  /userSave
    defaults: { _controller: AcmeDemoBundle:User:save, _format: ~ }
    requirements:
        _method: POST
        id: \d+ 
```

确实检查了方法要求，因为如果我尝试执行获取，它会引发错误。但是，不执行任何类型的参数验证。我可以提交带有或不带有 id 的表单。

我错过了什么吗？参数是否仅针对 GET 进行验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:21:04.837

该路由不知道如何获取 ID 参数。编辑其模式如下：

```
acme_demo_users_save:
    pattern: /userSave/{id}
    ... 
```

所以 url 看起来像[http://mysite.com/userSave/12](http://mysite.com/userSave/12)（12 是 id）

如果您需要通过 post 请求提交 ID，只需在表单中添加验证约束并在路由中省略 id 验证

# javascript - ajax获取空值

> ID：13064381
> 
> 赞同：1
> 
> 时间：2012-10-25T08:16:17.550
> 
> 标签：javascript, jquery, ajax

我的代码可以在 Chrome 控制台中获取数据

但无法在我的程序中获取数据

像这样的代码：

```
$(document).ready(function () {
    var theme = '';
    var source = [];
    var rsps = '';

    $.ajax({
        url: '@Url.Content("~/Home/RoleMenus")',
            type: "GET",
            cache: false,
            success: function(response, status, xhr) {
                rsps = response;
                source = eval(response);
            },
            error: function(XMLHttpRequest,textStattus,errorThrown) {
                $('#jqxErrorMsg').html(errorThrown);
            }
        });

        for(var src in source) {
            if (src.items.legth > 0) {
                src.expanded = true;
            }
        }

        // Create jqxTree
        $('#jqxTree').jqxTree({ source: source, theme: theme});
        $('#jqxTree').bind('select', function (event) {
                var args = event.args;
                var item = $('#jqxTree').jqxTree('getItem', args.element);

                for (var menu in source[0]) {
                    if (item.label == menu.label) {
                        window.location = menu.actionUrl;
                        //break;
                    }
        }
            });
    }); 
```

=====更新===== 如果我移动，响应是正确的

```
 // Create jqxTree
 $('#jqxTree').jqxTree({ source: source, theme: theme}); 
```

进入`success: function(response, status, xhr) {}`

菜单显示正确

但`source`变量在外面仍然没有价值

=====解决了====

```
 for (var menu in source[0]) 
```

应该

```
for (int i=0;i<source[0].length;i++) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:51:57.270

ajax 调用是异步的，因此源变量可能尚未初始化。试着放

```
 for(var src in source) {
            if (src.items.legth > 0) {
                src.expanded = true;
            }
        }

        // Create jqxTree
        $('#jqxTree').jqxTree({ source: source, theme: theme}); 
```

在成功函数中。

# c# - HandleDestroyed 和 HandleCreated 不匹配

> ID：13064392
> 
> 赞同：2
> 
> 时间：2012-10-25T08:16:47.290
> 
> 标签：c#, winforms

在我的 C# 项目中，我有一个跟踪一些文本框的静态类。需要从列表中删除文本框以防止内存泄漏。

我有一个静态函数可以将文本框添加到列表中：

```
public static void Add(TextBox tb)
{
    tb.HandleCreated += new EventHandler(TextBoxHandleCreated);
}

static void TextBoxHandleCreated(object sender, EventArgs e)
{
     TextBox tb = sender as TextBox;
     tb.HandleDestroyed += new EventHandler(OnHandleDestroyed);

     tbList.Add(tb);
}

static void OnHandleDestroyed(object sender, EventArgs e)
{
    // Remove it
    Remove(sender as Control);
} 
```

我从`UserControl`我的`Form`. 在我调用的删除函数中，`c.HandleDestroyed -= OnHandleDestroyed;`因此我不会使控件保持活动状态。

该`Remove`函数是一个简单的循环检查和删除：

```
public static void Remove(Control c)
{
    foreach (Control cl in cList)
    {
        if (c.Equals(cl))
        {
            c.HandleDestroyed -= OnHandleDestroyed;
            cList.Remove(cl);
            //break;
        }
    }
} 
```

问题是，当我的对话框显示然后销毁时，我希望创建的和销毁的匹配，但事实并非如此。我得到的创造多于毁灭。

为什么呢？

# c# - 根据索引将 ListBox 项与 ListView 项进行比较

> ID：13064393
> 
> 赞同：0
> 
> 时间：2012-10-25T08:16:50.017
> 
> 标签：c#, listview, listbox

我是 C# 的新手。在我的项目中，我有两个控件 ListBox 和 ListView

```
ListBox --> lbxEmpName
ListView --> lvEmpDetails 
```

我尝试了以下代码：

```
 if (lvEmpDetails.Items.Count > 0)
       {
           for (int intCount = 0; intCount < lbxEmpName.Items.Count; intCount++)
           {
              for (int intSubCount = 0; intSubCount < lvEmpDetails.Items.Count; intSubCount++)
              {
                 if (lvEmpDetails.Items[intSubCount].Equals(lbxEmpName.Items[intCount]))
                 {
                    lbxEmpName.Items.Remove(lbxEmpName.Items[intCount]);
                 }
              }
           }
       } 
```

如果我运行上面的代码，ListView Items 和 ListBox Items 之间没有匹配项（事实上必须有一些匹配项）。当我调试我的代码时，我看到了以下内容：它说的是`SelectedItem`我在这里给出`Items`（这就是我的程序不匹配项目的原因）
为什么它显示`SelectedItem = ""`而不是`Items`？我在我的代码中做错了吗？请建议。

![在此处输入图像描述](../Images/02363b43b13a7ccd208addb6ca0f7c27.png) ![在此处输入图像描述](../Images/72be17a34336f5b81b0990845d4c1d2e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:29:47.213

ListView`Items`包含类型为 的对象`ListViewItem`。因此，将它们与 ListBox 中的对象进行比较是没有用的`Items`。
如果你想比较他们的文本，你必须这样写：

```
if (lvEmpDetails.Items[intSubCount].Text == (string)lbxEmpName.Items[intCount])
{
     // Do something here
} 
```

请注意，a`ListViewItem`可以有多个子项，并且其`Text`属性返回其数据的第一列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:29:13.163

比较要比较的字符串值，而不是对象本身。

# c# - 使用异步 BeginSend 方法

> ID：13064394
> 
> 赞同：1
> 
> 时间：2012-10-25T08:16:56.573
> 
> 标签：c#, sockets, asynchronous

如果您查看此[`Socket.BeginSend()`](http://msdn.microsoft.com/en-us/library/7h44aee9.aspx)方法的签名：

```
public IAsyncResult BeginSend(
    byte[] buffer,
    int offset,
    int size,
    SocketFlags socketFlags,
    AsyncCallback callback,
    Object state
) 
```

我不明白`buffer`和`state`参数之间的区别。我有一个自定义类（包含 Socket 字段和其他自定义属性）。

通过创建一个字节数组并使用第一个参数（因此在缓冲区中）发送它们，或者最好使用第六个参数（状态对象）发送它们，发送到另一端的最佳方法是什么？

如果我在状态下发送它们，那么缓冲区用于什么？如果我将它们发送到缓冲区中，状态是否仅用于 StateObject 类？

还有一件事，我有许多自定义（和不同）类，我想发送到另一端，我将不得不做一些代码，这些代码会被某些参数“拆分”。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:42:40.370

在 .NET 中`BeginXxx`/ `EndXxx`async 模式通常看起来像：

```
IAsyncResult BeginXxx(..., AsyncCallback callback, Object state);
SomeResult EndXxx(IAsyncResult result); 
```

状态对象是您传递的任何对象，以便您可以`EndXxx`通过调用`IAsyncResult.AsyncState`属性在回调或方法中检索状态。

state 参数仅用于支持这种模式，它不用于通过套接字发送任何内容。只有缓冲区中的数据会通过套接字发送。

我不太明白你问题的最后一部分，但是如果你想通过套接字发送对象，你可以简单地将你的对象序列化为 a `byte[]`，通过套接字发送它，然后在另一端反序列化它。如果这不是你要问的，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:03:22.610

@Marcus 的回答适合您问题的第一部分；状态对象不会通过网络发送，只是为了让您可以将`EndXXX`调用与调用对象的对象相关联`BeginXXX`。

第二部分：

> 我有许多自定义（和不同）类，我想发送到另一端，我将不得不做一些代码，这些代码会被某些参数“拆分”。怎么做？

为此，您需要一个协议。最简单的方法是伪：

1.  将要发送的对象 O 序列化为大小为 S 的字节数组 B
2.  发送 S，例如可以是`int`一个字节数组 ( [`BitConverter.GetBytes()`](http://msdn.microsoft.com/en-us/library/de8fssa4.aspx))。
3.  接收器接收前四个字节并重建`int`，所以它现在知道 S。
4.  发送 B 的所有字节
5.  Receiver 一直读取直到它接收到 S 个字节，因此它可以重构 B 并反序列化对象 O。

# makefile - .PHONY 在 linux makefile

> ID：13064399
> 
> 赞同：0
> 
> 时间：2012-10-25T08:17:12.160
> 
> 标签：makefile, gnu, gnu-make

```
SUBDIRS = foo bar baz

.PHONY: dirs $(SUBDIRS)

dirs: $(SUBDIRS)

$(SUBDIRS):

@echo $@

@ls $@ 
```

任何人都可以帮我理解这个make-file吗？如果可能，请向我解释每条语句（我们为什么需要它？目的是什么？等）

这个make-file究竟是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:50:10.410

它有错误的格式，所以我只能猜测它之前是什么......好吧，它是：

第一行将列表“foo bar baz”分配给名为 SUBDIRS 的变量

第二行是使所有指定目标“语音”的特殊命令-您可以调用“make dirs”或“make foo”，它会找到具有该名称的目标并执行它，但它不是具有该名称的实际文件（像往常一样非虚假目标）

第三个 - 创建名为“dirs”的目标，这取决于 SUBDIRS 变量的值。空格分隔的列表。这个目标没有实际行动

第四行为 SUBRIDS 变量内容创建规则，没有依赖关系。文本的其余部分是必须执行以“制作”此目标的操作（因此，在您的情况下 - 如果您只调用“make”，它将调用“make dirs”（因为它是第一个目标），这取决于foo、bar 和 baz - 所以这些目标将被调用。为了执行这些目标中的每一个，make 将调用 echo 和 ls - 所以最终你会得到这三个目录名称和它们的文件列表）

# python - 重新采样到 DatetimeIndex 会引发错误

> ID：13064400
> 
> 赞同：0
> 
> 时间：2012-10-25T08:17:14.010
> 
> 标签：python, time-series, pandas

我创建了一个 DatetimeIndex，我想用该索引重新采样数据。当我这样做时，我得到一个例外：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/pandas-0.8.1-py2.7-linux-i686.egg/pandas/core/generic.py", line 188, in resample
limit=limit, base=base)

  File "/usr/local/lib/python2.7/dist-packages/pandas-0.8.1-py2.7-linux-i686.egg/pandas/tseries/resample.py", line 41, in __init__
    self.freq = to_offset(freq)

  File "/usr/local/lib/python2.7/dist-packages/pandas-0.8.1-py2.7-linux-i686.egg/pandas/tseries/frequencies.py", line 392, in to_offset
raise ValueError("Could not evaluate %s" % freqstr)
ValueError: Could not evaluate <class 'pandas.tseries.index.DatetimeIndex'>

[2012-03-02 09:00:00, ..., 2012-03-02 15:00:00]
Length: 73, Freq: 5T, Timezone: None 
```

似乎 TimeGrouper.resample 应该处理 DatetimeIndex 但在 TimeGrouper init 中调用 to_offset 却没有。但我可能会在这里遗漏一些东西。

知道如何通过索引重新采样吗？或者也许是一种解决方法 - 我想要做的只是按某个频率（比如 1 分钟）进行采样，但开始/结束时间不一定在原始时间序列中有数据点（我试图有一堆从上午 8 点到下午 4 点采样的时间序列，但有些只有上午 9:30 的值，有些是上午 10 点等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:50:27.953

AFAIK 你不能传入一个 DatetimeIndex 来重新采样。作为一种解决方法，只需按频率别名（'1Min'）重新采样，然后重新索引到您生成的索引？

我开始了一个[github 问题](https://github.com/pydata/pandas/issues/2118)，可能会考虑添加额外的参数来重新采样。随时在那里留下更多反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T21:15:59.483

前几天我发布了一个类似的问题：[Date range in Pandas](https://stackoverflow.com/questions/13445174/date-ranges-in-pandas/13455624#13455624)

韦斯回答说他计划`resample`最终像这样扩展。

# actionscript-3 - Adobe Captivate 中的播放/暂停状态

> ID：13064402
> 
> 赞同：0
> 
> 时间：2012-10-25T08:17:20.097
> 
> 标签：actionscript-3, flash, adobe-captivate

我是 Captivate 软件的新手，正在寻求一些帮助。我正在做的是 Flash 中的播放/暂停小部件，一切正常，直到`Pause After time`按钮设置或幻灯片在它们的末尾暂停。我花了很多时间试图找出如何接收有关更改迷人课程的播放/暂停状态的通知。现在我正在检查这个状态

```
playing = m_VariableHandle.rdcmndPause == 0;
//m_VariableHandle is movieHandle.getMovieProps().variablesHandle 
```

代码，但它仅在用户单击播放栏按钮或我自己的按钮时才有效。但如果幻灯片在最后暂停或某些按钮导致它停止，则`rdcmndPause`仍然为 0。

那么有什么方法可以检查电影是否在任何时间点播放？还是我错过了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:43:51.457

好吧，经过两个多小时的挖掘，我想我找到了我要找的东西。至少我找到了一种解决方法并且它有效。

在我的小部件中，我正在监听`enterFrame`事件并检查是否更改了`rdinfoCurrentFrame`属性。`variablesHandle`如果不是，电影将暂停。就是这样。

```
if (m_VariableHandle)
{
    playing = m_VariableHandle.rdcmndPause == 0;
    if (playing && pFrame == m_VariableHandle.rdinfoCurrentFrame)
        playing = false;
    pFrame = m_VariableHandle.rdinfoCurrentFrame;
} 
```

# android - 使用粘性列表标题和可索引列表（如 IOS）的内置方式

> ID：13064404
> 
> 赞同：1
> 
> 时间：2012-10-25T08:17:37.977
> 
> 标签：android, android-layout, android-listview

Android 4.0 是否有任何内置方式来使用粘滞列表标题和可索引列表？我发现了以下项目：

1.  [StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders)
2.  [可索引列表视图](https://github.com/woozzu/IndexableListView)

...但两者都是分开的，我需要遵循最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:24:00.160

A `ListView`（或者更确切地说，它的适配器）已经可以通过`SectionIndexer`接口进行索引。我在扩展`StickyListHeadersBaseAdapter`和实施`SectionIndexer`. 在 XML 中为列表启用`fastScroll`，然后拖动滚动手柄。有许多关于如何使用`SectionIndexer`界面的指南

# java - 带时间轴的 JavaFX 实时 LineChart

> ID：13064406
> 
> 赞同：12
> 
> 时间：2012-10-25T08:17:54.110
> 
> 标签：java, charts, jfreechart, javafx-2

我正在尝试绘制带有时间轴的实时图表，但我发现`LineChart`构造函数只有签名。

```
LineChart(Axis<X> xAxis, Axis<Y> yAxis) 
```

我认为在 javafx 中嵌入 jfree 图表不是一个合适的解决方案。

我想要 javafx 中的一些 jfree 功能`LineChart`，这可能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-25T14:55:21.583

[从http://www.oracle.com/technetwork/java/javafx/samples/index.html](http://www.oracle.com/technetwork/java/javafx/samples/index.html)下载 Ensemble 示例

其中有几个动态图表的示例，例如“高级股票折线图”。您可以直接在应用程序中查看他们的源代码。

![在此处输入图像描述](../Images/c6a6e216e0e2186dcfe2bc86a33bf0aa.png)

要在轴上显示时间，您可以使用字符串和 DateFormatter：

```
 BarChart<String, Number> chart = new BarChart<>(new CategoryAxis(), new NumberAxis());

    final XYChart.Series<String, Number> series1 = new XYChart.Series<>();
    chart.getData().addAll(series1);

    SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
    Date date = new Date();
    for (int i = 0; i <= 10; i += 1) {
        date.setTime(date.getTime() + i * 11111);
        series1.getData().add(new XYChart.Data(dateFormat.format(date), Math.random() * 500));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:39:52.543

该类[`org.jfree.chart.demo.TimeSeriesChartDemo1`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/demo/TimeSeriesChartDemo1.html)包含在分发中。它在[演示](http://www.jfree.org/jfreechart/samples.html)中被描绘，它的[源代码](http://www.jfree.org/jfreechart/api/javadoc/src-html/org/jfree/chart/demo/TimeSeriesChartDemo1.html#line.70)说明了工厂方法的使用`ChartFactory.createTimeSeriesChart()`。[这里](https://stackoverflow.com/a/12481509/230513)有一个相关的例子。

# html - IE7输入类型隐藏占用空间

> ID：13064410
> 
> 赞同：2
> 
> 时间：2012-10-25T08:18:16.023
> 
> 标签：html, css, internet-explorer-7

我有一个带有隐藏输入字段的表单。在 IE7 中，布局发生了变化。提交按钮在下一行。如果您选择中间的空格，似乎每个隐藏的输入都是空白的。我能做些什么呢？这是[jsfiddle](http://jsfiddle.net/F5gFg/2/)。

HTML：

```
<div id="column1">
    <div id="searchform">
        <form action="/index.php?id=17" method="post" name="searchform01">
            <input type="text" name="tx_indexedsearch[sword]" value="Suchbegriff" class="searchform-input" onfocus="clearText(this)" onblur="clearText(this)" />
            <input type="hidden" name="tx_indexedsearch[_sections]" class="hidden-inputs" value="0" />
            <input type="hidden" name="tx_indexedsearch[_freeIndexUid]" id="tx_indexedsearch_freeIndexUid" class="hidden-inputs" value="_" />
            <input type="hidden" name="tx_indexedsearch[pointer]" id="tx_indexedsearch_pointer" class="hidden-inputs" value="0" />
            <input type="hidden" name="tx_indexedsearch[ext]" class="hidden-inputs" value="0" />
            <input type="hidden" name="tx_indexedsearch[type]" class="hidden-inputs" value="1" />
            <input type="hidden" name="tx_indexedsearch[defOp]" class="hidden-inputs" value="0" />
            <input type="hidden" name="tx_indexedsearch[media]" class="hidden-inputs" value="-1" />
            <input type="hidden" name="tx_indexedsearch[order]" class="hidden-inputs" value="rank_flag" />
            <input type="hidden" name="tx_indexedsearch[group]" class="hidden-inputs" value="flat" />
            <input type="hidden" name="tx_indexedsearch[lang]" class="hidden-inputs" value="-1" />
            <input type="hidden" name="tx_indexedsearch[desc]" class="hidden-inputs" value="0" />
            <input type="hidden" name="tx_indexedsearch[results]" class="hidden-inputs" value="10" />
            <input type="submit" id="search-button" value="Suchen" />
        </form>
    </div>
</div> 
```

CSS：

```
.hidden-inputs {
    display: none;
    visibility: hidden;
    border: 0;
    margin: 0;
    padding: 0;
    width: 0;
    height: 0;
    clear: left;
    margin-left: inherit;
    overflow: hidden;
}

#column1 {
    width: 245px;
    float: left;
    background-color: #FFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:33:50.037

它是由 之间的空文本引起的`input.hidden-inputs`。您可以通过删除输入之间的空文本或设置元素来修复`font-size:0;`它`form`。

例子：

1.  `font-size`修复：http: [//jsfiddle.net/6fTHs/](http://jsfiddle.net/6fTHs/)
2.  删除空文本：http: [//jsfiddle.net/keaukraine/BE7sV/](http://jsfiddle.net/keaukraine/BE7sV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:25:03.180

我知道防止它的唯一方法是在 dom 中没有隐藏元素。

如果“我想要隐藏的值”部分纯粹用于计算目的，则应使用“数据”属性。

像这样

```
<div data-custom-value="1001">Visible value </div> 
```

在 jQuery 中，HTML 数据属性通过 data() api 自动可用。

你可以做

```
someElement.data('customValue') to read a value. 
```

和

```
someElement.data('customValue', newValue) to set a value. 
```

希望我正确地分析了您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:33:35.903

最简单的解决方法可能是一个像

```
form { word-spacing: -0.23em } 
```

这将内部单词之间的间距减少`form`了大约一个空格的宽度，或者更少。那里没有词，但 IE 7 认为有 – 由隐藏字段创建的不可见词，由空格分隔。

正如@keaukraine 所建议的，更强大的解决方案是删除隐藏字段周围和之间的空格。

# hibernate - 休眠错误配置：未将工厂绑定到 JNDI，未配置 JNDI 名称

> ID：13064411
> 
> 赞同：4
> 
> 时间：2012-10-25T08:18:16.693
> 
> 标签：hibernate, localhost, hibernate.cfg.xml

这是我的“hibernate.cfg.xml”，我正在尝试连接到我的本地主机（postgres），但我不确定我是否输入正确的参数值（例如连接 url 或其他） ：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/postgres</property>
    <property name="hibernate.connection.username">postgres</property>
    <property name="hibernate.connection.password">quesooloroso</property>
    <property name="connection.autocommit">false</property>
    <property name="show_sql">true</property>
    <mapping resource="model/Comprobante.hbm.xml"/>
    <mapping resource="model/Parametro.hbm.xml"/>
    <mapping resource="model/Usuario.hbm.xml"/>
    <mapping resource="model/Detalleitinerario.hbm.xml"/>
    <mapping resource="model/Configusuario.hbm.xml"/>
    <mapping resource="model/Notaalmacen.hbm.xml"/>
    <mapping resource="model/Perfilxventana.hbm.xml"/>
    <mapping resource="model/Ruta.hbm.xml"/>
    <mapping resource="model/Pedido.hbm.xml"/>
    <mapping resource="model/Itinerario.hbm.xml"/>
    <mapping resource="model/Privilegio.hbm.xml"/>
    <mapping resource="model/Modulo.hbm.xml"/>
    <mapping resource="model/Ventana.hbm.xml"/>
    <mapping resource="model/Perfilxprivilegio.hbm.xml"/>
    <mapping resource="model/Persona.hbm.xml"/>
    <mapping resource="model/Almacen.hbm.xml"/>
    <mapping resource="model/Cargo.hbm.xml"/>
    <mapping resource="model/Continente.hbm.xml"/>
    <mapping resource="model/Logusuario.hbm.xml"/>
    <mapping resource="model/Reservaalmacen.hbm.xml"/>
    <mapping resource="model/Tipousuario.hbm.xml"/>
    <mapping resource="model/Pais.hbm.xml"/>
    <mapping resource="model/Perfil.hbm.xml"/>
    <mapping resource="model/Vuelo.hbm.xml"/>
    <mapping resource="model/Vueloxruta.hbm.xml"/>
    <mapping resource="model/Logpedido.hbm.xml"/>
  </session-factory>
</hibernate-configuration> 
```

这是我的代码中我的程序失败的部分我猜：

```
public Frm_SimularAlmacen() {
        //1\. Consultar todos los almacenes
        almacenes_consultaBD = consultarAlmacenes();
        //2\. Armar el String[]
        initComponents();
    }

private List<Almacen> consultarAlmacenes(){
    Session session = Utils.openConnection();
    Query queryResult = session.createQuery("from Almacen");
    return queryResult.list();

} 
```

这是我的输出：

```
oct 25, 2012 2:57:20 AM org.hibernate.cfg.annotations.Version <clinit>
Información: Hibernate Annotations 3.3.1.GA
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Environment <clinit>
Información: Hibernate 3.2.5
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Environment <clinit>
Información: hibernate.properties not found
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Environment buildBytecodeProvider
Información: Bytecode provider name : cglib
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Environment <clinit>
Información: using JDK 1.4 java.sql.Timestamp handling
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration configure
Información: configuring from resource: /hibernate.cfg.xml
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration getConfigurationInputStream
Información: Configuration resource: /hibernate.cfg.xml
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Comprobante.hbm.xml
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Parametro.hbm.xml
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Usuario.hbm.xml
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Detalleitinerario.hbm.xml
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Configusuario.hbm.xml
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Notaalmacen.hbm.xml
oct 25, 2012 2:57:20 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Perfilxventana.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Ruta.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Pedido.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Itinerario.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Privilegio.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Modulo.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Ventana.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Perfilxprivilegio.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Persona.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Almacen.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Cargo.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Continente.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Logusuario.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Reservaalmacen.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Tipousuario.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Pais.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Perfil.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Vuelo.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Vueloxruta.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration addResource
Información: Reading mappings from resource : model/Logpedido.hbm.xml
oct 25, 2012 2:57:21 AM org.hibernate.cfg.Configuration doConfigure
Información: Configured SessionFactory: null
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Comprobante -> comprobante
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Parametro -> parametro
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Usuario -> usuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Detalleitinerario -> detalleitinerario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Configusuario -> configusuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Notaalmacen -> notaalmacen
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Perfilxventana -> perfilxventana
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Ruta -> ruta
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Pedido -> pedido
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Itinerario -> itinerario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Privilegio -> privilegio
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Modulo -> modulo
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Ventana -> ventana
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Perfilxprivilegio -> perfilxprivilegio
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Persona -> persona
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Almacen -> almacen
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Cargo -> cargo
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Continente -> continente
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Logusuario -> logusuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Reservaalmacen -> reservaalmacen
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Tipousuario -> tipousuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Pais -> pais
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Perfil -> perfil
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Vuelo -> vuelo
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Vueloxruta -> vueloxruta
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindRootPersistentClassCommonValues
Información: Mapping class: model.Logpedido -> logpedido
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Parametro.pedidos -> pedido
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Parametro.comprobantes -> comprobante
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Parametro.vuelos -> vuelo
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Parametro.personasForIdtipodocumento -> persona
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Parametro.personasForIdtipopersona -> persona
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Usuario.logpedidos -> logpedido
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Usuario.logusuarios -> logusuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Usuario.personas -> persona
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Usuario.notaalmacens -> notaalmacen
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Usuario.comprobantes -> comprobante
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Configusuario.tipousuarios -> tipousuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Ruta.pedidos -> pedido
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Ruta.vueloxrutas -> vueloxruta
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Ruta.itinerarios -> itinerario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Pedido.reservaalmacens -> reservaalmacen
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Pedido.comprobantes -> comprobante
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Pedido.logpedidos -> logpedido
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Pedido.detalleitinerarios -> detalleitinerario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Itinerario.detalleitinerarios -> detalleitinerario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Privilegio.perfilxprivilegios -> perfilxprivilegio
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Modulo.ventanas -> ventana
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Ventana.logusuarios -> logusuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Ventana.perfilxventanas -> perfilxventana
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Persona.pedidos -> pedido
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Almacen.reservaalmacens -> reservaalmacen
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Almacen.vuelosForOrigen -> vuelo
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Almacen.vuelosForDestino -> vuelo
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Cargo.usuarios -> usuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Continente.paises -> pais
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Reservaalmacen.notaalmacens -> notaalmacen
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Tipousuario.usuarios -> usuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Pais.almacens -> almacen
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Pais.personas -> persona
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Perfil.perfilxventanas -> perfilxventana
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Perfil.usuarios -> usuario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Perfil.perfilxprivilegios -> perfilxprivilegio
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Vuelo.vueloxrutas -> vueloxruta
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Vuelo.detalleitinerarios -> detalleitinerario
oct 25, 2012 2:57:21 AM org.hibernate.cfg.HbmBinder bindCollectionSecondPass
Información: Mapping collection: model.Vuelo.logpedidos -> logpedido
oct 25, 2012 2:57:21 AM org.hibernate.cfg.AnnotationConfiguration secondPassCompile
Información: Hibernate Validator not found: ignoring
oct 25, 2012 2:57:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
Información: Using Hibernate built-in connection pool (not for production use!)
oct 25, 2012 2:57:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
Información: Hibernate connection pool size: 20
oct 25, 2012 2:57:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
Información: autocommit mode: false
oct 25, 2012 2:57:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
Información: using driver: org.postgresql.Driver at URL: jdbc:postgresql://localhost:5432/postgres
oct 25, 2012 2:57:21 AM org.hibernate.connection.DriverManagerConnectionProvider configure
Información: connection properties: {user=postgres, password=****, autocommit=false}
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: RDBMS: PostgreSQL, version: 9.2.1
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: JDBC driver: PostgreSQL Native Driver, version: PostgreSQL 9.1 JDBC4 (build 901)
oct 25, 2012 2:57:22 AM org.hibernate.dialect.Dialect <init>
Información: Using dialect: org.hibernate.dialect.PostgreSQLDialect
oct 25, 2012 2:57:22 AM org.hibernate.transaction.TransactionFactoryFactory buildTransactionFactory
Información: Using default transaction strategy (direct JDBC transactions)
oct 25, 2012 2:57:22 AM org.hibernate.transaction.TransactionManagerLookupFactory getTransactionManagerLookup
Información: No TransactionManagerLookup configured (in JTA environment, use of read-write or transactional second-level cache is not recommended)
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Automatic flush during beforeCompletion(): disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Automatic session close at end of transaction: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: JDBC batch size: 15
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: JDBC batch updates for versioned data: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Scrollable result sets: enabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: JDBC3 getGeneratedKeys(): enabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Connection release mode: auto
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Default batch fetch size: 1
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Generate SQL with comments: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Order SQL updates by primary key: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Order SQL inserts for batching: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory createQueryTranslatorFactory
Información: Query translator: org.hibernate.hql.ast.ASTQueryTranslatorFactory
oct 25, 2012 2:57:22 AM org.hibernate.hql.ast.ASTQueryTranslatorFactory <init>
Información: Using ASTQueryTranslatorFactory
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Query language substitutions: {}
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: JPA-QL strict compliance: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Second-level cache: enabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Query cache: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory createCacheProvider
Información: Cache provider: org.hibernate.cache.NoCacheProvider
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Optimize cache for minimal puts: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Structured second-level cache entries: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Echoing all SQL to stdout
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Statistics: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Deleted entity synthetic identifier rollback: disabled
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Default entity-mode: pojo
oct 25, 2012 2:57:22 AM org.hibernate.cfg.SettingsFactory buildSettings
Información: Named query checking : enabled
oct 25, 2012 2:57:22 AM org.hibernate.impl.SessionFactoryImpl <init>
Información: building session factory
oct 25, 2012 2:57:23 AM org.hibernate.impl.SessionFactoryObjectFactory addInstance
Información: Not binding factory to JNDI, no JNDI name configured
Hibernate: select almacen0_.idalmacen as idalmacen15_, almacen0_.idpais as idpais15_, almacen0_.latitud as latitud15_, almacen0_.longitud as longitud15_, almacen0_.nombreciudad as nombreci5_15_, almacen0_.nombreaeropuerto as nombreae6_15_, almacen0_.stock as stock15_, almacen0_.fechacreacion as fechacre8_15_, almacen0_.estado as estado15_, almacen0_.capacidad as capacidad15_, almacen0_.nombre as nombre15_, almacen0_.ultimamodificacion as ultimam12_15_ from public.almacen almacen0_
oct 25, 2012 2:57:23 AM org.hibernate.util.JDBCExceptionReporter logExceptions
Advertencia: SQL Error: 0, SQLState: 42P01
oct 25, 2012 2:57:23 AM org.hibernate.util.JDBCExceptionReporter logExceptions
Grave: ERROR: no existe la relación «public.almacen»
  Position: 451
Exception in thread "AWT-EventQueue-0" org.hibernate.exception.SQLGrammarException: could not execute query
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.loader.Loader.doList(Loader.java:2223)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    at org.hibernate.loader.Loader.list(Loader.java:2099)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:378)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:338)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:172)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1121)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
    at pe.edu.pucp.dp1.TSPSolution.view.sim.almacen.Frm_SimularAlmacen.consultarAlmacenes(Frm_SimularAlmacen.java:29)
    at pe.edu.pucp.dp1.TSPSolution.view.sim.almacen.Frm_SimularAlmacen.<init>(Frm_SimularAlmacen.java:35)
    at pe.edu.pucp.dp1.TSPSolution.view.componentes.Index$8.actionPerformed(Index.java:270)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.AbstractButton.doClick(AbstractButton.java:376)
    at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833)
    at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:676)
    at java.awt.EventQueue$4.run(EventQueue.java:674)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
Caused by: org.postgresql.util.PSQLException: ERROR: no existe la relación «public.almacen»
  Position: 451
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2103)
    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1836)
    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:512)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:388)
    at org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:273)
    at org.hibernate.jdbc.AbstractBatcher.getResultSet(AbstractBatcher.java:186)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1787)
    at org.hibernate.loader.Loader.doQuery(Loader.java:674)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    at org.hibernate.loader.Loader.doList(Loader.java:2220)
    ... 48 more 
```

这是我第一次使用hibernate，所以如果我没有提供足够的信息或者它太令人困惑，我很抱歉。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-16T06:19:49.913

在你的 DAO 类中，试试这些行。

```
SessionFactory sessionFactory = new Configuration().configure(
                    "hibernate.cfg.xml")
                    .buildSessionFactory(); 
```

# c# - 将 GUI 设计从 xCode 导入 Monotouch

> ID：13064416
> 
> 赞同：0
> 
> 时间：2012-10-25T08:18:44.357
> 
> 标签：c#, user-interface, xamarin.ios

我要做一个项目，其中 GUI 是在 xCode 项目中制作的，而代码隐藏代码是在 MonoTouch 中制作的。是否可以将 GUI 导入单点触控？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T10:08:44.520

#LexLi 的 Anwser：您可以在 MonoDevelop 中创建多个空屏幕，如本文 docs.xamarin.com/ios/Guides/Getting_Started/Hello%2C_MVC 中所述，然后切换到 Xcode 以将它们一一编辑（替换它们与你已经拥有的）。然后，当您切换回 MonoDevelop 时，您的更改应该会被拾取

# linux - Linux中fork()和grep是什么意思？

> ID：13064417
> 
> 赞同：8
> 
> 时间：2012-10-25T08:18:48.990
> 
> 标签：linux, api, grep, fork

作为一个非英语母语的人，与其他 API 相比，我很难记住 Linux 命令。在 Linux 中，函数名称似乎并没有表明它们的用途。

为什么`fork()`选择名称来创建子进程？在字典中，`fork`意思是“具有两个或更多叉子的器具”，这与创建新过程无关。

为什么`grep`选择名称来“打印与模式匹配的行”？`grep`是指“g报告”吗？

在哪里可以找到 Linux API 中其他命令背后的词源？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T08:20:57.693

叉可以意味着一分为二，作为一条路（[源](http://dictionary.reference.com/browse/fork)）。

> 叉（15）：分成树枝。

[Grep的词源](http://en.wiktionary.org/wiki/grep#Etymology)：

> 来自 qed 和 ed 文本编辑器中的惯用命令序列：'g/re/p'，意思是：全局搜索正则表达式并打印。

[这个答案](https://stackoverflow.com/questions/258509/etymology-of-linux-commands)列出了一些 Linux 命令的词源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:29:23.827

[www.lockergnome.com/uncategorized/2006/08/21/linux-forks](http://www.lockergnome.com/uncategorized/2006/08/21/linux-forks)

> Linux fork 是**一个经常用于各种 Linux 发行版的术语**，即使在 Linux 社区中也很难理解。互联网上提供的所有各种发行版都是内核的真正分叉吗？凯文摩根争辩说他们不是。在他的 Enterprise OpenSource Magazine（原 LinuxWorld Magazine）文章“Linux 技术领导力和分叉问题”中，他详细探讨了分叉的概念，解释了为不同的应用程序拥有独特变体的优势，并解释了为什么变体不是分叉。

# jquery - 移动快速点击 - 防止鬼焦点

> ID：13064418
> 
> 赞同：9
> 
> 时间：2012-10-25T08:18:49.723
> 
> 标签：jquery, mobile

我正在快速点击移动浏览器。当我快速单击当前页面的链接时，它会将 ajax 加载到下一页。我的快速点击脚本现在可以停止幽灵点击。但是如果当前页面的点击位置有下一页的输入元素，它仍然会获得焦点并显示虚拟键盘。如何防止鬼焦点事件呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T13:36:14.637

要防止与事件相关的操作，请使用`.stopImmediatePropagation()`和`preventDefault()`。

[**工作演示**](http://jsfiddle.net/Palestinian/mJXnL/)

> *   [stopImmediatePropagation()](http://api.jquery.com/event.stopImmediatePropagation/) - 调用它的同一函数中的处理程序将正常执行，但将立即忽略/停止与同一事件相关的其他函数中的任何操作。例如：

```
// alert will fire
$(document).on('click', '#foo', function(event) {
 event.stopImmediatePropagation();
 alert('Hello world');
});

// but this will be stopped
$(document).on('click', '#foo', function(event) {
 console.log('I am stopped!');
}); 
```

* * *

> *   [preventDefault()](http://api.jquery.com/event.preventDefault/) - 调用时，默认操作将被忽略。例如

```
<a href="http://www.google.com" id="foo">Google it!</a> 
```

链接将被暂停，但会触发警报

```
$(document).on('click', '#foo', function(event) {
 event.preventDefault();
 alert('I prefer MSN');
}); 
```

两者应该结合在一起，以阻止事件在 DOM 树中冒泡。

我做了一个[**Demo**](http://jsfiddle.net/Palestinian/mJXnL/)来解释两者之间的区别以及为什么两者应该结合在一起。

基于以上内容，您的代码应如下所示。

```
$(document).on('click', '.selector', function (event) {
 event.stopImmediatePropagation();
 event.preventDefault();
}); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-09T04:55:01.717

我正在使用 fastclick.js。这是我防止在下一页自动触发的方法：

全局 CSS：

```
#preventClick { width:100%; height:100%; position:absolute; z-index:1000; top:0; left:0; } 
```

下一页的 HTML：

```
<body>
    <div id="preventClick"></div>
    <!-- button on the same coordinate with previous page -->
</body> 
```

下一页的脚本：

```
function onDeviceReady() {
    setTimeout(function(){ $('#preventClick').hide(); }, 300);
} 
```

300 是最低的，没有意义超过这个

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T22:39:10.997

我已经为此苦苦挣扎了一段时间，但只找到了部分解决方案。虽然我认为这对我的问题来说已经足够好了。希望它也对其他人有所帮助。

此解决方案基于 jQuery mobile，但如果您不使用它，您可能会做类似的事情。

我所做的是，我在其他元素之上放置一个填充整个屏幕的空 div，以便它阻止（大多数）单击/触摸事件。

```
<div id="ghostBuster" style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;display:none;"></div> 
```

我在隐藏要更改的页面之前显示它。

```
$("div[data-role='page']").on("pagebeforehide", function() {
     $("#ghostBuster").show();
}); 
```

并在显示下一页后再次隐藏它。

```
$("div[data-role='page']").on("pageshow", function() {
    $("#ghostBuster").hide();
}); 
```

我没有对它进行过彻底的测试，只在我的安卓设备上进行了测试，但到目前为止，它似乎可以避免鬼点击和聚焦。它不能避免鬼点击选择框。当页面之间的过渡动​​画非常快时它不起作用。我通过切换到 jQuery mobile 提供的非本地替代方案解决了选择框的问题。

您可能会考虑在 mouseup 上再次隐藏 div，但这在我的情况下不起作用，因为我使用滑动来更改页面。

这可能不是最漂亮的解决方案，但到目前为止，我一直无法找到或想出更好的解决方案。

# javascript - jquery easing 插件示例

> ID：13064430
> 
> 赞同：0
> 
> 时间：2012-10-25T08:19:21.567
> 
> 标签：javascript, jquery, jquery-selectors

```
easeOutExpo: function (x, t, b, c, d) {
        return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
    } 
```

在 jquery easin 插件上的这行代码中，我们如何知道`x, t, b, c, d` 括号中的值。我只是想知道在做什么..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:21:13.980

在脚本的顶部有一行注释掉，上面写着：

```
// t: current time, b: begInnIng value, c: change In value, d: duration 
```

# java - 如何将授权标头注入 WebServiceContext

> ID：13064432
> 
> 赞同：1
> 
> 时间：2012-10-25T08:19:50.970
> 
> 标签：java, web-services, rest, soap, websphere

在一个应用程序中，我使用的是由应用程序服务器注入的 WebServiceContext。

```
@Resource
private WebServiceContext context; 
```

从这个上下文中，我正在读取用户名和密码以进行身份​​验证（注意：我没有通过应用程序服务器进行身份验证，应用程序本身对每个请求的用户进行身份验证）。

在 Http-Request 中，我发送授权标头 fe：

> 基本 MTAzfdajfljakdfjkla=

那么问题来了，是不是容器读取了 Autorization Header，然后使用 Base64 解码器将 Header 的值转换并写入 WebServiceContext 对象，因为有解密的密码和用户名？

我的实际问题是：我想从 RESTFul Web 服务中的 HTTP-Header 中读取用户名和密码，以便应用程序根据请求对用户进行身份验证。有没有一种简单的方法可以从 HTTP 标头中获取这两个解码值，也许使用注入？如果是，如何？否则，我将使用 Base64 编码器自行将授权标头转换为纯文本...！

# java - AlertDialog 和软键盘

> ID：13064433
> 
> 赞同：4
> 
> 时间：2012-10-25T08:19:52.580
> 
> 标签：java, android

我正在开发一个安卓应用程序。我正在使用 alertDialog 类。我有一个自定义列表视图和 2 个按钮。在我的自定义列表视图中，我有一个 EditText 字段。但是，当对话框弹出并且我触摸 EditText 而光标开始在文本框中闪烁时，softKeyboard 不会出现。是因为警报对话框吗？

```
public class ProgressReport extends ListActivity {

private ResultSet receivedData;
private StudentProgressAdapter ca;
private Button btnRtn;
ArrayList<String> content =new ArrayList<String>();
ArrayList<String> subContent = new ArrayList<String>();
AlertDialog dialog ;

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        setTheme(android.R.style.Theme_Holo_Light);         
        setContentView(R.layout.examslayout);

        for(int i =0;i<20;i++)
          content.add("ELEMENTARY: "+i);

          for(int i =0;i<20;i++)
              subContent.add("ΒΑΣΙΚΗ ΚΑΤΗΓΟΡΙΑ");

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Student Stats").setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, close
                    // current activity
                    //MainActivity.this.finish();
                }
              })
            .setNegativeButton("No",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();
                }
            });;

            ListView modeList = new ListView(this);

            modeList.setAdapter(new ProgressReportAdapter2(this, new int[]{R.layout.arrowlistview}, new int[]{R.id.textView1,R.id.textView2},content,20,subContent));

            builder.setView(modeList);

            dialog = builder.create();
            dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE|WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);

        Intent intent = getIntent();      
        receivedData =  (ResultSet) intent.getSerializableExtra("SentData");

        ArrayList<String> content = new ArrayList<String>(MainPagerActivity.receivedData.getStudents().length);
        for (int i=0; i <receivedData.getStudents().length; i++)
              content.add(receivedData.getStudents()[i].getProperty(3).toString()+" "+receivedData.getStudents()[i].getProperty(2).toString());

        ca= new StudentProgressAdapter(this, new int[]{R.layout.stdprgrlistview}, new int[]{R.id.textView1}, content,content.size());
        setListAdapter(ca); 

        btnRtn= (Button) findViewById(R.id.btn);
        btnRtn.setOnClickListener(new OnClickListener() {            
            public void onClick(View v) {     
                finish();
            }
        });
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {    
        dialog.show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:39:23.453

尝试这个：

```
AlertDialog alertToShow = alert.create();
alertToShow.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
alertToShow.show(); 
```

*更新：*

你可以像这样修改你的代码

```
dialog = builder.create();
dialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
dialog.show(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:38:46.740

创建对话框后添加：

```
dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE|WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM);` 
```

# ruby-on-rails - 创建一个名为“import”的模型是rails 3中的保留字吗？

> ID：13064434
> 
> 赞同：0
> 
> 时间：2012-10-25T08:19:56.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3, reserved-words

一个名为“import”的模型和表单发生了各种奇怪的事情，这是rails中的保留字吗？我在一些关于 rails 保留字的旧网络帖子中找不到它。

编辑：一些用于说明的代码示例，似乎无法查明问题

作品：

```
- @profile = Profile.new
  = form_for @profile, :method => :get,  :html => { :class => 'form-horizontal' } do |f|
throws error # embed raw 
```

失败：

```
- @import = Import.new
  = form_for @import, :method => :get,  :html => { :class => 'form-horizontal' } do |f| 
```

有错误：

```
undefined method `imports_path' for #<#<Class:0x007fe4e0369468>:0x007fe4e25410e0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:24:24.123

据我所知，`import`不是 Ruby 中的[保留字](http://www.tutorialspoint.com/ruby/ruby_quick_guide.htm)。

这很可能是您的特定代码库的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:14:20.093

解决了导致此问题的控制器导入模型的错误命名，我错过了文件名中的 S char

# html - 不确定为什么 Apache 服务器会自动将站点放入框架中

> ID：13064436
> 
> 赞同：0
> 
> 时间：2012-10-25T08:20:00.817
> 
> 标签：html, iframe, apache2, reverse-proxy

Apache 服务器中的某处是否存在导致所有页面都位于框架中的配置？我似乎无法弄清楚。

```
<html>
  <head>
  <title>Platform</title>
  <meta name="keywords" content="Platform">
</head>
<frameset rows="100%,*" border="0">
  <frame src="http://someURL" frameborder="0">
  <frame frameborder="0" noresize="">
</frameset>

<!-- pageok -->
<!-- 01 -->
<!-- -->
</html> 
```

它本质上将元标记取出并将其用于父页面，并在框架中的页面内容中包含其他所有内容。

如果您有任何想法，请告诉我。我无法在我的笔记本电脑上本地复制它，所以我认为必须有一些不匹配的配置，但我什至不知道从哪里开始寻找。使用相同的反向代理配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:53:11.097

> Apache 服务器中的某处是否存在导致所有页面都位于 iFrame 中的配置？

不是我听说过的。

这种框架是购买域名并通过掩码使用它而不是使用适当的 DNS 托管的网站的典型。

# xml - Joomla 扩展安装

> ID：13064437
> 
> 赞同：2
> 
> 时间：2012-10-25T08:20:03.593
> 
> 标签：xml, joomla, joomla1.5, joomla2.5, joomla3.0

我正在开发一个扩展（模块），如果可能的话，我希望与 Joomla 1.5、2.5 和 3.0 兼容。我的主要问题是解决所需的不同 XML 文件。我决定`manifest.xml`为 Joomla 1.5 创建一个带有`<install>`标签的`mod_mymodule.xml`文件，并为 Joomla 2.5/3.0创建一个`<extension>`带有`mod_mymodule.xml`包含字段集等标签的文件，同时`manifest.xml`包含`<params>`.

我的问题是我的扩展在 Joomla 3.0（在本地主机上）上安装得非常好。然而，在 Joomla 2.5 上安装时，参数下没有任何显示。Joomla 2.5 的优先级是什么，为什么它使用`manifest.xml`带有安装标签的文件而不是`mod_mymodule.xml`文件？

Joomla 2.5 是否`<install>`将 XML 文件顶部的标记优先于具有标记的同一目录中的另一个 XML 文件`<extension>`？

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<install type="module" client="site" method="upgrade" version="1.5">
    <name></name> 
    <author>George Wilson</author> 
    <creationDate>05-Mar-2012</creationDate> 
    <copyright></copyright> 
    <license>http://www.gnu.org/licenses/gpl-3.0.html</license> 
    <authorEmail></authorEmail> 
    <authorUrl></authorUrl> 
    <version>1.1.1</version> 
    <description></description>
    <files>
            <filename module="mod_mymodule">mod_mymodule.php</filename>
            <filename>manifest.xml</filename>
            <filename>index.html</filename>
            <filename>helper.php</filename>
            <folder>assets</folder>
            <folder>tmpl</folder>
    </files>

    <languages>
        <language tag="en-GB">language/en-GB/en-GB.mod_mymodule.ini</language>
    </languages>

    <params>
        <param name="blah" type="text" default="5" label="Label" description="Description" />
    </params>
</install> 
```

mod_mymodule.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<extension type="module" client="site" method="upgrade">
    <name></name> 
    <author>George Wilson</author> 
    <creationDate>05-Mar-2012</creationDate> 
    <copyright></copyright> 
    <license>http://www.gnu.org/licenses/gpl-3.0.html</license> 
    <authorEmail></authorEmail> 
    <authorUrl></authorUrl> 
    <version>1.1.1</version> 
    <description>Description</description>
    <files>
            <filename module="mod_mymodule">mod_mymodule.php</filename>
            <filename>mod_mymodule.xml</filename>
            <filename>index.html</filename>
            <filename>helper.php</filename>
            <folder>assets</folder>
            <folder>sql</folder>
            <folder>tmpl</folder>
    </files>

    <languages>
        <language tag="en-GB">language/en-GB/en-GB.mod_mymodule.ini</language>
        <language tag="en-GB">language/en-GB/en-GB.mod_mymodule.sys.ini</language>
    </languages>

    <install>
        <sql>
            <file driver="mysql" charset="utf8">sql/install.mysql.utf8.sql</file>
        </sql>
    </install>
    <uninstall>
        <sql>
            <file driver="mysql" charset="utf8">sql/uninstall.mysql.utf8.sql</file>
        </sql>
    </uninstall>

    <config>
        <fields name="params">
            <fieldset name="basic">
                <field name="moduleclass_sfx" type="text" default="" label="COM_MODULES_FIELD_MODULECLASS_SFX_LABEL" description="COM_MODULES_FIELD_MODULECLASS_SFX_DESC" />
            </fieldset>                 
        </fields>
    </config>
</extension> 
```

错误：在位置参数下方：（！）注意：尝试在第 50 行的 ROOT\administrator\components\com_modules\views\module\tmpl\edit.php 中获取非对象的属性

在排序参数（！）下注意：尝试在第 61 行的 C:\wamp\www\joomla25\administrator\components\com_modules\views\module\tmpl\edit.php 中获取非对象的属性

它还`Module XML data not available`在底部说。

**更新：**经检查，它肯定`manifest.xml`是正在安装的文件，而不是`mod_mymodule.xml`我希望 Joomla 2.5 使用的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:11:14.613

两者的结构都应该是 manifest.xml ：-

```
<?xml version="1.0" encoding="utf-8"?>
<install type="module" version="2.5" method="upgrade">
     <name>my module</name> 
    <author>George Wilson</author> 
    <creationDate>05-Mar-2012</creationDate> 
    <copyright></copyright> 
    <license>http://www.gnu.org/licenses/gpl-3.0.html</license> 
    <authorEmail></authorEmail> 
    <authorUrl></authorUrl> 
    <version>1.1.1</version> 
    <description>Description</description>

    <!-- Installation -->   
    <!--<install>
        <sql>
            <file driver="mysql" charset="utf8">mod_mymodule/sql/install.mysql.utf8.sql</file>
        </sql>
    </install>
    <installfile>install/install.php</installfile>
    <uninstall>
        <sql>
            <file driver="mysql" charset="utf8">mod_mymodule/sql/uninstall.mysql.utf8.sql</file>
        </sql>
    </uninstall>
    <uninstallfile>install/uninstall.php</uninstallfile>

    <languages>
        <language tag="en-GB">language/en-GB/en-GB.mod_mymodule.ini</language>
        <language tag="en-GB">language/en-GB/en-GB.mod_mymodule.sys.ini</language>
    </languages>-->

    <!-- Modules -->
            <files folder="mod_mymodule">
                <filename module="mod_mymodule">mod_mymodule.php</filename>
                <filename>mod_mymodule.xml</filename>
                <!--<filename>index.html</filename>
                <filename>helper.php</filename>
                <folder>assets</folder>
                <folder>sql</folder>
                <folder>tmpl</folder>-->        
            </files>
</install> 
```

模块文件应该是module.xml

```
<?xml version="1.0" encoding="utf-8"?>
<extension type="module" client="site" method="upgrade" version="2.5">
    <name>my module</name> 
    <author>George Wilson</author> 
    <creationDate>05-Mar-2012</creationDate> 
    <copyright></copyright> 
    <license>http://www.gnu.org/licenses/gpl-3.0.html</license> 
    <authorEmail></authorEmail> 
    <authorUrl></authorUrl> 
    <version>1.1.1</version> 
    <description></description>
    <files>
            <filename module="mod_mymodule">mod_mymodule.php</filename>
            <filename>mod_mymodule.xml</filename>
           <!-- <filename>index.html</filename>
            <filename>helper.php</filename>
            <folder>assets</folder>
            <folder>tmpl</folder>-->
    </files>

    <config>
        <fields name="params">
            <fieldset name="basic">
                <field name="moduleclass_sfx" type="text" default="" label="COM_MODULES_FIELD_MODULECLASS_SFX_LABEL" description="COM_MODULES_FIELD_MODULECLASS_SFX_DESC" />
            </fieldset>                 
        </fields>
    </config>
</extension> 
```

希望这可以帮助您仅更改我演示中的 1.5 的参数并提交如果您想包含更多文件请创建一个模块包和您的结构应该

一种。manifest.xml b. mod_mymodule (dir) 和 zip 合二为一。不在模块文件夹中添加清单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:05:39.020

您的第二个 xml 缺少版本（joomla！版本，而不是您的扩展名）。请看下面：

```
 <extension type="module" client="site" method="upgrade" version="2.5"> 
```

# jpa - 避免 COUNT 转换为 BIGINT

> ID：13064438
> 
> 赞同：0
> 
> 时间：2012-10-25T08:20:16.557
> 
> 标签：jpa, db2, jpa-2.0

使用 Open JPA 2.0，数据库是 DB2 9.7。对于类似的查询`SELECT COUNT(1) FROM USER WHERE FNAME := fname`，JPA 将查询转换为`SELECT COUNT(CAST(? AS BIGINT)) FROM TABLENAME`. 如何避免 CAST 到 BIGINT？

下面的代码示例：

```
query = entityManager.createNamedQuery("qry.checkuser");
query.setParameter("fname", fname); 
Long count = (Long)query.getSingleResult(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:46:12.923

哪一个是 CAST 中的问题？

我认为您无法避免它，因为 SQL 是由 JPA 提供程序生成的。

顺便说一句，我总是使用 Number 超类而不是特定的子类：

```
query = entityManager.createNamedQuery("qry.checkuser", Number.class);
query.setParameter("fname", fname); 
Number count = query.getSingleResult();
// Do whatever is needed
if (count.longValue()... 
```

这样，如果 JPA 提供程序返回一个整数、长整数或 BigXXXX，就没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T15:20:35.727

对我有用的是：

```
SELECT COUNT(USER_ID) FROM USER WHERE FNAME := fname 
```

基本上我们需要使用像主键列这样的不可为空的列，并且通过这种更改可以避免 CAST 消耗额外的 CPU，这是一个很小的收益。

# c# - Win XP 上的 SQL Server CE 权限被拒绝

> ID：13064441
> 
> 赞同：1
> 
> 时间：2012-10-25T08:20:38.893
> 
> 标签：c#, winforms, sql-server-ce

`"Permission denied"`连接到`.sdf`文件时出现异常。

我正在使用这个连接字符串。

```
connection string=&quot;Data Source=|DataDirectory|\DB.sdf;Password='something';Mode = Read Only;Temp Path= Environment.GetFolderPath(Environment.SpecialFolder.Templates);Persist Security Info=True&quot;" providerName="System.Data.EntityClient" /> 
```

这在 Win 7 上可以正常工作，但是当我在 Win XP 上运行我的应用程序时，它会返回

> *没有权限*

例外

我为临时文件尝试了不同的地址，但仍然失败。所有这些选项都是正确的

1.  数据库文件的路径存在于 xp 机器上
2.  我有权在给定目录中创建临时文件
3.  我提供了正确的密码。

这个问题发生在数据库连接字符串设置为只读时。我找到了一些解决方案，但我不能使用它们：

**解决方案1：**

> 这是关于这个的独家新闻。当我们将 SDF 文件从 XP 移动到 Vista 时，由于 NLS 版本的更改，我们尝试以读写模式打开文件以重写索引（如果存在）。这仅在从 XP 到 Vista 的移动中第一次打开时发生。因此，一个简单的解决方法是暂时将文件更改为读写模式，在 Vista 上打开它并将其恢复为只读。

我无法使用此解决方案，因为我的应用程序从 DVD 运行。

**解决方案2：**

> 有 3 个 sdf 文件，一个用于 XP/Server 2003，一个用于 Vista/Server 2008/Win7，一个用于 win 8

这也很糟糕，因为我在应用程序 DVD 上没有可用空间来执行此操作。

任何人都有解决这个问题的好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:40:15.720

将文件复制到可以写入的位置，然后从文件中删除*只读*属性。连接到这个文件。

[`Environment.SpecialFolder`](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)可以调用 with[`SpecialFolder.LocalApplicationData`](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)来获得合适的位置。

[`Path.GetTempPath`](http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx)在这方面也可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:41:39.640

您需要在 DVD 上拥有 2 份数据库文件副本，一份用于 XP/Server 2003，一份用于 Vista 及更高版本。或者在应用程序首次启动时将数据库复制到可写位置。同样的问题适用于 SQL Server Compact 4.0

# java - 使用swings在java中聊天

> ID：13064447
> 
> 赞同：0
> 
> 时间：2012-10-25T08:20:56.667
> 
> 标签：java, database, swing

我添加了一个聊天选项。我没有使用套接字或端口，因为我对此一无所知。我使用了一个计时器，比如 1 秒，并且每秒钟检查一次数据库是否有任何更改，如果有任何更改，用户会在那个时刻收到警报。数据库通过网络共享。这东西有效，我的 JPanel 已更新，它运行顺畅，就像聊天一样。我想问一下，每秒轮询数据库是否有效？这是个好主意吗？提前谢谢各位！建议:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:23:16.897

如果你没有套接字编程的概念。我建议你暂时忘记波动，先看看[**这个**](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)。

# ruby - 未满足 RSpec 消息期望

> ID：13064452
> 
> 赞同：1
> 
> 时间：2012-10-25T08:21:06.073
> 
> 标签：ruby, rspec

我有以下代码：

```
require_relative '../spec_helper'

describe PaymentProcessor do
  before(:each) do
    @processor = PaymentProcessor.new
  end

  describe '#process' do
    context 'payment accepted, sha digest valid' do
      it 'should return true and have no errors' do
        GamePlayResult.stub(:new).and_return(mock('GamePlayResult'))
        ticket = stub_model(Ticket, player: stub_model(Player, has_funds?: true))
        Ticket.stub(:find).and_return ticket
        game = stub_model(Game, play: ticket, tolerance: 10)
        query = 'orderID=1060&STATUS=5&PAYID=17314217&NCERROR=0&SHASIGN=E969563B64ED6F93F5DC47A86B1B04DFC884B4A7'
        @processor.process(query, game).should_not be_false
        game.should_receive(:play)
        @processor.error.should equal nil
      end
    end
  end
end 
```

除此以外的所有断言`game.should_receive(:play)`都得到满足。但是我知道它`:play`正在被调用，因为a）如果它不是，其他断言将失败，并且b）如果我不存根它，我会收到一个意外的消息错误。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:30:30.407

在调用将执行该期望的代码**之前**，您必须设置您的 RSpec期望。

所以这：

```
@processor.process(query, game).should_not be_false
game.should_receive(:play) 
```

应该改成这样：

```
game.should_receive(:play)
@processor.process(query, game).should_not be_false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:30:10.090

很难看出这里实际调用了什么代码，但从那里的内容来看，我假设它是这一行：

```
@processor.process(query, game).should_not be_false 
```

如果是这样，那么问题是在您运行代码*之后*您的期望即将到来，这将不起作用。将`game.should_receive(:play)`线移到`@processor.process(query, game)`线上方，它应该通过：

```
 it 'should return true and have no errors' do
    GamePlayResult.stub(:new).and_return(mock('GamePlayResult'))
    ticket = stub_model(Ticket, player: stub_model(Player, has_funds?: true))
    Ticket.stub(:find).and_return ticket
    game = stub_model(Game, play: ticket, tolerance: 10)
    query = 'orderID=1060&STATUS=5&PAYID=17314217&NCERROR=0&SHASIGN=E969563B64ED6F93F5DC47A86B1B04DFC884B4A7'
    game.should_receive(:play)
    @processor.process(query, game).should_not be_false
    @processor.error.should equal nil
  end 
```

# javascript - using jquery to access event values?

> ID：13064456
> 
> 赞同：2
> 
> 时间：2012-10-25T08:21:11.563
> 
> 标签：javascript, jquery

When using for events for internet explorer we are currently using statements like this to access or change values:

```
window.event.cancelBubble = true;
clickX = window.event.screenX; 
```

I was wondering how to do this cross browser or using JQuery?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:23:35.587

When you provide a callback to a jquery binding function, it always take as first parameter a event that you should use, even on IE.

Don't use `window.event` if you're using jQuery.

Note that this is a jQuery wrapped event. For some uses you may need the `originalEvent` property of the event you get. Here's how you can get both in a callback :

```
​$('#A').click(function(e){
    console.log(e); // jquery event
    console.log(e.originalEvent); // native event
});​ 
```

# c++ - 奇怪的函数行为c ++，不返回相同的答案

> ID：13064460
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:21:31.250
> 
> 标签：c++, function, reference, dereference

我正在用 C++ 创建一个队列类，但无法让前端函数正常工作。它应该打印队列中第一个节点的值。我的 queue.cpp 课程在这里

```
#include "queue.h"
#include <stdlib.h>
#include <iostream>
using namespace std;

queue::queue()
{
   front_p = NULL;
   back_p = NULL;
   current_size = 0;
}

void queue::enqueue(int item)
{
    node newnode = node(item, NULL);
   if (front_p == NULL) //queue is empty
    {
       front_p = &newnode;
       back_p = &newnode;
    }
   else 
   {
       back_p->next = &newnode;
       back_p = &newnode;
   }
   current_size ++;
}

int queue::dequeue()
{
   //if there is only one node
    if (front_p == back_p)
    {
        front_p = NULL;
        back_p = NULL;
    }
    //if there are two or more
    else
        front_p = front_p->next;
    current_size --;
}

int queue::front()
{
    if (front_p != NULL)
        return (*front_p).data;
}

bool queue::empty()
{
    if (front_p == NULL && back_p == NULL)
        return true;
    else
        return false;
}

int queue::size()
{
    return current_size;
} 
```

我的头文件（queue.h）在这里

```
class queue
{
  public:
    queue(); // constructor - constructs a new empty queue.
    void enqueue( int item ); // enqueues item.
    int dequeue();  // dequeues the front item.
    int front();   // returns the front item without dequeuing it.
    bool empty();  // true iff the queue contains no items.
    int size();  // the current number of items in the queue.
    int remove(int item); // removes all occurrances of item 
      // from the queue, returning the number removed.

  private:
    class node  // node type for the linked list 
    {
       public:
           node(int new_data, node * next_node ){
              data = new_data ;
              next = next_node ;
           }
           int data ;
           node * next ;
    };

    node* front_p ;
    node* back_p ;
    int current_size ; // current number of elements in the queue.
}; 
```

测试程序（tester.cpp）

```
#include <iostream>
#include "queue.h"
#include <stdlib.h>
using namespace std;

int main(int argc, char * const argv[])
{
    queue q1;
    q1.enqueue(5);
    cout << "front: " << q1.front() << endl;
    cout << "front: " << q1.front() << endl;
    cout << "front: " << q1.front() << endl;
    q1.enqueue(10);
    cout << "front: " << q1.front() << endl;
    cout << "front: " << q1.front() << endl;
    cout << "size: " << q1.size() << endl;
} 
```

生成文件

```
all: tester

tester: queue.o tester.o
    g++ tester.o queue.o -o tester

tester.o: tester.cpp
    g++ -c tester.cpp

queue.o: queue.cpp queue.h
    g++ -c queue.cpp

clean:
    rm -f tester *.o 
```

当我运行我的测试程序时，我得到了这个：

```
front: 5
front: 6299744
front: 6299744
front: 10
front: 6299744
size: 2 
```

如您所见，在第一次入队之后，front 返回了它应该返回的值，即队列前面的值。但之后它返回一些奇怪的数字，我不知道它来自哪里！然后当我再次入队时，它再次打印正常。只有在两次调用 front 之后，它才会开始打印混乱的值。谁能帮我理解发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:25:08.547

您的程序遇到未定义的行为，因为您有指向您不拥有的内存的指针：

```
void queue::enqueue(int item)
{
   node newnode = node(item, NULL);
   if (front_p == NULL) //queue is empty
    {
       front_p = &newnode;
       back_p = &newnode;
    }
   else 
   {
       back_p->next = &newnode;
       back_p = &newnode;
   }
   current_size ++;
} 
```

在函数结束时，被`newnode`销毁，但仍然指向该内存位置。要么动态分配：`front_p``back_p`

```
node* newnode = new node(item, NULL); 
```

或使用`std::shared_ptr<node>`.

# namespaces - “没有路线匹配”：带有路由轨道命名空间的噩梦

> ID：13064463
> 
> 赞同：0
> 
> 时间：2012-10-25T08:21:34.320
> 
> 标签：namespaces, routes, ruby-on-rails-3.2

我对导致错误操作“显示”而不是“新”的命名空间 URL 感到疯狂。

当我使用这个 URL 时：**admin/admin_utilisateurs/new** 我得到这个**错误**：

```
Routing Error
No route matches {:action=>"show", :controller=>"admin/admin_utilisateurs"}
Try running rake routes for more information on available routes. 
```

这是我在索引页中使用的**link_to ：**

```
link_to 'Nouveau', new_admin_admin_utilisateur_path, :class => 'btn-text btn-dimensions btn-encrusted metal' 
```

这些是我的**rake 路线**：

```
 root        /                                              welcome#index
                     pub_responsables GET    /catalogs/managers(.:format)                   pub_responsables#index
                                      POST   /catalogs/managers(.:format)                   pub_responsables#create
                  new_pub_responsable GET    /catalogs/managers/new(.:format)               pub_responsables#new
                 edit_pub_responsable GET    /catalogs/managers/:id/edit(.:format)          pub_responsables#edit
                      pub_responsable GET    /catalogs/managers/:id(.:format)               pub_responsables#show
                                      PUT    /catalogs/managers/:id(.:format)               pub_responsables#update
                                      DELETE /catalogs/managers/:id(.:format)               pub_responsables#destroy
        new_admin_utilisateur_session GET    /admin_utilisateurs/sign_in(.:format)          devise/sessions#new
            admin_utilisateur_session POST   /admin_utilisateurs/sign_in(.:format)          devise/sessions#create
    destroy_admin_utilisateur_session DELETE /admin_utilisateurs/sign_out(.:format)         devise/sessions#destroy
           admin_utilisateur_password POST   /admin_utilisateurs/password(.:format)         devise/passwords#create
       new_admin_utilisateur_password GET    /admin_utilisateurs/password/new(.:format)     devise/passwords#new
      edit_admin_utilisateur_password GET    /admin_utilisateurs/password/edit(.:format)    devise/passwords#edit
                                      PUT    /admin_utilisateurs/password(.:format)         devise/passwords#update
cancel_admin_utilisateur_registration GET    /admin_utilisateurs/cancel(.:format)           admin_utilisateurs/registrations#cancel
       admin_utilisateur_registration POST   /admin_utilisateurs(.:format)                  admin_utilisateurs/registrations#create
   new_admin_utilisateur_registration GET    /admin_utilisateurs/sign_up(.:format)          admin_utilisateurs/registrations#new
  edit_admin_utilisateur_registration GET    /admin_utilisateurs/edit(.:format)             admin_utilisateurs/registrations#edit
                                      PUT    /admin_utilisateurs(.:format)                  admin_utilisateurs/registrations#update
                                      DELETE /admin_utilisateurs(.:format)                  admin_utilisateurs/registrations#destroy
       admin_utilisateur_confirmation POST   /admin_utilisateurs/confirmation(.:format)     devise/confirmations#create
   new_admin_utilisateur_confirmation GET    /admin_utilisateurs/confirmation/new(.:format) devise/confirmations#new
                                      GET    /admin_utilisateurs/confirmation(.:format)     devise/confirmations#show
             admin_utilisateur_unlock POST   /admin_utilisateurs/unlock(.:format)           devise/unlocks#create
         new_admin_utilisateur_unlock GET    /admin_utilisateurs/unlock/new(.:format)       devise/unlocks#new
                                      GET    /admin_utilisateurs/unlock(.:format)           devise/unlocks#show
             admin_admin_utilisateurs GET    /admin/admin_utilisateurs(.:format)            admin/admin_utilisateurs#index
                                      POST   /admin/admin_utilisateurs(.:format)            admin/admin_utilisateurs#create
          new_admin_admin_utilisateur GET    /admin/admin_utilisateurs/new(.:format)        admin/admin_utilisateurs#new
         edit_admin_admin_utilisateur GET    /admin/admin_utilisateurs/:id/edit(.:format)   admin/admin_utilisateurs#edit
              admin_admin_utilisateur GET    /admin/admin_utilisateurs/:id(.:format)        admin/admin_utilisateurs#show
                                      PUT    /admin/admin_utilisateurs/:id(.:format)        admin/admin_utilisateurs#update
                                      DELETE /admin/admin_utilisateurs/:id(.:format)        admin/admin_utilisateurs#destroy 
```

有关信息，我在名为“admin_utilisateurs”的用户表上使用设计。设计与选项配合得很好：:database_authenticatable, :confirmable, :recoverable, :registerable, :trackable, :timeoutable, :validatable, :lockable

关键是我在 admin_utilisateurs 表上设置了另一个用于管理目的的控制器。

所以这里是我的**config/routes.rb**

```
 root :to => 'welcome#index'

  resources :pub_responsables, :path =>'/catalogs/managers'

  devise_for :admin_utilisateurs, :controllers => {:registrations => 'admin_utilisateurs/registrations'}

  namespace :admin do
    resources :admin_utilisateurs
  end 
```

所以我的管理控制器位于**app/controllers/admin/admin_utilisateurs_controller.rb**

这是我**的“新”**控制器操作的操作：

```
class Admin::AdminUtilisateursController < ApplicationController

  before_filter :authenticate_admin_utilisateur!

  ...

  def new
    @admin_utilisateur = AdminUtilisateur.new
    respond_with(@admin_utilisateur)
  end

  ...
end 
```

该控制器的视图位于 app/view/admin/admin_utilisateurs/

但问题确实与路线有关，因为“显示”、“编辑”和“更新”的其他路径工作正常。

如果我删除我的控制器 app/controllers/admin/admin_utilisateurs_controller.rb，Rails 不会抱怨缺少控制器，她仍然会抱怨“没有显示操作的路线”。

我真的迷路了。有人可以建议吗？提前致谢

**===== 更新 1 =====**

这是与我的 URL 请求相关的日志：

```
Started GET "/admin/admin_utilisateurs/new" for 127.0.0.1 at 2012-10-25 12:55:05 +0200
Processing by Admin::AdminUtilisateursController#new as HTML
  Rendered shared/_main_title.html.haml (0.4ms)
  Rendered admin/admin_utilisateurs/_form.html.haml (17.2ms)
  Rendered admin/admin_utilisateurs/new.html.haml within layouts/application (31.7ms)
Completed 500 Internal Server Error in 45ms

ActionController::RoutingError (No route matches {:action=>"show", :controller=>"admin/admin_utilisateurs"}):
  app/views/admin/admin_utilisateurs/_form.html.haml:1:in `_app_views_admin_admin_utilisateurs__form_html_haml___780348754_85631840'
  app/views/admin/admin_utilisateurs/new.html.haml:9:in `_app_views_admin_admin_utilisateurs_new_html_haml__296364877_85537950'
  app/controllers/admin/admin_utilisateurs_controller.rb:51:in `new' 
```

似乎它已正确路由，但视图中存在问题。

我尝试删除控制器文件 admin_utilisateurs_controller.rb**但这次重新启动我的 Web 服务器**（sudo service apache2 restart）并且错误不同。这次我得到了“路由错误未初始化常量 Admin::AdminUtilisateursController”。

所以这个确认在我看来有一个问题......深入挖掘......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:29:55.737

好的，我发现了问题。问题来自我用于“编辑”操作和“新”操作的部分表单视图：/app/views/admin/admin_utilisateurs/_form.html.haml

```
= form_for @admin_utilisateur, :url => admin_admin_utilisateur_path, :html => {:class => "formulaire-standard"} do |f|

  = render :partial => 'shared/error_message', :locals => { :element => @admin_utilisateur, :debut_erreur => 'Cet utilisateur ne peut être enregistré'}

  .groupe-champs
    .champ
      = f.label :nom
      = f.text_field :nom, :class => 'input-width-8-col', :required => 'required'
    .champ
      = f.label :prenom
      = f.text_field :prenom, :class => 'input-width-5-col', :required => 'required'
    .champ
      = f.label :telephone
      = f.telephone_field :telephone, :class => 'input-width-5-col', :required => 'required'
    .champ
      = f.label :mobile
      = f.telephone_field :mobile, :class => 'input-width-5-col'
    .champ
      = f.label :email
      = f.email_field :email, :class => 'input-width-8-col', :required => 'required'

  .groupe-champs
    = render :partial => 'shared/checkboxes_admin_utilisateur', :locals => { :resource => @admin_utilisateur }

  .groupe-champs
    .champ-1
      = f.check_box :approved
    .champ-5
      = f.label :approved
    .checkbox-explication
      = t('activerecord.attributes.admin_utilisateur.explanations.active')

  .separator

  .groupe-actions
    = f.submit 'Enregistrer', :class => 'btn-text btn-dimensions btn-encrusted metal'
    = link_to 'Annuler', admin_admin_utilisateur_path, :class => 'btn-text btn-dimensions btn-encrusted metal' 
```

我错误地使用了 form_for 标签。因为我的表单在命名空间中使用，所以我必须将命名空间添加到其参数中，并删除 :url 选项，否则此表单将仅适用于“编辑”操作：

```
= form_for [:admin, @admin_utilisateur], :html => {:class => "formulaire-standard"} do |f| 
```

这段代码让 Rails 猜测使用什么路径来创建新记录或编辑现有记录。所以我不需要指定 :url 和 :method。

第二个错误是（一个经典的）表单底部的link_to。我忘记了路由助手（admin_admin_utilisateurSSSS_path）末尾的“s”：

```
= link_to 'Annuler', admin_admin_utilisateurs_path, :class => 'btn-text btn-dimensions btn-encrusted metal' 
```

# 这个故事的主旨 ：

**始终检查您的 /log/development.log 文件！**;-)

# facebook - Facebook 应用程序链接损坏

> ID：13064464
> 
> 赞同：0
> 
> 时间：2012-10-25T08:21:48.067
> 
> 标签：facebook, login, hyperlink

今天，在我的 Facebook 应用程序上，链接似乎已损坏。每次单击链接（指向应用程序的另一个页面，而不是外部）时，Facebook 都会将用户返回到登录提示，即使用户已经登录。我通常使用相对 url，但如果我设置绝对，链接也不起作用，但在这种情况下页面不会改变......有人有同样的问题吗？有任何想法吗？我只是找不到解决方案..

编辑：对于“Facebook 应用程序”，我指的是在 Facebook 网站上运行的 iframe 应用程序，而不是用于移动设备的 Facebook 应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:09:08.427

已解决:) 问题是我在旧版本的 PHP SDK 上使用的。我已经用最新版本更新了 SDK 以及代码的登录部分；现在好啦。感谢你的帮助 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:23:18.500

您是否尝试重新安装 Facebook 应用程序？此外，如果您使用 Android，您可以删除手机上的缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:58:35.727

> 每次单击链接（指向应用程序的另一个页面，而不是外部页面）时，Facebook 都会将用户返回到登录提示，即使用户已经登录。

您是否为您的应用启用了 Authenticated Referrals？

否则，您必须在应用程序的某处触发登录。如果是这样，请检查您这样做的条件，以及您的应用程序是否正确识别登录用户，或者是否可能存在某种 cookie 问题。

如果这不能帮助您自己解决问题，请使用相关代码更新您的问题。

# ios - 讲解 iOS 中 Energy Usage Instrument 的统计数据

> ID：13064468
> 
> 赞同：1
> 
> 时间：2012-10-25T08:21:58.973
> 
> 标签：ios, instruments, energy

我正在尝试使用**Instrument**查找我的 iOS 应用程序的**能源使用情况**。

 **我得到了诸如时间、总活动、前台应用活动、音频处理和百分比格式的图形等统计数据。Foreground App Activity、Audio Processing 和 Graphics 的总和与 Total Activity 不同！

但我不明白**这些列的含义是**什么？谁能解释一下**这些统计数据的含义**以及如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-03T12:42:16.197

最新的[能源诊断](https://developer.apple.com/library/ios/documentation/Performance/Conceptual/EnergyGuide-iOS/MonitorEnergyWithInstruments.html)文档说：

> 能源使用工具显示从 0 到 20 的级别，指示您的应用在给定时间使用了多少能源。这些数字是主观的。如果您的应用程序的能源使用水平偶尔较高，这并不一定意味着您的应用程序有问题。您的应用程序可能只是需要更多的能量来执行它执行的某些任务。例如，它可能在执行复杂的网络操作时使用 GPS。这是有效的能源使用。您应该寻找的是意外或可以在更佳时间执行的高能量使用峰值或区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:49:36.837

是的，当然有区别。最好的使用方法；一次做一个。观察每个活动消耗并以优化为目标。**

# performance - zk vs gwt zk 请求太多

> ID：13064470
> 
> 赞同：3
> 
> 时间：2012-10-25T08:22:01.513
> 
> 标签：performance, gwt, zk

嗨，我正在尝试比较 zk 和 gwt 的性能。

在我的比较中，如果框架本身将一些代码转换为 js，我不能自己编写任何 javascript，它可以（如 gwt）但我不能自己编写 js

在以上述方式为浏览器上完成的几乎所有事情编写代码时，请求被发送到 ZK 中的服务器。

因此，最终如果您比较 zk 向服务器发送的请求数量与 gwt 相比太高。

我想问以下问题。

1.  在忽略上述情况下，其性能优于 zk 或 gwt。
2.  如果我们不忽略上述内容，那么我的结论是 gwts 性能优于 zk 吗？

我知道在比较性能时可能还有其他参数......但是如果请求之间的差异如此之大，我真的看不到 zk 击败 gwt，有些人在某些论坛上说过

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T06:41:08.533

GWT 和 ZK 在架构上非常不同。GWT 以客户端为中心，因此它向服务器发送的请求更少。使用 GWT，您基本上可以自己控制一切。另一方面，这意味着开发人员负责处理服务器请求以及服务器和客户端之间的异步数据传输。如果您是一位经验丰富的 Web 开发人员，那么结果可能会很棒。如果您不是，那么它可能会非常具有挑战性和复杂性，因为您需要注意一些网络和安全问题。

另一方面，ZK 是以服务器为中心的，它为您处理这些服务器-客户端异步通信。使用 ZK，开发人员可以更多地关注业务逻辑，而无需处理客户端-服务器问题。由于框架负责客户端-服务器对话，因此默认情况下会有更多请求。如果您希望最小化请求，您可以按照他们的开发人员指南进行一些调整。

IMO ZK 和 GWT 都是成熟的框架。您可能可以考虑您的项目需求和您在 Web 开发方面的经验，然后选择解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:39:59.003

ZK 专注于服务器端，因为 GWT 都在浏览器中，所以 ZK 需要更多的 ajax 访问服务器来获取 js 片段、屏幕部分等，而 GWT 只是在开始时访问服务器以下载 js 应用程序（其中将永远缓存在客户端中）以及每当应用程序需要来自后端的一些数据时。

就是说，恕我直言，GWT 应该表现更好，因为您不需要在服务器（更轻的服务器）中执行任何类型的视图逻辑，并且线路中的请求更少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T16:55:27.103

GWT 和 ZK 有点不同。

我做过一些 ZK 项目和一些 GWT 项目。在这两种情况下我都没有遇到性能问题，但我觉得在使用 GWT 时我需要编写更多代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T06:46:59.193

之前的帖子基本都是，不过zk有一些特性，我觉得是必须要讲的。
请记住，每个请求都是一个 zk-event，因为 zk 是完全基于事件的。

1.  [客户端事件处理](http://books.zkoss.org/wiki/ZK_Client-side_Reference/General_Control/Event_Listening)
    Zk 允许您像服务器端一样实现客户端事件处理，其中包括防止 zk 向服务器触发事件​​。
    您可以在 js 中简单地操作客户端对象，就像您可以在服务器端在 Java 中进行操作一样，
    或者只是进行一些后期处理，然后...

2.  [使用客户端事件触发](http://books.zkoss.org/wiki/ZK%20Client-side%20Reference/Communication/AU%20Requests/Client-side%20Firing)
    Zk 获得了有用的 js 方法[zAu.send(zk.Event,int)](http://www.zkoss.org/javadoc/latest/jsdoc/_global_/zAu.html#send%28zk.Event,%20int%29)，让您可以将自定义或标准事件发送到服务器。
3.  [可延迟事件侦听器](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Event_Handling/Event_Listening#Deferrable_Event_Listeners)
    可延迟事件在客户端排队，因此您可以最大限度地减少请求数量。
4.  [Stubonly](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Performance_Tips/Specify_Stubonly_for_Client-only_Components)
    Stubonly 是一种仅在客户端制作组件的方法。但到目前为止，这仅适用于[zk EE](http://www.zkoss.org/license/)。

因此，您可以看到，如果您愿意，可以将请求限制为可能与 GWT 相同数量的请求。
是否有意义取决于您/您的申请。但我认为你可以说 zk 比 GWT 更强大。
您可能也对[iZUML](http://books.zkoss.org/wiki/ZK%20Client-side%20Reference/General%20Control/iZUML)和[延迟渲染](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Performance_Tips/Defer_the_Rendering_of_Client_Widgets)感兴趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-14T10:28:40.247

我在两个团队的实际项目中的经验，一个使用 zk 框架编写，第二个使用 GWT。具有从相同数据服务层提供数据的相同 UI 项目。zk 团队用 GWT 团队消耗的三分之一时间完成了项目。这两个项目都部署在生产中。用户很高兴使用这两个应用程序。最后，我们将 zk 版本保留在生产环境中。为什么？仅仅是因为 zk 应用程序的维护比 GWT 更快更简单！抱歉，GWT……不错的技术得到了巨人的支持，但我们将继续使用 zk。

# android - Drawable 的深拷贝

> ID：13064473
> 
> 赞同：34
> 
> 时间：2012-10-25T08:22:12.450
> 
> 标签：android, imageview, drawable

我有一个 ImageView。在它的 onClick 中，我得到了它的 Drawable：

```
Drawable dr = ((ImageView) v).getDrawable(); 
```

并将其设置为对话框的 ImageView：

```
zoomedImage.setImageDrawable(dr); 
```

但是当我关闭对话框或恢复活动时。原始位置的图像被拉伸并显示大于其大小，导致在 ImageView 中只有一部分图像可见。

这是深拷贝的情况还是有其他问题？如果是，我该如何深度复制原始的 Drawable 以便我可以将副本设置为缩放图像？

提前致谢。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2014-08-23T13:05:04.433

终于我成功了！我有类似的问题，当我在我的drawable上使用滤色器时，它改变了drawable，它非常接近其他人的解决方案，但只有这对我有用：

```
Drawable drwNewCopy = dr.getConstantState().newDrawable().mutate(); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-19T13:09:14.423

我设法使用以下代码复制了drawable：

```
drawable.mutate().getConstantState().newDrawable(); 
```

这里`mutate()`使drawable可变以避免共享其状态，并`getConstantState().newDrawable()`创建一个新副本。

因此不同`ImageView`的 s 使用不同的可绘制对象并且没有拉伸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:27:30.827

使用[BitmapFactory](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)将可绘制对象转换为位图，分别对其进行或执行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-12T12:44:25.130

上述解决方案对我不起作用，但它有效

```
val myDrawable = DrawableCompat.wrap(view.background).mutate() as GradientDrawable
myDrawable.setColor(ContextCompat.getColor(view.context, R.color.White)) 
```

# c++ - 什么可能导致单写/多读锁死锁？

> ID：13064474
> 
> 赞同：6
> 
> 时间：2012-10-25T08:22:13.203
> 
> 标签：c++, windows, winapi

我有一个类实例，其他线程中的几个其他类使用它来进行通信。

这个类使用一个苗条的读/写锁（WinAPI's `SRWLOCK`）作为同步对象和几个 RAII 帮助类来实际锁定/解锁事物：

```
static unsigned int readCounter = 0;

class CReadLock
{
public:
    CReadLock(SRWLOCK& Lock) : m_Lock(Lock) { InterlockedIncrement(&readCounter); AcquireSRWLockShared(&m_Lock);  }
    ~CReadLock() {ReleaseSRWLockShared(m_Lock); InterlockedDecrement(&readCounter);}

private:
    SRWLOCK& m_Lock;
};

class CWriteLock
{
public:
    CWriteLock(SRWLOCK& Lock) : m_Lock(Lock) { AcquireSRWLockExclusive(&m_Lock); }
    ~CWriteLock() { ReleaseSRWLockExclusive(&m_Lock); }

private:
    SRWLOCK& m_Lock;
}; 
```

问题是整个事情一直陷入僵局。当我暂停死锁的程序时，我看到：

*   一根线卡住了`AcquireSRWLockExclusive()`；
*   两个线程卡住了`AcquireSRWLockShared()`；
*   `readCounter`全局设置为 3。

在我看来，发生这种情况的唯一方法是`CReadLock`实例的析构函数没有被以某种方式调用，所以锁永远卡住了。但是，发生这种情况的唯一方法（据我所知）是因为抛出了异常。不是。我检查了。

可能是什么问题？我应该如何解决（或至少找出原因）这件事？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T08:26:56.150

您是否以递归方式使用读取锁？

```
void foo()
{
    CReadLock rl(m_lock);
    ...
    bar();
}
void bar()
{
    CReadLock rl(m_lock);
    ...
}
void baz()
{
    CWritedLock rl(m_lock);
    ...
} 
```

如果`foo()`和`baz()`被同时调用，您可能会出现死锁：

```
1\. (Thread A) foo locks
2\. (Thread B) baz asks to create write lock now all read locks would block until all are released - waits.
3\. (Thread A) bar tries to lock and waits because there is pending write lock 
```

您有 2 个线程卡在读锁和读锁计数器上的事实是 3，这很可能表明您在其中一个锁中有递归 - 即一个线程试图获得两次读锁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T08:37:11.930

```
one thread stuck in AcquireSRWLockExclusive();
two threads stuck in AcquireSRWLockShared();
readCounter global is set to 3. 
```

好吧，据我所知，您当前有一个线程持有读锁，一个写线程等待该读锁被释放，两个读线程等待该写线程获取并释放锁。

换句话说，你有一个悬空的读取线程，它没有被破坏，就像你自己说的那样。将调试打印添加到析构函数和构造函数。

# c# - 使用 Kinect SDK 进行联合跟踪

> ID：13064479
> 
> 赞同：1
> 
> 时间：2012-10-25T08:22:25.777
> 
> 标签：c#, sdk, kinect

我正在尝试使用来自 Channel9.msdn 网站的 Kinect SDK 和 C# 代码示例同时跟踪多个关节。我正在遵循他们在那里的相同示例代码，但我无法让我的图像表示之一移动。我拥有的两个代表手的椭圆能够跟踪我的动作，但是代表头部关节的 headImage 会自动移动到窗口的左上角并且不会移动。如果我将要跟踪的关节更改为另一个关节，例如由椭圆表示的关节之一（我知道正在跟踪），headImage 仍然会转到窗口的左上角。我如何使用跟随我的动作的椭圆跟踪手关节，但是无论我将它设置到哪个关节，headImage 图像都不会移动？

更新：似乎当我从 .xaml 窗口中删除图像对象并将其替换为另一个椭圆对象时，所有椭圆都开始移动，这意味着代表之前未移动的关节的椭圆正在移动并且能够跟踪. 使用该特定图像对象一定有问题（它是为 Channel9.msdn 教程选择的相同的头部图像）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:21:33.377

在官方的 Microsoft Kinect for Windows SDK v1.6 Toolkit 示例中，查看 SkeletonBasics 项目。它表明您必须跟踪整个骨架并绘制每个关节以及连接线。只需删除您不想要的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T23:06:46.667

我建议看看@Evil Closet Monkey 提到的工具包示例，也许看看 kinect.toolbox （[Kinect 工具箱页面](http://kinecttoolbox.codeplex.com/)）提供的示例，这里提供的示例太简单和好。

# php - 如何仅扩展一个父级？

> ID：13064481
> 
> 赞同：2
> 
> 时间：2012-10-25T08:22:28.070
> 
> 标签：php, oop

假设我有 2 节课

```
class BaseClass {
   ...
}

class SomeClass extends BaseClass {

} 
```

现在我想创建第三个类，它只会扩展 SomeClass，但不会从 BaseClass 获得任何东西。这甚至可能吗？

我正在使用 webdriver 编写 Selenium 测试，并希望根据 DB 或 WebServices 检查来自 Selenium 的数据，但不想加载整个框架，只是我们的一些库

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T08:23:30.063

你不能。这不是继承的工作方式。从 SomeClass 继承的类将始终继承它的所有属性和方法，包括从 BaseClass 继承的 SomeClass 的属性和方法。您可以通过可见性限制对它们的访问，但只能从私人过度保护到公开，而不是相反，例如，您可以放松可见性，但不能收紧它。

请参阅 PHP 手册中有关继承和可见性的章节：

*   [http://php.net/manual/en/language.oop5.inheritance.php](http://php.net/manual/en/language.oop5.inheritance.php)
*   [http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

* * *

另一种选择是在 SomeClass 的实例周围使用某种 Facade 来控制对 SomeClass 中可访问的属性和方法的访问，例如假设您的 SomeClass 有一个方法 foo() 并从 BaseClass 继承 bar()，您可以这样做

```
class LimitedAccess
{
     private $instance;

     public function __construct(SomeClass $someClass)
     {
          $this->instance = $someClass
     }

     public function foo()
     {
         return $this->instance->foo;
     }
} 
```

然后你可以通过这个 Facade 有效地阻止访问 BaseClass::bar() 的所有访问。请注意，这不会以任何方式更改继承层次结构。它只是控制访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:34:29.950

想想人类......你有母亲，她有母亲......你不能成为你母亲的儿子，而不是你祖母的孙子......

同样是在 PHP

当 Class 扩展其他它的 AWAYS 时，他的孩子......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:44:25.977

如果您在要限制为从类调用`PROTECTED`的方法上放置访问修饰符，则绝对可以这样做。`BaseClass``Third`

# c# - Task.ContinueWIth 的异步方法回调？

> ID：13064482
> 
> 赞同：3
> 
> 时间：2012-10-25T07:07:17.970
> 
> 标签：c#, asynchronous, async-await, c#-5.0

我有一种方法可以通过 HttpClient 提取一些 HTML，如下所示：

```
public static HttpClient web = new HttpClient();
public static async Task<string> GetHTMLDataAsync(string url)
{                    
    string responseBodyAsText = "";
    try
    {
       HttpResponseMessage response = await web.GetAsync(url);
       response.EnsureSuccessStatusCode();
       responseBodyAsText = await response.Content.ReadAsStringAsync();
    }
    catch (Exception e)
    {
       // Error handling
    }

    return responseBodyAsText;
} 
```

我有另一种看起来像这样的方法：

```
private void HtmlReadComplete(string data)
{
    // do something with the data
} 
```

我希望能够调用 GetHTMLDataAsync，然后在读取 html 后让它在 UI 线程上调用 HtmlReadComplete。我天真地认为这可以通过某种看起来像的东西来完成

```
GetHTMLDataAsync(url).ContinueWith(HtmlReadComplete); 
```

但是，我无法使语法正确，我什至不确定这是处理它的适当方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:31:59.983

```
public async void ProcessHTMLData(string url)
{
    string HTMLData = await GetHTMLDataAsync(url);
    HTMLReadComplete(HTMLData);
} 
```

甚至

```
public async void ProcessHTMLData(string url)
{
    HTMLReadComplete(await GetHTMLDataAsync(url));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:16:18.343

你很接近，但`ContinueWith()`需要一个委托`Task`作为它的参数，所以你可以这样做：

```
GetHTMLDataAsync(url).ContinueWith(t => HtmlReadComplete(t.Result)); 
```

通常，您应该小心与 with`Result`一起使用`async`，因为如果尚未完成，`Result`则会阻塞。`Task`但是在这种情况下，你肯定知道`Task`是完整的，你`Result`不会阻塞。

# java - 无法实例化类型 Lock

> ID：13064485
> 
> 赞同：1
> 
> 时间：2012-10-25T08:22:39.660
> 
> 标签：java, synchronization

1.  当使用**锁**而不是声明同步函数来更公平地防止java中的饥饿时，它不能实例化*类型锁*

2.  是否需要像[http://tutorials.jenkov.com/java-concurrency/starvation-and-fairness.html](http://tutorials.jenkov.com/java-concurrency/starvation-and-fairness.html) 那样实现 FairLock，java 的锁是否等于上面的**FairLock**？它说**FairLock**会降低性能，在实际实践中会怎样

    ```
    Lock lock = new Lock(); 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:43:06.490

您可能正在尝试实例化一个[java.util.concurrent.locks.Lock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html)，它是一个接口。那当然行不通。您需要实例化一个实现，例如[ReentrantLock](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html)，这几乎是在 Java 中执行“灵活”锁的标准方式，以防简单的监视器锁不够用。它的文档对公平有话要说：

> 此类的构造函数接受一个可选的公平参数。当设置为 true 时，在争用情况下，锁有利于授予对等待时间最长的线程的访问权限。否则，此锁不保证任何特定的访问顺序。使用由许多线程访问的公平锁的程序可能会显示出比使用默认设置的程序更低的整体吞吐量（即，更慢；通常要慢得多），但在获取锁和保证不会出现饥饿的情况下具有更小的差异。但是请注意，锁的公平性并不能保证线程调度的公平性。因此，使用公平锁的许多线程之一可能会连续多次获得它，而其他活动线程没有进展并且当前没有持有锁。另请注意，不定时的 tryLock 方法不遵守公平设置。

# ios - 是否有关于 iOS 6 权限的开发人员指南？

> ID：13064487
> 
> 赞同：0
> 
> 时间：2012-10-25T08:22:54.403
> 
> 标签：ios, permissions, ios6, ios-permissions

正如问题所问。

我正在寻找有关权限的指南。我以前只为 Android 开发过，我想知道是否有类似于[http://developer.android.com/guide/topics/security/permissions.html的指南](http://developer.android.com/guide/topics/security/permissions.html)

我不完全确定权限是如何工作的（或者它们是否在 iOS 6 上被称为这个）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:32:58.723

您不像在 Android 上那样拥有权限，因为您必须在手头的某个地方声明它们。

例如，当您启动 locationmanager 时，系统会询问用户是否允许您的应用接收位置更新。如果用户不允许这样做，[`CLLocationManager`](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)则将调用委托它无法检索任何位置更新。

还有一个方法[`CLLocationManager`](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)被调用[`authorizationStatus`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW11)来检查当前状态。这是一个[`CLAuthorizationStatus`](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW12).

每个其他组件都会有一种类似的方法和错误来检查用户是否允许您的应用访问数据。

# css - CSS 矩形，一侧为椭圆形

> ID：13064488
> 
> 赞同：12
> 
> 时间：2012-10-25T08:22:59.267
> 
> 标签：css

这可以用 CSS 实现吗？（颜色不重要，只是底部是椭圆形）

![在此处输入图像描述](../Images/443147ece7cd7534fee79c5c090b8895.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T08:30:21.700

尝试

```
background-color: #60a0d0;
border-bottom-left-radius:50% 10%;
border-bottom-right-radius:50% 10%; 
```

（带有适当的浏览器前缀）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:15:36.813

你可以得到任何带有椭圆或圆的曲线，放在主块后面：http: [//jsfiddle.net/e9RLQ/1/](http://jsfiddle.net/e9RLQ/1/)

```
.box {
    position: relative;    
    background: #60a0d0;
}
.box:after {
    position: absolute;
    z-index: -1;
    left: 0;
    top: 100%;
    width: 300%;
    height: 300px;
    margin: -292px 0 0 -100%;
    background: #60a0d0;
    border-radius: 50%;
    content: "";
} 
```

这里的缺点是添加渐变背景的复杂性。

# unit-testing - 最小起订量第 4 版：NET35 和 NET40 有什么区别

> ID：13064489
> 
> 赞同：0
> 
> 时间：2012-10-25T08:23:06.917
> 
> 标签：unit-testing, .net-4.0, .net-3.5, moq

我是 Moq 的新手，想使用[最新的 Release](http://moq.googlecode.com/files/Moq.4.0.10827.Final.zip)。在下载中有 3 个变体，一个用于 .NET 3.5，两个用于 .NET 4。.NET 版本之间有什么区别？**与 4 相比，3.5 版本是否缺少任何功能？**

注意：.NET 4 的两个版本之间的区别已[包含在此问题中](https://stackoverflow.com/q/12104769/79485)，此处未提出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:35:33.053

3.5 版本引用了 3.5 .Net Framework 库（mscorlib、System、SystemConfiguration、System.Core、System.Web、System.Xml）。

版本 4 引用相同的程序集，但来自 .Net Framework 4。因此，如果项目的目标框架是 4，则应使用此 Moq 版本。

# python - Python Bottle 两次运行初始化方法

> ID：13064490
> 
> 赞同：8
> 
> 时间：2012-10-25T08:23:08.350
> 
> 标签：python, web-applications, bottle

我的瓶子有问题，该`_initialize`功能运行了两次。示例应用程序：

```
 @route("/index")
 def index():
      return "bang"

 def _initialize():
      print("bam")

 if __name__ == "__main__":
     _initialize()
     run(reloader=True, host="localhost", port = 8990) 
```

输出是：

```
bam
bam
Bottle v0.11.rc1 server starting up (using WSGIRefServer())...                             
Listening on http://localhost:8080/                                                        
Hit Ctrl-C to quit. 
```

为什么会发生这种情况，我该如何在瓶中进行这种预初始化？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T08:30:09.890

问题是函数的`reloader=True`参数`run`。请参阅[http://bottlepy.org/docs/dev/tutorial.html#auto-reloading](http://bottlepy.org/docs/dev/tutorial.html#auto-reloading)的句子：

> 所有模块级代码至少执行两次！当心。

# c# - 在 WPF 中创建包含用户控件的选项卡项的有效方法

> ID：13064497
> 
> 赞同：1
> 
> 时间：2012-10-25T08:23:20.987
> 
> 标签：c#, wpf, initialization

我有一个选项卡控件和许多以编程方式填充并包含自定义控件的选项卡项。`initializeComponent`在创建选项卡控件时，每个自定义控件都会被实例化并在每个用户控件上调用。

我怀疑这是一种不好的做法，因为一些用户控件可能包含大量数据、初始化数据库连接等。我想让它尽可能高效。我想要做的是最小化每个用户控件完成的工作量，直到它所在的选项卡被实际选中并且对用户可见。

在四处挖掘之后，我发现[了这个](http://www.codeproject.com/Articles/217022/Delaying-Element-Initialization-for-Collapsed-Cont)详细说明折叠控件的延迟初始化。我已经设法让它为我的标签工作，但经过更多的挖掘后，我设法找到了`Loaded`和`Unloaded`事件。我是否能够通过简单地`initializeComponent`从用户控件构造函数中删除并将其添加到`Loaded`事件处理程序来实现延迟初始化？

理想情况下，我希望能够在`unloaded`事件触发时取消初始化用户控件，直到下一次`loaded`触发事件。有没有办法扭转在初始化组件期间发生的 xaml 加载？

我意识到这可能不是一个微不足道的答案，但我将不胜感激任何指导/帮助。

如果您需要更多信息，请告诉我。

# plc - PLC 查看地址的位

> ID：13064508
> 
> 赞同：0
> 
> 时间：2012-10-25T08:23:46.430
> 
> 标签：plc

我正在使用 Omron PLC 并查看内存中的这个位 CIO1767 BIT 14 在二进制视图中

它要么是 1（开）要么是 0（关）

我想放入梯形逻辑。如果这个位是 on do .... 但不知道如何写那个位地址。

首先，我是否必须使用比较来查看它是 1 还是 0，或者我可以做一个常开，如果它是 0，它会给我 NC？

另外，如果不清楚，我该如何写这个我正在尝试 CIO1767.14 但这似乎不起作用？谢谢格伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:57:31.510

想通了，您可以使用 NO 或 NC 操作。对于这种情况，您必须放置操作，然后对于地址只需放置 CIO 。然后它会给您另一个弹出窗口，询问您将在此处放置 1767.14 的数据或位置。就是这样！

# java - Flyway：Oracle db 迁移不适用于 flyway 1.6 和 1.7

> ID：13064509
> 
> 赞同：1
> 
> 时间：2012-10-25T08:23:54.247
> 
> 标签：java, database, oracle11g, database-migration, flyway

将不胜感激任何线索。

在 init() 上创建表*模式版本*之后，调用 migrate() 方法时出现以下异常（对于 sql 和 java 迁移）。

> com.googlecode.flyway.core.exception.FlywayException：无法在 com.googlecode.flyway.core.metadatatable.MetaDataTable.lock（MetaDataTable.java:146）的架构“XXX”中锁定元数据表“schema_version”

...

> 原因：java.sql.SQLException：SQL 字符串不是 oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584) 的 oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1263) 的 DML 语句在 oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3665) 在 oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1352) 在 com.googlecode.flyway.core.util.jdbc.JdbcTemplate.update (JdbcTemplate.java:260) 在 com.googlecode.flyway.core.dbsupport.oracle.OracleDbSupport.lockTable(OracleDbSupport.java:76) 在 com.googlecode.flyway.core.metadatatable.MetaDataTable.lock(MetaDataTable.java:144 ) ... 61 更多

谢谢。

# security - 注册时如何保护密码？

> ID：13064510
> 
> 赞同：2
> 
> 时间：2012-10-25T08:23:54.320
> 
> 标签：security, password-encryption

我已阅读以下文章[http://lifehacker.com/5919918/how-your-passwords-are-stored-on-the-internet-and-when-your-password-strength-doesnt-matter](http://lifehacker.com/5919918/how-your-passwords-are-stored-on-the-internet-and-when-your-password-strength-doesnt-matter)

网站可以通过多种方式存储您的密码，其中一些方式比其他方式更安全。下面简要介绍了最流行的方法，以及它们对数据安全的意义。

**方法一：纯文本密码** 工作原理：网站存储密码的最简单方式是纯文本。这意味着在他们的服务器上的某处，存在一个数据库，其中包含您的用户名和密码以人类可读的形式（也就是说，如果您的密码是 testing123，它作为 testing123 存储在数据库中）。当您在网站上输入您的凭据时，它会根据数据库检查它们是否匹配。从安全角度来看，这是最糟糕的方法，而且大多数信誉良好的网站都不以纯文本形式存储密码。如果有人破解了这个数据库，每个人的密码都会立即被泄露。

我的强密码重要吗？没门。无论您的密码有多长或多强，如果它以纯文本形式存储并且网站被黑客入侵，任何人都可以轻松访问您的密码，无需任何工作。在向朋友或其他容易猜到密码的人隐藏密码方面仍然很重要，但如果网站被黑客入侵，它不会有任何区别。

**方法二：基本密码加密** 工作原理：为了为您的密码添加比纯文本提供的更多保护，大多数网站在将密码存储在其服务器上之前都会对您的密码进行加密。对于那些不知道的人，加密使用特殊的密钥将您的密码变成随机的文本字符串。如果黑客获得了这个随机的文本字符串，他们将无法登录您的帐户，除非他们也拥有密钥，然后他们可以使用该密钥对其进行解密。

问题是，密钥通常与密码存储在同一台服务器上，因此如果服务器被黑客入侵，黑客不必做太多工作来解密所有密码，这意味着这种方法仍然非常不安全.

我的强密码重要吗？不会。由于使用密钥很容易解密密码数据库，因此您的强密码在这里也不会产生影响。再说一遍：这是网站被黑客入侵的情况；如果你有一个爱管闲事的朋友或家人在浏览你的东西，一个强密码可以帮助他们避免猜测。

**方法三：散列密码** 工作原理：散列类似于加密，因为它会将您的密码变成一长串字母和数字以使其隐藏。然而，与加密不同的是，散列是一种单行道：如果你有散列，你就不能向后运行算法来获得原始密码。这意味着黑客必须获取哈希值，然后尝试多种不同的密码组合才能查看哪些有效。

但是，这种方法有一个缺点。虽然黑客无法将哈希解码回原始密码，但他们可以尝试许多不同的密码，直到其中一个与他们拥有的哈希匹配。计算机可以非常快地做到这一点，并且借助一种叫做彩虹表的东西——它本质上是一个包含数万亿个不同哈希值及其匹配密码的列表——它们可以查找哈希值以查看它是否已经被发现。尝试在 Google 中输入 e38ad214943daad1d64c102faec29de4afe9da3d。您会很快发现它是“password1”的 SHA-1 哈希。有关彩虹表如何工作的更多信息，请查看这篇文章，通过编码大师 Jeff Atwood 就该主题进行编码。

我的强密码重要吗？在这种情况下，是的。彩虹表由已经过哈希测试的密码组成，这意味着真正弱的密码将很快被破解。然而，它们最大的弱点不是复杂性，而是长度。你最好使用一个很长的密码（比如 XKCD 著名的“正确的马电池订书钉”）而不是一个短而复杂的密码（比如 kj$fsDl#）。

**方法四：用** 少许盐对密码进行哈希处理 工作原理：对哈希进行哈希处理意味着在对密码进行哈希处理之前，在密码的开头或结尾添加一个随机字符串（称为“salt”）。它为每个密码使用不同的盐，即使盐存储在相同的服务器上，也很难在彩虹表中找到那些加盐的散列，因为每个散列都是长、复杂和唯一的。LinkedIn 以不使用加盐哈希而闻名，这使他们在最近的黑客攻击后受到了很多审查——如果他们使用了盐，他们的用户会更安全。

通过阅读上述文章，我想到了以下问题

*1* .即使我没有密码，我仍然可以截获消息摘要......我什至不需要密码......我会简单地发起回复攻击（即截获后发送消息摘要自己进行身份验证它！！）

上述问题的解决方法可以通过以下方式解决 a.服务器向用户生成一个随机字符串（通常称为挑战）并要求他用他的密码对其进行加密..... b.用户输入他的密码，消息摘要密码被创建，随机字符串被这个消息摘要加密 c.这个加密的字符串被发送到服务器。d.server还用用户的消息摘要加密随机字符串，用从用户收到的加密字符串检查它，如果两者匹配，他是有效用户..！

*2.*我的问题是如果黑客访问数据库，他将访问消息摘要/即使他没有访问数据库，他仍然可以在用户首次注册数据库时拦截通信链接时获取消息摘要.. ....如何防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:29:30.160

> 即使我没有密码，我仍然可以截获消息摘要......我什至不需要密码......我会简单地发起回复攻击（即，截获后发送消息摘要本身进行身份验证！ ！）

这应该是不可能的。

客户端应将真实密码发送到服务器。它应该使用 SSL 加密。

服务器应该散列密码并将其与存储的散列密码进行比较。

> 以上问题的解决方案……</p>

也就是说，或多或少是 SSL 所做工作的一部分。

> 我的问题是如果黑客可以访问数据库，他将可以访问消息摘要

这是一个*相对*无关紧要的问题。密码应存储为具有不同盐的哈希值。原始密码受到保护。

> 即使他没有访问数据库，他仍然可以在用户首次注册到数据库时，在拦截通信链接的同时获取消息摘要

仅当 SSL 被破坏时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:23:15.020

用户注册*应*始终通过 SSL 隧道完成，因此通常在遵循最佳实践时，您不必担心中间人类型的攻击。

# mysql - 使用 unix 时间戳选择过去 5 分钟内的行

> ID：13064516
> 
> 赞同：4
> 
> 时间：2012-10-25T08:24:18.000
> 
> 标签：mysql, sql, unix-timestamp

我试图弄清楚在过去 5 分钟内是否将数据保存到数据库中。

```
SELECT COUNT(id), DATE_FORMAT(`timestamp`, '%Y-%m-%d %H:%i')
FROM `table`
WHERE `timestamp` >= CURRENT_TIMESTAMP - INTERVAL 5 MINUTE 
```

`timestamp`是一个 unix 时间戳（从 1970 年开始的毫秒）。

不起作用，我得到 null`num_rows`而不是 0 如果我使用

```
if (!isset($resultHistory->num_rows) || !$resultHistory->num_rows) 
```

做动作，代码不进入循环..

我也试过

```
SELECT COUNT(id), DATE_FORMAT(`timestamp`, '%Y-%m-%d %H:%i')
    FROM `table`
    WHERE DATE_FORMAT(`timestamp`, '%Y-%m-%d %H:%i') >= CURRENT_TIMESTAMP - INTERVAL 5 MINUTE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:28:00.517

Current_timestamp 将当前日期返回为 SQL TIMESTAMP，而不是 UNIX 时间戳，因此您必须使用[unix_timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数进行转换：

```
SELECT COUNT(id), from_unixtime(`timestamp` / 1000, '%Y-%m-%d %H:%i')
FROM `table`
WHERE `timestamp` >= unix_timestamp(CURRENT_TIMESTAMP - INTERVAL 5 MINUTE) * 1000 
```

编辑：

由于您的`timestamp`列包含 unix 时间，因此您还必须使用[from_unixtime](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-unixtime)来格式化日期。

编辑2：

In MySQL UNIX time is the number of seconds since epoch (1/1/70), so if your `timestamp` column contains the number of milliseconds, you'll have to divide by 1000 as well.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:27:33.393

你可以这样做：

```
SELECT COUNT(id), DATE_FORMAT(`timestamp`, '%Y-%m-%d %H:%i')
FROM `table`
WHERE `timestamp` BETWEEN (DATE_SUB(NOW(),INTERVAL 5 MINUTE)) AND NOW() 
```

# php - 对从数据库中提取的表名进行排序。mysql PHP

> ID：13064526
> 
> 赞同：0
> 
> 时间：2012-10-25T08:24:47.427
> 
> 标签：php, mysql, sql, database

我需要获取与其基表关联的所有备份表。例如，`table_name`产量`table_name_backup1, table_name_backup2`..等。这样做的原因是因为我不想手动获取备份表名称，可能有几十个，它们是根据游戏周和日期命名的，因此无法预测它们的名称。

if $tbl = 'ranking' 执行此语句后得到的结果，例如：

...

```
function getTables($tbl){
  $query = "SHOW TABLES LIKE '" . $tbl . "_gw%' ORDER BY "; 
```

结果

```
 [0] => ranking_gw0_231012
    [1] => ranking_gw10_231012
    [2] => ranking_gw11_231012
    [3] => ranking_gw1_231012
    [4] => ranking_gw2_231012
    [5] => ranking_gw3_231012
    [6] => ranking_gw4_231012
    [7] => ranking_gw5_231012
    [8] => ranking_gw6_231012
    [9] => ranking_gw7_231012
    [10] => ranking_gw8_231012
    [11] => ranking_gw9_231012
    [12] => ranking       // I insert this manually before return statement. 
```

一切都很好，除了超过 9 个备份的表的顺序不正确，因为表*gw10*出现在索引 1 中，因此当我提交它们的值时显示错误的数据顺序。

我一直在考虑创建一个函数来提取*gwx*中的数字并重新排序整个事情，但我认为必须有一个更简单的方法。

那么，我怎样才能以正确的顺序显示这些表格呢？

顺便说一句，当我在 MYSQLYOG 中查看我的数据库时，它们以完全相同的顺序出现，而在我的 phpmyadmin 中它们以正确的顺序显示，*gw11*显示在最后一个。有可能有两个表具有相同的 gwx 值，例如ranking_gw0_080812 和ranking_gw0_101012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:08:14.283

您应该执行以下操作：

```
select table_name from information_schema.tables 
  where table_schema="yourDbName" and table_name like '" . $tbl . "_gw%' 
  order by create_time; 
```

因为您只需要匹配特定模式的表，按创建时间排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:45:35.180

您可以在可以订购的情况下尝试不同的方法：

```
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema='your_database_name'  
ORDER BY table_name ASC; 
```

# c++ - Cython 映射 c++ 数据结构

> ID：13064527
> 
> 赞同：0
> 
> 时间：2012-10-25T08:24:48.017
> 
> 标签：c++, python, wrapper, cython

我正在使用 cython 来包装我的 C++ 类：

`Foo.h`

```
class Foo
{
private:
    std::map<int,int > myMap;
    std::vector<int> myVector;
public:
    // An example of internal structures initialization
    Foo()
    {
        for (int i=0; i<10; i++)
        {
             myVector.push_back(i);
             myMap[i]=i*i;
        }
    }
    std::map<int,int> getMyMap()
    {
        return myMap;
    }
    std::vector<int> getMyVector()
    {
        return myVector;
    }
} 
```

我想知道是否有某种方法可以获得`std::map`as python`dict`和 std::vector as python`list`而无需显式创建（从而浪费内存）此类结构的副本。

std::vector 的一个诱人的实现如下：

```
cdef extern from "Foo.h":
    cdef cppclass Foo:
    Foo()
    vector[int]  getMyVector()

cdef class pyFoo:
cdef Foo *thisptr      # hold a C++ instance which we're wrapping
def __cinit__(self):
    self.thisptr = new Foo()

def getMyVector(self):
    cdef vector[int] aa
    cdef int N
    b= []
    aa = self.thisptr.getMyVector()
    N=aa.size()
    for i in range(N):
        b.append(aa[i])
    return b; 
```

但这显然必须存储两个包含相同数据的结构。我想知道是否有办法从 c++ 映射到 cython 列表，或者我应该使用 boost::python 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:43:49.520

将向量转换为 python 列表是有充分理由的，它在 python 代码中将其用作常规列表。但是，您可以包装向量并添加一个 getter 函数。您确实会节省一些内存，但我认为效率会低得多，因为您每次都必须调用该函数来获取一个值，并且您将无法像在任何 python 表达式中那样使用它蟒蛇名单。

# crystal-reports - 水晶报告如何否决子报告中的参数字段值

> ID：13064533
> 
> 赞同：0
> 
> 时间：2012-10-25T08:25:12.593
> 
> 标签：crystal-reports

我在主报表和 3 个子报表中使用参数字段值，这是一个类似于 20121016 的值，在其中一个子报表中我想否决这个值 20121016 和或 +1 和或 -1 以便记录选择的结果该子报告的可变性更大。有人可以帮忙吗！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:42:42.597

您可以在子报表中添加一个最大值和最小值参数，然后添加两个新公式，一个减去一天，一个添加一天到日期：

```
Dateadd("DAY",1, {?MyDate})
Dateadd("DAY",-1, {?MyDate}) 
```

并将这些传递给子报告。

在子报告记录选择中执行以下操作：

```
{MyTable.MyDateField} >= {?MinDate} and
{MyTable.MyDateField} <= {?MaxDate} 
```

# javascript - 历史敏感后退按钮

> ID：13064538
> 
> 赞同：2
> 
> 时间：2012-10-25T08:25:43.543
> 
> 标签：javascript, html

如果用户已从您网站上的另一个页面导航到该页面，并且有其他标题并且是直接的，是否可以在网页上有一个名为“返回”的按钮并执行 window.history.back()如果用户从另一个网站导航到您的页面或直接访问该页面，则为链接。

移动设备上的 Google plus 似乎有这种行为。当您点击信息流中的帖子时，帖子页面上会出现一个“返回”按钮。但是，如果您直接转到帖子页面，那么它在帖子页面上有一个“流”按钮。

这似乎很难实现，因为您无权访问 window.history 中的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:30:50.420

你有机会添加一个像[BBQ](http://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html)这样的扩展库吗？它是一个用于管理页面中的历史行为的包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:25:12.467

我以前做过。您可以使用链接中的锚点来执行此操作。锚点需要存储应用程序的每个获取参数（即应用程序状态）。您的应用程序应该能够解析锚点。要拦截后退按钮，请看这里：stackoverflow.com/questions/136937/is-there-a-way-to-catch-the-back-button-event-in-javascript。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T07:44:23.390

@benmmurphy我也遇到了同样的问题，然后我使用了以下内容，这对我来说非常有用。您必须将其粘贴到您想要返回的页面上。

```
<a href=\"javascript:history.go(-1)\">GO BACK</a> 
```

希望这会帮助你。

# macos - 从 PackageMaker 访问 KeyChain

> ID：13064545
> 
> 赞同：1
> 
> 时间：2012-10-25T08:26:16.807
> 
> 标签：macos, keychain, packagemaker

作为使用 PackageMaker 创建的安装的一部分，是否可以将证书存储到密钥链中？我想提供一个将证书插入到 Mac OS X 上的密钥链中的安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:54:49.787

我已经建立了在安装过程中导入证书的解决方案。该解决方案包括执行以下步骤：

1.  将**certs**文件夹（包含我们希望导入的证书）添加到安装中。certs 文件夹被提取到指定路径（定义为 CERT_PATH 变量）
2.  创建一个 shell 脚本（也包含在要提取的安装中），它将证书导入到钥匙串中。该脚本类似于：

    `CERT_PATH = "/Applications/MyApp/certs"`

    `security add-certificates $CERT_PATH/mycert1.crt`

    `security add-certificates $CERT_PATH/mycert2.crt`

该脚本称为***postflight***（有关 Package Maker 和脚本的更多信息，[请参见 Using PackageMaker to run a script on install](https://stackoverflow.com/questions/640701/using-packagemaker-to-run-a-script-on-install)）

# javascript - Ooyala AS3 API 奇怪的问题

> ID：13064546
> 
> 赞同：3
> 
> 时间：2012-10-25T08:26:18.457
> 
> 标签：javascript, actionscript-3, flash-builder

我对 Ooyala AS3 API 有一个奇怪的问题。

下面的代码完美运行，我需要删除 adSetCode 所以当我`params['adSetCode'] = param.adSetCode;`从`ExternalInterface.addCallback`函数中删除并调用时

```
$("#player-id")[0].setQueryStringParameters({embedCode:id,links:url,autoplay:'1',adSetCode:asc, keywords:keys}); 
```

它有效，但只有一次。我可以看到正在更新的值，但视频仅在第一次更新？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               xmlns:ooyala="com.ooyala.api.*">

    <fx:Script>
        <![CDATA[
            import mx.core.FlexGlobals;

            [Bindable]
            public var embedCode:String = 'FqcWJ4Mjpnzw0ZNH6aGE-CE6ZPKZReZp'; 
            [Bindable]
            public var adSetCode:String = 's2MzU6rIBpTe20SzgA_OahnRJMNZf_zJ';
            [Bindable]
            public var playerID:String = '';

            public var autoPlay:String = "false";

            public var keywords:String = ''; //inSkin keywords 

            public var params:Object = new Object(); 

            override protected function initializationComplete():void
            {
                super.initializationComplete();

                if(FlexGlobals.topLevelApplication.parameters.embedCode != undefined) {
                    embedCode = FlexGlobals.topLevelApplication.parameters.embedCode;
                }

                if(FlexGlobals.topLevelApplication.parameters.adSetCode != undefined) {
                    adSetCode = FlexGlobals.topLevelApplication.parameters.adSetCode;
                }

                if(FlexGlobals.topLevelApplication.parameters.keywords != undefined) {
                    keywords = FlexGlobals.topLevelApplication.parameters.keywords;
                }

                if(FlexGlobals.topLevelApplication.parameters.autoplay != undefined) {
                    autoPlay = FlexGlobals.topLevelApplication.parameters.autoplay;
                }

                player.load();

                ExternalInterface.addCallback("setQueryStringParameters", function(param:Object):void {
                    params['embedCode'] = param.embedCode;
                    params['adSetCode'] = param.adSetCode;
                    params['autoplay'] = param.autoplay;
                    keywords = param.keywords;

                    player.queryStringParameters = params; 
                })

                player.addEventListener("apiReady",function(event:Event):void {
                    main();
                }); 
            }

            public function main():void {

                if(autoPlay == "true") {
                    player.playMovie();
                } 

                var jsStr:String = player.embedCode+'^'+player.title; 
                keywords = removeNonNumericChars(keywords);

                //Add event listeners here for js
                player.addEventListener("stateChanged", function(event:Event):void {
                    try {
                        ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, player.state );
                    }
                    catch(e:ErrorEvent) {}  // just throwing this away as the function may or may not be there.
                });

                player.addEventListener("playheadTimeChanged", function(event:Event):void {
                    try {
                        ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, player.state );
                    }
                    catch(e:ErrorEvent) {}  
                });

                player.addEventListener("playComplete", function(event:Event):void {
                    try {
                        ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, player.state );
                    }
                    catch(e:ErrorEvent) {} 
                });

                player.addEventListener("adStarted", function(event:Event):void {
                    try {
                        ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, player.state );
                    }
                    catch(e:ErrorEvent) {}  
                });

                player.addEventListener("adCompleted",
                    function(event:Event):void {
                        try {
                            ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, player.state );
                        }
                        catch(e:ErrorEvent) {}  
                    });

                player.addEventListener("embedCodeChanged",
                    function(event:Event):void {
                        try {

                            ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, jsStr );
                        }
                        catch(e:ErrorEvent) {}  
                    });

                //Send play started event for tealium tracking on main
                try {
                    ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, 'PlayStarted', jsStr );
                    ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, 'inSkinKeywords', keywords );
                }
                catch(e:ErrorEvent) {}  // just throwing this away as the function may or may not be there.

                //Following events are for inskin implementation 
                player.addEventListener("apiReady",
                    function(event:Event):void {
                        try {

                            ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, '' );
                        }
                        catch(e:ErrorEvent) {}  
                    });

                player.addEventListener("currentItemEmbedCodeChanged",
                    function(event:Event):void {
                        try {

                            ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, jsStr + '^'
                                + player.description + '^' + player.totalTime + '^' + player.lineup );
                        }
                        catch(e:ErrorEvent) {}  
                    });

                player.addEventListener("fullscreenChanged",
                    function(event:Event):void {
                        try {

                            ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, player.fullscreen );
                        }
                        catch(e:ErrorEvent) {}  
                    });

                player.addEventListener("totalTimeChanged",
                    function(event:Event):void {
                        try {

                            ExternalInterface.call("receiveOoyalaEvent", FlexGlobals.topLevelApplication.parameters.id, event.type, player.totalTime );
                        }
                        catch(e:ErrorEvent) {}  
                    });

                //Methods for inskin implementation 
                ExternalInterface.addCallback("inSkinPlay",Play);
                ExternalInterface.addCallback("inSkinPause",Pause);
                ExternalInterface.addCallback("getTotalTime",getTotalTime);
                ExternalInterface.addCallback("getInSkinKeywords",getInSkinKeywords);
            }

            private function Play():void
            {
                player.playMovie();
            }

            private function Pause():void
            {
                player.pauseMovie();    
            }

            private function getTotalTime():Number
            {
                return player.totalTime;
            }

            private function getInSkinKeywords():String
            {
                return keywords;
            }

            private function removeNonNumericChars($str:String):String {
                $str = $str.toLowerCase();
                $str = replaceAll($str, " ", "-")
                var newStr:String = "";
                for (var i:int = 0; i<$str.length; i++) {
                    var currentCharCode:Number = $str.charCodeAt(i);
                    if ((currentCharCode >= 48) && (currentCharCode <= 57) || (currentCharCode >= 97) && (currentCharCode <= 122) || (currentCharCode == 45) || (currentCharCode == 44)) {
                        newStr += $str.charAt(i);
                    }
                }
                return newStr;
            }

            private function replaceAll(str:String, fnd:String, rpl:String):String{
                return str.split(fnd).join(rpl);
            }

        ]]>
    </fx:Script>

    <fx:Declarations>   
        <fx:Object
            id = "defaultPlayerSettings"
            allowFullScreen = "true"
            autoplay = "false"
            embedCode = "{embedCode}"
            adSetCode = "{adSetCode}"
            />
    </fx:Declarations>

    <ooyala:Player
        id="player"
        width="100%" height="100%" 
        verticalCenter="0" horizontalCenter="0"
        queryStringParameters="{defaultPlayerSettings}"     
        />
</s:Application> 
```

# android - 在片段中显示数据

> ID：13064549
> 
> 赞同：2
> 
> 时间：2012-10-25T08:26:30.970
> 
> 标签：android

```
public class StartActivity extends Activity {
    public static Context appContext;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        appContext = getApplicationContext();

       //ActionBar
        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        Tab tab = actionBar.newTab().setText("First tab")
                .setTabListener(new MyTabListener<AFragment>(this, "artist", AFragment.class));
        actionBar.addTab(tab);

        tab = actionBar.newTab().setText("Second Tab")
                .setTabListener(new MyTabListener<BFragment>(this, "album", BFragment.class));
        actionBar.addTab(tab);

        try {
            // get exchange rate from xml
            DownloadXMLFile download = new DownloadXMLFile();
            download.execute(new URL("http://vietcombank.com.vn/ExchangeRates/ExrateXML.aspx"));
        } catch (Exception e) {
            System.out.println(">>>> EXCEPTION: " + e.getMessage());
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
            case R.id.menuitem_search:
                Toast.makeText(appContext, "search", Toast.LENGTH_SHORT).show();
                return true;
            case R.id.menuitem_add:
                Toast.makeText(appContext, "add", Toast.LENGTH_SHORT).show();
                return true;
            case R.id.menuitem_share:
                Toast.makeText(appContext, "share", Toast.LENGTH_SHORT).show();
                return true;
            case R.id.menuitem_feedback:
                Toast.makeText(appContext, "feedback", Toast.LENGTH_SHORT).show();
                return true;
            case R.id.menuitem_about:
                Toast.makeText(appContext, "about", Toast.LENGTH_SHORT).show();
                return true;
            case R.id.menuitem_quit:
                Toast.makeText(appContext, "quit", Toast.LENGTH_SHORT).show();
                return true;
        }
        return false;
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tab", getActionBar().getSelectedNavigationIndex());
    }

    public void setText(String st) {
        TextView text = (TextView)findViewById(R.id.textViewGold);
        text.setText(st);
    }

    private class DownloadXMLFile extends AsyncTask<URL, Integer, String> {

        @Override
        protected String doInBackground(URL... args) {
            Document doc = null;
            String ret = "";
            StringBuilder buffer = new StringBuilder();
            try {
                URL url = args[0];

                //create the new connection
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();

                //and connect!
                urlConnection.connect();

                // get input stream
                InputStream inputStream = urlConnection.getInputStream();
                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
                DocumentBuilder builder = factory.newDocumentBuilder();
                doc = builder.parse(inputStream);
                Element element = doc.getDocumentElement();
                ret = element.getNodeName();

                NodeList list = element.getElementsByTagName("Exrate");

                String code = "";
                String buy = "";
                String sell = "";
                String transfer = "";
                for (int i=0; i < list.getLength(); i++) {
                    Node node = (Node)list.item(i);
                    NamedNodeMap map = node.getAttributes();
                    code = map.getNamedItem("CurrencyCode").getNodeValue();
                    buy = map.getNamedItem("Buy").getNodeValue();
                    sell = map.getNamedItem("Sell").getNodeValue();
                    transfer = map.getNamedItem("Transfer").getNodeValue();

                    buffer.append(code)
                          .append(System.getProperty ("line.separator"))
                          .append("Buy: ")
                          .append(buy)
                          .append(System.getProperty ("line.separator"))
                          .append("Sell: ")
                          .append(sell)
                          .append(System.getProperty ("line.separator"))
                          .append("Transfer: ")
                          .append(transfer)                       
                          .append(System.getProperty ("line.separator"));
                }
                ret = buffer.toString();
            } catch (Exception e) {
                System.out.println(">>>> EXCEPTION: " + e.getMessage());
            }
            return ret;
        }

        protected void onProgressUpdate(Integer... progress) {
        }

        protected void onPostExecute(String result) {
            Log.i("test", result);
            // after getting exchange successfully, set text into text view in first tab
            setText(result);
        }
    }

}

class MyTabListener<T extends Fragment> implements TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /** * Constructor used each time a new tab is created. * * @param activity * The host Activity, used to instantiate the fragment * @param tag * The identifier tag for the fragment * @param clz * The fragment's Class, used to instantiate the fragment */

    public MyTabListener(Activity activity, String tag, Class<T> clz) {
      mActivity = activity;
      mTag = tag;
      mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
      // Check if the fragment is already initialized
      if (mFragment == null) {
        // If not, instantiate and add it to the activity
        mFragment = Fragment.instantiate(mActivity, mClass.getName());
        ft.add(android.R.id.content, mFragment, mTag);
      } else {
        // If it exists, simply attach it in order to show it
//       ft.setCustomAnimations(android.R.animator.fade_in, R.animator.animationtest);
        ft.attach(mFragment);
      }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
      if (mFragment != null) {
//        ft.setCustomAnimations(android.R.animator.fade_in, R.animator.test);
        ft.detach(mFragment);
      }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    public Fragment getFragment() {
        return mFragment;
    }
} 
```

从网络获取的数据将显示在 init 的第一个选项卡上。但是当我转到第二个选项卡然后再次切换到第一个选项卡时，数据文本将不再存在。那么我们如何在第一个选项卡中保持数据文本的一致性？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:29:05.483

尝试使用`show`和`hide`片段，而不是`attach`和`detach`在你的标签监听器中..

```
public void onTabSelected(Tab tab, FragmentTransaction ft) {
  // Check if the fragment is already initialized
  if (mFragment == null) {
    // If not, instantiate and add it to the activity
    mFragment = Fragment.instantiate(mActivity, mClass.getName());
    ft.add(android.R.id.content, mFragment, mTag);
  } else {
    // If it exists, simply attach it in order to show it
//       ft.setCustomAnimations(android.R.animator.fade_in, R.animator.animationtest);
    ft.show(mFragment);
  }
}

public void onTabUnselected(Tab tab, FragmentTransaction ft) {
  if (mFragment != null) {
//        ft.setCustomAnimations(android.R.animator.fade_in, R.animator.test);
    ft.hide(mFragment);
  }
}

public void onTabReselected(Tab tab, FragmentTransaction ft) {
}

public Fragment getFragment() {
    return mFragment;
} 
```

# php - 为什么要使用 PHP 魔术设置器进行构造函数参数验证

> ID：13064552
> 
> 赞同：0
> 
> 时间：2012-10-25T08:26:46.633
> 
> 标签：php, oop

有类似的问题，例如[this](https://stackoverflow.com/questions/250616/when-do-should-i-use-construct-get-set-and-call-in-php)，但这是不同的——它是关于使用setter验证构造函数参数。

这是我的构造函数：

```
public function __construct( $foo, $bar ) {
   try {
      $this->set_foo( $foo );
      $this->set_bar( $bar );
   } catch( Exception $e ) {
      echo 'Caught exception: ', $e->getMessage(), "\n"; 
   }
} 
```

这是设置器之一（伪代码）：

```
public function set_foo( $foo ) {
   if( $foo fails validation checks ) {
      throw new InvalidArgumentException( '$foo is not valid' );
   }
} 
```

在我的班级中，有两个以上的类变量，每个变量都有自己的一组验证检查。我的问题也是如此（嗯，真的是 2 个）：

为什么我要更改我的代码以使用 PHP 魔术 getter/setter（[此处](http://www.php.net/manual/en/language.oop5.overloading.php#object.set)）并具有杂乱的`__set( $name, $value )`功能？此函数中必须有一组条件来确定所需的验证类型，那么为什么要在这种情况下这样做呢？

这些魔术方法的示例用例是什么？当然，只有少数班级成员或没有验证时，它们才会是一个不错的选择？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:35:22.003

你不应该。国际海事组织。

魔术设置器旨在从对象外部访问（设置）私有、受保护甚至是*虚拟*（不存在）**属性**。

如果您的每个属性都有不同的验证规则，我不明白为什么您应该膨胀一个方法来检查它们。最好将验证逻辑保存在不同的 setter 方法中，就像现在一样。

**编辑**

如果您有一些常见的验证规则，您应该将它们放入非公共方法中，以便从您的设置器中重用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:32:48.567

您*可以*将其简单地用作便利包装器：

```
public function __set($name, $value) {
    $method = "set_$name";
    $this->$method($value);
} 
```

这使您可以编写`$obj->foo = 'bar'`而不是`$obj->set_foo('bar')`.

这值得么？也许不吧。特别是因为您仍然必须在课堂`$this->set_foo()` *内使用。*没有人说你*必须*使用魔法二传手。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:38:15.720

在这种情况下，我通常会避免使用神奇的 getter 和 setter，并为每个需要访问的成员设置一个特定的 getter 和 setter。如果您使用适当的 IDE 或编辑器，您可以自动生成 getter 和 setter，因此几乎不需要任何工作来支持不需要任何特定检查的成员。

# mysql - 使用 Facebook ID 向 Facebook 用户发布消息

> ID：13064553
> 
> 赞同：0
> 
> 时间：2012-10-25T08:26:50.497
> 
> 标签：mysql, facebook

我为在我的网站上拥有 facebook 帐户的用户创建了一个带有 facebook 登录选项的页面。

当他们登录时，我会存储他们的基本信息，例如他们的 id、姓名和电子邮件。

现在我想使用我在数据库中存储的 facebook 用户的 ID 在他们的墙上发送消息/帖子。

他们是否有任何可用的 FB 工具，或者我如何使用 FB javascript 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:31:26.723

您可以使用`Post`GraphAPI 发布到他们的时间线 [https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

出于不将 Facebook 变成垃圾邮件来源的明显原因，您不能以编程方式向用户发送消息。

# c# - 具有可空双精度的 Web 服务响应未正确反序列化

> ID：13064556
> 
> 赞同：2
> 
> 时间：2012-10-25T08:27:17.020
> 
> 标签：c#, web-services, serialization, double, nullable

我正在从我们的一个合作伙伴那里调用网络服务。我调用它没有问题，我得到了一个结果。响应具有可为空的双精度值。在提琴手中，我在响应的 XML 中看到这些双精度值具有值，但不知何故，这些字段不会反序列化到我的代理类，因为这些字段在那里的值为 null。

这是我得到的响应 xml 的摘要，不知何故 id27 中的值没有被序列化，但 id26 中的布尔值却可以。为什么？

```
<extras soapenc:arrayType="ns2:Extra[16]" xsi:type="soapenc:Array">
    <extras href="#id1"/>
    <extras href="#id2"/>           
    ...
</extras>
...
<multiRef id="id1" soapenc:root="0" 
soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
xsi:type="ns6:Extra" xmlns:ns6="http://model.bookingservice.app.traserv.com" 
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
    <assignments xsi:type="ns6:Assignment" xsi:nil="true"/>
    <category xsi:type="xsd:string">def_Surety</category>           
    ...
    <orderUnit xsi:type="xsd:string">Verblijf</orderUnit>
    <payAtLocation href="#id26"/>
    <price href="#id27"/>
    <priceNotes xsi:type="xsd:string" xsi:nil="true"/>
     ...
</multiRef>
...
<multiRef id="id26" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
xsi:type="xsd:boolean" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">true</multiRef>
<multiRef id="id27" soapenc:root="0" soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xsi:type="xsd:double" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">345.0</multiRef> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:01:20.100

我发现 WCF 客户端和轴 web 服务确实有这些问题。您可以在代理中解决它，这显然不是很好，因为您必须编辑生成的类。或者您可以更改 Web 服务，这也是一个问题，因为您并不总是能够控制该服务。

无论如何，我发现了这些项目： [http ://www.tomergabel.com/GettingWCFAndApacheAxisToBeFriendly.aspx](http://www.tomergabel.com/GettingWCFAndApacheAxisToBeFriendly.aspx)

[为什么 .NET 不能从 Web 服务反序列化我的原始数组？](https://stackoverflow.com/questions/30171/why-wont-net-deserialize-my-primitive-array-from-a-web-service)

# java - java中链表实现的算法

> ID：13064557
> 
> 赞同：1
> 
> 时间：2012-10-25T08:27:16.697
> 
> 标签：java, algorithm, linked-list, implementation

Java 是否将 w-linkedlist 实现为 java.util.LinkedList 的实现？如果不是，实现了哪种算法？

编辑：请阅读双向链表（通常'w'字符随意用于双重）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:37:30.453

这可能是一个起点：

[java.util.LinkedList](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/LinkedList.java.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:44:16.063

如果我正确理解了您的问题，那么答案将是*Yes*，因为`LinkedList.Node`该类包含指向上一个和下一个元素的链接：

```
Node<E> next;
Node<E> prev; 
```

# spring - 使用 Spring 和 JSP 进行国际化

> ID：13064560
> 
> 赞同：1
> 
> 时间：2012-10-25T08:27:25.227
> 
> 标签：spring, jsp, spring-mvc, internationalization

我在 JSP spring 国际化中遇到了麻烦。我的 dispatcherServlet.xml 包含：

```
 <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <property name="defaultLocale" value="en" />
    </bean>

    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="language" />
    </bean>

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" >
        <property name="interceptors">
            <list>
                <ref bean="localeChangeInterceptor" />
            </list>
        </property>
    </bean>
<!-- Application Message Bundle -->
    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="/WEB-INF/messages/messages" />
        <property name="cacheSeconds" value="0" />
        <property name="defaultEncoding" value="UTF-8"/>
    </bean> 
```

我的jsp包含

```
 <html>
    <head>
        <title>Admin</title>
    </head>
    <body>
        <a href=<c:url value="/j_spring_security_logout"/>>Logout</a><br/>

    Language : <a href="?language=en">English</a>|
    <a href="?language=zh_CN">Chinese</a>
 <h1>
        <spring:message code="only.Admin.allowed.here" text="default text" />
        </h1>    

    Current Locale : ${pageContext.response.locale}

    </body>
    </html> 
```

默认的 EN 语言可以正常工作，但我无法在单击中文选项时将语言更改为中文。地址栏 URL 更改为`/admin?language=en`，`/admin? language=zh_CN`但不显示任何结果。

提前致谢。

# php - php curl 支持

> ID：13064561
> 
> 赞同：0
> 
> 时间：2012-10-25T08:27:25.130
> 
> 标签：php, curl

在尝试了很多方法之后，你能帮我修复这个代码吗？

总是返回`{"code":201,"error":"missing user password"}`

```
<?php 
$APPLICATION_ID = "XXXXXXXXXXXXXx"; 
$REST_API_KEY = "XXXXXXXXXXXX"; 
$url = 'https://api.parse.com/1/login';

$headers = array(
'X-Parse-Application-Id: ' . $APPLICATION_ID,
'X-Parse-REST-API-Key: ' . $REST_API_KEY,
//option 1
//urlencode('username=xxxxxx'),
//urlencode('password=xxxxxxx'),
);

$curl = curl_init($url); 
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($curl, CURLOPT_TIMEOUT, '3'); 
curl_setopt($curl, CURLOPT_HTTPHEADER, $headers); 
//option 2 
//curl_setopt($curl, CURLOPT_ENCODING, 'username=xxxxx'); 
//curl_setopt($curl, CURLOPT_ENCODING, 'password=xxxxxxx');

$content = curl_exec($curl); curl_close($curl);

print $content

?> 
```

是使用 PHP 登录

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:40:45.343

正如 Kenny 指出的那样，您需要以下列格式发送您的 POST 变量。我喜欢为此使用[http_build_query ：](http://php.net/manual/en/function.http-build-query.php)

```
$postData = array(
    'username' => 'Test',
    'password' => 'Tester'
);

curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($postData)); 
```

如果您正在处理 HTTP 身份验证：

```
curl_setopt($curl, CURLOPT_USERPWD, 'username:password'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:33:29.453

您需要按以下方式传递此数据：

```
$data = array(
   'username' => urlencode('XXXXX'),
   'password' => urlencode('XXXXXXX')
);

// URL-IFY
foreach($data as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&'); 
```

然后按如下方式传递数据：

```
curl_setopt($curl,CURLOPT_POST, count($fields));
curl_setopt($curl,CURLOPT_POSTFIELDS, $fields_string); 
```

# java - OneToMany 和 ManyToOne 之间的 JPA 关系

> ID：13064566
> 
> 赞同：1
> 
> 时间：2012-10-25T08:27:39.610
> 
> 标签：java, jpa, entity-relationship

我是 JPA 的新手，并试图在两个表之间建立这样的关系：

这是主要的类对象`XParserLinks`：

```
 private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "link_id")
    private Integer linkId;
    @OneToMany(mappedBy = "xParserLink", targetEntity = XLinksMedia.class, cascade = CascadeType.ALL)
    private List<XLinksMedia> fotos;
    ... 
```

这是对象类`XLinksMedia`

```
public class XLinksMedia implements Serializable {
    private static final long serialVersionUID = 1L;
    @EmbeddedId
    protected XLinksMediaPK xLinksMediaPK;
    @ManyToOne @JoinColumn(name = "link_id")
    private XParserLinks xParserLink; 
```

和`XLinksMediaPK`

```
@Embeddable
public class XLinksMediaPK implements Serializable {
    @Basic(optional = false)
    @Column(name = "link_id", insertable = false, updatable = false)
    private int linkId;
    @Basic(optional = false)
    @Column(name = "image")
    private String image; 
```

这些关系正确吗？因为当我想`XLinksMedia`在列表中添加新对象时`fotos`，我得到了`LinkId = 0`，但我知道`LinkId`不是`0`，我知道`LinkId`变量有一个值。

这是我尝试`fotos`在类中设置变量的方法`XParseLinks`（`preke`: 是`XParseLinks`对象女巫有他的主键`LinkId`）：

```
XLinksMedia foto = new XLinksMedia();
foto.setXLinksMediaPK(new XLinksMediaPK());

foto.setxParserLink(preke);
foto.getXLinksMediaPK().setImage(e.attr("src"));

preke.getFotos().add(foto); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:40:52.223

即使我不知道您的期望是什么，当我测试您的编码时，也可以。我只是`OverLoad Constructor`在你的类中放了一些简单的数据初始化。但是，您使用`GenerationType.IDENTITY`，这就是我为 of 设置 auto increate 列的`link_id`原因`XParserLinks`。以下编码的主要内容与您的相同。

你的观点`Here's how I try to set fotos variable in XParseLinks class (preke: is XParseLinks object witch have his primary key LinkId):`。查看`Test.java`

XParserLinks.java

```
@Entity
public class XParserLinks implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "link_id")
    private Integer linkId;
    @OneToMany(mappedBy = "xParserLink", targetEntity = XLinksMedia.class, cascade = CascadeType.ALL)
    private List<XLinksMedia> fotos;

    private String something;

    public XParserLinks() {
        fotos = new ArrayList<XLinksMedia>();
    }

    public XParserLinks(String something) {
        this.something = something;
        fotos = new ArrayList<XLinksMedia>();
    }
    //getter and setter
} 
```

XLinksMediaPK.java

```
@Embeddable
public class XLinksMediaPK implements Serializable {
    @Basic(optional = false)
    @Column(name = "link_id", insertable = false, updatable = false)
    private int linkId;
    @Basic(optional = false)
    @Column(name = "image")
    private String image;

    public XLinksMediaPK(){
    }

    public XLinksMediaPK(int linkId, String image) {
        this.linkId = linkId;
        this.image = image;
    }
    //getter and setter
} 
```

XParserLinks.java

```
@Entity
public class XParserLinks implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "link_id")
    private Integer linkId;
    @OneToMany(mappedBy = "xParserLink", targetEntity = XLinksMedia.class, cascade = CascadeType.ALL)
    private List<XLinksMedia> fotos;

    private String something;

    public XParserLinks() {
        fotos = new ArrayList<XLinksMedia>();
    }

    public XParserLinks(String something) {
        this.something = something;
        fotos = new ArrayList<XLinksMedia>();
    }
    //getter and setter

    public void add(XLinksMedia media) {
        fotos.add(media);
    }
} 
```

测试.java

```
public class Test {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("JPA");
        EntityManager em = emf.createEntityManager();
        em.getTransaction().begin();
        XParserLinks xParserLink = new XParserLinks("something");

        XLinksMediaPK pk1 = new XLinksMediaPK(0, "image_1");
        XLinksMediaPK pk2 = new XLinksMediaPK(0, "image_2");
        XLinksMediaPK pk3 = new XLinksMediaPK(0, "image_3");

        xParserLink.add(new XLinksMedia(pk1, xParserLink));
        xParserLink.add(new XLinksMedia(pk2, xParserLink));
        xParserLink.add(new XLinksMedia(pk3, xParserLink));

        em.persist(xParserLink);

        System.out.println("Success...");

        em.getTransaction().commit();
        em.close();
    }
} 
```

# java - java（初学者）将科学记数法转换为十进制

> ID：13064567
> 
> 赞同：12
> 
> 时间：2012-10-25T08:27:46.477
> 
> 标签：java, decimal, scientific-notation

如果

```
double d =  1.999e-4 
```

我希望我的输出为 0.0001999。

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T08:33:53.790

```
NumberFormat formatter = new DecimalFormat("###.#####");  

String f = formatter.format(d); 
```

您可以探索类的子类`NumberFormat`以了解更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T08:35:57.503

你可以这样做：

```
 double d = 1.999e-4;
    NumberFormat nf = NumberFormat.getInstance();
    nf.setMinimumFractionDigits(7);
    System.out.println(nf.format(d)); 
```

查看`NumberFormat`'s 方法的文档以`double`按照您认为合适的方式格式化您的文件。

`DecimalFormat`是其构造函数状态的特例`NumberFormat`，我认为您不需要它的功能来满足您的情况。如果您感到困惑，请查看他们的文档。为了您的方便，`getInstance()`请使用工厂方法。`NumberFormat`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-08T13:56:46.100

我想 BigDecimal 类中有一个方法叫做`toPlainString()`. 例如，如果 BigDecimal 为 1.23e-8，则该方法返回 0.0000000124。

```
BigDecimal d = new BigDecimal("1.23E-8");

System.out.println(d.toPlainString()); 
```

上面的代码打印 0.0000000123，然后您可以根据您的要求处理该字符串。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-25T08:36:18.980

如果您只想这样打印。

```
System.out.printf("%1$.10f", d); 
```

你可以改变 10f, 10=你想要的小数位数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T08:31:30.793

看一看

```
java.text.DecimalFormat 
```

和

```
java.text.DecimalFormatSymbols 
```

# javascript - Javascript：如何使用匹配的组搜索和替换多个项目？

> ID：13064569
> 
> 赞同：1
> 
> 时间：2012-10-25T08:27:50.890
> 
> 标签：javascript, regex

说我有一个字符串

```
"item:(one|two|three), item2:(x|y)" 
```

是否有一个正则表达式可以“考虑”它

```
"item:one, item:two, item:three, item2:x, item2:y" 
```

还是我必须诉诸拆分和循环？

如果我必须把它分开，那我怎么转

```
"item:(one|two|three)" 
```

进入

```
"item:one, item:two, item:three" 
```

如果括号之间的东西的数量是可变的？正则表达式对这样的问题无用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T08:34:48.663

您可以使用回调函数来做到这一点：

```
 str = str.replace(/(\w+):\(([^)]*)\)/gi, function(match,item,values)
     {return item + ':' + values.split("|").join(', '+item+':')}
 ); 
```

对于每个项目，正则表达式中的第一个括号捕获项目的名称（即`item`），第二组（未转义的）括号捕获所有值的字符串（即`one|two|three`）。然后将后者拆分`|`并连接在一起，`, itemname:`然后在结果的开头附加另一个项目名称。

这可能是组合正则表达式以查找数据并拆分和连接以构建新正则表达式的最简单方法。不那么容易的问题是，您不能`one|two|three`在不同的捕获组中捕获任意数量的连续值 ( )。如果您尝试单独捕获它们，您只会得到最后一个。

# flash - Flash Builder 4.6 在 Google Chrome 中运行时总是显示空白 html 页面

> ID：13064570
> 
> 赞同：5
> 
> 时间：2012-10-25T08:27:57.207
> 
> 标签：flash, apache-flex, flash-builder, flex4.6

Flash Builder 4.6 在 Google Chrome 中运行时总是显示空白 html 页面。我已经尝试了一切，但没有任何效果。

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T16:20:38.443

简单的回答：不要使用 Chrome 来调试 Flash Builder 项目。

对于调试，请执行以下操作：

1.  进入调试配置（运行 > 调试配置）
2.  查找当前项目的配置
3.  在“启动的 URL 或路径”下，取消选中“使用默认值”并浏览 SWF（html 是默认值）。这将在实际的 Flash Debug Player 中打开调试（就像在 Flash CS 中发生的那样）

或者

1.  打开您的 Flash Builder/Eclipse 首选项
2.  过滤“浏览器”并更改出现在另一个浏览器中的任何项目。过去我在使用 Internet Explorer 时遇到过问题，所以我会坚持使用 Firefox 或 Safari。

根据我的经验，这个问题几乎总是仅限于调试模式。我在发布版本中遇到过一次或两次，但问题最终是由生成的 HTML 引起的，而不是由 SWF 文件本身引起的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T05:02:51.217

我得到了解决方案，当 html 页面在 Chrome 浏览器上运行时，chrome 存在安全问题，所以我们需要在 Project Properties 的 Flex Compiler 选项中设置**use-network=false** ，并且 .swf 的所有内容都会返回舞台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T12:44:14.697

如果您只想快速测试实际的 SWF 构建，您可以为您的项目关闭“生成 HTML 包装文件”。这将导致任何调试或运行使用当前安装的独立 Flash 播放器进行预览。

为此 - 在包资源管理器窗口中右键单击您的项目，选择属性，然后选择 Flex 编译器，然后在 HTML 包装器部分下取消勾选“生成 HTML 包装器文件”

# java - 将字符串传递给 JSNI

> ID：13064571
> 
> 赞同：0
> 
> 时间：2012-10-25T08:27:58.050
> 
> 标签：java, javascript, gwt

我在将字符串传递给 JSNI 方法时遇到问题：

```
public Wave() {
    initWave("wave_id");
} 
```

**不起作用：**

```
public native void initWave(String id)/*-{
var instance = this;
var waveform = $wnd.Waveform({
    container: $doc.getElementById(id),
    data: [1, 0.2, 0.5]
    });
}-*/; 
```

**作品：**

```
public native void initWave(String id)/*-{
var instance = this;
var waveform = $wnd.Waveform({
    container: $doc.getElementById("wave_id"),
    data: [1, 0.2, 0.5]
    });
}-*/; 
```

我不确定为什么没有将字符串传递给 JSNI 方法。

# windows - 我可以在 Windows RT/8 中使用弱引用作为实例变量吗？

> ID：13064575
> 
> 赞同：1
> 
> 时间：2012-10-25T08:28:02.290
> 
> 标签：windows, winapi, windows-8, microsoft-metro, c++-cx

我正在我的一个项目中实现一棵树。每个节点都包含一个向量，其中包含零个或多个子节点。每个节点还包含对其父节点的引用（根的父节点引用为 nullptr）。这是类定义的示例：

```
ref class TreeNode {
    ...

    TreeNode^ _parentNode;
    Platform::Collections::Vector<TreeNode^>^ _childNodes;
} 
```

首先，这会导致内存泄漏吗？我假设这些是两个方向的强引用，因此对象上的引用计数将保持在零以上。

我见过 Platform::WeakReference 的例子，但从来没有作为实例变量。这可能吗？语法会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:59:32.940

是的，您编写的代码将导致引用计数循环，并且您的树会泄漏。

`Platform::WeakReference`可以是实例变量，但由于它是仅限 C++ 的类型，因此不能在`TreeNode`. 每当您想访问弱引用时，都应该调用`.Resolve<TreeNode>()`弱引用来创建强引用。您可以考虑使用属性作为弱引用：

```
ref class TreeNode sealed {
public:
    property TreeNode^ Parent {
        TreeNode^ get(){
            return _parentNode.Resolve<TreeNode>();
        }

        void set(TreeNode^ tn) {
            _parentNode = tn;
        }
    };

private:
    Platform::WeakReference _parentNode;
    Platform::Collections::Vector<TreeNode^>^ _childNodes;
}; 
```

# iphone - 如何在 iPhone 的 UIViewController 中保留标签栏？

> ID：13064576
> 
> 赞同：0
> 
> 时间：2012-10-25T08:28:02.940
> 
> 标签：iphone, xcode4, uitabbarcontroller, uitabbar

我对 iPhone 开发非常陌生，并且在某一点上感到震惊。我有一个 UIViewController，我在其中放置了一个标签栏和标签栏项目（搜索，登录）。现在在启动应用程序时，我该如何保持搜索选择了tabbaritem？。如果我点击登录，它必须重定向到另一个UIViewController（Login）。但是在UIViewController中我不需要tabbar。我怎样才能让标签栏项目在点击登录时响应并重定向到其他视图。 ..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:55:39.667

点击后`login`，按照此代码让应用程序从 LoginViewController 开始，没有 tabBar ..

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication]delegate];

appDelegate.window.rootViewController = LoginViewController; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:49:11.460

从你的问题。很明显，您不需要标签栏。而是添加标签栏控制器。

检查我附上的图片。这将向您展示您应该遵循的内容。 ![您只需要从 nib 对象添加 tabbarcontroller。 然后为给定选项卡添加视图控制器](../Images/0969aaceaf45c214246a8fa605a1a2f6.png)

让我知道。如果有什么不清楚的。

享受编程。

# java - 使用 Java 编译方案

> ID：13064577
> 
> 赞同：6
> 
> 时间：2012-10-25T08:28:06.833
> 
> 标签：java, compilation, scheme, code-generation

我正在编写一个 Scheme 解释器（试图与 R5RS 完全兼容），它让我震惊的是，编译成 VM 操作码会使其更快。（如果我错了，请纠正我。）我可以*解释*内存中的 Scheme 源代码，但我一直在理解代码生成。

我的问题是：从解析树生成操作码需要哪些模式，例如 JVM 或任何其他 VM（甚至是真实机器）？如果有的话，这样做的复杂性、优点或缺点是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:36:24.443

对于 Scheme 来说，JVM 有两个主要的复杂性。

首先，JVM 不支持显式尾调用注释，因此如果不使用昂贵的迷你解释器技巧，您将无法保证R5RS (3.5) 要求的*正确尾递归。*

第二个问题是持续支持。JVM 没有提供任何对实现延续有用的东西，所以你必须再次使用迷你解释器。即，每个 CPS 普通函数都应该返回一个下一个闭包，然后由一个无限的迷你解释器循环调用。

但是仍然有许多有趣的优化可能性。我建议看一下 Bigloo（有一个相对较快的 JVM 后端）和 Kawa。[对于一般编译技术，请在 90 分钟内](http://www.iro.umontreal.ca/~boucherd/mslug/meetings/20041020/90-min-scc/90-min-scc.pdf)查看Scheme 。

而且，解释仍然是编译的可行替代方案（至少在 JVM 上，由于其严重的限制和普遍的低效率）。看看 SISC 是如何实现的，这是一种非常有趣和创新的方法。

# debugging - 当这个堆栈很大（node.js）时，如何保留堆栈或异步方法的调用者？

> ID：13064587
> 
> 赞同：1
> 
> 时间：2012-10-25T08:29:32.487
> 
> 标签：debugging, node.js, stack

我有一个应用程序多次异步进入异步，我很难知道该调用来自何处以及使用哪些变量。有什么解决方法吗？

我遇到问题的原因是因为在 qooxdoo 中，fireDataEvent 非常复杂，我无法将回调方法链接到事件。

谢谢

# c++ - 在 Visual Studio 中制作非 GUI 服务器应用程序

> ID：13064588
> 
> 赞同：1
> 
> 时间：2012-10-25T08:29:39.747
> 
> 标签：c++, visual-studio-2010, sockets, mfc, serversocket

我在基于 C++ MFC 的 Visual Studio 中做了一个服务器套接字项目。现在，在调试项目后，服务器 GUI 打开，然后单击服务器 GUI 上的*CONNECT*按钮后，您可以将客户端连接到该服务器，依此类推。

现在我想在其他计算机上使用该服务器 exe 文件。这样每当该计算机启动时，该服务器 exe 就会自动启动。所以为此我需要禁用连接按钮，以便在调试后，服务器 GUI 会自动打开并连接。但我不希望服务器 GUI 也以自动启动的方式在另一台计算机中打开。我想禁用该服务器 GUI。

我有一个无模式对话框的想法来处理它。它好还是我应该使用什么方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:15:21.180

您可能希望将应用程序的 GUI 部分和服务器部分分开。理想情况下，如果您的服务器*实际上*是服务器，则应将其作为*service*启动。然后你将有单独的 GUI 工具来控制它。

另一种方法是使用命令行参数来确定服务器是否应该在启用或禁用 GUI 的情况下启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:28:24.173

此类应用程序唯一专业且稳定的解决方案是将其拆分为控制台部分，您将其置于服务控制和用户可以在需要时启动的 gui 部分的控制之下。

我尝试了像你这样的解决方案，所以我可以从我自己的经验告诉你，你会面临很多问题。

然而，一个可能的解决方案是隐藏窗口并将[应用程序放置到系统托盘中](http://www.codeproject.com/Articles/74/Adding-Icons-to-the-System-Tray)，[这](https://stackoverflow.com/questions/12856926/hide-an-mfc-dialog-window)是关于隐藏窗口的非常有趣的讨论。

另外，对于 MFC，我有两个很好的建议：

1.  永远不要只是“复制过去”代码而不知道 MFC 在后台做什么（Win32api）。
2.  不要使用 MFC。需要windows的时候可以看QT或者wxWidges，win32api的快捷封装也可以看boost库。花在上面的时间真的很值得！

祝你好运！

# unix - 如何测试与 Unix 机器通信的 Windows 应用程序

> ID：13064589
> 
> 赞同：1
> 
> 时间：2012-10-25T08:29:43.420
> 
> 标签：unix

我写了一个 Windows 桌面工具，它应该可以读取/写入文件到 unix 机器。问题是我没有 unix 机器来测试它。我可以在我的 Windows 机器上安装一些可以模仿远程 unix 机器并让我测试我的应用程序的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:18:16.270

安装 VMWare 播放器。在 VMWare 播放器中安装了 Lubunto。完美运行。

# python - 守护进程中的 SQLalchemy 会话问题，但金字塔中没有。我可能会错过什么？

> ID：13064593
> 
> 赞同：0
> 
> 时间：2012-10-25T08:30:05.540
> 
> 标签：python, python-3.x, sqlalchemy, pyramid, python-3.2

我想为了整洁，我会提出一个不同的问题。它基于： [SQLAlchemy 不会更新我的数据库](https://stackoverflow.com/questions/12446220/sqlalchemy-wont-update-my-database)和[SQLAlchemy 会话：如何保持活动状态？](https://stackoverflow.com/questions/12725916/sqlalchemy-session-how-to-check-if-its-alive).

所以这是交易：我有一个 Pyramid 应用程序正在与一个守护进程对话，而后者又与一个数据库对话。

现在由于某种原因，当我将它添加到数据库会话变量时，它没有被提交到数据库中，如下所示：

```
DBSession.add(ModelInstance) 
```

调用 flush 或 commit 不会使其提交。

这就是我制作 DBSession 的方式：

```
 settings = {
        'sqlalchemy.url':'blah blah'
        }
    DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))
    engine = engine_from_config(settings, 'sqlalchemy.')
    DBSession.configure(bind=engine) 
```

这对我来说似乎很好，因为我可以很好地查询数据库。即：这种事情有效：

```
DBSession.query(ModelClass).get(id) 
```

这位好先生[https://stackoverflow.com/users/100297/martijn-pieters](https://stackoverflow.com/users/100297/martijn-pieters)建议使用以下代码：

```
import transaction
transaction.commit() 
```

这可以很好地确保我的东西得到承诺。唯一的问题是它以某种方式使我的 DBSession 无用。因此，如果我想使用我的会话正在跟踪的对象，我需要重新实例化会话和这些项目。这很糟糕。它占用了大量的时间。

我的问题是，简而言之，我该如何避免这种情况？

长篇大论：

*   如何让我的 DBSession 正确提交而不破坏它？

或者

*   如何在不需要冗长的数据库调用的情况下修复我的 DBSession 和关联的模型实例？

和

*   知道为什么会这样吗？我已经在我提到的 Pyramid 应用程序中以相同的方式成功地构建了一个 DBSession，它工作得非常好，它在我想要它的时候就提交了。

具体我遇到的错误可以参考我开头提到的两个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:05:04.303

根据[sqlalchemy 的文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html#committing)

> 的另一个行为`commit()`是，默认情况下，它会使提交完成后存在的所有实例的状态过期。这样当实例下次被访问时，无论是通过属性访问还是通过它们出现在`Query`结果集中，它们都会收到最新的状态。要禁用此行为，请`sessionmaker()`配置 `expire_on_commit=False`.

看似问题实际上是故意完成的：当您提交时，所有对象都被标记为过期。这样做是为了避免继续使用数据库中可能已更改的旧缓存值。

它在金字塔中工作的原因是因为每个请求都有自己的事务，并且在处理它们之前会查询对象。您尝试使用预览事务中的对象，这可能不是一个好主意，因为它们可能与数据库不同步。

为了解决您的问题，您可以确保在事务结束后不重用对象（可能需要您的事务包含更多内容），或者您可以`expire_on_commit=False`按照事务中的建议使用。但如果您使用后者，请注意该对象可能已过时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T15:00:46.883

在 SQLAlchemy 会话中，它们在提交时管理的对象过期。这是明智的，因为在提交之后，您无法保证在并发世界中其他东西不会改变他们试图在数据库中镜像的状态。

Pyramid 建议使用事务管理器来帮助您维护每个请求的单个事务。`transaction.commit()`请求完成后，它会自动呼叫您。这样，您不必考虑/担心对象过期，并且如果您的代码引发异常，事务将被正确中止。

设置事务管理器的方法是安装`pyramid_tm`然后`zope.sqlalchemy`连接`DBSession`到`zope.sqlalchemy.ZopeTransactionExtension`. 然后事情将“正常工作”。

```
DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension()))

# ...

def main(global_conf, **settings):
    config = Configurator(...)
    config.include('pyramid_tm')
    # ... 
```

如果您需要填充新对象的主键或确保某些 SQL 将正确执行，您可以使用`DBSession.flush()`在事务中执行 SQL 而无需实际提交它。任何错误都会出现在那里，供您捕捉和处理。

Pyramid 文档的教程中描述了会话的基本设置：

[http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/tutorials/wiki2/basiclayout.html](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/tutorials/wiki2/basiclayout.html)

更新：我意识到我回答了你关于在 Pyramid 中使用事务管理器的问题，你已经成功地使用了它。我认为答案也清楚地解释了发生了什么`ZopeTransactionExtension`，但是，您只需要确认提交事务即可。您最好在脚本中简单地使用一个事务，您可以通过

```
import transaction

with transaction.manager:
    # do tons of database stuff 
```

现在，如果发生异常，事务将被中止，否则将被提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T00:59:16.703

如果我没看错的话，我想我知道发生了什么......

金字塔/zope 事务管理器的缺点是它们全有或全无——由于它们的实现方式，您不能既使用它们又调用 commit()。我不记得确切的原因，但我曾经在与这个问题斗争了几个小时后深入研究了他们的所有代码，只是没有办法在页面内提交。

由于多种原因，我决定不在我的应用程序中使用自动交易包装。我有很多场景需要一个或多个提交，或者需要使用保存点（我使用 postgresql）。

# ruby-on-rails-3 - excel导入不适用于电子表格gem

> ID：13064599
> 
> 赞同：1
> 
> 时间：2012-10-25T08:30:27.900
> 
> 标签：ruby-on-rails-3, gem

我正在使用电子表格 gem 将 excel 数据导入数据库。我的观点是：-

```
<% form_for :dump, :url=>{:action=>"excel_import"}, :html => { :multipart => true } do |f| -%>
 Select an Excel File :
 <%= f.file_field :excel_file -%>
 <%= submit_tag 'Submit' -%>
<% end -%> 
```

我的控制器是：-

```
require 'spreadsheet'

def excel_import
 Spreadsheet.client_encoding = 'UTF-8'
 book = Spreadsheet.open params[:dump][:excel_file]
 sheet1 = book.worksheet 0
 sheet1.each do |row|
 TimeSheet.new(:ac_no => row[0]).save
 end
end 
```

参数：-

```
 {"utf8"=>"✓", "authenticity_token"=>"vhyy1pzYJpM9hCdgP5AiFC1Pv0UtbpLSzStZDWiZzs8=", "dump"=>{"excel_file"=>#<ActionDispatch::Http::UploadedFile:0x9a8f5f8 @original_filename="SwipeData_DeliveryTeam_Sep12.xls", @content_type="application/vnd.ms-excel", @headers="Content-Disposition: form-data; name=\"dump[excel_file]\"; filename=\"SwipeData_DeliveryTeam_Sep12.xls\"\r\nContent-Type: application/vnd.ms-excel\r\n", @tempfile=#<File:/tmp/RackMultipart20121025-4534-n7pw14>>}, "commit"=>"Submit"} 
```

当我尝试上传 excel 文件并单击提交按钮时，出现错误：-

```
 can't convert ActionDispatch::Http::UploadedFile into String 
```

我从[博客中获取了参考](http://openrails.blogspot.in/2011/06/xls-import-using-spreadsheet.html)

谁能告诉我这段代码出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:13:53.670

使用您提到的相同博客参考时，我遇到了完全相同的问题。

我能够使用此[参考](https://stackoverflow.com/questions/9596138/parsing-xls-spreadsheet-in-rails-using-roo-gem?rq=1)解决它。

这是你的方法修改为我的方法，我的现在正在工作！

```
require 'spreadsheet'
require 'fileutils'
require 'iconv'

def excel_import

 tmp = params[:dump][:excel_file].tempfile

 Spreadsheet.client_encoding = 'UTF-8'

 book = Spreadsheet.open tmp.path

 sheet1 = book.worksheet 0
 sheet1.each do |row|
 TimeSheet.new(:ac_no => row[0]).save
 end
end

FileUtils.rm tmp.path 
```

祝你好运！丹尼斯

# shell - unoconv 无法在 ubuntu 12.04 服务器上运行

> ID：13064600
> 
> 赞同：10
> 
> 时间：2012-10-25T08:30:28.030
> 
> 标签：shell, ubuntu-12.04, libreoffice, ubuntu-server

我正在使用`unoconv`将不同的文件格式转换为 pdf。它在我的本地机器上运行良好，适用于所有格式。但是在我的 ubuntu 12.04 服务器`unoconv`上，某些格式（如 xls、ppt、pptx 等）失败了。但是它对 doc 文件运行良好。它显示了ppt转换的以下错误。

```
$unoconv -f pdf Googling.ppt 
unoconv: UnoException during conversion in <class '__main__.com.sun.star.lang.IllegalArgumentException'>: Unsupported URL <file:///home/pythonuser/almamapper/media/library/files/c1cb92e62ce54b29a017a6e8eaa23c/Googling.ppt>: ""
Traceback (most recent call last):
File "/usr/bin/unoconv", line 790, in <module>
main()
File "/usr/bin/unoconv", line 769, in main
convertor.convert(inputfn)
File "/usr/bin/unoconv", line 679, in convert
error("ERROR: The provided document cannot be converted to the desired format. (code: %s)" % e.ErrCode)
File "/usr/lib/python2.7/dist-packages/uno.py", line 337, in _uno_struct__getattr__
return __builtin__.getattr(self.__dict__["value"],name)
AttributeError: ErrCode 
```

我知道我必须在我的服务器上安装 openoffice-headless 版本。但是从这个[链接](https://askubuntu.com/questions/194352/install-openoffice-for-headless-use)我了解到 Ubuntu 不久前切换到 libreoffice 而不是 openoffice。所以我通过以下命令安装了 libreoffice。

`apt-get install libreoffice-core libreoffice-writer libreoffice-calc`

但仍然遇到同样的错误。我缺少要安装的东西吗？有人对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T13:26:05.033

我通过安装最新版本的`unoconv`. 我尝试更新 libreoffice 并安装完整版本，但都没有帮助。

我正在使用`unoconv 0.3`，最新的可用版本是 0.6。所以我安装了最新的，它解决了这个问题。

这是我遵循的步骤：

1.  `apt-get remove --purge unoconv`（先删除旧的 unoconv）
2.  `git clone https://github.com/dagwieers/unoconv` （从 gi​​thub 下载最新版本的 unoconv。）

3.  现在 cd 到 unoconv 目录并执行`sudo make install`

注意：请执行 git clone，不要下载 tar 文件。在我的情况下，当我下载 tar 时安装失败。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T12:28:37.847

完成后我遇到了同样的一般问题`apt-get install unoconv`，另外`apt-get install libreoffice`修复了它。可能您仅有限地安装了一些 libreoffice 组件是它仅适用于某些格式的原因。当然，我希望它需要`libreoffice-impress`ppt 转换？

# android - 不能在 Intellij IDEA 的项目中包含源库

> ID：13064602
> 
> 赞同：1
> 
> 时间：2012-10-25T08:30:42.453
> 
> 标签：android, intellij-idea, library-project

我在 IDEA 中创建了带有**common helpers**的库项目，我在我的 android 应用程序中使用了它。

然后，我创建了 android 应用程序并将其包含在我的库项目中，如[本教程所述](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)。

一切似乎都很好，代码自动完成工作正常，IDEA 识别出该库以及其中的所有类和方法。

但后来我编译了应用程序并看到错误“ **'org.my.helperlibrary'不存在**”。然而，正如我所说，IDEA 在制作/启动项目之前一切正常。

[这是类似的问题](https://stackoverflow.com/questions/8884662/how-can-i-add-a-library-project-in-intellij-idea)，但答案很简单，当然我的图书馆已经检查了“**是图书馆项目**”选项，但我仍然无法启动使用我的图书馆的应用程序。

**更新：**

我刚刚看到一个错误：“ **UNEXPECTED TOP-LEVEL EXCEPTION: java.lang.IllegalArgumentException: already added: Lorg/my/helperlibrary/Helper;** ”当我在我的 android 应用程序中删除了库的所有用法时。所以它只是包含在我的应用程序中而不是使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:13:10.550

原来我不应该在那个窗口中手动添加依赖

![在此处输入图像描述](../Images/23e7d0a28c1962c291797c9aaf428ee7.png)

我宁愿在左侧的项目窗口中添加新模块

![在此处输入图像描述](../Images/4118b978769d6a393ce3cf987c659f16.png) ![在此处输入图像描述](../Images/6c6ccf53b32d43fbdf6ed62edbc0ec9c.png) ![在此处输入图像描述](../Images/6205e0884ffea1fbfb46ecd91033577f.png)

然后我应该在我想使用的android库项目的根文件夹中选择**iml文件**

![在此处输入图像描述](../Images/994a7fe26828d16bd9be24a7a2f4a6b7.png)

然后我按下完成，从那时起我的项目中有两个模块

![在此处输入图像描述](../Images/089f66ffd3c21b0ce92549f3bc249262.png)

之后使用类时，我可以在 SampleLibrary 中的任何类上按 Alt+Enter 并告诉 IDEA 添加模块依赖项

![在此处输入图像描述](../Images/ac4fc752198e8d195537ae17f0429a31.png)

然后我可以看到 IDEA 在没有我的情况下完成了我所需要的一切。我现在可以使用 SampleApplication 中的 SampleLibrary！

![在此处输入图像描述](../Images/0b9748524aa1019cd198223f54fd2942.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:54:17.133

尝试选择库项目，然后单击`Build -> Compile <your library project name>`。然后回到使用这个库的项目并单击`Build -> Rebuild Project`。之后尝试再次运行项目。

希望能帮助到你。

# java - 如何在 JAVA FX 2.2 中重新绘制窗口（舞台）

> ID：13064603
> 
> 赞同：7
> 
> 时间：2012-10-25T08:30:42.657
> 
> 标签：java, javafx, javafx-2

我需要在选择组合框元素时重新绘制一个窗口。如何在 JAVA FX 2.2 中重新绘制窗口（舞台）？

下面是我的代码

```
functionComboBox.valueProperty().addListener(new ChangeListener<String>() {
    @Override public void changed(ObservableValue ov, String t, String t1) 
    {
        showFunctionParamters(t1);
    }
    private void showFunctionParamters(String methodName) 
    {
        gridPaneParameters = new GridPane();
        gridPaneParameters.setPadding(new Insets(20, 0, 0, 50));
        gridPaneParameters.setHgap(10);
        gridPaneParameters.setVgap(4);
        int i = 2; 
        parameterList = methodAttrMap.get(methodName);
        Iterator<String> itrParameterList = parameterList.iterator();
        while(itrParameterList.hasNext())
        {
            //TODO allow the user to enter the values for the parameters 
            Label parameterName = new Label(itrParameterList.next()); 
            TextField parameterTextField = new TextField();
            gridPaneParameters.add(parameterName, 1, i);
            gridPaneParameters.add(parameterTextField, 2, i);
            i++;
        }
        pane.getChildren().add(gridPaneParameters);
    }
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-25T11:33:51.940

由于您的代码在运行时将新组件添加到窗格中，因此您可能需要：

```
pane.requestLayout(); 
```

# c# - WPF:How to Interaction.Triggers 添加在哪里

> ID：13064605
> 
> 赞同：0
> 
> 时间：2012-10-25T08:30:45.047
> 
> 标签：c#, wpf

```
 <StackPanel>
      <TextBox Text="" x:Name="input"/>
      <Button Content="Click">
          <i:Interaction.Triggers>
              <i:EventTrigger EventName="Click"><!-- TextBox has to contain "ABC" to get Button Click enabled this event-->
                  <i:InvokeCommandAction Command="{Binding OnAdd}" CommandParameter="1"></i:InvokeCommandAction>
              </i:EventTrigger>
              <i:EventTrigger EventName="Click"><!-- TextBox has to contain "123" to get Button Click enabled this event-->
                   <i:InvokeCommandAction Command="{Binding OnAdd2}" CommandParameter="1"></i:InvokeCommandAction>
               </i:EventTrigger>

          </i:Interaction.Triggers>
      </Button>
  </StackPanel> 
```

我希望`<i:EventTrigger EventName="Click">`TextBox 必须包含“ABC”才能使按钮单击启用此事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:57:27.990

我建议您在 OnAdd 命令中执行此处理。特别注意 CanExecute 方法。如果您的 Button 将被启用，这个处理。你可以在这里阅读如何实现这个：

[命令教程](http://www.switchonthecode.com/tutorials/wpf-tutorial-command-bindings-and-custom-commands)

# java - FullScreen Swing 组件无法在 Mac OS X Mountain Lion 上的 Java 7 上接收键盘输入

> ID：13064607
> 
> 赞同：24
> 
> 时间：2012-10-25T08:30:49.963
> 
> 标签：java, macos, swing, fullscreen, keyboard-events

**12/21 更新：**

7u10 最近发布了。确认：

1.  问题依然存在
2.  值得庆幸的是，解决方法仍然有效！

**11/7 更新：**

我们有一个解决方法！

[来自 Oracle 在 openjdk.java.net 邮件列表上的 Leonid Romanov 提供了一些关于正在发生的事情的见解](http://mail.openjdk.java.net/pipermail/macosx-port-dev/2012-November/005109.html)：

> 好吧，虽然我还不是 100% 确定，但看起来当我们进入全屏时，其他窗口成为第一响应者，因此发出哔哔声。您能否尝试以下解决方法：在框架上调用 setFullScreenWindow() 后，调用 setVisible(false)，然后调用 setVisible(true)。从理论上讲，这应该恢复正确的第一响应者。

似乎有效的代码片段很简单：

```
dev.setFullScreenWindow(f);
f.setVisible(false);
f.setVisible(true); 
```

我已经更新了示例代码，能够打开和关闭此修复；每次窗口进入全屏时都需要它。

在我更复杂的应用程序的更大上下文中，我仍然在全屏窗口中的子组件上遇到键盘焦点问题，其中鼠标单击会导致我的窗口失去焦点。（我猜它会转到上面提到的不受欢迎的第一响应者窗口。）当我有更多关于这个案例的信息时，我会报告——我还不能在较小的样本中重现它。

* * *

**10/31 更新：**

示例代码的主要更新：

*   包括在 FullScreen 独有模式和 Lion 风格的 FullScreen 模式之间切换
*   监听以`KeyboardFocusManager`显示当前焦点组件的层次结构
*   使用输入映射和`KeyListener`s 来尝试捕获输入

还与同事进行了更多挖掘以尝试隔离问题：

一方面，我们尝试覆盖 RT.jar 中的一些方法，以查看屏幕设备的选择方式是否存在问题。还尝试了 Toolkit.beep() 功能的入口点，以查看警报声音是否来自 Java 端 - 似乎不是。

另一方面，很明显，即使是本地端也没有接收到键盘事件。一位同事将此归因于 7u6 中从 a`AWTView`到 a的转换。`NSWindow`

已经找到了一些现有的 Oracle 错误，您可以在[此处](http://bugs.sun.com/bugdatabase/)查找：

*   [8000276：[macosx] graphicsDevice.setFullScreenWindow(frame) 使 JVM 崩溃](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8000276)
*   [8000430：[macosx] macOS 上的 java.awt.FileDialog 问题](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8000430)
*   [7175707 : [macosx] PIT: 8 b43 未在 AppKit 线程问题上再次运行](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7175707)

* * *

**10/26 更新：**

感谢@maslovalex 下面关于在 7u5 上工作的 Applet 的评论，我回去仔细检查了与 OSX 的 JDK 版本的兼容性：

*   10.7.1 与 7u4：全屏工作！
*   10.7.1 与 7u5：全屏工作！
*   10.7.5 和 7u5：全屏工作！
*   10.7.5 和 7u6：全屏中断 :(

结合其他地方提到的其他测试，很明显 7u6 引入了一个问题，该问题仍然存在于 7u7 和 7u9 中，它影响了 Lion 10.7 和 Mountain Lion 10.8。

7u6 是一个重要的里程碑版本，为 Mac OS X 带来了对 JRE 和 JDK 的全面支持，并且还包括 Java FX 作为发行版的一部分。[发行说明](http://www.oracle.com/technetwork/java/javase/7u-relnotes-515228.html)和[路线图](http://www.oracle.com/us/corporate/press/1854982)中提供了更多信息。随着对 Java FX 的支持转移，这样的问题可能会突然出现，这并不奇怪。

问题变成：

1.  Oracle 会在 JDK 的近期版本中解决这个问题吗？（如果您有指向现有错误的链接，请在此处包含它们。）
2.  在此期间是否可以解决问题？

今天的其他更新：

*   我将[Apple 扩展方法合并到全屏模式](https://stackoverflow.com/questions/6873568/fullscreen-feature-for-java-apps-on-osx-lion)作为探索的替代路径（更新的示例代码等待清理）。好消息：输入有效！坏消息：似乎真的没有任何信息亭/隔离选项。 [我尝试直接](http://wtanaka.com/node/8008)或使用[应用程序](http://www.mechodownload.com/forum/applications/283595-dock-killer-1-2-a.html)
    杀死 Dock ，因为我了解 Dock 负责 Command-Tab 应用程序切换、任务控制和 Launch Pad，却发现它也负责处理全屏应用程序！因此，Java 调用变得无效并且永远不会返回。 如果有办法[禁用 Command-Tab](https://superuser.com/questions/453241/is-it-possible-to-disable-the-command-tab-application-switcher-in-mac-os-x-lion)
    （以及 Mission Control 和 Launchpad 和 Spaces）而不影响 Dock 的全屏处理，这将非常有用。或者，可以尝试重新映射某些键，例如 Command，但这会影响在程序和系统本身的其他地方使用该修饰符的能力（当您需要使用 Command-C 复制某些文本时，这并不理想）。

*   我对 KeyListeners 没有运气（我没有收到任何回调），但我还有更多选择可以尝试。

*   根据同事的建议，我`((sun.lwawt.macosx.LWCToolkit)Toolkit.getDefaultToolkit()).isApplicationActive()`通过反思进行了尝试。这个想法是：它
    *是一个带有注释的本地方法“如果应用程序（它的一个窗口）拥有键盘焦点，则返回true。”。过去几个月，CPlatformWindow.java 中添加了对该方法的调用，与焦点逻辑相关。如果它在您的测试代码中返回 false，则可能是问题的一部分。*
    不幸的是，无论我在哪里检查它，该方法都返回 true。所以即使根据低级系统，我的窗口也应该有键盘焦点。

*   我之前对 JAlbum 修复的乐观态度已经破灭。开发人员[在他们的论坛上发布了一个回复](http://jalbum.net/forum/thread.jspa?messageID=264497)，解释了他们如何在运行 Java 7 时简单地删除了 OS X 上的正确全屏支持。他们在 Oracle 中有一个错误（我希望得到错误编号）。

* * *

**10/25 更新：**

我现在也在 Lion 10.7.4 上尝试了 Java 7u9，并且看到了完全相同的问题，所以它是 JDK - 而不是特定于操作系统的。

核心问题已成为您是否可以在全屏窗口中嵌入对键盘输入（`JTextField/JTextArea`甚至可编辑的组合框）具有默认处理的核心 Swing 组件，并期望它们正常运行（无需求助于手动重建其基本键绑定）。还有一个问题是其他窗口布局的忠实拥护者，例如使用选项卡进行焦点遍历，是否应该工作。

理想的目标是能够使用带有所有按钮、选项卡、字段等的窗口化 Swing 应用程序，并以全屏独占/信息亭模式运行它，并且大部分功能完好无损。（以前，我看到对话框弹出窗口或 ComboBox 下拉菜单在 OS X 上的 Java 6 上无法全屏运行，但其他组件表现良好。）

我将研究 eawt FullScreen 功能，如果它们支持 kiosk 锁定选项（例如消除 Command-Tab 应用程序切换），这将很有趣。

* * *

**原始问题：**

我有一个 Swing 应用程序，多年来一直支持Mac OS X 上至 Java 6 的[全屏（独占）](http://docs.oracle.com/javase/tutorial/extra/fullscreen/index.html)模式。我一直在对最新的 Mountain Lion 版本（10.8.2 补充）和 Oracle 的 JDK 7 进行兼容性测试，并注意到在该模式下的明显问题：鼠标移动和点击工作正常，但键盘输入未传递到组件。

（我在下面的测试用例中将其范围缩小到在全屏模式下无法输入简单的 JTextField。）

一个症状是每次按键都会导致系统发出哔哔声，就好像操作系统不允许将键盘事件传递给应用程序一样。

另外，我的应用程序安装了一个退出挂钩，并且 Command-Q 组合将触发该挂钩 - 很明显，操作系统正在监听标准键组合。

我已经在三种不同的 Mac 上分别进行了测试，安装方式不同：

*   在 Apple Java 6u35 和 6u37 上：窗口和全屏模式都接收输入。
*   在 Oracle Java 7u7 和 7u9 上：窗口模式按预期工作，而全屏模式有上述症状。

这可能之前已经报道过： [Java Graphics Full Screen Mode not Registering Keyboard Input](https://stackoverflow.com/questions/13015442/java-graphics-full-screen-mode-not-registering-keyboard-input)。但是，该问题并不特定于 Java 版本或平台。

额外的搜索在 Lion 中引入了一个单独的全屏选项： [OSX Lion 上 Java 应用程序的全屏功能](https://stackoverflow.com/questions/6873568/fullscreen-feature-for-java-apps-on-osx-lion)。我还没有尝试使用这种方法，因为键盘输入似乎是全屏独占模式的目标用例不可或缺的一部分，例如游戏。

JavaDoc 中提到了这种模式可能会禁用输入法。我试着打电话给建议`Component.enableInputMethods(false)`，但似乎[没有效果](http://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsDevice.html#setFullScreenWindow%28java.awt.Window%29)。

我有点乐观地认为，这个问题的解决方案是基于我遇到的一个 Java 应用程序（JAlbum）的发行说明中的​​一个条目。[10.10.6](http://jalbum.net/en/software/release-notes)的声明修复：“在 Mac 和 Java 7 上运行全屏幻灯片放映时，键盘支持不起作用”

我的测试用例如下。它从本期的第二个示例中进行了轻微修改（未修改，也显示了我的问题）：[如何在 java 中以全屏独占模式处理来自键盘和鼠标的事件？](https://stackoverflow.com/questions/7456227/how-to-handle-events-from-keyboard-and-mouse-in-full-screen-exclusive-mode-in-ja/7457102#7457102) 特别是，它添加了一个按钮来切换全屏。

```
import java.lang.reflect.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.beans.*;

/** @see https://stackoverflow.com/questions/13064607/ */
public class FullScreenTest extends JPanel {
    private GraphicsDevice dev = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
    private JFrame f = new JFrame("FullScreenTest");

    private static final String EXIT = "Exit";
    private Action exit = new AbstractAction(EXIT) {
        @Override
        public void actionPerformed(ActionEvent e) {
            Object o = dev.getFullScreenWindow();
            if(o != null) {
                dev.setFullScreenWindow(null);
            }
            f.dispatchEvent(new WindowEvent(f, WindowEvent.WINDOW_CLOSING));
        }
    };
    private JButton exitBTN = new JButton(exit);

    private JTextField jtf = new JTextField("Uneditable in FullScreen with Java7u6+ on Mac OS X 10.7.3+");

    private JLabel keystrokeLabel = new JLabel("(Last Modifier+Key Pressed in JTextField)");

    private JLabel jtfFocusLabel = new JLabel("(JTextField Focus State)");

    private JLabel focusLabel = new JLabel("(Focused Component Hierarchy)");

    private JCheckBox useOSXFullScreenCB = new JCheckBox("Use Lion-Style FullScreen Mode");

    private JCheckBox useWorkaroundCB = new JCheckBox("Use Visibility Workaround to Restore 1st Responder Window");

    private static final String TOGGLE = "Toggle FullScreen (Command-T or Enter)"; 
    private Action toggle = new AbstractAction(TOGGLE) {
        @Override
        public void actionPerformed(ActionEvent e) {
            Object o = dev.getFullScreenWindow();
            if(o == null) {
                f.pack();

                /** 
                 * !! Neither of these calls seem to have any later effect.  
                 * One exception: I have a report of a 
                 * Mini going into an unrecoverable black screen without setVisible(true);  
                 * May be only a Java 6 compatibility issue.  !!
                 */
                //f.setVisible(true);
                //f.setVisible(false);

                if(!useOSXFullScreenCB.isSelected()) {
                    // No keyboard input after this call unless workaround is used
                    dev.setFullScreenWindow(f);

                    /**
                     * Workaround provided by Leonid Romanov at Oracle.
                     */
                    if(useWorkaroundCB.isSelected()) {
                        f.setVisible(false);
                        f.setVisible(true);
                        //Not necessary to invoke later...
                        /*SwingUtilities.invokeLater(new Runnable() {
                            public void run() {
                                f.setVisible(false);
                                f.setVisible(true);
                            }
                        });*/
                    }
                }
                else {
                    toggleOSXFullscreen(f);
                }
            }
            else {
                dev.setFullScreenWindow(null);
                f.pack();
                f.setVisible(true);
            }

            isAppActive();
        }
    };
    private JButton toggleBTN = new JButton(toggle);

    public FullScreenTest() {            
        // -- Layout --
        this.setLayout(new BoxLayout(this, BoxLayout.PAGE_AXIS));

        exitBTN.setAlignmentX(JComponent.CENTER_ALIGNMENT);
        exitBTN.setMaximumSize(new Dimension(Short.MAX_VALUE, 50));
        this.add(exitBTN);

        jtf.setAlignmentX(JComponent.CENTER_ALIGNMENT);
        jtf.setMaximumSize(new Dimension(Short.MAX_VALUE, Short.MAX_VALUE));
        this.add(jtf);

        keystrokeLabel.setAlignmentX(JComponent.CENTER_ALIGNMENT);
        keystrokeLabel.setMaximumSize(new Dimension(Short.MAX_VALUE, 50));
        keystrokeLabel.setHorizontalAlignment(SwingConstants.CENTER);
        keystrokeLabel.setForeground(Color.DARK_GRAY);
        this.add(keystrokeLabel);

        jtfFocusLabel.setAlignmentX(JComponent.CENTER_ALIGNMENT);
        jtfFocusLabel.setMaximumSize(new Dimension(Short.MAX_VALUE, 50));
        jtfFocusLabel.setHorizontalAlignment(SwingConstants.CENTER);
        jtfFocusLabel.setForeground(Color.DARK_GRAY);
        this.add(jtfFocusLabel);

        focusLabel.setAlignmentX(JComponent.CENTER_ALIGNMENT);
        focusLabel.setMaximumSize(new Dimension(Short.MAX_VALUE, 50));
        focusLabel.setHorizontalAlignment(SwingConstants.CENTER);
        focusLabel.setForeground(Color.DARK_GRAY);
        this.add(focusLabel);

        useOSXFullScreenCB.setAlignmentX(JComponent.CENTER_ALIGNMENT);
        useOSXFullScreenCB.setMaximumSize(new Dimension(Short.MAX_VALUE, 50));
        useOSXFullScreenCB.setHorizontalAlignment(SwingConstants.CENTER);
        this.add(useOSXFullScreenCB);

        useWorkaroundCB.setAlignmentX(JComponent.CENTER_ALIGNMENT);
        useWorkaroundCB.setMaximumSize(new Dimension(Short.MAX_VALUE, 50));
        useWorkaroundCB.setHorizontalAlignment(SwingConstants.CENTER);
        this.add(useWorkaroundCB);

        toggleBTN.setAlignmentX(JComponent.CENTER_ALIGNMENT);
        toggleBTN.setMaximumSize(new Dimension(Short.MAX_VALUE, 50));
        this.add(toggleBTN);

        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setResizable(false);
        f.setUndecorated(true);
        f.add(this);
        f.pack();

        enableOSXFullscreen(f);

        // -- Listeners --

        // Default BTN set to see how input maps respond in fullscreen
        f.getRootPane().setDefaultButton(toggleBTN);

        // Explicit input map test with Command-T toggle action from anywhere in the window
        this.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(
                KeyStroke.getKeyStroke(KeyEvent.VK_T, Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()), 
                toggle.getValue(Action.NAME));
        this.getActionMap().put(toggle.getValue(Action.NAME), toggle);

        // KeyListener test
        jtf.addKeyListener(new KeyAdapter() {                                                                                                                                                                                                                                                    
            public void keyPressed(KeyEvent e) {                                                                                                                                                                                                                                                  
                String ktext = "KeyPressed: "+e.getKeyModifiersText(e.getModifiers()) + "_"+ e.getKeyText(e.getKeyCode());
                keystrokeLabel.setText(ktext);
                System.out.println(ktext);
            }
        });

        // FocusListener test
        jtf.addFocusListener(new FocusListener() {
            public void focusGained(FocusEvent fe) {
                focused(fe);
            }
            public void focusLost(FocusEvent fe) {
                focused(fe);
            }
            private void focused(FocusEvent fe) {
                boolean allGood = jtf.hasFocus() && jtf.isEditable() && jtf.isEnabled();
                jtfFocusLabel.setText("JTextField has focus (and is enabled/editable): " + allGood);
                isAppActive();
            }
        });

        // Keyboard Focus Manager
        KeyboardFocusManager focusManager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
        focusManager.addPropertyChangeListener(new PropertyChangeListener() {
            public void propertyChange(PropertyChangeEvent e) {
                if (!("focusOwner".equals(e.getPropertyName()))) return;
                Component comp = (Component)e.getNewValue();
                if(comp == null) {
                    focusLabel.setText("(No Component Focused)");
                    return;
                }
                String label = comp.getClass().getName();
                while(true) {
                    comp = comp.getParent();
                    if(comp == null) break;
                    label = comp.getClass().getSimpleName() + " -> " + label;
                }
                focusLabel.setText("Focus Hierarchy: " + label);
                isAppActive();
            }
        });
    }

    /**
     * Hint that this Window can enter fullscreen.  Only need to call this once per Window.
     * @param window
     */
    @SuppressWarnings({"unchecked", "rawtypes"})
    public static void enableOSXFullscreen(Window window) {
        try {
            Class util = Class.forName("com.apple.eawt.FullScreenUtilities");
            Class params[] = new Class[]{Window.class, Boolean.TYPE};
            Method method = util.getMethod("setWindowCanFullScreen", params);
            method.invoke(util, window, true);
        } catch (ClassNotFoundException e1) {
        } catch (Exception e) {
            System.out.println("Failed to enable Mac Fullscreen: "+e);
        }
    }

    /**
     * Toggle OSX fullscreen Window state. Must call enableOSXFullscreen first.
     * Reflection version of: com.apple.eawt.Application.getApplication().requestToggleFullScreen(f);
     * @param window
     */
    @SuppressWarnings({"unchecked", "rawtypes"})
    public static void toggleOSXFullscreen(Window window) {
        try {
            Class appClass = Class.forName("com.apple.eawt.Application");

            Method method = appClass.getMethod("getApplication");
            Object appInstance = method.invoke(appClass);

            Class params[] = new Class[]{Window.class};
            method = appClass.getMethod("requestToggleFullScreen", params);
            method.invoke(appInstance, window);
        } catch (ClassNotFoundException e1) {
        } catch (Exception e) {
            System.out.println("Failed to toggle Mac Fullscreen: "+e);
        }
    }

    /**
     * Quick check of the low-level window focus state based on Apple's Javadoc:
     *  "Returns true if the application (one of its windows) owns keyboard focus."
     */
    @SuppressWarnings({"unchecked", "rawtypes"})
    public static void isAppActive() {
        try {
            Class util = Class.forName("sun.lwawt.macosx.LWCToolkit");
            Method method = util.getMethod("isApplicationActive");
            Object obj = method.invoke(Toolkit.getDefaultToolkit());
            System.out.println("AppActive: "+obj);
        } catch (ClassNotFoundException e1) {
        } catch (Exception e) {
            System.out.println("Failed to check App: "+e);
        }
    }

    public static void main(String[] args) {
        System.out.println("Java Version: " + System.getProperty("java.version"));
        System.out.println("OS Version: " + System.getProperty("os.version"));

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                FullScreenTest fst = new FullScreenTest();
                if(!fst.dev.isFullScreenSupported()) {
                    System.out.println("FullScreen not supported on this graphics device.  Exiting.");
                    System.exit(0);
                }
                fst.toggle.actionPerformed(null);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:52:06.707

这是因为您添加另一个的组件现在失去了焦点，您可以通过以下任一方式解决此问题：

*   调用您添加s`requestFocus()`的组件实例`KeyBinding`

或者

*   或者`JComponent.WHEN_IN_FOCUSED_WINDOW`与`KeyBinding`s 一起使用：

    ```
    component.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_Q, 0),
                            "doSomething");
    component.getActionMap().put("doSomething",
                             anAction); 
    ```

**参考：**

*   [如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T10:29:54.340

相反，请使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，如 this 所示[`FullScreenTest`](https://stackoverflow.com/a/7457102/230513)。此外，请考虑[此处](https://stackoverflow.com/a/5342146/230513)`DocumentListener`显示的用于文本组件的 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T03:56:24.270

I think I finally found a solution, registering click listeners against to the JFrame itself. (This is a class which extends JFrame, hence all the "this" references.)

```
/**
 * Toggles full screen mode. Requires a lot of references to the JFrame.
 */
public void setFullScreen(boolean fullScreen){
    GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice dev = env.getDefaultScreenDevice();//Gets the main screen
    if(!fullScreen){//Checks if a full screen application isn't open
        this.dispose();//Restarts the JFrame
        this.setVisible(false);
        this.setResizable(true);//Re-enables resize-ability.
        this.setUndecorated(false);//Adds title bar back
        this.setVisible(true);//Shows restarted JFrame
        this.removeMouseListener(macWorkAround);
        this.pack();
        this.setExtendedState(this.getExtendedState()|JFrame.MAXIMIZED_BOTH);//Returns to maximized state
        this.fullScreen = false;
    }
    else{
        this.dispose();//Restarts the JFrame
        this.setResizable(false);//Disables resizing else causes bugs
        this.setUndecorated(true);//removes title bar
        this.setVisible(true);//Makes it visible again
        this.revalidate();
        this.setSize(Toolkit.getDefaultToolkit().getScreenSize());
        try{
            dev.setFullScreenWindow(this);//Makes it full screen
            if(System.getProperty("os.name").indexOf("Mac OS X") >= 0){
                this.setVisible(false);
                this.setVisible(true);
                this.addMouseListener(macWorkAround);
            }
            this.repaint();
            this.revalidate();
        }
        catch(Exception e){
            dev.setFullScreenWindow(null);//Fall back behavior
        }
        this.requestFocus();
        this.fullScreen = true;
    }
}

private MouseAdapter macWorkAround = new MouseAdapter(){
    public void mouseClicked(MouseEvent e){
        MainGUI.this.setVisible(false);
        MainGUI.this.setVisible(true);
    }
}; 
```

# objective-c - 为什么 NSArray 没有 firstObject 方法？

> ID：13064610
> 
> 赞同：13
> 
> 时间：2012-10-25T08:30:52.740
> 
> 标签：objective-c, ios

但它确实有一个lastObject，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-25T08:33:10.277

我的猜测是因为`lastObject`减少了更多样板代码。您可以使用现代 Objective-C 语法`[array lastObject]`替换`[array objectAtIndex:array.count - 1]`或使用。`array[array.count - 1]`

而在这种情况下，`firstObject`您可以简单地检查`[array objectAtIndex:0]`或`array[0]`。它只是有助于简化能够调用的事情，`lastObject`而不是输入该函数。

# 更新

正如@Nathaniel Symer 在上面的评论中所建议的那样，`firstObject`以前可以使用但仅在私有 API 中可用（我相信自 iOS 4 以来）。不过，随着 iOS 7 SDK 的发布，`firstObject`现已公开发布！

# git - 如何修剪远程不再存在的本地跟踪分支

> ID：13064613
> 
> 赞同：1065
> 
> 时间：2012-10-25T08:31:13.090
> 
> 标签：git

我`git remote prune origin`可以删除不再位于远程的本地分支。

但我也想删除从这些远程分支创建的本地分支（检查它们是否未合并会很好）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1179
> 
> 时间：2013-06-10T17:54:00.810

修剪后，您可以使用`git branch -r`. 可以使用 检索具有远程跟踪分支的分支列表`git branch -vv`。因此，使用这两个列表，您可以找到不在远程列表中的远程跟踪分支。

这条线应该可以解决问题（需要`bash`or `zsh`，不适用于标准 Bourne shell）：

```
git fetch -p ; git branch -r | awk '{print $1}' | egrep -v -f /dev/fd/0 <(git branch -vv | grep origin) | awk '{print $1}' | xargs git branch -d 
```

此字符串获取远程分支列表并通过`egrep`标准输入将其传递给。并过滤具有远程跟踪分支的分支（使用`git branch -vv`并过滤具有远程跟踪分支的分支`origin`），然后获取该输出的第一列，该列将是分支名称。最后将所有分支名称传递给删除分支命令。

由于它正在使用该`-d`选项，因此在运行此命令时，它不会删除尚未合并到您所在分支的分支。

* * *

## 回答 #2

> 赞同：572
> 
> 时间：2013-06-03T22:17:56.437

如果要删除所有已经合并到master的本地分支，可以使用如下命令：

```
git branch --merged master | grep -v '^[ *]*master$' | xargs git branch -d 
```

如果您用`main`作主分支，则应相应地修改命令：

```
git branch --merged main | grep -v '^[ *]*main$' | xargs git branch -d 
```

[更多信息](http://devblog.springest.com/a-script-to-remove-old-git-branches)。

* * *

## 回答 #3

> 赞同：227
> 
> 时间：2013-06-10T17:31:17.200

在 提供的信息中`git help fetch`，有一个小项目：

```
 -p, --prune
        After fetching, remove any remote-tracking branches which no longer exist on the remote. 
```

所以，也许，`git fetch -p`是你在找什么？

编辑：好的，对于那些在事实发生 3 年后仍在争论这个答案的人，这里有更多关于我为什么提出这个答案的信息......

首先，OP 说他们想“删除那些从那些远程分支创建的本地分支[不再在远程]”。这在`git`. 这是一个例子。

假设我在中央服务器上有一个 repo，它有两个分支，称为`A`和`B`。如果我将该 repo 克隆到我的本地系统，我的克隆将有本地引用（还不是实际的分支）称为`origin/A`and `origin/B`。现在假设我执行以下操作：

```
git checkout -b A origin/A
git checkout -b Z origin/B
git checkout -b C <some hash> 
```

这里的相关事实是，我出于某种原因选择在我的本地存储库上创建一个名称与其来源不同的分支，并且我还有一个本地分支（尚不存在于原始存储库中）。

现在假设我删除了远程仓库上的`A`和`B`分支并更新了我的本地仓库（`git fetch`某种形式），这会导致我的本地 refs`origin/A`消失`origin/B`。现在，我的本地仓库仍然有三个分支，`A`,`Z`和`C`. 这些都没有远程仓库上的相应分支。其中两个是“从......远程分支创建的”，但即使我知道曾经有一个分支调用`B`原点，我也无法知道它`Z`是从`B`，因为它在这个过程中被重命名，可能是有充分理由的。所以，真的，如果没有一些外部进程记录分支起源元数据，或者没有一个知道历史的人，就不可能分辨出三个分支中的哪一个，如果有的话，OP 的目标是删除。如果没有一些`git`不会自动为您维护的外部信息，那么您`git fetch -p`将尽可能接近，并且任何用于逐字尝试 OP 要求的自动方法都有删除太多分支或丢失 OP 否则会丢失的风险想删除。

还有其他场景，例如，如果我创建三个独立的分支`origin/A`来测试对某事物的三种不同方法，然后`origin/A`就离开了。现在我有三个分支，显然不能全部匹配名称，但它们是从创建的`origin/A`，因此对 OPs 问题的字面解释需要删除所有三个。但是，这可能是不可取的，如果您甚至可以找到一种可靠的方法来匹配它们......

* * *

## 回答 #4

> 赞同：152
> 
> 时间：2015-05-27T22:35:26.343

这将删除已修剪远程跟踪分支的本地分支。（确保你在`master`分支上！）

```
git checkout master
git branch -vv | grep ': gone]' | awk '{print $1}' | xargs git branch -d 
```

* * *

细节：

*   `git branch -vv`远程已被修剪的本地分支显示“已消失”。

    ```
    mybranch abc1234 [origin/mybranch: gone] commit comments 
    ```

*   `-d`将检查它是否已被合并（`-D`无论如何都会删除它）

    ```
    error: The branch 'mybranch' is not fully merged. 
    ```

* * *

## 回答 #5

> 赞同：121
> 
> 时间：2017-08-15T18:41:58.573

有一个[简洁的 npm 包](https://www.npmjs.com/package/git-removed-branches)可以为你做这件事（它应该可以跨平台工作）。

安装它：`npm install -g git-removed-branches`

然后`git removed-branches`将向您显示所有陈旧的本地分支，并`git removed-branches --prune`实际删除它们。

[更多信息在这里。](https://github.com/nemisj/git-removed-branches)

* * *

## 回答 #6

> 赞同：68
> 
> 时间：2018-03-01T09:59:09.153

### 视窗解决方案

对于 Microsoft Windows Powershell：

`git checkout master; git remote update origin --prune; git branch -vv | Select-String -Pattern ": gone]" | % { $_.toString().Trim().Split(" ")[0]} | % {git branch -d $_}`

### 解释

`git checkout master`切换到主分支

`git remote update origin --prune`修剪远程分支

`git branch -vv`获取所有分支的详细输出（[git reference](https://git-scm.com/docs/git-branch#git-branch--vv)）

`Select-String -Pattern ": gone]"`仅获取已从远程删除的记录。

`% { $_.toString().Split(" ")[0]}`获取分支名称

`% {git branch -d $_}`删除分支

* * *

## 回答 #7

> 赞同：67
> 
> 时间：2017-01-12T11:09:16.447

可以将 Git 配置为在获取时自动删除对已删除远程分支的引用：

```
git config --global fetch.prune true 
```

调用时`git fetch`或`git pull`之后，对已删除远程分支的引用会自动删除。

* * *

## 回答 #8

> 赞同：47
> 
> 时间：2019-09-01T17:43:09.007

正如@tzacks 所指出的......有一个 npm 包可以方便地解决这个问题。做就是了：

```
npx git-removed-branches --prune 
```

（我会评论但没有足够的声誉）

* * *

## 回答 #9

> 赞同：42
> 
> 时间：2015-12-09T05:28:15.910

它将列出从远程删除其远程跟踪分支的本地分支

```
$ git remote prune origin --dry-run 
```

如果您想从本地取消引用这些未跟踪的本地分支

```
$ git remote prune origin 
```

* * *

## 回答 #10

> 赞同：19
> 
> 时间：2015-07-30T09:31:13.123

更短、更安全的单线：

```
git branch -d $(git branch --merged | cut -c 3- | grep -v master) 
```

在运行它之前，一定要检查到尚未合并的分支。因为您无法删除当前签入的分支。

* * *

## 回答 #11

> 赞同：18
> 
> 时间：2017-04-10T22:57:01.477

如果使用 Windows 和 Powershell，您可以使用以下命令删除所有已合并到当前签出分支的本地分支：

```
git branch --merged | ? {$_[0] -ne '*'} | % {$_.trim()} | % {git branch -d $_} 
```

解释

*   列出当前分支和已合并到其中的分支
*   过滤掉当前分支
*   清除`git`每个剩余分支名称的输出中的任何前导或尾随空格
*   删除合并的本地分支

值得`git branch --merged`首先单独运行，以确保它只会删除您期望的内容。

（从[http://railsware.com/blog/2014/08/11/git-housekeeping-tutorial-clean-up-outdated-branches-in-local-and-remote-repositories/](http://railsware.com/blog/2014/08/11/git-housekeeping-tutorial-clean-up-outdated-branches-in-local-and-remote-repositories/)移植/自动化。）

* * *

## 回答 #12

> 赞同：17
> 
> 时间：2018-02-06T19:01:35.227

我想要一些可以清除所有跟踪远程分支的本地分支的东西，on `origin`，远程分支已被删除（`gone`）。我不想删除从未设置为跟踪远程分支的本地分支（即：我的本地开发分支）。另外，我想要一个简单的单行代码，只使用`git`. 或其他简单的 CLI 工具，而不是编写自定义脚本。我最终使用了一点`grep`and`awk`来制作这个简单的命令，然后将它作为别名添加到我的`~/.gitconfig`.

```
[alias]
  prune-branches = !git remote prune origin && git branch -vv | grep ': gone]' | awk '{print $1}' | xargs -r git branch -D 
```

这是一个`git config --global ...`可以轻松将其添加为的命令`git prune-branches`：

```
git config --global alias.prune-branches '!git remote prune origin && git branch -vv | grep '"'"': gone]'"'"' | awk '"'"'{print $1}'"'"' | xargs -r git branch -d' 
```

注意：使用`-D`标志`git branch`可能非常危险。因此，在上面的配置命令中，我使用`-d`选项 to`git branch`而不是`-D`; 我`-D`在我的实际配置中使用。我使用`-D`是因为我不想听到 Git 抱怨未合并的分支，我只想让它们消失。您可能也需要此功能。如果是这样，只需在该配置命令的末尾使用`-D`而不是。`-d`

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2020-05-21T13:27:12.930

这是我的解决方案：

```
git fetch -p
git branch -vv | grep ": gone" | awk '{print $1}' | xargs git branch -d 
```

*   **-p**是删除远程不再存在的任何远程跟踪引用。所以第一步将删除对远程分支的引用。

*   **-vv**用于显示每个头的 sha1 和提交主题行，以及与上游分支的关系（如果有）。第二步将获取所有本地分支，grep 命令将过滤掉已删除的分支。

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2019-02-01T17:34:16.387

似乎没有一个安全的单线，太多的边缘情况（比如一个分支有“master”作为它的名字的一部分，等等）。最安全的是这些步骤：

1.  `git branch -vv | grep 'gone]' > stale_branches.txt`
2.  查看文件并删除要保留的分支的行（例如 master 分支！）；您无需编辑任何行的内容
3.  `awk '{print $1}' stale_branches.txt | xargs git branch -d`

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2019-04-23T23:14:56.987

要删除远程分支：

```
$git remote prune origin 
```

要删除已合并的本地分支：

```
$git branch -D $(git branch --merged) 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2019-10-01T11:52:26.833

在**Powershell**中：

```
git branch -D (git branch --merged |% { $_.trim() } ) 
```

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2018-09-20T19:24:08.753

根据上面的答案，我正在使用这个较短的一个班轮：

```
git remote prune origin | awk 'BEGIN{FS="origin/"};/pruned/{print $2}' | xargs -r git branch -d 
```

此外，如果您已经修剪并有本地悬垂的分支，那么这将清理它们：

```
git branch -vv | awk '/^ .*gone/{print $1}' | xargs -r git branch -d 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2012-10-25T08:35:25.827

不确定如何一次完成所有操作，但`git branch -d <branchname>`只有在完全合并后，git才会删除本地分支。注意小写d。

`git branch -D <branchname>`（注意大写 D）将删除本地分支，无论其合并状态如何。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2014-07-22T11:50:05.450

Schleis 的变体对我不起作用（Ubuntu 12.04），所以让我提出我的（清晰而闪亮的 :) 变体：

变体 1（我更喜欢这个选项）：

```
git for-each-ref --format='%(refname:short) %(upstream)' refs/heads/ | awk '$2 !~/^refs\/remotes/' | xargs git branch -D 
```

变体 2：

一种。试运行：

```
comm -23 <( git branch | grep -v "/" | grep -v "*" | sort ) <( git br -r | awk -F '/' '{print $2}' | sort ) | awk '{print "git branch -D " $1}' 
```

湾。删除分支：

```
comm -23 <( git branch | grep -v "/" | grep -v "*" | sort ) <( git br -r | awk -F '/' '{print $2}' | sort ) | xargs git branch -D 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2018-06-13T00:34:41.987

你可以使用这个命令：

```
git branch --merged master | grep -v "\* master" | xargs -n 1 git branch -d 
```

[Git Clean：删除已经合并的分支](https://stevenharman.net/git-clean-delete-already-merged-branches)，包括命令分解

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-08-15T02:58:03.010

根据上面的答案，我提出了这一行解决方案：

```
git remote prune origin; git branch -r | awk '{print $1}' | egrep -v -f /dev/fd/0 <(git branch -vv | grep origin) | awk '{print $1}' | xargs git branch -d 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2016-11-11T18:56:23.857

使用@wisbucky 答案的变体，我将以下内容作为别名添加到我的`~/.gitconfig`文件中：

```
pruneitgood = "!f() { \
    git remote prune origin; \
    git branch -vv | perl -nae 'system(qw(git branch -d), $F[0]) if $F[3] eq q{gone]}'; \
}; f" 
```

有了这个，一个简单的`git pruneitgood`将清理合并后不再需要的本地和远程分支。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2016-11-16T20:16:14.987

以下是对 Windows 用户的@wisbucky 答案的改编：

`for /f "tokens=1" %i in ('git branch -vv ^| findstr ": gone]"') DO git branch %i -d`

我使用 posh-git，不幸的是 PS 不喜欢裸`for`，所以我创建了一个简单的 'ol 命令脚本，名为 PruneOrphanBranches.cmd：

```
@ECHO OFF
for /f "tokens=1" %%i in ('git branch -vv ^| findstr ": gone]"') DO CALL :ProcessBranch %%i %1

GOTO :EOF

:ProcessBranch
IF /I "%2%"=="-d" (
    git branch %1 %2
) ELSE (
    CALL :OutputMessage %1
)
GOTO :EOF

:OutputMessage
ECHO Will delete branch [%1] 
GOTO :EOF

:EOF 
```

不带参数调用它以查看列表，然后使用“-d”调用它以执行实际删除或“-D”用于未完全合并但无论如何要删除的任何分支。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2018-07-18T15:28:10.033

Powershell 版本`git branch --merged master | grep -v '^[ *]*master$' | xargs git branch -d`

`git branch --merged master | %{ if($_ -notmatch '\*.*master'){ git branch -d "$($_.Trim())" }}`

*当您在 master 分支上时*，这将删除任何已合并到 master 中的本地分支。

`git checkout master`换成。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2020-06-30T13:51:30.037

这适用于我使用 git 2.21.0 - 它删除本地跟踪分支，这些分支合并到`HEAD`我之前`--set-upstream`推送的位置（我使用`push.default=upstream`它是因为它最适用于多个遥控器），并且上游分支已被删除`fetch --prune`（或隐式 if`fetch.prune=true`在 git 配置中）：

```
git branch -vv --merged | grep ': gone]' | awk '{print $1}' | xargs git branch -d 
```

使用`--merged`并`-d`使其成为非常“安全”的删除。更激进的版本可能会放弃`--merged`并使用`-D`

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-11-24T14:57:27.877

在 git bash 中尝试此操作，以获取和修剪对已删除分支的引用，然后修剪跟踪已删除分支的本地分支：

```
git fetch -p && git branch -d `git branch -vv | grep ': gone]' | awk '{print $1}' | xargs` 
```

记得先签出一个不会被删除的分支，这样就不会阻止删除分支。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-11-19T02:55:21.317

检查目标

`for target in $(git branch | grep -Eiv "master|develop|branchYouWantToLive"); do echo $target; done`

使用 for & 子命令运行

`for target in $(git branch | grep -Eiv "master|develop|branchYouWantToLive"); do git branch -D $target; done`

你可以扩展其他关于分支的工作。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-09-22T12:19:38.527

我已经把接受的答案变成了一个健壮的脚本。您可以[在我的 git-extensions 存储库中](https://github.com/inkarkat/git-extensions/blob/master/git-prune)找到它。

```
$ git-prune --help
Remove old local branches that do not exist in <remote> any more.
With --test, only print which local branches would be deleted.
Usage: git-prune [-t|--test|-f|--force] <remote> 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-02-12T00:32:23.213

我到达此页面寻求“如何删除不再具有上游分支的本地签出分支”的答案

我也不关心本地分支是否已被合并，因为管道进入`git branch -d`只会发出警告而不是删除未合并的本地分支。

```
git branch -a | grep origin | tr -s ' ' | cut -d '/' -f3 | egrep -v -f /dev/fd/0 <(git branch -a | grep -v origin) | grep branch_prefix_that_I_care_about | xargs git branch -d

# translation
# git branch -a | grep origin | tr -s ' ' | cut -d '/' -f3
## this finds all remote branch names minus the "remote/origin/" part
#
# <(git branch -a | grep -v origin)
## this finds all local branch names and redirects it into the previous command
#
# egrep -v -f /dev/fd/0 STUFF
## this is doing some weird magic that I'm grokking as "take the set difference from whatever was piped in"
#
#
# overall translation: (STUFF TO CONSIDER) | egrep magic <(STUFF TO REMOVE FROM CONSIDERATION) | do cool things with resulting stuff 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-10-29T11:55:36.490

当遥控器本身不再存在时，我在这里找不到有用的答案。我一直看到不再存在的遥控器分支，但没有找到删除它们的 git 命令。

我的解决方案是转到`.git\refs\remotes`目录并直接删除不再相关的文件。文件结构非常容易理解。它与您看到的结构相同`git branch -r`。

* * *

## 回答 #31

> 赞同：-2
> 
> 时间：2014-10-21T06:08:46.203

删除任何与 master 不是最新的分支

```
git co master && git branch | sed s/\*/\ / | xargs git branch -d 2> /dev/null 
```

* * *

## 回答 #32

> 赞同：-3
> 
> 时间：2014-05-09T01:56:36.407

我很确定这`git remote prune origin`就是你想要的。

你可以运行它`git remote prune origin --dry-run`来看看它*会*做什么而不做任何改变。

* * *

## 回答 #33

> 赞同：-12
> 
> 时间：2014-12-04T11:36:58.430

使用图形用户界面？手动程序，但快速简便。

```
$ git gui 
```

选择“分支 -> 删除”。您可以使用 ctrl-click (windows) 选择多个分支并删除所有分支。

# c# - LINQ查询...如何执行？

> ID：13064614
> 
> 赞同：0
> 
> 时间：2012-10-25T08:31:19.533
> 
> 标签：c#, linq, linq-to-entities

假设我得到了下一个序列：

```
1
2
3
4
5
6
7
8
9
10 
```

我需要用 Linq 做下一件事：

```
1,2;
2,3;
3,4;
4,5;
...
9,10; 
```

无法得到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T08:39:15.897

这是你想要的吗？

```
 var list = new[] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

 var result = Enumerable.Range(0, list.Length - 1)
                        .Select(i => new[] {list[i], list[i + 1]}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:42:05.000

```
your_sequence.Take(high - low).Select(i => new []{i, i + 1}) 
```

在您的情况下：低 = 1，高 = 10。

要测试你可以写

```
Enumerable.Range(1, 10).Take(10 - 1).Select(i => new []{i, i + 1}) 
```

在[LinqPad中](http://www.linqpad.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:43:37.280

```
var res =
    Enumerable.Range(1, n).Select(item => new[] { item, item + 1 }); 
```

# git - 如何在 Git 提交之前修补所有更改的文件

> ID：13064617
> 
> 赞同：2
> 
> 时间：2012-10-25T08:31:29.677
> 
> 标签：git

在提交更改的文件之前，我需要删除所有尾随空格。问题是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:16:24.983

我不相信有一种在提交时自动删除尾随空格的好方法（如果可以的话，我认为这样做不是一个好主意）。

我之前使用过一个钩子来拒绝添加尾随空格的提交，这对我来说效果很好；创建/添加以下内容`.git/hooks/pre-commit`并使其可执行：

```
# Work out what to diff against
if git rev-parse --verify HEAD >/dev/null 2>&1
then
    against=HEAD
else
    # Initial commit: diff against an empty tree object
    against=4b825dc642cb6eb9a060e54bf8d69288fbee4904
fi

# If there are whitespace errors, print the offending file names and fail.
exec git diff-index --check --cached $against -- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:43:05.047

Git 默认情况下会警告尾随空格，并且可以配置为拒绝添加空格错误的提交。

删除空格只能通过更改文件并重做`git-add`阶段来工作 - 虽然可以在添加时自动执行此操作，但这会留下与暂存的不同的工作树，因此文件仍将显示为“已更改但未更新”在`git-status`输出中。

删除尾随空格的最简单方法是

```
sed -i -e 's/[:blank:]*$//' file.c ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T06:56:19.723

好吧，最终我决定为此编写 gitadd 命令。

```
#!/bin/bash

# Number of arguments passed
argc=$#

if [ $argc -eq 0  ]; then
        argv=( $(git diff --name-only HEAD) )
else
        argv=( $@ )
fi

for file in "$argv"; do

        sed -i -e 's/^[[:blank:]]\+$//' $file

        git add $file # stage patched file

done 
```

# c# - 在 TileUpdater 中显示超过 5 条消息

> ID：13064620
> 
> 赞同：0
> 
> 时间：2012-10-25T08:31:32.933
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

我在我的应用程序 ScheduledTileNotifications 中使用并在 TileUpdateManager 中推送 10 到 20 条消息。但在地铁上只有 5 条消息处于活动状态。我该怎么做才能在 Metro-Tile 中显示超过 5 个通知？

```
string tileXmlString = "<tile>"
       + "<visual>"
       + "<binding template='TileWideSmallImageAndText03' branding='name'>"
       + "<image id='1' src='ms-appx:///Assets/icons/cube_for_kachel.png'/>"
       + "<text id='1'>" + longSubject + "\n" + message.title + "</text>"
       + "</binding>"
       + "<binding template='TileSquareText04' branding='name'>"
       + "<text id='1'>" + shortSubject + "\n" + message.title + "</text>"
       + "</binding>"
       + "</visual>"
       + "</tile>";

XmlDocument tileXml = new XmlDocument();
tileXml.LoadXml(tileXmlString);
ScheduledTileNotification sceduleNotification = new ScheduledTileNotification(tileXml, DateTime.Now.AddSeconds(15));
TileUpdateManager.CreateTileUpdaterForApplication().EnableNotificationQueue(true);
TileUpdateManager.CreateTileUpdaterForApplication().AddToSchedule(sceduleNotification); 
```

* * *

当我将**EnableNotificationQueue**设置为 true 时，我的五个通知会围成一圈运行。当我将其设置为 false 时，我的通知不会循环运行。但是我有 10 到 20 个通知，它们应该循环运行。你觉得有可能吗。

当我使用**AddToSchedule**方法推送 10 个通知时，每个通知将显示一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:04:37.283

该问题与**EnableNotificationQueue**方法的使用有关。事实上，您可以在[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.enablenotificationqueue](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.enablenotificationqueue)阅读：

> 启用排队时，最多可以在磁贴上自动循环显示最多五个磁贴通知。

尝试将**false**传递给此方法。

根据文档，您最多可以安排 4096 个通知。参考[http://hansstan.wordpress.com/2012/09/02/windows-8-advanced-tile-badge-topics/](http://hansstan.wordpress.com/2012/09/02/windows-8-advanced-tile-badge-topics/)获取工作示例。

# oracle - 获取列值长度，而不是列值的最大长度

> ID：13064621
> 
> 赞同：18
> 
> 时间：2012-10-25T08:31:34.763
> 
> 标签：oracle, string-length

如何获得列中值的实际长度？

我的（oracle）sql 命令返回可以插入列中的值的最大长度，而不是值的实际长度。

如何解决这个问题？

```
SQL> SELECT typ, length(t1.typ)
     FROM AUTA_VIEW t1;

TYP        LENGTH(T1.TYP)
---------- --------------
BMW                    10
BMW                    10
BMW                    10
Ferrari                10
BMW                    10
Audi                   10
Audi                   10
Audi                   10
Ferrari                10
Ferrari                10
Mercedes               10 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-25T08:36:54.473

`LENGTH()`确实返回字符串长度（刚刚验证）。我想你的数据是用空格填充的 - 试试

```
SELECT typ, LENGTH(TRIM(t1.typ))
FROM AUTA_VIEW t1; 
```

反而。

如前所述`OraNob`，另一个原因可能`CHAR`是在这种情况下使用`LENGTH()`也会返回列宽，而不是字符串长度。但是，该`TRIM()`方法也适用于这种情况。

# java - maven - 在多模块构建中禁用模块的专用目标

> ID：13064624
> 
> 赞同：1
> 
> 时间：2012-10-25T08:31:50.500
> 
> 标签：java, eclipse, maven, build

我使用一个多模块构建文件来触发一个相当复杂的 java 项目的构建。现在我想创建 Eclipse 项目文件——但不是针对所有模块。是否可以在pom 上定义它应该*忽略*`eclipse:eclipse`目标？

我调用的多模块 pom 的模块定义`mvn eclipse:eclipse`如下所示：

```
<modules>
  <module>../project1/generate/pom.xml</module>
  <module>../project1/pom.xml</module>
  <module>../project2/generate/pom.xml</module>
  <module>../project2/pom.xml</module>
  <!-- and many more projects with or without generate sub modules -->
</modules> 
```

当然 pom 不仅是创建 eclipse 项目所需要的，所以我不能只删除导致该目标出现问题的模块。

询问的原因：`eclipse:eclipse`在*生成* 模块上执行将更改清单文件中的某些属性，从而导致下一次构建中断。而且我厌倦了一直手动纠正它们；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T20:46:31.177

您可以使用[Maven 高级反应器选项](http://www.sonatype.com/people/2009/10/maven-tips-and-tricks-advanced-reactor-options/)（从 Maven 2.1 开始）：

例如，仅针对 project1 和 project2：

```
mvn --projects project1, project2 eclipse:eclipse 
```

以 project1 及其所有依赖项为目标：

```
mvn --projects project1 --also-make eclipse:eclipse 
```

这为反应多模块项目提供了一种标准化的方式，并且不需要在 pom.xml 中进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:51:47.447

您可以为此使用[Maven 配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)。

删除您定义的模块并添加如下内容：

```
<profiles>
    <profile>
        <id>full</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <modules>
            <module>../project1/generate/pom.xml</module>
            <module>../project1/pom.xml</module>
            <module>../project2/generate/pom.xml</module>
            <module>../project2/pom.xml</module>
        </modules>
    </profile>
    <profile>
        <id>eclipse</id>
        <modules>
            <module>../project1/pom.xml</module>
            <module>../project2/pom.xml</module>
        </modules>
    </profile>
</profiles> 
```

然后当你想生成eclipse设置时：

```
mvn -Peclipse eclipse:eclipse 
```

# c# - 获取表格的行内容

> ID：13064625
> 
> 赞同：0
> 
> 时间：2012-10-25T08:31:56.073
> 
> 标签：c#, asp.net, .net, asp.net-1.1

我正在研究**ASP.Net 1.1**。

在一个页面中，我的表格为：

```
<table id="dlInterior" Width="300" Runat="server" CellSpacing="0" CellPadding="0">
    <tr>
        <td id="inttd" vAlign="top" width="350" runat="server"></td>
    </tr>
</table> 
```

**在页面加载**时 - 我正在向该表动态添加行：

```
public static void DisplayDecodedInfo(object[] decodedValues, HtmlTable tableToAdd)
{
    try
    {
        if(decodedValues.Length > 0)
        {
            foreach(string item in decodedValues)
            {
                HtmlTableCell tdInterior = new HtmlTableCell();
                HtmlTableCell tdInterior1 = new HtmlTableCell();
                tdInterior1.Attributes.Add("Width","3%");
                tdInterior1.Attributes.Add("Align","Center");
                HtmlTableRow trInterior = new HtmlTableRow();
                trInterior.Attributes.Add("Height","20px");
                tdInterior.Attributes.Add("padding-left","2cm");
                tdInterior.InnerHtml = "<b>*</b> " + item;
                trInterior.Controls.Add(tdInterior1);
                trInterior.Controls.Add(tdInterior);
                tableToAdd.Controls.Add(trInterior);
            }
        }
    }
} 
```

现在在页面的**SAVE 按钮单击事件**上，*我需要逐行获取这些字符串值。*

请建议怎么可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:47:23.727

好吧，您不能只从服务器端脚本中获取 HTML 表格的内容。因此，您还应该为数据呈现隐藏字段，并在提交时可以在`Request.Form[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:47:31.480

如果需要，我会将它们缓存在其中`decodedValues`，`Session`或者`ViewState`在回发时从那里检索数组。

# axapta - CompanyInfo 与 LogisticsElectronicAddress 的关系

> ID：13064627
> 
> 赞同：1
> 
> 时间：2012-10-25T08:32:01.277
> 
> 标签：axapta, dynamics-ax-2012

我想进行查询以获取实际公司的信息并将其放入报告中。我需要得到公司的全名、地址、电话号码和传真。

我试图从“CompanyInfo”表中获取有关我公司的一些信息，但我们没有获取电话或传真的字段。我尝试了一种显示方法，但该方法没有返回任何内容！

我想在“CompanyInfo”和“LogisticsElectronicAddress”之间建立关系（我可以从 LogisticsElectronicAddress.Locator 找到电话或传真，其中 LogisticsElectronicAddress.Type == 电话（或传真））。

有人可以帮我做一个显示方法或查询来得到我想要的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T09:25:49.833

不要让它变得更难：

```
Str phone = CompanyInfo::find().phone();
Str address = CompanyInfo::find().postalAddress().Address;
Str zip = CompanyInfo::find().postalAddress().ZipCode; 
```

将找到当前公司的当前电话号码、地址和邮政编码。

如果`phone`为空白，则电话号码不是最新的。确保电话号码被标记为“主要”并且它是有效的（在`ValidFrom`和`ValidTo`字段指示的有效时间范围内。

在 AX 2012 中的“法人实体”、“联系信息”中，选择“更多选项”和“高级”以查看日期。

与地址信息相同。

# guava - “Iterables”和“Iterators”有什么区别？

> ID：13064633
> 
> 赞同：0
> 
> 时间：2012-10-25T08:32:51.343
> 
> 标签：guava

我是谷歌番石榴的新手。我不知道我们什么时候应该使用“Iterables”或“Iterators”。你能帮我解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:54:56.883

见[维基](http://code.google.com/p/guava-libraries/wiki/CollectionUtilitiesExplained#Iterables)：

> 因此，您可能希望看到所有集合都支持的许多操作都可以在`Iterables`. 此外，大多数 `Iterables`方法都有相应的版本`Iterators`，接受原始迭代器。

中的许多方法`Iterables`调用`Iterators`. p码：

```
Iterables.operation(Iterables it){
  if(it is-a Collection)
    return it.operation();
  else
    return Iterators.operation(it.iterator());
} 
```

# ember.js - 模型不会从商店加载

> ID：13064636
> 
> 赞同：1
> 
> 时间：2012-10-25T08:33:01.607
> 
> 标签：ember.js, ember-data

对于我正在开发的应用程序 Ember.js + Ember Data 似乎是一个很好的解决方案。但是，我什至无法使用这两个库来获得一个简单的版本来工作。问题是我的 JSON 文件提供的数据未正确加载或显示。

我的 app.js 看起来像。我在边缘运行所有库。

```
var App = Em.Application.create({});

App.store = DS.Store.create({
    revision: 6,
    adapter: DS.RESTAdapter.create({
        bulkCommit: false
    })
});

App.Item = DS.Model.extend({
    pluginName: DS.attr('string')
});

App.regionController = Em.ArrayController.create({
    content: App.store.findAll(App.Item)
}); 
```

我有一个看起来像这样的模板：

```
<script type="text/x-handlebars">
    <ul>
    {{#each regionController}}
        <li>{{item}}</li>
    {{/each}}
    </ul>
</script> 
```

对 json 文件的请求是正确的（我看到请求在 Firebug 中弹出）并且具有以下内容：

```
{
    items: [{
        "id": "3",
        "pluginName": "text"
    },
    {
        "id": "3",
        "pluginName": "split"
    }]
} 
```

谁能发现我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:44:50.497

您的模板应该如下所示：

```
<script type="text/x-handlebars">
    <ul>
      {{#each item in regionController}}
        <li>{{item.pluginName}}</li>
      {{/each}}
    </ul>
</script> 
```

让我知道这是否适合你。

# php - html中的空白渲染 - Drupal 7？

> ID：13064637
> 
> 赞同：0
> 
> 时间：2012-10-25T08:33:04.727
> 
> 标签：php, html, drupal, drupal-7

当我使用一个模块时，我遇到了一些问题。出现了一些空白

```
$content='';
$vocab = vuagame_getVocByName("the_loai_game");
$terms = taxonomy_get_tree($vocab->vid);
foreach ($terms as $term) {
    $content.="<div class='contentBox'>";
    $content.="<div class='contentBoxHeader'>";
    $content.="<a href='/category/".$term->tid."'>".$term->name."</a>";
    $content.="</div>";
    $content.="<table class='gameTable' cellspacing='0' cellpadding='5'>";
    $content.= views_embed_view('home', 'page', $term->tid);
    $content.="</table>";
    $content.="<div class='seemorelink'><a href='/category/".$term->tid."'>Xem thêm</a></div>";
    $content.="</div><br/>";
}
return $content; 
```

这是检查元素的结果：

```
<div class="contentBox"><div class="contentBoxHeader"><a href="/category/23">18+</a></div>  
"

   "
<table class="gameTable" cellspacing="0" cellpadding="5"><tbody><tr> 
```

有人能找出我的问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T07:28:44.993

这似乎是一个编码问题。尝试确保使用编码 UTF-8 保存 .tpl 文件

这应该修复奇怪的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:47:52.947

首先，br 标签现在不是标准。像这样调试它，

1）先尝试没有循环的html。或在第一个循环后中断循环。如果仍然存在空白，请将 href 标记替换为

```
"<a href='lorum.html'>ispum </a>"
```

看看它是否消失了..可能会有不规则标签打开/关闭的机会

如果仍然存在，则仅用虚拟文本替换所有数据对象，如果可能有一些错误数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T13:31:08.310

“出现了一些空白”是什么意思？你得到一些显示的东西，但它下面有空白？

如果是这种情况，您可以尝试在输出中添加“clearfix”类并将其添加到您的 css 文件中：

```
.clearfix:after {
    content: "";
    clear: both;
    font-size: 0;
    display: block;
    height: 0;
    visibility: hidden;
} 
```

是的，这
似乎是不必要的，这也可能导致问题。

# azure - SQL Azure 限制信息

> ID：13064642
> 
> 赞同：1
> 
> 时间：2012-10-25T08:33:28.617
> 
> 标签：azure, azure-sql-database

如何查看 SQL Azure 数据库是否受到限制？我想查看以下数据：限制的时间百分比、限制的数量、限制的主要原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:54:20.123

我不相信目前有可用的信息。但是，团队确实分享了您可能会受到限制的原因以及如何处理它（[请参阅此处](http://msdn.microsoft.com/en-us/library/windowsazure/ff394106.aspx#throttling)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T09:54:59.047

请参阅[https://stackoverflow.com/questions/2711868/azure-performance/13091125#13091125](https://stackoverflow.com/questions/2711868/azure-performance/13091125#13091125)

节流是最小的麻烦。如果您需要性能，那么您最好使用 VM 角色构建自己的数据库服务器。我发现它们的性能比 SQL Azure 有了很大的提高。对于容错，如有必要，您可以在不同区域的不同 VM 中配置主节点和故障转移。确保数据库驻留在本地驱动器上。

# c# - 获取 ASP.NET MVC 4 中由名称给出的方法的属性

> ID：13064646
> 
> 赞同：2
> 
> 时间：2012-10-25T08:33:39.450
> 
> 标签：c#, asp.net-mvc, reflection, ravendb

我`ravendb`用作存储后端。由于它使用`unit of work`模式，我需要打开会话、执行操作、保存结果和关闭会话。我想保持我的代码干净，并且不要在每个操作中显式调用会话打开和关闭，所以我将此代码放入`OnActionExecuting`和`OnActionExecuted`方法中，如下所示：

```
 #region RavenDB's specifics

    public IDocumentSession DocumentSession { get; set; }

    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.IsChildAction)
        {
            return;
        }

        this.DocumentSession = Storage.Instance.OpenSession();
        base.OnActionExecuting(filterContext);
    }

    protected override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.IsChildAction)
        {
            return;
        }

        if (this.DocumentSession != null && filterContext.Exception == null)
        {
            this.DocumentSession.SaveChanges();
        }

        this.DocumentSession.Dispose();
        base.OnActionExecuted(filterContext);
    }

    #endregion 
```

但是有些动作需要连接`ravendb`而不需要。所以我决定创建自定义属性并标记方法需要用它打开 DocumentSession。这是一个例子：

```
 //
    // GET: /Create

    [DataAccess]
    public ActionResult Create()
    {
        return View();
    } 
```

我卡住了。我的计划是在`OnActionExecuted`方法中检索操作的属性，如果`[DataAccess]`存在，则打开`DocumentSession`.

在我可以通过语句`OnActionExecuted`检索操作名称（方法名称） 。`filterContext.ActionDescriptor.ActionName`但是如何使用反射检索给定类的方法属性？

我发现它可能是`Attribute.GetCustomAttributes`调用的，但我得到的最接近 - 我需要`MemberInfo`该方法的对象。但是我怎样才能得到这个`MemberInfo`名称给出的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:41:17.863

如果您从 FilterAttribute 继承自定义属性，它将具有 OnActionExecuted 和 OnActionExecuting 方法。并且会在一般的 OnActionExecuted 和 OnActionExecuting 之前执行。

例子：

```
public class DataAccessAttribute: FilterAttribute, IActionFilter
{       

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.IsChildAction)
        {
            return;
        }
        var controller = (YourControllerType)filterContext.Controller;
        controller.DocumentSession = Storage.Instance.OpenSession();
    }

    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.IsChildAction)
        {
            return;
        }
        var controller = (YourControllerType)filterContext.Controller;
        documentSession = controller.DocumentSession; 
        if (documentSession != null && filterContext.Exception == null)
        {
            documentSession.SaveChanges();
        }

        documentSession.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:40:55.163

为什么不让您的属性从[ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute%28v=vs.100%29.aspx)`DataAccess`继承，这样您就可以将 ActionExecuting/Executed 方法放在属性上而不是控制器上？

[如何](http://ayende.com/blog/4809/refactoring-toward-frictionless-odorless-code-what-about-transactions)通过使用操作过滤器在基本控制器上设置会话来使用 NHibernate 执行此操作的示例。它是使用 NHibernate 完成的，但与您需要做的非常相似，它是由我相信的 RavenDB 作者之一 Ayende 编写的。

# jqgrid - jqGrid getLocalRow 返回 false

> ID：13064647
> 
> 赞同：0
> 
> 时间：2012-10-25T08:33:45.217
> 
> 标签：jqgrid

我正在创建一个数据类型为 local 的 JQgrid，我想从使用 getLocalRow 或 getCell 编辑行中获取行值，但我总是得到错误。这是我的网格定义：

```
jQuery("#rowed5").jqGrid({  
    datatype: 'local',
    data: mydata,

    loadtext:"Cargando...",
    height: altura*0.4,
    width: anchoDefecto*0.9,
    colNames:['Cuenta',
              'Subcuenta',
              'Importe',
              'Signo',
              'Clave',
              'Documento',
              'Doc. Referencia',
              'Ampliación',
              'Extensión'],
    colModel:[
            {name:'intIdfCuenta',index:'intIdfCuenta', width:200, sorttype:"int", editable:true,editrules:{required:true}, edittype:'custom', 
                editoptions:{custom_element: myelemcuentas, custom_value:myvaluecuentas} },
            {name:'intIdfSubcuenta',index:'intIdfSubcuenta', width:200,editable: true,editrules:{required:true}, edittype:'custom', 
                    editoptions:{custom_element: myelemsubcuentas, custom_value:myvaluesubcuentas}},
            {name:'floatImporte',index:'floatImporte', width:200,editable: true,editrules:{required:true}, edittype:'text'},
            {name:'strSigno',index:'strSigno', width:200,editable: true, edittype:'custom',editrules:{required:true}, 
                editoptions:{custom_element: myelemsigno, custom_value:myvaluesigno} },
            {name:'strIdfClave',index:'strIdfClave', width:200,editable: true,editrules:{required:true}, edittype:'custom', 
                    editoptions:{custom_element: myelemclave, custom_value:myvalueclave} },
            {name:'strDocumento',index:'strDocumento', width:200,editable: true,editrules:{required:true},edittype:'text'},
            {name:'strDocumentoReferencia',index:'strDocumentoReferencia', width:200,editable: true,edittype:'text'},
            {name:'strAmpliacion',index:'strAmpliacion', width:200,editable: true,edittype:'text',editoptions: {
            dataInit: function (elem) { $(elem).focus(function () { this.select(); }) },
            dataEvents: [
                {
                    type: 'keydown',
                    fn: function (e) {
                        var key = e.charCode || e.keyCode;
                        if (key == 9)
                        {
                           procesarTabulacionAmpliacion();
                        }
                    }
                }
            ]
            }
            },
            {name:'strIdfTipoExtension',index:'strIdfTipoExtension', width:200,editable:true,edittype:'custom', 
                editoptions:{custom_element: myelemextension, custom_value:myvalueextension} }
            ],
    cellsubmit: "clientArray",  
    pager:"#pager",
    onSelectRow: function(id){          
        selectNextRow(id);

    }
}); 
```

onSelectRow 函数是：

```
function selectNextRow(id){     
     if (lastsel!=null && id!==lastsel && !myRowIsValid(lastsel) ) {
         if(lastsel!=null && id!==lastsel){
             jQuery('#rowed5').jqGrid('setSelection', lastsel);
         }
         return false;
     }else if(id && id!==lastsel){      
         newline = '0';         
        jQuery("#rowed5").saveRow(lastsel, false, 'clientArray');
        jQuery("#rowed5").editRow(id, false);

        lastsel=id;
        actsel = id;
        // ponemos foco
        $(getId("intIdfCuenta",actsel,true)).focus();
    }
} 
```

我尝试使用以下方法获取行信息：

```
 var floatImporte = $("#rowed5").jqGrid('getCell', 'floatImporte');
            var localRowData = $("#rowed5").jqGrid('getLocalRow'); 
```

但在这两种情况下，我总是会出错。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:47:58.463

该方法`getLocalRow`有一个参数：`rowid`. 所以正确的用法`getLocalRow`是

```
var localRowData = $("#rowed5").jqGrid('getLocalRow', id); 
```

如果您`getLocalRow`在没有参数的情况下调用，则会`getLocalRow`看到`rowid`并且`undefined`无法返回相应行的数据。在`getLocalRow`退货的情况下`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-02T13:25:46.987

我有同样的问题，只是创建了一个[fiddle](http://jsfiddle.net/nqneopvz/2/)。您可以通过单击一行来更改一些值。问题是“getLocalRow”总是返回 false，因为没有找到 rowid。我看了一下代码，在 jquery.jqGrid.src.js 中有一行：

```
ind = this.p._index[stripPref(this.p.idPrefix, rowid)]; 
```

它以 rowid="a_jqg2" 调用，例如 this.p.idPrefix 为 "a_"。

我用错了吗？

丹尼斯

# ios - 'NSInvalidArgumentException'，原因：'*** -[__NSArrayM insertObject:atIndex:]：对象不能为 nil'

> ID：13064652
> 
> 赞同：0
> 
> 时间：2012-10-25T08:34:14.273
> 
> 标签：ios, uiimage, nsmutablearray

我有一个包含字符串形式的图像名称的数组，我想将其转换为图像数组，但出现此错误，我做错了什么？

```
 'NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' 
```

我的代码：

```
NSString * immagini = self.chinaTable.images; //unique string

NSArray * arrayImages = [immagini componentsSeparatedByString:@";"]; 
NSLog(@"The images: %@", arrayImages);// here are strings

/*The images: (
"ArchUrb_PortaGenova1.jpg",
"ArchUrb_PortaGenova2.jpg",
"ArchUrb_PortaGenova3.jpg",
"ArchUrb_PortaGenova4.jpg"
)*/

NSMutableArray * mutableImages =[[NSMutableArray alloc]initWithCapacity:20];

for (id obj in arrayImages){

/*The images: (
"ArchUrb_PortaGenova1.jpg",
"ArchUrb_PortaGenova2.jpg",
"ArchUrb_PortaGenova3.jpg",
"ArchUrb_PortaGenova4.jpg"
)*/

 [mutableImages addObject:[UIImage imageNamed:obj]];//here comes the error
  NSLog(@"The array mutable is è %@", mutableImages);
}
NSLog(@"The array of images %@", mutableImages);

self.viewImages.animationImages = [NSArray arrayWithArray:mutableImages];

self.viewImages.animationDuration =3;
self.viewImages.animationRepeatCount= 0;
[self.viewImages startAnimating]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:36:02.673

`[UIImage imageNamed:]``nil`如果在您的应用程序包中找不到请求的图像，则返回。

将缺少的图像添加到您的项目中，或者`if`在将图像添加到数组之前添加一个，如下所示：

```
for (id obj in arrayImages){
    UIImage *image = [UIImage imageNamed:obj];
    if (image != nil)
    {
        [mutableImages addObject:image];
    }
    NSLog(@"The array mutable is è %@", mutableImages);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T04:06:31.077

这个问题与以下问题有关：[Exception with insertObject:atIndex: on iOS6](https://stackoverflow.com/questions/12891858/exception-with-insertobjectatindex-on-ios6/12892460#12892460)。因此，请阅读它以找到您的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:41:30.700

更改您的代码段如下

```
for (id obj in arrayImages){

    UIImage *image  = [UIImage imageNamed:obj];
    if ( image ) {
       [mutableImages addObject:image];
       NSLog(@"The array mutable is è %@", mutableImages);
    }
} 
```

# javascript - 新对象的 knockout.js 映射 (INSERT)

> ID：13064654
> 
> 赞同：0
> 
> 时间：2012-10-25T08:34:15.780
> 
> 标签：javascript, knockout.js

我想创建一个用于插入新车的页面。我正在使用 knockout.js 并想使用敲除映射。问题在于，对于创建，为了获得映射结构，我需要进行 ajax 调用并返回新的空序列化对象。有什么可以防止这个ajax调用吗？
（我也不想一个人写下整个模型结构）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:39:02.293

如果您不想创建对象的 JavaScript 版本并且不想进行 ajax 调用来获取它，那么 Knockout 不可能神奇地知道对象的结构。

您可以做的是使用[Fiddler](http://www.fiddler2.com/fiddler2/)拦截 AJAX 调用。然后 Fiddler 将向您展示对象的 JSON 表示。您可以将其复制粘贴到您的 JavaScript 中，以便您拥有模型的“缓存”版本以供首次使用。将此传递给 Knockout，Knockout 将为您创建对象。

当然，缓存版本会与您的服务器模型不同步（同样的情况也可能发生在纯 JavaScript 模型中）。这只是您必须手动处理的事情。

解决这个问题的一种方法是使用 T4 模板在编译时生成一些代码。通过反射，您可以使用模型的最新版本生成 .js 文件。

# c - 任何函数而不是 C 中的 sprintf()？编译后代码太大

> ID：13064655
> 
> 赞同：8
> 
> 时间：2012-10-25T08:34:15.740
> 
> 标签：c, embedded, printf, cortex-m3, keil

我正在开发一个嵌入式系统（Cortex M3）。为了将一些数据从设备发送到串行端口（显示在 PC 屏幕上），我使用 putchar() 方法使用了一些自己的函数。

当我想发送**integer**或**float**时，我使用 sprintf() 将它们转换为字符串并将它们发送到串行端口。

现在，他们的问题是我使用的是 Keil uVision IDE，它是最大 32 KB 的有限版本。每当我在不同的函数中调用 sprintf() 时，我都不知道为什么编译后的代码大小增加了太多。我现在已经超过 32 KB，我想知道我必须更改我的一些函数并使用其他东西而不是 sprintf！

有什么线索吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T10:27:02.707

两种潜在的产品（我自己都没有使用过 - 我的编译器供应商通常会提供精简版`printf`以供嵌入式使用）：

[http://eprintf.sourceforge.net/](http://eprintf.sourceforge.net/) - [2017 年 9 月：不幸的是，似乎已经消失了，但源代码仍然在这里：[https](https://sourceforge.net/projects/eprintf/files/) ://sourceforge.net/projects/eprintf/files/ ]

[http://www.sparetimelabs.com/tinyprintf/index.html](http://www.sparetimelabs.com/tinyprintf/index.html) - 2 个文件，大约 1.4KB 代码。启用“longs”的选项（意味着更多的代码大小）。支持前导零和字段宽度。没有浮点支持。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T09:25:21.690

如果您希望它高效，最好的方法可能是自己编写代码，或者在网上找到一些已经编写好的代码。然而，int 到字符串的转换非常简单，每个程序员都可以在 30 分钟内完成。浮点到字符串的转换有点复杂，取决于使用的浮点格式。

为方便起见，这里有一个简单的 int-to-string 算法，用于微控制器应用：

```
void get_dec_str (uint8_t* str, size_t len, uint32_t val)
{
  uint8_t i;
  for(i=1; i<=len; i++)
  {
    str[len-i] = (uint8_t) ((val % 10UL) + '0');
    val/=10;
  }

  str[i-1] = '\0';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:38:56.037

您可以尝试`itoa()`或`ftoa()`实现这些作为您的要求。我的意思是他们将这些转换为定义本身内的字符，`putchar()`用于直接打印。

我认为这应该可行。

# android - ByteArrayBuffer 抛出 IndexOutOfBounds 异常 - 无法获取原因

> ID：13064666
> 
> 赞同：0
> 
> 时间：2012-10-25T08:35:15.307
> 
> 标签：android, bytearray, byte, indexoutofboundsexception

我通过 LocalBroadcastManager 在 Android 中接收 ByteArray。它工作正常，但是我分块发送。

当我想合并块时，我得到一个错误。

这是代码：

```
else if (message.equals(BtConstants.BtStateUpdates.BT_UPDATE_STATE_RXRAW_COMPLETE.getString())) {
    Log.i(TAG, "length [" + Integer.toString(picRaw.length()) + "] / capacity [" + Integer.toString(picRaw.capacity()) + "]");
    Log.i(TAG,"append" + Integer.toString(intent.getExtras().getByteArray(BtConstants.btBytePayload).length));              
    picRaw.append(intent.getExtras().getByteArray(BtConstants.btBytePayload), picRaw.length(), 
    intent.getExtras().getByteArray(BtConstants.btBytePayload).length);                 
    String s = "";
    try {
        s = new String(picRaw.buffer(), "US-ASCII");
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Log.i(TAG, "RCVD RAW: " + s);   
} 
```

这是错误。请注意，首先它会附加较小的 650 字节，但随后会在附加更大的值时失败。

```
**10-25 11:21:40.670: I/BluetoothService(9537): length [0] / capacity [15000]

10-25 11:21:40.675: I/BluetoothService(9537): append665**

Works FINE so far

10-25 11:21:40.680: V/BluetoothSocket.cpp(9537): readNative

10-25 11:21:40.680: I/BluetoothService(9537): RCVD RAW: �..edited out for brevity.�

10-25 11:21:40.680: D/BluetoothService(9537): Rcvd broadcast: com.test.ppt.bt_state_raw_connected 

**10-25 11:21:40.695: I/BluetoothService(9537): length [665] / capacity [15000]

10-25 11:21:40.695: I/BluetoothService(9537): append5320

10-25 11:21:40.695: D/AndroidRuntime(9537): Shutting down VM

10-25 11:21:40.695: W/dalvikvm(9537): threadid=1: thread exiting with uncaught exception (group=0x40c3c1f8)

10-25 11:21:40.730: E/AndroidRuntime(9537): FATAL EXCEPTION: main

10-25 11:21:40.730: E/AndroidRuntime(9537): java.lang.IndexOutOfBoundsException**

10-25 11:21:40.730: E/AndroidRuntime(9537):     at org.apache.http.util.ByteArrayBuffer.append(ByteArrayBuffer.java:68)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at com.test.ppt.btService.BluetoothService$1.onReceive(BluetoothService.java:217)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at android.support.v4.content.LocalBroadcastManager.executePendingBroadcasts(LocalBroadcastManager.java:297)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at android.support.v4.content.LocalBroadcastManager.access$000(LocalBroadcastManager.java:46)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at android.support.v4.content.LocalBroadcastManager$1.handleMessage(LocalBroadcastManager.java:116)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at android.os.Handler.dispatchMessage(Handler.java:99)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at android.os.Looper.loop(Looper.java:137)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at android.app.ActivityThread.main(ActivityThread.java:4507)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at java.lang.reflect.Method.invokeNative(Native Method)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at java.lang.reflect.Method.invoke(Method.java:511)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)

10-25 11:21:40.730: E/AndroidRuntime(9537):     at dalvik.system.NativeStart.main(Native Method) 
```

初始容量为 15000 - 这应该足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:43:29.463

```
 try {
                s = new String(picRaw.buffer(), "US-ASCII");
            } 
catch (ArrayIndexOutOfBoundsException e) {
            // TODO: handle exception
        }
        catch (IndexOutOfBoundsException e) {
            // TODO: handle exception
        }

catch (UnsupportedEncodingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

我希望上面的代码对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T10:28:29.700

我想我在[这里](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/util/ByteArrayBuffer.html)找到了解决方案。ByteArrayBuffer.append 的工作方式与我预期的不同。引用这个新文档：

> **无效附加（字符 [] b，int 关闭，int len）**
> 
> ```
>  Appends len chars to this buffer from the given source array starting at index off. 
> ```

从 char[]b 中的 index off 开始。追加总是在 ByteArrayBuffer 的末尾完成。

因此我的代码应该是这样的：

```
picRaw.append(intent.getExtras().
    getByteArray(BtConstants.btBytePayload), picRaw.length(), 
        intent.getExtras().getByteArray(BtConstants.btBytePayload).length); 
```

# java - 将一些字符串元素转换为 int

> ID：13064667
> 
> 赞同：1
> 
> 时间：2012-10-25T08:35:16.237
> 
> 标签：java, arrays

我在网上搜索了如何转换数组中的两个特定元素，并且对研究非常不走运

```
package scanner;

import java.util.Scanner;

public class EmployeeInformation {

    static Scanner sc = new Scanner(System.in);

    static String[][] info = {{"09-001", "Ja Gb", "100", "10", },
                        {"09-002", "Justine", "200", "20", },
                        {"09-003", "Ja Ja", "150", "15", }};

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        System.out.print("     - MENU -\n");
        System.out.print("A. Search Record\nB. Payroll Summary\n------------------\nEnter choice: ");
        String choice = null;
        choice = sc.nextLine();

        if (choice.equalsIgnoreCase("a")) {
            System.out.print("Enter Employee #: ");
            String EmpNum = sc.nextLine();
            SearchRecord(EmpNum);
        }
        else if (choice.equalsIgnoreCase("b")){
                PayrollSummary();
            }
        else {
            System.out.print("Invalid input.");
        }
    }

    private static void SearchRecord(String employeeNumber) {
        // TODO Auto-generated method stub

        String[] matchedRow = null;
        for (int i = 0; i < info.length; i++) {
            String[] oneRow = info[i];
                if (oneRow[0].equals(employeeNumber)) {
                    matchedRow = oneRow;
                    break;
                }
        }
        System.out.print("\nEmployee #:\tEmployee Name\tRate per Hour\tTotal Hours Worked\n");

        for (int i = 0; i < matchedRow.length; i++) {

            System.out.print(matchedRow[i] + "\t\t");
        }
    }

    private static void PayrollSummary() {

        System.out.println("\nEmployee #:\tEmployee Name\tRate per Hour\tTotal Hours Worked\tGross Pay");

        int intArr[] = new int[info.length];
        int r = 0;
        while ( r < info.length) {
            int c = 0;
            while ( c <= r ) {
                if ( c == 2 ) {
                    intArr[c] = Integer.parseInt(info[r][c]);
                if ( c == 3 ) {
                    intArr[c] = Integer.parseInt(info[r][c]);
                }
                }

                c++;
            // How do I multiply index 2 and 3 of Array info and store it in info[r][4]?    
            }

            r++;
        }

    }
}

... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:43:33.557

为了将表示为字符串的两个值相乘，您必须首先解析它们。

如果您想将任意字符串解析为整数，您应该记住，解析某些字符串是不可能的，例如“Justine”。您必须处理将在这种情况下抛出的 NumberFormatException。

```
try{
    Integer myInt = Integer.parseInt(info[x][y]);
}catch(NumberFormatException e){
    // handle your exception
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:44:09.883

你可以这样做

```
class Testing  
{  
  public static void main(String[] args)  
  {  
    System.out.println(isNumeric("123"));  
    System.out.println(isNumeric("123.45"));  
    System.out.println(isNumeric("$123"));  
    System.out.println(isNumeric("123x"));  
  }  
  public static boolean isNumeric(String str)  
  {  
    try  
    {  
      double d = Double.parseDouble(str);  
    }  
    catch(NumberFormatException nfe)  
    {  
      return false;  
    }  
    return true;  
  }  
} 
```

这样你就可以解析你的数组，如果它是 NumberFormatException 它不是一个数字。

# xamarin.ios - 为什么 MonoTouch GC 不能杀死 refcount > 1 的托管对象？

> ID：13064669
> 
> 赞同：9
> 
> 时间：2012-10-25T08:35:24.007
> 
> 标签：xamarin.ios, garbage-collection

我想我已经接近理解[Mono GC 和 ObjC 引用计数是如何一起存在](https://stackoverflow.com/a/13059140/458193)的。

> 它的工作方式是，当本机对象的引用计数为 1 时，我们不会阻止托管实例进行垃圾收集。**一旦引用计数增加到 1 以上，我们就会阻止托管实例被垃圾收集。**
> 
> 这是因为托管对象可能包含用户状态。对于镜像对应本机对象的托管对象（例如托管 UIView 实例），MonoTouch 知道该实例不能包含任何状态，因此只要没有托管代码引用托管实例，GC 就可以收集它。如果稍后需要托管实例，我们只需创建一个新实例。

因此，如果我创建一个`CustomButton`继承的`UIButton`，将其作为子视图添加到我的`View`，让托管引用滑出范围然后运行 ​​GC，这个**托管** `CustomButton`仍然没有资格收集。

为什么不能收藏？当然，它可能具有类似属性的托管状态，**但是如果托管对象没有与它的链接，那么谁在乎这个状态**呢？它也可能消失，为什么不能呢？

我在想一个可能的原因：订阅`CustomButton`事件不会让 GC 保持活动状态，因此当对象被收集时，事件会停止触发。这可能会导致意外行为。

它是否正确？即使没有人链接它，是否还有其他原因可以使托管对象保持活动状态？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T09:02:22.037

> 为什么不能收藏？当然，它可能具有类似属性的托管状态，但是如果托管对象没有与它的链接，那么谁在乎这个状态呢？它也可能消失，为什么不能呢？

本机代码可能具有对该对象的引用，这可能会导致该对象稍后再次出现在托管代码中。

我相信一个代码示例可以说明会发生什么：

```
class MyView : UIView {
    public string ImportantSecret;
}

class AppDelegate : UIApplicationDelegate {
    UIViewController vc;
    public override bool FinishedLaunching (UIApplication app, 
                                            NSDictionary options)
    {
        var myView = new MyView ();
        myView.ImportantSecret = "MonoTouchRocks";

        vc = new UIViewController ();
        vc.View = new UIView ();
        vc.View.AddSubView (myView);

        // When this method returns the only place where myView is referenced
        // is from inside the *native* Subviews collection.

        BeginInvokeOnMainThread (() =>
        {
            Console.WriteLine (((MyView) vc.Subviews [0]).ImportantSecret);
            // If the MyView instance was garbage collected and recreated
            // automatically at this point, ImportantSecret would be null.
        });
    }
} 
```

重要提示：此代码只是为了说明 GC 无法收集可能具有状态的托管对象的原因。这个特定的示例实际上不会忘记重要的秘密，因为 Subviews 数组会自动缓存在托管代码中 - 但通常情况并非如此。

# c# - C#设置下拉列表的显示值

> ID：13064675
> 
> 赞同：0
> 
> 时间：2012-10-25T08:35:43.540
> 
> 标签：c#, winforms, drop-down-menu, switch-statement

我希望根据我的表格行中显示的内容设置下拉列表的默认值。我已经写了下面的 switch 语句，但似乎没有完成这项工作。谁能帮忙？

```
bool viewNull = this._Row.Isxcs_ViewNull();
if (!viewNull)
{
    switch (this._Row.xcs_View.ToUpper())
    {
        case "RC": this.drpdwnChaseSecSelection.SelectedValue = "Renewals Chasing"; break;
        case "D_RL": this.drpdwnChaseSecSelection.SelectedValue = "Deal - Lettings"; break;
        case "NULL": this.drpdwnChaseSecSelection.SelectedValue = "None"; break;
    }
}
else
{
    drpdwnChaseSecSelection.SelectedValue = "None";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:49:07.737

您是否对下拉列表进行数据绑定？类似于以下内容：

```
drpdwnChaseSecSelection.DataSource = GetListItems(); // <-- Get your data from somewhere.
drpdwnChaseSecSelection.DataValueField = "ValueProperty";
drpdwnChaseSecSelection.DataTextField = "TextProperty";

drpdwnChaseSecSelection.DataBind();

bool viewNull = this._Row.Isxcs_ViewNull();
if (!viewNull)
{
    switch (this._Row.xcs_View.ToUpper())
    {
        case "RC": drpdwnChaseSecSelection.SelectedIndex=drpdwnChaseSecSelection.Items.IndexOf(drpdwnChaseSecSelection.Items.FindByText("Renewals Chasing")); break;
        case "D_RL":drpdwnChaseSecSelection.SelectedIndex=drpdwnChaseSecSelection.Items.IndexOf(drpdwnChaseSecSelection.Items.FindByText("Deal - Lettings")); break;
        case default: drpdwnChaseSecSelection.SelectedIndex=drpdwnChaseSecSelection.Items.IndexOf(drpdwnChaseSecSelection.Items.FindByText("None")); break;
    }
}
else
{
    drpdwnChaseSecSelection.SelectedIndex=drpdwnChaseSecSelection.Items.IndexOf(drpdwnChaseSecSelection.Items.FindByText("None"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:26:05.547

如果这些只是字符串值，您可以使用 SelectedItem。

如果这些是基于数据绑定的项目，您应该将下拉列表中的 ValueMember 连接到对象上的正确值，然后您可以使用 SelectedValue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:18:02.347

如果我错了，请纠正我，但似乎您在编译时就知道这些条目。如果是这种情况，只需使用 SelectedIndex 作为 'tranceporter' 在他的回答中建议但不进行搜索 (drpdwnChaseSecSelection.Items.IndexOf(drpdwnChaseSecSelection.Items.FindByText("Renewals Chasing"));)

这会给你更好的表现。

# linux - 找不到 BASH 命令

> ID：13064676
> 
> 赞同：1
> 
> 时间：2012-10-25T08:35:45.587
> 
> 标签：linux, bash, shell

我正在尝试计算我的 linux 系统上的 HDD 数量，我将以下行放在一起。

```
findhdds=$(find /sys/block -name 'sd*' | wc -l) 
```

现在它似乎在运行 'find /sys/block -name 'sd*' | wc -l' 但是当试图将它存储在一个变量中时，我在读回它时收到以下消息：

```
3: command not found 
```

任何人都明白我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:15:49.467

如果将命令存储到变量中，直接调用该变量将执行结果。这就是它尝试启动命令 3 的原因，该命令显然不存在。您必须打印变量才能看到结果： echo $findhdds

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T17:31:40.970

# *错误*解释

 *格式化输出的某些版本/实现，`wc`并在您可以尝试的值之前放置空格：

```
$ wc -l < <(find /sys/block/ -name 'sd*')
  3 
```

请注意，输出`wc`包含空格。现在尝试：

```
$ findhdds= 3
bash: 3: command not found 
```

获取 SO 问题中报告的错误。

# 两种解决方案（以及更多...）：

## .1 计算答案以确保这成为一个数字：

```
findhdds=$((0+$(find /sys/block/ -name 'sd*' | wc -l))) 
```

或者（我喜欢这个）：

```
findhdds=$[$(find /sys/block/ -name 'sd*' | wc -l)] 
```

他们都只会将数字存储在变量中：

```
echo $findhdds 
3 
```

## .2 将设备名称存储在一个数组中并计算成员数：

您可以使用 bash 来执行以下`wc`操作：

```
$ findhdds=($(find /sys/block/ -name 'sd*'))

$ echo $findhdds
/sys/block/sda

$ echo ${#findhdds[@]}
3

$ echo ${findhdds[2]}
/sys/block/sdc 
```

## 纯粹[的 bash](/questions/tagged/bash "显示标记为“bash”的问题")

总之，在**这种**特殊情况下，您可以在整个工作中使用 bash：

### 简单地：

```
findhdds=(/sys/block/sd*) 
```

### 数数

```
echo ${#findhdds[@]}
3 
```

### 指数

```
echo ${!findhdds[@]}
0 1 2 
```

### 所有磁盘（具有完整路径）

```
echo ${findhdds[@]}
/sys/block/sda /sys/block/sdb /sys/block/sdc 
```

### 其中之一

```
echo ${findhdds[0]}
/sys/block/sda 
```

### 只有设备名称

```
echo ${findhdds[0]##*/}
sda

echo ${findhdds[@]##*/}
sda sdb sdc 
```

### ...可以循环处理：

```
for devnam in ${findhdds[@]##*/} ; do
    printf "Doing something with device: %s...\n" $devnam
  done
Doing something with device: sda...
Doing something with device: sdb...
Doing something with device: sdc... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-25T08:41:05.927

试试这个：

```
findhdds=`find /sys/block/ -name 'sd*' | wc -l` 
```

希望这可以帮助！*

# c# - 如何获取硬盘上目标文件的快捷方式？

> ID：13064678
> 
> 赞同：1
> 
> 时间：2012-10-25T08:35:46.243
> 
> 标签：c#

我尝试使用此功能但遇到一些错误：

```
public string GetShortcutTargetFile(string shortcutFilename)
        {
            string pathOnly = System.IO.Path.GetDirectoryName(shortcutFilename);
            string filenameOnly = System.IO.Path.GetFileName(shortcutFilename);

            Shell shell = new Shell();
            Folder folder = shell.NameSpace(pathOnly);
            FolderItem folderItem = folder.ParseName(filenameOnly);
            if (folderItem != null)
            {
                Shell32.ShellLinkObject link = (Shell32.ShellLinkObject)folderItem.GetLink;
                return link.Path;
            }

            return string.Empty;
        }

        static void Main(string[] args)
        {
            const string path = @"C:\link to foobar.lnk";
            Console.WriteLine(GetShortcutTargetFile(path));
        } 
```

第一个错误在线：

```
Shell32.ShellLinkObject link = (Shell32.ShellLinkObject)folderItem.GetLink; 
```

在 (Shell32.ShellLinkObject)folderItem.GetLink 行的右侧我收到错误：

```
Error   2   One or more types required to compile a dynamic expression cannot be found. Are you missing references to Microsoft.CSharp.dll and System.Core.dll? 
```

并在最后一行：

```
Console.WriteLine(GetShortcutTargetFile(path)); 
```

错误出现在：GetShortcutTargetFile(path) 该函数是静态的，但我删除了静态，然后我在最后一行显示错误。

```
Error   4   An object reference is required for the non-static field, method, or property 'GatherLinks.Form1.GetShortcutTargetFile(string) 
```

如何修复所有错误以及如何获取目标文件的所有缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:37:51.370

第一个错误：在项目设置中添加对 Shell32.dll 的引用。

第二个错误：你把这两个函数放在哪里？您似乎正在尝试在表单中创建函数。这就是您无法访问“GatherLinks.Form1.GetShortcutTargetFile(string)”的原因。将您的代码从主函数移动到 Form 加载事件，您将能够编译:)

# cocoa - NSWorkspace launchApplication:showIcon:autolaunch: - 如何检查自动启动标志？

> ID：13064679
> 
> 赞同：2
> 
> 时间：2012-10-25T08:35:51.860
> 
> 标签：cocoa, autologin, nsapplication, nsworkspace

[正如我在这篇文章](https://stackoverflow.com/questions/11536477/mac-os-x-start-on-launch-while-in-app-store)中推荐的那样，我已经实现了一个登录项。在辅助应用程序中，我使用`NSWorkspace`方法启动主应用程序`launchApplication:showIcon:autolaunch:`，发送`YES`到自动启动参数。

问题如下：我需要检查应用程序是否自动启动以不显示启动工具提示。我发现的唯一变体是`[[NSUserDefaults standardUserDefaults] boolForKey:@"autolaunch"]`，它`NO`总是返回。

这个问题可以使用启动参数来解决——但不幸的是，沙盒也将它们切断了。

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:33:00.480

我使用以下代码隐藏启动的应用程序：

```
[[NSWorkspace sharedWorkspace] launchApplicationAtURL:[NSURL fileURLWithPath:appPath] options:NSWorkspaceLaunchAndHide configuration:nil error:nil]; 
```

如果你想设置额外的参数，你可以给方法一个自定义的配置字典。如果您在应用程序包中有启动器：

```
NSString *appPath=[[[[[[NSBundle mainBundle] bundlePath] stringByDeletingLastPathComponent] stringByDeletingLastPathComponent] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"MacOS/myApp"]; 
```

# javascript - 在确认对话框中单击取消按钮时如何打开不同的页面？

> ID：13064680
> 
> 赞同：0
> 
> 时间：2012-10-25T08:35:53.787
> 
> 标签：javascript, scriptmanager

我只需要在下面的确认函数中添加一个 else 条件。因此，如果在框上单击取消，则会打开另一个页面。

```
ScriptManager.RegisterClientScriptBlock(
    Me,
    GetType(Page),
    "confirm ",
    "{ confirm('Hello World'); window.location = 'page.aspx'  }",
    True
); 
```

在这方面的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:48:47.867

尝试

```
ScriptManager.RegisterClientScriptBlock(
    Me,
    GetType(Page),
    "confirm ",
    "{ if(confirm('Hello World')===false) { window.location = 'page.aspx' } }",
    True
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:49:05.723

你试过这个吗？

```
ScriptManager.RegisterClientScriptBlock(
    Me,
    GetType(Page),
    "confirm ",
    "{
      var r = confirm('Hello World'); 
      if (r == true)
         window.location = 'page.aspx';
      else
         windo.location = THE_OTHER_PAGE;
     }",
    True
); 
```

# php - PHP ssh2_auth_pubkey_file 不能使用加密的私钥

> ID：13064681
> 
> 赞同：0
> 
> 时间：2012-10-25T08:35:55.507
> 
> 标签：php, sftp, libssh2

我在PHP中使用ssh2，如下：

```
$connection = ssh2_connect($host, $port);
ssh2_auth_pubkey_file($connection, $username, $pubKey, $privKey, $passphrase); 
```

这会导致错误消息：

```
ssh2_auth_pubkey_file(): Authentication failed for username using public key 
```

但是，我可以通过直接在终端中使用 sftp 来正常连接。

```
$ sftp -oPort=PORT -i /path/to/private/key USER@HOST 
```

（sftp 命令响应询问密码，然后连接。）

调试这个我有点不知所措 - ssh2 命令要求并提供所有相关信息以进行连接，我可以直接在终端中使用 sftp 进行正常连接。问题可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T14:33:42.080

我最终为[phpseclib](http://phpseclib.sourceforge.net/)放弃了 ssh2 。

首先，按如下方式加载私钥：

```
$key = new Crypt_RSA();
$key->setPassword($passphrase);
$key->loadKey(file_get_contents($keyPath)); 
```

然后使用密钥登录：

```
$sftp = new Net_SFTP($host, $port);
$loginResult = $sftp->login($username, $key); 
```

# sql - SQLite - 检查是否有任何字段在每列上都有 1

> ID：13064696
> 
> 赞同：0
> 
> 时间：2012-10-25T08:37:04.897
> 
> 标签：sql, sqlite

我有以下查询：

```
SELECT c.danhoEstetico, c.danhoDirecto
FROM conceptos c
INNER JOIN materialesconceptos mc ON mc.idConcepto = c.idConcepto
INNER JOIN materiales m ON m.idMaterial = mc.idMaterial
WHERE m.idMaterial IN (4,11,11) 
```

这会产生以下结果（例如）：

```
danhoEstetico | danhoDirecto
1             | 0
1             | 0
0             | 0
0             | 0 
```

我需要做一个查询，如果每列中的任何项目都有一个 1，比如同一列中所有字段之间的 OR，输出如下：

```
danhoEstetico | danhoDirecto
1             | 0 
```

我试过了：

```
SELECT
SUM(CASE c.danhoEstetico WHEN c.danhoEstetico=1 THEN 1 ELSE 0 END) AS de,
SUM(CASE c.danhoDirecto WHEN c.danhoDirecto=1 THEN 1 ELSE 0 END) AS dd
FROM conceptos c INNER JOIN materialesconceptos mc ON mc.idConcepto = c.idConcepto
INNER JOIN materiales m ON m.idMaterial = mc.idMaterial
WHERE m.idMaterial IN (4,11,11) 
```

出于某种原因，这会产生：

```
danhoEstetico | danhoDirecto
4             | 4 
```

对此有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:40:34.067

要获取每列中的最大值，请使用`MAX`而不是`SUM`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:41:18.327

**编辑：**我误读了这个问题。此解决方案检查列中的*每一*行是否为 1，而不是*任何*行。我推荐 CL 的答案，但我将把这个答案留在这里，因为它解释了问题中的`CASE`陈述存在问题。

您应该在`CASE`没有基本表达式的情况下使用：

```
SELECT
SUM(CASE WHEN c.danhoEstetico=1 THEN 1 ELSE 0 END) AS de,
SUM(CASE WHEN c.danhoDirecto=1 THEN 1 ELSE 0 END) AS dd
FROM conceptos c INNER JOIN materialesconceptos mc ON 
    mc.idConcepto = c.idConcepto
INNER JOIN materiales m ON m.idMaterial = mc.idMaterial
WHERE m.idMaterial IN (4,11,11) 
```

从[文档中](http://www.sqlite.org/lang_expr.html)：

> 在具有基本表达式的 CASE 中，基本表达式只计算一次，并将结果与​​从左到右的每个 WHEN 表达式的计算进行比较。CASE 表达式的结果是 THEN 表达式的求值，该表达式对应于比较为真的第一个 WHEN 表达式...

在您所写的陈述中，该`case`陈述始终评估`1`为该列何时为`1`以及`0`该列何时为`0`。因此，它们总是匹配的，总和总是行数。

**更新：**现在你如何把它变成你想要的结果？这是一种方法：

```
SELECT
SUM(CASE WHEN c.danhoEstetico=1 THEN 1 ELSE 0 END) / SUM(1) AS de,
SUM(CASE WHEN c.danhoDirecto=1 THEN 1 ELSE 0 END) / SUM(1)  AS dd
FROM conceptos c INNER JOIN materialesconceptos mc ON 
    mc.idConcepto = c.idConcepto
INNER JOIN materiales m ON m.idMaterial = mc.idMaterial
WHERE m.idMaterial IN (4,11,11) 
```

这利用了整数运算。如果不是一列中的所有行都为 1，则除法将导致值 < 1，小于 1 的值将显示为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:39:00.730

```
select distinct 
       c.danhoEstetico, c.danhoDirecto
 FROM conceptos c
 INNER JOIN materialesconceptos mc ON mc.idConcepto = c.idConcepto
 INNER JOIN materiales m ON m.idMaterial = mc.idMaterial
where 1 in (c.danhoEstetico , c.danhoDirecto) 
```

# c++ - std::bind 和重载函数

> ID：13064698
> 
> 赞同：15
> 
> 时间：2012-10-25T08:37:13.383
> 
> 标签：c++, c++11, stdbind

请参考以下代码片段。我想使用`std::bind`for 重载函数`foobar`。它只调用不带参数的方法。

```
#include <functional>
#include <iostream>
class Client
{  
  public :  
  void foobar(){std::cout << "no argument" << std::endl;}
  void foobar(int){std::cout << "int argument" << std::endl;}
  void foobar(double){std::cout << "double argument" << std::endl;}
};

int main()
{
    Client cl;  
    //! This works 
    auto a1 = std::bind(static_cast<void(Client::*)(void)>(&Client::foobar),cl);
    a1();
    //! This does not
    auto a2= [&](int)
    {
        std::bind(static_cast<void(Client::*)(int)>(&Client::foobar),cl);
    };
    a2(5);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T08:46:40.917

您需要使用`placeholders`未绑定的参数：

```
auto a2 = std::bind(static_cast<void(Client::*)(int)>(&Client::foobar), cl,
                    std::placeholders::_1);
a2(5); 
```

您还可以使用 lambda 捕获执行绑定（请注意，这是`cl`按引用绑定，而不是按值绑定）：

```
auto a2 = [&](int i) { cl.foobar(i); }; 
```

# jquery - jQuery 删除元素 (LinkedIn)

> ID：13064699
> 
> 赞同：1
> 
> 时间：2012-10-25T08:37:14.743
> 
> 标签：jquery, css

我试图删除图标只留下文本，jQuery 在控制台模式下测试，它可以工作，但如果我刷新页面，图标仍然存在。我试图用 CSS 破解它，但也不起作用。如果有人可以帮助解决这个问题？非常感谢

HTML

```
<script src="http://platform.linkedin.com/in.js" type="text/javascript"></script>
<script type="IN/MemberProfile" data-id="/in/jeffweiner08" data-format="hover"data-text="My profile" data-related="false"></script> 
```

查询

```
$(document).ready(function(){

$('.li-connect-mark').remove();
}); 
```

[http://jsfiddle.net/ZH2PW/](http://jsfiddle.net/ZH2PW/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:48:54.623

您可以使用 CSS：

```
.li-connect-link:first-child {
    display: none;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:48:26.797

试试这个

```
$('span a:first-child').hide(); 
```

或者

```
 $('span a:first-child').remove(); 
```

# php - PHP / Iframe - Google Docs API 查看器和 zip 文件

> ID：13064701
> 
> 赞同：2
> 
> 时间：2012-10-25T08:37:16.643
> 
> 标签：php, zip, google-docs-api, viewer

我正在尝试在我的网站上嵌入谷歌文档查看器。

我需要显示的文件都是 .zip 文件，其中包含许多文件类型、doc、图像、xml、html 等。

所以主要问题是嵌入一个 .zip 文件，谷歌文档查看器列出了 zip 存档中的所有文件，然后当您单击其中一个文件时，您将被重定向到显示该文件的新浏览器页面选项卡。

真诚地，我想避免新的浏览器选项卡重定向，在我嵌入的同一个 iframe 中进行这两个操作（单击文件、查看文件）。

这是我现在使用的代码：

```
 <iframe src="http://docs.google.com/viewer?url=http://mysite.asd.com/test.zip&embedded=true" style="margin:0 auto; width:800px; height:800px;" frameborder="0"></iframe> 
```

所以我在回答是否有任何方法可以让用户能够选择列表中的文件并在我嵌入的同一 iframe 中查看该文件？

我正在使用PHP，有什么好的解决方案吗？

谢谢。

# ios - IOS - 在视图控制器中禁用视图缓存

> ID：13064702
> 
> 赞同：0
> 
> 时间：2012-10-25T08:37:16.707
> 
> 标签：ios, uinavigationcontroller

我在我的应用程序中从一个视图推送和弹出到另一个视图。该视图被保留在内存中，因此当您在推送视图后点击“返回”按钮时，将保留您推送视图之前的同一屏幕。

出于某种原因，我需要在从子视图弹出后重新加载父视图。我需要根据用户在重定向到子视图时所采取的操作来显示不同的内容。

我正在使用 UINavigationController 从一个视图导航到另一个视图。我需要它，这样我就可以轻松地在应用程序的不同视图中来回切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:47:31.470

执行此操作的正确方法是在`viewDidAppear`. 您编写的初始化代码`viewDidLoad`仅被调用一次。但是`viewDidAppear`每次将视图添加到窗口时，您都可以刷新视图的内容。出于性能原因，控制器保留在内存中。删除它会妨碍这个因素。

[这是一个堆栈溢出帖子，详细解释了不同的`view*`回调。](https://stackoverflow.com/questions/5630649/what-is-the-difference-between-viewwillappear-and-viewdidappear)

# programming-languages - notepad++ 的自定义语言重新格式化程序

> ID：13064708
> 
> 赞同：5
> 
> 时间：2012-10-25T08:37:37.860
> 
> 标签：programming-languages, notepad++, formatter

我是数据库平台的开发人员，该平台使用非常相似的特定编程语言`vbscript`来执行用户界面的某些功能。当前使用的开发编辑器`notepad++`已经具有自定义语言荧光笔。已经出现了对代码整理器的需求，我一直在研究定制一个已经存在的格式化程序/美化器，但未能找到任何适当的文档来说明如何正确执行它。据我了解，我可能需要编写一个解释器并使用`nppexec`插件，我之前在野牛中编写过一个词法分析器，所以我想我不是一个完全的初学者。

任何人都可以指出一个指南或给出一些指示以使事情更容易执行吗？

# python - 在 python 中传递命令行参数的实现，不起作用

> ID：13064710
> 
> 赞同：1
> 
> 时间：2012-10-25T08:37:39.617
> 
> 标签：python

我对python很陌生。我希望我可以实现在 python 中传递的命令行参数作为我的第一个 python 脚本。我写了这段代码：

```
def main(argv):
    try:
        opts, args = getopt.getopt(argv, "hb:b:f", ["help", "bucket=", "folder"])
    except getopt.GetoptError:
        usage()
        sys.exit(2)
    s3 = get_files()
    for opt, arg in opts:
        if opt in ("-h", "--help"):
            usage()
            sys.exit()
        elif opt in ("-b", "--bucket"):
            s3.bucketname = arg
        elif opt in ("-f", "--folder"):
            s3.foldername = arg
            print("Came here" + s3.foldername)
    s3.download_files() 
```

在`-f`命令的参数中是我面临问题的地方。对于调试，我使用了该`print`语句。我通过这样的论点：

```
./hello -b something -f /path 
```

但遗憾的是它打印出来：

```
Came here 
```

但是该`foldername`属性没有被分配任何值。我在哪里犯错误？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:50:29.093

您忘记了“文件夹”后面的等号，应该是`getopt.getopt(argv, "hbf:", ["help", "bucket=", "folder="])`，对吧？

您的缩进不正确，应该会导致语法错误。它应该是：

```
elif opt in ("-f", "--folder"):
    s3.foldername = arg 
```

正如其他人指出的那样，[argparse](http://docs.python.org/howto/argparse.html)很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:48:54.360

Argparse 确实是解决此类问题的一种更简单的方法

```
import argparse

if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument('-b', '--bucket', dest='bucketname', action='store')
    parser.add_argument('-f', '--folder', dest='folder', action='store')
    args = parser.parse_args('-b foo'.split())
    print args
    args = parser.parse_args('-b foo -f /foo'.split())
    print args 
```

给出：

```
> Namespace(bucketname='foo', folder=None)
> Namespace(bucketname='foo', folder='/foo') 
```

这意味着您可以将函数重写为：

```
import sys
import argparse

def main():
    parser = argparse.ArgumentParser()
    parser.add_argument('-b', '--bucket', dest='bucketname', action='store')
    parser.add_argument('-f', '--folder', dest='folder', action='store')
    args = parser.parse_args()
    s3 = get_files()
    s3.foldername = args.folder
    s3.download_files() 
```

没有任何进一步的工作，输出`script.py --help`是：

```
usage: script.py [-h] [-b BUCKETNAME] [-f FOLDER]

optional arguments:
  -h, --help            show this help message and exit
  -b BUCKETNAME, --bucket BUCKETNAME
  -f FOLDER, --folder FOLDE 
```

# ios - 我很难理解苹果块编程的这一部分

> ID：13064713
> 
> 赞同：0
> 
> 时间：2012-10-25T08:37:42.633
> 
> 标签：ios

这是来自[苹果块编程](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW2)，谁能告诉我这是什么意思

> 封闭词法范围的局部堆栈（非静态）变量被捕获为 const 变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:44:52.097

假设你有：

```
int i = 5; // in stack 
```

然后在块中你有：

```
...
i++; // can't do that, because i now inside the block is a const
... 
```

您将 __block 添加到`i`声明中，以便能够`i`像这样更改块内的值：

```
__block int i = 5; // remove __block and see the error

void (^myBlock)(void) = ^{
    NSLog(@"[inside block] i = %i", i); // no error even without __block
    i++; // error here without __block
};

myBlock();

NSLog(@"[outside block] i = %i", i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:44:56.950

这意味着如果您在定义块的范围内声明了一个局部变量，那么您可以在块中引用该变量，但您无法更改其值，也无法看到外部对其值所做的任何更改。

```
//-- this is the "Stack (non-static) variables local to the enclosing lexical scope"
int x = 123;

void (^printXAndY)(int) = ^(int y) {

   printf("%d %d\n", x, y);             //-- you can use x inside the block
}; 
```

x 表现为一个 const 变量，即它的值在定义块的那一刻被冻结，您不能修改它。

将此与使用`__block`限定符进行对比，以便能够修改该变量的值。

# javascript - 浮点表示似乎正确地进行整数运算 - 为什么？

> ID：13064715
> 
> 赞同：4
> 
> 时间：2012-10-25T08:37:47.907
> 
> 标签：javascript, c++, floating-point

我一直在玩浮点数，根据我过去对它们的了解，`0.1 + 0.2`最终会变成这样的事实`0.30000000000000004`并不让我感到惊讶。

然而，令我惊讶的是，整数运算似乎总是*工作**得*很好，并且没有任何这些伪像。

我首先在 JavaScript（node.js 中的 Chrome V8）中注意到了这一点：

```
0.1 + 0.2 == 0.3 // false, NOT surprising
123456789012 + 18 == 123456789030  // true
22334455667788 + 998877665544 == 23333333333332 // true
1048576 / 1024 == 1024  // true 
```

C++（Mac OS X 上的 gcc）似乎具有相同的属性。

最终结果似乎是整数——因为没有更好的词——*工作*。只有当我开始使用十进制数字时，事情才会变得不稳定。

这是设计的一个特征，一个数学工件，还是编译器和运行时环境完成的一些优化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T10:16:38.770

> 这是设计的一个特征，一个数学工件，还是编译器和运行时环境完成的一些优化？

这是实数的一个特征。现代代数的一个定理（现代代数，不是高中代数；数学专业的学生在基础微积分和线性代数课后上现代代数课）说，对于某个正整数*b*，任何正实数*r*都可以表示为*r = a* * *b ^p*，其中*a*在 [1, *b* ) 中，*p*是某个整数。例如，1024 [10] = 1.024 [10] *10 ³。正是这个定理证明了我们使用科学记数法的合理性。

该数字*a*可以分为终端（例如 1.0）、重复（1/3=0.333...）或非重复（pi 的表示）。这里有一个终端号码的小问题。任何终端编号也可以表示为重复编号。例如，0.999... 和 1 是同一个数字。这种表示中的歧义可以通过指定可以表示为终端号的数字来解决。

您发现的是所有整数在任何基数中都有终端表示这一事实的结果。

这里有一个关于实数如何在计算机中表示的问题。就像`int`and`long long int`不代表所有的整数一样，`float`也`double`不代表所有的实数。大多数计算机上用于表示实数*r*的方案是以*r = a* *2 ^(*p*)的形式表示，但尾数（或有效数）*a*被截断为一定数量的位，指数*p*限制为某个有限数. 这意味着某些整数无法精确表示。例如，即使一个 googol (10 ^(100)) 是一个整数，它的浮点表示不准确。googol 的 base 2 表示是一个 333 位的数字。这个 333 位尾数被截断为 52+1 位。

这样做的结果是双精度算术不再精确，即使对于整数来说，如果所讨论的整数大于 2 ^(53)。尝试使用`unsigned long long int`介于 2 ^(53)和 2 ^(64)之间的值的类型进行实验。您会发现对于这些大整数，双精度算术不再精确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T09:13:38.030

我是在假设 Javascript 对所有数字使用双精度浮点表示的情况下写的。

某些数字具有浮点格式的精确表示，特别是所有整数，例如`|x| < 2^53`. 一些数字不会，特别是像 0.1 或 0.2 这样的小数，它们在二进制表示中变成无限小数。

如果所有操作数和运算结果都有精确的表示，那么使用 . 比较结果是安全的`==`。

相关问题：

[什么二进制数只能表示为近似值？](https://stackoverflow.com/questions/1674477/what-number-in-binary-can-only-be-represented-as-an-approximation)

[为什么十进制数不能用二进制精确表示？](https://stackoverflow.com/questions/1089018/why-cant-decimal-numbers-be-represented-exactly-in-binary)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T08:40:38.140

具有可表示范围的整数完全可以由机器表示，浮点数不是（嗯，大多数）。

如果通过“基本整数数学”您了解“特征”，那么是的，您可以假设正确实现算术是一个特征。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T08:41:33.680

原因是，您可以精确地以二进制格式（0001、0010、0011、...）表示每个整数（1、2、3、...）

这就是为什么整数总是正确的，因为 0011 - 0001 总是 0010。浮点数的问题是，点之后的部分不能精确地转换为二进制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T08:40:29.840

您所说的“工作”的所有情况都是您给出的数字可以*精确地*以浮点格式表示的情况。您会发现添加 0.25 和 0.5 和 0.125 也完全可以，因为它们也可以用二进制浮点数精确表示。

只有值不能像 0.1 这样你才会得到看起来不准确的结果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-16T01:37:02.310

整数是精确的，因为不精确主要来自我们编写小数的方式，其次是因为许多有理数在任何给定的基数中根本没有不重复的表示。

有关完整说明，请参阅：[https ://stackoverflow.com/a/9650037/140740。](https://stackoverflow.com/a/9650037/140740)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-25T08:44:35.157

只有当您将足够小的整数添加到非常大的整数时，该方法才有效——即使在这种情况下，您也没有以“浮点”格式表示两个整数。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-25T08:44:06.687

不能表示所有浮点数。这是由于它们的编码方式。维基页面比我解释得更好：[http](http://en.wikipedia.org/wiki/IEEE_754-1985) ://en.wikipedia.org/wiki/IEEE_754-1985 。因此，当您尝试比较浮点数时，您应该使用增量：

```
myFloat - expectedFloat < delta 
```

您可以使用最小的可表示浮点数作为增量。

# php - 尝试在 PHP mysql_connect 中捕获

> ID：13064717
> 
> 赞同：0
> 
> 时间：2012-10-25T08:37:54.363
> 
> 标签：php

我写了两个mysql连接。如果其中一个连接出错，我想继续执行。所以我用了try catch。但是，当连接失败时，它会停止执行。如何继续执行其他连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:43:56.937

首先，不要使用 mysql_connect，使用 PDO，这也恰好支持 Exception throwing on errors :)

作为一个通用答案，对于每次连接尝试都有一个单独的 try...catch ，如果其中一个连接失败，则抛出异常，但您仍然可以继续另一个。您可能需要嵌套连接 try...catch 和第三个 try...catch 如果在这两个之外还有一些东西要捕捉。

伪代码：

```
try {
    try {
        attemptConnectionOne();
    } catch () { /* Connection failed */ }

    try {
        attemptConnectionTwo();
    } catch () { /* Connection failed */ }

} catch () { /* whatever else you may need */ } 
```

# javascript - 在 JavaScript 中执行循环之前检查数组的长度

> ID：13064718
> 
> 赞同：2
> 
> 时间：2012-10-25T08:37:56.283
> 
> 标签：javascript, arrays, loops

在执行循环之前检查数组的长度是否不等于 0 是否有意义？

```
var arr = [1,2,3];
if (arr.length !== 0) {
    // do loop
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:42:21.157

在一般情况下，它没有意义。对于 foreach、for 或 while 循环，循环条件将阻止循环执行，因此您的检查是多余的。

```
var arr = [];
for (var loopCounter = 0; loopCounter < arr.length; loopCounter++)
{
   // This loop will never be entered.
} 

foreach (var element in arr)
{
   // This loop will never be entered.
}

var loopCounter = 0;
while (loopCounter < arr.length)
{
   // This loop will never be entered.
   loopCounter++;
} 
```

**但是**，唯一重要的是您使用的是 do...while 循环。在这种情况下，循环执行，**然后**检查循环条件（为时已晚）。在这种情况下，您的代码很可能会在循环内引发异常，如下面的代码所示。

```
var arr = [];
var loopCounter = 0;
do 
{ 
   someMethod(arr[loopCounter]); // This will throw an error
   loopCounter++;
} 
while(loopCounter < arr.length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:40:39.453

嗯，这取决于循环。如果是以下形式：

```
for (i = 0; i < arr.length; i++) {
    do_something_with (arr[i]);
} 
```

那么，不，`if`是多余的，`for`在这种情况下循环体将不会执行。

但是，如果您做过类似的事情（这似乎很可能是因为您提到了一个`do`循环，尽管您实际上可能是指“做循环”，所以很难说）：

```
i = 0;
do {
    do_something_with (arr[i]);
    i++;
while (i < arr.length); 
```

`arr[0]`那么，是的，如果不存在这样的野兽，您将需要它来避免使用问题。

但我会认为第二种情况（检查后）“损坏”，因为在这种情况下`while () {}`或`for () {}`变体（检查前）会更自然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:40:56.293

不，检查是不必要的。如果数组有零个元素，循环将执行零次（假设它被正确写入）。

如果数组可以是`null`，那么检查它是有效的，例如

```
if(arr !== null)
{
    // loop
} 
```

# string - Delphi - 从字符串表单名称创建自定义表单实例（创建自定义构造函数）

> ID：13064719
> 
> 赞同：2
> 
> 时间：2012-10-25T08:38:04.473
> 
> 标签：string, delphi, dynamic, constructor, delphi-7

我目前对使用字符串表单名称创建表单感到困惑（如[在 Delphi 中是否可以通过其名称实例化一个类？](https://stackoverflow.com/questions/701049/is-there-a-way-to-instantiate-a-class-by-its-name-in-delphi)）但我的表单有它自己的构造函数创建。

```
//-BASE CLASS-//
TBaseForm = class(TForm)
  constructor Create(param1, param2: string); overload;
protected
  var1, var2: string;    
end;

constructor TBaseForm.Create(param1, param2: string);
begin
  inherited Create(Application);
  var1 := param1;
  var2 := param2;
end;

//-REAL CLASS-//
TMyForm = class(TBaseForm)
end;

//-CALLER-//
TCaller = class(TForm)
  procedure Btn1Click(Sender: TObject);
  procedure Btn2Click(Sender: TObject);
end;

uses UnitBaseForm, UnitMyForm;

procedure TCaller.Btn1Click(Sender: TObject);
begin
  TMyForm.Create('x', 'y');
end;

procedure TCaller.Btn1Click(Sender: TObject);
var PC: TPersistentClass;
    Form: TForm;
    FormBase: TBaseForm;
begin
  PC := GetClass('TMyForm');

  // This is OK, but I can't pass param1 & 2
  Form := TFormClass(PC).Create(Application);

  // This will not error while compiled, but it will generate access violation because I need to create MyForm not BaseForm.
  FormBase := TBaseForm(PC).Create('a', 'z');
end; 
```

根据我提供的代码，如何仅通过字符串表单名称来创建动态自定义构造函数表单？还是真的不可能？（我开始认为这是不可能的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:59:10.133

您需要定义一个`class of TBaseForm`数据类型，然后将结果`GetClass()`类型转换为该类型，然后您可以调用您的构造函数。您还需要将您的构造函数声明为虚拟，以便可以正确调用派生类构造函数。

尝试这个：

```
type
  TBaseForm = class(TForm)
  public
    constructor Create(param1, param2: string); virtual; overload;
  protected
    var1, var2: string;    
  end;

TBaseFormClass = class of TBaseForm; 
```

.

```
procedure TCaller.Btn1Click(Sender: TObject);
var
  BF: TBaseFormClass;
  Form: TBaseForm;
begin
  BF := TBaseFormClass(GetClass('TMyForm'));
  Form := BF.Create('a', 'z');
end; 
```

# c# - 从特定位置读取文本文件

> ID：13064721
> 
> 赞同：0
> 
> 时间：2012-10-25T08:38:14.260
> 
> 标签：c#, split, find, text-files, readfile

我有一个关于阅读文本文件的问题，因为我不知道我的想法是否正确。我想从特定的字符串读取到特定的字符。

我的文字看起来像这样：

```
... 
...
CM_ "Hello, how are you?

Rules: Don't smoke!
      - love others

End";
...
CM_ "Why you?";
...// Many CM_
... 
```

拆分后应如下所示：

```
1\. CM_
2\. "Hello, how are you?

    Rules: Don't smoke!
      - love others

    End"
3\. CM_
4\. "Why you?"
... // many CM_ 
```

我想从`"CM_"`直到读`";"`

到目前为止我尝试过的代码：

```
StreamReader fin = new StreamReader("text.txt");
string tmp = "";
tmp = fin.ReadToEnd();

if (tmp.StartsWith("CM_ ") && tmp.EndWith(";"))
{
var result = tmp.Split(new[] { '"' }).SelectMany((s, i) =>
                    {
                        if (i % 2 == 1) return new[] { s };
                        return s.Split(new[] { ' ', ';' }, StringSplitOptions.RemoveEmptyEntries);
                    }).ToList();
}
foreach (string x in result)
{
   Console.WriteLine(x);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:04:25.017

```
 static void PRegex()
    {
        using (StreamReader fin = new StreamReader("text.txt"))
        {
            string tmp = fin.ReadToEnd();

            var matches = Regex.Matches(tmp, "(CM_) ([^;]*);", RegexOptions.Singleline);
            for (int i = 0; i < matches.Count; i++)
                if (matches[i].Groups.Count == 3)
                    Console.WriteLine((2 * i + 1).ToString() + ". " + matches[i].Groups[1].Value + "\r\n" + (2 * (i + 1)).ToString() + ". " + matches[i].Groups[2].Value);
        }

        Console.ReadLine();
    }

    static void PLineByLine()
    {
        using (StreamReader fin = new StreamReader("text.txt"))
        {
            int index = 0;
            string line = null;
            string currentCMBlock = null;
            bool endOfBlock = true;
            while ((line = fin.ReadLine()) != null)
            {
                bool endOfLine = false;
                while (!endOfLine)
                {
                    if (endOfBlock)
                    {
                        int startIndex = line.IndexOf("CM_ ");
                        if (startIndex == -1)
                        {
                            endOfLine = true;
                            continue;
                        }
                        line = line.Substring(startIndex + 4, line.Length - startIndex - 4);
                        endOfBlock = false;
                    }

                    if (!endOfBlock)
                    {
                        int startIndex = line.IndexOf(";");
                        if (startIndex == -1)
                        {
                            currentCMBlock += line + "\r\n";
                            endOfLine = true;
                            continue;
                        }
                        currentCMBlock += line.Substring(0, startIndex);
                        if (!string.IsNullOrEmpty(currentCMBlock))
                            Console.WriteLine((++index) + ". CM_\r\n" + (++index) + ". " + currentCMBlock);
                        currentCMBlock = null;
                        line = line.Substring(startIndex + 1, line.Length - startIndex - 1);
                        endOfBlock = true;
                    }
                }
            }
        }

        Console.ReadLine();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:42:22.957

您正在将整个文件读入 tmp。因此，如果“CM_”之前有任何文本，则不会输入您的条件语句。

相反，请尝试使用 fin.ReadLine 在所有行的循环中逐行读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:48:08.743

阅读整个文件：

```
string FileToRead = File.ReadAllText("Path");

string GetContent(string StartAt, string EndAt, bool LastIndex)
{
string ReturnVal;

if(LastIndex)
{
ReturnVal = FileToRead.Remove(FileToRead.IndexOf(StartAt), FileToRead.IndexOf(EndAt));
Return ReturnVal;
}
else
{ 
ReturnVal = FileToRead.Remove(FileToRead.LastIndex(StartAt), FileToRead.LastIndex(EndAt));
Return ReturnVal;
}
} 
```

-希望我在这里没有做错任何事。（自由打字）

您阅读了文件，我们删除了第一个索引前面的所有内容。以及所有之后。您可以设置它是否会返回找到的第一个结果。或最后一个。

注意：我认为使用 StringReader 会更好。（如果我没记错的话……）如果您要考虑应用程序的内存使用情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:00:57.533

试过别的，不知道好不好 它仍然读取第一行，不知道我在这里做错了

我的代码：

```
 while ((tmp = fin.ReadLine()) != null)
        {
            if (tmp.StartsWith("CM_ "))
            {

                //string[] tmpList = tmp.Split(new Char[] { ' ', ';' }, StringSplitOptions.RemoveEmptyEntries);
                var result = tmp.Split(new[] { '"' }).SelectMany((s, i) =>
                {
                    if (i % 2 == 1) return new[] { s };
                    return s.Split(new[] { ' ', ';' }, StringSplitOptions.RemoveEmptyEntries);
                }).ToList();

                if (tmp.EndsWith(";")) break;

                fin.ReadLine();

                if (tmp.EndsWith(";"))
                {
                    result.ToList();
                    break;
                }
                else
                {
                    result.ToList();
                    fin.ReadLine();
                }

                foreach (string x in result)
                {
                    Console.WriteLine(x);
                }
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T11:23:47.297

我建议您考虑使用正则表达式。它可能正是您所需要的，并且比 Split() 灵活得多。

# jquery - 如何将fancybox jquery中的当前ID作为参数传递

> ID：13064726
> 
> 赞同：1
> 
> 时间：2012-10-25T08:38:54.337
> 
> 标签：jquery

```
$("#image_data a").fancybox(
{
'titlePosition' : 'inside',
'docid': $('#company_name').val(),
'productId' : '1234'

}); 
```

我如何将 productId 作为标签的当前 id 传递。

```
$("#image_data a").fancybox(
{
'titlePosition' : 'inside',
'docid': $('#company_name').val(),
'productId' : $(this).attr('id')

}); 
```

给定的代码不起作用，所以还有其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:03:20.700

在外部使用一个变量`fancybox`，然后将变量分配给`productId`

```
 var id = $(this).attr('id');  

 $("#image_data a").fancybox(
     {
       'titlePosition' : 'inside',
       'docid': $('#company_name').val(),
       'productId' : id 

  }); 
```

# perl - 如果特定子节点不存在，则在 perl 中使用 XML::LIB 提取父节点

> ID：13064732
> 
> 赞同：2
> 
> 时间：2012-10-25T08:39:13.760
> 
> 标签：perl, xpath

例如，我的 XML 代码是：

```
<part> 
      <name>qwe</name>
      <ir>
          <d>yes</d>
          <scalar>
              <left>31</left>
              <right>0</right>
          </scalar>
      </ir>
</part>
<part> 
      <name>qaz</name>
      <ir>
          <d>yes</d>
          <scalar>
              <left>1</left>
              <right>0</right>
          </scalar>
      </ir>
</part>
<part>
      <name>asd</name>
      <ir>
          <d>yes</d>
          <drive>
              <default>1</default>
          </drive>
      </ir>
</part>
<part> 
      <name>zxc</name>
      <ir>
          <d>no</d>
          <scalar>
              <left>3</left>
              <right>0</right>
          </scalar>
          <drive>
              <default>0</default>
          </drive>
      </ir>
</part> 
```

我想提取所有没有节点默认值的名称，即输出应该`qwe, qaz`在这个例子中。您必须检查默认值的值，如果它是 0 或 1，并且打印`asd`具有默认值 0 并且`zzxc`具有默认值 1。如果它不存在，则打印没有默认值`qwe`并且`qaz`没有默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:43:13.563

如果默认始终是 in `ir/drive`，则可以使用以下 XPath 表达式：

```
//part[not(ir/drive/default)]/name/text() 
```

# php - 在 Jquery 中将背景颜色设置为画布

> ID：13064738
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:39:30.357
> 
> 标签：php, jquery, html

我的代码显示 92 个选择器，每个选择器都有一个画布（根据选择器中的值设置背景颜色），在 Jquery 中，我为每个值表单选择器设置背景颜色到画布，我的问题是当我单击其他选择器它将背景颜色设置为第一个 Canvas（形成第一个选择器，但不在他自己的 Canvas 上），我有 92 个选择器，每个都有 CANVAS，我怎么能在 JQUERY 中做到这一点...

## 代码

```
 <html>
   <head>
    <title>Tests</title>
    <style type="text/css">
     .table-container {
     display: inline-table;
     }
   table {
    width: 230px;
   }
  </style>
  <script src="js/jquery.js" type="text/javascript"></script>
  <script type="text/javascript">      
 $(document).ready(function(){
  $('select').change(function() {
   var selected = $(this).find(':selected').val();
    if (selected == 'Forms') {
     $('#myCanvas').css('background','green');
    }
      if (selected == 'language Syntax') {
     $('#myCanvas').css('background','yellow');
     }
      if (selected == 'Fundamentals') {
     $('#myCanvas').css('background','red');
     }
      if (selected == 'Advanced Concepts') {
     $('#myCanvas').css('background','blue');
     }
      if (selected == 'New Concepts in PHP5') {
     $('#myCanvas').css('background','violet');
     } 
     if (selected == 'Operators and Functions') {
     $('#myCanvas').css('background','black');
     } 
     if (selected == 'Variables and Datatypes') {
     $('#myCanvas').css('background','brown');
     } 
     });
  });
   </script>
     </head>
    <body>
   <h3>Tests</h3>
  <div class="table-container">
 <table border="3">      
   <tr>
       <th>
 <?php
  $con = mysql_connect("localhost","root","sergios.com");
 if (!$con)
 {
 die('Could not connect: ' . mysql_error());
  }

 mysql_select_db("phptests", $con);

$result1 = mysql_query("SELECT * FROM question");

for($i=1;$i<93;++$i)
 { 
  $result = mysql_query("SELECT * FROM Category"); 
 echo "Number:".$i."<br />";
 echo "<select>";
while ($line = mysql_fetch_array($result, MYSQL_ASSOC))
{
  echo "<option>" .  $line['name'] . "</option>";
}
echo "</select>"; 
?>
 <canvas id="myCanvas" width="20" height="20" style="border:1px solid #c3c3c3;">
   </canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:28:07.700

根据我的观察，您正在更改同一画布元素的颜色（id="myCanvas" => '#myCanvas'）。因此，您需要一种将每个唯一选择器与每个唯一画布唯一关联的方法。

有更优雅的方式来重新编码您已编码的内容。由于时间关系，这里是一个利用html元素类名的例子。

```
// in php //////////
<?php
for($i=1;$i<93;++$i){ 
    $result = mysql_query("SELECT * FROM Category"); 
?>
    <br />
    Number: <?php echo $i; ?>
    <select class="<?php echo 'myCanvas_' . $i; ?>">
    <?php
    while($line = mysql_fetch_assoc($result)){
    ?>
        <option value="<?php echo $line['name']; ?>"><?php echo $line['name']; ?></option>
    <?php
    }
    ?>
    </select>
    <canvas id="<?php echo 'myCanvas_' . $i; ?>" width="20" height="20" style="border:1px solid #c3c3c3;"></canvas>
<?php
}
?>

$(document).ready(function(){
    $('select').change(function() {

        var toChangeCanvasId = '#' + $(this).attr('class');
        var selected = $(this).find(':selected').val();
        if (selected == 'Forms') {
            $(toChangeCanvasId).css('background','green');
        }
        if (selected == 'Fundamentals') {
            $(toChangeCanvasId).css('background','red');
        }

    });
});​ 
```

# css - PNG和css边框问题

> ID：13064742
> 
> 赞同：1
> 
> 时间：2012-10-25T08:39:32.543
> 
> 标签：css, z-index

我使用 Inkscape 在我正在开发的网站中创建了一个非常简单的图标。图标绝对位于两个并排元素的边界之上。

在 Chrome 中它看起来很棒：-

![铬合金](../Images/d872e94d19b22987eb8f3c6ceb3979d3.png)

但在 IE7 中并非如此..:-

![IE7](../Images/1fb6753c8f4639bb0b1486e9c652d0b3.png)

难道我做错了什么？据我所知，我的图像的彩色部分没有透明度。

这是我用来显示图像的代码：-

```
<div class="roadmapstep">
    <div class="roadmapnumber">1</div>
    <h4>Header 1</h4>
    <div class="nextarrow"><img src="nextarrow.png"></div>
</div>

<div class="roadmapstep">
    <div class="roadmapnumber">2</div>
    <h4>Header 2</h4>
    <div class="nextarrow"><img src="nextarrow.png"></div>
</div> 
```

包含图像的 div 的 CSS 是：-

```
.nextarrow {
    position: absolute;
    top: 65px;
    margin-right: -35px;
    right: 0;
    width: 65px;
    height: 40px;
} 
```

带边框的 div 的 CSS：

```
.roadmapstep {
    width: 220px;
    height: 150px;
    border-left: 1px solid black;
    border-top: 1px solid black;
    border-bottom: 1px solid black;
    float: left;
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:44:53.440

使用[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp)将图像定位在另一个图像之上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:01:49.327

添加 `z-index:1000;`到`.nextarrow`

[**演示**](http://jsfiddle.net/BtQ8C/)

* * *

尝试为第二个 div 和`position:absolute`. 有用！！

[**演示 2**](http://jsfiddle.net/BtQ8C/14/)

# objective-c - 这个java命令的Objective-C等价物是什么：

> ID：13064744
> 
> 赞同：0
> 
> 时间：2012-10-25T08:39:38.637
> 
> 标签：objective-c, xcode4.5

```
data.date = new Date(jObjectTip.getLong("createdAt") * 1000); 
```

该命令用于从 FourSquare 获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:50:01.460

呃......不确定“createAt”* 1000 是什么意思。当前日期和时间的 1000 倍？

在 Objective C 中，您可以使用：

*   (id)initWithTimeIntervalSinceNow:(NSTimeInterval)秒

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)

创建具有偏移量的日期时间对象：

```
// creates a date time that is 1000 seconds away from the current time
NSDate *date = [[NSDate alloc] initWithTimeIntervalSinceNow:1000]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:53:21.890

假设这`createdAt`是unix时间戳，代码将是：

```
NSTimeInterval createdAt = ...;
NSDate *resultDate = [NSDate dateWithTimeIntervalSince1970:createdAt]; 
```

请注意，这`NSTimeInterval`是一个 typedef `double`，它以秒为单位存储时间，与 Java 不同，因此无需将该值乘以 1000；

# c++ - 如何获取进程相对时间

> ID：13064745
> 
> 赞同：1
> 
> 时间：2012-10-25T08:39:38.313
> 
> 标签：c++, winapi, visual-c++

有没有办法在不使用C++ 应用程序`GetTickCount`的情况下获取进程的执行时间？`System Time`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:42:32.100

看[`GetProcessTimes()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683223.aspx)功能。

# android - 如何在android中从互联网获取当前时间

> ID：13064750
> 
> 赞同：34
> 
> 时间：2012-10-25T08:40:00.713
> 
> 标签：android, time

我正在制作一个应用程序，我想在其中从互联网上获取当前时间。

我知道如何使用 设备从设备上获取时间`System.currentTimeMillis`，即使经过大量搜索，我也没有得到任何关于如何从互联网上获取时间的线索。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-25T10:09:18.773

您可以使用以下程序从互联网时间服务器获取时间

```
import java.io.IOException;

import org.apache.commons.net.time.TimeTCPClient;

public final class GetTime {

    public static final void main(String[] args) {
        try {
            TimeTCPClient client = new TimeTCPClient();
            try {
                // Set timeout of 60 seconds
                client.setDefaultTimeout(60000);
                // Connecting to time server
                // Other time servers can be found at : http://tf.nist.gov/tf-cgi/servers.cgi#
                // Make sure that your program NEVER queries a server more frequently than once every 4 seconds
                client.connect("time.nist.gov");
                System.out.println(client.getDate());
            } finally {
                client.disconnect();
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

1.您需要[Apache Commons Net](http://commons.apache.org/net/)库才能使其工作。[下载](http://apache.techartifact.com/mirror//commons/net/binaries/commons-net-3.1-bin.tar.gz)库并添加到您的项目构建路径。

*（或者您也可以在这里使用修剪过的 Apache Commons Net Library：[https](https://www-us.apache.org/dist//commons/net/binaries/commons-net-3.6-bin.tar.gz) ://www-us.apache.org/dist//commons/net/binaries/commons-net-3.6-bin.tar.gz这足以从互联网上获取时间）*

2.运行程序。您将在控制台上打印时间。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T10:10:28.883

这是我为您创建的一种方法，您可以在您的代码中使用它

```
public String getTime() {
try{
    //Make the Http connection so we can retrieve the time
    HttpClient httpclient = new DefaultHttpClient();
    // I am using yahoos api to get the time
    HttpResponse response = httpclient.execute(new
    HttpGet("http://developer.yahooapis.com/TimeService/V1/getTime?appid=YahooDemo"));
    StatusLine statusLine = response.getStatusLine();
    if(statusLine.getStatusCode() == HttpStatus.SC_OK){
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        response.getEntity().writeTo(out);
        out.close();
        // The response is an xml file and i have stored it in a string
        String responseString = out.toString();
        Log.d("Response", responseString);
        //We have to parse the xml file using any parser, but since i have to 
        //take just one value i have deviced a shortcut to retrieve it
        int x = responseString.indexOf("<Timestamp>");
        int y = responseString.indexOf("</Timestamp>");
        //I am using the x + "<Timestamp>" because x alone gives only the start value
        Log.d("Response", responseString.substring(x + "<Timestamp>".length(),y) );
        String timestamp =  responseString.substring(x + "<Timestamp>".length(),y);
        // The time returned is in UNIX format so i need to multiply it by 1000 to use it
        Date d = new Date(Long.parseLong(timestamp) * 1000);
        Log.d("Response", d.toString() );
        return d.toString() ;
    } else{
        //Closes the connection.
        response.getEntity().getContent().close();
        throw new IOException(statusLine.getReasonPhrase());
    }
}catch (ClientProtocolException e) {
Log.d("Response", e.getMessage());
}catch (IOException e) {
Log.d("Response", e.getMessage());
}
return null;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-14T10:11:47.533

如果您不关心毫秒精度，并且您已经在使用 google firebase 或不介意使用它（他们提供免费层），请查看：[https ://firebase.google.com/docs/database /android/offline-capabilities#clock-skew](https://firebase.google.com/docs/database/android/offline-capabilities#clock-skew)

基本上，firebase 数据库有一个字段提供设备时间和 firebase 服务器时间之间的偏移值。您可以使用此偏移量来获取当前时间。

```
DatabaseReference offsetRef = FirebaseDatabase.getInstance().getReference(".info/serverTimeOffset");
offsetRef.addValueEventListener(new ValueEventListener() {
  @Override
  public void onDataChange(DataSnapshot snapshot) {
    double offset = snapshot.getValue(Double.class);
    double estimatedServerTimeMs = System.currentTimeMillis() + offset;
  }

  @Override
  public void onCancelled(DatabaseError error) {
    System.err.println("Listener was cancelled");
  }
}); 
```

正如我所说，基于网络延迟将是不准确的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-26T00:28:36.353

我认为最好的解决方案是使用 SNTP，特别是来自 Android 本身的 SNTP 客户端代码，例如： http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/ 4.1.1_r1/android/net/SntpClient.java/](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/net/SntpClient.java/)

我相信当蜂窝网络不可用时（例如 wifi 平板电脑），Android 会使用 SNTP 进行自动日期/时间更新。

我认为它比其他解决方案更好，因为它使用 SNTP/NTP 而不是 Apache TimeTCPClient 使用的时间协议 (RFC 868)。我不知道 RFC 868 有什么不好的地方，但是 NTP 更新并且似乎已经取代它并且被更广泛地使用。我相信没有蜂窝网络的 Android 设备使用 NTP。

另外，因为它使用套接字。提出的一些解决方案使用 HTTP，因此它们的准确性会有所损失。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T09:17:07.000

您将需要访问以 XML 或 JSON 格式提供当前时间的 Web 服务。

如果您没有找到此类服务，您可以从网页解析时间，例如[http://www.timeanddate.com/worldclock/](http://www.timeanddate.com/worldclock/)，或者使用简单的 PHP 页面在服务器上托管您自己的时间服务例子。

查看 JSoup 以解析 HTML 页面。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-13T12:05:27.063

上面没有任何东西对我有用。这就是我最终得到的（使用 Volley）；
此示例还转换为另一个时区。

```
 Long time = null;
    RequestQueue queue = Volley.newRequestQueue(this);
    String url ="http://www.timeapi.org/utc/now";

    StringRequest stringRequest = new StringRequest(Request.Method.GET, url,
            new Response.Listener<String>() {
                @Override
                public void onResponse(String response) {
                    try {
                        SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss");
                        simpleDateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));
                        Date date = simpleDateFormat.parse(response);

                        TimeZone tz = TimeZone.getTimeZone("Israel");
                        SimpleDateFormat destFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
                        destFormat.setTimeZone(tz);

                        String result = destFormat.format(date);

                        Log.d(TAG, "onResponse: " + result.toString());
                    } catch (ParseException e) {
                        e.printStackTrace();
                    }
                }
            }, new Response.ErrorListener() {
        @Override
        public void onErrorResponse(VolleyError error) {
            Log.w(TAG, "onErrorResponse: "+ error.getMessage());
        }
    });
    queue.add(stringRequest);
    return time; 
```

在 gradle 中导入 Volley：

```
compile 'com.android.volley:volley:1.0.0' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-26T05:40:17.193

Stackoverflow 中已有明确的答案

[https://stackoverflow.com/a/71274296/11789675](https://stackoverflow.com/a/71274296/11789675)

调用此 url 或用作 GET API

[http://worldtimeapi.org/api/timezone/Asia/Kolkata](http://worldtimeapi.org/api/timezone/Asia/Kolkata)

反应会像

```
{
  "abbreviation": "IST",
  "client_ip": "45.125.117.46",
  "datetime": "2022-02-26T10:50:43.406519+05:30",
 } 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-12-20T06:16:06.800

我用过 volley .. 并从 Server api (php) 获得时间..

```
 public void GetServerTime() {

        StringRequest volleyrequest = new StringRequest(Request.Method.GET, url, new 
         Response.Listener<String>() {
        @Override
        public void onResponse(String response) {

            try {

                JSONObject jObject = new JSONObject(response);
                result = jObject.toString();

            } catch (JSONException | ParseException e) {
                e.printStackTrace();
                Toast.makeText(getApplicationContext(), "Data Conversion Failed.", Toast.LENGTH_LONG).show();
            }
        }
    }, new Response.ErrorListener() {
        @Override
        public void onErrorResponse(VolleyError error) {
            error.printStackTrace();
            Log.w("onErrorResponse", "" + error.getMessage());
            Toast.makeText(getApplicationContext(), "NO Internet connection! Please check your network.", Toast.LENGTH_LONG).show();
        }
    });

    RequestQueue queue = Volley.newRequestQueue(ProductDetailActivity.this);
    queue.add(volleyrequest);
} 
```

得到时间后。我无法用于我的目的..（我的目的）我有每个产品的结束时间，我必须将我的当前时间与产品结束时间进行比较。如果它有效，它可以添加到购物车中，否则没有。

# jquery - 如何在文档中使用 jquery 'replaceWith' 两次？

> ID：13064751
> 
> 赞同：0
> 
> 时间：2012-10-25T08:40:01.763
> 
> 标签：jquery, replacewith

我试图在单击时激活 jQuery 'replaceWith' 功能以将 div1 替换为 div2，然后再次使用 'replaceWith' 在单击时将 div2 替换为 div1。

一切正常，除了单击 div2 时，div1 不会重新出现。

我的代码是：

```
$(document).ready(function(){
$("#open_doors").click(function(){
$("#leftdoor_inner").animate({"left": "-=164px"}, 'slow');
$("#leftdoor_outer").animate({"left": "-=74px"},'slow');
$("#rightdoor_inner").animate({"left": "+=164px"},'slow');
$("#rightdoor_outer").animate({"left": "+=74px"},'slow');
$("#open_doors").replaceWith($("#close_doors"));
});
$("#close_doors").click(function(){
$("#leftdoor_inner").animate({"left": "+=164px"},'slow');
$("#leftdoor_outer").animate({"left": "+=74px"},'slow');
$("#rightdoor_inner").animate({"left": "-=164px"},'slow');
$("#rightdoor_outer").animate({"left": "-=74px"},'slow');
$("#close_doors").replaceWith($("#open_doors"));
});
});​ 
```

几乎可以工作的jsfiddle在这里：

[http://jsfiddle.net/9zsdN/2/](http://jsfiddle.net/9zsdN/2/)

我很确定我的问题已在下面的链接中得到解答，但我不知道如何将其应用于我的确切代码。

[replaceWith 后未注册的事件](https://stackoverflow.com/questions/770308/events-not-registering-after-replacewith)

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:53:39.843

而不是 replaceWith 你可以只使用[show()](http://api.jquery.com/show/)和[hide()](http://api.jquery.com/hide/)

```
 $(document).ready(function(){
      $("#open_doors").click(function(){
        $("#leftdoor_inner").animate({"left": "-=164px"}, 'slow');
        $("#leftdoor_outer").animate({"left": "-=74px"},'slow');
        $("#rightdoor_inner").animate({"left": "+=164px"},'slow');
        $("#rightdoor_outer").animate({"left": "+=74px"},'slow');
        $("#open_doors").hide();
        $("#close_doors").show();
      });
     $("#close_doors").click(function(){
         $("#leftdoor_inner").animate({"left": "+=164px"},'slow');
         $("#leftdoor_outer").animate({"left": "+=74px"},'slow');
         $("#rightdoor_inner").animate({"left": "-=164px"},'slow');
         $("#rightdoor_outer").animate({"left": "-=74px"},'slow');
         $("#close_doors").hide();
         $("#open_doors").show();
     });
   }); 
```

[演示](http://jsfiddle.net/9zsdN/3/)

# jquery - JQuery：无法在 post() 方法中重新启用 preventDefault()

> ID：13064752
> 
> 赞同：0
> 
> 时间：2012-10-25T08:40:07.910
> 
> 标签：jquery, preventdefault

我已阅读此[线程](https://stackoverflow.com/questions/1164132/how-to-reenable-event-preventdefault)以在提交方法上重新启用 preventDefault()。但这对我的情况不起作用。我尝试使用 `$(this).unbind('submit').submit()`它再次启用它。我把它放在 POST 方法中，在打开 JQuery Colorbox 对话框之前。在该对话框中，还有一个提交按钮，但也无法单击该按钮。所以我必须重新启用preventDefault()，这样才能点击按钮。

```
$("#Username, #Password").keypress(function(e){
    if (e.which == 13 ) {
        $("form:first").submit(function(e){ 
            e.preventDefault(); //interrupt submit process
            var userdata = {username : $("#Username").val() };
                $.ajax({
                  type: 'POST',
                  url: 'http://localhost/test/test.php',
                  data: userdata,
                  success: function(data){  
                          if(data==0){                                      
                                $(this).unbind('submit').submit(); //enable it again(but it didn't worked!)
                                $.fn.colorbox({width:"50%", inline:true, href:"#reminder_dialog" })} //JQuery Colorbox opened.
                            else { 
                                $(this).submit();                               
                            }
                        },              
                  async:false
            });
        });
    }               
 }); 
```

我也已经尝试过使用`$(this).trigger('submit')`and `$(this).get(0).allowDefault = true`，但那些也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:02:26.750

我会把我的钱放在 e 代表按键事件，然后成为提交事件的事实上。

我真的只是在头顶上说这句话，而且夜晚很长，但是尝试将提交的参数 e 更改为其他内容（如 ev）并在 ev 上调用 preventDedault，如下所示：

```
....
$("form:first").submit(function(ev){ 
ev.preventDefault(); //interrupt submit process
.... 
```

或者你可以使用 return false; 在提交功能结束时。请参阅：[event.preventDefault() 与 return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:05:56.533

那么，要保护表单表单重复提交吗？您只需绑定一次提交事件。

```
$("form:first").submit(function(e) {
    e.preventDefault(); //interrupt submit process

    var $this = $(this); // Form jQuery object

    if ($this.data('busy')) return; // Protect this form from double submitting

    $this.data('busy', true); // Set the form as busy (we are sending something now)

    var userdata = {
          username: $("#Username").val()
        };

$.ajax({
    type: 'POST',
    url: 'http://localhost/test/test.php',
    data: userdata,
    success: function(data) {

        $this.data('busy', false); // Form is not busy anymore

        if (data == 0) {
            // Do your stuff. I don't understand what do you need here.
        } else {
                      // Do your stuff. I don't understand what do you need here.
        }
    },
    async:false
});
}); 
```

而且，如果您使用`<input>`字段，则不必为此编写任何代码，当您按 ENTER 时，它们将提交表单。但以防万一：

```
$("#Username, #Password").keypress(function(e) {
    if (e.which == 13) {
        $("form:first").submit();
    }
}); 
```

**UPDATE** 好吧，那么你必须存储表单提交状态。

```
$("form:first").submit(function(e) {
    e.preventDefault(); //interrupt submit process

    var $this = $(this); // Form jQuery object

    var state = $this.data('state');

    if (state == 'busy') {
        return;
    } else if (state != 'colorbox') {
        // Set the state that we are showing colorbox
        $this.data('state', 'colorbox');

        // Show your colorbox or whatever
        // ...

        return;
    }

    $this.data('state', 'busy');

    // Submit with that AJAX code
    // ...
}); 
```

您可以像这样从任何地方设置提交状态：

```
$("form:first").data('state', 'chilling'); 
```

您可以从任何地方提交表单，如下所示：

```
$("form:first").submit(); 
```

# php - 如何使用 iMacros 和 PHP 提取下拉列表的所有 COMBO 值

> ID：13064753
> 
> 赞同：0
> 
> 时间：2012-10-25T08:40:17.327
> 
> 标签：php, imacros

我需要从表单中提取定价数据。该表单包含几个`dropdown`选项。必须提取所有选项组合。

**表单下拉列表示例：**

```
size => 1, 2, 3, 4, 5
type => 1, 2, 3, 4
color => 1, 2, 3
units => 1, 2, 3, 4, 5, 6, 7 
```

所以这个特定的产品有 420 种可能的配置 `size * type * color * units`

如何编写某种循环来获得所有可能的组合？

```
TAG POS=1 TYPE=SELECT FORM=ACTION:/food/getPrice.do ATTR=NAME:size CONTENT=#1 
```

顺便说一句`imacros`，如上例所示，尝试使用来选择一个选项`index`不起作用。我被迫通过指定值来选择（例如`%1`：）

我也尝试`SET !DATASOURCE`并导入了一个`CSV`文件，但它没有按照我的需要循环。

-- 澄清一下 -- 我需要这种输出（不必按此顺序，但必须输出所有可能的组合）：

```
size => 1 type => 1 color => 1 units => 1
size => 1 type => 2 color => 1 units => 1
size => 1 type => 2 color => 2 units => 1
size => 1 type => 2 color => 2 units => 2
size => 1 type => 2 color => 2 units => 2
size => 1 type => 3 color => 1 units => 1
   . . . 
```

--旁注--如果您知道我如何`imacro`从共享服务器（或`EC2`）运行它，请告知。谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:36:44.647

您正在寻找笛卡尔积，这里在 PHP：[PHP 2D 数组输出所有组合中进行了描述](https://stackoverflow.com/questions/2516599/php-2d-array-output-all-combinations)

# ruby-on-rails - 大虾 - 表格 - ascii 码 - Pdf 生成

> ID：13064759
> 
> 赞同：1
> 
> 时间：2012-10-25T08:40:44.237
> 
> 标签：ruby-on-rails, pdf, prawn

我正在使用虾生成pdf。
在我的一张表中，我想通过 html 代码 (ascii) -> [☒ 或 ☐] 插入一个复选标记。我尝试使用 HTMLEntities gem，但在视图中不起作用，只是在 IRB 上。还有 html_safe 。在 pdf 上，只有一个“_”字符（下划线）。
我在 utf-8 中。
任何想法为什么？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:26:49.557

这是因为您的字体不包含这些字形。使用这样的字体：

```
require 'prawn'
Prawn::Document.generate('checkmarks.pdf') do |pdf| 
  pdf.font("/Library/Fonts/Arial Unicode.ttf") # adjust font path
  pdf.text("☒ ☐")
end 
```

# c# - Not able to hit a specific Get method ...Error 404 Not Found

> ID：13064767
> 
> 赞同：0
> 
> 时间：2012-10-25T08:41:08.273
> 
> 标签：c#, asp.net-web-api

```
[HttpGet]
    [ActionName("all")]
    public HttpResponseMessage GetAllCompetitions()
    {
        return Request.CreateResponse(HttpStatusCode.OK, Repository.FindAll());
    }

    [HttpGet]
    [ActionName("GetCompetition")]
    public HttpResponseMessage GetCompetitionById(long id)
    {
        Competition competition = Repository.FindById(id);
        if (competition == null)
        {
            return Request.CreateResponse(HttpStatusCode.NotFound);
        }
        return Request.CreateResponse(HttpStatusCode.OK, competition);
    }

    [HttpGet]
    [ActionName("format")]
    public HttpResponseMessage format(string postedFormat)
    {
        CompetitionMediaFormat format = (CompetitionMediaFormat)Enum.Parse(typeof(CompetitionMediaFormat), postedFormat, true);

        return Request.CreateResponse(HttpStatusCode.OK, Repository.FindByFormat(format));
    } 
```

I am able to hit the first two get methods but when i hit "format" method am getting a 404 Not found error

**Client App call**

var response = await client.GetAsync("api/Competition/format/music");

**Route Config**

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

Please let me know where am going wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:44:45.640

It is because of the name of the parameter 'postedFormat', it will not match with your route paramter name 'id'. Try adding a route that specifies postedFormat as the last parameter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:28:42.850

A quick fix would be as @Justin Harvey, suggested. i.e to make you method

from this

```
public HttpResponseMessage format(string postedFormat)
{...} 
```

to

```
public HttpResponseMessage format(string id)
{...} 
```

this is because the default route : `routeTemplate: "api/{controller}/{action}/{id}",` accepts an `id`.

You can change your route to accept postedFormat as input parameter.

# java - 是否可以在 log4j.properties 中使用 unix env vars？

> ID：13064768
> 
> 赞同：0
> 
> 时间：2012-10-25T08:41:08.997
> 
> 标签：java, unix, log4j

> **可能重复：**
> [在 log4j xml 配置中使用系统环境变量](https://stackoverflow.com/questions/201188/using-system-environment-variables-in-log4j-xml-configuration)

需要使用环境变量配置日志记录附加程序（例如 log4j.appender.DBSGENAPPENDER.File 属性）？

谢谢。

# objective-c - UIButton 奇怪的行为

> ID：13064770
> 
> 赞同：0
> 
> 时间：2012-10-25T08:41:11.493
> 
> 标签：objective-c, ios, uibutton

我创建了一个按钮

```
uploadBtn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    uploadBtn.frame = CGRectMake(35, 340, 250, 40);
    [uploadBtn setTitle:@"Upload" forState:UIControlStateNormal];
    [uploadBtn addTarget:self action:@selector(callUpload) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:uploadBtn]; 
```

行动

```
-(void)callUpload
{
    UploadViewController *uploadObj = [[UploadViewController alloc]init];
    [self.navigationController pushViewController:uploadObj animated:YES];

} 
```

但是当我点击按钮时，没有触发任何事件。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:50:23.270

Btn 的方法应该包含它的发送者。

更新这一行。

```
[uploadBtn addTarget:self action:@selector(callUpload:) forControlEvents:UIControlEventTouchUpInside]; 
```

并调用方法，

```
-(void)callUpload : (id) sender
{
    UploadViewController *uploadObj = [[UploadViewController alloc]init];
    [self.navigationController pushViewController:uploadObj animated:YES];
} 
```

# powershell - 有没有简单的方法来检查 powershell 脚本的向后兼容性？

> ID：13064772
> 
> 赞同：7
> 
> 时间：2012-10-25T08:41:13.847
> 
> 标签：powershell, powershell-2.0, powershell-1.0

我已经编写了一个 powershell 脚本，它应该在版本 1 和版本 2 中都可以工作。

可以在一台机器上共存多个 powershell 版本吗？还是我应该在单独的机器上安装 powershell 版本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T09:12:55.240

嗯，答案是肯定的和否定的。

从技术上讲，在 PowerShell 2.0 系统上，您可以使用 PowerShell 1.0 版访问

> -版本 1

powershell.exe的参数

同样，在 PowerShell 3.0 系统上，您可以使用 PowerShell 版本 2.0 访问

> -版本 2

您不能将两者分别安装在同一台机器上。PowerShell 本身提供了一种转到早期版本的方法。

# jquery - 在 Jquery 的 xhrFields 中添加函数

> ID：13064775
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:41:18.980
> 
> 标签：jquery

是否可以在 xhrFields 中添加 if 条件：在 jquery - ajax 调用中？

前任：

```
xhrFields : { 
   if(flag =='Y'){
   withCredentials: true 
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:48:51.507

尝试：

```
xhrFields: {
    withCredentials: flag == 'Y'
} 
```

但是，如果你真的需要在`flag`!= 'Y' 时完全省略该选项，你可以这样做：

```
xhrFieldsObj = {
   /* You can put all the static options in here */
};
if (flag == 'Y') {
    xhrFieldsObj.withCredentials = true;
};
...
   xhrFields: xhrFieldsObj 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:49:31.840

```
var xhrFields = {};

if (flag == 'Y') {
    xhrFields.withCredentials = true;
} 
```

# salesforce - 销售人员中的正则表达式功能

> ID：13064781
> 
> 赞同：0
> 
> 时间：2012-10-25T08:41:35.430
> 
> 标签：salesforce

你们中的任何人都可以解释以下代码吗？例如，为什么使用 D,d？

```
NOT(REGEX(Phone, "\\D*?(\\d\\D*?){10}")) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:36:39.390

由于 Java 的字符串转义规则，使用双反斜杠。纯正则表达式意味着：

```
\D*?   # Match any number of non-digit characters (the "?" is useless here)
(      # Match...
 \d    # a single digit
 \D*?  # optionally followed by any number of non-digits (again, useless "?")
){10}  # Repeat the previous group 10 times. 
```

所以这个正则表达式匹配任何正好包含十位数字（加上任意数量的其他非数字字符）的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:55:49.047

如果您在[Salesforce](http://na7.salesforce.com/help/doc/en/fields_useful_field_validation_formulas.htm)中使用示例中的 REGEX ，它是没有用的。它匹配“this1234567890that”，其中“this”和“that”可以是任何值。我用： NOT( REGEX(Phone, "\([0-9]{3}\) [0-9]{3}-[0-9]{4}|\d{10}")) 来完成期望的行为。

我的版本翻译为：

```
\\(      # Match '('
[0-9]{3} # Match 3 digits
\\)      # Match ')' followed by a space 
[0-9]{3} # Match 3 digits
-        # Match hyphen
[0-9]{4} # Match 4 more digits
|\\d{10} # or match 10 digits instead of all the previous 
```

# django - Django 1.3.1 Heroku Postgres 错误

> ID：13064782
> 
> 赞同：1
> 
> 时间：2012-10-25T08:41:35.253
> 
> 标签：django, postgresql, heroku, django-settings

我们最近将我们的网站推到了暂存状态，并且从那以后一直在努力启动它，而 Heroku 的团队并没有真正及时做出响应，所以我正在求助于社区，看看是否有快速修复。

我们废弃了旧的并设置了一个新的堆栈，仍然存在相同的问题

```
heroku config
DISABLE_INJECTION: 1 
```

**设置.py**

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://localhost')}
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'mydb',
        'USER': 'myuser',
        'PASSWORD': 'mypassword',
        'PORT': '',
        'HOST': 'localhost'
    },
} 
```

这是完整的跟踪。

```
heroku run python myapp/manage.py syncdb

Traceback (most recent call last):
  File "fundedbyme/manage.py", line 11, in <module>
    execute_manager(settings)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/south/management/commands/syncdb.py", line 90, in handle_noargs
    syncdb.Command().execute(**options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 56, in handle_noargs
    cursor = connection.cursor()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/__init__.py", line 252, in cursor
    cursor = util.CursorWrapper(self._cursor(), self)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 140, in _cursor
    self.connection = Database.connect(**conn_params)
  File "/app/.heroku/venv/lib/python2.7/site-packages/psycopg2/__init__.py", line 179, in connect
    connection_factory=connection_factory, async=async)
psycopg2.OperationalError: could not connect to server: Connection refused
    Is the server running on host "localhost" and accepting
    TCP/IP connections on port 5432? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:30:40.970

```
DATABASES = {
    'default': dj_database_url.config(default=os.environ.get('DATABASE_URL'))
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:22:42.833

确保你的 Heroku 上有 Postgres：

```
heroku addons:add heroku-postgresql:dev 
```

找出数据库 url 环境变量。它看起来像这样：HEROKU_POSTGRESQL__URL

```
heroku config | grep POSTGRESQL 
```

更新您的设置

```
import dj_database_url
import os 

POSTGRES_URL = "HEROKU_POSTGRESQL_<COLOR>_URL"
DATABASES = {'default': dj_database_url.config(default=os.environ[POSTGRES_URL])} 
```

鲍勃是你的叔叔。

我在 heroku 上为 django 准备了一个方便的引导程序。这可能会有所帮助：[https ://github.com/callmephilip/django-heroku-bootstrap](https://github.com/callmephilip/django-heroku-bootstrap)

愉快的部署

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:27:13.767

尝试这个：

```
import dj_database_url
DATABASES = {'default': dj_database_url.config(default='postgres://myuser:mypassword@localhost:5432/mydb')} 
```

# matlab - 从一个数组中获取最大值并在另一个数组中找到它的位置

> ID：13064788
> 
> 赞同：3
> 
> 时间：2012-10-25T08:42:07.967
> 
> 标签：matlab, max

我是 Matlab 的新手，但我真的需要学习它。希望对我的研究非常有用。现在我面临以下问题。

我有两个图像（名为 A 和 B）。两者都有 7 层在同一维度 (4169,6289,7)。首先，我想在 A 图像中找到具有最大值的图层，然后在 B 图像中查找相应的值。例如：如果 A 图像中的第五层有最大值，我需要 B 图像中的第五层的值。我刚刚编写了这段代码 c=max(a,[],3) 来查找 A 图像中具有最大值的层，但不知道如何设置以获得 B 图像中的相应值。你能帮我吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:47:46.313

您不需要最大值的值，您需要第二个参数，即索引。

```
 [~,indexOfMax] = max(a,[],3); %#Get index of maximal element
 [g1,g2] = ndgrid( 1:size(a,1),1:size(a,2) );  %#Create all possible rows,cols
 linearIndex = sub2ind(size(a), g1(:),g2(:),index(:))  %#Linearize the index of the maximal elements
 value = b(linearIndex); %# Collect the maximal values from b 
```

@RodyOldenhuis 关于内存消耗是正确的。这是一种更节省内存的 for 循环方法：（可能会或可能不会运行得更快，请自行检查）。

```
 vals = zeros(size(a(:,:,1)));
 [~,indexOfMax] = max(a,[],3);
 for i=1:size(a,1)
    for j=1:size(a,2)
        vals(i,j) = b(i,j, indexOfMax(i,j));
    end 
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:33:17.613

这是另一种看法，它的内存效率更高：

```
% get the indices in 3rd dimension for the max values
[~,I] = max(imgA,[],3)

% Collect all values through double loop
Bvals = arrayfun(@(y) ...
    arrayfun(@(x) imgB(x,y, I(x,y)), 1:size(imgA,1)), ...
    1:size(imgA,2), 'UniformOutput',false);

% reshape them so they correspond to the images' size again
Bvals = reshape([Bvals{:}], size(I)) 
```

# python - numpy.where() 子句错误

> ID：13064795
> 
> 赞同：0
> 
> 时间：2012-10-25T08:42:39.447
> 
> 标签：python, arrays, numpy

简而言之......这是问题所在：

```
import numpy as np
a = np.array([ 0, 1, 2, 3, 4, 5, 6, 100, 8, 9])
np.where(a==100, -1, a[a]) 
```

我期望得到的是： `0, 1, 2, 3, 4, 5, 6, -1, 8, 9` 相反，我得到的是：`index 100 out of bounds 0<=index<10`

我承认索引无效，但不应该 eval a[100] 而是 -1 ......据我了解 numpy.where() 命令结构。

在这个例子中我做错了什么？

只是为了澄清我在这里实际尝试做的是更详细的代码：它是一个查找表数组重新映射过程：

```
import numpy as np

# gamma-ed look-up table array
lut = np.power(np.linspace(0, 1, 32), 1/2.44)*255.0

def gamma(x):
    ln = (len(lut)-1)
    idx = np.uint8(x*ln)
    frac = x*ln - idx
    return np.where( frac == 0.0,
                    lut[idx],
                    lut[idx]+(lut[idx+1]-lut[idx])*frac)

# some linear values array to remap
lin = np.linspace(0, 1, 64)

# final look-up remap
gamma_lin = gamma(lin) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:33:18.147

作为函数参数的表达式在传递给函数之前会被评估（[文档链接](http://docs.python.org/reference/expressions.html#calls)）。`a[a]`因此，即使在`np.where`调用之前，您也会从表达式中得到索引错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:48:56.340

使用以下内容：

```
np.where(a==100, -1, a) 
```

如[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)所述：

```
numpy.where(condition[, x, y])

Return elements, either from x or y, depending on condition.
If only condition is given, return condition.nonzero(). 
```

这里，`a==100`是您的条件，`-1`满足条件时应采用的值 ( `True`)，`a`是要依赖的值。

* * *

你得到一个 IndexError 的原因是你的`a[a]`：你自己索引数组`a`，这相当于`a[[0,1,2,3,4,5,6,100,8,9]]`: 失败，因为`a`有少于 100 个元素......

* * *

另一种方法是：

```
a_copy = a.copy()
a_copy[a==100] = -1 
```

（如果你想就地改变它，请替换`a_copy`为）`a`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T08:56:49.347

当您编写时，`a[a]`您尝试获取索引 0,1,2...100...，`a`这就是为什么您得到索引超出范围错误的原因。你应该改为写`np.where(a==100, -1, a)`- 我认为这会产生你正在寻找的结果。

# jquery - jquery-ui自动完成选择回调功能无法正常工作

> ID：13064797
> 
> 赞同：0
> 
> 时间：2012-10-25T08:42:42.650
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui, jquery-ui-autocomplete

我正在使用 jquery-ui 自动完成并在自动完成函数中进行 ajax 调用我正在调用返回 Json 的控制器操作，每件事都工作正常但是当我从建议下拉列表中选择一些东西时，然后`select`调用回调函数并在`select`回调函数`ui`中是不明确的 。

**Javascript**

```
 function log(message) {
            $("<div>").text(message).prependTo("#log");
            $("#log").scrollTop(0);
        }

        $("#search").autocomplete({
            source: function (request, response) {
                $.ajax({
                    url: "/Home/GetCompanyNames",
                    dataType: "jsonp",
                    data: "searchterm=" + request.term,
                    success: function (data) {
                        response($.map(data, function (item) {
                            alert(item.Value);
                            return {
                                label: item.Name,
                                value: item.Name
                            };
                        }));
                    }
                });
            },
            minLength: 2,
            select: function (event, ui) {
                alert(ui.item.Name);
            alert(ui.item.Value);
            alert(ui.item.LogoUrl);
            },
            open: function () {
                $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
            },
            close: function () {
                $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
            }
        });

    }); 
```

**控制器中的操作：**

```
 public JsonResult GetCompanyNames (string searchterm)
    {
        var companies = context.companyService.Query().Where(x => x.Name.Contains(searchterm)).ToList();
        var list = companies.Select(item => new SearchJsonModel
                                                {
                                                    LogoUrl = item.Logo != null || item.Logo != "" ? "<img  src='/Upload/" + item.Logo + "' />" : "<img src='/home/image?image=" + item.Name + "' />", Name = item.Name, Value = item.InternetName
                                                }).Select(model => (model)).ToList();
        return Json(list, JsonRequestBehavior.AllowGet);
    } 
```

**SearchJsonModel :**

```
 public class SearchJsonModel
{
    public string Name { get; set; }
    public string Value { get; set; }
    public string LogoUrl { get; set; }
} 
```

如果您需要更多详细信息，请询问我，并提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:52:05.153

要获取名称、值、LogoUrl，请在响应中设置这些内容，如下所示：

```
response($.map(data, function (item) {
                        alert(item.Value);
                        return {
                            label: item.Name,
                            value: item.Name
                            LogoUrl: item.LogoUrl,
                            Name: item.Name 
                        }; 
```

# wcf-data-services - 如何指定从 WCF 数据服务返回的 OData 版本

> ID：13064799
> 
> 赞同：0
> 
> 时间：2012-10-25T08:42:47.687
> 
> 标签：wcf-data-services, odata

是否可以指定从我的 WCF 数据服务返回的 DataServiceVersion？现在即使我通过使用指定 V2

```
config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2; 
```

对服务的调用仍然返回 DataServiceVersion: 1.0;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:36:10.407

服务器将返回给定响应的最低版本。因此，如果响应仅包含 V1 特征，那么它将是 V1。

客户端可以通过发送 MinDataServiceVersion 标头来覆盖它，在这种情况下，服务器将发送至少那么高的版本响应。不过，这仅在 WCF DS 5.0 及更高版本中实现。

# c# - 使用超出范围的子字符串拆分字符串

> ID：13064800
> 
> 赞同：2
> 
> 时间：2012-10-25T08:42:51.137
> 
> 标签：c#, string, substring

我有一条消息说 287 个字符长。我需要在 160 个字符后将其分成两部分，但我的代码仍然无法正常工作。我用谷歌搜索了很多，尝试了很多不同的解决方案，但没有什么能像我预期的那样工作。在我看来，这是一个简单的解决方案，但实际上它让我做噩梦！

```
// a check is done to ensure the message is > 160 in length.    
string _message;
_message = "this is my long message which needs to be split in to two string after 160 characters. This is a long message. This is a long message. This is a long message. This is a long message. This is a long message.";

string message1 = _message.Substring(0,160);
string message2 = _message.Substring(161,_message.Length); 
```

上面的内容根本不起作用 - 在第二个子字符串上给我一个异常错误。

任何人都可以帮忙吗？消息永远不会超过 320 个字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T08:45:36.347

[`String.Substring`](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)确实从第一个参数开始，并且具有第二个参数的长度。您已`message.Length`作为第二个参数传递，这是行不通的。

您可以仅使用一个参数（从头到尾）使用[重载：](http://msdn.microsoft.com/en-us/library/hxthx5h6.aspx)

```
string firstPart = _message.Substring(0,160);
string rest = _message.Substring(160); 
```

`ArgumentOutOfRangeException` 如果 startIndex 小于零或大于字符串的长度，则抛出一个。

演示：http: [//ideone.com/ZN2BlM](http://ideone.com/ZN2BlM)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T08:45:24.110

对于第二行，只需使用

```
string message2 = _message.Substring(160); 
```

如果你的字符串可能少于 160 个字符，你应该检查一下。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T08:44:28.717

```
string message1 = _message.Substring(0,160);
string message2 = _message.Substring(160,_message.Length - 160); 
```

有关使用两个参数子字符串的信息，请参阅[此](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T08:46:21.490

[String.Substring 函数](http://msdn.microsoft.com/en-us/library/hxthx5h6%28v=vs.100%29.aspx)有一个重载，它不带长度参数，而只是转到字符串的末尾。您可以通过这种方式简化代码：

```
string message1 = _message.Substring(0,160);
string message2 = _message.Substring(160); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T08:49:50.027

Substring 方法的第二个参数接收要从_message 中获取的数字或字符。而是这样做：

`string message1 = _message.Substring(0,160);
string message2 = _message.Substring(160,_message.Length-160);`

[C#中的子字符串方法](http://msdn.microsoft.com/es-es/library/aka44szs%28v=vs.80%29.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T08:52:59.340

根据[http://msdn.microsoft.com/en-us/library/aa904308(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa904308(v=vs.71).aspx)，该函数具有以下足迹： substring (int start) 或 substring(int start, int length)

意思是你调用它的方式：从位置 160 开始复制，并继续字符串的总长度。因此，如果您的字符串长度为 287 个字符，那么您就是在使用

> 字符串 message2 = _message.Substring(161,_message.Length);

从位置 161 开始复制，然后继续复制以下 287 个字符。在这种情况下，字符串必须是 161 + 287 个字符，这是导致错误的原因。

你应该使用：

> 字符串_消息；
> _message = "这是我的长消息，需要在160个字符后分成两个字符串。这是一条长消息。这是一条长消息。这是一条长消息。这是一条长消息。这是一条长消息."; 字符串 message1 = _message.Substring(0,160);
> 字符串 message2 = _message.Substring(message1.Length, _message.Length - message1.Length);

这将导致消息的长度为 287 - 160 = 127 。

# ios - 如何使用 iAd 显示和隐藏广告

> ID：13064803
> 
> 赞同：0
> 
> 时间：2012-10-25T08:43:01.043
> 
> 标签：ios, iad

我想在我的应用程序中使用 iAD。如何在免费广告中显示广告并将其隐藏在付费广告中，即显示完整视图应用程序。这是使用一些广告空间的代码

```
adBannerView = [[ADBannerView alloc] initWithFrame:CGRectZero];
CGRect bannerFrame = self.adBannerView.frame;
bannerFrame.origin.y = self.view.frame.size.height;
self.adBannerView.frame = bannerFrame; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:07:18.747

您可以为此目的使用[NSUserDefaults 。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)对于购买的应用程序，为 NSUserDefaults 添加一个值，例如：

```
[[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:@"Purchased"]; 
```

在显示 iAd 之前，请检查以下值：

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"Purchased"])
{
   //Dont display iAd
}
else
{
   //display the iAd
} 
```

# c# - 默认模型绑定器使用错误的cultureinfo

> ID：13064804
> 
> 赞同：1
> 
> 时间：2012-10-25T08:43:04.547
> 
> 标签：c#, asp.net-mvc, model-binding, cultureinfo

我有多语言网站，每种语言都使用自己的文化信息。我尝试使用 ActionFilterAttribute 设置 culterinfo，但它在模型绑定后被触发。我也尝试了全局 asax BeginRequest，但 RouteData 尚不可用。

那么应该在哪里将 CurrentUICulture 设置为 modelbinder 也会使用所需的cultureinfo？

最大限度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:21:59.370

You can find what you can/need to override from this great article: [An Introduction to ASP.NET MVC Extensibility](http://www.simple-talk.com/content/article.aspx?article=1358)

You could write a custom MvcRouteHandler:

```
public class LangRouteHandler : MvcRouteHandler
{
    protected override IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        if (requestContext.RouteData.Values.ContainsKey("lang"))
        {
            var culture = new CultureInfo(requestContext.RouteData.Values["lang"].ToString());
            if (culture != null)
            {
                Thread.CurrentThread.CurrentUICulture = culture;
                Thread.CurrentThread.CurrentCulture = culture;
            }
        }

        return base.GetHttpHandler(requestContext);
    }
} 
```

And use this routehandler in your route like this:

```
routes.MapRoute(
   name: "Default",
   url: "{controller}/{lang}/{action}/{id}",
   defaults: new { controller = "Home", lang = "en", action = "Index", id = UrlParameter.Optional }
).RouteHandler = new LangRouteHandler(); 
```

# assembly - 测试点 %eax %eax

> ID：13064809
> 
> 赞同：188
> 
> 时间：2012-10-25T08:43:26.547
> 
> 标签：assembly, x86, att

> **可能重复：**
> [x86 程序集 - 针对 eax 的“testl”eax？](https://stackoverflow.com/questions/147173/x86-assembly-testl-eax-against-eax)

我对汇编语言编程非常陌生，我目前正在尝试读取从二进制文件生成的汇编语言。我跑过

```
 test   %eax,%eax 
```

或者`test %rdi, %rdi`，等等等等。我很困惑这是做什么的。价值观不`%eax, %eax`一样吗？它在测试什么？我在某处读到它正在执行`AND`操作.....但由于它们的值相同，它不会只是返回`%eax`吗？

以下只是我发现这种用法的一个实例：

```
 400e6e:       85 c0                   test   %eax,%eax
   400e70:       74 05                   je     400e77 <phase_1+0x23> 
```

我认为`je`如果被比较的两个值相等就会跳转......好吧，因为 `%eax`很好，它本身，在什么情况下我们不会跳转？

我是一般编程的初学者，所以如果有人可以向我解释这一点，我将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-10-25T08:53:58.903

`CMP`减去操作数并设置标志。即，如果差为零（操作数相等），则设置零标志。

`TEST``ZF`当 AND 运算的结果为零时，设置零标志。如果两个操作数相等，则当两者都为零时，它们的按位与为零。当在结果中设置最高有效位时，`TEST`还设置符号标志 ，当设置的位数为偶数时，还设置奇偶校验标志 。`SF``PF`

`JE`[Jump if Equals] 测试零标志，如果设置了标志则跳转。`JE`是`JZ`[Jump if Zero] 的别名，因此反汇编程序无法根据操作码选择一个。`JE`之所以这样命名，是因为如果参数`CMP`相等，则设置零标志。

所以，

```
TEST %eax, %eax
JE   400e77 <phase_1+0x23> 
```

`%eax`如果为零，则跳转。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-10-25T09:02:49.530

一些 x86 指令旨在保持操作数（寄存器）的内容不变，而只是设置/取消设置特定的内部 CPU 标志，如零标志 (ZF)。您可以将 ZF 视为驻留在 CPU 内部的真/假布尔标志。

在这种特殊情况下，TEST 指令执行按位逻辑与，丢弃实际结果并根据逻辑结果设置/取消设置 ZF：如果结果为零，则设置 ZF = 1，否则设置 ZF = 0。

像 JE 这样的条件跳转指令旨在查看 ZF 的跳转/不跳转，因此同时使用 TEST 和 JE 等效于根据特定寄存器的值执行条件跳转：

示例：

```
TEST EAX,EAX
JE some_address 
```

当且仅当 ZF = 1 时，CPU 才会跳转到“some_address”，换句话说，当且仅当 AND(EAX,EAX) = 0 时，当且仅当 EAX == 0 时，它才会发生

，等效的 C 代码是：

```
if(eax == 0)
{
    goto some_address
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-10-25T08:53:39.937

这会检查是否`EAX`为零。该指令在参数之间`test`按位`AND`执行，如果`EAX`包含零，则结果设置 ZF 或 ZeroFlag。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-25T08:59:26.763

`test`是非破坏性的`and`，它不会返回操作的结果，但会相应地设置标志寄存器。要了解它真正测试的内容，您需要查看以下说明。通常 out 用于检查寄存器是否为 0，可能与`jz`条件跳转结合使用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-25T08:54:03.953

你是对的，`test`“and”是两个操作数。但是结果被丢弃了，唯一留下来的，也是最重要的部分，就是旗帜。`test`它们已设置，这就是使用（和存在）指令的原因。

`JE`相等时不跳转（它在之前的指令是比较时具有含义），它的真正作用`ZF`是在设置标志时跳转。并且由于它是由 设置的标志之一，因此`test`该指令序列（test x,x; je...）具有当 x 为 0 时跳转的含义。

对于这样的问题（以及更多详细信息），我可以推荐一本关于 x86 指令的书，例如，即使它真的很大，英特尔文档也非常好和精确。

# cordova - jquery-mobile 滑动菜单解决方案

> ID：13064816
> 
> 赞同：11
> 
> 时间：2012-10-25T08:43:41.777
> 
> 标签：cordova, jquery-mobile

嗨，我正在尝试使用 jquery mobile 构建 phonegap 应用程序。我想在 facebook 应用程序中的菜单中创建一个幻灯片。

我搜索了很多，但所有的插件或解决方案都是旧的，有些甚至在演示中不起作用。任何建议如何做到这一点？这个想法是在jquery移动页面的标题左侧应该有一个按钮，当按下它时，它会从左侧在菜单中滑动，同时将页面推到右侧。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T08:50:13.083

你有没有试过这个：

[Facebook 风格的滑出式菜单](http://blog.aldomatic.com/facebook-style-slide-out-menu-in-jquery-mobile/)

此外，JQM 弹出窗口可以像滑出菜单一样使用：

[Jquery Mobile 弹出侧边菜单](http://jquerymobile.com/test/docs/pages/popup/popup-panels.html)

两者都应该几乎可以满足您的需求。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-13T14:45:23.167

我最近需要做同样的事情。这是我用于一个简单示例的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Computer World</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
    <style>
        /*this block should go in the styles.css file*/
        .ui-panel-inner {
            padding:0px; /*make the buttons flush edge to edge*/
        }
        .ui-controlgroup {
            margin:0; /*make the buttons flush to the top*/
        }
        #header {
            height:54px;
        }
        #bars-button {
            margin:7px;
        }
    </style>
</head>
<body>

<div data-role="page" id="home" data-theme="b">

    <div data-role="panel" id="navpanel" data-theme="a"
         data-display="overlay" data-position="right">
        <div data-role="controlgroup" data-corners="false">
            <a href="#" data-role="button">Business</a>
            <a href="#" data-role="button">Numbers</a>
            <a href="#" data-role="button">Money</a>
            <a href="#" data-role="button">People</a>
        </div>
    </div>

    <div id="header" data-role="header" data-theme="b">
        <a id="bars-button" data-icon="bars"  class="ui-btn-right" style="margin-top:10px;" href="#navpanel">Menu</a>
    </div>
</div>
</body>
</html> 
```

有关更多详细信息，请参阅博客文章：[http ://www.objectpartners.com/2013/05/13/adding-a-sliding-menu-to-your-jquery-mobile-app/](http://www.objectpartners.com/2013/05/13/adding-a-sliding-menu-to-your-jquery-mobile-app/)

这是一个演示：http: [//jsfiddle.net/nateflink/NWHjB/](http://jsfiddle.net/nateflink/NWHjB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T15:05:42.310

使用 jQuery 面板...包含在 jQuery 中。

[http://jquerymobile.com/demos/1.3.0-beta.1/docs/panels/index.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/panels/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-18T05:15:33.150

我认为您正在寻找的是快速简便的方法。如果我是对的，您应该使用[这个 jquery 移动演示](http://demos.jquerymobile.com/1.3.0-beta.1/docs/panels/) ，它解释了定位和您可能需要的所有其他内容，如果您希望它完美，只需将该演示与[这个演示相结合](http://demos.jquerymobile.com/1.3.2/examples/panels/panel-swipe-open.html)

第二个解释了如何使用滑动来设置侧滑块。

我将它们都用于我的phonegap应用程序希望你也这样做。

# svg - 你如何使用 TypeScript 的 SVG 库？

> ID：13064818
> 
> 赞同：0
> 
> 时间：2012-10-25T08:43:44.633
> 
> 标签：svg, typescript

我是 TypeScript 和 JavaScript 的新手，虽然对编程并不完全陌生。我想知道是否有人可以帮助我编写一小段 TypeScript 代码，展示如何使用 TypeScripts SVG 库进行绘制。那么，例如，我应该使用 SVGRectangle 还是 SVGRectangleElement 以及如何使用它们？

我可以在 TypeScript 网站上找到的唯一示例使用 D3，但我想使用内置的 SVG 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T08:52:39.137

澄清一下，TypeScript 没有 SVG 库 - 但您可以在 TypeScript 代码中使用原生 JavaScript SVG 或 SVG 库之一。

这会打开您将找到的示例和教程，因为您可以搜索“JavaScript SVG”而不是“TypeScript”SVG。

我推荐[MDN SVG Reference](https://developer.mozilla.org/en-US/docs/SVG)作为起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T23:36:56.123

您可以使用现有 JavaScript SVG 库的 TypeScript 定义文件，例如[Raphael](https://github.com/borisyankov/DefinitelyTyped/tree/master/raphael)或[svgjs](https://github.com/borisyankov/DefinitelyTyped/tree/master/svgjs)。

# iphone - 使用 NSDate 在模拟器上工作但不在设备中的剩余时间计算

> ID：13064828
> 
> 赞同：0
> 
> 时间：2012-10-25T08:44:17.607
> 
> 标签：iphone, objective-c, xcode, ipad, ios6

我正在使用下面的代码来计算该代码在模拟器上运行良好的剩余时间，但它在 iPad 设备上为一天的小时分钟和秒提供了所有零值

```
`NSTimeInterval remainingSec = [databaseDate timeIntervalSinceNow];
    if (!timer || remainingSec <= 0) {
        [timer invalidate];
        timer = nil;
        // getting time from database

NSLocale *indianEnglishLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_IN"];
    NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"Asia/Kolkata"];
    NSDateFormatter *dateFrmattr = [[NSDateFormatter alloc] init];
    [dateFrmattr setLocale:indianEnglishLocale];
    [dateFrmattr setDateFormat:@"V"];
    [dateFrmattr setTimeZone:timeZone];
    dateFrmattr.timeStyle = NSDateFormatterNoStyle;
    dateFrmattr.dateFormat = @"MM/dd/yyyy HH:mm:ss zzz";
    NSDate *finalDate = [dateFrmattr dateFromString:@"11/01/2012 10:00:00 IST"];

   // NSDate *startDate = [[NSDate alloc] init];

    self.databaseDate = [[NSDate alloc] init];;
    remainingSec = [finalDate timeIntervalSinceDate:databaseDate];
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self 
                                           selector:@selector(showClock)  
                                           userInfo:nil 
                                            repeats:YES];
}
//NSInteger remainder = ((NSInteger)remainingSec)% 3600;
NSInteger days = remainingSec/86400;
NSInteger int1 = ((NSInteger)remainingSec) % 86400;
NSInteger hours = int1/3600;
NSInteger int2 = int1 % 3600;
NSInteger minutes = int2/60;
NSInteger seconds = int2 % 60;

clockLabel.text = [NSString stringWithFormat:@"  %02d  :  %02d  :  %02d  :  %02d ", days,hours, minutes, seconds]; 
```

最终日期的值在设备上为零，但在模拟器上。

我的应用程序是通用应用程序，时间计算在 iPhone 设备上运行良好。任何想法或帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:56:38.337

从 NSDateFormatter 中删除“ **zzz ”和从日期字符串中删除“** **IST** ”后，它可以在 iPad 上运行。但是仍然有一个问题，为什么之前的代码在 iPhone 上运行而不是在 iPad 上运行？从 NSDateFormatter 和日期字符串中删除时区后，它可以工作。

# azure - NServiceBus 与 Azure 和 XML 序列化程序

> ID：13064831
> 
> 赞同：1
> 
> 时间：2012-10-25T08:44:32.867
> 
> 标签：azure, nservicebus

我正在尝试将 Azure 中的托管工作进程切换为使用 xml 序列化程序而不是默认的 json 序列化程序。我通过像这样实现 IWantCustomInitialization 来做到这一点：

```
public class BusInitialization : IWantCustomInitialization
{
    public void Init()
    {
        Configure.Instance.XmlSerializer();
    }
} 
```

但是，当我启动云解决方案时，出现以下错误：

> 启动端点时出现异常，已记录错误。原因：类型 NServiceBus.Unicast.Transport.CompletionMessage 未在序列化程序中注册。检查它是否出现在要扫描的已配置程序集/类型列表中。

当我不使用自定义初始化并转到 JsonSerializer 时，一切都很好。有没有人建议我去哪里？我使用 NSB 3.2.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:03:46.287

认为这是固定的，但我刚刚检查过，看起来在 3.2.8 中，jsonserializer 还不能轻易被覆盖。这已经在 dev 分支上修复了，但还没有发布，它将在下一个发布。

如果您等不及下一个版本，则可以通过将 AsA_Worker 替换为您自己的角色和角色处理程序来解决此问题，类似于：

3.2.8 版本[https://github.com/NServiceBus/NServiceBus/blob/master/src/azure/Hosting/NServiceBus.Hosting.Azure/Roles/Handlers/WorkerRoleHandler.cs](https://github.com/NServiceBus/NServiceBus/blob/master/src/azure/Hosting/NServiceBus.Hosting.Azure/Roles/Handlers/WorkerRoleHandler.cs)

开发版本[https://github.com/NServiceBus/NServiceBus/blob/develop/src/azure/Hosting/NServiceBus.Hosting.Azure/Roles/Handlers/WorkerRoleHandler.cs](https://github.com/NServiceBus/NServiceBus/blob/develop/src/azure/Hosting/NServiceBus.Hosting.Azure/Roles/Handlers/WorkerRoleHandler.cs)

亲切的问候，伊夫

# asp.net-mvc-3 - 无法引用 MVC 视图中的所有模型对象

> ID：13064843
> 
> 赞同：2
> 
> 时间：2012-10-25T08:45:02.480
> 
> 标签：asp.net-mvc-3, razor

我有一个奇怪的问题，即我的 vbhtml 文件中的模型将正确引用并显示模型的一项属性，而不是另一项。仅供参考，该页面作为部分页面添加，连接到另一个 vbhtml 页面。

我的页面结构使得我想在每个问题（问题文本）下方列出一些人（受益人）。

我使用以下语法引用我的模型类型：@ModelType RHEAL_START.QuestionWithAnswers，因此这应该会自动允许在实例化时声明模型项。

@ModelType 声明正确地允许引用第二个模型字段 (Model.benAnswers)，但不允许引用我声明的第一个模型字段 (Model.questionText)。

这两个项目都是同一模型的一部分，我尝试将声明移动到和标题的上方和下方，但这并没有为 Model.questionText 带来 IntelliSense。

我查看了以下帖子并尝试添加对布局文件的引用，但可惜，这也没有带来 IntelliSense。 [MVC3 - 呈现不是控制器中的方法的视图](https://stackoverflow.com/questions/12346274/mvc3-render-view-that-is-not-a-method-in-a-controller)

请参阅下面的代码。谁能建议我哪里出错了，我还能尝试什么？如果您需要更多信息，请告诉我。

```
@ModelType RHEAL_START.QuestionWithAnswers
@Code
    Layout = "~/Views/MedicalQuestions/MedicalQuestions.vbhtml"
End Code
    <div id="questionPanel">
        @Code 
            Dim qAndARef As Integer = 0
        End Code

            <!-- Show question text and number -->
            <h1><a href="#">Model.questionText</a></h1>

            <table>

                <tr>
                    <td style="font-weight: bold">
                        Beneficiary </td>
                    <td style="font-weight: bold">
                        Yes/No </td>
                    <td style="font-weight: bold">
                        Details </td>
                </tr>

                <!-- !!Iterating over each beneficiary for Medical Question -->

                @For Each benanswer As RHEAL_START.BeneficiaryAnswer In Model.benAnswers

                Html.Partial("../MedicalQuestions/BeneficiaryAnswerPartial", benanswer)

                Next
            </table>

        @*@Html.ValidationSummary()*@

    </div>

@Section Scripts
    @Scripts.Render("~/Scripts/RHEAL/YesNoDropDownValidation.js")
End Section 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:07:29.650

我对 Razor 的 VB 语法不太熟悉，但看起来你前面缺少一个 @ 符号`@Model.questionText`

# ruby-on-rails-3 - Rails 路由 - :on => :collection

> ID：13064844
> 
> 赞同：34
> 
> 时间：2012-10-25T08:45:09.530
> 
> 标签：ruby-on-rails-3, routing, rails-routing

[Rails 路由指南](http://guides.rubyonrails.org/routing.html)没有具体说明什么意思`:on => :collection`。

我找不到关于`:on`key 是什么的解释，也找不到`:collection`在这种情况下 a 是什么的解释。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-25T08:55:10.677

[收藏路线在此处](http://guides.rubyonrails.org/routing.html#adding-collection-routes)列出。

两者之间的区别在于`:on => :collection`它们`:on => :member`产生的路线样式及其相关的路线助手。

```
resources :posts do
  # on collection
  get 'search', on: :collection 
  # --> generates '/posts/search' and search_posts_path

  # on member
  get 'share', on: :member      
  # --> generates'/posts/:id/share' and share_photo_path(@post)
end 
```

# c - Malloc 与自定义分配器：Malloc 有很多开销。为什么？

> ID：13064850
> 
> 赞同：11
> 
> 时间：2012-10-25T08:45:38.890
> 
> 标签：c, memory, malloc

我有一个图像压缩应用程序，它现在有两个不同版本的内存分配系统。在最初的版本中，malloc 无处不在，而在第二个版本中，我实现了一个简单的池分配器，它只分配一块内存并将部分内存返回给 myalloc() 调用。

我们注意到使用 malloc 时内存开销巨大：在内存使用高峰期，malloc() 代码需要大约 170 兆字节的内存来处理 1920x1080x16bpp 的图像，而池分配器仅分配 48 兆字节，其中 47被程序使用。

在内存分配模式方面，程序为测试图像分配了大量的 8 字节（大多数）、32 字节（很多）和 1080 字节（一些）的块。除此之外，代码中没有动态内存分配。

测试系统操作系统为Windows 7（64位）。

我们如何测试内存使用情况？

使用自定义分配器，我们可以看到使用了多少内存，因为所有 malloc 调用都被推迟到分配器。使用 malloc()，在调试模式下，我们只是单步执行代码并在任务管理器中观察内存使用情况。在发布模式下，我们做了同样的事情，但粒度不那么细，因为编译器优化了很多东西，所以我们不能逐段执行代码（发布和调试之间的内存差异大约是 20MB，我将其归因于优化和发布模式下缺少调试信息）。

malloc 是否会导致如此巨大的开销？如果是这样，究竟是什么导致了 malloc 内部的这种开销？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T09:42:12.557

在 Windows 7 上，您将*始终*获得低碎片堆分配器，而无需显式调用 HeapSetInformation() 来请求它。该分配器会牺牲虚拟内存空间来减少碎片。您的程序实际上并没有使用 170 兆字节，您只是看到一堆空闲块在周围等待分配类似大小的空间。

这个算法**很**容易被一个自定义的分配器打败，它不做任何事情来减少碎片。这可能对您很有效，尽管在您保持程序运行时间超过单个调试会话之前，您不会看到它的副作用。如果这是预期的使用模式，您确实需要确保它在数天或数周内保持稳定。

最好的办法就是不要担心它，170 MB 是相当小的土豆。请记住，这是**虚拟**内存，它不需要任何成本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-25T08:51:37.533

首先 malloc 将指针对齐到 16 字节边界。此外，它们在返回值之前的地址中存储至少一个指针（或分配的长度）。然后他们可能会添加一个神奇的值或释放计数器来指示链表没有损坏或内存块没有被释放两次（free ASSERTS for double frees）。

```
#include <stdlib.h>
#include <stdio.h>

int main(int ac, char**av)
{
  int *foo = malloc(4);
  int *bar = malloc(4);
  printf("%d\n", (int)bar - (int)foo);
} 
```

返回：32

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T09:40:09.257

注意：当您在 Visual Studio 中运行程序或附加任何调试器时，默认情况下 malloc 行为发生了很大变化，[不使用低碎片堆](http://support.microsoft.com/kb/929136/en-us)，内存开销可能不代表实际使用情况（另请参见[https:// /stackoverflow.com/a/3768820/16673](https://stackoverflow.com/a/3768820/16673)）。您需要使用环境变量 _NO_DEBUG_HEAP=1 来避免受到此影响，或者在不在调试器下运行时测量内存使用情况。

# android - 我想要 SimpleAdapter 中的 Imageview？

> ID：13064855
> 
> 赞同：5
> 
> 时间：2012-10-25T08:46:34.077
> 
> 标签：android, android-imageview, simpleadapter

有人能指出我在这个 SimpleAdapter 中获取 ImageView 的正确方向吗？TAG_IMAGE 应该是 Imageview。我得到这个：类型不匹配：无法从 ImageView 转换为 int。是的，我是个菜鸟。

```
protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AllProductsActivity.this, productsList,
                        R.layout.list_item, new String[] { TAG_PID,
                                TAG_NAME, TAG_PRICE, TAG_RANDOM, TAG_IMAGE },                               
                        new int[] { R.id.pid, R.id.name, R.id.price,
                                R.id.random, R.id.image });
                // Imageview to show
                // updating listview
                setListAdapter(adapter);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T09:06:14.800

带有以下代码的 Main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    />

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
    />
</LinearLayout> 
```

listview_layout.xml 并使用以下代码更新内容

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal"
>
    <ImageView
        android:id="@+id/flag"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/hello"
        android:paddingTop="10dp"
        android:paddingRight="10dp"
        android:paddingBottom="10dp"
    />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
    >
        <TextView
            android:id="@+id/txt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dp"
        />

        <TextView
            android:id="@+id/cur"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="10dp"
        />
    </LinearLayout>
</LinearLayout> 
```

MainActivity.java 与下面给出的代码

```
package com.example.list;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;
import android.widget.SimpleAdapter;

public class MainActivity extends Activity {

    // Array of strings storing country names
    String[] countries = new String[] {
        "India",
        "Pakistan",
        "Sri Lanka",
        "China",
        "Bangladesh",
        "Nepal",
        "Afghanistan",
        "North Korea",
        "South Korea",
        "Japan"
    };

    // Array of integers points to images stored in /res/drawable-ldpi/
    int[] flags = new int[]{
        R.drawable.india,
        R.drawable.pakistan,
        R.drawable.srilanka,
        R.drawable.china,
        R.drawable.bangladesh,
        R.drawable.nepal,
        R.drawable.afghanistan,
        R.drawable.nkorea,
        R.drawable.skorea,
        R.drawable.japan
    };

    // Array of strings to store currencies
    String[] currency = new String[]{
        "Indian Rupee",
        "Pakistani Rupee",
        "Sri Lankan Rupee",
        "Renminbi",
        "Bangladeshi Taka",
        "Nepalese Rupee",
        "Afghani",
        "North Korean Won",
        "South Korean Won",
        "Japanese Yen"
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // Each row in the list stores country name, currency and flag
        List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();

        for(int i=0;i<10;i++){
            HashMap<String, String> hm = new HashMap<String,String>();
            hm.put("txt", "Country : " + countries[i]);
            hm.put("cur","Currency : " + currency[i]);
            hm.put("flag", Integer.toString(flags[i]) );
            aList.add(hm);
        }

        // Keys used in Hashmap
        String[] from = { "flag","txt","cur" };

        // Ids of views in listview_layout
        int[] to = { R.id.flag,R.id.txt,R.id.cur};

        // Instantiating an adapter to store each items
        // R.layout.listview_layout defines the layout of each item
        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.listview_layout, from, to);

        // Getting a reference to listview of main.xml layout file
        ListView listView = ( ListView ) findViewById(R.id.listview);

        // Setting the adapter to the listView
        listView.setAdapter(adapter);
    }
} 
```

运行应用程序

# php - jaxl 无法连接到 Prosody

> ID：13064858
> 
> 赞同：1
> 
> 时间：2012-10-25T08:46:48.820
> 
> 标签：php, xmpp

我可以对其他客户端进行很好的身份验证，包括 SleekXMPP 和 Strophe。

在 Ubuntu 12.04 上使用 Prosody 0.8.2 和最新的 jaxl 主 HEAD (2518a44b9dfeb9ec947922f078cf4f8663497712)。

编码：

```
require 'JAXL/jaxl.php';
$cli = new JAXL(array(
  'jid' => 'yang@localhost',
  'pass' => 'asdf',
  'bosh_url' => 'http://localhost/chat/candy/example/http-bind/'
));
$cli->add_cb('on_auth_success', function() {
  print 'yay';
});
$cli->start(); 
```

来自客户：

```
<body xmlns="http://jabber.org/protocol/httpbind" content="text/xml; charset=utf-8" to="localhost" route="xmpp:localhost:5222" secure="true" xml:lang="en" xmpp:version="1.0" xmlns:xmpp="urn:xmpp:xbosh" hold="1" wait="30" rid="3937" ver="1.10" from="yang@localhost"></body> 
```

从服务器：

```
<body authid='72604504-a5be-4ab6-aba0-9686cca478f3' xmpp:version='1.0'
xmlns:stream='http://etherx.jabber.org/streams'
xmlns:xmpp='urn:xmpp:xbosh' inactivity='60' wait='30' polling='5'
secure='true' hold='1' from='localhost' ver='1.6'
sid='72604504-a5be-4ab6-aba0-9686cca478f3' requests='2'
xmlns='http://jabber.org/protocol/httpbind'> 
```

来自客户：

```
<body sid="72604504-a5be-4ab6-aba0-9686cca478f3" rid="3938" xmlns="http://jabber.org/protocol/httpbind"><auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="SCRAM-SHA-1">biwsbj15YW5nQGxvY2FsaG9zdCxyPVpRWUp0b1JwUXMwTlFkYlJ3VnlNT1FvQXN5bnhLWlN1OUpocjdVeTdkbFE9</auth></body> 
```

从服务器：

```
<body xmlns='http://jabber.org/protocol/httpbind'
sid='72604504-a5be-4ab6-aba0-9686cca478f3' xmlns:stream =
'http://etherx.jabber.org/streams'> 
```

来自客户：

```
<body xmlns="http://jabber.org/protocol/httpbind" sid="72604504-a5be-4ab6-aba0-9686cca478f3" rid="3939"></body> 
```

从韵律日志：

```
Oct 25 01:18:53 socket        debug   server.lua: accepted new client
connection from 127.0.0.1:41313 to 5280
Oct 25 01:18:53 mod_bosh        debug   BOSH body open (sid: %s)
Oct 25 01:18:53 bosh9096614e-a319-4234-b281-d5806b7bc558        debug
 BOSH session created for request from 127.0.0.1
Oct 25 01:18:53 mod_bosh        info    New BOSH session, assigned it
sid '9096614e-a319-4234-b281-d5806b7bc558'
Oct 25 01:18:53 httpserver      debug   Sending response to c890f0
Oct 25 01:18:53 httpserver      debug   Destroying request c890f0
Oct 25 01:18:53 httpserver      debug   Request has destroy callback
Oct 25 01:18:53 socket  debug   server.lua: closed client handler and
removed socket from list
Oct 25 01:18:53 mod_bosh        debug   Session
9096614e-a319-4234-b281-d5806b7bc558 has 0 out of 1 requests open
Oct 25 01:18:53 mod_bosh        debug   and there are 0 things in the
send_buffer
Oct 25 01:18:53 socket  debug   server.lua: accepted new client
connection from 127.0.0.1:41314 to 5280
Oct 25 01:18:53 mod_bosh        debug   BOSH body open (sid:
9096614e-a319-4234-b281-d5806b7bc558)
Oct 25 01:18:53 mod_bosh        debug   BOSH stanza received: <auth
mechanism='SCRAM-SHA-1' xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>

Oct 25 01:18:53 bosh9096614e-a319-4234-b281-d5806b7bc558        debug
 Received[c2s_unauthed]: <auth mechanism='SCRAM-SHA-1'
xmlns='urn:ietf:params:xml:ns:xmpp-sasl'>
Oct 25 01:18:53 auth_internal_plain     debug   NODEprep failed on
username: yang@localhost
Oct 25 01:18:53 localhost:saslauth      debug   sasl reply: <failure
xmlns='urn:ietf:params:xml:ns:xmpp-sasl'><not-authorized/></failure>
Oct 25 01:18:53 mod_bosh        debug   We have an open request, so
sending on that
Oct 25 01:18:53 httpserver      debug   Sending response to ccd1d0
Oct 25 01:18:53 httpserver      debug   Destroying request ccd1d0
Oct 25 01:18:53 httpserver      debug   Request has destroy callback
Oct 25 01:18:53 bosh9096614e-a319-4234-b281-d5806b7bc558        debug
 BOSH session marked as inactive at 1351153133
Oct 25 01:18:53 socket  debug   server.lua: closed client handler and
removed socket from list
Oct 25 01:18:53 mod_bosh        debug   Destroying the request now...
Oct 25 01:18:53 httpserver      debug   Destroying request ccd1d0
Oct 25 01:18:53 mod_bosh        debug   Session
9096614e-a319-4234-b281-d5806b7bc558 has 0 out of 1 requests open
Oct 25 01:18:53 mod_bosh        debug   and there are 0 things in the
send_buffer
Oct 25 01:18:53 socket  debug   server.lua: accepted new client
connection from 127.0.0.1:41315 to 5280
Oct 25 01:18:53 mod_bosh        debug   BOSH body open (sid:
9096614e-a319-4234-b281-d5806b7bc558)
Oct 25 01:18:53 mod_bosh        debug   Session
9096614e-a319-4234-b281-d5806b7bc558 has 1 out of 1 requests open
Oct 25 01:18:53 mod_bosh        debug   and there are 0 things in the
send_buffer
Oct 25 01:18:53 mod_bosh        debug   Have nothing to say, so
leaving request unanswered for now
Oct 25 01:18:53 httpserver      debug   Request d8b230 left open,
on_destroy is function(mod_bosh.lua:81)
Oct 25 01:18:53 bosh67a53eee-1bdb-41f6-98cb-2413808fad65        debug
 BOSH client inactive too long, destroying session at 1351153133
Oct 25 01:18:53 bosh67a53eee-1bdb-41f6-98cb-2413808fad65        info
 Destroying session for (unknown) ((unknown)@localhost) 
```

有任何想法吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:53:38.830

如日志所示，Prosody 身份验证失败。请尝试使用其中一种身份验证机制`PLAIN`，它应该可以正常工作。并且两者目前都在 JAXL v3.x 中被破坏。让我知道它是否仍然不起作用。`DIGEST-MD5``ANONYMOUS``SCRAM-SHA-1``CRAM-MD5`

# javascript - 寄生构造器模式与工厂模式在技术上有何不同

> ID：13064859
> 
> 赞同：5
> 
> 时间：2012-10-25T08:46:52.600
> 
> 标签：javascript, design-patterns, factory-pattern

寄生构造器模式可以看作是工厂模式和构造器模式的结合。在工厂模式中，我们调用一个函数，该函数显式地创建一个对象并向该对象添加所需的属性和方法，最后返回该对象。

```
function createPerson(name, age, job){
    var o = new Object();   //explicit object creation
    o.name = name;
    o.age = age;
    o.job = job;
    o.sayName = function(){
            alert(this.name);
        };
    return o;
}

var person1 = createPerson(“Nicholas”, 29, “Software Engineer”);
var person2 = createPerson(“Greg”, 27, “Doctor”); 
```

注意事项：

*   创建并返回显式对象
*   方法和属性被添加到显式创建的对象
*   方法在没有`new`操作符的情况下被调用

缺点：它不允许识别对象的类型。

任何函数都可以通过使用运算符调用它来视为构造函数`new`。在没有`new`操作符的情况下调用时，在函数内部，`this`对象指向全局对象（`window`在浏览器中）。并且当使用操作符调用该函数时`new`，它首先创建新的实例，`object`然后将`this`对象设置为新创建的对象。

构造函数模式将方法和属性添加到`this`对象并最终返回`this`对象，从而允许稍后使用`instanceOf`运算符识别对象的类型。

```
function Person(name, age, job){
    this.name = name;
    this.age = age;
    this.job = job;
    this.sayName = function(){
            alert(this.name);
        };
    }

    var person1 = new Person(“Nicholas”, 29, “Software Engineer”);
    var person2 = new Person(“Greg”, 27, “Doctor”); 
```

注意事项：

*   使用操作符调用函数`new`（使 JavaScript 引擎将其视为构造函数）
*   对象未显式创建，而是`this`返回对象

现在，寄生构造器模式显式地创建并返回一个类似于工厂模式的对象，并使用类似构造器模式的 new 运算符调用它：

```
function Person(name, age, job){
    var o = new Object();
    o.name = name;
    o.age = age;
    o.job = job;
    o.sayName = function(){
            alert(this.name);
        };
    return o;
}

var friend = new Person(“Nicholas”, 29, “Software Engineer”);
friend.sayName(); //”Nicholas” 
```

但是我看不到使用`new`运算符调用函数的用途。我的意思是，由于函数显式创建并返回对象，我们将无法使用`instanceOf`运算符显式识别对象类型。

那么寄生构造器模式有什么好处呢？是否有任何技术细节可以被利用或适用于特定的对象创建场景？或者只是创建对象的另一种可能的编程方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T20:32:22.777

我认为您在工厂中跳过的部分是，在大多数其他语言中，工厂要么会制造多种不同类型的相似对象，要么像这样：

```
var truck = carFactory("Truck");
var jeep  = carFactory("Jeep"); 
```

或这样做：

```
var piano = instrumentFactory.piano("Grand");
var bass  = instrumentFactory.bass("Upright"); 
```

或您希望它具有的任何其他界面...

或者工厂的职责是通过依赖注入和潜在的多态性从较小的类中创建一个非常大的类：

```
function createTank (gunType) {
    var armour = new Armour();
    armour.hp  = 120;

    var wheels = new ChainTracks();

    var driver = new Soldier();
    driver.hp  = 15;

    var gun = gunFactory(gunType);

    var tank = new Tank(armour, wheels, gun);
    tank.driver = driver;

    return tank; 
}

var ground_tank = createTank("cannon");
var aa_tank = createTank("flak_cannon");
var at_tank = createTank("depleted_uranium_lancer"); 
```

如果你有一个像创建一个对象、设置它的属性并返回对象一样简单的工厂，那么真的没有什么区别。

当您谈论使用许多专门的组件来组合某些东西（无论它们是注入的还是硬编码的），或者您正在处理继承时，这些差异就会发挥作用。

老实说，我建议更多地了解这些东西（对象组合和继承），然后再进一步研究不同的方法。

因为最终，如果您使用工厂，或者如果您使用修改通用对象的函数，或者如果您只是在代码中间使用了大量类，它最终不会对完成的代码产生任何影响。 .. 该程序将运行得很好，或者会死，不管你怎么切它。

它的不同之处在于您组织代码的方式以及编写代码的方式。
如果您所做的只是在页面上制作一个按钮，那么您实际上并不需要工厂。
如果您要在页面上制作功能齐全的 MP3 播放器，它需要 6 个按钮、一个播放列表、一个进度条以及一个显示曲目名称、艺术家姓名和封面艺术的显示...

...现在是开始研究工厂模式的好时机，以弄清楚如何将这些部件组合在一起，要求一件事，并让它从装配线上吐出成品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:54:58.493

我认为从你的角度来看没有太大的区别，但是如果你更进一步，实现抽象工厂模式，或者你开始多态你的工厂，你每次写一个新的都可以节省很多工作.

在 javascript 中，由于语言没有私有值，因此您可以为对象设置任何值，如果您使用支持对象的 OOP 标准的框架，工厂可以非常强大并从基类继承其大部分逻辑。

**编辑**

好的，在我看来，对于 JavaScript 和那些模式而言，最重要的一件事就是原型设计。

原型设计基本上是您在 javascript 中定义对象的方式，因此运行时实际上可以识别该对象并可以将其与其他对象区分开来。

基本上只使用原型看起来像这样：

```
var Person = function(name){
    this.name = name
}; //constructor
Person.prototype.constructor = Person;
Person.prototype.name = 'Dave';
Person.prototype.getName = function() {
    return this.name;
} 
```

一些测试代码：

```
var dave = new Person('Dave');
console.log(dave.getName());​ 
```

最后是工厂：

```
var PersonFactory = function(name) {
    return new Person(name);
} 
```

现在，该注释的问题通常是它的可维护性很差，并且它没有继承。

现在是大多数框架的功能：您可以创建帮助函数来构建原型，甚至构建原型链。基本上，您定义一个对象，该对象接受另一个对象，并将其他对象成员解析为所需类对象的原型，从而为继承等留下各种可能性。

一些例子可以在这里找到： [http ://www.ruzee.com/blog/2008/12/javascript-inheritance-via-prototypes-and-closures](http://www.ruzee.com/blog/2008/12/javascript-inheritance-via-prototypes-and-closures)

我喜欢 mootools 处理课程的方式：

```
var MyClass = new Class({
Extends: MyOtherClass
Implements: [MyInterface, MyOtherInterface],

myPublicValue: null,
myOtherValue: null,

initialize: function() {
    //constructor
},

doStuff: function() {
    return 'stuff done';
}

}); 
```

mootools 类系统本身的缺点： -Closure Compiler 不喜欢尾随逗号，您倾向于将它们留在代码中

-几乎没有IDE支持mootools类的自动完成（因为原型没有在文件中注释，可以使用脚本将您的类解析为原型文件）

现在有了这个，您可以进行大量的设计设计，让您的工厂从您自己的原型助手类继承，使用原型助手类来创建实际的工厂（这里有一些递归），您可以在创建时解析每个对象（延迟加载之类的）或在页面加载时解析每个类对象（小心，如​​果您进入继承，在它的大多数实现中，您派生的类必须首先解析）或任何可能的方式。

我希望这有所帮助:)

（对不起我现在英语不好，今晚我很累xD）

# php - 在 div 中回显帖子元数据

> ID：13064862
> 
> 赞同：0
> 
> 时间：2012-10-25T08:47:09.137
> 
> 标签：php, wordpress, echo

啊，这段代码没有通过我的自定义元数据。

```
<?php 
$my_meta = get_post_meta($post->ID,'_my_meta', true);
if (!empty($post_meta)) {
?>
<div class='client-testimonial'><?php echo $my_meta['testimonial']; ?></div>
<div class='client-name'><?php echo $my_meta['name']; ?></div>
<?php
    }
?> 
```

但是下面的一个有效，我不使用它的唯一原因是因为当管理面板中的字段为空时，它仍然显示语音标记和破折号

```
 <?php 
$my_meta = get_post_meta($post->ID,'_my_meta', true);
echo "<div class='client-testimonial'>". "'".$my_meta['testimonial']."'". "</div>";
echo "<div class='client-name'>". "-" .$my_meta['name']."</div>";
?> 
```

请帮助我解释为什么第一个代码没有回显信息。我已经走到了尽头！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:52:24.580

您正在检查是否`$post_meta`不为空，您没有名为的变量`$post_meta`

改变：

```
if (!empty($post_meta)) 
```

至

```
if (!empty($my_meta)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:56:08.190

我想你检查了错误的变量。

```
<?php 
    $my_meta = get_post_meta($post->ID,'_my_meta', true);

    if (isset($my_meta) && !empty($my_meta)) {
    ?>
    <div class='client-testimonial'><?php echo $my_meta['testimonial']; ?></div>
    <div class='client-name'><?php echo $my_meta['name']; ?></div>
    <?php
        }
    ?> 
```

# mysql - 使用参数化 SQL 查询执行 ADODB 命令失败

> ID：13064865
> 
> 赞同：3
> 
> 时间：2012-10-25T08:47:30.013
> 
> 标签：mysql, ado, jscript

我有以下 JScript 代码：

```
var conn = new ActiveXObject ("ADODB.Connection");
conn.Open("Driver={MySQL ODBC 5.1 Driver};Server=localhost;Database=blah_blah_blah;User=foo;Password=bar;");
var cmd = new ActiveXObject("ADODB.Command");
cmd.ActiveConnection = conn;

var strSQL = "SELECT id FROM tbl_info WHERE title LIKE :search ORDER BY id";
var search = "test";

try{
    cmd.CommandText = strSQL;
    var param = cmd.CreateParameter(':search', 200, 1, 100, search);
    cmd.Parameters.Append(param);
    var rs = cmd.Execute();
    }
catch (ex) {
    Application.Alert("Error retrieving id information from database.");
} 
```

我已经验证（通过打印它们）Connection 对象设置为 Command 的 ActiveConnection，参数对象具有正确的值，并且 Command 对象具有正确的 SQL 查询作为其 CommandText。我还在 try 块中的每一行之后插入了一条警告语句，以查看错误发生的位置 - 在 cmd.Parameters.Append 之后很好，但是在运行 Execute 语句时会引发异常。

我试过显示实际的异常，但它只是一个通用的“对象错误”消息。

当我直接通过 Connection 对象执行 SQL 查询（不带参数）时，查询执行良好并返回正确的结果集，但是当我对 Command 对象使用参数化查询时似乎失败了。

据我所知，Command 和 Connection 对象的所有设置和属性都是正确的，但无论出于何种原因，它都会引发异常。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T06:31:27.933

对于 ODBC 和 ADO，一般来说，问号`?`用作参数的占位符。参数按照它们附加到`Parameters`集合的顺序绑定到命令中的占位符。在您的示例中，替换`strSQL`为：

```
var strSQL = "SELECT id FROM tbl_info WHERE title LIKE ? ORDER BY id"; 
```

您仍然可以命名您创建的参数，但它的唯一用途是以后能够通过名称引用它（例如，使用`cmd.Parameters.Item(":search")`）。

# c# - 为什么我的 MVC 控制器在提供图像时速度很慢

> ID：13064877
> 
> 赞同：10
> 
> 时间：2012-10-25T08:47:53.393
> 
> 标签：c#, asp.net-mvc, iis, browser

我有一个包含图像列表的 MVC 视图，这些图像是动态的，因此它们来自控制器。为了简化事情，这个控制器只有这个代码：

```
 [OutputCache(Duration = 0, NoStore = true, Location = OutputCacheLocation.None)]
    public ActionResult RenderImage(int id)
    {
    return File(@"C:\Users\Pictures\myimage.png", "image/png");
    } 
```

我没有缓存东西来证明我的观点。

我的视图请求 8 张图片，所有图片都具有不同的 id，而且时间很糟糕：

![计时](../Images/cca2856a91260bad7d096215d1fc9db0.png)

有时对于某些图像（它们都是相同的）来说它很快，并且在每次刷新时它都不同，无法在其中找到模式。

该应用程序托管在 IIS 中，服务器日志中的时间显示它正在消耗时间的服务器：

![在此处输入图像描述](../Images/a9d9aff05605681d70c3422ee100e4cf.png)

有谁知道为什么会发生这种情况？如果我单独请求图像（不在页面中），它总是很快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:23:27.810

原来这是我的解决方案：

```
[SessionState(System.Web.SessionState.SessionStateBehavior.Disabled)] 
```

user1394965 建议将此作为答案.. 但他的答案不见了？！

# asp.net - 在 IE (ASP.NET) 上打开新选项卡时，文档模式更改为 Quirk

> ID：13064882
> 
> 赞同：0
> 
> 时间：2012-10-25T08:48:16.540
> 
> 标签：asp.net, internet-explorer, window.open, quirks-mode

我有一个按钮单击事件，它执行一些服务器端工作，最后打开一个新选项卡。但是当这种情况发生时，Internet Explorer 上的父选项卡会变得非常奇怪。然后我发现文档模式更改为 Quirk 模式，使整个网站向左移动而不是中心，我也失去了一些样式。我尝试使用下面的代码，但仍然发生。

```
 <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

谁能告诉我为什么会这样以及如何解决这个问题？谢谢。

我的代码示例。

```
 Sub btnTeachersView_Click
    ........ server side code ........
    Response.Write("<script>")
    Response.Write("window.open('../abc.aspx','_blank')")
    Response.Write("</script>")
    End Sub 
```

注意：它需要在服务器端，因为需要先完成其他工作，我的客户希望它在一个新选项卡中，所以我不能只重定向到该页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:00:16.937

尝试使用 doctype 等将您的`<script></script>`标签包装在正确的`<html></html>`标签中。我认为这可能是触发怪癖模式的问题，缺乏适当的 dtd

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T21:55:14.467

我有这个完全相同的问题。我能找到的唯一解决方法是导航到空白位置，然后将值设置为您想要的位置。像这样：

```
var newWindow = window.open('', '_blank');
newWindow.location = '../abc.aspx'; 
```

在 VB 中：

```
Response.Write("<script>")
Response.Write("var newWindow = window.open('','_blank');")
Response.Write("newWindow.location = '../abc.aspx';")
Response.Write("</script>") 
```

# image - switchClass() 第三次点击后交换类

> ID：13064884
> 
> 赞同：1
> 
> 时间：2012-10-25T08:48:18.807
> 
> 标签：image, class, scale

我得到以下信息：

[http://jsfiddle.net/GsL8Z/](http://jsfiddle.net/GsL8Z/)

我想切换图像的大小。每次切换后，我想用正确大小的实例替换缩放的图像。

这实际上工作得很好，但只是第一次。第三次单击后，分配了错误的类。

任何帮助将不胜感激！

HTML

```
<div id="projekt_1" class="projekt">
<ul class="bilder">
<li><img class="imgKlein" src="images/mainworks_th.jpg" alt="Mainworks"/></li>
</ul>
</div>​ 
```

CSS

```
.imgGross{
    height: 450px;
}

.imgKlein{
    height: 215px;
}​ 
```

JS

```
var status = true,
    obj = $('.projekt'),
    projekte = $.makeArray(obj),
    obj = $('.bilder'),
    projekte_li = $.makeArray(obj),
    obj = $('.projekt li img'),
    projekte_li_img = $.makeArray(obj);

var images = new Array (2);
images[0] = $('<img class="imgKlein"/>').attr({src: 'images/mainworks_th.jpg'});
images[1] = $('<img class="imgGross"/>').attr({src:'images/mainworks_pre.jpg'});

$('#projekt_1').click(function() {
    if (status == true) {
        $("img", this).switchClass( "imgKlein", "imgGross", 1000, "easeInOutQuad" );
        setTimeout(function(){
            $(projekte_li[0]).html(images[1]);
        }, 2000);
        status = false;
    }
    else {
        $("img", this).switchClass( "imgGross", "imgKlein", 1000, "easeInOutQuad" );
        setTimeout(function(){
            $(projekte_li[0]).html(images[0]);
        }, 2000);
        status = true;
    }
    return false; 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:30:35.493

不知何故，switchClass 在替换 img 的整个 html 时遇到了问题。事实上，您只需更改 src.src 即可。

此外，您最好[`.toggle()`](http://api.jquery.com/toggle-event/)在 jQuery 中使用来处理每次单击时前后变化的事情。

顺便说一句，setTimeout 也会出现问题。[`.switchClass()`](http://api.jqueryui.com/switchClass/)有一个在动画完成后运行的完整处理程序，您应该使用它。

因此，解决方案可能是：

```
$('#projekt_1').toggle(
    function(e) {
        $("img", this).switchClass("imgKlein", "imgGross", 1000, "easeInOutQuad", 
            function() {
                $(this).attr({ src: 'images/mainworks_pre.jpg', alt: "Mainworks_pre" });
            }); 
        return false;
        }, 
    function (e) {
        $("img", this).switchClass("imgGross", "imgKlein", 1000, "easeInOutQuad", 
            function(){
                $(this).attr({ src: 'images/mainworks_th.jpg', alt: "Mainworks_TH" });
            });
        return false;
    }
); 
```

小提琴：http: [//jsfiddle.net/GsL8Z/2/](http://jsfiddle.net/GsL8Z/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:41:43.193

我用 jquery-ui 中的示例测试了一些东西，它的工作原理比你的代码短一点：

$(function() { $( "#projekt_1" ).click(function(){ $(".imgKlein").switchClass( "imgKlein", "imgGross", 1000, "easeInOutQuad", function() { $( "img").attr("src", "http://www.spielwiki.de/images/e/e9/Kleines_M%C3%A4dchen%2C_zu_gro%C3%9Fer_Luftballon.png"); }); $(" .imgGross").switchClass("imgGross", "imgKlein", 1000, "easeInOutQuad", function() { $("img").attr("src", "http://images.all-free-download .com/images/graphiclarge/small_house_329.jpg"); });

```
 return false;
}); 
```

});​</p>

示例链接：http: [//jsfiddle.net/DWrC6/24/](http://jsfiddle.net/DWrC6/24/)

# css - 图片<比页面居中，图片>比页面居中

> ID：13064886
> 
> 赞同：-1
> 
> 时间：2012-10-25T08:48:23.790
> 
> 标签：css

在 CSS 中是否可以根据浏览器页面的尺寸来处理背景图像的位置，或者我应该使用 javascript 来处理它？

当**图像大于页面**时，它应该**向左对齐**

当**图像小于页面**时，应**居中对齐**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:53:31.903

媒体查询 - 它们根据浏览器大小更改 CSS 样式。

```
#img { 
  width: 1000px;
  margin: 0 auto;
}

@media 
screen and (max-device-width: 1000px), 
screen and (max-width: 1000px) {

  #img { 
    float: left; 
    margin: 0;
  }
} 
```

# facebook - 我可以拥有的应用程序数量是否有限制？

> ID：13064889
> 
> 赞同：2
> 
> 时间：2012-10-25T08:48:36.537
> 
> 标签：facebook, facebook-graph-api

我运行自己的博客平台，并有许多我们为其设计博客的客户。我想为他们每个人设置一个独特的 facebook 应用程序，因为他们都使用自己的域名。今天早上我完成了创建单个应用程序的过程，现在被告知我不能再创建了。到目前为止，我设法创建了 12 个。

这是对我可以拥有的应用程序数量的物理限制，还是只是我在短时间内创建了太多？我有大约 60 个客户，并希望为每个客户提供一个应用程序。

谁能给我建议？

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:45:59.310

这必须是一个时间的事情。我已经创建了 120 多个 Facebook 应用程序。

# javascript - How to prevent the changing of a variable value in Javascript

> ID：13064901
> 
> 赞同：13
> 
> 时间：2012-10-25T08:49:19.230
> 
> 标签：javascript, static, final

> **Possible Duplicate:**
> [Are there constants in Javascript?](https://stackoverflow.com/questions/130396/are-there-constants-in-javascript)

Is there a way to declare a static of final value in javascript so that it cannot be altered by a 3rd party?

What I have is a article sharing application, with free users being ad supported. What I wish to do is prevent the free users from altering the innerHTML content by altering the storage variable for the content.

What I have at this moment is a timer that reloads the innerHTML of the article on user website every 5 seconds and I'm storing the value for the reload in a variable.

However, if a genius using jsbeatify explores which variable holds the key to removing the ad and alters that, we lose revenue and exposure of our products.

How to prevent the altering of the internal variable?

* * *

## UPDATE

This is the end result of what I came up with:

[http://jsfiddle.net/PgdYP/1/](http://jsfiddle.net/PgdYP/1/)

```
<div id="specialdiv"></div>
<input type="button" value="try to change the function i to do something different" onclick="t.i = function(){alert(data.secret);}"><BR>
<input type="button" value="set function to null out of spite" onclick="t=null;"> 
```

```
 <script type="text/javascript">
    e = function(){var data = { };
    Object.defineProperty(data, 'secret', {
       value: "Hello world!",
       writable : false,
       enumerable : true,
       configurable : false
       });this.z=function(){window.setTimeout("try{document.getElementById('specialdiv').innerHTML =   '"+data.secret+"';t.i.z();}catch(err) {document.body.innerHTML=err;}",5000);}}
        g = function(){};
        g.prototype = new e();e=null;window.t = {}
        Object.defineProperty(window.t, 'i', {
        value: new g(),
        writable : false,
        enumerable : false,
        configurable : false });g = null;
        window.t = Object.freeze(window.t); t = Object.seal(window.t);
        t.i.z();
    </script> 
```

This will be presented in packed format, just to make it harder just to copy the code out of the source. This way the effort to simply copy and paste the code out will be maximized and will be very hard to automate.

Thank you all for your answers.

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-25T08:53:50.317

Yes, there is. At least for *object properties*, ES5 gave us the possiblity to alter the *property descriptor* flags by hand. So we can do that like

```
var data = { };

Object.defineProperty(data, 'secret', {
    value: 42,
    writable : false,
    enumerable : true,
    configurable : false
}); 
```

That way, we created a property `secret` with the value `42` within `data`, which cannot get modfied nor deleted.

The caveat here is, that the *genius* (like you called it) will also be able to spot this code and just modify that, to again be able to change the content if he wishes to. You just **can't** create a secured front-end javascript in that way. The code will always be available as plain-text for everybody.

* * *

To make this more complete, you can also create an object and `freeze` it at some point, using [`Object.freeze()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/freeze) and/or [`Object.seal()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/seal) to shutdown the option for *enumerating*, *deleting* and *modifying* on properties of an object.

**But again the word of caution**: This is intended to affect your own code or foreign code, to prevent modifications by accident or on purpose at run time. There is no way to stop a developer since he can simply *halt* the execution of your script, before this even can take affect.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T08:54:00.187

try the [const](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Values,_Variables,_and_Literals#Constants) keyword. it should create an immutable variable.

# objective-c - 将 NSArray 转换为 char** 并返回 c 数组

> ID：13064909
> 
> 赞同：2
> 
> 时间：2012-10-25T08:49:46.920
> 
> 标签：objective-c, c, arrays

我需要转换一个充满 NSStrings 的 NSarray 并将这个 c 数组返回给函数。

```
-(char**) getArray{
        int count = [a_array count];
        char** array = calloc(count, sizeof(char*));

        for(int i = 0; i < count; i++)
        {
             array[i] = [[a_array objectAtIndex:i] UTF8String];
        }
        return array;     
} 
```

我有这段代码，但是如果我要退回东西，我应该什么时候释放内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T09:00:48.967

您还需要为数组中的每个字符串分配内存。 `strdup()`会为此工作。您还需要将 a 添加`NULL`到数组的末尾，这样您就知道它在哪里结束：

```
- (char**)getArray
{
    unsigned count = [a_array count];
    char **array = (char **)malloc((count + 1) * sizeof(char*));

    for (unsigned i = 0; i < count; i++)
    {
         array[i] = strdup([[a_array objectAtIndex:i] UTF8String]);
    }
    array[count] = NULL;
    return array;     
} 
```

要释放数组，您可以使用：

```
- (void)freeArray:(char **)array
{
    if (array != NULL)
    {
        for (unsigned index = 0; array[index] != NULL; index++)
        {
            free(array[index]);
        }
        free(array);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:56:05.850

您返回的数组将被捕获在`char**`getArray() 函数的调用环境中的某个标识符中，您可以使用在 getArray() 函数`free`中分配的内存`calloc()`

```
int main()
{
 char **a=getArray();
 //use  a as your requirement
 free(a);
} 
```

# math - 在环（环）内生成均匀随机点

> ID：13064912
> 
> 赞同：9
> 
> 时间：2012-10-25T08:49:55.240
> 
> 标签：math, random, geometry, probability

> **可能重复：**
> [在环内创建随机数](https://stackoverflow.com/questions/9048095/create-random-number-within-an-annulus)

我想在[annulus](http://en.wikipedia.org/wiki/Annulus_%28mathematics%29)内获得一个均匀获得的随机点，即位于半径圆内`R1`但在半径圆外的区域`R2`，`R1 > R2`两个圆都以同一点为中心。我想避免使用拒绝抽样。

如果可能的话，我希望解决方案与[这个](https://stackoverflow.com/a/5838055/269753)类似——用于计算圆内的随机点——我觉得它非常优雅和直观。也就是说，我也想避免使用*square root*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T09:11:30.157

它很容易。使用极坐标，即为角度值theta 生成一个随机值，为与原点的距离生成一个随机值。由于您的圈子都在同一个原点，这变得非常容易。

但是注意：您可以通过统一的随机函数生成 theta 值，这很好，但是对于您不能这样做的距离，因为那时这些点将聚集在原点周围。您必须考虑到圆的周长在 ^2 中增长（您必须使用平方根的倒数）。

使用均匀分布的随机函数`rnd`(0..1) 会是这样的：

```
theta = 360 * rnd();
dist = sqrt(rnd()*(R1^2-R2^2)+R2^2); 
```

**编辑**：要转换为笛卡尔坐标，您只需计算：

```
x =  dist * cos(theta);
y =  dist * sin(theta); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:20:17.340

**编辑：** *请注意，此解决方案可能不统一。请参阅下面的 Mark Dickinson 的评论。*

好吧，我想我明白了。请注意，此解决方案在[此答案](https://stackoverflow.com/questions/5837572/generate-a-random-point-within-a-circle-uniformly/5838055#5838055)中受到很大启发，并且 r1 = R1/R1 和 r2 = R2/R1。

伪代码：

```
t = 2*pi*random()
u = random()+random()
r = if u>1 then 2-u else u
r = if r<r2 then r2+r*((R1-R2)/R2) else r
[r*cos(t), r*sin(t)] 
```

这是在 Mathematica 中。

```
f[] := Block[{u, t, r}, u = Random[] + Random[];
r1 = 1; r2 = 0.3;
t = Random[] 2 Pi;
r = If[u > 1, 2 - u, u];
r = If[r < r2, r2 + r*((R1 - R2)/R2), r];
{r Cos[t], r Sin[t]}]

ListPlot[Table[f[], {10000}], AspectRatio -> Automatic] 
```

![简单算法的分布](../Images/0e12c06c3c5d4957d65afcc9a9491e41.png)

它所做的是将落在内圈内的所有数字重新映射到环形空间中，均匀地分布它们。如果有人发现有关此解决方案的一致性的问题，请发表评论。

[与此处](https://stackoverflow.com/a/9048443/269753)找到的其他解决方案进行比较：

![sqrt算法的分布](../Images/b5d5e696c37f1241674276c825623f2b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:57:25.963

最简单的方法是使用[拒绝抽样](http://en.wikipedia.org/wiki/Rejection_sampling)。在边长为 2*R2 的正方形中均匀生成大量点，然后将这些样本过滤到外圆内而不是内圆内。

不漂亮或效率不高，但在大多数情况下，足够了。

# perl - Perl 记录哪些脚本/模块访问了另一个模块

> ID：13064926
> 
> 赞同：4
> 
> 时间：2012-10-25T08:50:32.477
> 
> 标签：perl

我们维护了大量的 perl 模块，实际上它是如此之大，以至于我们甚至不知道我们负责的所有模块。我们想在某种日志中跟踪哪些脚本和模块访问了另一个模块，最好按模块名称存储，这样我们就可以评估更新模块是否存在风险，以便我们知道我们可能会影响什么。

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T09:04:05.283

你可以做一个简单的正则表达式搜索：

```
use strict;
use warnings;

my %modules;

foreach my $perl_file (@file_list) {

    open FILE, $perl_file or die "Can't open $perl_file ($!)";
    while (<FILE>) {

        if (/\s*(?:use|require)\s*([^;]+);/) {

            $modules{$1}{$perl_file}++;
        }
    }
} 
```

这既快又脏，但它应该工作得很好。您最终会得到一个模块哈希，每个模块都指向使用它的文件的哈希。

当然，它会捕捉到类似`use strict;`但很容易忽略的东西。

如果你有类似的东西，`use Module qw/function/;`你会在分号之前抓住整个东西，但这应该没什么大不了的。您可以只搜索已知模块名称的键。

缺点是它不跟踪依赖关系。如果您需要该信息，您可以通过从 cpan 或其他方式获取它来添加它。

**更新：**如果你想在运行时记录这个，你可以创建一个包装器脚本，让你的`perl`命令指向你系统上的包装器。然后使包装器像这样：

```
use strict;
use warnings;

use Module::Loaded;

my $script = shift @ARGV;
#run program
do $script;

#is_loaded() gets the path of these modules if they are loaded.
print is_loaded('Some::Module');
print is_loaded('Another::Module'); 
```

但是，由于调用脚本的方法已经改变，您可能会冒着有趣的副作用的风险。这取决于你在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T10:01:26.217

也许编辑 sitecustomize.pl 以便每次 Perl 运行时，它都会在日志中写入一些信息，然后对其进行分析？在 sitecustomize.pl 中添加类似这样的内容：

```
open (LOG, '>>',"absolutepathto/logfile.txt");
print LOG $0,"\t",$$,"\t",scalar(localtime),"\n";
open SELF, $0;
while (<SELF>) {
print LOG $_ if (/use|require/);
}
close SELF;
print LOG "_" x 80,"\n";
close LOG; 
```

编辑：另外，我们忘记了 %INC 哈希，所以上面的代码可以重写如下，以包含更多关于哪些模块实际加载的数据 + 包含 do 函数所需的文件：

```
open (LOG, '>>',"absolutepathto/logfile.txt");
print LOG $0,' ',$$,' ',scalar(localtime),"\n";
open SELF, $0;
while (<SELF>) {
print LOG $_ if (/use|require/);
}
close SELF;
END {
local $" = "\n";
print LOG "Files loaded by use, eval, or do functions at the end of this program run:\n";
print LOG "@{[values %INC]}","\n";
print LOG "_" x 80,"\n";
close LOG;
} 
```

# gwt - 通过 dataTable JSON 在谷歌饼图上设置颜色

> ID：13064929
> 
> 赞同：0
> 
> 时间：2012-10-25T08:51:03.163
> 
> 标签：gwt, google-visualization, pie-chart

我正在使用 chartWrapper 来提取一些 JSON。我想知道如何设置饼图上每个段的颜色。

```
//draw the channel summary data
 $.getJSON("@Url.Action("SummaryData", new { id = Model.Id })", function(data) {
     var channelChartWrapper = new window.google.visualization.ChartWrapper({
         chartType: "PieChart",
         dataTable: data,
         options: {
             title: "Title here"
         },
         containerId: "summary-chart",
     });
     channelChartWrapper.draw();
 }); 
```

控制器返回的数据如下所示；

```
{
   "cols":[
      {
         "id":"",
         "label":"Channel",
         "type":"string",
         "pattern":""
      },
      {
         "id":"",
         "label":"Value",
         "type":"number",
         "pattern":""
      }
   ],
   "rows":[
      {
         "c":[
            {
               "v":"A",
               "f":null
            },
            {
               "v":17,
               "f":null
            }
         ]
      },
      {
         "c":[
            {
               "v":"B",
               "f":null
            },
            {
               "v":208,
               "f":null
            }
         ]
      },
      {
         "c":[
            {
               "v":"C",
               "f":null
            },
            {
               "v":4,
               "f":null
            }
         ]
      },
      {
         "c":[
            {
               "v":"D",
               "f":null
            },
            {
               "v":2,
               "f":null
            }
         ]
      }
   ]
} 
```

我尝试`p: { style: "color: pink" }`了对细胞进行各种添加，但没有运气。我可以使用`colors`图表上的属性获取颜色，但这对我不起作用，因为颜色是数据特定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:22:10.600

事实证明，您无法在 DataTable/JSON 中明确设置图表的颜色（表格的不同故事）。但是，您可以稍微破解它。

```
{
   cols:[...,]
   rows:[...,]
   p:{
      colors: ["#ffcc00","#ff0000",...]
   }
} 
```

然后在javascript中；

```
$.getJSON("@Url.Action("SummaryData", new { id = Model.Id })", function(data) {
     var channelChartWrapper = new window.google.visualization.ChartWrapper({
         chartType: "PieChart",
         dataTable: data,
         options: {
             title: "Title here",
             colors: data.p.colors
         },
         containerId: "summary-chart",
     });
     channelChartWrapper.draw();
 }); 
```

# workflow - JIRA post 函数存储

> ID：13064934
> 
> 赞同：1
> 
> 时间：2012-10-25T08:51:13.760
> 
> 标签：workflow, jira

我刚刚升级到 JIRA 5，我的一个插件停止工作。没关系，因为它很旧。但是，我在许多工作流程中都有与此插件相关的发布功能，手动删除它会让我发疯。我的问题是 post 函数存储在数据库中还是 xml 文件中的某个位置？或者知道如何摆脱它？

谢谢

-罗马

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:24:23.840

作为数据库中的 XML 文本。可以使用 SQL 命令修改它们，只需稍作修改。首先在暂存实例上执行此操作！

# actionscript-3 - 删除 xml 对象中的相同标记节点

> ID：13064937
> 
> 赞同：0
> 
> 时间：2012-10-25T08:51:26.270
> 
> 标签：actionscript-3, flash

例如，我想删除所有价格标签及其内容。

```
var xml:XML = <breakfast_menu>
<food>
<name>Belgian Waffles</name>
<price>$5.95</price>
<description>
two of our famous Belgian Waffles with plenty of real maple syrup
</description>
<calories>650</calories>
</food>
<food>
<name>Strawberry Belgian Waffles</name>
<price>$7.95</price>
<description>
light Belgian waffles covered with strawberries and whipped cream
</description>
<calories>900</calories>
</food>
<food>
<name>Berry-Berry Belgian Waffles</name>
<price>$8.95</price>
<description>
light Belgian waffles covered with an assortment of fresh berries and whipped cream
</description>
<calories>900</calories>
</food>
<food>
<name>French Toast</name>
<price>$4.50</price>
<description>
thick slices made from our homemade sourdough bread
</description>
<calories>600</calories>
</food>
<food>
<name>Homestyle Breakfast</name>
<price>$6.95</price>
<description>
two eggs, bacon or sausage, toast, and our ever-popular hash browns
</description>
<calories>950</calories>
</food>
</breakfast_menu> 
```

我使用 delete xml..price ，没有用，删除操作只在第一级有效，我想从整个树中删除标签，有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:45:16.963

您也可以使用过滤器表达式在一行中完成：

```
xml..price.( delete parent().children()[valueOf().childIndex()] ); 
```

* * *

要通过名称参数删除所有节点，您可以创建如下函数：

```
function deleteAllTag(xml:XML, tag:String):void{
 xml.descendants(tag).(delete parent().children()[valueOf().childIndex()] );
} 
```

接着：

```
deleteAllTag(xml, "price"); 
```

Wonderfl 的实时示例：[http ://wonderfl.net/c/cHfy](http://wonderfl.net/c/cHfy)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:23:31.327

事实上，[在 as3 中删除 XML 节点比看起来要难](http://bottomupflash.wordpress.com/2008/03/26/deleting-xml-nodes-harder-than-it-looks/)。那篇文章很好地涵盖了它的基础知识。您基本上需要使用**数组语法**`delete`一一遍历所有节点和它们。

 **在你的情况下：

```
//to select all price nodes:
trace( "—- xml..price —-" );
trace( xml..price );

trace( "—- delete in loop —-" );

//loop
for each (var price:XML in xml..price)
{
  //and delete each node!
  delete xml..price[0];
}

trace( "—- after delete —-" );
trace(xml); 
```

输出是：

```
—- xml..price —-
<price>$5.95</price>
<price>$7.95</price>
<price>$8.95</price>
<price>$4.50</price>
<price>$6.95</price>

—- delete in loop —-

—- after delete —-

<breakfast_menu>
  <food>
    <name>Belgian Waffles</name>
    <description>two of our famous Belgian Waffles with plenty of real maple syrup</description>
    <calories>650</calories>
  </food>
  <food>
    <name>Strawberry Belgian Waffles</name>
    <description>light Belgian waffles covered with strawberries and whipped cream</description>
    <calories>900</calories>
  </food>
  <food>
    <name>Berry-Berry Belgian Waffles</name>
    <description>light Belgian waffles covered with an assortment of fresh berries and whipped cream</description>
    <calories>900</calories>
  </food>
  <food>
    <name>French Toast</name>
    <description>thick slices made from our homemade sourdough bread</description>
    <calories>600</calories>
  </food>
  <food>
    <name>Homestyle Breakfast</name>
    <description>two eggs, bacon or sausage, toast, and our ever-popular hash browns</description>
    <calories>950</calories>
  </food>
</breakfast_menu> 
```

希望这可以帮助！**

# android - 在textView android中移动文本

> ID：13064938
> 
> 赞同：15
> 
> 时间：2012-10-25T08:51:26.610
> 
> 标签：android

我想问你 textview 是否有任何选项，当我的文本太长时，例如 text 有 30 dp 而 textview 有 15 dp 我想显示从左角移动到右角并再次返回开始的文本。类似动画的东西。我想让用户看到所有文本。类似自动滚动的东西。

编辑：我如何在代码中做到这一点，而不是 xml？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-25T08:55:11.180

一个例子 -

在 XML 中：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:id="@+id/tv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:ellipsize="marquee"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:textColor="#ff4500"
        android:text="this is a very long piece of text that will move" />
</RelativeLayout> 
```

在 Java 中：

```
 tv = (TextView) this.findViewById(R.id.tv);  
        tv.setSelected(true);  // Set focus to the textview 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T08:53:04.860

你应该使用[`android:ellipsize="marquee"`](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aellipsize).

**编辑：**你可以使用`textView.setEllipsize(TextUtils.TruncateAt.MARQUEE);`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-25T09:00:35.147

```
<TextView
        android:id="@+id/YOURID"
        android:layout_width="15dp"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:singleLine="true"
        /> 
```

这将帮助它滚动直到它被聚焦

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-30T21:36:12.080

使用此代码，它可以 100% 工作：

```
TextView top=new TextView(this);
top.setText("Developers are working to add more features");
top.setEllipsize(TextUtils.TruncateAt.MARQUEE);
top.setHorizontallyScrolling(true);
top.setMarqueeRepeatLimit(-1);
top.setFocusable(true);
top.setFocusableInTouchMode(true); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T08:54:04.283

是的，它叫做**marquee**。将以下内容设置为您的`TextView`：

```
android:singleLine="true"
android:ellipsize="marquee" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-01T11:49:33.877

试试这 3 行代码：（以上总结）

```
 textView.setEllipsize(TextUtils.TruncateAt.MARQUEE);
    textView.setSingleLine(true);
    textView.setSelected(true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-12T12:07:18.170

**strong text**为了移动文本，除了添加属性：

```
android:ellipsize="marquee"
android:singleLine="true"
android:marqueeRepeatLimit="marquee_forever"
android:focusable="true"
android:clickable="true"
android:focusableInTouchMode="true"
android:scrollHorizontally="true" 
```

视图必须处于焦点位置，因此可以通过两种方式完成：

1.  以编程方式：

    ```
    tv.setSelected (true); 
    ```

2.  ***通过添加requestFocus***标签在 XML 中执行所有操作：

    ```
    <TextView 
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:ellipsize="marquee"
         android:singleLine="true"
         android:marqueeRepeatLimit="marquee_forever"
         android:focusable="true"
         android:clickable="true"
         android:focusableInTouchMode="true"
         android:scrollHorizontally="true">
         <requestFocus />
    </TextView> 
    ```

# hibernate - 如何插入其中包含对象列表的对象？

> ID：13064940
> 
> 赞同：1
> 
> 时间：2012-10-25T08:51:33.447
> 
> 标签：hibernate

内容包类，

```
@Entity
public class ContentPack {

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int id;

@Property
private String name;

@OneToMany  // ????
private List<ContentItem> songsList;
} 
```

接下来是 ContentItem 类，

```
@Entity
public class ContentItem {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;

    private String mp3Url;
} 
```

但是当我尝试调用以下内容时，

```
session.beginTransaction();
session.save(contentPack);
session.getTransaction().commit(); 
```

我收到以下错误。我相信`list`会造成错误。我该如何解决？

错误 ：

```
org.hibernate.exception.GenericJDBCException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:140)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:128)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:268)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:188)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:51)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:383)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:133) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:51:17.017

用空白/空列表初始化歌曲列表，例如：

```
private List<ContentItem> songsList = new ArrayList<ContentItem>(); 
```

我不确定这是否会解决问题。如果没有，那么您可以分享保存**ContentPack**的详细代码以及如何在其中设置**ContentItem**。

# c# - .Net C# to PHP Pb with byte[] array & ComputeHash

> ID：13064942
> 
> 赞同：0
> 
> 时间：2012-10-25T08:51:39.850
> 
> 标签：c#, php, .net, hash, md5

我在 .Net C# 中有这个函数，并且想在 PHP 中做同样的事情。但我不了解所有 C# 部分，也不确定我的代码。

```
public static string getMD5Hash(string input)
{
    MD5 mD = new MD5CryptoServiceProvider();
    byte[] array = Encoding.UTF8.GetBytes(input);
    array = mD.ComputeHash(array);
    StringBuilder stringBuilder = new StringBuilder();
    int i = 0;
    byte[] array2 = array;
    int length = array2.Length;
    while (i < length)
    {
        stringBuilder.Append(array2[i].ToString("x2").ToLower());
        i++;
    }
    return stringBuilder.ToString();
} 
```

我在这里找到了一个描述如何从字符串（谁是相同的）创建 MD5 哈希的示例：http: [//en.csharp-online.net/Create_a_MD5_Hash_from_a_string](http://en.csharp-online.net/Create_a_MD5_Hash_from_a_string)

并找到关于 String to Byte 的 SoF 帖子：[String to byte array in php](https://stackoverflow.com/questions/885597/string-to-byte-array-in-php)

所以在这里我所做的只是为了进行一些测试：

```
function getMD5Hash($input){

for($i = 0; $i < strlen($input); $i++){

    $char = substr($input,$i,1);
    $hex_ary[] = sprintf("%02X", ord($char));}

$TheMD5=md5(implode('',$hex_ary));

for($i = 0; $i < strlen($TheMD5); $i++){

    $char = substr($TheMD5,$i,1);
    $Sec_hex_ary[] .= sprintf("%02X", ord($char));}

$StringBuilder ='';
$i = 0;
$Thelength = count($Sec_hex_ary);

while ($i < $Thelength)
{
    $stringBuilder .= strtolower(sprintf("%02X", ord($Sec_hex_ary[$i])));
    $i++;
}

return $stringBuilder;} 
```

所以我理解（我希望是好的）：

1.  首先调用 md5 提供程序。PHP => 不需要
2.  然后创建一个数组 'byte[]' 'array' ，其中包含以字节表示的 'input' 。
3.  然后在 md5 中编码“数组”。
4.  创建一个新字符串。
5.  然后创建一个包含 'array' 的数组 'byte[]' 'array2'
6.  然后将字符串附加到小写字节的字符串表示中。
7.  返回字符串。

我错了吗 ？如果是（当然）你能解释一下吗？

那么它给了我什么：“echo getMD5Hash('1ca48ad63d48c3adfae0d7af77f27027');”

打印_r($hex_ary) =

```
Array
(
    [0] => 31
    [1] => 63
    [2] => 61
    [3] => 34
    [4] => 38
    [5] => 61
    [6] => 64
    [7] => 36
    [8] => 33
    [9] => 64
    [10] => 34
    [11] => 38
    [12] => 63
    [13] => 33
    [14] => 61
    [15] => 64
    [16] => 66
    [17] => 61
    [18] => 65
    [19] => 30
    [20] => 64
    [21] => 37
    [22] => 61
    [23] => 66
    [24] => 37
    [25] => 37
    [26] => 66
    [27] => 32
    [28] => 37
    [29] => 30
    [30] => 32
    [31] => 37
) 
```

回声 $TheMD5;

```
=> 418868f1137ea82935bbd235133993cf 
```

print_r($Sec_hex_ary);

```
Array
(
    [0] => 34
    [1] => 31
    [2] => 38
    [3] => 38
    [4] => 36
    [5] => 38
    [6] => 66
    [7] => 31
    [8] => 31
    [9] => 33
    [10] => 37
    [11] => 65
    [12] => 61
    [13] => 38
    [14] => 32
    [15] => 39
    [16] => 33
    [17] => 35
    [18] => 62
    [19] => 62
    [20] => 64
    [21] => 32
    [22] => 33
    [23] => 35
    [24] => 31
    [25] => 33
    [26] => 33
    [27] => 39
    [28] => 39
    [29] => 33
    [30] => 63
    [31] => 66
) 
```

回声给我：3333333333333633333333363633333333333636363333333333333333333636

你认为这是正确的吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:59:02.383

*   PHP的“字节数组”是字符串，不需要使用实际的数组
*   如果您的字符串已经以 UTF-8 编码，则没有必要等效于该`Encoding.UTF8.GetBytes(input)`行；如果不是，请使用[`iconv`](http://php.net/iconv)
*   PHP`md5`已经返回一个十六进制字符串，无需从原始输出构建一个

总而言之，与该 C# 函数等效的 PHP 可能是：

```
echo md5($input); 
```

话虽如此，C# 可能有一些错综复杂的地方让我无法理解，这可能会改变结果。

# c# - 网页的状态码

> ID：13064943
> 
> 赞同：0
> 
> 时间：2012-10-25T08:51:44.763
> 
> 标签：c#

我正在尝试从网页中获取结果并避免网络异常，我想在从流中请求结果之前检查状态代码。然而：

```
HttpWebResponse response = (HttpWebResponse)webRequest.GetResponse(); 
```

当我尝试在此使用后获取错误代码时引发异常 `response.StatusCode`

有没有办法避免异常获得`StatusCode`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:59:26.267

只有在调用 GetResponse() 方法后，您才能请求 StatusCode。您需要将 GetResponse() 包装在 try/catch 块中。查看[Check if a url is reachable - Help in optimization a Class](https://stackoverflow.com/questions/5378429/check-if-a-url-is-reachable-help-in-optimizing-a-class)。

如果您只想测试服务器的可达性，那么您可以使用 Ping。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:02:50.267

您可以使用 Ping 从网站获取更多统计信息。（它有点慢，大约需要 1-3 秒左右）

```
public string ExecuteCommandSync(object command)
    {
        try
        {
            // create the ProcessStartInfo using "cmd" as the program to be run,
            // and "/c " as the parameters.
            // Incidentally, /c tells cmd that we want it to execute the command that follows,
            // and then exit.
            var procStartInfo = new System.Diagnostics.ProcessStartInfo("cmd", "/c " + command);

            // The following commands are needed to redirect the standard output.
            // This means that it will be redirected to the Process.StandardOutput StreamReader.
            procStartInfo.RedirectStandardOutput = true;
            procStartInfo.UseShellExecute = false;
            // Do not create the black window.
            procStartInfo.CreateNoWindow = true;
            // Now we create a process, assign its ProcessStartInfo and start it
            var proc = new System.Diagnostics.Process();
            proc.StartInfo = procStartInfo;
            proc.Start();

            return proc.StandardOutput.ReadToEnd();
        }
        catch (Exception objException)
        {
            Console.WriteLine("Error: " + objException.Message);
            return "";
            // Log the exception
        }
    } 
```

[来自：[C# cmd 实时输出](https://stackoverflow.com/questions/11273409/c-sharp-cmd-output-in-real-time) 只是稍微改了一下]

用法如：

```
MessageBox.Show(ExecuteCommandSync("ping www.stackoverflow.com")); 
```

# rally - 迭代中所有任务的每日消耗时间状态报告：按人员过滤

> ID：13064944
> 
> 赞同：1
> 
> 时间：2012-10-25T08:51:56.500
> 
> 标签：rally

就 Rally 而言，我是一个刚出生的婴儿。我迫切需要一种解决方案来满足 Rally 自定义页面编码的要求。

要求如下：

需要一种报告类型的页面。此页面将在每天结束时运行。

报告应该有“一天中所有任务的特定迭代中所有人消耗的小时数”

为了清楚地描述，报告应具有以下标题：

业主姓名 ---- 一天消耗的小时数 ----- 任务

PS：当我向拉力支持团队询问选项时，他们建议我专注于该应用的 App SDK 和 Web Services API。

如果有人可以为此提供解决方案，我将更加感激。我很无助，因为我周围的人不知道 Rally。

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:59:35.803

尝试在“报告”选项卡下添加自定义报告。Select Type == TimeSheet Data == Time Spent Down Down by Iteration, User, and Datae Filter == by Iteration（或者您可以为每个日期更改此设置）。

# c# - 使用对 WCF 的异步调用进行负载测试

> ID：13064946
> 
> 赞同：0
> 
> 时间：2012-10-25T08:51:59.920
> 
> 标签：c#, visual-studio-2010, wcf, unit-testing

在使用 VS2010 的单元测试时，我是新手。我尝试进行单元测试以调用托管的 WCF。代码如下所示：

```
...
[TestMethod]
public void TestMethod1()
{
   WcfClient client = new WcfClient("BasicHttpBinding_IWcf");
   client.GetDataCompleted += new EventHandler<GetDataCompletedEventArgs>(OnGetDataCompleted);
   client.GetDataAsync(arg1, arg2);
}

void OnGetDataCompleted(object sender, GetDataCompletedEventArgs e)
{
   Assert.IfNull(e.Error);
}

... 
```

当我运行它时，它似乎从未启动或完成。我正在考虑将其添加到负载测试中。我是否遗漏了什么来测试对 WCF 的异步调用？我听说过 codeplex 中的 WCF 负载测试，但我会再讲一遍。

同行答案的变体：http: [//justgeeks.blogspot.com/2010/05/unit-testing-asynchronous-calls-in.html](http://justgeeks.blogspot.com/2010/05/unit-testing-asynchronous-calls-in.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:55:22.710

以下代码将测试您的异步方法，您必须在主线程中等待并在那里执行断言：

```
[TestMethod]
public void TestMethod1()
{
  WcfClient client = new WcfClient("BasicHttpBinding_IWcf");

  AutoResetEvent waitHandle = new AutoResetEvent(false); 

  GetDataCompletedEventArgs args = null;
  client.GetDataCompleted = (s, e) => {
    args = e.Error;
    waitHandle.Set(); 
  };

  // call the async method
  client.GetDataAsync(arg1, arg2);

  // Wait until the event handler is invoked
  if (!waitHandle.WaitOne(5000, false))  
  {  
    Assert.Fail("Test timed out.");  
  }  

  Assert.IfNull(args.Error);
} 
```

# php - Apache 无法在 XAMPP 中运行

> ID：13064949
> 
> 赞同：0
> 
> 时间：2012-10-25T08:52:14.477
> 
> 标签：php, apache, xampp

所有正确的 ini 文件中没有任何变化，但**XAMPP**无法正常工作并显示一些 JAVA（请参阅屏幕截图）。这可能是 JAVA 包更新的情况，但我真的不确定我是否这样做了。我怎么能尝试找出错误，因为错误日志文件中似乎也没有任何内容。![在此处输入图像描述](../Images/7b31b7a79e2206f14bb8e5b822d841a2.png)

在问之前我已经搜索了很多:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:10:32.833

你使用Skype ？Skype 自动封锁 80 端口

停止 Skype - 尝试

如果 apache Works - 更改 Skype 设置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:12:36.173

问题似乎是您的 port80 被其他东西占用了。如果您有Skype，请尝试退出**Skype**，或者在浏览器中尝试使用localhost 并查看端口80 是否空闲（即它应该打开xampp）。

或者，您可以使用**cport**查看端口 80 是否空闲。

# linux - 从没有详细信息的目录中获取所有文件

> ID：13064951
> 
> 赞同：7
> 
> 时间：2012-10-25T08:52:18.600
> 
> 标签：linux, ls

我发现

```
ls -AF /var/ |grep \/$ 
```

帮助我在没有更多信息的情况下从目录中找到所有目录。现在我需要完全相反 - 显示所有文件而没有任何进一步的信息，只是每行中的文件名

```
file1
file2
file3 
```

并过滤目录，因为那些 - 我不需要

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2019-09-28T16:18:57.677

最简单的方法：它不是 L 它的数字 - 1

```
$ ls -1 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-25T09:01:17.207

为了查找与某个表达式匹配的文件，存在`find`. 它的手册页非常好，还包括一些有趣的例子。要仅获取目录的文件，您可以使用：

```
find /var -maxdepth 1 -type f -printf "%f\n" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T08:55:47.493

只需使用`-v`开关`grep`来反转匹配：

```
ls -AF /var/ |grep -v /$ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-23T19:27:12.980

`ls -1Ap /var/ | grep -v /`

类似于@choroba 的答案，但如果您不想要它们，此版本将在每一行列出干净的文件名，*而不附加额外的分类指示符。*

-p 标志将 / 附加到目录

-1 标志对于每行列出一个文件总是很方便

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-25T08:58:50.490

或使用 find ：

```
find -maxdepth 1 -type f /var/ 
```

# objective-c - 数据未加载到核心数据数据库中

> ID：13064952
> 
> 赞同：0
> 
> 时间：2012-10-25T08:52:23.333
> 
> 标签：objective-c, multithreading, uitableview, core-data, grand-central-dispatch

我正在尝试将一些数据放入数据库中。我也在其他视图中使用以下代码。有它的工作。但在这个观点上它不起作用。你可以看到下面的代码。

```
- (void)fetchKlassementIntoDocument:(UIManagedDocument *)document
{
        NSLog(@"log");
    dispatch_queue_t fetchKlassement = dispatch_queue_create("klassement fetcher", NULL);
    dispatch_async(fetchKlassement, ^{
        NSLog(@"Log2");
        NSLog(@"log3");
        NSArray *klassement  = [GenkData getRanking];
        [document.managedObjectContext performBlock:^{
       NSLog(@"klassement array %@",klassement);
            for (NSDictionary *genkInfo in klassement ) {
            [Klassement klassementWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext];
                NSLog(@"inserted klassement");
            }
            NSLog(@"Log4");
            [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
            NSLog(@"Log5");
       NSLog(@"Log 6");
         }];
    });
    NSLog(@"Log7");
    dispatch_release(fetchKlassement);
    NSLog(@"Log8");
} 
```

这给出了以下错误日志。

```
2012-10-25 10:50:07.527 RacingGenk[17989:907] log
2012-10-25 10:50:07.528 RacingGenk[17989:907] Log7
2012-10-25 10:50:07.529 RacingGenk[17989:907] Log8
2012-10-25 10:50:07.531 RacingGenk[17989:4f03] Log2
2012-10-25 10:50:07.532 RacingGenk[17989:4f03] log3
2012-10-25 10:50:07.604 RacingGenk[17989:907] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array' 
```

获取数据后，我用这些数据填充了一个表格视图。我认为这就是错误出现的原因。但是有人可以告诉我出了什么问题吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T10:00:01.987

您的代码中的行：

```
NSArray *klassement  = [GenkData getRanking]; 
```

检查 getRanking 方法和分类数组。仅由于这条线而发生崩溃。

为两者写一个日志。希望它能解决你的问题。

# android - 运行应用程序时，如何修改/添加类文件然后运行它？

> ID：13064954
> 
> 赞同：1
> 
> 时间：2012-10-25T08:52:30.067
> 
> 标签：android, auto-update

就我而言，我想下载一个新`.class`文件来更新旧应用程序的某些部分。有可能吗？怎么可能？

或者有没有其他方法可以下载数据并仅更新我的应用程序的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:05:27.980

Fred Chung 不久前在 android 开发者博客上写了一篇关于类加载的精彩文章。

[http://android-developers.blogspot.co.at/2011/07/custom-class-loading-in-dalvik.html](http://android-developers.blogspot.co.at/2011/07/custom-class-loading-in-dalvik.html)

PS：是的，还有其他方法可以更新您的应用程序。只需将其上传到市场:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:57:52.960

我相信不可能对`.class`文件做你想做的事。

但是，您应该以这样一种方式设计您的应用程序，即当您`.class`从服务器下载新数据（而不是文件）时，它应该保存它（可选）并使用任何首选的视图类型呈现它。

# jquery - 如何在 google chrome 扩展页面操作 background.js 中使用 jquery？

> ID：13064957
> 
> 赞同：37
> 
> 时间：2012-10-25T08:52:38.520
> 
> 标签：jquery, google-chrome-extension, content-script

我正在开发一个“页面操作”谷歌浏览器扩展。我的清单有：

```
...
"background": { "scripts": ["background.js"] },
... 
```

在我的 background.js 文件中，我有：

```
function doSomething() {
     alert("I was clicked!");
}

chrome.pageAction.onClicked.addListener(doSomething); 
```

这行得通。现在在我的`doSomething`函数中，我想读取当前页面上的一些数据。使用 jquery 读取数据对我来说会容易得多，这样我就可以轻松地定位我想要的确切数据。如何合并 jquery（最好从谷歌的 CDN 提供）以便我的`doSomething`函数可以访问它？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-01-02T12:39:27.623

中的`"background"`规范`manifest.json`应指定`jquery.js`使其在之前加载`background.js`：

```
...
"background": { "scripts": ["jquery.js","background.js"] },
... 
```

这应该可以完成这项工作。
请记住，js 文件是按照指定的顺序加载的。

测试是否加载了 jquery。

**在后台.js**

```
if (jQuery) {  
    // jQuery loaded
} else {
    // jQuery not loaded
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T23:54:08.720

我不知道这是否是理想的方式，但我能够使用这个问题的帮助来让它工作：[Google Chrome Extensions: How to include jQuery in programatically injection content script?](https://stackoverflow.com/questions/4698118/google-chrome-extensions-how-to-include-jquery-in-programatically-injected-cont) .

显然，“后台”javascript 页面无法访问浏览器中网页的 DOM，因此在后台脚本中加载 jquery 并没有真正意义。相反，我有后台脚本以[编程方式注入](http://developer.chrome.com/extensions/content_scripts.html#pi)jQuery 库，然后将内容脚本注入当前网页。内容脚本（与后台脚本不同）*可以*访问网页上的信息。

**背景.js：**

```
function handleClick(tab) {
    chrome.tabs.executeScript(null, { file: "jquery-1.8.2.min.js" }, function() {
        chrome.tabs.executeScript(null, { file: "content.js" });
    });
}

chrome.pageAction.onClicked.addListener(handleClick); 
```

**内容.js**

```
var text = jQuery('h1').text();
alert('inside content! ' + text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:03:46.160

我的理解是没有必要使用 background.js。您可以将代码放在 popup.js 中。因此，您也不需要在清单文件中包含任何内容。

我建议在 popup.html 中包含 jQuery JS 和 popup.js：

```
<script src="/js/jquery-1.8.1.min.js"></script>
<script src="/js/popup.js"></script> 
```

然后在 popup.js 中你应该能够访问 jQuery，所以你的 eventHandler 看起来像这样：

```
$(document).ready(function(){
 $('#anyelement').on('click', doSomething);

 function doSomething(){
   alert ('do something');
 };
}) 
```

我不认为你为什么想要 jQuery 的 CDN，所有文件都将托管在用户的机器上。

我希望它有帮助，罗布

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T09:18:33.720

在清单文件中，确保在`content_scripts`块中引用本地 jquery.js 文件（无论它叫什么）：

```
"content_scripts": [{
    "js": ["jquery.js"]
}] 
```

这将确保它嵌入在 crx 文件中，并且您的其他脚本可以访问它。

# android - 为pdf android添加注释

> ID：13064958
> 
> 赞同：5
> 
> 时间：2012-10-25T08:52:42.247
> 
> 标签：android

我想在android中显示pdf，因为我有一些库，如vudroid，pdfreader，但所有这些库都将pdf页面显示为图像我想实现这样的功能，用户可以查看pdf并从pdf中选择文本使用颜色更改文本的背景颜色选择器并保存现有的 pdf，我已经引用了一些库，但它们不提供此类功能，如果此类库可用，请提供一些想法

我使用了以下库

```
Android PDF Viewer
APDFViewer
droidreader 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-15T22:00:58.993

免责声明：我是 PSPDFKit 团队的开发人员

[PSPDFKit for Android](https://pspdfkit.com/blog/2015/pspdfkit-android-2-0/)最近作为 2.0 版发布，包括注释编辑支持。我们花了很多时间来简化注释编辑——无论是对于将 PDF 集成到他们的应用程序中的开发人员，还是对于最终用户。以下是如何使用 PSPDFKit 创建 NoteAnnotation 的示例：

```
PSPDFDocument document =  ...

// Create the annotation.
final int pageNum = 3;
final RectF pagePosition = new RectF(10, 10, 30, 30);
final NoteAnnotation annotation = new NoteAnnotation(pageNum, pagePosition, "This is a note with cross icon!", CROSS);

// Attach the annotation to the document.
document.getAnnotationProvider().addAnnotationToPage(annotation); 
```

还有一堆现成的 UI 组件用于注释创建和编辑。PSPDFKit 是一种商业产品，但我们提供演示版本，可[在我们的网站上索取](https://pspdfkit.com/#trynow)。

# javascript - x 轴超过 div 宽度

> ID：13064992
> 
> 赞同：0
> 
> 时间：2012-10-25T08:54:15.097
> 
> 标签：javascript, html, css, jqplot

我正在使用`jqplot`. 如果 x 轴的最大值不是太大，一切似乎都很好，如下所示： ![在此处输入图像描述](../Images/1045a0a305245d728fe777a04c208e25.png)

但如果它很大，我会得到这个： ![在此处输入图像描述](../Images/9161853b811e42f2048e32c1f1250635.png)

x 轴似乎比我用来绘制图表的 div 更宽。

此 div 具有以下样式：

```
.barChart {
    min-width: 735px;
    margin-left: 15px;
    height: 200px;
    color: #333;
    background: white;
    overflow: auto;
    border-top: 2px solid #369;
    border-bottom: 2px solid #369;
    line-height: 14px;
    font-size: 12px;
} 
```

那么，如何使 x 轴不比带有图表的 div 宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:28:32.490

您可以应用特定的图表大小。我在这里提出了一个关于这个主题的问题：[JqPlot：为不包括 y 轴标签的图形区域设置固定高度值](https://stackoverflow.com/questions/11229577/jqplot-set-a-fix-height-value-for-the-graph-area-not-including-y-axe-labels)

解决方案是使用精确的图表大小重新绘制，如下所示：

```
var w = parseInt($(".jqplot-yaxis").width(), 10) + parseInt($("#chart").width(), 10);
var h = parseInt($(".jqplot-title").height(), 10) + parseInt($(".jqplot-xaxis").height(), 10) + parseInt($("#chart").height(), 10);
$("#chart").width(w).height(h);
plot.replot(); 
```

希望有帮助

# opengl-es - 使用 OpenGL ES 2.0 绘制顶点法线

> ID：13064995
> 
> 赞同：1
> 
> 时间：2012-10-25T08:54:40.680
> 
> 标签：opengl-es, opengl-es-2.0, vertex

我想将顶点法线显示为源自顶点并在与基于指定比例的距离的法线相同的方向上延伸的线。

我能看到的最简单的方法是计算 CPU 上模型空间中每个法线的起点和终点，使用模型视图矩阵的逆转置将每个法线转换为视图空间，并将它们绘制为显卡。

有一个更好的方法吗？我想将顶点位置和法线传递到着色器中，以便它可以计算线位置，但这似乎更复杂，我相信需要在着色器中添加一个分支。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T11:47:50.723

如果您需要可视化法线以进行测试，您可能需要将法线*xyz*坐标设置为`gl_FragColor`. 不是很直观，但是当您查看这些颜色时，会给出法线正确性的总体印象。

我们已经使用这种技术来检查将法线加载到 VBO 的正确性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:55:10.677

在 OpenGL ES 2.0 中，如果没有 CPU 内部的一点额外计算，这绝对是不可能的。您不能只渲染所有顶点并为每个顶点神奇地创建一条线。因此，即使基于法线计算顶点着色器内的顶点坐标，您仍然必须为网格的每个原始顶点放入一条线（因此**有两个**顶点）。因此，这至少需要对您的顶点数据进行一些重组。

您也是正确的，这将要求您以某种方式消除着色器内线的起始顶点和结束顶点之间的歧义。但是您不一定需要分支，只需将起始顶点的法线设置为全 0（假设在渲染线时不需要其他任何东西的法线，但线通常不会被点亮）：

中央处理器：

```
for each original vertex:
    generate two line vertices with attributes of original vertex
    set normal attribute of first line vertex to 0-vector
...
render all lines using following shader 
```

显卡：

```
attribute vec3 position;
attribute vec3 normal;
...
void main()
{
    ...
    vec3 modelPos = position + normal;
    gl_Position = projMat * modelviewMat * vec4(modelPos, 1.0);
} 
```

但我不认为这真的会给你带来任何好处，因为你必须以某种方式告诉着色器两个线端点之间的差异，一旦你这样做，你需要为 CPU 上的每条线生成两个不同的顶点。一旦你这样做了，你就可以根据法线改变第二行顶点的坐标，而不是在着色器中进行计算。那个小小的 vec3-saxpy 应该不会花你太多钱。但也许着色器方法更快，试试吧。

在桌面 GL 3+ 中情况会有所不同，您可以在其中使用几何着色器。您只需将所有原始顶点渲染为点，并在几何着色器中为每个点生成一条线，根据该点的法线计算其坐标。那么实际上不需要任何类型的 CPU 计算。但不幸的是 ES 2 没有几何着色器（虽然不知道 ES 3）。

# rss - RSS 提要项仅链接回我博客的主页，而不是单个帖子

> ID：13064998
> 
> 赞同：1
> 
> 时间：2012-10-25T08:54:43.560
> 
> 标签：rss

我创建了一个 RSS 提要，但是当有人通过 Google 或 Yahoo! 订阅它时 显示的唯一链接将他们带到博客。当有人点击链接时，它会将他们带到我的博客，而我想在没有人点击链接的情况下显示博客内容。

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<rss version="2.0">
<channel>
  <title>cmg</title>
  <link>http://www.example.com/blog</link>
  <description>cmg</description>
  <item>
    <title>cmg</title>
    <link>http://www.example.com/blog</link>
    <description>cmg</description>
  </item>
</channel>

</rss> 
```

我还把这个链接放在我网站的正文而不是头部，因为我无法`<head>`使用 CMS，它不允许我输入除 CSS 或 JavaScript 之外的任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T04:37:37.253

创建 RSS 提要时，您必须确保每个`<item>`节点都指向特定的帖子。频道元素将使用返回主页的链接和简短描述来描述整个站点。但需要精心制作的是每个帖子将显示的单个项目。

在您的情况下，您的项目仅显示主页的链接和内容，或复制您在`<channel>`父元素中拥有的内容。

包含两个帖子的示例 RSS 提要如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<rss version="2.0">
<channel>
  <title>Example</title>
  <link>http://example.com/blog</link>
  <description>Description of entire site</description>
  <item>
    <title>Example blog post</title>
    <link>http://example.com/blog/example-blog-post</link>
    <description>One example straight from the individual</description>
  </item>
  <item>
    <title>Another post</title>
    <link>http://example.com/blog/another-post</link>
    <description>Another example of a single post</description>
  </item>
</channel>
</rss> 
```

在上面的示例中，您会注意到每个节点`<item>`都有一个唯一`<link>`节点，该节点指向该帖子的永久链接以及它的描述。这些是分开的，与`<channel>`整体的不同。

当用户随后订阅您的提要时，它会将帖子加载到他们的内容聚合器中，他们将能够阅读您的帖子，而无需点击返回该站点。

您可以在页面上的任何位置拥有指向 RSS 的链接。如果您将其添加为`<link>`标题中的 a，那么它将允许可以检测提要的浏览器显示相关图标，但如果您可以提供一种访问文件并推广它的方法，则没有必要。

# bash - 如何使用 Bash/Sed/Awk 在文件夹中的每个 gz 上运行 RegExp Sub？

> ID：13064999
> 
> 赞同：2
> 
> 时间：2012-10-25T08:54:46.040
> 
> 标签：bash, sed, awk

我在一个文件夹中有一堆压缩文件，其中每个文件的每一行都是以下形式：

```
thing, thing2, something, thing4, other_thing, etc... 
```

我要做的就是用制表符替换每个文件每行中的前两个逗号，以便每一行看起来像：

```
thing\t thing2\t something, thing4, other_thing, etc... 
```

这些文件有很多，所以我只是在寻找最快、最轻松的方式来运行这个巨大的替代品。最后，我希望所有相同的文件都具有相同的文件名，并且只有一个替换。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:04:51.583

未测试：

```
#!/bin/bash
[[ -d $1 ]] || exit 1
for gz in "$1"/*.gz ; do
    zcat "$gz" | sed 's/,/\t/;s/,/\t/' > "$gz".tmp
    gzip "$gz".tmp
    mv "$gz".tmp.gz "$gz"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:45:18.963

你可以用 GNU find 和 GNU parallel 来做到这一点：

```
find . -maxdepth 1 -type f -print0 | parallel -0 \
  gzip -dc {} \| sed "s/,/$'\t'/; s/,/$'\t'/" \| gzip \> {}.tmp \; mv {}.tmp {} 
```

并行运行`--dry-run`，看看会发生什么。