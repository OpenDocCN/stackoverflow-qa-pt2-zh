# StackOverflow 问答 15659000-15659999

# assembly - x86 程序集中 mov 命令的有效性

> ID：15659001
> 
> 赞同：1
> 
> 时间：2013-03-27T12:39:02.440
> 
> 标签：assembly, x86, mov

我在课堂上了解到，将 16 位寄存器移动到 8 位寄存器不是有效指令。例如，此命令无效：

```
mov al,bx 
```

但是有没有这样的指令：

```
mov bx,al 
```

或者两个寄存器的大小必须相等？如下所示：

```
mov al,bl        
mov bx,ax 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:40:44.623

> 我可以写命令吗：mov bx,al

不，但你可以

```
movsx bx,al  ; sign-extend al into bx
             ; the upper half of bx will be filled with the most significant
             ; bit of al. For example 0x40 becomes 0x0040, while 0xC0
             ; becomes 0xFFC0\. 
```

或者

```
movzx bx,al  ; zero-extend al into bx
             ; the upper half of bx will be filled with zeroes 
```

同样从 16 位通用寄存器到 32 位通用寄存器。

# javascript - 早午餐配置：javascript 文件排除 *.min.js 文件

> ID：15659008
> 
> 赞同：3
> 
> 时间：2013-03-27T12:39:35.310
> 
> 标签：javascript, node.js, brunch

我了解 brunch 如何处理 javascript 文件，将它们组合成单独的输出文件：

```
 files:
    javascripts:
      joinTo:
        'javascripts/app.js': /^app/
        'javascripts/vendor.js': /^vendor/
        'test/javascripts/test.js': /^test(\/|\\)(?!vendor)/
        'test/javascripts/test-vendor.js': /^test(\/|\\)(?=vendor)/ 
```

例如，第二行获取 /vendor/ 文件夹中的所有 javascript 文件并生成 vendor.js

正则表达式 (/^vendor/) 指定的文件夹路径是否正确？有什么方法可以让正则表达式也适用于文件名？例如，如果有 jquery.js 和 jquery.min.js，我只想包含 jquery.js 文件。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T03:25:03.453

您可以使用函数来测试路径。有了它们，东西应该很简单：

```
joinTo:
  'javascripts/vendor.js': (path) ->
    /^vendor/.test(path) and not /\.min\.js$/.test(path) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:57:31.853

您可以提供要忽略的路径。正则表达式应匹配文件的完整路径，包括文件名。

```
paths:
  public: '../deploy'
  ignored: 'vendor/styles/bootstrap'
  test: 'spec' 
```

> 忽略的键：字符串、正则表达式、函数或它们的数组。将检查早午餐编译器将忽略的文件。

但正如 Amberlamps 建议的那样，您可以使用正则表达式排除文件中的 *.min.js 文件。

PS：从未测试过它，但在某处的[文档](https://github.com/brunch/brunch/blob/master/docs/config.md)中提到它`/_spec\.\w+$/`与 user_spec.js 匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:51:00.697

我以前从未使用过 brunch，但如果它使用 RegExp 查找特定路径，您可以使用以下命令排除 *.min.js 文件：

```
/^((?!vendor\/.*\.min\.js).)*$/ 
```

我使用以下答案作为参考：[正则表达式匹配不包含单词的字符串？](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)

# ruby-on-rails - RoR：.create nils

> ID：15659010
> 
> 赞同：0
> 
> 时间：2013-03-27T12:39:47.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

（对不起我的英语）如果我想用`:name`和`:date`参数上传一条新记录，这就是我发现的：

**控制器：**

```
 class ActorController < ApplicationController
    def index
    end

    def new
      @actor = Actors.create
    end

    def create
      @actor = Actors.create(params[:actors])
      if @actor.save
        redirect_to actor_path, :notice => "Your actor was saved."
      else
        render "new"
      end
    end
  end 
```

**型号：（actors.rb）**

```
 class Actors < ActiveRecord::Base 
    attr_accessible :birth, :name
  end 
```

**和视图：（new.html.erb）**

```
<%= form_for(@actor) do |a| %>
  <%= a.text_field :name %>
  <%= a.text_field :birth %>
  <%= a.submit %>
<% end %> 
```

**我在本地服务器控制台中的输出是：**

```
Started PUT "/actor/40" for 127.0.0.1 at 2013-03-27 13:38:15 +0100
Processing by ActorController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BKhrP1Rfkco7r05wPT758M3CHQXRP5l5jcul77oTLPw=", "actors"=>{"name"=>"Bunny", "birth"=>"19/21/21"}, "commit"=>"Update Actors", "id"=>"40"}
   (1.2ms)  begin transaction
  SQL (0.7ms)  INSERT INTO "actors" ("birth", "created_at", "name", "updated_at") VALUES (?, ?, ?, ?)  [["birth", nil], ["created_at", Wed, 27 Mar 2013 12:38:15 UTC +00:00], ["name", nil], ["updated_at", Wed, 27 Mar 2013 12:38:15 UTC +00:00]]
   (197.8ms)  commit transaction
   (0.2ms)  begin transaction
   (0.1ms)  commit transaction
Redirected to http://localhost:3000/actor/40
Completed 302 Found in 209ms (ActiveRecord: 200.0ms) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:48:18.900

请编辑以下内容：

**1）编辑您的模型：**

```
class Actor < ActiveRecord::Base  # Class name should be Singular
  attr_accessible :birth, :name
end 
```

**2）编辑你的控制器：**

```
 class ActorsController < ApplicationController # Note Here the controller name should be plural without space
    def index
    end

    def new
      @actor = Actor.new  # In the new action, it should be classname.new not create
    end

    def create
      @actor = Actor.create(params[:actor]) # Here also the Actor class name should be singular
      if @actor.save
        redirect_to actor_path, :notice => "Your actor was saved."
      else
        render "new"
      end
    end
  end 
```

`PS:`

**1）**在视图文件夹名称也应该是复数，所以你的文件夹名称是`app/view/actors`. **2）**更改您的控制器名称，如`actors_controller`. **3）**在您的路线中，它应该是`resources :actors`. **4）**您需要将您的代码与正确的缩进对齐，以找到您从哪里开始和在哪里结束。这是开始编码的好方法。它会解决你 50% 的问题，找出你做错的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:47:45.713

将您的新操作代码更改为：

```
@actor = Actors.new 
```

并确认您的模型类是 Actors 它可能有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:58:49.133

`@actor = Actors.create`是错误的，因为它将 @actor 变量分配给新创建的 Actors 对象。这就是您`Processing by ActorController#update as HTML`在输出中看到的原因，因为该对象已经创建并且正在尝试更新它。

您应该将其更改为`@actor = Actors.new`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:42:10.287

在您的控制器操作中，您的参数名称错误：

```
Actors.create(params[:movie]) should be Actors.create(params[:actors]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T12:49:08.490

这里有很多问题：

1.  控制器名称应为复数，您必须将文件重命名为`actors_controller.rb`

2.  模型名应该是单数，也看你把文件名改成`actor.rb`

3.  新动作应该是`@actor = Actors.new`not `create`，#create 是 #new 和 #save 的较短版本。

4.  参数哈希应该是`params[:actor]`

> ```
> class ActorsController < ApplicationController   
>      def index   
>      end
> 
>      def new
>         @actor = Actor.new   
>      end
> 
>      def create
>         @actor = Actor.create(params[:actor])
>         if @actor.save
>             redirect_to actor_path, :notice => "Your actor was saved."
>         else
>             render "new"
>         end   
>      end 
>   end 
> ```

还要更改 Actor.rb 中的模型名称，并确保这是模型的名称。同样在这种情况下，您应该检查您的迁移。

```
 class Actor < ActiveRecord::Base 
    attr_accessible :birth, :name
  end 
```

# meteor - 在连续渲染的元素后面单击

> ID：15659014
> 
> 赞同：0
> 
> 时间：2013-03-27T12:40:06.293
> 
> 标签：meteor

我正在使用以下内容渲染视频进度条：

```
<div class="video-timeline">
  {{#isolate}}
    <div style="width: {{progressBarWidth}}" class="video-progress-bar"></div>
  {{/isolate}}
</div> 
```

进度条适合时间线，并随着视频时间的推移向右延伸（基于会话变量）。目标是观察时间轴上的点击，以便更改播放位置。

正确观察进度条右侧时间线上的单击事件。但是，在播放视频时（并且不断呈现进度条），单击进度条本身会很少冒泡到时间线单击处理程序。

**我如何观察这些事件，或者有更好的方法来完全做到这一点？**

**更新：**如果您绝对需要一个每秒更新多次并由流星控制的元素，则使用覆盖（如 datacarl 建议）可能是最好的。这对我有用，但是，我最终为模板的特定部分恢复为基于 jQuery 的解决方案。尽管我不喜欢混合使用 jQuery 事件和流星事件，但 jQuery 提供了一种响应速度更快、更不容易出错的方式来更新进度条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:34:27.413

我认为处理此问题的最简单方法是将 div.progress-bar-overlay 绝对定位在 div.video-progress-bar 顶部并观察 .progress-bar-overlay 上的点击。给它与 .video-timeline 相同的高度和宽度。这样您就不必处理用户是点击 .video-timeline 还是点击 .video-progress-bar。

# java - 如何检查两个纬度和经度坐标之间的距离？

> ID：15659015
> 
> 赞同：0
> 
> 时间：2013-03-27T12:40:08.750
> 
> 标签：java, android, android-location

我正在使用以下代码段获取用户的最佳当前位置：

```
 LocationManager ltrLocationer = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    Location locLocation = ltrLocationer.getLastKnownLocation(ltrLocationer.getBestProvider(criteria, true)); 
```

我有两个`Double`分别包含纬度和经度的对象。我想检查当前坐标与上述值之间的距离（以米为单位）。我怎样才能做到这一点？

这听起来像是一件很简单的事情，但我找不到一个例子来说明这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:07:04.277

Location 对象有一个距离方法。使用它，它会为您计算。如果您的坐标为双精度，请使用静态函数 Location.distanceBetween

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:44:22.513

看看这里：[GPS坐标到米](http://www.movable-type.co.uk/scripts/latlong.html) 这里还有一篇关于用于进行计算的方程的维基百科文章：[Haversine公式](http://en.wikipedia.org/wiki/Haversine_formula)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:41:53.533

检查此方法，这将为您提供`distance in a straight line`.

```
public static double distFrom(double lat1, double lng1, double lat2, double lng2) {
double earthRadius = 3958.75;
double dLat = Math.toRadians(lat2-lat1);
double dLng = Math.toRadians(lng2-lng1);
double sindLat = Math.sin(dLat / 2);
double sindLng = Math.sin(dLng / 2);
double a = Math.pow(sindLat, 2) + Math.pow(sindLng, 2)
        * Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2));
double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
double dist = earthRadius * c;

return dist;
} 
```

如果你想要一个`road distance`这个操作有点困难，并且会涉及对`Google Direction API`服务的调用。

# actionscript-3 - AS#3 数组未清除其内容

> ID：15659016
> 
> 赞同：0
> 
> 时间：2013-03-27T12:40:10.213
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

首先，我将简要说明：

我有 2 个数组，第一个 Array:holder，第二个 Array:Clips。第一个数组是作为网格模式的动态空框，通过循环将每个项目推入数组并添加到舞台//仅用于位置 x,y

第二个数组：Clips是动态加载的SWF电影，一共10个这些加载的SWF剪辑是“addChild”到Holder Array中的，所以这些剪辑会在网格模式中同时被推入数组Clips中，供参考示例

```
 Clips[1].x = 50 ; // this works fine 
```

所以我知道我的剪辑在那里，正确引用。但是 icant 似乎做的是从数组中删除所有内容：剪辑

```
 var len:int = Clips.length;
      for( var i:int = 0; i < len; i++ ) {
      this.removeChild( Clips[i] ) ;        
      } 
```

我也尝试过拼接，结果相同，只是要么抛出错误，要么什么都不做，无论哪种方式，我的项目都没有删除/删除。

简单的解释方法我在一个数组中加载 15 个项目，每次按下按钮时我都想清除该数组并重新填充另外 15 个项目，这永远每 10 秒发生一次。

我可以重新填充没问题，它将继续在旧内容上加载更多内容，但我希望清除旧内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:14:20.473

为防止出现错误，请修改您的条件：

```
if(this.contains(Clips[i]){
    this.removeChild(Clips[i]);
} 
```

如果它仍然不起作用，您可能从错误的剪辑中删除，即不是“这个” - 试试这个：

```
if(Clips[i] != null && Clips[i].parent != null){
        Clips[i].parent.removeChild(Clips[i]);
    } 
```

（`Clips[i] != null`添加了部分条件以检查以下评论中出现的错误）

这将检查剪辑是否指定了父级（如果有，则它在另一个剪辑内）并专门从该剪辑中删除它，而不仅仅是“this”。

..而且我还建议使用 Vector，而不是 Array - 您可以将任何类型的值放入数组中，因此如果您将非 DisplayObject 放入其中，当您尝试删除 if 时会出现错误从舞台：

```
var clips:Vector.<DisplayObject> = new Vector.<DisplayObject>(); 
```

而不是：

```
var clips:Array = []; 
```

除了上面庞大的声明之外，这个函数在大多数方面都与数组完全一样（推送、拼接、使用方括号表示法的引用元素等函数`clips[0]`），但只会让您将某些类型的对象/变量放入其中 - 在在这种情况下，DisplayObject。如果你试图在里面放一个'int'，它不会让你 - 它也运行得更快！它们在任何情况下都值得使用，但在这里它们可能会有所帮助，以防万一您在没有意识到的情况下将其他东西放入该数组中（我已经做过很多次了）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:10:30.597

尝试这个。如果它有效，则意味着您试图将孩子从错误的父母那里移除。在这种情况下，您应该收到运行时错误。如果以下代码不会导致错误但屏幕上仍有内容，那么您的代码在某处复制了内容。如果执行加载的代码被调用两次，就会发生这种情况。

```
 var len:int = Clips.length;
      for( var i:int = 0; i < len; i++ ) {
      Clips[i].parent.removeChild(Clips[i]);        
      } 
```

# android - Android：如何使 NFC 标签只为用户准备好并且对我可写？

> ID：15659018
> 
> 赞同：5
> 
> 时间：2013-03-27T12:40:16.830
> 
> 标签：android, tags, nfc, readonly, ndef

我有一个设计个性化标签的应用程序，当它被安卓手机检测到时，会启动另一个包含一些内容的应用程序。一切正常，我知道如何制作只读 nfc 标签。问题是，我想让 NFC 标签只能由其他应用程序的用户读取。但我也希望，如有必要，修改这些标签以便重写。但我想阻止用户自己做。这就是为什么 ndef.makeReadOnly() 不适合我..

有人可以帮助我吗？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T12:38:05.040

这在一定程度上取决于您将使用的确切标签。Android 支持的用于存储 NDEF 消息的标准 NFC 论坛标签类型没有为此定义特定功能。所以 Android API 也不提供它。只有`makeReadOnly()`，这在大多数情况下使标签不可逆地只读。

但是，当您查看标签内部实际实现所需 NFC 功能的芯片时，它们通常会提供更多功能。这些额外功能可能包括写入访问控制，允许按照您的意愿配置芯片。

一些示例（全部由 NXP 制造，因为我最熟悉这些示例）：

1.  MIFARE Classic：内存扇区受 2 个密钥保护。一个键可配置为只读，而另一个可用于写入内存。注意：并非所有 Android 设备都可以访问这些！
2.  MIFARE Ultralight C：可以提供额外的密码保护以防止覆盖
3.  MIFARE DESFire：可配置多个认证密钥和访问权限，包括无密钥只读访问
4.  ICODE SLI(X)-S：可以提供额外的密码保护以防止覆盖

这些标签中的大多数通常都可以在线销售。不过，您将不得不在 Internet 上搜索一下以收集有关如何进行配置的所有信息。大多数情况下都有可用的 PC 软件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:53:34.803

使 NFC 标签“只读”的唯一 100% 方法是调用 makeReadOnly()，但这是不可逆的。

您可以使用“开箱即用”的解决方案，例如：

1.  不要在 NFC 标签上写入数据，而是将其保存在本地（如果数据仅限于一台设备）或服务器/云（如果数据是全局的）

2.  将您的 NFC 标签 ID (getByteArrayExtra(NfcAdapter.EXTRA_ID)) 与您保存的数据相关联

3.  当读取 NFC 标签时，获取其 ID 并通过适当的来源（本地或云数据库）找到适当的数据

.. 如果第二个应用程序是“第三方应用程序”并且不能与上层灵魂一起工作，您可以注册自己的 NFC 阅读应用程序（使用正确的 mimeType 过滤器的意图），然后使用 sendIntent 将您的数据（第 3 点）传递给主应用程序（或类似的支持方法）。

希望能帮助到你！

# php - 将值从表单发送到 html 标记计数器

> ID：15659019
> 
> 赞同：0
> 
> 时间：2013-03-27T12:40:18.940
> 
> 标签：php, html, forms, count, send

我正在寻找一些代码来执行以下操作：

包含单个文本字段和提交按钮的表单必须将文本字段的值发送到登录页面，该页面会自动计算该页面包含多少个 html 标记。

例如，如果文本字段声明 stackoverflow.com，则登录页面应显示 (H1 tags = 20)，并带有更多参数。

这是怎么做到的？我知道如何制作表单，但我不知道如何让它将其值发送到登录页面。

```
<form action="landingpage.php/" method="post">
      The URL
<input type="text" name="cf_name">
<input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:13:03.230

要从表单访问数据，取决于方法。由于您的代码显示了一条帖子消息，因此您只需通过用户 $POST_['cf_name'] 在登录页面上的 php 中访问它。

要了解更多信息，您可以查看： 关于 post 方法的[http://w3schools.com/php/php_post.asp](http://w3schools.com/php/php_post.asp)和关于 get 方法的[http://w3schools.com/php/php_get.asp 。](http://w3schools.com/php/php_get.asp)

[php 手册](http://www.php.net/manual/en/index.php)本身也是一个宝贵的资源。

至于计算标签，不确定你想要达到什么目的。如果您正在计算您创建的页面中的标签，只需创建一个变量并在每次将特定标签放在页面上时添加到它。然后，您可以将这些值放在表单的隐藏字段中，以传递到您的登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:42:58.277

这段代码是您问题的完美答案。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="GET">
  Type In Something: <input name="random-info" type="text" size="25">
  <input type="submit" value="Submit">
</form> <br> 

<?php
  echo "You Typed: " . $_GET['random-info'];
?> 
```

您将方法放入 url，然后您可以在另一个页面上使用它们。

# php - 来自 4 个不同表的查询结果，只有 1 个已知值

> ID：15659020
> 
> 赞同：-2
> 
> 时间：2013-03-27T12:40:22.377
> 
> 标签：php, mysql, oop

现在我正在处理一个查询，对于我的大脑来说，这是一个超载，因为我刚刚开始使用 php 和 mysql。

我有 4 个表“研讨会、订阅、取消订阅、用户”，我需要所有这些表中的一些数据。“研讨会，标题”，“订阅，活动，日期时间”，“用户，名字，姓氏”和“取消订阅，原因”现在我只有一个值可以用来获取所有这些数据，这是现在的研讨会 ID想知道这是否足以从所有表中获取数据。

我真的迷路了，我希望有人能帮助我度过这个烂摊子。

提前致谢

我从内部连接、左连接等中获得了一些知识。

这是我的 ERD [http://img594.imageshack.us/img594/8923/erdk.png](http://img594.imageshack.us/img594/8923/erdk.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:58:15.273

这看起来怎么样？在ipad上打字，很抱歉错别字。

```
Select
    Sem.title,
    Sub.active,
    Sub.datetime,
    U.firstname,
    U.lastname,
    Unsub.reason

  From
    seminar sem

    Inner join  Subscription sub  on sub.seminar_id = sem.id

    Inner join user u on sub.user_id = u.id

    Left join unsubscription unsub on sub.Id = unsub.subscription_id

   Where
     Sem.id = your-search-value-here 
```

我假设不会总是取消订阅，所以这是该表的左连接。

所有其他人都是内在的......这意味着没有用户和研讨会的订阅是不完整的。

但是，如果您想要有关研讨会的详细信息，无论用户是否订阅，那么您对用户的加入也应该从 INNER 更改为 LEFT。

如果一个研讨会可以在没有任何订阅的情况下存在，并且您希望此类研讨会包含在结果中，您还应该将订阅加入更改为 LEFT。

请注意，从左联接表中选择的任何字段（在该表上没有为该研讨会获取结果）都将为空。

# c# - 属性中的“属性：”一词是什么

> ID：15659024
> 
> 赞同：11
> 
> 时间：2013-03-27T12:40:30.903
> 
> 标签：c#, properties, attributes

你能解释一下“财产：”这个词是什么意思吗？

```
[property: NotifyParentProperty( true )]
public string Filename
{
  get;
  set;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T12:43:17.310

这意味着将属性应用于属性。
在这种特定情况下，它是多余的，可以省略。

这种元素定义了[属性目标](http://msdn.microsoft.com/en-us/library/b3787ac0.aspx)，并且在目标可能不明确时最有用，例如目标`method`和`return`. Visual Studio 还使用作为许多项目模板一部分`assembly`的目标生成属性。`AssemblyInfo.cs`

更多信息和可能的属性目标列表：
[*消除歧义属性目标 (MSDN)*](http://msdn.microsoft.com/en-us/library/b3787ac0.aspx)

# actionscript-3 - 在 flex 中将有符号整数转换为 8 位十六进制

> ID：15659025
> 
> 赞同：1
> 
> 时间：2013-03-27T12:40:31.363
> 
> 标签：actionscript-3, apache-flex, flash-builder

如何在 flex 中将 int 类型转换为 8 位十六进制十进制

我需要一个在 c# [ ToString("X8") ] 中类似的函数。这个函数在 c# 中完成了这项工作。但是 flex 中的选项是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:00:04.280

如文档中所述，它几乎相同：

```
var myInt:int = 255;
var hex:String = myInt.toString(16);
trace(hex);  //outputs "ff" 
```

请参阅[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/int.html#toString()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/int.html#toString())
如果您想要的是颜色：文档也描述了如何处理这种情况。

* * *

但是，没有添加前导零的内置方法。您可以使用这样的方法来做到这一点：

```
public function pad(s:String, pattern:String="0", minChars:int=8):String {
    while (s.length < minChars) s = pattern + s;
    return s;
}

trace(pad(hex)); //000000ff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-03T01:33:22.347

*注意：这适用于 6 位十六进制颜色，但可以轻松修改为任意数量的十六进制数字。*

找到了很多输出填充的十六进制值的方法，这些值严重依赖字符串填充。

我对其中的任何一个都不满意，所以这就是我想出的：（作为奖励，它适合一行）您甚至可以通过删除 toUpperCase() 调用来缩短它，因为大小写真的无关紧要。

```
"0x"+ (i+0x1000000).toString(16).substr(1,6).toUpperCase() 
```

如果您想将其设置为黑色和白色并将其放入函数中：

```
 public static function toHexColor(i:Number):String {
      return i<0 ? "0x000000" : i>0xFFFFFF ? "0xFFFFFF" : "0x"+ (i+0x1000000).toString(16).substr(1,6).toUpperCase() ;
    } 
```

这是一个带有注释的扩展版本：

```
 public static function toHexColor(i:Number):String {
      //enforce ceiling and floor
      if(i>0xFFFFFF){ return "0xFFFFFF";}
      if(i<0){return "0x000000";}
      //add the "magic" number 
      i += 0x1000000;   
      //append the 0x and  strip the extra 1
      return "0x"+ i.toString(16).substr(1,6).toUpperCase();
    } 
```

# xslt - XSLT - 复制孙子重新排序

> ID：15659031
> 
> 赞同：1
> 
> 时间：2013-03-27T12:40:51.953
> 
> 标签：xslt

我对 XSLT 很陌生，我试图复制我已经拥有的现有 XML 文件，但元素已重新排序，但在尝试重新排序孙子时我卡住了。

假设我有这个输入：

```
<grandParent>
    <parent> 
        <c>789</c>
        <b>
           <b2>123</b2>
           <b1>456</b1>
        </b>
        <a>123</a>
    </parent>
    ....
</grandParent> 
```

我想要做的是获得相同的 XML 文件，但将标签的顺序更改为 a、b、c，其中 b = b1、b2 按该顺序。所以我从 XSLT 文件开始：

```
<xsl:template match="node()|@*">    <- This should copy everything as it is
    <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
</xsl:template>
<xsl:template match="grandParent/parent"> <- parent elements will copy in this order
    <xsl:copy>
        <xsl:copy-of select="@*"/>
        <xsl:copy-of select="a"/>
        <xsl:copy-of select="b"/>
        <xsl:copy-of select="c"/>
    </xsl:copy>
</xsl:template> 
```

但是 "xsl:copy-of select="b"" 复制指定的元素（b2，b1）。我尝试将另一个 xsl:template 用于“grandParent/parent/b”，但无济于事。

也许我没有以正确的方式做事......任何提示？

谢谢！

**解决方案 - 感谢 Nils**

您的解决方案工作得很好 Nils，我只是对其进行了更多定制以适应我当前的场景，其中“b”是可选的并且标签的名称可能不相关。最终的代码是这样的：

```
<xsl:template match="node()|@*">    <- This should copy everything as it is
    <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
</xsl:template>
<xsl:template match="grandParent/parent"> <- parent elements will copy in this order
    <xsl:copy>
        <xsl:copy-of select="@*"/>
        <xsl:copy-of select="a"/>
                    <xslt:if test="b">
                        <b>
                        <xsl:copy-of select="b1"/>
                        <xsl:copy-of select="b2"/>
                        </b>
                    </xslt:if>
        <xsl:copy-of select="b"/>
        <xsl:copy-of select="c"/>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:45:21.827

使用[`xsl:sort`](http://www.w3schools.com/xsl/el_sort.asp).

以下代码不在我的脑海中，可能无法正常工作；不过，它背后的想法应该很清楚。

```
<xsl:template match="node()|@*">    <- This should copy everything as it is
    <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
</xsl:template>

<xsl:template match="grandParent/parent"> <- parent elements will copy in this order
    <xsl:copy>
    <xsl:copy-of select="@*"/>
    <xsl:copy-of select="a"/>
    <b>
        <xsl:for-each select="b/*">
            <xsl:sort select="text()" />
            <xsl:copy-of select="." />
        </xsl:for-each>
    </b>
    <xsl:copy-of select="c"/>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:23:13.030

**这是一个最通用的解决方案 - 使用`xsl:sort`和模板 - 没有`xsl:copy-of`也没有特定名称的硬编码**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="*/*">
     <xsl:copy>
       <xsl:apply-templates select="@*"/>
       <xsl:apply-templates select="node()">
         <xsl:sort select="name()"/>
       </xsl:apply-templates>
     </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<grandParent>
    <parent>
        <c>789</c>
        <b>
            <b2>123</b2>
            <b1>456</b1>
        </b>
        <a>123</a>
    </parent>
    ....
</grandParent> 
```

**产生了想要的正确结果**：

```
<grandParent>
   <parent>
      <a>123</a>
      <b>
         <b1>456</b1>
         <b2>123</b2>
      </b>
      <c>789</c>
   </parent>
    ....
</grandParent> 
```

**现在，让我们更改 XML 文档中的所有名称——请注意，其他答案均不适用于此**：

```
<someGrandParent>
    <someParent>
        <z>789</z>
        <y>
            <y2>123</y2>
            <y1>456</y1>
        </y>
        <x>123</x>
    </someParent>
    ....
</someGrandParent> 
```

**我们应用*相同的*转换，它再次产生正确的结果：**

```
<someGrandParent>
   <someParent>
      <x>123</x>
      <y>
         <y1>456</y1>
         <y2>123</y2>
      </y>
      <z>789</z>
   </someParent>
    ....
</someGrandParent> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:57:40.830

> 我尝试将另一个 xsl:template 用于“grandParent/parent/b”，但无济于事。

由于您有一个身份模板，您应该使用`<xsl:apply-templates>`而不是`<xsl:copy-of>`

```
<xsl:template match="node()|@*">
    <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
</xsl:template>
<xsl:template match="grandParent/parent">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates select="a"/>
        <xsl:apply-templates select="b"/>
        <xsl:apply-templates select="c"/>
    </xsl:copy>
</xsl:template> 
```

`b`现在您可以为元素添加类似的模板

```
<xsl:template match="parent/b">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates select="b1"/>
        <xsl:apply-templates select="b2"/>
    </xsl:copy>
</xsl:template> 
```

这将很好地处理`b`不存在的情况 - 如果`select="b"`找不到任何元素，则不会触发任何模板。

事实上，如果两种情况下的排序顺序相同（按元素名称的字母顺序排列），那么您可以将两个模板组合成一个使用 的模板`<xsl:sort>`，从而提供完整的转换

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:strip-space elements="*" />
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="node()|@*">
    <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="grandParent/parent | parent/b">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="*">
        <xsl:sort select="name()" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

（对于您提供的示例 XML，您实际上并不需要这些`@*`位，因为 XML 不包含任何属性，但是如果在真正的 XML 中有任何属性或者您将来添加任何内容）。

# python - Sublime 编辑器插件创建 GUI

> ID：15659032
> 
> 赞同：1
> 
> 时间：2013-03-27T12:40:53.640
> 
> 标签：python, plugins, sublimetext2

我正在尝试使用它自己的 GUI 为 sublime 创建一个插件。无论我尝试什么，似乎`Tkinter`都没有得到运行所需的东西。似乎它需要设置一些系统变量，这些变量在运行 Sublime Text 插件时未设置。

```
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/lib-tk/Tkinter.py", line 1638, in __init__
    baseName = os.path.basename(sys.argv[0])
AttributeError: 'module' object has no attribute 'argv' 
```

是否可以从某个地方获取所需的设置？

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:39:05.323

据我所知，sublimetext 有自己的 python 解释器。它似乎已经覆盖了一些默认功能。Argv（shell 变量列表）不是可用的属性之一。但是，您确定您应该使用 Tkinter。我在 linux 上，我认为 Tkinter 不能作为库使用。不确定，但 sublime 建立在 Tkinter 之上。我还没有看到使用它的插件。我认为你应该看看这个问题。

[如何在 Sublime Text 2 插件中包含第三方 Python 包](https://stackoverflow.com/questions/15180537/how-to-include-third-party-python-packages-in-sublime-text-2-plugins)

# delphi - 为什么 Gutter 在 TSynEdit 上不显示行号？

> ID：15659036
> 
> 赞同：0
> 
> 时间：2013-03-27T12:41:08.823
> 
> 标签：delphi, delphi-xe2, syntax-highlighting

我们`TSynEdit`用作 Delphi XE2 的语法高亮编辑器。除了一个之外，所有作品都很好。它不显示 Gutter 上的行号。怎么了？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:49:33.720

我们必须设置属性：

```
SynEdit.Gutter.ShowLineNumbers := True; 
```

# java - java中的xpath没有反射

> ID：15659040
> 
> 赞同：0
> 
> 时间：2013-03-27T12:41:20.687
> 
> 标签：java, reflection, xpath, jaxb

我必须对 JAXB 对象进行大量工作，并且在获取值时有一件烦人的事情。假设我得到了下一个 XML：

```
...
<a>
   <b>
      <c>1</c>
   </b>
</a>
... 
```

在java中，我可以达到元素 c 的值，如下所示：

```
xml.getA().getB().getC() 
```

但是，如果元素不是强制性的，那么我必须实现许多 if 条件来检查元素是否为空。

```
if (xml != null && xml.getA() != null && xml.getA().getB() != null && xml.getA().getB().getC() != null {
   ...
} 
```

我想直接在 JAXB 对象上使用 XPath 以避免编写这些可怕的 if 条件。我知道有一些类似的工具（例如 Apache JXPAth），但通常这些框架使用反射。我不想使用反射，因为它会严重影响性能。不幸的是，如果不使用反射，我无法想象任何解决方案，但也许有一个。你可以帮帮我吗？谢谢，V。

* * *

我发现 org.w3c.dom.Document 可以与 XPath 一起使用，但下一个问题是如何在带注释的 web 服务中使用 org.w3c.dom.Document 而无需再次编组？（我有点担心不必要地编组 XML）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T18:27:08.527

好吧，这不是一个“好”的解决方案，但是如果您的主要目标是避免编写所有这些 if 条件，您是否考虑过将整个事情包装在 try/catch NullPointerException 中？在不存在的情况下性能会受到影响，我会说这不是很好地使用异常，但它允许更简单的语法来获取和使用内部值。

# css - 无法在 joomla 中编辑 layout.css 文件

> ID：15659041
> 
> 赞同：0
> 
> 时间：2013-03-27T12:41:22.907
> 
> 标签：css, joomla2.5

我有 joomla 2,5 和 beez_20 模板即时使用 ftp 更改 css。

我试图更改一些 CSS 代码，例如样式、颜色、字体、....

但是，当我更改并上传它时，它显示已更改。但过了一会儿，他们消失了，原来的代码又回来了。就像我没有改变一样！

如果我不更改，我的网站看起来很奇怪。例如大写我想改变等...

有什么东西可以生成这个文件吗？它来自 .accesss 吗？请让我知道如何改变。从后端尝试过同样的事情。过了一会儿，一切都回滚了。我不知道它回滚了多少时间但是当我稍后检查时我发现css没有改变:(!!

我的文件是`/templates/beez_20/css/layout.css`

请帮忙 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:33:36.757

您是否启用了任何缓存？对我来说，这听起来有点像缓存的问题。

还有你在编辑哪个文件？里面的那个`/templates/beez_20/css/layout.css`是正确的。

# asp.net - 从 asp.net 中的代码调用时出现模态引导问题

> ID：15659043
> 
> 赞同：0
> 
> 时间：2013-03-27T12:41:25.753
> 
> 标签：asp.net, twitter-bootstrap, modal-dialog

我对引导程序的模态组件有疑问。

问题是，当我尝试从其显示的代码中调用模态但模态失去其效果时，背景不会变成灰色并且模态不会从顶部滑动。

请在下面找到我的代码。

```
<div class="modal" data-backdrop="static" data-keyboard="false" runat="server" 
      visible="false" id="myModalServicios" tabindex="-1" role="dialog" 
      aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">            
    </div>
    <div class="modal-body">       
    </div>
    <div class="modal-footer">            
    </div>
</div> 
```

代码背后：

```
myModalServices.Visible = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:02:22.593

在您的标记中，div 的 id 是`myModalServicios`您在引用后面的代码`myModalServices`

# java - 如何在 Windows/Linux 上设置 Java Swing 应用程序的 DPI？

> ID：15659044
> 
> 赞同：75
> 
> 时间：2013-03-27T12:41:39.650
> 
> 标签：java, swing, matlab, fonts, dpi

如果你有一台 DPI 超过 150 的显示器（例如 Macbook Pro），你可能还会发现问题：***Java Swing 应用程序上的字体对于高 DPI 显示器来说太小了***，我根本无法更改字体大小（它直接忽略 Windows DPI，只显示***非常原始的 DPI-->96***）。我只能改变屏幕分辨率，这绝对会使 LCD 上的一切变得模糊。

是的，我有一台带高 DPI 显示器的笔记本电脑，15.6 英寸，分辨率为 1920x1080，一些 Java 桌面应用程序在我的笔记本电脑上看起来非常小，例如 Matlab、Burpsuite 等。我在互联网上搜索了很长时间，但是仍然找不到解决问题的方法。我知道我可以通过 更改 JRE 字体`JRE_HOME/lib/font/fontconfig.properties.src`，但我找不到任何地方可以为 Java 桌面字体设置默认字体大小或 DPI。

问题没有解决方案吗？你有高 DPI 显示器吗？你如何处理这些应用程序？Swing 会放弃高 DPI 用户吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-05-08T08:13:38.103

我目前正在 Windows 上调查此问题。这是我发现的：

大多数 Swing Look & Feels 根本不支持高 DPI，即使 Nimbus 也不支持，即使它应该是可扩展的。我发现一些旧博客文章说 Nimbus 最终可能会提供高 DPI 缩放，但显然这从未发生过。

一个例外是 System LAF，但在所有 DPI 设置下，其默认字体比实际系统字体大小小约 10%。此外，必须明确选择系统，如下所述：http: [//docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

也没有可以在 Swing 中设置的单一比例因子。特定的 LAF 必须提供代码来处理缩放。所以你能做的最好的就是选择系统并希望它足够好。

但是，JavaFX 在我的系统上可以正确地自动扩展至 150%。如果可能的话，我建议您使用 JavaFX 来构建您的 GUI。

编辑：我做了几个小测试程序，并为各种 GUI 框架、Swing 主题和 DPI 设置截取了比较截图。这可能对阅读这个问题的人有用：http: [//kynosarges.org/GuiDpiScaling.html](http://kynosarges.org/GuiDpiScaling.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-07-31T23:58:47.927

简短回答：您需要在 JRE 9+ 上运行它。

长答案：
这是因为 Java 运行时声明自己是“DPI-aware”，但并没有真正支持 AWT 和 Swing。Java 应用程序的大小和渲染基于像素而不是适当缩放，这包括 HiDPI 显示。无论如何，最近已经解决了这个问题。请参阅问题[JEP 263：Windows 和 Linux 上的 HiDPI 图形](http://openjdk.java.net/jeps/263) 和[升级](https://docs.oracle.com/javase/9/whatsnew/toc.htm)。

所以，增加字体大小是行不通的（因为它不会增加其余的东西）；jvm 参数`-Dsun.java2d.dpiaware=false`不起作用（因为它不被真正支持）；并且清单文件+注册表编辑（对于Windows）不起作用。

解决方案：您需要在 JRE 9+ 上运行它，因为它确实支持此功能。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-08-05T11:22:59.300

这个[答案](https://superuser.com/a/1194728)解决了我的 4K 屏幕 Ubuntu 笔记本电脑上的问题。

在应用程序的配置文件中，我添加了`-Dsun.java2d.uiScale=2.5`Java 参数，现在，在执行时，应用程序可以很好地缩放并且可以使用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-23T16:23:18.660

**根据我的实验，在 Linux 上**，似乎不可能使用任何 Swing 外观进行缩放。[但是，可以使用涉及 VNC、 vncdesk](https://github.com/feklee/vncdesk)的 hack 来做到这一点。这是我`gradle --gui`在 vncdesk 下运行的配置：

`.vncdesk/1/settings.ini`：

```
[desktop]
width = 1050
height = 650

[window]
title = gradle
name = gradle in vncdesk
class = GradleInVncdesk
scale_factor = 2 
```

`.vncdesk/1/startup`：

```
#!/bin/sh
cd "$INVOCATION_DIR"
matchbox-window-manager&
exec gradle --gui "$@" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-28T08:49:08.363

看来，在 Linux (Gtk) 上，您可以通过在启动应用程序之前使用以下方法缩放应用程序 DPI 来解决此问题。

```
export GDK_SCALE=2 
```

（您也可以降低显示器分辨率，但这根本不是解决方案）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-27T19:03:29.413

我设法按照以下说明解决了它：[Link](http://www.jauernig-it.de/high-dpi-probleme-beheben/)。

它是德文的，但我会翻译重要的东西。

创建此注册表项：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\SideBySide]
"PreferExternalManifest"=dword:00000001 
```

使用以下内容创建清单文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>

<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0" xmlns:asmv3="urn:schemas-microsoft-com:asm.v3">

<dependency>
  <dependentAssembly>
    <assemblyIdentity type="win32" name="Microsoft.Windows.Common-Controls" version="6.0.0.0" processorArchitecture="*" publicKeyToken="6595b64144ccf1df" language="*">
    </assemblyIdentity>
  </dependentAssembly>
</dependency>

<dependency>
  <dependentAssembly>
    <assemblyIdentity type="win32" name="Microsoft.VC90.CRT" version="9.0.21022.8" processorArchitecture="amd64" publicKeyToken="1fc8b3b9a1e18e3b">
    </assemblyIdentity>
  </dependentAssembly>
</dependency>

<trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
  <security>
    <requestedPrivileges>
      <requestedExecutionLevel level="asInvoker" uiAccess="false"/>
    </requestedPrivileges>
  </security>
</trustInfo>

<asmv3:application>
  <asmv3:windowsSettings xmlns="http://schemas.microsoft.com/SMI/2005/WindowsSettings">
    <ms_windowsSettings:dpiAware xmlns:ms_windowsSettings="http://schemas.microsoft.com/SMI/2005/WindowsSettings">false</ms_windowsSettings:dpiAware>
  </asmv3:windowsSettings>
</asmv3:application>

</assembly> 
```

将其复制到 java.exe 和 javaw.exe 所在的 bin 目录中，并将其命名为`java.exe.manifest`and `javaw.exe.manifest`（您将拥有两个内容相同但名称不同的文件）。

HTH。

伯恩德

# air - 使用 TabBar 组件在两个 BorderContainers 之间切换时会引发什么事件？

> ID：15659046
> 
> 赞同：2
> 
> 时间：2013-03-27T12:41:42.360
> 
> 标签：air, flex4, desktop-application

我正在使用 Apache Flex 4.9.1 SDK 开发 Adob​​e Air 桌面应用程序。我正在使用 TabBar 控件以通过不同的窗口。对于一个窗口，我使用的是 BorderContainer 控件。

我的问题是：

当您使用选项卡从一个窗口切换到另一个窗口时，是否会引发任何事件（在 BorderContainer 控件中而不是在 TabBAr 控件中）。TabBar 中的事件是“变化”，但我需要在 BorderContainer 中捕捉这一刻。我尝试过“FocusOut”、“Hide”、“Deactive”事件，但它们没有被引发。那么，当标签更改时，有人知道边界截面中发生了什么吗？

先感谢您！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-28T18:11:03.273

使用标签栏上的更改事件..

# vba - 将当前 ADO 记录传递给另一个函数

> ID：15659047
> 
> 赞同：9
> 
> 时间：2013-03-27T12:41:46.803
> 
> 标签：vba, vb6, adodb

也许我在 .NET 中花费了太多时间，但我无法轻松地将 ADO RecordSet 的当前 Record 传递给另一个方法，这似乎很奇怪。

```
Private Sub ProcessData(data As ADODB.Recordset)
    While (Not data.EOF)
        ProcessRecord ([data.CurrentRecord]) ' <-- There is no CurrentRecord property.
        data.MoveNext        
    Wend
End Sub

Private Sub ProcessRecord(singleRecord As ADODB.Record)
    ' Do stuff.
End Sub 
```

我在该主题上找到的少量信息说要传递整个 RecordSet 或创建一个新 Record 并手动将每个字段复制到它。

StackOverflow，有没有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:45:48.970

就个人而言，我会将整个记录集传递给 ProcessRecord 子例程。记录集总是通过引用传递，因此传递记录集没有开销（性能或内存消耗）。只要确保您没有移动到 ProcessRecord 子例程中的下一条记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:54:53.107

您可以使用 GetRows() 方法将数据加载到数组中，然后让 ProcessRecord 仅使用该数组，但这会将方法与数据集“断开”，这可能不是您想要的。

GetRows() 方法采用可选参数来指定要获取的行数、从哪里开始以及要获取的字段

所以：

ProcessRecord(data.GetRows(1,adBookmarkCurrent))

应该对所有领域都这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:51:12.610

不幸的是，没有..你不能从记录集中提取单个记录..正如 G. Mastros 所说，通过引用传递整个记录集并使用当前记录没有额外的开销，所以你不妨这样做

# google-maps - 没有样式的 Google Maps 508 可访问性

> ID：15659051
> 
> 赞同：1
> 
> 时间：2013-03-27T12:41:50.753
> 
> 标签：google-maps, accessibility, section508

第 508 节的要求之一是无需样式表即可阅读页面：

> § 1194.22 (d) 应组织文档以使其可读，而不需要相关的样式表。

我们目前面临的问题是，如果没有启用样式，Google 地图就无法工作（见图）。地图的所有不同部分只是按顺序打印出来，没有任何意义。我在下面附上了一张示例图片。

有什么简单的方法可以解决这个问题吗？我唯一能想到的就是用 JavaScript 测试一下 CSS 是否被禁用（这是一件很糟糕的事情，我知道，我知道），然后删除地图 div 并用显示相同内容的[静态地图](https://developers.google.com/maps/documentation/staticmaps/)替换它. （如果 JavaScript 也被禁用，这是一个有争议的问题，因为地图甚至不会加载。）显然静态地图并没有包含所有相同的功能（缩放、平移等），但它提供了一个可读的页面。所以：

*   是否有另一种方法可以使 Google Maps 508 兼容禁用样式？
*   如果没有，如何测试禁用 CSS 以进行上述修复？

没有样式的示例地图： ![禁用样式表的谷歌地图](../Images/6c936e7652ab7b4d636a2b08bc40c4c2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:03:01.200

您指向的标准主要用于静态内容。由于谷歌地图是高度脚本化的，你会在 1194.21 - 软件应用程序中调用标准，并`<noscript>`在地图后面有一个标签，上面写着“谷歌地图显示**. 可访问版本位于 _* __。”*

 *接下来在测试地图时，它很可能不符合要求，因此您应该向该机构的第 508 节协调员申请地图的等效便利例外。这允许您提供 Google 地图，但您提供了获取信息的等效方法。如果 Albert 指出的静态方法是可以接受的，则应将指向它的链接放置在 Google 链接附近，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:23:54.803

gmaps for business 不提供此选项：[https](https://developers.google.com/maps/documentation/business/accessibility)
://developers.google.com/maps/documentation/business/accessibility 该链接指向 google maps for business，我假设您没有使用它，但它是唯一的地图a11y 政策下的 api 链接：[http ://www.google.com/accessibility/policy/](http://www.google.com/accessibility/policy/)
有谷歌地球，但这不是你想要的，我不认为。这是粘性的，不是最佳实践，但你必须做你必须做的......因为你可以检测到 CSS 何时关闭，我会在页面加载时首先运行该功能，如果是，则提供带有静态的 gmap图像地图后备，如果不是，则仅提供静态地图。我写了一篇关于使用静态图像作为后备的帖子，你可以使用它。注意：这不包括我刚才提到的全部功能，只是加载带有静态图像后备的 gmap：http: [//bowdenweb.com/wp/2011/05/optimize-google-maps.html](http://bowdenweb.com/wp/2011/05/optimize-google-maps.html)*

# java - 在java中每个月更新一个int

> ID：15659055
> 
> 赞同：-3
> 
> 时间：2013-03-27T12:41:58.657
> 
> 标签：java

我想在新的一个月开始时更新 int 。如果我在新月的第一次登录，我想在我的数据库中更新该 int（oracle 11g 发行版 II）。java可以吗？我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:45:48.513

很有可能，最简单的想法是在数据库中有两个字段。一个带有您的 int 值，另一个带有时间戳（如果是 Oracle，则为纯日期）。在您保存最后一次更新 int 的日期以及每次用户登录时，您可以检查当前月份是否与数据库中存储的月份不同。

但是，在这种情况下，如果您询问要实施的解决方案的目的会更好，也许有一个更简单的想法。

问候

# javascript - this.function 和prototype.function 有什么区别？

> ID：15659063
> 
> 赞同：21
> 
> 时间：2013-03-27T12:42:15.520
> 
> 标签：javascript, prototypal-inheritance

给定简单的 JS 继承，这两个示例之间的基本函数有什么实际区别？换句话说，一个人什么时候应该选择在“this”而不是原型（或相反）上定义一个函数？

对我来说，第二个例子更容易理解，但还有多少呢？

在此定义的函数：

```
//base
var _base = function () {
    this.baseFunction = function () {
        console.log("Hello from base function");
    }
};
//inherit from base
function _ctor() {
    this.property1 = "my property value";
};
_ctor.prototype = new _base();
_ctor.prototype.constructor = _ctor;
//get an instance
var instance = new _ctor();
console.log(instance.baseFunction); 
```

原型上定义的函数：

```
//base
var _base = function () {};
_base.prototype.baseFunction = function () {
    console.log("Hello from base function");
}
//inherit from base
function _ctor() {
    this.property1 = "my property value";
};
_ctor.prototype = new _base();
_ctor.prototype.constructor = _ctor;
//get an instance
var instance = new _ctor();
console.log(instance.baseFunction); 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-27T12:46:20.307

原型上的函数只创建一次并在每个实例之间共享。在构造函数中创建的函数被创建为使用构造函数创建的每个新对象的新对象。

作为一般规则，函数应该在原型上，因为它们通常不会针对相同类型的不同对象进行修改，这对内存/性能有轻微的好处。其他属性如对象和数组应该在构造函数中定义，除非你想创建一个共享的静态属性，在这种情况下你应该使用原型。

它更容易看出与普通对象或数组而不是函数的区别

```
function Foo(){
    this.bar = [];
}
var fooObj1 = new Foo();
var fooObj2 = new Foo();

fooObj1.bar.push("x");
alert(fooObj2.bar) //[] 
```

相对于：

```
function Foo(){
}

Foo.prototype.bar = []
var fooObj1 = new Foo();
var fooObj2 = new Foo();

fooObj1.bar.push("x");
alert(fooObj2.bar) //["x"] 
```

# linux - linux上的mpc / mpd：如何播放本地wav文件

> ID：15659067
> 
> 赞同：4
> 
> 时间：2013-03-27T12:42:34.303
> 
> 标签：linux, bash, embedded-linux, audio-player

我正在尝试将本地文件添加到 mpd（通过 mpc）并播放它。我的平台是 OpenWRT 嵌入式 linux 。

因此，从手册页中，它指出：

```
mpc add <file>   Add a song to the current playlist 
```

如果我做：

```
root@OpenWrt:~/.mpd# mpc add /usr/share/baresip/ring.wav 
error adding /usr/share/baresip/ring.wav: directory or file not found 
```

或者如果我这样做：

```
root@OpenWrt:~/.mpd# mpc add file:///usr/share/baresip/ring.wav 
error adding file:///usr/share/baresip/ring.wav: Access denied 
```

这里的正确语法到底是什么？手册页对于 mpc / mpd 真的不是很清楚。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-06-04T15:55:17.600

你的第二次尝试*几乎*是正确的。您遇到的问题是，`mpd`它只允许`file:`通过本地连接将 URL 传递给它，它通过要求您连接它的*unix-domain socket*来强制执行。所以，在你的`mpd.conf`你需要有这样的一行：

```
bind_to_address     "/run/mpd/socket" 
```

（取决于您的系统，您可能想要更改`/run`为`/var/run`- 我引用的版本对于 debian 或 ubuntu 的最新版本是正确的，但其他版本可能不同）。

然后，您需要设置环境以指向该套接字：

```
export MPD_HOST=/run/mpd/socket 
```

当你这样做时，`mpc add`或者`mpc insert`可以成功接受一个`file:`URL：

```
$ mpc insert "file:///data/incoming/files/111_scorpions_-_the_zoo.mp3"
$ mpc next
Scorpions - The Zoo
[playing] #23/39   0:00/5:30 (0%)
volume: n/a   repeat: off   random: off   single: off   consume: off
$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T08:21:54.457

我没有找到如何播放 wav..但我忘记了我找到了解决方案（用于 mp3）并将其发布在这里：[https ://forum.openwrt.org/viewtopic.php?id=41022](https://forum.openwrt.org/viewtopic.php?id=41022)

但是，由于 stackoverflow 总是显示在谷歌搜索的顶部，所以我在此处粘贴相同的解决方案，以防它对某人也有帮助：

/etc/mpd.conf 应该是这样的：

```
music_directory        "/tmp"
playlist_directory        "~/.mpd/playlists"
db_file            "~/.mpd/database"
log_file            "/tmp/mpdlog"
pid_file            "~/.mpd/pid"
state_file            "~/.mpd/state"
sticker_file            "~/.mpd/sticker.sql"

user                "root"
group                "root"
bind_to_address "127.0.0.1"

log_level            "verbose"
auto_update    "yes"
auto_update_depth "3"
follow_outside_symlinks    "yes"
follow_inside_symlinks        "yes" 
```

接着：

1.  /etc/init.d/mpd 重启
2.  将 MP3（wav 似乎不起作用）文件复制到 /tmp 文件夹（因为音乐目录是 /tmp 文件夹）
3.  mpc 更新
4.  mpc 添加 file.mp3（添加 /tmp/file.mp3 将不起作用）
5.  mpc 播放

# asp.net-mvc - DateTimePicker 在 MVC 中使用 JQUERY 显示错误

> ID：15659070
> 
> 赞同：0
> 
> 时间：2013-03-27T12:42:35.460
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-3-areas

我正在使用 MVC4 和 JQuery。在我的表单中，有多个日期时间选择器。有时它会触发，有时不会。在浏览器控制台中显示错误是，

```
Uncaught TypeError: Cannot read property 'inline' of undefined
(anonymous function)
jQuery.event.dispatch

elemData.handle.eventHandle

jQuery.event.trigger

(anonymous function)

jQuery.extend.each

jQuery.fn.jQuery.each

jQuery.fn.extend.trigger

jQuery.fn.(anonymous function)

$.extend._updateDatepicker jquery-ui.min.js:5

$.extend._showDatepicker

jQuery.event.dispatch

elemData.handle.eventHandle 
```

HTML：

```
@Html.TextBoxFor(x => x.AGREEMENT_FROM, new { @class = "datepicker" }) 
```

查询：

```
$(document).ready(function () { 
    $(".datepicker").datepicker({ 
        dateFormat: 'dd/mm/yy', showAnim: 'slideDown' 
    }); 
}); 
```

# jsf - p:fileUpload 中的监听器方法永远不会在 primefaces 中调用

> ID：15659071
> 
> 赞同：5
> 
> 时间：2013-03-27T12:42:39.743
> 
> 标签：jsf, file-upload, primefaces

我正在尝试使用 primefaces 上传图像并且未调用 fileUploadListener。

```
<h:form enctype="multipart/form-data">

        <p:fileUpload fileUploadListener="#{fileUploadController.handleFileUpload}"
        mode="advanced" 
        update="messages"
        sizeLimit="100000" 
        allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>

<p:growl id="messages" showDetail="true"/> 
```

这是豆子：

```
@ManagedBean
@RequestScoped
public class FileUploadController {
    public void handleFileUpload(FileUploadEvent event) throws Exception {
      System.out.println("OOOOOOOOOOOOOOOOOOK");
            File targetFolder = new File("C:/Uploads");
            InputStream inputStream = event.getFile().getInputstream();
            OutputStream out = new FileOutputStream(new File(targetFolder,
                    event.getFile().getFileName()));
            int read = 0;
            byte[] bytes = new byte[1024];

            while ((read = inputStream.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }
            inputStream.close();
            out.flush();
            out.close();  

    }
} 
```

这是 web.xml 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<filter>
<filter-name>PrimeFaces FileUpload Filter</filter-name>
<filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
<filter-name>PrimeFaces FileUpload Filter</filter-name>
<servlet-name>Faces Servlet</servlet-name>
<dispatcher>FORWARD</dispatcher>
</filter-mapping>
  <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
</web-app> 
```

我还在类路径中添加了 commons-fileupload 和 Commons-io jar。我不明白为什么不调用 handleFileUpload。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:47:53.510

您已将文件上传过滤器显式配置为`FORWARD`仅侦听调度程序。

您需要从过滤器映射中*删除*以下条目，以便它默认`REQUEST`仅在调度程序上侦听：

```
<dispatcher>FORWARD</dispatcher> 
```

或者，*将*调度程序添加到`REQUEST`过滤器映射中，以便它也可以在正常请求上运行：

```
<dispatcher>REQUEST</dispatcher>
<dispatcher>FORWARD</dispatcher> 
```

只有在调用过滤器*之前*调用调度程序时，`FORWARD`调度程序才是强制性的。例如，通过一些 URL 重写解决方案，如 PrettyFaces。然而，到目前为止在问题中提供的信息似乎并没有以任何方式表明您正在使用它。[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)

 ** * *

**与具体问题无关**，因为 PrimeFaces 文件上传需要 Apache Commons IO，您可能需要考虑使用`IOUtils#copy()`该冗长的输入/输出流循环来代替。另请参阅：[如何在 JSF 中保存上传的文件](https://stackoverflow.com/questions/14211843/how-to-save-uploaded-file/14214223#14214223)。*

# xhtml - docx4j 是否将 xhtml 转换为内存中的 docx？

> ID：15659076
> 
> 赞同：1
> 
> 时间：2013-03-27T12:42:53.980
> 
> 标签：xhtml, docx, docx4j

我正在尝试将 xhtml 文件转换为 docx 并找到以下示例代码：

```
wordMLPackage.getMainDocumentPart().getContent().addAll(XHTMLImporter.convert(new File(inputfilepath), null, wordMLPackage) );
wordMLPackage.save(new java.io.File(System.getProperty("user.dir") + "/html_output.docx") ); 
```

似乎所有数据都将加载到内存中，对吗？如果 xhtml(include image) 是一个大文件，可能会导致 OOM。有人知道如何防止这种情况吗？

非常感谢！

# c# - 以 vsd 格式保存 visio 2013 图表

> ID：15659082
> 
> 赞同：1
> 
> 时间：2013-03-27T12:43:05.380
> 
> 标签：c#, visio, visio2013

如何在 c# visio 控件中使用 visio 2013 以 vsd 格式保存图表？

我正在使用以下代码：

```
string filename = String.Format("{0}.vsd", Guid.NewGuid());
visioControl1.Document.SaveAs(temppath + filename); //Error! 
```

这在 Visio 2003-2010 下工作正常，但在 Visio 2013 中会引发“找不到文件”异常。如果我在第一行将扩展名更改为“vsdx” - 又可以了。但我必须支持所有的 Visio 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-24T07:22:41.397

Visio API 中存在一个已知错误：Visio 2013 的 Visio 控件无法保存为 VSD。它会表现出各种奇怪的行为。为了解决这个问题，在 Visio 2013 下，您必须保存为 vsdx 并使用不可见的 Visio 应用程序实例保存为 vsd：

*   另存为 vsdx
*   制作 vsdx 的副本
*   启动一个新的不可见 Visio 应用程序对象
*   使用隐形应用打开 vsdx 的副本
*   使用隐形应用程序另存为 vsd
*   （删除步骤 1 / 2 中保存的 vsdx 文件）

确定安装的 Visio 版本： VisioVersion = Convert.ToInt32(document.Application.Version.Replace(".", ",").Replace(",0", "")) If VisioVersion >= 15 -> Visio 2013

另请注意：要保存为 vsd / vsdx，您必须使用：document.SaveEx insted of document.Save

要创建不可见 Visio 应用的实例，请参阅：Microsoft.Office.Interop.Visio.InvisibleApp

# php - 如何使用 GPS 坐标从 mysql 中检索最近的数据？

> ID：15659084
> 
> 赞同：1
> 
> 时间：2013-03-27T12:43:07.150
> 
> 标签：php, jquery, mysql, geospatial

我正在使用这个 SQL 查询来获取最接近 GPS 坐标的数据。

```
SELECT geo_latitude, geo_longitude, geo_name, geo_country_code AS country, 
  (DEGREES(
    ACOS(
      SIN(RADIANS(47.470779)) * SIN(RADIANS(geo_latitude)) + 
      COS(RADIANS(47.470779)) * COS(RADIANS(geo_latitude)) * 
      COS(RADIANS(-87.890699 - geo_longitude))
    ) 
  ) * 60 * 1.1515)
  AS distance FROM `MyDatabase`.`allCountries` ORDER BY distance ASC LIMIT 20 ; 
```

无论距离如何，此查询都会检索所有数据。我希望它只显示 10 英里半径内的数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:54:02.073

我找到了两种方法。一种方法是在“where”部分使用大量数学进行直接 SQL 查询，就像您为`AS distance`SQL 部分标记的一样。本质上 - 概念上 - '距离 < 10'

但是，我发现这会减慢我的请求速度......所以我另外做的是从数据库中拉出正方形而不是圆形。简单地说：找出“西/北/东/南十英里”的坐标，然后`WHERE geo_latitude < X1 AND geo_latitude > x2 AND geo_longitude < x3 AND geo_longitude > x4`对我返回的内容进行严格限制。然后，如果你真的需要那么精确，只显示`if( result.distance < 10 ){`

或者换一种说法：

```
x1 = Coords + 10 miles north  
x2 = Coords + 10 miles south  
x3 = Coords + 10 miles east  
x4 = Coords + 10 miles west 
```

不管你用什么方法来表示“北 10 英里”，然后用它从中心点拉出一个北、南、西和东 10 英里的“正方形”。只要您的`geo_latitude`和`geo_longitude`列被索引，这应该是一个快速的数据库调用。

# c# - 如何以最小精度格式化双精度

> ID：15659086
> 
> 赞同：1
> 
> 时间：2013-03-27T12:43:08.823
> 
> 标签：c#, format, double, precision, tostring

我有一个我认为很简单的问题。我有一组要显示在列表框中的双打。至少应显示三位小数，但如果多于三位，则应全部显示。

我认为这会起作用，但最终只显示小数点后三位：

```
 string.Format("{0} {1} {2}", freq.ToString("#0.000#", CultureInfo.CurrentCulture), hz, band); 
```

也许我错过了一些东西。我真的不想手动检查位数并在必要时转换格式块。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:47:17.753

只需`"#"`在格式字符串中添加更多内容：

```
freq.ToString("#0.000#############", CultureInfo.CurrentCulture) 
```

`double`有[*15-16 位*精度](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.71%29.aspx)，所以 13`#`应该使它适用于所有情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:46:34.560

大概：

```
freq.ToString("0.000#") 
```

这将在小数点分隔符后为您提供至少 3 位数字。

所以：

```
4.25   --> 4.250

4.2555 --> 4.2555 
```

# move - 流口水规划师移动

> ID：15659089
> 
> 赞同：0
> 
> 时间：2013-03-27T12:43:11.197
> 
> 标签：move, drools, drools-planner, optaplanner

我没有很多编程经验，更不用说 Drools，但我正在做一个类似于车辆路线的项目。几乎一切正常，除了一些动作，取决于随机种子。

问题是，一旦启发式阶段完成，有时局部搜索阶段会做出一些奇怪的动作，比如下一个：

启发式阶段解决方案：

第 1 天：地点 1 -> 地点 2 -> 地点 3 -> 地点 4 -> 地点 5 -> 地点 6 第 2 天：地点 7 -> 地点 8 -> 地点 9 -> 地点 10

本地搜索移动：地点 5 移动到第 2 天解决方案：

第 1 天：地点 1 -> 地点 2 -> 地点 3 -> 地点 4 第 2 天：地点 5 -> 地点 6

其余的地方没有一天（在示例中是车辆），并且它们作为未锚定的链留下：

地点 7 -> 地点 8 -> 地点 9 -> 地点 10 -> 地点 7 -> 等等

因此，当程序查找其中任何一个的日期时，它会进入一个无限循环。显然，问题不在于如何摆脱那个循环（我不是那个菜鸟），而是如何避免这些动作。

我使用与示例相同的求解器配置（更改求解器类等），所以我不明白为什么它会进行这些移动。我认为我应该编写自己的 Move 类，但我找不到如何编写代码的示例，也找不到 MoveFactory。我将solver.xml 留在代码块中。

有助于我学习编写 Move 和 MoveFactory 类的链接或提示以及避免这种情况的配置提示（如果有的话）会有所帮助。

无论如何，感谢大家的时间和精力。

```
<?xml version="1.0" encoding="UTF-8"?>
<solver>
  <!--<environmentMode>DEBUG</environmentMode>-->
  <environmentMode>PRODUCTION</environmentMode>
  <solutionClass>org.tourgune.planificador.bean.Turista</solutionClass>
  <planningEntityClass>org.tourgune.planificador.bean.PuntoInteres</planningEntityClass>

  <scoreDirectorFactory>
    <scoreDefinitionType>HARD_AND_SOFT</scoreDefinitionType>
     <scoreDrl>/org/tourgune/planificador/core/planificadorScoreRules.drl</scoreDrl>

  </scoreDirectorFactory>

  <termination>
    <maximumMinutesSpend>4</maximumMinutesSpend>
  </termination>
  <constructionHeuristic>
    <constructionHeuristicType>FIRST_FIT</constructionHeuristicType>
  </constructionHeuristic>
  <localSearch>
    <selector>
      <selector>
          <moveFactoryClass>org.drools.planner.core.move.generic.GenericChainedChangeMoveFactory</moveFactoryClass>
      </selector>
      <selector>
        <moveFactoryClass>org.drools.planner.core.move.generic.GenericChainedChangePartMoveFactory</moveFactoryClass>
      </selector>
      <!-- TODO needs a GenericChainedSwapMoveFactory and probably even a GenericChainedSwapPartMoveFactory -->
    </selector>
    <acceptor>
      <planningEntityTabuSize>10</planningEntityTabuSize>
    </acceptor>
    <forager>
      <minimalAcceptedSelection>0</minimalAcceptedSelection>
    </forager>

  </localSearch>
  <!--<localSearch>-->
    <!--<selector>-->
      <!--<selector>-->
        <!--<moveFactoryClass>org.drools.planner.core.move.generic.GenericChainedChangeMoveFactory</moveFactoryClass>-->
      <!--</selector>-->
      <!--<selector>-->
        <!--<moveFactoryClass>org.drools.planner.core.move.generic.GenericChainedChangePartMoveFactory</moveFactoryClass>-->
      <!--</selector>-->
    <!--</selector>-->
    <!--<acceptor>-->
      <!--<simulatedAnnealingStartingTemperature>10</simulatedAnnealingStartingTemperature>-->
    <!--</acceptor>-->
    <!--<forager>-->
      <!--<minimalAcceptedSelection>4</minimalAcceptedSelection>-->
    <!--</forager>-->
  <!--</localSearch>-->
</solver> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:20:09.313

首先升级到 5.5.0.Final，这样你就可以使用`<changeMoveSelector/>`而不是那些通用工厂。按照升级配方 txt。

如果您仍然有问题，请启用 DEBUG 以检测分数损坏（通常由克隆方法或 hacky 分数规则引起）。OptaPlanner (= Drools Planner) 6.0 将使编写评分规则变得更容易，并降低您面临评分损坏的可能性。

# java - JAVA - 检查用户输入日期是否正确时遇到问题

> ID：15659092
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:43:22.263
> 
> 标签：java, validation

我有两个类，Main1 和一个日期（我自己定义的日期类）。我正在尝试获取用户输入的日期、月份和年份，然后尝试使用我的日期类检查这是否是有效日期。我真的很困惑，不确定这是否正确。

这是 Main1 类的代码：

```
public class Main1 {
public static void main(String[] args){     
    int myDay = 0, myMonth = 0, myYear = 0;
    boolean dataCorrect = false;
    date travelDate; // travelDate will hold the date entered
    do {
        try {
            do {
                myDay = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the day: "));
                myMonth = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the month: "));
                myYear = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the year: "));                   
                travelDate = new date(myDay,myMonth,myYear);                    
            } while (travelDate.checkInputs(travelDate.formDate()) == false); // keeps looping until the date entered is correct                    
            dataCorrect = true;                 
        }
        catch(Exception e) {
            JOptionPane.showMessageDialog(null, "Error! Enter a correct date");
        }
    } while (dataCorrect == false); 
    JOptionPane.showMessageDialog(null, myDay + "-" + myMonth + "-" + myYear);
} 
```

}

这是我自己定义的日期类的代码：

```
import java.text.SimpleDateFormat;
import java.text.ParseException;

public class date {
private int day;
private int month;
private int year;
private String userTravel;

// Constructor 
public date(int d, int m, int y) {
    setDate(d,m,y);     
}

// Methods
public void setDate(int d, int m, int y) {
    setDay(d);
    setMonth(m);
    setYear(y);
}

public String formDate() {
    userTravel = day + "-" + month + "-" + year;
    return userTravel;
}

public boolean checkInputs(String inDate) {
    if (inDate == null)
      return false;
    //set the format to use as a constructor argument
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");

    if (inDate.trim().length() != dateFormat.toPattern().length())
      return false;

    dateFormat.setLenient(false);

    try {
      //parse the inDate parameter
      dateFormat.parse(inDate.trim());
    }
    catch (ParseException pe) {
      return false;
    }
    return true;
}

public void setDay(int d) {
    day = d;
}

public void setMonth(int m) {
    month = m; 
}

public void setYear(int y) {
    year = y; 
} 
```

我也不确定方法 checkInputs 的代码是否正确。

编辑：我已经删除了答案中所述的 IF 语句，谢谢。只是想问是否有无论如何我可以强制用户输入一个四位数的年份 YYYY 或者它会一直循环直到发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:48:26.730

您不一定需要`String`根据日期格式模式检查输入日期长度：

```
if (inDate.trim().length() != dateFormat.toPattern().length())
   return false; 
```

例如，您可以输入日期，`2-3-2013`但您的模式是`dd-MM-yyyy`这样的，因此这 2 的长度`Strings`将不匹配，`false`从`checkInputs`让您处于循环中返回。当然，诸如此类的日期`10-12-2013`不会导致无限循环。

仅解析 using`SimpleDateFormat`本身就可以提供您需要的必要验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:55:55.740

方法*checkInputs*在这部分失败：

```
if (inDate.trim().length() != dateFormat.toPattern().length())
  return false; 
```

在日或月整数没有两位数的情况下（如 1,2,3..,9），inDate 的长度将不等于模式长度。例如，日期日期 1-1-2013 有 8 个字符，而模式需要 10 个字符。

我相信，如果您删除此条件，代码将按您的预期工作。

# qtip2 - 为什么 qTip2 在咆哮示例中使用 .removeData() 和 .data()

> ID：15659095
> 
> 赞同：0
> 
> 时间：2013-03-27T12:43:23.443
> 
> 标签：qtip2, jgrowl

我开始使用 qTip2，并且正在查看该站点的演示。我试图理解这[一点](http://craigsworks.com/projects/qtip2/demos/#growl)，但我不太了解这一点。我无法理解这部分：

```
...
}).removeData('qtip');
...
$(this).data('qtip');
... 
```

我想知道为什么以及为什么使用`.removeData()`和`.data()`使用。有人可以帮我理解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:20:50.017

在qtip 2的官方论坛上，qtip2的创建者Craig回答了我！

Craig 写道：“这`removeData`只是一种“hack”，允许在任何时候将多个 qTip 绑定到单个元素，因此允许多个 jGrowl。`.data()`调用只是为了从每个元素中获取 qTip API 对象匹配的对象。”

:)

# javascript - 如果在不使用 javascript 的情况下未启用 javascript，会发出警报吗？

> ID：15659097
> 
> 赞同：1
> 
> 时间：2013-03-27T12:43:34.653
> 
> 标签：javascript

如果禁用javascript，是否有弹出窗口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:50:09.823

```
<noscript>
    <style type="text/css">
        #body {display:none;}
        #alertdiv {display:inline;}
    </style>
</noscript> 
```

哪里`#alertdiv`是一个 div，用于显示您想要的消息（默认隐藏）以及`#body`如果未激活 javascript 将隐藏的主 div 的 id。但它是可选的。

弹出窗口是一个`window.open`命令，没有 javascript 就不存在。你必须模仿类似的东西。[2015 年更新：bootstrap、jquery...现在提供无需弹出窗口即可显示警报的绝妙方式，就像`$("#alert-box").modal("show");`]

这个想法是仅在禁用 javascript 时使用 CSS 来显示页面的某些部分。

旁注：这不会验证 w3c。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:07:53.840

```
<body>
    <div id="NoScriptPopup">Javascript is disabled on your browser</div>    
    <div id="YourContent">/*Your page content goes here*/</div>
    <style>
        #YourContent
        {
            display:none;
        }
    </style>
    <script>
        document.getElementById("NoScriptPopup").style.display = 'none';
        document.getElementById("YourContent").style.display = 'block';
    </script>
</body> 
```

因此，如果在浏览器上禁用了 javascript，则会出现 #NoScriptPopup 并且您的内容将被隐藏。您可以使用 css 设置#NoScriptPopup div 的样式，使其看起来像一个弹出窗口。

# xcode - 需要帮助了解 Xcode *.pch 文件

> ID：15659098
> 
> 赞同：1
> 
> 时间：2013-03-27T12:43:39.363
> 
> 标签：xcode, compiler-construction, import, settings

我正在为 iOS 开发第 3 方 UIKit 替代品。我使用来自 GitHub 的一个非常有用的项目将它构建为一个框架。（不是我的，但如果你有兴趣，它就在[这里](https://github.com/kstenerud/iOS-Universal-Framework)。

我正在尝试在我正在编写的其他项目中使用我的库。就像我说的，它基本上是大部分 UIKit 的替代品，所以我决定在我项目的 *.pch 文件中导入框架，而不是在我希望使用按钮、操作表、警报视图等的任何地方。 .

当我`#import`在头文件中没有指令并声明 type 属性时`MBMButton`，编译器给我一个错误“未知类型名称'MBMButton'；你的意思是'UIButton'吗？” 奇怪的是，代码仍然会运行（即使这是一个**错误**，而不是**警告**）。添加`@class MBMButton`或`#import <MBMUIKit/MBMUIKit.h>`解决此编译器投诉。

当我`#import`在实现文件（或其标头）中没有指令并调用存在`MBMUIButton`但不存在的方法时`UIButton`，我收到编译器**错误**“没有可见的@interface for 'UIButton'声明选择器...” . 和以前一样，代码将实际运行，因为它是一个有效的调用。

现在，我进行了一些挖掘，并更改了项目的设置。在 GCC_PREFIX_HEADER 中没有任何值的地方，我添加了文件名。注意到 Apple 的快速帮助描述，我尝试了“ProjectName-Prefix.pch”和“./ProjectName-Prefix.pch”。似乎都没有解决问题。我最终发现**Target**级别的设置会覆盖**Project**级别的设置，并且**Target**级别的设置已经指定了“ProjectName/ProjectName-Prefix.pch”。所以这是一个死胡同。（很高兴确切地了解相对路径设置是什么！）

我可以不使用 *.pch 文件。这只是一种方便，我绝对可以使用适当的`@class`和`#import`指令。困扰我的是不**理解**这个问题。**应该**如何使用 *.pch 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:50:02.337

前缀头文件会自动包含在项目中的每个 .m 文件中，但不会包含在任何 .h 文件中。

因此，对类的任何引用都需要包含标头或前向声明：

```
@class MyClass; 
```

但是对于`@protocol`s 你需要完整的标题，前向声明将不起作用：

```
@protocol MyProtocol; //this won't work

@interface MyController : UIViewController <MyProtocol>

…
@end 
```

# android - PagerAdapter，第二页在开始时可见

> ID：15659103
> 
> 赞同：4
> 
> 时间：2013-03-27T12:43:47.960
> 
> 标签：android, user-interface, pager

我试图弄清楚，如何使用 android UI 完成以下操作。我不认为我是唯一遇到此问题的人，但我不知道要搜索什么，也没有找到任何有用的信息。

**我的情况：**

目前，我有一个扩展 FragmentStatePagerAdapter 的类，用于获取我的页面的片段。我有一个“主要”片段（**它不应该是屏幕填充**！！<- 此处非常重要的信息）和一些随后的**屏幕填充** 页面。

我还有一个 PageTransformer，它可以转换页面，就好像它们已经在当前页面后面一样。）类似于此页面上的 DepthPageTransformer：http: [//developer.android.com/training/animation/screen-slide.html#浏览器](http://developer.android.com/training/animation/screen-slide.html#viewpager)

我的开始屏幕应该是这样的： ![在此处输入图像描述](../Images/a05c4ada792cec67d65154af9cc5f9bf.png)

我将简单解释一下：左边圆角的区域是主页，它不是屏幕填充的。在该主页后面，第二页应该已经在背景中可见。当我向左滑动主页时，第二页将是以下活动页面。

**所以，问题来了：**

第二页不显示在后台，直到我开始转换（滑动）主页。我开始构建场景（由于问题尚未完成），它看起来像这样：

![在此处输入图像描述](../Images/cab63c9b1eda7303db3c58579be03c0c.png)

背面的深色渐变是android的标准渐变。浅蓝色区域是具有透明度的拉伸图像（如果这是一块拼图）

所以当我开始刷主页面的时候，突然变成了这个样子。返回主页后，第二个仍然可见：

![在此处输入图像描述](../Images/c585ac854d0799b05bef6460b3328e14.png)

这是它从一开始就应该看起来的情况。

我怎样才能做到这一点，从一开始就可以看到两个页面？这是主要的活动代码（基本上它是来自给定 android 开发链接的代码，没有注释）：

```
public class MainActivity extends FragmentActivity {

    private static final int NUM_PAGES = 5;
    private ViewPager mPager;
    private PagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_slider);

        // Instantiate a ViewPager and a PagerAdapter.
        mPager = (ViewPager) findViewById(R.id.pager);
        mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
        mPager.setAdapter(mPagerAdapter);
        mPager.setPageTransformer(true, new DepthPageTransformer());
    }

    @Override
    public void onBackPressed() {
        if (mPager.getCurrentItem() == 0) {
            super.onBackPressed();
        } else {
            mPager.setCurrentItem(mPager.getCurrentItem() - 1);
        }
    }

    /**
     * A simple pager adapter that represents 5 ScreenSlidePageFragment objects,
     * in sequence.
     */
    private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
        public ScreenSlidePagerAdapter(FragmentManager fragmentManager) {
            super(fragmentManager);
        }

        @Override
        public Fragment getItem(int position) {
            switch (position) {
            case 0:
                return new ScreenMainSlideFragment();
            }
            return new ScreenSlideFragment();
        }

        @Override
        public int getCount() {
            return NUM_PAGES;
        }
    }

} 
```

这是 PageTransformer（也许有解决方案）：

```
public class DepthPageTransformer implements PageTransformer {
    private static float MIN_SCALE = 1f;

    public void transformPage(View view, float position) {
        int pageWidth = view.getWidth();

        if (position < -1) { // [-Infinity,-1)
            // This page is way off-screen to the left.
            view.setAlpha(0);

        } else if (position <= 0) { // [-1,0]
            // Use the default slide transition when moving to the left page
            view.setAlpha(1);
            view.setTranslationX(0);
            view.setScaleX(1);
            view.setScaleY(1);

        } else if (position <= 1) { // (0,1]
            // Fade the page out.
            view.setAlpha(0.75f + (1 - position) * 0.25f);

            // Counteract the default slide transition
            view.setTranslationX(pageWidth * -position);

            // Scale the page down (between MIN_SCALE and 1)
            float scaleFactor = MIN_SCALE + (1 - MIN_SCALE) * (1 - Math.abs(position));
            view.setScaleX(scaleFactor);
            view.setScaleY(scaleFactor);

        } else { // (1,+Infinity]
            // This page is way off-screen to the right.
            view.setAlpha(0);
        }
    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:55:41.647

我不确定这是否会完全解决您的问题，但是您是否查看过 ViewPager 适配器的 getPageWidth 方法。它可以帮助你去你想去的地方：

[https://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getPageWidth(int)](https://developer.android.com/reference/android/support/v4/view/PagerAdapter.html#getPageWidth(int))

在适配器的实现中返回一个小于 1 的值：

```
...
private static final int POS_MAIN_PAGE = 0;
private static final float WIDTH_MAIN_PAGE = 0.9f;
...

...
@Override
public float getPageWidth (int position) {
    if (position == POS_MAIN_PAGE) {
        return WIDTH_MAIN_PAGE;
    }
    return 1f;
}
.... 
```

**OP评论后更新：**

如果第二页需要与第一页同时可见，那么 a`ViewPager`可能不适合您。a 中的页面`ViewPager`彼此相邻显示，而不是彼此重叠。

您可以做的是在您的第一页（位置== 0）中显示您的主页和“第二”页`ViewPager`（a `ViewGroup`/`Fragment`包含主页和“第二”页，您的主页略小）。您的“第二”页是固定的，您的主页可能是一个滑动抽屉。当用户在主页面上向左滑动时（即在滑动抽屉上），主页面可能会滑出视线而“第二”页保持不变。当用户在“2nd”页面上向左滑动时，ViewPager 中的“3rd”页面可以通过`ViewPager`从一个屏幕移动到另一个屏幕和（主要和）“2nd”页面的正常方式显示将移出视线。

# jqgrid - jqGrid 记录文本自定义

> ID：15659109
> 
> 赞同：1
> 
> 时间：2013-03-27T12:44:02.560
> 
> 标签：jqgrid

我需要`recordtext: "{0} - {1} of {2}"`在 jqGrid jQuery 插件中自定义。

在我的项目中，我使用了几个 jqGrid，我想更改每个网格的括号内的文本——我需要它们看起来像这样：

```
1-10 of 29 (Users) 
1-10 of 29 (Administrators) 
1-10 of 29 (Emails) 
```

`recordtext`jqGrid 的语言文件 ( ) 中的默认值`i18n/grid.locale-en.js`是：

```
recordtext: "{0} - {1} of {2}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T05:56:01.780

使用此代码

```
$("#grid").jqGrid('setGridParam', { recordtext: "View {0} - {1}" + " of " + Total}).trigger('reloadGrid'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T10:00:21.363

您可以在创建网格之前对语言脚本使用扩展方法。

```
jQuery.extend($.jgrid,{
    defaults : {
        recordtext: "View {0} - {1} of (Users) {2}",
        emptyrecords: "No records to view",
        loadtext: "Loading...",
        pgtext : "Page {0} of {1}"
    },
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-07T15:51:01.800

在您的 jqgrid 定义中，只需覆盖 recordtext 参数。例如，这就是我所做的。

```
 $myGrid = $('gridName)'
        .jqGrid(
                {
                    dataType   : 'json',
                    scroll : true,
                    scrollOffset : 20,
                    scrollrows : true,
                    viewsortcols : [ true, 'horizontal', true ],
                    width : '100%',
                    height : '100%',
                    viewrecords : true,
                    recordtext: "Total Records : {2}",
            ....other parameters as you need them..
        }); 
```

请参阅[jqgrid-wiki](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:32:22.357

您可以尝试这样的解决方法：

在 jqgrid 的**gridcomplete**函数中，将所需的文本显式添加到正确的寻呼机 td。生成的寻呼机部分的 td id 将是“pager_right”。（您可以使用 firebug 确认）。

```
 gridComplete: function ()
                {

                    var tableData = $( '#pager_right' ).find( 'div' );
                    span = $( '<span>(some text)</span>' );
                    tableData.append( span );
                 } 
```

# c# - 如何在 WPF 中懒惰地创建 UI 元素？

> ID：15659110
> 
> 赞同：7
> 
> 时间：2013-03-27T12:44:02.700
> 
> 标签：c#, wpf, performance

我们正在创建一个 WPF 应用程序，它大量使用高度修饰的输入元素。装饰元素的一个简单示例是一个 TextBox，它在没有焦点时看起来像一个只读的 TextBlock，并在获得焦点后变成一个 TextBox。此外，在将更改的值保存到数据库时会提供额外的视觉反馈。问题是显示包含大量这些元素（比如说 100 个）的视图非常慢，并且使应用程序非常无响应。

我们已经将此装饰器实现为包含所有必需元素的 UserControl（例如用于显示未聚焦文本和忙碌指示器的旋转图像的 TextBlock）。然后我们将输入元素添加为这个装饰器控件的子元素，这意味着除了所有额外的元素之外，装饰器还包含其可视树中的输入元素。在 XAML 中，这看起来像：

```
<custom:Decorator Context="{Binding ValueHelper}" >
    <TextBox Text="{Binding ValueHelper.Text}"/>
</custom:Decorator> 
```

这使我们可以轻松地装饰我们想要的任何输入元素，无论是文本框、日期选择器、组合框还是任何自定义元素。

**现在回到问题**：假设我们有一个包含 100 个装饰文本框的视图，我们导航到该视图。怎么了？至少我的四核笔记本电脑冻结了很长时间，因为它必须创建数百个文本块、矩形、图像等来为每个装饰元素提供视觉反馈，尽管*还没有可见的装饰*。真正需要的只是 100 个文本块，因为这是屏幕上可见的内容。只有在元素接收到鼠标悬停事件或焦点后，才需要其他元素。此外，一次只编辑一个元素，因此对于整个应用程序来说，只有一个输入元素（在本例中为文本框）就足够了。

*那么，在不为视图中的每个元素创建所有装饰元素（或实际输入元素）的情况下实现相同装饰的最佳方法是什么？*

* * *

用于阐明用例的装饰文本框示例：

当文本框没有焦点或鼠标光标当前不在其顶部时（状态 1），该文本框看起来像一个只读 TextBlock。此外，显示了三个点（“...”），因为元素当前没有任何值。

当鼠标光标移动到元素顶部时，TextBlock 周围会出现一个绿色虚线矩形，表示可以修改该元素（状态 2）。如果 TextBox 碰巧是只读的，则颜色将为红色。

接收到焦点元素后变成实际的TextBox，可以用来修改实际值（状态3）。

在文本框失去焦点后，该值被存储到数据库中，并且为了显示该值当前正在保存，一个忙碌指示符出现在元素的左侧（状态 4）。

最后，该值已被保存，元素返回到显示新值的空闲状态（状态 5）。（实际上，元素具有与验证和其他特定要求相关的更多状态，但您肯定明白元素确实是高度修饰的。）

![在此处输入图像描述](../Images/c451a02d2f63e24b30d5fcd3f0106c40.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:25:04.033

无需预先绘制所有 UI 元素，只绘制需要的元素

WPF 允许您使用 修改`Template`对象的`DataTrigger`，因此您可以根据触发器调整装饰器的模板

装饰器的示例样式可能如下所示：

```
<Style TargetType="{x:Type ContentControl}">
    <!-- Default Template -->
    <Setter Property="ContentTemplate" 
            Value="{StaticResource NoDecoratorTemplate}" />

    <Style.Triggers>
        <DataTrigger Property="Text" Value="">
            <Setter Property="ContentTemplate" 
                    Value="{StaticResource BlankTemplate}" />
        </DataTrigger>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="ContentTemplate" 
                    Value="{StaticResource MouseOverTemplate}" />
        </Trigger>
        <Trigger Property="IsFocused" Value="True">
            <Setter Property="ContentTemplate" 
                    Value="{StaticResource FocusedTemplate}" />
        </Trigger>
        <DataTrigger Property="{Binding IsLoading}" Value="True">
            <Setter Property="ContentTemplate" 
                    Value="{StaticResource LoadingTemplate}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

此外，WPF 不应加载不可见的项目。您可以尝试将您的装饰器设置`Visibility="Collapsed"`为测试，以查看是否可以修复加载时间。

如果确实如此，并且您不想走这`Template`条路线，则可以确保将`Visibility`所有对象的 设置为`Collapsed`开始，并且仅将`Visible`它们设置为应该显示的时间。

如果它不能解决您的加载时间，那么您的问题可能出在其他地方。例如，看起来你的一些装饰器项目的大小是根据放置在其中的内容控件来调整的，所以实际上让你放慢速度的可能不是显示对象，而是确定对象的大小。

# php - Postfix / PHP Mail() 以相同的电子邮件地址发送电子邮件，忽略标头 $from

> ID：15659111
> 
> 赞同：2
> 
> 时间：2013-03-27T12:44:03.807
> 
> 标签：php, email, header, postfix-mta

我们最近升级了我们的网络服务器，我们遇到的第一个问题是发送到同一个域时出现问题，因为该网站托管在与公司交换服务器不同的服务器上。无论如何，我修复了这是一些简单的配置更改并禁用域的邮件服务。

无论如何，这不起作用，但是当我在网站上测试一些 PHP 邮件表单时，我没有注意到它们都作为我的电子邮件地址发送给客户。

这是 PHP（我认为这不是问题）

```
<?php
    ini_set("sendmail_from", "noreply@******.com"); 

    $name       = $_POST['name'];
    $email      = $_POST['email'];
    $phone      = $_POST['phone'];
    $comments   = $_POST['comments'];
    $ip=$_SERVER['REMOTE_ADDR'];

    $recipient  = '*****@******.com';
    $subject    = "Comments submitted from the Contact Us form on www.wavesfm.com from $name" ;

    $message   = "This is an email submitted from the Contact Us form on the website www.*****.com containing details from $name \n";
    $message  .= "    \n";
    $message  .= "Name: $name \n";
    $message  .= "Email: $email \n";
    $message  .= "Phone Number: $phone \n";
    $message  .= "Comments: $comments \n\n\n";
    $message  .= "IP Address: $ip ";

    $headers   = "From: noreply@********.com \n";
    $headers  .= "Reply-To: $email";

    mail($recipient,$subject,$message,$headers);
    header( 'Location: http://www.*****.com/thanks.php' ) ; 
?> 
```

任何人都可以看到该代码有任何问题吗？我尝试将 -fnoreply@ *** *.com 添加为发送参数，但它不会更改我自己的电子邮件地址，使其不再显示为发件人。

我不认为这是一个 PHP 问题，它看起来更像是一个 Postfix 问题，但真正困扰我的是我在任何地方都没有使用的电子邮件地址如何显示为发件人。

有没有人有过这方面的经验？和两周前一样，我根本没有使用过 Postfix，所以它对我来说相当新。

网络服务器：Cent OS，Plesk 11.0.9

邮件服务器：MS Exchange 邮件服务器/使用 ORF

其中一封电子邮件的后缀日志

3 月 27 日 13:48:41 专用后缀/拾取 [12199]: 652EFA106C5: uid=48 from= 3 月 27 日 13:48:41 专用后缀/清理[14376]: 652EFA106C5: message-id=<20130327134841.652EFA106C5@dedicated.mydomain .com> Mar 27 13:48:41 dedicated postfix/qmgr[12198]: 652EFA106C5: from=, size=726, nrcpt=1 (queue active) Mar 27 13:48:41 dedicated postfix/smtp[14378]: 证书mail.mydomain.com[82.888.888.51]:25 验证失败：不受信任的颁发者/CN=clientdomain-WAV01-CA Mar 27 13:48:42 dedicated postfix/smtp[14378]: 652EFA106C5: to=, relay=mail。 client_website.com[82.888.888.51]:25, delay=0.89, delays=0.04/0.01/0.36/0.48, dsn=2.6.0, status=sent (250 2.6.0 <20130327134841.652EFA106C5@dedicated.mydomain.com> [ InternalId=11846] 等待投递的排队邮件）3 月 27 日 13:48:42 专用后缀/qmgr[12198]：652EFA106C5：已删除

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:26:32.157

以下代码可能存在一些字符串连接问题：

```
$headers = "From: noreply@********.com \n"; 
```

尝试

```
$headers = "From: noreply@********.com \r\n"; 
```

我建议使用 phpmailer 类来发送广泛使用的电子邮件： [https ://github.com/Synchro/PHPMailer](https://github.com/Synchro/PHPMailer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:39:23.240

php.ini [sendmail_from](http://php.net/manual/en/mail.configuration.php)指令仅适用于 windows 框

> sendmail_from 字符串 在 Windows 下 PHP 发送的邮件中应该使用哪个“发件人：”邮件地址。该指令还设置“Return-Path:”标头。

我不认为这是一个代码问题。您在 Linux 机器上从哪个用户运行 webserver+php 环境？如果您以自己的身份运行它，那么它可能会使用您的电子邮件地址提交到 postfix。

如果您使用的是 postfix，请不要忘记跟踪 /var/log/maillog，这可以告诉您很多信息并帮助您找到问题的根源。

`sudo tail -f /var/log/maillog`

[您可以尝试使用Sendgrid](http://sendgrid.com/)注册一个免费帐户，并结合 PHPMailer、[Zend Mailer](http://sendgrid.com/docs/Integrate/Frameworks/zend.html)或 Symfony Mailer 库使用它来发送电子邮件并查看您是否遇到相同的问题。

# eclipse - 创建一个不是系统进程包装器的 IProcess

> ID：15659112
> 
> 赞同：1
> 
> 时间：2013-03-27T12:44:21.483
> 
> 标签：eclipse, language-agnostic, eclipse-plugin

在文章（和示例）[How to write an Eclipse Debugger](http://www.eclipse.org/articles/Article-Debugger/how-to.html)中，ILaunch 的实现创建了一个新的 IDebugTarget（仅在调试模式下，不在运行模式下）。在这样做的同时，它总是会创建一个新的系统进程，并将其包装到一个 IProcess 中（很可能是 IProcess 的这个实现，org.eclipse.debug.core.model.RuntimeProcess）。它将 IProcess 附加到 IDebugTarget。

我的问题是，对于任何语言（不是 Java），调试目标是否一定需要系统进程？我有一种不能从一次性系统命令执行或调试的语言，它全部基于套接字。我需要为此实施一个新的 IProcess 吗？这是否可能/可行，因为 IProcess 似乎是一个系统进程包装器。Eclipse 是否强制从 Eclipse 生成新系统进程的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:17:41.487

答案是肯定的，这是可能的，也是一个好主意。整个 IProcess 接口很可能是一个服务器连接，因为许多 IDE 要么生成一个进程，要么打开一个到服务器的连接（如交互式解释器或完整的应用程序服务器）。当然，基于服务器的 IProcess 没有通用实现，但是在本地生成进程是一件非常容易的事情，因为 Eclipse 提供了一个具体的类，因此当 RuntimeProcess 可用时。

此外，它甚至说（不是在文章中，但是同一位作者在演讲中介绍了生成与连接到服务器。具体来说，他说如果您不只是生成，请实现自己的 IProcess。

# php - 在 PHP CLI 交互模式下添加命令

> ID：15659114
> 
> 赞同：4
> 
> 时间：2013-03-27T12:44:27.087
> 
> 标签：php

如何`php -a`通过预先执行某些命令来启动 php 交互模式（）？

选项`-B`( `--process-begin`) 似乎正是我想要的，但看起来这不能与 `-a- 结合使用：

```
$ php -B '$x = true; echo $x;' -a
Either execute direct code, process stdin or use a file. 
```

php 二进制文件应该从另一个编写脚本的 php 控制台中调用，然后交给用户。

是否可以在移交前提供代码？

或者是否有另一个可以使用的 PHP 选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:49:40.583

*基于@Justin T. 的评论。*

auto_prepend_file 选项可用于包含一些脚本：

```
# 猫 foo.php
$x = 真；

# php -d auto_prepend_file=foo.php -a
交互式外壳

php > 回声 $x;
1

```

# javascript - 在 asp.net 网站中添加 javascript 函数的简单方法

> ID：15659118
> 
> 赞同：0
> 
> 时间：2013-03-27T12:44:41.117
> 
> 标签：javascript, asp.net, master-pages

我在 JavaScript 中有大约 10 到 12 个函数。在这些函数使用的控制、获取、聚焦和其他函数时，我想调用其中的 2 或 3 个。

我拥有虚拟键盘的所有这些功能......我想在母版页上添加虚拟键盘（我已经使用 HTML 表单在 JavaScript 中创建了虚拟键盘）。

我已经将该代码添加到母版页中并且我的键盘正在工作，但它仅适用于简单的 HTML 控件（即，没有 runat="server" 属性）。当我添加 runat="server" 时它不起作用。

我不知道如何从内容或子页面调用此函数。

我的代码如下：--（我在母版页中添加的 JavaScript 代码......这是代码的一部分（不完整））

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="MasterPage2.master.cs" Inherits="MasterPage2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
    <script language="javascript" type="text/javascript">

        function setId(el) {
            id = el;
            //alert(el);
            document.getElementById(id).focus();
            reset();
            return 0;
        }  

        function restoreCode(evt) {
            ButtonUp(kcode);
        }

        function writeKeyPressed(evt) {
            InsertChar('k', kcode);

            return false;
        };

        function InsertChar(mode, c) {
            document.getElementById(id).focus();
        }

        function ButtonDown(c) {
            reset();
        }

        function ButtonUp(c) {
            //codes
            resets();
        }

        function Shift() {
            //codes
        }
    </script> 
```

当我从 HTML 控件的内容页面调用它时，它在代码中**没有**`runat="server"`属性，那么**它将起作用。**

```
 <input id="txt_pwd" type="password" onfocus="setId('txt_pwd');" /> 
```

当我从内容页面（即`runat="server"`代码中具有属性的 ASP 控件）调用它时，它将不起作用。

```
<input id="txt_pwd" type="password" onfocus="setId('txt_pwd');" runat="server" /> 
```

请任何人告诉我一个解决方案，我将使用来自内容页面的服务器端控件调用我的函数（在母版页上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:59:25.430

使用时它不起作用，`runat="server"`因为 .NET 更改了控件的 ID。因此，在这种`runat="server"`情况下，您的 JavaScript 正在寻找错误的 id。解决它的一种方法是告诉 .NET 不要使用[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)更改 ID 。

```
<input id="txt_pwd" type="password" clientidmode="Static" onfocus="setId('txt_pwd');" runat="server" /> 
```

如果您不使用静态模式，还有其他方法可以获取生成的 ClientID，因为您不想在转发器中使用它，或者如果 ID 有可能重复。在这种情况下，您可以使用 .ClientID，如下所示：

```
document.getElementById('<%= txt_pwd.ClientID %>'); 
```

[读取 ClientID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)

一种更简单的方法可能是使用`onfocus="setId(this);"`然后

```
function setId(el) {
    id = el.id; 
```

# c++ - 模板功能的小烦恼

> ID：15659119
> 
> 赞同：3
> 
> 时间：2013-03-27T12:44:41.760
> 
> 标签：c++, templates

好的，假设我有这样的功能

```
template <typename T>
void Func(std::vector<T> x, T alpha = 1)
{
    // ... do stuff
} 
```

我想用一个复杂的类型，像这样

```
std::vector<std::complex<double>> x;
Func(x, 5.5); 
```

然后编译器抱怨（VS2010）`template parameter 'T' is ambiguous`因为它`could be 'double' or 'std::complex<double>'`. 明显的修复，这样称呼它

```
Func(x, std::complex<double>(5.5)); 
```

但是，那个，我不想要。为什么不能自动转换为复杂类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:48:30.583

它不起作用的原因是因为第一个参数导致`T`被推断为，`std::complex<double>`而第二个参数导致它被推断为`double`。它在推导参数时根本不考虑转换。显然，这使得推论变得模棱两可。

您可以在助手的帮助下强制第二个参数类型不可推导`identity`：

```
template <typename T>
struct identity { typedef T type; };

template <typename T>
void Func(std::vector<T> x, typename identity<T>::type alpha = 1)
{
    // ... do stuff
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T12:48:44.737

这个怎么样？

```
template<typename T>
struct identity {
    typedef T type;
};

template <typename T>
void Func(std::vector<T> x, typename identity<T>::type alpha = 1)
{
    // ... do stuff
} 
```

第二个参数不参与模板参数推导，将使用向量模板参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:51:03.090

如果您需要一个类型与包含类型不同的默认参数，只需使用两种不同的类型：

```
template <class T, class U>
void Func(vector<T> x, U y); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:50:08.520

如果您不喜欢身份助手并且只希望它是可转换的，请尝试以下操作：

```
template <typename T, typename U>
void Func(const std::vector<T>& x, U alphaU = 1)
{
    const T alpha(alphaU); // Convert to T
    // ... do stuff
} 
```

**更新：**

[回复您的评论：我在http://liveworkspace.org](http://liveworkspace.org)使用几个编译器进行了尝试，这段代码对我来说构建得很好：

```
#include <vector>
#include <complex>

template <typename T, typename U>
void Func(const std::vector<T>& x, U alphaU)
{
   const T alpha(alphaU); // Convert to T
   (void) x;
   (void) alpha;
}

template <typename T>
void Func(const std::vector<T>& x)
{
    Func( x, 1 );
}    

int main()
{
   std::vector<std::complex<double>> v(10);
   Func( v, 5.5 );
   Func( v );
} 
```

# perl - 读取可能在 Perl 中被截断的文件

> ID：15659121
> 
> 赞同：3
> 
> 时间：2013-03-27T12:44:53.050
> 
> 标签：perl, file-io, truncate

我正在使用 Perl 读取可能在任何时候被截断的日志文件。如果发生这种情况，我想再次从头开始读取文件，但默认的 Perl 行为似乎是等到文件指针赶上。例如，如果我运行以下命令：

```
perl -e 'open FILE, "test"; while (1) { $line = <FILE>; print "$line"; }' 
```

然后做：

```
for i in 1 2 3; do echo $i >> test; done
:>test
for i in 4 5 6 7; do echo $i >> test; done 
```

我得到的输出是：

```
1
2
3
7 
```

但如果我要做同样的事情，将 Perl 代码替换为：

```
tail -f test 
```

然后（忽略到stderr的尾部输出）我得到我想要的输出，即：

```
1
2
3
4
5
6
7 
```

显然，我不能只使用tail，因为我想对线路本身进行一些处理。我确实有一个想法是将两者结合起来：

```
tail -f test | perl -e 'while (1) { $line = <STDIN>; print "$line"; }' 
```

它适用于我的 Linux 开发机器，但不幸的是不适用于 Solaris 目标平台。

有任何想法吗？

根据要求，使用 File::Tail 的示例如下：

```
perl -e 'use File::Tail; $file = File::Tail->new("test"); while (defined($line=$file->read)) { print "$line"; }' 
```

如果我像以前一样将数据输入到测试中，我得到的输出只是：

```
7 
```

这显然不是所希望的。我尝试调整 File::Tail 将等待的 maxinterval，如下所示：

```
perl -e 'use File::Tail; $file = File::Tail->new(name => "test", maxinterval => 1); while (defined($line=$file->read)) { print "$line"; }' 
```

但在这种情况下，将数据输入测试文件太快了，如下所示：

```
for i in 1 2 3; do echo $i >> test; done; :>test; for i in 4 5 6 7; do echo $i >> test; done 
```

结果只是：

```
4
5
6
7 
```

不幸的是，对于我们（非常繁忙的）应用程序来说，这是一个现实的场景。为了比较起见，Linux tail 似乎可以正确处理那种数据输入速度，所以很明显可以做到（尽管公平地说，也许不是在 Perl 中......？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:28:32.267

[Linux`tail`命令](http://linux.die.net/man/1/tail)使用[inotify](http://en.wikipedia.org/wiki/Inotify)机制来监视对文件的更改，而无需反复轮询文件以获取更新。这使其能够快速可靠地响应文件中的任何更改。

要在 Perl 中实现类似的功能，您可以使用 CPAN 中的[Linux::Inotify2](http://search.cpan.org/perldoc?Linux%3a%3aInotify2)模块。不幸的是，顾名思义，这个模块只能在 Linux 上运行，所以它不能帮助您将脚本移植到 Solaris。

您*也许*可以将[FAM](http://en.wikipedia.org/wiki/File_Alteration_Monitor)与[SGI::FAM](http://search.cpan.org/perldoc?SGI%3a%3aFAM)模块一起使用；如果没有可用的本机文件更改通知机制，它可能仍会在内部退回到轮询，但至少它应该提供一个相当好的和经过测试的文件轮询实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:11:57.643

听起来您希望`tail`在 Perl 中进行模拟。

*   如果您有权访问 CPAN，则可以使用[`File::Tail`](http://search.cpan.org/perldoc?File%3a%3aTail).

    它是纯 Perl（不是 XS），因此如果没有 CPAN 访问权限，您可以看到它是如何[在源代码中实现的。](http://cpansearch.perl.org/src/MGRABNAR/File-Tail-0.99.3/Tail.pm)

*   另请参阅[PerlFAQ5](http://learn.perl.org/faq/perlfaq5.html#How-do-I-do-a-tail--f-in-perl-)（“如何在 perl 中执行 tail -f？”）

# drop-down-menu - 下拉列表不选择

> ID：15659130
> 
> 赞同：1
> 
> 时间：2013-03-27T12:45:28.197
> 
> 标签：drop-down-menu

我是新手，可能遗漏了一些明显的东西。（见下面的代码） Initializer.cs 工作是因为下拉项“Regular”和“Comm”在运行 Create.cshtml 时正确显示。但是，Create.cshtml 不起作用：下拉字段保持空白，而标量字段正确加载。

我花了几个小时查看这个论坛（和其他论坛）的回复，并尝试了无数建议，但都无济于事。例如，有几个人说问题是在控制器和下拉列表中使用相同的名称。我已经进行了更改，但 Create.cshtml 仍然无法正常工作。这是代码：

```
Models.Flight.cs
public virtual ICollection<FlightType> FlightTypes { get; set; }

Models.FlightType.cs
public class FlightType
{
[Key] 
public int FlightTypeID { get; set; }
public string FlightTypeEntry { get; set; }
}

DAL.FlightInitializer.cs
var flighttypes = new List<FlightType>
{
new FlightType { FlightTypeID = 1, FlightTypeEntry = "Regular" },
new FlightType { FlightTypeID = 2, FlightTypeEntry = "Comm" }
};
flighttypes.ForEach(e => context.FlightType.Add(e));
context.SaveChanges();

Controllers.FlightController.cs
// GET: /Flight/Create
public ActionResult Create()
{
ViewBag.FlightTypeVB = new SelectList(db.FlightType, "FlightTypeID", "FlightTypeEntry");
return View();
}

// POST: /Flight/Create
[HttpPost]
public ActionResult Create(Flight flight)
{
if (ModelState.IsValid)
{
db.Flight.Add(flight);
db.SaveChanges();
return RedirectToAction("Index");
}

ViewBag.FlightTypeVB = new SelectList(db.FlightType, "FlightTypeID", "FlightTypeEntry");
return View(flight);

Views.Flight.Create.cshtml
<div class="editor-label">
@Html.LabelFor(model=>model.AircraftModels)
</div>
<div class="editor-field">
@Html.DropDownList("AircraftModelID", (IEnumerable<SelectListItem>)ViewBag.AircraftModelVB)
@Html.ValidationMessageFor(model => model.AircraftModels)
</div> 
```

非常感谢您的任何建议。

# java - Python 服务器和 Java 客户端之间的连接被拒绝

> ID：15659132
> 
> 赞同：0
> 
> 时间：2013-03-27T12:45:35.097
> 
> 标签：java, sockets, exception

问题：我想在 Python 服务器和 Java 客户端之间建立连接。客户端引发异常：

> java.net.ConnectException：连接被拒绝：连接

服务器代码：

```
print('MOTD/name system initialized!')
        global people
        welcome = socket.socket()
        welcome.bind((socket.gethostname(), 31123))
        while True:
            welcome.listen(1)
            w, nouse = welcome.accept()
            ...
            w.send(m.strip().encode())
            w.close() 
```

客户端代码：

```
Socket welcomesocket = new Socket("localhost", 31123);
BufferedReader motd = new BufferedReader(new InputStreamReader(welcomesocket.getInputStream()));
servs.set(i, motd.readLine());
welcomesocket.close(); 
```

问题必须出在 Java、Python 中——在相同情况下，Python 连接工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:54:16.150

这似乎真的是一个连接问题，而不是真正的“Java”。也许有关您的环境的更多信息会有所帮助。

同时：

如果您有 telnet 客户端，请尝试像“telnet localhost 31123”一样运行它，这应该允许连接。否则，您连接的服务器有问题。

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:07:24.613

一个问题是python服务器正在绑定并接受与服务器主机名对应的IP地址，但客户端正在尝试连接到“localhost”；即环回IP地址。

客户端需要使用与服务器绑定的主机名/IP 地址相同的主机名/IP 地址。如果客户端和服务器在不同的机器上，那么你根本不能使用“localhost”。（“localhost”名称通常表示`127.0.0.*`环回地址。顾名思义，到环回地址的连接“环回”到您要连接的主机；即环回连接不会离开客户端的机器/虚拟机。

# python - 如何强制 python 函数使用 UTF-8

> ID：15659133
> 
> 赞同：1
> 
> 时间：2013-03-27T12:45:37.937
> 
> 标签：python, character-encoding

我有python函数的问题`os.path.isdir`

当我尝试使用它时，我得到：`UnicodeDecodeError: 'ascii' codec can't decode byte 0xc5 in position 36: ordinal not in range(128)`

我已经在文件的标题中放置了编码“戳记”`#!/usr/bin/env python # coding: utf-8`

我还使用了相当适当的字符串解码，可以获取 utf-8 符号（我通过 QT QLineEdit 加载它们——但这并不重要）。

```
tmp_filepath = u''
tmp_filepath = tmp_filepath.decode('utf-8')
tmp_filepath += QtGui.QFileDialog.getExistingDirectory(self,"Choose directory",self.directorypath,QtGui.QFileDialog.ShowDirsOnly) 
```

我尝试使用时出现问题：`os.path.isdir(tmp_filepath)`

我读过这可能是由错误的 python 版本（非 utf-8）引起的，但我找不到有关此的其他信息。我在 Linux Ubuntu 10.04 上使用 python 2.6.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:33:17.330

isdir 想要将其参数转换为字节序列 (str)，因为底层文件系统使用字节序列作为文件名。如果您提供一个字符串（unicode），它必须以某种方式对其进行编码。

它使用与打印命令相同的编码规则。尝试 print tmp_filepath ，您可能会得到相同的异常。

要解决这个问题，(a) 设置您的语言环境（例如环境中的 LANG=en_US.utf-8）或 (b) 将 tmp_filename.encode('utf-8') 传递给 isdir 和 mkdir。

我推荐（一）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:25:05.527

Qt 返回一个 QString 对象 - 你必须将它转换为 Python unicode 并将其编码为 utf-8：

```
 tmp_filepath = unicode(tmp_filepath)
 os.path.isdir(tmp_filepath.encode("utf-8")) 
```

此外，在今天继续您的编程之前，请务必阅读[http://www.joelonsoftware.com/articles/Unicode.html 。](http://www.joelonsoftware.com/articles/Unicode.html)

或者，如果您不必与 Python 中的其他文本变量进行互操作，QString 对象`.toUtf8`本身提供了一个方法：

```
os.path.isdir(tmp_filepath.toUtf8()) 
```

# android - 编译内核时出错：缺少双重算术？

> ID：15659134
> 
> 赞同：-1
> 
> 时间：2013-03-27T12:45:42.620
> 
> 标签：android, c, linux-kernel, kernel, linux-device-driver

我正在用 android 工具链编译一个 android 内核。在驱动程序内部，我需要使用双精度算术，但是当我编译时会出现很多错误，每次使用双精度类型都会出错。例如我得到：which is int to double cast

```
/home/vektor/nckernel/customer/drivers/misc/adc_js.c:288: undefined reference to `__aeabi_i2d' 
```

要编译内核，我使用以下命令：

```
make ARCH=arm CROSS_COMPILE=/path/to/...-eabi- -j12 uImage 
```

在我的 Makefile 中，我明确地`-L/path/to/libgcc.a`将 gcc 库链接到 ld 和 gcc。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:18:23.983

You may not be linking against `libgcc` for some reason. Until you figure out why, you can work around the problem by adding the following to your `Android.mk`:

```
LOCAL_LDFLAGS := $(call link-whole-archives, $(call host-path, $(TARGET_LIBGCC))) 
```

# css - 具有绝对孩子的多个div的自动高度？

> ID：15659143
> 
> 赞同：1
> 
> 时间：2013-03-27T12:45:52.980
> 
> 标签：css

我正在开发类似“卡片”的界面，每个“卡片”（相对位置的矩形 div）都有多个绝对定位的子元素，并且像这样在同一页面上有多个 div。

我花了几个小时寻找解决方案，但没有成功。从我读过的内容来看，不可能在具有绝对子级的 div 上使用 CSS 进行自动高度。我也偶然发现了一个[jQuery 示例](https://stackoverflow.com/questions/9061520/auto-height-on-parent-container-with-absolute-fixed-children)，但我不知道如何操作它来处理多个 div。我还尝试了清除修复和操纵溢出。

我一直在处理的页面（[http://q.glorbi.com/profile.php](http://q.glorbi.com/profile.php)）工作并且看起来很好，但是每个 div 的高度限制为 300 像素，这可能太少或太多，具体取决于它的内容。

有谁知道如何调整具有绝对孩子的多个父母的大小？任何解决方案都可以，即使它依赖于 jQuery 等！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:56:35.920

你的每张卡片都是这样的

```
<div class="box">
  <div id="askerdp"></div>
  <div class="question">Are you awesome?</div>
  <div class="answer">I am the awesomest human being alive.</div>
</div> 
```

使用`.box`相对和内部 div 绝对。鉴于每张卡片的简单结构，你为什么不这样做呢？

```
<div class="box">
  <div class="container">
    <div id="askerdp"></div>
    <div class="question">Are you awesome?</div>
  </div>
  <div class="answer">I am the awesomest human being alive.</div>
</div> 
```

并使`.container`相对的、`#askerdp`绝对的和其他一切都是静态的。这应该可以解决您的自动高度问题，并且看起来仍然和现在一样。

# php - 可以用 PHPWord 读取 MSWORD 吗？

> ID：15659144
> 
> 赞同：2
> 
> 时间：2013-03-27T12:45:55.490
> 
> 标签：php, ms-word, phpword

我知道 PHPWord 库可以创建一个 word 文件，但是，是否可以用 PHPWord 读取 word 文件？如果是，如何？我在这个网站上看到了很多关于用 php 读取 word 文件的答案。答案是“PHPWord”，其中一个答案是[this](https://stackoverflow.com/questions/4726786/read-microsoft-excel-word-and-powerpoint-info-using-php)。但是找不到怎么可能。我在 PHPWord 官方网站上搜索，但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:57:59.613

你应该看看这个问题： [read word document in php](https://stackoverflow.com/questions/10646445/read-word-document-in-php)

它提供了一些关于如何在 PHP 中读取 docx 文档的内幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:56:22.340

答案是一个简单的“不”。PHPWord 不读取 word 文档（尽管它可以从模板读取基本样式信息），只写入它们。

# java - 重新加载 JinternalFrame Java

> ID：15659146
> 
> 赞同：1
> 
> 时间：2013-03-27T12:46:00.710
> 
> 标签：java, swing, reload, jinternalframe

我有一个具有大量 JInternalFrames 的摇摆应用程序。其中之一在表单加载时从数据库加载数据。我需要它，以便在一个动作事件中，JInternalFrames 完全重新加载到它第一次显示数据库中的新数据时的相同状态。我尝试了几个选项，例如：

```
revalidate(), repaint(); updateUI() 
```

但他们都没有工作。

```
 public void actionPerformed(ActionEvent ae) {
        Object obj = ae.getSource();
        if (obj == btnAdd) {

                    try {
                  ..................
                  revalidate();
                 // repaint();
                  //updateUI();

                    } catch (Exception db) {
                        JOptionPane.showMessageDialog(this, db,
                                "Error", JOptionPane.ERROR_MESSAGE);
        }
      }
    } 
```

如何在不先关闭它的情况下重新加载整个 JInternalFrame？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:52:26.670

1.  `revalidate()`&是对已经可见的 GUI的新`repaint()`方法的有效方法`add, remove, modify(change sizing, properties not value)``JComponent`

2.  `revalidate()`&`repaint()`可能是对可见 Swing GUI 的所有更改完成后的最后一行代码，

3.  `revalidate()``repaint()`并且没有将数据库中的数据重新加载到已经可见的 Swing GUI 中的as`JComponents`值，那么您[在 Swing 中遇到了 Concurency问题](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

4.  使用`Runnable#Thread`（需要将所有输出包装到 Swing GUI中`invokeLater`）或者`SwingWorker`，您的工作有一些有趣的方法`publish()`，`proccess()`并且`done()`，这些方法默认情况下会通知 EDT

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:00:40.467

作为*替换*您的视图的替代方法`JInternalFrame`，如此处建议[的](https://stackoverflow.com/a/15659286/230513)那样，*更新*该视图侦听的相应模型。例如，具有 a 的 a可能会被赋予不同[的](https://stackoverflow.com/a/8260663/230513).`JInternalFrame``JTable``TableModel`

# utf-8 - UTF-8 格式的 HKSCS（香港补充字符集）

> ID：15659150
> 
> 赞同：1
> 
> 时间：2013-03-27T12:46:14.813
> 
> 标签：utf-8, character-encoding

我们有一个客户需要将一些包含 HKSCS 字符的内容导入我们的系统。这可能很难处理吗？

我们的系统完全基于 UTF-8，从导入的那一刻开始，一直到我们所做的处理，一直到输出显示给用户。

恐怕这是我什至不确定我在问正确问题的情况之一！非常欢迎任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:23:16.280

Unicode 包含 HKSCS 包含的所有字符。因此，任何 Unicode 编码，例如 UTF-8，都可以编码任何 HKSCS 字符。

无论如何都没有 X（其中 X 是字符集或编码，但编码更错误）字符这样的东西。字符并不完全属于单个字符集。

# haskell - Haskell 生成按元素总和排序的递增对

> ID：15659152
> 
> 赞同：1
> 
> 时间：2013-03-27T12:46:23.520
> 
> 标签：haskell

我是 Haskell 的新手，我想生成一个如下所示的对列表：

[(0,1), (0,2), (0,3), (1,2), (0,4), (1,3), (0,5) .... ] 等等等等。

我做了一个生成有序对的函数

```
orderedPairs = [ (x, y) | x <- [0 .. ], y <- [1 ..], x < y] 
```

但我不知道如何从这里继续下去。谢谢你。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:12:39.150

感谢您的提示。我设法这样做：

```
orderedPairs n = [ (x, y) | x <- [0 .. n], let y = n - x, x < y]
pairStream n = (orderedPairs n) ++ (pairStream (n + 1))
increasingPairs = pairStream 0 
```

take 10 increasePairs 返回正确的输出。:)

# paypal - Paypal Express Checkout - 禁用礼券/优惠券

> ID：15659160
> 
> 赞同：0
> 
> 时间：2013-03-27T12:46:37.937
> 
> 标签：paypal, express-checkout

我正在使用 Paypal API 对实物和数字商品进行支付。

一切都按预期工作，但是我调用 set_express_checkout（使用 AngelEye PHP 类）并将用户重定向到 Paypal 网站，在“付款方式”部分下的付款审查中，我看到了兑换 Paypal 优惠券的选项。

如果可能，我想禁用此选项，但在文档中似乎没有任何与之相关的参数。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:16:36.947

如果您指的是在结账期间禁用 PayPal 页面上使用礼券/优惠券的选项，则无法在您的 API 调用中禁用此功能。

# c# - 具有强类型项目的组合框

> ID：15659164
> 
> 赞同：1
> 
> 时间：2013-03-27T12:46:49.777
> 
> 标签：c#, winforms, combobox

我想创建一个从 ComboBox 继承的控件。我想要一个只接受某种类型的项目的组合框。

所以我需要否决 Items 属性。（注意新的关键字）。但是我在这个被否决的 Items 属性的设置区域中放置了什么？

```
 new public List<TimeSpanItemClass> Items
    {
        get
        {
            return base.Items.Cast<TimeSpanItemClass>().ToList();
        }
        set
        {
            ?
        }
    } 
```

我想不通，在谷歌上搜索几乎一无所获。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T12:58:24.760

组合框已经支持这一点。

将您的元素列表放入属性中`DataSource`：

```
var persons = new List<Person>();
// ToDo: fill list with some values...

myComboBox.DataSource = persons; 
```

在属性中输入`DisplayMember`将代表用户应该看到的对象的属性。如果不设置，组合框将调用`.ToString()`所选元素。

```
myComboBox.DisplayMember = "FullName"; 
```

在属性中输入`ValueMember`您希望从代码中的对象接收的属性。如果不设置，组合框将返回对象本身。

```
myComboBox.ValueMember = "Born"; 
```

要从组合框中取出当前选定的对象，只需将属性`SelectedValue`转换为所需的类型。

```
private void OnComboBoxFormatSelectedIndexChanged(object sender, EventArgs e)
{
    DateTime born = (DateTime)comboBox.SelectedValue
} 
```

### 分配后更改列表的更新

如果在将数据源分配给组合框后需要更改列表或其中的项目**，**则必须通知组合框有关此更改。最简单的方法是简单地将数据源重新分配给组合框：

```
myComboBox.DataSource = persons; 
```

更简洁的方法是，如果列表本身可以在发生任何更改时触发事件。此功能由 实现，[`BindingList<T>`](http://msdn.microsoft.com/en-us/library/ms132679.aspx)如果您通过添加或删除元素来更改列表，则组合框会自动更新。

信息流的下一步将是通知组合框是否更改了项目本身（在我们的示例中，例如一个人的姓氏）。要做到这一点，列表中的对象必须实现一个`PropertyNameChanged`事件（在我们的示例中，这将是 LastNameChanged，因为属性名称将是 LastName），或者您必须[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)在您的类中实现。如果您这样做并使用绑定列表，这些事件将自动转发到组合框，并且值也将在那里更新。

**注意**：在第一步中，a`BindingList`和的使用`NotifyPropertyChanged`效果很好，但是如果你要从另一个线程中更改列表或对象属性（导致跨线程异常），你真的会遇到麻烦。但也可以避免这种情况。

您只需要在 ComboBox 和 BindingList 之间再增加一层；一个[`BindingSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)。这可以暂停和恢复通知链，以便您可以从另一个线程更改列表：

```
var persons = new BindingList<Person>();
var bindingSource = new BindingSource();
bindingSource.DataSource = persons;
comboBox.DataSource = bindingSource;

// Suspend change the list from another thread,
// and resume on the gui thread.
bindingSource.SuspendBinding();
Task.Factory.StartNew(() => persons.Add(Person.GetRandomFromDatabase()))
            .ContinueWith(finishedTask => bindingSource.ResumeBinding(),
                            TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:56:21.447

我已经实现了我想要的：

1.  创建仅允许添加 TimeSpan 值的自定义 Combobox 控件
2.  以自定义格式显示时间跨度值。

一路创建只接受一种类型的自定义组合框似乎没用。但是我在一个经常使用具有时间跨度值的组合框的大型项目中需要它。因此，将所有必要的东西放在一个地方（一个类，一个文件）是最方便的。

通过使用 BindingList（以前从未使用过）。这是我的代码。

```
public partial class ComboBoxTimeSpan : ComboBox
{
    private BindingList<TimeSpanItemClass> _BindingList = new BindingList<TimeSpanItemClass>();

    public ComboBoxTimeSpan()
    {
        InitializeComponent();
        Items = new BindingList<TimeSpan>();
        this.Items.ListChanged += Items_ListChanged;
        this.DataSource = _BindingList;
    }

    void Items_ListChanged(object sender, ListChangedEventArgs e)
    {
        _BindingList.Clear();
        foreach (TimeSpan ts in Items)
        {
            _BindingList.Add(new TimeSpanItemClass(ts));
        }
    }

    /// <summary>
    /// The items in this combobox need to be of the type TimeSpan as this combobox is designed for showing time span values in easy to read text.
    /// </summary>
    new public BindingList<TimeSpan> Items
    {
        get;
        private set;
    }

    /// <summary>
    /// The ComboBoxTimeSpan has items that can all be converted to a time span.
    /// They will display as 1 hour, 2 hours, 1 minute, 1 hour and 2 minutes, 1 day, 2 weeks and 3 days, 3 days, etc...
    /// Its precise on the microsecond, no less
    /// </summary>
    private class TimeSpanItemClass : Object
    {
        /// <summary>
        /// The timespan that this object represents
        /// </summary>
        public TimeSpan timespan
        {
            get;
            set;
        }

        /// <summary>
        /// The constructor of this class needs a TimeSpan object
        /// </summary>
        public TimeSpanItemClass(TimeSpan ts)
        {
            timespan = ts;
        }

        /// <summary>
        /// The textual represention of the time span that this object represents.
        /// </summary>
        /// <returns>A string by a simple format</returns>
        public override string ToString()
        {
            //Specify your custom format here
            return timespan.ToString();
        }
    }
} 
```

现在组合框可以用作

```
cbts = new ComboBoxTimeSpan();
ctbs.Add(TimeSpan.FromDays(1)); 
```

感谢所有的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:51:50.050

```
set {
    throw new NotImplementedException("I don't know why I put a setter here, because it doesn't really make sense");
} 
```

# jackson - 如何在杰克逊订购哈希集？@JsonPropertyOrder 不起作用

> ID：15659167
> 
> 赞同：2
> 
> 时间：2013-03-27T12:46:57.683
> 
> 标签：jackson, spring-roo, hashset

我有两个实体，调查和信息。

**调查单位：**

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord(table = "information")
@JsonPropertyOrder({ "seq"})
public class Information {

    @NotNull
    private String title;

    @ManyToOne(fetch = FetchType.LAZY)
    @JsonBackReference
    private Survey survey;

    private int seq;
} 
```

**信息实体：**

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord(table = "survey")
public class Survey {
    @NotNull
    @Size(min = 3, max = 50)
    private String title;  

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy="survey")
    @JsonManagedReference
    private Set<Information> informations = new HashSet<Information>();

} 
```

我用杰克逊来序列化。

**我的期望：**

```
{
  "survey" : {
    "title" : "Medical Survey",
    "informations" : [ {
      "id" : 1,
      "seq" : 0,
      "title" : "Name:",
      "version" : 0
    }, {
      "id" : 2,
      "seq" : 1,
      "title" : "Age:",
      "version" : 0
    },  {
      "id" : 3,
      "seq" : 2,
      "title" : "test",
      "version" : 0
    }, {
      "id" : 4,
      "seq" : 3,
      "title" : "test",
      "version" : 0
    } ],
    "id" : 1,
    "version" : 134
  }
} 
```

**但结果是：**

```
{
  "survey" : {
    "title" : "Medical Survey",
    "informations" : [ {
      "id" : 2,
      "seq" : 1,
      "title" : "Age:",
      "version" : 0
    }, {
      "id" : 4,
      "seq" : 3,
      "title" : "test",
      "version" : 0
    }, {
      "id" : 3,
      "seq" : 2,
      "title" : "test",
      "version" : 0
    }, {
      "id" : 1,
      "seq" : 0,
      "title" : "Name:",
      "version" : 0
    } ],
    "id" : 1,
    "version" : 134
  }
} 
```

1.  我知道在这种情况下使用 list 应该更合适，但 Spring Roo 不支持脚手架中的列表。因此，我使用了带有 seq 编号的 HashSet。
2.  我也知道我可以创建一个信息数组列表作为@transient，然后在业务层对其进行克隆和排序。

但是我想知道有没有更干净的解决方案，即序列化时排序。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:19:54.033

无法订购 HashSet，这只是正常的 java 行为。您正在寻找的是 TreeSet。为它提供一个 Comparator，或者在你的信息类中实现 Comparable，你的 Json 将被订购。

# php - 如果未选中复选框，则不显示复选框值

> ID：15659169
> 
> 赞同：-2
> 
> 时间：2013-03-27T12:47:05.650
> 
> 标签：php, if-statement, checkbox

我有以下代码用于显示一些自定义字段。

```
<table>
    <tbody>
<?php 
foreach ($fields as $field) {
$type = $field['s_type'];
$label = $field['s_label'];
$value = Attributes::newInstance()->getValue($item_id, $field['pk_id']);
if ($type == 'checkbox') {
    if ($value == 'checked') $value = 'Yes';
    else $value = 'No';
}
?>

        <tr>
            <td class='detail_label'><?php echo $label; ?></td>
            <td class='detail_label'><?php echo $value; ?></td>
        </tr>
<?php } ?>
    </tbody>
</table> 
```

当复选框值 = 'No' 时，我不需要在 tr 中显示内容

有可能这样做吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:06:42.977

尝试这个

```
 <table>
    <tbody>
<?php 
foreach ($fields as $field) {
   $displayflag=true; //<--here
$type = $field['s_type'];
$label = $field['s_label'];
$value = Attributes::newInstance()->getValue($item_id, $field['pk_id']);
if ($type == 'checkbox') {
    if ($value == 'checked'){ $value = 'Yes'; }
    else{ $value = 'No';$displayflag=false}; //<--here
}
?>
 <?php if($displayflag){?> //<--here

        <tr>
            <td class='detail_label'><?php echo $label; ?></td>
            <td class='detail_label'><?php echo $value; ?></td>
        </tr>
  <?php }?>//<--here
<?php } ?>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:18:36.977

Why not wrap the `tr` in an if statement? You can reuse the same `$value` variable as you only want to show the value when it is "Yes".

```
<?php
    if ($value == 'Yes')
    {
?>
        <tr>
            <td class='detail_label'><?php echo $label; ?></td>
            <td class='detail_label'><?php echo $value; ?></td>
        </tr>
<?php
    }
?> 
```

# python - 信号压缩

> ID：15659173
> 
> 赞同：4
> 
> 时间：2013-03-27T12:47:14.667
> 
> 标签：python, signal-processing, python-2.5

我需要“压缩”代表信号的 python 数组的大小。信号类似于以下示例。

```
signal = [
    [0.0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0,1.1], #time values
    [1,1,1,2,3,4,4,4,4,2,1,1] #function values
    ] 
```

压缩后，信号应如下面的代码所示。

```
signal_compressed = [
    [0.0,0.2,0.3,0.4,0.5,0.8,0.9,1.0,1.1], #time values
    [1,1,2,3,4,4,2,1,1] #function values
    ] 
```

您会看到，如果存在具有恒定值的区域，则仅存储该区域的第一个和最后一个值。

我编写了以下算法来做到这一点。

```
signal_compressed = [[],[]]

old_value = None
for index, value in enumerate(signal[1]):
    if value != old_value:
        if index > 0:
            if signal_compressed[0][-1] != signal[0][index - 1]:
                signal_compressed[0].append(signal[0][index - 1])
                signal_compressed[1].append(signal[1][index - 1])
        signal_compressed[0].append(signal[0][index])
        signal_compressed[1].append(value)
        old_value = value

if signal_compressed[0][-1] < signal[0][-1]:
    signal_compressed[0].append(signal[0][-1])
    signal_compressed[1].append(signal[1][-1]) 
```

该算法运行良好。对于具有大量恒定段的信号，他的工作速度非常快。但是，如果我尝试压缩没有恒定段的信号（例如正弦信号或噪声信号），该算法的运行速度会非常慢。

如何加速我的算法并保留功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:56:13.087

这是使用生成器的一种方法：

```
def compress(signal):
    prev_t, prev_val = None, None
    for t, val in zip(*signal):
        if val != prev_val:
            if prev_t is not None:
                yield prev_t, prev_val
            yield t, val
            prev_t, prev_val = None, val
        else:
            prev_t, prev_val = t, val
    if prev_t is not None:
        yield prev_t, prev_val

signal = [
    [0.0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0,1.1], #time values
    [1,1,1,2,3,4,4,4,4,2,1,1] #function values
    ]
print zip(*compress(signal)) 
```

我认为转置会更自然`signal`，像这样存储它：

```
[(0.0, 1),
 (0.1, 1),
 (0.2, 1),
 (0.3, 2),
 (0.4, 3),
 (0.5, 4),
 (0.6, 4),
 (0.7, 4),
 (0.8, 4),
 (0.9, 2),
 (1.0, 1),
 (1.1, 1)] 
```

这样，这两个`zip(*seq)`调用将是不必要的，并且整个处理可以在运行中完成。

最后，如果对于大量输入来说这仍然太慢，那么可能值得考虑使用 NumPy。以下是这样一种解决方案的概述：

```
import numpy as np

signal = [
    [0.0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0,1.1], #time values
    [1,1,1,2,3,4,4,4,4,2,1,1] #function values
    ]

def npcompress(signal):
    sig=np.array(signal)
    idx = np.where(sig[1][1:] != sig[1][:-1])[0]
    idx_arr = np.sort(np.array(list(set(idx) | set(idx + 1) | set([0]) | set([len(sig[1]) - 1]))))
    return sig.T[idx_arr]

print npcompress(signal).T 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:32:51.573

你可以使用`itertools.groupby()`：

```
In [93]: from itertools import groupby

In [94]: from operator import itemgetter

In [95]: ti=[0.0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0,1.1]

In [96]: fun=[1,1,1,2,3,4,4,4,4,2,1,1]

In [97]: def func(ti,func):
    new_time=[]
    new_func=[]
    for k,v in groupby(enumerate(func),itemgetter(1)):
       lis=list(v)
       if len(lis)>1:
           ind1,ind2=lis[0][0],lis[-1][0]
           new_time.extend([ti[ind1],ti[ind2]])
           new_func.extend([func[ind1],func[ind2]])
       else:    
           new_time.append(ti[lis[0][0]])
           new_func.append(func[lis[0][0]])
    return new_time,new_func
   ....: 

In [98]: func(ti,fun)
Out[98]: ([0.0, 0.2, 0.3, 0.4, 0.5, 0.8, 0.9, 1.0, 1.1],
          [1, 1, 2, 3, 4, 4, 2, 1, 1]) 
```

# node.js - ZMQ Nodejs 绑定 - ZMQ_POLLIN/POLLOUT 值

> ID：15659174
> 
> 赞同：0
> 
> 时间：2013-03-27T12:47:15.820
> 
> 标签：node.js, sockets, zeromq

我正在检查这些值以了解何时可以关闭套接字（即，当套接字没有轮询/发送任何内容时，因此我没有丢失消息）。

我正在使用发送者`zmq.socket('push');`（`zmq.socket('pull');``zmq``ZMQ_POLLIN``ZMQ_POLLOUT`

```
{
   ...
   ZMQ_POLLIN: 1,
   ZMQ_POLLOUT: 2,
   ...
} 
```

这对我来说没有意义。如何检查套接字如何没有接收到任何内容，以便确定可以将其关闭而不必担心丢失传入/传出消息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:55:44.797

我不认为这些常数意味着你认为它们的意思。它们旨在`zmq.poll()`作为兴趣规范传递给函数（或某些类似的，我不知道 Node.js 版本）。然后，您想要检查`poll()`调用的返回值，以查看套接字是否仍然处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:44:48.220

我确实在看错误的功能。我必须看的是`getsockopt(zmq.ZMQ_EVENTS);`。在我的例子中，该函数必须从发送方或接收方调用，并且结果必须与常量 zmq.ZMQ_POLLIN 或 zmq.ZMQ_POLLOUT 的实际值进行按位与运算。

要检查套接字是否正在接收消息，我这样做：`receiver.getsockopt(zmq.ZMQ_EVENTS) | zmq.ZMQ_POLLIN == 0`，但有结果`>0`并不意味着它正在接收消息，它只是意味着队列未满。

# c# - 无论如何要在 C# 中读取 Windows 服务的服务恢复选项吗？

> ID：15659179
> 
> 赞同：1
> 
> 时间：2013-03-27T12:47:25.853
> 
> 标签：c#, windows-services, wmi

我们正在开发一个应用程序来监控 Windows 服务器的服务、磁盘和事件。

我们需要读取服务恢复选项并将其存储到数据库表中。

所以我需要通过 C# 读取 Windows 服务的服务恢复选项。

请为此提供任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:53:39.833

你需要一些 PInvoke。这可能会有所帮助，

[http://bytes.com/topic/c-sharp/answers/738444-recovery-settings-windows-service](http://bytes.com/topic/c-sharp/answers/738444-recovery-settings-windows-service)

# linux - 如何解决编译错误 -- makefile

> ID：15659180
> 
> 赞同：0
> 
> 时间：2013-03-27T12:47:28.263
> 
> 标签：linux, gcc, makefile, wxwidgets

我修改了一个makefile并试图编译一个项目。但它只是第一步失败。

即使我已经指定了编译模式规则，wrt :--
[http://www.gnu.org/software/make/manual/make.html#Static-Usage](http://www.gnu.org/software/make/manual/make.html#Static-Usage)

生成文件是：-

```
# topdir for wxWidgets base 
top_builddir = /opt/wxgtk
EXTRALIBS = -pthread -lz -ldl -lm
LDLIBS = ${APPEXTRALIBS} ${top_builddir}/lib/libwx_baseu-2.8.a ${EXTRALIBS}
CXX         = c++

CXXFLAGS = -g -O0 -pthread -I/usr/include/SDL -D_REENTRANT -Wall -Wno-ctor-dtor-privacy
CPPFLAGS = -D__WXDEBUG__  -I${top_builddir}/wx/include/base-unicode-release-static-2.8  -D_FILE_OFFSET_BITS=64 -D_LARGE_FILES -D_LARGEFILE_SOURCE=1
CFLAGS = ${APPEXTRACFLAGS} ${CPPFLAGS} -O2 -MMD -pthread -Wall
CFLAGS  += -DLINUX

CANALOBJS =     ../../common/listenthread_unix.o ../../common/clientthread_level1_unix.o ../../common/devicethread_unix.o \
        ../../common/canalshmem_level1_unix.o ../../common/clientlist.o ../../common/controlobject.o \
        ../../common/devicelist.o ../../common/udpreceivethread_unix.o ../../../vscp/common/vscp.o \
        ../../common/clientthread_level2_unix.o ../../common/canalshmem_level2_unix.o \
        ../../common/tcplistenthread.o
CANALHDRS = ../../common/clientlist.h ../../common/controlobject.h ../../common/devicelist.h \
        ../../common/canal.h ../../common/canaldlldef.h \
        ../../common/version.h ../../common/canal_unix_ipc.h ../../common/CanalShMem_level1_unix.h \
        ../../common/CanalShMem_level2_unix.h ../../common/clientthread_level1_unix.h ../../common/clientthread_level2_unix.h
PROJOBJS    = ../../../common/dllist.o ../../../common/configfile.o ../../../common/crc.o
PROJHDRS    = ../../../common/dllist.h ../../../common/configfile.h
OBJS        = canald.o
HDRS        = canald.h

all:        canald

# Build the Linux executable
canald:     $(OBJS) $(HDRS) $(CANALOBJS) $(CANALHDR) $(PROJOBJS) $(PROJHDRS)
        $(CXX)  -o canald $(OBJS) $(CANALOBJS) $(PROJOBJS) -L$(LIBS) $(LDLIBS)

$(OBJS) $(CANALOBJS) $(PROJOBJS):%.o: %.cpp
        $(CXX) -c $(CFLAGS) $< -o $@ 
```

我得到的错误：--

```
make
make: *** No rule to make target `canald.cpp', needed by `canald.o'.  Stop. 
```

请建议如何解决此错误？

已编辑：--------

文件丢失...正在编译...但出现以下错误

```
vscpd.cpp:47:19: fatal error: wx/wx.h: No such file or directory
compilation terminated.
make: *** [vscpd.o] Error 1 
```

我在以下位置安装了 wxgtk :---

```
/opt/wxgtk 
```

.profile 已修改：--

```
PATH = $PATH:/opt/wxgtk
export LD_LIBRARY_PATH=/usr/lib:/usr/local/lib:/usr/local/lib/pkgconfig:/usr/lib/pkgconfig:/opt/wxgtk/lib:$LD_LIBRARY_PATH 
```

make 找不到

```
#include<wx/wx.h> 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:31:14.137

您**必须**使用`wx-config`而不是直接指定包含路径，请参见例如[this answer](https://stackoverflow.com/questions/8310972/how-to-use-wxwidget2-9-2-in-linux/8311022#8311022)。

您的 makefile 很奇怪，因为您`CXXFLAGS`只定义了从不使用它，而是将`CPPFLAGS`其用作`CFLAGS`. 因此，在您的情况下，您需要用调用替换`CPPFLAGS`定义，例如`wx-config`

```
WX_CONFIG := /opt/wxgtk/bin/wx-config
CPPFLAGS := $(shell $(WX_CONFIG) --cxxflags) 
```

更好的是，摆脱`CPPFLAGS`并像这样定义`CXXFLAGS`并使用它。

还要更新您`LDLIBS`的使用`wx-config`：

```
LDLIBS := ${APPEXTRALIBS} $(shell $(WX_CONFIG) --libs) 
```

（`EXTRALIBS`通常不再需要）。

# java - 如何在 Java/C 应用程序中实现 Lock

> ID：15659183
> 
> 赞同：1
> 
> 时间：2013-03-27T12:47:33.960
> 
> 标签：java, concurrency, native

我有 Android 应用程序的并发问题。问题的基础是Java代码在加载C代码之前试图通过JNI接口调用C函数并设置值。我有`MainActivity.java`哪个调用 C 函数和`NativeLib.java`哪个加载 C 共享库。有没有什么优雅的方法来解决这个并发问题，例如。通过从C设置一些Java字段到`true`加载完成并锁定MainActivity方法直到该值为真？或者也许还有其他更好的解决方案？

![发动机基本原理](../Images/25df2276dde0f52ca8e8550e0f5161da.png)

这是发动机的基本示意图。在`GLThread`循环中，方法`guardedRun()`调用 onDrawFrame() 将 JNI 调用发送到 C 以渲染帧，然后，当`guardedRun()`接收到新的 GL 帧时，它会交换帧缓冲区。

问题在于方法`onMessageReceived()`。现在，我想在启动时将 Activity 与另一台设备连接，当它连接时，我想接收将从 Java 发送到 C 的消息。但问题是 C 尚未加载，Java 已经启动并连接. 那么，C 如何对 Java 说：“等到我加载完毕”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:52:02.933

显而易见的答案是：

*确保在调用 C 函数之前加载 C 代码*。

在您在问题中提供详细信息之前，我们无法在答案中提供太多详细信息。

# visual-studio-2010 - SharePoint 2010 委托控制与 Visual Studio 2010

> ID：15659185
> 
> 赞同：0
> 
> 时间：2013-03-27T12:47:37.203
> 
> 标签：visual-studio-2010, sharepoint-2010

我正在尝试通过 Visual Studio 2010 使用委托覆盖 SmallSearchInputBox 的“SearchResultsPageUrl”属性。但是似乎没有发生任何事情，下面是我目前的设置：

1.  创建了一个空的 SharePoint 2010 项目
2.  通过右键单击解决方案资源管理器中的项目选择添加新项目 > 空元素来添加“空元素”。
3.  将“空元素”命名为“SearchBoxOverride”
4.  在“Elements.xml”文件中，我添加了以下代码行，现在如下所示：

![在此处输入图像描述](../Images/b9eeeb54ff87c449585907d7ff1e746f.png)

然后我构建了解决方案并进行了部署。在“网站集功能”下，我可以看到它已被激活，但现在搜索框已经消失了。如果我停用该功能，搜索框会再次出现。

该项目如下所示：

![在此处输入图像描述](../Images/2576b9ce32852e057ed4e11a0d434671.png)

我是否错过了导致搜索框消失的步骤？

任何援助将不胜感激...

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:16:55.127

以上工作....我遇到的问题是我在 SharePoint 2010 Foundation 上对此进行了测试，这似乎是我直到现在才知道的 Foundation 的限制。这适用于所有其他版本的 SharePoint 2010（标准、企业）...

# oracle - 可以为当前会话禁用 Oracle 触发器吗？

> ID：15659188
> 
> 赞同：14
> 
> 时间：2013-03-27T12:47:51.370
> 
> 标签：oracle, triggers

我想在将数据插入表之前禁用表上的特定触发器，但**不会影响**可能正在更改同一表中数据的其他用户。我找不到任何记录在案的方法来做到这一点。这是 Oracle 11g。

我能想到的最佳解决方案是创建一个会话变量，并让我的应用程序将其设置为触发器在工作之前检查的某个值。

*强制性反触发评论：*我讨厌触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:47:59.930

将变量添加到现有包规范（或创建新包）：

```
enable_trigger boolean := true;
```

将触发器中的代码用：

```
如果 enable_trigger 那么

万一;
```

当您想“禁用”触发器时，请将变量设置为 false。

最佳实践是将变量放在正文中并编写一个 set 过程和一个 get 函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T12:59:10.727

我认为在 oracle 或其他 rdbms 中不可能为特定会话禁用触发器。

我的解决方案是，如果您知道登录的 CURRENT_USER 或 session_id，那么您可以在触发器中添加条件。

```
 IF SYS_CONTEXT ('USERENV', 'CURRENT_USER') <> '<XYZ>' THEN
    --do the operation

  END IF; 
```

这个条件你需要把你的触发器

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-20T17:05:06.080

使用[dbms_application_info.set_client_info](https://docs.oracle.com/en/database/oracle/oracle-database/12.2/arpls/DBMS_APPLICATION_INFO.html#GUID-14484F86-44F2-4B34-B34E-0C873D323EAD)（链接到 oracle 文档）在过程中设置_client_info 并在触发器中读取它。

**简单的例子：**

```
SET SERVEROUTPUT ON   
declare
CI_Status VARCHAR2(25 BYTE):='';
begin
--set the value
dbms_application_info.set_client_info('qwerty');
-- the value is sent an out to CI_Status when you want to read it
DBMS_APPLICATION_INFO.READ_CLIENT_INFO (CI_Status);
--Output the value in the console 
dbms_output.put_line('Value of CI_Status is: ' || CI_Status); 
end; 
```

**在您的程序中：**

```
procedure spname is
    begin
      dbms_application_info.set_client_info('qwerty');
      --Do your update
      UPDATE tableName set a=b;
      --in case you still have the sesion opened, set it to null after
      dbms_application_info.set_client_info(null);
end; 
```

**在你触发：**

```
create or replace TRIGGER Triggername
 BEFORE INSERT OR UPDATE
 ON tablename
 FOR EACH ROW
declare
CI_Status VARCHAR2(25 BYTE):='';
begin
--Retrieve the value into CI_Status the variable
DBMS_APPLICATION_INFO.READ_CLIENT_INFO(CI_Status); 
    IF INSERTING THEN
       null;
    ELSIF UPDATING THEN
          IF CI_Status = 'qwerty' then
             --Do nothing since you dont want the trigger to fire
              null;
          ELSIF CI_Status is null then
            :new.tablefield:= SYSDATE;
          END IF;
    END IF;
end Triggername; 
```

**完全禁用而不用担心并发**

```
 procedure spname is
    begin    
      EXECUTE IMMEDIATE 'ALTER TRIGGER Triggername DISABLE';
      UPDATE tableName set a=b;
      EXECUTE IMMEDIATE 'ALTER TRIGGER Triggername ENABLE';
   end; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T13:30:24.360

也许 Oracle 版本对此有用？在另一个版本中创建不同的触发器并更改会话以使用该版本。

[http://www.oracle-base.com/articles/11g/edition-based-redefinition-11gr2.php#editions](http://www.oracle-base.com/articles/11g/edition-based-redefinition-11gr2.php#editions)

我必须承认，我对版本没有实际经验。

# javascript - html中图像标签的alt属性

> ID：15659193
> 
> 赞同：0
> 
> 时间：2013-03-27T12:48:02.030
> 
> 标签：javascript, html, image, alt

设想：

```
 <img src="filepath" alt="image not found"> 
```

这将确保如果在路径中找不到文件，则将加载文本.....

问题：可以加载图像而不是替代文本吗？是否有任何标签可以满足我的目的，是否有任何可以在#alt 标签中给出的自定义 JavaScript 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:51:39.503

您可以检查图像是否在 JavaScript 中加载：

```
var img = document.getElementById('image');
if ( img.complete && img.naturalWidth == 0 ) {
  // some error, load alternate image:
  img.src = "path to alternative img";
} 
```

* * *

**编辑：**完整的解决方案（使用`onerror`@JoDev的答案）将是：

```
<script>
function validate (img) {
  // Clear the callback to avoid infinite loop in case
  // new image path would be also invalid.
  img.onerror = null;

  if ( img.complete && img.naturalWidth == 0 ) {
    // some error, load alternate image:
    img.src = "http://example.com/valid_path.png";
  }
}
</script>

<img onerror="javascript:validate(this);" 
     src="http://example.com/some_invalid_path.png"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:54:07.933

有一个特殊的活动可以让你做到这一点。它的 ：

```
<img src="" onerror="this.src='path/to/default'" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-28T13:21:38.783

请参考下面的代码..

在 onerror 函数中添加要加载的 src 路径。如果 src 是加载图像。

```
<img onerror="this.onerror=null;this.src='http://www.personal.psu.edu/oeo5025/jpg.jpg'" id="ddd" 
src='http://www.loveimagesdownload.com/wp-content/uploads/2016/08/declaration-of-love_23-2147517078.jpg'/> 
```

# python - 将字节字符串插入 MongoDB

> ID：15659195
> 
> 赞同：1
> 
> 时间：2013-03-27T12:48:04.867
> 
> 标签：python, mongodb

我有一些需要插入的字节串。

```
> db.test2.t.insert({'e': '\xa0\xc7e\xea\x14\xbeg\xb7\xdf\xcagFN\xf8\x13\xbe'})
> db.test2.t.insert({'e': '\xa0\xc7e\xea\x14\xbeg\xb7\xdf\xcagFN\xf8\x13\xbe'})
> db.test2.t.find()
{ "_id" : ObjectId("5152e927d50568b4a9b56cdd"), "e" : " Çeê\u0014¾g·ßÊgFNø\u0013¾" }
{ "_id" : ObjectId("5152e9e9d50568b4a9b56cde"), "e" : " Çeê\u0014¾g·ßÊgFNø\u0013¾" } 
```

我无法在 Python 中读取相同的字节字符串：

```
>>> e =  " Çeê\u0014¾g·ßÊgFNø\u0013¾"
>>> e
'\xc2\xa0\xc3\x87e\xc3\xaa\\u0014\xc2\xbeg\xc2\xb7\xc3\x9f\xc3\x8agFN\xc3\xb8\\u0013\xc2\xbe'
>>> g =  b'\xa0\xc7e\xea\x14\xbeg\xb7\xdf\xcagFN\xf8\x13\xbe'
>>> g
'\xa0\xc7e\xea\x14\xbeg\xb7\xdf\xcagFN\xf8\x13\xbe' 
```

谢谢。

* * *

编码为 utf8

```
>>> u'\xa0\xc7e\xea\x14\xbeg\xb7\xdf\xcagFN\xf8\x13\xbe'.encode('utf8')
'\xc2\xa0\xc3\x87e\xc3\xaa\x14\xc2\xbeg\xc2\xb7\xc3\x9f\xc3\x8agFN\xc3\xb8\x13\xc2\xbe' 
```

当我插入它时，我得到

```
{ "_id" : ObjectId("5152ee3ad50568b4a9b56ce0"), "e" : "Â ÃeÃª\u0014Â¾gÂ·ÃÃgFNÃ¸\u0013Â¾" } 
```

但很明显，当我用 解码时`utf8`，

```
u'\xc2\xa0\xc3\x87e\xc3\xaa\\u0014\xc2\xbeg\xc2\xb7\xc3\x9f\xc3\x8agFN\xc3\xb8\\u0013\xc2\xbe' 
```

这就是我输入的内容。太好了。但是我如何解码回原来的呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-12T23:12:40.663

使用`Binary`类型：

```
> db.test.t.insert({'e': BinData(0, 'oMdl6hS+Z7ffymdGTvgTvg==')})
WriteResult({ "nInserted" : 1 })
> db.test.t.insert({'e': BinData(0, 'oMdl6hS+Z7ffymdGTvgTvg==')})
WriteResult({ "nInserted" : 1 })
> db.test.t.find()
{ "_id" : ObjectId("56e4a1d51b696fa210e6d074"), "e" :     BinData(0,"oMdl6hS+Z7ffymdGTvgTvg==") }
{ "_id" : ObjectId("56e4a1d71b696fa210e6d075"), "e" :     BinData(0,"oMdl6hS+Z7ffymdGTvgTvg==") } 
```

从 Python 中：

```
>>> cli.test.test.t.find()
[{u'_id': ObjectId('56e4a1d51b696fa210e6d074'), u'e': Binary('\xa0\xc7e\xea\x14\xbeg\xb7\xdf\xcagFN\xf8\x13\xbe', 0)}, 
 {u'_id': ObjectId('56e4a1d71b696fa210e6d075'), u'e': Binary('\xa0\xc7e\xea\x14\xbeg\xb7\xdf\xcagFN\xf8\x13\xbe', 0)}] 
```

# exception - 如何从 Velocity 模板脚本 (VTL) 中抛出用户定义的异常？

> ID：15659200
> 
> 赞同：6
> 
> 时间：2013-03-27T12:48:12.957
> 
> 标签：exception, velocity, user-defined, vtl

如何从 Velocity 模板脚本 (VTL) 中引发用户定义的异常？

在我的速度脚本中，我需要根据条件抛出异常，以便调用者可以捕获异常并向最终用户提供有用的错误消息。

例如。

```
#if($passwordfield1 != $passwordfield2)
throw an exception here
#elseif($passwordfield1 == $passwordfield2)
do something
#end 
```

在上面的示例中，如果密码字段 1 和密码字段 2 不匹配，则应引发适当的异常并需要将其传播给最终用户。

有没有办法从速度脚本中实现这一点？如果不是，请建议另一种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:31:10.830

```
context.put("exceptionThrower", new ExceptionThrower());

public class ExceptionThrower {
    public void throwUserDefined() {
        throw new UserDefinedException();
    }
}

#if ($whatever) 
$exceptionThrower.throwUserDefined()
#else
blah blah
#end 
```

# ajax - 如何在 BB10 上不解释 ajax 中的预检？

> ID：15659201
> 
> 赞同：0
> 
> 时间：2013-03-27T12:48:13.183
> 
> 标签：ajax, token, options, cors, parse-error

我使用带有扩展名 *.BAR 的 Eclipse 插件为智能手机 BB10 转换并部署了一个 Android 应用程序。它是一个混合应用程序，包含一个应用内浏览器和一个使用 HTML、CSS 和 jQuery 的应用程序。它适用于 BB10 之前的 Android、iPhone 和 BB。

我使用 jQuery 执行 AJAX CROSSDOMAIN 请求，如下所示：

```
$.ajax({
    type: "POST",
    url: "http://***************************.json",
    datatype: "json",
    crossDomain: "true",
    contentType: "application/json",
    data&colon;'{"technicalNumber":"********","password":"****"}',
    scriptCharset: "utf-8",
    success : function(data) {
        // do stuff
    },
    error: function(object, status, error){
        // do other stuff
        alert(error);
    }
}); 
```

此 POST 调用在不同的域上，受 CORS 概念的约束，并且首先发送预检 OPTIONS 请求。对此查询的回复返回 XML OPTIONS（没有值），它被解释并在 parseError jQuery 处引发类型错误。

错误：http: [//img11.hostingpics.net/pics/164967Photo1.jpg](http://img11.hostingpics.net/pics/164967Photo1.jpg)

在所有其他移动平台上，不会解释预检请求 (OPTIONS)。如何在 BB10 上不解释 AJAX 中的预检？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T13:25:29.573

I solved my problem, finally i didn't use the tool who's convert android app to bb10 app (BAR). I used webworks ([http://developer.blackberry.com/html5/](http://developer.blackberry.com/html5/)) I just took my html, css, and js files from my android web app, add some lines to the headers, package and compile it, and it was working on my bb10!

# facebook - Facebook Like Box iFrame 不再显示在网站上

> ID：15659205
> 
> 赞同：0
> 
> 时间：2013-03-27T12:48:22.190
> 
> 标签：facebook, iframe

我们客户的网站[http://www.chantre.com](http://www.chantre.com)曾经将他们的 Facebook Like Box 显示在他们网站的左侧（直接在“NY/NJ Listing”下）。发生了两件事/我今天注意到：

1.  我在我们的开发人员帐户中创建了一个应用程序并使用了免费托管选项，因此我可以生成安全的 URL。我随后在 FB Developers 区域和 Heroku 托管环境中删除了该应用程序；

似乎自从我这样做以来，Like Box 不再显示。

1.  如果我重新生成创建以下 iFrame 代码的 Like Box，Like Box 将不会显示：

如果我将 URL 粘贴到 Chrome 或 Safari 中，我会正确看到提要，以及在 Facebook 中进行实际的 Like Box 设置时，但在 IE 或 Firefox 中没有这样的运气。我以为 Chrome 和 Safari 都被缓存了，但所有历史记录和缓存都被清除了。

任何人都可以对此有所了解，这会很棒。我相信我的客户很快就会注意到这一点，我想尽快修复它。

如果您访问他们网站上的页面，您会看到一个已正确显示的已注释掉的 iFrame。我想知道是否需要在 Developers 中重新创建应用程序，但不确定要选择什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:10:12.580

facebook.com/davisrchantrealtors，您将点赞框的 href 设置到的页面对我不可用。这是正确的页面名称吗？它是否以任何方式受到限制（年龄、国家、酒精）？

[和更正设置后]

…现在神奇地你网站上的like box又可以工作了;-)

# javascript - 缺少操作数；找到 END

> ID：15659209
> 
> 赞同：0
> 
> 时间：2013-03-27T12:48:28.497
> 
> 标签：javascript

我不知道为什么我会收到这个错误。

```
missing operand; found END 
```

每当我创建一个新行时，它就会出现在底部，所以现在它说最后一行有问题。

这是我的代码：

```
alert("Hello, and welcome to [title undecided] by ARADPLAUG!");
alert("If there's a yes or no question, just say yes or no, no nah's or sure's or yup's or anything like that.");
alert("You have four stat points to begin with. If you enter something wrong, you get -1 stat point.");
var choice1 = prompt("Choose one perk: STRENGTH, INTELLIGENCE, ENDURANCE, ALERTNESS or SPEED.").toLowerCase();
var choice2 = prompt("Choose one perk: STRENGTH, INTELLIGENCE, ENDURANCE, ALERTNESS or SPEED.").toLowerCase();
var choice3 = prompt("Choose one perk: STRENGTH, INTELLIGENCE, ENDURANCE, ALERTNESS or SPEED.").toLowerCase();
var beginning = prompt("You're running from a fire when you suddenly see a lake. Do you JUMP in it, keep RUNning, or FILL a bucket with it?").toLowerCase();
switch (beginning) {
    case 'run':
        alert("You run away from the scary water, into the safety of the fire. -YOU HAVE DIED-");
        break;
    case 'fill':
        var bucket = prompt("You have two buckets. Do you want to fill ONE or BOTH of them with water?").toLowerCase();
        break;
    case 'jump':
        if (choice1 === "alertness" || choice2 === "alertness" || choice3 === "alertness") {
            var branch = prompt("You jump into the water just in time. A branch above you looks like it's about to fall off. Do you want to SHAKE it off now and be alert or WAIT and hope it won't fall off?").toLowerCase();
        } else if (choice1 || choice2 || choice3 === "speed") {
            var cave = prompt("You jump out of the way just before a branch crushes you. It uncovers a hole leading to a cave. Do you enter it?");
        } else {
            alert("You look up, and see the branch fall just before it crushes your neck, killing you instantly. -YOU HAVE DIED- ");
        }
        break;
    default:
        alert("Sorry, that wasn't one of the options. The fire consumes you. -YOU HAVE DIED-");
        switch (branch) {
            case 'wait':
                if (choice1 === "speed" || choice2 === "speed" || choice3 === "speed") {
                    prompt("You jump out of the way just before the branch crushes you. It uncovers a hole leading to a cave. Do you enter it?");
                } else {
                    alert("You look up, and see the branch fall just before it crushes your neck, killing you instantly. -YOU HAVE DIED- ");
                }
                break;
            case 'shake':
                var cave2 = prompt("You shake the branch, causing it to fall. It uncovers a hole. Do you enter it?");
                break;
            default:
                alert("That wasn't one of the options. The branch falls and crushes you.  -YOU HAVE DIED-"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:49:58.010

你错过了`}`关闭你的`switch{...}`块。“意外`$end`”通常意味着您的括号/括号/大括号级别未正确关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:51:30.047

我不是 javascript 人，但您的开关正在打开 a`{`而您没有匹配的关闭 `}`

# java - 在 Android 中将 RGBA 转换为 ARGB_8888

> ID：15659210
> 
> 赞同：1
> 
> 时间：2013-03-27T12:48:30.077
> 
> 标签：java, android, rgba, argb

我从 NDK 获取 RGBA 格式的字节数组。我需要将字节数组刷新到位图（在 ImageView 或 Surface 中显示）。

我想使用：

```
 Bitmap bm = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    bm.copyPixelsFromBuffer(ByteBuffer.wrap(buffer)); 
```

但找不到将 RGBA 转换为 ARGB_8888 格式的方法。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-23T16:10:52.040

（老了，但是...）您也可以使用 Java 代码交换字节顺序。[我在这里](https://stackoverflow.com/questions/5010545/access-to-raw-data-in-argb-8888-android-bitmap/26532116#26532116)写的访问位图字节的示例可能会有所帮助...

由于公众需求（以下未经测试 - 我仍然会看到那个神秘链接背后的内容） IE 以下未经测试：

```
public static Bitmap RGBA2ARGB(Bitmap img)
{

   int width  = img.getWidth();
   int height = img.getHeight();

   int[] pixelsIn  = new int[height*width];
   int[] pixelsOut = new int[height*width];

   img.getPixels(pixelsIn,0,width,0,0,width,height);

   int pixel=0;
   int count=width*height;

   while(count-->0){
       int inVal = pixelsIn[pixel];

       //Get and set the pixel channel values from/to int  //TODO OPTIMIZE!
       int r = (int)( (inVal & 0xff000000)>>24 );
       int g = (int)( (inVal & 0x00ff0000)>>16 );
       int b = (int)( (inVal & 0x0000ff00)>>8  );
       int a = (int)(  inVal & 0x000000ff)      ;

       pixelsOut[pixel] = (int)( a <<24 | r << 16 | g << 8 | b );
       pixel++;
   }

   Bitmap out =  Bitmap.createBitmap(pixelsOut,0,width,width,height, Bitmap.Config.ARGB_8888);
   return out;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T00:33:58.977

您可以使用 OpenCV（您可以将它与 NDK 一起使用）。然后使用[此方法](http://www.emgu.com/wiki/files/1.3.0.0/html/1e4768b4-c5c5-566f-3ba7-b3ad40dd8817.htm)：`cvCvtColor(sourceIplimage, destinationIplImage, code)`

# c#-4.0 - 检索存储过程的输出参数的值

> ID：15659216
> 
> 赞同：0
> 
> 时间：2013-03-27T12:48:58.593
> 
> 标签：c#-4.0, stored-procedures, sql-server-2008-r2

我有一个返回输出的存储过程。存储过程中的输出参数定义如下：

```
@Success int output 
```

我正在使用以下语句从输出参数中检索值。我收到错误消息

> “指定的演员表无效”

我正在使用 Visual Studio 2012。

```
int returnVal = (int)myCOmmand.Parameters["@Success"].Value; 
```

你能告诉我可能是什么问题吗？并提供解决方案。

感谢您的帮助。夜叉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:52:41.060

我创建了一个参数来获取执行后的值，如下所示（o_id 是参数名称）：

```
IDbDataParameter o_id = cmd.CreateParameter();
o_id.ParameterName = "?o_id";
o_id.DbType = DbType.Int32;
o_id.Direction = ParameterDirection.Output;
cmd.Parameters.Add(o_id);

// Call the Stored Procedure
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText "= MyStoredProcedure";

db.ExecuteNonQuery(cmd);
int o_idValue =  int.Parse(o_id.Value.ToString()); 
```

在这种情况下，`db`是一个数据库层，它执行我的 IDbCommand

`int.Parse()`可能您可以使用（甚至更好，`int.TryParse()`）解决您的问题

# java - 根据输入将文本输入转换为 int 或 double

> ID：15659217
> 
> 赞同：0
> 
> 时间：2013-03-27T12:48:59.940
> 
> 标签：java, jtextfield

我有一个 JFrame，我从文本字段中获取输入并将其转换为整数。如果它是双精度数，我还想将它转换为双精度数，如果它既不是整数也不是双精度数，我可能会返回一条消息。我怎样才能做到这一点？

我当前的代码：

```
 int textToInt = Integer.parseInt(textField[0].getText()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:54:33.967

```
String text = textField[0].getText();
try {
    int textToInt = Integer.parseInt(text);
    ...
} catch (NumberFormatException e) {
    try {
        double textToDouble = Double.parseDouble(text);
        ...
    } catch (NumberFormatException e2) {
        // message?
    }
} 
```

为了保持精度，立即解析为 BigDecimal。这个 parseDouble 当然不是特定于语言环境的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T12:55:22.280

```
try {
    int textToInt = Integer.parseInt(textField[0].getText());
} catch(NumberFormatException e) {
    try {
        double textToDouble = Double.parseDouble(textField[0].getText());
    } catch(NumberFormatException e2) {
        System.out.println("This isn't an int or a double";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T12:55:55.497

```
boolean isInt = false;
boolean isDouble = false;
int textToInt = -1;
double textToDouble = 0.0;

try {
    textToInt = Integer.parseInt(textField[0].getText());
    isInt = true;
} catch(NumberFormatException e){
    // nothing to do here
}

if(!isInt){
    try {
        textToDouble = Double.parseDouble(textField[0].getText());
        isDouble = true;
    } catch(NumberFormatException e){
        // nothing to do here
    }
}

if(isInt){
 // use the textToInt
}

if(isDouble){
 // use the textToDouble
}
if(!isInt && !isDouble){
// you throw an error maybe ?
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:57:46.563

检查字符串是否包含小数点。

```
if(textField[0].getText().contains(".")) 
    // convert to double 
else 
    // convert to integer 
```

不需要抛出异常。

在执行上述操作之前，您可以使用正则表达式检查字符串是否为数字。一种方法是使用模式`[0-9]+(\.[0-9]){0,1}`。我不是最好的正则表达式，所以如果这是错误的，请纠正我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T12:57:51.973

您可以尝试一系列嵌套的 try-catch：

```
String input = textField[0].getText();
try {
    int textToInt = Integer.parseInt(input);
    // if execution reaches this line, it's an int
} catch (NumberFormatException ignore) {
    try {
        double textToDouble = Double.parseDouble(input);
        // if execution reaches this line, it's a double
    } catch (NumberFormatException e) {
        // if execution reaches this line, it's neither int nor double
    }
} 
```

# java - Android 应用程序在尝试打开两个 DataInputStreams 时挂起

> ID：15659219
> 
> 赞同：0
> 
> 时间：2013-03-27T12:49:04.143
> 
> 标签：java, android, url, inputstream, datainputstream

我正在编写这个应用程序，我需要同时打开两个 InputStreams 并能够切换到任一流以传输图像。我可以打开第一个流，但是当我尝试打开第二个流时它挂起。以下是代码，我在它挂起的地方发表了评论，你能解释一下我是否做错了什么吗？

```
public boolean Start()
    {
        numberOfServicesUsingThisInstanceLock.lock();

        if (numberOfServicesUsingThisInstance > 0)
        {
            numberOfServicesUsingThisInstance++;
            return true; 
        }

        // else 
        numberOfServicesUsingThisInstance = 1;

        bisList.clear();
        disList.clear();        
        FrameTimeStampList.clear();

        try
        {
            for (int i = 0; i < this.objConfig.lstCameraInfo.size(); i++)
            {
                FrameTimeStampList.add(Long.valueOf("-1"));
                final CameraInfo ci = this.objConfig.lstCameraInfo.get(i);
                String sourceUrl = GetMjpegUrlForCam(this.Type, ci.brand, ci.ipAddress);

                Log.d("DUMPMJPEG_START", "URL: " + sourceUrl);

                if (sourceUrl == "NONE") continue;

                URL url = new URL(sourceUrl);               

                Authenticator.setDefault(new Authenticator() {
                    protected PasswordAuthentication getPasswordAuthentication() {
                        return new PasswordAuthentication (ci.userName, ci.password.toCharArray());
                    }
                });

                Log.d("DUMPMJPEG_START", "OpenStream");
                InputStream in = url.openStream(); // CODE HANGS HERE
                Log.d("DUMPMJPEG_START", "Creating DataInputStream");
                DataInputStream dis = new DataInputStream(in);
                Log.d("DUMPMJPEG_START", "DataInputStream added to the DataInputStream List");

                Log.d("DUMPMJPEG_START", "adding BufferedInputStreams to the list");
                BufferedInputStream bis = new BufferedInputStream(dis);
                Log.d("DUMPMJPEG_START", "BufferendInputStreams added to the list");
                disList.add(dis);
                bisList.add(bis);
            }
        }
        catch(Exception ex)
        {
            ex.getMessage();
        }
        return false;       
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:11:36.613

说挂了，是不是半天没反应还是出现异常？

更多代码：

1.  您打开流但从不关闭它们。或者你会对应用程序的另一部分进行控制吗？
2.  打开流而不使用某种连接超时是一个坏主意。
3.  该异常不会打印任何内容，因为您应该使用 e.printStackTrace() 打印它或将消息发送到某个日志/输出。

# iphone - 从 Plist 加载 Plist 的 URL

> ID：15659227
> 
> 赞同：0
> 
> 时间：2013-03-27T12:49:19.737
> 
> 标签：iphone, xcode, ios6, storyboard, plist

我尝试使用从其他 plist 文件加载 plist 文件`initWithContentsOfURL:`

我解释一下，我在主机中有一个使用 plist 文件的表格视图，使用以下方法：

```
NSMutableArray *genres = [[NSMutableArray alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.myurl.com/file.plist"]];
    self.loadGenres = genres; 
```

when choose a cel loading other UITableView, but how can says to a second table view to get other plist from url using `<string>`inside the first plist?

像一个：

```
NSMutableArray *genres = [[NSMutableArray alloc] initWithContentsOfURL:[self.loadGenres objectForKey:@"PLIST URL"]];
self.loadGenres = genres; 
```

谢谢你的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:08:42.783

您不能在数组中使用键值编码。

而是像这样尝试，

```
NSMutableDictionary * genres = [[NSMutableDictionary alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.myurl.com/file.plist"]];
self.loadGenres = genres; // your self.loadGenres must be Dictionary type

NSMutableDictionary * genres = [[NSMutableDictionary alloc] initWithContentsOfURL:[NSURL URLWithString:[[self.loadGenres objectForKey:@"PLIST URL"]stringValue]]];
self.loadGenres = genres; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:28:10.257

在 YourClass.h 中尝试以下操作

```
NSURLConnection* linksConnection;
NSMutableData* linksData; 
```

在 YourClass.m

```
-(void) loadURL
{

NSMutableURLRequest* the_request = [NSMutableURLRequest requestWithURL:[NSURL        URLWithString:YOUR_URL]];
linksConnection = [[NSURLConnection alloc] initWithRequest:the_request delegate:self startImmediately:YES];

if(linksConnection != nil)
{
    linksData = [[NSMutableData data] retain];

}
}

-(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
 [linksData setLength:0];
}

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
[linksData appendData:data];
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection
{

NSString *errorStr = nil;
NSPropertyListFormat format;
NSDictionary *propertyList = [NSPropertyListSerialization propertyListFromData:linksData
                                                              mutabilityOption:NSPropertyListImmutable
                                                                        format:&format
                                                              errorDescription:&errorStr];
NSMutableArray*  myArray = [[propertyList objectForKey:@"sample"] retain];
} 
```

我相信这会对你有很大帮助

# java - 如何停止 toast 和 alertDialog 失去对我的 EditText 过滤器的关注

> ID：15659230
> 
> 赞同：12
> 
> 时间：2013-03-27T12:49:28.080
> 
> 标签：java, android, filter

**更新：**

**最新更新 - 添加了 getChanges() 方法。**

第二次更新 - 我添加了整个 ShoppingList.java 类。

第一次更新 - 在 2 人喜欢这个问题但没有答案之后，我为这个问题开辟了一个赏金。

**问题：**

我遇到过类似的问题，一旦我开始一个新的意图然后返回到原始页面，我就无法重新过滤我的 ListView。这是通过使用覆盖 onResume() 方法并从另一个过滤器方法中调用我的过滤器代码来解决的。

我遇到的最新问题是应该在我的应用程序页面上使用 dialogBu​​ilder 或 toast 消息，然后过滤器文本再次被空白，即输入到我的过滤器 EditText 的任何文本都被我的过滤器忽略。

以下是一些突出显示该问题的屏幕截图：

已加载项的 ListView：

![在此处输入图像描述](../Images/39a3de001f9ec1d423312433c76f21d3.png)

将搜索词输入过滤器 EditText 并正确过滤：

![在此处输入图像描述](../Images/b43013911da25538e0f339b3a6dc8b63.png)

第一项“A”被编辑为“AB”。Toast 消息确认操作：

![在此处输入图像描述](../Images/a463a9f630ca25dcd7ce62a9e747911a.png)

**这就是问题所在，对话框构建器（项目的编辑方式）和 toast 消息已完成，在 EditText 中输入了一个新的过滤器术语，过滤器不再过滤：**

![在此处输入图像描述](../Images/d5aeb9c368fa333003f345ee984f2d11.png)

这是我的过滤器代码：

```
package com.example.flybaseapp;

    public class ShoppingList extends ListActivity implements OnClickListener {

Button AddItem;
Button showShop;
ListView showItems;
SimpleCursorAdapter cursorAdapter;
Long itemId;
TextView totalPrice;
String itemDescription;
int itemAmount;
int itemPrice;
EditText itemNameEdit;
DBHandlerShop getCons;
Dialog e1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.shoppinglistlayout);

    AddItem = (Button) findViewById(R.id.btnAddItem);
    showShop = (Button) findViewById(R.id.btnSearchShops);

    showItems = (ListView) findViewById(android.R.id.list);

    totalPrice = (TextView) findViewById(R.id.totalListPrice);

    AddItem.setOnClickListener(this);
    showShop.setOnClickListener(this);

    setList();

    int setPrice = updateTotal();
    totalPrice.setText(Integer.toString(setPrice));

    itemNameEdit = (EditText) findViewById(R.id.inputItemName);

    showItems.setTextFilterEnabled(true);

    itemNameEdit.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            cursorAdapter.getFilter().filter(s.toString());
            showItems.refreshDrawableState();

        }

    });

    getCons = new DBHandlerShop(this, null, null);
    getCons.open();
    cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {

        public Cursor runQuery(CharSequence constraint) {

            return getCons.getChanges((constraint.toString()));

        }

    });

    showItems.setAdapter(cursorAdapter);

}

@Override
public void onClick(View clickedAdd) {

    switch (clickedAdd.getId()) {

    case (R.id.btnAddItem):

        show();

        break;

    case (R.id.btnSearchShops):

        Intent checkGPS = new Intent("com.example.flybaseapp.CheckGPS");
        startActivity(checkGPS);

        break;

    }

}

@Override
protected void onListItemClick(ListView l, View v, int position, long idd) {
    super.onListItemClick(l, v, position, idd);

    itemId = idd;

    final CharSequence[] items = { "Edit Item", "Delete Item" };

    Builder alertDialogBuilder = new AlertDialog.Builder(ShoppingList.this);

    alertDialogBuilder.setTitle("Item Options:");

    alertDialogBuilder.setItems(items,
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int item) {

                    if (items[item].equals("Edit Item")) {

                        AlertDialog.Builder builder = new AlertDialog.Builder(
                                ShoppingList.this);

                        builder.setTitle("Edit Item");

                        DBHandlerShop setEdit = new DBHandlerShop(
                                ShoppingList.this, null, null);

                        setEdit.open();
                        String itemName = setEdit.getItem(itemId);
                        int itemAmount = setEdit.getItemQuan(itemId);
                        int itemPrice = setEdit.getItemCost(itemId);
                        setEdit.close();

                        LinearLayout layout = new LinearLayout(
                                ShoppingList.this);
                        layout.setOrientation(LinearLayout.VERTICAL);

                        final EditText titleBox = new EditText(
                                ShoppingList.this);
                        titleBox.setText(itemName);
                        titleBox.setHint("Item Name:");
                        layout.addView(titleBox);

                        final EditText quantityBox = new EditText(
                                ShoppingList.this);
                        quantityBox.setText(Integer.toString(itemAmount));
                        quantityBox.setHint("Item Quantity");
                        layout.addView(quantityBox);

                        final EditText priceBox = new EditText(
                                ShoppingList.this);
                        priceBox.setText(Integer.toString(itemPrice));
                        priceBox.setHint("Item Price.");
                        layout.addView(priceBox);

                        builder.setView(layout);

                        builder.setPositiveButton("Ok",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(
                                            DialogInterface dialog,
                                            int whichButton) {

                                        Editable valueItem = titleBox
                                                .getText();
                                        Editable valueAmount = quantityBox
                                                .getText();
                                        Editable valuePrice = priceBox
                                                .getText();

                                        String itemDescription = valueItem
                                                .toString();
                                        String s = valueAmount.toString();
                                        int itemAmount = Integer
                                                .parseInt(s);
                                        String a = valuePrice.toString();
                                        int itemPrice = Integer.parseInt(a);

                                        try {
                                            DBHandlerShop update = new DBHandlerShop(
                                                    ShoppingList.this,
                                                    null, null);

                                            int totalCombined = itemAmount
                                                    * itemPrice;

                                            update.open();
                                            update.updateItem(itemId,
                                                    itemDescription,
                                                    itemAmount, itemPrice);
                                            update.close();

                                            int setPrice = updateTotal();
                                            totalPrice.setText(Integer
                                                    .toString(setPrice));

                                        } catch (Exception e) {

                                            Toast.makeText(
                                                    getApplicationContext(),
                                                    "Items not updated.",
                                                    Toast.LENGTH_SHORT)
                                                    .show();

                                        } finally {

                                            Toast.makeText(
                                                    getApplicationContext(),
                                                    "Items updated.",
                                                    Toast.LENGTH_SHORT)
                                                    .show();

                                            setList();

                                        }

                                    }

                                });

                        builder.setNegativeButton("Cancel",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(
                                            DialogInterface dialog,
                                            int whichButton) {

                                    }
                                });

                        builder.show();

                    }

                    else if (items[item].equals("Delete Item")) {
                        try {

                            DBHandlerShop delete = new DBHandlerShop(
                                    ShoppingList.this, null, null);

                            delete.open();
                            delete.deleteItem(itemId);
                            delete.close();

                            DBHandlerShop findPrice = new DBHandlerShop(
                                    ShoppingList.this, null, null);

                            findPrice.open();
                            int returnedCost = findPrice
                                    .getItemCost(itemId);
                            findPrice.close();

                            int cost = updateTotal();

                            int newTotal = cost - returnedCost;
                            totalPrice.setText(Integer.toString(newTotal));
                        }

                        catch (Exception e) {

                            Toast.makeText(getApplicationContext(),
                                    "Item failed to be deleted.",
                                    Toast.LENGTH_SHORT).show();
                        }

                        finally {

                            Toast.makeText(getApplicationContext(),
                                    "Item deleted from the list.",
                                    Toast.LENGTH_SHORT).show();

                            setList();
                        }

                    }

                }

            });

    alertDialogBuilder.show();

}

@SuppressWarnings("deprecation")
private void setList() {

    DBHandlerShop DBShop = new DBHandlerShop(this, null, null);

    DBHandlerShop searchItems = new DBHandlerShop(this, null, null);

    searchItems.open();

    Cursor cursor = searchItems.getItems();

    startManagingCursor(cursor);

    searchItems.close();

    String[] from = new String[] { DBShop.KEY_ITEMSHOP, DBShop.KEY_ITEMNUM,
            DBShop.KEY_ITEMPRICE };
    int[] to = new int[] { R.id.txtSetItem, R.id.txtSetAmount,
            R.id.txtSetPrice };

    cursorAdapter = new SimpleCursorAdapter(this, R.layout.setshoppinglist,
            cursor, from, to);
    showItems.setAdapter(cursorAdapter);

}

private int updateTotal() {

    DBHandlerShop total = new DBHandlerShop(this, null, null);

    int totalPrice = 0;
    total.open();
    Cursor totalPrices = total.getTotals();
    total.close();

    if (totalPrices != null) {

        startManagingCursor(totalPrices);
        if (totalPrices.moveToFirst()) {

            do {
                int cost = totalPrices.getInt(3);
                int amount = totalPrices.getInt(2);

                int totalCost = cost * amount;
                totalPrice += totalCost;

            } while (totalPrices.moveToNext());

            return totalPrice;
        }

    }

    else {

        return totalPrice;

    }

    return 0;

}

private void show() {

    AlertDialog.Builder builder = new AlertDialog.Builder(ShoppingList.this);

    builder.setTitle("Enter Item Details:");

    LinearLayout layout = new LinearLayout(this);
    layout.setOrientation(LinearLayout.VERTICAL);

    final EditText titleBox = new EditText(this);

    titleBox.setHint("Item Name:");
    layout.addView(titleBox);

    final EditText quantityBox = new EditText(this);

    quantityBox.setHint("Item Quantity");
    layout.addView(quantityBox);

    final EditText priceBox = new EditText(this);

    priceBox.setHint("Item Price.");
    layout.addView(priceBox);

    builder.setView(layout);

    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            try {

                Editable valueItem = titleBox.getText();
                Editable valueAmount = quantityBox.getText();
                Editable valuePrice = priceBox.getText();

                itemDescription = valueItem.toString();
                String s = valueAmount.toString();
                itemAmount = Integer.parseInt(s);
                String a = valuePrice.toString();
                itemPrice = Integer.parseInt(a);

                DBHandlerShop addItem = new DBHandlerShop(
                        ShoppingList.this, null, null);
                addItem.open();
                addItem.insertItems(itemDescription, itemAmount, itemPrice);
                addItem.close();

            } catch (Exception e) {

                Toast.makeText(getApplicationContext(),
                        "Item failed to be added", Toast.LENGTH_SHORT)
                        .show();

            } finally {

                Toast.makeText(getApplicationContext(),
                        "Item added to your list", Toast.LENGTH_SHORT)
                        .show();

                int cost = updateTotal();
                totalPrice.setText(Integer.toString(cost));

                setList();

            }

        }

    });

    builder.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                }
            });

    builder.show();

}

@Override
protected void onResume() {
    super.onResume();

    setList();

    showItems.setTextFilterEnabled(true);

    itemNameEdit.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

            cursorAdapter.getFilter().filter(s.toString());
            showItems.refreshDrawableState();

        }

    });

    getCons = new DBHandlerShop(this, null, null);
    getCons.open();
    cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {

        public Cursor runQuery(CharSequence constraint) {

            return getCons.getChanges((constraint.toString()));

        }

    });

    showItems.setAdapter(cursorAdapter);
}

} 
```

来自数据库处理程序类的 getChanges()：

```
public Cursor getChanges(String constraintPassed) {

        String [] columns = new String[]{KEY_ROWSHOPID, KEY_ITEMSHOP, KEY_ITEMNUM, KEY_ITEMPRICE};
        Cursor c = null;
         if(constraintPassed.equals(""))
         {
             c = ourDatabase.query(DATABASE_TABLESHOP, columns, null, null, null, null, null);

         }

         else
         {
            c = ourDatabase.query(DATABASE_TABLESHOP, columns, KEY_ITEMSHOP + " LIKE'" + constraintPassed + "%'", null, null, null, KEY_ITEMSHOP + " ASC", null);
         }

        if( c != null)
            {
                c.moveToFirst();

            }
        return c;
    } 
```

编辑完成后是否需要实施生命周期方法？如果是这样，有人可以将我推向正确的方向，因为我尝试过 onResume() 和 onRestart() 无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:27:11.777

更新过滤器后尝试调用`notifyDataSetChanged()`您的适配器。这应该通知`ListView`它也需要刷新其数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:37:03.120

我发现解决此问题的一种简单方法是在编辑完成后通过启动一个新的意图对象来简单地调用该类。这仍然使整个过程的操作顺畅快捷，当然也允许我在编辑后进行过滤。所以暂时伙计们，这就是我将如何去做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T05:15:25.900

您可以尝试以下更改..

在显示您的吐司项目更新/删除消息后调用此

```
cursorAdapter.notifyDataSetChanged(); 
```

在您的 setList() 方法中添加以下内容..

```
cursorAdapter.registerDataSetObserver(new DataSetObserver() {
@Override
public void onChanged() {
    super.onChanged();
    setList();
}}); 
```

并将下面的代码移动到 setList()

```
itemNameEdit.addTextChangedListener(new TextWatcher() {

        @Override
        public void afterTextChanged(Editable s) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                                      int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                                  int count) {

            cursorAdapter.getFilter().filter(s.toString());
            showItems.refreshDrawableState();

        }

    });

    getCons = new DBHandlerShop(this, null, null);
    getCons.open();
    cursorAdapter.setFilterQueryProvider(new FilterQueryProvider() {

        public Cursor runQuery(CharSequence constraint) {

            return getCons.getChanges((constraint.toString()));

        }

    }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T13:14:36.863

我看到你的情况发生了什么。每次用户成功编辑项目时，您都在为您的列表设置一个新适配器！在您的情况下，在 onCreate 方法中添加到 EditText 的TextWatcher**正在**使用**也在****onCreate****方法**中创建的第一个适配器（在**onTextChanged**方法中），这是第一次创建活动！

 ******有几种方法可以解决这个问题。一种方法是改变您实施活动的整个方式（我个人不会这样做）。

另一种方法是简单地更改**setList方法，该方法在****onCreate**方法中第一次被调用，并且每次用户成功编辑项目时。这是我要详细解释的解决方案，因为它既快速又简单，而且对您来说不耗时：

*   如果列表没有适配器，则创建一个。
*   如果列表已经有一个适配器，那么只需更改适配器的光标并刷新列表。

所以你的**setList**方法应该是这样的：

```
@SuppressWarnings("deprecation")
private void setList() {

    DBHandlerShop DBShop = new DBHandlerShop(this, null, null);

    DBHandlerShop searchItems = new DBHandlerShop(this, null, null);

    searchItems.open();

    Cursor cursor = searchItems.getItems();

    startManagingCursor(cursor);

    searchItems.close();

    String[] from = new String [] { DBShop.KEY_ITEMSHOP , DBShop.KEY_ITEMNUM, DBShop.KEY_ITEMPRICE };
    int[] to = new int[] { R.id.txtSetItem, R.id.txtSetAmount, R.id.txtSetPrice };

    // Check the cursor adapter is previously created
    if ( cursorAdapter == null ) {
        // There is no previous cursors, create a new one
        cursorAdapter = new SimpleCursorAdapter(this, R.layout.setshoppinglist, cursor, from, to);
        showItems.setAdapter(cursorAdapter);
    }
    else {
        // There is a previous adapter
        // Stop managing its cursor
        stopManagingCursor ( cursorAdapter.getCursor() );
        // Assign the new cursor to the current adapter
        // The old cursor will be closed
        cursorAdapter.changeCursor ( cursor );
        // No need to refresh the list, it will be automatically refreshed after the adapter's cursor is changed
    }

} 
```

**通过这种方式，列表的适配器与TextWatcher**用于过滤列表的适配器相同。它应该工作，试一试，让我知道会发生什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T13:17:24.833

据我所见，您正在运行`getCons.open();`多次而没有在两者之间关闭它。我不知道该`open()`方法是忽略多次调用还是多次调用会导致错误，但您可能想尝试是否可以通过`getCons.open();`直接移到下方来修复它`getCons = new DBHandlerShop(this, null, null);`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-03T12:22:32.613

我认为你应该使用

```
android:hapticFeedbackEnabled="true"
android:imeOptions="actionNext"
android:nextFocusUp="@id/editeText1" 
android:nextFocusLeft="@id/edittextText"
android:includeFontPadding="true" 
```******

# android - 从 RSS 提要生成谷歌地图标记

> ID：15659231
> 
> 赞同：2
> 
> 时间：2013-03-27T12:49:28.610
> 
> 标签：android, google-maps-android-api-2

我目前正在设计一个应用程序，使用谷歌地图和地点 API，以及 rss 提要。但是我有使用 rss 提要生成地图标记的想法？这可能吗？

我在网上四处寻找，但没有找到太多。

RSS 提要从网站流式传输事件，我希望它在我的谷歌地图上创建带有事件位置的标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:06:33.427

首先，您必须自己获取位置。如果网站的提要没有专门的位置标签/位置，您将无法做到这一点，因为如果您不知道它在文本中的位置，您将无法清楚地获得位置。

然后，如果您成功获取位置，您将需要一个[地理编码系统](https://developers.google.com/maps/documentation/geocoding/)。获取该地点的坐标并标记该地点。

# android - SQLiteDatabase onUpgrade 问题

> ID：15659232
> 
> 赞同：0
> 
> 时间：2013-03-27T12:49:33.127
> 
> 标签：android, sqlite

我想知道 。

我有一张桌子

```
create table User (userid INTEGER PRIMARY KEY AUTOINCREMENT, username text,address text) 
```

我正在创建这张桌子`onCreate()`

并插入值。

```
INSERT into User (username,address) VALUES('noname','xyz') 
```

**输出-**`username--noname address--xyz`

和上`onUpgrade()`

我在上表中添加了一列

```
 ALTER TABLE User ADD COLUMN City text 
```

并插入值 `INSERT into User(City) VALUES('delhi')`

当我启动应用程序时，它的输出显示。

**输出-** `username--null address--null city--delhi`

为什么它`null`在两列中都显示。即使我没有`drop`表格

它应该显示这样的东西

**输出-** `username--noname address--xyz city--delhi`

请澄清这种行为`onUpgrade`

像这样：-

```
@Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion,  int newVersion)

        {
            db.execSQL("ALTER TABLE User ADD COLUMN City TEXT");
            db.execSQL("INSERT into User (City) VALUES(delhi)");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:03:45.720

这就是`INSERT`命令的作用，它会创建全新的记录。

要更新现有记录中的值，请使用以下`UPDATE`命令：

```
UPDATE User SET City = 'Delhi' WHERE username = 'noname' 
```

# asp.net-mvc-3 - 从控制器中的 IEnumerable 更新 ICollection

> ID：15659234
> 
> 赞同：0
> 
> 时间：2013-03-27T12:49:38.443
> 
> 标签：asp.net-mvc-3, entity-framework, entity

我的控制器中有这段代码：

```
public ActionResult SaveRecommendedUserDetails(RecommendAFriendViewModel model)
    {
      if (ModelState.IsValid)
      {
        Entities.RecommendedUser recommendedUser = new Entities.RecommendedUser();
        recommendedUser.Email = model.Email;
        recommendedUser.Firstname = model.Firstname;
        recommendedUser.Surname = model.Surname;
        recommendedUser.Users_UserId = model.UserId;
        recommendedUser.JobTitle = model.JobTitle;
        recommendedUser.Department = model.Department;
        ICollection<Entities.Group.Group> group;  

        foreach (group in model.Groups)
        {
            //add the goups from my viewmodel to the entity??
        }           

        ZincService.RecommendedUserService.CreateRecommendedUser(recommendedUser);

        return RedirectToAction("RecommendedUsers");
      }
      else
      {
        return View("Index", model);
      }
    }

public class RecommendAFriendViewModel
{
public int UserId { get; set; }

[LocalizedRequired]
[DataType(DataType.EmailAddress)]
public string Email { get; set; }

[LocalizedRequired]
public string Firstname { get; set; }

[LocalizedRequired]
public string Surname { get; set; }
public string Department { get; set; }
public string JobTitle { get; set; }
public DateTime? DateAndTimeProcessed { get; set; }
public DateTime? DateAndTimeRecommended { get; set; }
public IEnumerable<DataModels.Group.GroupDataModel> Groups { get; set; }

public class RecommendedUser
{
public virtual int RecommendedUserId { get; set; }
public virtual string Firstname { get; set; }
public virtual string Surname { get; set; }
public virtual string Email { get; set; }
public virtual string Department { get; set; }
public virtual string JobTitle { get; set; }
public virtual DateTime? DateAndTimeProcessed { get; set; }
public virtual int Users_UserId { get; set; }
public virtual DateTime? DateAndTimeRecommended { get; set; }
public virtual int AssignedUserId { get; set; }
public virtual ICollection<Group.Group> Groups { get; set; }

}

namespace Zinc.Entities.Group 
```

{ 公共类组 { #region 属性

```
public virtual int GroupId { get; set; }
public virtual string Name { get; set; }
public virtual bool IsArchived { get; set; }
public virtual bool IsSegment { get; set; }
public virtual bool AllowFiltering { get; set; }

public virtual string SmallImageUrl { get; set; }
public virtual string MediumImageUrl { get; set; }
public virtual string LargeImageUrl { get; set; }

 private ICollection<RecommendedUser> _groupRecommendedUsers;
public virtual ICollection<RecommendedUser> RecommendedUsers
{
  get
  {
    if (_groupRecommendedUsers == null)
      _groupRecommendedUsers = new List<RecommendedUser>();

    return _groupRecommendedUsers;
  }
  set
  {
    _groupRecommendedUsers = value;
  }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:57:41.563

尝试这个

```
recommendedUser.group = model.Groups.Select(g => new GroupDataModel { "Initialize fields"})
.ToList(); 
```

# python - 如何避免两个查询并用join替换？

> ID：15659235
> 
> 赞同：0
> 
> 时间：2013-03-27T12:49:40.070
> 
> 标签：python, python-2.7, sqlalchemy

我有一个模型（使用**sqlalchemy**）人。在这种情况下，每个人只能有一个工作或没有工作（工作也是模型）。我需要检索字典数组（每个字典代表一个人，如果人在人的内部有工作嵌套工作字典）

```
[{"name":"Timothy", "age":26},
 {"name":"Jack", "age":34, "job":{"type":"programmer, "money":5}},
 ...
] 
```

目前我迭代了这样的人：

```
for person in session.query(PersonModel).all():
    result_person = create_dictionary_for_person()
    job = session.query(JobModel).filter(JobModel.person_id == person.id).first()
    if job:
        result_person['job'] = create_dictionary_for_job()

    some_list.append(result_person) 
```

（create_dicti...是简单的转换函数，JobModel在PersonModel上有外键person_id，都有主键id）。

有什么办法可以避免每个人两次查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:59:27.490

尝试使用 from `PersonModel`to关系`JobModel`，并将其设置为热切加载：

```
class PersonModel(Base):
    ...
    job = relationship('JobModel', lazy='joined') 
```

您通常希望指定从父母到孩子的关系。如果还需要 from `JobModel`to `PersonModel`，可以指定一个[backref](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#sqlalchemy.orm.backref)，也可以设置为急切加载。

# html - 使用 contentEditable 时防止某些元素被编辑

> ID：15659247
> 
> 赞同：4
> 
> 时间：2013-03-27T12:50:23.847
> 
> 标签：html

在下面的示例标记中，使用 html5 时`contentEditable="true"`，是否有一些`<span id="cookie">`不可编辑的方式？

```
<div contentEditable="true">
    This text be edited. <span id="nodelete">Except for this text.</span> This can be edited as well.
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-16T11:13:09.710

好的，应位少的要求：

我将使用的解决方案是将内部声明为内`span`联`div`但将其设置`contentEditable`为 false，就像这样......

```
<div contentEditable="true">
    This text be edited. <div style="display: inline;" contentEditable="false">Except for this text.</div> This can be edited as well.
</div> 
```

# java - 如何将图像从 URL 转换为十六进制字符串？

> ID：15659250
> 
> 赞同：3
> 
> 时间：2013-03-27T12:50:39.787
> 
> 标签：java, image, hex

我正在从 URL 下载图像，如下所示：

```
BufferedImage image = null;
URL url = new URL("http://www.ex.com/image/pic.jpg");
image = ImageIO.read(url); 
```

我想将其转换为以下十六进制字符串格式：

> 89504E470D0A1A0A0000000D4948445200000124000001150802000000C6BD0FB3000000017352474200AECE1CE9000000097048597300000EC400000EC401952B0E1B000050B849444154785EED7D0B745CD759EE09E5618742A5C6F1833CB01A6E630587565E2154EE0D579203756DE823764B1ACAEB5A70EBAB2C08588EDB

但我不知道该怎么做。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:59:09.260

要将图像读入字节数组：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write( image, "jpg", baos );
baos.flush();
byte[] imageInByte = baos.toByteArray();
baos.close(); 
```

并将其显示为字符串：

```
public static String bytesToHex(byte[] bytes) {
    final char[] hexArray = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
    char[] hexChars = new char[bytes.length * 2];
    int v;
    for ( int j = 0; j < bytes.length; j++ ) {
        v = bytes[j] & 0xFF;
        hexChars[j * 2] = hexArray[v >>> 4];
        hexChars[j * 2 + 1] = hexArray[v & 0x0F];
    }
    return new String(hexChars);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T12:58:13.583

您可以执行以下组合：

1.  获取图像的字节数组：[Java-将缓冲图像转换为字节[]而不写入磁盘](https://stackoverflow.com/questions/10247123/java-convert-bufferedimage-to-byte-without-writing-to-disk)
2.  获取字节数组的十六进制字符串：[如何在 Java 中将字节数组转换为十六进制字符串？](https://stackoverflow.com/questions/9655181/convert-from-byte-array-to-hex-string-in-java)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:10:36.217

只需`byte[]`以通常的 Java I/O 方式获取图像，然后依次输入[`DataTypeConverter#printHexBinary()`](http://docs.oracle.com/javaee/6/api/javax/xml/bind/DatatypeConverter.html#printHexBinary%28byte%5b%5d%29)以从中获取十六进制字符串。

```
ByteArrayOutputStream output = new ByteArrayOutputStream();

try (InputStream input = new URL("http://example.com/some.jpg").openStream()) {
    byte[] buffer = new byte[10240];
    for (int length = 0; (length = input.read(buffer)) > 0;) {
         output.write(buffer, 0, length);
    }
}

String hex = DatatypeConverter.printHexBinary(output.toByteArray());
// ... 
```

请注意，您不需要`ImageIO`为此使用整个 Java 2D API ( et.al.)。*这仅在您真正*打算操纵图像（调整大小、裁剪、倾斜等）时才有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:08:37.760

除了其他答案之外，一旦您阅读了图像，您还可以使用现有的[javax.xml.bind.DatatypeConverter](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/DatatypeConverter.html)类将字节数组转换为十六进制字符串。理想情况下使用@BalusC的方法来节省内存并直接将图像读入字节数组，然后简单地做

```
String s = javax.xml.bind.DatatypeConverter.printHexBinary(byteArray); 
```

# objective-c - 当其他应用程序（iTunes 或 Spotify）执行某些操作时接收事件

> ID：15659253
> 
> 赞同：0
> 
> 时间：2013-03-27T12:50:53.463
> 
> 标签：objective-c, macos, itunes, spotify

我对 Objective-C 和 OSX 开发还很陌生，所以我仍在学习如何找到这些答案......

是否有一个通用库允许您在其他应用程序中执行特定操作时接收事件？

具体来说，当 iTunes 或 Spotify 开始播放音频并停止播放音频时，我试图在我的应用程序中接收事件。

我已经为每个应用程序实现了一个脚本桥，它允许我从每个应用程序获取播放状态，但是我希望能够在我关心的操作被执行时接收事件——而不是必须轮询它们不断地。此外，iTunes 和 Spotify 无疑是两个流行的音乐播放器，但我还想支持其他一些（如 Rdio 和 MOG）。为每个特定的音乐播放器编写一个实现似乎有点疯狂——但也许这正是我必须做的。

任何有助于阅读的见解、提示或链接也值得赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:04:23.423

当播放状态发生变化时， Spotify 客户端会发出一个带有名称的分布式通知，`com.spotify.client.PlaybackStateChanged`每次调用时都会包含许多元数据键。您可以在您的应用程序中使用`NSDistributedNotificationCenter`.

iTunes 也有一个叫做`com.apple.iTunes.playerInfo`.

# r - `knit`ting with `fig.keep='all'`时如何指定图形名称

> ID：15659254
> 
> 赞同：5
> 
> 时间：2013-03-27T12:50:54.710
> 
> 标签：r, knitr

我`knitr`用来生成报告。但是，我经常首先准备包含所有图表的“内部”文档，然后在最终报告或论文中只想包含一些数字。

比如说，我有一组系统生成的数字，比如说我循环浏览我的样本：

```
<<sample, fig.keep = 'all'>>=
specimen <- c("436a", "783a", "10b")
for (s in specimen) # in reality it would e.g. be levels (specimen)
   plot (results [s])
@ 
```

这将产生许多文件`figures/sample1.pdf`，`figures/sample2.pdf`等等。虽然编号为 1、2、... 对 knitr 生成的报告有好处，但如果我想在论文中包含其中一个图，则很麻烦且容易出错找出哪个 .pdf 属于哪个样本。

我怎么知道`knitr`使用文件名，例如`"figures/sample-436a.pdf"`？

我试过`<<fig.path = sprintf ("figures/sample-%s", s)>>=`了，但这不起作用：`s`未知，所以我猜`fig.path`是在块处理开始时评估的，而不是在保存块时。

PS：减少错误风险的一个明显方法是标题，但恕我直言，这在论文中很难看。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:09:57.523

好问题。不确定这是否是一个令人满意的答案：

```
\documentclass{article}

\begin{document}

<<prepare-src, include=FALSE>>=
s = names(iris)[-5]
# construct the source document
src = sprintf('<<sample-%s>>=
hist(iris[,"%s"], col="gray", border="white")
@', s, s)
@

% evaluate the source
\Sexpr{knit(text = src)}

\end{document} 
```

在你的情况下，你只需要决定进入哪个标本`s`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T23:13:36.550

这是使用钩子实现相同目的的另一种方法（尽管有点复杂）。我们使用两个钩子，一个基于块选项重命名图形的块钩子`fig.names`，以及一个替换文档中名称的输出钩子。我确信可以重构此代码，甚至可以将其插入`knitr`以使其正常工作。

```
\documentclass{article}
\begin{document}

<<main, echo = F>>=
knit_hooks$set(fig.names = function(before, options, envir){
  if (!before) {
    from = dir('figure', pattern = opts_current$get('label'), full = TRUE)
    to = sprintf('%s.pdf', file.path('figure', 
      paste(opts_current$get('label'), options$fig.names, sep = "-")))
    file.rename(from, to)
  }
})
knit_hooks$set(chunk = function(x, options){
  if (is.null(options$fig.names)){
     knitr:::.chunk.hook.tex(x, options)
  } else {
    chunk_name = opts_current$get('label')
    x = gsub(sprintf('%s[0-9]', chunk_name), 
      sprintf("%s-%s", chunk_name, options$fig.names), x)
    knitr:::.chunk.hook.tex(x, options)
  }
});
@

<<iris, fig.names = letters[1:4]>>=
invisible(lapply(iris[,-5], hist, col = 'gray', border = 'white'))
@

\end{document} 
```

# javascript - Javascript - 数组中的 2 个 var 输入

> ID：15659255
> 
> 赞同：0
> 
> 时间：2013-03-27T12:50:55.147
> 
> 标签：javascript, jquery, arrays, list

我需要我的两个元素像这样进入我的 var busList（这是硬编码的）：

```
var busList = [
{ RuteNr: '901', RuteNavn: 'Vejle - Kolding'},
{ RuteNr: '901-xs', RuteNavn: 'Kolding - Vejle'},
{ RuteNr: '401', RuteNavn: 'Kastrup - arhus'}]; 
```

但在实际代码中，我在一个列表中收到了所有内容。因此我这样做：

```
 rutenr = data.busliste[counter].RuteNr; //this line works fine
    rutenavn = data.busliste[counter].RuteNavn; //this line works fine
    var busList = [{ RuteNr: rutenr , RuteNavn: rutenavn}]; 
```

不幸的是，这不起作用。元素不进入数组。有什么帮助吗？

编辑：（完整代码）

```
 $.get('http://localhost:7120/LocationService/GetRouteList', function(data) {
 $('.result').html(data);
 var counter = 0;
 for (var i in data.busliste)
 {
    rutenr = data.busliste[counter].RuteNr;
    rutenavn = data.busliste[counter].RuteNavn;
    busList.push({ RuteNr: rutenr , RuteNavn: rutenavn});
     counter++;
 }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:53:29.900

您需要先创建一个数组（在`counter`循环之前）

```
busList = []; 
```

然后在`counter`循环中

```
rutenr = data.busliste[counter].RuteNr;
rutenavn = data.busliste[counter].RuteNavn;
busList.push({ RuteNr: rutenr , RuteNavn: rutenavn}); 
```

更新：

```
$.get('http://localhost:7120/LocationService/GetRouteList', function(data) {
    $('.result').html(data);
    busList = [];
    $.each(data.busliste, function(i, v) {
                busList.push({
                            RuteNr : v.RuteNr,
                            RuteNavn : v.RuteNavn
                        });
            });
    console.log(busList)
}); 
```

# perl - 使用 perl 获取字符串中的起始空间

> ID：15659261
> 
> 赞同：0
> 
> 时间：2013-03-27T12:51:12.953
> 
> 标签：perl

我正在尝试获取空白并将其分配给使用`perl`.

我有一个字符串

`$line = " Testing purpose"`

我想获取该字符串中的空白并将其分配给另一个字符串。有人能帮我一下吗？

```
$line = "       Testing purpose"; 
```

`$space = " ";` （这个空间变量的空间来自`$line`。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:57:11.103

使用正则表达式。

```
$line =~ m/^(\s*)/;
$space = $1; 
```

这将匹配空格和制表符，不修改原始字符串。如果您还想从原始字符串中删除空格，请使用以下命令：

```
$line =~ s/^(\s*)//;
$space = $1; 
```

# dotnetnuke - 同一编译模块内的 DNN7 导航

> ID：15659265
> 
> 赞同：0
> 
> 时间：2013-03-27T12:51:27.073
> 
> 标签：dotnetnuke

我正在使用已编译的模块 Visual Studio 模板。

我想在添加到解决方案中的不同 ascx 控件之间导航。当用户单击一个按钮时，我想加载一个不同的 ascx 控件并允许他们编辑一些数据。

在同一模块中处理 ascx 到 ascx 控件导航的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:15:07.397

查看[使用 EditURL() 或 NavigateURL() 在 DotNetNuke 模块控件之间导航](https://stackoverflow.com/q/1910578/2688)，了解有关在模块中的控件之间导航可用的选项的详细信息。

# emacs - 根据值将列表列表转换为不同的列表列表

> ID：15659266
> 
> 赞同：3
> 
> 时间：2013-03-27T12:51:28.463
> 
> 标签：emacs, lisp, elisp, reduce

我想转换这个列表列表：

```
(setq terms '((("name" . "t1c1")
               ("taxonomy" . "category"))
              (("name" . "t1c2")
               ("taxonomy" . "category"))
              (("name" . "t1k1")
               ("taxonomy" . "post_tag"))
              (("name" . "t1k2")
               ("taxonomy" . "post_tag"))
              (("name" . "t1k3")
               ("taxonomy" . "post_tag")))) 
```

进入其他列表：

```
(("category" "t1c1" "t1c2")
 ("post_tag" "t1k1" "t1k2" "t1k3")) 
```

我想出了：

```
(reduce
 '(lambda (lists term)
    (let* ((name (cdr (assoc "name" term)))
           (taxonomy (cdr (assoc "taxonomy" term)))
           (existing (assoc taxonomy lists)))
      (if existing
          (progn
            (setcdr existing (sort (cons name (cdr existing)) 'string<)))
        (push (list taxonomy name) lists)))
    lists)
 terms
 :initial-value nil) 
```

这看起来很不雅—— let* 和 if 语句的使用看起来都像是潜在的代码异味。

我会很感激在 elisp 中执行此操作的任何更好方法的示例——更好可能意味着更纯粹的功能，更好地使用内置函数来表示某些操作等。

哦，我想对结果列表的内容进行排序——这让我更容易测试输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:47:30.217

想到的最优雅的是使用`(loop ...)`宏。有人可能会说这还不够简洁，但我认为它的简洁性和表现力胜过纯粹性：

```
(loop
 with result = '()
 for term in terms
 for name = (aget term "name")
 for taxonomy = (aget term "taxonomy")
 do (aput 'result taxonomy
          (sort (cons name (aget result taxonomy)) 'string<))
 finally return result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:26:09.200

> 我会很感激在 elisp 中执行此操作的任何更好方法的示例——更好可能意味着更纯粹的功能，更好地使用内置函数来表示某些操作等。

也许是这样的（假设`cl-lib`已加载）：

```
(cl-flet ((step (lists term)
            (let ((name (aget term "name"))
                  (taxonomy (aget term "taxonomy")))
              (cl-acons taxonomy
                        (sort (cons name (aget lists taxonomy)) #'string<)
                        (cl-remove taxonomy lists :key #'car :test #'equal)))))
  (reduce #'step dhl-terms :initial-value nil)) 
```

它会比您的解决方案效率低，因为“更纯粹的功能”也意味着不使用`setcdr`- 它会破坏新条目，并再通过一次以删除旧条目。

# mysql - 将网站上传到主机时如何设置 MySQL 数据库？

> ID：15659272
> 
> 赞同：1
> 
> 时间：2013-03-27T12:51:42.107
> 
> 标签：mysql, upload, web

我正在尝试将我的网站上传到公共主机并使其首次上线。我的网站放在我家的电脑上。我使用 XAMPP 作为工作环境和 Joomla 2.5.9。

我想我应该做两件事：

1.  将包含所有子文件夹（管理员、缓存、cli、组件等）的所有站点结构复制到主机。我是用 FileZilla 做的。

2.  设置 MySQL 数据库。我不知道该怎么做。我已将我的语言环境数据库中的所有表导出到 SQL 文件，并将 ZIP 文件作为第一步。之后，我在主机上打开了 phpMyAdmin 并转到了数据库部分。但是，那里没有“创建数据库”选项。

如何在主机上设置数据库？

除了 1) 和 2) 之外，我还应该做些什么吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-27T12:58:50.890

在 phpMyAdmin 中，转到 SQL 并运行以下命令：

`CREATE DATABASE joomla`

另一个选项可能是您需要从 CPanel、Plesk 等主机控制面板创建数据库和用户/密码组合。

现在输入数据库并点击导入按钮以导入您的 zip（使用 db 转储）。

您还需要调整配置文件`configuration.php`以匹配您的新主机配置，尤其是：

*   $分贝
*   $主机
*   $用户
*   $密码
*   $log_path
*   $tmp_path

# wcf - WCF 数据服务 - 自定义提供程序示例

> ID：15659273
> 
> 赞同：1
> 
> 时间：2013-03-27T12:51:49.017
> 
> 标签：wcf, wcf-data-services, odata

我正在尝试使用新的 WCF 数据服务公开我现有的服务器应用程序。我不能使用 EF，因为这意味着我必须重写整个事情......

不幸的是，我在网上找到的所有关于 WCF 数据服务和 OData 的示例都涉及 EF，或者非常基本并使用模拟数据。我正在寻找使用自定义提供程序或工具包更实际地使用 WCF 数据服务，这将向我展示：

1.  返回复杂类型（或用标题实体包装真实实体），以公开 state_id 或其他不属于我的数据库表的属性，但需要在每次请求时将它们传递给客户端。

2.  定义导航属性以允许我提供其他链接数据，例如： [http](http://services.odata.org/Northwind/Northwind.svc/Customers) ://services.odata.org/Northwind/Northwind.svc/Customers ('ALFKI')?$expand=Orders

    详细说明链接一对多之间的区别 - 与多对多相比

# php - 如何从帖子中检索图像并在 WordPress 中的帖子摘录之前显示它？

> ID：15659279
> 
> 赞同：0
> 
> 时间：2013-03-27T12:51:59.567
> 
> 标签：php, content-management-system, wordpress-theming, wordpress

我是 PHP 和 WordPress 的新手。

我正在自定义一个 WordPress 模板，我将在我的主页的摘录帖子可视化中实现以下行为：

**如果帖子包含图像（一个或多个），则在首页帖子预览中的开头显示帖子中第一个图像的缩略图，而不是显示帖子的摘录**

目前我有以下代码，在 WordPress 循环中，显示主页中所有帖子的摘录：

```
<!-- .entry-summary -->
        <?php else : ?>
        <div class="entry-content">
            <?php the_excerpt(); ?>
            <?php wp_link_pages( array( 'before' => '<div class="page-link"><span>' . __( 'Pages:', 'admired' ) . '</span>', 'after' => '</div>' ) ); ?>
        </div> 
```

好的，您可以看到此代码片段显示了帖子的摘录。

我会知道是否有可能在帖子中找到第一个图像，将其放入变量中并在摘录可视化之前将其显示在跨度（或其他一些 html 标记）中

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:36:12.613

您可以尝试使用下面的功能将您的第一张图片删除到开头

```
function firstImageExcerpt($post_excerpt) {

    $reg_exp= '/<img.+src=[\'"]([^\'"]+)[\'"].*>/i';
    preg_match_all($reg_exp, $post_excerpt, $matches);
    $first_img = $matches[0][0];

    $post_excerpt = str_replace($first_img, '', $post_excerpt);
    $post_excerpt = $first_img . $post_excerpt;
    return $post_excerpt;
} 
```

并在循环中使用它：

```
 $post_excerpt = get_the_excerpt();
    echo firstImageExcerpt($post_excerpt); 
```

# perl - 使用 Moose 角色时覆盖默认属性

> ID：15659280
> 
> 赞同：1
> 
> 时间：2013-03-27T12:52:01.480
> 
> 标签：perl, moose

我不能用`MooseX::Declare`.

```
use MooseX::Declare;

role Person {
has 'name' => (
    is => 'ro',
    isa => 'Str',
    default => 'John',
    );
}

class Me with Person {
has '+name' => (
        default => 'Michael',
    );
} 
```

执行代码报错：

```
Could not find an attribute by the name of 'name' to inherit from in Me at /usr/lib/perl5/Moose/Meta/Class.pm line 711
Moose::Meta::Class::_process_inherited_attribute('Moose::Meta::Class=HASH(0x2b20628)', 'name', 'default', 'Michael', 'definition_context', 'HASH(0x114fd38)') called at /usr/lib/perl5/Moose/Meta/Class.pm line 694
Moose::Meta::Class::_process_attribute('Moose::Meta::Class=HASH(0x2b20628)', '+name', 'default', 'Michael', 'definition_context', 'HASH(0x114fd38)') called at /usr/lib/perl5/Moose/Meta/Class.pm line 566
Moose::Meta::Class::add_attribute('Moose::Meta::Class=HASH(0x2b20628)', '+name', 'default', 'Michael', 'definition_context', 'HASH(0x114fd38)') called at /usr/lib/perl5/Moose.pm line 79
Moose::has('Moose::Meta::Class=HASH(0x2b20628)', '+name', 'default', 'Michael') called at /usr/lib/perl5/Moose/Exporter.pm line 370
Moose::has('+name', 'default', 'Michael') called at Test.pm line 12
main::__ANON__() called at /usr/share/perl5/MooseX/Declare/Syntax/MooseSetup.pm line 81
MooseX::Declare::Syntax::MooseSetup::__ANON__('CODE(0x2b0be20)') called at Test.pm line 21 
```

这有效，但它不是基于角色：

```
class Person {
has 'name' => (
    is => 'ro',
    isa => 'Str',
    default => 'John',
    );
}

class Me extends Person {
has '+name' => (
    default => 'Michael',
    );
} 
```

使用角色时我的代码有什么问题？有没有可能覆盖属性行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T12:14:19.433

irc.perl.org #moose 的 irc 用户给出了解决方案：

```
<phaylon> iirc MX:Declare will consume the roles declared in the block at the end. try with 'Person'; in the class block before the has 
```

所以下面的代码现在可以工作了：

```
use MooseX::Declare;

role Person {
  has 'name' => (
    is => 'ro',
    isa => 'Str',
    default => 'John',
  );
}

class Me {
  with 'Person';

  has '+name' => (
    default => 'Michael',
  );
} 
```

非常感谢`phaylon`。

# javascript - 在 JavaScript 中创建命名空间/类类型结构的最优雅方式

> ID：15659283
> 
> 赞同：9
> 
> 时间：2013-03-27T12:52:16.813
> 
> 标签：javascript, jquery, design-patterns, module, closures

我正在尝试找到一种方法，该方法将为我提供将代码包装在`Namespace`/ `Unit`like 对象中的最优雅方式。例如 Google Maps API's `var a = Google.Maps.Foo();`，我认为它看起来很干净。

我希望它也*包含*（如果这是正确的术语）`jQuery` `No Conflict` `$`标志。

到目前为止，我喜欢：

```
// Top level container for sub objects
var myApp = myApp || {}; 

// An object to be held in myApp     
(function( skillet, $, undefined ) {

    //Private Property
    var isHot = true;

    //Public Property
    skillet.ingredient = "Bacon Strips";

    //Public Method
    skillet.fry = function() {
        var oliveOil;

        addItem( "\t\n Butter \n\t" );
        addItem( oliveOil );
        console.log( "Frying " + skillet.ingredient );

        return "Fried!";
    };

    //Private Method
    function addItem( item ) {
        if ( item !== undefined ) {
            console.log( "Adding " + $.trim(item) );
        }
    }   

}( window.myApp.skillet = window.myApp.skillet || {}, jQuery )); 
```

任何人都可以对此进行扩展，指出潜在的问题，或者只是提供更好的方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T13:05:00.147

检查这个[JavaScript 模块模式](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html) 和这个[学习 JavaScript 设计模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)

模块示例：

```
var MyModule = (function($){
  var MY_CONSTANT = 123;

  var _myPrivateVariable = 'TEST MEH';
  var _$myPrivateJqueryObject = $('div.content');

  var _myPrivateMethod = function(){
    alert('I am private!');
  };

  var myPublicMethod = function(){
    console.log('Public much?');
  }

  return {
      myPublicMethod : myPublicMethod 
  };

})(jQuery);

MyModule.myPublicMethod(); 
```

类示例：

```
function Person(name, age){
   this.name = name || '';
   this.age = age || -1;
}

Person.prototype.greet= function(){
   console.log('Hi! My name is' + this.name + '. Old ' + this.age + ' I am.');
}

var person = new Person("John", 12);
person.greet(); 
```

# c++ - 从二维字符串数组中提取字符

> ID：15659284
> 
> 赞同：-2
> 
> 时间：2013-03-27T12:52:17.747
> 
> 标签：c++, arrays, string, char, 2d

我有二维字符串数组，所以这里有一个例子：

```
string arr[26][4];
arr[0][0] = 'A';
char t1 = arr[0][0]; 
```

错误：无法在初始化中将“std::string”转换为“char”|

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:59:18.797

你已经这样声明`arr`了：

```
std::string arr[N][M]; 
```

以下内容有效，因为`std::string`有一个`operator=`需要 a 的重载`char`：

```
arr[0][0] = 'A'; 
```

这导致位置处的字符串`0,0`被设置为仅包含`A`.

但是，没有从 a`std::string`到 a 的直接转换`char`，正如您在这一行中尝试做的那样：

```
char temp = arr[0][0]; 
```

相反，如果您希望字符串的第一个字符位于 position `0,0`，则必须执行以下操作：

```
char temp = arr[0][0][0]; 
```

首先`arr[0][0]`访问位置处的字符串，`0,0`然后访问该字符串`[0]`的第一个字符。

# c++ - C ++中向量的插入和放置有什么区别

> ID：15659292
> 
> 赞同：10
> 
> 时间：2013-03-27T12:52:40.607
> 
> 标签：c++, vector

除了使用 emplace 进行单次插入和使用向量中的 insert 进行多次插入外，它们的实现还有其他区别吗？

在这两种情况下，插入任何元素都会移动所有其他元素。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T12:56:32.207

`std::vector::insert` **通过调用复制构造函数或移动构造函数将元素复制**或**移动**到容器中。
而
In`std::vector::emplace`元素是**就地构造的**，即不执行复制或移动操作。

后者是从 C++11 开始引入的，如果复制你的类是一个不平凡的操作，那么它的使用是可取的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T12:54:42.483

主要区别在于，它`insert`采用类型与容器类型相同的对象并将该参数**复制**到容器中。`emplace`接受一个或多或少的任意参数列表，并根据这些参数在容器中**构造一个对象。**

# git - 文件在克隆后直接列为已修改

> ID：15659295
> 
> 赞同：3
> 
> 时间：2013-03-27T12:52:44.193
> 
> 标签：git, github

我是 git 和 github 的新手。我以为我了解了基础知识。但现在我很困惑。由于我的计算机出现问题，我换了另一台计算机并从 github 进行了 git clone。然后我想切换分支并输入结帐分支。这样我之前也在另一台电脑上做过。

“但我收到以下错误：您对以下文件的本地更改将被结帐覆盖：”

许多文件

“请在切换分支之前提交您的更改或存储它们。”

克隆后如何更改它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:59:20.300

所以通常你可能已经为你的存储库启用了**autoclrf**和**filemode**值。

这意味着当您克隆并将所有内容标记为已修改时，他会更改行尾。

你可以用`git status`. 您不能更改分支，因为有修改过的文件。

如果不需要，请更改 git 配置中的一些值：

**.git/config**：

```
autoclrf = false;
filemode = false; 
```

当您设置新值时，您可以再次创建 git status 并查看是否有修改过的文件。否则，您必须提交并推送所有修改过的文件。

如果您不想要更改，可以将更改重置为最后一次提交。

```
git reset --hard HEAD^ 
```

或者

```
git checkout . 
```

# c# - 读取文件 A 并附加到文件 B，跳过一些字节

> ID：15659297
> 
> 赞同：2
> 
> 时间：2013-03-27T12:52:45.677
> 
> 标签：c#, arrays, byte, filestream

我需要将一些 BMP 图像附加在一起。您可能知道，BMP 图像有一个 54 字节的标题。我将自己的新标头写入一个新文件，然后我需要遍历 BMP 文件列表并将它们相互附加，但我需要跳过每个文件的前 54 个字节。

这是一个千兆像素的图像拼接项目。我会使用已经存在的软件，除了图像中没有重叠（但我知道平铺布局）。我需要能够将一些非常大的 BMP 文件 (192,000x1080) 作为行并将它们附加到另一个下方以创建最终图像，即 20.7 千兆像素。虽然我有 32GB 的内存，但最终的 20.7 千兆像素图像将是 62.2GB（然后我将转换为 PNG）。

鉴于这些巨大的内存需求，我如何在不使用所有内存的情况下读取每个 BMP 并将它们附加到最终文件？如果可能，我想使用字节数组；因为这些是未压缩的 BMP，它们可以像那样读取并保存到另一个文件，而无需使用任何 GDI 对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:01:57.507

您可以写入文件中的任意位置。以机智：

```
using(var s = new FileStream("myBigImage.bmp", FileMode.Create, FileAccess.Write)) {
    //assume that you write out the header here
    foreach(var tileFile in tiles) {
        byte[] imgData = /*read image data into a byte[]*/;
        long y = /*obtain the correct y offset*/;

        s.Position = y * pixelWidth * imageWidth + 58;
        s.Write(imgData, 0, imgData.Length);

    }
} 
```

基本上，您可以在文件中跳转以填写您想要的任何位置。`Position`是一个 long 值，因此您不必担心碰到 32 位整数的限制。

幸运的是，因为您的图像基本上只是一堆高大的瓷砖，所以您不必担心处理每一行。在这种情况下，为了减少内存，您必须单独写出每个图块的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:01:57.910

您不需要将所有生成的文件数据保存在内存中。只需打开一个 FileStream 并将数据写入文件。即使您写入千兆字节的数据，FileStream 也不会使用太多内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T08:43:11.620

如果我之后的任何人感兴趣，这就是我发现的工作：

```
for (int i = 0; i < reverseImageFiles.Length; i++)
        {
            string curBMP = reverseImageFiles[i];

            using(Stream inStream = File.OpenRead(curBMP))
            using (Stream writeStream = new FileStream(outputBMP,FileMode.Append,FileAccess.Write,FileShare.None))
            {
                BinaryReader reader = new BinaryReader(inStream);
                BinaryWriter writer = new BinaryWriter(writeStream);

                byte[] buffer = new Byte[134217728];
                int bytesRead;
                int totalBytes = 0;

                while ((bytesRead = inStream.Read(buffer, 0, 134217728)) > 0)
                {
                    totalBytes += bytesRead;

                    if (totalBytes <= 134217729)  //if it's the first round of reading to the buffer, you need to get rid of 54-byte BMP header
                    {
                        writeStream.Write(buffer, 54, bytesRead - 54);
                    }
                    else
                    {
                        writeStream.Write(buffer, 0, bytesRead);
                    }
                }

            }
        } 
```

两件事情：

特别是对于 BMP，我发现您需要在追加时反转文件列表。例如，如果要追加的三个文件分别标记为 001.bmp、002.bmp、003.bmp，其中 001.bmp 应该在顶部，则实际上需要从 003.bmp 开始并向下工作。显然 BMP 是向后编码的。

**如您所见，我使用了 128MB 的缓冲区。如果我想减少硬盘搜索，使用不同的大小会更好吗？** 我的驱动器最近进行了碎片整理。感谢所有的帮助！

# hibernate - 设置一对多休眠 jpa 的值

> ID：15659301
> 
> 赞同：0
> 
> 时间：2013-03-27T12:52:55.537
> 
> 标签：hibernate, jpa

我在一堆我的实体上有一对多的关系。但是，我并不总是希望为孩子定义一个值。因为它可以是一对多的，所以它可能是空的。

当我不创建子对象时，我的测试因违反参照完整性约束而失败。

我尝试将 nullable true 添加到连接中，但这似乎并没有解决问题。

```
@JoinColumn(name = "image_relation")
@LazyCollection(LazyCollectionOption.FALSE)
@OneToMany
private List<Image> productImageGroup; 
```

我尝试使用 fetch 类型的 Eager 并得到不同的错误。

```
@JoinColumn(name = "product_item_relation")
@OneToMany(fetch=FetchType.EAGER)
private List<ProductItems> productItemGroup; 
```

抛出：

```
Caused by: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:44:00.897

该问题很可能与@LazyCollection 被滥用有关。

当渴望获取多个列表时，会引发多个包异常。您可以通过两种方式解决此问题：

用一组替换列表。允许急切地获取任意数量的 Set。

```
@JoinColumn(name = "product_item_relation")
@OneToMany(fetch=FetchType.EAGER)
private Set<ProductItems> productItemGroup; 
```

或者在您的程序代码中删除急切获取并处理它

```
@JoinColumn(name = "product_item_relation")
@OneToMany
private List<ProductItems> productItemGroup;

public List<MyObject> getMyObjects(){
    List<MyObject> objects = entityManager.createQuery("SELECT o FROM MyObject o").getResultList();
    // OneToMany not fetched yet
    for(MyObject o : objects)
        Hibernate.initialize(o.getProductItemGroup()); // Same as simply accessing the list to force loading, but states your intention more clearly.
    // OneToMany collection is now fetched.
    return objects;
} 
```

`@org.hibernate.annotations.Fetch(fetchMode)`您可以通过指定集合并指定子选择或连接来大大提高性能。请注意，这是一个特定于休眠的注释，您的应用程序将不再依赖供应商

# visual-studio - 即使没有包含标头，函数也能正常工作 - Visual Studio

> ID：15659302
> 
> 赞同：0
> 
> 时间：2013-03-27T12:53:12.580
> 
> 标签：visual-studio

在 Visual C++ 中工作时，我经常注意到某些函数即使在它们的标头未包含在内时也能正常工作。例如，`tolower()`即使`ctype.h`不包括在内也可以工作。

当我参加在线编程比赛时，这种行为给我带来了问题，当我在我的计算机上运行该程序时运行良好且花花公子，但在提交时出现`function not defined`错误。有没有办法阻止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:55:12.937

可能的解释：

*   你的警告级别被调低了。
*   您正在使用包含正确文件的预编译头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:57:37.260

您的声明`tolower()`实际上包括在内。可能是以下方式之一：

*   `<cctype>`或`<ctype.h>`包含在您包含的标题之一（甚至是标准标题）中。该标准不禁止标准标头包含其他标准标头

*   您包含的标题之一具有该功能的声明。例如，`<algorithm>`可能`int tolower(int);`在其代码中的某个位置。

您不能禁止这种行为。您可以做的是了解必须在哪里定义/声明函数，并且永远不要依赖其他标头包含该标头。你知道在哪里`tolower`声明，所以`<cctype>`每次使用这个函数时都要包含。

# android-layout - 使用 IntelliJ 12 在 android 中创建表

> ID：15659310
> 
> 赞同：0
> 
> 时间：2013-03-27T12:53:33.253
> 
> 标签：android-layout

我对 android 完全陌生，需要创建一个包含两列和多行的表，以在右侧列中保存日期和有关这些日期的相关信息。我正在使用 IntelliJ（最新版本）。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T21:22:05.813

查看[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)组件以获取简单的表格数据。那里有教程，例如：http: [//mobile.tutsplus.com/tutorials/android/android-sdk_table-layout/](http://mobile.tutsplus.com/tutorials/android/android-sdk_table-layout/)

或者，如果您的数据更加动态（可能会在您查看时更改），也许某种[带有适配器的自定义 ListView](http://developer.android.com/guide/topics/ui/layout/listview.html)更合适，请查看此处的讨论以获取更多信息： [ListView 或 TableLayout？](https://stackoverflow.com/questions/12152833/listview-or-tablelayout)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-08T23:07:45.397

删除现有的 main.xml 并使用 TableLayout 创建一个新的 main.xml。现在在 TableLayout 的属性窗口中，将 StretchColumn 值设置为 2 现在例如，只需单击一次调色板中的“TextView”并离开鼠标，然后将鼠标移动到设计器窗口。你会看到它会告诉你放置 TextView 控件的位置。如果再次单击，您将能够放置控件（视图）。它将自动嵌套在 TableRow 中，因此无需担心！

# python - 查询 Python 以获取系统包含路径时出现 emacs24 错误超时

> ID：15659313
> 
> 赞同：1
> 
> 时间：2013-03-27T12:53:40.227
> 
> 标签：python, emacs24

今天安装了emacs24.3，但是出现了一些问题。在 Google 的帮助下解决了一些问题，但我无法解决以下问题。我安装了 pymacs、rope 和 yasnippets，当我打开一个 python 文件（*.py）时，出现错误：

```
Timeout while querying Python for system include path. 
```

我应该如何解决问题？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T19:05:40.460

该错误由Emacs 24.3 中包含的 CEDET（参见*语义/wisent/python.el）引发。*对我来说，在加载任何 CEDET 文件之前显式设置 CEDET 的**python-shell-interpreter变量是可行的。**我的 ~/.emacs 中的行是：

```
(setq python-shell-interpreter "/path/to/python") 
```

我系统上的*/path/to/python*恰好是*/opt/bin/python*。

# ios - 每当我尝试将我的设备添加到配置门户时，Xcode 4.6.1 就会崩溃。

> ID：15659315
> 
> 赞同：9
> 
> 时间：2013-03-27T12:53:49.100
> 
> 标签：ios, xcode, xcode4.6, xcode-organizer

每当我尝试通过 Xcode Organizer 将我的设备添加到配置门户时，Xcode 4.6.1 就会崩溃。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-27T13:19:31.510

这是解决方案：

1.  退出 Xcode。
2.  在终端中运行以下命令：

    > mkdir ~/Library/Developer/Xcode/OldPortalDBs；mv
    > ~/Library/Developer/Xcode/connect1.apple.com* ~/Library/Developer/Xcode/OldPortalDBs

3.  启动 Xcode 并重试！

有关详细信息，请参阅[Apple Developer Forums](https://devforums.apple.com/message/796388#796388)上的官方帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T00:44:22.613

这绝对是 Xcode 中的一个错误。过去工作正常。该命令对我也不起作用。找不到目录 ~/Library/Developer/Xcode。任何建议，请。有趣的是，我的新 iPad 被添加没有任何问题。无法将 iPhone 添加到配置文件。iPhone 运行 iOS 6.1.3、iPad 6.1.2。Xcode 4.6.1 似乎不支持 iOS 6.1.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T06:14:07.923

~/Library/Developer/Xcode/connect1.apple.com* 没有这样的文件或目录；

天哪，有什么问题。

==========

**更新**

答案对我不起作用，毕竟我清理了钥匙串中的所有相关信息，以及 Xcode 中的所有配置文件，并更新了所有这些文件，解决了这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:58:36.017

这可能是 Xcode 中的一个错误。`Organizer`我有一个类似的问题 - 当我每次刷新配置文件时它都会崩溃。我最终通过配置门户完成了所有工作，他们手动下载配置文件并在 Xcode 中更新它们。

# webdriver - Geb 与 spock 并关闭浏览器窗口

> ID：15659317
> 
> 赞同：1
> 
> 时间：2013-03-27T12:53:50.750
> 
> 标签：webdriver, geb

所以我编写了我的第一个 Geb 脚本，它扩展了 GebReportingSpec。我已经指定了一个 def 清理，我在其中执行了 driver.quit()。现在浏览器确实关闭了，但我收到一个错误，因为屏幕截图实用程序无法运行，因为我猜它在浏览器关闭后运行。我试着入睡看看是否是问题所在，但什么也没做

* * *

```
JUnit 4 Runner, Tests: 1, Failures: 1, Time: 25944Test Failure: Validate that the default time zone for store is set to America/New_York(groovy.manager.ReferenceStoreDefaultTimeZoneTests)org.openqa.selenium.remote.SessionNotFoundException: The FirefoxDriver cannot be used after quit() was called.Build info: version: '2.31.0', revision: '1bd294d185a80fa4206dfeab80ba773c04ac33c0', time: '2013-02-27 13:51:26'System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.8.3', java.
version: '1.6.0_43'
Driver info: driver.version: RemoteWebDriver
        at org.openqa.selenium.firefox.FirefoxDriver$LazyCommandExecutor.execute
(FirefoxDriver.java:352)
        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.ja
va:527)
        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.ja
va:569)
        at org.openqa.selenium.remote.RemoteWebDriver.getPageSource(RemoteWebDri
ver.java:414)
        at geb.report.PageSourceReporter.getPageSource(PageSourceReporter.groovy
:39)
        at geb.report.PageSourceReporter.writePageSource(PageSourceReporter.groo
vy:35)
        at geb.report.PageSourceReporter.writeReport(PageSourceReporter.groovy:2
7)
        at geb.report.ScreenshotAndPageSourceReporter.writeReport(ScreenshotAndP
ageSourceReporter.groovy:31)
        at geb.Browser.report(Browser.groovy:731)
        at geb.spock.GebReportingSpec.report(GebReportingSpec.groovy:43)
        at geb.spock.GebReportingSpec.cleanup(GebReportingSpec.groovy:39) 
```

* * *

想法？

编辑：

驱动程序是通过 GebConfig 文件创建的

```
@Grab(group='org.seleniumhq.selenium', module='selenium-firefox-driver', 
    version='2.31.0')
@Grab(group='org.seleniumhq.selenium', module='selenium-chrome-driver', 
    version='2.31.0')
@Grab(group='org.seleniumhq.selenium', module='selenium-htmlunit-driver', 
    version='2.31.0')
@Grab("org.seleniumhq.selenium:selenium-support:2.28.0")

import org.openqa.selenium.firefox.FirefoxDriver
import org.openqa.selenium.chrome.ChromeDriver
import org.openqa.selenium.htmlunit.HtmlUnitDriver

reportsDir = "target/geb-reports"

// default is to use firefox
driver = {
    def driver = new FirefoxDriver()
    driver.manage().window().maximize()
    return driver
}

environments {
    'chrome' {
        def chromePath = "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome"
        System.setProperty("webdriver.chrome.driver", chromePath)

        driver = {
            def driver = new ChromeDriver()
            return driver
        }
    }

    'firefox' {
        driver = {
            def driver = new FirefoxDriver()
            driver.manage().window().maximize()
            return driver
        }   
    }

    'htmlunit' {
        driver = {
            def driver = new HtmlUnitDriver()
            driver.javascriptEnabled = true
            return driver
        }   
    }
} 
```

这是正在执行的脚本

```
package groovy.manager

@Grab( 'org.spockframework:spock-core:0.7-groovy-2.0' )
@Grab(group='org.gebish', module='geb-core', version='0.9.0-RC-1')
@Grab(group='org.gebish', module='geb-spock', version='0.9.0-RC-1')
@Grab(group='org.seleniumhq.selenium', module='selenium-firefox-driver', 
    version='2.31.0')

import geb.spock.GebReportingSpec
import org.openqa.selenium.firefox.FirefoxDriver
import groovy.manager.pages.LoginPage
import groovy.manager.pages.org.OrganizationHomePage
import groovy.manager.pages.org.OrganizationProfilePage

class ReferenceStoreDefaultTimeZoneSpec extends GebReportingSpec {

    def "Validate that the default time zone is set to America/New_York"() {
        given: "You have the admin username and password"
            def username = "admin"
            def password = "test"

        when: "Navigate to Manager"
            to LoginPage

        and: "Log intoManager"
            usernameInput().value username
            passwordInput().value password
            submitBtn().click()

        then:
            assert at (OrganizationHomePage)

        and:
            assert ( {$("a[value='America/New York']")} )

        when: "Navigate to the organization profile"
            timeZoneLink().click()

        then:
            assert at (OrganizationProfilePage)

        and: "Verify America New York is selected"
            assert ( $("span", text: contains("America/New York")) )
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T01:08:54.537

如果我使用`groovy`命令行上的命令运行一个非常简单的 geb 测试规范，我可以重现您的问题。我不知道它是否与使用`@Grab`注释或 groovy JUnit 运行器的工作方式有关，但某处不正确，浏览器确实没有关闭。

我学习了相同的课程并使用[Gradle](http://gradle.org)构建运行它，运行优雅地结束并关闭浏览器。

如果您还没有安装 Gradle，最简单的方法是使用[gvm](http://gvmtool.net/)。

然后将以下内容放入`build.gradle`文件中：

```
apply plugin: 'groovy'                       

repositories {                               
    mavenCentral()                             
}                                            

dependencies {                               
   groovy 'org.codehaus.groovy:groovy-all:2.1.2'
   testCompile 'org.spockframework:spock-core:0.7-groovy-2.0'
   testCompile 'org.gebish:geb-spock:0.9.0-RC-1'
   testCompile 'org.seleniumhq.selenium:selenium-firefox-driver:2.31.0'
} 
```

`GebConfig.groovy`最后将您和您的规范类复制到`src/test/groovy`并运行`gradle test`. 您的测试将被执行，之后浏览器将关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T10:27:49.983

这就是我用的

```
dependencies {
def gebVersion = "0.9.3"
def seleniumVersion = "2.42.2"
// If using Spock, need to depend on geb-spock
testCompile "org.gebish:geb-spock:$gebVersion"
testCompile("org.spockframework:spock-core:0.7-groovy-2.0") {
    exclude group: "org.codehaus.groovy"
}
testCompile "org.codehaus.groovy:groovy-all:2.3.4"

testCompile "org.seleniumhq.selenium:selenium-chrome-driver:$seleniumVersion"
testRuntime "org.seleniumhq.selenium:selenium-support:$seleniumVersion" 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:27:32.333

你是如何配置驱动的？[如果您明确地创建它，](http://www.gebish.org/manual/0.9.0-RC-1/driver.html#explicit_lifecycle)您只需要退出驱动程序。否则驱动程序将自行关闭。

# r - 从R中的列表中删除特定类的元素

> ID：15659323
> 
> 赞同：4
> 
> 时间：2013-03-27T12:54:04.777
> 
> 标签：r, list, removeclass

我希望有一种简单的方法可以做到这一点，但搜索后找不到答案。我有一个列表，想删除特定类的元素。

例如说我有清单

```
tempList <- list(2,4,'a', 7, 'f') 
```

我如何删除所有字符条目以仅留下 2、4 和 7 的列表。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T12:56:33.943

尝试

```
> tempList[!sapply(tempList, function(x) class(x) == "character")]
[[1]]
[1] 2

[[2]]
[1] 4

[[3]]
[1] 7 
```

请注意，这是等效的。

```
tempList[sapply(tempList, function(x) class(x) != "character")] 
```

如果你需要大量使用它，你可以把它做成一个函数。

```
classlist <- function(x) {
  sapply(x, class)
}

tempList[classlist(tempList) != "character"] 
```

或者

```
classlist2 <- function(x) {
  x[!sapply(x, function(m) class(m) == "character")]
}

classlist2(tempList) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T20:13:19.523

```
Filter(is.numeric, tempList) 
```

是一种整洁、实用的编写方式。

# php - JSON_BIGINT_AS_STRING 反向移植

> ID：15659325
> 
> 赞同：4
> 
> 时间：2013-03-27T12:54:06.677
> 
> 标签：php, json

据我了解，`JSON_BIGINT_AS_STRING`只有5.4+。我需要在 5.1+ 环境中重现相同的行为。该代码旨在分发，我无法控制它将运行的环境。我有哪些选择（除了编写自己的 json 解析器）？是否有任何成熟且经过良好测试的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T20:04:51.310

这是一个相当棘手的问题，但这里是[Service_JSON](https://gist.github.com/itspriddle/845016)的修改版本，已经使用了一段时间，它成功了；

大多数`regex`解决方案都无法通过此测试

```
$json = "[999999999999999999]"; 
var_dump(json_decode(preg_replace('/("\w+"):(\d+)/', '\\1:"\\2"', $json))); 
```

输出

```
array (size=1)
    0 => float 1.0E+18 
```

**使用服务 json**

```
$json = new ServicesJSON();
$var = $json->decode("[999999999999999999]");
var_dump($var); 
```

输出

```
array (size=1)
    0 => string '999999999999999999' (length=18) 
```

**更复杂的 Json**

```
$data = '{
    "glossary": {
        "title": "example glossary",
        "num1":"343434343434343434343",
        "num2":1112222333344455566,
        "num3":[223232331321323,"23232343545454",3434343434334],
        "GlossDiv": {
            "title": "S",
            "GlossList": {
                "GlossEntry": {
                    "ID": "SGML",
                    "SortAs": "SGML",
                    "GlossTerm": "Standard Generalized Markup Language",
                    "Acronym": "SGML",
                    "Abbrev": "ISO 8879:1986",
                    "GlossDef": {
                        "para": "A meta-markup language, used to create markup languages such as DocBook.",
                        "GlossSeeAlso": ["GML", "XML"],
                        "num1":"343434343434343434343",
                        "num2":1112222333344455566,
                        "num3":[223232331321323,"23232343545454",3434343434334]
                    },
                    "GlossSee": "markup",
                    "num1":"343434343434343434343",
                    "num2":1112222333344455566,
                    "num3":[223232331321323,"23232343545454",3434343434334],
                    "num4":[999999999999999999]
                }
            }
        }
    }
}';

var_dump($json->decode($data,128)); 
```

输出

```
object(stdClass)[2]
  public 'glossary' => 
    object(stdClass)[3]
      public 'title' => string 'example glossary' (length=16)
      public 'num1' => string '343434343434343434343' (length=21)
      public 'num2' => string '1112222333344455566' (length=19)
      public 'num3' => 
        array (size=3)
          0 => string '223232331321323' (length=15)
          1 => string '23232343545454' (length=14)
          2 => string '3434343434334' (length=13)
      public 'GlossDiv' => 
        object(stdClass)[4]
          public 'title' => string 'S' (length=1)
          public 'GlossList' => 
            object(stdClass)[5]
              public 'GlossEntry' => 
                object(stdClass)[6]
                  public 'ID' => string 'SGML' (length=4)
                  public 'SortAs' => string 'SGML' (length=4)
                  public 'GlossTerm' => string 'Standard Generalized Markup Language' (length=36)
                  public 'Acronym' => string 'SGML' (length=4)
                  public 'Abbrev' => string 'ISO 8879:1986' (length=13)
                  public 'GlossDef' => 
                    object(stdClass)[7]
                      ...
                  public 'GlossSee' => string 'markup' (length=6)
                  public 'num1' => string '343434343434343434343' (length=21)
                  public 'num2' => string '1112222333344455566' (length=19)
                  public 'num3' => 
                    array (size=3)
                      ...
                  public 'num4' => 
                    array (size=1)
                      ... 
```

**修改类**

```
define('SERVICES_JSON_SLICE',   1);
define('SERVICES_JSON_IN_STR',  2);
define('SERVICES_JSON_IN_ARR',  3);
define('SERVICES_JSON_IN_OBJ',  4);
define('SERVICES_JSON_IN_CMT', 5);
define('SERVICES_JSON_LOOSE_TYPE', 16);
define('SERVICES_JSON_SUPPRESS_ERRORS', 32);

class ServicesJSON
{

    function __construct($use = 0)
    {
        $this->use = $use;
    }

    function utf162utf8($utf16)
    {
        // oh please oh please oh please oh please oh please
        if(function_exists('mb_convert_encoding')) {
            return mb_convert_encoding($utf16, 'UTF-8', 'UTF-16');
        }

        $bytes = (ord($utf16{0}) << 8) | ord($utf16{1});

        switch(true) {
            case ((0x7F & $bytes) == $bytes):
                // this case should never be reached, because we are in ASCII range
                // see: http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                return chr(0x7F & $bytes);

            case (0x07FF & $bytes) == $bytes:
                // return a 2-byte UTF-8 character
                // see: http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                return chr(0xC0 | (($bytes >> 6) & 0x1F))
                     . chr(0x80 | ($bytes & 0x3F));

            case (0xFFFF & $bytes) == $bytes:
                // return a 3-byte UTF-8 character
                // see: http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                return chr(0xE0 | (($bytes >> 12) & 0x0F))
                     . chr(0x80 | (($bytes >> 6) & 0x3F))
                     . chr(0x80 | ($bytes & 0x3F));
        }

        // ignoring UTF-32 for now, sorry
        return '';
    }
    function utf82utf16($utf8)
    {
        // oh please oh please oh please oh please oh please
        if(function_exists('mb_convert_encoding')) {
            return mb_convert_encoding($utf8, 'UTF-16', 'UTF-8');
        }

        switch(strlen($utf8)) {
            case 1:
                // this case should never be reached, because we are in ASCII range
                // see: http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                return $utf8;

            case 2:
                // return a UTF-16 character from a 2-byte UTF-8 char
                // see: http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                return chr(0x07 & (ord($utf8{0}) >> 2))
                     . chr((0xC0 & (ord($utf8{0}) << 6))
                         | (0x3F & ord($utf8{1})));

            case 3:
                // return a UTF-16 character from a 3-byte UTF-8 char
                // see: http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                return chr((0xF0 & (ord($utf8{0}) << 4))
                         | (0x0F & (ord($utf8{1}) >> 2)))
                     . chr((0xC0 & (ord($utf8{1}) << 6))
                         | (0x7F & ord($utf8{2})));
        }

        // ignoring UTF-32 for now, sorry
        return '';
    }

    function encode($var)
    {
        switch (gettype($var)) {
            case 'boolean':
                return $var ? 'true' : 'false';

            case 'NULL':
                return 'null';

            case 'integer':
                return (int) $var;

            case 'double':
            case 'float':
                return (float) $var;

            case 'string':
                // STRINGS ARE EXPECTED TO BE IN ASCII OR UTF-8 FORMAT
                $ascii = '';
                $strlen_var = strlen($var);

               /*
                * Iterate over every character in the string,
                * escaping with a slash or encoding to UTF-8 where necessary
                */
                for ($c = 0; $c < $strlen_var; ++$c) {

                    $ord_var_c = ord($var{$c});

                    switch (true) {
                        case $ord_var_c == 0x08:
                            $ascii .= '\b';
                            break;
                        case $ord_var_c == 0x09:
                            $ascii .= '\t';
                            break;
                        case $ord_var_c == 0x0A:
                            $ascii .= '\n';
                            break;
                        case $ord_var_c == 0x0C:
                            $ascii .= '\f';
                            break;
                        case $ord_var_c == 0x0D:
                            $ascii .= '\r';
                            break;

                        case $ord_var_c == 0x22:
                        case $ord_var_c == 0x2F:
                        case $ord_var_c == 0x5C:
                            // double quote, slash, slosh
                            $ascii .= '\\'.$var{$c};
                            break;

                        case (($ord_var_c >= 0x20) && ($ord_var_c <= 0x7F)):
                            // characters U-00000000 - U-0000007F (same as ASCII)
                            $ascii .= $var{$c};
                            break;

                        case (($ord_var_c & 0xE0) == 0xC0):
                            // characters U-00000080 - U-000007FF, mask 110XXXXX
                            // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                            $char = pack('C*', $ord_var_c, ord($var{$c + 1}));
                            $c += 1;
                            $utf16 = $this->utf82utf16($char);
                            $ascii .= sprintf('\u%04s', bin2hex($utf16));
                            break;

                        case (($ord_var_c & 0xF0) == 0xE0):
                            // characters U-00000800 - U-0000FFFF, mask 1110XXXX
                            // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                            $char = pack('C*', $ord_var_c,
                                         ord($var{$c + 1}),
                                         ord($var{$c + 2}));
                            $c += 2;
                            $utf16 = $this->utf82utf16($char);
                            $ascii .= sprintf('\u%04s', bin2hex($utf16));
                            break;

                        case (($ord_var_c & 0xF8) == 0xF0):
                            // characters U-00010000 - U-001FFFFF, mask 11110XXX
                            // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                            $char = pack('C*', $ord_var_c,
                                         ord($var{$c + 1}),
                                         ord($var{$c + 2}),
                                         ord($var{$c + 3}));
                            $c += 3;
                            $utf16 = $this->utf82utf16($char);
                            $ascii .= sprintf('\u%04s', bin2hex($utf16));
                            break;

                        case (($ord_var_c & 0xFC) == 0xF8):
                            // characters U-00200000 - U-03FFFFFF, mask 111110XX
                            // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                            $char = pack('C*', $ord_var_c,
                                         ord($var{$c + 1}),
                                         ord($var{$c + 2}),
                                         ord($var{$c + 3}),
                                         ord($var{$c + 4}));
                            $c += 4;
                            $utf16 = $this->utf82utf16($char);
                            $ascii .= sprintf('\u%04s', bin2hex($utf16));
                            break;

                        case (($ord_var_c & 0xFE) == 0xFC):
                            // characters U-04000000 - U-7FFFFFFF, mask 1111110X
                            // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                            $char = pack('C*', $ord_var_c,
                                         ord($var{$c + 1}),
                                         ord($var{$c + 2}),
                                         ord($var{$c + 3}),
                                         ord($var{$c + 4}),
                                         ord($var{$c + 5}));
                            $c += 5;
                            $utf16 = $this->utf82utf16($char);
                            $ascii .= sprintf('\u%04s', bin2hex($utf16));
                            break;
                    }
                }

                return '"'.$ascii.'"';

            case 'array':

                // treat as a JSON object
                if (is_array($var) && count($var) && (array_keys($var) !== range(0, sizeof($var) - 1))) {
                    $properties = array_map(array($this, 'name_value'),
                                            array_keys($var),
                                            array_values($var));

                    foreach($properties as $property) {
                        if(ServicesJSON::isError($property)) {
                            return $property;
                        }
                    }

                    return '{' . join(',', $properties) . '}';
                }

                // treat it like a regular array
                $elements = array_map(array($this, 'encode'), $var);

                foreach($elements as $element) {
                    if(ServicesJSON::isError($element)) {
                        return $element;
                    }
                }

                return '[' . join(',', $elements) . ']';

            case 'object':
                $vars = get_object_vars($var);

                $properties = array_map(array($this, 'name_value'),
                                        array_keys($vars),
                                        array_values($vars));

                foreach($properties as $property) {
                    if(ServicesJSON::isError($property)) {
                        return $property;
                    }
                }

                return '{' . join(',', $properties) . '}';

            default:
                return ($this->use & SERVICES_JSON_SUPPRESS_ERRORS)
                    ? 'null'
                    : new ServicesJSON_Error(gettype($var)." can not be encoded as JSON string");
        }
    }

    function name_value($name, $value)
    {
        $encoded_value = $this->encode($value);

        if(ServicesJSON::isError($encoded_value)) {
            return $encoded_value;
        }

        return $this->encode(strval($name)) . ':' . $encoded_value;
    }

    function reduce_string($str)
    {
        $str = preg_replace(array(

                // eliminate single line comments in '// ...' form
                '#^\s*//(.+)$#m',

                // eliminate multi-line comments in '/* ... */' form, at start of string
                '#^\s*/\*(.+)\*/#Us',

                // eliminate multi-line comments in '/* ... */' form, at end of string
                '#/\*(.+)\*/\s*$#Us'

            ), '', $str);

        // eliminate extraneous space
        return trim($str);
    }

    function decode($str)
    {
        $str = $this->reduce_string($str);

        switch (strtolower($str)) {
            case 'true':
                return true;

            case 'false':
                return false;

            case 'null':
                return null;

            default:
                $m = array();

                if (is_numeric($str)) {
                    /**
                     * @todo BIG INT PATH
                     */
                    return $str;

                } elseif (preg_match('/^("|\').*(\1)$/s', $str, $m) && $m[1] == $m[2]) {
                    // STRINGS RETURNED IN UTF-8 FORMAT
                    $delim = substr($str, 0, 1);
                    $chrs = substr($str, 1, -1);
                    $utf8 = '';
                    $strlen_chrs = strlen($chrs);

                    for ($c = 0; $c < $strlen_chrs; ++$c) {

                        $substr_chrs_c_2 = substr($chrs, $c, 2);
                        $ord_chrs_c = ord($chrs{$c});

                        switch (true) {
                            case $substr_chrs_c_2 == '\b':
                                $utf8 .= chr(0x08);
                                ++$c;
                                break;
                            case $substr_chrs_c_2 == '\t':
                                $utf8 .= chr(0x09);
                                ++$c;
                                break;
                            case $substr_chrs_c_2 == '\n':
                                $utf8 .= chr(0x0A);
                                ++$c;
                                break;
                            case $substr_chrs_c_2 == '\f':
                                $utf8 .= chr(0x0C);
                                ++$c;
                                break;
                            case $substr_chrs_c_2 == '\r':
                                $utf8 .= chr(0x0D);
                                ++$c;
                                break;

                            case $substr_chrs_c_2 == '\\"':
                            case $substr_chrs_c_2 == '\\\'':
                            case $substr_chrs_c_2 == '\\\\':
                            case $substr_chrs_c_2 == '\\/':
                                if (($delim == '"' && $substr_chrs_c_2 != '\\\'') ||
                                   ($delim == "'" && $substr_chrs_c_2 != '\\"')) {
                                    $utf8 .= $chrs{++$c};
                                }
                                break;

                            case preg_match('/\\\u[0-9A-F]{4}/i', substr($chrs, $c, 6)):
                                // single, escaped unicode character
                                $utf16 = chr(hexdec(substr($chrs, ($c + 2), 2)))
                                       . chr(hexdec(substr($chrs, ($c + 4), 2)));
                                $utf8 .= $this->utf162utf8($utf16);
                                $c += 5;
                                break;

                            case ($ord_chrs_c >= 0x20) && ($ord_chrs_c <= 0x7F):
                                $utf8 .= $chrs{$c};
                                break;

                            case ($ord_chrs_c & 0xE0) == 0xC0:
                                // characters U-00000080 - U-000007FF, mask 110XXXXX
                                //see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                                $utf8 .= substr($chrs, $c, 2);
                                ++$c;
                                break;

                            case ($ord_chrs_c & 0xF0) == 0xE0:
                                // characters U-00000800 - U-0000FFFF, mask 1110XXXX
                                // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                                $utf8 .= substr($chrs, $c, 3);
                                $c += 2;
                                break;

                            case ($ord_chrs_c & 0xF8) == 0xF0:
                                // characters U-00010000 - U-001FFFFF, mask 11110XXX
                                // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                                $utf8 .= substr($chrs, $c, 4);
                                $c += 3;
                                break;

                            case ($ord_chrs_c & 0xFC) == 0xF8:
                                // characters U-00200000 - U-03FFFFFF, mask 111110XX
                                // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                                $utf8 .= substr($chrs, $c, 5);
                                $c += 4;
                                break;

                            case ($ord_chrs_c & 0xFE) == 0xFC:
                                // characters U-04000000 - U-7FFFFFFF, mask 1111110X
                                // see http://www.cl.cam.ac.uk/~mgk25/unicode.html#utf-8
                                $utf8 .= substr($chrs, $c, 6);
                                $c += 5;
                                break;

                        }

                    }

                    return $utf8;

                } elseif (preg_match('/^\[.*\]$/s', $str) || preg_match('/^\{.*\}$/s', $str)) {
                    // array, or object notation

                    if ($str{0} == '[') {
                        $stk = array(SERVICES_JSON_IN_ARR);
                        $arr = array();
                    } else {
                        if ($this->use & SERVICES_JSON_LOOSE_TYPE) {
                            $stk = array(SERVICES_JSON_IN_OBJ);
                            $obj = array();
                        } else {
                            $stk = array(SERVICES_JSON_IN_OBJ);
                            $obj = new stdClass();
                        }
                    }

                    array_push($stk, array('what'  => SERVICES_JSON_SLICE,
                                           'where' => 0,
                                           'delim' => false));

                    $chrs = substr($str, 1, -1);
                    $chrs = $this->reduce_string($chrs);

                    if ($chrs == '') {
                        if (reset($stk) == SERVICES_JSON_IN_ARR) {
                            return $arr;

                        } else {
                            return $obj;

                        }
                    }

                    //print("\nparsing {$chrs}\n");

                    $strlen_chrs = strlen($chrs);

                    for ($c = 0; $c <= $strlen_chrs; ++$c) {

                        $top = end($stk);
                        $substr_chrs_c_2 = substr($chrs, $c, 2);

                        if (($c == $strlen_chrs) || (($chrs{$c} == ',') && ($top['what'] == SERVICES_JSON_SLICE))) {
                            // found a comma that is not inside a string, array, etc.,
                            // OR we've reached the end of the character list
                            $slice = substr($chrs, $top['where'], ($c - $top['where']));

                            /**
                             * @todo patch slice
                             */
                            is_numeric($slice) and $slice = "\"$slice\"";
                            array_push($stk, array('what' => SERVICES_JSON_SLICE, 'where' => ($c + 1), 'delim' => false));
                            //print("Found split at {$c}: ".substr($chrs, $top['where'], (1 + $c - $top['where']))."\n");

                            if (reset($stk) == SERVICES_JSON_IN_ARR) {
                                // we are in an array, so just push an element onto the stack
                                array_push($arr, $this->decode($slice));

                            } elseif (reset($stk) == SERVICES_JSON_IN_OBJ) {
                                // we are in an object, so figure
                                // out the property name and set an
                                // element in an associative array,
                                // for now
                                $parts = array();

                                if (preg_match('/^\s*(["\'].*[^\\\]["\'])\s*:\s*(\S.*),?$/Uis', $slice, $parts)) {
                                    // "name":value pair
                                    $key = $this->decode($parts[1]);
                                    $val = $this->decode($parts[2]);

                                    if ($this->use & SERVICES_JSON_LOOSE_TYPE) {
                                        $obj[$key] = $val;
                                    } else {
                                        $obj->$key = $val;
                                    }
                                } elseif (preg_match('/^\s*(\w+)\s*:\s*(\S.*),?$/Uis', $slice, $parts)) {
                                    // name:value pair, where name is unquoted
                                    $key = $parts[1];
                                    $val = $this->decode($parts[2]);

                                    if ($this->use & SERVICES_JSON_LOOSE_TYPE) {
                                        $obj[$key] = $val;
                                    } else {
                                        $obj->$key = $val;
                                    }
                                }

                            }

                        } elseif ((($chrs{$c} == '"') || ($chrs{$c} == "'")) && ($top['what'] != SERVICES_JSON_IN_STR)) {
                            // found a quote, and we are not inside a string
                            array_push($stk, array('what' => SERVICES_JSON_IN_STR, 'where' => $c, 'delim' => $chrs{$c}));
                            //print("Found start of string at {$c}\n");

                        } elseif (($chrs{$c} == $top['delim']) &&
                                 ($top['what'] == SERVICES_JSON_IN_STR) &&
                                 ((strlen(substr($chrs, 0, $c)) - strlen(rtrim(substr($chrs, 0, $c), '\\'))) % 2 != 1)) {
                            // found a quote, we're in a string, and it's not escaped
                            // we know that it's not escaped becase there is _not_ an
                            // odd number of backslashes at the end of the string so far
                            array_pop($stk);
                            //print("Found end of string at {$c}: ".substr($chrs, $top['where'], (1 + 1 + $c - $top['where']))."\n");

                        } elseif (($chrs{$c} == '[') &&
                                 in_array($top['what'], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) {
                            // found a left-bracket, and we are in an array, object, or slice
                            array_push($stk, array('what' => SERVICES_JSON_IN_ARR, 'where' => $c, 'delim' => false));
                            //print("Found start of array at {$c}\n");

                        } elseif (($chrs{$c} == ']') && ($top['what'] == SERVICES_JSON_IN_ARR)) {
                            // found a right-bracket, and we're in an array
                            array_pop($stk);
                            //print("Found end of array at {$c}: ".substr($chrs, $top['where'], (1 + $c - $top['where']))."\n");

                        } elseif (($chrs{$c} == '{') &&
                                 in_array($top['what'], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) {
                            // found a left-brace, and we are in an array, object, or slice
                            array_push($stk, array('what' => SERVICES_JSON_IN_OBJ, 'where' => $c, 'delim' => false));
                            //print("Found start of object at {$c}\n");

                        } elseif (($chrs{$c} == '}') && ($top['what'] == SERVICES_JSON_IN_OBJ)) {
                            // found a right-brace, and we're in an object
                            array_pop($stk);
                            //print("Found end of object at {$c}: ".substr($chrs, $top['where'], (1 + $c - $top['where']))."\n");

                        } elseif (($substr_chrs_c_2 == '/*') &&
                                 in_array($top['what'], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) {
                            // found a comment start, and we are in an array, object, or slice
                            array_push($stk, array('what' => SERVICES_JSON_IN_CMT, 'where' => $c, 'delim' => false));
                            $c++;
                            //print("Found start of comment at {$c}\n");

                        } elseif (($substr_chrs_c_2 == '*/') && ($top['what'] == SERVICES_JSON_IN_CMT)) {
                            // found a comment end, and we're in one now
                            array_pop($stk);
                            $c++;

                            for ($i = $top['where']; $i <= $c; ++$i)
                                $chrs = substr_replace($chrs, ' ', $i, 1);

                            //print("Found end of comment at {$c}: ".substr($chrs, $top['where'], (1 + $c - $top['where']))."\n");

                        }

                    }

                    if (reset($stk) == SERVICES_JSON_IN_ARR) {
                        return $arr;

                    } elseif (reset($stk) == SERVICES_JSON_IN_OBJ) {
                        return $obj;

                    }

                }
        }
    }

    /**
     *
     * @todo Ultimately, this should just call PEAR::isError()
     */
    function isError($data, $code = null) {
        if (is_object($data) && (get_class($data) == 'ServicesJSON_Error' || is_subclass_of($data, 'ServicesJSON_Error'))) {
            return true;
        }

        return false;
    }
}
class ServicesJSON_Error {
    function ServicesJSON_Error($message = 'unknown error', $code = null, $mode = null, $options = null, $userinfo = null) {
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T13:08:47.323

我会使用[这里](https://stackoverflow.com/questions/2907806/handling-big-user-ids-returned-by-fql-in-php#comment9450699_2928422)描述的解决方案：

> 实际上，根据文档， JSON_BIGINT_AS_STRING[从 5.4 开始才可用。](http://au2.php.net/manual/en/json.constants.php)对于早期版本，preg_replace 解决方案可能效果最好，如下所述 - 我会做类似的事情`json_decode(preg_replace('/("\w+"):(\d+)/', '\\1:"\\2"', $jsonString), true)`– 2011-10-14 [04:43:43](https://stackoverflow.com/users/141881/pospi)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T16:57:49.057

您可以使用[phputils](http://code.google.com/p/phplutils/source/browse/trunk/JSON.class.php)项目中的[JSON.class.php](http://code.google.com/p/phplutils/)。

```
class JSON {
    protected $t, $c;
    protected $debug;
    protected $useArrays = false;

    static public function decode($s, $array = false, $debug = false) {
        //return json_decode($s, true, 512, JSON_BIGINT_AS_STRING);
        //return json_decode($s, $array);

        // Version >= 5.4.x will suppoort JSON_BIGINT_AS_STRING parameter.
        if (version_compare(PHP_VERSION, '5.3.99', '>=')) {
            return json_decode($s, $array, 512, JSON_BIGINT_AS_STRING);
        }
        // Not supported JSON_BIGINT_AS_STRING so we will use our class.
        else {
            try {
                $d = new JSON($s);
                $d->useArrays = $array;
                $d->setDebug($debug);
                return $d->parseObject(512);
            } catch (Exception $e) {
                return NULL;
            }
        }
    }

    static public function encode($object) {
        return json_encode($object);
    }

    public function __construct($s) {
        $this->setInput($s);
    }

    public function setInput($s) {
        $vv = array_map(function($a) { return isset($a[1]) ? $a[1] : $a; }, token_get_all('<?php ' . $s));
        $this->t = array_values(array_splice($vv, 1));
        $this->c = 0;
        if ($this->debug) print_r($this->t);
    }

    public function setDebug($debug) {
        $this->debug = $debug;
    }

    protected function getCurrentToken() {
        if ($this->c >= count($this->t)) throw(new Exception("EOF"));
        return $this->t[$this->c];
    }

    protected function nextToken() {
        $this->c++;
    }

    protected function parseString() {
        $ct = $this->getCurrentToken();
        if ($ct[0] != '"') throw(new Exception("JSON: Expecting String but found '" . $ct . "'"));
        $this->nextToken();
        //return stripcslashes(substr($ct, 1, -1));
        return json_decode($ct);
    }

    protected function expectValues($values = array()) {
        $ct = $this->getCurrentToken();
        foreach ($values as $value) if ($ct == $value) {
            $this->nextToken();
            return $ct;
        }
        throw(new Exception("JSON: Expecting [" . implode(', ', array_map(function($a) { return "'{$a}'"; }, $values)) . "]"));
    }

    protected function parseNumber() {
        $ct = $this->getCurrentToken();
        if (!is_numeric($ct)) throw(new Exception("JSON: Expecting a number but found '" . $ct . "'"));
        $this->nextToken();
        if ((string)(int)$ct == (string)$ct) {
            return (int)$ct;
        }
        return $ct;
    }

    protected function parseObject($depth = 512) {
        $ret = NULL;
        if ($depth == -1) throw(new Exception("JSON: Depth too long"));
        $ct = $this->getCurrentToken();
        if ($this->debug) echo "--$ct\n";
        switch ($ct[0]) {
            // Object
            case '{':
                $ret = array();
                $this->nextToken();
                if ($this->getCurrentToken() != '}') {
                    do {
                        $key = $this->parseString();
                        if ($this->debug) echo "---key:$key\n";

                        $this->expectValues(array(':'));

                        $value = $this->parseObject($depth - 1);
                        if ($this->debug) echo "---value:$value\n";

                        $ct = $this->expectValues(array(',', '}'));

                        $ret[$key] = $value;
                    } while ($ct == ',');
                } else {
                    $this->nextToken();
                }
                if (!$this->useArrays) $ret = (object)$ret;
            break;
            // Array
            case '[':
                $ret = array();
                $this->nextToken();
                if ($this->getCurrentToken() != ']') {
                    do {
                        $value = $this->parseObject();
                        if ($this->debug) echo "---value:$value\n";
                        $ct = $this->expectValues(array(',', ']'));
                        $ret[] = $value;
                    } while ($ct == ',');
                } else {
                    $this->nextToken();
                }
                //while ()
            break;
            // String
            case '"':
                $ret = $this->parseString();
            break;
            default:
                if (is_numeric($ct[0])) {
                    $ret = $this->parseNumber();
                } else {
                    switch ($ct) {
                        case "null": $this->nextToken(); return NULL;
                        //case "undefined": $this->nextToken(); return NULL;
                        case "true": $this->nextToken(); return true;
                        case "false": $this->nextToken(); return false;
                        default: throw(new Exception("JSON: Invalid object"));
                    }
                }
            break;
        }
        return $ret;
    }

    static public function unittest() {
        $test = function($expr) {
            $a = JSON::decode($expr);
            $b = json_decode($expr, true);
            var_dump($a === $b);
            if ($a != $b) {
                var_dump($a);
                var_dump($b);
            }
            $a2 = JSON::encode($a);
            $b2 = JSON::encode($b);
            var_dump($a2 === $b2);
            //print_r($a);
            //print_r($b);
        };

        $test2 = function($expr, $b) {
            $a = JSON::decode($expr);
            var_dump($a === $b);
            if ($a != $b) {
                var_dump($a);
                var_dump($b);
            }
            //var_export($a);
        };

        // Empty object.
        $test('{}');

        // Simple object
        $test('{"a":"b"}');

        // Object with comma separated items.
        $test('{"k1":"v1","k2":"v2"}');

        // Simple object with numbers
        $test('{"k1":1,"k2":2}');

        // Simple array with numbers
        $test('[1,2,3,4]');

        $test('"\\u10000"');

        // Array with langbuage's constants.
        $test('[3,false,true,null]');

        // Complex array with subobjects.
        $test('[{},{"a":{"b":1}},3,false,{"test":true}]');

        // Complex array.
        $test2(
            '{"order_id":131608840232655,"buyer":100001738131058,"app":118178464915404,"receiver":100001738131058,"amount":2,"update_time":1292862324,"time_placed":1292862322,"data":"","items":[{"item_id":"0","title":"[Test Mode] Unicorn","description":"[Test Mode] Own your own mythical beast!","image_url":"http:\/\/www.facebook.com\/images\/gifts\/21.png","product_url":"http:\/\/www.facebook.com\/images\/gifts\/21.png","price":2,"data":"{\"product_id\":1}"}],"status":"placed"}',
            array (
                'order_id' => '131608840232655',
                'buyer' => '100001738131058',
                'app' => '118178464915404',
                'receiver' => '100001738131058',
                'amount' => 2,
                'update_time' => 1292862324,
                'time_placed' => 1292862322,
                'data' => '',
                'items' => array (
                    0 => array (
                        'item_id' => '0',
                        'title' => '[Test Mode] Unicorn',
                        'description' => '[Test Mode] Own your own mythical beast!',
                        'image_url' => 'http://www.facebook.com/images/gifts/21.png',
                        'product_url' => 'http://www.facebook.com/images/gifts/21.png',
                        'price' => 2,
                        'data' => '{"product_id":1}',
                    ),
                ),
                'status' => 'placed',
            )
        );
    }

    static public function _unittest() {
        if (basename($_SERVER['PHP_SELF']) == basename(__FILE__)) {
            JSON::unittest();
        }
    }
}

function json_decode_fixed($s, $debug = false) {
    return JSON::decode($s, $debug);
}

JSON::_unittest(); 
```

# php - php MySqli：如何将 fetch 重写为 fetch_assoc？喜欢康卡特

> ID：15659326
> 
> 赞同：2
> 
> 时间：2013-03-27T12:54:07.057
> 
> 标签：php, mysqli, pagination, prepare

Helo，我使用“bind_result”，“LIKE CONCAT”......通过两个查询字符串来实现全文搜索和分页。

但是如何将 bind_result 方法更改为 fetch_assoc？

```
<?php
$mysqli = new mysqli("localhost", "", "", "test");

$query_string="hello"; //keywords

$sqltxt="SELECT * FROM `table` WHERE text1 LIKE CONCAT('%', ?, '%')";

//first query : for get the total number of data
$stmt = $mysqli->prepare($sqltxt);
$stmt->bind_param("s",$query_string);
$stmt->execute();
$stmt->store_result();
$total =$stmt->num_rows;

$lastpage = ceil($total/20);//obtain the last page

$page=$_GET["page"];
$startpoint = ($page * 20) - 20;

//second query : for get the true data
$stmt = $mysqli->prepare($sqltxt ." LIMIT {$startpoint}, 20");
$stmt->bind_param("s",$query_string);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($id,$title,$tel); //<= hits!! I want to using fetch_assoc methods

while($stmt->fetch()){ //<= hits!! I want to using fetch_assoc methods

echo $id;
echo $atitle;
echo $tel;

}

?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:16:02.567

从 mysql 文档示例中：

```
<?php

// ... document's example code:

/* bind parameters for markers */
$stmt->bind_param("s", $city);

/* execute query */
$stmt->execute();

/* instead of bind_result: */
$result = $stmt->get_result(); //with get_result ;)

/* now you can fetch the results into an array - NICE */
while ($myrow = $result->fetch_assoc()) { //now you can use fetch_assoc

    // use your $myrow array as you would with any other fetch
    printf("%s is in district %s\n", $city, $myrow['district']);

}
?> 
```

------------已编辑----------

请阅读此方法的用户说明：

[http://php.net/manual/en/mysqli-stmt.get-result.php](http://php.net/manual/en/mysqli-stmt.get-result.php)

它需要 mysqlnd 驱动程序...如果您的网站空间上没有安装它，您将不得不使用 BIND_RESULT 和 FETCH！

[http://www.php.net/manual/en/mysqli-stmt.bind-result.php](http://www.php.net/manual/en/mysqli-stmt.bind-result.php)

[http://www.php.net/manual/en/mysqli-stmt.fetch.php](http://www.php.net/manual/en/mysqli-stmt.fetch.php)

仅功能 MySQL 本机驱动程序

仅适用于 mysqlnd：[http ://www.php.net/manual/en/book.mysqlnd.php](http://www.php.net/manual/en/book.mysqlnd.php)

注意：mysqli_stmt::get_result() 仅适用于 PHP v5.3.0 或更高版本

我要寻找另一种选择。

萨卢多斯 ;)

# php - 带有重音符号的正则表达式单词

> ID：15659329
> 
> 赞同：0
> 
> 时间：2013-03-27T12:54:13.110
> 
> 标签：php, regex

我有这个正则表达式

```
\b(t[úu]s*)\b 
```

我有这句话：

```
你（作品）
tú（不起作用）
tus（作品）
tús（作品）

```

为什么我不能匹配`tú`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:20:51.100

如果正则表达式不匹配，则这两个字符不同。

“带有锐音的 u”可以表示为单个字符`ú`(U+00FA) 或通过将`u`(U+0075) 与*组合的锐音重音*字符 (U+0301) 组合来表示，这给出了类似的外观`ú`。

您必须转换输入字符串或在正则表达式中包含这两种变体，有关详细信息，请参阅[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:00:40.613

> 为什么那个表达式不匹配`tú`？

该表达式不匹配`tú`，因为`\b`似乎无法识别`ú`为单词字符，因此在非单词字符之间使用时会失败。

你可以改用这样的东西：

```
/(?<!\p{L})(t[úu]s*)(?!\p{L})/u 
```

[`\p{L}`](http://php.net/manual/en/regexp.reference.unicode.php)匹配一个 unicode 字母。

# html - 如何在没有单独的 div 标签的情况下将文本居中放置在图像上？

> ID：15659330
> 
> 赞同：0
> 
> 时间：2013-03-27T12:54:14.543
> 
> 标签：html, css

小提琴：http: [//jsfiddle.net/d35QD/](http://jsfiddle.net/d35QD/)

我想知道如何在不使用 div 标签的情况下将文本居中放置在图像上。我正在创建一个导航菜单，并且不希望将每个按钮包装在单独的 div 标记中。可能很简单，但我是 CSS 新手 :-P 。

目前我正在使用绝对定位。如果文本在所有浏览器中以完全相同的方式显示，这将是可以的，但显然不是，所以我需要另一种方法。

任何帮助表示赞赏！谢谢！

```
<div id="nav">
<ul>
    <li><a href="index.htm"><img class="navbutton" src="http://www.cawyatt.co.uk/test-top.png" alt="Website Navigation. Home Button" title="Home" /><p class="homebutton">HOME</p></a>
    </li>
</ul>
<!-- end .nav -->
</div>

ul, ol, dl {
padding:0;
margin:0;
list-style:none;
}

#nav {
background-image: url(http://www.cawyatt.co.uk/test-bottom.png);
width:120px;
height:115px;
position:relative;
}

#nav img{
height:115px;
width:120px;
}

.navbutton {
-webkit-transition:opacity 0.7s ease-in-out;
-moz-transition:opacity 0.7s ease-in-out;
-o-transition:opacity 0.7s ease-in-out;
transition:opacity 0.7s ease-in-out;
float:left;
}

a:hover img.navbutton {
opacity:0;
}

.homebutton {
position:absolute;
left:1px;
top:60px;
color:rgba(255, 255, 255, 1);
font-family:Verdana, Arial, Helvetica, sans-serif;
font-weight:bold;
font-size:16px;
} 
```

编辑：

下面建议的方法在它只有一个按钮时有效，但在有多个按钮时无效。所有文本都以第一个按钮为中心。我创建了另一个小提琴来说明我的意思：

[http://jsfiddle.net/3JCKB/](http://jsfiddle.net/3JCKB/)

编辑2：

感谢所有的帮助。设法通过将 p 标签更改为 span 标签来修复它。这是有效的，因为 span 是一个内联元素，而 p 是一个块级元素:-)

你可以在这里看到完成的代码：http: [//jsfiddle.net/yTACT/](http://jsfiddle.net/yTACT/)

我还清理了代码并删除了不必要的类。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:04:23.003

`#nav li > a > p { text-align: center; width: 100%;}`

Sets the width of the paragraph to 100% the anchor width, then aligns text to center in that area.

[UPDATED FIDDLE](http://jsfiddle.net/NotInUse/d35QD/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:04:33.203

我不确定您是只想水平居中还是水平和垂直居中。无论如何，您可以尝试这样做：

```
p{
    width: 120px; // Same width as your image
    text-align: center; // Center text horizontally
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:00:47.163

有两种很好的方法可以做到这一点：

**1：**

```
.homebutton{
     position: relative;
     right: 120px //width of image
     width: 120px;
     text-align: center;
} 
```

**2：**

删除图像，并将其设置为背景图像`.homebutton`

```
.homebutton{
     background: url('http://www.cawyatt.co.uk/test-top.png') no-repeat left top;
     width: 120px;
     height: 115px;
     text-align: center;
} 
```

# android - 从活动 1 移动到活动 2，保持活动 1 运行

> ID：15659332
> 
> 赞同：0
> 
> 时间：2013-03-27T12:54:16.303
> 
> 标签：android, android-activity

如何在不干扰活动 A 的情况下从活动 A 移动到活动 B。单击按钮时，我想从活动 A 移动到活动 B，但我仍然希望活动 A 运行。

我不想使用服务，因为我不理解它。请告诉我任何其他方式来做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:59:56.613

从[这个答案](https://stackoverflow.com/questions/4186021/how-to-start-new-activity-on-button-click)：

```
Intent myIntent = new Intent(CurrentActivity.this, NextActivity.class);
CurrentActivity.this.startActivity(myIntent); 
```

当您开始第二个活动时，第一个活动仍然存在。它不会“运行”，但`onPause()`如果 Activity A 在 Activity B 下仍然可见，它将调用该方法。如果 Activity A 不再可见，它将调用该`onStop()`方法。

您说您不想使用服务，但如果您希望在显示新活动时仍然运行 Activity A 的某些部分，我会考虑使用[服务](http://developer.android.com/reference/android/app/Service.html)或某种在或中启动的[线程](http://developer.android.com/guide/components/processes-and-threads.html)`onPause()`活动的`onStop()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:00:36.240

你想运行一个`Service`when`ActivityA`调用`onPause()`，或者`onStop()`你可以停止进入`Service`并从停止的地方`onResume()`恢复你的。请参阅**[文档](http://developer.android.com/guide/components/services.html)**。您可能不理解它们，但如果您希望它正常运行，您需要花时间阅读。我相信那里甚至还有一个同样的例子。在你可以打电话`Activity``Service``Services``onPause()`

[这部分文档也将非常有助于理解](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:59:16.930

当从 Activity A 移动到 Activity B 时。Activity A 调用 onStop() 方法。所以你可以在 onStop() 中做你想做的事。

```
 @Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
//Do something here
} 
```

关于 Activity，请参阅：http: [//developer.android.com/guide/components/activities.html](http://developer.android.com/guide/components/activities.html)

# javascript - 更改不透明度属性并将渐变应用到 Bootstrap 工具提示

> ID：15659333
> 
> 赞同：2
> 
> 时间：2013-03-27T12:54:20.060
> 
> 标签：javascript, css, asp.net-mvc, twitter-bootstrap

在我的 MVC3 项目（使用 Twiter Bootstrap）中，我有一个带有两个单选按钮的页面。将鼠标悬停在第二个视图上时，视图会显示 Bootstrap 工具提示。此外，我有一个 JS 函数，可以更改该工具提示的 CSS 外观，将其变为黄色。

我想通过向我的 JS 函数添加一些 css 属性来删除透明度并应用渐变。像这样的东西：

```
background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0%,#FCEEC1),color-stop(100%,#EEDC94)); 
```

我已经尝试了一千种方法，但我做不到。请你帮助我好吗？

提前致谢！！

我的单选按钮：

```
<span class="radio-button-revoked" title="CAUTION! Selecting this option will cause the revocation of the order delivery">
@Html.RadioButtonFor(model => model.Status, 0, new { style = "margin-top: 0px;" })</span><span class="text-error"><strong> Not delivered</strong>
</span> 
```

我的 JS：

```
function changeTooltipColorTo(color, textcolor) {
    $('.tooltip-inner').css('background-color', color)
    $('.tooltip-inner').css('color', textcolor)
    $('.tooltip-inner').css('font-weight', 'bold')
    $('.tooltip.top .tooltip-arrow').css('border-top-color', color);
    $('.tooltip.right .tooltip-arrow').css('border-right-color', color);
    $('.tooltip.left .tooltip-arrow').css('border-left-color', color);
    $('.tooltip.bottom .tooltip-arrow').css('border-bottom-color', color);
}

$(document).ready(function () {
    $("[rel=tooltip]").tooltip();
    $('.radio-button-revoked').hover(function() {changeTooltipColorTo('#F89406','#404040')});
}); 
```

**更新：**几乎解决了。设置渐变：

```
$('.tooltip-inner').css('background-image', '-webkit-gradient(linear,left top,left bottom,color-stop(0%,#FCEEC1),color-stop(100%,#E4BF46))') 
```

我注意到我可以通过将值从 0.1 设置为 1 来玩渐变：

```
$('.tooltip-inner').css('opacity', '0.1')

$('.tooltip-inner').css('opacity', '1') 
```

但我不能让它完全不透明:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-27T03:47:37.900

您可以使用标识符更改工具提示的不透明度：.tooltip.in

因此，如果您希望它完全不透明，只需使用：

```
.tooltip.in {
    opacity: 1;
    filter: alpha(opacity=100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:21:31.913

解决了。

bootstrap.css 与 javascript 中定义的 CSS 样式重叠，所以我更改了 bootstrap.css 中的不透明度值，但是，有没有办法在不修改 CSS 的情况下做到这一点？

# jquery - 如何找到行的父表

> ID：15659338
> 
> 赞同：0
> 
> 时间：2013-03-27T12:54:44.340
> 
> 标签：jquery

我有一个复杂的 html 文件。单击表格行时，我想选择表格前面的输入[type=text]。

一个html片段在这里

```
<input type=text/>
<table>
  <tr>
  ...
  </tr>
</table>

$('tr').click(function() {
  $(this).closest('table').prev(input[type=text]).val();
}); 
```

这抛出

```
`Uncaught TypeError: Object #<HTMLTableRowElement> has no method`closest 
```

单击表格行时如何编写jQuery选择器来选择输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:56:06.280

```
$(this).parent('table').prev('input[type="text"]').val() 
```

或者

```
$(table).on('click', 'tr', function () {
    $(this).[prev/siblings/closest]('input[type="text"]').val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:00:19.753

在这里你有一个现场演示：http: [//jsfiddle.net/ceETY/2/](http://jsfiddle.net/ceETY/2/)

你可以使用这个：

```
$(this).parent('table').prev('input:text').val(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T12:55:37.190

`$(this).parents('table')[0].prev(input[type=text]).val();`应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T12:56:27.903

你可以试试 parent()

```
 $(this).parent('table').prev(input[type=text]).val(); 
```

# android - MediaPlayer 捕捉所有正在播放的音频

> ID：15659339
> 
> 赞同：0
> 
> 时间：2013-03-27T12:54:54.357
> 
> 标签：android, android-mediaplayer

我有均衡器，但我只能将它用于一个 MediaPlayer ( `mMediaPlayer = MediaPlayer.create(this , R.raw.lol);`) 我想将它用于在 android 系统中播放的所有音频..类似`mMediaPlayer = MediaPlayer.create(this, AudioManager.STREAM_MUSIC);`，我想在 android 中播放一些歌曲然后打开我的应用程序并均衡它. 谢谢

# jquery - 如何在jquery + imagemagick中用换行符替换html标签？

> ID：15659340
> 
> 赞同：0
> 
> 时间：2013-03-27T12:54:56.350
> 
> 标签：jquery, contenteditable

我有一个内容可编辑的 div。所以根据一个非常好的[帖子here](https://stackoverflow.com/questions/2220939/force-ie-contenteditable-element-to-create-line-breaks-on-enter-key-without-bre) html标签被添加到不同浏览器的输入键上。现在我想用一个新的线条字符替换这些并将其发送到 imagemagick 插件以创建一个新的线条效果。我如何在客户端使用 jquery 来做到这一点。

我正在尝试这样做但没有得到结果：

```
messageText1 = $("#templateIframe")
  .contents()
  .find("#dialog")
  .html()
  .replace(/<(?:.|)*?>/gm, '\\n')
  .replace(/&nbsp;/g, '');

alert(messageText1);
messageText = messageText1.replace(/\n{2}/g, '\\n');
alert(messageText1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:55:08.310

从这篇[文章中得到了解决方案](https://stackoverflow.com/questions/8967722/why-are-new-lines-not-working-in-this-javascript-alert-window)

```
messageText = $("#templateIframe")
.contents()
.find("#dialog")
.html()
.replace(/<(?:.|)*?>/gm, '\\n')
.replace(/&nbsp;/g, '')
.replace(/\\n\\n/g,"\\n");

alert(messageText); 
```

# android - 在 AlertDialog 框的结果之前返回的方法

> ID：15659341
> 
> 赞同：2
> 
> 时间：2013-03-27T12:54:59.137
> 
> 标签：android, android-alertdialog

我有一个问题，我有一个称为 processInfo() 的方法。此方法本质上是处理从 NFC 标签或 QR 码收集的信息并将其写入数据库。根据某些情况，processInfo 方法处理信息如何写入数据库。processInfo 方法返回一个布尔值，如果设置为 true，则将 DB 中的信息发送到 Web 服务器。

我在 processInfo 中有一些逻辑，如果条件 A 则写入 DB 并返回 true。这又将其发送到 webbservice。如果条件 B 则显示警报对话框。警报对话框有一个确定和取消按钮。如果按下 ok 则执行条件 A 中发生的情况，如果按下 CANCEL 则关闭对话框并返回 false。

发生的情况是，如果条件 B 发生，则对话框按预期显示，但在按下任何按钮之前它会返回调用方法。如何让应用程序挂起，直到至少按下一个按钮？

我试过使用`while(! alertDialog.isShowing == true) -> return boolean`. 但它在之后退出`alertDialog.show()`并返回调用方法。

```
success = false;

if(condition A) {
    // write to DB and return to caller
    return success = true;
} else {
    success = false;

    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(NfcscannerActivity.this);
    // set title
    alertDialogBuilder.setTitle("Please logout after ");
     // set dialog message
    alertDialogBuilder.setMessage("Click Ok to return to the menu")
    .setCancelable(false)
    .setPositiveButton("Ok",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            success = true;
        // write to DB                                          
        }
    })
    .setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
            // if this button is clicked, just close
            // the dialog box and do nothing
            success = false;
            dialog.cancel();

        }
    });

    // create alert dialog
    AlertDialog alertDialog = alertDialogBuilder.create();

    // show it
    alertDialog.show();
}

return success;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:23:39.317

您可以使用回调方法。比方说`onResultObtained(boolean result)`：

```
boolean onResultObtained(boolean result) {
    if(result) {
         //write to DB and return to caller
         return true; 
    } else {
       return false; 
    }
} 
```

**实际代码**

```
if(condition A){

   onResultChanged(true);

}else{
   AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                                NfcscannerActivity.this);

                            // set title
                            alertDialogBuilder.setTitle("Please logout after ");

                            // set dialog message
                            alertDialogBuilder
                                .setMessage("Click Ok to return to the menu")
                                .setCancelable(false)
                                .setPositiveButton("Ok",new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,int id) {
                               onResultChanged(true);

                                    }
                                  })
                                .setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,int id) {
                                        // if this button is clicked, just close
                                        // the dialog box and do nothing

                                        dialog.dismiss();
                                        onResultChanged(false);   
                                    }
                                });

                                alertDialogBuilder.show();

}
} 
```

另一种方法是使变量成功作为全局变量。

```
boolean success; 
```

**进程信息（）**

```
private void processInfo() {
    if (condition A) {
        success = true;
        //Save data to DB
    } else {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                MainActivity.this);

        // set title
        alertDialogBuilder.setTitle("Please logout after ");

        // set dialog message
        alertDialogBuilder
                .setMessage("Click Ok to return to the menu")
                .setCancelable(false)
                .setPositiveButton("Ok",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                success = true;
                                //Save data to DB
                            }
                        })
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                // if this button is clicked, just close
                                // the dialog box and do nothing
                                dialog.dismiss();
                                success = false;
                            }
                        });

        alertDialogBuilder.show();

    }
} 
```

而且，在你的 call()

```
private void callingMethod(){
    if(success){
        //do your stuff
    } else {
        //do your stuff
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:57:42.173

@turtleboy 这是一个简单的例子

公共类 TestActivity 扩展 Activity {

```
 static final String TAG="TestActivity";

    static final int MSG_SEND_INFO_TO_SERVER = 1;

    static final int MSG_INFO_NOT_SEND_TO_SERVER = 2;

    boolean condition=false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Log.i(TAG, "0000000000000000");
        your_methode();

    }

    Handler communication_handler =new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {

            case MSG_SEND_INFO_TO_SERVER: 
                //send info to the web server
                Log.i(TAG, "11111111111111111");
                Toast.makeText(getApplicationContext(), "send msg to the server", Toast.LENGTH_SHORT).show();

                break;
            case MSG_INFO_NOT_SEND_TO_SERVER: 
                //send info to the web server
                Log.i(TAG, "222222222222222222");
                Toast.makeText(getApplicationContext(), "no msg to send to the server", Toast.LENGTH_SHORT).show();

                break;  
            default:
                break;
            }
        }
    };

    public void your_methode()
    {
        if(condition) {
            // write to DB
            communication_handler.sendMessage(Message.obtain(null,MSG_INFO_NOT_SEND_TO_SERVER,0));
            return ;
        } else {
            AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);
            // set title
            alertDialogBuilder.setTitle("Please logout after ");
            // set dialog message
            alertDialogBuilder.setMessage("Click Ok to return to the menu").setCancelable(false);
            alertDialogBuilder.setPositiveButton("Ok",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // write to DB
                    // send msg 
                    communication_handler.sendMessage(Message.obtain(null,MSG_SEND_INFO_TO_SERVER,0));                                       
                }
            });
            alertDialogBuilder.setNegativeButton("Cancel",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    // if this button is clicked, just close
                    // the dialog box and do nothing
                    dialog.cancel();

                    communication_handler.sendMessage(Message.obtain(null,MSG_INFO_NOT_SEND_TO_SERVER,0));

                }
            });

            // create alert dialog
            AlertDialog alertDialog = alertDialogBuilder.create();

            // show it
            alertDialog.show();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:52:26.497

Android 中没有阻塞的 UI 模型，一切都是异步的。你必须改变行为。您可以在线程或 asyncTast 或 looperThread 中调用 alertDialog ，如果必须将 DB 中的信息发送到 Web 服务器，则将消息发送到主线程（使用处理程序）并在 handleMessage(Message msg) 中发送信息。

# python - Python3 中与 tkinter 跟踪相关的回调函数

> ID：15659342
> 
> 赞同：0
> 
> 时间：2013-03-27T12:55:03.480
> 
> 标签：python, python-3.x, callback, tkinter

我提出这个问题是因为我刚刚看到了这个问题[与 Tkinter 跟踪相关的回调函数有哪些限制？](https://stackoverflow.com/questions/9865936/what-are-the-limitations-of-callback-functions-associated-with-tkinter-traces).

我`lambda`用来添加另一个argumentmnt。这是代码：

```
from tkinter import *

def callbackfunc(*args, **kwargs):
    print(args,kwargs)

class App(object):
    def __init__(self, master):
        frame = Frame(master)
        frame.pack()

        optionvalue = IntVar(master)
        optionvalue.set(2)
        optionvalue.trace("w",lambda a,b,c,x='test':callbackfunc(x))
        self.optionmenu = OptionMenu(master, optionvalue, 1, 2, 3, 4)
        self.optionmenu.pack()

root = Tk()
app = App(root)
root.mainloop() 
```

我的输出：`('test',) {}` 我想知道的是：如果我使用 lambda，为什么不输出其他 3 个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:15:46.113

让我们看看这一行：

```
optionvalue.trace("w",lambda a,b,c,x='test':callbackfunc(x)) 
```

这在概念上与这样做几乎相同：

```
def i_dont_care_what_the_name_is(a,b,c,x='test'):
    callbackfunc(x)
optionvalue.trace("w", i_dont_care_what_the_name_is) 
```

当跟踪触发时，它使用三个值调用 lambda - 这是记录在案的行为。不管你是否使用 lambda，Tkinter 都会*将*三个参数传递给回调。

您创建了 lambda 以获取第四个可选值，这是使用 lambda 的一种非常常见的方式。但是，在您的 lambda 中，您正在显式调用`callbackfunc`并且只传递一个值 x。

它的工作原理是这样的：回调用三个参数调用你的 lambda。您已将 lambda 定义为具有额外的第四个参数。然后 lambda 调用您的回调，但您只给它一个参数。

那么，“如果我使用 lambda，为什么不输出其他 3 个参数？”这个问题的答案。是“因为您只是将其中一个参数从 lambda 内部传递给您的其他函数”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:08:59.950

问题是这一行：

```
optionvalue.trace("w",callbackfunc()) 
```

而不是传递`callbackfunc`给`optionvalue.trace`，你调用它 - 没有参数，因此你的输出。

你应该改用这个：

```
optionvalue.trace("w", callbackfunc) 
```

没有括号，就像[你链接的问题](https://stackoverflow.com/questions/9865936/what-are-the-limitations-of-callback-functions-associated-with-tkinter-traces)一样。

# haskell - 通过将 Monads 变成 Semigroups 来重叠实例

> ID：15659343
> 
> 赞同：6
> 
> 时间：2013-03-27T12:55:09.620
> 
> 标签：haskell

`Monads``Semigroups`通过定义

```
instance Monad m => Semigroup (m a) where
    (<>) = (>>) 
```

使用灵活实例。

如果我想以这种方式`Maybe a`变成一个`Semigroup`，我会遇到一个 Intance 重叠，因为`Data.Semigroup`定义了一个

```
instance Semigroup a => Semigroup (Maybe a) 
```

解决此类问题的 Haskell 方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T13:32:24.680

解决这些问题的常用方法是使用新类型包装器。你不会定义一个`instance Semigroup (m a)`，而是

```
newtype WrappedMonad m a = WrappedMonad { getWrappedMonad :: m a }

instance Monad m => Semigroup (WrappedMonad m a) where
    WrappedMonad a <> WrappedMonad b = WrappedMonad (a >> b) 
```

# c++ - C ++ 11 - 复制指向抽象类型的智能指针的构造？

> ID：15659349
> 
> 赞同：1
> 
> 时间：2013-03-27T12:55:26.953
> 
> 标签：c++, c++11, copy-constructor, unique-ptr, copy-assignment

我喜欢**std::unique_ptr**。它可以帮助我防止内存泄漏，这非常有用。但是有一个问题：不允许复制分配和构造。

尽管这个限制有助于程序员的安全，但它也是相当有限的。如果您使用复制分配和构造来处理以 std::unique_ptr 作为其成员的类，那么您最终会遇到问题。这就是为什么我使用复制构造和分配围绕 unique_ptr 创建了自己的包装器。这是它的复制构造函数：

```
template<typename T, class Deleter>
PointerSmartSafe<T, Deleter>::PointerSmartSafe(PointerSmartSafe const& pointer_smart_safe_) noexcept : _m_opPointerUnique((_m_opPointerUnique == nullptr) ? new T(*_m_opPointerUnique.get()) : nullptr){

} 
```

这是复制赋值运算符：

```
template<typename T, class Deleter>
PointerSmartSafe<T, Deleter>& PointerSmartSafe<T, Deleter>::operator=(PointerSmartSafe const& pointer_smart_safe_) noexcept{
    _m_opPointerUnique = decltype(_m_opPointerUnique)(new T(*_m_opPointerUnique.get()));
    return *this;
} 
```

一切都很好，直到我最终使用抽象基类作为类型（T）。我收到如下错误消息：

```
error: cannot allocate an object of abstract type 'AbstractBaseClass' 
```

这让我很困惑。是否存在解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T13:07:44.840

> 但是有一个问题：不允许复制分配和构造。

那不是问题。如果你发现它有问题，那么你做错了什么。

> 尽管这个限制有助于程序员的安全，但它也是相当有限的。

这是故意限制的，也许你应该重新考虑你的设计。

> 这就是为什么我使用复制构造和分配围绕 unique_ptr 创建了自己的包装器。

你想要的不是一个`unique_ptr`then，你想要一个“克隆 ptr”

> 这让我很困惑

它有什么令人困惑的地方？您正在尝试创建抽象基类的实例。您的代码也会对非抽象基础进行切片。它本质上是不安全的。

这应该告诉您一些重要的事情：复制 a 持有的对象`unique_ptr`通常无法完成，它需要 a 没有的上下文`unique_ptr`。该上下文要么必须来自拥有要复制的事物的对象（这需要拥有对象知道对象的动态类型），要么来自要复制自身的事物（可以使用虚函数在其中进行复制）正确动态类型的上下文。）

传统的解决方案是向您的类型添加一个虚拟`clone()`成员函数，然后在可能的情况下使用它。

您可以将其合并到您的构造函数中，如下所示：

```
template<typename T>
  auto clone(T* t) -> decltype(t->clone())
  { return t->clone(); }

template<typename T>
  std::unique_ptr<T> clone(T* t, ...)
  { return std::unique_ptr<T>(new T(*t)); }

// ... 

_m_opPointerUnique((_m_opPointerUnique == nullptr) ? clone(_m_opPointerUnique.get()) : nullptr) 
```

# java - 我应该在 netbeans 中创建 Images 文件夹吗

> ID：15659351
> 
> 赞同：0
> 
> 时间：2013-03-27T12:55:30.337
> 
> 标签：java, image, swing, jframe, embedded-resource

我正在 netbeans 中开发一个 java 应用程序，以保存图像图标，我应该创建一个新的图像文件夹还是已经创建了一个图像文件夹？

我在项目中创建了一个图像文件夹，将图像图标设置为 JFrame，

```
URL iconURL = this.getClass().getResource("images/images.jpg");

    ImageIcon icon = new ImageIcon(iconURL);
    frame.setIconImage(icon.getImage()); 
```

错误

```
Uncaught error fetching image:
java.lang.NullPointerException
at sun.awt.image.URLImageSource.getConnection(URLImageSource.java:115)
at sun.awt.image.URLImageSource.getDecoder(URLImageSource.java:125)
at sun.awt.image.InputStreamImageSource.doFetch(InputStreamImageSource.java:263)
at sun.awt.image.ImageFetcher.fetchloop(ImageFetcher.java:205)
at sun.awt.image.ImageFetcher.run(ImageFetcher.java:169) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:57:41.627

无论您是否创建了目录，我都怀疑这一点

```
getResource("images\\images.jpg"); 
```

是一个问题，您应该将资源路径指定为`images/images.jpg`（即正斜杠，无论平台如何。斜杠是资源分隔符，不一定指文件系统）

如果没有明确的请求，我不希望 NetBeans 为您做任何事情，因此您应该创建所需的任何文件夹/资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:21:37.723

这是 Netbeans 遇到的问题之一，一旦您将图像插入 GUI，它总是会尝试从您放置图像的第一个位置查找图像。我建议创建一个图像包以保持其清洁并尽量不要从包中移动图像。

要解决您现在遇到的问题，您可以将图像插入到上一阶段，我相信您的图像与您的课程在同一个包中。

或者试试这个方法

```
setIcon(); 
```

您可以`setIcon` 像下面一样创建

```
public void setIcon() {
    setIconImage(Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/images.jpg")));
        }
    } 
```

# neo4j - 在 Neo4jClient .NET 中检索所有相关节点、Cypher 查询

> ID：15659359
> 
> 赞同：0
> 
> 时间：2013-03-27T12:55:54.490
> 
> 标签：neo4j, cypher, neo4jclient

我有一个执行 Cypher 查询的方法，我想返回与查询中指定的节点（64）有关系的所有节点及其名称：

```
start n = node(64) match (n)--(x) return x.Name; 
```

现在，当我尝试在我的代码中执行此操作时，它不想工作。这是我的方法：

```
public string GetAllFirstLevelRelatives(long NodeId)
{

    string QueryResult = null;

    try
    {
        var query = client_connection
            .Cypher
            .Start(NodeId, client_connection.RootNode)
            .Match(NodeId, "--(x)")
            .Return<Node<GraphNode>>("(x).name");

        QueryResult = query.Results.ToString();
    }
    catch (Exception e)
    {

    }
    return QueryResult;
} 
```

我希望此查询返回名称。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T01:03:16.860

这个查询：

```
start n = node(64) match n--x return x.Name; 
```

应该用 C# 编写为：

```
var query = graphClient
    .Cypher
    .Start("n", node)           // START n=node(123)
    .Match("n--x")              // MATCH n--x
    .Return<string>("x.Name");  // RETURN x.Name 
```

您提供的示例代码存在一些问题：

1.  可能会有多个节点，但您的方法只返回一个`string`结果。调用`Results.ToString()`将返回类似的东西`"System.Collections.IEnumberable<string>"`而不是实际结果。
2.  您应该避免将节点 ID 作为`long`s 传递。这样做会鼓励您使用不应该使用的原始数字。相反，使用`NodeReference`. 使用 Neo4jClient 运行的任何查询都会`NodeReference`返回一个对象。使用它来运行您的下一个查询。为了开始您的第一个查询，我们提供`IGraphClient.RootNode`. 您基本上不需要触摸节点 ID。
3.  将任何 .NET 代码包装在该部分为空的`try {} catch {}`块中**始终**是一个很大的禁忌。请不要在任何代码中写这个，永远。:)`catch`
***   `x.Name`很可能是一个字符串，但后来你用`.Return<Node<GraphNode>>`. 这基本上是说“加载`x.Name`（一个字符串），但把它作为一个`Node<GraphNode>`“返回给我。这没有多大意义。您需要匹配类型。**

 **结合我上面写的查询和这些要点，你的方法应该是这样的：

```
public IEnumerable<string> GetAllFirstLevelRelatives(NodeReference node)
{
    var query = graphClient
        .Cypher
        .Start("n", node)           // START n=node(123)
        .Match("n--x")              // MATCH n--x
        .Return<string>("x.name");  // RETURN x.name

    return query.Results.ToList();
} 
```

为了进一步改进这一点，您应该利用我们的类型系统。`x`您的查询中的“ ”是什么？让我们想象这是一部电影。

您应该创建一个类来描述电影节点包含的内容：

```
public class Movie
{
    public string Name { get; set; }
} 
```

该类应该是一个“POCO”（普通的旧类对象），这意味着它应该只具有基本属性，而不是方法或逻辑。

然后，在查询中使用此类型信息：

```
public IEnumerable<Movie> GetAllRelatedMovies(NodeReference node)
{
    var query = graphClient
        .Cypher
        .Start("n", node)
        .Match("n--movie")
        .Return<Movie>("movie");

    return query.Results.ToList();
} 
```

现在你有了一个电影列表，而不仅仅是一个字符串列表。您不太可能只想要电影的名称，因此您可以通过这种方式访问​​所有属性。**

# javascript - Jquery隐藏一个div并对其他div应用平滑过渡效果以重新排序？

> ID：15659362
> 
> 赞同：0
> 
> 时间：2013-03-27T12:56:01.273
> 
> 标签：javascript, jquery, html, css, jquery-ui

我有 div 列表并单击该 div 它显示另一个 div 切换的结果，也有关闭选项。我需要接近那个 div 我需要具有平滑过渡效果的排序效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:24:33.603

我得到了答案...这是 jQuery 插件... [http://isotope.metafizzy.co/demos/elements-complete.html](http://isotope.metafizzy.co/demos/elements-complete.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:59:31.353

你可以看看这个：

[http://api.jquery.com/category/effects/fading/](http://api.jquery.com/category/effects/fading/)

如果需要，您可以将它与 Toggle one 放在一起。

# android - Android 在 socket.connect 之前显示 ProgressDialog

> ID：15659368
> 
> 赞同：0
> 
> 时间：2013-03-27T12:56:22.273
> 
> 标签：android, multithreading, progressdialog

我试图`ProgressDialog`在调用`socket.connect()`我的 Android 应用程序之前显示一个。不幸的是，该对话框仅在方法完成**后出现。**`socket.connect()`这是我所做的：

```
public void connect() throws IOException
{
    try
    {
        final ProgressDialog dialog = ProgressDialog.show(remoteActivity, "Connecting", "please wait...");

        socket.connect(sockaddr,timeout);

        ipAddress = socket.getLocalAddress();
        oos = new ObjectOutputStream(socket.getOutputStream());
        ois = new ObjectInputStream(socket.getInputStream());   

        dialog.dismiss();
    }
    catch(IOException e)
    {
        throw e;
    }
} 
```

我知道我可以使用不同的 Thread 来调用`socket.connect()`，但我不希望此方法异步运行，因为我想使用 Exception 机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:15:18.573

您永远不应该执行网络操作或事实上任何输入/输出在`Main/UI Thread`. 最重要的是，android 引入了[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)以强制开发人员避免使用主线程进行网络操作。该线程旨在

*   更新用户界面组件。
*   为用户接收和生成事件。

除了最好在单独的线程中完成之外的任何事情。现在关于`Exception`机制，您可以使用布尔指标来代替连接是否成功。如果您在此处获取异常时乱伦，则可以将其传回：

```
private void handleException(Exception e){
 // do whatever you want with the exception
}
public void connect() {

    final ProgressDialog dialog = ProgressDialog.show(remoteActivity, "Connecting", "please wait...");
    final Handler handler = new Handler():
    new Thread(){
     @Override
    public void run(){
     try{            
        socket.connect(sockaddr,timeout);

        ipAddress = socket.getLocalAddress();
        oos = new ObjectOutputStream(socket.getOutputStream());
        ois = new ObjectInputStream(socket.getInputStream());   
        handler.post(new Runnable(){
               @Override
               public void run(){
                    dialog.dismiss();
                }
          });
      } (catch(final IOException e)
        {
          handler.post(new Runnable(){
               @Override
               public void run(){
                    handleException(e);
                    dialog.dismiss();
                }
          });
        }
    }.start();

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:07:07.307

创建自定义类，扩展`ProgressDialog`，将连接放入构造函数并在覆盖显示函数中调用连接方法

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-27T13:06:50.820

尝试抢占您的线程，以便 UI 有机会采取行动。例如：

```
final ProgressDialog dialog = ProgressDialog.show(remoteActivity, "Connecting", "please wait...");
Thread.sleep(1);
socket.connect(sockaddr,timeout); 
```

# flash - 在 Flex 应用程序中播放 Youtube 视频并进行直播

> ID：15659371
> 
> 赞同：0
> 
> 时间：2013-03-27T12:56:29.677
> 
> 标签：flash, youtube, flex4, video-streaming

是否可以在 Flex 4 应用程序中播放 Youtube 视频，同时将其作为实时流发布到 Flash 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:05:38.030

播放 Youtube 视频没有问题（当然它的流媒体协议是 rtmp），但据我所知，您不能将传入流的视频附加到传出的视频，因为 attachVideo/attachAudio 方法只能使用相机/麦克风作为输入。如果您想将某些内容重新流式传输到您的服务器，您可以使用 FFmpeg，这真的很简单！

# html - 为什么在网页中使用 HTML

> ID：15659378
> 
> 赞同：-9
> 
> 时间：2013-03-27T12:56:53.150
> 
> 标签：html

我知道我的问题可能很奇怪，但直到现在我还不明白为什么要在网页上使用 HTML？为什么我们不将网页创建为普通文本，而不是使用 HTML，然后编写解析它的程序。

HTTP和HTML之间是什么关系？

HTTP 可以将数据作为非 HTML 文件（如 txt 和 png）发送吗？如果不是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:58:16.507

我们把网页写成文本，然后再写浏览器；它解析 HTML/XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:00:16.890

> HTTP 可以将数据作为非 HTML 文件（如 txt 和 png）发送吗？

是的，HTTP 可以。

> HTTP和HTML之间是什么关系？

HTTP 是一种描述如何通过网络交换数据的协议。HTML 是一种数据格式，它解释了页面应该如何显示（斜体、粗体等）

# javascript - 在 Bing Maps v7 中创建多个信息窗口并显示特定于 pin 的数据

> ID：15659379
> 
> 赞同：0
> 
> 时间：2013-03-27T12:56:54.110
> 
> 标签：javascript, jquery, bing-maps

我目前正在尝试学习 Bing Maps API，并且目前正在尝试构建具有多个引脚的地图，这些引脚可以悬停以显示带有该引脚数据的信息窗口。目前我遇到了一些问题。如果有人可以帮助解决以下几点，那就太好了：

1.  当我鼠标离开图钉时，信息窗口不会被删除？
2.  如何使用我在 addPin() 中检索到的数据来填充所需的信息窗口？
3.  在 createInfoBox() 中，我想在地图移动时隐藏任何活动的信息窗口，但即使地图没有移动，这似乎也会被触发？
4.  如果我可以做任何改进，请告诉我

**jsfiddle**： http: [//jsfiddle.net/kyllle/vpepD/23/](http://jsfiddle.net/kyllle/vpepD/23/)和下面的JS

**JS**

```
var dealerMap = {        

        createInfoBox: function(infobox) {

            var instance = this,
                pushpin = infobox;

            // Now create infowindows
            var NewWindow = new Microsoft.Maps.Infobox(pushpin.getLocation(), {
                title: 'title',
                offset: new Microsoft.Maps.Point(-3, pushpin.getHeight() - 5),
                zIndex: 999,
                visible: true
            });

            //Display infowindow
            instance.displayInfoBox(NewWindow, pushpin);

            //Hide infowindow if map is moved - currently gets run without moving map
            //Microsoft.Maps.Events.addHandler(dealerMap.myMap, 'viewchange', instance.hideInfoBox(NewWindow));

        },

        displayInfoBox: function(infobox, pin) {

            var instance = this;

            //Show updated infowindow
            dealerMap.myMap.entities.push(infobox);

            //Mouse out handler to remove window
            Microsoft.Maps.Events.addHandler(pin, 'mouseleave', function() {        
                instance.hideInfoBox(NewWindow);
            });
        },

        hideInfoBox: function(infobox) {

            var instance = this;

            console.log('this was called');
            dealerMap.myMap.entities.remove(infobox);

        },

        addPin: function() {

            var instance = this;

            //make $.ajax json call            
            var response = data.dummy;

            //on success make each pin with returned data
            for (var i = 0, len = response.length; i < len; i++) {    

                var responseItem = response[i],
                    pinLocation = new Microsoft.Maps.Location(responseItem.lat, responseItem.long);                       

                //Create new pin
                var NewPin = new Microsoft.Maps.Pushpin(pinLocation, {
                    icon: 'http://www.kylehouston.com/testing/sportscar_' + responseItem.id +'.png',
                    width: 32,
                    height: 37
                });    

                //Push new pin onto map
                this.myMap.entities.push(NewPin);          

                //Event handlers to show and hide requested infowindow information
                Microsoft.Maps.Events.addHandler(NewPin, 'mouseover', function(e) {
                    console.log(this);
                    dealerMap.createInfoBox(e.target);
                });
            }                      
        },

        init: function() {

            var instance = this;

            var mapOptions = {
                credentials: "AvGoKWSuMorGQb5h4UyyatCBGmGzSZe7-dWQMzXt4qqz6mV_WCC5m-paxvQhednd",
                center: new Microsoft.Maps.Location(37.09024, -95.712891),
                zoom: 5,
                enableClickableLogo: false,
                enableSearchLogo: false
            }

            dealerMap.myMap = new Microsoft.Maps.Map(document.getElementById('mapDiv'), mapOptions);

            //now add some pins
            instance.addPin();           

        }

    }

    dealerMap.init();

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T14:23:28.273

我强烈建议在地图上一次只显示一个信息框。显示多个信息框会挤满地图并导致糟糕的用户体验。它还占用了更多的资源。更好的方法是创建一个信息框，并在您想要显示内容时为每个图钉重复使用它。我写了一篇博客文章，展示了如何在这里做到这一点：[http ://rbrundritt.wordpress.com/2011/10/13/multiple-pushpins-and-infoboxes-in-bing-maps-v7/](http://rbrundritt.wordpress.com/2011/10/13/multiple-pushpins-and-infoboxes-in-bing-maps-v7/)

# javascript - Javascript/HTML/CSS 命运之轮仅靠差异旋转？

> ID：15659384
> 
> 赞同：1
> 
> 时间：2013-03-27T12:57:08.247
> 
> 标签：javascript, jquery, css, rotation, dom-manipulation

我正在构建一个轮盘赌，它应该真实地旋转，并通过拖动轮子并放开它来操作。

我已经得到了 1:1 的旋转，我只需要让它在松开后真实地旋转。

我通过测量两帧之间的距离来计算力。

~~你可以在这里查看源代码：[http ://www.techgoldmine.com/spinny_thing](http://www.techgoldmine.com/spinny_thing)~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:23:39.773

我不清楚您的问题，但您需要清除文档上 mouseup 的时间间隔。

```
$('.mouse_trap').mousedown(function(){
        intervalvar = setInterval(monitorClicks, 24);

        /*will clear the interval and unbind the function on first mouseup on the document*/
        $(document).one('mouseup', function ()
        {
            clearInterval(intervalvar);
        });
    }); 
```

# internet-explorer-9 - kendoDatePicker 在 IE 10 上失败

> ID：15659386
> 
> 赞同：0
> 
> 时间：2013-03-27T12:57:10.757
> 
> 标签：internet-explorer-9, kendo-ui, internet-explorer-10

以下测试页面在 IE9 上运行正常，但在 IE 10 中引发 jQuery 异常。这不是一个真正的问题，但我认为我应该分享我的经验。

```
<!DOCTYPE html5>
<html>
<head>
<title>Untitled Page</title>
    <link href="styles/kendo.common.min.css" rel="stylesheet" type="text/css" />
    <link href="styles/kendo.default.min.css" rel="stylesheet" type="text/css" />
    <link href="styles/LPStyles.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/kendo.web.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#datePicker").kendoDatePicker();
        });
     </script>
</head>
<body>
    <input id="datePicker" value="10/10/2011" style="width:150px;" /> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:37:16.210

您使用的是什么版本的 jQuery？

最新版剑道（2013 Q1）升级到jQuery 1.9.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T15:53:55.087

Kendo UI 日期选择器在以下情况下不起作用
浏览器模式：IE 10 文档模式：IE5 Quirks 模式

您可以将浏览器文档模式强制为任何其他文档模式。

或者

试试下面的代码

```
 try{
        $("#datePicker").kendoDatePicker();
    }
 catch(err){} 
```

# class - CKEditor 自动从 div 中剥离类

> ID：15659390
> 
> 赞同：145
> 
> 时间：2013-03-27T12:57:18.407
> 
> 标签：class, html, ckeditor

我在我的网站上使用[CKEditor](http://ckeditor.com/)作为后端编辑器。尽管它似乎想将代码更改为每当我按下源按钮时它认为合适的方式，但它正在驱使我绕弯。例如，如果我点击源并创建一个`<div>`...

```
<div class="myclass">some content</div> 
```

然后它无缘无故地从`<div>`.

```
<div>some content</div> 
```

我认为这种恼人的行为可以在 中关闭`config.js`，但我一直在挖掘，在文档中找不到任何东西来关闭它。

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2013-03-27T13:24:51.760

# 禁用内容过滤

最简单的解决方案是转到**config.js**并设置：

```
config.allowedContent = true; 
```

（**记得清除浏览器的缓存**）。然后CKEditor 完全停止过滤输入的内容。但是，这将完全禁用[内容过滤](http://docs.ckeditor.com/#!/guide/dev_acf)，这是 CKEditor 最重要的功能之一。

# 配置内容过滤

您还可以更精确地配置[CKEditor 的内容过滤器](http://docs.ckeditor.com/#!/guide/dev_allowed_content_rules)，以仅允许您需要的这些元素、类、样式和属性。这个解决方案要好得多，因为 CKEditor 仍然会删除浏览器在复制和粘贴内容时产生的许多糟糕的 HTML，但它不会删除你想要的内容。

例如，您可以扩展默认 CKEditor 的配置以接受所有 div 类：

```
config.extraAllowedContent = 'div(*)'; 
```

或者一些引导程序的东西：

```
config.extraAllowedContent = 'div(col-md-*,container-fluid,row)'; 
```

或者，您可以允许具有可选`dir`属性的描述列表`dt`和`dd`元素：

```
config.extraAllowedContent = 'dl; dt dd[dir]'; 
```

这些只是非常基本的例子。你可以编写各种规则——需要属性、类或样式，只匹配特殊元素，匹配所有元素。您也可以禁止某些东西并完全重新定义 CKEditor 的规则。阅读更多关于：

*   [CKEditor 中的内容过滤](http://docs.ckeditor.com/#!/guide/dev_acf)——为什么需要内容过滤。
*   [高级内容过滤器](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter)——深入描述过滤机制。
*   [允许的内容规则](http://docs.ckeditor.com/#!/guide/dev_allowed_content_rules)——如何编写允许的内容规则。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-08-07T12:54:14.407

我找到了解决方案。

这会关闭过滤，它正在工作，但不是一个好主意......

```
config.allowedContent = true; 
```

使用内容字符串可以很好地用于 id 等，但不适用于类和样式属性，因为您有 () 和 {} 用于类和样式过滤。

所以我的赌注是允许编辑器中的任何类是：

```
config.extraAllowedContent = '*(*)'; 
```

这允许任何类和任何内联样式。

```
config.extraAllowedContent = '*(*);*{*}'; 
```

只允许 class="asdf1" 和 class="asdf2" 用于任何标签：

```
config.extraAllowedContent = '*(asdf1,asdf2)'; 
```

（所以你必须指定类名）

仅允许 class="asdf" 用于 p 标签：

```
config.extraAllowedContent = 'p(asdf)'; 
```

允许任何标签的 id 属性：

```
config.extraAllowedContent = '*[id]'; 
```

等等等等

允许样式标签（<style type="text/css">...</style>）：

```
config.extraAllowedContent = 'style'; 
```

再复杂一点：

```
config.extraAllowedContent = 'span;ul;li;table;td;style;*[id];*(*);*{*}'; 
```

希望这是一个更好的解决方案...

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-01-12T17:37:56.960

**编辑**：这个答案适用于那些在 drupal 中使用 ckeditor 模块的人。

我找到了一个不需要修改 ckeditor js 文件的解决方案。

[这个答案是从这里](https://drupal.stackexchange.com/a/80296/2281)复制的。所有学分都应归原作者所有。

> 转到“管理>>配置>>CKEditor”；在个人资料下，选择您的个人资料（例如完整）。
> 
> 编辑该配置文件，然后在“高级选项 >> 自定义 JavaScript 配置”中添加`config.allowedContent = true;`.
> 
> ![在此处输入图像描述](../Images/9f3ef571a8a5de84c2dfe4a7b16aeed5.png)
> 
> 不要忘记在“性能选项卡”下刷新缓存。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-06-06T02:22:57.173

从 CKEditor v4.1 开始，您可以在 CKEditor 的 config.js 中执行此操作：

```
CKEDITOR.editorConfig = function( config ) {
  config.extraAllowedContent = '*[id](*)';  // remove '[id]', if you don't want IDs for HTML tags
} 
```

[Allowed Content Rules 的详细语法](http://docs.ckeditor.com/#!/guide/dev_allowed_content_rules)可以参考官方文档

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-03-27T13:30:06.813

如果您使用的是 ckeditor 4.x，您可以尝试

```
config.allowedContent = true; 
```

如果您使用的是 ckeditor 3.x，您可能会遇到[此问题](https://dev.ckeditor.com/ticket/5818)。

尝试将以下行放入 config.js

```
config.ignoreEmptyParagraph = false; 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-02-06T12:28:53.330

这在 ckeditor 中称为 ACF（自动内容过滤器）。它会删除我们在文本内容中使用的所有不必要的标签。在 config.js 文件中使用此命令应该关闭此 ACK。

```
config.allowedContent = true; 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-03-27T15:20:46.830

请参考[官方的高级内容过滤器指南](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter)和[插件集成教程](http://docs.ckeditor.com/#!/guide/plugin_sdk_integration_with_acf)。

关于这个强大的功能，您会发现更多。另请参阅似乎适合您需求的[config.extraAllowedContent 。](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-extraAllowedContent)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-04-28T13:17:47.387

以下是**CKEDITOR 4.x**的完整示例：

**HTML**

```
<textarea name="post_content" id="post_content" class="form-control"></textarea> 
```

**脚本**

```
CKEDITOR.replace('post_content', {
   allowedContent:true,
}); 
```

上面的代码将允许编辑器中的所有标签。

更多详情：[**CK EDITOR 允许的内容规则**](http://docs.ckeditor.com/#!/guide/dev_allowed_content_rules-section-debugging)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-11-20T11:19:53.657

如果您将 Drupal 和名为“WYSIWYG”的模块与 CKEditor 库一起使用，则以下解决方法可能是一个解决方案。对我来说，它就像一种魅力。我在 Drupal 7.33 中使用 CKEditor 4.4.5 和 WYSIWYG 2.2。我在这里找到了这个解决方法：[https](https://www.drupal.org/node/1956778) ://www.drupal.org/node/1956778 。

就是这样：我创建了一个自定义模块并将以下代码放入“.module”文件中：

```
<?php
/**
 * Implements hook_wysiwyg_editor_settings_alter().
 */
function MYMODULE_wysiwyg_editor_settings_alter(&$settings, $context) {
  if ($context['profile']->editor == 'ckeditor') {
    $settings['allowedContent'] = TRUE;
  }
}
?> 
```

我希望这对其他 Drupal 用户有所帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-30T14:13:13.020

我想添加这个 config.allowedContent = true; 需要添加到 ckeditor.config.js 文件而不是 config.js，config.js 对我没有任何作用，但将其添加到 ckeditor.config.js 的顶部区域保留了我的 div 类

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-04T11:28:59.103

如果使用 drupal，另一种选择是简单地添加您想要使用的 css 样式。这样它就不会去掉样式或类名。

所以在我的情况下，在drupal 7的css选项卡下只需添加类似

facebook=span.icon-facebook2

还要检查字体样式按钮是否已启用

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-10-28T02:16:49.113

我发现切换到使用完整的 html 而不是过滤的 html（在文本格式下拉框中的编辑器下方）为我解决了这个问题。否则样式会消失。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-01-05T14:44:20.147

我在使用 ckeditor 4.7.1 的 chrome 上遇到了同样的问题。只需在 ckeditor instanceReady 上禁用 pasteFilter。此属性禁用高级内容过滤器（ACF）的所有过滤器选项。

```
 CKEDITOR.on('instanceReady', function (ev) {
        ev.editor.pasteFilter.disabled = true;
    }); 
```

# c# - 这是设置 2 级导航（两个菜单，每个级别一个）的好方法吗？使用 MvcSiteMapProvider 突出显示包括面包屑？

> ID：15659394
> 
> 赞同：2
> 
> 时间：2013-03-27T12:57:34.720
> 
> 标签：c#, asp.net-mvc, mvcsitemapprovider

我只是潜入 MVC SiteMapProvider 并摆弄它，所以这个问题更多的是关于设计而不是无法实现我想要的。我设置了一个使用 MvcSiteMapProvider 3.3.4 的简单 MVC4 Web 应用程序。

我想用它实现的是有一个 2 级网站导航；一种用于水平显示的顶层，另一种用于垂直显示的低于该水平的级别。子菜单必须只显示在当前选定节点下分层的节点。此外，我希望在两个级别中突出显示活动节点，因此实际选择的节点以及如果它是子节点，我还想突出显示父节点。

我实际上能够进行设置，所以结果看起来像我想要的那样，但我真的不喜欢它在代码中的样子，所以我在这里要问的是这是否是一种合法的方式，或者是否有人可以启发我了解我目前缺少的最佳实践。

我面临的障碍是：

1）我只想使用一个站点地图文件并在对 MvcSiteMap.Menu 函数的不同调用中显示它的不同级别（如上所述，级别 1 是水平的，级别 2 是垂直的，级别 0 是站点地图的根节点[我不想看到]）

2）我的第二个问题是我将 Home-Controller 的 Index-Action 作为我的根节点，但也作为根节点的子节点，因为我希望额外的层次结构将其他 Home-Controller 的操作放入。当然，这需要一些额外的配置来稍后显示适当的面包屑，因为事实证明，如果选择它，这也会使突出显示“Home”节点变得更加困难。

考虑到这一点，我设置了以下站点地图：

（web.config 部分）

```
<siteMap defaultProvider="MvcSiteMapProvider" enabled="true">
      <providers>
        <clear />
        <add name="MvcSiteMapProvider" type="MvcSiteMapProvider.DefaultSiteMapProvider, MvcSiteMapProvider" siteMapFile="~/Mvc.Sitemap" securityTrimmingEnabled="true" cacheDuration="5" enableLocalization="true" scanAssembliesForSiteMapNodes="true" includeAssembliesForScan="" excludeAssembliesForScan="" attributesToIgnore="visibility" nodeKeyGenerator="MvcSiteMapProvider.DefaultNodeKeyGenerator, MvcSiteMapProvider" controllerTypeResolver="MvcSiteMapProvider.DefaultControllerTypeResolver, MvcSiteMapProvider" actionMethodParameterResolver="MvcSiteMapProvider.DefaultActionMethodParameterResolver, MvcSiteMapProvider" aclModule="MvcSiteMapProvider.DefaultAclModule, MvcSiteMapProvider" siteMapNodeUrlResolver="MvcSiteMapProvider.DefaultSiteMapNodeUrlResolver, MvcSiteMapProvider" siteMapNodeVisibilityProvider="MvcSiteMapProvider.FilteredSiteMapNodeVisibilityProvider, MvcSiteMapProvider" siteMapProviderEventHandler="MvcSiteMapProvider.DefaultSiteMapProviderEventHandler, MvcSiteMapProvider" />
      </providers>
</siteMap> 
```

(Mvc.Sitemap)

```
<?xml version="1.0" encoding="utf-8" ?>
<mvcSiteMap xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0"
            xsi:schemaLocation="http://mvcsitemap.codeplex.com/schemas/MvcSiteMap-File-3.0 MvcSiteMapSchema.xsd"
            enableLocalization="true">

  <mvcSiteMapNode title="Home" controller="Home" action="Index">
    <mvcSiteMapNode title="Home" controller="Home" action="Index" visibility="!SiteMapPathHelper,*">
      <mvcSiteMapNode title="HomeSub" controller="Home" action="Sub">
      </mvcSiteMapNode>
    </mvcSiteMapNode>
    <mvcSiteMapNode title="Menu1" controller="Menu1" action="Index">
      <mvcSiteMapNode title="Menu1Sub" controller="Menu1" action="Sub">
      </mvcSiteMapNode>
    </mvcSiteMapNode>
    <mvcSiteMapNode title="Menu2" controller="Menu2" action="Index">
      <mvcSiteMapNode title="Menu2Sub" controller="Menu2" action="Sub">
      </mvcSiteMapNode>
    </mvcSiteMapNode>
  </mvcSiteMapNode>
</mvcSiteMap> 
```

(Views\Shared\DisplayTemplates\MenuHelperModel.cshtml)

```
@model MvcSiteMapProvider.Web.Html.Models.MenuHelperModel
@using System.Web.Mvc.Html
@using MvcSiteMapProvider.Web.Html.Models

<ul id="menu">
    @{
        string firstUrl = null;
    }

    @foreach (var node in Model.Nodes) {
        string classes = node.IsCurrentNode | node.IsInCurrentPath | ( ((MvcSiteMapProvider.MvcSiteMapNode)SiteMap.CurrentNode).Action == node.Action && ((MvcSiteMapProvider.MvcSiteMapNode)SiteMap.CurrentNode).Controller == node.Controller )
            ? "current" : "";

        if (firstUrl == null)
        {
            firstUrl = node.Url;
        }
        else if (node.Url.Contains(firstUrl))
        {
            classes += " child";
        }

        <li class="@classes">@Html.DisplayFor(m => node) 
            @if (node.Children.Any()) {
                @Html.DisplayFor(m => node.Children)
            }
        </li>
    }
</ul> 
```

我用这个渲染主站点菜单

```
@Html.MvcSiteMap("MvcSiteMapProvider").Menu(0, true, false, 1) 
```

*我读这个就像“让我从根节点开始菜单到低于它的级别；将根节点放入与其子节点相同的级别，但不向我显示根节点”。我没有接到这个电话，因为如果我将startingNodeInChildLevel 设置为false 并将showStartingNode 设置为false，我希望返回相同的结果，但不是吗？这怎么写才能更容易理解？*

我的子菜单是这样的

```
@Html.MvcSiteMap("MvcSiteMapProvider").Menu(2, 1, true) 
```

*老实说，我也不太理解这个调用，当我尝试 MvcSiteMap.Menu 的不同重载时，我偶然发现了它，它似乎完全符合我的需要（将显示的节点减少到仅在所选父节点下的节点节点）。有人对此进行了澄清，它到底做了什么？*

添加了一个面包屑

```
@Html.MvcSiteMap("MvcSiteMapProvider").SiteMapPath() 
```

现在既然这似乎对我有用，我为什么还要费心发布这个？

**好吧，对于第一次（或者可能是前十次 :-)）阅读此内容的任何人来说，对 MvcSiteMap.Menu 的调用肯定会让人感到困惑。**

**我不喜欢当前解决方案的第二件事是 Home-Controller 的 Index-Action-Node 中的可见性设置；我把它放在那里，如果我选择了“HomeSub”-Link，Home-Node 就不会在面包屑中出现两次。**

**第三件事：是否有更好的方法来确定是否选择了当前节点（在非常具体的情况下，选择了“Home”，因为它也是“Home”的子节点？我在那里添加了一个检查控制器和操作相等，因为 IsCurrentNode 似乎比较了节点拥有的键和不幸的是不同的键。**

我知道这听起来像是一个模糊的问题，但我不想在这里开始讨论我想知道这是否是一种好的方式（或者什么是更好/更容易阅读的方式）以及是否有人可以向我解释那些菜单调用以及为什么我必须按照我所做的那样设置可见性来完成这项工作。

如果你想摆弄这个，你可以[在这里](http://www.xup.in/dl,48759239/SiteMapSample2.zip/)下载这个“完整的”示例项目（Visual Studio 2012）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T13:59:50.840

所以这个问题现在已经有一段时间没有答案了。

使用上述菜单结构设置网站并运行一段时间后，我会`YES`回答最初的问题，即这是否是设置两级网站导航的有效方法。

然而，对于子问题，我还没有找到更令人满意的答案。（即确定当前节点以与所选节点进行比较并澄清`@Html.MvcSiteMap.Menu`-calls。）

# php - 从数组中获取单个值

> ID：15659399
> 
> 赞同：0
> 
> 时间：2013-03-27T12:57:40.907
> 
> 标签：php, arrays

我有以下数组结果

```
Array ( [0] => Item Object ( [name:protected] => My Super Cool Toy [price:protected] =>      10.99 ) ) 
```

我需要`[name:protected] => My Super Cool Toy`从这个数组中获取。

请告诉我如何获得它，

我将在下面粘贴我的课程

```
class ShoppingCart
{
private $items = array();
private $n_items = 0;
function addItem( Item $item )
{
$this->items[] = $item;
$this->n_items = $this->n_items + 1;
print_r($this->items);

}
} 
```

和

```
class Item {
protected $name;
protected $price;

 public function __construct($name, $price) {
    $this->name = $name;
    $this->price = $price;
}

public function getName() {
    echo "item is $this->name";
    return $this->name;
}

public function getPrice() {
    return $this->price;
}

} 
```

和

```
require_once('AddingMachine.php');
require_once('item.php');
//$arrayofnumbers = array(100,200);

$objectname = new ShoppingCart();
$objectname->addItem(new Item('My Super Cool Toy', 10.99));

 $obname = new Item($items,44);
$obname->getName(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:05:48.517

如果我猜对了，你在 ShoppingCart 类的 addItem 方法中得到了这个数组，所以要访问它，你只需使用相应的 getter 方法，例如：

```
$this->items[0]->getName(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:15:18.967

你可以试试 ：

```
$objectname = new ShoppingCart();
$objectname->addItem(new Item('My Super Cool Toy', 10.99));

foreach ( $objectname->getItems() as $item ) {
    echo $item->getName(), PHP_EOL;
} 
```

修改类

```
class ShoppingCart {
    private $items = array();
    private $n_items = 0;

    function addItem(Item $item) {
        $this->items[] = $item;
        $this->n_items = $this->n_items + 1;
    }

    function getItems($n = null) {
        return $n === null ? $this->items : (isset($this->items[$n]) ?  : $this->items[$n]);
    }
} 
```

# javascript - 将日期范围转换为包含所有日期的数组

> ID：15659402
> 
> 赞同：2
> 
> 时间：2013-03-27T12:57:45.517
> 
> 标签：javascript, datetime

我有一个问题。

我有一组数据范围：

```
var range_date_off=['31/03/2013','03/04/2013']; 
```

我需要将其转换为：

```
var dates_off=['31/03/2013','01/04/2013','02/04/2013','03/04/2013']; 
```

我开始用循环来做，但是当月份跳到另一个月份时，问题就变成了，知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:06:46.420

我在[`date.js`](http://www.datejs.com/)这里使用：

```
range = ['31/03/2013','03/04/2013']

begin = Date.parseExact(range[0], 'dd/MM/yyyy')
end   = Date.parseExact(range[1], 'dd/MM/yyyy')

dates = []

while(begin <= end) {
    dates.push(begin.toString("dd/MM/yyyy"))
    begin.addDays(1)
} 
```

结果：

```
["31/03/2013", "01/04/2013", "02/04/2013", "03/04/2013"] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:27:41.180

这是使用 regx 解析日期

```
var range_date_off=['31/03/2013','03/04/2013'];
var d1 = parseDate(range_date_off[0])
var d2= parseDate(range_date_off[1])

var days= [];
for (var dt = d1; dt <= d2; dt.setDate(dt.getDate() + 1)) {
    var fdt = new Date(dt)
    days.push ( fdt.getDate() + "/" + (fdt.getMonth() + 1) + "/" + fdt.getFullYear());
}

function parseDate(input) {
  var parts = input.match(/(\d+)/g);
  return new Date(parts[2], parts[1]-1, parts[0]); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:15:52.937

您可以使用 UTC 算法来做到这一点：

```
var start = Date.UTC(2013, 2, 31);
var end = Date.UTC(2013, 3, 3);
var currDate = start;
var dates = [];
while (currDate <= end) {
    var d = new Date(currDate);
    dates.push((d.getDate() + "/" + (d.getMonth() + 1) + "/" + d.getFullYear()));
   currDate += (1000 * 60 * 60 * 24);
} 
```

注意，javascript 月份从 0 开始！

[http://jsfiddle.net/hKxzw/](http://jsfiddle.net/hKxzw/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T13:04:16.243

月份检查 .... 如果月份 = [1,3,5,6,7,8,10,12] 不得大于 31 天，依此类推 ....

# ember.js - Ember 数据、关系、属性输出

> ID：15659404
> 
> 赞同：2
> 
> 时间：2013-03-27T12:57:46.557
> 
> 标签：ember.js, ember-data

我有两个带有夹具数据的实体：`User`和`Role`. 当我加载一个`User`时，它包含一个`Role`。我想显示角色的名称。以下是相关代码：

```
App.User = DS.Model.extend({
    name: DS.attr('string'),
    role: DS.belongsTo('App.Role'),
});

App.Role = DS.Model.extend({
    name: DS.attr('string'),
});
App.User.FIXTURES = [{
id:1,
name:'user',
role:1
}];
App.Role.FIXTURES = [{
id:1,
name:'reader',
}]

App.UsersRoute = Ember.Route.extend({
 model: function() {
  return App.User.find();
 }
});

 <script type="text/x-handlebars" data-template-name="users">
           {{#each controller}}
              {{name}} {{role.name}}
           {{/each}}
 </script> 
```

不显示角色的名称，但如果我将其更改`{{role.id}}`为角色的 ID，则会显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:17:57.817

我想你可能需要添加

`users: DS.hasMany('App.User')`

到你的`Role`模型的定义。

# c# - 如何在文本框中显示字符串数组

> ID：15659409
> 
> 赞同：3
> 
> 时间：2013-03-27T12:57:57.863
> 
> 标签：c#, winforms, textbox

嗨，我是 C# 新手，我的第一个 Windows 窗体应用程序有问题。

我有来自串行端口的数据，并制定了一种处理数据并将其存储到 3 个不同字符串数组中的方法。我无法解决的是如何将数组中的数据显示到它们自己的单独文本框中，我只想显示当前索引位置指向的数组中的数据。

我的 Windows 窗体设计中有 3 个文本框，它们已经命名为： ，我想显示变量 ，并`textBoxmag`在 它们相应`textBoxlat`的文本框中。`textBoxlon``string[] mag``string[] lat``string[] lon`

请帮助我，尽管对于更有经验的 C# 程序员来说这似乎很简单，但我仍然坚持这一点。下面是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        string RxString;// where the raw serial data is stored
        string[] mag = new string[1000];//where magnetic data is stored 
        string[] lat = new string[1000];//where latidude data is stored
        string[] lon = new string[1000];///where longitude data is stored 
        string ends = "\r\n";//end of data sentence identifier
        string starts = "G";//start of data sentence identifier

        int i; //index lat data 
        int j;//index lon data
        int k;//index mag data

        public Form1()
        {
            InitializeComponent();
        }

        private void buttonStart_Click(object sender, EventArgs e)
        {
            serialPort1.PortName = "COM5";//define sierial port in which PIC is connected to
            serialPort1.BaudRate = 4800;//set baud rate to match PIC

            serialPort1.Open();
            if (serialPort1.IsOpen)//if the port is open you can press the start button
            {
                buttonStart.Enabled = false;//start button disbaled
                buttonStop.Enabled = true;//stop button enabled
                textBox1.ReadOnly = false;//allow writing in text box
            }
        }

        private void buttondtop_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.Close();
                buttonStart.Enabled = true;
                buttonStop.Enabled = false;
                textBox1.ReadOnly = true;
            }
        }

        private void DisplayText(object sender, EventArgs e)
        {
            textBox1.AppendText(RxString);//add watever is in raw data string to what is already in text box

        }

        private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)//activates when port is open and data in buffer
        {
            RxString = serialPort1.ReadExisting();//read raw data from serial port into string
            this.Invoke(new EventHandler(DisplayText));//invoke allows it to call function diplay text

            if (RxString.StartsWith(starts))//if the string starts with "G"
            {
                if ((RxString.Length > 36))//if there is aleast one string sentence
                {
                    if (RxString.EndsWith(ends))// if the string ends with "\r\n" process the string
                        serialPort1.Close();//close serial port 
                    lat[i] = RxString.Split(',')[0].Substring(4);// extract latitude store in string array
                    i++;//increment index of latitude data array
                    lon[j] = RxString.Split(',')[2];// extract longitude store in string array
                    j++;//increment index of longitude data array
                    mag[k] = RxString.Split(',')[3].Substring(7).Trim();// extract magnetic data store in string array
                    k++;//increment index of magnteric data array
                    RxString = null;//Reset raw data string
                    serialPort1.Open();//open serial port ready for new string sentence
                }
            }
            else RxString = null;// if the raw data string sentence does not start with "G" reset the array
           }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (serialPort1.IsOpen) serialPort1.Close();
        }

        private void labellat_Click(object sender, EventArgs e)
        {

        }

        private void label3_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T13:03:40.480

您需要将`string[]`s 转换为`string`s。您可以使用以下[`string.Join()`方法](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)轻松完成此操作：

```
string separator = ", ";
string[] mag = new string[] { "hello", "world" };

textBoxmag.Text = string.Join(separator, mag);
// textBoxmag.Text == "hello, world"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T13:06:26.047

这会将字符串数组显示为逗号分隔值：

```
string strLat = String.Join(", ", lat);
string strLon = String.Join(", ", lon);

textBoxlat.Text = strLat;
textBoxlon.Text = strLon; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:04:49.500

我不知道这是否是最好的方法，但这里有一种[方法](http://www.dotnetperls.com/convert-string-array-string)可以实现它。

# sql-server - 奇怪的 SQL Server 全文匹配

> ID：15659416
> 
> 赞同：2
> 
> 时间：2013-03-27T12:58:24.147
> 
> 标签：sql-server, full-text-search, full-text-indexing

我在 SQL Server 2008 R2 中偶然发现了奇怪的全文索引行为（我的断字语言是德语）。

我有这个文本索引：

`[...] Java Editorerstellung in Eclipse eines Modellierungseditors(UML) mit den Eclipse Technologien [...]`

我三重检查：*edi*一词的唯一出现是在这段简短的文本中，我只能在*Editorerstellung* und *Modellierungseditors*中找到它。

但是 SQL Server 在它的全文索引中仍然将*edi*作为一个单词（出现次数：1），因此在`ContainsTable(...)`搜索时返回它。为什么它被识别为一个单词？

有人对这种行为有解释吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T18:11:42.637

[德语复合词](http://german.about.com/od/nounsandcases/a/German-Compound-Words.htm)需要在自然语言分词器中进行特殊解析。例如，“Editorerstellung”被解析并存储为三个单独的术语，“editor”、“erstellung”和“editorerstellung”。已经对[分析德语复合词](http://hum.uchicago.edu/jagoldsm/Papers/GermanCompounds.pdf)进行了广泛的研究，虽然技术正在改进，但过程并不完美。

您看到的行为很可能是由于在断词器中使用了启发式方法。我无法使用上述代码段和 Sql Server 2012 分词器重现您的问题，因此微软在 Sql Server 2008 R2 和 Sql Server 2012 之间对德语分词器的改进解决了该问题，或者您未包含的某些文本是全文索引中“edi”的来源。

您可以使用 sys.dm_fts_index_keywords_by_document() 查看索引中有哪些术语。使用二进制搜索模式，您应该能够将其缩小到生成“edi”术语的特定文本。

# javascript - 防止来自 Google 索引的 URL 形成 JavaScript 数组

> ID：15659419
> 
> 赞同：1
> 
> 时间：2013-03-27T12:58:29.577
> 
> 标签：javascript, url, indexing, nofollow

我的网站上有一些广告。此广告是图像，未封闭在`<a>`标签中。我将广告 URL 存储在 JS 数组`advertisement`中。当用户点击广告时，执行下一个 JS 代码：

```
 $(".jLinkBlank").click(function() {
        var adverId = parseInt($(this).attr('id').substring(5));
        var url = advertisement[adverId];
        window.open(url, '_blank');
    }); 
```

但正如我看到的那样，谷歌无论如何都会将这些 URL 编入索引。如何防止此类 URL 被 Google 索引？

喜欢`robots.txt`或`<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">`不可接受的解决方案，因为 URL 列表是动态的，并且我在页面上有其他 URL，必须由 Google 编制索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:01:11.833

您可以尝试在 base64 中编码您的 uri，并在将它们添加到页面时对其进行解码：

您可以使用 btoa 解码 base 64 字符串，使用 atob 进行编码。

```
$(".jLinkBlank").click(function() {
     var adverId = parseInt($(this).attr('id').substring(5));
    var url = btoa(advertisement[adverId];)
    window.open(url, '_blank');
}); 
```

# sql - Codeigniter：从sql到activerecord，有什么问题？

> ID：15659420
> 
> 赞同：0
> 
> 时间：2013-03-27T12:58:34.133
> 
> 标签：sql, codeigniter, activerecord

我想尝试将我的sql代码更改为活动记录，这是原始代码和活动记录尝试。和错误信息。请告诉我我的错在哪里？谢谢。

```
SELECT `emlakilan`.`id`, `emlakdurum`.`durum`,`emlaktip`.`tip`,`semtler`.`semt`,`emlakilan`.`fiyat`,`emlakilan`.`tarih`,`resim`.`r1` FROM ucburcak.`emlakilan`
INNER JOIN `semtler` ON `emlakilan`.`semtId` = `semtler`.`semtid`
INNER JOIN `emlaktip` ON `emlakilan`.`emlakTipId` = `emlaktip`.`id`
INNER JOIN `emlakdurum` ON `emlakilan`.`emlakDurumId` =`emlakdurum`.`id`
LEFT JOIN `resim` ON `emlakilan`.`resimId` = `resim`.`id`
WHERE `emlakdurumId`=3 ORDER BY `emlakilan`.`id` DESC LIMIT 4; 
```

//这里还有活动记录功能

```
public function kucuk_ilan($durum ='3') // $durum:1=>tümü 2=>kiralık 3=>satılık 4=>takas
    {
            $query = $this->db->select('emlakilan.id, emlakdurum.durum, emlaktip.tip, semtler.semt, emlakilan.fiyat, emlakilan.tarih, resim.r1')
                              ->from('emlakilan')
                              ->join('semtler','emlakilan.semtId' === 'semtler.semtid','inner')
                              ->join('emlaktip','emlakilan.emlakTipId'==='emlaktip.id','inner')
                              ->join('emlakdurum','emlakilan.emlakDurumId'==='emlakdurum.id','inner')
                              ->join('resim','emlakilan.resimId'==='resim.id','left')
                              ->where('emlakdurumId'===$durum)
                              ->order_by('emlakilan.id','desc')
                              ->limit(4);
            $query = $this->db->get('emlakilan');

            return $query->result_array();
    } 
```

并且，错误信息：

错误号：1066

不是唯一的表/别名：'emlakilan'

选择`emlakilan`。`id`, `emlakdurum`. `durum`, `emlaktip`. `tip`, `semtler`. `semt`, `emlakilan`. `fiyat`, `emlakilan`. `tarih`, `resim`. `r1`FROM ( `emlakilan`, `emlakilan`) INNER JOIN `semtler`ON INNER JOIN `emlaktip`ON INNER JOIN `emlakdurum`ON LEFT JOIN `resim`ON WHERE `0`IS NULL ORDER BY `emlakilan`。`id`描述限制 4

文件名：C:\Program Files\EasyPHP-12.1\www\3burcak\system\database\DB_driver.php

行号：330

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:05:49.800

所以 1\. 删除 'from' 行 2\. 错误的连接

尝试这个：

```
public function kucuk_ilan($durum ='3') // $durum:1=>tümü 2=>kiralık 3=>satılık 4=>takas
{
        $query = $this->db->select('emlakilan.id, emlakdurum.durum, emlaktip.tip, semtler.semt, emlakilan.fiyat, emlakilan.tarih, resim.r1')
                          ->from('emlakilan')
                          ->join('semtler','emlakilan.semtId = semtler.semtid','inner')
                          ->join('emlaktip','emlakilan.emlakTipId = emlaktip.id','inner')
                          ->join('emlakdurum','emlakilan.emlakDurumId = emlakdurum.id','inner')
                          ->join('resim','emlakilan.resimId = resim.id','left')
                          ->where('emlakdurumId', $durum)
                          ->order_by('emlakilan.id','desc')
                          ->limit(4);
        $query = $this->db->get('emlakilan');

        return $query->result_array();
} 
```

# javascript - 通过 javascript 检索 xhtml 空标签的行为很奇怪

> ID：15659422
> 
> 赞同：0
> 
> 时间：2013-03-27T12:58:37.653
> 
> 标签：javascript, xhtml, tags

我有一个包含以下代码段的 xhtml 页面

```
<div id="content">
    <br/>
</div> 
```

该页面已正确设置文档类型

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
```

问题是：当我使用 javascript 检索 div 元素的 innerHTML

```
document.getElementById("content").innerHTML 
```

它返回“<br>”而不是预期的“<br/>”。对这种行为有什么解释吗？

[jsFiddle](http://jsfiddle.net/PNekd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:01:50.637

浏览器使用 Content-Type 而不是 Doctype 声明来确定它们是否应该在 HTML 或 XHTML 模式下运行。如果服务器说，`text/html`那么浏览器将不会将文档视为 XML。Doctype 仅用于在 Quirks/Standards 模式之间切换。

在 HTML 模式下，`innerHTML`会给你一个将 DOM 序列化为 HTML，而不是 XHTML。

# asp.net - 更改 URL 大小写时 IIS 7 Web App 失去身份验证

> ID：15659429
> 
> 赞同：3
> 
> 时间：2013-03-27T12:59:01.693
> 
> 标签：asp.net, iis-7

我们的 Web 应用程序出现了奇怪的行为。如果我在使用应用程序进行身份验证后将 URL 更改为大写或其中的一部分，则必须重新进行身份验证。这是一个例子：

[https://host.domain.com/website/asp](https://host.domain.com/website/asp)

如果我在验证后将该 URL 复制并粘贴到新选项卡中，它将自动进行验证并将我带到登录页面。但是，如果我将其粘贴到新选项卡中，而另一个选项卡已经过身份验证：

[https://host.domain.com/webSITE/asp](https://host.domain.com/webSITE/asp)

我必须使用该应用程序重新进行身份验证。（或IIS，我不确定）

当在没有考虑案例的情况下开发对象时，这会带来一个问题，我认为这种行为是不可取的。我将与应用程序供应商联系，但我想知道是否有人遇到过 IIS 7 的此类问题。

谢谢，马克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:47:54.140

IIS 通常不区分大小写。灵敏度发挥作用的地方在于集成模块。像 rewrite 这样的模块可以区分大小写。您没有指定，但您的 IIS 应用程序是否使用重写？此外，您的供应商可能有正在执行区分大小写检查的控制器。但我的猜测是真正的浏览器才是罪魁祸首。基于 URL 路径的 cookie 的浏览器可以使这些 cookie 区分大小写。有关报告相同问题的用户的更多信息，请参阅此[链接。](http://social.msdn.microsoft.com/Forums/en-US/Geneva/thread/b5715cbe-6db0-4f59-a26e-f26d2c90ef26)

# excel - 如何使用 selection.find 在 excel 表的列中搜索值？

> ID：15659449
> 
> 赞同：1
> 
> 时间：2013-03-27T13:00:13.850
> 
> 标签：excel, vba, search

我想在 Excel 工作表的特定列中搜索一个值，然后插入一个新行。与第一列一样，搜索“application 1”，然后在“applicationone”之后添加一行。

```
Application Program Variable    
Application_1   Program1    
Application_1   Program1    
Application_1   Program1    
Application_2   Program1    
Application_2   Program1 
```

我正在尝试使用以下代码进行搜索：

```
.Activate 
.Columns("B:B").Select

     Selection.Find(What:="Application_1", After:=ActiveCell, LookIn:=xlValues, _
        LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
        MatchCase:=False).Activate 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:30:24.347

你的代码看起来不错

之后插入一个新行，你可以

```
ActiveCell.Offset(1).EntireRow.Insert 
```

接着

```
ActiveCell.Offset(1).Value="What ever you want" 
```

# vb.net - 在 vb.net 中获取 Lotus Notes 窗口的位置 (x,y) 、宽度和长度

> ID：15659452
> 
> 赞同：0
> 
> 时间：2013-03-27T13:00:24.873
> 
> 标签：vb.net, user-interface, lotus-notes

我正在尝试从 vb.net 应用程序获取 Lotus Notes 应用程序窗口的起始位置 (x,y)、宽度和长度。

到目前为止，我已经尝试过使用`Process`这个技巧，但是在 Windows 运行进程列表中找到好的进程后，我无法弄清楚要使用什么。使用或查看 UI 的唯一“有用”的东西是`Process.MainWindowTitle`. 它确实给出了我的笔记窗口的标题，但正如我所说，我想要坐标、宽度和长度。

我还尝试使用后端类：COM 对象`lotus`和`domino` 但其中没有必要的东西来满足我的需求。

我还需要窗口的状态，比如

*   `SHOWNORMAL`*   `HIDE`*   `RESTORE`*   `SHOWMAXIMIZED`*   `SHOWMINIMIZED`*   ...

**编辑**

我想获取窗口的位置来修改我的应用程序的位置。我还想调整和修改 Notes 客户端的位置。我的目标是让我的应用程序和 Notes 客户端都适合屏幕。

任何帮助都非常受欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:23:35.250

几年前我使用 Windows API 做了类似的事情。现在，我没有关于这方面的示例，但我所做的是：从 Lotus Notes 窗口获取处理程序，然后从嵌入式视图获取处理程序，并模拟单击事件以在其中设置焦点。

您可以使用 WinAPI，但这不一定是最好的方法。正如 Karl-Henry Martinsson 所说，您应该考虑其他替代方案。

# delphi - 检查是否每个人都可以读/写目录

> ID：15659455
> 
> 赞同：1
> 
> 时间：2013-03-27T13:00:37.217
> 
> 标签：delphi, acl

我们面临的问题是，不同的用户组应该能够从一个公共数据目录（例如 c:\ProgramData\xyz）读取和写入文件。

数据是从不同的来源写入的，例如，服务将文件写入其中，用户以后应该能够更改其内容。

现在的问题是，这仅在允许“每个人”读取/写入/更改该目录（和子目录）中的文件时才有效。

我想在安装程序中检查的是是否所有用户都被允许这样做。检查“每个用户”组（或德语中的“Jeder”组）是否在访问列表中。我只有关于 ACL 的基本知识，可以在资源管理器中更改它，但我需要几行代码将我推向正确的方向（在 Delphi 中）。

非常感谢迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:25:01.103

我认为这不是 Delphi 而是 WinAPI 问题。Delphi 没有任何特殊的设施来使这更容易 AFAIK。

[从 ACL 获取信息](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446659%28v=vs.85%29.aspx)表示您需要在打开的句柄上执行[GetSecurityInfo ，然后在获得的 ACL 上执行](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446654%28v=vs.85%29.aspx)[GetEffectiveRightsFromACL](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446637%28v=vs.85%29.aspx)。

您指定一个[受托人](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379636%28v=vs.85%29.aspx)，它可以是名称，但最好使用 SID。“每个人”的名称可以更改，但它有一个特殊的 SID，它在任何 PC 上都有效，谷歌它。好的，这里是：“（S-1-1-0）”。或者您可以使用[CreateWellKnownSid](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446585%28v=vs.85%29.aspx)并给它[WinWorldSid](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379650%28v=vs.85%29.aspx)以获得相同的 SID（更合适但更长的方式）。

所有这些都来自五分钟的谷歌搜索，因此请注意错误。

好的，这里有一些代码。

```
function ConvertStringSidToSid(StringSid: PWideChar; var Sid: PSID): boolean; stdcall; external advapi32 name 'ConvertStringSidToSidW';

function AclGetEffectiveRights(const path, sid: string): cardinal;
var h: THandle; //handle to our directory
  err: integer;
  dacl: PACL; //access control list for the object
  secdesc: pointer;
  tr: TRUSTEE;
  bsid: PSid;
begin
  Result := 0;
 //Open directory
  h := CreateFile(PChar(path), GENERIC_READ, FILE_SHARE_READ, nil,
    OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL or FILE_FLAG_BACKUP_SEMANTICS, 0);
    //we need FILE_FLAG_BACKUP_SEMANTICS to open a directory
  if h=INVALID_HANDLE_VALUE then RaiseLastOsError();
  try

    bsid := nil;
   //Query access control list for a directory -- the list you see in the properties box
    err := GetSecurityInfo(h, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION,
      nil, nil, @dacl, nil, secdesc);
      //GetSecurityInfo can return many things but we only need DACL,
      //and we are required to also get a security descriptor
    if err<>ERROR_SUCCESS then
      raise Exception.CreateFmt('Cannot retrieve DACL: error %d',[err]);
    try
     //Convert string sid to binary sid
      if not ConvertStringSidToSid(PChar(sid), bsid) then
        RaiseLastOsError();

     //Query effective rights for a trustee
      BuildTrusteeWithSid(@tr, bsid);
      err := GetEffectiveRightsFromAcl(dacl^, tr, Result);
      if err<>ERROR_SUCCESS then
        raise Exception.CreateFmt('Cannot calculate effective rights: error %d',[err]);
    finally
     //Documentation says to free some resources this way when we're done with it.
      LocalFree(NativeUint(bsid));
      LocalFree(NativeUint(secdesc));
    end;
  finally
    CloseHandle(h);
  end;
end; 
```

它是这样使用的：

```
var rights,test: cardinal;
rights := AclGetEffectiveRights('C:\My\Folder','S-1-1-0');
//List rights you want tested
test := FILE_LIST_DIRECTORY + FILE_ADD_FILE + FILE_ADD_SUBDIRECTORY
  + FILE_READ_EA + FILE_WRITE_EA + FILE_TRAVERSE + FILE_DELETE_CHILD;
Result := (rights and test) = test; 
```

可能行不通；在我的 PC 上给出 ACCESS_DENIED 但这可能是因为我的[域情况复杂](https://stackoverflow.com/questions/364096/getting-access-denied-with-geteffectiverightsfromacl)。无论如何，这是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T10:10:08.263

所以.. 上面的版本工作......直到 Windows Update 1903 击中我并且 GetEffectiveRightsFromAcl 总是导致错误 ERROR_NO_SUCH_DOMAIN （这是模糊的，因为这里没有涉及任何域）。所以我需要切换到以下程序：

```
// ###########################################
// ### translated and extended from https://docs.microsoft.com/de-de/windows/win32/api/aclapi/nf-aclapi-geteffectiverightsfromacla

procedure DisplayAccessMask(Mask : ACCESS_MASK );
begin
{
      // This evaluation of the ACCESS_MASK is an example. 
      // Applications should evaluate the ACCESS_MASK as necessary.

}
   if (((Mask and GENERIC_ALL) = GENERIC_ALL)
      or ((Mask and FILE_ALL_ACCESS) = FILE_ALL_ACCESS)) 
   then
   begin
        OutputDebugString( 'Full control');
        exit;
   end;

   if (((Mask and GENERIC_READ) = GENERIC_READ)
      or ((Mask and FILE_GENERIC_READ) = FILE_GENERIC_READ)) 
   then
       OutputDebugString( 'Read');

   if (((Mask and GENERIC_WRITE) = GENERIC_WRITE)
      or ((Mask and FILE_GENERIC_WRITE) = FILE_GENERIC_WRITE))
   then
         OutputDebugString('Write');

   if (((Mask and GENERIC_EXECUTE) = GENERIC_EXECUTE)
      or ((Mask and FILE_GENERIC_EXECUTE) = FILE_GENERIC_EXECUTE))
   then
       OutputDebugString('Execute');

end;

function CheckMask( MASK : ACCESS_MASK; refMask : ACCESS_MASK ) : boolean;
var msk : ACCESS_MASK;
begin
     msk := 0;

     if (((Mask and GENERIC_READ) = GENERIC_READ)
      or ((Mask and FILE_GENERIC_READ) = FILE_GENERIC_READ)) 
     then
         msk := msk or FILE_GENERIC_READ;

   if (((Mask and GENERIC_WRITE) = GENERIC_WRITE)
      or ((Mask and FILE_GENERIC_WRITE) = FILE_GENERIC_WRITE))
   then
       msk := msk or FILE_GENERIC_WRITE;

   if (((Mask and GENERIC_EXECUTE) = GENERIC_EXECUTE)
      or ((Mask and FILE_GENERIC_EXECUTE) = FILE_GENERIC_EXECUTE))
   then
       msk := msk or FILE_GENERIC_EXECUTE;

   Result := (msk and refMask) = refMask;
end;

function GetAccess(hAuthzClient :AUTHZ_CLIENT_CONTEXT_HANDLE; psd : PSECURITY_DESCRIPTOR) : BOOL;
var AccessRequest : AUTHZ_ACCESS_REQUEST;
    AccessReply : AUTHZ_ACCESS_REPLY;
    buffer : Array[0..1023] of Byte;
begin
     FillChar(AccessRequest, sizeof(AccessRequest), 0);
     FillChar(AccessReply, sizeof(AccessReply), 0);
     FillChar(buffer, sizeof(buffer), 0);

     AccessRequest.DesiredAccess := MAXIMUM_ALLOWED;
     AccessRequest.PrincipalSelfSid := nil;
     AccessRequest.ObjectTypeList := nil;
     AccessRequest.ObjectTypeListLength := 0;
     AccessRequest.OptionalArguments := nil;

     AccessReply.ResultListLength := 1;
     AccessReply.GrantedAccessMask := PACCESS_MASK( LongWord(@Buffer[0])); 
     AccessReply.Error := PDWORD( LongWord( AccessReply.GrantedAccessMask ) + sizeof(Access_Mask));

     Result := AuthzAccessCheck( 0,
                          hAuthzClient,
                          @AccessRequest,
                          0,
                          psd,
                          nil,
                          0,
                          @AccessReply,
                          nil);

     if Result then
     begin
          DisplayAccessMask( AccessReply.GrantedAccessMask^ );
          Result := CheckMask( AccessReply.GrantedAccessMask^, FILE_GENERIC_WRITE or FILE_GENERIC_READ );
     end
     else
         RaiseLastOSError;
end;

function ConvertStringSidToSid(StringSid: PWideChar; var Sid: PSID): boolean; stdcall; external advapi32 name 'ConvertStringSidToSidW';

function ConvertNameToBinarySid(pAccountName : PCHAR): PSID ;
var pDomainName : PChar;
    dwDomainNameSize : DWord;
    aSID : PSID;
    dwSIDSIZE : DWORD;
    sidType : SID_NAME_USE;
begin
     pDomainName := nil;
     dwDomainNameSize := 0;
     aSID := nil;

     LookupAccountName( nil, pAccountName, aSID, dwSIDSIZE, pDomainName, dwDomainNameSize, sidType);
     aSid := Pointer( LocalAlloc( LPTR, dwSIDSIZE*sizeof(char)) );
     pDomainName := Pointer( LocalAlloc(LPTR, dwDomainNameSize*sizeof(char)) );
     if not LookupAccountName( nil, pAccountName, aSID, dwSIDSIZE, pDomainName, dwDomainNameSize, sidType) then
     begin
          LocalFree( Cardinal(aSID) );
          Result := nil;
     end
     else
     begin
          Result := aSid;
     end;

     LocalFree( Cardinal(pDomainName) );
end;

function GetEffectiveRightsForSID(hManager :AUTHZ_RESOURCE_MANAGER_HANDLE;
                                   psd : PSECURITY_DESCRIPTOR; 
                                   sid : PChar) : BOOL;
var asid : PSID;
    bResult : BOOL;
    unusedID : LUID;
    hAuthzClientContext : AUTHZ_CLIENT_CONTEXT_HANDLE;
begin
     Result := False;
     asid := nil;
     hAuthzClientContext := 0;
     FillChar(unusedID, sizeof(unusedID), 0);

     if not ConvertStringSidToSid(sid, asid) then
        RaiseLastOsError();
//     asid := ConvertNameToBinarySid('rabatscher');

     if asid = nil then
        RaiseLastOSError;
     try
        if asid <> nil then
        begin
             bResult := AuthzInitializeContextFromSid( 0, aSid, hManager, nil, unusedId, nil, @hAuthzClientContext );
             try
                if bResult then
                   Result := GetAccess(hAuthzClientContext, psd);
             finally
                    if hAuthzClientContext <> 0 then
                       AuthzFreeContext(hAuthzClientContext);
             end;
        end;
     finally
            if asid <> nil then
               LocalFree(LongWord(asid));
     end;
end;

function UseAuthzSolution( psd : PSECURITY_DESCRIPTOR; const sid : string = 'S-1-1-0') : boolean;
var hManager : AUTHZ_RESOURCE_MANAGER_HANDLE;
    bResult : BOOL;
    pSid : PChar;
begin
     bResult := AuthzInitializeResourceManager(AUTHZ_RM_FLAG_NO_AUDIT,
                nil, nil, nil, nil, @hManager);
     if bResult then
     begin
          pSid := PChar(sid);
          bResult := GetEffectiveRightsForSID(hManager, psd, psid);
          AuthzFreeResourceManager(hManager);
     end;

     Result := bResult;
end;

function GetSecurityInfo(handle: THandle; ObjectType: SE_OBJECT_TYPE;
         SecurityInfo: SECURITY_INFORMATION; ppsidOwner, ppsidGroup: PPSID; ppDacl, ppSacl: PACL;
         var pSecurityDescriptor: PSECURITY_DESCRIPTOR): DWORD; stdcall; external 'ADVAPI32.DLL' name 'GetSecurityInfo'; {use localfree to release ppSecurityDescriptor}

function CheckDirectoryAccess( path : string ) : boolean;
var dw : DWORD;
    apacl : PACL;
    psd : PSECURITY_DESCRIPTOR;
    apSID : PSID;
    h : THandle;    
begin
     try
        apSID := nil;

        //Open directory
        h := CreateFile(PChar(path), GENERIC_READ, FILE_SHARE_READ, nil,
                     OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL or FILE_FLAG_BACKUP_SEMANTICS, 0);

        //we need FILE_FLAG_BACKUP_SEMANTICS to open a directory
        if h = INVALID_HANDLE_VALUE then 
           RaiseLastOsError();
        try
           //Query access control list for a directory -- the list you see in the properties box
           dw := GetSecurityInfo(h, SE_FILE_OBJECT, DACL_SECURITY_INFORMATION or OWNER_SECURITY_INFORMATION or GROUP_SECURITY_INFORMATION,
                                  nil, nil, @apacl, nil, psd);

           if dw <> ERROR_SUCCESS then
              RaiseLastOSError;

           try
              Result := UseAuthzSolution(psd);
           finally
                  if apSID <> nil then
                     LocalFree(NativeUint(apSID));

                  LocalFree(NativeUint(psd));
           end;
        finally
               CloseHandle(h);
        end;
     except
           on E : Exception do
           begin
                Result := False;
           end;
     end;
end; 
```

请注意，有一些更改，因此该过程有效：GetSecurityInfo（来自上述过程）需要参数 DACL_SECURITY_INFORMATION 或 OWNER_SECURITY_INFORMATION 或 GROUP_SECURITY_INFORMATION（不仅是 DACL_SECURITY_INFORMATION），否则您会在 AuthzAccessCheck 中收到错误 87！

此外，您需要查看 jedi 库中的 JWA 标头。

希望对其他人也有帮助。

# ruby-on-rails - 动态路由不渲染

> ID：15659456
> 
> 赞同：0
> 
> 时间：2013-03-27T13:00:39.627
> 
> 标签：ruby-on-rails, ruby, routing

所以，我有一个命名路线：

```
match 'ip/get/:ip' => 'ip_addresses#show', :via => :get 
```

如您所见，我希望 ip（在“get”之后）是动态的，但是当我尝试它时，我不断收到路由错误。这是我的路线：

```
 root        /                     ip_addresses#index
ip_add POST   /ip/add(.:format)     ip_addresses#create
       GET    /ip/add(.:format)     ip_addresses#new
ip_all GET    /ip/all(.:format)     ip_addresses#index
       GET    /ip/get/:ip(.:format) ip_addresses#show
       DELETE /ip/all(.:format)     ip_addresses#destroy 
```

这是我的`show`行动：

```
def show
  IpAddress.find(params[:id])
end 
```

编辑：路由错误：

```
ActionController::RoutingError (No route matches [GET] "/ip/get/1.2.3.4"): 
```

我已经阅读了 Rails Routing from the Outside In Guide ( [http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html) ) 但我自然可能忽略了一些东西。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:17:27.280

您的问题的答案在于您提供的文章。

看一下部分：

> 默认情况下，动态段不接受点——这是因为点被用作格式化路线的分隔符。如果您需要在动态段中使用点，请添加一个覆盖它的约束 - 例如**:id => /[^/]+/**允许除斜杠之外的任何内容。

看看那里的例子：

```
match ':controller(/:action(/:id))', :controller => /admin\/[^\/]+/ 
```

所以在你的例子中，我相信它会是：

```
match 'ip/get/:ip' => 'ip_addresses#show', :id => /[^/]+/ , :via => :get 
```

并更改`params[:id]`为`params[:ip]`

# matlab - Cuda/Matlab 中的 Gpuarray

> ID：15659460
> 
> 赞同：2
> 
> 时间：2013-03-27T13:01:02.653
> 
> 标签：matlab, cuda, gpu

我想知道是否有办法优化 matlab 函数`gather`。我正在开发一个具有非常大矩阵的 Cuda 代码，我注意到`gather`我必须用来取回我的 GPU 数据的函数非常慢。对于 2^13x2^8 矩阵，大约需要 3 秒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:21:35.550

The performance of `gpuArray.gather` is limited by your PCI bus. You can optimise this only by gathering less data (e.g. using indexing). Note that in more recent versions of Parallel Computing Toolbox, many of the operations are asynchronous, but `gather` is not - so perhaps you are simply seeing the time for the asynchronous requests to complete. You can check using `wait(gpuDevice)` to synchronize the device.

# xcode - 未找到构建项目 Prefix.pch.dia 时的 XCode clang 错误

> ID：15659461
> 
> 赞同：2
> 
> 时间：2013-03-27T13:01:02.830
> 
> 标签：xcode, macos, clang

在 Mac OSX Mountain Lion 上的 XCode 中编译项目时出现该错误

`clang: error: no such file or directory: '/Users/bartg/Library/Developer/Xcode/DerivedData/storeq-osx-gifnhelgkswbtpdzwjxydyudncxu/Build/Intermediates/PrecompiledHeaders/storeq-osx-Prefix-dskqrphwleosxlcoaimwmmhoneea/storeq-osx-Prefix.pch.dia'`

我花了很多时间在网上搜索并没有找到解决方案。有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:25:56.910

如果您使用的是 CocoaPods 0.18.0，这可能是由 CocoaPods 引起的，并且已在[https://github.com/CocoaPods/CocoaPods/issues/956中修复](https://github.com/CocoaPods/CocoaPods/issues/956)

# c# - try catch 的行为，最后在 c# 中使用 return 语句工作流

> ID：15659467
> 
> 赞同：2
> 
> 时间：2013-03-27T13:01:24.493
> 
> 标签：c#, .net, exception, try-catch, finally

我对这个 try, catch 和最后的 return 语句工作流程毫无疑问......

此功能用于检索员工休假信息以供主管查看。它工作得很好，但是如果找到了 if 语句的数据，它将被返回，否则 else 块将被返回。即使两者都得到回报，它也会最终声明。我不知道为什么？

这里的代码片段：

```
List<Leave> ILeaveData.GetLeaveForSupervisorView(int userID)
{
    SqlConnection con = new SqlConnection(_connectionString);
    SqlCommand cmd = new SqlCommand("Storeprocedurename", con);
    cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.Add(new SqlParameter("@Id", SqlDbType.Int));
    cmd.Parameters["@Id"].Value = userID;

    // Get employee leave information

    try
    {
        con.Open();
        DataSet ds = new DataSet();
        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand = cmd;
        adapter.Fill(ds);

        if (ds.Tables[0].Rows.Count > 0)
        {
            List<Leave> leave = new List<Leave>();
            for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
            {
                leave.Add(CreateLeaveForAdminViewFromDataRow(ds.Tables[0].Rows[i]));
            }
            return leave; // if data found then statement return here
        }
        else
        {
            return null; // otherwise return here
            // throw new Exception("Data Error");
         }
      }
      catch (SqlException err)
      {
          IErrorLog elog = new ErrorLog(_connectionString);
          elog.LogSystemError(err);
          throw new ApplicationException("Data Error", (Exception)err);
      }
      finally
      {
          if (con != null)
          {
              con.Close();
          }
       }
   } 
```

关于萨尔瓦

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T13:02:54.040

finally 语句总是被执行，即使没有异常发生。

[http://msdn.microsoft.com/en-gb/library/zwc8s4fz(v=vs.110).aspx](http://msdn.microsoft.com/en-gb/library/zwc8s4fz(v=vs.110).aspx)：

> 通常，finally 块的语句在控制离开 try 语句时运行。控制的转移可能是正常执行、**break、continue、goto 或 return**语句的执行，或者异常从 try 语句中传播出来的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:03:03.237

`finally`块被设计为始终执行，无论是否抛出异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:04:51.860

最终块将在所有情况下执行。

# json - Sinatra：关于 404 错误的过滤器、停止和正文

> ID：15659468
> 
> 赞同：4
> 
> 时间：2013-03-27T13:01:25.233
> 
> 标签：json, http, sinatra

我正在使用 Sinatra 开发这个 JSON API。按照我的设计方式，错误消息也以特定格式以 JSON 格式传递。唯一的区别是它们的响应将具有 4xx 状态代码而不是 2xx 或 3xx。现在，我遇到的问题：

*   我定义了一个通用过滤器，我在其中设置了响应内容类型。像这样：

    ```
    before { content_type :json } 
    ```

    问题是，每次我调用停止时，都没有考虑到这个设置。我必须以一种非常丑陋、更冗长且容易出错的方式自己在停止调用中设置它：

    ```
    halt [404, {"Content-Type" => "application/json;charset=utf-8"}] 
    ```

    还有另一种方法吗？

*   最让我困扰的问题是：当我在捕获 404 错误（见下文）、JSON 内容类型和 json 正文后停止代码 404 时，奇怪的是，我没有得到任何正文，浏览器和 curl 都没有得到它。怎么来的？

    ```
    error 404 do
      halt [404...{"bang" => "bong"....}]
    end 
    ```

更新

关于最后一个问题，这是使用 curl 并触发将落入 404 错误块的调用时发生的情况：

```
curl http://faulty_url

# curl log:
curl: (52) Empty reply from server

# sinatra log:
!! Unexpected error while processing request: Content-Length header was 221, but should be 227
127.0.0.1 - - [28/Mar/2013 11:28:47] "GET / HTTP/1.1" 404 221 0.0664 
```

也许这有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:29:06.583

我可能不明白究竟是什么输出，但如果你想覆盖 404 你将不得不做类似下面的事情，而不是`error 404 do`

```
not_found do
    # Set content
    {"bang" => "bong"}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T06:29:07.627

您使用的是哪个版本的 Sinatra？查看 Sinatra 最近的更改日志，我看到 1.4.x 版本中的两个条目似乎可能相关：

*   当在前过滤器或路由中使用停止时，状态、标题和正文将在后过滤器中正确设置。（康斯坦丁·哈斯）

*   在错误处理程序中将状态代码设置为 404 不再触发 not_found 处理程序。（康斯坦丁·哈斯）

# .net - 使用任务并行库发送邮件会引发错误

> ID：15659471
> 
> 赞同：2
> 
> 时间：2013-03-27T13:01:35.473
> 
> 标签：.net, task-parallel-library, c#-5.0

代码：-

```
List<Task> tasks = new List<Task>();
foreach (var item in arr)//arr contains 1000+ mailids
            {
                tasks.Add(Task.Factory.StartNew(() =>
                {
                    using (MailMessage msg = new MailMessage())
                        {
                            msg=getmsg();//p-shadow code no erorr here
                            SmtpClient smtp = new SmtpClient();
                            smtp.Host = smtpServer;
                            smtp.Port = smtpPort;
                            smtp.EnableSsl = isSmtpSsl != 0 ? true : false;
                            smtp.Credentials = new NetworkCredential(smtpUName,smtpPass);
                            smtp.Timeout = int.MaxValue;
                            smtp.Send(msg);//---throws error....
                            //sql code to insert db that mail is send
                        }
                }, TaskCreationOptions.LongRunning));
            }
            Task.WaitAll(tasks.ToArray<Task>()); 
```

错误-“发送邮件失败。”

内部错误-“无法从传输连接读取数据：net_io_connectionclosed。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:40:13.333

关于异常“net_io_connectionclosed”，请查看此链接，因为它可能会为您指明连接关闭原因的正确方向。可能是身份验证问题，防火墙等。

[为 System.Net 启用跟踪](http://blogs.msdn.com/b/feroze_daud/archive/2005/05/12/416922.aspx)

请在下面找到我将在您的情况下使用的代码，而不是生成 1000 个效率不高的任务。

[使用 Tasks Parallel.ForEach 发送批量电子邮件](http://talkdotnet.wordpress.com/2014/03/20/sending-bulk-emails-with-tasks-parallel-foreach/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:57:15.080

正如吉姆所提到的，您可能只是遇到了节流/拒绝的情况。恕我直言，您可能会更成功：1）使用单个 SmtpClient 而不是其中的 N 个（因此单个客户端可以根据需要在内部进行序列化）和 2）使用内置异步调用（[SendMailAsync](http://msdn.microsoft.com/en-us/library/hh193996.aspx)）而不是StartNew 并调用同步版本。

就像是：

```
var messages = ... // get collection of MailMessage instances
var smtpClient = new SmtpClient { ... }; // construct a single SmtpClient
var tasks = messages.Select(smtpClient.SendMailAsync).ToArray();
Task.WaitAll(tasks); 
```

不过，我不确定这是否真的会有很大帮助 - 如果它仍然失败，您可能只需要制作一个长时间运行的任务来串行发送电子邮件。

# c# - 在 C# 中通过批处理文件运行 exe 时出现空异常，但在手动单击批处理时不会出现

> ID：15659473
> 
> 赞同：0
> 
> 时间：2013-03-27T13:01:42.843
> 
> 标签：c#, batch-file

我们有一个为我们构建的第 3 方 exe。它读取 word 文档并将它们转换为 XML，以便我们可以处理它们。

我们有一个单击时运行良好的批处理文件。它只是遍历我们 doc 文件夹中的所有文档并将参数传递给 WordExtract.exe：

```
for %%a in (MyPATH\*.doc) do WordExtract.exe -InputFile="%%a" -TempFile0="%%a.html" -OutputFile= "%%a.xml" 
```

但是，当我们尝试在 C# 代码中调用它时，它会为我们提供 WordExtract.exe 的空引用异常

```
System.NullReferenceException was unhandled
  Message=Object reference not set to an instance of an object.
  Source=WordExtract
  StackTrace:
       at WordExtract.Converter.word2text(FileInfo file, FileInfo txtfile)
       at WordExtract.Program.Main(String[] args)
  InnerException: 
```

所以它调用批处理文件很好。我只是不确定为什么当我手动运行批处理文件时不会产生错误，但是在以编程方式运行时会出现空异常。

当尝试手动和以编程方式在命令提示符下运行 exe 时，我也得到了相同的结果。手动完成时工作正常，以编程方式运行时出现上述错误。

对此有什么想法吗？无论哪种方式，运行批处理文件都应该产生相同的结果。它根本不需要任何输入，所以我不能以编程方式搞砸。

这是运行我的批处理文件的代码：

```
Process proc = new Process();
            string targetDir = string.Format(@"C:\BatchTest");//this is where batch.bat is
            proc.StartInfo.WorkingDirectory = targetDir;
            proc.StartInfo.FileName = "batch.bat";
            proc.StartInfo.CreateNoWindow = false;
            proc.Start();
            proc.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:50:32.807

您需要执行的文件是“CMD.exe”，您要运行的批处理文件是您的参数：-

```
System.Diagnostics.Process.Start("cmd", "/c C:\\BatchTest\\batch.bat"); 
```

# css - 添加 margin-left:10px 后文本被推离屏幕；

> ID：15659474
> 
> 赞同：0
> 
> 时间：2013-03-27T13:01:46.827
> 
> 标签：css, text, padding

当我想让我的文本在“块”标签右半部分的左侧距左侧 10 像素处开始时，会发生一些奇怪的事情。当我`margin-left: 10px;`突然添加时，我的所有文字都消失了。任何想法是什么原因造成的？我该如何解决这个问题？

HTML：

```
<div id="container">
    <div class="part">
        <div class="part halfleft">
            <p>
                <img alt="" src="src.png" style="width: 469px; height: 371px; " /></p>
        </div>
        <div class="part halfright">
            <h7> Title!</h7>
            <p>
                Sentence 1</p>
            <p>
                Sentence 2</p>
            <p>
                Sentence 3</p>
        </div>
    </div>
</div> 
```

CSS：

```
#container {
    margin-bottom: 60px;
}
    /*….*/
    #container h7 {
        text-align: left;
        width: 100%;
        padding-bottom: 15px;
        margin-bottom: 35px;    
        font-size: 30px;        
    }
    #container .part {
        width: 960px;
        height: 475px;
        background-color: #fff;
        float: left;
        text-align: left;   
    }   
    #container .part.halfleft {
        width: 480px;
        float: left;
        font-size: 16px;    
    }
    #container .part.halfright {
        width: 480px;
        float: left;
        padding-top: 30px;
        /*margin-left: 10px; or padding-left: 10px; pushes text off screen*/
        font-size: 16px;        
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:06:35.867

发生这种情况是因为您的元素是浮动的，并且由于额外的 10px，它们不能并排放置在容器 div 中。

一个简单的解决方法是从浮动 div 之一中删除 10px 或从两者中删除 5px。

```
#container .part.halfright {
        width: 470px;
        float: left;
        padding-top: 30px;
        margin-left: 10px;
        font-size: 16px;        
} 
```

**>[小提琴](http://jsfiddle.net/kzDwA/)<**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:06:27.843

您正在为父元素提供固定宽度并将 float 属性分配给子元素。

在这里，您正确地在子元素之间分割父元素的宽度，现在如果您向子元素添加 margin-left 或 margin-right （或填充），那么该子元素将下降。

所以，你可以在这里做两件事

*   减小子元素的宽度（基于添加的边距/填充）或
*   在您的额外边距属性中进行调整。( **+1-1 = 0** )

像这样的东西，

如果你给`margin-left:10px;`那么也给`margin-right:-10px`。这将保持平衡并且不会影响布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:09:42.443

您的**CSS**中有：

```
#container .part.halfright {
    width: 480px;
    float: left;
    padding-top: 30px;
    /*margin-left: 10px; or padding-left: 10px; pushes text off screen*/
    font-size: 16px;        
}; 
```

**Width:480px** + **margin-left/padding-left:10px** = **490px** -> 容器需要比 480px 更多的**空间**。

所以，放`width:470px`。

或者穿上`#container .part` `width:970px;`。

或`#container .part.halfright` `width:470px`。

等等...

[JSF](http://jsfiddle.net/t7bZz/1/)中。

# c# - 如何创建一个按钮，该按钮将根据其中的文本数量增加其宽度？

> ID：15659475
> 
> 赞同：1
> 
> 时间：2013-03-27T13:01:48.707
> 
> 标签：c#, wpf, button

我有一个带有按钮的 WPF 窗口。我希望按钮根据其文本增加或减少宽度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:06:00.910

只需将`Width`属性设置为`Auto`并给出一个 Horizo​​ntalAlignment ( `Center`,`Right`或`Left`)，因为它的默认值为`Stretch`，这会导致*填充*其容器。

这是一个关于它如何工作的例子：

**代码**

```
<Window x:Class="StackOverflow.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <Button Content="A Default Button"/>
        <Button Content="An Auto Width Button" 
                Width="Auto" 
                HorizontalAlignment="Center" 
                Grid.Column="1"/>
        <Button Content="An Auto Width and Height Button" 
                Width="Auto" Height="Auto" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center" 
                Grid.Column="0" Grid.Row="1"/>
    </Grid>
</Window> 
```

**输出**

![在此处输入图像描述](../Images/7c1838825ebab4423165985771a63e8f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:09:46.740

如果你没有为你的按钮设置一个固定的宽度，它已经将它的宽度适应它的内容。

# c# - 创建 Json X,Y 结构

> ID：15659481
> 
> 赞同：0
> 
> 时间：2013-03-27T13:02:02.197
> 
> 标签：c#, .net, json

我正在尝试创建以下结构：

```
"chartData": [
                    {
                        label: "Your group",
                        data: [
                            [-2, 10],
                            [2, 20],
                            [-1, 11],
                            [-1, -12],
                            [-1, 5]
                        ],
                        info: [
                            {
                                id: "a1"
                            },
                            {
                                id: "b1"
                            },
                            {
                                id: "c1"
                            },
                            {
                                id: "d1"
                            },
                            {
                                id: "e1"
                            }
                        ]
                    }, 
```

除了数据部分，一切都很好。如果我创建一个类来表示每个数据点，例如 X 的属性和 Y 的属性，那么创建的 JSON 将如下所示：

```
 "chartData": [
                        {
                            label: "Your group",
                            data: [
                                {X=-2, Y=10},
                                {X=-5, Y=17},
                                {X=-1, Y=13},
                                {X=-8, Y=8},
                                {X=-5, Y=13}
                            ],
                            info: [
                                {
                                    id: "a1"
                                },
                                {
                                    id: "b1"
                                },
                                {
                                    id: "c1"
                                },
                                {
                                    id: "d1"
                                },
                                {
                                    id: "e1"
                                } 
```

将数据类型定义为 double[,] 也不会创建相同的格式。我需要坚持这种格式，因为它应外部供应商的要求，数据看起来像这样。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:06:27.970

您的坐标对必须是`int`or的数组`double`。

```
class ChartData {
    string label;
    int[][] data;
    Info[] info;
} 
```

`data`应该像这样初始化：

```
var cd = new ChartData();
cd.data = new int[100][]; 
```

而且，每个点都应该是这样的：

```
cd.data[0] = new[] { 1, 1 };
cd.data[1] = new[] { -10, 50};
//etc 
```

# actionscript-3 - ActionScript 3 鼠标移动事件未调度

> ID：15659486
> 
> 赞同：1
> 
> 时间：2013-03-27T13:02:31.637
> 
> 标签：actionscript-3, mouseevent

脚本问题是每个movieclip 向下和向上调度鼠标事件，但鼠标移动事件没有被某些movieclip 调度，这是一个意外的行为，而我已经跟踪了down 事件并且它成功地跟踪了每个对象

还推荐您对我的代码的反馈，谢谢。

```
 private function loadPurchasedClip(){
            var decorationItem:String;
            var lastItemIndex:uint = this.getChildIndex(tree1);
            var item:Sprite;

            for(var a in purchasedItems){

                for(var b in purchasedItems[a]){

                if(purchasedItems[a][b].item=='shed'){
                    item = new shed();
                } else {

                    var ClassDefinition:Class = loadedDecorationItem.purchaseItem(purchasedItems[a][b].item) as Class;

                    item = new ClassDefinition();

                }
                item.x = purchasedItems[a][b].posX;
                item.y = purchasedItems[a][b].posY;

                item.addEventListener(MouseEvent.MOUSE_DOWN,function(e:MouseEvent){
                        Mouse.cursor = "hand";
                        e.target.startDrag(false);

                        dusbin.visible = true;
                    item.addEventListener(MouseEvent.MOUSE_MOVE,trashMe);
                });

                item.addEventListener(MouseEvent.MOUSE_UP,function(e:MouseEvent){

                    Mouse.cursor = "auto";
                    e.target.stopDrag();
                    externalPhpCall(e);
                    dusbin.visible = false;
                    if(trashClip){
                        removeChild(trashClip);
                        trashClip = null;
                    }
                });
                item.mouseChildren = false;

                // if item is fence or flowers then move them behind the tree
                if(
                    String(purchasedItems[a][b].item).indexOf('fence')!=-1
                    ||
                    String(purchasedItems[a][b].item).indexOf('flower')!=-1
                ){
                    addChildAt(item,lastItemIndex);

                    lastItemIndex++;
                } else {
                    addChildAt(item,this.numChildren-2);
                }

                purchasedNameAr[getChildIndex(item)] = purchasedItems[a][b].item;

            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:46:08.557

不能确定，但​​我认为您可能希望剪辑继续调度 MouseEvent.MOUSE_MOVE 事件，即使鼠标离开剪辑 - 这不会发生，只有当本地鼠标指针共同时 -纵坐标（即 yourClip.mouseX/mouseY）与将触发的剪辑本身的图形相交 - 即使在拖动剪辑时，也不能保证它会调度 MOVE 事件。

假设您的剪辑都在根目录上，这意味着您可以访问“舞台” - 您可以这样做：

代替：

```
item.addEventListener(MouseEvent.MOUSE_MOVE,mouseMove); 
```

和：

```
stage.addEventListener(MouseEvent.MOUSE_MOVE,mouseMove); 
```

...但是您应该记住在必要时删除该事件（再次使用阶段，以防鼠标未在剪辑上释放）：

```
 stage.addEventListener(MouseEvent.MOUSE_UP,endMove);

//Don't use anon function as won't have stage reference:

function endMove(e:MouseEvent):void {
        //The rest of your code, then:
        stage.removeEventListener(MouseEvent.MOUSE_MOVE,mouseMove);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:11:52.480

```
 private  function loadPurchasedClip(){
        var decorationItem:String;
        var lastItemIndex:uint = this.getChildIndex(tree1);
        var item:Sprite;
        var Move:Boolean

        for(var a in purchasedItems){

            for(var b in purchasedItems[a]){

            if(purchasedItems[a][b].item=='shed'){
                item = new shed();
            } else {

                var ClassDefinition:Class = loadedDecorationItem.purchaseItem(purchasedItems[a][b].item) as Class;

                item = new ClassDefinition();

            }
            item.x = purchasedItems[a][b].posX;
            item.y = purchasedItems[a][b].posY;
            item.addEventListener(e:Event.ENTER_FRAME, onEnterFrame);
            item.addEventListener(MouseEvent.MOUSE_DOWN,function(e:MouseEvent){
                    Mouse.cursor = "hand";
                    e.target.startDrag(false);
                    Move = true
                    dusbin.visible = true;

            });

            item.addEventListener(MouseEvent.MOUSE_UP,function(e:MouseEvent){

                Mouse.cursor = "auto";
                e.target.stopDrag();
                externalPhpCall(e);
                dusbin.visible = false;
                if(trashClip){
                    removeChild(trashClip);
                    trashClip = null;
                }
            });
            item.mouseChildren = false;

            // if item is fence or flowers then move them behind the tree
            if(
                String(purchasedItems[a][b].item).indexOf('fence')!=-1
                ||
                String(purchasedItems[a][b].item).indexOf('flower')!=-1
            ){
                addChildAt(item,lastItemIndex);

                lastItemIndex++;
            } else {
                addChildAt(item,this.numChildren-2);
            }

            purchasedNameAr[getChildIndex(item)] = purchasedItems[a][b].item;

        }
        function onEnterFrame(e:Event):void{
         if(Move){
        // what ever here

        {

    } 
```

# c# - 如何使用包管理器控制台为控制台 c# 应用程序安装 clrzmq？

> ID：15659491
> 
> 赞同：1
> 
> 时间：2013-03-27T13:02:45.020
> 
> 标签：c#, .net, clr, zeromq, package-managers

**场景：**一旦 Node.js 服务器有 ZeroMQ 拉监听`tcp://127.0.0.1:2202`。并且数据必须由 C# 控制台应用程序发送。

**问题：**
[示例参考](https://github.com/zeromq/clrzmq#example-client)

```
using System;
using System.Text;
using ZMQ;

namespace ZMQGuide
{
    class Program
    {
        static void Main(string[] args)
        {
            // ZMQ Context and client socket
            using (ZmqContext context = ZmqContext.Create())
            using (ZmqSocket client = context.CreateSocket(SocketType.PUSH))
            {
                client.Connect("tcp://127.0.0.1:2202");

                string request = "Hello";
                for (int requestNum = 0; requestNum < 10; requestNum++)
                {
                    Console.WriteLine("Sending request {0}...", requestNum);
                    client.Send(request, Encoding.Unicode);

                    string reply = client.Receive(Encoding.Unicode);
                    Console.WriteLine("Received reply {0}: {1}", requestNum, reply);
                }
            }
        }
    }
} 
```

是给出以下错误：

```
Error   1   The type or namespace name 'ZmqContext' could not be found (are you missing a using directive or an assembly reference?)    D:\..\Program.cs    26  24  PROJECTA 
```

**信息：**我尝试使用包管理器控制台安装最新版本，方法是`PM> Install-Package clrzmq` 在命令后发出命令输出：

```
'clrzmq 2.2.5' already installed.
Successfully added 'clrzmq 2.2.5' to PROJECTA. 
```

**问题：**谁能告诉我，我哪里出错了或者我错过了什么？

* * *

**更新：**我已经[下载](https://github.com/zeromq/clrzmq/downloads)并尝试过，但没有运气:-)

提前感谢您的大力帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T06:22:38.057

我可以重现你的问题。我认为这可能是因为文档有点过时了，但这似乎是为我构建的：

```
using ZMQ;

namespace TestConsole 
{
    class Program
    {
        static void Main(string[] args)
        {
            // ZMQ Context and client socket
            using (Context context = new Context())
            using (Socket client = context.Socket(SocketType.PUSH))
            {
                client.Connect("tcp://127.0.0.1:2202");

                string request = "Hello";
                for (int requestNum = 0; requestNum < 10; requestNum++)
                {
                    Console.WriteLine("Sending request {0}...", requestNum);
                    client.Send(request, Encoding.Unicode);

                    string reply = client.Recv(Encoding.Unicode);
                    Console.WriteLine("Received reply {0}: {1}", requestNum, reply);
                }
            }
        }
    }
} 
```

我没有 ZeroMQ 或任何运行来实际检查它是否工作的东西，但也许你可以试一试？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-08T18:00:09.237

根据我的经验，要获得 clrzmq (ZeroMQ) 的最新版本 (3.0)，我需要在 Package Manager 调用中添加“-Version”选项，如下所示：

下午>`Install-Package clrzmq -Version 3.0.0-rc1`

此外，当使用 3.0 时，“使用”是 ZeroMQ 而不是 ZMQ：

`using ZeroMQ;`

# jquery - GAEJ 上的 Twitter 引导时间选择器

> ID：15659492
> 
> 赞同：0
> 
> 时间：2013-03-27T13:02:45.277
> 
> 标签：jquery, google-app-engine, twitter-bootstrap, timepicker

我正在 Google App Engine Java 上开发一个网络应用程序，并且在我的 JSP 上使用 Twitter Bootstrap。

我想在我的表单上使用时间选择器，特别是[这个](http://jdewit.github.com/bootstrap-timepicker/)。是否可以通过简单的包含依赖项来使用它？

```
<link type="text/css" href="../css/bootstrap-timepicker.min.css" />
<script type="text/javascript" src="../js/bootstrap-timepicker.min.js"></script>
<script type="text/javascript" src="../js/jquery.autotype.js"></script>, and of course,query and bootstrap, but it does not work...

<div class="input-append bootstrap-timepicker">
<input id="timepicker1" type="text" class="input-small">
<span class="add-on"><i class="icon-time"></i></span>
</div>

<script type="text/javascript">
$('#timepicker1').timepicker();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:14:45.687

确保所有这 3 个文件都在您的[war 目录](https://developers.google.com/appengine/docs/java/gettingstarted/staticfiles)中，并且您可以直接从浏览器访问它们。一旦你有了它，那么你应该指向正确的路径，它应该看起来像这样：

```
<link type="text/css" href="/bootstrap-timepicker.min.css" />
<script type="text/javascript" src="/bootstrap-timepicker.min.js"></script>
<script type="text/javascript" src="/jquery.autotype.js"></script> 
```

如果您决定将它们放在单独的目录中，则在路径中包含相应的目录名称。

# iphone - 如何在不调用的情况下将整数从控制器设置到子视图

> ID：15659501
> 
> 赞同：-6
> 
> 时间：2013-03-27T13:03:09.797
> 
> 标签：iphone, ios, objective-c

我想将计数的 int 值从我的主控制器设置为数据单元控制器文件。我现在不想调用那个数据单元控制器文件我想稍后调用那个数据单元 M 控制器文件，但是我想从我的主控制器文件中设置计数整数，这样当我调用我的数据单元文件时它需要计数整数我从我的主控制器设置并使用它。

我的 dataViewController.m

```
- (void)viewDidLoad {
[super viewDidLoad];

UIView *backgroundCoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
backgroundCoverView.backgroundColor = [UIColor colorWithWhite:0.0 alpha:0.6];
toggleSwitch1 = [UIButton buttonWithType:UIButtonTypeCustom];
toggleSwitch2 = [UIButton buttonWithType:UIButtonTypeCustom];

[self.view addSubview:backgroundCoverView];

// Add the 6 buttons and columns.
NSMutableArray *columnsMutable = [NSMutableArray arrayWithCapacity:6];
NSMutableArray *buttonsMutable = [NSMutableArray arrayWithCapacity:6];
for (int i=0; i<6; i++) {

    DataCell* app = (DataCell*)[[UIApplication sharedApplication] delegate];
    [app MysetValue:6];

    DataColumn *column = [[DataColumn alloc] initWithFrame:CGRectMake(86+i*124+(i>=3?100:0), 230, 110, 382)];
    column.cellsVisible = NO;
    if (i>0) {
        column.hidden = YES;
    }
    [self.view addSubview:column];
    [columnsMutable addObject:column]; 
```

//我正在调用dataColumn，它是SubView类，从那个dataColumn子视图类我调用数据单元类将单元格填充到列中

```
- (id)initWithFrame:(CGRect)frame {
self = [super initWithFrame:frame];
if (self) {

    //self.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"mixBackgroundTile.png"]];
    // this commented line is used to display dotted background in percentage slider bar 

    // Add cells.
    NSMutableArray *mutableCells = [NSMutableArray arrayWithCapacity:5];
    for (int i=4; i>=0; i--) {
        DataCell *cell = [[DataCell alloc] initWithFrame:CGRectMake(100, i*(74+3), 109, 74)]; // data order fix
         //VSLDataCell *cell = [[VSLDataCell alloc] initWithFrame:CGRectMake(-90, i*(74+3), 109, 74)]; for left hand side cell

        [mutableCells addObject:cell];
        [self addSubview:cell];
    }
    cells = [NSArray arrayWithArray:mutableCells];  
}
return self;
 } 
```

现在在数据单元类中，我想根据单元格号和列号分配不同的图像，所以我想知道我现在是哪一列

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:14:22.783

几个想法：

1.  您编写了一个方法，`MysetValue`这有点多余。当您合成您的`columNumber`属性时，它会为您编写一个 setter 方法，`setColumNumber`它会为您执行此操作。如果不需要，请不要编写自己的 setter。

2.  如果你有一个属性，`columNumber`你已经在你的 .h 中定义，并在你的 .m 中合成`AppDelegate`（或者任何你称之为应用委托类的东西），你现在可以通过以下方式设置这个属性：

    ```
    AppDelegate* app = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    [app setColumNumber:6]; 
    ```

    或等效地，

    ```
    AppDelegate* app = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    app.columNumber = 6; 
    ```

3.  `DataCell`但是，根据您明确的答案，您的课程*不是*应用程序委托课程。显然这是一些`UIView`基础类。您可以为此类定义自定义属性`DataCell`，但不能通过`[UIApplication sharedApplication]`. 您显然将这些`DataCell`对象保存在一个名为`cells`. 因此，如果您想设置第一个单元格的`columNumber`属性，您可以执行以下操作：

    ```
    DataCell *cell = cells[0];
    [cell setColumNumber:6]; 
    ```

4.  当我第一次阅读这个问题时，我以为您关注的是类之间关于属性更改值的通信，KVO 对此很有用。但这是一个更高级的话题，我们现在不应该担心这一点。这只会导致新开发人员的困惑。

    ~~顺便说一句，使用自动生成的 setter 方法的优点之一是它自动符合键值观察 (KVO)。（如果您编写自己的 setter，也可以进行必要的编码以支持 KVO，但这里没有理由这样做；使用标准 setter。）请参阅[Key-Value Observing Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)。归根结底，一个类可以将自己注册为另一个类的属性变化的观察者。~~

* * *

如果您想查看如何使用属性的示例，请考虑以下视图子类：

细节视图.h：

```
#import <UIKit/UIKit.h>

// public interfaces belong here

@interface DetailView : UIView

@property (nonatomic, readonly) NSInteger columnNumber; // column number set during initialization
@property (nonatomic)           NSInteger tapCount;     // a count of how many times we tapped on this

- (id)initWithColumnNumber:(NSInteger)column;           // interface for creating DetailView

@end 
```

详细视图.m：

```
#import "DetailView.h"

@implementation DetailView

const CGFloat kWidth = 40.0f;
const CGFloat kMargin = 5.0f;
const CGFloat kHeight = 300.0f;

// create view, set column number, set frame according to column number

- (id)initWithColumnNumber:(NSInteger)column
{
    CGRect frame = CGRectMake(kMargin + column * (kWidth + kMargin), kMargin, kWidth, kHeight);
    self = [super initWithFrame:frame];
    if (self) {
        _columnNumber = column;
        _tapCount = 0;
        self.backgroundColor = [UIColor grayColor];
    }
    return self;
}

@end 
```

然后我可以编写一个视图控制器来添加这些视图，但是当你点击一个时，它会`NSLog`为我们提供列号并告诉我们我们点击了多少次：

```
#import "ViewController.h"
#import "DetailView.h"

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    for (NSInteger column = 0; column < 5; column++)
    {
        DetailView *detailView = [[DetailView alloc] initWithColumnNumber:column];
        [self.view addSubview:detailView];

        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                                              action:@selector(handleTap:)];
        [detailView addGestureRecognizer:tap];
    }
}

- (void)handleTap:(UITapGestureRecognizer *)gesture
{
    DetailView *detailView = (id)gesture.view;
    NSAssert([detailView isKindOfClass:[DetailView class]], @"%s: Not a DetailView: %@", __FUNCTION__, detailView);

    detailView.tapCount++;

    NSLog(@"%s: column number = %d; tapped %d times", __FUNCTION__, detailView.columnNumber, detailView.tapCount);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:08:54.653

`MysetValue`如果您想`AppDelegate`使用 appDelegate 调用它，请移至

```
AppDelegate* appdelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
[appdelegate MysetValue:6]; 
```

# mysql - 查询：has_many，其中所有子字段均为 nil

> ID：15659503
> 
> 赞同：1
> 
> 时间：2013-03-27T13:03:13.420
> 
> 标签：mysql, sql, ruby-on-rails, ruby, activerecord

我正在使用带有 ActiveRecord 和 MySQL 的 Rails 3.2，并且我有具有一对多关联的模型：

```
class Author
  has_many :books
end

class Book
  belongs_to :author
  attr_accessible :review
end 
```

我想找到**所有**书籍都没有评论的作者。我试过了：

```
Author.includes(:books).where('book.review IS NIL') 
```

但显然没有用，因为它会找到**至少有一**本书没有评论的作者。我应该使用什么查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:36:40.143

SQL 非常简单：

```
SELECT authors.name, count(books.review is not null) 
FROM authors LEFT JOIN books ON (authors.id=books.author_id) 
GROUP BY authors.name
HAVING count(books.review) == 0 
```

将其翻译成 AR 查询语言可能需要一些时间……好吧，看起来像这样：

```
Author.count('books.review', joins: :books, select: 'name', 
              group:'name', having: 'count_books_review=0') 
```

对我来说，SQL 看起来不那么奇怪了 ;-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T14:38:51.263

根据 WRz 的回答，我准备了自己的查询：

```
Author.joins(:books).group('authors.id').having("count(books.reviews)=0") 
```

它更适合我，因为它返回一个 AR 关系（而 WRz 的查询返回一个哈希）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:25:28.293

尝试这个

```
Author.joins(:books).where('books.review is null') 
```

编辑：这将获取至少一本书没有评论的所有作者。我刚刚意识到你的问题有点不同。

会是这样的。

```
Authors.joins(:books).select('authors.*, count(books.id) as
total_books, count('books.review is null')
as books_without_review.group('authors.id').having(total_books ==
books_without_review) 
```

PS：这不是确切的语法，未经测试

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T13:17:18.793

试试下面的代码。

```
class Author
  has_many :books
end

class Book
  belongs_to :author
  attr_accessible :review
end

authors = Author.all.collect do |author|
            if author.books.where(:review => nil).size == author.books.size
              author
            end
          end

authors.compact! 
```

在此代码之后，作者将是一个数组，其中包含所有未审阅书籍的作者。另请注意，我将`Book`模型中的作者关联更改为`belongs_to`而不是`has_one`. `has_many`一方面有关系，另一方面有关联总是一个好习惯`belongs_to`。

# sql - 避免完全重新同步 Azure 的 SQL 数据同步

> ID：15659504
> 
> 赞同：0
> 
> 时间：2013-03-27T13:03:15.273
> 
> 标签：sql, azure, azure-sql-database

据我了解，如果您在超过 40 天的时间里出现未解决的同步错误，Azure 的 SQL 数据同步会强制您重新上传整个数据库，以使服务再次运行。

我想知道是否有办法避免这种情况，因为我的互联网速度很慢，完全重新同步需要半周才能完成。有没有办法让系统认为错误在 40 天内不存在，并在错误得到纠正后恢复差异备份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:54:36.910

不幸的是，这是正确的。请参阅 MSDN 主题[http://msdn.microsoft.com/en-us/library/hh667321.aspx#bkmk_databaseoutofdatestatus](http://msdn.microsoft.com/en-us/library/hh667321.aspx#bkmk_databaseoutofdatestatus)（对于过期数据库）和[http://msdn.microsoft.com/en-us/ library/hh667321.aspx#bkmk_sgoutofdatestatus](http://msdn.microsoft.com/en-us/library/hh667321.aspx#bkmk_sgoutofdatestatus)（用于过期同步组）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T22:58:13.317

如果它是一个过期的数据库，您最好先删除该数据库，然后重新创建它，但不要让它没有数据，然后将空数据库添加到您的同步组中。如果您只是删除然后将填充的数据库重新添加到同步组，则在第一次同步时，数据同步会将*每一行*视为需要解决的冲突（即使行中的数据未更改），这会增加很多初始同步的时间（也可能会增加成本）。请参阅主题[http://msdn.microsoft.com/en-us/library/hh667328.aspx#InitialSync](http://msdn.microsoft.com/en-us/library/hh667328.aspx#InitialSync)。

# c# - 将 Guid 覆盖到字符串

> ID：15659505
> 
> 赞同：0
> 
> 时间：2013-03-27T13:03:16.633
> 
> 标签：c#, linq, entity-framework, ef-code-first, guid

我正在创建一个应用程序，我想尝试使用 GUID。我首先使用实体​​框架代码和 LINQ，所以我认为最简单的方法是使用

```
string guid = Guid.NewGuid().ToString();
var acc = new v_Account();   
acc.v_AcctGuid = guid; 
```

然后将我的 GUID 作为类型字符串存储在我的数据库中。这是一个不好的做法吗？GUID 真的只是一个全局唯一的随机生成的字符串吗？

我很确定它会起作用，但我只是不想面对未来的问题或通过这样做来制造漏洞。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T13:07:47.110

GUID 作为一种`uniqueidentifier`类型直接映射到 MSSQL 数据库。所以没有必要对其进行字符串化。

直接使用即可：

```
acc.v_AcctGuid = Guid.NewGuid(); 
```

假设：

```
public class Account
{
    public Guid v_AcctGuid { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:08:29.603

如果您的目标数据库不支持 GUID（`SQLite`例如），那么可以将其存储为字符串，然后将它们作为 GUID 公开给业务层，对屏蔽了 GUID 类型的属性的 getter 和 setter 进行必要的转换实体的字符串属性。

# clojure - 在 Clojure 和 ClojureScript 中创建和使用库

> ID：15659507
> 
> 赞同：12
> 
> 时间：2013-03-27T13:03:18.977
> 
> 标签：clojure, clojurescript

我刚刚编写了一些 ClojureScript 代码，却发现我无法访问我`project.clj`的依赖项中列出的库之一。这是正确的吗，即您不能使用 CLJS 中的 Clojure 库，除非它们是专门为允许使用而设计的？

如果是这样，需要多少额外的工作来获取一个不使用任何 Java 互操作的 Clojure 库，并且它本身就是有效的 ClojureScript 代码，并使其可以从 ClojureScript 中使用？环顾 GitHub，许多库似乎都有单独的 clj 和 cljs 代码源目录。可以将这样的库添加到我的`project.clj`并立即从任一平台使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T15:26:28.710

[ClojureScript与 Clojure](https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure)有一些区别。

“project.clj”中的依赖项*可以*被 ClojureScript 应用/可见/可用，例如，看看“ [jayq](https://github.com/ibdknox/jayq) ”。您可以将其包含在“project.clj”中：

```
(defproject xyz/xyz "0.1.0-SNAPSHOT"
  :dependencies [[clj-time "0.4.3"]
                 [jayq "2.2.0"]
                  .... 
```

然后在 ClojureScript 文件中使用它：

```
(ns xyz.some.cljs
  (:require ...
            ...
            [clojure.browser.repl :as repl]
            [jayq.core :as jq]) 
```

虽然“jayq”不是“后端”意义上的“Clojure”库，因为它只是包装了 JavaScript，但它是在 ClojureScript 端使用“project.clj”依赖项的一个示例。

此外，大部分核心库和几个非核心库已经移植到 ClojureScript 端：

*   clojure.set
*   clojure.string
*   clojure.walk
*   clojure.zip
*   clojure.core.reducers
*   fold 目前是 reduce 的别名
*   核心匹配
*   核心逻辑（在作品中）

其他 Clojure 库必须符合 ClojureScript 子集才能在 ClojureScript 中工作。

[克隆ClojureScript 存储库](https://github.com/clojure/clojurescript)并了解它所支持的内容是值得的（如果您喜欢冒险，还可以添加自己的功能 :)

ClojureScript 依赖项通常是基于“前端”的（包括从后端移植的依赖项）。换句话说，最终目标是由 V8 编译并作为 JavaScript 运行，因此可以使用 ClojureScript 编译器（上面的 repo）编译的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-19T09:19:50.087

我看到答案是在 2013 年给出的，但到 2020 年，情况仍然如此`CLJS version 1.10`。它仍然不可能只使用任何 Clojure 库，除非该库已与 CLJS 兼容。Building with`shadow-cljs`将产生如下构建错误：

```
The required namespace "clojure.data.json" is not available, it was required by "bharati/binita/frontend/demo3/main.cljs".
"clojure/data/json.clj" was found on the classpath. Should this be a .cljs file? 
```

除了使用与 CLJS 兼容的任何其他替代库之外，我看不到任何解决方案。

# c# - 通配符百分比在 SQL 查询中给出错误

> ID：15659511
> 
> 赞同：0
> 
> 时间：2013-03-27T13:03:37.373
> 
> 标签：c#, sql, oracle, wildcard

这个用 c# 编写的 Oracle SQL 查询给了我以下错误：*无效字符*

```
qur = " select * from emp where name LIKE '%" + TextBox1.Text + "%'"; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:07:58.650

问题是您的查询非常容易受到 Sql Injection 攻击。由于您没有使用参数化查询，因此在 TextBox1 中输入的任何内容都会破坏您的查询。

例如，如果我在文本框中输入：' char，您的查询将是`select * from emp where name LIKE '%'%'`并且它会抛出错误。除此之外，它是漏洞，您不应使用此类查询。

您可以将查询更改为：

```
SqlCommand cmd= new SqlCommand( " select * from emp where name LIKE @myParam");
cmd.Parameters.AddWithValue("@myParam", "%" + TextBox1.Text + "%"); 
```

你错过了`@`

[参数化查询如何帮助防止 SQL 注入？](https://stackoverflow.com/questions/5468425/how-do-parameterized-queries-help-against-sql-injection)

[C# 构造参数查询 SQL - LIKE %](https://stackoverflow.com/questions/664314/c-sharp-constructing-parameter-query-sql-like)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-27T13:12:09.650

你应该如下使用它：

```
qur = " select * from emp where name LIKE '%'" + TextBox1.Text + "'%'"; 
```

# c# - 检索 DateTime 字段时出现异常

> ID：15659514
> 
> 赞同：0
> 
> 时间：2013-03-27T13:03:42.933
> 
> 标签：c#, console-application, oledbdatareader

我正在`DateTime`从访问数据库中检索数据，并希望将其作为字符串值分配给对象。

```
OleDbDataReader dbRead = cmd.ExecuteReader();
while (dbRead.Read())
{
    product.DateReleased = dbRead["Date Released"] != DBNull.Value ? (string)dbRead["DATE"] : "No Date available";
    product.DatePublished = dbRead["Publish_Date"] != DBNull.Value ? (string)dbRead["Publish_Date"] : "No Date Available"; 
} 
```

Product 对象的属性是一个字符串值，我从数据库中检索的值是`DateTime`.

尝试运行该过程给了我一个`InvalidCastException`异常，我感觉这是因为解析问题。

建议也许关于问题出在哪里？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:06:50.290

`DateTime`和`string`是不同的数据类型，不能相互转换，比如`int`和`float`。您需要解析`string`才能检索`DateTime`. 尝试使用下一个代码片段尝试使用`DateTime`当前文化中提供的默认格式进行解析。

```
OleDbDataReader dbRead = cmd.ExecuteReader();
 while (dbRead.Read())
 {
     product.DateReleased = dbRead["Date Released"] != DBNull.Value ? DateTime.Parse(dbRead["DATE"]) : null;
     product.DatePublished = dbRead["Publish_Date"] != DBNull.Value ? DateTime.Parse(dbRead["Publish_Date"]) : null; 
 } 
```

假设`DatePublished` 和`DateReleased`是 类型`DateTime?`。如果你有特定的日期格式，你可以使用`DateTime.ParseExact`方法，它以格式为参数，例如

```
DateTime.ParseExact(dbRead["Date Released"], "dd.MM.yyyy", CultureInfo.InvariantCulture) 
```

如果`DatePublished` 和`DateReleased`是 类型`string`，那么您应该调用`ToString()`DateTime，将其转换为字符串，例如：

```
product.DateReleased = dbRead["Date Released"] != DBNull.Value ? dbRead["DATE"].ToString() : "No Date available";
product.DatePublished = dbRead["Publish_Date"] != DBNull.Value ? dbRead["Publish_Date"].ToString() : "No Date Available"; 
```

如果数据库中的基础列具有`DateTime`类型，则可以访问类`GetDateTime`上的方法`OleDbDataReader`，例如

```
product.DateReleased = dbRead.GetDateTime("Date Released"); 
```

# ember.js - 登录用户的单例模型

> ID：15659516
> 
> 赞同：4
> 
> 时间：2013-03-27T13:03:49.350
> 
> 标签：ember.js

我现在在没有 ember 的情况下处理用户登录/注册，但我想在 ember 中处理用户配置文件（编辑配置文件）。拥有一个可以处理当前用户的单例模型的最佳做法是什么？我将一个简单的用户定义为：

```
App.User = DS.Model.extend({
    email: DS.attr('string'),
    name: DS.attr('string'),
}); 
```

我可以填充它，`App.ready`但我不太确定如何使用其他任何东西`App.User.find(id)`- 而且我不知道 id。我的服务器可以从这个会话中返回当前登录的用户，但是在这种情况下如何使用它呢？还是我以错误的方式处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T18:28:09.577

我基本上按照你的描述做。我使用下面的代码调用后端以获取当前登录的用户并将其设置在 Ember 应用程序中。

```
var App = Ember.Application.create({
    LOG_TRANSITIONS: true,
});

App.deferReadiness();

$.ajax({
    url: 'http://localhost:3000/login',
    dataType: 'json',
    success: function (resp) {
        console.log(resp.user);

        App.store.load(App.User, resp.user._id, resp.user);
        App.store.load(App.Company, resp.company._id, resp.company);

        var user = App.User.find(resp.user._id);
        var company = App.Company.find(resp.company._id);

        App.CurrentUserController.reopen({
            content: user
        });

        App.CurrentCompanyController.reopen({
            content: company
        });

        App.advanceReadiness();
    },
    error: function (resp) {
        console.log('failed: ' + resp);
        App.advanceReadiness();
    }
});

App.initialize(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T13:41:49.837

[Discourse](https://github.com/discourse/discourse)将当前用户的信息嵌入到基础 HTML 页面中，并将其预加载到`User`应用程序路由中的模型中：

[https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/routes/application_route.js](https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/routes/application_route.js)

然后`User`模型有足够的信息来访问用户的个人资料/等：

[https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/models/user.js](https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse/models/user.js)

会话特定项目（例如注销）访问单独的`/session/`URL：

[https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse.js#L169](https://github.com/discourse/discourse/blob/master/app/assets/javascripts/discourse.js#L169)

如果您正在使用会话并且希望避免在基本 HTML 页面中嵌入当前用户信息（如果您正在静态提供内容等），您还可以手动访问`/session/`返回当前登录用户的会话特定 URL（例如）根据当前会话的信息。

# django - 拙劣的迁移：表已删除

> ID：15659517
> 
> 赞同：1
> 
> 时间：2013-03-27T13:03:52.963
> 
> 标签：django, django-south

我不确定出了什么问题，但我有一个迁移来删除模型（数据库表）。该表已被删除，但 South 认为未应用迁移，因此当我迁移时，它会尝试将其删除，但失败了，从而停止了进一步的迁移。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:09:20.940

要解决这种不一致，您需要做的就是使用以下命令运行迁移`--fake`：

`./manage.py migrate app --fake`

从[文档](http://south.readthedocs.org/en/latest/commands.html)：

> `--fake`：将迁移序列记录为已应用，但实际上并未运行它。用于转换应用程序。

# primefaces - 在 Primefaces 中结合堆栈和条形图

> ID：15659521
> 
> 赞同：0
> 
> 时间：2013-03-27T13:03:59.673
> 
> 标签：primefaces

* * *

大家好你们好，

我是 JSF 和 Primefaces 的新手。我使用 Primefaces 3.5、Spring 和 Apache Tomcat 7 服务器。我的问题是，我的笛卡尔图表有三个系列，它们有相同的键。像 serie1(key, value) , serie2(key, value) 和 serie3(key, value)。所以我想画我的前两个系列堆叠，我的第三个系列是旁边的一个酒吧。我可以用 Primefaces 做吗？如果可以，怎么做？

我的 HTML 代码：

```
 <p:outputPanel id="myPanel">
      <p:barChart id="basic" value="#{myBean.categoryModel}" legendPosition="ne"  
        title="Title"  style="height:450px" animate="true" yaxisLabel="Yaxis" xaxisLabel="Xaxis" datatipFormat="#{myBean.dataTipFormat}"/> 

       </p:outputPanel> 
```

我的 JSF 代码：

```
firstYear.set(myMap.get(export.getGensek()), export1.value().divide(new      BigDecimal(1000000)));
secondYear.set(myMap.get(export.getGensek()), export2.value().divide(new BigDecimal(1000000)));
aprroxYear.set(myMap.get(export.getGensek()), export3.value().divide(new BigDecimal(1000000)));
categoryModel.addSeries(approxYear);
categoryModel.addSeries(firstYear);  
categoryModel.addSeries(secondYear); 
```

所以我想在堆叠显示 aprroxyear 和 firstyear 并显示 secondyear 就像在其他人旁边的酒吧一样。

谢谢。

# php - PHP中的弹出窗口？

> ID：15659522
> 
> 赞同：2
> 
> 时间：2013-03-27T13:04:01.853
> 
> 标签：php, popupwindow

这是一个快速的问题：

如何在 php 中为您的错误处理弹出一个窗口？javascript是做到这一点的唯一方法还是有办法在PHP中做到这一点？

我有一个 PHP 文件，其中一行代码如下：

```
 echo implode('<br />', $errors); 
```

这行代码捕获了来自我的表单的所有错误，如下所示：

```
 if (strlen($_POST['name'])<3) $errors[] = 'De naam van uw bedrijf moet minstens 3 letters bevatten';
  if (strlen($_POST['number'])<9) $errors[] = 'Uw nummer moet minstens 9 nummers bevatten';
  if (!preg_match($regexp_mail, $_POST['email'])) $errors[] = 'Onjuist E-mailadres'; 
```

当有人在我的表单上按下提交时，错误将显示在单独的页面上，我希望在弹出窗口中显示。先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:05:25.207

您必须使用 JS 来打开弹出窗口，虽然您可以使用 PHP 有条件地将其放在页面上，但您是对的，您必须使用 JavaScript 函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T13:08:27.347

对于弹出式 javascript 是必需的。把它放在你的标题中：

```
<script>
function myFunction()
{
alert("I am an alert box!"); // this is the message in ""
}
</script> 
```

这在你的身体里：

```
<input type="button" onclick="myFunction()" value="Show alert box"> 
```

当按下按钮时，会弹出一个框，其中包含标题中设置的消息。

这可以放在任何没有 php 标签的 html 或 php 文件中。

- - -编辑 - - -

要使用 php 显示它，请尝试以下操作：

```
<?php echo '<script>myfunction()</script>'; ?> 
```

它可能不是100％正确，但原理是一样的。

要显示不同的消息，您可以创建许多函数，也可以在调用函数时将变量传递给函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:05:42.167

PHP 在服务器端运行，因此您必须使用能够显示弹出窗口的客户端技术：JavaScript。

因此，如果您的表单包含错误并且您想要显示该弹出窗口，您应该通过 PHP 输出特定的 JS 块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T13:29:30.030

```
if (isset($_POST['Register']))
    {
        $ErrorArrays = array (); //Empty array for input errors 

        $Input_Username = $_POST['Username'];
        $Input_Password = $_POST['Password'];
        $Input_Confirm = $_POST['ConfirmPass'];
        $Input_Email = $_POST['Email'];

        if (empty($Input_Username))
        {
            $ErrorArrays[] = "Username Is Empty";
        }
        if (empty($Input_Password))
        {
            $ErrorArrays[] = "Password Is Empty";
        }
        if ($Input_Password !== $Input_Confirm)
        {
            $ErrorArrays[] = "Passwords Do Not Match!";
        }
        if (!filter_var($Input_Email, FILTER_VALIDATE_EMAIL))
        {
            $ErrorArrays[] = "Incorrect Email Formatting";
        }

        if (count($ErrorArrays) == 0)
        {
            // No Errors
        }
        else
        {
            foreach ($ErrorArrays AS $Errors)
            {
                echo "<font color='red'><b>".$Errors."</font></b><br>";
            }
        }
    }

?>

    <form method="POST"> 
        Username: <input type='text' name='Username'> <br>
        Password: <input type='password' name='Password'><br>
        Confirm Password: <input type='password' name='ConfirmPass'><br>
        Email: <input type='text' name='Email'> <br><br>

        <input type='submit' name='Register' value='Register'>

    </form> 
```

这是一个非常基本的 PHP 表单验证。这可以放在一个`try`块中，但作为基本参考，我认为这符合我们在评论框中的对话。

这个脚本将做的是处理每个帖子元素，并采取相应的行动，例如：

```
 if (!filter_var($Input_Email, FILTER_VALIDATE_EMAIL))
        {
            $ErrorArrays[] = "Incorrect Email Formatting";
        } 
```

这将检查：

> 如果 $Input_Email 不是有效的电子邮件。如果这不是一个有效的电子邮件，那么一条消息将被添加到一个空数组中。

在脚本的下方，您将看到：

```
 if (count($ErrorArrays) == 0)
    {
        // No Errors
    }
    else
    {
        foreach ($ErrorArrays AS $Errors)
        {
            echo "<font color='red'><b>".$Errors."</font></b><br>";
        }
    } 
```

基本上。如果数组计数不为 0，则发现错误。然后脚本将打印出错误。

**请记住，这是基于我们在评论框中的对话的参考，应该这样使用。**

# list - 当列表中有逗号时，为什么这个 freemarker 代码会失败？

> ID：15659523
> 
> 赞同：0
> 
> 时间：2013-03-27T13:04:04.463
> 
> 标签：list, map, groovy, freemarker

我有一个包含列表的地图（列表中的所有值都是字符串）：

```
["diameter":["1", "2", "3"]]
["length":["2", "3", "4"]] 
```

我在freemarker中遍历它：

```
<#list product.getSortedVariantMap.keySet() as variantCode>
    <#list product.getSortedVariantMap[variantCode] as variantValue> 
```

这工作正常。但是，如果其中一个字符串包含这样的逗号：

```
def returnValue = ["diameter":["3,5"]] 
```

我收到以下错误：

```
?size is unsupported for: freemarker.ext.beans.SimpleMethodModel
The problematic instruction:
----------
==> list product.getSortedVariantMap[variantCode] as variantValue [on line 200, column 41 in product.htm] 
```

我不知道错误可能是什么，字符串中的逗号不应产生该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:59:30.030

它取决于 FreeMarker 配置，但`product.getSortedVariantMap`很可能返回方法本身，而不是它的返回值。你应该写`product.sortedVariantMap`。（虽然我不明白为什么它不早点停止， on `product.getSortedVariantMap.keySet()`。也许你的例子不完全是要运行的？）

# ruby-on-rails - 使用 MacPorts 安装 ruby

> ID：15659524
> 
> 赞同：0
> 
> 时间：2013-03-27T13:04:04.790
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, macports

我正在使用 MacPorts 安装 Ruby。使用以下命令后：

```
sudo port install rb-rubygem 
```

我收到以下错误：

```
Error: Port rb-rubygem not found 
```

我应该做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-07T13:05:33.220

这篇文章很旧，但我会在这里添加。如果您想使用 mac 端口，您可以使用`sudo port install ruby`然后添加 ruby​​（请注意您在原始帖子中错过了 ruby​​gem* *s*`sudo port install rb-rubygems` * 中的 's' ）。您始终可以通过键入来检查 mac 端口中可用的存储库。希望这可以帮助。*`port list`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:09:46.220

Ruby 默认安装在每台 Mac 中。但是，它是 ruby​​ 1.8，它非常旧，不应该在您的任何项目中使用。

看看[rvm](https://rvm.io/)。
它将允许您在同一系统中安装多个版本的 ruby​​。

因此，例如，您可以执行以下操作：

```
rvm use 1.9.3
ruby -v #=> ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin12.2.0]
rvm use 2.0.0
ruby -v #=> ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.2.1] 
```

使用 rvm，您可以使用以下命令安装任何新版本的 ruby​​：

```
rvm install 2.0.0-p0 #=> This will install Ruby 2.0.0
rvm install jruby #=> This will install jruby 
```

等等*

# iphone - 如何修复警告：视图不在窗口层次结构中

> ID：15659526
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:04:12.410
> 
> 标签：iphone, ios, objective-c, mobclix

我`Mobclix`在`iOS`应用程序中使用标准设置过程，并且从内部调用该`requestAndDisplayAdFromViewController:`方法`viewWillAppear:`

```
 - (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    [fullScreenAdViewController requestAndDisplayAdFromViewController:self];

} 
```

这是我收到的警告：

```
Warning: Attempt to present <MobclixFullScreenAdViewController: 0x14f2c0> on <EditGameViewController: 0x1838d0> whose view is not in the window hierarchy! 
```

我希望这足以继续。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:11:08.030

您从 viewWillAppear 调用它 - 此时，视图不一定在层次结构中（它会出现，并不意味着它已经出现）。尝试从 viewDidAppear 调用它，当视图被确认在层次结构中时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:13:08.987

您也可以尝试在 viewDidLoad 方法中显示视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:13:37.300

您应该尝试将此代码移动到 viewDidAppear。

从关于 viewWillAppear 的 Apple 文档中：

```
This method is called before the receiver’s view is about to be added to a view hierarchy 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:12:45.150

尝试将您的代码移动 `[fullScreenAdViewController requestAndDisplayAdFromViewController:self];`到`viewDidAppear`.

# r - 如何使用 R 摘要获得第 n 个百分位数？

> ID：15659528
> 
> 赞同：30
> 
> 时间：2013-03-27T13:04:23.160
> 
> 标签：r

我可以使用 R 汇总函数来获取最小值、最大值和百分位数（25、75）。

我如何使用汇总来获得汇总统计中的任意分位数，例如第 90 个百分位数和第 99 个百分位数？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-27T13:06:27.470

使用`quantile`功能

```
quantile(x, c(.90, .99)) 
```

例子：

```
> set.seed(1)
> x <- rnorm(100)
> summary(x)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
-2.2150 -0.4942  0.1139  0.1089  0.6915  2.4020 
> quantile(x, c(.25, .50,  .75, .90, .99))
       25%        50%        75%        90%        99% 
-0.4942425  0.1139092  0.6915454  1.1810651  2.1749017 
```

# highcharts - 删除 highstock 中日期之间的时间

> ID：15659532
> 
> 赞同：0
> 
> 时间：2013-03-27T13:04:33.120
> 
> 标签：highcharts, highstock

我的图表在日期之间有时间。我只想显示日期。由于 Highstock 是响应式的，一旦我最小化浏览器并且只显示日期，时间就会被删除。我在 xAxis 和 tickInterval 中尝试过 dateTimeLabelFormats。这些似乎不起作用。

帮助表示赞赏

# vb.net - VB.NET 在运行时修改 Microsoft 报表文本框文本

> ID：15659534
> 
> 赞同：0
> 
> 时间：2013-03-27T13:04:34.543
> 
> 标签：vb.net, textbox, runtime, report, microsoft-reporting

我想创建一个 Microsoft 报告，其中应该只包含一个文本框，并且文本将能够修改......

我在没有使用向导的情况下添加了一份报告。并且在正文部分的报告中只有一个文本框...

我希望在运行时编辑文本，但是

```
me.reportviewer1.controls("textbox1").text= myrequiredtext 
```

不工作...

我也试过

```
me.reportviewer1.controls("body").controls("textbox1").text = myrequiredtext 
```

还是不行……

# django - Django比较用户列表

> ID：15659540
> 
> 赞同：1
> 
> 时间：2013-03-27T13:05:05.983
> 
> 标签：django

我有一个点赞功能，可以让学生在其他图片中点赞。

```
 def LikePicture(request,picture_id):
      p = Picture.objects.get(pk=picture_id)
      new_like, created = Like.objects.get_or_create(user=request.user, picture_id=picture_id)
      return HttpResponseRedirect(reverse('world:Boat', kwargs={'animal_id': the_id })) 
```

目前，我正在尝试对喜欢特定图片的人实施限制。我只希望与特定用户成为朋友的人喜欢他们的照片，而我能做到这一点的唯一方法是实现朋友模型。

2 只有两个用户相互添加，用户才能成为朋友。

我打算使用这种友谊模型，除非有人有更好的友谊模型，我们都可以使用它来实施限制。

```
 class Friendship(models.Model):
    from_friend = models.ForeignKey(User, related_name='friend_set')
    to_friend = models.ForeignKey(User, related_name='to_friend_set')
    def __unicode__(self):
      return u'%s, %s' % (
        self.from_friend.username,self.to_friend.username)
    class Meta:
      unique_together = (('to_friend', 'from_friend'), ) 
```

我们可以建立关系

```
 >>> user1 = User.objects.get(id=1)
  >>> user2 = User.objects.get(id=2)
  >>> friendship1 = Friendship(from_friend=user1, to_friend=user2)
  >>> friendship1.save()
  >>> user1.friend_set.all()
  [<Friendship: user1, user2>, <Friendship: user1, user3>] 
```

但为了成为朋友。其他用户必须添加其他用户。

```
 >>> friendship3 = Friendship(from_friend=user2, to_friend=user1)
  >>> friendship3.save()
  >>> user2.friend_set.all()
      [<Friendship: user2, user1>] 
```

**现在，问题是我们如何编辑点赞功能，让它只允许朋友点赞一张图片。**

我已经想到了一种方法，但我找不到将它实现到我的类似功能中的方法。我的想法是因为我们可以获取拥有图片的用户对象和想要喜欢图片的人。我们可以互相比较friendlist。我们得到拥有该图片的用户对象，我们得到试图喜欢该图片的用户对象。然后我们比较拥有该图片的用户在他的好友列表中是否有试图喜欢他的图片的用户>>> user1.friend_set .all() 我们反过来做。如果用户所有者的图片在 request.user 好友列表中。允许 Like!!! .

所以这就像，如果两个用户在同一个好友列表中都有对方。允许喜欢！！！

这将类似于此功能

```
 def Like(request,picture_id):
      user1 = User.objects.get(user=request.user) # The Guy who trying to like the picture
      p = Picture.objects.get(pk=picture_id)
      user2 = User.objects.get(picture=p) # The owner of the picture
      if user1 is in user2.friend_set.all() AND if user2 is in user1.friend_set.all():
           new_like, created = Like.objects.get_or_create(user=request.user, picture_id=picture_id)
      else:
           message ('You can only like if you are an friend ')
           return HttpResponseRedirect(reverse('world:Boat', kwargs={'animal_id': the_id }))

      return HttpResponseRedirect(reverse('world:Boat', kwargs={'animal_id': the_id })) 
```

或者我们可以比较用户对象

```
>>> [friendship.to_friend for friendship in 
user1.friend_set.all()]
[<User: user2>, <User: user3>] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:00:14.143

需要一点改进：

```
class FriendshipManager(models.Manager):
    def is_friends(self, user_a, user_b):
        if self.get_query_set().filter(
            user__id=user_a.id, friend__id=user_b.id, is_accepted=True).exists() or \
            self.get_query_set().filter(
                user__id=user_b.id, friend__id=user_a.id, is_accepted=True).exists():
            return True
        else:
            return False

class Friendship(models.Model):
    user = models.ForeignKey(User)
    friend = models.ForeignKey(User, related_name='friends')
    is_accepted = models.BooleanField(default=False)

    objects = FriendshipManager()

    def __unicode__(self):
        return u'%s, %s' % (
            self.user.username, self.friend.username)

    class Meta:
        unique_together = (('user', 'friend'), )

def Like(request, picture_id):
    user = request.user
    p = get_object_or_404(Picture, pk=picture_id)
    pic_owner = p.user # i hope you have user relationship with pic here
    if Friendship.objects.is_friends(user, pic_owner) \
        pic_owner.id == user.id:
        # if the pic owner and requested user are friends
        # or user is liking his own pic
        new_like, created = Like.objects.get_or_create(
            user=user, picture=p)
    else:
        message ('You can only like if you are friends')
        return HttpResponseRedirect(
            reverse('world:Boat', kwargs={'animal_id': the_id }))

    return HttpResponseRedirect(
        reverse('world:Boat', kwargs={'animal_id': the_id })) 
```

添加`is_accepted`字段以确保其他人批准了朋友请求。在管理器中添加`is_friends`了用于检查两个用户是否为好友的方法。在视图中还检查了请求的用户和图片所有者是否相同，这意味着用户可以喜欢自己发布的图片。这段代码未经测试，但我希望它能很好地为您服务。

# c# - 在TreeView上按“*”时如何检测扩展结尾？

> ID：15659541
> 
> 赞同：1
> 
> 时间：2013-03-27T13:05:20.390
> 
> 标签：c#, .net, winforms

我有一个从 派生的控件，`TreeView`它反映了一些分层数据并以惰性方式创建节点。
当一个特定的节点被扩展时，我正在检查它的`Nodes`集合中是否有一个虚拟节点，如果是，我正在删除它，从数据源加载数据并创建真正的子节点。

节点的数据加载被这个结构包围：

```
Cursor = Cursors.WaitCursor;
BeginUpdate();
try
{
  // node.Nodes.Add(...)
}
finally
{
  EndUpdate();
  Cursor = Cursors.Default;
} 
```

这工作正常，除了一种情况：当用户`*`在一个节点上按下（星号）时，这将加载许多嵌套节点，依此类推。由于上面的代码，我得到了一个闪烁的树视图，并带有一个正在运行的滚动条。

我想，当所有子节点都被扩展时，一个节点的扩展`ExpandAll`（这就是这样`*`做的）结束，但这是错误的。

我想知道，有没有办法在按下`*`时检测扩展结束`TreeView`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:34:29.490

在您的 BeforeExpand 事件中，您可以查看 selectedNode 的当前级别，如果为零，则它是顶部节点。在这种情况下，您将创建新的子节点并查看它们是否包含其他节点，如果是，请在其中添加一个虚拟节点。您的代码可能与您当前拥有的代码几乎相同，但针对级别 0 而不是级别 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:12:29.063

你能不能检测到*键在最顶层的节点上被按下并编写一个递归函数循环遍历所有子节点，如果这些子节点有更多的子节点，再次调用相同的函数，依此类推，直到所有节点最上面的节点下方已展开。这将在按下（并检测到）键 * 时扩展所有正在扩展的节点，并且它仍将处理您的延迟加载。

# ruby - 使用带有 ruby 的 .grammar 文件中的语法

> ID：15659549
> 
> 赞同：0
> 
> 时间：2013-03-27T13:05:44.333
> 
> 标签：ruby, grammar, snmp, mib

在寻找一种在 Ruby 中解析 SNMP Mib 文件的方法时，我发现了一个用 Java ( [www.mibble.org](http://www.mibble.org) ) 编写的项目，它使用两个语法文件（扩展名为 .grammar）来解析 Mib 文件。有什么方法可以在 ruby​​ 中使用语法文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:26:34.963

[http://grammatica.percederberg.net](http://grammatica.percederberg.net)

如果你进一步挖掘，你会看到语法文件是为 Grammatica 准备的，它只支持 Java 和 C#。

要么扩展 Grammatica 以支持 Ruby，要么必须切换到其他方法。请注意，Mibble 已发布 GPL 和商业许可证。如果要重用语法文件，请确保满足许可要求。

我们的开源项目[http://sharpsnmplib.codeplex.com](http://sharpsnmplib.codeplex.com)使用 ANTLR 3 来解析 MIB 文档。语法文件在 BSD 3 条款下发布。由于 ANTLR 确实支持 Ruby，[http:](http://www.antlr.org/wiki/display/ANTLR3/Antlr3RubyTarget) //www.antlr.org/wiki/display/ANTLR3/Antlr3RubyTarget ，您可以重用我们的 MIB 语法。

# java - 将一个组划分为大小为 k 的子组

> ID：15659552
> 
> 赞同：3
> 
> 时间：2013-03-27T13:05:58.253
> 
> 标签：java, algorithm, time-complexity, combinatorics

我遇到了一个问题：找到**将一组大小为 'n' 的组划分为大小为 'k' 的子组的**所有可能方法。（这里 **n%k =0**）

例如，设集合为 {1,2,3,4,5,6} 以分成 3 个子群（k = 3,n = 6），可能的集合是

a) {1,2,3},{4,5,6}

b) {1,3,5},{2,4,6}

c) {1,3,6},{2,4,5}

d) {1,3,4},{2,5,6} 等......

我尝试做的是，首先从集合中找到所有大小 k 的组合。然后循环遍历这些组合，找出哪些组合可以组合在一起，从而找到子组列表。

但我相信这种方法的时间复杂度非常糟糕。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T13:25:24.997

我会使用递归方法。我认为这个具有最佳运行时间，因为它准确地产生了所有需要的子集。

```
public static void solve(int[] a, int k, int i, List<List<Integer>> subsets) {
    if (i == a.length) {
        for (List<Integer> subset : subsets) {
            System.out.print(subset);               
        }
        System.out.println();
    } else {
        // loop over all subsets and try to put a[i] in
        for (int j = 0; j < subsets.size(); j++) {                 
            if (subsets.get(j).size() < k) {
                // subset j not full
                subsets.get(j).add(a[i]);
                solve(a, k, i+1, subsets); // do recursion
                subsets.get(j).remove((Integer)a[i]);

                if (subsets.get(j).size() == 0) {
                     // don't skip empty subsets, so you won't get duplicates
                     break;
                }                    
            }
        }
    }
} 
```

用法：

```
public static void main(String[] args) {
    int[] a = {1, 2, 3, 4, 5, 6};
    int k = 3;

    List<List<Integer>> subsets = new ArrayList<List<Integer>>(a.length / k);
    for (int i = 0; i < a.length / k; i++)
        subsets.add(new ArrayList<Integer>(k));
    solve(a, k, 0, subsets);
} 
```

印刷：

```
[1, 2, 3][4, 5, 6]
[1, 2, 4][3, 5, 6]
[1, 2, 5][3, 4, 6]
[1, 2, 6][3, 4, 5]
[1, 3, 4][2, 5, 6]
[1, 3, 5][2, 4, 6]
[1, 3, 6][2, 4, 5]
[1, 4, 5][2, 3, 6]
[1, 4, 6][2, 3, 5]
[1, 5, 6][2, 3, 4] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:51:10.913

结合起来考虑。如果`n % k != 0`，你不能这样做，因为你最终会得到一组少于`k`元素的集合，所以从检查是否是这种情况开始。

之后，您需要做的就是从一个`n-i*k`集合中递归地为 all生成 k 组合`i in [0; n/k]`。可以很容易地找到生成给定集合的所有 k 组合的算法。这个想法是：有（n个选择k）可能的这样的集合，你可以为你的第一个集合选择；从剩下的`n-k`元素中，你可以选择（（nk）选择k）套）；从剩下的`n-2k`元素中，你可以选择 ((n-2k) 选择 k) 个集合等等。假设您的集合的顺序无关紧要，您可以`(n choose k) * ((n-k) choose k) * ... * ((n-(n-1)k) choose k) / ((n/k)!)`选择您的集合，这取决于 k 可以是原始集合所具有的元素数量的指数，所以如果您真的想生成它们中的每一个，你不会低于指数复杂度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:32:35.740

我找到了可能的子分组数的公式，以防万一有人觉得它有趣。（这会被认为太离题吗？我发布的正确吗？）
首先让我们`m = n/k`成为子组的#。现在让第一个子群固定为该群的前 k 个元素，第二个子群是下一个 k，依此类推。如果我们考虑组的所有可能排列，这将为我们提供所有不同的子组。有`n!`n 个元素的排列，但我们不关心排序，所以我们分解出`k!`m 个子群中每个子群的`m!`排列以及子群本身的排列。这给了我们： `n!/(m!*(k!)^m)`.
作为检查，如果 k = 1 或 k = n，这给了我们 1 个子分组。在原始示例中，n = 6，k = 3，m = 2，我们得到 10 个可能的子分组（Heuster 的代码找到了）。
现在，如果您将此表达式与 G. Bach 给出并使用的表达式进行比较`(n choose k) = n!/(k!*(n-k)!)`，您会看到所有`(n-k)!`项都取消了，它简化为上面的表达式。
奖励：如果您对 使用斯特林近似值`n!`，则表达式可以很好地简化，并且您会得到子分组的 # 缩放为`(m^n)/m!`。

# cordova - PhoneGap Build with Android Camera 不触发

> ID：15659556
> 
> 赞同：1
> 
> 时间：2013-03-27T13:06:04.163
> 
> 标签：cordova, phonegap-build

我正在尝试使用 phonegap build 让相机工作（我对此很陌生）。问题是似乎什么都没有触发。

我的代码：

```
$(document).on('click', '.add_photo', function(){
    document.addEventListener('deviceready', onDeviceReady, false);
    function onDeviceReady(){
            navigator.camera.getPicture(onSuccess, onFail, {quality:50});
            function onSuccess(imageData){
                var image=document.getElementById('myImage');
                image.src='data:image/jpeg;base64,'+imageData;
            }
            function onFail(message){
                alert(message);
            }
    }
}); 
```

这已从 Phoegap API 页面修改。

`config.xml`包括以下几行：

```
<feature name="http://api.phonegap.com/1.0/camera" />
<feature name="http://api.phonegap.com/1.0/file" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T21:29:00.707

您是否包含指向 cordova.js 的链接？如果您使用的是 phonegap 构建，则不需要在项目中包含 cordova 文件，只需将以下脚本标签添加到您的标题中：

```
<script src="cordova.js"></script> 
```

phonegap 构建服务会自动为您添加文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:16:11.673

我有同样的问题，将质量设置为 20 解决了 Android 的问题。
这似乎只是 Android 上的问题，对于 IOS，使用 50 的质量值是安全的。

```
var cameraParams = { 
    quality : 20,
    destinationType: Camera.DestinationType.FILE_URI
};
navigator.camera.getPicture(onSuccess, onError, cameraParams); 
```

# algorithm - 堆栈的链表实现

> ID：15659557
> 
> 赞同：0
> 
> 时间：2013-03-27T13:06:04.603
> 
> 标签：algorithm, linked-list, stack, doubly-linked-list

这是我用链表实现的堆栈

```
STACK using linked list 

STACK-EMPTY:
if L.head == NIL
    return True
else return False

PUSH(x):
x.next = L.head 
if L.head != NIL
    L.head.prev = x
L.head = x
x.prev = NIL

POP():
x = L.head
L.head = x.next
x.next.prev = L.head
return x 
```

你会验证这个吗？怎么提高 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:26:18.377

您可以提高数据结构的一致性：

1.  列表头的`prev`总是`NIL`
2.  不在列表中的元素具有`next`并`prev`设置为 NIL

考虑到 1\. 考虑到您的 POP 存在不一致，这可能是错误的来源：当您弹出一个元素`prev`时，头部是头部本身，当您推送一个元素`prev`时，头部是 NIL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:40:28.603

尝试这个...

定义：

*   `S.top`是指向`X`栈顶某个类型节点的指针
*   `X`是一个有两个指针的节点，`top`并且`base`
*   `X.top`指向栈顶的下一个节点。
*   `X.base`指向堆栈底部的下一个节点（底部）

首先初始化栈顶指针：

```
STACK-INITIAL:
S.top = NIL
return true  // Never fails 
```

空栈测试：

```
STACK-EMPTY:
return (S.top == NIL) 
```

将节点推入`x`堆栈：

```
PUSH(x):
x.top = NIL     // Top of stack, therfore top is NIL
x.base = S.top  // base is previous top
S.top = x       // x is now top of stack  
return true 
```

弹出并返回栈顶（这是唯一“有趣”的部分）：

```
POP():
x = S.top          // Top node on stack (could be NIL)
if S.top != NIL    // Check in case stack was empty
  S.top = x.base   // New top = next node toward base
  x.base = NIL     // Disconnect x from stack
  if S.top != NIL  // Is stack now empty?
    S.top.top = NIL // No, set top node's top pointer to NIL
return x            // x could be NIL if stack was empty 
```

需要考虑的事情......我在上面使用了一个双链表，因为它看起来就像你正在使用的那样。但是，您只需要一个链接列表，其中链接指向堆栈的底部。请注意，`x.top`上述算法中的指针几乎没有用（设置但从未引用）。只要您跟踪堆栈顶部（S.top），您唯一需要做的就是在 POP 操作期间回溯堆栈。

**对评论的回应**

当一个元素从堆栈中弹出时，它的所有关联指针都应该设置为 NIL。这是因为它不再是堆栈的一部分，因此不应指向任何堆栈元素。我将这一点添加到我的原始答案中（见上文）。

以类似的方式，新的栈顶元素（除非栈变空）需要将其指向其上方元素的指针设置为 NIL（因为其上方的元素已被删除）。在我的示例中，这就是所有内容的`S.top.top = NIL` 全部内容（`S.top`指向堆栈顶部元素，因此`S.top.top`该元素的顶部指针也是如此）。我认为你会做同样的事情`x.next.prev = NIL`，假设`x`是你弹出的元素而不是 NIL 本身。在您的伪代码中，它看起来`x.next.prev = L.head`会使堆栈元素顶部的 prev 指针指向自身，因为`L.head`已设置为`x.next`（之前的新堆栈顶部）。

最后，我质疑为什么要使用双链表来实现堆栈，只需要一个带有指向其下一个元素的指针的单链表

# javascript - 角。如何将变量作为参数传递给自定义过滤器？

> ID：15659559
> 
> 赞同：31
> 
> 时间：2013-03-27T13:06:08.787
> 
> 标签：javascript, angularjs

我有以下 HTML

```
<span class="items-count">{{items | countmessage}}</span> 
```

并遵循过滤器以显示正确的计数消息

```
 app.filters
    .filter('countmessage', function () {
        return function (input) {
            var result = input.length + ' item';
            if (input.length != 1) result += 's';
            return message;
        }
    }); 
```

但我想用不同的词代替“项目”，所以我修改了过滤器

```
 app.filters
    .filter('countmessage', function () {
        return function (input, itemType) {
            var result = input.length + ' ' + itemType;
            if (input.length != 1) result += 's';
            return message;
        }
     }); 
```

当我使用这样的字符串时它可以工作

```
<span class="items-count">{{items | countmessage:'car'}}</span> 
```

但不适用于 $scope 中的变量，是否可以使用 $scope 变量

```
<span class="items-count">{{items | countmessage:itemtype}}</span> 
```

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-27T14:09:52.387

是的，可以使用变量`$scope`

看这个小提琴的例子：http: [//jsfiddle.net/lopisan/Kx4Tq/](http://jsfiddle.net/lopisan/Kx4Tq/)

HTML：

```
<body ng-app="myApp">
    <div ng-controller="MyCtrl">
        <input ng-model="variable"/><br/>
        Live output: {{variable | countmessage : type}}!<br/>
          Output: {{1 | countmessage : type}}!
    </div>
</body> 
```

JavaScript：

```
var myApp = angular.module('myApp',['myApp.filters']);

function MyCtrl($scope) {
    $scope.type = 'cat';
}

 angular.module('myApp.filters', [])
    .filter('countmessage', function () {
        return function (input, itemType) {
            var result = input + ' ' + itemType;
            if (input >  1) result += 's';
            return result;
        }
     }); 
```

# eclipse - Ubuntu 12.10 上的 Eclipse - Java 编辑器左边距的 BG 颜色

> ID：15659562
> 
> 赞同：0
> 
> 时间：2013-03-27T13:06:19.227
> 
> 标签：eclipse, ubuntu, colors

自从升级到 Ubuntu 12.10 后，让我烦恼的一件事是 Eclipse Java 编辑器窗口左边距的背景颜色。它几乎是白色的，这使得很难看到编辑器窗口的实际左边缘结束和边距开始的位置。截屏：

![日食](../Images/fc5181280f3a7d3aaeffffc9665ce176.png)

我查看了所有 Eclipse 颜色设置以及所有“Gnome 颜色选择器”设置，但我看不出我会在哪里更改它。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:27:31.890

你会想去`Windows->Preferences->General->Editors->Text Editors`找到名为的部分`Appearance color options`。您将要更改选择背景颜色。这也将改变主文档的背景，但这将明确定义一个部分的开始和结束位置。您可以试验这些设置和下面的设置，`Java->Editor`直到获得所需的配色方案。

# android - 调用 getNeighboringCellInfos() 时不一致

> ID：15659568
> 
> 赞同：0
> 
> 时间：2013-03-27T13:06:31.973
> 
> 标签：android, telephonymanager

我编写了简单的程序来获取各种信息：信号强度、手机信息等……为了测试，我使用了两部具有相同 Android 版本 2.1 的手机——索尼爱立信和三星 Galaxy Spice。要提取邻居小区信息，我使用：

```
telephonyConnectionAdapter.getNeighboringCellInfos() 
```

在 SE 上，我可以获取邻居单元信息，并且`adb logcat -b radio`可以看到：

```
D/GSM     (  488): [GsmSST] Poll ServiceState done:  oldSS=[0 home T-Mobile.pl 
    T-  Mobile.pl 26002  EDGE:2 CSS not supported -1 -1 RoamInd=-1 DefRoamInd=-1
    EmergOnly=false] newSS=[0 home T-Mobile.pl T-Mobile.pl 26002  EDGE:2 CSS not
    supported -1 -1 RoamInd=-1 DefRoamInd=-1 EmergOnly=false] oldGprs=0 newData=0
    oldMaxDataCalls=20 mNewMaxDataCalls=20
    oldReasonDataDenied=-1 mNewReasonDataDenied=-1 oldType=EDGE:2 newType=EDGE:2
D/GSM     (  488): [EONS] Reading data from EF_OPL or EF_PNN is not complete.        
    Suppress operator name display until all EF_OPL/EF_PNN data is read.
D/RILJ    (  488): [8847]> REQUEST_GET_NEIGHBORING_CELL_IDS
D/RILJ    (  488): [8847]< REQUEST_GET_NEIGHBORING_CELL_IDS  [b01b59c7@18 [b01b5260@27] [] [b01b63f9@19] [b01b2f4f@17] 
```

但相同的应用程序无法在三星上提取邻居小区信息 - 列表为空，`adb logcat -b radio`看起来：

```
D/GSM     ( 1993): Poll ServiceState done:  oldSS=[0 home Play Play 26006 (manual)
    EDGE CSS not supported -1 -1RoamInd: -1DefRoamInd: -1] newSS=[0 home Play Play
    26006 (manual) EDGE CSS not supported -1 -1RoamInd: -1DefRoamInd: -1] oldGprs=0
    newGprs=0 oldType=EDGE newType=EDGE        D/RILJ    ( 1993): [5590]> REQUEST_GET_NEIGHBORING_CELL_IDS
D/RILC    ( 1855): [5590]> GET_NEIGHBORING_CELL_IDS
D/RILC    ( 1855): [5590]< GET_NEIGHBORING_CELL_IDS fails by E_REQUEST_NOT_SUPPORTED
D/RILJ    ( 1993): [5590]< REQUEST_GET_NEIGHBORING_CELL_IDS error: com.android.internal.telephony.CommandException: REQUEST_NOT_SUPPORTED 
```

这是一个更重要的信息。当我在三星上使用魔术代码`*#*#197328640#*#*`并进入服务菜单时。几乎没有可见的相邻单元。

知道发生了什么吗？或者至少这是什么意思？

```
"com.android.internal.telephony.CommandException: REQUEST_NOT_SUPPORTED" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:44:54.533

每个制造商都在他们认为合适的情况下为其设备实施低级功能。在这种情况下，三星决定不在此设备上支持此功能。这意味着您将无法获取此设备上的相邻小区列表。

# c++ - 模板的c ++链接错误，仅使用头文件，为什么？

> ID：15659577
> 
> 赞同：0
> 
> 时间：2013-03-27T13:06:49.190
> 
> 标签：c++, templates, linker, linked-list, lnk2019

我知道那里有很多类似的问题 - 相信我，我已经阅读过它们 - 但我无法让它发挥作用。这很奇怪，因为前几天我用一个相关程序解决了一个类似的问题。我意识到我的问题的答案很可能**就**在某个地方，但我花了一两个小时寻找，但没有取得多大成功。

我正在尝试建立一个链接列表。该程序由四个文件组成——链表和节点的头文件，以及链表的接口，以及包含 main 方法的 .cpp 文件。

ListTester.cpp

```
#include "StdAfx.h"
#include "LinkedList.h"
#include <iostream>
#include <string>

using namespace std;

template <typename T>
void main() {

    LinkedList<int> a;
    a.addFirst(22);
    a.addFirst(24);
    a.addFirst(28);
    LinkedList<int> b;
    b = a;
    b = b + a;
    b += a;

    cout<<b;
} 
```

链表.h

```
#ifndef LINKEDLIST_H
#define LINKEDLIST_H
#include "Node.h"
#include "List.h"
#include <ostream>

template <typename T>

class LinkedList : public List {

private:

    int n;
    Node<T> *first;
    Node<T> *last;

public:

    LinkedList();
    LinkedList(const LinkedList & ll);
    ~LinkedList();
    int size();
    void clear();
    void addFirst(T data);
    void addLast(T data);
    T removeFirst();
    T removeLast(); 
    T getFirst();
    T getLast();
    Node<T>* getFirstNode() const;
    void addAt(int pos, T data);
    T removeAt(int pos);
    T getAt(int pos);   
    LinkedList& operator=(const LinkedList<T> &right);
    T operator[](int i);
    LinkedList& operator+(const LinkedList<T> &right);
    LinkedList& operator+=(const LinkedList<T> &right);
    friend std::ostream& operator<<(std::ostream &os, const LinkedList<T> & ll);

};

template <typename T>
LinkedList<T>::LinkedList() {
        this->n = 0;
        this->first = 0;
        this->last = 0;
    }

template <typename T>
LinkedList<T>::LinkedList(const LinkedList & ll) {
    this-> n = 0;
    this-> first = 0;
    this-> last = 0;

    Node *temp = ll.first;

    while(temp) {
        addLast(temp->getData());
        temp = temp->getNext();
    }

}

template <typename T>
void LinkedList<T>::addFirst(T data) {
    Node *p = new Node(data, first);
    first = p;
    if(!n)
        last = p;
    n++;
}

template <typename T>
void LinkedList<T>::addLast(T data) {
    Node *p = new Node(data, 0);
    if(!n)
        first = last = p;
    else {
        last->next = p;
        last = p;
    }
    n++;
}

template <typename T>
T LinkedList<T>::removeFirst() {
    T a = 0;
    if(!n)
        throw "Can't retrieve element from empty list!";
    a = first->getData();
    Node *p = first->next;
    delete first;
    first = p;
    n--;
    return a;
}

template <typename T>
T LinkedList<T>::removeLast() {
    T a = 0;
    if(!n)
        throw "Can't retrieve element from empty list!";
    if(n == 1) {
        a = last->getData();
        delete first;
        first = last = 0;
    }
    else {
        a = last->getData();
        Node *p = first;
        while(p->next->next != 0)
            p = p->next;
        delete p->next;
        p->next = 0;
        last = p;
    }
    n--;
    return a;
}

template <typename T>
T LinkedList<T>::getFirst() {
    if(n < 1)
        throw "Can't retrieve element from empty list!";
    return first->getData();
}

template <typename T>
T LinkedList<T>::getLast() {
    if(n < 1)
        throw "Can't retrieve element from empty list!";
    return last->getData();
}

template <typename T>
Node<T>* LinkedList<T>::getFirstNode() const {
    return first;
}

template <typename T>
int LinkedList<T>::size() {
    return n;
}

template <typename T>
T LinkedList<T>::getAt(int pos) {
    if(pos >= n)
        throw "Element index out of bounds!";       
    Node *temp = first;
    while(pos > 0) {
        temp = temp->next;
        pos--;
    }
    return temp->getData();     
}

template <typename T>
void LinkedList<T>::clear() {
    Node *current = first;
    while(current) {
        Node *next = current->next;
        delete current;
        if(next)
            current = next;
        else
            current = 0;
    }
}

template <typename T>
void LinkedList<T>::addAt(int pos, T data) {
    if(pos >= n)
        throw "Element index out of bounds!";       
    if(pos == 0)
        addFirst(data);
    else {
        Node *temp = first;
        while(pos > 1) {
            temp = temp->next;
            pos--;
        }
        Node *p = new Node(data, temp->next);
        temp-> next = p;
        n++;
    }
}

template <typename T>
T LinkedList<T>::removeAt(int pos) {
    if(pos >= n)
        throw "Element index out of bounds!";       
    if(pos == 0)
        return removeFirst();
    if(pos == n - 1)
        return removeLast();
    else {
        Node *p = first;
        while(pos > 1) {
            p = p->next;
            pos--;
        }
        T a = p->next->getData();
        Node *temp = p->next;
        p->next = p->next->next;
        delete temp;
        n--;
        return a;
    }       
}

template <typename T>
LinkedList<T>::~LinkedList() {
    clear();
}

template <typename T>
LinkedList<T>& LinkedList<T>::operator=(const LinkedList<T> &right) {
    if(this != &right) {

        n = 0;
        first = 0;
        last = 0;

        Node *temp = right.first;
        while(temp) {
            addLast(temp->getData());
            temp = temp->getNext();
        }           
    }
    return *this;
}

template <typename T>
T LinkedList<T>::operator[](int i) {
    return getAt(i);
}

template <typename T>
LinkedList<T>& LinkedList<T>::operator+(const LinkedList<T> &right) {
    Node *temp = right.first;
    while(temp) {
        addLast(temp->getData());
        temp = temp->getNext();
    }
    return *this;
}

template <typename T>
LinkedList<T>& LinkedList<T>::operator+=(const LinkedList<T> &right) {
    Node *temp = right.first;
    while(temp) {
        addLast(temp->getData());
        temp = temp->getNext();
    }
    return *this;
}

template <typename T>
std::ostream& operator<<(std::ostream &os, const LinkedList<T> &ll) {
    Node *temp = ll.getFirstNode();
    while(temp) {
        os<<temp->getData()<<std::endl;
        temp = temp->getNext();
    }
    return os;
}

#endif 
```

节点.h

```
#ifndef NODE_H
#define NODE_H

template <typename T>
class Node {

private:

    T data;

public:

    Node<T>* next;
    T getData();
    Node<T>* getNext();
    Node(T data, Node<T>* next);
    Node(const Node & n);

};

template <typename T>
T Node<T>::getData() {
        return data;
    }

template <typename T>
Node<T>* Node<T>::getNext() {
    return next;
}

template <typename T>
Node<T>::Node(T data, Node<T>* next) {
    this->data = data;
    this->next = next;
    }

template <typename T>
Node<T>::Node(const Node & n) {
    data = n.data;
    next = n.next;
}   

#endif 
```

列表.h

```
#ifndef LIST_H
#define LIST_H

class List
  {

public:

    virtual void addFirst(int data) = 0;
    virtual void addAt(int pos, int data) = 0;
    virtual void addLast(int data) = 0;
    virtual int getFirst()= 0;
    virtual int getAt(int pos) = 0;
    virtual int getLast()= 0;
    virtual int removeFirst()= 0;
    virtual int removeAt(int pos) = 0;
    virtual int removeLast()= 0;
    virtual int size() = 0;
    virtual void clear() = 0;
    virtual ~List() {};     

  };

#endif 
```

为此，我收到 LNK2019 和 LNK1120 链接错误。我知道我曾经在分离的 .h 和 .cpp 文件中实现队列时得到这个。但是通过在标题中做所有事情来解决它。我也知道在不实现命名方法时会发生这种情况，但我在这里找不到任何方法。那么是什么原因造成的呢？我希望编译器/IDE 可以指出错误的可能原因。但是话又说回来，如果找到故障线路很容易，我认为它已经做到了。VS 2012 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:14:10.297

```
// template <typename T>
void main() {

    LinkedList<int> a;
    a.addFirst(22);
    a.addFirst(24);
    a.addFirst(28);
    LinkedList<int> b;
    b = a;
    b = b + a;
    b += a;

    cout<<b;
} 
```

您需要一个主*函数*，而不是一个主*函数模板*。这可能是您的链接器错误的来源：没有名为“main”的函数。

这不起作用的原因主要是因为类模板和函数模板永远不会扩展到实际代码，除非它们被使用。由于 main 是您程序的入口点，因此您永远不会从任何地方调用 main，因此不会生成 main 代码。

此外，由于 C++ 编译器对函数（处理重载、模板、命名空间等）的名称修改，将在生成的程序集中为该主模板生成的符号可能不是正确的符号。如果它正在寻找一个符号'main'并且它看到

```
$__T_float_main_blah_blah_blah 
```

那么你无论如何都不会链接。长话短说： main 是一个函数，而不是函数模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:14:22.043

你制作`main`了一个函数模板。这不仅没有意义（里面没有提到模板参数），而且它也从未实例化（即使是，它也可能无法正确解析`main`程序作为起点所需的正确性）。

此外，它应该是`int main`而不是`void main`。

# android - 如何使用 In App Billing Android 实现数据库更新

> ID：15659586
> 
> 赞同：0
> 
> 时间：2013-03-27T13:07:07.417
> 
> 标签：android, sqlite, in-app-billing

我正在尝试在我的 android 应用中实现应用计费。在我的应用程序中，我试图销售由 sqlite 支持的数字商品。我希望当用户购买我的应用程序时，一些额外的（比如 100 个）条目被添加到我已经在应用程序中创建的 sqlite 表中。有什么方法可以做到这一点。我是否可以使用所有条目（包括我要出售的条目）创建整个数据库，并隐藏付费条目。然后，当用户为这些条目付费时，我会取消隐藏它们。如果我做这样的事情......我的应用程序更容易被黑客入侵吗？这怎么可能实现。谷歌的应用内计费版本 3 文档非常混乱。有人可以给我指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:37:10.540

我不确定和混淆你在问什么，你有不止一个问题，但我在此基础上理解回答你的问题。

> **我希望当用户购买我的应用程序时，一些额外的（比如 100 个）条目被添加到我已经在应用程序中创建的 sqlite 表中。**

有一些 prefenceStorage 变量作为标志来检查 App 是否是第一次安装，如果你第一次创建 SqliteDatabase

```
sqldb = openorCreateDatabase('.... params ....');
sqldb.executeSQL("create table if not exists <tablename> (field text, field1  integer....)");

 //insert record
     sqldb.executeSQL("insert into <tablename> values(....)");

sqldb.close(); 
```

循环插入记录以在应用程序首次安装时为您添加 100 个条目

> **并隐藏付费条目。**

在您的记录表中​​有 ispaid 字段，在付费更新时 ispaid 字段的值为“1”，并且在记录显示端使用这样的查询

```
sqldb.query("select * from <tblname> where ispaid = 0"); 
```

# jquery - 选择相同的输入时禁用输入字段？

> ID：15659590
> 
> 赞同：1
> 
> 时间：2013-03-27T13:07:12.763
> 
> 标签：jquery

我有一个输入字段（源语言），当我单击其中一种源语言时，我想要它，但具有相同文本的目标语言被禁用

到目前为止我已经这样做了，但是当我单击源语言时它会一直禁用目标语言

我每次都想重置它..不要总是听事件

这是演示[http://jsfiddle.net/ezNxU/](http://jsfiddle.net/ezNxU/)

```
// change the target language according to the source language 
$('#source').change(function () {

var option_source = $('select#source option:selected').text();

$('select#target option').each(function () {
    if ($(this).text() == option_source) $(this).prop("disabled", true);
    console.log($(this).text());
});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:13:34.870

要重置 disabled 属性，请将其应用于所有选项，并使用函数调用将其设置为 true / false

```
$('#source').on('change', function() {
    var self = this;
    $('#target option').prop('disabled', function() {
        return this.value == self.value;
    });
}); 
```

[**小提琴**](http://jsfiddle.net/ezNxU/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:10:57.000

尝试这个：

```
$('#source').change(function () {
    var option_source = $('select#source option:selected').text();
    $('select#target option').each(function () {
        $(this).prop("disabled", ($(this).text() == option_source));
    });
}); 
```

[演示](http://jsfiddle.net/ezNxU/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:11:36.590

用它来清除所有

```
$('select#target option').prop("disabled",false); 
```

所以对于你的代码：[小提琴](http://jsfiddle.net/8vtyd/)

```
 $('#source').change(function () {

            var option_source = $('select#source option:selected').text();
                $('select#target option').prop("disabled",false);
            $('select#target option').each(function () {

                if ($(this).text() == option_source) $(this).prop("disabled", true);
                console.log($(this).text());
            });
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:11:58.317

只需在更改事件上删除禁用属性...这将删除所有选项的禁用形式，稍后您的代码将添加它...

尝试这个

```
 $('#source').change(function () {
   $('select#target option').prop("disabled", false); //<-- add this line
   ..... 
```

[在这里摆弄](http://jsfiddle.net/bipen/ezNxU/3/)

# c# - 当我的一个客户崩溃时，NetworkStream.Write 挂起我的服务器应用程序

> ID：15659591
> 
> 赞同：1
> 
> 时间：2013-03-27T13:07:21.623
> 
> 标签：c#, .net, networking, tcp, networkstream

我有一个客户端服务器 .net 应用程序，它们通过 tcp 进行通信。我的服务器定期向我的客户端发送原始字节数据包。

它在 99.9% 的情况下都很好用，但有时，当我的一个客户端崩溃（一年两次，不多）时，我的服务器会挂起。

我对其进行了调试（通过向我的客户端添加一些导致我的应用程序崩溃的测试代码），并注意到问题在`stream.Write(bytes, 0, bytes.Length);`. 它简单不做任何事情，不响应，不返回，只是挂起。流是一个网络流。

我之前检查`stream.CanWrite`过，但它的反应是真的。

那么，我如何在服务器端检查我的一个客户端崩溃了？在将数据发送到其他客户端之前，我应该检查 NetworkStream（或其他）什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:22:57.097

将超时设置为 TCP 连接的套接字。现在看起来它是无限的，所以服务器无限期地等待来自死客户端的响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:58:11.367

写入可能会挂起，因为对方没有从套接字读取并且他们的操作系统套接字缓冲区已满（但他们没有关闭套接字，也没有处于错误状态）。

这是对这种情况的描述： [http ://stringarray.net/?p=29](http://stringarray.net/?p=29)

# jquery - 验证数字和电子邮件 Jquery

> ID：15659596
> 
> 赞同：0
> 
> 时间：2013-03-27T13:07:34.927
> 
> 标签：jquery, validation

我希望在我的 jquery 脚本中对数字和电子邮件进行一些验证。我不确定如何将它添加到我当前的脚本中？这是我到目前为止所拥有的：

```
<script>      
       $("#quote-me").click(function(e){
         e.preventDefault();  
         var pnum = $("#partnum").val();
         var quantity = $("#quant").val();
         var location = $("#locate").val();
         var custemail = $("#email").val();

         var r = $.ajax({

            url : "/support/quote/",
            dataType : "JSON",
            type : "POST",
            data : {
                action : "true",
                pnum : pnum,
                quantity : quantity,
                location : location,
                custemail : custemail
            }
        });
        r.done(function(response){
            if(response.confirm !== undefined) {

                $("#confirmmessage").html(response.confirm);
                $("#confirmmessage").show(); 
                $("#speedquoteform input[type='text']").val("");
             }

        });
         });

         $("#speedquoteform input[type='text']").focusin(function() {
            if($("#confirmmessage").is(":visible")) { 
                $("#confirmmessage").hide(); 
            }

         });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:14:51.130

您可以使用[$.isNumeric()](http://api.jquery.com/jQuery.isNumeric/)检查变量是否为数字：

```
quantity.isNumeric();  // assuming 'quantity' is what you intend to validate 
```

# transactionscope - TransactionScope TransactionAborted 异常 - BeginCommit()？

> ID：15659599
> 
> 赞同：2
> 
> 时间：2013-03-27T13:07:43.840
> 
> 标签：transactionscope

TimeoutException 问题。

上下文：Visual Studio 2010

问题：我偶尔（在每小时运行一次的程序上每天一次）遇到我不理解的异常。

这是一个例外：

```
Exception message : The transaction has aborted.
Exception Source : System.Transactions
Exception Trace  :    at System.Transactions.TransactionStateAborted.BeginCommit(InternalTransaction tx, Boolean asyncCommit, AsyncCallback asyncCallback, Object asyncState)
   at System.Transactions.CommittableTransaction.Commit()
   at System.Transactions.TransactionScope.InternalDispose()
   at System.Transactions.TransactionScope.Dispose()
   at JDTranslation_K4_ReadEmails.Form1.ReadEmailDetails(EmailMessage emMessage, String strUserName, String strAccountName)
Exception Target : Void BeginCommit(System.Transactions.InternalTransaction, Boolean, System.AsyncCallback, System.Object) 
```

异常通常发生在持续 25-30 分钟的事务之后。

我已将交易设置为持续 5 小时（见下文），所以我完全不明白为什么它会超时。

而且我有点担心：我知道一些数据已提交到数据库 - 我可以相信它们都是吗？（几乎不可能通过调查数据来验证。）

程序（函数的一部分）大致如下所示：

```
//INSTANTIATE THE TRANSACTION SCOPE
TransactionOptions option = new TransactionOptions();
//SET THE ISOLATION LEVEL AND THE TIMEOUT DURATION
option.IsolationLevel = System.Transactions.IsolationLevel.ReadCommitted;
option.Timeout = new TimeSpan(5, 0, 0);

using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required, option))
{
try{
// do some select/update/insert/delete stuff on both connections,
// up to perhaps 3600 actions
// some of it happens in static functions declared elsewhere in the same class scope
} // this is the line mentioned in the Exception

} 
```

我很乐意回答我的一些问题：

为什么会发生异常？

我可以相信所有数据都已提交，还是 C#.NET 中存在允许部分提交的真正错误？

我的代码是否正确，或者我应该以不同的方式组织它来解决问题？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:32:20.153

您可以在 web.config 中增加超时。此外，尝试增加池大小。有时在长查询中它会增加最大线程限制。

# php - 动态多维数组的 PHP OOP 问题

> ID：15659604
> 
> 赞同：0
> 
> 时间：2013-03-27T13:07:56.937
> 
> 标签：php, arrays

我对以下代码有疑问：

```
<?php
    class testClass
    {
        public $settings;

        public function __construct()
        {
            $this->settings = array(
                'paths' => array(
                    'protocol' => 'http'
                )
            );
        }

        public function getSomething()
        {
            $string = "settings['paths']['protocol']";

            echo $this->{$string};      /***** Line 19 *****/
        }
    }

    $obj = new testClass;
    $obj->getSomething();                          // Outputs a 'undefined' notice
    echo '<br />';
    echo $obj->settings['paths']['protocol'];      // Outputs http as expected
?> 
```

这是我正在使用的代码的一个非常基本的示例，实际代码更高级，但产生的输出/错误是相同的。

基本上，类构造函数使用设置数组填充属性。getSomething() 方法将数组路径分配给变量，然后尝试由`echo $this->{$string};`代码检索该变量。

当我写时：`$obj->getSomething();`我收到以下错误：

```
Notice: Undefined property: testClass::$settings['paths']['protocol'] in /test.php on line 19 
```

如果我编写以下代码`echo $obj->settings['paths']['protocol']`，我会得到预期的`http`

我不确定为什么这不起作用！如果有人能提供任何启示，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:12:18.997

好吧，你没有一个名为 " `settings['paths']['protocol']`" 的属性。您有一个名为`settings`which has key的属性，该属性`paths`具有 key `protocol`。但是 PHP`$this->{$string}`不像复制和粘贴代码那样解释，它会寻找一个名为 " `settings['paths']['protocol']`" 的属性，但它并不存在。这对 OOP 代码没什么特别的，它是任何变量变量的工作方式。

* * *

我会建议这样的东西：

```
/**
 * Get settings, optionally filtered by path.
 *
 * @param string $path A path to a nested setting to be returned directly.
 * @return mixed The requested setting, or all settings if $path is null,
 *               or null if the path doesn't exist.
 */
public function get($path = null) {
    $value = $this->settings;

    foreach (array_filter(explode('.', $path)) as $key) {
        if (!is_array($value) || !isset($value[$key])) {
            return null;
        }
        $value = $value[$key];
    }

    return $value;
} 
```

像这样调用：

```
$obj->get('paths.protocol'); 
```

* * *

只是为了好玩，这里是上述的功能实现：;-3

```
public function get($path = null) {
    return array_reduce(
        array_filter(explode('.', $path)),
        function ($value, $key) { return is_array($value) && isset($value[$key]) ? $value[$key] : null; },
        $this->settings
    );
} 
```

# c++ - 如何使用 const_iterator 公开 C++ 类

> ID：15659610
> 
> 赞同：1
> 
> 时间：2013-03-27T13:08:14.133
> 
> 标签：c++, stl, boost-python, boost-iterators, const-iterator

我正在使用[Boost.Python](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/index.html)来公开第 3 方 C++ API。

我来的头文件声明了一个可迭代类（has`begin`和`end`方法），以及一个用于进行迭代的自定义迭代器类：-

```
// File: data.hpp

#include <utility> // for std::pair
#include <cstring> // for size_t

namespace notmylib {

    // forward declaration
    class DataIterator;

    // Storage for arbitrary data
    class Data
    {
        public:
            Data(void);
            virtual ~Data(void);
            // ...
            typedef DataIterator const_iterator;
            const_iterator begin(void) const;
            const_iterator end(void) const;

            typedef std::pair<int, int> TRange;
        private:
            TRange m_data;
    };

    // Data iterator class
    class DataIterator
    {
        public:
            // constructors
            DataIterator(void);
            DataIterator(const Data);
            ~DataIterator(void);

            // copy constructor
            DataIterator(const DataIterator& iter);
            // assignment operator
            DataIterator& operator=(const DataIterator& iter);

            // Comparison operators
            bool operator==(const DataIterator& iter) const;
            bool operator!=(const DataIterator& iter) const;

            // Data Range
            typedef TData::TRange TRange;
            TRange  GetRange(void) const;
            Data    GetRangeAsData(void) const;

            // Go backwards one step
            void   Rewind(void);
        private:
            Data   m_data;
            size_t m_index;
    };
} 
```

我创建了从这些派生的最小包装类：-

```
// File: pydata.hpp
#include "data.hpp"

namespace mylib {
    class PyData
        : public notmylib::Data
    {
        public:
            PyData(void);
            virtual ~PyData(void);
    };

    class PyIterator
        : public notmylib::DataIterator
    {
        public:
            PyIterator(void);
            PyIterator(const notmylib::Data);
            PyIterator(const PyIterator& iter);

            ~PyIterator(void);
    };
} 
```

还有 Boost.Python 声明：-

```
// File: pydata.cpp
#include "pydata.hpp"

#include <boost/python/class.hpp>
#include <boost/python/iterator.hpp>
#include <boost/python/module.hpp>

BOOST_PYTHON_MODULE(const_iterator)
{
    using namespace boost::python;

    class_<mylib::PyData, boost::noncopyable>("Data",
            "Iterable Data storage class.")
        .def("__iter__",
            iterator<const mylib::PyData>() /*, // */ )      ///< iterator / range / iterators ?
         //   boost::python::return_value_policy<            ///< This CallPolicy 
         //       boost::python::copy_const_reference> >() ) ///  doesn't work either
        ;

    class_<mylib::PyIterator>("DataIterator",
            "Iterator for Data class. Don't actually need to expose...")
        .def("__eq__", &mylib::PyIterator::operator==)
        .def("__neq__", &mylib::PyIterator::operator!=)
        // ...
        ;
} 
```

这里唯一的奇怪之处似乎是`const_iterator`typedef 的使用。这在 Boost.Python[迭代器文档](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/iterator.html#iterator-spec)中有所描述，据我所知，它所需要的只是的模板参数`const`中的限定符。`iterator`IE

```
boost::python::iterator<const mylib::PyData>() 
```

但是，这会导致以下编译器错误，在 Linux x86_64 上使用 GCC 4.7.2：-

```
g++ -std=gnu++98 -c -g -O1  -fPIC -I/usr/include/python2.7  pydata.cpp -o pydata.o 
```

```
In file included from /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_algobase.h:66:0,
                 from /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/memory:64,
                 from /usr/include/boost/config/no_tr1/memory.hpp:21,
                 from /usr/include/boost/get_pointer.hpp:14,
                 from /usr/include/boost/python/object/pointer_holder.hpp:11,
                 from /usr/include/boost/python/to_python_indirect.hpp:10,
                 from /usr/include/boost/python/converter/arg_to_python.hpp:10,
                 from /usr/include/boost/python/call.hpp:15,
                 from /usr/include/boost/python/object_core.hpp:14,
                 from /usr/include/boost/python/object/class.hpp:9,
                 from /usr/include/boost/python/class.hpp:13,
                 from pydata.cpp:4:
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_iterator_base_types.h: In instantiation of 'struct std::iterator_traits<notmylib::DataIterator>':
/usr/include/boost/detail/iterator.hpp:81:8:   required from 'struct boost::detail::iterator_traits<notmylib::DataIterator>'
/usr/include/boost/python/object/iterator.hpp:58:17:   required from 'struct boost::python::objects::iterator_range<boost::python::return_value_policy<boost::python::return_by_value>, notmylib::DataIterator>::next'
/usr/include/boost/python/object/iterator.hpp:127:45:   required from 'boost::python::api::object boost::python::objects::detail::demand_iterator_class(const char*, Iterator*, const NextPolicies&) [with Iterator = notmylib::DataIterator; NextPolicies = boost::python::return_value_policy<boost::python::return_by_value>]'
/usr/include/boost/python/object/iterator.hpp:167:11:   required from 'boost::python::objects::iterator_range<NextPolicies, Iterator> boost::python::objects::detail::py_iter_<Target, Iterator, Accessor1, Accessor2, NextPolicies>::operator()(boost::python::back_reference<Target&>) const [with Target = const mylib::PyData; Iterator = notmylib::DataIterator; Accessor1 = boost::_bi::protected_bind_t<boost::_bi::bind_t<notmylib::DataIterator, notmylib::DataIterator (*)(const mylib::PyData&), boost::_bi::list1<boost::arg<1> > > >; Accessor2 = boost::_bi::protected_bind_t<boost::_bi::bind_t<notmylib::DataIterator, notmylib::DataIterator (*)(const mylib::PyData&), boost::_bi::list1<boost::arg<1> > > >; NextPolicies = boost::python::return_value_policy<boost::python::return_by_value>]'
/usr/include/boost/python/detail/invoke.hpp:75:82:   required from 'PyObject* boost::python::detail::invoke(boost::python::detail::invoke_tag_<false, false>, const RC&, F&, AC0&) [with RC = boost::python::to_python_value<const boost::python::objects::iterator_range<boost::python::return_value_policy<boost::python::return_by_value>, notmylib::DataIterator>&>; F = boost::python::objects::detail::py_iter_<const mylib::PyData, notmylib::DataIterator, boost::_bi::protected_bind_t<boost::_bi::bind_t<notmylib::DataIterator, notmylib::DataIterator (*)(const mylib::PyData&), boost::_bi::list1<boost::arg<1> > > >, boost::_bi::protected_bind_t<boost::_bi::bind_t<notmylib::DataIterator, notmylib::DataIterator (*)(const mylib::PyData&), boost::_bi::list1<boost::arg<1> > > >, boost::python::return_value_policy<boost::python::return_by_value> >; AC0 = boost::python::arg_from_python<boost::python::back_reference<const mylib::PyData&> >; PyObject = _object]'
/usr/include/boost/python/detail/caller.hpp:223:13:   required from 'PyObject* boost::python::detail::caller_arity<1u>::impl<F, Policies, Sig>::operator()(PyObject*, PyObject*) [with F = boost::python::objects::detail::py_iter_<const mylib::PyData, notmylib::DataIterator, boost::_bi::protected_bind_t<boost::_bi::bind_t<notmylib::DataIterator, notmylib::DataIterator (*)(const mylib::PyData&), boost::_bi::list1<boost::arg<1> > > >, boost::_bi::protected_bind_t<boost::_bi::bind_t<notmylib::DataIterator, notmylib::DataIterator (*)(const mylib::PyData&), boost::_bi::list1<boost::arg<1> > > >, boost::python::return_value_policy<boost::python::return_by_value> >; Policies = boost::python::default_call_policies; Sig = boost::mpl::vector2<boost::python::objects::iterator_range<boost::python::return_value_policy<boost::python::return_by_value>, notmylib::DataIterator>, boost::python::back_reference<const mylib::PyData&> >; PyObject = _object]'
/usr/include/boost/python/object/py_function.hpp:38:33:   required from 'PyObject* boost::python::objects::caller_py_function_impl<Caller>::operator()(PyObject*, PyObject*) [with Caller = boost::python::detail::caller<boost::python::objects::detail::py_iter_<const mylib::PyData, notmylib::DataIterator, boost::_bi::protected_bind_t<boost::_bi::bind_t<notmylib::DataIterator, notmylib::DataIterator (*)(const mylib::PyData&), boost::_bi::list1<boost::arg<1> > > >, boost::_bi::protected_bind_t<boost::_bi::bind_t<notmylib::DataIterator, notmylib::DataIterator (*)(const mylib::PyData&), boost::_bi::list1<boost::arg<1> > > >, boost::python::return_value_policy<boost::python::return_by_value> >, boost::python::default_call_policies, boost::mpl::vector2<boost::python::objects::iterator_range<boost::python::return_value_policy<boost::python::return_by_value>, notmylib::DataIterator>, boost::python::back_reference<const mylib::PyData&> > >; PyObject = _object]'
pydata.cpp:26:1:   required from here
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_iterator_base_types.h:166:53: error: no type named 'iterator_category' in 'class notmylib::DataIterator'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_iterator_base_types.h:167:53: error: no type named 'value_type' in 'class notmylib::DataIterator'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_iterator_base_types.h:168:53: error: no type named 'difference_type' in 'class notmylib::DataIterator'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_iterator_base_types.h:169:53: error: no type named 'pointer' in 'class notmylib::DataIterator'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_iterator_base_types.h:170:53: error: no type named 'reference' in 'class notmylib::DataIterator' 
```

应该如何暴露这样一个可迭代的类？

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:09:06.307

我怀疑 Boost.Python 依赖于`DataIterator`成为符合标准的 C++ 迭代器才能工作。

您可以尝试使用`iterator_facade`Boost 中的机制来包装迭代器：

[http://www.boost.org/doc/libs/release/libs/iterator/doc/iterator_facade.html](http://www.boost.org/doc/libs/release/libs/iterator/doc/iterator_facade.html)

# c# - 关于线程和连接用法的基本查询 c#

> ID：15659611
> 
> 赞同：1
> 
> 时间：2013-03-27T13:08:14.907
> 
> 标签：c#, multithreading

有时我在我的程序中使用了线程，但我从不使用 join()。我得到了一些关于 join() 的信息，如下所示

```
Join will stop the current running thread and let the "Join" thread runs until it finishes.

static void Main()
{
  Thread t = new Thread (Go);
  t.Start();
  t.Join();
  Console.WriteLine ("Thread t has ended!");
}

static void Go()
{
  for (int i = 0; i < 10; i++) Console.Write ("y");
} 
```

从上面的代码中，我只是不明白 join() 在这里扮演什么样的重要角色。请讨论加入用法。

如果可能的话，给我一个关于join（）的小现实代码，这样我就可以理解join（）的良好用途。

还指导我 join() 可以在多线程环境中使用。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:16:22.290

以您发布的代码为例，如果它是这样编写的：

```
static void Main()
{
  Thread t = new Thread (Go);
  t.Start();
  Console.WriteLine ("Thread t has ended!");
}

static void Go()
{
  for (int i = 0; i < 10; i++) Console.Write ("y");
} 
```

您的输出将类似于以下内容：

yyy 线程 t 已结束！yyyyyyy

意义`Go()`同时运行`Console.WriteLine ("Thread t has ended!");`

通过添加 t.join()，您可以等到线程完成后再继续。如果您只希望代码的一部分与线程同时运行，这很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:19:37.763

如果您从代码应用程序中删除 t.Join()，它将在您确定 Go() 方法执行之前结束执行。

如果您有 2 个或更多方法可以同时执行，但所有方法都需要完成，然后才能执行依赖于它们的方法，则 Join 非常有用。

请看下面的代码：

```
static void Main(string[] args)
        {
        Thread t1 = new Thread(Method1);
        Thread t2 = new Thread(Method2);
        t1.Start();
        t2.Start();
        Console.WriteLine("Both methods are executed independently now");
        t1.Join(); // wait for thread 1 to complete
        t2.Join(); // wait for thread 2 to complete
        Console.WriteLine("both methods have completed");
        Method3(); // using results from thread 1 and thread 2 we can execute  method3 that can use results from Method1 and Method2

        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:14:27.800

阻塞调用线程，直到线程终止。

注意：您还可以阻塞调用线程，直到线程终止或指定时间过去，同时继续运行标准 COM 和 SendMessage 泵。支持的。NET 紧凑型框架。

链接： http: [//msdn.microsoft.com/fr-fr/library/system.threading.thread.join (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.threading.thread.join(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T13:15:06.937

考虑一些游戏示例。

```
static void Main()
{
  Thread t = new Thread (LoadMenu);
  t.Start();
  Showadvertisement();
  t.Join();
  ShowMenu();
}

static void LoadMenu()
{
    //loads menu from disk, unzip textures, online update check.
}

static void Showadvertisement()
{
    //Show the big nvidia/your company logo fro 5 seconds
}

static void ShowMenu()
{
   //everithing is already loaded. 
} 
```

关键是你可以在两个线程中做多件事，但在某一时刻你应该同步它们并确保一切都已经完成

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T13:12:51.843

.Join() 调用等待线程结束。我的意思是当您的 Go 方法返回时，此调用将返回。

# objective-c - 从单例中传递代表？

> ID：15659612
> 
> 赞同：0
> 
> 时间：2013-03-27T13:08:15.883
> 
> 标签：objective-c

在这里的好人的帮助下，我能够写一个单例，但不能从中获得代表。

一开始我有一`socketConnector`堂课，从`Home`课堂上，我为他做了一个实例，并从他那里得到了一个代表：

```
 socketInstance=[[SocketConnector alloc]init]; //in Home class
        socketInstance.delegate=self; 
```

比我需要为他创建一个单身人士，而且仍然让他的代表到`Home`.

所以我创建了一个单例类名：`sharedConnector`在其中我有：

```
+(sharedConnector*)defaultConnector
{
    static  sharedConnector   *myConnector ;
    @synchronized(self)
    {
        if( myConnector==nil  )
            myConnector=[[sharedConnector alloc]init ];
        return myConnector;
    }   
}

    - (id)init
    {
        if (self = [super init])
        {
            connector=[[SocketConnector alloc]init]; //setting here the socketClass
        }
        return self;
    } 
```

如您所见，我在这里设置了一次套接字类，而不是从`Home`类中使用它：

```
 [sharedConnector defaultConnector].connector.delegate=self; //setting delegates to home! 
```

（连接器在单例上有一个属性）它确实有效，但我不再让代表回家了。（所有的代表函数仍然在 Home 类中，因为它们在开始时所在的位置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:24:49.010

您正在`connection`直接访问与`self.connection`（使用综合方法）不同的访问。

所以改变：

```
connector=[[SocketConnector alloc]init]; 
```

至

```
self.connector=[[SocketConnector alloc]init]; 
```

有一个很好的解释为什么[在这里](https://stackoverflow.com/a/1551976/986169)

# php - 登录检查用户存在并设置为活动

> ID：15659617
> 
> 赞同：0
> 
> 时间：2013-03-27T13:08:34.407
> 
> 标签：php, login

我一直试图让下面的代码工作几个小时。这个想法是它检查我的数据库（b00543346）和表“成员”以查看用户是否存在（因此他们的 memberID 是否存在。然后它检查用户是否设置为活动状态。

目前无论我输入什么用户名/密码并按登录，都会显示“数组（[0] => 未找到用户名。您注册了吗？）”

```
<?php
function user_exists($username) {
    $username = sanitize($username);
    return (mysql_result(mysql_query ("SELECT COUNT (`membersID`) FROM `members` WHERE `username` = '$username'"), 0) == 1) ? true : false; //check if user id exists
}

function user_active($username) {
    $username = sanitize($username);
    return (mysql_result(mysql_query ("SELECT COUNT (`membersID`) FROM `members` WHERE `username` = '$username' AND `active` = 1"), 0) == 1) ? true : false; //check if user has activated account
}
?>

    <?php
include 'core/init.php';

if (empty($_POST) === false) {
    $username = $_POST['username'];
    $password = $_POST['password'];

    if (empty($username) === true || empty($password) === true) {
        $errors[] = 'You Must Enter a Username AND Password';
    } else if (user_exists($username) === false) {
        $errors[] = 'Username Not Found. Have You Registered?';
    } else if (user_active($username) === false) {
        $errors[] = 'You Haven\'t Activated Your Account, Please Do So!';   
    }
    print_r($errors);
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:36:36.933

**编辑：** PHP 中的 mysql 函数不喜欢函数名和第一个左括号之间的空格。所以***count( `membersID`)***会起作用，而***count( `membersID`)***会报错！

我很好奇你的 sanitize() 函数在做什么。如果它完全修改了用户名，那么您的初始测试数据很可能是手动输入到表中的，而不是通过 sanitize() 函数运行，然后当代码清理并可能修改数据时，它在 SQL 中不匹配。

您还可以为您的函数添加一些调试，以更好地了解正在发生的事情。当前的功能正在混淆一些正在发生的事情。尝试：

```
function user_exists($username) {
  print "DEBUG: username=[$username]\n";
  $query = "SELECT COUNT (`membersID`) FROM `members` WHERE `username` = '$username'";
  print "DEBUG: query=$query\n";
  $result = mysql_query($query);
  if (!$result) {
    die('Could not execute query:' . mysql_error());
  }
  print "DEBUG Result Set Array\n";
  print_r(mysql_fetch_assoc($result));
  print "DEBUG just the result now\n";
  print mysql_result($result, 0);
  return mysql_result($result, 0) == 1; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:19:56.750

我不太喜欢 PHP 的标准 SQL 函数，所以我无法判断。但是你试过了吗

```
SELECT COUNT (*) FROM `members` WHERE `username` = '$username' 
```

# java - 如何加密我的 config.raw 文件以避免任何类型的攻击？

> ID：15659624
> 
> 赞同：0
> 
> 时间：2013-03-27T13:08:46.277
> 
> 标签：java, android, cryptography, app-config

我正在开发一个通过 Web 服务（WS）与服务器通信的 android 项目。访问我的服务器的所有 URL 都在 config.raw 文件中声明。

*为了防止任何类型的攻击，只有 web 服务有权访问服务器。*

我必须通过网络服务（WS）将文件上传到服务器。所以我对其进行了编码，以便将其作为 varbinary 发送并保存在 Sql 数据库中。但是由于他的大小，WS 无法接收流。所以我决定在不通过 web 服务的情况下上传它，但是访问服务器的 url 在 config.raw 文件中。

***我知道只要使用 apk 文件，就可以恢复项目。***

> 我的问题：有没有办法加密这个文件以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:14:56.747

Bouncy Castle 的一些算法随 Android 一起提供，但我建议为此使用 Spoongy Castle。使用对称加密/解密（例如 AES）

# jquery - 如何使用 jQuery 创建空的 4x4 表？

> ID：15659626
> 
> 赞同：1
> 
> 时间：2013-03-27T13:08:50.173
> 
> 标签：jquery, html-table

我在用 jQuery 创建表时遇到了一点问题。这是我到目前为止所做的。

jQuery：

```
function createPuzzleTable () {
  // Create table with id
  $pt = $('<table>').attr('id','puzzleTable');

  // For-loop to create rows
  for (var y=0; y<4; y++) {
    var $row = $pt.append($('<tr>'));
    // For-loop to create cells, text-method is only for test numbering cells
    for (var x=0; x<4; x++) {
      $row.children().append($('<td>').text(y*4+x+1));
    }
  }
  // Alert to show structure of table
  alert ($pt.prop('outerHTML'));

  // Fetch gameArea by id and add table.
  $('#gameArea').append($pt);
} 
```

警报（已清除）：

```
<table id="puzzleTable">
  <tbody>
    <tr></tr><td>1</td><td>2</td><td>3</td><td>4</td>
    <tr></tr><td>5</td><td>6</td><td>7</td><td>8</td>
    <tr></tr><td>9</td><td>10</td><td>11</td><td>12</td>
    <tr></tr><td>13</td><td>14</td><td>15</td><td>16</td>
  </tbody>
</table> 
```

如何在 <tr>-elements 中设置 <td>-elements？

* * *

解决方案（感谢 Paolo Bergantino）：

```
for (var y=0; y<4; y++) {
  var $row = $('<tr>');
  $pt.append($row);
  for (var x=0; x<4; x++) {
    $row.append($('<td>').text(y*4+x+1));
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:14:05.160

你想做这样的事情：

```
var $row = $('<tr/>');
for(..) {
   $row.append($('<td/>')...);
}
$pt.append($row); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:15:06.487

我认为这是一种更好的方法：

```
function createPuzzleTable () {
    // Create table with id
    var $pt = '<table id="puzzletable">';

    // For-loop to create rows
    for (var y=0; y<4; y++) {
         // For-loop to create cells, text-method is only for test numbering cells

        $pt += '<tr>';

        for (var x=0; x<4; x++) {
            $pt += '<td>';
            //add content to TD here
            $pt += '</td>';
        }

        $pt += '</tr>';
    }

    $pt += '</table>';
    $('#gameArea').append($pt);
} 
```

使用此方法意味着您只需在已将表格的 HTML 设置为字符串之后操作 DOM 一次。

# topshelf - 如何自动化 Topshelf 交互式服务安装？

> ID：15659627
> 
> 赞同：3
> 
> 时间：2013-03-27T13:08:51.190
> 
> 标签：topshelf

我有几个在特定服务帐户下运行的 Topshelf 服务。如果我从命令行手动安装服务，我可以使用 --interactive 标志，然后会出现一个对话框，允许我输入用户名和密码。我希望能够通过 Powershell 脚本自动执行此操作。

有谁知道如何做到这一点？（不特别关心 Powershell，但我如何在任何安装脚本中提供用户名和密码。）

正如 Travis 提到的，我查看了命令行选项。几乎为我工作，但现在我有一个逃避问题。要安装，您可以键入，例如，MyService.exe install -username:Foo -password:Bar。

但是，我必须为用户名选项提供域和用户名（我通过执行 --interactive 路由知道这一点）： MyService.exe install -username:mydomain\$myusername -password:Bar

我找不到一种方法来逃避这个有效的方法！抱歉 - 我的问题已经演变成其他问题，可能需要将其标记为已回答并打开另一个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:45:09.633

Travis 使用命令行选项为我指明了正确的方向。我的服务帐户用户名还有一个问题，该用户名以“$”为前缀：domain\$myuser。我找不到逃避它的方法，所以“安装”命令会接受它。

我们创建了一个类似的用户名“myuser”（没有 $）。现在这工作得很好：

```
MyService.exe install -username:domain\myuser -password:Bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:22:15.887

用户名和密码是我设置中服务的 app.config 中的配置。这用于`RunAs`.

此外，Topshelf 还有其他[命令行选项](http://docs.topshelf-project.com/en/latest/overview/commandline.html)。我不知道文档是否 100% 是最新的，但这是一个很好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T14:16:57.893

对于未来的读者：

看到这个网址：

[https://kristofmattei.be/2015/01/15/topshelf-install-powershell-get-credentials/](https://kristofmattei.be/2015/01/15/topshelf-install-powershell-get-credentials/)

这是上面网址中的重要引述

# 开始报价

```
So the best version is:

$credentialsOfCurrentUser = Get-Credential -Message "Please enter your username & password for the service installs"
$networkCredentials = $credentialsOfCurrentUser.GetNetworkCredential();
$username = $credentialsOfCurrentUser.UserName
$password = $networkCredentials.Password

Now that we have those variables we can pass them on to the install of the Topshelf exe:

. $pathToServiceExe install -username `"$username`" -password `"$password`" --autostart

Notice the backticks (`) to ensure the double quotes are escaped. 
```

# 结束报价

# c - 如何从 argv[] 中调用 memcpy()？

> ID：15659628
> 
> 赞同：4
> 
> 时间：2013-03-27T13:08:52.387
> 
> 标签：c, arrays, string, command-line-arguments, copying

我想从中复制字符串，`argv[0]`但我不知道如何获取`argv[0]`.

这个怎么做？

```
int main(int argc, char* argv[])
{
  char str[20];
  if(argc>0)
      memcpy(str, argv[0], sizeof(argv[0]));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:12:14.033

因为`argv[0]`是字符串，所以使用`strlen`.

```
#include <string.h>

size_t length = strlen (argv[0]) + 1;

memcpy (str, argv[0], length); 
```

顺便说一句，你也可以使用`strcpy`更适合*字符串*的。

```
#include <string.h>

strcpy (str, argv[0]); 
```

在每种情况下，为了确保您的副本不会溢出，您应该检查大小`str`是否足够。

```
if (sizeof str >= length)
{
  /* Do the copy. */
}
else
{
  /* Report an error, or use dynamic allocation. */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:34:13.303

`strdup()`如果您的平台支持，您可以使用它。这使您的代码更简单

```
int main(int argc, char* argv[])
{
  char *str = NULL;
  if(argc>0) {
      str = strdup(argv[0]);
  }

  .......
  // when the str became useless then free it
  free(str);
  ........
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:13:14.307

你需要使用`strlen`. 如果您要使用`sizeof`，那么您将获得`char*`.

要复制字符串，您应该使用`strcpy`或分配给另一个`char*`. 更好的是，`strncpy`与大小（目标大小 - 1）结合使用，以防止缓冲区溢出到`str`. -1 用于说明空终止字符 ( `\0`)。不要忘记这个角色！如果 strlen 返回 20，问题就变成了。然后它将删除`\0`. 您还应该阅读[strcpy 的安全使用，](https://buildsecurityin.us-cert.gov/bsi-rules/home/g1/848-BSI.html)并且可以[在此处阅读有关 strncpy](http://www.tutorialspoint.com/ansi_c/c_strncpy.htm)的更多信息。

**或者**，你可以这样做，它使我所说的一切变得毫无意义：

`const char* arg1 = argv[0];`

`strlen`在这种情况下，这将毫无意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T07:52:03.353

这里有很多不好的建议，我不知道为什么，这个问题不是复杂的火箭科学，而是初学者级别的编程。

您检查 argv[0] 中是否有一个参数，但形式上总会有至少一个参数传递给 main。对 argc > 0 的检查被视为防御性编程，但额外的错误检查从来都不是坏事。

在复制未知缓冲区的内容之前，您需要检查缓冲区溢出。

```
#include <string.h>
#include <stdlib.h>

int main(int argc, char* argv[])
{
  if(argc == 0)
  {
    // unexpected error
  }

  size_t len = strlen(argv[0]);
  char* str =  malloc(len * sizeof(char) + 1);
  if(str == NULL)
  {
    // no memory, error
  } 

  strcpy(str, argv[0], len);

  ...

  free(str);
} 
```

就是这样。

* * *

*   strdup 是一个不好的建议，因为它不是 C 标准，因此不可移植。这也是一个完全多余的功能。
*   strncpy 是个坏建议，它从来没有打算作为 strcpy 的安全版本。它是恐龙 unix 系统中用于处理记录的旧功能。它比 strcpy 危险得多，因为它很容易忘记空终止。从来没有理由在现代 C 程序中使用 strncpy。由于某种未知的原因，有很多程序员被洗脑而使用 strncpy 作为防止缓冲区溢出的保护措施。不要这样做，正确的做法是在使用strcpy/memcpy之前确保缓冲区足够大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T14:47:37.040

总而言之，因为这里有很多混乱和不好的建议：

从最狭义的角度来看，您的问题的答案是，您可以使用[`strlen`](http://linux.die.net/man/3/strlen)(`sizeof`返回数据类型的大小（以字节为单位），对于 in 中的字符串`char*`，它（在典型的现代机器上）将是 4（在32 位系统）或 8（在 64 位系统上），无论字符串的长度如何），*但是*...

1.  确保这是您首先需要做的事情。如果您不打算更改字符串，则没有理由复制它。如果您确实打算更改它，则只需要在还想保留旧值时复制它，因为`argv`字符串是可变的（根据标准）。

    如果您不打算更改它或不需要旧值，但由于某种原因（可能是可读性）您仍然想要另一个变量，您应该将该变量声明为指针而不是数组并分配给它：

    ```
    char *str = argv[0]; 
    ```

2.  如果您确定确实要复制字符串，则不应*使用*它`memcpy`。您应该使用[`strcpy`](http://linux.die.net/man/3/strcpy)，并且**您应该确保您的新字符串足够大以容纳`argv[0]`**。如果您使用的是 C99，您可以轻松地做到这一点：

    ```
    char str[strlen(argv[0]) + 1];
    strcpy(str, argv[0]); 
    ```

    如果您使用的是旧标准，则需要动态分配内存：

    ```
    char *str = malloc(strlen(argv[0]) + 1);
    strcpy(str, argv[0]); 
    ```

    如果您使用的是 POSIX 系统，则可以使用以下方法缩短它[`strdup`](http://linux.die.net/man/3/strdup)：

    ```
    char *str = strdup(argv[0]); 
    ```

    如果您使用`malloc`or `strdup`，请记住，您需要在完成后手动释放内存。

    （顺便说一句，您不需要检查是否`argc > 0`在任何情况下；标准保证`argv[0]`是程序名称或零长度字符串（即`argv[0][0]`is `'\0'`）。）

3.  如果您无法摆脱使用固定长度的缓冲区，您可以使用**如果**您记得手动终止生成的字符串**并且**如果字符串比缓冲区长，则可以截断您的字符串：[`strncpy`](http://linux.die.net/man/3/strncpy)

     ****```
    char str[20];
    strncpy(str, argv[0], 20); /* or 19, it doesn't matter. */
    str[19] = '\0'; 
    ```**** 

 ****我认为这就是一切。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T13:12:08.290

`char* argv[]`是一个指针数组 ( `char*`) 所以`sizeof(argv[0])`等于`sizeof(char*)`.

您可以使用[`strlen`](http://linux.die.net/man/3/strlen)：

```
memcpy(str, argv[0], strlen(argv[0]) + 1);  // +1 because of '\0' at the end 
```

或者甚至更好，您可以使用[`strcpy`](http://linux.die.net/man/3/strcpy)：

```
strcpy(str, argv[0]); 
```

但请注意， 的长度`argv[0]`可能大于目标缓冲区 ( `str`) 的大小，因此您应该`argv[0]`在复制之前检查 的大小。

您也可以使用[`strcnpy`](http://linux.die.net/man/3/strncpy)仅复制指定数量的字符，但在这种情况下要非常小心，因为如果`\0`的前 20 个字符中没有`argv[0]`，您将不得不明确终止您的字符串。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T13:49:18.023

If your Cxx is >= C99

than you can do it in this way:

```
int main(int argc, char* argv[])
{

    int len = (argc>0) ? strlen(argv[0]) : 0;

    char str[len+1];
    if (argc>0)
        memcpy(str, argv[0], len+1);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-27T14:32:49.327

我建议您使用指针并根据以下长度分配内存`argv[0]`：

```
int main(int argc, char* argv[])
{
  char *str = NULL;
  if(argc>0) {
      int len = strlen(argv[0])
      str = malloc((len+1)  * sizeof(char))
      memcpy(str, argv[0], (len+1));
  }

  .......
  // when the str became useless then free it
  free(str);
  ........
} 
```****

# iphone - 忽略文件 [路径] 在文件中缺少所需的体系结构 i386

> ID：15659631
> 
> 赞同：27
> 
> 时间：2013-03-27T13:09:06.523
> 
> 标签：iphone, xcode, cocoa-touch, xcode4.5

我对 Xcode 和 Iphone 开发很陌生，遇到了以下问题：

我打开了一个新项目并添加了 *.h 和 *.a 文件（我从某个设备供应商那里获得的）。我收到以下警告：

> ld：警告：忽略文件/Users/udi/Desktop/Xcode/Xcode Projects/Scosche/libmyTrekSDK_armv7.a，文件/Users/udi/Desktop/Xcode/Xcode Projects/Scosche/libmyTrekSDK_armv7.a 中缺少所需的架构i386（2 片)

如果我忽略警告，并尝试在头文件中实例化给我的类，我会收到以下错误：

> ld：警告：忽略文件 [Path/FileName.a]，在文件 [Path/FileName.a] 中缺少所需的架构 i386（2 片）
> 
> 架构 i386 的未定义符号：
> 
> “_OBJC_CLASS_$_HRMonitor”，引用自：
> 
> ViewController.o 中的 objc-class-ref
> 
> ld：未找到体系结构 i386 的符号
> 
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我已经检查了框架搜索路径（在许多其他帖子中都提到过）并且很清楚。

更多信息：

1.  我正在使用 Xcode 4.6.1
2.  这些文件当前位于项目的根文件夹中。
3.  我正在使用单视图应用程序模板。

感谢任何帮助

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-27T13:16:26.180

此警告表示您正在尝试将为设备 (ARM) 制作的库与您的模拟器 (i386) 一起使用。

您可以使用此终端命令创建通用库：

```
lipo -create lib_arm.a lib_i386.a -output lib_universal.a 
```

更多关于**lipo**命令的信息[在这里](http://www.unix.com/man-page/osx/1/lipo/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-06T16:10:16.327

将目标的“构建设置 > 仅构建活动架构”更改为“否”

这与 Dmitry Zhukov 的回答做同样的事情，但通过 Xcode 做，而不是绕过它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-02T08:58:09.373

如果您使用的是第 3 方代码，请记住，某些 SDK 可能无法在模拟器上运行。当我在设备上运行项目时，我遇到的相同构建错误消失了。

# r - 我如何在 R 中按组进行总结？

> ID：15659636
> 
> 赞同：-3
> 
> 时间：2013-03-27T13:09:18.390
> 
> 标签：r

我正在使用摘要来获取数字列表的统计信息：

```
read.csv('nums.txt', header = F)
summary(x) 
```

数字.txt：

```
value
1
2
3 
```

如何使用汇总功能按组/类别汇总这些数据？

数字.txt

```
category,value
A,1
A,2
A,3
B,4
B,5
B,6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:31:26.100

如果我用谷歌搜索“r summary by”，第一个出现的答案是指向[http://www.statmethods.net/stats/descriptives.html](http://www.statmethods.net/stats/descriptives.html)的链接， 它可以解决您的问题。

另一个没有提到的解决方案如下

```
 library(data.table)
 x <- data.table(x)

 x[, summary(Value), by=list(Group1, Group2)]   # assuming more than one group. Otherwise, just use by=Group1 
```

# c# - 我可以强制 ClassCleanup 在与 ClassInitialize 相同的线程中执行吗？

> ID：15659639
> 
> 赞同：0
> 
> 时间：2013-03-27T13:09:22.380
> 
> 标签：c#

在下面的代码片段中，我使用 ClassInitialize 和 Cleanup 围绕我正在运行的一系列测试包装事务。该代码在我的 GUI 测试运行程序中运行，但在 mstest 命令行中失败并出现以下错误。我可以强制类清理和初始化在同一个线程中吗？最好不要使用测试初始化​​和清理，因为它会显着减慢测试速度。

**代码**

```
 private static TransactionScope _trans;

    [ClassInitialize]
    public static void ClassInitialize(TestContext context)
    {
        _trans = new TransactionScope();
        //...do work
    }

    [ClassCleanup]
    public static void ClassCleanup()
    {
        _trans.Dispose();
    } 
```

**错误**

> *运行有以下问题： 类清理方法 GeoMetExplainSheetTests.TestCleanup 失败。错误消息：System.InvalidOperationException：TransactionScope 必须在创建它的同一线程上处理。*

堆栈跟踪：

> 在 System.Transactions.TransactionScope.Dispose()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:18:44.070

I suggest you to replace by removing `static modifier`

```
private TransactionScope _trans; 
```

# scala - 解析包含代码的字符串，返回一个类型

> ID：15659641
> 
> 赞同：2
> 
> 时间：2013-03-27T13:09:31.940
> 
> 标签：scala, reflection, scala-2.10

我想解析一段包含在 a 中的 scala 代码`String`并获得该[`reflect.runtime.universe.Type`](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.reflect.api.Types)表达式 ( `String => Type`) 的结果。我试过了：

```
scala> import scala.tools.nsc.interpreter.IMain
import scala.tools.nsc.interpreter.IMain

scala> new IMain().exprTyper.parse("scala.Option")
warning: there were 1 feature warning(s); re-run with -feature for details
res1: Option[List[_2.repl.global.Tree]] forSome { val _2: scala.tools.nsc.interpreter.IMain#exprTyper.type } = Some(List(scala.Option))

scala> .get.head
warning: there were 1 feature warning(s); re-run with -feature for details
res2: _2.repl.global.Tree forSome { val _2: scala.tools.nsc.interpreter.IMain#exprTyper.type } = scala.Option

scala> .tpe
res3: _2.type#repl.global.Type = null

scala> new IMain().runtimeTypeOfTerm("scala.Option")
warning: there were 1 feature warning(s); re-run with -feature for details
res5: _74.global.Type forSome { val _74: scala.tools.nsc.interpreter.IMain } = <notype>

scala> new IMain().typeOfTerm("scala.Option")
warning: there were 1 feature warning(s); re-run with -feature for details
res6: _75.global.Type forSome { val _75: scala.tools.nsc.interpreter.IMain } = <notype> 
```

有可能吗，如果有，你是怎么做的？谢谢。

**UPD：**我已经表达了实际意图以及我现在在这个问题中的位置：[Getting type information inside scala repl via IMain](https://stackoverflow.com/questions/15678616/getting-type-information-inside-scala-repl-via-imain)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:57:23.427

因此，在潜伏在 SO 周围（特别感谢[这个答案](https://stackoverflow.com/a/11394410/163423)）之后，我收敛到以下结果：

```
scala> def toType(expr: String): Type = {
     | import scala.tools.reflect.ToolBox
     | import scala.reflect.runtime.{currentMirror => m}
     | val tb = m.mkToolBox()
     | val exp = tb.parse(expr.trim)
     | tb.typeCheck(exp).tpe
     | }
toType: (expr: String)reflect.runtime.universe.Type

scala> toType("Option")
res2: reflect.runtime.universe.Type = Option.type

scala> toType("List")
res3: reflect.runtime.universe.Type = scala.collection.immutable.List.type 
```

# ios - 在 AppDelegate 中的 openURL 之后进行 Segue

> ID：15659642
> 
> 赞同：2
> 
> 时间：2013-03-27T13:09:33.197
> 
> 标签：ios, objective-c, segue, openurl

我有一个带有打开另一个应用程序的操作（toggleApplication）的按钮。当我从打开的应用程序返回应用程序时，我想转到另一个视图。但我从我的代码中得到以下错误：

**接收器（RootViewController：0x1f192450）没有标识符为“showReceipt”的segue**

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {

        RootViewController *controller = [RootViewController alloc];

        return [controller handleURL:url];

    } 
```

**根视图控制器.m**

```
- (IBAction)toggleApplication:(id)sender{

     // Open application
     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:theUrlString]];

}

- (BOOL)handleURL:(NSURL *)url{

     [self performSegueWithIdentifier:@"showReceipt" sender:self];

     return YES;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:28:55.273

通过使用 NSNotificationCenter 弄清楚了。

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {

        [[NSNotificationCenter defaultCenter] postNotificationName:@"segueListener" object:nil];

        return YES;

    } 
```

**根视图控制器.m**

```
- (void)viewDidLoad{

     [super viewDidLoad];

     [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiptSegue) name:@"segueListener" object:nil];

}    

- (IBAction)toggleApplication:(id)sender{

     // Open application
     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:theUrlString]];

    }

   - (void)receiptSegue{
        [self performSegueWithIdentifier:@"showReceipt" sender:self];
   } 
```

正是我想要的。不知道这是否是正确的方法。

# c++ - C ++在子范围内重新声明变量不会导致编译错误？

> ID：15659647
> 
> 赞同：2
> 
> 时间：2013-03-27T13:09:49.770
> 
> 标签：c++, visual-studio-2010

我遇到了一个必须交换某个对象的值的情况。由于我自己草率的复制和粘贴，我不小心也复制了类型声明。这是一个简化的示例：

```
int main()
{
    int i = 42;
    cout << "i = " << i++ << endl;

    // ... much later

    if( isSwapRequired == true )
    {
        int i = 24;
        cout << "i = " << i++ << endl;
    }
    cout << "i = " << i++ << endl;
} 
```

令我沮丧的是，编译器没有捕捉到这一点，而是继续让它`i = 24`生活在自己的小范围内。后来，事实证明，在范围之外，`i`仍然是`43`. 我注意到如果两者`i`处于同一级别，那么编译器会很乐意地捕捉到这个错误。编译器是否有理由以不同的方式处理多个声明？

如果重要的话，我正在使用 VS10。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T13:11:40.753

根据标准规定的规则，这个程序是完全有效和正确的，编译器不需要捕获任何东西，没有什么可以捕获的。

该标准允许相同的命名变量存在于它们各自的范围内，并且明确定义了在特定范围内使用它们时将引用哪个变量的规则。相同命名的变量在全局范围内**隐藏**或**隐藏变量。**

在您的本地范围内（*在条件`if`块*内），本地声明`i`的隐藏了全局`i`。如果您需要在此范围内访问全局`i`，则需要使用`::i`.

在条件块之外，唯一`i`存在的是全局声明的`i`.

* * *

在评论中回答问题：

尽管编译器实际上不必对此发出警告，但如果您在启用最高警告级别的情况下编译程序或明确告诉编译器警告此特定行为，大多数编译器都会为您提供此诊断。

对于**[GCC](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)**，您可以使用`-Wshadow`.

> -W阴影
> 
> 每当局部变量或类型声明遮蔽另一个变量、参数、类型或类成员（在 C++ 中），或者当一个内置函数被遮蔽时发出警告。请注意，在 C++ 中，如果局部变量隐藏了显式 typedef，编译器会发出警告，但如果它隐藏了 struct/class/enum，则不会发出警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:12:00.910

这不是多重声明，因为您的每个`i`s 都有不同的范围，并且本地范围始终支持全局范围。

如果你想`i`从顶层使用你的`main()`use `::i`。

请参阅[此处](http://www.tutorialspoint.com/cplusplus/cpp_variable_scope.htm)获取教程。

# java - 如何找到最大的数

> ID：15659648
> 
> 赞同：1
> 
> 时间：2013-03-27T13:09:53.833
> 
> 标签：java, arrays

如何计算最大数并显示？

```
import java.util.Scanner;

public class GreatestNumber {

  public static void main(String[] args) {
    int [] num = new int [10];
    int counter;
    int max = 0;

    Scanner read = new Scanner(System.in);

    for (int i=0; i<num.length; i++)
    {
        System.out.print("Enter StaffID to be edited:");
        num[i]=read.nextInt();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:14:10.277

您可能想在阅读时比较这些数字。此外，如果所有输入值都是负数，则`0`用作起始值`max`不会打印出您想要的结果。改用`Integer.MIN_VALUE`：

```
int [] num = new int [10];
int counter;
int max = Integer.MIN_VALUE; // <-- initial value

Scanner read = new Scanner(System.in);

for (int i = 0; i < num.length; i++)
{
    System.out.print("Enter StaffID to be edited:");
    num[i] = read.nextInt();
    if (num[i] > max)
    {
        max = num[i];
    }
}

System.out.print("Max number is:");
System.out.print(max); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:18:12.567

Beside the solution provided by other users, you can make a [List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html) from the Array and then use an already existing method that finds the maximum value in the list.

```
List list = Arrays.asList(ArrayUtils.toObject(num));
System.out.println(Collections.max(list)); //Will print the maximum value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:14:30.320

您可以这样做：

1.  由于您追求最大的数字，因此请创建一个具有非常小的值的整数。

2.  遍历数组的元素。如果您当前查看的元素大于当前最大元素（在步骤 1 中初始化），则更新最大元素的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:15:25.180

将运行变量设置`max`为`Integer.MIN_VALUE`。在循环中将其与数组中的每个元素进行比较，如果数组元素较大，则将其值复制到`max`. 最后你有最大的元素`max`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T13:14:58.213

跟踪当前的最大值并在找到更高的数字时更新它，即

```
if (num[i] > max)
  max = num[i]; 
```

# sorting - SlickGrid 排序时排除 slick-group（组标题）行

> ID：15659653
> 
> 赞同：1
> 
> 时间：2013-03-27T13:10:24.940
> 
> 标签：sorting, grouping, slickgrid

我将 SlickGrid 与 Groupings 一起使用，需要对每个 Group 中的数据进行排序，但将 Grouping（组标题行）保留为默认顺序。

排序似乎对列数据进行排序，然后根据数据重新排序分组标题。
有没有人这样做或者我的选项/参数设置不正确？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T08:07:52.477

由于U没有提供源，我猜你的问题是排序方法，它只按选定的列排序，所以你必须先按分组列排序。

假设您按 UserName 分组并具有可排序的列 Title，您的 onSort 方法应类似于以下内容：

```
grid.onSort.subscribe(function (e, args) {
  sortdir = args.sortAsc ? 1 : -1;
  sortcol = args.sortCol.field; // Title column

  var comparer = function (a, b) {
    var x = a['UserName'], y = b['UserName'];
    if (x != y)
    {
     return (x < y ? 1 : -1) * sortdir;
    }
    else
    {
     x = a[sortcol];
     y = b[sortcol];
     return (x == y ? 0 : (x > y ? 1 : -1));
    }  
  };

  dataView.sort(comparer, args.sortAsc);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T18:21:33.977

这是我的分组+排序示例。请注意，当我想对它进行排序时，它会对您分组的列进行排序，除非它是按列分组，否则我不能对任何其他列进行排序（尽管你可以玩接着就，随即）

```
<select id="slc_groupby" name="slc_groupby" onchange="groupByColumn(this.value)">
    <option value="">...</option>
    <option value="assy_number">Assy Number</option>
</select>
<span id="span_group_btn" style="position:absolute; display:none; margin-left:5px; margin-top:20px;">
    <!-- Group sorting, I show this button only after a grouping column is chosen  -->
    <img src="/images/b_updownarrow2.gif" id="img_sorting" border="0" onclick="groupByColumn( $('#slc_groupby').val() )" />
</span> 
```

这里是用于分组+排序的 javascript 函数，请注意，每当您单击排序按钮（html ID=img_sorting 的顶部按钮）时，它具有通过 groupByColumn() 函数重新组合和重新排序的效果（因为我' m 使用 onclick 事件），虽然它发生得如此之快，以至于你并没有真正看到它再次进行分组......但这就是我让它在所有浏览器中工作的方式（包括 Chrome）

```
function groupByColumn(column) {
    // sorting direction, if undefined just inverse the current direction of the global sortdir var (sortdir is defined as global variable in slickgrid)
    sortdir = ((sortdir == 1) ? -1 : 1);

    dataView1.groupBy(
        column,
        function (g) {
            return g.value + "  <span style='color:green'>(" + g.count + " items)</span>";
        },
        function (a, b) {
            var a1 = a.value;
            var b1 = b.value;

            // string sorting
            return sortdir * (a1 == b1 ? 0 : (a1 > b1 ? 1 : -1));
        }
    );

    // display the button for group sorting
    $('#span_group_btn').css("display", "inline");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-10T15:06:04.617

假设您将使用 4 个不同的列进行分组 - 部门、教师、课程、学期。排序时，您手动比较这些列，并始终按升序或降序对它们进行排序（以您的默认顺序开始），对于其余列，您通过翻转比较函数的结果来使用排序方向

```
function comparer(a, b) {
    return (x == y ? 0 : (x > y ? 1 : -1));
}

grid.onSort.subscribe(function(e, args) {
        $(e.target).parents(".slick-header-columns").find(
                ".slick-header-column").removeClass(
                "slick-header-column-sorted");
        var currentCol = $(e.target).hasClass("slick-header-column") ? $(e.target): $(e.target).parents(".slick-header-column");
        currentCol.addClass("slick-header-column-sorted");
        currentCol.find(".slick-sort-indicator").removeClass(args.sortAsc ? "desc" : "asc").addClass(args.sortAsc ? "asc" : "desc");
        var sortdir = args.sortAsc ? 1 : -1;
        var sortcol = args.sortCol.field;
        var items = dataView.getItems();
        items.sort(function(a, b) {
            var deptCompare = a.department == b.department ? 0 : (a.department < b.department ? -1 : 1);
            if (deptCompare === 0) {
                var facultyCompare = a.faculty == b.faculty ? 0 : (a.faculty < b.faculty ? -1 : 1);
                if (facultyCompare === 0) {
                    var courseCompare = a.course == b.course ? 0 : (a.course < b.course ? -1 : 1);
                    if (courseCompare === 0) {
                        var semesterCompare = a.semester == b.semester ? 0 : (a.semester < b.semester ? -1 : 1);
                        if (semesterCompare === 0) {
                            var fieldCompare = comparer(a[sortcol], b[sortcol]);
                            return fieldCompare * sortdir;
                        } else {
                            return semesterCompare;
                        }
                    } else {
                        return courseCompare;
                    }

                } else {
                    return facultyCompare;
                }
            } else {
                return deptCompare;
            }
        });
        dataView.refresh();

    }); 
```

实现相同目的的第二种方法是分组级别的用户比较器。您为组定义一个比较器，

```
function groupComparer(a, b) {
    var x = a.groupingKey
    var y = b.groupingKey;
    return (x == y ? 0 : (x > y ? 1 : -1));
} 

dataView.setGrouping([
    {
        getter : "department",
        collapsed : false,
        formatter : function(g){
            return g.value;
        },
        comparer : groupComparer
    },{
        getter : "faculty",
        collapsed : false,
        formatter : function(g){
            return g.value;
        },
        comparer : groupComparer
    },{
        getter : "course",
        collapsed : false,
        formatter : function(g){
            return g.value;
        },
        comparer : groupComparer
    },{
        getter : "semester",
        collapsed : false,
        formatter : function(g){
            return g.value;
        },
        comparer : groupComparer
    }
]); 
```

和用户定期排序

```
grid.onSort.subscribe(function (e, args) {
    dataView.sort(function(a,b){
        var x = a[args.sortCol.field];
        var y = b[args.sortCol.field];

        return (x == y ? 0 : (x > y ? 1 : -1));
    }, args.sortAsc);
}); 
```

# ios - 使用 StoreKit 显示有关其他应用程序的信息。（不是应用内购买）

> ID：15659658
> 
> 赞同：0
> 
> 时间：2013-03-27T13:10:40.753
> 
> 标签：ios, storekit

是否可以在我的新应用程序中检索有关我在 appstore 上的其他应用程序的信息（SKProduct），还是只能检索有关应用程序内购买的信息？如果是这样，该应用是否必须启用“应用内购买”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:33:31.170

Apple 提供搜索 API： http: [//www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)

只需创建使用所需参数实现 NSURLConnection 的 NSObject 类，并使用 JSON 解码检索响应。

# vb.net - 当我们在 vb.net 的文本框中输入一些单词时，显示从数据库到 TextBox 弹出窗口的相关匹配

> ID：15659659
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:10:41.203
> 
> 标签：vb.net

我在 Vb.net 中遇到了一些问题，我从过去 2 天开始使用 Google，但没有得到任何与我的问题相关的答案，qtn 是当用户在文本框中输入一些文本时，与文本如何显示弹出窗口相关，就像我们输入一些谷歌中的单词然后谷歌显示所有相关字段..我附上快照的人请帮助我..我使用 vb.net 作为后端和 MS-Access 作为前端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:23:27.713

嘿伙计们，我得到了答案一步一步（vb.net）第一次宣布这是一个全球性的

```
Dim lst As New List(Of String)
Dim rdrOLEDB As OleDbDataReader
Dim MySource As New AutoCompleteStringCollection() 
```

第二次加载表单或根据您的逻辑，但确保它只出现一次意味着不要在第三步中包含此代码（即按键）

```
 If ComboBox1.SelectedItem <> "" Then
        ComboBox4.Enabled = True
        cmdOLEDB.CommandText = "SELECT studentname FROM StudentDetail WHERE std = '" & ComboBox1.SelectedItem & "' "
        cmdOLEDB.Connection = cnnOLEDB
        rdrOLEDB = cmdOLEDB.ExecuteReader
        If rdrOLEDB.Read = True Then
            lst.Add(rdrOLEDB.Item(0).ToString)
            While rdrOLEDB.Read
                lst.Add(rdrOLEDB.Item(0).ToString)
            End While
        End If
        rdrOLEDB.Close()
        MySource.AddRange(lst.ToArray)
        TextBox2.AutoCompleteCustomSource = MySource

        'Auto complete mode set to suggest append so that it will sugesst one
        'or more suggested completion strings it has bith ‘Suggest’ and
        '‘Append’ functionality
        TextBox2.AutoCompleteMode = AutoCompleteMode.SuggestAppend

        'Set to Custom source we have filled already
        TextBox2.AutoCompleteSource = AutoCompleteSource.CustomSource

    Else
        MsgBox("please select std.")
    End If 
```

第三步是文本框按键 If e.KeyCode = Keys.Enter Then ' On enter 我计划将它添加到列表 If Not lst.Contains(TextBox2.Text) Then ' If item not present already ' 直接添加到源TextBox2.AutoCompleteCustomSource.Add(TextBox2.Text) End If ElseIf e.KeyCode = Keys.Delete Then '在删除键上，计划删除条目

```
 ' declare a dummy source
        Dim coll As AutoCompleteStringCollection = TextBox2.AutoCompleteCustomSource

        ' remove item from new source
        coll.Remove(TextBox2.Text)

        ' Bind the updates
        TextBox2.AutoCompleteCustomSource = coll

        ' Clear textbox
        TextBox2.Clear()

    End If                   ' End of ‘KeyCode’ condition 
```

如果它的帮助已满，请不要忘记点击其他人的搜索点（请原谅我的英语不好）

# c++ - 比 double 更精确的浮点数据类型？

> ID：15659668
> 
> 赞同：9
> 
> 时间：2013-03-27T13:11:11.637
> 
> 标签：c++, types

在我的项目中，我必须计算`double`元素矩阵的除法、乘法、减法、加法。问题是当矩阵的大小增加时，我的输出的准确性会受到极大的影响。目前我正在使用`double`我认为使用内存的每个元素，并且无论小数点位置如何，`8 bytes`它的准确性都是如此。`16 digits`即使对于大尺寸的矩阵，所有元素占用的内存也在几千字节的范围内。所以我可以负担得起`datatypes`需要更多内存的使用。所以我想知道哪种数据类型比`double`. 我尝试在一些书籍中搜索并且我可以找到`long double`。但我不知道它的精度是多少。如果我想要比这更精确怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T13:28:04.257

根据 Wikipedia，80 位“英特尔”IEEE 754[扩展精度](http://en.wikipedia.org/wiki/Extended_precision) `long double`，即 80 位填充到内存中的 16 个字节，具有 64 位尾数，没有隐式位，可以得到 19.26 个十进制数字。多年来，这几乎是普遍的标准`long double`，但最近情况开始发生变化。

较新的 128 位[四精度](http://en.wikipedia.org/wiki/Quadruple_precision_floating-point_format)格式具有 112 个尾数位和一个隐式位，它可以得到 34 个十进制数字。GCC 将此作为`__float128`类型实现，并且（如果有记忆的话）有一个编译器选项可以设置`long double`它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T15:10:22.670

您可能需要考虑操作的顺序，即首先从最小值开始按有序顺序进行加法。这将使用尾数中的相同精度提高结果的整体准确性：

```
1e00 + 1e-16 + ... + 1e-16 (1e16 times) = 1e00
1e-16 + ... + 1e-16 (1e16 times) + 1e00 = 2e00 
```

关键是把小数加到大数上会使它们消失。所以后一种方法减少了数值误差

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T13:16:58.907

精度更高的浮点数据类型`double`将取决于您的编译器和体系结构。

为了获得更多的`double`精度，您可能需要依赖一些支持任意精度计算的数学库。不过，这些可能不会很快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:21:38.723

在 Intel 架构上，精度`long double`为[80 位](http://en.wikipedia.org/wiki/Extended_precision#x86_Extended_Precision_Format)。

你想代表什么样的价值观？也许你最好使用固定精度。

# c++ - 我可以将多图迭代逻辑放到另一个函数中吗？

> ID：15659669
> 
> 赞同：1
> 
> 时间：2013-03-27T13:11:25.913
> 
> 标签：c++, c++11, iteration, multimap

我对通过不重复的键向后循环特别感兴趣：

```
#include <map>
#include <iostream>
std::multimap<int,int> myMap = {
  {1,2}, {1,2}, {2,2}, {2,2}, {3,2},
};

int main() {
  using namespace std;
  cout << "the keys backwards:" << endl;
  typedef multimap<int, int> multimap_type;
  typedef std::reverse_iterator<multimap_type::iterator> reverse_iterator;
  for (auto it = myMap.rbegin(), end = myMap.rend(); it != end; it = reverse_iterator(myMap.lower_bound(it->first)))
  {
    cout << it->first << endl;
  }
} 
```

如您所见，我必须重复多图名称三遍。我可以编写自己的函数来处理所有这些，然后简单地调用 while 或 range for loop 吗？像那样：

```
while( (auto it = myIterFunc(myMap))  {
  //...
}

for ( auto it : myIterFunc(myMap)) {
  //...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:20:46.690

```
for ( auto it : myIterFunc(myMap)) { 
```

这些名称`it`和`myIterFunc`暗示您对新的基于范围的`for`循环感到困惑。变量`it`不是迭代器，它是范围的元素。该函数`myIterFunc`不应该返回迭代器，它应该返回看起来像一个范围的东西，即拥有`begin()`和`end()`允许迭代所需范围的成员。

您可以使用 Boost.Range 适配器[反向](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/adaptors/reference/reversed.html)循环：

```
#include <boost/range/adaptors.hpp>
for (auto& val : boost::adaptors::reverse(myMap))
    cout << val.first << endl; 
```

您可以将其与[过滤器适配器](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/adaptors/reference/filtered.html)结合使用以跳过重复的键。（有一个[唯一的适配器](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/adaptors/reference/uniqued.html)，但它用于`==`确定唯一性，而不仅仅是检查键）

# typo3 - 是否有一个 ATagAfterWrap 而不是 ATagBeforeWrap 或一个 wrapSubAndItem insted 的 wrapItemAndSub？

> ID：15659670
> 
> 赞同：2
> 
> 时间：2013-03-27T13:11:26.420
> 
> 标签：typo3, typoscript

首先，当谈到 Typoscript 时，我完全是新手，只是应该对页面进行一些 css 调整。但是，我想做一个小的调整。取而代之的是（在此上下文中使用了提到的 ATagBeforeWrap）：

```
<menulvl1>
    <li>
       <a>Menu-Lvl 1 Link</a>
       <submenu>
          <!--.... -->
       </submenu>
    </li>
</menulvl1> 
```

如果没有 ATagBeforeWrap（或设置为 0），我会读到：

```
 <li>
    <a>
        <submenu>
          <!--.... -->
       </submenu>
    </a>

 </li> 
```

但我想要的是这样的：

```
<li>    
    <submenu></submenu>
    <a>Menu-Lvl 1Link</a>
</li> 
```

**编辑：** 这是负责渲染的打字稿。对不起大量的代码：

```
# Copy basic menu object from TS template 'menu' so we don't have to repeat all that

#lib.menu.level2.wrap = TEXT

menu.top < menu.defaults
menu.top {
  # Also show pages which have not-in-menu flag set in page properties
  includeNotInMenu = 0

  # Create a menu out of the pages specifically listed under special.value
  special = directory
  special.value = {$menu.top.pages}

  entryLevel = 0

  1 {
    expAll = 1
    wrap = <ul class="layer1">|</ul>
    NO {
      doNotShowLink = 0
      wrapItemAndSub = <li class="first">|</li>|*|<li>|</li>|*|<li class="last">|</li>
      ATagParams = class="layer1"
    }
    ACT{
        wrapItemAndSub = <li class="first selected">|</li>|*|<li class="selected">|</li>|*|<li class="last selected">|</li>
        ATagParams = class="layer1 active"
    }
    IFSUB < .NO
    IFSUB.ATagParams = class="layer1"
    CUR < .ACT
    CUR.ATagParams = class="layer1 selected"
    CURIFSUB < .ACT
    CURIFSUB.ATagParams = class="layer1 selected"
  }

  2 < .1

  2.wrap(
    <div class="layer2" style="display:none;">
        <div class="inner-wrapper">
  )
  #2.wrap.insertData = 1

  2.NO.doNotLinkIt = 1
  2.ACT.doNotLinkIt = 1
  2.IFSUB.doNotLinkIt = 1
  2.CUR.doNotLinkIt = 1
  2.CURIFSUB.doNotLinkIt = 1

  2.NO.wrapItemAndSub = <div class="layer2-col first">|</div>|*|<div class="layer2-col">|</div>|*|<div class="layer2-col last">|</div>
  2.NO.ATagParams = class="layer2"
  2.ACT.wrapItemAndSub = <div class="layer2-col first">|</div>|*|<div class="layer2-col">|</div>|*|<div class="layer2-col last">|</div>
  2.ACT.ATagParams = class="layer2 selected"
  2.IFSUB.wrapItemAndSub = <div class="layer2-col first">|</div>|*|<div class="layer2-col">|</div>|*|<div class="layer2-col last">|</div>
  2.IFSUB.ATagParams = class="layer2"
  2.CUR.wrapItemAndSub = <div class="layer2-col first">|</div>|*|<div class="layer2-col">|</div>|*|<div class="layer2-col last">|</div>
  2.CUR.ATagParams = class="layer2 selected"
  2.CURIFSUB.wrapItemAndSub = <div class="layer2-col first">|</div>|*|<div class="layer2-col">|</div>|*|<div class="layer2-col last">|</div>
  2.CURIFSUB.ATagParams = class="layer2 selected"
  2.NO.linkWrap = <span class="layer2-headline">|</span>
  3 < .1
  #3.NO.doNotLinkIt = 0
  3.wrap = <ul class="layer2-wrap">|</ul>
  3.NO.wrapItemAndSub = <li>|</li>
  3.NO.ATagParams =
  3.ACT.ATagParams = class="active"
  3.IFSUB.ATagParams =
  3.CUR.ATagParams = class="selected"
  3.CURIFSUB.ATagParams = class="selected"

  stdWrap.prepend.data = LLL:{$filepaths.l10n}:nav_top
} 
```

和默认值：

```
menu.defaults = HMENU
menu.defaults {
   1 = TMENU
   1 {
     wrap = <ul>|</ul>

     # Always unfold all sub-levels of the menu
     expAll = 0

     # Remove the (old) default behaviour which adds onfocus="blurLink(this);" to all links
     noBlur = 1

     # Define the normal state (not active, not selected) of menu items
     # Using NO=1 to activate normal state is not necessary, but useful when copying
     NO = 1
     NO {
       # Use the page title field the title property on the A-tag, but only if the navigation title is set
       ATagTitle {
         field = title
         fieldRequired = nav_title
       }

       # Use the option-split feature to generate a different wrap for the last item on a level of the menu
       # The last item on each level gets class="last" added for CSS styling purposes.
       #
       # See the TSref documentation for details about option split and other features:
       # http://typo3.org/documentation/document-library/references/doc_core_tsref/current/
       #wrapItemAndSub = <li class="first">|</li> |*| <li>|</li> |*| <li class="last">|</li>
       wrapItemAndSub = <li>|</li>

       # HTML-encode special characters according to the PHP-function htmlSpecialChars
       stdWrap.htmlSpecialChars = 1
     }

     IFSUB = 1
     IFSUB < .NO
     IFSUB {
       wrapItemAndSub = <li class="subpages">|</li>
       ATagBeforeWrap = 1
     }

     # Copy properties of normal to active state, and then add a CSS class for styling
     ACT = 1
     ACT < .NO
     ACT {
       ATagParams = class="active"
     }

     # Copy properties of normal to current state, and then add a CSS class for styling
     CUR = 1
     CUR < .NO
     CUR {
       ATagParams = class="selected"
       #wrapItemAndSub = <li class="selected">|</li>
     }

     CURIFSUB < .IFSUB
     CURIFSUB {
       ATagParams = class="selected"
     }
   }
   2 < .1
   3 < .2
   stdWrap.prepend =< lib.srHint
 } 
```

这有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:20:27.203

我认为这样做的唯一方法是使用`before.cObject = HMENU`并根据包装内的当前值创建第二个菜单。

# ios - NSFetchedResultsController 性能问题

> ID：15659674
> 
> 赞同：1
> 
> 时间：2013-03-27T13:11:37.493
> 
> 标签：ios, objective-c, xcode, uitableview, nsfetchedresultscontroller

我有一个带有 5 个标签的标签栏控制器。每个选项卡都有一个表格视图控制器。其中两个是 NSFetchedResultsControllers。

每当用户点击表格视图中的某个项目时，该项目首先会保存到历史记录中，然后会继续显示。其中一个 NSFetchedResultsController 显示查看项目的历史记录，按日期排序。

当这些 NSFetchedResultsController 都没有被延迟实例化时，性能很好：

```
13:41:50.485 Saving to history…
13:41:50.487 CoreData: sql: BEGIN EXCLUSIVE
13:41:50.490 CoreData: sql: UPDATE ZSLBOOK SET ZDATEADDEDTOHISTORY = ?, Z_OPT = ?  WHERE Z_PK = ? AND Z_OPT = ?
13:41:50.495 CoreData: sql: COMMIT
13:41:50.511 Saved 
```

但是在负责显示历史的 NSFetchedResultsControllers 实例化后，速度会急剧下降，需要一到两秒（加上渲染下一个视图），所以应用程序似乎挂起。

```
13:42:08.750 Saving to history…
13:42:08.752 Will change
13:42:08.753 Object changed
13:42:09.579 Did change
13:42:09.594 CoreData: sql: BEGIN EXCLUSIVE
13:42:09.596 CoreData: sql: UPDATE ZSLBOOK SET ZCOVERIMAGE = ?, ZDATEADDEDTOHISTORY = ?, Z_OPT = ?  WHERE Z_PK = ? AND Z_OPT = ?
13:42:09.619 CoreData: sql: COMMIT
13:42:09.637 Saved 
```

只是为了让您知道发生了什么，这是我更新历史记录的代码：

```
- (void)addToHistory
{
    NSLog(@"Saving to history…");
    self.book.dateAddedToHistory = [NSDate date];
    NSError *error;
    [self.managedObjectContext save:&error];
    NSLog(@"Saved");
} 
```

在这些方法中调用日志消息：

```
controllerWillChangeContent ("Will change")
controller:didChangeObject ("Object changed")
controllerDidChangeContent ("Did change") 
```

NSFetchedResultsController 是标准实现的。即使我只有几行（5-10），性能也很慢。核心数据很好（从日志中可以看出它非常快），我将批量大小设置为 20，有索引等。所以问题出在 NSFetchedResultsController 的某个地方。

其中一种可能性是将 TVC 的获取结果控制器委托设置为 nil。但是管理更新非常困难，选择行并滚动到最后一个位置（因为您需要重新加载数据）。

您有什么想法可能导致问题吗？我不相信这种表现是正常的，因为具有无数行的表格会在瞬间加载和显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:56:11.073

通过使用免费的 Sensible TableView 框架，您可以完全避免使用 NSFetchedResultsController。该框架将自动获取您的数据并将其显示在表格视图上，包括生成所有详细视图 UI 和关系视图。以我的经验，这比过去使用 NSFetchedResultsController 更有效。

# c# - 从通用列表中删除元素

> ID：15659676
> 
> 赞同：7
> 
> 时间：2013-03-27T13:11:43.680
> 
> 标签：c#, .net, linq, generics, ienumerable

我无法从 IEnumerable 列表中删除元素，但此列表是对 List 的引用，它是其他类的私有属性。如果我放入`personsCollection.Remove(theElement)`同一个类（类Manager），它会完美运行，但我需要删除另一个类（类ManagerDelete）以来的元素。请问我该怎么做？谢谢。

```
class Other
{
  //Some code
  public IEnumerable<Person> SearchByPhone (string value)
    {
        return from person in personCollection
               where person.SPhone == value
               select person;
    }
 }

class ManagerDelete
{ 
//Some code
IEnumerable<Person> auxList= SearchByPhone (value);
//I have a method for delete here  
}

class Manager
{ 
//Some code
 private List<Person> personsCollection = new List<Person>();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T13:13:37.930

您无法从`IEnumerable<T>`您需要使其类型`IList<T>`直接添加/删除项目的类型中删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T13:21:31.480

您需要了解`IEnumerable`接口允许您做什么。

我在下面列出了您应该根据设计使用的接口列表，以及在不同情况下需要时使用的接口。在您的示例`IList`中是您需要使用的。

*   ICollection 定义所有非通用集合类型的通用特性（例如，大小、枚举和线程安全）。

*   ICloneable 允许实现对象将自身的副本返回给调用者。

*   IDictionary 允许非泛型集合对象
    使用键/值对来表示其内容。

*   IEnumerable 返回实现 IEnumerator 接口的对象（请参阅下一个表条目）。

*   IEnumerator 启用集合项的 foreach 样式迭代。

*   IList 提供在对象的顺序列表中添加、删除和索引项目的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T13:18:55.523

达伦是对的。无需转换为列表，您可以执行以下操作：

```
personCollection = personCollection.Except(SearchByPhone(value)); 
```

在 ManagerDelete 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T13:27:51.743

您可以使用`ToList`将其转换`IEnumerable`为 a `List`，然后您可以从中删除内容。

```
var auxList= SearchByPhone (value).ToList();
auxList.Remove(something); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-08T15:07:40.310

除了其他答案：您的数据结构选择似乎还不够。如果您真的打算从容器中删除元素，那么您的容器*首先不能是*一个`IEnumerable<>`！

考虑以下选择：

*   从 切换`IEnumerable<>`到`ICollection<>`;
*   将删除替换为过滤掉 ( `.Where()`) 并获得单独的过滤`IEnumerable<>`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-27T13:17:26.140

您可以将`IEnumerable`转换为`IList`. 如果`IEnumerable`真的是`List`. 然而，这是一个糟糕的设计。如果要删除项目，则应将列表公开为`IList`，而不是`IEnumerable`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-27T13:18:06.930

An `IEnumerable` is literally just an interface to say, I've got this collection, you can iterate over it.

If you take a look at the actual details of the IEnumerable interface, it doesn't contain much, only a method to allow callers to iterate over it:

[http://msdn.microsoft.com/en-gb/library/9eekhta0.aspx](http://msdn.microsoft.com/en-gb/library/9eekhta0.aspx)

The reason why `List` types can allow you to remove them, is it's built *on top* of the IEnumerable interface, giving you more functionality. It is supposed to represent a collection of objects you can manipulate. Whereas an `IEnumerable` is simply not designed to do this.

The `Remove` method actually stems from the underlying `ICollection` interface that `List` also implements:

[http://msdn.microsoft.com/en-gb/library/bye7h94w.aspx](http://msdn.microsoft.com/en-gb/library/bye7h94w.aspx)

# ruby-on-rails - 有没有办法用 HABTM 做一个 counter_cache ？

> ID：15659680
> 
> 赞同：1
> 
> 时间：2013-03-27T13:11:53.997
> 
> 标签：ruby-on-rails, has-and-belongs-to-many, ruby-on-rails-4

我在 Google 中看到的所有结果似乎都来自 Rails 2.x 和 3.0。

鉴于 Rails 4 指日可待，是否有任何更改允许我们`counter_cache`在 HABTM 关联上使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:09:19.857

[我在这里为 HABTM 关联](https://gist.github.com/marcamillion/5255300)创建了 counter_cache 功能。

如果您有任何建议，请随时告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:17:19.840

我不知道，我也没有在 Rails 4 里程碑中看到任何似乎暗示其他问题的问题。我一直在密切关注事态发展，但并不虔诚。您可以随时查看 Rails 4 里程碑并仔细查看[https://github.com/rails/rails/issues?milestone=9](https://github.com/rails/rails/issues?milestone=9)，但在[http://weblog的 Rails 4 博客文章中并未提及.rubyonrails.org/2013/2/25/Rails-4-0-beta1/](http://weblog.rubyonrails.org/2013/2/25/Rails-4-0-beta1/)关于第一个测试版。

# android - 滚动时如何为android listview项目设置动画

> ID：15659683
> 
> 赞同：1
> 
> 时间：2013-03-27T13:11:58.503
> 
> 标签：android, android-listview

我想实现一个新功能。当用户向上滚动列表视图时，每个项目都会显示一个动画，我注意到 android 提供布局动画，但它只会动画四种情况：

> ```
> APPEARING - A flag indicating the animation that runs on items that are appearing in the container.
> CHANGE_APPEARING - A flag indicating the animation that runs on items that are changing due to a new item appearing in the container.
> DISAPPEARING - A flag indicating the animation that runs on items that are disappearing from the container.
> CHANGE_DISAPPEARING - A flag indicating the animation that runs on items that are changing due to an item disappearing from the 
> ```
> 
> 容器。

但是如何使在滚动列表视图期间出现的项目具有动画效果。该功能与 htc sence5 BlinkFeed 相同，当它滚动时，它将为每个项目设置动画。

# maven - 构建可执行 JAR 时重命名配置文件激活的依赖项

> ID：15659685
> 
> 赞同：1
> 
> 时间：2013-03-27T13:12:02.720
> 
> 标签：maven, maven-dependency-plugin, maven-profiles, maven-jar-plugin

我对使用 Maven 构建我的 Java 项目还很陌生，并且遇到了我不知道如何处理的情况。

我有一个具有 3 个依赖项的 Java 应用程序，我们称它们`a`为 、`b`和`c`. 但是，`c`根据我们构建的平台，这将是一个不同的工件，所以我使用配置文件来实现这一点。这是我的一个片段`pom.xml`：

```
<profiles>
  <profile>
    <id>win32</id>
    <activation>
      <os>
        <family>windows</family>
        <arch>x86</arch>
      </os>
    </activation>
    <dependencies>
      <dependency>
        <groupId>com.seanbright</groupId>
        <artifactId>c-win32-x86</artifactId>
        <version>1.0.0</version>
      </dependency>
    </dependencies>
  </profile>
  <profile>
    <id>win64</id>
    <activation>
      <os>
        <family>windows</family>
        <arch>amd64</arch>
      </os>
    </activation>
    <dependencies>
      <dependency>
        <groupId>com.seanbright</groupId>
        <artifactId>c-win32-x86_64</artifactId>
        <version>1.0.0</version>
      </dependency>
    </dependencies>
  </profile>
</profiles> 
```

和工件在 POM 级别被列为依赖项，因为它们与平台无关并且不会与配置文件一起激活`a`。`b`为简洁起见，此处未显示它们。

现在我想为我的项目构建一个可执行的 JAR，并在从我的代码生成的 JAR 旁边的目录中包含、`a`和`b`，所以我最终会得到这样的结果：`c``lib/`

```
target/my-project-1.0.0.jar
target/lib/a-1.0.0.jar
target/lib/b-1.0.0.jar
target/lib/c-1.0.0.jar 
```

清单中的清单`my-project-1.0.0.jar`将具有适当的类路径，以便可以双击它并启动应用程序。我使用`dependency:copy-dependencies`and`jar:jar`目标来完成所有这些工作：

```
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-dependency-plugin</artifactId>
      <version>2.7</version>
      <executions>
        <execution>
          <id>copy-dependencies</id>
          <goals>
            <goal>copy-dependencies</goal>
          </goals>
          <configuration>
            <outputDirectory>${project.build.directory}/lib</outputDirectory>
            <overWriteReleases>false</overWriteReleases>
            <overWriteSnapshots>false</overWriteSnapshots>
            <overWriteIfNewer>true</overWriteIfNewer>
            <includeScope>runtime</includeScope>
          </configuration>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jar-plugin</artifactId>
      <version>2.4</version>
      <configuration>
        <archive>
          <manifest>
            <mainClass>com.seanbright.myproject.Launch</mainClass>
            <addClasspath>true</addClasspath>
            <classpathPrefix>lib/</classpathPrefix>
          </manifest>
        </archive>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

而且......它有效。唯一的问题是，它`c`被复制到`lib/`目录（并添加到`Class-Path`清单中）作为`c-win32-x86-1.0.0.jar`或`c-win32-x86_64-1.0.0.jar`取决于活动配置文件，我希望它最终成为`c-1.0.0.jar`。

使用`dependency:copy`with`destFileName`而不是会`dependency:copy-dependencies`产生正确的文件名，但其中的条目`Class-Path`仍然是指“完全限定”的工件名称（即`lib/c-win32-x86-1.0.0.jar`）。

我会以错误的方式解决这个问题吗？有没有更简单的方法来完成我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:00:40.273

Set Up [The Classpath:Altering The Classpath: Using a Custom Classpath Format](http://maven.apache.org/shared/maven-archiver/examples/classpath.html)告诉我们如下： -

> 有时，您可能在自己的存档中拥有自定义格式的依赖存档，它不符合上述任何类路径布局。如果您希望在存档的清单类路径中为依赖存档定义自定义布局，请尝试使用`<classpathLayoutType>`值为 的元素`'custom'`以及`<customClasspathLayout>`元素，如下所示：

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
         <artifactId>maven-war-plugin</artifactId>
         <configuration>
           <archive>
             <manifest>
               <addClasspath>true</addClasspath>
               <classpathLayoutType>custom</classpathLayoutType>
               <customClasspathLayout>WEB-INF/lib/$${artifact.groupIdPath}/$${artifact.artifactId}-$${artifact.version}$${dashClassifier?}.$${artifact.extension}</customClasspathLayout>
             </manifest>
           </archive>
         </configuration>
      </plugin>
    </plugins>
  </build>
  ...
  <dependencies>
    <dependency>
      <groupId>commons-lang</groupId>
      <artifactId>commons-lang</artifactId>
      <version>2.1</version>
    </dependency>
    <dependency>
      <groupId>org.codehaus.plexus</groupId>
      <artifactId>plexus-utils</artifactId>
      <version>1.1</version>
    </dependency>
  </dependencies>
  ...
</project> 
```

这个类路径布局比前面的例子更复杂一些。要了解如何`<customClasspathLayout>`解释配置的值，了解解析值中的表达式时应用的规则很有用：

1.  `'artifact.'`如果存在，则从表达式中删除前缀。
2.  尝试使用反射将表达式解析为对 Artifact 的引用（例如，`'artifactId'`成为对方法的引用`'getArtifactId()'`）。
3.  尝试将表达式解析为对当前 Artifact 的 ArtifactHandler 的引用，再次使用反射（例如，`'extension'`成为对方法的引用`'getExtension()'`）。
4.  尝试将表达式解析为特殊情况 Properties 实例中的键，该实例包含以下映射：
    *   `'dashClassifier'`: 如果 Artifact 有分类器，`'- $artifact.classifier'`则为 ，否则为空字符串。
    *   `'dashClassifier?'`: 这是的同义词`'dashClassifier'`。
    *   `'groupIdPath'`: 这相当于`'$artifact.groupId'`, 所有`'.'`字符都替换为`'/'`.

使用上述配置生成的清单类路径如下所示：

```
Class-Path: WEB-INF/lib/org/codehaus/plexus/plexus-utils-1.1.jar WEB-INF/lib/commons-lang/commons-lang-2.1.jar 
```

我希望这可能会有所帮助。

# java - JUnit 最佳实践 - 测试方法，结果无法用公共方法验证

> ID：15659686
> 
> 赞同：2
> 
> 时间：2013-03-27T13:12:04.120
> 
> 标签：java, junit4, private, private-members

我正在用 Java 编写一个套接字应用程序，其中服务器从事件源获取消息并向连接的用户发送通知，具体取决于事件类型。

现在我要为服务器编写一些 JUnit 测试... JUnit（在 eclipse 中自动建议）来实现对所有公共方法的测试，我看到了它的必要性。服务器类有一个公共方法 bufferEvent...，但是事件在私有方法中处理，甚至没有一个方法返回缓冲消息的数量。

所以服务器没有公共方法来验证结果。

我认为这个问题可以概括：如何测试公共方法，结果无法用公共方法验证（没有 getter 等）

我想避免仅仅为了测试而编写额外的方法。是否有解决方法或最佳实践来测试这些东西？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:02:26.723

您应该创建一个构造函数，允许您为协作者插入模拟或间谍。

例如，您的服务器将有一个构造函数`Server(List<Buffer> buffer)`。仅用于测试。然后您可以在单元测试中添加缓冲区，并断言对该缓冲区进行了修改。

List 很容易替换为您在测试中创建的对象。如果你想要更高级的东西，看看像[Mockito](https://code.google.com/p/mockito/)这样的模拟框架。

例如，您为 Socket 创建一个模拟。你会得到`Socket = mock(Socket.class`. 你在构造函数中插入`Server(List<Buffer> buffer, Socket socket)`。然后，在您调用了要测试的任何函数之后，您可以使用例如`verify(socket).send("yourMessage")`查看服务器是否使用`send`带有参数“yourMessage”的方法来验证行为。

例如[，此类在其构造`Plugins`函数](https://github.com/crawljax/crawljax/blob/2063644fe892c5ac4e6d1514b9ed6ed743eec11d/core/src/main/java/com/crawljax/core/plugin/Plugins.java)中需要一些插件。[为了测试它，在这个测试类](https://github.com/crawljax/crawljax/blob/2063644fe892c5ac4e6d1514b9ed6ed743eec11d/core/src/test/java/com/crawljax/core/plugin/PluginsTest.java)中创建、插入然后验证模拟，如下`verify(proxyServerPlugin).proxyServer(config);`所示：

有关更多示例，请参见[Mockito](https://code.google.com/p/mockito/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:19:35.653

您可以检查负面测试用例。服务没有返回，但可能存在服务引发的异常：

```
@Test
public void testServerService(){
try{
   myServer.service();
   Assert.assertTrue(true);
}catch(Exception ex){
   Assert.fail("anything goes wrong");
}
} 
```

否则在这种情况下我会写这样的东西：

```
@Test
public void testServerService(){
   myServer.service();
   Assert.assertTrue(true);
} 
```

所以我至少有断言来检查进程是否运行没有问题。

顺便说一句，我认为你是对的。编写新功能只是为了验证 Junit 测试用例是非常糟糕的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:16:34.430

考虑添加一个 Logger，它有自己的 Level TEST ，在方法的末尾记录重要的值，并有一个流到 A 测试类。

# iphone - 播放 MP4 以外的视频文件

> ID：15659688
> 
> 赞同：0
> 
> 时间：2013-03-27T13:12:08.413
> 
> 标签：iphone, ios6, video-player

我想在我的代码中播放 MP4 以外的视频文件有什么办法吗？即使有任何苹果会在应用商店中允许此类应用

提前致谢 问候 Nitesh

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:59:49.877

来自苹果指南：

iOS 中的视频技术支持播放具有 .mov、.mp4、.m4v 和 .3gp 文件扩展名并使用以下压缩标准的电影文件：

H.264 视频，最高 1.5 Mbps，640 x 480 像素，每秒 30 帧，H.264 基线配置文件的低复杂度版本，具有最高 160 Kbps 的 AAC-LC 音频，48 kHz，.m4v 立体声音频， .mp4 和 .mov 文件格式 H.264 视频，最高 768 Kbps，320 x 240 像素，每秒 30 帧，Baseline Profile 最高 1.3 级，AAC-LC 音频最高 160 Kbps，48 kHz，立体声音频输入.m4v、.mp4 和 .mov 文件格式 MPEG-4 视频，最高 2.5 Mbps，640 x 480 像素，每秒 30 帧，带 AAC-LC 音频的简单配置文件，最高 160 Kbps，48 kHz，立体声音频。 m4v、.mp4 和 .mov 文件格式多种音频格式，包括“音频技术”中列出的格式</p>

# c# - WPF 工具包不正确的 DataGrid 高度

> ID：15659699
> 
> 赞同：1
> 
> 时间：2013-03-27T13:12:34.503
> 
> 标签：c#, wpf, datagrid, wpftoolkit

我正在使用[2010 年 2 月发布的 WPF Toolkit（.net 框架 3.5）](http://wpf.codeplex.com/releases/view/40535)中的 DataGrid 控件，在为表格的单元格设置文本换行之后，我注意到 DataGrid 在最后一行之后显示有很多可用空间。

可用空间的数量似乎与行数成正比（但并非总是如此）。

当我手动删除其中一行时，DataGrid 正确显示并删除了可用空间。但是如果我在加载时删除代码后面的一行，它没有任何效果，并且仍然显示可用空间。我的猜测是，这个技巧只有在 DataGrid 被渲染后才有效。编辑单元格的内容不会触发调整大小。

![数据网格](../Images/2e2903d159c853053203c1290999fb67.png)

笔记：

1.  我尝试为 DataGrid 设置 MaxHeight，但由于文本换行，它不能很好地工作。

2.  我已经覆盖了`Size MeasureOverride(Size availableSize)`DataGrid 的方法，并注意到该方法被多次调用，并且一开始大小是正确的，然后再调用一两次后它会增加。也`availableSize`有无限的高度。

知道如何修复 DataGrid 的高度吗？

**编辑：**

我创建了一个小演示来展示我的问题。该项目需要对 WPFToolkit 的引用。

[主窗口.xaml](http://pastebin.com/SbLRW84w)

[主窗口.xaml.cs](http://pastebin.com/ERwm5XEJ)

注意第一个和第二个 DataGrid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:27:16.287

似乎`DataGridCellsPanel`计算了一个错误的高度`DataGrid`。

通过将 替换为`DataGridCellsPanel`，`StackPanel`计算`DataGrid`正确的高度值，不再浪费空间。

XAML 中的解决方案：

```
<wpf:DataGrid ItemsSource="{Binding DataGridDS, ElementName=mainWindow}"
              VirtualizingStackPanel.IsVirtualizing="False">
    <wpf:DataGrid.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel />
        </ItemsPanelTemplate>
    </wpf:DataGrid.ItemsPanel>
    <wpf:DataGrid.Columns>
        <wpf:DataGridTextColumn Binding="{Binding Col1}" Width="*" />
        <wpf:DataGridTextColumn Binding="{Binding Col2}" Width="100" />
        <wpf:DataGridTextColumn Binding="{Binding Col3}" Width="100" />
    </wpf:DataGrid.Columns>
</wpf:DataGrid> 
```

代码背后的解决方案，我创建了一个从 DataGrid 扩展的自定义控件，并在构造函数中有以下代码：

```
 var stackPanelFactory = new FrameworkElementFactory(typeof(StackPanel));
        var template = new ItemsPanelTemplate(stackPanelFactory);
        this.ItemsPanel = template; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:10:17.447

* * *

您是否尝试将 VerticalContentAlignment 和 VerticalAlignment 设置为顶部？

我记得以前遇到过这个问题，但我不太确定这是否是必需的修复。

# visual-studio-2010 - 块游戏程序中的Checkcollision错误？

> ID：15659700
> 
> 赞同：1
> 
> 时间：2013-03-27T13:12:36.287
> 
> 标签：visual-studio-2010, vba

visual basic 对 Public Sub CheckCollision 的论点太多？请帮忙

```
Public Class Form1
    Dim intSpeedX As Integer = 2
    Dim intSpeedY As Integer = -2
    Dim intScore As Integer
    Dim intLives As Integer = 3
    Dim intAllGone As Integer

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Timer1.Enabled = True
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

        AllGone = 0
        CheckCollisions()
        If AllGone = 1 Then
            Timer1.Enabled = False
            MsgBox("You finished the game!", , "CONGRATULATIONS")
        End If

        BallX += SpeedX
        If BallX < 3 Or BallX + Ball.Width > Me.Width - 5 Then
            SpeedX = -SpeedX
        End If
        BallY += SpeedY
        If BallY < 3 Then
            SpeedY = -SpeedY
        End If

        If BallY + Ball.Height > Me.Height - 5 Then
            Timer1.Enabled = False
            UpdateLives()
            BallX = 232
            BallY = 376
            SpeedX = 2
            SpeedY = -2
            If Lives < 1 Then
                MsgBox("You have lost the game.", , "OH NAWW MAN DAT SUCKS!")
            Else
                MsgBox("You missed!", , "OH NOOOO")
                Timer1.Enabled = True
            End If
        End If
    End Sub

    Private Sub Form1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles MyBase.MouseMove
        Paddle.Left = e.X - Paddle.Width \ 2
    End Sub

    Public Sub CheckCollisions()
        CheckCollision(Paddle, False)  <---error here with the false
        CheckCollision(Red1)
        CheckCollision(Red2)
        CheckCollision(Red3)
        CheckCollision(Red4)
        CheckCollision(Red5)
        CheckCollision(Yellow1)
        CheckCollision(Yellow2)
        CheckCollision(Yellow3)
        CheckCollision(Yellow4)
        CheckCollision(Yellow5)
        CheckCollision(Green1)
        CheckCollision(Green2)
        CheckCollision(Green3)
        CheckCollision(Green4)
        CheckCollision(Green5)
        CheckCollision(Blue1)
        CheckCollision(Blue2)
        CheckCollision(Blue3)
        CheckCollision(Blue4)
        CheckCollision(Blue5)
    End Sub

    Public Sub CheckCollison(ByVal src As PictureBox, ByVal Hide As Boolean)
        If src.Visible = True Then
            If BallX > src.Location.X And _
                BallX < src.Location.X + src.Size.Width And _
                Ball.Location.Y > src.Location.Y And _
                Ball.Location.Y < src.Location.Y + src.Size.Height Then
                SpeedY = -SpeedY
                UpdateScore()
                If Hide Then
                    src.Visible = False
                End If
            End If
            AllGone += 1
        End If
    End Sub

    'declare the overloaded version of CheckCollision
    Public Sub CheckCollision(ByVal src As PictureBox)
        'call the original version
        CheckCollision(src, True) <------error here
    End Sub

    Public Sub UpdateScore()
        Score += 10
        Label2.Text = "SCORE: " & Score
    End Sub

    Public Sub UpdateLives()
        Lives -= 1
        Label1.Text = "LIVES: " & Lives
    End Sub

    Public Property BallX() As Integer
        Get
            Return Ball.Left
        End Get
        Set(ByVal Value As Integer)
            Ball.Left = Value
        End Set
    End Property

    Public Property BallY() As Integer
        Get
            Return Ball.Top
        End Get
        Set(ByVal Value As Integer)
            Ball.Top = Value
        End Set
    End Property

    Public Property Lives() As Integer
        Get
            Return intLives
        End Get
        Set(ByVal Value As Integer)
            intLives = Value
        End Set
    End Property

    Public Property SpeedX() As Integer
        Get
            Return intSpeedX
        End Get
        Set(ByVal Value As Integer)
            intSpeedX = Value
        End Set
    End Property

    Public Property SpeedY() As Integer
        Get
            Return intSpeedY
        End Get
        Set(ByVal Value As Integer)
            intSpeedY = Value
        End Set
    End Property

    Public Property Score() As Integer
        Get
            Return intScore
        End Get
        Set(ByVal Value As Integer)
            intScore = Value
        End Set
    End Property

    Public Property AllGone() As Integer
        Get
            Return intAllGone
        End Get
        Set(ByVal Value As Integer)
            intAllGone = Value
        End Set
    End Property

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:26:11.763

你`CheckCollision`用：

```
Public Sub CheckCollision(ByVal src As PictureBox)
    'call the original version
    CheckCollision(src, True) <------error here
End Sub 
```

它只接受一个参数，所以

```
CheckCollision(src, True) 
```

不起作用，因为它调用了覆盖的子。

# jquery - 我正在尝试执行 Spring 3.0 和 Ajax，json

> ID：15659701
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:12:36.767
> 
> 标签：jquery, maven, spring-mvc

我有依赖，如：

杰克逊映射器 asl
1.9.12

杰克逊映射器-lgpl
1.9.12

杰克逊映射器-lgpl
1.9.12

在执行一个 Request Mapping 时，我遇到了异常。

java.lang.StackOverflowError 在 sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.getRawType(ParameterizedTypeImpl.java:111) 在 sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl.getRawType(ParameterizedTypeImpl.java:22) 在 org.codehaus.jackson。 map.type.HierarchicType.(HierarchicType.java:38)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:39:27.930

您可能需要显示代码，但看起来您可能会发生无限递归，或者至少您的调用堆栈变得太大。

# logging - 检查是否设置了特定级别，如果是，则登录该级别

> ID：15659703
> 
> 赞同：2
> 
> 时间：2013-03-27T13:12:41.870
> 
> 标签：logging, log4net

我正在尝试为 log4net 编写一些扩展方法，一个要求是用户可以指定他希望我的扩展在哪个级别上记录消息。

现在我希望能够检查我的 log4net 记录器中是否启用了该级别。

我知道我可以检查

```
ILog log = LogManager.GetLogger(....);

if(log.IsDebugEnabled) 
{
   // log something
} 
```

但是有没有办法给定一个`log4net.Core.Level`变量来检查该级别是否启用？

所以我希望可能有类似的东西：

```
ILog log = LogManager.GetLogger(....);
log4net.Core.Level myLevel = Level.Warn;

if(log.IsLevelEnabled(myLevel))
{
   // log something
   log.Log(myLevel, message);
} 
```

有没有办法做到这一点？

**解决方案：** `peer`提到 - 隐藏在其中一条评论中 - 如何做到这一点：

> 但是，您可以获得记录器实现：`log.Logger.IsEnabledFor()...`并且`log.Logger.Log(...)`可以帮助您，该`Log`功能不打算直接使用。

所以现在我可以轻松使用：

```
if(log.Logger.IsEnabledFor(myLevel)) 
{
   // log something 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:59:41.590

您可以为 ILog 制作扩展方法：

```
public static class Log4NetExtensionMethods
{
    public static bool IsLevelEnabled( this ILog log, log4net.Core.Level level)
    {
        ...
    }

    public static void LogAtLevel( this ILog log, log4net.Core.Level level, string message)
    {
        ...
    }
} 
```

# magento - Magento 产品图像未显示在后端和前端

> ID：15659704
> 
> 赞同：2
> 
> 时间：2013-03-27T13:12:42.503
> 
> 标签：magento

我在我的本地主机（XAMPP-Server）中使用**Magento 1.7.0.2 的最新社区版。**我**在上传产品图片时遇到**了问题。图像未显示在后端和前端。

有什么帮助吗？提前致谢..！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:45:09.267

删除缓存，重建索引并确保您的媒体文件夹是可写的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-12T16:41:32.010

在 Magento 根目录的媒体目录中将 .htaccess 文件重命名为 .htaccess-old。

这将解决您的问题。

# jquery - PhoneGap & HTML5 视频标签 & iOS & Vimeo

> ID：15659705
> 
> 赞同：1
> 
> 时间：2013-03-27T13:12:44.640
> 
> 标签：jquery, html, cordova, jquery-mobile, video

我使用下面的代码在我的 PhoneGap iOS 应用程序中显示 Vimeo 视频。下面是代码。

```
 <div id="lesson" data-role="content" data-inline="true">
        <iframe src="http://player.vimeo.com/video/61702922" width="400" height="300" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
    </div> 
```

但我最终在运行时出现以下错误。

![在此处输入图像描述](../Images/27e487ac903b8ea6e1171223e995d507.png)

但如果我附上一个 Youtube 视频，它会正确显示

```
 <div id="lesson" data-role="content" data-inline="true">
        <iframe src="http://www.youtube.com/embed/dP15zlyra3c?html5=1"></iframe>
    </div> 
```

我该如何解决这个错误？为什么不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:20:30.803

**这是Vimeo**方面的一个老问题。

有一个解决方案，但我无法确认它是否有效。它仅适用于您自己的视频材料。解决方案是下载或重新上传它们以允许**Vimeo**再次重新处理视频材料。视频准备好后，使用生成的嵌入代码，它们应该可以正确播放。

部分这也是 iOS 的问题，因为视频可以在 iOS 5 上完美播放，但在 iOS 6 上则不行。

我的项目要求我展示不属于我的视频，而**Vimeo**政策不允许我重新上传其他人的作品。

# php - Laravel 4 - Eloquent mass assignment 在更新后创建空记录

> ID：15659708
> 
> 赞同：0
> 
> 时间：2013-03-27T13:12:51.470
> 
> 标签：php, laravel, laravel-4, mass-assignment, eloquent

我刚刚将 L4（骨架和包）更新到最新版本。

现在，当我尝试创建其中一个模型的新实例并将其保存到数据库时，我得到一个空记录，除了时间戳和主键。

这种行为在所有模型（用户、投标、项目等）上都存在，所以这不是本地问题。

我都试过了

```
Project::create($project); 
```

并且，[按照这个线程](http://forums.laravel.io/viewtopic.php?id=5824)：

```
$new_project = new Project;

$new_project->fill($project);

$new_project->save(); 
```

但结果是一样的：一条空记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:15:21.950

因此，从[文档](http://four.laravel.com/docs/eloquent#mass-assignment)中可以看出，由于安全原因，现在默认阻止质量分配（例如，从表单中获取所有数据而不指定字段（`Input::all()`）并将其按原样保存到数据库可能会导致分配不需要的字段，在如果客户端通过添加一个名称与数据库中的字段相对应的字段来操作表单）。

要指定允许分配的字段，应将相关字段作为*白名单*显式添加到模型上的受保护`$fillable`数组中，或者使用该数组创建*黑名单*`$guarded`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T10:31:51.553

我面临同样的问题并找到了解决方案希望对其他人有所帮助

```
$new_project = new Project;

$new_project->unguard();

$new_project->create($project);

$new_project->reguard();

or

Project::unguard();
$new_project = Project::create($project);
$new_project->reguard(); 
```

# http - 如果我配置了过期和缓存控制标头，为什么我的浏览器会发出请求？

> ID：15659710
> 
> 赞同：0
> 
> 时间：2013-03-27T13:12:55.330
> 
> 标签：http, caching, amazon-s3

这是来自我的亚马逊存储桶的示例响应。

```
$ curl -I http://amazon_bucket/image.jpg
HTTP/1.1 200 OK
x-amz-id-2: Tmr9SynKe8ztlB/Jix1hNrclwyc/k4NVHyqK3B0vNKUoPFIxfzwALi0XQRwEjhzO
x-amz-request-id: DCFDBCF510988AFB
Date: Wed, 27 Mar 2013 13:06:34 GMT
Cache-Control: public, max-age=2629000
Expires: Wed, 26 Mar 2014 23:00:00 GMT
Last-Modified: Wed, 27 Mar 2013 13:00:19 GMT
ETag: "52dd53ea738c7824b3f67cfea6a3af2a"
Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 627046
Server: AmazonS3 
```

我希望浏览器缓存图像并从缓存中提供它。相反，当我重新加载页面时，我的浏览器会发出一个请求，这会产生 304 not modified 响应。为什么它表现得像`must-revalidate`是通过了选项？为什么浏览器不直接从缓存中提供图像？我在图像上配置的选项，来自我的 S3 客户端是这些：

```
Cache-Control: public, max-age=2629000
Expires: Wed, 26 Mar 2014 23:00:00 GMT 
```

我应该将其他选项传递给 S3 文件吗？这可能是一个愚蠢的答案，但我看到我的浏览器为获取这些图片而发出的请求都具有以下标题：

```
Cache-Control:no-cache
Pragma:no-cache 
```

为什么我的浏览器会发送这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:25:03.490

我正在刷新，显然，这总是会触发一个`If-Modified-Since`请求。如果您正常访问该页面，则该资产是从浏览器缓存中提供的。

# r - igraph 没有显示我导入的正确网络

> ID：15659713
> 
> 赞同：0
> 
> 时间：2013-03-27T13:13:01.293
> 
> 标签：r, igraph, sna

我想进行一些 sna 分析。我使用 RStudio 和 igraph 包。我的输入数据来自文本文件（从 excel 创建为制表符分隔的文本文件）。数据文件有 3 列。第一行和第二行是网络数据（顶点），第三行是每条边的权重。我使用如下所示的机场连接数据：

1 54 28382（机场 ID 始发机场/机场 ID 目的地机场/乘客编号作为重量）

我用这些命令加载了 id：

```
 USAN_num1 <- read.table('USAN_num.txt', header=T)
 USAN_g_num1 <- graph.data.frame(USAN_num1)
> summary(USAN_g_num1)
Vertices: 626 
Edges: 7078 
Directed: TRUE 
No graph attributes.
Vertex attributes: name.
Edge attributes: PAX. 
```

数据如下所示：

```
 ORIGN DESTN  PAX
1     1   604  646
2     2    42 3736
3     2   118 5189 
```

现在发生的问题：当我用 igraph 检查它时，我的网络包含 6 个不同的集群。即使我创建了我的网络的图形图片，它也有 6 个独立的部分。这完全没有意义，因为我的数据应该连接到一个网络。我检查了我的数据集，确实没有不同的子网络。

这是我得到的集群特征：

```
$csize
[1]   5 608   2   4   5   2

$no
[1] 6 
```

一个小集群中的一个顶点甚至是一个巨大的机场，它应该连接到许多其他的，而不仅仅是一个其他的......

更新：我现在更新到最新的 igraph 版本，但它仍然无法正常工作。我在此处将数据的示例部分作为 .txt 文件上传：[USAN_numS.txt](http://www.file-upload.net/download-7386019/USAN_numS.txt.html)

如果有人知道我做错了什么，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:39:58.287

因此，正如我在上面的评论中所说，一个可能的混淆来源是您的图形具有符号顶点名称，这些名称实际上是数字并且与 igraph 的顶点 ID 不匹配。解决方法是删除顶点名称，或者在创建图形时明确指定它们，以便它们与 igraph 顶点 ID 匹配。

但是你的图确实有多个组件，看下面的代码，我在原始表中检查它，两个顶点在表中只出现一次，它们本身就形成了两个的组件。

也许网络真的有多个组件，或者文件有错误。

```
library(igraph)
USAN_num1 <- read.table('USAN_numS.txt', header=T)
USAN_g_num1 <- graph.data.frame(USAN_num1,
                   vertices=data.frame(id=1:max(USAN_num1[,1:2])))    
clu <- clusters(USAN_g_num1)
clu$csize
## [1]   5 607   2   4   5   1   2   1
## The '1's appear because we counted the vertices that are 
## not in the table

## Third component has two vertices only, let's check them in the
## original table
which(clu$membership == 3)
## [1]  64 617

## List the table rows where any of these two appear
USAN_num1[ USAN_num1[,1] %in% c(64, 617) | USAN_num1[,1] %in% c(64, 617), ]
##     ORIGN DESTN PAX
## 691    64   617 636 
```

# jsf - 数据表滚动条不显示在 IE 中

> ID：15659719
> 
> 赞同：0
> 
> 时间：2013-03-27T13:13:14.177
> 
> 标签：jsf, jakarta-ee, primefaces

我得到了一个可滚动和可调整大小的列设置为 true 的数据表，滚动条在 Firefox 和 chrome 中完美运行，但在 IE 中滚动条不显示。这是一个错误还是我做错了什么？

```
<p:dataTable id="allTable" widgetVar="allTableW"
     emptyMessage="Keine Todos gefunden" var="currentTableItem"
     value="#{allTableController.dataModel}" paginator="true" rows="15"
     rowsPerPageTemplate="5,10,15,20, 25, 30" lazy="false"
     paginatorPosition="bottom"
     currentPageReportTemplate="( Treffer {totalRecords} ) ( Seite {currentPage} von {totalPages} )"
     filteredValue="#{allTableController.filteredTodos}" filterDelay="500"
     filterEvent="keyup" editable="true"
     sortBy="#{currentTableItem.angelegtAm}" sortOrder="descending"
     selectionMode="single" selection="#{allTableController.selectedToDo}"
     scrollable="true" resizableColumns="true">

                   ...
</p:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:24:27.077

如果您使用的是 IE9，那么肯定 IE9 中存在错误。我在 IE 中也遇​​到过这类事情，所以不用担心你的代码没问题。

# arrays - Perl 将数组值与数组散列中的值进行比较

> ID：15659724
> 
> 赞同：0
> 
> 时间：2013-03-27T13:13:37.350
> 
> 标签：arrays, perl, hash

该帖子已根据 DVK 的评论和回答进行了更新

我已更改为使用 3 参数形式的 open 并将 ID 正确推送到数组中

下面更新了代码

```
use warnings;
use strict;
use Data::Dumper;

my $file1 = "Inputfile.txt";
my $file2 = $ARGV[0];
my $file3 = $ARGV[1];

open (OF, " > Results.txt") or die "Can't write new file: $!";

my %hash;
open(INPUT1, "<" , $file1)or die("Failed to open file1: $!");
while (!eof(INPUT1)) {
    my @elements = split(/\t/, <INPUT1>);
    my $F1catagory = $elements[2];
    my $F1IDs = $elements[3];
    push @{$hash{$F1catagory}}, $F1IDs;
}
close(INPUT1);

my @array1;
open(INPUT2, "<" , $file2) or die ("Failed to open file2: $!");
while (!eof(INPUT2)) {
    my @line = split(/\t/, <INPUT2>);
    my $F2catagory = $line [0];
    my $F2IDs    = $line [1];
    push (@array1, $F2IDs);
}
print OF @array1;
close(INPUT2);

my @array2;
open(INPUT3, "<" , $file3) or die ("Failed to open file3: $!");
while (!eof(INPUT3)) {
    my @lines = split(/\t/, <INPUT3>);
    my $F3catagory     = $lines [0];
    my $F3IDs = $lines [1];
    push (@array2, $F3IDs );

}
print OF @array2;
close(INPUT3); 
```

输入数据看起来像

以下

文件 1 包含有关进程的信息，如下所示，第 3 列包含进程 ID，第 4 列包含项目 ID（这些用于创建我的 %hash）

```
process 9606    0051712 3458    [25 Jul 2011]
process 9606    0051712 2208    [25 Jul 2011]
process 9606    0051712 2150    [25 Jul 2011]
process 9606    0051712 4843    [25 Jul 2011]
process 9606    0032513 2280    [25 Jul 2011]
process 9606    0032513 2281    [25 Jul 2011]
process 9606    0006285 23583   [25 Jul 2011]
process 9606    0006285 6996    [25 Jul 2011]
process 9606    0006285 4913    [25 Jul 2011]
process 9606    0006285 10309   [25 Jul 2011]
process 9606    0006285 4350    [25 Jul 2011]
process 9606    0006285 4968    [25 Jul 2011]
process 9606    0006285 4595    [25 Jul 2011]
process 9606    0006285 8930    [25 Jul 2011]
process 9606    0051503 284439  [25 Jul 2011]
process 9606    0051503 2697    [25 Jul 2011]
process 9606    0051503 291 [25 Jul 2011]
process 9606    0051503 10478   [25 Jul 2011] 
```

file2 包含第 1 列中的项目的类别和第 2 列中的项目 ID

```
CS1G2   1455
TM65    157378
PFN1    5216
HUL1    11100
ERI3    79033
PR12    57479
HIFN    55662
HNPD    3184
 HI2    28996
 LD1    84316
GRB2    2885
 AL6    84964
PCM1    5108
 ZN7    126208
MAK2    5605
BCL3    602 
```

文件 3 与文件 2 相同，只是项目 ID 不同

我需要找出文件 1 中的任何进程是否包含文件 2 和文件 3 中的项目。

我希望这能让问题更清楚

#######原创问题

我一直在尝试编写的脚本遇到问题

我有一个包含进程信息的文件我已将进程 ID 和项目 ID 读入数组的哈希，其中进程 ID 作为键，项目 ID 作为值（数组的哈希作为单个进程中的多个项目）

我有两个项目 ID @F2IDs 和 @F3IDs 数组

如果在同一进程中的 @F2IDs 和 @F3IDs 中有任何项目 ID（在相同的 %hash 值中）我想确定它在同一个进程中

到目前为止我有这个代码

```
use warnings;
use strict;
use Data::Dumper;

my $file1 = "Infile.txt";
my $file2 = $ARGV[0];
my $file3 = $ARGV[1];

open (OF, " > Results.txt") or die "Can't write new file: $!";

my %hash;
open(INPUT, $file1)or die("Failed to open file2");
while (!eof(INPUT)) {
    my @elements = split(/\t/, <INPUT>);
    my $F1catagory = $elements[2];
    my $F1IDs = $elements[3];
    push @{$hash{$catagory}}, $F1IDs;
}
close(INPUT);

open(INPUT, $file2) or die "Can't write new file: $!";
while (!eof(INPUT)) {
    my @line = split(/\t/, <INPUT>);
    my $F2catagory = $line [0];
    my @F2IDs    = $line [1];
}
close(INPUT);

open(INPUT, $file3) or die "Can't write new file: $!";
while (!eof(INPUT)) {
    my @lines = split(/\t/, <INPUT>);
    my @F3catagory     = $lines [0];
    my @F3IDs = $lines [1];
}
close(INPUT); 
```

我需要做一些类似下面的伪代码的事情，但不知道 perl 中是否有一个“if in”结构，就像在 python 中一样

```
$insameprocess = False;
foreach value in %hash;
    if F2IDs and F3IDs are in {$hash{$catagory}};;
       $insameprocess = True;
       print OF "the key the value and if they are in the same process"; 
```

有没有人对如何在 perl 中做到这一点有任何想法？

提前感谢您的帮助问候

小号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:31:58.353

你有3个问题：

1.  一般来说，您的脚本在读取数据时似乎包含很多错误。我暂时不会讨论这个，因为这不是你问的。例如，您需要在循环 2/3 中将 ID 推送到数组中，而不是分配给数组（您在第一个循环中正确执行了此操作）。

2.  您的主要技术问题似乎是“如何判断哈希值中是否有某个 ID（这是一个数组 ref）？”。

    解决此问题的最佳方法是将数据存储在 ID 的 hashref（映射到“1”）而不是 ID 的 arrayref 中，并使用哈希查找：

    ```
    # This is in your first loop reading file 1
    # OLD CODE:    push @{$hash{$catagory}}, $F1IDs;
    # NEW CODE:
    # # Each hash value is a hashref, with keys being IDsx and values simply 1
    $hash{$catagory}->{$F1IDs} = 1; 

    # This is the code in the end, to check if some ID is in the hash:
    if ($hash{$catagory}->{$F1IDs}) {
        # $id_is_in_hash = 1;
    } 
    ```

3.  坦率地说，您的伪代码对我（也不是您的描述）没有太大意义，因此我无法帮助您编写完整的检查，使用我在要点 2 中的解决方案替换您的伪代码。如果您可以提供更明确的描述，或者在 3 个文件中提供更好的示例数据和所需的输出，我将能够做更多的事情。

# c++ - 错误 C2065 和 IntelliSense

> ID：15659726
> 
> 赞同：2
> 
> 时间：2013-03-27T13:13:38.597
> 
> 标签：c++, intellisense

我在 C++ 上编程，我对该代码有以下错误：

```
#include <stdio.h>

int main(int argc, char* argv[])
{ int x;
    printf("%d","Please enter a number\n");
    scanf(%d,&x);
    printf("%d","You entered 56\n");

} 
```

这是错误： 错误 1 ​​错误 C2065: 'd' : undeclared identifier 9 1 ניסיון1

```
2   IntelliSense: expected an expression    9   8 
```

谢谢， 佩莱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:14:38.900

的第一个参数`scanf`应该是一个以 null 结尾的字符串：

```
scanf("%d",&x); 
```

就像您对`printf`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:16:45.443

```
scanf(%d,&x);  
------^^---- 
```

应该`scanf("%d",&x);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:27:44.570

正如其他人已经说过的那样， scanf 需要一个格式*字符串*，所以你必须写

```
scanf("%d", &x); 
```

此外，您对 printf 的使用不会产生您想要的结果。传递给 printf 的第一个字符串是输出格式字符串。`"%d"`表示下一个参数是整数。您的下一个参数是字符串的地址。你真正想写的是这三行之一：

```
printf("%s", "Please enter a number\n");
printf("Please enter a number\n");
puts("Please enter a number"); 
```

最后一行最适合您的情况。第二行也很好，但只是因为字符串不包含格式字符，如`%d`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:27:57.490

问题在于您`scanf(%d,&x);`陈述的第一个论点。这个参数应该是一个空终止的字符串。您的代码在下面重写：

```
#include <stdio.h>

int main(int argc, char* argv[])
{ 
    int x;
    printf("Please enter a number %d\n");
    scanf("%d",&x);
    printf("You entered %d\n", x);

} 
```

# matlab - Matlab中艾里函数的零点

> ID：15659728
> 
> 赞同：0
> 
> 时间：2013-03-27T13:13:41.027
> 
> 标签：matlab

在 Matlab 中是否有任何函数可以返回 Airy 函数的零点？

我正在使用 Matlab 7.11.0。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:08:54.423

您可以使用此功能：

```
function a = airyZeros(N)
#AIRYZEROS Computes the first N zeros of the Airy function
#
#    Example
#       >> airyZeros(3)
#       ans =
#          -2.3381   -4.0880   -5.5206

    a = NaN(1,N);

    for n = 1:N
        switch n
            case 1
                x = -2.3381;
            case 2
                x = -4.08795;
            case 3
                x = -5.52056;
            case 4
                x = -6.7867144;
            case 5
                x = -7.94413;
            case 6
                x = -9.02265;
            otherwise
                x = -(3*pi/2 * (n-0.25))^(2/3);
        end

        a(n) = real(fsolve(@airy, x, optimset('display','none')));

    end

end 
```

# titanium - 打包钛模块时找不到javac编译器

> ID：15659731
> 
> 赞同：0
> 
> 时间：2013-03-27T13:13:48.070
> 
> 标签：titanium, titanium-modules

当我尝试从工作室打包模块时，Titanium Studio 无法找到 Javac 编译器。但能够在终端中从 build.xml 打包。可能是什么问题呢。

```
Executing build.xml...
C:\Users\tarak\AppData\Roaming\Titanium\mobilesdk\win32\3.0.3.v20130318143059\module\android\build.xml:166: Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK.
It is currently set to "C:\Program Files\Appcelerator\Titanium Studio\jre" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T17:28:05.380

使 java home 变量指向**jdk**安装，而不是**jre**。

# c# - PDFCreator COM 与不同版本的互操作

> ID：15659732
> 
> 赞同：4
> 
> 时间：2013-03-27T13:13:51.287
> 
> 标签：c#, pdf, interop

我需要`PDFCreator COM interface`从 C# 应用程序连接到。为此，我使用 VS 生成的 Interop 包装器。但是有些客户有不同版本的 PDFCreator（我有 1.2.1，有些有 1.4.3），如果我使用为 1.2.1 生成的互操作，我在使用包装器时会出现异常。有没有办法解决？那么我的应用可以支持多个版本的 PDFCreator 吗？

另外，我不确定 PDFCreator 界面是否真的改变了。是不是对 COM 对象的确切版本有一些锁定，我可以在生成互操作库时简单地关闭？谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T21:57:11.830

所以，根据 yms 的回答，我找到了正确的方向:)

.NET 4.0 支持与 VB 类似的后期绑定 COM 对象，使用`System.Type`和 magic`dynamic`关键字。

如何使用动态绑定运行 PDFCreator 的简单示例：

```
 System.Type pdfCreatorType = System.Type.GetTypeFromProgID("PDFCreator.clsPDFCreator");
    dynamic comPdfCreator = System.Activator.CreateInstance(pdfCreatorType);

    comPdfCreator.cStart("", true); 
```

这就像一个魅力，你不需要为每个新的 PDFCreator 版本重新编译你的互操作程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T20:35:17.020

如果您不怕使用 VB.Net 而不是 C#，您可以尝试将旧的 VB 后期绑定功能与 PDFCreator 的 progid 一起使用。

创建新实例的代码如下所示：

```
Dim myObj As Object
myObj = CreateObject("PDFCreator.clsPDFCreator") 
```

然后您可以调用方法`myObj`，但缺点是 IntelliSense 将不起作用，并且如果您调用不存在的方法或使用错误的参数，VB.Net 编译器不会引发任何错误。

免责声明：*我没有对此进行测试，使用它需要您自担风险*

# javascript - 从 iframe 中的变量打开链接

> ID：15659749
> 
> 赞同：0
> 
> 时间：2013-03-27T13:14:25.877
> 
> 标签：javascript, html, iframe, href

```
 <script language="Javascript" type="text/javascript">
    function Next(){
        var randp = Math.floor(Math.random()*3);
        switch(randp){
            case 0:
                var websel = "http://w3schools.com";
                break;  
            case 1:
                var websel = "http://www.bbc.com/";
                break;
            case 2:
                var websel = "http://en.wikipedia.org/wiki/BBC";
                break;
            default:
                document.write("Error SWITCH(randp) " + randp + " ");
                break;
        }
    }
    </script>

    <iframe name="iframea" src="http://w3schools.com" seamless="seamless" scrolling="auto" height="560px" width="1080px" align="middle" scale="1.5"></iframe> 

 <input type="button" value="Next" onClick="Next()"> 
```

对不起，基本问题。我需要添加什么才能让下一个按钮打开一个链接（链接是来自函数的变量），目标是 iframe。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:23:23.080

您必须按以下方式更改 iframe 的 src：

```
 <script language="Javascript" type="text/javascript">
        function Next(){
            var randp = Math.floor(Math.random()*3);
            switch(randp){
                case 0:
                    var websel = "http://w3schools.com";
                    break;  
                case 1:
                    var websel = "http://www.bbc.com/";
                    break;
                case 2:
                    var websel = "http://en.wikipedia.org/wiki/BBC";
                    break;
                default:
                    document.write("Error SWITCH(randp) " + randp + " ");
                    break;
            }
            alert(websel);
            document.getElementById("iframea").src=websel;
        }
        </script>

        <iframe name="iframea" id="iframea" src="http://w3schools.com" seamless="seamless" scrolling="auto" height="560px" width="1080px" align="middle" scale="1.5"></iframe> 

     <input type="button" value="Next" onClick="Next()"> 
```

顺便说一句，你可能会在这个网站上看到[这个问题](https://stackoverflow.com/questions/3730159/changing-iframe-src-with-javascript)是相似的。

# java - 将 java 代码移植到 Python

> ID：15659752
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:14:28.383
> 
> 标签：java, python

我想将一些 java 代码移植到 Python，但我无法获得替换这些 java 方法的函数：

```
 ChannelBuffer buf

 buf.skipBytes(1);
 buf.readUnsignedInt();
 buf.readUnsignedByte();
 buf.readUnsignedShort();
 buf.readLong(); 
```

请问有人可以帮我解决这个问题吗？，在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T13:19:40.340

您可能可以为此使用该`struct`模块；具体来说，[`struct.unpack_from`](http://docs.python.org/2/library/struct.html#struct.unpack_from). 相当于这五个方法调用将是：

```
struct.unpack_from('x', buf)
struct.unpack_from('I', buf)
struct.unpack_from('B', buf)
struct.unpack_from('H', buf)
struct.unpack_from('l', buf) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:18:40.947

I think you want the Python `struct` module:

[http://docs.python.org/2/library/struct.html](http://docs.python.org/2/library/struct.html)

# events - 骨干网未触发渲染事件

> ID：15659753
> 
> 赞同：0
> 
> 时间：2013-03-27T13:14:29.883
> 
> 标签：events, backbone.js, view, collections, reset

我试图创建两个视图并在不同情况下更改集合。我不知道如何设置 this.collection.bind 以便在每次集合更改时引发事件渲染。

在 3 种情况下，我希望 view`BusinessListView`会触发`render`

1.  `this.businesslist.collection = new Businesses([{ name: '1'}, { name: '2' }]);`
2.  `this.businesslist.set();`调用`this.collection = new Businesses([{ name: '3'}, { name: '4' }]);`
3.  `this.search_location = new SearchLocation();`这是不同的视图，然后将集合发送到视图`BusinessListView`

我期待在 1 和 2 的控制台中看到数据，但它不起作用。如果我手动添加 .render() ，我可以看到集合已更改。你能解释一下这是如何工作的吗？

**更新**

感谢 Alex，这是完全可行的解决方案：

[http://jsfiddle.net/feronovak/RAPjM/](http://jsfiddle.net/feronovak/RAPjM/)

```
var App = {
    run: function() {
        this.businesslist = new BusinessListView(); 
        this.businesslist.collection = new Businesses([{ name: '1'}, { name: '2' }]);
        // this.businesslist.render(); // uncomment to see collection change 
        this.businesslist.set();

        this.search_location = new SearchLocation();
    }
};

Business = Backbone.Model.extend({});
Businesses = Backbone.Collection.extend({
    model:  Business
});

BusinessListView = Backbone.View.extend({
    initialize: function(options) {
        this.collection = new Businesses();
        this.collection.bind("reset", this.render(), this);
    },
    render: function() {
        console.log(this.collection.toJSON());
    },
    set: function()
    {
        this.collection = new Businesses([{ name: '3'}, { name: '4' }]);
        // this.render(); // uncomment to see collection change 
    }
});

SearchLocation = Backbone.View.extend({
    el: "#search",
    initialize: function() {
        this.sendData();
    },
    sendData: function() {
        //  Send [{ name: '5'}, { name: '6' }] to this.businesslist  = new Businesses([{ name: '5'}, { name: '6' }]);
    }
});

$(document).ready(function(e) {
    App.run();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:23:15.647

您不断将 this.collection 引用设置为不同的实例。它不会“重置”，因为您从未真正重置初始化中引用的对象。

代替：

```
set: function()
    {
        this.collection = new Businesses([{ name: '3'}, { name: '4' }]);
    } 
```

尝试：

```
set: function()
    {
        this.collection.reset([{ name: '3'}, { name: '4' }]);
    } 
```

并在运行中删除：

```
this.businesslist.collection = new Businesses([{ name: '1'}, { name: '2' }]); 
```

这里的例子：http: [//jsfiddle.net/aXJ9x/1/](http://jsfiddle.net/aXJ9x/1/)

# spring - Spring集成TCP，强制重连

> ID：15659757
> 
> 赞同：1
> 
> 时间：2013-03-27T13:14:39.067
> 
> 标签：spring, tcp, spring-integration, reconnect

我有以下spring集成TCP连接：

```
<int-ip:tcp-connection-factory id="client" type="client" host="..." port="..." single-use="true" so-timeout="10000"/> 
```

我希望能够在发生协议级问题时强制重新连接。可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:49:19.213

Given that you have `single-use` set to `true`, a socket is only used once per request so "reconnecting on a failure" makes no sense because a new connection will be established for each request anyway.

With `single-use="false"` (shared connection), if you are using the factory with an `<int-ip:output-channel-adapter/>` you can set `client-mode` to true; this will automatically reconnect after a timeout (and you can explicitly re-establish the shared connection by invoking `retryConnection()` on the adapter. `client-mode` is not currently supported on the outbound gateway, however. See [TCP Adapters](http://static.springsource.org/spring-integration/reference/html/ip.html#tcp-adapters) and use your browser to find 'client-mode' for more information.

That said, with `single-use="false"`, you can simply call `getConnection()` on the client factory and it will re-establish the shared connection (but you must not do anything with the connection). Also, don't do this with `single-use="true"` however, because it will cause a memory leak (unless you `close()` the connection - which would make no sense - getting a connection just to close it).

# python - 如何在 Python 中强制退出 CLOSE_WAIT 套接字？

> ID：15659758
> 
> 赞同：3
> 
> 时间：2013-03-27T13:14:41.730
> 
> 标签：python, c, sockets, tcp

我在我的 Python 脚本中使用了一堆`sockets`，可能是 20/s。这些是短暂的，在三秒钟内完成。我已经尽力做好发送`socket.close()`到所有东西的工作，但由于某种原因，`CLOSE_WAIT`状态`sockets`仍然不断堆积。

我怎样才能强制退出这些`CLOSE_WAIT` `sockets`？或者我可以`timeout`对它们设置一个较低的值吗？他们最终堆积到崩溃点。

这是我的套接字代码：

```
 s = socket.socket(socket.AF_INET, socket.SOCK_STREAM, 0)
        s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        s.settimeout(2) # 2 seconds timeout

        l_onoff = 1
        l_linger = 0
        s.setsockopt(socket.SOL_SOCKET, socket.SO_LINGER, struct.pack('ii', l_onoff, l_linger)) 

        self.s = s          
        streamloop.add_callback(self.connect, s) 
```

这是我的关闭：

```
def full_close(self):
    try:
        self.stream.close()
        self.s.close()
    except Exception:
        print 'full_close err: ', sys.exc_info()[1:3]
        pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:13:47.587

听起来您在某处泄漏了套接字。

有关更多信息，请参阅[https://stackoverflow.com/a/11240739/412080](https://stackoverflow.com/a/11240739/412080)。

# ember.js - 应该在模型或控制器中声明计算属性吗？

> ID：15659761
> 
> 赞同：5
> 
> 时间：2013-03-27T13:14:49.230
> 
> 标签：ember.js, ember-data

具有以下用户模型：

```
Sks.User = DS.Model.extend
  firstName: DS.attr("string")
  lastName: DS.attr("string") 
```

应该在哪里声明“fullName”计算属性？

```
 fullName: Ember.computed(->
    firstName = @get("firstName")
    lastName = @get("lastName")
    firstName = ""  if firstName is `undefined`
    lastName = ""  if lastName is `undefined`
    lastName + " " + firstName
  ).property("firstName", "lastName") 
```

它应该在“UsersController”中还是直接在模型中？Ember 文档说只在会话中使用的字段应该写在控制器中。但问题是我无法在索引模板中访问“fullName”：

```
Sks.IndexController = Ember.Controller.extend
  needs: ['users'] 
```

在这里，“fullName”不可访问（在控制器中声明）

```
{{#each user in controllers.users}}
  <li>{{user.fullName}}</li>
{{/each}} 
```

但它是在模型中的时候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T11:57:58.937

在这种情况下，我认为模型是计算属性的正确位置，因为只有拥有 firstname 和 lastname 属性才有意义。

您仍然可以在有意义的情况下将计算属性放在控制器上，但我想像“fullName”这样的属性可以在您的应用程序中的多个地方使用（并且在控制器中使用它会迫使您在不同的地方重复工作应用程序的一部分）

# java - 只为带有 Tycho 的插件构建必要的 Eclipse RCP 插件

> ID：15659763
> 
> 赞同：1
> 
> 时间：2013-03-27T13:14:54.303
> 
> 标签：java, maven, eclipse-plugin, eclipse-rcp, build-process

我是 Maven 和 Tycho 的新手，我希望我不会问一个愚蠢的问题。谢谢阅读！！

我在一个结构如下的大型 Eclipse RCP 项目中：

-插件 1

|-pom.xml

-插件 2

|-pom.xml

-插件 3

|-pom.xml

-插件 4

|-pom.xml

-产品 1

|-pom.xml

-产品 2

|-pom.xml

-掌握

|-pom.xml

在我的情况下，产品 1 需要先构建插件 1 和插件 2，而产品 2 需要先构建插件 2、插件 3 和插件 4。

主 pom.xml 文件是所有插件和产品 pom.xml 文件的父级。当我`mvn clean install`在主 pom.xml 上运行时，所有产品和插件都正确构建。

当我`mvn clean install`在产品 1 的 pom.xml 文件上运行时，它采用插件 1 和插件 2 的内置 .jar 文件。（产品 2 模拟）

这是我的问题。**是否有可能在不使用已构建的 .jar 文件且不构建“太多”插件的情况下仅为一种产品重建必要的插件？**

在我的情况下，这意味着我想`mvn clean install`在产品 1 上运行，它还应该构建插件 1 和插件 2，但不是插件 3-4，而不是产品 2。

如果对您有帮助，这里是我项目的示例 pom.xml 文件：

主 pom.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>

    <project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<modelVersion>4.0.0</modelVersion>
<groupId>myGroupId</groupId>
<artifactId>master</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>pom</packaging>

<properties>
    <tycho.version>0.17.0</tycho.version>
</properties>

<modules>
    <module>../plugin1</module>
    <module>../plugin2</module>
    <module>../plugin3</module>
    <module>../plugin4</module>
    <module>../product1</module>
    <module>../product2</module>
</modules>

<repositories>
    <!-- configure p2 repository to resolve against -->
    <repository>
        <id>Repository1</id>
        <layout>p2</layout>
        <url>url-to-a-p2-site-on-my-server</url>
    </repository>
</repositories>

<build>
    <plugins>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-maven-plugin</artifactId>
            <version>${tycho.version}</version>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>target-platform-configuration</artifactId>
            <version>${tycho.version}</version>
            <configuration>
                <resolver>p2</resolver>
                <pomDependencies>consider</pomDependencies>
                <target>
                    <artifact>
                        <groupId>myGroupId</groupId>
                        <artifactId>myGroupId.target</artifactId>
                        <classifier>targetPlatform</classifier>
                    </artifact>
                </target>
                <environments>
                    <environment>
                        <os>macosx</os>
                        <ws>cocoa</ws>
                        <arch>x86_64</arch>
                    </environment>
                    <environment>
                        <os>linux</os>
                        <ws>gtk</ws>
                        <arch>x86</arch>
                    </environment>
                    <environment>
                        <os>linux</os>
                        <ws>gtk</ws>
                        <arch>x86_64</arch>
                    </environment>
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86</arch>
                    </environment>
                    <environment>
                        <os>win32</os>
                        <ws>win32</ws>
                        <arch>x86_64</arch>
                    </environment>
                </environments>
                <ignoreTychoRepositories>false</ignoreTychoRepositories>
            </configuration>
        </plugin>
    </plugins>
</build>
    </project> 
```

插件1 pom.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>

<parent>
    <artifactId>master</artifactId>
    <groupId>myGroupId</groupId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath>../master/pom.xml</relativePath>
</parent>

<groupId>myGroupId</groupId>
<artifactId>plugin1</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>eclipse-plugin</packaging>
</project> 
```

产品 1 pom.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>

<parent>
    <artifactId>master</artifactId>
    <groupId>myGroupId</groupId>
    <version>0.0.1-SNAPSHOT</version>
    <relativePath>../master/pom.xml</relativePath>
</parent>

<groupId>myGroupId</groupId>
<artifactId>product1</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>eclipse-repository</packaging>

<name>product 1 build</name>
<build>
    <plugins>

        <plugin>
            <groupId>org.eclipse.tycho</groupId>
            <artifactId>tycho-p2-director-plugin</artifactId>
            <version>${tycho.version}</version>
            <configuration>
                <publishArtifacts>true</publishArtifacts>
            </configuration>
            <executions>
                <execution>
                    <id>materialize-products</id>
                    <goals>
                        <goal>materialize-products</goal>
                    </goals>
                </execution>
            </executions>

        </plugin>
    </plugins>
</build>
    </project> 
```

所有其他插件和产品定义都是模拟的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:25:04.070

默认情况下不是。

以下应该有助于
[从多模块 pom 构建单个模块](https://stackoverflow.com/questions/1612854/build-single-module-from-multimodule-pom)

读数是
[http://maven.apache.org/guides/mini/guide-multiple-modules.html](http://maven.apache.org/guides/mini/guide-multiple-modules.html) [http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

# php - ZF2 我无法在另一个控制器中访问我的模块模型表

> ID：15659764
> 
> 赞同：1
> 
> 时间：2013-03-27T13:14:55.370
> 
> 标签：php, zend-framework2, zend-controller

这是我的第一堂课

```
<?php 

namespace Config\Controller;

use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Config\Model\Config;
use Config\Form\ConfigForm;

class ConfigController extends AbstractActionController
{ 
protected $configTable;

public function indexAction()
{
    $this->getSMTPConfigTable();
    return new ViewModel(array(
            'config' => $this->getConfigTable()->fetchAll(),
    ));

}

public function addAction()
{
    $form = new ConfigForm();
    $form->get('submit')->setValue('Add');

    $request = $this->getRequest();
    if ($request->isPost()) {
        $config = new Config();
        $form->setInputFilter($config->getInputFilter());
        $form->setData($request->getPost());

        if ($form->isValid()) {
            $config->exchangeArray($form->getData());
            $this->getConfigTable()->saveConfig($config);

            return $this->redirect()->toRoute('zfcadmin/config');
        }
    }
    return array('form' => $form);
}

public function editAction()
{
    $id = (int) $this->params()->fromRoute('id', 0);
    if (!$id) {
        return $this->redirect()->toRoute('zfcadmin/config', array(
                'action' => 'add'
        ));
    }

    try {
        $config = $this->getConfigTable()->getConfig($id);
    }
    catch (\Exception $ex) {
        return $this->redirect()->toRoute('zfcadmin/config', array(
                'action' => 'index'
        ));
    }

    $form  = new ConfigForm();
    $form->bind($config);
    $form->get('submit')->setAttribute('value', 'Edit');

    $request = $this->getRequest();
    if ($request->isPost()) {
        $form->setInputFilter($config->getInputFilter());
        $form->setData($request->getPost());

        if ($form->isValid()) {
            $this->getConfigTable()->saveConfig($form->getData());

            return $this->redirect()->toRoute('zfcadmin/config');
        }
    }

    return array(
            'id' => $id,
            'form' => $form,
    );
}

public function getConfigTable()
{
    if (!$this->configTable) {
        $sm = $this->getServiceLocator();
        $this->configTable = $sm->get('Config\Model\ConfigTable');
    }
    return $this->configTable;
}

public function getSMTPConfigTable()
{
    $pr=$this->getConfigTable()->fetchAll();
    return $pr;
}

    } 
```

在另一个模块类中我该怎么做？我尝试了大多数方法，但我失败了，请帮助我。（对不起我的英语）我需要 $temp=new ConfigController(); $temp->getSMTPConfigTable();

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T14:30:57.260

我首先想检查我是否理解您的问题正确。阅读问题的名称和内容，我假设您询问了一种在另一个控制器或模块类中获取 ConfigTable（模型）的方法。

要了解如何在 ZF2 中管理对象和服务，我建议您查看此 ZF2 手册页：

[http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.quick-start.html](http://framework.zend.com/manual/2.0/en/modules/zend.service-manager.quick-start.html)

如果您注意该页面的“创建 ServiceLocator-aware 类”部分，您会发现您可以通过服务管理器本身访问向服务管理器注册的任何对象。服务管理器在其术语中被注入到每个实现`ServiceLocatorAwareInterface`或简单地具有名为的方法的对象中`setServiceLocator()`。

清楚了这一点，ZF2`Zend\Mvc\Controller\AbstractActionController`实现了这个接口，这意味着您可以在对象中获取服务管理器，因此可以在其中注册任何其他对象。如果您查看以下方法（来自您的`Config\Controller`），则有一个从服务管理器获取模型的好示例：

```
public function getConfigTable()
{
    if (!$this->configTable) {
        $sm = $this->getServiceLocator();
        $this->configTable = $sm->get('Config\Model\ConfigTable'); // <-- HERE!
    }
    return $this->configTable;
} 
```

`ServiceManager`因此，在通过并且具有`setServiceLocator()`（和 optionaly ）方法创建的每个类中，`getServiceLocator()`您可以以相同的方式访问您的模型：

```
$sm = $this->getServiceLocator();
// or 
$sm = $this->serviceLocator; // or whatever attribute you have set it to.
$configTable = $sm->get('Config\Model\ConfigTable'); 
```

关于如何调用`fetchAll()`你的模型的方法，我把这个决定留给你在哪里做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T14:30:15.263

这正是您使用`ServiceManager`

您可以将您的`TableGateway`（或您用作“模型表”的任何东西）注册到`ServiceManager`如下所示：

```
//Module.php 
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'my-model-gateway' => function($sm) {
               $gw = new MyTableGateway($sm->get('Zend\Db\Adapter\Adapter'));
               return $gw;
            }
        )
    }
} 
```

这只是一个展示场景——它不会像这样对你进行复制粘贴——我没有从你的代码中变得聪明，但你可以使用这个简单的例子来知道做了什么。我注册了一个名为的服务`my-model-gateway`，该服务创建了一个名为`MyTableGateway`. 此类将`Zend\Db\Adapter\Adapter`通过构造函数注入默认注入。

使用它，您可以从任何模块的任何控制器访问此服务，如下所示：

```
$gw = $this->getServiceLocator()->get('my-model-gateway'); 
```

希望这可以让你开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:25:05.540

为此，您将需要一个构造函数。试试这个：

```
class ConfigController {
   function __construct() {
   }
} 
```

即使它是空的，您也将获得该类的实例，然后您将能够访问所有参数。也许您还需要为类的一般设置创建一个 init。

# jquery - 使用 jQuery mobile 创建带有手风琴式列表项的列表

> ID：15659770
> 
> 赞同：1
> 
> 时间：2013-03-27T13:15:07.223
> 
> 标签：jquery, html, jquery-mobile, jquery-mobile-listview, jquery-mobile-collapsible

我正在开发一个 jQuery 移动网站，该网站将使用 PhoneGap 转换为 Android 应用程序。

我有一个汽车清单，在一个可折叠的标题下。我可能还有其他车辆清单，例如船或飞机。

我希望能够实现的是该单个列表项上的手风琴功能，例如，有人可能会单击奥迪，然后它会下拉显示有关该特定汽车的信息。（目前，该链接指向外部页面。）

实现这一目标的“官方”或“最佳”方式是什么？

我的代码在下面，但我也把它放在了一个 jsFiddle [here](http://jsfiddle.net/REBSQ)中。航空母舰链接下方的文本大致是我想要实现的功能，*但它应该只在单击该列表项时显示。*

```
 <div data-role="collapsible" data-theme="b" data-content-theme="c">
            <h2>Choose a car model...</h2>
            <ul data-role="listview">
                <li><a href="index.html">Acura</a></li>
                <li><a href="index.html">Audi</a></li>

            </ul>
        </div>

            <div data-role="collapsible" data-theme="b" data-content-theme="c">
            <h2>Choose a boat model...</h2>
            <ul data-role="listview">
                <li><a href="index.html">Speedboat</a></li>
                <li><a href="index.html">Aircraft Carrier</a></li>
                                    <p><br />test info</p>
            </ul>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:29:18.533

这是一个工作示例：http: [//jsfiddle.net/Gajotres/eELYZ/](http://jsfiddle.net/Gajotres/eELYZ/)

您只需要从 li 元素中删除一个标签。它被称为只读列表视图：http: [//jquerymobile.com/demos/1.2.0/docs/lists/lists-readonly.html](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-readonly.html)

```
<ul data-role="listview">
    <li>
        <h3>Stephen Weber</h3>
        <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
        <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
        <p class="ui-li-aside"><strong>6:24</strong>PM</p>
    </li>
    <li>
        <h3>Stephen Weber</h3>
        <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
        <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
        <p class="ui-li-aside"><strong>6:24</strong>PM</p>
    </li>        
</ul> 
```

**编辑 ：**

```
<div data-role="collapsible" data-theme="b" data-content-theme="c" id="outer-collapsible">
    <h2>Choose a boat model...</h2>    
    <div data-role="collapsible" data-theme="c" data-content-theme="c" id="inner-collapsible">
        <h2>Choose a boat model...</h2>    
        <ul data-role="listview">
            <li>
                <h3>Stephen Weber</h3>
                <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
                <p class="ui-li-aside"><strong>6:24</strong>PM</p>
            </li>
            <li>
                <h3>Stephen Weber</h3>
                <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
                <p class="ui-li-aside"><strong>6:24</strong>PM</p>
            </li>        
        </ul>
    </div>
    <div data-role="collapsible" data-theme="c" data-content-theme="c" id="inner-collapsible">
        <h2>Choose a boat model...</h2>    
        <ul data-role="listview">
            <li>
                <h3>Stephen Weber</h3>
                <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
                <p class="ui-li-aside"><strong>6:24</strong>PM</p>
            </li>
            <li>
                <h3>Stephen Weber</h3>
                <p><strong>You've been invited to a meeting at Filament Group in Boston, MA</strong></p>
                <p>Hey Stephen, if you're available at 10am tomorrow, we've got a meeting with the jQuery team.</p>
                <p class="ui-li-aside"><strong>6:24</strong>PM</p>
            </li>        
        </ul>
    </div>    
</div> 
```

新的工作示例：http: [//jsfiddle.net/Gajotres/eELYZ/](http://jsfiddle.net/Gajotres/eELYZ/)

# html - 如何使用 HTML5 元素构建我的网页？

> ID：15659771
> 
> 赞同：2
> 
> 时间：2013-03-27T13:15:08.253
> 
> 标签：html, tags, structure

我正在更新一个网站以使用一些 HTML5 结构元素。

我已经阅读了很多文章，但我仍然不是 100% 清楚。

我的问题是关于内容，而不是页眉或页脚元素。这是一个典型的例子：

```
<div id="main-content" class="grid-8">
    <section>
        <h1 class="grey-heading">How It Works</h1>
        // some section content here  
    </section>
</div>
<div id="sidebar" class="grid-4">
    <aside>
        // some related stuff here
     </aside>
</div> 
```

如您所见，它是一个简单的主要内容/侧边栏设置。问题是，我保留结构性 div 是否正确（因为这就是他们所做的一切），还是可以将结构性内容添加到内容中？换句话说，删除 div 并将类/id 添加到部分和边上？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:19:55.250

如果您的样式允许，您可以替换它们，它们为浏览器提供额外的语义含义，这对辅助技术和网络爬虫特别有用。您的标记非常好，但`<div>`如果您不需要它们进行样式设置，请随意删除 s。`<nav>`如果它用于导航，您可能还想在侧边栏上使用它。

我想强调的是，是否保留`<div>`s 取决于您，如果您提供 HTML5 语义标签，那么`<div>`如果您希望它们用于样式或组织，则为您的布局设置 20 个内部 s 并没有任何意义。HTML5 语义标签就像`<div>`s 一样，除了它们带有额外的语义含义。

这是一个 HTML5 布局示例：

```
<header></header>
<nav></nav>
<section>
   <header></header>
   <article></article>
   <article></article>
   <footer></footer>
</section>
<aside></aside>
<footer></footer> 
```

如果你使用 HTML5 标签，还要确保你使用像[modernizr这样的库作为旧浏览器的 polyfill。](http://modernizr.com/)

## 参考

*   [Smashing 杂志 - HTML5 和 Web 的未来](http://coding.smashingmagazine.com/2009/07/16/html5-and-the-future-of-the-web/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:17:34.193

Your wrappers should be replaced with the new tags, like Kolink said.

For example, your `class="main-wrapper"` could be replaced with the `<main>` tag. Likewise, why are you wrapping your sidebar when `<aside>` would be fully customisable?

```
<main>
    <section>
        <p>content</p>
    </section>
<main>

<aside>
    <p>content</p>
</aside> 
```

All of these can have specific CSS layout ruling for them, making your markup 'readable' and easy to understand. Obviously, you may need classes, but this may help your workload by using new and pre-existing tags instead of arbitrary `<div>`s

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:20:32.640

[http://html5doctor.com/element-index](http://html5doctor.com/element-index)

在这里您可以阅读有用的资源

> div 元素根本没有特殊含义。它代表它的孩子。它可以与 class、lang 和 title 属性一起使用，以标记一组连续元素共有的语义。

和

> Section 代表一个通用文档或应用程序部分。在这种情况下，部分是内容的主题分组，通常带有页眉，可能带有页脚。示例包括书中的章节、选项卡式对话框中的各种选项卡式页面或论文的编号部分。网站的主页可以分为介绍、新闻项目、联系信息等部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T13:21:05.720

浏览器不完全支持分配了 classes/id 的 HTML5 元素。例如，如果`aside`有一个类并且您尝试将 css 添加到该类，它不会呈现。如果你使用[HTML5 Shiv](https://code.google.com/p/html5shiv/)，它应该可以解决这个问题，然后你的代码会更干净，而且很棒！

# apache - Mod重写直接.php访问

> ID：15659772
> 
> 赞同：0
> 
> 时间：2013-03-27T13:15:15.963
> 
> 标签：apache, mod-rewrite

我希望直接 .php 请求得到一个未找到的错误。

角色如下所示：

```
RewriteRule ^update/([^/]+)/([^/]+)$ update.php?version=$1&action=$2 [QSA,L] 
```

正确的请求应该是

```
http://localhost/update/0.95/info 
```

但为什么会这样：

```
http://localhost/update.php/0.95/info 
```

还在工作吗？为什么角色匹配？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:28:59.713

重写规则*不*匹配`http://localhost/update.php/0.95/info`。不会设置查询参数版本和操作。该 URL 仍然有效，因此它可以工作并指向**update.php**。

这是来自的服务器摘录`/update.php/0.95/info`：

```
[QUERY_STRING] => 
[REQUEST_URI] => /update.php/0.95/info
[SCRIPT_NAME] => /update.php
[PATH_INFO] => /0.95/info 
```

# android - 如何使用 OCR 和 Zxing 开发 Android 应用程序

> ID：15659777
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:15:24.027
> 
> 标签：android, ocr, zxing

我被要求创建一个使用 OCR 和 Zxing 扫描代码栏的 Android 应用程序。结果应该在 ImageView 中有“代码栏图像”，在 TextView 中应该有“扫描结果”和“OCR 结果”。

谁能解释一下我该怎么做，因为我是Android开发的新手。

我在zxing2.1的captureActivity中添加了下面的代码。我还将 Tess-two.jar 添加到 Zxing。当我执行应用程序时停止。谁能告诉我如何将OCR代码添加到zxing。这是我添加到 Zxing 的代码。

```
 private void handleDecodeInternally(Result rawResult, ResultHandler resultHandler, Bitmap barcode) {
    statusView.setVisibility(View.GONE);
    viewfinderView.setVisibility(View.GONE);
    resultView.setVisibility(View.VISIBLE);

String textocrResult;

ImageView barcodeImageView = (ImageView) findViewById(R.id.barcode_image_view);
if (barcode == null) {
  barcodeImageView.setImageBitmap(BitmapFactory.decodeResource(getResources(),
      R.drawable.launcher_icon));
} else {
  barcodeImageView.setImageBitmap(barcode);
  baseApi.setImage(ReadFile.readBitmap(barcode));
  textocrResult = baseApi.getUTF8Text();
  ocrResult = new OcrResult();
  ocrResult.setText(textocrResult);
  ocrResult.setBitmap(barcode);
  TextView ocrResultTextView = (TextView) findViewById(R.id.ocr_result_text_view);
  ocrResultTextView.setText(textocrResult);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:30:48.723

Zxing 附带一个样本，可以检测是否存在与您选择的参数匹配的条形码，然后对其进行解码。您可以从那里开始，请注意，我不确定 ZXing API 是否可以让您获取条形码本身的图像，或者您自己通过一些计算机视觉代码来获取。 [ZXing 与 Android](http://code.google.com/p/zxing/source/browse/trunk/android-integration)

# vba - 从函数设置单元格值

> ID：15659779
> 
> 赞同：20
> 
> 时间：2013-03-27T13:15:38.877
> 
> 标签：vba, excel

单元格的内容是`A1`函数的位置：`=test(2)``test`

```
Function test(ByRef x As Double) As Double
  Range("A2") = x
  test = x * x
End Function 
```

你能解释为什么这在 cell 中给出而`#VALUE!`在 cell 中`A1`没有给出`A2`吗？我期望`A2`包含`2`并`A1`包含`4`. 没有这条线`Range("A2") = x`，函数按预期工作*（对单元格的值求平方）*。

真正令人困惑的是，如果您`test`使用子例程进行包装，`calltest`那么它可以工作：

```
Sub calltest()
  t = test(2)
  Range("A1") = t
End Sub

Function test(ByRef x As Double) As Double
  Range("A2") = x
  test = x * x
End Function 
```

但这并不

```
Function test(ByRef x As Double) As Double
  Range("A2") = x
End Function 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T13:19:32.700

由于`Function`基本原理规定您不能更改或设置工作表单元格。您需要删除该行`Range("A2") = x`

**编辑**一些额外的链接（我相信这对于那些想要分析 UDF 主题的人来说总是有用的）：[由 Microsoft 创建自定义函数](http://office.microsoft.com/en-au/excel-help/creating-custom-functions-HA001111701.aspx#BMrules)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-19T09:54:53.130

是的，您可以拥有自己的用户定义函数，该函数将值写入**任何单元格，而不仅仅是您在公式中键入的那个**。

这是一个简单的例子。UDF 函数接受两个参数 A 和 B 并返回它们的乘积 A*B。但有趣的是，它在我们输入公式的单元格右侧的相邻单元格中返回结果。

将此代码放入标准 VBA 模块中：

```
Function UDF_RectangleArea(A As Integer, B As Integer)
    Dim MagicSpell As String
    MagicSpell = "Adjacent(" & Application.Caller.Offset(0, 1).Address(False, False) & "," & A & "," & B & ")"
    Evaluate MagicSpell
    UDF_RectangleArea = "Hello world"
End Function

Private Sub Adjacent(CellToChange As Range, A As Integer, B As Integer)
    CellToChange = A * B
End Sub 
```

现在输入`B2`公式：`=UDF_RectangleArea(3,4)`

[![在此处输入图像描述](../Images/f819f5c61c53981fa1908ba2cf29d17b.png)](https://i.stack.imgur.com/EfE1r.gif)

该函数在两个单元格中返回结果：“Hello world” `B2`（这并不奇怪）和矩形区域`C2`（这是一只脱帽的兔子）。可以轻松自定义结果以及“兔子”外观的位置。该工作由 VBA [EVALUTE](https://docs.microsoft.com/en-us/previous-versions/visualstudio/foxpro/aa977640(v=vs.71))命令完成。`MagicSpell`在这种情况下，变量的值变为在`Adjacent(C2,3,4)`返回 UDF 结果之前从 UDF 中触发。玩得开心！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-27T14:30:00.943

当您从工作表单元格调用函数时，您实际上是将该函数用作用户定义函数，它具有如下所述的限制：

[http://support.microsoft.com/kb/170787](http://support.microsoft.com/kb/170787)

文中有一行：

> 任何环境更改都应通过使用 Visual Basic 子例程进行。

有趣的是，他们如何使用*should*而不是*must*一词。我想知道知识库的作者是否知道环境更改可以通过 VBA 函数发生。

现在，当您从另一个 VBA Sub/Function 调用该函数时，它的处理方式将有所不同。从帮助文档中（对不起，我找不到网页参考 - 基本上，在 VBE 中，突出显示单词 Function 并按 F1）：

> 与 Sub 过程一样，Function 过程是一个单独的过程，它可以接受参数、执行一系列语句并更改其参数的值。但是，与 Sub 过程不同的是，当您想要使用函数返回的值时，您可以在表达式右侧使用 Function 过程，就像使用任何内部函数（例如 Sqr、Cos 或 Chr）一样.

所以听起来 Subs 和函数仅在 VBA 中使用时可以做同样的事情，除了 Functions 可以将值返回给调用函数/sub。

实际上，这非常有趣，因为 Excel 可以调用对 Excel 环境具有某种“只读”限制的函数。

我认为，最后，Excel 可以以与 VBA 不同的方式从工作表单元格调用函数。当您从单元格中调用它时，它被认为是用户定义的函数，其中包括更改 Excel 环境的限制。当从 VBA 中调用时（调用链中的**原始**调用者来自 VBA），它具有 Sub 的所有功能，并且可以返回值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-09T13:37:48.720

我已经调整了您的代码以适用于字符串和函数以及我希望的其他任何东西（仍在测试）。

测试产生了很多问题，但首先想到的是 2：

您可以使用哪些其他方式来执行/处理参数并返回所需的结果；

一个。正如我所做的那样。不像我所做的那样（即不同）。

非常感谢 Rick Rothstein MrExcel MVP 和 SO 上的许多其他人为实现这一目标提供了支持和帮助。

```
Function MOVEME27(a As Variant, b As Variant, Optional CELLR As Variant, Optional cellq As Variant) '21/05/2018 works copied to ar4' 03/06/2019 23:30 was cellr as range , cellq as range - changed to variants
 Dim WTVR1 As Variant '' ''20/05/2019'' '09/06/2019 Code by S Tzortzis/David Wooley
 Dim WTVR2 As Variant
 Dim P As String
 Dim P1 As String
 Dim bb As String
 Dim bb1 As String
 Dim A1 As Long
 Dim A2 As Long

 Dim c As String

 'x' a = Evaluate(a)
P = Chr(34) & a & Chr(34)
P2 = Chr(34) & [P] & Chr(34)

bb = Chr(34) & b & Chr(34)
bb1 = Chr(34) & [bb] & Chr(34)

c = Chr(34) & CELLR & Chr(34)
f = Chr(34) & callq & Chr(34)

'P2 = Chr(34) & "'''" & [P] & "'''" & Chr(34)
'p1 = Chr(34) & p & Chr(34)

''WTVR1 = "MOVEUS1(" & Application.Caller.Offset(0, 2).Address(False, False) & "," & Chr(34) & P2 & Chr(34) & "," & b & ")"
   WTVR1 = "MOVEUS11h(" & Application.Caller.Offset(0, 2).Address(False, False) & "," & [P2] & "," & [bb1] & ")"
Evaluate WTVR1

WTVR2 = "MOVEUS22h(" & Application.Caller.Offset(0, 1).Address(False, False) & "," & [P2] & "," & [bb1] & ")" ' used or be adjacent - maybe redo rhat pr put a GO TO sub. '' ''20/05/2019''

Evaluate WTVR2

A1 = cellq.Row
A2 = cellq.Column

CELLRR = Chr(34) & CELLR & Chr(34)
CELLRR1 = Chr(34) & [CELLRR] & Chr(34)
cellqq = Chr(34) & cellq & Chr(34)
cellqq1 = Chr(34) & [cellqq] & Chr(34)

''wtvr3 = "CopyFrom.Parent.Evaluate CopyOver234h(" & c & "," & f & ")" ''''20190531 1929
wtvr31 = "MOVEUS33h(" & Application.Caller.Offset(A1 - ActiveCell.Row + 1, A2 - ActiveCell.Column).Address(False, False) & "," & [CELLRR] & "," & [cellqq] & ")"

    Evaluate wtvr31

MOVEME27 = "Hello world       " & " / " & WTVR1 & " / " & WTVR2 & "\\\\\/////" & wtvr31 & "\\\\\/////---" & ActiveCell.Row - A1 & "//////---" & ActiveCell.Column - A2

' DO AS WHATVER = "MOVEUS3(" APPLICATION.CALLER.OFFSET(THE ROW & COLUMN IE CELL         YOU REFERENCES IN a as variant (copy from)'
    'with ="" in sub 30052019 19:28

    'CopyFrom.Parent.Evaluate "CopyOver2(" & CELLR.Address(False, 1) & "," &              CELLR.Address(False, False) & ")"  ''''2019050 1929

    End Function

    Private Sub MOVEUS11h(CELL1 As Range, G1 As Variant, G2 As Variant)

        '[ak333] = a

        CELL1 = Chr(34) & G1 & Chr(34) & "B" & "//" & G2

    End Sub

    Private Sub MOVEUS22h(CELL2 As Range, G3 As Variant, G4 As Variant)

        CELL2 = Chr(34) & G3 & Chr(34) & "<>" & G4

    End Sub

    '' with chr(34) arond the p's and a's in sub or fucntion changes behavior. thinking of doing if a is string, then a=x , x as string, if not kep as variant
    ''27/05/2019 :(

    '''''30/05/2019 .....'''''''

    '------------------------------------------------------------------------------- ADD THIS 30052019 -------------------------------
    'private sub Movus3(cellfrom as range, cellto as range)
    'End Sub

    Private Sub moveus33h(cell3 As Range, CopyFrom As Variant, copyTo As Variant) ''''2019050 1929 ''' 03062019 change ema back to as Range here. :)
       '' copyTo.Value = CopyFrom.Value ''''2019050 1929

       ''CopyFrom.Value = ""

       cell3 =  CopyFrom  'Chr(34) & CopyFrom & Chr(34)

    End Sub ''''2019050 1929 
```

# xpages - XSP.partialRefresh

> ID：15659780
> 
> 赞同：1
> 
> 时间：2013-03-27T13:15:40.013
> 
> 标签：xpages

环境：客户端 + 服务器 = 8.5.3 扩展库。

单击时我有一个按钮运行 SSJS 并部分刷新 div (div1)

现在我必须在同一个表单上更新几个 div (div2,div3,....)。我已经尝试使用相同按钮的 onclick() 将以下代码作为 CSJS，但它什么也没做。

```
XSP.partialRefreshGet("#{id:div1}", {
   onComplete: function() {
      XSP.partialRefreshGet("#{id:div2}", {
        onComplete: function() {}
      });
   }
}); 
```

将不胜感激任何有助于解决此问题的回应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T13:25:04.107

将 XSP.partialRefreshGet 放在按钮的 onclick 上意味着它在 SSJS*之前*运行。那是你要的吗？我怀疑您可能希望它在 SSJS 之后运行，因此在源窗格中选择 eventHandler 并将您的代码放在 eventHandler 的 onComplete 事件上。这将在 SSJS 完成后运行。

我无法确认您的 XSP.partialRefreshGet 中是否存在问题，但我相信按钮上的任何 CSJS 都需要返回 true，否则 SSJS 不会运行。如果你把它移到 onComplete 你就不用担心了。

# haskell - 查找非穷举模式

> ID：15659781
> 
> 赞同：4
> 
> 时间：2013-03-27T13:15:40.277
> 
> 标签：haskell, pattern-matching

我能以某种方式看到haskell试图使用什么模式吗？它适用于较小的示例，但在较大的示例上崩溃，我很难找到它可能是什么情况。

```
euler18 :: [[Integer]]
euler18 = pathPyr minipyr

pathPyr xss = path [(head xss)] (tail xss)

minipyr = [[3],[7,4],[2,4,6]]
pyramid = [[75], [95,64], [17,47,82], [18,35,87,10], [20,4,82,47,65], [19,1,23,75,3,34], [88,2,77,73,7,63,67], [99,65,4,28,6,16,70,92], [41,41,26,56,83,40,80,70,33], [41,48,72,33,47,32,37,16,94,29], [53,71,44,65,25,43,91,52,97,51,14], [70,11,33,28,77,73,17,78,39,68,17,57], [91,71,52,38,17,14,91,43,58,50,27,29,48], [63,66,4,68,89,53,67,30,73,16,69,87,40,31], [4,62,98,27,23,9,70,98,73,93,38,53,60,4,23]]

path :: [[Integer]] -> [[Integer]] -> [[Integer]]
path xss (ys:[])  = extendpath xss ys
path xss (ys:yss) = path (extendpath xss ys) yss

extendpath :: [[Integer]] -> [Integer] -> [[Integer]]
extendpath (xs:[]) (y1:y2:[]) = [y1:xs,y2:xs]
extendpath (xs:xss) (y1:y2:ys) = [y1:xs,y2:xs] ++ extendpath xss (y2:ys) 
```

输出：

```
*Main> pathPyr pyramid 
[[4,63,91,70,53,41,41,99,88,19,20,18,17,95,75],[62,63,91,70,53,41,41,99,88,19,20,18,17,95,75],[62,66,91,70,53,41,41,99,88,19,20,18,17,95,75],[98,66,91,70,53,41,41,99,88,19,20,18,17,95,75],[98,66,71,70,53,41,41,99,88,19,20,18,17,95,75],[27,66,71,70,53,41,41,99,88,19,20,18,17,95,75],[27,4,71,70,53,41,41,99,88,19,20,18,17,95,75],[23,4,71,70,53,41,41,99,88,19,20,18,17,95,75],[23,4,71,11,53,41,41,99,88,19,20,18,17,95,75],[9,4,71,11,53,41,41,99,88,19,20,18,17,95,75],[9,68,71,11,53,41,41,99,88,19,20,18,17,95,75],[70,68,71,11,53,41,41,99,88,19,20,18,17,95,75],[70,68,52,11,53,41,41,99,88,19,20,18,17,95,75],[98,68,52,11,53,41,41,99,88,19,20,18,17,95,75],[98,89,52,11,53,41,41,99,88,19,20,18,17,95,75],[73,89,52,11,53,41,41,99,88,19,20,18,17,95,75],[73,89,52,11,71,41,41,99,88,19,20,18,17,95,75],[93,89,52,11,71,41,41,99,88,19,20,18,17,95,75],[93,53,52,11,71,41,41,99,88,19,20,18,17,95,75],[38,53,52,11,71,41,41,99,88,19,20,18,17,95,75],[38,53,38,11,71,41,41,99,88,19,20,18,17,95,75],[53,53,38,11,71,41,41,99,88,19,20,18,17,95,75],[53,67,38,11,71,41,41,99,88,19,20,18,17,95,75],[60,67,38,11,71,41,41,99,88,19,20,18,17,95,75],[60,67,38,33,71,41,41,99,88,19,20,18,17,95,75],[4,67,38,33,71,41,41,99,88,19,20,18,17,95,75],[4,30,38,33,71,41,41,99,88,19,20,18,17,95,75],[23,30,38,33,71,41,41,99,88,19,20,18,17,95,75]*** Exception: euler18.hs:(16,1)-(17,72): Non-exhaustive patterns in function Main.extendpath 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:51:30.903

```
extendpath :: [[Integer]] -> [Integer] -> [[Integer]]
extendpath (xs:[]) (y1:y2:[]) = [y1:xs,y2:xs]
extendpath (xs:xss) (y1:y2:ys) = [y1:xs,y2:xs] ++ extendpath xss (y2:ys) 
```

虽然它有效，但每次调用时路径数都会增加`extendpath` *一倍。*但是行的长度仅增加 1。因此，一旦您有一个包含三行以上的三角形，在处理第四行（以及以后的每一行）时就会出现模式匹配失败。

在第二个（从零开始，因此包含三个元素的行）行之后，您有

```
--          LL   LR   RL   RR
extendpath [p_1, p_2, p_3, p_4] [v_1, v_2, v_3, v_4]
~> [v_1:p_1, v_2:p_1] ++ extendpath [p_2, p_3, p_4] [v_2, v_3, v_4]
~> [v_1:p_1, v_2:p_1] ++ [v_2:p_2, v_3:p_2] ++ extendpath [p_3, p_4] [v_3, v_4]
~> [v_1:p_1, v_2:p_1] ++ [v_2:p_2, v_3:p_2] ++ [v_3:p_3, v_4:p_3] ++ extendpath [p_4] [v_4] 
```

最后一次调用没有匹配的模式。

现在，路径`p_2`和`p_3`结束在同一个地方，所以两者可以在下一行中扩展相同的两个值，但`extendpath`不考虑路径的结束位置。一般来说，`n`第-行有

```
n `choose` k 
```

以第 -th 点结尾的路径`k`[这就是我在这里选择从零开始计数的原因]。扩展路径时，可能的扩展取决于路径的当前端点。

你需要一种不同的方法。尤其是第 67 题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T13:23:33.510

您有大量未涵盖的案例。这意味着您有部分功能，这是**不好的**。尽量避免它们。`Maybe`通常，使用类型构造函数很容易将它们转换为总函数。然后，您可以使用模式匹配来确保涵盖所有情况。另外，请注意`head`和`tail`是偏函数。

作为诊断此问题的技巧，我只需添加以下内容：

```
extendPath xs ys = error ("oops, pattern-match failed, arguments were: " ++ show xs ++ show ys) 
```

确保那个案例在其他案例*之后*，因为它是一个包罗万象的。

您也必须为`path`and执行此操作`pathPyr`。您可能希望通过打开警告来获得 Haskell 的帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T15:36:51.170

良好的错误警告级别将为您提供所需的所有信息。要触发它，请放入文件的头部：

```
{-# OPTIONS_GHC -Wall #-} 
```

这很可能也会警告你一些其他的东西。哪个好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T13:31:36.473

`-W`当存在不完整的模式时，您可以通过将 GHC/GHCi作为参数提供给 GHC 或输入`:set -W`GHCi（并重新编译/重新加载您的文件！）来让 GHC/GHCi 向您发出警告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T11:23:02.177

捕捉缺失模式的另一种选择：

[http://community.haskell.org/~ndm/catch/](http://community.haskell.org/~ndm/catch/)

# r - 为什么 unlist() 会杀死 R 中的日期？

> ID：15659783
> 
> 赞同：100
> 
> 时间：2013-03-27T13:15:51.697
> 
> 标签：r

当我取消列出日期列表时，它会将它们转换回数字。这正常吗？除了重新申请 as.Date 之外的任何解决方法？

```
> dd <- as.Date(c("2013-01-01", "2013-02-01", "2013-03-01"))
> class(dd)
[1] "Date"
> unlist(dd)
[1] "2013-01-01" "2013-02-01" "2013-03-01"
> list(dd)
[[1]]
[1] "2013-01-01" "2013-02-01" "2013-03-01"

> unlist(list(dd))
[1] 15706 15737 15765 
```

这是一个错误吗？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-27T13:19:13.357

`do.call`是使用列表“做某事”的便捷功能。在我们的例子中，使用`c`. `cbind`将列表中的 data.frames或`rbind`data.frames 转换为单个大 data.frame的情况并不少见。

我们在这里所做的实际上是连接`dd`列表的元素。这将类似于`c(dd[[1]], dd[[2]])`. 请注意，`c`可以作为函数或字符提供。

```
> dd <- list(dd, dd)
> (d <- do.call("c", dd))
[1] "2013-01-01" "2013-02-01" "2013-03-01" "2013-01-01" "2013-02-01" "2013-03-01"
> class(d) # proof that class is still Date
[1] "Date" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-10-29T16:19:58.203

或者使用[purrr](https://purrr.tidyverse.org/)将日期列表展平为保留类型的向量：

```
list(as.Date(c("2013-01-01", "2013-02-01", "2013-03-01"))) %>% purrr::reduce(c) 
```

结果是

```
[1] "2013-01-01" "2013-02-01" "2013-03-01" 
```

# ember.js - {{lineItem.product.name}} 不呈现产品名称

> ID：15659786
> 
> 赞同：0
> 
> 时间：2013-03-27T13:16:03.883
> 
> 标签：ember.js, ember-data

一个`Invoice` `hasMany` `lineItems`和`lineItem` `belongsTo`一个`Product`。

我想迭代发票的所有 lineItems 并使用产品名称呈现一个表格：

```
<script type="text/x-handlebars" data-template-name="invoice">
  <h1>Invoice #{{number}}</h1>
  <table>
  <tr><th>Amount</th><th>Product</th></tr>
  {{#each lineItem in lineItems}}
    <tr>
      <td>{{lineItem.amount}}</td>
      <td>{{lineItem.product.name}}</td>
    </tr>
  {{/each}}
  </table>
</script> 
```

但`{{lineItem.product.name}}`不起作用。我该如何编码？

我的`app.js`：

```
App = Ember.Application.create();

// Router
App.Router.map(function() {
  this.resource('invoice', { path: '/' });
});

App.InvoiceRoute = Ember.Route.extend({
  model: function() {
    return App.Invoice.find(1);
  }
});

// Models
App.Store = DS.Store.extend({
  revision: 11,
  adapter: 'DS.FixtureAdapter'
});

App.Invoice = DS.Model.extend({
  number: DS.attr('string'),
  lineItems: DS.hasMany('App.LineItem')
});

App.LineItem = DS.Model.extend({
  amount:  DS.attr('number'),
  invoice: DS.belongsTo('App.Invoice'),
  product: DS.belongsTo('App.Product')
});

App.Product = DS.Model.extend({
  name:  DS.attr('string'),
  lineItems: DS.hasMany('App.LineItem')
});

App.Invoice.FIXTURES = [{
  id: 1,
  number: '0001',
  lineItems: [1, 2]
}];

App.LineItem.FIXTURES = [{
  id: 1,
  invoice_id: 1,
  product_id: 1,
  amount: '2'
}, {
  id: 2,
  invoice_id: 1,
  product_id: 2,
  amount: '1'
}];

App.Product.FIXTURES = [{
  id: 1,
  name: 'Apple',
  lineItems: [1]
}, {
  id: 2,
  name: 'Orange',
  lineItems: [2]
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:26:41.487

固定装置是错误的。在 LineItem 的定义中，它必须是 product 而不是 product_id。这是固定代码：

```
App.LineItem.FIXTURES = [{
  id: 1,
  invoice: 1,
  product: 1,
  amount: '2'
}, {
  id: 2,
  invoice: 1,
  product: 2,
  amount: '1'
}]; 
```

# java - 从 Web 服务中调用 Web 服务而不等待响应

> ID：15659789
> 
> 赞同：0
> 
> 时间：2013-03-27T13:16:11.690
> 
> 标签：java, web-services, spring, rest

作为网络服务的一部分，比如 A，我需要调用另一个网络服务，比如 B。

给予 A 的调用者的响应不应依赖于 B，即它应该将响应返回给调用者，而不管 B 的结果如何，考虑到 B 可能需要一些时间。

调用 A 和 B 的系统都是不同的。我如何实现这一目标？

注意：使用 RESTful 网络服务/Java

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:58:10.913

客户端应该异步调用*Web Service A操作。*

*Web 服务 A*也应该异步调用*Web 服务 B*操作。

*这样，无论Web Service B*的结果如何，客户端都将始终收到响应。

大多数 REST 框架已经支持异步调用：

*   一旦发布，**JAX-RS 2.0**将支持[异步 HTTP](http://java.dzone.com/articles/whats-new-jax-rs-20)。

*   使用**Apache CXF**：[异步客户端 HTTP 传输](http://cxf.apache.org/docs/asynchronous-client-http-transport.html)

*   使用**Resteasy**：[异步 HTTP 请求处理](http://docs.jboss.org/resteasy/docs/2.2.1.GA/userguide/html/Asynchronous_HTTP_Request_Processing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:02:00.770

根据给定的要求，

在您的情况下，从客户端到服务 A 的调用可以是同步的 Restful 调用。从服务 A 到服务 B 的调用是异步的。

因此，像往常一样在客户端到服务 A 之间使用宁静的连接。

在调用服务 A -> 服务 B 的情况下，您需要使用 JMS 概念，例如请求和响应队列。请参考[http://docs.oracle.com/cd/E14571_01/web.1111/e15184/asynch.htm](http://docs.oracle.com/cd/E14571_01/web.1111/e15184/asynch.htm) 这些通常实现为 2 单向请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:22:23.397

如果您不介意第 3 方库使用 jetty-client：[http ://www.supermind.org/blog/1023/non-blocking-nio-http-requests-in-java-with-jettys-httpclient](http://www.supermind.org/blog/1023/non-blocking-nio-http-requests-in-java-with-jettys-httpclient)

这是maven包描述： http: [//mvnrepository.com/artifact/org.eclipse.jetty/jetty-client](http://mvnrepository.com/artifact/org.eclipse.jetty/jetty-client)

# php - 在摘要页面上显示复选框选择

> ID：15659790
> 
> 赞同：1
> 
> 时间：2013-03-27T13:16:13.260
> 
> 标签：php, jquery

这与我之前的问题[here](https://stackoverflow.com/questions/14858495/show-user-inputs-on-a-summary-page)有关，但我认为它更简单。

我正在创建一个包含多个步骤的分步流程，最后一步是摘要页面。每个步骤都包含一些复选框，在摘要页面上我想显示选择的内容，然后允许他们提交表单。

我正在努力从相关问题中理解这个过程，希望这个简化版本能帮助我理解。

这是我的设置：

```
<?php $counter = 1; 
$amount = get_field('select_number_of_questions');
$repeater = get_field("step_by_step_test");
shuffle($repeater);
$repeater_limit = array_slice($repeater,0,$amount);
foreach($repeater_limit as $repeater_row) { ?>
<div class="form-row">
        <div id="modules-repeat">                           
            <p class="training"><?php echo $repeater_row['question']; ?></p><br />
            <p class="training-highlight">Please choose <span class="bold"><?php echo $repeater_row['required_answers']; ?></span> of the following answers:</p><br />
            <?php $rows = $repeater_row['answer_options'];
            foreach ($rows as $row){ ?>
            <?php $Question[$counter] = $_POST['answer'.$counter]; ?>
                    <div style="display:table-row;">
                    <div style="display:table-cell;">
                        <input style="width: 20px;" type="checkbox" name="answer<?php echo $counter; ?>[]" value="<?php echo the_sub_field('answer'); ?>" />
                    </div>
                    <div style="display:table-cell;">
                        <p>
                            <?php echo $row['answer']; ?>
                        </p>
                    </div>              
                    </div>
            <?php } ?>
            <div class="inner"></div>
            <button class="next"></button>

            <div class="clear"></div>
        </div>
</div>
<?php $counter++; } ?>

<div class="form-row" id="form-row-last" style="display:none;">
    <div id="modules-repeat">                           
        <p>Summary page</p>
            <?php foreach($repeater_limit as $repeater_row) { ?>
                <p class="training"><?php echo $repeater_row['question']; ?></p><br />
            <?php } ?>
            <div class="inner"></div>
            <button class="next"></button>
            <div class="clear"></div>
        </div>
</div> 
```

这是jQuery：

```
<script type="text/javascript">
jQuery(function($) {
$(document).ready(function() {    

    // prepend a 'previous' button to all form-rows except the first
    $('<button>').addClass('previous').appendTo($('.inner').not(':first'));

    // hide all form-rows, but not the first one
    $('.form-row').not(':first').hide();

    // hide on last step
    $('button.next').last().hide();

    // add the submit button to the last form-row
    $('<input>').addClass('check').prop('type', 'submit').appendTo($('.form-row:last'));

    // handle the previous button, we need to use 'on' here as the
    // previous buttons don't exist in the dom at page load
    $('.form-row').on('click', 'button.previous', function(e) {
        e.preventDefault();
        $(this).parents('div.form-row').hide().prev('div.form-row').show();
    });

    $('button.next').click(function(e) {
        // prevent the next buttons from submitting the form
        e.preventDefault();
        // hide this form-row, and show the next one
        $(this).parents('div.form-row').hide().next('div.form-row').show();
    });    

});
});
</script> 
```

* * *

@Niels 目前有最接近的答案。这是我的 html/php 设置，使用来自@Niels 答案的 jquery，它抓住了问题，但没有检查到的答案。

```
<p class="training"><?php echo $repeater_row['question']; ?></p><br />
<p class="training-highlight">Please choose <span class="bold"><?php echo $repeater_row['required_answers']; ?></span> of the following answers:</p><br />

<div class="question" data-max-answers="<?php echo $repeater_row['required_answers']; ?>">
    <?php $rows = $repeater_row['answer_options'];
    foreach ($rows as $row){ ?>
    <?php $Question[$counter] = $_POST['answer'.$counter]; ?>
    <div style="display:table-row;">
        <div style="display:table-cell;">
            <input style="width: 20px;" type="checkbox" name="answer<?php echo $counter; ?>[]" value="<?php echo the_sub_field('answer'); ?>" />
        </div>
        <div style="display:table-cell;">
            <p>
                <?php echo $row['answer']; ?>
            </p>
        </div>              
    </div>
    <?php } ?>
</div>  
<div class="inner"></div>
<button class="next"></button>
<div class="clear"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T12:57:35.870

**什么是业务逻辑，嗯？**

* 获取页面上所需输入字段的所有值（在用户提交表单之前），例如：

```
var name = $('#name').val();
...
var city = $('#citySelectBox').val(); 
```

* 使用摘要部分下的这些变量进行显示。

* 在查看这些内容后，用户将提交表单或对已填写的字段进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:42:44.077

你为什么不得到复选框的变化，然后在发布选择的地方生成一个 LI 或中断列表？就像是：

```
$("input[type=checkbox]").on("change", function(){
    var html = "";
    // Get checked checkboxes
    $(".form-row").each(function(){
        var question = $(this).find(".training").text(),
            checkedlist = [];
        $(this).find("input:checked").each(function(){
            checkedlist.push($(this).val());
        });
        // Add question and answers to the summary, only if minimum of 1 checkbox checked
        if( checkedlist.length )
        {
            html += "Question: '" + question + "': " + checkedlist.join(", ") + "<br />";
        }
    });

    $(".inner").html(html);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:11:01.113

可能最简单/容易/没有麻烦的解决方案是在“接受”最后一个表单页面之后显示所有页面，但通过透明覆盖禁用行（不要禁用您的输入，因为这会使提交忽略禁用字段） .

现在我不能帮你写代码，但理论上这就是你需要的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:51:01.917

你可能想要这样的东西。不要让它太难:)

[JSfiddle](http://jsfiddle.net/Allendar/njyzq/)

[JSfiddle（有一个问题的例子）](http://jsfiddle.net/Allendar/njyzq/2/)

**HTML**

```
<div class="page1">1<br /><button>Next</button></div>
<div class="page2">2<br /><button>Next</button></div>
<div class="page3">3<br /><button>Next</button></div>
<div class="page4">4<br /><button>Next</button></div>
<div class="page5">5<br /><button>Next</button></div>
<div class="page6">6 (end)</div> 
```

**CSS**

```
div[class^="page"] {
    display: none;
    margin: 20px auto;
    padding: 15px;
    width: 400px;
    height: 200px;
    box-sizing: border-box;
    background-color: orange;
    -moz-box-shadow:    3px 3px 5px 6px #ccc;
    -webkit-box-shadow: 3px 3px 5px 6px #ccc;
    box-shadow:         3px 3px 5px 6px #ccc;
} 
```

**JavaScript**

```
$(document).ready(function() {
    $('.page1').css('display', 'block');

    $('div[class^="page"] button').click(function(evt) {
        evt.preventDefault();

        // Figure out the current page
        var page_nr = $(this).parent().attr('class');
        page_nr = page_nr.replace('page', '') * 1;

        // Hide current page
        $(this).parent().animate(
            { opacity: 'hide', display: 'none' },
            750, function() {
                // Show next page
                $('.page' + (page_nr + 1)).animate({ opacity: 'show', display: 'block' }, 750);
            });
    });
}); 
```

如果您还想获得有关如何处理每页表格中的变量维护的建议，请留下评论并提供一些详细信息，我会更新答案。

单击转到下一页时，您可以轻松地处理每页的数据。如果某些数据无效，您甚至可以阻止显示下一页。

祝你好运！

# jquery - 淡出后淡入

> ID：15659794
> 
> 赞同：11
> 
> 时间：2013-03-27T13:16:19.787
> 
> 标签：jquery

我无法弄清楚为什么我的 div 在 FadeOut 完成后不会淡入。

这是我的HTML：

```
<div class="header-container">
    <header class="wrapper clearfix">
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="#tab1">Section 1</a>
            </li>
            <li>
                <a href="#tab2">Section 2</a>
            </li>
        </ul>
    </header>
</div>

<div class="main-container">
    <div class="main wrapper clearfix">

        <div class="tab-content">
                <div class="tab-pane active" id="tab1">
                    <p>I'm in Section 1.</p>
                </div>
                <div class="tab-pane" id="tab2">
                    <p>Howdy, I'm in Section 2.</p>
                </div>
        </div>

    </div> <!-- #main -->
</div> <!-- #main-container --> 
```

我的JS

```
jQuery(document).ready(function(){
    $('.nav-tabs a').click(function (e) {
      e.preventDefault();
      var href = $(this).attr('href'); // Select first tab
        $('.tab-pane').fadeOut(1000,function(){
            $(href).fadeIn(1000);
        });
    });

}); 
```

我的 CSS

```
.tab-pane {
    display: none;
} 
```

我做了一个jsfiddle：

[http://jsfiddle.net/JohnnyDevv/hKq2K/1/](http://jsfiddle.net/JohnnyDevv/hKq2K/1/)

我让它尽可能简单......在此先感谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-27T13:37:28.847

这将输出您期望的结果：

```
 $('.tab-pane').fadeOut(1000).promise().done(function(){
     $(href).fadeIn(1000);
 }); 
```

`.promise()`确保完成第`fadeOut()`一个，然后在完成时`.done()`执行。

### [演示小提琴](http://jsfiddle.net/hKq2K/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:30:15.813

您正在使用通用类名 .tab-pane 为似乎是问题的淡出设置动画尝试利用您拥有的“.active”类

试试这个js

```
$('.nav-tabs a').click(function (e) {
     e.preventDefault();
     var href = $(this).attr('href'); // Select first tab
     // select the active tab then remove the active class name then do the fade out
     $('.tab-pane.active').removeClass("active").fadeOut('slow',function(){
          $(href).addClass("active").fadeIn(1000);
     });
}); 
```

JS 小提琴：http: [//jsfiddle.net/hKq2K/2/](http://jsfiddle.net/hKq2K/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-15T22:28:15.760

利用用户的钩子：[Jai](https://stackoverflow.com/users/1059101/jai)

如果您希望它在选项卡内容已打开的情况下不起作用，请使用：

> **[。不是（）](http://api.jquery.com/not/)**

```
$('.nav-tabs a').click(function (e) {
      e.preventDefault();
      var href = $(this).attr('href'); // Select first tab
        $('.tab-pane').not(href).fadeOut(1000).promise().done(function(){
            $(href).fadeIn(1000);
        });
    }); 
```

[**演示 jsfiddle**](http://jsfiddle.net/hKq2K/35/)

对不起，我的英语，我来自另一个国家。=]

# java - 调整按钮图标的大小

> ID：15659800
> 
> 赞同：0
> 
> 时间：2013-03-27T13:16:26.597
> 
> 标签：java, swing, icons, jbutton

我的 JButton 都可以调整大小（当我调整 JFrame 的大小时，JButton 会调整到正确的大小），但是我遇到了我为这些 JButton 设置的图标没有调整大小的问题。它们保持与我初始化它们时相同的高度和宽度。有没有办法使 JButton 的图标随 JButton 的大小缩放？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:34:28.623

接口的实现[`Icon`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Icon.html)代表“一个*固定大小*的小图片，通常用于装饰组件” ^。持有图标的组件通常会根据图标的尺寸和相对位置调整其首选大小。如果容器的布局忽略了组件的首选大小，则使用容器调整大小的按钮会这样做，例如`GridLayout`. 相反，请考虑以`JComponent`缩放到当前大小的方式呈现其内容的 a。示例包括[`JDigit`](https://stackoverflow.com/a/4151403/230513)和[`LayoutTest`](https://stackoverflow.com/a/8282330/230513)。

^(* 强调添加)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:22:21.457

我想以下内容会起作用，通过简单的谷歌搜索找到......

```
 Image img = icon.getImage() ;  
 Image newimg = img.getScaledInstance( NEW_WIDTH, NEW_HEIGHT,  java.awt.Image.SCALE_SMOOTH ) ;  
 icon = new ImageIcon( newimg ); 
```

请参阅此处：[自动调整 JButton 图标的大小](https://stackoverflow.com/questions/8234726/auto-resizing-jbutton-icon)并[调整 JButton 中的 ImageIcon 的大小](https://stackoverflow.com/questions/2856480/resizing-a-imageicon-in-a-jbutton)

# ssas - 分解一个维度

> ID：15659802
> 
> 赞同：1
> 
> 时间：2013-03-27T13:16:40.183
> 
> 标签：ssas, dimensions, cube

我们有一个维度。Dimension 代表完整的代码集合（假设是 10 000 个代码）。

出于查询目的，假设我们需要 500 个代码用于维度中的特定 KPI。仅选择我们需要过滤的代码将需要很长时间。

我们决定创建一种“规则表”，其中仅包含特定 KPI 所需的代码（假设从维度中选择了 500 个代码，并在规则表和维度之间的多维数据集中创建关系） . 因此，我们应该能够将该表作为过滤器。但它并不完全奏效。

关系：

维度：primary_key 和其余列（包括用于 KPI 的“代码”）

Fact_Table：维度的primary_key的foreign_key。

Rule_Table：维度的primary_key和'Code'作为列的foreign_key。

首先这可以工作吗？接着..

这将是一个更好的选择。每个 KPI 代码（规则表）的单独视图或单独表？

还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:50:40.750

我会用自己的键设计一个 KPI 维度，粒度是每个 KPI 一行。然后我会设计一个“规则桥”表，其中包含现有维度和 KPI 维度的外键。

# javascript - 如何将所选单选按钮的文本存储在 localStorage 中？

> ID：15659803
> 
> 赞同：0
> 
> 时间：2013-03-27T13:16:41.047
> 
> 标签：javascript, jquery, html

谁能帮助我如何在localStorage中设置单选按钮选定的文本？这是我的代码，但我每次都得到未定义的值：

```
<label for="gender">GENDER:  
<input type="radio" id="radiobtn1" name="gender" value="0"/>  
<label for="radiobtn1">MALE</label>  
<input type="radio" id="radiobtn1" name="gender" value="1"/>
<label for="radiobtn1">FEMALE</label>  
</label> 
<br> 
```

jQuery代码；尝试编写这样的代码时，我得到了选定的值：

```
var tempgender = $("input:checked + label").text(); 
console.log("gender selcte value:" + tempgender); 
```

但是，当尝试通过编写此代码将选定的值保存在本地存储中时，会得到“未定义的值”。

```
window.localStorage.setItem("tempgender",$("input:checked + label").text());` 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:19:33.263

代码是正确的，但我认为您的浏览器不支持 localstorage，请在使用 localstorage 之前执行

```
if(typeof(Storage)!=="undefined")
{
  alert("storage is supported and you can store data in it");
}
else
{
 alert("Get new version of browser or use browser which support storage");
} 
```

有关更多详细信息，您可以查看：[**使用 HTML5 Web Storage 在本地存储数据**](http://pranayamr.blogspot.in/2013/03/store-data-locally-with-html5-web.html)

# java - 创建 SQLite 数据库时出错：“android.database.sqlite.SQLiteException: near(9598)”？

> ID：15659804
> 
> 赞同：2
> 
> 时间：2013-03-27T13:16:44.997
> 
> 标签：java, android, sqlite

我正在尝试在 android 中创建一个 SQLite 数据库并收到此错误

```
"android.database.sqlite.SQLiteException: near(9598)." 
```

在这条线上：

```
db.execSQL("CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT)"); 
```

这里出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:23:12.677

该表是否已经存在？而是使用...

```
CREATE TABLE IF NOT EXISTS ... 
```

并添加一个`;`：

```
... + KEY_PH_NO + " TEXT);"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:28:19.673

尝试保持 KEY_ID 是

```
private static final String KEY_ID = "_id"; 
```

希望这可以帮助你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:34:55.227

尝试您的创建语句（[SQLFIDDLE](http://sqlfiddle.com/#!7/7670d)）显示它实际上没问题，并且由于没有抛出[SQLiteException 的子类中](http://developer.android.com/reference/android/database/sqlite/SQLiteException.html)定义的异常，让我在构建语句期间认为它的某些东西，如文档所述：

> **SQLite异常**
> 
> 一个 SQLite 异常，表示 SQL**解析** 或**执行**出错。

所以我会尝试将这两个步骤分开，首先在字符串中构建语句（包括输出以确保它的外观）然后尝试执行它。

# joomla - Joomla 没有加载所有页面

> ID：15659806
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:16:50.237
> 
> 标签：joomla

嗨，我有一个问题，我不知道为什么，但使用 chrome 访问网站（ffox 似乎工作正常[有时也不完美]）它不会加载所有或任何图片（图片使用 capty） 示例：[http://www.artzone。 lv/joomla/arhitektura/musu-projekti/2013-gads](http://www.artzone.lv/joomla/arhitektura/musu-projekti/2013-gads) 但是当按两次年份示例 2013 时，它会快速加载并且一切正常那么我该怎么做才能解决这个问题？这是紧急客户正在等待站点完成..比你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:44:43.883

图像加载正常。你的问题是javascript。

您的`.capty-wrapper`div 正在使用 javascript 调整大小以达到与图像相同的高度。但是您的 javascript 不会等待图像。如果您重新加载页面，图像会在您的缓存中，这就是您的浏览器可以足够快地呈现它们的原因。

所以你可以做以下事情：

1) 优化您的 javascript 以等待图像。

2）优化你的 javascript 以不改变高度（我看不出你为什么需要它）。

3) 为图像设置宽度和高度属性，这样浏览器甚至在图像加载之前就知道大小。

# wpf - 选择单选按钮时不会禁用组合框

> ID：15659808
> 
> 赞同：0
> 
> 时间：2013-03-27T13:17:03.567
> 
> 标签：wpf, binding, combobox, radio-button

我在一个例子中试过[这个](https://stackoverflow.com/questions/3681835/wpf-how-should-i-auto-grey-out-a-textbox-when-its-associated-radiobutton-is-n)，它似乎工作正常。然后我将它应用到我们正在进行的主要项目中，但它失败了。这是相关的代码片段：

```
<ComboBox Name="Combo" IsSynchronizedWithCurrentItem="True" 
ItemsSource="{Binding Tables}" SelectedItem="{Binding TableName, Mode=TwoWay}" 
Style="{StaticResource ComboBoxStyle}" Grid.Row="1" Height="30" Width="180" 
SelectionChanged="Combo_SelectionChanged" IsEnabled="{Binding IsChecked, ElementName=rdBtnList}" Margin="6,20,6,0" Grid.RowSpan="2" /> 
```

以及控制它的单选按钮：

```
<RadioButton Content="By List" Height="16" IsChecked="{Binding Path=ListSelect, Mode=TwoWay}" 
HorizontalAlignment="Right" Margin="0,6,24,0"  Name="rdBtnList" VerticalAlignment="Top" 
Background="DodgerBlue" FontSize="13" FontWeight="Bold" Grid.RowSpan="2" /> 
```

有没有人看到任何看起来不正确的东西（关于 IsEnabled 的情况）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:04:30.673

目前，在选择“广播”按钮时，启用了代码的编写方式。If you want the opposite to happen, when the radio button is selected the combo box should be disabled, you need a converter to make the boolean value the opposite.

```
public class OppositeBoolConverter : IValueConverter {

        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            return !System.Convert.ToBoolean(value);
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture) {
            return value;
        }
    }
} 
```

现在，添加一个命名空间引用并将转换器添加到组合框的绑定中：

```
xmlns:local="clr-namespace:NAMESPACE"

<local:OppositeBoolConverter x:Key="cnt" />

IsEnabled="{Binding IsChecked, Converter={StaticResource cnt}, ElementName=rdBtnList}" 
```

# javascript - JavaScript 中的 'a'['toUpperCase']() 如何以及为什么工作？

> ID：15659809
> 
> 赞同：209
> 
> 时间：2013-03-27T13:17:08.287
> 
> 标签：javascript, function

JavaScript 一直让我感到惊讶，这是另一个例子。我刚刚遇到了一些我一开始不理解的代码。所以我调试了它并得出了这个发现：

```
alert('a'['toUpperCase']());  //alerts 'A' 
```

现在，如果将其定义为字符串类型的成员，这一定很明显`toUpperCase()`，但最初对我来说没有意义。

反正，

*   这是因为`toUpperCase`是“a”的成员吗？还是在幕后发生了其他事情？
*   我正在阅读的[代码](http://danwebb.net/2006/11/3/from-the-archives-cleaner-callbacks-with-partial-application)具有以下功能：

    ```
    function callMethod(method) {
        return function (obj) {
            return obj[method](); //**how can I be sure method will always be a member of obj**
        }
    }

    var caps2 = map(['a', 'b', 'c'], callMethod('toUpperCase')); // ['A','B','C'] 
    // ignoring details of map() function which essentially calls methods on every 
    // element of the array and forms another array of result and returns it 
    ```

    **在任何**对象上调用**任何**方法都是一种通用函数。但这是否意味着指定的方法已经是指定对象的隐式成员？

 **我确信我对 JavaScript 函数的基本概念缺乏一些认真的理解。请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2013-03-27T13:22:49.807

把它分解。

*   `.toUpperCase()`是一种方法`String.prototype`
*   `'a'`是一个原始值，但被转换成它的*对象表示*
*   我们有两种可能的符号来访问对象属性/方法，点符号和括号符号

所以

```
'a'['toUpperCase']; 
```

是通过对属性的*括号表示法*`toUpperCase`访问，从`String.prototype`. 由于这个属性引用了一个*方法*，我们可以通过附加来调用它`()`

```
'a'['toUpperCase'](); 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-03-27T13:20:16.880

`foo.bar`并且`foo['bar']`相等，因此您发布的代码与

```
alert('a'.toUpperCase()) 
```

使用时`foo[bar]`（注意没有引号），您不使用文字名称`bar`，而是使用变量`bar`包含的任何值。因此，使用`foo[]`符号而不是`foo.`允许您使用动态属性名称。

* * *

让我们看一下`callMethod`：

首先，它返回一个以`obj`参数为参数的函数。执行该函数时，它将调用`method`该对象。所以给定的方法只需要存在于`obj`它自己或它的原型链上的某个地方。

如果`toUpperCase`该方法来自`String.prototype.toUpperCase`- 为每个存在的单个字符串拥有该方法的单独副本将是相当愚蠢的。

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-03-27T13:21:45.977

`.propertyName`您可以使用符号或符号访问任何对象的成员`["propertyName"]`。这就是 JavaScript 语言的特点。要确保该成员在对象中，只需检查它是否已定义：

```
function callMethod(method) {
    return function (obj) {
        if (typeof(obj[method]) == 'function') //in that case, check if it is a function
           return obj[method](); //and then invoke it
    }
} 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-03-27T13:30:06.640

基本上 javascript 将所有内容都视为对象，或者更确切地说，每个对象都可以视为字典/关联数组。并且函数/方法以完全相同的方式为对象定义 - 作为此关联数组中的条目。

因此，本质上，您正在引用/调用（注意 ' ***()*** '）'a' 对象（在本例中为字符串类型）的 'toUpperCase' 属性。

这是我头顶的一些代码：

```
function myObject(){
    this.msg = "hey there! ;-)";
    this.woop = function(){
        alert(this.msg); //do whatever with member data
    }
}

var obj = new myObject();
alert( obj.msg );
alert( obj['msg'] );
obj['woop'](); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-03-27T13:21:31.133

`anyObject['anyPropertyName']`与没有问题字符`anyObject.anyPropertyName`时相同。`anyPropertyName`

请参阅MDN 中的[使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)。

该`toUpperCase`方法附加到 String 类型。当您在原始值上调用函数时，here `'a'`，它会自动提升为对象，这里是[String](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)：

> 在原始字符串上调用方法或发生属性查找的上下文中，JavaScript 将自动包装字符串原始并调用方法或执行属性查找。

您可以通过 logging 看到该功能是否存在`String.prototype.toUpperCase`。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-03-27T16:03:56.793

所以在 Javascript 中，`objects`是`objects`. 那就是他们具有这种性质`{}`。可以使用以下任一设置对象属性：`a.greeting = 'hello';`或`a['greeting'] = 'hello';`。两种方式都有效。

检索工作相同。`a.greeting`（不带引号）是`'hello'`，`a['greeting']`是`'hello'`。例外：如果属性是数字，则只有括号方法有效。点方法没有。

`'a'`具有属性的对象也是如此`'toUpperCase'`，它实际上是一个函数。您可以检索该函数并随后以任何一种方式调用它：`'a'.toUpperCase()`或`'a'['toUpperCase']()`.

但是 imo 编写 map 函数的更好方法是

`var caps = ['a','b','c'].map( function(char) { return char.toUpperCase(); } )`

Who need the `callMethod`function then?

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-03-27T13:23:19.100

每个 JavaScript 对象都是一个哈希表，因此您可以通过指定一个键来访问它的成员。例如，如果一个变量是一个字符串，那么它应该有 toUpperCase 函数。所以，你可以通过

```
var str = "a"
str['toUpperCase'](). // you get the method by its name as a key and invoke it. 
```

所以，通过内联 str，你可以有以下

```
"a"["toUpperCase"]() 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-03-27T13:24:55.260

toUpperCase 是一个标准的 javascript 方法：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toUpperCase](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toUpperCase)

它工作的原因`'a'['toUpperCase']()`是 toUpperCase 函数是字符串对象的一个​​属性`'a'`。`object[property]`您可以使用或引用对象的属性`object.property`。语法 'a''toUpperCase' 表示您正在引用 'a' 字符串对象的 'toUppercase' 属性，然后调用它 ()。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-03-28T10:07:27.377

javascript 中的几乎所有内容都可以视为对象。在您的情况下，字母表本身充当字符串对象，`toUpperCase`可以作为其方法调用。方括号只是访问对象属性的另一种方式，因为它是一种方法，因此在 forms旁边需要`toUpperCase`simplebracket 。`()``['toUpperCase']``['toUpperCase']()`

`'a'['toUpperCase']()`相当于`'a'.toUpperCase()`

```
'a'['toUpperCase']() // returns A
'a'.toUpperCase() // returns A 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-03-27T21:34:10.557

> 但这是否意味着指定的方法已经是指定对象的隐式成员？

不，有人可以传入一个对象

1.  没有名为 的属性`toUpperCase`；或者
2.  有一个名为`toUpperCase`不是函数的属性

在第一种情况下，会抛出错误，因为访问不存在的属性会返回`undefined`，并且我们不能`undefined`作为函数调用。

在第二种情况下，将抛出错误，因为我们不能将非函数作为函数调用。

请记住，JavaScript 是一种类型非常松散的语言。除非必须这样做，否则很少或根本不会进行类型检查。您显示的代码在某些情况下有效，因为在这些情况下，传递的对象有一个名为 的属性`toUpperCase`，即一个函数。

可以说，不能保证参数具有正确类型的属性这一事实`obj`根本不会困扰 JavaScript。它采取“观望”的态度，直到运行时出现实际问题才抛出错误。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-04-05T13:50:42.037

这里要注意的重要一点是，由于 Javascript 是一种[动态](https://en.wikipedia.org/wiki/Dynamic_programming_language)语言，所以每个对象本质上只是一个美化的**哈希映射**（[除了少数例外](http://www.devthought.com/2012/01/18/an-object-is-not-a-hash/)）。Javascript 对象中的所有内容都可以通过两种方式访问​​——括号表示法和点表示法。

我将快速回顾回答您问题第一部分的两个符号，然后我将进入第二部分。

## 括号符号

这种模式更类似于在其他编程语言中访问哈希图和数组。您可以使用此语法访问*任何*组件（数据（包括其他对象）或函数）。

这正是您在示例中所做的。你有`'a'`，它是一个字符串（而**不是**字符文字，就像它在诸如 C++ 之类的语言中一样）。

使用括号表示法，您可以访问其`toUpperCase`方法。但是访问它仍然不够；例如，在 Javascript 中简单地键入`alert`不会调用该方法。这只是一个简单的陈述。为了调用该函数，您需要添加括号：`alert()`显示一个包含 的简单对话框`undefined`，因为它没有接收任何参数。我们现在可以使用这些知识来破译您的代码，它变成：

```
alert('a'.toUpperCase()); 
```

这更具可读性。

实际上，更好地理解这一点的一个好方法是执行以下 Javascript：

```
alert(alert) 
```

这`alert`通过将函数对象传递给它来调用，同样`alert`，也不执行第二个警报。显示的内容（至少在 Chrome 26 中）如下：

```
function alert() { [native code] } 
```

来电：

```
alert(alert()) 
```

显示两个连续的消息框，其中包含`undefined`. 这很容易解释：内部`alert()`首先执行，显示`undefined`（因为它没有任何参数）并且什么都不返回。外部警报接收内部警报的返回值 - 什么都没有，并且还显示`undefined`在消息框中。

[尝试 jsFiddle 上的所有案例！](http://jsfiddle.net/7k8Y9/)

## 点符号

这是更标准的方法，它允许使用点 ( `.`) 运算符访问对象的成员。这是您的代码在点表示法中的样子：

```
alert('a'.toUpperCase()) 
```

更具可读性。那么什么时候应该使用点符号，什么时候应该使用括号符号呢？

## 比较

这两种方法的主要区别在于语义。还有一些其他细节，但我会在稍后讨论。最重要的是您实际想要做的事情 - 经验法则是您使用**点表示法表示**对象具有的成熟字段和方法，而**括号表示法表示**您实际将对象用作哈希映射.

在您的示例中可以显示为什么此规则如此重要的一个很好的示例 - 因为代码在点表示法更明智的地方使用括号表示法，它使代码更难阅读。这是一件坏事，[因为代码的读取次数比编写次数多得多](http://blog.brendel.com/2009/06/read-optimized-source-code.html)。

在某些情况下，即使使用*点表示法*更明智，您也必须使用方*括号表示法：*

 **   如果对象的成员的名称包含一个或多个空格或任何其他特殊字符，则不能使用点表示法：`foo.some method()`不起作用，但`foo["some method"]()`可以；

*   如果你需要动态访问一个对象的成员，你也会被括号符号卡住；

例子：

```
for(var i = 0; i < 10; ++i) {
   foo["method" + i](); 
 } 
```

* * *

最重要的是，在将对象用作哈希映射 () 时应使用括号语法，在使用`foods["burger"].eat()`“实际”字段和方法时应使用点语法 ( `enemy.kill()`)。由于 Javascript 是一种动态语言，对象的“实际”字段和方法与存储在其中的“其他”数据之间的界限会变得非常模糊。但只要你不以令人困惑的方式混合它们，你应该没问题。

* * *

现在，继续你的问题（最后！：P）。

> 我怎么能确定方法将永远是 obj 的成员

你不能。试试看。尝试调用`derp`字符串。您将在以下行中收到错误：

```
Uncaught TypeError: Object a has no method 'derp' 
```

> 在任何对象上调用任何方法都是一种通用函数。但这是否意味着指定的方法已经是指定对象的隐式成员？

是的，在你的情况下，它必须是。否则，您最终会遇到我上面提到的错误。但是，您不必**在**函数`return obj[method]();`中使用。`callMethod()`您可以添加自己的功能，然后由地图功能使用。这是一个硬编码的方法，可以将所有字母变成大写字母：

```
function makeCap()
{
    return function(obj) {
        return obj.toUpperCase();
    }
}

var caps2 = map(['a', 'b', 'c'], makeCap()); // ['A','B','C'] 
console.log(caps2) 
```

您链接到的教程中的代码使用[部分函数](http://www.drdobbs.com/open-source/currying-and-partial-functions-in-javasc/231001821)。它们本身就是一个棘手的概念。阅读更多关于该主题的内容应该有助于使事情变得比我所能做的更清楚。

* * *

注意：这是问题中代码使用的地图功能的代码，[来源here](http://danwebb.net/2006/11/3/from-the-archives-cleaner-callbacks-with-partial-application)。

```
function map(arr, iterator) {
  var narr = [];
  for (var i = 0; i < arr.length; i++) narr.push(iterator(arr[i], i));
  return narr;
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-04-02T20:35:08.697

如果你问它实际上是如何工作的，我就是这么读的。好的，这是一个简单的数学函数。要理解它，您需要查看 ascii 表。它为每个字母分配一个数值。为了掩饰它，竞争者只需使用逻辑语句来掩饰，例如 If(ChcrValue > 80 && charValue < 106) //这是一组小写字母 then charValue = charValue - 38; // 下集和上集之间的距离

就这么简单，我实际上并没有费心查找正确的值，但这基本上是将所有小写字母转换为大写值。***

# android - （com.googlecode.javacv.cpp.opencv_core.IplImage）中的 IplImage 到 org.opencv.core.Mat 中的 Mat

> ID：15659811
> 
> 赞同：0
> 
> 时间：2013-03-27T13:17:21.470
> 
> 标签：android, javacv

我在 android 中使用 javacv，但在 android 中 Mat 中的框架，我如何将其转换为 IplImage
我尝试转换，就像我在 c++ Mat image1 hereIplImage* image2=cvCloneImage(&(IplImage)image1) 中所做的那样

它没有用，请帮助PLZ:(

因为我想在我的android应用程序中重用[http://codersadda.com/javacv-color-based-thresholding-in-image-using-opencv/menu-id-40](http://codersadda.com/javacv-color-based-thresholding-in-image-using-opencv/menu-id-40)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:49:54.447

例如，您只创建一个`IplImage`类型，并且鉴于这是您的对象，请使用：`img``matImage``cv::Mat`

```
IplImage img = output.operator IplImage(); 
```

# ruby-on-rails - Rails (rake) 默认 ID 字段

> ID：15659814
> 
> 赞同：-4
> 
> 时间：2013-03-27T13:17:28.963
> 
> 标签：ruby-on-rails, ruby, postgresql, rake, rails-migrations

当使用 rake 在我的 pgslq db 上创建表时，rails 总是创建一个“id”字段作为主键。

我的问题是我需要具有自定义名称的 id 字段。如何仅使用我想要的字段指定数据库字段，并指定主键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:23:00.283

您可以`create_table`在迁移中指定将其名称传递给的主键：

```
create_table :my_table, :primary_key => :custom_id do |t|
  #...
end 
```

# java - Listener for a Stage minimizing, maximizing, etc

> ID：15659817
> 
> 赞同：12
> 
> 时间：2013-03-27T13:17:40.363
> 
> 标签：java, window, javafx-2

I am just starting my second JavaFX projects, and I need to know when a `Stage` is being maximized. In Swing, this is fairly simple and can be accomplished by using a WindowListener/Event. However, after searching through JavaFX's Javadoc, I can't seem to find any way of listening to the state of a `Stage`.

Is there any way to do this?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-28T12:05:22.913

要了解是否`Stage`已最小化，您可以收听`iconified`属性：

```
stage.iconifiedProperty().addListener(new ChangeListener<Boolean>() {

    @Override
    public void changed(ObservableValue<? extends Boolean> ov, Boolean t, Boolean t1) {
        System.out.println("minimized:" + t1.booleanValue());
    }
}); 
```

`maximized`在即将发布的 8.0 版本中添加了Correspondent属性：

```
stage.maximizedProperty().addListener(new ChangeListener<Boolean>() {

    @Override
    public void changed(ObservableValue<? extends Boolean> ov, Boolean t, Boolean t1) {
        System.out.println("maximized:" + t1.booleanValue());
    }
}); 
```

您可以在此处下载 JDK 8（包括 FX8）的早期访问版本：[http ://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html](http://www.oracle.com/technetwork/java/javase/downloads/ea-jsp-142245.html)

# apache-flex - flex how to reorder a list without refreshing its content?

> ID：15659819
> 
> 赞同：0
> 
> 时间：2013-03-27T13:17:55.277
> 
> 标签：apache-flex, flex4, flex4.5, flex4.6

Here is a screenshot of my application. This is a `<s:list>` component with an itemRenderer

When pressing up adn down buttons, the item should go down, up without refreshing the whole list (this is not drag&drop event, but simple click event)

My goal would be also to add a slide animation when an item goes down/up.

Any clues on how to achieve that effect ?

![enter image description here](../Images/c1c915ded4c3ba00bd8965ae7e859563.png)

# db2 - DB2 Parameter binding for literal comparisons

> ID：15659820
> 
> 赞同：1
> 
> 时间：2013-03-27T13:18:03.853
> 
> 标签：db2, odbc, drivers, sqlparameter

I've got SQL for DB2 of the following abbreviated format:

```
Select ...
From ...
Where ... ((COL1 IS NULL) And ('' = ?)) ...
Order By ... 
```

The rough purpose of this SQL is to return Null records if the input against COL1 is blank.

However, if I try to bind 'RED' to the placeholder, I get a CLI0109E error indicating 'string data right truncation.' I believe what is happening is that DB2 has decided that the '' literal in the SQL is a column of length 0, and so trying to compare a bound parameter of length 3 (in the case of 'RED') causes the truncation error. This would make sense.

If I change the SQL to: `((COL1 IS NULL) And ('{10 spaces}' = ?))`, it works fine.

If I change the SQL to: `((COL1 IS NULL) And (CAST('' AS VARCHAR(32767)) = ?))`, it works fine.

Is there a driver setting, or an SQLBindParameters setting that I'm missing that's causing DB2 to interpret the '' as a zero-length column?

I run the same SQL through Oracle and SQLServer and they work fine, which tells me they interpret '' as something different, and maybe by default treat all literals in the SQL as VARCHAR(32767) or something.

Thanks for any help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T19:31:34.950

这个问题的答案似乎是 DB2 在确定字面量的数据类型和大小时的工作方式。

根据我的发现，这里要理解的概念似乎是隐式和显式的 CAST。由于没有为空字符串文字提供显式 CAST，并且比较谓词的右侧没有更多可用信息（只有参数占位符存在并且它没有提供明确的大小信息），DB2 将隐式转换为文字的大小，在这种情况下是 CHAR(1)（或者可能是 VARCHAR(1)，我对此并不完全确定）。

因此，这不是 CLI 驱动程序问题或怪癖，也不是 SQLBindParameters 问题。CAST('' as VARCHAR(nn)) 的显式 CAST 似乎是避免 CLI0109E 错误的正确解决方案。

就其价值而言，严格根据我的经验，当在这些平台上运行相同的 SQL 时，Oracle 和 SQLServer 的行为似乎与 DB2 不同。它们隐含的 CAST，没有任何可用的大小信息可供绘制，似乎是 VARCHAR(large)。但是显式 CAST 也同样适用于它们。

# git - heroku git clone gives fatal: index-pack failed

> ID：15659823
> 
> 赞同：3
> 
> 时间：2013-03-27T13:18:14.630
> 
> 标签：git, heroku

I got a repo on heroku and I can push and clone it from my pc in office (win os).

But when I got home I tried to clone it using the same command I did in office:

```
git clone git@heroku.com:xxxxx.git 
```

and it gives me:

```
Cloning into 'xxxxx'...
remote: Counting objects: 110, done.
remote: Compressing objects: 100% (109/109), done.
Received disconnect from xx.xx.xx.xx: 10: user closed connection
fatal: The remote end hung up unexpectedly
fatal: early EOF
fatal: index-pack failed 
```

my PC at home is a macbook but I can create a repo and push it to heroku successfully ~

BTW the repo I failed to clone is only 13MB so I don't think it's a matter of the size ~~~

It's driving me crazy and hope someone can help me, thanks :|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:31:53.033

heroku git repos 并非设计为您的应用程序的存储点。它们*仅*用于部署，不要依赖它们进行存储......永远。去获取一个 github.com 帐户并将您的应用程序推送到那里进行存储。

# javascript - MongoDB 2.4 MapReduce Refactor

> ID：15659824
> 
> 赞同：2
> 
> 时间：2013-03-27T13:18:20.300
> 
> 标签：javascript, mongodb

I recently upgraded to MongoDB 2.4 and as referenced in the release notes, am having an issue with a map function that makes use of db. The release notes recommend refactoring, but I am unclear as to what route I need to take.

The now non-working piece of the function is as follows:

```
function map() {
  var student = db.student.findOne(this.student_id);
  var school = db.school.findOne(this.school_id);
  ...
  emit({
    bcg_id: student.bcg_id,
  ... 
```

I am unclear on how to pass the document from the 'student' collection to the 'student' variable now that db is deprecated.

Any recommendations?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:42:13.020

您不能再在 javascript 函数中运行查询。

请参阅：[http ://docs.mongodb.org/manual/release-notes/2.4/#additional-limitations-for-map-reduce-and-where-operations](http://docs.mongodb.org/manual/release-notes/2.4/#additional-limitations-for-map-reduce-and-where-operations)

您可以将数据传递到范围内，例如：

```
res = t.mapReduce( mapper , reducer , { scope : { xx : 1 } } ); 
```

但至于重构有多大——这取决于原始 map reduce 函数做了什么。

您可能希望将所需的所有数据整理到一个新集合中，然后对其运行 map reduce。

# iphone - Technology used to send information from iPhone to server

> ID：15659825
> 
> 赞同：-1
> 
> 时间：2013-03-27T13:18:23.150
> 
> 标签：iphone, ios, django, ios4

1) I am building a software same as Boojam incident reporter.In that the incidents are recorded from an iphone and send it to the server.

2) After capturing all required information the reporter is suppose to click the send button in the iphone.

3) The data should be send to the database server in the school or organisation.

4) What I required is ,to know what are the technology available to transfer the data from iPhone to server.

Scope is simply I have to send the collected data in an Apple iphone to a server.I use Python language for logic.

Want to know what are the current technology used to perform the same.

Can any one list me technology about this link.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:35:07.230

您需要的唯一技术是`JSON`发送/接收收集的数据，而在 django 方面，您需要实现一个 API 以允许您的 django 应用程序能够发送/接收这样的请求。您可以使用[`django-piston`](https://bitbucket.org/jespern/django-piston/wiki/Home)或[`django-tastypie`](https://github.com/toastdriven/django-tastypie)创建 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T13:26:11.987

您需要在服务器上创建 Web 服务。iphone会将数据“上传”到这个网络服务。

在 Python 中有很多方法可以做到这一点，这取决于您是否使用[Web 开发框架](http://wiki.python.org/moin/WebFrameworks)。你真的应该使用一个。用于此类任务的流行的是 django 和 flask。

在 iOS 端，您需要使用[`NSURLRequest`](https://stackoverflow.com/questions/10300353/nsurlrequest-post-data-and-read-the-posted-page)将数据发布到服务器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T13:27:32.687

通常从您的应用程序构建您需要的内容，序列化为 json 并通过您的 api 传递它。这是我的一个示例，但它与服务器对话并返回一个简单的句子。这只是为了说明其中一些是如何在 xcode 中完成的。（这是用于询问和接收数据，但您可以从中得到想法）

下面是 .h 和 .m 文件。

```
//Step 1, add NSURLConnectionDataDelegate
        //.h
    @interface ViewController : UIViewController<NSURLConnectionDataDelegate>
    @property (strong, nonatomic) IBOutlet UILabel *answer;
    @end

#import "ViewController.h"

@interface ViewController ()
{//step 2 local data objects
    NSMutableData*webData;
    NSURLConnection*connection;

}
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Step 8 call (send) the request
    [self getData];
    // Do any additional setup after loading the view, typically from a nib.

    //NSDictionary*dict=[NSJSONSerialization se]
}
//Step 3 implement this method 
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [webData setLength:0];
}

//Step 4 append the connection data to your object
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [webData appendData:data];
}

//Step 5 Process results from request (called automatically when the data arrives)
-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
    //Main parse

    //Web data

    NSError*error;

    //Dictionary serialized (processed) using JSON (Way of encoding data from a web request)
    NSDictionary*data=[NSJSONSerialization JSONObjectWithData:webData options:0 error:&error];

    //If data is nil, then print error
    if (data==nil) {
        NSLog(@"%@",error);
    }

    //Print the data
    NSLog(@"%@",data);

    //Get the numerical result from the dictionary key name
    NSNumber*num=[data valueForKey:@"name"];

    //Convert number to string
    NSString*label=[num stringValue];

    //Set the label to this result
    _answer.text=label;

}
//Step 7, actually initialize the request
-(void)getData{
    //I will break this down as if it where a generic method
    //Connect to the index.php file via this URL

    //Localhost/tutorials is the XAMPP folder on your computer

    //index.php is the php file

    //getLabel(int number){}
    //?f=getLabel (calling this method in the php file)

    //number=900
    //&value=900 is the parameter
    NSURL*url=[NSURL URLWithString:@"http://localhost/tutorials/index.php?f=getLabel&value=900"];

    //In the php file it does number*number and returns the results

    //URL request
    NSURLRequest*request=[NSURLRequest requestWithURL:url];

    //Set the connection
    connection = [NSURLConnection connectionWithRequest:request delegate:self];

    if (connection) {
        webData=[[NSMutableData alloc]init];
    }

    //*****Results of this request are processed by step 5

}//Step 6, in case data connection fails
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    NSLog(@"fail");

}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

# asp.net - get last in LINQ list

> ID：15659828
> 
> 赞同：18
> 
> 时间：2013-03-27T13:18:27.497
> 
> 标签：asp.net, linq

```
Context db = new Context();
List<Invoice> invoice =
(from LocalInvoice in db.Invoices
where LocalInvoice.Site_Id == this.SiteIdentifier
select LocalInvoice).ToList(); 
```

Returns a list of records. I want to select the last in the list. I've tried `.ToList().LastOrDefault();` but the error im getting is cannot convert type 'invoice' to 'System.Collections.Generic.List.

Why is it saying this have I not declared invoice as a list `List<Invoice> invoice`

Any help much appreciated. Ta

* * *

**EDIT** Thanks for the reply everyone i've tried what you all have advised and each time im getting the error: The query operator 'LastOrDefault' is not supported.

**Also** I havent actually explained what I am trying to do overall which may be causing a problem. I have a table containing all the invoices, each with a seperate 'id'. However each record will have a SiteIdentifier column which is used multiple times for different invoices. So each Site may have multiple invoices.

Trying to get the most recent Invoice for the site. So say invoice

```
id SiteIdentifier 
73 25
74 25
75 25 
```

I was attempting to get all the records where the SiteIdentifier == this.SiteIdentifier(e.g.25), then get the most recent record which would have beeing invoice id 75.

Anyone have any ideas? Again thanks for all the help

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-27T13:20:54.830

LastOrDefault 将返回单个元素。您不应该在没有先应用过滤器的情况下调用 ToList，它会在您只需要一个时从数据库中检索所有行。

```
var invoice = db.Invoices.LastOrDefault(s => s.Site_Id == this.SiteIdentifier); 
```

如果要查询关系表，还必须应用排序。LastOrDefault 仅对内存中的集合有意义。看起来它在 EF 中不受支持，并且会引发异常。

最好的解决方案是反转排序并使用 FirstOrDefault 方法：

```
var invoice = db.Invoices.OrderByDescending(s => s.Id) 
                         .FirstOrDefault(s => s.Site_Id == this.SiteIdentifier); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T13:20:49.913

LastOrDefault 将返回 Invoice 的实例，而不是集合，因此请更改变量类型。

```
Invoice invoice =
   (from LocalInvoice in db.Invoices
    where LocalInvoice.Site_Id == this.SiteIdentifier
    select LocalInvoice).LastOrDefault(); 
```

或更清洁：

```
var invoice = db.Invoices.LastOrDefault(i => i.Site_Id == this.SiteIdentifier); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:20:58.633

[`LastOrDefault`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.lastordefault.aspx)将返回单个元素，而不是`List`. 这会起作用：

```
Invoice invoice =
    (from LocalInvoice in db.Invoices
     where LocalInvoice.Site_Id == this.SiteIdentifier
     select LocalInvoice)
    .LastOrDefault(); 
```

# vb.net - Load certain values from text file with StreamReader

> ID：15659829
> 
> 赞同：-2
> 
> 时间：2013-03-27T13:18:35.967
> 
> 标签：vb.net, streamreader

I'm a novice at Visual basic so I need a little help getting started on a project I'm working on. I open a text file containing Student names and grades using a `StreamReader` but I want to select certain values from the text file (e.g. their highest grade, averages and overall marks). Would I be best off creating an array to display these values or writing functions to retrieve the data I want? I'm at a bit of a loss and don't want to waste my time so any suggestions would be very welcome.

data is stored as a txt file as follows student name,grade1,grade2,grade3,grade4,overall mark.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:35:19.573

我将创建一个具有所需属性的类，然后创建一个列表（对象）。请参阅下面的示例。

```
Public Sub GetStudentData()
    Dim oStudents As New List(Of Student)
    Using r As IO.StreamReader = New IO.StreamReader("file.txt")
        ' Store contents in this String.
        Dim line As String

        ' Read first line.
        line = r.ReadLine
        oStudents.Add(New Student(line))
        Do While (line IsNot Nothing)
            ' Read in the next line.
            line = r.ReadLine
            oStudents.Add(New Student(line))
        Loop
    End Using
End Sub

Public Class Student
    Public Property StudentID As String
    Public Property FirstName As String
    Public Property LastName As String
    Public Property HighestGrade As String
    Public Property Averages As String
    Public Property OverAllMarks As String

    Public Sub New(line As String)
        _StudentID = line ' Get specific string from text line
        _FirstName = line ' Get specific string from text line
        _LastName = line ' Get specific string from text line
        _HighestGrade = line ' Get specific string from text line
        _Averages = line ' Get specific string from text line
        _OverAllMarks = line ' Get specific string from text line
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:31:57.083

Private Sub btnAverage_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 btnAverage.Click

```
 Using myreader As New Microsoft.VisualBasic.FileIO.TextFieldParser("c:\Users\documents\studentresults.txt")
        myreader.TextFieldType = FileIO.FieldType.Delimited
        myreader.SetDelimiters(",")
        Dim currentrow As String()
        While Not myreader.EndOfData
            Try
                currentrow = myreader.ReadFields()
                Dim average As Double
                currentrow.Skip(1).Skip(2).Average(Function(s) Convert.ToDouble(s))
                MsgBox("Average is " & currentrow(0))
                Convert.ToString(average)
            Catch ex As Microsoft.VisualBasic.FileIO.MalformedLineException
                MsgBox("line" & ex.Message &
                       "is not valid and will be skipped")
            End Try
        End While
    End Using 
```

这是我到目前为止的代码，所以任何建议都会很棒。

# c - does openmp allocate memory and free all after

> ID：15659832
> 
> 赞同：5
> 
> 时间：2013-03-27T13:18:43.633
> 
> 标签：c, memory-leaks, malloc, openmp, valgrind

Does openmp allocate memory and free all memory? Because I ran valgrind, and did free all my lists.. Everything that I malloc, did I free.

```
==11442== HEAP SUMMARY:
==11442==     in use at exit: 192 bytes in 1 blocks
==11442==   total heap usage: 2,001 allocs, 2,000 frees, 2,917,280 bytes allocated
==11442== 
==11442== LEAK SUMMARY:
==11442==    definitely lost: 0 bytes in 0 blocks
==11442==    indirectly lost: 0 bytes in 0 blocks
==11442==      possibly lost: 0 bytes in 0 blocks
==11442==    still reachable: 192 bytes in 1 blocks
==11442==         suppressed: 0 bytes in 0 blocks 
```

If not why can there still be a memory leak in one block?

This is my code:

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
/*check definition of _OPENMP*/
#ifdef _OPENMP
#include <omp.h>
#endif 

#define RMAX 10000000

/*Global variables*/
int arraySizeGlobal;
int numberOfthreads;
int *aux;

/*Functions*/
void sort(int *a);
void sort2(int *a, int lo, int hi);
void merge(int *a, int lo, int mid, int hi);
void Generate_list(int a[], int n);
void printlist(int *array);

int main(int argc, char* argv[])
{
numberOfthreads = strtol(argv[1], NULL, 10);
arraySizeGlobal = strtol(argv[2], NULL, 10);
////////////////////////////////
int *array;
array = malloc(arraySizeGlobal * sizeof(int));
Generate_list(array,arraySizeGlobal);

printf("=====================\n");
printf("////Starting list////\n");
printf("=====================\n");
printlist(array);

sort(array);

printf("=====================\n");
printf("/////Sorted list/////\n");
printf("=====================\n");
printlist(array);

free(array);

return 0;
}

void sort(int *a)
{
aux = malloc(arraySizeGlobal * sizeof(int)); // Allocate space just once.
//#pragma omp parallel num_threads(numberOfthreads)
//#pragma omp single nowait
sort2(a, 0, arraySizeGlobal - 1);
free(aux);
}
void sort2(int *a, int lo, int hi)
{   // Sort a[lo..hi].
if (hi <= lo) return;
int mid = lo + (hi - lo)/2;
    #pragma omp parallel sections num_threads(numberOfthreads)
    {
    #pragma omp section
    sort2(a, lo, mid); // Sort left half.
    #pragma omp section
    sort2(a, mid+1, hi); // Sort right half.
    }

merge(a, lo, mid, hi); // Merge
}
void merge(int *a, int lo, int mid, int hi)
{   // Merge a[lo..mid] with a[mid+1..hi].
int i = lo, j = mid+1;
int k;
#pragma omp parallel for num_threads(numberOfthreads)
for (k = lo; k <= hi; k++) // Copy a[lo..hi] to aux[lo..hi].
    aux[k] = a[k];
for (k = lo; k <= hi; k++) // Merge back to a[lo..hi].
    if (i > mid) a[k] = aux[j++];
    else if (j > hi ) a[k] = aux[i++];
    else if (aux[j] < aux[i]) a[k] = aux[j++];
    else a[k] = aux[i++];
}
void printlist(int *array)
{
int i;
for (i = 0; i < arraySizeGlobal; ++i)
{
    printf("%d ", array[i]);
}
printf("\n");
}
void Generate_list(int a[], int n) {
int i;
srandom(1);
for (i = 0; i < n; i++)
    a[i] = random() % RMAX;
}  /* Generate_list */ 
```

==================================================================================

This code: Came from Algorithms FOURTH EDITION, Robert Sedgewick | Kevin Wayne. It was a java implementation, which I change to a c implementation and paralyzed with openmp

==================================================================================

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T14:08:47.823

这在很大程度上取决于您的编译器和 openmp 库实现。

`gcc -fopenmp`我用版本 4.4.6 (GCC) 和1.0.0尝试了你的代码，`libgomp`我还得到了尚未释放的堆块。据我所知`libgomp`，不会在执行结束时杀死它产生的线程并使内核清理这样做。

```
==85122== HEAP SUMMARY:
==85122==     in use at exit: 2,072 bytes in 4 blocks
==85122==   total heap usage: 203 allocs, 199 frees, 289,816 bytes allocated
==85122== 
==85122== 288 bytes in 1 blocks are possibly lost in loss record 3 of 4
==85122==    at 0x4A05A28: calloc (vg_replace_malloc.c:467)
==85122==    by 0x3793A11792: _dl_allocate_tls (in /lib64/ld-2.12.so)
==85122==    by 0x379460701F: pthread_create@@GLIBC_2.2.5 (in /lib64/libpthread-2.12.so)
==85122==    by 0x4C15509: gomp_team_start (team.c:422)
==85122==    by 0x400BAA: sort2 (in /usr/users/ga002/lamzins/malloc_openmp)
==85122==    by 0x400B28: sort (in /usr/users/ga002/lamzins/malloc_openmp)
==85122==    by 0x400AAA: main (in /usr/users/ga002/lamzins/malloc_openmp)
==85122== 
==85122== LEAK SUMMARY:
==85122==    definitely lost: 0 bytes in 0 blocks
==85122==    indirectly lost: 0 bytes in 0 blocks
==85122==      possibly lost: 288 bytes in 1 blocks
==85122==    still reachable: 1,784 bytes in 3 blocks
==85122==         suppressed: 0 bytes in 0 blocks
==85122== Reachable blocks (those to which a pointer was found) are not shown.
==85122== To see them, rerun with: --leak-check=full --show-reachable=yes
==85122== 
==85122== For counts of detected and suppressed errors, rerun with: -v
==85122== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 6 from 6) 
```

当我使用`icc -openmp`版本 12.0.2 编译您的代码时，我释放了所有分配的内存。

```
==85218== HEAP SUMMARY:
==85218==     in use at exit: 0 bytes in 0 blocks
==85218==   total heap usage: 841 allocs, 841 frees, 4,364,204 bytes allocated
==85218== 
==85218== All heap blocks were freed -- no leaks are possible 
```

**编辑：** 您所描述的问题也是已知的，不被视为内存泄漏： http: [//gcc.1065356.n5.nabble.com/Bug-libgomp-36298-New-gomp-contains-small-memoryleak-td330804。 html](http://gcc.1065356.n5.nabble.com/Bug-libgomp-36298-New-gomp-contains-small-memoryleak-td330804.html)

# sql - How to store image in SQL Server database tables column

> ID：15659835
> 
> 赞同：41
> 
> 时间：2013-03-27T13:18:49.413
> 
> 标签：sql, sql-server, image, tsql

I Have a table named `FEMALE` in my database. It has `ID` as `Primary Key`, it has an `Image` column.

My Question is how do I store an image using a SQL Query?

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-27T13:27:22.553

试试这个，

```
insert into tableName (ImageColumn) 
SELECT BulkColumn 
FROM Openrowset( Bulk 'image..Path..here', Single_Blob) as img 
```

* * *

**插入**

![在此处输入图像描述](../Images/7c64f204a63ad89e19d61f40c77fe570.png)

**刷新表**

![在此处输入图像描述](../Images/e16e2cb86275a6d9ed692c5462c25a01.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-02T08:36:56.313

```
Insert Into FEMALE(ID, Image)
Select '1', BulkColumn 
from Openrowset (Bulk 'D:\thepathofimage.jpg', Single_Blob) as Image 
```

您还需要管理员权限才能运行查询。

# java - Difference between ListAdapter.getView and ListView.getChildAt

> ID：15659836
> 
> 赞同：1
> 
> 时间：2013-03-27T13:18:50.523
> 
> 标签：java, android

My app's UI has a ListView to show the timeline of tweets and setup an `OnItemLongClickListener` to show another view with several buttons ("Reply", "Retweet", "Favorite", etc.). inside my Adapter's `getView()` method.

**What I want**: In my test project, I want to test this feature by performing a long click on the first item in the timeline and then performing a click on one of the buttons.

The part of code looks like below:

```
timelineList.getChildAt(0).performLongClick();
favoriteBtn = (ToggleButton)timelineList.getAdapter().getView(0, null, timelineList).findViewById(cse.ust.twittermap.R.id.favorite);
favoriteBtn.performClick();
favoriteBtn.performClick();
timelineList.getChildAt(0).performLongClick(); 
```

This works but when I try to change the second line into:

```
timelineList.getChildAt(0).findViewById(cse.ust.twittermap.R.id.favorite); 
```

The test project throws a NullPointer exception, because `findViewById()` return *null*.

**My Question:** What is the difference between `ListAdapter#getView()` and `ListView#getChildAt()`?

It seems both of them can return a reference to an item view in the list, but clearly there should be some differences between them. I also want to figure out why the `getChildAt()` method in the second line fails in finding views by Ids.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:44:44.730

`getChildAt`不是 a 的特殊方法`ListView`。它是为每个`ViewGroup`（可以有孩子的视图）实现的。

创建`ListView`时，它没有子级。调用它的适配器的`getView`方法并不会改变这个事实，它不会添加任何孩子。

只有当您的 Activity 的内容被测量和布局时，它才会通过重复调用其适配器的方法并将返回的内容添加到它自己的子列表中来`ListView`开始创建子视图。只有在那之后，才能返回一些非空值。`getView``Views``ListView.getChildAt(x)`

该方法代表 ListView/GridView/etc`ListAdapter.getView`返回全新的`Views`（或仅返回回收的）。`View`您的代码不应该调用`ListAdapter.getView`自己（除非您进行单元测试）。

`ListView.getChildAt`返回一个已经创建的`View`（由`ListAdapter.getView`代表 较早创建的`ListView`）请注意，您`ListAdpater`可以定义许多列表项（由 返回的值`getCount`），但`ListView`托管适配器的子项永远不会超过在屏幕上任何给定时间可见的子项. 即您`ListAdapter`可以处理 1000 个列表项，但您的`ListView`孩子永远不会超过 6 个`Views`（当然，取决于屏幕的大小和列表视图项）。

# ios - 用于实现新闻提要和好友系统的 Facebook 集成

> ID：15659838
> 
> 赞同：0
> 
> 时间：2013-03-27T13:18:56.090
> 
> 标签：ios, facebook-graph-api

我的应用程序之一已经在应用程序商店中，我在其中实现了 facebook ios sdk 3.2，并且我正在使用帐户框架来启用 facebook 登录到应用程序。

现在我想实现 facebook 朋友系统，我想邀请我所有的朋友，也想显示与我的应用程序相关的朋友提要。

Facebook 提供的任何示例都在不同的平台上，例如 opengraph 和 Graph APi，还有一个我使用原生集成找到的示例。

我在这里的查询是我可以在 ios 端做所有这些事情，还是我需要去 PHP 后端 facebook 集成。

我真的很困惑，请给我同样的指导，我想做和 Foursquare 应用程序一样的事情。如果我出错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:31:03.443

经过大量搜索后，我想我的问题得到了解决。

请参考以下网址：

[http://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/](http://developers.facebook.com/docs/howtos/run-fql-queries-ios-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:38:59.523

如果您已经想使用帐户框架，那么您是否正在为 ios 6 编程，我想您不需要 facebook sdk。iOS 6 已经为您提供了使用 facebooks 开放图的一切。因此，您可以将帐户框架和社交框架一起导入。如果你想要一些关于如何做的代码，你应该谷歌或者我今晚会做一些示例代码。从那里你可以从你的应用程序中做任何你可以用 PHP sdk 做的事情。因此，您可以使用 facebook 提供的示例继续。

# string - 连接字符串

> ID：15659839
> 
> 赞同：0
> 
> 时间：2013-03-27T13:18:58.360
> 
> 标签：string, algorithm, perl

我的算法设计有一个大问题，因为我使用大文本文件。我有一个包含单词序列的文本文件。例如

1.  我的朋友
2.  朋友们大家好
3.  世界

第二个文件很大（千兆字节），包含句子。该程序的目标是逐字通过单词（第一个文件）并在第二个文件中查看连接符号“+”

例如“**你好我的世界朋友”作为输入**“变成”你好+我 的**+朋友****+世界**“

请问有什么想法吗？我想在 Perl 中对其进行编程，它对文本很有效

我已经在 Perl 中完成了这个脚本，但它太慢了，因为它多次读取文件..:( 这是 Perl 程序的一个示例，它可以工作，但它太慢了

```
use strict;
use warnings;
use utf8;
use feature qw(:5.10); 
my ($in, $dico) = @ARGV;
die "Bad infile $in" if !-r $in;
die "Bad dicofile $dico" if !-r $dico;

# load dico
my @dico;
open(FICHIERNOUVELLES, ">resultat7.txt");
open my $DICO, "<", $dico or die "Can't open $dico for reading: $!\n";
# For all lines in the Dico
foreach my $line (<$DICO>) {
chomp($line);
# extract words
 if (my @word = split /\s+/, $line) {

 my $re = q{(^\s*|\s+)(}.(join q(\s+), map quotemeta, @word).q{)(\s+|\s*$)};

push @dico, qr/$re/;
}
}

 open my $IN, "<", $in or die "Can't open $in for reading: $!\n";
 my @word;

foreach my $line (<$IN>) {

 foreach my $dico (@dico) {

  while (my (undef, $sequence) = $line =~ /$dico/) {

  $sequence =~ s/\s+/+/g;
  $line =~ s/$dico/$1$sequence$3/;
  }
 }
print FICHIERNOUVELLES "$line";

 }
close(FICHIERNOUVELLES); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:46:38.803

不多次读取第二个文件的解决方案是先从file1中读取单词集，并存储在数据结构中。

```
use File::Slurp;
my @lines = read_file($filename1);
my %replacements = map { my $c = $_; $c =~ s/ / + /g; ( $_ => $c ) } @lines; 

open (my $file2, "<", $filename2) or die "$!";
while (<$file2>) {
    chomp;
    foreach my $replacement (keys %replacements) {
        s/$replacement/$replacements{$replacement}/g;
    }
    print $_;
} 
```

# sencha-touch-2 - 为什么 Sencha Touch cmd 中没有视图构建

> ID：15659846
> 
> 赞同：4
> 
> 时间：2013-03-27T13:19:22.407
> 
> 标签：sencha-touch-2, sencha-cmd

使用以下命令：

```
sencha generate view user 
```

我收到以下错误：

**[ERR] 生成视图是 ExtJS SDK 特定的命令。**

有什么理由为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:27:10.673

当您点击时，`sencha generate`您可以看到

```
Commands
  * app - Generates a starter application
  * controller - Generates a Controller for the current application
  * form - Generates a Form for the current application (Touch Specific)
  * model - Generates a Model for the current application
  * profile - Generates a Profile for the current application (Touch Specific)
  * theme - Generates a theme page for slice operations (ExtJS Specific)
  * view - Generates a View for the current application (ExtJS Specific
  * workspace - Initializes a multi-app workspace 
```

所以`sencha generate view ...`并且`sencha generate theme ...`只适用于 ExtJS

# bash - 如何检查变量是否具有偶数值？

> ID：15659848
> 
> 赞同：40
> 
> 时间：2013-03-27T13:19:23.837
> 
> 标签：bash

我应该如何更改它以检查是否`val`具有偶数或奇数数值？

```
val=2
if $((RANDOM % $val)); ... 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-27T13:26:07.907

```
$ a=4

$ [ $((a%2)) -eq 0 ] && echo "even"
even

$ a=3

$ [ $((a%2)) -eq 0 ] && echo "even" 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-27T13:28:47.540

```
foo=6

if [ $((foo%2)) -eq 0 ];
then
    echo "even";
else
    echo "odd";
fi 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-27T13:28:20.637

`$(( ... ))`只是一个表达。它的结果出现在`bash`需要命令的地方。

与 POSIX 兼容的解决方案是：

```
if [ "$(( RANDOM % 2))" -ne 0 ]; 
```

但由于`RANDOM`在 POSIX 中也没有定义，您也可以使用正确的`bash`命令来完成这项工作：算术评估复合命令：

```
if (( RANDOM % 2 )); then 
```

# excel - 数据透视表过滤器列表中的重复值

> ID：15659850
> 
> 赞同：2
> 
> 时间：2013-03-27T13:19:29.753
> 
> 标签：excel, filter, pivot-table, vba

我有一个相当大的过滤器表，它来自包含数千个条目的表。这使用计算值进行故障诊断和评估系统可用性。

我正在尝试过滤数据透视表值以仅显示最重要的故障。我试图过滤的字段包含浮点值，其目的是只显示数字高于给定值的条目（假设 > 0.01）。

代码是：

```
Sub FilterPivotTable(pvtName As String, pvtField As String, rngMin As String)
' pvtName = name of pivot table
' pvtField = pivot table field to filter
' rngMin = range name containing the minimum value to filter on

Dim pvtItem As PivotItem
Dim vMin As Double
Dim x As Double

vMin = Range(rngMin).Value
With ActiveSheet.PivotTables(pvtName).PivotFields(pvtField)
    .ShowAllItems = True
    For Each pvtItem In .PivotItems
        x = CDbl(pvtItem.Name)
        pvtItem.Visible = (x >= vMin)
    Next
End With

' Change the cache setting
ActiveSheet.PivotTables(pvtName).PivotCache.MissingItemsLimit = xlMissingItemsNone
ActiveSheet.PivotTables(pvtName).PivotCache.Refresh

End Sub 
```

例程正确运行，隐藏小于限制的值...除非过滤器列表具有重复值！在这种情况下，第一个值未勾选，但其他值保持勾选。

当我单步执行宏时，我可以看到名称字符串值，并且 x 的值正确出现在局部变量中，但 Excel 似乎不知道它实际查看的是哪个 pvtItem。重复项在 pvtItem.Visible = (x >= vMin) 行中执行之前已经具有状态 Visible = False，并且 Excel 似乎只是使列表中具有该名称的第一个值不可见，而不是正在检查的实际项目。

我的问题可能是列表中有多个具有相同名称的项目。我可以消除重复的名称吗？

我没有发布图片的“声誉”，但下拉过滤器列表包含以下示例条目：

```
[ ] 0.0000125385802469136
[ ] 5.78703703703704E-06
[x] 5.78703703703704E-06
[ ] 0.0000326554232804233
[ ] 6.61375661375661E-06
[x] 6.61375661375661E-06
[x] 0.0000132275132275132
[ ] 1.65343915343915E-06
[x] 1.65343915343915E-06
etc. 
```

例如，pvtItem.Name（字符串）对于第 2 项和第 3 项、第 5 项和第 6 项、第 8 项和第 9 项等是相同的。我检查了源表中的原始数据，实际值也与显示的最大值相同30 位，包括小数点。

感谢您的任何帮助。

# yaml - 如何确定yaml-cpp中节点的内置标签？

> ID：15659857
> 
> 赞同：1
> 
> 时间：2013-03-27T13:19:35.947
> 
> 标签：yaml, yaml-cpp

在 yaml-cpp 中，除了在 YAML 源中使用应用程序定义的标签时，该函数`YAML::Node::Tag()`似乎只返回任何内容。`"?"`当然它应该返回 (例如)`"!!map"`或`"!!int"`其他内置标签。这是理想的行为吗？例如，我如何确定标量节点的特定类型标记，例如 null、boolean、integer、float、string 等？我能看到的唯一方法是尝试`YAML::Node::as<T>()`每种类型，直到不引发异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:39:25.837

要获取节点的类型，请调用`YAML::Node::Type()`. 返回值是以下之一：

```
YAML::NodeType::Undefined
YAML::NodeType::Null
YAML::NodeType::Scalar
YAML::NodeType::Sequence
YAML::NodeType::Map 
```

yaml-cpp 不做更具体的自动标签检测，例如，它不会验证`!!int`与`!!float`.

# c++ - 我怎样才能让我的 va_list 参数重复自己？

> ID：15659859
> 
> 赞同：3
> 
> 时间：2013-03-27T13:19:39.443
> 
> 标签：c++

这是我第一次`va_list`和其他东西一起工作，所以我真的不知道我在做什么。好吧，基本上我所拥有的是有序函数中的一堆数字（1、2、3、4、5），我让它们打印出来。这工作正常。

```
#include <iostream>
#include <cstdarg>

using namespace std;

void ordered(int num1, double list ...);

void main()
{ 
    ordered(5, 1.0, 2.0, 3.0, 4.0, 5.0);
}

void ordered(int num1, double list ...)
{
    va_list arguments;

    va_start(arguments, num1);

    list = va_arg(arguments, double);
    cout << "There are " << num1 << " numbers" << endl;

    do { 
        cout << list << endl; // prints out 1 then 2 then 3 then 4 then 5
        list = va_arg(arguments, double);
    } while (list != 0);

    // at this point, list = 0

    va_end(arguments);
} 
```

问题是，在它之后`va_end(arguments);`或之前，我想让程序第二次打印出我的列表；基本上再打印一次1、2、3、4、5，不做其他函数。我试图复制代码：

```
va_start(arguments, num1);

do { 
    cout << list << endl;
    list = va_arg(arguments, double);
} while (list != 0);

va_end(arguments); 
```

没有成功。程序如何再重复`list`一次，或者不可能在同一功能中再次重复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T13:30:22.597

这是一个有效的实现：

```
#include <iostream>
#include <cstdarg>

using namespace std;

void ordered(int num1, ...); // notice changed signature

int main(int,char**)
{ 
    ordered(5, 1.0, 2.0, 3.0, 4.0, 5.0);
    return 0;
}

void ordered(int count, ...) // notice changed signature
{
    va_list arguments;

    va_start(arguments, count);

    cout << "There are " << count << " numbers" << endl;

    double value = 0.0;

    // notice how the loop changed
    for(int i = 0; i < count; ++i) { 
        value = va_arg(arguments, double); 
        cout << value << endl; // prints out 1 then 2 then 3 then 4 then 5
    } 

    // at this point, list = 0

    va_end(arguments);

    va_list arg2;
    va_start(arg2, count);

    cout << "There are " << count << " numbers" << endl;

    for(int i = 0; i < count; ++i) { 
        value = va_arg(arg2, double);
        cout << value << endl; // prints out 1 then 2 then 3 then 4 then 5
    } 

    // at this point, list = 0

    va_end(arg2);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T13:28:24.493

从手册页：

> `va_end()`
> 
> 的每次调用都`va_start()` 必须与`va_end()`同一函数中的相应调用相匹配。调用后`va_end(ap`）变量 ap 未定义。
> 
> 列表的多次遍历，每次都可以用`va_start()`和括起来`va_end()`。

您能否显示您*尝试过但不起作用*的代码？

注意。另请参阅`va_copy`，您可以使用它复制`arguments`之前（破坏性地）遍历它，然后也遍历副本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:34:39.087

简单的答案（忽略 varargs 的实际工作原理，我发现很难在 之外找到有效的用例`printf`）是自己复制参数。好吧，实际上更简单的答案是根本不使用可变参数...为什么不传递容器（或者在 C++11 中使用`initializer_list`？）

# ef-code-first - Code First Entity Framework：外键问题

> ID：15659865
> 
> 赞同：1
> 
> 时间：2013-03-27T13:19:54.060
> 
> 标签：ef-code-first, entity-framework-5

我正在尝试建立一个维持三向关系的系统。但是当我进入关系的第二个实例时，我遇到了一个异常。

这是基本代码

```
public class Role
{
    protected Role() { }

    public Role(string id, string description) : this()
    {
        Id = id;
        Description = description;
    }

    public string Id { get; set; }
    public string Description { get; set; }
}

public abstract class Entity
{
    public Guid EntityId { get; private set; }
}

public class Project : Entity
{
    protected Project()
    {
        UserProjectRoles = new Collection<UserProjectRole>();
    }

    public Project(string id, string description, string connectionString)
    {
        Id = id;
        Description = description;
        ConnectionString = connectionString;
    }

    public string Id { get; private set; }
    public string Description { get; private set; }
    public string ConnectionString { get; private set; }

    public virtual ICollection<UserProjectRole> UserProjectRoles { get; private set; }

    public IEnumerable<User> Users { get { return UserProjectRoles.Select(x => x.User).Distinct(); } }
}

public class User : Entity
{
    protected User()
    {
        UserProjectRoles = new Collection<UserProjectRole>();
    }

    public User(string uniqueName)
        : this()
    {
        UniqueName = uniqueName;
    }

    public string UniqueName { get; set; }

    public virtual ICollection<UserProjectRole> UserProjectRoles { get; private set; }

    public IEnumerable<Project> Projects { get { return UserProjectRoles.Select(x => x.Project).Distinct(); } }
}

public class UserProjectRole
{
    protected UserProjectRole() { }

    public UserProjectRole(Project project, User user, Role role)
    {
        Project = project;
        User = user;
        Role = role;
    }

    public Guid ProjectId { get; private set; }
    public Guid UserId { get; private set; }
    public string RoleId { get; private set; }

    public Project Project { get; private set; }
    public User User { get; private set; }
    public Role Role { get; private set; }
}

public class MasterContext : DbContext
{
    public MasterContext(string connectionString) : base(connectionString) { }

    public IDbSet<User> Users { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Entity>().HasKey(e => e.EntityId);
        modelBuilder.Entity<Entity>().Property(e => e.EntityId).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        modelBuilder.Entity<Project>().Map(u => u.MapInheritedProperties()).ToTable("Projects");
        modelBuilder.Entity<User>().Map(p => p.MapInheritedProperties()).ToTable("Users");

        modelBuilder.Entity<Role>().HasKey(r => r.Id);

        modelBuilder.Entity<UserProjectRole>().HasKey(x => new { x.ProjectId, x.UserId, x.RoleId });
        modelBuilder.Entity<UserProjectRole>().HasRequired(x => x.User).WithMany(u => u.UserProjectRoles).HasForeignKey(x => x.UserId).WillCascadeOnDelete(false);
        modelBuilder.Entity<UserProjectRole>().HasRequired(x => x.Project).WithMany(p => p.UserProjectRoles).HasForeignKey(x => x.ProjectId).WillCascadeOnDelete(false);
        modelBuilder.Entity<UserProjectRole>().HasRequired(x => x.Role).WithMany().HasForeignKey(x => x.RoleId).WillCascadeOnDelete(false);
    }
} 
```

这是一个演示错误的测试用例。

```
[TestFixture]
public class EFTest
{
    private const string MasterConnectionString =
        "Data Source=localhost;Initial Catalog=TheDatabase;Integrated Security=True;";

    private static readonly Role DataCollector = new Role("1", "Data Collector");
    private static readonly Role Manager = new Role("2", "Manager");

    [Test]
    public void TheTest()
    {

        var user = new User("Tim the Enchanter");
        var project = new Project("Foo", "Bar", "Another Connection string");

        Database.SetInitializer(new DropCreateDatabaseAlways<MasterContext>());
        using (var masterContext = new MasterContext(MasterConnectionString))
        {
            user.UserProjectRoles.Add(new UserProjectRole(project, user, DataCollector));
            masterContext.Users.Add(user);
            masterContext.SaveChanges();
        }

        Database.SetInitializer(new CreateDatabaseIfNotExists<MasterContext>());
        using (var masterContext = new MasterContext(MasterConnectionString))
        {
            var u = masterContext.Users.First();
            var p = u.Projects.First();
            u.UserProjectRoles.Add(new UserProjectRole(p, u, Manager));

            masterContext.SaveChanges();
        }
    }
} 
```

当我运行该测试时，我收到以下错误：

> System.Data.Entity.Infrastructure.DbUpdateException ：更新条目时出错。有关详细信息，请参阅内部异常。----> System.Data.UpdateException : 更新条目时出错。有关详细信息，请参阅内部异常。----> System.Data.SqlClient.SqlException：INSERT 语句与 FOREIGN KEY 约束“FK_dbo.UserProjectRoles_dbo.Projects_ProjectId”冲突。冲突发生在数据库“Dev_Local_Master”、表“dbo.Projects”、列“EntityId”中。该语句已终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:25:52.617

事实证明，UserProjectRole 上的用户、项目和角色都需要是虚拟的才能正常工作。

错误消息对于弄清楚这一点没有帮助。

# azure - Azure 消息似乎卡住了

> ID：15659869
> 
> 赞同：0
> 
> 时间：2013-03-27T13:20:11.440
> 
> 标签：azure

我正在使用 Windows Azure 服务总线。我创建了一个主题，并且正在使用合作伙伴向其发送消息的订阅。我注意到“消息计数”保持在 1923 并且没有下降。当一条新消息发布到队列（在这种情况下是 subs）时，它会上升到 1924，然后我的服务会轮询该消息并将其带回 1923。看起来 1923 消息似乎被卡住并且无法取回。

为什么会发生这种情况以及如何检索这些消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:34:41.083

我认为 1923 消息存在于死信队列中，这些消息不会出现在实际队列中供您检索您可以使用“服务总线资源管理器”检查队列和死信队列中存在的消息。您可以在以下路径下载服务总线资源管理器： [http ://servicebus.codeplex.com/](http://servicebus.codeplex.com/)

快乐编码，-Vijay。

# facebook - Facebook登入。不仅对我，对所有访问我网站的人

> ID：15659874
> 
> 赞同：0
> 
> 时间：2013-03-27T13:20:27.690
> 
> 标签：facebook, facebook-javascript-sdk, facebook-login

我已经在我正在处理的网站上设置了 facebook 登录。

我用它来让它工作。 [http://developers.facebook.com/docs/howtos/login/getting-started/](http://developers.facebook.com/docs/howtos/login/getting-started/)

现在，当我使用我的 Facebook 帐户登录时，一切正常。

但是当我尝试使用另一个 facebook 帐户登录时，我收到以下错误

**发生错误。请稍后再试**

我想让所有人都可以访问我的网站，而不仅仅是我。有什么我在这里想念的吗？？？

谢谢

# c# - 是否有一个术语可以互换地描述 C# 中的接口或抽象类？

> ID：15659875
> 
> 赞同：4
> 
> 时间：2013-03-27T13:20:32.513
> 
> 标签：c#, .net, terminology

描述可能是接口或抽象但不是具体类型的类型的正确术语是什么？

这个问题是由于将 StructureMap 连接`IDependencyResolver`为 MVC4 的结果而出现的。我正在做一些重构并创建了这个：

```
public object GetService(Type serviceType)
{
  if (serviceType.IsAbstract || serviceType.IsInterface)
  {
    return GetNonConcreteService(serviceType);
  }

  return GetConcreteService(serviceType);
}

private object GetConcreteService(Type serviceType)
{
  return _container.GetInstance(serviceType);
}

private object GetNonConcreteService(Type serviceType)
{
  return _container.TryGetInstance(serviceType);
} 
```

显然`GetNonConcreteService`是一个糟糕的方法名称，这让我想知道是否会有一个同样准确但更好的术语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:28:29.040

为了回答您的代码示例，他们都调用`Abstraction`了`.net`. 为了证明这一点：

```
Type type = typeof(IEnumerable); //interface    
Console.WriteLine (type.IsAbstract); //prints true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:22:59.860

也许您可以将它们都称为“抽象”。接口定义了一组方法/属性/事件，如果您实现该接口，则必须定义这些方法/属性/事件。抽象类可以实现功能，但也可以定义抽象方法，如果您从抽象类继承，则必须实现类似于接口的抽象方法。不同的是抽象类可以提供一些功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:27:00.803

也许抽象是最好的，但是......

我认为无论如何你都应该区分接口和抽象类。接口为您提供功能的定义（无实现），而抽象类可以有部分实现，因此与普通类没有太大区别（除非您不能实例化它）。

在旁注中，您可能需要阅读[此](https://stackoverflow.com/questions/5653783/is-idependencyresolver-an-anti-pattern)内容。此接口在某些情况下存在问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T13:31:30.617

在 C# 术语中，它们都是基本类型。实际上并没有一个具体的术语来描述两者。

至于你的其他问题 - 我会调用你的代码函数`GetServiceImplementation`而不是`GetNonConcreteService`.

# ruby-on-rails - 消息中的名称错误#用户索引

> ID：15659877
> 
> 赞同：0
> 
> 时间：2013-03-27T13:20:34.410
> 
> 标签：ruby-on-rails

我正在构建一个自定义收件箱，在添加此行以显示所有消息后，“<% user.received_messages.each do |message| %>”我现在收到“未定义的局部变量或方法‘用户’”错误. 不知道为什么额外的代码行会导致此错误以及如何修复它。

_inbox.html：

```
<h2>Your Inbox</h2>
<% user.received_messages.each do |message| %>
No messages in your Inbox
<% end %>
        <%= form_tag delete_multiple_user_messages_path, :method=>:post do %>
            <table  class="table table-bordered">
                    <tr>
                    <th>Delete?</th>
                    <th>Sent</th>
                    <th>Sender</th>
                    <th>Sent</th>
                </tr>
                    <% for message in @messages %>
                        <tr>
                            <td><%= check_box_tag "delete[]", message.id %></td>
                            <td>
                                <% if message.read? %>
                                  <%= link_to h(message.subject), user_message_path(@user, message) %>
                                <% else %>
                                  <%= link_to "#{h(message.subject)} (unread)", user_message_path(@user, message) %>
                                <% end %>
                            </td>
                            <td><%= "#{message.sender.first_name} #{message.sender.last_name}" %></td>
                            <td><%=h message.created_at.to_s(:long) %></td>
                        </tr>
            <% end %>
            </table>
        <%= submit_tag "Delete selected" %> |
        <% end %>
<%= link_to "Compose New Message", new_user_message_path(@user)%> | 
<%= link_to "View Sent Messages", user_messages_path(current_user, :mailbox => :sent)%> 
```

索引.html：

```
<% if params[:mailbox] == "sent" %>
        <%= render :partial => "sent" %>
<% elsif params[:mailbox] == "inbox" %>
        <%= render :partial => "inbox" %>
<% elsif params[:mailbox] == "archieved" %>
        <%= render :partial => "inbox" %>
<% end %> 
```

消息控制器：

```
class MessagesController < ApplicationController

  before_filter :set_user

  def index
    if params[:mailbox] == "sent"
      @messages = @user.sent_messages
    elsif params[:mailbox] == "inbox"
      @messages = @user.received_messages
    #elsif params[:mailbox] == "archieved"
     # @messages = @user.archived_messages
    end
  end

  def new
    @message = Message.new
    if params[:reply_to]
      @reply_to = User.find_by_user_id(params[:reply_to])
      unless @reply_to.nil?
        @message.recepient_id = @reply_to.user_id
      end
    end
  end

  def create
    @message = Message.new(params[:message])
    @message.sender_id = @user_id
    if @message.save
      flash[:notice] = "Message has been sent"
      redirect_to user_messages_path(current_user, :mailbox=>:inbox)
    else
      render :action => :new
    end
  end

  def show
    @message = Message.readingmessage(params[:id],@user_id)
  end

  def delete_multiple
      if params[:delete]
        params[:delete].each { |id|
          @message = Message.find(id)
          @message.mark_message_deleted(@message.id,@user_id) unless @message.nil?
        }
        flash[:notice] = "Messages deleted"
      end
      redirect_to user_messages_path(@user, @messages)
  end

  private
    def set_user
      @user = current_user
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:23:54.197

那是因为您没有名为`user`. 也许您在控制器中有`current_user`或实例变量？`@user``Messages`

**更新**

也许您希望将`user`变量传递给部分？然后你需要改变`render`调用这样的东西：`<%= render :partial => "inbox", :user => some_user_instance %>`

# java - 使用 OAuth2.0 [Blogger API] 使用您的 Google 帐户登录

> ID：15659879
> 
> 赞同：1
> 
> 时间：2013-03-27T13:20:36.017
> 
> 标签：java, android, oauth, accountmanager

我们正在开发一款适用于 Android 的应用程序，您可以使用您的 Google 帐户登录并阅读、撰写、删除 Blogger 中的帖子。我们查找了许多 OAuth2.0 示例，但没有一个有效，而且其中许多已经过时。Blogger API 没有这个功能？

**我们希望人们在 2 个不同的 EditText 中写下谷歌电子邮件/密码并登录。** 或者，如果它转到手机上的谷歌帐户并在没有任何密码的情况下登录（没关系）

我们尝试了 accountManager 和其他示例，但没有一个有效。我们有 Blogger API、客户端 ID，但没有客户端密码。它不在那里。

有人得到了一个 WORKABLE 示例或完成了带有文本的 java 文件，所以我们可以输入我们的 API 密钥、客户端 ID 等？谢谢。

（是的，我们阅读了许多示例，尝试了许多来自 StackOverflow 和 youtube 的页面和教程。没有一个有效，太旧了。）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-30T15:02:37.193

截至 2015 年 9 月，没有办法为 Blogger 预授权某人，所以我相信访问 Blogger Api 的唯一方法是通过 Auth 2 Playground ( [https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/) ) 生成访问令牌，然后使用API 调用的令牌。

凭据身份验证可能在较早之前就可以工作，但现在已停止。

# php - fgetcsv()：第一行作为键

> ID：15659884
> 
> 赞同：7
> 
> 时间：2013-03-27T13:20:50.503
> 
> 标签：php, multidimensional-array, fgetcsv

我正在构建一个简单的商店系统，该系统从 csv 文件生成的数组中获取其产品。

我的csv如下：

```
pid;name;color
11149;Miro;"schwarz;weiß;blau;rot;gelb"
11004;FritzHansen;"buche;nussbau;schwarz;weiß;blau;hellblau;rot;grün;gelb;retro" 
```

我正在使用以下脚本

```
if (($handle = fopen('_products.csv', 'r')) === false) {
    die('Error opening file');
}

$headers = fgetcsv($handle, 256, ';');
$_products = array();

while ($row = fgetcsv($handle, 256, ';')) {
    $_products[] = array_combine($headers, $row);
}
fclose($handle); 
```

产生这个数组：

```
Array
(
    [0] => Array
        (
            [pid] => 11149
            [name] => Miro
            [color] => schwarz;weiß;blau;rot;gelb
        )

    [1] => Array
        (
            [pid] => 14215
            [name] => 1800
            [color] => schwarz;anthrazit
        )

    [2] => Array
        (
            [pid] => 11004
            [name] => FritzHansen
            [color] => buche;nussbau;schwarz;weiß;blau;hellblau;rot;grün;gelb;retro
        )
) 
```

我希望键`0-x`是`[pid]`相应“子”数组的值。

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T13:27:49.490

尝试这个

```
while ($row = fgetcsv($handle, 256, ';')) {
    $_products[$row[0]] = array_combine($headers, $row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:23:12.653

这应该做你需要的：

```
$products = array();

foreach  ($_products as $product)
{
  $products[$product['pid']] = $product;
}

print_r($products); 
```

# android - 删除后恢复首选项

> ID：15659898
> 
> 赞同：2
> 
> 时间：2013-03-27T13:21:20.980
> 
> 标签：android, sharedpreferences, android-preferences

在`PreferenceActivity`我`Preference` `myPref`通过调用`myPref = findPreference(..)`之后我检查某些条件并将其从“PreferenceList”中删除，如下所示：`getPreferenceScreen().removePreference(myPref);`在我的方法的第二次调用中，我需要`Preference`再次添加它但`findPreference(..)`返回`null`。我如何恢复它`myPref`以便稍后将其添加到“ PreferenceList”通过调用`getPreferenceScreen().addPreference(myPref);`?

```
Preference myPref= findPreference( getString( R.string.path_preference ));//return null after removing

        if (condition) {
            if (!pbePathPreferenceRemoved) {
                getPreferenceScreen().removePreference(myPref);
                pbePathPreferenceRemoved = true;
            }
        } else if (pbePathPreferenceRemoved) {
            getPreferenceScreen().addPreference(myPref);
            pbePathPreferenceRemoved = false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:44:17.090

我的解决方案是让`Preference myPref`my 的成员`PreferenceActivity class`在方法中只初始化一次`onCreate(..)`，之后我可以删除它并再次添加。

# single-sign-on - 支持 SSO 的 Rally API

> ID：15659899
> 
> 赞同：1
> 
> 时间：2013-03-27T13:21:22.927
> 
> 标签：single-sign-on, rally

我的公司正在使用 SSO 登录集会。我开发了一个使用拉力帐户授权（BASIC HTTP auth）的应用程序。但由于我的公司 ppl 使用 SSO 登录，他们无法使用他们的集会登录。如何将现有应用程序与 SSO 集成。Rally api 是否支持使用 SSO 登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:09:45.750

目前 App SDK 和其他各种 REST 工具包与 SSO 不兼容。

# java - Java 中的通配符搜索字符串

> ID：15659904
> 
> 赞同：0
> 
> 时间：2013-03-27T13:21:33.100
> 
> 标签：java

我正在尝试在 Java 中实现通配符。

这是我的代码

```
public class Assign {

    public boolean compare(String s1, String s2)
    {
        char [] s3 = s1.toCharArray();
        char [] s4 = s2.toCharArray();
        int i,j;

        int k = 0;
        for(i=0;i<s3.length;i++)
        {
            for(j=0;j<s4.length;j++)
            {
                if(s3[i] == s4[j])
                {

                    if(s4[j] == '*')
                    {
                        i++;

                        if(s3[i] == s4[s4.length-1])
                        {
                            return true;
                        }
                    }
                }
            }
        }
        return false;
    }
    public static void main(String args[])
    {
        Assign a = new Assign();
        boolean r = a.compare("a hello b", "a * b");
        System.out.println(r);
    }
} 
```

将有两个参数传递给函数。一个是字符串，另一个是正则表达式。

示例案例是：

1) 如果传递的字符串是“a hello b”并且正则表达式是“a * b”，那么函数应该返回 TRUE，因为在 * 的位置可以存在任意数量的字符。

2) 如果传递的字符串是“a X b”并且正则表达式是“a ? b”，那么返回值应该是 TRUE，因为如果有 a ？在正则表达式中，a 和 b 之间应该只有一个字符。

像这样它适用于所有情况。我认为我认为的逻辑很好，但我在编码部分遇到了麻烦。

我不想导入模式和匹配器。没有他们，我必须完成这个。

请任何人帮助我。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:41:12.027

如果你看到一个“？” 然后跳过一个字符。如果您看到“*”，则在剩余输入上递归调用您的搜索函数，直到找到匹配项。

# jsf - 对不同的组件使用 p:AjaxStatus

> ID：15659908
> 
> 赞同：0
> 
> 时间：2013-03-27T13:21:51.617
> 
> 标签：jsf, primefaces

我有两个`<p:inputText/>`要与`<p:ajaxStatus/>`组件一起使用。当我运行我的页面时 `<p:ajaxStatus/>`，两个输入文本都会运行。我想`<p:ajaxStatus/>`为每个输入文本单独显示。你能看看我的代码并解决这个问题吗？

```
 <tr>
                <td colspan="2">
                    <p:outputPanel>
                        <p:inputText id="companynameInputText" value="#{AccountInfo.companyName}"  requiredMessage="#{signup_msg.requiredorganization}" required="true" style="width: 100%">
                            <f:validator validatorId="organizationNameUniqueValidator" />
                            <p:ajax  update="companyNameMessage"/>
                        </p:inputText>
                        <p:watermark for="companynameInputText" value="#{signup_msg.companyname}" />
                    </p:outputPanel>
                </td>
                <td>  
                    <p:ajaxStatus >              
                        <f:facet  name="start">
                            <p:graphicImage   value="resources/img/loading.gif"/>
                        </f:facet>
                        <f:facet name="complete">
                            <h:outputText value="" />
                        </f:facet>
                    </p:ajaxStatus>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <p:inputText value="#{AccountInfo.position}" id="positionInputText" requiredMessage="#{signup_msg.requiredposition}" required="true" style="width: 100%"/>
                    <p:watermark for="positionInputText" value="#{signup_msg.position}" />
                </td>
                <td/>
            </tr>
            <tr>
                <td colspan="2">
                    <p:outputPanel>
                        <p:inputText  id="userNameInputText" value="#{AccountInfo.bizBizNetId}"  requiredMessage="#{signup_msg.reqiredpassword}" required="true" style="width: 100%">
                            <f:validator validatorId="UserNameValidator"/>
                            <p:ajax  update="userNameMessage"/>

                        </p:inputText>
                        <p:watermark for="userNameInputText" value="#{signup_msg.mobileemail}" />
                    </p:outputPanel>
                </td>
                <td>
                    <p:ajaxStatus>              
                        <f:facet name="start">
                            <p:graphicImage value="resources/img/loading.gif"/>
                        </f:facet>
                        <f:facet name="complete">
                            <h:outputText value="" />
                        </f:facet>
                    </p:ajaxStatus>
                </td>
            </tr>            
            <tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:57:43.817

来自 primefaces 网站关于`<p:ajaxStatus/>`

> Ajax 状态是通知用户有关 ajax 交互的**全局指示器。**

重要的部分是**global**，这意味着每个页面只有一个`<p:ajaxStatus/>`可用，并且一个将处理在该页面上执行任何 ajax 处理的所有组件。

如果您希望每个组件有单独的 ajax 状态指示器，请改用[BlockUI](http://www.primefaces.org/showcase/ui/blockUI.jsf)

# jquery - Chrome/Safari 在内容加载之前设置内联元素的宽度

> ID：15659911
> 
> 赞同：0
> 
> 时间：2013-03-27T13:22:04.027
> 
> 标签：jquery, html, css, webkit

Chrome 和 Safari 似乎在内容加载之前设置了以下元素的宽度，因此实际上它没有宽度。但在 Firefox 中，它正确地将宽度设置为加载文本的宽度。它需要是内联的并且没有宽度，以便将背景设置为动态内容的宽度。有什么解决办法吗？

```
<a class="text></a> 
```

CSS：

.text { 背景：无重复滚动 0 0 rgb(255, 255, 255); 边框：1px 纯色 rgb(217, 195, 169); 颜色：RGB（34、34、34）；显示：内联块；填充：8px 12px 8px 8px；文字装饰：无；文本转换：大写；}

JavaScript：

```
 $(document).ready(function() {
    var data;
    function loadContent(){ 
        $.ajax({
            url: "json/content.json",
            data: "nocache=" + Math.random(),
            type: "GET",
            contentType: "application/json",
            dataType: "json",
            success: function(source){
                data = source;
                showInfo();
            },
            error: function(data){
                alert("Failed to load content");
            }
        }); 

    }

    loadContent();
        function showInfo(){
            $(".text").html(data[lang]['startpage']['text']);
    }
   showInfo();
    }); 
```

# c# - 列表框中的唯一随机数

> ID：15659912
> 
> 赞同：0
> 
> 时间：2013-03-27T13:22:07.493
> 
> 标签：c#, random

我想知道如何在我的列表框中获得 8 个唯一的随机数，到目前为止的代码：

```
lbLeft.Items.Clear();
Random rnd = new Random();
int n = rnd.Next();
int x = 8;

do
{
    lbL.Items.Add(rnd.Next(0, 20));

} while ((lbLeft.Items.Count != x)); 
```

它用 8 个随机数填充列表框，但我需要它们唯一。

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T13:23:59.797

```
HashSet<int> uniques = new HashSet<int>();  
Random random = new Random();  
while(uniques.Count!= 8)  
{
    uniques.Add(random.Next(0,20));  //terrible upper bound
} 
```

将`Set`保证其中不能包含重复项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T13:26:50.987

在您的代码中添加此检查：`if(!lbl.Items.Contains(n))`

```
lbLeft.Items.Clear();
Random rnd = new Random();
int n = rnd.Next();
int x = 8;

do
{
    n = rnd.Next(0, 20);
    if(!lbl.Items.Contains(n))
        lbL.Items.Add(n);

} while ((lbLeft.Items.Count != x)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:52:17.237

您可以创建一个从 0 到 n 的列表，从该列表中选择一个随机数，将其删除并将您的最大值减一。这样，您就知道您只会进行 x 次 for 查找。

```
 lbLeft.Items.Clear();
    Random rnd = new Random();
    int x = 8;
    int upperBound = 20;
    List<int> uniqueInts = new List<int>(upperBound);
    for (int i = 0; i < upperBound; i++)  
        uniqueInts.Add(i);

    for (int i = 0; i < x; i++ )
    {
        int index = rnd.Next(0, uniqueInts.Count);
        lbLeft.Items.Add(uniqueInts[index]);
        uniqueInts.RemoveAt(index);

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T13:28:59.450

```
lbLeft.Items.Clear();
Random rnd = new Random();

for (int i = 0; i < 8; i++)
{
    n = rnd.Next(0, 20);
    while(lbLeft.Contains(n.ToString())
    {
        n = rnd.Next(0, 20);
    }
    al.Add(n);
    lbL.Items.Add(n.ToString())
} 
```

# c# - 使用 WP8 进行直播

> ID：15659916
> 
> 赞同：2
> 
> 时间：2013-03-27T13:22:26.167
> 
> 标签：c#, windows-phone-8, live-streaming

目前我正在开展一个项目，将实时视频内容从 WP8 相机流式传输到`FFserver`.

我能够在文件中捕获视频源，但无法找到将相机源传递到服务器的方法。

在我为其他平台创建的之前的流式应用程序中，我能够`FFmpeg`通过编译平台相关的二进制文件然后使用`ffmpeg-cli`来完成任务，大量使用将内容流式传输到服务器。

但在 WP* 的情况下，它似乎没有 NDK 或工具链来编译`ffmpeg`库。

有没有办法使用 WP8 完成将实时视频流式传输到服务器的任务？

# ios - 禁用滑动以在 UIWebView 上滚动但保留拖动/平移

> ID：15659919
> 
> 赞同：1
> 
> 时间：2013-03-27T13:22:42.720
> 
> 标签：ios, uiwebview, uiscrollview

在 UIWebView 上，我正在寻找一种方法来禁用滑动滚动（当您滑动一根手指时它会滚动）但仍保留拖动或平移（在拖动/平移时按住手指）webview 的能力。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T07:59:40.440

UIWebView 是 UIScrollView 的子类，因此您可以通过 UIWebView 访问 UIScrollView 的所有属性。

所以，试试这个，它会禁用滚动，但用户交互仍然会打开。

```
[web.scrollView setScrollEnabled:NO]; 
```

享受编码......

# css - 如何在 Vaadin 6 中编写 CSS？

> ID：15659920
> 
> 赞同：2
> 
> 时间：2013-03-27T13:22:43.280
> 
> 标签：css, stylesheet, vaadin

我在 Vaadin 6 中做一个项目。我为我的项目创建了所有布局。但是，我陷入了 CSS 样式。我找不到任何简单的方法将 CSS 样式应用于我的布局。

[我在Vaadin](https://vaadin.com/book/-/page/themes.css.html)中看到了这个例子。

```
<body>
<div id="v-app">
<div>
   <div class="v-orderedlayout">
    <div>
       <div class="v-panel">
        <div class="v-panel-caption">Log In</div>
        <div class="v-panel-content">
           <div class="v-orderedlayout">
            <div>
               <div>
                <div class="v-caption">
                  <span>Username:</span>
                </div>
               </div>
               <input type="text" class="v-textfield"/>
            </div>
            <div>
               <div>
                <div class="v-caption">
                  <span>Password:</span>
                </div>
               </div>
               <input type="password"
                      class="v-textfield"/>
            </div>
            <div>
              <button type="button"
                      class="v-button">Login</button>
              </div>
           </div>
        </div>
        <div class="v-panel-deco"/>
        </div>
       </div>
    </div>
   </div>
</div> 
```

在那里面; 他们为他们添加的所有组件获得了一个默认的类名。但是，在我的项目中，我没有得到我添加的所有组件的默认类名。

我不是通过类应用样式，而是通过内联函数应用样式。我想，这是因为我在设计布局时调整了组件的大小。

我的代码：

```
<div style="height: 781px; width: 762px; overflow: hidden; float: left; padding-left: 6px; padding-top: 0px;">
<div style="float: left; margin-left: 0px;">
<div style="overflow: hidden; height: 781px; width: 762px;" class="v-verticallayout">
<div style="overflow: hidden; margin: 0px; width: 762px; height: 781px;">
<div style="height: 573px; width: 762px; overflow: hidden; padding-left: 0px; padding- top: 0px;">
<div style="float: left; margin-left: 0px;">
<div class="v-customcomponent" style="height: 573px; width: 762px;">
<div class="v-absolutelayout" style="height: 573px; width: 762px;">
<div style="position: relative; overflow: hidden; height: 573px; width: 762px;">
<div class="v-absolutelayout-wrapper" style="top: 0px; left: 0px; right: 0px; bottom: 0px;">
<div class="v-tabsheet v-tabsheet-hover-closable hover-closable" style="overflow: hidden; height: 573px; width: 762px;"> 
```

1.  这是因为我在设计布局时调整了组件的大小吗？或者这很常见吗？
2.  如何避免这种内联样式？
3.  在 Vaadin 中设计样式似乎有点困难。如果我错了，有人可以告诉我应用样式的最佳和标准方法吗？
4.  我是否需要遵循任何标准或方法来设计布局以避免内联样式？. . .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:42:12.253

在 Vaadin 6 中，在 Java 代码中完成的任何组件样式（例如，component.setWidth() 等）都直接作为内联 css 插入。如果您不希望它内联，您可以在目录`styles.css`下的文件中手动定义这些规则`VAADIN/themes/themename/`，并在您的 Application 类上设置`@Theme("themename")`注释。

但是如果你想做 CSS 样式，你真的应该转移到 Vaadin 7 —— Jouni 和其他人已经非常清楚地清理了所有东西（主要是通过放弃旧的 IE 支持），这使得使用 CSS 的样式实际上变得实用。您现在也可以使用 SASS。有关更多信息，请查看[Vaadin Wiki](https://vaadin.com/wiki/-/wiki/Main/Vaadin+7)。

* * *

编辑：
要回答列表中的#4，我的方法是制作一个`CustomComponent`以`CustomLayout`( [link](https://vaadin.com/book/vaadin7/-/page/layout.customlayout.html) ) 作为基本布局的布局。（或者我想你可以扩展 CustomComponent 而不是扩展 CustomComponent `CustomLayout`。）我使用 a`pageXLayout.html`作为骨架或模板，以及我想要页面的交互或可更改部分（按钮、编辑字段、图形、“视图”等）的任何地方放一个`<div location="componentY"></div>`标签。然后，您可以在需要时（在初始化、延迟加载、响应服务器事件或用户交互等）填写这些 div，甚至可以根据需要删除它们并替换它们。

所以，这可能太明显了。但是这种构建页面的方式的好处在于，只要您不进行任何服务器端大小调整或任何会影响组件视觉样式的更改，您将拥有一个完全没有任何内联的最终 html 页面造型。您可以通过更改现有的 Vaadin css 类或添加您自己的 id ( `component.setId("myId")`) 或 class ( `component.addStyleName("myStyle")`) 来完成所有视觉样式。如果这更容易，您也可以将 id 和类名添加到位置 div 本身 ( `<div location="componentY" class="myClass"></div>`)。但有时这些样式可能会被组件自己的基于 Vaadin 的 css 覆盖（您可以在您的`myTheme.scss`或`myTheme.css`文件中自行更改）。

（之前假设 Vaadin 7\. 6 可能仍会添加内联样式，我忘记了。）

无论如何，这就是我最终以简单的方式构建本质上对设计人员友好的 html 和基于 css 的单页 web 应用程序的方式。您甚至可以添加任何您想要的基于 javascript 的前端 chrome，但是对于 GWT 应用程序处理页面重新加载和状态的方式，这有点更深入和棘手。

# delphi - 更新 TStringList 名称/值对中的名称值

> ID：15659927
> 
> 赞同：5
> 
> 时间：2013-03-27T13:23:07.467
> 
> 标签：delphi, delphi-2010

是否可以更新特定 TStringList 名称/值对的名称字符串？

```
List.Names[I]:= name; 
```

我知道 Names 是一个只读属性，我想知道是否还有另一种我不知道的方式？

还是我必须对整个字符串进行完整更新

```
List[I]:= name=value 
```

问题是我在名称/值对的值部分存储了大量的字符串值

例子

```
name=value1,value2,value3,value4,value5,value6,value7,value8,value9,value10 
```

我宁愿只更新名称部分 9 因为这就是我需要做的）

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T13:26:19.000

您需要阅读代表名称/值对的项目的索引。通过调用来做到这一点`IndexOfName()`。然后你修改那个项目。所以代码看起来有点像这样：

```
Index := List.IndexOfName(OldName);
if Index=-1 then
  // handle error
List[Index] := NewName + List.NameValueSeparator + List.ValueFromIndex[Index]; 
```

* * *

由于您使用的是支持泛型的 Delphi，因此使用`TDictionary<string, string>`.

即使这样，更改项目的名称也并非易事。翻译成字典的代码如下所示：

```
Item := Dict.ExtractPair(OldName);
Dict.Add(NewName, Item.Value); 
```

# sql - 使用分隔符在相似词中搜索多个词

> ID：15659928
> 
> 赞同：0
> 
> 时间：2013-03-27T13:23:10.080
> 
> 标签：sql, sql-server, dynamic-sql

我昨天遇到了这个问题，以为我已经解决了，但我错了。出于此脚本的目的，我需要将变量放在带有分隔符的字符串中（这是因为最终用户将在帐户标题中搜索术语）。

例如，当标题中包含“水”或“食物”时，最终用户想要搜索。它们不必在同一个标​​题中。结果可能会返回“世界之水”和“深思熟虑”。

我知道我可以使用几个 AND 和 OR 语句轻松编写此代码

```
 SELECT ...
 FROM ...
 WHERE 1=1
 and (rpt_title LIKE '%Food%' 
 or rpt_title LIKE '%Water%') 
```

该变量将只采用一个参数，但作为一个字符串。（即='食物|水'）。我已经有一个函数，它将接受一个字符分隔的字符串并将其转换为多个变量。我不认为这是解决方案。我想我需要使用 substring 和 charindex 来定位分隔符（ a | 在这种情况下，因为它很可能不在标题中），然后将其转换为 OR 语句。

有什么想法或建议吗？

编辑：最终结果将是输入变量的能力（例如 - rpt_title LIKE '%'+@title+'%'）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:36:11.167

我不知道你为什么认为拆分是个坏主意。您可以创建一个相对高效的内联 TVF 并与之结合，例如假设您有一个 Numbers 表：

```
CREATE FUNCTION dbo.SplitStrings_Numbers
(
   @List       NVARCHAR(MAX),
   @Delimiter  NVARCHAR(255)
)
RETURNS TABLE
WITH SCHEMABINDING
AS
   RETURN
   (
       SELECT Item = SUBSTRING(@List, Number, 
         CHARINDEX(@Delimiter, @List + @Delimiter, Number) - Number)
       FROM dbo.Numbers
       WHERE Number <= CONVERT(INT, LEN(@List))
         AND SUBSTRING(@Delimiter + @List, Number, LEN(@Delimiter)) = @Delimiter
   );
GO 
```

（对于绝对最有效的方法，例如 CLR，请参阅[http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings](http://www.sqlperformance.com/2012/07/t-sql-queries/split-strings)）

现在你可以说：

```
SELECT t.rpt_title
  FROM dbo.table_name AS t
  INNER JOIN dbo.SplitStrings_Numbers(@Input, '|') AS x
  ON t.rpt_title LIKE '%' + x.Item + '%'
  GROUP BY t.rpt_title; 
```

另一个想法是不要像一开始那样使用列表`foo|bar|splunge`，而是使用 TVP。首先创建一个表类型：

```
CREATE TYPE dbo.TitleMatches
(
  Pattern NVARCHAR(64)
);
GO 
```

然后是使用它的存储过程：

```
CREATE PROCEDURE dbo.Whatever
  @matches dbo.TitleMatches READONLY
AS
BEGIN
  SET NOCOUNT ON;

  SELECT t.rpt_title
    FROM dbo.table_name AS t
    INNER JOIN @matches AS m
    ON t.rpt_title LIKE '%' + m.Pattern + '%'
    GROUP BY t.rpt_title;
END
GO 
```

然后你只需要传入你的 DataTable 或任何包含潜在匹配列表的结构，例如在 C# 中，这可能看起来像：

```
DataTable DataTableName = new DataTable();

// ... populate data table here

SqlCommand cmd = new SqlCommand("dbo.Whatever", conn);
cmd.CommandType = CommandType.StoredProcedure;
SqlParameter tvp = cmd.Parameters.AddWithValue("@matches", DataTableName);
tvp.SqlDbType = SqlDbType.Structured;

// ... execute, consume results, etc. 
```

（有关此的更多详细信息，[请访问 http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql](http://www.sqlperformance.com/2012/08/t-sql-queries/splitting-strings-now-with-less-t-sql)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:45:13.030

听起来您需要使用动态 tsql，如下所示。不幸的是，我读过很多次，它使用起来效率不高，因为它不能由服务器预编译，并且每次运行时都必须在运行时进行优化，这比你这样做的方式要慢。但是，我认为这应该可以完成您的要求。要运行它，请使用 proc_DelimitedQuery 'aaa|bbb|etc' 调用它

```
create PROCEDURE [dbo].[proc_DelimitedQuery]

@delimitedString varchar(100)
as

DECLARE @delimiter int
declare @pos int
DECLARE @item varchar(500)
Declare @criteria varchar(5000)

set @criteria = '(rpt_title like ''%'

set @pos=1

--find the first delimiter
SET @delimiter = CHARINDEX('|', @delimitedString, @pos)

WHILE @delimiter<>0
BEGIN
    set @item=substring(@delimitedString, @pos, @delimiter-@pos)
    set @criteria = @criteria + @item + '%'' or rpt_title like ''%'

    --Find the next delimiter
    set @pos=@delimiter+1

    if charindex('|', @delimitedString, @pos)=0
    begin

        set @pos=@delimiter+1
        set @item=substring(@delimitedString, @pos, datalength(@delimitedString)-@delimiter)
        set @criteria = @criteria + @item + '%'')'      
        set @delimiter=0
    end
    else
    begin
        set @delimiter=charindex('|', @delimitedString, @pos)
    end

END

declare @sql varchar(500)
set @sql='select * from MyTable where 1=1 and ' + @criteria

    --change the next line to select @sql if you want to examine the sql statement
EXECUTE(@sql)
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T14:18:12.373

好吧，这有点脏，但它起作用了。原谅我，我有一段时间没有做过 TSQL。

```
DECLARE @delim CHAR, @search NVARCHAR(100)
set @delim = '|'
set @search = 'world|food'

DECLARE @tblSearch TABLE(
string NVARCHAR(100)
)

DECLARE @tmpStr NVARCHAR(100)
WHILE (@search <> '')
BEGIN
    IF (CHARINDEX(@delim, @search) = 0)
        BEGIN
            INSERT INTO @tblSearch(string) VALUES('%' + @search + '%')
            SET @search = ''
        END
    ELSE
        BEGIN
            INSERT INTO @tblSearch(string)
            SELECT '%' + SUBSTRING(@search, 0, CHARINDEX(@delim, @search)) + '%'
            SET @search = SUBSTRING(@search, CHARINDEX(@delim, @search) + 1, LEN(@search))
        END
END

SELECT ...
FROM ... as m
INNER JOIN @tblSearch as s ON m.rpt_title like s.string 
```

# java - 检查随机整数？

> ID：15659944
> 
> 赞同：0
> 
> 时间：2013-03-27T13:23:50.960
> 
> 标签：java, random, int

我们正在运行棋盘游戏的模拟器，我们需要计算机在 0-5 之间的数组（他们的棋盘）中选择随机位置（所有这些都完成了）我们实现了一个数组 player1move，它存储了计算机的移动选择如果随机值选择了一个空的位置，我们会打印“错误，请再次移动”，但该移动被添加到 movehist 数组中，尽管它是非法移动。有人想到解析这个随机整数的好方法吗？

```
int player1move;
     Random rand1 = new Random();
     player1move = rand1.nextInt(6); 
     System.out.println("\nPlayer 1, Your move:");

    int h = 0;
int i = player1move;
player1array.add(i);
System.out.println(player1array);
h = h+1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:38:40.650

您可以做的是使用异常来控制您的工作流程。您可以为您的情况定义一个特定的异常，例如`EmptyPositionException`，并在这种情况下使用它，如下所示：

```
int player1move;
Random rand1 = new Random();
player1move = rand1.nextInt(6);
if(isEmptyPosition(player1move){
    throw new EmptyPositionException("Error, please move again");
} 
System.out.println("\nPlayer 1, Your move:");

int h = 0;
int i = player1move;
player1array.add(i);
System.out.println(player1array);
h = h+1; 
```

显然可以对代码进行改进。这只是为了让您了解您可以做什么。

当代码进入if语句，抛出异常时，方法中的其余代码将不会被执行。

# java - 使用 Jackson 或其替代方法将 JSON 树解析为普通类

> ID：15659950
> 
> 赞同：3
> 
> 时间：2013-03-27T13:24:05.073
> 
> 标签：java, json, jackson

如何解析该 JSON：

```
{
    "foo": {
        "bar": {
            "baz": "Hello"
        },
        "qux": "World"
    }
} 
```

[使用杰克逊](http://jackson.codehaus.org/)或其替代品 进入该课程：

```
public class Foo {
    private String baz;
    private String qux;

    public String getBaz() {
        return baz;
    }

    public void setBaz(final String baz) {
        this.baz = baz;
    }

    public String getQux() {
        return qux;
    }

    public void setQux(final String qux) {
        this.qux = qux;
    }
} 
```

期待类似的东西：

```
@JsonProperty("foo.bar.baz")
private String baz;
@JsonProperty("foo.qux")
private String qux; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:08:27.097

我发现，此功能尚未在[Jackson](https://github.com/FasterXML/jackson)中实现，请参阅[问题](https://github.com/FasterXML/jackson-annotations/issues/42)。

作为一种解决方法，可以将以下方法添加到`Foo`类中：

```
@JsonProperty("foo")
public void setFoo(JsonNode jsonNode) {
    this.qux = jsonNode.get("qux").getTextValue();
    this.baz = jsonNode.get("bar").get("baz").getTextValue();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:30:25.940

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

这个用例对于 Jackson 来说可能是不可能的，但是当 MOXy 用作您的 JSON 绑定提供程序时可以完成。

**富**

对于这个用例，您可以利用 MOXy 基于路径的映射。

```
import org.eclipse.persistence.oxm.annotations.XmlPath;

public class Foo {

    private String baz;
    private String qux;

    @XmlPath("foo/bar/baz/text()")
    public String getBaz() {
        return baz;
    }

    public void setBaz(final String baz) {
        this.baz = baz;
    }

    @XmlPath("foo/qux/text()")
    public String getQux() {
        return qux;
    }

    public void setQux(final String qux) {
        this.qux = qux;
    }

} 
```

**演示**

JAXB 运行时 API 用于读取/写入 JSON。

```
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String, Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Foo.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource("src/forum15659950/input.json");
        Foo foo = unmarshaller.unmarshal(json, Foo.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输入.json/输出**

```
{
   "foo" : {
      "bar" : {
         "baz" : "Hello"
      },
      "qux" : "World"
   }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)
*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)

# css - 如何获取浮动 div 中的内容以在浏览器调整大小时换行但不换行

> ID：15659956
> 
> 赞同：1
> 
> 时间：2013-03-27T13:24:37.260
> 
> 标签：css, css-float

我有 2 个 div 需要彼此相邻显示。第一个 div 只有一个数字，另一个是链接。当浏览器（Firefox 和 chrome）调整大小时，它会将第二个 div 放在新行上，然后换行。我希望第二个 div 的文本与第一个 div 内联。

这是我的代码

```
<html>
    <body>
        <style>

           .row {    
                    border: 1px solid yellow;
                    width: 100%;
                    overflow: auto; 
                }

          .cell {
                    float:left;    
                    border: 1px solid red;  
                }

        </style>

<div class="row">
    <div class="cell"><span>1</span></div>
    <div class="cell">
        <a>This is some text. This is some text. This is some text.
        This is some text. This is some text. This is some text.
        This is some text. This is some text. This is some text.
        This is some text. This is some text. This is some text.</a>
    </div>
</div>

</body>
</html> 
```

这是我在 Firefox 中得到的，但这不是我想要的 ![在此处输入图像描述](../Images/e07d89363c8ee9435ace9ae6af28f717.png)

这就是我在 IE 中得到的，这就是我想要的。 ![在此处输入图像描述](../Images/99193a0d3dd611703c060c77b590d9a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:45:29.683

您可以通过使用`display:table-cell`而不是浮点数来实现这一点：

```
.row {
    border: 1px solid yellow;
    display:table-row;
}
.cell {
    display:table-cell;
    border: 1px solid red;
} 
```

[在这里](http://jsfiddle.net/ZmNgh/)看小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:48:56.657

You're trying to float two block elements without giving them widths. A div is a block element (default = display: block;). That means that it will always stretch to width: 100% unless you specify its width. When trying to float two elements that are each width: 100%; they can't remain on the same line/row. (200% > 100% max);

# xcode - NSFilemanager fileExistsAtPath 总是失败

> ID：15659957
> 
> 赞同：1
> 
> 时间：2013-03-27T13:24:42.150
> 
> 标签：xcode, macos, cocoa, nsfilemanager

我使用 NSFilemanager 类来检查文件是否存在于我的 Mac OS 文件夹中。fileExistsAtPath 总是失败...帮我找出我的错误。谢谢

```
 NSURL* finalImageURL;

 NSURL* imageURL = [[plistURL URLByDeletingPathExtension] URLByAppendingPathExtension:@"png"];

 NSLog(@"Path: %@\n",imageURL.absoluteString); //Prints Path: /Users/MacAdmin/Desktop/gameover/sheet/SpriteSheet_GameOver-ipadhd.png

if ([[NSFileManager defaultManager] fileExistsAtPath:imageURL.absoluteString])
{
   printf("Exists\n");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T13:36:33.467

> 印刷`Path: /Users/Gururaj/Desktop/gameover/sheet/SpriteSheet_GameOver-ipadhd.png`

你确定吗？您似乎正在尝试使用 URL 的绝对字符串表示形式`file://`及其开头的模式。尝试更改`absoluteString`为`path`.

# ruby-on-rails-3 - Rspec + Url Helpers + custom_helper_spec

> ID：15659966
> 
> 赞同：0
> 
> 时间：2013-03-27T13:25:01.563
> 
> 标签：ruby-on-rails-3, rspec, rspec2, helper

我正在尝试测试帮助程序，但出现以下错误：

```
Admins::ProductsHelper
  #product_post_permission
    when product can do post
      creates cannot post link with green button (FAILED - 1)
    when product cannot do post
      creates can post link with red button (FAILED - 2)

Failures:

  1) Admins::ProductsHelper#product_post_permission when product can do post creates cannot post link with green button
     Failure/Error: helper.product_post_permission(@product)
     NoMethodError:
       undefined method `cannot_post_admins_product_path' for #<#<Class:0xc64a33c>:0xc65e24c>
     # ./app/helpers/admins/products_helper.rb:6:in `product_post_permission'
     # ./spec/helpers/admins/products_helper_spec.rb:13:in `block (4 levels) in <top (required)>'

  2) Admins::ProductsHelper#product_post_permission when product cannot do post creates can post link with red button
     Failure/Error: helper.product_post_permission(@product)
     NoMethodError:
       undefined method `can_post_admins_product_path' for #<#<Class:0xc64a33c>:0xc66f600>
     # ./app/helpers/admins/products_helper.rb:8:in `product_post_permission'
     # ./spec/helpers/admins/products_helper_spec.rb:24:in `block (4 levels) in <top (required)>' 
```

我已经在我的 spec_helper.rb 中包含了 Rails.application.routes.url_helpers 但它不起作用。

这是我的助手：

```
#app/helpers/admins/product_helper.rb
module Admins::ProductsHelper
  def product_post_permission(product)
    html = ""

    if product.can_post?
      html << post_permission_link(product, cannot_post_admins_product_path(product))
    else
      html << post_permission_link(product, can_post_admins_product_path(product), "btn-danger")
    end

    html.html_safe
  end

  private

    def post_permission_link(product, path, button_type = "btn-success")
      link_to path,
              method: :put,
              remote: true,
              id:     dom_id(product, :can_post),
              class: "btn btn-small #{button_type}" do
                "<i class='icon icon-lock icon-white'></i>".html_safe
      end
    end
end 
```

这是我的规格：

```
require 'spec_helper'

describe Admins::ProductsHelper do

 describe "#product_post_permission" do
   context "when product can do post" do
     before(:each) do
       @product = FactoryGirl.create(:product)
     end

     it "creates cannot post link with green button" do
       helper.should_receive(:post_permission_link)
       helper.product_post_permission(@product)
     end
   end

   context "when product cannot do post" do
     before(:each) do
       @product = mock_model(Product, can_post?: false)
     end

     it "creates can post link with red button" do
       helper.should_receive(:post_permission_link)
       helper.product_post_permission(@product)
     end
   end
 end

end 
```

这里是我的路线：

```
namespace :admins do
  resources :dashboard, only: [:index]
  resources :users,     only: [:show, :edit, :update, :index]
  resources :products,  only: [:show, :edit, :update, :index, :new, :create] do
    member do
      put 'can_post'
      put 'cannot_post'
      put 'publish'
      put 'unpublish'
    end
  end
end 
```

我正在使用 Rails 3.2.13 和 Rspec-Rails 2.13。提前致谢。

# macos - 如何在 Mac 上使用 pkgbuild 和 productbuild 运行 postflight 脚本构建安装包

> ID：15659973
> 
> 赞同：5
> 
> 时间：2013-03-27T13:25:20.530
> 
> 标签：macos, installation, productbuild, pkgbuild

我想为 Mac OS X 构建一个包含 4 个子包的安装包。子包是用 pkgbuild 构建的。最终的包是用 productbuild 构建的，使用 Distribution.xml 用于欢迎和许可文本以及安装位置选择。

现在我想在安装成功后运行一个脚本。特别是在所有打包的收据都由安装人员写好之后。

据我了解手册页和文档以及其他有用的链接，我应该为此使用 postflight 脚本。不幸的是，我无法让它工作。我将它命名为 postflight 并使用 --script 选项将其添加到带有 pkg​​build 的子包中，但似乎 pkgbuild 不支持 postflight 脚本。当我将它命名为 postinstall 时，它会运行，但不幸的是在写收据之前。

我需要在写完收据后运行，因为我想使用 pkgutil 工具为 XCode 编写一个 xcconfig 文件，其中包含其他软件包安装位置的位置。

我已经尝试通过将 Scripts/ 文件夹添加到扩展的 pkg 来使用 expand-flatten hack，但是在我展平它之后似乎被忽略了。

有没有办法满足我的需求？（将我的包的选定安装位置写入子包安装位置的文件中）

如果可能的话，我想避免使用已弃用的 packagemaker 工具，至少如果有另一种更好的方法的话。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:19:39.003

正如我最后不得不发现的那样，飞行后脚本也在写收据之前执行。所以我对这个问题的解决方案现在如下：

我将安装后脚本添加到我的包中，这些脚本读取由 Mac OS 安装程序设置的 DSTROOT 环境变量，并将它们写入共享临时文件夹中的文件：

```
echo "${DSTROOT}" > "${SHARED_INSTALLER_TEMP}/my_install_location" 
```

然后在我的包中，需要这些信息，我通过安装后脚本读取旧收据（如果子包已经安装并且用户“重新安装”而忽略了一些子包），然后是另一个临时文件包裹。

因此，如果软件包已安装且未重新安装，它将使用当前安装位置，否则它将通过临时文件使用新安装位置。如果没有任何内容，则未安装所需的软件包，因此我使用默认值并将它们写入 xcconfig 文件（这可能不起作用）：

```
pkgutil --pkg-info-plist my.package.bundle > "${SHARED_INSTALLER_TEMP}/tmp.plist"
if [ -e "${SHARED_INSTALLER_TEMP}/tmp.plist" ];
then
    MY_PACKAGE_VOL=`/usr/libexec/PlistBuddy -c "Print :volume" "${SHARED_INSTALLER_TEMP}/tmp.plist"`
    MY_PACKAGE_DIR=`/usr/libexec/PlistBuddy -c "Print :install-location" "${SHARED_INSTALLER_TEMP}/tmp.plist"`      
    MY_PACKAGE_DIR="${MY_PACKAGE_VOL}${MY_PACKAGE_DIR}"
fi 
```

阅读“旧”安装位置后，我使用之前从其他包中写入的临时文件检查是否有新的安装位置：

```
if [ -e "${SHARED_INSTALLER_TEMP}/my_install_location" ];
then
    MY_PACKAGE_DIR=`cat "${SHARED_INSTALLER_TEMP}/my_install_location"`
fi 

...
Write the xcconfig file...
... 
```

如果有人有更好的解决方案，请告诉我。

# android - 无论用户在做什么都会弹出对话框

> ID：15659974
> 
> 赞同：2
> 
> 时间：2013-03-27T13:25:23.730
> 
> 标签：android, android-intent, android-activity

我希望这不是类似问题的重复，但找​​不到任何对我有帮助的东西。

我正在创建一个简单的鸡蛋计时器，效果很好。虽然我正在努力做一件事。当计时器用完时，会启动警报并弹出显示为对话框的活动。虽然只有当我打开应用程序时才会发生这种情况。如果我打开另一个应用程序并且警报响起，则不会发生任何事情。

所以我的问题是，无论用户在做什么，如何让对话框弹出？

目前，我显示对话框的方法如下所示：

```
private void ShowTimesUp(){
    Intent dialogIntent = new Intent(getBaseContext(), TimesUpDialog.class);
    dialogIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivityForResult(dialogIntent, 1);
} 
```

清单如下所示：

```
 <activity android:name=".Home"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>

    <activity android:name=".TimesUpDialog" android:theme="@android:style/Theme.DeviceDefault.Dialog"></activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:47:40.513

尝试这个：

```
public static final int TIMEOUT = 60 * 1000; 
```

...

```
Intent dialogIntent = new Intent(getBaseContext(), TimesUpDialog.class);
    dialogIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

PendingIntent intent = PendingIntent.getActivity(YourApplication.getInstance().getBaseContext(), 0,
            dialogIntent, dialogIntent.getFlags());

AlarmManager mgr = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
mgr.set(AlarmManager.RTC, System.currentTimeMillis() + TIMEOUT, intent); 
```

我认为您不需要任何其他计时器逻辑。

PS：我没有测试这个，希望它有帮助。

**编辑：以下评论中提到的问题的可能解决方案**

> *现在我只是想知道是否可以从 AlarmManager 启动的意图中获得结果？*

上面的代码应该改成这样：

```
Intent startApplicationIntent = new Intent(getBaseContext(), MainActivity.class);
    dialogIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startApplicationIntent.putExtra(START_DIALOG, true);

PendingIntent intent = PendingIntent.getActivity(YourApplication.getInstance().getBaseContext(), 0,
            startApplicationIntent, startApplicationIntent.getFlags());

AlarmManager mgr = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
mgr.set(AlarmManager.RTC, System.currentTimeMillis() + TIMEOUT, intent); 
```

现在在您`MainActivity`的`onStart()`方法中，您可以执行以下操作：

```
boolean startDialog = getIntent().getBooleanExtra(START_DIALOG, false);
if (startDialog) {
    Intent dialogIntent = new Intent(MainActivity.this, TimesUpDialog.class);
    startActivityForResult(dialogIntent, REQUEST_CODE_CONSTANT);
} 
```

哪里`START_DIALOG`是定义意图额外值键的字符串常量，并且 `MainActivity`是启动器活动。

希望这对你有用。

# sql-server - 内存数据库速度较慢 - 从数据库中检索数据

> ID：15659978
> 
> 赞同：1
> 
> 时间：2013-03-27T13:25:28.787
> 
> 标签：sql-server, in-memory-database, brightstardb

我一直在尝试为我的项目评估 BrightStar DB，最初我所做的是 -

使用 brightstar DB (server sw) 我将我的 SQL Server 数据库表存储到它的默认存储中，即文件位置 ( `C:\Program Files\BrightstarDB\Data`)，然后为了测量与 SQL Server 数据库相比的性能提升，我尝试在内存和 SQL Server 中查询一个表并尝试加载到gridview。

令我惊讶的是，我可以看到直接从 SQL Server 加载数据所花费的时间是内存数据库的一半。我不知道这是否是检查性能的正确方法 - 如果有人在内存中工作过，请指导。

下面是用于直接从 SQL Server 加载的代码，在内存中我点击了这个链接[http://brightstardb.com/documentation/Developing_With_BrightstarDB2.html](http://brightstardb.com/documentation/Developing_With_BrightstarDB2.html)。

```
protected void BtnDatabase_Click(object sender, EventArgs e)
{
        try
        {
            GridView2.DataSource = null;

            TDNdc = TextBox1.Text;
            if (!string.IsNullOrEmpty(TDNdc))
                selectCommand = "select * from dbo.TD_List where ID='" + TDNdc + "'";

            String connectionString = @"data source=TD-abc\SQLEXPRESS;initial catalog=ScriptSave;integrated security=True";
            DateTime varDateTime = DateTime.Now; 
            dataAdapter = new SqlDataAdapter(selectCommand, connectionString);
            // Create a command builder to generate SQL update, insert, and 
            // delete commands based on selectCommand.
            SqlCommandBuilder commandBuilder = new SqlCommandBuilder(dataAdapter);
            // Populate a new data table and bind it to the BindingSource.
            DataTable table = new DataTable();
           // table.Locale = System.Globalization.CultureInfo.InvariantCulture;
            dataAdapter.Fill(table);
            TimeSpan result = DateTime.Now - varDateTime;
            GridView2.DataSource = table;
            GridView2.DataBind();

            Response.Write("Time Taken to load " + GridView2.Rows.Count + " Record(s) From DB : " + result);
            //LblInMem.Text = GridView2.Rows.Count + " Record(s) From DB : " + result;  
            //Response.Write("Time Taken to load datafrom DataBase " + result.ToString() + "Total Record :" + GridView2.Rows.Count);
        }
        catch (SqlException)
        {
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T13:02:32.673

我认为这里有一个误解。BrightstarDB 不是内存数据库——事实上，它是一个完全事务性的持久数据存储。因此，您仍然需要支付磁盘访问费用。在我的测试中，我发现 BrightstarDB 通常是磁盘绑定的……在快速磁盘/SSD 上运行它确实有助于提高性能，尽管我猜你会发现 SQL Server 也是如此。

正如 alroc 所提到的，我认为您最好对应用程序将使用的查询类型进行基准测试，并平衡性能考虑与 BrightstarDB 提供的其他功能，您可能（或可能不会）决定是否超过特定类型的性能损失询问。

您还应该考虑使用 SPARQL 而不是 LINQ 来编写 BrightstarDB 查询。使用 LINQ 会导致性能损失，因为 LINQ 查询在执行之前会转换为 SPARQL。

# java - JAVA - 如何计算用户输入的一个月的最后一天

> ID：15659981
> 
> 赞同：4
> 
> 时间：2013-03-27T13:25:40.420
> 
> 标签：java

如果用户输入一个月的数值 1-12，我该如何更改下面的代码，以便输出用户输入的该月的最大天数。

```
import java.util.*;

public class LastDay {
public static void main(String[] args) {
    Scanner scanner = new Scanner(System.in);       
    GregorianCalendar cal = new GregorianCalendar();

    int myMonth;

    System.out.println("Enter the month number (1-12): ");
    myMonth = scanner.nextInt();

    System.out.println("Maximum number of days is: " + Calendar.getInstance().getActualMaximum(Calendar.DAY_OF_MONTH));     
} 
```

}

目前它输出我们目前（三月）所在月份的最大天数。我希望它为用户输入的 myMonth 值执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T13:28:11.470

> 目前它输出我们目前（三月）所在月份的最大天数。

`Calendar.getInstance()`返回当前时间，因此返回当前月份。你应该：

```
 Calendar calendar = Calendar.getInstance();
 calendar.set(Calendar.MONTH, myMonth - 1);
 int actualMax = calendar.getActualMaximum(Calendar.DAY_OF_MONTH); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:32:59.370

如果你使用尤达时间它更简单：

```
DateTime last = new DateTime().
                withMonthOfYear(myMonth).
                dayOfMonth().withMaximumValue(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:29:07.077

创建一个新的日历对象并将其月份设置为用户输入的值 -1（因为月份在日历中以 0 开头。）

然后获取该日历的 ActualMaximum

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T13:32:00.407

答案更像是前两个答案的组合。

例如，要获得二月的最大天数，*myMonth*将等于 2

```
public static void main(String[] args){
    int myMonth = 2;
    Calendar c = Calendar.getInstance();
    c.set(Calendar.MONTH, myMonth - 1);
    System.out.println(c.getActualMaximum(Calendar.DAY_OF_MONTH));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T13:35:23.367

您必须设置前一个月：

```
GregorianCalendar cal = new GregorianCalendar();
cal.set(Calendar.MONTH, myMonth - 1);

System.out.println("Maximum number of days is: " + cal.getActualMaximum(Calendar.DAY_OF_MONTH)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-27T13:48:39.237

```
 import java.util.*;

   public class LastDay {

       public static void main(String[] args) {
      Scanner scanner = new Scanner(System.in);       
      GregorianCalendar cal = new GregorianCalendar();

      int myMonth;

      System.out.println("Enter the month number (1-12): ");
      myMonth = scanner.nextInt();

      Calendar calendar = Calendar.getInstance();   
      calendar.set(Calendar.YEAR, myMonth-1, Calendar.DATE);

      System.out.println("Maximum number of days is: " + calendar.getActualMaximum(Calendar.DAY_OF_MONTH));     
} 
```

}

# powershell-3.0 - 在单个模块清单中混合来自程序集和 psm1 的 cmdlet

> ID：15659982
> 
> 赞同：1
> 
> 时间：2013-03-27T13:25:53.763
> 
> 标签：powershell-3.0, cmdlets, powershell-module

我有一个 C# 项目，其中包含一些自定义 cmdlet 和一个加载它们的模块清单，将程序集指定为 RootModule（我使用的是 PowerShell 3.0）。

我需要添加一些写在 psm1 文件中的 cmdlet，并且我想在同一个 ModuleManifest 中导出它们。

例如，如果模块名为 MyModule，我在 MyModule.psd1 中尝试了类似的操作：

```
RootModule = '.\MyModule.dll'
...
NestedModules = @('MyModule\MyModule.psm1') 
```

所有文件（MyModule.psd1、MyModule.dll 和 MyModule.psm1）都包含在由 PSModulePath 字符串引用的路径中的 MyModule 目录中。

该模块已加载程序集中的所有 cmdlet，但我无法从 .psm1 文件中看到导出的函数（Export-ModuleMember -Function "*"）。我想做的事有可能吗？如果是，如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:36:15.567

从`MyModule.psd1`角度来看，当前文件夹是您保存所有文件的文件夹，因此一旦您`MyModule`从`Nestedmodules`路径中删除（不存在）文件夹，它就应该可以工作。

# c++ - Windows 7 64 位 c++ malloc 失败

> ID：15659983
> 
> 赞同：2
> 
> 时间：2013-03-27T13:25:54.403
> 
> 标签：c++, malloc, windows-7-x64

我有一个小型**c++**程序无法分配超过 2880 个`malloc`. 该声明：

```
void* tmpptr = malloc(2881); 
```

崩溃，同时

```
void* tmpptr = malloc(2880); 
```

没有。**_** 每次！

我正在使用 MinGW 并使用

```
g++ -std=c++0x -pedantic -Wall -Wextra -g -D_GLIBCXX_DEBUG -static-libgcc -static-libstdc++ 
```

我知道`malloc`在 C++ 中不鼓励使用 of ，并且无论如何我都打算重写它，但我仍然想知道为什么这不起作用。当我用 gcc 编译它时，相同的代码一直在工作。

更新：这是主要的函数调用：

```
image * img = readPPM("pic/pic.ppm");
bw_image * sky = skyline(img, ref);
cont * lin = contour(sky, 0); // <-- chash
... 
```

函数开始于：

```
#include <cstdlib>
cont * contour(const bw_image * img, const char wrap) {
    int test = 2880;
    void* ptr1 = malloc(test);
    void* ptr2 = malloc(test);
... 
```

现在第一个`malloc`可以工作，但第二个不行。如果我改变`test = 1440;`，同样的结果。但; 因为`test = 140;`第一个已经`malloc`失败了。

我已经单独尝试了代码：

```
int main(int argc, char *argv[]) {
    int size = 2881;
    void* tmpptr;
    printf("Allocating, %d\n", size);
    tmpptr = malloc(size);
    printf("Allocated %d bytes successfully\n", size);
} 
```

它可以毫无问题地工作，所以它似乎是在`main`做这件事。

`rem_artifacts`看起来像这样

```
void rem_artifacts(bw_image * sky) {
    for (int y = 0; y < sky->y; ++y) for (int x = 0; x < sky->x; ++x) {
        int xp = x - 1, xn = x + 1;
        if (xp < 0) xp = sky->x - 1;
        if (xn == sky->x) xn = 0;
        int c = sky->data[x][y];  // this is wrong
        if (
            (y == 0 || sky->data[x][y-1] != c) &&  // and this
            (y == sky->y-1 || sky->data[x][y+1] != c) && // and this
            sky->data[xp][y] != c &&  // and this
            sky->data[xn][y] !=c  // and this
        ) sky->data[x][y] = !c; // and this
    }
}
bw_image * skyline(const image * img, const image * ref) {
    double tilt = 114.0 - 90.0;
    double pi = 3.14159265358979323846;
    double chang = 360.0 / 2.0 / pi;
    //double sint = sin(tilt / chang);
    //double cost = cos(tilt / chang);
    bw_image * sky = (bw_image*)malloc(sizeof(bw_image));
    sky->x = img->x;
    sky->y = img->y;    //  
    double cos30 = sqrt(3)/2;
    int lim0 = (int)((double)(img->y) / 2.0 + (double)(img->x) * tan(tilt/chang) * cos30);
    sky->data = (char**)malloc(sizeof(char*) * sky->y);
    for (int y = 0; y < sky->y; ++y) {
        sky->data[y] = (char*)malloc(sizeof(char) * sky->x);
        for (int x = 0; x < sky->x; ++x)
            sky->data[y][x] = !(y < lim0 && colour_dist_sq(img->data[y][x], ref->data[y][x]) < 5000.0);
    }
    rem_artifacts(sky);
    return sky;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:47:18.603

谢谢大家，

事实证明，我是在分配的内存之外写的（有点混淆了 ax 和 y）。奇怪的是，尽管该程序一直运行到现在（24/7 持续了好几个月）并且按照我的期望运行。它可以解释一些我无法解释的奇怪事情。

现在我无论如何都会用标准的 C++ 内存分配重写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:46:08.290

It looks to me like your heap is getting corrupted somewhere else in your program (probably during that big loop in `main`. The first thing you can do is start turning on warnings `-Wall` and `-Wnon-virtual-dtor` at a very minimum and then fixing them.

If you have access to Linux your best bet is to run this under valgrind and be amazed as it tells you exactly where you're overwriting memory.

Alternately if you have access to Purify ($$$) on Windows that may be able to help you as well. There are also memory checking malloc libraries available you may be able to use.

If none of those tools are available you're going to have to do diagnostics yourself by trying to remove sections of code and see if it still crashes or not.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:00:39.063

如果我敢猜测，那是您没有正确分配`sky->data`或其子指针。

这必须分两步完成：

1.  首先分配`sky->data`：

    ```
    sky->data = new char*[some_x_size]; 
    ```

2.  然后你必须分别分配所有子数组：

    ```
    for (int x = 0; x < some_x_size; x++)
        sky->data[x] = new char[some_y_size]; 
    ```

您当然可以使用`malloc`而不是`new`.

释放数据时，您会以相反的方式进行操作：首先释放循环中的每个子数组，然后释放主数组。

# mysql - MySQL 多个进程选择相同的数据

> ID：15659985
> 
> 赞同：2
> 
> 时间：2013-03-27T13:26:03.730
> 
> 标签：mysql, select, stored-procedures, locking, multiple-processes

我有多个进程运行完全相同的脚本，问题是它们选择了相同的数据。我有一个标志“in_use”，被选中后设置为1，但是其他进程太快并且在脚本本身能够将所有数据更新为in_use = 1之前选择相同的数据。我该怎么办，也许在查询内部，确保永远不会选择相同的数据？以某种方式锁定它？

现在我为每个进程更新 in_use ，但它不够快或不够安全。

```
DELIMITER //

DROP PROCEDURE IF EXISTS `getDomainsForWhois`;

CREATE PROCEDURE `getDomainsForWhois`(
    IN in_tld VARCHAR(10), 
    IN in_max_limit INT
) 

BEGIN 
    SELECT 
        d.domainID, 
        CONCAT(SUBSTRING_INDEX(REPLACE(d.domainName, LOWER(d.tld), ''), '.' , -1), LOWER(d.tld)) as domainName, 
        d.tld 
    FROM 
        Domains d 
    WHERE (
        d.parentDomainID IS NULL 
    AND 
        d.tld = in_tld 
    AND 
        d.dateFetched <= DATE_SUB(CURRENT_TIMESTAMP(),INTERVAL 1 DAY) 
    AND 
        d.in_use = 0 
    ) 
    GROUP BY 
        domainName 
    ORDER BY 
        d.dateFetched ASC 
    LIMIT 
        0,in_max_limit
    FOR
        UPDATE;
END// 
```

这基本上就是我运行脚本的方式。此脚本从多个进程（cron）同时运行：

```
domains=`mysql -u USER -pPASSWORD DBNAME --skip-column-names -e "LOCK TABLE Domains WRITE; CALL getDomainsForWhois('.$1', $2)"`;
while read domainID domainName domainTld
do
        mysql -u USER -pPASSWORD DBNAME -e "UPDATE Domains SET in_use = 1 WHERE domainID = $domainID";
done << EOF
$domains
EOF

mysql -u USER -pPASSWORD DBNAME -e "UNLOCK TABLES;"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:28:07.177

可能会考虑锁定表格

[http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)

所以在 SELECT 你做之前

```
LOCK TABLE Domains WRITE; 
```

在你这样做之后

```
UNLOCK TABLES; 
```

# asp.net - 从 gridview 行命令下载文件

> ID：15659991
> 
> 赞同：2
> 
> 时间：2013-03-27T13:26:17.563
> 
> 标签：asp.net, vb.net, download, response

我编写了以下代码来处理应该在 Gridview.RowCommand 上发生的文件下载。它适用于我使用过的其他地方（gridview 或类似控件之外的链接按钮）。

此 Gridview 位于 UpdatePanel 内。

```
Protected Sub gvBikeInsurance_RowDataBound(sender As Object, e As GridViewRowEventArgs) Handles gvBikeInsurance.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim ibtnExportToPDF As ImageButton = TryCast(e.Row.FindControl("ibtnExportToPDF"), ImageButton)
        ScriptManager.GetCurrent(Me).RegisterPostBackControl(ibtnExportToPDF)

        Dim btnDelete As LinkButton = TryCast(e.Row.Cells(e.Row.Cells.Count - 1).Controls(0), LinkButton)
        btnDelete.OnClientClick = "return confirm('Are you sure you want to delete this insurance item');"
    End If
End Sub

Protected Sub gvBikeInsurance_RowCommand(sender As Object, e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles gvBikeInsurance.RowCommand

    Select Case e.CommandName
        Case "PDFExport"
            exportPolicy(e.CommandArgument)
    End Select
End Sub

Private Sub exportPolicy(ByVal BikeInsuranceID As Integer)
    Dim args As New List(Of MySqlParameter)
    args.Add(New MySqlParameter("xbikeinsuranceid", MySqlDbType.Int32))
    args(args.Count - 1).Value = BikeInsuranceID

    Dim dr As MySqlDataReader = db.execDB("InsuranceFiles_Select", CommandType.StoredProcedure, args.ToArray(), GeneralFunctions.ReturnType.DataReader, False)

    Dim output() As Byte
    If dr.HasRows Then
        dr.Read()
        output = dr("filedata")
    End If
    dr.Close()

    Dim outputstr As String = Text.Encoding.ASCII.GetString(output)

    Response.Clear()
    Response.ClearHeaders()
    Response.ContentType = "application/pdf"
    Response.AddHeader("Content-Disposition", String.Format("attachment;filename={0}", "Policy Schedule.pdf"))

    HtmlToPdf.ConvertHtml(outputstr, Response.OutputStream)

    Response.End()
End Sub 
```

系统从表单中捕获用户信息并用它编写 HTML。该 HTML 用于创建一个 PDF 文件，然后应该自动下载该文件。

问题是该文件似乎没有被下载，除非我通过调试器逐步运行它。标准执行只显示 UpdateProgress 内容，该内容会在一段时间后消失。

这里的代码有什么问题吗？尤其是在 RowDataBound 和 RowCommand 例程以及响应的生成中。

任何帮助将不胜感激。

**编辑**

刚刚在 Chrome 的控制台中发现了这个错误：

> 未捕获的 Sys.WebForms.PageRequestManagerParserErrorException：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:30:21.893

事实证明，虽然可能不是最佳实践（我听从经验丰富的开发人员对此提出异议），但我的代码确实有效。

至少它会起作用，如果我在我的 RowDataBound 子上注册回发控件时使用的是 a`ToolkitScriptManager`而不是 a ：`ScriptManager`

```
Protected Sub gvBikeInsurance_RowDataBound(sender As Object, e As GridViewRowEventArgs) Handles gvBikeInsurance.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim ibtnExportToPDF As ImageButton = TryCast(e.Row.FindControl("ibtnExportToPDF"), ImageButton)
        ToolkitScriptManager.GetCurrent(Me).RegisterPostBackControl(ibtnExportToPDF)

        Dim btnDelete As LinkButton = TryCast(e.Row.Cells(e.Row.Cells.Count - 1).Controls(0), LinkButton)
        btnDelete.OnClientClick = "return confirm('Are you sure you want to delete this insurance item');"
    End If
End Sub 
```

当您将它添加到您的页面/母版页时，您将决定使用哪个。请注意，如果您使用 AJAX Control Tookit .NET 3.5 中的控件，则必须使用`ToolkitScriptManager`

供参考，[ScriptManager 和 ToolkitScriptManager的区别](https://stackoverflow.com/questions/6348589/difference-between-script-manager-and-toolkit-script-manager)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:19:46.553

我相信这是因为您的应用程序正在尝试在 updatePanel 中使用响应方法。这将失败有几个原因： [http ://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx](http://weblogs.asp.net/leftslipper/archive/2007/02/26/sys-webforms-pagerequestmanagerparsererrorexception-what-it-is-and-how-to-avoid-it.aspx)

最值得注意的是，在您的示例中，这是由于更新面板。

相反，您可以让更新面板打开一个开始下载的页面，如下所示：

```
Private Sub exportPolicy(ByVal BikeInsuranceID As Integer)

 'store what you need to create the file in session variables
 Session("fileName") = foundAttachment.FileName
 Session("documentType") = foundAttachment.DocumentType
 Session("byteArray") = byteArray

'this registers a Javascipt function with the page.  You need to create a page Called "Download.aspx"
 ScriptManager.RegisterStartupScript(Me.UpdatePanel1, Me.GetType, "ShowPopup", "window.open('DownloadPage.aspx');", True)
End Sub 
```

现在，在您的 DownloadPage.Aspx 页面中：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If (Not IsPostBack) Then
        Dim fileName As String = Session("fileName")
        Dim docType As String = Session("documentType")
        Dim byteArray() As Byte = Session("byteArray")

        If (byteArray.Length > 0) Then
            Dim ms As MemoryStream = New MemoryStream(byteArray)
            Dim sw As StreamWriter = New StreamWriter(ms)

            Response.Clear()
            Response.AddHeader("Content-Disposition", "attachment; filename=" & fileName)
            Response.ContentType = docType
            Response.BinaryWrite(byteArray)
            Response.End()
            Response.Flush()
        End If

    End If
End Sub 
```

在我的示例中，我使用 byteArrays 创建文件，但您可以使用所需的任何方法。

# objective-c - Z平面上的投影点坐标

> ID：15659994
> 
> 赞同：1
> 
> 时间：2013-03-27T13:26:26.843
> 
> 标签：objective-c, language-agnostic, geometry, projection

我一直在努力解决这个（显然很简单）的问题：

*   我有一个点（实际上是一个鼠标点，可以捕捉和移动二维几何中的顶点），它有一些坐标，比如说平面 z = 0 上的 x 和 y。
*   我希望能够通过将我的 2D 平面移动到特定的 Z 来缩放/取消缩放我的几何图形。
*   为了能够用鼠标拖动我的几何点（点 (x, y)），程序需要在 z = 0 处接收顶点坐标，即使平面在 z = -2 处也是如此。例如。

我搜索了很多关于投影并尝试遵循这些：

*   [http://ogldev.atspace.co.uk/www/tutorial12/tutorial12.html](http://ogldev.atspace.co.uk/www/tutorial12/tutorial12.html)
*   [http://paulbourke.net/miscellaneous/lens/](http://paulbourke.net/miscellaneous/lens/)

但我无法得到我想要的...

这是我的代码（在 Obj-C 中），但它与语言无关：

```
 double width = context.bounds.size.width;
    double height = context.bounds.size.height;

    double alpha = 2\. * atan((height / 2.) / fabs(self.inputZ));

    projectedX = self.inputX / (self.inputZ * tan(alpha / 2.));
    projectedY = self.inputY / (self.inputZ * tan(alpha / 2.)); 
```

对于这个简单的问题，我将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:37:20.463

看看我[在这里](https://stackoverflow.com/a/13881026/1219956)的回答。有一个移植的 glu 函数可以将点投影到屏幕坐标。如果您不使用 GLK 函数，您可以将其编辑为您正在使用的任何内容，否则导入 glkit 以使用它们的数学函数，以便您可以按原样使用它。

# c# - RichTextBox 在文本中间添加一些文本

> ID：15659995
> 
> 赞同：0
> 
> 时间：2013-03-27T13:26:30.667
> 
> 标签：c#, forms, richtextbox

我有一个`RichTextBox`，我想`add some text`在`middle`的`text`。例如我得到这个文本：

> “第一个文本第二个文本”

我想在`"FirstText" and the "SecondText".` 我尝试过的文本之间添加一些文本，`split the text to 2 strings`并将我的额外文本添加到第一个文本中，然后将第二个字符串添加到他。它有效，但它破坏了我的richTextBox1.SelectionColor`(I got color...).` 那么如何在不剪切我的情况下添加文本`richTextBox1.Text`或如何保存所有颜色数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:36:07.767

您必须自己找到起始索引：

```
int index = richTextBox1.Text.IndexOf(" ");
if (index > -1) {
  richTextBox1.Select(index, 1);
  richTextBox1.SelectedText = " Inserted Text ";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:37:37.487

你熟悉起始位置和结束位置吗？你可以简单地做这样的事情

```
richTextBox1.SelectionStart = index;
richTextBox1.SelectionLength = length;//you need to assign an integer where to start
richTextBox1.SelectedText =  "Good"; 
```

它将用单词“Good”替换您指定长度的文本中的任何位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T13:34:10.030

检查这篇[文章](https://stackoverflow.com/questions/850716/append-text-to-the-beginning-in-the-rich-text-box)。

您可能需要将**SelectionStart**的值更改为要放置新文本的位置。

如果你需要找到正确的索引，你可以使用这样的东西：

```
 startIndex = richTextBox1.Find(expressionToFind, 0,
                            richTextBox1.Text.Length,
                            RichTextBoxFinds.WholeWord); 
```

希望能帮助到你。

# vhdl - 无法解决多个常量驱动程序 VHDL 错误

> ID：15659997
> 
> 赞同：0
> 
> 时间：2013-03-27T13:26:39.050
> 
> 标签：vhdl

我在 VHDL 中遇到与多个常量驱动程序相关的错误，在这里我正在上传代码的图像............在我的代码中 cmp 是一个组件，我想在对于 a = Nx-Ny 到 a = 0 的生成语句.......但是在

> a = Nx-Ny => tempx = ipx(Nx-1 downto Nx-Ny)
> 否则 tempx = tempz(Ny-2 downto 0) & ipx(a)

为此，我使用了 when - else 语句，但我有错误......

![在此处输入图像描述](../Images/6432dc4bd6ce76151dc632b3a26a5f87.png)

> 错误：错误 (10028)：无法解析 ArrayDivider.vhd(44) 处网络“tempx [0]”的多个常量驱动程序（在图像中的选定行上）
> 错误：无法详细说明顶级用户层次结构

请问有什么解决办法？？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:21:14.750

该错误告诉您 tempx[0] 上有多个驱动程序。

在您发布的代码中，只有一个对 tempx 的条件赋值。

但是，它嵌入在`for ... generate`声明中。

这意味着您可能会生成它的多个副本，具体取决于 nx,ny 的值。因此错误。

编辑

您发布的是难以阅读的小图片而不是实际的 VHDL 代码，这无济于事。请使用您的代码编辑问题。

同时，我*想*我可以看到您正在生成一组不同的模块（Cmp？）并为每个模块提供不同的输入信号。

但是，您**不能**同时在同一个信号上驱动所有这些信号！这就是工具告诉你的。您需要的是一个信号**数组**，由生成变量 a 索引。

```
subtype temp is std_logic_vector(N downto 0);
signal Tempx : array(Nx-Ny downto 0) of temp;
...

for a in ... generate
   tempx(a) <= (whatever expression you have now);
   Cmpa : generic map (...) port map (tempx(a), ...);
end generate; 
```

现在，显然，数组的每个成员只有一个驱动程序，消除了多个驱动程序错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:38:25.567

请注意，您的 for/generate 结构不是循环！此语句导致您在 for/generate 结构中描述的逻辑的多种实现 ((Nx-Ny)+1)。因此，您确实有多个 tempx 驱动程序。这已在此处的评论中提到：在此处 [输入链接描述](https://stackoverflow.com/questions/15586375/vhdl-error-related-to-concatination-of-variable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T10:58:52.270

对 tempx 的赋值，对每个循环使用相同的 tempx。这导致对同一信号进行多次分配。如果将信号声明移动到生成块中（在生成和开始之间），那么每个循环都有一个专用的 tempx 信号。

```
for a in ... generate
   signal tempx : std_logic_vector(Ny-1 downto 0);
begin
   tempx <= (whatever expression you have now);
   Cmpa : generic map (...) port map (tempx, ...);
end generate; 
```

结果类似于使用数组的方法。

# google-apps-script - 表单提交后动态更新单元格

> ID：15659998
> 
> 赞同：0
> 
> 时间：2013-03-27T13:26:50.567
> 
> 标签：google-apps-script

我正在尝试根据代码创建一个用户列表，简单地说，我们有一个系统，我们学校的每个成员都有一个分配的代码，有了这个代码，我可以通过在我们的网站上制作一些正则表达式来获取他们的姓名和电子邮件（基本上是数据挖掘）。

这个想法是只输入这个用户代码（比如说 0123456），一个脚本将从网站获取数据并填充相邻的列值。该脚本必须在*on form subit*触发器上运行，因此它仅在需要时更新。

我已经成功实现了数据收集系统，但我在填充相邻单元格时遇到了困难。

```
// this function is called when form is submitted
function onNewEntry(e)
{
  // get the code (cell 0 is the timestamp)
  userCode = e.values[1];

  // add values and return
  return e.values.concat(["name", "e-mail"]);
} 
```

我希望脚本用“名称”和“电子邮件”更改列 C 和 D 中的单元格，但没有任何反应。有人可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:45:54.190

此函数在表单提交时触发，将在 C 和 D 列写入数据

（我用 xx 和 yy 只是为了说明）

```
function myFunction(e) {

var sh = SpreadsheetApp.getActiveSpreadsheet().getSheets()[0];

var last = sh.getLastRow()

sh.getRange(last,3,1,2).setValues([['xx','yy']])
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:06:42.577

Range.setValues([Array]) 是您的解决方案。请注意 setValues(...) 中的“s”。

[https://developers.google.com/apps-script/reference/spreadsheet/range#setValues(Object)](https://developers.google.com/apps-script/reference/spreadsheet/range#setValues(Object))

另外，我没有对此进行测试，但我认为对象（e）不是指实际的单元格，而是提交数据的副本。如果要修改或附加到结果，我认为您需要打开工作表并获取范围。