# StackOverflow 问答 15237000-15237999

# artificial-intelligence - 模拟退火中的能量

> ID：15237000
> 
> 赞同：0
> 
> 时间：2013-03-06T00:49:09.680
> 
> 标签：artificial-intelligence, simulated-annealing

能量变量在模拟退火算法中代表什么？我猜它类似于 GA 中的适应度变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:34:17.117

我没有看到 SA 中的能量与 GA 中的健康之间存在明确的关系。

SA 中的能量定义了下一次迭代的搜索空间：随着能量变量的缩小，搜索空间的体积也随之缩小。例如，如果你正在做某种音乐搜索并且你有一个音符是“C”，那么高 SA 能量可能允许该值变成从“A”到“G”的任何值，而低 SA 能量可能只允许该值变为降 C 或升 C。

在 GA 中，搜索空间由给定基因型位置的值的熵定义。因此，如果在您的音乐搜索中的位置 1，每个人都有一个“C”音符，那么孩子们将在该位置有一个“C”（除非发生突变），并且在解决方案空间中沿着该维度没有真正的搜索。但是，如果基因型中位置 2 的值同样是“A”-“G”，则搜索空间非常大。

GA 中的适应度只是完整解决方案的质量。它是对个人的描述，而不是下一次迭代的参数（间接除外，因为它会影响选择）。所以我只是看不到任何好的概念映射到 SA 能量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:02:46.653

是的，它与遗传编程或遗传算法中的适应度函数非常相似。系统的能量 (E) 从某个任意高能状态开始。每一步都会对能量进行评估，系统会尝试转移到较低的能量状态。

一开始，当系统具有较高的“温度”时，允许较大的逆最优状态移动，以便系统可以避开局部最大值。在许多步骤中，温度会降低（希望能级也是如此）。

有很多关于模拟退火的好文章。这是一个很好的PPT概述：[链接](http://www.ecs.umass.edu/ece/labs/vlsicad/ece665/slides/SimulatedAnnealing.ppt)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-19T17:57:25.233

在模拟退火中，一个点的能量 (E) 决定了它被接受为解决方案的概率。当温度参数高时，算法以随机方式接受具有低能量或高能量的新解。当温度低时，算法接受能量低的新解。

在典型的实现中，算法会随着迭代的通过而降低其温度参数。这引发了从随机行为到确定性行为的平滑过渡，这是模拟退火的一个关键特征。

有一些文本深入解释了模拟退火和遗传算法。我建议：

> [1] Vöcking, B.、Alt, H.、Dietzfelbinger, M.、Reischuk, R.、Scheideler, C.、Vollmer, H.、Wagner, D.“不*插电的算法*”，Ed。德国柏林：Springer-Verlag Berlin Heidelberg, 2011, ch. 41，第 393-400 页。
> 
> [2] Duc Pham, D. Karaboga，“*智能优化技术*”。英国伦敦：Springer-Verlag 伦敦，2000 年。

# validation - 如何防止 Facebook Like Box 创建 XHTML 错误？

> ID：15237010
> 
> 赞同：1
> 
> 时间：2013-03-06T00:49:55.927
> 
> 标签：validation, xhtml, attributes, facebook-likebox

我在我的网站上使用最新的 Facebook Like Box。当我去验证我的站点的 XHTML 时，我看到有几个错误是由无法识别的标签引起的。具体来说，这是我网站上的 Facebook Like Box 代码：

> div class="fb-like-box" data-href="http://www.facebook.com/aboroden" data-width="360" data-height="350" data-show-faces="true"数据流=“真”数据头=“假”边界=“0”

我收到以下错误：

> *   没有属性“data-href”
> *   没有属性“数据宽度”
> *   没有属性“数据高度”
> *   没有属性“data-show-faces”
> *   没有属性“数据流”
> *   没有属性“数据头”
> *   没有属性“边框”

Like Box 的脚本或功能没有错误，但我希望我的 XHTML 没有错误。有人可以帮我找到解决这个问题的方法，以便我可以删除我的错误但仍然有一个正常运行的 Like Box 吗？

[您可以在http://www.aboroden.com](http://www.aboroden.com)查看我的网站。在底部，我有一个指向 XHTML 验证器的链接。谢谢！

# combobox - ExtJs 4：远程组合框 - 中止上一个请求

> ID：15237011
> 
> 赞同：2
> 
> 时间：2013-03-06T00:50:00.643
> 
> 标签：combobox, extjs4, typeahead, ajax-request

正如标题所说，我想中止之前的 ajax 请求。每当用户输入字母（或数字）时，组合框通过 ajax 请求它请求数据，就像我通过 ajax 所说的那样，然后将数据返回给组合框。

我的问题是，每当我在字段中输入用户输入时，ajax 请求就会堆积起来。

我想要做的是首先中止先前的请求，然后继续执行当前请求。我试过这段代码：

```
 comboObj.onTypeAhead = Ext.Function.createInterceptor(comboObj.onTypeAhead, function() {
     Ext.Ajax.abort(); //aborts the last Ajax request
     return true; //runs the onTypeAhead function
  }); 
```

那没用，然后尝试了这个：

```
 ......
  listeners: {
        beforequery: function(evt){
           Ext.Ajax.abortAll(); //cancel any previous requests
           return true;
        }
     } 
```

这对我也不起作用，因为我有一个也使用 ajax 请求的计时器，如果执行了侦听器，它也会被取消。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:01:03.510

我花了很长时间才弄清楚。Ext.Ajax.abort(request) 能够中止请求。但是很难从存储中获取当前的请求对象（或者更好的是，Ext.Ajax.abort 需要的请求对象）。

最后我得到了这个：

```
...
if (store.loading && store.lastOperation) {
  var requests = Ext.Ajax.requests;
  for (id in requests)
    if (requests.hasOwnProperty(id) && requests[id].options == store.lastOperation.request) {
      Ext.Ajax.abort(requests[id]);
    }
}
store.on('beforeload', function(store, operation) {
  store.lastOperation = operation;
}, this, { single: true });

store.load();
... 
```

不好，但持久的存储负载被可靠地取消。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-19T14:45:52.260

```
store.on('beforeload', function(store, operation) {
    store.lastOperation = operation;
    if (store.loading && store.lastOperation) {
        Ext.Ajax.abort(store.lastOperation.request);
    }
}); 
```

# python - 简单的python脚本不创建目录

> ID：15237013
> 
> 赞同：0
> 
> 时间：2013-03-06T00:50:10.893
> 
> 标签：python, python-2.7, directory

我正在我的 Mac 上从命令行运行以下脚本：

```
python directory-create.py mkdirs mydirname 
```

这是脚本目录-create.py：

```
import os, sys
def mkdirs(newdir):
    os.makedirs('/Users/bob/PycharmProjects/server-scripts/test/' + newdir)
    os.rename('/Users/bob/PycharmProjects/server-scripts/test/' + newdir, '/Users/bob/PycharmProjects/server-scripts/test/www.' + newdir + '.com')
    print 'test output' 
```

我运行它，绝对没有任何反应。没有返回错误，我的打印语句没有打印（它确实使用简单的 Hello World 脚本打印）并且没有创建目录。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T00:51:04.570

您定义了函数，但实际上并没有调用它。之后再添加一行以实际调用该函数：

`mkdirs("my new dir")`

编辑：您的代码中似乎存在误解：您将要调用的函数作为命令行参数传递。

您似乎想使用命令行上指定的名称创建目录。我重写了代码来做到这一点：

用法是： `python directory-create.py mydirname`

完整的代码是：

```
import os
import sys

def mkdirs(newdir):
    os.makedirs('/Users/bob/PycharmProjects/server-scripts/test/' + newdir)
    os.rename('/Users/bob/PycharmProjects/server-scripts/test/' + newdir, '/Users/bob/PycharmProjects/server-scripts/test/www.' + newdir + '.com')
    print 'test output'

if len(sys.argv) < 2:
    print "No directory name specified!"
    sys.exit(1)
else:
    dirname = sys.argv[1]
    mkdirs(dirname) 
```

# ios - 无法在 iOS 6 中保存 EKReminder

> ID：15237014
> 
> 赞同：4
> 
> 时间：2013-03-06T00:50:17.050
> 
> 标签：ios, objective-c, eventkit

我正在尝试从我的应用程序中保存/检索提醒，但由于某种原因，EKReminder 似乎没有被保存。这是我的代码：

```
EKEventStore * _eventStore = [[EKEventStore alloc] init];
[_eventStore requestAccessToEntityType:EKEntityTypeReminder completion:^(BOOL granted, NSError *error) {

    //create a new calendar for reminders.
    EKCalendar *calendar = [EKCalendar calendarForEntityType:EKEntityTypeReminder eventStore:_eventStore];
    EKSource *localSource = nil;
    for (EKSource *source in _eventStore.sources)
        if (source.sourceType == EKSourceTypeLocal)
        {
            localSource = source;
            break;
        }

    calendar.source = localSource;

    self.calendarIdentifier = calendar.calendarIdentifier;
    EKReminder *reminder = [EKReminder reminderWithEventStore:_eventStore];
    reminder.calendar = calendar;
    reminder.title = @"Test Reminder";
    reminder.startDateComponents = [[NSCalendar currentCalendar] components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit fromDate:[NSDate date]];
    reminder.completionDate = [NSDate dateWithTimeIntervalSinceNow:100];

    EKAlarm *alarm = [EKAlarm alarmWithAbsoluteDate:[NSDate dateWithTimeIntervalSinceNow:100]];
    reminder.alarms = @[alarm];      

    NSError *errorOb = nil;
    BOOL saved = [_eventStore saveReminder:reminder commit:YES error:&errorOb];
    if (saved) NSLog(@"Saved Reminder");
    else NSLog(@"Failed to save reminder");

}]; 
```

然后稍后，我试图验证提醒实际上已被保存。我通过使用以下代码来做到这一点：

```
NSPredicate *predicate = [_eventStore predicateForRemindersInCalendars:nil];
[_eventStore fetchRemindersMatchingPredicate:predicate completion:^(NSArray *reminders) {
    for (EKReminder *reminder in reminders) {
        NSLog(@"Reminder Title: %@", reminder.title);
    }
}]; 
```

而且我的新提醒永远不会出现！

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T07:41:04.587

`-requestAccessToEntityType:completion:`只有在授权状态为时才需要调用`EKAuthorizationStatusNotDetermined`。您可以使用 来检查授权状态`+[EKEventStore authorizationStatusForEntityType:]`。

完成块只会在您第一次调用时被调用`-requestAccessToEntityType:completion`。在模拟器上它甚至不会被调用一次，因为在模拟器上你的应用程序已经可以访问了。

```
EKEventStore * _eventStore = [[EKEventStore alloc] init];
EKAuthorizationStatus authorizationStatus = [EKEventStore authorizationStatusForEntityType:EKEntityTypeReminder];
if (authorizationStatus == EKAuthorizationStatusNotDetermined) {
    [_eventStore requestAccessToEntityType:EKEntityTypeReminder completion:^(BOOL granted, NSError *error) {
        if (granted) {
            [self createNewReminder];
        } else {
            [self showNowAccessAlert];
        }
    }];
} else {
    if (authorizationStatus == EKAuthorizationStatusAuthorized) {
        [self createNewReminder];
    } else {
        [self showNowAccessAlert];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:00:34.457

I got this to work by switching up the localSource to be EKSourceTypeCalDAV. Not totally sure why that was required, maybe someone can shed some light on that?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T11:39:53.470

希望这对你有用。

```
 if([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
    {
        // iOS 6 and later
        // asks user to allow application to use his device calendar
        [eventStore requestAccessToEntityType:EKEntityTypeReminder completion:^(BOOL granted, NSError *error)
        {
            if (granted)
            {
                EKReminder *reminder = [EKReminder reminderWithEventStore:eventStore];
                reminder.title = aNotification;
                reminder.calendar = [eventStore defaultCalendarForNewReminders];
                NSDate *date = //aDate;
                EKAlarm *alarm = [EKAlarm alarmWithAbsoluteDate:date];
                [reminder addAlarm:alarm];
                NSError *error = nil;
                [eventStore saveReminder:reminder commit:YES error:&error];

                if(error)
                    NSLog(@"unable to Reminder!: Error= %@", error);
            }
        }];
    }
    // iOS < 6
    else
    {
        EKReminder *reminder = [EKReminder reminderWithEventStore:eventStore];
        reminder.title = aNotification;
        reminder.calendar = [eventStore defaultCalendarForNewReminders];
        NSDate *date = //aDate;
        EKAlarm *alarm = [EKAlarm alarmWithAbsoluteDate:date];
        [reminder addAlarm:alarm];
        NSError *error = nil;
        [eventStore saveReminder:reminder commit:YES error:&error];

        if(error)
            NSLog(@"unable to Reminder!: Error= %@", error);
    } 
```

如果您在将事件保存到设备日历时遇到问题，请查看我的[这篇文章。](https://stackoverflow.com/questions/12454324/defaultcalendarfornewevents-failed/16213789#16213789)

# python - Python 无法比较 Tkinter 值

> ID：15237020
> 
> 赞同：0
> 
> 时间：2013-03-06T00:51:49.060
> 
> 标签：python, comparison, tkinter

我正在尝试获取“Dragon On”的值，该值应该以“On”开始。我想将其与“关闭”进行比较，但它无法识别更改。我第二次按下按钮时，它会将 textvariable 设置为 Off，但比较不会检测到它已更改。我也试过

```
if (self.e3.config('textvariable')[-1] == 'Off') 
```

但它只是继续。

```
from Tkinter import *
import time
import datetime
import threading
import sys
import pdb; 

class App:

dragon = 300

def __init__(self, master):

    Label(master, text="Dragon Down").grid(row=2)
    self.e3 = Button(master,command=self.dragon_callback,width=15,text="Dragon On",textvariable="On")
    self.e4 = Entry(master)

    self.e3.grid(row=2, column=1)
    self.e4.grid(row=2, column=2)

def dragon_callback(self):
    print "%s" % self.e3.config('textvariable')[-1]
  #  print sys._current_frames()
    if self.e3.config('textvariable')[-1]:
        print "inside here the variable is '%s' " % self.e3.config('textvariable')[-1]
        try:
            self.t2_stop = threading.Event()
            t = threading.Thread(target=self.dragon_time,name="Dragon Thread",args=("eee",self.t2_stop))
            t.daemon = True
            t.start()
        except:
            print "Error: unable to start thread"
        self.e3.config(textvariable='Off')
    else:
        print " i stopped"
        self.t2_stop.set()
        self.e4.delete(0, END)
        self.e3.config(textvariable='True')

def dragon_time(self,bleh,stop_event):
    #print "did i get the value %s" % self.text_area.get()
    boom=300
    while(not stop_event.is_set() and boom > 0):
        #equivalent to time.sleep()
        self.e4.delete(0, END)
        self.e4.insert(0, boom)
        time.sleep(1)
        self.e4.delete(0, END)
        self.e4.insert(0, boom)
        boom -=1
        pass

root = Tk()
root.title("Timer")

app = App(root)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:16:06.517

要进行比较，您必须将对象转换为字符串

```
if (str(self.e3.config('textvariable')[-1]) == 'Off'): 
```

# linux - 如何在我的系统上找到可执行文件的所有版本？

> ID：15237022
> 
> 赞同：0
> 
> 时间：2013-03-06T00:52:02.890
> 
> 标签：linux, macos, unix

我正在使用 Eclipse 和 Subclipse，并尝试从命令行执行一些更高级的 svn 操作。但似乎命令行和 eclipse 正在使用不同的 svn 客户端。我将如何在我的机器上查找所有已安装的版本，以便找到我需要的版本的路径？即`list svn`返回系统上的所有 svn 安装。我很肯定我已经看到了一个 linux/unix 函数可以做到这一点，但是我的 google-fu 完全没有出现任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:05:23.987

您可以使用查找：

> find / -perm +111 -type f -name svn 2> /dev/null

STDERR 通过管道传送到 /dev/null 以抑制“权限被拒绝”警告。

如果您想知道每个版本：

> 查找 / -perm +111 -type f -name svn -print -exec {} --version -q \; 2> /开发/空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:11:01.003

你很困惑。Subclipse 不使用 SVN 的系统副本——它包含自己的客户端（我相信是用 Java 实现的）。您的系统上可能根本没有等效的命令行 SVN 客户端。

# java - 如何在java中生成0x00000000FFFFFFFF长掩码？

> ID：15237024
> 
> 赞同：0
> 
> 时间：2013-03-06T00:52:41.840
> 
> 标签：java, algorithm, bit-manipulation

由于符号扩展，上述方法不起作用并返回 -1。所以我想知道是否有办法只获得低 32 位，即使长数是负数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T00:54:17.837

使用`L`后缀指定`long`文字：`0x00000000ffffffffL`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T00:54:24.537

也许`0x00000000FFFFFFFFL`（注意`L`最后的，它是整数类型的[后缀](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)`long`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T00:56:15.220

这似乎工作得很好：

```
final long mask = 0x00000000FFFFFFFFL;
final long val = Long.MAX_VALUE;
final long masked = val & mask;
System.out.println(masked); 
```

输出：4294967295

# c# - cqrs eventstore 通过 Web 服务分派到

> ID：15237025
> 
> 赞同：1
> 
> 时间：2013-03-06T00:52:45.040
> 
> 标签：c#, .net, cqrs

除了延迟之外，循环通过 Web 服务列表发布事件是否有明显的缺点？

```
Dispatcher(event) {
    var services = getServices();
    for each service in services {
        callService(service, event);
    }
} 
```

编辑：
相对于什么？——彼得·里奇

*   使用 Web 服务，而不是 MSMQ 或 nServiceBus。

其他问题——Ruben Bartelink

*   使用 joliver 的事件存储。
*   Web 服务将是 webapi restfull 服务（内部）或“订阅”事件的第三方服务。
*   循环访问 Web 服务，因为每个 Web 服务都是一个需要调度的地址。
*   还没有 c# 代码，因为我还没有达到这一点。
*   我仍在评估整个项目的技术，有一个问题，决定把它放在堆栈溢出上，看看每个人都在做什么。

我昨天研究的补充信息：
在选择通信方法方面，了解企业服务总线 (ESB) [http://en.wikipedia.org/wiki/Enterprise_service_bus](http://en.wikipedia.org/wiki/Enterprise_service_bus)很有用。在 .net 世界中，nservicebus 似乎很受欢迎，但不是免费的，公共交通是免费的，但我在构建和运行示例时遇到了麻烦。TT

公共交通背后的一个人对消息传递与 Web 服务的一个很好的概述：http: [//blip.tv/ineta-live/event-driven-architecture-by-chris-patterson-north-dallas-net-ug- on-02-03-2010-3193457](http://blip.tv/ineta-live/event-driven-architecture-by-chris-patterson-north-dallas-net-ug-on-02-03-2010-3193457)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:43:32.680

在以下情况下，通过直接从面向用户的应用程序层调用各种 Web 服务来发布事件可能会很麻烦：

1.  远程服务不可用，
2.  远程服务中断并返回意外错误代码，
3.  远程服务很慢，您的用户不喜欢等待，
4.  等等

通过将事件通过队列发布到某个工作应用程序，负责调用各种 Web 服务，您的前端应用程序不会因上述任何原因而失败。

# ios - Restkit 0.20 嵌套对象数组映射问题

> ID：15237026
> 
> 赞同：6
> 
> 时间：2013-03-06T00:52:48.943
> 
> 标签：ios, objective-c, rest, restkit

我在使用 RestKit 0.20 映射以下 JSON 有效负载时遇到问题

我正在尝试将产品及其附件映射为具有以下对象的数组。我没有使用 RKEntityMapping，只是使用 RKObjectMappings，因为这个应用程序没有使用 Core Data。我在 RestKit wiki 上查阅了有关对象映射的文档，并查看了源代码中的测试用例以进行类似的设置，但没有运气。

```
{
    "Result": {
        "Product": {
            "Name": "Evil Stuff",
            "Description": "Its EVIL!",
            "Attachments": [
                {
                    "Id": "c4277b8f-5930-4fee-a166-b5f311d3a353",
                    "Name": "commands_to_recreate_db.txt",
                    "Type": "Contraindications"
                },
                {
                    "Id": "be4d2e2e-cb3e-48d2-9c7a-fbfddea3a1be",
                    "Name": "json.txt",
                    "Type": "Medication Guide"
                }
            ]
        },
        "Company": {
            "Name": "Omni Consumer Products",
            "AddressLine1": "100 Evil Dr.",
            "AddressLine2": null,
            "AddressLine3": null,
            "City": "MARS",
            "State": null,
            "Zip": "10000",
            "Country": null,
            "PhoneNumber1": "555-555-5555",
            "PhoneNumber2": null,
            "PhoneNumber3": null,
            "FaxNumber": null,
            "WebSite": null,
            "Email": null
        },
        "Representatives": []
    },
    "Messages": [],
    "Success": true
}

@interface clinProduct : NSObject

@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSString *description;
@property (nonatomic, retain) NSArray *attachments;

@interface clinAttachment : NSObject

@property (strong, nonatomic) NSString *attachmentID;
@property (strong, nonatomic) NSString *attachmentName;
@property (strong, nonatomic) NSString *type; 
```

这是我的对象映射和我的 RKResponseDescriptor

```
 RKObjectMapping *attachmentMapping = [RKObjectMapping mappingForClass:[clinAttachment class]];
  [attachmentMapping addAttributeMappingsFromDictionary:@{@"Id"   : @"attachmentID",
                                                         @"Name" : @"attachmentName",
                                                         @"Type" : @"type"}];
  RKObjectMapping *productMapping = [RKObjectMapping mappingForClass:[clinProduct class]];
  [productMapping addAttributeMappingsFromDictionary:@{@"Description" : @"description",
                                                              @"Name" : @"name"}];
  RKRelationshipMapping *relationshipMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"Attachments"
                                                                                           toKeyPath:@"attachments"
                                                                                         withMapping:attachmentMapping];
  [productMapping addPropertyMapping:relationshipMapping];
  RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:productMapping
                                                                pathPattern:nil
                                                                    keyPath:@"Result.Product"
                                                                statusCodes:[NSIndexSet indexSetWithIndex:200]]; 
```

我得到了一个有效的响应，但奇怪的是它只映射了产品的描述属性，甚至没有它的名称！

```
2013-03-05 18:39:49.775 iOS[38965:c07] Loaded results: <RKMappingResult: 0x96a8950, results={
    "Result.Product" = "Its EVIL!"; 
```

当我添加第二个响应描述符，深入到 Result.Product.Attachments 时，我可以获得一个附件数组，仅使用附件响应描述符就没有问题。任何帮助将不胜感激，自周日下午以来，我一直在努力解决这个问题。为代码墙道歉，但如果没有所有部分，很难完全描述 RestKit 设置。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T10:27:10.087

**为了方便并使用户更容易看到答案：**

**@Jorge Chao 对自己问题的评论（答案）：**

**这个问题的答案：**

我已经解决了这个问题。首先，`RKMappingResult`我粘贴的不正确。它正在映射一个项目，但它只显示它的一个属性。为了使它工作，我删除了产品类中的 和 ，并为附件添加了第二`RKRelationshipMapping`个。`NSAray``RKResponseDescriptor`

中的所有内容都正确显示`RKMappingResult`，不幸的是，该数组仅包含异构元素。这是一个黑客，但它终于解决了我的问题。

# ruby-on-rails-3 - 通过 JS 呈现的 rails 页面上的 Coffeescript 函数

> ID：15237029
> 
> 赞同：0
> 
> 时间：2013-03-06T00:53:04.620
> 
> 标签：ruby-on-rails-3, coffeescript

这是一个小问题，我确定我做错了什么。我有一个页面是通过来自 Rails 3 中的一个控制器操作的 JS 响应呈现的。

当此页面呈现时，它上面有一个名为“stakeholder_add”的元素（它是一个文本框）

在咖啡脚本中，我有一个简单的功能

```
$ ->
    if $('#stakeholder_add').length > 0
        alert "Hello" 
```

这不是在页面渲染时触发。如果我将相同的元素放在通过 HMTL 响应呈现的页面上，则事件会通过咖啡脚本触发。

所以问题真的是

1.  为什么事件没有通过 JS 渲染触发和
2.  如何使这项工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:59:03.497

尝试在行之间插入空格和制表符：

```
jQuery ->
  if $('#stakeholder_add').length > 0
    alert "Hello" 
```

# javascript - 使用 parseInt 将字符串转换为整数

> ID：15237030
> 
> 赞同：0
> 
> 时间：2013-03-06T00:53:13.147
> 
> 标签：javascript

```
 var str = '0.5';
        var int = 0.1; 
```

我希望输出`str + int`等于`0.6`

使用`alert(parseInt(str) + int);`没有产生这些结果。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T00:55:01.157

`parseInt`将您的字符串解析为整数：

```
> parseInt('0.5', 10);
0 
```

由于您想要一个浮点数，请使用`parseFloat()`：

```
> parseFloat('0.5');
0.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T00:55:51.150

有几种方法可以在 JavaScript 中将字符串转换为数字（整数是整数，这不是你想要的！）（不需要 jQuery）

到目前为止，最简单的是使用一元 + 运算符：

```
var myNumber = +myString; 
```

或者

```
alert( (+str) + int ); 
```

此外，您不应该使用“int”作为变量名；这是一个坏习惯（通常是关键字，正如我所说，0.1*不是*int）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T00:55:38.187

正确的是使用`parseFloat`：

```
var result = parseFloat(str) + int;
alert( result ); // 0.6 
```

# wpf - WPF 相对源行为

> ID：15237037
> 
> 赞同：4
> 
> 时间：2013-03-06T00:53:47.220
> 
> 标签：wpf, data-binding, binding

我在理解`RelativeSource`绑定行为方面遇到了一些问题。以下是将内容正确绑定`Label`到`StackPanel`Tag 的代码：

```
<Window x:Class="Binding_RelativeSource.MainWindow" Tag="Window Tag">
    <Grid Tag="Grid Tag">
        <StackPanel Tag="StackPanel Tag" Height="100" HorizontalAlignment="Left" Margin="156,97,0,0" Name="stackPanel1" VerticalAlignment="Top" Width="200">
            <Label Content="{Binding Path=Tag,RelativeSource={RelativeSource Mode=FindAncestor,AncestorLevel=1,AncestorType=StackPanel},FallbackValue=BindingFailed}" Height="28" Name="label1" />
        </StackPanel>
    </Grid>
</Window> 
```

上面的代码不绑定`Grid`标签，如果我改变`AncestorType=Grid`和`AncestorLevel=2`. 我有两个问题：

1.  我想我应该将 AncestorLevel 更改为 2，以绑定到 Grid。但它适用于`AncestorLevel=1`. 为什么？

2.  我也无法将标签绑定到窗口标签。请建议。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-06T01:35:56.267

用于查找要绑定的`AncestorLevel`正确祖先，这是因为该类型的祖先可能不止一个。

这是一个显示这一点的场景：

```
<Grid Tag="AncestorLevel 3">
    <Grid Tag="AncestorLevel 2">
        <Grid Tag="AncestorLevel 1">
            <StackPanel Tag="StackPanel Tag" Height="100" HorizontalAlignment="Left" Margin="156,97,0,0" Name="stackPanel1" VerticalAlignment="Top" Width="200">
                <Label Content="{Binding Path=Tag,RelativeSource={RelativeSource Mode=FindAncestor,AncestorLevel=1,AncestorType=Grid},FallbackValue=BindingFailed}" Height="28"  />
                <Label Content="{Binding Path=Tag,RelativeSource={RelativeSource Mode=FindAncestor,AncestorLevel=2,AncestorType=Grid},FallbackValue=BindingFailed}" Height="28"  />
                <Label Content="{Binding Path=Tag,RelativeSource={RelativeSource Mode=FindAncestor,AncestorLevel=3,AncestorType=Grid},FallbackValue=BindingFailed}" Height="28"  />
            </StackPanel>
        </Grid>
    </Grid>
</Grid> 
```

结果：

![在此处输入图像描述](../Images/e4746023720811aeba9663b9f854d548.png)

## 替代方法

`ElementName`但是您可以通过使用绑定来简化代码，这使用`Name`元素的

例子：

```
<Window x:Class="WpfApplication9.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="MyWindow" Tag="This is the window">
    <Grid Name="Grid1" Tag="First grid">
        <Grid Name="Grid2" Tag="Second grid">
            <Grid Name="Grid3" Tag="ThirdGrid">
                <StackPanel Name="stackPanel1" Tag="StackPanel Tag" Height="160" HorizontalAlignment="Left" Margin="156,97,0,0" VerticalAlignment="Top" Width="200">
                    <Label Content="{Binding ElementName=MyWindow, Path=Tag}" Height="28"  />
                    <Label Content="{Binding ElementName=Grid1, Path=Tag}" Height="28"  />
                    <Label Content="{Binding ElementName=Grid2, Path=Tag}" Height="28"  />
                    <Label Content="{Binding ElementName=Grid3, Path=Tag}" Height="28"  />
                    <Label Content="{Binding ElementName=stackPanel1, Path=Tag}" Height="28"  />
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Window> 
```

结果：

![在此处输入图像描述](../Images/17007bcd9c9cd3be07c6f9a5d5891957.png)

如果你想绑定回`Window`你仍然可以使用`FindAncestor`

```
<Window x:Class="WpfApplication9.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Tag="This is the window">
    <Grid>
        <StackPanel Height="100" HorizontalAlignment="Left" Margin="156,97,0,0" Name="stackPanel1" VerticalAlignment="Top" Width="200">
            <Label Content="{Binding Path=Tag,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=Window},FallbackValue=BindingFailed}" Height="28"  />
        </StackPanel>
    </Grid> 
```

结果：

![在此处输入图像描述](../Images/7cde0037a9d5168b1fc20456cb5e0ee3.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T03:07:48.323

我的最终结论是：VS2010 设计器的问题是它没有更新 Window 标签的 RelativeSource 绑定。它更新设计器中其他控件的绑定（我检查了 Grid 和 StackPanel），但对于 Winodw，它会在运行时更新。微软已经在 VS2012 中为此做了解决方法。

# java - 无法将完整的音频流写入 java 中的音频文件

> ID：15237040
> 
> 赞同：1
> 
> 时间：2013-03-06T00:54:14.247
> 
> 标签：java

我正在尝试将音频转换为音频流，然后使用 java 转换回音频。当我将 wav 文件读入字节数组时，它显示大约 30000 个字节，但是当我将它写入一个新文件时，它只写入 44 个字节。请告诉我我哪里出错了。代码片段如下：

```
 File src = new File("C:\\test.wav");
    AudioInputStream ais = AudioSystem.getAudioInputStream(src);  
    byte[] data = new byte[ais.available()];
    int x = ais.read(data);

    int n = AudioSystem.write(ais, AudioFileFormat.Type.WAVE, new File("C:\\test2.wav"));
    System.out.println("x="+x+"  n="+n); 
```

n 的输出为 44。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:20:48.510

我相信问题在于您已将 AudioInputStream 的全部内容读入字节数组。这意味着当您将 AudioInputStream 实例传递给 AudioSystem.write() 方法时，它已经位于文件的末尾。（它正在写入的 44 个字节可能只是标题信息或类似的东西。）

快速诊断的方法是注释掉对 ais.read(data) 的调用，看看它是否开始正确地写出文件。

一种可能的解决方案是在将文件读入字节数组后，使用 AudioInputStream 上的 mark() 和 reset() 方法移回文件的开头。

# java - 在eclipse中使用JavaFX空指针异常加载css

> ID：15237043
> 
> 赞同：3
> 
> 时间：2013-03-06T00:54:27.153
> 
> 标签：java, javafx-2, javafx

我正在尝试使用这行代码将 CSS 文件加载到 JavaFX 中，它给了我一个空指针异常：

```
scene.getStylesheets().add(welcome.class.getResource("background.css").toExternalForm()); 
```

My`background.css`与我创建的欢迎类位于同一个文件夹中。

知道为什么我得到一个空指针吗？

错误日志：

```
Exception in Application start method
Exception in thread "main" java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(Unknown Source)
    at com.sun.javafx.application.LauncherImpl.access$000(Unknown Source)
    at com.sun.javafx.application.LauncherImpl$1.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at welcome.start(welcome.java:164)
    at com.sun.javafx.application.LauncherImpl$5.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$5.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$4$1.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$4$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.application.PlatformImpl$4.run(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$3$1.run(Unknown Source)
    ... 1 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-24T19:44:38.770

任何资源都应该在类路径上才能成功加载（如果它与欢迎类在同一个文件夹中，那么它已经是这样了）。然后，您应该在样式表文件的路径前加上“/”符号，使其看起来像这样：

```
scene.getStylesheets().add(welcome.class.getResource("/background.css").toExternalForm()); 
```

然后它将成功加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:00:14.660

你初始化场景对象了吗？

```
//Create a scene object. Pass in the layout and set with and height
this.scene = new Scene(layout, 600, 400);

//Add CSS Style Sheet (located in same package as this class).
String css = this.getClass().getResource("background.css").toExternalForm();
scene.getStylesheets().add(css); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-20T19:14:26.580

我和你有同样的错误......这是我找到的解决方案......如果你有一个 Main class ，用 Main 替换“welcome”以获得此代码：

带有 JavaFX 2.0 的 Eclipse 中的树：

```
-MyJavaProject            (JavaProject)
 | -src                   (Folder)
     | -Appli             (Package)
        |  -Main.java     (Class Main)
        |  -application.css  (css file) 
```

这棵树的代码：

```
scene.getStylesheets().add(
          Main.class.getResource("application.css").toExternalForm()); 
```

希望这会有所帮助... ;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-27T15:15:31.763

所以我知道这是一个老问题，但我最近遇到了类似的问题，所以我想给出我认为的答案：

必须满足三个条件才能同时使用 JavaFX 文件和 CSS 文件：

1.  JavaFX 文件和 CSS 文件都必须在同一目录中
2.  您必须在代码中声明您正在使用 CSS 文件，例如

    ```
     scene.getStylesheets().add(welcome.class.getResource("background.css").toExternalForm()); 
    ```

3.  我认为被遗漏的是**包 PackageName；**

    **包装你的包裹名；**.
    将位于您定义导入的位置之前的 JavaFX 文件顶部。如果您不习惯在 Java 中处理多个文件，或者如果您从头开始编写代码，那么很容易忘记这一点。没有**包 YourPackageName；**不会阻止您的基本文件工作，但是当您尝试使用自己定义的 CSS 文件时，它可以阻止您的程序运行。

# c - 读取数据文件 - 数组末尾不需要的额外值

> ID：15237044
> 
> 赞同：2
> 
> 时间：2013-03-06T00:54:34.177
> 
> 标签：c, arrays, scanf

我对编程很陌生，因此对任何愚蠢的错误/疏忽深表歉意。
我正在尝试编写一个程序来读取具有 3 列数字的数据文件并将它们放入数组中。我想处理多达 100 个元素的文件。
问题是，在我读取了一个我知道包含 20 个元素的数据文件后，一个额外的值或 0.00000 被添加到每个数组的末尾，因此它写入了 21 个值而不是我想要的 20 个。

我的代码如下所示：

```
#include <stdio.h>
#include <cpgplot.h>
#include <stdlib.h>
#include <math.h>
#define MAXELEMENTS 100

int main()
{
/*Declare variables*/
float volume[MAXELEMENTS], temp[MAXELEMENTS], pressure[MAXELEMENTS];
int cnt = 1;
int i;
FILE *f;
char headings[MAXELEMENTS];
char filename[100];

/*Prompt user for file name*/
printf("Please enter the name of the file: ");
scanf("%s", &filename);

f = fopen(filename, "r");
if(f == NULL)
{
printf("File not found\n");
exit(EXIT_FAILURE);
}

/* Buffer line to read the headings of the data*/
fgets(headings, MAXELEMENTS, f);

/* Read records from the file until the end is reached*/
while(!feof(f) && cnt<MAXELEMENTS){
if (fscanf(f, "%f %f %f\n", &volume[cnt], &temp[cnt], &pressure[cnt]) > 0) cnt++;
} 
```

因此，当我打印出数组时，我得到了我想要的 20 个值，并且在每个数组的末尾加上了一个未经处理的 0.000000 值。后来当我尝试绘制一些数据时，这造成了很多问题。

从我在这里和其他地方所做的搜索看来，问题在于 while(!feof(f)... 循环。

如果有人可以帮助我获取仅包含 .dat 文件中的值的数组，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:07:03.243

数组索引像 in 一样从 0 开始`volume[0]`，也就是说，你初始化`cnt=0;`不是 1。另外，

```
if (fscanf(f, "%f %f %f\n", &volume[cnt], &temp[cnt], &pressure[cnt]) > 0) 
   cnt++; 
else 
   break; 
```

这`break`可能会解决问题。

编辑：

> 我可以用来打印的代码：

```
i =0; // here you begging actualy with 0 or 1? Is here alrready corrected? 
while (i < cnt)
{ printf("%f\t %f\t %f\n", volume[i], temp[i], pressure[i]);
  i++; .... 
```

这里已经纠正了吗？不是，你从0到cnt-1再打印一个，从1到cnt-1输入。只是为什么在 ende 而不是在乞求数组时你有 0？无论如何，冷你测试初始化​​ cnt 为 0？这正是你用的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:15:23.253

看看你是如何打印出数组的。您的索引可能会导致尾随 0.0 值。你也应该初始化`cnt=0`.

# cocos2d-iphone - Cocos2d Box2d - 将通用 userData 分配给 bodyDef

> ID：15237046
> 
> 赞同：1
> 
> 时间：2013-03-06T00:54:42.767
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我看到的大多数分配 userData 的例子都是这样的：

```
CCSprite *sprite = [CCSprite spriteWithFile:@"whatever.png" rect:CGRectMake(0, 0, screenSize.width, screenSize.height)];

    sprite.tag = kWallTag;
    [self addChild:sprite];

    b2BodyDef groundBodyDef;
    groundBodyDef.position.Set(0,0);
    groundBodyDef.userData = (__bridge void*)sprite; 
```

如果您使用的是精灵，那很好。但就我而言，我不想创建精灵，因为我只想测试与屏幕边缘的碰撞。我可以创建一个只有边框的屏幕大小的精灵，但我不想使用那么多纹理内存来检测墙壁。所以我的问题是如何将 kWallTag 分配给 groundBodyDef，而不给它分配精灵。我将如何检索标签值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:21:44.087

我已经回答了第一部分：

```
GenericUserData *usrData = (GenericUserData*)malloc(sizeof(GenericUserData));
usrData->tag = kWallTag;
groundBodyDef.userData = usrData; 
```

但我不知道如何测试通用数据：

```
if (bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL) {
    CCSprite *spriteA = (__bridge CCSprite *) bodyA->GetUserData();
    CCSprite *spriteB = (__bridge CCSprite *) bodyB->GetUserData(); 
```

如何测试通用用户数据，而不是仅仅假设它是 CCSprite？

# servicestack - ServiceStack 将 ORMLite 交换为实体框架

> ID：15237048
> 
> 赞同：2
> 
> 时间：2013-03-06T00:54:50.337
> 
> 标签：servicestack, ormlite-servicestack

我想将**ORMLite**替换为**EF5**，请不要问我为什么：P ...所以我在网上搜索并没有找到很多关于如何实际执行此操作的信息。

我需要重写global.asax.cs 中的寄存器吗`ORMLiteConnectionFactory`？`EFConnectionFactory`实现起来似乎很多而且非常复杂，因为它`IOrmLiteDialectProvider` `OrmLiteConfig`与所有这些相关联，而且似乎不对，因为 SS 通常对所有问题都有一个简单的答案。例如，如果我想将 Funq 更改为另一个 DI 提供程序，这很容易。

ORMLite 是武器的固定选择还是我可以调整的灵活选项？请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T01:17:57.453

出于所有意图和目的，您最好假装 OrmLite 不存在。OrmLite 只是提供了 ADO.NET 原始`IDbConnection`接口的扩展方法，这些方法与 Dapper 和其他 Micro ORMS 类似（以及为什么能够与它一起使用）。

相比之下，Entity Framework 管理自己的沉重抽象，这是设计上无法用其他 Micro ORMS 替代的，因此您不应该尝试这条路线。

只需忽略 OrmLite 的存在并像往常一样使用实体框架。最后我听说[EF 不能很好地与 IOC 配合使用，](https://stackoverflow.com/questions/5279372/ioc-with-entity-framework)所以你可能不得不求助于实例化一个新的 EF DataContext 的正常情况，只要你想使用它。

# c# - HttpClient请求头自定义

> ID：15237049
> 
> 赞同：7
> 
> 时间：2013-03-06T00:54:53.170
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-web-api, dotnet-httpclient

是否可以在 .Net/Web Api 中设置 HttpClient 的请求 ACCEPT 标头以包含“application/json;odata=verbose”？

我知道如何设置请求媒体类型

```
HttpClient client = new HttpClient(handler);            
client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json")); 
```

但是如何设置 odata=verbose 部分？我似乎无法在网上找到任何解决方案来做到这一点。

我必须改用 HttpWebRequest 吗？基本上我需要调用 sharepoint 2013 rest api，并且需要 odata=verbose 部分。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T01:02:57.363

`MediaTypeWithQualityHeaderValue`有一个名为 Parameters 的属性，您可以在其中添加 'odata=verbose' 参数。

其他简单的方法是调用`MediaTypeWithQualityHeaderValue`Parse/TryParse 方法，您可以向其提供整个“application/json;odata=verbose”媒体类型字符串。

这是使用 Parse 的示例

```
using (HttpClient httpClient = new HttpClient())
{
    //Setup Accept Header
    MediaTypeWithQualityHeaderValue acceptHeader = MediaTypeWithQualityHeaderValue.Parse("application/json;odata=verbose");
    httpClient.DefaultRequestHeaders.Accept.Add(acceptHeader);

    //... do other stuff
} 
```

# mysql - MYSQL：周报、月报和年报

> ID：15237065
> 
> 赞同：-1
> 
> 时间：2013-03-06T00:56:24.187
> 
> 标签：mysql

我想制作可以按周、月和年查看的报告。

例如：我想查看每周注册的人员，或者我想查看本月或本年度的注册人员以及付款情况。我想在今年六月见报名者。我想通过使用下拉搜索来查看 2010 年的登记者。

// 这是我每周报告的代码，我想查看上周注册的学生，但我不知道我的代码是否正确。

```
$datetoday=date("Y-m-d");
$result = mysql_query("
     SELECT enrollee_info.*, payments.* from enrollee_info 
 INNER JOIN payments on payments.enrollee_id=enrollee_info.e_id 
      WHERE enrollee_info.category='Walk In' 
       AND DATE_FORMAT(payments.entrydate , %Y-%m-d')>=SUBDATE('".$datetoday."' , INTERVAL 7 DAY)"); 
```

每月和每年，例如，我想查看本月注册的人员等，并且我想通过使用下拉菜单查看今年注册的人员，您可以选择要搜索的月份或年份。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:02:00.557

查看有关可接受单位[的手册](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)`INTERVAL`。您可以简单地使用开关来确定记录的范围。

在您的下拉列表中，您将拥有周、月或年。然后，您可以使用 switch 来准备您的语句。

```
$sql = "SELECT enrollee_info.*, 
   payments.* 
FROM   enrollee_info 
       INNER JOIN payments 
               ON payments.enrollee_id = enrollee_info.e_id 
WHERE  enrollee_info.category = 'Walk In' 
       AND payments.entrydate >= Subdate(Curdate(), ";

switch ($range) {
    case "month":
        $sql .= 'INTERVAL 1 MONTH';
        break;
    case "year":
        $sql .= 'INTERVAL 1 YEAR';
        break;
    //if no match, use week
    default:
        $sql .= 'INTERVAL 1 WEEK';
}

$sql .= ')'; 
```

这将创建如下声明：

```
SELECT enrollee_info.*, 
       payments.* 
FROM   enrollee_info 
       INNER JOIN payments 
               ON payments.enrollee_id = enrollee_info.e_id 
WHERE  enrollee_info.category = 'Walk In' 
       AND payments.entrydate >= Subdate(Curdate(), INTERVAL 1 week) 
```

如果可能，尽量避免从每个表中获取所有列并使用列列表。

# php - 将 python API 示例转换为 PHP

> ID：15237070
> 
> 赞同：0
> 
> 时间：2013-03-06T00:56:40.927
> 
> 标签：php, python, api, rest, curl

我需要连接到 RESTful API。公司给我的唯一一个连接到他们的 API 的例子是 Python 中的一个例子。我不懂语言，但对 PHP 很满意。有没有办法用 curRL 和/或 PHP 做到这一点？

这是 Python 中的示例：

```
import requests
import hmac
import hashlib
import datetime as dt
import simplejson as json
import sys

tech_prefix = '' #the Account Tech Prefix
secret_key = '' #the API Key

#creating URI info
t = dt.datetime.utcnow().replace(microsecond=0)
timestamp = t.isoformat()
url_scheme = 'https'
net_location = 'api.thesite.com'
path = '/v1/available-tns/npas/'
method = 'GET'
ordered_query_params = ''
body = ''
body_md5 = ''
canonical_uri = url_scheme + "://" + net_location + path + "\n" + ordered_query_params
tokens = (
    timestamp,
    method,
    body_md5,
    canonical_uri
    )
message_string = u'\n'.join(tokens).encode('utf-8')
signature = hmac.new(secret_key, message_string, digestmod=hashlib.sha1).hexdigest()

headers = {'X-Timestamp':timestamp}
request_url = url_scheme + '://' + net_location + path + '?' + ordered_query_params #    append ordered query params here
request = requests.get(request_url,auth=(tech_prefix,signature),headers=headers)
print request 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:58:33.833

是的，您可以在 PHP 中执行此操作。此 python 代码不使用任何特殊的 python 库；它只是发送带有特定标头和特定身份验证信息的 HTTP 请求。不过，实际上将这段代码从 python 翻译成 PHP 超出了典型的 StackOverflow 答案的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:43:11.217

首先，“导入”只是外部库，PHP 内置了它们。直到 token 的所有内容都只是变量。日期和时间方法在 PHP 中都有类似的功能。那么“令牌”只是一个数组。然后 "message_string" 有一个 "join" 和 "encode" 方法，这些方法类似于您在 Javascript 中找到的方法。“签名”有点混乱，但它基本上是在做加密，PHP 也有类似的功能。Python 有很好的文档，所以查找 Python 的函数，然后你应该能够找出哪个 PHP 函数是相似的。在“签名”之后，它只是将所有变量组装到 HTTP 请求中并发送它。

Python 和 PHP（和 javascript）是基于 C 的语言。如果你擅长其中一个，你可以找出另一个，只要你有好的参考资料。如前所述，Python 有很好的文档记录，因此 Google 搜索 Python 方法或函数应该会找到您需要的信息，以找到它的 PHP 等效项。

使用 API 从来都不是一件有趣的事，但它们并非不可能。它们中的大多数分解为您必须组装的 HTTP 请求，然后分解响应。一个小技巧，有时你可以在 API 的文档中找到，或者在他们的论坛上（如果他们有的话）或者技术支持会向你发送一个 HTTP 请求应该是什么样子的示例。然后你可以在 PHP 中构建它。

作为结束语，最好学习如何在语言之间进行转换。听起来这是您第一次使用它，但大多数 Web 开发人员经常遇到这种情况，并且使用各种不同的语言（python、c++、asp、ruby 等）。根据我过去遇到的情况，您的转换相当简单。我很想把它作为我必须使用的最后一个 API 的示例。

# mysql - mysqldump 不会转储我的数据

> ID：15237072
> 
> 赞同：5
> 
> 时间：2013-03-06T00:57:00.803
> 
> 标签：mysql, mysqldump

这是我正在使用的命令：

```
mysqldump.exe -u root -d capstone -verbse --skip-quote-names > capstone.sql 
```

和我得到的输出

```
mysqldump: Warning: Can't set SQL_QUOTE_SHOW_CREATE option ()
-- Skipping dump data for table 'users', --no-data was used 
```

有任何想法吗？如果我转储到 XML 它可以工作，但是我将它导入到的地方不处理 XML，我的数据也会以某种方式破坏 CSV 输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-11-25T12:28:38.953

该`-d`选项是别名`--no-data`，请参见[https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#option_mysqldump_no-data](https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#option_mysqldump_no-data)

也许您打算声明“使用数据库顶点”，但在这种情况下不会`-d capstone`，数据库名称不需要任何开关/选项，只需将其放在那里

```
shell> mysqldump [options] db_name [tbl_name ...]
shell> mysqldump [options] --databases db_name ...
shell> mysqldump [options] --all-databases 
```

[https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#mysqldump-syntax](https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#mysqldump-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:06:00.977

我认为您的意思是使用`-B`/ `--databases`（其中包括允许您指示要转储的多个*数据库*而不是数据库和表）或根本不使用此类参数。我想你也打错了`--verbose`。

注意，如果你包含`--databases`一个`CREATE DATABASE`语句，也包含在内。这可能很重要，具体取决于您打算如何使用数据。

# javascript - D3.js：“未捕获的语法错误：意外的令牌非法”？

> ID：15237073
> 
> 赞同：77
> 
> 时间：2013-03-06T00:57:25.847
> 
> 标签：javascript, d3.js

我刚刚[从 d3js.org 下载了 D3.js](http://d3js.org/d3.v3.zip)（链接到 zip 文件），解压缩它，并在以下 HTML 页面中引用它：

```
<html>
<head>
<title>D3 Sandbox</title>
<style>
</head>
<body>
<script src="/d3.v3.js"></script>
</body>
</html> 
```

但是当我加载这个页面时，我的控制台（在 Chrome 中）给了我这个错误：

```
Uncaught SyntaxError: Unexpected token ILLEGAL: line 2 
```

它不喜欢[文件开头的 pi 和 e 符号](https://github.com/mbostock/d3/blob/master/d3.js#L2)。Errrr ...我该怎么办？我正在使用 python 的 SimpleHTTPServer 提供文件。

更新：是的，我知道我可以链接到 CDN 版本，但我更愿意在本地提供文件。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-03-30T09:42:32.780

尝试在 HTML 宿主文档上指定 UTF-8 字符集：

`<meta http-equiv="content-type" content="text/html; charset=UTF8">`

D3 在非 UTF8 文档中包含 UTF-8 符号（如 π）无效。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T01:03:30.563

这听起来像是编码的问题。我推荐[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最小值（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。尽管标题有些居高临下，但它包含一些非常有用的信息。具体来说，听起来您的服务器正在`d3.v3.js`使用错误的编码提供文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-24T04:53:34.440

添加 'charset="utf-8"'

```
<script src="/d3.v3.js" charset="utf-8"></script> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-09-25T20:20:53.887

我尝试在文档和脚本标签本身中设置字符集，但 Chrome 似乎并不关心。不确定我是否做错了什么。

我确实通过首先使用 --ascii-only 选项通过 uglify 运行它找到了成功。

更新：原来我在 Chrome 中的 View->Encoding 设置不是自动检测，而是一些西方编码。不知道为什么，但改变它解决了问题。荒谬的是，该设置会胜过脚本标签上的字符集属性。考虑到用户可能处于相同的情况并且无法弄清楚，我仍然会使用 uglify 来确保成功。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-01T03:24:42.660

检查所有字符串连接之间是否有加号，如果没有，将生成此错误。

# jquery - 检查 div 可见性不显示在 jQuery 中

> ID：15237078
> 
> 赞同：0
> 
> 时间：2013-03-06T00:57:43.057
> 
> 标签：jquery, if-statement, visibility

我一直在尝试一切并到处阅读，但似乎无法让它发挥作用。我到底做错了什么...

```
var visibility = $('#short-link').css('visibility');
$('#share-link span').click(function() {
    if (visibility != 'hidden'){
        $('#short-link').css({visibility: 'visible'});
    } else {
        $('#short-link').css({visibility: 'hidden'})
    }
}); 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:00:09.223

我想这不会像你期望的那样表现，因为你在你的函数*之外*定义可见性，所以它永远不会改变。我想你打算写：

```
$('#share-link span').click(function() {
    var visibility = $('#short-link').css('visibility');
    if (visibility != 'hidden'){
        $('#short-link').css({visibility: 'visible'});
    } else {
        $('#short-link').css({visibility: 'hidden'})
    }
}); 
```

或者更好的是，缓存对象而不是属性：

```
var $shortLink = $('#short-link');
$('#share-link span').click(function() {
    var visibility = $shortLink.css('visibility');
    if (visibility != 'hidden'){
        $shortLink.css({visibility: 'visible'});
    } else {
        $shortLink.css({visibility: 'hidden'})
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:05:20.137

我建议：

```
$('#share-link span').click(function() {
    this.style.visibility = this.style.visibility == 'visible' ? 'hidden' : 'visible';
}); 
```

这避免了使用 jQuery 方法来更新节点的内联样式，并避免设置不必要的变量（然后必须随着可见性的变化而更新）。

> 从你的话说这似乎好多了，我还没有搞砸纯 JS，只是 jQuery。所以不是“这个”，我不会使用#short-link吗？我让它成为一个javascript对象吗？

如果您宁愿使用更多的 jQuery 方法，那么我建议：

```
$('#share-link span').click(function() {
    $(this).css('visibility', function(i,v){
        return v == 'visible' ? 'hidden' : 'visible';
    });
}); 
```

当然，假设这是`span`您希望采取的行动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T01:02:39.663

您正在检查事件处理程序之外的可见性，因此它本身不会真正改变。

除了 Dave 的回答之外，如果您只想切换元素的可见性，`.toggle`可能会起作用：

```
$('#share-link span').click(function() {
    $('#short-link').toggle();
}); 
```

您的方法与此方法之间的区别在于在您的原始值`.toggle()`之间切换，而不是更改属性。`display: none``display``visibility`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T01:10:15.803

我猜你缺少关于可见性的引号

```
$('#short-link').css('visibility','visible'); 
```

或者

```
 $('#short-link').css({'visibility':'visible'}); 
```

# php - 网站 API 给出致命的 libpng 错误

> ID：15237079
> 
> 赞同：0
> 
> 时间：2013-03-06T00:57:43.237
> 
> 标签：php, api, png, fatal-error, libpng

您好，我目前正在开发一个程序，该程序将使用 POST 方法和它的 API 将图像上传到我的网站。现在一切都很好，它正在连接到服务器并尝试传输图像，但它从未真正完成。当我查看图像文件夹时，我看到很多带有前缀“temp”的文件，例如：temp_ahgdw9786.png。这是它在遇到致命错误时重命名的内容。

我不确定是什么导致了这个错误，所以我决定进一步调查，我查看了 Apache2/PHP 日志，发现每次尝试上传时都会重复这一行：

```
gd-png:  fatal libpng error: Q[10]U[1E]: invalid chunk type 
```

我从来没有弄乱过 libpng，所以我不知道是什么原因造成的，也不知道它对这件事意味着什么。有谁知道它可能是 API 还是服务器的东西？任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:29:39.597

PHP 正在使用 libpng 进行图像处理，它抱怨您传递给它的数据。您要上传PNG吗？您是否尝试过其他 PNG 图像？

您是否有权访问处理上传的 API 的 PHP 代码？如果是这样，您可能正在调用一些 GD 库函数，例如`imagecreatefrompng`，您可能想从那里开始寻找可能出错的地方。如果可以，请提供一些代码，以便我们查看。

# ruby-on-rails-3 - Rails - find_by_* 路线

> ID：15237080
> 
> 赞同：-1
> 
> 时间：2013-03-06T00:57:45.437
> 
> 标签：ruby-on-rails-3, routes

在 products_controller.rb

```
 # GET /search/'brand'
  def brand
    @product = Product.find_all_by_brand(params[:brand])

    respond_to do |format|
      format.html # brand.html.erb
    end
  end 
```

在路线.rb

```
match '/search/:brand' => 'products#brand' 
```

如果我尝试访问`localhost:3000/search/Apple`，我会收到以下错误`Couldn't find Product with id=Apple`

有什么我想念的吗？还有其他我应该处理的文件吗？

**更新**

现在我得到了`undefined method 'size' for nil:NilClass`，我什至不确定我改变了什么。

rails 执行的查询是`select "products".* FROM "products" WHERE "products"."brand" = 'Apple' ORDER BY last_seen DESC`并且它们似乎返回了正确的产品。

应用程序跟踪

> app/views/products/_product.html.erb:1:in `_app_views_products__product_html_erb___2255278_29707176' app/views/products/brand.html.erb:1:in` _app_views_products_brand_html_erb___464952485_38589588' app/controllers/products_controller.rb:52:in `brand'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:03:35.533

控制器中的注释表明您可能想尝试 /search/brand/Apple。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T21:01:27.713

发现错误，erb 页面正在接收`product`而不是`products`. 输入错误。

# vim - 如何使 vim 自动完成 :e 和 :tabnew 跳过 .class 文件？

> ID：15237086
> 
> 赞同：3
> 
> 时间：2013-03-06T00:58:17.407
> 
> 标签：vim

特别是，假设我在一个包含 Foo.java、Foo.class、Bar.java 和 Bar.class 的目录中。

假设我在 Foo.java 上打开了 vim，我想去 Bar.java。

对我来说很自然的事情就是打字`:e B<Tab>`。但是，这将始终在 Bar.java 之前完成到 Bar.class。

有没有办法让自动完成忽略类文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T01:10:27.697

您可以使用[wildignore](http://vimdoc.sourceforge.net/htmldoc/options.html#%27wildignore%27)：

```
set wildignore=*.class 
```

# mysql - MySQL存储过程中删除撇号的困难

> ID：15237087
> 
> 赞同：3
> 
> 时间：2013-03-06T00:58:20.340
> 
> 标签：mysql, stored-procedures

我正在尝试删除撇号，以下是整个过程。

```
BEGIN
SET _myparam = replace(_myparam, "'", '');
UPDATE `Table` SET NAME=_myparam WHERE UID=_someotherparam;
END 
```

我也试过：

```
SET _myparam = replace(_myparam, '\'', '');
SET _myparam = replace(_myparam, '''', ''); 
SET _myparam = replace(_myparam, CHAR(39), '');
SET _myparam = replace(_myparam, '%\'%', ''); 
```

这似乎适用于任何其他字符，但不适用于撇号。这里似乎没有什么可以删除撇号字符。任何帮助，将不胜感激。

我在谷歌上搜索了我能想到的所有东西，并且已经拔了几个小时的头发。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:50:32.280

我刚刚测试了这个标准选择并且它有效。你刚试过吗

`'\''`?

即，这适用于标准选择：

```
SELECT REPLACE("hi th'ere", '\'', ''); 
```

这不会：

```
SELECT REPLACE("hi th'ere",'%\'%', ''); 
```

当然这也有效：

```
SELECT REPLACE("hi th'ere","'", ''); 
```

**编辑：**这是 MySQL 存储过程的解决方案。

```
DELIMITER // 
CREATE PROCEDURE TestStoredProc(IN _myvariable VARCHAR(25)) 
BEGIN
SET _myvariable = REPLACE(_myvariable, '\'', '');
SELECT _myvariable;
END // 
DELIMITER ; 
```

和

```
CALL TestStoredProc("hi th'ere"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:00:30.257

您还可以使用两个单引号，这意味着标准 SQL 中的一个文字单引号。

```
REPLACE("I wan't to be alone", '''', '') 
```

仅供参考，在标准 SQL 中，双引号用于分隔标识符，如表名和列名。单引号用于分隔字符串和日期。将双引号视为与单引号相同是一种非标准的 MySQL 主义。但是我在上面的例子中使用了它，所以我不必逃避撇号。

* * *

我还测试了：

```
USE test;
DROP TABLE IF EXISTS `Table`;
CREATE TABLE `Table` (
 UID INT PRIMARY KEY,
 NAME TEXT
);
INSERT INTO `Table` VALUES (1, 'foo');

DROP PROCEDURE IF EXISTS q;

DELIMITER !!
CREATE PROCEDURE q(_myparam TEXT, _someotherparam INT)
BEGIN
 SET _myparam = REPLACE(_myparam, '''', '');
 UPDATE `Table` SET NAME=_myparam WHERE UID=_someotherparam;
END!!
DELIMITER ;

CALL q("I wan't to be alone", 1);

SELECT * FROM `Table`;

+-----+--------------------+
| UID | NAME               |
+-----+--------------------+
|   1 | I want to be alone |
+-----+--------------------+ 
```

它似乎工作得很好。我还对 _myparam 使用 VARCHAR(20) 进行了测试，这也有效。

# javascript - TGP deentityify 方法中引入的 Javascript 模块模式 - 为什么需要这种模式？

> ID：15237095
> 
> 赞同：2
> 
> 时间：2013-03-06T00:59:29.307
> 
> 标签：javascript, closures, module-pattern

Crockford 在 deentityify 方法中引入了一种模式来创建模块。他声称：

> 模块模式利用函数范围和关闭来创建绑定和私有的关系。在这个例子中，只有 deentityify 方法可以访问实体数据结构。

蒸馏以删除他的自定义功能，我认为代码归结为...

```
String.prototype.deentityify = function() {
    var entity = { 
        quot: '"',
        lt: '<',
        gt: '>'
    };

    return function() {
        return this.replace(/&([^&;]+);/g, function(a, b) {
            var r = entity[b];
            return typeof r === 'string' ? r : a;
        });  //close function(a,b)
    }; //close the returned function
} /* close  top level */ (); /* but evaluate it so deentitify becomes the returned fcn(!) 
```

问题是我不明白为什么这个额外的间接层是必要的。这段代码不等效吗？

```
String.prototype.deentityify = function() {
    var entity = { 
        quot: '"',
        lt: '<',
        gt: '>'
    };

//    return function() {
        return this.replace(/&([^&;]+);/g, function(a, b) {
            var r = entity[b];
            return typeof r === 'string' ? r : a;
        });  //close function(a,b)
//    }; //close the returned function
} /* close  top level, don't evaluate 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:11:30.843

`entity`这种模式的基本原因是避免在每次调用时重新评估。替换`entity`为构建成本高且不会因调用而改变的东西：

```
String.prototype.deentityify = function() {
    // expensiveFunctionCall is called *once* - when the function is defined.
    var entity = expensiveFunctionCall();

    return function() {
        return this.replace(/&([^&;]+);/g, function(a, b) {
            var r = entity[b];
            return typeof r === 'string' ? r : a;
        });  //close function(a,b)
    }; //close the returned function
}(); 
```

对比

```
String.prototype.deentityify = function() {
    // expensiveFunctionCall is called
    // *every time* "anyString".deentityify() is called.
    var entity = expensiveFunctionCall();

    return this.replace(/&([^&;]+);/g, function(a, b) {
        var r = entity[b];
        return typeof r === 'string' ? r : a;
    });  //close function(a,b)
}; 
```

# php - 将 PHAR 存档标记为 PHP 可执行文件

> ID：15237099
> 
> 赞同：3
> 
> 时间：2013-03-06T00:59:51.803
> 
> 标签：php, phar

我正在尝试将我的 PHAR 存档*标记为 PHP*（*我不知道正确的术语*），以便我可以从 cli 中使用它而无需任何`php`部分。因此，`php /path/to/my/archive.phar ARGUMENTS_HERE`我可以将它移到`/usr/local/bin`并从任何地方调用它，而不是打电话`archive`。（就像 PHPUnit 或 Composer 一样）。

如果我是对的，要做到这一点，我只需要`#!/usr/bin/env php`在我的 PHAR 存档文件之上添加？

我怎么做？我试图在我的**构建脚本中模仿**[作曲家编译器](https://github.com/composer/composer/blob/master/src/Composer/Compiler.php)，但它只是**使 PHP_CLI 崩溃（分段错误）**：

 ****```
$archiveName = 'phpbenchmark.phar';

$phar = new Phar($archiveName);

$phar->buildFromDirectory(__DIR__, '/\/lib\/|\/vendor\//');

$phar->setStub(createStub());

function createStub()
{
    $stub = <<<EOD
#!/usr/bin/env php
<?php
Phar::mapPhar('phpbenchmark.phar');
require 'phar://phpbenchmark.phar/lib/app.php';
__HALT_COMPILER();
EOD;
    return $stub;
} 
```

如您所见，我只需要存根即可运行`/lib/app.php`文件，仅此而已。

### 预先编译的 PHAR

当然，我尝试的第一件事是将其手动添加到我的存档中，但它看起来会损坏它：

```
PHP Fatal error:  Uncaught exception 'PharException' with message 'manifest cannot be larger than 100 MB in phar "/home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar"' in /home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar:9
Stack trace:
#0 /home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar(9): Phar::webPhar(NULL, 'index.php')
#1 {main}
  thrown in /home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar on line 9

Fatal error: Uncaught exception 'PharException' with message 'manifest cannot be larger than 100 MB in phar "/home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar"' in /home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar on line 9

PharException: manifest cannot be larger than 100 MB in phar "/home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar" in /home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar on line 9

Call Stack:
    0.0010     306272   1\. {main}() /home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar:0
    0.0011     307840   2\. Phar::webPhar() /home/igor/Dropbox/www/Github/PIFlexPHPBenchmark/phpbenchmark.phar:9 
```

请注意，在我手动修改之前，**完全相同的存档可以工作。**（但`php /path/to/arch`当然需要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:45:16.633

Aaaand，在打破我的头几个小时后解决了（有点）。我仍然不知道为什么，这个构建脚本似乎工作：

```
$archiveName = 'phpbenchmark.phar';

$phar = new Phar($archiveName);

$phar->buildFromDirectory(__DIR__, '/\/lib\/|\/vendor\//');

$phar->setStub(createStub());

function createStub()
{
    $stub = <<<ENDSTUB
#!/usr/bin/env php
<?php
Phar::mapPhar('phpbenchmark.phar');
require 'phar://phpbenchmark.phar/lib/app.php';
__HALT_COMPILER();
ENDSTUB;

    return $stub;
} 
```

除了.....我真的看不出与我的问题中发布的原始脚本有任何区别？为什么原来的一个 PHP Cli 会崩溃而这个工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-14T16:37:45.113

我需要做的就是更新该行：

```
$phar->setStub($phar->createDefaultStub("main.php")); 
```

到 ：

```
$phar->setStub("#!/usr/bin/env php\n\n" . $phar->createDefaultStub("main.php")); 
```

这将采用 phar 为您创建的默认存根，并添加 requires #! 线到它。然后只需 chmod 700 生成的 phar 文件，你就可以开始了。****

# sql - 如何在 SQL Server 中插入前导零

> ID：15237100
> 
> 赞同：5
> 
> 时间：2013-03-06T00:59:55.483
> 
> 标签：sql, sql-server-2005, insert

这是用前导零选择的代码：

```
SELECT RIGHT('00000'+ CONVERT(VARCHAR,Asset_No),6) 
  FROM schemaAsset.SystemDefined 
```

如何将值插入带有前导零的 Asset_no 列？

例如，我只在 Asset_no 列中插入“1”，但在代码中，它将插入“000001”。而且当我插入像 26 这样的两位数字时，它将插入为“000026”。长度不变。这在 SQL Server 中可行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T01:14:47.537

一种方法是使用`INSTEAD OF`触发器。

```
USE tempdb;
GO

CREATE TABLE dbo.whatever
(
  Asset_No VARCHAR(6)
);
GO

CREATE TRIGGER dbo.fix_whatever
ON dbo.whatever
INSTEAD OF INSERT
AS
BEGIN
  SET NOCOUNT ON;
  INSERT dbo.whatever(Asset_No /*, other columns */)
    SELECT RIGHT('000000' + CONVERT(VARCHAR(6), Asset_No), 6)
      /*, other columns */
    FROM inserted;
END
GO

INSERT dbo.whatever(Asset_No) SELECT '22';
GO

SELECT Asset_No FROM dbo.whatever;
GO 
```

结果：

```
Asset_No
--------
000022 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:15:14.893

如果要在 SQL Server 中进行填充，可以使用 INSERT 语句执行以下操作：

```
DECLARE @Asset_no INT = 12;

INSERT INTO schemaAsset.SystemDefined (Asset_no)
  SELECT RIGHT('00000'+ CONVERT(VARCHAR(6),@Asset_No),6) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T15:53:54.730

下面的脚本允许您使用表格中每一行的数字填充一列。这将为您提供从 2000 开始的数字。第一个条目是 0002000。

```
Declare @id varchar(15)  
set @id = '1999'  
update sometable  
set @id = id = replace(STR(@id + 1,7),' ', '0')  
go 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-08-01T20:25:54.517

对于甲骨文：

lpad(cast(NUMERIC_VAR as VARCHAR2(5 BYTE)),5,'00000')

# java - 如何从 netbeans 创建可执行程序

> ID：15237101
> 
> 赞同：0
> 
> 时间：2013-03-06T00:59:58.507
> 
> 标签：java, netbeans, jar, executable

我刚刚在 Netbeans IDE 上开发了一个小型 Java 应用程序。我很好奇如何将它转换为 netbeans 的可执行程序。这样就会有一个快捷图标，当双击它时会加载所有类并运行主函数，同时编译所有相关的 jar 文件。即JCalender、JTatto 以及sqlitejdbc.jar。所有这些都在项目的目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:30:57.473

查看[Launch4j](http://sourceforge.net/projects/launch4j/)，这是一个 Java 程序，它可以将您的`.jar`文件转换为标准的 Windows 可执行`.exe`文件，同时将所有引用构建到该单个文件中。

# sql - 将重复字段留空的 SQL 查询？

> ID：15237102
> 
> 赞同：0
> 
> 时间：2013-03-06T01:00:02.000
> 
> 标签：sql, ms-access, ms-access-2010

我想要的是，如果我的数据是这样的：

```
ID     Name
0      Jim
1      Dave
1      Bob
1      John
2      Ann 
```

我的查询返回这个：

```
ID     Name
0      Jim
1      Dave
       Bob
       John
2      Ann 
```

有没有一种简单的方法可以做到这一点？

**编辑：**

返回原始 2 列数据的查询将是这样的：

```
SELECT ID, NAME
FROM TestTable
ORDER BY ID 
```

# c - 需要帮助返回/传递多个数组

> ID：15237106
> 
> 赞同：1
> 
> 时间：2013-03-06T01:00:24.183
> 
> 标签：c, arrays, function

我在我的计算机科学课上有一个作业，我正在编写一个需要返回多个数组的程序。从技术上讲，我可以很好地做到这一点，但是设置作业的方式使我很难衡量某些事情。

基本上，我必须在`main()`函数中声明两个数组和一个变量，并将它们发送到一个名为`input()`.

`Input()`会取这三样东西，分别是`NumberOfYears`, `Year[NumberOfYears]`, `DataForYear[NumberOfYears]`. `NumberOfYears`将使用 a ，`scanf()`这将确定循环运行多少次`for()`将使用 a`scanf()`和。并且必须使用相同的语句，我知道该怎么做。`Year[]``DataForYear[]``Year[]``DataForYear[]``scanf()`

完成所有这些之后，我需要创建一个名为的函数`output()`，它基本上将`printf()`包含用户刚刚给我的所有值（即`Year[]`和`DataForYear[]`）。但是，我需要一种将两个数组以及`NumberOfYears`. 我听说这可以使用一种叫做结构的东西来完成，但是我们还没有学会这一点，我相信我的导师不会批准。

讲师的笔记建议只`NumberOfYears`应该返回到主函数，但我根本不明白这是怎么可能的。如果您有办法让我可以将这些东西传递给`output()`而不必归还它们，那就太好了。否则，我只需要某种方式来做到这一点，剩下的程序就是历史了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:04:36.473

函数可以通过它们的参数以及它们的返回来返回：

```
int doMyThing( int *somethingElse ) {
    *somethingElse = 40;
    return 2;
}

int main( void ) {
    int a;
    int b = doMyThing( &a );
    printf( stdout, "%d\n", a + b ); // prints "42"
} 
```

`int **somethingElse`您可以使用, 或任何您需要的东西将其扩展到数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:02:44.497

在 C 语言中，只要传递一个“数组”，实际上就是传递一个指针。因此，您的返回类型可能类似于`int*`，具体取决于您需要传回的数组的类型。如有必要，您可以使用`&x`来获取变量的地址`x`（例如数组的第一个元素）。

另一种可能性是，由于您正在传递一个指针，您甚至不需要实际返回它。您可以在函数内修改您的数组`input`，然后在`main`不做更多工作的情况下查看它的更改。

# sql - SQL中缺少值时如何强制添加？

> ID：15237111
> 
> 赞同：0
> 
> 时间：2013-03-06T01:00:47.210
> 
> 标签：sql, sql-server, null, addition

我想在这样的选择语句中添加：

```
select (I + j + k) as total from MyTable ... 
```

正如预期的那样，如果 I、j、k 中的任何一个为 null，则 total 返回为 null。

我如何对此选择进行编码，以便当 I、j、k 中的任何一个为空（缺失）时，为了加法的目的，缺失值被视为 0（因此总计永远不会为空）？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:01:53.027

```
SELECT total = COALESCE(l,0) + COALESCE(j,0) + COALESCE(k,0)
FROM dbo.MyTable; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T01:02:05.960

```
select ISNULL(I,0) + ISNULL(j,0) + ISNULL(k,0) as total from MyTable ... 
```

或者

```
select IFNULL(I,0) + IFNULL(j,0) + IFNULL(k,0) as total from MyTable ... 
```

在 mysql 上

# javascript - 使用 innerHTML 格式化

> ID：15237116
> 
> 赞同：0
> 
> 时间：2013-03-06T01:01:26.340
> 
> 标签：javascript, html

只是一个小问题，基本上，我为这些特定 ID 设置的字体样式不起作用，并且在浏览器中显示为页面的预设字体，这是 CSS 代码：

```
#para
    {
    font: #F00;
    } 
```

这是 JavaScript 代码：

```
document.getElementById("para").innerHTML="As you can see, the answer is"; 
```

我已将 id 放入 HTML 文件中的段落标记中，但字体样式不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:04:57.737

设置字体颜色的样式是使用 color 属性：

```
#para {
    color: #F00;
} 
```

有关更多信息，请参见：[https ://developer.mozilla.org/en-US/docs/CSS/font](https://developer.mozilla.org/en-US/docs/CSS/font)

# java - 是否有 MergeIterator 的任何实现？

> ID：15237117
> 
> 赞同：2
> 
> 时间：2013-03-06T01:01:29.323
> 
> 标签：java, guava, apache-commons-collection

任何现有的集合库（番石榴，commons-collection）是否提供了一个 MergeIterator，它的构造是：

```
MergeIterator(Iterator<Comparable> iters...) 
```

然后（假设源迭代器已排序）并行通过迭代器并按顺序返回元素？

```
[1,3,5] + [2,8] => [1,2,3,5,8] 
```

这将是一个有趣的课程，但我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:06:38.637

[`Iterators.mergeSorted`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterators.html#mergeSorted%28java.lang.Iterable,%20java.util.Comparator%29)在番石榴是这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T22:09:11.627

您可以使用 commons-collections 的 Collat​​ingIterator：

```
 List<Integer> list1 = Arrays.asList(1, 3, 5);
 List<Integer> list2 = Arrays.asList(2, 8);

 Iterator<Integer> merged =
    IteratorUtils.collatedIterator(ComparatorUtils.NATURAL_COMPARATOR,
                                   list1.iterator(), list2.iterator());

 System.out.println(IteratorUtils.toList(merged)); 
```

这将打印以下内容：

```
 [1, 2, 3, 5, 8] 
```

# assembly - 高与低内存地址和分支

> ID：15237119
> 
> 赞同：3
> 
> 时间：2013-03-06T01:01:43.533
> 
> 标签：assembly, mips, memory-address

谁能解释一下在以下问题的上下文中，高地址和低地址是什么意思？：

根据定义，“高”地址是那些大的无符号数，“低”地址是那些小的无符号数。

`beq`使用位于物理内存地址 的（相等的分支）指令可以将控制权转移到的最高地址是什么`0x320ACB48`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:38:13.753

答案取决于特定的 MIPS 芯片及其 MMU（如果有）。

32 位指令的有效地址为 0 到 4GB-4。但是，如果内存不在整个范围内，或者如果存在内存映射设备，或者如果您启用了虚拟到物理地址转换，您将根本无法在任意位置或有意义的位置执行代码方式。

如果您将控制权转移到未由内存备份的位置，则会执行垃圾。这同样适用于将控制转移到表示某些内存映射设备的寄存器或数据缓冲区的位置。

如果页面转换设置为限制对特定地址区域的访问或不允许在那里执行，则您根本无法在这些区域中执行任何操作。

现在，在将控制权从其 ( ) 所在位置`beq`转移多远方面也存在限制。只能将控制权转移到其位置 +/- 大约 2 ^(17)个字节 (=128KB)。`beq``beq`

因此，理论上，`beq`位于 0x320ACB48 的位置可以将控制转移到从 0x320ACB48 + 4 - 32768*4 到 0x320ACB48 + 4 + 32767*4 的任何位置（即 4 的倍数）。

如果`beq`位于地址 0 附近，则它可能能够将控制权转移到 4GB 附近，除非 CPU 禁止回绕地址。同样，如果`beq`在 4GB 点附近，它可能能够将控制权转移到地址 0 附近，除非 CPU 再次禁止地址换行。

# php - 如果表单中的表单是一个php文件但它已签入另一个文件，如何检查按钮是否被按下

> ID：15237120
> 
> 赞同：0
> 
> 时间：2013-03-06T01:01:43.607
> 
> 标签：php, html

我有两个 PHP 文件，我们称它们为 fileOne.php 和 fileTwo.php。如果 fileOne.php 有一个带有`action="fileTwo.php"`按钮 button1 和 button2 的表单，我如何检查 fileTwo.php 是否`isset($_POST['button1'])`被推送或被`isset($_POST['button2']`推送。

这是“fileOne.php”中“fileTwo.php”的形式：（execute.php = fileTwo.php）

```
< form action="execute.php" method = "POST">
< input type="hidden" name="edit" value="Edit"/>
< input type="hidden" name="delete" value="Remove"/>
< /form> 
```

这些是在 "fileOne.php" 中创建的按钮，但格式为 action= "fileTwo.php" : ("button1 = edit, button2 = delete)

```
echo "<td><input type='submit' name='Edit' value='Edit'>
<input type='submit' name='Delete' value='Remove'></td>\n"; 
```

如果按下任一按钮，我将在此处尝试检查“fileTwo.php”：

```
 //if edit is clicked
if(isset($_POST['edit'] == 'Edit'))
{
    echo"hello";
}
//if remove is clicked
if(isset($_POST['delete'] == 'Remove'))
{
    echo"good bye";
} 
```

我会欣赏 PHP 中的解决方案，而不是 JavaScript、AJAX 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:50:33.287

像这样重写它：

*文件一.php*

```
<form action="fileTwo.php" method="post">
   <input type="submit" name="edit" value="edit" />
   <input type="submit" name="delete" value="delete" />
</form> 
```

*文件二.php*

```
<?php
if (isset($_POST['edit']) && ($_POST['edit'] == 'edit')) {
    echo "Hello";
}
else if (isset($_POST['delete']) && ($_POST['delete'] == 'delete')) {
    echo "Goodbye";
}
?> 
```

好的，这样你就不需要任何额外的代码，没有隐藏的输入，只有 2 个按钮。两者都将使用下一页上的处理程序正确处理它们所需的值提交您的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:10:17.473

制作两种形式：

```
< form action="execute.php" method = "POST">
< input type="hidden" name="delete" value="Remove"/>
< input type="submit" value="Delete"/>
< /form>

< form action="execute.php" method = "POST">
< input type="hidden" name="edit" value="Edit"/>
< input type="submit" value="Edit"/>
< /form> 
```

在 fileTwo.php 中：

```
//input names(edit, delete) and values(Edit, Remove) are case sensetive
if( isset($_POST['edit']) && $_POST['edit'] == 'Edit') {
    echo"hello";
}

//if remove is clicked
if( isset($_POST['delete']) && $_POST['delete'] == 'Remove') {
    echo"good bye";
} 
```

# php - 逗号分隔的foreach

> ID：15237124
> 
> 赞同：0
> 
> 时间：2013-03-06T01:02:03.387
> 
> 标签：php, foreach

这个想法是得到一个逗号分隔的产品列表，但该列表必须包含“product_name (pipe) product_price*quantity” 例如，如果订单包含 2xABC（10.00 美元）和 3xDEF（20.00 美元），我的输出需要是“ `ABC|20.00,DEF|60.00`”我有以下代码：

```
 $products = $db->Execute($products_query);
    while (!$products->EOF) {
        $purchasedArray[] = array('products_name'=>$products->fields['products_name'],
                                    'final_price'=>$products->fields['final_price'],
                                    'products_quantity'=>$products->fields['products_quantity']);
        $products->MoveNext();
      } 
```

然后，我运行这样的 foreach：

```
foreach ($purchasedArray as $purchased) {
    $list .= $purchased['products_name'] . '|' . ($purchased['final_price']*$purchased['products_quantity']);
} 
```

并想输出结果：

```
$listFinal = implode(','. $list);
echo $listFinal; 
```

但是，像往常一样，我错过了一些东西，这不起作用。：） 任何帮助将非常感激。

编辑：我的错误日志中出现以下错误并且没有回显：（`PHP Warning: implode() [<a href='function.implode'>function.implode</a>]: Argument must be an array in line XXX`指`echo $listFinal;`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:08:17.183

你只是连接一个字符串，试试这个：

```
foreach ($purchasedArray as $purchased) {
    $formattedProducts[] = $purchased['products_name'] . '|' . ($purchased['final_price']*$purchased['products_quantity']);
}

$listFinal = implode(',', $formattedProducts);
echo $listFinal; 
```

# php - 550 地址无效

> ID：15237127
> 
> 赞同：0
> 
> 时间：2013-03-06T01:02:06.133
> 
> 标签：php, codeigniter, email

我在 CodeIgniter 中遇到问题，发送验证电子邮件：

> 遇到 PHP 错误
> 
> 严重性：警告
> 
> 消息：mail() [function.mail]：SMTP 服务器响应：550 地址无效。
> 
> 文件名：库/Email.php
> 
> 行号：1553

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T06:51:51.503

需要明确的是，“550 地址无效”。表示邮件服务器无法接受您的电子邮件，因为它找不到邮箱“admin@cam-corp.com”。您确定您的邮件服务器配置正确吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:18:25.117

通常，此错误意味着您的邮件服务器需要 SMTP 身份验证才能发送电子邮件。您可能有两种选择，一种是更改为另一个不需要身份验证的 SMTP 服务器。

另一种选择是将凭据放入您的配置中。请检查[此页面](http://ellislab.com/codeigniter/user-guide/libraries/email.html)，并尝试`smtp_user/smtp_pass`设置。

如果您发布配置设置和用例，我将能够为您提供更多详细信息。

# java - WebDriverWait 等待元素属性改变

> ID：15237129
> 
> 赞同：22
> 
> 时间：2013-03-06T01:02:16.887
> 
> 标签：java, selenium, selenium-webdriver, webdriver

如何使用 WebDriverWait 等到属性更改？

在我的 AUT 中，我必须等待按钮启用才能继续，不幸的是，由于开发人员对页面的编码方式，我无法使用 WebElement 的 isEnabled() 方法。开发人员正在使用一些 CSS 来使按钮看起来像被禁用，因此用户无法单击它，并且方法 isEnabled 总是为我返回 true。所以我要做的是获取属性“aria-disabled”并检查文本是“true”还是“false”。到目前为止，我一直在做的是一个带有 Thread.sleep 的 for 循环，如下所示：

```
for(int i=0; i<6; ++i){
    WebElement button = driver.findElement(By.xpath("xpath"));
    String enabled = button.getText()
    if(enabled.equals("true")){ break; }
    Thread.sleep(10000);
 } 
```

（如果不正确，请忽略上面的代码，只是我正在做的伪代码）

我确信有一种方法可以使用 WebDriverWait 实现类似的东西，这是我无法弄清楚的首选方法。这就是我想要实现的目标，即使以下内容不起作用：

```
WebDriverWait wait = new WebDriverWait(driver, 60);
wait.until(ExpectedConditions.visibilityOf(refresh.getText() == "true")); 
```

显然它不起作用，因为该函数需要一个 WebElement 而不是字符串，但这是我想要评估的。有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-06T02:36:36.653

以下内容可能对您的要求有所帮助。在下面的代码中，我们覆盖了包含我们正在寻找的条件的 apply 方法。因此，只要条件不为真，在我们的例子中，enabled 不为真，我们就会循环最多 10 秒，每 500 毫秒轮询一次（这是默认值），直到 apply 方法返回真。

```
WebDriverWait wait = new WebDriverWait(driver,10);

wait.until(new ExpectedCondition<Boolean>() {
    public Boolean apply(WebDriver driver) {
        WebElement button = driver.findElement(By.xpath("xpath"));
        String enabled = button.getAttribute("aria-disabled");
        if(enabled.equals("true")) 
            return true;
        else
            return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-20T14:03:29.927

如果有人想在 Selenium 包装器中使用 @Sri 作为方法，这是一种方法（感谢[这个答案](https://stackoverflow.com/a/12206542/1484919)顺便说一句）：

```
public void waitForAttributeChanged(By locator, String attr, String initialValue) {
    WebDriverWait wait = new WebDriverWait(this.driver, 5);

    wait.until(new ExpectedCondition<Boolean>() {           
        private By locator;
        private String attr;
        private String initialValue;

        private ExpectedCondition<Boolean> init( By locator, String attr, String initialValue ) {
            this.locator = locator;
            this.attr = attr;
            this.initialValue = initialValue;
            return this;
        }

        public Boolean apply(WebDriver driver) {
            WebElement button = driver.findElement(this.locator);
            String enabled = button.getAttribute(this.attr);
            if(enabled.equals(this.initialValue)) 
                return false;
            else
                return true;
        }
    }.init(locator, attr, initialValue));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-26T09:01:41.253

您可以使用 xpath 来定义具有所需值的属性的元素，然后等待它出现在页面上。在 Python 中，它可能如下所示：

```
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC    

xp = '//*[@id="element_id"][@aria-disabled="false"]'
WebDriverWait(browser, 60).until(EC.presence_of_element_located((By.XPATH, xp))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-20T15:55:07.637

当针对等待排序按钮生效的非常慢的引导页面进行自动化时，这对我有用。

```
 new WebDriverWait(webDriver, 10)
.until(ExpectedConditions.attributeContains(BUTTON_SORT_ASCENDING_PRICE, "class", "sortButtonActive")); 
```

*   **“webDriver”** - 我当前的 WebDriver 实例
*   **"10"** - 超时秒数
*   **"BUTTON_SORT_ASCENDING_PRICE"** - 元素的 By 定位器
*   **“类”** - 属性
*   **"sortButtonActive"** - 我正在等待的 'class' 的值

硒 V3.01

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-01T05:12:38.457

也可以使用简单的 do-while 循环 System.currentTimeMillis(); 来完成。方法可用于避免无限循环

```
long startTime = System.currentTimeMillis();
String disabled;
do{
   disabled = element.getAttribute("attributeName").trim();
}while(disabled!="false" && System.currentTimeMillis()-startTime<10000); 
```

# c++ - 升压累加器可以用作类成员吗

> ID：15237135
> 
> 赞同：3
> 
> 时间：2013-03-06T01:02:47.787
> 
> 标签：c++, boost, boost-accumulators

我正在尝试使用升压累加器来计算滚动平均值。当我像这样声明变量内联时：

```
#include <iostream>
#include <boost/accumulators/accumulators.hpp>
#include <boost/accumulators/statistics/stats.hpp>
#include <boost/accumulators/statistics/rolling_mean.hpp>

using namespace boost::accumulators;

int main()
{
  // Define rolling_mean accumulator
  accumulator_set<double, stats<tag::rolling_mean > > acc(tag::rolling_window::window_size = 5);
    // push in some data ...
    acc(1.2);
    acc(2.3);
    acc(3.4);
    acc(4.5);

    // Display the results ...
    std::cout << "Mean:   " << rolling_mean(acc) << std::endl;

    return 0;
} 
```

它工作得很好。当我将累加器声明为这样的类的成员时：

```
#include <iostream>
#include <boost/accumulators/accumulators.hpp>
#include <boost/accumulators/statistics/stats.hpp>
#include <boost/accumulators/statistics/rolling_mean.hpp>

using namespace boost::accumulators;

class DoMean {
private:
  accumulator_set<double, stats<tag::rolling_mean > > m_acc(tag::rolling_window::window_size = 5);

public:

  void addData(double val) {
    this->m_acc(val);
  }

  double getMean(void) {
    return rolling_mean(this->m_acc);
  }
};

int main()
{
  // Define an accumulator set for calculating the mean and the
  // 2nd moment ...
  DoMean meaner;
  meaner.addData(1.2);
  meaner.addData(2.3);
  meaner.addData(3.4);
  meaner.addData(4.5);

  // push in some data ...

  // Display the results ...
  std::cout << "Mean:   " << meaner.getMean() << std::endl;

  return 0;
} 
```

它失败了，给出了编译器错误：

```
accumulators::tag::rolling_window::window_size is not a type
...blah blah, many type template errors etc. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T01:02:47.787

这个问题的正确解决方案是这样的：

```
#include <iostream>
#include <boost/accumulators/accumulators.hpp>
#include <boost/accumulators/statistics/stats.hpp>
#include <boost/accumulators/statistics/rolling_mean.hpp>

using namespace boost::accumulators;

class DoMean {
private:
  accumulator_set<double, stats<tag::rolling_mean > > m_acc;

public:

  DoMean(void): m_acc(tag::rolling_window::window_size = 5) {}

  void addData(double val) {
    this->m_acc(val);
  }

  double getMean(void) {
    return rolling_mean(this->m_acc);
  }
};

int main()
{
  // Define an accumulator set for calculating the mean and the
  // 2nd moment ...
  DoMean meaner;
  meaner.addData(1.2);
  meaner.addData(2.3);
  meaner.addData(3.4);
  meaner.addData(4.5);

  // push in some data ...

  // Display the results ...
  std::cout << "Mean:   " << meaner.getMean() << std::endl;

  return 0;
} 
```

请注意，m_acc 的初始化已从其声明的内联移动到初始化列表中。这解决了所有编译器错误。事实上，如果我们想想这里发生了什么，最初尝试在类中使用累加器失败的原因是因为 ISO c++ 禁止内联成员的初始化。

我们可以用另一个简单的类来证明这一点：

```
#include <iostream>

class TestInit {
public:
  int m_init = 10;

};

int main() {
  TestInit inits;
  std::cout << "The value: " << inits.m_init << std::endl;

} 
```

现在编译器给了我们一个有用的信息：

```
/home/me/prog/cpp/acctest/testinit.cxx:5:16: error: ISO C++ forbids initialization of member m_init [-fpermissive]
/home/me/prog/cpp/acctest/testinit.cxx:5:16: error: making m_init static [-fpermissive]
/home/me/prog/cpp/acctest/testinit.cxx:5:16: error: ISO C++ forbids in-class initialization of non-const static member m_init 
```

# css - 填充元素内的 CSS 精灵

> ID：15237140
> 
> 赞同：1
> 
> 时间：2013-03-06T01:03:15.177
> 
> 标签：css, css-sprites

我有一个列表，我在其中使用背景图像 CSS 精灵作为链接。我遇到的问题是我想在精灵周围进行填充，而不必返回并重新创建所有图像。我可以让它正常工作的唯一方法是对实际的精灵使用 div，否则填充会导致精灵的另一半可见。

问题是这不是 W3C 有效的。一个 div 不能在一个 li 中，至少它不应该。

```
<div id="social-bar">
    <ul id="social-links">
        <li>
            <a href="http://twitter.com" title="Twitter">
                <div class="sprite twitter">Twitter</div>
            </a>
        </li>
        <li>
            <a href="http://facebook.com" title="Facebook">
                <div class="facebook sprite">Facebook</div>
            </a>
        </li>
        <li>
            <a href="http://instagram.com" title="Instagram">
                <div class="instagram sprite">Instagram</div>
            </a>
        </li>
        <li>
            <a href="http://www.youtube.com" title="YouTube">
                <div class="youtube sprite">YouTube</div>
            </a>
        </li>
    </ul>
</div>

#social-bar {
    /*margin-left:auto;*/
    /*margin-right:auto;*/
    width:100%;
    text-align:center;
    margin-top: 10px;
    padding-top: 10px;
    padding-bottom: 5px;
    /*background-color:#f9f9f9;*/
    /*border-top: 1px solid #f9f9f9;*/
    /*border-bottom: 1px solid #f9f9f9;*/
}
#social-links {
    list-style-type: none;
    margin: 0px;
    padding: 0px;
    text-indent:0px;
    width:100%;
}
#social-links li {
    display:inline-block;
    width:54px;
    height:54px;
    margin-left:20px;
    margin-right:20px;
    /*padding:8px;*/
    /*border: 4px solid #f9f9f9;*/
    border: 4px solid #dadada;

}
#social-links a {
    display:block;
    width:100%;
    height:100%;
    -webkit-transition:all .2s ease-in-out;
    -moz-transition:all .2s ease-in-out;
    position:relative;
    overflow:hidden;
}
#social-links a:hover {
    background-color:#ff379f;
}
#social-links img {
    padding-top:8px;
}

.sprite {
    width:100%;
    height:0px;
    padding-top:38px;
    overflow:hidden;
    background-repeat:no-repeat;
    position:relative;
    float:left;
    display:block;
    font-size:0px;
    line-height:0px;
}
.sprite.twitter {
    background-image:url(/images/social/twitter-sprite.png);
    margin-top:8px;
    background-position: 4px 0px;
}
#social-links a:hover .sprite.twitter {
    background-position: 4px -38px;
}
.sprite.facebook {
    background-image:url(/images/social/facebook-sprite.png);
    margin-top:8px;
    background-position: 18px 0px;
}
#social-links a:hover .sprite.facebook {
    background-position: 18px -38px;
}
.sprite.instagram {
    background-image:url(/images/social/instagram-sprite.png);
    margin-top:8px;
    background-position: 8px 0px;
}
#social-links a:hover .sprite.instagram {
    background-position: 8px -38px;
}
.sprite.youtube {
    background-image:url(/images/social/youtube-sprite.png);
    margin-top:8px;
    background-position: 8px 0px;
}
#social-links a:hover .sprite.youtube {
    background-position: 8px -38px;
}
.sprite.rss {
    background-image:url(/images/social/rss-sprite.png);
    margin-top:8px;
    background-position: 8px 0px;
}
#social-links a:hover .sprite.rss {
    background-position: 8px -38px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:47:08.740

将您的 sprite 转换`div`为`span`应该可以解决 W3C 验证问题。正如@matthewpavkov 指出的那样`div`，允许 in`li`但不允许 in `a`。

由于标签是浮动的，因此不需要`span`css 。`display:block;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:20:55.353

使用 span 标签而不是 div 标签。问题解决了。

但是，我建议重新创建精灵，只是为了完全使用更多的语义代码。

# draw - 当谷歌地图中的绘图模式发生变化时，我们会发生事件吗？

> ID：15237142
> 
> 赞同：1
> 
> 时间：2013-03-06T01:03:23.790
> 
> 标签：draw

我想在使用绘图工具（多边形）绘制覆盖之前有一个事件。在这种情况下，我想清除任何以前的图纸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:04:14.137

在咖啡脚本中

```
google.maps.event.addDomListener mapElement, 'click', (e) ->  
  if e?.target?.parentElement?.parentElement?.parentElement?.title == "Draw a shape"
    clearExistingShapes() # <-- your own code goes there 
```

不是很优雅，但它在紧要关头工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-04T12:08:35.627

不 ：（

希望在未来。在撰写本文时，稳定版本为 3.32

# javascript - Ember.js v1.0.0-rc.1 -- 如何为以编程方式创建的视图获取/提供控制器？

> ID：15237143
> 
> 赞同：2
> 
> 时间：2013-03-06T01:03:27.060
> 
> 标签：javascript, ember.js, migration

我正在将我的应用程序从 Ember v1.0.0 pre3 迁移到 rc1，似乎我无法再获取全局路由器实例，也无法在手动创建的视图中获取控制器。

我有许多目前不使用路线的模态屏幕（TODO），但在本周的最后期限内，我只需要让这些模态屏幕显示和填充。

我正在创建我的模态，例如：

```
App.helpModalView = App.HelpModalView.create();
App.helpModalView.append(); 
```

并在视图的 didInsertElement 方法中处理模态显示：

```
didInsertElement: function() {
   // miscellaneous setup operations
   // ...
   this.$().modal({backdrop:"static"});
}, 
```

但在实际的视图类中

```
this.get('controller') == null 
```

检查我的各种对象，看起来“controllerFor”仅在路由器上可用，我曾经从 App.router.get('controllerName') 获取此信息

如何从以编程方式创建的视图中获取控制器？

类似地，为我尚未访问的视图提供控制器的最佳方式是什么？该项目在视图层中有大量令人尴尬的逻辑，我想将其推送到关联的控制器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:17:11.967

我有一个类似的场景并像这样解决它：

```
 IB.TreeNavController = Em.Controller.extend({
                container: IB.__container__,
                init: function() {
                  this._super();
                }              
            });

            IB.TreeNavView = Em.View.extend({
                templateName: 'treeNav',

                init: function() {
                    this._super();
                    var ctrl = IB.TreeNavController.create();
                    this.set('controller', ctrl);
                },
            }); 
```

所以我定义了一个在视图的 init() 中实例化的控制器。可以以编程方式实例化视图。在此示例中，IB 是应用程序的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:26:07.693

当你渲染这样的东西时：

```
 this.render('treeNav', { controller: this.controllerFor('treeNav')}; 
```

`this.controllerFor`可以是您想要的任何东西 - 甚至是尚未分配给任何视图的任何东西。

# objective-c - 在从 plist 加载的现有 NSMutableDictionary 结构中存储值？

> ID：15237148
> 
> 赞同：0
> 
> 时间：2013-03-06T01:03:53.847
> 
> 标签：objective-c, plist, nsdictionary

首先，感谢大家迄今为止的帮助，stackoverflow 是一个很棒的社区！

此 plist 在加载应用程序时存在，当前如下所示：

```
<plist version="1.0">
<dict>
    <key>Roast</key>
    <array>
        <array>
            <string>Chicken</string>
            <string>200c, Grill</string>
            <string>01:00</string>
            <string>chicken.jpg</string>
            <array>
                <string>00:30</string>
                <string>Baste</string>
            </array>
        </array>
        <array>
            <string>Veg</string>
            <string>200c, Grill</string>
            <string>00:20</string>
            <string>veg.jpg</string>
        </array>
        <array>
            <string>Gravy</string>
            <string>High heat pan</string>
            <string>00:10</string>
            <string>gravy.jpg</string>
            <array>
                <string>00:05</string>
                <string>Stir</string>
            </array>
        </array>
    </array>
</dict>
</plist> 
```

**澄清：**

*   有一个键，就是组（Roast）。
*   在那里，有三个阵列（每个食品一个）。
*   在食品项目中，有一个可选的子计时器（在本例中仅适用于鸡肉和肉汁）。

**我正在尝试做的事情：**

我希望用户能够添加自己的密钥，然后在其中添加项目，或者在现有密钥中添加项目。示例：用户想要在键中添加“绿豆”：带有相应信息的烘焙：中火煮沸，00:10，greens.jpg。

**我目前所做的：**

将 plist 加载到字典中，尝试将用户条目保存到现有键中，但它似乎只是创建了一个新键，尽管使用了相同的键值。

**我被困在哪里：**

我想找到一种说法：如果存在一个名为“Roast”的键，则进入该键，并在以下结构中添加以下值。是否有捷径可寻？或者也许有一种方法可以获取现有键的“位置”，然后使用该位置添加到可变字典中，然后将其存储到 plist 中？也许我的结构也不正确？如果有人可以向我展示如何将值添加到 2 层以下的结构中，我将非常感激，那么我应该能够弄清楚。

提前，非常感谢您迄今为止的所有帮助！

问候， SineTwo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:24:16.687

既然你有一个 plist，你可以从 plist 的 NSMutableDictionary

```
NSString *plistPath = [[NSBundle mainBundle]pathForResource:@"plistName" forType:@"plist"];
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithContentsOfFile:plistPath];

NSMutableArray *roastItems = [dict[@"Roast"] mutableCopy]; 
```

您可以将项目添加到`roastItems`.

```
//Modifed roast items is added back to the root dictionary
[dict setObject:roastItems forKey:@"Roast"]; 
```

如果要添加新类别，请添加新键和对应的值`dict`

```
NSString *newCategoryName = @"NewCategory";
NSArray *categoryItems = //User populated array;

[dict setObject:categoryItems forKey:newCategoryName];

//Save the modified dict to plist
[dict writeToFile:plistPath atomically:YES]; 
```

编辑 ：

plist 的结构可以做成这样 很容易组织模型

```
<plist version="1.0">
<array>
    <dict>
        <key>CategoryName</key>
        <string>Roast</string>
        <key>CategoryItems</key>
        <array>
            <dict>
                <key>ItemName</key>
                <string>Chicken</string>
                <key>Type</key>
                <string>Grill</string>
                <key>Time</key>
                <string>01:00</string>
                <key>ImageName</key>
                <string>image.jpg</string>
            </dict>
        </array>
    </dict>
</array>
</plist> 
```

有了这个，你的根将是一个类别数组。每个类别都有其名称和项目。类别项目将具有名称、类型、时间等。

因此，当您想创建一个新类别时，请创建一个包含类别名称和类别项数组的字典。类别项目将有自己的项目名称、类型、时间等。非常干净优雅。可以将任意数量的项目添加到类别项目中。

# google-app-engine - 启用计费的 Google App Engine 应用的 OverQuotaException

> ID：15237151
> 
> 赞同：5
> 
> 时间：2013-03-06T01:04:13.627
> 
> 标签：google-app-engine

今天早些时候，我的 Google App Engine 应用程序中的服务调用停止工作，返回以下错误：

500 服务器错误

# 错误：服务器错误

## 服务器遇到错误，无法完成您的请求。

如果问题仍然存在，请[报告](http://code.google.com/appengine/community.html)您的问题并提及此错误消息和导致它的查询。

## 

HTML 代码：

```
<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>500 Server Error</title>
</head>
<body text=#000000 bgcolor=#ffffff>
<h1>Error: Server Error</h1>
<h2>The server encountered an error and could not complete your request.<p>If the problem persists, please <A HREF="http://code.google.com/appengine/community.html">report</A> your problem and mention this error message and the query that caused it.</h2>
<h2></h2>
</body></html> 
```

我查看了[GAE 系统状态](https://code.google.com/status/appengine/)，发现 Memcache 的状态是“正在调查”。现在在当天晚些时候，所有系统状态都正常，但我现在收到了`OverQuotaException`我的服务电话：

```
Uncaught exception from servlet
com.google.apphosting.api.ApiProxy$OverQuotaException: The API call datastore_v3.Put() required more quota than is available.
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:491)
    at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.success(ApiProxyImpl.java:392)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:781)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:461)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:703)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:338)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:330)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:458)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:823)
    at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.success(RpcStub.java:808)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:902)
    at com.google.net.rpc3.impl.client.RpcClientInternalContext.finishRpcAndNotifyApp(RpcClientInternalContext.java:807)
    at com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1110)
    at com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel.java:950)
    at com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2335)
    at com.google.net.rpc3.impl.client.RpcNetChannel.messageReceived(RpcNetChannel.java:2137)
    at com.google.net.rpc3.impl.client.RpcNetChannel.access$2100(RpcNetChannel.java:150)
    at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage(RpcNetChannel.java:3214)
    at com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:614)
    at com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport.java:405)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport$ClientAdapter.receivedMessage(UdrpcTransport.java:425)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport.dispatchPacket(UdrpcTransport.java:266)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport.readPackets(UdrpcTransport.java:218)
    at com.google.apphosting.runtime.udrpc.UdrpcTransport$1.run(UdrpcTransport.java:82)
    at com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260)
    at com.google.net.eventmanager.AbstractFutureTask.run(AbstractFutureTask.java:121)
    at com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:578)
    at com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:1002)
    at com.google.net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:884)
    at com.google.net.eventmanager.WorkerThreadInfo.runWorkerLoop(WorkerThreadInfo.java:136)
    at com.google.net.eventmanager.EventManagerImpl$WorkerThread.run(EventManagerImpl.java:1855) 
```

在 GAE 仪表板中的配额详细信息下，所有资源都在配额之下，速率列中显示“Okay”。我也在应用程序上启用了计费，即使它超过了配额，我也不应该收到此错误。这里有什么问题？我什至没有`Put()`在此服务调用中调用方法。我只是查询数据。

**更新：**由于我的配额的下一次重置即将结束，剩余 0 小时（可能是太平洋午夜 20 分钟），仍然没有实际超过任何配额，我确实收到了这个新错误：

503超额

**错误**  

> # 超过配额
> 
> 此应用程序暂时超出其服务配额。请稍后再试。

HTML 代码：

```
<html><head>
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<title>503 Over Quota</title>
<style><!--
body {font-family: arial,sans-serif}
div.nav {margin-top: 1ex}
div.nav A {font-size: 10pt; font-family: arial,sans-serif}
span.nav {font-size: 10pt; font-family: arial,sans-serif; font-weight: bold}
div.nav A,span.big {font-size: 12pt; color: #0000cc}
div.nav A {font-size: 10pt; color: black}
A.l:link {color: #6f6f6f}
A.u:link {color: green}
//--></style>

</head>
<body text=#000000 bgcolor=#ffffff>
<table border=0 cellpadding=2 cellspacing=0 width=100%>
<tr><td bgcolor=#3366cc><font face=arial,sans-serif color=#ffffff><b>Error</b></td></tr>
<tr><td>&nbsp;</td></tr></table>
<blockquote>
<H1>Over Quota</H1>
This application is temporarily over its serving quota.  Please try again later.

<p>
</blockquote>
<table width=100% cellpadding=0 cellspacing=0><tr><td bgcolor=#3366cc><img alt="" width=1 height=4></td></tr></table>
</body></html> 
```

现在，当我在应用程序中执行任何操作时会出现此错误，HTML 代码会在对话框中弹出。

**更新 2：**我的配额刚刚重置，我的应用程序再次正常运行。但这并没有回答我的问题，即为什么会首先发生这种情况。幸运的是，我仍在开发该应用程序，而我是唯一一个因服务器故障而感到不便的人。在这些情况下我该怎么做才能让我的服务器重新上线？这是普遍现象吗？如果服务器抛出错误并且我的应用程序无法运行，是否有某种方法可以接收电子邮件通知？显然，等待 24 小时让服务器重置不是一个有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:45:28.860

我猜你的应用程序可能是这样设计的，如果它的初始内存缓存查询失败，那么它会一遍又一遍地访问数据存储。或者未能在 memcache 中设置一个值，它永远不会再尝试，假设它在那里。为什么我不知道的日志中没有显示（您正在查看扩展的配额日志，而不是摘要吗？）

他们建议您在故障点中进行设计，例如，如果数据存储不可用，您的应用程序不会崩溃，而是会向用户返回一条合理的消息。同样的后端 - 它们应该 24/7 运行，但您仍然必须构建关闭代码，以防实例需要关闭（并且您会提前被告知！）。

但是，我怀疑您的问题（为什么会发生这种情况）以目前的形式可以回答。

# ruby - irb 给出一个 LoadError: cannot load watir-classic

> ID：15237154
> 
> 赞同：1
> 
> 时间：2013-03-06T01:04:46.660
> 
> 标签：ruby, rubygems, watir

在装有 Windows 7 Ultimate 的笔记本电脑上，我正在关注[http://watir.github.com/watirbook/chap04.html#installation](http://watir.github.com/watirbook/chap04.html#installation) ...上的在线 Watir 入门。

我已经按照页面上的说明安装了 ruby​​、devkit、watir。这看起来不错：

```
C:\Users\Afshin>ruby -v
ruby 2.0.0p0 (2013-02-24) [i386-mingw32]

C:\Users\Afshin>gem -v
2.0.0 
```

但是，仍然按照在线导师页面的说明，给了我以下信息：

```
C:\Users\Afshin>irb
DL is deprecated, please use Fiddle

irb(main):001:0> require "watir"
=> true

irb(main):002:0> browser = Watir::Browser.new
LoadError: cannot load such file -- watir-classic
        from C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
        from C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/watir-4.0.2/lib/watir/loader.rb:48:in `load_driver'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/watir-4.0.2/lib/watir/loader.rb:40:in `load_driver_for'
        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/watir-4.0.2/lib/watir/loader.rb:8:in `new'
        from (irb):2
        from C:/Ruby200/bin/irb:12:in `<main>' 
```

非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T19:50:50.613

我的初始脚本，导致提到的错误

```
require 'rubygems'
require 'watir'
require 'watir-webdriver'

b = Watir::Browser.new :ie

b.goto("http://www.google.be") 
```

从代码中删除了第二行

```
require 'rubygems'
require 'watir-webdriver'

b = Watir::Browser.new :ie

b.goto("http://www.google.be") 
```

现在它起作用了。不是真正的解决方案，而是一种解决方法。

我确实先安装了 watir-classic gem。我还没有测试过这是否真的需要第二个片段才能工作。

# unit-testing - Grails 2.0 单元测试过滤器：服务注入和依赖

> ID：15237159
> 
> 赞同：7
> 
> 时间：2013-03-06T01:05:38.140
> 
> 标签：unit-testing, grails, filter

目前将 grails 1.3.7 应用程序升级到 2.1.0 并有一组我想测试的过滤器。看到[用于测试过滤器的 grails 文档](http://grails.org/doc/latest/guide/testing.html#unitTestingFilters)表明现在支持过滤器的单元测试（/推荐？它在功能部分中提到但没有找到示例），我正在尝试将过滤器的一些现有集成测试转换为单元测试.

但是，我正在努力正确地“模拟”一个过滤器这个过滤器`dependsOn`/至少正确地为一些`service`正在注入过滤器的 s 实现一个模拟。

```
package com.example

import ... // excluded for brevity

class MyFilters {

    GrailsApplication grailsApplication
    SomeService someService

    def dependsOn = [MyOtherFilters]

    def filters = {
        all(controller: 'controllerToExclude', invert: true) {
            before = {
                if (grailsApplication.config.someConfigProperty) {
                    def someProperty = request.getAttribute('MY_ATTRIBUTE')

                    if (someProperty = someService.someMethod()) {
                        redirect(url: someService.getNewUrl(session))
                        return false
                    }
                }
                return true
            }
        }
    }
} 
```

另一个过滤器：

```
package com.example

class MyOtherFilters {   

    SomeOtherService someOtherService

    def filters = {
        all(controller: '*', action: '*') {
            before = {
                def foo

                if (params[MY_ATTRIBUTE]) {
                    foo = params[MY_ATTRIBUTE]
                    someOtherService.setMyAttribute(sitePreference, request) 
                }

                if (!foo) {
                    foo = someOtherService.getMyAttribute(request)
                }

                if (foo) {
                    request.setAttribute('MY_ATTRIBUTE', foo)
                }    

                return true
            }
        }
    }
} 
```

这是我正在使用的两个过滤器的一个非常简化的骨架版本（如果有人好奇，他们会阅读移动设备与桌面设备的偏好，然后根据该偏好进行过滤）。

所以我正在写的测试大致是这样的：

```
package com.example

import grails.test.mixin.TestFor // ... etc more imports here

@TestFor(SomeController)
@Mock(MyFilters) // TODO what goes here???
class MyFiltersTests {

    static final IPAD_USER_AGENT = 'Mozilla/5.0 (iPad; CPU OS 5_1 like Mac OS X; en-us) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B176 Safari/7534.48.3'
    static final NON_MOBILE_USER_AGENT = 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20100101 Firefox/7.0.12011-10-16 20:23:00'

    void testFilterRedirects() {
        grailsApplication.config.someConfigProperty = true
        // actual filter logic acts on this user-agent through some service calls, would like to mock it out though    
        request.addHeader("user-agent", IPAD_USER_AGENT) 
        def result

        withFilters(action: "index") {
            result = controller.index()
        }

        //assertSomething on result perhaps
        assertEquals "myExpectedRedirectUrl", response.redirectedUrl
    }
} 
```

就这段代码而言，它甚至不执行`MyFilters`代码。我尝试将依赖过滤器添加到模拟 ala：

```
@Mock([MyFilters, MyOtherFilters]) 
```

但是后来我遇到了`SomeOtherService`未定义方法的问题，并且没有找到正确模拟这些方法的方法（如何在过滤器上设置服务模拟？在控制器或服务上，您可以`def myMock = mockFor(SomeOtherService)`然后执行`controller.someOtherService = myMock.createMock()`或其他操作）排序，但是我找不到`withFilters`使用文档建议使用的此块为过滤器设置服务的方法。

理想情况下，我会嘲笑与`someService`and相关的任何事情`MyOtherFilters`，只是在这个过滤器上编写我的测试，但不确定测试过滤器有什么可能。

任何见解将不胜感激，如果您能做到这一点，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:30:59.277

有同样的问题。Grails Jira 中出现了一个错误[http://jira.grails.org/browse/GRAILS-8976](http://jira.grails.org/browse/GRAILS-8976)

我在[http://delvingintodev.carrclan.us/2012/12/testing-grails-filters-that-use-services.html](http://delvingintodev.carrclan.us/2012/12/testing-grails-filters-that-use-services.html) '测试使用服务的 Grails 过滤器'中找到了解决方法

您基本上必须在过滤器中使用服务，如下所示

```
package xxx.me

class MyFilters {
    def filters = {
        all(controller:'*', action:'*') {
            before = {
                applicationContext.getBean(MyService).doSomethingClever()
            }
        }
    }
} 
```

在这种情况下，您将能够在单元测试中模拟它

```
package xxx.me

@TestMixin(GrailsUnitTestMixin)
@Mock(MyFilters)
class MyFiltersTests {

    @Test
    public void testFilter(){
        defineBeans {
            myService(StubbedMyService)
        }
        SimpleController controller = mockController(SimpleController);

        withFilters(controller:"simple" , action:"index"){
            controller.index()    
        }
    }
}

class StubbedMyService extends MyService {
    def doSomethingClever(){
    }
} 
```

# com - Outlook 保存 MHT - 包括密件抄送、排除嵌入项目、显示地址

> ID：15237160
> 
> 赞同：0
> 
> 时间：2013-03-06T01:05:44.287
> 
> 标签：com, outlook, outlook-2010, outlook-object-model, mhtml

我使用 C# 和 Outlook 2010 对象模型将 Outlook 电子邮件保存为 MHT 格式 (MIME HTML)。将电子邮件另存为 MHT 没有问题。

```
 //mi is a MailItem
   //Save As MHT
   mi.SaveAs(@"D:\test.mht", OlSaveAsType.olMHTML); 
```

我想自定义生成的 MHT 的某些方面。

1.  Outlook 生成的 MHT 文件不显示已知有密件抄送收件人的电子邮件的密件抄送行。这些电子邮件取自发件人的电子邮件商店。是否有强制显示密件抄送行的选项？

2.  如果源电子邮件是富文本格式的电子邮件并包含嵌入文件，Outlook 会将嵌入文件存储在生成的 MHT 中。Outlook 在这方面做得很好。但是，我想清除嵌入的文件。是否有强制 Outlook 不将嵌入文件写入 MHT 的选项？保存为纯 HTML 不是一种选择，因为我想保留内嵌图像。

3.  Outlook 生成的 MHT 文件显示每个收件人的显示名称。我希望 MHT 文件显示每个收件人的显示名称和电子邮件地址。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:20:58.353

没有办法做到这一点，您需要自己生成 MHT 文件。

# c++ - 是 struct 的默认构造函数，就像 C++ 中的类一样调用

> ID：15237163
> 
> 赞同：0
> 
> 时间：2013-03-06T01:06:16.487
> 
> 标签：c++

C++ struct 是否也像类一样调用构造函数（默认、复制构造函数）和析构函数，或者它们遵循 C 语言的 struct 指南？那么在下面的示例中，是否调用了默认构造函数？

```
Foo structObject; \\Foo is a struct 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:07:14.423

是的，他们有。C++和C++ 之间的**唯一**区别在于其成员的可见性。默认情况下，成员为 public、private。`struct``class``Struct``class`

有效地，写作

```
class A {
public:
//// ...
} 
```

和写一样

```
struct A {
//// ...
} 
```

# java - 使用时间来确定执行了什么指令 - android

> ID：15237166
> 
> 赞同：0
> 
> 时间：2013-03-06T01:06:32.707
> 
> 标签：java, android, time, timer

有没有办法使用时间戳或其他功能来确定执行了什么操作？

例如，当单击按钮时，除非在最后一秒内单击了按钮，否则执行“A”，否则执行 B

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:13:05.563

您可以使用 System.currentTimeMillis()，它以毫秒为单位返回时间，例如

```
long last_click = 0;

// this is you interval time in milliseconds
long myTimeMillis = 1000;

// ... ... ...

// inside button click function

long time = System.currentTimeMillis()

if(time-last_click > myTimeMillis){
    do_taskA();
}else{
    do_taskB();
}

last_click = time; 
```

# c# - System.InvalidOperationException：从具体化的“System.Int32”类型到可为空的“Country”类型的指定转换无效

> ID：15237170
> 
> 赞同：2
> 
> 时间：2013-03-06T01:06:45.447
> 
> 标签：c#, .net, linq, entity-framework

我有一个在我的个人 PC 上运行良好的特定单元测试，但是每当我让 TFS 运行测试时，它都会失败并出现以下异常 -

> System.InvalidOperationException：从具体化的“System.Int32”类型到可为空的“Country”类型的指定转换无效。

通过跟踪堆栈跟踪，以下方法存在问题 -

```
public IEnumerable<IAddress> AddressSelectAll(long userID)
{
    using (var context = new Entities())
    {
        var addresses = context.Customers
                               .Where(x => x.UserId == userID)
                               .Select(y => new Address
                                                {
                                                    Address1 = y.Address1,
                                                    Address2 = y.Address2,
                                                    Address3 = y.Address3,
                                                    AddressID = y.AddressId,
                                                    City = y.City,
                                                    Country = y.Country != null ? (Country)y.Country : (Country?)null,
                                                    Postcode = y.Postcode,
                                                    State = y.State,
                                                    RecordEntryDate = y.RecordEntryDate,
                                                    Type = (AddressType)EFFunctions.ConvertToInt32(y.AddressType),
                                                    UserID = y.UserId
                                                }).ToList();

        return addresses.ToList();
    }
} 
```

如果它是相关的（怀疑是），我的 EFFunctions 类被定义为 -

```
public static class EFFunctions
{
    [EdmFunction("Model", "ConvertToInt32")]
    public static int ConvertToInt32(string text)
    {
        var result = string.IsNullOrEmpty(text) ? 0 : Convert.ToInt32(text);

        return result;
    }
} 
```

我的 .edmx 包含以下内容 -

```
<Function Name="ConvertToInt32" ReturnType="Edm.Int32">
  <Parameter Name="v" Type="Edm.String" />
  <DefiningExpression>
    CAST(v AS Edm.Int32)
  </DefiningExpression>
</Function> 
```

有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:19:57.097

您的问题可能与线路（或线路的一部分）有关

```
Country = y.Country != null ? (Country)y.Country : (Country?)null 
```

您在一个案例中将值转换为 Country 和 Country？在另一个。也许您可以将值替换为 -1，或者更可靠地将 Customer.Country 类型更改为 Country？而不是国家。

# json - jQuery：如何用 JSON 响应替换内容

> ID：15237171
> 
> 赞同：0
> 
> 时间：2013-03-06T01:06:47.857
> 
> 标签：json, jquery

我很难用 JSON 对象属性替换 HTML 元素的内容。这是我的代码：

```
url  = '/blah/blah-blah';
data = $.getJSON(url);
$(this).parent('.status').replaceWith(data.content); 
```

现在，我知道正在返回正确的 JSON 对象，并且它包含一个格式正确的属性，称为“内容”。（我在控制台中显示它）。其次，我知道我正在选择要替换的正确元素。（如果我替换`data.content`为“宾果！”我会看到屏幕上显示的文本。）

然而，当我运行上面的代码时，我看到我的元素的内容被什么都替换了。我究竟做错了什么？

请注意，我尝试用 替换`data.content`，`data.responseJSON.content`但这没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:09:42.463

您需要使用回调，

```
 url  = '/blah/blah-blah';
  $.getJSON(url, function(data) {
    $("some selector").parent('.status').replaceWith(data.content);
  }) 
```

在您的示例中， $.getJSON 没有返回任何有意义的内容——可能只是“未定义”。同时，它提出你的要求。当 getJSON 成功时，结果被传递给一个处理函数来处理它。如果您不提供回调，则当您从服务器收到响应时不会发生任何事情。

*或者*如果你不想使用新的选择器，你可以保存 $(this)。

```
 url  = '/blah/blah-blah';
  item = $(this)
  $.getJSON(url, function(data) {
    item.parent('.status').replaceWith(data.content);
  }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:11:55.150

AJAX 调用是异步的，所以当你尝试使用它时，内容还没有到达。当您在控制台中显示它时，您无法以足够快的速度看到响应没有立即到达。

`getJSON`当数据到达时，在调用中使用回调来处理数据：

```
url = '/blah/blah-blah';
$.getJSON(url, function(data) {
  $(this).parent('.status').replaceWith(data.content);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T01:16:36.587

您的代码在`.getJSON(url)`调用完成之前执行。尝试像这样指定成功处理程序：

```
$.getJSON(url, function(data) {
    $(this).parent('.status').replaceWith(data.content);
}); 
```

# php - 计算作物坐标

> ID：15237172
> 
> 赞同：0
> 
> 时间：2013-03-06T01:06:50.493
> 
> 标签：php, gd2

我试图弄清楚如何从一个小得多的图像计算全尺寸图像的裁剪坐标，假设全尺寸图像是 1775 x 2664，用户在裁剪页面上看到的图像（使用 jCrop）是 533 X 800。

小图上的裁剪坐标为：20,11,230,305

（从左开始，从上开始，从左结束，从上结束）

如何将坐标缩放到全尺寸图像。

我需要允许用户在预览页面上选择图像的一部分，然后使用 php 从全尺寸图像中提取图像的适当部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:25:18.927

给你一些参考：[http ://en.wikipedia.org/wiki/Rule_of_three_%28mathematics%29#Rule_of_Three](http://en.wikipedia.org/wiki/Rule_of_three_%28mathematics%29#Rule_of_Three)

```
// assuming fixed ratio on width and height
// which is the case in your example: ~33% for both dimensions
$FULL_WIDTH = 1775;
$SCALED_WIDTH = 533;

$ratio = $SCALED_WIDTH / $FULL_WIDTH;

$scaled_crop_coordinates = array(20, 11, 230, 305);

$full_crop_coordinates = array();
foreach($scaled_crop_coordinates as $val)
{
    $full_crop_coordinates[] = floor($val / $ratio);
}
var_dump($full_crop_coordinates); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:23:58.500

这应该工作：

```
left = 20 * (1775/533)
top = 11 * (2664/800)
right = 230 * (1775/533)
bottom = 305 * (2664/800) 
```

# java - 播放框架@Required

> ID：15237176
> 
> 赞同：5
> 
> 时间：2013-03-06T01:07:32.893
> 
> 标签：java, playframework, playframework-2.0

我是 Java 新手，我玩。浏览示例应用程序。你能帮我理解这个文件中发生了什么吗？[https://github.com/playframework/Play20/blob/master/samples/java/forms/app/models/User.java](https://github.com/playframework/Play20/blob/master/samples/java/forms/app/models/User.java)

我不明白为什么我们将这个接口声明为“public interface All {}”以及如何在此验证中使用它。“@Required(groups = {All.class, Step1.class})”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T01:15:03.800

`@Required`是在 Play 框架中创建的自定义[JSR-303注释。](http://beanvalidation.org/1.0/spec/)JSR-303 是用于验证 Javabean 的规范，它允许确保给定 Java bean 的值落在一组*约束*内。一些标准验证注释的示例：

*   [@Max](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/Max.html) - 带注释的元素必须是一个数字，其值必须小于或等于指定的最大值。
*   [@Min](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/Min.html) - 带注释的元素必须是一个数字，其值必须大于或等于指定的最小值。
*   [@NotNull](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/NotNull.html) - 带注释的元素不能为空。

每个 JSR-303 注释都允许定义*组*，其中每个组实际上只是一个类。这些组可用于对给定 bean 执行验证子集。在您的特定示例中，实现者定义了两个接口来表示这些组 -`All`和`Step1`. 然后他们将组添加到验证注释中，以指示这些验证属于该组。所以对于下面的课程：

```
public class MyBean {
    @Required(groups = {All.class, Step1.class})
    @MinLength(value = 4, groups = {All.class})
    public String username;
}

MyBean bean = new MyBean();
ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
Validator validator = factory.getValidator(); 
```

以下将对字段执行`@Required`和`@MinLength`验证`username`：

```
validator.validate(bean, All.class); 
```

而以下将仅执行`@Required`验证（针对该`username`字段）：

```
validator.validate(bean, Step1.class); 
```

# ruby - 使用 Ruby 1.9.3 进行单元测试

> ID：15237177
> 
> 赞同：2
> 
> 时间：2013-03-06T01:07:47.773
> 
> 标签：ruby

我上周刚开始学习 Ruby，所以请多多包涵。

我正在使用 Ruby 1.9.3。我在尝试运行单元测试时遇到问题，过去 2 天我一直在尝试，但我无法成功运行单元测试。

这是我的简单计算器类的代码：

```
class Calc
def initialize
end

def Add(leftOp, rightOp)
    return (leftOp + rightOp)
end

def Sub(leftOp, rightOp)
    return (leftOp - rightOp)
end

def Div(leftOp, rightOp)
    if(rightOp == 0)
        raise ArgumentError.new("Divided by 0")
    else
        return (leftOp / rightOp)
    end

    def Mult(leftOp, rightOp)
        return (leftOp * rightOp)
    end
end

myCalc = Calc.new
puts "2 + 3 = " + myCalc.Add(2, 3).to_s
puts "2 - 3 = " + myCalc.Sub(2, 3).to_s
puts "2 * 3 = " + myCalc.Mult(2, 3).to_s
puts "6 / 3 = " + myCalc.Div(6, 3).to_s
puts "10 / 0 = " + myCalc.Div(10, 0).to_s 
```

这工作正常。所有输出都按预期打印出来。现在，我想为这个类编写一个单元测试。下面是单元测试的代码：

```
require 'test/unit'
require 'test/unit/ui/console/testrunner'
require 'Calc'

class Test_Calc < Test::Unit::TestCase
    def setup
        myCalc = Calc.new
        @result_1 = myCalc.Add(5, 8)
        @result_2 = myCalc.Sub(9, 15)
        @result_3 = myCalc.Mult(8, 6)
        @result_4 = myCalc.Div(18, 3)
        @result_5 = myCalc.Div(2, 0)
    end

    def test_Add
        assert_equal(@result_1, 13)
    end

    def test_Sub
        assert_equal(@result_2, -6)
    end

    def test_Mult
        assert_equal(@result_3, 48)
    end

    def test_Div
        assert_equal(@result_4, 6)
    end

    def test_Div_Zero
        assert_match("\Divided by 0\", e.message)
    end
end

Test::Unit::UI::Console::TestRunner.run(Test_Calc) 
```

当我运行这个单元测试时，它吐出了这个错误

![在此处输入图像描述](../Images/a5055f6e331e5221c2e93333a644d16c.png)

Calc.rb 文件与 test_Calc.rb 文件位于同一目录中。为什么它看不到？我什至尝试将 Calc.rb 文件复制到“custom_require.rb”文件（“lib/ruby/site_ruby/1.9.1/rubygems”）的同一目录，但这没有帮助。

在网上搜索后，我了解到 Test::Unit 已被删除并替换为 MiniTest (!)。所以，我尝试了 MiniTest 的事情如下：

```
require 'minitest/unit'
require 'Calc'
class Test_Calc < MiniTest::Unit::TestCase
    #Test_Calc definition
end
MiniTest::Unit.autorun 
```

我仍然得到与以前完全相同的错误，所以也许我在 MiniTest 上做错了什么。

我什至按照以下站点的示例进行操作，但在我的情况下似乎不起作用。即使我有一个完全定义的类 (Calc.rb)，我仍然得到“Calc - (LoadError)”。

[http://www.ibm.com/developerworks/opensource/tutorials/os-ruby1/section3.html](http://www.ibm.com/developerworks/opensource/tutorials/os-ruby1/section3.html)

再次在网上搜索后，我了解到 test::unit 可以作为 gem 用于向后兼容，因此我从以下链接下载并安装了 test-unit-2.5.4.gem：

[http://rubygems.org/gems/test-unit](http://rubygems.org/gems/test-unit)

即使安装了 gem，它仍然无法工作（我检查以确保 gem 安装在“Ruby193\lib\ruby\gem\1.9.1\gems”中）。Ruby 仍然抱怨它“无法加载这样的文件——Calc (LoadError)”

那么，如何运行测试单元？我错过了什么？

预先感谢您的帮助。

更新：

按照 Blaine 的建议包含“.\Calc”后，我收到以下新错误消息：

![在此处输入图像描述](../Images/c35ae42a11e1d8748d7f5518a1396b69.png)

好吧，至少这次它识别出了 Calc 类，并开始加载测试套件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:17:36.000

首先，如果程序说它找不到文件，让你的要求看起来像这样：`require './Calc'`

其次，确保您使用的是最新版本的 minitest gem。您可以通过以下方式检查：

```
gem list 
```

该版本将在列表的右侧。截至今天，当前版本为 4.6.1。如果您的版本不正确，请执行以下操作进行更新：

```
gem install --version '4.6.1' (or whatever the version is) 
```

# multithreading - 如何在从非 Qt 多线程库调用的 QObject 派生类中实现回调函数？

> ID：15237179
> 
> 赞同：7
> 
> 时间：2013-03-06T01:08:07.473
> 
> 标签：multithreading, qt, callback

# （伪）代码

这是我遇到问题的概念的不可编译代码草图：

```
struct Data {};

struct A {};
struct B {};
struct C {};
/* and many many more...*/

template<typename T>
class Listener {
public:
  Listener(MyObject* worker):worker(worker)
  { /* do some magic to register with RTI DDS */ };

public:

  // This function is used ass a callback from RTI DDS, i.e. it will be
  // called from other threads when new Data is available
  void callBackFunction(Data d)
  {
  T t = extractFromData(d);

  // Option 1: direct function call 
  // works somewhat, but shows "QObject::startTimer: timers cannot be started 
  // from another thread" at the console...
  worker->doSomeWorkWithData(t); // 

  // Option 2: Use invokeMethod:
  // seems to fail, as the macro expands including '"T"' and that type isn't
  // registered with the QMetaType system...
//    QMetaObject::invokeMethod(worker,"doSomeGraphicsWork",Qt::AutoConnection,
//           Q_ARG(T, t)  
//         );

    // Option 3: use signals slots
    // fails as I can't make Listener, a template class, a QObject... 
//    emit workNeedsToBeDone(t);
  }

private:
  MyObject* worker;
  T extractFromData(Data d){ return T(d);};
};

class MyObject : public QObject {
Q_OBJECT

public Q_SLOTS:
  void doSomeWorkWithData(A a); // This one affects some QGraphicsItems.
  void doSomeWorkWithData(B b){};
  void doSomeWorkWithData(C c){};

public:
  MyObject():QObject(nullptr){};

  void init()
  {
  // listeners are not created in the constructor, but they should have the 
  // same thread affinity as the MyObject instance that creates them...
  // (which in this example--and in my actual code--would be the main GUI
  // thread...)
  new Listener<A>(this);
  new Listener<B>(this); 
  new Listener<C>(this); 
  };
};

main()
{
  QApplication app;

  /* plenty of stuff to set up RTI DDS and other things... */

  auto myObject = new MyObject();

  /* stuff resulting in the need to separate "construction" and "initialization" */

  myObject.init();

  return app.exec();

}; 
```

实际代码中的更多细节：

`Listener`示例中的RTI [DataReaderListener](http://community.rti.com/rti-doc/500/ndds.5.0.0/doc/html/api_cpp/classDDSDataReaderListener.html)，回调函数是[`onDataAvailable()`](http://community.rti.com/rti-doc/500/ndds.5.0.0/doc/html/api_cpp/classDDSDataReaderListener.html#a2bf93bed2f7bdb7b654489010386cd8f)

# 我想完成什么

我正在尝试编写一个小型分布式程序，它使用[RTI 的 Connext DDS](http://www.rti.com/products/dds/index.html)进行通信，使用[Qt5](http://qt-project.org/qt5)进行 GUI 的东西——但是，据我所知，我认为这些细节并不重要，因为问题归结为以下：

*   我有一个 QObject 派生对象`myObject`，它的线程亲缘关系可能与主 GUI 线程相关，也可能不相关（但为简单起见，我们假设是这种情况。）
*   我希望该对象对另一个非 Qt 3rd-party 库中发生的事件做出反应（在我上面的示例代码中，由 functions 表示`doSomeWorkWithData()`。

# 到目前为止我所理解的为什么这是有问题的

**免责声明：**像往常一样，在开始一个新项目时总会学到不止一件新东西。对我来说，这里的新事物是 / 是 RTI 的 Connext 和（显然）我第一次自己必须处理线程。

从阅读 Qt ( [1](https://qt-project.org/wiki/Threads_Events_QObjects)、[2](https://qt-project.org/doc/qt-5.0/qtcore/threads-qobject.html)、[3](https://qt-project.org/doc/qt-5.0/qtcore/qthread.html)、[4](http://blog.qt.digia.com/blog/2010/06/17/youre-doing-it-wrong/)和[5](https://mayaposch.wordpress.com/2011/11/01/how-to-really-truly-use-qthreads-the-full-explanation/) ) 中的线程，在我看来

*   QObjects 通常不是线程安全的，即我必须小心一些事情
*   *使用与 QObjects 进行“通信*”的正确方式应该可以让我避免自己处理互斥锁等，即其他人（Qt？）可以为我处理序列化访问。

因此，我不能简单地（随机）调用，`MyClass::doSomeWorkWithData()`但我需要对其进行序列化。一种可能很简单的方法是将事件发布到事件队列中，在我的情况下`myObject`，当时间可用时，将触发所需方法的执行。`MyClass::doSomeWorkWithData()`

# 我试图让事情发挥作用

我已经确认`myObject`，当与上面的示例代码类似地实例化时，它隶属于主 GUI 线程，即`myObject.thread() == QApplication::instance()->thread()`.

鉴于此，到目前为止，我已经尝试了三种选择：

## 方案一：直接调用函数

这种方法基于以下事实 -`myObject`存在于 GUI 线程中 - 所有创建的侦听器也附属于 GUI 线程，因为它们是由“myObject”创建并以这种方式继承其线程的

这实际上导致了`doSomeWorkWithData()`被执行的事实。但是，其中一些函数操纵 QGraphicsItems，每当出现这种情况时，我都会收到错误消息：“QObject::startTimer: timers cannot be started from another thread”。

## 选项 2：通过发布活动[`QMetaObject::invokeMethod()`](https://qt-project.org/doc/qt-5.0/qtcore/qmetaobject.html#invokeMethod)

试图通过*正确*发布一个事件来规避这个问题`myObject`，我试图用 标记`MyObject::doSomeWorkWithData()`，[`Q_INVOKABLE`](https://qt-project.org/doc/qt-5.0/qtcore/qobject.html#Q_INVOKABLE)但我未能调用该方法，因为我需要用 传递参数[`Q_ARG`](https://qt-project.org/doc/qt-5.0/qtcore/qmetaobject.html#Q_ARG)。我`struct A`在示例中正确注册并声明了由 等表示的自定义类型），但我失败了，因为 `Q_ARG`扩展以包含参数类型的文字，在模板化的情况下不起作用（`"T"`不是注册或声明的类型）。

## 尝试使用传统的信号和插槽

这种方法基本上直接失败了，因为 QMeta 系统不能使用模板，即在我看来，根本不可能有任何模板化的 QObjects。

# 我需要什么帮助

在花了大约一周的时间试图解决这个问题、阅读线程（并发现我的代码中的一些其他问题）之后，我真的很想把这件事*做好*。因此，如果：

1.  有人可以向我展示如何通过来自另一个非 QThread 控制的线程的另一个 3rd 方库（或其他任何东西）的回调函数调用 QObject 的成员函数的通用方式。

2.  有人可以向我解释为什么选项 1 有效，如果我根本不创建 GUI，即做所有相同的工作，只是没有 QGraphcisScene 对其进行可视化（并且项目`app`是 a`QCoreApplication`而不是 a`QApplication`并且所有与图形相关的工作都`#define`完成了） .

任何，我的意思是绝对任何，我能抓住的稻草真的很感激。

# 更新

根据接受的答案，我更改了代码以处理来自其他线程的回调：我在`void doSomeWorkWithData()`函数的开头引入了线程检查：

```
void doSomeWorkWithData(A a)
{
  if( QThread::currentThread() != this->thread() )
  {
    QMetaObject::invokeMethod( this,"doSomeWorkWithData"
                              ,Qt::QueuedConnection
                              ,Q_ARG(A, a) );
    return;
  }
  /* The actual work this function does would be below here... */
}; 
```

一些相关的想法：

*   `QMutexLocker`我正在考虑在语句之前引入 a `if`，但决定反对它：可能并行使用的函数的唯一部分（语句`return;`中的任何内容`if`） - 据我所知 - 线程安全。

*   手动将连接类型设置为`Qt::QueuedConnection`：*从技术上讲*，如果我正确理解了[文档](https://qt-project.org/doc/qt-5.0/qtcore/qt.html#ConnectionType-enum)，Qt 应该做正确的事情，而默认的`Qt::AutoConnection`, 应该最终变成`Qt::QueuedConnection`. 但是因为当达到那个声明时总是会出现这种情况，所以我决定明确地放在那里以提醒自己为什么会出现这种情况。

*   将排队代码直接放在函数中，而不是将其隐藏在临时函数中：我可以选择将调用`invokeMethod`放在另一个临时函数中，比如`queueDoSomeWorkWithData()', which would be called by the callback in the listener and then uses`invokeMethod `with an`Qt::AutoConnection' on `doSomeWorkWithData()`。我决定反对这个，因为我似乎无法通过模板自动编码这个临时函数（模板和元系统是原始问题的一部分），所以我的代码的“用户”（即实现的人`doSomeWorkWithData(XYZ xyz)`）会还必须手动键入临时函数（这就是正确解析模板类型名称的方式）。在我看来，在实际函数中包含检查可以安全地键入额外的函数头，使`MyClass`界面更简洁，更好地提醒读者`doSomeWorkWithData()`可能存在潜伏在黑暗中的线程问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T06:37:53.050

如果您确定单个函数将仅执行线程安全操作，则可以从另一个线程调用 QObject 子类上的公共函数。

Qt 的一个优点是它可以像处理 QThreads 一样处理外来线程。`threadSafeDoSomeWorkWithData`因此，一种选择是为每个函数创建一个除了非线程安全的函数`doSomeWorkWithData`之外什么都不做的函数。`QMetaMethod::invoke`

```
public:
  void threadSafeDoSomeWorkWithData(A a) { 
    QMetaMethod::invoke("doSomeWorkWithData", Q_ARG(A,a)); 
  } 
  Q_INVOKABLE void doSomeWorkWithData(A a); 
```

[或者，Sergey Tachenov 在他的回答](https://stackoverflow.com/a/7587795/331041)中提出了一种有趣的方式来做或多或少相同的事情。他将我建议的两种功能合二为一。

```
void Obj2::ping() {
    if (QThread::currentThread() != this->thread()) {
        // not sure how efficient it is
        QMetaObject::invoke(this, "ping", Qt::QueuedConnection);
        return;
    }
    // thread unsafe code goes here
} 
```

至于为什么您在不创建 GUI 时会看到正常行为？除了操作 GUI 对象之外，您可能没有做任何其他不安全的事情。或者，也许它们是您的线程安全问题显而易见的唯一地方。

# sql - 如何从不同的表中获取两个日期的差异并使用 SQL 查询将其生成为摘要？

> ID：15237180
> 
> 赞同：3
> 
> 时间：2013-03-06T01:08:15.147
> 
> 标签：sql, sql-server, sql-server-2008

我有两个来自不同表的日期（相同的参考），当 Table2 的 STATUS 等于“STOP”或“MAX”并将其放在摘要中时，我需要得到差异。我知道如何减去日期，但只能从同一张表中减去。请参阅下文以进一步解释我的情况，因为我很难完成代码。

```
Table1

REF#    BEGINDATE   
----   ----------- 
ABC1    12/31/2012   
CDE9    01/01/2013
EFG2    02/01/2013
MJK8    02/03/2013 
```

```
Table2

REF#     ENDDATE      STATUS
----    ---------     ------
CDE9    03/31/2013    STOP
MJK8    05/01/2013    MAX
EFG2    02/05/2013
ABC1    02/21/2013    STOP 
```

这是总结结果：

```
STATUS   30 below   30 to 79   80 and up
------   --------   --------   ---------
STOP                    1          1
MAX                                1 
```

这些是附加信息：

一个。Table2 中的 REF# 始终存在于 Table1 中（这使得 Table1 作为我的主表）

湾。摘要结果中的 3 列（以下 30 列，30 到 79 等）是每个状态的行数。

到目前为止，这就是我所拥有的：

```
SELECT STATUS, sum(case when *THIS IS WHERE IM STUCK* then 1 else 0 end) as 30 below,
sum(case when *THIS IS WHERE IM STUCK TOO* then 1 else 0 end) as 30 to 79,
sum(case when *NEED HELP IN THIS TOO* then 1 else 0 end) as 80 and up from Table2?
GROUP BY STATUS 
```

我希望有人可以帮助我如何解决这个问题，在此先感谢您的快速帮助。=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:10:34.107

你需要像 DateDiff(day, Date1, Date2) ...

```
SELECT t1.REF, 
  SUM(CASE WHEN DateDiff(day, t1.StartDate, t2.EndDate) < 30 THEN 1 ELSE 0 END)
FROM table1 t1 JOIN table2 t2 ON t1.REF = t2.REF
GROUP BY t1.REF
WHERE t2.STATUS in ('MAX', 'STOP') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:19:06.853

你需要的是一个加入。

```
SELECT t2.STATUS --SUM(case statement here  t1.BEGINDATE, t2.ENDDATE)
FROM dbo.Table1 AS t1
JOIN dbo.Table2 AS t2
ON t1.[REF#] = t2.[REF#]
AND t2.STATUS IN (''STOP','MAX')
GROUP BY t2.STATUS; 
```

从那里您可以在两个日期之间进行必要的计算。

有关加入结帐[的更多信息一个月的加入](http://sqlity.net/en/1146/a-join-a-day-introduction/)。

这 3 个`CASE`语句必须看起来像这样：

```
SUM(CASE WHEN DATEDIFF(DAY,t1.BEGINDATE,t2.ENDDATE) BETWEEN 30 AND 79 THEN 1 ELSE 0 END) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-28T03:16:45.300

试试这个我朋友！

```
SELECT table_1.REF, 

SUM(CASE WHEN DateDiff(day, table_1.StartDate, table_2.EndDate) < 30 THEN 1 ELSE 0 END)
FROM table1 table_1 
JOIN table2 table_2 ON table_1.REF = table_2.REF
GROUP BY table_1.REF

WHERE table_2.STATUS in ('max', 'stop') 
```

# android - 这样的按钮怎么放？

> ID：15237185
> 
> 赞同：-7
> 
> 时间：2013-03-06T01:08:46.933
> 
> 标签：android

![在此处输入图像描述](../Images/8101c517debf6b45c98c2657e8421535.png)

你好我想把我的数字按钮（1到9）这样

但现在是这样的：

![在此处输入图像描述](../Images/1c1de6a076516b9ac103a9c65d6c5630.png)

这是我的代码：

```
LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(LinearLayout.VERTICAL);
        layout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));

        LinearLayout layout2 = new LinearLayout(this);
        layout2.setOrientation(LinearLayout.HORIZONTAL);
        layout2.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT));

        TextView titleView = new TextView(this);
        titleView.setText("Table Layout");
        titleView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
        layout.addView(titleView);

        LinearLayout.LayoutParams param2 = new LinearLayout.LayoutParams(
                0, LinearLayout.LayoutParams.WRAP_CONTENT, 1);

        Button btnConnect = new Button(this);
        btnConnect.setText("Connect");
        btnConnect.setLayoutParams(param2);
        layout2.addView(btnConnect);

        TextView titleViewSpace = new TextView(this);
        titleViewSpace.setLayoutParams(param2);
        layout2.addView(titleViewSpace);

        Button btnDisconnect = new Button(this);
        btnDisconnect.setText("Disconnect");
        btnDisconnect.setLayoutParams(param2);
        layout2.addView(btnDisconnect);

        layout.addView(layout2);

        TableLayout tblLayout = new TableLayout(this);
        tblLayout.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT,TableLayout.LayoutParams.MATCH_PARENT));
        TableRow tblrow = null;

        for (int i = 1; i <= 9; i++) {
            if (i % 3 == 1) {
                tblrow = new TableRow(this);
                tblLayout.addView(tblrow);

            }
            Button b = new Button(this);
            b.setText("" + i);
            tblrow.addView(b);
        }

        TableRow tr = new TableRow(this);
        Button btnZero = new Button(this);
        btnZero.setText("0");
        Button btnHash = new Button(this);
        btnHash.setText("#");
        Button btnStar = new Button(this);
        btnStar.setText("*");

        tr.addView(btnZero);
        tr.addView(btnHash);
        tr.addView(btnStar);

        tblLayout.addView(tr);
        layout.addView(tblLayout);

        setContentView(layout); 
```

为了有上面的视图，我把按钮放在这个布局

```
new LayoutParams(0,LayoutParams.WRAP_CONTENT,1) 
```

但是，当我将此布局放入按钮（1 到 9）时，循环中的按钮会消失。解决方案可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:30:23.927

您可以在 google 中查找重量总和和布局重量。这两个属性会使按钮占据整个屏幕空间。

# ruby - 无需指南针手表自动编译持久 css

> ID：15237188
> 
> 赞同：0
> 
> 时间：2013-03-06T01:08:59.503
> 
> 标签：ruby, configuration, sinatra, compass-sass

我有一个基于[此示例](https://github.com/chriseppstein/compass-sinatra)的指南针 sinatra 项目。

正如在[这个拉取请求中的提交](https://github.com/rubycut/compass-sinatra/commit/568ea804ffae87967a9280cb5175470d3428d521)和[这个拉取请求评论](https://github.com/chriseppstein/compass-sinatra/pull/1)中所指出的，sinatra 能够根据请求自动生成编译后的 css 文件。

但是，这似乎是一种浪费，因为即使 css 文件没有更改，服务器也必须重新编译。如果服务器监视更改，根据文件更改重新编译，但会按需提供相同的静态 css 文件，这不是更好吗？这就像我们运行“指南针手表”并只提供编译文件一样工作。

那么我的问题是：有没有一种好方法可以让 sinatra 在更改时自动将我的 sass 文件编译成静态 CSS，而无需单独运行 watch compass？

注意：我还有一个 express/node/stylus 项目，它的行为是这样的，这让我相信这是可能的并且是合乎逻辑的方式，并且我只是错误地配置了我的 sinatra 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:11:04.047

To change the CSS you have to either:

*   push new files to the application server (with a possible restart)
*   recompile in the background (e.g. `compass watch` on the server)
*   get the server to compile on changes (using something like the example you gave)

Personally, I favour the first. I'm not sure why I'd want the server to compile ***static*** assets? It takes up valuable resources, and the CSS changes on my dev machine, so why not compile them on my dev machine? I've not heard good answers to these questions, so I use a [Guard](https://github.com/guard/guard)file (or you could use `sass watch` or `compass watch` as a background task e.g. `sass --watch app/views/stylesheets:app/public/css &`) to compile them, and then I check in the .css files and push them to the server.

YMMV.

# ember.js - 使用 ember.js 路由名称

> ID：15237189
> 
> 赞同：1
> 
> 时间：2013-03-06T01:09:01.520
> 
> 标签：ember.js

我有这样的路由器

```
App.Router.map(function () {
    this.route("about");
    this.resource("invoices", { path: "/invoices" }, function () {
        this.resource("invoices.show", { path: "/:id" });
        this.resource("invoices.update", { path: "/:id/edit" });
        this.route("create");
    });
}); 
```

并生成指向各种路线和资源的链接，我有这个

```
<nav>
    {{#linkTo "invoices.index"}}Invoices{{/linkTo}}
    {{#linkTo "invoices.show" 1}}Invoice{{/linkTo}}
    {{#linkTo "invoices.create"}}New invoice{{/linkTo}}
</nav> 
```

为什么我必须使用`invoices.show`show 资源的名称，然后将其引用为，`invoices.show`但我可以将`create`其用于路由，然后将其引用为`invoices.create`？

理想情况下，我的路由器是

```
App.Router.map(function () {
    this.route("about");
    this.resource("invoices", { path: "/invoices" }, function () {
        this.resource("show", { path: "/:id" });
        this.resource("update", { path: "/:id/edit" });
        this.route("create");
    });
}); 
```

并且它会自动为资源名称添加前缀，因为它们嵌套在发票资源中。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:28:28.593

是的，嵌套资源可以堆叠它们的名称，并且您应该能够使用点符号引用嵌套路由。

但是，您会想要做更多类似的事情：

```
 this.resource("invoices", { path: "/invoices" }, function () {
        // invoices.show
        this.resource("show", { path: "/:id" }, function() { 
             // invoices.show.update
             this.route("update", { path: "/edit" });
        });
        // invoices.create
        this.route("create");
    }); 
```

因为您的更新操作依赖于提供给 show 路由的对象。

基本上，依赖于相同资源或父路由中使用的资源子集的嵌套元素应定义为资源映射。叶节点可以定义为基本路由。

# ios - 使用对象 IOS 滑动手势

> ID：15237190
> 
> 赞同：0
> 
> 时间：2013-03-06T01:09:01.923
> 
> 标签：ios

我正在寻找类似于 iPhone 锁屏的东西。我希望用户能够拖动一个显示文本视图的按钮。我只是想要一些关于我将如何去做这件事的一般指导。我会使用滑动手势吗？一个拖动按钮......我正在寻找一个逼真的弹簧运动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:13:05.917

我要做的是在控件顶部创建手势句柄视图，并将按钮和文本视图作为子视图放置在它下面。并将滑动手势添加到gestureView并在检测到手势并显示文本视图时触发拖动按钮功能..

# java - 如何在条形javafx顶部显示条形值

> ID：15237192
> 
> 赞同：7
> 
> 时间：2013-03-06T01:09:14.873
> 
> 标签：java, javafx-2, bar-chart

从这段代码中，我可以生成 10 个条形图现在我想知道如何在条形图顶部显示每个条形图的值，如附图：![在此处输入图像描述](../Images/f8c28f4d5b5a5f1bad7679592080296e.png)

这是代码：

```
public class BarChartSample extends Application {

    @Override public void start(Stage stage) {
        stage.setTitle("Bar Chart Sample");
        final CategoryAxis xAxis = new CategoryAxis();
        final NumberAxis yAxis = new NumberAxis();
        final BarChart<String,Number> bc = 
            new BarChart<String,Number>(xAxis,yAxis);
        bc.setTitle("Country Summary");
        xAxis.setLabel("bars");       
        yAxis.setLabel("Value");

        XYChart.Series series1 = new XYChart.Series();
        series1.setName("...");       

for(int i=0;i<10;i++)
{
   //here i want to change color of bar if value of i is >5 than red if i>8 than blue 
series1.getData().add(new XYChart.Data("Value", i));

}          

}

public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T00:59:24.690

在`ChangeListener`每个数据项的`node`属性中，您可以调用以下函数将标签添加到栏的顶部：

```
private void displayLabelForData(XYChart.Data<String, Number> data) {
  final Node node = data.getNode();
  final Text dataText = new Text(data.getYValue() + "");
  node.parentProperty().addListener(new ChangeListener<Parent>() {
    @Override public void changed(ObservableValue<? extends Parent> ov, Parent oldParent, Parent parent) {
      Group parentGroup = (Group) parent;
      parentGroup.getChildren().add(dataText);
    }
  });

  node.boundsInParentProperty().addListener(new ChangeListener<Bounds>() {
    @Override public void changed(ObservableValue<? extends Bounds> ov, Bounds oldBounds, Bounds bounds) {
      dataText.setLayoutX(
        Math.round(
          bounds.getMinX() + bounds.getWidth() / 2 - dataText.prefWidth(-1) / 2
        )
      );
      dataText.setLayoutY(
        Math.round(
          bounds.getMinY() - dataText.prefHeight(-1) * 0.5
        )
      );
    }
  });
} 
```

该代码通过向每个条形节点的父节点添加一个文本标签来工作，然后在每次调整条形大小时根据条形和文本的边界动态定位文本标签。

我为此创建了一个[示例解决方案](https://gist.github.com/jewelsea/5094893)。

![标有图例的图表](../Images/b5f107d959045c6ee8292eb0c8c32990.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T15:09:29.767

JFX 中没有关于在条形图中显示条形的标签的选项。

您可以做的是扩展条形图类，并覆盖有关内容创建和分配的方法。

您可以在 javafx-ui-charts 项目中观察图表代码，该项目可以从 OpenJFX 存储库下载。

图表代码不难理解...

[从http://hg.openjdk.java.net/openjfx/8/master/rt](http://hg.openjdk.java.net/openjfx/8/master/rt)下载 rt-repository

找到项目 javafx-ui-charts 并打开它。查找条形图的实现。

# objective-c - -[NSNull objectForKeyedSubscript:]: 无法识别的选择器发送到实例

> ID：15237199
> 
> 赞同：12
> 
> 时间：2013-03-06T01:09:54.007
> 
> 标签：objective-c

我有一个例外说：

`-[NSNull objectForKeyedSubscript:]: unrecognized selector sent to instance`

是说我正在尝试使用`NSNull`密钥访问对象吗？知道是什么原因造成的以及如何修复它或进一步调试吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-06T01:29:05.380

修复它的方法是不要在 NSNull 对象上尝试 objectForKeyedSubscript。（我打赌你正在处理一些 JSON 数据并且没有准备好 NULL 值。）

（显然 objectForKeyedSubscript 是新的 array[x] 符号转换成的内容。）

（请注意，您可以通过简单地与`==`to进行比较来测试 NSNull `[NSNull null]`，因为应用程序中只有一个 NSNull 对象。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:24:23.240

不管编辑器告诉你什么，你存储的值是什么，在运行时你正在存储一个`NSNull`，然后在尝试调用`objectForKeyedSubscript`. 我猜这发生在预期的`NSDictionary`. 就像是：

`NSString *str = dict[@"SomeKey"]`

事先一段代码没有完成它的工作并在那里进行调查，或者执行一些验证：

```
NSDictionary *dict = ...;

if ( [dict isKindOfClass:[NSDictionary class]] ) {
    // handle the dictionary
}
else {
   // some kind of error, handle appropriately
} 
```

在处理来自网络操作的错误消息时，我经常遇到这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-21T20:19:01.647

我建议向 NSNull 添加一个类别来处理这个问题，就像你期望下标调用被发送到 nil 时一样。

```
@implementation NSNull (Additions)

- (NSObject*)objectForKeyedSubscript:(id<NSCopying>)key {
    return nil;
}

- (NSObject*)objectAtIndexedSubscript:(NSUInteger)idx {
    return nil;
}

@end 
```

一个简单的测试方法是这样的：

```
id n = [NSNull null];
n[@""];
n[0]; 
```

有了这个类别，这个测试应该被成功/温和地处理。

# tornado - 如何使用 Tornado 为静态 HTML 制作漂亮的 URL？

> ID：15237200
> 
> 赞同：1
> 
> 时间：2013-03-06T01:10:00.050
> 
> 标签：tornado, friendly-url

我有一个目录`static`并且我已经设置`static_url_prefix`为`/static/`，所以我的 HTML 文件可以在`server/static/panel.html`. 现在，我想重定向`server/panel`到这个 URL。

我`(r"/(panel\.html)", tornado.web.StaticFileHandler, {'path': ''})`在应用程序中尝试了许多变体，但它们都不起作用:-(。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:54:07.400

[使用RedirectHandler](http://www.tornadoweb.org/en/branch2.4/_modules/tornado/web.html#RedirectHandler)尝试以下路线：

```
(r"panel", tornado.web.RedirectHandler, {'url': '/static/panel.html'}) 
```

# ios - 删除（清除）iOS 应用的所有钥匙串数据的正确方法

> ID：15237210
> 
> 赞同：9
> 
> 时间：2013-03-06T01:11:26.730
> 
> 标签：ios, objective-c, keychain

我在钥匙串中存储了一些信息，有一种情况是我需要删除所有项目，而不是`[keychain removeObjectForKey:theKey]`为所有钥匙做，我可以这样做：

```
NSDictionary *spec = [NSDictionary dictionaryWithObjectsAndKeys:(id)kSecClassGenericPassword, kSecClass,
                      [self serviceName], kSecAttrService, nil];

return !SecItemDelete((CFDictionaryRef)spec); 
```

反而？

我试过了，它奏效了，只是不确定我做的是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T11:27:52.007

在我的应用程序中，我使用这条线来清除我的钥匙串：

```
[[[KeychainItemWrapper alloc] initWithIdentifier:@"my_key" accessGroup:nil] resetKeychainItem] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T19:30:52.127

我相信您所做的是正确的，实际上，您可以根据需要避免查询中的 kSecAttrService 参数。另一方面，SecItemDelete 返回一个 OSStatus 值，您可以检查该值以获取有关事务的更多详细信息。

```
 NSDictionary *spec = [NSDictionary dictionaryWithObjectsAndKeys:(id)kSecClassGenericPassword, kSecClass, nil];

    OSStatus status = SecItemDelete((CFDictionaryRef)spec);
    if (status == errSecSuccess)
       return YES;

    return NO; 
```

以下是可能的状态值[的代码和含义](http://developer.apple.com/library/ios/DOCUMENTATION/Security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/uid/TP30000898-CH5g-CJBEABHG)

# ios - Storyboard segue 有时会将我的视图控制器部分放在屏幕之外

> ID：15237214
> 
> 赞同：0
> 
> 时间：2013-03-06T01:12:00.993
> 
> 标签：ios, uiviewcontroller, uistoryboard, uistoryboardsegue

在我的 iPad 应用程序中，十分之二的测试人员报告了我无法在 iOS 6.1.2（iPad 和模拟器）上复制的问题。我的测试人员都在 6.0.1 上。这个问题只发生在大约 10% 的时间里，而且似乎在应用刚从后台返回时发生得更多。

问题是，当某个视图控制器以模态方式呈现时，使用情节提要 segues，有时，它不会在屏幕上居中。在那些时候，它似乎总是以 (0,0) 为中心：

![这就是它的样子。](../Images/b8952512855691d612f263ed043442a4.png)

现在，我实际上没有任何定位视图控制器的代码。我依靠 StoryBoard Segue 来定位和显示它。该segue的属性是：

*   风格：莫代尔
*   演示文稿：表格
*   过渡：交叉溶解
*   动画：是

（这些是在 IB 中设置的，而不是在代码中）。

我调用此视图控制器的代码部分是：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UISplitViewController *split =  ((CVAppDelegate *)[[UIApplication sharedApplication] delegate]).splitViewController;
    UINavigationController *navController = split.viewControllers[1];
    NSInteger row = [self.tableView indexPathForSelectedRow].row;
    if (row < [((CVAppDelegate *)[[UIApplication sharedApplication] delegate]).products count])
        [navController.viewControllers[0] performSegueWithIdentifier:@"ShowPicker" sender:@(row)];
    [_popover dismissPopoverAnimated:YES];

} 
```

最后一点可能有帮助的数据是，这个 viewcontroller 是从一个 tableviewcontroller 调用的，它本身就是一个弹出框，并且在显示这个新的 viewcontroller 时被关闭。

关于为什么我从未见过这个问题，我已经没有想法了，但其他几个人每天都会看到一次左右（我离他们很远，所以我无法亲自调试）。我在想它可能是 iOS 版本号，或者他们的 iPad 的方向是纵向的，并且由于我的应用程序仅针对横向方向编写，因此 iPad 在调用之前具有或具有的方向会有所不同此视图或从后台运行应用程序...

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:56:59.387

知道了。如果在屏幕上有键盘时触发 segue，则会发生这种情况。键盘附加到左侧视图控制器上的可编辑项目。因此，当 segue 触发时，新的视图控制器被定位在左视图控制器上，并向上推以考虑键盘 - 由于活动文本项不再活动，键盘已经被解除。

# knockout.js - 为什么单击事件仅针对此 KoGrid 模板中的第一个元素触发？

> ID：15237216
> 
> 赞同：2
> 
> 时间：2013-03-06T01:12:46.453
> 
> 标签：knockout.js, kogrid

我正在尝试将单击事件处理程序绑定到 KoGrid 中的某些锚标记。但是，点击事件仅附加到第一个锚标记。这不是语法错误，因为如果我切换标签的顺序，那么之前不工作的第二个链接就会开始工作。

这是 jsfiddle：[jsfiddle](http://jsfiddle.net/SaHFz/12/)

```
<!-- Html -->
<div style="height: 300px; width: 500px" class="gridStyle" data-bind="koGrid: gridOptions"></div>

// Javascript
function viewModel() {
    var self = this;

    self.Events = ko.observableArray([
        { FirstName: "Jenny", LastName: "Jones" },
        { FirstName: "Henry", LastName: "Howe" }
    ]);

    self.gridOptions = {
        data: self.Events,
        columnDefs: [
            { field: 'FirstName' },
            { field: 'LastName' },
            { field: 'ActionField0', displayName: '&nbsp;',
             cellTemplate:
                 '<a href="#" data-bind="click: $userViewModel.save">Save</a> ' +
                 '<a href="#" data-bind="click: $userViewModel.edit">Edit</a>'         
            }
        ],
        autogenerateColumns: false,
        canSelectRows: false,
        showColumnMenu: false,
        multiSelect: false,
        enableColumnResize: false
    };

    self.edit = function() {
        alert("Edit");
    }

    self.save = function() {
        alert("Save");
    }
}

$(function () {
    var peopleViewModel = new viewModel();
    ko.applyBindings(peopleViewModel);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T05:54:32.023

`cellTemplate` **要求有一个根级**元素。在您的情况下，您的单元格模板包含两个`a`，所以它只需要第一个。

为了使其工作（如果您不想创建两个单独的列）只需将两个锚包装在 a 中`div`：

```
cellTemplate:
    '<div>' +
    '<a href="#" data-bind="click: $userViewModel.save">Save</a> ' +
    '<a href="#" data-bind="click: $userViewModel.edit">Edit</a>' +
    '</div>' 
```

演示[JSFiddle](http://jsfiddle.net/XfnUn/)。

# ios - 使用 POST 上传图像文件

> ID：15237217
> 
> 赞同：-1
> 
> 时间：2013-03-06T01:12:47.117
> 
> 标签：ios, web-services, post

我正在尝试通过 POST 发送 UIImage 和一些额外的参数。

我已经尝试过[这个问题](https://stackoverflow.com/questions/8564833/ios-upload-image-and-text-using-http-post)的答案但没有成功：

等效的 HTML 表单如下（有效）：

```
<form method="POST" action="UploadURL" enctype="multipart/form-data">
   <input type="file" name="pic">
   <input type="submit" value="upload">
   <input type="hidden" name="param1" value="param1value"/>
   <input type="hidden" name="param2" value="param2value"/>
</form> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:08:14.750

我刚刚浪费了这么多时间......似乎与我一起工作的人给了我一个错误的 URL，它对任何事情都给出了相同的响应。我刚刚在这件事上浪费了这么多时间。

请参阅[此问题](https://stackoverflow.com/questions/8564833/ios-upload-image-and-text-using-http-post)以获得使用 POST 请求上传图像的良好答案。

# android - 在 Android 的编辑文本中从末尾键入文本

> ID：15237220
> 
> 赞同：0
> 
> 时间：2013-03-06T01:12:58.280
> 
> 标签：android, android-edittext

我有一个地址编辑文本和许多其他文本框，它们会在请求时自动从数据库中填充数据。

在地址编辑文本中。我启用了多行。这里发生的情况是，当用户开始输入文本时，文本是从头输入的，而不是从尾输入的。我不确定为什么会这样。

例如，如果我已经从 DB 中填充了文本“79 Edge Drive”。在关注地址时单击编辑后 - 我现在输入一些内容。它是这样输入的：“California79 Edge Drive”

我尝试了以下方法：

```
addText.requestFocus();
addText.setSelection(addText.length()); 
```

不工作？还有什么可以自动达到最后一个长度的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:16:40.477

您的问题与堆栈溢出中的问题基本相同：

[将光标放在 EditText 中文本的末尾](https://stackoverflow.com/questions/6217378/place-cursor-at-the-end-of-text-in-edittext)

marqss 说要这样做的地方：

```
EditText et = (EditText)findViewById(R.id.inbox);
et.setSelection(et.getText().length()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:18:09.467

你必须使用

```
addText.setSelection(addText.getText().length()); 
```

否则，您将获得 View 元素的长度，而不是 TextView 中的文本。

另外，请在发帖之前搜索您的问题，其他人已经问过，并且已经就同一主题进行了回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T01:18:58.780

尝试这个

```
addText.setSelection(addText.getText().length() ); 
```

# linux - 数据依赖分析

> ID：15237221
> 
> 赞同：1
> 
> 时间：2013-03-06T01:13:02.527
> 
> 标签：linux, optimization, gcc, compiler-construction, llvm

我需要为某些应用程序做一个数据依赖图。但是，我需要强调在应用程序的分析执行期间实际上发生的那些依赖关系。

我的问题是：我可以使用哪个工具对在 Linux over x86 上运行的应用程序进行数据依赖分析。

# facebook - 如何从 facebook 注销或使用 php 销毁活动会话？

> ID：15237228
> 
> 赞同：0
> 
> 时间：2013-03-06T01:13:55.720
> 
> 标签：facebook, session, logout

我有一个应用程序要求通过 facebook 进行注册，但在用户进行注册之前，系统应首先确定是否存在**活动会话**。如果用户登录到**facebook**，它应该会自动注销以重新开始。

但这是我卡住的地方。SDK 仅允许用户在连接到您的应用程序时从 facebook 注销。它使用应用程序的访问令牌。但是，如果他仍然没有注册到您的应用程序怎么办？他们的注销意味着从您的应用程序中注销，而不是真正从 Facebook 中注销。

**我的要求：**

**1.**我如何从 facebook 登出。

**2.**如何清除浏览器cookies？

**不是在特定的应用程序上，而是在整个 facebook 会话上。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:44:37.567

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:17:52.887

使用 logout.php 网址。

[https://developers.facebook.com/docs/reference/php/facebook-getLogoutUrl/](https://developers.facebook.com/docs/reference/php/facebook-getLogoutUrl/)

基本上，

```
 http://facebook.com/logout.php?next=YOUR_NEXT_URL_FOR_LOGOUT&access_token=USER_TOKEN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T11:29:58.410

1）通过使用从facebook注销

```
facebook=>getLogoutUrl(); 
```

2）通过使用清除会话：

```
$facebook->destroySession(); 
```

例子：

```
<a href="logout.php">Log Out</a> 
```

logout.php 页面代码如下：

```
<?php
require 'facebook.php';
$facebook->destroySession();
header( "location:index.php" );
?> 
```

# python - Python 2.7：线程挂起，不知道如何调试。

> ID：15237229
> 
> 赞同：1
> 
> 时间：2013-03-06T01:13:59.457
> 
> 标签：python, multithreading, debugging

我制作了一个脚本来下载壁纸作为学习练习，以更好地熟悉 Python/Threading。除非尝试请求 URL 时出现异常，否则一切正常。这是我遇到异常的函数（不是同一类的方法，如果重要的话）。

```
def open_url(url):
  """Opens URL and returns html"""
  try:
    response = urllib2.urlopen(url)
    link = response.geturl()
    html = response.read()
    response.close()
    return(html)
  except urllib2.URLError, e:
    if hasattr(e, 'reason'):
      logging.debug('failed to reach a server.')
      logging.debug('Reason: %s', e.reason)
      logging.debug(url)
      return None
    elif hasattr(e, 'code'):
      logging.debug('The server couldn\'t fulfill the request.')
      logging.debug('Code: %s', e.reason)
      logging.debug(url)      
      return None
    else:
      logging.debug('Shit fucked up2')      
      return None 
```

在我的脚本结束时：

```
 main_thread = threading.currentThread()
  for thread in threading.enumerate():
    if thread is main_thread: continue
    while thread.isAlive():
      thread.join(2)      
  break 
```

根据我目前的理解（这可能是错误的），如果线程未在 2 秒内完成它的任务，它应该超时。相反，它会坚持最后一段时间。如果我把它拿出来，它只会在脚本执行完成后挂起。

另外，我决定是时候做好准备，离开 Notepad++ 去使用带有调试工具的真正 IDE，所以我下载了 Wing。我是Wing的忠实粉丝，但脚本不挂在那里......你们都用什么来写Python？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:22:40.763

Python中没有线程中断，也没有办法取消线程。它只能自己完成执行。该`join`方法只等待 2 秒或直到终止，它不会杀死任何东西。您需要在线程本身中实现超时机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:25:39.700

我翻阅了书籍，并想出足够的方法来纠正我遇到的问题。我能够完全删除接近脚本末尾的代码。我通过不同的方式生成线程池来纠正这个问题。

```
for i in range(queue.qsize()):
  td = ThreadDownload(queue)
  td.start()
queue.join() 
```

在线程执行期间我也没有使用`try:`for 。`queue.get()`

```
 try:
    img_url = self.queue.get()
     ...
  except Queue.Empty:
     ... 
```

# java - 为什么我的 jarsigner 不起作用？

> ID：15237231
> 
> 赞同：0
> 
> 时间：2013-03-06T01:14:19.357
> 
> 标签：java, windows, cmd, javac, jarsigner

出于某种原因，为什么我尝试任何命令，包括`jarsigner`它会给我以下错误：

```
Error: Could not find or load main class sun.security.tools.JarSigner 
```

我的 Java 版本不正确吗？我已经多次重新安装 Java 并尝试了 64 位和 32 位版本。我`Java 7 update 45`在 Windows 7 上安装了最新版本的 Java JDK ( )。此外，我的`javac`命令给了我一个类似的错误：

```
Error: Could not find or load main class com.sun.tools.javac.Main 
```

但是，我的`java`命令没有。

我的`PATH`包括 java jdk bin `C:\Program Files\Java\jdk1.7.0_45\bin`，我还需要什么吗？我`CLASSPATH`的是`.;C:\Program Files (x86)\Java\jre7\lib\ext\QTJava.zip`，我尝试将其更改为 just `.`，但这也不起作用。我也尝试将变量设置为`Path`而不是，`PATH`但出现了同样的错误。我在我的`PATH`环境变量中搜索了很多次，没有这个词的迹象`Java`。上面我的垃圾桶`PATH`是这个词的唯一标志`Java`。现在我的用户环境变量中有我的 Java bin。我需要在系统环境变量中使用它吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T00:50:32.493

您的 PATH 错误，或者它包含来自过时或大量卸载的 JDK 的 bin 目录，或者您的 CLASSPATH 指向过时的 JDK，或者可能是 JRE。如果是后者，请从 PATH 或 CLASSPATH 中删除该元素。

> 如果我需要任何东西，我实际上需要 CLASSPATH 什么。

除了 '.' 之外，不需要 CLASSPATH 设置。就Java本身而言。

# delphi - 有什么简单的方法可以在不自己解析的情况下比较连接字符串？

> ID：15237234
> 
> 赞同：7
> 
> 时间：2013-03-06T01:14:49.790
> 
> 标签：delphi, delphi-xe2, ado

我需要能够比较两个不同的连接字符串并确定它们是否是相同的信息。我无法进行简单的字符串比较，因为属性的布局可能不同，但仍代表相同的连接。

在我为此编写自己的比较之前，是否已经有可以做到这一点的东西？

我已经寻找了一种方法，但我找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T01:19:28.820

您可以使用该[`IDataInitialize::GetDataSource`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725368%28v=vs.85%29.aspx)方法，该方法从给定的连接字符串返回未初始化的数据源对象。由于此方法返回指向某个`IUnknown`类型的数据源对象的指针，因此您无法直接比较为两个比较的连接字符串获得的对象。但是，那些未初始化的数据源对象上[`you can query`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714926%28v=vs.85%29.aspx)的[`IDBProperties`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms719607%28v=vs.85%29.aspx)接口使您可以访问给定提供程序支持的所有属性。

要获取属性集，您需要使用[`IDBProperties::GetProperties`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714344%28v=vs.85%29.aspx)方法。这将返回一个结构，其中包含一个元素（属性）[`DBPROPSET`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714367%28v=vs.85%29.aspx)数组。[`DBPROP`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms717970%28v=vs.85%29.aspx)然后，您将简单地迭代此数组并以您需要的方式比较这两个数据源对象的属性。

如果连接字符串相等，则以下`IsSameConnStr`函数返回 True，否则返回 False。请注意，使用的属性值比较是不区分大小写的，除了[`DBPROP_AUTH_PASSWORD`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms723116%28v=vs.85%29.aspx)属性，它与区分大小写进行比较：

```
uses
  ActiveX, ComObj, OleDB;

function IsSameVarWideStr(const AValue1, AValue2: OleVariant;
  ACaseSensitive: Boolean = False): Boolean;
begin
  Result := VarType(AValue1) = VarType(AValue2);
  if Result then
  begin
    if ACaseSensitive then
      Result := WideCompareStr(VarToWideStr(AValue1),
        VarToWideStr(AValue2)) = 0
    else
      Result := WideCompareText(VarToWideStr(AValue1),
        VarToWideStr(AValue2)) = 0;
  end;
end;

function IsSameConnStr(const AConnStr1, AConnStr2: WideString): Boolean;
var
  I: Integer;
  DataSrc1: IUnknown;
  DataSrc2: IUnknown;
  DataInit: IDataInitialize;
  PropSet1: PDBPropSet;
  PropSet2: PDBPropSet;
  PropSetCnt1: ULONG;
  PropSetCnt2: ULONG;
  Properties1: IDBProperties;
  Properties2: IDBProperties;
const
  DBPROP_AUTH_PASSWORD = $00000009;
begin
  // first check if the input connection strings aren't exactly the same
  Result := CompareStr(AConnStr1, AConnStr2) = 0;
  // if they are not same, then...
  if not Result then
  begin
    // create IDataInitialize object instance
    OleCheck(CoCreateInstance(CLSID_DataLinks, nil, CLSCTX_INPROC_SERVER or
      CLSCTX_LOCAL_SERVER, IID_IDataInitialize, DataInit));
    // get data source objects for both input connection strings
    OleCheck(DataInit.GetDataSource(nil, CLSCTX_INPROC_SERVER,
      PWideChar(AConnStr1), IUnknown, DataSrc1));
    OleCheck(DataInit.GetDataSource(nil, CLSCTX_INPROC_SERVER,
      PWideChar(AConnStr2), IUnknown, DataSrc2));
    // query for IDBProperties objects of the data source objects
    if Succeeded(DataSrc1.QueryInterface(IID_IDBProperties, Properties1)) and
      Succeeded(DataSrc2.QueryInterface(IID_IDBProperties, Properties2)) then
    begin
      // get properties of data source objects
      OleCheck(Properties1.GetProperties(0, nil, PropSetCnt1, PropSet1));
      OleCheck(Properties2.GetProperties(0, nil, PropSetCnt2, PropSet2));
      try
        // same DB provider will have the same set of initialization properties,
        // so the first check might be the property count, if that differs, then
        // at least DB provider is different, so if this equals, then...
        if PropSetCnt1 = PropSetCnt2 then
        begin
          // initialize positive result
          Result := True;
          // iterate all the properties
          for I := 0 to PropSet1.cProperties - 1 do
          begin
            // check if we're comparing the same property and if so, compare the
            // property values; for password property compare the value with case
            // sensitivity, for all the others case insensitively; if any of this
            // doesn't match, we're done with False result and we can exit
            if (PropSet1.rgProperties[I].dwPropertyID <>
              PropSet2.rgProperties[I].dwPropertyID) or
              not IsSameVarWideStr(PropSet1.rgProperties[I].vValue,
              PropSet2.rgProperties[I].vValue,
              PropSet1.rgProperties[I].dwPropertyID = DBPROP_AUTH_PASSWORD) then
            begin
              Result := False;
              Break;
            end;
          end;
        end;
      finally
        // release the property sets; note that you should avoid this common
        // try..finally block and that you should free also each property array
        // element by using IMalloc::Free; why I've used CoTaskMemFree see this
        // question http://stackoverflow.com/q/3079508/960757
        CoTaskMemFree(PropSet1);
        CoTaskMemFree(PropSet2);
      end;
    end;
  end;
end; 
```

我认为用法很清楚，所以我宁愿提到一些连接字符串的结果：

```
IsSameConnStr = True
AConnStr1: Provider=MSDASQL.1;Persist Security Info=True;Data Source=datasource
AConnStr2: Provider=MSDASQL.1;Persist Security Info=True;Data Source=DATASOURCE

IsSameConnStr = True
AConnStr1: Provider=MSDASQL.1;Data Source=datasource;Persist Security Info=True
AConnStr2: Provider=MSDASQL.1;Persist Security Info=True;Data Source=DATASOURCE

IsSameConnStr = True
AConnStr1: Provider=MSDASQL.1;Password=PASSWORD;Data Source=datasource;Persist Security Info=True
AConnStr2: Provider=MSDASQL.1;Data Source=DATASOURCE;Password=PASSWORD;Persist Security Info=True

IsSameConnStr = False - password differs in case sensitivity
AConnStr1: Provider=MSDASQL.1;Password=PASSWORd;Data Source=datasource;Persist Security Info=True
AConnStr2: Provider=MSDASQL.1;Data Source=DATASOURCE;Password=PASSWORD;Persist Security Info=True 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T12:38:33.520

要获取`ConnectionString`属性的集合，您可以将 分配`ConnectionString`给`TADOConnection`（而不实际连接到数据库）并使用`TADOConnection.Properties`集合（集合项为`ADOInt.Property_`），例如：

```
ADOConnection.Properties.Get_Item('Data Source') 
```

您可能应该比较*特定*属性以确定连接是否通过特定提供程序设置到特定数据存储。例如：、、、、
`Provider`\ （可选）。`Data Source``Initial Catalog``User ID``Password`

根据提供者的不同，您可能需要忽略许多属性，例如：
`Workstation ID`、、、、等...`Persist Security Info``Use Procedure for Prepare``Auto Translate`

这是一个如何迭代`TADOConnection`属性集合的示例：

```
var
  ADOConnection: TADOConnection;
  PropName, PropValue: WideString;
  I: Integer;

  ADOConnection := TADOConnection.Create(nil);
  try
    ADOConnection.ConnectionString := 'Provider=MSDASQL.1;Password=secret;Data Source=127.0.0.1;User ID=user;Initial Catalog=mycatalog';
    for I := 0 to ADOConnection.Properties.Count - 1 do
    begin
      // Properties.Item[I] is ADOInt.Property_
      PropName := ADOConnection.Properties.Item[I].Name;
      PropValue := VarToWideStr(ADOConnection.Properties.Item[I].Value);
      ShowMessage(Format('%s=%s', [PropName, PropValue]));
    end;
  finally
    ADOConnection.Free;
  end; 
```

`ConnectionString` *在连接到数据库之后* 可能会添加/更改更多属性`TADOConnection`，因此您需要考虑到这一点。

# knockout.js - ObservableArray 中的 KnockoutJS computedObservable

> ID：15237237
> 
> 赞同：0
> 
> 时间：2013-03-06T01:15:13.883
> 
> 标签：knockout.js, knockout-2.0

学习 KnockoutJS 并碰壁。为游戏制作计算器。总结版本如下：

用户输入“neededXp”。每次更新“neededXp”时，数组都应该重新计算“need”。

```
self.neededXp = ko.observable(0);

function calcItem(name, image, xp, level) {
    this.name = name;
    this.level = level;
    this.xp = xp;
    this.need = ko.computed(function() {
        var req = self.neededXp()/this.xp;
        return req;
    });
}

self.calcContent = ko.observableArray([

]);

self.populateFishing = function() { 
self.calcContent.push(calcItem('Shrimp','#',1,10));
self.calcContent.push(calcItem('Sardine','#',5,20));
self.calcContent.push(calcItem('Shark','#',110,76));
self.calcContent.push(calcItem('Sea Turtle','#',38,79));
self.calcContent.push(calcItem('Manta Ray','#',46,81));
    } 
```

目前，它第一次完美计算，并且*似乎*在更新“neededXp”时，它会使用正确的“neededXp”重新计算所有值，但是数组中每个索引的计算 observable 从数组的最后一个成员。

澄清一下，当我更新“neededXp”时，所有成员“需要”都使用*Manta Ray*值中的“xp”重新计算，而不是它们各自的索引。

可能真的很明显，希望有人可以指导我。

编辑：重新阅读我的代码后，我想我可以明白*为什么*会这样，但我不知道如何解决。如果有意义的话，我不知道如何维护数组中的“xp”值。

EDIT2： http: [//jsfiddle.net/sTnY7/](http://jsfiddle.net/sTnY7/) jsfiddle 为可用性减小了数组大小。点击鱼按钮来填充表格，然后将“目标级别”更改为 6 以最简单地演示问题。这就是问题发生的地方——所有“#Required”都从数组的最后一个成员中获取 XP 值并重新计算。如果目标级别为 6，则显示 102.2 - 例如，“虾”应为 511。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:54:39.990

好的 - 所以我自己创造了一个小提琴

[http://jsfiddle.net/dD67p/2/](http://jsfiddle.net/dD67p/2/)

不得不做出一些改变——

范围（正如我所怀疑的） - calcItem 现在看起来像这样：

```
function calcItem(name, image, xp, level) {
    var self2 = this;
    self2.name = name;
    self2.level = level;
    self2.xp = xp;
    self2.need = ko.computed(function () {
        var req = self.neededXp() / self2.xp;
        return req;
    }); 
```

此外，您错过了`new`创建`calcItem`对象并将它们推送到`calcContent`.

我变成`populateFishing`了样子

```
self.populateFishing = function () {
    self.calcContent.push(new calcItem('Shrimp', '#', 1, 10));
    self.calcContent.push(new calcItem('Sardine', '#', 5, 20));
    self.calcContent.push(new calcItem('Shark', '#', 110, 76));
    self.calcContent.push(new calcItem('Sea Turtle', '#', 38, 79));
    self.calcContent.push(new calcItem('Manta Ray', '#', 46, 81));
} 
```

您可以在此小提琴中看到更新所需Xp 时绑定的数据更改。

# jquery - 使用 Jade 和 Bootstrap 在 node.js 上标记和自动完成

> ID：15237239
> 
> 赞同：1
> 
> 时间：2013-03-06T01:15:20.307
> 
> 标签：jquery, node.js, autocomplete, tags, pug

我正在尝试在stackoverflow上实现像here这样的标记功能，但是到目前为止我无法克服jade、jquery的组合......我正在使用引导程序，所以bootstrap-tagmanager似乎是一个不错的选择，但我无法实现它。我在这里找到了这个小提琴：http: [//jsfiddle.net/vt2z4/](http://jsfiddle.net/vt2z4/)但即使这样我也做不到。有人做过或有什么建议吗？

小提琴代码是

```
<input type="text" name="tags" placeholder="Tags" class="tagsManager"/>
<input type="hidden" value="Pisa,Rome" name="hiddenTagList"> 
```

Javascript：

```
$(function () {
    $(".tagsManager").tagsManager({
         prefilled: ["Pisa", "Rome"],
         CapitalizeFirstLetter: true,
         preventSubmitOnEnter: true,
         typeahead: true,
         typeaheadAjaxSource: null,
         typeaheadSource: ["Pisa", "Rome", "Milan", "Florence", "New York", "Paris",      "Berlin", "London", "Madrid"],
         delimeters: [44, 188, 13],
         backspace: [8],
         blinkBGColor_1: '#FFFF9C',
         blinkBGColor_2: '#CDE69C',
         hiddenTagListName: 'hiddenTagListA'
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T08:45:32.953

一开始尽量保持简单。让我们知道什么对您不起作用并发布您的代码（不工作的示例代码），以便我们实际提供帮助。

## 基本示例

如果使用 twitter bootstrap 从简单的静态数据测试开始，使用这样的数据属性（不要忘记引导所需的 js 和 css 包含）

```
<input type='text' data-provide='typeahead' autocomplete='off'  data-items='4'  
data-source='["one", "two", "three", "four", "five"]'/> 
```

## 资源

更多示例：http: [//twitter.github.io/typeahead.js/examples/](http://twitter.github.io/typeahead.js/examples/)

预输入文档：http: [//twitter.github.io/bootstrap/javascript.html#typeahead](http://twitter.github.io/bootstrap/javascript.html#typeahead)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T14:53:39.190

最近我正在使用 express、jade、bootstrap 和 tagmanager开发一个[POC （一个简单的天气报告 web 应用程序）。](https://github.com/sumveds/weather-report/)我能够使**标签输入字段**工作，并且我已经在 GitHub 上共享了 POC。

玉模板[文件](https://github.com/sumveds/weather-report/blob/master/views/weather.jade)看起来像下面的代码片段。

```
block content
  .jumbotron
    h2 Weather report
    h3 Welcome to the weather report page!

  div.container
    .navbar.navbar-default(role='navigation')
      .container-fluid
        .collapse.navbar-collapse
          form(name="report", class="navbar-form navbar-left", action="/weather/report", method="POST")
            input(type="text", name="cities", class="form-control", data-role="tagsinput", placeholder="Type in city and press enter...")
            input(type="submit", class="btn btn-default", value="Submit")

  div.footer 
```

**城市**输入字段的属性之一是`data-role="tagsinput"`。

输入字段如下图所示： ![在此处输入图像描述](../Images/0613d46459e232aa502ec28e1cf88499.png)

然后，我有一条路线（routes/weather.js），一旦用户单击提交按钮，就会被击中。

我希望这对你有帮助。如果有人需要进一步澄清，请发表评论。

# css - 如何使用 CSS 跨列

> ID：15237243
> 
> 赞同：0
> 
> 时间：2013-03-06T01:16:05.110
> 
> 标签：css

我试图让基本的 CSS“表格”样式工作，但我不知道如何让表格元素跨越多个列。我的 HTML 如下所示：

```
<div class="dtable">
    <div class="dspan-row">
        <div class="dcell">This text wants to span all 3 columns</div>
    </div>
    <div class="drow">
        <div class="dcell">First name:</div>
        <div class="dcell">Bob</div>
        <div class="dcell">Something else</div>
    </div>
    <div class="drow">
        <div class="dcell">Last name:</div>
        <div class="dcell">Smith</div>
        <div class="dcell">Something else</div>
    </div>
  </div> 
```

我的 CSS 看起来像这样：

```
.dtable {display: table;}
.drow {display: table-row;}
.dcell {
    display: table-cell;
    padding: 10px;
}
    .dcell > * {vertical-align: middle;}
.dspan-row {???} 
```

如何设置 dspan-row 类的样式以使文本跨越所有表格列？我是否需要使用子元素来为跨越所有列的行提供文本，或者是否有一些魔法可以用来消除该子元素并只写

```
<div class="dspan-row">This text wants to span all 3 columns</div> 
```

# java - iPhone/iPad 应用程序开发连接到 java http 服务器

> ID：15237250
> 
> 赞同：0
> 
> 时间：2013-03-06T01:17:18.147
> 
> 标签：java, ipad, http, web-applications, connection

好的，所以我还是 Objective C 的新手，目前正在学习它。我想制作一个人们可以登录并将数据提交到数据库的应用程序。我进行了研究，发现我需要连接到 Web 服务器（我将使用 Java Web 服务器）并从该服务器与数据库服务器进行通信。

**但是，我只是想知道如何从 IPad 应用程序（我将在未来制作）连接到 Java 应用程序服务器，例如 Glashfish**。为此，我会制作什么样的网络应用程序（servlet？）？如果我这样做了，我会使用 URL wrting 方法来传输数据吗？

因为我使用的是 Glassfish，所以我想使用 http 连接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:21:40.263

您可以通过 java web 应用程序公开 Restful API；并在您的 iOS 应用程序中访问这些 api。现在有很多适用于 iOS 的 rest-client 库。

也可以直接将数据写入url连接，但是比较繁琐复杂。

# asp.net-4.0 - 简单成员资格提供程序异常 - 建立连接时发生与网络相关或特定于实例的错误

> ID：15237258
> 
> 赞同：0
> 
> 时间：2013-03-06T01:18:13.907
> 
> 标签：asp.net-4.0

从主机运行我的代码时出现异常

当我从连接到远程数据库的本地计算机运行时，一切正常。一旦部署到网络主机中，简单成员资格提供程序就会引发以下异常。我在其他控制器中使用相同的连接字符串并且没有问题 - 与数据库的连接很好。

这是我认为会产生异常的行：

WebSecurity.InitializeDatabaseConnection("MapEntities", "UserProfile", "UserId", "UserName", autoCreateTables: true);

有什么线索吗？非常感谢。

```
[SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +5061946
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +234
   System.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, Boolean encrypt, Boolean trustServerCert, Boolean integratedSecurity) +341
   System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject) +129
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +270
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +195
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +232
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +185
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +33
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +524
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +66
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +479
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +108
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
   System.Data.SqlClient.SqlConnection.Open() +125
   System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act) +85
   System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act) +349
   System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection) +265
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +34

[ProviderIncompatibleException: The provider did not return a ProviderManifestToken string.]
   System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) +163
   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +40

[ProviderIncompatibleException: An error occurred while getting provider information from the database. This can be caused by Entity Framework using an incorrect connection string. Check the inner exceptions for details and ensure that the connection string is correct.]
   System.Data.Entity.ModelConfiguration.Utilities.DbProviderServicesExtensions.GetProviderManifestTokenChecked(DbProviderServices providerServices, DbConnection connection) +163
   System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest& providerManifest) +39
   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +46
   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +62
   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +117
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +453
   System.Data.Entity.Internal.InternalContext.CreateObjectContextForDdlOps() +17
   System.Data.Entity.Database.Exists() +42
   indspire.Filters.SimpleMembershipInitializer..ctor() in e:\Visual Studio 2012\indspire\Filters\InitializeSimpleMembershipAttribute.cs:35

[InvalidOperationException: The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588]
   indspire.Filters.SimpleMembershipInitializer..ctor() in e:\Visual Studio 2012\indspire\Filters\InitializeSimpleMembershipAttribute.cs:54

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Threading.LazyHelpers`1.ActivatorFactorySelector() +81
   System.Threading.LazyInitializer.EnsureInitializedCore(T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory) +113
   System.Threading.LazyInitializer.EnsureInitialized(T& target, Boolean& initialized, Object& syncLock) +127
   indspire.Filters.InitializeSimpleMembershipAttribute.OnActionExecuting(ActionExecutingContext filterContext) in e:\Visual Studio 2012\indspire\Filters\InitializeSimpleMembershipAttribute.cs:22
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +74
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +20
   System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain) +511
   System.Web.Mvc.Async.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35() +20
   System.Web.Mvc.Async.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState) +190
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +159
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state) +182
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState) +478
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123
   System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeAction(ControllerContext controllerContext, String actionName, AsyncCallback callback, Object state) +287
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__17(AsyncCallback asyncCallback, Object asyncState) +30
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123
   System.Web.Mvc.Controller.BeginExecuteCore(AsyncCallback callback, Object state) +343
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123
   System.Web.Mvc.Controller.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +282
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.BeginExecute(RequestContext requestContext, AsyncCallback callback, Object state) +15
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__2(AsyncCallback asyncCallback, Object asyncState) +76
   System.Web.Mvc.Async.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout) +123
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +236
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +48
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970436
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T01:09:36.473

终于弄清楚出了什么问题。在过滤器“InitializeSimpleMembershipAttribute.cs”（我之前更改过的地方）和模型“AccountModels.cs”（我不知道的那个）上有对连接字符串的引用。

因此，更新模型中的连接字符串是解决方案。

我不明白的一件事是，即使使用“错误”的连接字符串，它也可以在连接到远程数据库的本地计算机上运行。

# php - PHP Javascript Div 刷新

> ID：15237260
> 
> 赞同：0
> 
> 时间：2013-03-06T01:18:19.283
> 
> 标签：php, javascript, reload

我在页面上每 20 秒刷新一次 div。该代码刷新了 div，但也在自身内部嵌套了一个 div。

```
<script>
  setInterval(function(){
  $("#open").load("test.php #open");
  }, 20000);
</script> 
```

在 javascript 重新加载之前：

```
<div id="open">
  <p>Testing</p>
</div> 
```

javascript重新加载后：

```
<div id="open">
    <div id="open">
        <p>Testing</p>
    </div>
</div> 
```

无论页面站点存在多长时间，在 javascript 运行后它总是只有一个嵌套的 div。如何让这个不加载另一个嵌套的 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:23:00.047

我假设 test.php 返回`<div id="open">(blah)</div>`？

尝试：

```
$("#open").load("test.php #open").children( ).unwrap( ); 
```

虽然你真的应该改变 php 脚本。

# area - cv2.contourArea 没有得到正确的区域

> ID：15237264
> 
> 赞同：0
> 
> 时间：2013-03-06T01:18:47.363
> 
> 标签：area

'1.png 只有一个轮廓'

```
img = cv2.imread('1.png')

retval,dst = cv2.threshold(img,120,255,cv2.THRESH_BINARY)

contours, hierarchy = cv2.findContours(dst,cv2.RETR_EXTERANL,cv2.CHAIN_APPROX_SIMPLE)

print cv2.contourArea(contours[0],False) 
```

图像只有一个轮廓，然后轮廓是一个列表。当我更改`contours[0]`为`contours[3]`或其他数字时，仍然有一个区域。我对这个问题一无所知，只有一个轮廓。

为什么会出现这么多值？是发现thresh的问题吗？需要你的帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:29:03.827

问题是 OpenCV 认为的轮廓只是您认为的轮廓的一部分。换句话说，OpenCV 正在将你的轮廓分割成几块。您可以通过添加各个轮廓的区域来获得整个区域，但这种方法并不可靠。

您可以尝试的是[Image Morphology](http://docs.opencv.org/doc/tutorials/imgproc/opening_closing_hats/opening_closing_hats.html)。使用它，您可以“增长”轮廓，使它们重叠得更多，这意味着 OpenCV 将它们识别为单个轮廓的机会会更大。

但是，这种方法会导致精度损失。因此，如果您需要一个确切的区域，您将不得不依赖其他方法。对于复杂的几何形状，这不是一项简单的任务。

我使用的另一种“快速而肮脏”的解决方案是创建一个新的单通道 Mat ( `Mat::zeros`)，绘制填充颜色值为 255 ( `drawContours`) 的轮廓，然后对内容求和（在 c++ 中`cv::sum`，这是我*认为*是`cv2.sum`)，然后将结果除以 255。这将得到以像素为单位的区域，并且比对各个轮廓的区域求和更可靠，因为它会考虑它们之间的重叠。

# perl - 如何将 Perl 变量插入 Sqlite3

> ID：15237271
> 
> 赞同：0
> 
> 时间：2013-03-06T01:19:26.797
> 
> 标签：perl, sqlite

我想使用 Perl DBI 将值插入到 Sqlite3 表中。我能够毫无问题地插入硬编码值。当我尝试使用 perl 变量时，出现错误“DBD::SQLite::db do failed: no such column:”

这有效：

```
$dbh->do("insert into Gene values (12, 'AAAAAA', 66, 86, 76)"); 
```

但是这段代码

```
$dbh->do("INSERT INTO Gene values (NULL, $sequence, $siteNumber, $begin, $length)"); 
```

抛出错误

```
DBD::SQLite::db do failed: no such column 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T02:25:27.220

当然，您应该始终`prepare`和`execute`您的 SQL 语句一起使用变量值的占位符。

试试这个代码

```
my $sth = $dbh->prepare('INSERT INTO Gene VALUES (?, ?, ?, ?, ?)');
$sth->execute(undef, $sequence, $siteNumber, $begin, $length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T09:07:58.710

您的问题将出现在 $sequence 上，它要求在插入语句中引用是有效的 SQL 字符串文字。结果，它认为您试图引用名为 AAAAAA 的列，而不是您想要的字符串 'AAAAAA'。Perl 的字符串插值不会为您添加引号。

占位符和 $dbh->prepare 是迄今为止最强大的解决方案（例如，如果您的字符串包含引号字符 ' 怎么办？$dbh->prepare 已经正确编码）。

# perl - Traceroute 日志到 CSV Perl 解析器正则表达式问题

> ID：15237272
> 
> 赞同：1
> 
> 时间：2013-03-06T01:19:27.950
> 
> 标签：perl

我编写了一些 shell 脚本，它们运行到主机的跟踪路由，然后将它们保存到一个文件中。这完美地工作`.log`并按预期将所有数据输出到文件。

然后我继续编写了一个简单的 Perl 脚本，将其`.log`转换为一个`.csv`文件，以便我可以将其导入到 Excel 中。但是，在查看生成的`.csv`文件时，我编写的 Perl 脚本在处​​理具有 IP 地址的数据包时存在问题。

例如，`.log`文件中的这一行被完美解析：

`1 139.222.0.1 0.941 ms 1.446 ms 1.996 ms`

进入`.csv`文件为：

`1,139.222.0.1,0.941 ms,1.446 ms,1.996 ms`

但是，traceroute 是否应该返回与文件中存储的内容类似的任何内容`.log`：

`12 154.54.57.98 7.579 ms 154.54.74.42 7.009 ms 130.117.0.58 7.480 ms`

然后它被错误地解析到`.csv`文件中并破坏了整个以下`.csv`文件（这是一个虚构的例子）：

`11,213.248.77.134,7.432 ms,9.038 ms,213.248.70.238 ms`

正如您所看到的，使用跳跃时间给出的 IP 现在用作数据包所花费的时间。

我很困惑如何解决这个问题！任何帮助将不胜感激，这是一个代码片段，可将每个跃点的日志转换为 csv：

```
 my $start = "'Hop','IP','T1','T2','T3'";
  print OUTPUT "\n$_$start\n";
 };

  print OUTPUT "$1,$2,$3 ms,$4 ms,$5 ms\n" if (/(\d+)\s+(\S+)\s+(\S+)\s+ms\s+(\S+)\s+ms\s+(\S+)/); 
```

**编辑**

编写了我自己的修复程序，添加了额外的 csv 列并适当地插入其中

```
 my $start = "'Hop','IP','T1','T1IP','T2','T2IP',T3'";
  print OUTPUT "\n$_$start\n";
 };

 if (/(\d+)\s+(\S+)\s+(\S+)\s+ms\s+(\S+)\s+ms\s+(\S+)\s+ms/){
 print OUTPUT "$1,$2,$3 ms, ,$4 ms, ,$5 ms\n";

}elsif (/(\d+)\s+(\S+)\s+(\S+)\s+ms\s+(\S+)\s+(\S+)\s+ms\s+(\S+)\s+ms/){
 print OUTPUT "$1,$2,$3 ms,$4,$5 ms, ,$6 ms\n";

}elsif (/(\d+)\s+(\S+)\s+(\S+)\s+ms\s+(\S+)\s+ms\s+(\S+)\s+(\S+)\s+ms/){
 print OUTPUT "$1,$2,$3 ms, ,$4 ms,$5,$6 ms\n";

}elsif (/(\d+)\s+(\S+)\s+(\S+)\s+ms\s+(\S+)\s+(\S+)\s+ms\s+(\S+)\s+(\S+)\s+ms/){
 print OUTPUT "$1,$2,$3 ms,$4,$5 ms,$6,$7 ms\n";
}; 
```

感谢您的所有帮助/回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:50:08.083

猜测你想要什么，没有标题代码：

```
my $re_ip = qr/\d+\.\d+\.\d+\.\d+/;
while(<INPUT>) {
  my @v = split(/($re_ip)/);
  my $hop = (shift(@v) =~ /(\d+)/)[0]; # the hop number?
  for my $v (@v) {
    if ($v =~ /$re_ip/) {
      print OUTPUT "$hop,$v,";
    } else {
      my @ms = $v =~ /(\S+\s+ms)/g;
      print OUTPUT join(",", @ms), "\n";
    }   
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:46:41.357

对于您显示的数据，我只会将行拆分为空格而不是`ms`.

```
my $csv = join ',', split /\s+(?!ms)/, $line; 
```

但是您显示的代码暗示跟踪路线信息与日期混合在一起，因此这可能不合适。

**更新**

看过您的数据后，我认为这应该可以满足您的要求。

请注意，您打印的标题名称与行中具有多个 IP 地址的数据不对应。我不确定在这种情况下你想做什么。

```
#!/usr/bin/perl

use strict;
use warnings;
use autodie;

my $logfile    = 'trace.log';
my $parsedfile = 'trace.csv';

open my $infh,  '<', $logfile;
open my $outfh, '>', $parsedfile;

while (<$infh>) {
    if (/^[a-z]{3}\s+[a-z]{3}/i) {
        print $outfh $_;
        print $outfh qq{"Hop","IP","T1","T2","T3"\n};
    }
    elsif (/^\s*\d/) {
        chomp;
        s/^\s+//;
        print $outfh join(',', split /\s+(?!ms)/), "\n";
    }
} 
```

**输出**

```
Wed Mar  6 01:58:49 GMT 2013
"Hop","IP","T1","T2","T3"
1,139.222.0.1,0.987 ms,1.412 ms,1.971 ms
2,10.0.0.1,0.445 ms,0.500 ms,0.552 ms
3,172.16.0.34,1.667 ms,0.875 ms,1.503 ms
4,193.62.92.71,1.939 ms,2.547 ms,2.529 ms
5,146.97.130.249,2.561 ms,2.447 ms,4.615 ms
6,146.97.65.85,5.309 ms,6.709 ms,5.376 ms
7,146.97.65.65,7.133 ms,7.340 ms,7.323 ms
8,146.97.65.37,9.362 ms,9.750 ms,9.804 ms
9,146.97.35.125,9.473 ms,9.485 ms,8.815 ms
10,213.248.84.177,8.798 ms,9.171 ms,8.505 ms
11,213.248.77.134,8.333 ms,7.837 ms,213.248.70.238,7.721 ms
12,154.54.74.42,7.879 ms,154.54.72.186,7.450 ms,154.54.57.94,7.862 ms
13,66.28.4.189,81.812 ms,81.433 ms,154.54.30.129,80.648 ms
14,154.54.30.17,217.548 ms,154.54.43.10,217.531 ms,66.28.4.222,109.029 ms
15,154.54.27.53,216.490 ms,154.54.42.241,195.393 ms,154.54.27.53,216.389 ms
16,154.54.42.241,195.141 ms,193.123 ms,192.900 ms
17,154.54.28.85,99.232 ms,154.54.5.229,99.127 ms,98.931 ms
18,154.54.31.21,102.739 ms,154.54.5.229,99.086 ms,98.803 ms
19,154.54.31.21,102.719 ms,38.122.60.46,101.206 ms,101.052 ms
20,216.234.104.254,102.619 ms,38.122.60.46,101.415 ms,101.275 ms
21,75.98.163.130,100.512 ms,100.409 ms,100.485 ms 
```

# objective-c - 一行上的两个作业

> ID：15237274
> 
> 赞同：4
> 
> 时间：2013-03-06T01:19:56.510
> 
> 标签：objective-c

我知道在Objective C中使用了这样的代码。

```
_conversation.lastMessageSentDate = message.sentDate = [NSDate date]; 
```

我是否正确地假设此代码同时设置了`conversation.lastMessageSentDate`和？`message.sentDate``NSDate date`

还是我误解了这行代码？

其他语言有这样的格式吗？我用 Python 和 Java 编程过，从来没有见过这样的代码。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:24:51.560

这不是两个声明，而是两个赋值语句。你对它的工作方式也是绝对正确的。

它起作用的原因是赋值表达式是产生值的有效表达式。最右边的作业首先被评估

```
message.sentDate = [NSDate date] 
```

然后是第二个作业：

```
_conversation.lastMessageSentDate = /*the result of the first assignment*/ 
```

请注意，这是评估的顺序，而不是实际分配的顺序：这些可能以任何顺序发生，因为在没有序列点的情况下未指定副作用的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:24:57.707

多重作业在许多语言中很常见，人们只是比单一作业少使用它们。

Ruby 通过多个赋值做了一些有趣的事情，例如：

```
name, address1, address2, city, step = record.split(',')  # split a CSV record into multiple fields 
```

# nsdictionary - NSDictionary 存储冗余对象的副本 - 如何防止？

> ID：15237276
> 
> 赞同：-1
> 
> 时间：2013-03-06T01:19:57.520
> 
> 标签：nsdictionary, redundancy

我已经构建了一些代码来制作辅助字典来存储主字典的键。所以我可以得到一个值的键。为了使它们唯一，如果有两个或多个相同的值，我将字典对象的 ID 存储为键，并将它们的键存储为对象。

但是当两个对象具有相同的值时，它们也具有相同的 ID。因此我无法检索两个不同的密钥：

```
NSDictionary *myDict = @{@"key1": @"obj1", @"key2": @"obj1", @"key3" : @"x"};
NSLog(@"%p",[myDict objectForKey:@"key1"]);
NSLog(@"%p",[myDict objectForKey:@"key2"]); 
```

输出：

```
2013-03-06 02:03:28.740 DictTest[2855:303] 0x1000028e8
2013-03-06 02:03:28.741 DictTest[2855:303] 0x1000028e8 
```

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:53:06.453

回答我自己的问题：这不是字典的问题，而是字符串文字的问题。@"obj1" 总是给出相同的 ID。为了解决这个问题，我必须通过以下方式设置字典：

```
NSDictionary *myDict = @{@"key1": [NSMutableString stringWithFormat:@"%@",@"obj1"], @"key2": [NSMutableString stringWithFormat:@"%@",@"obj1"], @"key3" : @"x"}; 
```

请注意“NSMutableString”！您将需要可变对象。

# google-app-engine - 从 Jinja2 中包含的模板访问变量？

> ID：15237277
> 
> 赞同：0
> 
> 时间：2013-03-06T01:19:58.557
> 
> 标签：google-app-engine, jinja2

我正在开发应用程序引擎。

我有一个父模板：

```
{% set active_page = 'linked_accounts' -%}

{% block side_column %}
    {% include 'blocks/settings_sidebar.html' %} 
{% endblock %} 
```

settings_sidebar 包含

```
<h4>Settings</h4>
<hr>
{{active_page}}
<ul class="side_navigation">
    <li><a class="{% if 'my_account' == active_page %}active{% endif %}" href="/my_account">My Account</a></li>
    <li><a class="{% if 'linked_accounts' == active_page %}active{% endif %}" href="/linked_accounts">Linked Accounts</a></li>
</ul> 
```

我的问题是 active_page 是空的。文档声明默认情况下包括包括其父范围，但这里似乎并非如此。

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-03-06T19:08:01.797

弄清楚了。我必须在块声明中添加范围，否则包含没有变量访问权限。

# sql-server-2008 - 在 TSQL 中，如何合并多组用户数据以获取每个用户一行包含所有数据的数据集？

> ID：15237281
> 
> 赞同：0
> 
> 时间：2013-03-06T01:20:29.273
> 
> 标签：sql-server-2008, tsql, merge, full-outer-join

假设我有十个用户数据表（在 10 个不同的系统中），并且任何用户都可以在这 10 个表中的零个或多个表中拥有记录。

连接查询会合并来自所有 10 个表的数据，这样它会生成一个结果集，每个用户一行，所有 10 个表中的列。对于每个用户的记录，没有该用户数据的表的列将为空。

我遇到的问题是，在用户名上对表 1 (t1) 和表 2 (t2) 执行完全联接后，我留下了一个结果集，其中 t1.Username 或 t2.Username 可能为空（对于例如，如果用户仅在 t1 中有记录，但在 t2 中没有记录，反之亦然）。由于任一用户名都可能为空，因此我应该将哪个用户名字段与 t3（和后续表）连接，而无需编写带有“或”条件的复杂“on”子句。

恐怕要干净地做到这一点的唯一方法是在每次加入后合并用户名，并将每个后续表加入到前面结果集的合并用户名字段中。

我的第一个选择如下所示：

```
select coalesce(t1.username,t2.username) as U2, t1.*, t2.*
from t1 full outer join t2 on t1.Username = t2.Username 
```

然后我必须将 t3 加入 t3.Username = U2 上的结果集。但是，在我加入 t4 之前，我必须合并 t3.Username 和 U2 以获得 U3，所以我可以在 U3 上加入 t4.Username，依此类推。这似乎要求第一个 select 语句是查询中的子查询，该查询选择新的合并用户名，对于每个附加表，依此类推。查询的最终形式似乎必然是一系列嵌套的子查询。这是必须的，还是有其他方法可以做到这一点？

我不想做的是针对一个唯一用户名列表的一系列左连接，我通过合并所有 10 个表的用户名预先生成该列表。虽然这会起作用并且是一个非常干净的单级查询，但这 10 个表中的每一个的生成都是昂贵的，所以我不想预先生成它们只是为了像这里的答案一样提取唯一的用户名：[https： //stackoverflow.com/a/9233478/88409](https://stackoverflow.com/a/9233478/88409)

我还在这里看到了另一个讨论：[http](http://www.listserv.uga.edu/cgi-bin/wa?A2=ind1110b&L=sas-l&P=1445) ://www.listserv.uga.edu/cgi-bin/wa?A2=ind1110b&L=sas-l&P=1445 ，它显示了 4 个不同版本的如何完成（其中第一个避免子查询），但它在 where 子句中使用合并，随着每个附加表的大小增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:52:45.920

将 10 个集合中的每一个生成一个表变量（基本上是一个缓存）。然后在表变量上使用其他问题中的技术。我建议在每个表变量上声明一个主键，以便更快地合并它们。

# ruby-on-rails-3 - 我可以在 Heroku 上使用多少个 Ruby Fiber？

> ID：15237287
> 
> 赞同：1
> 
> 时间：2013-03-06T01:20:56.683
> 
> 标签：ruby-on-rails-3, heroku, fibers

我正在试验“async rails”，以帮助减轻使用缓慢的 3rd-party 服务的痛苦。

**宝石文件**

```
gem 'eventmachine'
gem 'rack-fiber_pool',  :require => 'rack/fiber_pool'
gem 'em-synchrony', :require => ['em-synchrony',
                                 'em-synchrony/em-http',
                                 'em-synchrony/activerecord'] 
```

**配置.ru**

```
require ::File.expand_path('../config/environment',  __FILE__)
use Rack::FiberPool, :size => 6
run MyApp::Application 
```

有谁知道 Heroku 的 Cedar 堆栈上可以使用多少个 Ruby Fiber？或者如何去确定这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:20:24.093

和你一样，我目前正在尝试使用 ruby​​ 和纤维来提高应用程序的性能。从我所阅读和思考的内容来看，您可以使用的纤维数量应该几乎没有限制。

我想记住（请自己检查），每个测功机最多可以使用 500 Mb 的 RAM。每根光纤都会为您的应用程序的 RAM 使用量增加几 kb（我认为是 2kb）。只要您的应用程序不使用完整的 500Mb，即使使用 1000 根光纤也应该没问题。

但是您应该在之前达到性能/并发边界，因为您的应用程序一次仍然只处理一个纤程。在您的情况下，它将取决于外部服务。

# dependencies - 服务之间的控制流和数据是否应该分开？

> ID：15237288
> 
> 赞同：2
> 
> 时间：2013-03-06T01:20:56.740
> 
> 标签：dependencies, etl

控制流和数据应该分开吗？

*在我看来，显而易见的答案是否定的……但我想要一些更明确的论据来说明为什么不……*

**所以......这是一个场景**

*   服务生成数据并将其发布到本地表以供 ETL 单独流程提取并集成到主报告数据仓库中。
*   有一个建议是源服务应该通知 ETL 数据可用......所以它不需要定期检查

我一点也不喜欢这个。。为什么？

*   它创建了一个结构依赖，因为服务需要了解 ETL
*   它还创建了时间依赖性（如果任一进程关闭/崩溃怎么办？）

如果 ETL 对数据感兴趣，它应该主动进行检查——另一种方法是让服务主动将其发送到消息队列，从而将通知委托给排队基础设施。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:49:42.080

我曾经在以 ETL 为导向的中央流程的应用程序上工作了将近十年。当您使用像这样移动数据的流程时，创建有关流程运行和在这些运行期间加载的数据的元数据非常重要。这对于审计目的将证明是无价的。它还可以帮助您监控性能，如果操作正确，还可以帮助您监控加载数据的正确性。

此外，在您的情况下，它将允许消费者进程通过以相同方式检查数据加载元数据表来检查新可用的数据，而不是为不同的数据表发明单独的查询。

# delphi - Delphi 错误：“无法聚焦已禁用或不可见的窗口”

> ID：15237290
> 
> 赞同：4
> 
> 时间：2013-03-06T01:21:09.860
> 
> 标签：delphi, delphi-xe2

运行已编译的程序时出现错误。我已经采取了我能想到的所有预防措施来防止出现错误，例如在隐藏或集中它们之前启用表单。该应用程序显示一个`DimmerForm`（灰色渐变覆盖），然后`NewFileForm`在覆盖的顶部显示一个。完成它的`NewFileForm`工作并确定要制作的文件并`tabsheet`在页面控件中创建一个新文件`MainForm`并显示新创建的选项卡表。到目前为止所有这些工作（我可以在`NewFileForm`关闭之前中断并且发生任何错误并看到标签表已创建并成功显示）。然后`NewFileForm`关闭，这再次正常工作。

当任何东西试图将焦点设置回`MainForm`. 隐藏`DimmerForm`，或单击`MainForm`，或将焦点设置到`MainForm`直通代码都会导致出现错误消息。将代码放在 { `try`, `except`, `end`} 中也不会阻止错误消息。我已经搜索了代码中可能由焦点触发的所有其他方法，`MainForm`并且在错误发生之前没有输入任何其他方法（所以不能导致它）。

我在我的应用程序的以前版本中编写了几乎完全相同的代码，然后决定从头开始对其进行重组。该应用程序的先前版本在表单聚焦方面工作顺利。

这是打开的代码`NewFileForm`：

```
procedure TMainForm.NewFilesToolButtonClick(Sender: TObject);
begin

  ShowDimmer;
  NewFileForm.ShowModal;
  HideDimmer;

end; 
```

这是显示调光器形式的代码：

```
procedure ShowDimmer;
begin

  // Enable to prevent errors
  DimmerForm.Enabled := true;

  // Hide dimmer form and show mainform
  DimmerForm.Show;

end; 
```

这是隐藏调光器形式的代码：

```
procedure HideDimmer;
begin

  // Enable to prevent errors
  DimmerForm.Enabled := true;
  MainForm.Enabled := true;

  // Hide dimmer form and show mainform
  DimmerForm.Hide;
  MainForm.SetFocus;

end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-06T13:22:15.623

通常，您将焦点调用到尚未创建的内容（在您正在创建的表单上），尝试将一些 onCreate 代码移动到 onShow。如果没有更多细节，很难说出发生了什么，但试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-20T14:11:38.673

有时此错误是由 Post 事件期间数据库组件的某种活动引起的...如果您尝试了其他任何方法，您可以尝试这个快速解决方案：将连接到 Dataset 的 Datasource 设置为 NIL，然后在 Post 后将其设置回来事件完成。

像这样的东西：

```
Try
    Datasource1.DataSet := NIL;

    Try
        Query1.Post;
    Except
        On E: Exception Do
        Begin
            ShowMessage('Post error!' + #13#10 + #13#10 + E.Message);
            Exit;
        End;
    End;

Finally
    Datasource1.DataSet := Query1;
End; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-09-18T11:55:12.243

Arioch发表的评论中给出的解决方案[“](https://stackoverflow.com/users/976391/arioch-the)

> 您还可以启用“使用调试 DCU” [...]

# oracle11g - 一对多独特的“set” oracle db

> ID：15237293
> 
> 赞同：0
> 
> 时间：2013-03-06T01:21:15.097
> 
> 标签：oracle11g, foreign-keys, primary-key, foreign-key-relationship, unique-constraint

我不确定如何创建一对多关系，但将许多项目限制为每个唯一主键的“集合”。

数据库：甲骨文 11g

例子：

**PK表**：

```
CUST(PK)
100
200 
```

**有效的 FK 表数据**：

```
CUST(FK) | ITEM
100 | 101
100 | 102
200 | 101
200 | 102 
```

**无效的 FK 表数据**：

```
CUST(FK) | ITEM
100 | 101
100 | 101
200 | 104
200 | 104 
```

任何建议如何建立这样的关系？我想限制唯一性，因此不可能向 FK 表添加违反上述“设置”唯一性的值。

这可以纯粹在 Oracle DB 端完成，还是我必须从访问 Java 代码中强制执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:31:07.260

只需创建一个包含两列的[唯一约束](http://docs.oracle.com/cd/B19306_01/server.102/b14200/clauses002.htm)：CUST 和 ITEM，类似于：

```
ALTER TABLE secondtable
ADD CONSTRAINT custItem UNIQUE (CUST, ITEM) 
```

除了你的外键之外，创建这个约束

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T05:24:09.173

这可能会帮助您..按照以下方式创建表格....

```
create table cust_id 
           (cus_id number primary key) 
                  tablespace ts1;
  create table Valid_FK_Tabl
            (cus_id number,item number,constraints pk1 primary key(cus_id,item))
                  tablespace ts1 ;
  alter table Valid_FK_Tabl 
             add constraints fk1 foreign key(cus_id) 
                    references schema2.cust_id(cus_id); 
```

# nasm - 在 NASM 中，MOV EBX, AX 是有效指令吗？

> ID：15237294
> 
> 赞同：1
> 
> 时间：2013-03-06T01:21:25.010
> 
> 标签：nasm, cpu-registers

在 NASM 中，MOV EBX, AX 是有效指令吗？

基本上，你能把一个小寄存器的内容移到一个比它大的寄存器中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:40:14.983

That's not valid anywhere. To get the effect you want, do

```
MOVZX EBX, AX, or
MOVSX EBX, AX 
```

depending on whether you want to zero or sign extend the source operand.

# xml - SDL Tridion：XML 格式页面的逻辑结构

> ID：15237296
> 
> 赞同：5
> 
> 时间：2013-03-06T01:21:32.213
> 
> 标签：xml, tridion

是否可以提取 SDL Tridion 页面的信息，包括以 xml 格式关联的内容。

我期待类似的东西：

```
 <page name="mypagename">
     <page id="xxxxx"/>
     <template name="abc" id="123">
        <container name="xyz">
          <content name="asd" id="123">
           <Path="" \>
          </content>
        </container>
     </template>
    </page> 
```

技术栈是 Tridion 2011 和 Java。

我是 Tridion 的新手，所以很少详细的答案会很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T05:18:23.247

根据您的实际需要，有很多*更*简单的方法可以做到这一点，但我使用以下用 C# 编写的 TBB 类构建一个页面 XML，该页面基于组件模板元数据分为内容区域

```
class GetPageXML : TemplateBase
    {
        public override void Transform(Engine engine, Package package)
        {
            Initialize(engine, package);
            Logger.Debug("This will get the full page XML");
            Item pageItem = m_Package.GetByType(ContentType.Page);

            Page currentPage = GetPage();

            m_Engine.PublishingContext.RenderContext.ContextVariables.Add("CURRENT_PAGE", currentPage);

            XmlDocument pageXml = pageItem.GetAsXmlDocument();
            foreach (XmlNode cpNode in pageXml.SelectNodes("/tcm:Page/tcm:Data/tcm:ComponentPresentations/tcm:ComponentPresentation", NSManager))
            {
                TcmUri componentURI = new TcmUri(cpNode.SelectSingleNode("tcm:Component/@xlink:href", NSManager).Value);
                TcmUri componentTemplateURI = new TcmUri(cpNode.SelectSingleNode("tcm:ComponentTemplate/@xlink:href", NSManager).Value);

                //Render the componentPresentation
                XmlNode cpRenderElement = pageXml.CreateElement("tcm", "RenderedComponentPresentation", "http://www.tridion.com/ContentManager/5.0");
                XmlAttribute attNamespace = pageXml.CreateAttribute("xmlns:tcdl");
                attNamespace.Value = "http://www.tridion.com/ContentDelivery/5.3/TCDL";
                cpRenderElement.Attributes.Append(attNamespace);

                if (m_Engine.PublishingContext.RenderContext.ContextVariables.Contains("ORDINAL_POSITION"))
                {
                    int ordinalPosition = ((int)m_Engine.PublishingContext.RenderContext.ContextVariables["ORDINAL_POSITION"]) + 1;
                    m_Engine.PublishingContext.RenderContext.ContextVariables["ORDINAL_POSITION"] = ordinalPosition;
                //    m_Engine.PublishingContext.RenderContext.ContextVariables["ORDINAL_POSITION"] = 0;
                }
                else
                {
                    m_Engine.PublishingContext.RenderContext.ContextVariables.Add("ORDINAL_POSITION", 0);
                }

                //Get the metadata from the CT
                ComponentTemplate componentTemplate = (ComponentTemplate)m_Engine.GetObject(componentTemplateURI);
                String metadataXmlString = "";
                String cpRegionName = "";
                if (componentTemplate.Metadata != null)
                {
                    metadataXmlString = componentTemplate.Metadata.OuterXml;
                    XmlNode cpRegionNode = componentTemplate.Metadata.SelectSingleNode("//*[local-name()='region']");
                    if (cpRegionNode != null)
                    {
                        cpRegionName = "_" + cpRegionNode.InnerText;
                    }
                }
                cpNode.SelectSingleNode("tcm:ComponentTemplate", NSManager).InnerXml = metadataXmlString;

                String REGIONAL_POSITION = "REGIONAL_POSITION" + cpRegionName;
                if (m_Engine.PublishingContext.RenderContext.ContextVariables.Contains(REGIONAL_POSITION))
                {
                    int regionalPosition = ((int)m_Engine.PublishingContext.RenderContext.ContextVariables[REGIONAL_POSITION]) + 1;
                    m_Engine.PublishingContext.RenderContext.ContextVariables[REGIONAL_POSITION] = regionalPosition;
                    //    m_Engine.PublishingContext.RenderContext.ContextVariables["ORDINAL_POSITION"] = 0;
                }
                else
                {
                    m_Engine.PublishingContext.RenderContext.ContextVariables.Add(REGIONAL_POSITION, 0);
                }

                DateTime cpRenderStart = DateTime.Now;
                string contentCP = m_Engine.RenderComponentPresentation(componentURI, componentTemplateURI);

                DateTime cpRenderEnd = DateTime.Now;
                TimeSpan cpRenderTime = cpRenderEnd.Subtract(cpRenderStart);

                XmlAttribute attCPRenderTime = pageXml.CreateAttribute("RenderTime");
                attCPRenderTime.Value = String.Format("{0:0000}", cpRenderTime.TotalMilliseconds) + " milliseconds";
                cpNode.Attributes.Append(attCPRenderTime);

                if (m_Engine.RenderMode != RenderMode.Publish)
                {
                    //Remove the '&' symbols created for linking in previewmode
                    contentCP = contentCP.Replace("&", "");

                }

                try
                {
                    cpRenderElement.InnerXml = contentCP;
                }
                catch (Exception e)
                {
                    cpRenderElement.InnerXml = "Malformed XML in the output:" + e.Message;// +"<!--" + contentCP + "-->";
                }
                cpNode.AppendChild(cpRenderElement);

                Component component = (Component)m_Engine.GetObject(componentURI);
                XmlAttribute attComponentRevisionDate = pageXml.CreateAttribute("ModifiedOn");
                attComponentRevisionDate.Value = component.RevisionDate.ToString("yyyy-MM-dd HH:mm:ss tt");
                cpNode.Attributes.Append(attComponentRevisionDate);

                //Get the metadata from the Component

                metadataXmlString = "";
                if (component.Metadata != null)
                {
                    metadataXmlString = component.Metadata.OuterXml;
                }

                cpNode.SelectSingleNode("tcm:Component", NSManager).InnerXml = metadataXmlString;
            }

            //Add the rendered/published time
            XmlAttribute attRenderTime = pageXml.CreateAttribute("RenderedAt");
            attRenderTime.Value = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss tt");
            pageXml.DocumentElement.Attributes.Append(attRenderTime);

            //Add PublishInfo
            //Get the PublishTransaction

            PublishTransaction pubTrans = GetPublishTransaction(engine);

            if (pubTrans != null)
            {
                XmlElement nodePublisher = pageXml.CreateElement("Publisher");
                XmlElement nodePublisherName = pageXml.CreateElement("name");
                XmlElement nodePublisherId = pageXml.CreateElement("id");
                XmlElement nodePublisherDescription = pageXml.CreateElement("description");

                nodePublisherName.InnerText = pubTrans.Creator.Title;
                nodePublisher.AppendChild(nodePublisherName);

                nodePublisherId.InnerText = pubTrans.Creator.Id.ToString();
                nodePublisher.AppendChild(nodePublisherId);

                nodePublisherDescription.InnerText = pubTrans.Creator.Description;
                nodePublisher.AppendChild(nodePublisherDescription);

                pageXml.DocumentElement.AppendChild(nodePublisher);
            }

            //Add the target info
            if (engine.PublishingContext.PublicationTarget != null)
            {
                XmlElement nodePublicationTarget = engine.PublishingContext.PublicationTarget.ToXml();
                XmlNode nodePubs = nodePublicationTarget.SelectSingleNode("/tcm:PublicationTarget/tcm:Data/tcm:Publications", NSManager);
                nodePubs.ParentNode.RemoveChild(nodePubs);

                pageXml.DocumentElement.AppendChild(pageXml.ImportNode(nodePublicationTarget, true));
            }

            //Add the Page Modified time
            ModificationInfo modInfo = GetNewestModificationDateFromPageXml(pageXml);

            XmlAttribute attContentModifiedTime = pageXml.CreateAttribute("ContentLastModifiedOn");
            attContentModifiedTime.Value = modInfo.ModificationDate.ToString("yyyy-MM-dd HH:mm:ss tt");
            pageXml.DocumentElement.Attributes.Append(attContentModifiedTime);

            XmlAttribute attLastModifiedItem = pageXml.CreateAttribute("LastModifiedItemURI");
            attLastModifiedItem.Value = modInfo.ItemURI.ToString();
            pageXml.DocumentElement.Attributes.Append(attLastModifiedItem);

            XmlAttribute attLastModifiedTitle = pageXml.CreateAttribute("LastModifiedItemTitle");
            attLastModifiedTitle.Value = modInfo.ItemTitle;
            pageXml.DocumentElement.Attributes.Append(attLastModifiedTitle);

            //Add PageTemplate Properties
            XmlNode nodePageTemplate = pageXml.SelectSingleNode("/tcm:Page/tcm:Data/tcm:PageTemplate", NSManager);
            TcmUri uriPageTemplate = new TcmUri(nodePageTemplate.Attributes["href", "http://www.w3.org/1999/xlink"].Value);
            XmlElement pageTemplateXml = engine.GetObject(uriPageTemplate).ToXml(XmlSections.Data);
            nodePageTemplate.ParentNode.ReplaceChild(pageXml.ImportNode(pageTemplateXml, true), nodePageTemplate);

            //Add the publication properties
            XmlNode nodePublication = pageXml.SelectSingleNode("/tcm:Page/tcm:Context/tcm:Publication", NSManager);
            TcmUri uriPublication = new TcmUri(nodePublication.Attributes["href", "http://www.w3.org/1999/xlink"].Value);
            XmlElement publicationXml = engine.GetObject(uriPublication).ToXml(XmlSections.Data);
            nodePublication.ParentNode.ReplaceChild(pageXml.ImportNode(publicationXml,true), nodePublication);
            m_Package.PushItem("UrbanCherryPageFrameWork", m_Package.CreateXmlDocumentItem(ContentType.Xml,pageXml));
        } 
```

您可以在该行停下来`XmlDocument pageXml = pageItem.GetAsXmlDocument();`，只需将该值推入包中并将其称为输出。

或者看看[DD4T](https://code.google.com/p/dynamic-delivery-4-tridion/)模板，因为它们也为页面输出标准 XML 结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T14:14:22.847

由于 Tridion 灵活的数据模型，您实际上要求回答一个相当困难的问题。

有几件事是肯定的：

*   有页
    *   页面具有标题、ID、URL、发布 ID、版本、创建日期、发布日期等属性
*   页面*可能*有组件展示
    *   组件演示中有内容

一个组件（或一组组件）的内容很可能是您要搜索的内容，因为这是您希望在网站上显示的数据。组件在 Tridion 内容管理器中存储为 XML，并在发布时通过模板进行转换。组件使用的 XML 模式由实现者定义（因此所有实现都可能使用不同的模式），转换该组件的模板也由实现者定义 - 因此所有实现都可能具有不同的输出。

因此，如果您想使用 Tridion XML 在交付层上构建网站，您需要：

1.  根据您的网站要求为您的内容定义架构
2.  定义一个模板，将您的内容作为 XML 发布到交付层

（我在这里简化了很多 - 不要低估为任何给定组织定义*适当内容模型所需的工作）*

Chris 为您提供了如何将 XML 推送到交付层的一个很好的示例。像 DD4T 这样的框架“免费”为您提供了这个模板——但您仍然需要自己设计模式。

# c++ - QGraphicsView 什么都不显示

> ID：15237297
> 
> 赞同：3
> 
> 时间：2013-03-06T01:21:36.817
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene

我还在学习Qt，我在Qt中做了一个小项目，我使用qt ui设计器创建了一个简单的ui，并使用QGraphicsView显示QFileDialog加载的图像，但是当我将加载的图像文件添加到QgraphicsScene时，图像不是显示在图形视图中。图形视图保持空白，请帮助我，谢谢！

```
 Project2::Project2(QWidget *parent, Qt::WFlags flags)
: QMainWindow(parent, flags)
{
ui = new Ui::Project2Class;
ui->setupUi(this);

this->scene = new QGraphicsScene;

this->scene->setSceneRect(0, 0, 649, 459);

connect(ui->mapLoaderButton, SIGNAL(clicked()), this, SLOT(GetfilePath()));

ui->graphicsView->setScene(this->scene);    
}

 void Project2::GetfilePath()
   {

    QString filePath = QFileDialog::getOpenFileName(this, tr("Select file"), "", tr("Files (*.jpg*)"));

    if (filePath.isNull() == false)
    {
    QImage image(filePath);

    QSize size = image.size();
    ui->graphicsView->scene()->addItem(&QGraphicsPixmapItem(QPixmap::fromImage(image)));
    ui->graphicsView->scene()->update();
    ui->graphicsView->viewport()->update();
}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:40:10.990

**QGraphicsScene**和 Qt 的大部分内容[都拥有](http://qt-project.org/doc/qt-5.0/qtwidgets/qgraphicsscene.html#addItem)该变量的所有权。变量应该是动态分配的。

在堆栈上创建的变量将不起作用，因为它们的生命周期太短，QObject 稍后会尝试删除它们。

您需要使用“新”创建 QGraphicsPixmapItem。

```
ui->graphicsView->scene()->addItem(new QGraphicsPixmapItem(QPixmap::fromImage(image))); 
```

**从QObject**继承的所有东西都可以拥有（并被其他**QObject**类拥有）。当**QObject**被销毁时，它会在其所有子对象上调用“删除”。**QObject**类想要“拥有”他们的孩子。“拥有”我的意思是控制的生命周期。

在您的情况下，您正在堆栈上创建**QObject** (QGraphicsPixmapItem)。然后它的生命周期由堆栈控制（但**QObject认为它正在控制它），并且堆栈将在它到达那个'** **addItem()** '函数调用的分号时删除它。

作为一般的 C++ 经验法则，如果一个函数要求一个指针，不要给它一个临时（未命名）对象。作为一般的 Qt 经验法则，如果一个函数要求一个指针，甚至不要给它一个命名的局部变量 - 大多数人想要一个动态分配的变量，所以在[文档](http://qt-project.org/doc/qt-5.0/qtdoc/classes.html)中查找函数并查看它是否提到“取得所有权”。如果是这样，'**新建**'它并让Qt稍后'**删除**'它。

# ruby-on-rails - 编译错误：语法错误，意外'：'

> ID：15237299
> 
> 赞同：0
> 
> 时间：2013-03-06T01:21:39.037
> 
> 标签：ruby-on-rails, erb

我是 Ruby on Rails 最基本的新手；我刚拿起它，决定玩一下。我遇到了一个似乎对某些人有用但对我无效的问题......

创建了一个任意页面，带有一个无用的注册链接：

```
<%= link_to "Sign up now!", '#', class: "btn btn-large btn-primary" %> 
```

查看页面会产生以下结果：

```
compile error
... /home.html.erb:11: syntax error, unexpected ':'
...                        class: "btn btn-large btn-primary" )... 
```

这似乎对其他人有用，但同样，不适用于我。我已经玩过它了一点，但似乎无法在不完全删除线的情况下摆脱它。该链接是任意的，但如果可能的话，我希望它能够正常工作。我提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:47:41.873

这是因为您在使用 Ruby 1.8 时使用的是 Ruby 1.9 哈希语法。将其切换到`=>`将解决此问题。

# javascript - jquery 内容可编辑缩进

> ID：15237304
> 
> 赞同：1
> 
> 时间：2013-03-06T01:22:19.800
> 
> 标签：javascript, jquery

我已经找了几个小时了，仍然无法解决。

所以我正在开发一个文本编辑器，我想要它，所以当他们按下“ **tab** ”键时，它会缩进文本，或者是我选择的文本，或者是光标文本选择器前面的文本。我一直在研究设计模式，我试图制作一个元素设计模式，但除非我做错了，否则你做不到。这是我的代码，它启动了我的简单编辑器

```
 $(".code").click(function () {
   $(".code").attr('contenteditable', 'true');
   document.getElementById("code").designMode = "on";
 }); 
```

然后是' **tab key code** '

```
$(".code")
  .keydown(function (e) {      
  var keyCode = e.keyCode || e.which;
  if(keyCode == 9) {
    e.preventDefault();

  }
}); 
```

**问题：**你如何在 contenteditable 中缩进，例如在文本编辑器中你可以不缩进任何内容或文本。（我的关键事件没有触发没有任何问题）

这不是文本区域或输入框，它只是一个内容可编辑的 div

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:35:54.793

所以我想通了，代码如下

```
$(".code").keydown(function(e)
           {
              e = e || window.event;
              var keyCode = e.keyCode || e.which; 
              if (keyCode == 9)
              {
                e.preventDefault();
                  document.execCommand('styleWithCSS',true,null);
                  document.execCommand('indent',true,null);
              }
           }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:43:49.730

我假设 $(".code") 是一个文本区域，当它被聚焦并在 keydown 上时会发生事件。

```
$(function(){
    var c = $(".code");
    c.keydown(function (e) {
      e = e || window.event;
      var keyCode = e.keyCode || e.which;
      if(keyCode === 9) {
        e.preventDefault();

        $(this).val($(this).val().substring(0,$(this).get(0).selectionStart) + "\t" + $(this).val().substring($(this).get(0).selectionEnd));
      }
    });
}); 
```

示例：

[http://jsfiddle.net/hXxU9/](http://jsfiddle.net/hXxU9/)

# asp.net - FileUpload 通过 Session 变量超过一定大小并得到“无法访问关闭的文件”错误

> ID：15237308
> 
> 赞同：0
> 
> 时间：2013-03-06T01:22:32.623
> 
> 标签：asp.net

我创建了一个带有 2 个页面的空 ASP.NET 应用程序，Default.aspx 和 Action.aspx（请参见下文）。运行时，我选择了一个 200k 的 .bmp 文件并点击保存。然后我收到“无法访问已关闭的文件”错误，但仅当我的源文件高于 55k 左右时。是什么赋予了？谢谢

## 默认.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication1.Default" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:FileUpload ID="attachmentFileUpload" Width="300px" runat="server" />
    <asp:Button ID="saveButton" runat="server" Text="Save" OnClick="saveButton_Click" />
    </div>
    </form>
</body>
</html> 
```

## 默认.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
namespace WebApplication1
{
    public partial class Simple : System.Web.UI.Page
    {
        protected void saveButton_Click(object sender, EventArgs e)
        {
            Session["AttachmentFileUpload"] = attachmentFileUpload;
            Response.Redirect("Action.aspx");
        }
    }
} 
```

## 动作.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Action.aspx.cs" Inherits="WebApplication1.Action" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    </div>
    </form>
</body>
</html> 
```

## 动作.aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
namespace WebApplication1
{
    public partial class Action : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            FileUpload tempFileUpload = (FileUpload)Session["AttachmentFileUpload"];
            tempFileUpload.PostedFile.SaveAs(@"C:\Temp\MyUpload.bmp");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:31:02.717

上传的文件不保存在`FileUpload`控件内部，控件只有对实际数据所在的响应流的引用。

直到需要时才读取整个响应流，但如果上传的文件很小，它将被读入流的缓冲区。当您进行重定向时，响应流将被关闭，因此缓冲区中不存在的任何内容都将无法读取。

您必须将上传的文件保存在它到达的页面中，您无法保存`FileUpload`控件以供以后可靠地从中获取文件。

# css - 使用悬停的背景位置时遇到问题

> ID：15237315
> 
> 赞同：0
> 
> 时间：2013-03-06T01:23:54.587
> 
> 标签：css, background-position

我正在尝试重新创建 tumblr 添加到[仪表板上](http://www.tumblr.com/dashboard)的新帖子图标的“反弹” 。

我一直在寻找如何使用`background-position`来创建反弹，但到目前为止还没有任何运气。

这里的其他问题在使用`background`然后尝试指定`background-position`但我根本没有使用`background`时遇到问题。

我并没有试图在这上面花很多时间，但现在我很好奇。

[代码要点](https://gist.github.com/dontoisme/5095950)

[密码笔](http://cdpn.io/wLAoI)

HTML

```
<div id="container">
 <div class="block blue">
  <div class="inblock light-green"></div>
 </div>
 <div class="block green">
  <div class="inblock orange"></div>
 </div>
 <div class="block yellow">
  <div class="inblock light-blue"></div>
 </div>
 <div class="block blue">
  <div class="inblock light-green"></div>
 </div>
 <div class="block green">
  <div class="inblock orange"></div>
 </div>
 <div class="block yellow">
  <div class="inblock light-blue"></div>
 </div>
</div> 
```

CSS

```
#container {
  width:80%;
  height: 200px;
  padding-left:5em;
  background-color: #95A5A6;
}

.block {
  margin: 2em;
  height: 130px;
  width: 130px;
  float:left;
  border-radius:10px;
}

.block:hover > .inblock{
  background-color:#E74C3C;
  background-position: top;

}

.inblock {
  height: 80px;
  width: 80px;
  background-color:blue;
  margin: 1.5em;
}

.light-blue {
  background-color:#2980B9

}

.blue {
  background-color:#2C3E50;
}

.green {
  background-color:#27AE60;
}

.yellow {
  background-color:#F1C40F;
}

.orange {
  background-color:#E67E22;
}

.light-green {
  background-color:#2ECC71;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:13:14.263

从[文档中](https://developer.mozilla.org/en-US/docs/CSS/background-position)：

> background-position CSS 属性设置初始位置，相对于由 background-origin 为每个定义的背景图像定义的背景位置层。

如果您查看 HTML（使用开发人员工具，例如 Google Chrome 的开发人员工具），您会看到 Tumblr 实际上使用[了一个精灵](http://assets.tumblr.com/images/post_icons_sprite_2x.png?3)，然后使用该`background-position`属性使用 CSS3 过渡来上/下移动图标。

`background-position`由于没有设置属性，因此该属性在您提供的代码中没有做任何事情`background-image`。

如果您不想使用精灵/图像，您可以简单地使用 CSS3 的`transform`属性来创建“反弹”效果。我创建了一个 JSFiddle 来展示这个想法：http: [//jsfiddle.net/7rsbr/](http://jsfiddle.net/7rsbr/)

# jquery - (div scroll follow) 当div遇到另一个div时，(div scroll follow)也和othere div一起滚动

> ID：15237322
> 
> 赞同：0
> 
> 时间：2013-03-06T01:24:35.117
> 
> 标签：jquery

我有 4 个 div（页眉、左右内容和页脚）。我有`right content`滚动跟随，我希望发生的是当页脚的顶部遇到底部时`right`，右侧也与左侧一起滚动`div`。

我设置了我目前在[**jsfiddle**](http://jsfiddle.net/jhunlio/wFDYV/3/)中的预览。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:57:10.927

您可以使用`Math.min()`和预先计算的值来限制右侧边栏的 marginTop 设置，这样它就不会超出与页脚接触的点进行动画处理：

我已经命名了预先计算的值`rightDelta`。

```
$(function() {
    var $sidebar = $("#right"), 
        $window = $(window),
        rightOffset = $sidebar.offset(),
        rightDelta = $("#footer").offset().top - $("#header").offset().top - $("#header").outerHeight() - $("#right").outerHeight(),
        topPadding = 15;

    $window.scroll(function() {
        if ($window.scrollTop() > rightOffset.top) {
            $sidebar.stop().animate({
                marginTop: Math.min($window.scrollTop() - rightOffset.top + topPadding, rightDelta)
            });
        } else {
            $sidebar.stop().animate({
                marginTop: 0
            });
        }
    });

}); 
```

[更新的小提琴](http://jsfiddle.net/wFDYV/7/)

实际上，您可以使用`Math.min()`and`Math.max()`组合使滚动处理程序成为单语句函数：

```
$(function() {
    var $sidebar = $("#right"), 
        $window = $(window),
        rightOffset = $sidebar.offset(),
        rightDelta = $("#footer").offset().top - $("#header").offset().top - $("#header").outerHeight() - $("#right").outerHeight(),
        topPadding = 15;

    $window.scroll(function() {
            $sidebar.stop().animate({
                marginTop: Math.max(Math.min($window.scrollTop() - rightOffset.top + topPadding, rightDelta), 0)
            });
    });

}); 
```

[更新的小提琴](http://jsfiddle.net/wFDYV/8/)

# javascript - 使用 href 重定向并调用 JS 函数

> ID：15237323
> 
> 赞同：0
> 
> 时间：2013-03-06T01:24:38.183
> 
> 标签：javascript, jquery, html, anchor, href

我有一个简单的索引页面，其中门打开并且用户可以看到菜单。现在，当用户到达联系我们页面并再次移动到索引页面时..他发现门关闭了..我不想要那个..我希望用户一旦打开门，再次到达索引文件，他就会看到菜单..为此，`<a href="index.htmlPLUSE CODE TO OPEN DOOR USING JS"/>` 这行非常不言自明..我希望当用户导航到主页时，JS 的功能会自动调用。我不能真正使用 document.ready() 或 onload 调用，因为我已经使用它们了。可能是我需要使用一些条件语句。任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:10:34.580

您可以将参数传递给 url ( `/index.html?open=true`)，并使用 JavaScript 读取它们：

```
function isOpen() {
    return decodeURI(
        (RegExp(open + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
} 
```

（来自[获取转义的 URL 参数](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)）

# algorithm - 在 O(logn) 时间内找到第 k 个最小的数

> ID：15237327
> 
> 赞同：10
> 
> 时间：2013-03-06T01:24:58.580
> 
> 标签：algorithm

这是问题，一个未排序的数组`a[n]`，我需要找到`kth`range 中的最小数字`[i, j]`，并且 absolute `1<=i<=j<=n, k<=j-i+1`。

通常我会用`quick-find`它来完成这项工作，但是如果有许多不同范围的查询请求，它就不够快`[i, j]`，我很难找出一个算法来及时进行查询`O(logn)`（**允许预处理**）。

任何想法都值得赞赏。

**附言**

让我让问题更容易理解。允许进行任何类型的预处理，但查询需要在 O(logn) 时间内完成。并且会有很多（超过 1 个）查询，比如 find `1st in range [3,7], or 3rd in range [10,17], or 11th in range [33, 52]`.

**范围 [i, j]**我的意思是在原始数组中，没有排序或其他东西。

例如`a[5] = {3,1,7,5,9}`，查询`1st in range [3,4]`是`5`，`2nd in range [1,3]`是`5`，`3rd in range [0,2]`是`7`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T01:31:54.400

如果允许预处理并且不计入时间复杂度，只需使用它来构建子列表，以便您可以有效地找到您正在寻找的元素。与大多数优化一样，这以空间换时间。

您的预处理步骤是获取原始`n`数字列表并创建许多*新*的子列表。

这些子列表中的每一个都是原始的一部分，从`n`第 th 个元素开始，扩展`m`元素，*然后*排序。所以你的原始清单：

```
 {3, 1, 7, 5, 9} 
```

给你：

```
 list[0][0] = {3}
 list[0][1] = {1, 3}
 list[0][2] = {1, 3, 7}
 list[0][3] = {1, 3, 5, 7}
 list[0][4] = {1, 3, 5, 7, 9}

 list[1][0] = {1}
 list[1][1] = {1, 7}
 list[1][2] = {1, 5, 7}
 list[1][3] = {1, 5, 7, 9}

 list[2][0] = {7}
 list[2][1] = {5, 7}
 list[2][2] = {5, 7, 9}

 list[3][0] = {5}
 list[3][1] = {5,9}

 list[4][0] = {9} 
```

这不是一个便宜的操作（在时间*或*空间上），因此您可能希望在列表上维护一个“脏”标志，以便您仅在执行修改操作（插入、删除、更改）后第一次执行它。

事实上，您可以使用惰性求值来*提高*效率。基本上在您开始和执行修改操作时将所有子列表设置为空列表。然后，每当您尝试访问子列表并且它为空时，请在尝试从中获取第`k`th 值之前计算该子列表（并且仅那个）。

这样可以确保*仅*在需要时评估子列表并缓存以防止不必要的重新计算。例如，如果您从不要求从 3 到 6 子列表中的值，则永远不会计算它。

创建所有子列表的伪代码基本上是（`for`两端都包含循环）：

```
for n = 0 to a.lastindex:
    create array list[n]
    for m = 0 to a.lastindex - n
        create array list[n][m]
        for i = 0 to m:
            list[n][m][i] = a[n+i]
        sort list[n][m] 
```

惰性求值的代码稍微复杂一点（但只是一点点），所以我不会为此提供伪代码。

然后，为了找到范围内的`k`第 th 最小数（其中和是原始索引），您只需查找，这是一个非常快速的 O(1) 操作：`i``j``i``j``lists[i][j-i][k-1]`

```
 +--------------------------+
                |                          |
                |                          v
1st in range [3,4] (values 5,9),   list[3][4-3=1][1-1-0] = 5
2nd in range [1,3] (values 1,7,5), list[1][3-1=2][2-1=1] = 5
3rd in range [0,2] (values 3,1,7), list[0][2-0=2][3-1=2] = 7
|             |                         ^    ^    ^
|             |                         |    |    |
|             +-------------------------+----+    |
|                                                 |
+-------------------------------------------------+ 
```

* * *

这是一些 Python 代码，它显示了这一点：

```
orig = [3,1,7,5,9]
print orig

print "====="
list = []
for n in range (len(orig)):
    list.append([])
    for m in range (len(orig) - n):
        list[-1].append([])
        for i in range (m+1):
            list[-1][-1].append(orig[n+i])
        list[-1][-1] = sorted(list[-1][-1])
        print "(%d,%d)=%s"%(n,m,list[-1][-1])

print "====="
# Gives xth smallest in index range y through z inclusive.
x = 1; y = 3; z = 4; print "(%d,%d,%d)=%d"%(x,y,z,list[y][z-y][x-1])
x = 2; y = 1; z = 3; print "(%d,%d,%d)=%d"%(x,y,z,list[y][z-y][x-1])
x = 3; y = 0; z = 2; print "(%d,%d,%d)=%d"%(x,y,z,list[y][z-y][x-1])
print "=====" 
```

正如预期的那样，输出是：

```
[3, 1, 7, 5, 9]
=====
(0,0)=[3]
(0,1)=[1, 3]
(0,2)=[1, 3, 7]
(0,3)=[1, 3, 5, 7]
(0,4)=[1, 3, 5, 7, 9]
(1,0)=[1]
(1,1)=[1, 7]
(1,2)=[1, 5, 7]
(1,3)=[1, 5, 7, 9]
(2,0)=[7]
(2,1)=[5, 7]
(2,2)=[5, 7, 9]
(3,0)=[5]
(3,1)=[5, 9]
(4,0)=[9]
=====
(1,3,4)=5
(2,1,3)=5
(3,0,2)=7
===== 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T03:55:39.727

当前的解决方案是 O( (logn)^2 )。我很确定它可以修改为在 O(logn) 上运行。该算法相对于 paxdiablo 算法的主要优势在于空间效率。该算法需要 O(nlogn) 空间，而不是 O(n^2) 空间。

首先，从长度为 m 和 n 的两个排序数组中找到第 k 个最小元素的复杂度是 O(logm + logn)。从长度为 a,b,c,d.. 的数组中找到第 k 个最小元素的复杂度是 O(loga+logb+.....)。

现在，对整个数组进行排序并存储它。对数组的前半部分和后半部分进行排序并存储，依此类推。您将有 1 个长度为 n 的排序数组、2 个长度为 n/2 的排序数组、4 个长度为 n/4 的排序数组，依此类推。所需的总内存 = 1*n+2*n/2+4*n/4+8*n/8...= nlogn。

一旦你有 i 和 j 找出子数组的列表，当它们连接时，给你范围 [i,j]。将有 logn 个数组。找到其中第 k 个最小的数字将花费 O( (logn)^2) 时间。

最后一段的示例：假设数组大小为 8（索引从 0 到 7）。您有以下排序列表：

A：0-7，B：0-3，C：4-7，D：0-1，E：2-3，F：4-5，G：6-7。

现在用指向这些数组的指针构造一棵树，这样每个节点都包含它的直接组成部分。A 将是根，B 和 C 是它的孩子，依此类推。

现在实现一个返回数组列表的递归函数。

```
def getArrays(node, i, j):
    if i==node.min and j==node.max:
        return [node];

    if i<=node.left.max:
        if j<=node.left.max:
            return [getArrays(node.left, i, j)];  # (i,j) is located within left node
        else:
            return [ getArrays(node.left, i, node.left.max), getArrays(node.right, node.right.min, j) ]; # (i,j) is spread over left and right node 
    else:
        return [getArrays(node.right, i, j)]; # (i,j) is located within right node 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T03:25:21.007

预处理：创建一个 nxn 数组，其中 [k][r] 元素是前 r 个元素中的第 k 个最小元素（为方便起见，索引为 1）。

然后，给定一些特定的范围 [i,j] 和 k 的值，执行以下操作：

1.  在矩阵的 [k][j] 槽处找到元素；称之为 x。
2.  沿着矩阵的 i-1 列，找出其中有多少值小于或等于 x（将第 0 列视为具有 0 个较小的条目）。通过构造，该列将被排序（所有列都将被排序），因此可以在日志时间内找到它。将此值称为 s
3.  在矩阵的 [k+s][j] 槽中找到元素。这是你的答案。

## 例如，给定 3 1 7 5 9

*   3 1 1 1 1
*   X 3 3 3 3
*   XX 7 5 5
*   XXX 7 7
*   XXXX 9

现在，如果我们被问到 [2,4] 范围内的第二小（同样，1 索引），我首先找到 [1,4] 范围内的第二小，即 3。然后我查看第 1 列和看到有 1 个元素小于或等于 3。最后，根据需要，我在 [3][5] 插槽的 [1,4] 范围内找到了第 3 个最小的元素，即 5。

这需要 n^2 空间和 log(n) 查找时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T08:58:44.453

这个不需要预处理，但比`O(logN)`. 它比简单的迭代和计数要快得多，并且可以支持对序列的动态修改。

它是这样的。假设长度`n`有`n=2^x`一些`x`。构造一个根节点表示的*段树*`[0,n-1]`。对于每个节点，如果它代表一个节点`[a,b]`, `b>a`，让它有两个子节点，每个子节点代表`[a,(a+b)/2]`, `[(a+b)/2+1,b]`。（也就是说，进行递归除以二）。

然后，在每个节点上，为该段中的数字维护一个*单独的二叉搜索树。*因此，对序列的每次修改都需要`O(logN)[on the segement]*O(logN)[on the BST].`查询可以这样完成，让x 在段内`Q(a,b,x)`的*排名*`[a,b]`。显然，如果`Q(a,b,x)`可以有效地计算，则二进制搜索`x`可以有效地计算所需的答案（使用额外的`O(logE)`因子。

`Q(a,b,x)`可以计算为：找到组成的最小段数`[a,b]`，这可以在`O(logN)`段*树上*完成。对于每个段，在该段的*二叉搜索树上*查询小于 的元素数`x`。将所有这些数字相加得到`Q(a,b,x)`.

这应该是`O(logN*logE*logN)`。嗯，不完全是你所要求的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T01:27:29.983

在 O(log n) 时间内，不可能读取数组的所有元素。由于没有排序，也没有提供其他信息，这是不可能的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-06T01:28:41.827

在最坏情况和平均情况下，没有办法比 O(n) 做得更好。您必须查看每一个元素。

# asp.net - 如何管理从 asp.net 网站访问数据库的密码

> ID：15237332
> 
> 赞同：1
> 
> 时间：2013-03-06T01:25:45.053
> 
> 标签：asp.net, iis-7, web-config, connection-string, windowsdomainaccount

只是好奇从 asp.net Web 应用程序管理数据库访问的最佳实践。我们目前将用户名和密码放在 web.config 中，但这在内部安全性方面不够好（显然），所以我决定通过修改 web.config 来使用 windows 域来使用 windows 域用户，然后将用户添加到应用程序池标识。这一切都很好，但是当域用户的密码更改时会发生什么？这是否意味着在应用程序池中使用此用户身份的所有 Web 应用程序也需要更改密码？这将是一场 IT 噩梦。是否有人对允许 webapp 在不暴露密码的情况下访问数据库的最佳方法提出建议，并且如果密码更改，则无需在所有 webapps 中更新密码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:40:48.503

更好的解决方案是设置一个单独的应用程序池，该应用程序池设置有一个对数据库具有完全访问权限的服务帐户，在选择新的应用程序池并使用集成安全性后重新启动 Web 应用程序。

使用非常强（且冗长）的密码并将帐户设置为密码不会过期且用户无法更改密码。

这可以防止在 web.config 文件中使用明文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:34:33.653

我建议您使用 SQL 混合模式身份验证并为您的应用程序使用 SQL 帐户。web.config 中的用户名和密码并加密配置文件的该部分。

以下是有关配置加密的一些信息。

[http://msdn.microsoft.com/en-us/library/zhhddkxy(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zhhddkxy(v=vs.100).aspx)

# c - 等价于 C 中 Java 的 Object 类型

> ID：15237335
> 
> 赞同：1
> 
> 时间：2013-03-06T01:26:25.020
> 
> 标签：c, object

C 编程语言有什么类似于[Java 的 Object 类](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html)吗？我意识到用 C 等低级语言实现这样的东西是很困难的，但我认为它可能仍然非常有用。如果没有像 C 中的`Object`类型，那么有没有办法`Object`在 C 中模仿 Java 的类型？

我想到的主要用例是在 C 中创建具有多种基本类型的数组，以模仿 Java 中的 Object 数组：`Object[] hasMultipleTypes = [3, "Hi!", 5.00];`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:38:33.077

基本对象不是很复杂 - 一组数据字段 ( `struct`) 加上指向虚拟方法表 (VMT) 的指针。每个成员函数都将指向“this”的指针作为第一个参数。

在 C 中实现相对简单。我会寻找 C++ 的原始交叉编译器的描述，它们正是这样做的——将面向对象的代码转换为纯 C。

大概等级：

```
struct MyClassVMT
 { 
    int *(method1)();
 }

struct MyClass 
{ 
  MyClassVMT* vmt;
  int field1;
}

void MyClass_Constructor(MyClass* pThis) { pThis.vmt = &_myClassVmt;}
void MyClass_nonVirtual (MyClass* pThis) {}
void MyClass_method1(MyClass* pThis) {}

MyClassVMT _myClassVmt;
_myClassVmt.mehtod1 = MyClass_method1;

// Usage
MyClass item;
MyClass_Constructor(&item);

MyClass_nonVirtual(&item); // non virtual method call
item.method1(&item); // virtual method call 
```

# android - 为什么 Android GUI 构建如此令人沮丧？我错过了什么？

> ID：15237336
> 
> 赞同：-5
> 
> 时间：2013-03-06T01:26:27.010
> 
> 标签：android, user-interface, intellij-idea

我正在尝试为我的类 Android 项目构建一个 GUI。我目前正在使用带有拖放 GUI Builder 的 IntelliJ IDEA 12。我对进入文本和编辑属性也有足够的了解。

我遇到的问题是，我似乎不能简单地..按照我想要的方式为我的应用程序制作 GUI。在普通的 Java 中，我可以使用 Swing 快速完成。但由于 Android 没有任何 Swing，至少可以说是棘手的。

我认为我可以简单地使用 LinearLayout 嵌套。但这总是错误的。

下面是我在 Netbeans 中制作的关于我希望 GUI 看起来如何的快速图像：

![在此处输入图像描述](../Images/bee2ecac5a9691ac716417f7069472a7.png)

我根本无法在 IntelliJ 中轻松获得它。如果我将 Button 放置在水平方向的 LinearLayout 中，它就很合适。但是如果我再添加一个 ImageView，那么布局就已经搞砸了！然后我在 ImageView 的另一侧放置了一个按钮，这也没有任何帮助。

我在这里遗漏了什么，还是 Android GUI 就是这么令人沮丧？我可以（就像在 Swing 中一样）完全用 Java 编写 GUI 代码吗？还是我被迫使用 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:42:03.567

这并不完美，您需要使用它，例如尺寸和定位，但基本上就是您想要的。可能花了 5 分钟，在 Eclipse 中可能更少

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="105dp"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_action_search" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.00"
        android:ems="10" />
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
        <Button
            android:id="@+id/button4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
        <Button
            android:id="@+id/button5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
        </LinearLayout>
</LinearLayout> 
```

# coq - 引理不能用作提示

> ID：15237337
> 
> 赞同：1
> 
> 时间：2013-03-06T01:26:29.137
> 
> 标签：coq

为什么 Coq 不接受这个引理作为提示？

```
Lemma contr : forall p1 : Prop, False -> p1.
Proof. tauto. Qed.

Hint Resolve contr : Hints. 
```

`Prop`或者其他以变量结尾的引理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:19:45.993

查看`Hint Resolve`（[http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#@command232](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual011.html#@command232)）的文档：

```
term cannot be used as a hint

The type of term contains products over variables which do not appear in the conclusion. A typical example is a transitivity axiom. In that case the apply tactic fails, and thus is useless. 
```

然而，（对我来说）这里的情况似乎并非如此，因为唯一`p1`出现在结论中的产品已经结束。

这里的问题似乎是你的结论完全没有形状。`auto`似乎通过将目标的形状与提示数据库的返回类型的形状相匹配来工作。在这里，您的目标只是一个量化变量这一事实可能会令您感到不安。我不确定这是否是一个合理的绊脚石，但是这个特定的实例可能是唯一一个你可能有这样一个无形的返回类型的情况（显然与`Set`and的情况相同`Type`），所以这没什么大不了的。

所以，您可能不需要这个作为提示？...只需使用诸如`tauto`，`intuition`或对您的环境中类型的值执行任何类型的消除/破坏/反转`False`...不是很令人满意，但是 eh :\

# php - PHP，如何将元素推入这个数组？

> ID：15237338
> 
> 赞同：0
> 
> 时间：2013-03-06T01:26:33.913
> 
> 标签：php, arrays, array-push

示例数组：

```
$r["NO"] = array(
"hello" => "hey",
"hey" => array("oij", "ioj"),
"hola" => "hia"
); 
```

我该如何添加

```
"blabla" => "hey" 
```

现在在那个数组的底部？

最终结果应该是：

```
$r["NO"] = array(
"hello" => "hey",
"hey" => array("oij", "ioj"),
"hola" => "hia",
"blabla" => "hey"
); 
```

我尝试了各种array_push，但没有任何运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:27:42.027

关联数组中不能有重复的键。

更新：：您可以像这样设置键 => 值：

```
$r["NO"]["blabla"] = "hey"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:28:28.783

不，你不能，密钥必须是唯一的。您可以将 php 的关联数组映像为其他语言的哈希映射。

***编辑：***

对于您编辑的案例，您可以这样做`$r["NO"]['blabla'] = 'value';`

# python - Python 将模块名称视为“NoneType”

> ID：15237340
> 
> 赞同：3
> 
> 时间：2013-03-06T01:27:16.580
> 
> 标签：python, object, module

我有一段行为奇怪的代码。

一开始，我导入了一个模块，它是一个 C 库的 python 绑定。

```
try:
    import pyccn
except:
    print "ERROR: PyCCN is not found"
    exit(1) 
```

后来在我的代码中，我使用 pyccn 模块做了很多事情，并且它按预期工作（几乎）。现在在正常工作了一段时间后，它给了我错误：

```
 Traceback (most recent call last):
   File "./ndn-ls-keys.py", line 185, in upcall
     if kind == pyccn.UPCALL_CONTENT_UNVERIFIED:
 AttributeError: 'NoneType' object has no attribute 'UPCALL_CONTENT_UNVERIFIED' 
```

所以它说'pyccn'是NoneType！但它正在工作，我的意思是在错误发生之前多次调用了包含第 185 行的同一个函数。并且错误始终如一地发生。我没有重新定义“pyccn”，只是使用了“pyccn.foo()、pyccn.bar() 等”。

发生这种情况的可能原因是什么？

PS 错误发生在我的脚本末尾。如果我在那里放一个 time.sleep(10) ，那么它会在睡眠之后发生......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:12:16.767

我以某种方式解决了这个问题。最初，在 PyCCN 的导入下方，我还有另外两个导入：

```
 import xml.etree.ElementTree as ET
    import time 
```

所以导入对于这个文件是全局的。

一旦我将这两个导入移动到实际使用它们的函数中，问题就消失了！！此举是唯一的变化，我不知道此修复背后的原因。

由于 pyccn 模块中的一些问题，导入之间可能存在一些冲突？（我假设标准库不对这个问题负责）。

# c++ - 在 C++ 中声明向量和集合

> ID：15237341
> 
> 赞同：2
> 
> 时间：2013-03-06T01:27:23.720
> 
> 标签：c++, pointers, vector, set

这是我第一次在 C++ 中使用 STL 容器，在 Google 中看到不同的示例时，我注意到声明向量和集合的方式有些东西。

如果你有一个类 A 并且你想将这些元素存储在一个向量中，你可以使用一个指向 A 对象的指针（如下所示）。而对于集合，您在声明中使用实际对象。我想知道这样做是否有特殊原因，或者它只是发生在我看到的示例中。

```
vector<*A> cont1;
set<A> cont2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:35:12.947

在大多数情况下，您最终将使用具有自动存储持续时间的对象容器而不是指针/智能指针，因为这样的容器将为您处理丑陋的内存管理。

`std::vector<A>`在大多数情况下，简单就足够了。这些是非常罕见的需要使用的情况`std::vector<A*>`。这种情况的一个示例可能是在使用此容器的元素时需要实现*运行时多态性。*另一个示例可能是使用指针，因为在复制成本高昂时可能会出现*性能*问题。`A`另一个原因可能是避免*对象切片*。

好的做法是始终使用对象容器，除非您有充分的理由使用指针容器。即使您需要保存指针，也可以使用*智能指针*。

相关问题：
[在 C++ 中使用指向动态分配对象的指针向量时如何避免内存泄漏？](https://stackoverflow.com/q/1361139/1168156)
[C ++：对象向量与指向新对象的指针向量？](https://stackoverflow.com/q/2693651/1168156)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:33:28.067

我不知道这是常见的做法。

但是，这样做的一个可能原因是，在`vector`调整大小时，包含的对象可以在内存中移动。如果包含的对象将其`this`指针指向其他对象，则该指针可能在`resize`. 通过自己存储指针和管理内存，您的对象不会因此受到影响。

使用 a `set`，您不会观察到相同的行为，因为集合往往被实现为树。但请注意：我不认为 C++ 标准库对此做出任何保证......

如果作者试图利用这一点，`set`那么他们就是在滥用封装规则。如果不是，那么您提供的两个示例可能不相关。将指针存储（或不存储）在容器中的原因还有很多，您可以自由选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T01:50:08.917

向量是简单的容器，可以容纳任何可复制的东西。因此，根据您的需要，您可以将对象或指向对象的指针放入其中。

虽然集合也可以包含指针，但这样做通常没有多大意义。集合是有序的容器，这意味着当你创建一个集合时，你需要指定一个比较函数。如果您不指定一个，`std::less<>`则使用默认比较函数 ( )，这取决于您在要`operator<`定义的集合中存储的任何内容。这实际上似乎适用于指针，因为您可以将指针与 进行比较`<`，但它比较的是指针而不是它们指向的对象，因此该集合最终将按照内存中对象的相对位置进行排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T01:38:03.380

The real difference between sets and vectors is that a set contains all-unique elements, and has different runtimes for its operations. They aren't equivalent at all!

The reason for the difference is that you can have two dynamically-allocated objects that are equal, but stored in different locations. If you do this:

```
A a,b;
std::vector<A> myVector;
myVector.push_back(a);
myVector.push_back(b); 
```

then myVector will contain two elements, but in the following case:

```
A a,b;
std::set<A> mySet;
mySet.insert(a);
mySet.insert(b); 
```

mySet will contain only one. This would not be the case had we used pointers.

Additionally, the reason (as others have noted) for dynamically allocating items for use in a vector is to reduce the overhead of an insertion.

Cheers!

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T01:30:04.550

这只是您遇到的示例。您可以在向量中存储从对象本身、指针到函数指针的任何内容。您还可以将其他向量存储在向量中以定义多维向量：

```
// define 4x4 vector
vector< vector<int> > vec(4, vector<int>(4));

vec[i][j] = a;     // write
int b = vec[i][j]; // read 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-06T01:31:16.600

```
vector<A*> cont1;
cont1.push_back( new A( whatever ) );
vector<A> cont2;
cont2.push_back( A( whatever ) ); 
```

这取决于你有哪个用例。你想存储对象还是指针？

请注意，第一个示例需要您`delete`手动处理每个对象，而第二个示例将为您处理删除。尽可能使用第二个，除非您知道自己在做什么。它还使分配（等）安全。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-06T01:33:01.043

这取决于您要存储的内容。

```
std::vector<A*> myVector; 
```

...将创建一个存储指向 A 类型的指针的向量。

```
std::set<A> mySet; 
```

...将创建一个存储 A 类型的实际实例的集合。

您可以轻松地将实际实例存储在向量中：

```
std::vector<A> myVector; 
```

或集合中的指针：

```
std::set<A*> mySet; 
```

# php - 轮换推荐

> ID：15237344
> 
> 赞同：1
> 
> 时间：2013-03-06T01:27:30.967
> 
> 标签：php, javascript, css, wordpress

在修复我的这个小推荐箱时，我将不胜感激。现在，我不知道问题出在 PHP、CSS 还是我的标记上，因为虽然帖子似乎褪色了，但它们都同时出现，第一个褪色只是继续显示第三个帖子。

这是脚本：

```
 <script language="javascript"> 
jQuery(document).ready(function(){
    jQuery('#testimonials .slide');
    setInterval(function(){
        jQuery('#testimonials .slide').filter(':visible').fadeOut(1000,function(){
            if(jQuery(this).next('.slide').size()){
                jQuery(this).next().fadeIn(1000);
            }
            else{
                jQuery('#testimonials .slide').eq(0).fadeIn(1000);
            }
        });
    },1500);    
}); 
</script> 
```

PHP/HTML：

```
<?php 
  $loop = new WP_Query(array('post_type' => 'qcamp', 'posts_per_page' => 5)); 
  if ($loop->have_posts()) { ?>
<div id="camps-quote">

<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

    <div id="testimonials">
        <div class="slide">
            <div class="testimonial-quote">
            <?php the_content(); ?>
            </div>
        </div>

    </div>

<?php endwhile; ?>  

</div>
<?php } ?> 
```

最后是 CSS：

```
#camps-quote {
    margin-top:50px;
    box-shadow: 7px 7px 7px #C0C0C0; 
    background-color: #7D9EC0; 
    height: 120px; 
    font-size: 16px;
    padding:7px;
    font-family: Arial;
    width:500px;
    margin-left:200px;
    overflow:hidden;
}

#testimonials{

}

#testimonials .slide {color: #fff;}

#testimonials .testimonial-quote {
    padding: 3px 0 0 65px; 
    line-height: 1.5em; 
    font-family:Helvetica, Arial, sans-serif !important; 
    font-size: 16px; 
    font-weight: normal; 
    font-style: italic; 
    margin: 10px 0 20px 0;
} 
```

[这是我正在测试它的网站。](http://www.botkai.com/camps-page/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:37:02.663

php / markup / javascript 中的一个问题`#testimonials`是在循环内部。它应该不在循环中，因为现在您的`.slide`元素没有兄弟姐妹并`next()`获得下一个兄弟姐妹（并且每个页面只能有一个唯一 ID；现在您拥有的`#testimonials`元素与您的推荐一样多）：

```
<div id="testimonials">
<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

        <div class="slide">
            <div class="testimonial-quote">
            <?php the_content(); ?>
            </div>
        </div>

<?php endwhile; ?>  
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:59:08.087

您需要做两件事 - (1)`<div id="testimonials">`从循环中删除。并且（2）将除第一个之外的所有内容设置`<div class="slide">`为`style="display:none"`页面加载。您可以通过设置一个基本计数器来做到这一点（即。`$i=0; $i++;`）

```
<?php 
  $loop = new WP_Query(array('post_type' => 'qcamp', 'posts_per_page' => 5)); 
  if ($loop->have_posts()) { ?>
<div id="camps-quote">
<div id="testimonials">
<?php $i=0; // set up a basic counter counter ?>
<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

        <div class="slide" <?php if ($i > 0) echo 'style="display:none"'; ?> >
            <div class="testimonial-quote">
            <?php the_content(); ?>
            </div>
        </div>
<?php $i++; // increase the counter ?>
<?php endwhile; ?>  

</div>
</div>
<?php } ?> 
```

查看 jsfiddle - [http://jsfiddle.net/CEqKu/](http://jsfiddle.net/CEqKu/)

# java - 将节点添加到节点 XML dom4j

> ID：15237353
> 
> 赞同：0
> 
> 时间：2013-03-06T01:28:31.213
> 
> 标签：java, xml, dom4j

在 DOM4J 和 XML 中如何将节点添加到现有节点？

如果我按照示例进行操作，那么如果我已经有一个元素，它会非常简单并且效果很好。

```
Element root = doc.getRootElement();
Element someElement = root.addElement("some");
Element anotherElement = someElement.addElement("another"); 
```

等等。如果我有一个 Element 对象，这很容易。

但是一旦我丢失了一个引用或者正在加载一个 xml 而不是从头开始创建一个，我就无法理解如何在我想要的地方添加一个节点/元素。

所以具体的问题是：给定一个文档和其中的一个特定元素，我如何在它下面添加一个元素？我必须遍历整个文档吗？Xpath 我只能返回没有 .addElement 的节点，我不能把它变成一个元素。除了添加 ID=? 对于每个节点，我只是无法弄清楚如何将某些东西准确地放在我想要它去的地方。任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:42:37.280

您可以迭代并检查所需的节点并将新创建的节点添加到其中，或者您可以使用 xpath 表达式来获取特定节点并向其添加新节点。

**迭代：**

```
 public void iterateNodes() {
     SAXReader reader = new SAXReader();
     Document document = reader.read("yourxml.xml");
     Element root = document.getRootElement();
     for ( Iterator i = root.elementIterator(); i.hasNext(); ){
           Element row = (Element) i.next();
           Iterator itr = row.elementIterator();
           while(itr.hasNext()) {
                Element child = (Element) itr.next();
                String name = child.getQualifiedName();
                if(name.equals("requiredName") {
                   //create node and add it to child.
                }   
           }
     }
 } 
```

**XPath：**

```
public void addNodeUsingXpath() {
    SAXReader reader = new SAXReader();
     Document document = reader.read("yourxml.xml");
        String xpathExpression = "yourxpath";
        List<Node> nodes = document.selectNodes(xpathExpression);
        // nodes will have all the child nodes under your Xpath.
        for (Node node : nodes) {
           //get the required node and add your new node to specific node.
            if(node instanceof Element) {
                 Element e = (Element) node;
                 e.addElement("newElement");
                 ....
            }
        }
} 
```

# python - windll.kernel32.OpenProcess(PROCESS_ALL_ACCESS, PID, False): Process_all_Access 未定义

> ID：15237357
> 
> 赞同：1
> 
> 时间：2013-03-06T01:28:50.453
> 
> 标签：python, ctypes

又是我。我将继续我的 C 和 Python 之旅。

今天正好在做一个调试器。目前，这就是我所拥有的

```
 from ctypes import *
    from Debugdeclares import *

    kernel32 = windll.kernel32
    class debugger():
        def __init__(self):
            self.h_process = None
            self.pid = None
            self.debugger_active = False

        def load(self, path_to_exe):
            creation_flags = DEBUG_PROCESS
            startupinfo = STARTUPINFO()
            processinfo = PROCESS_INFORMATION()
            startupinfo.dwFlags = 0x1
            startupinfo.wShowWindow = 0x0
            startupinfo.cb = sizeof(startupinfo)
            if kernel32.CreateProcessA(path_to_exe,None,None,None,None,creation_flags,None,None,byref(startupinfo),byref(processinfo)):
                print("[n] Process launched")
                print("[n] Process location: %s" % (path_to_exe))
                print("[n] PID: %d" % (processinfo.dwProcessId))
                self.h_process = self.open_process(processinfo.dwProcessId)
                return processinfo.dwProcessId
            else:
                print("[n] Error: 0x%08x." % (kernel32.GetLastError()))

        def open_process(self, pid):
            h_process = kernel32.OpenProcess(PROCESS_ALL_ACCESS,pid,False) 
```

* * *

这是错误点所在，未定义 PROCESS_ALL_ACCESS。但是，在 ctypes 库中，有一个该关键字的输入。我曾尝试使用字符串、字节字符串，但无济于事。[以下是有关 OpenProcess 功能](http://msdn.microsoft.com/en-us/library/ms684320.aspx)以及[有关进程安全性和访问权限](http://msdn.microsoft.com/en-us/library/ms684880.aspx)的一些附加信息

* * *

```
 return h_process

        def attach(self, pid):
            self.h_process = self.open_process(pid)
            if kernel32.DebugActiveProcess(pid) == True:
                self.debugger_active = True
                self.pid = int(pid)
                self.run()
            else:
                print("[n] Unable to Attach Process")

        def run(self):
            while self.debugger_active == True:
                self.get_debug_event()

        def get_debug_event(self):
            debug_event = DEBUG_EVENT()
            continue_status = DBG_CONTINUE
            if kernel32.WaitForDebugEvent(byref(debug_event), INFINITE):
                input("[n] Nothing to see yet...")
                self.debugger_active = False
                kernel32.ContinueDebugEvent( \
                    debug_event.dwProcessId, \
                    debug_event.dwThreadId, \
                    continue_status )
        def detach(self):
            if kernel32.DebugActiveProcessStop(self.pid):
                print("[n] Finished debugging. Exiting...")
                return True
            else:
                print("[n] There was an error")
                return False

    debugger = debugger()
    pid = debugger.load(b"C:\\WINDOWS\\system32\\calc.exe")
    debugger.attach(pid)
    debugger.detach() 
```

所以真的，我在问：什么是错误修复？

非常感激！-诺顿

编辑：哦，是的！这是我的 Debugdeclares 脚本：

```
 from ctypes import *

    WORD = c_ushort
    DWORD = c_ulong
    LPBYTE = POINTER(c_ubyte)
    LPTSTR = POINTER(c_char)
    HANDLE = c_void_p

    DEBUG_PROCESS = 0x00000001
    CREATE_NEW_CONSOLE = 0x00000010

    class STARTUPINFO(Structure):
        _fields_ = [
        ("cb", DWORD),
        ("lpReserved", LPTSTR),
        ("lpDesktop", LPTSTR),
        ("lpTitle", LPTSTR),
        ("dwX", DWORD),
        ("dwY", DWORD),
        ("dwXSize", DWORD),
        ("dwYSize", DWORD),
        ("dwXCountChars", DWORD),
        ("dwYCountChars", DWORD),
        ("dwFillAttribute",DWORD),
        ("dwFlags", DWORD),
        ("wShowWindow", WORD),
        ("cbReserved2", WORD),
        ("lpReserved2", LPBYTE),
        ("hStdInput", HANDLE),
        ("hStdOutput", HANDLE),
        ("hStdError", HANDLE),
        ]
    class PROCESS_INFORMATION(Structure):
        _fields_ = [
        ("hProcess", HANDLE),
        ("hThread", HANDLE),
        ("dwProcessId", DWORD),
        ("dwThreadId", DWORD),
        ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:59:46.730

您的错误消息确切地告诉您出了什么问题：`PROCESS_ALL_ACCESS`未定义，因为您尚未在任何地方定义它。我不知道“在 ctypes 库中，有一个该关键字的输入”应该是什么意思，但`ctypes`没有为您定义它。

事实上，Python 标准库中唯一`PROCESS_ALL_ACCESS`提到的地方是`multiprocessing`模块使用的未记录的 C 扩展：

```
>>> from _multiprocessing import win32
>>> win32.PROCESS_ALL_ACCESS
2035711 
```

使用它可能是一个坏主意，因为如前所述，它是无证的。

因为`PROCESS_ALL_ACCESS`它是一个宏，所以没有办法通过运行时之类的东西找出它的值`ctypes`，所以如果你想要它，你必须为你的系统查找它是什么，并在你的代码中自己定义它。[尽管注意您链接的文档](http://msdn.microsoft.com/en-us/library/ms684880.aspx)中的警告并找出一组最低访问权限可能是一个更好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T06:21:32.033

`PROCESS_ALL_ACCESS = (0x000F0000L | 0x00100000L | 0xFFF)`

完毕。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-22T08:42:56.007

```
h_process = kernel32.OpenProcess(PROCESS_ALL_ACCESS,pid,False) 
```

这应该是。

```
h_process = kernel32.OpenProcess(PROCESS_ALL_ACCESS, False, pid) 
```

结帐 MSDN 参考。

[http://msdn.microsoft.com/es-es/library/windows/desktop/ms684320(v=vs.85).aspx](http://msdn.microsoft.com/es-es/library/windows/desktop/ms684320(v=vs.85).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-18T19:43:48.420

可以有两种方法来定义**PROCESS_ALL_ACCESS**的值：

将其值定义为：

```
 PROCESS_ALL_ACCESS = 0x001F0FFF 
```

或者

使用*_multiprocessing*库：

```
 from _multiprocessing import win32
   h_process = kernel32.OpenProcess(win32.PROCESS_ALL_ACCESS,False,pid) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T02:24:24.240

对于 Gray Hat Python 书，您必须阅读第 30 页的警告。

下载 my_debugger_defines.py 并将其替换为您当前的副本。

# jquery - onclick 没有被执行

> ID：15237358
> 
> 赞同：-1
> 
> 时间：2013-03-06T01:28:51.307
> 
> 标签：jquery

部分代码没有被执行。打开盒子的动画效果很好。但关闭动画不起作用。怎么了？

```
$('#basic-modal .basic').click(function (e) {
    $("#basic-modal-content").modal({onOpen: function (dialog) {
        dialog.overlay.fadeIn('slow', function () {
            dialog.data.hide();
            dialog.container.fadeIn('slow', function () {
                dialog.data.slideDown('slow');   
            });
        });
    }}); 

    $("#basic-modal-content").modal({onClose: function (dialog) {
        dialog.data.fadeOut('slow', function () {
            dialog.container.hide('slow', function () {
            dialog.overlay.slideUp('slow', function () {
                $.modal.close();
            return false;
        });
    });
}); 
```

}});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:32:02.130

将`onOpen`和`onClose`属性组合到同一个`modal()`初始化调用中：

```
$('#basic-modal .basic').click(function (e) {
    $("#basic-modal-content").modal({onOpen: function (dialog) {
        dialog.overlay.fadeIn('slow', function () {
            dialog.data.hide();
            dialog.container.fadeIn('slow', function () {
                dialog.data.slideDown('slow');   
            });
        });
    },
    onClose: function (dialog) {
        dialog.data.fadeOut('slow', function () {
            dialog.container.hide('slow', function () {
            dialog.overlay.slideUp('slow', function () {
                $.modal.close();
            return false;
        });
    }});
}); 
```

*编辑：正如其他人所暗示的那样，我在黑暗中拍摄，因为我们甚至不知道您使用的是什么脚本。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T19:57:02.240

答案有点问题。对于可以使用它的其他人，这是完整的代码：

```
jQuery(function ($) {
$('#basic-modal .basic').click(function (e) {
$("#basic-modal-content").modal({onOpen: function (dialog) {
    dialog.overlay.fadeIn('slow', function () {
        dialog.data.hide();
        dialog.container.fadeIn('slow', function () {
            dialog.data.slideDown('slow');   
        });
    });
},
    onClose: function (dialog) {
        dialog.data.fadeOut('slow', function () {
            dialog.container.hide('slow', function () {
            dialog.overlay.slideUp('slow', function () {
            $.modal.close();
            return false;
        });
    });
});
}}); 
```

# javascript - 如何检测搜索结果页面中的项目已在另一个浏览器选项卡中打开

> ID：15237363
> 
> 赞同：5
> 
> 时间：2013-03-06T01:29:09.197
> 
> 标签：javascript, html, navigation, browser-history, browser-tab

我搜索了 SO 并且这个问题已经[被](https://stackoverflow.com/questions/850058/is-it-possible-to-detect-if-a-user-has-opened-a-link-in-a-new-tab) [问](https://stackoverflow.com/questions/4038629/possible-to-detect-if-a-user-has-multiple-tabs-of-your-site-open) [过](https://stackoverflow.com/questions/7554507/jquery-detect-mouse-click-and-open-target-in-new-tab) [好](https://stackoverflow.com/questions/995492/how-to-trap-open-in-a-new-tab-clicks-in-jquery-click?rq=1) [几次](https://stackoverflow.com/questions/1516662/detect-when-link-is-clicked-open-in-new-frame?rq=1)了，但是我没有找到解释我想要实现的行为是如何实际实现的答案。

我的想法是模仿booking.com的功能，当您从搜索结果列表中打开搜索结果时，会出现一个表示该结果已在另一个选项卡（或窗口）中打开的div，并且在该其他选项卡（或窗口）已关闭。

截屏：![在此处输入图像描述](../Images/b2e48e3a3bfb606eebbb95fe90cf6189.png)

第一次尝试是检查链接是否附加了一些 javascript，但事实并非如此，因为如果您只是从页面源复制 url，然后打开它，该功能就可以工作。

所以我认为它可以在服务器端以某种方式进行管理，启动wireshark来尝试捕获两个打开的页面和服务器之间的任何ajax调用。有很多请求，但似乎没有人传递所需的信息（我猜是酒店 ID 或某个 url）。另请注意，在隐身窗口或另一个浏览器（我的意思是，firefox 而不是 chrome）窗口中打开包含会话 ID 的结果项 URL 会破坏该功能；这样就排除了任何会话或 IP 地址跟踪。

我能想到的最后一次尝试是搜索结果页面正在轮询一些 cookie，该 cookie 在打开另一个页面时在域上设置，在关闭时取消设置。因此，我检查了 cookie，其内容实际上有点难以理解，但我所看到的是在其他选项卡打开和关闭时实际上没有更改任何 cookie，因此，再次，不能这样做。

还剩下什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:57:07.407

理论上，应该可以使用 localStorage/sessionStorage 来做到这一点，方法是在每个页面上设置当前页面 URL，并每隔一段时间在“原始”页面上检查该值是否与`document.location`.

如果您在存储事物中也设置了当前时间，则可以通过查看“最后一个选项卡时间”是否超过 30 秒或类似时间来检查页面是否关闭。

至于该网站，我访问了它并进行了搜索，但在我尝试它时根本没有看到任何警告或任何关于新标签打开的信息。

# ruby-on-rails - 使用 Ruby on Rails，如何从本地主机上传到远程服务器？

> ID：15237364
> 
> 赞同：0
> 
> 时间：2013-03-06T01:29:14.460
> 
> 标签：ruby-on-rails, ruby, web, upload

我对 Web 开发和使用 Ubuntu 12.04 进行开发真的很陌生。

在创建这个项目时，我是否需要上传 Rails 创建的所有文件，如配置、日志？

您的回答将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:32:16.760

是的，您几乎需要所有由 rails 生成的文件，例如配置文件，但不需要日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:12:50.587

您需要根据需要在 localhost 中运行应用程序所需的文件。当前日志文件可能来自在 localhost 环境中使用该应用程序，因此可以将它们排除在外。

请注意，如果您要上传到使用 postgresql 的 Heroku 等网站，如果您使用其他数据库系统，您的 Gemfile 将需要指标。例如：

```
#Gemfile

# if using sqlite3 in your local environment during development
group :development do
  gem 'sqlite3'
end

# if using Heroku, postgresql is used, and the 'production' group 
# will be automagically used
group :production do
  gem 'pg'
end 
```

# sql-server - 包括每月计数，包括不存在数据的月份

> ID：15237365
> 
> 赞同：0
> 
> 时间：2013-03-06T01:29:21.173
> 
> 标签：sql-server, date, select, reporting-services

这似乎应该很容易，但我似乎无法弄清楚。我有一张桌子，上面有`Artifact`名字和`Modification_Date`其他东西。我有一个查询，按月获取文档修改次数。有几个月没有修改。由于我正在查询和分组，`Modification_Date`因此这些月份没有返回结果，没有进行任何修改。理想情况下，在结果集中，我希望那里的月份和 0 为`Quantity`.

```
SELECT CONVERT(NVARCHAR(7), Modification_Date, 120) [Month], 
    COUNT(Artifact) as Quantity
    FROM table
WHERE Modification_Date > DATEADD(month, -6, getdate())
GROUP BY CONVERT(NVARCHAR(7), Modification_Date, 120)
ORDER BY [Month] DESC 
```

这让我得到类似的结果：

```
Month       Quantity
-------     --------
2013-02     10
2012-11     12
2012-10     5
2012-09     29 
```

如您所见，2012 年 12 月和 2013 年 1 月这两个月份不在结果集中。我想在那里用 0 表示这些月份，`Quantity`以便我可以在 SQL 报告条形图中使用该数据并将这些月份用 0 值表示。目前在条形图上它完全跳过了这些月份。有没有办法生成`yyyy-mm` `Month`过去 6 个月的列，而不仅仅是使用`Modification_Date`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:46:04.727

不要将日期转换为字符串以去除时间或日期，请使用日期算术。转换为字符串的效率较低，并且还需要扫描整个表。

如果要转换为固定长度的字符串，请不要使用`NVARCHAR`，请使用`CHAR`. 您需要在数字日期中支持哪些 Unicode 字符？变音符号？英镑符号？象形文字？

这是一个使用目录视图生成 6 行的示例，然后从当前日期减去几个月以按前 6 个月分组（并且`Modification_Date`应该使用索引，与您当前的方法不同）。当您第一次看到它时，这并不完全直观，但您可以看到我关于不带循环的生成集的系列（[第 1](http://sqlperformance.com/generate-a-set-1)部分|[第 2](http://sqlperformance.com/generate-a-set-2)部分|[第 3 部分](http://sqlperformance.com/generate-a-set-3)）。

```
;WITH x(m) AS 
(
  SELECT TOP 6 DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) 
    - (ROW_NUMBER() OVER (ORDER BY [object_id])), 0) 
  FROM sys.all_objects
  ORDER BY [object_id]
)
SELECT [Month] = x.m, Quantity = COALESCE(COUNT(t.Artifact), 0)
FROM x
LEFT OUTER JOIN dbo.tablename AS t
ON t.Modification_Date >= x.m
AND t.Modification_Date < DATEADD(MONTH, 1, x.m)
GROUP BY x.m
ORDER BY x.m DESC; 
```

请注意，这不包括当前月份。如果您想转换为包括 10 月 -> 3 月而不是 9 月 -> 2 月，只需更改此行：

```
+ 1 - (ROW_NUMBER() OVER (ORDER BY [object_id])), 0) 
```

如果格式化`YYYY-MM`是绝对必要的，你可以这样做：

```
;WITH y(m) AS 
(
  SELECT TOP 6 DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) 
    - (ROW_NUMBER() OVER (ORDER BY [object_id])), 0) 
  FROM sys.all_objects
  ORDER BY [object_id]
),
x([Month], Quantity)
AS
(
  SELECT [Month] = y.m, Quantity = COALESCE(COUNT(t.Artifact), 0)
  FROM y
  LEFT OUTER JOIN dbo.tablename AS t
  ON t.Modification_Date >= y.m
  AND t.Modification_Date < DATEADD(MONTH, 1, y.m)
  GROUP BY y.m
)
SELECT [Month] = CONVERT(CHAR(7), [Month], 120), Quantity
FROM x
ORDER BY [Month] DESC; 
```

# sql - 如何在heroku上执行.sql脚本？

> ID：15237366
> 
> 赞同：74
> 
> 时间：2013-03-06T01:29:28.157
> 
> 标签：sql, postgresql, heroku

我有一个带有一堆插入命令的 .sql 文件，我想在 heroku 上的 postgres 数据库上执行这些命令。但我不知道该怎么做：-

如果我可以访问 postgres 控制台，我会输入以下内容：

```
psql -h localhost -d database -U username -f datafile.sql 
```

但似乎 heroku 不支持此命令。我试过了

```
heroku pg:psql 
```

但这不允许我输入文件。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-03-06T01:56:10.857

对于像播种数据库这样的事情，我推荐 Richard Brown 的回答：可以说你最好使用 Rails 种子机制之类的东西，或者像 rake 任务这样的脚本。

也就是说，能够对 sql（原始或文件）进行管道传输是一项有用的功能，尤其是对于诸如简单查找或例行查询之类的幂等事务。在这种情况下，您可以使用以下任何方式执行本地 sql：

```
$ cat file.sql | heroku pg:psql --app app_name
$ echo "select * from table;" | heroku pg:psql --app app_name
$ heroku pg:psql --app app_name < file.sql 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-07T08:59:35.650

为什么不直接使用 psql？

如果您查看输出，`heroku config`您将看到您的应用程序正在使用的数据库 URL（DATABASE_URL 键） - 如果您将其分解为正确的位以便与`psql`all 一起使用会很好。

例如

```
DATABASE_URL:  postgres://username:password@host:port/dbname 
```

变成

```
psql -h host -p port -d dbname -U username -f datafile.sql 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T01:36:39.523

我喜欢可测试和可重复的更新。当我需要更新数据库时，我会编写一个 rake 任务来执行更新；这样，您可以先针对测试运行它，以确保在生产中运行之前输出正确。

您没有提及这是初始数据库加载还是稍后运行，但将新数据加载到 Rails 数据库的惯例是创建一个`db:seed`rake 文件，您可以在`db:migrate`任务完成后执行该文件。

请参阅：http: [//justinfrench.com/notebook/a-custom-rake-task-to-reset-and-seed-your-database](http://justinfrench.com/notebook/a-custom-rake-task-to-reset-and-seed-your-database) 和：[http ://railscasts.com/episodes/179-seed-data](http://railscasts.com/episodes/179-seed-data)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-03T19:00:47.197

我将建议另一种方法，因为我已经从这个问题中受益，并且我正在寻找**更好**的选择来做到这一点（在速度方面）。

我将数据库种子设置为环境变量。With`Sequelize`将会是这样的（下面的代码只是为了演示条件）：

```
// Node.js app
if (process.env.RESTARTDB) {
  sequelize.sync({ force: true }).then(() => {
    // "init" is a raw SQL query
    sequelize.query(init);
  });
} 
```

如果您不想每次查询该文件时都重新启动应用程序，**则不建议使用**此方法`SQL`，但它比使用`heroku pg:psql`.

[在这里](https://devcenter.heroku.com/articles/config-vars#managing-config-vars)，您可以找到有关**如何配置 vars 的**更多信息。

# oracle - 通过 ADODB 将数据从 Oracle 加载到 Excel - 性能问题

> ID：15237374
> 
> 赞同：2
> 
> 时间：2013-03-06T01:30:47.077
> 
> 标签：oracle, excel, vba, excel-2007, adodb

我们有一个使用 VBA、命名范围、ADODB 的大型 Excel 应用程序。它的主要功能是连接到 Oracle，将数据集加载到 Excel 中，允许用户对其进行编辑并将其保存回 Oracle。该应用程序在 Excel 2003 中，但我们一直想升级到 Excel 2007。我们现在在粘贴到 Excel 2003 应用程序时遇到“格式太多”错误，这是升级的一个很好的理由。

将 Excel 2003 保存为 Excel 2007 并运行 Oracle 加载 VBA 后，加载数据大约需要两倍的时间。我们实际上可以看到正在加载的记录，而在 Excel 2003 版本中，工作表中的记录只是压缩了页面。

所以我的第一个目标是提高这个性能。有两种方法可以做到这一点：

1.  找出 Excel 2007 比 Excel 2003 慢的原因并修复它
2.  改进数据加载例程

关于第 1 项，我对其他任何人都感兴趣，他们可以阐明为什么在 2007 年与 2003 年相比，这样做需要更长的时间

在第 2 项上，我正在考虑使用 GetString 将记录集转换为字符串并将其粘贴到工作表上（而不是一次添加一个单元格）。我也对以前做过这件事的人感兴趣。

从 ADODB 转移到 Excel 工作表代码的一些经过清理的代码如下：

```
While Not RECSET.EOF
  ' loop thru columns returned in sql row
  sExtractRec = ""
  For i = 1 To Column_Names.Count
    vColumnName = Column_Names(i)
    vItem = RECSET(vColumnName) 
    vItem = formatIfDate(vItem, vColumnName) ' format if a date or datetime
    currCell.Value = vItem
    Set currCell = currCell.Offset(0, 1)
    If Not isNull(vItem) Then
          vItem = IIf(vItem = "", "", Replace(vItem, ";", " "))
    End If
    sExtractRec = sExtractRec & vItem & ";"
  Next i
  Set currCell = currCell.Offset(1, 0 - Column_Names.Count) ' goto first cell next row
  iRowCnt = iRowCnt + 1
  RECSET.MoveNext

  If bWriteExtractFile Then
      Print #iExtractFile, sExtractRec
  End If
Wend 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T12:01:27.473

内置`CopyFromRecordset`方法往往比手动填充单元格快得多。示例用法：

`Worksheets("Sheet1").Cells(2, 1).CopyFromRecordSet RECSET`

在将数据复制到工作表后，可能会修复日期/日期时间格式问题。

有关此方法的更多详细信息在[这里](http://msdn.microsoft.com/en-us/library/bb223288%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:51:25.537

首先尝试在填充工作表时关闭屏幕更新并将计算设置为手动。

我猜你现在不这样做了，因为你提到看着记录被逐行填充。

# python - 如何运行 Python 脚本（使用 Notepad++）

> ID：15237376
> 
> 赞同：2
> 
> 时间：2013-03-06T01:30:54.347
> 
> 标签：python, notepad++

我最近开始学习如何使用 Python 制作 roguelike 的[教程。](http://roguebasin.roguelikedevelopment.org/index.php?title=Complete_Roguelike_Tutorial,_using_python%2blibtcod)我编写了代码的第一部分（发布在下面），它可以绘制并让您控制播放器，但我不确定如何准确地运行它并对其进行测试。另外，我安装了 Python，并且正在使用 Notepad++。有人可以帮助弄清楚如何运行我的 .py 脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:37:38.120

Download the plugin PyNPP it will help with development in Notepad ++ haven't played with it too much though. Has options to customize your run options. Has a shortcut as well to launch quickly.

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:52:34.133

正如第一条评论所说，`python myscript.py`在命令行中输入。

在尝试编程之前熟悉命令行可能是值得的；这并不是特别难，一次全部学习会比学习你需要的零碎知识更容易。

# bash - Bash 不明确的多重重定向

> ID：15237380
> 
> 赞同：1
> 
> 时间：2013-03-06T01:31:06.870
> 
> 标签：bash, process, posix, io-redirection

对于我的操作系统类，我们必须实现一个类似于 shell 的程序。我遇到了一个我不知道如何解释的例子：

```
echo "test" > out1 > out2 
```

运行此程序后，将创建 out1 和 out2 但 out1 为空且 out2 包含“test”。

在我启动 echo 进程并将要打印的 stdout 修改为 out1 之后，接下来会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:37:03.890

重定向是从左到右处理的：首先`> out1`（创建`out1`文件描述符＃1并将其连接到它），然后`> out2`（创建`out2`文件描述符＃1并将其连接到它，取代前一个）。所以它实际上只是为两个不同的文件做两次完全相同的事情（`close(1)`加`fd = open(...)`号）。`dup(fd)`

**编辑添加：**正如*Bash 参考手册* [所说](http://www.gnu.org/software/bash/manual/bashref.html#Redirections)：

> 重定向按照它们出现的顺序进行处理，从左到右。

正如 POSIX[所说](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_07)：

> 如果一个命令指定了多个重定向运算符，则计算顺序为从开始到结束。

当然，这些解释仅适用于重定向确实在同一个简单命令中的情况。像这样的东西：

```
{ echo test > out1 ; } > out2 
```

实际上会写入`test`并`out1`留空`out2`，因为重定向`{}`发生在`echo test > out1`运行之前。

# android - 如何设计以下布局：

> ID：15237382
> 
> 赞同：-1
> 
> 时间：2013-03-06T01:31:15.893
> 
> 标签：android, layout, android-fragments

我需要设计以下布局：

![](../Images/0b1394feeb43e363f215db6e2b90b007.png)

现在你在这里看到的是：

在左侧，我有一个`ScrollView`. 在其中我有一个 2`TextView`的组合，一个`Button`/ `ImageButton`（红色的）连接到它们。

现在，两个`TextView`s 和一个红色`Button`按钮的组合可以有不同的图标，需要动态添加。

单击左侧的红色按钮时，右侧还有其他视图会弹出并消失`ScrollView`。因此，根据单击的按钮，您可以打开一个列表或一个`DatePicker`带有`TextView`、 接受和拒绝按钮的框（显示在右上角）。

在我在右侧视图中做出选择后，这将影响`TextView`调用左侧视图的按钮旁边的下一个。

最后，最右下角的红色按钮会将我的选择提交给服务器，并在收到回复后将我带到下一步。

现在的问题：

对于正确的部分，我理解我必须使用`Fragment`s。但是我也应该`Fragment`在左侧使用 s 吗？或者这是一个矫枉过正，我应该把它作为 a `TextView`and a `LinearLayout`with `TextView`and a放弃`Button`？

`Fragment`在这种情况下使用 s有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:02:44.453

对于左侧，您有一个 ListView。有一个 ListView 的适配器。在适配器的 getView() 方法中，您可以有一个类似这样的布局：

```
<LinearLayout orientation="vertical">
    <TextView >
    <LinearLayout orientation="horizontal">
        <TextView />
        <ImageButton />
    </LinearLayout>
</LinearLayout> 
```

适配器的 getCount() 方法将是您希望此模式重复的 # 次。

# javascript - apply 在这里做什么？

> ID：15237384
> 
> 赞同：0
> 
> 时间：2013-03-06T01:31:43.307
> 
> 标签：javascript

这段代码具体做了什么`func.apply(this, arguments);`？我可以看到，如果没有 ，就无法动态调整元素的大小`apply`，但是，似乎使用`this`或`arguments`之后没有做任何进一步的事情`apply`。

```
function throttle (func, wait) {
    var throttling = false;
    return function(){
        if (!throttling){
            func.apply(this, arguments);
            throttling = true;
            setTimeout(function(){
                throttling = false;
            }, wait);            
        }
    };
} 
```

[jsbin](http://jsbin.com/axugek/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:36:33.050

[`.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)允许您为方法调用设置`this`和`arguments`值（并立即调用它）。这允许您使用与调用者相同的`this`内部。通常，inside of会是别的东西（也许如果它是一个全局函数）。`func``func.apply``this``func``window`

此外，`.apply`允许您使用数组设置参数，因此您不必提前知道参数列表。

编辑：在这种特定情况下（jsbin）不需要它，因为`func`从不使用`this`或有任何参数。你可以只使用`func()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:35:47.320

throttle() 函数返回一个匿名函数。因此 apply 允许匿名函数再次调用自身并将原始参数传递给它。

所以代码本质上是检查它是否在节流，如果没有，则将节流设置为 true，当超时结束时，将节流设置为 false。

# php - 似乎无法摆脱 API 返回的不需要的标签

> ID：15237389
> 
> 赞同：1
> 
> 时间：2013-03-06T01:32:17.563
> 
> 标签：php, html-entities, strip-tags

我需要删除从 Petfinder API 返回的描述中的所有 HTML 标记，但我似乎无法弄清楚如何。

`$data['description']`保存返回的描述。我在源文件中看到的是这样的......

```
<div>some text that gets returned</div> 
```

我试过用`strip_tags`，我试过用`html_entity_decode`，但标签不会消失！

我需要剥离标签，以便截断描述。

有人有想法么？

```
$data['description'] = (string)$pet->description;

$description = $data['description'];
$description = htmlentities($description);
$description = html_entity_decode($description);
$description = strip_tags($description);

$description = substr($data['description'],0,300);
$description = substr($description,0,strrpos($description,' '));
$description = $description."...";

echo "<span style='text-align: justify; margin: 10px 0px;'>".$description."</span>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:48:47.040

问题是你先跑`htmlentities`。在这之后`strip_tags`不能再工作了。

只需这样做：

```
$test = '<div>some text that gets returned</div>';
echo strip_tags($test); 
```

硬核方式：

```
$doc = new DOMDocument();
$doc->loadHTML('<div>some text that gets returned</div>');
$items = $doc->getElementsByTagName('div');
$content = $items->item(0)->nodeValue;
echo $content; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:59:47.083

问题是您在处理过程中再次使用原始输入：

```
$description = $data['description'];
$description = htmlentities($description);
$description = html_entity_decode($description);
$description = strip_tags($description);

$description = substr($data['description'],0,300);
                      ^^^^^^^^^^^^^^^^^^^^ All previous changes undone!
$description = substr($description,0,strrpos($description,' '));
$description = $description."..."; 
```

除此之外，@redreggae 是对的，你只需要`strip_tags`.

# ios - 核心图 - 使图形全屏显示的选项 - 出现模态问题后的 addSubview

> ID：15237390
> 
> 赞同：0
> 
> 时间：2013-03-06T01:32:35.267
> 
> 标签：ios, ipad, uiview, uiviewcontroller, core-plot

这是一个多方面的问题，可以帮助那些使用 Core Plot 的人，或者那些在以模式方式呈现 UIViewController 时遇到问题的人，然后尝试将其作为子视图添加到较小的 UIView 中。

我有一个核心绘图图（corePlotView）添加到一个 500x350 UIView（myView），并成功地使用长按“模态”呈现它：

```
-(void)press:(UILongPressGestureRecognizer*)gesture {

    if(gesture.state == UIGestureRecognizerStateEnded)
    {
        corePlotView.closeBtn.hidden = NO;
        corePlotView.iPadCV = self;
        [corePlotView loadFullGraph];
        [ipadDelegate.detailViewController presentViewController:corePlotView animated:NO completion:nil];
    }
} 
```

这是一种使全屏图形出现并在 iPad 旋转时仍然调整图形大小的简单方法（非常重要）。当用户单击“closeBtn”时，会从 corePlotView 向dismissModalViewController 发送一条消息...

```
-(IBAction)close:(id)sender {

    self.closeBtn.hidden = YES;
    ipadDelegate = (AppDelegate_iPad *)[[UIApplication sharedApplication] delegate];
    [ipadDelegate.detailViewController dismissViewControllerAnimated:NO completion:nil];
    [iPadCV reloadOriginalGraph];
} 
```

...然后 reloadOriginalGraph 维护用户在呈现之前拥有的所有绘图和数据（重要），然后将视图调整回其原始框架，如下所示：

```
-(void)reloadOriginalGraph {

    [corePlotView.view setFrame:myView.bounds];
    [corePlotView loadOriginalGraph];
    [myView addSubview:corePlotView.view];
    [myView sendSubviewToBack:corePlotView.view];
} 
```

[corePlotView loadOriginalGraph] 和 [corePlotView loadFullGraph] 正在调用将所有文本大小和填充类型属性从原始设置切换到全屏设置的方法......不是问题。

问题是当图形成功缩小到 500x350 时，一旦 iPad 旋转，corePlotView 就会重新调整到模态视图的框架。显然，这不是我想要的，因为需要以某种方式维护或限制 500x350。

有没有人在呈现模态然后使用 addSubview 时遇到这个问题？此方法在 ARC 有机会将其删除之前将视图保持在堆栈上，但似乎模态的某些属性保持不变。有没有办法从 UIViewController 中去除这种“模态”？

有没有更简单的方法可以将 Core Plot 图形设置为全屏并使用手势再次返回（似乎捏手势未在 corePlotView 上注册，这就是我使用长按的原因）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:24:44.607

iOS 宿主视图使用捏合手势来允许绘图空间的捏合缩放。如果您希望有不同的行为，请将`allowPinchScaling`托管视图的属性设置`NO`为删除默认手势识别器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T16:26:51.517

After working with presentViewController "enough," I decided that the best looking and safest way to make a Core Plot graph full screen was this:

**IPHONE**

```
-(void)press:(UILongPressGestureRecognizer*)gesture {

if(gesture.state == UIGestureRecognizerStateEnded)
{
    [corePlotVC removeFromParentViewController];

    vc = [[UINavigationController alloc] initWithRootViewController:corePlotVC];
    vc.navigationBar.hidden = YES;
    corePlotVC.closeBtn.hidden = NO;
    corePlotVC.view.autoresizingMask = UIInterfaceOrientationMaskAll;
    [corePlotVC loadFullGraph];
    [details presentViewController:vc animated:NO completion:nil];
    [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade];
}
} 
```

**IPAD**

```
-(void)press:(UILongPressGestureRecognizer*)gesture {

if(gesture.state == UIGestureRecognizerStateEnded)
{
    [corePlotVC removeFromParentViewController];

    popover = [[UIPopoverController alloc] initWithContentViewController:corePlotVC];
    [popover setPopoverContentSize:CGSizeMake(1024, 1024)];
    popover.passthroughViews=[NSArray arrayWithObject:appDelegate.splitViewController.view];

    [popover presentPopoverFromRect:CGRectZero
                                       inView:appDelegate.splitViewController.view
                     permittedArrowDirections:UIPopoverArrowDirectionAny
                                     animated:YES];

    corePlotVC.closeBtn.hidden = NO;
    [corePlotVC loadFullGraph];
}
} 
```

In this case, to avoid pinching conflicts, I used a long press gesture. Notice that for the iPad, appDelegate.splitViewController.view from a UISplitViewController. It was using a UIPopoverController that eliminated a ton of problems with view hierarchies and crashes when rotating in iOS 6.

NOTE: Careful with the iPhone code. I've found that if you have an app that doesn't rotate, except the corePlotVC, you might see occurrences of navBars falling behind the status bar. I'm working through that now, but this code can save a lot of people some time as is, so have at it.

# java - 集合的 Gson 属性名称

> ID：15237392
> 
> 赞同：1
> 
> 时间：2013-03-06T01:32:50.233
> 
> 标签：java, json, gson

我有这个实体

```
class Foo
{
   public String FooName;
   public String FooId;
} 
```

我从一个方法中得到一个数组，`Foo`然后像这样将它序列化为 json 字符串

```
Foo[] foos = getFoos();
String json = gson.toJson(foos, Foo[].class); 
```

这会产生

```
[
    {
       "FooName" : "FirstFoo",
       "FooId" : "1"
    },
    {
       "FooName" : "SecondFoo",
       "FooId" : "2"
    }
] 
```

这很好，除了我需要有这样的包装器属性

```
{
  "foos":[
            {
               "FooName" : "FirstFoo",
               "FooId" : "1"
            },
            {
               "FooName" : "SecondFoo",
               "FooId" : "2"
            }
         ]
} 
```

我知道我可以创建一个包装类

```
class Foos
{
    Foo[] foos;
} 
```

并将 Foos.class 与 gson 一起使用，但我有 100 个类似的类`Foo`，我不想为每个类创建一个包装类。我还在考虑对返回的原始 json 进行一些字符串操作以添加包装器属性，但我将其保留用于计划 B（甚至 C）。所以，我想知道 gson 中是否有办法添加一个包装器属性，就像我上面问的那样。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:45:16.910

这是一种手动方法：

```
final Gson gson = new Gson();
final Foo[] foos = new Foo[] {};

final JsonElement elem = gson.toJsonTree(foos);
final JsonObject jsonObj = new JsonObject();
jsonObj.add("foo", elem);
System.out.println(jsonObj.toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:46:10.940

```
JsonObject obj = new JsonObject();          
obj.add("foos", gson.toJsonTree(foos, Foo[].class));            
String json = obj.toString(); 
```

# php - PHP购物车邮件功能

> ID：15237396
> 
> 赞同：0
> 
> 时间：2013-03-06T01:33:04.130
> 
> 标签：php

我做网上商店，当我需要把我的购物车放在邮件上时我卡住了，我不知道如何调用功能购物车来把它放在邮件上，或者我做错了函数来把它放在邮件上

```
function cart1(){
    foreach($_SESSION as $name => $value){
        if ($value>0){
            if (substr($name, 0,5)=='cart_'){
                $id =substr($name, 5, (strlen($name)-5)); 
                $get = mysql_query('SELECT id, name, price FROM products WHERE id='.mysql_real_escape_string($id));
                //racuna kolko kosta
                while($get_row = mysql_fetch_assoc($get)){
                    $sub = $get_row['price']*$value;
                    echo $get_row{'name'}.' x '.$value.' Kom'.' = '.number_format($sub,2). ' kn';
                }
            }
            //zbraje 1 i 2i ... proizvod
            echo "<br />";

            $total += $sub;
            //echo "<hr width='150'>";
        }
    }
    if ($total==0){
    echo "Cart is empty.";
    }
    else{
    echo 'Total: '.number_format($total, 2).' kn';
    }
} 
```

还有邮件功能，我知道客户信息但我不知道如何调用功能

```
<?php
require 'cart.php';
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "aaaa@hotmail.com";
    $email_subject = "Your email subject line";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Molimo Vas da upisete sva polja koja su oznacena *.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['name']) ||
        !isset($_POST['adress']) ||
        !isset($_POST['post']) ||
        !isset($_POST['city']) ||
        !isset($_POST['email']) ||
        !isset($_POST['tel']) ||
        !isset($_POST['comments']))  {
        died('We are sorry, but there appears to be a problem with the form you submitted.');      
    }

    $name = $_POST['name']; // required
    $adress = $_POST['adress']; // required
    $post = $_POST['post']; // not required
    $city = $_POST['city']; // required
    $email = $_POST['email'];
    $tel = $_POST['tel'];
    $comments = $_POST['comments'];
    $cart1 .= cart1();

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email)) {
    $error_message .= 'U didnt write email..<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$name)) {
    $error_message .= 'Niste upisali Ime i Prezime.<br />';
  }
  if(!preg_match($string_exp,$oib)) {
    $error_message .= 'Niste upisali OIB.<br />';
  }
  if(!preg_match($string_exp,$adress)) {
    $error_message .= 'U didnt write adress.<br />';
  }
  if(!preg_match($string_exp,$post)) {
    $error_message .= 'U didnt write Post number.<br />';
  }
  if(!preg_match($string_exp,$city)) {
    $error_message .= 'U didnt write city.<br />';
  }
  if(!preg_match($string_exp,$tel)) {
    $error_message .= 'U didnt write Tel.<br />';
  }

  if(strlen($comments) < 2) {
    $error_message .= 'U didnt write comment.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First name/lastname: ".clean_string($name)."\n";
    $email_message .= "Adres: ".clean_string($adress)."\n";
    $email_message .= "City: ".clean_string($city)."\n";
    $email_message .= "Post: ".clean_string($post)."\n";
    $email_message .= "Email: ".clean_string($email)."\n";
    $email_message .= "Tel: ".clean_string($tel)."\n";
    $email_message .= "Fax: ".clean_string($fax)."\n";
    $email_message .= "Comment: ".clean_string($comments)."\n";
    $email_message =  cart1();

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 
?>

<!-- include your own success html here -->

Tenx to buying here!<br />
<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:39:40.117

[1] cart1() is not **return**ing any value. Instead of echo, create a variable to hold/concatenate the string being returned, use: return $str_out;

[2] Suggest that you use the new mysqli protocol for php (with prepared statements) [http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

[3] Suggest that you incorporate error handlers in your code to catch exceptions.

# java - 跳过 for 循环中的迭代

> ID：15237397
> 
> 赞同：0
> 
> 时间：2013-03-06T01:33:26.140
> 
> 标签：java, algorithm, collections, iteration

如何改进此算法以使用动态验证源？

```
public static void main(String[] args) 
{
    int[] exclude = {1, 4, 7};

    for(int i= 0 ; i < 10; i++)
    { 
        if(i != 1 || i != 4 || i != 7);
        {
            continue;
        }
    }
        System.out.println(i);
    }
} 
```

意思是，我想而不是`if`在`for`循环内部，我想接收一个列表并验证必须排除元素的内容，可能是这样的：

```
 if(Arrays.asList(exclude).contains(i)) 
```

只是为了知道如何去做。我觉得它可能在未来很有用。基本上我想使用数组跳过循环中的某些迭代。

如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:56:19.770

这个电话：

```
Arrays.asList(exclude) 
```

实际上它创建了一个列表，这不是您想要的。如果您声明将数组排除为整数数组，它将起作用：

```
public static void main(String[] args) 
{
    Integer[] exclude = {1, 4, 7};

    for(int i= 0 ; i < 10; i++)
    {
       if(!Arrays.asList(exclude).contains(i))
       {
           System.out.println(i);
       }
    }
} 
```

问题是，您为`int[]`这个 Arrays.asList 提供了一个。编译器必须决定是否应该将泛型参数 T 解释为 int 或 int[]。但它不能选择`int`，因为你不能将整数类型作为泛型类型。它可以选择 Integer，但这意味着转换，`int[]`因此不是直接的。所以 T 是，它只使用您作为元素提供的数组`int[]`创建一个。`List<int[]>`当然，没有整数等于整个数组。这就是打印所有整数的原因。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T01:42:24.023

好像你已经拿到了？

```
public static void main(String[] args) 
{
    int[] exclude = {1, 4, 7};

    for(int i= 0 ; i < 10; i++)
    {
       if(Arrays.asList(exclude).contains(i))
       {
           i++;
       }
       else 
       {
           System.out.println(i);
       }
    }
} 
```

# cocos2d-iphone - 获取线程一：EXC_BAD_ACCESS cocos2d

> ID：15237401
> 
> 赞同：0
> 
> 时间：2013-03-06T01:33:49.937
> 
> 标签：cocos2d-iphone

这是我的游戏主菜单上的 init 方法：

```
-(id) init {
if( (self=[super initWithColor:ccc4(255, 255, 255, 255)])) {

    // Get the screen dimensions
    int screenWidth = [[CCDirector sharedDirector] winSize].width;
    int screenHeight = [[CCDirector sharedDirector] winSize].height;

    // Add the logo
    CCSprite* logo = [[CCSprite node] initWithFile:@"Ninjasplash2.png"];

    [logo setPosition:ccp(screenWidth/2.0,screenHeight * 0.65f)];

    [self addChild:logo];

    // Add the buttons
    CCMenuItemLabel   *startButton =
    [CCMenuItemFont itemWithString:@"Start" target:self selector:@selector(onStart:)];
    startButton.color = ccBLACK;

    CCMenuItemLabel *quitButton =
    [CCMenuItemFont itemWithString:@"Quit" target:self selector:@selector(onQuit:)];
    quitButton.color = ccBLACK;

    CCMenuItemLabel *optionsButton =
    [CCMenuItemFont itemWithString:@"Options" target:self selector:@selector(onOptions:)];
    optionsButton.color = ccBLACK;

    CCMenu *menu = [CCMenu menuWithItems:startButton, quitButton, optionsButton, nil];

    [menu alignItemsVertically];

    [menu setPosition:ccp(screenWidth / 2, screenHeight*0.25f)];

    [self addChild:menu];

    // Get the music started, yeh mon
   //[[SimpleAudioEngine sharedEngine] playBackgroundMusic:@"island.mp3" loop:true];
}

return self; 
```

}

尝试添加徽标时，我收到上述错误，我完全不知道如何修复它。令人难以置信的令人沮丧。如果您需要我添加更多信息，请告诉我，我会很高兴。谢谢你。另外，我读过它可能与内存管理和释放有关，但它甚至不会加载这个主屏幕，所以没有什么可以释放的。

我相信堆栈跟踪：

```
#0  0x01956df5 in objc_release ()
#1  0x01957c60 in (anonymous namespace)::AutoreleasePoolPage::pop(void*) ()
#2  0x01c8aed8 in _CFAutoreleasePoolPop ()
#3  0x002c4385 in CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) ()
#4  0x002c41af in CA::Display::TimerDisplayLink::callback(__CFRunLoopTimer*, void*) ()
#5  0x01d2a966 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ ()
#6  0x01d2a407 in __CFRunLoopDoTimer ()
#7  0x01c8d7c0 in __CFRunLoopRun ()
#8  0x01c8cdb4 in CFRunLoopRunSpecific ()
#9  0x01c8cccb in CFRunLoopRunInMode ()
#10 0x02a20879 in GSEventRunModal ()
#11 0x02a2093e in GSEventRun ()
#12 0x00845a9b in UIApplicationMain ()
#13 0x000c6526 in main at /Users/MaristUser/Desktop/Ninja Run/Ninja Run/main.m:14 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:58:13.110

```
CCSprite* logo = [[CCSprite node] initWithFile:@"Ninjasplash2.png"]; 
```

将上面的行更改为

```
CCSprite* logo = [[CCSprite alloc] initWithFile:@"Ninjasplash2.png"]; 
```

或者：

```
CCSprite* logo = [CCSprite spriteWithFile:@"Ninjasplash2.png"]; 
```

# php - 创建 MySQL 数据的备份

> ID：15237402
> 
> 赞同：0
> 
> 时间：2013-03-06T01:33:52.683
> 
> 标签：php, mysql, pdo

我正在使用 PHP / MySQL 创建论坛。我要添加的一个功能是能够删除类别，我想知道在被删除的类别中备份主题和回复的最佳方法。

我知道这样做的方法，但我觉得这不是正确的方法，所以我正在寻找其他选择。

我已经尝试寻找其他人这样做的方法，但我没有想出任何结果。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:36:40.703

虽然它可能需要重写一些查询，但首选的方法是添加一个`post_deleted`列，并且只显示`post_deleted=0`实时站点上的帖子。与其实际*删除*帖子，`post_deleted=1`不如稍后设置并查看它。然后，如果需要，您可以定期真正删除这些帖子。最终结果是非常详细的审计跟踪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:18:23.283

2个解决方案：

*   创建一个默认为 true 的 post_active 字段。如果该行处于活动状态，则显示它，如果不认为它已删除

*   创建已删除内容的重复表。每次删除一行，添加到日志中

如果需要，您可以通过将数据存储到 2 个表中来实现版本历史功能 - 一个包含数据层次结构 [表 a]，另一个包含实际信息 [表 b]。每次修改条目时，使用新数据在表 B 中创建一个重复行，并更新表 A 中的层次结构以链接到表 B 中的新记录。如果新记录具有链接到旧记录的字段，则您可以实现撤消功能

# c# - LINQ 查询 - 按键获取最新记录

> ID：15237405
> 
> 赞同：0
> 
> 时间：2013-03-06T01:34:21.787
> 
> 标签：c#, asp.net-mvc, linq

我有以下查询，它返回了一个客人列表以及一个 RSVP 列表。但是，由于每个事件用户可以有多个 RSVP，我只想获得最新的。RSVPs 表有一个提交日期列。

```
from guest in Guests
                join rsvp in RSVPs.Where(o => o.EventID == "1234")
                on guest.UserName equals rsvp.UserName into sr
                from x in sr.DefaultIfEmpty()
                select new
                {
                     guest,
                    x
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:51:08.503

按日期排序并取 1：

```
(from guest in Guests
            join rsvp in RSVPs.Where(o => o.EventID == "1234")
            on guest.UserName equals rsvp.UserName into sr
            from x in sr.DefaultIfEmpty()
            orderby x.RSVPDate desc
            select new
            {
                 guest,
                x
            })
.Take(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:42:14.737

```
from guest in Guests
                join rsvp in RSVPs.Where(o => o.EventID == "1234")
                on guest.UserName equals rsvp.UserName into sr
                from x in sr.DefaultIfEmpty()
                select new
                {
                     guest,
                    guest.RSVPs.Where(o => o.EventID =="1234")
                               .OrderByDesc(o=>o.SubmittedDate)
                               .FirstOrDefault()
                } 
```

事实上，你也可以试试这个，想法是加载正确的 RSVP 并加载附加的来宾对象，假设存在外键关系。

```
context.RSVPs.Include("Guest").Where(o => o.EventID =="1234").OrderByDesc(o=>o.SubmittedDate).FirstOrDefault() 
```

否则这可能是一个选项：

```
(from rsvp in context.RSVP
where rsvp.EventId == "1234"
join guest in context.Guests on rsvp.UserName equals guest.UserName 
select new {rsvp, guest}
orderby desc rsvp.SubmittedDate).FirstOrDefault() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:15:47.553

伪——

```
group x by username into g
select new {
  UserName = g.key // username
  FirstRsvp = g.OrderByDescending(item => item.RsvpDate).FirstOrDefault()
} 
```

希望这是 LINQ to objects，因为这种事情可能没有在 SQL 提供程序中定义。如果是 SQL 并且没有实现，.AsEnumerable() 会将查询拉入内存，然后从那里开始是 L2O。

# php - PHP - 无法执行 C++ 二进制文件？

> ID：15237410
> 
> 赞同：2
> 
> 时间：2013-03-06T01:35:11.137
> 
> 标签：php, c++, binary, exec, execute

我正在尝试从 PHP 执行我使用 cmake 和 make 命令生成的 c++ 二进制文件。如果我尝试从终端执行相同的命令，一切正常，但从 php 似乎什么都没有发生。我检查了安全模式，它关闭了。我已使用 chmod 授予所有可执行权限。我试过把东西放在同一个文件夹，不同的文件夹。事实上，我已经尝试了我能想到的所有可能的解决方案，但我仍然无法执行这些二进制文件。知道为什么我不能这样做吗？

任何帮助将不胜感激。

提前致谢。

我使用的程序：-

```
if($dir !== FALSE) {
    $command = "./segmentation.sh $dir->dirname >> $dir->dirname/log"; 
    $output = $this->terminal($command);
    echo $output['output'];
} 
```

终端功能

```
public function terminal($command)
{
    if(function_exists('system'))
    {
        ob_start();
        system($command , $return_var);
        $output = ob_get_contents();
        ob_end_clean();
    }
    else if(function_exists('passthru'))
    {
        ob_start();
        passthru($command , $return_var);
        $output = ob_get_contents();
        ob_end_clean();
    }
    else if(function_exists('exec'))
    {
        exec($command , $output , $return_var);
        $output = implode("n" , $output);
    }
    else if(function_exists('shell_exec'))
    {
        $output = shell_exec($command) ;
    }
    else
    {
        $output = 'Command execution not possible on this system';
        $return_var = 1;
    }
    return array('output' => $output , 'status' => $return_var);
} 
```

我的 shell 脚本对二进制文件有一个正常的调用，比如

```
/path/to/folder/binary_file $args 
```

我从我的 shell 脚本中尝试了 echo、ls、mkdir cmd，它运行良好，只是这些二进制文件没有被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:24:05.820

看起来您的工作目录可能与您想象的不同。

尝试这个：

```
$path = realpath(dirname(__FILE__) );

$cmd = $path . $command; 
```

并尝试执行该命令（假设 c++ 文件与您正在运行的 php 文件位于同一目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:26:16.877

是 MAMP 导致了这个问题。

如果您像我一样使用 MAMP，那么您必须再执行一件事。

转到菜单->转到文件夹->在文本框中写入“/Applications/MAMP/Library/bin/”->按回车

查找名为“envvars”的文件并使用 # 注释以下行：-

DYLD_LIBRARY_PATH="/Applications/MAMP/Library/lib:$DYLD_LIBRARY_PATH" 导出 DYLD_LIBRARY_PATH

现在一切都应该正常了。

[归功于此博客 - 作者 Jonathon Hill](http://jonathonhill.net/2012-06-22/cannot-run-a-binary-executable-from-php-and-mamp/)

# perl - 从两个 HEX 对生成一个 UTF-8 字符

> ID：15237412
> 
> 赞同：0
> 
> 时间：2013-03-06T01:35:23.347
> 
> 标签：perl, utf-8

我正在尝试从 2 个 HEX 对生成一个 UTF-8 字符。十六进制对来自字符串。

此代码有效：

```
use Encode;

my $bytes = "\xC3\xA9";
print decode_utf8($bytes);

# Prints: é and is correct 
```

此代码不起作用：

```
use Encode;

my $byte1 = "C3";
my $byte2 = "A9";
my $bytes = "\x$byte1\x$byte2";
print decode_utf8($bytes); 
```

这是我要生成的字符：[http ://www.fileformat.info/info/unicode/char/00e9/index.htm](http://www.fileformat.info/info/unicode/char/00e9/index.htm)

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:01:10.543

```
use Encode;

my $byte1 = "C3";
my $byte2 = "A9";
my $bytes = chr(hex($byte1)) . chr(hex($byte2));
print decode_utf8($bytes); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T02:23:40.447

将字符串文字视为一种迷你语言。你不能做

```
"\x$hex" 
```

比你能做的更多

```
my $for = 'for';
$for (1..4) { } 
```

但是有很多方法可以做你想做的事。

```
my $bytes = join '', map chr hex, @bytes_hex;
my $bytes = pack 'C*', map hex, @bytes_hex;
my $bytes = pack '(H*)*', @bytes_hex; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T02:08:37.763

Aahh ysth 打败了我：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Encode;
use utf8::all;

my $byte1 = "C3";
my $byte2 = "A9";
my $bytes = join '', map {chr hex} $byte1, $byte2;

print decode_utf8($bytes); 
```

# python - 如何设置 django 应用程序的基本 url？

> ID：15237415
> 
> 赞同：1
> 
> 时间：2013-03-06T01:35:37.193
> 
> 标签：python, django, user-accounts

我正在使用应用程序[django-userena](https://github.com/bread-and-pepper/django-userena)来管理用户帐户。我有它的工作，可以让用户注册，然后他们会收到一封电子邮件来验证他们的帐户。但是，我很难确定我们在哪里更改基本网址，以便电子邮件不使用`example.com`. 例如，电子邮件当前说：

> 感谢您在 example.com 上注册。
> 
> 要激活您的帐户，您应该点击以下链接：
> 
> [http://example.com/accounts/activate/14bd7b230525224b6bfd71ca4efd531d4694f857/](http://example.com/accounts/activate/14bd7b230525224b6bfd71ca4efd531d4694f857/)
> 
> 感谢您使用我们的网站！
> 
> 此致，example.com

我了解这是从以下模板生成的：

```
{% load i18n %}{% autoescape off %}{% load url from future %}
{% if not without_usernames %}{% blocktrans with user.username as username %}Dear {{ username }},{% endblocktrans %}
{% endif %}
{% blocktrans with site.name as site %}Thank you for signing up at {{ site }}.{% endblocktrans %}

{% trans "To activate your account you should click on the link below:" %}

{{ protocol }}://{{ site.domain }}{% url 'userena_activate' activation_key %}

{% trans "Thanks for using our site!" %}

{% trans "Sincerely" %},
{{ site.name }}
{% endautoescape %} 
```

但是，我无法弄清楚在哪里`example.com`设置 - 我已经尝试搜索并查看了每个包含此文件的文件，但我无法找到我应该（或者如果我应该）在某处设置 url。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:38:55.997

这可能是在[Django Sites](https://docs.djangoproject.com/en/dev/ref/contrib/sites/)框架中设置的。您应该能够通过管理员或直接在数据库中编辑该值。

# javascript - 如果 val 在其他框架中创建，为什么 typeof val === 'object' && val.constructor === Array 会失败？

> ID：15237417
> 
> 赞同：7
> 
> 时间：2013-03-06T01:35:54.533
> 
> 标签：javascript, arrays, typeof

在 JavaScript 中引用 Crockford 的优点：

> 我们可以......定义我们自己的 is_array 函数：

```
var is_array = function (value) {
    return value && typeof value === 'object' && value.constructor === Array;
} 
```

> 不幸的是，它无法识别在不同窗口或框架中构造的数组。

然后他没有解释原因。所以！为什么？

# mongodb - 生成唯一 URL

> ID：15237423
> 
> 赞同：1
> 
> 时间：2013-03-06T01:36:52.807
> 
> 标签：mongodb

所以，我遇到了一个问题。我有一个服务器正在尝试根据提供的数据生成“漂亮”的 URL。为了讨论，让我们说博客文章的标题。这个 url 显然需要是唯一的，以正确表示资源。好吧，如果我错了，请纠正我。但这在 MongoDB 中不是一个简单的问题吗？

起初我用谷歌搜索了某种类型的自动递增字段。这返回了我的预期，但有一个明显的问题.. 10gen 建议不要这样做。

> 警告 通常在 MongoDB 中，您不会对 _id 字段**或任何字段**使用自动增量模式，因为它不适用于具有大量文档的数据库。通常，默认值 ObjectId 更适合 _id。

注意加粗的文本。10gen 不建议您增加任何字段。

所以，回到问题上来。如果我给服务器一个帖子标题，并且我希望它创建一个帖子，我希望它会自动将我的标题更改为一个唯一的标题。例如，如果我创建三个标题为 的帖子`foo`，我希望服务器为`/foo`、`/foo1`、`/foo2`. 虽然，它可以是任何形式的唯一添加，这里的重点是服务器正在处理创建唯一 url 的肮脏工作，而不是简单地失败并让用户反复尝试提出唯一 url。

话虽如此，这是如何以“MongoDB方式”完成的？10gen 建议*不要*增加，基本上我能找到的唯一唯一字符串是`ObjectID`，但`/foo50bbe1573b60ff0000000002`几乎不是“漂亮”。你不得不承认，如果你被迫使用`/foo50bbe1573b60ff0000000002`，你还不如直接使用`/50bbe1573b60ff0000000002`. “漂亮”在前 5 个字符之后早已不复存在。

那么，关于如何以 MongoDB 友好的方式处理这个问题有什么想法/意见吗？

**可能的答案：** 一个可怕的解决方案是重复文档创建直到唯一的通过，但最多 X 次。例如，

1.  你可以试着用标题写
2.  如果失败，用标题加上 objectid 的增量值*（比如 00002）写入它*
3.  如果失败了，就用整个该死的objectid来写吧。无论如何，我们已经输了。

**可能的答案：** 另一个可能的答案，就是按照 10gen 的建议去做，做一个递增的字段。

在上述两种解决方案中，我确信每种方法在不同的方法上都更有效。例如：如果您的唯一字段很可能是唯一的，例如 40 个用户输入的数据字符，则解决方案 1 可能是最好的。如果你处理 4 个字符，它可能会像糖蜜一样慢。

**编辑：更好的答案** 我认为两者的结合是最好的。拥有一组“原始”网址*（例如`/foo`：）*，并计算它们被写入的次数。将计数附加到您的目标网址，您就有了一个唯一的网址。我相信这将是 10gen 建议反对的性能问题之间的平衡，同时仍然为您提供增量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:57:54.277

10gen 警告不要放置某种悲观并发或使用服务器端 javascript 来查找 ENTIRE 集合的当前最大键，然后递增它并返回新的 _id。MongoDB 是为通常依赖于火而忘记插入/更新的大型集合而设计的。根据您所描述的应用程序的性质，这些都不是障碍（比 10gen 的建议更重要的是您对问题域的了解以及这可能如何与他们向您发出警告的项目交互）。

一个不违背 10gen 建议的更好方案是从帖子的其他一些属性（即用户名、创建日期和时间等）中构建一个 url。

在您的博客文章示例中，您的 url 路径可能看起来像

> /posts/userName/2013/3/5/title-of-my-post

您必须根据所显示资源的属性来决定实际方案，但这是一个好的开始。在此示例中，除非单个用户在同一天创建两个标题完全相同的帖子，否则确保唯一的 url 不会有问题。在这种情况下，您的文档可能如下所示：

> { _id: ObjectId(...), userName: "userName", dateCreated: ISODate("2013-03-05"), title: "我的帖子标题", body: "..." }

使用唯一索引`{dateCreated: -1, userName: 1, title: 1}`（这也可以让您很好地按用户对帖子进行排序和排序）。

# c++ - 可以重用线程来运行可变参数函数吗？

> ID：15237426
> 
> 赞同：0
> 
> 时间：2013-03-06T01:37:02.940
> 
> 标签：c++, multithreading, boost-thread, variadic-templates

我正在尝试在 C++ 中创建一个 boost 线程，可以重用它来运行可以具有不同数量和类型的 args 的各种函数。

这可以用 C++11x 可变参数来完成吗？

在我的用例中，我不需要队列（如果线程很忙，那么该方法就会失败），但如果需要实现这个“统一”功能，我会很不情愿地这样做。

我不明白如何使用 bind 或 lambda 处理统一，以便一个线程可以调用不同的函数，每个函数都有自己的不同数量和类型的 args。

我大致想到以下几点：

```
class WorkThread
{
public:
   WorkThread()
       {
       // create thread and bind runner to thread
       }

   ~WorkThread()
       {
       // tell runner to exit and wait and reap the thread
       }

   template<typename F,typename ... Arguments>
   void doWork(F func, Arguments... args)
       {
       if already busy
           return false;
       // set indication to runner that there is new work
       // here: how to pass f and args to runner?
       }

private:
   void runner()
        {
        while ( ! time to quit )
            {
            wait for work
            // here: how to get f and args from doWork? do I really need a queue? could wait on a variadic signal maybe?
            f(args);
            }
        }

   boost::thread* m_thread;
};

class ThreadPool
{
public:
    template<typename F, typename ... Arguments>
    bool   doWork(F func,Arguments... args)
          {
          const int i = findAvailableWorkThread();
          m_thread[i].doWork(f,args);
          }
private:
   // a pool of work threads m_thread;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:00:38.873

应该有很多现有的问题显示如何做到这一点。

表示任意函数对象的规范 C++11 方法是`std::function<void()>`，因此您需要该类型的共享对象，`m_job`在下面的代码中调用，它应该受互斥体保护，并且当它还没有分配新作业时放：

```
template<typename F,typename ... Arguments>
bool doWork(F func, Arguments&&... args)
{
    std::lock_guard<std::mutex> l(m_job_mutex);
    if (m_job)
        return false;
    m_job = std::bind(func, std::forward<Arguments>(args)...);
    m_job_cond.notify_one();  
    return true;   
} 
```

这用于`std::bind`将函数对象及其参数转换为不带参数的函数对象。由返回的可调用对象`std::bind`存储每个参数的副本`func`，并在调用时调用`func(args...)`

然后工人只是这样做：

```
void runner()
{
    while ( ! time to quit )
    {
        std::function<void()> job;
        {
            std::unique_lock<std::mutex> l(m_job_mutex);
            while (!m_job)
                m_job_cond.wait(l);
            swap(job, m_job);
        }
        job();
    }
} 
```

此代码不是线程安全的：

```
template<typename F, typename ... Arguments>
    bool   doWork(F func,Arguments... args)
    {
        const int i = findAvailableWorkThread();
        m_thread[i].doWork(f,args);
    } 
```

返回后`findAvailableWorkThread`，该线程可能会变得忙碌，因此下一行将失败。您应该检查可用性并在单个操作中传递新作业，例如

```
template<typename F, typename ... Arguments>
    bool   doWork(F func,Arguments... args)
    {
        for (auto& t : m_thread)
            if (t.doWork(f,args))
                return true;
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:59:08.010

您可以使用`boost::bind`或 C++11将所有函数统一为一个签名`lambda`。因此，您将拥有一个带有循环函数的线程，并且在该循环中您将提取要执行的函数。例如，要实现它，您可以使用`boost::lockfree::queue<boost::function<void()>>`.

作为这个想法的一个例子，您可以使用以下内容：

```
class TaskLoop
{
public:
    typedef std::function<void()> Task_t;
public:
    TaskLoop():
        m_IsDone(false)
    {
        m_spThread.reset(new std::thread(&TaskLoop::_run, this));
    }
    ~TaskLoop()
    {
        Task_t task = [this](){m_IsDone = true;};
        postTask(task);
        m_spThread->join();
    }
    void postTask(const Task_t& Msg)
    {
        std::lock_guard<std::mutex> lock(m_Mutex);
        m_Tasks.push(Msg);
    }
    void wait() 
    {
        while(!m_Tasks.empty());
    }
private:
    bool m_IsDone;
    std::unique_ptr<std::thread> m_spThread; 
    std::mutex m_Mutex;
    std::queue<Task_t> m_Tasks;
private:
    void _run()
    {
        while(!m_IsDone)
        {
            Task_t task;
            m_Mutex.lock();
            if(!m_Tasks.empty())
            {
                task = m_Tasks.front();
                m_Tasks.pop();
            }
            m_Mutex.unlock();
            if(task)
                task();
        }
    }
};

void foo(const std::string& first, int second)
{
    std::cout << first << second << "\n";
}

int main(int argc, char **argv)
{
    TaskLoop loop;
    loop.postTask([]{foo("task", 0);});
    loop.wait();
    return 0;
} 
```

示例不使用并发队列并且非常简单，因此您需要替换队列并使其适应您的要求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T20:50:42.617

由于您已经在使用 boost，请参阅[http://think-async.com/Asio/Recipes](http://think-async.com/Asio/Recipes)上的线程池类，它使用 Boost.Asio 对工作功能进行排队而无需锁定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T17:02:33.237

//这是我到目前为止似乎有效的东西......

```
#include <boost/thread.hpp>
#include <boost/thread/mutex.hpp>
#include <boost/thread/condition.hpp>

#include <queue>
#include <atomic>

class ThreadWorker
    {
    public:
        typedef boost::function<void()> Task_t;
        typedef std::unique_ptr<boost::thread>  UniqueThreadPtr_t;

        ThreadWorker()
            : m_timeToQuit(false)
            {
            m_spThread = UniqueThreadPtr_t( new boost::thread(std::bind(&ThreadWorker::runner, this)));
            }

        virtual ~ThreadWorker()
            {
            quit();
            }

        void quit()
            {
            Task_t task = [this]() { m_timeToQuit = true; };
            enqueue(task);
            m_spThread->join();
            }

        template<typename F,typename ...Args>
        void enqueue(F&& f, Args&&... args)
            {
            boost::mutex::scoped_lock lock(m_jobMutex);
            m_Tasks.push(std::bind(std::forward<F>(f),std::forward<Args>(args)...));
            m_newJob.notify_one();
            }

    private:
        std::atomic<bool>       m_timeToQuit;
        UniqueThreadPtr_t       m_spThread;
        mutable boost::mutex    m_jobMutex;
        std::queue<Task_t>      m_Tasks;
        boost::condition        m_newJob;

    private:
        void runner()
            {
            while ( ! m_timeToQuit )
                {
                Task_t task;
                    {
                    boost::mutex::scoped_lock lock(m_jobMutex);
                    while ( ! task )
                        {
                        if ( m_timeToQuit )
                            {
                            break;
                            }
                        if ( m_Tasks.empty() )
                            {
                            m_newJob.wait(lock);
                            }
                        task = m_Tasks.front();
                        m_Tasks.pop();
                        }
                    }
                if (task)
                    {
                    task();
                    }
                }
            }
    }; 
```

# c# - 类级字符串常量与方法级字符串常量

> ID：15237428
> 
> 赞同：4
> 
> 时间：2013-03-06T01:37:06.827
> 
> 标签：c#, string, constants

类级字符串常量与方法级字符串常量之间是否存在显着差异。编译器会识别常量并应用常量折叠吗？或者总是会创建 nw 对象？

这是示例：类级常量

```
class A
    {
        private const string Sid = "sid";
        private const string Pid = "pid";

        public void Do()
        {
            Console.WriteLine(Sid);
            Console.WriteLine(Pid);
        }
    } 
```

方法级常量：

```
class B
    {
        public void Do()
        {
            const string Sid = "sid";
            const string Pid = "pid";

            Console.WriteLine(Sid);
            Console.WriteLine(Pid);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:40:27.030

The difference between the constants is in scope - just as with a non-const declaration, the main thing to consider is from where these values can be accessed. Now, which declaration is cleaner is irrelevant enough to be worthy of an epic flame war...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:53:57.417

字符串常量是较新的“内联”*，因为它们是真正的对象。编译器总是将相同字符串常量的部分加在一起（即“a”+“b”等同于指定“ab”）。

字符串常量也可以“interned”——这意味着相同值的所有常量都指的是同一个实际的字符串对象（据我所知，C# 编译器总是这样做）。

除了总是在编译时尽可能多地计算之外，数字常量可以“内联”到使用它们的地方（即 2*2*4 与指定 16 相同）。

要实现“共享常量”行为，需要使用`readonly`字段而不是`const`.

*"inline" 直接放入结果代码中，而不是引用共享值。

# java - 同名的私有回调方法

> ID：15237430
> 
> 赞同：1
> 
> 时间：2013-03-06T01:37:15.920
> 
> 标签：java, hibernate, jpa, eclipselink, lifecycle

我找到

> 允许一个类覆盖相同回调类型的继承回调方法，在这种情况下，不会调用被覆盖的方法。

```
@MappedSuperclass
class Parent {
    @PrePersist
    protected void _PrePersist() { // <--+
    }                              //    |
}                                  //    |
                                   //    |
@Entity                            //    |
class Child {                      //    |
    @PrePersist                    //    |
    @Override                      //    |
    protected void _PrePersist() { //    |
        super._PrePersist(); // ---------+
    }
} 
```

问题：私有范围呢？

> 回调方法可以具有公共、私有、受保护或包级别的访问权限，但不能是静态或最终的。

```
@MappedSuperclass
class Parent {
    @PrePersist
    private void _PrePersist() {
        // not invoked.
        // is this method still, technically, 'overridden'?
    }
}

@Entity
class Child {
    @PrePersist
    private void _PrePersist() {
        // no way to invoke super._PrePersist().
        // is this method still, technically, 'overriding' the parent's?
    }
} 
```

在这种情况下，`Parent#_PrePersist()`不调用。这是正常的吗？

我用 EclipseLink 和 Hibernate 进行了测试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T01:54:02.800

Java 类不会自动继承注解。在这种情况下，JPA 规范声明`@PrePersist`注释*可以*由子级继承 - 这是由 JPA 提供者（而不是虚拟机）处理的实现细节。因此，在您的情况下，您实际上可以删除`@PrePersist`子类中的注释：

```
@Entity
class Child {
    @Override
    protected void _PrePersist() {
        super._PrePersist(); 
    }
} 
```

现在，无论 JPA 提供者是否允许`@PrePersist` *注释*的继承，所有 Java 语言规则都***完全适用***。在这种情况下，您不能在子类中覆盖超类的私有方法——这在 Java 规范中是不允许的，因此当然也不适用于 JPA。

实际上，这里有两套规则在起作用，JPA 规则和 Java 规范规则，并且您的代码*必须同时遵守这两个*规则。

# java - How to implement depth-first search (DFS) on a binary tree in java?

> ID：15237431
> 
> 赞同：5
> 
> 时间：2013-03-06T01:37:19.837
> 
> 标签：java, algorithm

According to what is explained in [the wikipedia article about depth-first search](http://en.wikipedia.org/wiki/Depth-first_search), I think DFS on a binary tree is identical to a preorder traversal root--left--right (am I right?).

But I just did a little search and got this code, the author of which claims that DFS needs a tree to record if the node has been visited before (or do we need this in the case of a graph?).

```
// copyright belongs to the original author 
public void dfs() {
    // DFS uses Stack data structure
    Stack stack = new Stack();
    stack.push(this.rootNode);
    rootNode.visited=true;
    printNode(rootNode);
    while(!stack.isEmpty()) {
        Node node = (Node)s.peek();
        Node child = getUnvisitedChildNode(n);
        if(child != null) {
            child.visited = true;
            printNode(child);
            s.push(child);
        }
        else {
            s.pop();
        }
    }
    // Clear visited property of nodes
    clearNodes();
} 
```

Could anybody explain this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:57:03.107

是的，这是预购。但是，我不太喜欢说它是遍历，因为您可能不会遍历树，一旦找到元素就停止。您打印的程序不是搜索，而是遍历：您正在打印所有内容。在二叉树中搜索的搜索函数是：

```
public boolean search(Tree t, int i) {
    if(t == null)
        return false;
    elif(t.value() == i)
        return true;
    else
        for(child in t.children()) {
            if(search(child,i))
                return true;
        }
        return false;
        //return search(t.leftTree(), i) or search(t.rightTree(),i) binary tree case
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-06T01:40:33.113

> I think dps on a binary tree is the same one with preorder traversal root--left--right.(am i right?)

Depth-first search can be pre-, in-, or post-order traversal. You don't need a stack: it's easier to implement it recursively, in which case you don't need to mark nodes as visited either.

# openstack - Glance 不会验证管理员用户

> ID：15237432
> 
> 赞同：1
> 
> 时间：2013-03-06T01:37:30.460
> 
> 标签：openstack

这又是 Folsom 的发行版，我会照本宣科。我已经到了尝试验证 Glance 安装的地步，但我无法通过任何命令。在**glance-api.conf**中，我有：

```
[keystone_authtoken]
auth_host = localhost
auth_port = 35357
auth_protocol = http
admin_tenant_name = service
admin_user = glance
admin_password = glance

[paste_deploy]
config_file = /etc/glance/glance-api-paste.ini
flavor=keystone 
```

在**glance-registry.conf**文件中我有非常相似的：

```
[keystone_authtoken]
auth_host = localhost
auth_port = 35357
auth_protocol = http
admin_tenant_name = service
admin_user = glance
admin_password = glance

[paste_deploy]
config_file = /etc/glance/glance-registry-paste.ini
flavor=keystone 
```

一个背景问题：**glance**应该根据上面 conf 文件中的用户名/密码进行身份验证，还是应该要求**keystone**进行身份验证？我在**keystone**数据库中确实有一个使用相同密码的“glance”用户，但我不知道它是否正在使用。

我得到的失败是这样的：

```
root@osdemo:~# glance --debug --os_user=glance --os_password=glance index
Traceback (most recent call last):
  File "/usr/bin/glance", line 1048, in <module>
    result = command(options, args)
  File "/usr/bin/glance", line 63, in wrapper
    ret = func(*args, **kwargs)
  File "/usr/bin/glance", line 559, in images_index
    print_header=True)
  File "/usr/bin/glance", line 501, in _images_index
    images = client.get_images(**parameters)
  File "/usr/lib/python2.7/dist-packages/glance/client.py", line 60, in get_images
    res = self.do_request("GET", "/images", params=params)
  File "/usr/lib/python2.7/dist-packages/glance/common/client.py", line 61, in wrapped
    return func(self, *args, **kwargs)
  File "/usr/lib/python2.7/dist-packages/glance/common/client.py", line 420, in do_request
    headers=headers)
  File "/usr/lib/python2.7/dist-packages/glance/common/client.py", line 75, in wrapped
    return func(self, method, url, body, headers)
  File "/usr/lib/python2.7/dist-packages/glance/common/client.py", line 539, in _do_request
    raise exception.NotAuthenticated(res.read())
glance.common.exception.NotAuthenticated: You are not authenticated.
Details: 401 Unauthorized

This server could not verify that you are authorized to access the document 
you requested.  Either you supplied the wrong credentials (e.g., bad password), 
or your browser does not understand how to supply the credentials required.

 Authentication required  
root@osdemo:~# 
```

我正在尝试查看配置文件，但我被卡住了。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:36:18.440

最好使用如下所示的 bash rc 文件并将其提供给您当前的 shell。

示例文件 (adminrc) 如下所示

```
#!/bin/bash
# With the addition of Keystone, to use an openstack cloud you should
# authenticate against keystone, which returns a **Token** and **Service
# Catalog**.  The catalog contains the endpoint for all services the
# user/tenant has access to - including nova, glance, keystone, swift.
#
# *NOTE*: Using the 2.0 *auth api* does not mean that compute api is 2.0\.  We
# will use the 1.1 *compute api*
export OS_AUTH_URL=http://keystone_server:5000/v2.0

# With the addition of Keystone we have standardized on the term **tenant**
# as the entity that owns the resources.
export OS_TENANT_ID=UUID_OF_THE_TENANT
export OS_TENANT_NAME=MY_TEST_TENANT

# In addition to the owning entity (tenant), openstack stores the entity
# performing the action as the **user**.
export OS_USERNAME=admin

# With Keystone you pass the keystone password.
echo "Please enter your OpenStack Password: "
read -s OS_PASSWORD_INPUT
export OS_PASSWORD=$OS_PASSWORD_INPUT 
```

然后可以通过

```
source adminrc 
```

可以从 Horizo​​n 仪表板的设置选项中为特定项目下载此文件。

# jquery - jQuery qtip() - how to get the id from mouseover, .$load()

> ID：15237435
> 
> 赞同：0
> 
> 时间：2013-03-06T01:38:07.993
> 
> 标签：jquery, qtip

I have the Jquery qtip() function and i need to get the id when mouseover a link. Can i'm using jquery .load() to get the page. Cant able to get using below code. Anyone know?

Below is my script

```
$(function () {
      $(".cabinlink").qtip({
content: $("#loadCabin").load("/mysite ." + $(this).attr('id')),

                 show: 'mouseover',
                 hide: 'mouseout',

                 style: {
                     width: 780
                 },
                 position: {
                     corner: {
                         target: 'LeftBottom',
                         tooltip: 'TopLeft'
                     }
                 }
             });
         }); 
```

.cabinlink is the mousehover link

```
<a id="1" href="javascript:void(0)" class="cabinlink" />
<a id="2" href="javascript:void(0)" class="cabinlink" />
<a id="3" href="javascript:void(0)" class="cabinlink" /> 
```

loadCabin is the div to open up the qtip box

```
<div id="loadCabin"></div> 
```

Amended codes, able to work but need to mouse over two times. first mouseover no result. Anyone know?

```
 $(function () {
         $(".cabinlink").live('mouseover', function () {

             var id = $(this).attr('id');
             var url = "/Mysite ." + id;
             $(this).qtip({
                 overwrite: false,
                 content: $("#loadCabin").load(url),
                 show: { ready: true, when: false },
                 hide: 'mouseout',
                 style: {
                     width: 780
                 },
                 position: {
                     corner: {
                         target: 'LeftBottom',
                         tooltip: 'TopLeft'
                     }
                 }

             });
         });

     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:38:54.760

尝试这个：

```
$(".cabinlink").qtip({
    onShow: function() {
        $("#loadCabin").load("/mysite." + $(this).attr('id'))
    },

     show: 'mouseover',
     hide: 'mouseout',

     style: {
         width: 780
     },
     position: {
         corner: {
             target: 'LeftBottom',
             tooltip: 'TopLeft'
         }
     }
 }); 
```

如果这不起作用，其他回调函数之一可能...请参阅[http://craigsworks.com/projects/qtip/docs/api/#callbacks](http://craigsworks.com/projects/qtip/docs/api/#callbacks)

# ruby - Ruby convention - uppercase selector?

> ID：15237439
> 
> 赞同：0
> 
> 时间：2013-03-06T01:38:45.940
> 
> 标签：ruby, naming-conventions

As far as I know, Ruby has some convention on letter capitalization. Does it have any convention about `:UPPERCASE_SELECTORS`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:09:36.657

你说的是语言还是社区？

在该语言中，没有什么可以阻止您在方法名称和/或消息选择器中使用所需的任何 Unicode 字符。可能无法通过定义它们`def`或通过调用它们`.`，但*可以*使用反射。

如果你想通过定义它们`def`或者用 调用它们`.`，那么还有很大的空间：名称需要以下划线或字母开头（Unicode 字母完全可以，即`µ`是一个完全有效的方法名称），然后是任意数量的字母、数字和下划线，可选择以问号、感叹号或等号结尾。

以大写字母开头、包含大写字母甚至完全大写都是完全有效的。

然而，它不是惯用的。反正通常不会。惯用的方法名称是`snake_case`，即以小写字母开头，由下划线分隔的小写单词组成，仅包含 ASCII 字符。

然而，也有例外。特别是，旨在作为特定类的工厂伙伴的方法可能与相应的类具有相同的名称。例如，将其参数转换为数组、哈希、字符串、浮点数或`Kernel#Array`整数`Kernel#Hash`的`Kernel#String`方法`Kernel#Float`。`Kernel#Integer`

另一个例外是旨在像参数类一样使用的`Object#DelegateClass`方法，例如`delegate`stdlib 中库中的方法，它接受一个类并返回该类的包装类，因此可以像这样使用它：

```
class MyArray < DelegateClass(Array); end 
```

# c# - Exchange Web Services FindItem (by body search criteria) not finding email with larger body

> ID：15237440
> 
> 赞同：0
> 
> 时间：2013-03-06T01:38:55.077
> 
> 标签：c#, exchangewebservices, ews-managed-api

I have a routine (pretty standard) from [http://msdn.microsoft.com/en-us/library/exchange/dd633693(v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633693(v=exchg.80).aspx) which I use to return a list of emails that contain a specific content ("homecoming") in the body of the email.

```
searchFilterCollection.Add(new SearchFilter.ContainsSubstring(ItemSchema.Body, "homecoming")); 
```

The issue is that I have an email that is about 109K in size and this email is not being returned in the results.

```
FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, searchFilter, view); 
```

I have moved the "homecoming" text to an earlier portion of the email body and it is then returned as expected. It appears to only be searching the first x bytes of the email body. Is there anyway to ensure that the entire email body is search regardless of size?

UPDATE: This may not be a size issue, just tested on a larger email and email was found. But on the offending email as soon as I make the email smaller it works, add a single extra character to make it large and it doesn't find it.

UPDATE: Here is a sample email that suffers from the problem. I am searching for FindText1 thru FindText10\. It works from FindText1 thru FindText7 but fails from FindText8 onwards. This is a plain text email.

```
FindText1
Example of a one with a DIS ref caught up in other code.

From: QQQ O'QQQQQQ [mailto:QQQ@QQQQQQQQ.QQQ.QQ] 
Sent: Wednesday, 27 March 2013 2:50 PM
To: QQQQQ QQQQQQ
Subject: Re: FW: FW: QQQQQQQQ QQQQQ QQQQQ - Website Proposal DS:02303779

Hi QQQQQ,
We don't have a logo per se....I do have a letter head type thing that is very dodgy and just throw all the individual brand logos together. I will attach here. Maybe you guys could design something similar but a bit more nicer/advanced?
In regards to the advert banners, we soon will have our april marketing offers ( all are ending 30/3 so no point at moment) and I could send them to you to play with?
I have a great wall image that I will also attach here.
Thanks,
QQQ
On 26/03/2013 2:57 PM, QQQQQ QQQQQQ wrote:
Hello QQQ
FindText2
We have the paperwork from you (via QQQQQ QQQQQ) …..Thank You.

I have scheduled in the work and will keep in touch with progress. One thing. Do you have a LOGO for the QQQQQQQQ Group? Maybe you have some artwork on how you wish this title to be used? If not we will just use a text based title.

Also, we are allowing for rotating banners on each site. Do you have an example of the advert banners that we could use in design?

Happy to discuss any issues.

Regards

QQQQQ QQQQQQ
Relationship Manager - Online Service

FindText3
M 
QQQQ QQQ QQQ
P 
QQQQ QQ QQ QQ
F 
QQQQ QQ QQ QQ

Stay Up-To-Date With Our News Blog

www.dealersolutions.com.au

-----Original Message-----
From: QQQQQ QQQQQQ 
Sent: Wednesday, 20 March 2013 2:56 PM
To: 'QQQ QQQQQQQQQ'
Cc: QQQQQ QQQQQ
Subject: RE: FW: QQQQQQQQ QQQQQ QQQQQ - Website Proposal DS:02303779

Hello QQQ
FindText4
Great News

QQQQQ QQQQQ from our Sydney office will contact you shortly to arrange the sign up and we can get going. We will commence with the Corporate Landing page and stage it from there. Is this what you have in mind? 

Thanks for your confidence in going with us and I look forward to working with you.

Best Regards
QQQQQ

-----Original Message-----
From: QQQ O'QQQQQQQ [mailto:QQQQ@QQQQQQQQ.QQQ.QQ] 
Sent: Wednesday, 20 March 2013 10:41 AM
To: QQQQQ QQQQQQ
Subject: Re: FW: QQQQQQQQ QQQQQ QQQQQ - Website Proposal DS:02303779

Hi QQQQQ,
Yes, sounds like a plan to us.
Havent had a go ahead for skoda site as yet but ready to move forward with landing page asap.
Thanks,
QQQ
FindText5 
On 8/03/2013 11:26 AM, QQQQQ QQQQQQ wrote:
> Hello QQQ
> 
> Just a follow up to see if you have had a chance to look through our proposal provided last Wednesday and to see if you have any questions.  I do hope we can assist.
> 
> I would like to arrange a telephone hook to discuss in more detail what you want with our James Bolden, the web person who will be looking after this for you. Just let us know a convenient time and I will call so we can discuss any issues.
> 
> I await your advice.
> 
> Regards
> QQQQQ
> 
> -----Original Message-----
> From: QQQQQ QQQQQQ
> Sent: Wednesday, 6 March 2013 4:06 PM
> To: 'QQQ QQQQQQQQQ'
> Subject: QQQQQQQQ QQQQQ QQQQQ - Website Proposal DS:02303779
> 
> Hello QQQ
> 
> Thank you for your patience on this.
> FindText6
> Please find attached our proposal for the new QQQQQQQQ Group website and for updating the Ford website.
> 
> We are understanding of your requirements and feel we have priced the sites to achieve what you are wanting.
> 
> I will call to discuss the elements in the proposal.
> 
> Best Regards
> QQQQQ
> 
> -----Original Message-----
> From: QQQ O'QQQQQQQ [mailto:QQQQ@QQQQQQQQ.QQQ.QQ]
> Sent: Thursday, 21 February 2013 12:59 PM
> To: QQQQQ QQQQQQ
> Subject: QQQ
> 
> Hi QQQQQ,
> I spoke briefly with the guys about the website yesterday and told them to look at mike blewitts landing page.
> They came back to me and told me to show you the apple/ipad website..
> http://www.apple.com/. They want the site to be as simple and clean as this.
FindText7
> So basically QQQQQQQQ QQQQQ QQQQQ across the top. One main image (that can change/rotate throuh specials if possible?) and then 5 boxes below that with each brands logo and name and one for QQQ used cars. Phone numbers underneath each box and thats about it. Just crisp, clean and easy. I think they want to leave out the quick search until they reach one of the other sites. I have a rough drawing I could probably fax or scan and email if this would be helpful..
> Hope this makes sense.
> Thanks,
> QQQ
> FindText8
> --
> QQQ QQQQQQQQQ
> 
> QQQQQQQQ QQQQQ QQQQQ
> QQQ QQQQ Q QQQQQQQQ QQQ
> QQQQQ QQQ QQQQ
> Ph: QQ QQQQ QQQQ
> Fax: QQ QQQQ QQQQ
> 
> 

DISREF:24333;9;0;0;1:DISREF
 FindText9
--
QQQ QQQQQQQQQ

QQQQQQQQ QQQQQ QQQQQ
QQQ QQQQ Q QQQQQQQQ QQQ
QQQQQ QQQ QQQQ
Ph: QQ QQQQ QQQQ
Fax: QQ QQQQ QQQQ

-- 
QQQ QQQQQQQQQ

QQQQQQQQ QQQQQ QQQQQ
QQQ QQQQ Q QQQQQQQQ QQQ
QQQQQ QQQ QQQQ
Ph: QQ QQQQ QQQQ
Fax: QQ QQQQ QQQQ

FindText10

<<< 
```

# javascript - Why does the duration before the callback keep increasing?

> ID：15237443
> 
> 赞同：0
> 
> 时间：2013-03-06T01:39:31.607
> 
> 标签：javascript, jquery, jquery-animate

In the process of toying with some jQuery animations, I've managed to get myself into a bit of a bind (where I can't use `.unbind()`).

I have a set of "inactive" blocks in `div#tray` that I would like to be able to swap with the "active" block in `div#main` by clicking on them. Animating the blocks out always happens immediately when I click them, but the more swaps I make, the longer it takes to get to the swap-and-animate-in function. Eventually it falls apart as steps apparently get skipped.

I don't understand why this is (some sort of timing problem?), so I've written a [jsFiddle](http://jsfiddle.net/JpUP4/) with my code, and would appreciate any insight.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:56:47.163

每次动画结束时，您都会附加点击事件。这些只是简单地堆积起来并导致减速。解决此问题的最简单方法是在重新绑定之前取消绑定所有点击。

```
function setupActiveBlockSwitcher() {
    $('.block').unbind('click');
    ... 
```

这是一个解决方案，但不是那么好，最好重新组织您的代码，这样您就不必在每次动画完成时重新绑定事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:58:41.967

我已经[更新了你的代码](http://jsfiddle.net/JpUP4/1/)。

主要问题是您反复将事件处理程序分配给块，尤其是在给定迭代中未单击的块。

使用这个更新的代码，我将一个`click`处理程序应用于容器本身，然后`event.target`用于获取实际单击的块。

我还从动画功能中删除了“重新设置”代码。

# javascript - How is Object.prototype.toString.apply(value) different from value.toString()?

> ID：15237446
> 
> 赞同：7
> 
> 时间：2013-03-06T01:39:38.867
> 
> 标签：javascript, prototype

From what I understand, the former will:

1.  Find the `toString` method on Object
2.  call it on `value` but with `this` bound to `value`

And `value.toString()` will.

1.  Find the `toString` method somewhere in `value`'s prototype chain
2.  Call `toString` on value bound with `this` as value via the function invocation pattern

So the difference is if there is an overridden `toString` method in value... it will use that.

My question is:

1.  Is that the only difference?
2.  Conversely, is this pattern the standard pattern to use if we want to be guaranteed we're calling `Parent`'s method and not potentially some overridden by `Child`? (In this case Parent = Object, Child = the class value comes from, if we're thinking classically, and method = toString.)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T01:44:47.487

`Object.prototype.toString.apple(value)`会让你调用`null`，当你使用`null.toString()`时，它会产生错误。

```
Object.prototype.toString.apply(null);
>"[object Null]"

null.toString();
>TypeError: Cannot call method 'toString' of null 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T01:49:01.767

`Object.prototype.toString`可以是一种不同的方法，而不是`value.toString()`取决于后者是什么。

```
> Object.prototype.toString.apply("asdfasdf")
"[object String]"
> "asdfasdf".toString()
"asdfasdf"
> Object.prototype.toString.apply(new Date)
"[object Date]"
> (new Date).toString()
"Tue Mar 05 2013 20:45:57 GMT-0500 (Eastern Standard Time)" 
```

`.prototype[function].apply`（或`.call`或`.bind`）允许您更改方法的上下文，即使上下文可能根本没有这样的方法。

```
var o = {};
o.prototype = {x: function () { console.log('x'); }}
var y = {}
o.prototype.x.call(y)
y.x(); //error! 
```

……也就是说

1.  这不是唯一的区别
2.  这不一定与父子关系.. 它只是允许您使用不同的对象上下文调用一个对象的方法（或任何函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T01:43:19.343

是的，你没看错。我通常不会看到人们`Object.prototype.toString`像这样直接调用（让对象覆盖他们的方法通常是有意义的`toString`），但它肯定非常常见，并且推荐用于其他一些方法，例如`Object.prototype.hasOwnProperty`.

# c++ - Surprisingly inefficent custom allocator for vector

> ID：15237449
> 
> 赞同：2
> 
> 时间：2013-03-06T01:39:44.437
> 
> 标签：c++, c++11, allocator

I want to use a vector with the custom allocator below, in which `construct()` and `destroy()` have an empty body:

```
struct MyAllocator : public std::allocator<char> {
    typedef allocator<char> Alloc;
    //void destroy(Alloc::pointer p) {} // pre-c+11
    //void construct(Alloc::pointer p, Alloc::const_reference val) {} // pre-c++11
    template< class U > void destroy(U* p) {}
    template< class U, class... Args > void construct(U* p, Args&&... args) {}
    template<typename U> struct rebind {typedef MyAllocator other;};
}; 
```

Now for the reasons I have specified in [another question](https://stackoverflow.com/questions/15219984/using-vectorchar-as-a-buffer-without-initializing-it-on-resize/15220646#15220646 "another question"), the `vector` has to be resized several times in a loop. To simplify my tests on performance, I made a very simple loop like the following:

```
std::vector<char, MyAllocator> v;
v.reserve(1000000); // or more. Make sure there is always enough allocated memory
while (true) {
   v.resize(1000000);
   // sleep for 10 ms
   v.clear(); // or v.resize(0);
}; 
```

I noticed that changing the size that way the CPU consumption increases from 30% to 80%, despite the allocator has empty `construct()` and `destroy()` member functions. I would have expected a very minimal impact or no impact at all (with optimization enabled) on performance because of that. How is that consumption increment possible? A second question is: why when reading the memory after any resize, I see that the value of each char in the resized memory is 0 (I would expect some non-zero values, since `constuct()` does nothing) ?

My environment is g++4.7.0 , -O3 level optimization enabled. PC Intel dual core, 4GB of free memory. Apparently calls to `construct` could not be optimized out at all?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:13:34.037

### 更新

^(这是一个完整的重写。原始帖子/我的答案中有一个错误，这使我对同一个分配器进行了两次基准测试。哎呀。)

好吧，我可以看到性能上的巨大差异。我已经制作了以下测试台，它采取了一些预防措施来确保关键的东西没有被完全优化。然后我验证（使用-O0 -fno-inline）分配器`construct`和`destruct`调用被调用的预期次数（是）：

```
#include <vector>
#include <cstdlib>

template<typename T>
struct MyAllocator : public std::allocator<T> {
    typedef std::allocator<T> Alloc;
    //void destroy(Alloc::pointer p) {} // pre-c+11
    //void construct(Alloc::pointer p, Alloc::const_reference val) {} // pre-c++11
    template< class U > void destroy(U* p) {}
    template< class U, class... Args > void construct(U* p, Args&&... args) {}
    template<typename U> struct rebind {typedef MyAllocator other;};
};

int main()
{
    typedef char T;
#ifdef OWN_ALLOCATOR
    std::vector<T, MyAllocator<T> > v;
#else
    std::vector<T> v;
#endif
    volatile unsigned long long x = 0;
    v.reserve(1000000); // or more. Make sure there is always enough allocated memory
    for(auto i=0ul; i< 1<<18; i++) {
        v.resize(1000000);
        x += v[rand()%v.size()];//._x;
        v.clear(); // or v.resize(0);
    };
} 
```

时间差标注：

```
g++ -g -O3 -std=c++0x -I ~/custom/boost/ test.cpp -o test 

real    0m9.300s
user    0m9.289s
sys 0m0.000s

g++ -g -O3 -std=c++0x -DOWN_ALLOCATOR -I ~/custom/boost/ test.cpp -o test 

real    0m0.004s
user    0m0.000s
sys 0m0.000s 
```

我只能假设您所看到的与标准库优化分配器操作有关`char`（它是一种 POD 类型）。

当你使用时，时间会变得更远

```
struct NonTrivial
{
    NonTrivial() { _x = 42; }
    virtual ~NonTrivial() {}
    char _x;
};

typedef NonTrivial T; 
```

在这种情况下，默认分配器需要超过 2 分钟（仍在运行）。而“虚拟” MyAllocator 花费约 0.006 秒。（**请注意**，这会调用未正确初始化的引用元素的未定义行为。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:48:59.003

（感谢下面的 GManNickG 和 Jonathan Wakely 的更正）

[在 C++11 中，通过http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3346.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3346.pdf)提出的标准后修正，`resize()`将使用自定义分配器构造添加的元素.

在早期版本中，`resize()`value 初始化添加的元素，这需要时间。

这些初始化步骤与内存分配无关，它是分配后对内存所做的事情。值初始化是不可避免的费用。

鉴于当前编译器中 C++11 标准的符合性状态，有必要查看您的标头以了解正在使用哪种方法。

值初始化有时是不必要且不方便的，但也保护了许多程序免受意外错误的影响。例如，有人可能认为他们可以调整 a的大小`std::vector<std::string>`以拥有 100 个“未初始化”字符串，然后在读取它们之前开始分配它们，但赋值运算符的先决条件是被更改的对象已经正确构造......否则它' 可能会找到一个垃圾指针并尝试`delete[]`它。只有仔细放置`new`每个元素才能安全地构建它们。API 设计偏向于健壮性。

# java - Resizing JTextField in JMenuBar

> ID：15237450
> 
> 赞同：0
> 
> 时间：2013-03-06T01:39:45.230
> 
> 标签：java, swing, jtextfield, layout-manager, preferredsize

I'm trying to add a `JTextField` as a search bar to a `JMenuBar` at the top of my `JFrame`. My problem is that the `JTextField` keeps getting resized to take up all available space in the `JMenuBar`, and I don't want it to. I've tried `setPreferredSize()` and `setMaximum Size()`, but these didnt work, presumably because the `LayoutManager` used in the `JMenuBar` doesn't respect these sizes. I also tried adding the `JTextField` to a `JPanel` with a `FlowLayout` and adding the panel to the `JMenuBar`, but I get something that looks like this: ![](../Images/ddf0ef09e2ea90041370af43e6b0db50.png)

The panel is on the right side of the `JMenuBar`, and the size seems to be correct, but I can't see anything in it other than this weird blue bar.

Here's the code that (I think) is relevant. Let me know if more is needed:

```
 JPanel searchPanel = new JPanel();
    searchPanel.setPreferredSize(new Dimension(100, 25));

    JTextField searchBar = new JTextField(50);

    String[] fields = {"title", "author", "subject", "publisher", "year", "circulating", "catalog" };

    JComboBox searchFields = new JComboBox(fields);

    JButton searchBtn = new JButton("search");

    searchPanel.add(searchBar);
    searchPanel.add(searchFields);
    searchPanel.add(searchBtn);
    searchPanel.setVisible(true);

    fileMenu.add(open);
    fileMenu.add(save);
    fileMenu.add(exit);

    libMenu.add(viewLib);
    libMenu.addSeparator();
    libMenu.add(newBook);
    libMenu.add(search);

    this.setJMenuBar(topBar);
       topBar.add(fileMenu);
    topBar.add(libMenu);
    topBar.add(Box.createHorizontalGlue());
   topBar.add(searchPanel); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T04:41:38.300

我的解决方案类似于 camickr 的，但不需要 setMaximumSize()。并不是说我反对它，但我知道 SO 的狂热者发誓“永远永远不会调用 setXxxsize() 永远！！！” 我不是他们中的一员，但他们在外面。

无论如何，我会用 GridBagLayout 制作一个 JPanel，然后将 JTextField 放入其中并填充 NONE，然后将 Box.createHorizo​​ntalGlue() 填充为 HORIZONTAL。然后，将此面板放在菜单栏中。

**编辑：**

为了完整起见，这是一个使用 JPanel 的解决方案，无需调用 setMaximumSize(...)
（从而避免永远在地狱中燃烧......根据某些人的说法）：

```
GridBagConstraints gbc = new GridBagConstraints();
JPanel gbPanel = new JPanel(new GridBagLayout());
gbc.gridx = 0;
gbc.fill = GridBagConstraints.HORIZONTAL;
gbc.weightx = 1;
gbPanel.add(Box.createHorizontalGlue(), gbc);
gbc.gridx = 1;
gbc.fill = GridBagConstraints.NONE;
gbc.weightx = 0;
gbPanel.add(new JTextField(10), gbc);
menuBar.add(gbPanel); 
```

一些评论：
1）伙计，我忘记了 GBL 是多么冗长。通常我使用一个帮助类来大大减少代码，但我不想为这样一个小例子发布它。

2）如果采用面板路线，camickr 的使用 BorderLayout 的建议（见下面的评论）不仅有效，而且是更简单的代码。

3）此外，正如 camickr 指出的那样，使用面板会影响“胶水”区域的外观。它被绘制成 JPanel 而不是 JMenuBar。老实说，在他提到它之前，我什至没有在我的机器上注意到它（使用 Metal L&F），但它是不同的，可能是一个不受欢迎的副作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T02:04:56.360

这对我有用。

```
menuBar.add(Box.createHorizontalGlue());
JTextField textField = new JTextField(10);
textField.setMaximumSize( textField.getPreferredSize() );
menuBar.add(textField); 
```

如果您需要更多帮助，请发布 SSCCE。

编辑：

同样，发布代码只是为了表明问题在于包含文本字段的最大大小。您如何选择执行此操作取决于您。

# php - How would I sort a multidimensional array to make a "tree" in PHP

> ID：15237456
> 
> 赞同：0
> 
> 时间：2013-03-06T01:40:25.983
> 
> 标签：php, arrays, 2d, multidimensional-array

How would I sort or iterate a multi-dimensional array so that it forms a tree like structure (all children after each parent) such as:

```
Parent #1
Child #1
Child #2

Parent #2
Child #1

Parent #3
Child #1
Child #2 
```

This is an example Array. It is important to note that the array is initially unsorted (items and their children do not appear in any specific order).

```
Array (
[0] => Array
    (
        [id] => 1 
        [content] => Parent #1 
    )
[1] => Array
    (
        [id] => 2
        [content] => Parent #2
    )
[2] => Array
    (
        [id] => 3
        [content] => Parent #3
    )
[3] => Array
    (
        [parent] => 1
        [content] => Child #1
    )
[4] => Array
    (
        [parent] => 1
        [content] => Child #2
    )
[5] => Array
    (
        [parent] => 3
        [content] => Child #2
    )
[6] => Array (
        [parent] => 3
        [content] => Child #1
    )
[7] => Array (
        [parent] => 2
        [content] => Child #1
    )
) 
```

I apologize if I am completely wrong or asking something that is impossible. I have tried using usort but I have been unable to figure out the proper logic.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:19:57.077

```
<?php
$array = array(
           array(
             'id' => 1,
             'num' => 6,
             'color' => 'green'
),

           array(
             'id' => 4,
             'num' => 5,
             'color' => 'red'
)
           );
$nk = new_sort($array,'color','asc');
print_r($nk);

$nk = new_sort($array,'num','desc');
print_r($nk);
function new_sort($array_data, $key, $orderby = 'asc')
{
  $na = $rv = array();

  foreach ($array_data as $k => $n) {
    $na[$k] = $n[$key];
  }
  $orderby == 'asc' ? asort($na) : arsort($na);
  foreach ($na as $nk => $nv) {
    $rv[] =  $array_data[$nk];
  }

  return $rv;
} 
```

# java - how can I set the username and password of a https web service within java cxf generated client?

> ID：15237460
> 
> 赞同：1
> 
> 时间：2013-03-06T01:39:41.843
> 
> 标签：java, web-services, security, https, client

I have created client code of an https web service using soapUI and apache-cxf-2.7.2\. There is a class named MYService_BasicEndpoint_Client.java which contains this method:

```
public static void main(String args[]) throws java.lang.Exception {
URL wsdlURL = MYServiceWcf.WSDL_LOCATION;
if (args.length > 0 && args[0] != null && !"".equals(args[0])) { 
    File wsdlFile = new File(args[0]);
    try {
        if (wsdlFile.exists()) {
            wsdlURL = wsdlFile.toURI().toURL();
        } else {
            wsdlURL = new URL(args[0]);
        }
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
}    MYServiceWcf ss = new MYServiceWcf(wsdlURL, SERVICE_NAME);
IMYService port = ss.getBasicEndpoint();
port.webserviceMethod();
} 
```

But when I run it the result is http response 401 (Unauthorized) because there isn't any option to set username and password of https web service. But I can run test case of this service within soapUI because there is an option to set username and password for endpoint. how can I set them within the code above which created by soapUI and apache-cxf-2.7.2?

# javascript - 具有不同对象的java-script命令运算符

> ID：15237463
> 
> 赞同：1
> 
> 时间：2013-03-06T01:41:03.000
> 
> 标签：javascript

我正在浏览一个使用这种语法的 javascript 插件库。以下语句在 JavaScript 中的语法含义是什么

```
simpleCart = function (options) {
    },$engine,cartColumnViews; 
```

后来代码在很多地方都使用了 simpleCart。语句末尾的 simpleCart 指的是什么。

EDIT1： [http](http://simplecartjs.org/assets/js/simpleCart-latest.php) ://simplecartjs.org/assets/js/simpleCart-latest.php 搜索“主要 simpleCart 对象”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T01:47:57.417

我的精神力量告诉我，`var`在此之前（或在此之前的其他值列表之前）。

```
var a,b=2,c; 
```

将定义 a、b 和 c，并将 b 设置为 2。因此，您找到的代码是将 simpleCart 设置为一个函数，并定义 $engine 和 cartColumnViews 以供将来使用（有关超出范围的真正深入的 JavaScript 详细信息，请参阅注释这个问题！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:44:34.830

这是非常奇怪的代码，但是函数和`$engine`不做任何事情，所以结果基本上与`simpleCart = cartColumnViews`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T01:52:12.780

我假设它是变量声明。simpleCart 是分配给它的函数的变量。

更好的参考： [var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

# git - Git 或编辑器的奇怪行为：结帐时添加了符号？

> ID：15237465
> 
> 赞同：1
> 
> 时间：2013-03-06T01:41:06.110
> 
> 标签：git

我在一个分支v上，然后我切换到master分支，然后又切换回分支v。再次编译时，编译失败，因为我的代码中出现了一个奇怪的符号：

![在此处输入图像描述](../Images/3f8ae7fa9d91c0b65d42c93acfa20b9d.png)

我正在使用 OS X Lion 和最新版本的 textWrangler，我很确定我不是偶然添加的。这是 Git 或 textWrangler 的错吗？

**更新**

合并后 git 添加了一些东西：

![在此处输入图像描述](../Images/f88ae689f5d8f5614ece2f7bddf19390.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T01:45:33.253

我不认为这是 Git 的错。你可以通过点击`option`和一个字母来获得这样的字符：

```
option+s = ß
option+b = ∫
option+c = ç
option+z = Ω
option+d = ∂
option+q = œ 
```

等等。这可能只是一个意外（我每周都会击中其中一个组合）。

**更新**：

您在第二个示例中看到的是一个**冲突标记**，Git 绝对把它放在那里。这意味着，当您将一个分支合并到您当前的分支中时（可能是从 github 拉取的），Git 无法弄清楚该去哪里。因此，与其尝试猜测哪个分支具有正确的版本，不如让该部分处于冲突状态，指示您的本地更改以及从合并中引入的更改。当两个人在两个不同的分支上修改相同的内容时，通常会发生这种情况。

借用[这个 SO answer](https://stackoverflow.com/a/7901901/620197)，假设您有`file.txt`，并且在合并后您有一个部分，例如：

```
<<<<<<< HEAD:file.txt
Hello world
=======
Goodbye
>>>>>>> 77976da35a11db4580b80ae27e8d65caf5208086:file.txt 
```

`<<<<<<< HEAD`和之间包含的所有内容`=======`都是您输入的内容（此部分通常标记为`local`）

`=======`和之间的所有`>>>>>>> 77976da35a11db4580b80ae27e8d65caf5208086:file.txt`内容都是传入提交中相同位置的内容（通常标记为`remote`）。

当您在合并后看到此内容时，您必须通过删除标记（ 和 ）手动修复文件`<<<<<<< HEAD:file.txt`并`=======`决定`>>>>>>> 77976da`要保留哪个版本；在这种情况下`Hello World`, `GoodBye`，或者您可能想同时保留两者。关键是，在两个不同的分支中编辑了相同的内容，Git 无法弄清楚如何处理这些行。

Git 是一个了不起的版本控制系统，但与所有工具一样，它所能完成的工作也有其局限性。

关于一些奇怪的小事的快速说明；当我在 Xcode 中工作时，我可以去终端，运行所有我想要的 git 命令，然后马上回到 XCode 中工作。使用**Sublime Text 2**，我已经退出 Sublime Text，运行 git 命令，然后重新打开 Sublime Text，否则更改不会像我预期的那样持续存在。我不确定**Text Wrangler**，你会弄清楚那部分（或者也许有人可以发表评论）。

一些关于 Git 的链接：

*   [Git 教程](http://www.vogella.com/articles/Git/article.html)
*   [处理合并冲突](http://blog.wuwon.id.au/2010/09/painless-merge-conflict-resolution-in.html)

# jquery - 序列滑块在第二张幻灯片后停止

> ID：15237469
> 
> 赞同：2
> 
> 时间：2013-03-06T01:41:22.390
> 
> 标签：jquery, css

我有用于自动播放的序列滑块设置，它只会滑到第二张幻灯片然后停止。它应该滑过七张幻灯片。

这是我设置的选项的代码，但我不明白为什么它在幻灯片 2 之后停止。也许 CSS 转换有问题？我难住了！

```
$(document).ready(function(){
var options = {
    autoPlay: true,
    autoPlayDelay: 1000,
    nextButton: true,
    prevButton: true,
    preloader: true
};
var sequence = $("#sequence").sequence(options).data("sequence");

sequence.afterLoaded = function(){
    $(".prev, .next").fadeIn(500);
}
}); 
```

该网站在这里 - [http://aald.captechnix.com/](http://aald.captechnix.com/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T00:33:43.263

今天早些时候遇到了同样的问题，并快速查看了源代码。看起来 sequence.js 只是查看每一帧的直接子帧，以确定动画何时结束，然后再移动到下一帧。查看您的示例，您似乎在每张幻灯片的任何直接子项上都没有任何转换，因此在内部，sequence.js 从不将这些元素的“animationEnded”属性设置为 true，并且拒绝移动到下一张幻灯片。

确保每张幻灯片的所有直接子级都至少有一个 .animate-in 过渡，并且该元素的值实际上已过渡。因此，在您的情况下，请尝试添加以下 css（我省略了供应商前缀）：

```
#sequence .width {
 transition: all 1s linear;
 z-index: 9999;
}
#sequence .animate-in .width {
 z-index: 9998; /* or some other property as long as it changes */
}

#sequence-theme img {
 transition: all 0.1s linear;
 opacity: 0;
}
#sequence-theme .animate-in img {
 opacity: 1; /* or some other property as long as it changes */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-31T09:09:55.050

这里的替代解决方案是如果我们添加以下函数：

```
setInterval(function () {document.getElementById("your-button-id").click();}, 5000); 
```

这样，我们每 n 次模拟按钮单击。如果你想隐藏按钮，你可以添加隐藏到箭头容器的可见性：

```
.banner-arrow-container {
    visibility: hidden;
} 
```

# android - 如何使gridview中的imageview链接到活动

> ID：15237475
> 
> 赞同：0
> 
> 时间：2013-03-06T01:42:34.840
> 
> 标签：android, gridview, imageview, android-activity

我有一个包含一些图像视图的网格视图，我想从这个网格视图的图像视图中获得 onclick 来更改活动，我该怎么做，我尝试了这段代码，但它不起作用。在主活动中初始化一个网格查看并向其添加imageview，然后我尝试创建onclick，但它不起作用

```
gridview.findViewById(R.id.image).setOnClickListener(new View.OnClickListener() {
      public void onClick(View view) {
          Intent myIntent = new Intent(view.getContext(), DetailsActivity.class);
          startActivity(myIntent);
      }

  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:56:40.443

尝试这样的事情：

```
gridView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        Intent myIntent = new Intent(view.getContext(), DetailsActivity.class);
        startActivity(myIntent);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:39:32.917

您需要将点击作为 GridView 的一项来处理，即

```
 gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        //do whatever you want here...  
        }
    }); 
```

# python - 在环绕矩阵中查找相邻单元格

> ID：15237481
> 
> 赞同：4
> 
> 时间：2013-03-06T01:43:01.283
> 
> 标签：python, matrix

假设您有一个 NxM 维矩阵。例如，一个 4x4 矩阵：

```
0  1  2  3
4  5  6  7
8  9  10 11
12 13 14 15 
```

每个单元有八个相邻的单元。例如，单元格 5 的相邻单元格为：0,1,2,4,6,8,9,10。

```
0 1 2
4 5 6
8 9 10 
```

但是相邻的单元格也可以通过环绕矩阵找到，所以单元格7的相邻单元格是2,3,0,5,4,10,11,8

```
2  3 | 0
6  7 | 4
10 11| 8 
```

您可以类似地环绕顶部和底部。

如果您随机选择一个点 (p)，是否有一种简单的方法可以找到所有八个相邻单元格的值？到目前为止，我想出了这个列表，其中 m 是矩阵的宽度（在我们的例子中是 4）。

```
adjacentcells = [p+1, p-1, p+m, p-m, p+m-1, p+m+1, p-m-1, p-m+1]
for value in adjacentcells:
    if value < 0:
        value = value + len(matrix)
    if value >= len(matrix)
        value = value % len(matrix)
    adjacentlist.append(value) 
```

但是，当您选择角落中的一个单元格时，这将返回 7 个正确的相邻值和一个错误的单元格。谁能指出我哪里出错了？

*出于复杂（愚蠢）的原因，我将矩阵存储为字符串，这就是为什么我可以执行 len(matrix) 并获得 16。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:37:48.690

您需要在两个轴上独立使用模运算，而不仅仅是在计算索引上。

尝试使用这个辅助函数：

```
def addr(x,y,m,n):
  """
  Given an MxN matrix stored in a 1-d sequence,
  return the index of (possibly wrapped) X,Y
  """
  return (y%n)*m+(x%m) 
```

现在您可以计算相邻的单元格：

```
def getAdjacentCells(x,y):
  adjacentlist = []
  for dx in (-1, 0, +1):
    for dy in (-1, 0, +1):
      if(dx != 0 or dy != 0):
        adjacentlist.append(addr(x+dx, y+dy, 4, 4))
  return adjacentlist 
```

而且，您可以证明它有效：

```
# 5
assert sorted(getAdjacentCells(1,1)) == [0,1,2,4,6,8,9,10]
# 7
assert sorted(getAdjacentCells(3,1)) == [0, 2, 3, 4, 6, 8, 10, 11]
# 15
assert sorted(getAdjacentCells(3,3)) == [0, 2, 3, 8, 10, 11, 12, 14] 
```

# php - 用于构建自定义搜索引擎的 API，可在我的站点中搜索并显示结果

> ID：15237484
> 
> 赞同：-1
> 
> 时间：2013-03-06T01:43:43.657
> 
> 标签：php, api, search, full-text-search, search-engine

我正在寻找一个搜索引擎 API，最好是 PHP，我可以使用它来构建一个只搜索我的网站的自定义搜索引擎。

我可以使用 CSS 设置其结果的样式，因此我认为这需要结果页面位于我的站点/服务器上。

我宁愿不使用 Bing 的 API。

但是，如果您有任何 API 或解决方案来实现我想要实现的目标，我将真诚地感谢并随时分享它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:04:32.870

使用[Elastic Search](http://www.elasticsearch.org/)，设置和使用起来非常容易，因为它只是 REST。也已经有一个做得很好的 php 库，[Elastica](https://github.com/ruflin/Elastica)。

您必须根据需要构建自己的索引。但我可以告诉你，它*非常*有效，我们在一天内就实现了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:00:05.057

谷歌搜索`PHP search engine`将有一些您可以尝试的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:06:43.377

看看谷歌搜索 api [https://developers.google.com/web-search/docs/](https://developers.google.com/web-search/docs/)

# shell - 使用 shell 检查与 Oracle 的连接数

> ID：15237485
> 
> 赞同：0
> 
> 时间：2013-03-06T01:43:44.213
> 
> 标签：shell, oracle11g

我在 Centos 5.5 上运行 Oracle 11g。

我想知道使用 shell 脚本与 Orcl DB 有多少连接。在 shell 脚本中：我想我会创建许多到 DB 的“连接”并且我会计算它们。

示例脚本：

```
#!/bin/bash
count=0
c=1
while [ $c -le 100 ]
do
sqlplus / as sysdba << EOF
exit;
EOF
        (( c++ ))
        ((count++))
done
echo "**************************************"
echo $count 
```

你能分享一些想法或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:23:28.010

现在，我尝试在 linux 中使用 fork() 进行测试，以乘以 p

# drupal-7 - Drupal 7 视图模板覆盖输出原始值

> ID：15237488
> 
> 赞同：0
> 
> 时间：2013-03-06T01:44:04.363
> 
> 标签：drupal-7, drupal-views, drupal-templates

我有一个包含 2 个字段的视图：

`[field_services_color]`&`[field_services_cover]`

这些输出很好，但我需要用模板覆盖来覆盖输出。

我有这个覆盖：`views-view-fields--services.tpl.php`

其中有这个代码：

```
<?php foreach ($fields as $id => $field): ?>
  <?php if (!empty($field->separator)): ?>
    <?php print $field->separator; ?>
  <?php endif; ?>
  <?php print $field->wrapper_prefix; ?>
    <?php print $field->label_html; ?>
    <?php print $field->content; ?>
  <?php print $field->wrapper_suffix; ?>
<?php endforeach; ?> 
```

哪个输出：

```
<div>
   <div>COLOR</div>
</div>
<div>
   <div>COVER</div>
</div> 
```

但我需要这样做：

```
<div>
   <div style="background-color:COLOR;">COVER</div>
</div> 
```

我已经在 Google 上寻找了几个小时的解决方案，但找不到任何解决方案。这可以做到吗？

我确实尝试在具有重写输出的视图中执行此操作，这似乎是最简单的方法，但由于某种原因，drupal 剥离了样式属性。

对此的任何帮助将不胜感激。

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:14:46.287

您将需要研究主题函数，例如 template_preprocess。

以下答案应该有助于
[我如何为自己的模板使用主题预处理器功能？](https://stackoverflow.com/questions/2383865/how-do-i-use-theme-preprocessor-functions-for-my-own-templates)

# messaging - Akka Actor 可以将其传出消息存储在持久邮箱中吗？

> ID：15237489
> 
> 赞同：6
> 
> 时间：2013-03-06T01:44:04.647
> 
> 标签：messaging, distributed, akka

[Akka](http://akka.io/) Actor 是否可以将其传出消息存储在本地[持久发件箱](http://doc.akka.io/docs/akka/snapshot/java/durable-mailbox.html)中，直到其远程接收者 Actor 准备好在其自己的持久收件箱中接收它们？换句话说，我可以使用 Akka 执行类似于电子邮件的[存储转发式消息传递吗？](http://en.wikipedia.org/wiki/Store_and_forward)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T11:22:20.987

您可以使用[Eventsourced的](https://github.com/eligosource/eventsourced)[可靠渠道](https://github.com/eligosource/eventsourced#reliablechannel)来做到这一点。Eventsourced 是 Akka 的事件溯源库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T08:14:00.563

我赞同 Martin 的回答：Akka 演员旨在形成可以构建更复杂事物的基本构建块，而 Martin 的库就是一个很好的例子。在“基础”中提供越来越多的功能是我们几年前尝试并恢复的，而是保持精简和专注。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T13:36:53.867

您可以通过添加某种消息持久性来采用 Akka 可靠代理模式 ( [http://doc.akka.io/docs/akka/snapshot/contrib/reliable-proxy.html )。](http://doc.akka.io/docs/akka/snapshot/contrib/reliable-proxy.html)

此外，您可以创建自己的持久邮箱，它可以通过添加消息状态、时间戳和目标参与者类型将消息持久化到数据库（它也可以解决可调整大小路由器的路由的持久邮箱问题）。您也可以将此存储用于您的可靠代理（也使用时间戳和目标参与者类型）。在这种情况下，您可以通过相同类型的活动参与者从死集群节点恢复超时消息。

我们在项目中使用了这种机制，我们的 Durable Mailboxes 也支持确认模式，我们可以恢复处理期间超时的消息（如果在处理消息期间有一个 actor 死亡）。只是不要忘记 maxFailures （在确认模式的情况下）并且不要保留 PoisonPill / Kill 消息。

# xcode - 视图仅在 iPad 和 iPhone 6.1 模拟器中出现在屏幕上

> ID：15237495
> 
> 赞同：0
> 
> 时间：2013-03-06T01:45:01.403
> 
> 标签：xcode

我有大约 20 个应用程序，屏幕上有一张图片，屏幕顶部有一个麦克风和扬声器，这样人们就可以录制他们的声音并回放。所有这些都可以在设备和模拟器上正常工作。

我正在完成一个使用文本而不是图片的新应用程序，并且我在屏幕上放置了一个启用滚动的 UIWebView 或一个 UIScrollView。当我在 6.1 的模拟器中运行它时，两个屏幕都在屏幕上显示麦克风和扬声器的 UIButtons。其他版本的模拟器或运行 iOS 5.1.1 或 iOS 6.1.2 的设备上都不会出现录制按钮。

我上周刚刚更新了所有的应用程序，它们在模拟器和设备上运行良好，而且我没有收到用户关于缺少录制按钮的反馈。对于这个应用程序，我能想到的唯一区别是它使用了 ScrollView。如果我查看屏幕上应该有哪些视图（ NSLog(@"%@", self.view.subviews); ）麦克风和扬声器已放置在那里，它们只是不可见。它们是隐藏按钮顶部的不透明按钮。此应用程序中不使用 10000 的值。

```
 "<UIWebView: 0x28dd40; frame = (30 100; 964 624); autoresize = W+H; layer = <CALayer: 0x28ddd0>>",
"<UIButton: 0x25fac0; frame = (0 137; 90 90); hidden = YES; opaque = NO; layer = <CALayer: 0x25fb50>>",
"<UIButton: 0x283210; frame = (0 137; 90 90); opaque = NO; layer = <CALayer: 0x2832a0>>",
"<UIButton: 0x284390; frame = (13.5 317; 90 90); hidden = YES; opaque = NO; layer = <CALayer: 0x284420>>",
"<UIButton: 0x2855d0; frame = (13.5 317; 90 90); opaque = NO; layer = <CALayer: 0x285660>>",
"<UIButton: 0x286660; frame = (13.5 317; 90 90); opaque = NO; layer = <CALayer: 0x2866f0>>",
"<UIButton: 0x287940; frame = (10000 3; 90 90); hidden = YES; opaque = NO; layer = <CALayer: 0x2879d0>>",
"<UIButton: 0x288b60; frame = (10000 3; 90 90); opaque = NO; layer = <CALayer: 0x288bf0>>",
"<UIButton: 0x289cd0; frame = (10000 3; 90 90); hidden = YES; opaque = NO; layer = <CALayer: 0x289d60>>",
"<UIButton: 0x28b010; frame = (10000 3; 90 90); opaque = NO; layer = <CALayer: 0x28b0a0>>",
"<UILabel: 0x28c2f0; frame = (411 5; 202 16); text = ' '; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x28c390>>" 
```

当我将 WebView 和 ScrollView 放在我使用的屏幕上时

```
[self.parentView insertSubview:self.webView atIndex:0]; and 
[self.parentView insertSubview:self.quizView atIndex:0]; 
```

所以他们应该在背景的第一层。即便如此，他们的界限也不会触及录制按钮。滚动是否会做一些我不知道的事情，或者还有其他地方我应该看看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:37:37.660

事实证明，按钮中使用的图像不包含在目标中。

出于某种原因，这并没有在运行 6.1 的模拟器中引起问题，但在其他模拟器中却出现了问题。由于未知原因，在设备或其他模拟器版本上运行时找不到图像时未生成错误。

# java - KeyListener 不工作？

> ID：15237501
> 
> 赞同：0
> 
> 时间：2013-03-06T01:45:28.167
> 
> 标签：java, swing

我正在尝试制作 Snake 游戏。但我无法移动一个矩形框（即蛇）。很抱歉提出这样的问题！但我是java初学者，我不知道我的代码中的问题出在哪里。

```
 class Snakexx extends JPanel implements ActionListener , KeyListener{
public static int a,b,x,y;
public int fooda,foodb;
Random rnd ;
Timer t = new Timer(1,this);
public void keyPressed(KeyEvent e){
         if(e.getKeyCode()==e.VK_UP)
        {
        x=0;
        y=-1;
        }
        if(e.getKeyCode()==e.VK_LEFT)
        {
        x=-1;
        y=0;            
        }
        if(e.getKeyCode()==e.VK_DOWN)
        {
        x=0;
        y=1;
        }
        if(e.getKeyCode()==e.VK_RIGHT)
         {
            x=1;
            y=0;
            }
        }
public void keyTyped(KeyEvent e){}
public void keyReleased(KeyEvent f){}

protected Snakexx(){
rnd = new Random();
fooda=rnd.nextInt(1300);
foodb=rnd.nextInt(300);
a=20;
b=20;
t.start();
addKeyListener(this);
setFocusable(true);

} 

protected void paintComponent(Graphics g) {

super.paintComponent(g);
g.fillRect(a,b,10,10) ;
g.fillRect(fooda,foodb,10,10) ;
}
public void actionPerformed(ActionEvent e){
a+=x;
b+=y;
Graphics gr;
gr= new Snakexx().getGraphics();
gr.fillRect(a,b,10,10) ;

}
}

 public class Snake2{

 public static void main(String args[]) 
{
Snakexx abcd = new Snakexx();
JFrame jfrm = new JFrame("Snake Game");
jfrm.setSize(1300, 650);
jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
jfrm.setVisible(true);

jfrm.add(abcd);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:58:44.557

看起来有`NullPointerException`在计时器动作中。`new Snakexx().getGraphics();`是获取`Graphics`实例的不正确方法。当您实际上在计时器的每个滴答声上分配面板的新实例时，问题就更大了。

不要`getGraphics()`用于您的绘画，因为它是临时缓冲区，会在下次重新绘画时回收。如果需要的`paintComponent()`话，你会画画吗？`repaint()`

立即修复将添加`repaint()`并注释掉绘画代码，即：

```
public void actionPerformed(ActionEvent e) {
    a += x;
    b += y;
    // Graphics gr;
    // gr= new Snakexx().getGraphics();
    // gr.fillRect(a,b,10,10) ;

    repaint();
} 
```

有关详细信息，请参阅[在 AWT 和 Swing中](http://www.oracle.com/technetwork/java/painting-140037.html)[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和绘画。

此外，按键侦听器是键盘输入的低级接口。确保面板可聚焦并具有焦点。聚焦可能非常棘手。使用键绑定要好得多，有关更多详细信息，请参阅[如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

# sql - 如何使用 Oracle CTE 进行此类查询？

> ID：15237505
> 
> 赞同：0
> 
> 时间：2013-03-06T01:45:47.487
> 
> 标签：sql, oracle11g, common-table-expression

我有一个如下所示的查询：

```
SELECT m.Name, (m.Value + NVL(a1.Value1, 0) + NVL(a2.Value2,0) + NVL(a3.Value3,0) "Value"
FROM m MainTable
LEFT JOIN Additional1 a1 ON (...)
LEFT JOIN Additional2 a2 ON (...)
LEFT JOIN Additional3 a3 ON (...)
WHERE (conditions on m)
ORDER BY 1; 
```

这些查询为每个生成**多**行`Name`。

我需要使用以下逻辑将每个行限制为一行**：**`Name`包括 Value 最接近给定 Name 的平均值的行。

有些东西告诉我，**CTE**应该允许更紧凑的代码并希望实现更有效的实现，因此我不需要多次重复几乎相同的查询。

你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:58:48.740

CTE 可以提供帮助，但我认为关键是分析功能。首先，您可以使用分析函数计算每个名称的平均值。然后您可以对差异的绝对值进行排名。

这是带有 CTE 的版本：

```
with t as (
    SELECT m.Name,
           (m.Value + NVL(a1.Value1, 0) + NVL(a2.Value2,0) + NVL(a3.Value3,0) "Value"
    FROM m MainTable
         LEFT JOIN Additional1 a1 ON (...)
         LEFT JOIN Additional2 a2 ON (...)
         LEFT JOIN Additional3 a3 ON (...)
   WHERE (conditions on m)
)
select t.*
from (select t.*,
             row_number() over (partition by name order by avgdiff) as seqnum
      from (select t.*,
                   abs(value - avg(value) over (partition by name)) as AvgDiff
            from t
           ) t
     ) t
where seqnum = 1 
```

# ios - 如何在 iOS 上使用 Instruments 验证表格视图中标签的名称？

> ID：15237506
> 
> 赞同：6
> 
> 时间：2013-03-06T01:45:47.030
> 
> 标签：ios, instruments, ui-automation, ios-ui-automation

我正在使用 Xcode“Instruments”工具为 iOS 应用程序构建自动化，我需要验证我在应用程序中创建的条目的标签是否正确。

出于某种原因，下面列出的代码不会导致可靠的通过或失败。相反，当它运行时，我在日志中收到“问题”警告，并且测试在没有明确关闭的情况下退出。

我想更改我的测试，以便检查我知道正在创建的标签名称，因为我可以在自动化运行后使用 AccessibilityViewer 看到它。

如果标签是正确的，那么我想将测试记录为通过。

我曾经`UIATarget.localTarget().logElementTree()`映射我的元素树，并在我的条目创建后使用 AccessibilityInspector 来验证我的标签的名称。麻烦的是，我似乎无法获得验证此正确性的语法。

我的辅助功能检查员已验证标签名称为：MyDogs！它具有静态文本的特征，并给出 {{114, 0},{166,480}} 的框架

通过查看元素树——我希望我可以粘贴到这里，看起来标签会沿着这条路径找到：

```
\Target
-+
--\Application
---+
----\Window
-----+
------\TableView
-------+
--------\TableCell: name:MyDogs! rect:{0, 40},{480,166}}
---------|UIAStaticText: name:MyDogs! value:MyDogs! rect:{{0, 40},{480, 166}}
---------|UIAButton: name:story list share rect:{{439, 41},{33, 28}} 
```

谁能告诉我如何验证这个标签？

我当前的代码看起来像这样（但没有检查标签——因为我不知道如何）：

```
var testName = "LoginCreateEntry";

//Start test logging
UIALogger.logStart(testName);

//This is supposed to target the entry that my automation has created.
//The flow goes, run the automation that creates the entry, then verify that the entry
//got created as expected and is visible to the user in the iPhone interface.

    var myEntry = target.frontMostApp().mainWindow().scrollViews().staticTexts()["My Dogs!"].value(); 

    var entryName = "My Dogs!";

//Do a bunch of UI automation here to create my entry, which results in the entry
//appearing in the mainWindow with the label: My Dogs!

//If myEntry evaluates to true, then call this test a pass.

if (myEntry === entryName) {    
UIALogger.logMessage("My entry was created!");

    //Mark the test as a PASS
    UIALogger.logPass(testName);
}
else {

    UIALogger.logMessage("My entry was not created!");

    //Mark the test as a FAIL
    UIALogger.logFail(testName); 
    }

//End test 
```

任何反馈或帮助将不胜感激！！

- - - - - - - - - - - - - - - - -更新 - - - - - - - - ----------------------
谢谢大家的帮助！我实际上得到了标题的值，并将在下面显示我的解决方案。但无论我做什么，我都无法让通过/失败日志记录功能正常工作——[其他人也遇到过](https://stackoverflow.com/questions/14865999/instruments-automation-tool-script-ended-without-explicitly-closing-this-test/15259630#15259630)这个问题。我一直在愤怒

`Issue: Script ended without explicting closing this test`

我的测试结束时的消息。我越来越相信这是 Instruments 的错误。

这是我更新的测试：

```
var target = UIATarget.localTarget();
var app = UIATarget.localTarget().frontMostApp();

var testName = "LoginCreateEntry";

//Start test logging
UIALogger.logStart( testName );

//Do lots of gui automation stuff here to create the entry which will appear in my app interface.
//I want to verify that the title I gave the entry matches what appears in the app interface

var window = app.mainWindow();
var tableView = window.tableViews()[0];
var tableGroup = tableView.groups()[0];
var entryName = "My Dogs!";

var myEntry = tableView.cells()[0].name(); //<-- This is what I needed!!!

UIALogger.logMessage("My Story Title: " + myEntry); //Print out entry name in log

if (myEntry === entryName) {    

    UIALogger.logMessage("My entry was created!");

    //Mark the test as a PASS
    UIALogger.logPass (testName);

} else {

    UIALogger.logMessage("My entry was not created!");

    //Mark the test as a FAIL
    UIALogger.loFails (testName); 

    }
//End test 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T06:41:00.663

我建议使用[tuneup_js](https://github.com/alexvollmer/tuneup_js)。使用该库，您可以轻松创建测试用例并检查标签是否存在并且等于`My Dogs`

你可以像这样使用它

```
test("LoginCreateEntry", function(target,app){
    //Create Entry
    //....
    var myEntry = target.frontMostApp().mainWindow().scrollViews().staticTexts()["My Dogs!"].name();

    //Check is Label is equal to My Dogs
    //Test "LoginCreateEntry" will fail if myEntry is not equal to My Dogs
    assertEquals(myEntry, "My Dogs");
}); 
```

PS你应该使用`.name()`而不是`.value()`获取标签的名称

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T06:55:28.453

至少在 2012 年夏天和 iOS 5 中，我发现我无法通过accessibilityLabel 访问UIA 元素，除非还设置了accessibilityIdentifier。

不幸的是，截至当时（以及从 Xcode 4.2 开始），accessibilityIdentifier 只能在代码中设置，而不能在 Interface Builder 中设置。不知道从那以后情况是否有所改善。有关更多信息，请参阅此 SO 问题：

[我可以在界面生成器中设置可访问性标识符吗？Xcode4.2](https://stackoverflow.com/questions/7901100/can-i-set-accessibility-identifier-in-interface-builder-xcode4-2)

但正如我所提到的，如果您可以访问应用程序的源代码，则可以通过自动化标识符获得 UIA 访问权限。（或者可以影响有权访问的人，我想！）

我在 github 上有一个项目，它展示了如何在 UILabel 上（在应用程序源中）设置accessibilityIdentifier，然后编写一个 UIA 测试，以您的代码似乎试图做的方式成功访问该元素。

首先是我的测试文件，我尝试在其中找到显示字符串“！”的 UILabel：

[https://github.com/billagee/UnicodeTapper-iphone4.2/blob/master/UnicodeTapperTests/tests.js](https://github.com/billagee/UnicodeTapper-iphone4.2/blob/master/UnicodeTapperTests/tests.js)

```
 // for iOS 5 - note 4 must be handled differently
    var charDisplayed = window.staticTexts()["bigCharLabel"].value();
    if (charDisplayed == "!") {
        UIALogger.logPass("Exclamation point displayed at startup");
    } else {
        UIALogger.logFail("Incorrect character displayed: " + charDisplayed);
    } 
```

然后，在目标应用程序的源代码中，设置 UILabel 的可访问性属性如下所示：

```
// If device supports it, set accessibility identifiers for the UILabels
// in order to find them in UIAutomation easily.  Note that the
// accessibilityIdentifier can't be set in IB yet, as of Xcode 4.3.3;
// also, it's only supported in iOS 5 and up.
topBarLabel.isAccessibilityElement = YES;
bigCharLabel.isAccessibilityElement = YES;
if ([topBarLabel respondsToSelector:@selector(accessibilityIdentifier)]) {
    topBarLabel.accessibilityIdentifier = @"topBarLabel";
    bigCharLabel.accessibilityIdentifier = @"bigCharLabel";
} else {
    topBarLabel.accessibilityLabel = @"topBarLabel";
    bigCharLabel.accessibilityLabel = @"bigCharLabel";        
} 
```

完整来源在这里：

[https://github.com/billagee/UnicodeTapper-iphone4.2/blob/master/UnicodeTapper/UnicodeTapperViewController.m](https://github.com/billagee/UnicodeTapper-iphone4.2/blob/master/UnicodeTapper/UnicodeTapperViewController.m)

# python - Python中预定义金额的多个循环

> ID：15237513
> 
> 赞同：0
> 
> 时间：2013-03-06T01:46:45.927
> 
> 标签：python, multithreading, loops, multiprocessing

基本上我不知道我需要做什么来完成这个..

我有两个循环，每个循环将循环不同的持续时间：

```
import time

while True:
    print "Hello Matt"
    time.sleep(5) 
```

然后是另一个循环：

```
import time

while True:
    print "Hello world"
    time.sleep(1) 
```

我需要将两个循环都合并到一个程序中，并且两者都需要同时运行并独立处理数据，并且它们之间不需要共享数据。我想我正在寻找线程或多处理，但我不确定如何为这样的事情实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:52:57.310

使用[`Thread`](http://docs.python.org/2/library/threading.html#thread-objects)足以满足您的目的：

```
import time
from threading import Thread

def foo():
    while True:
        print "Hello Matt"
        time.sleep(5)

def bar():
    while True:
        print "Hello world"
        time.sleep(1)

a = Thread(target=foo)
b = Thread(target=bar)
a.start()
b.start() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:57:29.847

为此，您可以使用模块线程，如下所示：

```
import threading
import time

def f(n, str):     # define a function with the arguments n and str
    while True:
        print str
        time.sleep(n)

t1=threading.Thread(target=f, args=(1, "Hello world"))    # create the 1st thread
t1.start()                                                # start it

t2=threading.Thread(target=f, args=(5, "Hello Matt"))     # create the 2nd thread
t2.start()                                                # start it 
```

参考。
[http://docs.python.org/2/library/threading.html](http://docs.python.org/2/library/threading.html)

# django - slugfield 与正则表达式 - 我应该在模型中添加一个 slug 吗？

> ID：15237514
> 
> 赞同：0
> 
> 时间：2013-03-06T01:46:54.497
> 
> 标签：django, url, slug

我的模型中目前没有 slugfield。到目前为止，当我在 url 中使用表值时`/movie/Gone With The Wind`，我只是使用正则表达式来获取我想要的 url 中的值。

```
(r'^movie/(?P<movie_nm>[\w|\W]+)/$', movie_page), 
```

到目前为止，这对我来说效果很好。

是否建议返回并添加一个 slugfield？我不想经历麻烦，因为我看不到当前方法的缺点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:04:01.570

这取决于你的数据是什么样的，以及你希望你的 URL 有多漂亮。如果您的电影名称包含字符集以外的字符`\w`（包括大多数标点符号），则您的 URL 模式将中断。

另外，请记住，您的标题需要进行 URL 转义——如果您关心美观，`/movie/Gone-With-The-Wind`它看起来比`/movie/Gone%20With%20The%20Wind`.

# java - 当 try/catch 内部发生初始化时，Eclipse 给出未初始化的编译时错误

> ID：15237516
> 
> 赞同：0
> 
> 时间：2013-03-06T01:47:18.547
> 
> 标签：java, initialization, try-catch, ioexception

我遇到了一个代码块的问题，它告诉我一个变量没有初始化，即使我在 try/catch 块中初始化了它。

我的代码是：

```
public String doSomething(String input1, String input2) {
    CustomizedObject myobject = new CustomizedObject();
    try {
        Output out = (Output) myobject.getOutput();
    } catch (IOException e) {
        System.err.println("Error: " + e.getMessage());
    }
    return out.doSomethingString(input1, input2);
} 
```

但是，据说我需要创建一个局部变量“out”。

我的 CustomizedObject 的代码如下：

```
public class CustomizedObject {

   private String attribute;

   public CustomizedObject() {
        attribute = "awesome";
   }

   public String getOutput() throws IOException {
       //.....code doing some stuff......
       return attribute;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:49:27.490

您无法初始化`Output out`try/catch 块内部。尝试以下操作：

```
public String doSomething(String input1, String input2) {
    CustomizedObject myobject = new CustomizedObject();
    Output out = null;
    try {
        out = (Output) myobject.getOutput();
    } catch (IOException e) {
        System.err.println("Error: " + e.getMessage());
    }
    return out.doSomethingString(input1, input2);
} 
```

`NullPointerException`请注意，如果抛出，上述代码将抛出 a `IOException`；所以你可能不想`out.doSomething`if `out == null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:50:40.377

如果您的代码在 处抛出异常`Output out = (Output) myobject.getOutput();`，它将无法执行 return 语句。您应该将现有的移动`return`到 try 内部，如果 try 返回一个捕获，则有一个单独的返回。

```
public String doSomething(String input1, String input2) {
    CustomizedObject myobject = new CustomizedObject();
    try {
        Output out = (Output) myobject.getOutput();
        return out.doSomethingString(input1, input2);
    } catch (IOException e) {
        System.err.println("Error: " + e.getMessage());
        return "Something went wrong";
    }
} 
```

# jquery-datatables - 需要帮助在我的网站中集成 DataTables

> ID：15237517
> 
> 赞同：1
> 
> 时间：2013-03-06T01:47:48.117
> 
> 标签：jquery-datatables

好吧，我已经从 DataTables.net 下载了必要的文件，但我正在努力将它实际放入我的网站。我究竟如何引用它？他们的网站说

```
$(document).ready(function(){
    $('#example').dataTable();
}); 
```

负责初始化，但显然需要引用代码（例如我如何引用 javascript）：

```
<script type="text/javascript" src="view/javascript/application.js" ></script> 
```

有人可以给我一些指示吗？我知道这是一个简单的问题，但我有点迷茫，浏览他们的网站并没有给我太多帮助，因为它似乎主要集中在实际使用该软件包上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:35:42.060

这是我将[jQuery](http://code.jquery.com/jquery-1.9.1.min.js) dataTables 绑定到 Web 项目中的方法：

1）首先需要引用jQuery，因为DataTables是一个jQuery插件。没有 jQuery DataTables 将无法工作。

```
<!--jQuery -->
<script src="Project/Scripts/jQuery.min.js" type="text/javascript" ></script> 
```

2）您引用 DataTables 插件：

```
 <!--Data Tables -->
    <script src="Project/Scripts/DataTables/jQuery_DataTables.min.js" type="text/javascript" ></script> 
```

3) 决定以何种方式使用 DataTables。[您有 4 个选项](http://datatables.net/usage/)：DOM、JavaScript 数组、JSON 对象、服务器端处理。如果您只想测试您的 DataTables 是否正常工作，DOM 是最简单的：

```
<script type="text/javascript">
    $(document).ready(function(){ $('#table_id').dataTable(); });
</script>
<table id="table_id">
<thead>
    <tr>
        <th>Column 1</th>
        <th>Column 2</th>
        <th>etc</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>Row 1 Data 1</td>
        <td>Row 1 Data 2</td>
        <td>etc</td>
    </tr>
    <tr>
        <td>Row 2 Data 1</td>
        <td>Row 2 Data 2</td>
        <td>etc</td>
    </tr>
</tbody> 
```

注意事项：

1.  确保您的 FilePaths 和 FileNames 是正确的。
2.  确保您的[jQuery对于您的](http://code.jquery.com/jquery-1.9.1.min.js)[DataTables](http://datatables.net/download/)版本来说足够新
3.  将 DataTables 与服务器端处理一起使用比其他 3 个选项要困难一些。

# matlab - 我应该使用 MATLAB Function 模块还是普通的 Simulink 模块？

> ID：15237524
> 
> 赞同：4
> 
> 时间：2013-03-06T01:48:04.403
> 
> 标签：matlab, simulink, xpc-target

[我读过](http://www.mathworks.com/company/newsletters/articles/improving-simulation-performance-in-simulink.html)在 Simulink 模型中使用 Matlab 函数会严重影响其性能。建议使用[MATLAB Function](http://www.mathworks.com/help/simulink/slref/matlabfunction.html)模块而不是 Interpreted MATLAB Function 模块。

在将模型编译为 C 以在 xPC 目标机器上使用时，我不清楚这是如何应用的。我是否会因为 M 脚本而受到某种惩罚，还是最好使用普通的 Simulink 模块来解决相同的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T16:34:02.887

不应该因为使用 MATLAB Function 模块而受到任何惩罚。编译模型时，MATLAB Function 模块会将其 MATLAB 代码编译成 C 语言，就像其他 Simulink 模块一样。

我会根据对问题建模的最佳方法进行选择。例如，如果您的算法需要太多控制流语句或循环，则在 MATLAB Function 模块中对其进行编码会更容易。你总是可以混合使用两者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T17:51:53.263

您提供的链接并没有真正说明或暗示“在 Simulink 模型中使用 Matlab 函数会严重影响其性能”。在某些情况下可以，但在许多情况下，它与内置块一样快。

Interpreted MATLAB Function 模块在每次需要评估时（即在每个时间步）回调到 MATLAB。这使得它变慢（相对于其他技术）并且还阻止它用于任何 c 代码生成目的（即 xPC 使用的 Simulink Coder）。

使用定义为 coder.extrinsic 的函数的 MATLAB Function 模块中的 m 代码受到与上述相同的限制并且可能很慢。

嵌入式 NATLAB 子集中的 MATLAB Function 模块中的 m 代码（即简单的数学和矩阵操作）被转换为 C 代码并编译（当使用仿真和用于 c 代码生成时）。在仿真和代码生成中，您应该会看到与使用标准模块类似的性能。

菲尔。

# controls - 连接文本和数字代替控件名称

> ID：15237526
> 
> 赞同：0
> 
> 时间：2013-03-06T01:48:43.967
> 
> 标签：controls, concatenation, picturebox

我从长时间的中断中回来编程。我知道我以前做过，但目前无法弄清楚。

我有一系列枚举的图片框（pic1、pic2、pic3 等......）。我想根据随机数使它们可见。我需要执行以下操作：

(pic[random]).Visible = true; 其中随机数成为枚举。

我没有在网上找到任何与我遇到的问题非常相似的东西，我非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:24:08.357

解决此问题的一种方法是使用`Dictionary`对象。

您可以将字典构建为

```
Dictionary<int,PictureObject> picDictionary = new Dictionary<int,PictureObject>();
picDictionary.Add(1,pic1);
picDictionary.Add(2,pic2);
...etc. 
```

然后将图片设置为可见。

```
int randomNumber = MyRandomNumberGenerator();
picDictionary[randomNumber].Visible = true; 
```

# c++ - 如何缩短我的输出？目前正在获取“信息”

> ID：15237527
> 
> 赞同：0
> 
> 时间：2013-03-06T01:48:44.113
> 
> 标签：c++, math, derivative

我正在编写一个程序来计算“泰勒级数”，并且得到“inf”作为我的输出。我的程序还没有完成，一切都还没有正常工作，但我希望能够看到我的输出。有没有办法缩短输出或使其可见？谢谢您的帮助。

```
#include <iostream>
#include <math.h>
using namespace std;

long double taylorSeries(long double input, int degree);
long int factorial(int input);
long double derivative(long double input);

int main(int argc, const char * argv[])
{

    long double taylorInput = cos(0);    

    cout << taylorSeries(taylorInput, 3) << endl;

    return 0;
}

// taylor series function
long double taylorSeries(long double input, int degree){

    long double i = 0;
    long double accumulation = 0;

    while (i < degree) {
        derivative(input);
        accumulation += (pow(input, i))/factorial(i); 
        i++;
    }

    return accumulation;
}

// function to calculate factorial
long int factorial(int input){

    long int factorial = 0;

    if (input == 1) {
        factorial = 0;
    }

    while (input > 0) {
        if (factorial == 0) {
            factorial = input * (input - 1);
            input -= 2;
        }

        else if (input > 0) {
            factorial *= input;
            input--;
        }

    }
    return factorial;
}

long double derivative(long double input){
     long double derivativeResult = 0;

    derivativeResult = (((input + .001) - (input)) / .001);

    return derivativeResult;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:58:20.563

In `accumulation += (pow(input, i))/factorial(i);` you are dividing by 0.

On the factorial function you are missing the case for 0, factorial of 0 is 1.

EDIT: Factorial of 1 is also not 0, you should take a look at that factorial function first before going forward.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T02:05:59.817

你的阶乘函数有点古怪。尝试这个：

```
long factorial( long input ) {
    long output = 1;
    for( long i = 2; i <= input; ++ i ) {
        output *= i;
    }
    return output;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T01:59:29.797

双精度值`inf`是一个特殊值，用于避免在执行后续数学运算时丢失有关溢出的中间计算的信息。一旦产生了一系列操作`inf`，它将“粘住”，而不是产生一个错误值的有效数字。

一种常见的获取方法`inf`是在不是浮点异常的环境中除以零。由于最初`x = 1.0 / 0.0 ... (any operations here)`的. 您必须找到问题计算并消除它，然后才能看到其余的结果。`inf``inf`

# android - 显示键入的文本

> ID：15237529
> 
> 赞同：0
> 
> 时间：2013-03-06T01:48:53.897
> 
> 标签：android, android-layout, android-edittext

我正在尝试在 Android 应用程序中显示文本，但我对 Android 开发完全陌生。我非常了解 Java，但是，如果它是一个短信应用程序，我将如何在应用程序中间显示文本？我在底部有一个带有`Send`按钮的文本字段，但是在他们单击之后`Send`，我希望能够显示他们在中间输入的内容。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">
    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" 
        android:layout_gravity="bottom" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="sendMessage"
        android:text="@string/button_send" 
        android:layout_gravity="bottom"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:54:49.550

添加一个新的TextView，XML如下：

```
<TextView
    android:id="@+id/new_text_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="I am some new text!" /> 
```

这只会创建一个新的 TextView 元素，您需要向 XML 添加新参数以指定其在屏幕上的位置，这一切都取决于您使用的布局类型。

如果您要将此元素添加到您的`Button`

```
android:id="@+id/button" 
```

您可以使用以下代码在按下按钮时编辑 Activity 中的文本：

```
Button button = (Button)findViewById(R.id.button);
button.setOnClickListener(newView.OnClickListener(){
    public void onClick(){
        TextView newTextView = (TextView)findViewById(R.id.new_text_view);
        EditText editMessage = (EditText)findViewById(R.id.edit_message);
        newTextView.setText(editMessage.getText().toString());
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:56:35.013

将您的 xml 编辑为此：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<TextView ndroid:id="@+id/text_message"
    android:layout_weight="1"
    android:layout_width="match_parent"
     android:layout_height="wrap_content" />
<EditText android:id="@+id/edit_message"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" 
   android:layout_gravity="bottom" 
   />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="sendMessage"
    android:text="@string/button_send" 
    android:layout_gravity="bottom"/>
</LinearLayout> 
```

并在代码中编写以下内容：

```
 button.setOnClickListener(new View.OnClickListener() 
 {
    public void onClick(View v) 
    {
            edit_message= (TextView) findViewById(R.id.edit_message);
            String text = edit_message.getText().toString();
            text_message= (TextView) findViewById(R.id.text_message);
            text_message.setText(text );
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:06:45.483

这是您想要的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="400dp"
        android:text="TextView" />
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">

        <EditText
            android:id="@+id/edit_message"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:hint="@string/edit_message" >

            <requestFocus />
        </EditText>

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button_send" />
    </LinearLayout>
</LinearLayout> 
```

您不一定需要在 xml 中设置 onClick 事件。使用其他答案作为如何添加 onClickListener 的示例

# jquery - 在恒星视差中向“固定”img 添加一个类

> ID：15237534
> 
> 赞同：2
> 
> 时间：2013-03-06T01:49:10.510
> 
> 标签：jquery, parallax, jquery-waypoints

我正在为网站使用恒星视差

演示：*[http ://webdesigntutsplus.s3.amazonaws.com/tuts/338_parallax/src/index.html](http://webdesigntutsplus.s3.amazonaws.com/tuts/338_parallax/src/index.html)*

我使用的文件来自 webtuts： *[http ://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)*

我想要实现的是将一个类添加到中心的“固定”img 并根据活动的数据幻灯片更改它。

当我单击菜单的按钮时，我能够更改图像类，但是当我使用滚动条导航时，图像的类不会改变。

所以我尝试添加这个脚本：

```
$(document).ready(function() {     
  if ($('#quatre').hasClass('active')){     
    $('#circle').addClass('trans4');    
  }     
  else(){    
    $('#circle').removeClass('trans4');;     
  }});
}); 
```

`#second`和幻灯片的 id一样`#img-center`，也是页面中心图像的 id，但它不起作用

我也试过这段代码：

```
if(dataslide == 4){
    $('#circle').addClass('trans4');    
} 
```

但这也不起作用

我完全是 javascript 的新手，我找不到这样做的方法。

这是 HTML

```
<ul class="navigation">
    <li id="un" data-slide="1"></li>
    <li id="deux" data-slide="2"></li>
    <li id="trois" data-slide="3"></li>
    <li id="quatre" data-slide="4"></li>
</ul>

<div id="circle"></div>

<div class="slide" id="slide1" data-slide="1" data-stellar-background-ratio="0.5">
    <!-- start content -->
    <div class="content clearfix">
        <div class="name">
            <h1>NOM</h1>
        </div>

        <div class="txt">
            <h2>some text</h2>
        </div>
    </div><!-- end content -->

    <a class="button" data-slide="2" title=""></a>
</div>

<div class="slide" id="slide2" data-slide="2" data-stellar-background-ratio="0.5">
    <div class="content">
        <div class="txt">
            <h3>some text</h3>
        </div>
    </div>

    <a class="button" data-slide="3" title=""></a>
</div><!--End Slide 2-->

<div class="slide" id="slide3" data-slide="3" data-stellar-background-ratio="0.5">
    <div class="content">
        <div class="txt">
            <h3>some text</h3>
        </div>
    </div>
<a class="button" data-slide="4" title=""></a>
</div><!--End Slide 3-->

<div class="slide" id="slide4" data-slide="4" data-stellar-background-ratio="0">
    <ul>
        <li class="rond" data-stellar-ratio="1.5" data-stellar-vertical-offset="-55"alt=""></li>
        <li class="rond" data-stellar-ratio="1.25" data-stellar-vertical-offset="-53"alt=""></li>
        <li class="rond" data-stellar-ratio="2.7" data-stellar-vertical-offset="-150"alt=""></li>
        <li class="rond" data-stellar-ratio="3" data-stellar-vertical-offset="-100"alt=""></li>
        <li class="rond" data-stellar-ratio="1" data-stellar-vertical-offset="-75"alt=""></li>
        <li class="rond" data-stellar-ratio="2.2" data-stellar-vertical-offset="-55"alt=""></li>
        <li class="rond" data-stellar-ratio="1.5" data-stellar-vertical-offset="-53"alt=""></li>
        <li class="rond" data-stellar-ratio="2" data-stellar-vertical-offset="-15"alt=""></li>
        <li class="rond" data-stellar-ratio="1.3" data-stellar-vertical-offset="-150"alt=""></li>
        <li class="rond" data-stellar-ratio="1" data-stellar-vertical-offset="-200"alt=""></li>
        <li class="rond" data-stellar-ratio="1" data-stellar-vertical-offset="-55"alt=""></li>
        <li class="rond" data-stellar-ratio="1.5" data-stellar-vertical-offset="-53"alt=""></li>
        <li class="rond" data-stellar-ratio="2.7" data-stellar-vertical-offset="-200"alt=""></li>
        <li class="rond" data-stellar-ratio="3" data-stellar-vertical-offset="-200"alt=""></li>
        <li class="rond" data-stellar-ratio="1" data-stellar-vertical-offset="-200"alt=""></li>
    </ul>
    <div class="content">
        <div class="txt">
            <h3>some text</h3>
        </div>
    </div>
</div><!--End Slide 4--> 
```

这是js

```
jQuery(document).ready(function ($) {

    //initialise Stellar.js
    $(window).stellar();

    //Cache some variables
    var links = $('.navigation').find('li');
    slide = $('.slide');
    button = $('.button');
    mywindow = $(window);
    htmlbody = $('html,body');

    //Setup waypoints plugin
    slide.waypoint(function (event, direction) {

        //cache the variable of the data-slide attribute associated with each slide
        dataslide = $(this).attr('data-slide');

        //If the user scrolls up change the navigation link that has the same data-slide attribute as the slide to active and 
        //remove the active class from the previous navigation link 
        if (direction === 'down') {
            $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').prev().removeClass('active');
        }
        // else If the user scrolls down change the navigation link that has the same data-slide attribute as the slide to active and 
        //remove the active class from the next navigation link 
        else {
            $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').next().removeClass('active');
        }

    });

    //waypoints doesnt detect the first slide when user scrolls back up to the top so we add this little bit of code, that removes the class 
    //from navigation link slide 2 and adds it to navigation link slide 1\. 
    mywindow.scroll(function () {
        if (mywindow.scrollTop() == 0) {
            $('.navigation li[data-slide="1"]').addClass('active');
            $('.navigation li[data-slide="2"]').removeClass('active');
        }
    });

    //Create a function that will be passed a slide number and then will scroll to that slide using jquerys animate. The Jquery
    //easing plugin is also used, so we passed in the easing method of 'easeInOutQuint' which is available throught the plugin.
    function goToByScroll(dataslide) {
        htmlbody.animate({
            scrollTop: $('.slide[data-slide="' + dataslide + '"]').offset().top
        }, 2000, 'easeInOutQuint');
    }

    //When the user clicks on the navigation links, get the data-slide attribute value of the link and pass that variable to the goToByScroll function
    links.click(function (e) {
        e.preventDefault();
        dataslide = $(this).attr('data-slide');
        goToByScroll(dataslide);
    });

    //When the user clicks on the button, get the get the data-slide attribute value of the button and pass that variable to the goToByScroll function
    button.click(function (e) {
        e.preventDefault();
        dataslide = $(this).attr('data-slide');
        goToByScroll(dataslide);

    });

    if(dataslide == 4){
        $('#circle').addClass('trans4');    
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:20:38.123

当页面加载时，这只触发一次：

```
$(document).ready(function() {     
if ($('#quatre').hasClass('active')){     
$('#circle').addClass('trans4');    
}     
else(){    
$('#circle').removeClass('trans4');;     
}}); 
```

每次窗口滚动时都会触发，我相信这就是您想要的：

```
$(window).scroll(function() {     
if ($('#quatre').hasClass('active')){     
$('#circle').addClass('trans4');    
}     
else(){    
$('#circle').removeClass('trans4');;     
}}); 
```

# javascript - 咖啡脚本中的 for 循环

> ID：15237535
> 
> 赞同：0
> 
> 时间：2013-03-06T01:49:18.410
> 
> 标签：javascript, json, coffeescript

我现在正在尝试使用 CoffeeScript，方法是转换我构建的用于查询 Instagram 的普通 JavaScript 提要解析器。我一直在努力让逻辑在 for 循环中工作，我可以让一个简单的 for 循环按照网络上的 100 个示例工作，但我还没有得到一个for 循环中的更多代码。我接近这个完全错误吗？我传递给函数的参数“结果”是一个 JSON 对象。

```
_feed: (results) ->
    images = results.length
    for img in images
      a = document.createElement('a');
      a.href = results.data[i].images.standard_resolution.url;
      img = document.createElement("img");
      img.src = results.data[i].images.low_resolution.url;
      a.appendChild(img);
      document.getElementsByTagName('body')[0].appendChild(a); 
```

我不断收到错误说意外的突出。有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:53:57.803

我会尝试这样的事情：

```
_feed: (results) ->
    for result in results.data
        a = document.createElement 'a'
        a.href = result.images.standard_resolution.url

        img = document.createElement 'img'
        img.src = result.images.low_resolution.url

        a.appendChild img
        document.body.appendChild a 
```

主要区别在于`for`循环遍历`results.data`. 您仍然`results.data[i]`在循环中，如果您逐项迭代，这并不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T01:53:43.573

确保您使用的编辑器使用软制表符（空格）而不是硬制表符；并检查所有行是否按预期缩进：前两行两个空格，其他行四个空格；等等。否则，你肯定会得到那些混合制表符和空格的错误。

**我还看到代码末尾有一个随机反引号；是在实际代码中还是您只是在此处复制它？**

另外，开始忽略分号；你不需要它们:)

# c - C - 计算数组中数字的频率

> ID：15237536
> 
> 赞同：-1
> 
> 时间：2013-03-06T01:49:20.313
> 
> 标签：c

我正在尝试计算数组中值的频率。我认为我目前的条目是正确的，但它似乎误算了“计数”。我想就如何正确显示数组的频率提出第二意见！这是我所拥有的：

```
#include <stdio.h>

/************************************************************************/
/*                      Function: frequency                            */
/*                                                                     */
/*  Purpose:    Obtains the frequency of a number in an array          */
/*                                                                     */
/*                                                                     */ 
/*                                                                     */
/*  Parameters: theArray-The array in question                         */
/*              n- the size of the array                               */
/*              x- the number to search for frequency within the array */
/*                                                                     */
/*  Returns:    The frequency of a given number in an array              */
/*                                                                     */
/************************************************************************/

int frequency (int theArray [ ], int n, int x)
{
    int count = 0;
    int i;

    for (i = 0; i < n; ++i)
    {
        if ( theArray[i]=x)
        {
            count = count + 1 ;
        }      
        else
        {
            count = count ;
        } 
    }

      printf ("\nThe frequency of %i in your array is %i ",x,count);
  }

  int main ()
  {
      int i;    
      int theArray[] = {};
      int n;
      int x;

      printf ("Enter The Amount Of Numbers In Your Array: ");
      scanf("%i", &n);/*Stores Amound Of Numbers In The Array*/

      for (i = 0; i < n; ++i)
      {
          printf("\nEnter number for array: ");     
          scanf ("%i", &theArray[i]);
      }

      printf ("\nOK, Thanks! Now What Number Do You Want To Search For Frequency In Your Array? ");
      scanf("%i", &x);/*Stores Number To Search For Frequency*/

      frequency(theArray,n,x);

      return(0);  /* success */

  } /* main */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T01:52:09.533

`if ( theArray[i]=x)`应该是`==`。

而且整体`else {count = count;}`是多余的。

而且你实际上并没有返回计数（或其他任何东西） - 即使签名说你这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T01:52:27.043

你有一个错字：

```
if ( theArray[i] = x ) 
```

应该：

```
if ( theArray[i] == x ) 
```

前者将设置`theArray[i]`为`x`if 语句并将始终返回 true，而您想要做的是第二个，它是逻辑等效检查。

在旁注中，您的`else`陈述也是多余的，您不需要该`else { count=count; }`部分。此外，您的函数没有返回值，因此最好将返回值从 更改`int`为`void`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T01:58:38.430

3 件事

1.  `if ( theArray[i]=x) ` `=`应该 是`==`

2.  整个 else`{count = count;}`是多余的。

3.  该功能应该是`void`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T01:55:51.307

创建数组后，您无法将元素添加到数组中。int theArray[] = {}; ...是一个空数组。

你必须：

1.  询问数组的大小
2.  动态创建数组（使用 malloc()）
3.  添加数字
4.  将数组作为指针传递给频率（）
5.  退出前删除数组（使用free()）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-02T08:49:57.377

```
#include<stdio.h>
#include<conio.h>
#define MAX 10
int flag=0;
void display(int no,int cnt,int visi[]);

void main()
{
  int arr[]={1,1,1,2,3,4,2,2,3,1};
  int visited[MAX];
  int i,j,no,cnt=1;
  clrscr();
  for(i=0;i<10;i++)
  {
    no=arr[i];
    cnt=1;
    for(j=i+1;j<10;j++)
    {
      if(no==arr[j])
        cnt++;
    }
    display(no,cnt,visited);
  }
}

void display(int no,int cnt,int visited[])
{
  int static i;
  int j;

  if(flag==1)
    for(j=0;j<=i;j++)
    {
      if(visited[j]==no)
        return;
    }
  i++;
  flag=1;
  printf("\n%d=%d",no,cnt);
  visited[i]=no;
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-03-05T06:52:04.030

```
#include<stdio.h>

int main(){
    int n, t, i, j, arr[30],len, halflen,flag=0,count=0;

    printf("Enter number of elements to insert in an array:");
    scanf("%d",&len);
    printf("Enter elements to insert in an array:");
    for(i=0;i<len;i++){
        scanf("%d",&t);
        arr[i]=t;
    }
    printf("\n");

    /*****************************/
    for(i=0;i<len;i++){
        count=1;
        for(j=i+1;j<=len-1;j++){
            if(arr[i]==arr[j] && arr[i]!='\0'){
                count++;
                arr[j]='\0';
            }
        }
        if(arr[i]!='\0'){
            printf("%d is %d times.\n",arr[i],count);
        }
    }

    /*****************************/
    getch();
    return 0;
} 
```

# pug - 用制表符和换行符标记一块预先格式化的文本

> ID：15237543
> 
> 赞同：0
> 
> 时间：2013-03-06T01:50:38.300
> 
> 标签：pug

我想把这段代码放到 Jade 中（缩进是一个制表符）：

```
function isSafe(number) {
    return /^\d+(\.\d+)?(e\d+)?$/i.test(number);
}

typeof number === 'string' && isSafe(number) && typeof eval(number) !== 'number' 
```

当我这样做时，空白行消失：

```
pre
    code
        | function isSafe(number) {
        |    return /^\d+(\.\d+)?(e\d+)?$/i.test(number);
        | }

        | typeof number === 'string' &amp;&amp; isSafe(number) &amp;&amp; typeof eval(number) !== 'number' 
```

当我这样做时，管道出现：

```
pre
    code
        | function isSafe(number) {
        |    return /^\d+(\.\d+)?(e\d+)?$/i.test(number);
        | }
        |
        | typeof number === 'string' &amp;&amp; isSafe(number) &amp;&amp; typeof eval(number) !== 'number' 
```

当我这样做时，选项卡变成了一个空格：

```
pre
    code.
        function isSafe(number) {
            return /^\d+(\.\d+)?(e\d+)?$/i.test(number);
        }

        typeof number === 'string' &amp;&amp; isSafe(number) &amp;&amp; typeof eval(number) !== 'number' 
```

标记它的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:52:20.650

原来管道后面需要一个空格：

```
pre
    code
        | function isSafe(number) {
        |    return /^\d+(\.\d+)?(e\d+)?$/i.test(number);
        | }
        |·← here
        | typeof number === 'string' &amp;&amp; isSafe(number) &amp;&amp; typeof eval(number) !== 'number' 
```

# jquery - 缺少 Jquery api 文档用法

> ID：15237552
> 
> 赞同：1
> 
> 时间：2013-03-06T01:52:02.567
> 
> 标签：jquery, jquery-ui

总而言之，我在 Jquery api 文档中看到了很多代码示例，如下所示。 `$(someselector).somemethod({somehandle:function( event, ui ) {}});` 例如：您可以[在这里查看](http://api.jqueryui.com/selectable/#event-selected)。但我就是不明白如何使用`event`和的`ui`参数`function`，以及如何获取事件目标对象。我们可以用`this`它来指代吗？jquery doc 中没有关于此的更多详细信息。希望有人能告诉我更多关于它的信息。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T01:59:30.890

`event`和变量是回调函数的`ui`参数。只需在参数列表中指定它们，您就可以访问该函数。

```
$( ".selector" ).selectable({
  selected: function( event, ui ) {
    event.foo();
    ui.bar();
  }
}); 
```

如果您想知道如何使用此信息，您可以在浏览器的 javascript 调试器中放置一个断点并检查该对象，或者我最近最喜欢的方法是使用`console.log(event);`然后在 Chrome 中运行它，您将获得该对象及其在控制台中可用的成员.

![Chrome 控制台日志](../Images/ad7e64e4c897365d899d806e3da25db4.png)

[参见 jsFiddle](http://jsfiddle.net/TvKZe/)

**HTML**

```
<div class="selector">
    <span>1</span>
    <span>2</span>
    <span>3</span>
    <span>4</span>
    <span>5</span>
</div> 
```

**JS**

```
$(".selector").selectable({
    selected: function (event, ui) {
        console.log(event);
        console.log(ui);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:01:01.953

`event.target`您可以通过查看[http://api.jquery.com/category/events/event-object](http://api.jquery.com/category/events/event-object)获得目标。该`ui`参数包含当前选择的元素，如 api 参考中所述。

# objective-c - 无法识别的选择器发送到实例...使用 segues 将字符串传递给另一个视图控制器

> ID：15237554
> 
> 赞同：0
> 
> 时间：2013-03-06T01:52:10.450
> 
> 标签：objective-c, exception, selector

我正在尝试将链接传递给自定义控制器（GMWebView，UIViewController 的子类，其中包含 UIWebView）并且我收到此错误：

2013-03-05 20:34:37.930 viei_A6[3233:c07] -[UIViewController setLink:]: 无法识别的选择器发送到实例 0x71b91d0 2013-03-05 20:34:37.931 viei_A6[3233:c07] ***由于应用程序终止未捕获的异常“NSInvalidArgumentException”，原因：“-[UIViewController setLink:]：无法识别的选择器发送到实例 0x71b91d0”

我的程序使用 segue 移动到 GMWebView，我正在设置 UIWebView 对象的链接。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([[segue identifier] isEqualToString:@"pushGMWeb"]) {
        //NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        //NSDate *object = _objects[indexPath.row];
        //[[segue destinationViewController] setDetailItem:object];
        GMWebView *detailViewController = [segue destinationViewController];
        NSLog(@"HERE is the link: __ %@",[[channel.items objectAtIndex:[self.tableView indexPathForSelectedRow].row] link]);
        //it crashes when the following line is executed
        detailViewController.link = [[channel.items objectAtIndex:[self.tableView indexPathForSelectedRow].row] link];
    }
} 
```

这是setLink：

```
- (void)setLink:(NSString *)newLink
{
    NSLog(@"testing for crash");
    if (link != newLink) {
        link = newLink;
        // Update the view.
        [self configureView];
    } 
} 
```

任何帮助都会很好，这是目前唯一让我无法完成我的应用程序的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:56:17.593

在情节提要上检查此视图控制器的类。看起来实际的课程是`UIViewController`. 你想把它改成`GMWebView`

# maven-2 - 在 pom.xml 之外指定分发部分

> ID：15237555
> 
> 赞同：0
> 
> 时间：2013-03-06T01:52:11.270
> 
> 标签：maven-2, artifactory

有没有办法可以在给定项目的 pom 之外指定分发管理部分，但仍然只在该项目的范围内？

我有一个从 github 分叉的项目，我想将该项目的 SNAPSHOT 构建发布到我在 ext-snapshot-local repo 中的内部 Artifactory 中。理想情况下，我想指向`mvn deploy`我的本地存储库，而无需更改 pom 并且不必处理对 pom 的不断合并更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:07:12.907

我决定使用[Artifactory Jenkins 插件](https://wiki.jenkins-ci.org/display/JENKINS/Artifactory+Plugin)来完成这项任务。我希望能够在本地完成，但拥有 CI 服务器更有意义。[这个堆栈溢出问题](https://stackoverflow.com/questions/14887536/re-deployment-of-builds-from-artifactory-generic)给了我这个想法。

# backbone.js - Backbone Fetch 触发成功但返回零长度

> ID：15237558
> 
> 赞同：0
> 
> 时间：2013-03-06T01:52:14.790
> 
> 标签：backbone.js, fetch

我是 Backbone 的新手。如果之前已经回答过，请原谅我。我尝试谷歌搜索，但无法找到解决方案。

```
window.InfoCollection = Backbone.Collection.extend({
    model:InfoModel,
    url:"../api/info",
      parse: function (response) {
        console.log("In Parse" + response.length)
        return response;
    }
}); 
```

在这里，这将正确返回长度为 1

但是，它在这里显示为 0。

```
 this.InfoCollection.fetch({success:function(){console.log(this.length)}}); 
```

因此，当我使用 InfoModel 启动视图时，它会失败。

任何专家都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:55:50.707

来自[精美手册](http://backbonejs.org/#Collection-parse)：

> **解析** `collection.parse(response, options)`
> 
> [...]该函数传递了原始`response`对象，并且应该返回要添加到集合中的模型属性数组。

显然你得到了预期的数组（长度为一个），`response`但是你`parse`只返回第一个元素：

```
return response[0]; 
```

但是该集合需要一个对象*数组*（每个模型一个对象）而不是*单个对象*。结果是你最终得到一个空集合，因为你没有给它任何可以加载的东西；空集合的长度为零，这就是您所看到的。

你可能希望你`parse`看起来像这样：

```
parse: function (response) {
    console.log("In Parse" + response.length)
    return response;
} 
```

这只是`parse`带有`console.log`调用的默认实现，因此您可能并不需要它。

# java - 将 byte[] 字符串转换为其整数值的快速方法

> ID：15237569
> 
> 赞同：6
> 
> 时间：2013-03-06T01:53:25.947
> 
> 标签：java, optimization

我正在从磁盘读取一个大文件。该文件只包含数字，编码为普通的旧 ASCII。目前，我正在分块阅读，然后做这样的事情：

```
byte[] token;  // bytes representing a bunch of numbers
int n = Integer.parseInt(new String(token)); 
```

换句话说，我正在转换为字符串，然后将字符串解析为整数。我想知道是否有办法使用快速运算，如移位和二进制算术？

我怀疑这可以做得更快。例如，数字 1、2、3 的原始字节为 49、50、51。任何关于黑客的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T01:58:11.833

```
 int n=0;
    for(byte b : token)
        n = 10*n + (b-'0'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T01:58:24.570

你不能用以 10 为底的数字精确地进行二进制算术，但你可以进行十进制算术。假设高位数字在前：

```
byte[] token;
long n = 0;
long pow = 1;
for( int i = token.length - 1; i >= 0; i-- ) {
  n += (token[i]-48) * pow;
  pow *= 10;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T05:06:44.187

尝试

```
 byte[] a = { 1, 2, 3 };
    for (int i = 0; i < a.length; i++) {
        a[i] += '0';
    }
    int n = Integer.parseInt(new String(a));
    System.out.println(n); 
```

输出

```
123 
```

# .net - 如何滚动到最后一个在剑道网格中添加的项目？

> ID：15237571
> 
> 赞同：1
> 
> 时间：2013-03-06T01:53:34.670
> 
> 标签：.net, asp.net-mvc, grid, kendo-ui

我有一个始终由 SignalR 更新的剑道网格。

目前我的网格显示大约 12 行。此后以编程方式添加的任何行都将不可见，因为滚动条不会自动向下滚动

如何以编程方式滚动到网格底部，或者是否有解决方法始终使添加的最后一项可见？或者滚动到最后一项？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T21:31:45.447

基本上要更改滚动位置，您需要使用 Grid 的**dataBound**事件。例如

```
dataBound:function(){
      this.content.scrollTop(this.tbody.height())
    }, 
```

这是 Grid 的 web 版本的实时示例 - 包装器可以使用相同的方法：

[http://jsbin.com/aqoqim/3/edit](http://jsbin.com/aqoqim/3/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:10:05.093

这可能是一个简单的解决方案，但您始终可以使用 JavaScript 滚动到有问题的元素，使用它的`id='lastRowId'`.

```
// After adding your last row
window.location.hash = '#lastRowId'; 
```

或者，滚动到网格的顶部（如果这允许所有行都可见），

```
window.location.hash = '#gridTop'; 
```

# yui3 - 有没有类似 RequireJS Optimizer 的 YUI3 Optimizer？

> ID：15237578
> 
> 赞同：0
> 
> 时间：2013-03-06T01:54:05.687
> 
> 标签：yui3, optimization

我一直在使用 YUI3 来开发我的个人项目。

我喜欢 YUI3，只是它看起来无法将所有依赖项合并到一个 js 文件中。我也使用 RequireJS，它的优化器做得很好。

是否有 YUI3 优化器或类似工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T21:04:54.077

一个快速的方法（对于核心 YUI 模块）是 YUI 配置器：http: [//yuilibrary.com/yui/configurator/——](http://yuilibrary.com/yui/configurator/)这将为您构建两个您需要的所有基本 JS 和 CSS 的缩小汇总文件。

核心团队正在开发一个名为“Grifter”的工具，它可以做同样的事情，但也可以处理非核心模块。

您可能还想研究使用组合加载器，而不是单个 JS 文件。这取决于您是否基本上需要在每个页面上加载相同的 JS（单个文件很好），或者您的 JS 是否因页面而异（组合加载器很好）。

# python - 以编程方式在 Matplotlib 中的绘图一侧添加间距

> ID：15237580
> 
> 赞同：7
> 
> 时间：2013-03-06T01:54:09.367
> 
> 标签：python, matplotlib

我在 Matplotlib 中制作了很多图，其中外部数据点位于绘图空间的边缘，这通常会掩盖重要的数据。例如，我想做类似的事情：

```
f, ax = subplots(1, 1)
ax.plot([0, 1], [.25, .5], "o") 
```

正如所写，我最终得到了一个 xaxis 从 0 到 1 的图，并且很难对数据的外观有印象（而且它浪费了大量空间）。

我想要一些方法来重置 x 轴限制，以便 a) 它在每一侧增加空间 b) xticks 以合理的（默认）间隔覆盖整个 xaxis。显然，在单一情况下，我可以使用 ax.set_xlim() 和 ax.set_xticks()，但我生成了很多这样的图，并且不提前知道调整图的最佳方法是什么。

Matplotlib 中是否有一些选项来设置 x 轴跨越的 x 数据范围的百分比，或类似的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T02:08:24.243

用于`Axe.margins()`设置 xais & yaxis 的边距。

```
ax.margins(0.1, 0.1) 
```

[（文档）](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.margins)

# android - 如何在 Android XML 中旋转线？

> ID：15237582
> 
> 赞同：25
> 
> 时间：2013-03-06T01:54:20.633
> 
> 标签：android, android-layout, android-manifest, android-xml, android-drawable

我正在尝试使用 XML 在 Android 应用程序中绘制对角线，但它不起作用。它只是画一条水平线。

**主.xml**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".TestActivity" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" 
        style="@style/diagonalStyle">
    </RelativeLayout>

</RelativeLayout> 
```

**样式.xml**：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="diagonalStyle">
        <item name="android:background">@drawable/background</item>
    </style>

</resources> 
```

**背景.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <rotate
            android:fromDegrees="0"
            android:toDegrees="45"
            android:pivotX="50%"
            android:pivotY="50%" >
            <shape
                android:shape="line"
                android:top="1dip" >
                <stroke
                    android:width="1dip"
                    android:color="#FF0000" />
            </shape>
        </rotate>
    </item>

</layer-list> 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-06T04:56:30.663

你真的只需要改变一个号码就可以让它工作。只需将 fromDegrees 更改为 45：

```
<item>
    <rotate
            android:fromDegrees="45"
            android:toDegrees="45"
            android:pivotX="50%"
            android:pivotY="50%" >
        <shape
                android:shape="line"
                android:top="1dip" >
            <stroke
                    android:width="1dip"
                    android:color="#FF0000" />
        </shape>
    </rotate>
</item> 
```

旋转可绘制[http://developer.android.com/reference/android/graphics/drawable/RotateDrawable.html](http://developer.android.com/reference/android/graphics/drawable/RotateDrawable.html)

实际使用的是 Property Animation 格式[http://developer.android.com/guide/topics/resources/animation-resource.html](http://developer.android.com/guide/topics/resources/animation-resource.html)

虽然您正在制作一条非动画对角线，但您希望它从 45 度开始，也以 45 度结束。所以将它们都设置为 45 是常态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-29T11:42:47.873

你可以试试这个：创建一个布局“divider.xml”

```
<?xml version="1.0" encoding="utf-8"?>
<View android:layout_width="match_parent"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="@dimen/one_dp"
    android:layout_weight=".1"
    android:background="@drawable/transparent_divider"
    android:padding="5dp"
    android:rotation="180"/> 
```

创建一个可绘制形状“transparent_divider.xml”：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <size android:height="1dp" />
    <solid android:color="#808080" />
</shape> 
```

# sql - SQL Server 触发将数据更新到表中，但仅在客户插入或更新一个客户端时才应更新数据

> ID：15237583
> 
> 赞同：0
> 
> 时间：2013-03-06T01:54:34.937
> 
> 标签：sql, triggers, sql-server-2008-r2

现在触发器看起来像这样，它部分工作

我的触发器看起来像这样

```
 ALTER  trigger [dbo].[tr_EligebilityCheck]
on [dbo].[Clients]
 for INSERT,update
as 

BEGIN
UPDATE Clients 
SET 
StatusID = 5
WHERE 
ClientID IN (Select ClientID
            from Clients c 
            join inserted --ADD THIS JOIN
            on inserted.ClientID = c.ClientID
            join IncomeEligibility i 
            on c.HshldSize = i.HshldSize
            where StatusID in (1,2) 
            and  WIC = 0
            and (c.CategCode = 'SR' 
                and ((MonthlyYearly = 'month' and c.AnnualHshldIncome >= i.SeniorMo) 
                or (c.AnnualHshldIncome >= i.SeniorYr and MonthlyYearly ='year'))
                and DATEDIFF(YEAR,DOB,GETDATE()) < 60)
            or
                (c.CategCode = 'CH' 
                and ((MonthlyYearly = 'month' and c.AnnualHshldIncome >= i.WomanChildMo) 
    or (c.AnnualHshldIncome >= i.WomanChildYr and MonthlyYearly ='year'))
                and DATEDIFF(YEAR,DOB,GETDATE()) > 6))

update Clients
set StatusID = 4 
where WIC =1
from Clients --ADD THIS FROM STATEMENT
join inserted --ADD THIS JOIN
on inserted.ClientID = Clients.ClientID

END 
```

当我使用 CategCode = 'SR' 插入客户端时，它仅检查 DOB 并在客户端小于 60 岁时触发，但如果客户端年龄较大，则不检查

```
and ((MonthlyYearly = 'month' and c.AnnualHshldIncome >= i.SeniorMo) 
                    or (c.AnnualHshldIncome >= i.SeniorYr and MonthlyYearly ='year')) 
```

如果我插入带有 CategCode = 'CH' 的客户端，它会检查收入但没有检查 DOB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:27:37.810

只要您对主键有正确的引用，我不明白您为什么需要`INSTEAD OF`触发器。似乎没有任何情况会阻止插入或更新，对吗？您只想确定 StatusID 的值。没有理由必须在更新之前完成。

我相信您更新太多行的原因是您没有将触发器限制为仅`inserted`表中的那些行。尝试向触发器添加联接，如下所示：

```
ALTER  trigger [dbo].[tr_EligebilityCheck]
on [dbo].[Clients]
 for INSERT,update
as 

BEGIN
UPDATE Clients 
SET 
StatusID = 5
WHERE 
ClientID IN (Select ClientID
            from Clients c 
            join inserted --ADD THIS JOIN
            on inserted.ClientID = c.ClientID
            join IncomeEligibility i 
            on c.HshldSize = i.HshldSize
            where StatusID in (1,2) 
            and  WIC = 0
            and (c.CategCode = 'SR' 
                and ((MonthlyYearly = 'month' and c.AnnualHshldIncome >= i.SeniorMo) 
                or (c.AnnualHshldIncome >= i.SeniorYr and MonthlyYearly ='year'))
                and DATEDIFF(YEAR,DOB,GETDATE()) < 60)
            or
                (c.CategCode = 'CH' 
                and ((MonthlyYearly = 'month' and c.AnnualHshldIncome >= i.WomanChildMo) 
    or (c.AnnualHshldIncome >= i.WomanChildYr and MonthlyYearly ='year'))
                and DATEDIFF(YEAR,DOB,GETDATE()) > 6))

update Clients
set StatusID = 4 
where WIC =1
from Clients --ADD THIS FROM STATEMENT
join inserted --ADD THIS JOIN
on inserted.ClientID = Clients.ClientID

END 
```

*如果您确实*想使用触发器，请注意以下`INSTEAD OF`几点：`INSTEAD OF`与. 更改表，然后继续更新。完全取消插入或更新，这意味着您需要明确地重新编写它。我有一个下面的例子。*`BEFORE UPDATE``BEFORE UPDATE``inserted``INSTEAD OF`*

 *此外，如果您想使用`INSTEAD OF`触发器，则需要单独的`INSERT`和`UPDATE`触发器，或者您需要将查询编写为`MERGE`语句。我将`INSERT`在下面的示例中使用：

```
ALTER  trigger [dbo].[tr_EligebilityCheck]
on [dbo].[Clients]
INSTEAD OF INSERT
as 

BEGIN

--First, set StatusID in the inserted table
UPDATE inserted
SET 
StatusID = 5
WHERE 
ClientID IN (Select ClientID
            from Clients c 
            join IncomeEligibility i 
            on c.HshldSize = i.HshldSize
            where StatusID in (1,2) 
            and  WIC = 0
            and (c.CategCode = 'SR' 
                and ((MonthlyYearly = 'month' and c.AnnualHshldIncome >= i.SeniorMo) 
                or (c.AnnualHshldIncome >= i.SeniorYr and MonthlyYearly ='year'))
                and DATEDIFF(YEAR,DOB,GETDATE()) < 60)
            or
                (c.CategCode = 'CH' 
                and ((MonthlyYearly = 'month' and c.AnnualHshldIncome >= i.WomanChildMo) 
    or (c.AnnualHshldIncome >= i.WomanChildYr and MonthlyYearly ='year'))
                and DATEDIFF(YEAR,DOB,GETDATE()) > 6));

update inserted
set StatusID = 4 
where WIC =1;

--Once the inserted table looks right, proceed with the insert
--You need to explicitly write an insert statement, or nothing will happen
INSERT INTO [dbo].[Clients]
  <column_list>
SELECT <column_list>
FROM inserted; 
```*

# knockout.js - 在初始加载时触发淘汰赛验证

> ID：15237589
> 
> 赞同：0
> 
> 时间：2013-03-06T01:55:10.923
> 
> 标签：knockout.js, knockout-validation

我们目前正在使用淘汰赛 2.1 开发剃须刀应用程序。我们已经开始使用淘汰赛验证库。

问题是在弹出窗口的初始加载时触发了 ko 验证。我们在这里缺少什么 - 也许在视图的初始加载时，淘汰赛认为视图模型已更改并因此触发验证？我们如何确定视图模型上的哪个属性发生了变化，有没有办法明确地阻止它？

这是显示问题的简化小提琴 - 链接：http: [//jsfiddle.net/3Lqsx/1307/](http://jsfiddle.net/3Lqsx/1307/)

代码片段：

```
var LeaveEditViewModel = function() {

this.hours = ko.observable().extend({ required: true });
this.hours.isModified(false); 
this.registerClick = function() {

this.hours()           

this.hours.isModified(false);
}; 

};

var leaveEditViewModel = new LeaveEditViewModel();

leaveEditViewModel.errors = ko.validation.group(leaveEditViewModel);
ko.validation.configure({
registerExtenders: true,
messagesOnModified: true,
insertMessages: false,
parseInputAttributes: true,
messageTemplate: null,
grouping: {
deep: true
}
});
ko.applyBindings(leaveEditViewModel); 
```

我们正在使用 prop.IsModified(false); 也叫。。

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-04-16T00:47:24.523

我遇到了同样的问题，发现这是因为我的视图模型上有一个保存功能，它绑定到我的表单上的敲除点击绑定，如下所示：

```
<input type="button" value="Save" data-bind="click:app.viewModel.save()" /> 
```

视图模型保存功能在我的模型上检查 isValid 导致错误显示。这就是我想要的，除非您以这种方式绑定，单击绑定会在页面加载时调用该函数。

我将视图模型保存功能包装在另一个功能中，问题就消失了：

```
<input type="button" value="Save" data-bind="click:function(e,i){app.viewModel.save();}" /> 
```

我不知道这是否是您的确切情况，因为您没有发布所有代码，但如果不是，我希望这对某人有所帮助。

# android - 为什么我们不能在 android 中使用 net.sf.json？

> ID：15237591
> 
> 赞同：0
> 
> 时间：2013-03-06T01:55:21.657
> 
> 标签：android, json

如果我们在android中使用net.sf.json.JSONObejct，类加载器找不到类。为什么我们不能在 android 中使用 net.sf.json？
并有一个可以在 android 中使用的 json jar 吗？因为 google 的 org.json 太简单了。我想从一个对象解析一个 JSONObject。非常感谢。

03-06 14:40:06.613: E/AndroidRuntime(660): 致命异常: main 03-06 14:40:06.613: E/AndroidRuntime(660): java.lang.NoClassDefFoundError: com.google.gson.Gson 03 -06 14:40:06.613: E/AndroidRuntime(660): 在 de.bobs_world.mobile.LoginActivity.onCreate(LoginActivity.java:67) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android .app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611) 03-06 14:40 :06.613: E/AndroidRuntime(660): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.app.ActivityThread.access$1500 (ActivityThread.java:117) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:931) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-06 14:40:06.613: E/AndroidRuntime(660) : 在 android.os.Looper.loop(Looper.java:123) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect。 Method.invoke(Method.java:507) 03-06 14:40:06.613: E/AndroidRuntime(660): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 dalvik .system.NativeStart.main（本机方法）E/AndroidRuntime(660): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.os.Looper.loop(Looper.java :123) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 03-06 14:40:06.613: E/AndroidRuntime(660):在 java.lang.reflect.Method.invokeNative(Native Method) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invoke(Method.java:507) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 dalvik.system.NativeStart.main(Native Method)E/AndroidRuntime(660): 在 android.os.Handler.dispatchMessage(Handler.java:99) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.os.Looper.loop(Looper.java :123) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.app.ActivityThread.main(ActivityThread.java:3683) 03-06 14:40:06.613: E/AndroidRuntime(660):在 java.lang.reflect.Method.invokeNative(Native Method) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invoke(Method.java:507) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660):在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 dalvik.system.NativeStart.main(Native Method)java:99) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.os.Looper.loop(Looper.java:123) 03-06 14:40:06.613: E/AndroidRuntime(660) : 在 android.app.ActivityThread.main(ActivityThread.java:3683) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-06 14 :40:06.613: E/AndroidRuntime(660): at java.lang.reflect.Method.invoke(Method.java:507) 03-06 14:40:06.613: E/AndroidRuntime(660): at com.android。 internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597 ) 03-06 14:40:06.613: E/AndroidRuntime(660): at dalvik.system.NativeStart.main(Native Method)java:99) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 android.os.Looper.loop(Looper.java:123) 03-06 14:40:06.613: E/AndroidRuntime(660) : 在 android.app.ActivityThread.main(ActivityThread.java:3683) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-06 14 :40:06.613: E/AndroidRuntime(660): at java.lang.reflect.Method.invoke(Method.java:507) 03-06 14:40:06.613: E/AndroidRuntime(660): at com.android。 internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597 ) 03-06 14:40:06.613: E/AndroidRuntime(660): at dalvik.system.NativeStart.main(Native Method)在 android.app.ActivityThread.main(ActivityThread.java:3683) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-06 14: 40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invoke(Method.java:507) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 com.android.internal .os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 03-06 14:40:06.613: E/AndroidRuntime(660): at dalvik.system.NativeStart.main(Native Method)在 android.app.ActivityThread.main(ActivityThread.java:3683) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invokeNative(Native Method) 03-06 14: 40:06.613: E/AndroidRuntime(660): 在 java.lang.reflect.Method.invoke(Method.java:507) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 com.android.internal .os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597) 03-06 14:40:06.613: E/AndroidRuntime(660): at dalvik.system.NativeStart.main(Native Method)613: E/AndroidRuntime(660): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 com.android .internal.os.ZygoteInit.main(ZygoteInit.java:597) 03-06 14:40:06.613: E/AndroidRuntime(660): at dalvik.system.NativeStart.main(Native Method)613: E/AndroidRuntime(660): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839) 03-06 14:40:06.613: E/AndroidRuntime(660): 在 com.android .internal.os.ZygoteInit.main(ZygoteInit.java:597) 03-06 14:40:06.613: E/AndroidRuntime(660): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:20:56.870

您可以使用它，只需将库导入您的项目即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T08:16:12.893

I have encountered such a problem, the final solution is this: `net.sf.json` needs some other jars, there are [instructions on the official website](http://json-lib.sourceforge.net/dependencies.html)

If you want to use `json-lib-2.4-jdk15.jar`, you have to add these:

*   commons-beanutils-1.8.0.jar
*   commons-collections-3.2.1.jar
*   commons-lang-2.5.jar
*   commons-logging-1.1.1.jar
*   ezmorph-1.0.6.jar

But when I compile, an exception will be reported:

> multiple dex files define Lorg/apache/commons/collections/Buffer

Violent solutions: Remove the directory of colletions in `commons-beanutils-1.8.0.jar`.

Then you can use `net.sf.json` in Android.

# ocaml - 为什么 OCaml 不支持记录子类型化？

> ID：15237598
> 
> 赞同：15
> 
> 时间：2013-03-06T01:56:22.547
> 
> 标签：ocaml, record, subtyping

阅读“类型和编程语言”，我对使用闭包和记录子类型的对象实现印象深刻（第 18 章）。OCaml 不支持记录子类型是否有任何特殊原因（我知道对象支持）？事实上，我找不到任何支持这一点的语言。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-06T07:11:38.643

从技术上讲，OCaml 的对象并不真正支持通常意义上的子类型，而是*行多态性*。与子类型相比，行多态性有许​​多优点，特别是它更具表现力，并且在类型推断方面效果更好（子类型和类型推断根本不能很好地混合）。

对所有记录使用结构子类型或行多态的主要问题是它需要更多涉及的运行时实现，因此也更昂贵。简单的记录可以很容易地转换为普通的元组，字段访问只是索引，结构子类型或行多态性需要透明地“切片”对象的能力，即在删除了随机字段的超类型下查看它。通常，这需要通过散列查找字段（例如 Ocaml 的对象）或*证据传递*技术，其中除了实际参数之外，函数或其任何被调用者使用的每个字段的索引都必须作为隐藏参数传递记录（例如，这就是 SML# 正在做的事情）。

在任何情况下，Ocaml*都有*多态记录，它们只是被称为对象。但是如果你不需要的话，你可以忽略他们周围的所有课堂混乱。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-06T07:03:56.450

从打字的角度来看，记录子类型是非常危险的。

假设您有一个包含三个字段的记录：a、b 和 c。并且您想创建一个只有两个字段的记录：a 和 c。编译器在完成读取整个记录之前不知道您使用的是什么类型，并且如果您犯了错误，编译器仍然无法帮助您：例如，您忘记了 b 字段。

我完全同意这种观点是有争议的，但我认为这就是编写 ocaml 的人的想法。

# c++ - 我们能在多大程度上依赖析构函数？

> ID：15237600
> 
> 赞同：-1
> 
> 时间：2013-03-06T01:56:28.873
> 
> 标签：c++

我在我们的 SW 中遇到了这段代码，它依赖析构函数来释放锁。然而，当我运行程序时，析构函数从未被调用，锁也从未被释放。

```
bool someClass::someFunc()
{
    Locker lock(m_lock); //take lock in constructor, release lock in Locker destructor
    return something;
} 
```

这里出了什么问题？编译器可以将此函数优化为内联吗？

```
class Locker {
  public: 
      Locker(Lock& lock) : m_lock(lock) { m_lock.lock(); }
     ~Locker() { m_lock.unlock(); } 
  protected: 
    Lock& m_lock;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:00:06.617

您确定 Locker 实际上释放了析构函数中的锁吗？除非程序崩溃或中止或发生其他一些不寻常的情况，否则您可以指望调用析构函数。也许您的调试器显示了错误的值？

如果编译器对其进行内联优化，代码仍将被执行。“内联”并不意味着代码永远不会运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T02:24:47.093

我怀疑你观察到没有调用析构函数是错误的。这是一劳永逸地证明它的方法：

```
#include<iostream>

class Locker {
  public: 
      Locker(Lock& lock) : m_lock(lock) { m_lock.lock(); std::cout<<"locked\n"; }
     ~Locker() { m_lock.unlock(); std::cout<<"unlocked\n"; } 
  protected: 
    Lock& m_lock;
} 
```

当然，这只是为了让你自己确信正在调用析构函数。不要把线留在那里:)

# gwt - GWT 数组列表 serialization I have two different model class, public class ModelDto implements IsSerializable{ public ModelDto {} private Integer id; private String name; private ArrayList <test&g 0="" 2218="" 问问题="" 2013-03-06t01:57:28.537="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" i="" have="" two="" different="" model="" class,="" public="" class="" modeldto="" implements="" isserializable{="" {}="" private="" integer="" id;="" string="" name;="" arraylist<test="">name; } public class Test implements IsSerializable{ public Test {} private Integer id; private String name; private ArrayList <test>name; } I want to make a RPC call like ModelDto getModel(); How to achieve this? I know that the issue is basic serialization. but I want to know that how to pass a ArrayList in RPC If not posible any alternatives?. How do I check for Internet connection or load local file? I have an app which, from the app delegate, calls a synchronization engine. The synchronization engine fetches data from the web from a web service parses it and puts it in a core data base. The individual you controllers call a fetch to the core database in order to present the data. I want to add the feature of checking for Internet connectivity. Should I check for Internet connectivity in the app delegate and if there is one call the sync engine, else if there is not... What do I do, just leave it empty? If (Internet) { //call sync engine } else { //do nothing } gwtserialization 4 1 回答 1 This answer is useful 0 听起来你的问题implements IsSerializable我怀疑你的课程没有实现com.google.gwt.user.client.rpc.IsSerializable. 它应该实现一个java.io.Serializable或 GWT com.google.gwt.user.client.rpc.IsSerializable.（两者一起没有问题）。 关于你的默认构造函数。它应该是一个empty constructor. 例如 public ModelDto() { } package structures仅当您在进行上述更改（如...等）后仍然面临问题时，才会出现这两点的大多数问题，请参阅此。 于 2013-03-06T05:16:50.600 回答 Related 1 java - 单击按钮时在java中隐藏一个框架 1 sql - 具有单个 GUID 列的 SQL Server MergeReplication 3 mysql - 智能计算加入mysql中的id 3 git - 自从我上次使用 Git 拉动以来，我如何才能获得在远程服务器上更改的唯一文件列表 2 asp.net - 列表框项宽度 1 sql - 使用不同的值遍历 sql 脚本 1 sql-server - case语句一次选择多行 1 html - 您可以通过 html url 方案打开 iOS6 共享表吗？ 2 c# - 什么更有效，数据表或自定义对象？ 1 mercurial - Mercurial 错误：无法导入扩展 hgext.gpg Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</test></test&g>

> ID：15237610
> 
> 赞同：0
> 
> 时间：
> 
> 标签：gwt, serialization

I have two different model class,

```
public class ModelDto implements IsSerializable{
     public ModelDto {}
     private Integer id;
     private String name;
     private ArrayList<Test> name;
}

public class Test implements IsSerializable{
     public Test {}
     private Integer id;
     private String name;
     private ArrayList<Test> name;
} 
```

I want to make a RPC call like

```
ModelDto getModel(); 
```

How to achieve this? I know that the issue is basic serialization. but I want to know that how to pass a ArrayList in RPC If not posible any alternatives?.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:16:50.600

听起来你的问题`implements IsSerializable`我怀疑你的课程没有实现`com.google.gwt.user.client.rpc.IsSerializable.`

它应该实现一个`java.io.Serializable`或 GWT `com.google.gwt.user.client.rpc.IsSerializable.`（两者一起没有问题）。

关于你的默认构造函数。它应该是一个`empty constructor.` 例如

```
 public ModelDto() {

} 
```

`package structures`仅当您在进行上述更改（如...等）后仍然面临问题时，才会出现这两点的大多数问题，请参阅[此](https://stackoverflow.com/questions/9534484/gwt-rpc-serializationexception)。

# ffmpeg - 更改 MOV 或 WAV 的 wav、aiff 或 mov 音频采样率而不更改样本数

> ID：15237612
> 
> 赞同：0
> 
> 时间：2013-03-06T01:57:48.100
> 
> 标签：ffmpeg, wav, quicktime, sox, aiff

我需要一种非常精确的方法来加速音频。我正在为 OpenDCP（一种用于制作数字电影包的开源工具）准备电影，以便在影院放映。我的源文件通常是 23.976fps 和 48.000kHz 音频的 quicktime MOV 文件。有时我的音频是单独的 48.000kHz WAV。（FWIW，源的视频帧率实际上是每秒24/100.1帧，是一个重复的小数。）

DCP 标准基于 24.000fps 和 48.000kHz 程序，因此需要加快源的音频和视频。图像处理工作流程本质上涉及将 MOV 转换为 TIF 序列，每帧帧，然后假定为 24.000fps，因此我不必参与 QT 视频媒体处理程序的内部。

但事实证明，加快音频匹配速度是很困难的。大多数音频程序无法获得与重新定时的图像帧对齐的音频样本数。Audacity 速度增加 0.1% 会导致错误的样本数量。我发现唯一可行的方法是使用 Apple Cinema Tools 使 23.976fps/48.000kHz MOV 符合 24.000fps/48.048kHz（通过更改 Quicktime 标头来实现），然后使用 Quicktime Player 从该文件在 48.000kHz，重新采样。这是帧精确的。

所以我的问题是：ffmpeg 或 sox 中是否有设置可以精确地加速 MOV 或 WAV 或 AIFF 中的音频？我想要一个跨平台的解决方案，所以我不依赖Cinema Tools，它只有MacOS。

我知道这是很多背景。随时提出澄清问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:19:25.483

```
sox input-file output-file speed 1.001001001001001 
```

其中文件可以是 WAV 或 AIFF。Sox 在内部计算出小数点实际上是 1000/999，因此时间调整是 100% 准确的（并且重采样质量很高）。走另一条路当然是

```
sox input-file output-file speed 0.999 
```

FFmpeg 也可以按时间准确地做到这一点，但它的重采样器存在一些质量问题。1.1 版可以使用 sox 重采样器（请参见此处： http: [//ffmpeg.org/trac/ffmpeg/wiki/FFmpeg%20and%20the%20SoX%20Resampler](http://ffmpeg.org/trac/ffmpeg/wiki/FFmpeg%20and%20the%20SoX%20Resampler)），但它可能最简单的就是使用 sox。

# ios - 如何检查 Internet 连接或加载本地文件？

> ID：15237614
> 
> 赞同：0
> 
> 时间：2013-03-06T01:58:04.917
> 
> 标签：ios

我有一个应用程序，它从应用程序委托调用同步引擎。同步引擎从 Web 服务中获取来自 Web 的数据，对其进行解析并将其放入核心数据库中。

您的控制器调用对核心数据库的提取以呈现数据。

我想添加检查 Internet 连接的功能。我应该在应用程序委托中检查互联网连接，如果有一个调用同步引擎，否则如果没有......我该怎么办，让它空着？

```
If (Internet) {
//call sync engine
} else { 
//do nothing
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:04:04.117

要检查连接性，有几个选项：

1.  使用[Apple 的可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)类。易于使用，简单但不兼容 ARC。
2.  使用替代 Apple 的 3rd 方类。 [这个](https://github.com/tonymillion/Reachability#readme)不错。ARC兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:04:02.930

你试过可达性吗？它的工作原理是这样的：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(networkChanged:) name:kReachabilityChangedNotification object:nil];

online = [Reachability reachabilityForInternetConnection];
[online startNotifier];

- (void)networkChanged:(NSNotification *)notification {

  NetworkStatus remoteHostStatus = [online currentReachabilityStatus];

  if(remoteHostStatus == NotReachable) { 
      //use local file
  }
  else if (remoteHostStatus == ReachableViaWiFiNetwork) { 
      //use remote file
  }
  else if (remoteHostStatus == ReachableViaCarrierDataNetwork) { 
      //use remote file
  }
} 
```

# ios - UIAlertView 多行警报插入换行符

> ID：15237632
> 
> 赞同：0
> 
> 时间：2013-03-06T01:59:44.977
> 
> 标签：ios, uialertview

我正在创建一个多行 UIAlertView，但是由于某种原因，UIAlertView 的宽度对于我的一个 NSString 来说太小了，所以它会插入一个换行符并将错误上升到两行......

这就是我的代码的样子

e

```
lse if ((checkCustomerName == NO)||(checkCustomerEmail == NO)||(checkCustomerRating == NO)||(checkBranchID == NO)||(checkServerAddress == NO)||(checkPortNumber == NO)||(nameTextField == NO)||(emailTextField == NO)) {

        NSMutableString *alertString = [[NSMutableString alloc] init];

        if (checkCustomerName == NO) {
            [alertString appendString: @"invalid name \n"];
        }
        if (checkCustomerEmail == NO) {
            [alertString appendString: @"invalid e-mail \n"];
        }
        if (checkCustomerRating == NO) {
            [alertString appendString: @"Select a slimey to define your experiance \n"];
        }
        if (checkBranchID == NO) {
            [alertString appendString: @"invalid BranchID \n"];
        }
        if (checkServerAddress == NO) {
            [alertString appendString: @"invalid Server address \n"];
        }
        if (checkPortNumber == NO) {
            [alertString appendString: @"invalid port address \n"];
        }
        if (nameTextField == NO) {
            [alertString appendString: @"invalid name, too many characters \n"];
        }
        if (emailTextField == NO) {
            [alertString appendString: @"invalid e-mail, too many characters \n"];
        }

        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Errors" message:alertString delegate:self cancelButtonTitle:nil
                                               otherButtonTitles:@"OK", nil];

        [alert show];

    } 
```

这是文本的显示方式

错误

无效的名称无效的电子邮件选择一个笑脸来定义您的体验//这是它出错的地方......它应该在同一行

所以我想知道的是如何使该文本出现在同一行，例如如何使uialerview更宽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:10:31.683

我认为您可能希望通过更改问题本身的范围并查看结果来解决此问题。如果有人设法搞砸了所有 8 个字段，您将看到一个包含所有 8 个字符串连接的警报框。将所有这些字符串放在一个盒子里似乎是一个非常讨厌的 UI。为什么不重构你的代码，这样如果用户设法搞砸了其中一个测试，它会用第一个失败原因提醒他们，然后返回。一次针对 1 个问题的 1 条消息。还使用换行符处理您的连接问题。

我不确定为什么换行符在这种情况下不起作用，但您可能会考虑尝试`stringByAppendingString:`使用`stringWithFormat:`.

或者它可能是 UIAlertView 在幕后做的事情......

# css - wordpress 上的粘滞页脚问题

> ID：15237640
> 
> 赞同：0
> 
> 时间：2013-03-06T02:00:21.467
> 
> 标签：css, wordpress, footer, sticky-footer

我已经为我的 wordpress 主题上的粘性页脚实现了一些 CSS，它似乎正在工作中途。您可以在这里查看该网站：[http ://westernaskasportfishing.com/wptest](http://westernalaskasportfishing.com/wptest)

你会注意到我从 min-height:100% 得到了太多的死空间；规则。我不是最好的粘性页脚，我觉得我很接近。关于如何使其功能齐全的任何想法？

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:14:39.663

我不知道你所说的贴纸页脚是什么意思。如果通过粘性页脚表示您希望元素始终停留在网页底部，无论滚动如何，请使用 CSS“位置：固定；底部：0；”。

# jquery - 如何使用 hoverIntent 插件？

> ID：15237641
> 
> 赞同：13
> 
> 时间：2013-03-06T02:00:24.557
> 
> 标签：jquery, html, menu, hoverintent

我是 jQuery 新手，想将*hoverIntent*插件添加到我的网站作为我的导航菜单。我被推荐到 Brian Cherne 的[网站](https://briancherne.github.io/jquery-hoverIntent/)并查看要下载的代码，但我不太确定如何将它们放在一起以使其工作。

*有人可以发布一个示例，说明添加了适当的hoverIntent*插件代码后的 HTML 代码应该是什么样子的吗？或者让我参考一下？

我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-06T02:02:49.377

`hoverIntent``hover`插件遵循与 jQuery方法完全相同的 api 签名。[您可以在http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)获得使用示例，只需查看源代码即可。

首先将 jQuery 包含在头部：

```
<script type="text/javascript" src="http://code.jquery.com/jquery.js"></script> 
```

下载并包含 hoverIntent 插件之后：

```
<script type="text/javascript" src="path/to/jquery.hoverIntent.js"></script> 
```

然后你可以`hoverIntent()`像这样在任何jQuery元素上使用方法

```
$(element).hoverIntent(whatToDoWhenHover, whatToDoWhenOut); 
```

`element`是一个类似or or的[jQuery 选择器](http://api.jquery.com/category/selectors/)，是当用户开始悬停元素和停止时将执行的函数。就像旧的优秀[jQuery hover](http://api.jquery.com/hover/)一样。`'#id'``'.class'``'div > .something'``whatToDoWhenHover``whatToDoWhenOut`

[例子](http://jsfiddle.net/yT6mP/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-06T14:30:12.233

如果您希望在不依赖 jQuery 的情况下使用 hoverIntent 功能，您可以使用它的纯 JavaScript ES6 版本（或轻松将其转换为 es5）。

```
const hoverIntent = (el, onOver, onOut) => {
    let x;
    let y;
    let pX;
    let pY;
    const h = {};
    let state = 0;
    let timer = 0;

    let options = {
        sensitivity: 7,
        interval: 100,
        timeout: 0,
        handleFocus: false,
        overClass: 'hovered'
    };

    const delay = e => {
        if (timer) timer = clearTimeout(timer);
        state = 0;
        if (onOut) {
            return onOut.call(el, e);
        }
        el.classList.remove(options.overClass);
        return false;
    };

    const tracker = e => {
        x = e.clientX;
        y = e.clientY;
    };

    const compare = e => {
        if (timer) timer = clearTimeout(timer);
        if (Math.abs(pX - x) + Math.abs(pY - y) < options.sensitivity) {
            state = 1;
            if (onOver) {
                return onOver.call(el, e);
            }
            el.classList.add(options.overClass);
            return false;
        }
        pX = x;
        pY = y;
        timer = setTimeout(() => {
            compare(e);
        }, options.interval);
        return false;
    };

    // Public methods

    const dispatchOver = e => {
        if (timer) timer = clearTimeout(timer);
        el.removeEventListener('mousemove', tracker, false);

        if (state !== 1) {
            pX = e.clientX;
            pY = e.clientY;

            el.addEventListener('mousemove', tracker, false);

            timer = setTimeout(() => {
                compare(e);
            }, options.interval);
        }

        return this;
    };

    const dispatchOut = e => {
        if (timer) timer = clearTimeout(timer);
        el.removeEventListener('mousemove', tracker, false);

        if (state === 1) {
            timer = setTimeout(() => {
                delay(e);
            }, options.timeout);
        }

        return this;
    };

    if (el) {
        el.addEventListener('mouseover', dispatchOver, false);
        el.addEventListener('mouseout', dispatchOut, false);
    }

    h.options = opt => {
        options = { ...options, ...opt };
        return h;
    };

    h.remove = () => {
        if (!el) return;
        el.removeEventListener('mouseover', dispatchOver, false);
        el.removeEventListener('mouseout', dispatchOut, false);
    };

    return h;
}; 
```

用法：

```
const menuEl = document.querySelector('.menu');
hoverIntent(menuEl); 
```

这会将“悬停”类添加到菜单元素，然后您可以在父菜单项悬停时使用纯 CSS 启用/禁用子下拉框

*   **提示：**而不是为每个菜单项运行 hoverIntent；仅针对 1 个元素（即：menu-wrapper 元素）运行它，并为 parent-menu-items 元素添加简单的 CSS 悬停规则以显示下拉框；基于 menu-wrapper 是否已经悬停，性能效率会更高;) *

CSS将类似于；

```
.menu.hovered .parent-li:hover {
    background-color: #f4f4f4;
}
.menu.hovered .parent-li:hover .child {
    display: block;
} 
```

我创建了一个游乐场，请看现场演示：

[https://codepen.io/mcakir/full/OJVJmdV](https://codepen.io/mcakir/full/OJVJmdV)

**高级用法**：`hoverIntent`方法接受`onOver`和`onOut`扩展`options`。

例子：

```
const onOverHandler = () => {
    console.log('mouse in!');
    // do something
}
const onOutHandler = () => {
    console.log('mouse out!');
    // do something
}
const customOptions = () => {
    sensitivity: 7,
    interval: 300,
    timeout: 200,
}
const menuEl = document.querySelector('.menu');
hoverIntent(menuEl, onOverHandler, onOutHandler).options(customOptions); 
```

# java - Cordova 2.2 Android这个类文件的JAR属于容器android依赖

> ID：15237643
> 
> 赞同：1
> 
> 时间：2013-03-06T02:00:45.707
> 
> 标签：java, android, cordova

我在构建应用程序时遇到问题。我试图在cordova插件中添加一个日历事件，但以下不起作用。

```
ContentValues values = new ContentValues();
values.put(CalendarContract.Events.DTSTART, calendarStart.toString());
values.put(CalendarContract.Events.DTEND, calendarEnd.toString());
values.put(CalendarContract.Events.TITLE, "test event");
values.put(CalendarContract.Events.DESCRIPTION, "Test event!");
values.put(CalendarContract.Events.CALENDAR_ID, 1);
                     this.cordova.getActivity().getContentResolver().insert(CalendarContract.Events.CONTENT_URI, values); 
```

插入的调用给了我一个 jar 问题“它不允许修改其条目上的源附件”

有谁知道如何解决这个问题？

# java - java.awt.Robot 未按预期运行

> ID：15237647
> 
> 赞同：0
> 
> 时间：2013-03-06T02:01:27.000
> 
> 标签：java, awt, awtrobot

我有以下代码：

```
autoPlay = new Robot();
autoPlay.setAutoDelay(500);
autoPlay.mouseMove((game.getLocationOnScreen().x + 1), (game.getLocationOnScreen().y + 1));
autoPlay.mousePress(InputEvent.BUTTON1_DOWN_MASK);
autoPlay.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);
autoPlay.mouseMove((game.getLocationOnScreen().x + 381), (game.getLocationOnScreen().y + 1));
autoPlay.mousePress(InputEvent.BUTTON1_DOWN_MASK);
autoPlay.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);
autoPlay.mouseMove((game.getLocationOnScreen().x + 1), (game.getLocationOnScreen().y + 381));
autoPlay.mousePress(InputEvent.BUTTON1_DOWN_MASK);
autoPlay.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);
autoPlay.mouseMove((game.getLocationOnScreen().x + 381), (game.getLocationOnScreen().y + 381));
autoPlay.mousePress(InputEvent.BUTTON1_DOWN_MASK);
autoPlay.mouseRelease(InputEvent.BUTTON1_DOWN_MASK);
autoPlay.mouseMove(currentX, currentY); 
```

根据代码，机器人应该移动到我调用的 JPanel 的左上角`game`。然后它应该按下并释放鼠标左键。然后它应该移动到右上角并按下/释放鼠标左键。然后它应该移动到左下角并按下/释放鼠标左键。然后它应该移动到右下角并按下/释放鼠标右键。最后，它应该移回左上角。

然而，发生的事情是机器人移动到角落但没有点击。当它移回代码末尾的左上角时，它只会单击一次。我想知道我的 JDK/SDK 是否是问题的根源，或者我是否不了解 Robot 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:21:11.043

对我来说似乎工作得很好，也许是你的鼠标听众？

**更新**

在 Java 6 和 Java 7 下测试，更改`BUTTON1_DOWN_MASK`为`BUTTON1_MASK`Java 6 似乎不喜欢它...看图

```
import java.awt.AWTException;
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagLayout;
import java.awt.Point;
import java.awt.Robot;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.InputEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestRobot02 {

    public static void main(String[] args) {
        new TestRobot02();
    }

    public TestRobot02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                TestRobot02.TestPane testPane = new TestRobot02.TestPane();

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(testPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                new Thread(new TestRobot02.RobotThread(testPane)).start();

            }
        });
    }

    public class RobotThread implements Runnable {

        private TestPane component;
        private Robot autoPlay;

        private RobotThread(TestPane component) {
            this.component = component;
        }

        @Override
        public void run() {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(TestRobot02.class.getName()).log(Level.SEVERE, null, ex);
            }
            try {
                autoPlay = new Robot();

                autoPlay.setAutoDelay(500);
                autoPlay.mouseMove((component.getLocationOnScreen().x + 1), (component.getLocationOnScreen().y + 1));
                autoPlay.mousePress(InputEvent.BUTTON1_MASK);
                autoPlay.mouseRelease(InputEvent.BUTTON1_MASK);
                autoPlay.mouseMove((component.getLocationOnScreen().x + component.getWidth() - 1), (component.getLocationOnScreen().y));
                autoPlay.mousePress(InputEvent.BUTTON1_MASK);
                autoPlay.mouseRelease(InputEvent.BUTTON1_MASK);
                autoPlay.mouseMove((component.getLocationOnScreen().x + 1), (component.getLocationOnScreen().y + component.getHeight() - 1));
                autoPlay.mousePress(InputEvent.BUTTON1_MASK);
                autoPlay.mouseRelease(InputEvent.BUTTON1_MASK);
                autoPlay.mouseMove((component.getLocationOnScreen().x + component.getWidth() - 1), (component.getLocationOnScreen().y + component.getHeight() - 1));
                autoPlay.mousePress(InputEvent.BUTTON1_MASK);
                autoPlay.mouseRelease(InputEvent.BUTTON1_MASK);

                Component child = component.getComponent(0);
                Point pos = child.getLocationOnScreen();
                Dimension size = child.getSize();
                pos.x += size.width / 2;
                pos.y += size.height / 2;
                autoPlay.mouseMove(pos.x, pos.y);
                autoPlay.mousePress(InputEvent.BUTTON1_MASK);
                autoPlay.mouseRelease(InputEvent.BUTTON1_MASK);

                //                autoPlay.mouseMove(currentX, currentY);
            } catch (AWTException exp) {
                exp.printStackTrace();
            }
        }
    }

    public class TestPane extends JPanel {

        public TestPane() {
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    System.out.println("Mouse Clicked at " + e.getPoint());
                }

                @Override
                public void mousePressed(MouseEvent e) {
                    System.out.println("Mouse Pressed at " + e.getPoint());
                }

                @Override
                public void mouseReleased(MouseEvent e) {
                    System.out.println("Mouse Released at " + e.getPoint());
                }

            });

            setLayout(new GridBagLayout());
            JButton btn = new JButton("Click me");
            btn.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("I was clicked :D");
                }
            });
            add(btn);

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }
} 
```

# c# - C# 中的 return 语句究竟做了什么？

> ID：15237649
> 
> 赞同：6
> 
> 时间：2013-03-06T02:01:58.280
> 
> 标签：c#, return, return-value, return-type

我很难理解 return 语句到底在做什么。例如，在这种方法中...

```
 public int GivePoints(int amount)
    {
        Points -= amount;
        return amount;
    } 
```

即使我在返回后放置任何随机整数，GivePoints 方法仍然会做同样的事情。那么 return 语句在做什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T02:05:49.093

Return 将在调用时退出该函数。因此， return 语句下方的任何内容都不会被执行。

基本上，`return`表明该函数应该执行的任何操作都已执行，并将此操作的结果传回（如果适用）给调用者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-03-28T14:40:32.667

`Return`将始终退出（离开）函数，返回后的任何内容都不会执行。

**返回示例：**

```
public int GivePoints(int amount)
{
    Points -= amount;
    return; //this means exit the function now.
} 
```

**返回一个变量示例：**

```
public int GivePoints(int amount)
{
    Points -= amount;
    return amount; //this means exit the function and take along 'amount'
} 
```

**返回一个变量示例并捕获返回的变量：**

```
public int GivePoints(int amount)
{
    Points -= amount;
    return amount; //this means exit the function and take along 'amount'
}

int IamCatchingWhateverGotReturned = GivePoints(1000); //catch the returned variable (in our case amount) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-06T02:07:58.497

`return`将控制权从当前方法返回给调用者，并将随它一起发送的任何参数传回。在您的示例中，`GivePoints`定义为返回一个整数，并接受一个整数作为参数。在您的示例中，返回的值实际上与参数值相同。

`GivePoints`在此示例中，从调用定义方法的代码中的其他位置使用返回值。

```
int currentPoints = GivePoints(1); 
```

意味着它`currentPoints`被赋值为 1。

这分解为`GivePoints`被评估。的评估`GivePoints`基于方法返回的内容。`GivePoints`返回输入，因此`GivePoints`在上面的示例中将评估为 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T02:11:09.293

只是对您最初目标的猜测

```
public int GivePoints(int amount)
{
    Points -= amount;
    return Points;
} 
```

所以 return 将返回 Points 的更新值

如果这不是你的情况，代码应该是

```
public void GivePoints(int amount)
{
    Points -= amount;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T02:05:32.257

在您的示例中，该函数正在返回您发送给它的确切数字。在这种情况下，您传递的任何值都是`amount`. 因此，您当前代码中的返回有点毫无意义。

所以在你的例子中：

```
int x = GivePoints(1000); 
```

x 将等于 1000

# javascript - 将所有脚本放在 1 个 .js 文件中

> ID：15237650
> 
> 赞同：-6
> 
> 时间：2013-03-06T02:02:17.673
> 
> 标签：javascript, html

我收集了大约 10 个脚本，这些脚本目前位于我的 index.php 的头部。我想将它们取出并将它们全部放入 1 个 .js 文件中。然后我想从 index.php 调用这个 1 .js 文件。

我试图这样做但没有成功。我需要在新的 .js 文件顶部放置一行代码以使所有脚本开始运行吗？

请原谅我的无知，并感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:05:17.057

不，没有什么可添加的。但是您也不需要脚本标签。在js文件中

剧本成为一个幸福的家庭。.

# c - 在 switch 语句中使用枚举类型

> ID：15237656
> 
> 赞同：23
> 
> 时间：2013-03-06T02:03:13.847
> 
> 标签：c, enums, switch-statement

如果检测到某些特殊情况，我将使用 switch 语句提前从我的主函数返回。特殊情况使用枚举类型编码，如下所示。

```
typedef enum {
    NEG_INF,
    ZERO,
    POS_INF,
    NOT_SPECIAL
} extrema;

int main(){

    // ...

    extrema check = POS_INF;

    switch(check){
        NEG_INF: printf("neg inf"); return 1;
        ZERO: printf("zero"); return 2;
        POS_INF: printf("pos inf"); return 3;
        default: printf("not special"); break;
    }

    // ...

    return 0;

} 
```

奇怪的是，当我运行它时，字符串`not special`被打印到控制台，而 main 函数的其余部分继续执行。

如何让 switch 语句在这里正常运行？谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-06T02:06:25.830

没有`case`标签。你现在有`goto`标签了。尝试：

```
switch(check){
    case NEG_INF: printf("neg inf"); return 1;
    case ZERO: printf("zero"); return 2;
    case POS_INF: printf("pos inf"); return 3;
    default: printf("not special"); break;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T02:10:41.537

您没有使用关键字“case”。下面给出的版本可以正常工作。

```
typedef enum {
    NEG_INF,
    ZERO,
    POS_INF,
    NOT_SPECIAL

} extrema;

int main(){

    extrema check = POS_INF;

    switch(check){
        case NEG_INF: printf("neg inf"); return 1;
        case ZERO: printf("zero"); return 2;
        case POS_INF: printf("pos inf"); return 3;
        default: printf("not special"); break;
    }

    return 0;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-06T02:08:28.013

你错过了最重要的`case`：

```
switch(check){
    case NEG_INF: printf("neg inf");     return 1;
    case ZERO:    printf("zero");        return 2;
    case POS_INF: printf("pos inf");     return 3;
    default:      printf("not special"); break;
} 
```

您创建了一些与枚举常量同名的（未使用的）标签（这就是它编译的原因）。

# java - java android - 迭代数组中的JSON对象

> ID：15237658
> 
> 赞同：2
> 
> 时间：2013-03-06T02:03:26.470
> 
> 标签：java, android, json

如何遍历此 JSON 对象中的所有“listPages”？

```
 {
        "listPages": [
            {
                "title": "Accounts",
                "recordType": "Company",
            },
            {
                "title": "Contacts",
                "recordType": "Person",
            }
        ]
    } 
```

我正在尝试通过以下代码将列表项从 listPages 数组中的每个项目添加到列表中：

```
 JSONObject JSONConfig = envConfig.getEnvConfig(this);

    try{
        JSONArray listPages = JSONConfig.getJSONArray("listPages");         
        for(int i = 0 ; i < listPages.length() ; i++){
            listItems.add(listPages.getJSONObject(i).getString("title"));
        }
        adapter.notifyDataSetChanged();
    }catch(Exception e){
        e.printStackTrace();
    } 
```

我可以在 logcat 中看到我收到系统错误：下一行出现“java.lang.NullPointerException”。

```
JSONArray listPages = JSONConfig.getJSONArray("listPages"); 
```

我已经尝试从其他问题中阅读和调整内容，但我无法弄清楚。帮助将不胜感激。

这是我的 envConfig.java 类

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.json.JSONObject;

import android.content.Context;
import android.util.Log;

public class EnvConfig {

    private String rawJSONString;
    private JSONObject jsonObjRecv;

    public JSONObject getEnvConfig(Context context){
        InputStream inputStream = context.getResources().openRawResource(
                R.raw.envconfigg);
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                inputStream));
        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                inputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        rawJSONString = sb.toString();
        try {
            JSONObject jsonObjRecv = new JSONObject(rawJSONString);
            Log.i("Test", "<JSONObject>\n" + jsonObjRecv.toString()
                    + "\n</JSONObject>");
        } catch (Exception e) {
            e.printStackTrace();
        }

        return jsonObjRecv;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:12:29.737

这是实例阴影的经典问题。你在你的方法中声明了一个新变量，在 try 块中，与类变量***同名。***因此，类变量被*隐藏*，因此永远不会被初始化。当您稍后从该方法返回它时，它的值为空。

```
public class EnvConfig {

    private String rawJSONString;
    private JSONObject jsonObjRecv; // <-- you declare a class variable here

    // ...

    try {
        JSONObject jsonObjRecv = new JSONObject(rawJSONString); // <-- shadowed here! 
```

除非您试图避免重复重新解析 JSON，否则我建议您完全摆脱类变量。否则，摆脱局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:09:08.820

这是我用于解析 JSON 数据的代码，我不熟悉您使用的 JSONConfig，但这对我来说非常有效。

```
JSONObject jsonObject = (JSONObject) new JSONTokener(/*Json String Data*/).nextValue();
JSONArray jsonArray = jsonObject.getJSONArray(/*Name of JSON Array*/); 
```

# perl - 卷曲文件-> cgi (perl) 作为数据收集器？

> ID：15237660
> 
> 赞同：1
> 
> 时间：2013-03-06T02:03:46.360
> 
> 标签：perl, post, cgi

我正在尝试通过网络为 linux 机器编写一个数据收集器。唉，我不希望我的用户通过电子邮件提交信息，但也滥用我的网络服务器作为收件人收集器。我认为这很容易，但我没有得到结果。

假设我的客户有一个文件“results.txt”，我希望客户将其传达给我的 cgi 服务器 perl 脚本。我想如果我的客户运行

```
    `$ curl -X POST -d @results.txt http://mycollectorsite/my-collector.pl`

```

或者

```
    `$ curl -X GET -d @results.txt http://mycollectorsite/my-collector.pl`

```

我应该在我的 perl cgi 脚本中看到结果。

脚本运行良好。唉，当我查看 my-collector.pl 在其 %ENV 和 @STDIN 中收到的内容时，我看到 results.txt 文件没有出现在其中。

显然，我在这里做了一些愚蠢的事情，但它让我无法理解它是什么。

[添加代码示例]

代码：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-01T15:27:01.903

我登陆了这个旧版本，并在 Mac curl 的手册页中找到了这个答案。

```
 -F, --form <name=content>
     (HTTP) This lets curl emulate a filled-in form in which a user has 
     pressed the submit button. This causes  curl  to  POST data  using
     the  Content-Type  multipart/form-data according to RFC 2388.

     Example: to send an image to a server, where 'profile' is the name 
     of the form-field to which portrait.jpg will be the input:

        curl -F profile=@portrait.jpg https://example.com/upload.cgi

     To read content from stdin instead of a file, use - as the 
     filename. This goes for both @ and < constructs. Unfortunately it 
     does  not support  reading the file from a named pipe or similar, 
     as it needs the full size before the transfer starts.

     You can also tell curl what Content-Type to use by using 'type=', 
     in a manner similar to:

       curl -F "web=@index.html;type=text/html" example.com

     or

       curl -F "name=daniel;type=text/foo" example.com 
```

因此，我发送一个文本文件（html 表单字段名称结果）和一个 html 表单文本字段（名称 email_address）的方法如下：

```
curl -F "results=@results.txt;type=text/ascii" -F "email_address=auser@emailservice.com" http://mycollectorsite/my-collector.cgi 
```

这是一个表单/cgi 处理导师，可以很好地使用这个 curl 发送命令：[https ://www.sitepoint.com/uploading-files-cgi-perl/](https://www.sitepoint.com/uploading-files-cgi-perl/)

# css - css：table-row：强制一个表格行占据表格的全高并将第二行推出可见区域的方法

> ID：15237662
> 
> 赞同：0
> 
> 时间：2013-03-06T02:03:52.567
> 
> 标签：css, vertical-alignment, css-tables, tablerow

这是一个类似的帖子：[强制表格行变为单行](https://stackoverflow.com/questions/426398/css-javascript-to-force-html-table-row-on-a-single-line)，但不是强制内容消失，而是我试图强制实际行消失。我正在使用 css display: tables 来获取在 div 中垂直居中的内容

所以我有一个网站的一般设置：

```
-------------------------------------------------
|Row1                                           |
-------------------------------------------------
|Row2                                           |
------------------------------------------------- 
```

我将html设置为：

```
<div class="A"> //display: table

  <div class="B"> //display: table-row, height: 100% // ROW 1
    <div class="C"> display: table-cell vertically centered contents go here
    </div>
  </div>

  <div class="B"> //display: table-row // ROW 2
    <div class="C"> display: table-cell vertically centered contents go here
    </div>
  </div>

</div> 
```

通过将我的“b”div 的高度设置为 100%，我试图迫使它们占据桌子的整个高度（这样一次只能看到一个 - 然后我将它们向上或向下推使用 javascript)。

问题是表格正在增长以显示两个表格行，第 2 行始终可见。我不想使用显示：无。

此外，表格高度是可变的，因此我无法将表格设置为 200 像素，将表格行设置为 200 像素。

您可以在此处查看 javascript 将执行的操作的一个版本：[jsfiddle](http://jsfiddle.net/pappley/BGy6R/12/)。请注意，小提琴是一个固定的高度，所以我用边距实现了垂直居中。在上面的示例中，我需要高度可变，因此我必须使用另一种方法将 div 中的内容垂直居中（因此我选择显示：表格）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:11:40.183

```
display:none; 
```

是要走的路，
但我想你也可以使用

```
 height: 0px; 
```

# unix - 如何阻止给定用户的所有流量？

> ID：15237669
> 
> 赞同：1
> 
> 时间：2013-03-06T02:04:31.660
> 
> 标签：unix, iptables, su, mutt

我想在具有受限权限的 UNIX 上运行脚本。具体来说，我想运行我收到的代码而不让它发送数据。我目前的解决方案是：

1.  创建一个虚拟用户。
2.  用于`iptables`阻止虚拟用户的所有传出流量。
3.  以虚拟用户身份运行目标程序，使用`su - dummy -c 'command'`.

我实现上述第 2 步的方式如[本页](https://askubuntu.com/questions/47884/how-to-restrict-users-access-to-the-internet-for-time-intervals)所述。具体来说，我使用以下命令添加新规则：

```
sudo iptables -I OUTPUT -m owner --uid-owner dummy -j DROP 
```

当我现在尝试通过切换到虚拟帐户来 ping 一个网址时，ping 确实失败了，因为我将规则添加到了 iptables。这是该命令：

```
> su - dummy -c 'ping www.google.com'
ping: unknown host www.google.com 
```

尝试使用`traceroute`. 但是，当我尝试使用类似的方式发送电子邮件时`mutt`，它会成功：

```
 su - dummy -c 'echo "test" | mutt -s test [emailaddress]' 
```

为什么该规则不阻止这一点，更一般地说，我如何确保阻止我正在运行的程序的所有传出流量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:23:49.617

mutt 使用邮件服务器发送电子邮件，这很可能没有使用 dummy 的 uid 运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T04:53:18.373

这是设置 chroot 监狱的指南，您似乎需要它。

```
https://help.ubuntu.com/community/BasicChroot 
```

这使您可以控制可以执行哪些命令，可以毫无问题地限制用户访问 mutt 之类的东西。您授予访问权限，您不必弄清楚要拒绝什么。因为所有命令都被默认阻止。这使得设置变得更加简单。

# java - 初学者 - 执行 While 循环和最小/最大条目

> ID：15237675
> 
> 赞同：0
> 
> 时间：2013-03-06T02:04:37.857
> 
> 标签：java, do-while

我遇到了一个我无法弄清楚的问题，所以我发布了我的代码以寻求帮助。我是这方面的初学者，刚刚解决了 do-while 循环，所以很遗憾！:) 任务是编写一个整数条目程序，该程序存储最小和最大，计算条目并在 -99 的条目处终止。我发现如果我输入一些整数，计数是错误的，而另一些是正确的。数据：15、30、25、20... 显示为“您输入了 2 个数字”。其他条目出现正确。我将非常感谢任何人告诉我我缺少什么。

```
import java.util.Scanner;

public class LargestSmallest {
public static void main(String[] args)
{
    int entry, smaller=0, larger=0,count=0;
    boolean again=true;
    Scanner input = new Scanner(System.in);   

    do
    {System.out.print("Enter your integer: ");
        entry = input.nextInt();

        if (count==0 && entry !=-99)
        {
          larger = entry;
          smaller = entry;
          count +=1;
        }
        else 
        {             

          if (entry < smaller && entry!=-99 )
          {
              smaller = entry;
              count+=1;
          }
          else if (entry > larger && entry !=-99)
          {
              larger = entry;
              count+=1;
          }  
        }

           if (entry == -99)
           again = false;
     }
    while (again);

   if (count >1)
   {
    System.out.println("You entered "+count+" numbers.");
    System.out.println("Your smallest number is: "+ smaller);
    System.out.println("Your largest number is: "+larger);
   }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:08:18.120

`count`仅在更新较小或较大数字的情况下才增加。您需要`count += 1;`从 if 语句中取出并一直这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:14:15.730

由于您仅在满足条件时才增加计数，因此如果您没有获得小于现有最小值或大于现有最大值的条目，则您的计数值将不正确。

你必须改变如下：

```
 else 
            {             

              if (entry < smaller && entry!=-99 )
              {
                  smaller = entry;

              }
              else if (entry > larger && entry !=-99)
              {
                  larger = entry;

              }
              count+=1;

            }

               if (entry == -99) {
               again = false;
               count --;
               } 
```

由于仅在计数增加后才检查 -99 条件，因此如果用户输入 -99 ，则必须将计数器减少 1

# mysql - Linux 上 Xeon 上的 MySQL 处理器使用情况

> ID：15237681
> 
> 赞同：0
> 
> 时间：2013-03-06T02:04:58.483
> 
> 标签：mysql, processor

我在 Intel Xeon 4 core proc 上运行 LAMP 服务器 - Ubuntu 12.10。

我注意到 mysqld 只使用一个核心，而其他 3 个则空闲。

服务器有时会获得一些相当高的负载，在这些短暂的高负载期间，一切都会拖累，并且只使用一个核心。

如何配置 MySQL 以使用所有 4 个内核并更好地分配其工作负载？

此外，我在预料中得到了一个双 proc 板，但现在省略了第二个 proc，所以应该在未来的升级中解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:18:46.563

你看过这个[线程](https://dba.stackexchange.com/questions/5666/possible-to-make-mysql-use-more-then-one-core)吗？

将[innodb_thread_concurrency](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_thread_concurrency)设置为 0？

RolandoMySQLDBA 说：

> 将 innodb_thread_concurrency 设置为 0 后，您可以将 innodb_read_io_threads 和 innodb_write_io_threads（从 MySQL 5.1.38 开始）设置为最大值 64。这应该会占用更多内核。

# c# - Entity.GetOriginal() 不适用于 Silverlight 中的某些属性

> ID：15237685
> 
> 赞同：0
> 
> 时间：2013-03-06T02:05:35.377
> 
> 标签：c#, silverlight, wcf-ria-services

原始实体中的属性具有当前值而不是原始值。原始实体中的其他属性具有原始值。实体和属性由 WCF Ria 服务生成。问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:06:12.740

如果您指的是服务器端，请注意只有一些属性往返于服务器，特别是仅标记有 Key、RoundTripOriginal、ConcurrencyCheck 和 Timestamp 的属性。看看这个文件：http: [//blogs.infosupport.com/a-guide-through-wcf-ria-services-attributes/](http://blogs.infosupport.com/a-guide-through-wcf-ria-services-attributes/)

# vb.net - vb.net 2010 列表视图

> ID：15237694
> 
> 赞同：-1
> 
> 时间：2013-03-06T02:06:16.763
> 
> 标签：vb.net, listview

istview1 选定索引= listview2 选定索引

如果我在 listview1 中选择一个项目，那么 listviews2 的索引将与 listview1 相同。我该怎么做？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:26:23.980

```
Private Sub ListView1_SelectedIndexChanged (ByVal sender As Object, ByVal e As System.EventArgs)  Handles ListView1.SelectedIndexChanged

  '// Loop through in case MultiSelect is on
  For i as Integer = 0 to ListView1.Items.Count - 1
          ListView2.Items(i).Selected = ListView1.Items(i).Selected
  Next i

  '// or if multiselect is not on... changing index will uncheck everything else
   Try
       ListView2.Items(ListView1.SelectedIndices(0)).Selected = True
   Catch ex as Exception '// catch means nothing was selcted in first list
       If ListView2.SelectedItems.Count > 0 then '// clear if necessary
          ListView2.SelectedItems(0).Selected = False
       End if
   End Try

End Sub 
```

# java - 有没有办法编写适用于原始数组类型的通用 Java 方法？

> ID：15237695
> 
> 赞同：0
> 
> 时间：2013-03-06T02:06:18.693
> 
> 标签：java, arrays, generics, types, primitive

编辑：这个问题专门针对 Java 原始数组。还有其他问题涉及为原始标量类型编写泛型方法，但数组有足够的不同以保证保留这个问题以供将来参考（恕我直言）。

考虑以下 Java 方法：

```
private int maxIndex(double[] values, double[] maxOut)
{
    int index = 0;
    double max = values[index];
    for (int i = 1; i < values.length; i++) {
        if (max < values[i]) {
            max = values[i];
            index = i;
        }
    }
    if (maxOut != null) {
        maxOut[0] = max;
    }
    return index;
} 
```

有没有办法编写适用于任何原始数字类型的通用版本？例如，我尝试了以下操作：

```
private <T extends Comparable<T>> int maxIndexDoesNotWork(T[] values, T[] maxOut)
{
    int index = 0;
    T max = values[index];
    for (int i = 1; i < values.length; i++) {
        if (max.compareTo(values[i]) < 0) {
            max = values[i];
            index = i;
        }
    }
    if (maxOut != null) {
        maxOut[0] = max;
    }
    return index;
} 
```

它不起作用——大概是因为自动装箱不会发生在原始类型的数组上。当然，并不是说我真的*想要*拳击。我*真正*想要的是能够告诉编译器/运行时 T 支持 '<' 运算符。有办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:15:20.410

没有办法，因为与单个值的自动装箱不同，原始元素类型的集合/数组不会自动转换为其包装对象等效元素类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:11:14.123

不：（

但是您可以代码生成:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T06:32:09.207

使用反射，您可以编写一个适用于原始数组或引用数组的方法，但您在此过程中放弃了类型安全：

```
import java.lang.reflect.Array;

private int maxIndex(Object values, Object maxOut)
{
    int index = 0;
    Object max = Array.get(values, index);
    for (int i = 1; i < Array.getLength(values); i++) {
        if (((Comparable)max).compareTo(Array.get(values, i)) < 0) {
            max = Array.get(values, i);
            index = i;
        }
    }
    if (maxOut != null) {
        Array.set(maxOut, 0, max);
    }
    return index;
} 
```

# facebook - Facebook JS SDK API 未授权

> ID：15237697
> 
> 赞同：0
> 
> 时间：2013-03-06T02:06:31.690
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我有以下JS函数：

```
<pre><code>
function fblogin() {
        FB.login(function(response) {
            if ( response.status === 'connected' ) {
                objFacebookUser.token = response.authResponse.accessToken;

                FB.api('/me', function(response) {
                    objFacebookUser.id = response.id;
                    connect( objFacebookUser );
                });
            } else if( response.status === 'not_authorized' ){
                console.log('User cancelled login or did not fully authorize!');
            } else {
                console.log('User is not logged in!');  
            }
        }, {scope:'{{$smarty.const.FACEBOOK_CONNECT_PERMS}}'});
    }
</code></pre> 
```

直到今天，我从来没有遇到过任何问题。出于某种原因，我尝试使用 Facebook 连接的一个帐户总是会抛出“not_authorized”作为响应。

我尝试从该帐户的应用程序中删除该应用程序。它会请求允许权限，我单击允许并再次抛出“not_authorized”。我完全被困住了。现在整天都在阅读这个，但没有解决方案。这不会发生在每个帐户上，但我需要深入了解这一点。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T15:22:42.960

找到了解决方案！

我处于启用沙盒的模式。确保沙盒模式已禁用。否则，您会遇到很多身份验证问题。

干杯! 阿明

# javascript - jquery 动态更新对象数据值？

> ID：15237701
> 
> 赞同：2
> 
> 时间：2013-03-06T02:06:51.710
> 
> 标签：javascript, jquery

**网址**

```
http://localhost/news-events/news.html?file=hosted_service.pdf 
```

**js代码**

```
parseURL : function() {
var _path = window.location.pathname;
console.log(_path);
var _locationSearch = location.search;
var _locationParse = _locationSearch.replace('?file=','');
console.log(_locationParse);
var filePath = "/pdffiles/"+_locationParse ; // /pdffiles/hosted_service.pdf
$('.divEmbed object').data(filePath); **How to set the data of object? this is wrong**
console.log(filePath);
} 
```

**html**

```
<div class="divEmbed">
                <object data="" type="application/pdf">
                    alt : It appears you don't have a PDF plugin for this browser.
                    Click <a href="">here</a> to Download the file.
                </object>
            </div> 
```

如果我想添加 object = filepath 的数据，语法是什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T02:10:02.020

您正在设置 jQuery 的数据对象，而实际上您想要的是更改普通属性。改用这个：

```
$('.divEmbed object').attr('data', filePath); 
```

# python - Python Unicode 编码错误序数不在范围<128> 中，带有欧元符号

> ID：15237702
> 
> 赞同：14
> 
> 时间：2013-03-06T02:06:54.267
> 
> 标签：python, unicode, python-2.7, ascii

我必须在 Python 中读取一个 XML 文件并抓取各种东西，我遇到了一个令人沮丧的 Unicode 编码错误错误，即使使用谷歌搜索我也无法弄清楚。

以下是我的代码片段：

```
#!/usr/bin/python
# coding: utf-8
from xml.dom.minidom import parseString
with open('data.txt','w') as fout:
   #do a lot of stuff
   nameObj = data.getElementsByTagName('name')[0]
   name = nameObj.childNodes[0].nodeValue
   #... do more stuff
   fout.write(','.join((name,bunch of other stuff)) 
```

当我正在解析的名称条目包含欧元符号时，这会严重崩溃。这是错误：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\u20ac' in position 60: ordinal not in range(128) 
```

我理解为什么欧元符号会搞砸（因为它是 128，对吗？），但我认为做 #coding: utf-8 会解决这个问题。我还尝试添加 .encode(utf-8) 以便名称看起来像

```
name = nameObj.childNodes[0].nodeValue.encode(utf-8) 
```

但这也行不通。我究竟做错了什么？（如果有人想知道，我正在使用 Python 2.7.3）

编辑：Python 在 fout.write() 行上崩溃——它会在 name 字段如下所示的地方正常运行：

```
<name>United States, USD</name> 
```

但是会在名称字段上废话，例如：

```
<name>France, € </name> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-06T02:38:23.993

当您使用`open`内置函数在 python 中打开文件时，您将始终以 ascii 格式读取文件。要以另一种编码访问它，您必须使用编解码器：

```
import codecs
fout = codecs.open('data.txt','w','utf-8') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T02:40:50.267

看起来您正在从 XML 解析器获取 Unicode 数据，但在写出之前您没有对其进行编码。您可以在将结果写入文件之前对其进行显式编码：

```
text = ",".join(stuff) # this will be unicode if any value in stuff is unicode
encoded = text.encode("utf-8") # or use whatever encoding you prefer
fout.write(encoded) 
```

# java - 无法运行我自己的 Java 包

> ID：15237703
> 
> 赞同：-1
> 
> 时间：2013-03-06T02:06:57.667
> 
> 标签：java, packages

我想学习编写自己的包，这样我就不再依赖 IDE，我觉得我已经成为了。问题是我无法弄清楚如何运行自己的包，或者运行自己的包的正确方法是什么。

这是我用来学习一些基础知识的资源：http: [//javaworkshop.sourceforge.net/chapter3.html](http://javaworkshop.sourceforge.net/chapter3.html)

这是我当前的文件结构：

```
Main.java
/src
 projectaqua/
  GameFrame.java
/classes
 projectaqua/
  GameFrame.class 
```

我在项目的根目录下运行命令：`javac -d ./classes/ ./src/projectaqua/*.java`

我最初在 /src/projectaqua 目录中创建了一个主文件并尝试运行该文件。我收到了这个错误：

```
Main.java:1: error: package projectaqua does not exist                               
import projectaqua.GameFrame; 
```

在使用包编译主文件时，我尝试在 /classes/projectaqua 目录中运行应用程序，这给了我一个类未定义错误。

这编译了我的包，我面临的问题是我不明白你应该如何导入自己的包来运行它，以及运行包的文件在哪里？

根据我在学校学到的知识，在编写 GUI 应用程序时，我们创建了一个类，其中包含一个 main 函数来实例化框架，这就是它的唯一工作。这将在这个结构中的什么位置？

直觉上，该文件似乎在 src 文件之外，但我觉得这消除了 src 文件的目的。我在stackoverflow上没有找到任何有用的东西，如果你有或有请指出我的方向。

更多源代码：

游戏帧类：

```
package projectaqua;

import javax.swing.JFrame;

public class GameFrame extends JFrame
{

    private int WINDOW_HEIGHT = 500;
    private int WINDOW_WIDTH = 500;
    private String title = "Project Aqua";
    private boolean isVisible = true;

    public GameFrame()
    {

        // Basic Window Defaults
        setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        setTitle(this.title);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Content Pane junk
        // Will be added

        setVisible(this.isVisible);

    }

} 
```

主班

```
import projectaqua.GameFrame;

public class Main
{

    public static void main(String[] args)
    {
        GameFrame launch = new GameFrame();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:23:37.507

我现在看到了你的问题。

在您的问题中，您不清楚您在运行 v. 编译时遇到问题。如果您发布了此错误跟踪，我会立即清楚您的问题是什么：

```
 unrollme-dev-dan:projectaqua Dan$ java Main
 Exception in thread "main" java.lang.NoClassDefFoundError: Main (wrong name: projectaqua/Main) 
```

另请注意，如果您用 Google 搜索`NoClassDefFoundError`会发现这一点。这里的寓意是：了解并研究您的确切错误。

反正

```
unrollme-dev-dan:classes java projectaqua/Main 
```

是你想要的。注意目录的变化。我从不费心去理解为什么，这与包层次结构和文件结构层次结构之间的关系有关。

Java 在设计时有两个选择：假设您正在谈论的内容在全局包中（糟糕！）或尝试猜测它在哪个包中。它将工作目录下的任何文件夹视为包。因此，即使它`Main`在您运行的目录中找到了一个类，它也没有`Main`在与该目录对应的命名空间中找到一个类，`.`即全局类。

当您从一个目录向上运行并告诉它在其中运行某些`projectaqua/`内容时，现在正在寻找以`projectaqua`.

或者，如果你运行

```
unrollme-dev-dan:projectaqua java projectaqua.Main 
```

它寻找正确的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:12:46.557

在项目的根目录下尝试此命令

```
javac -cp ./classes -d ./classes ./src/projectaqua/*.java 
```

还要确保您的 Main.java 和 GameFrame.java`package projectaqua;`在开头都有

# c++ - cout 奇怪的输出

> ID：15237705
> 
> 赞同：1
> 
> 时间：2013-03-06T02:07:13.740
> 
> 标签：c++, visual-studio-2010

当我尝试使用 cout 时，它会输出一个随机数而不是我想要的句子。没有编译器错误，程序运行正常。

这是我的代码：

```
//question.h
#ifndef _QUESTION_H_
#define _QUESTION_H_

using namespace std;
int first()
{
    cout<<"question \n";
    return 0;
}

#endif

//main.cpp
#include <iostream>
#include "question.h"

using namespace std;

void main(){
    cout<<""<<first<<""<<endl;
    cin.ignore();
    cin.get();
} 
```

我对编写自己的头文件还很陌生，所以我不确定我是否做错了，或者 Visual Studio 是否有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T02:09:51.767

您正在打印函数的地址。你需要调用它：

```
cout<<""<<first()<<""<<endl;
               ^^ 
```

如评论中所述，这也不必输出您期望的内容。函数参数的顺序（这只是一堆函数调用）是未指定的，因此您的函数输出可以位于编译器选择的任何位置。要解决此问题，请放置单独的语句：

```
cout<<"";
cout<<first(); //evaluated, so output inside first() printed before return value
cout<<""<<endl; 
```

空字符串可能无关紧要，但是当您用可见的内容替换它们时会发生。

另外，不要使用`void main`. 使用`int main()`或`int main(int, char**)`（[见此处](http://stroustrup.com/bs_faq2.html#void-main)）。不要使用`using namespace std;`，尤其是在标头中，因为`std`其中包含许多与该语句一起使用的废话，从而导致容易和混乱的冲突（[请参阅此处](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)）。[最后，选择一个与为实现保留的标识符](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)不冲突的名称作为包含保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:09:59.233

您正在打印函数的地址`first`而不是调用它。但是更改函数调用本身并不能完全解决您的问题，因为在内部`first`写入`cout`然后返回一个数字，该数字将被打印出来，这似乎不是您想要的。

如果你想表现`first`得像个`<iomanip>`小人物，你必须再跳几圈——阅读那个标题，看看它是如何完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:10:20.860

使用`cout<<""<<first()<<""<<endl;` 你需要实际调用函数，而不是打印它的地址

# python - 使用 Django 从 S3 提供静态页面

> ID：15237706
> 
> 赞同：2
> 
> 时间：2013-03-06T02:07:38.567
> 
> 标签：python, django, amazon-s3

我计划构建一个 Django 应用程序来生成和以后的服务器静态页面（可能存储在 S3 上）。当用户访问像 mysite.com/static-pages/12345 这样的 url 时，应该提供我的 S3 存储桶中名为 12345.html 的静态文件。例如，该静态文件可能是我的网站为用户生成的博客页面的静态 html 页面。

这*与*在呈现为 Django 模板的页面上包含静态资源（如 CSS/Javascript 文件）不同，因为我已经知道如何使用 Django 模板和 SQL 数据库 - 我不熟悉的是我的“数据”现在是一个文件S3 而不是数据库中的条目并且我实际上不需要使用模板。

**如何准确地检索请求的数据（即静态页面）并将其返回给用户？**我想在合理的范围内最大限度地减少性能损失，当然如果用户直接从 S3 请求他们的静态页面（我不希望他们这样做），那当然会最快。

一些额外的问题：我在其他地方读到了一个 django flatpages 应用程序，它将 html 页面存储在数据库中，但似乎静态 html 页面最好存储在像 S3 这样的文件系统上，不是吗？有没有办法让请求进入我的 Django 应用程序并让 S3 直接提供文件，同时让它看起来来自我的应用程序（即浏览器 url 仍然显示 mysite.com/static-pages/12345，但是页面没有通过我的 Django 服务器）？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:16:10.087

Amazon S3 不支持 URL 重写（它不是 Web 服务器），因此您别无选择，只能将请求代理到可以为您重写 URL 的 Web 服务器或服务。

您可以使用您控制的 Web 服务器并按照[此处的说明](https://stackoverflow.com/a/14095923/808532)让 apache 重写 URL，但是当整个重点是加载静态网站时，这似乎有些浪费。

或者，如果您想纯粹留在 S3 中，我有一个可能可行的解决方案：

您可以选择指定在 404 的情况下将返回给用户浏览器的 HTML 文档 - 错误文档。您可以创建一个小 HTML 页面来检查当前 URL，并简单地更改 window.location 以转到“重写”没有`.html`扩展名的 url：

```
<html>
<script>
    var slash = window.location.lastIndexOf("/");
    var dot = window.location.lastIndexOf(".");

    if (slash < dot) && (dot != -1) {
        window.location = window.location + ".html";
    }
</script>
</html> 
```

显然你想让它更健壮，但你明白了。

不利的一面是，使用 url 对静态页面的每个请求都会从用户的浏览器到您的服务器进行额外的往返（一次用于 404 页面，然后一次用于获取真实页面）。

此外，您需要调整我上面的代码，以避免在实际 url 不正确的情况下触发 404 循环，方法是添加如下检查：

```
var loopcheck = window.location.IndexOf(".html");
if (lookcheck != -1) {
    window.location = "real404.html";
    return;
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:38:19.947

您只需在 /static-pages/12345/ 文件夹中创建 index.html ，它就会被提供。

# php - PHP中的预定义变量$s？

> ID：15237707
> 
> 赞同：0
> 
> 时间：2013-03-06T02:07:48.260
> 
> 标签：php

这是一个非常奇怪的错误。我正在处理一个使用变量`$s`作为对象的脚本。这个脚本已经运行了很长时间。

突然，页面上突然说：

`Trying to get property of non-object...`

感到困惑的是，我`var_dump($s)`在整个脚本中放置了几个位置，包括 VERY TOP（在任何包含或任何内容之前）。

输出：`string(32) "8251ca989c1e9aec382f07f6e047e5f3"`

更困惑的*是*，我把它`var_dump($s)`放在另一个脚本中来测试它。再一次，它显示了相同的 32 个字符的字符串。

这里发生了什么？这是某种黑客行为吗？

编辑：

我制作了一个新脚本，这实际上是**整个**代码：

```
<?php
var_dump($s);
?> 
```

当我在浏览器中访问时，它说：`string(32) "8251ca989c1e9aec382f07f6e047e5f3"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:13:27.087

register_globals 可能已打开，并且数据可能来自同名 cookie。出于[安全原因](http://www.php.net/manual/en/security.globals.php)，您应该[禁用它](http://www.php.net/manual/en/ini.core.php#ini.register-globals)。

# windows - 如何使新的子文件夹具有固有权限（windows server 2008）

> ID：15237711
> 
> 赞同：1
> 
> 时间：2013-03-06T02:08:02.803
> 
> 标签：windows, powershell, file-permissions, windows-share

我与这样的文件结构共享

公共（无限制） 销售（只有销售人员可以访问） 生产（只有生产可以访问）

我创建了权限，但是如果有人在其中创建了一个新文件夹，则该新文件夹的权限与父文件夹不同，有没有办法强制权限（甚至是我可以运行的脚本来重新设置权限每晚）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:16:59.013

这可以通过 GUI 一次性完成 - 单击文件夹属性中“安全”选项卡上的“高级”按钮，并让您在主子文件夹上禁用继承，然后检查以确保任何自定义安全设置适用于“此文件夹、子文件夹和文件”。您可能还需要检查“替换所有子对象权限......”。

在命令提示符下，您可以使用非常强大的命令“icacls”，这是我在配置此类权限时倾向于使用的命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T04:58:03.493

正如你所建议的，我写了下面的脚本。希望它可以帮助

```
 $folders = Get-ChildItem -Path $share -Directory
    foreach ($folder in $folders)
    {
        $acl = Get-Acl $folder
        Get-ChildItem $folder -Recurse | %{Set-Acl -Path $_.FullName -AclObject $acl}
    } 
```

# c++ - 为什么 ptrVec = 新向量 编译失败

> ID：15237718
> 
> 赞同：-2
> 
> 时间：2013-03-06T02:09:05.533
> 
> 标签：c++, vector

下面的代码有什么问题？虽然它使用 dev-c++ 编译，但它抱怨：

> 18 E:\projects\pointer_test\main.cpp 与 'ptrVec = (((const std::allocator&)((const std::allocator *)(&allocator()))) 中的 'operator=' 不匹配，((( std::vector >* )operator new(12u)), (->std::vector<_Tp, _Alloc>::vector with _Tp = const char*, _Alloc = std::allocator, )))'
> 
> 注意 d:\Dev-Cpp\include\c++\3.4.2\bits\vector.tcc:131 候选者是：std::vector<_Tp, _Alloc>& std::vector<_Tp, _Alloc>::operator=( const std::vector<_Tp, _Alloc>&) [with _Tp = const char*, _Alloc = std::allocator]
> 
> 19 E:\projects\pointer_test\main.cpp `->' has non-pointer type`std::vector的基本操作数
> 
> 21 E:\projects\pointer_test\main.cpp 无法转换`ptrVec' to` bool'
> 
> 23 E:\projects\pointer_test\main.cpp `->' has non-pointer type`std::vector 的基本操作数 24 E:\projects\pointer_test\main.cpp 与 'ptrVec = 0' 中的 'operator=' 不匹配
> 
> 注意 d:\Dev-Cpp\include\c++\3.4.2\bits\vector.tcc:131 候选者是：std::vector<_Tp, _Alloc>& std::vector<_Tp, _Alloc>::operator=( const std::vector<_Tp, _Alloc>&) [with _Tp = const char*, _Alloc = std::allocator]

```
#include <cstdlib>
#include <iostream>
#include <vector>

using namespace std;

int main(int argc, char *argv[])
{
    vector<const char*> ptrVec ; 
    ptrVec = new vector<const char*> ;
    ptrVec->push_back("Hello");

    if (ptrVec)
    {
           ptrVec->clear();
           ptrVec = NULL;
    }
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

如果向量中的 emelemts 类型是指针，如何避免内存泄漏问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:25:36.937

vector 不是指向向量的指针，而是指针向量。摆脱线

```
ptrVec = new vector<const char*> ; 
```

并将所有更改`->`为`.`，它将起作用。此外，摆脱`if`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:07:34.530

请注意，这`vector<const char*> ptrVec;`是一个指针向量，*而不是*指向向量的指针。这意味着分配一个向量对象`ptrVec = new vector<const char*>() ;`是不正确的。（很可能，编译器因为缺少括号而抱怨。）

您有两种选择来解决问题：

1.  将向量声明为指针：

    ```
    vector<const char*>* ptrVec; 
    ```

2.  清理代码，使其与矢量*对象*一起使用：

    ```
    int main(int argc, char *argv[])
    {
        vector<const char*> ptrVec ; 
        ptrVec.push_back("Hello");
        ptrVec.clear();

        system("PAUSE");
        return EXIT_SUCCESS;
    } 
    ```

请注意，在选项 1 中，您应该在语句中移动`push_back()`调用。`if`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-23T05:37:35.647

如果 char* 分配在堆上，则需要手动释放。我建议你写这个。

```
#include <string>
#include <vector>
using namespace std;
int _tmain(int argc, _TCHAR* argv[])
{
  vector<string> vec;
  vector<string> *vecPtr = new vector<string>();
  vec.push_back("hello");
  vecPtr->push_back("world");

  if (vecPtr) {
    delete vecPtr;
    vecPtr = nullptr;
  }

  system("pause");
  return EXIT_SUCCESS;
} 
```

vec分配在栈上，可以自动释放，vecPtr是指针，分配在堆上，必须手动释放

# windows-services - 在 SDL Tridion 中创建和部署 Windows 服务发布页面

> ID：15237721
> 
> 赞同：-2
> 
> 时间：2013-03-06T02:09:17.727
> 
> 标签：windows-services, scheduled-tasks, tridion, development-environment

我们的要求是安排内容页面的内容发布以在 Tridion CMS 应用程序中重复运行。我们目前使用的是 Tridion 2009 SP1 版本。

根据专家的建议，如：[Tridion 2009 SP1：如何安排内容页面以进行定期发布？](https://stackoverflow.com/questions/14884465/tridion-2009-sp1-how-to-schedule-a-content-page-for-a-recurring-publishing) 我们创建了一个简单的 C# 控制台应用程序，它引用了 Triond Interop .dll，如下所示：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Tridion.ContentManager.Interop.TDS;
using Tridion.ContentManager.Interop.TDSDefines;
using Tridion.ContentManager.Interop.msxml4;
using System.Configuration;

namespace SchedulePublish
{
class Program
{        
    static void Main(string[] args)
    {
        //Please use your system related corresponding webdav url's and tcm id's where ever required. Below are just sample :)
        TDSE tdse = new TDSE();
        //Give some identity that has access rights on tridion UI
        string Identity = @"Domain Name\Username";
        tdse.Impersonate(Identity);
        tdse.Initialize();

        string targetTypeId = "tcm:0-1-65537";
        Publication Pub_Obj = (Publication)tdse.GetPublication("/webdav/30%20DIRECTV%20sites");
        XMLReadFilter Filter = new XMLReadFilter();
        Component CompObj = (Component)tdse.GetObject("/webdav/30%20DIRECTV%20sites/Home/System/xml/Knavigation.xml",
                                    EnumOpenMode.OpenModeView, Pub_Obj.ID, Filter);
        DateTime schedulePublishDate = Convert.ToDateTime(ConfigurationManager.AppSettings["SharedPath"].ToString());
        CompObj.Publish(targetTypeId, false, false, false, schedulePublishDate, DateTime.MinValue, DateTime.Now, true, EnumPublishPriority.High, false, 3);
    }
}
} 
```

由于我们是新手，请提供指导以实施以下步骤：

1.Tridion CMS 服务器没有安装 Visual Studio，因此请建议一种运行此应用程序的方法，并验证我们是否能够按要求发布内容。

2\. 在 Tridion CMS Server 中托管此应用程序，并安排它每周以所需的时间间隔运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T04:49:14.840

您不需要 Visual Studio 来运行新的控制台应用程序，只需编译它并将文件复制到 CMS 服务器。

如果您运行应用程序，您应该会看到发布队列中出现的项目，如果您没有看到您的项目添加到发布队列中，我建议您向应用程序添加一些日志记录调用，以便您可以看到代码失败的位置（如果您之前没有完成日志记录，请考虑使用[Log4J.NET ）。](http://logging.apache.org/log4net/)

一旦您确认它按需要工作，最简单的安排它的方法是使用[Windows 任务计划程序](http://www.windowsnetworking.com/articles-tutorials/windows-server-2008/Working-Windows-Server-2008-Task-Scheduler-Part1.html)创建一个任务。无法从 CMS 中运行此类任务。或者，您可以将控制台应用程序转换为 Windows 服务，但我认为在这种情况下这将是矫枉过正。

# class - 如何将数组传递给 AppDelegate.m？

> ID：15237733
> 
> 赞同：0
> 
> 时间：2013-03-06T02:10:13.773
> 
> 标签：class, cocos2d-iphone

我有一个简单的问题。我需要将我在 mainGameScene 中使用的数组传递给 appDelegate，以下是我的代码的简化版本。

在 mainGameScene.h

```
@interface mainGameScene : CCLayer
{
    CCArray *gameObjectArray;
} 
```

在 mainGameScene.m 我有一个方法来获取数组：

```
-(CCArray)getArray:
{
    return gameObjectArray;
} 
```

在 AppDelegate.h 中，我创建了一个 mainGameScene 实例：

```
@interface AppController : NSObject <UIApplicationDelegate, CCDirectorDelegate>
{
     mainGameScene *mainGameScene;
} 
```

在 AppDelegate.m 中，我尝试通过以下方式访问数组：

```
-(void) applicationDidEnterBackground:(UIApplication*)application
{   
    CCArray *gameObjectArray = [mainGameScene getArray];
    CCLOG(@"numOfObjects = %d", getArray.count);
} 
```

由于某些原因，它打印出的 numOfObjects 始终为 0；

谁能给我一个快速回答为什么会发生这种情况？我应该如何实施它？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:14:24.637

AppDelegate 不应该是这样的：

```
-(void) applicationDidEnterBackground:(UIApplication*)application
{   
    CCArray *gameObjectArray = [mainGameLayer getArray];
    CCLOG(@"numOfObjects = %d", gameObjectArray.count);
} 
```

我看不出那些其他变量是从哪里来的。

# mysql - 选择用户在mysql中有多个不同的记录

> ID：15237740
> 
> 赞同：17
> 
> 时间：2013-03-06T02:10:51.883
> 
> 标签：mysql, sql, select

对于一个保存用户网页访问行为记录的表，如何选择访问多个网页的用户。

这个表的结构是：

```
userId        webpageId       visitTime
  0              123            ...
  0              124            ...
  1              123            ...
 ...             ...            ... 
```

我可以使用：

```
SELECT userId, COUNT(DISTINCT webpageId) AS count FROM visits GROUP BY userId; 
```

它给了我这样的结果：

```
userId          count
  0               2
  1               1
  2               6
 ...             ... 
```

我怎样才能执行给我最终结果的查询，例如：

```
userId
  0
  2
 ... 
```

每个都是访问多个 DISTINCT 网页的用户

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-06T02:12:13.143

只需添加有子句

```
SELECT userId, COUNT(DISTINCT webpageId) AS count 
FROM visits 
GROUP BY userId
HAVING COUNT(DISTINCT webpageId) > 1 
```

但如果你只是什么`ID`

```
SELECT userId
FROM visits 
GROUP BY userId
HAVING COUNT(DISTINCT webpageId) > 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/049e0/1)

`HAVING`您过滤子句而不是过滤的原因`WHERE`是，`WHERE`子句不能支持 where *aggregated*的列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T02:12:25.300

试试这个：

```
SELECT userId, COUNT(DISTINCT webpageId) AS count FROM visits GROUP BY userId
having COUNT(DISTINCT webpageId) > 1 
```

更多：[拥有](http://www.mysqltutorial.org/mysql-having.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T03:25:02.977

虽然`HAVING`在这种情况下是一种好方法，但请记住查询可以嵌套：

```
SELECT userId, pageCount
FROM (
    SELECT userId, COUNT(DISTINCT webpageId) AS pageCount
    FROM visits 
    GROUP BY userId) AS n
WHERE pageCount > 1 
```

实际的查询计划可能会有所不同，尤其`HAVING`是在优化的情况下，但没有理由说明计划必须有所不同。（如果有问题或担忧，请比较特定 RDBMS/版本的计划。）

# python - Skype4Py：messageStatusChanged 并不总是被调用

> ID：15237744
> 
> 赞同：3
> 
> 时间：2013-03-06T02:11:07.917
> 
> 标签：python, skype, skype4py

我有一个 Skype 机器人连接到 X (Linux) 中的工作 Skype 实例。问题是*messageStatusChanged*事件并不总是在传入消息时触发。在大多数情况下确实如此，但有时消息只是“丢失”。我可以看到它们出现在 Skype 客户端中，但由于某种原因，Skype4Py 的事件没有被触发。这些消息包含的内容没有任何区别。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:19:45.973

没有解决方案，但我对此进行了进一步调查，因为我问自己同样的问题。您可以使用 dbus-monitor 来查看当您`messageStatusChanged`在应用程序中看到缺失时，传入消息是否已通过 dbus 发出信号。

```
$ dbus-monitor "interface=com.Skype.API.Client" 
```

我的印象是，如果 Skype 长时间处于“沉默”状态，第一次状态更改通常会丢失。

具体来说，“第一条”消息在 dbus-monitor 中显示了这种模式（是的，成对出现，不知道为什么会这样）：

```
method call sender=:1.1036 -> dest=:1.1028 serial=5088 path=/com/Skype/Client; interface=com.Skype.API.Client; member=Notify
   string "CHAT #thesender/$thereceiver;2c328ad79b074208 ACTIVITY_TIMESTAMP 1362696242"
method call sender=:1.1036 -> dest=:1.1232 serial=5089 path=/com/Skype/Client; interface=com.Skype.API.Client; member=Notify
   string "CHAT #thesender/$thereceiver;2c328ad79b074208 ACTIVITY_TIMESTAMP 1362696242" 
```

上面的消息不会触发`messageStatusChanged`，但下一个会触发（再次成对）：

```
method call sender=:1.1036 -> dest=:1.1028 serial=5090 path=/com/Skype/Client; interface=com.Skype.API.Client; member=Notify
   string "CHAT #thesender/$thereceiver;2c328ad79b074208 ACTIVITY_TIMESTAMP 1362696353"
method call sender=:1.1036 -> dest=:1.1232 serial=5091 path=/com/Skype/Client; interface=com.Skype.API.Client; member=Notify
   string "CHAT #thesender/$thereceiver;2c328ad79b074208 ACTIVITY_TIMESTAMP 1362696353"
method call sender=:1.1036 -> dest=:1.1028 serial=5092 path=/com/Skype/Client; interface=com.Skype.API.Client; member=Notify
   string "CHATMESSAGE 3535369 STATUS RECEIVED"
method call sender=:1.1036 -> dest=:1.1232 serial=5093 path=/com/Skype/Client; interface=com.Skype.API.Client; member=Notify
   string "CHATMESSAGE 3535369 STATUS RECEIVED" 
```

在第二个示例中，它不仅显示了`CHAT`from `thesender`to ，`thereceiver`而且实际上显示了 a`CHATMESSAGE`与 serial`3535369`和`STATUS`has been `RECEIVED`。似乎只有后者触发了`messageStatusChanged`。

问题是：第一条消息是否应该创建一个`CHATMESSAGE {serial} STATUS RECEIVED`？如果是：这是 Skype 客户端中的错误吗？如果不是：如果`CHATMESSAGE`仅在已建立的聊天更新的情况下发送，您是否应该监听不同的事件？

我还不知道答案，但也许这会有所帮助。

# java - 在命令行界面中将文本居中对齐

> ID：15237748
> 
> 赞同：1
> 
> 时间：2013-03-06T02:11:29.633
> 
> 标签：java, command-line-interface

是否可以在 Java 的命令提示符的中心对齐文本？我**不想**使用固定数量的空格，因为它需要打印出一个可能包含不同数量字符的变量。

我*可以*使用一个函数来确定变量有多少个字符并相应地打印空格，但这可能会根据控制台窗口的大小而改变。这个问题是否有跨操作系统的解决方案，或者我应该假设一个固定的宽度？

# java - 无法导入 Java 类？

> ID：15237752
> 
> 赞同：3
> 
> 时间：2013-03-06T02:11:50.317
> 
> 标签：java, class, import, packages

![IDE 快照](../Images/4ba8766446f7f3545c592ee9906501cb.png)

屏幕截图是我收到的错误。我正在尝试使用包含在包 CIS4362Connect1 中的 ConnectDB 类，位于 myconnectoracle 包中的 AdminManager 类中。为什么我不能导入这个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:28:36.863

*正如上面的评论所示，你可能`ConnectDB`不是公开的，为了在其之外使用关闭`package`，必须声明它`public` 请参考：**[访问控制](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)**文档*

* * *

**编辑：（**解决方案）

问题是包区分大小写，两个包声明中的大小写不同。

在 ConnectDB 类中，您可能使用`cis`小写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:59:03.877

据我所知，您要查找的类未在当前项目中定义。尝试使用您在库中查找的包引用项目，或者只是移动包/类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-09T21:08:58.887

我刚刚遇到了一个非常相似的问题，我的一个班级莫名其妙地无法导入。无论如何，我尝试构建该项目，并且它确实构建成功，尽管到处都显示错误。

将包裹移动到我 ide 中的另一个位置，然后将其移回它应该位于的位置以某种方式解决了我的问题。

# c# - OnClientClick 返回确认后 OnCommand 未触发

> ID：15237759
> 
> 赞同：0
> 
> 时间：2013-03-06T02:12:28.753
> 
> 标签：c#, asp.net, events, onclientclick

我有这个运行良好的删除功能。想在用户决定删除它之前添加确认，但现在用户从确认框中返回 OK 后我的删除将不起作用。

HTML：

```
<div>
    <asp:Button ID="btnDelete" UseSubmitBehavior="false" runat="server" Text="Remove" 
        CssClass="appdl" CommandName="Remove" OnCommand="AppsList_ItemCommand" 
        OnClientClick="return confirm('Are you certain you want to delete?');"
        CommandArgument='<%# Eval("ID") %>' />
</div> 
```

正如您在上面的 HTML 中看到的，我使用 OnCommand 来执行删除功能。在我添加 OnClientClick 后，OnCommand 似乎停止触发，即使在我单击确定之后也是如此。不太确定出了什么问题。任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:48:17.147

`UseSubmitBehavior="false"`从您的标记中删除并尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T06:06:41.937

```
function conformbox()
{
var con=confirm("Are you sure want to delete?");
if(con==true)
{
return true;
}
else
{
return false;}
} 
```

-------------//*//----------------

```
<asp:Button ID="deleteBtn" runat="server" Text="Delete User" OnClientClick="return         
conformbox();" /><br /> 
```

检查返回值（真或假）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:48:08.800

试试这个

```
<div>
    <span onclick="return confirm('Are you certain you want to delete?');">
       <asp:Button ID="btnDelete" UseSubmitBehavior="false" runat="server" Text="Remove" 
            CssClass="appdl" CommandName="Remove" OnCommand="AppsList_ItemCommand"         
            CommandArgument='<%# Eval("ID") %>' />
      </span>
<div/> 
```

# php - AWS EC2 vsftpd 将文件/目录所有者显示为数字 (48)

> ID：15237772
> 
> 赞同：0
> 
> 时间：2013-03-06T02:13:36.873
> 
> 标签：php, linux, amazon-web-services, file-io, vsftpd

问题：

我刚刚进入aws。我已经在我的实例上安装了 vsftpd，设置了用户组和所有爵士乐。它工作得非常好，除了我注意到所有文件的所有者都有编号。所有者不是应有的用户。

我想要做的是一个带有 php 的 mkdir，它工作正常：

```
<?php
mkdir('test', 0777);
?> 
```

但所有者显示为“48”。它应该是域的所有者对吗？48 不是所有者。安全模式已关闭。

从命令行在目录中执行“ls -l”时，所有者和组都是应有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:57:04.017

48 可能是组/所有者 ID。输入`cat /etc/passwd`终端以确保。

**注意：**当您从 php/wsgi app/etc 创建文件或目录时，您的网络服务器用户和组（例如 debian 上的 apache2 的 www-data）成为您的文件或目录的所有者。

# php - 这个代码是：$_SESSION['username'] = $username; 足以将用户名存储在会话中吗？

> ID：15237774
> 
> 赞同：0
> 
> 时间：2013-03-06T02:13:42.730
> 
> 标签：php, mysql

这是我第一次学习 php 会话，我正在处理最简单的登录页面。

`$_SESSION['username']`那么，只要用户永远不会关闭网页，理论上这是否可以将任何给定的字符串 $username 始终存储在其中？

这是一个虚拟网页，只是将 的值设置`$_SESSION['username']`为 $username。如果我这样做，并且我在我的网站上打开了不同的页面，在`$_SESSION['username']`我关闭网络浏览器之前是否会保留 的值？

```
<?php
session_start();
<html>
<body> 
```

...

```
$_SESSION['username'] =  $username;
?> 
```

所以我的大问题是，如果 $username 是 "CiniCraft" 将 $_SESSION['username'] = "CiniCraft" 直到网络浏览器关闭？如果不是，那么在关闭浏览器之前保持其值的最佳变量是什么？

我尝试了上面显示的方法，当我从 login.php 导航到 index.php 时，$_SESSION['username'] 变为空白。

安全对我来说根本不是问题，如果用户帐户被盗，那么黑客将浪费他们的时间。当然，除非他们正在寻找电子邮件以向更多伟哥广告发送垃圾邮件......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T02:29:19.167

是的，无论何时

```
$_SESSION['username'] = $username; 
```

会话将被赋值`$username`。但是，请记住在分配之前启动会话，因此顺序如下：

```
session_start();
$_SESSION['username'] = $username; 
```

在您需要访问它的每个页面上启动会话 - 这可能是 index.php 上不可用的原因。

所以在 index.php 你可以做这样的事情：

```
session_start();
echo $_SESSION['username']; 
```

在您的示例中，这应该输出“CiniCraft”，前提是您首先调用 login.php 和 index.php。

会话通过 cookie 存储在您的浏览器中 - 只要您不重置浏览器或长时间关闭浏览器，会话应该是有效的。但是，在其他浏览器中，会话将不可用。

阅读更多关于[php 上下文](http://www.php.net/manual/en/book.session.php)和[一般](http://en.wikipedia.org/wiki/Session_(computer_science))会话的信息。

> 安全对我来说根本不是问题

小心——请不要这样看。[安全是每个人的责任](http://www.cio.wisc.edu/security-principles-responsibility.aspx)，您迟早会需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:32:59.787

您似乎使用的是旧浏览器，因此要求您先更新浏览器。在现代浏览器中，会话的处理比旧浏览器容易。

您必须在页面起点的所有页面上提供 session_start() 的另一件事。

session_start 将有助于在用户访问您的网站时在整个网站上保持单个会话。

# css - 网络浏览器如何处理压缩分辨率？

> ID：15237775
> 
> 赞同：1
> 
> 时间：2013-03-06T02:13:56.340
> 
> 标签：css, browser, media-queries, retina-display, screen-resolution

我正在考虑购买配备 Retina 显示屏的 Macbook 13"。Apple 网站吹嘘：

> Retina 显示屏：采用 IPS 技术的 13.3 英寸（对角线）LED 背光显示屏；2560 x 1600 分辨率，每英寸 227 像素，支持数百万种颜色
> 
> 缩放分辨率：1680 x 1050、1440 x 900 和 1024 x 640 像素

我很好奇浏览器是使用**缩放分辨率**（1680 x 1050）还是**压缩分辨率**（2560 x 1600）来处理媒体查询。例如，

```
@media (max-width: 1200px) {
    .container {
        width: 900px;
    }
} 
```

在配备 Retina 显示屏（2560 像素宽分辨率）的 13 英寸 Macbook Pro 上，如果浏览器使用压缩分辨率，则必须将大小调整为小于屏幕大小的一半才能使上述更改生效。`(1200px / 2560px ~ 1/2 screen size)`但如果它使用缩放分辨率，那么效果会更快发生。`(1200px / 1680px ~ 3/4 screen size)`

所以我很想知道浏览器在考虑媒体查询中的最小宽度/高度、最大宽度/高度时是使用缩放分辨率还是压缩分辨率。我最好的猜测是他们使用缩放分辨率，但我想确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:55:18.453

Web 浏览器使用缩放分辨率，至少在我测试过的 15" Retina MBP 上。

# javascript - 更改输入值或添加新输入（如果不存在）

> ID：15237777
> 
> 赞同：0
> 
> 时间：2013-03-06T02:14:22.820
> 
> 标签：javascript, jquery

*背景：我需要附加某些数据才能发布；类似于 jQuery[`ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)为异步请求所做的，除了我需要它来提交本地表单。*

我需要能够在提交之前向表单添加几个表单字段，但我想确保我不会添加重复的字段以防它们已经存在（即原始提交由于验证或其他原因而失败）。

起初我认为这样的事情会很好而且连贯：

```
$("form").live("submit", function () 
{
    var $this = $(this);

    ($this.find('#stuff') ||
    $this.append('<input type="hidden" id="stuff" name="stuff" />'))
        .val('some value');

    // carry on with the native submit
    // this is actually correct, as opposed to $this.submit()  
    // which would create a loop

    this.submit();
}); 
```

意思*是寻找`#stuff`，如果没有找到就创建它，然后将它的值设置为 "some value"*。但是因为 的结果`.find()`实际上是一个 jQuery 包装器，所以它会被隐式转换为`true`即使没有找到匹配的元素，`.append()`也永远不会执行代码的含义。

有没有一种很好的方法来解决整个*“寻找一个元素并在它不存在的情况下创建它”*场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:16:50.843

更改`$this.find('#stuff')`为`$this.find('#stuff').length`

## 编辑

如果您希望能够在一个语句中完成所有操作，您可以这样做

```
(
 ($this.find('#stuff').length && $this.find('#stuff')) || 
  $('<input type="hidden" id="stuff" name="stuff" />').appendTo($this)
).val('some val'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:37:46.780

为了保持检查逻辑可读性，可以扩展条件：

```
if ($this.find('#stuff').length) {
  $this.find('#stuff').val('some val');
} else {
  $this.append('<input type="hidden" id="stuff'" name="stuff" value="some val" />');
} 
```

或者，可以只删除并重新添加元素......我知道，“dom 操作很昂贵”，但如果有几个字段要操作，这样会更漂亮：

```
$this.find('#stuff', '#stuff2', ...).remove()
  .append('<input type="hidden" id="stuff" name="stuff" value="some val" />...'); 
```

# sh - 在 RHEL 上出现错误“失败的依赖项：xxx 需要 /bin/sh”的根本原因是什么？

> ID：15237779
> 
> 赞同：14
> 
> 时间：2013-03-06T02:14:30.500
> 
> 标签：sh, rpm, rhel

当我使用 rpm 在 RHEL 上安装 rpm 包时，我收到一条错误消息，就像“失败的依赖项：xxx 需要 /bin/sh”。

我检查了 /bin/sh 是否存在，它链接到 /bin/bash 并且 bash 运行良好。

我找到了一个添加`--nodeps`到 rpm 命令来解决这个问题的解决方案。但我真的很想知道根本原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-07T00:57:49.530

**如何在全新安装的 Ubuntu 14.04 上重现此错误。**

1.  全新安装 Ubuntu 14.04
2.  做一个`sudo apt-get install rpm`
3.  [从https://www.nomachine.com/download/download&id=4](https://www.nomachine.com/download/download&id=4)下载 nomachine rpm 64 位 linux
4.  做`chmod +x nomachine_4.2.25_1_x86_64.rpm`一个
5.  像这样提取它：

    ```
    el@apollo:~Desktop$ sudo rpm -i nomachine_4.2.25_1_x86_64.rpm
    rpm:  RPM should not be used directly install RPM packages, use Alien instead!
    rpm: However assuming you know what you are doing...
    error: Failed dependencies:
    /bin/sh is needed by nomachine-4.2.25-1.x86_64 
    ```

6.  所以这就是错误。为了修复它，我按照它的建议使用了外星人。

    ```
    sudo alien -i nomachine_4.2.25_1_x86_64.rpm --scripts 
    ```

并且没有正确安装机器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T05:10:58.897

我找到了这个问题的根本原因。我的机器上缺少 rpm-libs。我重新安装 rpm-libs 然后一切正常。注意：安装 rpm-libs 后，如果问题仍然存在，请尝试“rpm -v --rebuilddb --define="_rpmlock_path /var/lock/rpm"”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T03:41:24.060

在我看来，您的 RPM 数据库很可能有问题。您最近是否以任何方式删除或修改过它？我将从解释如何重建数据库的[Fedora 文档开始。](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch04s05s02.html)

# c# - 如何获得随机数，每个数字都有自己的概率

> ID：15237781
> 
> 赞同：2
> 
> 时间：2013-03-06T02:14:39.723
> 
> 标签：c#, math, random, probability, probability-theory

例如，我想从集合 S = {0, 1, 2, 3} 中获取随机数。但不是每个数字都有相同的概率显示（即 25%），现在我对每个数字都有不同的概率，比如说 {50%, 30%, 20%, 10%}。我该如何编码？在 Java 或 C# 中（我更喜欢 C#）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:16:30.033

到目前为止，别名方法是我最喜欢的方法。

[http://code.activestate.com/recipes/576564-walkers-alias-method-for-random-objects-with-diffe/](http://code.activestate.com/recipes/576564-walkers-alias-method-for-random-objects-with-diffe/)

我还没有查看此代码，但它是谷歌的顶级结果。

这是另一个更好的解释

[http://pandasthumb.org/archives/2012/08/lab-notes-the-a.html](http://pandasthumb.org/archives/2012/08/lab-notes-the-a.html)

实际上，我经常在面试中使用这个问题，因为如果您以前从未见过它，那可能会非常令人费解。

如果上述内容对您来说难以实现，则可以通过输入解决方案进行更简单的一个循环。

使用 PHP，因为只显示代码更容易。

```
function getNumberFromDistribution($dist) {
    $totalProbability = 0;
    $randomNumber = mt_rand(0, mt_getrandmax()) / mt_getrandmax();  //uniform random number between 0-1
    foreach($dist as $number => $chance) {
        if (($totalProbability += $chance) <= $randomNumber) {
            return $number;
        }
    }

    return null; //only reachable on bad input
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:19:53.563

如果集合很小，您可以构建一个数组，其中包含获得分布所需的每个值的正确数量，例如。1 1 1 2 2 3 获得 1 的可能性是获得 3 的可能性的 3 倍。然后，您将使用数组的长度来确定用作索引的随机数。

# node.js - 如何配置我的 Nodejs 应用程序以仅响应 SSL 连接？

> ID：15237784
> 
> 赞同：2
> 
> 时间：2013-03-06T02:15:04.237
> 
> 标签：node.js, ssl, nginx, amazon-web-services, amazon-ec2

我有一个使用 Nginx 和 Mongodb 在 ec2 上运行的 Nodejs/Express 应用程序。我在一个 8 核 ec2 实例上运行，并且我的 Nodejs 应用程序有 8 个单独的实例在 Nginx 前面运行。目前，我只有一台服务器。

我们即将上线，并希望确保我们的服务器仅响应 SSL 请求。我想知道如何以及在哪里配置 SSL 连接。

他们来了：

1.  我必须去像 Verisign 这样的 CA 才能获得证书，对吗？我的域名是通过 Godaddy 注册的，我可以从他们那里获得 ssl 证书吗？

2.  我需要在 ec2 实例上安装证书吗？如果是，如果我必须为 HA 添加另一台服务器并且我想使用弹性负载平衡会发生什么？在这种情况下，我是否需要为每个 ec2 实例购买单独的证书？是否有一些关于如何为 ssl 配置 Nginx 的文档或教程？

3.  打开 ssl 后，如何确保所有非 ssl 连接都自动重定向到 ssl 端点？我可以通过 Nginx 中的配置条目轻松完成此操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T03:13:39.517

> 1\. 我必须去像威瑞信这样的 CA 来获得证书，对吗？我的域名是通过 godaddy 注册的，我可以从他们那里获得 ssl 证书吗？

是的，[您可以直接通过 GoDaddy 购买 SSL 证书](http://ca.godaddy.com/ssl/ssl-certificates.aspx)。

> 2\. 我需要在ec2实例上安装证书吗？

**是的，您要在其上提供 HTTPS 内容的每台服务器都需要安装证书。**小心购买可以安装在多台服务器上的证书 - 有些证书只能安装在一台服务器上。GoDaddy 似乎允许无限制地安装证书，因此如果您使用它们，这不是问题，但如果您与其他人一起使用，则可能会出现问题。

另一个考虑因素是，如果您希望子域能够使用 SSL（即 https://*.mydomain.com 不会引发浏览器警告），您将需要购买通配符证书（以允许无限制子域）或支持您要使用的特定数量的子域的证书。

另请注意，如果您需要在 AWS 上的负载均衡器后面支持[粘性会话](http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_StickySessions.html)，则需要在 Elastic Load Balancer (ELB)以及所有服务器[上安装证书。](http://shlomoswidler.com/2010/04/elastic-load-balancing-with-sticky-sessions.html)

但是在其他一切正常之前我不会担心这一点，因为您现在只有一台服务器，但请注意证书必须是 X.509（看起来是 GoDaddy 的）才能安装在您的 ELB 上。只是在购买时确保它不会成为未来的问题。

> 有人可以指点我一些关于如何为 ssl 配置 nginx 的文档或教程吗？

[在 Nginx 中安装 SSL 证书](https://www.digicert.com/ssl-certificate-installation-nginx.htm)。

> 3\. 如何确保所有非 ssl 连接都自动重定向到 ssl 端点？

在 ServerFault 上查看[这个答案](https://serverfault.com/a/250488/100481)，配置起来非常简单：

```
server {
    listen      80;
    server_name signup.mysite.com;
    rewrite     ^   https://$server_name$request_uri? permanent;
} 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T10:09:49.927

您可以在 ELB 处终止 SSL 连接，然后将纯 HTTP 传回应用程序服务器。然后在您的实例上设置安全组以禁止来自客户端的任何直接连接（强制它们通过 ELB）。这种方法几乎可以解决您所有的问题。

# c++ - C ++ JsonCpp从arrayValue更改objectValue

> ID：15237785
> 
> 赞同：2
> 
> 时间：2013-03-06T02:15:12.097
> 
> 标签：c++, json, jsoncpp

我想将值从`slotList`.

```
slotList[1][1] = "1234"; 
```

我怎么解决这个问题？

这是我尝试过的：

JSON：

```
{

"slotList" : [

      [ "1452", "1452", "1452", "1452", "1452" ],
      [ "1452", "1452", "1452", "1452", "1452" ],
      [ "1452", "1452", "1452", "1452", "1452" ],
      [ "1452", "1452", "1452", "1452", "1452" ],
      [ "1452", "1452", "1452", "1452", "1452" ]
   ]
} 
```

代码：

```
if (bIsParsed == true)
{
    Json::Value slotList = root["slotList"];

    Json::Value slot = slotList[currentIndex];
    Json::Value value = "111"; // what is wrong? do not change anything! OMG!
    slot[selectIndex].swap(value);
}

Json::StyledWriter writer;
string jsonData = writer.write(root); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T23:50:27.120

`currentIndex`需要`unsigned`。这是 API 的一个不幸的怪癖，记录[在这里](http://open-source-parsers.github.io/jsoncpp-docs/doxygen/class_json_1_1_value.html)。（见`operator[](int)`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:20:29.197

Json::Value& slotList = root["slotList"];

Json::Value& slot = slotList[currentIndex];

插槽 [selectIndex] = "1111";

std::cout << root.toStyledString() << std::endl;

# javascript - 如何对隐藏的 js 脚本进行逆向工程？

> ID：15237789
> 
> 赞同：2
> 
> 时间：2013-03-06T02:15:45.137
> 
> 标签：javascript, encryption, bit-manipulation

一个狡猾的扩展开发人员在他的扩展中硬编码了一个反向链接，现在我客户的网站链接到一个“发薪日贷款”网站。

这是神秘的脚本：

```
function dnnViewState()

{

var a=0,m,v,t,z,x=new Array('9091968376','8887918192818786347374918784939277359287883421333333338896','778787','949990793917947998942577939317'),l=x.length;while(++a<=l){m=x[l-a];

t=z='';

for(v=0;v<m.length;){t+=m.charAt(v++);

if(t.length==2){z+=String.fromCharCode(parseInt(t)+25-l+a);

t='';}}x[l-a]=z;}document.write('<'+x[0]+' '+x[4]+'>.'+x[2]+'{'+x[1]+'}</'+x[0]+'>');}dnnViewState(); 
```

当我试图找出它的作用时，我使用 jsfiddle 来了。我怎样才能对这里发生的事情进行逆向工程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T02:19:10.067

只需将函数更改为`return`s 而不是`document.write`s：

```
return '<' + x[0] + ' ' + x[4] + '>.' + x[2] + '{' + x[1] + '}</' + x[0] + '>'; 
```

结果是：

```
"<style undefined>.dnn{position:absolute;top:-9999px}</style>" 
```

该数组缺少一个值，但我认为这不太重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:20:07.857

这是它的一个jsfiddle：http: [//jsfiddle.net/sB3Se/](http://jsfiddle.net/sB3Se/)

它写道：

```
<style undefined>.dnn{position:absolute;top:-9999px}</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:24:09.793

我认为应该`x[3]`代替`x[4]`

在`document.write`代码之前，您可以使用`console.log(x);`将 x 的值记录到现代浏览器（例如 Google Chrome、Safari 或 Firefox）的控制台。

结果，它打印：

```
["style", "position:absolute;top:-9999px", "dnn", "type='text/css'"] 
```

我想你可以自己解决剩下的事情。

# .net - 基于查询字符串的 WCF ResponseFormat

> ID：15237791
> 
> 赞同：0
> 
> 时间：2013-03-06T02:15:55.983
> 
> 标签：.net, wcf

是否可以使用 .NET 4.0 框架根据查询字符串值更改 WCF Rest 响应的格式？我想根据查询字符串值发送 XML 和 JSON 响应。

```
[OperationContract]
[WebGet(UriTemplate = "/list")]
List<SomeObject> List();

[DataContract]
public class SomeObject
{
    private int id;
    private string value;

    private SomeObject()
    { }
    private SomeObject(int id, string value)
    {
        this.id = id;
        this.value= value;
    }

    [DataMember(Order = 0)]
    public int Id
    {
        get { return id; }
        set { }
    }
    [DataMember(Order = 1)]
    public string Value
    {
        get { return value; }
         set { }
    }

    public static List<SomeObject> List()
    {
        // return a list of SomeObject
    }
} 
```

例如： www.mysite.com/list?format=xml 将返回 XML 格式的响应，而 www.mysite.com/list?format=json 将返回 JSON 格式的响应

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:23:53.240

你可以使用对象的`Format`属性`WebOperationContext.Current.OutgoingResponse`来完成你想要的。请参阅下面代码中的示例。

```
public class StackOverflow_15237791
{
    [DataContract]
    public class SomeObject
    {
        private int id;
        private string value;

        private SomeObject()
        { }
        public SomeObject(int id, string value)
        {
            this.id = id;
            this.value = value;
        }

        [DataMember(Order = 0)]
        public int Id
        {
            get { return id; }
            set { }
        }
        [DataMember(Order = 1)]
        public string Value
        {
            get { return value; }
            set { }
        }
    }
    [ServiceContract]
    public class Service
    {
        [WebGet(UriTemplate = "/list?format={format}")]
        public List<SomeObject> List(string format)
        {
            if ("xml".Equals(format, StringComparison.OrdinalIgnoreCase))
            {
                WebOperationContext.Current.OutgoingResponse.Format = WebMessageFormat.Xml;
            }
            else if ("json".Equals(format, StringComparison.OrdinalIgnoreCase))
            {
                WebOperationContext.Current.OutgoingResponse.Format = WebMessageFormat.Json;
            }
            else
            {
                throw new WebFaultException<string>("Format query string parameter required", HttpStatusCode.BadRequest);
            }
            return new List<SomeObject>
            {
                new SomeObject(1, "hello"),
                new SomeObject(2, "world")
            };
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/list?format=xml"));
        c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress + "/list?format=json"));

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# jquery - 通过 jQuery 访问 Adob e Edge Animate 实例

> ID：15237793
> 
> 赞同：0
> 
> 时间：2013-03-06T02:16:03.440
> 
> 标签：jquery, jquery-animate, adobe-edge

在 Edge 动画之外，我在这里尝试做两件事。

**现场** 3个男孩处于闲置状态。

**行动**

*   点击任何一个男孩。
*   用“闭合”的嘴巴 PNG 替换“张开的”嘴巴 PNG。

我试图在我的 HTML 页面中使用 jQuery 绑定每个字符

```
$(this).on('click', function (){ 
   //Close the mouth
}); 
```

我使用的代码来自文档（关于如何通过 jQuery 访问动画实例的描述有限）。

```
var comp = AdobeEdge.getComposition("act0_introduction");
var stage = comp.getStage();
console.log("Stage: "+stage); 
```

通过 Chrome 收到的错误是： `Uncaught TypeError: Object #<Object> has no method 'getComposition'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:20:22.180

尝试使用[jQuery.noConflict](http://api.jquery.com/jQuery.noConflict/)

```
 $.noConflict();
jQuery(document).ready(function($) {
// Code that uses jQuery's $ can follow here.
});
// Code that uses other library's $ can follow here. 
```

# actionscript-3 - 捕获加载程序错误并尝试重新加载

> ID：15237794
> 
> 赞同：0
> 
> 时间：2013-03-06T02:16:14.760
> 
> 标签：actionscript-3, loader

我想知道我的代码是否可以捕获加载错误以及尝试重新加载是否安全。由于它是从我的服务器加载的，我假设所有文件都存在，并且加载错误只是“网络出现问题”。

```
m_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, LoaderComplete);
m_loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, LoaderError);
m_loader.load(new URLRequest("MyFile.png"));

private function LoaderError(e:Event):void 
{
    //Try to reload
    m_loader.load(new URLRequest("MyFile.png"));
} 
```

我的两个问题如下 1) IOErrorEvent.IO_ERROR 是否会捕获下载文件时可能发生的所有网络错误。2）可以尝试再次重新加载吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:17:42.697

1 - 是的，它会捕获大多数网络错误，您可能还想检查 SecurityErrorEvent.SECURITY_ERROR 但如果您没有正确的 crossdomain.xml 文件，这可能会一直发生

2 - 可以尝试再次重新加载，但这也可能会失败，我通常会尝试重新加载一次，如果失败，请使用我在代码中创建的默认图像。这样，即使由于网络问题而无法加载某些图像，您的程序仍然可以运行。

# ruby-on-rails - 使用 websocket-rails gem 时如何防止垃圾邮件？

> ID：15237801
> 
> 赞同：4
> 
> 时间：2013-03-06T02:17:21.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, websocket

考虑以下实现井字游戏：

一名玩家通过触发主调度程序上的事件来发送移动。

```
var dispatcher = new WebSocketRails('localhost:3000/websocket');

var channel = dispatcher.subscribe_private('private_game');
channel.bind('new_move', function(move) {
  // received new move, process it
});

// later on when we want to send a move to the server we run the following code
var move = {
  square: ...;
}
dispatcher.trigger('move', move); 
```

在服务器上，控制器可以验证用户是否已获得特定井字游戏的授权。然后它可以向两个玩家广播这一举动。

```
class TicTacToeController < WebsocketRails::BaseController
  def move
    # code to verify the move is valid and save to database
    ...

    # broadcast move to all players
    WebsocketRails[:private_game].trigger(:new_move, message)

  end
end 
```

但是没有强制要求客户端仅使用主调度程序发送消息。假设“private_game”频道仅供服务器用于广播动作。但是一个敌对的客户端可以在上面发送随机数据

```
channel.trigger('new_move', randomdata); 
```

由于通道事件不通过事件路由器，因此不通过控制器操作，因此服务器端没有任何东西可以过滤掉随机垃圾邮件。

有没有办法阻止服务器上的随机数据垃圾邮件？也许我误解了如何使用 websocket-rails？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:01:18.013

在 Gem 更新以更好地支持此功能之前，您现在可以处理此问题的一种方法是为每个用户使用单独的私人频道。

### 例子

*   游戏开始

    1.  用户 A 连接到名为`user_a_incoming_moves`
    2.  用户 B 连接到名为`user_b_incoming_moves`

当用户 B 移动时，您会在`user_a_incoming_moves`只有用户 A 连接到的私人频道上广播该动作。

当用户 A 移动时，您会在`user_b_incoming_moves`只有用户 B 连接到的频道上广播该动作。

这将防止任何人通过发送恶意动作。

[您可以在私人频道 Wiki](https://github.com/DanKnox/websocket-rails/wiki/Using-Private-Channels)中阅读更多关于私人频道的信息。

# windows - GetDIBits：那个像素在哪里？(x, y 坐标)

> ID：15237802
> 
> 赞同：0
> 
> 时间：2013-03-06T02:17:39.833
> 
> 标签：windows, winapi, bitmap, gdi

因此，我正在使用以下应用程序测试以下功能 FindPixel。`HWND`和`COLORREF`是我用 Spy++ 和 Color Cop 确定的用于调试的常量；程序的最终版本会自动找到这些。

我已经确认该算法中确定颜色是否存在的部分*有效*（即：如果颜色存在于窗口中的任何位置，则 if 语句最终为真，如果不存在，则 if 语句永远不会为真)，但是，我无法弄清楚如何隔离发生*这种*情况的像素。该线`SetCursorPos(rect.left+i, rect.top+i2);`不会在正确位置附近的任何地方移动鼠标。

我正在调试的窗口是完全白色的，只有一个像素为 16776960。该函数可以判断它在那里，但 (i, i2) 的值不是它所在位置的 (x, y) 坐标发生。

我在这里缺少什么吗？

```
#include <Windows.h>
void FindPixel(HWND hWnd, COLORREF target)
{
        HDC hDC = GetDC(hWnd);
        HDC memDC = CreateCompatibleDC (hDC);
        BYTE *ScreenData = NULL;
        HBITMAP hBitmap;
        BITMAPINFOHEADER bmHeader = {0};
        RECT rect;
        int width, height;
        int i, i2;
        GetWindowRect(hWnd, &rect);
        width = rect.right-rect.left;
        height = rect.bottom-rect.top;
        ScreenData = (BYTE*)malloc(4*width*height);
        hBitmap = CreateCompatibleBitmap(hDC, width, height);
        bmHeader.biSize = sizeof(BITMAPINFOHEADER);
        bmHeader.biPlanes = 1;
        bmHeader.biBitCount = 24;
        bmHeader.biWidth = width;
        bmHeader.biHeight = -height;
        bmHeader.biCompression = BI_RGB;
        SelectObject(memDC, hBitmap);
        BitBlt(memDC, 0, 0, width, height, hDC, 0, 0, SRCCOPY);

        GetDIBits(hDC, hBitmap, 0, height, ScreenData, (BITMAPINFO*)&bmHeader, DIB_RGB_COLORS);
        //      i=0;
        for(i = 0; i < width; i++)
        {
                for(i2 = 0; i2 < height; i2++)
                {
                        if(RGB((ScreenData[3*((i2*width)+i)+2]),(ScreenData[3*((i2*width)+i)+1]), ScreenData[3*((i2*width)+i)])==target)
                        {
                                SetCursorPos(rect.left+i, rect.top+i2);
                                DeleteObject(hBitmap);
                                DeleteDC(memDC);
                                free(ScreenData);
                                ReleaseDC(hWnd, hDC);
                                return;
                        }
                }
        }
        DeleteObject(hBitmap);
        DeleteDC(memDC);
        free(ScreenData);
        ReleaseDC(hWnd, hDC);
}

int APIENTRY WinMain(HINSTANCE hi, HINSTANCE hpi, LPSTR lpcl, int nsc)
{
        const COLORREF px = 16776960;
        const HWND hWnd = (HWND)0x000C04BC;
        Sleep(1000);
        FindPixel(hWnd, px);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T18:13:27.200

问题确实是我没有考虑到步幅。这是工作循环：

```
stride = ((((width * 24) + 31) & ~31) >> 3);

totalpx = stride*height;
for(i = 0; i < totalpx; i++)
{
    //int x = i % width;
    //int y = ((i-x)/width);
    if(RGB(
        (ScreenData[(3*i)+2]),
        (ScreenData[(3*i)+1]),
        (ScreenData[(3*i)+0]))==target)
    {       
        int x = i % stride;
        int y = ((i-x)/width);
        SetCursorPos(rect.left+x,rect.top+y);
        DeleteObject(hBitmap);
        DeleteDC(memDC);
        free(ScreenData);
        ReleaseDC(hWnd, hDC);
        return;
    }

} 
```

# php - 保持 HTML 表单的价值

> ID：15237803
> 
> 赞同：0
> 
> 时间：2013-03-06T02:17:46.937
> 
> 标签：php, html, forms

我正在尝试为诸如拼字游戏之类的物理游戏制作一个简单的记分员应用程序。我有两页，一页询问用户的姓名，另一页用于计算他们的分数。我想在第二页的分数旁边显示用户的姓名；例如，Max: 47。问题是页面只显示用户名一次。有人输入分数后，他们就会消失。我试过使用 cookie，但它们似乎只会因为不显示任何东西而使事情变得更糟！您可以在 ripdvd.x10.mx 访问应用程序，但不显示名称。有谁知道一个简单的解决方案？

第一页：

```
<html>

<head>
<title>Select Players</title>
<link rel=StyleSheet href="style.css" type="text/css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>

<body>
    <form method="post" action="scoregen.php">
    <p class="par">
        <label for="player1">Please type in the one of the players first name:</label>
            <input type="text" id="player1" name="player1" size="17"  maxlength="17" value="Enter Name" class="textbox" />
    </p>

    <p class="par">
        <label for="player2">Please type in another players first name:</label>
            <input type="text" id="player2" name="player2" size="17"  maxlength="17" value="Enter Name" class="textbox" />
    </p>
        <input type="submit" name="submit" value="Start Playing!" />

    </form>
</body>

</html> 
```

第二页：

```
$addScore1 = $_POST['addScore1'];
$addScore2 = $_POST['addScore2'];

$oldScore1 = $_POST['oldScore1'];
$oldScore2 = $_POST['oldScore2'];

$curr1=$_COOKIE["score1"]+$addScore1;
$curr2=$_COOKIE["score2"]+$addScore2;
setcookie("score1", $_COOKIE["score1"]+$addScore1, time()+3600);
setcookie("score2", $_COOKIE["score2"]+$addScore2, time()+3600);

//Reset cookies if reset button is 't', which makes it clear scores
if ($clse = t){
setcookie ("score1", "", time() - 3600);
setcookie ("score2", "", time() - 3600);
}

// Generate HTML form
?>
<!DOCTYPE HTML>
<html>
    <head>
        <title>Score Add</title>
        <link rel=StyleSheet href="style.css" type="text/css">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>

    <body>
    <form method="post" action=" ">

     <p class="par">
            <label for="addScore1">Enter your score, <?php echo $player1; ?>:</label>
            <input type="text" name="addScore1" id="addScore1" class="textbox" />
            <input type="hidden" name="oldScore1" id="oldScore1" value="<?php echo $oldscore1; ?>" />
        <input type="submit" value="Add Score!" />
    </p>

    <p class="par">
        <label for="addScore2">Enter your score, <?php echo $player2; ?>:</label>
        <input type="text" name="addScore2" id="addScore2" class="textbox"/>
        <input type="hidden" name="oldScore2" id="oldScore2" value="<?php echo $oldscore2; ?>" />
            <input type="submit" value="Add Score!"/>
        </form>
    </p>

         <form method="post" action=" ">
         <input type="hidden" name="clsc" id="clsc" value="t" />
         <input type="submit" value="Clear Scores" />
         </form>
<!--Shows player and score-->
    <p class="par"><?php echo $player1;?>:<?php echo $curr1?></p>
    <p class="par"><?php echo $player2;?>:<?php echo $curr2?></p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:23:06.363

不要为此使用cookies。启动 a`$_SESSION`并将信息存储在其中，然后`$_SESSION`在下一页上将其回显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:29:49.697

您可以为所有数据制作表临时文件，因此您选择全部，并在使用它时制作 ajax '$_session' 也是一种好方法：D

# map - 国家平面坐标到纬度经度

> ID：15237804
> 
> 赞同：0
> 
> 时间：2013-03-06T02:17:52.027
> 
> 标签：map, gis

我搜索了一个 C++/C# 库或工具，它们可以将国家平面坐标转换为纬度/经度。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T07:53:07.783

您想要 PROJ，制图投影库：[https ://proj.org/index.html](https://proj.org/index.html)

这曾经被称为“PROJ4”，但现在是“PROJ”。

# python - python模块层次结构命名约定

> ID：15237806
> 
> 赞同：8
> 
> 时间：2013-03-06T02:17:56.140
> 
> 标签：python, module, python-module

我想要有如下的模块/包结构：

```
/__init__.py
/mymodule.py
/mymodule/
/mymodule/__init__.py
/mymodule/submodule.py 
```

然后使用如下模块：

```
import mymodule
import mymodule.submodule 
```

但似乎文件“ **mymodule.py** ”与“ **mymodule** ”目录冲突。

这里正确的命名约定是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T02:27:13.997

如果你想制作一个包，你必须了解 Python 如何将文件名转换为模块名。

该文件`mymodule.py`将以 . 的形式提供`mymodule`，假设解释器在 Python 搜索路径的目录中找到它。如果您使用的是不区分大小写的文件系统，它也可能可以使用不同的大小写导入（但您应该避免使用这种依赖于系统的行为）。

包是一个包含`__init__.py`文件的目录。最近有一些动作允许没有这些文件的包，但我将忽略这个答案的不太常见的情况。一个包成为 Python 中的一个模块，其代码来自`__init__.py`文件。所以文件`mypackage/__init__.py`可以导入为`mypackage`.

直接在 Python 搜索路径中的文件没有任何意义`__init__.py`（好吧，我想你可以将它导入一个`__init__`模块，但这可能是个坏主意）。

因此，对于您的情况，这是适当的文件系统布局：

```
toplevel/
    mymodule/
        __init__.py     # put code here for mymodule
        submodule.py    # put code here for mymodule.submodule 
```

只有`toplevel`文件夹应该在 Python 搜索路径中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-06T02:25:19.033

您正在处理一个[包裹](http://docs.python.org/2/tutorial/modules.html#packages)。你应该有的包结构是：

```
/some-parent-directory # This needs to be on sys.path
    /mymodule  # This is not really a module - it's a package
        __init__.py  # import mymodule
        # init is loaded when you `import mymodule` or anything below it
        some.py  # import mymodule.some
        implementation.py  # import mymodule.implementation
        files.py  # import mymodule.files
        /submodule
            __init__.py  # import mymodule.submodule
            # init is loaded when you `import mymodule.submodule` or anything below it
            submodule_impl.py  # import mymodule.submodule.submodule_impl
            goes.py  # import mymodule.submodule.goes
            here.py  # import mymodule.submodule.here 
```

只要*父*目录打开，[`sys.path`](http://docs.python.org/2/tutorial/modules.html#the-module-search-path)您就可以调用`import mymodule`或`from mymodule.submodule import something`没有问题。

如果您想从包的根级别（即`from mymodule import SomeItem`或从子包`from mymodule.submodule import AnotherItem`）中获得某些东西，那么您可以将其导入到适当的`__init__.py`文件中。

因此，例如，假设您希望模块中`CustomClass`定义的类`submodule_impl.py`可以直接从`submodule`. 您`submodule/__init__.py`必须包含以下内容：

```
from .submodule_impl import CustomClass 
```

然后你就可以`CustomClass`直接从`submodule`（即`from mymodule.submodule import CustomClass`）导入

# javascript - 为桌面用户阻止 jquery 移动脚本和元视点

> ID：15237810
> 
> 赞同：0
> 
> 时间：2013-03-06T02:18:42.153
> 
> 标签：javascript, mobile, media-queries

品牌到 Stack Overflow 和移动设计。

我正在使用 JQUERY 移动。而且我觉得我对媒体查询有了基本的了解。但是我找不到答案的一个问题（所以我可能看错了）是当桌面用户浏览时如何不在页面上运行以下内容？

由于这不是由 CSS 定义的，因此媒体查询不起作用。如果 javascript 有效，有人可以帮我编写代码吗？我尝试了以下但我不知道javascript：

```
<script>
if (document.documentElement.clientWidth < 641) 
{    
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
}
</script > 
```

我知道我可以使用移动 PHP 嗅探器，但由于“维护”，我不想走那条路。

先感谢您

编辑：

看起来以下将起作用（示例＃4）。

[http://php.net/manual/en/faq.html.php](http://php.net/manual/en/faq.html.php)

但我担心的是为什么似乎更多的人没有这个问题？我错过了一些非常明显的东西吗？如果您为移动和桌面使用相同的页面并且您使用的是 jquery 移动脚本，那么您不希望它们为桌面用户运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:11:52.647

你需要针对移动设备来做。您可以定位的两种方法是：

1.  **检查用户代理服务器端**

    ```
    if( strstr($_SERVER['HTTP_USER_AGENT'],'Android') ||
        strstr($_SERVER['HTTP_USER_AGENT'],'webOS') ||
        strstr($_SERVER['HTTP_USER_AGENT'],'iPhone') ||
        strstr($_SERVER['HTTP_USER_AGENT'],'iPod')
        ){
        // Send Mobile Site
    } 
    ```

2.  **检查用户代理客户端**

    ```
    if( navigator.userAgent.match(/Android/i) ||
        navigator.userAgent.match(/webOS/i) ||
        navigator.userAgent.match(/iPhone/i) ||
        navigator.userAgent.match(/iPod/i) ||
        ){
     // Send Mobile Site
    } 
    ```

如果他们似乎使用移动设备，请确保显示 Mobile CSS 和 Viewport Meta。我不认为`viewport`meta 会影响桌面用户。

# php - 使用组合相同的键创建新数组

> ID：15237816
> 
> 赞同：-1
> 
> 时间：2013-03-06T02:19:39.120
> 
> 标签：php, arrays, multidimensional-array

我有以下数组。（var_dump 输出）我想将这些相同的关键元素组合到单个数组中。我怎么做？

```
 array (size=3)
      'totals' => 
        array (size=3)
          0 => 
            array (size=1)
              'total' => string '4' (length=1)
          1 => 
            array (size=1)
              'total' => string '50' (length=2)
          2 => 
            array (size=1)
              'total' => string '44' (length=2)
      'styles' => 
        array (size=3)
          0 => 
            array (size=1)
              'style' => string '11' (length=2)
          1 => 
            array (size=1)
              'style' => string 'aaa' (length=3)
          2 => 
            array (size=1)
              'style' => string 'bb' (length=3)
      'colors' => 
        array (size=3)
          0 => 
            array (size=1)
              'color' => string '11' (length=2)
          1 => 
            array (size=1)
              'color' => string 'ccc' (length=3)
          2 => 
            array (size=1)
              'color' => string 'ddd' (length=3) 
```

最终输出应该是这样的，

```
 'totals' => 
        array (size=3)
          0 => 
            array (size=1)
              'total' => string '4' (length=1)  
              'style' => string '11' (length=2)
               'color' => string '11' (length=2)

     'styles' => 
        array (size=3)
          1 => 
            array (size=1)
               'total' => string '50' (length=2)   
                'style' => string 'aaa' (length=3)
                 'color' => string 'bb' (length=3)  

      'colors' => 
        array (size=3)
          2 => 
            array (size=1)
               'total' => string '44' (length=2)
                'style' => string 'ccc' (length=3)
                 'color' => string 'ddd' (length=3) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:04:51.910

试试这个 ：

注意：它不是维护键 => 成为数字数组，而是执行功能。

```
 $array = array("total"=>array(array("total"=>1),array("total"=>2),array("total"=>3)),
                "styles"=>array(array("style"=>4),array("style"=>52),array("style"=>6)),
                "colors"=>array(array("color"=>7),array("color"=>8),array("color"=>9))

);
array_unshift($array, null);
$res = call_user_func_array('array_map', $array);

echo "<pre>";
print_r($res); 
```

输出 ：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [total] => 1
                )

            [1] => Array
                (
                    [style] => 4
                )

            [2] => Array
                (
                    [color] => 7
                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [total] => 2
                )

            [1] => Array
                (
                    [style] => 52
                )

            [2] => Array
                (
                    [color] => 8
                )

        )

    [2] => Array
        (
            [0] => Array
                (
                    [total] => 3
                )

            [1] => Array
                (
                    [style] => 6
                )

            [2] => Array
                (
                    [color] => 9
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:23:19.050

# 也许这项工作

```
 for ($j=0; $j < count($your_array) ; $j++) { 

        for ($k=0; $k < count($your_array[0]) ; $k++) {
            if(!isset($sum[$k]))
            {
               $sum[$k]=0;
            }else{
                $sum[$k]=$sum[$k]+$your_array[$j][$k];
            }
        }
    } 
```

所以相同的键将组合在一起，无论大小:)

# ios - Adobe Air 的 DeviceOrientationEvent

> ID：15237837
> 
> 赞同：1
> 
> 时间：2013-03-06T02:21:44.290
> 
> 标签：ios, actionscript-3, air, gyroscope, device-orientation

我正在尝试使用 Adob​​e Air 和 Flash Builder 4.7 为 iOS 构建游戏，我需要读取陀螺仪数据以找出我的 alpha 旋转值（0-360），我一直在寻找库和原生与 adobe air 一起使用的扩展，但我有点迷茫。有什么简单的方法可以在我的应用程序上获得这个值吗？像这个人在这里做的事情：

[了解加速度计和陀螺仪在浏览器中的工作原理](http://joelongstreet.com/2011/08/15/understanding-how-the-accelerometer-and-gyroscope-work-in-the-browser/)

我需要的是一个事件，它会给我一个 alpha 旋转值，或者一种使用 x/y/z 和/或俯仰/偏航/滚动值来计算该值的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:18:01.137

您可以在官方文档中找到示例代码和教程链接：

[**flash.sensors.加速度计**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/sensors/Accelerometer.html)

# javascript - yui2 更新选项项目

> ID：15237840
> 
> 赞同：1
> 
> 时间：2013-03-06T02:21:55.050
> 
> 标签：javascript, yui2

我正在使用 yui2 框架...我有以下代码....我需要将选定的属性添加到选项节点。我发现这个链接[http://yuilibrary.com/forum/viewtopic.php?p=23574](http://yuilibrary.com/forum/viewtopic.php?p=23574) ..它处理 yui3 ..不太确定 yui2。

```
`<select id="MedicationsCutOutStatus20" class="singleSelect form_input" title="Status:"name="MedicationsCutOutStatus">    
<option class="" value="All">All</option>     
<option class="" value="Active">Active</option>      
<option class="" value="On Hold">On Hold</option>      
<option class="" value="Prior History">Prior History</option>      
<option class="" value="No Longer Active">No Longer Active</option>      
</select>`

 <option selected class="" value="All">All</option> 
```

我需要将选定的属性添加到选项节点..不太确定...如何继续..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T08:42:32.523

尝试以下操作：

```
var selectEl = Dom.get("MedicationsCutOutStatus20");
var selectedIndex = selectEl.options.selectedIndex;
selectEl.options[selectedIndex].setAttribute("selected",""); 
```

如果要选择某个选项，则需要更改 selectedIndex 值：

```
selectEl.options.selectedIndex = 1; 
```

# android - 有没有办法发布Android应用程序进行测试？

> ID：15237845
> 
> 赞同：-3
> 
> 时间：2013-03-06T02:23:00.053
> 
> 标签：android, publishing

我只开发了我的应用程序的 25%。现在我想发布我的应用程序，以便我可以让我的远程测试人员和朋友测试我的应用程序。我在谷歌注册并支付25美元的注册费没有问题，但我想知道谷歌方面是否有任何应用程序验证流程？他们是否有可能拒绝发布我的应用程序，因为它尚未完成且也不稳定？

再问一个问题，每个应用程序每年 25 美元的注册费还是无限时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:24:40.237

你为什么不把你目前拥有的 APK 发送给你的朋友呢？你根本不需要在谷歌注册，他们只需要允许安装来自未知来源的应用程序。

# css - 绝对定位，浮动子元素的宽度，不会超过它自己的父元素

> ID：15237846
> 
> 赞同：0
> 
> 时间：2013-03-06T02:23:02.317
> 
> 标签：css, position, absolute

好的，所以这有点难以解释。基本上，我有一个相对定位的 div，持有一个绝对定位的 div。绝对定位的 div 包含固定宽度的 div，它们是浮动的。这些浮动 div 应该扩展绝对父级的宽度。

```
<div id="parent">
  <div id="stretchable-div">
    <div class="child">text</div>
    <div class="child">another text</div>
    <div class="child">more text</div>
  </div>
</div> 
```

问题是，当原始相对位置 div 宽度小于绝对 div 时，这不起作用。

示例 - [http://jsfiddle.net/8JJSf/91/](http://jsfiddle.net/8JJSf/91/)

可以通过以下方式在 jQuery 中完成：

```
$('.dropdown').each(function(index){
var sum = 0;
$(this).find('.half').each( function(){ sum += $(this).outerWidth(); });
$(this).width( sum );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:24:30.940

如果你想保持这个位置，你需要为此使用 JavaScript`absolute`

当设置`absolute`元素的位置不再是常规页面流的一部分时，父级将不知道其子级的大小/位置。

**编辑：**这里有一些 jQuery 代码，它根据子级调整父级的大小。它将拉伸父母以匹配最宽的孩子，以及所有孩子的高度。我不是 jQuery 专家，所以可能有更好/更简单的方法。父级高度最初应设置为 0px。

```
$('#stretchable-div').each(function() {
    var parentWidth = $('#parent').width(),
        parentHeight = $('#parent').height(),
        childW = $(this).width() + $(this).position().left;

    if (childW > parentWidth) {
      $('#parent').width(childW);   
    }

    $('#parent').height($('#parent').height() + $(this).height() + $(this).position().top);   

}); 
```

[http://jsfiddle.net/WHV7M/](http://jsfiddle.net/WHV7M/)

# c++ - 将对象插入 C++ 顺序列表

> ID：15237847
> 
> 赞同：0
> 
> 时间：2013-03-06T02:23:06.227
> 
> 标签：c++, list, object, sequential

对于学校编程任务，我构建了一个应用程序，该应用程序将对象列表存储在顺序列表对象中。顺序列表类有一个将新对象插入列表的方法，它首先检查列表是否已经具有允许的最大条目数，如果确实返回错误。由于某种原因，我无法将新对象插入列表（我不断收到“超出最大列表大小”错误），即使其中没​​有任何条目可以启动。

我用断点运行它以查看大小数据成员是否以某种方式增加，但这里似乎并非如此。

请忽略糟糕的代码质量，仍然只是学习......随时提出任何建议:)

这是主程序：

```
#include<iostream>
#include<string>
#include "aseqlist.h"

using namespace std;

void PrintByGender (const SeqList& L, char gender)
    {
        int size = L.ListSize();

        int count = 0;

        while (count < size)
        {

        if (gender == L.GetData(count).getGender())
            {
                L.GetData(count).PrintEmployee();
            }
            count++;
        }

}

int InList (const SeqList& L, char *lname, Employee& Emp)
{
    int found = 0;

    Emp.setLast(lname);

    if (L.Find(Emp) == 1)
    {
        found = 1;
        Emp.PrintEmployee();
    }

    return found;

}

int main()
{
    SeqList obj1;

    bool close = false;
    string choice = "";

    do
    {

        cout << "Please choose what you would like to do: " << "\n";
        cout << "N = New record, D = Delete record, P = Print by gender, S = Search and E = Exit" << "\n";
        cin >> choice;
        cin.ignore();

        if (choice == "n" || choice == "N")
        {

        string first, last;
        int age;
        char gen;
        double empNum;

        cout << "First name: ";
        cin >> first;

        cout << "Last name: ";
        cin >> last;

        cout << "Age: ";
        cin >> age;

        cout << "Gender ('M' Or 'F'): ";
        cin >> gen;

        cout << "Employee Number: ";
        cin >> empNum;

        Employee newEmp;

        newEmp.ReadEmployee(first, last, age, gen, empNum);

        obj1.Insert(newEmp);

        }

        if (choice == "e" || choice == "E")
        {

            close = true;

        }

        if (choice == "p" || choice == "P")
        {
        char genderSearch;
        cout << "Male = M, Female = F";
        cin >> genderSearch;
        cin.ignore();

        PrintByGender(obj1, genderSearch);
        }

        if (choice == "d" || choice == "D")
        {
            string last;
            cout << "Which employee? (Enter Last Name): ";
            cin >> last;
            cin.ignore();

            Employee emp;

            emp.setLast(last);

            obj1.Delete(emp);

            cout << "Deleted";

        }

        if (choice == "s" || choice == "S")
        {

        char lnameSearch;
        cout << "Last Name?: ";
        cin >> lnameSearch;
        cin.ignore();

        Employee emp;

        char *ptrSearch;

        ptrSearch = &lnameSearch;

        InList(obj1, ptrSearch, emp);

        if (emp.getFirst() != "")
        {
            emp.PrintEmployee();

        }

        }

    }
    while (close != true);

}; 
```

这是类声明的头文件：

```
#include <iostream> 

using namespace std;
const int MaxListSize = 6; 
// You will need to change the typedef in the following line
// from the data type int to Employee

class Employee
{

public:
    Employee();
    Employee(string firstName, string lastName, int age, char gender, double employeeNumber);
    void ReadEmployee(string firstName, string lastName, int age, char gender, double employeeNumber);
    char getGender();
    string getFirst();
    void Employee::setLast(string lname);
    string getLast();
    void PrintEmployee();

private:
        string LastName;
        string FirstName;
        int Age;
        char Gender;
        double EmployeeNumber;
};

typedef Employee DataType;
class SeqList 
{ 
   private: 
      // list storage array and number of current list elements 
      DataType listitem[MaxListSize]; 
      int size;

   public: 
      // constructor 
      SeqList(void); 

      // list access methods 
      int ListSize(void) const; 
      int ListEmpty(void) const; 
      int Find (DataType& item) const; 
      DataType GetData(int pos) const; 

      // list modification methods 
      void Insert(const DataType& item); 
      void Delete(const DataType& item); 
      DataType DeleteFront(void); 
      void ClearList(void); 
}; 

// Class Definition: 

// constructor. set size to 0 
SeqList::SeqList (void): size(6) 
{} 

// return number of elements in list 
int SeqList::ListSize(void) const 
{ 
   return size; 
} 

// tests for an empty list 
int SeqList::ListEmpty(void) const 
{ 
   return size == 0; 
} 

// clears list by setting size to 0 
void SeqList::ClearList(void) 
{ 
   size = 0; 
} 

// Take item as key and search the list. return True if item 
// is in the list and False otherwise. if found, 
// assign the list element to the reference parameter item 

bool  operator==(Employee A, Employee B)
{
    bool isequal = false;

    if (A.getLast() == B.getLast())
        isequal = true;

    return isequal;
}

int SeqList::Find(DataType& item) const 
{ 
   int i = 0; 

   if (ListEmpty()) 
      return 0;            // return False when list empty 
   while (i < size && !(item == listitem[i]))
      i++; 
   if (i < size) 
   { 
      item = listitem[i];  // assign list element to item 
      return 1;            // return True 
   } 
   else 
      return 0;            // return False 
} 

// insert item at the rear of the list. terminate the program 
// if the list size would exceed MaxListSize. 
void SeqList::Insert(const DataType& item) 
{ 
   // will an insertion exceed maximum list size allowed? 
   if (size+1 > MaxListSize) 
   { 
      cout << "Maximum list size exceeded" << endl; 
      exit(1); 
   } 

   // index of rear is current value of size. insert at rear 
   listitem[size] = item; 
   size++;                 // increment list size 
} 

// search for item in the list and delete it if found 
void SeqList::Delete(const DataType& item) 
{ 
   int i = 0; 

   // search for item 
   while (i < size && !(item == listitem[i])) 
      i++; 

   if (i < size)           // successful if i < size 
   { 
      // shift the tail of the list to the left one position 
      while (i < size-1) 
      { 
         listitem[i] = listitem[i+1]; 
         i++; 
      } 
      size--;              // decrement size 
   } 
} 

// delete element at front of list and return its value. 
// terminate the program with an error message if the list is empty. 
DataType SeqList::DeleteFront(void) 
{ 
   DataType frontItem; 

   // list is empty if size == 0 
   if (size == 0) 
   { 
      cout << "Attempt to delete the front of an empty list!" << endl; 
      exit(1); 
   } 

   frontItem = listitem[0];  // get value from position 0\. 
   Delete(frontItem);        // delete the first item and shift terms 
   return frontItem;         // return the original value 
} 

// return value at position pos in list. if pos is not valid 
// list position, teminate program with an error message. 
DataType SeqList::GetData(int pos) const 
{ 
   // terminate program if pos out of range 
   if (pos < 0 || pos >= size) 
   { 
      cout << "pos is out of range!" << endl; 
      exit(1); 
   } 
   return listitem[pos]; 
}

Employee::Employee()
{

    FirstName = "";
    LastName = "";
    Age = 0;
    /*Gender = "";*/
    EmployeeNumber = 0;

};

Employee::Employee(string firstName, string lastName, int age, char gender, double employeeNumber)
{
        FirstName = firstName;
        LastName = lastName;
        Age = age;
        Gender = gender;
        EmployeeNumber = employeeNumber;
};

void Employee::PrintEmployee()
{
                cout << "First Name: " << FirstName << "\n";
                cout << "Last Name: " << LastName << "\n";
                cout << "Age: " << Age << "\n";
                cout << "Gender: " << Gender << "\n";
                cout << "Employee Number :" << EmployeeNumber << "\n" << "\n";

};

void Employee::ReadEmployee(string firstName, string lastName, int age, char gender, double employeeNumber)
{
        FirstName = firstName;
        LastName = lastName;
        Age = age;
        Gender = gender;
        EmployeeNumber = employeeNumber;
};

char Employee::getGender()
{

    return Gender;
}
string Employee::getFirst()
{
return FirstName;
}
string Employee::getLast()
{
    return LastName;
}
void Employee::setLast(string lname)
{
    LastName = lname;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:13:37.130

构造函数中的问题：

```
SeqList::SeqList (void): size(6) 
```

size 被初始化为 6。

其他建议。不要放入`using namespace std;`头文件。更好的是，不要放在`using namespace std;`任何地方。

[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T03:16:05.117

```
// constructor. set size to 0 
SeqList::SeqList (void): size(6) 
{} 
```

这是错误的。应该是这样：

```
// constructor. set size to 0 
SeqList::SeqList (void): size(0) 
{} 
```

# c# - UMBRACO cshtml 显示来自 Microsoft SQL Server 表的数据

> ID：15237849
> 
> 赞同：0
> 
> 时间：2013-03-06T02:23:10.163
> 
> 标签：c#, content-management-system, umbraco

我继承了一个 Umbraco 4.9 站点，需要显示一些来自 SQL 数据库的数据。我已经使用 cshtml 文件创建了一个宏，但它在创建 sqldataconnection 时一直失败。

这是代码。

```
@inherits umbraco.MacroEngines.DynamicNodeContext
@using umbraco.MacroEngines
@using System.Xml.Linq
@using System.Text
@using System.Data
@using System.Data.SqlClient

@{
SqlConnection sqlConn = new SqlConnection(ConnectionString);
string sql = string.Format("SELECT * FROM [mydb] ");

}

<div class="park-list">
<h2>Parking List</h2>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <th>Date</th>
    </tr>
    <tr>
        <th>Name</th>
    </tr>
</table>
</div> 
```

谁能指出我正确的方向。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:14:52.120

我建议创建一个帮助类或库，并从 razor 脚本中调用它。您可以简单地将类添加到 App_Code 目录或在本地创建一个新项目并上传 dll。

也就是说，您可以使用像 PetaPoco 这样的轻量级工具：[https](https://github.com/toptensoftware/PetaPoco/blob/master/PetaPoco/PetaPoco.cs) ://github.com/toptensoftware/PetaPoco/blob/master/PetaPoco/PetaPoco.cs 。将该文件添加到您的 App_Code 中，然后这样的事情可能会起作用：

```
@{
   var myDb = new PetaPoco.Database(connectionstringfromwebconfig);
   var someResult = myDb.Fetch("SELECT * FROM MyTable WHERE SomeColumn=@0", "Some value");
} 

<ul>
@foreach(var row in someResult)
{
 <li>
 @row.SomeOtherColumn 
 </li>
}
</ul> 
```

我在这里找到了这段代码：http: [//our.umbraco.org/forum/developers/razor/31685-Razor-ans-SQL-commands](http://our.umbraco.org/forum/developers/razor/31685-Razor-ans-SQL-commands)并且在线程底部还有其他代码可能会有所帮助。

# php - 无法正常访问 Wordpress

> ID：15237853
> 
> 赞同：0
> 
> 时间：2013-03-06T02:23:45.037
> 
> 标签：php, wordpress, apache

![在此处输入图像描述](../Images/47561ba504af693183cfb78635bc1cb1.png)

正如你所看到的，它给了我一个奇怪的观点。我为我的 wordpress 使用 apache+php5+mysql，并且在安装 Wordpress 期间一切似乎都正常工作。但它只是给了我这样一个奇怪的场景。

有没有人和我看到过类似的问题？什么时候可能是这个原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:29:53.223

如果不访问该站点就无法确定，但看起来您没有将 index.php 添加到 httpd.conf 文件中的 DirectoryIndex （对于 Apache，或者您使用的任何服务器中的任何等效项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:28:15.940

我不确定 - 图片分辨率很低，但它看起来像目录内容。确保 php 已 (a) 安装 (b) 在目录上启用 (c) 在您更改服务器配置后，重新启动它 (d) php 文件设置为执行 php 解释器

# python - Python 未在 if 语句中按 time.mktime 条件执行

> ID：15237864
> 
> 赞同：2
> 
> 时间：2013-03-06T02:25:18.153
> 
> 标签：python, if-statement, time, conditional-statements, mktime

我有一个小脚本，用于在指定时间（“commandTime”）执行系统命令，然后在指定时间退出（“stopTime”）。但是，当我运行脚本时，它往往永远不会执行“if”语句下的命令。（它有时会执行，有时不会。）

假设我不是一个彻头彻尾的白痴（陪审团仍然没有解决......）并且正在合理地设置时间变量，脚本应该在'time.mktime（time.localtime（））时执行if语句中的打印命令' 等于或大于格式化的 'commandTime' 变量。

* * *

以下是相关代码的摘录：

```
import time

commandTime = time.strptime('2013-03-01 05:00:00', "%Y-%m-%d %H:%M:%S")
stopTime = time.strptime('2013-03-01 05:10:00', "%Y-%m-%d %H:%M:%S")

while (time.mktime(time.localtime()) <= time.mktime(stopTime)):
 if (time.mktime(time.localtime()) >= time.mktime(commandTime)):
  print "Green team go"
 time.sleep(100) 
```

* * *

假设设置了 stopTime 和 commandTime 变量，因此当您执行脚本时，以下情况为真： time.localtime() < commandTime < stopTime

脚本应该循环遍历 while 语句，直到 time.localtime() 等于或大于 stopTime，检查每个循环的 if 条件。一旦 time.localtime() 大于或等于 commandTime，就应该执行打印命令。

我正在使用 time.mktime() 将 datetime 对象转换为 Unix 时间（我认为是浮点数），以便在 while 循环和 if 语句中进行比较。

while 循环每次都可靠地工作，只有 if 语句在大多数情况下无法执行。

我在 Debian Squeeze 32 位上运行 python 2.7.3。

我的问题是：我在这个脚本中做错了什么导致 if 语句在满足条件时不执行？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:32:04.790

一般发布的代码看起来没问题。请注意，调用将针对and循环`time.localtime()`返回不同的结果。如果在您的真实代码中，您在f 和之间有一些长时间运行的任务，并且开始/停止时间很接近，那么您很可能会遇到掉线的情况，但在执行时间移动到足够远之前测试失败。`while``if``i``while``while``if`

您可以重写为以下内容。这会缓存当前时间以进行比较 ( `nowSec`)，并避免在每个循环上进行昂贵的时间转换。

```
import time

commandTime = time.strptime('2013-03-01 05:00:00', "%Y-%m-%d %H:%M:%S")
stopTime = time.strptime('2013-03-01 05:10:00', "%Y-%m-%d %H:%M:%S")

commandTimeSec = time.mktime(commandTime)
stopTimeSec = time.mktime(stopTime)

while True:
    nowSec = time.mktime(time.localtime())

    if nowSec > stopTimeSec:
        break

    if nowSec >= commandTimeSec:
        print "Green team go"
    time.sleep(100) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T20:45:08.750

结果证明代码很好，问题与睡眠语句中指定的时间长度以及命令和停止变量的接近程度（及时）有关。

如果我将 sleep 设置为 100 秒，然后将 command 和 stop 之间的时间差设置为小于 100 秒，则可能不会在迭代中触发命令（因为它还不是时间），等待 100 秒（“睡眠" 通过命令时间），然后立即退出循环，因为我们已经达到或超过了我们的停止变量。

谢谢您的帮助！！

注意：如果我有足够高的声誉，我会 +1 奥斯汀的回答，因为这是我用来解决实际问题的更清晰的循环逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:47:27.323

您当前设置它的方式使以下内容为真： commandTime <= time.localtime() <= stopTime

如果您希望它成为您所说的方式（localtime < commandtime < stoptime），您将必须执行以下操作：

```
import time

commandTime = time.strptime('2013-03-05 21:40:00', "%Y-%m-%d %H:%M:%S")
stopTime = time.strptime('2013-03-05 21:50:00', "%Y-%m-%d %H:%M:%S")

while (time.mktime(time.localtime()) <= time.mktime(stopTime)):
  if (time.mktime(time.localtime()) <= time.mktime(commandTime)):
    print ("Green team go")
  time.sleep(100) 
```

如果您只是错误地打印了您希望它执行的方式，并且您实际上想要 commandTime <= time.localtime() <= stopTime，我在 Windows 上的 python 3.2 中尝试了这种方式（将打印更改为函数，插入了我的本地时间）它适用于正确设置的 commandTime 和 stopTime 变量，因此它必须与 Python 2.7 或 Debian Squeeze 有关。

```
import time

commandTime = time.strptime('2013-03-05 21:40:00', "%Y-%m-%d %H:%M:%S")
stopTime = time.strptime('2013-03-05 21:50:00', "%Y-%m-%d %H:%M:%S")

while (time.mktime(time.localtime()) <= time.mktime(stopTime)):
  if (time.mktime(time.localtime()) >= time.mktime(commandTime)):
    print ("Green team go")
  time.sleep(100) 
```

# vb.net - 如何将 for each 字典循环转换为并行 foreach 循环

> ID：15237872
> 
> 赞同：0
> 
> 时间：2013-03-06T02:25:56.653
> 
> 标签：vb.net, foreach, parallel-processing

如何将此代码转换为`Parallel.ForEach (WorkingDict is a HybridDictionary)`?

我在下面包含了我的代码（请不要评判我的方法。这个工具是我在课堂上的第一次尝试，我开始相信我已经让它变得相当复杂和费力）。

```
Dim Cntr As Integer = 0, Bool1 As Boolean = False
For Each Obj As Object In BusLoadDict.Keys
    Cntr = 0
    Bool = False
    bool1 = False
    For Each Obj2 As Object In PNodesDict.Keys
        For Each Obj1 As Object In DirectCast(PNodesDict.Item(Obj2.ToString), PNodeClass) _
            .PNodeDescriptionDictOfDicts.Keys
            If Obj1.ToString.Contains("forecast zone") Then
                If DirectCast(DirectCast(DirectCast(PNodesDict.Item(Obj2.ToString),  _
                            PNodeClass).PNodeDescriptionDictOfDicts, HybridDictionary).Item("forecast zone"),  _
                    HybridDictionary).Contains(BusLoadDict.Item(Obj.ToString)) Then
                    Bool = True
                    Cntr += 1
                    If Cntr = 2 Then GoTo 1
                End If
            End If
            If Obj1.ToString.Contains("aggregate") Then
                Bool1 = True
                If DirectCast(DirectCast(DirectCast(PNodesDict.Item(Obj2.ToString),  _
                            PNodeClass).PNodeDescriptionDictOfDicts, HybridDictionary).Item("aggregate"),  _
                    HybridDictionary).Contains(BusLoadDict.Item(Obj.ToString)) Then
                    Bool = True
                    Cntr += 1
                    If Cntr = 2 Then GoTo 1
                End If
            End If
        Next
    Next
1:          If Bool = False Then
    SBuilder.AppendLine("Bus PNode " & Obj.ToString & " was not mapped to the forecast zone pnodes.")
    End If
    If bool1 = False Then
        SBuilder.AppendLine("Bus PNode " & Obj.ToString & " was not mapped to the aggregate pnodes.")
    End If
Next 
```

这是错误代码。

```
Error   1   Overload resolution failed because no accessible 'ForEach' can be called with these arguments:
    'Public Shared Function ForEach(Of TSource)(source As System.Collections.Concurrent.OrderablePartitioner(Of TSource), body As System.Action(Of TSource, System.Threading.Tasks.ParallelLoopState, Long)) As System.Threading.Tasks.ParallelLoopResult': Data type(s) of the type parameter(s) cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error.
    'Public Shared Function ForEach(Of TSource)(source As System.Collections.Concurrent.Partitioner(Of TSource), body As System.Action(Of TSource, System.Threading.Tasks.ParallelLoopState)) As System.Threading.Tasks.ParallelLoopResult': Data type(s) of the type parameter(s) cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error.
    'Public Shared Function ForEach(Of TSource)(source As System.Collections.Concurrent.Partitioner(Of TSource), body As System.Action(Of TSource)) As System.Threading.Tasks.ParallelLoopResult': Data type(s) of the type parameter(s) cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error.
    'Public Shared Function ForEach(Of TSource)(source As System.Collections.Generic.IEnumerable(Of TSource), body As System.Action(Of TSource, System.Threading.Tasks.ParallelLoopState, Long)) As System.Threading.Tasks.ParallelLoopResult': Data type(s) of the type parameter(s) cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error.
    'Public Shared Function ForEach(Of TSource)(source As System.Collections.Generic.IEnumerable(Of TSource), body As System.Action(Of TSource, System.Threading.Tasks.ParallelLoopState)) As System.Threading.Tasks.ParallelLoopResult': Data type(s) of the type parameter(s) cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error.
    'Public Shared Function ForEach(Of TSource)(source As System.Collections.Generic.IEnumerable(Of TSource), body As System.Action(Of TSource)) As System.Threading.Tasks.ParallelLoopResult': Data type(s) of the type parameter(s) cannot be inferred from these arguments. Specifying the data type(s) explicitly might correct this error. C:\My Folder\Market Operations\VB.net\Market Validations Tool\Market Validations Tool\Market Operations Tool.vb 6361    9   Market Validations Tool 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:53:16.247

~~是~~的，您可以这样做。

```
Dim WorkingDict As New HybridDictionary
WorkingDict.Add("k1", "v1")
WorkingDict.Add("k2", "v2")
Parallel.ForEach(WorkingDict.Cast(Of Object),
                 Sub(DictObject As KeyValuePair(Of String, String))
                     ' do something
                 End Sub) 
```

您需要使用`IEnumerable.Cast`运算符，因为`Parallel.Foreach` [仅适用于通用集合](http://blogs.msdn.com/b/pfxteam/archive/2010/03/02/9971804.aspx)。`HybridDictionary`是一个非泛型集合。

但请记住，这是一个非常简单的 [空] 示例，更复杂的并行操作需要许多考虑因素，例如锁定共享资源等。您始终可以考虑使用 a `System.Collections.ConcurrentDictionary`，它会在需要时处理锁定共享资源。[关于此的 SO 帖子](https://stackoverflow.com/questions/7028919/concurrentdictionary-addorupdate)。例子：

```
Dim WorkingDict As New ConcurrentDictionary(Of String, String)
' ConcurrentDictionary has no Add operator, so to replicate it, use AddOrUpdate
' and just pass the same value whether it is being added or updating
WorkingDict.AddOrUpdate("key1", "value1", Function(key, oldvalue) "value1")
WorkingDict.AddOrUpdate("key2", "value2", Function(key, oldvalue) "value2")
Parallel.ForEach(WorkingDict,
                 Sub(DictObject as DictionaryEntry)
                     ' do something
                 End Sub) 
```

# php - 放置在 HTML 中时，PHP 脚本在浏览器中抛出垃圾

> ID：15237873
> 
> 赞同：1
> 
> 时间：2013-03-06T02:26:00.337
> 
> 标签：php, html

所以我把创建这个页面的 PHP 代码放到[这里](http://www.freshmarketonline.com/coupon/coupon.php)，然后把它放在一个新的 .php 文件中，然后把那个文件上传到[这里](http://pradappet.com/wp-content/coupon/coupon_new.php)。

我只是在屏幕上看到大量垃圾字符。有任何想法吗？

下面是完整的 PHP：

```
<html>
<head>
    <title></title>
</head>
<body>

<?

// gif is more appropriate than jpg for this kind of image
header("Content-type: image/gif");

// both coupon.jpg and Helvetica.ttf must be located in the same directory as
// dynamic.php or these variables must be updated.
$imgname    = "./coupon.jpg";
$fontname   = "./Helvetica.ttf";

// read image from disk
$im = imagecreatefromjpeg( $imgname )
    or die("Source coupon image has been moved or renamed! Expected coupon.jpg");

// variable allocation
$size       = 11;
$textheight = 250;
$imwidth    = imagesx( $im );
$black      = imagecolorallocate( $im, 0,0,0 );

// create the string containing tomorrow's date
$text       = "Offer expires " .
    date('l\, F j\, Y', mktime(0, 0, 0, date("m")  , date("d")+1, date("Y")))."."; 

// learn the width of the newly allocated string
$bbox       = imagettfbbox( $size, 0, $fontname, $text );
$width      = $bbox[2] - $bbox[0];

// update, display, and clear from memory the newly modified image
imagettftext($im,$size,0,$imwidth/2 - $width/2,$textheight,$black,$fontname,$text);
imagegif($im);
imagedestroy($im);

?>

</body>
</html> 
```

**更新添加：** 我的目标是在新页面/PHP 生成的图像上有一个谷歌分析转换脚本，这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T02:28:56.540

你期待什么？你正在输出 HTML，然后*在*一些`Content-type: text/plain`输出（即 HTML）之后，说`Content-type: image/gif`

删除 PHP 周围的 HTML，只保留 PHP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T02:32:57.633

您的 PHP 代码会创建一个图像。

这一行：

```
header("Content-type: image/gif"); 
```

允许修改服务器的 HTTP 响应以告诉浏览器您正在发送图像。所以你不需要所有的 HTML 代码。

您应该只保留 PHP 代码。

# java - 在字符串上拆分

> ID：15237875
> 
> 赞同：0
> 
> 时间：2013-03-06T02:26:12.700
> 
> 标签：java

我有一个像这样的字符串`abc & "def&ghi" & jkl & "mno&pqr"`，想要做一个拆分`&`，但我不想在双引号内拆分单词。

输出应该是`abc, "def&ghi", jkl, "mno&pqr"`.

我尝试`split("&")`对那个字符串做 a ，但这也将单词用双引号分开。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T02:28:27.513

看起来您应该使用[csv 解析器](http://opencsv.sourceforge.net/)之类的东西，因为它们被完全编程为处理`" "`转义问题。

如果这是家庭作业并且不允许您使用生产工具，那么您应该按照[您尝试过什么中的建议进行操作？](http://www.whathaveyoutried.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:32:28.220

如果您在上面提到的 & 引号之间有空格

```
abc & "def&ghi" & jkl & "mno&pqr" 
```

那么你也可以使用它`.split(" & ");`来修剪空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T04:54:16.287

我同意 CSV 解析器是解决方案，但原则上：

```
 String s = "abc & \"def&ghi\" & jkl & \"mno&pqr\"";
    String[] a = s.split("(?=.*[^\"] )&");
    System.out.println(Arrays.toString(a)); 
```

输出

```
[abc ,  "def, ghi" ,  jkl ,  "mno&pqr"] 
```

# javascript - 将随机数生成到表中

> ID：15237881
> 
> 赞同：-4
> 
> 时间：2013-03-06T02:26:29.527
> 
> 标签：javascript, html, random, generator

我正在尝试将随机数以及当前分钟生成到表中。如何将脚本写入表中？ `getElementbyClass()`?

```
d = new Date();
var random=Math.floor(Math.random()*60)
document.writeln(random);

var Minutes = d.getMinutes();
document.writeln(Minutes); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:37:32.870

您可以执行以下操作：

```
var d = new Date();
var random= Math.floor(Math.random()*60);
var td1 = document.createElement("td");
td1.innerHTML = random;

var Minutes = d.getMinutes();
var td2 = document.createElement("td");
td2.innerHTML = random;

var table = document.getElementById("tblResult");
var row = document.createElement("tr");

row.appendChild(td1);
row.appendChild(td2);
table.appendChild(row); 
```

并在 HTML 中：

```
<table id="tblResult">
  <tr>
    <td>Random</td>
    <td>Minutes</td>
  </tr>
</table> 
```

结果可以在这个[小提琴中看到](http://jsfiddle.net/aMWjn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:39:25.493

表格中是否有固定数量的行/列？您是否需要在运行时更新表格（例如，您是否会在页面加载后更改列中的内容）？

如果您只想在加载页面时使用这些值创建一个表，您可以在 JavaScript 中创建您的表：

```
var table = document.createElement('table'),
    row,
    minCol,
    ranCol;

function addRow(minutes, rand) {
    row = document.createElement('tr');
    minCol = document.createElement('td');
    ranCol = document.createElement('td');

    minCol.innerHTML = minutes;
    ranCol.innerHTML = rand;

    row.appendChild(minCol);
    row.appendChild(ranCol);
    table.appendChild(row);
}

for (var i = 0; i < 10; i++) {
    addRow((new Date()).getMinutes(), Math.floor(Math.random() * 60));
}

document.body.appendChild(table); 
```

请注意，此脚本必须位于标记*之后才能正常工作。*`<body>`

如果您需要在页面加载后添加行（例如用户单击按钮），只需调用`addRow()`.

# php - 在 CodeIgniter 控制器中建立 SSH 连接

> ID：15237884
> 
> 赞同：2
> 
> 时间：2013-03-06T02:27:21.133
> 
> 标签：php, codeigniter, ssh

最近我遇到了这个库，它允许我连接`ssh`到远程机器。（这个案例，一个假`123.45.67.890`的。图书馆是 [shukydvir](https://bitbucket.org/shukydvir/codeigniter-ssh2-library/overview)。

但是，我遵循了`overview`选项卡中给出的说明，如下所示：

```
public function deploy_test()
{
    $params = array( 
                'hostname' => "123.45.67.890",
                'port' => 23,
                'username' => "username",
                'password' => "password"
                );

    if(!($con = $this->ssh->connect($params))) {
        echo json_encode("fail: unable to establish connection\n");
    }
    else {
        echo json_encode("helloworld");
    }
} 
```

当我回到网页时：

```
fail: unable to establish connection 
```

因此，厌倦了这一点，我安装了`ssh2`库，并重新启动了我的服务器：

```
public function deploy_test() {
    $connection = ssh2_connect("123.45.67.890", 23);

    if(!$connection) {
       echo json_encode('Connection failed');
    }

    ssh2_auth_password($connection, "username", "password");
    $stream = ssh2_exec($connection, "ls -l");
    stream_get_blocking($stream, true);
    $output = "";
    while($line = fgets($stream)) {
        $output .= $line;
    }
    echo json_encode($line);
} 
```

结果并不令人鼓舞：

```
<p>Severity: Warning</p>
<p>Message:  ssh2_connect(): Unable to connect to 123.45.67.890 on port 23</p>
<p>Filename: controllers/automation.php</p>
<p>Line Number: 70</p> 
```

但是，当我从`test.php`文件中执行相同的脚本时，我得到：

```
02/13/2013  10:41 PM              .
02/13/2013  10:41 PM              ..
02/13/2013  10:41 PM               952 FreeSSHd.lnk
               1 File(s)            952 bytes
               2 Dir(s)  55,343,263,744 bytes free 
```

另一台服务器已`freSSHD`安装，可以进行连接。我已经尽我所能。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:09:01.117

CodeIgniter-SSH2 库正在使用 php 的原生函数 ssh2_connect()，它是基于 sftp 的安全 shell 登录，基本上连接到端口 22。尝试更改端口：

```
$connection = ssh2_connect("123.45.67.890", 22); 
```

# javascript - 销毁视图时backbone.js从模型中取消绑定功能

> ID：15237887
> 
> 赞同：0
> 
> 时间：2013-03-06T02:28:12.087
> 
> 标签：javascript, backbone.js

我想破坏视图并为模型制作其他视图。但我无法从旧视图解除绑定到模型的函数。

我的测试代码

```
View = Backbone.View.extend({
    initialize: function(){
       this.model.bind('change',this.render);
    },

    destroy_view: function() {

       //COMPLETELY UNBIND THE VIEW
       this.undelegateEvents();

       this.$el.removeData().unbind();

       //Remove view from DOM
       this.remove();
       Backbone.View.prototype.remove.call(this);
   },
}); 
```

我制作了新的模型和视图，我像这样破坏了视图

```
view.destroy_veiw();
delete view; 
```

但是当模型改变时仍然会调用渲染

```
model.triger('change'); 
```

我知道 model.unbind(); 可以解决这个问题，但是会解绑其他功能，我想用这个模型做其他视图。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:06:02.043

```
var View = Backbone.View.extend({

    initialize: function(){
        this.listenTo(this.model, 'change', this.render);            
    }
}); 
```

# javascript - 克服 !important 标签，使对话框可定位

> ID：15237889
> 
> 赞同：2
> 
> 时间：2013-03-06T02:28:14.947
> 
> 标签：javascript, jquery, css, jquery-ui

我正在编写一个浏览器扩展，并使用 JQueryUI 弹出一个模式对话框。问题是某些网站（例如 espn.com）也使用 JQueryUI。他们没有很好地处理自己的元素，而是将样式应用于基本的 JQueryUI 元素。令人不安的例子是：

```
.ui-widget{
   top:50% !important;
} 
```

这意味着我的扩展程序的对话框不再可定位。我通过使用更具体的选择器和我自己的 !important 标签克服了其他样式问题，但是这个让我很难过。我不希望以任何方式固定对话框的位置，我希望 JQueryUI 能够在拖动对话框时计算和更新位置，或者我执行以下操作：

```
$( ".selector" ).dialog( "option", "position", { my: "center", at: "center", of: window }); 
```

不幸的是，除了 auto （根本不起作用）之外，我唯一能给出的值是固定值。除非有人对我有 CSS 技巧，否则我认为我需要在拖动过程中动态获取 JQ 计算的位置，并用重要标签覆盖存在的任何内容。我想我需要做类似的事情

`$(this).css("top", calculatedVal + " !important");`

但我不确定如何获得计算值。如果我打开 chrome 的开发工具并选择 .ui-dialog 元素，我可以看到 JQ 计算的绝对位置值（以 px 为单位），如果我抓住并“拖动”对话框，我可以看到它们的变化。我只是不知道如何得到它们。直截了当的方法

`$(this).css("top");`

返回被覆盖的值（例如，'50%'）。有谁知道我如何获得这些动态位置值，或者有更好的方法来解决这个问题？

**编辑：**让我尝试尽可能简单地重申这一点，没有交错的例子。我自己的 JQUI 小部件的 CSS 样式受到另一个站点样式表的影响，因为他们的 CSS 正在处理广泛的基础 JQUI 类，例如“.ui-widget”。此外，他们使用 !important 标签。这意味着（我认为）我可以应用自己的样式的唯一方法是使用更具体的类定义并使用 !important 标记。这在我有一些静态设置的情况下很好用，比如字体颜色。

问题是，我希望 JQuery 能够动态更新一些 CSS，例如位置。因为站点的 css 将小部件位置设置为静态并通过使用 !important 强制它保持这种状态，所以 JQ 的更新被忽略了。我不能只设置自己的 css 覆盖，因为它需要动态更新。可能的解决方案包括：

1.  不知何故，从网站的 css 或元素属性中删除 !important 标记。
2.  获取动态计算的位置，然后使用 !important 标签自行设置。

解决方案 2 的附录：理想情况下，我会得到 JQ 在拖动期间计算的位置。不那么吸引人的是重新实现这一点并自己计算位置。

**编辑 2** 问题根本无法覆盖样式。我了解如何通过使用更具体的 css 选择器来做到这一点。问题是当我没有一个好的值可以覆盖时，而是我有一个动态变化的值。我想知道是否有比不断检索该值并设置它更好的方法来处理这个问题（比如删除 !important 标记，不知何故）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:40:10.417

有没有更具体的选择器`id`？如果没有`id`，您也可以尝试使用标签名称，然后添加`css`：

```
tagname.ui-widget {
    top: 60% !important;
} 
```

由于它更具体，因此它的优先级高于仅类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:54:29.493

您能否使用[此问题中描述的某些选项来覆盖样式？](https://stackoverflow.com/q/1720320/677526)如果您可以直接影响样式表，那么您可能有比现在更多的选择。

# c# - 为什么这个集合似乎包含对象？

> ID：15237891
> 
> 赞同：0
> 
> 时间：2013-03-06T02:28:22.117
> 
> 标签：c#, xml, configuration, app-config

我有一个类“ImageElementCollection：ConfigurationElementCollection”，其中包含“ImageElement：ConfigurationElement”类的元素。

在 StackOverflow 上使用其他一些非常聪明的人的建议，我已经弄清楚了如何在我的程序中使用这些项目：

```
MonitorConfig Config = (MonitorConfig)ConfigurationManager.GetSection("MonitorConfig"); 
```

但是，当我尝试访问此集合中的项目时...

```
foreach (var image in Config.Images) Debug.WriteLine(image.Name); 
```

...我最终在 Name 属性下得到了波浪线，因为尽管我尽了最大努力，但“图像”已被声明为对象而不是 ImageElement。

这是我在声明中做错了什么，还是每个人都只是通过在上面的那个 foreach 中将“var”交换为“ImageElement”来处理？

配置处理程序代码如下：

```
public class MonitorConfig : ConfigurationSection
{
    [ConfigurationProperty("Frequency", DefaultValue = 5D, IsRequired = false)]
    public double Frequency
    {
        get { return (double)this["Frequency"]; }
    }

    [ConfigurationProperty("Images", IsRequired = false)]
    public ImageElementCollection Images
    {
        get { return (ImageElementCollection)this["Images"]; }
    }
}

[ConfigurationCollection(typeof(ImageElement), AddItemName = "Image")]
public class ImageElementCollection : ConfigurationElementCollection
{
    public ImageElement this[object elementKey]
    {
        get { return (ImageElement)BaseGet(elementKey); }
    }

    public void Add(ImageElement element)
    {
        base.BaseAdd(element);
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new ImageElement();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return ((ImageElement)element).Name;
    }
}

public class ImageElement : ConfigurationElement
{
    [ConfigurationProperty("Name", IsRequired = true, IsKey = true)]
    public string Name 
    { 
        get { return (string)this["Name"]; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:06:32.027

Andrew Kennan 在上面的评论中提供了答案：这个集合似乎只包含对象，因为它没有实现 IEnumerable<T>。

此外，可以通过稍微调整配置处理程序来解决该问题。只需添加 IEnumerable 接口如下...

```
public class ImageElementCollection : ConfigurationElementCollection, IEnumerable<ImageElement> 
```

...然后在类的主体中粘贴一个有点像这样的方法：

```
public new IEnumerator<ImageElement> GetEnumerator()
{
    var iter = base.GetEnumerator();
    while (iter.MoveNext()) yield return (ImageElement)iter.Current;
} 
```

谢谢你，安德鲁。

# clojure - 为什么我不能在 Clojure 的 defn 正文中调用 println？

> ID：15237896
> 
> 赞同：1
> 
> 时间：2013-03-06T02:28:39.517
> 
> 标签：clojure

我有一个看起来像的功能，

```
(defn app [server]
  (println "before while...."))
  (while test
    while-body)
  (println "...after while.")) 
```

但是，当我调用 fn 时，我只会在 REPL 中看到“之前”，然后当该时间未通过测试时，“nil”。

如果我在 repl 上写一个测试 foo 就像

```
(defn foo [] 
  (println "testing before")
  (loop [i 100]
    (when (> i 10)
      (prn i)
      (recur (- i 2))))
  (println "after...")) 
```

它按我的预期工作。

如果有帮助，我已将实际代码粘贴到此处[https://www.refheap.com/paste/12147 。](https://www.refheap.com/paste/12147)

是什么解释了这里的行为差异？

## 编辑

很抱歉之前没有尝试过，但这确实适用于 REPL：

```
(defn bar []
  (let [i (atom 100)]
    (println "before...")
    (while (> @i 10)
      (swap! i dec))
    (println "after..."))) 
```

所以还有其他事情发生。

## 编辑#2

在 repl 进行更多测试，如果我注释掉 while 循环，将打印之前和之后的 println。我之前对“nil”有误解，这是在调用 while 之后调用的另一个函数的返回值。所以它似乎与while循环有关。

我注意到如果我将时间更改为此

```
(loop []
  (if test
    (do things and recur...)
    (println "test failed"))) 
```

“测试失败”永远不会打印到 repl。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T18:35:55.840

问题不是我想的那样。我阻塞了一个选择调用（在while循环中调用），这导致我的关闭函数出现问题，它结束了while循环。为选择添加超时修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T07:59:40.437

你有一个多余的 ) 在第一个 println 的末尾。

```
(defn app [server]
  (println "before while....")
  (while test
    while-body)
  (println "...after while.")) 
```

但由于这显然是您没有运行的示例代码，我预计问题出在您运行的代码*中*。如果这不能解决问题，请按原样复制并粘贴*该代码。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T06:12:44.017

在 Clojure 函数定义中，最后要评估的是返回的内容，并且 (println ...) 返回 nil

# c++ - 找到字符串模式的更好解决方案？

> ID：15237898
> 
> 赞同：0
> 
> 时间：2013-03-06T02:29:08.137
> 
> 标签：c++, vector, pattern-matching, iteration

我正在尝试找到一种最佳方法来查找字符串模式并进行比较。例如，我有 s1 =“**红蓝蓝红红黄**”和 s2 =“ **abbaac** ”。这将匹配，因为它们具有相同的模式。

我这样做的想法是遍历 s1 和 s2，使用向量容器记录相应位置的计数（对于 s1 将是相应的单词数，对于 s2 将是相应的字母数），然后进行比较。

这确实效率低下，因为我遍历整个 s1 和 s2。如果 s1 = “**红蓝红红红黄**”和 s2 = “ **abbaac** ”。在第三个**red**之后，基本上没有必要继续迭代它。

那么，关于如何做到这一点有更好的主意吗？

代码：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <array>
#include <sstream>
#include <vector>
#include <algorithm>
using namespace std;

vector<int> findPattern(string pattern){
    vector<int> counts;
    for (int i = 0; i < pattern.size(); ++i){
        counts.push_back(0);
        int counter = 0;
        for (int j = i + 1; j < pattern.size(); ++j){
            if (pattern[i] == pattern[j]){
                ++counter;              
            }   
            counts[i] = counter;    
        }
    }
    return counts;
}

vector<int> findPatternLong(string pattern){
    istringstream iss (pattern);
    string word;
    vector<string> v;
    while (iss >> word){
        v.push_back(word);
    }
    vector<int> counts2;
    for (int i = 0; i < v.size(); ++i){
        counts2.push_back(0);
        int counter = 0;
        for (int j = i + 1; j < v.size(); ++j){
            if (v[i] == v[j]){
                ++counter;
            }
            counts2[i] = counter;
        }
    }
    return counts2;
}

int main(int argc, char * argv[]){
    vector<int> v1 = findPattern("abbaac");
    vector<int> v2 = findPatternLong("red blue blue red red yellow");
    if (v1.size() == v2.size()){
        for (int i = 0; i < v1.size(); ++i){
            if (v1[i] != v2[i]){
                cout << "Unmatch" << endl;
                return false;
            }
        }
        cout << "match" << endl;
        return true;
    } else 
        cout << "Unmatch" << endl; 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:59:32.987

@Tony 以同样的想法击败了我，但既然我已经输入了这个，那就这样吧:-)

首先，不要太在意效率，关注正确性：确实，过早的优化是万恶之源。编写测试用例并确保您的代码通过每一个。

其次，我想我会从地图/字典 D 开始，并有一个循环，我将在其中解析每个字符串的一个元素（s1 中的一个单词，我们称之为“w”和 s2 中的一个字符，说“ c")，选择一个元素作为键（比如“c”字符）并检查“c”是否已经在字典中有一个条目：

*   如果我们同时用完了元素，则字符串匹配
*   如果我们在一侧用完了元素，我们就知道没有匹配项
*   如果“c”在 D 中没有条目，则存储当前值：D[c] = w;
*   否则，如果 "c" 已经有一个条目，请检查该条目是否与在字符串中找到的值匹配：是 D[c] == w? 如果不是，我们就知道没有匹配

如果该代码有效，则可以开始优化。在您的示例中，也许我们可以使用简单的数组而不是字典，因为 ASCII 字符是一个小的有限集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:52:24.563

它不是最有效的代码，但接近于最简单的代码：

```
std::map<char, std::string> letter_to_word;
std::set<std::string> words_seen;
std::istringstream iss(s1);
std::string word;
for (std::string::size_t i = 0; i < s2.size(); ++i)
{
    if (!(iss >> word))
        return false; // more letters than words
    std::string& expected_word = letter_to_word[s2[i]];
    if (expected_word == "")
    {
        // if different letters require different words...
        if (words_seen.find(word) != words_seen.end())
            return false; // multiple letters for same word
        words_seen.insert(word);

        expected_word = word; // first time we've seen letter, remember associated word
    }
    else if (expected_word != word)
        return false; // different word for same letter
}
return !(iss >> word); // check no surplus words 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:41:53.153

你不需要两个向量。

在处理第二个字符串时，将第一个模式的计数与第一个条目进行比较。如果匹配，则继续，否则停止。对第二个字符串中的其余模式重复此操作。

您不需要存储第二个字符串的模式计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T03:17:01.197

基本上，您要检查序列是否遵循相同的顺序。您不必担心顺序实际上是什么：第一第二第一第三就足够了。现在，您可以使用以某种方式将字符串映射到 int 的容器来执行此操作。但是，您将存储每个字符串的副本，而忽略了您并不真正关心字符串值的事实。对于微小的测试用例，这无关紧要，但对于大量的长词，你会在不需要的时候快速消耗内存。

因此，让我们利用我们不关心字符串值或存储它们的事实。如果是这种情况，我们可以使用哈希函数将我们的字符串转换为简单的 size_t 值，并保证它们是唯一的。但是，哈希不是连续的，我们需要根据哈希值检索序列。记录它们的序列最简单的方法是将它们映射到地图的大小以便于查找。难题的最后一块是检查哈希是否在相同的序列中。

我还假设您不仅想将一个句子与一个词进行比较，还可能是两个词或两个句子。这是一个快速的 C++11 示例，它基本上完成了上述操作，并且除非需要，否则不会在内存中保存任何内容。

当然，这仍然可以进行更多优化 - 例如，并行执行事物。

```
#include <iostream>
#include <vector>
#include <string>
#include <map>
#include <sstream>
/*
s1 = "red blue blue red red yellow"
s2 = "abbaac"
This would match because they have the same pattern.
*/
typedef std::map<size_t,size_t> hash_map;
typedef std::vector<std::string> wordlist;

size_t ordered_symbol( hash_map &h, std::string const& word )
{
    std::hash<std::string> hash_fn;
    size_t hash = hash_fn(word);
    if(h.find(hash)==h.end())
    {
        size_t const sequence = h.size();
        h[hash] = sequence;
        return sequence;
    }
    return h[hash];
}

wordlist create_wordlist( std::string const& str )
{
    if(str.find_first_of(' ') != std::string::npos)
    {
        wordlist w1;
        std::stringstream sstr(str);
        std::string s;
        while(sstr>>s)
            w1.push_back(s);
        return w1;        
    }
    wordlist w2;
    for(auto i : str)
    {
        std::string s;
        s.append(1,i);
        w2.push_back(s);
    }
    return w2;
}

bool pattern_matches( std::string const& s1, std::string const& s2 )
{
    wordlist const w1 = create_wordlist(s1);
    wordlist const w2 = create_wordlist(s2);
    if(w1.size()!=w2.size())
        return false;
    hash_map h1,h2;
    for( size_t i = 0; i!=w1.size(); ++i)
        if(ordered_symbol(h1,w1[i])!=ordered_symbol(h2,w2[i]))
            return false;
    return true;
}

void test( std::string const& s1, std::string const& s2 )
{
    std::cout<<"["<<s1<<"] "
             <<(pattern_matches(s1,s2)? "<==>" : "<=!=>")
             <<"["<<s2<<"]\n";    
}

int main()
{
    test("red blue blue red red yellow","abbaac");
    test("red blue blue red red yellow","first second second first first third");
    test("abbaac","12211g");
    test("abbaac","red blue blue red red yellow");
    test("abbgac","red blue blue red red yellow");
    return 0;
}

//Output:
//[red blue blue red red yellow] <==>[abbaac]
//[red blue blue red red yellow] <==>[first second second first first third]
//[abbaac] <==>[12211g]
//[abbaac] <==>[red blue blue red red yellow]
//[abbgac] <=!=>[red blue blue red red yellow] 
```

编辑：这是一个适用于 VS2010 的[非 C++11 版本](http://ideone.com/QGMMB9)。但是，由于 C++03 在标准库中不包含字符串散列函数，因此该示例使用了从堆栈溢出中获取的散列函数。如果您可以访问 boost 库，则可以使用[一个](https://stackoverflow.com/a/8094850/13760)更好的哈希函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T21:08:29.763

**编辑**

我刚刚读到这个问题有一个字符串中的模式，这个答案与比较不同类型的集合有关。如果首先转换了 2 个输入字符串，我想答案仍然存在*一些问题 :)*

我不会说这是最有效的解决方案，但我喜欢它的可扩展性。

首先，有`PatternResult`课。它存储模式的结果：

```
class PatternResult {
private:
    std::vector<int> result_;

public:
    PatternResult(const std::vector<int>& result) : result_(result) {
    };

    bool operator == (const PatternResult& rhs) const {
        if(result_.size() != rhs.result_.size()) 
            return false;
        else {
            for(std::vector<int>::size_type r(0);
                r < result_.size();
                ++r) {
                if(result_[r] != rhs.result_[r])
                    return false;
            };
            return true;
        };
    };
};  // eo class PatternResult 
```

它需要一个整数向量，其值表示它的值。我们重载`==`以比较两个模式结果，这意味着它们具有相同的序列，而与源数据*无关*。

然后我们需要一个模式计数器，它可以分配相同的序列号，但可以采用*任何*类型：

```
template<class T>
class PatternCounter {
private:
    typedef std::vector<T> vec_type;
    typedef std::map<T, int> map_type;
    map_type found_;
    int counter_;
public:
    PatternCounter() : counter_(1) {
    };

    PatternResult count(const vec_type& input ){
        std::vector<int> ret;
        for(vec_type::const_iterator cit(input.begin());
            cit != input.end();
            ++cit) {
            if(found_.find(*cit) != found_.end()) {
                ret.push_back(found_[*cit]);
            } else {
                found_[*cit] = counter_;
                ret.push_back(counter_);
                ++counter_;
            };
        };
        return PatternResult(ret);
    };
}; 
```

我们完成了。测试代码：

```
std::vector<std::string> inp1;
inp1.push_back("red");
inp1.push_back("blue");
inp1.push_back("blue");
inp1.push_back("red");
inp1.push_back("yellow");

std::vector<char> inp2;
inp2.push_back('a');
inp2.push_back('b');
inp2.push_back('b');
inp2.push_back('a');
inp2.push_back('c');

PatternCounter<std::string> counter1;
PatternCounter<char> counter2;

PatternResult res1(counter1.count(inp1));
PatternResult res2(counter2.count(inp2));

if(res1 == res2) {
        // pattern sequences are equal
}; 
```

请注意，这既快又脏，我相信它可以提高效率。

# google-maps - 地理编码 API 的延迟

> ID：15237900
> 
> 赞同：3
> 
> 时间：2013-03-06T02:29:20.717
> 
> 标签：google-maps, google-geocoding-api

我本来打算用`Google Geocoding API`. 我想知道在获得响应时我应该期待什么延迟？我无法在[网站](https://developers.google.com/maps/documentation/geocoding/#Geocoding)上找到这些详细信息。

如果我使用 Google Geocoding API，有谁知道实际延迟是多少？

表示从地理编码 API 获取响应需要多长时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-01-22T06:29:56.580

我们有一个在 Playstore 中运行的实时应用程序，我们每小时获得大约 120-150 次点击。我们的中位延迟约为 210 毫秒，延迟 (98%) 为 510 毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-25T19:03:58.050

我们有一个 24x7 的应用程序，每秒约 2 个请求。

中位数：197.08 毫秒第 98 个百分位（最慢的 2%）：490.54 毫秒

可能是您的应用程序的一个高瓶颈......使用一些策略来帮助您：

*   内存缓存
*   二级缓存
*   批处理持久化

[![地理编码 API 延迟](../Images/e3ff1ed5a605bf00801912daf23a6434.png)](https://i.stack.imgur.com/OudnK.png)

[![要求](../Images/54eebd3b2281ff68d7c952fe2f5982d4.png)](https://i.stack.imgur.com/J5z2H.png)

# asp.net-mvc - 如何在 ASP.NET MVC 中请求 System.Net.WebPermission 类型的权限？

> ID：15237902
> 
> 赞同：5
> 
> 时间：2013-03-06T02:29:28.517
> 
> 标签：asp.net-mvc, security, razor

我创建了一个小型 Web 服务，它使用代理创建`HttpWebRequest`到另一个网站，在我使用代理后我得到了那个错误：

> 请求“System.Net.WebPermission, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”类型的权限失败。

我不知道如何解决它。

这是我的代码，

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://website.com");
req.CookieContainer = c;

req.Proxy = new WebProxy("IP:PORT");

req.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; GTB7.4; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.2)";
req.Accept = "application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*";
req.Headers.Add("Accept-Language", "en-US");
req.ServicePoint.Expect100Continue = false;
req.AllowAutoRedirect = false;
req.Timeout = 10000;
req.Method = "GET";
req.KeepAlive = true;
req.ProtocolVersion = HttpVersion.Version10; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:45:17.060

您似乎遇到了与*信任*相关的问题。您可以通过在您的`Web.Config`, under `System.Web`,

```
<trust level="Full" /> 
```

`WebPermission`在某个环境下不可用`medium trust`（您可以查看[这篇文章](http://blogs.iis.net/hosterposter/archive/2006/03/22/Enabling-WebPermission-in-Medium-Trust.aspx)来修改此行为以及您不应该这样做的原因）。

但是，如果您需要，`full trust`您可能必须重新考虑您的应用程序的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-09T21:40:27.887

我也遇到了这个问题 - 结果是由于执行网络请求的 dll 是从网络下载的。

我必须进入文件资源管理器中的 dll 属性（右键单击>属性）并单击“取消阻止”-确保单击“应用”，然后单击“确定”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-22T07:39:08.697

转到您的项目/应用程序 (WPF) 的属性

在安全中选择启用 clickone 安全设置。并设置项目的信任级别

# php - Scala Lift - 从 Scala 运行时运行 PHP 文件

> ID：15237906
> 
> 赞同：0
> 
> 时间：2013-03-06T02:29:52.207
> 
> 标签：php, scala, lift

我不完全确定标题的措辞是否正确，但我试图做的是从 Lift 框架内运行和执行 PHP 文件。

我不是在对驻留在服务器上的 PHP 文件进行任何 url 查询，而是对通过我的 Scala/Lift 应用程序以某种方式让 PHP 运行时工作更感兴趣。

用例：我将我的应用程序打包到一个 .war 文件中，我通过云提供商托管它。我将代码片段上传到该应用程序，然后该应用程序运行 php 文件并执行任何必要的操作。

我看过关于 Bianca 的各种帖子，但我希望保持这种设置轻巧，只需要 PHP 二进制文件本身和一些代码就可以让它飞起来。

在此先感谢，如果您需要我详细说明，请告诉我:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:37:59.033

> “永远不要说永远，因为限制，就像恐惧一样，通常只是一种幻觉。”</p>
> 
> - 迈克尔·乔丹

您真正需要的是完全用 Java 编写的开源 (GPL)、可嵌入、完整的 PHP 5 实现！

[Caucho 的 Quercus PHP Java 运行时](http://www.caucho.com/resin-3.1/doc/quercus.xtp)就是这样，它可以让您在 Java 应用程序中运行 PHP，而无需外部库或本机代码。

下面是我在[这个答案中找到的 Quercus-PHP-in-Java 代码示例](https://stackoverflow.com/a/13357153/304330)

```
import javax.script.ScriptEngine;
import com.caucho.quercus.script.QuercusScriptEngineFactory;

QuercusScriptEngineFactory factory = new QuercusScriptEngineFactory();
ScriptEngine engine = factory.getScriptEngine();

String phpCode = "<?php $foo = strlen('abc'); print $foo; return 'yikes'; ?>"; //PHP Code as String
Object o = engine.eval(phpCode);
System.out.println(o); 
```

将此代码转换为惯用的 Scala 应该不费吹灰之力。显然，“phpCode”变量可以从外部 PHP 文件内容等构造。

让我们知道您的身体情况如何 ;-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:06:23.683

这有点奇怪，但如果这是您需要做的，您可以使用[ProcessBuilder](http://www.scala-lang.org/api/current/index.html#scala.sys.process.ProcessBuilder)[从命令行](http://www.php.net/manual/en/features.commandline.usage.php)执行 PHP 脚本并与之交互。

# c - 如何防止在 fgets 中回显一些字符

> ID：15237910
> 
> 赞同：1
> 
> 时间：2013-03-06T02:30:03.237
> 
> 标签：c, shell, echo, fgets

我正在使用 fgets 来读取用户输入。但是如果我按下“Ctrl+C”，我会在终端上得到一个 ^C 字符。如果有什么方法可以防止这种回声，我正在徘徊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:50:36.953

如果您所缺少的只是防止 ^C 出现在屏幕上，请使用 curses 禁用回显：

```
#include <ncurses.h>                                                              
#include <stdlib.h>                                                               

void main() {                                                                     
    char buf[90];                                                                 
    initscr();                                                                    
    noecho();                                                                     
    fgets(buf, 80, stdin);                                                        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:43:25.093

CTRL-C 用于中止当前任务并重新获得用户控制权。这是一个特殊的序列，它使操作系统向活动程序发送信号。

CTRL-C 信号的默认操作是终止活动程序，无论它是否正在执行 fgets()。覆盖它的一种方法是编写您自己的信号处理程序并在您的程序中忽略 CTRL-C ，我怀疑这是否会满足您的目的对您有任何好处。

# javascript - 如何确定多边形上点的相对位置？

> ID：15237911
> 
> 赞同：0
> 
> 时间：2013-03-06T02:30:03.943
> 
> 标签：javascript, raphael

我将从道歉开始，我正在努力表达这个问题，所以我将从我想要实现的目标开始。

我在 Raphael 中使用 Javascript。

所以，我试图存储一个点相对于多边形四个角的位置。多边形的对角可以看作在它们之间有一个轴，它总是与另一个轴成直角相交。多边形可以在任一轴上旋转和增长/缩小，但轴将保持直角。我希望该点在移动/伸展时保持在多边形上的同一位置。该点由用户单击多边形上的一个点来放置。

我希望能够获取鼠标单击的 X/Y 坐标，并将其转换为多边形内部轴的某个相对百分比或某些东西，这可能并不总是与浏览器的 X/Y 轴平行。我该怎么做？

这张图片可能有助于澄清我试图表达的想法。

![在此处输入图像描述](../Images/6f3e2822d67b6ffb8b53a3f3dde3d9c8.png)

绿点是我想存储多边形内相对位置的点。我有红色和蓝色角点的 X/Y 坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:57:44.813

考虑连接两个红点的线是 X 轴，连接蓝点的线是 Y 轴；那么您可以将多边形中的任何点表示为“沿 X 很远，沿 Y 很远”。这让您有两个问题需要解决：

1.  给定这五个点，绿点的“红蓝”坐标是多少？
2.  给定四个点和 RB 值，绿点在哪里？

为此，您可以将沿红轴的点投影到蓝轴上，反之亦然。

让红点的坐标为`(R1x, R1y)`等。然后我们执行以下操作：

```
RdirX = R2x - R1x;
RdirY = R2y - R1y;
BdirX = B2x - B1x;
BdirY = B2y - B1y; 
```

现在如果绿色坐标是`(Gx, Gy)`和“新”坐标`(RBr, RBb)`，你有以下等式：

```
RBr*RdirX + RBb*BdirX = Gx
RBr*RdirY + RBb*BdirY = Gy 
```

在这种形式下，它解决了问题的第二部分（从 RB 坐标回到欧几里得）；要朝另一个方向发展，您需要为未知数 RBr 和 RBb 求解这些方程。我怀疑如果您将多边形的中心作为坐标系的原点，事情会更好。

我已经完整地写出了方程式，并创建了一张图片来展示这一切是如何运作的：

![在此处输入图像描述](../Images/4f7aa9cf12cd7431d3b269a8c8aaf4ac.png)
![在此处输入图像描述](../Images/ed6a718e8bfd5bf2feeed8f4cbb091ae.png)

你应该可以从这里做...

# windows-phone-7 - 如何使每个列表项中的图像都有自己的处理程序？

> ID：15237913
> 
> 赞同：0
> 
> 时间：2013-03-06T02:30:15.000
> 
> 标签：windows-phone-7, windows-phone-8

[在页面中，我学习了如何使用列表框](http://3water.wordpress.com/2010/07/25/listbox-on-wp7/)

这是关于教程的图片：
我想做的是：
我想让每个项目分为两部分，
**一个是图标；另一个是文本**

如果我点击 icon-car ，它会弹出一个图片-car，但是如果我点击 icon-car 右侧的文本，它可以做其他事情，*比如一个充满文字介绍的新页面*
我知道**SelectionChanged**处理整个项目
，这意味着即使我单击图标或文本，它也会做同样的事情
你能帮我吗？？？任何建议都会很棒，示例代码会更好

![在此处输入图像描述](../Images/aa6bfc2179267882b3ce06bc010ca27c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T04:16:22.773

它说`<Image Source...` 将光标放在单词 Image 的末尾。现在按空格键，智能感知应该会弹出。选择关键字“点击”并点击标签。片刻之后，它应该打开一个事件处理程序选择。选择“新事件”然后查看您的后端代码。在你的类的基础上应该有一个新方法。输入你想要的。清洗并重复文本块。

# python - jquery.form 不能以两种形式运行

> ID：15237914
> 
> 赞同：1
> 
> 时间：2013-03-06T02:30:27.560
> 
> 标签：python, file-upload, jquery-forms-plugin, forms, http-post

我在 python 中使用 jquery form javascript。我的网站有两种形式，一种用于上传视频，另一种用于上传图片（该视频的预览图片）。使用下面的代码，如果我先提交图像然后提交视频，则运行正常，反之则失败。图像的 POST 就像[这个屏幕截图一样保持等待状态](http://i.minus.com/ieqF2nOHIrj98.jpg)

代码如下：

**HTML**

```
<div class='wrapper span12'>
    <div class='span6'>
      <h3>Upload video</h1>
      <form id='uploadvideoform' action="{{url_for('video.upload_video')}}" method="post" enctype="multipart/form-data">
        <input name="myFile" id='myFile' type="file">
        <input type='submit' value="Upload">
      </form>
      <div id="videoresult"></div>
    </div>
    <div class='span6'>
      <h3>Upload thumbnail</h1>
      <form id='uploadimgform' action="{{url_for('video.upload_img')}}" method="post" enctype="multipart/form-data">
        <input name="imgFile" id='imgFile' type="file">
        <input type='submit' value="Upload">
      </form>
      <div id="imgresult"></div>
    </div>
</div> 
```

使用 JavaScript：

```
<script>
    $(document).ready(function (e) {
      //ajax upload video
      $('#uploadvideoform').ajaxForm({
        beforeSubmit: function() {
            $('#videoresult').html('Submitting...  <img src="/static/img/loading-2.gif" />');
        },
        success: function(data) {
            var preview_str='';
            var $out = $('#videoresult');
            preview_str += '<video src="http://localhost:5001/static/' + data.video_link +'" controls type="video/mp4" width=480 height=270></video>';
            $out.html(preview_str);
            $('#url').val(data.video_link);
        }
      });

      //ajax upload img
      $('#uploadimgform').ajaxForm({
        beforeSubmit: function() {
            $('#imgresult').html('Submitting...  <img src="/static/img/loading-2.gif" />');
        },
        success: function(data) {
            var preview_str='';
            var $out = $('#imgresult');
            preview_str += '<img src="http://localhost:5001/static/' + data.img_link +'" width=400 />';
            $out.html(preview_str);
            $('#imgPath').val(data.img_link);
        }
      });
    });
</script> 
```

和服务器端：

```
@video.route('/upload_video', methods=['GET','POST'])
def upload_video():
    if request.method == 'POST':
        current_time = datetime.now().strftime("%Y-%m-%d")
        savepath = os.path.join(app.config['UPLOAD_VIDEO']) + '\\' + current_time
        file = request.files['myFile']
        if not os.path.exists(savepath):
          os.mkdir(savepath)
        savepath = savepath + '\\' + file.filename
        file.save(savepath)
        flash(_("video uploaded successfully!"), "success")
        status = 'success'
        video_link = 'video\\'+current_time+'\\'+file.filename

    return jsonify(status=status, video_link=video_link)

@video.route('/upload_img', methods=['GET','POST'])
def upload_img():
    if request.method == 'POST':
        print 'co vo roiiiiiiiiiiiiiiiiiiiii'
        savepath = os.path.join(app.config['UPLOAD_VIDEO_THUMBNAIL'])
        file = request.files['imgFile']
        if not os.path.exists(savepath):
          os.mkdir(savepath)
        savepath = savepath + '\\' + file.filename
        print savepath
        file.save(savepath)
        print 'save xong'
        flash(_("image uploaded successfully!"), "success")
        status = 'success'
        img_link = 'img\\video\\'+file.filename

    return jsonify(status=status, img_link=img_link) 
```

# json - 是否有谷歌 API 来计算两个词（例如搜索词）的相关程度？

> ID：15237916
> 
> 赞同：1
> 
> 时间：2013-03-06T02:30:52.993
> 
> 标签：json, statistics

有没有办法使用谷歌提供的任何 API 尽可能客观地估计两个术语之间的相关性？这将排除谷歌使用的个人建议或“云”。

理想情况下，我想以 json 格式获取输出，以便可以轻松地将其插入 C#。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:38:45.993

我将发布一个很大的“可能不会”。这是谷歌赚钱所需的最专有信息之一，而且几乎可以肯定它是不公开的。（“有没有”形式的问题很难明确回答；但我认为这种推理增加了作为答案发布的价值。）

# html - 我需要澄清一下动态设置悬停 BG

> ID：15237917
> 
> 赞同：0
> 
> 时间：2013-03-06T02:31:03.533
> 
> 标签：html, css

这是我的代码：

```
function recordStarted() {
$("#red_button").css("background","url(stop.png)");
$("#red_button").css("background-repeat","no-repeat");

$("#red_button:hover").css("background","url(stop-hover.png)");
$("#red_button:hover").css("background-repeat","no-repeat");
} 
```

我有第二行设置的 div 层的背景，但是当我尝试设置悬停背景时，它就变成了背景。我将如何动态设置 :hover 背景？

CSS：

```
.red_button 
{
background:url(record.png);
padding: 19px 251px;
cursor: pointer;
background-repeat: no-repeat;
}

.red_button:hover 
{
background:url(record-hover.png);
cursor: pointer;
background-repeat: no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:36:39.837

您可以简单地使用 css 来执行此操作：

```
#red_button {
  background: "url(stop.png)";
  background-repeat: no-repeat;
}

#red_button:hover {
  background: "url(stop-hover.png)";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:42:07.470

那是jQuery。:hover 不是 jQuery 选择器的一部分。你可以在css中做到这一点。但是如果你出于某种原因决定在其中使用 jQuery，你应该做的是将 stop.png 的背景图像分配给你的 css 到 #red_button。然后也添加到您的 css #red_button.hover 并将另一个图像分配给它作为背景。然后在jQuery中使用

```
$("#red_button").hover(function () {
    $(this).addClass("hover");
  },
  function () {
    $(this).removeClass("hover");
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:55:32.447

您不需要 javascript 来执行此操作，只需要 css。我建议使用 css sprite 系统，以便在按钮悬停时不需要下载第二张图像，这可能会导致按钮在加载悬停图像时消失片刻。

本质上，使用 CSS Sprites，您将拥有一个图像，其中包含彼此相邻的默认状态和悬停状态，然后按钮将像窗口一样操作，从而使用`background-position`CSS 属性将图像的正确部分移动到视图中，具体取决于状态.

（我知道每个人都讨厌 W3Schools，但这是一个很好的基本概念教程）

查看以下教程以了解有关 CSS 精神的更多信息。

[http://www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)

# python - 在 cx_Oracle 中搜索名称

> ID：15237919
> 
> 赞同：0
> 
> 时间：2013-03-06T02:31:28.593
> 
> 标签：python, oracle, cx-oracle

我有`var='smth'`并且我需要检查`var`表'smtb'中是否存在

我试过这个，但它不起作用：

```
rows=curs.fetchall()
for row in rows:
            if var==row:
                print("Yes") 
```

当我打印行的元素时，我得到一些像这样的模式：

```
('element',) 
```

如何检查`var`表中是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:31:45.787

*不要*在 Python 中这样做。如果您想在数据库表中搜索某些东西，迄今为止最快和最有效的方法是在 SQL 中进行。不要忘记使用[绑定变量](http://docs.oracle.com/cd/E11882_01/server.112/e25789/glossary.htm#CNCPT44447)。

假设您有一个游标对象`curs`，它可能看起来像这样（假设您的表在 上是唯一的`var`）。

```
>>> sql = "select * from my_table where var = :var"
>>> bind_variables = {'var' : 'smth'}
>>>
>>> curs.execute(sql, bind_variables)
[<cx_Oracle.STRING with value None>]
>>> results = curs.fetchall()
>>> results
[('smth',)]
>>> try:
...     var = results[0][0]
...     print ('Yes')
... except IndexError:
...     print ('No')
...
Yes 
```

然后，如果您正在寻找不存在的东西，您会得到以下信息。

```
>>> bind_variables = {'var' : 'other'}
>>> results = curs.fetchall()
>>> results
[]
>>> try:
...     var = results[0][0]
...     print ('Yes')
... except IndexError:
...     print ('No')
...
No 
```

您没有得到您期望的实际原因是 cx_Oracle 根据[PEP 249](http://www.python.org/dev/peps/pep-0249/)返回一个元组列表。您期望只返回一列，因此您需要访问元组的第 0^个索引，如果您想按照自己的方式进行操作。

```
>>> rows = [('other',),('smth',)]
>>> var = 'smth'
>>> for row in rows:
...     if var == row[0]:
...         print ('Yes')
...
Yes 
```

# uiscrollview - 打开自动布局时的 UIScrollView（故事板）

> ID：15237921
> 
> 赞同：0
> 
> 时间：2013-03-06T02:31:32.020
> 
> 标签：uiscrollview, xcode4.5

我正在与 UIScrollview 搏斗，它把我击倒了。我试图参考 stackOverFlow 上的以下两篇文章

[scrollview xcode4.5](https://stackoverflow.com/questions/12747710/scrollview-xcode4-5-autolayout)自动布局， [Xcode 4.5 UIScrollView](https://stackoverflow.com/questions/12747603/xcode-4-5-uiscrollview)， [在 iOS 6 上使用自动布局在 ScrollView 中嵌入 ImageView](https://stackoverflow.com/questions/12619786/embed-imageview-in-scrollview-with-auto-layout-on-ios-6)，

我尝试了 viewDidLayoutSubviews，正如 [UIScrollView setContentSize 中所说的那样，使用自动布局打破了](https://stackoverflow.com/questions/13439304/uiscrollview-setcontentsize-breaks-view-with-auto-layout)导致我的应用程序崩溃的视图。

我尝试了 ViewDidLoad、viewDidAppear 和 viewWillAppear，但没有任何效果。我尝试了谷歌，发现了一些更相关的帖子 [https://coderwall.com/p/zfe8da](https://coderwall.com/p/zfe8da)，[http://www.devx.com/wireless/Article/45113](http://www.devx.com/wireless/Article/45113)

我试图重新思考，并没有发现我没有做的任何花哨的事情。这似乎很简单，直接的方法。

我没有线索或任何猜测请帮助我。

我正在使用以下代码，只是提到我在 ScrollView 中放置了 3 张图像。我将它们堆叠在一起，因此高度大于 iPhone 屏幕高度。我期待它我将它们设置为简单滚动，但我猜我错了。 ***在实施文件中***

```
_howtoScrollView.frame = CGRectMake(0, 0, 320, 460);
_howtoScrollView.scrollEnabled = YES;
[self.howtoScrollView setContentSize:CGSizeMake(self.howtoScrollView.frame.size.width, 700)];
[self.view addSubview:_howtoScrollView]; 
```

***在接口文件.h***

```
@property (weak, nonatomic) IBOutlet UIScrollView *howtoScrollView; 
```

任何在拥有 StoryBoard Autolayout 的同时使用 ScrollView 取得成功的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:29:39.973

尝试在没有“addSubview”功能的情况下执行此操作。我认为使用 AutoLayout 会覆盖您的其他设置...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T23:47:59.243

我也有这个问题。苹果在发行说明中隐藏了解释。 [http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0)。查看 UIKit 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T06:51:43.257

使用界面生成器，

展开滚动视图的约束部分。然后选择“水平空间约束”。在该部分下，您可能对“常量”值具有负值。将其更改为`0`. 它会成功的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T02:43:16.633

尝试删除`_howtoScrollView.frame = CGRectMake(0, 0, 320, 460);`，看看它是否有效。

如果你真的需要改变视图的框架，在 Autolayout 中，你不应该直接在你的代码中设置框架，你应该修改它`Constraint`。

# ios - 在 UINavigationBar 中隐藏或禁用 UIBarButtonItem

> ID：15237922
> 
> 赞同：3
> 
> 时间：2013-03-06T02:31:34.990
> 
> 标签：ios, objective-c, xcode, uinavigationbar, uibarbuttonitem

我正在展示带有 Modal Segue 的 UIViewController。这个 UIViewController 继承了一个 UINavigationBar，我在导航栏的左侧设置了一个 UIBarButtonItem：

![帮我！！！](../Images/a2124c21c88044a2e28772ea2e7457b4.png)

我的问题是，当调用呈现的 UIViewController 的 viewWillAppear 方法时，我试图隐藏 UIBarButtonItem，但 UIBarButtonItem 总是出现。我为 UIViewController 声明了一个 UIBarButtonItem，名为 myCancelButton，并在 Interface Builder 中引用了它。

这是我到目前为止尝试过的（所有这些都不起作用）：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.navigationItem.leftBarButtonItem = nil;
    self.navigationItem.backBarButtonItem = nil;
    self.myCancelButton = nil;

    NSMutableArray *barButtonItems = [self.navigationItem.leftBarButtonItems mutableCopy];
    [barButtonItems removeObject:self.myCancelButton];
    self.navigationItem.leftBarButtonItems = barButtonItems;

    [self.navigationItem.leftBarButtonItems delete:self.myCancelButton];

    self.navigationController.navigationItem.leftBarButtonItem = nil;
    barButtonItems = [self.navigationController.navigationItem.leftBarButtonItems mutableCopy];
    [barButtonItems removeObject:self.myCancelButton];
    self.navigationController.navigationItem.leftBarButtonItems = barButtonItems;

    [self.navigationController.navigationItem.leftBarButtonItems delete:self.myCancelButton];

    [self.myCancelButton setWidth:0.01];

    self.navigationItem.hidesBackButton = TRUE;

    //Even setting enabled to false doesn't work:
    [self.myCancelButton setEnabled:FALSE];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:42:27.533

这应该有效。

```
[self.navigationItem setHidesBackButton:YES animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T07:04:28.547

尝试使用这个

```
self.navigationController.navigationItem.leftBarButtonItem = nil;
[self.navigationController.navigationItem setHidesBackButton:YES]; 
```

# javascript - Firefox 的 iframe 内未触发关键事件

> ID：15237924
> 
> 赞同：0
> 
> 时间：2013-03-06T02:31:51.283
> 
> 标签：javascript, jquery, firefox, iframe, javascript-events

我有自己的小型自制 JSFiddle 网站，主要是为了好玩而构建的，到目前为止它运行良好，但我只在 Chrome 中开发。我想提到这一点，因为我认为我的问题可能（希望）能够通过更改我的小沙箱来解决，但这是我的主要问题：

在我的沙箱中，我开发了一个小型 Snake 实现，它依赖于按键事件来控制播放器。在 Chrome 中一切正常，我对此非常满意，但在 Firefox 中，我无法控制播放器。你可以在这里看到我的设置：

[http://willseph.com/sandbox/?id=ORWx7miv](http://willseph.com/sandbox/?id=ORWx7miv)

播放器应该是用箭头键或 WASD 控制的，但它们似乎在 Firefox 中不起作用。我在[另一篇文章](https://stackoverflow.com/questions/1717897/jquery-keydown-on-div-not-working-in-firefox)中看到该`tabindex="0"`属性应该添加到应该获得焦点的元素中（虽然我不确定哪个元素会是，但我尝试将它放在父文档中包含渲染 iframe 的元素中，即 iframe 元素本身，以及 iframe 内的容器 div）。

任何人都可以对此有所了解吗？我很想弄清楚为什么会这样。

**更新：**

我刚刚在 JSFiddle 上上传了相同的代码，我遇到了同样的问题。键盘控件适用于 Chrome，但不适用于 Firefox：

[http://jsfiddle.net/Ud876/1/embedded/result/](http://jsfiddle.net/Ud876/1/embedded/result/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:12:53.627

你的问题，在我用萤火虫的测试中，似乎在这里：

```
$(window).keydown(function () {
    //                      ^ --- no event object passed to function
    game.onKeyDown(event, game);
}); 
```

[请参阅此处](http://jsfiddle.net/egrUF/embedded/result/)的固定小提琴。

# c++ - 如何使 C++ 结构包含其他结构作为成员变量

> ID：15237926
> 
> 赞同：-1
> 
> 时间：2013-03-06T02:32:13.550
> 
> 标签：c++, data-structures

我想知道如何在来自另一个结构的结构中定义一个变量。例如：

```
struct Date
{
    int month;
    int day;
    int year;
};

struct Profile
{
    START DATE
    END DATE
    int hours_worked
    etc...
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T02:33:12.033

```
struct Profile {
    Date start;
    Date end;
    // etc...
}; 
```

这就是你想要的吗？如果是这样，我强烈建议手头有一本教科书，而不是在你更老练之前将它作为 C++ 问题的首选。如果没有，请更新您的问题。

# javascript - 如何更改类 onclick？

> ID：15237928
> 
> 赞同：0
> 
> 时间：2013-03-06T02:32:30.517
> 
> 标签：javascript, css, jquery

此代码与 soundcloud 的小部件一起使用以允许远程文本按钮，我试图使其作为一个图像按钮的遥控器工作，该按钮具有不同的图片暂停/播放，具体取决于所选的类，而不是 txt_on_pause txt_on_play。关于如何切换的任何想法？

```
$(function () {
    var widgetIframe = document.getElementById('sc-widget'),
        widget = SC.Widget(widgetIframe),
        txt_on_pause = '&iexcl;Escuchar m&uacute;sica!',
        txt_on_play = 'Escuchando algo de m&uacute;sica... (click para pausar)';
    widget.bind(SC.Widget.Events.READY, function () {
        $(".sc-toggle").html(txt_on_pause);
    });
    widget.bind(SC.Widget.Events.PAUSE, function () {
        $(".sc-toggle").html(txt_on_pause);
    });
    widget.bind(SC.Widget.Events.PLAY, function () {
        $(".sc-toggle").html(txt_on_play);
    });
    $(".sc-toggle").click(function (e) {
        e.preventDefault();
        widget.toggle();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:37:14.620

使用`addClass`and`removeClass`函数应该可以工作。

```
$(function () {
    var widgetIframe = document.getElementById('sc-widget'),
        widget = SC.Widget(widgetIframe),
        txt_on_pause = '&iexcl;Escuchar m&uacute;sica!',
        txt_on_play = 'Escuchando algo de m&uacute;sica... (click para pausar)';

    widget.bind(SC.Widget.Events.READY, function () {
        $(".sc-toggle")
            .removeClass('pause')
            .removeClass('play')
            .addClass('ready'));
    });
    widget.bind(SC.Widget.Events.PAUSE, function () {
        $(".sc-toggle")
            .removeClass('play')
            .removeClass('ready')
            .addClass('pause');
    });
    widget.bind(SC.Widget.Events.PLAY, function () {
        $(".sc-toggle")
            .removeClass('pause')
            .removeClass('ready')
            .addClass('play');
    });
    $(".sc-toggle").click(function (e) {
        e.preventDefault();
        widget.toggle();
    });

}); 
```

# php - 在数据库中插入行，错误

> ID：15237933
> 
> 赞同：-2
> 
> 时间：2013-03-06T02:33:04.940
> 
> 标签：php, mysql, sql, database

我一直在尝试在我的数据库中添加一行，但无论我做什么，我都会不断收到相同的错误。错误是 Parse error: syntax error, unexpected T_STRING 。这是我的代码：

```
<!DOCTYPE html>
<html>
<body>
<?php
$con=mysqli_connect("mysql5.000webhost.com","********","******","*******");
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
//Connecting to the Database works
INSERT INTO test (`1`, `2`, `3`, `4`) VALUES (\'11\', \'11\', \'11\', \'11\');
mysqli_close($con);
?>  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:34:48.593

删除`\`语句中的

```
$query = "INSERT INTO test (`1`, `2`, `3`, `4`) VALUES ('11', '11', '11', '11')"; 
```

但如果列是整数，

```
$query = "INSERT INTO test (`1`, `2`, `3`, `4`) VALUES (11, 11, 11, 11)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T02:41:26.053

您需要执行查询 -[`mysqli_query()`](http://www.php.net/manual/en/mysqli.query.php)

```
$query = mysqli_query("INSERT INTO test (`1`, `2`, `3`, `4`) VALUES ('11', '11', '11', '11')"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T02:42:02.960

我注意到你的 sql 语句写得好像是 php 代码。php解释器不直接解析SQL。您需要先将 sql 放入变量中，然后执行该语句。另外，您正在转义单引号，不好

```
 $sql="INSERT INTO test (`1`, `2`, `3`, `4`) VALUES ('11', '11', '11', '11')";
    $result = $db->query($sql);

    while ($data = $result->fetch_assoc())
    {
       $retval[]= $data;
    } 
```

假设 $db 是一个有效的连接

# scala - “覆盖”继承的方差

> ID：15237936
> 
> 赞同：4
> 
> 时间：2013-03-06T02:33:40.540
> 
> 标签：scala

这感觉很基本；我很抱歉。

考虑

```
trait Foo[+T] { def t : T }  
trait Bar[+S,+T] extends Foo[T] { def s : S }  
trait Baz[+S,T] extends Foo[T] { def s : S } 
```

Foo 中 T 的协方差是否自动适用于 Baz，即使 Baz 中的 T 未标记为协变？Bar 和 Baz 的行为之间会有任何有意义的区别吗？

（玩弄一下，这两种形式似乎很难区分。如果它们相同，那么 Baz 形式没有警告或发出错误信号会让人感觉很脏，因为单独看 Baz 你会认为 T 不是变体。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T02:42:19.150

不，`Baz[T]`不会继承 的协方差`Foo[+T]`。必须明确标记协方差。这是一个例子，

```
class Foo[+T] {}
class Baz[T] extends Foo[T] {}

(new Foo[String]) : Foo[Any] // Ok: Foo[+T] is covariant
(new Baz[String]) : Foo[Any] // Ok: Baz[String] <: Foo[String] <: Foo[Any]
(new Baz[String]) : Baz[Any] // Error: Baz[T] is invariant in type T 
```

# eclipse - eclipse tfs 插件无法连接到 tfs 服务器

> ID：15237938
> 
> 赞同：4
> 
> 时间：2013-03-06T02:33:59.090
> 
> 标签：eclipse, tfs, team-explorer-everywhere

我们已经安装并运行了 TFS 服务器`http://myhost:8080/tfs/web/`。我已经安装了 Eclipse TFS 插件并将 Eclipse 更新到 4.2 但是，当我尝试在 Team Explorer 透视图中添加 TFS 服务器时，我得到“服务器 myhost 无法响应” 我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T03:09:07.260

Eclipse has some issues with the default proxy detection.

Go to Window -> Preferences -> General -> Network Connections and set Proxy to anything other than Native.

You can choose Direct, but you'll have issues if you need to perform software updates or installation. Or you can choose Manual and configure your proxy settings manually.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T19:05:53.570

刚刚找到答案。这是因为“Cisco AnyConnect 网络安全代理”正在我的机器上运行。我把它关掉了，现在 TFS 插件正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T07:09:47.793

在您的服务器连接页面中使用 URL`http://myhost:8080/tfs`而不是`http://myhost:8080/tfs/web/`?

# php - 在php中为openssl_pkcs7_sign创建证书

> ID：15237941
> 
> 赞同：2
> 
> 时间：2013-03-06T02:34:13.520
> 
> 标签：php, openssl

关于在 php 中使用 pkcs7 签署电子邮件的文档，我必须使用先前生成的证书。

在 openssl 中准确生成此示例所需文件的命令是什么？ [http://www.php.net/manual/it/function.openssl-pkcs7-sign.php](http://www.php.net/manual/it/function.openssl-pkcs7-sign.php)

```
<?php
// the message you want to sign so that recipient can be sure it was you that
// sent it
$data = <<<EOD

You have my authorization to spend $10,000 on dinner expenses.

The CEO
EOD;
// save message to file
$fp = fopen("msg.txt", "w");
fwrite($fp, $data);
fclose($fp);
// encrypt it
if (openssl_pkcs7_sign("msg.txt", "signed.txt", "mycert.pem",
    array("file://mycert.pem", "mypassphrase"),
    array("To" => "joes@example.com", // keyed syntax
          "From: HQ <ceo@example.com>", // indexed syntax
          "Subject" => "Eyes only")
    )) {
    // message signed - send it!
    exec(ini_get("sendmail_path") . " < signed.txt");
}
?> 
```

在此先感谢您的帮助。

编辑1：

```
$prepend = "file:/";
openssl_pkcs7_sign($prepend . realpath(dirname(__FILE__)) . "/text.txt",
$prepend . realpath(dirname(__FILE__)) . "/enc.txt",
$prepend . realpath(dirname(__FILE__)) . "/selfcert.pem",
array($prepend . realpath(dirname(__FILE__)) . "/enc_key.pem", "123456"),
$headers); 
```

我用命令生成了证书文件

```
openssl req -x509 -days 365 -newkey rsa:1024 -keyout enc_key.pem -out selfcert.pem 
```

仍然得到错误：

警告：openssl_pkcs7_sign()：获取私钥时出错...

编辑2：添加前置

也许它与“预先准备”有关？我真的不确定问题是在文件检索还是密钥本身。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T05:14:34.380

我自己解决了。问题是正确检索密钥。所以对于每个遇到这个问题的人：

```
$prepend = "file://";
openssl_pkcs7_sign(realpath(dirname(__FILE__)) . "/text.txt",
        realpath(dirname(__FILE__)) . "/enc.txt",
        $prepend . realpath(dirname(__FILE__)) ."/selfcert.pem",
        array($prepend . realpath(dirname(__FILE__)) ."/enc_key.pem", "123456"), $headers); 
```

# c# - Json对类映射Restsharp反序列化的响应

> ID：15237942
> 
> 赞同：4
> 
> 时间：2013-03-06T02:34:37.013
> 
> 标签：c#, json, windows-phone-7, deserialization, restsharp

我正在使用 RestSharp 来使用一个安静的 web 服务。我正在使用内置的 Json Deserializer 来反序列化响应。这是回应。

```
[{"id":"1","latitude":"18.0155848","longitude":"-77.4988293","rating":"1","streetid":"1","username":"joel","verified":"1"},{"id":"2","latitude":"18.0155892","longitude":"-77.498774","rating":"1","streetid":"2","username":"joel","verified":"0"},{"id":"3","latitude":"18.0227736","longitude":"-77.4980039","rating":"1","streetid":"3","username":"joel","verified":"0"}] 
```

这些是它被映射到的模型。

```
List<Pothole> list = new List<Pothole>();

 public class Pothole
 {
    //getters and setters for the attributes of Pothole Model
    public long Id { get; set;}
    public double Latitude { get; set; }
    public double Longitude { get; set; }
    public double Rating{ get;set;}
    public long StreetId { get; set; }
    public string Username { get; set; }
    public bool Verified { get; set; }
} 
```

但是，当我拨打电话时，数据没有被反序列化。我想知道 json 对类映射的响应是否有问题。由于返回的坑洞对象数组，我将响应映射到坑洞列表。我检查 HTTP 状态代码和响应的内容，以便返回数据，它只是反序列化导致问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:55:52.047

尝试这个：

```
public class Pothole
{
    public string id { get; set; }
    public string latitude { get; set; }
    public string longitude { get; set; }
    public string rating { get; set; }
    public string streetid { get; set; }
    public string username { get; set; }
    public string verified { get; set; }
} 
```

C# 区分大小写，因此在填充 C# 对象时发生的反射将查找名称与 JSON 字符串中的名称完全相同的属性。

此外，如果您使用的是 Visual Studio 2012 SP 1，您实际上可以将 JSON 文本粘贴为 C# 类。很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T13:17:00.717

或者你也可以使用：[Json2Csharp](http://json2csharp.com/)

```
generate c# classes from json 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T18:55:22.813

派对迟到了，但我想我会投入 0.02 美元。我正在使用未经修改的 RestSharp.Portable 1.6.2 Xamarin PCL

我有如下的json：

```
{"blah":{"iPAddress":"10.1.1.x","cPU":"1 vCPU","dNSName":"blah.blah.com"}} 
```

对于下面的类，反序列化不适用于 CPU，但适用于 DSName 和 IPAddress。

```
public class Blah
{
    public string CPU { get; set; }
    public string DNSName { get; set; }
    public string IPAddress { get; set; }
} 
```

但是，如果我将 CPU 更改为 CPU，它就可以正常工作。

```
public class Blah
{
    public string cPU { get; set; }
    public string DNSName { get; set; }
    public string IPAddress { get; set; }
} 
```

所以，感觉就像一个错误，只是想做出贡献。

# c++ - 不同派生类的增强反序列化的正确类型转换

> ID：15237947
> 
> 赞同：3
> 
> 时间：2013-03-06T02:35:19.593
> 
> 标签：c++, serialization, boost, boost-serialization

在我的应用程序中，有不同类型的代理。我打算使用boost序列化在代理之间发送/接收数据。（通过发送/接收，我实际上是指对序列化目标文件进行写/读操作）

接收代理可以接收预先不知道类型的不同数据的数据。假设数据格式具有如下一般结构：

```
class Base
{
 public:
  int message_type_id;
}

class Derived_1
{
 public:
 Derived_1(int message_type_id_):message_type_id(message_type_id_){}
 struct data_1 {...}; 
};

class Derived_2
{
 public:
 Derived_2(int message_type_id_):message_type_id(message_type_id_){}
 struct data_2 {...}; 
}; 
```

发送代理可以发送（即序列化）两种派生类型中的任何一种。类似地，接收代理可以接收（即反序列化）两种派生类型中的任何一种；而我在[教程中看到的（通过基类指针转储派生类）](http://www.ibm.com/developerworks/aix/library/au-boostserialization/index.html?ca=drs-)是这样的：

```
void save() 
{ 
  std::ofstream file("archive.xml"); //target file
  boost::archive::xml_oarchive oa(file); 
  oa.register_type<date>( );// you know what you are sending, so you make proper modifications here to do proper registration
  base* b = new date(15, 8, 1947);
  oa & BOOST_SERIALIZATION_NVP(b); 
} 

void load() 
{ 
  std::ifstream file("archive.xml"); //target file
  boost::archive::xml_iarchive ia(file); 
  ia.register_type<date>( );// I don't know which derived class I am receiving, so I can't do a proper registration
  base *dr;
  ia >> BOOST_SERIALIZATION_NVP(dr); 
  date* dr2 = dynamic_cast<date*> (dr); 
  std::cout << dr2;
} 
```

如您所见，`xml_oarchive`并`xml_iarchive`在`register_type<date>`序列化/反序列化之前进行。所以接收端会提前知道要做什么`dynamic_cast`。而在我的情况下，因为我知道我要发送什么，我可以根据具体情况进行适当的注册和序列化。但是，在接收端，我事先不知道要注册什么以及要动态投射什么。

有没有办法可以提前告诉类型以便接收可以进行铸造？

谢谢

**编辑：** 这是对[demo.cpp](http://www.boost.org/doc/libs/1_53_0/libs/serialization/example/demo.cpp)的简化修改，我保存了一个对象，然后将其恢复。

```
#include <cstddef> // NULL
#include <iomanip>
#include <iostream>
#include <fstream>
#include <string>

#include <boost/archive/tmpdir.hpp>

#include <boost/archive/text_iarchive.hpp>
#include <boost/archive/text_oarchive.hpp>

#include <boost/serialization/base_object.hpp>
#include <boost/serialization/utility.hpp>
#include <boost/serialization/list.hpp>
#include <boost/serialization/assume_abstract.hpp>

/*
 bus_stop is the base class. 
 bus_stop_corner and bus_stop_destination are derived classes from the above base class.
 bus_route has a container that stores pointer to the above derived classes
 */

class bus_stop
{
    friend class boost::serialization::access;
    virtual std::string description() const = 0;
    template<class Archive>
    void serialize(Archive &ar, const unsigned int version)
    {
        ar & type;
    }
protected:
public:
    std::string type;
    bus_stop(){type = "Base";}
    virtual ~bus_stop(){}
};

BOOST_SERIALIZATION_ASSUME_ABSTRACT(bus_stop)

class bus_stop_corner : public bus_stop
{
    friend class boost::serialization::access;
    virtual std::string description() const
    {
        return street1 + " and " + street2;
    }
    template<class Archive>
    void serialize(Archive &ar, const unsigned int version)
    {
        // save/load base class information
        ar & boost::serialization::base_object<bus_stop>(*this);
        ar & street1 & street2;
    }

public:
    std::string street1;
    std::string street2;
    bus_stop_corner(){}
    bus_stop_corner(
        const std::string & _s1, const std::string & _s2
    ) :
        street1(_s1), street2(_s2)
    {
        type = "derived_bs_corner";
    }
};

class bus_stop_destination : public bus_stop
{
    friend class boost::serialization::access;

    virtual std::string description() const
    {
        return name;
    }
    template<class Archive>
    void serialize(Archive &ar, const unsigned int version)
    {
        ar & boost::serialization::base_object<bus_stop>(*this) & name;
    }
public:
    std::string name;
    bus_stop_destination(){}
    bus_stop_destination(
        const std::string & _name
    ) :
        name(_name)
    {
        type = "derived_bs_destination";
    }
};

class bus_route
{

    friend class boost::serialization::access;
    typedef bus_stop * bus_stop_pointer;
    template<class Archive>
    void serialize(Archive &ar, const unsigned int version)
    {
        ar.register_type(static_cast<bus_stop_corner *>(NULL));
        ar.register_type(static_cast<bus_stop_destination *>(NULL));
        ar & stops;
    }
public:
    std::list<bus_stop_pointer> stops;
    bus_route(){}
    void append(bus_stop *_bs)
    {
        stops.insert(stops.end(), _bs);
    }
};

//BOOST_CLASS_VERSION(bus_route, 2)

void save_schedule(const bus_route s, const char * filename){
    // make an archive
    std::ofstream ofs(filename);
    boost::archive::text_oarchive oa(ofs);
    oa << s;
}

void
restore_schedule(bus_route &s, const char * filename)
{
    // open the archive
    std::ifstream ifs(filename);
    boost::archive::text_iarchive ia(ifs);
    // restore the schedule from the archive
    ia >> s;
}

int main(int argc, char *argv[])
{
    bus_stop *bs1 = new bus_stop_corner(
        "First St", "Second st"
    );
    bus_stop *bs2 = new bus_stop_destination(
        "myName"
    );

    // make a  routes
    bus_route original_route;
    original_route.append(bs1);
    original_route.append(bs2);

    std::string filename1(boost::archive::tmpdir());
    filename1 += "/demofile1.txt";

    save_schedule(original_route, filename1.c_str());
    bus_route new_route ;

    restore_schedule(new_route, filename1.c_str());
////////////////////////////////////////////////////////
    std::string filename2(boost::archive::tmpdir());
    filename2 += "/demofile2.txt";
    save_schedule(new_route, filename2.c_str());

    delete bs1;
    delete bs2;
    return 0;
} 
```

旧对象和新对象不相等，因为再次将新对象保存（序列化）到另一个文件会导致不同的（空）内容。您能否让我知道如何修复此代码以成功反序列化派生类？非常感谢

**EDIT-2** 现在上面的代码没有任何问题（在修复了一个小错字之后）。我在这里回答我自己的问题，因为其他人提出了另一种好方法。所以我的第一个问题的**答案**是这样的：只要您在主序列化函数中注册派生类型（在上述情况下：bus_route 类中的 serialize() ）一切都应该没问题。

感谢所有的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T08:27:19.293

一个解决方案是（反）序列化`boost::shared_ptr<Base>`。下面的代码演示了它。反序列化后是该类`pDst`的一个实例。[此链接](http://liveworkspace.org/code/33ZJDX%241)`Derived_1`上提供了使用在线编译器编译的代码。

```
#include <boost/serialization/access.hpp>
#include <boost/serialization/assume_abstract.hpp>
#include <boost/serialization/shared_ptr.hpp>
#include <boost/serialization/nvp.hpp>
#include <boost/noncopyable.hpp>
#include <boost/make_shared.hpp>
#include <boost/smart_ptr/shared_ptr.hpp>

class Base {
    friend class boost::serialization::access;
public:
    Base();
    virtual ~Base();
private:
    template<class Archive> void serialize(Archive &ar, const unsigned int version) {}
public:
    virtual bool operator ==(const Base &rh) const = 0;
};

BOOST_SERIALIZATION_ASSUME_ABSTRACT(Base)
BOOST_SERIALIZATION_SHARED_PTR(Base)

Base::Base() {
}

Base::~Base() {
}

class Derived_1 : boost::noncopyable, public Base {
    friend class boost::serialization::access;
public:
    int m_iValue;
public:
    Derived_1();
    Derived_1(int iValue);
private:
    template<class Archive> void serialize(Archive &ar, const unsigned int version) {
        ar & BOOST_SERIALIZATION_BASE_OBJECT_NVP(Base);
        ar & boost::serialization::make_nvp("value", m_iValue);
    }
public:
    bool operator ==(const Base &rh) const;
};

BOOST_SERIALIZATION_SHARED_PTR(Derived_1)

Derived_1::Derived_1() : m_iValue(0) {
}

Derived_1::Derived_1(int iValue) : m_iValue(iValue) {
}

bool Derived_1::operator==(const Base &rh) const {
    const Derived_1 *pRH = dynamic_cast<const Derived_1 *>(&rh);
    return pRH != nullptr && pRH->m_iValue == this->m_iValue;
}

#include <boost/serialization/export.hpp>
#include <boost/archive/xml_oarchive.hpp>
#include <boost/archive/xml_iarchive.hpp>

#include <boost/make_shared.hpp>
#include <sstream>
#include <string>

BOOST_CLASS_EXPORT_GUID(Base, "base")
BOOST_CLASS_EXPORT_GUID(Derived_1, "derived_1")

void test(void) {
    std::string str;
    boost::shared_ptr<Base> pSrc = boost::make_shared<Derived_1>(10);
    boost::shared_ptr<Base> pDst;
    {
        std::ostringstream ofs;
        boost::archive::xml_oarchive oa(ofs);
        oa << boost::serialization::make_nvp("item", pSrc);
        str = ofs.str();
    }
    {
        std::istringstream ifs(str);
        boost::archive::xml_iarchive ia(ifs);
        ia >> boost::serialization::make_nvp("item", pDst);
    }
    if (*pSrc == *pDst) {
        printf("Success\n");
    }
    else {
        printf("Fail\n");
    }
}

int main(int argc, char* argv[]) {
    test();
} 
```

# http - 如何代表本地网络中的其他机器发送 HTTP 请求？

> ID：15237948
> 
> 赞同：0
> 
> 时间：2013-03-06T02:35:21.387
> 
> 标签：http, routing, ip, sniffing, spoofing

我有一个本地网络，我可以监控那里的所有流量。每个用户的带宽是有限的，通常所有计算机都没有使用它们的总带宽。所以，如果我能找到一种方法来代表他们发送请求，那么我就可以为某些特殊目的增加带宽。因此，首先想到的问题是**如何代表本地网络中的其他机器发送 HTTP 请求？**

**注意**：让我们提一下，如果我的请求的答案去了我不在的地方，那么这不会是一个大问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:49:06.230

查看 iptables（linux 命令行工具），这将很容易让您执行此操作，如果您愿意，您甚至可以伪造 IP 地址以获取带有 arptables 的响应消息...如果您正在运行 Windows，我很确定 netsh将允许同样的事情

# python - SQLAlchemy 使用关系（）

> ID：15237953
> 
> 赞同：1
> 
> 时间：2013-03-06T02:36:00.653
> 
> 标签：python, database, sqlalchemy, relationship, relational

我在这里使用 SQLAlchemy，试图制作几个表并将它们链接起来，但在实现这一点时遇到了问题。

```
class Team(Base):

    __tablename__ = "teams"

    id = Column(Integer, primary_key=True)
    espn_team_id = Column(Integer, unique=True, nullable=False)
    games = relationship("Game", order_by="Game.date")

    def __init__(self, name):
        self.name = name
        self.espn_team_id = espn_team_id
        self.games = games

class Game(Base):
    __tablename__ = "games"

    id = Column(Integer, primary_key=True)
    espn_game_id=Column(Integer, unique=True, nullable=False)
    date = Column(Date)

    h_espn_id = Column(Integer, ForeignKey('teams.espn_team_id'))
    a_espn_id = Column(Integer, ForeignKey('teams.espn_team_id')) 
```

我把它放在一个文件中，我用它来创建表。然后在另一个文件中，我使用 insert() 函数将值放入两个表中。我想如果我有一个 espn_team_id 360 的团队，然后我将多个游戏放入游戏表中，其中 h_espn_id=360 或 a_espn_id=360，我应该能够做到：

```
a = Table("teams", metadata, autoload=True)
a = session.query(a).filter(a.c.espn_team_id==360).first().games 
```

它应该给我一个 ID 为 360 的所有游戏团队的列表。但是我得到了这个错误

AttributeError：“NamedTuple”对象没有属性“游戏”

我在这里对 SQLAlchemy 或关系数据库有什么误解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:36:10.777

首先，您不必创建另一个`Table`对象，因为它可以作为`Team.__table__`. 无论如何，您可以只查询映射的类，例如

```
query = Session.query(Team).filter(Team.espn_team_id == 360)
team360 = query.one()
games = team360.games 
```

请参阅有关方法`.one()`、`.first()`和的文档：http `.all()`: [//docs.sqlalchemy.org/en/latest/orm/query.html](http://docs.sqlalchemy.org/en/latest/orm/query.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:23:45.640

Here is the solution I found, took way too long to understand this...

```
class Team(Base):

    __tablename__ = "teams"

    id = Column(Integer, primary_key=True)
    name = Column(String)
    espn_team_id = Column(Integer, unique=True, nullable=False)

    h_games = relationship(
                  "Game", 
                  primaryjoin="Game.h_espn_id==Team.espn_team_id", 
                  order_by="Game.date")
    a_games = relationship(
                  "Game", 
                  primaryjoin="Game.a_espn_id==Team.espn_team_id", 
                  order_by="Game.date")

    @hybrid_property
    def games(self):
        return self.h_games+self.a_games

    def __init__(self, name):
        self.name = name
        self.espn_team_id = espn_team_id
        self.h_games = h_games
        self.a_games = a_games
        self.games = games 
```

# jquery - jQuery旋转：停止无限旋转

> ID：15237955
> 
> 赞同：0
> 
> 时间：2013-03-06T02:36:04.677
> 
> 标签：jquery

我正在使用这个插件[http://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

```
var angle = 0;
setInterval(function(){
  angle+=3;
 $("#img").rotate(angle);
},50) 
```

我想在单击#img 时停止旋转，但这不起作用。

```
$("#img").stopRotate(); 
```

有没有办法停止 setInterval？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:37:12.657

如果您将[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval#Example)调用存储在变量中，则可以调用[`clearInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)它将停止它。

```
var angle = 0;
var interval = setInterval(function(){
    angle+=3;
    $("#img").rotate(angle);
},50)

$("#img").click(function() {
    clearInterval(interval); // stick the clearInterval in a click event
}); 
```

# ios - 如何为 UIControl/UIButton 动画从一种状态到另一种状态的过渡？

> ID：15237956
> 
> 赞同：1
> 
> 时间：2013-03-06T02:36:11.980
> 
> 标签：ios, uibutton, uicontrol

我有一个 UIButton 可以在突出显示时更改图像。从 UIControlStateHighlight 过渡到 UIControlStateNormal 时，我希望突出显示的图像慢慢淡入正常图像。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:05:25.333

我最终继承了 UIButton。这是实现文件代码。我取出了一些特定于应用程序的东西，所以我没有测试过这个确切的代码，但它应该没问题：

```
#import "SlowFadeButton.h"

@interface SlowFadeButton ()

@property(strong, nonatomic)UIImageView *glowOverlayImgView; // Used to overlay glowing animal image and fade out

@end

@implementation SlowFadeButton

-(id)initWithFrame:(CGRect)theFrame mainImg:(UIImage*)theMainImg highlightImg:(UIImage*)theHighlightImg
{
    if((self = [SlowFadeButton buttonWithType:UIButtonTypeCustom])) {

        self.frame = theFrame;

        if(!theMainImg) {
            NSLog(@"Problem loading the main image\n");
        }
        else if(!theHighlightImg) {
            NSLog(@"Problem loading the highlight image\n");
        }

        [self setImage:theMainImg forState:UIControlStateNormal];
        self.glowOverlayImgView = [[UIImageView alloc] initWithImage:theHighlightImg];
        self.glowOverlayImgView.frame = self.imageView.frame;
        self.glowOverlayImgView.bounds = self.imageView.bounds;

        self.adjustsImageWhenHighlighted = NO;
    }

    return self;
}

-(void)setHighlighted:(BOOL)highlighted
{
    // Check if button is going from not highlighted to highlighted
    if(![self isHighlighted] && highlighted) {
        self.glowOverlayImgView.alpha = 1;
        [self addSubview:self.glowOverlayImgView];
    }
    // Check if button is going from highlighted to not highlighted
    else if([self isHighlighted] && !highlighted) {
        [UIView animateWithDuration:1.0f
                         animations:^{
                             self.glowOverlayImgView.alpha = 0;
                         }
                         completion:NULL];
    }

    [super setHighlighted:highlighted];
}

-(void)setGlowOverlayImgView:(UIImageView *)glowOverlayImgView
{
    if(glowOverlayImgView != _glowOverlayImgView) {
        _glowOverlayImgView = glowOverlayImgView;
    }

    self.glowOverlayImgView.alpha = 0;
}

@end 
```

您也可以从中提取突出显示的图像`[self imageForState:UIControlStateHighlighted]`并使用它，它应该可以正常工作。主要的事情是确保`adjustsImageWhenHighlighted = NO`，然后覆盖该`setHighlighted:`方法。

# html - 如何在网页上正确水平显示html编码的汉字？

> ID：15237957
> 
> 赞同：0
> 
> 时间：2013-03-06T02:36:21.573
> 
> 标签：html, css, stylesheet

我无法以水平格式显示汉字。我使用这个 css 样式表尝试了一些组合。

我的 CSS：

```
.myborder{
    border: 2px solid;border-top-left-radius: 50px;
    border-top-right-radius: 10px;
    border-bottom-right-radius: 50px;
    border-bottom-left-radius: 2px;
    box-shadow: 9px 9px 15px #000000;
}

.myborder .h1{
    width: 30px;
    display: compact;
    -webkit-margin-before: 1em;
    -webkit-margin-after: 1em;
    -webkit-margin-start: 0px;
    -webkit-margin-end: 0px;
    text-align: left;
    padding-left: 20px;
    font-size: 38.5px;
    font-weight: bold;
    margin-top: 20px;
    margin-bottom: 0;
    line-height: 1;
    word-spacing: -1;
    font-family: inherit;
    color: inherit;
    text-rendering: optimizelegibility;
} 
```

我的html代码：

```
<div class = "myborder">
   <div class="h1">国务院公布了房&lt;/div>
</div> 
```

我已经尝试更改`display`样式，，，`line-height`等`word-spacing`。我仍然无法将字符水平打印出来

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:42:20.483

这是因为您正在创建一个只有 30 像素宽的 div。所以文本别无选择，只能转到下一行。删除“宽度：30px”。我刚试过，很好。

# c++ - 在 Windows 上安装 C++ 库（特别是 Audiere）？

> ID：15237959
> 
> 赞同：0
> 
> 时间：2013-03-06T02:36:34.167
> 
> 标签：c++, qt

嘿，这可能是一个非常简单的初学者问题，但我正在尝试使用 Audiere 库在 Qt 中播放一些音乐文件。我尝试按照教程所说的方式安装库（即将头文件放在 MinGw 的 Include 文件夹中。但我一直收到相同的错误消息：

```
cannot find -laudiered 
```

所以我的主要问题是你们能教我如何在 Windows 上安装库吗？我不太了解 qmake 的东西，所以我只是使用 Qtcreator IDE 来编译和运行我的程序。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:47:42.257

包括头文件只提供库的声明，这对编译器来说很好。您收到链接器错误，因为您没有告诉它在哪里可以找到库的二进制实现文件（Windows 上的静态库为 .lib）。

您需要通知链接器在哪里可以找到必要的文件。大多数图书馆将在其文档中提供这方面的信息，但您也可以尝试自己在图书馆的文件夹中找到它们。

我下载并快速浏览了 Audiere。您需要链接到的文件位于 /lib 文件夹中。

请参阅[此问题](https://stackoverflow.com/questions/1361229/using-a-static-library-in-qt-creator)以了解如何在 QT Creator 中执行此操作。

# python - 在序列中进行所有 2 路比较的最 Pythonic 方式是什么？

> ID：15237962
> 
> 赞同：2
> 
> 时间：2013-03-06T02:36:43.940
> 
> 标签：python

在序列中进行所有 2 路比较的最 Pythonic 方式是什么？

**到目前为止我已经尝试过：**

```
[compare(i, j) for i in sequence for j in sequence] 
```

可怕。进行 n^2 而不是 n/2(n-1) 比较。还将项目与自身进行比较。

```
l = []
for i in xrange(1,len(sequence)):
    for j in xrange(i-1):
        l.append(compare(sequence[i], sequence[j])) 
```

丑陋的。

```
[compare(i, j) for i, j in permuations(sequence, 2)] 
```

这可能是它，但不确定它是否是 Pythonic。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T02:52:56.587

这是您的一个示例的变体（嵌套*for*循环，运行时间：*(n - 1) n / 2*）使用[enumerate](http://docs.python.org/2/library/functions.html#enumerate)：

```
seq = (1, 2, 4, 8, 16, 32, 64)

def compare(a, b):
    print('%s ~ %s' % (a, b))

if __name__ == '__main__':
    for i, item in enumerate(seq, start=1):
        for other in seq[i:]:
            compare(item, other) 
```

哪个输出：

```
1 ~ 2
1 ~ 4
1 ~ 8
1 ~ 16
1 ~ 32
1 ~ 64
2 ~ 4
2 ~ 8
2 ~ 16
2 ~ 32
2 ~ 64
4 ~ 8
4 ~ 16
4 ~ 32
4 ~ 64
8 ~ 16
8 ~ 32
8 ~ 64
16 ~ 32
16 ~ 64
32 ~ 64 
```

* * *

使用[itertools](http://docs.python.org/2/library/itertools.html#itertools.combinations)，它可以写得更短：

```
import itertools

# ...

for a, b in itertools.combinations(seq, 2):
    compare(a, b) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:37:41.860

怎么样：

```
[compare(seq[k], i) for k in range(len(seq)) for i in seq[k+1:]] 
```

这遵循与您的第二个片段相同的比较模式。

# sql - 为 sql server 生成 TPC-DS 数据库

> ID：15237964
> 
> 赞同：1
> 
> 时间：2013-03-06T02:36:52.290
> 
> 标签：sql, sql-server, tpc

如何为 SQL Server填充事务处理性能委员会的[TPC-DS数据库？](http://www.tpc.org/tpcds/)我已经下载了[TPC-DS 工具](http://www.tpc.org/tpcds/dsgen-download-request.asp)，但是关于如何使用它的教程很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:44:37.113

如果您使用的是 Windows，则必须具有 Visual Studio 2005 或更高版本。在文件夹 tools 中解压 dsgen 有 dsgen2.sln 文件，使用 Visual Studio 打开它并构建项目，将为您生成表，我已经尝试过，我将表手动加载到 sql server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T14:44:32.723

我刚刚成功生成了这些查询。有一些技巧可能不是最好的但很有用。

1.  `cp ${...}/query_templates/* ${...}/tools/`
2.  添加`define _END = "";`到每个 query.tpl
3.  `${...}/tools/dsqgen -INPUT templates.lst -OUTPUT_DIR /home/query99/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-10T21:23:46.957

让我们描述一下基本步骤：

1.  在进行下一步之前，请**仔细检查**所需的 TPC-DS 套件是否尚未为您的数据库准备好

2.  下载[TPC-DS 工具](http://www.tpc.org/tpc_documents_current_versions/current_specifications5.asp)

3.  'v2.11.0rc2\tools\How_To_Guide-DS-V2.0.0.docx' 中描述的构建工具（我使用*VS2015*）

4.  创建数据库

*采用tpcds.sql*和*tpcds_ri.sql*中描述的数据库模式（它们位于*'v2.11.0rc2\tools\' -*文件夹中），如果需要，将其适合您的数据库。

5.  生成存储到数据库的数据

```
# Windows
dsdgen.exe /scale 1 /dir .\tmp /suffix _001.dat

# Linux
dsdgen -scale 1 -dir /tmp -suffix _001.dat 
```

6.  上传数据到数据库

```
# example for ClickHouse

database_name=tpcds
ch_password=12345

for file_fullpath in /tmp/tpc-ds/*.dat; do
  filename=$(echo ${file_fullpath##*/})
  tablename=$(echo ${filename%_*})
  echo " - $(date +"%T"): start processing $file_fullpath (table: $tablename)"

  query="INSERT INTO $database_name.$tablename FORMAT CSV"
  cat $file_fullpath | clickhouse-client --format_csv_delimiter="|" --query="$query" --password $ch_password
done 
```

7.  生成查询

```
# Windows
set tmpl_lst_path="..\query_templates\templates.lst"
set tmpl_dir="..\query_templates"
set dialect_path="..\..\clickhouse-dialect"
set result_dir="..\queries"
set tmpl_name="query1.tpl"

dsqgen /input %tmpl_lst_path% /directory %tmpl_dir% /dialect %dialect_path% /output_dir %result_dir% /scale 1 /verbose y /template %tmpl_name%

# Linux
# see for example https://github.com/pingcap/tidb-bench/blob/master/tpcds/genquery.sh 
```

要修复错误*“在初始化之前使用替换 ..”，*请遵循此[修复](https://dba.stackexchange.com/questions/36938/how-to-generate-tpc-ds-query-for-sql-server-from-templates/97926#97926)。

# mercurial - 如何使用 Mercurial 将功能分支与子存储库合并为默认值

> ID：15237968
> 
> 赞同：4
> 
> 时间：2013-03-06T02:37:19.750
> 
> 标签：mercurial, branching-and-merging, mercurial-subrepos

我有许多带有子存储库的项目：

```
/project              <- Main repository
/project/src          <- Source code subrepository  (subrepository to /project)
/project/src/module   <- Module subrepository (subrepository to /project/src repository) 
```

我现在处理了一个功能分支（*feature1*），它有一些修订，我现在想将其合并回默认分支。*自创建feature1*分支以来，默认分支没有任何更改。

我尝试将分支合并为默认值，但最终在子存储库中发生了一些奇怪的事情。

我已按照[另一篇文章](https://stackoverflow.com/questions/5424377/make-another-branch-default)中的说明进行操作，并得到以下结果：

```
$ hg checkout default
  1 files updated, 0 files merged, 0 files removed, 0 files unresolved
$ hg merge feature1
  1 files updated, 0 files merged, 0 files removed, 0 files unresolved
  (branch merge, don't forget to commit)
$ hg status -S
  M .hgsubstate
$ hg commit -S -m "branch merge test"
  nothing changed
$ hg branches
   default                       19:c2398dc23428
   feature1                      17:98dc0efbad90 (inactive) 
```

奇怪的是，即使*模块*子存储库中更改了许多文件，合并仅表明更新了 1 个文件。我假设这恰好是*.hgsubstate*。

当我显式更新子存储库时，我得到以下信息：

```
$ cd src/module
$ hg update
  39 files updated, 0 files merged, 23 files removed, 0 files unresolved
$ cd ../..
$ hg commit -S -m "feature1 merge"
   committing subrepository src
$ hg status -S
   M .hgsubstate 
```

因此，在进行*hg update*以将所有更改带入工作目录之后，我看到了需要提交的*模块子存储库中的更改。*但是，*.hgsubstate*始终保持修改状态。我试过*hg remove*。我试过*hg forget*。但无论我做什么，当我做*hg status*时它仍然被标记。

所以我的问题是：

1.  我合并分支的过程是否正确（考虑到存在子存储库）？
2.  是否有必要在子存储库中进行*hg update*以使主存储库识别更改？
3.  为什么*.hgsubstate*行为不端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-12T20:41:02.960

你没有说你正在使用哪个版本的 hg - subrepo 支持随着时间的推移发生了一定的变化。我刚刚在 hg v2.8 中使用 3 个子存储库级别尝试了类似你的测试，它对我有用。

当你在顶层得到一个脏的 .hgsubstate 时，这在你提交一个子仓库时是正常的。[如果仅独立提交了一个子存储库，则只有 .hgsubstate 在顶层将是脏的。]如果您随后进入顶层并在该级别提交，则 .hgsubstate 将被提交，一切都很好。请记住，顶级存储库以与文件类似的方式跟踪子存储库 - 它在每个顶级提交时从子存储库提交一个特定的变更集。

FWIW。推荐的做法是单独提交子存储库，即如果子存储库脏，则避免在顶层提交。原因是子存储库通常需要不同的提交消息 - 毕竟它们是子存储库是有原因的；但如果你愿意，你可以在顶层提交。在您有 3 个级别的情况下，序列将是：

```
cd src/module
hg commit -m "src/module commit reason"
cd ..
hg commit -m "src commit reason"
cd ..
hg commit -m "top level reason" 
```

原本打算不经常更改子存储库，例如第三方库。如果您的子存储库要经常更改，您和您的团队将必须保持警惕以避免错误，尤其是在与其他人的工作合并时。[但是考虑到问题的日期，您现在可能已经自己解决了。]

# wordpress-theming - WP 自定义数据（不是博客条目）？

> ID：15237970
> 
> 赞同：0
> 
> 时间：2013-03-06T02:37:30.187
> 
> 标签：wordpress-theming, wordpress

WP 对出现在网站上的自定义数据使用的术语是什么。例如，该网站需要包括以下内容的推荐信：照片、姓名、推荐信、链接。这些字段在 WP 中是如何定义的，以及如何在前端循环它们？

我是 WP 新手。在 ExpressionEngine 中，这个概念被称为“通道”。WP中的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:52:56.063

您可以在自定义帖子类型中创建所有照片、姓名、推荐、链接，您可以[在此处阅读更多相关信息](http://codex.wordpress.org/Post_Types#Custom_Types)

# parsing - parse.com + 主干检索用户的嵌套对象集

> ID：15237974
> 
> 赞同：0
> 
> 时间：2013-03-06T02:37:46.537
> 
> 标签：parsing, backbone.js, nested-datalist

我想扩展 parse.com 在其教程中提供的[这个示例，以使用主干集合和第二级数据（评论）。](https://parse.com/docs/js_guide#users-associations)现在，示例正在检索用户的帖子列表，具有以下数据结构：

```
USER
--------------------------------------
| User_ID |  Username | ......
--------------------------------------
| 1       |  John     | ........
| 2       |  Jane     | ........

POST 
--------------------------------------
| POST_ID  |  User_ID | Title    | .....
--------------------------------------
| 20       |  1       | abcdefg  | .....
| 21       |  1       | svsvdsv  | ..... 
```

我想扩展这个调用，也为每个帖子返回相应的评论。这意味着将有**一个**api 调用来解析，它会为登录用户返回所有帖子和对这些帖子（正确嵌套）的所有评论。下面是一个评论数据结构的例子：

```
COMMENT
-----------------------------------------------------------------------
| COMMENT_ID  |  POST_ID  |  Comment_Text        | Title    | .....
-----------------------------------------------------------------------
| 30          |  21       |  awesome post woohoo | abcdefg  | .....
| 31          |  21       |  terrible post....   | svsvdsv  | ..... 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:28:23.457

Backbone.js 不支持嵌套模型，因此您可以将 Backbone-relational.js 用于嵌套模型，

[Backbone-relational.js 为 Backbone Backbone Relation](http://backbonerelational.org/)的模型之间提供了一对一、一对多和多对一的 关系

班级

```
User = Backbone.Relational.Model({
    defaults : {
        id : '',
        name : '',
        posts : [], //collection
    },
    relation : [{
        type : 'HasMany',
        key : 'posts',
        relatedModel : 'com.dw.attendance.model.Post',
        reverseRelation : {
            key : 'user'
        }
    }]
});

Post = Backbone.Relational.Model({
    defaults : {
        id : '',
        user : '', //model
        comments : '', //collection
        title : '',
    },
    relation : [{
        type : 'HasOne',
        key : 'user',
        relatedModel : 'com.dw.attendance.model.User',
        reverseRelation : {
            key : 'posts'
        }
    },{
        type : 'HasMany',
        key : 'comments',
        relatedModel : 'com.dw.attendance.model.Comment',
        reverseRelation : {
            key : 'post'
        }
    }]
});

Comment = Backbone.Relational.Model({
    defaults : {
        id : '',
        post : '',//model
        text : '',
        title : ''
    },
    relation : [{
        type : 'HasOne',
        key : 'post',
        relatedModel : 'com.dw.attendance.model.Post',
        reverseRelation : {
            key : 'comments'
        }
    }]
}); 
```

你的数据是这样的，对于用户：`{id : 1, name : 'john', posts : [1,2,3]};`

然后您可以获得任何用户帖子的评论，

```
user.get('posts').get('post_ID').get('comments'); 
```

# wordpress-theming - Wordpress 主题选项中的复选框

> ID：15237975
> 
> 赞同：0
> 
> 时间：2013-03-06T02:37:46.550
> 
> 标签：wordpress-theming

我正在尝试实现一个简单的复选框来切换我的 Wordpress 主题中的一个选项，但它不起作用。这是我所拥有的：

在形式...

```
<input type="checkbox" class="display-twitter" name="display-twitter" id="display-twitter" value="true"<?php if ( true == $options['display-twitter'] ) { echo ' checked="checked"'; } ?>> <?php _e( 'Display your Twitter Feed?', 'crate' ); ?> 
```

在清理我的输入的功能中......

```
function theme_options_validate( $input ) {  
        ...  
        $input['display-twitter'] = ( isset( $input['display-twitter'] ) ? false : true );  
        ...  
        return $input;  
} 
```

第一次选中该框以启用该选项时，一切正常。但是当我再次检查它时，我被`Notice: Undefined index: display-twitter ...`抛出了。

是什么赋予了？跟三元有关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:07:47.537

我认为您不应该使用 isset 函数，这将检查变量是否已设置且不为 NULL，但是复选框始终具有 2 个状态，因此永远不能为 NULL，这就是输出始终为真的原因。

我相信正确的功能如下：

```
function theme_options_validate( $input ) {  
    ...  
    $input['display-twitter'] = ($input['display-twitter'] ? false : true        );  
    ...  
    return $input;  
} 
```

# html - 如何使 HTML 表格（在固定宽度的 div 中）适应其单元格的宽度而不是其容器的宽度？

> ID：15237982
> 
> 赞同：2
> 
> 时间：2013-03-06T02:38:28.807
> 
> 标签：html, width, html-table

我想让下表调整其宽度以适应单元格，而不是其容器：

```
<div style='width: 700px; border: 1px solid red;'>
    <table border="1" style='table-layout: fixed;'><tbody>
        <tr>
            <th style="" colspan="3">Group 1</th>
            <th style="" colspan="5">Group 2</th>
            <th style="" colspan="4">Group 3</th>
        </tr>
        <tr>
            <th style="width: 62px;">A</th>
            <th style="width: 200px;">B</th>
            <th style="width: 62px;">C</th>
            <th style="width: 62px;">D</th>
            <th style="width: 62px;">E</th>
            <th style="width: 62px;">F</th>
            <th style="width: 62px;">G</th>
            <th style="width: 62px;">H</th>
            <th style="width: 62px;">I</th>
            <th style="width: 100px;">J</th>
            <th style="width: 62px;">K</th>
            <th style="width: 68px;">L</th>
        </tr>
    </tbody></table>
</div> 
```

容器的宽度小于单元格宽度的总和。可以在这里显示水平滚动条，但表格不能比它的容器宽。如果我计算 colspan 和表格的总和宽度，它可以完成这项工作，但如果单元格具有非 px 宽度，如“%”或“em”怎么办？那么静态px计算就不行了。

当前效果是： ![在此处输入图像描述](../Images/8c922895f576e7ef75de13f94b4acd7c.png) 预期效果是表格的宽度超过了容器 div 的宽度。

但是直接给表格设置宽度也有问题：为单元格设置的宽度会被忽略。例如：

```
 <div style='width: 700px; border: 1px solid red;'>
    <table border="1" style='table-layout: fixed; width: 900px;'><tbody>
        <tr>
            <th style="" colspan="3">Group 1</th>
            <th style="" colspan="5">Group 2</th>
            <th style="" colspan="4">Group 3</th>
        </tr>
        <tr>
            <th style="width: 62px;">A</th>
            <th style="width: 200px;">B</th>
            <th style="width: 62px;">C</th>
            <th style="width: 62px;">D</th>
            <th style="width: 62px;">E</th>
            <th style="width: 62px;">F</th>
            <th style="width: 62px;">G</th>
            <th style="width: 62px;">H</th>
            <th style="width: 62px;">I</th>
            <th style="width: 100px;">J</th>
            <th style="width: 62px;">K</th>
            <th style="width: 68px;">L</th>
        </tr>
    </tbody></table>
</div> 
```

效果是： ![在此处输入图像描述](../Images/094c821e347b2dea9f588f468b986f76.png) 注意第 2 个单元格（应该是 200px）与第 1 个和第 3 个单元格一样窄。

任何人都可以对这个问题有所了解吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:56:50.993

添加CSS：

```
th{
    min-width:50px; /*for instance*/
}
div{
    overflow-x:scroll;
} 
```

并`style='table-layout: fixed; width: 1px;'`从表中删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T03:18:44.660

Merijn's answer适用于固定宽度单元格的情况，稍作调整：

与其指定全局最小宽度，不如为每个单元格指定它，如下所示：

```
<th style="min-width: 62px; width: 62px;">A</th>
<th style="min-width: 200px; width: 200px;">B</th>
<th style="min-width: 62px; width: 62px;">C</th> 
```

至少这样，您的个人宽度不会被忽略，给您一个比容器更宽的表格，并且单元格宽度不规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:51:37.133

放置桌子绝对可以接受吗？

```
<table border="1" style="position:absolute;"> 
```

这使得 div 不再水平包含表格。但是，当然，div 也不再包含垂直的表格。不过，您可以通过手动指定 div 高度来解决此问题。

# php - PHP：extract($_POST) 然后 get_defined_vars() 什么也不返回......为什么？

> ID：15237983
> 
> 赞同：1
> 
> 时间：2013-03-06T02:38:42.467
> 
> 标签：php, post, extract

我有以下 PHP 脚本：

```
<?php 
  function dump_extracted_post() {
    extract($_POST);
    var_dump(get_defined_vars());
  }
  dump_extracted_post();
?> 
```

对于这个脚本，我发布了一个包含一些数据的表单，它会产生以下（意外）结果：

```
Array(0) {
} 
```

**为什么我看不到发布的数据？**

我对 extract() 或 get_defined_vars() 的理解是否遗漏了什么？是否有某种安全设置可能会干扰从 $_POST 中提取？

我知道提取的性质令人不悦，所以这可能是一个安全问题，但扫描 php 文档似乎没有提到任何此类问题。我想用它来做一些简单的模板。

如果我将脚本更改为：

```
<?php 
  function dump_extracted_post() {
    var_dump($_POST);
  }
  dump_extracted_post();
?> 
```

我按预期看到了发布的数据（所以是的，我肯定是在发布数据）。

同样，如果我将脚本更改为：

```
<?php 
  function dump_extracted_post() {
    $a = 'moocows';
    var_dump(get_defined_vars());
  }
  dump_extracted_post();
?> 
```

我看到了预期的输出：

```
array(1) {
  ["a"]=>
  string(7) "moocows"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T06:32:08.473

您的原始功能对我来说很好。我使用以下脚本（名为`extract.php`）进行测试：

```
<form method="post" aciton="extract.php">
  <input type="text" name="foo" />
  <input type="submit" />
</form>
<pre>
<?php
  function dump_extracted_post() {
    extract($_POST);
    var_dump(get_defined_vars());
  }
  dump_extracted_post();
?>
</pre> 
```

函数`extract`仅提取`key=>value`键是有效标识符且与现有变量不冲突的那些对。因此，您的密钥`$_POST`可能不是有效的标识符，或者与现有变量相冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T06:21:42.357

我无法复制问题（它在我的机器上正常工作），所以可能是您插入的键/值有问题。这可能很乏味，但您应该测试每个 POST 参数。这是我的建议：

（1）尝试使用测试数组（如您所说，这应该有效）

```
function dump_extracted_post() {
    $postParams = array('testkey' => 'testval');

    extract($postParams);
    var_dump(get_defined_vars());
}
dump_extracted_post(); 
```

(2) 将所有 POST 键/值放入该数组中，然后重试

```
function dump_extracted_post() {
    $postParams = array('testkey' => 'testval');
    foreach ($_POST as $k=>$v) {
        $postParams[$k] = $v;
    }

    extract($postParams);
    var_dump(get_defined_vars());
}
dump_extracted_post(); 
```

如果 (2) 失败，则意味着您的 $_POST 中的某些内容导致了问题。

通过一个接一个地插入 POST 参数来测试你的结果，你应该会遇到它失败的地方。

```
function dump_extracted_post() {
    $postParams = array('testkey' => 'testval');
    $i=1;
    foreach ($_POST as $k=>$v) {
        if ($i > 1) break;  // increment this value each time, and see where the extract fails
        $postParams[$k] = $v;
        $i++;
    }

    extract($postParams);
    var_dump(get_defined_vars());
}
dump_extracted_post(); 
```

如果您成功遇到导致提取失败的 POST 参数，您可以解决它（或使用新问题返回 stackoverflow）。

# .htaccess - htaccess 分页 modrewrite

> ID：15237987
> 
> 赞同：1
> 
> 时间：2013-03-06T02:38:58.930
> 
> 标签：.htaccess, mod-rewrite

寻找一些分页和修改重写的帮助，所以我有一个看起来像这样的网址

`www.website.com/page.php?phone=111-393-4949`

我正在重写它看起来像这样......

`www.website.com/701-625-5444.php`

有了这个

```
RewriteRule ^([0-9]+)-([0-9]+)-([0-9]+) page.php?number=$1-$2-$3 [L,QSA] 
```

我现在在将分页添加到 mod 重写时遇到了一些问题。我真的不太确定我需要在这里做什么，但这就是我想出的

```
RewriteRule ^([0-9]+)-([0-9]+)-([0-9]+)/([^/]*) page.php?number=$1&page=$2 [L,QSA] 
```

应该输出..

`www.website.com/494-949-9494/1.php`

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:20:48.540

每`()`对都是一个捕获组。由于您已经`()`为电话号码设置了三个组，因此`([^/]*)`您添加的组将被捕获`$4`。

```
RewriteRule ^([0-9]+)-([0-9]+)-([0-9]+)/([^/]*)$ page.php?number=$1-$2-$3&page=$4 [L,QSA] 
```

`(?:)?`如果分页是可选的，请在最后一段周围添加一个可选的非捕获组：

```
RewriteRule ^([0-9]+)-([0-9]+)-([0-9]+)(?:/([^/]*))?$ page.php?number=$1-$2-$3&page=$4 [L,QSA] 
```

我会注意到，您的示例`RewriteRule`中并未强制包含`.php`as `www.website.com/701-625-5444.php`。那看起来像

```
RewriteRule ^([0-9]+)-([0-9]+)-([0-9]+)\.php$ page.php?number=$1-$2-$3 [L,QSA]
# Or...
RewriteRule ^([0-9]+)-([0-9]+)-([0-9]+)(?:/([^/]*))?\.php$ page.php?number=$1-$2-$3&page=$4 [L,QSA] 
```

# dynamics-crm-2011 - 在 Dynamic CRM 2011 中向 ImportMap 或 ImportFile 实体添加字段/关系

> ID：15237988
> 
> 赞同：0
> 
> 时间：2013-03-06T02:39:12.123
> 
> 标签：dynamics-crm-2011

是否可以在 Dynamic CRM 2011 中向 ImportMap / ImportFile 实体添加一些自定义字段/关系？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T02:58:18.513

经过一番研究，我发现这个实体是不可定制的

[http://msdn.microsoft.com/en-sg/library/bb956596.aspx](http://msdn.microsoft.com/en-sg/library/bb956596.aspx)

谢谢

# php - 最终：AJAX/jQuery/PHP 表单提交和模式框成功打开

> ID：15237989
> 
> 赞同：0
> 
> 时间：2013-03-06T02:39:20.107
> 
> 标签：php, jquery, ajax, forms

感谢 Samuel Liew 和其他伟大的帮助者，问题已得到解决。

由于把所有东西放在这里都是一团糟，而且在整体解决方案中解释得很差，我致力于在我自己的网站上做一个解释。

我把演示留给你看看是否是你要找的东西，我把教程留给你学习如何做到这一点。

教程：[http ://santz.com.ar/blog/ajax-form-submit-open-modal-box/](http://santz.com.ar/blog/ajax-form-submit-open-modal-box/)

演示：[http ://santz.com.ar/files/demos/ajax-form-submit-open-modal-box/](http://santz.com.ar/files/demos/ajax-form-submit-open-modal-box/)

希望我对你有所帮助！感谢所有帮助过我的人！

* * *

@Samuel Liew 和其他好帮手。该问题已得到解决。我会为未来需要这个的人留下更正的代码。

**案例：** [http](http://santz.net/index.contacto.html) ://santz.net/index.contacto.html （不再可用）

这是问题所在：

> **目标：** “网站”必须在表单提交成功后打开一个对话框/模态框/模态窗口。
> 
> **问题：**表单提交成功，但对话框/模态框/模态窗口未打开（很少，如果您再次单击它会打开...）
> 
> [试试看，这就是我给你链接的原因。没问题，网站是我的，我收到消息]
> 
> **我希望你能帮助我......这个想法很简单！当用户提交表单时，会立即弹出一个对话框！**

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T04:06:32.650

在这种情况下，将对话框函数移到提交函数之外：

```
$(function() {
    $('#popup-wrapper').modalPopLite({
        openButton: '#clicker',
        closeButton: '#close-btn'
    });
    $('#contact-form').submit(function() {
        $.ajax({
            type: "POST",
            url: $(this).attr('action'),
            data: $(this).serialize(),
            success: function() {
                $('#contact-form')[0].reset();
            }
        });
        return false;
    });
}); 
```

# java - 查找数组中的重复数字

> ID：15237992
> 
> 赞同：-3
> 
> 时间：2013-03-06T02:39:36.187
> 
> 标签：java, arrays, duplicate-data

这段代码的问题是它会打印出 5 9 9，而不仅仅是 5,9。因为数组中有第三个 9。我错过了什么？

编辑：我需要编写一个函数来从给定的数组中获取重复项。我正在尝试这样做，但它打印出 5,9,9 而不是 5,9。

编辑 2：好吧，我在阅读 HashSet 后想通了，并使用下面的代码让它工作。我希望这可以帮助其他有同样问题的人。

```
import java.util.HashSet;

public class Duplicator {

/**
 * @param args
 */
public static void main(String[] args) {

    int[] a = {3,5,5,8,9,9,9};

    HashSet<Integer> hash = new HashSet<Integer>();

    for(int i = 0; i < a.length; i++){

        for(int j = i+1; j< a.length; j++){

            if(a[i] == a[j]){

                hash.add(a[i]);

            }
        }

    }

    System.out.println(hash);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T02:47:46.757

您正在尝试查找重复的数字，但实际上您只是与前一个元素进行比较。因此，每次与前面的数字相同时，它都会打印数字，这意味着：5、9 和 9。

您可以添加一个变量来跟踪打印的最后一个元素。但是，如果数组未排序，代码仍然会中断。

您还可以使用集合：

```
public static void main(String[] args) {
  int[] a = {3,5,5,8,9,9,9};

  Set<Integer> encounteredNumbers = new HashSet<Integer>();
  Set<Integer> duplicateNumbers = new LinkedHashSet<Integer>(); // LinkedHashSet to keep in same order as encountered.
  for (int i : a) {
    if (encounteredNumbers.contains(i)) {
      duplicateNumbers.add(i);
    }
    encounteredNumbers.add(i);
  }

  System.out.println(duplicateNumbers);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T02:42:23.570

尝试在数组中前进，同时跟踪最后一个元素的值。

如果值更改，则将布尔值设置`duplicateFound`为 false。

如果值没有改变，并且`duplicateFound`为假，则设置`duplicateFound`为真并打印。

如果数组可能未排序，请务必先对数组进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T02:45:31.013

您可以使用集合来避免重复值。例如 ：

```
Set<Integer> values=new HashSet<Integer>();
values.add(5);
values.add(9);
values.add(9);
for(Integer val: values) {
System.out.println(val);
} 
```

它打印：

```
5
9 
```

另一个例子 ：

```
int[] a = {3,5,5,8,9,9,9};
List<Integer> list=new ArrayList<Integer>();
for(int i=0; i<a.length; i++) {
if(!list.contains(a[i])) {
list.add(a[i]);
}

}

for(int index=0; index<list.size(); index++) {
System.out.println(list.get(index));// prints the value in the corresponding index.
} 
```

它打印如下：

```
3
5
8
9 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-06T02:43:27.237

我不清楚这个问题。如果您需要根据输入数组的大小消除重复项，一种简单的方法是构造 a`java.util.Set`并遍历它。

# wampserver - 为什么其他人无法在 LAN 中访问我的 WampServer？

> ID：15237993
> 
> 赞同：0
> 
> 时间：2013-03-06T02:39:49.433
> 
> 标签：wampserver

我可以通过 localhost 127.0.0.1 访问 WampServer。我尝试将端口 80 更改为其他号码。就像 httpd.conf 中的“Listen 80”->“Listen 8080”。防火墙已关闭。我确定我已将 WampServer 设置为“在线”。

为什么局域网中的其他人仍然无法访问？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T03:21:44.403

确保在端口更改后尝试访问站点时指定端口

本地主机：8080 例如

否则浏览器会认为它是端口 80

希望这有所帮助

# php - 使用 PHP 和 ImageMagick 将 PDF 转换为高质量的 JPG

> ID：15237994
> 
> 赞同：6
> 
> 时间：2013-03-06T02:40:13.007
> 
> 标签：php, pdf, image-processing, imagemagick, imagick

我在扯头发。

我有一个 300 DPI PDF，我想将其转换为 300 DPI JPG，即 2550x3300。我被告知 ImageMagick 可以做到这一点，所以我让 ImageMagick 工作，但它只返回一个大小约为原始 PDF 大小 1/5 的 JPG。

这不是源图像——我已经用几个高质量的 PDF 完成了它，它们都有同样的问题。

在搜索了 StackOverflow 的想法之后，这就是我想出的使用方法：

```
$im = new imagick($srcimg);
$im->setImageResolution(2550,3300);
$im->setImageFormat('jpeg');
$im->setImageCompression(imagick::COMPRESSION_JPEG); 
$im->setImageCompressionQuality(100);
$im->writeImage($targetimg);
$im->clear();
$im->destroy(); 
```

但它仍然不起作用。

我也尝试过使用 $img->resizeImage() 来调整 JPG 的大小，但是如果大小合适的话，它的质量真的很差。

完全被难住了。感谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-06T03:03:55.283

您需要在读取图像之前设置分辨率。请[参阅手册上的此评论](http://www.php.net/manual/en/imagick.setimageresolution.php#96182)- 看看这是否可行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-11T16:02:52.310

这将是正确的方法，质量会提高。

```
$im = new imagick();
$im->setResolution(300, 300);
$im->readImage($srcimg);
$im->setImageFormat('jpeg');
$im->setImageCompression(imagick::COMPRESSION_JPEG); 
$im->setImageCompressionQuality(100);
$im->writeImage($targetimg);
$im->clear();
$im->destroy(); 
```

# r - 将变量组合成一个列表

> ID：15237995
> 
> 赞同：7
> 
> 时间：2013-03-06T02:40:20.477
> 
> 标签：r, list, variables, dataframe

伙计们，

我被以下挑战难住了。我有一个如下所示的数据集：

```
BuyerID    Fruit.1     Fruit.2    Fruit.3    Amount.1    Amount.2    Amount.3
879        Banana      Apple                 4           3
765        Strawberry  Apple      Orange     1           2           4
123        Orange      Banana                1           1           1
 11        Strawberry                        3
773        Kiwi        Banana                1           2 
```

我想做的是简化数据（如果可能的话）并折叠“水果”和“金额”变量

```
BuyerID    Fruit                             Amount      Total    Count
879        "Banana" "Apple"                  4  3            7        2
765        "Strawberry" "Apple" "Orange"     1  2  4         7        3
123        "Orange" "Banana"                 1  1  1         3        2
 11        "Strawberry"                      3               3        1
773        "Kiwi" "Banana"                   1  2            3        2 
```

我曾尝试使用 c() 和 rbind() 但它们没有产生我想要的结果 - 我在这里尝试过提示：[data.frame rows to a list](https://stackoverflow.com/questions/3492379/data-frame-rows-to-a-list)但我不太确定这是否是最好的方法简化我的数据。

这样一来，对于我来说，处理更少的变量来计算某些项目的出现可能会更容易（例如，60% 的买家购买香蕉）。

我希望这是可行的——我也愿意接受任何建议。任何解决方案表示赞赏！

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-06T02:54:18.777

尝试复制您的数据，并使用 data.table

```
DT  <- data.frame(
  BuyerID = c(879,765,123,11,773), 
  Fruit.1 = c('Banana','Strawberry','Orange','Strawberry','Kiwi'),
  Fruit.2 = c('Apple','Apple','Banana',NA,'Banana'),
  Fruit.3 = c( NA, 'Orange',NA,NA,NA),
  Amount.1 = c(4,1,1,3,1), Amount.2 = c(3,2,1,NA,2), Amount.3 = c(NA,4,1,NA,NA),
  Total = c(7,7,3,3,3), 
  Count = c(2,3,2,1,2), 
  stringsAsFactors = FALSE)

# reshaping to long form and data.table

library(data.table)
DTlong <- data.table(reshape(DT, varying = list(Fruit = 2:4, Amount = 5:7), 
  direction = 'long'))

# create lists (without NA values)
# also adding count and total columns 
# by using <- to save Fruit and Amount for later use

DTlist <- DTlong[, list(Fruit <- list(as.vector(na.omit(Fruit.1))), 
                        Amount <- list(as.vector(na.omit(Amount.1))), 
                        Count  = length(unlist(Fruit)),
                        Total = sum(unlist(Amount))), 
                 by = BuyerID]

  BuyerID                      V1    V2 Count Total
1:     879            Banana,Apple   4,3     2     7
2:     765 Strawberry,Apple,Orange 1,2,4     3     7
3:     123           Orange,Banana 1,1,1     2     3
4:      11              Strawberry     3     1     3
5:     773             Kiwi,Banana   1,2     2     3 
```

* * *

@RicardoSaporta 编辑：

如果你愿意，你可以跳过重塑步骤，使用`list(list(c(....)))`
这可能会节省相当多的执行时间（缺点是它添加了`NA`s 而不是空格）。但是，正如@Marius 指出的那样，`DTlong`上面可能更容易使用。

```
DT <- data.table(DT)
DT[,   Fruit := list(list(c(  Fruit.1,   Fruit.2,   Fruit.3))), by=BuyerID]
DT[, Ammount := list(list(c(Amount.1, Amount.2, Amount.3))), by=BuyerID]

# Or as a single line
DT[,   list(  Fruit = list(c( Fruit.1,  Fruit.2,  Fruit.3)), 
            Ammount = list(c(Amount.1, Amount.2, Amount.3)), 
            Total, Count),  # other columns used
            by = BuyerID] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-06T03:39:19.930

这是一个解决方案，带有基本包。它类似于 Tyler 解决方案，但只需一次应用。

```
res <- apply(DT,1,function(x){
  data.frame(Fruit= paste(na.omit(x[2:4]),collapse=' '),
             Amount = paste(na.omit(x[5:7]),collapse =','),
             Total = sum(as.numeric(na.omit(x[5:7]))),
             Count = length(na.omit(x[2:4])))
})
do.call(rbind,res)
                    Fruit  Amount Total Count
1            Banana Apple    4, 3     7     2
2 Strawberry Apple Orange 1, 2, 4     7     3
3           Orange Banana 1, 1, 1     3     2
4              Strawberry       3     3     1
5             Kiwi Banana    1, 2     3     2 
```

我还会通过 grep 更改索引号，就像这样

```
 Fruit  = gregexpr('Fruit[.][0-9]', colnames(dat)) > 0  
 Amount = gregexpr('Amount[.][0-9]', colnames(dat)) > 0 

 x[2:4] replace by x[which(Fruit)].... 
```

**编辑**添加一些基准测试。

```
library(microbenchmark)
library(data.table)
microbenchmark(ag(),mn(), am(), tr())
Unit: milliseconds
  expr       min        lq    median        uq       max
1 ag() 11.584522 12.268140 12.671484 13.317934 109.13419
2 am()  9.776206 10.515576 10.798504 11.437938 137.44867
3 mn()  6.470190  6.805646  6.974797  7.290722  48.68571
4 tr()  1.759771  1.929870  2.026960  2.142066   7.06032 
```

对于一个小的 data.frame，**Tyler Rinker**是赢家！！我如何解释这个（只是猜测）

1.  data:table 解决方案使用 reshape 并且通常 data.table 对于大数据更快。
2.  由于每一行的子集，Ag 研究解决方案较慢，不像 Tyler 解决方案在使用之前的子集应用。
3.  由于使用了重塑和合并，我的解决方案很慢。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T03:05:49.393

这是一个非常糟糕的主意，但它在 base 中`data.frame`。它之所以有效，是因为`data.frame`它实际上是一个等长向量的列表。您可以强制`data.frame`将向量存储在单元格中，但这需要一些技巧。我建议其他格式，包括 Marius 的建议或列表。

```
DT <- data.frame(
  BuyerID = c(879,765,123,11,773), 
  Fruit.1 = c('Banana','Strawberry','Orange','Strawberry','Kiwi'),
  Fruit.2 = c('Apple','Apple','Banana',NA,'Banana'),
  Fruit.3 = c( NA, 'Orange',NA,NA,NA),
  Amount.1 = c(4,1,1,3,1), Amount.2 = c(3,2,1,NA,2), Amount.3 = c(NA,4,1,NA,NA),
  stringsAsFactors = FALSE)

DT2 <- DT[, 1, drop=FALSE]
DT2$Fruit <- apply(DT[, 2:4], 1, function(x) unlist(na.omit(x)))
DT2$Amount <- apply(DT[, 5:7], 1, function(x) unlist(na.omit(x)))
DT2$Total <- sapply(DT2$Amount, sum)
DT2$Count <- sapply(DT2$Fruit, length) 
```

产量：

```
> DT2
  BuyerID                     Fruit  Amount Total Count
1     879             Banana, Apple    4, 3     7     2
2     765 Strawberry, Apple, Orange 1, 2, 4     7     3
3     123            Orange, Banana 1, 1, 1     3     2
4      11                Strawberry       3     3     1
5     773              Kiwi, Banana    1, 2     3     2 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-06T05:36:46.187

除了已经存在的很好的答案，这里还有另一个（坚持基础 R）：

```
with(DT, {
  # Convert to long format
  DTlong <- reshape(DT, direction = "long", 
                    idvar = "BuyerID", varying = 2:ncol(DT))
  # aggregate your fruit columns 
  # You need the `do.call(data.frame, ...)` to convert
  #   the resulting matrix-as-a-column into separate columns
  Agg1 <- do.call(data.frame, 
                  aggregate(Fruit ~ BuyerID, DTlong,
                            function(x) c(Fruit = paste0(x, collapse = " "),
                                          Count = length(x))))
  # aggregate the amount columns
  Agg2 <- aggregate(Amount ~ BuyerID, DTlong, sum)
  # merge the results
  merge(Agg1, Agg2)
})
#   BuyerID             Fruit.Fruit Fruit.Count Amount
# 1      11              Strawberry           1      3
# 2     123           Orange Banana           2      3
# 3     765 Strawberry Apple Orange           3      7
# 4     773             Kiwi Banana           2      3
# 5     879            Banana Apple           2      7 
```

基本概念是：

1.  用于`reshape`以长格式获取数据（实际上，我认为您应该停下来）
2.  使用两种不同的`aggregate`命令，一种用于聚合您的水果列，另一种用于聚合您的金额列。公式方法`aggregate`负责删除`NA`，但您可以使用`na.action`参数指定所需的行为。
3.  用于`merge`将两者结合起来。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-13T17:39:19.743

提出问题时它不存在，但`tidyr`对此效果很好。

重用来自@mnel 答案的数据，

```
library(tidyr)
separator <- ' '
DT %>%
  unite(Fruit, grep("Fruit", names(.)), sep = separator) %>%
  unite(Amount, grep("Amount", names(.)), sep = separator)

#   BuyerID                   Fruit  Amount Total Count
# 1     879         Banana Apple NA  4 3 NA     7     2
# 2     765 Strawberry Apple Orange   1 2 4     7     3
# 3     123        Orange Banana NA   1 1 1     3     2
# 4      11        Strawberry NA NA 3 NA NA     3     1
# 5     773          Kiwi Banana NA  1 2 NA     3     2 
```

# mysql - 使用 INSERT IGNORE 防止重复条目

> ID：15237996
> 
> 赞同：0
> 
> 时间：2013-03-06T02:40:22.030
> 
> 标签：mysql, sql, insert, sql-insert

有了以下，`CHECKINDATEENTERED`总是不同的，但`VENUECREATEDAT`总是相同的。

我想知道是否可以通过仅检查表中的一列来防止重复条目`createdAt`。

```
SQL = "INSERT IGNORE INTO CHECKINS (CHECKINPLATFORM, MEMBERID, VENUENAME, VENUELAT, VENUELNG, VENUECITY, VENUECOUNTRY, VENUECREATEDAT, CHECKINDATEENTERED) VALUES ('"& strFoursquare &"', '"& objMembers("MEMBERID") &"', '"& strVenueName &"', '"& strlat &"', '"& strlng &"', '"& strCity &"', '"& strCountry &"', '"& FormatDateMySQL(strcreatedAt) &"', '"& FormatDateMySQL(NOW) &"')" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T03:32:13.323

如果您有一个`UNIQUE INDEX`then 与此键冲突的条目将被忽略。您需要通过在与其唯一身份相关的特定列上创建索引来建立“重复”条件。