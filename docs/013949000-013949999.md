# StackOverflow 问答 13949000-13949999

# php - PDO Prepare() 函数致命错误：

> ID：13949001
> 
> 赞同：-4
> 
> 时间：2012-12-19T09:17:58.923
> 
> 标签：php, mysql, pdo

我实际上开始使用 PDO，我在 PDO 上看到了很多问题，但我无法通过阅读这些问题来解决我的问题。

我有一个名为 PDO Config File 的文件`db.php`，这个文件没有问题。

```
db.php 

<?php 
######## PDO Config File ##########
        $mysql_hostname = "localhost";
        $mysql_user = "web";
        $mysql_password = "123123";
        $mysql_database = "123123";
        //$odb = new PDO ("mysql:host=".$mysql_hostname.";dbname=".$mysql_database;charset:UTF-8",$mysql_user,$mysql_password);
        try{
                $connect = new PDO("mysql:host=".$mysql_hostname.";dbname=".$mysql_database.";charset:UTF-8", $mysql_user, $mysql_password, array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
        }
        catch(PDOException $pe){
            die('Could connect to the database because: ' .$pe->getMessage());
        }
 ?> 
```

我已将此文件包含在以下 PHP 文件 [setting.php] 中。

```
setting.php

class Account
{
    public function userEmailChnage($inputCurrentEmail,$inputChangeEmail,$inputConfirmEmail)
    {
        if(!empty($inputCurrentEmail) AND !empty($inputChangeEmail) AND !empty($inputConfirmEmail)){
            $selectEmail        = "select mail from users where mail = ?";
            $selectEmailPrepare = $connect -> prepare($selectEmail);
            $selectEmailPrepare -> execute(array($inputConfirmEmail));

        if ($selectEmailPrepare ->rowCoun() > 0 ) {     
                if($inputChangeEmail == $inputConfirmEmail) {
                        $EmailUpdate = "UPDATE users SET mail= ?";
                        $EmailUpdatePrepare = $connect->prepare($EmailUpdate);
                        $EmailUpdatePrepare -> execute(array($inputChangeEmail));
                        $msg[EmailUpdateOpration]=Success;

                }else{
                        $msg[IsConfirmMailMatching]=FALSE; //---------------- > JSON ERROR Msg 
                }
            }else{
                    $msg[IsEmailInDatabase]=FALSE; //---------------- > JSON ERROR Msg 
            }
        }else{
            $msg[IsEmailFieldEmpty]=TRUE; //---------------- > JSON ERROR Msg 
        }   
        header("Content-Type: application/json", true); 
        echo json_encode($msg); 
    }

} 
```

执行文件后，我面临以下错误：

```
Fatal error: Call to a member function prepare() on a non-object in /home/admin/public_html/class/setting.php on line 12 
```

我试图更改 PDO 配置文件，但没有成功。我开始测试setting.php .. 无法解决！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:23:12.530

在这一行：

```
$EmailUpdatePrepare = $connect->prepare($EmailUpdate); 
```

...您收到此错误：

> 在非对象上调用成员函数 prepare()

*这*正是意味着：`$connect`不是一个对象。它似乎是一个全局变量，因此您需要这样处理它：要么在使用它之前调用它，要么通读它。（或者，更好的是，将它作为参数传递给方法。）*`global $connect;``$GLOBALS['connect']`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:20:33.837

这似乎`$connect`不是 PDO 的对象。它可能是一些 NULL 或 false 值。可能您的连接无声无息地失败了。尝试检查抛出的 PDOException：

```
try {
    // pdo connection
} catch (PDOException $e) {
    exit($e->getMessage());
} 
```

请注意，`PDO::__construct()`仅在成功时返回一个对象，否则它会抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:20:59.250

您应该在 userEmailChnage() 方法中包含/要求 db.php。*

# php - GCM 消息未到达 API 或未发送，但返回成功标志

> ID：13949002
> 
> 赞同：1
> 
> 时间：2012-12-19T09:18:00.467
> 
> 标签：php, android, curl, google-api, google-cloud-messaging

我正在尝试使用 PHP 在 Android 上设置 Google Cloud Messaging（遵循本教程：[http ://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-和-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)）。我的设备在 GCM 中成功注册，然后在服务器上注册（regId 存储在数据库中）。

当我尝试发送到设备时，什么也没有收到，虽然我得到了这个响应：

{"multicast_id":4701392840778619841,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1355907831651938%978fee92f9fd7ecd"}]}

Google API 报告未发出任何请求。

这是我在 PHP 中的 send_notification 函数：

```
 public function send_notification($registration_ids, $message) {
    // include config
    include_once './config.php';

    // Set POST variables
    $url = 'https://android.googleapis.com/gcm/send';

    $fields = array(
        'registration_ids' => $registration_ids,
        'data' => $message,
    );

    $headers = array(
        'Authorization: key=' . GOOGLE_API_KEY,
        'Content-Type: application/json'
    );
    // Open connection
    $ch = curl_init();

    // Set the url, number of POST vars, POST data
    curl_setopt($ch, CURLOPT_URL, $url);

    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    // Disabling SSL Certificate support temporarly
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

    // Execute post
    $result = curl_exec($ch);
    if ($result === FALSE) {
        die('Curl failed: ' . curl_error($ch));
    }

    // Close connection
    curl_close($ch);
    echo $result;
} 
```

From research, I have seen similar questions have been asked to this, however they vary slightly - for example, different programming languages and no solution that I have found has solved this problem.

**Extra Info:**

**1.** I have checked and cURL is enabled.

**2.** My onMessage method

```
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = intent.getExtras().getString("price");

    displayMessage(context, message);
    // notifies user
    generateNotification(context, message);
} 
```

(price in the above just retrieves the message as its stored like this: $message = array("price" => $message); before being given as a parameter to the send_notification function on the server.

I have checked LogCat and 'Received message' does not appear.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:03:59.880

Just solved this (although I don't know what was causing the original problem). I shut my device down and started it up again and it went mad receiving all the messages I had sent it over the last few days. Now it receives them as they are sent, so assuming everything else is correct, if anyone is having this problem, try restarting the device.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:47:16.577

please generate and use server api key to view for live notification on device.

that is not mention in this post

[http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T23:31:10.030

I experienced a very similar (same?) problem. My issue was that I changed the String from "price" in the PHP code, but I hadn't done in the Android code. You need to do both. Maybe this will help someone. :)

# objective-c - 在opencv中将grayIplImage转换为彩色iplimage

> ID：13949005
> 
> 赞同：1
> 
> 时间：2012-12-19T09:18:02.713
> 
> 标签：objective-c, xcode, opencv

> **可能重复：**
> [在opencv中，如何将灰度图像复制并缩放为另一个彩色图像](https://stackoverflow.com/questions/13893464/in-opencv-how-do-i-copy-and-scale-a-greyscale-image-into-another-colour-image)

我正在使用这种方法来检测对象。输出很好，但我必须将 grayiplimage 转换为 coloriplimage (RGB) 。那么有人能告诉我该怎么做吗？

```
- (void)findObject
{

    UIImage *img = [UIImage imageNamed:@"marker.png"];
    objectToFind = [OpenCVUtilities CreateGRAYIplImageFromUIImage:img];

    NSLog(@"%@ %@", self, NSStringFromSelector(_cmd));
    CvMemStorage* storage = cvCreateMemStorage(0);
    static CvScalar colors[] = 
    {
        {{0,0,255}},
        {{0,128,255}},
        {{0,255,255}},
        {{0,255,0}},
        {{255,128,0}},
        {{255,255,0}},
        {{255,0,0}},
        {{255,0,255}},
        {{255,255,255}}
    };
    if( !objectToFind || !image )
    {
        NSLog(@"Missing object or image");
        return;
    }

    CvSize objSize = cvGetSize(objectToFind);
    IplImage* object_color = cvCreateImage(objSize, 8, 3);
    cvCvtColor( objectToFind, object_color, CV_GRAY2BGR );

    CvSeq *objectKeypoints = 0, *objectDescriptors = 0;
    CvSeq *imageKeypoints = 0, *imageDescriptors = 0;
    int i;
    CvSURFParams params = cvSURFParams(500, 1);

    double tt = (double)cvGetTickCount();
    NSLog(@"Finding object descriptors");
    cvExtractSURF( objectToFind, 0, &objectKeypoints, &objectDescriptors, storage, params );

    NSLog(@"Object Descriptors: %d", objectDescriptors->total);
    cvExtractSURF( image, 0, &imageKeypoints, &imageDescriptors, storage, params );

    NSLog(@"Image Descriptors: %d", imageDescriptors->total);
    tt = (double)cvGetTickCount() - tt;

    NSLog(@"Extraction time = %gms", tt/(cvGetTickFrequency()*1000.));
    CvPoint src_corners[4] = {{0,0}, {objectToFind->width,0}, {objectToFind->width, objectToFind->height}, {0, objectToFind->height}};
    CvPoint dst_corners[4];
    CvSize size = cvSize(image->width > objectToFind->width ? image->width : objectToFind->width,
                         objectToFind->height+image->height);
    output = cvCreateImage(size,  8,  1 );
    cvSetImageROI( output, cvRect( 0, 0, objectToFind->width, objectToFind->height ) );
    //cvCopy( objectToFind, output );
    cvResetImageROI( output );
    cvSetImageROI( output, cvRect( 0, objectToFind->height, output->width, output->height ) );
    //cvSetImageROI( output, cvRect( 0, 0, output->width, output->height ) );
    cvCopy( image, output );
    cvResetImageROI( output );

    NSLog(@"Locating Planar Object");
#ifdef USE_FLANN
    NSLog(@"Using approximate nearest neighbor search");
#endif
    if( locatePlanarObject( objectKeypoints, objectDescriptors, imageKeypoints,
                           imageDescriptors, src_corners, dst_corners ))
    {
        for( i = 0; i < 4; i++ )
        {
            CvPoint r1 = dst_corners[i%4];
            CvPoint r2 = dst_corners[(i+1)%4];
            cvLine( output, cvPoint(r1.x, r1.y+objectToFind->height ),
                   cvPoint(r2.x, r2.y+objectToFind->height ), colors[6],4 );
             width = sqrt(((r1.x-r2.x)*(r1.x-r2.x))+((r1.y-r2.y)*(r1.y-r2.y)));
        }
    }
    vector<int> ptpairs;
    NSLog(@"finding Pairs");
#ifdef USE_FLANN
    flannFindPairs( objectKeypoints, objectDescriptors, imageKeypoints, imageDescriptors, ptpairs );
#else
    findPairs( objectKeypoints, objectDescriptors, imageKeypoints, imageDescriptors, ptpairs );
#endif
   /*  for( i = 0; i < (int)ptpairs.size(); i += 2 )
    {
      CvSURFPoint* r1 = (CvSURFPoint*)cvGetSeqElem( objectKeypoints, ptpairs[i] );
    CvSURFPoint* r2 = (CvSURFPoint*)cvGetSeqElem( imageKeypoints, ptpairs[i+1] );
    cvLine( output, cvPointFrom32f(r1->pt),
         cvPoint(cvRound(r2->pt.x), cvRound(r2->pt.y+objectToFind->height)), colors[8] );
    }*/

    //Distance Calculation
    float dist = 629.0/width;
    int dist1 = 629/width;
    float dist2 = dist-floor(dist);
    [distanceLabel setText:[NSString stringWithFormat:@"Distance from the logo:  %d Feet %d Inches",dist1,(int)(dist2*12)]];
    //End Distance Calculation

    NSLog(@"Converting Output");
    UIImage *convertedOutput = [OpenCVUtilities UIImageFromGRAYIplImage:output];

    NSLog(@"Opening Stuff");
    [imageView setImage:convertedOutput];
    cvReleaseImage(&object_color);

    statuslabel.hidden = YES;
    spineer.hidden = YES;
    [spineer stopAnimating];
} 
```

代码中输出的是灰度图像。必须将其转换为彩色图像。

提前致谢 。如果我的问题不清楚，请告诉我。

# html - 我什么时候可以安全使用新的 HTML5 中的元素？

> ID：13949009
> 
> 赞同：28
> 
> 时间：2012-12-19T09:18:24.307
> 
> 标签：html, semantic-markup, specifications

`<main>`12 月 16 日，该元素的 HTML5 扩展规范[在名为 editors draft 的文件下提交给了 W3C](https://dvcs.w3.org/hg/html-extensions/raw-file/tip/maincontent/index.html)。摘要如下：

> 该规范是 HTML5 规范 [HTML5] 的扩展。它定义了一个元素，用于标识文档的主要内容区域。HTML5 规范中的所有规范性内容，除非被本规范明确覆盖，都旨在成为本规范的基础。
> 
> main 元素形式化了使用 id 值（例如“content”和“main”）来识别文档的主要内容部分的常见做法。它还定义了体现 WAI-ARIA [ARIA] 地标角色=main 的语义和功能的 HTML 元素。

例子：

```
<!-- other content -->

<main>

  <h1>Apples</h1>
 <p>The apple is the pomaceous fruit of the apple tree.</p>

 <article>
 <h2>Red Delicious</h2>
  <p>These bright red apples are the most common found in many
  supermarkets.</p>
  <p>... </p>
  <p>... </p>
  </article>

  <article>
  <h2>Granny Smith</h2>
  <p>These juicy, green apples make a great filling for
  apple pies.</p>
  <p>... </p>
  <p>... </p>
  </article>

</main>

<!-- other content --> 
```

里面有所有的信息，我觉得我应该开始将它整合到网页中。据我所知，HTML5 规范只是渐进式的，新功能被“固定”到规范中，没有升级。我想这意味着浏览器会在可能的时候开始实现它——问题是，这需要多长时间，我怎么知道所有浏览器都支持它？我现在应该像这样构建它并使用polyfill吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-19T09:31:43.463

对的支持`<main>`与对 HTML 5 中引入的任何其他新容器元素的支持非常相似。

*   足够新的浏览器将支持它。
*   较旧的浏览器将允许您对其进行样式`display: block`设置并为您提供它的视觉效果
*   如果没有 JavaScript shim，旧版本的 IE 根本不支持它（它的工作方式与所有其他新容器元素的工作方式完全相同）。

“何时”取决于您需要什么级别的浏览器支持以及您对 JS shim 的依赖程度。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-19T22:58:36.253

现在，我会小心使用它。

对于提案的未来，真正重要的是在浏览器中的实现。特别是，因为`<main>`它是一个建议的块级元素，它需要对 HTML5 解析器实现进行更改，并为其赋予默认的 ARIA 角色 main。

没有默认的 ARIA 角色，元素就没有意义，尽管现在使用它来准备是一种合理的方法。

不过，解析器更改确实需要一点小心。请记住，`</p>`标签是可选的。现在假设您决定在“主要”内容之前需要一段序言。你可以写：

```
<!DOCTYPE html>
<body>
  <p> This is my page preamble ...
  <main>
    My main content ...
    <div>
       A story ...
    </div>
  </main>
</body> 
```

如果并且当浏览器实现`<main>`元素时，`<main>`标签将自动关闭`<p>`元素，并且在 DOM 中，`<p>`元素和`<main>`元素将是彼此的兄弟姐妹。该`<div>`元素及其内容将是该元素的子`<main>`元素。即 DOM 将是：

```
HTML
 +--HEAD
 +--BODY
     +--P
     |  +--This is my page preamble ... 
     +--MAIN
         +--My main content ...
         +--DIV
             +--A story 
```

但是，现在在浏览器中，`<main>`成为元素的子元素`<p>`，而“我的主要内容...”是元素的子`<main>`元素，但`<div>`元素不是。即 DOM 有这样的结构：

```
HTML
 +--HEAD
 +--BODY
     +--P
     |  +--This is my page preamble ...
     |  +--MAIN
     |      +--My main content ... 
     +--DIV
        +--A story 
```

现在，当然，这很容易通过在序言段落中显式使用`</p>`标签来避免，但对于粗心的人来说，这是一个陷阱。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-22T10:23:11.427

[HTML 5.1](http://www.w3.org/html/wg/drafts/html/master/) [主要元素](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-main-element)现在在 Webkit 中实现[。](http://trac.webkit.org/changeset/140341)[验证支持](http://validator.w3.org/nu/)将很快跟进。期待[Firefox 的实施](https://bugzilla.mozilla.org/show_bug.cgi?id=820508)很快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-06T19:23:34.063

你可以继续使用它，Chrome 26 和 Firefox 21 已经实现了它。

就像许多其他新的 HTML5 元素的引入一样，并非所有浏览器都能识别`<main>`或预设样式。您需要确保它在 CSS 中显示为块级元素：

```
main {display:block;} 
```

目前，您还需要使用 JavaScript 为旧版本的 IE 创建元素：

```
<script>document.createElement('main');</script> 
```

当然，如果你使用[html5shiv](https://github.com/aFarkas/html5shiv)，`<main>`现在直接烘焙了。

# javascript - 用于手机 HTML5 Canvas 标签的 Javascript 动画库

> ID：13949011
> 
> 赞同：1
> 
> 时间：2012-12-19T09:18:34.917
> 
> 标签：javascript, html, animation, canvas, game-engine

用于游戏开发的手机 HTML5 Canvas Tag 最好的 JavaScript 动画库是什么？
许多可用的库不能为许多电话设备提供所需的性能。
我测试了`doodle.js`and`processingjs`和正常`setInterval`的 and `setTimeOut`。这些不按要求执行。动画无缘无故地弯下腰。
对 HTML5 手机游戏画布动画有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T05:07:49.420

I recommend `Collie.js`. Collie is a Javascript library that helps to create highly optimized animations and games using HTML 5\. Collie runs on both PC and mobile using HTML 5 canvas and DOM.

[http://jindo.dev.naver.com/collie](http://jindo.dev.naver.com/collie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T05:29:23.780

我已经使用并强烈推荐[**KineticJS**](http://kineticjs.com/)。

> KineticJS 是一个 HTML5 Canvas JavaScript 框架，它支持高性能动画、过渡、节点嵌套、分层、过滤、缓存、桌面和移动应用程序的事件处理等等。

# android - android拖放gridview排序

> ID：13949014
> 
> 赞同：1
> 
> 时间：2012-12-19T09:18:41.357
> 
> 标签：android, gridview, drag-and-drop

我创建了一个拖放网格视图（使用`OnDragListener`）。网格项目可以相互丢弃。但是，我也希望能够重新订购它们。我实现了这个，但还有一个主要问题：用户控制部分。

当我在我的阴影对象周围拖动时，我希望这些项目在我拖动它的同时为我拖动的对象腾出空间。我已经实现了其他项目的移动，但我似乎无法找到一种方法来找出如果/何时我在两个项目之间。当我将鼠标悬停在一个项目上方时，我会收到拖动事件，但不会在这两者之间。`onTouchEvent`当我拖动时，gridview 没有接到任何电话，甚至没有`onInterceptTouchEvent`接到电话。

有谁知道我可以实现这一点的方法？

我已经尝试过：

1.  在gridview中实现`onTouchEvent`和。问题：当我拖动一个项目时，`onInterceptTouchEvent`gridview 没有接到任何电话，甚至没有接到电话。`onTouchEvent``onInterceptTouchEvent`

2.  `draglistener`在整个网格视图上设置另一个。问题：`ACTION_DRAG_LOCATION`只被调用几次，而不是每次移动（位置更改），如记录（！！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T12:14:02.430

我删除了网格项目之间的填充，并给了项目本身一些额外的大小，这样你就永远不会在项目之间，而且在其中一个项目的一侧。我检测到我何时在一个项目的一侧并相应地移动这些项目以为我拖动的项目腾出空间。

# arrays - Perl：查找哈希的最大值并计算平均值

> ID：13949020
> 
> 赞同：5
> 
> 时间：2012-12-19T09:18:55.430
> 
> 标签：arrays, perl, hash, bioinformatics

经过大约 6 个月的重大休息后，我回到了 Perl 和生物信息学的世界，在另一位科学家手下实习。但是第一个任务不同于我上次遇到的任何任务，所以虽然我取得了一些进展，但我还没有能够完全解决这个问题。我还试图尽快修改我上次学到的任何东西，因为在过去的 6 个月里我完全失去了编程的联系。数据集如下所示：

```
NR_046018   DDX11L1     ,   0   0   1   1   1   1   1   1   1   1   0   0   0   0   1.44    2.72    3.84    4.92    5.6 6.64    7.08    9.12    9.56    8.28    7.16    6.08    5.4 4.36    3.92    1.88    0   0   0.76    1   1   1   1.2 2   2   2   1.72    2   2   2   1.8 1   1.88    2.4 3   3.36    5   6   6   6.72    6.12    5.6 5.44    5.56    5   4.04    5   4.28    4   4   3.08    2.08    1.68    1.96    1.44    3   3.68    4   4.16    5   4.32    4.8 6.16    6   6.28    6.92    7.84    7   7.32    7.2 5.96    5   4.52    4.08    3   3   4.04    4.12    4.44    4   3.52    3.4 4   4   2.64    1.88    1   1   1   0.64    1   1   1.24    2   2.92    3   3   2.96    2   2   2.56    2   1.08    2.12    3   3   3   3   2.6 3   4.64    3.88    3.72    4   4   4.96    4.6 4   2.36    2   1.28    1   1   0.04    0   0.24    1.08    2.68    3.84    4.12    5.72    6   6   5.76    4.92    3.32    3.12    2.88    2.08    2   2   2   2   2   1.44    2.92    3.04    4.28    5.8 7.8 9.48    10.52   13.04   12.08   11.6    11.72   11  9.2 7.52    7.12    7.08    7.08    8.32    7   6.6 7.6 8.04    8.36    6.72    7.88    7.72    8.4 9.24    8.88    8.96    9.88    10.08   9.24    9.28    10.16   11.04   10.52   10  8.56    8   7.8 7.72    6.44    4.32    4   4   3.72    3.68    3.68    3.28    5.56    7.36    9.48    10  10.52   11  12.16   11.96   9.44    8.64    7.52    7   6.48    6   5   5.12    6.28    6   5.52    6   6.68    6.08    7.52    8.16    7.72    8.52    8.56    9.2 9.16    8.92    7.44    6   5   3.48    2.92    2.16    2   2   1.2 1   1   1   1.24    1.64    1   1   1.96    2   2   2   1.76    1   1   1   0.52    1.76    3.64    5.12    6   6   6   6   5.52    4.24    2.36    0.88    0   0   0.68    1   1   1   1   1   1   1   0.32    0   0   1   1   1.44    2.44    3.68    5.4 6.88    7   6   6.52    6.76    6.56    5.32    3.6 2.92    3   3.72    3.96    3.8 3   3   3   2.2 2.4 2.28    1.52    1   1   1   1.72    2   1.6 1   1   1   1   1   0.28    0.92    2   2   2.72    3.64    4   4.84    5   4.08    3   3   2.68    2.36    2   1.16    1   1   2   4.92    4.6 4   4   4   4   4.32    4   1.08    1   1.52    2   2   2   1.68    1   1   1.32    1.48    1   1   1.52    2   2   2   1.68    1   1   1.88    1.48    1   1   1   1   1   1   0.12    0.4 1   1   1.2 3.88    4   5   5   4.6 4   4   3.8 2.08    2   1   1   1.44    2.4 3
NR_047520   LOC643837   ,   3   2.2 0.2 0   0   0.28    1   1   1   1   2.2 4.8 5   5.32    5   5   5   5   3.8 1.2 1   0.4 0   0   0   0   0   1   1   1   1   1   1   1   1.56    1   1   1   1   1   1   1   0.44    0.68    1   1.52    3   3.6 4.96    6.8 9   8.32    8.72    8.48    7   7.4 8.8 7.92    7.12    8.84    8.56    9.4 10.2    10  7.24    6.44    6.76    6.16    5.72    4.96    4.8 5.16    6   5.84    4.12    3   3   2.64    2.56    3.08    3   4.16    5   6.72    7   7.16    7.44    5.76    5   4.56    4   3.68    5   5.4 5.52    6   6   5.28    5   3.6 2   2.08    1.48    1   2   2   2   2   2   1.36    1   1   0   0   0.68    1   1   1   1   1   1   1   0.32    0   0   0   1.16    2   2   2   2   2.88    3   3   1.84    1   2   2   2.04    2.12    2   2   2   2   1   1.28    1.96    1.36    2.76    3   3   3   3   2.72    2   1.64    0.76    1   1.36    2   2   2   2   2   1.48    1   0.64    0   0.08    1   1   1.08    2   2   2   2   2.68    2   2   2.16    3.4 4   4   4.2 4.24    4   5.68    6.52    4.6 4   4   3.8 3.8 4   3.12    2.24    2.6 3   4   4   3.2 3   2.2 2   1.4 1.84    1.24    2   2   2   2   2   2   1.16    0.76    0   0   0   0   0   0   0   0.36    1   1.68    2   2   2.92    5.4 6.76    7.64    7   6.88    7   7.36    7.92    6.24    5.92    7.04    9.52    11.52   12.88   14.8    16.36   19.88   22.24   20  19.36   16.92   15.24   13.84   10.88   8.24    5.08    4.96    3.12    3   2.88    2   2.8 2.96    4   4.44    5   6   6   6   5.12    3.28    2   1.56    1   0.08    1.68    2   2   2.84    3   3   3.8 3.92    2.32    2   2.2 2.16    2   2   1.2 1   1   1   0.8 0   0   0   0.72    2.88    3   3   3   3   3   3   2.28    0.12    0   0.52    1   1   1   1   1.44    2   2   1.48    1   1   1   1.56    1.56    1   1   1   1   1   1   0.44    0.8 1.48    3   3   3   3   3   3.56    3.2 2.76    2   2   2   2   2.68    2.44    2   1.76    1   1.4 2   2   1.56    2   2   2   2   2.04    2   2   1.76    1   1   1   1   0.56    0   0   0   0   0   0   0   0   0.72    1.52    2   2   2   2   2   2   1.28    0.48 
```

**1\. 需要什么**

1.  对于数据文件中的每一行，从数字范围中找到最大值。
2.  找到所有行的最大值后，找到平均最大值。

**2\. 我在想的策略**

1.  将非数字部分与非数字部分分离为哈希的*“键”*。
2.  将数字部分放入哈希的*“值”中。*
3.  将*“值”*分配到数组中`@values`
4.  使用模块`use List::Util qw(max)`从数组中找到最大值
5.  将这些最大值存储在另一个数组中并从该数组中找到平均值。

**3\. 目前写的代码**

```
use warnings;
use List::Util qw(max);

#Input filename
$file = 'test1.data';

#Open file
open I, '<', $file or die;

#Separate data into keys and values, based on ','
chop (%hash = map { split /\s*,\s*/,$_,2 } grep (!/^$/,<I>));
print "$_ => $hash{$_}\n" for keys %hash; #Code is working fine till here

#Create a values array
@values = values %hash;
foreach $value(@values){
 print "The values are : ", $value,"\n";
} 
```

**4.问题**

除此之外，我无法弄清楚如何将每个`"individual"`数组元素添加到一个新数组中，以便我可以使用 max 函数。

我的意思是，例如，`first array element`in`@values`包含像`0 0 1 1 3 4.4`. `second array element`可能有类似的数据`3 2.2 0.28 1 1 4.8`。所以我需要将`each`这些数组元素放入一个新数组中，*每个元素*放入一个*不同的数组*中，以便我可以使用该`max`函数。

**五、注意事项**

1.  大多数行包含 400 个数字，有些行少于 400 个，但从不超过 400 个。

2.  总共有 23,558 行。

3.  文件是一个 .txt 文件，每行中的所有数字都是制表符分隔的。

如果有人愿意为我指出正确的方向，或者提供更好的代码来解决**1 中提到的问题，我将不胜感激。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T09:57:03.697

如果我正确理解了您的问题，那么您将使它变得过于复杂：

```
#!/usr/bin/env perl
use strict;
use warnings;
use List::Util qw(max);

#Input filename
my $file = 'test1.data';

#Open file
open my $fh, '<', $file or die "Unable to open $file: $!\n";

my ($total, $num);

while (<$fh>) {
    my @values = split;
    my $max = max(@values[3 .. $#values]);
    $total += $max;
    $num++;
}

my $average_max = $total / $num; 
```

只需对您的文件进行一次传递，将行拆分为一个数组并将所有内容从 index 馈送`3`到`max`. 添加`$max`到`$total`每一行，增加一个计数器 ( `$num`) 并从中计算平均最大值。

您还应该始终使用`use strict`和词法文件句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:09:26.940

这是一个有趣的解决方案。如果你正在使用`List::Util`，你不妨也使用`sum`。

```
#!usr/bin/perl
use strict;
use warnings;
use List::Util qw/max sum/;

my %line_max = map {
    /([\w\s]*?)\s*,\s*(.*)/ or die "bad line";
    $1 => max split ' ', $2
} <DATA>;

print "$_: $line_max{$_}\n" foreach (keys %line_max);

my $avg_max = sum (values %line_max) / scalar (values %line_max);
print "average: $avg_max\n";

__DATA__
NR_046018   DDX11L1     ,   0   0   1   1   1   1   1   1   1   1   0   0   0   0   1.44    2.72    3.84    4.92    5.6 6.64    7.08    9.12    9.56    8.28    7.16    6.08    5.4 4.36    3.92    1.88    0   0   0.76    1   1   1   1.2 2   2   2   1.72    2   2   2   1.8 1   1.88    2.4 3   3.36    5   6   6   6.72    6.12    5.6 5.44    5.56    5   4.04    5   4.28    4   4   3.08    2.08    1.68    1.96    1.44    3   3.68    4   4.16    5   4.32    4.8 6.16    6   6.28    6.92    7.84    7   7.32    7.2 5.96    5   4.52    4.08    3   3   4.04    4.12    4.44    4   3.52    3.4 4   4   2.64    1.88    1   1   1   0.64    1   1   1.24    2   2.92    3   3   2.96    2   2   2.56    2   1.08    2.12    3   3   3   3   2.6 3   4.64    3.88    3.72    4   4   4.96    4.6 4   2.36    2   1.28    1   1   0.04    0   0.24    1.08    2.68    3.84    4.12    5.72    6   6   5.76    4.92    3.32    3.12    2.88    2.08    2   2   2   2   2   1.44    2.92    3.04    4.28    5.8 7.8 9.48    10.52   13.04   12.08   11.6    11.72   11  9.2 7.52    7.12    7.08    7.08    8.32    7   6.6 7.6 8.04    8.36    6.72    7.88    7.72    8.4 9.24    8.88    8.96    9.88    10.08   9.24    9.28    10.16   11.04   10.52   10  8.56    8   7.8 7.72    6.44    4.32    4   4   3.72    3.68    3.68    3.28    5.56    7.36    9.48    10  10.52   11  12.16   11.96   9.44    8.64    7.52    7   6.48    6   5   5.12    6.28    6   5.52    6   6.68    6.08    7.52    8.16    7.72    8.52    8.56    9.2 9.16    8.92    7.44    6   5   3.48    2.92    2.16    2   2   1.2 1   1   1   1.24    1.64    1   1   1.96    2   2   2   1.76    1   1   1   0.52    1.76    3.64    5.12    6   6   6   6   5.52    4.24    2.36    0.88    0   0   0.68    1   1   1   1   1   1   1   0.32    0   0   1   1   1.44    2.44    3.68    5.4 6.88    7   6   6.52    6.76    6.56    5.32    3.6 2.92    3   3.72    3.96    3.8 3   3   3   2.2 2.4 2.28    1.52    1   1   1   1.72    2   1.6 1   1   1   1   1   0.28    0.92    2   2   2.72    3.64    4   4.84    5   4.08    3   3   2.68    2.36    2   1.16    1   1   2   4.92    4.6 4   4   4   4   4.32    4   1.08    1   1.52    2   2   2   1.68    1   1   1.32    1.48    1   1   1.52    2   2   2   1.68    1   1   1.88    1.48    1   1   1   1   1   1   0.12    0.4 1   1   1.2 3.88    4   5   5   4.6 4   4   3.8 2.08    2   1   1   1.44    2.4 3
NR_047520   LOC643837   ,   3   2.2 0.2 0   0   0.28    1   1   1   1   2.2 4.8 5   5.32    5   5   5   5   3.8 1.2 1   0.4 0   0   0   0   0   1   1   1   1   1   1   1   1.56    1   1   1   1   1   1   1   0.44    0.68    1   1.52    3   3.6 4.96    6.8 9   8.32    8.72    8.48    7   7.4 8.8 7.92    7.12    8.84    8.56    9.4 10.2    10  7.24    6.44    6.76    6.16    5.72    4.96    4.8 5.16    6   5.84    4.12    3   3   2.64    2.56    3.08    3   4.16    5   6.72    7   7.16    7.44    5.76    5   4.56    4   3.68    5   5.4 5.52    6   6   5.28    5   3.6 2   2.08    1.48    1   2   2   2   2   2   1.36    1   1   0   0   0.68    1   1   1   1   1   1   1   0.32    0   0   0   1.16    2   2   2   2   2.88    3   3   1.84    1   2   2   2.04    2.12    2   2   2   2   1   1.28    1.96    1.36    2.76    3   3   3   3   2.72    2   1.64    0.76    1   1.36    2   2   2   2   2   1.48    1   0.64    0   0.08    1   1   1.08    2   2   2   2   2.68    2   2   2.16    3.4 4   4   4.2 4.24    4   5.68    6.52    4.6 4   4   3.8 3.8 4   3.12    2.24    2.6 3   4   4   3.2 3   2.2 2   1.4 1.84    1.24    2   2   2   2   2   2   1.16    0.76    0   0   0   0   0   0   0   0.36    1   1.68    2   2   2.92    5.4 6.76    7.64    7   6.88    7   7.36    7.92    6.24    5.92    7.04    9.52    11.52   12.88   14.8    16.36   19.88   22.24   20  19.36   16.92   15.24   13.84   10.88   8.24    5.08    4.96    3.12    3   2.88    2   2.8 2.96    4   4.44    5   6   6   6   5.12    3.28    2   1.56    1   0.08    1.68    2   2   2.84    3   3   3.8 3.92    2.32    2   2.2 2.16    2   2   1.2 1   1   1   0.8 0   0   0   0.72    2.88    3   3   3   3   3   3   2.28    0.12    0   0.52    1   1   1   1   1.44    2   2   1.48    1   1   1   1.56    1.56    1   1   1   1   1   1   0.44    0.8 1.48    3   3   3   3   3   3.56    3.2 2.76    2   2   2   2   2.68    2.44    2   1.76    1   1.4 2   2   1.56    2   2   2   2   2.04    2   2   1.76    1   1   1   1   0.56    0   0   0   0   0   0   0   0   0.72    1.52    2   2   2   2   2   2   1.28    0.48 
```

注意：`map`语法很可爱，但如果文件很大，您应该使用 while 循环来提高效率。while 循环避免将整个文件读入内存：

```
while (<DATA>)
{
    if (/^([\w\s]*?)\s*,\s*(.*)/)
    {
        $line_max{$1} = max split ' ', $2;  
    }
    else
    {
        print "Line $. is bad.\n";  
    }   
} 
```

# html - 使第二个跨度环绕在自身下方而不是第一个

> ID：13949023
> 
> 赞同：1
> 
> 时间：2012-12-19T09:19:04.727
> 
> 标签：html, css

你好我有这个代码

```
<div class="test">
    <span class="first-span">first span</span>
    <span class="second-span">some long long long long text</span>
</div> 
```

用CSS

```
.test{
    width:150px;
    margin:10px
}
.first-span{
    border:1px solid red;
}
.second-span{
    border:1px solid blue
}​ 
```

[JSFIDDLE 链接](http://jsfiddle.net/66AUy/)

现在，正如你们都可以在小提琴中看到的那样，第二个跨度中的“长”字正在包装并在“第一”字下。但我需要的是“long”应该放在“some”这个词下

这有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:21:43.447

这是跨度工作的方式，或者所有“内联”元素。为了解决这个问题，我们可以`display: block; float: left;`使用 float:left 使跨度只占用它需要的空间。

[工作演示在这里](http://jsfiddle.net/66AUy/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:07:08.247

将显示器用作表格怎么样？

```
.test {
  display: table;
}

.test span {
  display: table-cell;
  width: 100px;
  border: 1px solid #333;
}

.test .first-span {
  width: 100px;
}
```

```
<div class="test">
  <span class="first-span">first span</span>
  <span class="second-span">some long long long long text</span>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:24:12.260

有更好的方法，但只需将第一个跨度浮动到左边就可以了

```
.first-span{
    border:1px solid red;
    float:left;
    display:block;
} 
```

# javascript - 通过javascript解析JSON之类的字符串

> ID：13949025
> 
> 赞同：1
> 
> 时间：2012-12-19T09:19:09.843
> 
> 标签：javascript

我有这个变量，它是类似 json 的字符串，解析到对象时出现错误

```
"SyntaxError: JSON.parse: expected ',' or '}' after property value in object" 
```

代码：

```
var obj = JSON.parse('{"data":[{"from":"{\"category\":\"Bank/financial institution\"}"}],"statusCode":200}'); 
```

似乎该功能不适用于嵌套`"{\"category\":\"Bank/financial institution\"}"`，用简单的文本（例如“123”）替换就可以了，有没有办法处理这种情况？
谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:21:49.427

前面的`\`（反斜杠）字符`"category`是不必要的。

没有必要在单引号字符串中转义双引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:25:56.130

您的字符串确实格式错误。

你要么想要：

```
var obj = JSON.parse('{"data":[{"from":{"category":"Bank/financial institution"}}],"statusCode":200}'); 
```

...（例如，没有引号`from`和没有反斜杠的值），当反序列化时，会产生一个对象，其属性称为`data`which 是一个数组，它的第一个条目是一个对象，其属性称为`from`which 是一个**对象**：[Live示例](http://jsbin.com/ohutun/1)| [来源](http://jsbin.com/ohutun/1/edit)

或者

```
var obj = JSON.parse('{"data":[{"from":"{\\"category\\":\\"Bank/financial institution\\"}"}],"statusCode":200}'); 
```

...（例如，在值周围保留引号`from`并确保反斜杠出现在 JSON 中，这意味着转义它们）在您到达 之前是相同的`from`，它是一个**字符串**：[Live Example](http://jsbin.com/ohutun/2) | [来源](http://jsbin.com/ohutun/2/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:24:07.770

删除内部对象的引号

```
var obj = {
    "data": [{
        "from": {
            "category": "Bank/financial institution"
         }
     }],
     "statusCode": 200
} 
```

# java - 如何使用 swingx 1.6 突出显示 JTable 中的每一行

> ID：13949028
> 
> 赞同：7
> 
> 时间：2012-12-19T09:19:29.453
> 
> 标签：java, swing, swingx, jxtreetable, swingx-highlighter

我需要突出显示我的 JTable 中的每一行。使用旧版本的 swingx 可以这样做：

```
table.setHighlighters(new HighlighterPipeline(new Highlighter[] { new AlternateRowHighlighter(
            color1, color2,color3 })); 
```

但是现在，对于 swingx 1.6，方法*setHighlighters()*不能接受这些参数。它说*“JXTable 类型中的方法 setHighlighters(Highlighter...) 不适用于参数 (HighlighterPipeline)”*

那么我怎么能用新的swingx呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:03:47.730

要为您添加剥离，您`JXTable`需要使用`HighlighterFactory`.
尝试：

```
table.addHighlighter(HighlighterFactory.createSimpleStriping()); 
```

或者：

```
table.addHighlighter(HighlighterFactory.createAlternateStriping(Color baseBackground, Color alternateBackground)); 
```

或者，如果您想添加多个荧光笔，您可以使用：

```
table.setHighlighters(Highlighter... highlighters); 
```

总是使用`HighlighterFactory`来创建你的荧光笔。

# android - android试图圆位图角落

> ID：13949036
> 
> 赞同：6
> 
> 时间：2012-12-19T09:19:49.953
> 
> 标签：android, bitmap, imageview

我有一个 imageView 并且我正在尝试创建圆角，尝试了这篇文章中的所有解决方案：[如何制作带有圆角的 ImageView？](https://stackoverflow.com/questions/2459916/how-to-make-an-imageview-to-have-rounded-corners) 但没有任何效果.. 这是我的 XML

```
 <RelativeLayout
    android:id="@+id/RL_ImageHolder"
    android:layout_width="150dp"
    android:layout_height="180dp"
    android:layout_alignBottom="@+id/relativeLayout2"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/relativeLayout2"
    android:layout_marginLeft="10dp" >

    <ImageView
        android:id="@+id/imgPreview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:contentDescription="Preview"

         />
</RelativeLayout> 
```

这就是我使用上面链接的帖子中提到的方法设置 ImageView 的方式：

```
 byteArray = extras.getByteArray("picture");
    if (byteArray != null) {
        bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
        preview.setScaleType(ScaleType.CENTER_CROP);
        preview.setImageBitmap(getRoundedCornerBitmap(bmp)); 
```

图像设置正确，但它保持一个矩形..任何想法为什么它不起作用？

**编辑：**刚刚发现只有当保存图像的布局具有固定的宽度/高度时，它才起作用..必须考虑如何管理它。多谢你们

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T09:22:30.693

试试下面的代码片段：

```
public static Bitmap GetCurveImage(Bitmap bitmap) {
        // Bitmap myCoolBitmap = ... ; // <-- Your bitmap you
        // want rounded
        int w = bitmap.getWidth(), h = bitmap.getHeight();

        // We have to make sure our rounded corners have an
        // alpha channel in most cases
        Bitmap rounder = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        Canvas canvas = new Canvas(rounder);

        // We're going to apply this paint eventually using a
        // porter-duff xfer mode.
        // This will allow us to only overwrite certain pixels.
        // RED is arbitrary. This
        // could be any color that was fully opaque (alpha =
        // 255)
        Paint xferPaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        xferPaint.setColor(Color.RED);

        // We're just reusing xferPaint to paint a normal
        // looking rounded box, the 20.f
        // is the amount we're rounding by.
        canvas.drawRoundRect(new RectF(0, 0, w, h), 5.0f, 5.0f, xferPaint);

        // Now we apply the 'magic sauce' to the paint
        xferPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));

        Bitmap result = Bitmap.createBitmap(bitmap.getWidth(),
                bitmap.getHeight(), Bitmap.Config.ARGB_8888);
        Canvas resultCanvas = new Canvas(result);
        resultCanvas.drawBitmap(bitmap, 0, 0, null);
        resultCanvas.drawBitmap(rounder, 0, 0, xferPaint);

        return result;
    } 
```

希望它会帮助你。

# php - preg_match() [function.preg-match]：未知修饰符

> ID：13949040
> 
> 赞同：5
> 
> 时间：2012-12-19T09:19:55.397
> 
> 标签：php, preg-match

我收到此错误消息：

> preg_match() [function.preg-match]：第 13 行 /home/public_html/checkem.php 中的未知修饰符 '='

当我转到以下行时，我得到了这个：

```
<?php
    //thx to http://www.phpit.net/code/valid-email/ for valid_email
    function valid_email($email) {
    // First, we check that there's one @ symbol, and that the lengths are right
    if (!ereg("^[^@]{1,64}@[^@]{1,255}$", $email)) {
        // Email invalid because wrong number of characters in one section, or wrong number @ symbols.
        return false;
    }
    // Split it into sections to make life easier
    $email_array = explode("@", $email);
    $local_array = explode(".", $email_array[0]);
    for ($i = 0; $i < sizeof($local_array); $i++) {
        if (!preg_match("/^(([A-Za-z0-9!#$%&#038;'*+/=?^_`{|}~-][A-Za-z0-9!#$%&#038;14.'*+/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$/", $local_array[$i])) {
            return false;
        }
    }  
    if (!ereg("^\[?[0-9\.]+\]?$", $email_array[1])) { // Check if domain is IP. If not, it should be valid domain name
        $domain_array = explode(".", $email_array[1]);
            if (sizeof($domain_array) < 2) {
                return false; // Not enough parts to domain
            }
        }
    }
?> 
```

我已更改`ereg`为`preg_match`然后将代码包装为`//`因为`ereg`显示为已弃用。我仍然是编码的初学者，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:48:13.093

如果 / 是您的模式分隔符，则必须在模式中使用反斜杠对其进行屏蔽。并且 PHP 字符串的反斜杠也必须（应该）被屏蔽。

```
preg_match("/^(([A-Za-z0-9!#$%&#038;'*+/=?^_`{|}~-][A-Za-z0-9!#$%&#038;14.'*+/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$/", $local_array[$i])

preg_match("/^(([A-Za-z0-9!#$%&#038;'*+\\/=?^_`{|}~-][A-Za-z0-9!#$%&#038;14.'*+\\/=?^_`{|}~\\.-]{0,63})|(\\"[^(\\\\|\\")]{0,62}\\"))$/", $local_array[$i]) 
```

BurninLeo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:46:29.400

```
preg_match("/^(([A-Za-z0-9!#$%&#038;'*+/=?^_`{|}~-][A-Za-z0-9!#$%&#038;14.'*+/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$/
            ^                          ^
            |                          |
          start                       end 
```

`/`当`\/`它不是分隔符时，您需要引用。或者，选择不在表达式中的分隔符，例如`@`.

# rdf - Freebase 最近是否发布了 RDF 转储？

> ID：13949043
> 
> 赞同：3
> 
> 时间：2012-12-19T09:20:07.567
> 
> 标签：rdf, jena, freebase

我最近在 Freebase wiki 上看到他们发布了数据的 RDF 转储。这些数据是否包含其图的完整转储，包括元模式？如果是这样，是否有任何文档说明如何将此 GB 大小的文件加载到 JENA 等三重存储中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:06:03.397

是的，RDF 转储是完整的（或至少与四元转储一样完整）。它包括模式（查找`s rdf:type rdf:Class .`三元组）和元模式（记录在 ns:base.fbontology 中）。

我对 Jena 不太熟悉，但如果它没有关于如何加载 RDF 文件的文档，我会感到非常惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:25:46.793

请参阅[Jena TDB](http://jena.apache.org/documentation/tdb/index.html)文档，了解如何将大型数据集加载到 TDB 三重存储中

*免责声明*- 我是 Jena 开发人员

# python - 在 Django URL 中检索 IP 地址作为参数

> ID：13949045
> 
> 赞同：2
> 
> 时间：2012-12-19T09:20:12.717
> 
> 标签：python, regex, django, url, filter

我的应用程序列出了一些游戏服务器的 IP 地址。

我想添加一个简单的搜索引擎，其中包含一个正则表达式。我会键入`^200.`以仅列出以开头的 IP 地址`200.`

该表单会通过发送这样的 GET 请求将我重定向到结果页面：

```
/servers/search/^200./page/1/range/30/ 
```

这是我正在使用的行`urls.py`：

```
url(r'^servers/search/(?P<search>[a-zA-Z0-9.]+)/page/(?P<page>\d+)/range/(?P<count>\d+)/$', gameservers.views.index) 
```

但它不像我预期的那样工作。没有显示结果。我故意犯了语法错误来查看局部变量。然后我意识到`search`变量的值如下：

```
^200./page/1/range/30/ 
```

我怎样才能解决这个问题 ？我考虑过`search`在 url 的结尾移动参数，但是看看是否有办法限制 next 的值可能会很有趣`/`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:29:08.060

您的正则表达式根本不匹配：您不接受该`^`字符。但即使是这样，也不可能在`search`变量中捕获完整的 URL，因为这样 URL 的其余部分将不匹配。

但是，我不会尝试解决此问题。试图在 URL 本身中捕获复杂的模式通常是错误的。对于搜索值，将其移至 GET 查询参数是完全可以接受的，这样您的 URL 将如下所示：

```
/servers/search/?search=^200.&page=1&range=30 
```

或者，如果您愿意，您仍然可以捕获 URL 中的`page`和`range`值，但将`search`值保留为查询参数。

# google-maps - Google Maps 区域中的自定义标记

> ID：13949049
> 
> 赞同：3
> 
> 时间：2012-12-19T09:20:22.233
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, latitude-longitude

> **可能重复：**
> [计算“乌鸦飞”的距离php](https://stackoverflow.com/questions/13845152/calculate-as-the-crow-flies-distance-php)

我正在尝试开发一个**GoogleMaps**页面，我可以在其中获取用户位置并从位于用户周围计算区域内的**XML**文件中显示自定义标记点。

为了让事情更清楚：

1.  我有一个来自**WebConfig**文件的半径参数，比如 5000（以米为单位）
2.  我在地图上找到了用户位置，
3.  使用我拥有的**xml**列表（xml 具有每个商店的 Lat-Long 值）我想在地图上放置**自定义标记**，该标记位于 5 km^2*区域范围内*，**用户位置为 center**。

有没有办法实现这个目标？

如何仅通过传递用户的位置坐标和距离参数（在我的情况下为 5000）来计算一个点的纬度和经度值？

编辑 ：

> 我的 XML 文档有点庞大，包括全国各地的白色家电商店。我的主要问题是使用用户的当前位置过滤这些数据行（long，latt）。
> 
> ```
> I need something like:
> func distanceCale(int long, int latt, int radius)
> to return me some values that can help me filter my XML data.
> 
> I guess my question was not clear enough at the firs place. :) 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:55:38.420

您可以使用[**Haversine 公式**](http://rosettacode.org/wiki/Haversine_formula)实现此目的。此公式已在 一个 XML 文件的[**演示**](http://daviestrachan.co.uk/maps/stationmapXML.php)中使用，该文件显示给定半径内的标记。

对于您的应用程序，javascript 代码用于从 XML 文件生成标记。

```
function deg2rad(degrees){
radians = degrees * (Math.PI/180);
//document.write(radians);
return radians;

}
function Haversine(lat1,lon1,lat2,lon2) {
  deltaLat = lat2 - lat1 ;
  deltaLon = lon2 - lon1 ;
  earthRadius = 3959; // in miles 6371 in meters.
  alpha    = deltaLat/2;
  beta     = deltaLon/2;
  a        = Math.sin(deg2rad(alpha)) * Math.sin(deg2rad(alpha)) + Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(deg2rad(beta)) * Math.sin(deg2rad(beta)) ;
  c        = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  distance =  earthRadius * c;
  return distance.toFixed(2);
} 
```

解析 XML 时使用 Haversine 函数

```
var radius = document.getElementById('radiusSelect').value;
       for (var i = 0; i < markerNodes.length; i++) {
         var lat = parseFloat(markerNodes[i].getAttribute("lat"));
         var lng = parseFloat(markerNodes[i].getAttribute("lng"));
         var latlng = new google.maps.LatLng(
              lat,
              lng);
        var  distance = Haversine(center.lat(),center.lng(),lat,lng);
        if(distance<=radius) {    
         createOption(name, distance, i);
         createMarker(latlng, name, distance);
         bounds.extend(latlng);
         } 
```

# security - 从 EJB 调用 HTTP 时如何传播 WebSphere 安全令牌

> ID：13949055
> 
> 赞同：1
> 
> 时间：2012-12-19T09:20:56.053
> 
> 标签：security, http, ejb, websphere, ltpa

我有一个 EJB，它使用 HTTP（REST api）调用单元中的另一台服务器。

在 EJB 上下文中，用户已经过身份验证和授权，如何将安全令牌传播到其他服务器，避免在请求中提供凭据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:20:56.053

可以从安全性获取 WebSphere 的`Ltpa`令牌`subject`并将其作为`cookie`HTTP 调用的 a 传递：

```
public static SingleSignonToken getSSOTokenFromSubject(final Subject subject) {
    if (subject == null) {
        return null;
    }
    return AccessController.doPrivileged(new PrivilegedAction<SingleSignonToken>() {
        public SingleSignonToken run() {
            Set<SingleSignonToken> ssoTokens = subject.getPrivateCredentials(SingleSignonToken.class);
                for (SingleSignonToken ssoToken : ssoTokens) {
                if (ssoToken.getName().equals("LtpaToken")) {
                    return ssoToken;
                }
            }

            return null;
        }
    });
}

// Get cookie to add to outgoing HTTP requests
SingleSignonToken ssoToken =  getSSOTokenFromSubject(subject);

String ssoTokenStr = null;
if (ssoToken != null) {
    byte[] ssoTokenBytes = ssoToken.getBytes();
    ssoTokenStr = com.ibm.ws.util.Base64.encode(ssoTokenBytes);
}
String ssoTokenCookie = "LtpaToken2=" + ssoTokenStr; 
```

通过向`ssoTokenCookie`请求 cookie 添加 ，无需提供用户凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T16:47:04.237

```
Cookie ltpaCookie = WebSecurityHelper.getSSOCookieFromSSOToken(); 
```

从当前线程的主题中提取 SSO 令牌并从中构建 SSO cookie 以用于下游 Web 调用。基本上下面帖子中的整个代码是做什么的。我相信可以从 WAS 8.x 访问此方法。

需要以下 Jar 作为编译参考：com.ibm.ws.admin.client-8.5.0.jar
（我在此示例中使用 WAS 8.5.5.11）

# jquery - 从添加和删除选择列表中存储值

> ID：13949058
> 
> 赞同：0
> 
> 时间：2012-12-19T09:21:03.990
> 
> 标签：jquery, mysql, ajax, forms, html-select

我用这个[来添加/删除选择列表](http://www.designchemical.com/blog/index.php/jquery/create-add-remove-select-lists-using-jquery/)

```
<form action="home.php?action=test" method="post" id="myform" name="myform" onsubmit="ValidatePageForm()">
<fieldset>
<select name="selectfrom" id="select-from" multiple size="5">
<option value="1">Item 1</option>
<option value="2">Item 2</option>
<option value="3">Item 3</option>
<option value="4">Item 4</option>
</select>
<a href="JavaScript:void(0);" id="btn-add">Add &raquo;</a>
<a href="JavaScript:void(0);" id="btn-remove">&laquo; Remove</a>
<select name="selectto" id="select-to" multiple size="5">
<option value="5">Item 5</option>
<option value="6">Item 6</option>
<option value="7">Item 7</option>
</select>
</fieldset>
<input name="submit" type="submit" value="submit" />
</form> 
```

使用下面的脚本我可以看到所选选项的值

```
<script type="text/javascript">
function ValidatePageForm()
{
$('#select-to option').each(function(){
alert($(this).val());
});
}
</script> 
```

但是我怎样才能获取这些值并将它们存储在数据库中？因为当我提交时，我在转储后看不到数据。

请对此提供任何帮助。

谢谢， 沙赫扎德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:55:23.367

```
<form action="home.php?action=test" method="post" id="myform" name="myform" onsubmit="ValidatePageForm()">
<fieldset>
<select name="selectfrom" id="select-from" multiple size="5">
<option value="1">Item 1</option>
<option value="2">Item 2</option>
<option value="3">Item 3</option>
<option value="4">Item 4</option>
</select>
<a href="JavaScript:void(0);" id="btn-add">Add &raquo;</a>
<a href="JavaScript:void(0);" id="btn-remove">&laquo; Remove</a>
<select name="selectto[]" id="select-to" multiple size="5"><!--declare name as array-->
<option value="5">Item 5</option>
<option value="6">Item 6</option>
<option value="7">Item 7</option>
</select>
</fieldset>
<input name="submit" type="submit" value="submit" />
</form> 
```

由于您试图获取多个值，首先您需要将您的元素声明为数组，然后您可以像这样在 php 中获取这些值

```
 <?php
    if(isset($_POST['selectto'])){
        $selecto = $_POST['selectto'];
        foreach($selecto as $selecto_vals)
             echo $selecto_vals;           
    }
  ?> 
```

# javascript - 在 HTML 中选择后保持范围对象的变化

> ID：13949059
> 
> 赞同：21
> 
> 时间：2012-12-19T09:21:09.093
> 
> 标签：javascript, jquery, html, range, selection

有没有办法保存更改，例如更改跨越多个标签的 HTML 文本的背景，以便在再次加载时所做的更改应反映在 HTML 页面中。

编辑：详细解释。

加载 HTML 页面时，使用 range 对象和 executeCommand 选择并突出显示文本：

```
 document.execCommand("BackColor", false, 'yellow'); 
```

更改（将文本突出显示为黄色）将一直保留到重新加载页面。但是当页面重新加载时，这些更改不存在。我想要以某种方式保存这些更改，例如在本地 DB sqlite 中，以便在重新加载/刷新页面时应该出现 HTML 页面中的更改。

任何想法如何做到这一点。我是否需要保存其范围开始偏移量和结束偏移量，以便在下次加载页面时创建范围。请给出你的见解。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-12-19T10:33:55.437

对于每个选择，您可以将所选范围序列化为字符偏移量，并在重新加载时使用如下所示再次反序列化：

演示：http: [//jsfiddle.net/WeWy7/3/](http://jsfiddle.net/WeWy7/3/)

代码：

```
var saveSelection, restoreSelection;

if (window.getSelection && document.createRange) {
    saveSelection = function(containerEl) {
        var range = window.getSelection().getRangeAt(0);
        var preSelectionRange = range.cloneRange();
        preSelectionRange.selectNodeContents(containerEl);
        preSelectionRange.setEnd(range.startContainer, range.startOffset);
        var start = preSelectionRange.toString().length;

        return {
            start: start,
            end: start + range.toString().length
        };
    };

    restoreSelection = function(containerEl, savedSel) {
        var charIndex = 0, range = document.createRange();
        range.setStart(containerEl, 0);
        range.collapse(true);
        var nodeStack = [containerEl], node, foundStart = false, stop = false;

        while (!stop && (node = nodeStack.pop())) {
            if (node.nodeType == 3) {
                var nextCharIndex = charIndex + node.length;
                if (!foundStart && savedSel.start >= charIndex && savedSel.start <= nextCharIndex) {
                    range.setStart(node, savedSel.start - charIndex);
                    foundStart = true;
                }
                if (foundStart && savedSel.end >= charIndex && savedSel.end <= nextCharIndex) {
                    range.setEnd(node, savedSel.end - charIndex);
                    stop = true;
                }
                charIndex = nextCharIndex;
            } else {
                var i = node.childNodes.length;
                while (i--) {
                    nodeStack.push(node.childNodes[i]);
                }
            }
        }

        var sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
    }
} else if (document.selection) {
    saveSelection = function(containerEl) {
        var selectedTextRange = document.selection.createRange();
        var preSelectionTextRange = document.body.createTextRange();
        preSelectionTextRange.moveToElementText(containerEl);
        preSelectionTextRange.setEndPoint("EndToStart", selectedTextRange);
        var start = preSelectionTextRange.text.length;

        return {
            start: start,
            end: start + selectedTextRange.text.length
        }
    };

    restoreSelection = function(containerEl, savedSel) {
        var textRange = document.body.createTextRange();
        textRange.moveToElementText(containerEl);
        textRange.collapse(true);
        textRange.moveEnd("character", savedSel.end);
        textRange.moveStart("character", savedSel.start);
        textRange.select();
    };
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-03T19:53:25.540

如果光标位于新段落的开头，则使用字符偏移不起作用。下面的方法遍历 DOM 节点并将所有节点计入偏移量。它还单独处理开始和结束，以确保选择记住其确切位置。这是我在一个主要项目中使用的更新版本（见最后的功能）：

```
/*
 Gets the offset of a node within another node. Text nodes are
 counted a n where n is the length. Entering (or passing) an
 element is one offset. Exiting is 0.
 */
var getNodeOffset = function(start, dest) {
  var offset = 0;

  var node = start;
  var stack = [];

  while (true) {
    if (node === dest) {
      return offset;
    }

    // Go into children
    if (node.firstChild) {
      // Going into first one doesn't count
      if (node !== start)
        offset += 1;
      stack.push(node);
      node = node.firstChild;
    }
    // If can go to next sibling
    else if (stack.length > 0 && node.nextSibling) {
      // If text, count length (plus 1)
      if (node.nodeType === 3)
        offset += node.nodeValue.length + 1;
      else
        offset += 1;

      node = node.nextSibling;
    }
    else {
      // If text, count length
      if (node.nodeType === 3)
        offset += node.nodeValue.length + 1;
      else
        offset += 1;

      // No children or siblings, move up stack
      while (true) {
        if (stack.length <= 1)
          return offset;

        var next = stack.pop();

        // Go to sibling
        if (next.nextSibling) {
          node = next.nextSibling;
          break;
        }
      }
    }
  }
};

// Calculate the total offsets of a node
var calculateNodeOffset = function(node) {
  var offset = 0;

  // If text, count length
  if (node.nodeType === 3)
    offset += node.nodeValue.length + 1;
  else
    offset += 1;

  if (node.childNodes) {
    for (var i=0;i<node.childNodes.length;i++) {
      offset += calculateNodeOffset(node.childNodes[i]);
    }
  }

  return offset;
};

// Determine total offset length from returned offset from ranges
var totalOffsets = function(parentNode, offset) {
  if (parentNode.nodeType == 3)
    return offset;

  if (parentNode.nodeType == 1) {
    var total = 0;
    // Get child nodes
    for (var i=0;i<offset;i++) {
      total += calculateNodeOffset(parentNode.childNodes[i]);
    }
    return total;
  }

  return 0;
};

var getNodeAndOffsetAt = function(start, offset) {
  var node = start;
  var stack = [];

  while (true) {
    // If arrived
    if (offset <= 0)
      return { node: node, offset: 0 };

    // If will be within current text node
    if (node.nodeType == 3 && (offset <= node.nodeValue.length))
      return { node: node, offset: Math.min(offset, node.nodeValue.length) };

    // Go into children (first one doesn't count)
    if (node.firstChild) {
      if (node !== start)
        offset -= 1;
      stack.push(node);
      node = node.firstChild;
    }
    // If can go to next sibling
    else if (stack.length > 0 && node.nextSibling) {
      // If text, count length
      if (node.nodeType === 3)
        offset -= node.nodeValue.length + 1;
      else
        offset -= 1;

      node = node.nextSibling;
    }
    else {
      // No children or siblings, move up stack
      while (true) {
        if (stack.length <= 1) {
          // No more options, use current node
          if (node.nodeType == 3)
            return { node: node, offset: Math.min(offset, node.nodeValue.length) };
          else
            return { node: node, offset: 0 };
        }

        var next = stack.pop();

        // Go to sibling
        if (next.nextSibling) {
          // If text, count length
          if (node.nodeType === 3)
            offset -= node.nodeValue.length + 1;
          else
            offset -= 1;

          node = next.nextSibling;
          break;
        }
      }
    }
  }
};

exports.save = function(containerEl) {
  // Get range
  var selection = window.getSelection();
  if (selection.rangeCount > 0) {
    var range = selection.getRangeAt(0);
    return {
      start: getNodeOffset(containerEl, range.startContainer) + totalOffsets(range.startContainer, range.startOffset),
      end: getNodeOffset(containerEl, range.endContainer) + totalOffsets(range.endContainer, range.endOffset)
    };
  }
  else
    return null;
};

exports.restore = function(containerEl, savedSel) {
  if (!savedSel)
    return;

  var range = document.createRange();

  var startNodeOffset, endNodeOffset;
  startNodeOffset = getNodeAndOffsetAt(containerEl, savedSel.start);
  endNodeOffset = getNodeAndOffsetAt(containerEl, savedSel.end);

  range.setStart(startNodeOffset.node, startNodeOffset.offset);
  range.setEnd(endNodeOffset.node, endNodeOffset.offset);

  var sel = window.getSelection();
  sel.removeAllRanges();
  sel.addRange(range);
}; 
```

这仅适用于现代浏览器（至少 IE 9+）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:39:59.800

在不了解上下文的情况下，很难给出准确的答案，但是有可能，但对于大多数情况来说，这将是相当复杂的。根据用例，有几种方法可以使用。

**Cookie 或本地存储**

您可以使用某种客户端存储（cookies、本地存储或类似的）并保存有关修改了哪些元素以及如何修改的信息。每当重新加载页面时，您都会读取该存储并应用更改。如何实施它将取决于这些更改是如何进行的，并且恐怕会在单个 SO-answer 中广泛涵盖。

**服务器端存储**

如果您知道每个用户是谁（您有某种形式的身份验证），那么无论何时他们更改某物的外观（无论如何进行），您都会向服务器发出 ajax 请求并将这些更改保存到数据库中。在每次后续页面加载时，您必须检查发出请求的用途，在您的数据库中查找以查看他们是否进行了任何更改，并在这种情况下相应地应用它们。

客户端和服务器端存储解决方案的共同点是我相信它们的实施范围非常广泛。

**浏览器插件**

另一种方法是使用像[Greasemonkey for Firefox](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)这样的插件，允许用户自定义网页的呈现方式。这些自定义将在页面加载时保持不变。

# tridion - Tridion 分析/跟踪

> ID：13949060
> 
> 赞同：3
> 
> 时间：2012-12-19T09:21:11.983
> 
> 标签：tridion

我们正在研究跟踪用户通过 Tridion 管理的网站的旅程，然后能够根据此行为将此用户识别为“潜在客户”，然后如果他们在 X 次后未返回，则向该用户发送电子邮件天。

SmartTarget 能否“跟踪”开箱即用的页面之间的用户旅程，还是需要某种定制的环境数据框架盒式磁带？

较旧的 P&P 模块进行了这种跟踪，但我不记得在出站电子邮件触发的邮件中使用该数据 - 所以当用户的跟踪计数超过某个数字时发送电子邮件？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:27:43.830

SmartTarget 和 P&P 在这方面不会为您提供帮助。

因为您的要求是发送电子邮件，所以您需要您的用户成为受众管理器用户，

您可以在 ADF 中进行跟踪，然后在达到阈值时为用户更新扩展详细信息，在分机上创建动态分布列表。详细 en 在该列表上创建触发邮件

做到这一点“开箱即用”是我长期以来的愿望，将来可能会:)

# asp.net-ajax - 如何在中心定位 ajax html 扩展器超链接弹出窗口以及如何验证 URL？

> ID：13949065
> 
> 赞同：1
> 
> 时间：2012-12-19T09:21:26.303
> 
> 标签：asp.net-ajax

我在我的应用程序中实现了最新的 Ajax html 扩展器。当我单击超链接管理器工具时，它会在 IE 屏幕的左侧、侧角打开输入 URL 的窗口。但在 Firefox 或 Chrome 中，它位于屏幕中央。还有其他方法可以自定义弹出窗口吗？

另外，提交后如何在文本框中验证 url？我们可以使用 jquery 或 javascript 或 c# 服务器端自定义它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:33:38.280

尝试css规则：

```
.popup{
width:200px;
height:100px;
left:50%;
top:50%;
margin-left:-100px;/*half of width*/
margin-top:-50px;/*half of height*/
} 
```

如果未定义宽度，您可以使用 JS 轻松获取计数宽度并更改 css 属性。或者，如果您不想浪费时间，您可以使用 FancyBox 插件（这是我在其他灯箱中的选择）。

# php - 实时更改任何站点可视化属性

> ID：13949067
> 
> 赞同：2
> 
> 时间：2012-12-19T09:21:38.487
> 
> 标签：php, javascript, html, ajax

有没有办法通过能够抓取原始站点元素并更改其可视化属性的自定义页面来加载站点（或指向网页）？

例如：如果有一个带有红色边框的段落的在线站点，是否可以创建一个能够指向该站点并将其段落可视化边框变为蓝色的页面？

**更新：**
非常非常重要，我绝对需要能够***浏览***目标站点。
我正在寻找一种方法来创建必须对最终用户透明的“可视化层”。

**更新 2：**
我尝试创建一个 php 页面并使用 cURL 与此代码：

```
$ch = curl_init();

 curl_setopt($ch, CURLOPT_URL, 'www.google.com');
 curl_setopt($ch, CURLOPT_HEADER, 0);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);

 $output = curl_exec($ch);

 curl_close($ch);

print( $output ); 
```

页面已加载，但缺少一些元素和图像。我也无法浏览/搜索它。

**更新 3：**
我发现 FireFox 和 Chrome 的扩展非常接近我的目标：`"Stylish"`
此插件允许实时更改任何站点 css 属性并保存它，以便每次访问页面时重新加载它们。

现在我的问题是：如何创建专用页面来加载和更改特定站点的可视化？

* * *

**最终编辑：**

为了用更相关的论点继续这个问题，我决定问一个新的问题：
[创建一个 php 代理页面](https://stackoverflow.com/questions/14010316/create-a-php-proxy-page)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:25:37.760

使用 php CURL 函数抓取网站，然后将页面的 css 替换为您自己的，或者在 phpQuery 库的帮助下将 css 规则嵌入文件中。

# java - 如何设置宽度和边距 在一个 ? 素面

> ID：13949073
> 
> 赞同：8
> 
> 时间：2012-12-19T09:21:48.860
> 
> 标签：java, css, jsf, primefaces

我正在使用 PrimeFaces 3.4.2，我必须使用 `<p:dataTable>`. 我想将第一列的宽度固定为小于 5 px。为此，我创建了一个 CSS 类：

```
.myTableFlux td:nth-child(1) {
    width: 5px !important;
} 
```

这是我的桌子：

```
<p:dataTable  value="#{bean.listFlux}" var="list" styleClass="myTableFlux">
    <p:column headerText="Status" >
        <h:graphicImage value="/resources/images/so#{list.i}.jpg" />
    </p:column>
    <p:column headerText="Nom">
        <h:outputText value="#{list.name}" />
    </p:column>
</p:dataTable> 
```

问题是我不能低于 5 px。

这是我想要的图像 ![](../Images/c764632c1a8925b7e01cf2ddfac24ccf.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:47:12.897

对我来说，标签`width`上的 -Attribute`p:column`适用于 PrimeFaces 3.4：

```
<p:column width="3" headerText="longlong">
  <h:outputText value="xyz" />
</p:column> 
```

此代码将显示如下：

![](../Images/07bf71c297fddf464fbe73547878a0f7.png)

**编辑**：找到一种解决方案来设置某些列的填充样式：

```
<style>
    .ui-datatable td:nth-child(1) div.ui-dt-c {
    padding: 0 0 0 0 !important;
  }
</style> 
```

PrimeFaces 可能有点棘手。您必须追踪属性的来源，并覆盖特定的 styleClasses。

# ios - 如何在没有“MFMessageComposeViewController”的情况下以编程方式在 iPhone 上发送短信？

> ID：13949082
> 
> 赞同：0
> 
> 时间：2012-12-19T09:22:19.437
> 
> 标签：ios, cocoa-touch, sms

我想`SMS`从 iPhone 发送一个但`MFMessageComposeViewController`弹出消息，我想`SMS`在应用程序中发生事件或通知时发送。是否可以通过`iOS SDK`或是否有任何合法的低级函数可用于完成相同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:28:42.980

无法通过 iOS SDK 以编程方式发送 SMS 消息。可以想象，如果 SDK 允许这样做，它会在开发人员滥用方面打开一大堆蠕虫。

如果 SMS 消息不必来自用户的电话号码，您可以查看 Twilio API (http://www.twilio.com/sms)。

# javascript - 使用javascript从数组中删除重复项

> ID：13949084
> 
> 赞同：3
> 
> 时间：2012-12-19T09:22:24.193
> 
> 标签：javascript, arrays, duplicates

> **可能重复：**
> [从 javascript 中的对象数组中删除重复项](https://stackoverflow.com/questions/2218999/remove-duplicates-from-an-array-of-objects-in-javascript)

我正在尝试删除数组中的任何重复项。例如，如果我有`112233`我只想返回`123`。

我的代码：

```
function array_unique(array) {
    var array_length = array.length;
    var new_array = [];
    for (var i = 0; i < array_length; i++) {
        if (array[i] == array[i + 1]) {

        }
        new_array.push(array[i]);
    }
    return new_array;
} 
```

我不知道在 if 中输入什么，所以我可以删除双打

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:29:35.993

在这里，您可以删除复杂度为 O(n) 的重复项。

```
var elems = {},
    arr = [1,2,1,1,2,3,3,3,3,4];
arr = arr.filter(function (e) {
    if (elems[e] === undefined) {
        elems[e] = true;
        return true;
    }
    return false;
}); 
```

我使用`elems`哈希（对象）来记住所有已经存在的元素。如果当前元素是`elems`哈希中的一个键，我只需过滤它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:25:41.720

像这样使用 Array 的原型

```
Array.prototype.removeDups = function(){
            var local_array = this;
            return local_array.filter(function(elem, pos) {
                return local_array.indexOf(elem) == pos;
            });
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:25:29.467

```
arrayWithNoDuplicates = new_array.filter(function(element, position) {
    return myArray.indexOf(element) == position;
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T09:28:25.903

```
 fxnUniqOptns = function (array) {
    var oOptns = [];
    $.each(array, function (i, val) {
        if ($.inArray(val, oOptns) == -1)
            oOptns.push(val);
    });
    oOptns = oOptns.sort();
    return oOptns;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T09:42:14.473

在 if 条件后给出 array.splice(i, 1) ，这将删除当前元素，从而删除重复项。

# objective-c - 在 URL 中输入文本字段值

> ID：13949090
> 
> 赞同：4
> 
> 时间：2012-12-19T09:22:46.387
> 
> 标签：objective-c, ios, cocoa-touch, uitextfield, mobile-safari

所以我正在开发一个应用程序，但我现在有点卡住了。我现在有 2 个文本字段，用户必须输入：

```
Ordernr:xxxxxxxx
Referencenr:xxxxxxx 
```

这两个值必须添加到此链接： [http ://www.artis-web.de/cgi-bin/WebObjects/Artis.woa/wa/detailedTrack?referencenr=xxxxxxxx&ordernr=xxxxxxxxxx](http://www.artis-web.de/cgi-bin/WebObjects/Artis.woa/wa/detailedTrack?referencenr=xxxxxxxx&ordernr=xxxxxxxxxx)

现在我想让 safari 打开这个链接。理想的情况是用户输入 2 个文本字段值，然后按下一个名为“在 safari 中打开”的按钮

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:25:07.217

只需将以下代码添加到您的按钮操作中：

```
NSString *urlString = [NSString stringWithFormat:@"http://www.artis-web.de/cgi-bin/WebObjects/Artis.woa/wa/detailedTrack?referencenr=%@&ordernr=%@", referenceNrTextField.text, orderNrTextField.text];
[[UIApplication sharedApplication] openURL: [NSURL URLWithString: urlString]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:26:15.333

要创建 URL，您可以使用...

```
NSURL *url = [NSURL urlWithString:[NSString stringWithFormat:@"http://www.artis-web.de/cgi-bin/WebObjects/Artis.woa/wa/detailedTrack?referencenr=%@&ordernr=%@", referenceTextField.text, ordernoTextField.text]]; 
```

在 Safari 中打开...

```
[[UIApplication sharedApplication] openURL:url]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:29:25.477

检查两个字段是否都有数据，然后用给定的数据点击url。这个条件就足够了。

```
 if (Ordernr.text.length!=0 && Referencenr.text.length!=0)
   {
      NSLog(@"Hit the Url with the entered data");
   }
   else
   {
    NSLog (@"Show Error Alert Message");
   } 
```

# java - 将按钮变量声明为带有for循环android的数组

> ID：13949092
> 
> 赞同：5
> 
> 时间：2012-12-19T09:22:48.003
> 
> 标签：java, android, arrays, variables, for-loop

我设法在 for 循环中创建了按钮，并且没有理由不在其中声明我的变量。不幸的是，eclipse 只识别“bt”并且不想用它在循环中表示的数字替换我的 [i]，因此在我的布局中找到正确的 id。关于如何使这项工作的任何想法？我也很喜欢任何其他像我一样漂亮的解决方案，但它不起作用；）

```
Button [] bt = new Button[6];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.start_layout);

    bt[0] = (Button) findViewById(R.id.bt0);
    bt[1] = (Button) findViewById(R.id.bt1);//This is what i'm trying to replace
    bt[2] = (Button) findViewById(R.id.bt2);
    bt[3] = (Button) findViewById(R.id.bt3);
    bt[4] = (Button) findViewById(R.id.bt4);
    bt[5] = (Button) findViewById(R.id.bt5);

    for (int i=0; i<6; i++) {
        final int b = i;
        bt [i] = (Button)findViewById(R.id.bt[i]);    <----//Whith this
        bt [i].setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent myIntent = new Intent(Start.this, MainActivity.class);
                myIntent.putExtra("players", b);
                startActivity(myIntent);

                //startActivity(new Intent(Start.this, MainActivity.class));
            }
        });

    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T09:35:26.873

我会做以下事情：

```
private static final int[] idArray = {R.id.bt0, R.id.bt1, R.id.bt2, R.id.bt3, R.id.bt4, R.id.bt5};

private Button[] bt = new Button[idArray.length];

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.start_layout);

    for (int i=0; i<idArray.length; i++) {
        final int b = i;
        bt [b] = (Button)findViewById(idArray[b]); // Fetch the view id from array
        bt [b].setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent myIntent = new Intent(Start.this, MainActivity.class);
                myIntent.putExtra("players", b);
                startActivity(myIntent);

                //startActivity(new Intent(Start.this, MainActivity.class));
            }
        });

    }
} 
```

如果您想添加或删除按钮，只需将其添加到`idArray`所有其他内容都是动态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:36:43.707

我想如果你有一组类似的按钮 - 它们都放在布局上的 1 个父级内（LinearLayout 或 RelativeLayout 或其他东西）。您可以获取父级并检索所有子级。这样您就不需要为每个按钮指定 id。

```
ViewGroup buttonsView = (ViewGroup) findViewById(R.id.buttons);
List<Button> buttons = new ArrayList<Button>();
for (int i = 0; i < buttonsView.getChildCount(); i++) {
  buttons.add((Button) buttonsView.getChildAt(i));
} 
```

您还可以将按钮的编号存储在它的标签中，这样您就不需要创建`final int`变量：

```
ViewGroup buttonsView = (ViewGroup) findViewById(R.id.buttons);
List<Button> buttons = new ArrayList<Button>();
View.OnClickListener listener = new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        Intent myIntent = new Intent(Start.this, MainActivity.class);
        myIntent.putExtra("players", (Integer) v.getTag());
        startActivity(myIntent);
        //startActivity(new Intent(Start.this, MainActivity.class));
    }
};
for (int i = 0; i < buttonsView.getChildCount(); i++) {
  Button button = (Button) buttonsView.getChildAt(i);
  button.setTag(i);
  button.setOnClickListener(listener);
  buttons.add(buttons);
} 
```

# git - git 更改默认分支 (gitolite)

> ID：13949093
> 
> 赞同：4
> 
> 时间：2012-12-19T09:22:55.553
> 
> 标签：git, rename, git-branch, gitolite

我有一个带有分支的存储库：master 和 devel。大师是默认的。我想将 master 重命名为 prod 并使其成为默认值（并将其推送到服务器）。这该怎么做？

存储库托管在 gitolite 中（如果重要的话）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T09:43:15.427

您需要访问服务器才能将 HEAD 的符号引用更改为您推送到那里的分支 ( `prod`)。

```
git-symbolic-ref HEAD refs/head/prod 
```

[我在“如何将 Git 远程 HEAD 更改为指向除“master”之外的其他东西</a>”](https://stackoverflow.com/a/1485590/6309)的末尾暂时提出了一种从客户端执行此操作的方法，但如果您可以直接登录服务器会更容易[.](https://stackoverflow.com/a/1485590/6309)

[](https://stackoverflow.com/a/1485590/6309)

[注意：**使用最新的 Gitolite V3，您实际上可以运行该命令**（参见“](https://stackoverflow.com/a/1485590/6309)[非核心命令](http://sitaramc.github.com/gitolite/non-core.html)”）：

```
/home/git/gitolite# gitolite symbolic-ref -h

Usage:    ssh git@host symbolic-ref <repo> <arguments to git-symbolic-ref>

allow 'git symbolic-ref' over a gitolite connection 
```

因此，通过 ssh 命令，您实际上可以更改由 gitolite (V3) 管理的远程存储库的 HEAD。

```
ssh git@host symbolic-ref <repo> refs/head/prod 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-30T13:12:34.250

我不得不使用（Gitolite 3.5.3）：

```
ssh git@host symbolic-ref <repo> HEAD refs/heads/prod 
```

# asp.net - 如何从字符串中去掉分号、撇号和逗号

> ID：13949095
> 
> 赞同：0
> 
> 时间：2012-12-19T09:23:01.863
> 
> 标签：asp.net

我有一个 aspx 表单和一个多行文本框。我将文本框值发送到 Oracle 表，而 Oracle 不喜欢撇号和分号。那么你能告诉我如何从字符串中排除撇号和分号吗？我正在这样做。

```
 using (OracleConnection connection = new OracleConnection())
                {
                    connection.ConnectionString = connectionString;
                    connection.Open();

                    OracleCommand command = connection.CreateCommand();

                    command.CommandType = System.Data.CommandType.StoredProcedure;

                    // Name of procedure or function to be executed
                    command.CommandText = "PROC_SENDREQUISITION";

                    command.Parameters.Add(new OracleParameter("P_ReqID", OracleType.VarChar)).Value = preqID;
                    command.Parameters.Add(new OracleParameter("P_reqDate", OracleType.VarChar)).Value = preqDate;
                    command.Parameters.Add(new OracleParameter("P_requester", OracleType.VarChar)).Value = prequester;
command.Parameters.Add(new OracleParameter("P_remarks", OracleType.VarChar)).Value = premarks;

                    command.ExecuteNonQuery();
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:25:15.063

在查询中使用**参数。**

现在您可能正在连接字符串，这会导致**Sql Injection**。

[来自MSDN](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleparameter.aspx)的示例：

```
string queryString = "SELECT * FROM Table1 WHERE Field1 LIKE ?";
OleDbCommand command = new OleDbCommand(queryString, connection);
command.Parameters.Add("@p1", OleDbType.Char, 3).Value = "a";
OleDbDataReader reader = command.ExecuteReader(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:27:28.453

string.replace(";", "") 应该可以解决问题，但听起来您遇到了 SQL 注入问题。所以我建议阅读 SQL 注入，并解决这个问题，而不是删除分号和撇号。

# internet-explorer-8 - IE8 不允许从远程服务器下载 PDF，但 IE9 和 Firefox 允许

> ID：13949099
> 
> 赞同：0
> 
> 时间：2012-12-19T09:23:14.897
> 
> 标签：internet-explorer-8

MBean 中使用的代码：-

```
private StreamedContent           file;
        public void actionGenerate () {

  String reportType= XML/PDF/XLS;
  byte[] reportOut;

  file = new DefaultStreamedContent(new ByteArrayInputStream(reportOut), ReportMimeType.valueOf(reportType)
                    .getLabel(), "abcListReport." + reportType.toLowerCase());
} 
```

XHTML 中的代码：-

```
 <div id="p_searchButtons">
            <p:commandButton ajax="false" id="btnGenerateReport"
                target="_blank" value="#{text.common_Submit}"
                actionListener="#{abcListPrintMB.actionGenerate}"
                widgetVar="generateReport">
                <p:fileDownload value="#{abcListPrintMB.file}" />
            </p:commandButton>
        </div> 
```

正在使用 primefaces 3.3。

IE8能够在本地环境（本地域）下载PDF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-29T13:06:45.370

如果通过 https 请求下载，则 p:fileDownload 在 IE8 中不起作用。它仅在激活 IE 设置“不将加密页面保存到磁盘”时才有效。

检查以下链接： [https ://code.google.com/p/primefaces/issues/detail?id=5934](https://code.google.com/p/primefaces/issues/detail?id=5934)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T11:18:22.320

IE 8 的安全问题 您需要检查浏览器的高级设置

# oauth - 使用 DotNetOpenAuth 进行 Vimeo 集成

> ID：13949102
> 
> 赞同：1
> 
> 时间：2012-12-19T09:23:18.410
> 
> 标签：oauth, dotnetopenauth, vimeo

我正在尝试在用户需要能够上传和列出/观看视频的 Web 应用程序上使用 Vimeo 服务。我创建了一个 Vimeo 应用程序，他们提供了一个`Access token`和一个`Access token secret`使用它可以访问我自己的帐户的方法。

有人可以告诉我如何从 .NET C# 中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T01:30:46.523

`OAuthConsumer`从 DotNetOpenAuth实例化一个，传入一个`InMemoryTokenManager`您可以从示例中找到的。将您的访问令牌和密码添加到该令牌管理器。您还需要您的消费者密钥和秘密。然后使用该`OAuthConsumer`实例进行授权外呼。

提示：您不需要执行任何 OAuth 授权流程，因为您已经拥有访问令牌。

# cakephp - 通过 CakePDF 使用 TCPDF 作为引擎

> ID：13949103
> 
> 赞同：3
> 
> 时间：2012-12-19T09:23:20.483
> 
> 标签：cakephp, tcpdf

我在 CakePHP 2.2 上使用[Ceeram 的 CakePDF 插件。](https://github.com/ceeram/CakePdf)它使使用 Cake 的布局和视图生成 PDF 变得非常容易，而且在大多数情况下我没有遇到任何问题。

但是，我希望能够访问 TCPDF 的一些更高级的功能，特别是条形码功能。

如果我直接使用 TCPDF，我可以这样做，`$pdf->writeBarcode();`但由于我在 CakePDF 插件中使用 TCPDF 作为引擎，我不确定如何访问它，或者它是否可能。

`$CakePdf->writeBarcode();`不起作用，但我真的没想到会这样。不过，Ceeram 的文档中没有提到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:29:03.647

默认情况下它不支持，它只是将您的视图转换为呈现的 PDF，但它不会让您访问 PDF 引擎的“高级”功能。当然，您始终可以自由扩展插件以允许此功能。我认为您必须将其添加到`Pdf/CakePdf.php`类文件中才能使其正常工作。

# c++ - GetWindowText 与 char[]

> ID：13949106
> 
> 赞同：9
> 
> 时间：2012-12-19T09:23:45.833
> 
> 标签：c++, visual-studio-2010, winapi

我对 Windows 编程很陌生。我正在尝试检索窗口的名称。

```
char NewName[128];
GetWindowText(hwnd, NewName, 128); 
```

我需要使用 char[] 但它给了我错误类型的错误。
根据我的阅读，LPWSTR 是一种 char*。

如何使用`char[]`with `GetWindowText`？

非常感谢 ！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T09:25:12.403

您可能正在编译一个 Unicode 项目，因此您可以：

*   显式调用函数 ( ) 的 ANSI 版本`GetWindowTextA`，或
*   使用`wchar_t`代替`char`(`LPWSTR`是指向`wchar_t`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T21:57:22.917

当调用 Windows API 而不通过附加 A（ANSI）或 W（宽字符）来指定显式版本时，您应该始终使用`TCHAR`. `TCHAR`将根据是否`UNICODE`为`#define`​​d 映射到正确的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:41:41.933

对于现代 Windows 编程（这意味着，在 2000 年 Microsoft 为 Windows 9x 引入 Unicode 层之后），使用**"Unicode"**会好得多，这在 Windows 中的 C++ 中意味着使用**`wchar_t`**.

也就是说，使用`wchar_t`代替`char`，并使用`std::wstring`代替`std::string`。

记得`UNICODE`在包含之前定义`<windows.h>`。`NOMINMAX`定义和也是一个好主意`STRICT`。虽然现在后者是默认定义的。

# spring-webflow-2 - Thymeleaf 可以访问 Spring servletContext 吗？

> ID：13949107
> 
> 赞同：0
> 
> 时间：2012-12-19T09:23:46.263
> 
> 标签：spring-webflow-2, thymeleaf

我想知道是否有人可以提供帮助。我们正在将 Spring Webflow 2 应用程序从使用基于 jsp 的视图层转换为基于 Thymeleaf 的视图。

在大多数情况下，这是可以的，但现在我正在努力让 Thymeleaf 访问我们放在`servletContext`.

`servletContext`因此，我们有一个对象作为 bean的一部分放入（实现`ServletContextAware`and `InitializingBean`）

为了简单起见，假设它是一个字符串：

```
public class ReferenceDataBuilder implements ServletContextAware, InitializingBean {

public void setServletContext(ServletContext p_context) {
    p_context.setAttribute("referenceData", "test text" );
} 
```

在我们基于 jsp 的视图中，我们可以`referenceData`像这样访问对象：

```
<p><c:out value="${referenceData}"/></p> 
```

通过 Spring EL 的魔力，它知道它可以访问的各种范围（`servletContext`、`flowScope`等`flashScope`），并且（我猜？）搜索每个范围，直到找到匹配的属性。结果是：

```
<p>test text</p> 
```

在视图中呈现。

在我们的 thymeleaf 模板中，我们正在尝试做同样的事情：

```
<p th:text="${referenceData}"/></p> 
```

但这只是返回一个空字符串。视图呈现一个空字符串：

```
<p></p> 
```

（但我认为 EL 实际上是作为 null 返回的）

我很确定如果该`referenceData`对象是一个范围的属性，例如`flowScope`or`flashScope`这会起作用 - 但它不是，它是`servletContext`.

有谁知道百里香是否可以`servletContext`通过 EL 访问？也许我需要使用不同的语法？

干杯

弥敦道

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T16:17:34.927

您可以通过类型为 SpringWebContext 的 #ctx 对象访问常用[地图](http://www.thymeleaf.org/apidocs/thymeleaf-spring3/2.0.14/org/thymeleaf/spring3/context/SpringWebContext.html)。

例如 #ctx.locale、#ctx.httpServletRequest.contextPath、#ctx.servletContext 甚至是 Spring applicationContext 的 #ctx.applicationContext。

您可以使用直接方法调用

```
<p th:text="${#ctx.servletContext.getAttribute('referenceData')}">Whatever</p> 
```

或 applicationAttributes 变量映射

```
<p th:text="${#ctx.servletContext.applicationAttributes.referenceData}">Whatever</p> 
```

或使用 Spring 隐式对象更简单的事件

```
<p th:text="${application.referenceData}">Whatever</p> 
```

# jqgrid - 如何在 jqGrid 中使用 startwith 和 between 操作数

> ID：13949110
> 
> 赞同：2
> 
> 时间：2012-12-19T09:24:03.123
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-formatter, jqgrid-inlinenav

我想在 jqGrid 中使用以下操作数开头：

```
select * from lib where (mesc.substring(0,2) between 13 and 60) 
```

在 jqGrid 中，我只有一个开头，但没有开头，我想将此操作数添加到搜索操作数中。

我有一个 lib 表，在 lib 表中我有一个 mesc 字段（数据类型 mesc 是 nvarchar(10)）。在此表中，我保存材料信息。我在 Mesc 以 13 到 60、6 到 70 和 80 到 90 开头的情况下对记录进行分组。最终用户可能希望查看所有以 13 到 16 或 13 到 60 开头的材料。我不知道如何来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:21:43.083

您可以使用两个外部`<input>`元素，用户可以在其中输入`mesc`字段和`<button>`“搜索”的值。您可以在每次刷新网格时将字段中的值发送到服务器，或者单击“搜索”。有关详细信息，请参阅[答案](https://stackoverflow.com/a/2928819/315935)。

您也可以只使用一个`<input>`元素并允许用户在表单中输入输入`13 - 60`。一般来说，您可以实现任何您需要的输入选项，例如[Sliders](http://jqueryui.com/slider/)、[Spinner](http://jqueryui.com/spinner/)等。

如果您愿意，您可以在 jqGrid 的顶部工具栏中集成外部输入元素。有关详细信息，请参阅[答案](https://stackoverflow.com/a/9310762/315935)。

您可以通过任何方式根据服务器端的用户输入生成任何 SQL 语句。

# javascript - 使用 jQuery 在 div 中添加 html 和纯文本

> ID：13949113
> 
> 赞同：2
> 
> 时间：2012-12-19T09:24:10.850
> 
> 标签：javascript, jquery

我正在从服务器接收一个字符串（它可能是纯文本或 HTML 文本），然后我需要将它插入到一个 div 中。

`$div.text(textFromServer)`如果我知道那`textFromServer`是纯文本，我可以使用。

如果我知道那`textFromServer`是 html，我可以做类似`$(textFromServer).appendTo($div)`.

问题是我不确定`textFromServer`是纯文本还是 HTML。

那么问题来了：我的问题是否有一个优雅而简单的解决方案？还是我必须分析`textFromServer`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T09:25:44.920

只需使用[`html()`](http://api.jquery.com/html/)：

```
$div.html(textFromServer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T09:27:41.930

您正在描述[jquery.html()](http://api.jquery.com/html/)。
`$div.html(textFromServer)`应该做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:26:10.980

如果没有特别的理由了解数据类型（文本/html），那么您可以使用`[html()][1]`类似的函数直接将文本/html 分配给您的 div

```
$div.html(textFromServer) 
```

如果您有兴趣了解数据的类型，`text / html`则可以将数据的类型（文本、html）存储在`hidden`字段中`server`并在`javascript / jQuery`.

# javascript - jquery循环在谷歌地图上显示多个标记

> ID：13949115
> 
> 赞同：2
> 
> 时间：2012-12-19T09:24:12.037
> 
> 标签：javascript, jquery, google-maps

谁能帮我解决这个问题，我正在从服务器获取数据并执行 foreach 循环以使用 gmap3 获取谷歌地图中标记的所有坐标。

问题是它只在地图上显示 1 个标记，我尝试使用 jquery/javascript 'for' 循环来显示数据，但无法弄清楚如何去做。

任何帮助将不胜感激，我的代码如下，减去 jquery/javascript 循环。

```
<script type="text/javascript">
    var options = { center: [], zoom: 0 };
    var value = { latLng: [] };

    @foreach (var item in Model)
        { 
        <text>
            options.center.push(@item.DisplayLatLonInMap);
            value.latLng.push(@item.DisplayLatLonInMap);
        </text> 
    }

    $("#WeatherMapLocation").gmap3({
        //defaults: { 
        //    classes: { 
        //        Marker: MarkerWithLabel 
        //    } 
        //}, 
        //{ 

        map: { options: options },
        marker: { values: [value],},
    });
</script> 
```

/=====================================

将代码更改为下面的代码。但仍然没有运气，我不太擅长 jquery 等

```
<script type="text/javascript">
$(document).ready(initialize);
var map;

var options = { center: [], zoom: 0 };
var value = { latLng: [] };

@foreach (var item in Model)
    { 
     <text>
options.center.push(@item.DisplayLatLonInMap);
value.latLng.push(@item.DisplayLatLonInMap);
</text> 
    }

function initialize() {
    var latlng = new google.maps.LatLng(42.354183,-71.065063);
    var options = {
        zoom: 0,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map($('#WeatherMapLocation')[0], options);

    for( i = 0; i < value.length; i++) {
        var latLng = new google.maps.LatLng(value);
        var marker = new google.maps.Marker({
            position: latLng,
            map: map
        });
    }
} 
```

* * *

提前感谢乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:12:13.773

我不清楚您使用的 jQuery 语法。在 for 循环中，您没有指定数组位置。看看是不是这个问题。

```
for( i = 0; i < value.length; i++) {
        var latLng = new google.maps.LatLng(value[i]); 
        var marker = new google.maps.Marker({
            position: latLng,
            map: map
        });
    } 
```

# .net - 是否需要安全令牌服务

> ID：13949121
> 
> 赞同：3
> 
> 时间：2012-12-19T09:24:42.977
> 
> 标签：.net, asp.net-mvc, wif, saml, sts-securitytokenservice

我们查看了 Identity Server，Starter STS 似乎很大，可以提供一些加密声明。所以来到这个问题

1.  与 ADFS 2.0 联合是否**需要**或**强制**使用 STS

2.  我们选择了 Identity Server，因为 ADFS 2.0 不支持其他数据存储

3.  是否可以选择通过 mvc 控制器或使用 Windows Identity Foundation 和 SAML 2.0 协议的东西来提供声明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:56:43.193

你用 SAML 标记了它，所以我认为这是协议（而不是 WIF）。

我假设您的应用程序是 ASP.NET？

如果您想与 ADFS**联合**，那么是的，您需要另一种 STS。

IdentityServer 不支持应用程序的 SAML。

有一个[WIF SAML CTP](http://blogs.msdn.com/b/card/archive/2011/05/16/announcing-the-wif-extension-for-saml-2-0-protocol-community-technology-preview.aspx)。

如果您希望 .NET 应用程序使用 SAML 直接与 STS 对话，您可以使用[.NET OpenSSO Fedlet](http://docs.oracle.com/cd/E17842_01/doc.1111/e17847/about.htm)（或 OpenAM 之一）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:35:15.377

不确定我是否完全理解你的问题，但这是我的看法：

1.  ADFS*是*一个 STS。你不需要另一个。
2.  ADFS 支持任何数据存储，但只能针对 AD 进行身份验证。您可以发出存储在 LDAP、SQL 或任何地方的声明。
3.  WIF 还不支持 SAML 协议。

您为什么要开始考虑 WIF/安全令牌？（例如 SSO、联邦、两者等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T10:42:49.607

对于第二个问题，您始终可以在 .NET 中开发自定义 STS，并将其添加为 ADFS 作为身份提供者。正如您所提到的，您需要针对 LDS 商店进行身份验证，您可以参考下面给出的链接，这将为您提供更多见解：

[http://cloudythoughts.siadis.com/windows-azure/windows-azure-appfabric/creating-a-custom-sts-with-windows-identity-foundation](http://cloudythoughts.siadis.com/windows-azure/windows-azure-appfabric/creating-a-custom-sts-with-windows-identity-foundation)

[http://blogs.msdn.com/b/vbertocci/archive/2008/11/26/an-identity-provider-and-its-sts-writing-a-custom-sts-with-the-october-beta- of-the-geneva-framework.aspx](http://blogs.msdn.com/b/vbertocci/archive/2008/11/26/an-identity-provider-and-its-sts-writing-a-custom-sts-with-the-october-beta-of-the-geneva-framework.aspx)

[http://www.rahulsingla.com/blog/2012/05/wif-security-token-service-for-active-directory-lightweight-directory-services](http://www.rahulsingla.com/blog/2012/05/wif-security-token-service-for-active-directory-lightweight-directory-services)

# c# - 如何将列设置为组合框

> ID：13949123
> 
> 赞同：0
> 
> 时间：2012-12-19T09:24:47.623
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn

我已经从数据表中填充了一个 DataGridView。我不希望某些列显示为组合框、下拉列表。我该怎么做呢？到目前为止我的代码：

```
DataTable dt = dataBase.getData();
this.dataGridView1.DataSource = dt;
//set some columns to comboboxes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:29:35.480

您应该将属性设置`AutoGenerateColumns`为`false`，然后使用相应的模板创建每一列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:28:43.703

在设计器中，您可以设置列的类型：

```
DataGridViewComboBoxColumn 
```

或者您可以以编程方式设置它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:46:40.843

您需要在设计器中设计datagridview中的列，将类型更改为所需列到DataGridViewcombox

然后从所需的 DataTable 列中添加该列的值

# sql-server-2008 - 在 SQL 中获取重复值

> ID：13949127
> 
> 赞同：0
> 
> 时间：2012-12-19T09:25:07.427
> 
> 标签：sql-server-2008, inner-join

我拼命地越来越努力地完成这件事，但还没有成功。运行此查询时，我得到重复的值。

```
 select 
    tbl_ShipmentStatus.ShipmentID
    ,Tbl_Contract.ContractID,
    Tbl_Contract.KeyWinCountNumber,
    Tbl_Item.ItemName,
    Tbl_CountryFrom.CountryFromName,
    Tbl_CountryTo.CountryToName,
    Tbl_Brand.BrandName,
    Tbl_Count.CountName,
    Tbl_Seller.SellerName,
    Tbl_Buyer.BuyerName, 
    Tbl_Contract.ContractNumber,
    Tbl_Contract.ContractDate,
    tbl_CountDetail.TotalQty,
    tbl_CostUnit.CostUnitName,
    tbl_Comission.Payment,
    tbl_Port.PortName,
    Tbl_Contract.Vans,
    tbl_Comission.ComissionPay,
    tbl_Comission.ComissionRcv,
    tbl_CountDetail.UnitPrice,
    tbl_Comission.ComissionRemarks,
    tbl_CountDetail.Amount,
    tbl_LCStatus.LCNumber,
    tbl_ShipmentStatus.InvoiceNumber,
    tbl_ShipmentStatus.InvoiceDate,
    tbl_ShipmentStatus.BLNumber,
    tbl_ShipmentStatus.BLDate,
    tbl_ShipmentStatus.VesselName,
    tbl_ShipmentStatus.DueDate
     from tbl_ShipmentStatus 

    inner join tbl_LCStatus
    on
    tbl_LCStatus.LCID = tbl_ShipmentStatus.LCStatusID

    inner join Tbl_Contract
    on
    tbl_LCStatus.ContractID = Tbl_Contract.ContractID 

    inner join Tbl_CountDetail
    on Tbl_Contract.ContractID = Tbl_CountDetail.ContractId

    inner join tbl_Comission
    on
    tbl_Comission.ContractID = Tbl_Contract.ContractID

    inner join Tbl_Item
    on
    Tbl_Item.ItemID = Tbl_Contract.ItemID

    inner join Tbl_Brand
    on Tbl_Brand.BrandID = Tbl_Contract.BrandID
    inner join Tbl_Buyer
    on Tbl_Buyer.BuyerID = Tbl_Contract.BuyerID
    inner join Tbl_Seller
    on Tbl_Seller.SellerID = Tbl_Contract.SellerID
    inner join Tbl_CountryFrom
    on Tbl_CountryFrom.CountryFromID = Tbl_Contract.CountryFromID
    inner join Tbl_CountryTo
    on
    Tbl_CountryTo.CountryToID = Tbl_Contract.CountryToID
    inner join Tbl_Count
    on
    Tbl_Count.CountID = Tbl_CountDetail.CountId
    inner join tbl_CostUnit
    on tbl_Comission.CostUnitID = tbl_CostUnit.CostUnitID
    inner join tbl_Port
    on tbl_Port.PortID = tbl_Comission.PortID

    where tbl_LCStatus.isDeleted = 0
    and tbl_ShipmentStatus.isDeleted =0
    and tbl_LCStatus.isDeleted = 0
    and Tbl_CountDetail.isDeleted = 0
    and Tbl_Contract.isDeleted = 0

    and tbl_ShipmentStatus.LCStatusID = 5 
```

我还附上了我的结果行集的图片。任何关于为什么会发生这种情况的建议都会非常明显。

[结果集](http://i.stack.imgur.com/g97qh.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:21:01.330

Typically this happens when you have an implicit partial cross join (Cartesian product) between two of your tables. That's what it looks like to me here.

This happens most often when you have a many-to-many relationship. For example, if a single `Album` allows both multiple `Artists` and multiple `Songs` and the only relationship between `Artists` and `Songs` is `Album`, then there's essentially a many-to-many relationship between `Artists` and `Songs`. If you select from all three tables at once you're going to implicitly cross join `Artists` and `Songs`, and this may not be what you want.

Looking at your query, I see many-to-many between `Tbl_CountDetail` and `tbl_Comission` through `Tbl_Contract`. Try eliminating one of those joins to test to see if the behavior disappears.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:29:11.703

尝试使用`DISTINCT`关键字。它应该可以解决您的问题

```
Select DISTINCT .... 
```

等等，据我所知，您的记录不重复。

然而

注意`CountName`列和`Shipment ID`列

该组合对于每一行都是唯一的。因此，据我所知，这些值是独一无二的。尝试不选择`CountName`.

好吧，如果您有不同的行，则不是重复问题。问题是在加入期间发生组合，您不希望它复制结果。

要么不选择`CountName`，要么您的数据有误。

这些行中只有一个应该为真，无论是 6 与 Count2 还是 6 与 Count1。对于 7 也是如此。事实上，当你不应该这样做时，你得到两者都表明一个逻辑错误

# c++ - Directx 中的精灵剪切

> ID：13949132
> 
> 赞同：3
> 
> 时间：2012-12-19T09:25:14.273
> 
> 标签：c++, directx, transform

当我在 Directx 11 中剪切精灵时，它显示了这个

```
*******     *******      <= fixed
*     *  =>  *     *
*******       ******* 
```

这不是我想要的结果

我想要的是这个

```
*******       *******
*     *  =>  *     *
*******     *******      <= fixed 
```

PS。我正在使用 XMMatrixOrthographicOffCenterLH 来设置相机

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T21:00:43.723

剪切变换基本上如下：对于输入位置 (px, py)，将 y 坐标的一部分添加到 x 坐标。所以结果是：(px + s * py, py)。

考虑到这一点，你应该按照 yiding 的建议去做。首先应用对齐矩形的变换，进行剪切并恢复第一个变换。

最简单的方法是`spriteHeight`向上平移并使用负剪切因子。所以转换将是：

```
Translate(0, -spriteHeight, 0) * shearx(-s) * Translate(0, spriteHeight, 0) 
```

# android - 动画后setBackground View出错

> ID：13949133
> 
> 赞同：7
> 
> 时间：2012-12-19T09:25:25.517
> 
> 标签：android, animation, translate-animation, rotateanimation

我创建了一个`CustomView`extends `View`。创建一些`CustomView`并使用动画来移动和旋转它们。发生更改`backgroundResource`和错误后，新背景不会全部填满`CustomView`。请看代码：

```
 clearAnimation();
    AnimationSet animation = new AnimationSet(true);
    TranslateAnimation translateAnimation = new TranslateAnimation(0, destX - srcX, 0, destY - srcY);
    translateAnimation.setInterpolator(new LinearInterpolator());
    translateAnimation.setDuration((long) MGConstant.ANIMATE_DURATION);
    animation.addAnimation(translateAnimation);

    final float finalX = destX;
    final float finalY = destY;

    animation.setAnimationListener(new AnimationListener() {

        public void onAnimationEnd(Animation arg0) {
            clearAnimation();
            setX(finalX);
            setY(finalY);

            RotateAnimation rotateAnimation = new RotateAnimation(0, degrees, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
            rotateAnimation.setInterpolator(new LinearInterpolator());
            rotateAnimation.setDuration((long) MGConstant.ANIMATE_DURATION);
            rotateAnimation.setFillAfter(true);
            startAnimation(rotateAnimation);
            resetLayout();

            mMoveStatus = false;
            degree = degrees;

        }

        public void onAnimationRepeat(Animation arg0) {
        }

        public void onAnimationStart(Animation arg0) {
        }
    });

    startAnimation(animation); 
```

并重置布局：

```
 lp = (LayoutParams) getLayoutParams();
    if (lp == null) {
        Log.d(TAG, "FIRST");
        lp = new LayoutParams((int) cardW, (int) cardH);
        lp.leftMargin = (int) mX;
        lp.topMargin = (int) mY;
    } else {
        Log.d(TAG, "LAST");
        lp.leftMargin = (int) mX;
        lp.topMargin = (int) mY;
    }
    setLayoutParams(lp); 
```

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T17:16:26.640

用于`ObjectAnimator`动画视图，根据您的要求，它在动画结束后保持视图，您不想更改`LayoutParams`等。

```
ObjectAnimator objectAnimator = ObjectAnimator.ofFloat(customView,
            "translation", 0, destX - srcX, 0, destY - srcY);
objectAnimator.setDuration((long) MGConstantANIMATE_DURATION);

ObjectAnimator rotation = ObjectAnimator.ofFloat(customView,
            "rotation", 0, degree);
rotation .setDuration((long) MGConstantANIMATE_DURATION);

AnimatorSet animatorSet = new AnimatorSet();
animatorSet.setDuration((long) MGConstantANIMATE_DURATION);
animatorSet.play(objectAnimator).after(rotation);

customView.setBackgroundResource(R.drawable.your_image); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T08:00:18.367

使用以下处理程序更改您的小部件属性

```
 public void onAnimationEnd(Animation arg0) {
      new Handler.post(new Runnable(){
             clearAnimation();
             setX(finalX);
             setY(finalY);
             RotateAnimation rotateAnimation = new RotateAnimation(0, degrees, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
             rotateAnimation.setInterpolator(new LinearInterpolator());
             rotateAnimation.setDuration((long) MGConstant.ANIMATE_DURATION);
             rotateAnimation.setFillAfter(true);
             startAnimation(rotateAnimation);
             resetLayout();

             mMoveStatus = false;
             degree = degrees;
         });

    } 
```

这将解决您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-06T16:33:00.410

当您更改布局参数等内容时，请确保您还调用了 View.requestLayout()。我认为你在这里不需要这个。您只需要以下内容：

```
 AnimationSet animation = new AnimationSet(true);
    animation.setFillAfter(true);
    TranslateAnimation translateAnimation = new TranslateAnimation(0, destX - srcX, 0, destY - srcY);
    translateAnimation.setInterpolator(new LinearInterpolator());
    translateAnimation.setDuration((long) MGConstant.ANIMATE_DURATION);
    animation.addAnimation(translateAnimation);
    RotateAnimation rotateAnimation = new RotateAnimation(0, degrees, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    rotateAnimation.setInterpolator(new LinearInterpolator());
    rotateAnimation.setDuration((long) MGConstant.ANIMATE_DURATION);
    rotateAnimation.setStartOffset((long) MGConstant.ANIMATE_DURATION);
    animation.addAnimation(rotateAnimation);
    startAnimation(animation); 
```

# ubuntu - 为安卓开发替代其他操作系统

> ID：13949138
> 
> 赞同：0
> 
> 时间：2012-12-19T09:25:38.390
> 
> 标签：ubuntu, fedora

我`Ubuntu OS`用于内核开发、设备驱动程序和 Android 应用程序开发。但在 Ubuntu 中，我面临冻结屏幕问题，所以我无法继续工作。这是特定于操作系统的问题，其他人也遇到了这个问题。除了 Ubuntu 之外，任何人都可以向我推荐其他类似的操作系统，以便我可以继续我的工作。fedora 和开源 Suse 怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:48:09.250

任何 .04 都是 LTS，你可以使用它。如果你有兴趣学习内核开发，我建议 11.04 ......甚至 Android OS 内核开发文档也推荐 11.04 用于内核开发。

# php - 通过 jquery(ajax) 将 post 变量发送到 php 自己的文档

> ID：13949147
> 
> 赞同：1
> 
> 时间：2012-12-19T09:26:01.013
> 
> 标签：php, jquery, ajax

我正在尝试通过 jQuery ajax 将 post 变量发送到 php 自己的文档，但是在发送之后，post vars 没有设置。

编码：

```
 if(isset($_POST['email']) && isset($_POST['pass'])){

     do something
    }
<form id="form_login_pv">

Email: <input type="text" name="email" id="email"><br>
Password: <input type="password" name="pass" id="pass">

<div class="send_login_button_pv">Login</div>

</form>

<script type="text/javascript">

$('.send_login_button_pv').click(function(e){

  $.ajax({
    type: "POST",
    url: "index.php",
    data:$('#form_login_pv').serialize(),
    success: function(response){
                alert("mensaje enviado");

        }

});
});     

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:48:15.920

```
$.ajax({
    type: "POST",
    url: "index.php",
    data:$('#form_login_pv').serialize(),
    success: function(response){
        alert("mensaje enviado");
    }

}); 
```

在 jQuery 就绪事件中试试这个：

```
//you can also use an <input type="submit" value="login" /> instead ofusing a button!
$("#button_id").on("click",function(e){
    $("#form_login_pv").submit();
    return e.preventDefault();
});    

$("#form_login_pv").submit(function(e) {
    var email = $('input[name=email]').val();
    var pass = $('input[name=pass]').val();

    // validate given values here
    // if bad value detected, output error and return false;

    if(!email.test(YOUR REGEX HERE)) {
        $('#error-message').text('Wrong E-Mail Format!');
        return false;
    }
    if(pass.length<6) {
        $('#error-message').text('Password to short! At least 6 Characters!');
        return false;
    }
    $.ajax({
        type: "POST",
        url: "index.php",
        data: {
            email: email,
            pass: pass,
        },
        success: function(response){
            alert("mensaje enviado");
        }
    });
    return e.preventDefault();
}); 
```

并且不要忘记阻止表单通过 HTTP Post 提交！

您可以通过在按钮单击事件结束时返回 false 来做到这一点。

或者通过使用事件对象 e 的方法，e.preventDefault();

我建议返回 e.preventDefault(); 在您的点击功能结束时！

在通过 ajax 提交之前，您还可以检查给定变量是否为空或使用 javascript 验证它们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:28:08.720

为什么不尝试使用表单提交 jquery 功能。

```
if(isset($_POST['email']) && isset($_POST['pass']))
{
    //do something
}

<form id="form_login_pv" action="<?php echo $_SERVER['PHP_SELF'] ?>">
Email: <input type="text" name="email" id="email">

Password: <input type="password" name="pass" id="pass">
<button type="submit" class="send_login_button_pv">Login</button>
</form>

<script type="text/javascript">

  $('.send_login_button_pv').click(function(e)
  {
      e.preventDefault(); // just to make sure it wont perform other action 
      $("#form_login_pv").submit(function(){
          //afte server response code goes here
      });
  });     

</script>
```

确保表单必须设置操作。

# c++ - ifstream 鳍加载错误

> ID：13949148
> 
> 赞同：0
> 
> 时间：2012-12-19T09:26:01.933
> 
> 标签：c++, file, visual-studio-2012, x86-64

我正在尝试加载文件，但无法获取它。这是命令..

```
void Apple::loadDictionary(std::vector<std::string>& ret)
{
  std::ifstream fin("words");
  if(!fin.good()){
    return;
  }
  while(!fin.eof()){
    char buffer[4096];
    fin.getline(buffer, 4096);
    std::string curr(buffer);
    ret.push_back(curr);
  }
  fin.close();
} 
```

我已将名为 words 的文件添加到 Visual Studio 项目中。右键单击项目名称并添加现有项目并选择单词文件。让我知道这是否是错误。

fin 不加载使条件`!fin.good()`为真并且程序终止的字符串。在这方面需要一些帮助。

我需要在其中使用任何#include 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:37:08.850

听起来好像您没有将文件复制到项目目录，只需使用*Add Existing*将其添加到项目不会自动将物理文件复制到您的项目目录，它只是添加一个链接。

而是先将文件复制到您的项目目录，然后执行*Add Existing*，或者如果您希望文件保留在原位，请在程序中使用它的绝对路径。

另请注意，项目中的“文件夹”不必是驱动器上的物理文件夹，而应该更多地被视为过滤器。例如“*头文件*”

# php - PHP上传和覆盖照片文件

> ID：13949149
> 
> 赞同：0
> 
> 时间：2012-12-19T09:26:04.543
> 
> 标签：php, file, upload, photo, overwrite

我正在使用一些非常简单的 PHP。

用户上传具有某些目的地和相同名称的照片文件，以便最新上传的文件将覆盖旧版本。

现在我的代码似乎工作。我得到了我应该的上传评论，但目标文件夹中没有文件。我一直在搜索stackoverflow，但我似乎无法弄清楚。

**HTML：**

```
<form enctype="multipart/form-data" action="upload_file.php" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="512000" />
    Send this file: <input name="userfile" type="file" />
    <input type="submit" value="Send File" />
</form> 
```

**PHP：**

```
<?php
    $uploaddir = 'profilepicture/';
    $uploadfile = $uploaddir . basename($_FILES['userfile']['name']);
    echo "<p>";
    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
       echo "File is valid, and was successfully uploaded.\n";
    } else {
       echo "Upload failed";
    }
    echo "</p>";
    echo '<pre>';
    echo 'Here is some more debugging info:';
    print_r($_FILES);
    print "</pre>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:33:35.377

您使用的平台是什么？如果是 unix，请检查“profilepicture”权限和正确的相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:32:23.090

确保您`MAX_FILE_UPLOAD_SIZE`已设置为大于 2BM（php.ini 中的默认设置）。根据我的经验，我将其设置为 20MB，因此对于大于 2BM 的图像也将被上传

# linq - LINQ - 本地序列不能在查询运算符的 LINQ to SQL 实现中使用，但 Contains 运算符除外

> ID：13949152
> 
> 赞同：4
> 
> 时间：2012-12-19T09:26:08.827
> 
> 标签：linq, linq-to-sql, contains, iqueryable

这似乎是关于我遇到的最普遍的错误 - 多个关于它的 SO 帖子都指的是不同的问题 - 这是一个新的:)

`IQueryable`枚举以下内容时出现上述错误：

**NB`items`是一个`IQueryable<tblItem>`并且`keywords`是一个`string`**

```
items = items.Where(p => p.heading.ToLower().Contains(keywords) || 
                         p.description.ToLower().Contains(keywords)); 
```

这令人困惑，因为正如错误所暗示的那样，当您使用`Contains`- 时它应该可以正常工作 - 有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:31:48.403

如果关键字是一个支持枚举的集合，那么它应该是其他方式：

```
items = items.Where(p => keywords.Contains(p.heading.ToLower()) || 
                         keywords.Contains(p.description.ToLower())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:01:52.590

如果 items 是 IQueryable 则错误可能存在并且与您的 where 语句无关。您可以在添加 where 语句之前尝试强制枚举吗？

例如，假设您尝试将内存列表与数据表连接起来，当评估或枚举查询时，您将收到该错误

```
List<tblCategory> categories = tblCategory.ToList();

IQueryable<tblItem> items = (from r in tblItem 
            join c in categories on r.CategoryID equals c.Id select r);

//    items = items.Where(p => p.heading.ToLower().Contains(keywords) || 
//                             p.description.ToLower().Contains(keywords));

var firstMatch = items.FirstOrDefault();

// The error will be generated here even if the where is remmed out 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:36:59.330

**解决了**

感谢 sgmoore 的意见 - 它帮助达成了这个解决方案：

将`IQueryable`列表分配给`IEnumerable`列表，在其上运行 a`ToList`然后在列表上使用我的过滤器效果很好。

```
IEnumerable<tblItems> temp = items.ToList();

temp = temp.Where(p => p.heading.ToLower().Contains(keywords) || 
                     p.description.ToLower().Contains(keywords));

items = temp.AsQueryable(); 
```

# objective-c - iOS Facebook 集成，FBConditionalLog

> ID：13949158
> 
> 赞同：2
> 
> 时间：2012-12-19T09:26:23.057
> 
> 标签：objective-c, ios, facebook, cocoa-touch

我知道这个问题已经被问过很多次了，我已经在 stackoverflow 和 google 上进行了研究，但是没有任何东西可以解决我的问题。

我正在尝试将 Facebook 登录集成到我的应用程序中。我正在使用可以在[此处](https://developers.facebook.com/ios/)下载的最新 Facebook SDK 。我不仅尝试集成 Facebook 登录，还尝试集成其他社交网络登录。到目前为止，我能够完成它们。

要集成 Facebook 登录，我遵循了本[教程](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)。我做的完全一样。我的问题是当用户点击**Facebook 登录按钮**时。Facebook 登录页面出现在浏览器中，然后请求权限。到目前为止，它正在工作。完成用户凭据后，然后单击浏览器上的**登录按钮**，我得到了这个日志**FBConditionalLog: handleOpenURL should not be called once a session has closed**，我没有错误。此外，在我的 Facebook 帐户中，我看到我已在应用设置中允许该应用程序。通常，如果用户能够成功登录，我会得到**用户会话找到日志。**

你有什么想法，我做错了什么？

# node.js - node.js 客户端中的 Windows 集成身份验证

> ID：13949163
> 
> 赞同：28
> 
> 时间：2012-12-19T09:26:40.597
> 
> 标签：node.js, windows, windows-authentication, node.js-client

当使用 node.js 作为客户端时，是否可以使用 Windows 集成身份验证连接到服务器（例如连接到 IIS 时）？

我对此的搜索只出现了 node.js 用作服务器的结果。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-19T20:21:26.367

**2015 更新：**现在有一些模块实现了 Windows 集成身份验证。 [node-sspi](https://www.npmjs.com/package/node-sspi)使用 SSPI（Windows 安全 API）来处理服务器端的事情，但[不执行客户端身份验证](https://github.com/abbr/NodeSSPI/issues/10)。有[几个客户端实现](https://www.npmjs.com/search?q=ntlm)，例如[http-ntlm](https://github.com/SamDecrock/node-http-ntlm)，但它们并没有真正集成，因为它们需要用户密码——它们不使用 SSPI 进行透明身份验证。

**2019 年更新：**似乎可以使用[kerberos](https://github.com/mongodb-js/kerberos)库使用 SSPI 执行真正的 Windows 集成 HTTP 身份验证（即，使用节点进程的令牌进行透明身份验证）。请参阅[kerberos-agent](https://www.npmjs.com/package/kerberos-agent)。显然，这使用 Kerberos 而不是 NTLM/Negotiate，因此这可能会或可能不会根据您的具体情况而工作。

* * *

“Windows 集成身份验证”就是所谓的 NTLM 身份验证。当您从 IIS 收到带有`WWW-Authenticate`包含 的标头的 HTTP 401 时`NTLM`，您现在可以享受实现 NTLM 身份验证协议的乐趣。引用[本文档中有关 NTLM 身份验证协议的内容](http://davenport.sourceforge.net/ntlm.html#ntlmHttpAuthentication)：

* * *

1.  客户端向服务器请求受保护的资源：

    ```
    GET /index.html HTTP/1.1 
    ```

2.  服务器以`401`状态响应，指示客户端必须进行身份验证。`NTLM`通过`WWW-Authenticate`标头呈现为受支持的身份验证机制。通常，服务器此时会关闭连接：

    ```
    HTTP/1.1 401 Unauthorized
    WWW-Authenticate: NTLM
    Connection: close 
    ```

    请注意，Internet Explorer 只有在它是提供的第一种机制时才会选择 NTLM；这与 RFC 2616 不一致，RFC 2616 规定客户端必须选择支持的最强身份验证方案。

3.  `Authorization`客户端使用包含[Type 1 消息](http://davenport.sourceforge.net/ntlm.html#theType1Message)参数的标头重新提交请求。Type 1 消息经过 Base-64 编码以进行传输。从现在开始，连接保持打开状态；关闭连接需要重新验证后续请求。这意味着服务器和客户端必须支持持久连接，通过 HTTP 1.0 样式的“Keep-Alive”标头或 HTTP 1.1（默认使用持久连接）。相关的请求标头如下所示：

    ```
    GET /index.html HTTP/1.1
    Authorization: NTLM TlRMTVNTUAABAAAABzIAAAYABgArAAAACwALACAAAABXT1JLU1RBVElPTkRPTUFJTg== 
    ```

4.  服务器回复的状态信息在标头中`401`包含[Type 2 消息](http://davenport.sourceforge.net/ntlm.html#theType2Message)`WWW-Authenticate`（同样，Base-64 编码）。这如下所示。

    ```
    HTTP/1.1 401 Unauthorized
    WWW-Authenticate: NTLM TlRMTVNTUAACAAAADAAMADAAAAABAoEAASNFZ4mrze8AAAAAAAAAAGIAYgA8AAAARABPAE0AQQBJAE4AAgAMAEQATwBNAEEASQBOAAEADABTAEUAUgBWAEUAUgAEABQAZABvAG0AYQBpAG4ALgBjAG8AbQADACIAcwBlAHIAdgBlAHIALgBkAG8AbQBhAGkAbgAuAGMAbwBtAAAAAAA= 
    ```

5.  `Authorization`客户端通过使用包含 Base-64 编码的[Type 3 消息](http://davenport.sourceforge.net/ntlm.html#theType3Message)的标头重新提交请求来响应 Type 2消息：

    ```
    GET /index.html HTTP/1.1
    Authorization: NTLM TlRMTVNTUAADAAAAGAAYAGoAAAAYABgAggAAAAwADABAAAAACAAIAEwAAAAWABYAVAAAAAAAAACaAAAAAQIAAEQATwBNAEEASQBOAHUAcwBlAHIAVwBPAFIASwBTAFQAQQBUAEkATwBOAMM3zVy9RPyXgqZnr21CfG3mfCDC0+d8ViWpjBwx6BhHRmspst9GgPOZWPuMITqcxg== 
    ```

6.  最后，服务器验证客户端类型 3 消息中的响应并允许访问资源。

    ```
     HTTP/1.1 200 OK 
    ```

* * *

您必须弄清楚您将如何[回复 Type 2 消息的挑战](http://davenport.sourceforge.net/ntlm.html#respondingToTheChallenge)，其中用户的密码经过 MD4 散列并用于创建 DES 密钥以加密挑战数据。

我不确定您将如何访问登录用户的凭据数据，这将允许您完成此操作，但我确信这将涉及编写[本机 C++ 插件](http://nodejs.org/api/addons.html)，以便您可以与必要的 Windows API 交谈。或者，我想您可以只询问用户的密码。

或者，您可以[通过为您处理 NTLM 混乱的软件代理您的节点请求](http://ntlmaps.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-27T18:21:33.603

对于 Kerberos：

*   节点sspi

    ```
    Just on windows
    No client side node
    Supports NTLM too 
    ```

*   护照协商

    ```
    Needs python on the server
    it's a passportJs strategy 
    ```

对于 NTLM

*   节点sspi

    ```
    Just on windows
    No client side node
    Supports Kerberos too 
    ```

*   httpntlm
*   快递-ntlm
*   请求-ntlm
*   ntlm

    ```
    experimental project! 
    ```

*   ntlm-身份验证

    ```
    experimental! 
    ```

*   护照-ntlm

    ```
    supports SMB protocol
    it's a passportJs strategy 
    ```

我为 Kerberos 选择了 passport-negotiate，为 NTLM 选择了 express-ntlm

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-28T22:25:29.707

对于客户端，有效的是使用 node-libcurl 进行 REST / HTTP 调用。

这是示例代码：

```
var endpoint = urlString;
var url = require("url");
var endpointUrl = url.parse(endpoint);

var Curl = require( 'node-libcurl' ).Curl;
var curl = new Curl();

curl.setOpt( 'USERNAME', '' );
//curl.setOpt( 'VERBOSE', 1 );
curl.setOpt( 'URL', endpoint );
curl.setOpt( 'HTTPAUTH', Curl.auth.NEGOTIATE );
curl.setOpt( 'NOPROXY', endpointUrl.hostname );

curl.on( 'end', function( statusCode, body, headers ) {

    if (statusCode === 200) {
        console.log(body);
        cb(null, { statusCode, body, headers } ); 
    } else {
        cb(new Error(), { statusCode, body, headers } ); 
    }

    this.close();
});

curl.on( 'error', curl.close.bind( curl ) );
curl.perform(); 
```

# google-apps-script - 如何使用 Google Apps 脚本发送 XML 请求？

> ID：13949165
> 
> 赞同：1
> 
> 时间：2012-12-19T09:26:40.340
> 
> 标签：google-apps-script

我正在尝试使用 Google Apps 脚本从[Google Apps Reporting API](https://developers.google.com/google-apps/reporting/#disk_space_report)检索数据，这些数据指定我发送 XML 请求

我的目标是检索 disk_space_report 并将该数据放入电子表格中，以便我可以监视该电子表格中的磁盘空间并处理一些数据。

任何人都可以给我一个关于如何做那种事情的例子吗？

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:34:26.793

这是我编写并用于获取 Google Apps 用户帐户报告的一小段代码。

```
function startHere(){
  var domain = UserManager.getDomain();
  var fDate = '2012-12-18';//Utilities.formatDate(new Date(), Session.getTimeZone(), 'yyyy-MM-dd');
  var url = 'https://www.google.com/hosted/services/v1.0/reports/ReportingData';

  //Build API request parameters
  var fetchArgs = googleOAuth_('Reporting', url);
  fetchArgs.method = 'POST';
  var rawXML = '<?xml version="1.0" encoding="UTF-8"?>'
      +'<rest xmlns="google:accounts:rest:protocol" xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance ">'
      +'<type>Report</type>'
      +'<domain>'+domain+'</domain>'
      +'<date>'+fDate+'</date>'
      +'<page>1</page>'
      +'<reportType>daily</reportType>'
      +'<reportName>accounts</reportName>'
      +'</rest>';
  fetchArgs.payload = rawXML;
  fetchArgs.contentType = "application/xml";
  fetchArgs.headers = {"Content-type": "application/atom+xml charset=UTF-8"}; 

  //Fetch CSV data
  var csvData = UrlFetchApp.fetch(url, fetchArgs).getContentText();

  //Parse CSV data and make a 2D array
  var recs = csvData.split('\n');
  var data = []; //this is actual 2D data
  for(var i=0; i<recs.length-1; i++){
    var temp = recs[i].split(',');
    if(i==0) temp.push('percent_disk_usage');
    else{
      var usage = (parseInt(temp[5])*100)/(parseInt(temp[4])*1024*1024);
      temp.push(usage);
    }
    data.push(temp);
  }
//Write data to spreadsheet
}

function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:55:21.977

只是一个快速的样本。在您的脚本中创建一个名为 xmlRequest 的新 HTML 文件，其中包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<rest xmlns="google:accounts:rest:protocol"
    xmlns:xsi=" http://www.w3.org/2001/XMLSchema-instance ">
        <type>Report</type>
    <domain>YOURDOMAIN.COM</domain>
      <date>2012-12-01</date>
        <page>1</page>
        <reportType>daily</reportType>
        <reportName>accounts</reportName>
</rest> 
```

将 YOURDOMAIN.COM 更改为您的 Google Apps 域。在 Code.gs 中粘贴以下代码：

```
/**
 * Script configuration
 */
var SCOPE = 'https://www.google.com/hosted/services/v1.0/reports/ReportingData';
var APPNAME = "disk_space_report";
var URL = 'https://www.google.com/hosted/services/v1.0/reports/ReportingData';

function testit() {
  // Generate the new entry from a template
  var template = HtmlService.createHtmlOutputFromFile("xmlRequest").getContent();
  var response = UrlFetchApp.fetch(URL,googleOAuth_('POST', template));
  Logger.log(response.getContentText());

}

/**
 * Google authentication loader
 * @param {String} method the HTTP method to use for the UrlFetch operation, possible values are: GET, POST, PUT, DELETE
 * @param {String} payload the payload to use if needed
 * @return {Object} configuration options for UrlFetch, including oAuth parameters
 */
function googleOAuth_(method, payload) {
  // Shared configuration for all methods
  var oAuthConfig = UrlFetchApp.addOAuthService(APPNAME);
  oAuthConfig.setRequestTokenUrl('https://www.google.com/accounts/OAuthGetRequestToken?scope='+encodeURIComponent(SCOPE));
  oAuthConfig.setAuthorizationUrl('https://www.google.com/accounts/OAuthAuthorizeToken');
  oAuthConfig.setAccessTokenUrl('https://www.google.com/accounts/OAuthGetAccessToken');
  oAuthConfig.setConsumerKey('anonymous');
  oAuthConfig.setConsumerSecret('anonymous');

  // Detect the required method
  switch(method) {
    case "GET":
      return {oAuthServiceName:APPNAME, oAuthUseToken:'always'};
      break;
    case "POST":
      return {oAuthServiceName:APPNAME, oAuthUseToken:'always', payload: payload, contentType: 'application/atom+xml', method: "POST"};
      break;
    case "PUT":
      return {oAuthServiceName:APPNAME, oAuthUseToken:'always', payload: payload, contentType: 'application/atom+xml', method: "PUT"};
      break;
    case "DELETE":
      return {oAuthServiceName:APPNAME, oAuthUseToken:'always', method: "DELETE"};
      break;
    default:
      return {oAuthServiceName:APPNAME, oAuthUseToken:'always'};
      break;
  }
} 
```

现在运行 testit 函数，在记录器中，您应该获取原始磁盘使用情况统计信息以进行解析。

# sql - 将列命名为当前日期

> ID：13949166
> 
> 赞同：1
> 
> 时间：2012-12-19T09:26:42.637
> 
> 标签：sql, date, teradata

我正在使用**Teradata SQL 助手**，我想创建一个名称为实际**当前日期**的列（例如 19/12/2012）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:30:08.463

如果你`[Current Date]`用方括号命名你的列名，这是可能的。但请远离保留关键字。

但是在重新阅读时，我相信您指的是具有诸如`18-Dec-2012`列名之类的名称？请说清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:02:07.867

我不知道`teradata`。但是下面的查询给了我想要的结果`SQL SERVER 2008`

```
declare @sql nvarchar(128) = '
select 
(column_name) as [' + cast(CONVERT(DATE,GETDATE()) as nvarchar(32)) + ']
from (table_name)'
exec(@sql) 
```

希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:34:52.530

根据您对创建数据透视表的评论，您可能希望生成创建结果集所需的代码。我正在做类似的事情。看看我在[这个问题](https://stackoverflow.com/q/13895370/1275871)中发布的例子。你也许可以做类似的事情。

查询的结果集将包含用于“数据透视”表的代码。在我的例子中，这些列被命名为以“D”为前缀的日期（如今天的 D20121217）。如果您希望它们作为实际日期，只需更改格式并用双引号将生成的列名括起来。运行后，只需将结果复制回查询窗口并执行。

# ios - Facebook iOS SDK 3.1 | 每次用户尝试登录时都会出现“您已经授权 YOUR_APP”

> ID：13949171
> 
> 赞同：11
> 
> 时间：2012-12-19T09:27:06.787
> 
> 标签：ios, facebook, facebook-ios-sdk

我目前正在尝试使用 iOS Facebook SDK 3.1 实现 Facebook-Login-Flow。但它有一个小问题。每次用户使用 facebook 登录时，webview 都会打开并显示

> “你已经授权了 YOUR_APP..”

我基于以下示例编写的代码：[单击此处](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/) 现在我的问题是，如何避免这种行为以及我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T05:00:30.243

请查看此代码，它可能会有所帮助

```
 postParams=
    [@{
       @"link" :link,
       @"picture" :picture link , //[NSString stringWithFormat:@"%@%@",KBaseImageUrl,@"/assets/img/logo-small.jpg"],
       @"name" : @“name”,
       @"caption" : caption title,
       @"description" :discription
       } mutableCopy];
    title=[[arrayEventInfo valueForKey:@"info"] valueForKey:@"eventname"];

if ([[FBSession activeSession]isOpen])
{

    if ([[[FBSession activeSession]permissions]indexOfObject:@"publish_actions"] == NSNotFound)
    {

        [[FBSession activeSession] requestNewPublishPermissions:[NSArray arrayWithObject:@"publish_action"] defaultAudience:FBSessionDefaultAudienceFriends
                                              completionHandler:^(FBSession *session,NSError *error){

                                                      // If permissions granted, publish the story
                                                      [FBRequestConnection
                                                       startWithGraphPath:@"me/feed"
                                                       parameters:postParams
                                                       HTTPMethod:@"POST"
                                                       completionHandler:^(FBRequestConnection *connection,
                                                                           id result,
                                                                           NSError *error)
                                                       {
                                                           NSString *alertText;
                                                           if (error)
                                                           {
                                                               alertText = [NSString stringWithFormat:
                                                                            @"error: domain = %@, code = %d",
                                                                            error.domain, error.code];
                                                           }
                                                           else
                                                           {
                                                               alertText = @"Posted successfully on your wall.";//[NSString stringWithFormat:
                                                               //@"Posted action, id: %@",
                                                               // result[@"id"]];
                                                           }
                                                           //Show the result in an alert
                                                           [[[UIAlertView alloc] initWithTitle:title
                                                                                       message:alertText
                                                                                      delegate:self
                                                                             cancelButtonTitle:@"OK" otherButtonTitles:nil]show];
                                                           [FBSession.activeSession closeAndClearTokenInformation];
                                                           [FBSession.activeSession close];

                                                       }];

                                                      UIActivityIndicatorView *activityView=(UIActivityIndicatorView*)[self.view viewWithTag:111];
                                                      if(activityView)
                                                      {
                                                          [activityView removeFromSuperview];
                                                      }
                                                      [self.view setUserInteractionEnabled:YES];
                                                      [self.navigationController.navigationBar setUserInteractionEnabled:YES];

                                              }];

    }else
    {

            // If permissions granted, publish the story
            [FBRequestConnection
             startWithGraphPath:@"me/feed"
             parameters:postParams
             HTTPMethod:@"POST"
             completionHandler:^(FBRequestConnection *connection,
                                 id result,
                                 NSError *error)
             {
                 NSString *alertText;
                 if (error)
                 {
                     alertText = [NSString stringWithFormat:
                                  @"error: domain = %@, code = %d",
                                  error.domain, error.code];
                 }
                 else
                 {
                     alertText = @"Posted successfully on your wall.";//[NSString stringWithFormat:
                     //@"Posted action, id: %@",
                     // result[@"id"]];
                 }
                 //Show the result in an alert
                 [[[UIAlertView alloc] initWithTitle:title
                                             message:alertText
                                            delegate:self
                                   cancelButtonTitle:@"OK" otherButtonTitles:nil]show];
                 [FBSession.activeSession closeAndClearTokenInformation];
                 [FBSession.activeSession close];

             }];

    }
}
else
{

    [FBSession openActiveSessionWithPublishPermissions:[NSArray arrayWithObject:@"publish_actions"]
                                       defaultAudience:FBSessionDefaultAudienceOnlyMe
                                          allowLoginUI:YES
                                     completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                         if (!error && status == FBSessionStateOpen) {
                                             if (!error)
                                             {
                                                 // If permissions granted, publish the story
                                                 [FBRequestConnection
                                                  startWithGraphPath:@"me/feed"
                                                  parameters:postParams
                                                  HTTPMethod:@"POST"
                                                  completionHandler:^(FBRequestConnection *connection,
                                                                      id result,
                                                                      NSError *error)
                                                  {
                                                      NSString *alertText;
                                                      if (error)
                                                      {
                                                          alertText = [NSString stringWithFormat:
                                                                       @"error: domain = %@, code = %d",
                                                                       error.domain, error.code];
                                                      }
                                                      else
                                                      {
                                                          alertText = @"Posted successfully on your wall.";//[NSString stringWithFormat:
                                                          //@"Posted action, id: %@",
                                                          // result[@"id"]];
                                                      }
                                                      //Show the result in an alert
                                                      [[[UIAlertView alloc] initWithTitle:title
                                                                                  message:alertText
                                                                                 delegate:self
                                                                        cancelButtonTitle:@"OK" otherButtonTitles:nil]show];
                                                      [FBSession.activeSession closeAndClearTokenInformation];
                                                      [FBSession.activeSession close];

                                                  }];

                                             }
                                         }else{
                                             NSLog(@"%@",[error description]);
                                             UIActivityIndicatorView *activityView=(UIActivityIndicatorView*)[self.view viewWithTag:111];
                                             if(activityView)
                                             {
                                                 [activityView removeFromSuperview];
                                             }
                                             [self.view setUserInteractionEnabled:YES];
                                             [self.navigationController.navigationBar setUserInteractionEnabled:YES];

                                         }
                                     }];
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-19T09:30:09.943

如果您在 dev 中测试代码，那么您第一次登录时，它将将该会话存储在 Facebook 上。

因此，您尝试再次对其进行测试，但它已被授权。

如果您想再次测试登录过程，请转到 Facebook 并取消授权您的应用程序（它将在您的应用程序列表中）。

然后您可以在设备上再次登录。

# jquery-ui - .droppable 不会在第二次放置时提供视觉反馈

> ID：13949173
> 
> 赞同：2
> 
> 时间：2012-12-19T09:27:14.973
> 
> 标签：jquery-ui, drag-and-drop, jquery-ui-droppable

我有多个拖放（jquery-ui）。在分隔的 div 中。当我将可拖动对象拖放到可拖放对象之外，然后再次将其拖放到可拖放对象上时，只有一次性将其放下时，它才会提供反馈（如文本或警报）。它确实会一直捕捉到放置区域。

```
 $(function() {
    $( "#eeneen.drag" ).draggable({ snap: ".drop1", snapMode: "inner"});
    $( ".drop1" ).droppable({
        accept: "#eeneen.drag",
        drop: function( event, ui ) {
            $( this )
            .addClass("goed")
                .find( "p" )
                    .html( "Correct" );
                    alert ("correct");

        }
    });
}); 
```

每次拖放都会重复此操作。出于某种原因，它只会给出最后一个函数的视觉反馈，这就是我制作多个放置类的原因。

编辑：没有 .addClass 和 .find 仍然是同样的问题。

有任何想法吗？

最后编辑。一切正常。

```
 $(function() {
    $( "#eendrie.drag" ).draggable({ snap: ".drop3", snapMode: "inner"});
    $( ".drop3" ).droppable({
        accept: "#eendrie.drag",
        activeClass: "ui-state-hover",
        hoverClass: "ui-state-active",
        drop: function( event, ui ) {
            $( this )

                .find( "p" )
                   $("#goed").toggle().hide(2000); 

        }
    });
}); 
```

所以它有一个额外的 div 可以在成功放置后显示和隐藏。

我还定义了 .drag.ui-draggable 的高度和宽度。我想那做到了。

# php - 使用 JavaScript 和 html 进行表单验证

> ID：13949174
> 
> 赞同：1
> 
> 时间：2012-12-19T09:27:20.287
> 
> 标签：php, javascript, html, codeigniter

我想验证我的表单。我的代码点火器视图中有一个表单验证 javascript 代码，但它无法正常工作，并且仍然在没有任何验证的情况下将值发送到下一页。你能告诉我我在哪里犯了错误以及为什么会这样吗？

**代码：**

```
<form method="get" action="/calculator/stage_two" name="calculate" id="calculate" onsubmit="return validateForm();">
    <div class="calc_instruction">
        <input type="text" name="property_number" placeholder="No/Name" id = "property_number" class="stage_one_box" />
        <input type="text"  name="postcode" placeholder="Postcode" id = "postcode" class="stage_one_box" />
    </div>
    <input type = "image" name = "submit_calculator" id = "submit_calculator" value="Go" src = "/images/next_button.png" />
</form> 
```

**Javascript函数：**

```
<script type="text/javascript">
    function validateForm() {
        var postcode=document.forms["calculate"]["postcode"].value;
        if (postcode==null || postcode=="") {
            alert("Please enter the postcode to give you more accurate results");
            document.forms["calculate"]["postcode"].focus();
            return false;
        }
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:34:43.837

您缺少一个结束括号。验证码中的任何错误都会返回一个非假值并允许提交

这是使用表单访问的规范方式：

```
<form method="get" action="/calculator/stage_two" name="calculate" 
  id="calculate"  onsubmit="return validateForm(this);">
  <div class="calc_instruction">
    <input type="text" name="property_number" placeholder="No/Name" id = "property_number" class="stage_one_box" />
    <input type="text"  name="postcode" placeholder="Postcode" 
      id = "postcode" class="stage_one_box" />
  </div>

    <input type = "image" name = "submit_calculator" id="submit_calculator" src="/images/next_button.png" />
</form>

<script type="text/javascript">
function validateForm(theForm) {
  var postcode=theForm.postcode;

  if (postcode.value=="")  { // cannot be null or undefined if value="" on field
    alert("Please enter the postcode to give you more accurate results");
    postcode.focus();
    return false;
  }
  return true; // allow submit
}
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T09:32:15.580

似乎您在函数末尾缺少右括号“ **} ”。**

```
<script type="text/javascript">
function validateForm() {

    var postcode=document.forms["calculate"]["postcode"].value;
    if (postcode==null || postcode=="")
    {
        alert("Please enter the postcode to give you more accurate results");
        document.forms["calculate"]["postcode"].focus();
         return false;
    }
} // <-- here 
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T09:33:15.020

请为函数添加端括号

```
<script type="text/javascript">
function validateForm()
 {
  var postcode=document.forms["calculate"]["postcode"].value;
  if (postcode==null || postcode=="")
  {
   alert("Please enter the postcode to give you more accurate results");
   document.forms["calculate"]["postcode"].focus();
    return false;
  }
 }
 </script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T09:30:41.910

尝试在此处插入调试器并尝试 go throw 方法

```
<script type="text/javascript">
 function validateForm() {
     debugger;
     var postcode=document.forms["calculate"]["postcode"].value;
     if (postcode==null || postcode=="")
     {
       alert("Please enter the postcode to give you more accurate results");
       document.forms["calculate"]["postcode"].focus();
       return false;
     } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T09:32:30.337

在您的 javascript 函数中缺少右括号

请使用这个

在您的 javascript 右大括号中丢失

```
<script type="text/javascript">
 function validateForm()
 {

   var postcode=document.forms["calculate"]["postcode"].value;
   if (postcode==null || postcode=="")
    {
    alert("Please enter the postcode to give you more accurate results");
    document.forms["calculate"]["postcode"].focus();
     return false;
    }
}
   </script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-19T09:32:56.907

试试这条线

```
var postcode=document.getElementById("postcode").value; 
```

代替

```
var postcode=document.forms["calculate"]["postcode"].value; 
```

和

```
postcode==undefined 
```

代替

```
postcode==null 
```

因为`function validateForm() {`你错过了结束`}`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T09:32:46.983

在您发布的代码中，您的 validateForm() 函数缺少右括号，因此假设这是您的实际代码，发生的情况是您在提交时收到 JavaScript 错误，这导致浏览器仅发布表单。

# c# - 锚点href中的评估

> ID：13949180
> 
> 赞同：2
> 
> 时间：2012-12-19T09:27:36.520
> 
> 标签：c#, asp.net

我有以下代码：

```
protected string VcdControlPanelLink { get; set; }

protected void Page_Load(object sender, EventArgs e) {
    VcdControlPanelLink = "http://www.mywebsite.com";
} 
```

以及以下标记：

```
<a href='<%# Eval(VcdControlPanelLink) %>' target="_blank" title="View the VDC control panel">VDC control panel</a> 
```

但是当我运行页面时，href 标记被呈现为一个空字符串：

```
<a title="View the VDC control panel" target="_blank" href="">VDC control panel</a> 
```

我尝试了各种标记等组合，但无法使其正常工作。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:30:15.023

如果您在模板中使用[数据绑定表达式](http://msdn.microsoft.com/en-us/library/ms178366%28v=vs.100%29.aspx) （例如GridView 的），则会自动调用数据绑定。但是，如果您在模板之外使用此类表达式，则需要通过调用（或在您的情况下）自己调用数据绑定：`<%# ... %>``ItemTemplate``Control.DataBind()``this.DataBind()`

```
protected string VcdControlPanelLink { get; set; }

protected void Page_Load(object sender, EventArgs e) {
    VcdControlPanelLink = "http://www.mywebsite.com";
    this.DataBind();
}

<!-- Note that you do *not* use Eval here! -->
<a href='<%# VcdControlPanelLink %>' target="_blank" ... /> 
```

* * *

但是，我不认为数据绑定是正确的工具。由于您使用的是基本 HTML 元素（而不是 Web 控件），因此您可以只使用内联 ASP.NET 表达式（`this.DataBind()`不需要）：

```
<a href='<%= VcdControlPanelLink %>' target="_blank" ... /> 
```

* * *

在任何情况下，请确保您的链接不包含引号`'`，或者您正在进行一些 HTML 注入。如果该值由用户提供，请不要忘记[HtmlEncode](http://msdn.microsoft.com/en-us/library/system.web.httputility.htmlencode.aspx)并对其进行清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:31:48.557

公开您的财产并像这样访问它，

```
public string VcdControlPanelLink { get; set; }

<a href='<%= VcdControlPanelLink %>' target="_blank" title="View the VDC control panel">VDC control panel</a> 
```

# android - 来自 am 广播的 Android Intent 广播

> ID：13949183
> 
> 赞同：2
> 
> 时间：2012-12-19T09:27:47.733
> 
> 标签：android, android-intent

任何人都可以帮助使用此代码：

```
Intent localIntent = new Intent("android.intent.action.MULTI_MODE_CHANGED ");
localIntent.putExtra("MULTI_MODE", paramString);
mContext.sendBroadcast(localIntent); 
```

我试图了解如何从 shell 广播中广播相同的意图。 `mContext`在开始时设置为 null 但在`onCreate`函数上显示： `mContext = this;`

这是在`AndroidManifest.xml`：

```
<receiver android:name="HiddenmenuBroadcastReceiver">
    <intent-filter>
        <action android:name="android.provider.Telephony.SECRET_CODE"/>
        <data android:host="LTEMODE" android:scheme="android_secret_code"/>
    </intent-filter>
</receiver> 
```

谢谢，亚历克斯

# cloud-foundry - 云代工设置

> ID：13949185
> 
> 赞同：1
> 
> 时间：2012-12-19T09:27:53.023
> 
> 标签：cloud-foundry

我在设置多节点云代工厂（4 个节点）中遇到了一个问题。首先

问题是：我安装了其余的组件，当我执行 ~/dev_setup$ bin/vcap_dev_setup -c deployments/sample/multihost_mysql/rest.yml 时，出现错误：

```
Get:20 http://security.ubuntu.com lucid-security/multiverse Sources [2,354B]                                                                                          
Fetched 2,276kB in 38s (58.6kB/s)                                                                                                                                     
Reading package lists... Done
Installing wget...
Reading package lists...
Building dependency tree...
Reading state information...
wget is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 129 not upgraded.
Checking web connectivity.
Giving up. Cannot connect to the web. Check your proxy settings if you are behind a proxy.
  In my network we don't use http proxy.I check vcap_dev_setup  shell,find error occurs at 113 line. I notes it ,is that ok?
  After this ,I run it again,but some other errors occur:
  0 upgraded, 0 newly installed, 0 to remove and 129 not upgraded.

Launching chef...
Installing deployment rest, cloudfoundry home dir is /home/user/cloudfoundry
Input Error: Please provide valid install jobs, following jobs are not recognized
#<Set: {"mongodb", "redis"}> 
```

为什么？请帮帮我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:15:00.277

您是否在防火墙或某种代理之后？

# javascript - 在 Ipad safari 浏览器上点击一会禁用默认功能

> ID：13949188
> 
> 赞同：4
> 
> 时间：2012-12-19T09:28:06.330
> 
> 标签：javascript, jquery, ipad

默认长按屏幕（例如长按 1 秒）将**显示保存图像/复制选项**。但是，我想为我的网络应用关闭该功能，可以吗？我试图将 touchmove 事件替换为 selectall，但它不起作用。感谢您的帮助。

```
addEventListener('touchmove', function(e) { e.preventDefault(); }, true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:32:24.167

不仅禁用 preventDefault，还禁用其他属性可能是有益的：

```
e.preventDefault(); 
e.cancelBubble = true;
e.returnValue = false;
return false; 
```

还有这个事件，你确定是 touchmove 吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T03:01:32.670

我认为值得一提的是，您可以使用纯 CSS 来做到这一点。这可能不是一个好主意，因为 IE10 或 Opera Mobile 都不支持它。但这是可以做到的，而且在未来，这可能是比 JavaScript 更好的方法。或者，如果您只谈论 iPhone 和 iPad，这种方法会非常有效。这是[CodePen 上](http://codepen.io/howlermiller/pen/axmCu)的一个示例。

代码很简单：

```
.notouch {
    pointer-events: none;
} 
```

只需将类别赋予`notouch`您想要效果的任何图像。

如果要对页面上的每个图像执行此操作，请执行以下操作：

```
img {
    pointer-events: none;
} 
```

我应该就可用性发表一个强制性的演讲。通过这样做，您将覆盖人们期望一直存在的默认功能。*除非您有非常非常*好的理由这样做，否则关闭这样的东西会给您带来非常糟糕的体验。所以，请确保你这样做。

**编辑**：

要摆脱放大镜，请使用以下代码：

```
.notouch {
    pointer-events: none;
    -webkit-user-select:none;
} 
```

设置为“无`-webkit-user-select`”，您甚至可能不需要关闭指针事件，但我不确定。我也更新了 CodePen。

# javascript - 如何设置ExtendedAccessToken facebook javascript sdk？

> ID：13949190
> 
> 赞同：0
> 
> 时间：2012-12-19T09:28:16.633
> 
> 标签：javascript, facebook, sdk, token, extend

我一直在试图弄清楚如何使用 Facebook JavaScript API 扩展访问令牌。

我看到很多使用 PHP 的代码示例，但 JavaScript 似乎真的很难找到。

一个似乎有用的 PHP SDK 方法是它`setExtendedAccessToken()`似乎在 JavaScript API 中不存在，或者我还没有找到它。

有没有人有如何`setExtendedAccessToken()`在 JavaScript SDK 中使用或[如何](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)在 Javascript 中实现此方法的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:13:45.543

没有办法做那个客户端。

首先，如果他们希望它成为可能的客户端，那么他们会从一开始就为客户端登录发出一个长期存在的令牌，你不觉得吗？

其次，它需要您的应用程序密码，并且您不想将其暴露给客户端。（所以“没办法”严格来说并不正确——但这样做真的很愚蠢，因为需要应用程序的秘密。）

# hibernate - 休眠 hbm2ddl 创建-删除

> ID：13949194
> 
> 赞同：1
> 
> 时间：2012-12-19T09:28:28.067
> 
> 标签：hibernate

我正在使用带有 spring 和 jpa 持久单元的 hibernate 3.6.x。无论如何在创建模式之前运行 sql 脚本？

我需要运行一些简单的 sql 语句来创建数据库、模式和激活 postgis。否则创建表会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:30:19.150

> 用于创建数据库、模式和激活 postgis 的简单 sql 语句

您必须“手动”创建数据库和至少一个用户。Hibernate 不能做所有事情。

您可以使用注释和 jdbc 连接运行一些 SQL `@PostConstuct`，但您仍然首先需要一个 DB 和适当的用户才能进行连接。

（我不知道postgis是什么）

# shell - 在 Csh 脚本中设置 var

> ID：13949198
> 
> 赞同：0
> 
> 时间：2012-12-19T09:28:41.980
> 
> 标签：shell, sh, csh

我正在创建这样的脚本

```
#!/bin/csh

set h=1;

while [h=1] do  echo "hi"; h=2; done; 
```

但是当我执行它时得到这个：

```
===> message after : csh test.sh     [h=1]: No match. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:36:45.197

尝试：

```
set h = 1

while ( $h == 1 )
  echo "hi"
  set h = 2
end 
```

您似乎正在尝试将 Bourne shell 语法混合到您的 C shell 脚本中。

Csh 通常是一种糟糕的脚本语言，尽可能避免使用它

[http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)

更新：

等效于的 csh`read h`是：

```
set h = $< 
```

# c# - 实体框架如何正确更新实体代码优先？

> ID：13949202
> 
> 赞同：4
> 
> 时间：2012-12-19T09:28:45.953
> 
> 标签：c#, entity-framework, ef-code-first

我的通用存储库中有以下更新方法

```
public class Repository<T> : IRepository<T> where T : class
{
    private readonly DbSet<T> _dbSet;
    public virtual T Update(T item) {
        return _dbSet.Attach(item);
    }
} 
```

有一个在上下文`UnitOfWork`中调用的提交方法。`SaveChanges`更多细节在这里
[https://codereview.stackexchange.com/questions/19037/entity-framework-generic-repository-pattern](https://codereview.stackexchange.com/questions/19037/entity-framework-generic-repository-pattern)

当我更新实体然后调用

```
ProductRepository.Update(modifiedProduct);
UnitOfWork.Commit; 
```

没有任何东西飘到数据库中。

但是，仅调用 Commit 即可（不调用更新方法）。

那么，附加方法的作用是什么导致更改不会向下流入数据库。我认为附加调用是在更新方法中进行的正确调用。那么，是什么导致了意外行为。

来自 CodePlex 上的 EF 源代码

```
/// <summary>
///     Attaches the given entity to the context underlying the set.  That is, the entity is placed
///     into the context in the Unchanged state, just as if it had been read from the database.
/// </summary>
/// <param name="entity"> The entity to attach. </param>
/// <returns> The entity. </returns>
/// <remarks>
///     Attach is used to repopulate a context with an entity that is known to already exist in the database.
///     SaveChanges will therefore not attempt to insert an attached entity into the database because
///     it is assumed to already be there.
///     Note that entities that are already in the context in some other state will have their state set
///     to Unchanged.  Attach is a no-op if the entity is already in the context in the Unchanged state.
/// </remarks>
public object Attach(object entity)
{
    Check.NotNull(entity, "entity");

    InternalSet.Attach(entity);
    return entity;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:33:17.663

```
///     Attach is used to repopulate a context with an entity that is known to already exist in the database.
///     SaveChanges will therefore not attempt to insert an attached entity into the database because
///     it is assumed to already be there.
///     Note that entities that are already in the context in some other state will have their state set
///     to Unchanged. 
```

附加实体后，状态将保持不变，因此不会为该实体触发 UPDATE sql。您需要在附加后手动设置实体的状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T09:34:14.207

您需要将对象附加为`modified`或`added`生成对数据库的查询。

```
 public virtual T AttachAsModified(T item) {
        item = _dbSet.Attach(item);
        db.Entry(item).State = System.Data.EntityState.Modified
        return item;
    } 
```

# c# - Watin ApartmentState.STA 线程和父线程之间的共享变量？

> ID：13949203
> 
> 赞同：3
> 
> 时间：2012-12-19T09:28:48.483
> 
> 标签：c#, watin

我试图让 Watin 在我的 SSIS 脚本任务中工作，通过在新线程中打开 IE 来做一些自动化，做一些事情，找到最终值并基本上在父线程中返回/设置该值。

所以我现在有这个：

```
public partial class TestWatin{

    public void Main()
    {     
        String finalValueFromWeb = "";            
        Thread runnerThread = new Thread(delegate() { getDAFValue(ref finalValueFromWeb ); });
        runnerThread.ApartmentState = ApartmentState.STA;
        runnerThread.Start();
        runnerThread.Join();
        MessageBox.Show(finalValueFromWeb);  

        //here i want to use the value of finalValueFromWeb to download a file
        //but if i try to access finalValueFromWeb the process would fail.
    }

    //do the Watin stuff here
    public  void findHiddenURL(String refObject)
    {
        //setup page controls, press search, grab the value of "hiddenURL"
        IE ie = new IE("some_webadress_to_go_to");
        ie.Visible = false;
        ie.SelectList("testID1").Option("Car").Select();
        ie.SelectList("testID2").Option("JAP").Select();
        ie.SelectList("testID3").Option("2012").Select();
        ie.Button("testSearch").Click();
        Link link = ie.Link("hiddenURL");
        ie.Close();

        //fails here?
        refObject = link.Url;            
    }
} 
```

我基本上想要的是为`findHiddenURL()`我找到一个值，它是一个包含一些 CSV url 的字符串。然后我想使用该字符串下载 CSV 并处理它。

问题是当我尝试设置进程失败的`finalValueFromWeb`内部值时。`findHiddenURL()`异常消息说`The Object Reference is not set to an instance of an object`

有人可以告诉我应该如何解决这个问题吗？做这种事情的正确方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:46:10.360

使变量成为类的成员并尝试锁定它。您可以使用 c# lock ：

[http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)

```
protected string finalValueFromWeb ;

....

public void Main()
    {
        ...
        lock(finalValueFromWeb)
        {
            MessageBox.Show(finalValueFromWeb);  
        }
    }

 public  void findHiddenURL(String refObject)
    {
        ...
        lock(finalValueFromWeb)
        {
            finalValueFromWeb = link.Url;   
        }
    } 
```

# c# - 在关机时运行函数

> ID：13949212
> 
> 赞同：1
> 
> 时间：2012-12-19T09:29:20.340
> 
> 标签：c#

我正在编写一个在系统启动时自动启动的程序。

并在计算机关闭时将该信息存储在数据库中。

换句话说，当计算机关闭时，我会显示一个用于保存信息的*消息框。*如果用户单击是，则将信息保存在数据库中。

```
 if (MessageBox.Show("Save changes?", "", MessageBoxButtons.YesNo) == DialogResult.Yes)
        { 
        MyFunction();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:33:06.487

检查此 SystemEvents.SessionEnding 事件。

[MSDN 链接在这里](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:40:37.640

您可以从[FormClosing 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)中关闭应用程序。widows 关闭事件可以从[SystemEvents](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx)中获得。

# android - 不要在按下后退按钮时破坏当前活动

> ID：13949214
> 
> 赞同：11
> 
> 时间：2012-12-19T09:29:29.353
> 
> 标签：android, android-activity

我有两个活动，A 和 B。我在 A 中有一个按钮，按下时会启动对 B 的新意图。但是，每当我在 B 中按下后退按钮时，再次单击该按钮会重新启动 Activity。我不想这样做，我希望它恢复 Activity B。实际上我正在 Activity B 中进行一些网络操作，除非用户想要刷新，否则我想保存。我该怎么做？提前致谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-19T10:39:47.720

利用

```
@Override
    public void onBackPressed(){
        moveTaskToBack(true);
    } 
```

希望，它必须帮助你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:24:49.733

这听起来像你需要重新考虑你的架构。你说：

> 实际上，我在 Activity B 中进行了一些联网，除非用户想要刷新，否则我想保存。

如果是这种情况，您可能不想在 ActivityB 中建立网络。也许你应该`Service`从 ActivityB 开始做网络。服务和活动可以相互通信，以便活动可以让用户了解网络的最新状态。如果用户在 ActivityB 中按下 BACK，它可以完成（像往常一样）并返回到 ActivityA。在这种情况下，服务仍在管理网络。当用户再次启动 ActivityB（从 ActivityA）时，ActivityB 的新实例可以与服务通信以查看是否有任何网络正在进行，如果有，它可以获取该网络的当前状态或启动或停止它或任何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:43:16.580

您需要覆盖

> onBackPressed

方法并从那里开始这样的活动：

```
@Override
    public void onBackPressed() {
    Intent intent = new Intent(this, activityA.class);
    startActivityForResult(intent, PICK_CONTACT_REQ);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-03T02:26:01.110

我想我为时已晚，但我遇到了类似的问题。

我在 A 中有两个活动 A、B 和一个下一步按钮。

每当我尝试这样做时：A->按下一个按钮-> B->按后退按钮-> A->按下一个按钮-> B，当我按下后退按钮时，B屏幕被破坏。所以当我第二次回到 B 时，它是一个新创建的 B（我输入的所有信息都消失了）。

所以当我只想回到原来的 B 时，就像 A->B->A->new B！:(

所以我所做的是，在活动 B 中，我覆盖了 onBackPressed() 函数，因此它不会破坏活动。我还设置了这个标志，这样如果有一个 A 活动已经在运行，它只会将它拉到前面而不是创建一个新的 A 活动。

```
@Override
public void onBackPressed() {
        Intent intent = new Intent(getApplicationContext(), ActivityA.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
        startActivity(intent);
    } 
```

然后，对于活动 A 中下一个按钮的 onclicklistener 函数，我同样设置了标志。

```
public void onClickNextbutton(View v){
        Intent intent = new Intent(getApplicationContext(), ActivityB.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
        startActivity(intent);
    } 
```

# java - 提交按钮还验证并显示警报对话框

> ID：13949218
> 
> 赞同：2
> 
> 时间：2012-12-19T09:29:39.113
> 
> 标签：java, android

在我的应用程序中，我使用了一个提交按钮来验证是否插入了所有字段，然后它会显示一个警告对话框，您是否要保存或不保存。这是我的代码：

```
public void OnClick_click2(final Button btnadd)
{
    final Button btn = (Button) btnadd;
    if(btn.getId()==R.id.btnadd){ 

    if(complain_date_txtbx.getText().toString().trim()
            .length() < 1

                        SaveRecord(data);

                        Toast.makeText(getBaseContext(),
                                "Your Task saved Successfully!",
                                Toast.LENGTH_LONG).show();
                    }
                });

        alert.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                            int whichButton) {
                        dialog.cancel();
                    }
                });

        alert.show();
        }
} 
```

它没有根据我的要求显示 a/c，请确定我出错的地方以及首先单击提交按钮时适合的内容，它会检查所有字段，然后显示一个警报对话框。请指导我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:31:47.050

删除 **“;”** 从 if 语句

```
 if(complain_date_txtbx.getText().toString().trim()
            .length() < 1
            || complain_time_txtbx.getText().toString()
                    .trim().length() < 1
            || job_performed_txtbx.getText().toString()
                    .trim().length() < 1

            || next_due_on_txtbx.getText().toString()
                    .trim().length() < 1);  //<<<<<<<<<< 
```

因为 **“；”** 终止 if 语句执行，这就是用户无法看到 Toast 的原因

**编辑：**将您的代码更改为：

```
 if(complain_date_txtbx.getText().toString().trim()
            .length() < 1
            || complain_time_txtbx.getText().toString()
                    .trim().length() < 1
            || job_performed_txtbx.getText().toString()
                    .trim().length() < 1

            || next_due_on_txtbx.getText().toString()
                    .trim().length() < 1)
    {
        // show alert here if all fields are empty
    }
    else{
            // show alertbox here
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:33:34.613

用这个..

```
if(complain_date_txtbx.getText().toString().trim().length() <  && complain_time_txtbx.getText().toString().trim().length() < 1   && job_performed_txtbx.getText().toString().trim().length() < 1   && next_due_on_txtbx.getText().toString().trim().length() < 1)
 {
        Toast.makeText(getBaseContext(),
                "Please fill all the fields",
                Toast.LENGTH_LONG).show();
 } 
```

# c# - 从 Window 获取用户控件中选定的列表框项

> ID：13949222
> 
> 赞同：0
> 
> 时间：2012-12-19T09:29:44.663
> 
> 标签：c#, wpf, user-controls, selectionchanged

我有`User control`一个`list box`。

这`User control`位于我的窗口。如何从用户控件的列表框中检测并获取所选项目？

我以前试过这个，但是当我从列表框`e.OriginalSource`返回`TextBlock`类型中选择一个项目时。

```
 private void searchdialog_PreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            //This return TextBlock type
            var conrol= e.OriginalSource;
            //I Want something like this
            if (e.OriginalSource is ListBoxItem)
            {
                ListBoxItem Selected = e.OriginalSource as ListBoxItem;
                //Do somting
            }
        } 
```

或者有什么更好的方法可以`SelectionChanged`从我的表单中检测列表框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:47:44.223

我认为最好的解决方案是在您的用户控件上声明一个事件，只要在`SelectedValueChanged`列表框上触发该事件就会触发该事件。

```
public class MyUserControl : UserControl
{
  public event EventHandler MyListBoxSelectedValueChanged;

  public object MyListBoxSelectedValue
  {
    get { return MyListBox.SelectedValue; }
  }

  public MyUserControl()
  {
    MyListBox.SelectedValueChanged += MyListBox_SelectedValueChanged;
  }

  private void MyListBox_SelectedValueChanged(object sender, EventArgs eventArgs)
  {
    EventHandler handler = MyListBoxSelectedValueChanged;
    if(handler != null)
      handler(sender, eventArgs);
  }
} 
```

在您的窗口中，您侦听事件并使用用户控件中的公开属性。

```
public class MyForm : Form
{
  public MyForm()
  {
    MyUserControl.MyListBoxSelectedValueChanged += MyUserControl_MyListBoxSelectedValueChanged;
  }

  private void MyUserControl_MyListBoxSelectedValueChanged(object sender, EventArgs eventArgs)
  {
    object selected = MyUserControl.MyListBoxSelectedValue;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:49:54.480

有几种方法可以处理这个问题：

1.  在您的用户控件中实现 SelectionChanged 事件，并引发您在窗口中处理的自定义事件：

    //在你的用户控件中

    ```
    private void OnListBoxSelectionChanged(object s, EventArgs e){
        if (e.AddedItems != null && e.AddedItems.Any() && NewItemSelectedEvent != null){   
            NewItemsSelectedEvent(this, new CustomEventArgs(e.AddedItems[0]))
        }
    } 
    ```

    //在你的窗口中

    ```
    myUserControl.NewItemsSelected += (s,e) => HandleOnNewItemSelected(); 
    ```

2.  如果您使用绑定或任何形式的 MVVM，您可以使用 a`DependencyProperty`将所选项目绑定到视图模型中的对象

    //在你的用户控件中：

    ```
    public static readonly DependencyProperty CurrentItemProperty = 
     DependencyProperty.Register("CurrentItem", typeof(MyListBoxItemObject), 
    typeof(MyUserControl), new PropertyMetadata(default(MyListBoxItemObject)));

    public LiveTextBox CurrentItem
    {
        get { return (MyListBoxItemObject)GetValue(CurrentItemProperty ); }
        set { SetValue(CurrentItemProperty , value); }
    } 
    ```

    //在你的窗口xaml中

    ```
    <MyUserControl CurrentItem={Binding MyCurrentItem} ... /> 
    ```

# asp.net-mvc - 在 mvc 中添加控制器时出错

> ID：13949229
> 
> 赞同：1
> 
> 时间：2012-12-19T09:30:09.313
> 
> 标签：asp.net-mvc

将控制器添加为“无法检索 MvcCustomer.ViewModels.ViewOrderData.Unable 的元数据以加载专用元数据资源”时出现错误。这是我的视图模型

```
 namespace MvcCustomer.ViewModels
          {
           public class ViewOrderData 
           {
            public IEnumerable<CustomerInfo> customerinfo { get; set; }
            public IEnumerable<CustomerOrderData> customerorderdata { get; set; }
           }
         } 
```

尝试使用 MvcCustomer 类和 DBContext 添加控制器，但无法创建控制器。

# css - why does the "checkout" button run away from bottom to top left in ie7?

> ID：13949231
> 
> 赞同：0
> 
> 时间：2012-12-19T09:30:10.517
> 
> 标签：css, internet-explorer-7

why does the "checkout" button run away from bottom to top left in ie7?
it is view placed in ie6 and firefox.

what happened? how to fix?
demo url: [http://linjuming.pydra.org/leb/ie7_checkout_cw/](http://linjuming.pydra.org/leb/ie7_checkout_cw/)

![enter image description here](../Images/879db05c35cd85819c176ed2d9a4748f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:40:12.720

IE7 does not support `:after` css selector. You can modify your `.clearfix` class (which is currently empty) like this:

```
.clearfix {
   clear: both;
} 
```

As far as I can see, it works fine that way.

# haskell - haskell - 为除一种特定类型之外的所有类生成一个实例

> ID：13949236
> 
> 赞同：14
> 
> 时间：2012-12-19T09:30:28.133
> 
> 标签：haskell, type-level-computation

是否可以做类似的事情

```
class T a
class U a
instance U ()
instance ( NOT U a ) => T a 
```

上下文：我正在尝试编写一个函数，该函数采用[HLists](http://web.archive.org/web/20120816053543/http://homepages.cwi.nl/~ralf/HList/)并删除某种类型的元素（这里是单元类型）。

我觉得开放世界假设可能存在一些问题，但即使能够以硬编码的方式（而不是 NOT U a ，类似 NOT a~() 之类的东西）也应该是可能的。

编辑：正如 CA McMann 在评论中指出的那样，[这个](https://stackoverflow.com/a/6942637/157360)问题几乎与我的完全相同。如果版主想关闭这个，请随意。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T11:00:13.577

您可以使用 Oleg 的技巧来做到这一点，它甚至有自己的[关于 hackage的库](http://hackage.haskell.org/package/type-equality-check)

通过严重滥用类型类系统，可以生成一个fundep

```
class TypeEq a b result | a b -> result 
```

这样`TypeEq a b True`只有当`a~b`，`TypeEq a b False`否则

所以你可以写

```
instance (TypeEq () a False) => T a 
```

我认为这应该可行。我应该清楚，这种类型的相等性测试在实现方式上是纯粹的邪恶，但它确实有效。如果您想了解它是如何工作/概括它的，请查看该库的代码（另请阅读 HList 论文）。

如果完全有可能在没有负面约束的情况下做你想做的事，那就去做吧。

# rest - 增加 WS Promise 超时

> ID：13949237
> 
> 赞同：1
> 
> 时间：2012-12-19T09:30:35.047
> 
> 标签：rest, playframework-2.0

我正在调用一个耗时超过 5 秒的 REST ws，并且我的 Promise 响应超时。我怎样才能将这个时间增加到 5 秒以上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:30:35.047

您可以将 Long 传递给与此方法的超时相对应的 Promise 的 get 方法。例如：

```
promise.get(120000L); 
```

将为 get 方法设置 2 分钟超时。

# php - Zend Framework 2 - 翻译标准表单验证和错误消息

> ID：13949240
> 
> 赞同：4
> 
> 时间：2012-12-19T09:30:37.143
> 
> 标签：php, validation, zend-form, zend-framework2, zend-translate

我正在编写一个完整的德语应用程序，因此需要基本上将所有内容设置为德语。

我的问题：将表单验证设置为德语的最佳和最简单的方法是什么？

我找到[了这个页面](http://framework.zend.com/manual/1.12/en/zend.form.i18n.html)，但不知道如何让这段代码工作：

```
Zend_Validate_Abstract::setDefaultTranslator($translate); 
```

谁能给我一些建议如何使用它？

**编辑：**

感谢@Gordon，我将以下内容放入我的 Application/Module.php：

```
use Zend\I18n\Translator\Translator;
use Zend\Validator\AbstractValidator;

class Module
{
public function onBootstrap(MvcEvent $e)
{
    ...

     $translator = new Translator();
     $translator->addTranslationFile(
      'phpArray',
      'resources/languages/de.php',
      'default',
      'de_DE'
     );
         AbstractValidator::setDefaultTranslator($translator);
    ...
} 
```

**编辑2：** 好吧，这很奇怪。当我设置时，`de_DE`我收到无法打开 de.php 文件的消息 - 这是真的，因为“de”是一个包含其他两个 PHP 文件的文件夹。

> 无法打开文件资源/语言/de.php 进行阅读

更改文件夹或其中任何现有文件的路径无济于事......

当我将“de_DE”更改为“de”或“de_de”时，什么也没有发生。没有错误和英文验证错误。有什么线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T17:51:28.910

对我来说，它适用于

```
public function onBootstrap(MvcEvent $e)
{
    $translator=$e->getApplication()->getServiceManager()->get('translator');
    $translator->addTranslationFile(
        'phpArray',
        './vendor/zendframework/zendframework/resources/languages/it/Zend_Validate.php'

    );
    AbstractValidator::setDefaultTranslator($translator);
   // \Zend\Debug\Debug::dump($application);
} 
```

'./vendor/zendframework/zendframework/resources/languages/langfolderyouwant/Zend_Validate.php'

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-22T18:47:21.577

Zend FW 的更高版本必须具有具有特定接口的翻译器。

```
use Zend\I18n\Translator\Translator;
use Zend\Validator\AbstractValidator;

class Module
{
    public function onBootstrap(MvcEvent $e)
    {
        //...

        $translator = new Translator();
        $translator->addTranslationFile(
            'phpArray',
            'vendor/zendframework/zendframework/resources/languages/Zend_Validate.php',
            'default',
            'de_DE'
        );
        AbstractValidator::setDefaultTranslator($translator);
        //...
    }
} 
```

会成为：

```
use Zend\I18n\Translator\Translator;
use Zend\Validator\AbstractValidator;

class Module
{
    public function onBootstrap(MvcEvent $e)
    {
    //...

        $translator = new Translator();
        $translator->addTranslationFile(
            'phpArray',
            'vendor/zendframework/zendframework/resources/languages/Zend_Validate.php',
            'default',
            'de_DE'
        );
        AbstractValidator::setDefaultTranslator(
            new \Zend\Mvc\I18n\Translator($translator)
        );
        //...
    }
} 
```

注意`new \Zend\Mvc\I18n\Translator($translator)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T11:07:15.820

最后我在@Gordon 的帮助下找到了答案！

我将以下内容放入我的 Application/Module.php 中：

```
use Zend\I18n\Translator\Translator;
use Zend\Validator\AbstractValidator;

class Module
{
public function onBootstrap(MvcEvent $e)
{
    ...

     $translator = new Translator();
     $translator->addTranslationFile(
      'phpArray',
      'vendor/zendframework/zendframework/resources/languages/Zend_Validate.php',
      'default',
      'de_DE'
     );
     AbstractValidator::setDefaultTranslator($translator);
    ...
} 
```

然后你需要启用 php5-intl。转到 php.ini 并启用`extension=php_intl.dll`.

最后，我需要在 Gordon 和文档提供的功能中添加完整路径（从供应商开始）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-30T09:43:05.787

如果你不想把代码堆到 onBootstrap 中，只需要一种语言，你可以使用配置文件：

```
'translator' => array (
    'locale' => 'ru',
    'translation_files' => [
        [
            'type' => 'phparray',
            'filename' => 'path/to/ru/directory/Zend_Validate.php'
        ]
    ],
), 
```

把它放进你`module.config.php`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-05T13:26:41.340

对于最新的 zf2 版本（2.5.0），您必须将 Zend_Validate.php 的路径更改为`./vendor/zendframework/zend-i18n-resources/languages/de/Zend_Validate.php`.

```
$translator->addTranslationFile(
    'phpArray',
    './vendor/zendframework/zend-i18n-resources/languages/de/Zend_Validate.php',
    'default',
    'de_DE'
); 
```

# python - 在scrapy下载图像中获取钩子失败

> ID：13949242
> 
> 赞同：0
> 
> 时间：2012-12-19T09:30:43.063
> 
> 标签：python, django, scrapy

我正在尝试使用爬虫从站点下载图像。

我的爬虫工作正常，数据库中也有东西

这是scrapy的调试

```
2012-12-20 09:25:23+0800 [working] DEBUG: Crawled (200) <GET http://www.example.com/images/28_34.jpg> (referer: None)
2012-12-20 09:25:23+0800 [working] DEBUG: Image (downloaded): Downloaded image from <GET http://www.example.com/images/28_34.jpg> referred in <None>
2012-12-20 09:25:23+0800 [working] WARNING: 'image_downloaded hook failed'
2012-12-20 09:25:23+0800 [working] DEBUG: Scraped from <200 http://www.example.com/profile.php>
        {'image_urls': ['http://www.example.com/images/28_34.jpg'],
         'number_pts': [u'5710'],
         'profile_link': [u'profile.php'],
         'title': [u'test1']} 
```

我已经`scrapy.contrib.pipeline.images.ImagesPipeline`在设置和图像存储中设置了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:43:13.193

scrapy 中没有与您的问题相关的错误。

在使用 ImagesPipeline 下载图像时，必须在 items 中定义这两个字段。

```
image_urls = Field()
images = Field() 
```

1) 在 Spider 中，您抓取一个项目并将其图像的 URL 放入 image_urls 字段中。

2) 项目从蜘蛛返回并进入项目管道。

3）当item到达ImagesPipeline时，image_urls字段中的URLs会使用标准的Scrapy调度器和下载器调度下载（这意味着调度器和下载器中间件被重用），但优先级更高，在其他页面之前处理它们刮。该项目在该特定管道阶段保持“锁定”，直到图像完成下载（或由于某种原因失败）。

4) 下载图像时，另一个字段 ( **images** ) 将填充结果。该字段将包含一个字典列表，其中包含有关下载图像的信息，例如下载路径、原始抓取的 url（取自 image_urls 字段）和图像校验和。images 字段列表中的图像将保留与原始 image_urls 字段相同的顺序。如果某些图像下载失败，则会记录错误并且图像不会出现在图像字段中。

# android - 在图库中查看图像和下面的文字

> ID：13949243
> 
> 赞同：0
> 
> 时间：2012-12-19T09:30:42.987
> 
> 标签：android, gallery

在我的应用程序中，我在galleryview中显示了图像。但我想要的是图像和该图像下方的文本。考虑到我在图库视图中有大约10个图像，我希望每个图像下方都有一个描述该图像的文本（该图像图像长度）。我尝试了以下 xml 代码。但只有文本显示图像没有出现

我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <ImageView
            android:id="@+id/imageview1"
            android:layout_width="120dp"
            android:layout_height="100dp"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="-20dp"           

            />

             <TextView
            android:id="@+id/text"
            android:layout_width="50dp"
            android:layout_height="wrap_content"   
            android:layout_marginTop="10dp" 
            android:layout_below="@+id/imageview1"

             />         

</RelativeLayout> 
```

我想要这样的设计：

```
galleryview1
image1      image2    image3

text1       text2     text3

galleryview2

image1    image2     image3

text1     text2      text3 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:35:13.603

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:orientation = "vertical"
    android:layout_height="fill_parent"
    >

    <ImageView
            android:id="@+id/imageview1"
            android:layout_width="120dp"
            android:layout_height="100dp"
                />

             <TextView
            android:id="@+id/text"
            android:layout_width="50dp"
            android:layout_height="wrap_content"   
            android:layout_marginTop="10dp" 

             />         

</LinearLayout> 
```

# python - Django admin - 编辑页面上的错误模型对象

> ID：13949244
> 
> 赞同：4
> 
> 时间：2012-12-19T09:30:59.547
> 
> 标签：python, django, inheritance

我有 3 个继承的类（Fitters -> Workers -> Staffs）与我的数据库中的表相连（类名是复数形式，但现在这并不重要）。

用户只能添加/编辑/删除 Fitters。Workers 和 Staffs 表会自动更新（级联）。

它工作正常：当我添加新的 Fitter 时，所有更改都会发生在数据库中的所有表中。但是当我想通过 Django 管理工具编辑任何 Fitter 时，我去编辑 Fitter 页面，我看到错误填充的字段。

例如：

*   在 Staffs 表中，我有 id=41 的“John Smith”
*   在 Workers 表中，我有 id=21 和 ForeignKey=41 的记录（给 John Smith）
*   在 Fitters 表中，我有 id=5 和 ForeignKey=21 的记录（记录在 Workers 表中）

当我去编辑 Fitter“John Smith”页面时，我看到所有字段都由“Kevin Thomas”填充（Staffs 表中的 id=21！）。因此，Django 错过了 Workers 表并直接转到了 Staffs 表。

我该如何解决？

这是我的草稿代码：

```
class Staffs(models.Model):
    id = models.AutoField(primary_key=True)

    name = models.CharField(max_length=135, blank=True)
    surname = models.CharField(max_length=135, blank=True)

    def __unicode__(self):
        return self.name + " " + self.surname

    class Meta:
        db_table = u'staffs'

class Workers(Staffs):
    idWorker = models.AutoField(primary_key=True, db_column='id')

    staffs_idstaff = models.OneToOneField('Staffs', db_column='Staffs_idstaff', parent_link=True)
    brigades_idbrigade = models.ForeignKey('Brigades', db_column='Brigades_idBrigade')

    def __unicode__(self):
        return self.staffs_idstaff.name + " " + self.staffs_idstaff.surname

    class Meta:
        db_table = u'workers'

class Fitters(Workers):
    idFitter = models.AutoField(primary_key=True, db_column='id')

    qualification = models.CharField(max_length=135, blank=True)
    workers_idworker = models.OneToOneField('Workers', db_column='Workers_idWorker', parent_link=True)

    def __unicode__(self):
        staff = self.workers_idworker.staffs_idstaff
        return staff.name + " " + staff.surname

    class Meta:
        db_table = u'fitters' 
```

**编辑1：**

我试图像这样更改我的代码：

```
class Staffs(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=135, blank=True)
    surname = models.CharField(max_length=135, blank=True)

    class Meta:
        db_table = u'staffs'

class Workers(Staffs):
    idWorker = models.AutoField(primary_key=True)
    brigades_idbrigade = models.ForeignKey('Brigades')

    class Meta:
        db_table = u'workers'

class Fitters(Workers):
    idFitter = models.AutoField(primary_key=True)
    qualification = models.CharField(max_length=135, blank=True)

    class Meta:
        db_table = u'fitters' 
```

现在很简单。我同步了我的数据库，但我遇到了完全相同的问题！

**编辑2：**

我的 admin.py 文件的一部分：

```
from django.contrib import admin
from appclient.models import *

admin.site.register(Fitters)
admin.site.register(Staffs)
admin.site.register(Workers)
... 
```

**解决方案：**

解决方案是我不需要为每个模型使用我自己的 id 和 ForeignKey。Djando 自动为每个模型创建特殊字段并将其用作 id (PrimaryKey) 和链接到父表 (ForeignKey)。

这是解决方案：

```
class Staffs(models.Model):
    name = models.CharField(max_length=135, blank=True)
    surname = models.CharField(max_length=135, blank=True)

    class Meta:
        db_table = u'staffs'

class Workers(Staffs):
    brigades_idbrigade = models.ForeignKey('Brigades')

    class Meta:
        db_table = u'workers'

class Fitters(Workers):
    qualification = models.CharField(max_length=135, blank=True)

    class Meta:
        db_table = u'fitters' 
```

感谢所有帮助过我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:07:48.343

这似乎有些奇怪。[但是，据我了解，在使用多表继承](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)时，Django 会自动设置父子之间所需的一对一映射。由于您还手动设置了这些，因此很可能会引入某种不一致。

如果直接在数据库中查看，这两种不同的一对一关系是否一致？

如果从模型中删除显式的一对一字段会发生什么？

# jquery - 使用jquery在选择框上设置文本

> ID：13949246
> 
> 赞同：0
> 
> 时间：2012-12-19T09:31:09.970
> 
> 标签：jquery, jquery-mobile

我有另一个（可能很简单）Jquery 问题。我只想使用 Jquery 显示下拉列表的选定值。我已将选定的值保存到数据库中，现在只需要在用户返回页面时显示它。我已经尝试了所有我能想到的方法（以及谷歌的搜索结果！），但它不起作用。我一定错过了一些简单的东西（再次）请帮忙！我尝试了以下方法：

```
$(document).ready(function() {

$("quantity").val('2');
$("quantity").text('2');
$("quantity .ui-btn-text").text('2');

$("quantity").filter(function() {
   return $(this).text() == '2';
}).attr('selected', true);

}​ 
```

这是一个 JSfiddle：http: [//jsfiddle.net/zv58e/](http://jsfiddle.net/zv58e/)

帮助！谢谢丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:32:11.973

```
 $("quantity") 
```

应该

```
 $("#quantity").val(2); 
```

***[演示](http://jsfiddle.net/zv58e/1/)***

或者

```
$('select[name="quantity"]').val(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:34:55.800

对于使用 id，您应该使用 $("#quantity") 并正确关闭大括号，

```
$(document).ready(function() {
    $("#quantity").val('2');
/*
    $("#quantity").text('2');
    $("#quantity .ui-btn-text").text('2');
    $("#quantity").filter(function() {
       return $(this).text() == '2';
    }).attr('selected', true);
*/
}​); 
```

# sql - 如何在 Oracle XE 中调度存储过程？

> ID：13949249
> 
> 赞同：1
> 
> 时间：2012-12-19T09:31:24.200
> 
> 标签：sql, oracle, oracle10g, oracle-xe

我正在使用 Oracle 10g XE，并且正在尝试为存储过程创建计划作业。我授予以下权利`hr`

```
grant create job to hr ;
grant create external job to hr ; 
```

然后登录`hr`并创建了一个工作

```
begin
  dbms_scheduler.create_job(
      job_name => 'THIS_IS_DA_NAME',
      job_type => 'STORED_PROCEDURE',
      job_action => 'PROC_MYSTOREDPROC',
      start_date => sysdate + (5/(24*60)),
      repeat_interval => 'FREQ=MINUTELY; interval=1',
      enabled => TRUE,
      comments => 'Runtime: Every day every minute');
end; 
```

这成功了。但该工作没有显示`dba_scheduler_job_run_details`或`dba_scheduler_job_log`

```
select log_date, job_name, status, req_start_date, actual_start_date, run_duration
from   dba_scheduler_job_run_details

select log_date, job_name, status
from dba_scheduler_job_log 
```

它列在此视图/表中

```
select *
from dba_scheduler_jobs 
```

这里有什么问题，为什么存储过程不会运行？它运行良好

```
exec PROC_MYSTOREDPROC 
```

此外，立即运行作业效果很好

```
EXEC dbms_scheduler.run_job('hr.THIS_IS_DA_NAME'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:18:13.863

从[`DBMS_SCHEDULER`文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sched.htm#CIHDJEEB)中：

> `JOB_QUEUE_PROCESSES`初始化参数指定可以为执行作业创建的最大进程数。从 Oracle Database 11g 第 2 版 (11.2) 开始，`JOB_QUEUE_PROCESSES`适用于`DBMS_SCHEDULER`作业。将此参数设置为 0 将禁用`DBMS_SCHEDULER`作业。

因此，请确保将[`JOB_QUEUE_PROCESSES`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams110.htm#REFRN10077)初始化参数设置为大于 1 的值。

您还需要提交以触发对您的工作请求的验证。

提交后，作业将在`USER_SCHEDULER_JOBS`视图中安排：

```
SQL> select job_name, start_date from user_scheduler_jobs;

JOB_NAME        START_DATE
--------------- -----------------------------------
THIS_IS_DA_NAME 19-DEC-12 08.15.47.000000 AM -06:00 
```

当然，由于您要求将其安排在 5 分钟后，因此还没有任何行`USER_SCHEDULER_JOB_LOG`，但如果您等待 5 分钟，您应该会看到行：

```
SQL> select job_name, log_date, status from user_scheduler_job_log 
      WHERE job_name = 'THIS_IS_DA_NAME';

JOB_NAME        LOG_DATE                            STATUS
--------------- ----------------------------------- -------------
THIS_IS_DA_NAME 19-DEC-12 08.15.47.009921 AM -06:00 SUCCEEDED
THIS_IS_DA_NAME 19-DEC-12 08.16.47.009534 AM -06:00 SUCCEEDED 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:27:17.743

```
DBMS_SCHEDULER.enable ('THIS_IS_DA_NAME'); 
```

and then try your code or this:

```
begin
  dbms_scheduler.create_job(
      job_name => 'THIS_IS_DA_NAME',
      job_type => 'PLSQL_BLOCK',
      job_action => 'BEGIN PROC_MYSTOREDPROC; END;',
      start_date => sysdate + (5/(24*60)),
      repeat_interval => 'FREQ=MINUTELY; interval=1',
      enabled => TRUE,
      comments => 'Runtime: Every day every minute');
end; 
```

# ruby-on-rails - 在 application_helper 中创建自定义单选按钮助手

> ID：13949250
> 
> 赞同：0
> 
> 时间：2012-12-19T09:31:26.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我想通过 Bootstrap 创建自定义单选按钮。我做到了，但我想在 application_helper 中添加这个控件。

我目前的解决方案

```
<div class="btn-group" data-toggle="buttons-radio">
      <% @engines2.each do |e| %>
        <button type="button" class="btn <%= @car.engine_id == "#{e.id}".to_i ? 'active' : '' %>" data-toggle="button" onclick="javascript:document.getElementById('car_input_engine_id').value='<%= "#{e.id}" %>'">
            <%= "#{e.name}" %>
        </button>
      <% end %>
      <input type="hidden" id="car_input_engine_id" name="car[input_engine_id]" value="<%= @car.engine_id %>" />
 </div> 
```

## 预期用途

```
<%= form_for @car, :method => "post" do |f| %>
  <%= checkbox_bootstrap_tag(@engines2, @car.engine_id) %>
    <%= f.submit "Test Post", :class => "btn btn-inverse" %>
<% end %> 
```

## 帮手

```
 def checkbox_bootstrap_tag(engines, car_engine_id)   
    content_tag :div, :class=>"btn-group", "data-toggle"=>"buttons-radio" do
      engines.each do |e|
        content_tag :button, :type => :button,
        :class=>'btn #{car_engine_id == #{e.id}.to_i ? "active" : ""}',
        "data-toggle"=>"button", 
        :onclick=>"javascript:document.getElementById('car_input_engine_id').value=#{e.id}" do
           e.name       
        end
      end
      content_tag :input, :type => :hidden, :id=>"car_input_engine_id", :name=>"car[input_engine_id]", :value=>car_engine_id
    end
  end 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:42:01.840

看看这个片段：

```
 engines.each do |e|
    ...
  end 
```

它执行了某些操作，但结果正在消失，因为它后面还有一行：

```
content_tag :input, :type => :hidden, :id=>"car_input_engine_id", :name=>"car[input_engine_id]", :value=>car_engine_id 
```

所以你必须连接两个结果： of`engines.each ...`和这条线的结果。

而且我认为您打算`engines.map`改为`engines.each`：获取`button`-tags数组。

然后你必须修复这条线：

```
:class=>'btn #{car_engine_id == #{e.id}.to_i ? "active" : ""}', 
```

您正在尝试执行插值 ( `#{..}`)，但您将其包裹在单引号`'..'`中。如果您有一个带有混合单/双引号的字符串，您可以使用`%[ ... ]`（在哪里`[`是偏好问题，如果需要，您可以使用或其他括号）。`%{...}`

也不`content_tag`适合`input`。`input`标签必须有什么内容？对了，一点内容都没有！所以请改用简单的`tag`助手。

所以，这就是我得到的：

```
def checkbox_bootstrap_tag(engines, car_engine_id)   
  content_tag :div, :class=>"btn-group", "data-toggle"=>"buttons-radio" do
    engines_html = engines.map do |e|
        content_tag :button, 
          :type => :button,
          :class=> %[btn #{car_engine_id == e.id ? "active" : ""}], 
          :data => {:toggle => "button"},
          :onclick=> "javascript:document.getElementById('car_input_engine_id').value=#{e.id}" do
            e.name       
        end
      end
    safe_join(engines_html) +
      tag(:input, :type => :hidden, :id=>"car_input_engine_id", :name=>"car[input_engine_id]", :value=>car_engine_id)
  end
 end 
```

`safe_join`注意: 这个帮助器的用法对于将数组元素与 HTML 标记合并（在输出之前不转义它们）很有用。

还有`:data => {:toggle => "button"},`一部分必须告诉你 Rails 助手知道这个属性。

# jquery - jQuery mouseenter 和 fadeTo 问题

> ID：13949252
> 
> 赞同：1
> 
> 时间：2012-12-19T09:31:34.573
> 
> 标签：jquery

在阅读 jQuery In Action 书之前，我正在学习 codeacademy.com jQuery 课程，以便对 jQuery 有一个很好的了解，我已经完成了一部分并且代码不起作用，我不明白为什么。

我在这里创建了一个 jsFiddle [http://jsfiddle.net/weacY/](http://jsfiddle.net/weacY/)

这些是来自 codeacademy.com 的说明：

> 伟大的！接下来，让我们将 function 关键字和两个新动作组合在一起，mouseenter() 和 fadeTo()。
> 
> mouseenter() 做了您可能期望的事情：当您的鼠标进入给定的 HTML 元素时，它会产生变化。例如，
> 
> $(document).ready(function() { $('div').mouseenter(function() { $('div').hide(); }); }); 只要您将鼠标悬停在页面上，就会隐藏页面上的所有内容。（我们将在下一课中了解如何影响众多中的一个。）现在，我们只有一个，所以这个设置是可以的。
> 
> 然而，我们将把 fadeTo() 放在 mouseenter() 中，而不是 hide()。fadeTo() 在括号之间接受两个参数或输入，用逗号分隔：淡入淡出的速度和淡入淡出的不透明度（或透明度）。例如，
> 
> fadeTo('fast', 0.25); 会迅速将目标元素淡化到其原始不透明度的 25%，使其颜色非常浅。
> 
> 使用上面的例子，当你的鼠标进入'div'时，你的'div'会淡化为1（100％）不透明度。使动画速度“快”。（确保按顺序给fadeTo() 输入——速度，然后是不透明度。）
> 
> 将鼠标悬停在您的“div”上即可查看效果！

这是HTML：

```
<html>
 <head>
  <title>Button Magic</title>
  <link rel='stylesheet' type='text/css' href='stylesheet.css'/>
 </head>
 <body>
  <div><br/><strong>Click Me!</strong></div>
  <script>type="text/javascript" src="script.js"</script>
 </body>
</html>​ 
```

这是CSS：

```
div {
 height: 60px;
 width: 100px;
 border-radius: 5px;
 background-color: #69D2E7;
 text-align: center;
 color: #FFFFFF;
 font-family: Verdana, Arial, Sans-Serif;
 opacity: 0.5;
}​ 
```

最后是 jQuery：

```
$(document).ready(function() {
 $("div").mouseenter(function() {
  $("div").fadeTo("fast", 1);
 });
});​ 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T09:34:06.703

因为在 JSFiddle MooTools 库中是默认设置的。将其更改为 jQuery，它将起作用：

![在此处输入图像描述](../Images/366756970cffb82ec9f823ae31ecc357.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:37:28.613

您没有顶部的 jquery 插件：

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
<script>
    $(document).ready(function() {
        $("div").mouseenter(function() {
            $("div").fadeTo("fast", 1);
        });
    });
</script> 
```

在您的小提琴中，您没有从左侧下拉列表中选择 jQuery 插件。

看到这个小提琴：http: [//jsfiddle.net/weacY/2/](http://jsfiddle.net/weacY/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T09:34:02.257

你包括`Mootools`而不是`jQuery`小提琴。[这](http://jsfiddle.net/7vTfB/)是你的叉子。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T09:36:22.417

默认情况下，MooTools 库在加载 mootools 的 js 的小提琴中被选中。在onLoad选择框旁边选择jquery，它将加载jquery的js。

这是工作小提琴。

[http://jsfiddle.net/weacY/5/](http://jsfiddle.net/weacY/5/)

包括`jquery`，它会工作..

# android - 如何摆脱谷歌地图 v2 上的“转到我的位置图标”

> ID：13949255
> 
> 赞同：0
> 
> 时间：2012-12-19T09:31:45.157
> 
> 标签：android, google-maps-android-api-2

我想显示用户的当前位置，但屏幕右侧没有转到我的位置图标。

这是通过调用实现的：

```
mMap.setMyLocationEnabled(true) 
```

有没有类似于`MyLocationOverlay`来自`MapView`api的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:00:36.273

你的问题特别令人困惑。我将把它解释为“我如何摆脱'转到我的位置图标'”。

在这种情况下，请尝试调用`getUiSettings().setMyLocationButtonEnabled(false)`您的`GoogleMap`对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:45:46.157

您是否尝试过 animateto 功能

```
MapView mapView = (MapView) findViewById(R.id.mapView);
        MapController mc = mapView.getController();
        String coordinates[] = {"currentLat", "currentLat"};
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);

        p = new GeoPoint(
            (int) (lat * 1E6), 
            (int) (lng * 1E6));

        mc.animateTo(p);
        mc.setZoom(17);  //Your zoom level in int
        mapView.invalidate(); 
```

# bash - bash中的字符串比较不起作用

> ID：13949260
> 
> 赞同：8
> 
> 时间：2012-12-19T09:31:59.153
> 
> 标签：bash, shell

嗨，我是 bash 脚本的新手。刚刚写了这个简单的程序，但它抛出了错误。

```
#!/bin/bash
os=`uname -o`
echo $os
if ["$os"=="GNU/Linux"] ; then
    echo "Linux"
else
    echo "Windows"
fi 
```

在这两种情况下使用 == 或 -eq 我都会收到以下错误，它正在打印 else condn。

**./ostype.sh：第 3 行：[GNU/Linux==GNU/Linux]：没有这样的文件或目录**

**视窗**

Bash 版本：GNU bash，版本 3.2.48(1)-release (x86_64-suse-linux-gnu)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-19T09:34:39.810

尝试

```
if [ "$os" = "GNU/Linux" ] 
```

注意空格和单个`=`.

`[`实际上是一个程序，其余的都是参数！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-19T09:33:51.827

用于`=`字符串比较。见：[http ://tldp.org/LDP/abs/html/comparison-ops.html](http://tldp.org/LDP/abs/html/comparison-ops.html)

此外，方括号和比较运算符周围应该有一个空格，即

```
if [ "$os" = "GNU/Linux" ]; then 
  ^ ^     ^ ^           ^  
  | |     | |           |
   \-\-----\-\-----------\-- (need spaces here) 
```

# zend-framework2 - 如何启用 GoalioRememberMe（ZfcUser 的记住我功能）

> ID：13949262
> 
> 赞同：0
> 
> 时间：2012-12-19T09:32:03.083
> 
> 标签：zend-framework2, zfcuser

我正在尝试使用[https://github.com/goalio/GoalioRememberMe](https://github.com/goalio/GoalioRememberMe)为 Zend Framework 2 的“ZfcUser”模块获取“记住我”功能。

我为启用插件所做的工作：

在：/config/application.config.php 中添加 'GoalioRememberMe' 模式复制到：/config/autoload/goaliorememberme.global.php 数据库：import schema.sql

没有这种工作的迹象（登录页面上是否应该出现“记住我”复选框？ - 对我来说没有）（登录时也没有创建名为“remember_me”的cookie）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:29:37.533

我刚刚用更多文档更新了模块，并提供了一个添加复选框的示例登录页面。它会覆盖默认的 ZfcUser 登录视图，并且应该是您所期望的。

希望有帮助。如果您有任何其他问题，请给我留言，在 github 上打开问题或其他任何方式。将尝试尽快回答。

# valgrind - 使用 Valgrind 2.20 但需要 glibc 2.1 - 2.3 版本

> ID：13949268
> 
> 赞同：1
> 
> 时间：2012-12-19T09:32:17.270
> 
> 标签：valgrind, glibc

我想安装 valgrind 2.20。它需要 glibc 2.1-2.3 版本。我有 glibc2.11？我可以在配置文件中更改什么来解决问题？我试过这个链接[valgrind does not accept the latest version of glibc](https://stackoverflow.com/questions/10518734/valgrind-doesnt-accept-newest-version-of-glibc) 并粘贴了这个

```
{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 2.11 family" >&5
$as_echo "2.11 family" >&6; }
$as_echo "#define GLIBC_2_11 1" >>confdefs.h
DEFAULT_SUPP="glibc-2.X.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.34567-NPTL-helgrind.supp ${DEFAULT_SUPP}"
DEFAULT_SUPP="glibc-2.X-drd.supp ${DEFAULT_SUPP}"
;; 
```

但它显示相同的错误配置：错误：Valgrind 需要 glibc 版本 2.1、2.2 或 2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:35:23.450

> 我可以在配置文件中更改什么来解决问题？

这是 autoconf 中的一个错误，早已被修复。

只需编辑配置脚本即可删除 glibc 版本检查。

# android - 防止多次点击

> ID：13949271
> 
> 赞同：0
> 
> 时间：2012-12-19T09:32:25.050
> 
> 标签：android

这是我的自定义视图代码。我试图防止多次点击此 EditText 但它仍然打开两个 EditStatusActivity 屏幕。为什么？

```
 setOnClickListener(new OnClickListener() {          
        @Override
        public void onClick(final View v) {
            if(isClicked) {
                return;
            }               
            isClicked = true;
            setEnabled(false);
            setClickable(false);

            final Intent intent = new Intent(activity, EditStatusActivity.class);               
            intent.putExtra(STATUS, currentStatus);
            activity.startActivityForResult(intent, EDIT_STATUS_REQUEST_CODE);

            isClicked = false;
            setEnabled(true);
            setClickable(true);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T09:37:24.540

在 onActivityResult 方法上重置您的 isClicked 和 setEnabled

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);         
        isClicked = false;
        setEnabled(true); 
    } 
```

正如pablochan 所写：

> 该`startActivityForResult`方法是非阻塞的。这意味着，一旦您启动`EditStatusActivity`，您立即将 `isClickable`变量设置为 false，这就是您能够进行额外点击的原因。

您不应该`isClickable`在方法中设置为 true 或将其设置为 true `onActivityResult`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:49:03.760

我更喜欢另一种选择。

当您处理 Click 事件时，删除侦听器并将其恢复为 onResume。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:42:57.947

该`startActivityForResult`方法是非阻塞的。这意味着一旦您启动 EditStatusActivity，您会立即将`isClickable`变量设置为`false`，这就是您能够进行额外点击的原因。

您不应该`isClickable`在第一次单击后设置为 true，或者在[onActivityResult](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)方法中将其设置为 true。

# iphone - 显示用于录音的声波

> ID：13949277
> 
> 赞同：6
> 
> 时间：2012-12-19T09:32:40.680
> 
> 标签：iphone, objective-c, ipad, cocoa-touch, audio-recording

我们如何显示声波，如下图所示..

当用户说话时，黄色条将根据用户的音量进行动画处理。

![在此处输入图像描述](../Images/ec24e9437421613dfdd4305608507105.png)

我已经完成了[苹果演示](https://developer.apple.com/library/ios/#samplecode/aurioTouch/Introduction/Intro.html)，但没有得到任何东西。

请指导我.. 有可用的参考链接吗？有没有可用的示例教程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:18:59.280

通过 APPLE[检查这个示例项目。](https://developer.apple.com/library/ios/#samplecode/avTouch/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008636-Intro-DontLinkElementID_2)它包含与您的图像相同的音频表。

可能会有帮助。

# serialization - 为 Java 类生成 SerialVersionUID

> ID：13949278
> 
> 赞同：0
> 
> 时间：2012-12-19T09:32:45.657
> 
> 标签：serialization, code-generation

从标题上看，它应该是同一个老问题，但相信我，这是不同的。

我正在使用 EJB3，当然如果我必须远程调用它，我必须让我的所有数据对象都实现 Serializable 接口。

问题是我的大多数数据对象都是一次性生成（使用 Velocity 模板）、编译和打包的。现在我在每个类中硬编码了默认的serialVersionUID，如下所示；

```
private static final long serialVersionUID = 1L; 
```

但我想知道是否有任何方法可以跟随；

```
private static final long serialVersionUID = getSerialUID();
private static long getSerialUID() {
    // Serial Version Algo code here
} 
```

另外，使用 Default serialVersionUID 有什么问题吗？我真的需要使用 Algo 生成唯一 ID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:52:39.733

1.  使用 Default serialVersionUID 有什么问题吗？

    `serialVersionUID`除非您有多个版本的同一类，否则使用默认值没有问题。

    阅读： [什么是 serialVersionUID，我为什么要使用它？](https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it)

2.  我真的需要使用 Algo 生成唯一 ID 吗？

    答案再次是否定的。您不必使用任何算法生成唯一 ID。如果您有同一类的不同版本，那么您可以提供一个唯一编号作为 serialVersionUID（例如 serialVersionUID=123 和 serialVersionUID=456）

我强烈建议您阅读 Javadoc [java.io.Serializable](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:13:17.973

第一个答案很有帮助，但它没有告诉您如何生成类 serialVersionUID。我已经按如下方式完成了它，因为我的所有类都是由 Velocity Template 生成的，我必须在代码生成时获取它。所以我创建了一个方法来获取所有属性的 hashcode() 并将它们添加到最后以获取 serialVersionUID。例如;

```
public int getSerialVerionUID() {
    return getName().hashCode() + 
        getTypeName().hashCode() +
        getCardinality().hashCode() +
        getComplexity().hashCode();
} 
```

因此，一旦任何属性发生变化，我们就会拥有不同的 UID，这就是我们要寻找的一切。

希望这对某人有所帮助。

# android - 在设备上运行时没有这样的表错误，但在模拟器上相同的代码工作正常

> ID：13949280
> 
> 赞同：0
> 
> 时间：2012-12-19T09:32:48.207
> 
> 标签：android, sqlite

我有一个非常奇怪的问题，我正在编写一个从数据库获取数据以在 listView 中显示它的代码，所以我创建了一个用于获取数据库的类和另一个用于适配器的类。但是当我在设备上运行它时，我没有得到这样的表错误，尽管它在模拟器上运行良好。此外，我在同一个项目中使用另一个数据库尝试了这段代码，它正在工作。我向它们添加了 android_metadata 表，但仍然无法正常工作。

这是我的`db class`

```
public class Directory_DB extends SQLiteOpenHelper{

private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = ""; 
private static String DB_NAME ;// Database name
private SQLiteDatabase mDataBase; 
private final Context mContext;
private String TABLE_NAME;

public Directory_DB(Context context , String DB_NAME ) 
{
    super(context , DB_NAME, null , 2);// 1? its Database Version
    DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
    this.mContext = context;
    this.DB_NAME = DB_NAME;

}   

public void createDataBase() throws IOException
{
    //If database not exists copy it from the assets

    boolean mDataBaseExist = checkDataBase();
    if(!mDataBaseExist)
    {
        this.getReadableDatabase();
        this.close();
        try 
        {
            //Copy the database from assests
            copyDataBase();
            Log.e(TAG, "createDatabase database created");
        } 
        catch (IOException mIOException) 
        {
            throw new Error("ErrorCopyingDataBase");
        }
    }
}
    //Check that the database exists here: /data/data/your package/databases/Da Name
    private boolean checkDataBase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        Log.v("dbFile", dbFile + "   "+ dbFile.exists());
        return dbFile.exists();
    }

    //Copy the database from assets
    private void copyDataBase() throws IOException
    {
        InputStream mInput = mContext.getAssets().open(DB_NAME);
        String outFileName = DB_PATH + DB_NAME;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();
    }

    //Open the database, so we can query it
    public boolean openDataBase() throws SQLException
    {
        String mPath = DB_PATH + DB_NAME;
        //Log.v("mPath", mPath);
        mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        //mDataBase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        return mDataBase != null;
    }

    @Override
    public synchronized void close() 
    {
        if(mDataBase != null)
            mDataBase.close();
        super.close();
    }

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

} 
```

}

这是我的`adapter class`

```
public class DirectoryAdapter {
public static final String TAG_ID = "_id";
public static String TAG_TABLE_NAME;

protected static final String TAG = "DataAdapter";

private final Context mContext;
private SQLiteDatabase mDb;
private Directory_DB mDbHelper;

public DirectoryAdapter(Context context, String DB_NAME, String TABLE_NAME) {
    this.mContext = context;
    mDbHelper = new Directory_DB(mContext, DB_NAME );
    this.TAG_TABLE_NAME = TABLE_NAME;
    Log.d("Database name in adapter", DB_NAME);
    Log.d("Table name in adapter", TAG_TABLE_NAME);
}

public DirectoryAdapter createDatabase() throws SQLException {
    try {
        mDbHelper.createDataBase();
    } catch (IOException mIOException) {
        Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
        throw new Error("UnableToCreateDatabase");
    }
    return this;
}

public DirectoryAdapter open() throws SQLException {
    try {
        mDbHelper.openDataBase();
        mDbHelper.close();
        mDb = mDbHelper.getReadableDatabase();
    } catch (SQLException mSQLException) {
        Log.e(TAG, "open >>" + mSQLException.toString());
        throw mSQLException;
    }
    return this;
}

public void close() {
    mDbHelper.close();
}

public Cursor getTestData() {
    try {

        String sql = "SELECT * FROM " + TAG_TABLE_NAME;
        Cursor mCur = mDb.rawQuery(sql, null);

        return mCur;
    } catch (SQLException mSQLException) {
        Log.e(TAG, "getTestData >>" + mSQLException.toString());
        throw mSQLException;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:51:06.693

您可以从设备上卸载应用程序并再次运行它。如果您稍后在数据库中添加了一个表，它将不会反映，因为您的数据库已经创建并且只有在创建数据库时才会创建表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:15:26.060

您必须在 on create 方法中调用您的 createDataBase 方法

```
 @Override
 public void onCreate(SQLiteDatabase db) {
     // TODO Auto-generated method stub
 } 
```

这就是这个方法的用途。此外，如果您在其他任何地方调用它（我没有阅读您的整个代码），请不要这样做。

# mysql - mysql错误1054列未被请求或不存在

> ID：13949284
> 
> 赞同：1
> 
> 时间：2012-12-19T09:33:06.780
> 
> 标签：mysql, sql-update, field, mysql-error-1054

我有一个表，我正在尝试更新列名、密码并根据那里的电子邮件进行访问。
查询是：

```
Update everyone set name="name", pw="pass", accessed=CURDATE() where email="email"; 
```

因此，该表具有这些列名。

但是它会抛出 1054 错误，声称列用户不存在。有什么建议吗？
此外，此错误似乎仅在尝试更新时出现。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:02:43.527

尝试这个 ：

更新`everyone`集`name`="name", `pw`="pass", `accessed`=CURDATE() where `email`="email";

# java - Jdk 1.7 与 1.6 的向后兼容性

> ID：13949290
> 
> 赞同：-2
> 
> 时间：2012-12-19T09:33:24.550
> 
> 标签：java, backwards-compatibility

我有一个 GWT 应用程序，我想使用 hudson 创建一个 war 文件。所以我创建了一个作业，并在配置中检查了构建选项，即调用 ant。所以它使用我的应用程序中的 build.xml 并创建 war 文件。我的 ant 文件，即 build.xml 包含以下目标：

1.Java编译

2.GWT编译

3.制造战争

4.使用JDK 1.7.0将其部署到tomcat中

应用程序正在使用 jdk 1.6 编译并使用 jdk 1.7 将其部署到 tomcat 中，但它不工作。JDK 1.7.0 的tomcat 是否与1.6 兼容。?? 还是因为一些 gwt-dev,gwt-user jars 仍在 war 文件夹中，所以还有另一个问题。在我的 tomcat 日志中，有以下信息：

```
INFO: Deploying web application archive /usr/local/tomcat_lh/webapps/Nightly.war
Dec 19, 2012 10:13:41 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/usr/local/tomcat_lh/webapps/Nightly/WEB-INF/lib/gwt-dev.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Dec 19, 2012 10:13:41 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/usr/local/tomcat_lh/webapps/Nightly/WEB-INF/lib/gwt-user.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class 
```

2012 年 12 月 19 日上午 10:13:41 org.apache.catalina.loader.WebappClassLoader validateJarFile 信息：validateJarFile(/usr/local/tomcat_lh/webapps/Nightly/WEB-INF/lib/javax.servlet.jar) - jar 不是加载。请参阅 Servlet 规范 2.3，第 9.7.2 节。违规类：javax/servlet/Servlet.class 2012 年 12 月 19 日上午 10:13:41 org.apache.catalina.core.StandardContext startInternal SEVERE：错误 listenerStart

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:50:49.663

你做错事的可能性要大得多。

我怀疑如果你部署到 Java 6，你会看到同样的问题，如果不是完全相同的错误。唯一的区别可能是您会在堆栈跟踪中看到不同的行号。

仅供参考：Java 7 和 Java 6 最新版本的代码库非常相似，甚至有许多相同的错误。例如，这是 Java 7 中的一个众所周知的错误，当时它与循环优化有关，人们建议在迁移之前等待它修复。有趣的是这个 bug 也在 Java 6 中，唯一的区别是优化在 Java 7 中默认开启，而在 Java 6 中默认关闭。

顺便说一句：Java 7 中的大多数性能改进都被移植到 Java 6 中，因此使用 Java 7 的唯一充分理由是 a）您想使用新语法 b）您担心 Java 6 即将停产。

在您的情况下，目前可能没有充分的理由使用 Java 7。

# gcc - 如何将路径添加到 gcc 的搜索目录？

> ID：13949292
> 
> 赞同：0
> 
> 时间：2012-12-19T09:33:28.170
> 
> 标签：gcc

命令

```
gcc -print-search-dirs 
```

返回：

```
install: /usr/lib/gcc/i686-linux-gnu/4.6/
programs: =/usr/lib/gcc/i686-linux-gnu/4.6/:/usr/lib/gcc/i686-linux-gnu/4.6/:/usr/lib/gcc/i686-linux-gnu/:/usr/lib/gcc/i686-linux-gnu/4.6/:/usr/lib/gcc/i686-linux-gnu/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../../i686-linux-gnu/bin/i686-linux-gnu/4.6/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../../i686-linux-gnu/bin/i386-linux-gnu/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../../i686-linux-gnu/bin/
libraries: =/usr/lib/gcc/i686-linux-gnu/4.6/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../../i686-linux-gnu/lib/i686-linux-gnu/4.6/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../../i686-linux-gnu/lib/i386-linux-gnu/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../../i686-linux-gnu/lib/../lib/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../i686-linux-gnu/4.6/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../../lib/:/lib/i686-linux-gnu/4.6/:/lib/i386-linux-gnu/:/lib/../lib/:/usr/lib/i686-linux-gnu/4.6/:/usr/lib/i386-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../../i686-linux-gnu/lib/:/usr/lib/gcc/i686-linux-gnu/4.6/../../../:/lib/:/usr/lib/ 
```

如何向库部分添加其他路径？我想通过标志 -lmylib 而不是特定路径使我的自定义库可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:37:31.083

执行此操作的常用方法是将库安装到`/usr/lib`用户系统上。更改内置规范的唯一方法是使用自定义规范文件（不推荐！），这也需要一个额外的参数。

链接时将其安装到`/usr/lib`或将位置作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T23:12:01.727

您还可以复制显示的打印路径，并添加所需的路径元素并将其传递给`-B`选项。

# iphone - CAAnimation 的问题

> ID：13949295
> 
> 赞同：5
> 
> 时间：2012-12-19T09:33:37.397
> 
> 标签：iphone, objective-c, ios, uiview, core-animation

// 卡片类的头文件

```
#import "OWCardView.h"

@implementation OWCardView;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        self.layer.contents      = (id) [UIImage imageNamed:@"4.png"].CGImage;
        self.layer.shadowColor   = [UIColor whiteColor].CGColor;
        self.layer.shadowOpacity = 0.3;
    }
    return self;
}

- (void) moveCard:(float)xPoint along:(float)yPoint
{
    CGRect someRect = CGRectMake(xPoint, yPoint, 72, 96);

    [UIView animateWithDuration: 3.5
                          delay: 0.3
                        options: UIViewAnimationCurveEaseOut
                     animations: ^{ self.frame = someRect;}
                     completion: ^(BOOL finished) { }];
}

@end

// part of the Implementation in the view controller's viewDidLoad

[...]
     CGRect myImageRect = CGRectMake(20.0f, 20.0f, 72.0f, 96.0f);

     // myCard is a property of the viewController
     self.myCard = [[OWCardView alloc] initWithFrame:myImageRect];
     [self.view addSubview:self.myCard];
     [self.myCard moveCard: 240 along: 355];     // First call
     [self.myCard moveCard: 50 along: 355];      // Second call
     [self.myCard moveCard: 50 along: 50];       // Third call
[...] 
```

问题：只执行viewController中moveCard的最后一条消息；第一次和第二次调用不执行。代码有什么问题？

当我将第三条消息注释到 moveCard 时，第二个调用被执行，而第一个没有。如果我注释了第二个和第三个调用，则执行第一个调用。但我希望所有三个动画都出现在卡片上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:45:11.043

当您为视图设置动画时，您应用到该视图的任何先前动画都会立即取消，即使任一动画具有非零延迟。因此，如果要应用顺序动画，则必须在第一个动画结束后添加第二个动画。您可以使用完成块来检测第一个动画何时结束。

`moveCard:along:`维护目标矩形队列并按顺序应用动画非常容易：

```
@implementation OWCardView {
    NSMutableArray *pendingRects;
    BOOL isAnimating;
}

- (void)moveCard:(float)xPoint along:(float)yPoint {
    CGRect someRect = CGRectMake(xPoint, yPoint, 72, 96);
    if (!pendingRects) {
        pendingRects = [NSMutableArray array];
    }
    [pendingRects addObject:[NSValue valueWithCGRect:someRect]];
    [self startAnimatingIfNeeded];
}

- (void)startAnimatingIfNeeded {
    if (isAnimating)
        return;
    if (pendingRects.count == 0)
        return;
    CGRect rect = [[pendingRects objectAtIndex:0] CGRectValue];
    [pendingRects removeObjectAtIndex:0];

    isAnimating = YES;
    [UIView animateWithDuration:3.5 delay:0.3 options:UIViewAnimationCurveEaseOut animations:^{
        self.frame = rect;
    } completion:^(BOOL finished) {
        isAnimating = NO;
        [self startAnimatingIfNeeded];
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:39:49.643

您遇到的问题是动画是异步的。

在执行下一个动画之前，代码不会等待每个动画完成。所以它会通过前两个调用并立即开始第三个动画并取消前两个，这意味着你只会看到最后一个动画。

动画完成后，您必须使用已完成的块来执行某些操作。

简单的方法就是这样......

```
[UIView animateWithDuration: 3.5
                      delay: 0.3
                    options: UIViewAnimationCurveEaseOut
                 animations: ^{ self.frame = CGRectMake(240, 355, 72, 96);}
                 completion: ^(BOOL finished) {
    [UIView animateWithDuration: 3.5
                          delay: 0.3
                        options: UIViewAnimationCurveEaseOut
                     animations: ^{ self.frame = CGRectMake(50, 355, 72, 96);}
                     completion: ^(BOOL finished) {
        [UIView animateWithDuration: 3.5
                              delay: 0.3
                            options: UIViewAnimationCurveEaseOut
                         animations: ^{ self.frame = CGRectMake(50, 50, 72, 96);}
                         completion: ^(BOOL finished) {
            //All finished
        }];
    }];
}]; 
```

您可以将其放入某种递归函数中，但这样做可能更容易。

另一种选择是使用关键帧动画，您可以在其中逐步建立路径和时间，然后说“开始”，它将执行您建立的动画。

不过现在这可能更容易，我以前用过这种东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:41:54.460

第三个动画覆盖第一个和第二个

你可以用这个

> ```
> - (void) moveCard:(CGPoint)Point1 point2:(CGPoint)Point2 point3:(CGPoint)Point3
> {
>     CGRect someRect = CGRectMake(Point2.x, Point2.y, 72, 96);
> 
>     [UIView animateWithDuration: 3.5
>                           delay: 0.3
>                         options: UIViewAnimationCurveEaseOut
>                      animations: ^{ self.frame = someRect;}
>                      completion: ^(BOOL finished) {
>                          someRect = CGRectMake(Point2.x, Point2.y, 72, 96);
>                          [UIView animateWithDuration: 3.5
>                                                delay: 0.3
>                                              options: UIViewAnimationCurveEaseOut
>                                           animations: ^{ self.frame = someRect;}
>                                           completion: ^(BOOL finished) {
> 
>                                               someRect = CGRectMake(Point3.x, Point3.y, 72, 96);
>                                               [UIView animateWithDuration: 3.5
>                                                                     delay: 0.3
>                                                                   options: UIViewAnimationCurveEaseOut
>                                                                animations: ^{ self.frame = someRect;}
>                                                                completion: ^(BOOL finished) {
> 
>                                                                }];
> 
>                                           }];
> 
>                      }];
> } 
> ```

# jquery - 检查文本框中的值是否使用 jquery 选择

> ID：13949302
> 
> 赞同：20
> 
> 时间：2012-12-19T09:33:56.300
> 
> 标签：jquery, jquery-selectors

> **可能重复：**
> [使用 jQuery 检查复选框选中的属性](https://stackoverflow.com/questions/901712/check-checkbox-checked-property-using-jquery)

谁能让我知道如何使用 jquery 检查在 html 文本框中选择的值。例如，如果选择文本框中的值，则文本将被选择为蓝色背景。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T09:37:40.420

看到这个：http: [//jsfiddle.net/rT5vR/](http://jsfiddle.net/rT5vR/)

```
var t = '';
if(window.getSelection) {
    t = window.getSelection();
} else if(document.getSelection) {
    t = document.getSelection();
} else if(document.selection) {
    t = document.selection.createRange().text;
}
return t;
}

$("#myElement").select(function(eventObject) {
alert(getSelected().toString());
}); 
```

或

```
$('#myElement').select(function(e) {
var start = e.target.selectionStart;
var end = e.target.selectionEnd;
alert($('#myElement').val().substring(start, end));
}); 
```

​</p>

第二个是完美的。不知道第一个是多少跨浏览器... ​</p>

# c# - 如何更改默认的 WindowsPhone 8 日历

> ID：13949308
> 
> 赞同：1
> 
> 时间：2012-12-19T09:34:12.147
> 
> 标签：c#, sdk, calendar, windows-phone, windows-phone-8

我知道**windowsphone core**的某些部分有限制，我完全理解为什么要设置这些限制。但是由于我的**语言环境需要**，我必须将默认日历更改为**Jalali (Persian) calendar**。

到目前为止，有不同的应用程序提供简单或复杂的**Jalali 日历**，但它们都不能**更改 windowsPhone 8 的内部日历**。

它的更改有助于我们**在所有应用程序中使用 Jalali 日历，**所以我想知道**是否可以将默认的 WindowsPhone 8 日历更改为我的本地日历？**

**我怎样才能做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:38:28.273

这是不可能的。Windows Phone API 不提供与系统的这种级别的交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:56:08.933

我很困惑你在这里要求什么。如果您询问消费者问题，请使用相应的消费者支持渠道（http://support.microsoft.com、http: [//www.nokia.com/global/support/](http://www.nokia.com/global/support/)等）。假设您已向开发人员提出问题，我将继续回答。

1.  您无法从应用程序更改操作系统日期、时间或区域设置。您也许可以启动一些设置屏幕，但仅此而已。

2.  您可以在应用程序中使用 System.Globalization 中的“日历”来实现非公历日历的灵活性。您可以[在此处](http://msdn.microsoft.com/en-us/library/82aak18x.aspx)阅读更多相关信息。例如，[HijriCalendar](http://msdn.microsoft.com/en-us/library/system.globalization.hijricalendar%28v=vs.95%29.aspx)类应该为您提供足够的本地化数据。不幸的是， WP7/WP8 不支持[PersianCalendar](http://msdn.microsoft.com/en-us/library/system.globalization.persiancalendar%28v=vs.95%29.aspx)类，因为它是在 Silverlight 5 中添加的，而 WP7/WP8 是基于 Silverlight 4 的。请随意打开用户[声音](http://wpdev.uservoice.com/forums/110705-app-platform)建议，在未来的版本中支持该类。

# php - 如何根据其电子邮件地址回显不同的链接地址？

> ID：13949313
> 
> 赞同：0
> 
> 时间：2012-12-19T09:34:31.450
> 
> 标签：php, optimization, hyperlink

所以，我在注册表中有这种情况：

```
<p>Here is your email: <?php echo '<a href="link here">'.$_SESSION['email'].'</a>'; ?></p> 
```

现在对于`href=""`我需要为每个不同的文本回显不同的链接`$_SESSION['email']`。

是否可以从服务器请求链接，或从每个不同的电子邮件公司请求服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:37:43.110

只是这个：

```
<?php 
  echo '<a href="mailto:'.$_SESSION['email'].'">'.$_SESSION['email'].'</a>';
?> 
```

# driver - 我想学习驱动程序开发，那么如何开始呢？

> ID：13949321
> 
> 赞同：0
> 
> 时间：2012-12-19T09:34:50.247
> 
> 标签：driver, linux-device-driver, device-driver

我想学习设备驱动程序开发所以如何开始？有适合初学者的媒体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:49:18.943

规范的参考是[Linux Device Drivers 3rd Edition——](http://lwn.net/Kernel/LDD3/)虽然它现在已经有几年的历史了，但它已经足够接近当前的内核了。

这里没有涵盖很多东西——尤其是任何特定于设备或总线的东西，或者内核在过去几年中为支持 ARM SoC 设备而开发的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:13:21.347

我建议开始在 PC 环境下学习 Linux 设备驱动程序，这样您就可以共同关联您熟悉的大部分内容，一种方法是获取 linux 源代码并尝试了解内核是如何被调用的以及如何单用户空间进程是从内核空间启动的。您也可以按照下面的给定页面进行操作，这将对您有所帮助。

[http://en.wikiversity.org/wiki/Reading_the_Linux_Kernel_Sources](http://en.wikiversity.org/wiki/Reading_the_Linux_Kernel_Sources)

# mysql - MySQL -> 为具有给定模式的 DATE_FORMAT 函数创建别名

> ID：13949324
> 
> 赞同：2
> 
> 时间：2012-12-19T09:35:05.643
> 
> 标签：mysql

我只是想知道是否可以执行以下操作：

```
CREATE ALIAS SOLR_DATE_FORMAT FOR DATE_FORMAT(date_val,'%Y-%m-%dT%TZ') 
```

`DATE_FORMAT(date_val,'%Y-%m-%dT%TZ')`存在于 MySQL 中，但我想给它另一个名称并使其成为一个参数函数，因为在我的单元测试中，我使用另一个 DB (H2)，我在其上定义了这样一个`SOLR_DATE_FORMAT`函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:40:27.997

您可以创建[自己的功能](http://dev.mysql.com/doc/refman/5.6/en/create-function.html)：

```
DELIMITER $$
create function SOLR_DATE_FORMAT( date_val ) 
returns char(20)
begin
   return DATE_FORMAT(date_val,'%Y-%m-%dT%TZ');
end$$
DELIMITER ; 
```

**EDITED**固定返回类型。谢谢蛋！

# linux - 在 RHEL 6 x64 中配置网络音频系统 [NAS] 时出错

> ID：13949327
> 
> 赞同：3
> 
> 时间：2012-12-19T09:35:22.557
> 
> 标签：linux, qt, audio, redhat

我尝试通过两种方法在 RHEL 6 中设置 NAS（网络音频系统）：

首先，通过 RPM 安装，

```
[root@localhost ~]# rpm -Uvh nas-1.9.2-1.el6.x86_64.rpm nas-libs-1.9.2-1.el6.x86_64.rpm 
```

它已安装，但我在 /etc/init.d/ 目录中找不到该服务。只有 /etc/nas/nasd.conf 文件被创建。如果我运行命令

```
[root@localhost ~]# nasd
Network Audio System Release 1.9.2
Network Audio System Release 1.9.2
Init: Output open(/dev/dsp) failed: No such file or directory

Fatal server error:
could not create audio connection block info 
```

其次，通过配置 NAS 站点提供的最新 tar-ball **nas-1.9.3.src.tar.gz**。但问题是一样的。

请帮助我正确安装它，因为我想为基于 qt 的应用程序启用音频，并且 qt 使用 NAS 来实现其音频功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:37:54.477

NAS尝试了很多，但没有成功解决我的问题。

然后我使用 Phonon 库来解决声音问题！

无论如何，谢谢你帮助我！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T13:48:37.023

好的。好吧，已经有一段时间了，但是...

您没有足够的权限来打开底层套接字。

我@dev $ strace -o ./nasd.txt nasd -aa -config ./nasd.conf

```
Network Audio System Release 1.9.3
Network Audio System Release 1.9.3
Error binding unix socket: /var/run/nasd/audio0
: Address already in use

Fatal server error:
Cannot establish unix listening socket 
```

适当的位来自 strace

```
ioctl(0, SIOCGIFCONF, {96, {{"lo", {AF_INET, inet_addr("127.0.0.1")}}, {"wlan0", {AF_INET, inet_addr("192.168.1.69")}}, {"usb0", {AF_INET, inet_addr("192.168.15.100")}}}}) = 0
umask(0)                                = 022
mkdir("/var/run/nasd", 0777)            = -1 EEXIST (File exists)
unlink("/var/run/nasd/audio0")          = -1 EPERM (Operation not permitted)
socket(PF_FILE, SOCK_STREAM, 0)         = 1
bind(1, {sa_family=AF_FILE, path="/var/run/nasd/audio0"}, 22) = -1 EADDRINUSE (Address already in use) 
```

unlink("/var/run/nasd/audio0") = -1 EPERM (Operation not allowed) 是线索。

如果我们在本地复制 nasd.conf 并将调试值调整为 1 并以 root 身份运行它

我@dev $ sudo nasd -aa -config ./nasd.conf

```
config: Maxfrags set to 3
config: Minfrags set to 2
config: Fragsize set to 256
config: Maxfrags set to 3
config: Minfrags set to 2
config: Fragsize set to 256
Network Audio System Release 1.9.3
Network Audio System Release 1.9.3
AuInitPhysicalDevices();
Init: will close device when finished with stream.
Init: will keep mixer device open.
Init: Leaving the mixer device options alone at startup.
Init: openDevice OUT /dev/snd/pcmC1D0p mode 1
Init: openDevice(1) IN /dev/snd/pcmC1D0c mode 0
setupSoundcard(...);
++ Setting up Output device (/dev/snd/pcmC1D0p)
+++ requesting wordsize of 16, got 8
+++ requesting 2 channel(s), got 1 channel(s)
+++ Requesting minimum sample rate of 5000, got 5000
+++ Requesting maximum sample rate of 44100, got 44100
setupSoundcard(...);
++ Setting up Input device (/dev/snd/pcmC1D0c)
+++ requesting wordsize of 8, got 8
+++ requesting 2 channel(s), got 1 channel(s)
+++ Requesting minimum sample rate of 4000, got 4000
+++ Requesting maximum sample rate of 44100, got 44100
initMixer: could not open output mixer device /dev/mixer: No such file or directory
Init: initMixer failed
createServerComponents(...);
closeDevice: out
closeDevice OUT /dev/snd/pcmC1D0p mode 1
closeDevice: in
closeDevice IN /dev/snd/pcmC1D0c mode 0
closeDevice: mixer
closeDevice: leaving mixer device(s) open 
```

在我的情况下，看起来我需要设置混音器部分，但这应该会削弱*你的*错误。

编辑：`initMixer: could not open output mixer device /dev/mixer: No such file or directory` 这可以通过放置`mixer =""`在 nasd.conf 中来解决（即使文档声明它不会被尊重，它是）

另外：记得设置您的 AUDIOSERVER 环境变量

```
export AUDIOSERVER=tcp/localhost:8000 
```

是默认设置，但确定永远不会伤害...

最后的想法：

默认情况下，现在有许多 x 服务器`-nolisten tcp`，这可能是实施中需要考虑的问题。

nmap 是你的朋友。

而且，为了记录，我实际上还没有一个端到端的系统工作......希望其他一些善良的灵魂会加入并指出我错过的任何东西。

希望能帮助到你。

我没有 rhel 盒子……但这*可能*是同一个烫发问题。文档充其量是“瘦”

# c - 程序收到信号 sigtstp 停止（用户）

> ID：13949336
> 
> 赞同：2
> 
> 时间：2012-12-19T09:35:50.113
> 
> 标签：c, linux

> **可能重复：**
> [C 编程语言中的 EOF 是什么？](https://stackoverflow.com/questions/1782080/what-is-eof-in-the-c-programming-language)

当我学习 K&R C 编程语言时，我正在尝试编写一个程序，它从控制台读取一些行，然后输出所有输入。我需要使用 ctrl-z (EOF) 来终止我的输入流。但问题是当我点击 ctrl-z 时，程序停止，所有输入都无法输出到控制台（gdb 显示“程序收到信号 SIGTSTP，停止（用户）。__kernel_vsyscall() 中的 0X00132416”）。我尝试使用 kill 函数来处理这个终止信号但失败了。我该怎么做才能使控制台输出所有输入行。我的部分代码如下：

```
#include<stdio.h>
#include<string.h>

#define MAXLINES   5000     /* possibly max amount of lines */
char *lineptr[MAXLINES];    /* pointers to lines read */

int readlines(char *lineptr[], int nlines);
void writelines(char *lineptr[], int nlines);

main(int argc, char *argv[])
{
    int nlines;         /* number of lines read */

    **if ((nlines = readlines(lineptr, MAXLINES)) >= 0)** {//program finished when I tap ctrl-z 

    writelines(lineptr, nlines);            // from this line can't be run   
    return 0;
    } else {
    printf("input too big to sort\n");
    return 1;
    }
}

#define MAXLEN 1000
int get_line(char *, int);
char *alloc(int);

/* readlines : read the input */
int readlines(char *lineptr[], int maxlines)
{
    int len, nlines;
    char *p, line[MAXLEN];
    nlines = 0;
    while ((len = get_line(line, MAXLEN)) > 0)
    if (nlines >= maxlines || (p = alloc(len)) == NULL)
        return -1;
    else {
        line[len - 1] = '\0';
        strcpy(p, line);
        lineptr[nlines++] = p;
    }
    return nlines;
}

/* writelines : output the readlines */
void writelines(char *lineptr[], int nlines)
{
    int i;

    for (i = 0; i < nlines; i++)
    printf("%s\n", lineptr[i]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:02:52.683

如果您在 linux/unix 平台上工作，ctrl-z 会暂停程序，程序会收到 SIGSTOP 而不是 EOF。EOF 通常是 ctrl-D。运行 stty -a 命令设置/更改终端线路设置。如果您必须使用 ctrl-z 更改 stty 设置。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:45:18.153

`Ctrl`+`Z`在大多数 Linux 终端上发送挂起信号。在 Linux 上，EOF 通常是`Ctrl`+ `D`。

`Ctrl`+`Z`是 Windows 上的 EOF。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:01:42.797

因为在 Linux 上，Ctrl+D 是 EOF 标记，而不是 Ctrl+Z，它将向进程发送 SIGSTP。

因此，当您真正想要的是输入 EOF 字符时，您基本上是在每次按下 Ctrl+Z 时都要求您的进程停止。

# drupal - 关闭 JavaScript 验证

> ID：13949339
> 
> 赞同：1
> 
> 时间：2012-12-19T09:35:56.303
> 
> 标签：drupal, drupal-7, drupal-webform, drupal-form-validation

我正在使用 Webform 和[内联表单错误](https://drupal.org/project/ife)模块，并且我想要内联验证。

但是，开箱即用，Webform 模块似乎有一些 JavaScript 验证，我想将其关闭。

我怎样才能做到这一点？

# c# - 运行 Windows 窗体应用程序时出现 ActivationException

> ID：13949340
> 
> 赞同：1
> 
> 时间：2012-12-19T09:35:56.600
> 
> 标签：c#, .net, unity-container, enterprise-library

我有一个 Windows 窗体应用程序，当我将它安装在我的本地计算机上时，它给出了以下错误：-

> Microsoft.Practices.ServiceLocation.ActivationException：尝试获取 LogWriter 类型的实例时发生激活错误，键“”---> Microsoft.Practices.Unity.ResolutionFailedException：依赖项解析失败，类型 =“Microsoft.Practices.EnterpriseLibrary。 Logging.LogWriter", name = "(none)"。异常发生时：解决时。异常是： InvalidOperationException - 无法构造类型 LogWriter。您必须配置容器以提供此值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T03:09:19.777

Have you included the EnterpriseLibraryCoreExtension in your Unity configuration, either via XML or by code? That's the piece that knows how to read the Entlib logging configuration and turn it into container registrations.

# c# - 单击后退按钮时存在 MVC3 TempData

> ID：13949341
> 
> 赞同：8
> 
> 时间：2012-12-19T09:36:10.787
> 
> 标签：c#, asp.net-mvc

我正在使用 TempData 传递其他消息以显示跨请求的通知：

```
 public ActionResult Address()
            TempData["NotificationType"] = "error";
            TempData["NotificationMessage"] = "There was an error updating the address.";
            return RedirectToAction("Index", "Home");
    }

    public ActionResult Index()
    {          

        if (TempData["NotificationType"] != null && TempData["NotificationMessage"] != null)
        {
            model.NotificationMessage = TempData["NotificationMessage"].ToString();
            model.NotificationType = TempData["NotificationType"].ToString();
        }
     return View();
    } 
```

索引视图：

```
<div id="NotificationType" data-notification_type="@Model.NotificationType"/>
<div id="NotificationMessage" data-notification_message="@Model.NotificationMessage" />

<script type=text/javascript>
if($('#NotificationType').data('notification_type') == 'error'){
    Notify('error', "Error!", $('#NotificationMessage').data('notification_message'));
    }
</script> 
```

然后我在视图中显示错误通知，效果很好。如果我单击另一个链接然后按浏览器中的后退按钮，通知会再次显示，我的问题就出现了。

有没有办法阻止通知重新显示？

**编辑：**看起来是因为它缓存了索引视图，因为当我点击后退按钮时它没有在操作中遇到断点。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T09:44:16.673

通过防止在索引视图上缓存来解决此问题：

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public ActionResult Index() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T11:06:37.720

对于 .net core 3.0 或更高版本，您可以在索引视图中使用它

```
[ResponseCache(Duration = 30, NoStore = true)]
public ActionResult Index()
{
  //Your code here..
} 
```

快乐编码。

# entity-framework - 按查询分组并按最大日期过滤

> ID：13949343
> 
> 赞同：1
> 
> 时间：2012-12-19T09:36:11.643
> 
> 标签：entity-framework, group-by, max

我试图让我的表的实体按 ID 分组并按 MAX 日期过滤，但我无法使用 Entity Framework 来做到这一点。

```
SELECT * FROM My_table UI
INNER JOIN 
  (
    SELECT idgroup, MAX(filter_date) AS DateFilter FROM My_table 
    WHERE license = 1
    GROUP BY idgroup
  ) T 
  ON T.idgroup= UI.idgroup AND T.DateFilter = UI.filter_date
  WHERE license = 1 
```

我现在的解决方案是 StoredProcedure，但我认为这可以通过 EF 实现，但我不知道该怎么做。

**任何人都知道如何使用 EF 语句来做到这一点？**

My_table 已在我的项目中映射为 EF 实体。

# hadoop - 从站无法连接到主站并在hadoop中启动tasktracker或datanode

> ID：13949350
> 
> 赞同：4
> 
> 时间：2012-12-19T09:36:26.730
> 
> 标签：hadoop, master-slave, task-tracking

我正在使用一个 2 节点完全分布式的 hadoop 集群。我正在尝试连接 tasktracker 以在从节点上运行，但它无法连接到我的 9000/9001 端口。以下是配置文件，如果有人发现了什么，请大声喊叫！

来自 Tasktracker 的错误消息（在 master 上使用 start-all 运行）

```
2012-12-19 09:33:03,161 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2012-12-19 09:33:03,316 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2012-12-19 09:33:03,320 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2012-12-19 09:33:03,320 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: TaskTracker metrics system started
2012-12-19 09:33:03,888 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2012-12-19 09:33:04,502 INFO org.mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
2012-12-19 09:33:04,755 INFO org.apache.hadoop.http.HttpServer: Added global filtersafety (class=org.apache.hadoop.http.HttpServer$QuotingInputFilter)
2012-12-19 09:33:04,799 INFO org.apache.hadoop.mapred.TaskLogsTruncater: Initializing logs' truncater with mapRetainSize=-1 and reduceRetainSize=-1
2012-12-19 09:33:04,807 INFO org.apache.hadoop.mapred.TaskTracker: Starting tasktracker with owner as hadoop
2012-12-19 09:33:04,813 INFO org.apache.hadoop.mapred.TaskTracker: Good mapred local directories are: /tmp/hadoop-hadoop/mapred/local
2012-12-19 09:33:04,826 INFO org.apache.hadoop.util.NativeCodeLoader: Loaded the native-hadoop library
2012-12-19 09:33:04,856 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered.
2012-12-19 09:33:04,857 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source TaskTrackerMetrics registered.
2012-12-19 09:33:04,920 INFO org.apache.hadoop.ipc.Server: Starting SocketReader
2012-12-19 09:33:04,923 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcDetailedActivityForPort38644 registered.
2012-12-19 09:33:04,926 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcActivityForPort38644 registered.
2012-12-19 09:33:04,929 INFO org.apache.hadoop.ipc.Server: IPC Server Responder: starting
2012-12-19 09:33:04,931 INFO org.apache.hadoop.ipc.Server: IPC Server listener on 38644: starting
2012-12-19 09:33:04,931 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 38644: starting
2012-12-19 09:33:04,932 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 38644: starting
2012-12-19 09:33:04,932 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 38644: starting
2012-12-19 09:33:04,933 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 38644: starting
2012-12-19 09:33:04,935 INFO org.apache.hadoop.mapred.TaskTracker: TaskTracker up at: localhost/127.0.0.1:38644
2012-12-19 09:33:04,935 INFO org.apache.hadoop.mapred.TaskTracker: Starting tracker tracker_10.77.26.116:localhost/127.0.0.1:38644
2012-12-19 09:33:05,980 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 0 time(s).
2012-12-19 09:33:06,982 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 1 time(s).
2012-12-19 09:33:07,985 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 2 time(s).
2012-12-19 09:33:08,987 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 3 time(s).
2012-12-19 09:33:09,989 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 4 time(s).
2012-12-19 09:33:10,991 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 5 time(s).
2012-12-19 09:33:11,994 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 6 time(s).
2012-12-19 09:33:12,996 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 7 time(s).
2012-12-19 09:33:13,998 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 8 time(s).
2012-12-19 09:33:15,001 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 9 time(s).
2012-12-19 09:33:15,004 INFO org.apache.hadoop.ipc.RPC: Server at ipdiscovermaster.cloudapp.net/168.63.72.148:9001 not available yet, Zzzzz...
2012-12-19 09:33:17,009 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 0 time(s).
2012-12-19 09:33:18,011 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 1 time(s).
2012-12-19 09:33:19,013 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 2 time(s).
2012-12-19 09:33:20,015 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 3 time(s).
2012-12-19 09:33:21,018 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 4 time(s).
2012-12-19 09:33:22,020 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 5 time(s).
2012-12-19 09:33:23,022 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 6 time(s).
2012-12-19 09:33:24,026 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 7 time(s).
2012-12-19 09:33:25,033 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 8 time(s).
2012-12-19 09:33:26,036 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 9 time(s).
2012-12-19 09:33:26,039 INFO org.apache.hadoop.ipc.RPC: Server at ipdiscovermaster.cloudapp.net/168.63.72.148:9001 not available yet, Zzzzz...
2012-12-19 09:33:28,044 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 0 time(s).
2012-12-19 09:33:29,045 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 1 time(s).
2012-12-19 09:33:30,048 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 2 time(s).
2012-12-19 09:33:31,051 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 3 time(s).
2012-12-19 09:33:32,055 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 4 time(s).
2012-12-19 09:33:33,057 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 5 time(s).
2012-12-19 09:33:34,060 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 6 time(s).
2012-12-19 09:33:35,063 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 7 time(s).
2012-12-19 09:33:36,071 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 8 time(s).
2012-12-19 09:33:37,073 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 9 time(s).
2012-12-19 09:33:37,083 INFO org.apache.hadoop.ipc.RPC: Server at ipdiscovermaster.cloudapp.net/168.63.72.148:9001 not available yet, Zzzzz...
2012-12-19 09:33:39,086 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 0 time(s).
2012-12-19 09:33:40,094 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 1 time(s).
2012-12-19 09:33:41,097 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 2 time(s).
2012-12-19 09:33:42,101 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 3 time(s).
2012-12-19 09:33:43,104 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 4 time(s).
2012-12-19 09:33:44,107 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 5 time(s).
2012-12-19 09:33:45,113 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 6 time(s).
2012-12-19 09:33:46,118 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 7 time(s).
2012-12-19 09:33:47,122 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 8 time(s).
2012-12-19 09:33:48,131 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 9 time(s).
2012-12-19 09:33:48,134 INFO org.apache.hadoop.ipc.RPC: Server at ipdiscovermaster.cloudapp.net/168.63.72.148:9001 not available yet, Zzzzz...
2012-12-19 09:33:50,137 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 0 time(s).
2012-12-19 09:33:51,140 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 1 time(s).
2012-12-19 09:33:52,143 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 2 time(s).
2012-12-19 09:33:53,145 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 3 time(s).
2012-12-19 09:33:54,148 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 4 time(s).
2012-12-19 09:33:55,151 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 5 time(s).
2012-12-19 09:33:56,154 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 6 time(s).
2012-12-19 09:33:57,158 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 7 time(s).
2012-12-19 09:33:58,161 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 8 time(s).
2012-12-19 09:33:59,167 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 9 time(s).
2012-12-19 09:33:59,169 INFO org.apache.hadoop.ipc.RPC: Server at ipdiscovermaster.cloudapp.net/168.63.72.148:9001 not available yet, Zzzzz...
2012-12-19 09:34:01,173 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 0 time(s).
2012-12-19 09:34:02,175 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 1 time(s).
2012-12-19 09:34:03,178 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 2 time(s).
2012-12-19 09:34:04,181 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 3 time(s).
2012-12-19 09:34:05,183 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 4 time(s).
2012-12-19 09:34:06,189 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 5 time(s).
2012-12-19 09:34:07,191 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 6 time(s).
2012-12-19 09:34:08,193 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 7 time(s).
2012-12-19 09:34:09,195 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 8 time(s).
2012-12-19 09:34:10,196 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 9 time(s).
2012-12-19 09:34:10,199 INFO org.apache.hadoop.ipc.RPC: Server at ipdiscovermaster.cloudapp.net/168.63.72.148:9001 not available yet, Zzzzz...
2012-12-19 09:34:12,203 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: ipdiscovermaster.cloudapp.net/168.63.72.148:9001\. Already tried 0 time(s). 
```

MASTER主机文件

```
#127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
#::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
#10.77.42.2 ipdiscovermaster.cloudapp.net
ipdiscoverreg1.cloudapp.net
#10.76.174.108 ipdiscoverreg1.cloudapp.net
ipdiscovermaster.cloudapp.net 
```

MASTER core-site.xml

```
<configuration>
<property>
<name>fs.default.name</name>
<value>hdfs://ipdiscovermaster.cloudapp.net:9000</value>
</property>
</configuration> 
```

MASTER mapred-site.xml

```
<configuration>
<property>
<name>mapred.job.tracker</name>
<value>ipdiscovermaster.cloudapp.net:9001</value>
</property>
</configuration> 
```

MASTER 主文件

```
ipdiscovermaster.cloudapp.net 
```

主从文件

```
ipdiscovermaster.cloudapp.net
ipdiscoverreg1.cloudapp.net 
```

从主机文件

```
#127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
#::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
#10.77.42.2 ipdiscovermaster.cloudapp.net
ipdiscoverreg1.cloudapp.net
ipdiscovermaster.cloudapp.net
#10.76.174.108 ipdiscoverreg1.cloudapp.net 
```

SLAVE core-site.xml

```
 <configuration>
<property>
<name>fs.default.name</name>
<value>hdfs://ipdiscovermaster.cloudapp.net:9000</value>
</property>
</configuration> 
```

SLAVE mapred-site.xml

```
<configuration>
<property>
<name>mapred.job.tracker</name>
<value>ipdiscovermaster.cloudapp.net:9001</value>
</property>
</configuration> 
```

SLAVE 主文件

```
ipdiscovermaster.cloudapp.net 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T11:39:53.640

您需要检查以下可能性

我很有趣，你检查了 Datanode 上的日志（192.168.135.111 slave01）这是最好的方法去得到确切的错误

如果您已格式化 nameNode

```
 i)delete temp data folder ..
 ii)recreate it 
 iii)give all the permission to temp folder
 iv)format namenode
 v)start hadoop cluster 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:02:59.010

将从机的 IP 和主机名添加到主机的 /etc/hosts 文件中，反之亦然。此外，在 hdfs-site.xml 文件中添加 dfs.data.dir 和 dfs.name.dir 属性。这些值默认为 /temp，它在重新启动时被清空。因此，您可能会丢失信息并在机器重启时遇到一些问题。确保您有正确的名称解析，因为这对于正确的 hadoop 功能非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T10:54:07.367

我有类似的问题。日志只显示“重试连接到服务器 XXX”。这是我为解决这个问题所做的。只需修改主节点和从节点`/etc/hosts`文件，特别是它自己的主机名和相应的 IP。**不要将主机名与 127.0.0.1 绑定**：

master中的原始hosts文件：

```
127.0.0.1  master

192.168.135.111 slave01 
```

从站中的原始主机文件：

```
192.168.135.110 master

127.0.0.1 slave01 
```

**已解析**主机中的主机文件：

```
**192.168.135.110** master

192.168.135.111 slave 
```

**解析**slave中的hosts文件：

```
192.168.135.110 master

**192.168.135.111** slave 
```

# php - 如何从网站访问者的计算机上自动获取“iTunes Music Library.xml”？

> ID：13949351
> 
> 赞同：0
> 
> 时间：2012-12-19T09:36:36.057
> 
> 标签：php, xml, web, itunes, social-networking

我目前正在构建一个社交网站，用于跟踪用户在他/她的 iTunes 库中拥有的艺术家。我计划通过获取和解析与用户库关联的 .xml 文件来做到这一点。每次他/她想更新他们的艺术家列表时，我都可以提示用户重新上传 .xml 文件，但我想知道是否有办法在每次用户访问/登录时自动完成上传?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:42:45.363

您可以创建一个 Java 小程序。那将具有本地文件访问权限。但是，用户需要允许您运行它，但这可能是一个选项。

[http://www.developer.com/java/data/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm](http://www.developer.com/java/data/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm)

# php - PHP 致命错误 - 内存不足 - 试图分配 4294967293 字节

> ID：13949352
> 
> 赞同：-1
> 
> 时间：2012-12-19T09:36:38.627
> 
> 标签：php, sql, memory-management

我有一个从 SQL DB 获取数据的 PHP 函数。有时我在执行 odbc_result 时遇到这个致命错误

*   从 60 步到第 30 步 | 内存 191908
*   第 31 步从 60 | 内存 191908
*   第 32 步从 60 | 内存 191908
*   第 33 步从 60 | 内存 191908
*   第 34 步从 60 | 内存 191892
*   第 35 步从 60 | 内存 191908
*   第 36 步从 60 | 内存 191908
*   第 37 步从 60 | 内存 191892
*   第 38 步从 60 | 内存 191908
*   第 39 步从 60 | 内存 191908
*   PHP致命错误：内存不足（分配262144）（试图分配4294967293字节）

这是我从函数中输出的一部分。

有人可以帮我解决这个问题吗？

```
 while(odbc_fetch_row($exec_query_tblKlantFactuurOpdrachten))
    {
        $dataADDRow_1 = $doc->createElement("tblKlantFactuurOpdrachten");
        $dataADDRow->appendChild($dataADDRow_1);

        $i_1 = 1;
        while($i_1 < $numFields_1)
        {
            echo "Step ".$i_1." from ".$numFields_1." | Memory ".memory_get_usage()."\n";
            $dataFromDB = odbc_result($exec_query_tblKlantFactuurOpdrachten,$i_1);
            $dataADD = $doc->createElement($tmpArr_FieldName_1[$i_1],protectInfo($dataFromDB));
            $dataADDRow_1->appendChild($dataADD);
            flush();
            ++$i_1;
        }
        flush();

    } 
```

我已经尝试通过简单的查询从数据库中获取数据，当我尝试获取相同的确切字段时，我也会收到该错误。所以这似乎与DB和PHP之间的关系有关。我在 linux 服务器上使用 freetds 驱动程序。

当我使用 SQL Server Management 获取数据时，没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:47:26.620

它可能与无休止的循环或某些递归调用的函数有关，该函数不断分配数据。

您可以尝试：

```
ini_set('memory_limit', '-1'); 
```

但如果我是对的，您将再次收到该错误。如果是这样，那么寻找循环和递归调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T08:02:51.527

这似乎是 PHP 的 ODBC 处理中的一个错误。

类似这样的东西： [https ://bugs.php.net/bug.php?id=51606](https://bugs.php.net/bug.php?id=51606)

试试那里给出的补丁

# java - java中的多线程

> ID：13949359
> 
> 赞同：-2
> 
> 时间：2012-12-19T09:36:59.487
> 
> 标签：java, multithreading

我有一个循环，但它太重了，所以我想在多个线程中共享相同的内容，但我不知道该怎么做。

```
while(!labyrinth.exit(bob3) && !labyrinth.exit(bob2)) {

     Collection<Room> accessibleRooms = labyrinth.accessibleRooms(bob3);

     if (bob3.canMove()) {
         destination = bob3.makeChoice(accessibleRooms);
     }

     if (destination != bob3.getPosition()) {
         destination.receive(bob3);
     }

     accessibleRooms = labyrinth.accessibleRooms(bob2);   

     if (bob2.canMove()) {
         destination = bob2.makeChoice(accessibleRooms);
     }

     if (destination != bob2.getPosition()) {
         destination.receive(bob2);
     }
} 
```

如您所见，在这个循环中，我们有两个相同的操作，因此可以让每个操作使用不同的线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:42:10.203

制作“多线程”的最简单方法：

```
while(....){
    new Thread(new Runnable(){
            public void run(){
               // put your code here.
            }
        }
    ).start();
} 
```

不要忘记让你的变量最终

编辑：你想要它:)

```
ExecutorService exec= Executors.newCachedThreadPool()
while(....){
    exec.execute(new Runnable(){
            public void run(){
               // put your code here.
            }
        }
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:48:10.053

```
 final CyclicBarrier c = new CyclicBarrier(2);

    Runnable r1 = new Runnable()
    {

        @Override
        public void run()
        {
            while ( !labyrinthe.sortir(bob3) )
            {

                Collection<Salle> sallesAccessibles = labyrinthe.sallesAccessibles(bob3);
                if ( bob3.peutSeDeplacer() )
                    destination = bob3.faitSonChoix(sallesAccessibles); // on demande au heros de faire son choix de salle
                if ( destination != bob3.getPosition() )
                    destination.recevoir(bob3); // deplacement
            }
            try
            {
                c.await();
            }
            catch ( InterruptedException e )
            {
                ;
            }
            catch ( BrokenBarrierException e )
            {
                ;
            }
        }
    };

    Runnable r2 = new Runnable()
    {
        @Override
        public void run()
        {
            while ( !labyrinthe.sortir(bob2) )
            {
                Collection<Salle> sallesAccessibles = labyrinthe.sallesAccessibles(bob2);
                if ( bob2.peutSeDeplacer() )
                    destination = bob2.faitSonChoix(sallesAccessibles); // on demande au heros de faire son choix de salle
                if ( destination != bob2.getPosition() )
                    destination.recevoir(bob2); // deplacement

            }
            try
            {
                c.await();
            }
            catch ( InterruptedException e )
            {
                ;
            }
            catch ( BrokenBarrierException e )
            {
                ;
            }
        }
    };

    Thread t1 = new Thread(r1);
    Thread t2 = new Thread(r2);

    t1.start();
    t2.start();

    c.await();

    System.out.println("Done"); 
```

# unit-testing - 使用带有 GMock (0.8.0) 的模拟服务测试 Grails 控制器

> ID：13949360
> 
> 赞同：2
> 
> 时间：2012-12-19T09:37:00.607
> 
> 标签：unit-testing, grails, groovy, gmock

我有一个 grails 2.1 应用程序，它有一个控制器，它调用服务上的方法，传入请求和响应：

```
class FooController {
    def myService
    def anAction() {
        response.setContentType('text/xml')
        myservice.service(request,response)
} 
```

我想对这个方法进行单元测试。我想使用 GMock（版本 0.8.0）这样做，所以这就是我尝试的：

```
def testAnAction() {
    controller.myService = mock() {
        service(request,response).returns(true)
    }
    play {
        assertTrue controller.anAction()
    }
} 
```

现在这失败了，说它没有达到对请求的期望。

```
Missing property expectation for 'request' on 'Mock for MyService' 
```

但是，如果我这样编写测试：

```
def testAnAction() {
    def mockService = mock()
    mockService.service(request,response).returns(true)
    controller.myService = mockService
    play {
        assertTrue controller.anAction()
    }
} 
```

测试会顺利通过的。据我所知，它们都是 GMock 语法的有效用法，那么为什么第一个失败而第二个没有呢？

干杯，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T23:41:13.920

`FooControllerTest`我假设您在grails 生成的测试类中编写测试。

通过这种方式，`FooControllerTest`类通过`@TestFor(FooController)`注入一些有用的*属性*来注释。

您的测试类`request`的*属性*也是如此，而不是本地范围内的*变量*。

这就是为什么它不能从内部闭包访问的原因。

我确信以下代码可以工作（我尚未测试）：

```
def testAnAction() {
    def currentRequest = request
    def currentResponse = response
    controller.myService = mock() {
        service(currentRequest,currentResponse).returns(true)
    }
    play {
       assertTrue controller.anAction()
    }
} 
```

# iphone - 故事板iphone中的滚动视图

> ID：13949363
> 
> 赞同：3
> 
> 时间：2012-12-19T09:37:11.393
> 
> 标签：iphone, ios, uiscrollview, storyboard

我正在尝试使用情节提要在应用程序中设置滚动视图。我已正确完成所有操作，但滚动视图不会在模拟器或 iPhone 上滚动。

```
MoreViewController.h
@property(nonatomic, retain) IBOutlet UIScrollView *moreScroll;

MoreViewController.m
-(void)viewDidLoad{
    [moreScroll setScrollEnabled:YES];
    [moreScroll setContentSize:CGSizeMake(1220, 354)];
} 
```

我已将滚动视图连接到文件所有者，有人可以帮忙吗

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:40:30.073

使用自动布局是否有一种新方法`- (void)viewDidLayoutSubviews`

这是一个快速信息：通知视图控制器它的视图刚刚布置了它的子视图。当视图的边界发生变化时，视图会调整其子视图的位置。您的视图控制器可以覆盖此方法以在视图布置其子视图后进行更改。此方法的默认实现什么也不做。

如果你添加这个应该没问题：

```
- (void)viewDidLayoutSubviews
{
    [super viewDidLayoutSubViews];
    [moreScroll setContentSize:CGSizeMake(1220, 354)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:34:00.107

设置滚动视图的滚动条样式设置水平和垂直滚动条的样式。如果滚动视图随后创建或分配了新的水平或垂直滚动​​条，它们将被分配与分配给滚动视图相同的滚动条样式。

如果您在代码中添加以下行，您应该是：

```
 This line in .h file

 @interface Shout_RouteView : UIViewController<UIScrollViewDelegate> 
 {

  }

 @property (retain, nonatomic) IBOutlet UIScrollView *scrollViewMain;

 This lines copy in .m file 
-(void)viewWillAppear:(BOOL)animated {

 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    scrollViewMain.frame = CGRectMake(0, 0, 768, 815);
    [scrollViewMain setContentSize:CGSizeMake(768, 1040)];
}else {
    scrollViewMain.frame = CGRectMake(0, 0, 320, 370);
    [scrollViewMain setContentSize:CGSizeMake(320, 510)];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:54:03.733

建议您尝试将内容设置代码放入 viewWillAppear 或 viewDidAppear 方法中。在准备好显示之前，最好不要尝试更改 UI 功能。

# installation - 获取字符串长度

> ID：13949364
> 
> 赞同：0
> 
> 时间：2012-12-19T09:37:14.353
> 
> 标签：installation, nsis

**有没有办法在 NSIS 中找出字符串的长度？**

我正在尝试测试文件是否为空（没有内容）。一种方法是读取文件并将内容存储在一个字符串（称为 contentStr）中，然后查看该 contentStr 字符串有多长。如果它 > 0 那么它不是空的。

另一种方法是检查 contentStr == "" 但正如您在下面看到的那样，它不起作用。任何空文件都不会在应该返回 1 时：

```
!macro IsFileEmpty fName res

    !insertmacro ReadFile "${fName}" ${res}

    StrCmp ${res} "" +1 +2
    IntOp ${res} 1 + 0
    IntOp ${res} 0 + 0

!macroend 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:36:19.620

要获取字符串长度，请使用[StrLen](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.8.2)：

```
StrLen $0 "123456" # ==> $0 = 6 
```

如果您想在尝试读取文件之前获取文件大小，请查看 Francisco 在另一个答案中指出的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:21:16.210

你检查过你的文件大小真的是0字节吗？也许你的文件有空格或换行符......在这些情况下，你需要 StrRep 或修剪你的字符串。

如果您只想知道文件大小，可以使用此宏和函数：

```
!macro FileSize VAR FILE
    Push "${FILE}"
    Call FileSizeNew
    Pop ${VAR}
!macroend
Function FileSizeNew 
  Exch $0
  Push $1
  FileOpen $1 $0 "r"
  FileSeek $1 0 END $0
  FileClose $1
  Pop $1
  Exch $0
FunctionEnd 
```

更多信息在这里：

[http://nsis.sourceforge.net/Getting_File_Size](http://nsis.sourceforge.net/Getting_File_Size)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T03:38:35.790

这样做有点奇怪，它只是部分起作用：

```
...
StrCmp ${res} "" 0 +2 ; +1 and 0 is the same, jumps to next instruction
StrCpy ${res} 1 ; No need to do math here
IntOp ${res} ${res} + 0 ; NaN + 0 = 0 but what if you read a number from the file? 
```

如果文件可能以数字开头，您需要像 zbynour 建议的那样跳转：

```
...
StrCmp ${res} "" 0 +3 
StrCpy ${res} 1
Goto +2
StrCpy ${res} 0 
```

如果你翻转测试，你可以用相同数量的指令得到你想要的：

```
!macro IsFileNOTEmpty fName res

  !insertmacro ReadFile "${fName}" ${res}

  StrCmp ${res} "" +2 0
  StrCpy ${res} 1 ; Or IntOp ${res} ${res} | 1 if you really wanted to do extra math ;)
  IntOp ${res} ${res} + 0

!macroend 
```

甚至更好：

```
!macro IsFileEmpty fName res

  !insertmacro ReadFile "${fName}" ${res}

  StrLen ${res} ${res} ; If this is enough depends on how you want to deal with newlines at the start of the file (\r or \n)

!macroend 
```

...所有这些代码都假定您要测试文件是否以某些文本开头，如果文件以 0 字节开头，它将始终说文件为空。因此，如果文件包含二进制内容，则需要使用 Francisco R 的代码来测试实际大小（以字节为单位）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:23:54.147

那是因为最后一行总是被执行（如果`${res}`是空的，偏移量将是`+1`但不会跳过下一条指令）。

以下代码应使其按预期工作：

```
!macro IsFileEmpty fName res

    !insertmacro ReadFile "${fName}" ${res}

    StrCmp ${res} "" +1 +3
    IntOp ${res} 1 + 0
    goto end
    IntOp ${res} 0 + 0
    end:

!macroend 
```

# c# - ASP.net 未能向用户添加角色

> ID：13949366
> 
> 赞同：1
> 
> 时间：2012-12-19T09:37:19.583
> 
> 标签：c#, asp.net

我能够创建一个新用户，但无法向创建的用户添加角色
这里我的 cs 代码：

### 在下拉列表中生成角色

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            CreateUserWizard CreateUserWizard1 = (CreateUserWizard)LoginView1.FindControl("CreateUserWizard1");

            DropDownList role = (DropDownList)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("role");
            if(role!=null)
            {
                string[] allRoles = Roles.GetAllRoles();
                foreach (string roles in allRoles)
                {
                    role.Items.Add(new ListItem(roles));  
                }
            }
        }
    } 
```

### 将角色插入用户名

```
 protected void CreateUserWizard1_CreatedUser(object sender, EventArgs e)
    {
        CreateUserWizard CreateUserWizard1 = (CreateUserWizard)LoginView1.FindControl("CreateUserWizard1");
        DropDownList role = (DropDownList)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("role");
        Roles.AddUserToRole(CreateUserWizard1.UserName, role.SelectedValue);
    } 
```

ASPX 代码：

### 在登录视图中创建用户向导

```
<asp:LoginView ID="LoginView1" runat="server">
        <RoleGroups>
            <asp:RoleGroup Roles="System Admin">
            <ContentTemplate>
            <asp:CreateUserWizard ID="CreateUserWizard1" runat="server" BackColor="#F7F6F3" 
                        BorderColor="#E6E2D8" BorderStyle="Solid" BorderWidth="1px" 
                        Font-Names="Verdana" Font-Size="0.8em" 
                    ContinueDestinationPageUrl="~/Default.aspx">
                        <SideBarStyle BackColor="#5D7B9D" BorderWidth="0px" Font-Size="0.9em" 
                            VerticalAlign="Top" />
                        <SideBarButtonStyle BorderWidth="0px" Font-Names="Verdana" ForeColor="White" />
                        <ContinueButtonStyle BackColor="#FFFBFF" BorderColor="#CCCCCC" 
                            BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" 
                            ForeColor="#284775" />
                        <NavigationButtonStyle BackColor="#FFFBFF" BorderColor="#CCCCCC" 
                            BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" 
                            ForeColor="#284775" />
                        <HeaderStyle BackColor="#5D7B9D" BorderStyle="Solid" Font-Bold="True" 
                            Font-Size="0.9em" ForeColor="White" HorizontalAlign="Center" />
                        <CreateUserButtonStyle BackColor="#FFFBFF" BorderColor="#CCCCCC" 
                            BorderStyle="Solid" BorderWidth="1px" Font-Names="Verdana" 
                            ForeColor="#284775" />
                        <TitleTextStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                        <StepStyle BorderWidth="0px" />
                        <WizardSteps>
                            <asp:CreateUserWizardStep runat="server">
                                <ContentTemplate>
                                    <table border="0" style="font-family:Verdana;font-size:100%;">
                                        <tr>
                                            <td align="center" colspan="2" 
                                                style="color:White;background-color:#5D7B9D;font-weight:bold;">
                                                Sign Up for Your New Account</td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User 
                                                Name:</asp:Label>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                                    ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                                    ToolTip="User Name is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" 
                                                    ControlToValidate="Password" ErrorMessage="Password is required." 
                                                    ToolTip="Password is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <asp:Label ID="ConfirmPasswordLabel" runat="server" 
                                                    AssociatedControlID="ConfirmPassword">Confirm Password:</asp:Label>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="ConfirmPassword" runat="server" TextMode="Password"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="ConfirmPasswordRequired" runat="server" 
                                                    ControlToValidate="ConfirmPassword" 
                                                    ErrorMessage="Confirm Password is required." 
                                                    ToolTip="Confirm Password is required." 
                                                    ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <asp:Label ID="EmailLabel" runat="server" AssociatedControlID="Email">E-mail:</asp:Label>
                                            </td>
                                            <td>
                                                <asp:TextBox ID="Email" runat="server"></asp:TextBox>
                                                <asp:RequiredFieldValidator ID="EmailRequired" runat="server" 
                                                    ControlToValidate="Email" ErrorMessage="E-mail is required." 
                                                    ToolTip="E-mail is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                        <td align="right">
                                            <asp:Label ID="Label1" runat="server" Text="Role :"></asp:Label>
                                        </td>
                                        <td>
                                            <asp:DropDownList ID="role" runat="server" AutoPostBack="True" >

                                            </asp:DropDownList>
                                        </td>
                                        </tr>
                                        <tr>
                            <td align="right">
                                <asp:Label ID="QuestionLabel" runat="server" AssociatedControlID="Question">Security 
                                Question:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="Question" runat="server"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="QuestionRequired" runat="server" 
                                    ControlToValidate="Question" ErrorMessage="Security question is required." 
                                    ToolTip="Security question is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="AnswerLabel" runat="server" AssociatedControlID="Answer">Security 
                                Answer:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="Answer" runat="server"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="AnswerRequired" runat="server" 
                                    ControlToValidate="Answer" ErrorMessage="Security answer is required." 
                                    ToolTip="Security answer is required." ValidationGroup="CreateUserWizard1">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                                        <tr>
                                            <td align="center" colspan="2">
                                                <asp:CompareValidator ID="PasswordCompare" runat="server" 
                                                    ControlToCompare="Password" ControlToValidate="ConfirmPassword" 
                                                    Display="Dynamic" 
                                                    ErrorMessage="The Password and Confirmation Password must match." 
                                                    ValidationGroup="CreateUserWizard1"></asp:CompareValidator>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="center" colspan="2" style="color:Red;">
                                                <asp:Literal ID="ErrorMessage" runat="server" EnableViewState="False"></asp:Literal>
                                            </td>
                                        </tr>

                                    </table>
                                </ContentTemplate>
                            </asp:CreateUserWizardStep>
                            <asp:CompleteWizardStep runat="server" >
                                <ContentTemplate>
                                    <table border="0" style="font-family:Verdana;font-size:100%;">
                                        <tr>
                                            <td align="center" colspan="2" 
                                                style="color:White;background-color:#5D7B9D;font-weight:bold;">
                                                Complete</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                Your account has been successfully created.</td>
                                        </tr>
                                        <tr>
                                            <td align="right" colspan="2">
                                                <asp:Button ID="ContinueButton" runat="server" BackColor="#FFFBFF" 
                                                    BorderColor="#CCCCCC" BorderStyle="Solid" BorderWidth="1px" 
                                                    CausesValidation="False" CommandName="Continue" Font-Names="Verdana" 
                                                    ForeColor="#284775" Text="Continue" ValidationGroup="CreateUserWizard1" />
                                            </td>
                                        </tr>
                                    </table>
                                </ContentTemplate>
                            </asp:CompleteWizardStep>
                        </WizardSteps>
                    </asp:CreateUserWizard>
                    </ContentTemplate>
            </asp:RoleGroup>
        </RoleGroups>
        <AnonymousTemplate>
            Access Denied.
        </AnonymousTemplate>
    </asp:LoginView> 
```

谁能帮我找到并修复我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T04:16:49.233

添加后问题解决了^^

```
oncreateduser="CreateUserWizard1_CreatedUser" 
```

在 CreateUserWizard 标签内

# html - 如何在css中为两个相邻单元格提供单个边框

> ID：13949375
> 
> 赞同：0
> 
> 时间：2012-12-19T09:37:45.747
> 
> 标签：html, css, html-table

我正在用 html 制作一个表单，并且我正在使用一个表格来布局我的输入控件和标签。

对于表单的每个输入，都有一个与之关联的标签。

我希望在作为标签及其关联输入标签的每对相邻单元格周围出现一个边框。

我尝试围绕两个相邻的`<td>`标签制作一个 div，但它显示“无效标签”，因为只`<td>`允许在`<tr>`标签内。

无论如何在CSS或其他任何东西中都可以做到这一点？

我的 HTML 示例代码：

```
<table>
<tr>
<td>Date</td>
<td><input type="text"></td>
<td>Name</td>
<td><input type="text"></td>
</tr>
</table> 
```

下面是我想要实现的截图。

![在此处输入图像描述](../Images/ca5f5c098330f69e97c90454be12079b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:41:41.950

你不是`collapsed`你的`table border`，试试这个

[**演示**](http://jsfiddle.net/JLgSL/)

```
table {
   border-collapse: collapse;
}

table, td {
   border: 1px solid #c00000;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:50:55.013

如果您可以将课程应用于您的 td，您可以尝试以下操作：

```
<table cellspacing="0">
    <tr>
        <td class="label">Label1: </td>
        <td>input1</td>
        <td class="label">Label2: </td>
        <td>input2</td>
    </tr>
</table>​ 
```

使用以下CSS：

```
table {
    background-color: silver;
    border-collapse: collapse;
}
td {
    padding: 5px;
    border: 1px solid red;
    border-width: 1px 1px 1px 0px;
}

td.label {
    border-width: 1px 0px 1px 1px;    
} 
```

[​http://jsfiddle.net/H3p8e/2/](http://jsfiddle.net/H3p8e/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:41:09.890

尝试应用`border-collapse:collapse;`规则。

# jquery - 使用 Jquery 在 A 元素中设置类的 URL 路径

> ID：13949380
> 
> 赞同：0
> 
> 时间：2012-12-19T09:38:02.283
> 
> 标签：jquery, css, url, navigation, alert

我正在尝试使双层导航正常工作。`current`一切都很酷，但是 jQuery根据 URL将类设置为正确的 A 元素。但甚至警报都不起作用，我不确定为什么（jQuery 新手）。

目前是：[远程测试站点](http://gulfinsight.obmon.com)

```
 $(document).ready(function(){

    // url
    var $path = location.pathname.split("/");
    var $topnav_path = path[1];
    var $filternav_path = path[2];

    // current page
    var $test = "the category is: " + $topnav_path + " AND the filter is: " + $filternav_path;
    alert($test);

    // navigation
    $(function() {
        // set link to current page
        if ( $path[1] ) {
            $('#top_nav a[class$="' + $topnav_path + '"]').toggleClass('current');
        }
        // if link is root, set first child (home)
        if ( !$path[1] ) {
            $('#top_nav a:first').toggleClass('current');
        }

        // set filter to current filter
        if ( $path[2] ) {
            $('#filter_nav a[class$="' + $filternav_path + '"]').toggleClass('current');
        }
        // if link is root, set first child (home)
        if ( !$path[2] ) {
            $('#filter_nav a:first').toggleClass('current');
        }
    });
}); 
```

根据下面的第一个答案，以下内容也不起作用（有或没有函数调用）：

```
 $(document).ready(function(){

    // url
    var path = location.pathname.split("/"),
        topnav_path = path[1] != undefined ? path[1] : false,
        filternav_path = path[2] != undefined ? path[2] : false;

    // test url
    var test = "the category is: " + topnav_path + " AND the filter is: " + filternav_path;
    alert(test);

    // navigation
    $(function() {
        // set top nav to current category or home
        if ( path[1] ) {
            $('#top_nav a[class$="' + topnav_path + '"]').toggleClass('current');
        }else{
            $('#top_nav a:first').toggleClass('current');
        }
        // set filter nav to current filter or all
        if ( path[2] ) {
            $('#filter_nav a[class$="' + filternav_path + '"]').toggleClass('current');
        }else{
            $('#filter_nav a:first').toggleClass('current');
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:39:35.730

没有`$test`变量，您将其命名为`test`。其他变量也是如此。

```
$(document).ready(function(){
    var path = location.pathname.split("/"),
        topnav_path = path[1] != undefined ? path[1] : false,
        filternav_path = path[2] != undefined ? path[2] : false;

    var test = "the category is: " + topnav_path + " AND the filter is: " + filternav_path;

    if ( path[1] ) {
        $('#top_nav a[class$="' + topnav_path + '"]').toggleClass('current');
    }else{
        $('#top_nav a:first').toggleClass('current');
    }

    if ( path[2] ) {
        $('#filter_nav a[class$="' + filternav_path + '"]').toggleClass('current');
    }else{
        $('#filter_nav a:first').toggleClass('current');
    }
});​ 
```

# javascript - 如何将多个 jquery 对象传递给一个 js 函数？

> ID：13949381
> 
> 赞同：0
> 
> 时间：2012-12-19T09:38:08.337
> 
> 标签：javascript, jquery, html

实际上，我在 HTML 中有超过 8 个输入和 8 个不同的 id，我想将 jquery 对象传递给 onblur 事件函数，所以我不需要创建 8 个重复函数并且只创建 1 个脚本函数。我一直在努力搜索堆栈溢出几个小时，但找不到我的问题的答案，或者我可能只是 jquery 的新手。希望您能帮助我并提前感谢...

```
 function fill(t,xx,zz) {
    $(xx).val(t);
    setTimeout("$(zz).hide();", 200);
}

 <input  type="text" id="inputString" size="50" value="" onkeyup="lookup(this.value);" onblur="fill(this.value,'#inputString','#suggestions');" />  
 <div class="suggestionsBox" id="suggestions" style="display: none;"> 
```

为了让您更好地理解代码，这是真正有效的原始代码，仅适用于 1-input html 标记。我打算在 8 输入 html 标签上只使用一个函数。

```
 <script type="text/javascript" src="jquery-1.2.1.pack.js"></script>

function lookup(xString) {
    if(xString.length == 0) {
        // Hide the suggestion box.
        $('#suggestions').hide();
    } else {
        $.post("db_rpc.php", {queryString: ""+xString+""}, function(data){
            if(data.length >0) {
                $('#suggestions').show();
                $('#autoSuggestionsList').html(data);
            }
        });
    }
} // lookup

function fill(t) {
    $('#inputString').val(t);
    setTimeout("$('#suggestions').hide();", 200);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:45:17.270

让你的所有元素共享同一个**类**。

```
<div id="idOne" class="toBlur" />
<div id="idTwo" class="toBlur" />
<div id="idThree" class="toBlur" /> 
```

`blur`告诉 jQuery，当事件被触发时，您希望将相同的函数应用于该类的每个项目。

```
$(".toBlur").blur(function() {
  // Do whatever.
}); 
```

此外，如果您要使用 jQuery（它在您的问题标签中），则不应像您那样在 HTML 中分配回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:15:10.527

我通过将参数传递给两个函数，使其使用 1 组函数用于 8 输入标签。我放置了一个 switch 语句来确定在函数填充中看到的输入标签 ID。我还在函数查找中添加了另一个 POST 变量。以下是我修改后的代码：

```
 function lookup(inputString,nn) {
    if(inputString.length == 0) {
        // Hide the suggestion box.
        $('#suggestions').hide();
    } else 
    {
        $.post("db_rpc.php", {queryString: ""+inputString+"",nns: ""+nn+""}, function(data) 
        { //nns added a new post variable nns for php mysqli
            if(data.length >0) {
                $('#suggestions').show();
                $('#autoSuggestionsList').html(data);
            }
        });
    }
}; // lookup

function fill(xx,n) {
switch(n) {
  case 1:
   $('#namedetails').val(xx); // input id
   break;
  case 2:
   $('#catdetails').val(xx);
   break;
}   
setTimeout("$('#suggestions').hide();", 200);
};     

<td class="absy"><input name="namedetails" type="text" id="namedetails" size="50" value="" onkeyup="lookup(this.value,1);" onblur="fill(this.value,1);"/>
        <div class="suggestionsBox" id="suggestions" style="display: none;">
            <img src="upArrow.png" style="position: relative; top: -12px; left: 30px;" alt="upArrow" />
            <div class="suggestionList" id="autoSuggestionsList">
                &nbsp;
            </div>
        </div> 
```

我只想感谢所有努力回答我的问题的人......我仍然从你的建议中学到了东西。也许我的问题对你们来说有点含糊，可能是因为我对 jquery 还很陌生，只是在长时间休息后才回来编码。再次感谢...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:46:35.810

您可以使用事件处理程序和类来做到这一点：

```
<input  type="text" class="inputString" />  
<div class="suggestionsBox" id="suggestions" style="display: none;"> 
```

JS

```
$('.inputString').on({
    keyup: function() {
        lookup(this.value);
    },
    blur: function() {
        var self = this;
        setTimeout(function() {
            $(self).next('.suggestionsBox').hide()
        },200);
    } 
}); 
```

# java - 检查列表中的重复条目

> ID：13949384
> 
> 赞同：5
> 
> 时间：2012-12-19T09:38:25.217
> 
> 标签：java, collections

> **可能重复：**
> [Java：检测 ArrayList 中的重复项？](https://stackoverflow.com/questions/562894/java-detect-duplicates-in-arraylist)

要检查列表是否有重复条目，我将其转换为 HashSet 并比较任何不匹配的大小。大家有没有更好的办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:42:02.153

如果您在集合的开头有重复，则此代码可能会提前中断：

```
HashSet<Integer> hashSet = new HashSet<>();
for(Integer i : myList) {
  if(!hashSet.add(i)) return true;
} 
```

正如 Pshemo 指出的那样，该`add`方法返回一个`bool`元素是否实际上已添加到集合中，而不是已经存在于其中。

# java - 将 zip 文件提取到文件夹中会为其中一个条目引发“无效条目大小（预期为 46284，但得到 46285 字节）”

> ID：13949385
> 
> 赞同：2
> 
> 时间：2012-12-19T09:38:25.357
> 
> 标签：java

当我尝试按照以下代码将 zip 文件提取到文件夹中时，其中一个条目（A 文本文件）收到错误为“无效条目大小（预期为 46284，但得到 46285 字节）”并且我的提取正在停止突然。我的 zip 文件包含大约 12 个文本文件和 20 个 TIF 文件。它遇到了文本文件的问题，并且由于它进入 Catch 块而无法继续进行。我只在 Unix 上运行的生产服务器中遇到这个问题，其他服务器（Dev、Test、UAT）没有问题。我们通过执行文件传输的外部团队将 zip 文件放入服务器路径，然后我的代码开始工作以提取 zip 文件。

```
 ...
    int BUFFER = 2048;
    java.io.BufferedOutputStream dest = null;
    String ZipExtractDir = "/y34/ToBeProcessed/";
    java.io.File MyDirectory = new java.io.File(ZipExtractDir);
    MyDirectory.mkdir();
    ZipFilePath = "/y34/work_ZipResults/Test.zip";

    // Creating fileinputstream for zip file
    java.io.FileInputStream fis = new java.io.FileInputStream(ZipFilePath);

    // Creating zipinputstream for using fileinputstream
    java.util.zip.ZipInputStream zis = new java.util.zip.ZipInputStream(new java.io.BufferedInputStream(fis));
    java.util.zip.ZipEntry entry;
    while ((entry = zis.getNextEntry()) != null)
    {
        int count;
        byte data[] = new byte[BUFFER];
        java.io.File f = new java.io.File(ZipExtractDir + "/" + entry.getName());

        // write the files to the directory created above
        java.io.FileOutputStream fos = new java.io.FileOutputStream(ZipExtractDir + "/" + entry.getName());
        dest = new java.io.BufferedOutputStream(fos, BUFFER);
        while ((count = zis.read(data, 0, BUFFER)) != -1)
        {
            dest.write(data, 0, count);
        }
        dest.flush();
        dest.close();
    }
    zis.close();
    zis.closeEntry();
}
catch (Exception Ex)
{
    System.Out.Println("Exception in \"ExtractZIPFiles\"---- " + Ex.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:55:39.357

我无法理解您遇到的问题，但这是我用来解压缩档案的方法：

```
public static void unzip(File zip, File extractTo) throws IOException {
    ZipFile archive = new ZipFile(zip);
    Enumeration<? extends ZipEntry> e = archive.entries();
    while (e.hasMoreElements()) {
        ZipEntry entry = e.nextElement();
        File file = new File(extractTo, entry.getName());
        if (entry.isDirectory()) {
            file.mkdirs();
        } else {
            if (!file.getParentFile().exists()) {
                file.getParentFile().mkdirs();
            }
            InputStream in = archive.getInputStream(entry);
            BufferedOutputStream out = new BufferedOutputStream(new FileOutputStream(file));
            IOUtils.copy(in, out);
            in.close();
            out.close();
        }
    }
} 
```

来电：

```
File zip = new File("/path/to/my/file.zip");
File extractTo = new File("/path/to/my/destination/folder");
unzip(zip, extractTo); 
```

上面的代码我从来没有遇到过任何问题，所以我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:17:05.243

在我的脑海中，我可以想到以下原因：

1.  文本文件的编码可能存在问题。
2.  该文件需要以“二进制”模式读取/传输。
3.  行尾可能存在问题`\n`或`\r\n`
4.  该文件可能只是损坏了。尝试使用 zip 实用程序打开文件。

# jquery - jQuery Mobile 弹出窗口问题

> ID：13949388
> 
> 赞同：2
> 
> 时间：2012-12-19T09:38:33.637
> 
> 标签：jquery, mobile, popup

我才刚刚开始以任何严肃的方式使用新的 jQM 1.2 弹出功能，并且遇到了许多奇怪的问题。我需要从脚本打开我的弹出窗口，而不是通过 data-rel='popup' 点击。“简单”，我想 - 只需将数据角色设置为“popup”的弹出元素放入，然后从脚本中将其打开为 element.popup('open')。我试过只是让jQM抱怨

未捕获的错误：无法在初始化之前调用弹出窗口上的方法；试图调用方法“打开”

所以我想我根本不会使用数据角色，将元素样式设置为 display:none 然后简单地做

element.popup().css('display':'block').popup('open') 从需要的脚本。这在第一次时就像一个魅力。然后，当我尝试重新打开弹出窗口时，什么也没有发生 - 没有弹出窗口！我认为这可能与两次初始化弹出窗口有关，所以我将代码更改为

```
if ('undefined' == typeof(element.data('ppp'))
element.popup().css('display','block').data('ppp',1); 
```

其次是

```
element.popup('open') 
```

仍然没有乐趣 - 似乎弹出窗口一旦关闭就忘记了它的数据属性

对此的任何帮助将不胜感激 - 基本上我想做的就是从脚本中多次打开和关闭弹出窗口。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T06:42:37.480

对此有一个非常简单的答案。尝试访问弹出元素以通过其虚拟类声明（在本例中为 ppp）定位它来打开它，将永远不会奏效。如果你想找到一个弹出窗口，你必须给它一个 id。没有 id，无法进入弹出窗口。当您查看 jQM 在看到 data-role='popup' 时生成的代码时，这一点就会变得清晰。代替原来的弹出定义，它留下一个空的 DIV 标记，其中包含的内容略多于

```
<div>
<!--Placeholder for popupid-->
<div> 
```

在最初定义弹出窗口的页面底部，它放入两个新 div

```
<div class='ui-popup-screen ui-screen-hidden' id='popupid-screen'></div>
<div class='ui-popup-container ui-selectmenu-hidden' id='popupid-popup'>..</div> 
```

最初定义的弹出窗口的所有内容都被移动到后一个 div 中。不要为原始弹出窗口提供 id，并且通过 jQuery 以任何有用的方式访问它的机制只会崩溃。

# ios5 - iPhone - 在设备上测试时

> ID：13949391
> 
> 赞同：0
> 
> 时间：2012-12-19T09:38:42.127
> 
> 标签：ios5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:12:00.887

尝试重启你的设备，如果可能的话重置你的设备，重启 Xcode，重启你的 Mac，清除 Xcode 缓存和项目缓存，清理项目等等。

其中一些应该有所帮助。

# join - 在hadoop中加入文件A，B，C

> ID：13949392
> 
> 赞同：2
> 
> 时间：2012-12-19T09:38:42.610
> 
> 标签：join, hadoop, apache-pig

> **可能重复：**
> [Pig 脚本：加入多个文件](https://stackoverflow.com/questions/12390252/pig-script-join-with-multiple-files)

我做了一个基于hadoop的程序。现在，我有三个文件 A、B、C。我想加入他们并遵循条件“A.one = B.one and A.two = C.one”；然后将结果存储到文件D。

我对pig有点了解，但是它的join不能满足这个命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:11:37.333

实际上在 Pig 中很容易，因为两步加入：

```
A=LOAD ..
B=LOAD ..
C=LOAD ..

AB= JOIN A BY A.one,B BY B.One;
D= JOIN AB BY A::two, C BY C.one; 
```

# css - IE8 CSS 背景图片 URL 被重置为 url("null")

> ID：13949394
> 
> 赞同：1
> 
> 时间：2012-12-19T09:38:51.030
> 
> 标签：css, jquery-ui, internet-explorer-8, selectivizr

我现在有一个问题，在 IE8 中，我的 CSS 文件中的背景图像属性被更改为 url("null") 而不是其中的原始 URL。

不知道在哪里看，但我怀疑它可能是 selectivizr 或 JQuery UI。

以前有人遇到过这个问题吗？

**编辑：** 这是CSS代码

```
span.k-icon
{
    background-image: url('http://cdn.kendostatic.com/2012.2.710/styles/Default/sprite.png');
} 
```

**编辑2：** 我从等式中删除了selectivizr，这解决了问题。所以这肯定与selectivizr有关。问候， 雅克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:23:37.573

我找到了答案。这是 Selectivizr 中的一个限制。

您不能将 CDN 或外部资产与 selectivizr 一起使用，CSS 文件等必须托管在同一域上，并且必须使用相对路径。

这是一篇关于它的帖子。[http://bigredtin.com/2010/selectivizr-with-css-on-a-cdn/](http://bigredtin.com/2010/selectivizr-with-css-on-a-cdn/)

问候， 雅克

# tomcat - 阻止从 Tomcat 访问应用程序

> ID：13949402
> 
> 赞同：0
> 
> 时间：2012-12-19T09:39:53.683
> 
> 标签：tomcat

我想在特定日期之后阻止访问 tomcat 上的应用程序。

tomcat配置有什么事情要做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:20:49.970

Tomcat 中没有任何东西可以开箱即用地做到这一点，但是编写一个简单的[Valve](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/Valve.html)来做到这一点非常简单。

以[RequestFilterValve.java](http://www.docjar.com/html/api/org/apache/catalina/valves/RequestFilterValve.java.html)为例并简化其方法，以便在当前日期晚于某个配置日期`process`时始终发送。`HttpServletResponse.SC_FORBIDDEN`

# c++ - 如何从 Qt4 MVC 切换到 Gtk MVC？

> ID：13949405
> 
> 赞同：0
> 
> 时间：2012-12-19T09:40:01.363
> 
> 标签：c++, qt, qt4, gtk

我已经使用 Qt 一段时间了，现在我想试试 Gtk。我想编写简单的数据库应用程序，但似乎不支持 sql（我被迫用数据手动填充模型）。在 Qt 中，我们有 QSqlQueryModel 和 QSqlTableModel、QTableView 和 QTreeView。Gtk 方法更像是 QTableWidget 和 QTreeWidget。我需要以某种方式连接到数据库，获取数据并填充模型。好的，但是如果我的桌子真的很大怎么办？如何实现就地编辑（Gtk 模型无法修改数据）？我可以链接模型以提供像 QSortFilterProxyModel 这样的过滤吗？这些是我一直使用 Qt 编写数据库应用程序的基本东西。如何用 Gtk 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:34:07.357

GTK+ 比 Qt 更加模块化，因此您需要在 GObject 生态系统中查找您的需求。[libgda](http://www.gnome-db.org/)是您正在寻找的。

[以下](http://developer.gnome.org/)是该平台的非详尽概述，以供将来参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:09:15.580

GTK 字面意思是 GIMP 工具包。它几乎是一组用于开发 GUI 应用程序的纯图形工具，另一方面，Qt 是一个图形和一个完整的其他堆栈，用于数据库等。您最好的起点是确定您将要使用的数据库，然后获取开发包（如果它具有 C++ 绑定），并查看它的 API 文档，您将主要自己构建功能。那里还有其他数据库抽象层，所以这是您可以采取的另一条路线。

# ios - Three20 TTThumbviewcontroller 分页加载更多链接不会添加更多行

> ID：13949407
> 
> 赞同：0
> 
> 时间：2012-12-19T09:40:10.987
> 
> 标签：ios, paging, three20, ttthumbsviewcontroller

几天以来，我一直在努力完成这项工作。我获得了用于加载更多缩略图的加载更多链接，当我选择链接时，它会加载其他记录，并且数据源会相应更新。但是，它不会添加额外的行并使用下一页索引更新加载更多链接。但是，在现有行中添加了其他图像，但不会添加带有其他图像的新行。

从数据源添加其他记录后，我必须在 photoindex 中进行更改吗？

我正在从 sqlite 加载数据，并且我有大量的记录。我正在寻找其他图书馆只是因为我无法完成这项工作。:(。我仍然很想使用这个库。

非常感谢您在识别问题方面的任何帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T03:07:58.540

您应该创建 TTPhotoSource 的子类。

这是我的实现，希望能帮到你。

```
@implementation CSCourseListPhotoSource

//return count+1 to display more button
- (NSInteger)numberOfPhotos
{
    return [self items].count + 1;
}

- (NSInteger)maxPhotoIndex
{
    return [self items].count -1;
}

- (id<TTPhoto>)photoAtIndex:(NSInteger)index
{
    if (index < [self items].count) {
        ...
        return photo;
    } else {
        return nil;
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:22:34.853

错误出现在返回 maxPhotoIndex 的 PhotoSource 方法中。它必须与 currentPage 和每页的照片数量同步。

# html - 溢出-y 隐藏子菜单

> ID：13949410
> 
> 赞同：1
> 
> 时间：2012-12-19T09:40:21.037
> 
> 标签：html, css, overflow

我有一个具有一定高度的列表，需要使其滚动以垂直显示其余部分。
所以我添加`overflow-y: hidden;`到列表中。
但是子菜单不可见，并且显示了水平滚动条。

有什么解决办法吗？ [代码在这里](http://codepen.io/joe/pen/tGdFJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:44:37.317

只需增加 .wrapper 的宽度

```
.wrapper {
  margin: 20px;
  background: gray;
  color: white;
  width: 400px;
  height: 100px;
  /* I need overflow-y auto,but I also need to display the submenu*/
  overflow-y: auto;
  overflow-x: visible;
} 
```

# android - 从 GCMIntentService 调用 onResume() 或 onCreate()

> ID：13949412
> 
> 赞同：7
> 
> 时间：2012-12-19T09:40:24.917
> 
> 标签：android

我正在开发`GCMIntentService`用于推送通知的应用程序。所以我想刷新`ListView`我的`TabActivity`. 那么有可能从`GCMIntentService`我收到 and 时做到这一点`GCMIntentMessage`吗？

例如

```
SecondTabActivity.callOnResume(); //or something like this 
```

或者

```
SecondTabActivity.callOnCreate(); // or something like this 
```

我需要在不使用的情况下执行此操作`startActivity(intent)`；因为如果我这样做， SecondTabActivity 就会脱离我的状态`TabHost`，它就像 new 一样开始`Activity`。用于刷新的函数`ListView`位于`onCreate(`) 和`onResume()`SecondTabActivity 中，这就是我要调用它们的原因。如果除此之外还有其他方法，请参考。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T09:46:46.857

一个好方法是使用广播意图。

1.  在 TabActivity 的 onCreate 中，使用 Context.registerReceiver 方法为名为“MyGCMMessageReceived”之类的意图注册广播接收器。

2.  在该广播接收器中，调用刷新列表的方法。

    ```
    this.registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            // INSERT CODE TO REFRESH LIST VIEW
        }
    }, new IntentFilter("MyGCMMessageReceived")); 
    ```

3.  让您的 GCMIntentService 的 onMessage 方法广播一个名为“MyGCMMessageReceived”的意图。

    ```
     Intent intent = new Intent("MyGCMMessageReceived");
        this.sendBroadcast(intent); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:55:38.280

您应该在 Service to Activity Communications 中使用[LocalBroadcastManager 。](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)

在您的 IntentService 中，您通过本地广播发送新信息，在您的 TabActivity 中，您必须注册一个接收器。在 onReceive 方法中，您必须刷新视图。

这里有一个简单的示例：[LocalBroadcastManager 示例](http://www.intertech.com/Blog/Post/Using-LocalBroadcastManager-in-Service-to-Activity-Communications.aspx)

# ios - UISearchBar 显示带有详细视图的 UITableView

> ID：13949420
> 
> 赞同：0
> 
> 时间：2012-12-19T09:40:55.400
> 
> 标签：ios, xcode

好的，我现在拥有的是两个带有数据的数组。

`myArray1`有很长的标题列表和`myArray2`很长的描述列表。标题的相关描述位于数组的相邻点。例如，如果“水”在我的某个点`Array1`，那么“是一种可饮用的液体”将在同一点，但在`myArray2`.

然后`myArray1`显示在 a 中`UITableView`，当您单击哪个条目时，这会将您单击的行号传递到另一个加载的视图中，然后在该视图中，有一个文本字段，其中加载了`myArray2 objectAtIndex:`传递的任何索引。

这一切都很好！那么问题在哪里？我一直在尝试实现本教程中所示的搜索栏：

[http://www.youtube.com/watch?v=SlhrYJxE_rY](http://www.youtube.com/watch?v=SlhrYJxE_rY)

但是现在我的搜索结果显示在`UITableView`并且单击时传递的行不是特定的，`myArray2`因为它们的大小不同，我得到了错误的描述！！

那么，我怎样才能将我的数据与标题和描述一起存储在同一个实体中呢？或者如何避免搜索结果截断实际表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:48:57.330

在 UITableview 中搜索时，UITableview 中的 indexpath 与 uisearchbar 的结果表中的 indexpath 不同。因此，如果您有一个自定义单元格，您可以在其中添加一个属性，例如 indexInNormalTable 在 cellforrowatindexpath 中设置它：并使用该 (indexInNormalTable) 作为索引而不是实际的行索引。因此，当您传递该索引时，您将获得正确的相应对象在你的 myArray2.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:07:25.390

您可以获取数组中对象的索引，然后将此索引传递给下一个控制器以显示描述。您可以获得索引为

```
NSUInteger index = [array1 indexOfObject:@"water"]; 
```

希望它会有所帮助:)

# javascript - jquery html 5 dragstart .on('dragstart',function(e){}) e.dataTransfer.setData() 不起作用

> ID：13949422
> 
> 赞同：30
> 
> 时间：2012-12-19T09:41:00.343
> 
> 标签：javascript, jquery, html, drag

chrome throw err：无法调用未定义的方法'setData'，我发现e不等于window.event（它没有属性dataTransfer）；两者都有很大的不同

我发现两者在点击事件中几乎相等。

我使用[了 http://code.jquery.com/jquery-latest.js](http://code.jquery.com/jquery-latest.js)。

我不使用拖动功能，我只想知道为什么。它是 html 5 中的新功能，jquery 还在后面吗？还是 jquery 团队不想支持它？？或其他原因

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-19T10:27:06.677

在回调函数中，您将获得一个原生事件的 jQuery 包装器。使用`originalEvent`传递参数的属性：

```
$('...').on('dragstart', function (event) {
    event.originalEvent.dataTransfer.setData('...', '...');
}); 
```

PS不要忘记为`draggable="true"`要拖动的元素设置属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T18:28:14.743

jQuery 创建它自己的事件对象，它还没有 dataTransfer 属性。这会将 dataTransfer 添加到事件对象。

> $.event.props.push('dataTransfer');

# php - 如何避免电子邮件在 .\n\n 之后被修剪

> ID：13949423
> 
> 赞同：0
> 
> 时间：2012-12-19T09:41:01.363
> 
> 标签：php, email, postfix-mta

我已经搜索了几个星期的错误 - 终于可以找到它。但是，我需要一些帮助来解决它。上下文是电子邮件地址确认。

根据登录名的字符数，PHP 命令quoted_printable_encode() 在点之前或之后换行，然后换行。

这有效...

```
Ihre E-Mail-Adresse burninleo@abc.net wurde als Kontaktadresse f=C3=BCr das=
 Benutzerkonto "abcdefg.abcdef" auf https://www.snipsnapme.com eingetragen.

Falls Sie dieses Benutzerkonto selbst eingerichtet haben, best=C3=A4tigen S=
ie Ihre korrekte E-Mail-Adresse bitte, indem Sie auf folgenden Link klicken= 
```

...虽然这是在点之前修剪的。

```
Ihre E-Mail-Adresse burninleo@abc.net wurde als Kontaktadresse f=C3=BCr das=
 Benutzerkonto "abcdefg.abcdefg" auf https://www.snipsnapme.com eingetragen=
.

Falls Sie dieses Benutzerkonto selbst eingerichtet haben, best=C3=A4tigen S=
ie Ihre korrekte E-Mail-Adresse bitte, indem Sie auf folgenden Link klicken= 
```

据我记得 \n+dot+\n+\n 是“消息结束”的标记 - 所以绝对清楚，为什么在此处修剪消息。但是，用其他东西替换任何 =\ndot\n\n 似乎并不明智，因为quoted_printable_encode() 确实误解了这一点。

有什么我错过的吗？什么？

感谢您的提示！BurninLeo

* * *

这是发送到 PHP 的 mail() 的完整消息内容。由于 linux 上的后缀将 \n 替换为 \r\n，因此换行符为 \n。

```
--=_SubliminalMessagesInCinemaDontWork
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Guten Tag,

Ihre E-Mail-Adresse burninleo@abc.net wurde als Kontaktadresse f=C3=BCr das=
 Benutzerkonto "abcdefg.abcdefg" auf https://www.snipsnapme.com eingetragen=
.

Falls Sie dieses Benutzerkonto selbst eingerichtet haben, best=C3=A4tigen S=
ie Ihre korrekte E-Mail-Adresse bitte, indem Sie auf folgenden Link klicken=
: https://www.snipsnapme.com/admin/act.php?t=3D1234567890ABCDEF

Der Best=C3=A4tigungscode f=C3=BCr Ihre E-Mail-Adresse lautet: 1234567890AB=
CDEF

Falls Sie das Benutzerkonto nicht selbst eingerichtet haben, will m=C3=B6gl=
icherweise eine andere Person Ihre E-Mail-Adresse missbrauchen. In diesem F=
all l=C3=B6schen Sie diese E-Mail bitte einfach.

----------------------------------------------------------
snipsnapme.com - https://www.snipsnapme.com
----------------------------------------------------------
--=_SubliminalMessagesInCinemaDontWork
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

<html>
<head>
<title>Best=C3=A4tigung der E-Mail-Adresse</title>
<style>
body { font-family: verdana, arial, sans-serif }
a.button:link { background-color: #00AA00 }
a.button:visited { background-color: #009900 }
a.button:focus,
a.button:hover,
a.button:active { background-color: #66AA00 }
</style>
</head>
<body>
<p>Guten Tag,</p>
<p>Ihre E-Mail-Adresse <strong>burninleo@abc.net</strong> wurde als Kontakt=
adresse f=C3=BCr
das Benutzerkonto "abcdefg.abcdefg" auf <strong>https://www.snipsnapme.com<=
/strong> eingetragen.</p>
<p>Falls Sie dieses Benutzerkonto selbst eingerichtet haben, best=C3=A4tige=
n Sie
Ihre korrekte E-Mail-Adresse bitte, indem Sie auf folgenden Knopf klicken.<=
/p>
<p style=3D"padding: 20px 0px">
<a href=3D"https://www.snipsnapme.com/admin/act.php?t=3D1234567890ABCDEF" c=
lass=3D"button" style=3D"padding: 10px 20px; margin: 1px; border: 1px solid=
 white; outline: 1px solid #00AA00; background-color: #00AA00; color: #FFFF=
FF; text-decoration: none">E-Mail-Adresse best=C3=A4tigen</a>
</p>
<p>Der Best=C3=A4tigungscode f=C3=BCr Ihre E-Mail-Adresse lautet: 123456789=
ABCDEF</p>
<p>Falls Sie das Benutzerkonto <u>nicht</u> selbst eingerichtet haben,
will m=C3=B6glicherweise eine andere Person Ihre E-Mail-Adresse missbrauche=
n.
In diesem Fall l=C3=B6schen Sie diese E-Mail bitte einfach.</p>
<div style=3D"margin-top: 24px; border-top: 2px solid #999999; border-botto=
m: 2px solid #999999; padding: 8px 0px">
snipsnapme.com &ndash; <a href=3D"https://www.snipsnapme.com">https://www.s=
nipsnapme.com</a>
</div>
</body>
</html>
--=_SubliminalMessagesInCinemaDontWork-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:45:05.340

您必须在所有仅包含点的行前面加上一个`.`（点）。

```
preg_replace('/^(\.+)$/m', '.\1', $mail) 
```

这是传输层的脏器。SMTP 是最可能的罪魁祸首（请参阅[邮件功能文档](http://php.net/manual/en/function.mail.php "PHP：邮件 - 手册")中的警告），但可能还有其他类似行为的低级机制。例如，如果您调整了[sendmail_path](http://php.net/manual/en/mail.configuration.php#ini.sendmail-path "PHP：运行时配置 - 手册")设置或使用了错误的`sendmail`程序，您可能会遇到类似的问题。

# python - 在 python 中使用 heroku 会导致 http:500 错误

> ID：13949426
> 
> 赞同：2
> 
> 时间：2012-12-19T09:41:10.827
> 
> 标签：python, http, heroku, httplib

我有一个 python 应用程序，它通过 http 提取 xml 数据。我想在 Heroku 上运行这个应用程序。如果我只返回“hello world”而不尝试提取 xml，则该应用程序在 Heroku 上运行良好。当我在本地运行这个应用程序（通过使用“工头”命令，或者直接通过 python）它运行完全正常，并且“response.status”为 200，正如预期的那样。如果我部署到 Heroku，到那时它运行良好，但我得到的是 response.status: 500，因此无法检索 XML 数据。

什么可能导致这个问题？

这是相关的功能。

**编辑：** 我尝试了其他具有相同结果的 URL：我在本地运行时得到 HTTP 状态 200，但在 Heroku 上运行时得到 500

```
def fetchBoBXml():
  # Fetch XML info from BoB
  conn = httplib.HTTPConnection(BOB_DOMAIN, BOB_PORT)
  conn.request("GET", BOB_URL)
  response = conn.getresponse()
  status = response.status
  if status != 200:
    print "BOB response status %s" % status
    raise Exception("BoB HTTP response status: %s" % status)
  data = response.read()
  conn.close()  
  return data 
```

# facebook - 从 facebook 页面的预定帖子中获取预定时间

> ID：13949444
> 
> 赞同：0
> 
> 时间：2012-12-19T09:42:10.697
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

如何获取 Facebook 页面中预定帖子的发布时间？

在图形 API 中，我只获得创建时间和更新时间，但我找不到发布时间，以了解帖子何时发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:48:48.267

（代表欧普）

几个星期后，我想通了：

```
 <?php
//Get Facebook SDK Object
$config = array(
  'appId'  => APP_ID,
  'secret' => API_SECRET,
  'cookie' => true,
);

$facebook = new Facebook($config);

//Create Query
$params = array(
    'method' => 'fql.query',
    'query' => "SELECT message,scheduled_publish time FROM stream 
        WHERE is_published=0 AND scheduled_publish_time!=''",
);

//Run Query
$result = $facebook->api($params);
?> 
```

完成后，这将向您显示活动记录在 Facebook 页面中的相同帖子。

# iphone - 禁用 UIWebView 中的超链接

> ID：13949448
> 
> 赞同：2
> 
> 时间：2012-12-19T09:42:44.183
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [禁用 UIWebView 中的链接？](https://stackoverflow.com/questions/2098797/disable-links-in-uiwebview)

如何禁用 a 中的超链接`UIWebView`并使其看起来像普通文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T09:59:36.053

设置 UIWebview 的这个属性

```
yourWebView.dataDetectorTypes = UIDataDetectorTypeNone; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:49:30.403

您无法更改其中的内容，但您可以通过提供委托`UIWebView`来禁用`UIWebView`对其中链接的响应，并在您的代码中实现以下内容：`UIWebView`

`webView:shouldStartLoadWithRequest:navigationType:`将方法委托给`return NO;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:48:04.263

`UIWebView`当您想使用此方法时，首先将委托设置为...

```
[self.webview setDelegate:sethere]; 
```

之后，您可以使用添加此类逻辑的`shouldStartLoadWithRequest:`委托方法来禁用如下所示的超链接...`UIWebView`

```
 -(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType;
 {

            NSURL *loadURL = [[request URL]retain];
            //change next line to whatever condition you need, e.g.
            //[[loadURL relativeString]  ....] contains a certain substring 
            //or starts with certain letter or ...
            if([[loadURL scheme] isEqualToString: @"file"])
            {
               [loadURL release]; 
            return TRUE;
            }
            [loadURL release];
            return FALSE;
  } 
```

另请参阅此[webView 中的参考：shouldStartLoadWithRequest:navigationType](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3ashouldStartLoadWithRequest%3anavigationType%3a)链接

我希望这对你有帮助....

# javascript - 使用javascript根据行位置将表拆分为两个

> ID：13949455
> 
> 赞同：1
> 
> 时间：2012-12-19T09:43:05.143
> 
> 标签：javascript

我想根据行位置将一个表拆分为两个表。我有办法找到表格的行位置。现在我的要求是仅使用 javascript 将表拆分为两个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:05:56.560

希望能帮助到你：

```
function splitTableIntoTwoTables(table, idx) {

    var rows = table.getElementsByTagName("tr"),
        newtable = table.cloneNode(false),
        tbody = document.createElement("tbody");

    if (table.hasAttribute("id")) {
        newtable.setAttribute("id", "splitted_"+table.getAttribute("id"));
    }

    for (var i = rows.length - 1; i > idx; i--) {
        if (tbody.childNodes) {
            tbody.insertBefore(rows[i].cloneNode(true), tbody.lastChild);
        } else {
            tbody.appendChild(rows[i].cloneNode(true));
        }
        table.deleteRow(i);
    }

    newtable.appendChild(tbody);
    var p = document.createElement("p");
    p.appendChild(document.createTextNode("=============>"));
    if (table.nextSibling) {
        table.parentNode.insertBefore(p, table.nextSibling);
    } else {
        table.parentNode.appendChild(p);
    }
    if (p.nextSibling) {
        table.parentNode.insertBefore(newtable, p.nextSibling);
    } else {
        table.parentNode.appendChild(newtable);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T17:57:24.183

请尝试我的变体。适用于有或没有 tbodies 的表。它需要一个表和一个行索引，然后将其划分。

```
function split(table, index){
    var temp, clone = table.cloneNode(false),
        trs = table.getElementsByTagName('tr'),
        tbodies = table.getElementsByTagName('tbody');
    if (++index>=trs.length) return;
    if (clone.id) clone.id+='-clone';
    while (index>0) {
        if(tbodies[0] && (temp = tbodies[0].getElementsByTagName('tr').length) <= index) {
            index -= temp;
            clone.appendChild(tbodies[0]);
        } else {
            temp|0 && (temp = tbodies[0] ? clone.appendChild(tbodies[0].cloneNode(false)) : clone);
            temp.appendChild(trs[0]);
            index--;
        }
    }
    table.parentNode.insertBefore(clone, table);
}; 
```

# vsto - VSTO：MS Project - 计算子任务性能问题/解决方法的 ID

> ID：13949461
> 
> 赞同：1
> 
> 时间：2012-12-19T09:43:20.963
> 
> 标签：vsto, ms-office, ms-project

我有一个包含任务列表的数据库。我正在使用 VSTO 从该数据库中读取数据并从中创建一个新的 Microsoft Project。任务的上限为 3000。

问题是数据库中的记录是随机顺序的。当然，它们在同一个表中以主外键的形式定义了父子关系。但是，有两个限制：

1.  我必须一口气读完所有的记录。
2.  读取记录的顺序可以是完全随机的。

第二个问题是真正的问题发生的地方。因为我很可能会`OutlineLevel = 1`先得到所有记录，然后是一些`OutlineLevel = 5`记录，然后是一些`Outline Level = 2`，依此类推（*完全随机*）。

由于 VSTO API 在做`ParentTask.OutlineChildren.Add(<Task>)`, 将创建该父级的子任务的意义上是奇怪的，但会将 TASK 添加到网格的最后一行！

这迫使我为遇到的每条记录重新计算 ID。与`ID`，我的意思是**在 MS Project 中记录必须去的行号**。

问题在于，如果我为 3000 个任务重新计算它，它会变得越来越慢。一开始，它每秒可以插入 30-40 个任务，但**处理所有 3000 个任务需要 11 个小时**！（*这当然是不可接受的*）。

是否有一些 API 方法可以快速做到这一点？或者是否有另一种方法可以重新计算子任务的 ID。

*   计算子任务 ID 的代码是迭代的。它从父任务的 ID 开始，并尝试根据子任务的兄弟编号计算子任务将具有的 ID（*`SiblingNumber`存储在我构建的数据结构中，它充当包装器`MSProject.Task object`*）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:00:13.557

COM 接口很慢，所以最重要的是在自己的代码中尽可能多地进行处理，并且只有在您拥有按行顺序排列的任务列表后，才能将它们插入到 Project 中。

至于实际的算法，我会创建一个树形结构，当你浏览你的数据库时，我会创建一个新节点，不仅是为了读取的任务，而且如果还没有遇到它的隐含父节点。所以：

阅读每条记录并：查看父项是否已经存在（为此使用字典）。如果没有，请创建它（并添加到字典中）。查看任务是否已经存在（为此使用相同的字典）。如果没有，请创建它（并添加到字典中）。将任务添加到父级的子级列表中。

（首先创建一个顶级任务可能更优雅，然后让任何没有父级的任务成为这个顶级的子级。）

完成后，以深度优先的方式遍历树，然后按行顺序完成任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:49:58.153

解决该问题的最简单方法是在 中列出的第一个任务之前插入一个子任务`Task.OutlineChildren`。但它只有在已经有一些子任务时才有效。

下一个足够快的解决方案是将项目结构读入附加组件中的某些数据结构并扫描它，而不是每次都调用 COM。当您更改项目时，我只需要自己更新结构。

当然，如果您只想在其兄弟姐妹列表的末尾插入几个任务，您可以扫描下一个具有与其父级相同 OutlineLevel 的任务，并在该任务之前插入。

但无论如何，在批量插入/更新时缓存项目结构是最合理的解决方案。

# c - 使用 pthread_exit() 返回 retval 时的编译警告

> ID：13949463
> 
> 赞同：3
> 
> 时间：2012-12-19T09:43:23.193
> 
> 标签：c, linux, pthreads

我有以下内容：

```
void *Thrd(void *data)
{
    int ret;
    ret = myfunc();
    pthread_exit((void *)ret);
}

int main(int argc, char *argv[])
{
    int status;

    pthread_create(&Thread, NULL, Thrd, &data);

    pthread_join(txThread, (void **)&status);
    if (status)
        printf("*** thread failed with error %d\n", status);
} 
```

它可以工作，我可以读取*状态*，但我在编译时收到以下警告：

```
test.cpp: In function ‘void* Thrd(void*)’:
test.cpp:468:26: warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] 
```

这是与`pthread_exit()`

我根本找不到问题所在:( ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:11:59.177

因此，您正试图从线程函数返回一个整数值。POSIX 线程函数只能返回`void*`.

有几种方法可以从另一个线程返回值：

1）您可以`void*`来回转换一个整数，只要`void*`足够宽以保持该值而不会被截断：

```
void *Thrd(void *vdata) {
    int value = ...;
    void* thread_return_value = (void*)value;
    return thread_return_value;
}
// ...
void* status;
pthread_join(txThread, &status);
int value = (int)status; 
```

2) 将返回值的地址传递给线程函数并让线程函数设置该值：

```
struct Data { int return_value; };

void *Thrd(void *vdata) {
    // ...
    int value = ...;
    struct Data* data = vdata;
    data->return_value = value;
    return NULL;
}
// ...
pthread_create(&Thread, NULL, Thrd, &data);
pthread_join(txThread, NULL);
int value = data->return_value; 
```

3）让线程分配返回值。join() 的另一个线程需要读取该值并释放它：

```
void *Thrd(void *vdata) {
    // ...
    int* value = malloc(sizeof *value);
    *value = ...;
    return value;
}
// ...
void* status;
pthread_join(txThread, &status);
int* value = status;
// ...
free(value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:47:59.543

而不是这个：

```
pthread_exit((void *)ret); 
```

写这个：

```
pthread_exit((void *)&ret); 
```

在“pthread_exit((void *)ret)”中，您告诉`pthread_exit`在 address 有一个返回值`pertaining to the value contained in ret variable`。您希望将结果存储在 ret 的地址，所以它应该是`pthread_exit(&ret)`.

Now`ret`是一个局部整数变量。如果你写：

```
int *ret=malloc(sizeof(int));

if(ret==NULL)

  //handle the error

*ret=func();

pthread_exit(ret); 
```

并且不要忘记`free`指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:53:12.940

您正在将非指针转换为指针 - 这可能就是您收到警告的原因。也许您可以修改代码以使用 a`int*`而不是您的`int ret`，并将其转换为`void*`.

编辑：正如托尼狮子所说。

# bluetooth - Windows 上的蓝牙调试。ULZ 文件到 btsnoopfile

> ID：13949465
> 
> 赞同：1
> 
> 时间：2012-12-19T09:43:31.437
> 
> 标签：bluetooth

看这篇文章：

[蓝牙调试工具](https://stackoverflow.com/questions/5306982/bluetooth-debugging-tools)

您可以通过捕获 USB 端口数据来捕获蓝牙流量。我已经完成并将文件保存为 .ULZ 文件。问题是该文章没有告诉您如何将文件转换为 btsnoop 文件。

有人有什么想法吗？

# android - File Comparision by Byte

> ID：13949466
> 
> 赞同：0
> 
> 时间：2012-12-19T09:43:32.690
> 
> 标签：android, file, compare, byte

I want to compare two same size files byte by byte for duplicacy.

I'm using this code to compare but it's not working:

```
boolean match=true;                    
BufferedInputStream fs1;
                    BufferedInputStream fs2;
                    byte[] f1 = new byte[(int)f1size],f2=new byte[(int)f2size];
                    try {
                        fs1 = new BufferedInputStream(new FileInputStream(file1));
                        fs2 = new BufferedInputStream(new FileInputStream(file2));
                        fs1.read(f1, 0, f1.length);
                        fs2.read(f2, 0, f2.length);
                        fs1.close();
                        fs2.close();

                        for(int k=0;k<f1.length;k++)
                            if(f1[k]!=f2[k])
                            {
                                match=false;
                                break;
                            }

                        if(match)
                        {
                            Toast.makeText(getApplicationContext(), "Same File", Toast.LENGTH_SHORT).show();

                        }

                    } catch (FileNotFoundException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 
```

Can Anybody help how to compare files byte by byte

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:46:05.827

The `InputStream.read()` method is not guaranteed to read all the bytes asked for; you have to check the return value.

Also, for large files doing it this way will use excessive memory; you may want to consider reading chunks in a loop unless the files are known to be always small.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:01:14.320

No need to allocate huge arrays, `BufferedInputStream` does buffering for you.

```
BufferedInputStream fs1, fs2;
fs1 = new BufferedInputStream(new FileInputStream(file1));
fs2 = new BufferedInputStream(new FileInputStream(file2));
boolean match;
do {
    int b1 = fs1.read(),
        b2 = fs2.read();
    match = b1 == b2;
} while (match && b1 != -1); 
```

# javascript - JavaScript - 通过部分 id 删除元素

> ID：13949470
> 
> 赞同：3
> 
> 时间：2012-12-19T09:43:51.573
> 
> 标签：javascript, html

我需要删除其 `<div>`上的元素`id`。我知道我可以使用以下功能 -

```
function removeElement(div_id) {
   var div = document.getElementById(div_id);
   element.parentNode.removeChild(div);
} 
```

但事实是`id`-复合。它由一个不变的部分和在每个请求中变化的部分组成。这部分是一组随机数字。

我知道，在这种情况下我需要使用正则表达式。举个例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T09:50:22.810

以下是使用纯 JavaScript 而不需要任何库的方法：

```
var divs = document.getElementsByTagName('div'),
    forEach = Array.prototype.forEach,
    regex = /^foo.*$/;

forEach.call(divs, function (d) {
    if (d.id !== undefined && regex.test(d.id)) {
        d.parentNode.removeChild(d);
    }
});​ 
```

在上面的示例中，所有以 id 开头的 div 元素都`foo`将被删除。这是一个例子：http: [//jsfiddle.net/UemQ5/](http://jsfiddle.net/UemQ5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:50:09.607

您不必使用正则表达式，您可以使用这 3 个选择器之一，具体取决于您的需要：**以 开头**、**以 结尾**或**contains**。

以。。开始：`$("[id^=item]")`

以。。结束：`$("[id$=item]")`

包含：`$("[id*=item]")`

或者，如果它们不适合您的需求，这里还有更多：http: [//api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T09:46:23.423

您可以使用 jquery 选择器正则表达式来解决它:)

阅读：http: [//james.padolsey.com/javascript/regex-selector-for-jquery/](http://james.padolsey.com/javascript/regex-selector-for-jquery/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T09:49:37.800

1\. **jQuery 属性以 Selector 开头**

在 jQuery 上，“ **Attribute Starts With Selector** ”选择具有指定属性且其值正好以给定字符串开头的元素。

```
 jQuery('[attribute^="value"]') 
```

如果您想删除“id”以“ABC_”开头的 div，您的代码如下所示：

```
 $('div[id^="ABC_"]').remove(); 
```

该文件在这里 [http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

2\. **jQuery 属性以 Selector 结尾**

类似地，“**属性以选择器结尾**”选择具有指定属性且其值恰好以给定字符串结尾的元素。

```
 jQuery('[attribute$="value"]') 
```

如果要删除 'id' 以“_ABC”结尾的 div，则代码如下所示：

```
 $('div[id$="_ABC"]').remove(); 
```

该文件在这里 [http://api.jquery.com/attribute-ends-with-selector/](http://api.jquery.com/attribute-ends-with-selector/)

3\. **jQuery 属性包含选择器**

最后，“**属性包含选择器**”选择具有指定属性且值包含给定子字符串的元素。

```
 jQuery('[attribute*="value"]') 
```

如果要删除 'id' 包含“ABC”的 div，您的代码如下所示：

```
 $('div[id*="ABC"]').remove(); 
```

该文件在这里 [http://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T09:49:27.010

使用[JQuery](http://jquery.com/)，您可以通过部分 ID 获取元素

[在这里](https://stackoverflow.com/questions/1368591/jquery-partial-selectors)查看更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T10:13:40.340

我认为查询选择器最适合您

```
function myFunction()
{

var matchedElements = document.querySelectorAll("#myContainer div[id^='prefix']");

var forEach = Array.prototype.forEach;

forEach.call(matchedElements, function (el) { el.parentNode.removeChild(el); } );

} 
```

[http://jsfiddle.net/KLVP5/1/](http://jsfiddle.net/KLVP5/1/)

# iphone - iPhone 开发：UIView 的背景图像在 IOS 模拟器中似乎是双倍分辨率

> ID：13949480
> 
> 赞同：1
> 
> 时间：2012-12-19T09:44:54.543
> 
> 标签：iphone, objective-c, xcode, ios5, uiview

我正在从事我在[iPhone 开发中描述的项目：如何构建自定义视图层次结构？](https://stackoverflow.com/questions/13941786/iphone-development-how-to-build-a-custom-view-hierarchy). 我仍在努力解决我在该主题中描述的问题，同时我试图做一些有意义的事情。

我需要在第一个视图中打印背景图像，并在 _MyAppName_ViewController.m 类中编写了以下代码：

```
self.backGroundImage = [UIImage imageNamed:@"giris.jpg"];
self.view.backgroundColor = [UIColor colorWithPatternImage:self.backGroundImage]; 
```

backGroundImage 是我在头文件中声明的一个属性，类型为 UIImage。giris.jpg 是大小为 640x960 的图像，但我在模拟器中看到的是图像的左上角 320x480 大小的部分。我尝试将 IOS 模拟器设备类型从 iPhone 更改为 iPhone（Retina 3.5 英寸）和 iPhone（Retina 4.0 英寸），但我得到了相同的结果。代码中有我遗漏的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:07:44.853

请确保您包含正确的非视网膜和视网膜图像尺寸分别为 320x480 和 640x960。问题是 giris.jpg 的大小为 640x960，因其名称而被视为非视网膜。

对于非视网膜 - 320x480 - giris.jpg 对于视网膜 - 640x960 - giris@2x.jpg

# jquery-ui - 动态选择者在 JQuery-UI 中不工作可选择

> ID：13949486
> 
> 赞同：1
> 
> 时间：2012-12-19T09:45:11.143
> 
> 标签：jquery-ui, selectable, jquery-ui-selectable

我正在创建一个类似窗口的界面，其中我有一个画布，并且可以在其中动态附加多个图标。我已将画布设置为可选。问题是当我添加新图标时，我无法选择它们。

我尝试将 ui-selectee 类添加到图标中，但它也不起作用。

```
$('.canvas').selectable({ 
   filter: $('.icons'),
   autoRefresh: true,  
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:20:40.317

尝试添加参数“取消”：

```
$('.canvas').selectable({ 
   filter: $('.icons'),
   cancel: 'a',
   autoRefresh: true,  
}); 
```

或延迟参数，它有助于防止在单击元素时进行不必要的选择。 [http://api.jqueryui.com/1.8/selectable/](http://api.jqueryui.com/1.8/selectable/)

# c# - 这个数据库连接字符串有什么问题？

> ID：13949490
> 
> 赞同：6
> 
> 时间：2012-12-19T09:45:17.337
> 
> 标签：c#, mysql, database-connection

我正在尝试使用以下代码连接到我的远程 MySQL 服务器。你能告诉我我做错了什么，因为用变量替换数据库连接信息似乎不起作用。

```
 using MySql.Data.MySqlClient;       

   string db_Server = "10.0.0.0";
   string db_Name   = "myDatabase";
   string db_User   = "myUser";
   string db_Pass   = "myPassword";

   // Connection String
   MySqlConnection myConnection = new MySqlConnection("server = {0}; database = {1}; uid = {2}; pwd = {3}", db_server, db_Name, db_User, db_Pass); 
```

作为一名 PHP 开发人员，我更喜欢使用上面的代码，而不是下面的刻意转换：

```
 MySqlConnection myConnection = new MySqlConnection("server=10.0.0.0; database=myDatabase; uid=myUser; pwd=myPassword"); 
```

但正如你在这张图片中看到的那样，我得到了很多红色曲线：http: [//screencast.com/t/xlwoG9by](http://screencast.com/t/xlwoG9by)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T09:46:50.117

您的参数顺序错误，应该是：

```
db_server, db_Name, db_User, db_Pass 
```

目前是：

```
"server = {0}; database = {1}; uid = {2};   pwd = {3}"
       db_Server         db_User   db_Pass   db_Name 
```

所以你的陈述应该是：

```
MySqlConnection myConnection = new MySqlConnection(string.Format(
"server = {0}; database = {1}; uid = {2}; pwd = {3}", 
db_Server,db_Name, db_User, db_Pass)); 
```

**编辑：**根据评论和讨论，你得到的错误是你在课堂上尝试所有的东西。您应该在方法中包含这些行，并在需要的地方调用该方法。就像是：

```
class MyClass
{
    string db_Server = "10.0.0.0";
    string db_User = "myUser";
    string db_Pass = "myPassword";
    string db_Name = "myDatabase";

    public MySqlConnection GetConnection()
    {
        MySqlConnection myConnection = new MySqlConnection(string.Format(
                   "server = {0}; database = {1}; uid = {2}; pwd = {3}",
                    db_Server, db_Name, db_User, db_Pass));
        return myConnection;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:48:00.923

```
 MySqlConnection myConnection = new MySqlConnection(string.Format("server = {0}; database = {1}; uid = {2}; pwd = {3}", db_Server, db_User, db_Pass, db_Name)) 
```

string.Format() 丢失

# ruby - 如何获取 page_object 元素的 html 源代码？

> ID：13949497
> 
> 赞同：3
> 
> 时间：2012-12-19T09:45:59.677
> 
> 标签：ruby, cucumber, watir-webdriver, pageobjects, page-object-gem

想象一下，我有一个 div（用 Watir 语言）：

```
@browser.div(:id, 'home_slideshow') 
```

我需要里面的 html 代码来做一些“神奇的正则表达式”:)。获取 div html 代码的方法可能是：

```
the_div_html = @browser.div(:id, 'home_slideshow').html 
```

行。我正在使用 page_object gem，假设我将 div 作为元素，例如：

```
div(:slide_show, :id => 'home_slideshow') 
```

要获取里面的 html，我可以使用：

```
the_div_html = slide_show_element.html 
```

...但我收到了弃用警告：

```
*** DEPRECATION WARNING
*** You are calling a method named attribute_value at home_page.rb:80:in `get_slide_code'.
*** This method does not exist in page-object so it is being passed to the driver.
*** This feature will be removed in the near future. 
```

如何使用 page_object 元素获取 html 代码？正如我之前提出的一些类似问题，当然答案很简单，但我查看了 Cheezy 书、整个 stackoverflow 和页面对象 ruby​​doc 信息，但我没有找到它。你能告诉我路吗？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:57:23.633

`slide_show_element.html`应该返回元素 HTML。可以？

弃用警告仅表示页面对象 api 尚不支持`#html`方法。你应该在这里请求它：[https ://github.com/cheezy/page-object/issues?state=open](https://github.com/cheezy/page-object/issues?state=open)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T17:47:20.790

作为临时解决方法，您可以直接使用`.element`.

以下将为您提供没有折旧警告的html：

```
slide_show_element.element.html 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T10:59:47.397

我将在下一个版本中将此方法添加到 gem 中。

# java - JPA java.util.Calendar 映射相对于 java.util.Date 的优缺点

> ID：13949504
> 
> 赞同：4
> 
> 时间：2012-12-19T09:46:23.610
> 
> 标签：java, date, jpa, calendar

我们的实体中有某些数据库日期映射，映射`java.util.Calendar`如下：

```
@Temporal( TemporalType.TIMESTAMP )
@Column( name = "END_DATE" )
private Calendar end; 
```

请注意，这目前适用于 Oracle DATE 类型，其中包含日期和时间信息。我目前不明白为什么一个简单的`java.util.Date`不够（甚至更好）。

**问：**

将数据库日期时间列映射为`java.util.Calendar`而不是的优点和缺点是`java.util.Date`什么？

一个缺点`Calendar`是当有 JSF 表单时

```
<p:calendar value="#{managerBean.selectedEntity.end.time}"
            ...>
</p:calendar> 
```

你必须使用`end.time`. 显示时没问题，但是当提交并且该`Calendar`字段`end`默认为空（可选）时，例如在新的空白实体上，则提交将失败并出现异常：

```
javax.el.PropertyNotFoundException: /view/blaMasterGrid.xhtml @138,62 value="#{managerBean.selectedEntity.end.time}": Target Unreachable, 'null' returned null at 
.
.
. 
```

那么，`java.util.Calendar`过`java.util.Date`映射有什么好处呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:59:31.373

大量 java.util.Date 函数已被弃用，因此如果您的应用程序需要对这些变量执行许多操作，则不应使用它。Joda Time 是最可取的方法，而不是 java.util.Date 或 java.util.Calendar

java.util.Date 只剩下三个未弃用的函数，它们是构造函数、gettime() 和 settime()。随着代码的进行，这可能会导致问题。为了简单的映射， java.util.Date 就足够了。

# mvp - 在 MVP 中，模型可以由 BLL 共享吗

> ID：13949506
> 
> 赞同：1
> 
> 时间：2012-12-19T09:46:31.740
> 
> 标签：mvp, n-tier-architecture, business-logic-layer

我阅读了以下关于 MVP 的非常好的且内容丰富的文章：[MVP Building from scratch](http://www.cerquit.com/blogs/post/MVP-Part-I-e28093-Building-it-from-Scratch.aspx)。

参考下面的架构图（取自帖子）：

1.  我想知道表示层中定义的模型类是否也将在 BLL 层中共享。这些类是否应该构成单独项目的一部分，然后将在 BLL 中引用。
2.  也不会服务层用户使用模型类将数据传输到 BLL 和从 BLL 传输数据。

![在此处输入图像描述](../Images/58aa57386bfb6b07cd4ce7c46dbe51e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:36:19.077

取决于您的架构。您指的是移动对象（不是移动设备）或简单的实体。如果您将其放置在您的 BLL、DAL 和其他项目（如您的服务）可以引用的公共项目/库中，这是可能的……分组时有一定的规则公共对象，确保公共库中的对象是非常基本的对象和辅助类，没有 UI 库引用，因为这会破坏公共库的本质。

如果您的 BLL、DAL 具有引用实体的约束（当您将实体对象放在 BLL 或 DAL 中时会发生这种情况），请创建该实体的接口并将其放在您的公共库中，并将其用作参数而不是实体对象......

在服务上，我使用接口进行模拟...接口允许您进行水平测试（模拟），因为您可以使用接口创建模拟对象...

希望我能回答你的问题……</p>

# jquery - jquery 回调变量返回“未定义”

> ID：13949509
> 
> 赞同：1
> 
> 时间：2012-12-19T09:46:42.143
> 
> 标签：jquery, loops, callback, undefined

我是设计师，而不是程序员，我正在尝试习惯 jquery 和 javascript 进行一些实验（动画）......到目前为止，我管理了一些事情，但我现在真的没有进一步了解：我正在尝试在循环中添加回调，以使每个动画步骤在下一个开始之前完成。问题是，在这种情况下，pick 变量在我将其放入回调后立即返回“未定义”。我想这很容易解决，但我已经在网上搜索了几个小时，但无法让它工作。

任何帮助，将不胜感激。

```
for (i = 0; i < pick.length; i++)
{
    target= $('#'+pick[i]).css('left');
    console.log(target+'no1');

    $('#'+pick[i]).animate({'left':farright}, 1000, function () {
        $('#'+pick[i]).css('left', farleft, function () {
            $('#'+pick[i]).animate({'left':target}, 3000);
        });
     });    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:53:01.240

尝试

```
pick.each( function() {
    target= this.css('left');
    console.log(target+'no1');

    this.animate({'left':farright}, 1000, function () {
        this.css('left', farleft, function () {
            this.animate({'left':target}, 3000);
        });
     });  
}); 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

老实说，我不知道它是否可以解决您的某些问题，但是如果您仍然使用 JQuery，使用起来会更加优雅

# jms - activemq 读取主题消息 hermes

> ID：13949511
> 
> 赞同：1
> 
> 时间：2012-12-19T09:46:47.450
> 
> 标签：jms, activemq

我正在尝试以非编程方式阅读在 activemq 中排队的主题消息。（用于调试目的）

从 activemq admin webapp，我可以发布一个主题，但我可以阅读我发布的消息（队列不是这种情况）。

我尝试使用另一个 jms 客户端（hermes），但我遇到了同样的问题：客户端未列出主题消息。

由于我对 AMQ 很陌生，我可能完全糊涂了……有人可以帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:40:12.987

ActiveMQ 控制台只能向主题发布消息，但不能订阅它们。

在 Hermes 中这是可行的，但请注意，您需要在消息发送到主题之前开始浏览主题，因为 Hermes 在订阅后接收发送到主题的消息。这是订阅的正常工作方式。

好吧，最后的事情实际上并不完全正确，因为您可以通过在 Hermes 中指定持久的主题以及在连接上设置 clientId 来设置持久订阅者。您仍然需要在发送任何消息之前注册此使用者，因为您无法“浏览”主题上的消息，只需获取特定订阅者的消息。

另一种调试方法是在 Activemq 中编辑 camel.xml 文件并添加窃听路由：

```
<route>
  <from uri="activemq:topic:mytopic"/>
  <to uri="activemq:queue:myqueue"/>
</route> 
```

然后，您应该在“myqueue”队列中拥有每条已发布消息的副本，您应该能够在控制台中读取这些消息。

# c# - AJAX 回调不刷新页面

> ID：13949525
> 
> 赞同：0
> 
> 时间：2012-12-19T09:47:45.473
> 
> 标签：c#, asp.net, jquery

大家好，我在做 AJAX 回调时遇到问题：

```
var htmlToInject;
        function Next(step) {
            var options = {
                cache: false,
                type: "POST",
                url: "Page.aspx?Page=" + step,
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "html",
                success: function (result) {                   
                    htmlToInject = result;                  
                },
                error: function (jqXHR, textStatus, errorThrown) {                   
                },
                complete: function (jqXHR, textStatus) {                  
                    $("#form1").empty();
                    $("#form1").append(htmlToInject);                  
                }
            };
            $.ajax(options);
        } 
```

但问题在于我在哪里使用 jQuery 验证方法并且我正在动态创建控件。所以回调不会导致回发，因此不会生成控件，我通过这样做解决了这个问题：

```
 $("#form1").empty();
                        $("#form1").append(htmlToInject); 
```

然后显示新生成的控件。

但是对字段的验证给了我错误：“设置”为空。

我查看了页面源代码，之前生成的控件的源代码就在那里。我不想回帖，因为我不想要“加载”效果，因此我使用 ajax。

我该如何解决这个问题？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:54:33.680

如果您使用的是不显眼的 ajax，您可以在成功/完成功能中酌情执行此操作：

```
 $('#form1').html(htmlToInject);
$.validator.unobtrusive.parse('#form1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:55:49.447

> 我查看了页面源代码，之前生成的控件的源代码就在那里。

如果您正在谈论右键单击->查看源代码，那么它将显示您在使用常规 POST/GET 加载页面时最初从服务器获取的 HTML（某些浏览器甚至可能会重复向服务器发出请求以获取它）。如果您想查看 JS/AJAX 所做的更改 - 您需要使用开发人员工具。所有现代浏览器都有。FireFox 可能需要安装 Firebug。只需按 F12 即可查看这些工具。

> 但是对字段的验证给了我错误：“设置”为空。

更改表单内容后，我没有看到任何验证初始化代码：

```
complete: function (jqXHR, textStatus) {                  
                    $("#form1").empty();
                    $("#form1").append(htmlToInject);                  
                } 
```

放置新的表单元素后，您应该再次添加`$("#form1").validate({...})`（或如何初始化验证插件）。

# assembly - 我是否需要了解汇编程序才能反汇编可执行文件？

> ID：13949526
> 
> 赞同：1
> 
> 时间：2012-12-19T09:47:45.743
> 
> 标签：assembly, disassembly

我是否需要了解汇编程序才能反汇编可执行文件？并了解程序在做什么？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:50:43.110

> 我是否需要了解汇编程序才能反汇编可执行文件？

不，您只需要一个反汇编器/调试器。

> 并了解程序在做什么？

是的。一旦反汇编器产生了反汇编，您应该知道如何阅读反汇编以及各种指令在做什么。您还应该了解 CPU 的体系结构，例如存在哪些寄存器、内存模型是什么、存在哪些特殊功能寄存器等。您还应该对运行可执行文件的操作系统有基本的了解，以便了解某些子例程调用或对（受保护的）操作系统层的调用。

所有这些都是系统特定的——一个好的起点通常是具体 CPU 的数据表/手册，其中通常包含有关架构的部分和描述指令集的参考部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:00:36.860

阅读反汇编程序有一些解决方法。在您使用 IDA 反汇编程序的情况下，您可以应用 HexRays 插件，该插件可以从之前捕获的原始程序集构建 C 样式代码（只需打开您感兴趣的函数的代码并按 F5）。如果您根本不了解汇编程序，它可能会很有用，但根据我的经验，HexRay 并不完美，有时会生成不正确的 C 样式代码，有时根本无法生成代码。因此，由于这个原因，我仅将其用作代码分析中的辅助工具。但是如果你根本不知道汇编程序，你可以尝试使用它。

# javascript - 如何提高性能..？

> ID：13949527
> 
> 赞同：1
> 
> 时间：2012-12-19T09:47:57.890
> 
> 标签：javascript, jquery

```
function removeTds() {
    var elements = $('#goldBarList tr:not(:eq(0))').filter(':has(:checkbox:checked):lt(50)');
    var count = elements.length;
    elements.each(function() {
        grossWeightTotal = grossWeightTotal - $('#goldBarList tr:eq(' + $(this).index() + ') td:eq(8)').text();
        netWeightTotal = netWeightTotal - $('#goldBarList tr:eq(' + $(this).index() + ') td:eq(9)').text();
        fineOunceTotal = fineOunceTotal - $('#goldBarList tr:eq(' + $(this).index() + ') td:eq(10)').text();
    });
    elements.remove();
    if(count === 50) window.setTimeout(removeTds, 1);
}
removeTds(); 
```

上面的代码导致“停止运行这个脚本？” 迅速的。我有 4000 条记录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T09:51:24.790

您的代码本质上是缓慢且可优化的（`$(this).index()`例如缓存），但最大的问题是，如果您有 50*N 条记录（例如 4000...），您要求浏览器每 1 毫秒运行一次函数。

只需一次清洁即可。

例如 ：

```
function removeTds() {
    var elements = $('#goldBarList tr:not(:eq(0))').filter(':has(:checkbox:checked)');
    elements.each(function() {
        var index = $(this).index();
        grossWeightTotal = grossWeightTotal - $('#goldBarList tr:eq(' + index + ') td:eq(8)').text();
        netWeightTotal = netWeightTotal - $('#goldBarList tr:eq(' + index + ') td:eq(9)').text();
        fineOunceTotal = fineOunceTotal - $('#goldBarList tr:eq(' + index + ') td:eq(10)').text();
    });
    elements.remove();
}
removeTds(); 
```

如果您想在更改复选框时重新进行清洁，请添加：

```
$('input[type="checkbox"]').change(removeTds); 
```

当然你也可以绑定到一个按钮：

```
$('#removeButton').change(removeTds); 
```

# jquery - jQuery - 在 $.each 中定义的变量，但在外部未定义

> ID：13949535
> 
> 赞同：0
> 
> 时间：2012-12-19T09:48:10.067
> 
> 标签：jquery, loops, foreach

我有以下代码，这让我发疯：

```
$.each(originalSteps, function() {
                    if($(this).attr('id') == 'ps_attributes_step_'+(parseInt(triggered_step)+1))
                    {
                        alert('testing validity');
                        var newOne = $(this);
                    }
                });
                console.log(newOne) 
```

现在，警报被触发，但 newOne 在循环外未定义。有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:49:55.417

那是因为你已经在里面声明了变量。如下更改您的代码。

```
var newOne;
$.each(originalSteps, function() {
    if($(this).attr('id') == 'ps_attributes_step_'+(parseInt(triggered_step)+1))
    {
        alert('testing validity');
        newOne = $(this);
        return false;
    }
});

console.log(newOne); 
```

编辑添加return false。请参阅下面的评论以获取解释。

# java - 使用存储过程保存休眠对象

> ID：13949538
> 
> 赞同：0
> 
> 时间：2012-12-19T09:48:13.873
> 
> 标签：java, oracle, hibernate, stored-procedures, orm

我有一个场景，我需要将实体及其依赖对象持久保存到数据库中。我遇到了一个位置，我必须从 Web 应用程序中一个接一个地插入大约 50000 个这样的对象。现在循环执行此操作大约需要 3 个小时来处理。

我想更改将休眠实体传递给存储过程并在数据库端执行它们的方法，因为这将花费更少的时间来执行。

我想知道这是否可以做到，如果可以，如何做到这一点。下面的例子可以作为参考。

父母 A，父母 B - 两者可能有也可能没有依赖性。家长 C - 独立家长。父母 B 有 3 个孩子 - 孩子 A、孩子 B、孩子 C。孩子 B 也引用了父母 C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:04:41.283

> 我想更改将休眠实体传递给存储过程的方法

这听起来是个非常糟糕的主意。就像在我的圣诞布丁里放培根一样，两者都很好，但不应该混用。

您是否看到过[休眠批处理](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html)正是针对此问题的。

# cakephp - 如何在 cake php 中设置 cronjobs？

> ID：13949539
> 
> 赞同：12
> 
> 时间：2012-12-19T09:48:13.913
> 
> 标签：cakephp

如何在 cakephp 中使用 cron 作业在 Ubuntu 上调用控制器的操作，我正在尝试通过 crontab 执行此操作，但它不起作用？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-19T16:32:08.060

## 使用外壳

在 cron 作业中使用 CakePHP 应用程序的“蛋糕方式”是创建 shell，然后将其作为 cron 作业调用。

即创建一个shell来执行任务，然后将其添加到crontab（`crontab -e`在linux机器上）：

```
0 * * * *       cd /path/to/app/ && Console/cake your_shell_name params 
```

文档中介绍了[创建 shell](http://book.cakephp.org/2.0/en/console-and-shells.html)并将[它们与 cron 一起使用。](http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T06:13:49.070

由于我们不需要 MVC 的 View 层，我也建议使用 Cake shell 而不是在普通控制器中编写它。这也将减少诸如 beforeFilter、beforeRender 等控制器的各种回调函数的内存负载。

然后在 **nix cron 选项卡中为您的 CakeShell 中编写的 cron 输入一个条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T09:20:32.550

这可以通过以下步骤轻松完成 -

1）在控制台/命令中创建一个shell让我们说HelloShell.php

```
 <?php
    class HelloShell extends AppShell
    {
    public function main()
    {
    //Your functionality here...
    }

    }

    ?> 
```

这个shell可以被Console/cake hello调用

2）编写命令`crontab-e`。这将打开默认编辑器或您现在选择的编辑器，因为我们希望我们的shell应该每5分钟运行一次： -

```
 */5 * * * * /PATH TO APP/Console/cake hello 
```

为了更好地理解，请参阅[https://www.youtube.com/watch?v=ljgvo2jM234](https://www.youtube.com/watch?v=ljgvo2jM234)

3）如果您想在 Shell 中调用控制器的操作，只需导入该特定控制器，让我们说 AppController 通过`App::uses('AppController', 'Controller');`

现在在 Shell 中创建对象 AppController

```
$object =new AppController();
$object->func_in_controller(); 
```

现在可以在 Shell 中通过以下方式访问函数的参数`$object->func_param;`

谢谢！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T09:57:47.377

您可以创建一个直接调用 URL 的 cron 作业：

```
php -f http://yoursite.com/yourController/yourAction/params > /dev/null 
```

或者你也可以使用相对路径：

```
php -f CakePHP/yourController/yourAction/params > /dev/null 
```

[您可以在此处](http://en.wikipedia.org/wiki/Cron_%28Unix%29)查看如何使用`cron`for unix 。

无论如何，如果该操作只能从 cron 作业中使用，而不是通过 URL 提供给任何其他用户，我建议您使用 CakePHP Shell。

[您在CakePHP 文档](http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html)中有更多关于如何从 cron 作业调用 Cake Shell 的信息。

# python-2.7 - gspread 之类的：帮我获取单元格坐标（不是值）

> ID：13949540
> 
> 赞同：5
> 
> 时间：2012-12-19T09:48:17.203
> 
> 标签：python-2.7, cell, google-sheets, gspread

通过使用 GSpread，我从谷歌电子表格返回了一系列单元格，该电子表格的所有元素如下所示：

```
<Cell R1C1 'Sandero'> 
```

我知道如何从这里获取单元格值：

```
cell.value 
```

但我也想单独获取地址（在这种情况下为 R1C1）。如果我能以 (1,1) 格式获得它，它必须是 (R1,C1) 甚至更好（也许通过使用字典？）

你看我也需要地址，因为我稍后会用这些值声明一个图表。

我正在使用 Python 2.7 和最新的 Gspread 库。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T11:58:50.007

获取单元格坐标的最佳方法是使用单元格的实例属性`row`和`col`. 这样您的代码可以简化为：

```
for cell in cell_list:
    print cell.value
    print "Row:", cell.row, "Column:", cell.col 
```

要获得一个元组，只需将其包裹在括号中：`(cell.row, cell.col)`。

由于我是 gspread 的作者，因此我更新了[库页面](https://github.com/burnash/gspread#google-spreadsheets-python-api)以明确如何获取单元格的坐标。感谢您指出缺失的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:05:41.593

几个小时后，我设法自己完成了肮脏的工作。

所以我有从已经打开的谷歌电子表格获得的单元格范围内的数据：

```
cell_list = worksheet.range('A1:J8') 
```

这包含`<Cell R1C1 'Sandero'>`但也`<Cell R1C2 '23'>`等等。

现在，为了从`<Cell R1C1`零件中获取稍后在项目中用于创建图形的坐标 (1,1)，我意识到最好的方法是这样的：

```
for cell in cell_list: # will check all elements of the worksheet range A1:J8
        print cell # for example at one point this is <Cell R1C1 'Sandero'>
        print cell.value # Sandero
        cella = re.findall(r'\d+',str(cell)) # will take only numbers from <Cell R1C1 'Sandero'>
        print cella[:2] # will give you the first two elements of list cella. 
                         #In this case '1','1'. This is exactly what I need.
      # to specify [:2] it's important if it would be <Cell R1C2 '23'>. 
      # Otherwise cella would return '1','2','23'. Nasty. 
       # I need only coordinates to use them as index in graf. 
```

然后必须小心将我的坐标引用为`int(cella[0])`，`int(cella[1])`因为我将它们作为字符串从`re.findall(r'\d+',str(cell))`

我相信我的解决方案非常混乱且过于复杂，但至少它有效。我仍在等待该堆栈溢出，所以我希望有人有更好的主意。

# c# - 在嵌套更新面板中查找导致回发的控件名称

> ID：13949544
> 
> 赞同：1
> 
> 时间：2012-12-19T09:48:44.163
> 
> 标签：c#, asp.net, updatepanel

我有这样的结构。

```
 UpdatePanel1
     |    |
     | CheckBoxes - in code behind CheckBoxCheckedHandel() method
     | 
     |---Usercontrol1
              |
            UpdatePanel2
                |
               Button1 
```

现在问题来了。

当我单击`Button1`时，它会导致`UpdatePanel1`刷新和调用`CheckBoxCheckedHandel()`方法。所以要么我想要一个导致回发的控件名称，要么我只想`UpdatePanel2`在`Button1`单击时刷新。

我想说的另一件事是，我在两个更新面板上都显示了时间，以查看它们是否在发生某些事情时刷新。此时button1点击事件并没有刷新`UpdatePanel1`时间但仍然调用CheckBoxCheckedHandel()方法。

我在过去两天一直被这个问题困扰，请帮忙。

注意：UpdatePanel1 - updatemode - 有条件且无触发 UpdatePanel2 - updatemode - 有条件且 asp:asyncTriggre 用于 button1 点击事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:54:11.650

以下是获取导致异步回发的控件 ID 的方法。在您的 Page_Load 处理程序中放置以下代码：

```
 if (ScriptManager.GetCurrent(Page).IsInAsyncPostBack)
    {
        string id = Utils.GetAsyncPostBackControlID(Page, Page.Request);
    } 
```

以下函数获取 ID：

```
 public static string GetAsyncPostBackControlID(Page page, HttpRequest request)
    {
        string smUniqueId = ScriptManager.GetCurrent(page).UniqueID;
        string smFieldValue = request.Form[smUniqueId];

        if (!String.IsNullOrEmpty(smFieldValue) && smFieldValue.Contains('|'))
            return smFieldValue.Split('|')[1];

        return String.Empty;
    } 
```

导致回发的控件的 ID 存储在隐藏字段中，其名称是页面的 ScriptManager 的 ID。值以以下格式存储：`Script_Manager_ID|Control_ID`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T23:23:49.953

要获取导致异步回发的控件，您可以使用以下内容而不是解析

```
var asyncPostBackSourceControl = Page.FindControl(scriptManager.AsyncPostBackSourceElementID) 
```

# android - 在 Swipe-Tab 应用程序中将地图插入片段

> ID：13949546
> 
> 赞同：0
> 
> 时间：2012-12-19T09:48:51.217
> 
> 标签：android, fragment, mapactivity

我正在开发一个带有标签和滑动的应用程序。在选项卡中，我加载了带有文本和图像的片段，但是当我尝试放置地图时，它返回错误。在 FragmentActivity 我有这个：

> ```
>  public Fragment getItem(int position) { 
>                 Fragment newfragment;
> 
>       if (position == 0) {
> 
>           newfragment = new Fragment1();
> 
>       } else if (position == 1) {
> 
>           newfragment = new Fragment2();
> 
>       } else if (position == 2) {
> 
>           newfragment = new Fragment3();
>                       } else if (position == 3) {
> 
>           newfragment = new MapFragment();
> 
>       } else {
> 
>           newfragment = new StartFragment();          }
> 
>       return newfragment;         } 
> ```

MapFragment.java 从 Fragment 扩展，Logcat 说我需要调用 MapActivity，但我没有找到我调用 MapActivity 并用 MapActivity 填充片段的方式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:26:23.560

试试这种方式来选择片段：

```
public Fragment getItem(int page) {
    Fragment fragment = null;
    switch (page) {
    case 0:
      fragment = new Fragment1();
      break;
    case 1:
      fragment = new Fragment2();
      break;
    case 2:
      fragment = new Fragment3();
      break;
    }
    return fragment;
} 
```

记得使用片段管理器来初始化适配器类。

# android - 如何在小部件中实现 AUDIO_SERVICE

> ID：13949547
> 
> 赞同：0
> 
> 时间：2012-12-19T09:48:54.467
> 
> 标签：android, android-widget, android-audiomanager

我正在实现音频管理器小部件应用程序。我想使用以下代码。

```
this.getSystemService(Context.AUDIO_SERVICE) 
```

但我不能使用，因为我扩展了 AppWidgetProvider 类（不是 Activity 类）。

我应该如何更改我的编码？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:05:01.110

[您可以在AppWidgetProvider](http://developer.android.com/reference/android/appwidget/AppWidgetProvider.html#)中覆盖的所有公共方法都将收到提供程序正在其中运行的 Context。通过该上下文，您应该能够获得系统服务：

```
audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:00:42.777

我不知道确切的答案，但在我的情况下，以下链接帮助了我：[Sound pool and Service](https://stackoverflow.com/questions/5580537/androidsound-pool-and-service)

# mysql - 如何在 MySQL 中注释存储过程

> ID：13949554
> 
> 赞同：11
> 
> 时间：2012-12-19T09:49:09.967
> 
> 标签：mysql, stored-procedures, comments

我正在尝试使用 MySQL 工作台评论存储过程。我尝试使用以下语法 -

```
/**
Hai
*/ 
```

和

```
-- hai 
```

这两个将完美执行，但更改永远不会更新到存储过程，而打开存储过程它不会显示任何更改。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T09:55:31.650

您应该将您的评论放在过程**主体**中，即 和 之间的`BEGIN`内容`END`。其余代码是创建过程的说明，一旦运行它们就会丢失。

注释语法和往常一样：

*   `/* ... */`
*   `--<space>`

MySQL Workbench 方便地警告这一点：

![在此处输入图像描述](../Images/d1c5325cee38451615df159b23d2ddd3.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-10-16T11:32:48.790

MySQL 有评论功能。官方手册[在这里](http://dev.mysql.com/doc/refman/5.1/en/create-procedure.html)。

例子：

```
DELIMITER $$
CREATE PROCEDURE proc_name()
COMMENT 'this is my comment'
BEGIN
/*here comes my voodoo*/
END $$
DELIMITER ; 
```

这样，您还可以将评论保存在数据库中，而不仅仅是在源代码中。

# php - PHP：stream_socket_server()

> ID：13949557
> 
> 赞同：5
> 
> 时间：2012-12-19T09:49:23.373
> 
> 标签：php, php-socket

我有一个自制的 PHP TCP 聊天服务器，但它没有办法检测远程断开连接。

如果有人知道一种方法来获取 stream_socket_server() 并吐出与之相关的所有内容，我将不胜感激。

然后你可以在*psuedocode*中运行这样的循环：

```
$main_socket=stream_socket_server("tcp://",....)

//Do Something.... say, wait for a connection (with stream_socket_accept())?

for (each CONNECTION in $main_socket)
{
//Do something with or to that connection
}

//Loop back... if you need to say, wait for another connection 
```

**或者**，我是否可以检查当前是否连接了使用 $stream_socket_accept() 创建的变量。

在我弄清楚这一点之前，这个项目已经破产了。我会感谢任何可以帮助我解决这个问题的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:11:59.690

`socket_read()`据我所知，了解远程主机是否已断开连接的正确方法是测试 false 。

看看这个问题；[PHP - 检测远程主机断开连接](https://stackoverflow.com/questions/9085615/php-detecting-remote-host-disconnection)

# android - 当单击行中的 itme 时，Android 在 baseAdapter 的列表视图中重绘或刷新单行

> ID：13949560
> 
> 赞同：1
> 
> 时间：2012-12-19T09:49:27.740
> 
> 标签：android, android-listview

这是一个使用 baseAdapter 获取数据的列表视图，我想单击播放按钮来隐藏它并显示暂停按钮而不是它，反之亦然，我在方法 getView() 中将 onClickListener 添加到 baseAdapter 的播放按钮和尝试隐藏它并显示暂停按钮但没有任何效果......!!?? 结果总是在列表视图的下一行隐藏和显示按钮，有时不是......？？我在 baseAdapter 和 Activity 的 clickListener 中添加了方法 notifyDataSetChanged() 但也没有工作.....!!？plz plz plz帮助我我已经坚持了2天。这是我的 Activity 类和 Adapter 类的代码。

```
public class AudioBookAdapter extends BaseAdapter {

private Context context;
private BookIndex bookIndex;
private ViewHolder holder;
private int selectedPosition = -1;
private MediaPlayer mediaFileTrack = new MediaPlayer();

public AudioBookAdapter(Context context, BookIndex bookIndex) {
    this.context = context;
    this.bookIndex = bookIndex;
}

/**
 * @return the audioFileTrack
 */
public MediaPlayer getMediaFileTrack() {
    return mediaFileTrack;
}

/**
 * @param audioFileTrack the audioFileTrack to set
 */
public void setMediaFileTrack(MediaPlayer mediaFileTrack) {
    this.mediaFileTrack = mediaFileTrack;
}

/**
 * @return the context
 */
public Context getContext() {
    return context;
}

/**
 * @param context the context to set
 */
public void setContext(Context context) {
    this.context = context;
}

/**
 * @return the bookIndex
 */
public BookIndex getBookIndex() {
    return bookIndex;
}

/**
 * @param bookIndex the bookIndex to set
 */
public void setBookIndex(BookIndex bookIndex) {
    this.bookIndex = bookIndex;
}

@Override
public int getCount() {
    return getBookIndex().getBookIndexes().size();
}

@Override
public String getItem(int position) {
    return getBookIndex().getBookIndexes().get(position);
}

@Override
public long getItemId(int position) {
    return 0;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    holder = null;
    if (convertView == null) {
        LayoutInflater inflater = LayoutInflater.from(parent.getContext());
        convertView = inflater.inflate(R.layout.audio_track_row, parent, false);
        holder = new ViewHolder();
        holder.txtAudioFileTitle = (TextView) convertView.findViewById(R.id.txtAudioFileTitle);
        holder.imgSelectedAudioFile = (ImageView) convertView.findViewById(R.id.imgSelected);
        holder.imgUnselectedAudioFile = (ImageView) convertView.findViewById(R.id.imgUnselected);
        holder.flUnselectedTrack = (FrameLayout) convertView.findViewById(R.id.flUnselectedTrack);
        holder.flSelectedTrack = (FrameLayout) convertView.findViewById(R.id.flSelectedTrack);
        holder.audioSeekBar = (SeekBar) convertView.findViewById(R.id.audioSeekBar);
        holder.btnPause = (ImageButton) convertView.findViewById(R.id.btnPausePaly);
        holder.btnNext = (ImageButton) convertView.findViewById(R.id.btnNext);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txtAudioFileTitle.setText(getBookIndex().getBookIndexes().get(position));

    if (getSelectedPosition() == position) {
        Log.i("JML...Info", "Position in Adapter = " + position);
        holder.flSelectedTrack.setVisibility(View.VISIBLE);
        holder.flUnselectedTrack.setVisibility(View.GONE);
        holder.btnPause.setSelected(true);
        holder.btnPause.setFocusable(true);
        holder.btnPause.setFocusableInTouchMode(true);
    } else {
        Log.i("JML...Info", "Else Position in Adapter = " + position);
        holder.flUnselectedTrack.setVisibility(View.VISIBLE);
        holder.flSelectedTrack.setVisibility(View.GONE);
    }

    holder.btnPause.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {
            if (getSelectedPosition() == position) {
                // getMediaFileTrack().pause();

                holder.btnPause.setImageDrawable(getContext().getResources().getDrawable(R.drawable.btn_play));

                Log.i("JML...Info", "Pause + Position = " + getSelectedPosition());
                notifyDataSetChanged();
            }
        }
    });
    return convertView;
}

/**
 * 
 * @param holder
 */
protected void playTrack(ViewHolder holder) {
    holder.flUnselectedTrack.setVisibility(View.GONE);

}

/**
 * 
 * @author Jamil
 * 
 */
private static class ViewHolder {
    TextView txtAudioFileTitle;
    ImageView imgSelectedAudioFile;
    ImageView imgUnselectedAudioFile;
    FrameLayout flUnselectedTrack;
    FrameLayout flSelectedTrack;
    SeekBar audioSeekBar;
    ImageButton btnPause;
    ImageButton btnNext;

}

/**
 * 
 * @return
 */
public int getSelectedPosition() {
    return selectedPosition;
}

/**
 * 
 * @param position
 */
public void setSelectedPosition(int position) {
    selectedPosition = position;
    notifyDataSetChanged();
} 
```

活动课

```
/** 
```

* */

```
public class DisplayAudioBook extends CustomeActivity {

    private Bundle bundle;
    private ProgressDialog loadingDialog;
    private ListView listView = null;
    private MaktabatiHelper maktabatiHelper;
    private MediaPlayer mediaFileTrack;
    private SeekBar audioSeekBar;
    private Handler handlerSeekBar = new Handler();
    private AudioBookAdapter audioBookAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_audio_book);
        bundle = getIntent().getExtras();
        listView = (ListView) findViewById(R.id.lstAudioBookFiles);

        if (!isBookFilesUnzip(bundle.getString("BOOK_ID"))) {
            new UnzipAudioFileTask().execute(bundle.getString("BOOK_ID"));
        }
        audioBookAdapter = new AudioBookAdapter(getApplicationContext(), getBookIndex(bundle.getString("BOOK_ID")));
        listView.setAdapter(audioBookAdapter);
        listView.setDivider(null);
        listView.setDividerHeight(0);
        audioBookAdapter.notifyDataSetChanged();
        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> adapter, View view, int position, long id) {
                audioBookAdapter.setSelectedPosition(position);
                View oldView = adapter.getChildAt(audioBookAdapter.getSelectedPosition());
                FrameLayout rowOfList;
                if (oldView != null && audioBookAdapter.getSelectedPosition() != -1) {
                    rowOfList = (FrameLayout) oldView.findViewById(R.id.flUnselectedTrack);
                    rowOfList.setVisibility(View.GONE);
                }

                rowOfList = (FrameLayout) view.findViewById(R.id.flSelectedTrack);
                rowOfList.setVisibility(View.VISIBLE);
                listView.setAnimationCacheEnabled(false);
                listView.setScrollingCacheEnabled(false);
            }
        });
        audioBookAdapter.notifyDataSetChanged();
    }

    /**
     * 
     * @param bookId
     */
    private boolean isBookFilesUnzip(String bookId) {
        boolean isExits = false;
        File file = new File(Constants.AUDIO_EBOOKS_UNZIP_FILES_DIRECTORY + "/" + bookId);
        if (file.isDirectory()) {
            maktabatiHelper = new MaktabatiHelper(getApplicationContext());
            int indexCount = maktabatiHelper.lstBookIndex(bundle.getString("BOOK_ID"));
            File[] listFiles = file.listFiles();
            if (indexCount != listFiles.length - 1) {
                Toast.makeText(DisplayAudioBook.this.getApplicationContext(), "Misssssssssing audio file", Toast.LENGTH_SHORT).show();
                return false;
            }
            isExits = true;
        } else {
            new UnzipAudioFileTask().execute(bundle.getString("BOOK_ID"));
            isExits = true;
        }
        return isExits;
    }

    /**
     * 
     */
    private BookIndex getBookIndex(String BookId) {
        maktabatiHelper = new MaktabatiHelper(getApplicationContext());
        BookIndex bookIndex = maktabatiHelper.getBookIndex(bundle.getString("BOOK_ID"));
        return bookIndex;
    }

    /**
     * 
     * @author Jamil
     * 
     */
    private class UnzipAudioFileTask extends AsyncTask<String, Void, String> {

        @Override
        protected void onPreExecute() {
            loadingDialog = new RightJustifyDialog(DisplayAudioBook.this);
            loadingDialog.setTitle(getString(R.string.loading));
            loadingDialog.setMessage(getString(R.string.waiting));
            loadingDialog.show();
        }

        @Override
        protected String doInBackground(String... params) {
            try {
                Utils.unzipFile(Constants.AUDIO_EBOOKS_UNZIP_FILES_DIRECTORY, params[0] + ".zip");
            } catch (IOException e) {
                e.printStackTrace();
            }
            return params[0];

        }

        @Override
        protected void onPostExecute(String result) {
            AudioBookAdapter audioBookAdapter = new AudioBookAdapter(getApplicationContext(), getBookIndex(result));
            listView.setDivider(null);
            listView.setDividerHeight(0);
            listView.setAdapter(audioBookAdapter);
            loadingDialog.dismiss();
        }
    }

    @Override
    protected void onStop() {
        super.onStop();
        // mediaFileTrack.stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:48:11.117

Android 会重用您的视图，尤其是使用 ViewHolder。在没有 ViewHolder 的情况下，我成功地实现了一个与您类似的列表。您应该尝试在没有 ViewHolder 的情况下制作列表，看看它是否有效。

# linux-kernel - 让出cpu的机制

> ID：13949564
> 
> 赞同：4
> 
> 时间：2012-12-19T09:49:37.453
> 
> 标签：linux-kernel

我有一个创建 kthread 的模块。我希望这个 kthread 记录一些统计数据，然后产生 cpu。再次运行时会记录统计信息。这样做的正确方法是什么？是

```
set_tsk_need_reched(task); 
schedule(); 
```

这样做的正确方法？（似乎没有达到我的预期）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:07:31.733

如果我正确地记得 Linux 内核有一个 yield() 函数，它可以用来自愿地将处理器控制权传递给系统中的另一个线程（内核将自行决定接下来将运行哪个线程）。一些注意事项：

*   您需要从线程的上下文中调用 yield() 。
*   之后您无需显式调用调度程序。yield() 代码将自行强制重新调度。

# java - java.lang.UnsatisfiedLinkError：java.library.path debian 中没有 rxtxSerial

> ID：13949566
> 
> 赞同：4
> 
> 时间：2012-12-19T09:49:47.843
> 
> 标签：java, rxtx

我尝试在 debian 上使用 rxtx 串行通信库，并且已将 librxtx.so 添加到本机库路径中，但仍然发生此异常。

```
 java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1028)
    at gnu.io.CommPortIdentifier.<clinit>(CommPortIdentifier.java:83)
    at com.vxoom.qit.basic.Log4jInit.startPrinterThread(Unknown Source)
    at com.vxoom.qit.basic.Log4jInit.init(Unknown Source)
    at javax.servlet.GenericServlet.init(GenericServlet.java:39)
    atwinstone.ServletConfiguration.ensureInitialization(ServletConfiguration.java:183)
    at winstone.WebAppConfiguration.<init>(WebAppConfiguration.java:918)
    at winstone.HostConfiguration.initWebApp(HostConfiguration.java:131)
    at winstone.HostConfiguration.<init>(HostConfiguration.java:73)
    at winstone.HostGroup.initHost(HostGroup.java:85)
    at winstone.HostGroup.<init>(HostGroup.java:45)
    at winstone.Launcher.<init>(Launcher.java:196)
    at winstone.Launcher.main(Launcher.java:391) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T13:48:44.070

对我来说，解决方案是将库的链接复制到 jvm 可以看到的地方，如下所示：

```
cp '/usr/lib/jni/librxtxSerial.so' '/usr/lib/jvm/java-6-sun-1.6.0.26/jre/lib/i386' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T14:16:08.647

我将复制并粘贴 rxtx INSTALL 帮助

```
Solution 1: move the file to a place that works

     $ mv /usr/local/lib/librxtxSerial.* /usr/local/java/jre/lib/i386/

Solution 2: add the location of librxtxSerial to LD_LIBRARY_PATH

     $ export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib/

Solution 3: pass the location in on the command line

     $ java -Djava.library.path=/usr/local/lib/ ... 
```

资源

[http://rxtx.qbang.org/pub/rxtx/rxtx-2.1-7pre17/INSTALL](http://rxtx.qbang.org/pub/rxtx/rxtx-2.1-7pre17/INSTALL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T15:12:11.550

您需要将 rxtxSerial.dll 放入 jreXX/bin 文件夹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T09:54:04.190

设置`LD_LIBRARY_PATH`为您拥有该`.so`文件的目录。

让您拥有 `.so`文件的目录是`/home/abc`

使用这个命令：

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:"/home/abc" 
```

在java中以以下方式加载.so..

```
System.loadLibraryPath("rxtxSerial"); 
```

要永久设置它，您必须将同一行放入`.profile`主目录中的文件中。

[你可以参考这个指南](http://www.think-techie.com/2009/08/java-native-interface-jni.html)

# javascript - 将其他 dom 元素动作包含到另一个 dom 元素动作中是否是一种好习惯，就像 javascript 中的常见动作一样

> ID：13949567
> 
> 赞同：3
> 
> 时间：2012-12-19T09:49:47.693
> 
> 标签：javascript, jquery

下面是好的实践代码吗？（jquery）

common.js（用同一个 js 动作编写的两个文件的 dom 元素）

```
$('.list_item').click(function () {
   $('#yes_button').addClass('selected');
   $('#no_button').addClass('selected_no');
}); 
```

yes_button.html

```
<div class='list_item yes_class' > Muhammad s.a.w </div>
<div id='yes_button' > Yes </div> 
```

no_button.html

```
<div class='list_item no_class'> Muhammad s.a.w </div>
<div id='no_button' > No </div> 
```

上面的做法好还是我们应该像下面这样写

```
$('.yes_class').click(function () {
   $('#yes_button').addClass('selected');
});

$('.no_class').click(function () {
   $('#no_button').addClass('selected_no');
}); 
```

我有两个具有相同类的 DOM 元素文件，我正在编写基于唯一类名的 JS 代码，我的问题是遵循这种方式是一种好习惯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:02:54.650

为什么不给你的按钮添加一个通用类并通过它来调用它们呢？

```
$('.list_item').click(function () {
   $('.button').addClass('selected');
}); 
```

如果需要，您可以更具体地确定您要定位的按钮，如下所示

```
$('.list_item').click(function () {
   $(this).next('button').addClass('selected');
}); 
```

假设您保持 html 的相同结构

```
<div class="listitem"></div>
<div class="button" id="..."></div> 
```

# fitnesse - FitSharp 无法从装配 fit 加载 fit.PrimitiveFixture

> ID：13949568
> 
> 赞同：0
> 
> 时间：2012-12-19T09:49:49.653
> 
> 标签：fitnesse, fitsharp

在我们将项目升级到 .NET 4.0 后，我一直在尝试迁移到 FitSharp，但是我目前遇到了错误：

```
System.TypeLoadException: Could not load type 'fit.PrimitiveFixture' from assembly 'fit, Version=2.2.4498.25494, Culture=neutral, PublicKeyToken=null'.
  at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)
  at System.Reflection.RuntimeAssembly.GetExportedTypes()
  at fitSharp.Machine.Engine.CurrentDomain.LoadAssembly(String assemblyPath)
  at fitSharp.Machine.Engine.ApplicationUnderTest.Assemblies.AddAssembly(String assemblyName)
  at fitSharp.Machine.Engine.ApplicationUnderTest.AddAssemblies(IEnumerable`1 assemblyNames)
  at fitnesse.fitserver.FitServer.ParseCommandLineArguments(IEnumerable`1 args)
  at fitnesse.fitserver.FitServer.Run(IList`1 CommandLineArguments)
  at fitnesse.fitserver.FitServer.Run(IList`1 commandLineArguments, Memory memory, ProgressReporter reporter)
  at fitSharp.Machine.Application.Shell.Run()
  at fitSharp.Machine.Application.Shell.Execute()
  at fitSharp.Machine.Application.Shell.Run(IList`1 commandLineArguments) 
```

我使用 Fitnesse-standalone.jar 作为服务器，如果这有任何区别并且有 ofc。在fitnesse的根目录下定义了FitSharp runner，我们将fitsharp放在fitnesse的子目录中，所以路径是相对的。

```
!path ..\..\..\Output\Runtime\*.dll
!define COMMAND_PATTERN {%m -r fitnesse.fitserver.FitServer,fitSharp\fit.dll %p}
!define TEST_RUNNER {fitsharp\Runner.exe} 
```

显然 fit.PrimitiveFixture 不存在，总的来说，我可以看到 fit.dll 与 FitNesse 它自己捆绑的那个相比已经缩小了很多。

我无法确定它为什么会尝试加载它，它源于哪里......我已经查看了是否有任何可能暗示任何事情的重大变化，但这并没有真正给我一个想法，显然我还更改了所有引用以适应，以便它指向新库而不是捆绑并成功编译（尽管也必须添加 fitharp.dll）...

我无法真正进入调试，因为它在那之前很久就失败了......

人们应该认为其他人也经历过同样的事情，但情况似乎并非如此，至少我的谷歌尝试并没有产生太多可用的结果。

所以这里是希望有人遇到同样的问题，但他们自己解决了这个问题，而不是在网上分享信息。可能对 FitNesse 和 FitSharp 有更深入了解的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T05:55:32.040

可能是您路径中的某个程序集有问题：......\Output\Runtime*.dll 尝试仅列出测试所需的单个程序集，看看这是否有助于缩小导致问题。

# iphone - 我们可以在发布图片时在 Facebook 上说“Just Now 'AppName' via iOS”吗

> ID：13949571
> 
> 赞同：2
> 
> 时间：2012-12-19T09:49:53.950
> 
> 标签：iphone, objective-c, facebook, ios6

我正在使用 facebook ios6。当我发布图像时，它显示如下图。 ![在此处输入图像描述](../Images/fb357059fb6d405e00ec278c8898ca16.png)

我想包括我的“AppName”

我的代码是

```
 -(void)facebookbtnclicked
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    ACAccount *account = [[ACAccount alloc] initWithAccountType:accountType];
    NSLog(@"%@, %@", account.username, account.description);
    {
        SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

        SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
            if (result == SLComposeViewControllerResultCancelled) {

                NSLog(@"Cancelled");
            } else
            {
                NSLog(@"Done");
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Done" message:@"Image Posted Successfully, Please Create an other Tattoo" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                UINavigationController *navController=self.navigationController;
                [navController popViewControllerAnimated:YES];
                [alert show];
            }
            [controller dismissViewControllerAnimated:YES completion:Nil];
        };
        controller.completionHandler =myBlock;
        [controller setInitialText:self.textMsg];
        [controller addImage:appDelegate.shareImage];//This image i am posting
        [self presentViewController:controller animated:YES completion:Nil];
    }
} 
```

给我任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:08:02.430

如果您使用本机共享对话框，则无法更改它。

**旧照片发方法：**

```
NSDictionary *param = [NSDictionary dictionaryWithObjectsAndKeys:[UIImage imageNamed:@"YOURIMAGE.png"], @"picture", nil];
[FBRequestConnection startWithGraphPath:@"me/feed"
    parameters:param
    HTTPMethod:@"POST"
    completionHandler:^(FBRequestConnection *connection,
                        id result,
                        NSError *error) 
{
    if (error) 
        NSLog(@"failed");
    else 
        NSLog(@"posted");
}]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T12:09:44.833

您必须创建一个 Facebook 应用程序 ID（在创建它时您可以添加您的应用程序名称）并将其包含在您的 .plist 文件中 [http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1 /＃编码](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/#coding)

# android - 如何获取 YouTube JSON GData 网址

> ID：13949574
> 
> 赞同：3
> 
> 时间：2012-12-19T09:50:01.450
> 
> 标签：android, json, android-emulator, youtube, youtube-api

我制作了一个应用程序，我在其中使用此 url 获取 YouTube 视频：

[http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads?v=2&alt=jsonc](http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads?v=2&alt=jsonc)

以同样的方式，我想使用这个 url 获取 YouTube 视频：

[http://www.youtube.com/playlist?list=PL34F010EEF9D45FB8](http://www.youtube.com/playlist?list=PL34F010EEF9D45FB8)

**问题：**我不知道如何获取此链接的 YouTube JSON GData URL...

[http://www.youtube.com/playlist?list=PL34F010EEF9D45FB8](http://www.youtube.com/playlist?list=PL34F010EEF9D45FB8)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:54:16.440

如果您想从 gdata.youtube.com 获取播放列表，请将此 API 用作：

> [http://gdata.youtube.com/feeds/api/playlists/PASS_PLAYLIST_ID_HERE?v=2&alt=json](http://gdata.youtube.com/feeds/api/playlists/PASS_PLAYLIST_ID_HERE?v=2&alt=json)

然后将您的网址更改为：

[http://gdata.youtube.com/feeds/api/playlists/PL34F010EEF9D45FB8?v=2&alt=json](http://gdata.youtube.com/feeds/api/playlists/PL34F010EEF9D45FB8?v=2&alt=json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:53:55.677

不要将 gdata 用于 youtube。使用 youtube 的 OhEmbed 功能。对于您的链接，youtube ohembed 链接是

[http://www.youtube.com/oembed?url=http://www.youtube.com/playlist?list=PL34F010EEF9D45FB8](http://www.youtube.com/oembed?url=http://www.youtube.com/playlist?list=PL34F010EEF9D45FB8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T06:59:55.063

如果您想从 YT 播放列表中检索播放列表数据，请使用

```
 var feedUrl = "http://gdata.youtube.com/feeds/api/playlists/"+nPlaylistID+"?max-results=8";
    if (result.error || !result.url) 
    {
$('#divid').hide();
return;
}

  var feed = new google.feeds.Feed(result.url);
  feed.setNumEntries(50);
  feed.load(function (result) {

   for (var i = 0; i < result.feed.entries.length; i++) {
var entry = result.feed.entries[i];
var vidhash = /=(.*)&(.*)$/.exec (entry.link)[1];

  container.append('<div><a href="http://www.youtube.com/embed/'+vidhash+'" class="html5lightbox" title="'+entry.title+'"><img src="http://img.youtube.com/vi/'+vidhash+'/0.jpg" /><br />'+entry.title+'</a></div>\n'); 
```

# vb.net - 使用 ADODB.recordset 将空字符串（或删除字段）写入 Access DB

> ID：13949575
> 
> 赞同：0
> 
> 时间：2012-12-19T09:50:04.650
> 
> 标签：vb.net, ms-access, adodb, recordset

我有这个代码：

```
ds("Fecha comienzo").Value = TextGridEditar.Text 
```

其中 ds 是 ADODB.RecordSet，TextGridEditar 是 VB.NET 中的 TextBox。我使用 RecordSet 写入 Access DB。

如果我在 TextBox 中有一些文本，它就完美了。但是如果什么都没有，就会抛出异常。我不能这样做：

```
ds("Fecha comienzo").Value = "" 
```

如何用 RecordSet 写一个空字符串？或者我怎样才能删除那个单一的值（不是整行）。我希望被允许在该字段上放置任何内容（不是 NULL），或删除该字段的值。

* * *

编辑：在 VB（不是 .NET）中，此代码适用于相同的 Access DB，即使使用空字符串：

```
ds.Edit
ds("fecha comienzo") = textgrid 
```

其中 ds 是动态集类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:22:27.360

解决了。这是答案：

```
 If (TextGridEditar.Text.Equals("")) Then
     ds("Fecha comienzo").Value = System.DBNull.Value
 Else
     ds("Fecha comienzo").Value = TextGridEditar.Text
 End If 
```

System.DBNull.Value 在 Access 表中插入一个空字符串，而不是一个 NULL 值。

# silverlight - 如何在 silverlight 中使用 LINQ join Query 将两个 ObservableCollection 加入一个 ObservableCollection

> ID：13949578
> 
> 赞同：1
> 
> 时间：2012-12-19T09:50:10.503
> 
> 标签：silverlight, mvvm, prism

我在使用实体框架的 Silverlight MVVM 项目中有两个名为 Customer 和 Group 的 ObservableCollection。

我需要加入这两个 ObservableCollection 并需要产生一个名为 Final 的新 ObservableCollection。加入由使用条件组成。

第一个 ObservableCollection 有以下字段

```
cid, groupid uname
1    2       Raj
2    3       Jeya 
```

2nd ObservableCollection 具有以下字段

```
groupid groupname
2     Traveler
3     Shopper 
```

我的决赛桌如下所示

```
uname groupname
Raj    Traveler
Jeya    Shopper 
```

反正有没有得到它的最终结果..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:57:51.770

首先，您必须创建一个新类：

```
 public class Result 
```

{公共字符串用户名{得到；放; } 公共字符串组名 { 获取；放; } }

然后创建您的查询

```
 List<person> persons = new List<person>();
        List<group> groups = new List<group>();

        persons.Add(new person() { cid = 1, groupid = 2, uname = "Raj" });
        persons.Add(new person() { cid = 2, groupid = 3, uname = "Jeya" });

        groups.Add(new group() { groupid = 2, groupname = "Traveller" });
        groups.Add(new group() { groupid = 3, groupname = "Shopper" });

         ObservableCollection<Result> res= new ObservableCollection<Result>(
             persons.Join(groups, p => p.groupid, g => g.groupid, (p, g) => new Result{ UserName= p.uname, Groupname = g.groupname })
             ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:05:31.217

也许我没有正确理解你的问题，但这是你要找的吗？

创建一个名为 CustomerGroup 的新类：

```
public class CustomerGroup
{
    public string Name { get; set; }
    public string Groupname { get; set; }
} 
```

并创建一个匹配的 ObserverableCollection：

```
List<Customer> customers = new List<Customer>();
List<Group> groups = new List<Group>();

var result = new ObservableCollection<CustomerGroup>(
            customers.Select(
                x => new CustomerGroup{Name = x.uname, Groupname = groups.FirstOrDefault(g => g.groupid == x.groupid).groupname})); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:01:38.350

如果您只是从连接中创建一个 ObservableCollection（如其他答案中所建议的那样），那么您的集合将不是“可观察的”。也就是说，对原始集合的更改不会传播。要传播更改，您需要创建一个实现 INotifyCollectionChanged 的​​新集合类。

在下面的代码中，我使用 Reset 操作引发 CollectionChanged，这会提示订阅者重新加载连接的整个结果。这速度较慢，但​​如果您想要特定的每项更新，则必须仔细处理更改。这要复杂得多。在这种情况下使用 LINQ 也可能没有用。

```
public class Customer { public int cid; public int groupid; public string uname; }
public class Group { public int groupid; public string groupname; }
public class CustomerGroup { public string Name { get; set; } public string Groupname { get; set; } }

public class ObservableJoinOfCustomersGroups : IList<CustomerGroup>, INotifyCollectionChanged
{
    readonly ObservableCollection<Customer> customers;
    readonly ObservableCollection<Group> groups;

    List<CustomerGroup> cachedJoin; 

    public ObservableJoinOfCustomersGroups(ObservableCollection<Customer> customers, ObservableCollection<Group> groups)
    {
        this.customers = customers;
        this.groups = groups;

        cachedJoin = doJoin().ToList();

        customers.CollectionChanged += (sender, args) =>
        {
            cachedJoin = doJoin().ToList();
            if( CollectionChanged != null )
                CollectionChanged.Invoke(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
        };
        groups.CollectionChanged += (sender, args) =>
        {
            cachedJoin = doJoin().ToList();
            if( CollectionChanged != null )
                CollectionChanged.Invoke(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Reset));
        };
    }

    private IEnumerable<CustomerGroup> doJoin()
    {
        // Join code here
        return customers.Join(groups, p => p.groupid, g => g.groupid, (p, g) => new CustomerGroup{ Name= p.uname, Groupname = g.groupname });
    }

    public IEnumerator<CustomerGroup> GetEnumerator()
    {
        return cachedJoin.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public void Add(CustomerGroup item)
    {
        throw new NotSupportedException();
    }

    public void Clear()
    {
        throw new NotSupportedException();
    }

    public bool Contains(CustomerGroup item)
    {
        return cachedJoin.Contains(item);
    }

    public void CopyTo(CustomerGroup[] array, int arrayIndex)
    {
        throw new NotImplementedException();
    }

    public bool Remove(CustomerGroup item)
    {
        throw new NotSupportedException();
    }

    public int Count { get { return cachedJoin.Count(); } }
    public bool IsReadOnly { get { return true; } }
    public int IndexOf(CustomerGroup item)
    {
        return cachedJoin.IndexOf(item);
    }

    public void Insert(int index, CustomerGroup item)
    {
        throw new NotSupportedException();
    }

    public void RemoveAt(int index)
    {
        throw new NotSupportedException();
    }

    public CustomerGroup this[int index]
    {
        get { return cachedJoin[index]; }
        set { throw new NotSupportedException(); }
    }

    public event NotifyCollectionChangedEventHandler CollectionChanged;
} 
```

# javascript - 想把处理类型改成js

> ID：13949579
> 
> 赞同：1
> 
> 时间：2012-12-19T09:50:14.620
> 
> 标签：javascript, ruby-on-rails-3

这是我的更新控制器

```
 def update
    @subject = Subject.find(params[:id])
    respond_to do |format|
      if @subject.update_attributes(params[:subject])
        @subjects = Subject.all
 #format.html { render :partial => "list"}
        format.js #{ render :js => "$('#list1').html('');"}
      end
    end
  end 
```

这是我的 js 文件 update.js.erb

```
 $('#list1').html('');
   $("#list1").html("<%= escape_javascript( render(:partial => "list") ) %>"); 
```

这是 _list.html.erb 文件，在此使用 jeditable-rails gem 编辑数据。

```
<h1>Listing subjects</h1>

<table>
  <tr>
<th><%=t :Name%></th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @subjects.each do |subject| %>
  <tr>
    <td><%= editable_field subject, :name, :remote=> true %></td>
    <td><%= link_to 'Show', subject %></td>
    <td><%= link_to 'Edit', edit_subject_path(subject) %></td>
    <td><%= link_to 'Destroy', subject, :method => :delete, :data => { :confirm => 'Are you sure?' } %></td>
  </tr>
<% end %>
</table> 
```

这是我使用这些索引和 'list1' div 的索引页面

```
<div id="list1"><%= render :partial => "list" %></div>
<div id="form"><%= render :partial => 'form' %></div> 
```

但我的终端显示

```
Processing by SubjectsController#update as HTML 
```

我想作为 JS 处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:32:10.097

我不知道 Jeditable gem，但根据给出的示例（[https://github.com/afeld/jeditable-rails](https://github.com/afeld/jeditable-rails)），它使用 html 格式，而不是 js。

如果要强制转js格式，可以试试这个：

```
<%= editable_field subject, :name, :update_url => "#{url_for(object)}.js" %> 
```

# jquery - 自动完成力选择

> ID：13949580
> 
> 赞同：2
> 
> 时间：2012-12-19T09:50:14.817
> 
> 标签：jquery, javascript-events

我正在使用 JQuery 自动完成。问题是当我在文本框中输入任何无用的内容并单击提交按钮时。它在处理之前不检查验证，因为在提交表单后会调用 change 方法。

```
var fromAutocomplete = this.$("#fromCity").autocomplete({
                        source : urlRepository.airportAutoSuggest,
                        minLength : 3,
                        select: function(event, ui) {
                            searchFormView.$("#fromCity").val(ui.item.label);
                            searchFormView.$("#fromCityCode").val(ui.item.value);
                            searchFormView.$('#fromCityCountry').val(ui.item.country);
                            isValid = true;
                            return false;
                        },
                        selectFirst: true,
                        change: function (event, ui) {
                            if (!ui.item) {
                                $(this).val('');
                            }
                        }
                    }).live('keydown', function (e) {
                        var keyCode = e.keyCode || e.which;
                        //if TAB or RETURN is pressed and the text in the textbox does not match a suggestion, set the value of the textbox to the text of the first suggestion
                        if((keyCode === 9 || keyCode === 13) && ($(".ui-autocomplete li:textEquals('" + $(this).val() + "')").size() === 0)) {
                            $(this).val($(".ui-autocomplete li:visible:first").text());
                        }
                    }); 
```

如果我按标签，它工作正常。
如果未选择自动完成结果中的值，谁能告诉我如何限制提交表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:26:25.400

您的密钥在那里不起作用，因为提交表单是默认的浏览器行为，您需要获取按回车键的表单提交。

```
var fromAutocomplete = this.$("#fromCity").autocomplete({
    source : urlRepository.airportAutoSuggest,
    minLength : 3,
    select: function(event, ui) {
        searchFormView.$("#fromCity").val(ui.item.label);
        searchFormView.$("#fromCityCode").val(ui.item.value);
        searchFormView.$('#fromCityCountry').val(ui.item.country);
        isValid = true;
        return false;
    },
    selectFirst: true,
    change: function (event, ui) {
        if (!ui.item) {
            $(this).val('');
        }
    }
}).live('keydown', function (e) {
    var keyCode = e.keyCode || e.which;
    //if TAB is pressed and the text in the textbox does not match a suggestion, set the value of the textbox to the text of the first suggestion
    if( keyCode === 13) && ($(".ui-autocomplete li:textEquals('" + $(this).val() + "')").size() === 0)) {
        $(this).val($(".ui-autocomplete li:visible:first").text());
    }
}).closest('form').submit(function() {
    //if RETURN is pressed and the text in the textbox does not match a suggestion, set the value of the textbox to the text of the first suggestion
    $(this).val($(".ui-autocomplete li:visible:first").text());

    return false;
}); 
```

# extjs - ext js 4 网格多选

> ID：13949581
> 
> 赞同：0
> 
> 时间：2012-12-19T09:50:19.210
> 
> 标签：extjs, extjs4

我有网格

```
 Ext.define('a.view.a', {
     extend: 'Ext.grid.Panel',
     alias: 'widget.list',
     store: 'a.store.store',
     multiSelect: false,
     enableKeyEvents: true,

     initComponent: function() {
         var me = this;
         var user = TR.user;
         this.addEvents('edit');

         this.columns = [{
             dataIndex: 'Id',
             width: 50,
             align: 'center',
             sortable: false
         }];

         this.actions = {
             edit: Ext.create('Ext.Action', {
                 text: 'Изменить заявку',
                 icon: 'Content/Resources/images/editDoc.gif',
                 cls: 'selected-griditem-button',
                 handler: function() {
                     this.fireEvent('edit', this.getRequest());
                 },
                 scope: this
             })
         };

         var contextMenu = Ext.create('Ext.menu.Menu', {
             items: [
                 this.actions.edit
             ]
         });

         this.on({
             itemcontextmenu: function(view, rec, node, index, e) {
                 this.getSelectionModel().select(index);
                 e.stopEvent();
                 contextMenu.showAt(e.getXY());
                 return false;
             },
             beforeitemdblclick: function(gr, rowIndex, e) {
                 this.fireEvent('edit', this.getRequest());
             }
         });

         this.viewConfig = {
             listeners: {
                 itemkeydown: function(v, r, item, index, e) {
                     if (e.getKey() == e.DELETE) {
                         e.stopEvent();
                         this.fireEvent('del', this.getRequest());
                     }
                 },
                 scope: this
             }
         };

         this.callParent(arguments);
     },
     getRequest: function() {
         var sm = this.getSelectionModel();
         var rs = sm.getSelection();
         if (rs.length) {
             return rs[0];
         }
         return null;
     }
 }); 
```

在我的控制器中，当我单击网格中的项目时，我具有执行功能

```
onSelectionChange: function (sm, rs) {
   alert('wtf');
} 
```

问题是

1.  当我第一次单击网格中的项目时，我在同一项目上第二次出现带有“wtf”的消息框-没有（这很好）

2.  但是当我做 multiSelect: true 每次点击同一个项目时我都会收到消息（这不好:()

我怎么能做第一个变种，但是`multiSelect: true`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:36:54.757

使用“itemclick”事件而不是“selectionchange”事件。这是一个独立的示例：

```
Ext.onReady(function () {

    Ext.define('Model', {
        extend: 'Ext.data.Model',
        fields: [
            {name: 'field1'},
        ],
        idProperty: 'field1'
    });

    Ext.define('Grid', {
        extend: 'Ext.grid.Panel',
        multiSelect: true,

        initComponent: function () {
            this.store = Ext.create('Ext.data.ArrayStore', {
                model: 'Model',
                data: [
                    ['value1'],
                    ['value2'],
                    ['value3']
                ]
            });

            this.columns = [
                {dataIndex: 'field1', flex: 1}
            ];
            this.callParent(arguments);
        }
    });

    var grid = Ext.create('Grid', {
        renderTo: Ext.getBody()
    });

    grid.on('selectionchange', function (grid, selected, options) {
        console.log(selected);
    }, this);

    grid.on('itemclick', function (grid, record, item, index, e, options) {
        console.log('itemclick: ' + index);
    }, this);
}); 
```

# css - YUI Compressor 正在从过滤器值中删除空格

> ID：13949588
> 
> 赞同：16
> 
> 时间：2012-12-19T09:50:38.540
> 
> 标签：css

我有一个包含 CSS 的过滤器，用于在 FF 中添加灰度图像，如下所示：-

```
filter: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale"); /* Firefox 10+, Firefox on Android */ 
```

当我使用 YUI 压缩器时，它会删除过滤器值之间的所有空格，它变成这样：-

```
.desaturate{filter:url("data:image/svg+xml;utf8,<svgxmlns='http://www.w3.org/2000/svg'><filterid='grayscale'><feColorMatrixtype='matrix'values='0.33330.33330.3333000.33330.33330.3333000.33330.33330.33330000010'/></filter></svg>#grayscale")} 
```

它删除了使其在FF中无用的空格。

我也尝试将它移动到一个 .svg 文件，但它在 FF 中给出了跨域问题。请建议是否有人对如何解决此问题有任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-18T18:56:01.267

通过试验 JW. 的想法，我发现您可以对整个字符串进行 base64 编码，除了最后`#grayscale`一部分并添加相应的编码部分，或者甚至更好。仅对 xml 属性和/或标记名称之间的空格进行 url 编码，并用逗号分隔矩阵值。

所以最后你有：

```
filter: url("data:image/svg+xml;utf8,<svg%20xmlns='http://www.w3.org/2000/svg'><filter%20id='grayscale'><feColorMatrix%20type='matrix'%20values='0.3333,0.3333,0.3333,0,0,0.3333,0.3333,0.3333,0,0,0.3333,0.3333,0.3333,0,0,0,0,0,1,0'/></filter></svg>#grayscale"); 
```

它很紧凑，不会被 css 压缩器改变

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:00:03.510

字符串的 URL 部分（从`<svg`到`</svg>`）需要进行 URL 编码。或者，您可以在 URL`;base64`之后`;utf8`加上 Base64 编码。

但是在 URL 中使用空格是不正确的……这就是 YUI 压缩器搞砸的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T16:00:15.593

您可以在 feColorMatrix 值之间添加逗号：

```
<feColorMatrix type=\'matrix\' values=\'0.3333,0.3333,0.3333,0,0,0.3333,0.3333,0.3333,0,0,0.3333,0.3333,0.3333,0,0,0,0,0,1,0\'/> 
```

但这并不能解决以下空格之间的问题：svg xmlns

也很想了解那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T14:20:24.237

[我在压缩器的 PHP 端口（ https://github.com/tubalmartin/YUI-CSS-compressor-PHP-port](https://github.com/tubalmartin/YUI-CSS-compressor-PHP-port) ）中遇到了这个问题，并将其跟踪到`extract_data_urls`方法中的一行。

这会从 css 的主体中提取数据 url（正如您所期望的，给出它的名称），以防止它们被缩小。但是，它在存储它们之前会进行一些处理：

```
$token = preg_replace('/\s+/', '', $token); 
```

这将替换任何空白字符，从而将所有空格从 SVG 标记中去除。将此行更改为：

```
$token = preg_replace('/\s+/', ' ', $token); 
```

通过留下一个空格为我解决了这个问题。

由于 PHP 版本是 Java 压缩器的直接端口，我会假设同样的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T02:05:48.893

我收集如果您已经使用最新版本（2.4.7），那么这可能是他们的 CSS minifier 没有考虑的问题，您需要在[http://yuilibrary.com/projects/上向他们提出错误报告yuicompressor/](http://yuilibrary.com/projects/yuicompressor/)

在这种情况下，我看不到任何可以帮助的配置选项，例如将块缩小到一行但不删除中间的空格。

# android - 如何知道自上次电池充电或在 Android 中重新启动以来的屏幕准时？

> ID：13949594
> 
> 赞同：3
> 
> 时间：2012-12-19T09:50:47.540
> 
> 标签：android, screen

自上次电池充电（或重启）以来，有什么方法可以按时了解 Android 中的屏幕？这个时间由系统管理，它显示在“设置”->“电池”中，但我需要在我的应用程序中。

另外，我知道它在 Dumpsy 的*batteryinfo*中，但是生成的信息大约是 28kb，我认为每次解析这个文件都没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:56:21.820

您可以使用广播接收器来估计时间差。

```
 ACTION_BOOT_COMPLETED
  ACTION_SCREEN_ON
  ACTION_SCREEN_OFF
  ACTION_POWER_CONNECTED);
  ACTION_POWER_DISCONNECTED); 
```

您将捕捉启动应用程序的时间，屏幕熄灭并重新打开的时间，以及设备连接电源和断开连接的时间。节省时间，然后根据您的需要找到差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:59:11.133

检查此链接：[Getting Battery Information on Android](http://www.tutorialforandroid.com/2009/01/getting-battery-information-on-android.html)并查看此处的文档[Intent | 安卓开发者](http://developer.android.com/reference/android/content/Intent.html#ACTION_POWER_DISCONNECTED)

获取断开充电器的时间将类似于获取电池电量百分比。

# c# - 如何编写导致字典的 LINQ 查询？

> ID：13949596
> 
> 赞同：41
> 
> 时间：2012-12-19T09:50:51.250
> 
> 标签：c#, .net, linq, collections, dictionary

```
 public class Person
{
    public string NickName{ get; set; }
    public string Name{ get; set; }
}

var pl = new List<Person>;

var q = from p in pl
        where p.Name.First() == 'A'
        orderby p.NickName
        select new KeyValuePair<String, String>(p.NickName, p.Name);

var d1 = q.ToList(); // Gives List<KeyValuePair<string, string>>
var d2 = q.ToDictionary(); // Does not compile 
```

如何获取字典<字符串，字符串>？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-19T09:52:49.567

您需要为`Dictionary`

```
var d2 = q.ToDictionary(p => p.NickName, p => p.Name); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-19T09:57:43.090

字典不能包含多个相等的键，因此您应该确保（或知道）情况并非如此。您可以使用`GroupBy`它来确保它：

```
Dictionary<string, string> dict = pl
        .Where(p => p.Name.First() == 'A')
        .GroupBy(p => p.NickName)
        .ToDictionary(g => g.Key, g => g.First().Name); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-19T09:57:35.737

**编辑**

如果你真的觉得你需要从`IEnumerable<KeyValuePair<TKey, TValue>>`到一个`Dictionary`隐含的，你可以添加这个扩展。

```
public static IDictionary<TKey, ToValue> ToDictionary<TKey, TValue>(
    this IEnumerable<KeyValuePair<TKey, TValue>> source)
{
    return source.ToDictionary(p => p.Key, p => p.Value);
} 
```

然后你可以调用`ToDictionary()`任何`IEnumerable<KeyValuePair<TKey, TValue>>`.

**编辑 2**

如果您预计重复，那么您也可以创建一个`ToLookup()`扩展。

```
public static ILookup<TKey, TValue> ToLookup<TKey, TValue>(
    this IEnumerable<KeyValuePair<TKey, TValue>> source)
{
    return source.ToLookup(p => p.Key, p => p.Value);
} 
```

或者，如果你真的想丢弃结果，你可以为`ToDictionary`.

```
public static IDictionary<TKey, ToValue> ToDictionary<TKey, TValue>(
    this IEnumerable<KeyValuePair<TKey, TValue>> source,
    Func<<IEnumerable<TValue>, TValue> selector)
{
    return source
        .Lookup(p => p.Key, p => p.Value);
        .ToDictionary(l => l.Key, l => selector(l));
} 
```

如果您任意丢弃除“第一个”（没有 是什么意思`OrderBy`）项目之外的所有项目，您可以像这样使用此扩展，

```
pairs.ToDictionary(v => v.First()); 
```

* * *

总体而言，您可以删除大部分代码并执行以下操作，

```
var q = from p in pl
        where p.Name.First() == 'A';
var d = q.ToDictionary(p => p.NickName, p => p.Name); 
```

如果可能有重复，[做](http://msdn.microsoft.com/en-us/library/bb549211.aspx)

```
var d = q.ToLookup(p => p.NickName, p => p.Name); 
```

但请注意，这会返回 an [`ILookup<TKey, TElement>`](http://msdn.microsoft.com/en-us/library/bb534291.aspx)，其中的[`Item`](http://msdn.microsoft.com/en-us/library/bb549314.aspx)索引器会返回 an ，`IEnumerable<TElement>`因此您不会丢弃数据。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-19T09:54:24.023

尝试将 NickName 作为键，将名称作为值

```
var d2 = q.ToDictionary (p => p.NickName, p=>p.Name); 
```

但请注意，字典不允许重复，因此上面会为具有相同昵称的重复记录抛出错误。也许您想使用类似于 Dictionary 但允许重复的 Lookup

```
var d2 = q.ToLookup (p => p.NickName, p=>p.Name); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T14:23:41.647

我意识到这是用[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")标记的，但我昨天**只是**想弄清楚如何在[vb.net](/questions/tagged/vb.net "显示标记为“vb.net”的问题")中执行此操作，所以我想我也会分享您如何在 VB 中执行此操作：

```
Public Class Person
    Property NickName As String
    Property Name As String
End Class

Sub Main()
    Dim p1 As New List(Of Person)

    '*** Fill the list here ***

    Dim q = (From p In p1
             Where p.Name.First = "A"
             Select p.NickName, p.Name).ToDictionary(
                                           Function(k) k.NickName, 
                                           Function(v) v.Name)
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-05T11:47:12.203

您也可以通过强制转换从 LINQ 查询中获取字典：

```
var d2 = (Dictionary<string, string>)q; 
```

这适用于 Visual Studio 2013。

# sql - 聚合函数如何计算列并在同一查询中返回值

> ID：13949597
> 
> 赞同：1
> 
> 时间：2012-12-19T09:50:50.283
> 
> 标签：sql, sql-server

我正在尝试了解聚合函数如何在 SQL 中工作，但我无法计算出如何计算一个值在查询中出现的次数。

我使用**MSSQL 2008**，我尝试的一切似乎都会导致错误。

以下是我的查询：

```
SELECT category, 
       template, 
       galleryshortDescription, 
       galleryLongDescription, 
       GalleryName,   
       GalleryTitle, 
       GalleryID, 
       GalleryCreatedDate, 
       GalleryLastUpdated, 
       GalleryPublished, 
       GalleryViews, 
       ObjectID, 
       GalleryDescription, 
       HtmlMetaKeywords, 
       HtmlMetaDescription

FROM dbo.ImageGallery 
```

我想返回该`category`字段以及它在此查询中出现的总次数，我尝试使用

```
count (category) AS category_counter 
```

任何建议都非常感谢

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:53:28.513

> 我想返回类别字段以及它在此查询中出现的总次数

您需要的是使用[`GROUP BY`](http://msdn.microsoft.com/en-us/library/ms177673%28v=sql.100%29.aspx),[`COUNT`](http://msdn.microsoft.com/en-us/library/ms175997%28v=sql.100%29.aspx)像这样：

```
SELECT
  Category,
  COUNT(category) AS category_counter
FROM  dbo.ImageGallery
GROUP BY category; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/a5388/1)

例如，这个查询会给你类似的东西：

```
|  CATEGORY | CATEGORY_COUNTER |
--------------------------------
| Category1 |                2 |
| Category2 |                2 |
| Category3 |                3 |
| Category4 |                3 | 
```

* * *

但是你有一个*大问题*，在你的桌子上。

您的表格以这种方式未[***标准化***](http://en.wikipedia.org/wiki/Database_normalization)，您应该将此表格拆分为以下表格：

**`Categories:`**

*   `CategoryId`,
*   `CategoryName`.

**`GalleriesProperties`**：

*   `GalleryId`,
*   `GalleryName`,
*   `GalleryshortDescription`,
*   `GalleryLongDescription`,
*   `GalleryTitle`,
*   `GalleryCreatedDate`,
*   `GalleryLastUpdated`,
*   `GalleryPublished`,
*   `GalleryViews`,
*   `GalleryDescription`.

**`HTMLMetas`**

*   `HTMLMetaID`
*   `HtmlMetaKeywords`,
*   `HtmlMetaDescription`

那么你的桌子**`ImageGallery`**会是这样的：

*   `GalleryId`,
*   `CategoryId`一个外键引用类别表（CategoryID），
*   `Template`,
*   `HTMLMetaID`htmlmeta 表的外键。

这只是一个示例，它可能需要在您的上下文中进行更多调整。但是您应该阅读更多有关此内容的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:53:31.830

您必须使用 GROUP BY 和 COUNT。让我们尝试阅读：[http](http://www.w3schools.com/sql/sql_func_count.asp) ://www.w3schools.com/sql/sql_func_count.asp和[http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:58:55.147

您必须像这样使用 Count(category) 并按类别分组

```
SELECT  category, count(category) as ColumnNameofYourChoice
  FROM dbo.ImageGallery 
     group by category 
```

使用计数时，您必须使用分组依据，您希望计数发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-17T14:57:27.003

最好将类别和 No_of_category 存储在 Temp 表中。之后，您可以将您的表加入到临时表中。例如。

```
SELECT  category, count(category) No_Of_category
into #temp
  FROM dbo.ImageGallery 
     group by category

SELECT cat.category, t.No_Of_category,
      cat. template, 
       cat.galleryshortDescription, 
       cat.galleryLongDescription, 
       cat.GalleryName,   
       cat.GalleryTitle, 
       cat.GalleryID, 
       cat.GalleryCreatedDate, 
       cat.GalleryLastUpdated, 
       cat.GalleryPublished, 
       cat.GalleryViews, 
       cat.ObjectID, 
       cat.GalleryDescription, 
       cat.HtmlMetaKeywords, 
       cat.HtmlMetaDescription

FROM dbo.ImageGallery cat
left outer join #temp t on cat.category=t.category 
```

# iphone - iPhone sdk UILabel颜色在重新启动应用程序时没有改变

> ID：13949610
> 
> 赞同：2
> 
> 时间：2012-12-19T09:51:28.837
> 
> 标签：iphone, uitableview, uilabel, uicolor

我有表格视图，用于`UILabel`显示书籍列表。此外，我还`UIButton`需要下载该 tableview 中的书籍。下载这些书后，我需要将标签颜色从黑色更改为灰色。现在可以`UILabel`在下载书后更改颜色。但是当我重新启动应用程序时，它会返回到正常模式（即）文本颜色为黑色。

这是我的代码，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

   static NSString *CellIdentifier = @"Cell";

   cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if (cell == nil) 
   {
        cell = [[UITableViewCell alloc]initWithStyle: UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier];
   } 

   if(appDelegate.fontFlag==1 && [[databaseArray valueForKey:@"bookname"] containsObject:[listOfBooks objectAtIndex:indexPath.row]] )
    {
        //appDelegate.fontFlag=0;
        NSString *cellValue = [listOfBooks objectAtIndex:indexPath.row];//[downlodedBooksArray objectAtIndex:appDelegate.databaseIndex];
        Label.textColor=[UIColor grayColor];
        NSLog(@"cellValuebluecolor%@",cellValue);
        [Label setText:cellValue];

    }
    else
    {

    NSString *cellValue = [listOfBooks objectAtIndex:indexPath.row];
    [Label setText:cellValue];

    //  cell.text = cellValue;
    Label.textColor=[UIColor blackColor];
    }

    Label.backgroundColor = [UIColor whiteColor];
    [cell.contentView addSubview:Label];

return cell;
} 
```

为什么会发生这种情况？或者即使重新启动我的应用程序以仅在下载后才能获得指定的颜色，我应该如何更改我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:07:41.793

您需要使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)将其保存在应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:59:42.667

下载书籍后，在首选项中保存一个值。每次使用此值检查条件。这样，即使重新启动应用程序，您也可以保持标签的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:10:02.720

将数组存储在其中`NSUserDefault`，当您想要检查它是否在那时下载时，从 userdefault 中检索数组并从中进行检查。请参阅`NSUserDefault`...的示例

在`AppDelegate.h`文件中只声明变量...

```
NSUserDefaults  *userDefaults;
NSMutableArray *yourArray; 
```

后...

`AppDelegate.m`填入`applicationDidFinishLonching:`法_

```
userDefaults = [NSUserDefaults standardUserDefaults];
    NSData *dataRepresentingtblArrayForSearch = [userDefaults objectForKey:@"yourArray"];
    if (dataRepresentingtblArrayForSearch != nil) {
        NSArray *oldSavedArray = [NSKeyedUnarchiver unarchiveObjectWithData:dataRepresentingtblArrayForSearch];
        if (oldSavedArray != nil)
            yourArray = [[NSMutableArray alloc] initWithArray:oldSavedArray];
        else
            yourArray = [[NSMutableArray alloc] init];
    } else {
        yourArray = [[NSMutableArray alloc] init];
    }
    [yourArray retain]; 
```

之后，当您想在此 UserDefaults 中插入数据时，请使用波纹管代码...

```
[appDelegate.yourArray addObject:yourDataString];///set your value or anything which you want to store here...
NSData *data=[NSKeyedArchiver archivedDataWithRootObject:appDelegate.yourArray];
[appDelegate.userDefaults setObject:data forKey:@"yourArray"];
[appDelegate.userDefaults synchronize]; 
```

**并**使用您的代码检查以下情况，我只是将 userdefault 数组放在这里..

```
if(appDelegate.fontFlag==1 && [[appDelegate.yourArray valueForKey:@"bookname"] containsObject:[listOfBooks objectAtIndex:indexPath.row]] )
    {
        //appDelegate.fontFlag=0;
        NSString *cellValue = [listOfBooks objectAtIndex:indexPath.row];//[downlodedBooksArray objectAtIndex:appDelegate.databaseIndex];
        Label.textColor=[UIColor grayColor];
        NSLog(@"cellValuebluecolor%@",cellValue);
        [Label setText:cellValue];
    } 
```

我希望这可以帮助你...

# mysql - 如何使用“文件排序”和“使用临时”优化 MySQL 查询（需要 10 多秒）

> ID：13949611
> 
> 赞同：0
> 
> 时间：2012-12-19T09:51:42.353
> 
> 标签：mysql

我知道有一千个类似的问题，我读了很多，但我不知道如何提高以下查询的性能：

```
SELECT DATE_FORMAT(c.date, "%d/%m/%Y") AS ddmmyy, c.idQualification, q.name,
SUM(idContactList = "") + COUNT( DISTINCT NULLIF( CONCAT( c.idContactList, c.idActivity ), "" ) ) AS numCalls

FROM callsBreakdown c
LEFT JOIN qualification q ON q.idQualification = c.idQualification
LEFT JOIN activityCampaign a ON (a.idActivity = c.idActivity)
LEFT JOIN qualificationCampaign qc ON (qc.idCampaign = a.idCampaign AND qc.idQualification = c.idQualification)

WHERE c.date BETWEEN "2011-01-01" AND "2012-10-01"
GROUP BY c.date, q.name 
```

如果日期范围很宽，例如 1 年或更长时间，则查询需要 10-12 秒才能完成。在关于 callBreakdown 表的 EXPLAIN 中（其他在 Extra 列中有“使用索引”并且它们很快）：

```
id  select_type table type  possible_keys   key     key_len ref   rows    Extra
1   SIMPLE       c     ALL  date           NULL     NULL  NULL  379553  Using where; Using temporary; Using filesort 
```

服务器不使用日期索引，需要临时表和文件排序。任何想法？谢谢！

*编辑：我将别名“date”更改为“ddmmyy”，结果是一样的。别名不是问题。*

*编辑 2：如果日期范围是两个月或更短，MySQL 使用日期索引（键）而不是“NULL”键*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:54:34.503

当您编写`GROUP BY date` 它时，它使用别名，这是此处函数调用的输出：

```
SELECT DATE_FORMAT(c.date, "%d/%m/%Y") AS date, ... 
```

尝试按原始表中的列进行分组，这应该允许 ORDER BY 使用索引：

```
GROUP BY c.date, q.name 
```

# php - 发送 $_POST 时，vararyByExpression 的正确值

> ID：13949618
> 
> 赞同：0
> 
> 时间：2012-12-19T09:52:25.103
> 
> 标签：php, caching, yii

我需要缓存产品的 detail_view，我真的很想使用 COutputCache 或 CHttpCacheFilter 因为它们是以相同方式向 100 位用户显示页面的最快方式，而无需再次调用控制器。我只有一个问题

*   如果用户写评论，他通常会收到一条消息，并且评论应该显示在产品下方，但我找不到正确的表达方式来询问是否发送了 $_POST ......通常我会要求 !empty($_POST) 但是似乎它总是空的

我已经尝试过这样的事情

```
 array(
        'COutputCache',
        'duration'=>7200,
        'varyByRoute' => true,
        'varyByExpression' => 'md5(Yii::app()->request->url . (!empty($_POST) ? CJSON::encode($_POST) : ""))',
    ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:23:15.217

实际上，我找到了实现这一点的最佳方法，并想与您分享！

应该动态加载而不是缓存的网站的每个部分都可以调用

```
$this->renderPartial('getFlashMessages'); 
```

在这种情况下 getFlashMessages 应该是控制器内的回调函数，它返回输出（不是回显）

非常有帮助，并且可以缓存几乎所有内容，并且仍然具有动态内容，而无需为每个部分编写 ajax！

# objective-c - Objective-C NSNumber - 未声明的标识符？

> ID：13949620
> 
> 赞同：0
> 
> 时间：2012-12-19T09:52:35.060
> 
> 标签：objective-c, compiler-warnings, nsnumber

我写：

```
NSNumber *aNumber = [NSNumber numberWithInt: 0];
NSNumber *bNumber = [NSNumber numberWithInt: [aNumber intValue] + 5]; 
```

为什么我会收到一条警告说 aNumber 在 bNumber 行上未声明？

编辑：

这些代码：

```
 NSNumber *aNumber = [NSNumber numberWithInt: 0];
    NSNumber *bNumber = [NSNumber numberWithInt: [aNumber intValue] + 5];
    return [NSString stringWithFormat:@"%ld", (long)bNumber]; 
```

在方法中使用：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component { 
```

在 aNumber 行，我收到投诉“预期表达式”，在 bNumber 行，我收到“Unknown receiver 'aNumber'；您的意思是 NSNumber”吗？为什么呢？

编辑2：

```
switch (component){ 
    case 0: 
        NSNumber *aNumber = [NSNumber numberWithInt: 0]; 
        NSNumber *bNumber = [NSNumber numberWithInt: [aNumber intValue] + 5]; 
        return [NSString stringWithFormat:@"%ld", (long)bNumber]; 
        break; 
    case 1: 
        //....
    break; 
    case 2: 
        //....
    break; 
} 
```

我怀疑我不能在 switch 语句中声明任何内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:10:32.420

“预期表达式”错误通常是由之前行中的一些语法缺陷引起的。查看 aNumber 行上方的行。如果您无法识别错误，或者与我们分享这些行。

编辑：感谢您的编辑。在这种情况下，答案是您不能在 switch/case 语句中声明变量。它应该以这种方式工作：

```
NSNumber *aNumber;
NSNumber *bNumber;
switch (component){ 
    case 0: 
        aNumber = [NSNumber numberWithInt: 0]; 
        bNumber = [NSNumber numberWithInt: [aNumber intValue] + 5]; 
        return [NSString stringWithFormat:@"%ld", (long)bNumber]; 
        break; 
    case 1: 
        //....
    break; 
    case 2: 
        //....
    break; 
} 
```

如果您确实需要在 case-branch 范围内声明它们，那么您必须将程序从 switch/case 更改为 if 子句。在 if 子句的主体中，您可以轻松地声明局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:04:55.637

您可以使用此代码

```
NSLog(@"Value : %@",[self convert]);

-(NSString*)convert
{
    NSNumber *aNumber = [NSNumber numberWithInt: 0];
    NSNumber *bNumber = [NSNumber numberWithInt: [aNumber intValue] + 5];
    return [NSString stringWithFormat:@"%ld", (long)([bNumber longValue])];
} 
```

谢谢

# ios - apn_sender 和 Rails 3

> ID：13949624
> 
> 赞同：4
> 
> 时间：2012-12-19T09:52:39.933
> 
> 标签：ios, ruby-on-rails, ruby-on-rails-3, apple-push-notifications, resque

我有一个项目需要将通知从服务器发送到设备。我不知道如何以及从哪里开始（首先创建表或其他），因为我是 Ruby on Rails 的新手。我已经按照 apn_sender 教程进行操作，但它不起作用并且总是在开始时出错。有没有为 Rails 3 创建 apn_sender 的完整教程？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T19:48:16.723

## Rails 3 和 apn_sender

我也一直在处理 apn_sender 问题，因为我喜欢 Apple 推送通知支持看起来相当强大。然而，该项目已被放弃，现在它落后于最新的 3 系列导轨。我已经让系统按如下方式工作。

### 宝石文件

```
gem 'apn_sender', :require => 'apn'
gem 'daemons'
gem 'resque', '1.20.0'
gem 'resque-access_worker_from_job' 
```

1.20 之后 Resque 中的信号处理发生了变化，因此您必须使用较旧的 1.20.0。守护进程应该一直是一个要求，但从未在 gem 规范中明确显示。

### 脚本/apn_sender

```
#!/usr/bin/env ruby

# Daemons sets pwd to /, so we have to explicitly set RAILS_ROOT
RAILS_ROOT = File.expand_path(File.join(File.dirname(__FILE__), '..'))

require 'rubygems'
require 'apn'
require 'apn/sender_daemon'

APN::SenderDaemon.new(ARGV).daemonize 
```

[从这里](https://gist.github.com/kdonovan/1030667)检索到这个。没有生成 apn_sender 脚本的原因是因为生成器脚本需要针对 3 系列导轨进行更新。

### 启动发件人

```
./script/apn_sender --environment=production --verbose start 
```

启动环境时，生产值可能是您想要的，因为 ad_hoc 和发布版本都使用生产证书。

[github上的这个fork](https://github.com/kdonovan/apn_sender/pull/24)已经修正了rails 3的一些问题，但是resque版本问题仍然需要明确解决。

### 手动测试

[这个网站](http://hansay.com/2012/02/14/using-apn-sender-to-send-push-notifications-to-your-ios-devices/)展示了如何绕过守护进程发送消息。他将令牌存储为 base64 编码的字符串，既美观又紧凑。apn_sender 框架中设备字符串的格式是一个十六进制字符串，格式如下：`deadbeef 0a1b2cdf deadbeef 0a1b2cdf deadbeef 0a1b2cdf deadbeef 0a1b2cdf`. 空格可选。

```
require 'base64'
ios_device_token = User.where(username: 'Cameron').first.ios_device_token
token = Base64.decode64(ios_device_token).unpack('H*').first.scan(/\w{8}/).join(' ')
notification = APN::Notification.new(token, { alert: 'Hello, World!', sound: true, badge: 99 })
sender = APN::Sender.new(verbose: true, environment: 'production')
sender.send_to_apple(notification) 
```

### 确保 feedback.rb 文件是最新的

```
# Unpacking code borrowed from http://github.com/jpoz/APNS/blob/master/lib/apns/core.rb
while bunch = socket.read(38)   # Read data from the socket
  f = bunch.strip.unpack('N1n1H140')
  feedback << APN::FeedbackItem.new(Time.at(f[0]), f[2])
end 
```

一个版本的代码缺少 38，导致反馈服务返回错误的令牌字符串

### JetBrains 的 RubyMine

如果您计划将 Ruby 开发提升到一个新的水平，您还应该考虑使用[RubyMine](http://www.jetbrains.com/ruby/)之类的 IDE，因为它让一切变得如此简单。

# android - Android Lint 检查 - StringFormatInvalid：剩余 %d%% 有什么问题？

> ID：13949628
> 
> 赞同：6
> 
> 时间：2012-12-19T09:52:52.097
> 
> 标签：android, lint

我正在使用 Android Lint 检查我翻译的字符串。我有一个字符串

```
<string name='status_bar_text_remaining_capacity'>%d%% remaining</string> 
```

林特报告这个

```
res/values/strings.xml:91: Error: Format string 'status_bar_text_remaining_capacity' is not a valid format string so it should not be passed to String.format [StringFormatInvalid]
<string name='status_bar_text_remaining_capacity'>%d%% remaining</string> 
```

据我了解的文档，`String.format()`这是有效的字符串。你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T03:15:48.920

这是最近修复的 lint 中的错误； [https://android-review.googlesource.com/#/c/46741/1](https://android-review.googlesource.com/#/c/46741/1)

该修复程序位于 ADT 21.0.1 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-20T21:31:07.377

那是因为您必须使用[getString(int resID, Obj...args)](https://developer.android.com/guide/topics/resources/string-resource#formatar-strings)方法而不是 String.format()。该警告是因为 getString 有自己的方式来处理字符串参数。因此，每个 % int xml 字符串都是解析器的特殊符号，告诉它会有一个整数来通知位置。位置由`1$`,`2$`等表示，并进入说明符（`%`和`s`）。例如

```
Captured the IMEI: %s 
```

变成：

```
<string name="msg_success_captured_imei">Captured the IMEI: %1$s</string> 
```

如果您的字符串资源有更多参数，只需增加定位器：

```
<string name="msg_success_captured_imei">Captured the IMEI: %1$s %2$s %3$s</string> 
```

您可以使用不同的 args 说明符，但必须遵循以下顺序：

```
<string name="msg_success_captured_imei">This is a test %1$s %2$d </string> 
```

现在，您只需使用`getString`并传递额外的参数，例如：

```
getString(R.string.msg_success_captured_imei,mMyVar1, myVar2, myVar3); 
```

我希望我有所帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T12:55:41.340

使用 lint 版本 21 在 Windows 上检查了相同的情况，我没有收到任何错误。

# events - stopPropagation 和 live() 方法。我错过了什么？

> ID：13949633
> 
> 赞同：6
> 
> 时间：2012-12-19T09:53:00.700
> 
> 标签：events, jquery, stoppropagation

我已经阅读了 jQuery 文档，并且我知道如果我使用 live() 将事件绑定到元素，那么使用 stopPropagation() 是没有意义的，因为带有 live() 的事件绑定到文档节点，所以事件已经开始了。这么说，我认为 nex 代码会发出 3 次警报，因为 stopPropagation 不会停止任何事情：

```
<ul style="border:red solid 1px;">
    <li style="padding:10px; border:blue solid 1px;">
        <p style="border:green solid 1px;"><a href="#">link</a></p>
    </li>
    <li style="padding:10px; border:blue solid 1px;">
        <p style="border:green solid 1px;">no link</p>
    </li>
</ul>

<script type="text/javascript">
    $('a').live( "click", function( e ) {alert("link");e.stopPropagation()} );
    $('ul').live( "click", function( e ) {alert("ul");} );
    $('ul li').live( "click", function( e ) {alert("li");} );
</script> 
```

当我单击链接时，我期望并警告“li”和“ul”，但是 stopPropagation 正在停止其他应该无用的事件。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T09:57:55.940

根据[**文档**](http://api.jquery.com/live/) `stopPropagation()`不能`live()`按预期工作，因为`live()`仅在事件已经冒泡到`document`.

但是，如果您使用 jQuery 1.4.3 或更高版本`stopPropagation()`开始工作。

`live()`自 1.4.3 以来被多次重写。
该`live()`文档列出了许多首选使用其他绑定方法的原因。尽管文档中的信息似乎是指 1.4.1 的行为，并且似乎与当前的实际行为没有 100% 同步。

例如，查看添加的 1.7.1 Source`on()`显示`live()`正在使用`on()`：

```
live: function( types, data, fn ) {
    jQuery( this.context ).on( types, this.selector, data, fn );
    return this;
} 
```

[**演示**](http://jsfiddle.net/Pcmtr/)- 使用您的代码并使用 jQuery 1.4.1 - stopPropagation 无法正常工作，正如预期的那样

[**演示**](http://jsfiddle.net/JwPte/)- 使用您的代码并使用 jQuery 1.4.3 - stopPropagation 现在正在工作

### 概括

`live()`在 1.4.3 中重写。我假设由于`delegate()`当时已添加。
`live()`随着改进的增加，每个版本的 jQuery 都在不断更新。

一般来说，为了防止任何令人惊讶的结果，`live()`最好遵循[**文档**](http://api.jquery.com/live/)中的指南，并为给定版本的 jQuery 使用建议的方法：

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

* * *

为了完整起见，我在`live()`下面添加了 1.4.1 和 1.4.3 的源代码提取。

### 1.4.1 来源

```
live: {
    add: function(proxy, data, namespaces, live) {
        jQuery.extend(proxy, data || {});

        proxy.guid += data.selector + data.live;
        data.liveProxy = proxy;

        jQuery.event.add(this, data.live, liveHandler, data);

    },

    remove: function(namespaces) {
        if (namespaces.length) {
            var remove = 0,
                name = new RegExp("(^|\\.)" + namespaces[0] + "(\\.|$)");

            jQuery.each((jQuery.data(this, "events").live || {}), function() {
                if (name.test(this.type)) {
                    remove++;
                }
            });

            if (remove < 1) {
                jQuery.event.remove(this, namespaces[0], liveHandler);
            }
        }
    },
    special: {}
} 
```

### 1.4.3 来源

```
live: {
    add: function(handleObj) {
        jQuery.event.add(this, liveConvert(handleObj.origType, handleObj.selector), jQuery.extend({}, handleObj, {
            handler: liveHandler,
            guid: handleObj.handler.guid
        }));
    },

    remove: function(handleObj) {
        jQuery.event.remove(this, liveConvert(handleObj.origType, handleObj.selector), handleObj);
    }
} 
```

# sql - sql查询需要代码

> ID：13949635
> 
> 赞同：-1
> 
> 时间：2012-12-19T09:53:08.100
> 
> 标签：sql

我想显示按部门排序的员工人数、最高工资、最低工资和平均工资。

数据库图片：

![在此处输入图像描述](../Images/0a51b2954338353f251b525bdee6570b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:58:37.647

要获取员工人数，请查找[SQL Count()](http://www.w3schools.com/sql/sql_func_count.asp)。

要获得最大/最小查找[SQL Max()](http://www.w3schools.com/sql/sql_func_max.asp)和[SQL Min](http://www.w3schools.com/sql/sql_func_min.asp)。

要获得平均值，请查看[SQL Avg](http://www.w3schools.com/sql/sql_func_avg.asp)。

但是你知道，你本可以在我用谷歌找到它们的大约十秒钟内自己找到这些链接，而不是来到这里并期望有人把写好的代码交给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:57:46.273

这可能是接近你需要的地方......

```
select E.Department_ID, count(*), max(E.Employee_Salary), avg(E.Employee_Salary), min(E.Employee_Salary)
    from employee E
    inner join department D on E.Department_ID = D.Department_ID
    group by E.Department_ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T09:59:18.597

这是我的查询，我现在没有 SQL 来测试抱歉

```
Select Employee_Id,(Employee_lastName+''+Employee_FirstName) as EmployeeName 
       ,Max(Employee_Salary) as maxWage,Min(Employee_salary) as MinWage , 
        Avg(Employee_Salary)

from   Employee E
       Inner Join Department D on D.Department_Id = E.department_Id

Group By Department_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:00:17.333

尝试聚合函数

[http://databases.about.com/od/sql/l/aaaggregate1.htm](http://databases.about.com/od/sql/l/aaaggregate1.htm)

这应该可以帮助您学习它们。

例子

1.  计数以选择行数

2.  最大值和最小值的最大值和最小值

`SELECT`在查询部分使用这些

在您的情况下，您必须对这些使用 group by`Department_ID`

学习理论，你会很容易得到答案

# python - 如何用python更新json文件

> ID：13949637
> 
> 赞同：96
> 
> 时间：2012-12-19T09:53:21.447
> 
> 标签：python, json

我正在尝试更新现有的 Json 文件，但由于某种原因，请求的值没有被更改，但整个值集（带有新值）被附加到原始文件中

```
jsonFile = open("replayScript.json", "r+")
data = json.load(jsonFile)

tmp = data["location"]
data["location"] = "NewPath"

jsonFile.write(json.dumps(data)) 
```

结果是：必需：

```
{
   "location": "NewPath",
   "Id": "0",
   "resultDir": "",
   "resultFile": "",
   "mode": "replay",
   "className":  "",
   "method":  "METHOD"
} 
```

实际的：

```
{
"location": "/home/karim/storm/project/storm/devqa/default.xml",
"Id": "0",
"resultDir": "",
"resultFile": "",
"mode": "replay",
"className":  "",
"method":  "METHOD"
}
{
    "resultDir": "",
    "location": "pathaaaaaaaaaaaaaaaaaaaaaaaaa",
    "method": "METHOD",
    "className": "",
    "mode": "replay",
    "Id": "0",
    "resultFile": ""
} 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-12-19T10:04:40.543

这里的问题是您已经打开了一个文件并读取了它的内容，因此光标位于文件的末尾。通过写入相同的文件句柄，您实际上是在附加到文件。

最简单的解决方案是在读入文件后将其关闭，然后重新打开以进行写入。

```
with open("replayScript.json", "r") as jsonFile:
    data = json.load(jsonFile)

data["location"] = "NewPath"

with open("replayScript.json", "w") as jsonFile:
    json.dump(data, jsonFile) 
```

或者，您可以使用[`seek()`](http://docs.python.org/release/2.7/library/stdtypes.html#file.seek)将光标移回文件开头然后开始写入，然后使用 a[`truncate()`](http://docs.python.org/release/2.7/library/stdtypes.html#file.truncate)来处理新数据小于前一个的情况。

```
with open("replayScript.json", "r+") as jsonFile:
    data = json.load(jsonFile)

    data["location"] = "NewPath"

    jsonFile.seek(0)  # rewind
    json.dump(data, jsonFile)
    jsonFile.truncate() 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-12-19T10:04:17.070

```
def updateJsonFile():
    jsonFile = open("replayScript.json", "r") # Open the JSON file for reading
    data = json.load(jsonFile) # Read the JSON into the buffer
    jsonFile.close() # Close the JSON file

    ## Working with buffered content
    tmp = data["location"] 
    data["location"] = path
    data["mode"] = "replay"

    ## Save our changes to JSON file
    jsonFile = open("replayScript.json", "w+")
    jsonFile.write(json.dumps(data))
    jsonFile.close() 
```

# php - 如何在 CURL 中获取请求发送服务器域名？

> ID：13949641
> 
> 赞同：-2
> 
> 时间：2012-12-19T09:53:34.487
> 
> 标签：php, magento, curl

我需要使用 CURL将一些数据从一台服务器发布`(Server-1)`到另一台服务器。`(Server-2)`在这种情况下，我需要在`server-2`.

那么如何获取请求后的域名`(server-1)`呢`Server-2`？

CURL 中是否有任何内置方法可用？

任何帮助非常感谢。

样本 ：

**服务器 1** [http://domain1.com](http://domain1.com)

```
 $serviceUrl = 'http://domain1.com/data';
                $curl = curl_init($serviceUrl);

                $curlPostData = array("data" => $data);

                curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
                curl_setopt($curl, CURLOPT_POST, true);
                curl_setopt($curl, CURLOPT_POSTFIELDS, $curlPostData);

                $curlResponse = curl_exec($curl);

                curl_close($curl); 
```

**服务器 2** [http://domain2.com](http://domain2.com)

```
<?php

                $data = $_POST['data'];

                //I need to get the http://domain1.com using curl or php?

                // Some Code Process

                ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:56:30.320

您可以将请求服务器 url 与数据一起传递

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:04:42.423

我真的不明白你的问题。你只需要说引用域是server-1？在这种情况下，您可以在 bash 脚本中执行以下操作：

```
curl -X POST -e 'http://domain1.com' --data 'key=value&anotherkey=anothervalue' http://domain2.com 
```

或者您需要来自该服务器的数据？在这种情况下，您将如何检索这些数据？请求将从哪里发送？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:58:37.467

在检索发布请求的服务器上，使用 php`$_SERVER`变量读取标头。

[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

`$post = $_SERVER['HTTP_ORIGIN'];`或 '$post = $_SERVER['HTTP_REFERER']' 取决于你想要什么。

您还可以在发送请求并检索它时定义一个属性，例如：'$_POST['myattr']'

我希望这会有所帮助，但是您的问题仍然有点草率，所以我不知道这是否是您想要实现的目标。

# c# - 如何访问用户注册时给出的“名称”

> ID：13949644
> 
> 赞同：3
> 
> 时间：2012-12-19T09:53:51.200
> 
> 标签：c#, asp.net-mvc-3, login

所以我只希望允许登录用户为他们自己预订假期。我认为最简单的方法是在个人表中比较登录用户的“名称”和“名称”。所以....

```
public ActionResult Create()
    {
        string xx = (string)Session["usernameID"];
        int? currentPersonID = Convert.ToInt32(xx);

        string userNameComparedAgainstLoginName = // here is where i want to say 'name' of logged in user

        CreateModel model = new CreateModel();
        model.currentPersonID = currentPersonID.Value;
        model.PList4DD = db.People.ToList();

        if (userNameComparedAgainstLoginName == model.userName)
        {
            ViewBag.Id = new SelectList(db.People, "Id", "Name");
            return View(model);
        }
        else
        {
            TempData["canOnlyBookHolidaysForYourself"] = "I'm afraid you can only book holidays for yourself";
            return RedirectToAction("Index");
        }
    } 
```

* * *

用户注册时给出的名称将与数据库中使用的名称相同。

那么有人可以告诉我如何访问登录的“名称”吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:58:50.130

将记录的用户数据（例如用户名/电子邮件/ID）存储在会话中是不好的做法。好的做法是创建自定义用户主体或身份，并将应用程序中经常使用的所有用户数据存储在其中。

您最好创建自定义主体或身份并将该信息存储在身份验证 cookie 中并通过 User.Identity.XXX 访问它

这是一个链接，其中很好地描述了如何创建自定义主体。 [ASP.NET MVC - 设置自定义 IIdentity 或 IPrincipal](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal)

或者，如果您不需要如此复杂的机制，您可以只使用 HttpContext 中的默认 User.Identity。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:00:58.830

您可以从`User.Identity`

你只需要使用`User.Identity.Name`

# javascript - Opera 中的 document.hasFocus？

> ID：13949653
> 
> 赞同：1
> 
> 时间：2012-12-19T09:54:13.097
> 
> 标签：javascript, opera

有谁知道如何检测新打开的文档是否在 Opera 中有焦点？

window.onfocus 和 window.onblur 仅在焦点丢失或获得后有帮助，但在页面刚刚打开时无效。

并且假设新打开的页面总是有焦点是不好的：它可以在后面的选项卡中打开。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T00:20:51.367

您可以使用 HTML5 [Page Visibility API](http://www.w3.org/TR/page-visibility/)。是向文档对象添加两个属性：（`document.hidden`返回布尔值（真/假））和`document.visibilityState`（返回字符串）。

甚至还有一个教程： http: [//my.opera.com/ODIN/blog/page-visibility-api-support-in-opera-12-10](http://my.opera.com/ODIN/blog/page-visibility-api-support-in-opera-12-10)

ps：要在其他浏览器中使用它 - 您需要添加适当的供应商前缀。

# python - 如何在python中替换dict？

> ID：13949655
> 
> 赞同：-3
> 
> 时间：2012-12-19T09:54:13.530
> 
> 标签：python, memory, dictionary

我在使用 python 的 hadoop 流作业中遇到内存问题。在程序中，我需要一个结构，如下所示：

```
dict{"metric_id":set(user_id1,user_id2...),...} 
```

在reduce中（只有reducer），我会计算每个metric_id有多少用户。现在大约有100,000,000个用户，它消耗大约6G内存。

我试过 module [shelve](http://docs.python.org/2/library/shelve.html)，但它很慢......也许我以错误的方式使用它看起来像：

```
tmp_set = set()
for id in value.split(","):
    if id != "":
        tmp_set.add(id) 
if self.ids_dict.has_key(metric_id):
    ori_set = self.ids_dict[metric_id]
    self.ids_dict[metric_id] = ori_set.union(tmp_set)
else:
    self.ids_dict[metric_id] = tmp_set 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:58:16.267

这根本不是一个好主意。我无法想象您需要一次加载所有 100,000,000 个用户。

如果您确实需要通过 metric id 访问用户数量，您应该做的是在该数字的某处维护一个单独的字典或表，*例如*：

```
{'<metric id 1>': 3,
 '<metric id 2>': 5,
 ...
} 
```

由于您已经按原样存储了此信息，因此您可以运行一次程序（这将非常慢）来收集此信息，类似于以下内容

```
import collections
numbers = collections.defaultdict(int)
for id, users in mydict.iteritems():
    numbers[id] += len(users) 
```

然后在您添加/删除项目时更新该数据结构，以便预先计算此值。没有有效的方法来定期确定约 100,000,000 长度对象的长度。

# python - Python 从 unicode 列表中删除制表符和回车行

> ID：13949657
> 
> 赞同：0
> 
> 时间：2012-12-19T09:54:20.913
> 
> 标签：python, unicode, str-replace

我已经查看了以前的答案（[python 如何从字符串或列表中删除此 n ，从列表](https://stackoverflow.com/questions/2903523/in-python-how-to-remove-this-n-from-string-or-list)中[删除列表项](https://stackoverflow.com/questions/7347063/remove-a-n-list-item-from-a-python-list)和[python 删除字符串中的空格](https://stackoverflow.com/questions/8270092/python-remove-whitespaces-in-string)），但无法使解决方案正常工作。

我有一个包含单个元素的列表，如下所示：

```
list = [u'\r\n\r\n\r\n            \r\n                \r\n                    \r\n                    123 Main St., Peoria\r\n                \r\n\r\n            \r\n             |\r\n             \r\n                    \r\n                        \r\n                            \r\n                            123-456-789\r\n                        \r\n                    \r\n            \r\n        '] 
```

它有一个地址和一个电话号码，我想要返回的是：

```
123 Main St., Peoria;123-456-789 
```

我尝试过类似的东西：

```
str(list).strip(' \r\n\t') 
```

和

```
str(list).replace('\r','') 
```

但它们不起作用，所以我在想也许这是一个 unicode 问题？我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:58:42.780

只需从列表中取出*一个*元素并在那里替换：

```
print lst[0].replace('\r', '').replace('\n', '') 
```

此处无需将列表本身转换为字符串。

在这种情况下，您还可以结合`unicode.strip`a`.splitlines()`从每一行中删除空格，然后重新加入：

```
print u' '.join([l.strip() for l in lst[0].splitlines() if l.strip()]) 
```

这打印：

```
123 Main St., Peoria | 123-456-789 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T09:57:19.023

```
import re

li = [u'\r\n\r\n\r\n \r\n \r\n \r\n 123 Main St., Peoria\r\n \r\n\r\n \r\n |\r\n \r\n \r\n \r\n \r\n 123-456-789\r\n \r\n \r\n \r\n ']
print re.sub(r'\s+', ' ', li[0].replace(' |', ';')) 
```

印刷

```
123 Main St., Peoria; 123-456-789 
```

# c++ - 读取 Firebird 存储过程的返回值

> ID：13949659
> 
> 赞同：1
> 
> 时间：2012-12-19T09:54:28.167
> 
> 标签：c++, stored-procedures, firebird, c++builder

我有这个 Firebird 存储过程：

```
SET TERM ^ ;
CREATE PROCEDURE MYSP ( FIRSTPARAM Varchar(3) )
    RETURNS ( ERROR Varchar(128) )
AS BEGIN
    /* a lot of things, including setting a value to ERROR */
    suspend;
END^
SET TERM ; ^ 
```

我需要在 C++ Builder XE2 中执行这个过程，最后读取它的返回值 ( `ERROR`) 看它是否成功。过程只返回一行。

我试过这样：

```
TIBQuery* q = DMH->ordQuery;
q->Close( );
q->SQL->Clear( );
q->SQL->Text = "EXECUTE PROCEDURE MYSP(:P1)";

if ( !DMH->ordTrans->InTransaction )
{
    MakeCommit = true;
    DMH->ordTrans->StartTransaction( );
}
if ( !q->Prepared )
    q->Prepare( );

q->Params->ParamByName( "P1" )->Value = "abc";
q->Open();

//success if error field contains NULL
TField* errorField = q->FieldByName( "ERROR" );
bool success = errorField->IsNull;

if ( MakeCommit )
    DMH->ordTrans->Commit( ); 
```

它给了我一个访问冲突`errorField`，因为它找不到这样的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:54:28.167

我不得不更改声明：

```
SELECT ERROR
FROM MYSP(:P1) 
```

# oracle - 如何使用 PL/SQL Developer 优化查询？

> ID：13949660
> 
> 赞同：0
> 
> 时间：2012-12-19T09:54:28.227
> 
> 标签：oracle, plsqldeveloper

我有大约 53 个代码字符串的查询，我需要对其进行优化。我有 PL/SQL Developer 7.0 工具，我应该如何使用它进行优化？

我尝试使用解释计划，但它什么也没告诉我。我还添加了时间和时间戳列，但没有什么有趣的，第一个是空的，第二个总是相同的时间。

我尝试使用测试窗口，但有一个过程需要变量插入，并且当我的查询选择许多行时，我无法使用它。

所以问题是如何使用 PL/SQL Developer 优化 sql 查询？我应该在哪里寻找每个子查询的查询执行时间？也许有一些指南，但现在我只找到了文档，但它对我没有用？就我目前的知识而言，如果没有任何工具，似乎不可能优化如此大的查询。

查询，需要优化：

```
select count(PRODUCT_NUMBER)
  from 
(select W.SUID,
       I.SUID,
       W.PRODUCT_NUMBER,
       MI.ML_NUMBER,
       I.TITLE_TRANSLIT,
       I.COUNTRIES,
       QTY.REMAINS,
       QTY.ACQ_PRICE_USD,
       QTY.REMAINS * QTY.ACQ_PRICE_USD as TOTAL
  from (select UID_WARE,
               QTY as REMAINS,
               ACQ_PRICE_USD
          from (select UID_WARE,
                       PRODUCT_NUMBER,
                       NVL(sum(QTY_ON_STOCK), 0) - NVL(sum(ADD_IN_QTY), 0) + NVL(sum(ADD_OUT_QTY), 0) as QTY,
                       ACQ_PRICE_USD as ACQ_PRICE_USD
                  from (select SI.UID_WARE,
                               W.PRODUCT_NUMBER,
                               count(distinct STK.SUID) as QTY_ON_STOCK,
                               sum(case
                                     when 1 = 1  then
                                      DECODE('' , SM.UID_SOURCE_LOCATION, SM.QTY, 0)
                                     else 0
                                   end) as ADD_OUT_QTY,
                               sum(case
                                     when 1 = 1  then
                                      DECODE('' , SM.UID_DEST_LOCATION, SM.QTY, 0)
                                     else 0
                                   end) as ADD_IN_QTY,
                               ROUND(ACQ.PRICE_USD, 2) as ACQ_PRICE_USD
                          from STOCK_MOVEMENTS SM
                          join STOCK_ITEMS SI on SM.UID_STOCK_ITEM = SI.SUID
                          left outer join (select PR.UID_STOCK_ITEM,
                                                 DECODE(NVL(CR.RATE, 0), 0, 0, PR.PRICE / CR.RATE) as PRICE_USD
                                            from MV_STOCK_ACQ_PRICES PR,
                                                 CURRENCY_RATES CR
                                           where PR.PRICE_DATE = CR.RATE_DATE
                                                 and PR.UID_CURRENCY = CR.UID_CURRENCY) ACQ on ACQ.UID_STOCK_ITEM = SI.SUID
                          join WARES W on W.SUID = SI.UID_WARE
                          left outer join (select distinct STK.SUID,
                                                           STK.QTY_REMAINS
                                             from STOCK_ITEMS STK
                                            where STK.UID_STOCK_LOCATION != 'MS-STL-SALED' 
                                                  ) STK on STK.SUID = SI.SUID
                         where 1 = 1

                         group by SI.UID_WARE,
                                  W.PRODUCT_NUMBER,
                                  ACQ.PRICE_USD
                        ) T
                 group by T.UID_WARE,
                          T.PRODUCT_NUMBER,
                          ACQ_PRICE_USD)) QTY
  join WARES W on W.SUID = QTY.UID_WARE
  join INVENTORY I on I.SUID = W.UID_ISSUE
  join MAP_INFO MI on MI.SUID = I.SUID
 where REMAINS != 0
       and w.UID_SECTION in ('MS-SEC-BOOKS', 'MS-SEC-MAPS')) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:50:47.507

当您使用 GUI 分析和优化查询时，您将自己锁定在一个小得多的潜在帮助社区中。如果您运行解释计划并使用 DBMS_XPlan.Display 来获取格式化的结果，那么您正在使用一种被成千上万的从业者理解的标准方法。

另外，我怀疑您已将查询包装在仅使用 count(*) 的外部查询中。虽然这可能是运行查询而无需返回所有行，但您很可能会得到一个完全不同的执行计划，尽管有一些提示可能有助于促进使用通常的计划，但不能保证它会成功。 t 改变。所以，如果这是为了调优方便，就把它拿走。

所以我的建议：

1.  以常规的基于查询的方式运行解释计划，不要依赖“帮助”的工具。
2.  运行您需要调整的实际查询。
3.  发布执行计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:06:27.973

对于执行时间，从[这里](https://forums.oracle.com/forums/thread.jspa?threadID=703536)：

```
SQL> set timing on; 
```

在 PL/SQL Developer 中，您可以独立运行每个子查询——用鼠标标记它并按`F8`。您将在 sql 窗口的左下角（在结果下方）看到执行时间。

优化不是一件容易的事，您必须自己思考 - 据我所知，没有工具可以为您做到这一点。您的方法可能取决于许多因素 - 数据库版本、底层操作系统、表大小、索引...

您可以阅读一些指南（例如[this](http://docs.oracle.com/html/A95912_01/wn32tune.htm)、[this](http://hungred.com/useful-information/ways-optimize-sql-queries/)或[this](http://www.dba-oracle.com/art_sql_tune.htm)）

**更新**

根据您的数据库版本，您可以尝试使用[CTE](http://www.morganslibrary.org/reference/with.html)或[SQL 建模](http://docs.oracle.com/cd/B19306_01/server.102/b14223/sqlmodel.htm)- 它们肯定会提高性能，但需要一些时间来学习。

代替`group by`，您可以尝试[分析函数](http://psoug.org/reference/analytic_functions.html)（例如`partition by`，请参阅[此链接](http://www.orafaq.com/node/55)以获取示例）。

# c - main() 递归调用 main() - gdb 回溯不显示多个 main() 帧 - 为什么？

> ID：13949665
> 
> 赞同：0
> 
> 时间：2012-12-19T09:54:47.493
> 
> 标签：c, gdb

我在`main()`里面打电话`main()`，递归10次。现在在使用`gdb`(bt/backtrace) 进行调试时，我没有看到`main()`. 为什么？

```
#include<stdio.h>

int main(){

     static int i;
     int num=100;

     if(i>10)
       return 0;
     else {
       i++;
       num++;
       main();
       printf("\n%d",num); 
     }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:25:30.120

**这是 的记录行为`gdb`，并且[（应该是）可配置](http://sourceware.org/gdb/current/onlinedocs/gdb/Backtrace.html)的。**

`gcc 4.7.2`当我用( )编译您的代码时`-O3`，我得到以下程序集：

```
_main:
LFB1:
        movl    _i.2134(%rip), %eax
        cmpl    $10, %eax
        jle     L6
        xorl    %eax, %eax
        ret
L6:
        addl    $1, %eax
        pushq   %rdx
LCFI0:
        movl    %eax, _i.2134(%rip)
        xorl    %eax, %eax
        call    _main                    ; <=== recursive call
        popq    %rcx
LCFI1:
        movl    $101, %esi
        xorl    %eax, %eax
        leaq    LC0(%rip), %rdi
        jmp     _printf
LFE1: 
```

这反驳了递归调用被优化掉的假设。

现在，如果我将二进制文件加载到 中`gdb`并在 上设置断点`main()`，它会被反复命中。当我检查寄存器时，`%rsp`每次调用都会递减，因此显然有与每个`main()`.

尽管如此，`bt`只显示一个帧：

```
(gdb) bt
#0  0x0000000100000f50 in main () 
```

（在这种情况下，我知道有三`main()`帧，而不仅仅是一帧。）

因此，我得出结论，这与`gdb`它本身有关。

经过进一步调查，事实证明这种行为已[记录在案](http://sourceware.org/gdb/current/onlinedocs/gdb/Backtrace.html)：

> 大多数程序都有一个标准的用户入口点——系统库和启动代码转换为用户代码的地方。对于 C，这是`main`. 当`gdb`在回溯中找到入口函数时，它将终止回溯，以避免追踪到高度系统特定（通常是无趣）的代码。

当我在中设置以下内容时`gdb`：

```
set backtrace past-main on
set backtrace past-entry on 
```

它开始显示两`main()`帧。出于某种原因，它仍然没有更深入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:09:06.957

您的问题与您为此使用的事实无关`main`。

一个简单的递归程序，正如您最终愿意在评论中向我们展示的那样，可以很容易地被编译器优化，根本不进行递归。在您的情况下，它比通常更简单，因为您有一个预定义的递归深度`10`. 编译器可以轻松地将其展开为静态代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T12:08:34.810

```
Here is the Answer for my own Question.
(gdb) set backtrace past-main on
(gdb) b main
Breakpoint 1 at 0x4004b0: file recursion.c, line 5.
(gdb) run
Starting program: /nobackup/arjprasa/C/gdb/a.out

Breakpoint 1, main () at recursion.c:5
5               int num=100;
(gdb) c
Continuing.

Breakpoint 1, main () at recursion.c:5
5               int num=100;
(gdb) bt
#0  main () at recursion.c:5
#1  0x00000000004004df in main () at recursion.c:12
#2  0x00000034d091c4cb in __libc_start_main () from /lib64/tls/libc.so.6
#3  0x000000000040041a in _start ()
(gdb) c
Continuing.

Breakpoint 1, main () at recursion.c:5
5               int num=100;
(gdb) bt
#0  main () at recursion.c:5
#1  0x00000000004004df in main () at recursion.c:12
#2  0x00000000004004df in main () at recursion.c:12
#3  0x00000034d091c4cb in __libc_start_main () from /lib64/tls/libc.so.6
#4  0x000000000040041a in _start ()
(gdb) c
Continuing.

Breakpoint 1, main () at recursion.c:5
5               int num=100;
(gdb) bt
#0  main () at recursion.c:5
#1  0x00000000004004df in main () at recursion.c:12
#2  0x00000000004004df in main () at recursion.c:12
#3  0x00000000004004df in main () at recursion.c:12
#4  0x00000034d091c4cb in __libc_start_main () from /lib64/tls/libc.so.6
#5  0x000000000040041a in _start ()
(gdb) 
```

# android - 如何在清单文件中注册应用程序类？

> ID：13949666
> 
> 赞同：28
> 
> 时间：2012-12-19T09:54:50.410
> 
> 标签：android, xml, manifest

如何在我的 android 清单中注册我的应用程序类？我在网上看了很多教程，仍然不能正确。我的应用程序类称为`Monitor.java`. 如何在下面的 Manifest 文件代码中注册它？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.project"
    android:versionCode="1"
    android:versionName="1.0" >

<application
    android:allowBackup="true"
    android:debuggable="true"
    android:icon="@drawable/ic_launcher"
    android:label="xyz"
    android:screenOrientation="landscape"
    android:theme="@style/AppTheme" >

    <service
        android:name=".AudioService"
        android:icon="@drawable/ic_launcher"
        android:label="audioservice" >
    </service>

    <activity
        android:name=".MainActivity"
        android:screenOrientation="landscape" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Editor"
        android:screenOrientation="landscape"
        android:windowSoftInputMode="stateHidden" >
        <intent-filter>
            <action android:name="com.example.project.EDITOR" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-19T09:58:48.757

```
<application
        android:name="package.YourApplicationClass"  <--------
        android:allowBackup="true"
        android:debuggable="true"
        android:icon="@drawable/ic_launcher"
        android:label="xyz"
        android:screenOrientation="landscape"
        android:theme="@style/AppTheme"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T09:58:01.403

尝试这个：

```
 <application android:icon="@drawable/icon" 
       android:label="@string/app_name" 
       android:name="Monitor"> 
```

请参阅下面的良好参考链接：

[如何使用Android的Application对象](http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android)

谢谢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T09:57:26.363

简单，将`android:name`您的应用程序类名称的属性放在应用程序的**Manifest.xml**`<application />`的标记中

 **```
<application
 android:name=".Monitor"
   .... > 
```

**更新：**

**应用类：**

> 需要维护全局应用程序状态的基类。您可以通过在 AndroidManifest.xml 的标签中指定其名称来提供自己的实现，这将导致在创建应用程序/包的进程时为您实例化该类。

更多信息请查看[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T09:57:02.120

好吧，你里面已经有了应用程序类——从`<application`. 如果您`Application`的代码中有一个自定义类（扩展）并希望它启动 - 放置

```
android:name=".Monitor" (or full path like com.something.app.Monitor) 
```

在`<application`标签之后（与添加活动相同的过程）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T09:58:31.613

只需`android:name=".Monitor"`在标签中添加一个属性`application`（我假设 Monitor.java 类位于应用程序包的根目录中）。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-21T02:31:51.640

让我感到困惑的是 'android:name' 在清单文件中多次出现。在创建应用程序类文件之前，我有

```
android:name=".MainActivity" 
```

在“活动”标签之后。

创建应用程序文件后，清单文件中的所有内容都保持不变，除了在“应用程序”标签之后，我添加

```
android:name=".myApplicationClass" 
```

我完整的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="pixtas.com.nightout" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <!--
      IMPORTANT: Change "com.parse.tutorials.pushnotifications.permission.C2D_MESSAGE" in the lines below
      to match your app's package name + ".permission.C2D_MESSAGE".
    -->
    <permission android:protectionLevel="signature"
        android:name="pixtas.com.nightout.permission.C2D_MESSAGE" />
    <uses-permission android:name="pixtas.com.nightout.permission.C2D_MESSAGE" />

    <application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:name=".myApplicationClass" >

        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service android:name="com.parse.PushService" />
        <receiver android:name="com.parse.ParseBroadcastReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.intent.action.USER_PRESENT" />
            </intent-filter>
        </receiver>
        <receiver android:name="com.parse.GcmBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND">
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <!--
                  IMPORTANT: Change "com.parse.tutorials.pushnotifications" to match your app's package name.
                -->
                <category android:name="pixtas.com.nightout" />
            </intent-filter>
        </receiver>
        <receiver android:name="com.parse.ParsePushBroadcastReceiver" android:exported="false">
            <intent-filter>
                <action android:name="com.parse.push.intent.RECEIVE" />
                <action android:name="com.parse.push.intent.DELETE" />
                <action android:name="com.parse.push.intent.OPEN" />
            </intent-filter>
        </receiver>

        <!-- replace @drawable/push_icon with your push icon identifier -->
        <meta-data android:name="com.parse.push.notification_icon" android:resource="@drawable/ic_launcher"/>

    </application>

</manifest> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T10:00:30.830

用这个

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.testing"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Monitor"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```**

# ruby-on-rails - 将 SSL 与 MongoDB 监控服务一起使用时出错

> ID：13949669
> 
> 赞同：0
> 
> 时间：2012-12-19T09:55:06.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid3

我确实在[http://mms.10gen.com/help/single/index.html#mms-requirements](http://mms.10gen.com/help/single/index.html#mms-requirements)`settings.py`的帮助下编辑了我的代理安装中的文件，所以 现在当我运行 python agent.py 我得到这样的错误`useSslForAllConnections value is True`

```
2012-12-19 15:09:37,209 ERROR Problem collecting non-blocking data from: gobingoo:27017 - exception: Traceback (most recent call last):
  File "/home/prem/mms-agent/nonBlockingStats.py", line 56, in run
    monitorConn = self.mmsAgent.getDbConnection( self.hostKey )
  File "/home/prem/mms-agent/mmsAgent.py", line 109, in getDbConnection
    return pymongo.Connection( hostDef['mongoUri'] , slave_okay=True, ssl=True )
  File "/usr/local/lib/python2.7/dist-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/pymongo/connection.py", line 180, in __init__
    max_pool_size, document_class, tz_aware, _connect, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/pymongo-2.4.1-py2.7-linux-x86_64.egg/pymongo/mongo_client.py", line 274, in __init__
    raise ConnectionFailure(str(e))
ConnectionFailure: SSL handshake failed. MongoDB may not be configured with SSL support. 
```

这背后的原因是什么。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:24:47.910

需要注意的是，我有一个完整的集群正在运行，现在有 MMS 监控，一切都在运行 SSL，所以我可以确认它工作正常。但是，我将每个主机启用为单独启用 SSL，而不是更改代理配置并重新启动。也就是这里的方法2：

[http://mms.10gen.com/help/single/index.html#using-ssl-with-mms](http://mms.10gen.com/help/single/index.html#using-ssl-with-mms)

为了以防万一，您可能想尝试该个人设置

要先进行测试，请尝试使用`mongo`shell 从您正在运行代理的主机连接到集合的每个成员，并使用 SSL 并验证连接是否成功：

/path/to/mongo --ssl --host --port

如果成功，您已验证代理应该能够连接，并且您的 MongoDB 设置正在运行。此时在 Jira 中提交 MMS 问题以进一步排除故障可能是一个好主意：

[https://jira.mongodb.org/browse/MMS](https://jira.mongodb.org/browse/MMS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:23:02.427

问题是您没有使用 MongoDB 的 SSL 连接：http: [//docs.mongodb.org/manual/administration/ssl/](http://docs.mongodb.org/manual/administration/ssl/)

由于情况并非如此，并且您已在代理 MMS 中将其打开，因此尝试与 MongoDB 集群进行 S​​SL 握手并失败。

您应该在代理设置文件中将此标志设置为 false，因为您不在 MongoDB 集群中使用 SSL 连接。

您谈论的设置是特定场景的特定子集：http: [//mms.10gen.com/help/single/index.html#using-ssl-with-mms](http://mms.10gen.com/help/single/index.html#using-ssl-with-mms)一个不适用于您。

# jquery - IE8 不支持 jQuery 变量内部选择器？

> ID：13949671
> 
> 赞同：1
> 
> 时间：2012-12-19T09:55:08.500
> 
> 标签：jquery, internet-explorer-8

下面的代码添加了一个上传字段的链接。对于每一次新点击，它都会在表单中显示一个新的上传字段，最多 5 个。Chrome 等中没有错误。

我想知道下面这行有什么问题，因为该脚本似乎在其他浏览器上运行良好，但在 IE8 上它会引发错误：`Object doesn't support this action`. 你能建议替代代码吗？

```
<div id="edit-submitted-file1-ajax-wrapper" style="display: block;">
    //upload field here
</div>
<a id="addmore" href="#">[+] Add more</a>

<div id="edit-submitted-file2-ajax-wrapper" style="display: block;">
    //upload field here
</div>

<div id="edit-submitted-file3-ajax-wrapper" style="display: block;">
    //upload field here
</div> 
```

ETC

```
first = $('.webform-client-form').find('div[id$="-ajax-wrapper"]').first();
        first.after('<a id="addmore" href=#>[+] Add more</a>');
        $('.webform-client-form').find('div[id$="-ajax-wrapper"]').each(function(){
            $(this).hide();
            first.show();
        });

var c = 0;
$('#addmore').bind('click', function(e) {
    //HERE BELOW IS THE LINE WITH ERROR
    item = $('#edit-submitted-file'+ c +'-ajax-wrapper');
    item.show();
    ++c;
    if (c == 5) {
        $('#addmore').hide();
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:06:03.173

改变这个

```
item = $('#edit-submitted-file'+ c +'-ajax-wrapper'); 
```

对此

```
var item = $('#edit-submitted-file'+ c +'-ajax-wrapper'); 
```

[http://jsfiddle.net/fJ3EG/2/](http://jsfiddle.net/fJ3EG/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T13:50:10.550

您之前可能在 html 中的某处使用过“项目”一词。将您的变量声明为`var item`，问题应该得到解决。

请参阅 Stackoverflow 上的早期帖子：

> 我的猜测是，您的页面上有一些名称或 id 为“item”的东西，因此这已成为 window 的属性，因为 IE 会这样做（...）

[即，javascript和'item'作为变量名](https://stackoverflow.com/questions/6435677/ie-javascript-and-item-as-a-variable-name)

# actionscript-3 - 在不使用服务器套接字的情况下侦听 AS3 (AIR) 客户端中的传入连接

> ID：13949672
> 
> 赞同：6
> 
> 时间：2012-12-19T09:55:19.370
> 
> 标签：actionscript-3, sockets, air, serversocket

我设法创建了一个 C# 服务器，它使用`sockets`. 在 AS3 方面，我使用`flash.net.Socket`库通过`TCP`.

它是这样工作的：
-> 我打开我的服务器，它监听客户端（另外我可以创建一个连接设备列表）；
-> 我打开我的客户端，它会自动接收数据；

接收数据的触发事件是在客户端进行的，即我只是打开服务器，当客户端打开时，它会获取数据，触发这些事件：

```
socket.addEventListener(Event.CONNECT, onConnect); -> to connect to the server  
socket.addEventListener(Event.SOCKET_DATA, onDataArrival); -> to receive the data 
```

现在我想做一些不同的事情。我不想在客户端触发它，我希望服务器这样做，即，我想打开我的客户端并在服务器上输入客户端将获取数据的内容。

那么为什么我要让客户端成为客户端/服务器呢？好吧，因为我的服务器是一台机器，而我的客户端是连接服务器的XXX移动设备，这就是我实现这一点的方法。

因此，鉴于我刚才所说的，我设法使用该`flash.net.ServerSocket`库创建了我的 AS3 客户端/服务器应用程序，该应用程序的工作方式与我想要的一样。

首先我让客户端监听：

```
serverSocket.bind(portNumber, "10.1.1.212");
serverSocket.addEventListener(ServerSocketConnectEvent.CONNECT, onConnectServer);
serverSocket.listen(); 
```

然后我使用`flash.net.Socket` `Event.SOCKET_DATA`

差不多就是这样。就像我想要的那样工作。
但是，它`flash.net.ServerSocket`与移动设备不兼容，但...

所以这是我的问题：我需要将文件从 C# 服务器（需要监听客户端，以便我可以创建连接设备列表）发送到 AS3（AIR）客户端，但我必须定义哪个客户端正在获取数据服务器，并且客户端需要随时准备接收该数据，因此，监听，但是它们有很多，这就是为什么我将它们视为客户端。

我的问题是：有没有办法让客户端监听传入连接并在发生事件时触发事件，而不使用 AS3 中的服务器套接字？

此外，如果您有不同的方法来实现我的目标而不使用 C# 服务器 <-> AS3 客户端/服务器逻辑，请随时提出您的意见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:50:15.730

是的。`flash.net.Socket`您的客户端应通过( [doc](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html) ) 或`flash.net.XMLSocket`( [doc](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/XMLSocket.html) )连接到服务器。在大多数情况下，您只需要一台可以连接许多*客户端的**服务器。*不完全清楚为什么两端都有服务器？

 *编辑：

下面是一个客户端使用`Socket`. 这会连接到服务器，然后（无限期地）等待数据。当接收到一大块数据时（在这种情况下，我期望字符串以换行符终止），数据将与事件一起传递。

如果您尝试过这种方法但没有成功，您应该查看是否有任何错误或连接是否关闭。

**文档类：**

```
package  {
    import flash.display.Sprite;

    public class Main extends Sprite {
        protected var socket:SocketTest;

        public function Main() {
            this.socket = new SocketTest();
            this.socket.addEventListener(SocketMessageEvent.MESSAGE_RECEIVED, onSocketMessage);
            this.socket.connect("127.0.0.1", 7001);
        }

        protected function onSocketMessage(e:SocketMessageEvent):void {
            var date:Date = new Date();
            trace(date.hoursUTC + ":" + date.minutesUTC + ":" + date.secondsUTC + " Incoming message: " + e.message);
        }
    }
} 
```

**SocketTest 类：**

```
package  {
    import flash.net.Socket;
    import flash.events.Event;
    import flash.events.IOErrorEvent;
    import flash.events.SecurityErrorEvent;
    import flash.events.ProgressEvent;
    import flash.errors.IOError;

    public class SocketTest extends Socket {
        protected var _message:String;

        public function SocketTest() {
            super();
            this._message = "";

            this.addEventListener(Event.CONNECT, socketConnected);
            this.addEventListener(Event.CLOSE, socketClosed);
            this.addEventListener(ProgressEvent.SOCKET_DATA, socketData);
            this.addEventListener(IOErrorEvent.IO_ERROR, socketError);
            this.addEventListener(SecurityErrorEvent.SECURITY_ERROR, socketError);
        }

        protected function socketData(event:ProgressEvent):void {
            var str:String = readUTFBytes(bytesAvailable);

            //For this example, look for \n as a message terminator
            var messageParts:Array = str.split("\n");

            //There could be multiple messages or a partial message, 
            //pass on complete messages and buffer any partial
            for (var i = 0; i < messageParts.length; i++) {
                this._message += messageParts[i];
                if (i < messageParts.length - 1) {
                    this.notifyMessage(this._message);
                    this._message = "";
                }
            }
        }

        protected function notifyMessage(value:String):void {
            this.dispatchEvent(new SocketMessageEvent(SocketMessageEvent.MESSAGE_RECEIVED, value));
        }

        protected function socketConnected(event:Event):void {
            trace("Socket connected");
        }

        protected function socketClosed(event:Event):void {
            trace("Connection was closed");
            //TODO: Reconnect if needed
        }

        protected function socketError(event:Event):void {
            trace("An error occurred:", event);
        }
    }
} 
```

**SocketMessageEvent 类：**

```
package  {
    import flash.events.Event;

    public class SocketMessageEvent extends Event {
        public static const MESSAGE_RECEIVED:String = "messageReceived";

        protected var _message:String;

        public function SocketMessageEvent(type:String, message:String = "", bubbles:Boolean = false, cancelable:Boolean = false) {
            super(type, bubbles, cancelable);
            this._message = message;
        }

        public function get message():String {
            return this._message;
        }
    }
} 
```

作为测试，我将服务器设置为每 5 秒发送一条消息，这是控制台中的输出：

```
Socket connected
21:36:24 Incoming message: Message from server: 0
21:36:29 Incoming message: Message from server: 1
21:36:34 Incoming message: Message from server: 2
21:36:39 Incoming message: Message from server: 3
21:36:44 Incoming message: Message from server: 4
21:36:49 Incoming message: Message from server: 5 
```*

# ruby-on-rails - Rails 应用程序中数据对话的最佳实践

> ID：13949678
> 
> 赞同：5
> 
> 时间：2012-12-19T09:55:32.617
> 
> 标签：ruby-on-rails, ruby, data-conversion

我目前正在 Rails 中开发一个大型自定义内容管理解决方案，以处理许多不同的内容类型（模型）及其关系。

整个数据模型建立在活动记录之上，并具有内容导入和导出以及与其他服务同步等功能（例如移动同步将内容更改推送到智能手机）。

对于这些任务，我有许多数据对话，一方面是活动记录模型，另一方面是许多不同且已经存在的目标格式。

*   JSON REST 服务反映模型层的变化
*   RSS 提要发布新内容
*   导入/导出为专有 xml 格式
*   ETC

对于新的数据格式，我可以自己定义结构，在大多数情况下，这意味着，让 rails 使用整洁的编组功能来处理它

```
 format.html do
      render 'show'
    end
    format.xml do
      render xml: { content:@content }
    end
    format.json do
      render json: { content:@content }
    end 
```

但是在必须提供现有数据模式的情况下，必须进行几个对话：

**重命名键：**在模型中，每个对象都由一个 id 属性标识，但在目标格式中，对象属性是名称 uid 或 OBJECT-ID ...

**内联相关对象：**假设我有一个名为 Person 的模型，它与 Address 模型相关。当使用 Rails xml 序列化时，地址对象将被省略或内联在标签下。在给定的目标格式中，地址可能必须内联在 Person 对象中，这意味着将包含以下输出

```
<person>
   <name>Ben</name>
   <street>Some Street</street>
   <city>Berlin</city>
</person> 
```

**值转换：** 可能需要日期属性作为 unix 时间戳而不是 utc 字符串

**天真的解决方案：**

所有这些转换都可以在需要时手动完成，这意味着只需放置一些创建目标数据结构的 ruby​​ 代码：

```
data = {}
Person.all.each do |p|
    # rename property
    data[:guid] = p.id
    data[:name] = p.full_name
    # inline relation
    data[:street] = p.primary_address.street    
    data[:city] = p.primary_address.locality
    data[:member_since] = p.created_at.format(...)
end
render xml: { persons:data} 
```

或者对于 xml，只能使用转换构建器模板。

虽然此选项可行且灵活，但它将对话逻辑传播到整个应用程序并使控制器增长，并且在大型应用程序中这将不利于可维护性......

我正在寻找的是基于模式的模型转换。这意味着我在某处定义了从我的 activerecord 模型到目标模式的映射（使用 ruby​​ dsl，在 xml 中......），并且只要我需要某种数据格式，就必须执行模式对话：

```
data = Article.all
# the parameter is the name of the target schema
converter = ModelConversation.new(:legacy_contact_list)
render xml: { contacts: converter.execute(data) } 
```

所以我真正在寻找的是类似于 xslt 但也适用于 json 输出并由 ruby​​ 提供支持的东西。

您如何在 Rails 中进行数据对话的任何帮助/想法或故事将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:02:50.670

几年来我一直在编写 XSLT 转换，我只能建议不要使用 XSLT 或“类似的东西”。

既然你有一个 Ruby 应用程序，那就使用 Ruby！我认为它已经符合您的需求。

关于您的担忧：

> 虽然此选项可行且灵活，但它将对话逻辑传播到整个应用程序并使控制器增长，并且在大型应用程序中这将不利于可维护性......

这将在你的控制之下。只需将转换器视为应用程序的任何其他部分并保持高代码质量。如果您将转换逻辑放入模型本身或将其移动到库中，您的控制器将不会增长。重构您的转换器以使其简洁。

看看你的“天真”例子

```
 # rename property
    data[:guid] = p.id
    data[:name] = p.full_name
    # inline relation
    data[:street] = p.primary_address.street    
    data[:city] = p.primary_address.locality
    data[:member_since] = p.created_at.format(...) 
```

这段代码基本上说在你的目标格式中，`id`被调用`guid`，`full_name`被调用`name`等等。我怀疑你写的代码比你已经​​给出的代码要短得多。所以我认为这里不需要另一种技术。

# spring - 动态响应选择中的变化

> ID：13949683
> 
> 赞同：2
> 
> 时间：2012-12-19T09:55:45.487
> 
> 标签：spring, select, spring-mvc, dynamic, spring-roo

我正在构建一个基于 Spring MVC 的 webapp，我将在其中使用几个下拉菜单。

我想要完成的是，当用户选择一个可用选项时，该选项的描述将出现在选择标签旁边。

```
<select name="userType">
            <c:forEach items="${userTypes}" var="userType">
                <option>${userType.userType}</option>
            </c:forEach>
        </select><br/><br/> 
```

在此旁边，我想要一个显示类似内容的字段

```
${userType.description} 
```

对于下拉列表中的每个选项。

最好的方法是什么？

感谢任何花时间帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:15:00.167

你可以用javascript来实现它。我将在我的示例中使用[jQuery 。](http://jquery.com/)

```
<select name="userType">
    <c:forEach items="${userTypes}" var="userType">
        <option value="${userType.userType}">${userType.userType}</option>
    </c:forEach>
</select>

<%-- hidden descriptions waiting to be shown. --%>
<c:forEach items="${userTypes}" var="userType">
    <div style="display:none" id="${userType.userType}" class="description">${userType.description}</div>
</c:forEach>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    $('select[name=userType]').change(function() {
        var userType = $(this).val()
        $('.description').hide();
        $('#' + userType).show();
    });
</script> 
```

要记住的几件事：

*   最初没有显示说明。如果需要，应该很容易修复。
*   我假设在我的例子`userType`中是独一无二的。
*   如果`description`或`userType`包含 html，它们可能会破坏您的标记。考虑使用[`<c:out>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/out.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:14:41.950

这更像是一个javascript问题。好吧，您可以在服务器端做到这一点，但这将是矫枉过正。

我会使用 cleint 端 javascript 和 jquery，将 html/jsp 更改为

```
<select id="userType" name="userType">
  <c:forEach items="${userTypes}" var="userType">
    <option value=${userType.description}>${userType.userType}</option>
  </c:forEach>
</select><span id="myDivNextSelectTag></span><br/><br/> 
```

...和jQuery

```
$("#userType").change(function(){
  $("#myDivNextSelectTag").html( $(this).value );
}) 
```

可能有一些语法错误，但你应该明白 - 你可以使用`data html attribute`而不是`option value`。

# vba - 如何在 Visio 中使用 VBA 将形状添加到组

> ID：13949685
> 
> 赞同：5
> 
> 时间：2012-12-19T09:55:48.763
> 
> 标签：vba, visio, shapesheet

如何在不取消分组的情况下将形状添加到 visio 中的现有组中，**因为**我的组 shapesheet 中有许多自定义属性。我不希望使用它的子公式被破坏。

这是我的 VBA 代码的开头，但我找不到在组中添加形状的方法。

```
Sub moveToGroup(OrigineShape As Shape, DestinationGroup As Shape)

End Sub 
```

谢谢大家的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:42:01.930

其实很简单！

```
Sub moveToGroup(OrigineShape As Shape, DestinationGroup As Shape)
    OrigineShape.Parent = DestinationGroup
End Sub 
```

请记住不要`Set`用于此分配，因为这样做会产生错误。

# c# - 是否可以创建 sdf 文件并将其复制到隔离存储

> ID：13949688
> 
> 赞同：2
> 
> 时间：2012-12-19T09:55:57.593
> 
> 标签：c#, sql, windows-phone-7, windows-phone-7.1, isolatedstorage

我想使用 SDFViewer 创建一个 sdf 文件，然后将其复制到独立存储，因为我不想在代码中手动添加数据。那可能吗？如果是，我该怎么做？我需要在项目中添加为项目吗？

那我应该如何修改呢？

`const string ConnectionString = "Data Source=isostore:/Questions.sdf";`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:14:06.260

Take a look at [How to deploy a Reference Database with a Windows Phone Application](http://msdn.microsoft.com/en-us/library/hh286411%28v=vs.92%29)

Hope that helps

# facebook-insights - 保留洞察力不起作用

> ID：13949690
> 
> 赞同：1
> 
> 时间：2012-12-19T09:56:16.650
> 
> 标签：facebook-insights

我的 Users Gone Stale 、 Users Revived 和 Users Retained 见解会在同一天全部停止，是否有任何理由？他们现在已经11天没有报告了，我不明白为什么？

# jquery - 动画期间触发 jQuery UI 滑块事件

> ID：13949695
> 
> 赞同：2
> 
> 时间：2012-12-19T09:56:27.243
> 
> 标签：jquery, jquery-ui, slider

我在网页上使用 jquery.ui 滑块来导航 jquery.flot 图表，该图表有太多数据需要一次显示。

我希望图表随着滑块的每一步而更新，如果用户抓住手柄并自己滑动它，这会很好。但是，当他们单击滑块上的某个位置时，手柄会动画，但图形会立即更新到他们单击的点。我希望图表随着动画的进行逐渐更新。

这可能吗？

我正在使用幻灯片和更改事件来处理图形更新：

```
$('#slider').slider({
    change: function(event, ui) {shiftGraph(ui.value)},
    slide: function(event, ui) {shiftGraph(ui.value)},
    max: pastResults['json'].length-10,
    min: 0,
    animate: 'slow',
}); 
```

# magento - Magento - 分页生成错误的 URL

> ID：13949696
> 
> 赞同：3
> 
> 时间：2012-12-19T09:56:28.533
> 
> 标签：magento, url, pagination

我的分页工作正常，除了网址。第 2 页的链接是：example.com/products#%21p=2 什么时候应该是：example.com/products?p=2

当我在地址栏中键入后者时，它工作正常。这是生成链接的代码：

```
<li><a href="<?php echo $this->getPageUrl($_page) ?>"><?php echo $_page ?></a></li> 
```

看起来像标准的 Magento 代码，所以我不确定它为什么不能正常工作。先感谢您。山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T23:10:59.367

如果你的情况和我的一样，我的 Magento TemplateMonster 主题使用了 Vinagento 的 Vpager 扩展，我已经设法解决了这个问题：

编辑文件：/www/app/code/local/Vinagento/Vpager/Block/Page/Html

替换第 4 行：

```
return str_replace('?', '#%21', parent::getPageUrl($page)); 
```

和：

```
return str_replace('?', '?', parent::getPageUrl($page)); 
```

漂亮的小动画 gif 将不再显示，但用户将能够更改页面！

祝你好运，爱德华多

# javascript - 表单中的条纹按钮而不发布

> ID：13949699
> 
> 赞同：0
> 
> 时间：2012-12-19T09:56:39.743
> 
> 标签：javascript, html, stripe-payments

我正在设置支付字段，并希望使用条纹按钮来避免处理 PCI。

表单的字段如下所示：
电子邮件
运输：
计费：
特别说明：
提交按钮

计费可以选择使用已保存的信用卡或通过条纹按钮输入新卡。理想情况下，按钮只需设置 stripeToken 隐藏字段并完成，但由于条纹按钮位于表单内，它也会导致整个表单发布，即使我不希望它这样做。

有什么办法可以阻止这个发布吗？我假设我将不得不做一些 hack-y javascript 来拦截提交到实际表单。

条纹按钮代码：[https ://stripe.com/docs/button](https://stripe.com/docs/button)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:23:29.983

弄清楚了：

[在https://button.stripe.com/v1/button.js](https://button.stripe.com/v1/button.js)查看 Stripe javascript

我看到一个电话

this.options.form.submit(); 我添加了一个带有 ID 提交的隐藏字段，这导致 Stripe 调用了错误的提交。不完全是我正在寻找的漂亮修复，因为它在控制台中引发了一个 javascript 错误。

# xml - 无法使用 pugixml 在循环中访问 XML 节点

> ID：13949700
> 
> 赞同：0
> 
> 时间：2012-12-19T09:56:41.480
> 
> 标签：xml, loops, pugixml

我有一个格式如下的 XML 文件

```
<Objects>
    <Object>
        <Id>1</Id>
        <Name>Head</Name>
    </object>
    <Object>
        <Id>2</Id>
        <Name>Right Hand</Name>
    </object>
    <Object>
        <Id>3</Id>
        <Name>Left Hand</Name>
    </object>
    <Object>
        <Id>4</Id>
        <Name>Right hand</Name>
    </object>
    <Object>
        <Id>5</Id>
        <Name>Cup</Name>
    </object>
    <Object>
        <Id>6</Id>
        <Name>Book</Name>
    </object>
</Objects> 
```

我想使用循环通过以下方式逐个对象访问我的文件对象：

```
xml_node nodeObjects = doc.child("Objects").child("Object");

    for(xml_node_iterator it = nodeObjects.begin(); it != nodeObjects.end(); ++it)
    {
        cout<<"Name = "<<it->child_value("Name")<<endl;
    } 
```

并且：

```
xml_node nodeObjects = doc.child("Objects");
for(xml_node nodeObject = nodeObjects.first_child(); nodeObject; nodeObject = nodeObject.next_sibling())
    {
        numOfObjects += 1;
        const char *id = nodeObject.child_value("Id");
        const char *name = nodeObject.child_value("Name");

        //cout<<"ID = "<<id<<" Name = "<<name<<endl;
        //cout<<nodeObjects.next_sibling("Object").child_value("Id")<<endl;;

    } 
```

最后：

```
xml_node nodeObjects = doc.child("Objects");
for(xml_node nodeObjects: nodeObjects.children("Object"))
    {
    } 
```

虽然前两种方法没有打印出预期的结果（只有第一次迭代有效），但编译器说第三种方法是语法错误！

任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:39:57.380

1.  您的 XML 文件格式错误 - 结束标记名称应与开始标记匹配，比较区分大小写。请记住始终通过检查 xml_document::load_file 返回值来检查文档是否加载成功。就像现在一样，解析可能会失败，并且您会得到一个空文档（或者更确切地说是文档的一部分，直到第一个错误，即只是第一个对象）。

2.  第一个循环遍历 nodeObjects 的孩子；为了让它工作，nodeObjects 应该引用 Objects 标签，而不是它的第一个 Object 子标签。

3.  第二个和第三个循环看起来不错 - 第三个循环使用 C++11 功能，因此不适用于尚不支持它的编译器。

# jakarta-ee - 如何在 JBoss 中获取当前的“节点”名称和“集群”名称？

> ID：13949703
> 
> 赞同：3
> 
> 时间：2012-12-19T09:56:53.457
> 
> 标签：jakarta-ee, jboss7.x

在 JBoss 7 中处理 servlet 请求时，我需要获取当前`node`名称和`cluster`名称，如何获取？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T15:22:30.427

您可能正在寻找系统属性

```
jboss.node.name 
```

该属性保存集群内节点的名称。

您也可以通过读取属性来获取服务器的名称

```
jboss.server.name 
```

对于集群名称，我不知道您的意思，在 AS7 之前是分区名称，现在已经不存在了，因此您可能正在寻找“缓存名称”。

# qemu - QEMU 是否支持 pf 的 OpenBSD ALTQ 功能？

> ID：13949704
> 
> 赞同：1
> 
> 时间：2012-12-19T09:56:55.180
> 
> 标签：qemu, openbsd, qos

有没有人有在里面跑步`OpenBSD`的经验`QEMU`？我有兴趣构建一个“虚拟交换机”（网桥）并使用 pf 的服务质量功能，特别是 ALTQ？ALTQ 主页说它必须由网卡支持。需要什么样的支持？它是否适用于 QEMU 虚拟网卡，例如，如果我想建立一个虚拟网络？我对你的经历很感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:13:08.227

我觉得你很好。事实是我没有在我的任何虚拟机上显式运行 altq，但我想不出它不起作用的原因。

最后请记住，在 5.1 之后的版本中，altq 正在完全重新设计。查看[henning@ 的演示文稿](http://quigon.bsws.de/papers/2012/bsdcan/index.html)

# vsto - VSTO：MS 项目 - 将项目添加为子项目会导致子项目中的所有任务获取新的 GUID

> ID：13949705
> 
> 赞同：1
> 
> 时间：2012-12-19T09:57:00.790
> 
> 标签：vsto, ms-project

当我将现有项目作为子项目添加到另一个项目时，子项目中的所有 GUID 都会重新计算！

单独打开原始子项目文件（例如 F1）继续显示旧 GUID，但新项目（将文件 F1 作为子项目）显示子项目的新 GUID。

有没有办法防止重新计算这些 GUID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:58:22.703

有多种方法可以将子项目添加到现有项目：链接和插入

*   链接保留原始指南，您甚至可以将项目作为只读链接到您的主文件中。在子项目中所做的任何更改都会影响原始项目。当然，如果链接不是只读的。
*   插入只是将数据从原始项目复制到目标项目。结果，所有的指导都是新的，因为所有的任务都是新的。但在复制项目中的任何更改都不会影响原始项目的情况下。

# excel - 在 XDocument 中使用 ':' 字符生成 Excel - C#

> ID：13949707
> 
> 赞同：6
> 
> 时间：2012-12-19T09:57:00.493
> 
> 标签：excel, linq-to-xml

我对编程世界很陌生，所以这个问题可能很愚蠢，但我被困住了，希望能得到一些帮助。

我在项目中使用 XDocument 更改和添加信息到 Excel 工作表（这是一个 XML 文档），以从 Autodesk Revit 中获取 Excel 报告。工作表文档由工作表信息组成，包括此配置中的行和单元格：

```
<row r="11" spans="1:11" x14ac:dyDescent="0.2">
    <c r="A11" s="198" t="inlineStr">
        <is>
            <t>example</t>
        </is>
    </c>
    <c r="B11" s="199" t="inlineStr">
        <is>
            <t>string</t>
        </is>
    </c>
    <c r="C11" s="200"/>
    <c r="D11" s="201"/>
    <c r="E11" s="201"/>
    <c r="F11" s="202"/>
    <c r="G11" s="203"/>
    <c r="H11" s="204"/>
    <c r="I11" s="205"/>
    <c r="J11" s="205"/>
    <c r="K11" s="206"/>
</row> 
```

代码的相关部分在行元素中。spans-attribute 的值为“1:11”，这就是我的问题所在。它不会让我输入一个 ':' 字符作为属性的值。我在网上搜索过，发现它与这个链接的命名空间声明有关： [“'：'字符，十六进制值0x3A，不能包含在名称中”](https://stackoverflow.com/questions/7213251/the-character-hexadecimal-value-0x3a-cannot-be-included-in-a-name)

但是，将这个 ':' 字符放入属性值对于 Excel 文档的工作是必不可少的。我按如下方式创建行元素：

```
XElement row = new XElement("row",
                    new XAttribute("r", i.ToString()),
                    new XAttribute("spans", "1:" + collumnCount.ToString()),
                    new XAttribute("x14ac:dyDescent", "0.2")); 
```

我不明白为什么它不允许我在 XAttribute 的值中添加一个 ':'，因为这只是一个字符串。有什么办法可以使这项工作？

我尝试使用 XMLDocument 将字符串“1:11”添加到 XMLAttribute。这确实有效，但我不敢相信 XDocument 不可能。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-14T01:56:16.730

您应该包括`:`在您的元素名称中。现在是允许的。如果您看到有人这样做，那`:`不是元素名称的一部分，它是命名空间和元素名称之间的分隔符。所以为了得到下面的XML文件：

```
<rss xmlns:media="http://m.xyz.com/rss/" version="2.0">
    <channel vendor="ABC" lastpublishdate="05/12/2013 01:02"/>
    <title>Videos</title>
    <media:thumbnail width="180" height="75" />
</rss> 
```

你必须写这样的东西：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Xml.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string x = "55";

            XNamespace aw = "http://m.xyz.com/rss/";
            XDocument document = new XDocument(
                new XDeclaration("1.0", "utf-8", "yes"), 
                new XElement(
                    "rss", 
                    new XAttribute(XNamespace.Xmlns + "media", "http://m.xyz.com/rss/"), 
                    new XAttribute("version", "2.0"),

                    new XElement("channel",
                        new XAttribute("vendor", "ABC"),
                        new XAttribute("lastpublishdate", DateTime.Now.ToString("dd/MM/yyyy hh:mm"))),

                        new XElement("title", "Videos"),
                        new XElement(
                            aw + "thumbnail", 
                            new XAttribute("width", x.Trim()), 
                            new XAttribute("height", x.Trim())
                        )
                )
            );
        }
    }
} 
```

# c# - ReactiveUI 异常处理

> ID：13949710
> 
> 赞同：15
> 
> 时间：2012-12-19T09:57:16.597
> 
> 标签：c#, reactiveui

我查看了许多 ReactiveUI 示例，但我看不到一个很好的简单示例来说明如何处理异常，即应向用户显示消息。（如果有一个很好的例子，有人可以指出我吗？）。

我的第一个问题是如何使用 ReactiveCommand 和 ToProperty 处理异常。例如，我有以下代码：

```
public class MainWindowViewModel : ReactiveObject
{
    public ReactiveCommand CalculateTheAnswer { get; set; }

    public MainWindowViewModel()
    {
        CalculateTheAnswer = new ReactiveCommand();

        CalculateTheAnswer
            .SelectMany(_ => AnswerCalculator())
            .ToProperty(this, x => x.TheAnswer);

        CalculateTheAnswer.ThrownExceptions
            .Select(exception => MessageBox.Show(exception.Message));
    }

    private readonly ObservableAsPropertyHelper<int> _theAnswer;
    public int TheAnswer
    {
        get { return _theAnswer.Value; }
    }

    private static IObservable<int> AnswerCalculator()
    {
        var task = Task.Factory.StartNew(() =>
        {
            throw new ApplicationException("Unable to calculate answer, because I don't know what the question is");
            return 42;
        });

        return task.ToObservable();
    }
} 
```

我想我一定是误解了 ThrownExceptions，因为当我运行上面的代码时，这个 observable 没有收到任何项目。我究竟做错了什么？

我的第二个问题是如何以对 MVVM 友好的方式执行此操作。[此博客条目](http://blog.paulbetts.org/index.php/2012/04/23/announcing-reactiveui-3-1/)提到了**用户错误**功能，但我找不到任何有关如何使用它的文档。我将如何在上面的示例中实现它？

**编辑**：我已经根据 Paul 在下面的回答[在 github上发布了一个示例解决方案。](https://github.com/wmaurer/ReactiveUI-Examples/tree/master/ReactiveUI-UserError)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-20T06:52:42.733

你理解`ThrownExceptions`，但它在错误的人身上，`_theAnswer.ThrownExceptions`会收到异常。但棘手的部分是，现在按钮不再起作用了——一旦 Observable 结束 OnError，它就永远完成了。

你最终不得不在这里做一些后空翻，比如：

```
static IObservable<int?> AnswerCalculator()

CalculateTheAnswer
    .SelectMany(_ => AnswerCalculator())
    .Catch(Observable.Return(null))
    .Where(x => x != null)
    .Select(x => x.Value)
    .ToProperty(this, x => x.TheAnswer); 
```

在这种情况下，`ReactiveAsyncCommand`要容易得多，因为`IObservable`每次调用都会创建一个新的，所以你会这样做：

```
// ReactiveAsyncCommand handles exceptions thrown for you
CalculateTheAnswer.RegisterAsyncTask(_ => AnswerCalculator())
    .ToProperty(this, x => x.TheAnswer);

CalculateTheAnswer.ThrownExceptions.Subscribe(ex => MessageBox.Show("Aieeeee")); 
```

## 如何使用用户错误

所以，`UserError`就像一个旨在向用户抛出的异常（即它包含友好文本，而不是程序员文本）

要使用`UserError`，您必须做两件事 - 首先，更改您的 ThrownExceptions：

```
CalculateTheAnswer.ThrownExceptions
    .SelectMany(ex => UserError.Throw("Something bad happened", ex))
    .Subscribe(result => /* Decide what to do here, either nothing or retry */); 
```

在您的 View 代码隐藏中，调用“RegisterHandler”：

```
UserError.RegisterHandler(err => {
    MessageBox.Show(err.ErrorMessage);

    // This is what the ViewModel should do in response to the user's decision
    return Observable.Return(RecoveryOptionResult.CancelOperation);
}); 
```

很酷的部分是，这使得错误对话框可测试 - 在单元测试中：

```
var fixture = new MainWindowViewModel();
bool errorCalled;

using (UserError.OverrideHandlersForTesting(_ => { errorCalled = true; return RecoveryOptionResult.CancelOperation })) { 
    CalculateTheAnswer.Execute(null);
}

Assert.True(errorCalled); 
```

# python - Python Boto 下载问题

> ID：13949713
> 
> 赞同：1
> 
> 时间：2012-12-19T09:57:23.657
> 
> 标签：python, amazon-web-services, amazon-s3, boto

如果有人与 boto 合作过，我想知道您是否可以提供帮助。我目前有这个代码：

```
from boto.s3.connection import S3Connection
from boto.s3.key import Key

conn = S3Connection(XXX, YYY)
bucket = conn.get_bucket('bucketname')
latest = max(bucket, key=lambda k: k.name)
latest.get_contents_to_filename() 
```

我对两件事感到困惑，非常感谢一些帮助：

1.  在我的存储桶中，我创建了目录。我怎样才能使这个脚本只查看存储桶中的单个目录，即“照片”而不是我的整个 S3 存储桶？
2.  如何指定下载位置。该脚本旨在从 S3 存储桶中获取最新的日期时间名称文件并下载它，但我想知道是否可以指定它的下载位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:39:49.873

这对我来说也很难，但你需要明白这不是一个带目录的文件系统。

要解决您的问题：

您可以使用前缀参数（来自 GitHub 上的 boto）：

:param prefix: 允许您将列表限制为特定前缀。例如，如果您使用 prefix='/foo/' 调用该方法，则迭代器将仅循环遍历以字符串 '/foo/' 开头的键。

[https://github.com/boto/boto/blob/develop/boto/s3/bucket.py](https://github.com/boto/boto/blob/develop/boto/s3/bucket.py)

看第 219 行

我用来阅读的代码是这样的：

```
def read_file(self, key_name):
    k = Key(self.__bucket)
    k.key = key_name
    if k.exists():
        rawData = k.read()
    else :
        rawData = None
    return rawData 
```

# xcode4 - 链接到 xcode 4 中的 dylib

> ID：13949714
> 
> 赞同：3
> 
> 时间：2012-12-19T09:57:24.787
> 
> 标签：xcode4, linker, dylib, xar

我试图`libxar`在我的`xcode4`项目中使用并得到著名的“未定义的架构符号”错误，无论我选择什么拱门来构建，例如：

```
Undefined symbols for architecture x86_64:
"xar_open(char const*, int)", referenced from: 
_main in main.o 
```

我做了我一直做的事情来包含 dylib：

*   将“库搜索路径”设置为放置 libxar.dylib 的路径
*   将“标题路径”设置为放置 xar.h 的路径（其中包含 xar_open）
*   添加了 libxar.dylib 以构建阶段 - 将二进制文件与库链接

我错过了什么？

# django - django celerybeat schedule month_of_year IndexError 索引超出范围

> ID：13949716
> 
> 赞同：2
> 
> 时间：2012-12-19T09:57:28.057
> 
> 标签：django, django-celery

我似乎无法为 django celerybeat 时间表设置 month_of_year。它不断抛出索引超出范围错误。

这是我的日程安排：

```
# Annual task to permanently delete all transactions that are older 
# than 2 years old.
'annual-transaction-deletion': {
    'task': 'project.tasks.annual_transactions_deletion',
    'schedule': crontab(hour='2', minute=0, day_of_month=1, month_of_year=1)
} 
```

我尝试将上面的 month_of_year 也设置为 month_of_year=[1] 和 month_of_year='1'

以下堆栈跟踪打印在 celerybeat 日志中：

```
[2012-12-19 09:50:06,403: CRITICAL/MainProcess] celerybeat raised exception <type 'exceptions.IndexError'>: IndexError('list index out of range',)
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/celery/apps/beat.py", line 100, in start_scheduler
beat.start()
  File "/usr/local/lib/python2.7/dist-packages/celery/beat.py", line 422, in start
interval = self.scheduler.tick()
  File "/usr/local/lib/python2.7/dist-packages/celery/beat.py", line 194, in tick
next_time_to_run = self.maybe_due(entry, self.publisher)
  File "/usr/local/lib/python2.7/dist-packages/celery/beat.py", line 172, in maybe_due
is_due, next_time_to_run = entry.is_due()
  File "/usr/local/lib/python2.7/dist-packages/djcelery/schedulers.py", line 65, in is_due
return self.schedule.is_due(self.last_run_at)
  File "/usr/local/lib/python2.7/dist-packages/celery/schedules.py", line 502, in is_due
rem_delta = self.remaining_estimate(last_run_at)
  File "/usr/local/lib/python2.7/dist-packages/celery/schedules.py", line 489, in remaining_estimate
next_hour, next_minute)
  File "/usr/local/lib/python2.7/dist-packages/celery/schedules.py", line 389, in _delta_to_next
roll_over()
  File "/usr/local/lib/python2.7/dist-packages/celery/schedules.py", line 372, in roll_over
months_of_year[datedata.moy],
IndexError: list index out of range 
```

我有许多其他的时间表来设置这项工作，但不包括month_of_year。上述时间表只需要每年运行一次。我不禁觉得这是芹菜库中的一个错误，但我渴望有人证明我错了。显然，如果这是一个错误，我不想诉诸修改库文件来修复它。任何帮助深表感谢。

# c# - 来自 Gridview DataKey 的空引用异常

> ID：13949718
> 
> 赞同：2
> 
> 时间：2012-12-19T09:57:35.647
> 
> 标签：c#, asp.net, gridview, oledb

在这个站点上，我试图通过在 gridview 行上的选择在数据库中插入一行。除了从 gridview 收集主键外，我一切都运行良好。我已经尝试了所有我能找到的都无济于事。到目前为止，我对这种语言还不是很好，但我的代码如下：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    string connectionString = ConfigurationManager.ConnectionStrings["sdsMicrosoftDB"].ConnectionString;
    OleDbConnection currentConnection = new OleDbConnection(connectionString);

    string eventID = GridView1.SelectedValue.ToString();

    try
    {
        string eid = Session["eid"].ToString();

        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandText = "INSERT INTO tblVolunteerRoster (eventID,empID) VALUES (@eventID,@empID)";
        cmd.CommandType = CommandType.Text;
        cmd.Connection = currentConnection;

        cmd.Parameters.AddWithValue("@eventID", eventID);
        cmd.Parameters.AddWithValue("@empID", eid);
        currentConnection.Open();

        cmd.ExecuteNonQuery();
    } 
```

特定于该 gridview 的代码是：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                DataSourceID="AccessDataSource1" CellPadding="4" ForeColor="#333333" 
                GridLines="None" HorizontalAlign="Center"
                onrowcommand="GridView1_RowCommand" DataKeyNames="eventID" >
                <AlternatingRowStyle BackColor="White" />

                <Columns>
                    <asp:CommandField ShowSelectButton="True" />
                    <asp:BoundField ApplyFormatInEditMode="True" DataField="eventID" 
                        HeaderText="Event ID" SortExpression="eventID" />
                    <asp:BoundField DataField="eventStartDate" HeaderText="Start Date" 
                        SortExpression="eventStartDate" DataFormatString="{0:MMM dd yyyy}" 
                        ApplyFormatInEditMode="True" />
                    <asp:BoundField DataField="eventDescription" HeaderText="Description" 
                        SortExpression="eventDescription" />
                    <asp:BoundField DataField="eventEstHours" HeaderText="Est. Hours" 
                        SortExpression="eventEstHours" />
                    <asp:BoundField DataField="eventLocation" HeaderText="Location" 
                        SortExpression="eventLocation" />
                    <asp:BoundField DataField="eventWorkersNeeded" HeaderText="Workers Needed" 
                        SortExpression="eventWorkersNeeded" />
              </Columns>

            </asp:GridView> 
```

有任何想法吗？我已经把头撞在墙上试图自己弄清楚。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:00:54.133

如果要获取数据键名

```
int index = Convert.ToInt32(e.CommandArgument);
string eventID = GridView1.DataKeys[index].Value.ToString() 
```

# android - android网络调用错误响应

> ID：13949724
> 
> 赞同：4
> 
> 时间：2012-12-19T09:57:59.917
> 
> 标签：android, caching, response, http-get

我正在做一个简单的 HttpGet 并且响应是错误的。我也在浏览器中这样做了，那里的响应还可以。我检查了网址是一样的。

比我想象的可能是一些缓存，所以我设置了标题：

```
httpGet.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); 
```

首先它起作用了，但现在它又给了我同样的结果。它在iOS上发生了同样的事情，但在重新安装后它起作用了。

Android 是否在另一个级别缓存请求？

如何禁用缓存？

# javascript - 仅获取未隐藏的元素.. Jquery

> ID：13949726
> 
> 赞同：18
> 
> 时间：2012-12-19T09:58:08.613
> 
> 标签：javascript, jquery

我只需要在 jquery foreach 循环中获取 show() 元素

在下面的代码中，我得到了所有带有类测试的元素（即）隐藏和显示......但只需要显示而不是隐藏一个......如何过滤并在这一行本身中获取它？？？？？？

```
$('.element').find('.test').each(function(index, loopelement) {

 } 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-19T09:59:58.367

使用[`:visible`](http://api.jquery.com/visible-selector/)选择器：

```
$('.element').find('.test:visible').each(function(index, loopelement) {
    // do stuff...
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T09:59:58.677

您可以使用[jQuery 的 :visible](http://api.jquery.com/visible-selector/)选择器。

```
var $visibles = $(".element").find(".test:visible"); 
```

但请注意 jQuery 是如何工作的。来自 jQuery 文档：

> 如果元素占用了文档中的空间，则元素被认为是可见的。可见元素的宽度或高度大于零。
> 
> 具有 visibility: hidden 或 opacity: 0 的元素被认为是可见的，因为它们仍然占用布局中的空间。

如果此行为不适合您的用例，您可以扩展 jQuery，创建自己的自定义选择器：

```
$.expr[":"].reallyVisible =
    function reallyVisible (elem) {
        if (elem == null || elem.tagName == null) {
            return false;
        }

        if (elem.tagName.toLowerCase() === "script" || elem.tagName.toLowerCase() === "input" && elem.type === "hidden") {
            return false;
        }

        do {
            if (!isVisible(elem)) {
                return false;
            }

            elem = elem.parentNode;
        } while (elem != null && elem.tagName.toLowerCase() !== "html");

        return true;
    };

function isVisible (elem) {
    var style = elem.style;

    // Depending on your use case
    // you could check the height/width, or if it's in the viewport...
    return !(style.display === "none" || style.opacity === "0" || style.visibility === "hidden");
} 
```

它可以用作任何其他内置选择器：

```
$(".element").find(".test:reallyVisible");
$(".element").find(".test:first").is(":reallyVisible"); 
```

# c++ - 两个派生类的 C++ 副本

> ID：13949728
> 
> 赞同：8
> 
> 时间：2012-12-19T09:58:19.280
> 
> 标签：c++, inheritance, copy-constructor, derived-class

我有一个基类和两个派生类，我需要将指向派生类对象的指针复制到另一个类中的一个，例如示例。

```
class Base
{
public:
    Base(const Base& other);
}

class Derived1 :public Base
{
public:
    Derived1(const Derived& other): Base(other){...};
}

class Derived2: public Base
{
public:
    Derived2(const Derived& other): Base(other){...};
}

main()
{
    Derived 1 d1;
    Derived2 d2(d1)
} 
```

我尝试从 Derived 1 ti base （允许向上转换）传递，然后将 *dynamic_cast* Base 传递给 Derived2 并调用复制构造函数，但它不起作用。我只需要在两个派生对象之间复制两个对象的 Base 部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:01:28.847

如果您的意图只是复制基类部分，请创建一个接收基类的构造函数。

```
Derived2(const Base& other): Base(other){...};

Derived1(const Base& other): Base(other){...}; 
```

# javascript - 修复了使用 phonegap 的黑莓应用程序的页眉和页脚问题？

> ID：13949729
> 
> 赞同：1
> 
> 时间：2012-12-19T09:58:19.693
> 
> 标签：javascript, cordova, blackberry, phonegap-plugins

我正在使用 Phonegap 框架编写黑莓应用程序。

我对页眉和页脚有疑问。

我似乎无法为页眉和页脚设置固定位置。我试过 iScroll，但它在黑莓设备上不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:34:01.580

在非触摸屏黑莓上：对页眉和页脚使用“位置：绝对”，对内容使用“位置：静态”。有一种方法可以在窗口调整大小事件上刷新和定位页面上的元素，并且每当您需要更新页面时，因为内容发生变化。在您的内容元素上使用“padding-top：”和“padding-bottom：”，以便在滚动到顶部或一直到底部时为页眉和页脚腾出空间。祝你好运！

# python - python从原始数据创建jpg文件

> ID：13949730
> 
> 赞同：4
> 
> 时间：2012-12-19T09:58:22.200
> 
> 标签：python, image-processing, jpeg, python-imaging-library

我有这个奇怪的 xml 文件，它显然包含 jpeg 图像数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<AttachmentDocument xmlns="http://echa.europa.eu/schemas/iuclid5/20070330" documentReferencePK="ECB5-d18039fe-6fb0-44d6-be9e-d6ade38be543/0" encoding="0" fileSize="5788" fileTimestamp="2007-04-17T12:38:44Z" parentDocumentPK="ECB5-fb07efbf-ee93-4cdd-865b-49efa51cbd15/0" version="2007-03-19T14:13:29Z">
    <modificationHistory>
        <modification date="2007-05-10T09:00:00Z">
            <comment>Created</comment>
            <modificationBy>European Commision/Joint Research Centre/European Chemicals Bureau</modificationBy>
        </modification>
    </modificationHistory>
    <ownershipProtection copyProtection="false" fractionalDocument="false" sealed="false"/>
    <fileName>33952-38-4-V2.jpeg</fileName>
    <fileMimetype>image/jpeg</fileMimetype>
    <rawContent>
        H4sIAAAAAAAAAO2XZ1AU65qAe5iBIQwgOCMZRkHJCIgEySBhyEEyIyDgMBKHLEFQBJEoIHBEQFQE
        JUjOSo4iOQ+Ss2QkSZhZvLXn7j11726d3draH1vn7Xp+dH1fd/XzvV+//TZxlDgNnNNQRakCIBAA
        gM4OgEgA5JQNVBRv6RrcQGLsBO+52WOQ3iJCwkgeLw+sCwaJ0lBDauipqCG9xUV5BZB29ndtvJw8
        kTgvGyes531K4jigDJCTkUHJSMmhUCgFBTklDE4No6KCMdGfp4WzMXOwszGzsiK5hLiRlwQ4WVl5
                ...
    </rawContent>
    <MD5>0d80850b0c4085500f80e1430b90c70910d4110cc0d7</MD5>
</AttachmentDocument> 
```

（完整版[在这里](http://pastebin.com/X204p1rw)）而且我无法从中读取图像。

我的尝试：

```
from PIL import Image
import StringIO
import base64

# I've eleminated all newlines and tabs to produce data string
data="H4sIAAAAAAAAAO2XZ1AU65qAe5..."
im = Image.open(StringIO.StringIO(base64.b64decode(data))) 
```

但我收到一个错误：

```
File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/PIL/Image.py", line 1980, in open
    raise IOError("cannot identify image file") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:12:38.973

如果您检查 base64 解码输出中的内容，您会注意到它是一个 gzip 文件。提取压缩文件，您将获得所需的 JPEG。

图像中存储的评论：

```
CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), default quality 
```

# string - Windows 上的 Node.js 文件上传

> ID：13949732
> 
> 赞同：1
> 
> 时间：2012-12-19T09:58:32.423
> 
> 标签：string, node.js, file-upload, encoding

我遇到了使用 node.js 和强大的文件上传的问题。

文件正在正确上传，但是当它的名称改回原来的名称时，使用以下命令：

```
fs.renameSync("./" + files['upload-file'].path, "./u/" + files['upload-file'].name); 
```

出现的问题如下：如果文件名包含一些字符，如 ä ö ü，它们不会以这种方式写入文件系统。我想问题是新文件名的编码，但我不知道如何更改它。

按照建议，这里有一些附加信息： 文件名是这个：07 Zerstören.mp3 文件系统上的文件名是这个：07 Zerst�ren.mp3

# android - 我无法弄清楚的空指针异常错误

> ID：13949741
> 
> 赞同：0
> 
> 时间：2012-12-19T09:59:05.727
> 
> 标签：android, nullpointerexception

我是编程新手，我花了两天时间试图找出我的程序出了什么问题。我学到了很多试图解决这个问题，但我没有得到任何地方。

我不知道如何在 eclipse 中的 logcat 中复制错误，所以我将输入错误：

```
 Caused by: java.lang.NullPointerException at com.deweyx.MainActivity.OnCreate(MainActivity.java:27) 
```

这是我的代码：

```
public class MainActivity extends Activity {

    int counter;
    Button add, sub;
    TextView display;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        counter = 0;
        add = (Button) findViewById(R.id.bAdd);
        sub = (Button) findViewById(R.id.bSub);
        display = (TextView) findViewById(R.id.xDisplay);

        add.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter++;
                display.setText("Your total is " + counter);            
            }
        });

        sub.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                counter--;
                display.setText("Your total is " + counter);
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是 xml 文件夹：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/display" 
    android:layout_gravity="center"
    android:textSize="40sp"
    android:id="@+id/xDisplay"
/>

<Button
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:text="@string/padd"
    android:layout_gravity="center"
    android:textSize="20sp"
    android:id="@+id/bAdd"
 />

<Button
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:text="@string/psub"
    android:layout_gravity="center"
    android:textSize="20sp" 
    android:id="@+id/bSub"
/>

</LinearLayout> 
```

日志猫：

```
 12-19 02:11:36.423: D/AndroidRuntime(531): Shutting down VM
12-19 02:11:36.423: W/dalvikvm(531): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
12-19 02:11:36.444: E/AndroidRuntime(531): FATAL EXCEPTION: main
12-19 02:11:36.444: E/AndroidRuntime(531): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.deweyx/com.deweyx.MainActivity}: java.lang.NullPointerException
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.os.Looper.loop(Looper.java:137)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.app.ActivityThread.main(ActivityThread.java:4424)
12-19 02:11:36.444: E/AndroidRuntime(531):  at java.lang.reflect.Method.invokeNative(Native Method)
12-19 02:11:36.444: E/AndroidRuntime(531):  at java.lang.reflect.Method.invoke(Method.java:511)
12-19 02:11:36.444: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-19 02:11:36.444: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-19 02:11:36.444: E/AndroidRuntime(531):  at dalvik.system.NativeStart.main(Native Method)
12-19 02:11:36.444: E/AndroidRuntime(531): Caused by: java.lang.NullPointerException
12-19 02:11:36.444: E/AndroidRuntime(531):  at com.deweyx.MainActivity.onCreate(MainActivity.java:27)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.app.Activity.performCreate(Activity.java:4465)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-19 02:11:36.444: E/AndroidRuntime(531):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-19 02:11:36.444: E/AndroidRuntime(531):  ... 11 more
12-19 02:11:36.653: I/dalvikvm(531): threadid=3: reacting to signal 3
12-19 02:11:36.673: I/dalvikvm(531): Wrote stack traces to '/data/anr/traces.txt'
12-19 02:11:36.983: I/dalvikvm(531): threadid=3: reacting to signal 3
12-19 02:11:36.993: I/dalvikvm(531): Wrote stack traces to '/data/anr/traces.txt'
12-19 02:11:52.452: I/dalvikvm(551): threadid=3: reacting to signal 3
12-19 02:11:52.502: I/dalvikvm(551): Wrote stack traces to '/data/anr/traces.txt'
12-19 02:11:52.783: D/AndroidRuntime(551): Shutting down VM
12-19 02:11:52.783: W/dalvikvm(551): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
12-19 02:11:52.793: E/AndroidRuntime(551): FATAL EXCEPTION: main
12-19 02:11:52.793: E/AndroidRuntime(551): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.deweyx/com.deweyx.MainActivity}: java.lang.NullPointerException
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.os.Looper.loop(Looper.java:137)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.app.ActivityThread.main(ActivityThread.java:4424)
12-19 02:11:52.793: E/AndroidRuntime(551):  at java.lang.reflect.Method.invokeNative(Native Method)
12-19 02:11:52.793: E/AndroidRuntime(551):  at java.lang.reflect.Method.invoke(Method.java:511)
12-19 02:11:52.793: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-19 02:11:52.793: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-19 02:11:52.793: E/AndroidRuntime(551):  at dalvik.system.NativeStart.main(Native Method)
12-19 02:11:52.793: E/AndroidRuntime(551): Caused by: java.lang.NullPointerException
12-19 02:11:52.793: E/AndroidRuntime(551):  at com.deweyx.MainActivity.onCreate(MainActivity.java:27)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.app.Activity.performCreate(Activity.java:4465)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-19 02:11:52.793: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-19 02:11:52.793: E/AndroidRuntime(551):  ... 11 more
12-19 02:11:52.963: I/dalvikvm(551): threadid=3: reacting to signal 3
12-19 02:11:52.963: I/dalvikvm(551): Wrote stack traces to '/data/anr/traces.txt'
12-19 02:11:53.343: I/dalvikvm(551): threadid=3: reacting to signal 3
12-19 02:11:53.353: I/dalvikvm(551): Wrote stack traces to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:06:01.773

您想学习定义按钮单击的快捷方式吗？

这是为任何按钮定义单击侦听器的快捷方式。

**第 1 步：**在添加按钮 xml 中包含 android:onClick="btnAddButtonClick"：

```
<Button
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:text="@string/padd"
    android:layout_gravity="center"
    android:textSize="20sp"
    android:onClick="btnAddButtonClick"     <<----- android:onClick
    android:id="@+id/bAdd"
 /> 
```

**第 2 步：**在您的活动中创建一个方法，其名称与您在 onClick 属性中给出的值相同：

```
public void btnAddButtonClick(View v) 
{
     counter++;
     display.setText("Your total is " + counter);   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:07:30.950

一切都是正确的`Project->Clean`

如果它对您没有帮助，那么您需要重新启动您的 IDE！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:24:42.240

因为它`findViewById`在查找 id bAdd 时崩溃，这可能是因为该 id 尚未定义。你确定你使用的是正确的xml吗？我的意思是，你确定你使用`activity_main.xml`的是 XML 布局吗？因为也许您正在查看错误的 XML 文件，它发生在我身上 :-)

# javascript - 谷歌地图截图

> ID：13949742
> 
> 赞同：0
> 
> 时间：2012-12-19T09:59:06.723
> 
> 标签：javascript

> **可能重复：**
> [如何使用折线和 openInfoWindowHtml 拍摄谷歌地图的快照](https://stackoverflow.com/questions/13946891/how-to-take-snapshot-of-google-map-with-polyline-and-openinfowindowhtml)

我正在研究使用折线和地图上弹出信息窗口的谷歌地图快照的功能。

我已经创建了使用折线拍摄谷歌地图快照的功能，但它无法在折线上拍摄快照打开弹出窗口。

折线显示在 sanpshot 图片上，但信息窗口未显示。

你能解释一下我能做到这一点吗？

# c++ - 如何将 mciSendString("play path",0,0,0) 与 exe 路径一起使用？

> ID：13949748
> 
> 赞同：1
> 
> 时间：2012-12-19T09:59:25.973
> 
> 标签：c++, audio, lpcstr, mcisendstring

我`mciSendString("play path repeat",0,0,0)`以前在我的项目中播放音乐，我专门用它来同时播放多个声音。

问题是我想把声音放在可执行路径中，所以我使用了一个函数来获取 exe 路径

```
string ExePath() {
    char buffer[MAX_PATH];
    GetModuleFileName( NULL, buffer, MAX_PATH );
    string::size_type pos = string( buffer ).find_last_of( "\\/" );
    return string( buffer ).substr( 0, pos);
} 
```

但`mciSendString()`需要`LPCSTR`所以我尝试了以下

```
string music_cmd="play "+ExePath()+"\\war1.mp3 repeat";
mciSendString(music_cmd.c_str(),0,0,0); 
```

该程序运行没有错误，但它不播放声音。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-15T12:53:20.020

如果您使用如下路径，则路径不应包含空格：`C:\music\music 2.mp3`它将不起作用。要使其正常工作，请删除空间或创建一个没有空格的新路径，如下所示：`C:\music\music2.mp3`

其他注意事项：路径必须少于 255 个字符，相对路径不起作用（编译时有效，但在另一台计算机上运行程序时无效），不能有空格，否则会失败。

你可以做一个简单的解决方法，你可以在路径上玩点和空格

我的如下：

```
path = Application.StartuPath & `\whateverMusic.mp3`
path = Chr(34) & path & Chr(34)
mciSendString("Open " & path & " alias " & oName, Nothing, 0, 0)
mciSendString("Play " & oName, Nothing, 0, 0)

Public Property Name As String
    Set(value as String)
         oName = value
    End Set
    Get
         Return oName
    End Get
End Property 
```

从这里：[https ://www.youtube.com/watch?v=UWLTegpOuB0](https://www.youtube.com/watch?v=UWLTegpOuB0)

# ipv6 - 将 IPv4 应用程序移植到双栈 IPv4/IPv6

> ID：13949750
> 
> 赞同：2
> 
> 时间：2012-12-19T09:59:30.160
> 
> 标签：ipv6

实际上，我正在将 IPv4 服务器应用程序移植到 Linux 上的双栈 IPv4/IPv6 应用程序。

我通过使用解决的基本功能：

```
serv_addr.sin6_family = AF_INET6;
serv_addr.sin6_addr = in6addr_any;
...
bind(sock, (struct sockaddr *) &serv_addr, sizeof(serv_addr));
...
listen(sock, 5);
...
newsock = accept(syn->sock, (struct sockaddr *) &cli_addr, &clilen); 
```

我可以连接 IPv4 和 IPv6 并使用这些连接。但是当我想获得 IP 时：

```
switch(data->sa_family) {
   case AF_INET:
   inet_ntop(AF_INET, &(((struct sockaddr_in*)data)->sin_addr), buffer, size);
   break;
   case AF_INET6:
   inet_ntop(AF_INET6, &(((struct sockaddr_in6*)data)->sin6_addr), buffer, size);
   break;

   default:
   buffer[0] = '?';
   buffer[1] = 0;
} 
```

我总是按预期获得 IPv6 地址，或者如果它是 IPv4 连接，例如 ::ffff:127.0.0.1

我必须更改什么，才能以 127.0.0.1 的形式显示为普通的旧 IPv4 地址（不带 ::ffff:-prefix）？

谢谢泰迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:19:48.583

有一个宏可以帮助，但只成功了一半：

```
 if (IN6_IS_ADDR_V4MAPPED(&serv_addr.sin6_addr)) {
        struct sockaddr_in tmpsa;
        tmpsa.sin_family = AF_INET;
        tmpsa.sin_port = 0;
        tmpsa.sin_addr.s_addr = serv_addr.sin6_addr.s6_addr32[3];
  /* process IPv4 address in tmpsa ... */
        inet_ntop (AF_INET, &tmpsa.sin_addr, buffer, size);
  } else {
  /* process IPv6 address in serv_addr.. */
        inet_ntop (AF_INET6, &serv_addr.sin6_addr, buffer, size);
  } 
```

根据平台，可能需要进行少量修改，这里使用 GNU 标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:19:22.330

有两种方法可以去：

1.  如果存在的话，只需`::ffff:`从一开始就去掉它，并将其作为 IPv4 的指示符。

2.  使用两个不同的套接字。那里有一些操作系统不支持通过一个套接字支持 IPv4 和 6（IOW，它们`V6ONLY`始终启用）。尤其是，WinXP 就是这样做的。

    那么你只能做一件事：

    *   用于获取您可以拥有的所有本地套接字`getaddrinfo()`地址`AI_PRIVATE`
    *   `V6ONLY`如果可能的话，使用它们来创建一个监听套接字并立即启用
    *   将它们的描述符保存在一个数组中，并使用`select()`et al 来确定要调用它们中的哪一个`accept()`。

    听起来比实际复杂...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T16:55:21.067

您请求将 IPv4 映射连接呈现为就像它们实际上是 IPv4 一样，代码如下：

```
int cli = accept( server, NULL, NULL );
int addrform = AF_INET;
setsockopt( cli, IPPROTO_IPV6, IPV6_ADDRFORM, &addrform, sizeof(addrform) ); 
```

这需要对每个新的客户端套接字进行。IPv6 连接将失败；您可以忽略它，也可以先检查，仅在使用 IPv4 映射客户端时才调用它。

完成后，您可以调用`getpeername()`以获取首选格式的客户端地址信息，而不是在调用`accept()`.

# code-generation - xtext 中的自定义代码生成

> ID：13949764
> 
> 赞同：2
> 
> 时间：2012-12-19T10:00:07.920
> 
> 标签：code-generation, xtext

我正在使用 Xtext 定义一种新语言。我希望从这种语言生成代码，但是我不想使用自动建议的 doGenerate 函数。相反，我需要使用可以从构建过程中调用的 java 代码（不是 Xtend）。

当然，在那个 java 代码中，我希望能够使用传递给原始建议函数的“资源”，这样我就可以访问 DSL 代码中的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:54:46.197

我相信默认情况下生成器的实现是一个 xtend 文件，但没有什么能阻止您将其更改为 java 文件，您只需要覆盖 [LanguageName]RuntimeModule 类中的绑定，如下所示：-

```
public class ExampleRuntimeModule extends com.example.AbstractExampleRuntimeModule {
    @Override
    public Class<? extends IGenerator> bindIGenerator() {
        return YourOwnGenerator.class;
    }
} 
```

YourOwnGenerator 应该在哪里实现 IGenerator。

# java - java RMI新手——如何确保除了通过RMI访问的服务器代码之外的所有服务器代码都不能被客户端访问

> ID：13949766
> 
> 赞同：1
> 
> 时间：2012-12-19T10:00:14.380
> 
> 标签：java, rmi

我正在创建一个 RMI 服务，并且我想确保只有通过 RMI 服务访问的代码部分才能被客户端机器访问......即作为 RMI 服务器一部分的所有服务器端代码应用程序，并且不能通过 RMI 访问，不应该由只能访问客户端计算机的用户访问。

我如何确保以上内容？我是否认为这可以通过 RMI 策略文件中的适当策略来完成？实施上述政策需要哪些政策？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:24:57.877

客户端无法访问未通过远程接口导出的服务器代码。即使是由于远程方法调用而传递给客户端的序列化对象也是在客户端而不是服务器上执行的，因此它们不会以任何方式危害服务器。这基本上不是一个真正的问题。

# ejb - websphere ejb 部署问题：其他 ejb 引用的 classnotfound 错误

> ID：13949768
> 
> 赞同：1
> 
> 时间：2012-12-19T10:00:20.167
> 
> 标签：ejb, websphere, websphere-7, classnotfound

我有两个 ejb jar 打包到一个耳朵里。说 EJb1.jar 和 Ejb2.jar。我在 Webphere 7.0 中部署它。Ejb1 引用 Ejb2.jar 中的类。除非我在 Ejb1.jar 的 Manifest.Mf 文件中指定 Ejb2.jar，否则 EAR 文件的部署将失败。

抛出构建路径不完整且未找到引用的类的错误。

有什么办法可以克服这个吗？通过 WebSphere 控制台中的一些设置？

我的耳朵里有太多的 ejb 相互引用。每次我们进行代码更改时，都很难更新清单文件。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:06:00.880

如果您想避免这种情况，您需要做的是创建一个包含接口的 EJB Client Jar 并将其放在`EAR/lib`目录中。

例如，如果`EJB1.jar`得到了`MyBean.java`，`MyBeanLocal.java`您现在将其拆分为 2 个 jars 文件：

`EJB1.jar`(EJB Module) 持有`MyBean.java`和`EJB1-Client.jar`(Utility Jar) 持有`MyBeanLocal.java`

然后您将`EJB1-Client.jar`EAR 文件放入lib 目录，EJB2.jar 将能够在其类路径中找到接口。

# javascript - 是否可以保护 cookie？

> ID：13949769
> 
> 赞同：10
> 
> 时间：2012-12-19T10:00:27.460
> 
> 标签：javascript, jquery

我正在使用 JQuery.cookies 来管理 cookie。我正在存储对象和用户/登录信息。

有没有办法加密或保护 cookie？还是只能使用 SSL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T10:03:36.150

保护 cookie 的常用方法是在其中存储随机生成的会话 ID。服务器保留所有敏感信息并将它们与分配给每个访问者的 ID 相关联。这还有一个优势，即您可以存储任意数量的信息，并且不受 cookie 的空间限制。

当然，这不能仅使用 Javascript 来完成。为此，您将需要服务器端编程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T10:02:30.003

您可以简单地将它们存储为加密字符串，一旦您检索到它们然后解密它们。使用您的密钥进行任何加密都可以

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T10:45:36.320

创建一个包含所有可用选项以及`secure`选项的 cookie。

```
$.cookie('myCookie', 'myValue', { expires: 365, secure: true }); 
```

`secure {Boolean}`如果为 true，则设置 cookie 的安全属性，并且 cookie 传输将需要安全协议（如 HTTPS）。

# scala - 从 Squeryl 0.9.5 迁移到 0.9.6

> ID：13949773
> 
> 赞同：1
> 
> 时间：2012-12-19T10:00:34.027
> 
> 标签：scala, squeryl

我正在尝试将现有的应用程序从 SQueryl 0.9.5 迁移到 0.9.6，以便使用新的[扩展字段类型](https://github.com/max-l/squeryl-extended-field-types-example/blob/master/src/main/scala/example/MyCustomTypes.scala)。我现在已经到了可以编译应用程序及其测试的地步，但是当我尝试加载`Schema`.

相当长的堆栈跟踪的一部分包括：

```
[error] ModelSpec.withDB(ModelSpec.scala:14)
[error] BucketSpec$$anonfun$1$$anonfun$apply$1.apply(BucketSpec.scala:11)
[error] BucketSpec$$anonfun$1$$anonfun$apply$1.apply(BucketSpec.scala:11)
[error] Usupported native type models.fields.DateTime,models.fields.DateTime
[error] class java.util.UUID -> java.util.UUID --> null
[error] class java.lang.String -> java.lang.String --> null
[error] class scala.Enumeration$Value -> scala.Enumeration.Val --> null
[error] class [B -> byte[] --> null
[error] class java.lang.Float -> java.lang.Float --> null
[error] class java.util.Date -> java.util.Date --> null
[error] class scala.Enumeration$Val -> scala.Enumeration.Val --> null
[error] class java.lang.Integer -> java.lang.Integer --> null
[error] class java.lang.Double -> java.lang.Double --> null
[error] class java.sql.Timestamp -> java.sql.Timestamp --> null
[error] class java.lang.Byte -> java.lang.Byte --> null
[error] class java.lang.Boolean -> java.lang.Boolean --> null
[error] class scala.math.BigDecimal -> scala.math.BigDecimal --> null
[error] class java.lang.Long -> java.lang.Long --> null
[error] org.squeryl.internals.Utils$.throwError(Utils.scala:95)
[error] org.squeryl.internals.FieldMapper$$anonfun$get$1.apply(FieldMapper.scala:299)
[error] org.squeryl.internals.FieldMapper$$anonfun$get$1.apply(FieldMapper.scala:299) 
```

看一下[源码](https://github.com/max-l/Squeryl/blob/master/src/main/scala/org/squeryl/internals/FieldMapper.scala)好像异常来自`FieldMapper.lookup`方法的失败，即行

```
if(!c.isPrimitive)
  registry.get(c) 
```

据我了解，类的映射是通过该`register`方法加载的，特别是对于本机类型，我们有这些行

```
 protected def initialize {
    import PrimitiveTypeSupport._

    register(byteTEF)
    register(intTEF)
    register(longTEF)
    register(floatTEF)
    register(doubleTEF)
    register(bigDecimalTEF)

    register(binaryTEF)
    register(booleanTEF)
    register(stringTEF)
    register(timestampTEF)
    register(dateTEF)
    register(uuidTEF) 
```

我不确定如何在此注册表中加载我的个人扩展原语类型，以便正确使用它们。

> 有谁知道我应该启用扩展原始类型的机制是什么？

**编辑：**

这是我的模型-在我看来，它看起来像“官方”示例，除了我没有直接使用 Joda time 而是使用它周围的薄包装，这被称为`DateTime`

```
object DateTime extends PrimitiveTypeMode {
  import org.squeryl._
  import org.squeryl.dsl._

  implicit val timeTEF = new NonPrimitiveJdbcMapper[Long, DateTime, TLong](longTEF, this) {
    def convertFromJdbc(t: Long) = DateTime(t)
    def convertToJdbc(t: DateTime) = t.timestamp
  }

  implicit val optionTimeTEF =
    new TypedExpressionFactory[Option[DateTime], TOptionLong]
      with DeOptionizer[Long, DateTime, TLong, Option[DateTime], TOptionLong] {

    val deOptionizer = timeTEF
  }

  implicit def timeToTE(s: DateTime) = timeTEF.create(s)

  implicit def optionTimeToTE(s: Option[DateTime]) = optionTimeTEF.create(s)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:05:18.093

更正答案：

您正在导入 org.squeryl.PrimitiveTypeMode 伴随对象以及您自己的扩展（对象 DateTime 扩展 PrimitiveTypeMode）

您只能在同一应用程序中使用 on 或 other（请参阅[http://squeryl.org/0.9.6.html](http://squeryl.org/0.9.6.html)）

现在不推荐使用 org.squeryl.PrimitiveTypeMode 伴生对象（不推荐使用同名特征）

旧（错误）答案：

您不需要注册您的自定义类型，该注册仅适用于原始 JDBC 类型，它是一个封闭集。

请参阅此示例：[https](https://github.com/max-l/squeryl-extended-field-types-example) ://github.com/max-l/squeryl-extended-field-types-example JodaDate 由（已注册的）Timestamp 原始类型支持。

# matlab - 如何在 Octave [matlab] 罗盘图上画一个圆圈？

> ID：13949777
> 
> 赞同：3
> 
> 时间：2012-12-19T10:00:44.497
> 
> 标签：matlab, plot, octave

我在指南针图上以标准方式绘制了一些矢量（矩阵 2*64）点。

```
compass(data) 
```

这个情节看起来像这样：

![指南针图](../Images/635cf11fd5f7ad3d90e9e10f698c0338.png)

现在我正在对我的数据进行 kmeans 聚类。聚类后​​，我有一个包含 8 个中心点 (x,y) 的向量，我想在同一个罗盘图上绘制它，就像一个直径为 R 的圆。

我做的第一件事是使用命令在该图上创建新的指南针层：

```
compass(centers(:,1), centers(:,2), "o") 
```

“markersize”属性在这里不起作用。该图的结果是：

![带中心点的罗盘图](../Images/1c6279344782ff2703191a29d4d95572.png)

有一些可见的小中心圆（以及一些描述默认箭头的点），但这不是我需要的。

我需要这样的东西： ![在此处输入图像描述](../Images/f50222d626d43d2765f8b67325d26733.png)

有可能这样做吗？octave（matlab）是否允许我们在现有图上绘制不同类型（圆圈）的新对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:52:06.447

如果您在想要绘制圆圈时使用普通绘图，则效果很好。

```
% # Random data in [-1,1]
x = 2*rand(1,10)-1;
y = 2*rand(1,10)-1;

compass(x,y)
hold on
plot(x,y,'ok','MarkerSize',15,'LineWidth',3) 
```

![带圆圈的指南针图。](../Images/1f14510892d4c315d55a9518358a9fba.png)

# wpf - WPF DataGridTextColumn 无法为浮点数据键入点

> ID：13949778
> 
> 赞同：4
> 
> 时间：2012-12-19T10:00:45.150
> 
> 标签：wpf, datagrid, datagridtextcolumn

我有一个 WPF DataGrid 并使用 DataGridTextColumn 绑定到一个集合。Collection 中的项目有一些浮动属性。

当我的程序启动时，我修改了 DataGrid 中 float 属性的值，如果我输入一个整数值，它就可以正常工作。但是如果我输入 char 。对于浮点值， char 。无法输入。我必须先输入所有数字，然后跳到 . 键入 char 的位置。完成我的输入。

那我怎么打字。在我的情况下？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-13T13:37:05.293

也遇到了同样的问题。

就我而言，这是由于数据绑定选项。

我从 更改`*.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;` 为`*.UpdateSourceTrigger = UpdateSourceTrigger.LostFocus;`。

然后它可以`float`直接输入数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:01:11.847

在绑定中尝试这个正则表达式验证。

```
<Validator:RegexValidationRule x:Key="DecimalValidatorFor3Digits"
    RegularExpression="^\d{0,3}(\.\d{0,2})?$"
    ErrorMessage="The field must contain only numbers with max 3 integers and 2 decimals" /> 
```

谢谢

CK 尼丁 (TinTin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T15:17:03.830

我想这是因为您的 datagridcolumn 绑定到具有十进制数据类型的类成员，例如

```
public class Product : ModelBase
{
    decimal _price = 0;
    public decimal Price
    {
        get { return _price; }
        set { _price = value; OnPropertyChanged("Price"); }
    }
} 
```

和 UpdateSourceTrigger=PropertyChanged。摆脱它的一种方法是将属性更改为字符串类型，并如下操作字符串：

```
string _price = "0.00";
    public string Price
    {
        get { return _price; }
        set 
        {
            string s = value;
            decimal d = 0;
            if (decimal.TryParse(value, out d))
                _price = s;
            else
                _price = s.Substring(0, s.Length == 0 ? 0 : s.Length - 1);
            OnPropertyChanged("Price"); 
        }
    } 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:17:16.390

It could be an issue with Localization. Try changing the Culture settings of your thread to check out if this could be the problem:

```
using System.Globalization;
using System.Threading;

Thread.CurrentThread.CurrentUICulture = new CultureInfo("en"); 
```

you can double-check the settings if you are unsure in which Culture you are running by going to `Control Panel > Clock, Language and Region` or running the following code:

```
using System.Diagnostics;

Debug.WriteLine("decimal: " + Thread.CurrentThread.CurrentUICulture.NumberFormat.NumberDecimalSeparator);
Debug.WriteLine("thousand: " + Thread.CurrentThread.CurrentUICulture.NumberFormat.NumberGroupSeparator); 
```

# c++ - 编译时动态函数调用

> ID：13949787
> 
> 赞同：2
> 
> 时间：2012-12-19T10:01:15.023
> 
> 标签：c++, macros, sfinae, compile-time

不确定标题是否突出了我的目标。

我可以在编译时动态调用方法吗？例如：

```
int CallMethod(string methodName, string methodArg)
{
    Foo foo;
    return foo.#methodName(methodArg);
}

CallMethod("getValue", "test"); // This would attempt to call on a Foo instance, method getValue with argument "test" -- foo.getValue("test"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:02:37.367

这是[反射](http://en.wikipedia.org/wiki/Reflection_(computer_programming))，[在 C++ 中本机不可用](https://stackoverflow.com/questions/359237/why-does-c-not-have-reflection)

如果您的可能值数量有限，则`methodName`可以构建一个查找表，该表根据该表调用适当的函数，`methodName`但您不能使用该系统调用任意函数。

这可能是@PaperBirdMaster 建议的 std::map 或一组巨大的`if-else`检查。但这不是真正的反射，只是一种粗略的错觉。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T10:04:57.197

您可以创建一个宏：

```
#define CallMethod(methodName, var) { Foo foo; foo.##methodName(var); } 
```

在主要功能中：

```
CallMethod(foo,"test"); 
```

# java - 读取 xls 文件的标头无效

> ID：13949792
> 
> 赞同：8
> 
> 时间：2012-12-19T10:01:31.047
> 
> 标签：java, excel, apache-poi, xls

我正在本地系统上读取一个 excel 文件。我正在使用 POI jar 版本 3.7，但收到错误 Invalid header signature；读取 -2300849302551019537 或十六进制 0xE011BDBFEFBDBFEF ，预期为 -2226271756974174256 或十六进制 0xE11AB1A1E011CFD0。

用 Excel 打开 xls 文件可以正常工作。

它发生的代码块：有人知道吗？

```
/**
 * create a new HeaderBlockReader from an InputStream
 *
 * @param stream the source InputStream
 *
 * @exception IOException on errors or bad data
 */
public HeaderBlockReader(InputStream stream) throws IOException {
    // At this point, we don't know how big our
    //  block sizes are
    // So, read the first 32 bytes to check, then
    //  read the rest of the block
    byte[] blockStart = new byte[32];
    int bsCount = IOUtils.readFully(stream, blockStart);
    if(bsCount != 32) {
        throw alertShortRead(bsCount, 32);
    }

    // verify signature
    long signature = LittleEndian.getLong(blockStart, _signature_offset);

    if (signature != _signature) {
        // Is it one of the usual suspects?
        byte[] OOXML_FILE_HEADER = POIFSConstants.OOXML_FILE_HEADER;
        if(blockStart[0] == OOXML_FILE_HEADER[0] &&
            blockStart[1] == OOXML_FILE_HEADER[1] &&
            blockStart[2] == OOXML_FILE_HEADER[2] &&
            blockStart[3] == OOXML_FILE_HEADER[3]) {
            throw new OfficeXmlFileException("The supplied data appears to be in the Office 2007+ XML. You are calling the part of POI that deals with OLE2 Office Documents. You need to call a different part of POI to process this data (eg XSSF instead of HSSF)");
        }
        if ((signature & 0xFF8FFFFFFFFFFFFFL) == 0x0010000200040009L) {
            // BIFF2 raw stream starts with BOF (sid=0x0009, size=0x0004, data=0x00t0)
            throw new IllegalArgumentException("The supplied data appears to be in BIFF2 format.  "
                    + "POI only supports BIFF8 format");
        }

        // Give a generic error
        throw new IOException("Invalid header signature; read "
                              + longToHex(signature) + ", expected "
                              + longToHex(_signature));
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T10:06:56.970

只是一个想法，如果您使用 maven，请确保在资源标签过滤中设置为 false。否则 maven 往往会在复制阶段损坏 xls 文件

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-19T11:22:36.767

该异常告诉您您的文件不是有效的基于 OLE2 的 .xls 文件。

能够在 Excel 中打开文件并不是真正的指南——无论扩展名是什么，Excel 都会愉快地打开它知道的任何文件。如果您将 .csv 文件重命名为 .xls，Excel 仍会打开它，但重命名并没有神奇地将其变为 .xls 格式，因此 POI 不会为您打开它。

如果您在 Excel 中打开文件并执行另存为，它会让您将其写成真正的 Excel 文件。如果您想知道它到底是什么文件，请尝试使用[Apache Tika](http://tika.apache.org/) - Tika CLI`--detect`应该能够告诉您

.

我怎么能确定它不是一个有效的文件？如果您查看 Microsoft 的[OLE2 文件格式规范文档](http://msdn.microsoft.com/en-us/library/dd942138.aspx)，然后转到[第 2.2 节](http://msdn.microsoft.com/en-us/library/dd941946.aspx)，您将看到以下内容：

> Header Signature (8 bytes)：复合文件结构的标识签名，必须设置为值 0xD0、0xCF、0x11、0xE0、0xA1、0xB1、0x1A、0xE1。

翻转这些字节（OLE2 是小端序），你会得到 0xE11AB1A1E011CFD0，这是异常中的幻数。你的文件不是以那个幻数开头的，因为它确实不是一个有效的 OLE2 文档，因此 POI 会给你这个例外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T10:25:20.470

如果您的项目是 maven 项目，以下代码可能会有所帮助：

```
/**
 * Get input stream of excel.
 * <p>
 *     Get excel from src dir instead of target dir to avoid causing POI header exception.
 * </p>
 * @param fileName file in dir PROJECT_PATH/src/test/resources/excel/ , proceeding '/' is not needed.
 * @return
 */
private static InputStream getExcelInputStream(String fileName){
    InputStream inputStream = null;
    try{
        inputStream = new FileInputStream(getProjectPath() + "/src/test/resources/excel/" + fileName);
    }catch (URISyntaxException uriE){
        uriE.printStackTrace();
    }catch (FileNotFoundException fileE){
        fileE.printStackTrace();
    }
    return inputStream;
}

private static String getProjectPath() throws URISyntaxException{
    URL url = YourServiceImplTest.class.getResource("/");
    Path path = Paths.get(url.toURI());
    Path subPath = path.subpath(0, path.getNameCount() -2);
    return "/" + subPath.toString();
} 
```

# javascript - 工具栏 JavaScript Pin to / Onmouseover 事件冲突

> ID：13949793
> 
> 赞同：0
> 
> 时间：2012-12-19T10:01:41.700
> 
> 标签：javascript, mouseover

我正在用 JavaScript 制作一个工具栏。此工具栏的常规高度为 50px。在鼠标悬停时，它的高度变为 500px。然而，在这个工具栏上，有一个小图钉。我的目的是让这张图片将工具栏 div 的高度更改为 500px 并让它保持这种状态。目前我可以用图像更改工具栏 div，但在鼠标输出时它会变回原来的 50px 高度。

我怎样才能使它在单击 pin 图像时，onmouseout 功能停止工作，直到再次单击图像？

如果有帮助，这是我的代码：

```
//Pin to Image

<img class="pin" onClick = "document.getElementById('toolbar').style.height
= '500px';" src="images/pin.png" width="20px" height="20px" />

//JavaScript for mouseoverevent

$(document).ready(function() {

$("#toolbar").hover(

  //on mouseover
    function() {
       $("#toolbar").animate({
          height: '550'
       }, 'slow');
    },

//on mouseout
   function() {
       $(this).animate({
         height: '-=500px'
       }, 'slow');
    }
    );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:13:21.360

从图像中删除 onclick 并添加：

```
$('.pin').click(function(){
   $(this).toggleClass('.pinned');
   if(parseInt($('#toolbar').css('height')) < 500) $("#toolbar").animate({
      height: '550'
   }, 'slow');
}); 
```

并编辑#toolbar 悬停功能：

```
$("#toolbar").hover(
    function() {
       // return if its pinned
       if($('#toolbar .pin').hasClass('pinned')) return;
       $("#toolbar").animate({
          height: '550'
       }, 'slow');
    },

   function() {
       // return if its pinned
       if($('#toolbar .pin').hasClass('pinned')) return;
       $(this).animate({
         height: '-=500px'
       }, 'slow');
    }
    );
}); 
```

现在您可以使用 .pinned 类来可视化工具栏的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:14:03.967

下面的代码应该可以解决问题（我没有测试它是否确实有效）。可以通过更好的方式（也许使用切换）来确定：

```
<img class="pin" height="20px" src="images/pin.png" width="20px"/>

//JavaScript for mouseoverevent
$(document).ready(function() {
  var isPinned = false;
  $(".pin").click(function(){
    $("#toolbar").css('height', '500px');
    isPinned = true;
  });

  $("#toolbar").hover(
    //on mouseover
    function() {
      if(!isPinned) {
          $("#toolbar").animate({
            height: '550'
          }, 'slow');
      }
    },

    //on mouseout
    function() {
      if(!isPinned) {
          $(this).animate({
            height: '-=500px'
          }, 'slow');
      }
    }
    );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:04:57.517

创建一个存储工具栏状态的标志变量。在 mouseout 函数中编写一个条件，如果状态为“固定”，则绕过高度变化。

# java - 如何为弹出窗口录制 Selenium 脚本？

> ID：13949795
> 
> 赞同：6
> 
> 时间：2012-12-19T10:01:45.977
> 
> 标签：java, selenium, popup

我想为网站中间的 Popup 录制 selenium 脚本。我为该站点记录了 selenium 脚本，当我运行它时，在处理过程中我得到了广告弹出窗口，它正在停止我的脚本执行。

如何删除这些弹出窗口或使用 selenium 处理它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:10:58.607

您可以下载并使用自动它。以下是等待弹出标题然后在出现时关闭它的脚本示例。

```
While 1
    $activeWindowTitle = WinGetTitle(WinActive(""));            
    If ($activeWindowTitle == "popuptitle") Then
       WinClose("popuptitle");
    EndIf           
    sleep(500)
WEnd 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:13:52.210

如果它是一个广告，那么我认为这将是一个新窗口，您可以使用 getallwindowtitles，然后循环遍历结果以到达广告窗口，使用 selectwindow，然后使用 close 关闭窗口。使用 selectwindow(0) 返回

# html - 移动视图地图视图不正确？

> ID：13949797
> 
> 赞同：0
> 
> 时间：2012-12-19T10:01:59.050
> 
> 标签：html, css, mobile, bing-maps

应用 Bootstrap CSS 后，不确定的地图移动视图`<div>`将显示在地图 div 之外。

地图不准确。

我们的代码是，{php}

```
<div id='mapDiv'  style="position:relative;min-height: 478px; min-width:inherit; ">
   <img id="loading" src="./images/loading.gif" />
</div> 
```

如何正确修复移动视图中的地图（bing）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:15:14.500

你`id`的 for your与页面中的`img`其他一些冲突，`id`你可能有也可能没有内联 css 或其他优先级标记`id`。因此，您应该查看您的 HTML 文件。

# ruby-on-rails - Rails 引擎未使用 Carrierwave 上传到 s3

> ID：13949798
> 
> 赞同：2
> 
> 时间：2012-12-19T10:01:59.077
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave, rails-engines, fog

我正在创建一个rails插件`rails new plugin my_plugin --mountable`

这是相当多的工作要弄清楚，但它应该使用carrierwave将文件上传到S3，但它说好的但没有上传任何东西

Carrierwave 用于生成上传器，`rails g uploader photo` 文件如下所示

```
# my_engine/app/uploaders/my_engine/photo_uploader.rb

# encoding: utf-8
module my_engine
 class PhotoUploader < CarrierWave::Uploader::Base
  # Choose what kind of storage to use for this uploader:
  storage :file
  # storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end
 end
end 
```

该模型有一个坐骑：照片，PhotoUploader

```
module PdfGeneratorEngine
  class Assemble < ActiveRecord::Base
    attr_accessible :color, :photo, :qr_code_url, :text

    mount_uploader :photo, PhotoUploader
  end
end 
```

我的 CarrierWave 配置文件是这个

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',
    :aws_access_key_id      => 'MY_ACCES_KEY',
    :aws_secret_access_key  => 'MY_SECRET_KEY',
    :provider => 'AWS',
    :region => 'eu-west-1'
  }
  config.fog_directory  =  'my.bucket.com'
  config.fog_host       =  'https://s3-eu-west-1.amazonaws.com/my.bucket.com'
  config.storage = :fog
  config.s3_use_ssl = true
  config.fog_public = true
end 
```

所以首先它开始对fog_host尖叫，如果它是asset_host就可以了

接下来它的问题在于 s3_use_ssl，而它是 CarrierWave 的 github 上的一个合并问题。但是主机已经被定义为 https:// 所以我不明白为什么该行是必要的。

之后它说“好的，它完成了”，当我尝试（使用守护程序）检查文件时，那里什么都没有。

我错过了什么？还是 CarrierWave 和 Rails 可安装引擎存在问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:05:52.223

在你的 photo_uploader.rb

评论存储：文件和取消评论存储：雾

```
 # storage :file
  storage :fog 
```

-- 看看你的fog.rb，它和这里给出的不一致

[载波#using-amazon-s3](https://github.com/jnicklas/carrierwave#using-amazon-s3)

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',                        # required
    :aws_access_key_id      => 'xxx',                        # required
    :aws_secret_access_key  => 'yyy',                        # required
    :region                 => 'eu-west-1'                   # optional, defaults to 'us-east-1'
    :hosts                  => 's3.example.com'              # optional, defaults to nil
    :endpoint               => 'https://s3.example.com:8080' # optional, defaults to nil
  }
  config.fog_directory  = 'name_of_directory'                     # required
  config.fog_public     = false                                   # optional, defaults to true
  config.fog_attributes = {'Cache-Control'=>'max-age=315576000'}  # optional, defaults to {}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:08:20.917

好的 所以 CarrierWave 有点问题。

我已经快速设置了 RightAws，现在它上传到 S3，我可以从我的守护进程中找到它。

在我的上传器中，我添加了

```
 @s3 = RightAws::S3Interface.new('MY KEY', 'MY SECRET KEY')
   @s3.put('my.bucket.com', assemble.photo.identifier ,params[:assemble][:photo]) 
```

感谢 Nishant 的帮助，CarrierWave 会更流畅、更好，但目前无法正常工作。在他们的 github 中有一个关于在 Rails 引擎中使用的问题。

# java - 一次向 Oracle 数据库表中插入超过 50k 条记录

> ID：13949799
> 
> 赞同：-3
> 
> 时间：2012-12-19T10:01:59.660
> 
> 标签：java, oracle, jdbc, apache-poi

我需要向 oracle 数据库表中插入超过 50k 条记录，该过程是我正在从外部 excel 文件中读取数据并尝试一次插入具有超过 50k 条记录的表中。数据应该有效地插入到表中。我我能够从 excel 文件中检索数据，现在数据已经准备好了，但是任何人都可以建议我将数据插入到 oracle 数据库表中的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:14:34.910

看看[JDBC 批量更新](http://docs.oracle.com/javase/1.5.0/docs/guide/jdbc/getstart/statement.html#1000712 "JDBC 批量更新")

您可以创建一个`PreparedStatement`，循环遍历要插入和添加的数据，然后在最后执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:06:04.983

有专门为此[SQL Loader设计的批量上传工具](http://www.orafaq.com/wiki/SQL%2aLoader_FAQ)

# android - Android RSS 提要解析

> ID：13949800
> 
> 赞同：5
> 
> 时间：2012-12-19T10:01:59.300
> 
> 标签：android, rss

我是 android 新手，在我的应用程序中，我必须解析数据并且需要在屏幕中显示。但是在一个特定的标签数据中，我无法解析原因，因为该标签中也有一些特殊字符。下面是我显示我的代码。

我的解析器功能：

```
 protected ArrayList<String> doInBackground(Context... params) 
    {
//      context = params[0];
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();     
        test = new ArrayList<String>();
        try {
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document document = builder.parse(new java.net.URL("input URL_confidential").openConnection().getInputStream());
            //Document document = builder.parse(new URL("http://www.gamestar.de/rss/gamestar.rss").openConnection().getInputStream());
            Element root = document.getDocumentElement();
            NodeList docItems = root.getElementsByTagName("item");
            Node nodeItem;
            for(int i = 0;i<docItems.getLength();i++)
            {
                nodeItem = docItems.item(i);
                if(nodeItem.getNodeType() == Node.ELEMENT_NODE)
                {
                    NodeList element = nodeItem.getChildNodes();                    
                    Element entry = (Element) docItems.item(i);
                    name=(element.item(0).getFirstChild().getNodeValue());

//                 System.out.println("description = "+element.item(2).getFirstChild().getNodeValue().replaceAll("&lt;div&gt;&lt;p&gt;"," "));
                    System.out.println("Description"+Jsoup.clean(org.apache.commons.lang3.StringEscapeUtils.unescapeHtml4(element.item(2).getFirstChild().getNodeValue()), new Whitelist()));             

                    items.add(name);

                }
            }
        } 
        catch (ParserConfigurationException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (MalformedURLException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (SAXException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return items;
    } 
```

输入：

```
<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
<channel>
<title>my application</title>
<link>http:// some link</link>
<atom:link href="http:// XXXXXXXX" rel="self"></atom:link>
<language>en-us</language>
<lastBuildDate>Thu, 20 Dec 2012</lastBuildDate>
<item>
<title>lllegal settlements</title>
<link>http://XXXXXXXXXXXXXXXX</link>
<description> &lt;div&gt;&lt;p&gt;
India was joined by all members of the 15-nation UN Security Council except the US to condemn Israelâ€™s announcement of new construction activity in Palestinian territories and demand immediate dismantling of the â€œillegalâ€ settlements.
&lt;/p&gt;
&lt;p&gt;
UN Secretary General Ban Ki-moon also expressed his deep concern by the heightened settlement activity in West Bank, saying the move by Israel â€œgravely threatens efforts to establish a viable Palestinian state.â€
&lt;/p&gt;
&lt;p&gt;
</description>
</item>
</channel> 
```

输出：

```
 lllegal settlements  ----> title tag text

     India was joined by all members of the 15-nation UN Security Council except the US to condemn Israel announcement of new construction activity in Palestinian territories and demand immediate dismantling of the illegal settlements. -----> description tag text

     UN Secretary General Ban Ki-moon also expressed his deep concern by the heightened settlement activity in West Bank, saying the move by Israel gravely threatens efforts to establish a viable Palestinian state.    ----> description tag text. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:35:30.657

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T14:45:49.673

用 Html.fromHTML() 运行节点值两到三遍就可以了。

说明：内置的 Html.fromHTML() 方法会将狂野和损坏的 HTML 转换为可用的内容。伪代码在这里：

```
sHTML = node.getNodeValue()
sHTML = Html.fromHTML(sHTML)
sHTML = Html.fromHTML(sHTML)
sHTML = Html.fromHTML(sHTML) 
```

到第三次或第四次不可读的内容将再次变得可读。您可以在 textview 中显示它或使用 webview 加载数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:32:09.193

简单地替换有问题的字符有什么问题吗？

```
string = string.replaceAll("&lt;", "");
string = string.replaceAll("div&gt;", "");
string = string.replaceAll("p&gt;", ""); 
```

# ffmpeg - FFmpeg 错误 m4v 到 flv 请求的比特率太低

> ID：13949805
> 
> 赞同：0
> 
> 时间：2012-12-19T10:02:26.550
> 
> 标签：ffmpeg, flv

* * *

## FFMPEG 输出

* * *

## 命令

```
/usr/local/bin/ffmpeg -i '/home/machine/public_html/video_1355531272.m4v' -s '640x480' -sameq -ab '64k' -ar '44100' -f 'flv' -pass '1' -passlogfile '/home/machine/public_html/tmp/1355531273-50cbc4090d696-multipass'  -y /home/machine/public_html/tmp/1355531273-50cbc4090d2a9.flv &> /home/machine/public_html/tmp/1355531273-50cbc4090da7c.info
/usr/local/bin/ffmpeg -i '/home/machine/public_html/video_1355531272.m4v' -s '640x480' -sameq -ab '64k' -ar '44100' -f 'flv' -pass '2' -passlogfile '/home/machine/public_html/tmp/1355531273-50cbc4090d696-multipass'  -y /home/machine/public_html/tmp/1355531273-50cbc4090d2a9.flv &> /home/machine/public_html/tmp/1355531273-50cbc4090da7c.info
eng): Video: h264, yuv420p, 960x540, 3428 kb/s, 29.97 fps, 29.97 tbr, 2997 tbn, 5994 tbc
    Metadata:
      creation_time   : 2012-12-14 22:50:55
    Stream #0.1(eng): Audio: aac, 44100 Hz, stereo, s16, 111 kb/s
    Metadata:
      creation_time   : 2012-12-14 22:50:55
[buffer @ 0xdd079d0] w:960 h:540 pixfmt:yuv420p
[scale @ 0xdd07da0] w:960 h:540 fmt:yuv420p -> w:640 h:480 fmt:yuv420p flags:0xa0000004
[flv @ 0xdd041c0] requested bitrate is too low
Output #0, flv, to '/home/machine/public_html/tmp/1355531273-50cbc4090d2a9.flv':
    Stream #0.0(eng): Video: flv, yuv420p, 640x480, q=2-31, pass 2, 200 kb/s, 90k tbn, 29.97 tbc
    Metadata:
      creation_time   : 2012-12-14 22:50:55
    Stream #0.1(eng): Audio: adpcm_swf, 44100 Hz, stereo, s16, 64 kb/s
    Metadata:
      creation_time   : 2012-12-14 22:50:55
Stream mapping:
  Stream #0.0 -> #0.0
  Stream #0.1 -> #0.1
Error while opening encoder for output stream #0.0 - maybe incorrect parameters such as bit_rate, rate, width or height
-------------------------------
RESULT
-------------------------------
Execute error. Output for file "/home/machine/public_html/video_1355531272.m4v" was found, but the file contained no data. Please check the available codecs compiled with FFmpeg can support this type of conversion. You can check the encode decode availability by inspecting the output array from PHPVideoToolkit::getFFmpegInfo(). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:24:46.273

删除 -sameq 选项。这并不意味着相同的质量。

# variables - Zend Framework 2 - 在 layout.phtml 中使内容页面变量可访问

> ID：13949809
> 
> 赞同：0
> 
> 时间：2012-12-19T10:02:32.420
> 
> 标签：variables, zend-framework2, layout-page

我想构建一个花哨的标题容器——你永远猜不到它——包含显示的每个页面的标题。

您可以在`Django`传递给布局页面的每个视图中创建一个变量，也可以在内容页面上定义一个填充内容的块。

它不是一个很好的解决方案复制并在我的应用程序的每个页面上粘贴我的花哨标题只是为了放入我的页面标题。我更愿意将标题容器放在我的布局页面中并使用我的`$title`变量在容器中设置标题.

[我在这里](https://stackoverflow.com/questions/1537700/sending-variables-to-the-layout-in-zend-framework)找到了静态变量的解决方案，但我需要一个动态变量，因为每个页面的标题都不同。

我的问题：有没有一种简单的方法可以将`$title`每个内容页面上的变量传递给我的 layout.phtml？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:20:00.520

ZF 中有一个很好的视图 Helper 用于此任务。您可以在视图文件中定义要用于页面的标题。

在您的视图页面中：

```
//index.tmpl
$this->headTitle("this is my unique title for this page"); 
```

在您的布局文件中：

```
<title><?php echo $this->headTitle() ?></title> 
```

更多信息请访问：http: [//framework.zend.com/manual/2.0/en/modules/zend.view.helpers.head-title.html](http://framework.zend.com/manual/2.0/en/modules/zend.view.helpers.head-title.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:28:23.143

好的，如果您知道要寻找什么，答案很简单。使用[占位符助手](http://framework.zend.com/manual/2.0/en/modules/zend.view.helpers.html#placeholder-helper)。

```
//layout.phtml
<?php $this->placeholder('foo')->set("Some text for later") ?> 
```

和

```
//myview.phtml
<?php
   echo $this->placeholder('foo');
   // outputs "Some text for later"
?> 
```

# linux - How Pci driver works in Linux

> ID：13949816
> 
> 赞同：5
> 
> 时间：2012-12-19T10:02:52.607
> 
> 标签：linux, linux-device-driver, pci-bus

I'm trying to learn about how pci drivers works in Linux in PC environment but really find it difficult to go thorugh.There are few following statement which I like to understand before make a move.

1.  The PCI specification permits a system to host up to 256 buses.(buses = pci slots?)

2.  Each bus hosts up to 32 devices.

3.  Each device can be a multifunction board with a maximum of eight functions.(what exactly this line means?)

On my PC can see only three pci slots (are these are called buses) and from each slots one irq lines is directed to cpu.

It seems my understanding is quite wrong and thats why wanted to get in more views in.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:08:54.947

I can answer at least part of your question.

```
 C1  C2  C3  ....  Chipset/PCI bridge
 |   |    |            |
 +---+----+  .... -----+

```

C1, C2, C3 etc are the white PCI connectors.
This is where you plug in a PCI card. These are often called *PCI slots*

The line at the bottom is the PCI bus.
All devices on the same PCI bus can directly communicate with eachother.
Since they are on a shared bus, only one device can be active at the same time.

The part I marked Chipset/PCI bridge is often where the PCI bus is connected to other parts of the computer. This can be a connection to the chipset, or another PCI bus.

I found some link on Ars Technica's archives which might help:
[http://archive.arstechnica.com/paedia/p/pci-express/m-pcie-1.html](http://archive.arstechnica.com/paedia/p/pci-express/m-pcie-1.html)
[http://archive.arstechnica.com/paedia/p/pci-express/m-pcie-2.html](http://archive.arstechnica.com/paedia/p/pci-express/m-pcie-2.html)
...

# java - 如何确定 MDB 的 messageType 接口

> ID：13949819
> 
> 赞同：1
> 
> 时间：2012-12-19T10:02:55.553
> 
> 标签：java, jakarta-ee, message-driven-bean

MessageDriveBean 实现除 MessageListener 之外的另一个接口。这在部署时提供了一个例外：

> 原因：org.jboss.deployers.spi.DeploymentException：创建 ejb 容器 MyQueue 时出错：无法从 [接口 IMessageVisitor，接口 javax.jms.MessageListener] 选择 MDB MyQueue 的消息传递类型接口

任何想法来指定 messageType 接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:08:39.727

我应该明确提到消息类型（从[jboss 论坛](https://community.jboss.org/thread/164246)找到）

```
@MessageDriven(messageListenerInterface=MessageListener.class) 
```

# web-services - 无法在 jboss 51GA 上使用 webserviceaxis2

> ID：13949820
> 
> 赞同：0
> 
> 时间：2012-12-19T10:03:16.970
> 
> 标签：web-services, jboss, axis2

我使用tomcat 7和jdk7和axis2在eclipse上开发了一个web服务，我必须在jboss51GA和jdk5上部署它，当我尝试访问web服务时出现流动错误：这个WebaxisService有部署错误

```
Error: java.lang.UnsupportedClassVersionError: pachet/clasa_ws : Unsupported
major.minor version 51.0 at java.lang.ClassLoader.defineClass1(Native Method) at 
java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) at 
java.lang.ClassLoader.defineClass(ClassLoader.java:615) at
java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) at
java.net.URLClassLoader.defineClass(URLClassLoader.java:283) at
java.net.URLClassLoader.access$000(URLClassLoader.java:58) at
java.net.URLClassLoader$1.run(URLClassLoader.java:197) at 
java.security.AccessController.doPrivileged(Native Method) at 
java.net.URLClassLoader.findClass(URLClassLoader.java:190) at
org.apache.axis2.deployment.DeploymentClassLoader.findClass(DeploymentClassLoader.java:82) at
java.lang.ClassLoader.loadClass(ClassLoader.java:306) at 
org.apache.axis2.deployment.DeploymentClassLoader.loadClass(DeploymentClassLoader.java:277) at
java.lang.ClassLoader.loadClass(ClassLoader.java:247) at
org.apache.axis2.util.Loader.load 
```

我将 web 服务部署为 war 文件，并且不在轴目录中。谁能帮我解决我一周面临的这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:30:58.747

```
Some Condition to be followed in eclipse

1.Eclipse Dynamice Module version should be 2.5 or less 
2.In Configuration select axis2 (if not there if install axis2)

For JBoss need to have a Maven Project and Jboss version less than 7 
```

# objective-c - iOS 存储和缓存存储限制

> ID：13949822
> 
> 赞同：4
> 
> 时间：2012-12-19T10:03:30.097
> 
> 标签：objective-c, ios, ios5

我在 TMP 目录上存储和缓存图像。

上次我检查使用情况时，它是 50MB。对存储的使用有任何限制吗？

苹果会拒绝该应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:07:40.420

您在此目录中存储的信息量没有限制，但您必须考虑到 App Store 指南规定，`/tmp`当应用程序退出时，必须删除目录中存储的信息。违反此要求可能会使 Apple 拒绝您的申请。

# c# - 在不可变的构造函数方法中验证构造函数参数是坏主意还是好主意？

> ID：13949831
> 
> 赞同：2
> 
> 时间：2012-12-19T10:03:56.480
> 
> 标签：c#, .net, validation, immutability

您有一个不可变对象，并在接受几个参数的构造函数中设置其内部变量。

**问题**：
您是否发现在不可变对象的构造函数方法中验证构造函数参数有任何问题，`ArgumentExceptions`如果无效则抛出？

（对我来说这是有道理的，但我想问一下，如果有更好的方法或对此不满意 - 例如，将验证从构造函数转移到工厂是否是一个更好的设计）

**或者，如果我通过改写问题来概括它**：

可以将业务规则逻辑放在构造函数方法中吗？或者构造函数应该总是只做设置对象的内部结构吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:10:03.447

在某种程度上，在构造函数本身中进行验证是有意义的，因为您知道它的所有用法都将通过该单点，并且任何其他将使用您的代码的开发人员都将因为您的“低级“验证。

如果您将验证移到调用链的更高位置，则可以使类代码更干净，但会使代码暴露于“您使用错误”错误的可能性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T10:10:40.060

构造函数验证在数据无效的情况下有一个小问题：那你怎么办？如果您经常创建“无效”实例，则*必须*抛出异常，这可能会很尴尬并且还会影响性能。

为了摆脱`try ... catch`每次实例化对象，无论如何你都必须创建一个工厂。

我认为工厂是一个很好的方法，但方式略有不同——验证给工厂方法的参数，然后才创建一个（有效的）实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T14:58:12.163

一个类应该尽其所能记录它所做的保证，并尽最大努力使自己始终处于有效状态。任何不适当或会使对象处于无效状态的传入调用都应生成异常。

这也适用于构造函数。不验证其输入的构造函数使得其他人可以创建您的类的无效实例。但是如果你总是验证，那么任何引用你的类的人都可以确信它是有效的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T10:09:24.213

如果是我，我会在将参数传递给构造函数之前验证它们。您永远不知道您的代码将如何发展，因此按照您的建议在工厂进行验证应该提供更多的可见性并感觉“更干净”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:16:50.797

如果您可以选择在哪里引发异常，只需选择您更可能记得用 包围它的地方`try..catch`，这也有助于考虑您的代码库的其他用户。这通常不取决于课程的目的，以及您如何看待它的使用方式。然而，一致性也很重要。

有时在两者中都不引发异常而是`ValidateInstance()`为不可变类型提供单独的函数很有用。您的其他选择是您所说的类创建（通过工厂或构造函数）或类使用（如果可以更快抛出错误，通常是一个坏主意......但有时是有道理的）。

将它们放在构造函数中的好处是，如果您选择稍后再制作，它们也会出现在 Factory 方法中。

高温高压

# php - php联系表格回复发件人

> ID：13949834
> 
> 赞同：0
> 
> 时间：2012-12-19T10:04:14.460
> 
> 标签：php, email, sendmail

以下代码从我的网站发送电子邮件，但电子邮件来自`cgi-mailer@kundenserver.de`，我如何将其更改为发件人的电子邮件地址，我已经给出了变量`$email`：

```
<?php
if(isset($_POST['submit'])) {
    $msg = 'Name: ' .$_POST['FirstName'] .$_POST['LastName'] ."\n" 
    .'Email: ' .$_POST['Email'] ."\n" 
    .'Message: ' .$_POST['Message'];
$email = $_GET['Email'];
    mail('me@example.com', 'Message from website', $msg );
    header('location: contact-thanks.php');

    } else {
header('location: contact.php');
exit(0);
}
?> 
```

将标题添加`From:`到我的邮件命令似乎允许我更改电子邮件地址，但我无法弄清楚如何对变量执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:08:31.760

在标题中声明变量..

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

**编辑：**

```
<?php
if(isset($_POST['submit'])) {
    $msg = 'Name: ' .$_POST['FirstName'] .$_POST['LastName'] ."\n" 
    .'Email: ' .$_POST['Email'] ."\n" 
    .'Message: ' .$_POST['Message'];
$email = $_GET['Email'];
$headers = 'From: '.$email."\r\n" .
    'X-Mailer: PHP/' . phpversion();
    mail('me@example.com', 'Message from website', $msg, $headers );
    header('location: contact-thanks.php');

    } else {
header('location: contact.php');
exit(0);
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:10:59.427

```
<?php

$to = "someone@example.com";

$subject = "Test mail";

$message = "Hello! This is a simple email message.";

$from = "someonelse@example.com";

$headers = "From:" . $from;

mail($to,$subject,$message,$headers);

echo "Mail Sent.";

?> 
```

更多参考

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:08:38.360

将此添加到标题

```
$headers .= 'From: ' . $from . "\r\n";
$headers .='Reply-To: $from' . "\r\n" ;
mail($to,$subject,$message,$headers); 
```

它应该设置发件人。

在哪里

```
$from= "Marie Debra <marie.debra@website.com>;" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-22T23:02:10.213

```
$from = $_POST['email'];

$headers = array('Content-Type: text/plain; charset="UTF-8";',
    'From: ' . $from,
    'Reply-To: ' . $from,
    'Return-Path: ' . $from,
); 
```

# java - 为什么 Java 增量运算符允许在没有显式转换的情况下进行缩小操作？

> ID：13949840
> 
> 赞同：29
> 
> 时间：2012-12-19T10:04:42.090
> 
> 标签：java, compiler-errors, precision

> **可能重复：**
> [Java += 运算符](https://stackoverflow.com/questions/8710619/java-operator)

在 Java 中，这是无效的（不编译），正如预期的那样：

```
long lng = 0xffffffffffffL;
int i;
i = 5 + lng;    //"error: possible loss of magnitude" 
```

但这完全没问题（？！）

```
long lng = 0xffffffffffffL;
int i = 5;
i += lng;       //compiles just fine 
```

这显然是一种缩小操作，可能会超出`int`范围。那么为什么编译器不抱怨呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T10:06:45.833

这是在[JLS #15.26.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)中定义的：

> 形式的复合赋值表达式`E1 op= E2`等价于`E1 = (T) ((E1) op (E2))`，其中`T`是 的类型`E1`，除了`E1`只计算一次。

换句话说，`i += lng`隐式执行强制转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T10:05:37.060

`i += lng;` 复合赋值运算符 cast 的隐式。

```
i+=lng; 
is same as 
i = int(i+lng); 
```

来自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)：

> E1 op= E2 形式的复合赋值表达式等价于 E1 = (T) ((E1) op (E2))，其中 T 是 E1 的类型，除了 E1 只计算一次。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T10:07:29.853

编译器不会抱怨，因为根据[JLS §15.26.2。复合赋值运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2)：

> 形式的复合赋值表达式`E1 op= E2`等价于`E1 = (T) ((E1) op (E2))`，其中`T`是 的类型`E1`，除了`E1`只计算一次。

因此，

```
i += lng; 
```

相当于

```
i = (int)(i + lng); 
```

# c# - url 路由 webforms 冲突

> ID：13949848
> 
> 赞同：0
> 
> 时间：2012-12-19T10:05:16.520
> 
> 标签：c#, asp.net, webforms, url-routing

我刚刚进入 Global.asax 以及在 WebForms 中进行 url 路由的方式。这里我与我的 default.aspx 和我的其他文件有点冲突。

我希望我的所有文件都具有友好的 url，即。mysite.com/welcome/ 等，我通过以下方式实现这一目标：

```
routes.MapPageRoute("root_pages", "{file}/{*action}", "~/{file}.aspx"); 
```

这样，我可以将 mysite.com/welcome.aspx 写入 mysite.com/welcome/ 并根据需要进行默认操作。但是随后我的默认路由之间发生了冲突：

```
routes.MapPageRoute("default", "{*action}", "~/default.aspx"); 
```

我还想在我的 default.aspx 上访问一些操作 - 但是当我这样做时似乎我不能这样做？

它会选择文件行并继续，所以我不能做 mysite.com/logout/ 这是我的 default.aspx 页面上的一个功能，在这种情况下它会寻找一个文件.. 有没有其他方法做我想做的事？所以我可以同时使用这两条路线吗？

希望你能帮助我

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T10:35:06.183

它总是会走第一条路线并顺其自然。在您的情况下，它将查找不存在的 logout.aspx。唯一的选择是使用 URL mysite.com/default/logout。

我们可以将此视为 WebForms 中 URL 路由的限制。

您可以在以下 URL 上查看我的博客系列以了解 Web 表单中的 URL 路由。

[http://karmic-development.blogspot.in/2013/10/url-routing-in-aspnet-web-forms-part-1.html](http://karmic-development.blogspot.in/2013/10/url-routing-in-aspnet-web-forms-part-1.html)

[http://karmic-development.blogspot.in/2013/10/url-routing-in-aspnet-web-forms-part-2.html](http://karmic-development.blogspot.in/2013/10/url-routing-in-aspnet-web-forms-part-2.html)

这个系列还有更多文章。

# jersey - 在javascript中实现restful web services的PUT方法

> ID：13949853
> 
> 赞同：0
> 
> 时间：2012-12-19T10:05:35.450
> 
> 标签：jersey, webservice-client, restful-url

我正在开发一个使用 NetBeans、GlassFish 服务器和 MySQL 作为后端的 RESTful Web 服务。我想使用 JavaScript 创建一个 RESTful Web 服务客户端，它将通过它使用所有服务。我已经创建了一个实现`GET`,`POST`和`DELETE`方法的客户端。但是，我想`PUT`在 JavaScript 中实现该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:11:46.883

这几乎是在客户端更改类型规范的问题 - 但您可能必须编写一些客户端或服务器端逻辑（例如，评估之前的大写或小写，作为输入清理的一部分），具体取决于您的支持参数。有关详细信息，请参阅末尾的链接。

* * *

使用 jQuery：

```
$.ajax({
    url: restfulPutUrl,
    type: "PUT"
}).done(function() {
    $(this).addClass("done");
}); 
```

请参阅[jQuery 文档](http://api.jquery.com/jQuery.ajax/ "jQuery 文档")，尤其是：

> 其他 HTTP 请求方法，如 PUT 和 DELETE，也可以使用 [with the type parameter]，但并非所有浏览器都支持。

* * *

没有：

```
 function createXMLHttpRequest() {
   try { return new XMLHttpRequest(); } catch(e) {}
   try { return new ActiveXObject("Msxml2.XMLHTTP"); } catch (e) {}
   alert("XMLHttpRequest not supported");
   return null;
 }

 var xhReq = createXMLHttpRequest();
 xhReq.open("PUT", "restfulPutUrl", true); 
```

如果需要，请参阅[ajaxpatterns.org](http://ajaxpatterns.org/XMLHttpRequest_Call#Creating_XMLHttpRequest_Objects "ajaxpatterns.org")

* * *

PUT 没有统一实现，详情请见[http://annevankesteren.nl/2007/10/http-method-support 。](http://annevankesteren.nl/2007/10/http-method-support)

# jquery - IE中iframe中的Jquery ui选项卡

> ID：13949857
> 
> 赞同：0
> 
> 时间：2012-12-19T10:05:47.597
> 
> 标签：jquery, internet-explorer, iframe, jquery-ui-tabs

首先，对不起我糟糕的英语。我的问题是：一个有site1.com 和site2.com。在 site1.com 中，我附加了这个 html：

```
<iframe src="site2.com"> 
```

在 site2.com 我使用 jquery ui.tabs。site2.com 中有 5 个选项卡，我通过以下代码初始化 site2.com 中的选项卡：

```
$("#tabs").tabs({}); 
```

这适用于除 IE 之外的任何地方。在 IE 中我看到：[http://i.imgur.com/GEvar.png](http://i.imgur.com/GEvar.png)，但是当我单击其他选项卡时，没有任何反应。

我怎样才能解决这个问题？

# html - 为什么 IE9 以文档模式打开为 IE7 标准？

> ID：13949858
> 
> 赞同：67
> 
> 时间：2012-12-19T10:05:49.027
> 
> 标签：html, internet-explorer, internet-explorer-9, doctype

当我在 IE9 中使用 DOCTYPE 打开网页时

```
<!DOCTYPE html> 
```

它以 IE7 标准打开文档模式。

打开页面时我需要默认的 IE9 标准。

如何更正此文档模式问题？

IE浏览器开发者工具的截图

![在此处输入图像描述](../Images/5e469af0a6851add61abb79a9ad3b5ce.png)

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-19T10:09:52.993

试试这个答案：[https](https://stackoverflow.com/a/13524518/1679310) ://stackoverflow.com/a/13524518/1679310 。

总结一下，在meta标签中给IE浏览器更多的信息：

```
<!DOCTYPE html>
<html>
  <head>
    <title>My Web</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

*编辑说明：正如 Olly Hodgson 所提到的，正确的选项是 IE=edge，如上面的片段中当前所述。以下是原始版本，也是工作版本：*

```
 <meta http-equiv="X-UA-Compatible" content="IE=100" /> 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-19T10:12:32.343

它可能在 IE7 标准下解析文档的原因可能有多种：

1.  服务器正在文档的 HTTP 响应中发送`X-UA-Compatible`IE7 的标头。[使用Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具检查服务器响应标头。
2.  `X-UA-Compatible`HTML 文档正在使用IE7 的属性值设置元标记。
3.  IE 会自动检测该页面以在“兼容性视图”中打开。请注意，默认情况下，所有 Intranet 站点都在 IE 的“兼容性视图”中查看。`Tools -> Compatibility view settings`取消选中IE下的“在兼容性视图中显示 Intranet 站点”复选框。“在兼容性视图中显示所有网站”也应该取消选中。
4.  您使用了开发人员工具并明确设置为以“IE7 标准”模式查看要呈现的页面。请注意，这只会发生在每个客户的基础上。

**更新 2016-01-28**
正如@Gordon 在下面的评论中指出的那样，另一个原因可能是网络管理员已将站点的兼容性视图设置为网络上的组策略。
在这种情况下，唯一的解决方法是联系网络管理员从组策略中删除该站点。请参阅[此处的 HTML1203](https://msdn.microsoft.com/en-us/library/hh180764(v=vs.85).aspx)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-09T20:16:39.163

您也可以在 web.config 中进行设置。

```
<system.webServer>
    <httpProtocol>
        <customHeaders>
            <clear />
            <add name="X-UA-Compatible" value="IE=edge" />
        </customHeaders>
    </httpProtocol> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T10:09:14.263

您的页面是否包含强制使用 IE7 的元标记？

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /> 
```

这将强制页面使用 IE7 兼容性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-15T16:34:41.957

只是想分享一下，如果您的 Web 服务器是 Apache2，您可以在 VirtualHost 配置中设置如下所示的响应标头，这也将解决问题。

```
Header set X-UA-Compatible "IE=edge" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-27T17:59:57.940

该问题似乎特定于 IE9 和兼容模式的组合。对我们来说，我们不能禁用兼容模式，因为它是一个 SharePoint 2013 站点，并且 IE11 必须在兼容模式下运行才能编辑页面，但 IE9 的行为与您显示的一样。在元标记中将 X-UA-Compatible 设置为“IE=edge”确实解决了我们的问题，尽管将值设置为 IE=10 并不会影响我们的行为。我们也有相同的文档类型。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-23T17:52:22.660

如果您的项目是 ASP.NET MVC，请确保添加：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

标记到您的布局（模板）页面。我只花了两个小时调试和调整，才意识到我只是将那个元标记添加到我的子页面中。一旦我将它添加到我的布局页面，浏览器就完美地以 EDGE 模式加载。

# php - 如何在订单codeigniter中验证表单

> ID：13949859
> 
> 赞同：-3
> 
> 时间：2012-12-19T10:05:49.213
> 
> 标签：php, codeigniter, validation

我想像 Google 一样验证我的登录表单。

先查用户名再查密码；如果两者都为空，则用户名框上只有一个错误。

在 CodeInginter 中，如果两者都是空的，它会打印每个字段是必需的消息。

我们可以用 CodeIgnightor 轻松模仿这个功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:54:28.523

像这样试试

```
 $this->form_validation->set_rules('email', 'Email', 'required');

   if ($this->form_validation->run() == FALSE){

    $this->load->view('myform');

   }else{
     $this->form_validation->set_rules('passconf', 'Password Confirmation', 'required');
     if($this->form_validation->run() == FALSE){
       $this->load->view('myform');
     }
     $this->load->view('formsuccess');
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:20:35.967

you need to research before you post some question. These kind of information available in codeIgniter user guide. Any way i am providing simple example.

View file: login.php

```
 <form action="<?php echo ROOT_FOLDER ?>/controller_name/post_login" method="post" >
                    <p>
                        <label>Email:</label> <?php echo form_error('email'); ?><br />
                        <input type="text" class="text" name="email" value="<?php echo set_value('email'); ?>" />
                    </p>

                    <p>
                        <label>Password:</label> <?php echo form_error('passwd'); ?><br />
                        <input type="password" name="passwd" class="text" value="" />
                    </p>

                    <p>
                        <input type="submit"  class="submit" value="Login" />                               

                    </p>
    </form> 
```

Controller function which is written in controller file..........

```
 public function post_login()
    {

        $error_in_validation=set_form_validation($this->config->item('login_form'));

        if($error_in_validation){
            show_form_validation_error('controller_file_name/login');
        }
        else
        {
            $email=$this->input->post('email');
            $passwd=$this->input->post('passwd');
            $ret=$this->model_file_name->user_login($email, $passwd);

            if($ret == NULL){

                $model=array();
                $model['error_msg']=$this->config->item('login_form_error_code_1');;
                $this->load->view('controller_file_name/login',$model);             
            } else {
                redirect("ro_manager/home");
            }

        }

    } 
```

After this you need to create you need to create a file name called form_validation in config folder. In that you need to write the validation rules as per user guide.

```
 $config['login_form'] = array (
                        array 
                        (
                            'key' => 'email', 
                            'value' => 'Email',
                            'rule' => 'trim|required|valid_email|xss_clean'
                        ),
                        array
                        (
                            'key' => 'passwd', 
                            'value' => 'Password',
                            'rule' => 'trim|required|alpha_numeric|xss_clean'
                        )
                      ); 
```

# mysql - php和mysql显示列名

> ID：13949867
> 
> 赞同：-1
> 
> 时间：2012-12-19T10:06:04.327
> 
> 标签：mysql

我有以下字段的表

```
+----+------+----------+----------+----------+
| id | name | sports_1 | sports_2 | sports_3 |
+----+------+----------+----------+----------+
|  3 | jack |        1 |        0 |        1 |
+----+------+----------+----------+----------+ 
```

我只想显示包含 1 的列名。得到以下结果。

```
Jack does sport_1 sports_3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T10:13:05.637

你真正想要的是另一个表结构。我会详细说明一下。

您所描述的事物是多对多关系。您在列中拥有的运动实际上应该包含在另一个名为“sports”的表中，并且在“users”表和“sports”表之间，您有一个名为“users_to_sports”的新表将两者连接起来。

检查[http://sqlrelationship.com/many-to-many-relationship/](http://sqlrelationship.com/many-to-many-relationship/)以获得更深入的解释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:58:01.443

这只是解决方法，您可以按照 chrisR 所说的那样更改表格的结构

但是，如果您愿意，可以在这里查看，如果它对您有帮助。

```
 $con = mysql_connect("localhost","root","admin");
     if (!$con)
             {
              die('Could not connect ya rafik : ' . mysql_error());
              }
   mysql_select_db("mydatabase", $con);
   $query = mysql_query("SELECT * FROM mytable2 ORDER BY name ");

   // please use PDO or mysqli instead. 
```

然后你像这样通过php管理结果

```
 while ($column_data = mysql_fetch_assoc ($query)) {
          echo $column_data['name']." does : ";
        if ($column_data['sports_1'] == 1 ){echo "  Sport1  ";} else {}
        if ($column_data['sports_2'] == 1 ){echo "  Sport2  ";} else {}
        if ($column_data['sports_3'] == 1 ){echo "  Sport3  " ;} else {}
           echo "<br />" ;

      } 
```

数据库是这样的

```
id  name    sports_1    sports_2    sports_3
1   Mark      1               0         1
2   John      0               1         1 
```

结果将是这样的：

```
 John does : Sport2  Sport3
    Mark does : Sport1  Sport3 
```

# javascript - 如何删除除一个以外的所有元素？

> ID：13949868
> 
> 赞同：5
> 
> 时间：2012-12-19T10:06:07.307
> 
> 标签：javascript, raphael

我想从我的画布中删除所有元素，除了我点击的那个。我创建了一个集合，将所有元素放入其中并删除该集合：

```
button.click(function () {
    var to_remove = paper.set();    
    paper.forEach(function (el) {
        to_remove.push(el);
    });         
    to_remove.remove();
}); 
```

但是我没有成功测试我的元素是否是我的按钮。

阿克塞尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:32:49.357

您可以简单地缓存单击的元素并在循环期间进行比较。

```
button.click(function() {
    var clickedEl = this,
        toRemove = paper.set();

    paper.forEach(function(el) {
        if (el !== clickedEl) {
            toRemove.push(el);
        }
    });

    toRemove.remove();
});​ 
```

演示：http: [//jsfiddle.net/yRNNe/](http://jsfiddle.net/yRNNe/)

# php - jquery datepicker 不能在 smarty 上工作

> ID：13949870
> 
> 赞同：0
> 
> 时间：2012-12-19T10:06:32.653
> 
> 标签：php, jquery, smarty

### 链接提供

```
<link rel="stylesheet" href="http://localhost/assetbox/resources/themes/Charcoal/css/jquery-ui.css" />
<script type="text/javascript" src="http://localhost/assetbox/resources/javascript/jquery/jquery-1.8.3.js"></script>
<script type="text/javascript" src="http://localhost/assetbox/resources/javascript/jquery/jquery-ui.js"></script> 
```

### html标签

```
<div class="box col-6 formfield">
<input type="text" maxlength="50" name="cal" value="" class="" id="datepicker" > 
        </div>

 <script type="text/javascript"> 
            {literal}

            jQuery(function($){
                $( "#datepicker" ).datepicker();

            });

            {/literal}
    </script> 
```

我下载的链接：`http://jqueryui.com/datepicker/`

注意：-它在 localhost 上工作正常，但是当我在 pixaria(www.pixaria.com) 中使用 smarty 时它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T07:35:59.610

```
<script type="text/javascript"> 
        {literal}

        $(function(){
            $( "#ds" ).datepicker({ dateFormat: "dd-mm-yy" });

        });

        {/literal}
    </script> 
```

更正：

# azure - 安装登录名和密码后 DotNetNuke Azure 加速器在网站上不起作用

> ID：13949871
> 
> 赞同：1
> 
> 时间：2012-12-19T10:06:35.257
> 
> 标签：azure, dotnetnuke

DotNetNuke Azure Accelerator 似乎安装没有任何问题。我检查了日志，所有事件都成功了。然后我尝试登录，但我为数据库提供的登录详细信息似乎不起作用。我是否错过了重要的一步。登录详细信息是如何创建的，它们位于何处以登录到由 DotNetNuke Azure 加速器创建的 DotNetNuke 站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:43:58.613

自动安装似乎有一个默认的用户名和密码。我的 DotNetNuke Azure 设置没有任何问题。

# jquery - 切换按钮/切换器以打开 URL

> ID：13949873
> 
> 赞同：1
> 
> 时间：2012-12-19T10:06:38.090
> 
> 标签：jquery, button, slider

我有这个jQuery：

```
<div class="slider-frame">
    <span class="slider-button">Change</span>
</div> 
```

```
$('.slider-button').toggle(function() {
    $(this).addClass('on').html('Home');
},function(){
    $(this).removeClass('on').html('Away');
});​ 
```

有关完整代码，请参见此[小提琴](http://jsfiddle.net/vY7SQ/155/)。

我需要当用户更改按钮状态（主页 -> 离开，反之亦然）时，它会打开一个 URL，例如，当我在 Away 上滑动时，我需要打开`www.mysite.com/away`，当我在“Home”上滑动时它会打开`www.mysite.com/home`。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:11:40.607

“开放”是一个广义的术语。你可以这样做：

```
$(this).addClass('on').html('Home');
window.location = '/home/'; 
```

...但这会重新加载页面。你的意思是打开一个弹窗？

```
window.open('/home/'); 
```

...或者您是否要重新加载页面并保持选中切换？您可以使用 cookie 或查看页面加载时的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:12:54.943

`window.location`会将用户定向到同一窗口中的 url，而`window.open()`将在新窗口中打开它。

见小提琴：http: [//jsfiddle.net/vY7SQ/157/](http://jsfiddle.net/vY7SQ/157/)

仅供参考——这不是 jQuery 代码，而是纯 JS——所以即使没有附加 jQuery，你也可以使用它。

不过，我很好奇——如果用户一点击就会被引导离开它，那么拥有一个很酷的动画切换滑块开关有什么意义呢？也许您正在尝试将新内容加载到当前页面而不（重新）加载页面？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:32:02.377

查看是否要在当前页面打开另一个页面使用 ajax 或 iframe：

```
$('.slider-button').click(function() {
    if ($(this).text() == "Change" || $(this).text() == "Away") {
        $(this).addClass('on').html('Home');
        $('#yourdivToloadContent').load('mysite.com/products/home');
    } else if ($(this).text() == "Home") {
        $(this).removeClass('on').html('Away');
        $('#yourdivToloadContent').load('mysite.com/products/away');
    }
}); 
```

签出小提琴：http: [//jsfiddle.net/WM8xS/](http://jsfiddle.net/WM8xS/)

# sql-server-2008 - 使用 BULK INSERT 未正确导入重音字符

> ID：13949875
> 
> 赞同：2
> 
> 时间：2012-12-19T10:06:48.323
> 
> 标签：sql-server-2008, csv, character-encoding, bulkinsert

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-03T10:00:24.067

In my case I can fix the encoding problem with the CODEPAGE option:

```
BULK
INSERT #CSV
FROM 'D:\XY\xy.csv'
WITH
(
   CODEPAGE = 'ACP',
   DATAFILETYPE ='char',
   FIELDTERMINATOR = ',',
   ROWTERMINATOR = '\n',
   FIRSTROW = 2
) 
```

Possible values: CODEPAGE = { 'ACP' | 'OEM' | 'RAW' | 'code_page' } ]

You can find more information about the option here: [BULK INSERT](https://msdn.microsoft.com/en-us/library/ms188365.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T16:18:07.043

It was answered in the comment. Did you try it?

[http://msdn.microsoft.com/en-us/library/ms189941.aspx](http://msdn.microsoft.com/en-us/library/ms189941.aspx)

Option DATAFILETYPE ='widenative'

Based on comment from Esailiga did the text get truncated before or after the bulk import. I agree it sounds like the CSV file itself is single byte. Unicode requires option DATAFILETYPE ='widenative'. If the CSV file is single byte the is not magic translation back.

What is too bad is é is extended ASCII and supported with SQL char so more evidence the problem is at the CSV.
SELECT CAST('é' AS char(1))
notice this works as extended ASCII (<255)

Sounds like you need to go back to the source.

The ? in SQL is unknown. Same as � in notepad.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-06T13:54:43.027

I still cannot believe that after all these years Microsoft has not fixed this obvious bug. There should be no problem with èéêë etc because they are all ascii(<255). This quest is posed over and over again on many sites and the question has yet to be answered

My data is in a table in excel. having generated the insert into statements the table is parsed a 2nd time looking for asccii > 'z' and generating and update table set column statement to overwrite the imported data. Cumbersome but workable

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-06T15:18:42.173

I've done it! After all these years and we were all looking in the wrong place. No work needed no rewriting scripts...

The problem lies with SSMS... if you "New Query" by right-clicking on "Queries" you get to rename the file but not create it that is done for you...

But... if you "Ctrl+N" you get a new query window to edit but no file is created... So you save it yourself and choose encoding on the save button... towards the bottom of the list you'll find UTF-8(without signature) codepage 65001

And that is it...

script after script open a new query window with "ctrl+N" copy and paste from an existing query and save as directed above. And as if by magic it works

If like me you have tables in Excel... parse the table writing the output to the 1st column of a new workbook with 1 sheet in it and then saveas and choose utf-8 encoding

Speed things up with a template file containing a comment "-- utf-8" something like that. save it as utf-8 and use a file listing of *.sql pasted into excel to concatenate a list of =concatenate("ren templatefile.txt ", char(34), a1, char(34)) in b1 and drop it down

After all these years of manual solutions I am literally sweating with excitement at the discovery. Thank you for getting me so upset

# javascript - 骨干collection.add 不工作

> ID：13949882
> 
> 赞同：6
> 
> 时间：2012-12-19T10:07:12.380
> 
> 标签：javascript, backbone.js, underscore.js

我有一个非常基本的设置，如下所示：

```
var MusicModel = Backbone.Model.extend({});
var PlaylistCollection = Backbone.Collection.extend({
    model: MusicModel,
    events: {'add':'add'},
    add: function(mdl){
        //This is working perfectly fine even output of model
        console.log(mdl);
    }
});

var playlistCollection = new PlaylistCollection();
playlistCollection.add(new Music(data)); 
```

该模型实际上并未添加到集合中。如果我尝试使用 Chrome 控制台并输入`playlistCollection.length`，它将输出 0 并`playlistCollection.models`输出`[]`.

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T10:13:38.490

Backbone 中的集合已经有一个[add 方法](http://backbonejs.org/#Collection-add)。通过编写自己的方法，您可以屏蔽基本方法并阻止正常行为：将模型插入集合中。将您的方法重命名为其他名称或调用基本方法来解决您的问题：

```
var PlaylistCollection = Backbone.Collection.extend({
    model: MusicModel,

    add: function(model, opts){
        Backbone.Collection.prototype.add.call(this, model, opts);
        console.log(model);
    }
}); 
```

[http://jsfiddle.net/nikoshr/WPrTu/](http://jsfiddle.net/nikoshr/WPrTu/)

# qt - mingw 忽略“-L”标志

> ID：13949889
> 
> 赞同：-1
> 
> 时间：2012-12-19T10:07:26.217
> 
> 标签：qt, gcc, mingw, qmake

我在 下遇到链接器故障`MinGW`，但是我不明白为什么。这是链接命令：

> g++ -shared -mthreads -Wl,--out-implib,C:\Users\camm\Syren\libs\libSy_polyMesh.a -o C:\Users\camm\Syren\libs\Sy_polyMesh.dll 调试/Sy_polyMesh.o 调试/moc_Sy_polyMesh.o 调试/qrc_Sy_polyMesh.o -L"c:\Qt\4.8.4\lib" -lglu32 -lopengl32 -lgdi32 -luser32 -LC:\Users\camm\Syren/libs -lSyren -lglew32 -lboost_system -lQtSvgd4 -lQtSqld4 -lQtOpenGLd4 -lQtGuid4 -lQtCored4

`undefined reference`错误来自`Syren`dll（我应该声明该命令是由 自动生成的）`qmake`。由于`-LC:\Users\camm\Syren/libs`正斜杠和反斜杠的混合，看起来对我来说是畸形的，但如果我手动将它们设置为一种或另一种方式 - 它不会改变编译器输出。

我之前遇到了我需要的第 3 方库（特别是 GLEW 和 Boost）的问题，但因为它们相对“恒定”，所以我将它们放在我的`C:\MinGW\lib`目录中没有问题。但这真的不是我的插件的选择。

我发现 MinGW[文档](http://www.mingw.org/wiki/HOWTO_Specify_the_Location_of_External_Libraries_for_use_with_MinGW)在几个位置声明：

> ...因为可以始终使用 -L 选项指定合适的搜索路径。
> 
> ...但是 GCC 本身通过提供适当的 -L 选项来提供有效的默认值。

然而，`C:\Users\camm\Syren\libs`是`Syren.dll`住哪里！

**编辑：** 这是我`.pro`文件中的 LIBS 声明：

```
LIBS += -L$(SYREN_PATH)/libs \
    -lSyren
win32 {
    LIBS += -lglew32 \
            -lboost_system
} 
```

并`$(SYREN_PATH)`扩展为`C:\Users\camm\Syren`。我还可以看到 中的“缺失”符号`Syren.dll`，例如：

> C:\Users\camm\Documents\Syren\Sy_polyMesh_debug/../Sy_polyMesh/src/Sy_polyMesh.cpp:341：未定义对“Sy_GLBuffer::unbind()”的引用

可以看到列举如下：

> 6c500bd6 T _ZN11Sy_GLBuffer6unbindEv

**编辑2**

在向链接器阶段添加详细标志后，我注意到链接器正在遍历每个搜索路径，然后遍历每个库命名约定，并使用它可以打开的第一个。

```
attempt to open C:\Users\camm\Syren/libs/libSyren.dll.a failed
attempt to open C:\Users\camm\Syren/libs/Syren.dll.a failed
attempt to open C:\Users\camm\Syren/libs/libSyren.a succeeded 
```

假设`libSyren.a`可能被破坏，我将其重命名以强制链接器使用`.dll`：

```
attempt to open C:\Users\camm\Syren/libs/libSyren.dll.a failed
attempt to open C:\Users\camm\Syren/libs/Syren.dll.a failed
attempt to open C:\Users\camm\Syren/libs/libSyren.a failed
attempt to open C:\Users\camm\Syren/libs/Syren.lib failed
attempt to open C:\Users\camm\Syren/libs/libSyren.dll failed
attempt to open C:\Users\camm\Syren/libs/Syren.dll succeeded 
```

但我仍然收到完全相同的错误消息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:29:26.340

如果您正在链接正确的 DLL，并且链接器没有抱怨缺少文件，则 dll 可能缺少导出以允许链接。

`lib*.a`如果 MinGW 链接器正确导出符号，它可以直接链接到 DLL，尽管仍然建议链接到名为or的导入库（应该在 qmake 构建中创建）`lib*.dll.a`。我相信链接器会寻找带前缀和不带`lib`前缀的变体，但我不确定，应该自己测试一下。

您可以使用`objdump`和/或检查 DLL 导出的符号`nm`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:49:15.197

如果链接器没有抱怨无法加载`Syren dll`，则意味着文件已正确加载......符号只是丢失到`Syren dll`（未导出？）......为什么如果没有更多信息就很难判断

当您构建 Syren 库时，您是否对缺少原型有任何警告？Syren lib 使用什么，没有什么不可移植或需要 Windows dll？你能给出缺失符号的列表吗？

**编辑：**你是如何编译的`Syren.dll`？你用的是明威吗？您将什么选项传递给编译器/链接器？我建议阅读这两个链接：

*   [http://www.mingw.org/wiki/sampleDLL](http://www.mingw.org/wiki/sampleDLL)
*   [http://www.mingw.org/wiki/CreateImportLibraries](http://www.mingw.org/wiki/CreateImportLibraries)

如果要导出 C++ 函数，则必须在程序和 DLL 之间使用相同的编译器。或者，您可以使用 C 风格的包装函数来封装 C++ ABI。

关于这个主题的一篇非常好的文章：http: [//www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:50:56.003

当你替换`$(SYREN_PATH)`为时会发生什么`$${SYREN_PATH}`？因为前一种表示法表示[执行 Makefile 时环境变量](https://stackoverflow.com/a/7754767/1122645)`$()`的内容。

请参阅[qmake 变量参考。](http://qt-project.org/doc/qt-4.8/qmake-advanced-usage.html#variables)

# java - 我应该使用 slf4j 作为 logback 的包装器吗？

> ID：13949899
> 
> 赞同：3
> 
> 时间：2012-12-19T10:07:49.190
> 
> 标签：java, logging, log4j, slf4j, logback

假设有一个应用程序`log4j` *直接*使用，即没有`slf4j`或任何其他包装器。现在我想`log4j`用`logback`. 我应该使用`slf4j`（或任何其他包装器）吗？什么被认为是“良好做法”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:23:37.030

您当然应该使用 slf4j API，如果您以后决定返回 log4j 或其他方式，您只需要更改 slf4j 桥接器，您的应用程序日志代码将无需更改即可工作。此外，如果你访问[http://www.slf4j.org/](http://www.slf4j.org/)你会看到 slf4j 将 Logback 视为其原生实现，Logback 实际上原生实现了 SLF4J API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:34:25.173

正如 Evgeniy Dorofeev 所提到的，logback 原生实现了 slf4j-api。这意味着通过 slf4j-api（即通过实例）调用 logback 记录器`org.slf4j.Logger`根本不会产生任何开销。您可以直接调用类型的记录器`ch.qos.logback.classic.Logger`而不是这样做，`org.slf4j.Logger`但这样做不会提供任何优势，但如果您选择这样做，可能会使迁移到不同的日志记录框架变得更加困难。

顺便说一句，slf4j 不是 logback 的*包装器*，因为 logback 是根据 slf4j-api 实现的。

为了简化向 SLF4J 的迁移，有一个用于将[源代码迁移到 slf4j](http://www.slf4j.org/migrator.html)的工具。对于您无法修改的代码，有log4j、java.util.logging 和 commons-logging 的[桥梁](http://slf4j.org/legacy.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:33:33.837

您可以使用`log4j-over-slf4j.jar`代替“真正的”Log4J 进行迁移，而无需更改任何代码。这向其客户端提供了与 Log4J 相同的 API，但将日志记录调用定向到 SLF4J，而 SLF4J 又可以将它们发送到 logback。

但是，如果您可以选择修改代码，那么我建议您将其更改为使用 SLF4J，然后您可以根据需要交换任何后端（logback、log4j 等）。你不能做的一件事是尝试与`log4j-over-slf4j`Log4J 后端结合......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T11:31:37.100

无论实际的日志记录后端如何，使用 SLF4J api 都有一个很好的理由，即

```
 log.debug("Foo: {}, Bar: {}", foo, bar); 
```

参数构造。Log4j 总是需要一个完整的字符串来记录，这就是为什么你需要围绕`if`s 来查看是否为昂贵的字符串启用了语句。SLF4J 在进行检查之前不调用 foo.toString() 或 bar.toString() ，因此禁用调用很便宜。

因此，我建议将您的源代码迁移到 slf4j 并在 slf4j 下载中使用适当的网桥以使用 log4j 作为后端。这将允许您像现在一样继续操作，无需进一步更改。然后，如果需要，您可以将后端切换到 logback。

# java - Android，在TextView中显示格式化的edittext

> ID：13949904
> 
> 赞同：4
> 
> 时间：2012-12-19T10:08:07.847
> 
> 标签：java, android

> **可能重复：**
> [设置 TextView 样式（粗体或斜体）](https://stackoverflow.com/questions/6200533/set-textview-style-bold-or-italic)

我正在尝试在我的应用程序中实现类似 Evernote 的 TextEditor。使用此代码，我设法制作了一个带有粗体、斜体、颜色、大小等选项的 EditText。 [我的链接在这里](http://code.google.com/p/android-richtexteditor/)

一旦保存了 EditText 的内容（它保存在 SqlLite 中），我应该能够在 TextView 中查看它。问题是我可以看到我的内容（从 EditText 保存），但没有指定格式（颜色、粗体、斜体）。

有关如何显示此格式化文本的任何建议？有知道的教程吗？

# html - 覆盖html5画布中lineto方法的视口属性

> ID：13949907
> 
> 赞同：1
> 
> 时间：2012-12-19T10:08:27.240
> 
> 标签：html, html5-canvas, screen-orientation

我在我的 iPad 应用程序中使用了视口。这里是：

```
meta name="viewport" content="width=device-width, initial-scale=1; maximum-scale=1.0; user-scalable=0; 
```

而且，我编写了一个代码来在 HTML5 画布上画线。

我正在创建画布：

```
var mycanvas = document.getElementById('canvasId');
var context = canavas.getContext('2d');

.. 
```

如果画布以纵向模式创建并且线条也以纵向模式绘制，则工作正常。但是如果我们改变方向，鼠标移动和画布上绘制的线条之间会有一些差距。当我从我的 html 代码中删除视口行时，它工作正常，但不使用视口，一切看起来都很糟糕。到处都建议在应用程序中使用视口。任何方式。

任何帮助，将不胜感激。

谢谢

# asp.net - SQL 语句性能审查

> ID：13949909
> 
> 赞同：1
> 
> 时间：2012-12-19T10:08:36.343
> 
> 标签：asp.net, entity-framework, sql-server-2005

我有 .NET Entity Framework 3.5 生成的 SQL 语句（已经在 EF 3.5 上进行了优化，我们将很快升级到 4），并在 2005 SQL Server 上运行。我知道有很多文章一般都在谈论 SQL 性能，但是我没有找到针对我的问题的具体解决方案。我需要针对这种情况的参考或解决方案：在 ASP.NET 应用程序中，有一个包含某些信息的表（例如 6-7 列），当用户对表执行排序操作时，需要 7-15检索信息的秒数（......这是糟糕的性能，因为应用程序是业务内部的）。

我从文章中运行了 usp_Worst_TSQL： [http](http://www.databasejournal.com/features/mssql/article.php/3802936/Finding-the-Worst-Performing-T-SQL-Statements-on-an-Instance.htm) ://www.databasejournal.com/features/mssql/article.php/3802936/Finding-the-Worst-Performing-T-SQL-Statements-on-an-Instance.htm我了解性能问题的来源：有几个嵌套查询使用 WHERE、INNER & LEFT JOIN 和 ORDER BY 子句。

为语句中的 SQL 语句子句创建索引有哪些注意事项？我什么时候需要制作复合索引？

编辑：我设法从问题所在得到一个想法。我在代码中有这个 LINQ 和 foreach 循环，它需要 3 整秒来获取数据：

```
foreach (string status in searchObj.Statuses)
{
from f in tblFormsQO
where f.tblFormStatus.Count > 0 && f.tblFormStatus.Count(s => s.StatusDate == null) == 0
&& f.tblFormStatus.OrderByDescending(s => s.StatusDate).FirstOrDefault().CurrentStatus.CodeDesc == status
select f
} 
```

现在， f 不是一个大实体（我确实需要它的所有属性）。有什么方法可以让它表现得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:19:33.557

该 foreach 循环平均迭代了多少次？您可以先将数据加载到内存中，然后对缓存的数据使用 linq，这将比 foreach 可能生成的多个 sql 语句快得多。

这可能无法解决问题的根源，而只是我可以根据我所看到的提出的建议。

编辑：

您最初的问题与索引的考虑有关。我会找出发送的实际查询是什么，然后自己在 SQL Management Studio 中运行它们，并打开生成执行计划的选项。这样，您就可以从 SQL 获得有关索引的建议，这些建议可能会加快查询速度。

As for considerations about adding indexes in general, it's only an issue if you're worried about speed of inserting/deleting data. The more indexes you have the more it will slow those operations down. Otherwise, add all the indexes you like. And make sure you have a clustered index as that will potentially speed all your other indexes up.

# c++ - 如果非零，C++ 增加 std::atomic_int

> ID：13949914
> 
> 赞同：8
> 
> 时间：2012-12-19T10:08:50.340
> 
> 标签：c++, c++11, atomic

我正在实现一个指针/弱指针机制，使用`std::atomic`s 作为引用计数器（像[这样](https://stackoverflow.com/a/5671308/220918)）。为了将弱指针转换为强指针，我需要原子地

*   检查强引用计数器是否非零
*   如果是这样，增加它
*   知道某事是否发生了变化。

有没有办法做到这一点`std::atomic_int`？我认为必须可以使用其中之一`compare_exchange`，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:10:30.413

给定定义`std::atomic<int> ref_count;`

```
int previous = ref_count.load();
for (;;)
{
    if (previous == 0)
        break;
    if (ref_count.compare_exchange_weak(previous, previous + 1))
        break;
} 
```

`previous`将保持以前的值。请注意，`compare_exchange_weak`如果失败，将更新以前的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:11:00.460

这应该这样做：

```
bool increment_if_non_zero(std::atomic<int>& i) {
    int expected = i.load();
    int to_be_loaded = expected;

    do {
        if(expected == 0) {
            to_be_loaded = expected;
        }
        else {
            to_be_loaded = expected + 1;
        }
    } while(!i.compare_exchange_weak(expected, to_be_loaded));

    return expected;
} 
```

# css - Rails 资产：重置引导 css 属性，使它们不会与谷歌代码的美化器冲突

> ID：13949917
> 
> 赞同：1
> 
> 时间：2012-12-19T10:09:03.677
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, pretty-print

我正在尝试将 Bootstrap 和 google 代码更漂亮地结合使用，但最终结果相当令人失望。在`Gemfile`：

```
gem 'bootstrap-sass', '~> 2.2.1.1'
gem 'google-code-prettify-rails' 
```

在`application.css`：

```
*= require bootstrap
*= require google-code-prettify-rails/prettify 
```

在`application.js`：

```
//= require bootstrap$
//= require google-code-prettify-rails/prettify
//= require google-code-prettify-rails/lang-sql 
```

我`prettyPrint()`从 .coffee 脚本加载运行：

```
jQuery ->
  prettyPrint() 
```

一切正常，`<code class="prettyprint lang-sql">...</code>`格式化。但唉，格式化它的 CSS 是 Bootsrap 的 CSS 和漂亮的打印主题 CSS 的混合体，它显示......丑陋。Element Inspect 显示来自 Bootstrap 应用的样式：

```
/* line 8, .../bootstrap-sass-2.2.1.1/vendor/assets/stylesheets/bootstrap/_code.scss */
code,
pre {
  padding: 0 3px 2px;
  font-family: Monaco, Menlo, Consolas, "Courier New", monospace;
  font-size: 12px;
  color: #333333;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
}

/* line 17, .../bootstrap-sass-2.2.1.1/vendor/assets/stylesheets/bootstrap/_code.scss */
code {
  padding: 2px 4px;
  color: #d14;
  background-color: #f7f7f9;
  border: 1px solid #e1e1e8;
} 
```

我的问题是

*   有没有办法防止资产管道包含 Bootstrap 自己的`_code.scss`？
*   如果没有，我如何重置 Bootstrap 的应用样式？

# visual-c++ - 具有二元特征的词袋

> ID：13949920
> 
> 赞同：3
> 
> 时间：2012-12-19T10:09:13.220
> 
> 标签：visual-c++

大家，我现在想用词袋模型测试二进制特征（ORB，BRIEF）。由于 Opencv 中的模型似乎没有为 BOW 提供二进制特征。我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-20T13:45:17.547

这家伙[在这里](http://www.morethantechnical.com/2011/08/25/a-simple-object-classifier-with-bag-of-words-using-opencv-2-3-w-code/)使用 SURF 检测器和描述符。您可以将 SURF 替换为 ORB。

谷歌“弓 opencv”。

# eclipse - Eclipse：项目属性不显示构建路径

> ID：13949928
> 
> 赞同：10
> 
> 时间：2012-12-19T10:09:33.073
> 
> 标签：eclipse, build, classpath

我的 Eclipse 没有在我的 Java 项目的属性中显示“Java 构建路径”选项。属性屏幕截图附在下面。这可能是什么原因？在左侧应该有一个“Java Build Path”选项。

![构建路径不可用](../Images/ac1256c3e21554fa03aa1930467f10ab.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-08-11T14:06:36.600

要解决此问题，请遵循以下选项

1）转到项目**根目录**2）从**属性**中 选择“**项目方面**” 3）检查“ **Java** ”

 ****这解决了问题

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-04-26T16:35:48.217

我处于同样的情况，并为此找到了两种不同的解决方案。

1.  右键单击该`src`文件夹并检查是否可以看到配置构建路径的选项。之后，右键单击项目并执行 Maven > 更新项目。

如果这不起作用，

2.  右键单击项目 > 属性 > 项目构面，然后单击将项目转换为构面项目的链接。

右键单击该项目，点击刷新并检查您是否获得了现在配置构建路径的选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T10:31:32.050

您可能会从这些博客中获得一些帮助

[如何将构建器添加到给定项目](http://wiki.eclipse.org/FAQ_How_do_I_add_a_builder_to_a_given_project?)

或者查看这篇文章

[Eclipse 添加您自己的构建命令](https://stackoverflow.com/questions/2976610/eclipse-adding-your-own-build-command)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-20T10:59:09.050

尝试编译项目时遇到了同样的问题。解决方案是转到“运行配置”并选择正确的运行时 JRE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-30T10:52:58.967

使用Eclipse 中的**Project->Build Project**构建您的项目。这将自动将构建路径添加到您的项目中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-16T13:15:42.733

我不得不删除我的 maven .m2/repository 文件夹，这使我的构建路径重新出现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-06T08:22:43.940

确保您的项目的根目录包含`.classpath`和`.project`文件。

1.  该`.classpath`文件应如下所示 -

[![在此处输入图像描述](../Images/422ea9c4e0ba523555207f00f23a639e.png)](https://i.stack.imgur.com/LGhop.png)

2.  该`.project`文件应如下所示 -

[![在此处输入图像描述](../Images/31ef96b0e91e5b73e402d1fd4f12d956.png)](https://i.stack.imgur.com/iGiCN.png)

进行这些更改后，您应该能够在右键单击项目时看到正确的文件夹结构以及“构建路径”选项。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-19T11:53:51.317

如果它以前工作正常而现在不行，请检查您是在 Enterprise 选项卡还是 Navigator 选项卡中，因为如果您在 Navigator 选项卡中，它将无法工作。****

# java - 在 JScrollPane 中隐藏 JList

> ID：13949934
> 
> 赞同：-3
> 
> 时间：2012-12-19T10:09:55.087
> 
> 标签：java, swing, jscrollpane, jlist

当我尝试将`JList`可见性设置`false`为隐藏内容时，我发现当我向下滚动时列表并没有完全隐藏。我试过`validate()`and `repaint()`of `JList`, `JScrollPane`and `JPanel`( `MainPanel`)，但没有改变，我也试过这个：

```
jScollPane.setVerticalScrollBarPolicy(
    javax.swing.ScrollPaneCantants.HORIZONTAL_SCROLLBAR_NEVER); 
```

同样，没有结果。如果我向下滚动滚动条，列表的某些元素仍然可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:32:54.200

我看到至少有两种方法可以做到这一点：

1.  从滚动窗格中删除`JList`：`scrollPane.setViewPortView(null);`
2.  将模型设置为`JList`空模型：`list.setModel(new DefaultListModel());`

另一种选择是更改的滚动模式`JViewPort`：

```
scrollpane.getViewport().setScrollMode(JViewport.SIMPLE_SCROLL_MODE); 
```

但当然这根本没有效率。如果您使用该解决方案，当您再次使组件可见时，请确保也正确地将滚动模式重置为`BLIT_SCROLL_MODE`更`BACKINGSTORE_SCROLL_MODE`有效的模式。

# c# - 构建器之间的继承 - 如何处理类型？

> ID：13949938
> 
> 赞同：4
> 
> 时间：2012-12-19T10:10:04.410
> 
> 标签：c#, oop, design-patterns, builder

我在 C# 中有这个构建器（当然，示例被简化了）：

```
class BusBuilder
{
    Wheels mWheels = DefaultWheels;
    int mRoute = 0;

    public BusBuilder WithWheels(Wheels aWheels)
    {
        mWheels = aWheels;
        return this;
    }

    public BusBuilder WithRoute(int aRoute)
    {
        mRoute = aRoute;
        return this;
    }

    public Bus Build()
    {
        return new Bus { Wheels = mWheels, Route = mRoute };
    }
} 
```

它是这样使用的：

```
Bus bus = 
    new BusBuilder()
    .WithWheels(someWheels)
    .WithRoute(50)
    .Build() 
```

现在我想提取一个只包含一些方法的超类：

```
class VehicleBuilder
{
    Wheels mWheels = DefaultWheels;

    public VehicleBuilder WithWheels(Wheels aWheels)
    {
        mWheels = aWheels;
        return this;
    }
}

class BusBuilder : VehicleBuilder
{
    ...
} 
```

问题是现在我不能写

```
Bus bus = 
    new BusBuilder()
    .WithWheels(someWheels)
    .WithRoute(50)
    .Build() 
```

因为`WithWheels`返回 a`VehicleBuilder`而不是 a `BusBuilder`，因此没有定义`WithRoute`方法。

你会怎么设计这个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T10:16:55.090

当涉及到继承时，构建器模式有点让人头疼。你可以这样做：

```
class VehicleBuilder<T> where T : VehicleBuilder<T>
{
    private T @this;

    protected VehicleBuilder()
    {
        // Or pass it in as a constructor parameter
        @this = (T) this;
    }

    public T WithWheels(...)
    {
        return @this;
    }
} 
```

然后：

```
class BusBuilder : VehicleBuilder<BusBuilder>
{
    ...
} 
```

那时，您的`WithWheels`方法仍将返回 a `BusBuilder`，因此您仍然可以调用`WithRoute`.

您还需要`Build`在每个派生类构建器中使用一个新方法，请注意...

# java - 使用 Hibernate 的 Primefaces 数据表的延迟加载行计数错误

> ID：13949939
> 
> 赞同：0
> 
> 时间：2012-12-19T10:10:10.590
> 
> 标签：java, spring, hibernate, jpa

我正在尝试为我的 JSF 数据表实现延迟加载，我的应用程序正在使用 JSF2.0。春季 3 和休眠 4。

我在 DAO 中有以下内容

```
@Override
public int getRequestCount() {          
    Query query = entityManager.createNamedQuery("Request.count");
    return ((Long) query.getSingleResult()).intValue();
} 
```

在 ManagedBean 我有

```
@Named("reqMB")
@Scope("request")
public class RequestManagedBean implements Serializable {

// other code .....    
lazyModel.setRowCount(getRequestService().getRequestCount());
....
return lazyModel; 
```

在实体类

```
@Entity
@Table(name = "V_REQUESTS")
@NamedQueries({
    @NamedQuery(name = "Request.count", query = "SELECT COUNT(r) FROM <viewname> r")
})
public class Request { 
```

我面临的问题是，当我尝试将应用程序部署到 weblogic 10.3.6 时，出现以下异常。

```
Error creating bean with name 'requestDAOImpl': Injection of 
autowired dependencies failed; nested exception is
org.springframework.beans.factory.BeanCreationException: Could not 
autowire field: private org.hibernate.SessionFactory 
net.test.request.dao.RequestDAOImpl.sessionFactory; nested exception is
org.springframework.beans.factory.BeanCreationException: Error creating 
bean with name 'SessionFactory' defined in ServletContext resource 
[/WEB-INF/applicationContext.xml]: Invocation of init method failed; 
nested exception is org.hibernate.HibernateException: 
Errors in named queries: Request.count 
```

我该如何解决这个问题？

另一点不是使用以下内容，还有其他方法可以获取延迟加载的行数吗？

```
@NamedQueries({
    @NamedQuery(name = "Request.count", query = "SELECT COUNT(r) 
    FROM vw_request r")}) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:56:30.320

我已经设法解决了这个问题，我犯的错误是我使用了实际的视图名称而不是类名，所以我改为

```
@NamedQuery(name = "Request.count", query = "SELECT COUNT(r) FROM Request r"). 
```

我的另一个疑问是没有使用上面的方法来获取行数，我已经按如下方式修改了我的 DAO，因此我不需要在 Entity 类中使​​用 @NamedQuery。

```
int count = ((Long)sessionFactory.getCurrentSession().createQuery("select count(*) 
from Request").uniqueResult()).intValue(); 
```

# c# - 在字符串中使用@符号

> ID：13949941
> 
> 赞同：5
> 
> 时间：2012-12-19T10:10:20.840
> 
> 标签：c#, asp.net

[这个链接](http://msdn.microsoft.com/en-us/library/ms228362%28v=vs.80%29.aspx)说：

> @ 符号告诉字符串构造函数忽略转义字符和换行符。

我尝试`StringBuilder`像这样附加包含。

```
 StringBuilder sb = new StringBuilder();
   sb.Append(@"<test name="test_all">"); 
```

但它给出了一个错误`test_all`。

我使用单引号得到了解决方案。`' '`：

```
sb.Append("<test name='layout_all'>"); 
```

但根据文件，我不明白为什么`" "`不起作用。还是我缺少要理解的东西？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-19T10:11:36.660

好吧，`"`在逐字字符串文字中仍然具有特殊含义 - 您需要对其进行转义，但在这种情况下，您只需将其加倍：

```
sb.Append(@"<test name=""test_all"">"); 
```

# eclipse - Eclipse Maven：没有“从 SCM 签出 Maven 项目”选项

> ID：13949942
> 
> 赞同：15
> 
> 时间：2012-12-19T10:10:24.793
> 
> 标签：eclipse, maven, eclipse-plugin, subclipse

我必须编译并运行我的一些同事几年前开发的 Maven 项目。我在 Microsoft Windows Server 2008 上使用 Eclipse Helios。

在他们关于如何用 Eclipse 编译它的文档中，我读到我必须在我的 Eclipse 上安装：

*   Maven 插件（来自[http://m2eclipse.sonatype.org/sites/m2e](http://m2eclipse.sonatype.org/sites/m2e)）
*   Maven 插件额外（来自[http://m2eclipse.sonatype.org/sites/m2e-extras](http://m2eclipse.sonatype.org/sites/m2e-extras)）
*   Subclipse 插件 ( [http://subclipse.tigris.org](http://subclipse.tigris.org) )

安装这些插件后，他们的文档说选择“Checkout Maven Project from SCM”选项和其他操作。

我尝试安装这些插件，但首先，我意识到它们已经过时了。我发现 Maven Plugin 更改了名称和地址（现在是 Maven Integration for Eclipse 1.2），并且 Maven Plugin Extra 不再存在。相反，Subclipse 是可用的。

所以我安装了这些插件，但是，我的 Eclipse 上没有“从 SCM 签出 Maven 项目”功能。然后我在网上搜索解决了这个问题，我[在 StackOverflow.com 上找到了这个线程](https://stackoverflow.com/questions/13192393/eclipse-maven-doesnt-show-maven-project-from-scm)。它建议**为 Subclipse 安装 Maven SCM 处理程序**。我在 Elcipse 的插件存储库中搜索过它，**但它不再存在。**

我可以使用哪个 Eclipse 插件在我的 Eclipse IDE 上获取“从 SCM 签出 Maven 项目”功能？

非常感谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-19T10:42:23.430

当您转到 Window -> Preferences -> Maven -> Discovery 时，您有一个“打开目录”按钮，它会打开一个特定于 m2e 插件的插件市场。在那里你会找到一个名为 m2e-subclipse 的插件，它应该为你提供适当的选项：

![在此处输入图像描述](../Images/3742b01645030f76e9d8326b40ed705b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-30T10:06:40.443

将已安装的子版本更改为具有 m2 插件。然后在 maven 出现时查看。

**Eclipse Marketplace -> 已安装 -> Subversive SVN -> 更改 -> M2E 项目的 Subversive SVN 集成（可选）并安装它。**

见下图。 [![在此处输入图像描述](../Images/ef33ecbd786c9c183ba3f47fadf08d9c.png)](https://i.stack.imgur.com/beOMQ.png)

[![在此处输入图像描述](../Images/2843fe86ad3e2f90cebf1a81254c26d6.png)](https://i.stack.imgur.com/2ikCW.png)

[![在此处输入图像描述](../Images/fdb35bb7f7eb726ed8dbd050d6c4bd8b.png)](https://i.stack.imgur.com/3dGOh.png)

[![在此处输入图像描述](../Images/06bd25251e6e0613dd1816375f2dff3a.png)](https://i.stack.imgur.com/Dar1W.png)

[![在此处输入图像描述](../Images/5c3a6397cc9f94eb5f1ef6b068c4e9eb.png)](https://i.stack.imgur.com/y2KJy.png)

[![在此处输入图像描述](../Images/50627d0f3fa16d63b485851fce2d37bc.png)](https://i.stack.imgur.com/IXvTm.png)

[![在此处输入图像描述](../Images/ee4c54524ec3c653559e885136ef7e6c.png)](https://i.stack.imgur.com/bPB6r.png)

[![在此处输入图像描述](../Images/5046a0cb7366c61f0f7cf96d4b29caf6.png)](https://i.stack.imgur.com/yasqg.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-09T14:26:12.893

我最近遇到了同样的问题并找到了解决方案，因为这篇文章中提到的偏好技巧对我不起作用。您需要做的就是回到您的 SVN 安装（已测试颠覆性，猜测 subclipse 类似）并检查 m2e 集成插件。

在我的情况下：Eclipse Marketplace -> 已安装 -> Subversive SVN -> 更改 -> M2E 项目的 Subversive SVN 集成（可选）并安装它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-09T21:49:01.803

只是提醒任何人在 Eclipse 的未来版本中再次看到这一点。

Sonatype 不再维护这个：

您可以使用当前在 github [ [https://github.com/subclipse/m2e]](https://github.com/subclipse/m2e])中维护的分支： [https://dl.bintray.com/subclipse/releases/m2e/1.0.x/](https://dl.bintray.com/subclipse/releases/m2e/1.0.x/)

或者您可以使用 eclipse 版本的 eclipse 维护链接： [https ://download.eclipse.org/technology/m2e/releases/1.9/1.9.1.20180912-1601/](https://download.eclipse.org/technology/m2e/releases/1.9/1.9.1.20180912-1601/)

使用 Eclipse 中“Eclipse Marketplace”上方的“安装新软件”链接安装任一

[![Eclipse 安装](../Images/a76d5f0d195212cd138cd08a5ecddd84.png)](https://i.stack.imgur.com/Ku4Br.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-03T17:56:54.483

我有一个解决方法，因为我无法在 Window -> Preferences -> Maven -> Discovery 中找到 m2e-subclipse。您需要检查项目。完成后，右键单击 Project Explorer 和 Import->Maven- >Existing Maven Project 并选择已签出的项目并单击 Finish。

# c# - Entity Framework 中实体的内部访问使查询崩溃的 linq 变得简单

> ID：13949947
> 
> 赞同：5
> 
> 时间：2012-12-19T10:10:36.743
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, internalsvisibleto

我正在开发一个使用 EF 进行数据库访问的库。为了避免将实体暴露在库之外，我将所有表的访问权限设置为内部（我还将实体容器访问权限设置为内部）。问题是现在，在库中，当我尝试通过其 id 获取实体时，`Where`查询抛出异常，我不知道为什么。

内部访问已在图表（.edmx 文件）中设置，并且在我用作库内的工厂的静态类中，我有如下内容：

```
var id = 1234;
var mec = new MyEntitiesContainer();
var myEntity = mec.MyEntities.Where(e => e.MyEntitiesId == id).FirstOrDefault(); 
```

简单的 where 查询，通过其 id 从数据库中获取具体实体（行）。

当所有实体类访问都是公共的时，没有问题，但是当我将它们设置为内部时，会引发此异常：

```
System.ArgumentNullException: Value cannot be null.  Parameter name: source     
    at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-29T01:44:39.083

**更新！**实际上找到了一个更直接的解决这个问题的方法：

1.  在设计器中打开 edmx
2.  将“实体容器访问”设置为内部
3.  确保所有实体都将“访问”设置为公开
4.  展开 edmx 并编辑实体 t4（不是 *.Context.tt）
5.  在 t4 中搜索`Accessibility.ForType(entity)`并将其替换为`"Internal"`（或`"Friend"`用于 VB）
6.  保存/重新运行 T4 就可以了。

遵循这些步骤后，您的 EF 项目的任何部分都不应在程序集之外可见，并且一切都应该“正常工作”。

如果您仍然遇到“Value cannot be null”异常，请参阅本文底部的“gotcha”。

* * *

这已经在这里得到了回答：[c# DbSet - Internal object cannot be got](https://stackoverflow.com/questions/7636734/c-sharp-dbset-internal-object-cannot-be-got)

要点是，如果您将实体集/数据库集属性设置为内部属性，它将不会被 EF 自动实例化。但是您可以按照该页面上接受的答案中的描述手动实例化它。

* * *

另一个需要注意的问题：

VS2012 中存在一个错误（版本 11.0.60610.01 更新 3 是我当前的环境），即使它报告好像确实如此，设计师也不会在基础 edmx 文件中正确地将项目设置回公共。

因此，即使将项目设置回公共，重新运行上下文 t4 并重建，您仍然会收到该异常。

我发现的唯一解决方法是打开 edmx 文件并手动编辑它，将内部设置回公共。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:52:38.523

另一个命名空间中的代码如何设置命名空间中对象的属性？如果您考虑 EF 如何与您的代码位于不同的命名空间中，但在其中填充属性，我敢说这`public`有点必要。

# httpclient - 在 Fiddler 中看不到的 Http 请求以 NoHttpResponseException 结束

> ID：13949951
> 
> 赞同：0
> 
> 时间：2012-12-19T10:10:57.880
> 
> 标签：httpclient

我正在尝试使用 Apache HttpClient 从 Android 手机发送 Http 请求到通过 Fiddler 路由我的请求的服务器。对于某些请求，DefaultHttpClient.execute 会抛出 NoHttpResponseException，但在提琴手中根本看不到这个特定的请求。

如果我在没有 Fiddler 的情况下直接通过 wifi 引导流量，也会发生同样的事情。执行的代码通常可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:57:36.383

通过处理 NoHttpResponseException 并重新发送请求来解决此问题。当再次发送相同的请求时，一切正常。我很想知道这个问题的根本原因 - 但目前这对我有用。

# text - VHDL - 从另一个模块的输出信号制作时钟

> ID：13949955
> 
> 赞同：0
> 
> 时间：2012-12-19T10:11:04.677
> 
> 标签：text, keyboard, project, vhdl, clock

我正在修改我在网上[找到的一个简单的键盘界面以供我使用。](http://www.xess.com/projects/ps2_ctrl.pdf)这个想法是每当有一个新的扫描码时，它会使名为“Scan_Dav”的输出变高，然后变低。因此，当我将 Scan_Dav 作为时钟指向另一个模块时，只要按下新的 ScanCode，该模块的时钟就会有一个上升沿。我的思维方式有什么错误吗？因为我尝试了它并将扫描码和 scan_dav 定向到我的项目的其余部分 - 它与给定的扫描码并排写字母并在七段显示器上显示它们 - 显示的文本每个字符有 2 个（即当我写 FLY文本就像 FFLLYY）。如果没有错误，我将分享我的代码并询问您为什么它不起作用。谢谢 ：）

编辑：这是根据 Scan_Dav 的值进行移位的地方

```
signal bytes : std_logic_vector(63 downto 0);
signal Scan_Dav_Sync: std_logic_vector(1 downto 0):="00";
signal Previous_Scan_Dav: std_logic:='0';
begin
    process (clk) begin --, Scan_Dav) begin
        if rising_edge(clk) then
             Scan_Dav_Sync(0) <= Scan_Dav;
             Scan_Dav_Sync(1) <= Scan_Dav_Sync(0);
             Previous_Scan_Dav <= Scan_Dav_Sync(1);
             if (Previous_Scan_Dav = '0') and (Scan_Dav_Sync(1) = '1') then
                 bytes <= bytes (bytes'high-8 downto 0) & Data_in;
             end if;
          end if;
    end process; 
```

这是 Scan_Dav 的来源，代码取自[这里](http://www.xess.com/projects/ps2_ctrl.pdf)：（您可以忽略过滤部分）

```
 Architecture Behavioral of KeyboardController is
    signal PS2_Datr : std_logic;
    subtype Filter_t is std_logic_vector(7 downto 0);
    signal Filter : Filter_t;
    signal Fall_Clk : std_logic;
    signal Bit_Cnt : unsigned (3 downto 0);
    signal Scan_DAVi : std_logic;
    signal S_Reg : std_logic_vector(8 downto 0);
    signal PS2_Clk_f : std_logic;
    Type State_t is (Idle, Shifting);
    signal State : State_t;
    signal Scan_Code : std_logic_vector(7 downto 0);
    signal Flag : std_logic:='0';

    begin
        process (Clk,Reset)
        begin
            if Reset='1' then
                PS2_Datr <= '0';
                PS2_Clk_f <= '0';
                Filter <= (others=>'0');
                Fall_Clk <= '0';
            elsif rising_edge (Clk) then
                PS2_Datr <= PS2_Data and PS2_Data; -- also turns 'H' into '1'
                Fall_Clk <= '0';
                Filter <= (PS2_Clk and PS2_CLK) & Filter(Filter'high downto 1);
                if Filter = Filter_t'(others=>'1') then
                    PS2_Clk_f <= '1';
                elsif Filter = Filter_t'(others=>'0') then
                    PS2_Clk_f <= '0';
                        if PS2_Clk_f = '1' then
                            Fall_Clk <= '1';
                        end if;
                end if;
            end if;
        end process;

            -- This simple State Machine reads in the Serial Data
            -- coming from the PS/2 peripheral.
        process(Clk,Reset)
        begin
            if Reset='1' then
            State <= Idle;
            Bit_Cnt <= (others => '0');
            S_Reg <= (others => '0');
            Scan_Code <= (others => '0');
            Scan_Out <= (others => '0');
            Scan_Davi <= '0';
        elsif rising_edge (Clk) then

    --  if Scan_Davi = '1' then
    --      Scan_Davi <= '0';
    --  end if;

            case State is
                when Idle =>
                    Bit_Cnt <= (others => '0');
                    -- note that we dont need to clear the Shift Register
                    if Fall_Clk='1' and PS2_Datr='0' then -- Start bit
                        State <= Shifting;
                    end if;
                when Shifting =>
                if Bit_Cnt >= 9 then
                    if Fall_Clk='1' then -- Stop Bit
                        Scan_Code <= S_Reg(7 downto 0);

                        if (Flag = '1' and Scan_Code /= "11110000")  then 
                        --to ignore makecode
                            Scan_Out <= Scan_Code;
                            Flag <= '0';
                            Scan_Davi <= '1';
                        end if;

                        if (Flag = '0' and Scan_Code = "11110000") then
                        --to ignore F0
                            Flag <= '1';
                            Scan_Davi <= '0';
                        end if;

                        State <= Idle;
                    end if;
                elsif Fall_Clk='1' then
                    Bit_Cnt <= Bit_Cnt + 1;
                    S_Reg <= PS2_Datr & S_Reg (S_Reg'high downto 1); -- Shift right
                end if;
                when others => -- never reached
                    State <= Idle;
            end case;
        end if;
    end process;
        Scan_DAV <= Scan_DAVi;
end Behavioral; 
```

更新：唯一剩下的问题是字母和文本的延迟显示和移动。在编写 VHDL 时，按 V 后我什么也得不到，然后按 H 时我得到 V，就这样。在按下另一个键之前，最后一个字母不会出现。这似乎是关于 Scan_Dav 的问题，但我无法解决它是什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:58:06.753

从逻辑输出驱动时钟输入通常是不好的做法（一些 FPGA 架构根本不允许这样做）。时钟来自器件内部的专用时钟逻辑时运行最佳，良好的设计应尽量减少时钟数量。理想情况下，您只有一个，但这并不总是可能的。

与其从逻辑运行时钟输入，不如考虑从一个时钟运行所有内容，并仅在需要时使用“启用”来激活逻辑。在这种情况下，您将检测到下游模块内部的上升沿转换，`scan_dav`并且仅在该转换发生时才做出反应。`scan_dav`检测逻辑将使用与模块相同的时钟。

我认为这不能解释为什么你会看到双字符，你需要发布一些代码来分析。但是，我建议您重新工具以不从逻辑驱动时钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:08:20.440

如果我没看错，您在释放密钥时避免 F0，但您不过滤第二个扫描码。总是这样

Scancode --- 按 Key F0 --- 释放 Key Scancode

在某些键（例如 ALT GR）上，您也可以获得 E0。

它不是完整的描述，但显示了最重要的想法。 [http://en.wikipedia.org/wiki/Scancode](http://en.wikipedia.org/wiki/Scancode)

这将导致所描述的问题。飞 -> FFLLYY。

# c# - asp.net mvc post action post nothing

> ID：13949959
> 
> 赞同：1
> 
> 时间：2012-12-19T10:11:34.107
> 
> 标签：c#, asp.net-mvc

我的行动方法：

```
 [HttpPost, ActionName("Delete")]
    [RequiredPermissions(RequiredPermissionName, Operation.Delete)]
    public ActionResult DeleteConfirmed(User userWhoGone)
    {
        _db.Users.Remove(userWhoGone);
        _db.SaveChanges();

        this.TempData["msg"] = "Deleted User Id " + userWhoGone.Id;
        return RedirectToAction("Index");
    } 
```

删除.cshtml

```
@model NewsMonitoringWeb.Database.Models.User
@{
    ViewBag.Title = "User Delete";

<h2>User Delete</h2>
<h3>Are you sure you want to delete this user?</h3>

@Html.Partial("_PartialUser")

@using (Html.BeginForm()) {
    <p>
        <input type="submit" value="Delete" /> |
        @Html.ActionLink("Back to List", "Index")
    </p>
} 
```

_PartialUser.cshtml

```
@model NewsMonitoringWeb.Database.Models.User

<fieldset>
    <legend>User</legend>

    <div class="display-label">User Role</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.UserRole.Name)

    </div>

    <div class="display-label">FirstName</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.FirstName)
    </div>

    <div class="display-label">LastName</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.LastName)
    </div>

    <div class="display-label">Email</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.Email)
    </div>

    <div class="display-label">Is Contributor</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.IsContributor)
    </div>
</fieldset> 
```

我使用 chrome 检查发布的数据，我发现这种方法**没有**向服务器发布任何内容。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:21:35.803

您的表单没有要回发的值。您需要在表单中放置一些隐藏的输入值来构建用户，或者向表单添加隐藏的用户 ID 并更改发布操作方法。

后者将是我的首选方法，如下所示：

```
[HttpPost, ActionName("Delete")]
[RequiredPermissions(RequiredPermissionName, Operation.Delete)]
public ActionResult DeleteConfirmed(int userIdWhoGone)
{

    _db.Users.RemoveById(userIdWhoGone); // You may need to create this.
    // Atlernatively, get the user by id then call 'Remove()
    var user = _db.User.Find(userIdWhoGone);
    _db.Users.Remove(user);

    _db.SaveChanges();

    this.TempData["msg"] = "Deleted User Id " + userIdWhoGone;
    return RedirectToAction("Index");
} 
```

删除.cshtml

```
@model NewsMonitoringWeb.Database.Models.User
@{
    ViewBag.Title = "User Delete";

<h2>User Delete</h2>
<h3>Are you sure you want to delete this user?</h3>

@Html.Partial("_PartialUser")

@using (Html.BeginForm()) {
    <p>
        @Html.HiddenFor(m => m.Id) @* <--- New input *@
        <input type="submit" value="Delete" /> |
        @Html.ActionLink("Back to List", "Index")
    </p>
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T12:17:45.540

您目前根本没有发布任何内容。您的用户部分在表单之外。

表单中唯一的内容是您的按钮和链接。

您需要移动您的部分，使其位于表单内。

所以它现在看起来像这样：

```
@model NewsMonitoringWeb.Database.Models.User
@{
ViewBag.Title = "User Delete";

<h2>User Delete</h2>
<h3>Are you sure you want to delete this user?</h3>

@using (Html.BeginForm()) {
@Html.Partial("_PartialUser")    
<p>
    <input type="submit" value="Delete" /> |
    @Html.ActionLink("Back to List", "Index")
</p>
} 
```

编辑

您将需要向包含用户 ID 的部分添加隐藏输入，或者将部分保留在原处，然后在表单中放置隐藏输入。

然后，您需要更改操作以接受用户 ID 并在数据库上进行查找。

# sql - 如何在数据库中找到两个时期的集体范围

> ID：13949964
> 
> 赞同：0
> 
> 时间：2012-12-19T10:11:40.280
> 
> 标签：sql, database, date, date-range

我在数据库中有一个表，我想编写查询代码来选择两条记录之间的集体日期。

这是示例代码：

> 表是：

```
CREATE TABLE `user` (
  `userid` int(11) NOT NULL AUTO_INCREMENT,
  `startdate` date NOT NULL,
  `enddate` date NOT NULL,
  PRIMARY KEY (`userid`)
) 
```

示例 1，我在表中有 2 条记录。

> (userid =>1 , startdate => '2012-02-02' , enddate => '2012-10-02') (userid =>2 , startdate => '2012-04-02' , enddate => '2012 -09-02')

我想选择查询给出范围'2012-04-02'直到'2012-09-02'

示例 2，我在表中有 2 条记录。

> (userid =>1 , startdate => '2012-02-02' , enddate => '2012-02-12') (userid =>2 , startdate => '2012-04-02' , enddate => '2012 -09-02')

我想选择查询给出空范围

有没有最好的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:29:59.747

如果我做对了，并且您需要的时间段是这些行的时间段的交集：

```
select * from
(
    select max(startdate) d1, min(enddate) d2 from user
) where d1<=d2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:19:07.467

我想这就是你想要的

```
 select userid,min(startdate),max(enddate),abs(max(enddate)-min(startdate)) as range 
  from user group by userid; 
```

# google-drive-api - 以特定应用用户身份访问 GDrive

> ID：13949965
> 
> 赞同：0
> 
> 时间：2012-12-19T10:11:48.927
> 
> 标签：google-drive-api

我正在使用[特定于应用程序的帐户](https://developers.google.com/drive/service-accounts)使用 Google Drive 。如果能够访问使用此帐户登录的 GDrive UI，那就太好了。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:38:25.000

不可以，无法访问服务帐户的 Google Drive 网络用户界面。

# html - 给元素宽度不适合我

> ID：13949974
> 
> 赞同：1
> 
> 时间：2012-12-19T10:12:13.747
> 
> 标签：html, css

我有这张[表](http://jsfiddle.net/xBsxH/)，我想给第一个元素一个宽度，但它不起作用..

```
 <th style="width: 400px">
        Room type                                    
     </th> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T10:16:43.270

它确实有效，只是没有空间`th`让`300px`宽度变宽，`min-width`改用

[**演示**](http://jsfiddle.net/xBsxH/1/)

[另一个演示](http://jsfiddle.net/xBsxH/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:18:59.163

你的桌子太短了，不能给它宽度。删除一些列或者只是扩大你的桌子宽度。喜欢：

```
<table width="2000px"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T10:19:23.193

使用或。`min-width`_`display: inline-block;``display: block;`

我觉得第一个最好...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:15:34.923

使用`min-width`而不是`width`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:23:01.863

由于您的表格很宽，因此**宽度**标签不够用，请改用**min-width**。

```
<th style="min-width: 300px;" /> 
```

如果您计划在标题中设置许多不同的宽度，我还建议您使用 colgroups - 使其更易于维护并将其保存在一个位置。

# javascript - javascript中的字符串操作（删除前导零和特定字符）

> ID：13949976
> 
> 赞同：0
> 
> 时间：2012-12-19T10:12:25.613
> 
> 标签：javascript, jquery, string

```
var patt = path.match(/P[0-9][0-9][0-9]/);
patt = patt.substr(1);  //Remove P

while(patt.charAt(0) === '0') {   //Remove 0
    patt = patt.substr(1);
}

alert(patt); 
```

`patt`固定为这种格式：例如。`P001`到`P999`

我想做的是非常基本的，只需删除`P`和领先的`0`（如果有的话）。但是，上面的代码不起作用。感谢您的帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T10:16:19.663

请像这样使用它：

> var str = patt.join('');
> str = str.replace(/P0*/, '');

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:15:50.477

如果保证此函数的输入有效（即 P001...P999 的形式），那么您可以简单地使用以下方法提取整数：

```
parseInt(path.substr(1), 10) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:16:31.867

[`parseInt`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt)这似乎是全局函数的完美用例。

```
parseInt(patt.substr(1), 10); 
```

它将您要解析的字符串和基数作为输入。基数是可选的，但大多数人建议始终明确设置基数以避免在某些极端情况下可能发生的意外。

一旦遇到非数值（不包括空格），它就会停止解析字符串。出于这个原因，在上面的代码片段中，我们传递了去掉第一个字符的输入字符串，正如您所提到的，它是字母“P”。

此外，ES2015 引入了一个`parseInt`函数，作为构造函数的静态方法`Number`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:12:50.593

只需一行，你就得到你想要的

```
var path = "P001"; //your code from P001 - P999 
```

删除 P 和前导 "0" 的解决方案。

```
parseInt(path.substr(1), 10); 
```

谢谢并恭祝安康

# android - 如何在 ListView 适配器中获取 list_view_item.xml 的根视图？

> ID：13949982
> 
> 赞同：0
> 
> 时间：2012-12-19T10:12:40.917
> 
> 标签：android, android-layout

我有一个 ListView 项目/单元格，它有几个层、相对层、线性布局等。我尝试在按钮的 onClick 内执行 v.getParent() ，但它只是向上一层。如何在 onClick 事件处理程序中获取对当前元素根的引用？

这是我的 getView()

```
 Button v = (Button)findViewById(R.id.myButton);

             v.setOnClickListener(new OnClickListener(){
                     onClick(View v) {

                        //Right here I want to find another view inside the cell.
                        View otherView = ???.findViewById(R.id.myOtherViewInListItem); 
                             otherView.setBackgroundColor(...);
                        .........................................
                     } 
              }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:27:18.733

我想象这个按钮在 ListView 元素内。基于这个假设：

1.  只创建一个 OnClickListener。你这样做的方式是在创建`adapter.getCount()`OnClick 侦听器并疯狂地浪费内存。

2.  也许您想完全删除按钮并使用 OnItemClick 跟踪整个 ListView 元素的点击，这会将整个 View 的引用传递给您。

3.  如果您确实必须拥有该按钮，请在 getView 中存储对父级的引用，如下所示：

    ```
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // do whatever you're doing to get the view, let's call it v
        Button b = (Button)v.findViewById(/* your button id */ )
        b.setTag(v)
    } 
    ```

然后在您的点击监听器上，您可以：

```
 onClic(View v){
        View parent = (View)b.getTag();
    } 
```

如果该答案对您有用（我知道确实如此），请像 Daniel Martinus 指出的那样接受它是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:28:23.797

```
 Inside onClick(View v)

just call v.getViewParent();  then you will have a view from which you can call the find for   the others. 
```

# c# - 单击时更改按钮颜色（多次单击/颜色）

> ID：13949983
> 
> 赞同：4
> 
> 时间：2012-12-19T10:12:44.803
> 
> 标签：c#, button, colors

我正在尝试制作一组​​ 8x8 按钮，到目前为止它可以工作。现在我偶然发现了一个问题。我希望按钮的颜色（背景颜色）在单击时发生变化。并在再次单击时更改为不同的颜色。

到目前为止，这是我的代码：

```
namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        Button[,] btn = new Button[8,8];

        public Form1()
        {
            InitializeComponent();

            for (int x = 0; x < btn.GetLength(0); x++)
            {
                for (int y = 0; y < btn.GetLength(1); y++)
                {
                    btn[x,y] = new Button();
                    btn[x,y].SetBounds(40 * x, 40 * y, 40, 40);
                    btn[x,y].Click += new EventHandler(this.btnEvent_click);
                    Controls.Add(btn[x, y]);
                    btn[x,y].BackColor = Color.Black;
                }
            }

            /* 
            btn.Click += new EventHandler(this.btnEvent_click);
            btn[x,y].Text = Convert.ToString(x+","+y);
            Controls.Add(btn);
            btn[x,y].Click += new EventHandler(this.btnEvent_click);
            */
        }

        private void form1_load(object sender, EventArgs e)
        {

        }

        void btnEvent_click(object sender, EventArgs e)
        {
           (Control)sender).BackColor = Color.Red;
        }
    }
} 
```

到目前为止，我只能将颜色更改为红色，并且我已经尝试了多个 if 和 for 语句来第二次更改颜色。

谁能帮帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T10:34:10.663

您好临时您可以使用以下解决方案：

```
void btnEvent_click(object sender, EventArgs e)
{
    Control ctrl = ((Control)sender);
    switch (ctrl.BackColor.Name)
    {
        case "Red":
            ctrl.BackColor = Color.Yellow;
            break;
        case "Black":
            ctrl.BackColor = Color.White;
            break;
        case "White":
            ctrl.BackColor = Color.Red;
            break;
        case "Yellow":
            ctrl.BackColor = Color.Purple;
            break;
        default:
            ctrl.BackColor = Color.Red;
            break;
    }
} 
```

我知道也可以有更好的解决方案，但同时你可以用这个......你也可以根据需要在 switch 语句中添加更多颜色

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T10:29:58.907

您可以创建一个新类，继承自 Button 并在内部处理颜色变化，如下所示：

```
class TwoColorButton : Button
{
    private int stateCounter = 0;
    private Color[] states = new Color[] { Color.Black, Color.Red };

    public TwoColorButton()
        : base()
    {
        this.BackColor = states[stateCounter];
        this.Click += this.clickHandler;
    }

    protected void clickHandler(object sender, EventArgs e)
    {
        stateCounter = stateCounter == 0 ? 1 : 0;
        this.BackColor = states[stateCounter];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T10:21:48.973

您可以使用 Color.FromArgb(int) 方法和 Random 类。见下文：

```
Random rnd = new Random();

//Alpha set allways 255
Color.FromArgb(255, rnd.Next(255), rnd.Next(255), rnd.Next(255));

//Or Completly random
Color.FromArgb(rnd.Next()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T10:18:37.373

你试过类似的东西吗？

```
 void btnEvent_click(object sender, EventArgs e)
    { 
       if ((Control)sender).BackColor != Color.Red)
           (Control)sender).BackColor = Color.Red;
       else 
           (Control)sender).BackColor = Color.Green;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T10:20:12.823

试试看..它的工作...

在 button1 点击事件内部：

```
Random randomGen = new Random();
KnownColor[] names = (KnownColor[])Enum.GetValues(typeof(KnownColor));
KnownColor randomColorName = names[randomGen.Next(names.Length)];
Color randomColor = Color.FromKnownColor(randomColorName);
button1.BackColor = randomColor; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T10:21:02.753

您总是可以创建一个继承按钮类的类，然后为其添加一个计数器，例如单击它的频率，然后在每次单击时增加它，然后根据该单击更改颜色

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T10:25:20.897

如果你想通过一组固定的颜色“循环”，你可以尝试这样的事情：

```
void btnEvent_click(object sender, EventArgs e)
{
    var button = (Button)sender;
    switch(button.BackColor)
    {
        case Color.Black: { button.BackColor= Color.Red;} break;
        case Color.Red: { button.BackColor= Color.Blue;} break;
        case Color.Blue: { button.BackColor= Color.Green;} break;
        // and so on ... don't forget the default clause, just in case
        default: { button.BackColor= Color.Black;} break;
    }
} 
```

# c++ - 问题将数组作为参数传递

> ID：13949984
> 
> 赞同：2
> 
> 时间：2012-12-19T10:12:48.610
> 
> 标签：c++, arrays, opengl, parameters, buffer

我正在使用顶点缓冲区和元素缓冲区。

以下函数将顶点和元素数据作为数组并从中创建缓冲区。我的实际实现更复杂，当然会存储 id 以供以后使用，但这与这个问题无关。

```
void Create(const float Vertices[], const int Elements[])
{
    GLuint VertexBuffer, ElementBuffer; // ids

    glGenBuffers(1, VertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, VertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

    glGenBuffers(1, ElementBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ElementBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Elements), Elements, GL_STATIC_DRAW);
} 
```

在另一个函数中，我调用`Create()`传递两个表示立方体的数组。但什么也没有发生。窗口打开，我看到矢车菊蓝色背景没有任何立方体。

```
float VERTICES[] = {-1.f,-1.f,1.f,1.f,0.f,0.f,.8f,1.f,-1.f,1.f,0.f,1.f,0.f,.8f,1.f,1.f,1.f,0.f,0.f,1.f,.8f,-1.f,1.f,1.f,1.f,1.f,1.f,.8f,-1.f,-1.f,-1.f,0.f,0.f,1.f,.8f,1.f,-1.f,-1.f,1.f,1.f,1.f,.8f,1.f,1.f,-1.f,1.f,0.f,0.f,.8f,-1.f,1.f,-1.f,0.f,1.f,0.f,.8f};
int   ELEMENTS[] = {0,1,2,2,3,0,1,5,6,6,2,1,7,6,5,5,4,7,4,0,3,3,7,4,4,5,1,1,0,4,3,2,6,6,7,3};

Create(VERTICES, ELEMENTS); 
```

如果我在函数内移动顶点和元素数据`Create()`，一切正常并且立方体被正确渲染。

```
void Create()
{
    GLuint VertexBuffer, ElementBuffer;

    float VERTICES[] = {-1.f,-1.f,1.f,1.f,0.f,0.f,.8f,1.f,-1.f,1.f,0.f,1.f,0.f,.8f,1.f,1.f,1.f,0.f,0.f,1.f,.8f,-1.f,1.f,1.f,1.f,1.f,1.f,.8f,-1.f,-1.f,-1.f,0.f,0.f,1.f,.8f,1.f,-1.f,-1.f,1.f,1.f,1.f,.8f,1.f,1.f,-1.f,1.f,0.f,0.f,.8f,-1.f,1.f,-1.f,0.f,1.f,0.f,.8f};
    int   ELEMENTS[] = {0,1,2,2,3,0,1,5,6,6,2,1,7,6,5,5,4,7,4,0,3,3,7,4,4,5,1,1,0,4,3,2,6,6,7,3};

    glGenBuffers(1, VertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, VertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(VERTICES), VERTICES, GL_STATIC_DRAW);

    glGenBuffers(1, ElementBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ElementBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(ELEMENTS), ELEMENTS, GL_STATIC_DRAW);
} 
```

因此，我假设将数组传递给`Create()`函数时会出现问题。我没有收到任何编译器错误或警告。这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T10:16:32.860

type 的参数`const float Vertices[]`实际上与`const float Vertices*`. 所以`sizeof`只是返回一个指针的大小。

使用模板来引用数组：

```
template<std::size_t VerticesN, std::size_t ElementsN>
void Create(const float (&Vertices)[VerticesN], const int (&Elements)[ElementsN])
{
// ...
}

// Usage is the same since template argument deduction

float VERTICES[] = {-1.f,-1.f,1.f,1.f,0.f,0.f,.8f,1.f,-1.f,1.f,0.f,1.f,0.f,.8f,1.f,1.f,1.f,0.f,0.f,1.f,.8f,-1.f,1.f,1.f,1.f,1.f,1.f,.8f,-1.f,-1.f,-1.f,0.f,0.f,1.f,.8f,1.f,-1.f,-1.f,1.f,1.f,1.f,.8f,1.f,1.f,-1.f,1.f,0.f,0.f,.8f,-1.f,1.f,-1.f,0.f,1.f,0.f,.8f};
int   ELEMENTS[] = {0,1,2,2,3,0,1,5,6,6,2,1,7,6,5,5,4,7,4,0,3,3,7,4,4,5,1,1,0,4,3,2,6,6,7,3};

Create(VERTICES, ELEMENTS); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T10:17:32.320

The problem here is `sizeof(VERTICES)` and `sizeof(ELEMENTS)`. When used in the `Create()` method the sizes of the arrays are known, but when you pass the arrays as a parameter (like in the `Create(const float Vertices[], const int Elements[])` the array degrades to a pointer, and the `sizeof` is reduced to returning the size of the pointer.

One simple solution is to pass the size along with the arrays. So the function will look like this:

```
void Create(const float Vertices[], size_t VertSize, const int Elements[], size_t ElemSize) {
  ...
} 
```

but I think I would prefer a solution that uses the new [std::array](http://en.cppreference.com/w/cpp/container/array) which has a `size()` function:

```
void Create(const std::array<float>& vertices, std::array<int>& elements) {
  ...
} 
```

If you do not have the opportunity to work with c++ 11, the [boost libraries](http://www.boost.org/doc/libs/1_52_0/doc/html/array.html) will provide the boost::array which mirrors the behaviour of c++ 11.

# vbscript - 使用 QTP 读取屏幕分辨率

> ID：13949985
> 
> 赞同：1
> 
> 时间：2012-12-19T10:12:49.623
> 
> 标签：vbscript, qtp

在我的脚本的初始化中，我必须读取屏幕的分辨率，以便我知道如何调整浏览器的窗口大小。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:20:25.673

这是一些可以获取主监视器或所有多个监视器的分辨率的代码。此外，最后一个函数返回一个布尔值，用于判断您是否有多个监视器。

```
'*******************************************************************
'TotalScreenWidth & TotalScreenHeight
'by Michael Innes
'October 2012

'Intended for getting the total resolution when you have multiple monitors
'Returns the width and the height (respectively) across all the screens.
Function TotalScreenWidth()
    TotalScreenWidth = Window("regexpwndtitle:=Program Manager").GetROProperty("width")
End Function

Function TotalScreenHeight()
    TotalScreenHeight = Window("regexpwndtitle:=Program Manager").GetROProperty("height")
End Function

'*******************************************************************
'ScreenWidth & ScreenHeight
'by Michael Innes
'October 2012

'Retrieves the width and height (respectively) of the primary screen (the screen that the taskbar is on)
'This only works if the taskbar is at the bottom of the screen
Function ScreenWidth()
    ScreenWidth = Window("object class:=Shell_TrayWnd").GetROProperty("width")
End Function

Function ScreenHeight()
    ScreenHeight = Window("object class:=Shell_TrayWnd").GetROProperty("height") + Window("object class:=Shell_TrayWnd").GetROProperty("y")
End Function

'*******************************************************************
'MultipleMonitors
'by Michael Innes
'October 2012

'Returns a boolean that determines if the computer has multiple monitors attached.

'This only works if the taskbar is at the bottom of the left-most screen.
'If the taskbar is on the right-most monitor, this function will incorrectly report the multiple monitors as being False.
Function MultipleMonitors()
    MultipleMonitors = Eval((screenWidth <> TotalScreenWidth) OR (screenHeight <> TotalScreenHeight))
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:13:21.180

这实际上非常简单，找到桌面窗口并获取其尺寸。

```
width = Window("text:=Program Manager").GetROProperty("width")
height = Window("text:=Program Manager").GetROProperty("height")
Print width & ", " & height 
```

这适用于单个显示器，我没有检查当你有多个显示器时会发生什么。

# android - 无法通过Windows adb命令行推送“hello你好.txt”等中文名称的文件

> ID：13949986
> 
> 赞同：1
> 
> 时间：2012-12-19T10:12:53.577
> 
> 标签：android, adb

失败消息：

```
failed to copy 'D:\My Documents\桌面\hello你好.txt' to '/storage/sdcard0/hello你好.txt': Invalid argument 
```

我遇到的另一个问题与此类似，在命令行“adb shell ls”中显示的消息对于中文文件项来说很奇怪并且完全错误，但是英文项显示正常。

```
android
test.txt
鎴戠殑鐓х墖
鎴戠殑瑙嗛
鎴戠殑闊充箰
root@android:/storage/sdcard0 # 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T10:27:25.190

第一个问题是：</p>

```
D:\My Documents\桌面\hello你好.txt 
```

上述路径格式适用于 Windows。和：

```
/storage/sdcard0/hello你好.txt 
```

路径格式适用于 *NIX。

您可以尝试替换`D:\My Documents\桌面\hello你好.txt`为`D:/My Documents/桌面/hello你好.txt`or `/D/My Documents/桌面/hello你好.txt`。

第二个问题是因为编码，尝试改变你的终端编码。

# magento - Magento 变量以在电子邮件主题中显示付款方式

> ID：13949991
> 
> 赞同：4
> 
> 时间：2012-12-19T10:13:09.957
> 
> 标签：magento, magento-1.7

我正在尝试在 Magento 中的新订单电子邮件的电子邮件主题中显示付款方式。原因是我们的客户可以很容易地从 Magento 发送的电子邮件主题中确定订单是通过支付网关还是通过 Paypal Express 来的。

我不完全确定实现这一目标的最佳方法，我想认为已经有一些可用的东西可以用于此目的。

```
{{var payment_html}} 
```

返回电子邮件模板的付款方式块...

```
{{var paymentMethod}} 
```

电子邮件主题中绝对没有返回任何内容，因此现在不确定这是否是折旧变量。

我想还有创建自定义属性的选项，在静态块中调用它，然后在电子邮件模板中将其显示为自定义变量，但这似乎是一种相当冗长的方法，只是纯粹通过 SagePay 获取文本字符串”或“通过 Paypal Express”。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T14:31:53.267

您实际上不需要执行任何自定义，此变量已经通过对象链在模板中可用。Magento 模板支持此链，并允许使用对象的 getter。

在这种情况下，您需要检索订单的支付对象，然后检索其方法实例并从方法实例中检索方法标题。这是非常简单的构造：

```
{{var order.getPayment().getMethodInstance().getTitle()}} 
```

这应该可以帮助你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T14:27:43.700

方法 Mage_Sales_Model_Order::sendNewOrderEmail() 负责发送新的订单电子邮件。

```
$paymentBlock = Mage::helper('payment')->getInfoBlock($this->getPayment())
    ->setIsSecureMode(true);
$paymentBlock->getMethod()->setStore($storeId);
$paymentBlockHtml = $paymentBlock->toHtml(); 
```

...

```
$mailer->setTemplateParams(array(
    'order'        => $this,
    'billing'      => $this->getBillingAddress(),
    'payment_html' => $paymentBlockHtml
) 
```

payment_html 是渲染块的 html 输出，所以你不能使用它。

您可以使用付款方式再添加一个关联密钥（使用重写或本地/法师技巧），并使用交易电子邮件将此参数添加到主题。

# jquery - 第一次加载页面时显示加载图像

> ID：13949998
> 
> 赞同：1
> 
> 时间：2012-12-19T10:13:37.597
> 
> 标签：jquery, css

当某些内容需要时间加载时，我正在使用以下内容显示加载图像。

```
<div class="divLoading"></div> 
```

JS：

```
$("body").on({
    ajaxStart: function () {
        $(this).addClass("loading");
    },
    ajaxStop: function () {
        $(this).removeClass("loading");
    }
}); 
```

CSS

```
.divLoading {
    display:    none;
    position:   fixed;
    z-index:    1000;
    top:        0;
    left:       0;
    height:     100%;
    width:      100%;
    background: rgba( 255, 255, 255, .8 ) 
            url('../../Images/ajax-loader.gif') 
            50% 50% 
            no-repeat;
}  
body.loading {
    overflow: hidden;   
}
body.loading .divLoading {
    display: block;
} 
```

但这在第一次加载页面时不起作用。我想在登录我的网站后立即显示此加载图像，直到页面内容完全加载。请您帮我解决一下。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:38:46.783

Remember to put this code before closing head tag.

```
<script>
$(window).load(function(){
  $('#dvLoading').fadeOut(2000);
});
</script> 
```