# StackOverflow 问答 14604000-14604999

# lift - 表单相关问题

> ID：14604004
> 
> 赞同：0
> 
> 时间：2013-01-30T12:27:01.353
> 
> 标签：lift

我是 Lift 的新手，我正在考虑是否应该更仔细地调查它并开始将它用作我的 Web 开发的主要平台。但是，我很少有“恐惧”，我很乐意首先消除这些“恐惧”。

**安全**

假设我有以下生成表单的代码段。有几个字段，用户可以只编辑其中的一些。

```
def form(in : NodeSeq): NodeSeq = {
  val data = Data.get(...)
  <lift:children>
    Element 1: { textIf(data.el1, data.el1(_), isEditable("el1")) }<br />
    Element 2: { textIf(data.el2, data.el2(_), isEditable("el2")) }<br />
    Element 3: { textIf(data.el3, data.el3(_), isEditable("el3")) }<br />
    { button("Save", () => data.save) }
  </lift:children>
}

def textIf(label: String, handler: String => Any, editable: Boolean): NodeSeq =
  if (editable) text(label, handler) else Text(label) 
```

我是否正确，即使`isEditable`分配给该字段的方法评估为假，也没有漏洞允许用户更改某个字段的值？

**表现**

在 Lift 中进行表单处理的最佳方法是什么？我真的很喜欢将匿名函数定义为每个字段的处理程序的方式 - 但是它如何扩展？我猜想对于每个处理程序，都会将一个函数及其闭包添加到会话中，并且它会一直保留在那里，直到表单被发回。当涉及到高负载下的服务（比如说每秒 200 个请求）时，它不会引入一些潜在的性能问题吗？这些处理程序什么时候被释放（如果没有重新提交表单并且用户关闭浏览器或导航到另一个页面）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:52:01.243

关于安全性，你是对的。创建输入时，将生成处理函数并使用 GUID 标识符存储在服务器端。该功能是特定于会话的，并由您的代码关闭 - 因此其他用户无法访问它并且难以重播。`isEditable`在您的示例中，由于没有显示任何输入 - 没有生成任何函数，因此如果is 则无法更改值`false`。

至于性能，在单台机器上，Lift 的表现令人难以置信。然而，它确实需要会话感知负载平衡来水平扩展，因为处理程序函数不容易跨机器序列化。要记住的一件事是 Lift 非常灵活，如果需要，您还可以创建无状态表单处理（尽管它不会那么安全）。我从未见过我们创建和部署的应用程序对内存造成太大影响。我没有太多可用的硬统计数据，但在[这个线程](https://groups.google.com/forum/?fromgroups=#!msg/liftweb/t7UgrmeNmj8/UJ43OhSkS5cJ)中，David Pollak 提到`demo.liftweb.net`当时有 214 个打开的会话消耗大约 100MB 的内存（500K/会话）。

此外，[这里是](http://simply.liftweb.net/index-Chapter-20.html)Lift book 的可扩展性章节的链接，其中还包含更多关于安全性的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:22:37.623

sessionShutdown 肯定会清理关闭和所有东西。早些时候——我不知道。无论如何，这并不是一个真正的理论问题——它在很大程度上取决于用户在实践中如何使用 Web 表单。因此，为了获得更广泛的答案，我会在 liftweb 的主要频道上提问——https://groups.google.com/forum/#!forum/liftweb[另外](https://groups.google.com/forum/#!forum/liftweb) ，如果你可以使用“静态”表格想要。但是 AFAIK 内存没有问题，每个人都在使用表单的主要方法。

如果您不创建处理程序 xml/html - 用户将无法更改数据，这是肯定的。在您的代码中，如果我理解正确（我不确定），您不会在不需要时创建“文本（标签，处理程序）”，所以一切都是安全的。

# jpa - JPA 2.0 @AttributeOverride 被 @Embedded 忽略

> ID：14604007
> 
> 赞同：0
> 
> 时间：2013-01-30T12:27:17.147
> 
> 标签：jpa

我有以下情况：

Person person
|-- 地址 myAddress
|-- 地址secondaryAddress

where:
Address
|-- Zip myZip
|-- Zip mySecondaryZip
|-- 字符串名称

Zip
|-- Country myCountry
|-- String zipCode

Country
|-- 字符串描述；

Address、Zip 和 Country 类被声明为 @Embeddable()。人是一个@Entity。

myAddress 具有以下 JPA 注释：

```
 @Embedded()
@AttributeOverrides({ @AttributeOverride(column = @Column(name = "myaddress_name"), name = "name"),
        @AttributeOverride(column = @Column(name = "myaddress_myzip_zipcode"), name = "myZip.zipCode"),
        @AttributeOverride(column = @Column(name = "myaddress_myzip_mycountry_description"), name = "myZip.myCountry.description"),
        @AttributeOverride(column = @Column(name = "myaddress_mysecondaryzip_zipcode"), name = "mySecondaryZip.zipCode"),
        @AttributeOverride(column = @Column(name = "myaddress_mysecondaryzip_mycountry_description"), name = "mySecondaryZip.myCountry.description") })
private Address myAddress = null; 
```

使用 eclipseLink 和 postgresql 作为 db 列：

myaddress_myzip_zipcode
myaddress_myzip_mycountry_description

不是在人员表中创建的。其他的都是正确创建的。我们正在使用 JPA 2.0 和 postgresql 9.2。为什么会这样？我错过了一些明显的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:20:38.793

3 级嵌套似乎存在问题。

Ty 最新版本，如果仍然无法正常工作，请记录错误。

# linux - 将（ruby）程序中的两个串行端口实例连接到物理串行端口（usb0）

> ID：14604008
> 
> 赞同：0
> 
> 时间：2013-01-30T12:27:17.677
> 
> 标签：linux, serial-port, jruby

我有一个程序（在 ubuntu 机器上带有 rxtx 的 jruby），它打开了 2 个单独的串行端口。是否可以将它们都连接到一个硬件端口，即 ttyUSB0，或者连接到一个虚拟串行端口（我有一个程序来模拟硬件）？

是否有类似软件中继器/集线器来连接 2 个串行端口？我检查了socat，但这个只连接了2个末端。我已经阅读[了 vde2](https://stackoverflow.com/questions/2082722/how-do-i-create-virtual-ethernet-devices-in-linux)的[提示和 slip/slattach 的提示，](https://stackoverflow.com/questions/5890505/socat-tunnel-ip-through-tty)但找不到解决方案。

没有socat专家吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T08:44:33.657

我最终只能通过 java 类中的端口所有权来解决这个问题。socat 没办法，我认为是因为框架问题。

我创建了一个所有权处理程序，如

[管理串行端口所有权（在 rxtx 中）](http://embeddedfreak.wordpress.com/2008/08/09/managing-serial-port-ownership-in-rxtx/)

在 jruby 中它看起来像

```
class SerialOwnershipHandler
include CommPortOwnershipListener

def initialize serial_port
  @serial_port = serial_port
  @id = serial_port.id
  @port_name = serial_port.port_name
end

def ownershipChange type
  case type
    when CommPortOwnershipListener::PORT_OWNED
      p @id.to_s + "  OwnershipListener: got the port for " + @port_name.to_s
      #break
    when CommPortOwnershipListener::PORT_UNOWNED
      p @id.to_s + "  OwnershipListener: just lost it's port ownership for " + @port_name.to_s
      #break
    when CommPortOwnershipListener::PORT_OWNERSHIP_REQUESTED
      p @id.to_s + "  OwnershipListener: someone is asking port ownership for " + @port_name.to_s
      @serial_port.close
      #break
  end
end... 
```

在我调用的串行端口类初始化方法中

```
 @serial_ownership_handler = SerialOwnershipHandler.new self  ## implements CommPortOwnershipListener
    @port_id.add_port_ownership_listener @serial_ownership_handler 
```

唯一的缺点。您不能有多个开放线路。在打开另一个连接（请求端口的那个）之前，您必须始终关闭一个连接

# c# - 行为的默认实现

> ID：14604016
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:27:40.333
> 
> 标签：c#, oop

设想

车辆分为三种

1.  在陆地上移动的车辆。
2.  在水上移动的车辆。
3.  在空中移动的车辆。

所有类型的车辆都有一个共同的行为，都可以移动。但是它们移动的方式完全不同（车辆移动的媒介）。

这意味着，所有车辆都有共同的行为（移动）但完全独特的实现。

问题 1

在这种情况下，我们能否有一个带有虚函数（Move）的基类和一些默认实现，因为所有车辆都有完全不同的实现？

或者

由于我们没有任何默认实现，因此抽象类会成为这种设计的好方法吗？

问题2

当我们没有默认实现时，我们应该使用抽象方法吗？（只是为了确认其他场景）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:30:56.783

问题 1

是的，抽象类将是这种设计的好方法，因为我们没有任何默认实现？

问题2

是的，当我们没有默认实现时，我们使用抽象方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:31:34.263

因为你没有任何`Vehicle`不是的`Land`，`Water`或者`Air`，你可能想要一`abstract`门课。

方法也一样：如果实现总是不同的（即你总是必须重新定义实现），那`abstract`很好。

如果没有共享实现，那么接口就可以完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:34:36.710

有点模糊的问题，我认为你可能正在做作业。

首先，虚拟方法将允许您编写一些所有子类都将继承的默认行为，但可以选择用它们自己的替换。

基本上，您需要问自己，与通用界面相比，是否有任何共同的行为？

想想音乐播放器。接口是什么？让我们停止，快进，倒带和播放。

这是一个很好的接口示例。所有默认的“行为”都由方法的名称描述。

CD 播放器“播放”的方式与 MP3 播放器的“播放”方式完全不同。以上将是抽象方法的示例。

如果这是您所需要的所有行为，那么您不需要抽象类，您需要一个接口。

但是，现在想一个按钮，它可以倒回开始并播放。这是一个很好的虚方法示例，您将需要一个抽象类来实现它。您可以基于您已经编写的抽象方法提供一个默认实现，它会正常工作（忽略检测开头轨道 ;））。此外，子类可以根据需要覆盖行为。

回答你的问题：

问题1：我会说不；移动应该是抽象的，因为没有默认实现（尽管默认的隐含行为）

问题 2：是的，如果您没有默认实现，请使用抽象。虽然，如果你发现你的类完全由抽象方法组成，问问你自己是否最好定义一个接口。

# windows - 测试装备 Azure 控制器无法连接到 Visual Studio 客户端

> ID：14604027
> 
> 赞同：0
> 
> 时间：2013-01-30T12:28:24.740
> 
> 标签：windows, azure, performance-testing

我正在按照[http://msdn.microsoft.com/en-us/library/windowsazure/hh674491.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh674491.aspx)的说明部署一个测试平台，控制器和代理托管在 Windows azure 上。我已正确遵循所有指示，并且我的 VS 客户端能够看到控制器和代理。但是，当我执行负载测试时，测试仍处于挂起状态，并且我在控制器的事件日志中看到以下错误。我的问题类似于在以下位置找到的问题：[http](http://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/4040619f-5667-4445-804a-84f37d823c9f/) ://social.msdn.microsoft.com/Forums/en-US/windowsazureconnectivity/thread/4040619f-5667-4445-804a-84f37d823c9f/ 。请帮忙！

(QTController.exe, PID 692, Thread 11) ControllerDeployment.DoDeployment: System.Net.Sockets.SocketException (0x80004005): 连接尝试失败，因为连接方一段时间后没有正确响应，或者建立连接失败，因为连接主机未能响应 [xxx:xxx:xxxx:xxx:xxxx:xxxx:xxxx:220]:6915

服务器堆栈跟踪：在 System.Net.Sockets.Socket.Connect(EndPoint remoteEP) 在 System.Runtime.Remoting.Channels.RemoteConnection.CreateNewSocket(EndPoint ipEndPoint) 的 System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress) ) 在 System.Runtime.Remoting.Channels.RemoteConnection.CreateNewSocket() 在 System.Runtime.Remoting.Channels.SocketCache.GetSocket(String machinePortAndSid, Boolean openNew) 在 System.Runtime.Remoting.Channels.Tcp.TcpClientTransportSink.SendRequestWithRetry(IMessage消息，ITransportHeaders requestHeaders，流 requestStream）在 System.Runtime.Remoting.Channels.Tcp.TcpClientTransportSink.ProcessMessage（IMessage msg，ITransportHeaders requestHeaders，流 requestStream，ITransportHeaders& responseHeaders，Stream& responseStream）在 System.Runtime.Remoting。Channels.BinaryClientFormatterSink.SyncProcessMessage（IMessage 消息）

在 [0] 处重新引发异常：在 Microsoft.VisualStudio 的 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 处的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)。 TestTools.Common.FileCopyService.get_DeploymentFlags() 在 Microsoft.VisualStudio.TestTools.Controller.ControllerExecution.b__6(FileCopyService fileCopyService) 在 Microsoft.VisualStudio.TestTools.Execution.RemoteObjectContainer `1.InvokeAsRemoteUser(Action`1 调用) 在 Microsoft.VisualStudio.TestTools.Controller.ControllerExecution.DoDeployment ()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:06:20.083

根据错误消息，控制器似乎无法与代理交谈。您是否设置了如下所述的连接组：“ [http://msdn.microsoft.com/en-us/library/windowsazure/hh674497.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh674497.aspx) ” 创建连接组 Azure 的连接功能允许您创建虚拟专用网络。该组的成员可以包括本地计算机以及 Azure 角色实例。**对于负载测试解决方案，连接组允许测试控制器和代理之间进行通信。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-28T17:14:13.283

也尝试过这个，但无法让它工作。最终不得不将控制器移动到 Azure 中。

我按照文档了解代理需要哪些端口，并在 Azure 防火墙中打开了这些端口。但是，在进行网络捕获之后，IIRC 它还使用了一些无法打开的动态端口。

所以我发现我必须将 Visual Studio、负载代理控制器和负载代理本身全部移到 Azure 中才能在云中使用它。

# javascript - 如何在不重新加载页面的情况下刷新内容？

> ID：14604028
> 
> 赞同：0
> 
> 时间：2013-01-30T12:28:25.567
> 
> 标签：javascript, angularjs

我必须刷新页面的内容而不用 javascript 重新加载页面。这是行不通的。

```
window.location.assign("#/invoice/" + $scope.invoiceId); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:41:47.967

使用 AJAX。jQuery 为此提供了一个很好的包装器。

[http://jQuery.com/](http://jQuery.com/)

此示例将 ajax/test.html 加载到您的 #content div 中：

```
$.get('ajax/test.html', function(data) {
     $("#content").html(data);
}); 
```

# android - 在 Android 中位图压缩 PNG -> JPEG，反之亦然

> ID：14604031
> 
> 赞同：4
> 
> 时间：2013-01-30T12:28:43.163
> 
> 标签：android, image-processing, bitmap, png, jpeg

当我从 PNG 转换为 JPEG，然后将 JPEG 转换为 PNG 时，我遇到了图片大小的问题。

```
 public void onClick(View v) {
            String imageFileName = "/sdcard/Penguins2.png";
            File imageFile = new File(imageFileName);
            if (imageFile.exists()) {
                // Load the image from file
                myBitmap = BitmapFactory.decodeFile(imageFileName);
                // Display the image in the image viewer
                myImageView = (ImageView) findViewById(R.id.my_image_view);
                if (myImageView != null) {
                    myImageView.setImageBitmap(myBitmap);
                }
            }
        } 
```

转换：

```
 private void processImage() {               
    try {
        String outputPath = "/sdcard/Penguins2.jpg";
        int quality = 100;
        FileOutputStream fileOutStr = new FileOutputStream(outputPath);
        BufferedOutputStream bufOutStr = new BufferedOutputStream(
                fileOutStr);
        myBitmap.compress(CompressFormat.JPEG, quality, bufOutStr);
        bufOutStr.flush();
        bufOutStr.close();
    } catch (FileNotFoundException exception) {
        Log.e("debug_log", exception.toString());
    } catch (IOException exception) {
        Log.e("debug_log", exception.toString());
    }
    myImageView.setImageBitmap(myBitmap); 
```

处理此操作后，我只需更改以下几行：

```
String imageFileName = "/sdcard/Penguins2.png"; 
```

到

```
String imageFileName = "/sdcard/Penguins2.jpg"; 
```

和

```
String outputPath = "/sdcard/Penguins2.jpg";
(...)
myBitmap.compress(CompressFormat.JPEG, quality, bufOutStr); 
```

到

```
String outputPath = "/sdcard/Penguins2.png";
(...)
myBitmap.compress(CompressFormat.PNG, quality, bufOutStr); 
```

图像大小从 585847 更改为 531409（在 DDMS 中）

我想做这样的事情，因为我想使用对某些图像处理无损的 PNG。然后将图像转换为 jpeg 并作为彩信发送，我不确定，但我认为 JPEG 是彩信中所有设备都支持的唯一格式。接收器会打开图像并将其转换回 png 而不会丢失数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:33:04.723

这是不可行的！转换为 JPG 后，您就失去了“PNG 的无损状态”。

无论如何，每个人都支持png。

+在您的情况下，您希望接收器将其更改回 PNG 以检索无损图像。这意味着接收器也支持 PNG。在发送之前将其更改为JPG，然后在收到时将其更改回PNG有什么意义。只是一些额外的计算？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T12:37:39.300

除了@Sherif elKhatib 答案，如果您查看文档：http: [//developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java .io.OutputStream%29](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)

您可以看到 PNG 图像不使用质量参数：

> 质量：提示压缩机，0-100。0 表示压缩为小尺寸，100 表示压缩为最大质量。某些格式，例如无损的 PNG，将忽略质量设置

# jquery - 选择下拉选项后要单击的触发按钮

> ID：14604035
> 
> 赞同：0
> 
> 时间：2013-01-30T12:28:58.063
> 
> 标签：jquery, select, button, triggers, click

我有以下问题：

当从下拉列表中选择一个选项时，它应该被添加到搜索框中。这行得通。但是现在我希望在发生这种情况后自动单击“GO”按钮。使用我到目前为止的代码，我正在尝试使用

```
 $('input[name="go"]').trigger("click"); 
```

部分实现这一目标。然而，问题在于，一旦单击下拉框（因此在可以选择选项之前），就会触发最后一个事件。我尝试了很多东西，但我对 jquery 不是很有经验。（顺便说一句：我正在使用预先存在的搜索字段和按钮）

这是 javascript/jquery 代码：

```
 $(document).ready(function(){

    $('select[name="Articlecategories"]').bind('click', function() {

     $('select[name="Articlecategories"]').change(function () { 
           var str = "";
           $('select[name="Articlecategories"] option:selected').each(function () {
                str += $(this).text() + " ";
                 });
            $('input[name="searchfield"]').val(str);
     })

    .change();

    $('input[name="searchfield"]').change(function () { 
    $('input[name="go"]').trigger("click");
     }) 
    .change();

    });

    }); 
```

这是html：

```
 <select name="Artikelcategorien"  >
    <option selected="selected" disabled>select an option</option>
    <option >Candy</option>
    <option>Taffy</option>
    <option>Caramel</option>
    <option>Fudge</option>
    <option>Cookie</option>
  </select>

<input type="text" name="searchfield" value="" >
    <input type="submit" name="go" value="GO" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:31:58.040

`.trigger()`仅执行附加到某个元素的函数，不执行该元素的默认行为。

如果元素中包含以上所有内容，您可以使用它`form`。

```
$("form").submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:37:16.947

好吧，没关系，我设法解决了它。也许不是最优雅的解决方案，但它有效：

```
 $(document).ready(function(){

    $('select[name="Articlecategories"]').change(Klikzoeken)

    });

    function Klikzoeken() {

     $('select[name="Articlecategories"]')
           var str = "";
           $('select[name="Articlecategories"] option:selected').each(function () {
                str += $(this).text();
                 });
            $('input[name="searchfield"]').val(str);

    $('input[name="go"]').click();

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:34:08.670

您可以通过以下方式提交表格

```
$("formID").submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:36:35.957

您可以只提交表单（假设这当然存在于表单中）：

```
$('form#formId').submit(); 
```

# php - 使用 php 提醒 mysql 列的评论

> ID：14604039
> 
> 赞同：0
> 
> 时间：2013-01-30T12:29:05.503
> 
> 标签：php, mysql, alert

我想使用 php 更改我的字段注释，但是有一个问题！

我需要获取其他专栏的功能：|

这是我的代码（获取所有列功能）：

```
$query = "
        SELECT 
            *
            FROM information_schema.COLUMNS
                WHERE 
                    TABLE_SCHEMA = '$dbName' AND 
                    TABLE_NAME = '$tableName' AND 
                    COLUMN_NAME = '".$row->name."'";

    $result = mysql_query($query) or die($query.'<br>'.mysql_error());
    $tempRow = mysql_fetch_object($result); 
```

这是我更改评论的代码

```
 $query = "ALTER TABLE `$tableName` 
            MODIFY  `".$row->name."` 
            ".$tempRow->COLUMN_TYPE." 
            DEFAULT ".$tempRow->COLUMN_DEFAULT."
            COMMENT '$comment'"   ;

        $result = mysql_query($query) or die($query.'<br>'.mysql_error()); 
```

但问题是我失去了一些功能，例如，outo increment，主键......

有什么方法我不需要编写所有功能，只需更改更新查询之类的评论？！如果不是我应该如何更正这个查询？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:47:12.540

对此感到抱歉，但没有办法只更改单个功能。您始终必须指定该列具有的所有特征。因此，扩展您的查询以反映所有列的功能。你需要的一切都应该在`$tempRow`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:00:52.670

```
 if ($tempRow->IS_NULLABLE == "NO")
        {
            $nullStr =" Not null ";
        }else
        {
            $nullStr ="  null ";
        }            

        if (strlen($tempRow->COLUMN_DEFAULT) >0 )
        {
            $defaultStr = "DEFAULT ".$tempRow->COLUMN_DEFAULT;
        }else
        {
            $defaultStr ="  ";
        }

        if (strlen($tempRow->COLLATION_NAME )>0)
        {
            $collateStr = "collate " . $tempRow->COLLATION_NAME ;
        }
         $comment .= implode("|",$info);
        $query = "ALTER TABLE `$tableName` 
            MODIFY  `".$row->name."` 
            ".$tempRow->COLUMN_TYPE." 
            ".$nullStr."
            ".$extraStr."
            ".$defaultStr."
            ". $tempRow->EXTRA."
            ". $collateStr."

            COMMENT '$comment'"   ; 
```

# jquery - 为多选列表选择的 jquery 插件未以编辑形式显示值

> ID：14604041
> 
> 赞同：0
> 
> 时间：2013-01-30T12:29:09.403
> 
> 标签：jquery, asp.net-mvc, razor, jquery-chosen

我正在为多选列表使用选择的 jquery 插件。我的问题是它没有以编辑的形式显示选定的值。

我的控制代码是

```
ArrayList selectedrole = new ArrayList();
foreach (var role in employee.CompanyRoles)
{
    selectedrole.Add(role.CompanyRoleId.ToString());
}

[ViewBag.CompanyRoleId = new SelectList(CompanyRole, "CompanyRoleId", "RoleName", selectedrole);] 
```

我的查看代码

```
<div class="editor-label">
    Role
</div>
<div class="editor-field">
    @Html.ListBox("emprole", ViewBag.CompanyRoleId as MultiSelectList , new
                 {
                     @class = "chzn-select",
                     data_placeholder = "Choose  Role...",
                     style="width:350px;" 
                 })
</div> 
```

和我的剧本

```
$(".chzn-select").chosen({ allow_single_deselect: true }); 
```

任何人都可以告诉我我做错了什么，当表单以编辑模式显示时，它没有显示选定的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:56:22.023

在下面的代码中`selectedrole`，预计与`CompanyRoles`. 它也只允许选择一项。

```
ViewBag.CompanyRoleId = new SelectList(CompanyRoles, "CompanyRoleId", "RoleName", selectedrole); 
```

你需要`MultiSelectList`改用。

```
ViewBag.CompanyRoleId = new MultiSelectList(CompanyRoles, "CompanyRoleId", "RoleName", employee.CompanyRoles.ToList()); 
```

# module - Opencart 将一个模块内容显示到另一个模块中

> ID：14604053
> 
> 赞同：1
> 
> 时间：2013-01-30T12:29:57.337
> 
> 标签：module, merge, opencart

我的模板中有**自定义页脚模块**。我也在位置**内容底部使用****推荐模块**。我正在尝试在自定义页脚中显示推荐。

 **为此，我只需复制 testimonial.tpl 和 testimonial.php 内容并粘贴到 customfooter.tpl 和 customfooter.php

在此之后我收到错误说明

```
undefined variable and class name already assigned error 
```

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:02:27.213

请参阅此答案以了解如何在单独的修改/控制器中使用模块

[opencart - 如何在模板文件中手动显示模块？](https://stackoverflow.com/questions/8819839/opencart-how-to-manually-display-a-module-inside-a-template-file/8841843#8841843)

您只需从 common/home 更改为模块的控制器并查看文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T11:24:51.843

请定义变量。

你怎么定义我会告诉你的。

目录 > 控制器 > header.php

对于静态变量

```
$this->load->language('common/header');
$data['text_home'] = $this->language->get('text_home'); 
```

// 语言文件在哪里为这个变量分配不同的语言文件夹

```
$data['text_home'] = $this->url->link('information/contact'); 
```

并且您可以在使用此变量时使用 tpl 文件。

```
<?php echo $text_home; ?> 
```

确保 100% 错误没有面临

对于动态变量**

# c - C pthread：如何在一段时间后唤醒它？

> ID：14604060
> 
> 赞同：1
> 
> 时间：2013-01-30T12:30:13.420
> 
> 标签：c, pthreads, signals

我想从另一个 pthread 中唤醒一个 pthread - 但要经过一段时间。我知道带有 pthread_cond_wait 的信号或 pthread_signal 可以用来唤醒另一个线程，但我看不到安排这个的方法。情况将是这样的：

```
THREAD 1:
========
while(1)
    recv(low priority msg); 
    dump msg to buffer 

THREAD 2:
========
while(1)
    recv(high priority msg); 
    ..do a little bit of processing with msg .. 
    dump msg to buffer 

    wake(THREAD3, 5-seconds-later);  <-- **HOW TO DO THIS? ** 
    //let some msgs collect for at least a 5 sec window. 
    //i.e.,Don't wake thread3 immediately for every msg rcvd. 

THREAD 3: 
=========
while(1)
    do some stuff .. 
    Process all msgs in buffer 
    sleep(60 seconds). 
```

安排唤醒的任何简单方法（不创建每秒唤醒的第 4 个线程并决定是否有线程 3 的预定条目唤醒）。如果队列中只有低优先级的消息，我真的不想频繁唤醒线程 3。此外，由于消息是突发的（比如单次突发中有 1000 条高优先级消息），我不想为每条消息唤醒线程 3。它确实减慢了速度（因为每次唤醒时都会进行大量其他处理）。

我正在使用 ubuntu 电脑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:01:18.133

如何使用`pthread_cond_t`通过 pthread API 提供的对象？您可以在您的线程中共享这样一个对象，并让他们适当地对其进行操作。
生成的代码应如下所示：

```
/*
 * I lazily chose to make it global.
 * You could dynamically allocate the memory for it
 * And share the pointer between your threads in
 * A data structure through the argument pointer
 */
pthread_cond_t cond_var;
pthread_mutex_t cond_mutex;
int wake_up = 0;

/* To call before creating your threads: */
int err;
if (0 != (err = pthread_cond_init(&cond_var, NULL))) {
    /* An error occurred, handle it nicely */
}
if (0 != (err = pthread_mutex_init(&cond_mutex, NULL))) {
    /* Error ! */
}
/*****************************************/

/* Within your threads */
void *thread_one(void *arg)
{
    int err = 0;
    /* Remember you can embed the cond_var
     * and the cond_mutex in
     * Whatever you get from arg pointer */

    /* Some work */
    /* Argh ! I want to wake up thread 3 */
    pthread_mutex_lock(&cond_mutex);
    wake_up = 1; // Tell thread 3 a wake_up rq has been done
    pthread_mutex_unlock(&cond_mutex);
    if (0 != (err = pthread_cond_broadcast(&cond_var))) {
        /* Oops ... Error :S */
    } else {
        /* Thread 3 should be alright now ! */
    }
    /* Some work */
    pthread_exit(NULL);
    return NULL;
}

void *thread_three(void *arg)
{
    int err;
    /* Some work */
    /* Oh, I need to sleep for a while ...
     * I'll wait for thread_one to wake me up. */
    pthread_mutex_lock(&cond_mutex);
    while (!wake_up) {
        err = pthread_cond_wait(&cond_var, &cond_mutex);
        pthread_mutex_unlock(&cond_mutex);
        if (!err || ETIMEDOUT == err) {
            /* Woken up or time out */        
        } else {
            /* Oops : error */
            /* We might have to break the loop */
        }
        /* We lock the mutex again before the test */
        pthread_mutex_lock(&cond_mutex);
    }
    /* Since we have acknowledged the wake_up rq
     * We set "wake_up" to 0\. */
    wake_up = 0;
    pthread_mutex_unlock(&cond_mutex);
    /* Some work */
    pthread_exit(NULL);
    return NULL;
} 
```

如果您希望线程 3`pthread_cond_wait()`在超时后退出阻塞调用，请考虑`pthread_cond_timedwait()`改用（仔细阅读手册，您提供的超时值是绝对时间，而不是您不想超过的时间量）。
如果超时，`pthread_cond_timedwait()`将返回`ETIMEDOUT`错误。

**编辑**：我跳过了锁定/解锁调用中的错误检查，不要忘记处理这个潜在的问题！

**EDIT²**：我稍微回顾了代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:36:20.610

为什么不将当前时间与之前的一次保存进行比较？

```
time_t last_uncond_wakeup = time(NULL);
time_t last_recv = 0;

while (1)
{
    if (recv())
    {
        // Do things
        last_recv = time(NULL);
    }

    // Possible other things

    time_t now = time(NULL);
    if ((last_recv != 0 && now - last_recv > 5) ||
        (now - last_uncond_wakeup > 60))
    {
        wake(thread3);
        last_uncond_wakeup = now;
        last_recv = 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:44:01.957

您可以让唤醒线程自行等待。在唤醒线程中：

```
pthread_mutex_lock(&lock);
if (!wakeup_scheduled) {
    wakeup_scheduled = 1;
    wakeup_time = time() + 5;
    pthread_cond_signal(&cond);
}
pthread_mutex_unlock(&lock); 
```

在等待线程中：

```
pthread_mutex_lock(&lock);
while (!wakeup_scheduled)
    pthread_cond_wait(&cond, &lock);
pthread_mutex_unlock(&lock);

sleep_until(wakeup_time);

pthread_mutex_lock(&lock);
wakeup_scheduled = 0;
pthread_mutex_unlock(&lock); 
```

# xslt - 使用 xpath 函数生成 unix 时间戳，这个 xslt 脚本有什么问题？

> ID：14604069
> 
> 赞同：0
> 
> 时间：2013-01-30T12:30:34.400
> 
> 标签：xslt, xpath

我正在尝试生成时间戳，但它给了我一个浮点数：

```
 <xsl:variable name="timestamp"  select="seconds-from-dateTime(current-dateTime())-seconds-from-dateTime(xs:dateTime('1970-01-01T00:00:00'))"/> 
```

像这样输出：`40.638`

我正在使用[这里描述的功能](http://www.w3schools.com/xpath/xpath_functions.asp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:39:51.177

从您链接到的那个页面：

> > 返回一个小数，表示参数的本地化值中的秒分量

第二个值在其秒分量中为 0，而第一个值在其秒分量中具有 [0, 60) 范围内的值，因此结果将始终介于 0 和 60 之间。您是否尝试过：

```
<xsl:variable name="duration" 
      select="current-dateTime() - xs:dateTime('1970-01-01T00:00:00')" />
<xsl:variable name="timestamp"
              select="floor(days-from-duration($duration) * 3600 * 24 + 
                      hours-from-duration($duration) * 3600 + 
                      minutes-from-duration($duration) * 60 + 
                      seconds-from-duration($duration))" /> 
```

# java - Android：应用程序因 BadTokenException 错误而崩溃（试图显示 AlertDialog）

> ID：14604071
> 
> 赞同：1
> 
> 时间：2013-01-30T12:30:49.667
> 
> 标签：java, android, exception, android-alertdialog

如果没有连接，我只想在屏幕上打印警报。

这是我在课堂上所做的扩展 Activity 的操作。

```
if(isOnline()) { 
    // do stuff..
} else {
    Builder builder =  new AlertDialog.Builder(getApplicationContext());
    builder.setMessage("No connection.");
    builder.setCancelable(true);
    AlertDialog dialog = builder.create();
    dialog.show();
} 
```

然后我尝试使用Debug启动它，并得到以下错误：

> android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 null 不适用于应用程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:34:11.140

采用

```
 Builder builder =  new AlertDialog.Builder(Your_Current_Activity.this); 
```

代替

```
 Builder builder =  new AlertDialog.Builder(getApplicationContext()); 
```

因为您需要传递当前活动上下文来显示`AlertDialog`而不是应用程序上下文

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-27T03:41:58.293

换行

```
Builder builder =  new AlertDialog.Builder(getApplicationContext()); 
```

和

```
Builder builder =  new AlertDialog.Builder(YourActivityName.this); 
```

因为您可能需要**Activity Context**而不是**Application Context**。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:33:40.470

使用`yourActivityName.this`代替`getApplicationContext()`;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T12:33:57.303

尝试使用除此之外的`classname.this`其他`getApplicationContext()`时间会导致问题

```
if(isOnline()) { 
    // do stuff..
} else {
    Builder builder =  new AlertDialog.Builder(getApplicationContext());
    builder.setMessage("No connection.");
    builder.setCancelable(true);
    AlertDialog dialog = builder.create();
    dialog.show();
} 
```

# java - 在 php 中使用 exec 执行 java 包

> ID：14604074
> 
> 赞同：0
> 
> 时间：2013-01-30T12:30:51.390
> 
> 标签：java, php, package, exec

我`AuthoringTool`在`wamp\www`目录中有一个文件夹。

在这里面，我有一个`authoring_tool`包含两个java文件和相关类文件的包。我可以使用执行包

```
java authoring_tool.AuthoringTool 
```

但是当我尝试

```
echo exec('java authoring_tool.AuthoringTool'); 
```

在 php 中，它没有响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:35:12.193

它不是您问题的解决方案，但可能有助于尝试将[Java 包作为 EXE运行](http://javaexe.en.softonic.com/)

# jquery - 打字稿不编译 e.currentTarget.files

> ID：14604079
> 
> 赞同：4
> 
> 时间：2013-01-30T12:31:04.603
> 
> 标签：jquery, compiler-errors, typescript

我用 Jquery 读取输入中的文件

```
<INPUT TYPE=FILE id="file" NAME="upfile" multiple> 
```

使用此代码

```
$('#inputFile').on('change', 'body', (e) => {
  var files: any = e.currentTarget.files;  }); 
```

但是打字稿不知道 e.currentTarget 在这种情况下具有 poperty 文件。并给我一个编译错误。

我该如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-16T16:31:51.420

```
$('#input-container').on('change', null, (e) => {
    var input = <HTMLInputElement>e.target;
    var files = input.files; //give you intellisense on files
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:10:21.250

`jQuery.On`有不同的两个重载（1.8 版）。您使用了错误的重载方法。使用正确的

如果您没有任何要传递的数据，请将您的代码更改为

```
$('#inputFile').on('change', 'body', null, (e) => {
var files: any = e.currentTarget.files;  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-26T01:12:13.527

类似于@michael-tranchida，但我认为更简洁：

```
export class Page {
    public fileToUpload:File = null;

    constructor(public fileInput: JQuery, public fileDetails: JQuery) {
        $(fileInput).on('change', (e) => {
            this.fileToUpload = <File>$(e.target).prop('files')[0];
            $(fileDetails).html(this.fileToUpload.name); // intellisense on fileToUpload
        });
    }
} 
```

# asp.net - 关闭 Cassette 中的 URL 重写

> ID：14604081
> 
> 赞同：1
> 
> 时间：2013-01-30T12:31:11.637
> 
> 标签：asp.net, cassette

我正在使用最优秀的[Cassette](http://getcassette.net/)在 ASP.NET 中捆绑资产。但是，有时完全关闭 URL 重写会很方便。我知道有防止缩小或停止捆绑的解决方案，但我希望 Cassette HtmlHelper 简单地（临时）发出原始资产 URL。

例如，而不是发射：

```
<script src="/cassette.axd/asset/Scripts/jquery-1.7.2.js?DXiW4rsj-I4m5SsioHU1CzVN9Ec=" type="text/javascript"></script> 
```

盒式磁带将发出原件：

```
<script src="/scripts/jquery-1.7.2.js" type="text/javascript"></script> 
```

一些背景知识：我正在玩用于集成测试的 ASP.NET MVC 应用程序的 InProcess 引导。Cassette 的 '.axd' 和 Url 重写方面只是需要担心的另一件事，因此在某些测试中有效地关闭 Cassette 会很方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:45:04.317

Cassette 配置设置中的 IsHtmlRewritingEnabled 默认为 true。将其设置为假。请参阅[此处](http://getcassette.net/documentation/v1/configuration)了解更多详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:51:31.863

[我在 Cassette Google Group 上发布了同样的问题](https://groups.google.com/forum/?fromgroups=#!topic/cassette/IlbIBPSHoVQ)，首席开发人员 (Andrew Davey) 认为实现这一目标的最简单方法是使用您自己的帮助器包装 Cassette HTML Helper 方法，该帮助器去除 '/cassette.axd/资产/' 部分的 URL。然后简单地忽略 URL 末尾的查询字符串哈希参数。

正如 Andrew 所说，这有点像 hack，但在运行集成测试时我很乐意这样做。

（链接的 Google Group 线程还提出了一种更优雅的探索路径来实现这一目标。）

# silverlight - Windows Phone 中的自动选择文本框

> ID：14604086
> 
> 赞同：0
> 
> 时间：2013-01-30T12:31:26.313
> 
> 标签：silverlight, windows-phone-8

我正在寻找 Windows Phone 中的 AutoSelectTextBox，就像 wpf 工具包中的一样？

[http://wpftoolkit.codeplex.com/wikipage?title=AutoSelectTextBox&referringTitle=Documentation](http://wpftoolkit.codeplex.com/wikipage?title=AutoSelectTextBox&referringTitle=Documentation)

任何人都可以通过示例自定义控制代码或任何有用的链接或博客来帮助我吗？

问候， Ganesan S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T16:29:15.060

我不确定你到底在问什么，但如果你只是想让 TextBox 在“选择”时自动选择所有内容，你可以使用该`GotFocus`事件来设置选择。

像这样：

```
<TextBox GotFocus="AutoSelectLikeTextBoxGotFocus" /> 
```

使用事件处理程序，例如：

```
private void AutoSelectLikeTextBoxGotFocus(object sender, RoutedEventArgs e)
{
    var tb = sender as TextBox;

    if (tb != null)
    {
        tb.SelectAll();
    }
} 
```

您可以将其包装在您自己的扩展 TextBox 的类中，以使其更易于重用。

# java - 在spring文件上传中回调

> ID：14604091
> 
> 赞同：0
> 
> 时间：2013-01-30T12:31:44.543
> 
> 标签：java, javascript, iframe, spring-mvc, file-upload

我已按照[此](http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/)将文件上传到服务器。该文件正在上传，但在上传文件后，它给出的页面名称为 filename.extension.jsp 并给出`HTTP Status 404`了屏幕截图： ![上传文件后](../Images/cfa5518628df1fecdd71ce4e6f272a8d.png)

但我只想向用户显示状态消息说`File is uploaded. how to do this?`

这是我的弹簧控制器方法：

```
@RequestMapping(value = "/CIMtrek_Compliance_Daily_Shipments_FileUpload", method = RequestMethod.POST)
    public String createComments(
            @RequestParam("CIMtrek_daily_originator_comments") MultipartFile uploadItem,
            HttpServletRequest request) {
        String uploadedFileName = "";
        try {
            String fileName = null;
            InputStream inputStream = null;
            OutputStream outputStream = null;
            if (uploadItem.getSize() > 0) {
                inputStream = uploadItem.getInputStream();
                fileName = request.getRealPath("") + "/resources/Attachment/"+uploadItem.getOriginalFilename();
                outputStream = new FileOutputStream(fileName);
                int readBytes = 0;
                byte[] buffer = new byte[10000];
                while ((readBytes = inputStream.read(buffer, 0, 10000)) != -1) {
                    outputStream.write(buffer, 0, readBytes);
                }
                outputStream.close();
                inputStream.close();
            }
            uploadedFileName = uploadItem.getOriginalFilename();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return uploadedFileName;
    } 
```

请帮我找，

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:53:33.530

嗨@Anto，你可以这样做，

```
@RequestMapping(value = "/CIMtrek_Compliance_Daily_Shipments_FileUpload", method = RequestMethod.POST)
public String createComments(
        @RequestParam("CIMtrek_daily_originator_comments") MultipartFile uploadItem,
        HttpServletRequest request, ModelMap map) {
    String uploadedFileName = "";

     ...

        uploadedFileName = uploadItem.getOriginalFilename();
        // ---------------------------------------------------------------------------
        if("" != uploadedFileName || null != uploadedFileName) {
            map.put("message", new String("File is uploaded."));
        } else {
            map.put("message", new String("File is not uploaded."));
        }
        // ---------------------------------------------------------------------------

    } catch (Exception e) {
        e.printStackTrace();
    }
    return uploadedFileName;
} 
```

还有你放的JSP

```
<c:out value="${message}"></c:out> 
```

**我希望能帮助你:)**

# css - Wordpress - 如何更改用户登录后显示的用户名的颜色？

> ID：14604097
> 
> 赞同：0
> 
> 时间：2013-01-30T12:31:53.953
> 
> 标签：css, wordpress, login

当用户登录时，WP-Members 会说：您以“用户名”登录。如何在 CSS 中引用此用户名以更改其颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:59:51.360

在您的主题文件中：

```
<?php

if (is_user_logged_in()) {
    ?>
    <p class="loggedin">You are logged in as "username".</p>
    <?php
} else {
    ?>
    <p class="loggedout">You are logged in as "username".</p>
    <?php
}

?> 
```

CSS

```
p.loggedin {
    color: green;
}

p.loggedout {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T02:04:06.533

这样做的方法是过滤它。登录状态的侧边栏有一个过滤器挂钩 - [wpmem_sidebar_status](http://rocketgeek.com/plugins/wp-members/users-guide/filter-hooks/wpmem_sidebar_status/)。侧边栏状态的 HTML 字符串被传递给过滤器。那将是这样的：

```
<p>You are logged in as username<br />
<a href="http://logoutlink">click here to log out</a> 
```

所以如果你想对用户名应用一些 CSS 来设置样式，你需要定义一些东西。您需要做的是将用户名包装在 span 标签中。但是你怎么能这样做呢？

`str_replace`将对特定字符串或字符串数​​组进行搜索和替换。所以我们可以用那个文本**加上**一个开放的跨度包装器替换用户名之前的文本。我们可以用结束`<br />`跨度标签**加上**`<br />`标签替换标签。

```
add_filter( 'wpmem_sidebar_status', 'my_sidebar_status' );

function my_sidebar_status( $string ) {

    /** The original pieces **/
    $old = array(
        'You are logged in as',
        '<br />',
    );

    /** The replacements **/
    $new = array(
        'You are logged in as <span class="my_class">',
        '</span><br />',
    );

    /** Do the search/replace **/
    $new_string = str_replace( $old, $new, $string );

    /** Return the filtered result **/
    return $new_string;
} 
```

此过滤器进行所描述的替换将导致侧边栏状态输出如下：

```
<p>You are logged in as <span class="my_class">username</span><br />
<a href="http://logoutlink">click here to log out</a> 
```

然后你可以将一些 CSS 应用到 .my_class 类

```
.my_class {
  font-weight: bold;
  color: red;
} 
```

# javascript - 仅浮动图像 css

> ID：14604105
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:32:24.450
> 
> 标签：javascript, html, css, image

没有这个[链接](http://masonry.desandro.com/demos/images.html)可能`javascript`吗？我正在努力学习`css`和`floating layouts`。我在论坛和人们对该站点的链接上进行了搜索，即使这看起来是一个很好的解决方案，我也想扩大我在`css`和`html`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:41:04.960

使用[`CSS3 Columns`](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts)您可以在现代浏览器上轻松实现相同的结果：

示例 jsbin：http: [//jsbin.com/ivumoq/1/edit](http://jsbin.com/ivumoq/1/edit)

相关的 CSS

```
body > div {
   -webkit-column-count:3; 
   -webkit-column-width:200px;
   -moz-column-count:3; 
   -moz-column-width:200px
   column-count:3; 
   column-width:200px;
} 
```

您还可以根据特定的媒体查询定义列数。例如，如果您想在视口大于 > 时显示 4 列`960px`

```
@media all and (min-width:960px) {
    body > div {
        -webkit-column-count:4; 
        -moz-column-count:4; 
        column-count:4;
    } 
} 
```

因此，您可以在浏览器调整大小时模拟砌体的回流。

[媒体查询示例： http](http://jsbin.com/ivumoq/2/edit) ://jsbin.com/ivumoq/2/edit

否则，使用浮动您需要定义三个浮动容器（作为三个独立的列）并在每个容器上放置大约 1/3 的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:41:21.330

[工作小提琴](http://jsfiddle.net/tYGde/)

HTML：

```
<div class="parent">
    <div class="left-col">
        <div class="small"></div>
        <div class="medium"></div>
        <div class="large"></div>
        <div class="large"></div>
        <div class="medium"></div>
        <div class="small"></div>
    </div>
    <div class="right-col">
        <div class="large"></div>
        <div class="medium"></div>
        <div class="small"></div>
        <div class="small"></div>
        <div class="medium"></div>
        <div class="large"></div>
    </div>
</div> 
```

CSS：

```
.parent {
    width:400px;
    height:auto !important;
    background:yellow;
}
.left-col {
    max-width:200px;
    height:0 auto;
    width:200px;
    float:left;
    display:inline-block;
}
.right-col {
    max-width:200px;
    height:0 auto;
    width:200px;
    float:left;
    display:inline-block;
}
.small {
    width:190px;
    margin:10px;
    height:100px;
    background:green;
    display:block;
}
.medium {
    width:190px;
    margin:10px;
    height:200px;
    background:blue;
    display:block;
}
.large {
    width:190px;
    margin:10px;
    background:brown;
    height:400px;
    display:block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:42:33.557

这是可能的，但你必须有不同的列。如果您使用 display: inline-block 图像将无法正确对齐，并且如果您浮动它们，当一行中的第一个高于最后一个时，您将遇到问题。我把它弄乱了：

[http://jsfiddle.net/VeecS/](http://jsfiddle.net/VeecS/)

一列html：

```
<div class="col">
    <h2>Column1</h2>
    <img src="http://placehold.it/300X150" />
    <img src="http://placehold.it/300X320" />
    <img src="http://placehold.it/300X120" />
</div> 
```

CSS：

```
.col {
    width:24%;
    padding: 10px 0;
    background: #f1f1f1;
    float: left;
    margin-right: 1%;
} 
```

# android - 解析 Ksop 响应 - Android

> ID：14604113
> 
> 赞同：-2
> 
> 时间：2013-01-30T12:33:07.790
> 
> 标签：android, ksoap

应该如何解析以下 ksoap Web 服务响应。（我是 android 中这部分的新手）。

这是从我的 ksop 对 Web 服务的响应中获得的响应。我在 android 4.1 设备上重新运行它。

```
<?xml version = "1.0" encoding = "UTF-8" ?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <GetNearestStationsResponse xmlns="http://tempuri.org/">
      <GetNearestStationsResult>
        <StationsCloseBy xmlns="">
          <Station Station_id="332"
                    Station_Name="דוד המלך 30"
                    Eng_Station_Name="30 David Hamellech St."
                    Description="דוד המלך 30 מול הרבנות בשדרה"
                    Eng_Address="David ha-Melekh 30 opposite the Rabbinate"
                    Latitude="32.080000"
                    Longitude="34.785400"
                    DistanceFromStationInMeters="61"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="5"
                    NumOfAvailableDocks="15"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="331"
                    Station_Name="כיכר רבין"
                    Eng_Station_Name="Rabin Square"
                    Description="כיכר רבין  מול אבן גבירול 76 -תחנה עירייה"
                    Eng_Address="Kikar Rabin, opposite Ibn Gabirol 76 - municipality station"
                    Latitude="32.081000"
                    Longitude="34.781100"
                    DistanceFromStationInMeters="360"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="12"
                    NumOfAvailableDocks="16"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="333"
                    Station_Name="ויצמן 15-איכילוב"
                    Eng_Station_Name="15 weizman st. Ichilov Hospital"
                    Description="ויצמן 15 איכילוב במדרכה מול בית החולים"
                    Eng_Address="Weizman 11 - Hospital"
                    Latitude="32.081100"
                    Longitude="34.788800"
                    DistanceFromStationInMeters="391"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="6"
                    NumOfAvailableDocks="14"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="345"
                    Station_Name="ויצמן 1 -  בית המשפט"
                    Eng_Station_Name="1 Weizman St. - Court Justice Hall"
                    Description="ויצמן 1 בית המשפט"
                    Eng_Address="Weizman 1 - Court Justice Hall"
                    Latitude="32.077200"
                    Longitude="34.788400"
                    DistanceFromStationInMeters="476"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="4"
                    NumOfAvailableDocks="24"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="342"
                    Station_Name="שאול המלך 21 קאמרי"
                    Eng_Station_Name="21 Sauol Hamelekh- Hakameri"
                    Description="שאול המלך 21 קאמרי -במדרכה מימין למדרגות כניסה מערבית"
                    Eng_Address="Shaul ha-Melekh 21 Hakameri - on the sidewalk to the right of the west entrance stairs"
                    Latitude="32.075900"
                    Longitude="34.785100"
                    DistanceFromStationInMeters="478"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="8"
                    NumOfAvailableDocks="12"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="381"
                    Station_Name="פרישמן 77"
                    Eng_Station_Name="77 Frishman St."
                    Description="פרישמן 77-שדרות חן"
                    Eng_Address="77 Frishman St."
                    Latitude="32.079500"
                    Longitude="34.779700"
                    DistanceFromStationInMeters="488"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="10"
                    NumOfAvailableDocks="10"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="323"
                    Station_Name="תשח 2"
                    Eng_Station_Name="2 Tashah St."
                    Description="תשח 2 במדרכה"
                    Eng_Address="Tashakh 2 on the sidewalk"
                    Latitude="32.084700"
                    Longitude="34.786700"
                    DistanceFromStationInMeters="530"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="6"
                    NumOfAvailableDocks="14"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="324"
                    Station_Name="אבן גבירול 106 -בית הדואר"
                    Eng_Station_Name="106 Ibn Gvirol St. - Post Office"
                    Description="אבן גבירול 106 - בית הדואר במדרכה"
                    Eng_Address="Ibn Gabirol 106 - Post Office, on the sidewalk"
                    Latitude="32.084300"
                    Longitude="34.781600"
                    DistanceFromStationInMeters="546"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="9"
                    NumOfAvailableDocks="8"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="346"
                    Station_Name="אבן גבירול 28"
                    Eng_Station_Name="28 Ibn Gabirol St."
                    Description="אבן גבירול 28 לונדון מיניסטור מאחורי ספסל ארוך דרום לכניסה"
                    Eng_Address="Ibn Gabirol 28, London Ministore behind the long bench south of the entrance"
                    Latitude="32.075000"
                    Longitude="34.781800"
                    DistanceFromStationInMeters="642"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="12"
                    NumOfAvailableDocks="8"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
          <Station Station_id="344"
                    Station_Name="נצח ישראל 4 פינת מסריק"
                    Eng_Station_Name="4 Netsakh Yisrael St./ Masaryk"
                    Description="נצח ישראל 4 פינת מסריק - תחנה בחניה בכביש "
                    Eng_Address="Netsakh Yisrael 4 corner of Masaryk - station at the roadside parking"
                    Latitude="32.077900"
                    Longitude="34.778300"
                    DistanceFromStationInMeters="665"
                    Timestamp="2013-01-30T11:05:03.320"
                    NumOfAvailableBikes="8"
                    NumOfAvailableDocks="12"
                    IsActive="1"
                    Station_picture=""
                    Station_Phone="*6070"
                    Telefax="" />
        </StationsCloseBy>
      </GetNearestStationsResult>
    </GetNearestStationsResponse>
  </soap:Body>
</soap:Envelope> 
```

假设：envelope.bodyIn 是 Valid Note1 -

```
SoapObject response = (SoapObject) envelope.bodyIn;
int propertyCount = response.getPropertyCount();
String pro = response.getPropertyAsString(0);

Running the code above gives:
propertyCount=1
pro = 
anyType{StationsCloseBy=anyType{Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; Station=anyType{}; }; }

Note2 - ksoap response was chopped (i have removed Additional Stations tags since it does not make any difference, it caontians same fields with different data)

    Any help will be appreciated!
    Thanks! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:38:23.887

```
String methodName = "method_name";
String newSoapAction = "initail Url" + methodName;

        SoapObject request = new SoapObject("your namespace", methodName);    

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);
        androidHttpTransport
        .setXmlVersionTag("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
        envelope.dotNet = true;
        androidHttpTransport.debug = true;      
        androidHttpTransport.call(newSoapAction, envelope);         

        InputStream in = new ByteArrayInputStream(androidHttpTransport.responseDump.getBytes()); 
```

您将在 Inputstream 中得到响应 进一步检查[检查此](http://mobile.dzone.com/news/android-development-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:34:06.527

也许我的这段代码会帮助你找出如何去做，是西班牙语，我很抱歉西班牙语。

这段代码只从 XML 中检索属性，但对于属性是完全一样的。

祝你好运！

公共静态 ListaDocumentosPentsFirmante RetrieveFromSoap(SoapObject soap){

```
 SoapObject root = (SoapObject) soap.getProperty("getListaPendientesFirmanteResponse");
    ListaDocumentosPentsFirmante pagina_doc =  new ListaDocumentosPentsFirmante();
    ArrayList<DocumentoBandejaFirmanteBean> lista_doc= new  ArrayList<DocumentoBandejaFirmanteBean>();
    /* Parsing every doc entry*/
    for (int i = 0; i < root.getPropertyCount(); i++){

        Object property = root.getProperty(i);
        if(property instanceof SoapObject){
            SoapObject category_list = (SoapObject) property;

            DocumentoBandejaFirmanteBean doc= new DocumentoBandejaFirmanteBean();
            //En caso de no existis?
            if (category_list.hasProperty("codigoDocumento"))
                doc.setCodigoDocumento(Long.parseLong(category_list.getProperty("codigoDocumento").toString()));
            if (category_list.hasProperty("nombreDocumento"))
                doc.setNombreDocumento(category_list.getProperty("nombreDocumento").toString());
            if (category_list.hasProperty("nombreSolicitante"))
                doc.setNombreSolicitante(category_list.getProperty("nombreSolicitante").toString());
            if (category_list.hasProperty("revisado"))
                doc.setRevisado(Boolean.valueOf(category_list.getProperty("revisado").toString()));
            if (category_list.hasProperty("clasificado"))
                doc.setClasificado(Boolean.valueOf( category_list.getProperty("clasificado").toString()));
            if (category_list.hasProperty("tieneAnexos"))
                doc.setTieneAnexos(Boolean.valueOf( category_list.getProperty("tieneAnexos").toString()));
            if (category_list.hasProperty("nombreTipoDocumento"))
                doc.setNombreTipoDocumento(category_list.getProperty("nombreTipoDocumento").toString());
            if (category_list.hasProperty("nombreUnidadAdministrativa"))
                doc.setNombreUnidadAdministrativa(category_list.getProperty("nombreUnidadAdministrativa").toString());
            if (category_list.hasProperty("prioridad"))
                doc.setPrioridad(Integer.parseInt(category_list.getProperty("prioridad").toString()));
            //Date mdFechaAlta = DateFormat.parse(category_doc.getProperty("CATEGORY").toString());
            lista_doc.add(doc);
        }               
    }
    pagina_doc.setDocumentos(lista_doc);
    pagina_doc.setPaginaActual(Integer.parseInt(root.getProperty("paginaActual").toString()));
    pagina_doc.setTotalDocumentos(Integer.parseInt(root.getProperty("totalDocumentos").toString()));
    pagina_doc.setTotalPaginas(Integer.parseInt(root.getProperty("totalPaginas").toString()));

    return pagina_doc;
} 
```

# javascript - 将参数从视图传递到 javascript

> ID：14604115
> 
> 赞同：1
> 
> 时间：2013-01-30T12:33:18.787
> 
> 标签：javascript, ruby-on-rails, parameter-passing

我在我的下一个变量`main_controller.rb`：

```
def create:
   @token = "24vgd32"
end 
```

在我的 中`views/create.erb`，我写道：

```
<%= javascript_tag do %>
   window.my_token = '<%= j @token %>';
<% end %> 
```

通过这种方式，我可以在此页面引用的任何 JavaScript 文件中使用此变量。

但我如何在我的 中使用它`application.js`？

这是我的`application.js`：

```
$(document).ready(function(){
  licensario.getLicense({
    wizardToken: my_token
  });
}); 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:51:33.823

在你的 create.html.erb 中使用这个

```
<%= hidden_field_tag :my_token, @token, :id => 'some_field_id' %> 
```

将**some_field_id**和**my_token**替换为所需的名称。

在您的 javascript 文件中

```
$(document).ready(function(){
  token = $('#some_field_id').val();
  //use your token for any other means.
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:45:33.337

我看到了 3 种方法：

*   您可以在 js 文件中使用 erb，将其命名为`application.js.erb`. 但是，您要传递的数据必须在编译文件时可用，因此这可能不是您想要做的；
*   您可以向服务器发出 XHR 请求以获取所需的值；
*   您可以将值嵌入到视图的 dom 中。有些人会建议使用隐藏字段，我更倾向于使用数据属性。例如，`<body data-my-value="32">...`. 您可以通过在您的 js 中检索它`$('body').data('my-value')`。一旦加载了dom，请小心调用它。

我倾向于使用后者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:47:11.207

`window.my_token`在全局范围内创建`my_token`一个变量；一旦它被定义，它就**可以**简单`application.js`地使用`my_token`。

# java - java中的私有变量和受保护变量

> ID：14604117
> 
> 赞同：-3
> 
> 时间：2013-01-30T12:33:27.000
> 
> 标签：java

> **可能重复：**
> [在 Java 中，公共、默认、受保护和私有之间有什么区别？](https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private)

私有状态的变量和受保护状态的变量之间有区别吗？

私人整体；受保护的整体；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:36:33.693

`private`属性只对所属类可见。一个`protected`属性对于所有扩展类也是可见的，但`private`属性不是这种情况。

# jquery - jQuery更新后切换停止工作

> ID：14604121
> 
> 赞同：1
> 
> 时间：2013-01-30T12:33:41.057
> 
> 标签：jquery, toggle

我在我的网站上使用 jquery 1.3。今天我将它更新到最新的 1.9 并且我的切换/动画脚本停止工作。

代码如下所示：

```
<a href="javascript: void(0);" id="toggler">Show more</a>
<div id="tcontent"> … </div>

$(document).ready(function() {                      
    $('#toggler').toggle(
    function() {
        $('#tcontent').animate({height: "70"}, 800);
    },
    function() {
        $('#tcontent').animate({height: "6"}, 800);
    });
}); 
```

这段代码有什么问题？当我将 jquery 1.3 包含回我的 html 时，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:54:58.453

试试这个

```
<a href="#" id="toggler" data-show="no">Show more</a> 
```

和

```
$(function() {                      
  $('#toggler').on("click",function(e) {
      if ($(this).data("show")=="no") {
        $('#tcontent').animate({height: "70"}, 800);
        $(this).data("show","yes");
      }   
      else {
        $('#tcontent').animate({height: "6"}, 800);
        $(this).data("show","no");     
      }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:37:18.673

```
$('#toggler').click( function() {
    $('#tcontent').toggle(
        function()
        {
            $(this).animate({height: "70"}, 800);
        },
        function()
        {
            $(this).animate({height: "6"}, 800);
        }
    );
}); 
```

# iphone - 框架选型如何？

> ID：14604124
> 
> 赞同：0
> 
> 时间：2013-01-30T12:33:53.600
> 
> 标签：iphone, ios, frameworks

如果我想拥有最新/最新版本，有人可以告诉我必须添加什么作为框架吗？

![框架选择](../Images/b19295d2c337f6f506ebacb6f7448333.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:52:41.963

在这种特殊情况下，它们都是相同的。您可以通过以下方式进行检查： `ls -al /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk/usr/lib/libz*`您将获得以下信息：

```
lrwxr-xr-x  1 root  wheel     16 Sep 20 13:58 libz.1.1.3.dylib -> libz.1.2.5.dylib
-rwxr-xr-x  1 root  wheel  79104 Sep 20 13:58 libz.1.2.5.dylib
lrwxr-xr-x  1 root  wheel     16 Sep 20 13:58 libz.1.dylib -> libz.1.2.5.dylib
lrwxr-xr-x  1 root  wheel     16 Sep 20 13:58 libz.dylib -> libz.1.2.5.dylib 
```

作为更一般的规则，没有版本号的是最新版本的符号链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:42:30.683

它非常简单

在 iOS 6 SDK 中，转到 Target > Build Phases > Link Binary with Libraries > 单击 + > 并键入所需的框架名称 > 双击框架。

# java - 哪种方法更明智？

> ID：14604126
> 
> 赞同：0
> 
> 时间：2013-01-30T12:33:58.847
> 
> 标签：java, web-services, soap, cxf

我需要开发一个网络服务。该服务的目的是读取一个 oracle blob 字段（存储图像文件）并发送到客户端。你认为哪种格式适合这个 blob 字段。如果我发送 byteArray 类型，客户端可以将其转换为图像。这种方法很容易我可以做到，但根据我的谷歌研究图像文件或其他文件类型可以发送 url 下载链接。哪个更明智？我的环境：j2ee,cxf,eclipse,soap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:37:38.163

在您的 wer-service 中将其读取为 BLOB，然后读取为字节数组。

但要发送它作为响应，您可能需要将其放入适当的内容类型中，即“image/jpeg”或“image/png”或任何正确的内容。

此外，您可能需要在回复中将其作为附件发送。

如果它的 SOAP 服务那么，SOAP with Attachement

# asp.net-mvc - 如何从静态下拉列表中获取数据以在 mvc4 中建模

> ID：14604131
> 
> 赞同：4
> 
> 时间：2013-01-30T12:34:23.710
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我的视图中有一个静态下拉列表

```
<select>
 <option value="volvo">Volvo</option>
 <option value="saab">Saab</option>
 <option value="mercedes">Mercedes</option>
 <option value="audi">Audi</option>
</select> 
```

我想将此下拉列表与我的模型绑定，以便当我提交选择的下拉列表值时，我从控制器中的模型中获取该值。

我还想根据模型中的数据在下拉列表中选择选项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T09:36:53.873

我刚刚为静态下拉列表制作了列表项并将其传递给下拉列表，我将它与我的视图模型绑定。

```
 @{
   var listItems = new List<ListItem> {new ListItem {Text = "Single", Value = "Single"}, new ListItem {Text = "Married", Value = "Married"}, new ListItem {Text = "Divorse", Value = "Divorse"}};
   }
 @Html.DropDownListFor(model => model.EmployeeDetail.MaritalStatus, new SelectList(listItems),"-- Select Status --") 
```

它对我来说非常有效，因为它显示了来自模型的值，并且在我提交数据时还在模型中存储了下拉列表的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T12:58:32.853

不要在 HTML 中构建下拉列表，而是在您的服务/控制器中构建它并将其添加到您的模型中：

视图模型：

```
public class YourViewModel
{
    public string SelectedCarManufacturer { get; set; }

    public Dictionary<string, string> CarManufaturers { get; set; }

    // your other model properties
} 
```

控制器获取操作方法

```
[HttpGet]
public ActionResult SomeAction()
{
    var model = new YourViewModel
    {
        SelectedCarManufacturer = null, // you could get this value from your repository if you need an initial value
        CarManufaturers = new Dictionary<string, string>
        {
            { "volvo", "Volvo" },
            { "saab", "Saab" },
            { "audi", "Audi" },
            /// etc.
        }
    };

    return this.View(model);
} 
```

在您看来，将硬编码下拉列表替换为：

```
@Html.DropDownListFor(m => m.SelectedCarManufacturer , new SelectList(Model.CarManufaturers , "Key", "Value"), "Select a manufacturer...") 
```

控制器后操作方法

```
[HttpPost]
public ActionResult SomeSaveAction(YourViewModel model)
{
    // do something with the model...
    // model.SelectedCarManufacturer 
} 
```

或者

```
[HttpPost]
public ActionResult SomeSaveAction()
{
    var model = someService.BuildYourViewModel()
    this.TryUpdateModel(model);

    // do something with the model...
    someService.SaveYourViewModel(model);
} 
```

我希望这有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:42:13.683

在控制器中

```
List<SelectListItem> items = new List<SelectListItem>();

     items.Add(new SelectListItem { Text = "Volvo", Value = "volvo"});

     items.Add(new SelectListItem { Text = "Saab", Value = "saab" });

     items.Add(new SelectListItem { Text = "Mercedes", Value = "mercedes" });

     items.Add(new SelectListItem { Text = "Audi", Value = "audi" }); 
```

正在查看

```
Html.DropDownListFor(Model.items) 
```

# jakarta-ee - 想要在两个 servlet 中使用相同的 EJB，但即使 EJB 标记为 @Stateful，它们似乎使用不同的 EJB？

> ID：14604140
> 
> 赞同：1
> 
> 时间：2013-01-30T12:34:50.173
> 
> 标签：jakarta-ee, servlets, ejb, ejb-3.1

我有一个有状态的 EJB 作为购物车。我有两个 servlet，其中一个用于将产品添加到购物车。另一个用于检索购物车信息，即。购物车中的产品和产品数量。

购物车在请求之间保持其状态，就像它应该为 AddToCartServlet 一样。然而，当使用 ShoppingCartInfoServlet 时，即使购物车中有多个产品，购物车中的产品列表也是 0。因此，当我在 ShoppingCartInfoServlet 中时，我似乎没有获得相同的 EJB。当然，它应该与我将其注释为@Stateful 的 EJB 相同？

```
@Stateful
public class ShoppingCart {
    List<Product> products;

    ...
}

public class AddToCartServlet extends HttpServlet {
    @EJB
    ShoppingCart shoppingCart;

    ...
}

public class ShoppingCartInfoServlet extends HttpServlet {
    @EJB
    ShoppingCart shoppingCart;

    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:49:24.933

有状态意味着同一个客户端（在本例中为 servlet）将通过多个方法调用继续与同一个实例通信。

另一个客户端（Servlet）将获得它自己的实例。您必须将 bean 存储在 http 会话中才能实现您想要的。

[使用有状态会话 Bean 跟踪用户的会话](https://stackoverflow.com/questions/8480096/using-a-stateful-session-bean-to-track-an-users-session)

# c++ - C++ 中的 getline() 函数不起作用

> ID：14604141
> 
> 赞同：1
> 
> 时间：2013-01-30T12:35:01.843
> 
> 标签：c++, file, getline

我用 C++ 编写了一个代码，它打开一个 .txt 文件并读取其内容，将其视为一个（MAC 地址数据库），每个 MAC 地址由 (.) 分隔，我的问题是在我搜索文件后行数，我无法将指针返回到文件的初始位置，在这里我`seekg() and tellg()`用来操作指向文件的指针。

这是代码：

```
#include <iostream>
#include <fstream>
#include <conio.h>

using namespace std;

int main ()
{
 int i = 0;
string str1;

ifstream file;
file.open ("C:\\Users\\...\\Desktop\\MAC.txt");  

 //this section calculates the no. of lines

while (!file.eof() )
{
  getline (file,str1); 
 for (int z =0 ; z<=15; z++)
 if (str1[z] == '.')
 i++;   
}

file.seekg(0,ios::beg);
getline(file,str2);

cout << "the number of lines are " << i << endl; 
cout << str2 << endl;

file.close();

      getchar();
      return 0;
      } 
```

这是 MAC.txt 文件的内容：

0090-d0f5-723a。

0090-d0f2-87hf。

b048-7aae-t5t5。

000e-f4e1-xxx2。

1c1d-678c-9db3。

0090-d0db-f923。

d85d-4cd3-a238。

1c1d-678c-235d。

`here the the output of the code is supposed to be the first MAC address but it returns the last one .`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:38:39.307

```
file.seekg(0,ios::end); 
```

我相信你想要`file.seekg(0,ios::beg);`这里。

与结尾 ( ) 的零偏移量`ios::end`是文件的结尾。读取失败，您只剩下在缓冲区中读取的最后一个值。

此外，一旦您到达`eof`，您应该`file.clear();`在寻找之前手动重置它：

```
file.clear();
file.seekg(0,ios::beg);
getline(file,str2); 
```

如果您在执行文件操作时检查错误，该错误会更容易发现。有关示例，请参见 Kerrek SB 的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:43:19.883

您的代码正在犯各种错误。您永远不会检查任何错误状态！

这应该是这样的：

```
std::ifstream file("C:\\Users\\...\\Desktop\\MAC.txt");  

for (std::string line; std::getline(file, line); )
// the loop exits when "file" is in an error state
{
    /* whatever condition */ i++;   
}

file.clear();                 // reset error state
file.seekg(0, std::ios::beg); // rewind

std::string firstline;
if (!(std::getline(file, firstline)) { /* error */ }

std::cout << "The first line is: " << firstline << "\n"; 
```

# c# - 解析剪贴板功能 GetData(DataFormats.Html) 输出的标准类

> ID：14604146
> 
> 赞同：6
> 
> 时间：2013-01-30T12:35:15.587
> 
> 标签：c#, clipboard

对不起标题...

所以我想从剪贴板中提取文本。此文本是从网页（在浏览器中）复制的。就我而言，它是一个包含一些数据的表格。

所以我用以下代码提取了数据（它以字符串的形式出现）：

```
IDataObject iData = Clipboard.GetDataObject();

if (iData.GetDataPresent(DataFormats.Html))
{
    string s = (string)iData.GetData(DataFormats.Html);
} 
```

我从中得到的（s 包含的内容）如下：

```
Version:0.9
StartHTML:0000000397
EndHTML:0000004086
StartFragment:0000000433
EndFragment:0000004050
SourceURL:Bla Bla Bla
<html>
<body>
<!--StartFragment--><table class="listing tickets">Bla Bla Bla</table><!--EndFragment-->
</body>
</html> 
```

所以，再一次。是否有任何标准类可以解析这些数据，或者我应该自己创建一个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T07:25:46.467

好的，所以答案似乎是否定的！这让我有些惊讶……

反正。我制作了自己的助手类，也许可以帮助你。这只是众多可能的解决方案之一。对于我的应用程序，如果找不到任何内容，返回 null 效果很好，也许您想要一个异常。另请记住，我将其作为一个副项目进行，因此没有对代码进行广泛的测试，因此**我不保证它有效**。

```
public class ClipboardHtmlOutput
{
    public Double Version { get; private set; }
    public String Source { get; private set; }
    public String Input { get; private set; }
    //public String Html { get { return Input.Substring(startHTML, (endHTML - startHTML)); } }
    public String Html { get { return Input.Substring(startHTML, Math.Min(endHTML - startHTML, Input.Length - startHTML)); } }
    public String Fragment { get { return Input.Substring(startFragment, (endFragment - startFragment)); } }

    private int startHTML;
    private int endHTML;
    private int startFragment;
    private int endFragment;

    public static ClipboardHtmlOutput ParseString(string s)
    {
        ClipboardHtmlOutput html = new ClipboardHtmlOutput();

        string pattern = @"Version:(?<version>[0-9]+(?:\.[0-9]*)?).+StartHTML:(?<startH>\d*).+EndHTML:(?<endH>\d*).+StartFragment:(?<startF>\d+).+EndFragment:(?<endF>\d*).+SourceURL:(?<source>f|ht{1}tps?://[-a-zA-Z0-9@:%_\+.~#?&//=]+)";
        Match match = Regex.Match(s, pattern, RegexOptions.Singleline);

        if (match.Success)
        {
            try
            {
                html.Input = s;
                html.Version = Double.Parse(match.Groups["version"].Value, CultureInfo.InvariantCulture);
                html.Source = match.Groups["source"].Value;
                html.startHTML = int.Parse(match.Groups["startH"].Value);
                html.endHTML = int.Parse(match.Groups["endH"].Value);
                html.startFragment = int.Parse(match.Groups["startF"].Value);
                html.endFragment = int.Parse(match.Groups["endF"].Value);
            }
            catch (Exception fe)
            {
                return null;
            }
            return html;
        }
        return null;
    }
} 
```

用法可能是这样的：

```
IDataObject iData = Clipboard.GetDataObject();

if (iData.GetDataPresent(DataFormats.Html))
{
    ClipboardHtmlOutput cho = ClipboardHtmlOutput.ParseString((string)iData.GetData(DataFormats.Html));
    XmlDocument xml = new XmlDocument();
    xml.LoadXml(cho.Fragment);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-21T06:57:23.297

以下方法是微软的方法。此方法包含在示例“XAML 到 HTML 转换演示”中的 HtmlParser 类中，您可以在此处下载：[https](https://code.msdn.microsoft.com/windowsdesktop/XAML-to-HTML-Conversion-ed25a674/view/SourceCode) ://code.msdn.microsoft.com/windowsdesktop/XAML-to-HTML-Conversion-ed25a674/view/SourceCode 。

您可以在此处找到有关“HTML 剪贴板格式”的其他信息：[https ://msdn.microsoft.com/en-us/library/aa767917(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/aa767917(v=vs.85).aspx)

```
/// <summary>
/// Extracts Html string from clipboard data by parsing header information in htmlDataString
/// </summary>
/// <param name="htmlDataString">
/// String representing Html clipboard data. This includes Html header
/// </param>
/// <returns>
/// String containing only the Html data part of htmlDataString, without header
/// </returns>
internal static string ExtractHtmlFromClipboardData(string htmlDataString)
{
    int startHtmlIndex = htmlDataString.IndexOf("StartHTML:");
    if (startHtmlIndex < 0)
    {
        return "ERROR: Urecognized html header";
    }
    // TODO: We assume that indices represented by strictly 10 zeros ("0123456789".Length),
    // which could be wrong assumption. We need to implement more flrxible parsing here
    startHtmlIndex = Int32.Parse(htmlDataString.Substring(startHtmlIndex + "StartHTML:".Length, "0123456789".Length));
    if (startHtmlIndex < 0 || startHtmlIndex > htmlDataString.Length)
    {
        return "ERROR: Urecognized html header";
    }

    int endHtmlIndex = htmlDataString.IndexOf("EndHTML:");
    if (endHtmlIndex < 0)
    {
        return "ERROR: Urecognized html header";
    }
    // TODO: We assume that indices represented by strictly 10 zeros ("0123456789".Length),
    // which could be wrong assumption. We need to implement more flrxible parsing here
    endHtmlIndex = Int32.Parse(htmlDataString.Substring(endHtmlIndex + "EndHTML:".Length, "0123456789".Length));
    if (endHtmlIndex > htmlDataString.Length)
    {
        endHtmlIndex = htmlDataString.Length;
    }

    return htmlDataString.Substring(startHtmlIndex, endHtmlIndex - startHtmlIndex);
} 
```

25.02.2015 添加

按照我的实施。我必须注意 UTF-8（参见 at 和 of 方法）

```
/// <summary>
/// Extracts selected Html fragment string from clipboard data by parsing header information 
/// in htmlDataString
/// </summary>
/// <param name="htmlDataString">
/// String representing Html clipboard data. This includes Html header
/// </param>
/// <returns>
/// String containing only the Html selection part of htmlDataString, without header
/// </returns>
internal static string ExtractHtmlFragmentFromClipboardData(string htmlDataString)
{
    // HTML Clipboard Format
    // (https://msdn.microsoft.com/en-us/library/aa767917(v=vs.85).aspx)

    // The fragment contains valid HTML representing the area the user has selected. This 
    // includes the information required for basic pasting of an HTML fragment, as follows:
    //  - Selected text. 
    //  - Opening tags and attributes of any element that has an end tag within the selected text. 
    //  - End tags that match the included opening tags. 

    // The fragment should be preceded and followed by the HTML comments <!--StartFragment--> and 
    // <!--EndFragment--> (no space allowed between the !-- and the text) to indicate where the 
    // fragment starts and ends. So the start and end of the fragment are indicated by these 
    // comments as well as by the StartFragment and EndFragment byte counts. Though redundant, 
    // this makes it easier to find the start of the fragment (from the byte count) and mark the 
    // position of the fragment directly in the HTML tree.

    // Byte count from the beginning of the clipboard to the start of the fragment.
    int startFragmentIndex = htmlDataString.IndexOf("StartFragment:");
    if (startFragmentIndex < 0)
    {
        return "ERROR: Unrecognized html header";
    }
    // TODO: We assume that indices represented by strictly 10 zeros ("0123456789".Length),
    // which could be wrong assumption. We need to implement more flrxible parsing here
    startFragmentIndex = Int32.Parse(htmlDataString.Substring(startFragmentIndex + "StartFragment:".Length, 10));
    if (startFragmentIndex < 0 || startFragmentIndex > htmlDataString.Length)
    {
        return "ERROR: Unrecognized html header";
    }

    // Byte count from the beginning of the clipboard to the end of the fragment.
    int endFragmentIndex = htmlDataString.IndexOf("EndFragment:");
    if (endFragmentIndex < 0)
    {
        return "ERROR: Unrecognized html header";
    }
    // TODO: We assume that indices represented by strictly 10 zeros ("0123456789".Length),
    // which could be wrong assumption. We need to implement more flrxible parsing here
    endFragmentIndex = Int32.Parse(htmlDataString.Substring(endFragmentIndex + "EndFragment:".Length, 10));
    if (endFragmentIndex > htmlDataString.Length)
    {
        endFragmentIndex = htmlDataString.Length;
    }

    // CF_HTML is entirely text format and uses the transformation format UTF-8
    byte[] bytes = Encoding.UTF8.GetBytes(htmlDataString);
    return Encoding.UTF8.GetString(bytes, startFragmentIndex, endFragmentIndex - startFragmentIndex);
} 
```

# html - 通过 CSS 进行图像翻转不适用于所有浏览器

> ID：14604149
> 
> 赞同：0
> 
> 时间：2013-01-30T12:35:17.130
> 
> 标签：html, css, cross-browser

我通过 CSS 翻转图像并在 mozila 中进行操作。但在所有其他浏览器中它不起作用。我无法知道我在这里缺少什么。

这是我的图像代码：

```
<div id="f1_container">
<div id="f1_card" class="shadow">
  <div class="front face">
    <img src="http://placehold.it/300x300"/>
  </div>
  <div class="back face center">
    <p>This is nice for exposing more information about an image.</p>
    <p>Any content can go here.</p>
  </div>
</div>
</div> 
```

这是我的CSS：

```
#f1_container {
  position: relative;
  margin: 10px auto;
  width: 450px;
  height: 281px;
  z-index: 1;
}
#f1_container {
  perspective: 1000;
}
#f1_card {
  width: 100%;
  height: 100%;
  transform-style: preserve-3d;
  transition: all 1.0s linear;
}
#f1_container:hover #f1_card {
  transform: rotateY(180deg);
  box-shadow: -5px 5px 5px #aaa;
}
.face {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
}
.face.back {
  display: block;
  transform: rotateY(180deg);
  box-sizing: border-box;
  padding: 10px;
  color: white;
  text-align: center;
  background-color: #aaa;
}
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:38:29.500

您正在使用最前沿的 CSS 属性。

`transform`，例如，仅在 IE 10、Firefox 和 Opera 中无前缀有效。

您可以通过复制带有`-webkit-`前缀的属性来获得基于 webkit 的浏览器的支持（因为该实现在该引擎中仍被认为是实验性的）。

另请参阅：[我可以使用](http://caniuse.com/#search=transform)

# html - 最新版本的动力学 js 的问题

> ID：14604152
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:35:32.943
> 
> 标签：html, kineticjs

我有代码示例[代码](http://jsfiddle.net/akhiyadav1/LmM4K/1/#run)，当我使用 kinetic-v3.10.1.min.js 时可以完美运行，除了任何最新版本的 kinetic.js 都会引发脚本错误

```
TypeError: this.attrs.container is undefined
[Break On This Error]   
this.attrs.container.appendChild(this.content); 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:39:07.953

[https://github.com/ericdrowell/KineticJS/wiki/Change-Log](https://github.com/ericdrowell/KineticJS/wiki/Change-Log)

您真正需要做的是浏览此更改日志，并查看您的代码中的内容与较新版本中的内容。

从查看您的代码来看，我的猜测是 Kinetic.Shape 不再支持绘制图像，这就是 Kinetic.Image 的用途。

# metadata - 如何在 Blackberry 10 Cascade 中获取视频的元数据？

> ID：14604154
> 
> 赞同：1
> 
> 时间：2013-01-30T12:35:38.153
> 
> 标签：metadata, cascade, blackberry-10

我有 C++ Blackberry Cascade 应用程序。我正在尝试使用此代码读取视频文件的元数据

```
onMetaDataChanged: {
                    console.log("player onMetaDataChanged");
                    console.log("--------------------------------bit_rate=" + myPlayer.metaData.bit_rate);
                    console.log("-----------------------------------genre=" + myPlayer.metaData.genre);
                    console.log("-----------------------------sample_rate=" + myPlayer.metaData.sample_rate);
                    console.log("-----------------------------------title=" + myPlayer.metaData.title);  } 
```

但这仅在播放视频文件后才有效。有没有办法在不播放的情况下获取视频文件的元数据？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:22:45.710

调用准备槽。它将在不播放曲目的情况下获取播放所需的资源并发出 MetaDataChanged 信号。

> myPlayer.prepare()

# javascript - jQuery：将 img alt 标签更改为列表值

> ID：14604160
> 
> 赞同：2
> 
> 时间：2013-01-30T12:36:01.353
> 
> 标签：javascript, jquery, each

我创建了一个列表，其中每个列表项都包含一个图像和一个标题。我现在希望图像 alt 和标题标签与列表项中的标题相同，但我无法使其正常工作。目前，我将所有标题放入所有 img 标签中（这是我的 js 所期望的），但我不知道如何让第一个`$('ul li img')`只拿起第一个`$('ul li').text()`，第二个拿起第二个`$('ul li').text()`， ETC。

的HTML：

```
<ul>
<li><img src="path.jpg" /><p>Title 1</p></li>
<li><img src="path.jpg" /><p>Title 2</p></li>
</ul> 
```

JS：

```
$(document).ready(function() {
$('ul li img').each(function() {
    var valueTitle = $('ul li').text();
    $(this).attr({
        alt: valueTitle,
        title: valueTitle
    });
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:39:17.653

`<p>`元素跟随 every `<img>`，所以：

```
$("ul li img").each(function() {
    var $this = $(this),
        valueTitle = $this.next("p").text();

    $this.attr({
        alt: valueTitle,
        title: valueTitle
    });
}); 
```

**演示：http:** [//jsfiddle.net/cquJX/](http://jsfiddle.net/cquJX/)

# ios - 如何刷新自定义绘制单元格的颜色？

> ID：14604162
> 
> 赞同：1
> 
> 时间：2013-01-30T12:36:06.330
> 
> 标签：ios, uitableview, drawrect

我有实现自定义绘制设计的自定义 UITableViewCell 类（如您所见，单元格具有阴影效果。）正如您在下面看到的，我正在尝试用白色绘制第一个单元格，任何其他单元格都必须是灰色的。

```
- (void)drawRect:(CGRect)rect {
CGContextRef context = UIGraphicsGetCurrentContext();

CGColorRef whiteColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor;
if (_rowNumber == 0)
    CGColorRef lightColor = [UIColor whiteColor].CGColor;
else
    CGColorRef lightColor = [UIColor grayColor].CGColor;
CGColorRef darkColor = _darkColor.CGColor;
CGColorRef shadowColor = [UIColor colorWithRed:0.1 green:0.1 blue:0.1 alpha:0.5].CGColor;
CGContextSetFillColorWithColor(context, whiteColor);

CGContextFillRect(context, _paperRect);
CGContextSaveGState(context);

CGContextSetShadowWithColor(context, CGSizeMake(0, 2), 7.0, shadowColor);
CGContextSetFillColorWithColor(context, lightColor);

CGContextFillRect(context, _coloredBoxRect);
CGContextRestoreGState(context); 
} 
```

问题是：当我使用 dequeueReusableCellWithIdentifier 时，“drawRect”方法只调用了 3 次（我的单元格的高度为 200），所以第四个单元格的颜色与第一个相同。

有什么办法可以解决这个问题吗？谢谢

更新我试图从 UITableViewController 调用我的自定义重绘方法，但我有“空”上下文错误

```
- (void)refreshColorOfRow:(int)row{
 CGContextRef context = UIGraphicsGetCurrentContext();
 if (row > 0)
     _lightColor = [UIColor colorWithRed:200.0f/255.0f green:199.0f/255.0f blue:200.0f/255.0f alpha:1.0];
 else
     _lightColor = [UIColor colorWithRed:240.0f/255.0f green:240.0f/255.0f blue:240.0f/255.0f alpha:1.0];
CGColorRef lightColor = _lightColor.CGColor;
CGContextSetFillColorWithColor(context, lightColor);
CGContextFillRect(context, _coloredBoxRect);
CGContextRestoreGState(context);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:43:08.780

我假设您正在设置`_rowNumber`为您的`UITableViewCell`子类的属性。您应该在 setter 中调用 setNeedsDisplay 来强制重绘：

```
-(void) setRowNumber:(int)value {
    _rowNumber = value;
    [self setNeedsDisplay];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:45:12.163

我认为你可以使`first cell`和`other cells`不同`identifier`，比如`first cell`s resueIdentifier 是`@"first"`；`other cells`s resueIdentifier 是`@"others"`然后在您的自定义单元格中，您可以创建一个`BOOL _isFirstCell`标记`first cell`然后在 `- (void)drawRect:(CGRect)rect`方法中，您可以绘制两种类型的单元格使用`if else`语句

```
- (void)drawRect:(CGRect)rect {
CGContextRef context = UIGraphicsGetCurrentContext();

CGColorRef whiteColor = [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0].CGColor;
if (_isFirstCell)
    CGColorRef lightColor = [UIColor whiteColor].CGColor;
else
    CGColorRef lightColor = [UIColor grayColor].CGColor;
CGColorRef darkColor = _darkColor.CGColor;
CGColorRef shadowColor = [UIColor colorWithRed:0.1 green:0.1 blue:0.1 alpha:0.5].CGColor;
CGContextSetFillColorWithColor(context, whiteColor);

CGContextFillRect(context, _paperRect);
CGContextSaveGState(context);

CGContextSetShadowWithColor(context, CGSizeMake(0, 2), 7.0, shadowColor);
CGContextSetFillColorWithColor(context, lightColor);

CGContextFillRect(context, _coloredBoxRect);
CGContextRestoreGState(context); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T12:45:38.407

在`-(UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath`你可以打电话`[cell setNeedsDisplay];`。

`[cell setBackgroundColor:[UIColor yourColorXY]];`但是，如果您只想要一些简单的颜色和阴影，为什么不使用呢？

**编辑：** 就像郭陆川说的，是一个经常被称为`drawRect:`表演杀手的人。试试简单吧；）

```
NSIndexPath *selectedCell; //Declare this in your .h

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CellIdentifier";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier: CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier: CellIdentifier];
    }
    if (selectedCell.section==indexPath.section && selectedCell.row==indexPath.row) {
        [cell.contentView setBackgroundColor:[UIColor whiteColor]];
        [cell.textLabel setText:@"The Choosen One"];
    } else {
        [cell.contentView setBackgroundColor:[UIColor lightGrayColor]];
        [cell.textLabel setText:@"FOO"];
    }
    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    selectedCell=indexPath;
    [tableView reloadData];
} 
```

对于阴影，你可以玩弄..

```
#import <QuartzCore/QuartzCore.h>

CALayer *layer=[cell layer]; //Or [tableView layer] or whatever you need
[layer setShadowColor:[[UIColor lightGrayColor] CGColor]];
[layer setShadowOffset:CGSizeMake(1, 1)];
[layer setShadowOpacity:1.0];
[layer setMasksToBounds:NO]; 
```

# css - 以 HTML 为中心的 DIV

> ID：14604163
> 
> 赞同：0
> 
> 时间：2013-01-30T12:36:14.147
> 
> 标签：css, html, center, css-reset

我正在尝试使 div 居中。这是我的代码：

```
<!Doctype Html>
<html>
    <head>
        <title>title</title>
        <style type="text/css">
            * {
                text-align: left;
            }
        </style>
    </head>
    <body>
        <div id="container" style="width: 500px; margin-left: auto; margin-right: auto; text-align: center;">
            <div id="content" style="text-align: center;">
                <p>Beispiel: DIV Container horizontal zentrieren.</p>
            </div>
        </div>
    </body>
</html> 
```

它不是完全居中的，因为我在 CSS 重置中设置了 text-align 左侧。如果我删除这条线，一切都很好。为什么是文本对齐：居中；id 为#content 的div 没有覆盖CSS 重置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:39:51.530

您需要`!important`覆盖它（留下 p 标签）

```
#content{margin:0 auto; background:red; width: 500px; text-align: center !important;} 
```

**[演示 1](http://jsfiddle.net/pKePx/2/)**

否则你可以为 p 标签写 css

```
#content p{text-align: center } 
```

[**演示 2**](http://jsfiddle.net/pKePx/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:42:57.167

试试[这个](http://jsbin.com/irumef/1/)

关键点是

```
margin: 0 auto 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:50:13.620

更好，更少的标记：

```
<!Doctype Html>
<html>
    <head>
        <title>title</title>
        <style type="text/css">
            #content{
                width: 500px;
                margin:0 auto;
            }
            #content p {
                text-align:center; 
            }
        </style>
    </head>
    <body>
        <div id="content">
            <p>Beispiel: DIV Container horizontal zentrieren.</p>
        </div>
    </body>
</html> 
```

在大多数情况下，最好避免使用“行内样式”。还将您的样式移动到单独的 css 文件中，以获得更好的可维护性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:58:04.413

在 HTML * 标签中意味着它严格考虑所有标签的属性，正如你在两者之间提到的，你需要改变你的风格，请访问链接

# ada - 不同数组长度的未经检查的转换

> ID：14604164
> 
> 赞同：1
> 
> 时间：2013-01-30T12:36:14.177
> 
> 标签：ada

我在以下情况下遇到约束错误：

从过程中获取受约束的缓冲区：

```
Get_MyBuffer(data => Buffer); -- This is ok 
```

缓冲区的类型为 Unsigned_Byte。想将其转换为字节。

```
function To_Byte is new Unchecked_Conversion (Source => Unsigned_Byte,
                                              Target => Byte);
MyFunction2Pass(To_Byte(Buffer)); -- Having warning 'uncheked conversion to unconstrained array subtype is not portable. 
```

在 MyFunction2Pass 中打印

```
function MyFunction2Pass(Data : Byte) is
begin
    New_Line(integer'image(integer(Data(1)))); -- **Shoot Constrain Error**
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:44:16.267

你的那一条线做了很多。这没有什么问题，但是当您遇到此异常时暂时不方便。您现在可以考虑将每个例程调用拆分为单独的行，以便您可以跟踪哪个调用发出了约束错误。

```
 Bit     : constant boolean := Data(1);  -- I'm guessing this is the right type
    Bit_Int : constant integer := integer(Bit);
    Bit_Img : constant string  := integer'image(Bit_Int);
begin
    New_Line (Bit_Img);
end 
```

现在哪一行给出了约束错误？（当然，在清理任何编译器错误之后）。

# linux-kernel - 出错：没有这样的文件或目录

> ID：14604166
> 
> 赞同：3
> 
> 时间：2013-01-30T12:36:17.963
> 
> 标签：linux-kernel, makefile, kernel-module

我是内核模块开发的新手。所以我从简单的 hello world 内核模块开始，我使用“Linux 内核模块编程指南”一书作为参考（它针对内核 2.6）。我用 yum 安装了 kernel-devel 和 kenel 头文件。我正在使用 Fedora 17。我发现一个符号链接

`/lib/modules/3.3.4-5.fc17.x86_64/build -> /usr/src/kernels/3.3.4-5.fc17.x86_64`

现在，我有一个 hello-1.c（简单的内核模块和我的工作目录中的 Makefile）Makefile 是：

```
obj-m += hello-1.o
all:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules
clean:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean 
```

在 $make 中时出现错误：

```
make -C /lib/modules/3.3.4-5.fc17.x86_64/build M=/root/kerneldev modules
make: *** /lib/modules/3.3.4-5.fc17.x86_64/build: No such file or directory.  Stop.
make: *** [all] Error 2 
```

我在 Centos-5.x 上成功运行相同的程序，因为 /lib/modules/3.3.4-5.fc17.x86_64/build 包含实际模块（不是符号链接）。应该是什么问题？为什么会有这样的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T09:50:07.107

尝试“yum install kernel-devel”（用于内核头文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:25:40.490

我几乎没有疑问，例如您在哪里发出 make 命令。您当前的目录似乎是

```
M=/root/kerneldev 
```

您的 hello-1.c 是否在`/root/kerneldev`文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-20T18:46:42.973

讯息

```
make: *** /lib/modules/3.3.4-5.fc17.x86_64/build: No such file or directory.  Stop. 
```

就是告诉你***后面的目录路径不存在。当目录不存在时，会`Make`发出这种确切格式的错误。`-C`其他不存在的路径情况会导致更多的单词。例如，如果该`/lib/modules/3.3.4-5.fc17.x86_64/build`目录确实存在但它不包含 makefile，`make`则将明确表示`no makefile found`.

因此，其他答案为您提供了帮助您创建具有正确内容的目录的想法。

这个答案还旨在通过解释消息本身来帮助具有上述错误消息形式并且安装'kernel-devel'对他们没有帮助的人。

# activepivot - 如何在 ActivePivot 中为日期创建分层维度？

> ID：14604176
> 
> 赞同：1
> 
> 时间：2013-01-30T12:36:42.283
> 
> 标签：activepivot

我是 ActivePivot 的新手，我想创建一个带有 的维度`DimensionType = time`，其中日期以分层方式显示。例如，`30.01.2013`我需要一年级-> `2013`（降序排序），一个月级（也降序排序）-> 1 和天级（也降序排序）->`30, 29, 28, ...`

通过 ActivePivotLive 查看应如下所示：

```
- 2013
  - 1
    - 30
    - 29
    - 28
    - ...
+ 2012
+ 2011 
```

等等。

我浏览了 ActivePivot 沙盒项目，但没有找到任何对我有帮助的东西。`TimeBucket`我在 中找到的维度`EquityDerivativesCube`相似，但存储桶的创建方式不同。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:47:51.583

好的，我处理它。不必进行往返并实施维度。`levels`和 a很容易做到`calculator`。
这里的代码来自`EquityDerivativesCube.xml`

```
<!-- Standard time buckets, bucketing performed at insertion -->
<dimension name="TimeBucket">
    <properties>
        <entry key="DimensionType" value="time" />
        <entry key="IsAllMembersEnabled" value="true" />
    </properties>           
    <level name="Year">
        <properties>
            <entry key="LevelType" value="TIME_YEARS" />
        </properties>
        <comparator pluginKey="ReverseOrder" />
    </level>
    <level name="Month">
        <properties>
            <entry key="LevelType" value="TIME_MONTHS" />
        </properties>
        <comparator pluginKey="Custom">
            <order name="firstObjects">
                <value>Jan</value>
                <value>Feb</value>
                <value>Mrz</value>
                <value>Apr</value>
                <value>Mai</value>
                <value>Jun</value>
                <value>Jul</value>
                <value>Aug</value>
                <value>Sep</value>
                <value>Okt</value>
                <value>Nov</value>
                <value>Dez</value>
            </order>
        </comparator>
    </level>
    <!-- The Value Date level is the field Date -->
    <level name="Value Date" property="Date">
        <properties>
            <entry key="LevelType" value="time" />
        </properties>
        <comparator pluginKey="ReverseOrder" />
    </level>
</dimension> 
```

我将以下代码段添加到`PNLCalculator.enrichTrade`：

```
...
            pnl = pnlVega + pnlDelta;
// Year and month calculations BEGIN

            final Calendar cal = CALENDAR.get();
            cal.setTime(trade.getDate());
            final int year = cal.get(Calendar.YEAR);
            final String month = DateFormatSymbols.getInstance(GERMANY).getShortMonths()[cal.get(MONTH)];
// Year and month calculations END

            // instantiate the result that will hold the enrichment data
            final PNLCalculatorResult result = new PNLCalculatorResult();
...

// add them to the result
            result.setYear(year);
            result.setMonth(month);
... 
```

我还扩展了`SanboxFields.xml`两个新字段：

```
...
    <field name="Year"              type="integer" />
    <field name="Month"             type="string" />
... 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:48:59.140

ActivePivot Sandbox 应用程序中的 TimeBucket 维度定义了基于财务时间段的自定义分桶。在 ActivePivot 中创建标准年 > 月 > 日层次结构实际上更简单且无缝。在描述中，如果架构需要声明三个字段（一个代表年，一个代表月，一个代表日）。

```
<field name="Year" indexation="dictionary" />
<field name="Month" indexation="dictionary" />
<field name="Day" indexation="dictionary" /> 
```

然后您需要声明一个引用这些字段的维度。

```
<dimension name="Time">
    <level name="Year" />
    <level name="Month" />
    <level name="Day" />
</dimension> 
```

然后 ActivePivot 将通过内省加载的记录以增量方式构建时间层次结构。

如果输入记录（对象）已经包含 Year 属性、Month 属性和 Day 属性（例如，如果输入记录是带有 getYear()、getMonth() 和 getDay() 方法的 POJO），这将自动工作。如果不是这种情况，例如输入记录只有一个日期属性，您可以在将它们放入 ActivePivot 之前转换您的记录，或者在 ActivePivot 中注入一个计算器（*com.quartetfs.biz.pivot.classification.ICalculator*）这将即时计算日期的三个字段。查看 ActivePivot Sandbox 应用程序以获取计算器示例。

提取这些字段通常使用标准 Java 代码完成：

```
 Date date = new Date();
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(date);

    System.out.println("Date: "  + date);
    System.out.println("Year: "  + calendar.get(Calendar.YEAR));
    System.out.println("Month: " + calendar.get(Calendar.MONTH) + 1);
    System.out.println("Day: "   + calendar.get(Calendar.DAY_OF_MONTH)); 
```

关于维度级别的成员排序，ActivePivot 默认使用 java 对象（实现 java.lang.Comparable 接口的对象）的自然排序，因此日期和整数将从最低到最高排序。您可以通过在目标级别上声明“ReverseOrder”比较器来轻松地扭转这种情况。

```
<dimension name="Time">
    <level name="Year">
        <comparator pluginKey="ReverseOrder" />
    </level>
    <level name="Month">
        <comparator pluginKey="ReverseOrder" />
    </level>
    <level name="Day">
        <comparator pluginKey="ReverseOrder" />
    </level>
</dimension> 
```

# iphone - iPhone sdk 存储块参数供以后使用

> ID：14604179
> 
> 赞同：0
> 
> 时间：2013-01-30T12:36:52.537
> 
> 标签：iphone, automatic-ref-counting, objective-c-blocks

我有 2 节课：

A类：

`NSNotification`以姓名注册为观察员`notificationName`

.h 文件声明 -`typedef void (^block1)(NSError *error);`

私有实例变量 -`block1 _block1_obj;`

然后有2个这样的方法：

```
- (void) doSomethingWithCompletionHandler:(block1)handlerBlock
{
   _block1_obj = handlerBlock;    // Also tried _block1_obj = [handlerBlock copy];
   [classB_obj doAnotherThing];
}

- (void) notificationHandler:(NSNotification *)notification
{
   ...
   _block1_obj(error);
} 
```

B类：

```
- (void) doAnotherThing
{
   ...
   [[NSNotificationCenter defaultCenter] postNotificationName:notificationName
                                                            object:nil
                                                          userInfo:dict];
} 
```

现在我在调试时发现， `_block1_obj`在`doSomethingWithCompletionHandler`

但是一段时间后，当控制权进入 notificationHandler: `_block1_obj`时`nil`。

不知道为什么会这样。任何人都可以解释一下吗？

更新：我也尝试使用属性创建一个属性，`copy`但它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T06:22:55.277

您需要将块从堆栈复制到堆。如果您不使用它，则如果声明复制块是不够的，而是直接分配 ivar 而不使用复制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T13:03:31.660

您需要将实例变量声明为`__strong`，因此`ARC`将知道它必须保留对象。

我建议您在`.m`文件中使用私有属性，如下所示：

```
@interface YourClass ()

@property (strong, nonatomic) block1 block1_obj;

@end

@implementation YourClass

@end 
```

然后使用访问器分配块：

```
self.block1_obj = handlerBlock; 
```

# c# - 如何读取 file.txt 的一行内容

> ID：14604180
> 
> 赞同：0
> 
> 时间：2013-01-30T12:36:55.940
> 
> 标签：c#, winforms, visual-studio-2010

我有这样的一行：

`114765 * 3 * 659300 * 01 * 17/01/2013 * * 1 * Chuck Norris * Chuck Norris Jr* Owner * 1 * 28/04/1983 * Conjuge * * * 16/1/2013 * 1 * Quadro Social *`

正如您所看到的，内容/字段被它们分开，`*`它们是诸如此类的字段 `matriculation, name, dependent's name, category`......我想知道我怎么能一一“阅读”它？

另外我需要重新排序并编写一个新的file.txt，这些内容重新排序并且没有`*`......我完全迷失了！
在我阅读并删除后，`*`我需要像这样替换它们`\field\`： `\114765\\3\\659300\\01\\17/01/2013\\1\\Chuck Norris\` 我试过了`substring()`，`StreamWriter` `StreamReader` `ReadLine`但我做不到我需要的；\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:47:56.147

用于`String.Split`获取`string[]`列中的一个。您可以使用`String.Join`将所有部分连接到一个新字符串，`File.WriteAlltext`或`File.WriteAllLines` 将其写回。

> 在我阅读并删除 * 之后，我需要像 \field\ 一样替换它们：

因此，您需要将其替换`*`为`\`：

```
string[] parts = line.Split(new[] { '*' }, StringSplitOptions.RemoveEmptyEntries);
string newLine = string.Join("", parts.Select(p => string.Format("\\{0}\\", p.Trim())));
File.WriteAllText(filePath, newLine); 
```

[**演示**](http://ideone.com/SnahEy)

结果：

```
\114765\\3\\659300\\01\\17/01/2013\\\\1\\Chuck Norris\\Chuck Norris Jr\\Owner\\1\\28/04/1983\\Conjuge\\\\\\16/1/2013\\1\\Quadro Social\\\ 
```

**更新**：

如果要忽略空的部分（由`* *`字符串中的两个连续引起），则可以使用以下代码：

```
var nonEmptyParts = parts
    .Where(p => !string.IsNullOrWhiteSpace(p))
    .Select(p => string.Format("\\{0}\\", p.Trim()));
string newLine = string.Join("", nonEmptyParts); 
```

这将导致：

```
\114765\\3\\659300\\01\\17/01/2013\\1\\Chuck Norris\\Chuck Norris Jr\\Owner\\1\\28/04/1983\\Conjuge\\16/1/2013\\1\\Quadro Social\ 
```

> 我想忽略数组的前 2 个字符串，你知道只需删除它，扔掉它

那就是`Enumerable.Skip`：

```
var nonEmptyParts = parts.Skip(2)
    .Where(p => !string.IsNullOrWhiteSpace(p))
    .Select(p => string.Format("\\{0}\\", p.Trim())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:41:48.270

readline 是您需要从文本文件中读取一行的内容。一旦你在一个字符串中有整行，你就可以使用 Split 方法。

```
line.Split('*'); 
```

会给你一个字符串数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:40:45.340

一次读取一行文件，然后使用

```
myLine.split('*'); 
```

这会将字符串分成一个数组，将它拆分到有“*”的地方。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/y7h14879.aspx](http://msdn.microsoft.com/en-us/library/y7h14879.aspx)。

当您想将其写回另一个文件时，您应该能够根据需要排列数组中的项目并使用 StreamWriter 写入它们，确保传入新文件名。有关示例，请参见[http://www.dotnetperls.com/streamwriter 。](http://www.dotnetperls.com/streamwriter)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:52:37.093

重新排序文件中的行怎么样？只需将 fieldToSortBy 的值更改为按其他数字字段排序。

```
using System.IO;
using System.Linq;

namespace FileSorter
{
    class Program
    {
        static void Main(string[] args)
        {
            var fieldToSortBy = 0;

            //data.txt contains lines like 114765 * 3 * 659300 * 01 * 17/01/2013 * * 1 * Chuck Norris * Chuck Norris Jr* Owner * 1 * 28/04/1983 * Conjuge * * * 16/1/2013 * 1 * Quadro Social *
            var lines = File.ReadAllLines(@"C:\temp\data.txt");
            var splitLines = lines.Select(l => l.Split('*'));
            var orderedLines = splitLines.OrderByDescending(l => int.Parse(l[fieldToSortBy].Trim()));
            var joinedLines = orderedLines.Select(l => string.Join("*", l));
            File.WriteAllLines(@"C:\temp\output.txt", joinedLines);
        }
    }
} 
```

# iphone - 避免数据丢失：建议阅读

> ID：14604184
> 
> 赞同：4
> 
> 时间：2013-01-30T12:37:03.910
> 
> 标签：iphone, architecture, cloud, data-loss

我即将开发一个处理非常有价值的数据的应用程序。对用户而言，这些数据的任何损失都将是非常昂贵的，因此我有兴趣了解更多关于满足我们需求的最佳架构设计的信息。

用户每天都会在他们的 iPhone 中输入这些数据。使用此应用程序的替代方法是随身携带一张带有此敏感信息的纸。因此，虽然我知道我们可以比一张纸更安全，但我想确保我们也涵盖用户故事，例如“我把手机冲进马桶”或“我儿子删除了应用程序，我的数据在哪里？”

想到了 Dropbox 之类的服务，但我不想要求我们的用户拥有 Dropbox 帐户；同步架构必须对用户透明。iCloud 已经退出，因为网络和 Android 版本可能会随之而来。

任何人都可以建议一些关于这个主题的好读物，或者一些好的框架来看看吗？我希望使用 node.js 后端，虽然我们首先针对 iPhone，但 Android 将紧随其后。

数据本身由 2 个表组成，每个表都有少量字段，具有多对多关系。用户每天都会创建一些新行，但数据会很小且高度可压缩。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:54:02.417

原来这是一个极其困难的问题。在数据保证中（这还不是一种安全类型的情况，尽管由于保证方面可能成为一种情况）总是有一个时间元素。作为一个简单的例子，如果您的用户在本地更新了一些数据，会发生什么。就在您有能力将数据完全推送到某些云服务等之前......他/她将其倾倒在马桶中。即使存在用于传输数据的良好信号，也有传输时间和云服务器响应数据正确到达那里所需的时间。

一般来说，在数据保障方面，您确实必须尽最大努力。您将永远无法解决所有问题，因为没有数据中心，也没有链接到数据中心等......这是完美的。总是有数据丢失的机会。你能做的最好的事情就是在数据变化时同步，如果连接丢失，只要连接再次活跃。

现在，为了安全。安全本身并不能创造保证。如果数据本身是客户不想丢失的东西，这是他唯一的要求，那么安全性是不必要的。如果他/她还担心其他人会获取他的数据，那么您必须担心传输中的数据（同步期间的上下）以及设备本身。为了获得最佳的潜在安全性，请先在设备上本地加密数据，然后再通过云进行推送。有许多已知的攻击，即使使用 SSL 或其他服务，也可以获取数据。如果您愿意，在本地加密文件，那么您可以为某些增加的安全性仍然使用 SSL（此时您将对数据进行双重加密）。您还希望对数据进行签名，以使其在传输过程中被操纵的可能性很小，或由云服务器本身（如果黑客入侵了云服务器）。一般来说，在设备上保护数据的方法是，您可以选择让用户输入密码，并针对密码的形成方式以及在 30 分钟左右禁止尝试之前允许尝试多少次设置一些相当严格的规则。

您可能还希望以加密形式在本地存储数据。这样，如果有人拿到了设备，他们仍然需要密码才能获得数据（当然，除非他们可以破解您用来从密码生成对称密钥的算法）。

在在线数据服务方面，您可以使用 iCloud 等……我实际上不喜欢任何云。我认为这是反企业/专有数据，甚至都不好笑。我认为这么多手机/设备制造商都采用基于云的 SOOOOO，这实际上几乎是可笑的。我认为他们正在放弃大公司，因为据我所知，没有一家大公司愿意将他们的专有数据放在他们无法控制的云服务器上。无论如何，我认为只要您在发送数据之前有一个良好的本地加密方案，那么您应该没问题。但是，我会从保证的角度来看服务器在语言环境中的位置。原因是，如果数据的保证是最重要的问题，大多数大型 IT 设置都喜欢在国家/世界的相反两侧复制数据中心等...... 这样做的原因是，如果地震摧毁了该国一侧的数据中心，它很可能不会同时摧毁该国另一侧的数据中心。如果 iCloud 或您能找到的任何数据中心基本上位于一个区域设置，那么您可以考虑与西海岸的一个数据中心同步，并选择一个完全不同的数据中心（在本例中为公司）与该中心同步在东海岸。

这都是非常高级的，你将如何在 iPhone 上实现这一点，我们也可以讨论一下，我希望这至少开始有助于铺平道路。

# mysql - Mysql包含特定日期没有返回行的列

> ID：14604188
> 
> 赞同：0
> 
> 时间：2013-01-30T12:37:20.103
> 
> 标签：mysql, sql

我想问一个关于 mysql 查询的快速问题。

我有一个名为 trans 的表：

```
+----+---------------------+------+-------+----------+----------+
| ID | Date                | User | PCNum | Customer | trans_In |
+----+---------------------+------+-------+----------+----------+
|  8 | 2013-01-23 16:24:10 | test | PC2   | George   |       10 |
|  9 | 2013-01-23 16:27:22 | test | PC2   | Nick     |        0 |
| 10 | 2013-01-24 16:28:48 | test | PC2   | Ted      |       10 |
| 11 | 2013-01-25 16:36:40 | test | PC2   | Danny    |       10 |
+----+---------------------+------+-------+----------+----------+ 
```

和另一个命名的客户：

```
+----+---------+-----------+
| ID | Name    | Surname   |
+----+---------+-----------+
|  1 | George  |           |
|  2 | Nick    |           |
|  3 | Ted     |           |
|  4 | Danny   |           |
|  5 | Alex    |           |
|  6 | Mike    |           |
   .
   .
   .
   .
+----+---------+-----------+ 
```

我想查看日期范围内特定客户的 trans_in 列的总和，但也包括在结果集中，那些在所选日期范围内没有任何记录的客户。他们的 trans_in 总和可能显示为 NULL 或 0 没关系...

我有以下查询：

```
SELECT
  `Date`,
  Customer,
  SUM(trans_in) AS 'input'
FROM trans
WHERE Customer IN('George','Nick','Ted','Danny')
    AND `Date` >= '2013-01-24'
GROUP BY Customer
ORDER BY input DESC; 
```

但这只会返回 'Ted' 和 'Danny' 的总和，因为他们只有在 1 月 24 日之后才有交易......

如何包含 WHERE IN (...) 函数内的所有客户，即使是在所选日期范围内没有交易的客户？

我想我必须以某种方式与客户表一起加入他们，但我不知道如何。

提前致谢！！

:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:42:26.700

为了包含一个表中的所有记录而不匹配另一个表中的记录，您必须使用 LEFT JOIN。

```
SELECT
  t.`Date`,
  c.name,
  SUM(t.trans_in) AS 'input'
FROM customers c LEFT JOIN trans t ON (c.name = t.Customer AND t.`Date` >= '2013-01-24')
WHERE c.name IN('George','Nick','Ted','Danny')
GROUP BY c.name
ORDER BY input DESC; 
```

当然，我会提到您应该按 ID 引用客户，而不是在相关表中按名称。您当前的设置会导致信息重复。如果客户更改了他们的姓名，您现在必须更新 trans 表中的所有相关记录，而不仅仅是在 customer 表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:50:14.957

试试这个

```
 SELECT

 `Date`,
 Customer,
 SUM(trans_in) AS 'input'
 FROM trans
 inner join customers
 on customers.Name = trans.Customer
 WHERE Customer IN('George','Nick','Ted','Danny')

 GROUP BY Customer
 ORDER BY input DESC; 
```

# xslt - xslt 中的 1.16 * 100 产生 115.99999999999999

> ID：14604189
> 
> 赞同：1
> 
> 时间：2013-01-30T12:37:21.187
> 
> 标签：xslt, xslt-2.0

如果我尝试在 xslt 2.0 中相乘，`1.6 * 100`它将导致`115.99999999999999`

如何强迫它产生结果`116`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T13:39:19.673

您确定您`version="2.0"`在样式表中使用了像 Saxon 9 这样的 XSLT 2.0 处理器，并且 XPath 表达式包含像在您的示例中一样的数字文字`1.6 * 100`？

因为在这种情况下你应该得到一个精确的结果，例如

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:output method="text"/>

<xsl:template name="main">
  <xsl:value-of select="1.16 * 100"/>
</xsl:template>

</xsl:stylesheet> 
```

撒克逊 9.4 输出`116`。

结果与`version="1.0"`例如不同

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

<xsl:output method="text"/>

<xsl:template name="main">
  <xsl:value-of select="1.16 * 100"/>
</xsl:template>

</xsl:stylesheet> 
```

我收到警告“使用 XSLT 2 处理器运行 XSLT 1 样式表”和输出`115.99999999999999`.

因此，使用 XSLT 2.0 处理器并且`version="2.0"`在您的代码中您应该不会遇到问题，文字表示`xs:decimal`数字。

如果您处理 XML 输入，那么它与例如不同

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:output method="text"/>

<xsl:template match="item">
  <xsl:value-of select="a * b"/>
</xsl:template>

</xsl:stylesheet> 
```

和输入

```
<root>
  <item>
    <a>1.16</a>
    <b>100</b>
  </item>
</root> 
```

你明白了`115.99999999999999`。

在这种情况下，您应该确保处理器与`xs:decimal`s 一起工作

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0">

<xsl:output method="text"/>

<xsl:template match="item">
  <xsl:value-of select="xs:decimal(a) * xs:decimal(b)"/>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:50:41.560

强制您的代码将其舍入，如下所示：

```
 <xsl:template match="Number">
    <Result>
       <Total amount="{round(format-number(1.60, '#.00')*100)}"/>
   </Result>
 </xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:55:16.293

浮点数在起作用，因此存在容差错误：[http ://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# sql-server - SELECT 上的触发触发器

> ID：14604191
> 
> 赞同：4
> 
> 时间：2013-01-30T12:37:35.003
> 
> 标签：sql-server, select, triggers

我是触发器的新手，从 sql server 中的数据库表中选择值时需要触发触发器。我尝试在插入/更新和删除时触发触发器。选择值时有什么方法可以触发触发器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:40:38.820

我知道只有两种方法可以做到这一点，而且都不是触发器。

1.  您可以使用存储过程来运行查询并将查询记录到表和您想知道的其他信息中。
2.  您可以使用 SQL Server 的[审计功能](http://msdn.microsoft.com/en-us/library/cc280386.aspx)。

我从来没有使用过后者，所以我不能说易用性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:48:04.997

不，没有规定在 SELECT 操作上触发。正如前面的答案所建议的，编写一个存储过程，该过程采用从 SEECT 查询中获取的参数，并在所需的 SELECT 查询之后调用此过程。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-30T15:41:24.163

SpectralGhost 的回答假设您正在尝试对谁或什么查看了哪些数据进行安全审计。

但是，如果您对 sql 足够陌生，不知道 SELECT 触发器在概念上是愚蠢的，那么我会感到震惊，您可能正在尝试做其他事情，在这种情况下，您实际上是在谈论锁定而不是审计 - 即一旦一个进程具有读取您想要阻止其他进程访问它的特定记录（或者可能是不同表中的其他一些相关记录），直到事务被提交或回滚。在这种情况下，触发器绝对不是您的解决方案（它们很少是）。请参阅 BOL 关于事务控制和锁定

# python - 从 Musicxml 中提取信息

> ID：14604192
> 
> 赞同：7
> 
> 时间：2013-01-30T12:37:35.557
> 
> 标签：python, musicxml

我是编程和 Python 的新手，但我目前的很多研究都涉及从 musicxml 文件中提取数据。我有一首乐曲，想提取乐曲中出现的不属于调号一部分的临时记号的数量。我不知道该怎么做，请有人帮忙吗？这是我正在查看的 musicxml 文件中的一项度量的示例：

```
<measure number='19'>
        <print new-system='no'/>
        <note>
            <rest/>
            <duration>768</duration>
            <voice>1</voice>
            <type>quarter</type>
            <staff>1</staff>
        </note>
        <backup>
            <duration>768</duration>
        </backup>
        <note>
            <pitch>
                <step>E</step>
                <octave>4</octave>
            </pitch>
            <duration>2304</duration>
            <tie type='start'/>
            <voice>2</voice>
            <type>half</type>
            <dot/>
            <staff>1</staff>
            <notations>
                <tied type='start'/>
                <slur type='stop' number='1'/>
            </notations>
        </note>
        <backup>
            <duration>1536</duration>
        </backup>
        <note>
            <pitch>
                <step>E</step>
                <alter>3</alter>
                <octave>3</octave>
            </pitch>
            <duration>1536</duration>
            <voice>1</voice>
            <type>half</type>
            <staff>1</staff>
        </note>
        <note>
            <chord/>
            <pitch>
                <step>G</step>
                <alter>4</alter>
                <octave>3</octave>
            </pitch>
            <duration>1536</duration>
            <voice>1</voice>
            <type>half</type>
            <staff>1</staff>
        </note>
        <backup>
            <duration>2304</duration>
        </backup>
        <note>
            <pitch>
                <step>E</step>
                <octave>2</octave>
            </pitch>
            <duration>2304</duration>
            <voice>5</voice>
            <type>half</type>
            <dot/>
            <staff>2</staff>
        </note>
    </measure> 
```

问题转化为搜索musicxml文件并计算次数

```
<pitch>
   <step>*</step>
   <alter>**</alter>
       ... 
```

发生在 * 不是（F 或 C）的情况下，并且还找出 * 是 F 或 C 并且后面没有`<alter>`标签的次数。

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T07:17:26.887

我对 Python 细节无能为力，但我有两个与 MusicXML 相关的建议：

1）您的问题是用临时记号表达的，但您的代码侧重于 alter 元素。alter 元素用于改变音高；意外元素是用于书面意外的元素。你在找哪一个？在 MusicXML 中，有多少声音和它在符号中的出现方式之间的二元性很常见，并且对于使用 MusicXML 文件进行研究很重要。

2) 如果您不熟悉编程和 Python，我建议您使用专为音乐学设计的高级工具包，并具有良好的 MusicXML 支持。您会将问题域提升到更高的级别，这应该让您更快地取得进展。显而易见的选择是 music21 工具包，它也是用 Python 编写的。[在http://web.mit.edu/music21/](http://web.mit.edu/music21/)上有更多信息。

祝你的研究好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T13:09:03.097

python 有一个[xml.dom](http://docs.python.org/3/library/xml.dom.html)模块，可让您快速浏览 xml 文件。如果您有任何 Web 开发经验，它与 javascript 的文档对象模型非常相似。

```
from xml.dom.minidom import parse, parseString

def get_step(note):
    stepNode = note.getElementsByTagName("step")[0]
    #get the text from the Text Node within the <step>,
    #and convert it from unicode to ascii
    return str(stepNode.childNodes[0].nodeValue)

def get_alter(note):
    alters = note.getElementsByTagName("alter")
    if len(alters) == 0:
        return None
    return alters[0]

def is_rest(note):
    return len(note.getElementsByTagName("rest")) > 0

def is_accidental(note):
    return get_alter(note) != None

dom = parse("data.xml")

notes = dom.getElementsByTagName("note")
#rests don't have steps or alters, so we don't care about them. Filter them out.
notes = filter(lambda note: not is_rest(note), notes)

#compile a list of notes of all accidentals (notes with <alter> tags)
accidentals = filter(is_accidental, notes)
#remove notes that are F or C
accidentals_that_are_not_f_or_c = filter(lambda note: get_step(note) not in ["F", "C"], accidentals)

#compile a list of notes that don't contain the alter tag
non_accidentals = filter(lambda note: not is_accidental(note), notes)
#remove notes that are not F or C
non_accidentals_that_are_f_or_c = filter(lambda note: get_step(note) in ["F", "C"], non_accidentals)

print "Accidental notes that are not F or C:"
if len(accidentals_that_are_not_f_or_c) == 0:
    print "(None found)"
else:
    for note in accidentals_that_are_not_f_or_c:
        print get_step(note)

print "Non-accidental notes that are F or C:"
if len(non_accidentals_that_are_f_or_c) == 0:
    print "(None found)"
else:
    for note in non_accidentals_that_are_f_or_c:
        print get_step(note), get_step(note) in ["F", "C"] 
```

输出：

```
Accidental notes that are not F or C:
E
G
Non-accidental notes that are F or C:
(None found) 
```

# python - 0.8 版本的 django-registration 未显示registration_complete 模板

> ID：14604195
> 
> 赞同：0
> 
> 时间：2013-01-30T12:37:40.750
> 
> 标签：python, django, django-registration

我以前使用的是 0.6 版本的 django-registration。现在我升级到 0.8，我的 webapp 中出现了一些问题

我在`templates/registration`文件夹中有注册所需的这些文件（除其他外）

激活_完成.html 激活_email.txt 激活_email_subject.txt 注册_form.html 注册_完成.html

registration_form.html 是

```
{% extends "registration/auth_base.html" %}
{% block content %}{{block.super}}
<div class="subtitle short">Register</div>
       <div id="registerform" class="box half">
        <form action="/myapp/account/register/" method="POST">{% csrf_token %}
        {% if form.non_field_errors %}
            {{ form.non_field_errors }}
        {% endif %}
        <fieldset class="registerfields">            
            <p><label for="id_username">Username:</label> {{ form.username }}</p>
            {% if form.username.errors %}<p class="error">{{ form.username.errors }}</p>{% endif %}            
            <p><label for="id_email">EmailAddress:</label>{{ form.email }}</p>
            {% if form.email.errors %}<p class="error">{{ form.email.errors }}</p>{% endif %}
            <p><label for="id_password1">Password:</label>{{ form.password1 }}</p>
            {% if form.password1.errors %}<p class="error">{{ form.password1.errors }}</p>{% endif %}
            <p><label for="id_password2">Password(again):</label>{{ form.password2 }}</p>
            {% if form.password2.errors %}<p class="error">{{ form.password2.errors }}</p>{% endif %}

        <p>
            <input type="submit" value="Submit" />
        </p>
        </fieldset>

        </form>
        </div>
{% endblock %} 
```

模板registration_complete.html如下

```
{% extends "registration/auth_base.html" %}
{% block content %}{{block.super}}

<p id="message">Registration Complete! Check your email</p> 

{% endblock %} 
```

这里还有 auth_base.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Myapp{% block title %} {% endblock %}</title>
<LINK REL=StyleSheet HREF="{{MEDIA_URL}}css/myapp.css" TYPE="text/css" MEDIA="screen, print"/>
<link rel="shortcut icon" href="{{ MEDIA_URL }}img/myapp-icon.ico"/>
</head>
<body>

<div id="content">
   {% block content %}

   {% endblock %}
 </div>

<div id="sidebar"> 
    <h3> page info </h3>
    {% block whatis %}
    {% endblock %}

</div>
<div id="homelnk">
<a href="{% url home %}"><img class="centerpage" src="{{ MEDIA_URL }}img/home.png"></a>
</div>
</body>
</html> 
```

但是当我提交新的用户详细信息进行注册时，我没有得到这个registration_complete页面。我仍然得到一个带有空白字段的注册表单

尽管如此，激活链接已发送到电子邮件，我可以以新用户身份登录..为什么没有显示registration_complete页面？这曾经在旧版本的django-registration中工作..我找不到升级指南中有关模板的任何内容..

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:07:45.043

我将此模板用于registration_form.html：

```
{% extends "base.html" %}
{% load i18n %}

{% block content %}
<form method="post" action=".">
    {% csrf_token %}
  {{ form.as_p }}

<input type="submit" value="{% trans 'Submit' %}" />
</form>
{% endblock %} 
```

你可以在这里找到更多： [https ://github.com/nathanborror/django-registration/tree/master/registration/templates/registration](https://github.com/nathanborror/django-registration/tree/master/registration/templates/registration)

# jdbc - 为 hive jdbc 连接添加超时

> ID：14604199
> 
> 赞同：4
> 
> 时间：2013-01-30T12:37:56.173
> 
> 标签：jdbc, hadoop, timeout, hive

如何为 hive jdbc 连接添加超时。当 hive 挂起时，我的应用程序等待来自 hive 的响应。我需要的是，在指定时间（可能以分钟为单位）后，我的应用程序需要停止从配置单元连接中侦听，完成剩下的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:53:58.303

在 hive 配置文件中使用此属性。

```
<property>
  <name>hive.stats.jdbc.timeout</name>
  <value>30</value>
  <description>Timeout value (number of seconds) used by JDBC connection and statements.</description>
</property> 
```

这将用于登录超时和查询超时。如果您的查询花费超过 30 秒或配置的秒数，它将返回。

# php - 是否可以检查是否使用 PHP 启用了通配符 DNS？

> ID：14604201
> 
> 赞同：4
> 
> 时间：2013-01-30T12:37:56.553
> 
> 标签：php, wildcard-subdomain

我正在尝试查看是否可以检查是否在运行脚本的域上启用了通配符 DNS（或通配符虚拟主机？），并且到目前为止是空白的。

我已尝试读取域的 DNS 记录以查找“*.domain.com”类型条目，但我认为这不适用于在共享主机上运行的域（或者它肯定没有无论如何我检查的记录）。

有什么方法可以检查使用 PHP 吗？

我希望它似乎没有留下相当骇人听闻的感觉方法，即尝试 cUrl 乱码子域以查看返回的消息。

在此先感谢马丁

# matlab - 在 MATLAB 中使用带有常量参数的内联函数

> ID：14604202
> 
> 赞同：3
> 
> 时间：2013-01-30T12:38:09.247
> 
> 标签：matlab, plot, equation

这是我的代码的一部分。

```
clear all;
clc;
p = 50;
t = [-6 : 0.01 : 6];
f = inline('(t+2).*sin(t)', 't')
v = inline('3*f(p*t+2)','t','f','p')
plot(t,f(t));
v(t,f,p);
figure;
plot(t,v(t,f,p)); 
```

这里我有两个问题。

1.  为什么我必须传递`p`给函数`v`，即使`p`是一个已经声明的常量？
2.  我如何才能`v`完全按照`t`as`3*[(50*t+2)*sin(50*t+2)]`或其简化形式获得表达式？

**更新**
这是第二个问题的更新

让

```
f(x) = 1 + x - x^2
g(x) = sin(x) 
```

如果我给 f(g(x))，我想用文字得到输出，像这样

```
f(g(x)) = (cos(X))^2 + sin(x) 
```

不是数值。有没有功能可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:10:45.633

> 1）为什么我必须传递`p`给`v`即使`p`是一个已经被声明的常量？

好吧，MATLAB 的内联函数对象有一个[`eval`](http://www.mathworks.com/help/matlab/ref/eval.html)包装器，因此其范围内的唯一变量是那些从表达式中自动捕获或显式指定的变量。

换句话说，如果您想`v`识别`p`，您别无选择，只能在创建`inline`对象时声明它并将其`v`显式传递给它。也一样`f`！

> 2) 我怎样才能完全用 t 作为 3*[(50*t+2)*sin(50*t+2)] 或其简化形式得到 v 的表达式？

使用匿名函数，就像 Shai 建议的那样。它们更强大、更优雅、更快。例如：

```
v = @(t)(3*(50*t+2)*sin(50*t+2)) 
```

请注意，如果您使用变量已在使用的名称作为参数，匿名函数将首先将其视为参数。它确实在范围内看到了其他变量，因此`g = @(x)(x + p)`也可以执行类似的操作。

**编辑#1：**
这是另一个例子，这次是函数的函数：

```
x = 1:5;
f = @(x)(x .^ 3);        %// Here x is a local variable, not as defined above
g = @(x)(x + 2);         %// Here x is also a local variable
result = f(g(x)); 
```

或者定义另一个实现该功能的函数：

```
h = @(x)f(g(x));         %// Same result as h = @(x)((x + 2) .^ 3)
result = h(x); 
```

输出应该是一样的。

**编辑＃2：**

如果您想从表达式字符串中创建一个匿名函数，请将 '@(x)' （或您认为合适的正确匿名标头）连接到开头并 apply `eval`，例如：

```
expr = '(x + 2) .^ 3';
f = eval(['@(x)', expr]) %// Same result as f = @(x)((x + 2) .^ 3) 
```

请注意，您也可以`char(f)`将其转换回字符串，但您必须手动删除该`'@(...)'`部分。

**编辑#3：**
如果您正在寻找不同的解决方案，您可以探索[Symbolic Toolbox](http://www.mathworks.com/products/symbolic/)。例如，尝试：

```
syms x
f(x) = x + 2
g(x) = x ^ 3 
```

或者也可以使用[`sym`](http://www.mathworks.com/help/symbolic/sym.html)，像这样：

```
f(x) = sym('x + 2');
g(x) = sym('x ^ 3'); 
```

用于[`subs`](http://www.mathworks.com/help/symbolic/subs.html)替换值并计算符号表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T12:50:13.000

如何使用[匿名函数](http://www.mathworks.com/help/matlab/matlab_prog/anonymous-functions.html?s_tid=doc_12b)：

```
p = 50;
t = -6:0.01:6;
f = @(x) (x+2).*sin(x);
v = @(x) 3*f(p*x+2);
figure;
subplot(1,2,1); plot( t, f(t) ); title('f(t)');
subplot(1,2,2); plot( t, v(t) ); title('v(t)'); 
```

这是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T09:52:58.687

`inline`可以在定义期间将常量添加到 an中。代替

```
p = 50;
v = inline('3*f(p*t+2)','t','f','p') 
```

你可以写

```
p = 50;
v = inline(  sprintf('3*f(%f*t+2)', p), 't','f') 
```

# php - php添加具有特定ID的列以及如何回显确切ID的结果

> ID：14604204
> 
> 赞同：1
> 
> 时间：2013-01-30T12:38:11.787
> 
> 标签：php, mysql, sum

```
id  1stPayment  2ndPayment  3rdPayment  4thPayment  Tuition 
8   0           200         2000            2000            9000    
8   2000        0           0               0                 0
9   0           0           0               0               1000    
10  1           0           0               0               0 
```

我想添加 id-8 的所有学费并回显学费总和的结果。我怎么能把所有的学费加起来而不加上其他身份证的学费。表名是“students_payments”...“我也想在自己的页面中回显一个 id 的学费，就像当我访问 id-8 的帐户时，它会显示其学费的总和。：D

我有这个代码，但是当我访问 id-9 和 id-10 的帐户时，它显示了所有学费的附加值。tnx 在高级.. :D

```
<?php

include("confstudents.php");
$id = $_GET['id'];

$result = mysql_query("select * from student_payments where id='$id' ");
while ($res = mysql_fetch_assoc($result)) {

    $result = mysql_query("SELECT SUM(Tuition) FROM student_payments");
    while ($row = mysql_fetch_assoc($result)) {
        $TT = $row['SUM(Tuition)'];
        echo "Php $TT";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:44:57.253

你的查询应该是

```
SELECT SUM(Tuition) as TotalTuition FROM student_payments WHERE id='$id' GROUP BY id 
```

然后你可以回显 TotalTuition。

* * *

## **警告**

您的代码容易受到[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)的影响，您需要全部转义`get`，`post`更好的方法是使用[Prepared 语句](http://en.wikipedia.org/wiki/Prepared_statement)

**好读**

1.  [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)
2.  [**PDO 准备好的语句是否足以防止 SQL 注入？**](https://stackoverflow.com/a/12202218/1723893)

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了以 mysql_ 为前缀的所有函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](http://www.brightmeup.info/article.php?a_id=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:54:38.493

```
<?php

include("confstudents.php");
$id = $_GET['id'];
$result = mysql_query("SELECT SUM(Tuition) FROM student_payments where id='$id'");
while ($row = mysql_fetch_array($result)) {
    $TT = $row['SUM(Tuition)'];
    echo "$TT";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:38:10.873

关于您的代码的一些事情：

始终将数据转换为您期望的数据（对于您的 id，应该是整数）。

切勿将任何未转义的字符串放入 SQL 查询中。您永远不知道人们在您的应用程序输入字段中输入了什么。在这种情况下，我不使用 mysql_escape，因为 id 被转换为整数，这对查询没有害处。

永远不要（！）在循环中使用 mysql_query。你永远不需要它，它总是会减慢你的应用程序而不提供任何用途。

如果您的数据库需要一个整数，那么给它一个整数而不是一个字符串。id 应该是一个整数，但 '$id' 将始终是一个字符串。不幸的是，MySQL 默默地尝试将其转换为整数而不是抱怨......

由于我很挑剔：id 是 identifier 的缩写，这反过来意味着你可以通过它来识别某些东西。因此，标识符必须始终是唯一的。我希望你选择它只是为了解释你的问题。

尽可能使用 ' 而不是 " 作为字符串。这将阻止 PHP 解析器尝试解释字符串。使您的代码更节省和更快。

虽然不推荐使用 mysql_* 函数，但我只是扩展了您的代码。因此，有关您的问题的答案，请参见下面的代码。

```
<?php

include("confstudents.php");
$id = (int)$_GET['id'];  // cast to int to prevent SQL injection; if you can't do that (e.g. it is a string), use mysql_escape()
if ($id <= 0) {   // check if the id is at all valid and break here if it isn't
    die('Invalid ID');
}

$result = mysql_query('SELECT SUM(tuition) sum_tuition FROM student_payments WHERE id = ' . $id);
if ($result === FALSE) {   // Check if the statement was able be processed
    die('Error in SQL statement');   // break here, if it wasn't
}
$res = mysql_fetch_assoc($result);   // with the SQL above, there's always exactly one row in the result
echo 'Php ' . $res['sum_tuition'];
?> 
```

您可以添加更多调试代码，例如 mysql_error() 来查找 SQL 语句中的错误。但不要向您的用户展示它。他们可能知道，如何使用它来利用您的应用程序......

# sql - 为什么在 SQL 中输入日期值时会出现“类型不匹配”？

> ID：14604210
> 
> 赞同：2
> 
> 时间：2013-01-30T12:38:25.423
> 
> 标签：sql, delphi, paradox

我正在开发 Delphi 7 中的搜索查询功能（使用 Paradox 数据库），在两个日期之间进行选择时，我不断收到类型不匹配错误。如果我使用我得到的日期类型

> Project Project1.Exe 引发异常类 EDBEngineError，并带有消息“表达式中的类型不匹配”。过程停止。

如果我使用 dateTime 类型，我会得到

> 项目 Project1.Exe 引发异常类 EDBEngineError 并带有消息“无效使用关键字。代币：13？和行号：8'。过程停止。

其中 13 是时间的第一个数字。

这是我的代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Search1 :string;
  Search2 :string;
  outputveld : string;
  datum : TDateTime;
  datumZoek: TdateTime;
  countmails : integer;
  outfile: textfile;
  Zoek6MaandenTerug: Double;
begin
  Zoek6MaandenTerug := 182.621099;
  datum := tdate(now);
  datumZoek := datum - Zoek6MaandenTerug;
  ShowMessage(DateTimeToStr(Datum));
  ShowMessage(DateTimeToStr(datumZoek));
  Memo1.Lines.Add(DateTimeToStr(Datum));
  //datum := datum- StrToDate('21-4-2004');
  {radio button date controll}

  {//radio button date controll}
  Search1 := Edit1.Text;
  Search2 := Edit2.Text;

  assignfile(outfile,'text\Emails.txt');
  rewrite(outfile);
  outputveld := '';
  countmails := 0;

  {sets up  and executesSQL query(Query1)}
  Query1.close;
  Query1.SQL.Clear;
  memo1.Clear;
  if Search1 <> EmptyStr then
  begin
    //Query1.SQL.add('SELECT * FROM Verkoop');
    Query1.SQL.add('SELECT DISTINCT Verkoophandelingen.Klantnr, Verkoophandelingen.Type, verkoop.Klantnr, Verkoop.Artikelnr, Artikels.Nummer, Artikels.artikelgroep, Verkoophandelingen.Datum, Klanten.Email');
    Query1.SQL.add('FROM Verkoop');
    Query1.SQL.add('full Join Artikels ON Verkoop.Artikelnr = Artikels.Nummer');
    Query1.SQL.add('full Join Klanten ON Verkoop.Klantnr = Klanten.Nummer');
    Query1.SQL.add('full Join Verkoophandelingen ON Verkoop.verkoophandelingnr = Verkoophandelingen.nummer');
    Query1.SQL.add('WHERE Verkoophandelingen.Type = "Bestelling" ');
    Query1.SQL.add('AND Verkoop.Artikelnr = '+Search1+'');
    //Query1.SQL.add('AND Verkoophandelingen.Datum = '+ DateToStr(Date1) +'');
    Query1.SQL.add('AND Verkoophandelingen.Datum BETWEEN '+DateTimeToStr(datum)+'');
    Query1.SQL.Add('AND '+DateToStr(datumzoek)+'');
    Query1.SQL.add('ORDER BY Datum');

    Query1.RequestLive := true;
    Query1.open;
  end
  else if Search2 <> EmptyStr then
  begin
    Query1.SQL.add('SELECT DISTINCT Verkoophandelingen.Klantnr, Verkoophandelingen.Type, verkoop.Klantnr, Verkoop.Artikelnr, Artikels.Nummer, Artikels.artikelgroep, Verkoophandelingen.Datum, Klanten.Email');
    Query1.SQL.add('FROM Verkoop');
    Query1.SQL.add('full Join Artikels ON Verkoop.Artikelnr = Artikels.Nummer');
    Query1.SQL.add('full Join Klanten ON Verkoop.Klantnr = Klanten.Nummer');
    Query1.SQL.add('full Join Verkoophandelingen ON Verkoop.verkoophandelingnr = Verkoophandelingen.nummer');
    Query1.SQL.add('WHERE Verkoophandelingen.Type = "Bestelling" ');
    Query1.SQL.add('AND Artikels.ArtikelGroep = '+Search2+'');
    Query1.SQL.add('AND Verkoophandelingen.Datum BETWEEN '+DateToStr(datum)+'');
    Query1.SQL.Add('AND '+DateToStr(datumZoek)+'');
    Query1.SQL.add('ORDER BY Datum');
    Query1.RequestLive := true;
    Query1.open;
  end;

  while not Query1.Eof do
  begin
    if Query1.FieldByName('Email').AsString <>  EmptyStr then
    begin
      memo1.Lines.Add(Query1.FieldByName('Email').AsString + ';');
      writeln(outfile, Query1.FieldByName('Email').AsString+ ';');
      Query1.next;
      inc(countmails);
    end
    else
    begin
      Query1.next;
    end;
  end;

  if Query1.Eof then
  begin
    CloseFile(outfile);
    memo1.lines.add('totaal aantal valid email adressen = ' + IntToStr(countmails));
  end;
end; 
```

* * *

我希望即时发布在正确的地方。这是我在为我的查询添加参数后仍然得到“表达式中的类型不匹配”的代码。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, Grids, DBGrids, DB, DBTables, DBCtrls;

type
  TForm1 = class(TForm)
    DataSource1: TDataSource;
    Query1: TQuery;
    DBGrid1: TDBGrid;
    Button1: TButton;
    ComboBox1: TComboBox;
    Memo1: TMemo;
    Edit1: TEdit;
    Edit2: TEdit;
    Label1: TLabel;
    Label2: TLabel;
    Button2: TButton;
    RadioButton1: TRadioButton;
    RadioButton2: TRadioButton;
    RadioButton3: TRadioButton;
    procedure Button1Click(Sender: TObject);
    procedure FormActivate(Sender: TObject);
    procedure ComboBox1Change(Sender:TObject);
    procedure Edit1Change(Sender: TObject);
    procedure Edit2Change(Sender: TObject);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses ComObj;

{$R *.dfm}

procedure TForm1.FormActivate(Sender: TObject);

 var
i : integer;
mystringlist : tstringlist;
 datum: TDateTime;
   Zoek6MaandenTerug : Double;
begin
        Zoek6MaandenTerug := 182.621099;
        datum := tdate(now);
        datum := datum - Zoek6MaandenTerug;
        ShowMessage(DateToStr(datum));
        Memo1.Lines.Add(DateTimeToStr(Datum));
        Memo1.Lines.Add(DateToStr(datum));
        //datum := datum- StrToDate('21-4-2004');

   MyStringList := TStringList.Create;
    {
    memo1.Clear;
    Edit1.Clear;
    Edit2.Clear;
    }

  try
    Session.GetAliasNames(MyStringList);
    { fill a list box with alias names for the user to select from }
    for I := 0 to MyStringList.Count - 1 do begin
      combobox1.Items.Add(MyStringList[I]);
    end
    finally
    MyStringList.Free;
    end;

   end;

   procedure TForm1.ComboBox1Change(Sender: TObject);
begin

try
      Query1.SQL.Clear;
            Query1.Databasename := string(combobox1.items[combobox1.ItemIndex]);

        except
        with Application do
        begin
            NormalizeTopMosts;
            MessageBox(' wrong database ', 'fout..', MB_OK);
            RestoreTopMosts;
            combobox1.SetFocus;
        Exit;
        end;

end;
 end;

procedure TForm1.Button1Click(Sender: TObject);
var

  Search1 :String;
  Search2 :String;
  outputveld : string;
  datum : TDateTime;
  datumZoek: TDateTime;
  countmails : integer;
  outfile: textfile;
  Zoek6MaandenTerug: Double;

begin

        Zoek6MaandenTerug := 182.621099;
        datum := tdate(now);
        datumZoek := datum - Zoek6MaandenTerug;
        ShowMessage(DateTimeToStr(Datum));
        ShowMessage(DateTimeToStr(datumZoek));
        Memo1.Lines.Add(DateToStr(datum));
        Memo1.Lines.Add(DateToStr(datumZoek));

        //datum := datum- StrToDate('21-4-2004');

{//radio button date controll}
      Search1 := Edit1.Text;
      Search2 := Edit2.Text;

      assignfile(outfile,'text\Emails.txt');
      rewrite(outfile);
      outputveld := '';
      countmails := 0;

        {sets up  and executesSQL query(Query1)}
            Query1.close;
      Query1.SQL.Clear;
      memo1.Clear;
       if Search1 <> EmptyStr then
          begin

             //Query1.SQL.add('SELECT * FROM Verkoop');
            Query1.SQL.add('SELECT DISTINCT Verkoophandelingen.Klantnr, Verkoophandelingen.Type, verkoop.Klantnr, Verkoop.Artikelnr, Artikels.Nummer, Artikels.artikelgroep, Verkoophandelingen.Datum, Klanten.Email');
            Query1.SQL.add('FROM Verkoop');
            Query1.SQL.add('full Join Artikels ON Verkoop.Artikelnr = Artikels.Nummer');
            Query1.SQL.add('full Join Klanten ON Verkoop.Klantnr = Klanten.Nummer');
            Query1.SQL.add('full Join Verkoophandelingen ON Verkoop.verkoophandelingnr = Verkoophandelingen.nummer');
            Query1.SQL.add('WHERE Verkoophandelingen.Type = "Bestelling" ');
            Query1.SQL.add('AND Verkoop.Artikelnr = :Search1');
            //Query1.SQL.add('AND Verkoophandelingen.Datum = '+ DateToStr(Date1) +'');
           Query1.SQL.add('AND Verkoophandelingen.Datum BETWEEN :datum AND :datumzoek');

            Query1.SQL.add('ORDER BY Datum');

            Query1.ParamByName('datumzoek').Value := datumzoek;
            Query1.ParamByName('datum').Value := datum;
            Query1.ParamByName('Search1').Value := Search1;

                Query1.RequestLive := true;
                  Query1.open;

          end
          else if Search2 <> EmptyStr then
          begin

            Query1.SQL.add('SELECT DISTINCT Verkoophandelingen.Klantnr, Verkoophandelingen.Type, verkoop.Klantnr, Verkoop.Artikelnr, Artikels.Nummer, Artikels.artikelgroep, Verkoophandelingen.Datum, Klanten.Email');
            Query1.SQL.add('FROM Verkoop');
            Query1.SQL.add('full Join Artikels ON Verkoop.Artikelnr = Artikels.Nummer');
            Query1.SQL.add('full Join Klanten ON Verkoop.Klantnr = Klanten.Nummer');
            Query1.SQL.add('full Join Verkoophandelingen ON Verkoop.verkoophandelingnr = Verkoophandelingen.nummer');
            Query1.SQL.add('WHERE Verkoophandelingen.Type = "Bestelling" ');
            Query1.SQL.add('AND Artikels.ArtikelGroep = :Search2');
            //Query1.SQL.add('AND Verkoophandelingen.Datum BETWEEN '+DateToStr(datum)+'');
            //Query1.SQL.Add('AND '+DateToStr(datumZoek)+'');

            Query1.SQL.add('AND Verkoophandelingen.Datum BETWEEN :datum AND :datumzoek');

            Query1.SQL.add('ORDER BY Datum');

            Query1.ParamByName('datumzoek').Value := datumzoek;
            Query1.ParamByName('datum').Value := datum;
            Query1.ParamByName('Search2').Value := Search2;

            Query1.RequestLive := true;
                  Query1.open;

        end;

      while not Query1.Eof do
 begin
      if Query1.FieldByName('Email').AsString <>  EmptyStr then
        begin
          memo1.Lines.Add(Query1.FieldByName('Email').AsString + ';');
          writeln(outfile, Query1.FieldByName('Email').AsString+ ';');
          Query1.next;
          inc(countmails);
        end

        else
          begin
            Query1.next;
          end;
 end;

  if Query1.Eof then
 begin
  CloseFile(outfile);
  memo1.lines.add('totaal aantal valid email adressen = ' + IntToStr(countmails));

 end;

end;

procedure TForm1.Edit1Change(Sender: TObject);
begin
Edit2.Text := '';
end;

procedure TForm1.Edit2Change(Sender: TObject);
begin
Edit1.Text := '';
end;

 end. 
```

* * *

添加后

```
 ... 
        Query1.ParamByName('datumzoek').DataType := ftDate;
        Query1.ParamByName('datum').DataType := ftDate;
        Query1.ParamByName('Search1').DataType := ftInteger;

        Query1.ParamByName('datumzoek').Value := datumzoek;
        Query1.ParamByName('datum').Value := datum;
        Query1.ParamByName('Search1').Value := Search1;
        ... 
```

查询运行但没有结果，在显示查询后，文本似乎参数有一个“？” 价值 ？

```
...
SELECT DISTINCT    Verkoophandelingen.Klantnr, Verkoophandelingen.Type, verkoop.Klantnr, Verkoop.Artikelnr, Artikels.Nummer, Artikels.artikelgroep, Verkoophandelingen.Datum, Klanten.Email
FROM Verkoop
full Join Artikels ON Verkoop.Artikelnr = Artikels.Nummer
full Join Klanten ON Verkoop.Klantnr = Klanten.Nummer
full Join Verkoophandelingen ON Verkoop.verkoophandelingnr = Verkoophandelingen.nummer
WHERE Verkoophandelingen.Type = "Bestelling"
AND Verkoop.Artikelnr = ?
AND Verkoophandelingen.Datum BETWEEN ? AND ?
ORDER BY Datum
... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T12:52:39.340

也许这些行会导致问题：

```
Query1.SQL.add('AND Verkoophandelingen.Datum BETWEEN '+DateTimeToStr(datum)+'');
Query1.SQL.Add('AND '+DateToStr(datumzoek)+''); 
```

在这里，您插入由`DateTimeToStr`and返回的日期`DateToStr`，但您没有以任何方式分隔插入的值，因此生成的查询将如下所示：

```
...
AND Verkoophandelingen.Datum BETWEEN 21-04-2004
AND 22-04-2004
... 
```

我不确定 Paradox 对日期常量使用什么分隔符，但我几乎可以肯定它确实使用了一些分隔符。也许，它应该是`'`：

```
...
AND Verkoophandelingen.Datum BETWEEN '21-04-2004'
AND '22-04-2004'
... 
```

检查手册以获取正确的手册并相应地修复您的代码。

另一方面，正如@Rob Kennedy 正确建议的那样，使用*参数化查询会是一个更好的主意。*在参数化查询中，您使用占位符，例如`:name`参数值应该放在哪里。因此，在您的情况下，它可能如下所示：

```
...
Query1.SQL.add('WHERE Verkoophandelingen.Type = "Bestelling" ');
Query1.SQL.add('AND Verkoop.Artikelnr = :Search');
Query1.SQL.add('AND Verkoophandelingen.Datum BETWEEN :date1');
Query1.SQL.Add('AND :date2');
... 
```

在运行查询之前，您需要使用`TQuery.Params`属性设置参数，如下所示：

```
Query1.Params.CreateParam(ftInteger, 'Search', ptInput).AsInteger := StrToInt(Search1);
Query1.Params.CreateParam(ftDateTime, 'date1', ptInput).AsDateTime := datum;
Query1.Params.CreateParam(ftDateTime, 'date2', ptInput).AsDateTime := datumzoek; 
```

`Params`或者，如果查询组件在分配 SQL 语句时自动填充集合：

```
Query1.Params.ParamByName('Search').AsInteger := StrToInt(Search1);
Query1.Params.ParamByName('date1').AsDateTime := datum;
Query1.Params.ParamByName('date2').AsDateTime := datumzoek; 
```

这样你就不需要担心分隔值：组件会处理这个问题。

# python - 使用 ConfigParser 多次指定相同的选项

> ID：14604217
> 
> 赞同：6
> 
> 时间：2013-01-30T12:39:12.140
> 
> 标签：python, configparser

我想使用 python ConfigParser 模块读取配置文件：

```
[asection]
option_a = first_value
option_a = second_value 
```

我希望能够获得为选项“option_a”指定的值列表。我尝试了以下明显的方法：

```
test = """[asection]
option_a = first_value
option_a = second_value
"""
import ConfigParser, StringIO
f = StringIO.StringIO(test)
parser = ConfigParser.ConfigParser()
parser.readfp(f)
print parser.items() 
```

哪个输出：

```
[('option_a', 'second_value')] 
```

虽然我希望：

```
[('option_a', 'first_value'), ('option_a', 'second_value')] 
```

或者，甚至更好：

```
[('option_a', ['first_value', 'second_value'])] 
```

有没有办法用 ConfigParser 做到这一点？另一个想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-16T08:23:40.843

似乎可以为同一个键读取多个选项，这可能会有所帮助： [如何配置文件，为相同的键保留多个值？](https://stackoverflow.com/questions/15848674/how-to-configparse-a-file-keeping-multiple-values-for-identical-keys)

这是此链接的最终代码（我在 python 3.8 上测试过）：

```
from collections import OrderedDict
from configparser import ConfigParser
class ConfigParserMultiValues(OrderedDict):
    def __setitem__(self, key, value):
        if key in self and isinstance(value, list):
            self[key].extend(value)
        else:
            super().__setitem__(key, value)

    @staticmethod
    def getlist(value):
        return value.splitlines()

config = ConfigParser(strict=False, empty_lines_in_values=False, dict_type=ConfigParserMultiValues, converters={"list": ConfigParserMultiValues.getlist})
config.read(["test.ini"])
values = config.getlist("test", "foo")
print(values) 
```

对于包含内容的 test.ini 文件：

```
[test]
foo = value1
foo = value2
xxx = yyy 
```

输出是：

```
['value1', 'value2'] 
```

# sql-server - 删除名称中带有破折号的表

> ID：14604224
> 
> 赞同：3
> 
> 时间：2013-01-30T12:39:19.907
> 
> 标签：sql-server, tsql

我需要删除名称具有模式“%-%-%-%-%”的所有表。到目前为止，我发现最好的方法是分两步完成：

1.  通过调用下面的请求生成删除请求

    SELECT ' DROP TABLE ' + REPLACE(TABLE_NAME, '-', NCHAR(8211)) FROM information_schema.tables where TABLE_NAME like '%-%-%-%-%' ORDER BY TABLE_NAME

2.  运行删除请求。

不幸的是，第 2 步不起作用。即使我`REPLACE(TABLE_NAME, '-', NCHAR(8211))`，我仍然得到`Msg 102, Level 15, State 1, Line 1 Incorrect syntax near '0'.`等；`0`因为删除请求的第一行是`DROP TABLE 0df78d48–c718–49be–ab55–5f158ebdd64c–results`.

你能帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T12:46:43.987

在表名周围放置方括号应该会给您想要的结果。

例子：

```
DROP TABLE [0df78d48–c718–49be–ab55–5f158ebdd64c–results] 
```

# jquery - scrollTop 动画不连贯

> ID：14604226
> 
> 赞同：2
> 
> 时间：2013-01-30T12:39:21.847
> 
> 标签：jquery, animation, scrolltop

抱歉，我的 JavaScript 技能有限，但我正在努力学习。

我正在尝试使用 scrollTop 计算制作平滑的滚动动画，其中绝对放置在彼此之上的 div 从零宽度开始并相互增长。

已经设置了一个fiddle来尝试解释：

[http://jsfiddle.net/vsP4e/1/](http://jsfiddle.net/vsP4e/1/)

问题是动画真的很不稳定，而且在某些地方完全是错误的。此外，如果我刷新浏览器，我的 div 会在完全错误的位置启动，并在我开始滚动时跳回原位。

在萤火虫中，计算通常是错误的，即使我不滚动也似乎永远不会停止。

```
 $(document).ready(function() {  

        doStuff();

      $(document).scroll(function() {

        var levelScroll = $(document).scrollTop();

        doStuff();

          var show1 = $("#shaddow1").width();
          var c1w = $("#circle1").width();      
          var div1W = $("#div1").width();   

                    //div1
                    if(levelScroll>=0 && levelScroll<=200){
                      $("#div1").css("width", "0px");
                      $('#div1').css("margin-left", (-(div1W)/2));
                      $('#div1').css("margin-top", (-(div1W)/2));
                    }
                    else if(levelScroll>=200 && levelScroll<=500){
                      $("#div1").css("width", (levelScroll-200)+"px");
                      $('#div1').css("margin-left", (-(div1W)/2));
                      $('#div1').css("margin-top", (-(div1W)/2));

                    }
                    else if(levelScroll>=500){
                      $("#div1").css("width", "188px");
                      $("#div1").css("margin-left", "-94px");
                      $("#div1").css("margin-top", "-94px");
                    }

                    //circle1
                    if(levelScroll>=0 && levelScroll<=350){
                      $("#circle1").css("width", "0px");
                      $('#circle1').css("margin-left", (-(c1w)/2));
                      $('#circle1').css("margin-top", (-(c1w)/2));
                      $("#shaddow1").css("width", "0px");
                      $('#shaddow1').css("margin-left", (-(show1)/2));
                      $('#shaddow1').css("margin-top", (-(show1)/2));
                    }
                    else if(levelScroll>=350 && levelScroll<=650){
                      $("#circle1").css("width", (levelScroll-350)+"px");
                      $('#circle1').css("margin-left", (-(c1w)/2));
                      $('#circle1').css("margin-top", (-(c1w)/2));
                      $("#shaddow1").css("width", (levelScroll-300)+"px");
                      $('#shaddow1').css("margin-left", (-(show1)/2));
                      $('#shaddow1').css("margin-top", (-(show1)/2));

                    }
                    else if(levelScroll>=600){
                      $("#circle1").css("width", "232px");
                      $("#circle1").css("margin-left", "-116px");
                      $("#circle1").css("margin-top", "-116px");
                      $("#shaddow1").css("width", "232px");
                      $("#shaddow1").css("margin-left", "-116px");
                      $("#shaddow1").css("margin-top", "-116px");
                    }

                  });

    });

    function doStuff(){
            var show1 = $("#shaddow1").width();
            var c1w = $("#circle1").width();
            var div1W = $("#div1").width();

            $('#shaddow1').css("margin-left", (-(show1)/2));
            $('#shaddow1').css("margin-top", (-(show1)/2));

            $('#circle1').css("margin-left", (-(c1w)/2));
            $('#circle1').css("margin-top", (-(c1w)/2));

            $('#div1').css("margin-left", (-(div1W)/2));
            $('#div1').css("margin-top", (-(div1W)/2));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:51:34.450

如果您在条件的不同层上使用相同的值，则会产生冲突。这是您的函数中的一个示例：

```
if(levelScroll>=0 && levelScroll<=200){ ... }
else if(levelScroll>=200 && levelScroll<=500){ ... }
//this will create a conflict when levelScroll value came to 200

else if(levelScroll>350 && levelScroll<=650){ ... }
else if(levelScroll>=600){ ... }
//this equation also will create bigger problem 
```

[这是工作的jsFiddle。](http://jsfiddle.net/vsP4e/2/)

注意：我不[建议](https://stackoverflow.com/questions/11971475/setting-css-value-limits-of-the-window-scrolling-animation/11971912#11971912)在滚动时使用不同的（在您的示例中您有 2 个）条件，这会引发错误，并且大多数浏览器仍然无法处理这些高级 jQuery 动画。

# c++ - 找不到 mysql.h 文件

> ID：14604228
> 
> 赞同：40
> 
> 时间：2013-01-30T12:39:25.577
> 
> 标签：c++, mysql, ubuntu-12.04, mysql-connector

我正在尝试在 ubuntu 12.04 中安装 c++ 和 mysql 之间的连接。我已经安装了 mysql-client、mysql-server、libmysqlclient15-dev、libmysql++-dev。但是当我尝试编译代码时出现错误：`mysql.h there is no such file`。我查看了文件夹，有 mysql.h 文件，我不明白为什么找不到它。这是我的代码：

```
 /* Simple C program that connects to MySQL Database server*/
    #include <mysql.h>
    #include <stdio.h>

    main() {
      MYSQL *conn;
      MYSQL_RES *res;
      MYSQL_ROW row;

      char *server = "localhost";
      char *user = "root";
      //set the password for mysql server here
      char *password = "*********"; /* set me first */
      char *database = "Real_flights";

      conn = mysql_init(NULL);

      /* Connect to database */
      if (!mysql_real_connect(conn, server,
            user, password, database, 0, NULL, 0)) {
          fprintf(stderr, "%s\n", mysql_error(conn));
          exit(1);
      }

      /* send SQL query */
      if (mysql_query(conn, "show tables")) {
          fprintf(stderr, "%s\n", mysql_error(conn));
          exit(1);
      }

      res = mysql_use_result(conn);

      /* output table name */
      printf("MySQL Tables in mysql database:\n");
      while ((row = mysql_fetch_row(res)) != NULL)
          printf("%s \n", row[0]);

      /* close connection */
      mysql_free_result(res);
      mysql_close(conn);
    } 
```

它有效，但现在我面临另一个错误，例如：

```
mysql.c: In function ‘main’:
mysql.c:21: warning: incompatible implicit declaration of built-in function ‘exit’
mysql.c:27: warning: incompatible implicit declaration of built-in function ‘exit’
/tmp/ccinQBp8.o: In function `main':
mysql.c:(.text+0x3e): undefined reference to `mysql_init'
mysql.c:(.text+0x5e): undefined reference to `mysql_real_connect'
mysql.c:(.text+0x70): undefined reference to `mysql_error'
mysql.c:(.text+0xa5): undefined reference to `mysql_query'
mysql.c:(.text+0xb7): undefined reference to `mysql_error'
mysql.c:(.text+0xe7): undefined reference to `mysql_use_result'
mysql.c:(.text+0x11c): undefined reference to `mysql_fetch_row'
mysql.c:(.text+0x133): undefined reference to `mysql_free_result'
mysql.c:(.text+0x141): undefined reference to `mysql_close'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-30T13:00:13.623

`mysql.h`来自Ubuntu 软件包的文件`libmysqlclient-dev`位于`/usr/include/mysql/mysql.h`.

然而，这不是编译器的标准搜索路径`/usr/include`。

您通常会`mysql.h`像这样在代码中使用标头：

```
#include <mysql/mysql.h> 
```

如果您不想在源代码中指定目录偏移量，则可以将`-I`标志传递给 gcc（如果这是您正在使用的）以指定额外的包含搜索目录，然后您就不需要更改现有代码.

例如。

```
gcc -I/usr/include/mysql ... 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-12-17T12:42:15.973

只需使用

```
$ apt-get install libmysqlclient-dev 
```

它将自动拉取最新的 libmysqlclient18-dev

我见过旧版本的 libmysqlclient-dev（如 15）将 mysql.h 放在奇怪的位置，例如 /usr/local/include 等。

否则，只需做一个

```
$ find /usr/ -name 'mysql.h' 
```

并将`mysql.h`带有 -I 标志的文件夹路径放入您的制作文件中。不干净，但会工作。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-03-21T18:27:48.620

对于 CentOS/RHEL：

```
yum install mysql-devel -y 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-05-13T07:50:00.783

这对我有用

```
$ gcc dbconnect.c -o dbconnect -lmysqlclient
$ ./dbconnect 
```

-lmysqlclient 是必须的。

我建议使用以下符号而不是使用 -I 编译标志。

```
#include <mysql/mysql.h> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-25T23:00:37.897

在我认为的几个 unix 系统上，您可能没有包含 mysql 标头的路径，该路径可以在 /usr/include/mysql 中找到。看看[这个帖子](https://stackoverflow.com/questions/20909685/fatal-error-mysql-hno-such-file-or-directory-during-compilation)，可能会有帮助。

顺便说一句，与上面[那个人](https://stackoverflow.com/users/1687452/mtpain)的问题有关，关于合成配置。可以将以下内容添加到您的 ~/.vimrc 中：

```
let b:syntastic_c_cflags = '-I/usr/include/mysql' 
```

您可以随时查看github 上开发人员的[wiki 页面。](https://github.com/scrooloose/syntastic/wiki)享受！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-30T12:44:45.863

您必须让编译器知道在哪里可以找到 mysql.h 文件。这可以通过在编译之前给出头文件的路径来完成。在 IDE 中，您有一个设置，您可以在其中提供这些路径。

此[链接](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Directory-Options.html#Directory%20Options)为您提供有关编译时使用哪些选项的更多信息。

**对于第二个问题** ，您需要链接库。链接器需要知道库文件在哪里，哪些是您使用的 mysql 函数的实现。

此[链接](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Link-Options.html#Link%20Options)为您提供有关如何链接库的更多信息。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-04T00:17:34.590

我想你可以试试这个 gcc -I/usr/include/mysql *** *.c -L/usr/lib/mysql -lmysqlclient -o ****

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-15T10:30:42.233

这对我有用

```
yum install mysql 
```

它将安装mysql客户端，然后

```
pip install mysqlclient 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-16T10:26:47.253

对于那些正在使用**Eclipse IDE 的人。**

将完整的 MySQL 与**mysql 客户端**和**mysql 服务器**以及任何**mysql 开发**库一起安装后，

您需要告诉**Eclipse IDE**以下内容

*   在哪里可以找到**mysql.h**
*   在哪里可以找到**libmysqlclient**库
*   **搜索****libmysqlclient**库的**路径**_ _

 ****这是你如何去做的。

添加**mysql.h**

**1** . GCC C编译器->包含->包含路径（-l）然后单击+并添加路径到你的**mysql.h**在我的例子中是**/usr/include/mysql**

[![在此处输入图像描述](../Images/fc58430565e8caacb95bb0778e6a27a9.png)](https://i.stack.imgur.com/HI28D.png)

要将**mysqlclient**库和**搜索路径**添加到**mysqlclient**库的位置，请参见步骤**3**和**4**。

**2** . GCC C Linker -> Libraries -> Libraries(-l) 然后点击**+**并添加**mysqlcient**

[![在此处输入图像描述](../Images/0753b89dd4d0f21896be324ebf9f81b9.png)](https://i.stack.imgur.com/633TI.png)

**3** . GCC C Linker -> Libraries -> Library search path (-L) 然后点击**+**并将**搜索路径**添加到**mysqlcient**。就我而言，它是**/usr/lib64/mysql**因为我使用的是**64 位 Linux 操作系统**和**64 位 MySQL**数据库。

否则，如果您使用的是**32 位 Linux 操作系统**，您可能会发现它位于**/usr/lib/mysql**

[![在此处输入图像描述](../Images/569c63bfdebbd493d08828f99b3610a3.png)](https://i.stack.imgur.com/brxrq.png)****

# mysql - 连接多个表时避免重复条目（MySQL）

> ID：14604229
> 
> 赞同：5
> 
> 时间：2013-01-30T12:39:27.360
> 
> 标签：mysql, sql, select, join

（请参阅本文底部我正在测试的数据库结构。）

我执行这个查询：

```
SELECT m.title, GROUP_CONCAT(DISTINCT(d.name) SEPARATOR ',') d FROM movies m
INNER JOIN movies_seen s
    ON s.object_id = m.id
LEFT JOIN movies_directors_connections dc
    ON dc.movie_id = m.id
LEFT JOIN movies_directors d
    ON d.id = dc.director_id 
```

有了这个结果：

```
title        | d 
Pulp Fiction | Quentin Tarantino,George Butler,Robert Fiore 
```

但我试图得到这个：

```
title        | d 
Pulp Fiction | Quentin Tarantino
Pumping Iron | George Butler,Robert Fiore 
```

和建议？:)

```
CREATE TABLE `movies` (
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`title` varchar(90) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=3 ;

CREATE TABLE `movies_seen` (
`object_id` int(10) NOT NULL DEFAULT '0',
`date` varchar(10) NOT NULL DEFAULT '0');

CREATE TABLE `movies_directors` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 ;

CREATE TABLE IF NOT EXISTS `movies_directors_connections` (
  `movie_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `director_id` mediumint(8) unsigned NOT NULL DEFAULT '0'
) ENGINE=MyISAM; 
```

然后是一些测试数据：

```
INSERT INTO `movies` (`id`, `title`) VALUES
(1, 'Pulp Fiction'), (2, 'Pumping Iron');

INSERT INTO `movies_seen` (`object_id`, `date`) VALUES
  (1, 1359511222), (2, 1359511223);

INSERT INTO `movies_directors` (`id`, `name`) VALUES
(1, 'Quentin Tarantino'),
(2, 'George Butler'),
(3, 'Robert Fiore');

INSERT INTO `movies_directors_connections` (`movie_id`, `director_id`) VALUES
(1, 1), (2, 2), (2, 3); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T12:43:37.873

你只需要添加`GROUP BY`子句

```
SELECT  m.title, 
        GROUP_CONCAT(DISTINCT(d.name) SEPARATOR ',') d 
FROM    movies m
        INNER JOIN movies_seen s
          ON s.object_id = m.id
        LEFT JOIN movies_directors_connections dc
          ON dc.movie_id = m.id
        LEFT JOIN movies_directors d
          ON d.id = dc.director_id
GROUP   BY m.title 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/97882/2)

其他链接

*   [MySQL **GROUP BY**子句](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

# javascript - 无法在第二次尝试时选中复选框

> ID：14604233
> 
> 赞同：1
> 
> 时间：2013-01-30T12:39:39.443
> 
> 标签：javascript, jquery, html

我无法在第二次尝试时选中复选框（我可以选中然后取消选中，但在此之后没有效果）

见[http://jsfiddle.net/SM5qU/1/](http://jsfiddle.net/SM5qU/1/)

属性设置为checked="checked" 但没有视觉效果。我正在使用 MacOS 并在 Chrome 和 Firefox 中进行了测试

**HTML**

```
<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" />

<button id="check">Check</button>
<button id="uncheck">Uncheck</button> 
```

**JS**

```
$('#check').click(function() {
    $(':checkbox').attr('checked', true)
})

$('#uncheck').click(function() {
    $(':checkbox').attr('checked', false)
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:40:41.870

在您的情况下使用`.prop()`：

```
$(':checkbox').prop('checked', true);

$(':checkbox').prop('checked', false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:41:49.580

使用`prop()`而不是`attr()`基础属性：

```
$('#check').click(function() {
    $(':checkbox').prop('checked', true)
})

$('#uncheck').click(function() {
    $(':checkbox').prop('checked', false)
}) 
```

[**更新的小提琴**](http://jsfiddle.net/RoryMcCrossan/SM5qU/2/)

# sql - Sql Server Profiler 切断了我的查询文本

> ID：14604234
> 
> 赞同：0
> 
> 时间：2013-01-30T12:39:43.203
> 
> 标签：sql

我正在使用 Sql Profiler 工具在我的 SQL Server 数据库上运行跟踪。跟踪专门用于查看使用流畅的 nhibernate 查询生成的 where 子句。探查器中的查询文本在 WHERE 子句之前被截断。

有趣的是，它在底部的窗口中被切断，而不仅仅是在网格中。我也尝试过导出到文件，但是输出中的文本也被截断了。

我似乎找不到任何有限制的设置。

有人可以概述一种在运行配置文件时获取查询全文的方法吗？

# c# - CompareValidator 日期和时间

> ID：14604236
> 
> 赞同：1
> 
> 时间：2013-01-30T12:39:48.767
> 
> 标签：c#, asp.net, comparevalidator

我正在使用以下代码来确保我的文本框输入了有效日期：

```
<asp:CompareValidator ID="cvStartDate" runat="server" Operator="DataTypeCheck" 
Type="Date" ControlToValidate="txtStartDate" ErrorMessage="Please enter the 
start date in the format of dd/MM/yyyy hh:mm"/> 
```

但是当我输入带有时间验证的日期时失败。有没有办法让这种类型的验证器也接受带有时间的日期，**或者**我是否必须为此构建一个自定义验证器？如果我必须走自定义验证路线，你会建议什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-18T00:14:24.580

@Prabu 是正确的。使用自定义验证器。

CompareValidator 仅适用于日期，不适用于日期和时间。

```
protected void CustomValidator_Date(object source, ServerValidateEventArgs args)
    {
        IFormatProvider culture = new CultureInfo("en-AU", true);
        try
        {
            String[] formats = { "dd MM yyyy", "dd/MM/yyyy", "dd-MM-yyyy" };
            DateTime dt1;
            dt1 = DateTime.ParseExact(args.Value, formats, culture, DateTimeStyles.AdjustToUniversal);
            args.IsValid = true;
        }
        catch
        {
            args.IsValid = false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-06T09:57:48.950

最好使用自定义验证器来验证日期。为了避免用户输入日期和时间，

使用 Ajax 日历扩展器并将只读属性设置为 true。

# unit-testing - Grails 单元测试控制器设置参数

> ID：14604240
> 
> 赞同：1
> 
> 时间：2013-01-30T12:39:59.953
> 
> 标签：unit-testing, grails, params

我有带有以下代码的控制器：

```
def profile = Profile.findByProfileURL(params.profileURL) 
```

和这样的单元测试：

```
@TestMixin(GrailsUnitTestMixin)
@TestFor(ProfileController)
@Mock([User])
class ProfileControllerTests {

    def void testIndex() {
        mockDomain(User, [[firstname: 'Niko',...]])

        controller.params.profileURL = 'niko-klansek'

        controller.index()

        ...
    }

} 
```

当我运行测试时，控制器中出现以下异常，指的是：

```
No signature of method: sportboard.core.profile.Profile.methodMissing() is applicable for argument types: () values: [] 
```

那么我在测试中设置的参数值 profileURL 从控制器中看不到吗？如何为控制器设置参数以使其可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:51:21.387

异常是神秘的，但它表示您的`Profile`域类没有被模拟。您应该将其添加到`@Mock`注释中。此外，`@TestMixin`可以在此处省略，您不应该`mockDomain`直接在测试中使用。只需保存此用户实例。总而言之，它应该是这样的：

```
@TestFor(ProfileController)
@Mock([User, Profile])
class ProfileControllerTests {
    def void testIndex() {
        def user = new User(firstName: 'Niko').save()

        controller.params.profileURL = 'niko-klansek'
        ...
    }
} 
```

# qmake - 如何在 qmake 中为不同的目标指定单独的编译选项？

> ID：14604242
> 
> 赞同：6
> 
> 时间：2013-01-30T12:40:01.530
> 
> 标签：qmake

有没有办法为 qmake 中的不同目标指定单独的编译选项？

例如：

```
QMAKE_CXXFLAGS += -O 
SOURCES += file1.cpp    

QMAKE_CXXFLAGS += -std=gnu++0x -O 
SOURCES += file2.cpp 
```

所以 file1.cpp 将仅使用 -O 选项编译，文件 file2.cpp 使用 -std=gnu++0x -O 选项编译。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T16:01:27.067

您可以创建和使用单独的“额外编译器”，如下所示：

```
# Use the built-in compiler for file1.cpp
QMAKE_CXXFLAGS += -O 
SOURCES += file1.cpp    

# Create a new compiler for file2.cpp
gnupp0x.input = SOURCES_GNUPP0X
gnupp0x.output = ${QMAKE_FILE_BASE}.o
gnupp0x.commands = g++ -std=gnu++0x $$QMAKE_CXXFLAGS ${QMAKE_FILE_NAME} -o ${QMAKE_FILE_OUT}
QMAKE_EXTRA_COMPILERS += gnupp0x

# Use the new compiler for file2.cpp
SOURCES_GNUPP0X += file2.cpp 
```

# sql - 什么是作为电子表格的数据源的 SQL 查询，要返回到单独的电子表格？在查询中包含 UDF？

> ID：14604250
> 
> 赞同：1
> 
> 时间：2013-01-30T12:40:38.537
> 
> 标签：sql, excel, user-defined-functions, ms-query, vba

我目前有一个大表的数据源，位于 workbook1 中。从当前为空的工作簿 2 中，我希望建立到工作簿 1 的 DSN 连接，以便我可以从工作簿 2 中查询它。

在 SQL 查询结果中，我希望显示使用用户定义的 VBA 函数计算的额外列，其参数将是数据源中的其他字段。

例子：

Workbook1 是 Field1、F2、F3 和 F4。我希望查询并显示所有记录，但另外我希望有`F5=UDF(F3,F4).`

我已经被告知解决这个问题的方法是：

```
SELECT UDF(F3,F4) as F5 
FROM \SourceWorkBookLocation\SourceWorkBook 
```

访问中：我在访问中遇到的问题现在不在我的列表顶部，与数据类型有关，并试图确定字符串中的数字是否<25。但主要问题在于 MS Query：

在 Excel/MS 查询中：

该功能只是无法识别；“未定义的函数”我不知道如何让它看到函数？我的最终目标是在 excel 中构建前端，并使用传递给查询的用户输入变量适当地进行 vba 查询。查询将在单独更新的工作簿上完成。

关于如何让 MS Query 查看我的 UDF 并接受我在做什么的任何想法？会不会是驱动问题？有一系列 excel 驱动程序可供选择。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T08:49:14.627

查看您提供的信息，您尝试使用两个 Excel 工作簿作为表格来使用 Excel VBA UDF 进行查询。现在我假设您将在 MS Access 中使用这些工作簿作为您的表格。

所有大多数数据库都能够读取`standard SQL`。看到的事情是每个数据库都能够处理在自己的空间中写入的函数。在您的情况下，请在 Access VBA 中编写您的 UDF。然后尝试执行相同的操作。

这是人们有时会面临的一个常见问题，要么是厌倦了从 Excel 访问 MS Access UDF，要么反之亦然。简而言之，当您运行 MS Access 时，查询可以回调到 VBA。但是当您通过`ODBC`or`ADO`时，JET 引擎没有完整的 VBA 模型可供使用，因为它根本没有运行。

你可以尝试做这样的事情：

```
Dim objExcl As Object     
Set objExcl = CreateObject("Excel.Application")     
objExcl.OpenCurrentDatabase "ExcelFileName/Path"     
objExcl.Run ("UDFName")    
objExcl.CloseCurrentDatabase     
Set objExcl = Nothing 
```

坦率地说，我更喜欢将 UDF 移入 Acces ..

参考：

*   [创建访问 UDF](http://datapigtechnologies.com/blog/index.php/creating-and-using-user-defined-functions-in-access/)
*   [http://www.sqlexamples.info/SQL/inlineudf.htm](http://www.sqlexamples.info/SQL/inlineudf.htm)

# windows-phone-7 - Windows Phone：添加自定义帐户

> ID：14604251
> 
> 赞同：1
> 
> 时间：2013-01-30T12:40:39.033
> 
> 标签：windows-phone-7, windows-phone-8

是否可以在 Windows Phone 中创建自定义帐户（类似于 Microsoft 帐户、Facebook、Twitter 等），以便用户可以设置我的自定义类型的帐户，然后可以同步数据等等。

这类似于在 Android 中使用 SyncAdapter。

我可以在 Windows Phone 中实现这一点吗？要使用哪些 API？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:49:59.087

不，没有办法设置您自己的帐户类型。

但在 Windows Phone 8 中，您的应用程序可以将自己的联系人添加到人员中心。以下是基本示例：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207024(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207024(v=vs.105).aspx)

从这本书中你可以得到更多的细节：

[Windows Phone 8 开发内部](http://shop.oreilly.com/product/0790145373342.do)

# jquery - 水平单选按钮 960 网格 - jQuery mobile

> ID：14604254
> 
> 赞同：1
> 
> 时间：2013-01-30T12:40:42.767
> 
> 标签：jquery, css, jquery-mobile, radio-button, radio-group

我正在开发一个 jQuery Mobile 项目。我需要创建 3 个水平单选按钮，拉伸到全宽。我在普通网格上工作过，但我无法拉伸宽度。所以现在使用 960 网格。它增加了按钮之间的空间，而不是将按钮拉伸到全宽。请帮帮我。

```
 <div data-role="content"  >
    <p align="center" class="msg"> Apply leave </p>

    <fieldset class="container_12">
     <fieldset data-role="controlgroup" data-type="horizontal"  class="row_b"> 

<div class="grid_2"> <input type="radio" name="q2" id="q2_0" value="0" checked="checked" data-mini="true" /></div>
            <label for="q2_0">C Leave</label>
        <div class="grid_2">   <input type="radio" name="q2" id="q2_1" value="1" data-mini="true" /></div>
            <label for="q2_1">s Leave</label>
           <div class="grid_2"> <input type="radio" name="q2" id="q2_2" value="2" data-mini="true" /></div>
            <label for="q2_2">P Leave</label>

    </fieldset> </fieldset> 
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:46:30.353

使用此代码：

```
.ui-controlgroup-controls
{
    width:100% !important;
}
.ui-radio {
    width:33% !important;
} 
```

工作示例：http: [//jsfiddle.net/yUZy8/](http://jsfiddle.net/yUZy8/)

# ember.js - 在 Ember.Application.create 之后：处理创建的控制器/路由器/视图等实例

> ID：14604262
> 
> 赞同：2
> 
> 时间：2013-01-30T12:40:52.900
> 
> 标签：ember.js

之后

```
window.App = Ember.Application.create 
```

如何处理自动创建的路由器、控制器实例？我发现几个帖子说

```
 App.LoginController = Ember.Controller.extend ... 
```

应该导致实例化

```
 App.loginController 
```

在应用程序上 - 但 1.0.0-PRE.4 似乎不再是这种情况。

我尝试了几件事，比如

```
 App.router // undefined
 App.get("router") // undefined
 App.get("router.loginController") // undefined
 App.get("router.login") // undefined
 App.get("loginController") // undefined
 ... 
```

但似乎没有任何效果。

```
 App.defaultRouter() 
```

实际上是一个创建一个新的空路由器的函数：但不是我定义的那个

```
 App.Router.map (match)->
     ... 
```

我正在尝试获取一个句柄来查看 chrome 中正在运行的应用程序，并且还需要将一个变量从 ember 外部的异步运行调用传递给控制器​​（一个 facebook 查找以检查用户是否已经登录） -所以任何提示我如何从外面窥探余烬都是非常受欢迎的！

PS：请有人为 ember 创建版本标签：随着所有 API 更改，对于新手来说，目前最困难的事情是找出答案是否真的适用于当前版本的 ember，或者它是否已经过时：指示答案实际适用于哪个版本的标签将非常有帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:40:57.430

在 Ember pre-4 中，实例不再放置在 App.loginController 等上。我认为这些只是为了调试/测试目的而放置在那里，而不是在生产代码中使用。这些现在被放置在

```
App.__container__ 
```

顾名思义，不要使用它。这是超私人的。:)

从前 4 个渲染模板/视图开始，设置控制器和定义控制器的模型/内容将在路由中设置。[您可以在指南http://emberjs.com/guides/routing/](http://emberjs.com/guides/routing/)中了解它

当涉及到与 facebook 集成的问题时，您可以使用 Ember.Instrumentation 命名空间从外部订阅和触发您的应用程序的事件。你可以在这里看到问题和答案：[How to fire an event to Ember from another framework](https://stackoverflow.com/questions/14458287/how-to-fire-an-event-to-ember-from-another-framework)

# scala - 为什么 scala 演员在 2.10 中被弃用？

> ID：14604264
> 
> 赞同：21
> 
> 时间：2013-01-30T12:40:58.080
> 
> 标签：scala, akka, actor, scala-2.10

我只是[比较](https://stackoverflow.com/questions/2906162/different-scala-actor-implementations-overview)不同的 scala actor 实现，现在我想知道在 2.10 中弃用现有 scala actor 实现并用 Akka 实现替换默认 actor 的动机是什么？[迁移指南](http://docs.scala-lang.org/overviews/core/actors-migration-guide.html)和第[一个公告](https://groups.google.com/forum/?fromgroups=#!topic/scala-user/Y_vx3owg-xM)都没有给出任何解释。

根据比较，这两种解决方案有很大的不同，因此保留两者都会有好处。因此，我想知道导致此决定的现有实施是否存在任何重大问题？换句话说，这是技术决定还是政治决定？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-30T13:35:42.783

我不能不给你一个猜测的答案：

Akka 提供了一个稳定而强大的库来处理 Actors，以及许多处理高并发的特性（futures、agents、transactionalactors、STM、FSM、非阻塞 I/O，...）。

此外，它以比 scala 更安全的方式实现 actor，因为客户端代码只能访问 generic `ActorRef`。这使得除了通过消息传递之外无法与参与者进行交互。
[*编辑：* 正如 Roland 指出的那样，这还可以通过监督层次结构和*位置透明性实现**容错*等附加功能：无需更改客户端代码即可在本地或远程部署参与者的能力。 整体设计更接近于 erlang 中的原始设计。]

 *许多核心功能在 scala 和 akka actor 中重复，因此统一似乎是最明智的选择（鉴于这两个库的开发团队现在也是同一公司的一部分：Typesafe）。
主要收获是避免重复相同的核心功能，这只会造成混淆和兼容性问题。

鉴于需要做出选择，剩下的只是决定哪个是标准实现。

很明显，Akka 在这方面可以提供更多功能，它是一个成熟的框架，已经包含许多企业级功能，并且在不久的将来还会有更多功能。

我想不出 scala.actors 能够完成 akka 无法完成的特定情况。

* * *

ps 做了类似的推理，导致在 2.10中统一了标准的[future/promise实现](http://docs.scala-lang.org/sips/pending/futures-promises.html)

整个 scala 语言和社区必须从简化的界面到基础语言特性中获益，而不是由不同框架组成的碎片化场景，每个框架都有自己的语法和模型需要学习。

对于其他更高级的方面，如网络框架，开发人员从更丰富的可用解决方案全景中获益，则不能这样说。*

# gradle - 依次调用子项目和其他任务的 Gradle 批处理任务

> ID：14604266
> 
> 赞同：9
> 
> 时间：2013-01-30T12:41:03.257
> 
> 标签：gradle

我正在为多模块项目编写 gradle 1.4 构建文件。所以有根**build.gradle**定义如下：

```
subprojects {
    apply plugin: 'java'
    ... 
```

它定义了所有子模块的**构建**任务。子模块包含在**settings.gradle 中**，每个模块都有其构建文件，其中包含定义的依赖项。

到目前为止，一切都按书本：）现在，在主构建文件中，我添加了一些额外的项目范围任务，例如：*aggregateJavadoc*（将所有 javadocs 收集到一个中）或*bundleJar*（从所有类创建 bundle jar），等等。手动调用时，每个 on 都可以工作。

现在我需要一个任务**发布**

*   构建所有子模块（从命令行调用 - 意思是，我不想为每个子模块手动编写 execute()）

*   调用其他任务（我假设使用 execute() ）。

我尝试了**dependsOn**，但未遵循列出任务的顺序。此外，依赖模块似乎在发布任务执行后执行。我尝试了其他几个想法，但都失败了。

*问题：创建此类批处理任务*的最佳方法是什么，它必须在所有子模块上调用某些东西并另外执行更多任务？什么是最好的对 gradle 友好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T16:35:54.220

碰巧这可以通过简单的依赖管理来解决。

所以，我们有很多模块。现在，让我们根据正在构建的模块创建其他任务：

```
task aggregateJavadoc(type: Javadoc) {
    dependsOn subprojects.build

task bundleJar(type: Jar) {
    dependsOn subprojects.build 
```

最后，我们的`release`任务看起来像这样：

```
task release() {
    dependsOn subprojects.build
    dependsOn aggregateJavadoc
    dependsOn bundleJar
    ...
} 
```

这将首先构建子项目；不是因为它被列在最前面，而是因为附加任务取决于构建。附加任务的顺序并不重要。这对我来说最有意义。

编辑如果您的子项目之一（即模块）是非 java 模块，那么您将在构建此项目时遇到问题。我所做的是对子模块进行分组，如下所示：

```
def javaModules() {
    subprojects.findAll {it.name.contains('jodd-')}
} 
```

然后改为引用`subprojects`，`javaModules`到处使用！例如：

```
configure(javaModules()) {
    apply plugin: 'java'
    ... 
```

和

```
task prj {
    dependsOn javaModules().build
} 
```

顺便说一句，我在所有依赖于构建的其他项目上使用这个“虚拟”任务，以防止重复`prj`。`dependsOn`

# r - 如何在 R 中创建用户定义的 S4 类的数据框

> ID：14604269
> 
> 赞同：11
> 
> 时间：2013-01-30T12:41:07.720
> 
> 标签：r, s4

我想创建一个包含不同变量的 data.frame，包括 S4 类。对于像“POSIXlt”（日期）这样的内置类，这很好用：

```
as.data.frame(list(id=c(1,2), 
                   date=c(as.POSIXlt('2013-01-01'),as.POSIXlt('2013-01-02')) 
```

但是现在我有一个用户定义的类，让我们说一个带有名称和年龄的“Person”类：

```
setClass("person", representation(name="character", age="numeric")) 
```

但以下失败：

```
as.data.frame(list(id=c(1,2), pers=c(new("person", name="John", age=20),
                                     new("person", name="Tom", age=30)))) 
```

我还尝试使用 [...]-Operator 为 person 类重载

```
setMethod(
  f = "[",
  signature="person",
  definition=function(x,i,j,...,drop=TRUE){ 
    initialize(x, name=x@name[i], age = x@age[i])
  }
) 
```

这允许类似向量的行为：

```
persons = new("person", name=c("John","Tom"), age=c(20,30))
p1 = persons[1] 
```

但是以下仍然失败：

```
as.data.frame(list(id=c(1,2), pers=persons)) 
```

也许我必须重载更多运算符才能将用户定义的类放入数据框中？我敢肯定，一定有办法做到这一点，因为 POSIXlt 是一个 S4 类并且它有效！任何使用新 R5 参考类的解决方案也可以！

我不想把我所有的数据都放到 person 类中（你可能会问，为什么“id”不是 person 的成员，我只是不使用数据框）！这个想法是我的 data.frame 代表数据库中的一个表，其中包含许多不同类型的列，例如字符串、数字……还有日期、间隔、地理对象等……而对于我已经拥有的日期一个解决方案（POSIXlt），用于间隔、地理对象等。我可能需要指定我自己的 S4/R5 类。

提前非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T15:15:40.520

这是您的课程，对其定义进行“列”解释，而不是行；这对性能很重要；还有日期供参考

```
setClass("person", representation(name="character", age="numeric"))
pers <- new("person", name=c("John", "Tom"), age=c(20, 30))
date <- as.POSIXct(c('2013-01-01', '2013-01-02')) 
```

一些实验，包括查看`methods(class="POSIXct")`和注意错误消息导致我实现`as.data.frame.person`和`format.person`（后者用于在 data.frame 中显示）作为

```
as.data.frame.person <-
    function(x, row.names=NULL, optional=FALSE, ...)
{
    if (is.null(row.names))
        row.names <- x@name
    value <- list(x)
    attr(value, "row.names") <- row.names
    class(value) <- "data.frame"
    value
}

format.person <- function(x, ...) paste0(x@name, ", ", x@age) 
```

这让我在 data.frame 中得到我的对象：

```
> lst <- list(id=1:2, date=date, pers=pers)
> as.data.frame(lst)
     id       date     pers
John  1 2013-01-01 John, 20
Tom   2 2013-01-02  Tom, 30 
```

如果我想子集，那么我需要

```
setMethod("[", "person", function(x, i, j, ..., drop=TRUE) {
    initialize(x, name=x@name[i], age=x@age[i])
}) 
```

我不确定当`data.frame`遇到更多操作时可能需要哪些其他方法，没有“data.frame 接口”。

在 data.table 中使用矢量化类似乎需要一个长度方法来构造。

```
> library(data.table)
> data.table(id=1:2, pers=pers)
Error in data.table(id = 1:2, pers = pers) : 
  problem recycling column 2, try a simpler type
> setMethod(length, "person", function(x) length(x@name))
[1] "length"
> data.table(id=1:2, pers=pers)
   id     pers
1:  1 John, 20
2:  2  Tom, 30 
```

也许有一个 data.table 接口？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T14:43:40.697

从邮件列表上的这个线程来看：

[http://tolstoy.newcastle.edu.au/R/e2/devel/06/11/1013.html](http://tolstoy.newcastle.edu.au/R/e2/devel/06/11/1013.html)

...John Chambers 在 2006 年就考虑过这个问题。但我们仍然不能将 S4 对象放在数据帧的列中。我们也不能将复杂的 S3 类放在数据帧的列中。

还有一些其他的表格数据结构可能会这样做 - data.table 可能：

```
require(data.table)
setClass("geezer", representation(name="character", age="numeric"))
tom=new("geezer",name="Tom",age=20)
dick=new("geezer",name="Dick",age=23)
harry=new("geezer",name="Harry",age=25)
gt = data.table(geezers=c(tom,dick,harry),weapons=c("Gun","Gun","Knife"))
gt
    geezers weapons
1: <geezer>     Gun
2: <geezer>     Gun
3: <geezer>   Knife 
```

data.table 的语义与 data.frame 有点不同，不要期望能够将 data.table 插入任何使用 data.frame 的代码并期望它工作（例如，我怀疑`lm`和`glm`会摇摇晃晃）。但似乎 data.table 作者允许列中的复合类......

# iphone - 准确读取 iPhone 信号强度

> ID：14604273
> 
> 赞同：10
> 
> 时间：2013-01-30T12:41:19.707
> 
> 标签：iphone, objective-c, xcode, signals

已经有一些关于此的问题，但其中似乎没有提供准确的结果。我需要简单地确定手机是否在给定时刻连接到手机网络。

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CTCarrier/Reference/Reference.html)

此类似乎记录不正确，返回未在手机上安装 SIM 卡的 mobileCountryCode、isoCountryCode 和 mobileNetworkCode 的值。如果手机已解锁，则运营商名称表示“家庭”网络或以前的家庭网络。

我还查找了一些人声称以下工作，它使用 CoreTelephony 框架的未记录方法，但结果对我来说毫无用处，报告看似随机的数字，可能它本身并没有持续更新。

```
-(int) getSignalStrength
{
    void *libHandle = dlopen("/System/Library/Frameworks/CoreTelephony.framework/CoreTelephony", RTLD_LAZY);
    int (*CTGetSignalStrength)();
    CTGetSignalStrength = dlsym(libHandle, "CTGetSignalStrength");
    if( CTGetSignalStrength == NULL) NSLog(@"Could not find CTGetSignalStrength");
    int result CTGetSignalStrength();
    dlclose(libHandle);
    return result;
} 
```

谢谢。

编辑：该应用程序已连接到内部 wifi 并且必须保持连接，这使得可达性检查更加困难。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T13:03:02.720

我正在玩这个函数，我注意到你以一种有趣的方式调用它。我通过添加 CoreTelephony.framework 作为编译时链接来调用它。对于函数本身，您需要在某处声明它的原型（可能就在您调用的方法上方）：

`int CTGetSignalStrength();`

这需要声明，因为它不在 CoreTelephony 的公共标头中。

现在，我构建了一个简单的应用程序，每秒打印一次信号强度。

```
int CTGetSignalStrength();

- (void)viewDidLoad
{
    [super viewDidLoad];

    while (true) {
        printf("signal strength: %d\n", CTGetSignalStrength());
        sleep(1);
    }
} 
```

我在我的 iPad mini 上运行它，它显示稳定的值，直到我拿起它，数字上升了。用锡纸包裹我的 iPad（锡纸是我以前从未使用过的调试工具）导致数字下降。当我将 iPad 置于飞行模式时，它不断重复上一个值，所以这对你来说不是一个准确的测量值。

如果您想测试设备当前是否具有蜂窝数据网络连接，您可能对[Reachability](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)更感兴趣，特别是`kSCNetworkReachabilityFlagsIsWWAN`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T16:29:43.887

好的，我想我现在有了正确的解决方案，最后更简单了。

The issue with the CTGetSignalStrength() method is that it works normally, but if you remove a sim, it reports the last signal before the removal. I found another method in the same framework called CTSIMSupportGetSIMStatus(), also undocumented, which can tell you if a SIM is currently connected. Using both as follows should confirm the current network signal.

First declare the methods:

```
NSString * CTSIMSupportGetSIMStatus();
int CTGetSignalStrength(); 
```

Then check connectivity to cell network like so:

```
NSString *status = CTSIMSupportGetSIMStatus();
int signalstrength = CTGetSignalStrength();
BOOL connected = ( [status isEqualToString: @"kCTSIMSupportSIMStatusReady"] && signalstrength > 0 ); 
```

# web-services - oracle 集成存储库包

> ID：14604278
> 
> 赞同：0
> 
> 时间：2013-01-30T12:41:24.070
> 
> 标签：web-services, oracle

我是 Oracle 新手，在按照说明将包导入集成存储库时遇到了麻烦。

说明包括用于创建包和主体的代码，但并没有真正告诉我如何处理该代码。看起来我应该在 SQL Plus 中运行它。那是对的吗？

它还包括生成 ILDT 文件的说明——但仅限于通用方式。这些说明只是让我参考“SOA 网关实施指南”。（[http://docs.oracle.com/cd/E18727_01/doc.121/e12169/T511175T543269.htm](http://docs.oracle.com/cd/E18727_01/doc.121/e12169/T511175T543269.htm)）命令是：

$IAS_ORACLE_HOME/perl/bin/perl $FND_TOP/bin/irep_parser.pl -g -v -username=sysadmin itg:patch/115/sql:fndav.pls:12.0=/tmp/fndav.pls

我不确定 .pls 文件使用什么。是否已生成，然后还创建了 ILDT 文件？

为这个新手问题道歉。

我很感激任何帮助！

谢谢，

萨米人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T16:58:57.243

您现在可能已经想到了，根据 oracle 约定，.pls 文件是包规范，.plb 是包体。

# javascript - 选择一些复选框并根据单选按钮添加只读属性

> ID：14604279
> 
> 赞同：0
> 
> 时间：2013-01-30T12:41:29.710
> 
> 标签：javascript, jquery, checkbox, jquery-checktree

我正在使用 jQuery 插件[**CheckTree**](http://static.geewax.org/checktree/index.html)，我可以根据单选按钮自动选择一些复选框。

我有两个单选按钮：

1.  当我们点击默认单选按钮时，一些复选框必须检查，它必须是只读的，其余的复选框必须禁用（只读）

2.  当我们单击自定义按钮时，必须取消选中所有复选框

这是一个[**小提琴**](http://jsfiddle.net/Pervez/eRj5c/)

以下是我迄今为止尝试过的代码：

```
<script>
    $(function() {
        $('.check-all').live('change', function() {
            //      $('.tree').find('input[class=cus]').attr('checked', true);
            $('.tree').find('input[class=def]').attr('checked', false);
            //      $('ul.tree').find('input.cus').siblings("div.checkbox").click();
            $('ul.tree').find('input.def').siblings("div.checkbox").click();
        });
        $('.uncheck-all').live('change', function() {
            //  $('.tree').find('input[class=cus]').attr('checked',false);
            $('.tree').find('input[class=def]').attr('checked', true);
            $('ul.tree').find('input.def').siblings("div.checkbox").click();
        });
    });
</script>
<div class="b2"><b>Define categories </b>
</div>
</div>
<form action="http://localhost:8080/cgi-bin/cat_checkbox.pl" method="POST"
name="form1">
    <div class="options">
        <ul>
            <label>
                <input type="radio" name="Selection" class="check-all" value="Default"
                id="type_0" checked="checked" />Default</label>
            <label>
                <input type="radio" name="Selection" class="uncheck-all" value="Custom"
                id="type_1" />Custom</label>
        </ul>
        <ul class="tree">
            <li>
                <input type="checkbox">
                <label>Select All</label>
                <ul>
                    <li>
                        <input type='checkbox' value='1'>
                        <label style="" alt="">main1</label>
                        <ul>
                            <li>
                                <input type='checkbox' name='chk_0' class="def" value='1'>
                                <label>option1</label>
                            </li>
                            <li>
                                <input type='checkbox' name='chk_1' class="def" value='1'>
                                <label>option1</label>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <input type='checkbox' name='' id='10' value='1'>
                        <label>main2</label>
                        <ul>
                            <li>
                                <input type='checkbox' class="cus" name='' id='chk_7' ' value='1 '>  <label>option1</label></li>
        <li><input type='checkbox ' class="cus" name='chk_4 ' id='chk_8
                                ' value='1 '> <label>option1</label></li>
        <li><input type='checkbox ' class="cus" name='chk_5 ' id='chk_9
                                ' value='1 '><label>option1</label></li>
    </ul>
    </li>
    <li><input type='checkbox ' name=' ' id='10 ' value='1 '><label>main3</label>
        <ul style="width: 90%">
        <li><input type='checkbox ' class="cus" name=' ' id='chk_7 '' value='1'>
                                <label>option1</label>
                            </li>
                            <li>
                                <input type='checkbox' class="cus" name='chk_4' id='chk_8' value='1'>
                                <label>option1</label>
                            </li>
                            <li>
                                <input type='checkbox' class="cus" name='chk_5' id='chk_9' value='1'>
                                <label>option1</label>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <input type='checkbox' name='' id='10' value='1'>
                        <label>main3</label>
                        <ul style="width: 90%">
                            <li>
                                <input type='checkbox' class="def" name='' id='chk_7' ' value='1 '><label>option1</label></li>
        <li><input type='checkbox ' class="def" name='chk_4 ' id='chk_8
                                ' value='1 '><label>option1</label></li>
        <li><input type='checkbox ' class="def" name='chk_5 ' id='chk_9
                                ' value='1 '><label>option1</label></li>
    </ul>
    </li>
    <li><input type='checkbox ' name=' ' id='10 ' value='1 '><label>main3</label>
        <ul style="width: 90%">
        <li><input type='checkbox ' class="cus" name=' ' id='chk_7 '' value='1'>
                                <label>option1</label>
                            </li>
                            <li>
                                <input type='checkbox' class="cus" name='chk_4' id='chk_8' value='1'>
                                <label>option1</label>
                            </li>
                            <li>
                                <input type='checkbox' class="cus" name='chk_5' id='chk_9' value='1'>
                                <label>option1</label>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:03:00.520

试试：http: [//jsfiddle.net/eRj5c/5/](http://jsfiddle.net/eRj5c/5/)

```
$(function() {
 $('.check-all').on('change', function(){
        $('.tree').find('input[class=cus]').prop('checked', true);
        $('.tree').find('input[class=def]').prop('checked',false);
        $('.tree').find('input').prop('disabled', 'disabled');
        $('ul.tree').find('input.cus').siblings("div.checkbox").click();
        $('ul.tree').find('input.def').siblings("div.checkbox").click();
 });
 $('.uncheck-all').on('change', function(){
    $('.tree').find('input').prop('checked', true).removeAttr('disabled');
    $('ul.tree').find('input.def').siblings("div.checkbox").click();
 });
 $('.check-all').change();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:10:07.037

试试这个：http: [//jsbin.com/oteduf/1/edit](http://jsbin.com/oteduf/1/edit)

# html

```
<input type="radio" name="Selection" class="check-all" value="Default" id="type_0" /> 
```

# jQuery

```
 $(function() {
    $(document).on('change', '.check-all', function(){
       $('.tree').find('input[class=def]').prop('checked',true);
       $('ul.tree').find('input.def').siblings("div.checkbox").click();
    });
    $(document).on('change', '.uncheck-all', function(){
       $('.tree').find('input[class=def]').prop('checked', false);
       $('ul.tree').find('input.def').siblings("div.checkbox").click();
    });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:59:16.813

这应该做我认为你想要实现的......

```
function reset() {
    $('.tree').find('input').prop('checked', false).prop('disabled', true);
    $('.tree').find('input.def').prop('checked', true);
}

reset();

$('.check-all').on('click', function(){
    reset();
});

$('.uncheck-all').on('click', function(){
    $('.tree').find('input').prop('checked', false).prop('disabled', false);       
}); 
```

# android - Android Youtube Player Api - ERROR_CONNECTING_TO_SERVICE

> ID：14604280
> 
> 赞同：2
> 
> 时间：2013-01-30T12:41:35.020
> 
> 标签：android, youtube-api

我正在尝试使用新的 api youtube。我按照提供的示例进行操作，但出现错误：ERROR_CONNECTING_TO_SERVICE

我使用的“API 密钥”是正确的（因为它在谷歌演示中正常工作）。

进口：

```
import com.google.android.youtube.player.YouTubeBaseActivity;
import com.google.android.youtube.player.YouTubeInitializationResult;
import com.google.android.youtube.player.YouTubePlayer;
import com.google.android.youtube.player.YouTubePlayer.Provider;
import com.google.android.youtube.player.YouTubePlayerView; 
```

类定义：

```
public class Track extends YouTubeBaseActivity implements YouTubePlayer.OnInitializedListener {

     private YouTubePlayerView ytpv;
     private YouTubePlayer ytp;

     public void onCreate(Bundle savedInstanceState) {
          ...

          ytpv = (YouTubePlayerView) findViewById(R.id.youtube_view);
          ytpv.initialize("my_api_key_correctly_created", this); 
     }

     public void onInitializationFailure(Provider arg0, YouTubeInitializationResult arg1) {
          Toast.makeText(this, "Initialization Fail" + arg1.toString(), Toast.LENGTH_LONG).show();
     }

     public void onInitializationSuccess(Provider arg0, YouTubePlayer arg1, boolean arg2) {
          ytp = arg1;
          Toast.makeText(this, "Initialization  Success", Toast.LENGTH_LONG).show();

          if(ytp !=null)
          {
               ytp.loadVideo("ZvvgDC_MNqI");
          }
     }
} 
```

我究竟做错了什么？谢谢，对不起我的英语:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T14:41:19.620

您是否尝试将“跟踪”活动作为 TabHost 内的 ActivityGroup/TabActivity 的一部分启动？如果是这样，很遗憾 YouTubePlayerView 或 YouTubePlayerFragment 无法在 ActivityGroup 中初始化。由于 ActivityGroup 现在已弃用，我能给出的唯一建议是改用 Fragments。

# c - 下面的c代码是什么意思？

> ID：14604283
> 
> 赞同：-2
> 
> 时间：2013-01-30T12:41:40.857
> 
> 标签：c, function-pointers, typedef

```
typedef int (*http_data_cb) (http_parser*, const char *at, size_t length); 
```

据我所知，**typedef**为标准库中的类型分配了新名称。在这种情况下，实例`*http_data_cb`是 int，但是`(http_parser*, const char *at, size_t length)`呢？

这是[整个代码的链接](http://cpansearch.perl.org/src/ALEXBIO/Git-Raw-0.14/xs/libgit2/deps/http-parser/http_parser.h)

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:44:12.270

这是一种将 typedef 类型作为函数指针的方法。通常在此类 typedef 中，您不会命名函数的参数，而仅指示它们的类型。

因此，该类型的变量`http_data_cb`将是一个指向函数的指针，该函数返回 int 结果并采用三个类型的参数`http_parser*`，`const char`并`size_t`按此顺序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:44:05.160

它声明了一个*函数指针*类型。

type-alias`http_data_cb`是一个指向函数的指针，该函数接收三个参数并返回一个整数。

您可以使用它来获得指向其他函数的指针，例如在事件驱动系统中作为回调传递。

有关阅读和理解声明的更多帮助，请参阅[顺时针/螺旋规则](http://c-faq.com/decl/spiral.anderson.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:53:32.083

**http_data_cb**：是一个变量

**(*http_data_cb)** : 是一个指针变量

**(*http_data_cb)(...)** : 是指向函数的指针变量

**(*http_data_cb)(http_parser*, const char *at, size_t length)** : 是一个指针变量，指向接收 (http_parser*, const char *at, size_t length) 的函数

**int (*http_data_cb)(http_parser*, const char *at, size_t length)**：是一个指针变量，指向接收 (http_parser*, const char *at, size_t length) 并返回一个 int 的函数。

**typedef int (*http_data_cb)(http_parser*, const char *at, size_t length):** http_data_cb 被声明为一个新的数据类型别名，作为一个指针变量，指向一个接收的函数 (http_parser*, const char *at, size_t length) 和返回一个整数。

# regex - 如何在 Perl 中使用正则表达式验证日本数字？

> ID：14604295
> 
> 赞同：0
> 
> 时间：2013-01-30T12:42:28.543
> 
> 标签：regex, perl, unicode

下面我附上我的 Perl 脚本。我正在用日语中的一个等价物测试数字 1234。（我从维基百科复制......也许它不是 100% 正确的）。

使用

```
\p{decimal number}+
\p{Number}+
\d+ 
```

该代码适用于 ASCII 版本，但对于日语，我只找到以下示例：

```
[0-9\x{3041}-\x{3096}\x{30a1}-\x{30fc}\x{4e00}-\x{9faf}] 
```

在这种情况下我做错了什么？

```
use 5.016;

use utf8;
use charnames   qw< :full >;
use feature     qw< unicode_strings >;

use Test::More tests => 2;

sub is_valid {
  my $string = shift;

  $string ~~ /^[0-9\x{3041}-\x{3096}\x{30a1}-\x{30fc}\x{4e00}-\x{9faf}]+$/u

  #/\p{decimal number}+/msx
}

ok(is_valid("1234"), "ascii");
ok(is_valid("壱弐参四"), "japanese"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:17:31.153

您的代码在 v5.14 上为我传递。

`/u`不会做你认为它在那里做的事情，因为你在模式中只有 ASCII。您需要 v5.16，并且在 v5.14 中出现。除非您尝试使用某些 v5.16 增强功能，否则没有什么大不了的。

正如许多人所指出的，数字和数字之间存在语义差异。我认为您只想匹配一系列数字。问题是 UCS 没有将您要匹配的字符标记为数字。

因此，您创建了一个非常广泛的角色类来做到这一点。我认为你坚持这一点。你可能不想继续这样做。您可以将其全部隐藏在一个子例程中，但您也可以定义其他属性。您创建了一个特殊命名的子例程，它返回一个字符串，其中包含字符范围的行作为十六进制值。这是[perlunicode](http://perldoc.perl.org/perlunicode.html)的示例：

```
sub InKana {
    return <<END;
3040\t309F
30A0\t30FF
END
} 
```

您可以使用[Unicode::Unihan](http://www.metacpan.org/module/Unicode%3a%3aUnihan)模块来找出您想要的点。您可以使用代码来完成，但所有这些都是在查找与该方法同名的[Unihan 数据库文件中完成的。](http://www.unicode.org/charts/unihangridindex.html)真正懂日语的人将不得不对此进行调整以选择正确的字符：

```
use v5.10;

use Number::Range;
use Unicode::Unihan;

my $db = Unicode::Unihan->new;
my $range = Number::Range->new;

foreach my $u ( 0 .. 0x01dfff ) {
    my $char = chr $u;
    next unless $char =~ /\p{Script: Han}/;
    my $value = 
        $db->PrimaryNumeric( $char ) ||
        $db->AccountingNumeric( $char ) ||
        $db->OtherNumeric( $char )
        ;
    next unless defined $value;
    my $hex = sprintf "%X", $u;
    say chr($u), " (U+$hex) has numeric value: ", $value;
    $range->addrange( $u );
    }

my $sub = 
q(sub InJapaneseDigit {
    return <<'HERE';
)

.

join( "\n", 
    map { 
        join "\t", 
            map { sprintf "%X", $_ } 
            split /\.\./;  
        } 
    split /,/, $range->range 
    )

.

qq(\nHERE\n});

say $sub; 
```

该程序输出：

```
㐅 (U+3405) has numeric value: 5
㒃 (U+3483) has numeric value: 2
㠪 (U+382A) has numeric value: 5
㭍 (U+3B4D) has numeric value: 7
一 (U+4E00) has numeric value: 1
七 (U+4E03) has numeric value: 7
万 (U+4E07) has numeric value: 10000
三 (U+4E09) has numeric value: 3
九 (U+4E5D) has numeric value: 9
二 (U+4E8C) has numeric value: 2
五 (U+4E94) has numeric value: 5
亖 (U+4E96) has numeric value: 4
亿 (U+4EBF) has numeric value: 100000000
什 (U+4EC0) has numeric value: 10
仟 (U+4EDF) has numeric value: 1000
仨 (U+4EE8) has numeric value: 3
伍 (U+4F0D) has numeric value: 5
佰 (U+4F70) has numeric value: 100
億 (U+5104) has numeric value: 100000000
兆 (U+5146) has numeric value: 1000000000000
兩 (U+5169) has numeric value: 2
八 (U+516B) has numeric value: 8
六 (U+516D) has numeric value: 6
十 (U+5341) has numeric value: 10
千 (U+5343) has numeric value: 1000
卄 (U+5344) has numeric value: 20
卅 (U+5345) has numeric value: 30
卌 (U+534C) has numeric value: 40
叁 (U+53C1) has numeric value: 3
参 (U+53C2) has numeric value: 3
參 (U+53C3) has numeric value: 3
叄 (U+53C4) has numeric value: 3
四 (U+56DB) has numeric value: 4
壱 (U+58F1) has numeric value: 1
壹 (U+58F9) has numeric value: 1
幺 (U+5E7A) has numeric value: 1
廾 (U+5EFE) has numeric value: 9
廿 (U+5EFF) has numeric value: 20
弌 (U+5F0C) has numeric value: 1
弍 (U+5F0D) has numeric value: 2
弎 (U+5F0E) has numeric value: 3
弐 (U+5F10) has numeric value: 2
拾 (U+62FE) has numeric value: 10
捌 (U+634C) has numeric value: 8
柒 (U+67D2) has numeric value: 7
漆 (U+6F06) has numeric value: 7
玖 (U+7396) has numeric value: 9
百 (U+767E) has numeric value: 100
肆 (U+8086) has numeric value: 4
萬 (U+842C) has numeric value: 10000
貮 (U+8CAE) has numeric value: 2
貳 (U+8CB3) has numeric value: 2
贰 (U+8D30) has numeric value: 2
阡 (U+9621) has numeric value: 1000
陆 (U+9646) has numeric value: 6
陌 (U+964C) has numeric value: 100
陸 (U+9678) has numeric value: 6

sub InJapaneseDigit {
        return <<'HERE';
3405
3483
382A
3B4D
4E00
4E03
4E07
4E09
4E5D
4E8C
4E94
4E96
4EBF    4EC0
4EDF
4EE8
4F0D
4F70
5104
5146
5169
516B
516D
5341
5343    5345
534C
53C1    53C4
56DB
58F1
58F9
5E7A
5EFE    5EFF
5F0C    5F0E
5F10
62FE
634C
67D2
6F06
7396
767E
8086
842C
8CAE
8CB3
8D30
9621
9646
964C
9678
HERE
} 
```

# asp.net - 部署后无法访问远程数据库

> ID：14604309
> 
> 赞同：1
> 
> 时间：2013-01-30T12:43:03.457
> 
> 标签：asp.net, sql-server-2008, iis, web-deployment

我意识到那里有很多“解决方案”，但没有一个能解决我的问题。

我最近创建了一个网站，并在生产机器上使用 iis7.5/sql server 2008。

我的数据库连接在我的开发服务器上，但没有连接到生产机器上。我的开发机器是 sql express 2008。

这是连接：

```
<add name="PingtreeEntities"
  providerName="System.Data.EntityClient"
  connectionString="metadata=
  res://*/;
  provider=System.Data.SqlClient;
  provider connection string=&quot;
  Data Source=localhost;
  Initial Catalog=Pingtree;
  Integrated Security=False;
  User Id=PingtreeUser;
  Password=*********;
  MultipleActiveResultSets=True&quot;" /> 
```

这是我收到的信息：

```
[SqlException (0x80131904): Cannot open database "Pingtree" requested by the login. The login failed.
Login failed for user 'PingtreeUser'.]
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +6333056
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() +412
   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +1363
   System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) +53
   System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout) +6348014
   System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) +6347929
   System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) +352
   System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) +831
   System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) +49
   System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) +6349734
   System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) +78
   System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) +1938
   System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +89
   System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +6352606
   System.Data.SqlClient.SqlConnection.Open() +300
   System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure) +67

[EntityException: The underlying provider failed on Open.]
   System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf(Boolean openCondition, DbConnection storeConnectionToOpen, DbConnection originalConnection, String exceptionCode, String attemptedOperation, Boolean& closeStoreConnectionOnFailure) +11079326
   System.Data.EntityClient.EntityConnection.Open() +142
   System.Data.Objects.ObjectContext.EnsureConnection() +97
   System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption) +66
   System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator() +47
   System.Linq.Enumerable.SingleOrDefault(IEnumerable`1 source) +271
   System.Linq.Queryable.SingleOrDefault(IQueryable`1 source) +383
   Pingtree.BLL.Data.Applicants.Find(Applicant applicant) in C:\Documents and Settings\John\My Documents\Visual Studio 2010\Projects\Pingtree\BLL\Data\Applicants.cs:32
   Pingtree.BLL.Data.Applications.Test(Applicant applicant, Application application, AcceptedApplication acceptedApplication, ContactPermission contactPermission) in C:\Documents and Settings\John\My Documents\Visual Studio 2010\Projects\Pingtree\BLL\Data\Applications.cs:24
   Pingtree.Public.Test.Add_Click(Object sender, EventArgs e) in C:\Documents and Settings\John\my documents\visual studio 2010\Projects\Pingtree\Pingtree\Public\Test.aspx.cs:107
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +154
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3707 
```

我尝试通过使用直接连接将 EF 从等式中删除，但仍然得到相同的消息，但堆栈略有不同。

开始扯我的头发。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:51:09.337

让我坚持。请尝试以这种方式 DROP 和 CREATE login 和 db-user：

*（请注意，您必须将密码更改为您使用的密码）*

```
-- Drop & recreate login
USE [master]
GO
IF EXISTS(SELECT * FROM sys.syslogins WHERE name = N'PingtreeUser')
    DROP LOGIN [PingtreeUser];
GO
CREATE LOGIN [PingtreeUser]
    WITH
        PASSWORD=N'password',
        DEFAULT_DATABASE=[Pingtree],
        CHECK_EXPIRATION=OFF, CHECK_POLICY=OFF
GO

-- Drop & recreate db-user
USE [Pingtree]
GO
IF  EXISTS (SELECT * FROM sys.database_principals WHERE name = N'PingtreeUser')
    DROP USER [PingtreeUser];
GO
CREATE USER [PingtreeUser] FOR LOGIN [PingtreeUser]
GO
EXEC sp_addrolemember N'db_owner', N'PingtreeUser'
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:25:11.447

最明显的解释是最简单的：您在该数据库服务器上为该帐户设置了错误的密码。我假设你已经验证了

1.  该帐户存在于 SQL 2008 服务器上；
2.  您可以使用您使用的密码登录吗？

另外，你为什么在生产机器上指的是“localhost”？您的数据库与您的 Web 服务器在同一台机器上吗？（不一定是个好主意。）无论哪种方式，您都需要使用数据库服务器名称，而不是网络上的机器名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:27:36.687

确保`PingtreeUser`具有数据库的必要权限`Pingtree`。

1.  在 MS SQL Server Management Studio 中，使用`sa`帐户或通过 Windows 身份验证登录
2.  展开`.\SQLEXPRESS > Security > Logins`文件夹
3.  双击`PingtreeUser`
4.  确保这`Default database`是`Pingtree`
5.  点击`User Mapping`左侧
6.  确保`Pingtree`检查数据库
7.  在底部，检查`db_owner`
8.  点击`Ok`

这应该提供`PingtreeUser`访问`Pingtree`数据库的必要权限。

# sql - 如何从三表连接中获取 MAX 和 COUNT？

> ID：14604310
> 
> 赞同：0
> 
> 时间：2013-01-30T12:43:04.270
> 
> 标签：sql, database, sql-server-2008, join

我有一个面试问题，其中有一个以数据库为模型的汽车销售。每个`Car`代表汽车销售中的一辆实体汽车，它指的是一个`Make`和一个`Model`表。一张`Sale`桌子跟踪每一个`Car`售出的东西。A`Sale`仅包含一个`Car`，因此`Sale`每个`Car`已售出的唯一产品都有一个记录。

问题是找出`Model`汽车销售中销量最高的名称。我回答了一个 3 级嵌套查询。面试官特别要求使用连接的解决方案，我只成功地连接了没有聚合的表。

在使用其他两个聚合时，您将如何加入以下 3 个表（汽车、制造、销售）？

这是模式的粗略草图。这里卖得最多的`Model`应该是'卡罗拉'

```
Car

| carid|  modid | etc...
_________________
|  1   |    1   |
|  2   |    1   |
|  3   |    1   |
|  4   |    2   |
|  5   |    2   |

Make

| mkid |  name  |
_________________
|  1   | Toyota |
|  2   | Nissan |
|  3   |  Chevy |
|  4   |  Merc  |
|  5   |  Ford  |

Model

| modid|  name   | mkid |
________________________
|  1   |  Corolla|  1
|  2   |  Sunny  |  2
|  3   |  Carina |  1
|  4   |  Skyline|  2
|  5   |  Focus  |  5

Sale

|  sid |  carid | etc...
_________________
|  1   |    1   |
|  2   |    2   |
|  3   |    3   |
|  4   |    4   |
|  5   |    5   | 
```

编辑：

使用 MS SQL Server 2008

需要的输出：

```
Model Name |  Count
_____________________
Corolla    |    3 
```

即`Car`销量最多的型号。请注意，表中只有 3 个 Corollas 和 2 个 Sunnys，`Car`而`Sale`表中的每一个都对应于其他销售细节。这 5`Sale`条记录实际上是 Corolla、Corolla、Corolla、Sunnnu 和 Sunny。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:12:11.360

既然您正在使用`SQL Server 2008`，请使用`Common Table Expression`和`Window Function`。

```
WITH recordList
AS
(
    SELECT  c.name, COUNT(*) [Count],
            DENSE_RANK() OVER (ORDER BY COUNT(*) DESC) rn
    FROM    Sale a
            INNER JOIN Car b
                ON a.carid = b.carID
            INNER JOIN Model c
                ON b.modID = c.modID
    GROUP   BY c.Name
)
SELECT name, [Count]
FROM recordList
WHERE rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e6158/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T12:58:05.647

当面试官提出这个要求时，他们通常希望你说你会使用窗口函数。您可以给每个销售一个按型号划分的唯一升序数字，您获得的最高销售数字将是最大数量。

[http://www.postgresql.org/docs/9.1/static/tutorial-window.html](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T12:58:14.960

基于您新添加的 SQL Server 2008 标记。如果您使用不同的 RDBMS，您可能需要使用`limit`而不是将其放在子查询`top`的末尾。`top_sold_car`

```
select Make.name as Make, Model.name as Model
from (
    select top 1 count(*) as num_sold
    from Car
    group by modid
    order by num_sold desc) as top_sold_car
join Model
    on (top_sold_car.modid = Model.modid)
join Make
    on (Model.mkid = Make.mkid) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-30T14:03:19.997

以下查询适用于 oracle 11g 。这是[小提琴链接](http://sqlfiddle.com/#!4/a519f/27/1)

```
SELECT name FROM (
  SELECT model.name AS name FROM car  , sale , model
    WHERE car.carid=sale.carid
      AND car.modid=model.modid 
    GROUP BY model.name
    ORDER BY count(*) DESC )
WHERE rownum = 1; 
```

或者

```
SELECT name FROM (
  SELECT model.name AS name FROM car  natural join sale natural join model    
    GROUP BY model.name
    ORDER BY count(*) DESC )
WHERE rownum = 1; 
```

**输出**

```
|    NAME |
-----------
| Corolla | 
```

# apache-pig - 从包中选择随机元组

> ID：14604311
> 
> 赞同：1
> 
> 时间：2013-01-30T12:43:08.580
> 
> 标签：apache-pig

是否可以（有效地）从猪的袋子中选择一个随机元组？我可以只取一个包的第一个结果（因为它是无序的），但就我而言，我需要一个适当的随机选择。一个（不是有效的）解决方案是计算包中元组的数量，在该范围内取一个随机数，循环遍历包，并在迭代次数与我的随机数匹配时停止。有谁知道更快/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T15:01:08.640

您可以在嵌套的 FOREACH 语句中使用 RANDOM()、ORDER 和 LIMIT 来选择具有最小随机数的元素：

```
inpt = load 'group.txt' as (id:int, c1:bytearray, c2:bytearray);
groups = group inpt by id;
randoms = foreach groups {
    rnds = foreach inpt generate *, RANDOM() as rnd; -- assign random number to each row in the bag
    ordered_rnds = order rnds by rnd;
    one_tuple = limit ordered_rnds 1; -- select tuple with the smallest random number
    generate group as id, one_tuple;
}; 
```

转储随机数；

**输入：**

```
1   a   r
1   a   t
1   b   r
1   b   4
1   e   4
1   h   4
1   k   t
2   k   k
2   j   j
3   a   r
3   e   l
3   j   l
4   a   r
4   b   t
4   b   g
4   h   b
4   j   d
5   h   k 
```

**输出：**

```
(1,{(1,b,r,0.05172709255901231)})
(2,{(2,k,k,0.14351660053632986)})
(3,{(3,e,l,0.0854104195792681)})
(4,{(4,h,b,8.906013598960483E-4)})
(5,{(5,h,k,0.6219490873384448)}) 
```

如果你运行“dump randoms;” 多次，您应该为每次运行获得不同的结果。

编写 UDF 可能会给您带来更好的性能，因为您不需要在包中随机进行二次排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T04:53:21.097

我需要自己做这个，并且令人惊讶地发现一个非常简单的答案似乎有效，可以获得大约 10% 的别名 A：

B = 通过 RANDOM() < 0.1 过滤 A

# c# - 如何在单独的 .cs 文件中编写代码，而不是与源代码一起编写

> ID：14604314
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:43:10.450
> 
> 标签：c#, asp.net, ajax

我是初学者。我正在尝试学习 ajax 选项卡控件。我有 3 个选项卡，每个选项卡都有几个文本框和一个提交按钮。问题是当我双击一个按钮时，它需要我到源代码（html）我想为按钮单击编写代码，即使是在 .cs 文件上。我怎么做？

```
 <form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1"   runat="server">
    </asp:ToolkitScriptManager>
         <b>Tabs Demonstration</b> <br /><br />
    <asp:TabContainer runat="server" ID="Tabs" Height="138px" ActiveTabIndex="0" 
        Width="402px">
        <asp:TabPanel runat="server" ID="Panel1" HeaderText="Address">
            <ContentTemplate>
                <asp:UpdatePanel ID="updatePanel1" runat="server">
                    <ContentTemplate>
                        <table>
                            <tr><td class="style1">First Name:</td><td class="style1"><asp:TextBox ID="txtName" runat="server" /></td></tr>
                            <tr><td>Address:</td><td><asp:TextBox ID="txtAddress" runat="server" /></td></tr>
                            <tr><td>
                                <asp:Button ID="Button1" runat="server" Text="Submit" /></td></tr>
                        </table>
                   </ContentTemplate>
                </asp:UpdatePanel>
            </ContentTemplate>
        </asp:TabPanel>

        <asp:TabPanel runat="server" ID="Panel3" HeaderText="Email" >
            <ContentTemplate>
                Email: <asp:TextBox ID="txtEmail" runat="server" />

            <asp:Button ID="Button2" runat="server" Text="Button" /></ContentTemplate>
        </asp:TabPanel>

        <asp:TabPanel runat="server" ID="Panel2" HeaderText="Login Details">
            <ContentTemplate>
             <table>
           <tr> <td>User Name:</td><td><asp:TextBox ID="txtUser" runat="server" /></td></tr>
           <tr> <td>Password:</td><td><asp:TextBox ID="txtPass" runat="server" /><asp:Button ID="Button3" runat="server"
                   Text="Button" /></td></tr>
            </ContentTemplate>
        </asp:TabPanel>

    </asp:TabContainer>

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:07:33.847

`.aspx`您可以通过添加**OnClick="Button1_Click"**手动对页面中的按钮执行此操作：

```
<asp:Button ID="Button1" runat="server" Text="Submit" OnClick="Button1_Click" /> 
```

然后在你的代码隐藏中（在Visual Studio 中`.aspx.cs`按下）写：`F7``.aspx`

```
protected void Button1_Click(object sender, EventArgs e)
{
} 
```

或为`.aspx.vb`

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click Button1_Click(sender, e)

'Some other codes

End Sub 
```

现在，当单击按钮时，`Button1_Click`将执行其中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:29:40.760

只需像这样创建按钮的**OnClick**事件。

```
<asp:Button ID="Button1" runat="server" Text="Submit" OnClick="Button1_Click" /> 
```

转到您的属性窗口（按 f4），转到事件并单击 OnClick 文本框，然后按自动输入您的 OnClick 事件添加到您的代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:13:49.430

您可能想尝试以下[提示：损坏时重新生成 aspx.designer.cs 文件](http://www.undermyhat.org/blog/2009/07/tip-regenerate-aspx-designer-cs-files-when-corrupted/)（也用于此[答案](https://stackoverflow.com/a/9595073/674700)）。

在您的情况下，请尝试以下操作：

1.  通过解决方案资源管理器找到损坏的`aspx.designer.cs`文件
2.  仅从项目中删除`designer.cs`文件
3.  右键单击您的主`.aspx`文件并选择*Convert to Web Application*。

检查问题是否已解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:41:01.100

您还可以绑定点击事件，即：

```
page_preinit(object sender,system.eventargs e)
{
   mybutton.onclikc += myhandler();
}

private void myhandler(object sender,system.eventargs e)
{
   // do code logic here :)
} 
```

# java - 如何在自定义标签中使用 doTag 方法添加 cookie？

> ID：14604316
> 
> 赞同：1
> 
> 时间：2013-01-30T12:43:12.510
> 
> 标签：java, jsp, jakarta-ee, servlets, jsp-tags

我用 Java 开发了一个自定义标签库，我在我的 Web 应用程序中使用它。

我不知道为什么，但我的 doTag() 根本没有设置 cookie。我已经清除了缓存并重新启动了计算机。这是代码：

```
public class UserVersionOfSite extends EvenSimplerTagSupport {

    private static final Log logger = LogFactory.getLog(UserVersionOfSite.class);
    private StringWriter sw = new StringWriter();

    @Override
    public void doTag() throws IOException, JspException {

                 getJspBody().invoke(sw);   //get the tag body and put it in StringWriter object

                //get request object to get cookie value
                PageContext ctx = (PageContext)getJspContext();
                HttpServletRequest httpServletRequest = (HttpServletRequest) ctx.getRequest();
                HttpServletResponse httpServletResponse = (HttpServletResponse) ctx.getResponse();

                    if(httpServletRequest.getParameterMap().containsKey("show_full_site"))  {

                        logger.debug("show_full_site ");

                                   if(!checkIfCookieExists(httpServletRequest)){

                                         Cookie cookie = new Cookie("SHOW_FULL_SITE",httpServletRequest.getParameter("show_full_site"));
                                         cookie.setMaxAge(86400);

                                         httpServletResponse.addCookie(cookie);

                                                //write the tag output
                                               if(!httpServletRequest.getParameter("show_full_site").equalsIgnoreCase("true")){
                                                   //write the response
                                                   getJspContext().getOut().println(sw.toString());
                                               }
                                    }else{

                                       String cookieValueString = getCookieValue(httpServletRequest.getCookies(),"SHOW_FULL_SITE","false");

                                       if(!cookieValueString.equalsIgnoreCase("true")){

                                           //write the response
                                           getJspContext().getOut().println(sw.toString());

                                       }

                                    }

                    }

    }

    @Override
    public String getResult() throws IOException {

                  return "User version of site";
    }

    public String getCookieValue(Cookie[] cookies,
                                        String cookieName,
                                        String defaultValue) {
        for(int i=0; i<cookies.length; i++) {
            Cookie cookie = cookies[i];
            if (cookieName.equals(cookie.getName()))
                return(cookie.getValue());
        }
        return(defaultValue);
    }

    public boolean checkIfCookieExists(HttpServletRequest httpServletRequest){

        logger.debug("inside checkIfCookieExists()");

        boolean cookiePresent = Arrays.asList(httpServletRequest.getCookies()).contains( "SHOW_FULL_SITE" );

        return cookiePresent;
    }
} 
```

即使我尝试在不使用 if else 语句的情况下添加代码，但仍然没有成功。有什么重要的我错过了吗？

有什么想法吗？？！！！我也检查了浏览器的设置，但没有任何东西阻止cookie的创建！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T22:16:05.590

我意识到这匹马在我发布这篇文章时可能已经跑了，但是为了其他人偶然发现它，我认为问题可能与`RequestDispatcher`这个问题中突出显示的特性有关：[无法添加包含在 JSP 中的 cookie通过jsp：包括](https://stackoverflow.com/questions/7532494/unable-to-add-a-cookie-included-in-jsp-via-jspinclude)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:07:43.400

您在 checkIfCookieExists() 方法中的以下行是错误的：

```
Arrays.asList(httpServletRequest.getCookies()).contains( "SHOW_FULL_SITE" ); 
```

HttpServletRequest.getCookies() 返回 Cookie[]。您将其包装在 List 中并在其中检查字符串“SHOW_FULL_SITE”。

回到你的问题 - 你怎么知道 cookie 没有在 HTTP 标头中设置？尝试使用诸如 firebug 之类的浏览器插件来查看来自服务器的 HTTP 响应标头。还要在将 cookie 添加到响应之前设置它的路径，例如

```
 Cookie cookie = new Cookie("SHOW_FULL_SITE",httpServletRequest.getParameter("show_full_site"));
 cookie.setMaxAge(86400); 
 cookie.setPath("/"); 
```

# sql-server-2008 - 不匹配现有的主键或 UNIQUE 约束

> ID：14604317
> 
> 赞同：2
> 
> 时间：2013-01-30T12:43:12.620
> 
> 标签：sql-server-2008

例如，我有两个表 - 个人和电子邮件

表 - 个人列
Indv_ID (PK)
Email_ID

表格电子邮件列
Email_ID (PK)
Email_Type (PK)
Email_Address

这个想法是同一个人可以有多个电子邮件。因此，如果 Joe 有两封电子邮件，并且 joes ID 为 100。

```
**TABLE - INDIVIDUALS**
Indv_ID           Email_ID
100               200

**TABLE - EMAILS**
Email_ID        Email_Type      Email_Address
200             PERSONNEL       joe.john@yahoo.com
200             WORK            joe.john@abc.com 
```

现在，我正在尝试定义这种关系。基本上，在 INDIVIDUAL 中的 EMAIL_ID 列和 EMAILS 中的 EMAIL_ID 和 EMAIL_TYPE 之间。

当我尝试定义外键关系时，出现以下错误。

“表 INDIVIDUALS 中的列与现有主键或唯一约束不匹配”

请让我知道如何处理并定义这种类型的关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:54:13.420

为了实现您的目标，最好的设计是：

表 - 个人列

```
Indv_ID (PK)

```

表格电子邮件列

```
Email_ID (PK)
Email_Type (PK)
Indv_ID (PK)
电子邮件地址

```

所以：

```
**表 - 个人**
Indv_ID           
100               

**表格 - 电子邮件**
Email_ID Email_Type INDV_ID Email_Address
300 人 100 joe.john@yahoo.com
400 工作 100 joe.john@abc.com    

```

结论：

每个人都有许多电子邮件。您可以根据业务需要更改电子邮件表的主键。但这就是想法。

另一个提示：

考虑为整数类型或字符值枚举您的 Email_Type 列。

# eclipse - Eclipse IDE 中的 Struts2-Maven

> ID：14604318
> 
> 赞同：5
> 
> 时间：2013-01-30T12:43:19.357
> 
> 标签：eclipse, maven, struts2, maven-2, maven-3

我已将此[Struts2-maven](http://code.google.com/p/struts2-examples/downloads/detail?name=Form_Tags_Struts_2_Mvn_2_3_1_2.zip&can=2&q=maven)项目导入到我的 Eclipse 中。

这是我`pom.xml`的 Struts2

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>manning</groupId>
<artifactId>Form_Tags_Struts2_Mvn</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>Form_Tags_Struts2_Mvn</name>
<build>
    <finalName>Form_Tags_Struts2_Mvn</finalName>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>com.sun</groupId>
        <artifactId>tools</artifactId>
        <version>1.7.0_05</version>
        <scope>system</scope>
        <systemPath>/usr/lib/jvm/jdk1.7.0_05/lib/tools.jar</systemPath>
    </dependency>
    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-core</artifactId>
        <version>2.3.1.2</version>
    </dependency>
        </dependencies>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

但是当我尝试运行它时显示异常。这是我的例外：

> 严重：异常开始过滤器 struts2 java.lang.ClassNotFoundException：org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714) at org.apache.catalina .loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559) at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532) at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514 ) 在 org.apache.catalina.core.ApplicationFilterConfig 的 org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:256) 的 org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)。 setFilterDef(ApplicationFilterConfig.java:382) 在 org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650) 在 org.apache.catalina.core.StandardContext 的 org.apache.catalina.core.ApplicationFilterConfig.(ApplicationFilterConfig.java:103)。 startInternal(StandardContext.java:5306) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559) at org .apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549) 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) 在 java.util.concurrent.FutureTask.run(FutureTask .java:166) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)

谁能帮帮我吗？实际上会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:57:35.810

尝试检查项目的部署依赖项（属性 > 部署程序集）并检查是否包含 Maven 依赖项。如果您尝试使用 Add > Java Build path entries 添加它们，然后选择您的 Maven 事物。

希望有帮助:)

# php - php setlocale 在 cli 模式下工作，但在 web 模式下不工作

> ID：14604322
> 
> 赞同：1
> 
> 时间：2013-01-30T12:43:26.877
> 
> 标签：php, setlocale

```
<?php
    echo(setlocale(LC_ALL, "en_US"));
?> 
```

上面的代码在cli模式下输出en_US，但在web模式下与apache2在同一台服务器下输出为false。为什么该方法在cli模式下正常工作，但在web模式下不行？

# php - cronjob 不会每分钟都运行的原因

> ID：14604324
> 
> 赞同：0
> 
> 时间：2013-01-30T12:43:31.277
> 
> 标签：php, codeigniter, cron, crontab

我已经查看了 cronjobs 上的许多 SO 线程，但无法弄清楚为什么我的简单 cronjob 只运行一次并且每分钟都不会重复。

这是我的 cronjob 设置：

```
html$ crontab -e //directory where my web application resides   
*/1 * * * * php index.php cronjob everyMinute  //command inside crontab  
html$ php index.php cronjob everyMinute  //run script 
```

这是我的 PHP 脚本（我的 Web 应用程序使用 Codeigniter 框架，但这似乎不相关）：

```
function everyMinute(){
    if($this->input->is_cli_request()){
        $count="i can count everyMinute".time();
        echo " {$count}!".PHP_EOL;                              
        file_put_contents("test.txt","Counted $count\n", FILE_APPEND);
    }       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:39:26.450

（来自我们的评论）

确保放置文件的完整路径。crontab 确实需要绝对引用。

# scala - Play-Scala：如何在动作中使用方法重载？

> ID：14604326
> 
> 赞同：2
> 
> 时间：2013-01-30T12:43:36.207
> 
> 标签：scala, playframework, playframework-2.0

我想用不同的 Input 进行拖曳操作，并使一个能够调用另一个：

```
def showQuestion(questionId :Long)=Action{
     Redirect(routes.Application.showQuestion(Question.find.byId(questionId)))
 }
 def showQuestion(question :Question)=Action{
    Ok(views.html.show(question))
 } 
```

我尝试了上述但没有运气。编译器抱怨：

```
found   : models.Question
[error]  required: Long
[error]      Redirect(routes.Application.showQuestion(Question.find.byId(questionId))) 
```

指第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:24:55.453

我认为你错过了一些东西。

在您的`routes`文件中，您无法将 URL 映射到第二个操作：

```
GET /question/:id    controllers.Question.showQuestion(id: Long)
GET /question/:question    controllers.Question.showQuestion(question: Question) // <== how to map the "question" in the Url ??? 
```

那么为什么不这样做（在这种情况下，使用两种方法并不真正相关）：

```
def showQuestion(questionId: Long)=Action{
     showQuestion(Question.find.byId(questionId))
}

private def showQuestion(question: Question)=Action{
    Ok(views.html.show(question))
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:12:34.057

这不是一个直接的答案，但是有一些值得思考的地方：

1.  路由器的主要任务是从请求到函数参数的参数*转换*和*类型验证*，因此最好使用一些常见的类型，例如`String`,`Int`等`Bool`来识别 DB 中的对象，而不是尝试通过路由器传递整个对象。实际上，您的第一条路线可以正确地做到这一点。
2.  我找不到任何充分的理由使用两个单独的操作来查找对象和渲染模板（在其他操作中找到对象）。更重要的是，你正试图通过 来做到这一点`Redirect`，所以它创建了**两个**请求，这是多余的！您应该只删除第二条路线并使用一项操作：

    ```
    GET /question/:id    controllers.Question.showQuestion(id: Long)

    def showQuestion(questionId: Long)=Action{
       Ok(views.html.show(Question.find.byId(questionId)))
    } 
    ```

3.  如果您真的非常想将其拆分为两个单独的功能，请使用**@nico_ekito**的示例，我认为您也可以在这种情况下删除第二条路线。

4.  如果将来您想要重载函数...最好不要这样做:) 重载很好，当您在许多地方都有可使用的静态方法并且它可能因参数数量等而有所不同时。很可能它会是使用不同的动作名称更舒服（即使路线相似）：

    ```
    GET  /question/:id     controllers.Question.showById(id: Long)
    GET  /question/:name   controllers.Question.showByName(name: String)

    // so finally in the view you can use it just as:
    <a href='@routes.Question.showById(item.id)' ...
    <a href='@routes.Question.showByName(item.name)' ... 
    ```

# php - Yii CGridView 为标题单元格添加类或样式

> ID：14604333
> 
> 赞同：10
> 
> 时间：2013-01-30T12:43:52.190
> 
> 标签：php, yii

我想为特定列中的标题单元格设置一些样式或 css 类。

这仅更改列中数据单元格的 css。

```
 'columns'=>array(
            array(
                'name'=>'id',
                'header'=>'#',
                'htmlOptions'=>array('style'=>'width: 50px; text-align: center;', 'class'=>'zzz'),
            ), 
```

如何在此列的标题单元格中设置 css 或样式？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-30T12:47:07.710

使用[`headerHtmlOptions`](http://www.yiiframework.com/doc/api/1.1/CGridColumn#headerHtmlOptions-detail).

```
'columns'=>array(
        array(
            'name'=>'id',
            'header'=>'#',
            'htmlOptions'=>array('style'=>'width: 50px; text-align: center;', 'class'=>'zzz'),
            'headerHtmlOptions'=>array(...),
        ), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T09:49:09.470

filterHtmlOptions

如果您想设置用户在过滤器框中输入的内容的样式 - 例如“text-align : right” - 那么

```
'filterHtmlOptions'=>array('style'=>'text-align: right'), 
```

不会起作用，因为它只会设置外部表格单元格（td）的样式，而不是内部过滤器容器（div）或输入元素：

```
<td style="text-align: right;">
    <div class="filter-container">
        <input>
    </div>
</td> 
```

您可以做的是向外部表格单元格添加一个类：

```
'filterHtmlOptions'=>array('class'=>'filterBoxRight'), 
```

这将导致：

```
<td class="filterBoxRight">
    <div class="filter-container">
        <input>
    </div>
</td> 
```

然后运行以下代码：

```
$(document).on('ready', function(){
    $('.filterBoxRight').find('.filter-container').find(':input').css({
        'text-align': 'right',
    });
}); 
```

# google-apps-script - 如何避免 Google 电子表格中的“exec maxSimultaneous”限制？

> ID：14604334
> 
> 赞同：3
> 
> 时间：2013-01-30T12:43:55.497
> 
> 标签：google-apps-script, google-sheets

我正在使用 Google 电子表格进行税务管理。我一年内完成的所有财务交易都在电子表格中。由于我所在国家/地区的税收规则非常复杂，因此我开发了许多 JavaScript 函数来帮助我进行计算。我的电子表格中有很多行，大约 1000 行。每一行都有对这些 JavaScript 函数的多个引用。

该系统以前运行良好，但今天我发现 Google 在 Google 电子表格中安装了某种运行时限制系统，导致我的许多列中止并出现以下错误：

```
Service invoked too many times in a short time: exec maxSimultaneous.
Try Utilities.sleep(1000) between calls. 
```

经过一番调查，似乎这个时间限制是为了防止脚本运行时间过长。我的情况不同：我的脚本都很短，O(1) 算法除了计算一些数字什么都不做。一个典型的脚本如下所示：

```
// Calculates the total amount excluding Value Added Tax, given
// an amount including Value Added Tax, and other sorts of information.
function ex_btw(inc_btw, commentaar, soort, btw_verlegd, btw_pct) {
  Utilities.sleep(1000);
  var soort = soort.toLowerCase();
  if (soort == 'eten en drinken'
   || commentaar.match(/treinkaartje/i)
   || commentaar.match(/treinticket/i)
   || commentaar.match(/taxi/i)
   || commentaar.match(/ boek /i))
  {
    return inc_btw / 1.06;
  } else if (soort == 'priveonttrekking'
   || soort == 'boete'
   || soort == 'belasting'
   || commentaar.match(/postzegel/i)
   || btw_verlegd == 'Ja')
  {
    return inc_btw;
  } else {
    return inc_btw / (1 + btw_pct);
  }
} 
```

然后从单元格中调用该脚本，如下所示：

```
=IF(B6<>""; ex_btw(B6;D6;E6;J6;S6); "") 
```

也许我的问题是我有*太多的脚本调用*。每一行调用大约 6 个这样的脚本，因此对于 1000 行，每个电子表格我调用 6000 次。

我该如何解决这个问题？有没有办法增加执行限制，或者有没有办法让脚本运行得更慢，这样它们就不会达到执行限制？正如您在示例代码中看到的那样，我已经尝试过 inserting `Utilities.sleep(1000)`，但这似乎并不能解决问题。我不在乎脚本是否运行缓慢，我只在乎它们完成时没有错误。

我可以付款以提高限额吗？几天后我需要交税。

我考虑过的其他替代方案，但这是不可行的。

*   使用非 JavaScript 函数。不可行，因为：他们不支持像 Google 电子表格那样的协作。我经常和同事一起检查电子表格，检查我们是否犯了任何错误。这有助于我们双方立即看到对方所做的任何更改。
*   拥有一个可遍历行并填充单元格的庞大 JavaScript 函数。不可行，因为：

    1.  太容易出错了，和我现在的方法相比很容易出错。
    2.  在我重新运行脚本之前不会自动更新单元格。我想在更新其他单元格后立即查看任何计算，就像电子表格应该做的那样。
*   使用 Excel 和 OpenOffice Calc 等其他电子表格。不可行，因为：它们似乎没有提供相同的脚本功能。
*   编写我自己的融资应用程序。不可行，因为：需要太多，这不是我的核心业务，而且税收规则几乎每年都在变化，所以我必须不断更新应用程序。我可以非常快速地更新电子表格，但编写融资应用程序需要太多时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T17:08:48.997

我通过让每个函数随机休眠来解决它，如下所示：

```
Utilities.sleep(Math.random() * 5000); 
```

重要的是睡眠时间是*随机*的，而不是恒定的。显然，谷歌限制了可能同时使用 CPU 的函数的最大数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:13:24.340

自定义函数的替代方法可能是使用 onEdit 函数触发器，然后仅处理输入的数据或整列数字，并将函数的结果作为数字放在目标单元格中​​。

可能会更快

# regex - 使用变量在 R 中创建正则表达式模式

> ID：14604339
> 
> 赞同：1
> 
> 时间：2013-01-30T12:44:08.047
> 
> 标签：regex, r, pattern-matching

我有一个功能：

```
ncount <- function(num = NULL) {

 toRead <- readLines("abc.txt")
 n <- as.character(num)
 x <- grep("{"n"} number",toRead,value=TRUE)

} 
```

在 grep-ing 时，我希望函数中传递的 num 动态创建要搜索的模式？如何在 R 中做到这一点？文本文件的每一行都有数字和文本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:47:20.213

您可以`paste`用来连接字符串：

```
grep(paste("{", n, "} number", sep = ""),homicides,value=TRUE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-01T08:35:54.947

为了从 R 中的变量构建正则表达式，在当前场景中，您可以使用以下方法简单地*将字符串*文字与变量连接**`paste0`**：

```
grep(paste0('\\{', n, '} number'), homicides, value=TRUE) 
```

请注意，它`{`是括号表达式之外的特殊字符`[...]`（也称为*字符类*），如果您需要查找文字`{`字符，则应将其转义。

如果您使用项目列表作为*替代列表*，您可以使用**/的****组合`paste``paste0`**：

```
words <- c('bananas', 'mangoes', 'plums')
regex <- paste0('Ben likes (', paste(words, collapse='|'), ')\\.') 
```

生成的`Ben likes (bananas|mangoes|plums)\.`正则表达式将匹配`Ben likes bananas.`,`Ben likes mangoes.`或`Ben likes plums.`. 请参阅[R 演示](https://ideone.com/WA14wG)和[正则表达式演示](https://regex101.com/r/0MMkOn/1)。

**注意**：PCRE（当您传递`perl=TRUE`给基本 R 正则表达式函数时）或 ICU（*stringr* / *stringi*正则表达式函数）已证明可以更好地处理这些场景，建议使用这些引擎而不是基本 R 正则表达式函数中使用的默认 TRE 正则表达式库.

通常，您会希望构建一个包含应完全匹配的单词列表的模式，作为整个单词。在这里，很大程度上取决于边界的类型以及单词是否可以包含特殊的正则表达式元字符，它们是否可以包含空格。

在最一般的情况下，[单词边界 ( `\b`)](https://www.regular-expressions.info/wordboundaries.html)效果很好。

```
regex <- paste0('\\b(', paste(words, collapse='|'), ')\\b')
unlist(regmatches(examples, gregexpr(regex, examples, perl=TRUE)))
## => [1] "bananas" "mangoes" "plums" 
```

该`\b(bananas|mangoes|plums)\b`模式将匹配`bananas`，但[不会匹配](https://regex101.com/r/0MMkOn/3) `banana`（请参阅[R 演示](https://ideone.com/sHuuhP)）。

如果你的清单像

```
words <- c('cm+km', 'uname\\vname') 
```

您必须先转义单词，即`\`在每个元字符之前附加：

```
regex.escape <- function(string) {
  gsub("([][{}()+*^$|\\\\?.])", "\\\\\\1", string)
}
examples <- c('Text: cm+km, and some uname\\vname?')
words <- c('cm+km', 'uname\\vname')
regex <- paste0('\\b(', paste(regex.escape(words), collapse='|'), ')\\b')
cat( unlist(regmatches(examples, gregexpr(regex, examples, perl=TRUE))) )
## => cm+km uname\vname 
```

如果您的单词可以以特殊的正则表达式元字符开头或结尾，则`\b`单词边界将不起作用。采用

*   *明确的单词边界*，`(?<!\w)`/ `(?!\w)`，当非单词字符或字符串的开始/结束之间预期匹配时
*   *空白边界*, `(?<!\S)`/ `(?!\S)`，当匹配应包含空白字符或字符串的开始/结束时
*   [使用lookbehind/lookahead](https://www.regular-expressions.info/lookaround.html)组合和您的自定义字符类/括号表达式构建您自己的，甚至更复杂的模式。

[R 中前两种方法的](https://ideone.com/T8KT4F)示例（替换为用`<<`and括起来的匹配项`>>`）：

```
regex.escape <- function(string) {
  gsub("([][{}()+*^$|\\\\?.])", "\\\\\\1", string)
}
examples <- 'Text: cm+km, +km and C++,Delphi,C++CLI and C++/CLI.'
words <- c('+km', 'C++')
# Unambiguous word boundaries
regex <- paste0('(?<!\\w)(', paste(regex.escape(words), collapse='|'), ')(?!\\w)')
gsub(regex, "<<\\1>>", examples, perl=TRUE)
# => [1] "Text: cm+km, <<+km>> and <<C++>>,Delphi,C++CLI and <<C++>>/CLI."
# Whitespace boundaries
regex <- paste0('(?<!\\S)(', paste(regex.escape(words), collapse='|'), ')(?!\\S)')
gsub(regex, "<<\\1>>", examples, perl=TRUE)
# => [1] "Text: cm+km, <<+km>> and C++,Delphi,C++CLI and C++/CLI." 
```

# javascript - 3D可点击饼图？

> ID：14604341
> 
> 赞同：1
> 
> 时间：2013-01-30T12:44:13.550
> 
> 标签：javascript, jquery, charts

有人可以推荐我一些 JS/jQuery 图表库，我可以用它制作 3D 可点击饼图吗？例如：我在页面上有两个图表。如果我在第一个图表中单击名为“动物”的切片，第二个图表将显示有关动物的更多详细信息...我现在正在使用 Open Flash Chart，但是没有 3D 饼图，当用户不这样做时会出现问题也没有Flash。这就是为什么我想要 JS/jQuery 解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:49:49.080

如果您希望饼图是实际的 3d，我认为没有简单的解决方案。如果你真的需要它是 3d 我会研究 Three.js 但它有点复杂，特别是如果你希望图表是可点击的。

[http://mrdoob.github.com/three.js/](http://mrdoob.github.com/three.js/)

否则那里有很多图形生成器。我自己编写了一个使用普通 html 元素（饼图除外：/），因此您可以轻松地将鼠标事件附加到它们。

[http://www.zhereicome.com/experiments/statics/statisquares/](http://www.zhereicome.com/experiments/statics/statisquares/)

# batch-file - 创建一个每天运行 4 次的批处理文件并从不同的文件夹执行 14 个批处理文件？

> ID：14604343
> 
> 赞同：-1
> 
> 时间：2013-01-30T12:44:20.777
> 
> 标签：batch-file

如何创建一个每天运行 4 次的批处理文件并从不同的文件夹执行 14 个批处理文件？谁的日志根据批处理文件格式被定向到这 14 个文件夹本身，并将日志从这 14 个文件夹移动到一个公共位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:48:37.197

为您指明正确的方向：

*   用于`start`启动 14 个批处理文件中的每一个
*   使用任务调度程序（`schtasks`来自 cmd）每天安排 4 次
*   用于`>`重定向标准输出以进行日志记录
*   用于`copy`将日志复制到公共位置

# python - genfromtxt 和 numpy

> ID：14604344
> 
> 赞同：0
> 
> 时间：2013-01-30T12:44:28.403
> 
> 标签：python, numpy, genfromtxt

我在“file.csv”等文件中有数据。我想用 np.genfromtxt 阅读它们，并在某些列上做一些统计数据，如平均值、方差等`(X, Y, Z)`。但是我想对 for`X > 1, Y > 3 Z > 2`等进行统计。这是一个简单的例子。

此代码产生几乎正确的结果，但它包括所有 Xs、Ys 和 Zs，我想做同样的事情，但使用上面指定的 X、Y、Z 条件。

```
#file.csv
X,Y,Z
1,2,3
4,2,5
15,9,1
#

data = np.genfromtxt(file.csv, delimiter=',', dtype=float, unpack=True, skiprows = 0) 
X=data[0];Y=data[1];Z=data[2]
Mean = np.average(X) 
```

--> 在平均水平上做得很好。但是，我希望我只有在 X > 1 时才能获得平均值（例如）......我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:51:25.173

为了仅对某些字段进行平均，您将平均分解如下：

1.  查找满足特定条件的那些元素的索引（ind）
2.  查找仅使用 ind 中的值索引的数组的平均值

以下代码正是这样做的：

```
indexes = np.where(X>1)[0] # We index with '0' here to get to the 1st element of the returned tuple
Mean = np.mean(X[indexes]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:52:58.233

您可以使用所谓的“花式索引”`X[X>1]`来选择您想要的数组部分：

```
import numpy as np
X,Y,Z = np.genfromtxt('file.csv', delimiter=',', dtype=float, unpack=True, skiprows = 0)
print(X)
# [ nan   1\.   4\.  15.]
print(X[X>1])
# [  4\.  15.]
print(np.average(X[X>1]))
# 9.5 
```

要将两个掩码（布尔数组）与按位逻辑与组合，请使用`&`运算符：

```
print(np.average(X[(X>1)&(X<10)]))
# 4.0 
```

# android - 从应用程序发送电子邮件时出现 ActivityNotFoundException

> ID：14604349
> 
> 赞同：13
> 
> 时间：2013-01-30T12:44:48.997
> 
> 标签：android, email, android-intent, android-emulator

我编写了一个代码，允许用户*通过电子邮件*向供应商 [ShopOwner] 发送订单以及他们的个人和购物车商品详细信息，但在这里我得到一个

**错误：不幸的是应用程序已停止**

*日志猫：*

```
01-30 17:56:14.605: E/AndroidRuntime(951): FATAL EXCEPTION: main
01-30 17:56:14.605: E/AndroidRuntime(951): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.SEND typ=text/html flg=0x1 (has clip) (has extras) }
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1622)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.app.Activity.startActivityForResult(Activity.java:3370)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.app.Activity.startActivityForResult(Activity.java:3331)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.app.Activity.startActivity(Activity.java:3566)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.app.Activity.startActivity(Activity.java:3534)
01-30 17:56:14.605: E/AndroidRuntime(951):  at com.version.bajrang.january.menu.ArrowsActivity$1.onClick(ArrowsActivity.java:105)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.view.View.performClick(View.java:4202)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.view.View$PerformClick.run(View.java:17340)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.os.Handler.handleCallback(Handler.java:725)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.os.Looper.loop(Looper.java:137)
01-30 17:56:14.605: E/AndroidRuntime(951):  at android.app.ActivityThread.main(ActivityThread.java:5039)
01-30 17:56:14.605: E/AndroidRuntime(951):  at java.lang.reflect.Method.invokeNative(Native Method)
01-30 17:56:14.605: E/AndroidRuntime(951):  at java.lang.reflect.Method.invoke(Method.java:511)
01-30 17:56:14.605: E/AndroidRuntime(951):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-30 17:56:14.605: E/AndroidRuntime(951):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-30 17:56:14.605: E/AndroidRuntime(951):  at dalvik.system.NativeStart.main(Native Method) 
```

*代码：*

```
Intent messageIntent = new Intent(android.content.Intent.ACTION_SEND);
String aEmailList[] = { "rakesh@rocketmail.com" };   
messageIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);
messageIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
messageIntent.setType("text/html");
messageIntent.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(body.toString()));
startActivity(messageIntent); 
```

最后在 SahilMahajanMj 的帮助下，我使用了这段代码，几乎没有改变：

```
 Intent i = new Intent(Intent.ACTION_SEND);
 i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"rakesh@rocketmail.com"});
 i.putExtra(Intent.EXTRA_SUBJECT, subject);
 i.setType("message/rfc822");
 i.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(body.toString()));

try {
    startActivity(Intent.createChooser(i, "Send email via :"));
    Toast.makeText(ArrowsActivity.this, "Email Sent.", Toast.LENGTH_SHORT).show();
} catch (android.content.ActivityNotFoundException ex) {
    Toast.makeText(ArrowsActivity.this, "There are no email applications installed.", Toast.LENGTH_SHORT).show();
} 
```

在*ViewCartActivity.java 中*

```
public void onClick(View v) {
    // TODO Auto-generated method stub

        Intent mViewCartIntent = new Intent(ViewCartActivity.this, com.version.bajrang.january.menu.ArrowsActivity.class);
        mViewCartIntent.putExtra("name", myTextVeiwGrandTotal.getText().toString());
        startActivity(mViewCartIntent);

            }
        }); 
```

在*ArrowsActivity.java 中：*

```
TextView txtName = (TextView) findViewById(R.id.total);
Intent i = getIntent();
String name = i.getStringExtra("name");
txtName.setText(name); 
```

我正在使用上面的代码来获取购物车中的产品总数，并且我也可以获取并显示，但是这里购物车中的商品总数我也想在购物车选项卡上显示，例如：

[https://play.google.com/store/apps/details?id=com.queppelin.tastykhana](https://play.google.com/store/apps/details?id=com.queppelin.tastykhana)

他们用红色显示了2...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-30T12:49:56.833

错误信息显示：

> ActivityNotFoundException：未找到处理 Intent 的 Activity { act=android.intent.action.SEND typ=text/html flg=0x1（有剪辑）（有额外内容）}

这意味着 android 系统没有找到任何电子邮件发送活动来处理您创建的意图。确保您的设备中安装了电子邮件应用程序。

还可以使用以下代码发送电子邮件，

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("message/rfc822");
i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"recipient@example.com"});
i.putExtra(Intent.EXTRA_SUBJECT, "subject of email");
i.putExtra(Intent.EXTRA_TEXT   , "body of email");
try {
    startActivity(Intent.createChooser(i, "Send mail"));
} catch (android.content.ActivityNotFoundException ex) {
    Toast.makeText(MyActivity.this, "There are no email applications installed.", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-31T06:54:07.833

Rakesh 很抱歉回复晚了，因为上午 10 点我试图解决你的问题，我已经尝试了几次，最后下面的代码已经工作了：

我知道你得到了答案，但我已经花了很多时间来满足我的要求，我把我的答案放在这里，兄弟我不需要积分，因为@SahilMahajanMj 应该得到这个：

```
 Intent i = new Intent(Intent.ACTION_SEND);
        i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"rakesh@rocketmail.com"});
        i.putExtra(Intent.EXTRA_SUBJECT, subject);
        i.setType("message/rfc822");
        i.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(body.toString()));

        try {
            startActivity(Intent.createChooser(i, "Send email via :"));
            } catch (android.content.ActivityNotFoundException ex) {
            Toast.makeText(ArrowsActivity.this, "There are no email applications installed.", Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T06:18:39.140

似乎与`android.content`您一起传递的问题`putExtras`。

试试下面的方法：

```
public Intent sendMail1() {
        Intent messageIntent = new Intent(Intent.ACTION_SEND);

        String aEmailList[] = { "rakesh@rocketmail.com" };
        messageIntent.putExtra(Intent.EXTRA_EMAIL, aEmailList);

        messageIntent.putExtra(Intent.EXTRA_SUBJECT, subject);

        messageIntent.setType("text/html");
        messageIntent.putExtra(Intent.EXTRA_TEXT,
                Html.fromHtml(body.toString()));

        return messageIntent;
    } 
```

激发您的意图，例如：

```
startActivity(Intent.createChooser(sendMail1(), "send mail")); 
```

# llvm - 预期的顶级实体

> ID：14604357
> 
> 赞同：6
> 
> 时间：2013-01-30T12:45:11.650
> 
> 标签：llvm

在框架中执行时，您是如何设法通过`expected top-level entity`错误的？`lli``llvm`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:38:18.883

此错误通常意味着您复制粘贴了一些不属于顶级实体的 IR 代码的一部分。换句话说，它不是函数，不是类型，不是全局变量等。同样的错误在 C 中也可能发生，只是为了比较：

```
x = 8; 
```

不是 C 文件的有效内容，因为赋值语句不是有效的顶级实体。为了使它有效，你把它放在一个函数中：

```
void foo() {
  x = 8;   /* assuming x is global and visible here */
} 
```

LLVM IR 中也会发生同样的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-18T20:27:50.707

**我的问题：** .ll 文件格式是“UTF-8 with BOM”而不是“UTF-8 without BOM”。

**修复：**使用notepad++，在编码菜单中，选择“UTF-8 without BOM”，然后保存。

**快速设置：（**适用于 windows 上的 llvm 3.4.0 .ll 文件）

[来自https://notepad-plus-plus.org/](https://notepad-plus-plus.org/)的高级文本编辑器

[来自https://github.com/CRogers/LLVM-Windows-Binaries](https://github.com/CRogers/LLVM-Windows-Binaries)的 llvm 二进制文件

hello.ll 为“UTF-8 without BOM”（此代码采用 llvm 3.4.0 格式）：

```
@msg = internal constant [13 x i8] c"Hello World!\00"
declare i32 @puts(i8*)
define i32 @main() {
    call i32 @puts(i8* getelementptr inbounds ([13 x i8]* @msg, i32 0, i32 0))
    ret i32 0
} 
```

在命令提示符下：

```
lli hello.ll 
```

**快速设置：（**适用于 windows 上的 llvm 3.8.0 .ll 文件）

[来自https://notepad-plus-plus.org/](https://notepad-plus-plus.org/)的高级文本编辑器

clang 二进制文件来自： http: [//llvm.org/releases/download.html#3.8.0](http://llvm.org/releases/download.html#3.8.0)

hello.ll 为“UTF-8 without BOM”（此代码采用 llvm 3.8.0 格式）：

```
@msg = internal constant [13 x i8] c"Hello World!\00"
declare i32 @puts(i8*)
define i32 @main() {
    call i32 @puts(i8* getelementptr inbounds ([13 x i8], [13 x i8]* @msg, i32 0, i32 0))
    ret i32 0
} 
```

在命令提示符下：

```
clang hello.ll -o hello.exe
hello.exe 
```

关于 char16_t、u16String 等的错误意味着 clang 需要：-fms-compatibility-version=19

# c# - 同一页面上的 404 和 200 状态

> ID：14604365
> 
> 赞同：0
> 
> 时间：2013-01-30T12:45:45.463
> 
> 标签：c#

如果我“拨弄”我的网站，我会看到我的一些页面呈现 404 错误状态，然后直接呈现 200 状态。该页面正确加载，而不会显示“找不到页面”页面。

提琴手结果集的示例。

**结果 协议 URL
404 HTTP Test/Admin/undefined
200 HTTP Test/Admin/Testpage.aspx**

谁能告诉我为什么会这样？？这也不总是发生。在第一次加载页面时，状态为 200。但如果我单击按钮或再次重定向到页面，那么我将得到上面的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:58:05.753

很可能您的 javascript 代码中存在错误的期望。您是否将 url 与在 javascript 中计算的一些值连接起来？如果该值不可用，则可能会导致此类损坏的 url。

# c++ - 控制台内容

> ID：14604366
> 
> 赞同：3
> 
> 时间：2013-01-30T12:46:07.783
> 
> 标签：c++, winapi

我想获取控制台窗口的内容。我得到了以下代码，但它不起作用，,.. 谁能告诉我如何获取控制台内容（字符）？？？？？？

```
 DWORD nLength=2;
    HWND hWnd = FindWindow("ConsoleWindowClass",NULL);
    LPTSTR lpCharacter=" ";
    COORD dwReadCoord;
    dwReadCoord.X=11;
    dwReadCoord.Y=11;
    LPDWORD lpNumberOfCharsRead=0;
    bool a= ReadConsoleOutputCharacter(hWnd,lpCharacter,nLength,dwReadCoord,lpNumberOfCharsRead); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-05T00:00:12.167

这是一种方法。`GetNumCharsInConsoleBuffer`是获取控制台缓冲区中的字符数。使用该值创建一个动态分配的数组。最后`ReadConsoleBuffer`将用控制台缓冲区的内容填充您的缓冲区。

```
#include <cstdio>
#include <cstdlib>
#include <Windows.h>

DWORD GetNumCharsInConsoleBuffer()
{
    CONSOLE_SCREEN_BUFFER_INFO buffer_info;
    GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE), &buffer_info);
    return (DWORD)((buffer_info.dwSize.X * ( buffer_info.dwCursorPosition.Y + 1)) - (buffer_info.dwSize.X - (buffer_info.dwCursorPosition.X  + 1)));
}

DWORD ReadConsoleBuffer(char* buffer, DWORD bufsize)
{
    DWORD num_character_read = 0;
    COORD first_char_to_read = {0};  
    ReadConsoleOutputCharacterA(GetStdHandle(STD_OUTPUT_HANDLE), buffer, bufsize, first_char_to_read, &num_character_read);
    buffer[bufsize-1] = '\0';

    return num_character_read;
}

int main(int argc, char** argv)
{
    fprintf(stdout, "Writting\nin\nthe\nbuffer\n");

    DWORD bufsize = GetNumCharsInConsoleBuffer();   
    char* buffer = new char[bufsize];
    memset(buffer, 0, bufsize);

    ReadConsoleBuffer(buffer, bufsize);    
    puts("\nBuffer contents:");
    puts(buffer);

    delete[] buffer;
    system("pause"); 
    return 0;

} 
```

输出：

```
Writting
in
the
buffer
Buffer contents:
Writting
in
the
buffer

Appuyez sur une touche pour continuer... 
```

# javascript - Highcharts，多部分图表

> ID：14604370
> 
> 赞同：0
> 
> 时间：2013-01-30T12:46:25.660
> 
> 标签：javascript, charts, highcharts

做类似事情的最佳方法是什么？![在此处输入图像描述](../Images/5abe09ee3617b80f4e3a7010d37daf5c.png)

我想我需要做 2 个图表，或者我可以在同一个图表中做吗？我不知道如何分开这两个部分。标签翻译为“迟到”和“下一个”。这是2个不同的系列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:44:09.970

一种方法是让您的“红色”系列使用负值，而您的“蓝色”系列使用正值。要使 xAxis 上的标签为正，您可以使 xAxis 标签`formatter`使用 的绝对值`this.value`。

# c++ - Visual Studio C++：库中未定义的标识符

> ID：14604373
> 
> 赞同：0
> 
> 时间：2013-01-30T12:46:33.927
> 
> 标签：c++, visual-studio-2010

我正在重组一个严重依赖外部库 ChronoEngine.lib 的以前的程序我创建了一个新项目，其中包含与前一个相同的附加包含目录、链接器等...

我在头文件中有以下代码

```
#ifndef DRAW
#define DRAW
#include "physics/CHsystem.h"

class draw
{
public:
   // Change size
   static void changeSize(int w, int h);

   // World definition
   static void drawSky(double halfSize, double red, double green, double blue);
   static void drawChair() ;
   static void drawCDG() ;
   static void drawPlane();

   // Geometrical definition
   static void drawSphere(ChBody* body);
   static void drawBox(ChBody* body);
};
#endif 
```

这是与上一个项目中相同的头文件，但这里 Visual Studio 没有找到 ChBody 的定义（包含在“physics/CHsystem.h”头文件定义中 - 此文件包含physics/ChBody.h -）当我右键单击 ChBody 查找引用时，Visual Studio 找到 5 个引用（1 个是真正的定义（来自 ChBody.h），另外 4 个是库中其他文件中的前向引用）

我怎样才能告诉我的程序找到类的真正定义？显然不是链接库的问题，更像是引用的问题

我的 main.cpp 暂时只是在屏幕上打印一些东西，而 draw.cpp 是空的（我暂时还没有定义我在 draw.h 中声明的函数）

谢谢最好的文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:18:02.580

非常感谢实际上这是一个相当容易解决的问题

问题在于其他类（例如 ChBody）是在命名空间中定义的，因此添加

```
using namespace <the name of the namespace>; 
```

在类的定义之前和#include 之后解决了这类问题。

谢谢最好的文森特

# linux - Linux，共享对象中的并发性

> ID：14604375
> 
> 赞同：0
> 
> 时间：2013-01-30T12:46:35.917
> 
> 标签：linux, cgi, shared-objects

我有一个与我的后端环境有关的问题：

在 linux 机器（suse linux）上，有一个启用 cgi 的 apache 网络服务器：

2 个不同的用户（在不同的地方），在我们浏览器上的 webapp 中，同时单击“事件”按钮。因此，apache 网络服务器启动了 2 个运行 cgi（它是编译的 c 可执行文件）“show_events”的单独进程。

但是这个编译的 c 可执行文件会加载一个共享对象“events_helper”并调用这个共享对象中的方法。

现在我的问题：

“show_events”cgi 程序中的这 2 个用户是否共享同一个共享对象“events_helper”，因此我是否必须考虑并发性，或者每个“show_events”进程是否都有自己的共享对象副本，因此并发性没有主题。

非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:53:04.363

由于它们在不同的进程中运行，因此它们的堆栈和堆是不同的副本，因此您无需担心。如果他们都访问相同的文件或使用显式声明的共享内存，那么您需要使用互斥或​​其他方法来处理这种情况。

# android - 更改 statelistdrawable 文本颜色 android 按钮

> ID：14604385
> 
> 赞同：6
> 
> 时间：2013-01-30T12:47:10.240
> 
> 标签：android, button, android-button, android-selector

我正在开发安卓应用程序

对于按钮的每种状态（按下，正常），我有不同的背景可绘制和文本颜色

我创建了 statelistdrawable 对象以便能够添加背景可绘制对象，但我现在的问题是如何设置文本颜色

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T12:54:57.843

Button 是 TextView，您可以调用[`button.setTextColor(someColorStateList)`](http://developer.android.com/reference/android/widget/TextView.html#setTextColor%28android.content.res.ColorStateList%29)TextView。

以下是如何以编程方式执行此操作：

```
 ColorStateList colorStateList = new ColorStateList(
            new int[][]{
                    new int[]{R.attr.state_pressed},
                    new int[]{R.attr.state_selected},
                    new int[]{-R.attr.state_selected},
            },
            new int[]{
                    Color.GREEN,
                    Color.BLUE,
                    Color.RED});
    TextView textView = ... some textView or button
    textView.setTextColor(colorStateList); 
```

您当然可以对 xml 配置执行相同的操作（[在 xml 中定义您的 colorStateList](http://developer.android.com/reference/android/content/res/ColorStateList.html)并将其与按钮文本颜色属性相关联`android:textColor="@drawable/mycolorstatelist"`

# iphone - 如何在具有单个证书的两台机器中添加开发者证书？

> ID：14604387
> 
> 赞同：1
> 
> 时间：2013-01-30T12:47:10.897
> 
> 标签：iphone, xcode, macos, xcode4.5, ios-provisioning

我有一个开发者证书并将其安装在我的机器上。我需要在另一台mac机器上使用相同的。我已经从证书门户下载并安装了证书。（它显示“未找到有效的签名身份）。但它没有在 Keys 部分（ keychainAccess -> keys ）下列出。

我在 SO 中找到了一些链接，但没有一个对我有帮助。

有人可以提供我在两台机器上安装证书的步骤吗？**听朋友说需要在团队下添加开发者，并添加机器的私钥和公钥，但不知道怎么做。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:58:54.460

您需要迁移密钥的私有和公共部分。您从 provisioinig 门户获得的只是 Apple 生成的公共部分。

要将其移动到另一台 Mac，`Keychain Access`请在具有工作证书的 Mac 上打开，右键单击它并选择`Export <your certificate name>`. 然后，在下一个屏幕上选择`Personal Information Exchange (.p12)`文件格式并单击保存。系统将首先提示您输入用于对`.p12`文件进行编码的密码（您可以将其留空），然后提示您输入钥匙串密码。

然后，您可以`.p12`在另一台 Mac 上打开该文件以导入带有私钥和公钥的证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:02:32.607

您可以通过以下步骤进行操作：

打包证书：

1）来自钥匙串：请求认证

2) 上传证书

3) 下载证书并安装在您的 Mac 注意：此下载的证书将仅安装在您创建请求证书的 Mac 中。

4）现在，去钥匙串，检查你的证书。

5) 将证书导出为“.p12”文件，提供密码。

6) 在另一台 Mac 上安装这个“.p12”文件。然后你就可以安装它了。

希望你的问题能解决。

干杯!

# markdown - 带有 R Markdown 源和 pandoc 转换的 Word 中的图形标题

> ID：14604393
> 
> 赞同：3
> 
> 时间：2013-01-30T12:47:23.863
> 
> 标签：markdown, knitr, rstudio, pandoc, r-markdown

我正在使用 Rstudio 用 Rmarkdown 语言编写报告，然后使用 pandoc 将`md`文件（不是`Rmd`文件）转换为`doc`格式。`doc`每个图形在输出文件中都有一个标题： *“plot of chunk unnamed-chunk-xxx”*。我当然可以在`md`文件中修改这个caption，但是不知道是不是可以直接在`Rmd`文件中修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:02:26.783

糟糕，我找到了解决方案：`fig.cap`R 块的选项。标题转换后出现在Word文件中，但不出现在html文件中。

# ffmpeg - 我在 ffmpeg 程序中使用什么来代替 init_put_byte？

> ID：14604396
> 
> 赞同：1
> 
> 时间：2013-01-30T12:47:36.090
> 
> 标签：ffmpeg

我正在尝试修复一个程序，其中一个问题是使用了已弃用的 init_put_byte (avio.h)。但是没有文档说明我要更改它的目的。我在哪里可以找到有关它的任何信息？

[此页面](http://ffmpeg.org/pipermail/ffmpeg-devel/2011-February/104675.html)显示被替换的函数`avio_init_context`，但我的版本只有`init_put_byte`（不推荐使用）。

我的版本（如“/usr/local/include/libavformat/version.h”）是：

```
#define LIBAVFORMAT_VERSION_MAJOR 52
#define LIBAVFORMAT_VERSION_MINOR 103
#define LIBAVFORMAT_VERSION_MICRO  0 
```

**- 更新**

我做了一个`grep -R "_init_context" /usr/local/include/libavformat/*"`，但我什么也没找到。这个后缀没有任何功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T05:21:47.133

您需要用 fio_init_context() 替换 init_put_bytes。

ffio_init_context - 初始化 AVIOContext init_put_bytes - 初始化 ByteIOContext

ByteIOContext 在较新版本中被 AVIOContext 取代。

让我知道您是否需要了解其他信息。

# linux - 如何连续显示最后几行内容的文件

> ID：14604397
> 
> 赞同：27
> 
> 时间：2013-01-30T12:47:36.887
> 
> 标签：linux, unix, split, screen, tail

我试图找到一个关于如何连续显示文件最后几行内容的 Unix 命令（可能是组合）。但是在这个显示过程中，我希望当滚动内容到达屏幕顶部时，一些顶行总是显示在屏幕顶部。

那可能吗？

1.  假设我有文件“job.sta”，前两行是：

    ```
    job name, John's job on 2013-Jan-30,...
    Tab1, Tab2, Tab3
    0, 1, 2,
    1, 90, 89
    2, 89, 23
    ... 
    ```

2.  这个文件正在运行，它的内容正在增长，我不知道它会在哪一行结束。
3.  因此，当更新内容到达 Unix shell 屏幕顶部时，我想在使用 tail 命令时显示（总​​是）前 2 行。我目前正在使用 PuTTY。

参考： [http ://www.unix.com/unix-dummies-questions-answers/172000-head-tail-how-display-middle-lines.html](http://www.unix.com/unix-dummies-questions-answers/172000-head-tail-how-display-middle-lines.html)

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-03-27T00:41:47.537

我一直使用这个功能来监控另一个终端窗口中的日志文件。

```
tail -f <filename> 
```

我建议向前迈出一步，在日志中查找特定文本。如果您只对看到某些特定条目被写入文件感兴趣，那就太好了。

```
tail -f <filename> | grep <keyword or pattern> 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-30T18:11:49.380

这将每 2 秒更新一次，而不是在将数据写入文件时更新，但这可能就足够了：

```
watch 'head -n 2 job.sta; tail job.sta' 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-30T13:20:49.597

您可以`screen`用来模拟预期的行为：

1.  运行`screen`，按下`Space`。

2.  按`Ctrl`+`a`后按`S`拆分屏幕。

3.  按`Ctrl`+调整顶部窗口的大小，`a`然后按`:resize 4`。

4.  在顶部窗口的提示中，输入`head -n2 file`.

5.  按`Ctrl`+移动到底部窗口，`a`然后按`Tab`。

6.  按`Ctrl`+开始一个新的屏幕会话，`a`然后按`c`。

7.  在新提示中，输入`tail -f file`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-30T13:01:10.777

我用这个脚本来实现你描述的效果

```
!#/bin/bash
while [ 1 ]; do ls -lt data | head -n 30; sleep 3; echo -en "$(tput cuu 30; tput ed)"; done 
```

这会在循环中运行一个命令，并在每次迭代之前从屏幕上删除输出的最后几行。

在你的情况下，它看起来像

```
!#/bin/bash

while [ 1 ] ;# loop forever
do 
    head -n 2 job.sta ;# display first 2 lines 
    tail -n 30 job.sta ;# display last 30 lines from file
    sleep 3 ;# wait a bit
    echo -en "$(tput cuu 32; tput ed)" ;# delete last 32 lines from screen
done 
```

当然在你的文件达到 30 行之前有点难看

希望有帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T18:40:13.880

您需要该`multitail`程序，它不仅可以分屏，还可以进行颜色编码。

[http://www.vanheusden.com/multitail/](http://www.vanheusden.com/multitail/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-30T12:51:37.487

你试试下面的组合 tail -f filename | 头-2

# sql - 来自 Join 的 SQL 多个查找

> ID：14604399
> 
> 赞同：0
> 
> 时间：2013-01-30T12:47:37.740
> 
> 标签：sql

我有一个看起来像这样的查询：

```
SELECT cu.CustomerCountryID,
       pr.ProviderCountryID,
       po.ProductCountryID
FROM   tblCustomer cu
       INNER JOIN tblProvider pr
         ON cu.ProvID = pr.ProvID
       INNER JOIN tblProduct po
         ON pr.ProdID = po.ProdID 
```

然后是包含国家名称的第四个表。我想用 CountryName 替换 CountryID。

我现在想不出如何在不产生子查询的情况下做到这一点

谁能建议更快的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:52:38.887

您可以通过多次加入国家/地区表来实现此目的：

```
SELECT cust_country.CountryName,
   prov_country.CountryName,
   prod_country.CountryName
FROM   tblCustomer cu
   INNER JOIN tblProvider pr
     ON cu.ProvID = pr.ProvID
   INNER JOIN tblProduct po
     ON pr.ProdID = po.ProdID 
   INNER JOIN tblCountry cust_country
     ON cu.CustomerCountryID = cust_country.CountryID
   INNER JOIN tblCountry prov_country
     ON pr.CustomerCountryID = prov_country.CountryID
   INNER JOIN tblCountry prod_country
     ON co.CustomerCountryID = prod_country.CountryID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:50:36.547

```
SELECT
    cco.CountryName as CustomerCountryName, pco.CountryName as ProviderCountryName, ppco.CountryName as ProductCountryName
FROM
    tblCustomer cu
INNER JOIN
    tblProvider pr ON cu.ProvID = pr.ProvID
INNER JOIN
    tblProduct po ON pr.ProdID = po.ProdID
INNER JOIN
    tblCountry cco ON cu.CustomerCountryID = cco.CountryID
INNER JOIN
    tblCountry pco ON pr.ProviderCountryID = pco.CountryID
INNER JOIN
    tblCountry ppco ON po.ProductCountryID = ppco.CountryID 
```

这假设您有一个`tblCountry`用`CountryID`列调用的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T12:51:34.617

您可以多次加入国家/地区表：

```
SELECT cuco.CountryName,
       prco.CountryName,
       poco.CountryName
FROM   tblCustomer cu
       INNER JOIN tblProvider pr
         ON cu.ProvID = pr.ProvID
       INNER JOIN tblProduct po
         ON pr.ProdID = po.ProdID 
       INNER JOIN tblCountry cuco
         ON cu.CustomerCountryID = co.CountryID
       INNER JOIN tblCountry prco
         ON pr.ProviderCountryID = co.CountryID
       INNER JOIN tblCountry poco
         ON po.ProductCountryID = co.CountryID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T12:55:41.620

您将需要某种连接来获得价值，没有其他方法。不过，它不必是与您已经在做的两个相同类型的连接；它可能是一个内联视图：

```
SELECT cu.CustomerCountryID,
       pr.ProviderCountryID,
       po.CountryName
FROM   tblCustomer cu
,      tblProvider pr
,     (SELECT po.ProdID
       ,      co.CountryName
       FROM   tblProduct po
       ,      tblCountry co
       WHERE  po.ProductCountryID = co.productCountryID
) po
WHERE  cu.ProvID = pr.ProvID
AND    pr.ProdID = po.ProdID; 
```

或者（取决于数据库提供程序）您可以在选择列表中进行子选择：

```
SELECT cu.CustomerCountryID,
       pr.ProviderCountryID,
       (SELECT co.CountryName FROM tblCountry co WHERE po.ProductCountryID = co.productCountryID) AS CountryName
FROM   tblCustomer cu
,      tblProvider pr
,      tblProduct po
WHERE  cu.ProvID = pr.ProvID
AND    pr.ProdID = po.ProdID; 
```

我只展示了其中一张表的示例，但同样适用于所有三张表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T13:04:39.843

你必须为每个 ID 名称添加一个连接......你也可以试试这个；

```
SELECT 
  (Select CountryName from tblCountry where CountryID =cu.CustomerCountryID),
  (Select CountryName from tblCountry where CountryID =pr.ProviderCountryID),
  (Select CountryName from tblCountry where CountryID =po.ProductCountryID)                
FROM tblCustomer cu    
  INNER JOIN tblProvider pr ON cu.ProvID = pr.ProvID
  INNER JOIN tblProduct po ON pr.ProdID = po.ProdID 
```

# selenium-webdriver - 使用 Webdriver 自动执行失败的测试

> ID：14604400
> 
> 赞同：2
> 
> 时间：2013-01-30T12:47:38.103
> 
> 标签：selenium-webdriver

我有带有 1000 个测试的回归套件，但是对于每个周期，我的几个测试用例都失败了，因为 ID 未找到错误。即使相应的 ID 可用，但 Webdriver 无法单击该 ID（相同的 ID 用于所有 1000 个测试）。但是如果我刷新页面它会按预期工作。

我使用了以下代码：

```
 if (existsId("id")==true){
            assertNotNull(bost.driver.findElement(By.id(id)));
        } else {
            bost.driver.navigate().refresh();                
            assertNotNull(bost.driver.findElement(By.id(id)));
        }
    }
}

public boolean existsId(String id) {
    try {
        bost.driver.findElement(By.id(id));
    } catch (Exception e) {
         return false;
    }
    return true;
} 
```

一旦由于 assert 命令而失败，我需要一个代码来重新运行测试。使用上面的代码，webdriver 正在等待几秒钟来执行命令，所以最终等待时间太长了....与之前的运行相比。

# python - 从 Flask 请求启动新的子进程

> ID：14604408
> 
> 赞同：10
> 
> 时间：2013-01-30T12:48:03.423
> 
> 标签：python, flask, multiprocessing, subprocess

我有一个请求来自一个用`@app.route('/url/path/to/view')`.

它做了几件事来查找一些数据并进行一些计算，并且在此期间该函数正常运行。但是，最后我想开始一个新进程（从一个 python 函数，当前使用`multiprocessing.Process`）。一旦这个进程启动，我希望函数返回，而新进程继续独立运行。

我当前方法的伪代码

```
def start_process(arguments):
    # some code here that the process will run

p = multiprocessing.Process(target=start_process, args=(...))
p.start()

return app.response("{ 'status': 'ok' }", mimetype='application/json') 
```

这种方法是否可行，Flask 应用程序能否继续运行而不影响新进程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-27T03:50:45.237

使用多处理启动子进程是完全可以接受的。这是一个使用多处理在后台更新数据库的最小工作示例。正如 Audrius 所说，最终您可能需要一个适当的[任务队列](https://www.fullstackpython.com/task-queues.html)。

```
from flask import Flask, jsonify
import multiprocessing
import dataset
import time
import random

app = Flask(__name__)
DATABASE_URL = 'sqlite:///dev.db'

def add_person(name):
    """ Add a person to the db. """
    person = {'name': name, 'age': -1, 'status': 'processing'}
    db = dataset.connect(DATABASE_URL)
    db['people'].insert(person)
    return True

def update_person(name):
    """ Update a person in db with a fake long running process 
    that guesses a random age. """
    time.sleep(10)  # simulate a long running process
    age = random.randint(1, 120)
    person = {'name': name, 'age': age, 'status': 'finished'}
    db = dataset.connect(DATABASE_URL)
    db['people'].update(person, ['name'])
    return True

def get_person(name):
    """ Retrieve a person from the db. """
    db = dataset.connect(DATABASE_URL)
    person = db['people'].find_one(name=name)
    return person

@app.route('/<name>')
def index(name):
    """ Get person. If name not found, add_person to db and start update_person. """
    if not get_person(name):
        add_person(name)
        thread = multiprocessing.Process(target=update_person, args=(name,))
        thread.start()
    person = get_person(name)
    return jsonify(person)

if __name__ == '__main__':
    app.run(debug=True) 
```

`localhost:5000/bert`在子进程运行时访问：

```
{
    "status": "processing",
    "age": -1,
    "name": "bert",
    "id": 1
} 
```

等待，然后刷新，您会看到子进程已完成：

```
{
    "status": "finished",
    "age": 28,
    "name": "bert",
    "id": 1
} 
```

# excel - 在 CRM Online 环境之间移动“动态工作表”

> ID：14604412
> 
> 赞同：2
> 
> 时间：2013-01-30T12:48:23.810
> 
> 标签：excel, dynamics-crm-2011, dynamics-crm-online

我对这是如何工作的理解与现实似乎有所不同。

## 目标

从一个 CRM Online 租户导出动态工作表。在解决方案中将其作为“现有报告”上传。*将解决方案*导出到另一个租户。与 SSRS 报告类似，我希望将数据源更新为新租户。然后，我想通过新租户中的报告打开动态工作表，并在 Excel 中查看来自第二个租户的数据。

## 环境

我正在使用 CRM Online（现在使用 UR12）和 Excel 2013。我可以在另一台使用 Excel 2007 的机器上复制它。

## 演练

我有一个从 CRM Online 租户（“T1”）导出的动态工作表。我通过创建高级查找、查看结果然后单击导出到 Excel 来做到这一点。然后我选择了“动态工作表”选项并保存了结果`.xml`文件。如果我在本地打开文件（并接受所有常见的安全警告），我会在工作表中看到来自 T1 的数据。

然后我在 T1 中创建了一个新的解决方案，称为“我的报告”。从解决方案中，我转到报告，添加新并通过浏览到我新保存的`.xml`文件来添加“现有报告”。

然后我将我的解决方案导出为非托管（这并不重要）。

接下来，我退出 T1 并登录到另一个 CRM Online 租户（“T2”）并导入解决方案。然后我可以在 T2 的报告下看到我的新报告。如果我单击报告，系统会提示我下载电子表格。如果我打开下载的电子表格（并像以前一样同意安全警告等），我看不到任何数据。如果我单击`Refresh from CRM`，则似乎什么也没有发生。如果我单击，`Data > Connections > Refresh All`则电子表格中的内容将更改为：

> Microsoft Online Services 需要 JavaScript 才能登录。此 Web 浏览器不支持 JavaScript，或者脚本被阻止。
> 
> 要了解您的浏览器是否支持 JavaScript 或允许使用脚本，请参阅浏览器的在线帮助。

## 我的理论

目标数据源似乎存储在工作表中（我可以通过查看 XML 看到这一点，并看到我的“T1”租户的路径）。我预计这会在解决方案导入阶段发生变化，但事实并非如此。如果我手动更改 XML，它将查看我的 T2 环境并按预期工作。

我曾希望以下选项之一会使 Excel 寻找正确的位置：

*   我已经安装并配置了 Outlook 客户端。T1 和 T2 都配置为我可以连接的组织。我希望这可能会导致 Excel 提示连接到两个环境之一。
*   我将 Outlook 客户端重新配置为仅连接到 T2（从配置中删除了 T1），但似乎对 Excel 连接到的位置产生了影响
*   我通过我的默认浏览器 (IE9) 登录到 T2 并打开了工作表，但这同样没有影响更改。

毫不奇怪，此示例简化了更复杂的案例（具有许多链接工作表的工作簿，例如上面的那个）。该工作簿是在 DEV 和 UAT 环境之间部署的解决方案的一部分。每次导出解决方案时手动处理 XML 不是一个可扩展的选项。

## 问题）

*   这种行为是预期的还是另一个 UR12 后/O365 后的错误？
*   我没有尝试过什么可以让它“正常工作”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T15:19:44.980

*报告 Microsoft 已确认此行为是设计*使然，我一点也不感到惊讶。鉴于通过解决方案上传的 SSRS 报告的行为，我不能说我觉得它合乎逻辑。我也不能说开发体验很好，因为我可能会花费一些时间来针对 DEV 环境开发我的报告，但我不能通过解决方案将这种投资本地导入另一个租户。我必须让步，但这是可以理解的。

如果您对我当前的解决方案感兴趣，请按照以下步骤操作。我还准备尝试开发一个受支持的、基于 CRM 的解决方案。如果你喜欢这篇文章，我会在完成所需代码后更新它。

解决方法：

1.  将电子表格另存为 XML 工作表
2.  在您喜欢的 XML 编辑器中打开 XML 文件
3.  使用查找和替换将原始租户 URL 更改为新租户 URL
4.  保存并关闭

相当容易，但对我来说有点太*动手了*......

# linux - TCP RST 段通过套接字发送给对等方的情况有多少？

> ID：14604413
> 
> 赞同：3
> 
> 时间：2013-01-30T12:48:23.753
> 
> 标签：linux, sockets, unix, tcp, network-programming

我知道当一个进程崩溃时，现有的 TCP 套接字将通过向其他对等方发送 RST 数据包（段）而被放弃，并且其他对等方上的相关套接字 fd 将接收 RST 数据包。

还有其他发送RST数据包的情况吗？例如，如果一个进程在套接字 fd 上调用 close()，但该套接字上仍有未读数据，它是否还会通过该套接字 fd 向其他对等方发送 RST 数据包（段）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:21:05.287

引用[TCP/IP 指南](http://www.tcpipguide.com/free/t_TCPConnectionManagementandProblemHandlingtheConnec.htm)

> 一般来说，只要发生 TCP 软件“意外”的事情，就会产生复位。生成重置的一些最常见的特定情况包括：
> 
> *   接收到来自任何设备的任何 TCP 段，但接收该段的设备当前没有与之建立连接（请求新连接的 SYN 除外。）
>     
>     
> *   收到带有无效或不正确的序列号或确认号字段的消息，表明该消息可能属于先前的连接或以某种其他方式是虚假的。
>     
>     
> *   在没有进程侦听连接的端口上收到 SYN 消息。

如果您观察到奇怪`RST`的行为，您可能是[TCP 重置攻击的受害者](http://en.wikipedia.org/wiki/TCP_reset_attack)

关于你的最后一个问题，我想当`RST`你关闭一个带有未读数据的套接字到套接字缓冲区时不会发出 no ，因为它不会破坏任何 TCP 规则（数据包被正确传递，只是没有详细说明它的过程）。相反，`FIN`将发送一个。

# sql-server - 如何在 SQL Server 中启用批量权限

> ID：14604416
> 
> 赞同：47
> 
> 时间：2013-01-30T12:48:30.330
> 
> 标签：sql-server, sql-server-2012

我正在尝试使用“批量”将图像插入到 SQL Server 2012 中。但是，最终得到的错误消息是：

> Msg 4834, Level 16, State 1, Line 2 您没有使用批量加载语句的权限。

我有“系统管理员”访问权限。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-05-08T23:54:56.830

试试`GRANT ADMINISTER BULK OPERATIONS TO [server_login]`。它是服务器级别的权限，而不是数据库级别的权限。这在过去为我解决了一个类似的问题（我相信使用 OPENROWSET）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-12T11:38:47.673

尝试这个：

```
USE master;

GO;

GRANT ADMINISTER BULK OPERATIONS TO shira; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-09-05T08:37:47.823

**请注意，接受的答案或这两种解决方案中的任何一种仅适用于 Windows。**

```
GRANT ADMINISTER BULK OPERATIONS TO [login_name];
-- OR
ALTER SERVER ROLE [bulkadmin] ADD MEMBER [login_name]; 
```

如果你在基于 linux 机器的 SQL Server 上运行它们中的任何一个，你会得到这些错误：

```
Msg 16202, Level 15, State 1, Line 1
Keyword or statement option 'bulkadmin' is not supported on the 'Linux' platform. 
```

```
Msg 16202, Level 15, State 3, Line 1
Keyword or statement option 'ADMINISTER BULK OPERATIONS' is not supported on the 'Linux' platform. 
```

检查[文档](https://docs.microsoft.com/en-us/sql/t-sql/statements/bulk-insert-transact-sql?view=sql-server-ver15#permissions)。

> 需要 INSERT 和 ADMINISTER BULK OPERATIONS 权限。在 Azure SQL 数据库中，需要 INSERT 和 ADMINISTER DATABASE BULK OPERATIONS 权限。Linux 上的 SQL Server 不支持 ADMINISTER BULK OPERATIONS 权限或 bulkadmin 角色。只有系统管理员可以为 Linux 上的 SQL Server 执行批量插入。

**Linux 解决方案**

```
ALTER SERVER ROLE [sysadmin] ADD MEMBER [login_name]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-06T20:36:17.777

如果服务帐户无权读取正在导入的文件，SQL Server 也可能返回此错误。确保服务帐户对文件位置具有读取权限。例如：

`icacls D:\ImportFiles /Grant "NT Service\MSSQLServer":(OI)(CI)R`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-21T08:33:09.853

如果您收到错误消息“无法批量加载文件，因为您没有访问权限”

首先确保您提供的路径和文件名是正确的。

然后尝试将 bulkadmin 角色授予用户。为此，请按照以下步骤操作：- 在对象资源管理器中 -> 安全 -> 登录 -> 选择用户（右键单击）-> 属性 -> 服务器角色 -> 选中 bulkadmin 复选框 -> 确定。

这对我有用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-11-10T17:49:16.770

USE Master GO

ALTER Server Role [bulkadmin] ADD MEMBER [username] GO Command failed even tried several command parameters

master..sp_addsrvrolemember @loginame = N'username', @rolename = N'bulkadmin' GO Command was successful..

# sql - Oracle 11g：将缺失的日期插入日历表

> ID：14604417
> 
> 赞同：1
> 
> 时间：2013-01-30T12:48:31.207
> 
> 标签：sql, oracle, oracle11g

请不要批评我这个问题，因为它已经被简化了。

假设我得到了`CALENDAR`包含两列的表：`CLIENT_ID (INTEGER)`并且`ENTRY_DATE(DATE)`这些数据：

```
+----------------------------+
| CLIENT_ID |   ENTRY_DATE   |
+-----------+----------------+
|   100     |    2012-01-03  |
|   100     |    2012-01-23  |
+-----------+----------------+ 
```

如何使用内联`INSERT`缺失天数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:58:34.037

生成日期并离开加入日历。

```
select 
   nvl(calendar.client_id,100), 
   dt.day as entry_date
from (select to_date('1-Jan-2012','dd-mon-yyyy')+level-1
      from dual connect by level<=366
      ) dt
left join Calendar
  on (calendar.entry_date=dt.day and client_id = 100) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T14:16:28.927

此查询将为所有客户端插入日历孔：

```
INSERT INTO calendar (client_id, entry_date) (
    SELECT holes.client_id, holes.hole
    FROM (
            SELECT cal.client_id, cal.mn + level AS hole
            FROM (
                    SELECT client_id, MIN(entry_date) AS mn, MAX(entry_date) AS mx
                    FROM calendar
                    GROUP BY client_id
                    HAVING MAX(entry_date)>MIN(entry_date)+1
                 ) cal
            CONNECT BY cal.mn + level < cal.mx
            GROUP BY cal.client_id, cal.mn + level
        ) holes LEFT OUTER JOIN calendar c ON holes.client_id = c.client_id AND c.entry_date = hole
    WHERE
        c.entry_date IS NULL
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:49:16.040

也许这有帮助 - Oracle 查询。您将需要弄清楚如何比较您的日期并仅插入缺失的日期。开始日期是您的入境日期。其余的是另外...：

```
-- Annual table by date and ISO week - use WW format for non-iso week--
SELECT start_date                               
    , TRUNC(start_date, 'iw')                  wk_starts    
    , TRUNC(start_date, 'iw') + 7 - 1/86400    wk_ends
    , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk#_iw  
  FROM
  (
   SELECT TRUNC(SYSDATE, 'YEAR')-1 + LEVEL AS start_date  -- 11/1/2013 --
    FROM dual
   CONNECT BY LEVEL <= 
   (-- Number of Days in curr year = 365 --
   SELECT TRUNC(ADD_MONTHS (SYSDATE, 12), 'Y')-TRUNC(SYSDATE, 'Y')    
    FROM dual
   )
  )
 /

 SQL>

 START_DATE   WK_STARTS   WK_ENDS                  ISO_WK#_IW
 --------------------------------------------------------------
 1/1/2013     12/31/2012    1/6/2013 11:59:59 PM    1
 1/2/2013     12/31/2012    1/6/2013 11:59:59 PM    1
 ....
 1/14/2013    1/14/2013 1/20/2013 11:59:59 PM       3
 1/15/2013    1/14/2013 1/20/2013 11:59:59 PM       3
 ....
 12/29/2013   12/23/2013    12/29/2013 11:59:59 PM  52
 12/30/2013   12/30/2013    1/5/2014 11:59:59 PM    1
 12/31/2013   12/30/2013    1/5/2014 11:59:59 PM    1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:49:35.447

基于 FlorinGhita 的回答：

```
SELECT 100, TO_DATE('2012-01-03', 'YYYY-MM-DD') + LEVEL 
  FROM DUAL
CONNECT BY LEVEL < TO_DATE('2012-01-23', 'YYYY-MM-DD') - TO_DATE('2012-01-03', 'YYYY-MM-DD') 
```

# r - 条件概率

> ID：14604419
> 
> 赞同：3
> 
> 时间：2013-01-30T12:48:42.483
> 
> 标签：r, conditional, probability

我正在尝试从中创建条件概率矩阵：

我已经重写了没有循环的代码

```
a # Signal Vector 
b # Price Change Vector
Signalt<- seq(0, 1, 0.05) # Produce the 5% tiles
abst <- c(seq(1, 1.02,  by = 0.0025), 2)  #Produce the 0% to 2% tiles with 0.25% increments. Added 1 to include price change of 0 in `temp` 

xbool = ((Signal >= Signalt[1] & a < Signalt[1 + 1])  *1) # 1 for True 0 for False 
temp = (PercChange + 1)  * xbool
temp2 <- temp[which(temp > 0)]
CondProb <- cut(temp2, abst, include.lowest = T)
table(CondProb) 
```

这将输出带有带有出现次数的绝对列的表。我当然需要它占每行总数的百分比，但我希望首先能够运行循环并获得矩阵输出。

* * *

Loop Original - 应该在很大程度上被忽略，因为我已经更改了大部分编码设置

```
Signal <- runif(100)
PercChange <- abs((rnorm(100)/100))
signalt <- seq(0, 1, 0.05)
abst <- seq(0, c(0.02:1), 0.0025)

CondDistMat <- matrix(0, nrow = length(signalt), ncol = length(abst))

for(j in 1:length(signalt - 1)){
    xbool = (is.na((Signal >= signalt[j] & Signal < signalt[j + 1]) ) * 1)
    ysubset =  (PercChange * xbool[j] )
    CondProb = hist(ysubset, breaks = abst, freq = TRUE)
    CondDistMat[signalt, abst] <- CondProb$density 
} 
```

列将是由 定义的百分位数，`abst`而行将是由 定义的 5% 平铺`signalt`。这个想法是通过布尔向量产生1，其中绝对回报`PercChange`应该在列中，然后绘制每个概率`signalt`。

但是，我无法产生输出 - 任何人都可以发现错误吗？提前致谢

所需的输出应该类似于附加的图像![条件概率](../Images/449b01d94695a248c0da3db7494389a7.png)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:01:46.540

听起来你想要`cut`或`findInterval`

这些函数的输出示例

```
> cut(rnorm(9), breaks = -6:6)
[1] (0,1]   (-2,-1] (0,1]   (1,2]   (0,1]   (-1,0]  (-2,-1] (0,1]   (-1,0] 
12 Levels: (-6,-5] (-5,-4] (-4,-3] (-3,-2] (-2,-1] (-1,0] (0,1] (1,2] ... (5,6]
> findInterval(rnorm(9), -6:6)
[1] 7 6 7 6 8 9 7 7 6 
```

# android - 图像保持半屏

> ID：14604420
> 
> 赞同：1
> 
> 时间：2013-01-30T12:48:46.240
> 
> 标签：android, image, screen

![在此处输入图像描述](../Images/345153aac48ad9f3076f799db2ca7dae.png)我的目标：按钮 1 位于顶部，按钮 2 位于下方。ImageView 必须保持半屏。其他 textView 将保留另一半屏幕。webview 是不可见的。我不能将 imageview 半屏和其他 textview 保留到另一个半屏。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#103080"
        android:text="yes"
        android:textColor="#f7d404" />

    <LinearLayout

        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#ffffff"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="146dp"
            android:layout_weight="1"
            android:src="@drawable/logo" />

        <TextView
            android:id="@+id/textView3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/button1"
            android:gravity="center_horizontal"
            android:text="@string/info2"
            android:textColor="#103080"
            android:textSize="20sp" />

        <WebView
            android:id="@+id/webView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:visibility="invisible" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:textSize="16sp"
            android:textStyle="bold"
            android:typeface="sans" />

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#103080"
            android:text="Exit"
            android:textColor="#f7d404" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:12:34.997

使用主布局中的权重 sun 功能，即 LinearLayout ，您可以实现这一点。比如将主布局保持为 LinearLayout，其垂直方向和权重总和为 100 或 1。然后您可以将此权重总和划分为后续子组件。如，

`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffffff"
android:orientation="vertical"
tools:context=".MainActivity"
android:weightSum="100" >

    <Button
         android:id="@+id/button1"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:background="#103080"
         android:text="yes"
         android:textColor="#f7d404"
         android:layout_weight="10" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:src="@drawable/logo"
        android:layout_weight="40" />

     <TextView
         android:id="@+id/textView3"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_weight="1"
         android:text="TextView"
         android:layout_weight="10" />

     <TextView
         android:id="@+id/textView1"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
            android:layout_below="@+id/button1"
            android:gravity="center_horizontal"
            android:text="@string/info2"
            android:textColor="#103080"
            android:textSize="20sp"
            android:layout_weight="10" />

        <WebView
            android:id="@+id/webView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:visibility="invisible"
            android:layout_weight="10" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:textSize="16sp"
            android:textStyle="bold"
            android:typeface="sans"
            android:layout_weight="10" />

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#103080"
            android:text="Exit"
            android:textColor="#f7d404"
            android:layout_weight="10" />

</LinearLayout> 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:34:11.263

试试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="#ffffff"
android:orientation="vertical"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="fill_parent"
    android:layout_height="30dip"
    android:background="#103080"
    android:text="yes"
    android:textColor="#f7d404" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff"
    android:layout_below="@+id/button1"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="146dp"
        android:layout_weight="1"
        android:src="@drawable/logo" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:text="@string/info2"
        android:textColor="#103080"
        android:textSize="20sp" />

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:visibility="invisible" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:textSize="16sp"
        android:textStyle="bold"
        android:typeface="sans" />

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#103080"
        android:text="Exit"
        android:textColor="#f7d404" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:00:53.627

尝试使用相对布局而不是线性布局，为什么在一个视图中有两次线性布局。删除第二个并将其中的任何内容实施到第一个线性布局中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:04:51.370

像这样的东西？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#ffffff"
android:orientation="vertical"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#103080"
    android:text="yes"
    android:textColor="#f7d404" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:src="@drawable/logo" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="#ffffff"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="TextView" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/button1"
            android:gravity="center_horizontal"
            android:text="@string/info2"
            android:textColor="#103080"
            android:textSize="20sp" />

        <WebView
            android:id="@+id/webView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:visibility="invisible" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="right"
            android:textSize="16sp"
            android:textStyle="bold"
            android:typeface="sans" />

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#103080"
            android:text="Exit"
            android:textColor="#f7d404" />
    </LinearLayout>
</LinearLayout> 
```

# wcf - WCF 安全性：用户名、密码和另外一个参数

> ID：14604422
> 
> 赞同：1
> 
> 时间：2013-01-30T12:49:00.360
> 
> 标签：wcf, wcf-security, wshttpbinding, wcf-authentication

在我们的项目中，所有 WCF 服务都由 wsHttpBinding (TransportWithMessageCredential, UserName) 选项保护。

它工作得很好，但现在我们需要使用另外一个参数（ClientId）来实现安全性。

当 WCF 服务接到呼叫时，它不知道呼叫的数据库是什么（在哪里检查用户名和密码），所以首先它应该去我们公司的“主”数据库（所有客户端都存储在其中) 并通过 ClientId 获取连接字符串。

我们如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:00:51.730

我用[MessageInspectors](http://msdn.microsoft.com/en-us/library/aa717047.aspx)解决了类似的问题。基本上，您创建一个`IClientMessageInspector`将客户端 ID 添加到消息标头中，并`IDispatchMessageInspector`从该标头中读取客户端 ID，并将其存储在适当的位置（如`IPrincipal`set as 的自定义实现`Thread.CurrentPrincipal`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:55:26.647

我过去通过使用特殊格式的用户名字符串来实现这一点，以允许发送额外的信息。关于如何通过这些字符串字段中的用户名和密码进行发送没有任何规则，因此内容实际上可以是序列化对象、压缩字符串或您认为必要的任何内容。

我找不到任何其他方式来优雅地发送信息。

只需在您的 AuthorizationPolicy 实现中解析该信息即可。

# web-services - 如何记录 Web 服务 API？

> ID：14604428
> 
> 赞同：2
> 
> 时间：2013-01-30T12:49:12.070
> 
> 标签：web-services, wsdl, wsdl2java, java2wsdl

我在记录我的 Web 服务 API 时遇到问题。它是用 Java 编写的，然后我使用`java2wsdl`go 生成 wsdl 文件等。

如何为此创建文档？我需要一些可以提供给用户的文档。我是否记录了我的初始 Java 代码？

应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:09:37.467

您的**WSDL**文件包含有关该服务的所有详细信息。它清楚地说明了您的服务的输入、输出。除此之外，您还可以以**wiki/doc**的形式提供服务的详细信息，其中解释了服务、预期输入、响应和错误代码等。

如果需要，您还可以为您的项目生成 JavaDoc。

# jquery - 悬停时的jQuery中心溢出DIV

> ID：14604429
> 
> 赞同：1
> 
> 时间：2013-01-30T12:49:20.737
> 
> 标签：jquery, css, html, hover

我正在尝试复制（在`JQuery/CSS`）[此 Flash 站点的](http://www.medianovak.com/)浮动溢出框，该框在鼠标悬停时居中。

有人可以指出我正确的方向吗？这是我到目前为止的代码，我做了一些非常简单和错误的`JQuery`代码，但我只是不知道如何将我`divs`的悬停居中。

**HTML**

```
<div id="header">
    <div id="menu">[NAV]</div>
    <div id="ContentPane" runat="server"></div>
</div>
<div id="front-floating-panes">
    <div class="front-floating-pane scroll-1" id="FloatingPane" runat="server">
        <p>Pane 1</p>
    </div>
    <div class="front-floating-pane scroll-2" id="FloatingPane2" runat="server">
        <p>Pane 2</p>
    </div>
    <div class="front-floating-pane scroll-3" id="FloatingPane3" runat="server">
        <p>Pane 3</p>
    </div>
    <div class="front-floating-pane scroll-4" id="FloatingPane4" runat="server">
        <p>Pane 4</p>
    </div>
    <div class="front-floating-pane scroll-5" id="FloatingPane5" runat="server">
        <p>Pane 5</p>
    </div>
    <div class="front-floating-pane scroll-6" id="FloatingPane6" runat="server">
        <p>Pane 6</p>
    </div>
</div> 
```

**CSS**

```
#front-floating-panes{position:fixed; width:100%; margin: 25px 0 25px 25px; overflow:hidden;  white-space: nowrap; }
.front-floating-pane{border:1px solid; display:inline-block; width:350px; height:300px; margin: 0 10px 0 0; background-color:#29F;  }
.front-floating-pane p{ background-color:#F60;} 
```

**查询**

```
<script type="text/javascript">
$(document).ready(function() {
    $(".scroll-1").hover(
    function() {
        $("#front-floating-panes").stop().animate({ left : "-20"}, 200 );
    },
    function(){
        $("#front-floating-panes").stop().animate({ left : "0"}, 200 );
    });

    $(".scroll-2").hover(
    function() {
        $("#front-floating-panes").stop().animate({ left : "-150"}, 200 );
    },
    function(){
        $("#front-floating-panes").stop().animate({ left : "0"}, 200 );
    });

    $(".scroll-3").hover(
    function() {
        $("#front-floating-panes").stop().animate({ left : "-200"}, 200 );
    },
    function(){
        $("#front-floating-panes").stop().animate({ left : "0"}, 200 );
    });

    $(".scroll-4").hover(
    function() {
        $("#front-floating-panes").stop().animate({ left : "-250"}, 200 );
    },
    function(){
        $("#front-floating-panes").stop().animate({ left : "0"}, 200 );
    });

    $(".scroll-5").hover(
    function() {
        $("#front-floating-panes").stop().animate({ left : "-300"}, 200 );
    },
    function(){
        $("#front-floating-panes").stop().animate({ left : "0"}, 200 );
    });

    $(".scroll-6").hover(
    function() {
        $("#front-floating-panes").stop().animate({ left : "-340"}, 200 );
    },
    function(){
        $("#front-floating-panes").stop().animate({ left : "0"}, 200 );
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:43:21.137

它们不是在悬停时“居中”，浮动框容器的移动方向与鼠标相反（尝试在窗口的任何部分水平移动鼠标）。因此，例如，如果鼠标向右移动 10px，则容器向左移动 -10px。

这两个值之间的关系将基于屏幕大小和容器大小的溢出。假设你的屏幕宽度是 960px，溢出是 480px，那么鼠标每移动 1px 应该移动包含半个像素

这些应该有帮助： [http ://docs.jquery.com/Tutorials:Mouse_Position#How_do_I_find_the_mouse_position.3F](http://docs.jquery.com/Tutorials:Mouse_Position#How_do_I_find_the_mouse_position.3F) [http://api.jquery.com/mousemove/](http://api.jquery.com/mousemove/)

（假设您要复制效果，而不是在悬停时将元素居中。如果是后者，您仍然需要抓住 mouseposition ）

# r - 关闭 ggplot 中的一些图例

> ID：14604435
> 
> 赞同：266
> 
> 时间：2013-01-30T12:49:46.813
> 
> 标签：r, ggplot2

假设我有一个带有多个图例的 ggplot。

```
mov <- subset(movies, length != "")
(p0 <- ggplot(mov, aes(year, rating, colour = length, shape = mpaa)) +
  geom_point()
) 
```

我可以像这样关闭所有图例的显示：

```
(p1 <- p0 + theme(legend.position = "none")) 
```

传递`show_guide = FALSE`给`geom_point`（根据[这个问题](https://stackoverflow.com/questions/12746523/preventing-a-second-legend)）关闭形状图例。

```
(p2 <- ggplot(mov, aes(year, rating, colour = length, shape = mpaa)) +
  geom_point(show_guide = FALSE)
) 
```

但是如果我想关闭颜色图例怎么办？似乎没有办法告诉`show_guide`将其行为应用于哪个图例。并且没有`show_guide`关于尺度或美学的论据。

```
(p3 <- ggplot(mov, aes(year, rating, colour = length, shape = mpaa)) +
  scale_colour_discrete(show_guide = FALSE) +
  geom_point()
)
# Error in discrete_scale

(p4 <- ggplot(mov, aes(year, rating, shape = mpaa)) +
  aes(colour = length, show_guide = FALSE) +
  geom_point()
)
#draws both legends 
```

[这个问题](https://stackoverflow.com/questions/11393123/controlling-ggplot2-legend-display-order)表明控制图例的现代（自 ggplot2 v0.9.2 以来）方式是使用`guides`函数。

我希望能够做类似的事情

```
p0 + guides(
  colour = guide_legend(show = FALSE) 
) 
```

但`guide_legend`没有表演论据。

如何指定显示哪些图例？

* * *

## 回答 #1

> 赞同：356
> 
> 时间：2013-01-30T12:55:00.840

您可以使用`guide = "none"`in`scale_..._...()`来抑制图例。

对于您的示例，您应该使用`scale_colour_continuous()`因为`length`是连续变量（不是离散的）。

```
(p3 <- ggplot(mov, aes(year, rating, colour = length, shape = mpaa)) +
   scale_colour_continuous(guide = "none") +
   geom_point()
) 
```

或者使用`guides()`您应该`"none"`为不想作为图例出现的元素/美学设置的功能，例如，`fill`, `shape`, `colour`。

```
p0 <- ggplot(mov, aes(year, rating, colour = length, shape = mpaa)) +
  geom_point()    
p0+guides(colour = "none") 
```

## 更新

两种提供的解决方案都适用于新`ggplot2`版本 3.3.5，但`movies`此库中不再存在数据集。相反，您必须使用新包`ggplot2movies`来检查这些解决方案。

```
library(ggplot2movies)
data(movies)
mov <- subset(movies, length != "") 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2018-09-04T07:23:59.423

您可以简单地添加`show.legend=FALSE`到 geom 以抑制相应的图例

# python - zipfile提取时出现unicode错误

> ID：14604438
> 
> 赞同：8
> 
> 时间：2013-01-30T12:49:57.860
> 
> 标签：python, zip, python-unicode

我有一个小脚本，可以提取一个 .zip 文件。这很好用，但仅适用于文件名中不包含带有“ä”、“ö”、“ü”（等等）等字母的文件的 .zip 文件。否则我会收到此错误：

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "threading.pyc", line 552, in __bootstrap_inner
  File "install.py", line 92, in run
  File "zipfile.pyc", line 962, in extractall
  File "zipfile.pyc", line 950, in extract
  File "zipfile.pyc", line 979, in _extract_member
  File "ntpath.pyc", line 108, in join
UnicodeDecodeError: 'ascii' codec can't decode byte 0x94 in position 32: ordinal not in range(128) 
```

这是我的脚本的提取部分：

```
zip = zipfile.ZipFile(path1)
zip.extractall(path2) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T13:01:53.337

一个建议：

当我这样做时，我得到了错误：

```
>>> c = chr(129)
>>> c + u'2'

Traceback (most recent call last):
  File "<pyshell#21>", line 1, in <module>
    c + u'2'
UnicodeDecodeError: 'ascii' codec can't decode byte 0x81 in position 0: ordinal not in range(128) 
```

有一个 unicode 字符串传递给某处加入。

可能是 zipfile 的文件路径是用 unicode 编码的吗？如果你这样做怎么办：

```
zip = zipfile.ZipFile(str(path1))
zip.extractall(str(path2)) 
```

或这个：

```
zip = zipfile.ZipFile(unicode(path1))
zip.extractall(unicode(path2)) 
```

这是 ntpath 中的第 128 行：

```
def join(a, *p): # 63
    for b in p: # 68
                path += "\\" + b  # 128 
```

第二个建议：

```
from ntpath import *

def join(a, *p):
    """Join two or more pathname components, inserting "\\" as needed.
    If any component is an absolute path, all previous path components
    will be discarded."""
    path = a
    for b in p:
        b_wins = 0  # set to 1 iff b makes path irrelevant
        if path == "":
            b_wins = 1

        elif isabs(b):
            # This probably wipes out path so far.  However, it's more
            # complicated if path begins with a drive letter:
            #     1\. join('c:', '/a') == 'c:/a'
            #     2\. join('c:/', '/a') == 'c:/a'
            # But
            #     3\. join('c:/a', '/b') == '/b'
            #     4\. join('c:', 'd:/') = 'd:/'
            #     5\. join('c:/', 'd:/') = 'd:/'
            if path[1:2] != ":" or b[1:2] == ":":
                # Path doesn't start with a drive letter, or cases 4 and 5.
                b_wins = 1

            # Else path has a drive letter, and b doesn't but is absolute.
            elif len(path) > 3 or (len(path) == 3 and
                                   path[-1] not in "/\\"):
                # case 3
                b_wins = 1

        if b_wins:
            path = b
        else:
            # Join, and ensure there's a separator.
            assert len(path) > 0
            if path[-1] in "/\\":
                if b and b[0] in "/\\":
                    path += b[1:]
                else:
                    path += b
            elif path[-1] == ":":
                path += b
            elif b:
                if b[0] in "/\\":
                    path += b
                else:
                    # !!! modify the next line so it works !!!
                    path += "\\" + b
            else:
                # path is not empty and does not end with a backslash,
                # but b is empty; since, e.g., split('a/') produces
                # ('a', ''), it's best if join() adds a backslash in
                # this case.
                path += '\\'

    return path

import ntpath
ntpath.join = join 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-11T00:36:59.087

出于便携的原因，也许你从 Windows 压缩文件并在 Linux 中解压它们，你可以将压缩文件中的所有文件路径转换为 ​​unicode，当从 zip 解压时，*不要*使用`ZipFile.extractall`，这个默认解压文件到磁盘并且不支持 unicode 路径在压缩文件中，试试这个：

```
import zipfile, sys, os,
zf = zipfile.ZipFile(sys.argv[1], 'r')
for m in zf.infolist():
    data = zf.read(m) # extract zipped data into memory
    # convert unicode file path to utf8
    disk_file_name = m.filename.encode('utf8')
    dir_name = os.path.dirname(disk_file_name)
    try:
        os.makedirs(dir_name)
    except OSError as e:
        if e.errno == os.errno.EEXIST:
            pass
        else:
            raise
    except Exception as e:
        raise

    with open(disk_file_name, 'wb') as fd:
        fd.write(data)
zf.close() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T12:56:03.677

清澈如水：消息指出*ASCII*解码器无法处理*非 ASCII*字符。您必须选择其他一些字符编码。

# r - 在一张图中绘制多个箱线图

> ID：14604439
> 
> 赞同：87
> 
> 时间：2013-01-30T12:49:57.177
> 
> 标签：r, plot, ggplot2, boxplot

我将数据保存为一个`.csv`包含 12 列的文件。第 2 到 11 列（标`F1, F2, ..., F11`有 ）是`features`。`Column one`包含`label`这些功能中的一个`good`或`bad`。

我想将`boxplot`所有*这 11 个功能*中的一个与`label`，但由`good`or分开`bad`。到目前为止，我的代码是：

```
qplot(Label, F1, data=testData, geom = "boxplot", fill=Label, 
          binwidth=0.5, main="Test") + xlab("Label") + ylab("Features") 
```

但是，这仅显示`F1`对`label`.

我的问题是：如何`F2, F3, ..., F11`在`label`一张图中显示一些`dodge position`？我已经对特征进行了标准化，因此它们在 [0 1] 范围内的比例相同。

测试数据可以在[**这里**](http://ge.tt/81I9owW/v/0?c)找到。我手绘了一些东西来解释这个问题（见下文）。

![手绘箱线图示例](../Images/f0e5e3445778efe8fe5c5007bb2df197.png)

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-01-30T14:00:48.517

在绘图之前，您应该通过融合数据来获取特定格式的数据（请参阅下文了解融合数据的外观）。否则，您所做的似乎还可以。

```
require(reshape2)
df <- read.csv("TestData.csv", header=T)
# melting by "Label". `melt is from the reshape2 package. 
# do ?melt to see what other things it can do (you will surely need it)
df.m <- melt(df, id.var = "Label")
> df.m # pasting some rows of the melted data.frame

#     Label variable      value
# 1    Good       F1 0.64778924
# 2    Good       F1 0.54608791
# 3    Good       F1 0.46134200
# 4    Good       F1 0.79421221
# 5    Good       F1 0.56919951
# 6    Good       F1 0.73568570
# 7    Good       F1 0.65094207
# 8    Good       F1 0.45749702
# 9    Good       F1 0.80861929
# 10   Good       F1 0.67310067
# 11   Good       F1 0.68781739
# 12   Good       F1 0.47009455
# 13   Good       F1 0.95859182
# 14   Good       F1 1.00000000
# 15   Good       F1 0.46908343
# 16    Bad       F1 0.57875528
# 17    Bad       F1 0.28938046
# 18    Bad       F1 0.68511766

require(ggplot2)
ggplot(data = df.m, aes(x=variable, y=value)) + geom_boxplot(aes(fill=Label)) 
```

![boxplot_ggplot2](../Images/a50460663b6245a24373c9dc924822ca.png)

**编辑：**我意识到你可能需要分面。这也是一个实现：

```
p <- ggplot(data = df.m, aes(x=variable, y=value)) + 
             geom_boxplot(aes(fill=Label))
p + facet_wrap( ~ variable, scales="free") 
```

![ggplot2_faceted](../Images/d95af814a3b742d510904b3ad327d509.png)

**编辑2：**如何添加`x-labels`、、、更改`y-labels`、添加？`title``legend heading``jitter`

```
p <- ggplot(data = df.m, aes(x=variable, y=value)) 
p <- p + geom_boxplot(aes(fill=Label))
p <- p + geom_jitter()
p <- p + facet_wrap( ~ variable, scales="free")
p <- p + xlab("x-axis") + ylab("y-axis") + ggtitle("Title")
p <- p + guides(fill=guide_legend(title="Legend_Title"))
p 
```

![ggplot2_geom_plot](../Images/03521937981a21c511026bda08b0614b.png)

**编辑 3：**如何将`geom_point()`点与箱线图的中心对齐？可以使用`position_dodge`. 这应该有效。

```
require(ggplot2)
p <- ggplot(data = df.m, aes(x=variable, y=value)) 
p <- p + geom_boxplot(aes(fill = Label))
# if you want color for points replace group with colour=Label
p <- p + geom_point(aes(y=value, group=Label), position = position_dodge(width=0.75))
p <- p + facet_wrap( ~ variable, scales="free")
p <- p + xlab("x-axis") + ylab("y-axis") + ggtitle("Title")
p <- p + guides(fill=guide_legend(title="Legend_Title"))
p 
```

![ggplot2_position_dodge_geom_point](../Images/a93b5883a7a8db933dd538fd287e508e.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-08-26T17:32:00.600

使用基础图形，我们可以`at =`用来控制盒子的位置，结合`boxwex =`盒子的宽度。第一条`boxplot`语句创建一个空白图。然后在以下两个语句中添加 2 个跟踪。

请注意，在下文中，我们使用`df[,-1]`从要绘制的值中排除第一（id）列。对于不同的数据框，可能需要将其更改为包含您要绘制的数据的列的子集。

```
boxplot(df[,-1], boxfill = NA, border = NA) #invisible boxes - only axes and plot area
boxplot(df[df$id=="Good", -1], xaxt = "n", add = TRUE, boxfill="red", 
  boxwex=0.25, at = 1:ncol(df[,-1]) - 0.15) #shift these left by -0.15
boxplot(df[df$id=="Bad", -1], xaxt = "n", add = TRUE, boxfill="blue", 
  boxwex=0.25, at = 1:ncol(df[,-1]) + 0.15) #shift to the right by +0.15 
```

[![在此处输入图像描述](../Images/a447adb3d82609448d97be54a1dbce50.png)](https://i.stack.imgur.com/tJEPp.png)

一些虚拟数据：

```
df <- data.frame(
  id = c(rep("Good",200), rep("Bad", 200)),
  F1 = c(rnorm(200,10,2), rnorm(200,8,1)),
  F2 = c(rnorm(200,7,1),  rnorm(200,6,1)),
  F3 = c(rnorm(200,6,2),  rnorm(200,9,3)),
  F4 = c(rnorm(200,12,3), rnorm(200,8,2))) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-01-30T14:37:18.707

由于您没有提及绘图包，因此我建议在这里使用`Lattice`版本（我认为 ggplot2 的答案比 lattice 的答案更多，至少因为我在这里）。

```
 ## reshaping the data( similar to the other answer)
 library(reshape2)
 dat.m <- melt(TestData,id.vars='Label')
 library(lattice)
 bwplot(value~Label |variable,    ## see the powerful conditional formula 
        data=dat.m,
        between=list(y=1),
        main="Bad or Good") 
```

![在此处输入图像描述](../Images/7425a59f0ae07d4fd02629a667a62e2d.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-30T16:00:35.020

格子图的 ggplot 版本：

```
library(reshape2)
library(ggplot2)
df <- read.csv("TestData.csv", header=T)
df.m <- melt(df, id.var = "Label")

ggplot(data = df.m, aes(x=Label, y=value)) + 
         geom_boxplot() + facet_wrap(~variable,ncol = 4) 
```

**阴谋：** ![在此处输入图像描述](../Images/d920743d691dfb33a08106d9dd9231d1.png)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-08-26T15:08:55.150

我知道这是一个较老的问题，但它也是我的问题，虽然接受的答案有效，但有一种方法可以在*不*使用 ggplot 或 lattice 等额外软件包的情况下做类似的事情。箱线图重叠而不是并排显示并不是很好，但是：

```
boxplot(data1[,1:4])
boxplot(data2[,1:4],add=TRUE,border="red") 
```

[![这是做什么的图片。](../Images/3609a012af46841b87a98e553a05d90d.png)](https://i.stack.imgur.com/5nE6l.png)

这放入了两组箱线图，第二组的轮廓（无填充）为红色，并且异常值也为红色。好消息是，它适用于两个不同的数据帧，而不是试图重塑它们。快速而肮脏的方式。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-10-08T12:42:35.443

`:`在基础 R 中，可以使用带有交互作用 ( ) 的公式接口来实现这一点。

```
df <- read.csv("~/Desktop/TestData.csv")
df <- data.frame(stack(df[,-1]), Label=df$Label) # reshape to long format

boxplot(values ~ Label:ind, data=df, col=c("red", "limegreen"), las=2) 
```

[![例子](../Images/fb39594eabf780f829cfbc5eb9231cbc.png)](https://i.stack.imgur.com/yKppP.png)

# php - 在 PHP 游戏中每分钟更新一次数据库

> ID：14604443
> 
> 赞同：0
> 
> 时间：2013-01-30T12:50:10.930
> 
> 标签：php

我最近开始用 PHP 编程。作为练习，我想构建自己的 PHP 文本策略游戏。一个技术方面需要一些思考。

在我的游戏中，每个玩家都必须具备获取资源的能力，例如铁和谷物。有了这些资源，玩家就可以招募士兵或建造建筑物。资源存储在一种仓库中。

资源会在一段时间内获得。例如，您每小时获得 100 粒谷物，并且该谷物储存在仓库中。这意味着每 0.6 分钟必须添加 1 个谷物。我一直在寻找 cron 作业，但这不是解决我的问题的最佳答案，因为它占用了太多系统资源。问题是我希望能够每分钟更新我仓库中的资源。有人对我的问题有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:18:57.570

与其尝试通过更新状态来解决这个问题，不如尝试以函数式编程的方式解决它。例如，在给定已知条件（例如生产开始时）的情况下，编写一个可以计算资源量的函数。非常简化：

基于状态的模型：

```
class Gold {
  public $amount = 0;
}

class GoldDigger {
  public $amount_per_second = 1;
}

$player_gold = new Gold();
$player_worker = new GoldDigger();
while (true) {
  $player_gold->amount += $player_worker->amount_per_second;
  sleep(1);
  echo "Player has {$player_gold->amount} gold pieces\n";
} 
```

基于功能的模型：

```
class Gold {
  public $workers = array();
  function getAmount() {
    $total = 0;
    foreach ($this->workers as $worker) {
      $total += $worker->getAmount();
    }
    return $total;
  }
}

class GoldDigger {
  public $amount_per_second = 1;
  public $started = 0;
  function __construct() {
    $this->started = time();
  }
  function getAmount() {
    return $this->amount_per_second * (time() - $this->started);
  }
}

$player_gold = new Gold();
$player_gold->workers[] = new GoldDigger();

while (true) {
  sleep(1);
  echo "Player has {$player_gold->getAmount()} gold pieces\n";
} 
```

这两个例子都有点做作——您可能会将数据存储在数据库或类似数据库中，这会使事情变得有些复杂，但我希望它能够说明两种策略之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T12:52:11.443

您可能需要为此使用守护程序。查看[Gearman](http://php.net/manual/en/book.gearman.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:04:04.463

当用户（或其他人）请求其数量时，您可以更新资源。如果您可以计算出玩家在给定时间间隔内将获得多少资源，那么您可以稍后简单地添加它们。您只需要存储上次更新的时间。

**例子：**

玩家在 01:00 查看仓库，他发现那里有 50 粒粮食，当前收入为每小时 100 粒粮食。于是他上床睡觉，第二天早上 09:00（8 小时后）再次检查仓库。现在他可以看到 50 粒 + 8 小时 * 100 粒/小时 = 850 粒。

但是服务器上的数据看起来像这样：

*   01:01：“50 粒，最后更新时间 01:00”
*   05:00：“50 粒，最后更新时间 01:00”
*   08:59：“50 粒，最后更新时间 01:00”
*   09:01：“850 粒，最后更新时间 09:00”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:02:37.477

您可以使用缓存但经常更新某些内容（当您有很多玩家时）可能会导致问题，而不是消耗服务器上的资源，您可以尝试存储上次请求值的时间戳并计算玩家从现在开始生成了多少“谷物”（LastAccessedTimestamp-NowTimestamp）= 已经过去的时间（例如，5 分钟）

## 5 分钟 * 60 秒 = 300 秒通过

## 300 秒 / 0.6 秒 = 5 分钟内 500 粒谷物

或者您可以让客户端 javascript 向播放器显示仓库有 X Grains 并仅在客户端更新它，如果没有用户活动，每 1 或 3 分钟发送一次 ajax 请求以同步事物，否则每次更新用户发送一个动作或其他东西。

# php - 如何拒绝上传的包含 PHP 中可执行附件的 PDF 文件？

> ID：14604447
> 
> 赞同：0
> 
> 时间：2013-01-30T12:50:20.337
> 
> 标签：php, windows, validation, pdf

到目前为止，我已经能够通过分析文件的结构来检测有效的 PDF。我正在尝试检测 pdf 文件可能附加/隐藏的任何可执行文件。有没有可以用来提取附件并分析它们的库？

*我使用 ClamAV 来检测任何恶意内容，它运行良好，但它需要我组织中的架构师的批准，这需要时间或者可能根本不会发生 :-(，所以在那之前我需要一个好的解决方案。

* php 脚本在 Apache (Windows) 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:08:45.567

我想说对所有上传的内容使用防病毒软件是一件好事，甚至还有 ClamAV php 扩展。下一步是验证 pdf 是否真的是 pdf - 您可以检查文件的开头是否以

> %PDF-

在谈论可能在 pdf 中的内容时，防病毒软件应该能够检测到那里的任何隐藏的 boogies，但如果可能的话，还要由 pdf 查看器来确保安全，而不是 Adob​​e Reader。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:54:32.180

如果您使用 linux，请尝试列出存档中的文件并检查是否有可执行文件。这可能会有所帮助[https://superuser.com/questions/216617/zip-linux-view-files-in-archive](https://superuser.com/questions/216617/zip-linux-view-files-in-archive)

# c# - asp.net RegularExpressionValidator 和复杂的正则表达式（区分大小写开关）

> ID：14604450
> 
> 赞同：3
> 
> 时间：2013-01-30T12:50:30.027
> 
> 标签：c#, asp.net, regex, validation

我正在使用带有非常复杂的正则表达式的 ASP 的 RegularExpressionValidator。这个已经很好用了：

```
(?=^.{10,}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[+#<>;.,:|\\-@*!\"§$%&/()=?`´]).*$ 
```

但是我必须扩展它以添加检查当前用户名是否是密码的一部分（不区分大小写）。

例如用户名为 Meier 用户不得创建密码

> i012k34KmeIer567+

所以我将表达式更改为

```
(?=^.{10,}$)(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[+#<>;.,:|\\-@*!\"§$%&/()=?`´])(?i)(?!.*meier)(?-i).*$ 
```

并将其添加到`asp:RegularExpressionValidator`as `ValidationExpression`。

不幸的是，这样做时，我在添加密码时在浏览器中出现错误：

```
"SyntaxError: invalid quantifier" 
```

浏览器显示的有问题的代码是：

```
function RegularExpressionValidatorEvaluateIsValid(val) {
    var value = ValidatorGetValue(val.controltovalidate);
    if (ValidatorTrim(value).length == 0)
        return true;
    **var rx = new RegExp(val.validationexpression);**
    var matches = rx.exec(value);
    return (matches != null && value == matches[0]);
} 
```

带有 的行`"**"`是有问题的行。

我也试过了`RegEx.IsMatch`，但是我的正则表达式在那里工作。有谁知道我该如何解决这个问题，或者谁能告诉我我做错了什么？

非常欢迎任何帮助！:) 请不要犹豫，问我是否描述得不够好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:38:05.800

除非您设置`EnableClientScript="False"`禁用客户端验证，请参阅[msdn](http://msdn.microsoft.com/en-us/library/eahwtc9e%28v=vs.71%29.aspx)，否则您的表达式将需要对 Javascript 的正则表达式引擎有效。

这就是`var rx = new RegExp(val.validationexpression);`导致错误的原因，您的表达无效。

Javascript 不支持内联区分大小写标志`(?i)`，`(?-i)`并且您的长字符类需要修订

```
 [+#<>;.,:|\\@*!"§$%&/()=?`´-] 
```

而且由于您不能仅针对 Javascript 中的密码负前瞻打开不区分大小写，因此最好单独测试密码。

# java - 我的 web.xml 不知道 taglib 标签

> ID：14604452
> 
> 赞同：3
> 
> 时间：2013-01-30T12:50:34.087
> 
> 标签：java, web.xml, taglib, struts-1

我想在我的jsp中使用html标签，所以当我将这些行添加到web.xml时，我必须在web.xml中添加标签库：

```
<taglib>
    <taglib-uri>/tags/struts-html</taglib-uri>
    <taglib-location>/WEB-INF/struts-html.tld</taglib-location>
</taglib> 
```

它不知道 taglib 标签

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T13:06:56.510

较新版本的 JSP/Servlet 容器不需要 taglib 条目，`web.xml`因为容器会自动找到它。

您只需要`<%@ taglib %>`JSP 页面中的指令来使用 .tld 文件：

```
<%@ taglib prefix="html" uri="/WEB-INF/struts-html.tld" %> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T13:04:16.427

`<taglib>`标签必须在`<jsp-config>`标签内。

但是使用`Struts2`，你绝对不需要`struts-html`taglib，它来自 Struts 1，它更老，而且*完全*不同。

只需浏览一下`Struts2`功能，您就会发现您不必再使用 html-tags 了，幸运的是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-01T04:27:08.813

可以通过三种方式配置标签库。

1.  **手动配置抛出`web.xml`：**确保将**tld**文件复制到`WEB-INF`文件夹，按如下方式配置它们，`web.xml`在 taglib 指令中使用 taglib 指令属性作为`<%@ taglib uri="mytagliburi" prefix="ww" %>`.

.

```
<taglib>
         <taglib-uri>mytagliburi</taglib-uri>
         <taglib-location>/WEB-INF/struts-bean.tld</taglib-location>
</taglib> 
```

2.  **`taglib`仅使用指令手动配置**：确保将**tld**文件复制到`WEB-INF`文件夹，并将 taglib 目录中的直接配置为`<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="ww" %>`.
3.  **自动配置：**这是一种简单的方法，在 Struts 1.2 版中使用，只需将其包含`struts-taglib.jar`在您的项目中`classpath`或将其复制到`WEB-INF/lib`文件夹中即可。所有`tld`细节都在`struts-taglib.jar\META-INF\tld`文件夹内定义。在部署期间，所有 tld 将自动部署。但是，我们只能通过`pre-fixed uri`名称访问它。在这种方法中，我们不允许更改`taglib uri`名称。

# java - 为什么这个比较返回假？

> ID：14604458
> 
> 赞同：0
> 
> 时间：2013-01-30T12:50:52.353
> 
> 标签：java

> **可能重复：**
> [为什么 Double.NaN==Double.NaN 返回 false？](https://stackoverflow.com/questions/8819738/why-does-double-nan-double-nan-return-false)

这纯粹是出于好奇。

我做了这样的事情：

```
public static void main(String args[]) throws Exception {
        System.out.println(Double.NaN==Double.NaN);
    } 
```

输出是`false`。这不应该返回`true`吗？

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T12:52:02.150

来自[Java 语言规范](http://docs.oracle.com/javase/specs/)：

> 浮点运算符不会产生异常（§11）。上溢运算产生有符号无穷大，下溢运算产生非规格化值或有符号零，而没有数学确定结果的运算产生 NaN。所有以 NaN 作为操作数的数值运算都会产生 NaN 作为结果。如前所述，NaN 是无序的，因此涉及一个或两个 NaN 的数值比较操作返回 false，任何涉及 NaN 的 != 比较都返回 true，包括当 x 为 NaN 时的 x!=x。

这里重要的一句话是：

> 因此涉及一个或两个 NaN 的数值比较操作返回 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:58:11.690

为了比较两个 Doubles 更好地使用该方法，`#compareTo(Double)`它能够以分开的方式处理。`NaN``XXX_INFINITY`

> 以数字方式比较两个 Double 对象。当应用于原始双精度值时，此方法执行的比较与 Java 语言数值比较运算符（<、<=、==、>=、>）执行的比较有两种不同之处：
> 
> 此方法认为 Double.NaN 等于其自身并且大于所有其他双精度值（包括 Double.POSITIVE_INFINITY）。此方法认为 0.0d 大于 -0.0d。这确保了此方法强加的 Double 对象的自然排序与 equals 一致。

```
public static void main(String[] args) {
  Double d = new Double(Double.NaN);
  System.out.println(d.compareTo(Double.NaN) == 0);//returns true
} 
```

# html - 三列内部有自动换行但元素之间没有换行符

> ID：14604460
> 
> 赞同：2
> 
> 时间：2013-01-30T12:50:54.213
> 
> 标签：html, css, css-float, word-wrap, multiple-columns

我正在尝试实现以下布局：

```
 +--------------------+  +-------------------+ +--------------------+ 
 | Right column with  |  | small center with | | Right column with  |
 | multiple lines and |  | fixed width       | | multiple lines and | 
 | width of           |  |                   | | width of           |
 | (100%-center)/2    |  |                   | | (100%-center)/2    |
 +--------------------+  +-------------------+ +--------------------+ 
```

但是使用我当前的标记，而不是在其自身内部引入换行符，一旦其内容变得太大而无法容纳该行，右列将移动到其余列下方：

```
 +--------------------+  +-------------------+ 
 | Right column with  |  | small center with | 
 | multiple lines and |  | fixed width       | 
 | width of           |  |                   | 
 | (100%-center)/2    |  |                   | 
 +--------------------+  +-------------------+ 

 +-------------------------------------------+ 
 | Right column with multiple lines and...   |
 +-------------------------------------------+ 
```

这是我当前的标记：

```
<div style="text-align: center;">
    <span style="float: left;">left</span>
    <span>center</span>
    <span style="float: right;">right</span>
</div> 
```

如何实现所需的布局？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:48:18.670

您可以在不修改标记的情况下执行此操作：

```
.container {
    display: table;
}
.container span {
    display: table-cell;
}

<div class="container">
    <span>left</span>
    <span>center</span>
    <span>right</span>
</div> 
```

[http://jsfiddle.net/R3X4q/](http://jsfiddle.net/R3X4q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:23:57.280

对我来说看起来像一张桌子？

```
<div style="text-align: center;">
    <table style="width:100%;border-spacing:0px;">
        <tr>
            <td style="float: left;">left</td>
            <td style=" width: 100px; margin: 0 auto auto auto;">center</td>
            <td style="float: right;">right</td>
        </tr>
    </table>
</div> 
```

# java - Eclipse 在导出的 jar 中保留有关断点的信息？

> ID：14604461
> 
> 赞同：2
> 
> 时间：2013-01-30T12:51:00.970
> 
> 标签：java, eclipse, jar, remote-debugging, jpda

我正在关注这篇关于[使用 Eclipse 进行远程调试的](http://www.ibm.com/developerworks/java/library/os-eclipse-javadebug/index.html)文章，我很惊讶：

```
Debug an application remotely (sub title)
...
2\. Set a breakpoint
...
4\. Export the Java project
5\. Run the Java application manually
6\. Debug the application remotely 
```

这实际上意味着断点信息保存在导出的 jar 文件中。

这是真的吗？**导出 jar 时如何禁用它？**

**机制是什么，它是否保存在 .class 中，以字节码的形式存在？**

然后我在没有指定项目的情况下创建了远程调试配置并开始调试。根据堆栈跟踪，导出 jar 的执行确实在正确的位置下断点。

![在此处输入图像描述](../Images/48c390f2af6a881871f7d50848572122.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T12:56:06.653

不，Eclipse 不会将断点导出到 jar 文件。它将它们保存在自己的工作区中，例如当正在运行的应用程序遇到设置了断点的代码时，它就会相应地采取行动。

# jquery - bxslider 中的 bxslider - jquery

> ID：14604463
> 
> 赞同：2
> 
> 时间：2013-01-30T12:51:05.210
> 
> 标签：jquery, bxslider

我有一个使用 bxslider 的非常基本的滑块。

我想在 bxslider 本身内运行另一个画廊。

请看这个小提琴：http: [//jsfiddle.net/CHeLE/6/](http://jsfiddle.net/CHeLE/6/)

**当单击 Gallery Next/Prev 时，您可以看到辅助图库始终返回相同的图像。为什么？它应该显示其他图像。**

为什么会发生这种情况是没有意义的，请在下面查看我的代码..

```
$(function () {

    var slider = $('ul#slider').bxSlider({
        infiniteLoop: true,
        controls: false,
        mode: 'horizontal',
        touchEnabled: false,
        pager: false
    });

    $('a.slide-next').click(function () {
        slider.goToNextSlide();
        return false;
    });

    $('a.slide-prev').click(function () {
        slider.goToPrevSlide();
        return false;
    });

});

$(function () {

    var gallery3 = $('#gallery3 ul.gallery').bxSlider({
        infiniteLoop: true,
        controls: false,
        mode: 'fade',
        touchEnabled: false,
        pager: false
    });

    $('#gallery3 a.gallery-next').click(function () {
        gallery3.goToNextSlide();
        return false;
    });

    $('#gallery3 a.gallery-prev').click(function () {
        gallery3.goToPrevSlide();
        return false;
    });

}); 
```

这是我的标记

```
<div class="wrapper">

    <ul id="slider">

        <li class="slide" style="background:black"></li>

        <li id="gallery3" class="slide" style="background:blue">

            <div class="gallery-wrapper">

                <ul class="gallery">

                    <li>

                        <img src="http://www.columbus-international.com/images/heroes/tour_trackday_tuscany.jpg" alt=""/>
                        <img src="http://www.wikipedy.com/images_m/motorbike_kids_s.jpg" alt=""/>

                        <img src="http://static.ddmcdn.com/gif/storymaker-best-hubble-space-telescope-images-20092-514x268.jpg" alt=""/>

                    </li> 

                </ul>

            </div>

            <a class="gallery-next" href="#">Gallery Next</a>
            <a class="gallery-prev" href="#">Gallery Prev</a>

        </li>

        <li class="slide" style="background:cyan"></li>
        <li class="slide" style="background:magenta"></li>

    </ul>

</div>

<a class="slide-next" href="#">Next</a>
<a class="slide-prev" href="#">Prev</a> 
```

谁能帮我理解为什么我的[小提琴](http://jsfiddle.net/CHeLE/6/)不能正常工作？

提前致谢。

[http://jsfiddle.net/CHELE/6/](http://jsfiddle.net/CHeLE/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-24T14:50:06.367

## 演示的标记 (HTML) 有错误：

*   嵌套库`<ul class="gallery">`只有一个列表项`<li>`作为唯一的直接子项。根据文档

> [默认情况下，bxSlider 将使用滑块元素的所有直接子元素](http://bxslider.com/options)

*   每个都`<img>`应该包含在一个列表项标签中`<li><img src="image.png"/></li>`
*   **或者**`<li>`应该删除，所以 3将`<img>`是的直接子级`<ul class="gallery">`
*   **或者**`slideSelector: 'img'`如果您使用bxSlider 选项，原始标记将起作用。
*   原始图像不起作用，它们被工作图像所取代。

## HTML

```
 <div class="wrapper">
    <ul id="slider">
        <li class="slide" style="background:black"></li>
        <li id="gallery3" class="slide" style="background:blue">
            <div class="gallery-wrapper">
                <ul class="gallery">
                    <li>
                        <img src="http://placehold.it/720x500/000/fff.png&text=SLIDE+1"/>
                    </li>
                    <li>
                        <img src="http://placehold.it/720x500/00e/fc0.png&text=SLIDE+2"/>
                    </li>
                    <li>
                        <img src="http://placehold.it/720x500/fff/000.png&text=SLIDE+3"/>
                    </li>
                </ul>
            </div> 
            <a class="gallery-next" href="#">Gallery Next</a>
            <a class="gallery-prev" href="#">Gallery Prev</a>

        </li>
        <li class="slide" style="background:cyan"></li>
        <li class="slide" style="background:magenta"></li>
    </ul>
</div>
<a class="gallery-next" href="#">Gallery Next</a>
<a class="gallery-prev" href="#">Gallery Prev</a> 
```

## 演示脚本 (JS(jQuery)) 需要改进：

*   嵌套画廊 JS 有太多的限定符，比如`$("#gallery a.gallery-next")`作品`$("a.gallery-next")`

## jQuery

```
$(function () {    
    var slider = $('ul#slider').bxSlider({
        infiniteLoop: true,
        controls: false,
        mode: 'horizontal',
        touchEnabled: false,
        pager: false
    });

    $('a.slide-next').click(function () {
        slider.goToNextSlide();
        return false;
    });

    $('a.slide-prev').click(function () {
        slider.goToPrevSlide();
        return false;
    });

    var gallery3 = $('ul.gallery').bxSlider({
        infiniteLoop: true,
        controls: false,
        mode: 'fade',
        touchEnabled: false,
        pager: false
    });

    $('a.gallery-next').click(function () {
        gallery3.goToNextSlide();
        return false;
    });

    $('a.gallery-prev').click(function () {
        gallery3.goToPrevSlide();
        return false;
    });

}); 
```

[查看更新的演示](http://jsfiddle.net/zer00ne/CHeLE/33/)

# android - 为什么视频视图大小会根据视频大小自动更改？

> ID：14604468
> 
> 赞同：5
> 
> 时间：2013-01-30T12:51:15.027
> 
> 标签：android, video, android-videoview

嗨，我已经创建了视频查看应用程序，它工作正常。但是我的视频视图大小会根据视频的高度和宽度自动更改，但我希望以视频视图大小播放视频如何解决此问题。

这是我的代码：

```
public class MainActivity extends Activity {

    String SrcPath = "/sdcard/maatraan.3gp";

       /** Called when the activity is first created. */
       @Override
       public void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_main);
           VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
           myVideoView.setVideoURI(Uri.parse(SrcPath));
           myVideoView.setMediaController(new MediaController(this));

           myVideoView.requestFocus();
           myVideoView.start();
       }

    } 
```

xml代码：

```
<VideoView
   android:id="@+id/myvideoview"
   android:layout_width="400dp"
   android:layout_height="400dp" />
</LinearLayout> 
```

我手动定义视频视图高度和宽度的值，如果我以这个高度和宽度播放视频，自动更改视频高度和宽度的高度和宽度我不需要更改视频视图大小，我需要根据视频视图更改视频大小高度和宽度屏幕尺寸就是这样......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T13:29:11.950

是的，它很奇怪，我面临同样的情况，实际上我希望视频处于全屏模式，我尝试将主布局保持为相对并且 VideoView 的所有对齐方式都为 true，并且它有效。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/videoView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:keepScreenOn="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true"
        />

</RelativeLayout> 
```

# jquery - Firefox 和 Opera 未添加基于视点的活动类

> ID：14604470
> 
> 赞同：0
> 
> 时间：2013-01-30T12:51:22.447
> 
> 标签：jquery, firefox, scroll, anchor, opera

各位开发者您好！

我遇到了一个我无法解决的问题，主要是因为我对 javascript 的了解有限。

这是一个例子： http: [//funkypixels.lv/scroll-problem/](http://funkypixels.lv/scroll-problem/) 这里没什么花哨的 - 只是在块之间滑动 class="current" 应用于列表菜单！现在继续并单击该链接，该链接指向一个带有链接+锚的页面，该链接返回 index.html 并应突出显示第三个菜单

*   . 这适用于 Chrome 和 IE9，但不适用于 Firefox 和 Opera。在 Firefox/Opera 上，仅当我稍微滚动页面时才应用该类。

    我尝试了其他几个插件，它们在 Firefox/Opera 上都有相同的问题！

    jquery.nav.js 在 IE9 上存在问题，但由于我尝试过的所有其他插件在 Firefox/Opera 上都失败了，因此关于这些类型的插件所基于的想法似乎有问题。

    如果有人可以帮助我或指出问题所在以及应该如何解决，我将不胜感激！

    * * *

    PS。

    一个可能会解决这个问题的愚蠢想法是在加载时将页面垂直拉动 1px，但问题是 - 滚动到哪里？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:29:33.380

编写该脚本是为了在页面滚动时检查滚动事件并更新导航，所以您看到这种效果我并不感到惊讶。您可能想在此处向脚本作者报告问题：

[http://github.com/davist11/jQuery-One-Page-Nav](http://github.com/davist11/jQuery-One-Page-Nav)

修复它的合适方法可能是不仅要监听滚动，还要监听 hashchange 事件并相应地更新导航样式。

# java - Java远程调试：maven 2.2.1

> ID：14604472
> 
> 赞同：2
> 
> 时间：2013-01-30T12:51:25.937
> 
> 标签：java, eclipse

嗨：我有一个多线程 J2SE 应用程序并使用 maven，我的 IDE 是 eclipse。在 maven 2.2.1 中，有 mvnDebug 将端口 8000 作为远程端口打开。

我运行 mvn`-clean test -Dtest=TestClass`

然后我配置 Eclipse 远程 Java 应用程序并将主机设置为`localhost`, 端口`8000`, 附加类型。

我把断点放在`TestClass`. 问题/问题是`mvn`命令在断点处根本没有停止运行。我尝试将断点作为挂起线程或挂起 JVM。两者都不起作用。

这个论坛中的人可以给我一些提示我错过了哪一步吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:02:48.103

这是我使用的命令：

```
mvn test -Dtest=TestClass -Dmaven.surefire.debug="-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000 -Xnoagent -Djava.compiler=NONE" 
```

*   `address=8000`为 JDB 定义地址
*   `suspend=y`定义 JVM 将在启动时停止并等待调试器连接。设置为`n`像往常一样开始，不停止。如果您想调试上下文启动，此选项可能很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:02:03.943

试试surefire插件 mvn clean test -Dmaven.surefire.debug

# vbscript - VBscript 从 Outlook 中检索数据

> ID：14604473
> 
> 赞同：1
> 
> 时间：2013-01-30T12:51:29.980
> 
> 标签：vbscript, outlook.application

我需要使用 VBscript 从 Outlook 服务器中检索全名、职位名称等几个字段。

```
Set oNetwork = CreateObject("WScript.Network")
sDomain = oNetwork.UserDomain
sADSPath= sDomain & "/" & sUser
Set oUser = GetObject("WinNT://" & sADSPath & ",user")
if err.number <> 0 then
objTextFile.WriteLine (sUser)
else
objTextFile.WriteLine (oUser.FullName)
End If 
```

如果 sUser 中给出了 id，则上述脚本可用于获取全名。但是线

```
objTextFile.WriteLine (oUser.JobTitle) 
```

没有以相同的方式检索标题字段。请让我知道使用什么属性来从 Outlook 中检索经理姓名和职位以及位置详细信息等字段。

注意：我使用的是 Outlook 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:51:03.190

上面的代码根本不使用 Outlook。
你的代码在哪里运行？它是 COM 插件还是独立应用程序？
您是否查看过 Outlook 对象模型中的 Application.Session.CurrentUser？[您可以使用 Recipient.AddressEntry.GetExchangeUser 检索 ExchangeUserObject 或使用 AddressEntry.PropertyAccessor 检索原始 MAPI 属性 - 查看OutlookSpy](http://www.dimastr.com/outspy)
中的可用属性（及其 DASL 名称）（单击 IMAPISession 按钮，然后单击 QueryIdentity）。

# ios - 有没有办法为某个城市争取时间？

> ID：14604483
> 
> 赞同：-4
> 
> 时间：2013-01-30T12:51:41.447
> 
> 标签：ios, cocoa

我想知道是否有一种简单的方法可以获取给定城市的时间。例如，我想知道纽约现在几点。我的数据中有纬度/经度，所以我可以使用这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:13:22.803

这是我的答案，使用 halfer 技巧

```
- (void)getWorldClock:(float)lat:(float)lon
{
    NSString *thisWorldTime = [[NSString alloc]init];

    NSString *urldata=[[NSString alloc]initWithFormat:@"http://www.earthtools.org/timezone-1.1/%f/%f", lat, lon];

    NSString *encoding = [urldata stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

    NSLog(@"URL :%@",encoding);

    TBXML *tbxml =[TBXML tbxmlWithURL:[NSURL URLWithString:encoding]];
    TBXMLElement *root = tbxml.rootXMLElement;

    if (root) {
        TBXMLElement *isoTime = [TBXML childElementNamed:@"isotime" parentElement:root];
        NSLog(@"Time in %f %f is %@", lat, lon, [TBXML textForElement:isoTime]);        
    }

    [thisWorldTime release]; 
```

}

您必须提供城市的纬度和经度。Tom Bradley 的 TBXML 类[http://www.tbxml.co.uk/TBXML/TBXML_Free.html](http://www.tbxml.co.uk/TBXML/TBXML_Free.html)

# php - 从其他页面检索内容

> ID：14604484
> 
> 赞同：1
> 
> 时间：2013-01-30T12:51:45.577
> 
> 标签：php, jquery, html

这是对上一个问题的跟进。

我有一个图标单击它时图标更改并调用`go.php?go=` 当您再次单击它时图标恢复为原始图标并调用`go.php?stop=`

这行得通。目前 go.php 只是将正确的信息写入文本文件，理想情况下，我希望看到 go.php 的输出反映到具有图标的父页面上的 DIV 中。

我怎么做 ？

这是我到目前为止所拥有的..

```
<script language="javascript">
$(function () {
    $('a.tip').on(' click', function () {
        var $this = $(this),
            container = $('#x')
            prevHTML = container.html(),
            req = {};

        if ( $this.hasClass('go') ) {
            $this.find('img').attr('src', 'images/go.gif');
            $this.removeClass('go');
            req = $.ajax({
                url: 'go.php?go=' + $this.attr('id'),
                type: 'get',
                success: function ( data ) {
                    container.html(x);
                    $this.removeClass('go');
                }
            });
        } else {
            $this.find('img').attr('src', 'images/stop.gif')
                .end().addClass('go');
            req = $.ajax({
                url: 'go.php?stop=' + $this.attr('id'),
                type: 'get',
                success: function ( data ) {
                    container.html( x );
                    $this.removeClass('go');
                }
            });
        }
    });
});
</script>    

<a href='#' class='tip' id='4a' onclick=\"load('#');return false;\">
    <img src='images/go.gif'>
</a>
<a href='#' class='tip' id='6a' onclick=\"load('#');return false;\">
    <img src='images/go.gif'>
</a>
<a href='#' class='tip' id='8a' onclick=\"load('#');return false;\">
    <img src='images/go.gif'>
</a> 
```

go.php 包含：

```
<?php
   $s = (isset($_REQUEST['go'])) ? "GO".$_REQUEST['go'] : "STOP".$_REQUEST['stop'];
   $myFile = "TESTTEST.txt";
   $fh = fopen($myFile, 'w') or die("can't open file");
   $stringData = $s;
   fwrite( $fh, $stringData );
   fclose( $fh );
   echo $s;
?> 
```

更新：这似乎工作：

```
<script language="javascript">
$(function () {
    $('a.tip').on(' click', function () {
        var $this = $(this),
            container = $('#x')
            prevHTML = container.html(),
            req = {};

        if ($this.hasClass('go')) {
            $this.find('img').attr('src', 'images/ok.gif');
            $this.removeClass('go');
            req = $.ajax({
                url: 'go.php?go=' + $this.attr('id'),
                type: 'get',
                success: function (data) {
                    container.html(data);
                    $this.removeClass('go');
                }
            });
        } else {
            $this.find('img').attr('src', 'images/error.gif')
                .end().addClass('go');
            req = $.ajax({
                url: 'go.php?stop=' + $this.attr('id'),
                type: 'get',
                success: function (data) {
                    container.html(data);
                }
            });
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T12:57:09.427

您只需要更改此行：

```
container.html(x); 
```

对此：

```
container.html(data); 
```

`data`是包含从 AJAX 请求返回的文本的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:00:38.180

```
container.html(x); 
```

本来应该

```
container.html(data); 
```

# android - Android 库回答等待

> ID：14604486
> 
> 赞同：0
> 
> 时间：2013-01-30T12:51:48.890
> 
> 标签：android, multithreading

我有一个处理智能卡的库。它有一个异步函数，当它完成时会向我发送一个答案。好吧，我在主 UI 线程中调用了这个函数。我为该库提供了一个处理程序类（消息处理程序）。我的问题是：我需要停止我的主线程并等待该函数的回答，之后我需要执行另一个步骤。怎么做？

我已经尝试过使用 CountDownLatch - 但是当我调用 await() 函数时，我永远不会从库中得到答案（我认为该库正在 ui 线程中调用我的答案处理程序类，因此它也会进入无限等待）。

# image - CI 中的文件上传错误

> ID：14604487
> 
> 赞同：1
> 
> 时间：2013-01-30T12:51:56.437
> 
> 标签：image, codeigniter, file-upload

我在 CodeIgniter 中使用多文件上传模块；脚本完全成功，只是一个简单的错误，可能是一个愚蠢的错误正在发生。

首先我想分享一个概念。在一个网站中，人们现在使用他们的电子邮件 ID 进行注册，当人们使用电子邮件 ID 进行注册时，该人的文件夹会在服务器中以电子邮件 ID 的名称创建。假设我通过电子邮件 id 在站点中注册`saswat.saz.routroy@gmail.com`，然后当我登录时会话以`$_SESSION['logged_user']="saswat.saz.routroy@gmail.com"`.

同样，当我注册时，会在服务器中创建一个名为 的文件夹`saswat.saz.routroy@gmail.com`。现在我想将图像上传到文件夹“saswat.saz.routroy@gmail.com”。

我正在使用脚本

```
foreach($_FILES['photo']['name'] as $key=>$val)
          {
             if($_FILES['photo']['name'][$key]=="")
                {
                  //return "Successfully Added";
                }
             else if($_FILES['photo']['name'][$key]!='' && ($_FILES['photo']['type'][$key]='jpeg'
                     || $_FILES['photo']['type'][$key]='jpg' || $_FILES['photo']['type'][$key]='JPG'
                     || $_FILES['photo']['type'][$key]='JPEG') )
                {

                      $f_name=$_FILES['photo']['name'][$key];
                      $s_name=array();
                      $s_name=explode('.',$f_name);
                      $name=$s_name[0];
                      $name="(".$order_date.")".$name;
                      $slug= $name;
                      $slug = trim($slug," ");
                      $slug = trim($slug,"-");
                      $slug=str_replace(" ", "-", $slug);
                      $slug=str_replace("/", "-", $slug);
                      $slug=str_replace("|", "-", $slug);
                      $slug=str_replace("!", "-", $slug);
                      $slug=str_replace("+", "-", $slug);
                      $slug=str_replace("*", "-", $slug);

                      $data = array(
                             'photo_id' => NULL,
                             'order_id' => $last_order_id,
                             'user_id' => $user_id,
                             'photo_name'=>$name,
                             'photo_folder'=>$_SESSION['logged_user'],
                             'order_date'=>$order_date
                             );
                      if($this->db->insert('photo_table', $data))
                        {
                             $last_id=mysql_insert_id();
                             $slug= $last_id."-".$slug;
                             $this->db->query("UPDATE photo_table
                             SET photo_slug='$slug' WHERE photo_id='$last_id'");
                        }
                      $image= $_SESSION['logged_user'].'/'.md5(uniqid(rand())).$_FILES['photo']['name'][$key];
                      $img="./".$image;
                      move_uploaded_file($_FILES['photo']['tmp_name'][$key],$img);
                      $fullpath=$image;
                      $this->db->query("UPDATE photo_table
                                SET photo_path='$fullpath' WHERE photo_id='$last_id'");

                }

          }
          return "Successfully Uploaded"; 
```

哪里`$_SESSION['logged_user']="saswat.saz.routroy@gmail.com"`。现在，这个脚本没有给出任何错误，但仍然没有上传文件，尽管数据库正在按应有的方式进行更新。

但如果我使用脚本：

```
$image= 'photo_folder/'.md5(uniqid(rand())).$_FILES['photo']['name'][$key]; 
```

代替

```
$image= $_SESSION['logged_user'].'/'.md5(uniqid(rand())).$_FILES['photo']['name'][$key]; 
```

然后文件正在完美上传。这意味着它只是导致错误的文件夹名称，但我需要以这种方法上传文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T11:34:38.737

你不能上传为

```
foreach($_FILES['photo']['name'] as $key=>$val){ } 
```

你应该使用

```
print_r($_FILES['photo']['name']);
die(); 
```

要了解找到的数组。它不是你想的那样，在这种情况下，它在第 0 个索引名称中返回一个二维数组，在第一个索引中返回一个包含进一步索引号的数组。和图像的名称。您应该将此数组拆分为一个 victuals 数组以传入函数

```
do_upload(); 
```

这边走

```
<?php
class Uploads extends CI_Controller {

function __construct()
{
    parent::__construct();
    $this->load->helper(array('form', 'url'));
}

function do_upload($field="1")
{
    $error_data=array();
    $success_data=array();
    $data = array();
    $this->load->helper('url');
    if($this->input->post("btn"))
    {   
        $images = array();
        $name=array();
        $field=0;
        $config['upload_path'] = dirname(__FILE__).'/../../assets/';
        $config['allowed_types'] = 'gif|jpg|png|jpeg';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->load->library('upload', $config);

        foreach ($_FILES["fileimage"]['name'] as $k=>$v)
        {
            $_FILES['images[]']['name']= $_FILES['fileimage']['name'][$k];
            $_FILES['images[]']['type']= $_FILES['fileimage']['type'][$k];
            $_FILES['images[]']['tmp_name']= $_FILES['fileimage']['tmp_name'][$k];
            $_FILES['images[]']['error']= $_FILES['fileimage']['error'][$k];
            $_FILES['images[]']['size']= $_FILES['fileimage']['size'][$k];

            $field++;
            $name[]=$_FILES['fileimage']['name'][$k];

            if ( ! $this->upload->do_upload("images[]"))
            {

                $error_data[] = $this->upload->display_errors();
                $success_data[]="";
            }
            else
            {
                $success_data[] = $this->upload->data();
                $error_data[]="";
            }
        }
        $data['name']=$name;
        $data['error']=$error_data;
        $data['success']=$success_data;

    }
    $data['field']=$field;
    $this->load->view('upload_form',$data);
}
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T13:34:31.440

这将是文件夹名称。

您可以使用用户 ID 作为文件夹名称吗？

例如

```
$image= $_SESSION['user_id'].'/'.md5(uniqid(rand())).$_FILES['photo']['name'][$key]; 
```

否则，您将需要从他们的电子邮件中删除文件夹名称中不允许出现的所有字符（这取决于操作系统）。

# tridion - 组件中的 XSLT 被（未）编码

> ID：14604492
> 
> 赞同：11
> 
> 时间：2013-01-30T12:52:15.923
> 
> 标签：tridion, tridion2009

非常简单的问题，但我似乎无法让它正常工作。

我有一个组件，其中有一些 XSLT（用于导航）。它通过 XSLT TBB 使用 XSLT Mediator 发布。

在发布 < 变成<，并打破了xslt ...

组件内容（纯文本字段）

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:tcm="http://www.tridion.com/ContentManager/5.0" exclude-result-prefixes="tcm xsl xs xlink tridion">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" omit-xml-declaration="yes" />
    <xsl:template match="/">
        <xsl:apply-templates select="/node/node[@type='folder')='0' and position() &lt; 3]">
           <xsl:sort select="sortnum"/>
        </xsl:apply-templates>

        <xsl:template match="node">
            <xsl:text>Lorem Ipsum</xsl:text>
        </xsl:template>
</xsl:stylesheet> 
```

输出此组件的 XLT CT TBB：

```
<xsl:stylesheet version="1.0" xmlns:tcm="http://www.tridion.com/ContentManager/5.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tridion="http://www.tridion.com/ContentDelivery/5.3/TCDL" xmlns:xlink="http://www.w3.org/1999/xlink"  xmlns:helper="http://www.tridion.com/xslthelper" xmlns:systeemcode="http://www.indivirtual.nl/SysteemCode" xmlns:xhtml="http://www.w3.org/1999/xhtml" exclude-result-prefixes="tcm xsl tridion xlink systeemcode xslthelper helper xhtml">
    <xsl:output method="text" omit-xml-declaration="yes" indent="yes" encoding="utf-8" standalone="no"/>
    <xsl:variable name="content" select="/tcm:Component/tcm:Data/tcm:Content/systeemcode:SysteemCode"/>
    <xsl:template match="/">
        <xsl:value-of disable-output-escaping="yes" select="helper:HtmlDecode($content/systeemcode:code)"/>
    </xsl:template>
</xsl:stylesheet> 
```

输出 CP 的 XSLT Page TBB：

```
<xsl:stylesheet version="1.0" xmlns:helper="http://www.tridion.com/xslthelper" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tcm="http://www.tridion.com/ContentManager/5.0" xmlns:xlink="http://www.w3.org/1999/xlink">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" omit-xml-declaration="yes"/>
    <xsl:template match="tcm:ComponentPresentation">
        <xsl:value-of select="helper:GetRenderedComponent(./tcm:Component/@xlink:href, ./tcm:ComponentTemplate/@xlink:href)" disable-output-escaping="yes"/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T14:23:12.650

在 CT TBB 中发现了问题（感谢@ChrisSummers）。

输出此组件的 XSLT CT TBB 引用了 XSLT 中介 HTMLEncoding **helper:HtmlDecode()**方法，该方法适用于普通文本，但不适用于 XSLT。我删除了它并解决了问题：

```
<xsl:stylesheet version="1.0" xmlns:tcm="http://www.tridion.com/ContentManager/5.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:tridion="http://www.tridion.com/ContentDelivery/5.3/TCDL" xmlns:xlink="http://www.w3.org/1999/xlink"  xmlns:helper="http://www.tridion.com/xslthelper" xmlns:systeemcode="http://www.indivirtual.nl/SysteemCode" xmlns:xhtml="http://www.w3.org/1999/xhtml" exclude-result-prefixes="tcm xsl tridion xlink systeemcode xslthelper helper xhtml">
    <xsl:output method="text" omit-xml-declaration="yes" indent="yes" encoding="utf-8" standalone="no"/>
    <xsl:variable name="content" select="/tcm:Component/tcm:Data/tcm:Content/systeemcode:SysteemCode"/>
    <xsl:template match="/">
        <xsl:value-of disable-output-escaping="yes" select="$content/systeemcode:code"/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T13:12:48.597

您如何使用我假设的模板输出 XSLT？可以发一下你的模板吗？

如果您使用 XSLT 模板，您可能需要使用“disable-output-escaping='yes'”属性，请参阅：[http ://www.w3schools.com/xsl/el_value-of.asp](http://www.w3schools.com/xsl/el_value-of.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T13:11:37.130

我之前遇到过类似的问题，为了解决这个问题，我必须使用另一个 C# TBB，它将当前值再次删除为原始值。

# ios - 在 ipad 上的应用程序中集成本机日历？

> ID：14604497
> 
> 赞同：1
> 
> 时间：2013-01-30T12:52:29.397
> 
> 标签：ios, ipad, calendar, uikit, native

如何在 UIKit 中集成月份和星期的本地日历（iPad）并更改其颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:03:21.893

这是一个众所周知的库[https://github.com/klazuka/Kal](https://github.com/klazuka/Kal) 或者你可以使用这个：[https ://github.com/kovpas/PMCalendar](https://github.com/kovpas/PMCalendar)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T16:35:54.230

日历最有趣的是，您还可以与 iPad、iPhone 和笔记本电脑同步提醒。Beesy 是一个实用的约会工具（[http://www.beesapps.com/features-beesy/ios-reminders-sync-beesy/](http://www.beesapps.com/features-beesy/ios-reminders-sync-beesy/)）。

苏菲。

# ios - iOS：自然排序顺序

> ID：14604503
> 
> 赞同：4
> 
> 时间：2013-01-30T12:52:42.843
> 
> 标签：ios, core-data, nsfetchrequest, natural-sort

我有一个 iOS 应用程序，它使用 Core Data 来保存和检索数据。
如何以**自然排序顺序**获取按 NSString 类型的字段排序的数据？

现在的结果是：

```
100_title
10_title
1_title 
```

我需要：

```
1_title
10_title
100_title 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T13:27:03.230

您可以使用[本地化标准比较：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/localizedStandardCompare:)作为核心数据获取请求的排序描述符中的选择器，例如

```
NSSortDescriptor *titleSort = [[NSSortDescriptor alloc] initWithKey:@"title"
                                  ascending:YES 
                                   selector:@selector(localizedStandardCompare:)];
[fetchRequest setSortDescriptors:[titleSort]]; 
```

**斯威夫特 3：**

```
let titleSort = NSSortDescriptor(key: "title",
                    ascending: true,
                    selector: #selector(NSString.localizedStandardCompare))
fetchRequest.sortDescriptors = [sortDescriptor] 
```

或更好

```
let titleSort = NSSortDescriptor(key: #keyPath(Entity.title),
                    ascending: true,
                    selector: #selector(NSString.localizedStandardCompare))
fetchRequest.sortDescriptors = [sortDescriptor] 
```

其中“Entity”是 Core Data 托管对象子类的名称。

# c# - 从我 LAN 上的其他计算机访问 C# Web 应用程序时出错

> ID：14604504
> 
> 赞同：0
> 
> 时间：2013-01-30T12:52:44.037
> 
> 标签：c#, asp.net, visual-studio-2010, iis-7

当我尝试通过访问 URL 来访问 C:/intpub/wwwroot/ 中的我的 asp Web 应用程序时

`http://ipaddress/mywebsite/loginpage.aspx`

此描述发生编译错误：

> 编译器错误消息：CS0103：当前上下文中不存在名称“DataManager”

当我使用 vs2010 打开并调试或浏览它时，不会出现此错误。

**注意**：*Datamanager.cs*是我用来编写 ADO 代码的 App_Code 中的一个类。

这是错误的来源：

```
void LogIn(string username, string password)
{
int count = (int)DataManager.ExecuteScalar("user_check", CommandType.StoredProcedure,
DataManager.CreateParameter("@username", SqlDbType.NVarChar, username)
, DataManager.CreateParameter("@pass", SqlDbType.NVarChar, password)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:41:06.490

尝试以下

```
void LogIn(string username, string password)
{
    DataManager dm = new DataManager();
    int count = (int)dm.ExecuteScalar("user_check", CommandType.StoredProcedure,
    DataManager.CreateParameter("@username", SqlDbType.NVarChar, username),
        DataManager.CreateParameter("@pass", SqlDbType.NVarChar, password));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:56:18.157

这可能是命名空间或类初始化问题。检查您是否在 login.aspx 中为 DataManager 类声明了命名空间。还要检查您是否在循环或 try/catch 块中声明了 DataManager 类。 [编译器错误 CS0103-MSDN](http://msdn.microsoft.com/en-us/library/t8zbaa6f%28v=vs.80%29.aspx)

# ruby-on-rails - Factorygirl has_one 通过模型关联

> ID：14604505
> 
> 赞同：1
> 
> 时间：2013-01-30T12:52:48.200
> 
> 标签：ruby-on-rails, testing, rspec, factory-bot

我有一个模型与另一个模型`has_one`关联。`through`

```
class Publisher
  has_many :books
end

class Book
  belongs_to :publisher
  has_one :author
end

class Author
  belongs_to :book
  has_one :publisher, :through => :book
end 
```

在我的 Rails 代码中，我可以`author.publisher`毫无问题地调用，所以一切正常。但是在我的规范中（使用 Rspec 和 FactoryGirl，该关联似乎不起作用。这是我的 FactoryGirl 定义：

```
Factory.define :author do |a|
  a.association :book
end

Factory.define :book do |b|
  b.association :publisher
end

Factory.define :publisher
end 
```

（省略了工厂的大部分属性）。

现在在我的规格中，我可以执行以下操作

```
pub = Factory(:publisher)
book = Factory(:book, :publisher => pub)
author = Factory(:author, :book => book)

author.book # => Returns book
author.book.publisher # => Returns publisher 
author.publisher # => nil 
```

那么为什么我的`through`协会不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:43:01.127

在`factory_girl`/ `factory_girl_rails`4.1.0 中，以下内容对我有用：

**`factories.rb`**

```
FactoryGirl.define do

  factory :author do
    book
  end

  factory :book do
    publisher
  end

  factory :publisher do
  end

end 
```

在导轨控制台中：

```
pub = FactoryGirl.create(:publisher)
#=> #<Publisher id: 1, created_at: "2013-01-30 13:35:26", updated_at: "2013-01-30 13:35:26">
book = FactoryGirl.create(:book, :publisher => pub)
#=> #<Book id: 1, publisher_id: 1, created_at: "2013-01-30 13:36:23", updated_at: "2013-01-30 13:36:23">
author = FactoryGirl.create(:author, :book => book)
#=> #<Author id: 1, book_id: 1, created_at: "2013-01-30 13:36:57", updated_at: "2013-01-30 13:36:57">
author.book
#=> #<Book id: 1, publisher_id: 1, created_at: "2013-01-30 13:36:23", updated_at: "2013-01-30 13:36:23">
author.book.publisher
#=> #<Publisher id: 1, created_at: "2013-01-30 13:35:26", updated_at: "2013-01-30 13:35:26">
author.publisher
#=> #<Publisher id: 1, created_at: "2013-01-30 13:35:26", updated_at: "2013-01-30 13:35:26"> 
```

奇怪的是，最后一个`author.publisher`需要额外的 SELECT 操作，`author.book.publisher`而不需要（可能与`nil`您观察到的有关）：

```
Publisher Load (0.2ms)  SELECT "publishers".* FROM "publishers"
  INNER JOIN "books" ON "publishers"."id" = "books"."publisher_id"
  WHERE "books"."id" = 1 LIMIT 1 
```

`Publisher.create`如果你使用, `Book.create`,`Author.create`而不是 ,也会发生同样的事情`FactoryGirl.create`，所以这不是工厂女孩行为而是 rails 行为，这与如何`through`缓存关联有关。

# c# - 创建一个包含常规和粗体文本 WPF/C# 的列表视图项

> ID：14604506
> 
> 赞同：0
> 
> 时间：2013-01-30T12:52:48.637
> 
> 标签：c#, wpf, listview, wpf-controls

我搜索了高低，但找不到与我的请求完全匹配的内容。我使用下面的代码将几个对象绑定到列表视图。项目 FaultDescription 是描述机器项目状态的字符串，包括项目的简要描述/标题。我的问题是 - 有没有一种方法可以让我在同一项目中使用粗体字体的标题，然后使用常规字体的其余文本？

例如“**标题**......这是文本的其余部分......”

顺便说一句，我在将列表视图绑定到的类的实例中使用 StringBuilder 构建字符串。

非常感谢，

杰夫

C＃：

```
lstvProductFaultState.Items.Add(newFaultRecord); 
```

XAML：

```
 <ListView FontSize="12" Height="252" HorizontalAlignment="Left" ItemsSource="{Binding}" Margin="251,261,0,0" 
         Name="lstvProductFaultState" VerticalAlignment="Top" Width="717" BorderThickness="2" BorderBrush="Black">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn  DisplayMemberBinding="{Binding Path=FaultNumber}" Header="No." Width="18" />
                            <GridViewColumn Header="Rating" Width="40">
                             <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Image Source="{Binding FaultRatingImage}" Stretch="Uniform"/>
                                </DataTemplate>
                             </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                             <GridViewColumn DisplayMemberBinding="{Binding Path=Radius}" Header="Radius" Width="40" />
                            <GridViewColumn DisplayMemberBinding="{Binding Path=Edge}" Header="Edge" Width="40" />
                            <GridViewColumn DisplayMemberBinding="{Binding Path=FaultTitleAndDescription}" Header="Fault Details" Width="200" />
                            <GridViewColumn Header="Photo 1" Width="80">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                            <Image Source="{Binding Image1}" Stretch="Uniform"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Photo 2" Width="80">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                        <Image Source="{Binding Image2}" Stretch="Uniform"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Header="Photo 3" Width="80">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                        <Image Source="{Binding Image3}" Stretch="Uniform"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:59:17.080

尝试以下操作：

```
<GridViewColumn.CellTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Title}" FontWeight="Bold" />
            <TextBlock Text="{Binding Description}" />
        </StackPanel>
    </DataTemplate>
</GridViewColumn.CellTemplate> 
```

# sql - 如何使用 AVG() 和 JOIN？

> ID：14604515
> 
> 赞同：0
> 
> 时间：2013-01-30T12:53:38.520
> 
> 标签：sql, join, average

这是我的 SQL 语句，但我无法让它工作。谁能告诉我我做错了什么？

```
SELECT AVG(R.Rating), R.Track_id, T.Title, T.Artist, G.Genre, T.Track_length,    T.Track_release_date, A.Album, A.Album_release_date

FROM Track T, Genre G, Albums A
LEFT JOIN Rating ON Rating.Track_id = T.Track_id
WHERE G.Genre_id = T.Genre_id AND A.Album_id = T.Album_id AND T.Title = 'sometitle' 
```

我也许应该告诉我我想从 1 首曲目中获得平均收视率。因此，如果标题的 track id 为 25，它应该查找 track_id 为 25 的每个评分并对该选择进行平均。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:56:14.430

在`SELECT`包含非聚合字段中使用聚合函数时，您需要分组：

```
SELECT AVG(R.Rating), R.Track_id, T.Title, T.Artist, G.Genre, T.Track_length, 
    T.Track_release_date, A.Album, A.Album_release_date
FROM Track T, Genre G, Albums A
LEFT JOIN Rating R ON R.Track_id = T.Track_id
WHERE G.Genre_id = T.Genre_id 
    AND A.Album_id = T.Album_id 
    AND T.Title = 'sometitle'
GROUP BY R.Track_id, T.Title, T.Artist, G.Genre, T.Track_length, 
    T.Track_release_date, A.Album, A.Album_release_date 
```

有关详细信息，请参阅[MSDN 。](http://msdn.microsoft.com/en-gb/library/ms177673.aspx)

您必须`GROUP BY`所有`SELECT`不在聚合函数中的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:11:16.887

假设现代 DBMS 支持窗口功能，以下也应该这样做

```
SELECT AVG(R.Rating) over (partition by r.track_id) as avg_rating, 
       R.Track_id, 
       T.Title, 
       T.Artist, 
       G.Genre, 
       T.Track_length, 
       T.Track_release_date, 
       A.Album, 
       A.Album_release_date
FROM Track T
JOIN Genre G ON G.Genre_id = T.Genre_id
JOIN Albums A ON A.Album_id = T.Album_id
LEFT JOIN Rating R ON R.Track_id = T.Track_id
WHERE T.Title = 'sometitle' 
```

# restful-authentication - 使用“记住我”的基于 Spring MVC 的 RESTfull Web 服务身份验证

> ID：14604518
> 
> 赞同：0
> 
> 时间：2013-01-30T12:53:42.677
> 
> 标签：restful-authentication

我有宁静的 API。我使用了 Spring MVC 注释。我需要对用户 ID 进行身份验证，并在身份验证时创建一个会话并允许用户调用其他 API，直到会话结束。我的问题是：创建一个会话并保持它是否违背了宁静的想法。如果是，我如何保护我的 RESTful API？如果我不保护它，网络中的任何人都可以点击 URL 并获得响应。请建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:16:43.270

确实，您是对的，REST 应该是无状态的，这意味着保留带有会话 ID 的 cookie 违反了原则。但不要绝望，有解决办法。

## 基本的

我假设您正在使用弹簧安全性。最简单的选项是对 REST 路径使用无状态 HTTP Basic 身份验证，并为站点的其余部分保留表单登录，这在 spring-security 中直接支持。安全配置 XML 如下所示：

```
<!-- for the REST api, the ROLE_API_CONSUMER is a custom role
     I usually use so that not all users are allowed to use the API -->
<security:http pattern="/api/**" auto-config="false" create-session="stateless">
    <security:http-basic />
    <security:intercept-url pattern="/api/**" access="ROLE_API_COSUMER" />
</security:http>
<!-- for the other MVC controllers -->
<security:http auto-config="true">
    <security:form-login />
</security:http>
<!-- usual stuff to keep track of users -->
<security:authentication-manager>
    <security:authentication-provider
        user-service-ref="userDetailsService">
        <security:password-encoder ref="encoder" />
    </security:authentication-provider>
</security:authentication-manager> 
```

这种方法要求HTTPS真正安全，缺点是REST客户端必须存储用户的用户名和密码。如果客户端是智能手机，则窃取手机将提供以纯文本形式访问用户凭据的权限。

## 身份验证

[OAuth（1.0a 或 2）](http://en.wikipedia.org/wiki/OAuth)是大多数现代 API 使用的，并提供了额外的安全级别。为了访问 API，REST 客户端首先请求服务器的访问权限，而不是存储用户的凭据。简而言之，服务器然后向用户显示“你批准这个客户端访问 API 吗？”——一种通知，如果用户批准，REST 客户端会获得一个令牌，它可以用来作为用户进行身份验证，但是没有用户的密码。如果用户的手机被盗，小偷看不到那里的任何密码，并且可以使访问令牌无效。

我没有在 spring-security 中设置 OAuth 的经验，但确实有一个模块，请查看[http://static.springsource.org/spring-security/oauth/](http://static.springsource.org/spring-security/oauth/)

我希望对你有所帮助！

# c++ - 使用 sem_t + pthread_create 的奇怪问题

> ID：14604519
> 
> 赞同：0
> 
> 时间：2013-01-30T12:53:44.543
> 
> 标签：c++

将参数 sem_t 传递给构造函数 A 时的奇怪行为。预期的输出是，`5555`但我得到了`5055`。请指出是否也存在设计问题。

```
 1 #include <iostream>
  2 #include <pthread.h>
  3 #include <semaphore.h>
  4 using namespace std;
  5 
  6 class A {
  7   public:
  8     pthread_t thr_id;
  9     int& k;
 10 
 11     A(sem_t& sem, int k) : k(k){}
 12     A(int k) : k(k){}
 13 
 14     void start(){
 15       cout << k;
 16       pthread_create(&thr_id, NULL, foo2, NULL);
 17       cout << k;
 18     }
 19     void join(){
 20       pthread_join(thr_id, NULL);
 21     }
 22     static void* foo2(void* i){}
 23 };
 24 
 25 int main() {
 26   sem_t sem;
 27   A* ac1 = new A(sem, 5);
 28   ac1->start();
 29   ac1->join();
 30   A* ac2 = new A(5);
 31   ac2->start();
 32   ac2->join();
 33  return 0;
 34 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:01:44.333

```
int& k;
A(int k) : k(k){} 
```

您正在将成员初始化`k`为对构造函数中本地`k`的引用。构造函数完成后，它成为悬空引用，使用它是未定义的行为。

# c# - XML 文件完整性检查标准

> ID：14604524
> 
> 赞同：0
> 
> 时间：2013-01-30T12:54:02.237
> 
> 标签：c#, xml, xml-signature, integrity

我需要将某种 XML 文件的完整性检查合并到它的结构中。考虑到 XmlDSig 作为标准，我想知道有没有办法摆脱非对称密钥（身份验证）功能？或者也许有一些其他标准仅用于 XML 文件完整性验证？

SHA1 是一个哈希函数，不需要生成任何密钥。就其本身而言，它足以进行完整性检查。很明显，为唯一完整性检查目的生成临时非对称密钥是一种过度操作。使用 C# 也存在一些[陷阱](https://stackoverflow.com/a/5845191)。

如果未将密钥分配给 SignedXml.SignedKey 属性，则 SignedXml.ComputeSignature 方法会导致“未加载签名密钥”异常。

# firefox-addon - 如何在不使用 Mozilla 数据存储的情况下登录 XPI 文件

> ID：14604530
> 
> 赞同：1
> 
> 时间：2013-01-30T12:54:46.533
> 
> 标签：firefox-addon, xpi

我们正在使用 NSS signtool 使用威瑞信证书签署 xpi 文件。

但是，这涉及以下步骤

1.  将威瑞信 pfx 文件导出到 mozilla firefox
2.  将此导出的证书导入 .crt 扩展名
3.  现在从 mozilla firefox 数据存储中导出 pkcs12 格式的威瑞信证书
4.  现在使用 pkcs12 格式登录 xpi 扩展

我们想避免步骤 3，如果我们可以将 pfx 文件转换为 pkcs12 文件，那么我们可以自动化整个过程。

如果有人知道这一点，请提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T18:56:20.420

我不确定你在做什么，但例如 OpenSSL 有命令行工具来转换格式之间的证书等。此外，由于您可能会在一段时间内使用相同的证书，因此很容易为 signtool 设置一次商店，就像[文档](https://developer.mozilla.org/en-US/docs/Signing_a_XPI)建议的那样。

[也是一个无耻的插件 - 在没有 NSS 签名工具的情况下签署 XPI： http](http://nmaier.github.io/xpisign.py/) ://nmaier.github.io/xpisign.py/

# blackberry-simulator - 我的 BlackBerry 10 Simulator 无法连接到无线网络？

> ID：14604532
> 
> 赞同：1
> 
> 时间：2013-01-30T12:54:47.083
> 
> 标签：blackberry-simulator, blackberry-10

我有一个在 VMWare Fusion 上运行的黑莓 10 模拟器，但它无法连接到无线网络。我该如何解决这个问题？这是我附上的一些图片，希望对您有所帮助。 [http://postimage.org/image/eei1ipnnf/](http://postimage.org/image/eei1ipnnf/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:19:05.607

我没有任何直接经验，但尝试以下

1) 关闭你的 VM 2) 在 VMWare 中选择你的 VM，然后单击“编辑虚拟机设置” 3) 选择网络适配器 4) 从 NAT 更改为桥接模式，这将允许模拟器直接访问你的物理网卡。5) 再次启动模拟器。

此页面可能会对您有所帮助 [http://rapidberry.net/installing-and-configuring-the-simulator-for-blackberry-10-and-playbook/](http://rapidberry.net/installing-and-configuring-the-simulator-for-blackberry-10-and-playbook/)

# php - 使用 Ajax 和 PHP 的 Google 图表

> ID：14604533
> 
> 赞同：7
> 
> 时间：2013-01-30T12:54:50.850
> 
> 标签：php, jquery, ajax, json

这是我第一次发帖，所以如果我遗漏了什么，请告诉我。

我最近开始搞乱 AJAX，我正在尝试开发一个简单的仪表板，它从我们的数据库中提取信息并将其呈现到谷歌表格视图中的网页上。但是，我一直在 Chromes Javascript 控制台中收到错误“未捕获的错误：不是数组格式+en，默认值，table.I.js:55”。下面是html页面中的ajax代码：

```
<script type='text/javascript'>
google.load('visualization', '1', {packages:['table']});
google.setOnLoadCallback(drawChart);

function drawChart() {

  var jsonData = $.ajax({
      url: "livesearch.php?chart=bars",
      dataType:"json",
      async: false
      }).responseText;
      alert(jsonData);
 var data = new google.visualization.arrayToDataTable(jsonData);
    data.addColumn('string', 'Status');
    data.addColumn('number', 'Orders');
    data.addRows(jsonData);
  var chart = new google.visualization.Table(document.getElementById('chart_div'));
    chart.draw(data   , {width: 800, height: 150});
    setTimeout('drawChart()',500000);
}

</script> 
```

这是我构建 json 数组的 php 脚本。

```
while ($row = sqlsrv_fetch_array($result))  
    {
    $c[] = array($row['status'], array('v' => $row['countx'], 'f' =>  
                                 $row['countx']), $row['countx']);               
    }

    echo json_encode($c); 
```

当我在返回 json 后在我的 javascript 中设置警报时，它采用以下格式：

[{"COLS":[{"id":"Status", "type":"String"},{"id":"Orders", "type":"Number"}],"rows":[{ "c":[{"v":"GEND"},{"v":11}]}]}]

Comp、Gend 和 Hold 只是我们系统中订单的状态。数字是处于该状态的订单数量。如前所述，我只是创建了一个仪表板以在特定时间间隔显示此信息。我可以在 javascript "$('div#status').load('livesearch.php?chart=numbers');" 中使用获取信息来更新此语法 但我想使用谷歌的可视化工具，最终也开始使用他们的图表和 ajax。

谢谢您的帮助。让我知道您是否还有其他需要。

还有一个更新。如果我将 javascript 代码从 arrayToDateTable 更改为 DataTable： var data = new google.visualization.DataTable(jsonData); data.addColumn('string', '状态'); data.addColumn('number', 'Orders'); 数据.addRows（数据）；我在 Chrome 中收到错误“未捕获的错误：给 addRows 的参数必须是数字或数组”

最后我发现网站' [http://json.parser.online.fr/](http://json.parser.online.fr/) '告诉我json语法确实不正确。所以我用我在网上找到的其他东西尝试了一种不同的方法：

html网站：

```
var jsonData = $.ajax({
      url: "livesearch.php?chart=bars",
      dataType:"json",
      async: false
      }).responseText;
      alert(jsonData);
      var data = new google.visualization.DataTable(jsonData, 0.5);
chart = new google.visualization.Table(document.getElementById('chart_div'));
    chart.draw(data, {'allowHtml': true}); 
```

PHP 站点，我只是简单地构建数组以传回这里只是为了让它工作。

```
$cols = array();
$cols[] = array('label' => 'Status','type' => 'String');
$cols[] = array('label' => 'Status', 'type' => 'number');
$cells = array();
$cells[] = array('v' => 'GEND');
$cells[] = array('v' => 11);
$rows = array();
$rows[] = array('c' => $cells);
$data = array();
$data[] = array('cols' => $cols, 'rows' => $rows);
  echo json_encode($data); 
```

这是我的输出，在“ [http://json.parser.online.fr/](http://json.parser.online.fr/) ”上验证正确：[{"COLS":[{"id":"Status", "type":"String"},{ "id":"Orders", "type":"Number"}],"rows":[{"c":[{"v":"GEND"},{"v":11}]}]} ]'

但是，我现在在 chrome 中没有收到任何错误，但没有显示表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:41:32.827

我看到大小写不一致。

我的猜测是“COLS”实际上应该是小写的“cols”。

在最新的 php 示例中正确键入，但在 json 输出中没有。

*编辑：* 谷歌自己的一个例子：

```
var dt = new google.visualization.DataTable(
     {
       cols: [{id: 'task', label: 'Task', type: 'string'},
                {id: 'hours', label: 'Hours per Day', type: 'number'}],
       rows: [{c:[{v: 'Work'}, {v: 11}]},
              {c:[{v: 'Eat'}, {v: 2}]},
              {c:[{v: 'Commute'}, {v: 2}]},
              {c:[{v: 'Watch TV'}, {v:2}]},
              {c:[{v: 'Sleep'}, {v:7, f:'7.000'}]}
             ]
     },
   0.6
) 
```

# android - 调用 getSherlockActivity() 时获取 null

> ID：14604539
> 
> 赞同：2
> 
> 时间：2013-01-30T12:54:59.060
> 
> 标签：android, android-asynctask, fragment

我正在`null`打电话`getSherlockActivity();`

这是因为 Activity 是`finished or killed`

在我的情况下，我无法想出一个避免的解决方案：

这个 SherlockActivity 有一个带有 4 个选项卡的 ViewPager。

```
adapter = new PagerAdapter((SherlockFragmentActivity) this, mViewPager);
adapter.addTab(actionBar.newTab(), Frag1.class, bundle);
adapter.addTab(actionBar.newTab(), Frag2.class, bundle);
adapter.addTab(actionBar.newTab(), Frag3.class, bundle);
adapter.addTab(actionBar.newTab(), Frag4.class, bundle); 
```

当这个 Activity 启动时，所有的 Tabs(Fragments) 都有一个`getSherlockActivity()`在`doInBackground`.

因此，要完成所有 AsyncTask，大约需要 3-5 秒，同时如果我按下并完成此 Activity，尚未启动其 AsyncTask（可能已排队）的最后一个片段**Frag4**`getSherlockActivity()`会尝试并崩溃。

我可以只使用**Try-Catch 块**来解决这个问题，但是有没有办法告诉片段**如果父 Activity 已死，停止所有后台任务等。**类似的东西？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:01:39.920

只需在 Activity onDestroy() 回调中调用每个片段的 AsyncTask.cancel() 即可。这样，异步任务就不会基于已销毁的 Activity 上下文执行任何操作。

# html - 填充顶部不起作用

> ID：14604541
> 
> 赞同：33
> 
> 时间：2013-01-30T12:55:03.610
> 
> 标签：html, css, padding

为什么不起作用`padding-top`？设置的高度`div`。

**HTML：**

```
<div class="menu">
    <a href="#">APIE MUS</a>
    <a href="#">REKLAMA</a>
    <a href="#">PARTNERIAI</a>
</div> 
```

**CSS：**

```
 .menu {
      width: 300px;
      height: 30px;
      background: red;
 }
 .menu a {
      padding-top: 10px;
 } 
```

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-30T12:59:03.537

您的示例（带边距）不起作用，因为您不能将边距应用于内联元素，例如`a, span, b`.

### 看一看：

*   [http://www.webdesignfromscratch.com/html-css/css-block-and-inline/](http://www.webdesignfromscratch.com/html-css/css-block-and-inline/)
*   [http://webdesign.about.com/od/htmltags/qt/block_vs_inline_elements.htm](http://webdesign.about.com/od/htmltags/qt/block_vs_inline_elements.htm)

### 要解决您的问题：

只需添加`display:inline-block;`

> 这个值 (inline-block) 使元素生成一个内联级块容器。内联块的内部被格式化为块框，元素本身被格式化为原子内联级框。 **来源：** [http ://www.w3.org/TR/CSS2/visuren.html#inline-level](http://www.w3.org/TR/CSS2/visuren.html#inline-level)

因此，这将解决您的问题：

```
.menu a{
    margin-top: 10px;
    display:inline-block;
} 
```

# google-drive-api - 如何使用 Google Drive 共享指向网站的链接

> ID：14604549
> 
> 赞同：0
> 
> 时间：2013-01-30T12:55:30.470
> 
> 标签：google-drive-api

我正在尝试使用我的 Google Drive 来共享 Internet 资源来组织共享。有可能这样做吗？

在 Google Drive 的“创建”菜单中没有这样的类型，我还没有设法在其他应用程序列表中找到任何内容。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T08:56:48.313

没有申请就没有选择。但谷歌驱动器允许应用程序；）

你需要安装这个小插件

[谷歌浏览器网上应用店](https://chrome.google.com/webstore/detail/glinks/leanhbopikglhiejeckmchmobphcpphm/)

他们的网站在这里：

[http://glinksapp.appspot.com/partials/support.html](http://glinksapp.appspot.com/partials/support.html)

# vb.net - 以编程方式在 Crystal Report 中替换什么？

> ID：14604553
> 
> 赞同：0
> 
> 时间：2013-01-30T12:55:39.303
> 
> 标签：vb.net, crystal-reports, vb6-migration

我有一行代码可以在 VB6 中设置 Report.PrintDate。我们如何将这一行替换为 CrystalDecisions.CrystalReports.Engine.ReportDocument ？在 VB6 中，它是 CRAXDRT.Report 的内置属性。

那么任何人都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:21:04.537

如果要显示打印报告的当前日期/时间，可以使用`Special Fields`报告设计器中的内置。从您的评论中，我了解到您想以编程方式进行设置。然后你需要创建一个参数并从代码中设置它。

![在此处输入图像描述](../Images/04d43994dd51c9c21c89a0de90597b7f.png)

您可以观看此[DEMO](http://www.youtube.com/watch?v=vqqeVWJcoag)以了解如何创建参数。[此答案](https://stackoverflow.com/a/9197214/799558)将向您展示如何从代码中传递参数。

# border - 任何边框空白技巧？对于 CSS

> ID：14604556
> 
> 赞同：2
> 
> 时间：2013-01-30T12:55:43.350
> 
> 标签：border, css

我需要一些技巧来使用这样的 CSS 插入边框空白区域。

![任何边框空白技巧？ 对于 CSS](../Images/cb3368cecd4cb27e0de621205f9c4e3a.png)

我像这样使用CSS box-shadow

```
 box-shadow:
        -1px 0px 0px 0px #000,
        0px -1px 0px 0px #000,
        0px 1px 0px 0px #000,
        1px 1px 0px 0px #000 
```

我不知道如何使边框/阴影看起来像图片。

我将只使用一个 html 元素.. `<div></div>`

有什么诀窍吗？

**游乐场：http:** [//jsfiddle.net/ES66k/](http://jsfiddle.net/ES66k/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:01:58.087

您可以使用、和`<div>`类创建4 。使它们是绝对的，容器是相对的。调整它们的大小，使它们成为容器 bg-color 的颜色，并将它们带到具有属性的角落。它们的值必须**减去****边框宽度**。这是具有 3px 边框的元素示例：`.top-left``.top-right``.bottom-left``.bottom-right``top, right, bottom and left`

 ****HTML：

```
<div class="box">
    <div class="corner top-left"></div>
    <div class="corner top-right"></div>
    <div class="corner bottom-left"></div>
    <div class="corner bottom-right"></div>
</div> 
```

CSS：

```
.box{
    width: 300px;
    height: 300px;
    border: 3px solid #666;
    position:relative; 
}

.corner{
    width: 10px;
    height: 10px;
    background-color: #fff; 
    position: absolute;
}

.top-left{
    top: -3px;
    left: -3px;
}
.top-right {
    top: -3px;
    right: -3px;
}
.bottom-left{
    bottom: -3px;
    left: -3px;
}
.bottom-right{
    bottom: -3px;
    right: -3px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:07:16.000

只有一个 div：http: [//jsfiddle.net/ES66k/1/](http://jsfiddle.net/ES66k/1/)（在 Fx18 和 chrome 上测试）

```
div {
  width:300px;
  height:170px;
  margin:100px;
  border-top: 1px black solid;
  border-bottom: 1px black solid;
  position: relative;
}

div:after, div:before {
   content: "";
   position: absolute;
   top: -1px;
   width: 20px;
   height: 172px;
   border-top: 40px white solid;
   border-bottom: 40px white solid;
   -webkit-box-sizing: border-box;
   -moz-box-sizing: border-box;
   box-sizing: border-box;
}

div:before { border-left: 1px black solid; left: 0; }
div:after { border-right: 1px black solid; right: 0; } 
```

无论如何，它有点hacky，因为它依赖于固定的高度和纯色作为背景（白色），但可能对您的目的有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:08:02.873

尝试使用 CSS3 属性边框图像：

这是一个演示，您可以查看并自己尝试：[**CSS3 border-image**](http://www.norabrowndesign.com/css-experiments/border-image-anim.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:56:08.770

```
div {
  width:300px;
  height:170px;
  margin:100px;
  position:relative;

 background:#ccc;

}

div:before, div:after {
 content:"";
 position:absolute;
 top:0;
 left:0;
}
div:before {
    width:280px; /*****-20px*****/
    height:168px; /*****-2px*****/

    margin-left:10px;
    border-top:1px solid #f00;
    border-bottom:1px solid #f00;
}
div:after {
    width:298px; /*****-2px*****/
    height:150px; /*****-20px*****/

    margin-top:10px;
    border-left:1px solid #f00;
    border-right:1px solid #f00;
} 
```

**演示：http:** [//jsfiddle.net/ES66k/4/](http://jsfiddle.net/ES66k/4/)

现在完成，不需要设置背景颜色：D

但无论如何感谢@Fabrizio Calderan :D****

# mongodb - 在 mongo 中使用聚合或 map reduce 获得排名

> ID：14604557
> 
> 赞同：0
> 
> 时间：2013-01-30T12:55:51.663
> 
> 标签：mongodb, mapreduce

所以我需要在我的数据库中获取用户帖子的类别中的排名和总数。例如，所需的输出可能是

```
Hi bob, here are your posts rankings:  
 'Breaking News' is ranked #10 of 203 in the 'news' category
 'Day at the Game' is ranked #24 of 67 in the 'sports' category". 
```

这是架构

```
PostSchema = new Schema({
 {
  score:Number,
  categoryId: ObjectId,
  categoryName: String,
  title: String,
  username: String
 }
}); 
```

示例帖子

```
{ score: 12, 
  categoryId:"50cf7d2841d41f4f35000000", 
  categoryName:"sports", 
  title:"Day at the Game", 
  username:"bob"
} 
```

我想我可以在 map reduce 中尝试这个，但是有没有使用聚合命令的方法？什么是最有效的 map reduce 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:21:58.910

这是一个困难的问题。

您最有可能尝试做的事情与许多网站（例如这个（stackoverflow））在标签（即`mongodb`）中使用最佳答案和提问者所做的相同，但在每个用户级别。

你可以在这里看到我刚才的意思的一个例子：[https ://stackoverflow.com/tags/mongodb/topusers](https://stackoverflow.com/tags/mongodb/topusers)

聚合框架和/或 map reduce 的问题在于，您必须为所有用户计算该类别下的所有记录的统计信息。这对于 203 条记录可能没问题，但是当您开始达到可能数千条记录时，实时执行此操作将变得非常困难。

这就是为什么通常最好这样做，就像其他网站（包括这个）一样，每天一次，也许通过 map reduce。

我必须承认我不知道如何使用聚合框架来做到这一点，因为每次管道迭代都不能存储关于其前一次迭代的常量（即增量数字），除非它位于组运算符之一上。

但是，我在这里提出的观点应该可以帮助您了解您是否真的走在正确的道路上。

# c++ - 从 C 中的更多来源在richTextBox 中附加文本

> ID：14604559
> 
> 赞同：0
> 
> 时间：2013-01-30T12:56:01.337
> 
> 标签：c++, textbox

我想将更多来自不同来源的字符串添加在一起，但我似乎没有工作......
我的代码

```
int num = 0;
string s = std::to_string(num);
this->richTextBox1->Text = "Copying files... (" + s + "%)"; //this doesn't work 
```

PS：如何添加代码 -`num = num + 1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:59:15.800

它不起作用是因为该`Text`属性不是`std::string`.

您可以使用以下方法将结果转换`std::string`为：`const char*``c_str()`

```
this->richTextBox1->Text = ("Copying files... (" + s + "%)").c_str(); 
```

# svn - 使用 Jenkins 创建 svn 目录标记

> ID：14604567
> 
> 赞同：1
> 
> 时间：2013-01-30T12:56:31.440
> 
> 标签：svn, jenkins, tagging, jenkins-plugins

我需要使用 jenkins 标记目录。这就是我的需要。

我在 ssh 服务器中有一个文件夹 xyz。我已经签出到 jenkins 目录 /var/lib/jenkins/jobs/Jobname/workspace

我需要在 svn 位置标记工作区目录 [https://xxx.xxx.com/svn/xx/tags/xx-xx/xx-xx/](https://xxx.xxx.com/svn/xx/tags/xx-xx/xx-xx/) ${JOB_NAME}-${BUILD_NUMBER}-${BUILD_ID}

这该怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:05:09.027

最好的做法是使用[Subversion Tagging Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Tagging+Plugin)。

它允许创建构建后操作，其中可以配置*Tag Base URL*、*Tag Comment*和*Tag Delete Comment 。*假设您的工作区目录是`svn://repo/trunk`. 作为*标记基 URL*，您将配置`tags/${JOB_NAME}-${BUILD_NUMBER}-${BUILD_ID}`.

当您的构建成功完成时，SVN 标记将自动执行。

# android - 图像格式问题，在android中发送邮件时

> ID：14604570
> 
> 赞同：0
> 
> 时间：2013-01-30T12:56:49.913
> 
> 标签：android, file, bitmap, uri, email-attachments

我可以使用以下代码从可绘制文件夹中获取图像。我也可以发送电子邮件。但问题是图像的格式是文件，我无法在我的 android 设备中打开它。如何将其转换为任何图像格式，如 png、jpg 等。

```
 intent.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://" + "com.example.jithu"+ "/" +imageAdapter.mThumbIds[position])); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:08:12.363

检查扩展是否附加到图像。试试下面的代码：

```
intent.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://" + "com.example.jithu"+ "/" +imageAdapter.mThumbIds[position]) + ".jpg");
intent.setType("image/jpeg");  // attachment is a jpeg 
```

# highcharts - highchart 设置填充颜色

> ID：14604571
> 
> 赞同：1
> 
> 时间：2013-01-30T12:56:57.220
> 
> 标签：highcharts

我有一个高图，我正在将选择和取消选择用于条形图。我需要在选择栏时更改填充颜色并保持当前颜色。（我只是改变边框颜色）

看来我可以使用 color 属性，但指定 null 并不能解决问题。有没有办法在没有 API 调用的情况下做到这一点。（配置选项）

这就是我现在要做的

```
plotOptions: {
    series: {
        allowPointSelect: false,
        states: {
            select: {
                borderWidth: 1,
                borderColor: '#595E61'
                color: null
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:13:19.327

试试这个 - 它会（希望）将所选项目突出显示为黄色

```
plotOptions: {
    series: {
        allowPointSelect: true,
        marker: {
            states: {
                select: {
                    fillColor: 'yellow',
                    lineWidth: 0,
                    borderWidth: 1,
                    borderColor: '#595E61'
                }
            }
        }
    }
} 
```

看[这个小提琴](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-states-select-fillcolor/)的例子（它是一个折线图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:06:03.007

您需要设置处于选中状态的点的颜色。

```
data:[{ color: '#00FF00', y: 20, states: {select: {color: '#00FF00'}} }, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4] 
```

这是一个演示：

> [http://www.highcharts.com/jsbin/edumap/14/edit#javascript,live](http://www.highcharts.com/jsbin/edumap/14/edit#javascript,live)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:14:45.403

实际上它对我有用：[http ://www.highcharts.com/jsbin/edumap/2/edit](http://www.highcharts.com/jsbin/edumap/2/edit)

问题可能是您将 allowPointSelect 设置为 false 吗？

```
plotOptions: {
    column: {
        allowPointSelect: true,
        states: {
            select: {
                borderColor: 'red',
                color: null
            }
        }
    }
}, 
```

# oracle - 如何查看授予其他用户架构的权限

> ID：14604576
> 
> 赞同：27
> 
> 时间：2013-01-30T12:57:11.790
> 
> 标签：oracle

考虑这种情况：在数据库中，我有两个用户 A 和 B 以及他们相应的架构。

我想知道，我如何获得信息：架构 B 中的 USER A 有哪些权限。

考虑这种情况：我们有两个用户及其关联的方案。我们有用户 A 和用户 B。在 A 中，假设我们有 TB1 TB2，在 B 中，假设我们有 TBa，TBb。现在我想知道如何找到用户 A 对 Schema B 的权限。

例如： 用户 A 正在写：`select * from B.TBb` 这意味着用户 A 正在访问用户 B 的表，因此表明他具有 SELECT 权限。我想知道用户 A 对架构 B 的所有权限。

应执行哪个查询以获取用户 A 对模式 B 的权限列表。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-30T13:27:56.100

您可以使用以下查询：

```
select * from all_tab_privs;
select * from dba_sys_privs;
select * from dba_role_privs; 
```

这些表中的每一个都有一个`grantee`列，您可以在 where 条件中对其进行过滤：

```
where grantee = 'A' 
```

为了在其他模式中查询对象（例如表）的权限，我首先建议`all_tab_privs`它还有一个`table_schema`列。

如果您使用要查询其权限的同一用户登录，则可以使用`user_tab_privs`, `user_sys_privs`, `user_role_privs`。普通的非 dba 用户可以查询它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T22:22:38.757

使用[Szilágyi Donát](https://stackoverflow.com/posts/14605206/revisions)的帖子中的示例。

我使用两个查询，一个知道我有什么角色，不包括连接授权：

`SELECT * FROM USER_ROLE_PRIVS WHERE GRANTED_ROLE != 'CONNECT'; -- Roles of the actual Oracle Schema`

知道我喜欢找到我的架构/用户拥有的特权/角色；我的角色 ROLE_VIEW_PAYMENTS 和 ROLE_OPS_CUSTOMERS 的示例。但是要找到我使用的特定角色的表/对象：

`SELECT * FROM ALL_TAB_PRIVS WHERE GRANTEE='ROLE_OPS_CUSTOMERS'; -- Objects granted at role.`

此示例的所有者模式可以是 PRD_CUSTOMERS_OWNER（或角色/模式本身）。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-16T21:16:13.500

登录到数据库。然后运行以下查询

select * from dba_role_privs where grantee = 'SCHEMA_NAME';

将列出授予架构的所有角色。

感谢[Szilagyi Donat](https://stackoverflow.com/posts/14605206/revisions)的回答。这个取自相同的，只是添加了 where 子句。

# asp.net - 在 Telerik 报表的最后一页上的报表页脚之前显示页脚

> ID：14604579
> 
> 赞同：1
> 
> 时间：2013-01-30T12:57:28.027
> 
> 标签：asp.net, telerik, report

我正在使用 Telerik 报告。我的问题是：

**如何在最后一页的报告页脚之前显示页脚？**

我有一份报告，其中显示了 Pagewise Totals 和 Grand Total。但是在最后一页上，总计在页面总计之前，我希望报表末尾的总计和页面总计在它之前。

实际上在 Telerik Reporting 中，Page Footer 总是出现在页面的末尾，甚至 Report Footer 在 Page Footer 之前......

![目前它显示这样](../Images/da6c4caf3f75cec6000d51d4c5fe2cf5.png)

我想 ：

![我想要的是](../Images/563d84969ac5209e66e32ad3d885851e.png)

我能做到这一点吗？如何？

提前致谢...

**编辑 ：**

有什么建议可以通过任何其他方式实现类似的效果吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T13:25:24.090

目前你想要的东西是不可能的。（如果telerik更新比不知道。）

因为页脚总是出现在页尾，这就是为什么它被称为页脚​​。它与报表页脚无关。报表和页脚是两个不同的东西。

根据[为什么页面标题出现在报告标题之前？](http://www.telerik.com/help/reporting/faq-report-page-header.html) 文章，页面部分与报告本身无关，但与报告媒体的页边距有关。因此，您不能切换报表部分和页面部分的位置。

所以你现在的逻辑是好的..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:54:37.603

我已经解决了。不完全是，但我们可以依靠...

我已将总计和页面总计都放入`Page Footer`

对于总计，我设置了一个`FormattingRule`in `ConditioningFormatting`，因为我设置`Visible = True`了仅当`PageNumber = PageCount`

现在页面总计和总计都出现在页面页脚的页面末尾，但`Grand Total`仅显示在最后一页和之后`Page Total`

任何其他答案都是最受欢迎和赞赏的......

# python - 遇到烧瓶教程中的关键错误

> ID：14604586
> 
> 赞同：3
> 
> 时间：2013-01-30T12:57:48.607
> 
> 标签：python, flask

我的 config.py：

```
OPENID_PROVIDERS = [
{ 'name': 'Google', 'url': 'https://www.google.com/accounts/o8/id' },
{ 'name': 'Yahoo', 'url': 'https://me.yahoo.com' },
{ 'name': 'AOL', 'url': 'http://openid.aol.com/<username>' },
{ 'name': 'Flickr', 'url': 'http://www.flickr.com/<username>' },
{ 'name': 'MyOpenID', 'url': 'https://www.myoopenid.com' }
] 
```

视图.py：

```
@app.route('/login', methods=['GET', 'POST'])
def login():
    form = LoginForm()
    if form.validate_on_submit():
        flash('Login requested for OpenID="' + form.openid.data
          + '", remember_me=' + str(form.remember_me.data))
        return redirect('/index')
    return render_template('login.html', 
        title='Sign In', 
        form=form,
        providers=app.config['OPENID_PROVIDERS']) 
```

教程住[在这里](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iii-web-forms)

谢谢您的帮助。

* * *

我的回溯：

```
 Traceback (most recent call last):
  File "/Users/biofobico/sites/env/microblog/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Users/biofobico/sites/env/microblog/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/Users/biofobico/sites/env/microblog/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/Users/biofobico/sites/env/microblog/lib/python2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/Users/biofobico/sites/env/microblog/lib/python2.7/site-packages/flask/app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "/Users/biofobico/sites/env/microblog/lib/python2.7/site-packages/flask/app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/Users/biofobico/Sites/env/microblog/app/views.py", line 32, in login
    providers=app.config['OPENID_PROVIDERS'])
KeyError: 'OPENID_PROVIDERS' 
```

登录.html：

```
{% extends "base.html" %}

{% block content %}
<script type="text/javascript">
function set_openid(openid, pr)
{
    u = openid.search('<username>')
    if (u != -1) {
        // openid requires a username
        user = prompt('Enter your ' + pr + ' username:')
        openid = openid.substr(0, u) + user
    }
    form = document.forms['login'];
    form.elements['openid'].value = openid
}
</script>
<h1>Sign in</h1>
<form action="" method="post" name="login">
    {{ form.hidden_tag() }}
    <p>
        Please enter your OpenID:<br>
        {{ form.openid(size=80) }}<br>
        {% for error in form.errors.openid %}
        <span style="color: red;">[{{error}}]</span>
        {% endfor %}
        |{% for pr in providers %}
        <a href="javascript:set_openid('{{pr.url}}', '{{pr.name}}');">{{pr.name}}</a> |
        {% endfor %}
    </p>
    <p>{{ form.remember_me }} Remember Me</p>
    <p><input type="submit" name="" value="Sign In"></p>
</form>
{% endblock content %} 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T19:42:05.490

问题在下面一行：

```
providers=app.config['OPENID_PROVIDERS']) 
```

app.config 字典不存在键“OPENID_PROVIDERS”。自从您从文件 config.py 加载配置后，您是否还执行了以下操作：

```
app.config.from_object('config') 
```

在此处阅读更多文档：

[http://flask.pocoo.org/docs/config/](http://flask.pocoo.org/docs/config/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T13:16:14.040

您需要在**views.py**中添加以下内容：

```
from flask import flash, redirect
from app import app
from .forms import LoginForm 
```

并在**config.py**

```
CSRF_ENABLED = True
SECRET_KEY = 'your-secret-key' 
```

# iphone - 检测用户何时拍照或何时将新图像添加到相机胶卷

> ID：14604587
> 
> 赞同：4
> 
> 时间：2013-01-30T12:57:49.520
> 
> 标签：iphone, ios, objective-c, camera, alassetslibrary

在我的应用程序中，我有一个图像视图，显示相机胶卷中的最新图像。

我希望它始终更新，因此我需要一种方法来检测何时将新图像添加到相机胶卷中。

当用户从相机拍照或截图时是否有通知？或者更好的是是否有新图像添加到相机胶卷的通知？

# php - 如何在 GoDaddy 网站上正确使用 session_start()

> ID：14604589
> 
> 赞同：2
> 
> 时间：2013-01-30T12:57:51.750
> 
> 标签：php, session, post

**修复下面**我的问题与“已经发送”的标题无关。这只是问题的一个症状。该**问题最终成为 GoDaddy 的服务器端问题，**因为他们最终缺少一个文件夹。

我已经编辑了我的问题名称以包含“GoDaddy 站点”，以帮助将来遇到同样问题的人。

根据@KennyPowers 的建议，我打电话给 Go Daddy。我最初有一个 Windows 托管帐户并切换到 linux。显然，`session_start()`默认情况下保存到的文件夹没有随我网站的其他部分迁移，而且你不能更改默认文件夹..至少在我的网站上没有。

GoDaddy 替换了最后的文件夹，现在一切正常

* * *

**原始问题：**

我可以使用**session_start()提供一些帮助**

**网站流量：**

*   **page1.html**有一个**POST 到 page2.php的表单**
*   **page2.php**对数据进行一些处理并提供**指向 page3.php 的链接**
*   当**page3.php**加载时，它还**需要对****表单中的数据**做一些事情

 **所有页面都在同一个域上，所以我尝试使用 session_start()

这是我尝试过的：

## **第2页：**

```
<?php
// page2.php

session_start();

echo 'Welcome to page #2';

$_SESSION["guest1Last"] = $_POST["guest1Last"];
$_SESSION["guest1First"] = $_POST["guest1First"];
$_SESSION["guest1Middle"] = $_POST ["guest1Middle"];

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Title</title>
// more HTML and PHP stuff down here 
```

## **第 3 页：**

```
<?php
// page3.php

session_start();

echo 'Welcome to page #3<br />';

echo $_SESSION["guest1First"];  
echo $_SESSION["guest1Middle"];
echo $_SESSION["guest1Last"]; 

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
// more HTML and PHP stuff down here 
```

**这些是我在第 2 页加载时收到的警告：（第 3 页** 相同）

* * *

```
Warning: session_start() [function.session-start]: open(/var/chroot/home/content/08/10125908/tmp/sess_3dt4c7etqd6hr28dls0bludiv4, O_RDWR) failed: No such file or directory (2) in /home/content/08/10125908/html/_php/page2.php on line 4

Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/content/08/10125908/html/_php/page2.php:4) in /home/content/08/10125908/html/_php/page2.php on line 4

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/content/08/10125908/html/_php/page2.php:4) in /home/content/08/10125908/html/_php/page2.php on line 4
Welcome to page #2

Warning: Unknown: open(/var/chroot/home/content/08/10125908/tmp/sess_3dt4c7etqd6hr28dls0bludiv4, O_RDWR) failed: No such file or directory (2) in Unknown on line 0

Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct () in Unknown on line 0 
```

“ ***标头已发送”***部分让我认为 session_start() 不在页面上的正确位置，但它位于我认为应该在的顶部。也就是说，出于显而易见的原因，“***没有这样的文件或目录”很可能是问题的开始。***如果有人能指出我做错的方向，我将不胜感激。

**编辑**

* * *

```
<?php
session_start();
ini_set('session.save_path', '/var/chroot/home/content/08/10125908/html/tmp');
echo 'Welcome to page #1';

$_SESSION["guest1Last"] = $_POST["guest1Last"];
$_SESSION["guest1First"] = $_POST["guest1First"];
$_SESSION["guest1Middle"] = $_POST ["guest1Middle"];

?> 
```

*   我创建了一个文件夹 tmp 并赋予它所有权限
*   我添加了`ini_set('session.save_path', '/var/chroot/home/content/08/10125908/html/tmp');`
*   并尝试了 ini_set('session.save_path', 'html/tmp');
*   我还创建了一个文本文件并将 `session_save_path('/home/content/04/8260904/html/tmp');` 其保存为**php.ini**并将其上传到我的根目录
*   我还创建了一个文本文件并将
    `session_save_path('/home/content/04/8260904/html/tmp');` 其保存
    为**php5.ini**并将其上传到我的根目录

我仍然遇到同样的错误

```
 Warning: session_start() [function.session-start]: open(/var/chroot/home/content/08/10125908/tmp/sess_3659a32a50e33e5f918a9e39d70a1668, O_RDWR) failed: No such file or directory 
```

我没有正确设置文件夹目标吗？

* * *

**我的文件夹设置现在** ![在此处输入图像描述](../Images/e0f2ef6cb6ff9cc756afc07968b1b3fc.png)

根据@KennyPowers 的建议，我打电话给 Go Daddy。我最初有一个 Windows 托管帐户并切换到 linux。显然，该文件夹没有随我网站的其他部分一起迁移，而且你不能更改默认文件夹..至少在我的网站上没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:08:24.737

你的问题是你没有 tmp. 第一个错误说明了这一点：

```
Warning: session_start() [function.session-start]: open(/var/chroot/home/content/08/10125908/tmp/sess_3dt4c7etqd6hr28dls0bludiv4, O_RDWR) failed: No such file or directory (2) in /home/content/08/10125908/html/_php/page2.php on line 4 
```

这就是会话无法开始的原因。请参阅“ **...失败：没有这样的文件或目录 (2) in..** ”

您需要`/var/chroot/home/content/08/10125908/tmp/`在该目录上创建并设置读/写权限。您可以使用 php 脚本中的下一个函数更改会话临时目录：

```
ini_set('session.save_path', '/session/directory/goes/here'); 
```

在此之后收到的警告告诉您有一些数据发送回您的浏览器 - 这实际上是第一个警告文本。修复 tmp 目录问题后，它将立即修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:01:29.730

PHP 试图用来存储会话信息的目录不存在或不可写。

有问题的目录是：

`/var/chroot/home/content/08/10125908/tmp/`

此位置设置`PHP.ini`为`session.save_path`。

您需要确保此目录存在并且可由运行 PHP 的用户写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:08:26.450

PHP 在将数据写入会话文件时出现问题。您应该检查您的会话设置并验证是否在文件系统端设置了必要的权限。

```
Warning: session_start() [function.session-start]: open(/var/chroot/home/content/08/10125908/tmp/sess_3dt4c7etqd6hr28dls0bludiv4, O_RDWR) failed: No such file or directory (2) in /home/content/08/10125908/html/_php/page2.php on line 4 
```

关于**标头已发送**错误：由于您的错误报告级别，在尝试写入会话数据时生成了警告。此自动生成的警告是标头已发送错误的触发器。修复权限问题，它应该会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:00:34.903

`session_start();`您可能在请检查任何文本之前有一些输出（包括 . 之前的空格`session_start();`。它应该是您文档中的第一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T13:13:49.677

问题是 PHP 会话当前无法在您的服务器上运行，并且无法设置 cookie。PHP 服务器不允许会话启动，错误是您发现的方式。该错误告诉您它无法打开所需的会话临时文件夹，因为该文件夹不存在。

请检查此链接： [http ://tclayson.com/2012/03/08/how-to-fix-error-warning-session_start-function-session-start-openpathtofile-o_rdwr-failed-permission-denied-13-in -pathtoscript-php-on- line- **line** -2/](http://tclayson.com/2012/03/08/how-to-fix-error-warning-session_start-function-session-start-openpathtofile-o_rdwr-failed-permission-denied-13-in-pathtoscript-php-on-line-__line__-2/)**

# google-maps-api-3 - 谷歌地图在 IE7 中不显示

> ID：14604590
> 
> 赞同：1
> 
> 时间：2013-01-30T12:58:00.240
> 
> 标签：google-maps-api-3, internet-explorer-7

我正在尝试显示一个简单的地图，但它在 IE7 中不起作用（没有显示任何内容，而且 div 根本没有占据任何位置）。

它在 Chrome 和 Firefox 中运行良好。我还没有尝试过任何其他版本的 IE

模板是 Jade，但理解起来应该不成问题（.class 和 #id）

```
div.pull-right(style="width: 450px")
            div.well.well-small(style="width: 450px;")
                div#map-holder
                    div.map#map_canvas 
```

这是地图：

```
script
        function initialize() {
            var loc = new google.maps.LatLng(#{location.lat}, #{location.lng});
            var mapOptions = {
                center: loc,
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas"),
                mapOptions);

            var marker = new google.maps.Marker({
                        position: loc,
                        map: map,
                        animation: google.maps.Animation.DROP
            });
        } 
```

CSS

```
#map-holder img {
max-width: none;
}

.map{
    width:450px;
    height: 400px;
    margin-bottom: 20px;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:40:44.650

这不是有效的 Javascript：

```
var loc = new google.maps.LatLng(#{location.lat}, #{location.lng}); 
```

# c++ - VBO：未绘制数组

> ID：14604594
> 
> 赞同：0
> 
> 时间：2013-01-30T12:58:06.317
> 
> 标签：c++, glew, vertex-buffer, opengl-2.0

我正在遵循[本指南](http://ogldev.atspace.co.uk/www/tutorial03/tutorial03.html)，并且正在尝试在屏幕上绘制一个四边形。我也看到了源代码，它是一样的，它应该可以工作，但在我的情况下，屏幕上什么都没有显示。我正在使用带有顶点着色器的 OpenGL 2.0，它只是将颜色设置为红色，以使四边形在屏幕上可见。

在 callig glutMainLoop 我生成顶点缓冲区对象之前：

```
#include <GL/glut.h>
#include <GL/glew.h>

vector<GLfloat> quad; 
GLuint buffer;

void init()
{
    // This routine gets called before glutMainLoop(), I omitted all the code
    // that has to do with shaders, since it's correct.
    glewInit();
    quad= vector<GLfloat>{-1,-1,0, 1,-1,0, 1,1,0, -1,1,0};
    glGenBuffers(1,&buffer);
    glBindBuffer(GL_ARRAY_BUFFER, buffer);
    glBufferData(GL_ARRAY_BUFFER,sizeof(GLfloat)*12,quad.data(),GL_STATIC_DRAW);
} 
```

这是我的渲染例程：

```
void display()
{
    glClearColor(0,0,0,0);
    glClear(GL_COLOR_BUFFER_BIT);

    glEnableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER,buffer);
    glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,0,0);
    // I also tried passing quad.data() as last argument, but nothing to do.
    glDrawArrays(GL_QUADS,0,12);
    glDisableVertexAttribArray(0);

    glutSwapBuffers();
} 
```

问题是屏幕上没有任何东西，我只看到一个黑色的窗口。四边形应该是红色的，因为我在顶点着色器中设置了红色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:08:37.507

所以也许问题是 glDrawArrays(GL_QUADS, 0, 12); 中的计数。必须是 glDrawArrays(GL_QUADS, 0, 4);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:43:22.240

我错过了这样的 glEnableClientState ：

```
glEnableClientState(GL_VERTEX_ARRAY);
glDrawArrays(GL_QUADS,0,12);
glDisableClientState(GL_VERTEX_ARRAY); 
```

# asp.net - 如何使用除 aspnetdb 之外的数据库配置成员船

> ID：14604595
> 
> 赞同：0
> 
> 时间：2013-01-30T12:58:06.707
> 
> 标签：asp.net, sql-server-2008, asp.net-membership

我创建了一个数据库和表来存储用户登录值和凭据。asp.net 正在提供`aspnet_regsql`为会员相关活动创建数据库的工具。但我不想使用它。这就是我创建另一个数据库的原因。现在我想将此数据库连接到我的项目。我在 web.config 文件中将 connectionstring 参数更改为我新创建的数据库。但我无法登录。它给出以下错误消息。

`Could not find stored procedure 'dbo.aspnet_CheckSchemaVersion'`

如何使用这个。有没有分步程序啊！！如果有，请提供。除了 web.config 文件中的连接字符串，还有什么要更改的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:02:04.967

您需要创建一个成员资格提供程序以连接到您的自定义表以进行身份​​验证。MSDN 有一些关于这个主题的文档。您还可以在 ASP.NET 上观看有关该主题的视频。这是链接。

*   [http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e%28v=vs.100%29.aspx)
*   [http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

验证的主要方法将是 ValidateUser 方法，您将覆盖此方法以提供身份验证。

```
public sealed class CustomMembershipProvider : MembershipProvider
{
    // implement other methods

    public override bool ValidateUser(string username, string password)
    {
        try
        {
            var user = // GET USER OBJECT HERE
            if (user != null)
            {
                string name =  // set username

                // Set your forms authentication ticket
                FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, user.ID.ToString(), DateTime.Now, DateTime.Now.AddMinutes(30), false, name, FormsAuthentication.FormsCookiePath);

                HttpCookie authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, FormsAuthentication.Encrypt(ticket));
                HttpContext.Current.Response.Cookies.Add(authCookie); 
                return true;                    
            }
        }
        catch
        {
        }

        return false;
    }

    // Other implementations
} 
```

如果您的应用程序中有角色，您可能还希望实现自定义角色提供程序：

[http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx)

# powershell - PowerShell ISE 和 PowerShell.Exiting 事件

> ID：14604596
> 
> 赞同：1
> 
> 时间：2013-01-30T12:58:08.623
> 
> 标签：powershell, powershell-ise

我正在使用 PowerShell.Exiting 引擎事件来保存我的命令历史记录，并在我关闭 PowerShell 会话时进行其他一些整理，从而在我的配置文件中注册它：

```
# Set up automatic functionality on engine exit.
Register-EngineEvent PowerShell.Exiting -SupportEvent -Action `
{
    #stuff
    ...
} 
```

当我在控制台窗口中使用 PowerShell 时，这非常有效，但是当我在 ISE 中运行 PowerShell 时，PowerShell.Exiting 事件似乎永远不会触发，因为我没有放在那里，无论是通常的东西还是测试代码，永远运行。

这是一个已知问题吗？如果是，是否有已知的解决方法或替代方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T14:31:22.327

好吧，这真是太奇怪了。

在 Register-EngineEvent 调用之外完全删除配置文件后发现它仍然不起作用，我也开始删除其中的内容，并将配置文件的其余部分恢复到原始状态。以下是我的发现：

如果您`write-host`在 的脚本块中有 PowerShell 主机的 或其他输出，`Register-EngineEvent PowerShell.Exited`则退出 ISE 时它不会运行（即使退出控制台时它工作正常）。

事实上，您针对 PowerShell.Exited 事件注册的*任何*脚本块似乎都没有运行，即使是那些不包含任何输出到主机的语句的脚本块。（这就是为什么当我在上面测试其他人的工作示例时，它们对我不起作用，除非我在没有运行添加现有事件处理程序的配置文件的情况下启动 PowerShell。）

从您使用的脚本块中删除所有导致主机输出的语句`Register-EngineEvent PowerShell.Exited`，或将输出重定向到其他地方，它们都开始工作。

（把它和适量的盐一起吃，因为我还没有时间用调试器去追逐它，但我有一个偷偷摸摸的怀疑 ISE 在引擎完成之前关闭它的选项卡......）

# css - 不能在 div 中居中 ul。尝试了很多东西

> ID：14604599
> 
> 赞同：0
> 
> 时间：2013-01-30T12:58:15.623
> 
> 标签：css

顶部的导航栏包含`width: 100% height: 50px`并固定在顶部。

但是，里面的 UL 标签始终保持在左侧。它应该居中。

我尝试了很多东西，比如制作辅助 div 并给出它`margin: 0 auto`，给出
UL `margin: 0 auto`，制作`left %30`and`right %30`等`float: center`。

我错过了什么吗？我无法将其定位到中心的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:13:01.863

您需要为导航栏设置和宽度，以便它可以居中。

```
#menu-main-nav {
    width: 990px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:35:45.313

我很幸运以这些样式为中心的 UL：

```
<style>
#container {text-align:center;}
#container ul {display:inline;}
#container ul li {display:inline;list-style-type:none;}
</style> 
```

一般来说，我必须避开 display:inline-block，因为我们仍在为不承认“inline-block”的旧 IE 浏览器开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:05:54.700

您将需要一个包装 ul 的 div 并将其边距设置为“0px auto”，就像您尝试使用 ul 一样。

```
<div style="width:600px; margin:0px auto;">
     <ul>...</ul>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:06:20.383

在 '#navlist' 上将 text-align: left 更改为 text-align: center

在 '#navlist ul' 添加属性 display: inline-block;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T14:46:25.860

使该 div 具有一些固定宽度和浮动。左还是右。然后在里面..制作UL并具有margin：0 auto的属性；

```
div {
    width:200px;
    height:auto;
    float:left;
}

ul {
    margin:0 auto;
} 
```

# java - 值大于 127 的 Java 字符通过 tcp 发送

> ID：14604601
> 
> 赞同：1
> 
> 时间：2013-01-30T12:58:19.440
> 
> 标签：java, arrays, char

再会，

我遇到了一些麻烦。我正在尝试通过网络将字符数组发送到服务器。

这是我的代码：

```
char[] arr= {3,4};    
public void sendMessage(String message){
    if (out != null && !out.checkError()) {
        out.print(arr);
        out.flush();
    }
} 
```

当我运行它时，lanshark 检测到它收到了一个包含 2 个字节数据的数据包。好的，一切都很好。

现在当我运行这个：

```
 char[] arr= {3,160};      // notice 160 *****
public void sendMessage(String message){
    if (out != null && !out.checkError()) {
        out.print(arr);
        out.flush();
    }
} 
```

lanshark 说这个数据包有 3 个字节的数据？确切的数据是：

> 03 c2 a0

现在为什么要在其中添加c2？我知道这与我的 char 大于 127 的事实有关。但我需要发送这个 160 的值。

请你帮帮我。我需要使用其他类型的数据，还是以不同的方式发送？我知道你可以在 C 中做到这一点。我如何在 java 中做到这一点？

这是我的输出对象的代码：

```
PrintWriter out;
out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T13:24:42.977

事实上，程序正在做你告诉它做的事情。它正在发送两个字符；即 unicode 代码点`3`( `\u0003`) 和`160`( `\u00a0`)。这些字符正在使用您平台的默认字符编码进行编码......这似乎是 UTF-8。字节`c2 a0`是`\u00a0`字符的 UTF-8 编码。

但是您实际上想要做的是发送 2 个字节。

在 Java`char`中是 16 位类型，而不是 8 位类型。如果要发送 8 位值，则需要使用`byte`类型。

您犯的另一个错误是您尝试使用`Writer`. 该`Writer`接口用于（16 位）面向字符的数据。您应该使用`OutputStream`API ...

无论如何......这里有一个代码片段来说明你应该如何发送一个字节数组；

```
byte[] arr = new byte[]{3, (byte) 160);
OutputStream out = socket.getOutputStream();
out.write(arr); 
```

* * *

> 我现在只是将其更改为“ out.print(new String(arr).getBytes(Charset.forName("UTF-8"))); ”这是我在wireshark上获得的数据：11字节：5b42403431653230396538应该还是2个字节？

你让事情变得更糟了！

让我们把它分开：

*   `new String(arr)`给你一个 2 个字符的字符串。
*   `.getBytes(...)`会将其转换为包含 bytes 的 3 字节数组`03 c2 a0`。
*   `out.print(...)`将尝试调用API`print`上的方法。`PrintWriter`

但是哪一个？好吧，您提供了一个声明类型为 的参数`byte[]`。这将导致您调用`print(Object)`.

但是等一下……有什么作用`PrintWriter.print(Object)`？那么第一件事就是它确实是调用`toString()`参数。

那有什么作用呢？好吧，既然对象是 a `byte[]`，这将调用 提供的默认`toString()`方法`java.lang.Object`。这给了你一个字符串，它看起来像字节数组的“类名”`B[@xxxxxxxx`在哪里，而s 的序列是数组对象标识哈希码的十六进制表示！`[B``x`

然后你输出*那个*字符串。

看你的 2 个字节（实际上是字符）变成了 11 个字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:01:22.337

你还没有告诉我们任何关于`out`- 甚至类型 - 但我强烈怀疑它使用 UTF-8 来编码你的字符数据。U+00A0（即字符 160）在 UTF-8 中编码为 0xc2 0xa0。

如果您同时控制读写代码，那么使用 UTF-8 几乎可以肯定是*最好的选择：这意味着您可以使用整个 Unicode。*如果您使用 ISO-8859-1（这是我怀疑您期望使用的 - 每个字符一个字节，对于所有字符），您将自己限制在范围 [U+0000, U+00FF]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:12:35.150

您可以按如下方式将数据发送为“UTF-8”：

```
out.print(new String(arr).getBytes(Charset.forName("UTF-8")); 
```

您还必须使用 UTF-8 编码创建输出流，如下所示：

```
out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream(), "UTF-8")), true); 
```

现在您将发送`char`使用 UTF-8 编码的数组，因此每个字符最多 8 个字节（最大值为 256）。请参阅@JonSkeet 的答案以了解为什么需要“UTF-8”编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-24T05:43:16.600

确保输入和输出是相同的编码，然后你会得到你想要的。例如。，

**发送时**：

```
 mPrintWriterClient = new PrintWriter(new BufferedWriter(new    OutputStreamWriter(mSocket.getOutputStream(), "UTF-8")), true); 
```

**收货时**：

```
 mBufferedReaderClient = new BufferedReader(new InputStreamReader(mSocket.getInputStream(), "UTF-8")); 
```

# java - Java将数组传递给对象问题

> ID：14604608
> 
> 赞同：-2
> 
> 时间：2013-01-30T12:58:43.043
> 
> 标签：java, arrays, class, static

在java中，如何将数组传递给类。每当我这样做时，我都会收到“无法在静态上下文中引用非静态变量”。该阵列有 10 个位置。我将数组声明为。

编辑：这是一个更清晰的例子吗？我还应该注意，我的老师完全忽略了什么是静态的，以及它是如何使用的，声称程序员理解它并不重要。

**编辑2：我设法让它工作， `sorter sort = new sorter();` 把它变成 `static sorter sort = new sorter();` 了这对我的程序到底做了什么，这被认为是一个糟糕的修复吗？**

主要的

```
public class example {

    public static void main(String[] args) {

    int[] test = new int[10];
     sorter sort = new sorter();

     sort.GetArray(test);

    }
} 
```

班级

```
public class sorter {

    int[] InputAR = new int[10];

    public sorter
    {

    }

        public void GetArray(int[] a)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:03:25.690

您没有输入足够的代码，我的猜测是：

*   您声明了一个非静态字段（例如 int[] test = new int[10] 而不是 static int ...）
*   sort.getArray 在 main 或另一个静态方法中。

这是不可能的，因为非静态字段需要一个具体的对象才能存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:04:23.350

这是因为您正在调用`sort.GetArray(test)`某种`static`方法。您需要使数组变量`static`才能访问它。

只需阅读[本文](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)，您就会了解代码的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:04:40.533

“*不能在静态上下文中引用非静态变量*”

您的此错误与传递数组或其他内容无关。在您的代码中的某处，或者可能在`public void GetArray(int[] a)`您内部引用一个`static`成员，但具有非静态上下文。

使那个变量`non-static`，或方法`static`，反之亦然。

请参阅[此链接](http://www.javatutorialhub.com/java-static-variable-methods.html)了解更多信息。

# .net - 在桌面应用程序和 Web 应用程序之间是可行的

> ID：14604610
> 
> 赞同：0
> 
> 时间：2013-01-30T12:58:48.263
> 
> 标签：.net, vb.net, single-sign-on

我是 .Net 的新手，我已经创建了 web 和 windows 应用程序，它们之间是否可以使用 sso？

请帮助提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:58:22.997

您是否尝试过将 Web 应用程序设置为使用 Windows 身份验证（例如通过 IIS），以便自动传递凭据？这样您就不需要将任何数据从您的桌面应用程序传递到您的网络应用程序。

# asp.net - 是否可以直接在数据库中更改 asp.net 会员用户配置文件？

> ID：14604611
> 
> 赞同：0
> 
> 时间：2013-01-30T12:58:52.120
> 
> 标签：asp.net, sql-server-2008

我可以访问会员数据库，但配置文件属性值以某种神秘的二进制格式存储。

有什么方法可以仅使用 SQL 来解密、更改和保存这些内容，还是我需要使用 .net 实现用户管理系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:00:33.937

据我所知，使用会员 API 是您唯一的选择。这是有道理的：如果会员数据库很容易被破解，那么任何拥有必要数据库访问权限的人都可以轻松破解它。这样的人不一定在公司内拥有这种权力。

# php - PHP 中 date_default_timezone_set 的作用范围是什么？

> ID：14604616
> 
> 赞同：4
> 
> 时间：2013-01-30T12:58:58.837
> 
> 标签：php, date, timezone

PHP 中 date_default_timezone_set 的作用范围是什么？

我的意思是如果我使用：

```
function foo()
{
date_default_timezone_set('valid string'); /* where valid string is a valid date_default_timezone_set parameter */
echo (date('bla bla'));
} 
```

使用 foo() 后，日期会恢复到正常/默认时区吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:01:53.873

不，范围是执行脚本的生命周期。通常你调用`date_default_timezone_set`一次（在脚本初始化时）然后就忘了它。

# google-chrome-extension - 为什么 Chrome 扩展开发教程中的小猫示例没有加载任何图像？

> ID：14604620
> 
> 赞同：9
> 
> 时间：2013-01-30T12:59:08.487
> 
> 标签：google-chrome-extension

在“[入门](http://developer.chrome.com/extensions/getstarted.html)”页面中，我们得到了 Flickr 的承诺。根据说明将扩展组合在一起，没有小猫的好处实现。相反，弹出窗口显示一个小的空白矩形条，没有任何模糊或可爱的东西。

为什么？

（我问这个问题是为了回答这个问题，因为我找不到任何其他方法来报告错误。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-18T05:41:15.280

与 2014 年 6 月 18 日一样，Emerson 提到的修复似乎在示例下载中得到了解决。

如果您仍然无法在弹出窗口中看到图像，您应该考虑申请[Flickr API Key](https://www.flickr.com/services/apps/create/apply)

并将现有密钥替换为您在`poupup.js`文件第 25 行中生成的密钥。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T13:01:25.907

在第 40 行的 popup.js 文件中有一个错误。对 kittensOnFlickr_ 的引用应该改为 searchOnFlickr_。修复并重新加载，tada，kitteh。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-01T16:55:58.817

**8/1/2014** - 在线代码确实已经修复，但是在我粘贴自己的 API 密钥之前，本教程对我仍然不起作用。

**然而**

确保不要删除`&`粘贴的 api 密钥末尾的尾随 & 符号 (the )。＆符号需要在那里，否则您的代码仍然无法正常工作！

# jsf-2 - 查找相应 Trinidad 标记的标准 JSF 标记

> ID：14604627
> 
> 赞同：0
> 
> 时间：2013-01-30T12:59:25.450
> 
> 标签：jsf-2, trinidad

有什么方法可以找到相应特立尼达标签的标准 JSF 2 标签？谁能帮我确定以下特立尼达标签列表的等效 JSF 2 标签？

```
<tr:panelFormLayout> 
<tr:panelHorizontalLayout> 
<tr:goButton> 
<tr:spacer>
<tr:panelButtonBar>
<tr:panelHeader>
<tr:panelList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:02:14.433

没有等效的 JSF 2 标记。它们只是基本的 UI 组件，您可以将其与 HTML 和 CSS 结合使用，以达到 Trinidad 为您提供的开箱即用功能。这就像将苹果与橙子进行比较。

这是[JSF 标记](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/index.html)（核心 Faces、HTML、Composite、UI 和 JSTL）的一个很好的参考。

# jquery - 默认事件未在 Firefox 中停止

> ID：14604630
> 
> 赞同：1
> 
> 时间：2013-01-30T12:59:43.850
> 
> 标签：jquery, firefox

我遇到了跨浏览器问题。

我的代码是

```
$("<textarea/>").attr('rows',1).attr('wrap','off').keydown(function(event) {
    if (event.keyCode == 13) {
       $(this).trigger("dtSaveData");
       event.preventDefault();
    }
}); 
```

上面调用的函数是：

```
$row.on("dtSaveData", function() {
            // some function
});
that.$table.find("textarea").first().focus(); 
```

文本区域被聚焦，但同时触发了 Enter 按下事件。textarea 只有 1 行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T13:13:23.073

你的选择器`$('<textarea/>')`不起作用。您只需要`$('textarea')`

```
$('textarea').keydown(function(event) {
   $(this).trigger("dtSaveData");
   event.preventDefault();
}) 
```

# .net - .NET DataAdapter DataTableUpdate 剥离我的整数值

> ID：14604639
> 
> 赞同：1
> 
> 时间：2013-01-30T13:00:28.433
> 
> 标签：.net, database, datatable, firebird, dataadapter

我有一个火鸟数据库。我的数据集如下所示：

```
<xs:element name="MYTABLE">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="MYKEY" type="tgKEY" msdata:AutoIncrementSeed="0" msdata:AutoIncrement="true" />
            <xs:element name="NO" type="tgM" minOccurs="0" default="-1" />
            <xs:element name="NAME" type="tgName" />
            <xs:element name="MODUL" type="xs:short" />
            <xs:element name="FUNKTION" type="xs:short" />
            <xs:element name="RECHT" type="xs:short" />
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

有问题的列是 MODUL。在 firebird 数据库中，它的数据类型为 smallint，相当于 xs:short。因此，在 .NET 中，我将运行 dataAdapter.Update 以将所有更改从 dataTable 推送到我的数据库。MODUL 列的值为 108。但是在更新运行后，数据库中每个高于 100 的值都会被剥离为 10？！

我真的很想知道为什么会这样……我现在不知道:(

亲切的问候和非常感谢您的帮助！

编辑：

DataAdapter 来自类型：System.Data.Common.DbDataAdapter Firebird DataAdapter 是：FirebirdSql.Data.FirebirdClient.FbDataAdapter

# c# - 可视化二部图

> ID：14604640
> 
> 赞同：7
> 
> 时间：2013-01-30T13:00:33.033
> 
> 标签：c#, wpf, visualization, bipartite

有人可以推荐一个库或代码来可视化 C# 中的二分图吗？

Graph# 似乎不直接支持这种图（但对解开顶点有一些支持）。

我想创建一些像这个[二分图这样的图形](http://upload.wikimedia.org/wikipedia/commons/e/e8/Simple-bipartite-graph.svg)，在节点中有一些文本。具有相同宽度和高度的节点将是理想的。

WPF 控件将是完美的，因为它存在于 graph#。甚至可能存在 XAML 定义？作为替代方案：报告窗口也可以非常好。

可能在 Graph# 方面有更多经验的人可以提供有关如何使用 Graph# 执行此操作的提示。

使用 NodeXL 进行了一些尝试，但这似乎不是完美的解决方案，因为节点似乎不可修改。也许有人可以提供更好的解决方案。玩过 Soroush 提供的 NetworkView。目前这最接近我想要的。

**-update-** 试用了 Soroush Falahati 共享的 NetworkView。这似乎是一个很好的基础，但还没有我需要的那么灵活。我很难相信没有图书馆可以开箱即用地做这些事情。（NetworkView 具有在控件中设置连接/边缘的出色功能，这使其在 NodeXL 上得到了额外的提升）。也许 Graph# 可以做得更多，但目前我只是尝试了这两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:26:59.180

实际上，如果您可以使用客户端 jquery .. 我强烈推荐 jqPlumbs .. [http://www.jsplumb.org/jquery/demo.html](http://www.jsplumb.org/jquery/demo.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T17:40:15.937

您可以在[NodeXL](http://nodexl.codeplex.com/)中近似您的二分图可视化，甚至通过删除边缘交叉来改进它。我拿了你的示例二分图，在下图中，我将节点旁边的节点（u 或 v）着色。它们使用[Sugiyama 算法](http://en.wikipedia.org/wiki/Layered_graph_drawing)进行布局，最大限度地减少边缘交叉。我在 Excel 2007--2013 的交互式 NodeXL 模板中执行了此操作，但所有这些功能都应作为独立的 NodeXL C# 和 WPF 类库提供。截至本文的当前库可在[此处](https://nodexl.codeplex.com/releases/view/100910)下载。

![NodeXL Sugiyama 布局中的二分图](../Images/47f290b1831270b658273d63f7b73f6c.png)

我还尝试了 NodeXL 的 group-in-a-box 布局来分隔组并在网格中单独显示它们，结果很少。

![NodeXL 二分图](../Images/380e6a506698a2dd59c9dab80c2b427e.png)

*免责声明：我是 NodeXL 项目的顾问。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T12:14:24.123

如你所期待的，

这是一个示例/库，可让您轻松创建图形和流程图，

[http://www.codeproject.com/Articles/182683/NetworkView-A-WPF-custom-control-for-visualizing-a](http://www.codeproject.com/Articles/182683/NetworkView-A-WPF-custom-control-for-visualizing-a)

它实际上具有非常好的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T04:43:31.223

1.  [yFiles WPF](http://www.yworks.com/en/products_yfileswpf_about.html)是一个广泛的 .NET 类库，适用于 Windows Presentation Foundation (WPF) 应用程序。其用于查看和编辑图表的一流 UI 控件允许您通过单击按钮自动排列复杂的图形、图表和网络。我们为基于 Windows 窗体的应用程序设计的图表库是 yFiles.NET

2.  [Graph#](http://graphsharp.codeplex.com/)是一个图形布局框架。它包含一些布局算法和用于 WPF 应用程序的 GraphLayout 控件。

3.  [使用 WPF 可视化具有循环依赖关系的图形](http://www.codeproject.com/Articles/43776/Using-WPF-to-Visualize-a-Graph-with-Circular-Depen)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T18:43:55.570

如果您可以在 Windows 窗体中执行此操作，则可以使用[NShape](https://code.google.com/p/nshape/)。由于源可用，如果需要，您可以将其移植到 WPF。它可能会胜过从头开始编写它。或者，也许您可​​以托管一个 WinForms 控件来获得您需要的功能。不过，不如纯 WPF 解决方案好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T14:26:08.893

D3.js 是一个基于数据操作文档的 JavaScript 库。D3 帮助您使用 HTML、SVG 和 CSS 将数据变为现实。D3 对 Web 标准的重视为您提供现代浏览器的全部功能，而无需将自己束缚于专有框架，结合强大的可视化组件和数据驱动的 DOM 操作方法

D3 允许您将任意数据绑定到文档对象模型 (DOM)，然后将数据驱动的转换应用于文档。例如，您可以使用 D3 从数字数组生成 HTML 表格。或者，使用相同的数据创建具有平滑过渡和交互的交互式 SVG 条形图。

D3 不是一个寻求提供所有可以想象的功能的单一框架。取而代之的是，D3 解决了问题的症结：基于数据的文档的高效操作。这避免了专有表示，并提供了非凡的灵活性，展现了 CSS3、HTML5 和 SVG 等 Web 标准的全部功能。D3 以最小的开销，速度极快，支持大型数据集和动态行为以进行交互和动画。D3 的函数式风格允许通过各种组件和插件集合重用代码。

[http://d3js.org/](http://d3js.org/)

[http://mbostock.github.com/d3/talk/20111116/force-collapsible.html](http://mbostock.github.com/d3/talk/20111116/force-collapsible.html)

# json - 用 JSON 字符串填充的 jsTree

> ID：14604645
> 
> 赞同：1
> 
> 时间：2013-01-30T13:00:47.000
> 
> 标签：json, jstree

我得到了这个jsTree：

```
$(function () {
    $("#tree").jstree({
        "json_data" : {
            "data" : [
                {
                    "data" : "<?php echo $db_obj->getValue('article_group_name') ?>",
                    "metadata" : { id : 23 },
                    "children" : [ "Child 1", "A Child 2" ]
                }
            ]
        },
        "plugins" : ["themes","json_data", "ui" ]
    });
}); 
```

我想用数据库数据填充它。Childs 应该来自数据库。我 json_encoded 表数据，它看起来像这样：

```
[Object { article_id=

"4949"

,  article_name_internal=

"Nachtlampe Lumilove Barbapapa"

}, Object { article_id=

"4947"

,  article_name_internal=

"Wanduhr Silk von Koziol"

}, 
```

当我单击其中一个孩子时，它应该转到该页面。不知道如何用这些数据填充树。有什么指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:34:21.947

jsTree 的每个节点都有一个可以设置的属性列表。只需`attr`在 JSON 中使用该属性并添加一组表示您想要的数据的属性值对。

`href`一旦有人单击您的 jsTree 的节点，这些属性之一应该是包含您想要打开的页面的 URL。

现在你的服务器应该像这样返回数据。

```
{
    "data": "Root",
    "attr": {
        "id": "1",
        "rel": "Root",
        "type": 0
    },
    "children": [{
        "data": "Test 1",
        "attr": {
            "id": "2",
            "href": "http://www.google.com"
            "rel": "OrganizationalUnit",
            "type": 1
        },
        "children": [],
        "state": "open"
    }],
    "state": "open"
} 
```

并且您的 JSTree inint 函数应该执行以下操作：

```
k_OrgTree = $("#OrgTree").jstree({
        json_data: {
            ajax: {
                url: "/Administration/PopulateTree",
                type: "POST",
                dataType: "json",
                contentType: "application/json charset=utf-8",
                success: function (data) { }
            }
        },
        themes: currentTheme,
        types: {
            valid_children: [k_Root],
            types: {
                Root: {
                    valid_children: [k_OrganizationalUnit, k_Calendar],
                    icon: { image: "/Content/Administration/Images/Root/Root_32x32.png" },
                    delete_node: false,
                },
                OrganizationalUnit: {
                    valid_children: [k_OrganizationalUnit, k_Calendar, k_User],
                    icon: { image: "/Content/Administration/Images/OrganizationalUnit/OrganizationalUnit_32x32.png" },
                },
                Calendar: {
                    valid_children: ["none"],
                    icon: { image: "/Content/Administration/Images/Calendar/Calendar_32x32.png" },
                    create_node: false
                },
                User: {
                    valid_children: ["none"],
                    icon: { image: "/Content/Administration/Images/User/User_32x32.png" },
                    create_node: false
                }
            }
        },

        plugins: ["themes", "json_data", "types", "ui"]

    }); 
```

# django - 如何正确停止gunicorn

> ID：14604653
> 
> 赞同：69
> 
> 时间：2013-01-30T13:00:55.417
> 
> 标签：django, gunicorn, django-manage.py

我正在使用 Django command 开始 gunicorn `python manage.py run_gunicorn`。如何正确停止 gunicorn？

注意：我有一个带有结构的半自动服务器部署。因此，使用诸如`ps aux | grep gunicorn`通过 pid 手动终止进程之类的方法不是一种选择。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-01-30T13:29:45.443

查看进程`ps ax|grep gunicorn`并停止 gunicorn_django 是`pkill gunicorn`.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-30T13:19:50.963

一种选择是[`Supervisor`](https://github.com/benoitc/gunicorn/blob/master/examples/supervisor.conf)用来管理 Gunicorn。

然后我又不明白为什么你不能通过`Fabric`. 假设您让 Gunicorn[编写一个 pid 文件](https://gunicorn-docs.readthedocs.org/en/latest/settings.html?highlight=pid#pidfile)`Fabric`，您可以在命令中轻松读取该文件。

像这样的东西应该工作：

```
run("kill `cat /path/to/your/file/gunicorn.pid`") 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-10-28T11:21:20.200

```
pkill gunicorn 
```

或者

```
pkill -P1 gunicorn 
```

应该杀死所有正在运行的 gunicorn 进程

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-08-15T21:25:30.513

`pkill gunicorn`停止所有 gunicorn 守护进程。因此，如果您正在运行具有不同端口的多个 gunicorn 实例，请尝试使用此 shell 脚本。

```
#!/bin/bash
Port=5000
pid=`ps ax | grep gunicorn | grep $Port | awk '{split($0,a," "); print a[1]}' | head -n 1`
if [ -z "$pid" ]; then
  echo "no gunicorn deamon on port $Port"
else
  kill $pid
  echo "killed gunicorn deamon on port $Port"
fi 
```

`ps ax | grep gunicorn | grep $Port`显示具有特定端口的守护进程。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-08-12T10:52:12.703

这是对我有用的命令：

```
pkill -f gunicorn 
```

它将杀死任何名为 gunicorn 的进程

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-10-01T06:35:18.347

启动在 gunicorn 上运行的服务

```
sudo systemctl enable myproject

sudo systemctl start myproject 
```

或者

```
sudo systemctl restart myproject 
```

**但是要停止在 gunicorn 上运行的服务**

```
sudo systemctl stop myproject 
```

要了解有关使用 gunicorn 托管 python 应用程序的更多信息，[请参阅此处](https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-gunicorn-and-nginx-on-ubuntu-18-04)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-01-13T09:54:29.790

开始：

```
gunicorn --pid PID_FILE APP:app 
```

停止：

```
kill $(cat PID_FILE) 
```

的`--pid`标志`gunicorn`需要一个参数：将存储进程 ID 的文件。该文件也会在服务停止时自动删除。

为了简单起见，我`PID_FILE`使用了类似的东西`/tmp/MY_APP_PID`作为文件名。

如果 PID 文件存在，则表示服务正在运行。如果不存在，则服务未运行。要停止服务，只需按上述方式将其杀死。

您可能还希望包含该`--daemon`标志，以便将进程与当前 shell 分离。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-15T06:44:14.100

```
kill -9 `ps -eo pid,command | grep 'gunicorn.*${moduleName:appName}' | grep -v grep | sort | head -1 | awk '{print $1}'` 
```

`ps -eo pid,command`只会获取进程 ID、命令和参数

`grep -v grep`摆脱像 'grep --color=auto xxx' 这样的输出

`sort | head -1`做升序并得到第一行

`awk '{print $1}'`找回pid

您可能还需要注意一件事：gunicorn 安装在哪里以及您使用的是哪一个？

Ubuntu 16默认安装了gunicorn，可执行文件是gunicorn3，位于/usr/bin/gunicorn3，如果你通过pip安装，它位于/usr/local/bin/gunicorn。您需要使用`which gunicorn`并`gunicorn -v`找出答案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-12T13:30:11.470

如果您错误地运行了它，并且您想在不编写额外脚本且不重新启动服务器的情况下停止它。所以这里有一个**技巧。**

一、卸载gunicorn

```
sudo pip3 uninstall gunicorn # I am using python3 in ubuntu server so I am using sudo and pip3 
```

然后终止为您的应用程序端口号运行的进程（我假设端口号默认为**8000**）。

要获取您的应用程序正在运行的进程号，请使用以下命令：

```
sudo lsof -i:8000 
```

结果

```
COMMAND     PID USER   FD   TYPE  DEVICE SIZE/OFF NODE NAME
gunicorn 17XX95 root    6u  IPv4 155XXXX      0t0  TCP localhost:8000 
gunicorn 17XX97 root    6u  IPv4 155XXXX      0t0  TCP localhost:8000 
```

然后直接杀掉进程，有可能得到多个进程id（PID），看上面的结果。

```
sudo kill 17XX95 17XX97 
```

现在如果你想重新安装 gunicorn 你可以安装它

```
sudo pip3 install gunicorn 
```

# php - 简化 mysql 查询

> ID：14604659
> 
> 赞同：0
> 
> 时间：2013-01-30T13:01:07.507
> 
> 标签：php, mysql, sql

## 设想

我在这个问题中有三个要素。一个是这种格式的 id 数组：(1,3,5,6,8)。该数组是我要显示的用户 ID 列表。第二个元素是包含用户信息的表格，例如：*id name surname email*。第三个元素是包含用户配置的第二个表。最后一张表中有两个参数，一个是**lid**，另一个是**usraction**（其中重要的是这两个）。lid 代表权限类型和 usraction 值，如果用户希望他的数据是公开的，那么该表上将有一行**lid=3**和**usraction="accepted"**，每次用户更改此权限时，我都会注册操作的日期时间，因此每次更改时都会添加一个新行，为了检索权限的实际状态，我必须为用户检索最后一行像这样检查 usraction 的值：

```
SELECT * FROM legallog WHERE uid = '.$user['id'].' AND lid = 3 ORDER BY ABS(`registration` - NOW()) LIMIT 1 
```

然后在php中：

```
if($queryresult && $queryresult[0]['usraction']=='accepted') //display data 
```

## 问题

在描述了我如何获得当时一个用户设置的权限的实际状态的场景 id 中，现在的问题是我想在一两个 sql 调用中清理一组 id。假设我想打印 4 个用户的用户信息，一个函数给了我这种格式的 id：(2,6,8,1)，但是这些用户可能不想显示他们的信息，使用我之前显示的查询我可以为每个用户调用 sql 服务器，然后生成一个新数组，如果授权的用户是 1 和 8，则结果数组将为 (8,1)。

想法是 100 个用户的数组，我将拨打 100 个电话，我不想要这个，有没有办法在一个或两个查询中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:03:22.873

像这样的查询可以为您提供所需的信息：

```
select u.*,
       (select usraction from configuration c where c.userid = u.userid and c.lid = 3 order by datetime limit 1
       ) as lastLid3Action
from users u
where u.userid  in (1,3,5,6,8) 
```

如果您只想要“接受”值，则将其设为子查询：

```
select t.*
from (select u.*,
             (select usraction from configuration c where c.userid = u.userid and c.lid = 3 order by datetime limit 1
             ) as lastLid3Action
      from users u
      where u.userid  in (1,3,5,6,8)
     ) t
where LastLid3Action = 'Accepted' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:07:24.220

据我了解，您在第一个表中有两个表，用于存储用户信息；第二个表，存储用户权限。并且您想使用第二个表的权限从第一个表中获取信息，那么您需要以下查询：

```
SELECT a.*
FROM first-table-name AS a
RIGHT JOIN second-table-name AS b a.uid = b.lid
WHERE uid in (1,3,5,6,8) AND usraction='accepted'
ORDER BY ABS)
LIMIT 1 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T14:29:43.863

您的问题有些含糊，但是如果您问的是当您有一个 id 列表时如何选择多个记录，答案是：

```
select column, list, goes, here from tablename
where id in (1,5,8,12,413); 
```

这将为您提供仅针对与您的 id 数组匹配的记录列出的列的值。

# python - 使用织物复制具有特定扩展名的文件夹

> ID：14604660
> 
> 赞同：2
> 
> 时间：2013-01-30T13:01:09.147
> 
> 标签：python, fabric

我想将所有文件夹复制到远程机器上`fabric`，通常我可以使用该功能`put`，但我只想复制文件夹中的python文件而不是`.pyc`文件，那么我该如何处理？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:13:03.520

对于远程模式，您可以通过输入仅检索*.py 文件*：

```
find /some/path -name '*.py' 
```

# php - 使用 AJAX 打开 PHP 文件

> ID：14604667
> 
> 赞同：-2
> 
> 时间：2013-01-30T13:01:25.597
> 
> 标签：php, javascript, ajax

我正在尝试使用 AJAX 执行 PHP 文件，该文件应该更新 txt 文件

这是我的 javascript

```
 function getXMLHttp()
    {
      var xmlHttp

  try
  {
    //Firefox, Opera 8.0+, Safari
    xmlHttp = new XMLHttpRequest();
  }
  catch(e)
  {
    //Internet Explorer
    try
    {
      xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
    }
    catch(e)
    {
      try
      {
        xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
      }
      catch(e)
      {
        alert("Your browser does not support AJAX!")
        return false;
      }
    }
  }
  return xmlHttp;
}

function MakeRequest()
{
  var xmlHttp = getXMLHttp();
  var host = window.location.hostname;
  var dir1=window.location.pathname.split("/")[1];
  var dir2=window.location.pathname.split("/")[2];
  var p = document.getElementById(\'CTI_IP\').value;
  var url=\'http://\'+host+\'/\'+dir1+\'/modules/company/include/file.php?var=\'+p;
  xmlHttp.open("POST",url,true);
  if (xmlHttp.readyState==4) 
 {
  xmlHttp.send();
 }
} 
```

url很好，我提醒了它，复制粘贴链接，php文件工作完美，更新txt文件，但在ajax中不起作用？为什么

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:04:17.763

你有一个语法错误：

```
var p = document.getElementById(\'CTI_IP\').value;
                                ^HERE 
```

（以及类似的散布在各处）。

这应该显示在浏览器的 JavaScript 错误控制台中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:05:19.637

当您构建 URL 时，您构建它是错误的。您正在转义不需要转义的引号。它应该按如下方式构建：

```
var url = "http://" + host + "/" + dir1 + "/modules/company/include/file.php?var=" + p; 
```

由于某些未知原因，您还转义了 getElementById 调用中的引号。它应该被如下调用：

```
var p = document.getElementById("CTI_IP").value; 
```

唯一要转义引号的时间是您希望它们包含在字符串中。在这些情况下，您不应该对它们进行转义，因为它们表示一个字符串——它们不应该被包含在内。

我建议您研究一下字符串在 Javascript 中的工作原理。

一旦你修复了这些错误，删除你周围的 if 块`xmlHttp.send()`。

你有：

```
if (xmlHttp.readyState==4) 
{
    xmlHttp.send();
} 
```

但应该只有

```
xmlHttp.send(); 
```

最后，由于您没有在上面的示例中包含它，我假设您实际上并没有在`MakeRequest()`任何地方调用您的函数。您必须在代码中的某处调用该函数才能使其实际执行该函数。

只需按如下方式调用该函数：

```
MakeRequest(); 
```

# firefox - 由于配置文件未在 Java 上完全清除，无法再启动 Firefox webdriver

> ID：14604669
> 
> 赞同：2
> 
> 时间：2013-01-30T13:01:30.787
> 
> 标签：firefox, firefox-addon, selenium-webdriver

亲爱的 Selenium Webdriver 专家，

我无法再启动/实例化 Firefox webdriver 并在第 4 行出现以下错误：

```
org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host localhost on port
7055 after 45000 ms. Firefox console output:
*** LOG addons.manager: Application has been upgraded
*** LOG addons.xpi: startup
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: C:\DOCUME~1
\george\LOCALS~1\Temp\anonymous464046490888820385webdriver-profile\extensions\webdriver-staging
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi-utils: Opening database
*** LOG addons.xpi-utils: Creating database schema
*** LOG addons.xpi: New add-on fxdriver@googlecode.com installed in app-profile
*** LOG addons.xpi: New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} installed in app-global
*** LOG addons.xpi: New add-on {20a82645-c095-46ed-80e3-08825760534b} installed in winreg-app- 
    global
*** LOG addons.xpi: Updating database with changes to installed add-ons
*** LOG addons.xpi-utils: Updating add-on states
*** LOG addons.xpi-utils: Writing add-ons list
*** LOG addons.manager: shutdown
*** LOG addons.xpi: shutdown
*** LOG addons.xpi-utils: shutdown
*** LOG addons.xpi-utils: Database closed 
```

请注意，即使在没有任何内容的情况下打开 Firefox 浏览器，webdriver 也无法控制它而不会崩溃。即无法通过第 4 行。

以下是过去有效但在第 4 行崩溃的代码片段：

```
4\.  WebDriver driver = new FirefoxDriver();
5\.  driver.get("http://www.abc.com/index.htm"); 
```

此问题是在使用命令“firefox.exe -p”删除文件夹“E:\Mozilla Firefox Profile”和 Firefox 配置文件以访问 Firefox 配置文件管理器后出现的。但是，Firefox 配置文件管理器似乎还在我的主文件夹中创建了许多文件夹，例如“C:\DOCUME~1\george\LOCALS~1\Temp\anonymous464046490888820385webdriver-profile\extensions\webdriver-staging”，这些文件夹不再存在.

因此，我需要您的帮助来解决以下方面的问题：

(i) 如何彻底清除/删除所有 Firefox 配置文件查找/设置引用，并简单地启动/实例化通用（无配置文件）Firefox 浏览器以成功通过第 4 行。由 Firefox Webdriver 启动/打开，这表明它仍在使用某个位置的配置文件，但不知道是什么和在哪里。然而，手动打开 Firefox 时设置了“无代理”。

最初设置了一个 Firefox 配置文件，以便在从 Selenium webdriver 中启动/调用时，可以在浏览器中激活/包含 Firebug 和 Firepath。

我在 Windows XP 和 7 平台上运行 Java 1.7.0_11、Selenium Webdriver 2.25.0。

您的帮助将不胜感激。

谢谢，

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:36:10.910

您的 Firefox 版本已升级，硒不支持。所以降级到版本 15 ，（根据我的使用情况支持的最高版本）。它会正常工作

[您可以从此处](http://download.cdn.mozilla.net/pub/mozilla.org/firefox/releases)下载所需版本的 Firefox

要停止自动更新 firefox，请卸载 Mozilla 维护服务（在 Windows 中）并在
工具 -> 选项 -> 高级 -> 更新选项卡中，禁用更新检查插件和 firefox

# android - 如何从 hashmap 中获取值并显示测验应用程序..？

> ID：14604674
> 
> 赞同：0
> 
> 时间：2013-01-30T13:01:36.900
> 
> 标签：android, textview, radio-button, hashmap

我在测验应用程序中遇到问题...

我的问题是..

我通过 JSON 获得了 Questionid、问题和答案。我用单键存储在哈希图中。现在我想做的是...

如何根据 questionid 从 hashmap 获取问题和答案..在文本视图中显示问题并在单选按钮中显示答案...

我该如何实施？任何帮助将不胜感激......提前非常感谢......

> ```
>  protected void onPostExecute(String file_url) {
>    pDialog.dismiss();   
>        List<NameValuePair> params = new ArrayList<NameValuePair>();
>     params.add(new BasicNameValuePair("tid", tid));
>     JSONObject json = jsonParser.makeHttpRequest(url_get_quesid, "GET", params);
>     json = jsonParser.makeHttpRequest(url_get_quesurl, "GET", params);
>       try {
>     int success = json.getInt(TAG_SUCCESS);
>     if (success == 1) {
>     System.out.println("Success");
>     groups = json.getJSONArray(TAG_GROUP);
>     System.out.println("Result Success+++"+groups);
>     for (int i = 0; i < groups.length();i++) {
>     JSONObject c = groups.getJSONObject(i);
>     String questionid = c.getString(TAG_QUESID);
>     String question = c.getString(TAG_QUES);
>     String answer = c.getString(TAG_ANSW);
>     System.out.println("Checking ::"+questionid);
>     id=questionid;         
>     quesid.add(questionid);
>     HashMap<String, String> map = new HashMap<String, String>();
>     map.put(questionid,  question + ";" + answer);                  
>     System.out.println("QuestionIDMap:"+map);
>         }
>     } else {
>     showAlert();
> }
>     } catch (JSONException e) {
>     System.out.println("Error "+e.toString());
>     }       
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:55:52.433

首先，您想使用您的 questionid 作为地图键。

一旦你有了它，你就可以简单地做一些类似的事情；

字符串总计 = map.get(questionid); String[] split = total.split(";");

字符串问题 = split[0]; 字符串答案 = split[1];

* * *

总的来说，我宁愿推荐使用数据库，然后将所有内容保存在集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:59:08.873

你`map`是本地的`onCreate()`。这意味着`onCreate()`完成后，**您的地图将被销毁**，您将无法再访问它。将地图作为`Activity`. 然后你可以从任何你想要的地方访问它并做得到`map.get(questionId)`问题。

您的活动将如下所示：

```
public class YourActivity extends Activity {
    private HashMap<String, String> questions = new HashMap<String, String>();

    protected void onPostExecute(String file_url) {
       pDialog.dismiss();   
           List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tid", tid));
        JSONObject json = jsonParser.makeHttpRequest(url_get_quesid, "GET", params);
        json = jsonParser.makeHttpRequest(url_get_quesurl, "GET", params);
        try {
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                System.out.println("Success");
                groups = json.getJSONArray(TAG_GROUP);
                System.out.println("Result Success+++"+groups);
                for (int i = 0; i < groups.length();i++) {
                    JSONObject c = groups.getJSONObject(i);
                    String questionid = c.getString(TAG_QUESID);
                    String question = c.getString(TAG_QUES);
                    String answer = c.getString(TAG_ANSW);
                    System.out.println("Checking ::"+questionid);
                    id=questionid;         
                    quesid.add(questionid);         
                    questions.put(questionid,  question + ";" + answer);                  
                    System.out.println("QuestionIDMap:"+map);
                }
            } else {
                showAlert();
            }
        } catch (JSONException e) {
            System.out.println("Error "+e.toString());
        }       
    }
} 
```

然后，您可以`Activity`通过执行从您的任何地方访问问题`questions.get(questionId)`。

# android - 与外部可触摸的对话框

> ID：14604679
> 
> 赞同：1
> 
> 时间：2013-01-30T13:01:48.260
> 
> 标签：android, dialog

在一个 android 应用程序中，我想`Dialog`在屏幕上显示一个，同时允许用户在`Dialog`打开时单击应用程序的 UI 可以这样做吗？

如果没有，我可以用什么代替`Dialog`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:04:39.770

在您的 Activity 上显示一个对话框，将使您的 Activity 进入 onPause() ，因此您将无法再实际处理该 Activity 中的内容，直到该对话框被解除。

如果您想要一些视图，请将您要寻找的原始活动视图覆盖到 FrameViews 的方向，这可以与其他视图重叠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:09:21.220

我不认为你可以用`Dialog`. 但是您可以`PopupWindow`使用`PopupWindow.setOutsideTouchable(true);`.

# webdriver - Firefox Webdriver + 执行期间安装插件

> ID：14604682
> 
> 赞同：1
> 
> 时间：2013-01-30T13:01:53.190
> 
> 标签：webdriver

我正在使用 Selenium Webdriver 进行自动化。最近我需要打开一个网页，安装一个插件（在后端）并单击一个按钮。该按钮检测已安装的插件并让我继续。

我可以在普通的 Firefox 窗口中看到它。但不知何故，WebDriver 发起的 firefox 不允许这样做。该插件在网页中被实例化，并且按钮被启用。

我可以安装插件并在 Add Ons 页面中看到它，但该按钮未启用。

有没有一种方法可以强制 webdriver 重新加载所有插件，或者由于 webdriver 阻止插件被实例化，是否存在任何安全问题？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:12:02.247

如果您想使用`Add-on's`意味着您必须为 Firefox 创建一个配置文件，并在该配置文件中包含附加组件，该配置文件由 Web 驱动程序应用程序启动。这将允许您通过附加组件访问“Web 元素”。我不确定它会如何反应。我还没试过。但这是使用插件启动浏览器的方式。

```
File file = new File("firebug-1.8.1.xpi");
FirefoxProfile firefoxProfile = new FirefoxProfile();
firefoxProfile.addExtension(file);
firefoxProfile.setPreference("extensions.firebug.currentVersion", "1.8.1"); // Avoid   tartup screen
WebDriver driver = new FirefoxDriver(firefoxProfile); 
```

参考来自 - [http://code.google.com/p/selenium/wiki/FirefoxDriver](http://code.google.com/p/selenium/wiki/FirefoxDriver)

# jsp - 为什么 struts 提交按钮可以在 Chrome 和 firefox 中工作，但不能在 IE 中工作

> ID：14604687
> 
> 赞同：0
> 
> 时间：2013-01-30T13:01:59.010
> 
> 标签：jsp, struts, struts-1

我的jsp中有这个标签：

`<html:submit property="command" value="Save"/>`

当我在其他浏览器中单击按钮时，我的 struts 操作能够得到响应。但是在 I.E8 中这似乎不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:17:09.403

即使我对struts 1.3标签等也有同样的问题。尝试通过HttpRequest属性获取浏览器名称并管理jsp页面中的内容......

# c++ - 指向 Thread 的指针数组中 PCB 中的相同名称

> ID：14604691
> 
> 赞同：0
> 
> 时间：2013-01-30T13:02:15.053
> 
> 标签：c++, stack, kernel

我正在为 C++ 中的线程处理编写代码。Thread 的一个实例有一个指向 PCB 结构的指针，并且在我刚刚调用的 Thread 的构造函数中`myPCB = new PCB(name, stackSize, timeSlice, this)`。在我尝试创建一个指向 Thread 的指针数组之前，这一切都很好。

当我只是创建一个指向线程的指针并使用 new Thread(name, stackSize, timeSlice) 对其进行初始化时，该线程在 PCB 中的名称被正确指定。

但是当我尝试使用指针数组时，所有 PCB 的名称变量值都相同。

我检查过，它们都是不同的 PCB（它们的 ID 不同）。它们的名称在构造函数中被正确初始化，但在第 N 个构造函数的结尾和第 (N+1) 个结尾之间的某个位置，所有名称都获得相同的值，即 N+1 的值。

PCB构造器：

```
PCB::PCB(TName namee, StackSize stackSizee, Time timeSlicee,Thread *threadd){
    status = begging;

    id = genID++;
    if(namee) name = namee;
    else name = "Thread"+id;

    createStack(stackSizee);

    thread = threadd;

    timeSlice = timeSlicee;

    System::numberOfThreads++;
    System::allPCBQueue.add(this);

    waitingMe = new Queue();
    waitingFor = 0;

    semaphore = 0;

    sleepTime = -1;
    }

void PCB::createStack(StackSize stackSize){
    intOff;
    if(stackSize > maxStack) stack = new char[maxStack];
     else stack = new char[stackSize];

    newSS = FP_SEG(stack + stackSize);
    newSP = FP_OFF(stack + stackSize);
    asm{
      mov oldSS, ss
      mov oldSP, sp
      mov ss, newSS
      mov sp, newSP

      push ax; push bx; push cx; push dx; push es; push ds; push si; push di; push bp

      mov newSP, sp
      mov newSS, ss
      mov sp, oldSP
      mov ss, oldSS
    }

    stackPointer = MK_FP(newSS, newSP);
    intOn;
} 
```

我用 createStack() 计算它的东西，但我不知道是什么。感谢所有帮助。

*注意：我目前无法经常访问互联网，所以如果我没有快速回复，请不要生气。我会尽可能多地检查这个问题。

编辑：PCB类定义：

```
class PCB
{
    static ID genID;

    char *stack;
    void *stackPointer;
    Thread *thread;

    TName name;
    ID id;

    Time timeSlice, sleepTime;
    Status status;

    Queue *waitingMe;
    PCB* waitingFor;

    KernelSem* semaphore;

    friend class Thread;

//  static unsigned newSS, newSP, oldSS, oldSP;

public:
    static StackSize maxStack;

    PCB(TName name, StackSize stackSize, Time timeSlice,Thread *thread);
    ~PCB(void);

    void runThread();

    ID getID(){
        return id;
    }
    TName getName(){
        return name;
    }

    void setStatus(Status status){
        this->status = status;
    }
    Status getStatus(){
        return status;
    }
    int getEnding(){
        if(status == ending) return 1;
        return 0;
    }
    int getBegging(){
        if(status == begging) return 1;
        return 0;
    }

    void createStack(StackSize stackSize);
    void* getStackPointer(){
        return stackPointer;
    }
    void setStack(void *newStackPointer){
        stackPointer = newStackPointer;
    }

    Time getTimeSlice(){return timeSlice;}

    Time getSleepTime(){return sleepTime;}
    void decrementSleepTime(){sleepTime--;}

    void setSemaphore(KernelSem* kersem){this->semaphore = kersem;}
    void resetSemphore(){this->semaphore = 0;}

    Thread* getThread(){return thread;}
}; 
```

发生这种情况的代码：

```
Producer **pro = new Producer*[N];

for (i=0; i<N; i++){
    producerName[8]='0'+i;
    pro[i] = new Producer(buff, producerName ,'0'+i, TIME_SLICE);
    pro[i]->start();
} 
```

这是我通过这项作业获得的测试文件的一部分。它不应该改变。但它是常规的。我放了

```
allPCBQueue->listAll() 
```

后

```
pro[i] = new Producer(buff, producerName ,'0'+i, TIME_SLICE); 
```

我总是知道所有的名字都是一样的。allPCBQueue 是一个简单的 PCB 列表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:27:31.133

```
if(namee) name = namee;
else name = "Thread"+id;    <<< Doesn't do what you think it does. 
```

“线程”是一个字符 *，向它添加一个数字将为您提供指针 + 偏移量。

在创建新堆栈之前，您不想切换到新堆栈。而不是使用推送存储，只需使用以下内容：

```
stackPointer = MK_FP(newSS, newSP);

unsigned *sp = reinterpret_cast<unsigned *>(stackPointer);

*--sp = 0;   // AX
*--sp = 0;   // BX
*--sp = 0;   // CX
*--sp = 0;   // DX
*--sp = default_ds;   // You'll have to dig this out with some inline assembler
*--sp = default_es;   // You'll have to dig this out with some inline assembler
*--sp = 0;   // SI
*--sp = 0;   // DI
*--sp = 0;   // BP

stackPointer = reinterpret_cast<void *>(sp); 
```

[当然，首先将 stackpointer 设为指向 int 的指针会更容易]。

由于线程是从头开始的，AX、BX 等的值无关紧要。ES/DS 可能很重要，具体取决于您使用的内存模型。不推入堆栈也意味着您不必为此部分禁用中断 - 总是一个奖励。

不幸的是，您的代码没有显示您正在使用“PCB 阵列”做什么，所以我不能说那里有什么问题。而且我敢肯定有人说这应该是评论，而不是答案，因为它实际上并没有回答您的问题-但是在评论中格式化代码几乎是没有希望的...

编辑：

我猜“生产者名称”是您的代码中创建线程的局部变量。这行不通，但我认为要求调用者必须确保该名称永远存在有点困难，所以我认为你应该做的是：

```
if(namee)
{
    size_t len = strlen(namee);
    char *name_buf = new char[len+1];
    strcpy(name_buf, namee);
    name = name_buf;
}
else
{
   // Make up some random name here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:43:13.677

代码是

```
name = namee 
```

或者

```
this->name = namee 
```

我刚成功

```
strcpy(name, namee) 
```

现在可以了。

# javascript - 如何在网站上使用 google talk gadget

> ID：14604693
> 
> 赞同：2
> 
> 时间：2013-01-30T13:02:21.687
> 
> 标签：javascript, chat, google-talk

我想嵌入 gtalk 聊天小工具，以便用户能够在我的网站内聊天。此处的常见问题解答 - [http://support.google.com/talk/answer/2722317?hl=en](http://support.google.com/talk/answer/2722317?hl=en)表示 Google 已停止使用 Google Talk Gadget。
但正如我从[http://google.com/ig](http://google.com/ig)看到的，聊天小工具在 iGoogle 中运行良好。
是否有可能以某种方式从那里提取 javascript/html 代码并在您自己的网站中使用它？或任何其他替代想法？
我想要类似[http://karoolark.com/#gtalk](http://karoolark.com/#gtalk)

# c# - 多重绑定时的反应性依赖属性

> ID：14604696
> 
> 赞同：0
> 
> 时间：2013-01-30T13:02:29.913
> 
> 标签：c#, .net, wpf, multibinding

我正在尝试将标签绑定到两个属性以对第二个属性的更改做出反应。

这背后的基础是在公制和英制之间切换时更改字段的单位标签：

[图片 http://s7.postimage.org/wmw3vofmj/test.png](http://s7.postimage.org/wmw3vofmj/test.png)

XAML 代码如下：

```
<Label Name="UnitLabel" Grid.Column="1" Foreground="#FF1414AA" HorizontalContentAlignment="Right" VerticalContentAlignment="Center" Padding="2,2,5,2">
    <Label.Content>
        <MultiBinding Converter="{units:UnitConvertor}" Mode="OneWay">
            <Binding Path="Unit" />
            <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=base:MainForm, AncestorLevel=3}" Path="Document.Units" />
        </MultiBinding>
    </Label.Content>
</Label> 
```

标签托管在用户控件上，实际文档有许多：

[图片 http://s9.postimage.org/47hvp9uyn/test.png](http://s9.postimage.org/47hvp9uyn/test.png)

Document 对象如下所示：

```
public class Document : DependencyObject
{
    public static readonly DependencyProperty UnitsProperty =
        DependencyProperty.Register("Units", typeof (UnitSet), typeof (Document), new PropertyMetadata(default(UnitSet)));

    public UnitSet Units
    {
        get { return (UnitSet) GetValue(UnitsProperty); }
        set { SetValue(UnitsProperty, value); }
    }

    public Document()
    {
        Units = UnitSet.Imperial;
    }
} 
```

然后我尝试设置 Units 属性：

```
private void ChangeUnit(object sender, RoutedEventArgs e)
{
    if (sender == Metric)
    {
        Document.Units = UnitSet.Metric;
    }
    else if (sender == Imperial)
    {
        Document.Units = UnitSet.Imperial;
    }
} 
```

但是，单元标签无法更新。我需要做什么来解决这个问题？抱歉，如果遗漏了任何明显的东西，我两天前开始使用 WPF。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:18:07.290

我不知道您的完整 XAML 树，但我认为您的 AncestorLevel 不正确。我猜 MainForm 是您的根元素，但您在该绑定中说您正在寻找该标签上方的第三个 MainForm。尝试完全消除 AncestorLevel。它默认为 1。

# c# - 将 lambda 表达式转换为参数类型 system.linq.expressions 时可能会发生运行时错误

> ID：14604698
> 
> 赞同：0
> 
> 时间：2013-01-30T13:02:34.637
> 
> 标签：c#, vb.net, linq, lambda

我有以下方法：

```
public IEnumerable<OrderLines> RetrieveOrderLines(Expression<Func<OrderLines,
                                                   bool>> expression)
{
    return _context.OrderLines.Where(expression);
} 
```

此方法用于测试项目 (C#)：

```
var testLine = repo.RetrieveOrderLines(x => x.I_ID == 1 
                                         && x.T_ID == 2).Single(); 
```

我们的生产项目 VB.Net 也像这样访问这个方法：

```
Dim line As OrderLines = repo.RetrieveConsumptionLines(Function(x) x.I_ID = InvId 
                                                       And x.T_ID = tId).Single() 
```

C# 测试工作正常，我没有收到任何错误或警告，但 VB 中的行被突出显示并且 re-sharper 给了我以下警告：

**将 lambda 表达式转换为参数类型 system.linq.expressions.expression(Of System.Func(Of OrderLines, Boolean)) 时可能会出现运行时错误**

任何想法为什么以及是否有解决方案或更好的方法来做到这一点？我是 Lambda 表达式的新手，因此不胜感激。

谢谢。

# python - 如何在 Linux 中激活 virtualenv？

> ID：14604699
> 
> 赞同：307
> 
> 时间：2013-01-30T13:02:35.063
> 
> 标签：python, python-3.x, linux, virtualenv, python-venv

我一直在寻找并尝试各种替代方案但没有成功，现在花了几天时间 - 让我发疯。

在 Red Hat Linux 上运行 Python 2.5.2 开始使用最新的 Virtualenv 但无法激活它，我发现某处建议需要早期版本，所以我使用了 Virtualenv 1.6.4，因为它应该适用于 Python 2.6。

## 好像安装虚拟环境ok

```
[necrailk@server6 ~]$ python virtualenv-1.6.4/virtualenv.py virtual
New python executable in virtual/bin/python
Installing setuptools............done.
Installing pip...............done. 
```

## 环境看起来还可以

```
[necrailk@server6 ~]$ cd virtual
[necrailk@server6 ~/virtual]$ dir
bin  include  lib 
```

## 尝试激活

```
[necrailk@server6 ~/virtual]$ . bin/activate
/bin/.: Permission denied. 
```

## 检查 chmod

```
[necrailk@server6 ~/virtual]$ cd bin
[necrailk@server6 bin]$ ls -l
total 3160
-rw-r--r--    1 necrailk biz12        2130 Jan 30 11:38 activate
-rw-r--r--    1 necrailk biz12        1050 Jan 30 11:38 activate.csh
-rw-r--r--    1 necrailk biz12        2869 Jan 30 11:38 activate.fish
-rw-r--r- 
```

## 有问题所以改了

```
[necrailk@server6 bin]$ ls -l
total 3160
-rwxr--r--    1 necrailk biz12        2130 Jan 30 11:38 activate
-rw-r--r--    1 necrailk biz12        1050 Jan 30 11:38 activate.csh
-rw-r--r--    1 necrailk biz12        2869 Jan 30 11:38 activate.fish
-rw-r--r--    1 necrailk biz12        1005 Jan 30 11:38 activate_this.py
-rwxr-xr-x    1 necrailk biz 
```

## 再试`activate`一次

```
[necrailk@server6 ~/virtual]$ . bin/activate
/bin/.: Permission denied. 
```

还是不开心...

* * *

## 回答 #1

> 赞同：368
> 
> 时间：2013-01-30T14:27:57.187

这是我创建文件夹并`cd`进入它后的工作流程：

```
$ virtualenv venv --distribute
New python executable in venv/bin/python
Installing distribute.........done.
Installing pip................done.
$ source venv/bin/activate
(venv)$ python 
```

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2014-07-13T08:20:01.437

您忘记了`source bin/activate`source 是可执行文件名称的位置。前几次也让我印象深刻，很容易认为手册告诉“从环境文件夹的根目录执行”。

无需`activate`通过`chmod`.

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2015-12-27T10:57:00.733

你可以做

```
source ./python_env/bin/activate 
```

或者只是去目录

```
cd /python_env/bin/ 
```

接着

```
source ./activate 
```

祝你好运。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2018-03-19T19:20:33.530

转到项目目录。在我的情况下`microblog`是烧瓶项目目录，在`microblog`目录下应该有`app`和`venv`文件夹。然后运行以下命令，这是在 Ubuntu 中为我工作的命令。

```
source venv/bin/activate 
```

[![在此处输入图像描述](../Images/596db4e9fe51fd87b925145c811cff12.png)](https://i.stack.imgur.com/3zUIW.png)

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2017-06-16T00:15:55.260

cd到环境路径，进入bin文件夹。此时，当您使用 ls 命令时，您应该会看到“激活”文件。

现在输入

```
source activate 
```

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2013-01-30T13:07:38.210

问题在于`/bin/.`命令。这真的很奇怪，因为. 应该始终是它所在目录的链接。（老实说，除非`.`是一个奇怪的别名或函数，否则我什至不明白这是怎么可能的。）你的 shell 没有`.` [内置 for`source`](http://pubs.opengroup.org/onlinepubs/009695399/utilities/dot.html)也有点不寻常。

一个快速的解决方法是在不同的 shell 中运行 virtualenv。`deactivate`（一个明显的第二个优势是您可以不必这样做`exit`。）

```
/bin/bash --rcfile bin/activate 
```

如果您的 shell 支持它，您可能还有非标准`source`命令，它*应该*与 执行相同的操作`.`，但可能不存在。（总而言之，你应该试着弄清楚为什么你的环境很奇怪，否则将来会让你再次痛苦。）

顺便说一句，您不需要`chmod +x`这些文件。*如果您想直接*执行文件，则只需要可执行文件。在这种情况下，您尝试从 启动它们`.`，因此它们不需要它。

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2018-05-08T15:31:02.663

`$ mkdir <YOURPROJECT>` 创建一个新项目

`$ cd <YOURPROJECT>` 将目录更改为该项目

`$ virtualenv <NEWVIRTUALENV>` 创建新的虚拟环境

`$ source <NEWVIRTUALENV>/bin/activate` 激活新的 virtualenv

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2016-10-13T11:25:14.150

代替`./activate`

利用 `source activate`

[![看这个截图](../Images/8c1eb1e3c61c07a31e0bfc03cc553616.png)](https://i.stack.imgur.com/JimGM.png)

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2020-06-06T18:07:01.773

如果您在 Windows 机器上运行此代码，它将被激活
`source venv/Scripts/activate`

[![在此处输入图像描述](../Images/cab1fd4677591f13aba849b09844363a.png)](https://i.stack.imgur.com/5HNSg.png)

如果您在 linux/mac 机器上运行此代码，它将被激活
`. venv/bin/activate`

[![在此处输入图像描述](../Images/b63efaf22ade61084d7c32f206c30ee4.png)](https://i.stack.imgur.com/ECNHm.png)

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2017-11-10T07:39:29.097

**对于 Windows 您可以执行以下操作：**

将虚拟环境创建为： virtualenv envName –python=python.exe（如果不创建环境变量）

> 激活虚拟环境：> \path\to\envName\Scripts\activate
> 
> 停用虚拟环境：> \path\to\env\Scripts\deactivate

它适用于新的 python 版本。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-01-30T13:44:57.417

我也会推荐 virtualenvwrapper 。它为我创造了奇迹，以及我如何总是遇到激活问题。[http://virtualenvwrapper.readthedocs.org/en/latest/](http://virtualenvwrapper.readthedocs.org/en/latest/)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2015-03-16T11:45:31.477

创建您自己的 Python 虚拟环境，名为`<Your Env _name >:`. 我给了它VE。

```
git clone https://github.com/pypa/virtualenv.git
python virtualenv.py VE 
```

要激活您的新虚拟环境，请运行（*注意它不在`./`此处*）：

```
. VE/bin/activate 
```

示例输出（*注意提示已更改*）：

```
(VE)c34299@a200dblr$ 
```

设置虚拟环境后，您可以删除`Virtualenv`存储库。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-01-23T12:28:57.843

**视窗 10**

在 Windows 中创建这些目录：

[![Windows 10 虚拟环境目录](../Images/7c5169de1e621b3857714c971d6a93ab.png)](https://i.stack.imgur.com/B717Z.png)

在 Windows 10 中激活虚拟环境。

```
down\scripts\activate 
```

\scripts 目录包含激活文件。

**Linux的**

在 Ubuntu 中，这些目录被创建：

[![Linux Ubuntu 虚拟环境目录](../Images/bfdd3ecdfd1a14a30ab0f3045ee57232.png)](https://i.stack.imgur.com/3TNqp.png)

在 Linux Ubuntu 中激活虚拟环境。

```
source ./bin/activate 
```

/bin 目录包含激活文件。

* * *

**虚拟环境从 Windows 复制到 Linux Ubuntu，反之亦然**

如果虚拟环境文件夹从 Windows 复制到 Linux Ubuntu 然后根据目录：

```
source ./down/Scripts/activate 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-11-07T05:42:51.500

在 Mac 上，将 shell 更改为 BASH（请注意 virtual env 仅在 bash shell 中有效）

```
[user@host tools]$. venv/bin/activate 

.: Command not found.

[user@host tools]$source venv/bin/activate

Badly placed ()'s.

[user@host tools]$bash

bash-3.2$ source venv/bin/activate

(venv) bash-3.2$ 
```

宾果游戏，它奏效了。查看提示已更改。

在 Ubuntu 上：

```
user@local_host:~/tools$ source toolsenv/bin/activate

(toolsenv) user@local_host~/tools$ 
```

注意：提示已更改

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-11-30T20:02:50.610

我在运行 source /bin/activate 时遇到了麻烦，然后我意识到我使用 tcsh 作为终端 shell 而不是 bash。切换后，我就可以激活 venv。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-04-23T09:38:33.860

在这里发布我的答案可能有点晚了，但我仍然会发布，虽然它可能会使某人受益，

我也遇到过同样的问题

主要原因是我将virtualenv创建为“root”用户但后来试图使用另一个用户激活它。

chmod 将不起作用，因为您不是文件的所有者，因此替代方法是使用 chown （更改所有权）

例如：

如果你在 /home/abc/ENV 创建了你的 virtualenv

然后 CD 到 /home/abc

并运行命令：**chown -Rv** *[user-to-whom-you want-change-ownership] [需要更改所有权的文件夹/文件名]*

在这个例子中，命令是：**chown -Rv abc ENV**

成功更改所有权后，您可以简单地运行**source /ENV/bin/./activate**并且您应该能够正确激活 virtualenv。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-03-10T23:55:43.927

1- 打开 powershell 并导航到您的应用程序文件夹 2- 输入您的 virtualenv 文件夹 ex：cd .\venv\Scripts\ 3- 按类型激活 virtualenv .\activate

# php - 如何将数字和小数转换为 HH:MM

> ID：14604704
> 
> 赞同：0
> 
> 时间：2013-01-30T13:02:55.060
> 
> 标签：php

我有一个`$route->flighttime`以以下格式回显数字的变量...

```
0.5
1.2
1.45 
```

如何`HH:MM`使用将其转换为显示`echo`？

注意：`0.5`由于某种原因，CMS 将其视为 50 分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:23:54.737

基于 OPs 关于他的初始时间格式的评论（其中 0.5 实际上是 50 分钟），没有任何数学的解决方案

```
$time = floatval($route->flighttime);
echo number_format($time,2,':',null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:05:35.200

### 如果输入是小时的浮点值

首先将浮点值转换为小时/分钟：

```
$hours = floor($route->flighttime);
$minutes = ($route->flighttime - $hours) * 60; 
```

### 如果输入是经过折磨以适应浮点数的小时/分钟对

您可以乘以 100 而不是 60，或者使用这种可能更准确的技术：

```
list($hours, $minutes) = explode('.', sprintf('%.2F', $route->flighttime)); 
```

### 任何状况之下

然后使用`printf`（或一些类似的功能，如`sprintf`）正确格式化：

```
printf("%02d:%02d", $hours, $minutes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:12:07.910

我假设 0.5 表示半小时。使用`gmdate`格式`G:i`和您的时间（以秒为单位）：

```
echo gmdate('G:i', round($x * 3600)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:12:44.897

```
gmstrftime("%H:%M", $t * 60 * 60); 
```

...其中 $t 以小时为单位浮动。注意使用 gmstrftime 而不是 strftime，因为您不想使用时区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T13:17:16.493

如果当前格式是用点分隔的小时和分钟，您可以使用[`DateTime`](http://www.php.net/manual/en/datetime.createfromformat.php)：

```
$time = DateTime::createFromFormat('G.i', '9.15');
echo $time->format('H:i'); 
```

但是，在这种格式`5`中，分钟部分将是 5 分钟，而不是 50 分钟。

# python - 导入序列时出现语法错误

> ID：14604705
> 
> 赞同：0
> 
> 时间：2013-01-30T13:02:54.990
> 
> 标签：python, syntax, serial-port

我对 Python 还很陌生，想通过我的 Arduino 微控制器做一些事情来尝试一下。所以我下载了串行库，将其放入 Lib 文件夹并导入到我的程序中。不幸的是，导入导致以下语法错误：

```
Traceback (most recent call last):
  File "C:\Python33\test.py", line 2, in <module>
    import serial
  File "C:\Python33\lib\serial\__init__.py", line 19, in <module>
    from serial.serialwin32 import *
  File "C:\Python33\lib\serial\serialwin32.py", line 12, in <module>
    from serial import win32
  File "C:\Python33\lib\serial\win32.py", line 196
    MAXDWORD = 4294967295L # Variable c_uint
                         ^
SyntaxError: invalid syntax 
```

我正在使用 Windows 7 64 位。我怎样才能解决这个问题？我没有找到任何其他版本的串行模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:20:14.543

也许[2to3](http://docs.python.org/2/library/2to3.html)可以在这里帮助你......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-13T01:05:27.890

可能 python2.X 和 python3.X 都在您的 PC 上。请检查python3目录（Python3X\Lib\site-packages）中是否存在pyserial-2.X文件。如果确实存在，请尝试将此文件剪切到python2X目录并使用命令

```
pip3 install pyserial 
```

# validation - 如何在 magento 中使用 validate-digits-range 验证？

> ID：14604706
> 
> 赞同：12
> 
> 时间：2013-01-30T13:02:58.460
> 
> 标签：validation, magento-1.7

嗨朋友我想验证magento中的数字范围。我还得到了验证类 validate-digits-range。但我不知道如何通过该验证的最小值和最大值。如果有人知道意味着请分享这个例子。提前致谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-30T15:18:02.740

您应该在文本表单字段中使用，例如：

```
... class="required-entry validate-digits-range digits-range-10-20"... 
```

这将验证值在 10 到 20 之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-03T19:25:30.593

有关 1 到 50 之间的范围，请参见以下示例： **validate-number-range number-range-1-50**

```
<field id="radius" translate="label" type="text" sortOrder="1" showInDefault="1" showInWebsite="1" showInStore="1">
   <label>Delivery radius</label>        
   <validate>validate-number validate-number-range number-range-1-50</validate>
</field> 
```

# ios - MBProgressHUD 阻止用户与 tableview 交互

> ID：14604711
> 
> 赞同：6
> 
> 时间：2013-01-30T13:03:08.070
> 
> 标签：ios, xcode, uitableview, mbprogresshud

我有一个 uitableview 从互联网加载数据，在此期间我显示 MBProgressHUD。但问题是用户在表格加载之前无法触摸任何内容，包括上一页按钮。这是我在两个不同类中的代码：

```
//PROBLEM METHOD 1
- (void)viewDidLoad
{
    [super viewDidLoad];
    [tableEtkinlikler reloadData];
    MBProgressHUD *HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    HUD.labelText = @"Açılıyor...";
    HUD.userInteractionEnabled = NO;

    [self performSelector:@selector(loadEtkinliklerTitlesAndImages) withObject:nil afterDelay:0];

    tableEtkinlikler.dataSource = self;
    tableEtkinlikler.delegate = self;
} 
```

我的按钮也有同样的问题..在它我从互联网加载数据..

```
//PROBLEM METHOD 2
- (IBAction)AktivitelerButtonClicked:(UIButton *)sender
{
    MBProgressHUD *HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
    HUD.labelText = @"Açılıyor...";
    HUD.userInteractionEnabled = NO;
    [self performSelector:@selector(openAktivitelerWindow) withObject:nil afterDelay:0]; 
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T14:00:17.503

我相信这就是重点`MBProgressHUD`，它让您有机会在任务完成时显示 HUD，一旦您的任务完成，您将关闭它，以便用户可以与完成的数据进行交互。

然而，在某些情况下，加载数据需要很长时间，因此您可能希望让用户决定继续、选择其他选项或只是返回

在您的代码中这`HUD.userInteractionEnabled = NO;`应该可以工作，但问题可能是`showHUDAddedTo:self.view`您没有使用视图层次结构中可能的最高视图。

尝试使用这个：

```
- (IBAction)showSimple:(id)sender {
    // The hud will dispable all input on the view (use the higest view possible in the view hierarchy)
    HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
    [self.navigationController.view addSubview:HUD];
    HUD.userInteractionEnabled = NO;
    // Regiser for HUD callbacks so we can remove it from the window at the right time
    HUD.delegate = self;

    // Show the HUD while the provided method executes in a new thread
    [HUD showWhileExecuting:@selector(loadEtkinliklerTitlesAndImages) onTarget:self withObject:nil animated:YES];
} 
```

# wpf - 全局键绑定到活动视图的 Viewmodel 中的命令

> ID：14604712
> 
> 赞同：1
> 
> 时间：2013-01-30T13:03:12.753
> 
> 标签：wpf, mvvm, relaycommand

我有这个`MainWindow.xaml`：

```
<Window.InputBindings>
  <KeyBinding Key="O" Modifiers="Control" Command="{Binding OpenCommand}" />
  <KeyBinding Key="S" Modifiers="Control" Command="{Binding SaveCommand}" />
</Window.InputBindings> 
```

我有几个带有自己视图模型的子视图。例如，我有 a `FileView`with a`FileViewModel`和 a `DataView`with a `DataViewModel`。在两个视图模型中，我都有一个实现`OpenCommand`：

```
public ICommand OpenCommand
{
    get
    {
        if (openCommand == null)
        {
            openCommand = new RelayCommand(param => this.OpenFile());
        }

        return openCommand;
    }
} 
```

当我按`Ctrl`+时`O`，我希望`OpenCommand`为活动视图的视图模型执行命令。因此，如果我按下我的 , 中的键`FileView`，`OpenFile()`就会被执行。如果我在我的 , 中输入密钥`DataView`，`OpenData()`将被执行。一种`MDI`行为。

上面的代码不起作用。

**你如何实现这种类型的键绑定/命令处理？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:13:24.317

`OpenCommand`由于您对in`FileView`和有单独的实现，因此`DataView`您还应该将 a 添加`KeyBinding`到这些视图中。

```
<Page.InputBindings>
    <KeyBinding Key="O" Modifiers="Control" Command="{Binding OpenCommand}" />
    <KeyBinding Key="S" Modifiers="Control" Command="{Binding SaveCommand}" />
</Page.InputBindings> 
```

或者

```
<UserControl.InputBindings>
    <KeyBinding Key="O" Modifiers="Control" Command="{Binding OpenCommand}" />
    <KeyBinding Key="S" Modifiers="Control" Command="{Binding SaveCommand}" />
</UserControl.InputBindings> 
```

# ruby-on-rails - 回形针：保存时不验证正确的文件名

> ID：14604716
> 
> 赞同：0
> 
> 时间：2013-01-30T13:03:23.733
> 
> 标签：ruby-on-rails, file-upload, paperclip, extension-methods

我正在使用导轨 3.1。我正在尝试上传没有正确文件名的 .docx 文件（它仅包含扩展名 'docx'），同时保存它应该像“文件名无效”一样进行验证。

在模型中，

```
validates_attachment_presence :document
validates_attachment_size :document, :less_than => 5.megabytes, :message => "should be    less than 5Mb"
validates_attachment_content_type :document, :content_type => ['application/txt', 'text/plain', 
'application/pdf', 'application/msword',
'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
'application/vnd.oasis.opendocument.text',
'application/x-vnd.oasis.opendocument.text',
'application/rtf', 'application/x-rtf', 'text/rtf', 'text/richtext', 'application/doc', 'application/x-soffice', 'application/octet-stream'] 
```

我正在使用的回形针宝石，

```
paperclip (3.0.4, 2.8.0, 2.4.5) 
```

例如：我正在尝试上传“.docx”文件。

请建议如何避免保存此类文件。

# javascript - FabricJs：路径区域太大

> ID：14604718
> 
> 赞同：3
> 
> 时间：2013-01-30T13:03:26.837
> 
> 标签：javascript, canvas, fabricjs

我正在尝试使用一些带有 fabricjs 的 SVG 路径。它们渲染得很好，但我有一些问题：

1.  定位错误。我不知道为什么，但是如果我从 svg 字符串中删除大小，它们的位置很好，但我不能拖动它们。
2.  如图所示，路径区域太大。不应该只在路边吗？

![路径面积太大](../Images/50253cd16046f179f197193aa1bec187.png)

演示在[这里](http://jsbin.com/enolul/5/edit)，您可以看到形状，但它们在那里（尝试拖动画布的左上部分）

这是从 svg 字符串中删除维度的[演示](http://jsbin.com/enolul/3/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T09:05:16.207

与 github 中当前版本的 fabricJs 一样，这个特殊问题得到了解决。您可以在不分组的情况下从 SVG 加载路径并获得正确的边界框。

# java - Java 在 AIX 中不工作

> ID：14604721
> 
> 赞同：0
> 
> 时间：2013-01-30T13:03:52.717
> 
> 标签：java, unix, aix

我最近在我的 AIX 服务器中安装了 git，并且 git 工作正常。

但是java现在不工作了。

如果我执行 java --version 我会得到以下输出。

```
admin:stud:/webapps/WEB-INF/classes> java --version
exec(): 0509-036 Cannot load program java because of the following errors:
        0509-150   Dependent module /opt/freeware/lib/libiconv.a(shr4_64.o) could not be loaded.
        0509-152   Member shr4_64.o is not found in archive 
```

我怎样才能解决这个问题。

以前安装了以下 java 版本。

```
admin:stud:/demo> java -version
java version "1.5.0"
Java(TM) 2 Runtime Environment, Standard Edition (build pap64dev-20080315 (SR7))
IBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 AIX ppc64-64 j9vmap6423-20080315 (JIT enabled)
J9VM - 20080314_17962_BHdSMr
JIT  - 20080130_0718ifx2_r8
GC   - 200802_08)
JCL  - 20080314 
```

这是我的 QA 服务器的输出，它安装了与当前给我错误的开发机器相同的 java。我能做些什么来解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T22:57:12.477

在 AIX 上编译很难。我一般给 ld 一个 libiconv 的绝对路径，因为有开源版本和 AIX 的版本。

一个想法是将git移到一边。我通常创建一个名为 .real 的目录并将 git 从它开始的位置移动到 .real 子目录。即如果get 是/down/this/path/git 然后将它移动到/down/this/path/.real/git。

然后编写一个脚本 /down/this/path/git 设置 LIBPATH 并对 /down/this/path/.real/git 执行 exec

```
#!/bin/ksh
export LIBPATH=/blah/blah:/usr/lib
exec /down/this/path/.real/git "$@" 
```

Java 使这变得复杂，因为它设置 LIBPATH（或它曾经设置为）并忽略 LIBPATH 之前设置的内容。

另外......你不想混合和匹配两个libiconv。如果有东西想要开源版本，它需要使用它而不是 AIX 版本，反之亦然。

祝你好运

# java - 将数据从 appengine servlet 异步发送到客户端的简单方法

> ID：14604722
> 
> 赞同：1
> 
> 时间：2013-01-30T13:04:02.697
> 
> 标签：java, google-app-engine, http, servlets, asynchronous

我创建了一个以网站形式提供服务的 Web 应用程序。

我计划创建一个 WebServlet API 以允许其他软件（网络或桌面）轻松集成我的服务，调用简单的操作如下：

```
http://www.server_name.com/APIServlet?ACTION=CreateUser&DATA={"username":"username@gmail.com","password":"some_password"} 
```

问题是 API 还应该提供一种在给定更改发生后立即向 API 客户端异步发送数据的方法。

我知道 Channel API 是实现这一点的更好方法，但 API 用户实现起来相当复杂，特别是在非 javascript 应用程序中。

在我看来，需要 API 用户付出较少努力的更好的解决方案是“Long Polling”，它提供一个 API 操作来保持响应，直到服务器有东西要返回或发生“超时”。前任：

```
 http://www.server_name.com/APIServlet?ACTION=WaitMessage&DATA={"sessionId":"12kdj45jsdj"} 
```

但是 AFAIK 这个解决方案是不可能的，因为 appengine 将请求响应限制为 30 秒。

如何以简单的方式使用 HTTP 请求实现异步服务器 -> 客户端通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:24:50.773

这些是可用的不同方法

1.  WebSockets（HTML5 的一部分）
2.  长轮询和彗星
3.  轮询

使用 Websockets 将是最简单的方法。但是为了让它工作，我们应该确保客户端浏览器是最新的并且服务器端也支持它。在 tomcat 7.0.32 及更高版本中提供了一个名为 WebSocketServlet 的新 servlet。

**PS：我不确定应用引擎是否能够实现 websocket 服务器端。**

长轮询和轮询是较旧的方法。但是由于浏览器兼容性问题，它们仍然被使用。

您可以使用**Atmosphere 框架**，其中包含用于 websockts 、长轮询和轮询的回退机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:46:52.213

GAE 上唯一的异步服务器到客户端通信可通过[Channel API](https://developers.google.com/appengine/docs/java/channel/overview)获得。不幸的是，它只是 javascript，因此您只能在浏览器中使用它。

# cuda - NVIDIA Kepler 无绑定纹理

> ID：14604723
> 
> 赞同：0
> 
> 时间：2013-01-30T13:04:04.090
> 
> 标签：cuda

在 NVIDIA Kepler 架构中，他们消除了绑定纹理的必要性。但我找不到简单的例子来说明这一点。有没有人遇到过可以说明用法的示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T17:00:59.840

CUDA Toolkit 5.0 附带的 CUDA 示例包含 Kepler 架构 GPU 的示例。**在 CUDA 5.0 示例的图形**部分的**bindLessTexture**示例中演示了无绑定纹理的示例用法。

# scheme - 为方案加载表达式卡住 HDRPATTERN

> ID：14604725
> 
> 赞同：0
> 
> 时间：2013-01-30T13:04:05.663
> 
> 标签：scheme, grep, jam

我正在尝试使用一些方案文件来生成代码，作为构建项目的 jamfile 的一部分。

我让它“工作”，因为我的方案文件被评估为构建的一部分并生成他们的 .cpp 被编译并且*每个人*都几乎很高兴。

在果酱中，我有：

库 somelib : generate.scm ;

UserRule 导致 generate.scm 被执行并输出 generate.cpp ，该文件被传递给 jam 中的 Object 规则。那一点有效。

在 generate.scm 中，我有（加载“included.scm”），我希望 jam 通过在 generate.scm 上设置 HDRPATTERN 和 HDRRULE 将其视为包含，但我无法理解所需的 egrep 表达式。

任何人都知道如何编写 egrep 表达式来匹配这些类型的语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T23:52:25.283

这个正则表达式对我有用（为方便起见，我将其转义为符合 Jam 语法）：

`\\(load \"(.*?)\"\\)`

`egrep`我在命令提示符下使用了这个测试。希望能帮助到你！

# c# - 数据库中 DateTime 上的空数据

> ID：14604733
> 
> 赞同：0
> 
> 时间：2013-01-30T13:04:30.233
> 
> 标签：c#, sql, datetime, null

我已经在这里通过了各种答案，但没有一个给出真正有效的答案。核心问题（显然）是 DateTime 没有任何 NULL 的概念，所以通常

```
string dateValue = myReader.IsDBNull (4) ? null : myReader.GetDateTime(4) ; 
```

不起作用。

我试过了

```
DateTime? nextDue = myReader.GetDateTime(3) == DBNull.Value ? null : (DateTime?)myReader.GetDateTime (3) ; 
```

但这给了

```
Operator '==' cannot be applied to operands of type 'System.DateTime' and 'System.DBNull' 
```

更改为

```
DateTime? nextDue = myReader.GetDateTime(3) = DBNull.Value ? null : (DateTime?)myReader.GetDateTime (3) ; 
```

生产

```
Cannot implicitly convert type 'System.DBNull' to 'bool' 
```

我最终将 SQL 更改为不输出 NULL 值，但我仍然想破解这个，因为它将在其他地方有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:08:43.560

你可以试试

```
DateTime? nextDue = myReader.IsDbNull(3) ? null : (DateTime?) myReader.GetDateTime (3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:09:31.223

首先你的语法在这里：

```
DateTime? nextDue = myReader.GetDateTime(3) = DBNull.Value ? null : (DateTime?)myReader.GetDateTime (3) ; 
```

身份证错了 应该：

```
DateTime? nextDue = myReader.GetDateTime(3) == DBNull.Value ? null : (DateTime?)myReader.GetDateTime (3) ; 
```

其次，您可以使用：

```
DateTime? nextDue = myReader.IsDBNull(3) ? null : (DateTime?)myReader.GetDateTime (3) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:08:23.957

尝试

```
 DateTime? nextDue = myReader.GetValue(3) == DBNull.Value ? null : (DateTime?)myReader.GetDateTime (3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:06:16.063

只需使用：

```
DateTime? nextDue;
if (myReader.GetDateTime(3) == DBNull.Value)
    nextDue = myReader.GetDateTime(3);
else
    nextDue = null; 
```

或者：

```
DateTime? nextDue;
if (myReader.IsDBNull(3))
    nextDue = myReader.GetDateTime(3);
else
    nextDue = null; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T13:06:57.923

您需要将其`null`转换为`DateTime?`：

```
DateTime? nextDue = myReader.IsDBNull(3) ? 
    null as DateTime? : 
    (DateTime?)myReader.GetDateTime (3) 
```

# ruby-on-rails - 单用户 Rails 应用程序

> ID：14604735
> 
> 赞同：0
> 
> 时间：2013-01-30T13:04:37.173
> 
> 标签：ruby-on-rails, authentication

我想知道在我想编写一个应用程序（例如博客）并且我希望只有一个用户的情况下是否有一个公认的解决方案。我一直在四处寻找，但运气不佳（主要是遇到关于一个用户模型的问题）。

我认为如果我要创建一个用户模型+表只是为了存储一个用户，那么使用设计或巫术会有点矫枉过正。虽然我也不想只将我的密码以纯文本形式存储在源代码中。

我偶然发现了[soff.es](https://github.com/soffes/soff.es)，看到他正在[使用环境](https://github.com/soffes/soff.es/blob/739fd1c0a257ce9d65b96238def1620fbbaeb8c2/config/initializers/constants.rb)设置用户名和密码。这是一个好的解决方案吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:42:16.220

推出自己的身份验证并不难，这使得以后修改起来很容易。Ryan Bates 有一个很棒的从头开始构建身份验证的截屏视频，可以让您立即启动并运行。

[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)（较旧但免费版本）

或者

[http://railscasts.com/episodes/250-authentication-from-scratch-revised](http://railscasts.com/episodes/250-authentication-from-scratch-revised)（仅限更新会员）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:10:02.563

如果您只需要一些简单的身份验证逻辑，您可以使用[HTTP 身份验证](http://railscasts.com/episodes/82-http-basic-authentication)并硬编码您的用户名和密码。

# mysql - SQL 匹配特殊字符正则表达式

> ID：14604736
> 
> 赞同：5
> 
> 时间：2013-01-30T13:04:36.930
> 
> 标签：mysql, sql, database

我正在寻找一个 SQL 语句，它将只返回我的表中其`Name`字段包含特殊字符（不包括下划线）的行。

我试过了：

```
SELECT * FROM 'table' WHERE Name REGEXP '^[!#$%&()*+,\-./:;<=>?@[\\\]^`{|}~]+$' 
```

但是没有骰子，这会返回一个空的结果集（尽管我专门添加了包含`%, $, and #`字符的名称字段的行）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:12:57.977

第一个问题似乎是`^`和`$`符号（Mike C 总结得比我更快，为什么......）

但我也看到了转义问题：所有在正则表达式中表示某些东西的特殊字符都应该是~~逃脱~~特地放在了，`[]`所以`[`，，，，`]``^``-`

这是一个关于[如何在 MySQL regexes 中转义字符组内的特殊字符](https://stackoverflow.com/questions/8141211/list-of-metacharacters-for-mysql-regexp-square-brackets)的问题。

[正则表达式文档](http://www.tin.org/bin/man.cgi?section=7&topic=regex)中详述的结论：

> 方括号表达式是包含在 '[]' 中的字符列表。它通常匹配列表中的任何单个字符（但见下文）。
> 
> *   如果列表以 '^' 开头，则它匹配任何单个字符（但见下文），而不是来自列表的其余部分。
>     
>     
> *   如果列表中的两个字符由'-' 分隔，这是整理序列中这两个（包括）之间所有字符范围的简写，例如ASCII 中的'[0-9]' 匹配任何十进制数字。
>     
>     
> *   两个范围共享一个端点是非法的（！），例如“ace”。范围非常依赖于排序顺序，可移植程序应避免依赖它们。
>     
>     
> *   要在列表中包含文字 ']'，请将其设为第一个字符（在可能的 '^' 之后）。
>     
>     
> *   要包含文字“-”，请将其设为第一个或最后一个字符，或范围的第二个端点。
>     
>     
> *   要将文字“-”用作范围的第一个端点，请将其括在“[.”中 和 '.]' 使其成为整理元素（见下文）。
>     
>     
> 
> 除了这些和一些使用 '[' 的组合（参见下一段）之外，**所有其他特殊字符，包括 '\'，在括号表达式中都失去了它们的特殊意义**。

**编辑** 这是一个关于角色的一些有趣正则表达式[的 SQL 小提琴](http://sqlfiddle.com/#!2/bfc4c/3)`]`

**DDL:** 创建表 txt ( txt varchar(200) );

```
insert into txt values ('ab[]cde');
insert into txt values ('ab[cde');
insert into txt values ('ab]cde');
insert into txt values ('ab[]]]]cde');
insert into txt values ('ab[[[[]cde');
insert into txt values ('ab\\]]]]cde');
insert into txt values ('ab[wut?wut?]cde'); 
```

**查询：**

匹配一组`[`和`]`字符的天真方法。语法上没问题，但组是单个`[`字符，然后匹配多个`]`字符。

```
SELECT * FROM txt WHERE txt 
REGEXP 'ab[[]]+cde'; 
```

转义 -> 相同 ???

```
SELECT * FROM txt WHERE txt 
REGEXP 'ab[[\]]+cde'; 
```

双重转义 -> 不起作用，组现在是 a`[`和 a`\`

```
SELECT * FROM txt WHERE txt 
REGEXP 'ab[[\\]]+cde'; 
```

将右括号与组内的左括号交换。这是我写过的最奇怪的正则表达式 - 到目前为止......

```
SELECT * FROM txt WHERE txt 
REGEXP 'ab[][]+cde'; 
```

我会在一个奇怪的噩梦中被这样一个（完全有效的！）正则表达式杀死，我认为：

```
SELECT * FROM txt WHERE txt 
REGEXP 'ab[]wut?[]+cde'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:12:08.490

此正则表达式应匹配仅包含特殊字符的名称。您指定表示字符串开头的克拉 (^)、带有特殊字符列表的字符类、表示一个或多个的加号 (+)，然后指定表示字符串结尾的美元。您需要考虑字符串中的非特殊字符。你可以尝试这样的事情：

```
WHERE Name REGEXP '^.*?[!#$%&()*+,\-./:;<=>?@[\\\]^`{|}~]+.*?$' 
```

我添加了 .*? 在开始和结束时允许在特殊字符之前和之后使用非特殊字符。顺便说一句，您可能不再需要 (+) 了，因为一场比赛就足够了。

# javascript - 使用样条线剪裁图像？

> ID：14604740
> 
> 赞同：0
> 
> 时间：2013-01-30T13:04:42.907
> 
> 标签：javascript, kineticjs, spline

我在画布元素中有一张用户面部的图像。我希望他们能够在它周围画出来把它剪掉。我已经成功地使用 Splice 在他们的脸部周围绘制了一条漂亮的平滑曲线（每点击一次鼠标，拼接点数组就会增加一个，越来越长）。

但我不确定如何实际使用这个样条线来剪辑图像。我可以使用 mySpline.allPoints 数组访问点数组，然后绘制我自己的剪切路径，但这会产生一个非常线性的形状，没有所有漂亮的 Spline 计算曲线。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:47:49.167

这可能不是最好的答案，但这里是如何绘制样条的代码：

```
 drawFunc: function(canvas) {
        var points = this.getPoints(), length = points.length, context = canvas.getContext(), tension = this.getTension();
        context.beginPath();
        context.moveTo(points[0].x, points[0].y);

        // tension
        if(tension !== 0 && length > 2) {
            var ap = this.allPoints, len = ap.length;
            context.quadraticCurveTo(ap[0].x, ap[0].y, ap[1].x, ap[1].y);

            var n = 2;
            while(n < len - 1) {
                context.bezierCurveTo(ap[n].x, ap[n++].y, ap[n].x, ap[n++].y, ap[n].x, ap[n++].y);
            }

            context.quadraticCurveTo(ap[len - 1].x, ap[len - 1].y, points[length - 1].x, points[length - 1].y);

        }
        // no tension
        else {
            for(var n = 1; n < length; n++) {
                var point = points[n];
                context.lineTo(point.x, point.y);
            }
        }

        canvas.stroke(this);
    }, 
```

给定曲线的点，它使用 quadraticCurveTo 和 bezierCurveTo 绘制曲线。

# objective-c - 调整 UICollectionElementKindSectionHeader 的大小

> ID：14604746
> 
> 赞同：0
> 
> 时间：2013-01-30T13:05:15.917
> 
> 标签：objective-c, header, resize, uicollectionview

我正在尝试调整 UICollectionElementKindSectionHeader 的大小，但没有找到任何方法。

任何人都可以帮助我吗？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:44:05.820

您可以使用[`UICollectionViewDataSource`](http://developer.apple.com/library/ios/documentation/uikit/reference/UICollectionViewDataSource_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012175-CH1-SW6)协议方法：

```
- (UICollectionReusableView *)collectionView: (UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath  {

   // dequeue your resuable headerview and set your custom frame here...

   return headerView;
} 
```

另外，如果你正在实现[`UICollectionViewDelegateFlowLayout`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UICollectionViewDelegateFlowLayout_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40012181-CH1-SW7)协议，你可以使用以下方法来调整已经出队的节头的大小：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section {

   CGSize headerViewSize = CGSizeMake(300, 40);

   return headerViewSize;
} 
```

# python - python的空格问题

> ID：14604751
> 
> 赞同：4
> 
> 时间：2013-01-30T13:05:26.967
> 
> 标签：python, whitespace, komodo

我目前在 Windows 7 中使用 Komodo Edit，但是，我在使用 TextWrangler 的 Mac 上遇到了这个问题。无论出于何种原因，我都会遇到某种空白错误，这在我用 Python 编写时是个大问题。例如，所有内容似乎都已正确标记，但 Komodo 目前给我一个“不明确的空白”错误

```
//How it appears in my editor
def SaveList(self, directory):
    templist = []
    templistbox2 = []
    for n,i in enumerate(self.listbox2.get(0,END)): 
       templistbox2.insert(n, re.sub(r'^[0-9]*[.]',"",str(i)))
    for filename in sorted(os.listdir(directory)):
        self.templist.insert(i, filename)
        print filename #whitespace error here 
```

考虑到我在 Windows 和 Mac 上使用两个不同的编辑器都经历过这种情况，我想知道是否有一些我不知道的设置，或者我做错了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:09:27.670

当我将您的代码复制到文件 test.py 并运行时

```
cat -A test.py 
```

我懂了

```
//How it appears in my editor$
def SaveList(self, directory):$
    templist = []$
    templistbox2 = []$
    for n,i in enumerate(self.listbox2.get(0,END)): $
       templistbox2.insert(n, re.sub(r'^[0-9]*[.]',"",str(i)))$
    for filename in sorted(os.listdir(directory)):$
        self.templist.insert(i, filename)$
^I    print filename #whitespace error here$ 
```

这表示最后一行有一个制表符（由 表示`^I`）后跟四个空格。

我不确定 Windows 上的等效工具是什么，但 Mac 应该有这个`cat -A`命令。它将向您显示制表符与空格的位置。

* * *

有一个名为[reindent.py](http://svn.python.org/projects/python/trunk/Tools/scripts/reindent.py)的程序会为您将制表符转换为空格：

```
reindent.py test.py 
```

在 Unix 上还有一个[unexpand](http://linux.die.net/man/1/unexpand)命令可以将空格转换为制表符。

* * *

大多数 Python 程序员使用空格而不是制表符进行缩进。您在 Web 上找到的大多数 Python 代码将使用空格而不是制表符。

您的编辑器可能正在添加选项卡，但如果您从网上获取了一段代码，您的文件现在可能同时包含选项卡和空格。

顺其自然并采用空格作为缩进约定是最容易的，因此您不必重新格式化其他人的代码。

顺便说一句，采用空格作为缩进的约定并不意味着`SPACE`每个缩进级别必须按 4 次。您的编辑器应该有一个配置选项，可以按`TAB`插入 4 个空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T13:37:54.900

这是 Python 中的常见问题。以下建议可能对您有所帮助：

1) 切勿混用空格和制表符。对于新项目，使用空格而不是制表符 请参阅[PEP8](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)我的建议是使用 4 个空格。

2) 更改 Komodo 中标签长度的默认值，以便更轻松地检测混合。按`Edit > Preferences`菜单，然后在`Editor settings`：

*   取消选中，`Prefer Tab characters over spaces`。
*   使用 4`Number of spaces for indent`
*   使用不同的值（例如 8）`width of each tab character`

3) 中的`reindent.py`脚本`C:\Python2x\Tools\Scripts\`可以帮助您正确地重新缩进文件

```
-d (--dryrun)   Dry run.   Analyze, but don't make any changes to, files.
-r (--recurse)  Recurse.   Search for all .py files in subdirectories too.
-n (--nobackup) No backup. Does not make a ".bak" file before reindenting.
-v (--verbose)  Verbose.   Print informative msgs; else no output.
-h (--help)     Help.      Print this usage information and exit.

Change Python (.py) files to use 4-space indents and no hard tab characters.
Also trim excess spaces and tabs from ends of lines, and remove empty lines
at the end of files.  Also ensure the last line ends with a newline. 
```

我希望它有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T08:30:01.217

由于没有其他人提到它，因此有一种简单的方法可以使 Komodo 本身内部的空白可见。您不需要使用任何外部工具。

只需从菜单中选择查看/查看空白，或在 Windows 上使用键盘快捷键 Ctrl+Shift+8。重复以将其关闭。

当您在“查看”菜单上时，请查看那里的一些其他有用功能。我发现缩进指南特别有用，并且一直打开它们。查看 EOL 标记有时也很有用。

# iphone - MPMoviePlayer 不工作

> ID：14604752
> 
> 赞同：0
> 
> 时间：2013-01-30T13:05:29.920
> 
> 标签：iphone, ios, mpmovieplayercontroller

我正在使用 iphone 中的视频应用程序。当用户点击一个按钮时，它将导致第二个视图，并从那里我正在播放来自 url 的视频。

但是，当用户从该视图返回并再次转到视频未播放时。

它连续显示以下2行

```
 [MPAVController] Autoplay: Likely to keep up or full buffer: 0
     [MPAVController] Autoplay: Skipping autoplay, not enough buffered to keep up. 
```

这是我的代码

```
 - (void)viewDidLoad
  {
[super viewDidLoad];

 self.moviePlayerController = [[MPMoviePlayerController alloc] init];
[self.moviePlayerController prepareToPlay];
self.moviePlayerController.shouldAutoplay = YES;
[[self.moviePlayerController view] setFrame:CGRectMake(-30, 72, 360,140)];

[[self view] addSubview: [self.moviePlayerController view]];

  NSString *strng = [NSString stringWithFormat:@"http://quickemee_videos.s3.amazonaws.com/videoStream_1352395870143_616.mp4"];

NSLog(@"strng %@",strng);
NSURL * adurl = [NSURL URLWithString:strng];

 [self playVideo:adurl];

 } 
```

. . . .

```
 -(IBAction)back:(id)sender{

 [moviePlayerController stop];
[self.navigationController popViewControllerAnimated:YES];

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:09:33.550

使用此代码

```
 NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"video_name" ofType:@"m4v"]];

    moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

    [moviePlayer prepareToPlay];
    moviePlayer.view.frame = self.view.bounds;
    [self.view addSubview:moviePlayer.view];
    [moviePlayer play];
    [moviePlayer setFullscreen:FALSE];
// if you want no control.
    [moviePlayer setControlStyle:MPMovieControlStyleNone]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:11:46.430

先打电话试试`[self prepareToPlay]`。

苹果 说：

> 如果调用 play 方法时电影播放器​​尚未准备好播放，则该方法会自动调用此方法。但是，为了尽量减少播放延迟，请在调用 play 之前调用此方法。

**更新：**

确保文件可用。我无法在浏览器中访问它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T13:16:12.010

`viewDidLoad`只调用一次。因此，当您弹出 viewController 然后返回它时，`viewDidLoad`不会再次调用它。所以尝试`self.moviePlayerController = [[MPMoviePlayerController alloc] init];`实施`- (void)viewWillAppear:(BOOL)animated`

# php - 使用 php 和 cURL 从外部网站提取元素/数据

> ID：14604755
> 
> 赞同：2
> 
> 时间：2013-01-30T13:05:33.107
> 
> 标签：php, curl

**我正在尝试使用PHP**和**cURL**从外部网站中提取一个元素。

*   我试图从中提取内容的网站的链接是： [http ://www.stayclassy.org/fundraise?fcid=231864](http://www.stayclassy.org/fundraise?fcid=231864)

*   我要定位的元素是
    顶部右列中列表项“Raised So Far”下的数字值（现在值是 10 美元）。

*   这是我用来提取数据的代码：

    ```
        定义（“目标”，“ http://www.stayclassy.org/fundraise?fcid=231864 ”）；

    `$curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, TARGET);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

    if(!($results = curl_exec($curl))) {
        print("{ \"total\": \"$0.00\" }");
        return;
    } 

    $pattern = '/\<li class="goalTitle"\> \$(.+?) \<\/li\>\<\/a\>/';
    preg_match_all($pattern, $results, $matches);

    $total = $matches[1][0];
    $total = str_replace(",", "", $total);

    printf("{ \"total\": \"$%s\" }", formatMoney($total, true));

    function formatMoney($number, $fractional=false) 
    {
        if ($fractional) {
            $number = sprintf('%.2f', $number);
        }
        while (true) {
            $replaced = preg_replace('/(-?\d+)(\d\d\d)/', '$1,$2', $number);
            if ($replaced != $number) {
                $number = $replaced;
            } else {
                break;
            }
        }
        return $number;
    }` 

    ```

我遇到的问题是我定位的列表项/元素没有唯一的 ID 或类。事实上，美元金额位于没有类别的单独列表项中。

我想知道如何使用上面的代码定位无序列表中的特定列表项，特别是当它没有类时。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:49:12.370

定位特定项目需要您识别它周围的唯一字符串。为此，您只需越走越远，直到找到一个您可以识别的仅出现一次的字符串。所以，你想要的行是：

```
<li>$10</li> 
```

但这根本不是唯一的。所以我们也通过添加上一行来扩展字符串：

```
<li class="goalTitle">Raised so far:</li>
<li>$10</li> 
```

和宾果游戏，这个字符串是你需要的唯一。除了您的金额外，该字符串相当稳定，因此很容易使用。所以你需要一个正则表达式来找到这个字符串。我会使用这样的东西：

```
$pattern = '/<li class="goalTitle">Raised so far:<\/li>\s*<li>\$(\d+)<\/li>/'; 
```

您不需要使用`preg_match_all`，因为您只希望获得一场比赛：

```
preg_match($pattern, $results, $matches);
$total = $matches[1]; 
```

* * *

您的其他选项包括使用 加载页面`DOMDocument`，然后使用`XPath`或`getElementById`解析 DOM。但这对于这项任务来说可能有点过分了。

另外，我会`file_get_contents`用来获取远程站点的内容。但这只是我。

* * *

**更新：**要处理数千个分隔符，请按如下方式修改您的模式：

```
$pattern = '/<li class="goalTitle">Raised so far:<\/li>\s*<li>\$([\d\.,]+)<\/li>/'; 
```

# javascript - 在 HighStock 图表的导航器中显示多个系列

> ID：14604757
> 
> 赞同：8
> 
> 时间：2013-01-30T13:05:42.330
> 
> 标签：javascript, highcharts, highstock

我想创建一个 HighStock 图表，其中包含一个显示多个系列的导航器组件，与主图中显示的系列相同。HighStock 似乎不支持此功能，因为只允许一个系列。有没有人遇到过这个问题并设法找到可行的解决方案/替代方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T14:18:53.713

导航器中的多个系列不受官方支持，因此只有您使用的这个“hack”才能在导航器中显示多个系列。示例： http: [//jsfiddle.net/6fFwM/](http://jsfiddle.net/6fFwM/)我们的系统在此处请求此功能（[http://highcharts.uservoice.com/forums/55896-general/suggestions/2361925-allow-navigator-to-have-multiple -data-series](http://highcharts.uservoice.com/forums/55896-general/suggestions/2361925-allow-navigator-to-have-multiple-data-series)），所以你可以投票给它。

```
window.chart.addSeries({
        name : "",
        xAxis: 0,
        yAxis: 1,
        type: "line",
        enableMouseTracking: false,
        data : new_data,
        showInLegend:false
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-02-05T18:37:23.547

从 Highstock 5 开始，现在正式支持此功能。您可以全局或专门为每个系列指定`showInNavigator: true`( [API](http://api.highcharts.com/highstock/plotOptions.series.showInNavigator) )。一个相关的选项是`navigatorOptions`( [API](http://api.highcharts.com/highstock/plotOptions.series.navigatorOptions) )，它将影响`showInNavigator`设置为的系列`true`。

例如：（[JSFiddle](http://jsfiddle.net/phhqrrfk/3/)）：

```
plotOptions: {
    series: {
        showInNavigator: true // Global value
    }
},

series: [{ // This series has no value set and will use global
    name: 'MSFT',
    data: MSFT
},
{
    name: 'GOOGL',
    showInNavigator: false, // Individual series value
    data: GOOGL
},
{
    name: 'ADBE',
    showInNavigator: true, // Individual series value
    navigatorOptions: { // Specific values that affect the series in the navigator only
        type: 'line',
        color: 'red'
    },
    data: ADBE
}] 
```

# java - JTree空指针加载第一行

> ID：14604758
> 
> 赞同：0
> 
> 时间：2013-01-30T13:05:48.037
> 
> 标签：java, swing, nullpointerexception, jtree, event-dispatch-thread

我试图在创建 JTree 时选择它的第一行。但有时我会遇到以下异常：

```
java.lang.NullPointerException
   at javax.swing.plaf.basic.BasicTreeUI.completeEditing(BasicTreeUI.java:2035)
   at javax.swing.plaf.basic.BasicTreeUI$Handler.valueChanged(BasicTreeUI.java:3715)
   at javax.swing.tree.DefaultTreeSelectionModel.fireValueChanged(DefaultTreeSelectionModel.java:634)
   at javax.swing.tree.DefaultTreeSelectionModel.notifyPathChange(DefaultTreeSelectionModel.java:1092)
   at javax.swing.tree.DefaultTreeSelectionModel.setSelectionPaths(DefaultTreeSelectionModel.java:293)
   at javax.swing.JTree.setSelectionPaths(JTree.java:1644)
   at javax.swing.JTree.setSelectionRows(JTree.java:1721)
   at javax.swing.JTree.setSelectionRow(JTree.java:1696) 
```

在调用 tree.setSelectionRow(0) 之前，我尝试进行以下检查，但没有任何效果：

```
 while((!tabTree.isVisible()) || (tabTree.isEditing()) || (tabTree.getRowCount() == 0)) {
        try {
            Thread.sleep(10);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    tabTree.setSelectionRow(0); 
```

你需要被拯救:)

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:26:04.560

这可能是由以下原因引起的：

*   您正在使用返回的自定义单元格编辑`null`器`getTreeCellEditorComponent()`
*   您在非 UI 线程中修改树。请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

# signalr - SignalR 传输回落到生产中的长轮询

> ID：14604762
> 
> 赞同：0
> 
> 时间：2013-01-30T13:05:58.250
> 
> 标签：signalr

刚刚重写了一个带有信号器的聊天网站。

在本地它工作正常，在协商后它一直在 Firefox 和 chrome 中使用服务器发送的事件。

但：

如果我在我的服务器上对其进行测试，它总是会恢复为长轮询。我的服务器不在代理或防火墙后面，但服务器发送的事件无论如何都不应该受到影响。

如果我在本地服务器上测试它（通过 rdp 登录并打开浏览器），它会再次连接服务器发送的事件。所以设置工作正常，只是网络中的某些东西导致其他传输失败。

我的问题是：为什么像服务器发送事件和永远框架这样的技术会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:59:56.213

事实证明，服务器所在的国家（泰国）有 ISP，几乎所有的 ISP 在最终用户和互联网之间都有某种代理（只能猜测这是什么原因）。

从国外尝试后，我得到了其他交通工具，甚至通过当地的 3g 移动提供商 (yaay) 获得了 SSE。

# java - 使用commandButton时Javaserver面临javax.el.methodnotfoundexception

> ID：14604764
> 
> 赞同：0
> 
> 时间：2013-01-30T13:06:14.970
> 
> 标签：java, jsf-2

我的页面包含以下代码：

```
<h:body>
<h:form>
    <h:graphicImage id="logo" alt="pir logo" url="/images/logo.png" />
    <h1>Wybrane produkty:</h1>
    <h:dataTable value="#{selectedItemBean.list}" var="l"
        styleClass="order-table" headerClass="order-table-header"
        rowClasses="order-table-odd-row,order-table-even-row">
        <h:column>
            <f:facet name="header">
                        Symbol
                    </f:facet>
                        #{l.symbol}
                </h:column>
        <h:column>
            <f:facet name="header">
                        Opis
                    </f:facet>
                        #{l.opis}
                </h:column>
        <h:column>
            <f:facet name="header">
                        Cena
                    </f:facet>
                        #{l.cena}
                </h:column>
    </h:dataTable>
    <input value="Popraw" type="button" onclick="history.go(-1)" />
    <h:commandButton value="Print" action="#{selectedItemBean.printPDF}" />
</h:form> 
```

当我尝试执行命令按钮时，出现以下异常：

```
SEVERE: javax.el.MethodNotFoundException: Method not found: pl.com.pir.beans.SelectedItemBean@7cd2da43.printPDF() 
```

我想知道我做错了什么？

豆源：

```
@ManagedBean
@SessionScoped
    public class SelectedItemBean implements Serializable {
        private static final long serialVersionUID = 1L;
        private List<Product> list = new ArrayList<Product>();

        public SelectedItemBean() {}

        //................. SOME CODE

        public void printPDF() {
            PrintToPDF pdf = new PrintToPDF();
            try {
            pdf.createPdf("", list);
            } catch(IOException ioe) {
                ioe.printStackTrace();
            } catch(DocumentException de) {
                de.printStackTrace();
            }
        }

        //................. SOME CODE

    } 
```

result.xhtml 中的数据表已正确完成，我已经阅读了很多有关此异常的信息，但我还没有找到解决方案。

# javascript - Spring MVC 和 Bootstrap - css，img 工作 .js 不工作

> ID：14604770
> 
> 赞同：1
> 
> 时间：2013-01-30T13:06:33.427
> 
> 标签：javascript, spring-mvc

我将 STS Eclipse 与 Spring Template MVC 项目一起使用。我想使用 Bootstrap，我在 webapp/resources 下创建了 css、js 和 img 目录，并将所有需要的文件放在这些文件夹下。我对 .css 文件没有任何问题，但我无法找到 .js 文件。该应用程序可以正确使用外部 .js 引用。

这是 Dispatcher servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc    http://www.springframework.org/schema/mvc/spring-mvc.xsd
    http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context   http://www.springframework.org/schema/context/spring-context.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="org.dani.bootstrap" />

</beans:beans> 
```

这是js脚本的jsp部分

```
<script type="text/javascript" src="<c:url value="resources/js/bootstrap.js"/>"> </script>
<!-- <script src="<c:url value="/resources/js/bootstrap-dropdown.js"/>"> </script>-->
<script type="text/javascript" src="<c:url value="resources/js/jquery-1.9.0.min.js" />"> </script>
<script type="text/javascript" src="<c:url value="resources/js/jquery-migrate-1.0.0.min.js" />"></script> 
```

我需要知道我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:02:59.937

为了获得更多可见性，您应该将 url 变量和脚本分开。您应该通过添加“/”在您的 URL 中包含完整路径。试试这个：

```
<mvc:resources location="resources/" mapping="/resources/**"/>

<c:url value="/resources/js/jquery-1.9.0.min.js" var="jqueryUrl"/>
<script src="${jqueryUrl}" type="text/javascript"><!-- required for FF3 and Opera --></script> 
```

# javascript - HTML / javascript - 更改字体系列

> ID：14604773
> 
> 赞同：0
> 
> 时间：2013-01-30T13:06:51.007
> 
> 标签：javascript, html, fonts

> **可能重复：**
> [使用带有 CSS 的自定义字体](https://stackoverflow.com/questions/11253910/using-a-custom-font-with-css)

有没有办法将我的字体系列更改为我下载的字体而不是默认字体？

我在 www.dafont.com 上下载了一些字体，我想在我的 HTML/Javascript 应用程序中使用它。

任何帮助和建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:11:52.700

您需要将字体转换为“Web 字体”，使用以下 URL 进行转换 [http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

转换后，你会发现一个包含 Font/CSS 的包包含在你的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:13:49.440

使用您在 Web 应用程序中下载的字体是没有意义的，因为您的用户将无法使用它。相反，您可以使用[Google Web Fonts](http://www.google.com/webfonts)，它允许您在网站中包含各种字体。

例子：

```
<link href='http://fonts.googleapis.com/css?family=Kavoon' rel='stylesheet' type='text/css'> 
```

CSS：

```
body {
  font-family: 'Kavoon', cursive;
} 
```

# python - 64 位版本的 PyPlot

> ID：14604775
> 
> 赞同：2
> 
> 时间：2013-01-30T13:06:56.923
> 
> 标签：python, matplotlib

我一直在努力获得 64 位版本的 PyPlot。我找到了一个[非官方的 64 位版本的 matplotlib](http://www.lfd.uci.edu/~gohlke/pythonlibs/#matplotlib)，但是当我`import matplotlib`,`pyplot`不是`matplotlib`.

如何获得 64 位版本的 PyPlot？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:08:16.040

我希望这不是一个愚蠢的建议，但你试过了`import matplotlib.pyplot as plt`吗？它是一个子模块，您通常无法将其作为`matplotlib`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:13:41.360

当谈到 64 位 Python 和依赖于编译代码的第三方库（如 Numpy、Scipy 和 Matplotlib）时，第一个问题是：您使用的是哪个操作系统？

*   Linux，例如 Debian：随便做`apt-get`什么，你就完成了。
*   Windows：如果您真的需要 64 位，请三思，如果需要，最好使用专业支持的版本，如[EPD](http://www.enthought.com/products/epd.php)

尝试在 Windows 上手动维护 64 位 Python 时，我遇到了一些痛苦的经历。

对于 Mac，我没有亲身经历。

# jquery - 向浏览器发送 Ajax 请求、Json 或 html 格式的响应（哪个效率高）

> ID：14604780
> 
> 赞同：1
> 
> 时间：2013-01-30T13:07:08.483
> 
> 标签：jquery, asp.net, ajax, json

在我的项目中，我使用 Ajax 并从服务器获取响应。现在我有两个选择

a) 在服务器从数据创建 Html 并发送到浏览器

b) 直接在浏览器发送Json格式的数据，在浏览器创建Html。

哪个更高效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:08:59.347

通常，服务器端渲染会更有效（特别是如果客户端是在移动设备上运行的 javascript。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:09:39.050

没有显着差异。JSON 可能会慢一些，因为它必须对数组中的数据进行编码，但我通常使用 JSON，因为我经常使用 AJAX 答案发送额外数据。在客户端，JSON 当然需要转换为 HTML，但这不会造成太大的延迟。

# xslt - XSL 语法只复制一个以上的单词

> ID：14604782
> 
> 赞同：0
> 
> 时间：2013-01-30T13:07:15.873
> 
> 标签：xslt

我有大型 XML 文件，必须对其进行修剪以排除特定节点，并使用 xsl:template 匹配语句来识别一些要排除的节点。

但是我可以使用什么语法来根据字数排除或包含？

示例：用于排除 instring 内容与 outstring 内容相同的字符串节点

```
<xsl:template match="string[instring=outstring]"/> 
```

我需要将其更改为仅在 instring 和 outstring 中有多个单词的情况下才匹配。

现在的伪语法是：排除 instring = outstring 的字符串节点 需要的伪语法是：排除 instring = outstring AND instring/outstring 超过一个单词的字符串节点（即保留那些相同的字符串，如果它们只是一个单词）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:31:15.580

在这种情况下，您能否检查一下**instring**是否包含空格？

```
<xsl:template match="string[instring=outstring][contains(instring, ' ')]"/> 
```

# jquery - 需要使用 Ajax 创建 JSON 表的搜索文本框的解决方案

> ID：14604784
> 
> 赞同：0
> 
> 时间：2013-01-30T13:07:19.570
> 
> 标签：jquery, ajax, json

我刚开始使用 javascript 和 jquery，对一切都一无所知。

这是我从模型转换而来的 json

```
changeData = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model)); 
```

内容如下所示：

```
changeData = [ 
{"RemoteRoute":{"Id":1,"Code":"1","Name":"Route1a","Outward":true,"Detail":null},"LocalRoute":null,"Change":"New"}, 
{"RemoteRoute":{"Id":1,"Code":"1","Name":"Route1b","Outward":false,"Detail":null},"LocalRoute":null,"Change":"New"}, 
{"RemoteRoute":{"Id":2,"Code":"2","Name":"Route2a","Outward":true,"Detail":null},"LocalRoute":null,"Change":"New"}, 
{"RemoteRoute":{"Id":2,"Code":"2","Name":"Route2b","Outward":false,"Detail":null},"LocalRoute":null,"Change":"New"}] 
```

我用来创建一个表

```
for (var item in changeData){ 
        var tr=$('<tr onclick=\"ShowChange(' + no + ');\" class=\"childDiv\"></tr>');
        outward = changeData[item].RemoteRoute.Outward;
        code = changeData[item].RemoteRoute.Code;
        name = changeData[item].RemoteRoute.Name;
        change = changeData[item].Change; 

        $('<td>'+ code          +'</td>').appendTo(tr);
        $('<td>'+ name          +'</td>').appendTo(tr);
        $('<td>'+ change        +'</td>').appendTo(tr);
        tr.appendTo('.displaytable');  
    }; 
```

我正在尝试使用 ajax 创建一个搜索框（用于“名称”）。但是，正如我上面所说，我从这里完全一无所知。

谁能建议我一些我可以采取的方法。一个例子会很棒。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:57:07.623

按照这个例子：

我创建了一个输入文本和一个表格

```
<input id="namefilter" type="text" />
<table id="mytable">
    <tr>
        <th>Code</th>
        <th>Name</th>
        <th>Change</th>
    </tr>
    <tr>
        <td>Code 1</td>
        <td>Dan Poter</td>
        <td>Change 1</td>
    </tr>
      <tr>
        <td>Code 1</td>
        <td>Name 1</td>
        <td>Change 1</td>
    </tr>
      <tr>
        <td>Code 1</td>
        <td>Bred Pit</td>
        <td>Change 1</td>
    </tr>
      <tr>
        <td>Code 1</td>
        <td>Don Joun</td>
        <td>Change 1</td>
    </tr>
      <tr>
        <td>Code 1</td>
        <td>Pitter</td>
        <td>Change 1</td>
    </tr>
</table> 
```

接下来是jquery代码

```
$("#namefilter").keyup(function(event) {
   var textToFilter = $(this).val();
    var table = $('#mytable');
                table.find('tr').each(function (index, row) {
                    var allCells = $(row).find('td:nth-child(2)');
                    if (allCells.length > 0) {
                        var found = false;
                        allCells.each(function (index, td) {
                            var regExp = new RegExp(textToFilter, 'i');
                            if (regExp.test($(td).text())) {
                                found = true;
                                return false;
                            }
                        });
                        if (found == true) {
                            $(row).show("fast");
                        } else {
                            $(row).hide("fast");
                        }
                    }
                });
}); 
```

您可以通过更改以下行轻松将其设置为基于表中的所有列进行过滤：

```
var allCells = $(row).find('td:nth-child(2)'); 
```

至：

```
var allCells = $(row).find('td'); 
```

[菲德尔示例](http://jsfiddle.net/YaRJW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:48:42.480

稍微更改您的代码，以便您拥有一个名称为 id 的 td。这样，您就可以添加一些 jquery 来遍历 td 集合以查找该名称 id。然后是显示或隐藏所需行的情况。

```
for (var item in changeData){ 
    var tr=$('<tr onclick=\"ShowChange(' + no + ');\" class=\"childDiv\"></tr>');
    outward = changeData[item].RemoteRoute.Outward;
    code = changeData[item].RemoteRoute.Code;
    name = changeData[item].RemoteRoute.Name;
    change = changeData[item].Change; 

    $('<td>'+ code          +'</td>').appendTo(tr);
    $('<td id="' + name + '">'+ name          +'</td>').appendTo(tr);
    $('<td>'+ change        +'</td>').appendTo(tr);
    tr.appendTo('.displaytable');  
}; 
```

jQuery：

```
$('#txtBoxIDUsedToFilterByName').keyUp(function(){
    var searchTerm = $(this).val();
    $('.displaytable > tr > td').each(function(){
        if($(this).attr('id:contains("' + searchTerm + '")')
            $(this).closest('tr').show();
        else
            $(this).closest('tr').hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:49:40.623

我会做这样的事情：

```
$(function(){

    $.each(changeData, function(k, v){

         var $tr = $('<tr>' +
                         '<td class="name">'+ v.RemoteRoute.Name+'</td>' + 
                         //add all the tds here
                     '</tr>')
                     .click(function(event){
                          //handle the <tr> click here
                     })
                     .hide() //hide the row
                     .attr({ 'class': 'childDiv' }); 
                     //addClass() is another options

    });

}); 
```

但是你能详细说明搜索部分吗？您是否希望隐藏所有行，并仅显示具有数学名称的行（与文本框相比）？在这种情况下：

```
$('input[type="text"]').keyup(function(){

    var searchText = $(this).val();

    $('table tr td.name').filter(function(){ 
        return $(this).text().indexOf(searchText) !== -1;
    })
    .closest('tr')
    .show();

    //show the closest tr if searchtext matches the name

}); 
```

# magento - MAGENTO - 在 product.info.extrahint 参考页面中获取类别名称

> ID：14604786
> 
> 赞同：0
> 
> 时间：2013-01-30T13:07:30.753
> 
> 标签：magento, categories, product

我创建了一个 product.info.extraint 页面。这是我的前端布局：

```
 <catalog_product_view>
       <reference name="product.info.extrahint">
         <block type="***_***/product" name="***_product" template="***/***/product.phtml" />
       </reference>
    </catalog_product_view> 
```

我的 product.php 扩展自 Mage_Catalog_Block_Product_Abstract

如何在 product.php 中获取类别名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:43:04.540

加载产品模型，然后获取类别列表并呼出您想要的？

```
$product = Mage::getModel('catalog/product')->load($id);

$categories = $product->getCategoryIds();
    foreach ($categories as $catid) {
    echo Mage::getModel('catalog/category')->load($catid)->getName();
} 
```

# mysql - 如何在 MySQL 查询中使用 DISTINCT 而不在输出中显示该字段？

> ID：14604790
> 
> 赞同：2
> 
> 时间：2013-01-30T13:07:37.390
> 
> 标签：mysql

我有这个 MySQL 查询：

```
select Region,
CONCAT('$', FORMAT(AVG(sales), 0)) as 'Average_Sales_by_Region', 
count(*) as '# of Dist in state'
from dist, Regions_US
where dist.state=Regions_US.State
group by Region ORDER BY AVG(sales) DESC; 
```

以下是上述 MySQL 查询的输出：

```
+--------------------+-------------------------------+-------------------------+
| Region             | Average_Sales_by_Region       | # of Dist in state      |
+--------------------+-------------------------------+-------------------------+
| Alaska-Hawaii      | $8,150                        |                       4 |
| Mountain           | $20,216                       |                      74 |
| West North Central | $18,268                       |                      40 |
| South Atlantic     | $16,225                       |                     178 |
| East South Central | $14,967                       |                      30 |
| West South Central | $13,704                       |                     125 |
| East North Central | $12,668                       |                      79 |
| New England        | $11,916                       |                      32 |
| Pacific            | $11,553                       |                     120 |
| Middle Atlantic    | $10,292                       |                     131 |
+--------------------+-------------------------------+-------------------------+ 
```

有一个名为 company_name 的字段，我想对其进行 DISTINCT：

```
select DISTINCT company_name,
Region,CONCAT('$', FORMAT(AVG(sales), 0)) as 'Average_Sales_by_Region', 
count(*) as '# of Dist in state'
from dist, Regions_US
where dist.state=Regions_US.State
group by Region ORDER BY AVG(sales) DESC; 
```

我希望它在“company_name”的字段名称上是 DISTINCT，但我不希望 company_name 字段显示在输出中。有没有办法在不显示 DISTINCT company_name 的情况下执行它？它的语法是什么，它会在上面的 MySQL 查询中使用什么？还是有其他方法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:09:32.490

将其添加到`GROUP BY`子句并从子句中删除`SELECT`：

```
SELECT
  Region,
  CONCAT('$', FORMAT(avgSales, 0)) as 'Average_Sales_by_Region', 
  TheCount as '# of Dist in state'
FROM
(
   SELECT 
     Region, 
     AVG(Sales) avgSales, 
     COUNT(*) theCount
   from dist, Regions_US
   where dist.state=Regions_US.State
   group by Region,company_name
) AS sub       
ORDER BY avgSales DESC; 
```

* * *

**更新：**如果你想在同一个子句中选择 the`sales`和 the ，你不能这样做，你不应该这样做。MySQL 允许你这样做，但你会为每组.`AVG(sales)``SELECT``sales``Region, company_name`

使用 a 时，这称为*单值规则*`GROUP BY`，遵循此规则是标准。这意味着，子句中的每一列都`SELECT`必须在 a`GROUP BY`或聚合函数中。您不能选择不在`GROUP BY`聚合函数中的行。在您的情况下，您已经`sales`使用聚合函数选择了`AVG`，为什么`sales`还要在同一个查询中选择？

**但是**，如果你想这样做，你可以这样做：

```
SELECT
  Region,
  CONCAT('$', FORMAT(avgSales, 0)) as 'Average_Sales_by_Region', 
  TheCount as '# of Dist in state',
  (SELECT sales
   FROM dist d2
   WHERE d2.Region       = d1.Region
     AND d2.company_name = d1.company_name) AS Sales
FROM
(
   SELECT 
     Region, 
     AVG(Sales) avgSales, 
     COUNT(*) theCount
   from dist
   INNER JOIN Regions_US ON dist.state = Regions_US.State
   group by Region,company_name
) AS sub       
ORDER BY avgSales DESC; 
```

假设这`Region, company_name`是从`dist`表格中出来的。

**请注意：**我`INNER JOIN`在您的查询中使用而不是隐式连接语法，它们是相同的。

但我不确定`sales`每组的值是否一致`Region, Company_name`。

# ios - iOS闪屏黑窗

> ID：14604792
> 
> 赞同：0
> 
> 时间：2013-01-30T13:07:38.937
> 
> 标签：ios, uiview, splash-screen, uiwindow

嗨，我只是想知道是否可以更改首次启动应用程序时出现的黑色视图的颜色。我正在使用透明的初始屏幕图像，并想知道是否可以更改此视图/窗口的颜色或在您的应用程序启动之前更改它的颜色。我问的原因是因为我的应用程序可以为多个客户设置皮肤，并且它们具有特定的配色方案。如果这有意义的话，它会节省我用所选颜色重新制作初始图像的时间吗？这就是我使用透明飞溅的原因......如果不是，我只需要用所需的颜色重新制作图像，但是我的整个应用程序颜色可以在减去上述要求的情况下立即更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:13:01.107

初始屏幕将*始终*显示您的应用程序包中定义的默认图像。 **不可能是别的。**您必须为应用程序的每个版本创建映像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:23:42.253

在创建新的 iOS iPhone 应用程序时，Xcode 会在“Supporting Files”组中为您创建 3 个启动画面文件，命名为

*   默认.png
*   默认@2x.png
*   默认-568h@2x.png

这些文件分别是 iPhone 3G/3GS、iPhone 4/4S 和 iPhone 5 的启动画面。默认情况下，这些是黑色图像。您可以将它们替换为您想要用于启动画面的任何图像。确保您保持名称相同。

# jquery - 反转数组onclick jquery

> ID：14604796
> 
> 赞同：-1
> 
> 时间：2013-01-30T13:07:56.113
> 
> 标签：jquery, arrays, reload, reverse

我有一个在页面上显示信息的数组。我希望能够通过单击按钮来反转顺序。

.reverse() 有效，但我不确定如何在单击按钮时调用它，然后刷新显示以显示反转数组？

我的设置如下：

在我的数组中包含 js 文件（以及显示数组的代码），我的数组存储在一个变量中（比这更长，但只是为了显示）：

```
var images_gallery = [
    {
        image_src: "images/xmas-1.jpg",
    },
    {
        image_src: "images/xmas-2.jpg",
    },
    {
        image_src: "images/xmas-3.jpg",
    }
]

var image = $('<img>').addClass('librarian-gallery-img');
image.attr('src',images_gallery.image_src);
image.appendTo($('#gallery-container'); 
```

这会将我的数组（图像）显示到我的 html 中。（简化版，但这是基础）

我的问题是如何刷新数组及其在页面上的显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:19:22.653

```
$('button#someID').click( function(event) {
    myArray.reverse();
}); 
```

评论者是对的。发布您的代码，以便我们更好地了解情况。请注意，反转底层数据数组不会更新页面，因此您需要自己处理该位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:42:27.187

您可以使用`attr()`更改图像 src。

```
$('#buttonId').click(function(){
  images_gallery.reverse();
  $('#gallery-container img').attr('src', function( index){
      return images_gallery[index].image_src
  })

}); 
```

使用函数参数`attr()`提供对集合中元素索引的访问

# unix - ps -o 命令有什么作用 究竟是做什么的？

> ID：14604800
> 
> 赞同：0
> 
> 时间：2013-01-30T13:08:04.490
> 
> 标签：unix

我已经检查了有关使用的手册页，`ps -o`但不明白。当我执行命令`ps -o pid`时，我得到了这个结果： -

```
$>ps -o pid
     PID
 6029508
29491290 
```

我想知道这个命令`ps -o pid -o cmd -u <username>`是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:16:54.403

POSIX 规范[`ps`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/ps.html)告诉您该`-o`选项的作用。您系统上的手册页也是如此。

基本上，它控制出现哪些输出列。

```
$ ps -o pid
  PID
  297
  303
  314
  321
  329
$ ps -o pid -o command
  PID COMMAND
  297 -sh
  303 -sh
  314 -sh
  321 -sh
  329 -sh
$ 
```

一个非常令人兴奋的命令列表 - 对此感到抱歉。请注意，POSIX 定义`comm`and `args`; 在 Mac OS X 上，`command`也被识别，但`cmd`未被识别。

该`-u user`选项将进程列表限制为指定用户拥有的进程。

# android - EditText 旁边的 android 按钮

> ID：14604801
> 
> 赞同：0
> 
> 时间：2013-01-30T13:08:06.810
> 
> 标签：android, android-relativelayout

我在设计聊天布局时遇到了问题。下面列出了我的 XML。

因此布局由 3 部分组成：页眉（`RelativeLayout`其中包含多个视图）、ListView 和页脚（`RelativeLayout`with`EditText`和 a `Button`）。发送按钮放在旁边`EditText`，但`EditText`最多可以扩展到 6 行，我需要按钮留在底部。A 不能使用`alignParentBottom`，因为它会导致错误的依赖关系，并且页脚会展开，将其`ListView`推出屏幕。`ExitText`我还尝试将布局更改为线性布局，但是当展开以允许多行输入时，仍然无法强制按钮保持在底部。任何建议表示赞赏。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".ChatActivity" >

<RelativeLayout
    android:id="@+id/RL_header"
    android:layout_width="match_parent"
    android:layout_height="60dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:background="#7B7B7B"
    android:gravity="center_vertical" >

    <ImageView
        android:id="@+id/img_Contact_Icon"
        android:layout_width="55dp"
        android:layout_height="55dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:padding="5dp"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/tvContactName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/img_Contact_Icon"
        android:layout_toRightOf="@+id/img_Contact_Icon"
        android:text="testname"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/tvPartnerRegion"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/img_Contact_Icon"
        android:layout_alignLeft="@+id/tvContactName"
        android:layout_marginBottom="5dp"
        android:text="@string/tvFrom"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout>

<RelativeLayout
    android:id="@+id/RL_footer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
     >

    <EditText
        android:id="@+id/etChatInput"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/btnSend"
        android:ems="10"
        android:hint="@string/etWriteMessageHint"
        android:maxLines="6" />

    <Button
        android:id="@+id/btnSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"

        android:text="@string/btnSend" />

</RelativeLayout>

<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/RL_footer"
    android:layout_below="@+id/RL_header"
    android:layout_centerHorizontal="true"
    android:divider="@android:color/transparent"
    android:dividerHeight="10.0sp" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:18:03.877

![在此处输入图像描述](../Images/c9ad6435a67736fed3599314aa0e3d02.png)

```
<LinearLayout
        android:id="@+id/lay"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="#000000"
        android:gravity="center|left"
        android:orientation="horizontal"
        android:weightSum="3" >

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1.8"
            android:gravity="center"
            android:padding="10dip" >

            <EditText
                android:id="@+id/Box"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/message_focus"
                android:hint="message_title"
                android:imeOptions="actionDone"
                android:padding="8dip"
                android:singleLine="true"
                android:textColor="#333"
                android:textSize="12dip" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="0dp"
            android:layout_height="fill_parent"
            android:layout_weight="0.6"
            android:gravity="center"
            android:paddingLeft="5dip" >

            <Button
                android:id="@+id/Button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />
        </LinearLayout>
    </LinearLayout> 
```

# html - 如何为 has_and_belongs_to_many 关系创建下拉列表？

> ID：14604807
> 
> 赞同：0
> 
> 时间：2013-01-30T13:08:15.857
> 
> 标签：html, ruby, ruby-on-rails-3, model, has-and-belongs-to-many

这是我的模型：

```
class ThesisGroup < ActiveRecord::Base
  belongs_to :course
  has_and_belongs_to_many :students

  attr_accessible :code, :title, :course_id
end

class Student < ActiveRecord::Base
  has_and_belongs_to_many :thesis_groups

  attr_accessible :email, :lastnames, :names
end

class CreateThesisGroupStudentJoinTable < ActiveRecord::Migration  
  def change
    create_table :thesis_groups_students, :id => false do |t|
      t.integer :thesis_group_id
      t.integer :student_id
    end
  end
end 
```

在我的控制器中，用于编辑 ThesisGroups：

```
def update
    @thesis_group = ThesisGroup.find(params[:id])

    respond_to do |format|
      if @thesis_group.update_attributes(params[:thesis_group])
        format.html { redirect_to @thesis_group, notice: 'Thesis group was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @thesis_group.errors, status: :unprocessable_entity }
      end
    end
  end 
```

在我看来，我需要能够看到 N 个下拉列表；与当前 ThesisGroup 的关系中的每个学生 1。

我尝试了以下但得到一个错误，`undefined method map for #<ThesisGroup:0x007f76b8c9d4d0>`：

```
<div class="control-group">
  <%= f.label :student %>
  <div class="controls">
    <%= f.collection_select 'student_ids', @thesis_group, :id, :names %>
  </div>
</div> 
```

我需要为学生提供 N 个选择元素，并且在编辑此表单时将先前选择的元素显示为选中状态。Rails 有什么方法可以解决这个问题吗？

我可以遍历 student_ids 集合吗，例如：

```
<%= student_ids.each do |s| %>
  generate html select element with 's'
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:25:59.393

你需要`accepts_nested_attributes_for :students`在你的`ThesisGroup`模型中。

```
<%= field_set_tag 'Alumnos' do %>
  <%= f.fields_for :students do |student| %>
    <%= student.label :name, 'Student' %>
    <%= student.collection_select :student_id, Student.all, :id, :name %>
  <% end %>
<% end %> 
```

编辑：我突然也不太确定 collection_select 中的参数:(

# html - html 页面优化 - html 源页面中的空格

> ID：14604813
> 
> 赞同：2
> 
> 时间：2013-01-30T13:08:27.247
> 
> 标签：html, minify

我的问题不完全是关于 css，而是关于标签之间的 html 页面中的空格等。

[http://m.aol.com/portal/](http://m.aol.com/portal/)页面的html代码中包含这么多空格是否有任何原因（请查看[http://m.aol.com/portal/](http://m.aol.com/portal/)页面的源代码）？我错过了什么吗？

手机版的页面上有这么多空格是怎么发生的？有什么猜测吗？为什么和为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T13:17:38.257

他们可能不在乎，因为文档本身正在被压缩，然后在客户端解压缩。因此，即使他们删除了这些空间，也不会大大减少流量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:12:51.967

它可能是由某些服务器端语言（例如`ASP.NET`）生成的，因此程序员和网站管理员不直接使用此 HTML 代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T13:18:08.630

浏览器通常会忽略一个以上的空格。空格和制表符通常用于缩进源文件以获得更好的可读性。使用服务器端语言（例如`PHP`）可能会导致这种混乱的 html 源代码。

然而，这些不可打印的标志需要从服务器传输到用户，从而导致不希望的开销。例如，谷歌正在从其脚本和页面中去除大部分空白，以节省宝贵的时间和带宽。

# sonarqube - JaCoCo 成功剖析了所有 Java 项目，Sonar 仅在一个项目中找到了覆盖范围

> ID：14604817
> 
> 赞同：2
> 
> 时间：2013-01-30T13:08:41.013
> 
> 标签：sonarqube, jacoco

我正在使用声纳 3.2 + Java 1.6 + Ant 1.7 0 JBoss 1.5。我们有许多 Java 项目，Ant 将它们编译成一个构建项目，其中还包含 .ear 文件、java 类等。我通过将 JaCoCo 代理作为参数提供给 JBoss JVM 来启动 JBoss 服务器。使用文本编辑器查看 jacoco.exec 文件，它包含来自我们所有 Java 项目的跟踪（如预期的那样）。

但是，将 jacoco.exec 文件导入 Sonar 时，它只显示我们的一个 java 项目的 IT 代码覆盖率。在 Sonar Ant 配置中，我包含了我们所有的项目 java 源和类文件。这些似乎可以很好地导入，因为所有 java 源都显示了违规行为。

有什么问题？顺便提一句。Sonar 将 jacoco.exec 覆盖文件与 java 源文件或编译的类文件进行比较？我已经包括了两个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T12:45:48.957

我有一个类似的问题，对我来说这是由 sonar-jacoco-plugin 中的错误引起的。1.2 版有一个错误，因此它只包含第一个二进制目录。

这在 sonar-jacoco-plugin 的 1.3 版中已修复。

有关详细信息，请参阅[http://jira.codehaus.org/browse/SONARJAVA-164](http://jira.codehaus.org/browse/SONARJAVA-164)。

# r - 为什么此 POSIXct 或 ITime 会丢失其格式/属性

> ID：14604820
> 
> 赞同：8
> 
> 时间：2013-01-30T13:08:56.523
> 
> 标签：r, data.table

这是我的示例数据，我不明白为什么列在使用包`ITime`的以下代码中丢失了它的格式`data.table`

```
DT = data.table(x=as.POSIXct(c("2009-02-17 17:29:23.042",
                               "2009-02-17 17:29:25.160")),
                y=c(1L,2L))
DT[,x1:=as.ITime(x)]
DT[,`:=`(last.x=tail(x,1L),last.x1=tail(x1,1L)),by=y]
DT
                         x y       x1     last.x last.x1
1: 2009-02-17 17:29:23.042 1 17:29:23 1234888163   62963
2: 2009-02-17 17:29:25.160 2 17:29:25 1234888165   62965 
```

但是如果`data.table`已经知道下面的格式，它可以工作

```
DT = data.table(x=as.POSIXct(c("2009-02-17 17:29:23.042",
                               "2009-02-17 17:29:25.160")),
                y=c(1L,2L))
DT[,x1:=as.ITime(x)]
DT[,`:=`(last.x=x,last.x1=x1)] #HERE DATA>TABLE KNOWS THE LAST.* FORMAT
DT[,`:=`(last.x=tail(x,1L),last.x1=tail(x1,1L)),by=y]
R) DT
                         x y       x1                  last.x  last.x1
1: 2009-02-17 17:29:23.042 1 17:29:23 2009-02-17 17:29:23.042 17:29:23
2: 2009-02-17 17:29:25.160 2 17:29:25 2009-02-17 17:29:25.160 17:29:25 
```

它必须是关于如何`data.table`分配的东西，有解决方法吗？

**更新**感谢 Arun，现在已修复

```
R) library(data.table)
data.table 1.8.11  For help type: help("data.table")
R) DT = data.table(x=as.POSIXct(c("2009-02-17 17:29:23.042",
+                                "2009-02-17 17:29:25.160")),
+                 y=c(1L,2L))
R) DT[,x1:=as.ITime(x)]
R) DT[,`:=`(last.x=tail(x,1L),last.x1=tail(x1,1L)),by=y]
R) DT
                         x y       x1                  last.x  last.x1
1: 2009-02-17 17:29:23.042 1 17:29:23 2009-02-17 17:29:23.042 17:29:23
2: 2009-02-17 17:29:25.160 2 17:29:25 2009-02-17 17:29:25.160 17:29:25 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-21T00:47:12.470

**更新：这已在 v1.8.11 中修复。来自[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable&pathrev=975)：**

> `:=`（通过引用分配）*在分组时*`POSIXct`丢失或`ITime`属性现在已修复，[#2531](https://r-forge.r-project.org/tracker/?func=detail&atid=975&aid=2531&group_id=240)。添加了测试。感谢 stat quant 在这里报告： [为什么这个 POSIXct 或 ITime 会丢失其格式/属性](https://stackoverflow.com/questions/14604820/why-does-this-posixct-or-itime-loses-its-format-attribute)以及 Paul Murray 在这里报告 SO： [不能通过 data.table 中的引用将列分配为.Date](https://stackoverflow.com/questions/15996692/cannot-assign-columns-as-date-by-reference-in-data-table)

 *如果我似乎忽略了什么，请回信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:37:48.797

归档为[bug #2531](https://github.com/Rdatatable/data.table/issues/155)，优先级由 Matthew 更新。*

# oracle - 来自 dbms_metadata.get_ddl 的自定义表 DDL

> ID：14604827
> 
> 赞同：3
> 
> 时间：2013-01-30T13:09:07.587
> 
> 标签：oracle, plsql, oracle11g, rdbms, database-administration

我想要`DDL`s 表，以便我可以使用`UTL`Oracle 中的 Package 将其放入数据库服务器。

问题是：当我们

```
select dbms_metadata.get_ddl('TABLE','Table_name','Schema_Name') 
  from dual; 
```

我得到一个包含`CLOB`before的输出`CREATE`。喜欢

```
"(CLOB) 
  CREATE TABLE "SCHEMA"."TABLE_NAME" 
   (TABLE_COLUMNS.....) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "INTF_DATA01" ;" 
```

我想要的是上面`DDL`没有`CLOB`和没有参数，例如`SEGMENT CREATION`，`PCTFREE`... ETC..

很高兴得到建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T13:41:46.070

我们可以使用 DBMS_METADATA.SET_TRANSFORM_PARAM 方法来控制生成的 DDL 中包含哪些子句。

例如，要排除 SEGMENT 的东西，你会执行这个

```
exec dbms_metadata.set_transform_param
   (dbms_metadata.session_transform,'SEGMENT_ATTRIBUTES',false); 
```

在你执行你的`get_ddl()`电话之前。

包文档列出了所有可用的转换参数。[了解更多](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_metada.htm#i1000135)。

* * *

我认为 Alex 是对的，前面的“（CLOB）”是您的客户在输出之前添加的内容。但它是真实的，而不是人工制品，摆脱它是一个简单的字符串操作：

```
substr(your_string, 7) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-23T14:41:31.973

1.  *请使用以下逻辑：它对我有用*

* * *

```
CREATE OR REPLACE TYPE ddl_ty AS OBJECT (   object_name
VARCHAR2(30),   object_type VARCHAR2(30),   orig_schema
VARCHAR2(30),   orig_ddl    CLOB ) / CREATE OR REPLACE TYPE
ddl_ty_tb AS TABLE OF ddl_ty /

CREATE OR REPLACE FUNCTION get_object_ddl (input_values
SYS_REFCURSOR) RETURN ddl_ty_tb PIPELINED IS

PRAGMA AUTONOMOUS_TRANSACTION;

-- variables to be passed in by sys_refcursor */ object_name  VARCHAR2(30); object_type  VARCHAR2(30); orig_schema VARCHAR2(30);

-- setup output record of TYPE tableddl_ty out_rec ddl_ty := ddl_ty(NULL,NULL,NULL,NULL);

/* setup handles to be used for setup and fetching metadata
information handles are used to keep track of the different objects
(DDL) we will be referencing in the PL/SQL code */ hOpenOrig  
NUMBER; hModifyOrig NUMBER; hTransDDL   NUMBER; dmsf       
PLS_INTEGER; Orig_ddl  CLOB; ret        NUMBER; BEGIN   /* Strip off
Attributes not concerned with in DDL. If you are concerned with
     TABLESPACE, STORAGE, or SEGMENT information just comment out these few lines. */   dmsf := dbms_metadata.session_transform;  
dbms_metadata.set_transform_param(dmsf, 'TABLESPACE', FALSE);  
dbms_metadata.set_transform_param(dmsf, 'STORAGE', FALSE);  
dbms_metadata.set_transform_param(dmsf, 'SEGMENT_ATTRIBUTES',
FALSE);   dbms_metadata.set_transform_param(dmsf, 'PRETTY', TRUE);  
dbms_metadata.set_transform_param(dmsf, 'SQLTERMINATOR', TRUE);

  -- Loop through each of the rows passed in by the reference cursor
LOOP
    /* Fetch the input cursor into PL/SQL variables */
    FETCH input_values INTO object_name, orig_schema, object_type;
    EXIT WHEN input_values%NOTFOUND;

    hOpenOrig := dbms_metadata.open(object_type);
    dbms_metadata.set_filter(hOpenOrig,'NAME',object_name);
    dbms_metadata.set_filter(hOpenOrig,'SCHEMA',orig_schema);

    hModifyOrig := dbms_metadata.add_transform(hOpenOrig,'MODIFY');
    dbms_metadata.set_remap_param(hModifyOrig,'REMAP_SCHEMA',orig_schema,null);

    -- This states to created DDL instead of XML to be compared
    hTransDDL := dbms_metadata.add_transform(hOpenOrig ,'DDL');

    Orig_ddl := dbms_metadata.fetch_clob(hOpenOrig);

      out_rec.object_name := object_name;
      out_rec.object_type := object_type;
      out_rec.orig_schema := orig_schema;
      out_rec.orig_ddl := Orig_ddl;
      PIPE ROW(out_rec);

    -- Cleanup and release the handles
    dbms_metadata.close(hOpenOrig);

  END LOOP;   RETURN; END get_object_ddl; / SELECT *   FROM
TABLE(get_object_ddl(CURSOR (SELECT object_name, owner, object_type
                               FROM dba_objects
                              WHERE owner = 'EMP'
                                    AND object_type IN
                                    ('VIEW',
                                         'TABLE',
                                         'TYPE',
                                         'PACKAGE',
                                         'PROCEDURE',
                                         'FUNCTION',
                                         'SEQUENCE')))); 
```

* * *

1.  项目清单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-28T08:56:13.163

`get_ddl`返回一个 CLOB。将其转换为字符类型，您的库将不会添加 (CLOB)。

```
select to_char(dbms_metadata.get_ddl('TABLE','Table_name','Schema_Name'))
    from dual; 
```

# facebook-graph-api - 如何使用 Facebook API C# SDK 发送私人消息

> ID：14604830
> 
> 赞同：0
> 
> 时间：2013-01-30T13:09:19.603
> 
> 标签：facebook-graph-api, facebook-c#-sdk

有谁知道如何使用 My Own Facebook Apps 发送私人消息？我已经用谷歌搜索过了，但可以说没有。您想分享任何示例代码或参考吗？我会非常感谢提前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:27:39.723

你不能。Facebook 没有为此操作公开 API。

# asp.net-mvc - 对自联接表的 Linq 嵌套选择查询

> ID：14604832
> 
> 赞同：2
> 
> 时间：2013-01-30T13:09:21.127
> 
> 标签：asp.net-mvc, linq

我正在开发一个 .Net MVC3 项目。我有以下代码在同一张表上运行 2 个查询。第二个查询取决于第一个查询的结果。我如何重写它以使用单个查询（使用嵌套查询）并将结果分配给我的视图模型？

```
public ViewResult Category(string id)
{
    var viewModel = new ProductCategoryNavigation();

    viewModel.category = db.Category.Single(c=>c.NavigationId==id);
    viewModel.subCategories = db.Category.Where(i => i.ParentId == category.Id);

    return View(viewModel);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:23:25.603

```
var query = (from c in db.Category.Where(x => x.NavigationId == id)
             join sc in db.Category on c.Id equals sc.ParentId into g
             select new {
                 Category = c,
                 SubCategories = g
             }).Single();

viewModel.category = query.Category;
viewModel.subCategories = query.SubCategories; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:14:40.433

如果有关系映射类别到类别，你可以使用这样的东西。

```
viewModel.subCategories = db.Category.Single(c=>c.NavigationId==id).Category; 
```

如果存在关系，您会看到 2 个不同的关系，如下所示：

```
Category.Category1 > return Category (parent)
Category.Category2 > return Collection of Category (children) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:29:28.187

我认为你可以尝试这样的事情。

```
viewModel.subCategories = from c in db.categories
                          join c1 in db.categories on c.Id = c1.ParentId 
                          where c.NavigationId = id
                          select c1 
```

# javascript - 多个帧在同一个浏览器线程中执行？

> ID：14604834
> 
> 赞同：1
> 
> 时间：2013-01-30T13:09:21.207
> 
> 标签：javascript, multithreading, dom, browser

当您在浏览器中有一个文档时，该负载是来自同一源服务器的一个或多个帧。

这些框架是由与主窗口相同的线程执行的吗？

或者有可能有一个处理繁重的框架而其他框架不会冻结？

我还没有找到任何规范，有人知道它在哪里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T08:54:25.393

我不是“浏览器如何工作”的专家，但我预测的是：

你不能确定。这取决于引擎的类型（我们谈论）、浏览器及其版本......

如果我们谈论的是布局渲染引擎（**通常**是单线程的）；一切都在单个线程的线性流中执行。**传统上**，它是“**浏览器**”的主线程，然后在 IE7 中，每个浏览器“**窗口**”都有自己的线程。但它会随着时间**不断变化，现在每个“****选项卡**”大多是单线程。

在选项卡内；当 javascript 正在执行时，渲染引擎会等待它完成。原因是 Javascript 引擎**传统上**共享相同的单线程（但不一定）。甚至，异步事件也会排队等待适当的执行时间。

另一方面是网络运营；由多个并行线程处理。但又一次；这些操作的回调被注入到主线程中浏览器的事件循环中。（这就是为什么这些调用的数量通常是有限的）。

用于渲染；内部/嵌入式框架（例如`iframe`）受制于**框架构造**器（它负责每个具有大小、填充、边距、位置等的矩形框）。脚本执行在主窗口的同一线程中处理。（再次“**一般**”，因为在 Opera 中，如果它是 iframe，则情况可能并非如此。）

因此，每个浏览器都有一个内部调度实现，用于事件/操作将在何时以及如何排队和执行。例如; 下图演示了如何在 Gecko 浏览器中处理页面请求。

![在此处输入图像描述](../Images/e659d5717ffc43bd13fb161a1cc4883f.png)

浏览器可以决定是**推迟**重排还是**立即**重排。通常原因是为了优化速度和绘画，但立即回流主要是必需的。例如，更改布局的 JavaScript 代码，例如更改 DOM 元素的高度。这应该是立即重排，以便渲染引擎可以准确计算元素的边界并继续布局过程。观看有关 Gecko 回流可视化的[视频。](http://www.youtube.com/watch?v=ZTnIxIA5KGw)

回到关于非冻结繁重过程的第二个问题：

在 Opera 中，您可能会将繁重的进程加载到 iframe，并且它可能不会阻塞主窗口。但这也可能会随着时间而改变。如果您无法获得可以实现这一点的 API；你不能依赖它作为非阻塞。作为开发人员，您应该认为 Javascript 和 DOM 操作是单线程的。

您可以查看HTML5 规范中的**Web Workers**。它们可以通过 javascript 访问。我不相信这会给 javascript 带来多线程，因为工作人员只能通过消息与另一个线程交谈，并且不能直接访问 DOM。但是，您仍然可以将繁重的计算分配给工作人员，而不会干扰您所在的线程。

## 更多资源：

*   [网络工作者](http://dev.w3.org/html5/workers/)
*   [非阻塞脚本](http://www.nczonline.net/blog/2010/08/10/what-is-a-non-blocking-script/)
*   [框架结构](https://wiki.mozilla.org/Gecko:Overview#Frame_Construction)
*   [Mozilla 中的布局](https://developer.mozilla.org/en-US/docs/Introduction_to_Layout_in_Mozilla#_Reflow_)

# asp.net-mvc - ASP.NET MVC 下拉列表未在渲染时选择值

> ID：14604856
> 
> 赞同：9
> 
> 时间：2013-01-30T13:10:34.280
> 
> 标签：asp.net-mvc

我有这个烦人的问题，我的 DropDownlist 默认不选择当前值。

控制器：

```
var YearsCycling = new SelectList(new List<SelectListItem>() 
{ 
    new SelectListItem(){ Value="1yr", Text="1yr"},
    new SelectListItem(){ Value="1-3yrs", Text="1-3yrs"}, 
    new SelectListItem(){ Value="3-5yrs", Text="3-5yrs"}, 
    new SelectListItem(){ Value="5-10yrs", Text="5-10yrs"}, 
    new SelectListItem(){ Value="10+yrs", Text="10+yrs"} 
},
"Value",
"Text",
new SelectListItem() { Value = "5-10yrs", Text = "5-10yrs", 
Selected = true });
ViewBag.YearsCycling = YearsCycling; 
```

看法：

```
<%:Html.DropDownListFor(model=>model.YearsCycling,(SelectList)ViewBag.YearsCycling,"-select-") %> 
```

但不是选择“5-10yrs”，它只显示“-select-”选项，如果我检查 DOM 源，则没有选择任何元素。

更新：我仍然不知道问题是什么，但我现在通过做一些丑陋的事情让它工作：

```
<%
    var sl = (SelectList)ViewBag.YearsCycling;
%>
<select name="YearsCycling" id="YearsCycling">
<%foreach(var li in sl){  %>
    <option value="<%:li.Value %>" <%if(li.Selected){%>selected="true"<%}%>><%:li.Text %></option>
<%} %>
</select> 
```

这不是最好的解决方案，但是如果您因为一直在拔头发而提出这个问题，那么这应该会有所帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-24T22:07:34.123

我确定您已经超越了这一点，但我刚才被烧毁了，因为我已将下拉列表命名为与视图模型类中的属性相同的名称。

将下拉列表名称更改为其他名称可以立即解决。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T13:21:28.863

试试这个：

**创建一个视图模型：**

```
public class MyViewModel
{
    public string SelectedValue { get; set; }
    public IEnumerable<SelectListItem> YearsCycling { get; set; }
} 
```

控制器：

```
var YearsCycling = new SelectList(new List<SelectListItem>() 
{ 
    new SelectListItem(){ Value="1yr", Text="1yr"},
    new SelectListItem(){ Value="1-3yrs", Text="1-3yrs"}, 
    new SelectListItem(){ Value="3-5yrs", Text="3-5yrs"}, 
    new SelectListItem(){ Value="5-10yrs", Text="5-10yrs"}, 
    new SelectListItem(){ Value="10+yrs", Text="10+yrs"} 
},
"Value",
"Text");

MyViewModel model = new MyViewModel();
model.YearsCycling = YearsCycling;
model.SelectedValue = "5-10yrs";
return View(model); 
```

看法：

```
<%:Html.DropDownListFor(model=>model.SelectedValue,(SelectList)Model.YearsCycling) %> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-29T16:56:06.077

如果您要像这样呈现您的列表：`@Html.DropDownListFor(model => model.EntityID, Model.EntitySelectList)`

呈现选择选项时 .NET MVC 将使用的值将与 .NET MVC 的值匹配`model.EntityID.ToString()`。

...它不会选择`Model.EntitySelectList.SelectedValue`

...或任何`EntitySelectList.Item.SelectedValue`项目。

... 换句话说，当呈现一个 DropDownListFor*列表本身以外的东西时，***列表**和**列表项**的 SelectedValue 属性将被忽略。

无论设置什么 Model.EntitySelectList.SelectedValue 或 Model.EntitySelectList.Item.SelectedValue，ASP.NET MVC 都不会呈现选择。改为使用`model.EntityID`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-30T13:17:04.793

你的代码应该是。

```
var YearsCycling = new List<SelectListItem>() 
{ 
    new SelectListItem(){ Value="1yr", Text="1yr"},
    new SelectListItem(){ Value="1-3yrs", Text="1-3yrs"}, 
    new SelectListItem(){ Value="3-5yrs", Text="3-5yrs"}, 
    new SelectListItem(){ Value="5-10yrs", Text="5-10yrs", Selected=true}, 
    new SelectListItem(){ Value="10+yrs", Text="10+yrs"} 
};

ViewBag.YearsCycling = YearsCycling; 
```

您可以改用此重载。

```
<%:Html.DropDownListFor(model=>model.YearsCycling,ViewBag.YearsCycling as List<SelectListItem>) %> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T11:50:14.907

绑定下拉列表在 MVC 中非常棘手，这让我很尴尬，您可以在控制器中使用此功能将所有城市列表放入 viewBag

创造

```
 ViewBag.CityId = new SelectList(db.Cities, "ID", "Name"); 
```

user.CityID 如果您在编辑中，以便在编辑时选择城市

```
 ViewBag.CityId = new SelectList(db.Cities, "ID", "Name", user.CityID); 
```

在您的视图中，只需执行此操作

```
 @Html.DropDownList("CityId", "Select") 
```

这是我所知道的最简单的方法......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-25T22:32:08.520

使用与 html 元素同名的 ViewBag 时遇到一些问题。

因此，当 SelectList 存储在 ViewBag.EventId 中时，不要为 EventId 使用 DropDownList。

将 ViewBag.EventId 更改为 ViewBag.EventData，它是固定的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-02T09:50:13.710

只需确保在 ViewBag 上设置的变量名称与分配给下拉列表的名称不同 - 即不要这样做：

控制器：

ViewBag.CityId = new SelectList(....)

看法：

@Html.DropDownList("CityId", ...

只需使用不同的 viewbag 变量名称。

当使用相同的 ViewBag 变量名称作为带有下拉列表和列表框的 html 控件名称时，我遇到了问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-05T15:09:45.100

Html.DropDownListFor 也使用来自**POST 请求**的值。

因此，如果您在 POST 数据中具有相同的参数，即使您在模型中具有不同的值，MVC 也会使用它。

检查您是否在请求中具有相同的名称并更改它。

# iphone - XCode：从特定选项卡中删除选择指示器图像

> ID：14604858
> 
> 赞同：0
> 
> 时间：2013-01-30T13:10:38.770
> 
> 标签：iphone, objective-c, xcode, uitabbarcontroller

我正在使用自定义标签栏图像，中间标签也是自定义图像（很像旧版本的 Instagram）。

这是我的一些代码：

```
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
    UITabBar *tabBar = tabBarController.tabBar;

    [tabBar setBackgroundImage:[UIImage imageNamed:@"CustomTabBar.png"]];

    UITabBarItem *tabBarItem3 = [tabBar.items objectAtIndex:2];
    tabBarItem3.title = nil;
    tabBarItem3.image = nil;
    [tabBarItem3 setFinishedSelectedImage:[UIImage imageNamed:@"tab-button-selected.png"] withFinishedUnselectedImage:[UIImage imageNamed:@"tab-button.png"]]; 
```

这很好用，但我有一个无法解决的问题。默认情况下，所选选项卡具有浅灰色背景。这是我想保留的效果，但不适用于中间标签。中间的选项卡是一个较大的圆形图像，当它被选中时会发生变化，但仍然会出现灰色背景。

有没有办法删除这个，`[tabBar setSelectionIndicatorImage:[[UIImage alloc] init]];`但仅限于该选项卡。或者，在应用程序委托中，检测选项卡中的更改并将其删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T14:58:29.507

好的，所以事实证明，在这些情况下，午餐时间散步真的很有帮助。这是我对其他有类似问题的人的回答。

我首先包含`<UITabBarControllerDelegate>`在我的应用程序委托的 .h 中。在`didFinishLaunchingWithOptions`方法中我设置了标签栏的委托：

```
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
tabBarController.delegate = self; 
```

然后我可以使用这个方法来切换是否显示背景图像：

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController {
    UITabBar *tabBar = tabBarController.tabBar;
    if (tabBar.selectedItem == [tabBar.items objectAtIndex:2]) {
        [tabBar setSelectionIndicatorImage:[[UIImage alloc] init]];
    }
    else {
        [tabBar setSelectionIndicatorImage:nil];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:51:05.697

我已经尝试在我的代码中实现这一点。但是，我在情节提要中制作了原始标签栏，当我在我的应用程序委托中添加标签栏时，它似乎没有被覆盖。我想知道我该怎么做呢？

我可以像这样覆盖标签栏项目

```
//create new tab bar appearance
UITabBar *tabBar = [UITabBar appearance];
//set background image
[tabBar setBackgroundImage:[UIImage imageNamed:@"menu.png"]];
//create a colour and apply it as tint colour when items aren't selected.
UIColor *color=[UIColor colorWithRed:64.0/255.0 green:147.0/255.0 blue:52.0/255.0 alpha:255.0];
UIColor *colorSelected=[UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:1.0];
[tabBar setTintColor:color];
[tabBar setSelectedImageTintColor:colorSelected];

[tabBar setSelectionIndicatorImage:[UIImage imageNamed:@"selection-tab.png"]]; 
```

所有这些都在 didfinishloadingwithoptions 中

# css - 关于如何在流体元素中垂直居中内容的建议

> ID：14604860
> 
> 赞同：0
> 
> 时间：2013-01-30T13:10:45.560
> 
> 标签：css

我在一篇文章中有一些内容大小不一，基本上我已经应用`display:table`到父元素，然后再`display:table-cell`应用到`vertical-align:middle`我希望居中的元素。然而，我的问题是我无法使我想要将父文章的 100% 高度居中的元素设置为中心，并且想知道如何实现这一点？

我在 jsfiddle 上构建了一个示例：http: [//jsfiddle.net/f29Mr/](http://jsfiddle.net/f29Mr/)

**这是示例CSS**

```
.m-level-block {
    width: 91.66667%;
    float: left;
    margin-right: 0%;
    display: inline;
    margin-left: 4.16667%;
    margin-right: 95.83333%;
    background: black;
    margin-bottom: 10px;
}
.m-level-block .m-video-thumb {
    width: 18.18182%;
    float: left;
    margin-right: 0%;
    display: inline;
}
.m-video-thumb .video-stats-container {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
}
.m-level-block .level-content {
    width: 81.81818%;
    float: right;
    margin-right: 0;
    display: inline;
    position: relative;
    display: table;
    height: 100%;
}
.m-level-block .level-content .level-info {
    padding: 2%;
    width: 55.55556%;
    display: table-cell;
    vertical-align: middle;
    max-height: 400px;
    height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:25:15.870

我在这里做的更简单，但你应该很容易看到它是如何工作的：

演示[http://jsfiddle.net/f29Mr/3/](http://jsfiddle.net/f29Mr/3/)

**HTML**

```
<div class="article">
    <div class="image">a</div>
    <div class="text">TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT TEXT</div>
    <div class="stats">HELLO</div>
</div> 
```

***CSS***

```
body, html {
    width: 100%;
    height: 100%;
}

.article {
    width: 90%;
    height: 20%;
    margin: 0 auto;
    border: 1px solid #666;
    display:table;
}

.article .image {
    width: 20%;
    height: 100%;
    background: #F00;
    display: table-cell;
}

.article .text {
    width: 60%;
    height: 100%;
    display: table-cell;
    vertical-align:middle;
}

.article .stats {
    height: 20%;
    width: 19%;
    display:inline-block;
    vertical-align:middle;
    display: table-cell;
} 
```

链接到您上面应用的内容：http: [//jsfiddle.net/f29Mr/4/](http://jsfiddle.net/f29Mr/4/)

# c# - Winforms：循环中的多个对话形式

> ID：14604863
> 
> 赞同：0
> 
> 时间：2013-01-30T13:10:57.277
> 
> 标签：c#, winforms, modal-dialog, multithreading

我有一个要求，在我的应用程序中应该显示警报框（对话框）。问题是应该首先显示最新的警报，然后在关闭它时显示下一个警报 - 依此类推。所以我决定将对话创建移动到单独的线程，这样就不需要关闭它们以执行剩余的代码。

我做了类似下面的事情。但问题是它们不会以对话的形式出现（可以在不关闭它们的情况下进入主窗体）。所以我决定使用`ShowDialog(IWin32Window)` 但是它给了我跨线程操作无效的错误。

如何处理这种情况？

```
private void button2_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < 3; i++)
            {
                new Thread(new ThreadStart(ShowDialogue)).Start();
                Thread.Sleep(1500);
            }
        }

 private void ShowDialogue()
        {          
                FormDialogue fd = new FormDialogue(-1);
                fd.ShowDialog( ); 

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:14:53.000

如果您希望主表单可用，请使用`fd.Show()`而不是。`fd.ShowDialog()`不需要线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:21:51.153

从您的问题看来，您希望生成的“对话框堆栈”是模态的（一次查看一个对话框，必须将它们全部关闭才能返回主窗体）。

我建议不要使用线程，而是直接在其中运行带有 ShowDialog 的循环。例如：

```
private void button2_Click(object sender, EventArgs e)
{
    for (int i = 0; i < 3; i++)
    {
        FormDialogue fd = new FormDialogue(-1);
        fd.ShowDialog();
    }
} 
```

您将需要根据上述优先级保留您想要处理它们的警报列表。

但是，我怀疑您会发现，如果有很多警报对话，您的用户不会非常喜欢这种方法，您可能会发现自己回到了一次显示所有警报的单个对话。

另一种选择是将所有警报信息（可能在列表中）发送到单个对话框，并在该对话框中让 OK 按钮遍历显示警报的列表，直到完成。

无论哪种方式都应该非常简单。

# android - 5 英寸 1080p Android 手机上的密度

> ID：14604865
> 
> 赞同：2
> 
> 时间：2013-01-30T13:11:02.560
> 
> 标签：android

像索尼 Xperia Z 这样的新智能手机的 ppi 非常高，比如 443 ppi。有没有人接触过这样的设备，并且可以判断这仍然是 xhdpi 还是 xxhdpi？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T13:13:44.927

索尼 Xperia Z 是一款 xxhdpi 设备。在 Sony 附加 SDK 中，Xperia Z 的 AVD 设备定义具有 xxhdpi 像素密度集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T18:46:55.170

索尼也刚刚在他们的开发者博客上确认了 xxhdpi：http: [//developer.sonymobile.com/2013/03/07/make-sure-your-app-does-not-exclude-xxhdpi-screens/](http://developer.sonymobile.com/2013/03/07/make-sure-your-app-does-not-exclude-xxhdpi-screens/)

# java - 如何在 Java 中将 HEX 文件上传到 Arduino？

> ID：14604866
> 
> 赞同：3
> 
> 时间：2013-01-30T13:11:04.227
> 
> 标签：java, erlang, arduino, protocols

我想将准备好的 HEX 文件上传到 Arduino 板。我怎样才能在 Java 代码中做到这一点？

我应该在 Java 中实现 STK500 协议吗？Java中是否有任何可行的解决方案或示例？

PS。我在[Erlang中找到了一个](http://en.wikipedia.org/wiki/Erlang_%28programming_language%29)[STK500 实现](https://github.com/msantos/stk500)，但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:21:37.580

轮子存在。使用轮子。
使用优秀的 AVRdude 从 Java 上传。

```
/*
A command line looks like this in a stock Arduino IDE:

D:\arduino-dev\arduino-1.0.3\hardware/tools/avr/bin/avrdude   
-CD:\arduino-dev\arduino-1.0.3\hardware/tools/avr/etc/avrdude.conf 
-v -v -v -v -patmega328p -carduino 
-P\\.\COM8 -b115200 -D -V 
-Uflash:w:e:\Temp\build100458372319682483.tmp\Blink.cpp.hex:i

Just write the binary to the .HEX file and let the dude upload it:
*/

String hexfile = "e:\somefolder\Blink.cpp.hex";
String exefile = "D:\arduino-dev\arduino-1.0.3\hardware/tools/avr/bin/avrdude";
String conffile = "D:\arduino-dev\arduino-1.0.3\hardware/tools/avr/etc/avrdude.conf";
String opts = " -v -v -v -v -patmega328p -carduino -P\\.\COM8 -b115200 -D -V ";
String cmd = exefile +" -C"+ conffile + opts +" -Uflash:w:" + hexfile +":i";

Process proc = Runtime.getRuntime().exec(cmd);
int retcode = waitFor(proc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T18:13:56.107

我可以很容易地使用 Stk500 协议（Uno，仅限旧 arduinos）做到这一点。您唯一应该注意的是 DTR/RTS。

# android - 包含抽象类实例的内部类：获取“Parcelable 遇到 IOException 写入可序列化对象”

> ID：14604869
> 
> 赞同：0
> 
> 时间：2013-01-30T13:11:19.363
> 
> 标签：android, serialization

我知道有与我类似的主题，但没有一个可以帮助我处理我的情况。

我有一个类，其中包含一个内部序列化的非静态类。当我按下设备的“主页”键时发生崩溃（并且应用程序将进入后台）

这是我的代码

```
public class pageParam implements Serializable {

    private static final long serialVersionUID = 7793437011565026799L;

    public OnCloseListener onCloseListener;
    public long userId;
    public boolean hasName;
    public int age;

    public pageParam(OnCloseListener onCloseListener, long userId,
            boolean userId, int age) {
        this.onCloseListener = onCloseListener;
        this.userId = userId;
        this.hasName = hasName;
        this.age = age;
    }
} 
```

和

```
public abstract class OnCloseListener implements Serializable {

            private static final long serialVersionUID = -143252315312L;

    public abstract void onCloseListener();
} 
```

请注意 OnCloseListener 是抽象的，我可以在 OnCloseListener 的实现中添加 serialVersionUID（无论是否这样做，它都会失败）

编辑：

这是 OnCloseListener() 的实现：

```
OnCloseListener OnCloseListener = new OnCloseListener() {

    /**
     * 
     */
    private static final long serialVersionUID = -8848214522109319925L;

    @Override
    public void OnCloseListener() {
        ......
 }
} 
```

如您所见，它也有序列号。

编辑2：

即使我将 OnCloseListener 更改为常规类（不是抽象类），我仍然收到此异常错误。

公共类 OnCloseListener 实现 Serializable {

```
 /**
     * 
     */
    private static final long serialVersionUID = 2718040340149001112L;

    public void OnClose() {
        ......
   } 
} 
```

也许它与 OnClose() 中的代码有关？我在那里对上层阶级进行了一些操作。

# ant - Jdeveloper 中的 ANT_HOME 位置？？

> ID：14604870
> 
> 赞同：0
> 
> 时间：2013-01-30T13:11:19.943
> 
> 标签：ant, jdeveloper

我正在使用 JDEV 11g TP4 我如何知道我的 ANT_HOME 路径，以及如何设置 ANT_HOME 路径如果有人知道，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:32:16.083

查看项目属性-> Ant->子节点

# c - 在C中删除十六进制数据中的填充零？

> ID：14604871
> 
> 赞同：-1
> 
> 时间：2013-01-30T13:11:22.893
> 
> 标签：c

扫描生物模板数据后，我得到了 hexdata 字符串。我需要删除这些零，以便获得十六进制字符串。问题是我不能只删除零对，因为字符串中间可能有零。

也好像零被某种方式删除了字符串长度必须根据十六进制格式保持；意味着最后一个零可以是数据的一部分，但不是所有的零。数据如下所示：

```
1EBC67E66B1FE9C783000C700DBBF0000000000000 
```

“F”之后的最后一个零也可以是数据的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:19:54.933

为什么不从字符串的末尾到开头遍历字符串，每次跳入 2 直到第一个非零值，然后复制子字符串（直到找到第一个非零值位置）？

# javascript - (Nivo Slider) 从 Image 中获取标题并添加到 Div

> ID：14604872
> 
> 赞同：0
> 
> 时间：2013-01-30T13:11:24.243
> 
> 标签：javascript, jquery, nivo-slider

我正在尝试从当前幻灯片（图像）中获取标题，然后将标题数据添加到 div。[这里是 nivo 滑块的演示。](http://nivo.dev7studios.com/demos/)

我尝试在 Nivo 滑块中使用 afterChange 函数，但没有任何运气。

```
afterChange: function(){
   $('#status .caption').data('nivo:vars').currentSlide.attr('title');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T14:26:11.567

我已经做到了。希望这可以帮助某人。

```
 current_title = jQuery('#slider').data('nivo:vars').currentImage.attr('title');
  jQuery('#slider .caption').text(current_title); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:35:22.640

你必须使用这样的东西：我没有对 Nivo 做过任何事情，我不确定 '.data('nivo:vars').currentSlide.attr('title')' 是否真的存在......

```
afterChange: function() {
    var title = $('#slider').data('nivo:vars').currentSlide.attr('title');
    $('#status .caption').html(title);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:32:30.087

```
var sliderSelector = '#slider'; // Replace with your slider selector
var index = 0; // You start with slide 0 as the first slide

controlNav: true, // This solution relies on this to work
$(sliderSelector).nivoSlider({
    afterChange: function() {
        index = $(sliderSelector + ' .nivo-controlNav .nivo-control').filter('.active').index();
        showCaption(sliderSelector, index);
    },
    afterLoad: function() {
        showCaption(sliderSelector, index);
    }
}); 
```

和 showCaption 功能

```
function showCaption(sliderSelector, index) {
    var title = $($(sliderSelector + ' img').get(index)).prop('title');
    if (title.length > 0) { // Determines if it has to show a caption
        var caption = $(sliderSelector + ' .nivo-caption').html(); // Gets the current caption
        console.log(caption);
    }
} 
```

# jquery-ui - jquery DragAndDrop 设置无法正常工作

> ID：14604875
> 
> 赞同：0
> 
> 时间：2013-01-30T13:11:32.947
> 
> 标签：jquery-ui, jquery-ui-draggable

我已经构建了一个 TreeView，它呈现如下（这里只显示第一个 li，其余类似）：

```
<li class="t-item cas ui-droppable ui-draggable" data-id="930" data-typesuffix="CAS">
<div class="t-top"><span class="t-icon t-minus"></span><span class="t-in"><img alt="(C)" class="t-image" src="#">cabine</span>
    <input
    class="t-input" name="itemValue" type="hidden" value="930CAS">
</div>
<ul class="t-group" style="">
    <li class="t-item cas ui-droppable ui-draggable" data-id="2563" data-typesuffix="CAS">
        <div class="t-top"><span class="t-icon t-plus"></span><span class="t-in"><img alt="(C)" class="t-image" src="#">porte conducteur</span>
            <input
            class="t-input" name="itemValue" type="hidden" value="2563CAS">
        </div>
        <ul class="t-group" style="display:none">
            <li class="t-item csm ui-draggable" data-id="20280" data-typesuffix="CSM">
                <div class="t-top"><span class="t-in"><img alt="(M)" class="t-image" src="#">Carnet de km , 1 pces</span>
                    <input
                    class="t-input" name="itemValue" type="hidden" value="{&quot;ID_CSM&quot;:20280,&quot;IDMAT_CSM&quot;:66,&quot;IDCAS_CSM&quot;:2563,&quot;CANTITEFIXE_CSM&quot;:1,&quot;REMARQUES_CSM&quot;:null,&quot;NOORDRE_CSM&quot;:1,&quot;materiel&quot;:{&quot;id_MAT&quot;:66,&quot;DEN_MAT&quot;:&quot;Carnet de km&quot;,&quot;DEN_UME&quot;:&quot;pces&quot;}}">
                </div>
            </li>
            <li class="t-item t-last csm ui-draggable" data-id="20281" data-typesuffix="CSM">
                <div class="t-bot"><span class="t-in"><img alt="(M)" class="t-image" src="#">Gilet sécurité , 1 pces</span>
                    <input
                    class="t-input" name="itemValue" type="hidden" value="{&quot;ID_CSM&quot;:20281,&quot;IDMAT_CSM&quot;:694,&quot;IDCAS_CSM&quot;:2563,&quot;CANTITEFIXE_CSM&quot;:1,&quot;REMARQUES_CSM&quot;:null,&quot;NOORDRE_CSM&quot;:2,&quot;materiel&quot;:{&quot;id_MAT&quot;:694,&quot;DEN_MAT&quot;:&quot;Gilet sécurité&quot;,&quot;DEN_UME&quot;:&quot;pces&quot;}}">
                </div>
            </li>
        </ul>
    </li>
    <li class="t-item cas ui-droppable ui-draggable" data-id="2565" data-typesuffix="CAS">
        <div class="t-mid"><span class="t-icon t-minus"></span><span class="t-in"><img alt="(C)" class="t-image" src="#">console</span>
            <input
            class="t-input" name="itemValue" type="hidden" value="2565CAS">
        </div>
        <ul class="t-group" style="">
            <li class="t-item t-last csm ui-draggable" data-id="20315" data-typesuffix="CSM">
                <div class="t-top t-bot"><span class="t-in"><img alt="(M)" class="t-image" src="#">Télécomande porte , 1 pces</span>
                    <input
                    class="t-input" name="itemValue" type="hidden" value="{&quot;ID_CSM&quot;:20315,&quot;IDMAT_CSM&quot;:1620,&quot;IDCAS_CSM&quot;:2565,&quot;CANTITEFIXE_CSM&quot;:1,&quot;REMARQUES_CSM&quot;:null,&quot;NOORDRE_CSM&quot;:2,&quot;materiel&quot;:{&quot;id_MAT&quot;:1620,&quot;DEN_MAT&quot;:&quot;Télécomande porte&quot;,&quot;DEN_UME&quot;:&quot;pces&quot;}}">
                </div>
            </li>
        </ul>
    </li>
    <li class="t-item cas ui-droppable ui-draggable" data-id="2566" data-typesuffix="CAS">
        <div class="t-mid"><span class="t-icon t-plus"></span><span class="t-in"><img alt="(C)" class="t-image" src="#">boite à gants</span>
            <input
            class="t-input" name="itemValue" type="hidden" value="2566CAS">
        </div>
        <ul class="t-group" style="display:none">
            <li class="t-item t-last csm ui-draggable" data-id="20320" data-typesuffix="CSM">
                <div class="t-top t-bot"><span class="t-in"><img alt="(M)" class="t-image" src="#">Trousseau divers clés boule  , 1 pces</span>
                    <input
                    class="t-input" name="itemValue" type="hidden" value="{&quot;ID_CSM&quot;:20320,&quot;IDMAT_CSM&quot;:1329,&quot;IDCAS_CSM&quot;:2566,&quot;CANTITEFIXE_CSM&quot;:1,&quot;REMARQUES_CSM&quot;:null,&quot;NOORDRE_CSM&quot;:1,&quot;materiel&quot;:{&quot;id_MAT&quot;:1329,&quot;DEN_MAT&quot;:&quot;Trousseau divers clés boule &quot;,&quot;DEN_UME&quot;:&quot;pces&quot;}}">
                </div>
            </li>
        </ul>
    </li>
    <li class="t-item cas ui-droppable ui-draggable" data-id="2567" data-typesuffix="CAS">
        <div class="t-mid"><span class="t-icon t-plus"></span><span class="t-in"><img alt="(C)" class="t-image" src="#">porte passagers</span>
            <input
            class="t-input" name="itemValue" type="hidden" value="2567CAS">
        </div>
        <ul class="t-group" style="display:none">
            <li class="t-item t-last csm ui-draggable" data-id="20324" data-typesuffix="CSM">
                <div class="t-top t-bot"><span class="t-in"><img alt="(M)" class="t-image" src="#">Gilet sécurité , 2 pces</span>
                    <input
                    class="t-input" name="itemValue" type="hidden" value="{&quot;ID_CSM&quot;:20324,&quot;IDMAT_CSM&quot;:694,&quot;IDCAS_CSM&quot;:2567,&quot;CANTITEFIXE_CSM&quot;:2,&quot;REMARQUES_CSM&quot;:null,&quot;NOORDRE_CSM&quot;:1,&quot;materiel&quot;:{&quot;id_MAT&quot;:694,&quot;DEN_MAT&quot;:&quot;Gilet sécurité&quot;,&quot;DEN_UME&quot;:&quot;pces&quot;}}">
                </div>
            </li>
        </ul>
    </li>
    <li class="t-item t-last csm ui-draggable" data-id="20314" data-typesuffix="CSM">
        <div class="t-bot"><span class="t-in"><img alt="(M)" class="t-image" src="#">Carte essence , 1 pces</span>
            <input
            class="t-input" name="itemValue" type="hidden" value="{&quot;ID_CSM&quot;:20314,&quot;IDMAT_CSM&quot;:1619,&quot;IDCAS_CSM&quot;:930,&quot;CANTITEFIXE_CSM&quot;:1,&quot;REMARQUES_CSM&quot;:null,&quot;NOORDRE_CSM&quot;:1,&quot;materiel&quot;:{&quot;id_MAT&quot;:1619,&quot;DEN_MAT&quot;:&quot;Carte essence&quot;,&quot;DEN_UME&quot;:&quot;pces&quot;}}">
        </div>
    </li>
</ul> 
```

在javascript中，我有以下拖放设置：

```
$('#stockTreeView').on('stockLoad', function () {
    $('.cas').droppable(
        {
            accept: '.materiel',
            drop: function (event, ui) {

                var addRequest =
                {
                    ID_MAT: $('#Materiel').data('tGrid').dataItem($(ui.draggable).closest('tr')).ID_MAT,
                    ID_CAS: $(this).closest("li").data('id')
                };
                console.log(addRequest);
                addMaterielWindowManager.LoadWindowContent('Stock/AddMateriel', addRequest, 'Ajouter materiel');
            }
        }
    ).droppable(
        {
            accept: '.cas',
            drop: function (event, ui) {
                var changeParentRequest =
                {
                    ID_CAS: $(ui.draggable).parent().data('id'),
                    IDCASPARENT_CAS: $(this).parent().data('id')
                };
                console.log(changeParentRequest);
                $.post(
                    GetURL('Stock/UpdateCasierParent'),
                    changeParentRequest,
                    loadTreeView
                );
            }
        }
    ).droppable(
        {
            accept: '.csm',
            drop: function (event, ui) {
                var changeParentRequest =
                {
                    ID_CSM: $(ui.draggable).data('id'),
                    IDCAS_CSM: $(this).data('id')
                };
                console.log(changeParentRequest);
                $.post(
                    GetURL('Stock/UpdateCasierMateriel'),
                    changeParentRequest,
                    loadTreeView
                );
            }
        }
    );

    $('.cas, .csm').draggable(
        {
            helper: 'clone',
            appendTo: 'body',
            revert: 'invalid'
        }
    );

}); 
```

我需要帮助的问题是：如何使我的选择器更具体，以便我能够拖动到每个“.cas”节点。在我目前的情况下，每当我拖动任何东西时，它都会附加到列表中的顶级 '.cas' 元素，例如对于数据 ID = 930 的 li 的子 ul 中的每个 li，我得到 930 作为data-id，不是当前节点的 data-id 值。

我使用的 jquery 插件是 jquery-ui-1.8.16.custom.js。

提前致谢， 西尔维乌

LE：正如你所看到的，我尝试了多种方法来获取所需的 id，但它们都指向顶级 '.cas' li 元素。

LLE：我还必须提到，这些课程不会为元素添加任何样式，它们只是为了作为选择器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:40:23.743

嗯...磨难结束了，亲爱的人们！！！在构建树时，我更改了和HTML 属性的位置`class`，因此它们现在被放置在元素中，而不是其父元素中。`data-id``data-typesuffix``<span class="t-in">``<li>`

在 js 部分，我只需要：

```
accept: '.cas',
drop: function (event, ui) {
                    var changeParentRequest =
                    {
                        ID_CAS: $(ui.draggable).data('id'),
                        IDCASPARENT_CAS: $(this).data('id')
                    };
                    $.postAntiForgery(
                        GetURL('Stock/UpdateCasierParent'),
                        changeParentRequest,
                        loadTreeView
                    );
                } 
```

.csm 和 .material 类也是如此。对我有好处，我说:)

干杯和快乐的编码，ppl。

西尔维乌

# c#-4.0 - 温莎城堡按惯例注册定制生活方式

> ID：14604880
> 
> 赞同：0
> 
> 时间：2013-01-30T13:12:03.587
> 
> 标签：c#-4.0, castle-windsor

使用 Castle Windsor 是否可以使用按惯例注册并设置自定义生活方式，如 [混合生活方式](https://github.com/castleprojectcontrib/Castle.Windsor.Lifestyles)，或者您是否必须注册每个组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T17:21:33.123

对于 Mauricio 的生活方式扩展（您链接的那个），这对我有用：

```
using Castle.MicroKernel.Lifestyle;

/// ...

container.Register(AllTypes.FromThisAssembly()
       .Where(Component.IsInSameNamespaceAs<MyNameSpace.SomeService>())
       .WithService.DefaultInterfaces().LifestyleScoped<HybridPerWebRequestPerThreadScopeAccessor>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:40:35.130

```
container.Register(
   Classes.FromThisAssembly()
      .BasedOn<ISomething>()
      .Configure(c => c.LifestyleCustom<YourLifestyle>())
); 
```

或者如果您使用的是 Windsor 3.1 或从不使用：

```
container.Register(
   Classes.FromThisAssembly()
      .BasedOn<ISomething>()
      .LifestyleCustom<YourLifestyle>()
); 
```

# php - 第二个组合框在第一个变化时加载

> ID：14604881
> 
> 赞同：0
> 
> 时间：2013-01-30T13:12:04.947
> 
> 标签：php, extjs, extjs4

我有三个组合框 Onselect 第一个我希望第二个和第三个组合框加载受尊重的值。这是我的代码片段。

```
{
                           xtype : 'combo',
                           store : 'product.CategoryComboBox',
                           name: 'category',
                           displayField: 'name',
                           valueField: 'idProductCategory',
                           multiSelect : false,
                           fieldLabel: 'Category',
                           allowBlank: false,
                           allowQueryAll : false,
                           forceSelection : true,
                           typeAhead: true,
                           triggerAction: 'all',
                           delimiter : ',',
                           width: 300,
                           mode: 'local',
                           listeners:{select:{fn:function(combo, value) {
                           var attribute = Ext.getCmp('attributes');
                           var feature = Ext.getCmp('features');
                           attribute.setValue('');
                           attribute.store.removeAll();
                           attribute.setDisabled(false);
                           attribute.store.load({
                           params: {id: 5}
                         });
                           feature.setValue('');
                           feature.setDisabled(false);
                           feature.store.removeAll();
                           feature.store.load({
                           params: {id: 5}
                         });
                           //attribute.store.filter('abbr', 1);
                          }}}       
                    } 
```

这里我遇到的问题是我必须先选择第二个和第三个组合框，然后选择第一个组合正确加载数据。如果先选择第一个组合，则第二个和第三个都不会加载选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:31:51.623

使用更改侦听器而不是选择侦听器，我认为您会到达那里。

# tcp - 在 tcp-ack 数据包中添加一个额外的字节

> ID：14604887
> 
> 赞同：0
> 
> 时间：2013-01-30T13:12:25.163
> 
> 标签：tcp

我正在努力提高移动自组织网络上 TCP 协议的性能。
我需要在 TCP-ACK 数据包中添加一个额外的字节。
谁能建议如何做到这一点以及如何让内核使用我重新设计的 TCP 数据包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:14:28.363

我认为这是一个疯狂的想法，因为您必须编写自己的第 4 层堆栈（客户端-服务器端），但您可以使用[Raw Sockets](http://linux.die.net/man/7/raw)来完成。事实上，您将能够伪造封装在`network-layer`( `IP`) 上的自己的数据包，甚至可以在较低级别工作。

# selenium-webdriver - WebDriver mouseOver 无法与硒网格一起正常工作

> ID：14604890
> 
> 赞同：2
> 
> 时间：2013-01-30T13:12:33.420
> 
> 标签：selenium-webdriver, selenium-grid

我的要求是验证 Image Hover 是否正在使用 Webdriver。当我将鼠标悬停在下面的图像上时，该图像标记标题值正在发生变化。

普通的：
`[img title="ASPIRIN" "src="http://img.med.com/pi/LNK01570.jpg" class="preview">`

如果我将鼠标悬停在该图像上：
`[img title="" "src="http://img.med.com/pi/LNK01570.jpg" class="preview">`

所以在这里我试图比较标题值来验证图像悬停。我已经为此编写了代码，当我在不使用 Grid 的情况下执行脚本时它工作正常。但是使用 Grid mouseOver 不能正常工作。图像标记值不会更改。使用网格有什么问题吗？我正在使用 FF17 和 Selenium 2.28.0 和 Selenium 2.25.0。

我的代码：

```
String strVal1 = driver.findElement(By.xpath("//table[@id='ref_priceimgtable']/tbody/tr[12]/td[4]/img")).getAttribute("title");
        System.out.println(strVal1);
        WebElement element = driver.findElement(By.xpath("//table[@id='ref_priceimgtable']/tbody/tr[12]/td[4]/img"));
        Locatable hoverItem = (Locatable) element;
        hoverItem.getLocationOnScreenOnceScrolledIntoView();
        Mouse mouse = ((HasInputDevices) driver).getMouse(); 
        mouse.mouseMove(hoverItem.getCoordinates());
        String strVal2 = driver.findElement(By.xpath("//table[@id='ref_priceimgtable']/tbody/tr[12]/td[4]/img")).getAttribute("title");
        System.out.println(strVal1+"Null Value"); 
```

在上面的代码`strVal1`中`strVal2`应该是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T07:02:53.700

```
 String strVal1 =driver.findElement(By.xpath("//table[@id='ref_priceimgtable']/tbody/tr[12]/td[4]/img")).getAttribute("title"); `System.out.println(strVal1);

WebElement element = driver.findElement(By.xpath("//table[@id='ref_priceimgtable']/tbody/tr[12]/td[4]/img"));

Actions mouseOver = new Actions(driver);

mouseOver .moveToElement(element).build().perform(); 

String strVal2 = driver.findElement(By.xpath("//table[@id='ref_priceimgtable']/tbody/tr[12]/td[4]/img")).getAttribute("title");
        System.out.println(strVal1+"Null Value");` 

您是否尝试过这种鼠标悬停方法？如果你尝试这个方法意味着你有没有调用firefox配置文件的方法“profile.setEnableNativeEvents(true);” ? . 该方法是 firefox 在 selenium 中处理鼠标悬停所必需的。

请尝试一下，我认为这在网格中也可以正常工作。

```

# c# - 在 C# 和 C++ 组合环境中注入异常的最佳努力？

> ID：14604894
> 
> 赞同：1
> 
> 时间：2013-01-30T13:12:43.840
> 
> 标签：c#, c++, visual-studio-2010, exception, nunit

我有一个使用 C# 和 C++ 构建的 CLI 项目。我正在使用 Visual Studio 2010，它具有构建测试 API 的功能。由于我的项目中有 API 旨在独立于平台（任何平台），因此我无法继续使用 Visual Studios 测试 API。我知道 nUnit 是另一种方法，但它会是一种愉快的测试方式。

我想在标志的帮助下找出将错误注入 CLI 的方法，这样我就可以找到 nUnit 无法找到的代码。任何人都有一个简短的想法，这是如何实现的？我还需要设计一个框架来适应未来对代码的任何更改。

提前致谢。

# c++ - 2D游戏开发“神级”

> ID：14604896
> 
> 赞同：1
> 
> 时间：2013-01-30T13:12:46.067
> 
> 标签：c++, 2d-games, god-object

我正在使用 SFML API 在 C++ 中开发 2D 游戏，但我遇到了类设计问题。我认为我违反了 SRP（单一责任原则），因为我有一个名为“游戏”的主类应该处理窗口。它包含一个包含主游戏循环的方法。现在的问题；它包含超过5个类的对象（组合），例如Player、Menu、SplashScreen。您认为创建这样的“上帝”类是一个好主意吗？你知道我可以从中学习的任何开源 C++ 2D 游戏吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:29:24.833

请参阅Gamedev 网站上有关上帝类的[线程（是的，它们是一个坏主意，因为紧密耦合会使代码在面对变化时变得不那么健壮）。](http://www.gamedev.net/topic/562146-c-avoiding-god-class/)

不了解 2D，但有一个带有 id-Software 3D 游戏引擎的完整[GitHub 存储库。](https://github.com/id-Software)除了图形，这应该为您提供一个宝库。另请参阅 Doom[源代码审查](http://fabiensanglard.net/doom3/index.php)，了解有关编写游戏的良好编码风格的想法。

# java - 在 bind() 方法之前运行一些动作

> ID：14604899
> 
> 赞同：0
> 
> 时间：2013-01-30T13:12:50.313
> 
> 标签：java, tapestry

`Tapestry5`我想知道，在某些动作中描述是否有任何方便和适当的方式`AppModule`，应该在方法运行**之前调用？** `bind()`

当然，可以`bind()`在方法块顶部的方法中包含此类操作。但似乎，这一定是其他的可能性。

顺便说一句，`@Startup`这不是合格的方式，因为在我的情况下它使用已经启动的服务，但我需要一些操作才能绑定服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:05:34.640

有时我发现自己在模块类中使用了一个未命名的静态块——主要用于初始化我的 Tapestry 服务所依赖的遗留服务。就像是：

```
public final class MyModule {

    static {
        // early set-up here
    }

    public static void bind(ServiceBinder binder) {
        // binding here
    }
} 
```

这似乎稍微提高了模块代码的可读性，但同时为单元测试设置可能有些困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T18:35:38.357

在 Tawus 的回答之外；不，除了静态代码块（这是标准 Java，与 Tapestry 无关）之外，您无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:54:23.927

如果它是 Tapestry Web 应用程序，您可以扩展[`TapestryFilter`](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/TapestryFilter.html)并在那里进行初始化步骤。查看 TapestryFilter 的源代码以获得灵感。另请参阅[TapestryAppInitializer](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/internal/TapestryAppInitializer.html)

# solr - 如果 deltaImportQuery 未返回行，SOLR 是否会从索引中删除行？

> ID：14604901
> 
> 赞同：1
> 
> 时间：2013-01-30T13:12:51.910
> 
> 标签：solr, lucene

我有一个使用`deltaQuery`/更新的 SOLR 实例`deltaImportQuery`。自上次 SOLR 更新以来，源数据库表中的 SOLR 中有一行已更改。

在下一次更新期间`deltaQuery`返回该行的主键（因为它最近被更改）。`deltaImportQuery`应该为特定的主键选择数据。此查询包含对某些字段的附加过滤器，例如`IsSearchableItem=1`（我不想使某些行可搜索）。

因此，`deltaImportQuery`不返回该行（此特定行`IsSearchable=0`）的任何数据。在这种情况下，该行会从 SOLR 索引中删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:33:23.610

我相信如果 DIH 不生成替换文档（我认为您所说的行），它将不会被删除。相反，您可以查看在 IsSearchableItem 为 1 时检查是否使用 $deleteDocById。检查[维基百科转储示例](https://wiki.apache.org/solr/DataImportHandler#Example%3a_Indexing_wikipedia)中的 $skipDoc 使用情况。

或使用[deletedPkQuery](http://solr.pl/en/2011/01/03/data-import-handler-%E2%80%93-removing-data-from-index/)。

# c# - GitHub API 更新文件

> ID：14604903
> 
> 赞同：3
> 
> 时间：2013-01-30T13:12:52.410
> 
> 标签：c#, github, github-api

我正在尝试通过 GitHub API 更新文件。

我已经完成了所有设置，最后实际文件已更新，这是一件好事。

但是，假设我的仓库中有这两个文件

*   FileToBeUpdated.txt
*   自述文件.md

然后我运行我的程序

**FileToBeUpdated.txt**已按原样更新，但**README.md**已删除。

这是更新文件的 5 个步骤的代码：

```
private static void Main()
{
    string shaForLatestCommit = GetSHAForLatestCommit();

    string shaBaseTree = GetShaBaseTree(shaForLatestCommit);

    string shaNewTree = CreateTree(shaBaseTree);

    string shaNewCommit = CreateCommit(shaForLatestCommit, shaNewTree);

    SetHeadPointer(shaNewCommit);
}

private static void SetHeadPointer(string shaNewCommit)
{
    WebClient webClient = GetMeAFreshWebClient();

    string contents = "{" +
                      "\"sha\":" + "\"" + shaNewCommit + "\", " +
                      // "\"force\":" + "\"true\"" +
                      "}";

    // TODO validate ?
    string downloadString = webClient.UploadString(Constants.Start + Constants.PathToRepo + "refs/heads/master", "PATCH", contents);
}

private static string CreateCommit(string latestCommit, string shaNewTree)
{
    WebClient webClient = GetMeAFreshWebClient();

    string contents = "{" +
                      "\"parents\" :[ \"" + latestCommit + "\" ], " +
                      "\"tree\":" + "\"" + shaNewTree + "\", " +
                      "\"message\":" + "\"test\", " +
                      "\"author\": { \"name\": \""+ Constants.Username +"\", \"email\": \""+ Constants.Email+"\",\"date\": \"" + DateTime.UtcNow.ToString("s", CultureInfo.InvariantCulture) + "\"}" +
                      "}";

    string downloadString = webClient.UploadString(Constants.Start + Constants.PathToRepo + "commits", contents);

    var foo = JsonConvert.DeserializeObject<CommitRootObject>(downloadString);

    return foo.sha;
}

private static string CreateTree(string shaBaseTree)
{
    WebClient webClient = GetMeAFreshWebClient();

    string contents = "{" +
                      "\"tree\" :" +
                      "[ {" +
                      "\"base_tree\": " + "\"" + shaBaseTree + "\"" + "," +
                      "\"path\": " + "\"" + Constants.FileToChange + "\"" + " ," +
                      "\"content\":" + "\"" + DateTime.Now.ToLongTimeString() + "\"" +
                      "} ]" +
                      "}";

    string downloadString = webClient.UploadString(Constants.Start + Constants.PathToRepo + "trees", contents);

    var foo = JsonConvert.DeserializeObject<TreeRootObject>(downloadString);

    return foo.sha;
}

private static string GetShaBaseTree(string latestCommit)
{
    WebClient webClient = GetMeAFreshWebClient();

    string downloadString = webClient.DownloadString(Constants.Start + Constants.PathToRepo + "commits/" + latestCommit);

    var foo = JsonConvert.DeserializeObject<CommitRootObject>(downloadString);

    return foo.tree.sha;
}

private static string GetSHAForLatestCommit()
{
    WebClient webClient = GetMeAFreshWebClient();

    string downloadString = webClient.DownloadString(Constants.Start + Constants.PathToRepo + "refs/heads/master");

    var foo = JsonConvert.DeserializeObject<HeadRootObject>(downloadString);

    return foo.@object.sha;
}

private static WebClient GetMeAFreshWebClient()
{
    var webClient = new WebClient();

    webClient.Headers.Add(string.Format("Authorization: token {0}", Constants.OAuthToken));

    return webClient;
} 
```

我错过了哪一部分？我是否使用了错误的树开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:03:35.373

似乎在函数 CreateTree 中我应该将 base_tree 设置在根级别，而不是在我创建的每棵树的级别。

所以在函数 CreateTree 中的内容变成了这样：

```
string contents = "{" +
                      "\"base_tree\": " + "\"" + shaBaseTree + "\"" + "," + // IT'S THIS LINE!
                      "\"tree\" :" +
                          "[ {" +
                              "\"path\": " + "\"" + Constants.FileToChange + "\"" + " ," +
                              "\"content\":" + "\"" + DateTime.Now.ToLongTimeString() + "\"" +
                      "} ]" +
                  "}"; 
```

更新的 GitHub 文档：[https ://github.com/Snakiej/developer.github.com/commit/2c4f93003703f68c4c8a436df8cf18e615e293c7](https://github.com/Snakiej/developer.github.com/commit/2c4f93003703f68c4c8a436df8cf18e615e293c7)

# java - Liferay 嵌套 portlet

> ID：14604909
> 
> 赞同：0
> 
> 时间：2013-01-30T13:13:11.380
> 
> 标签：java, liferay, portlet

我可以创建自己的嵌套 portlet 吗？我需要有一个嵌套的 portlet，在其中添加三个自定义 portlet。应该从代码中添加这三个 portlet。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T17:53:12.540

你能做到吗？是的。你应该这样做吗？出色地...

考虑使用标准布局模板——这些模板创建起来非常快。

为了用内容/portlet 填充页面，我通常指向sevencogs-hook 的源代码（它在Liferay 6.1.0 CE 之前交付，但仍然是在页面上放置portlet 的有价值的文档——除此之外）。其他人可能会指出您将 portlet 动态添加到页面。

如果您想要添加到页面/嵌套 portlet 的 portlet 变体数量有限，请考虑添加所有这些变体，但有选择地不显示任何内容（例如，使用 portlet 间通信） - 这会使其更加明显随机页面管理员（可能是您以外的其他人）哪些内容将显示在哪里。此外，如果您想重新排列输出，它还为您提供了灵活性。

拿起我的第一段 - 如果您想不出我建议的任何替代方法来解决问题，只需查看核心嵌套 portlet 的源代码，找出动态分派到嵌入式 portlet 的机制. 如果您无法弄清楚（或者“如何”是您的原始问题），请编辑您的问题并澄清实际问题是什么 - 我觉得您对是/否的答案不感兴趣。

# c++ - 是否可以在运行时从命令行调用方法或传递参数？

> ID：14604910
> 
> 赞同：0
> 
> 时间：2013-01-30T13:13:14.323
> 
> 标签：c++, command-line, command-line-arguments

我正在使用 Mac。我有一个 c++ 应用程序，例如名为 myapp。通常我可以通过 ./myapp 调用应用程序。

myapp 应用程序能够处理图像并返回一些文本结果。实际上 myapp 应用程序一开始总是要分配大量内存，所以如果我必须多次运行它会有点慢。

现在我想这样做

1.  myapp 将作为始终运行的服务运行。我将在一开始就通过 ./myapp 启动 myapp。

2.  当我有要处理的图像时，我只想输入类似 ./myapp arg1 arg2 的内容，在这里我不想启动一个新进程，我想将新参数传递给已经运行的应用程序并返回结果。

为了实现它，我该怎么做？我知道 myapp 必须包含一个等待请求的 while 循环。但是如何在运行时多次传递参数？

/* 它类似于 ngix 服务器。一开始你输入 ngix 启动服务，在它运行的时候，你仍然可以通过“ngix 参数”传递参数，这个命令不会创建一个新进程。*/

/* **实际上我有一个 C++ 图像处理应用程序和一个 python http 服务器。现在我要做的是，当 python 服务器从客户端接收到图像时，我通过 ./myapp imagelocation 启动一个新进程。myapp 将处理结果返回到命令行，python 通过 "os.popen("./myapp imagelocation,"r").read().strip()" 捕获它。但正如我所说，C++ 应用程序需要太多时间初始化，所以我只想初始化一次，一旦我有图像，我只需将图像传递给 c++ 应用程序。当然我知道我可以让 C++ 应用程序检查是否保存了新图像，并调用方法。但是这样，我不能告诉python应用程序结果***/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:17:12.093

是的，你可以做你想做的事，但你不能使用命令行参数。当程序启动时，它们只传递给您的程序一次。要等待请求，您可以定期检查一些其他流，例如文件或管道以获取新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:18:42.530

看起来你可以使用粘贴板 [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SysServices/Articles/using.html#//apple_ref/doc/uid/20000854-97617](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SysServices/Articles/using.html#//apple_ref/doc/uid/20000854-97617)

您需要创建像 ./myappcommandsender 这样的新程序，或者只需在服务启动例程中添加“if statement@”。

# java - OS X 上的 Eclipse - 对话框中没有热键？

> ID：14604917
> 
> 赞同：2
> 
> 时间：2013-01-30T13:13:29.190
> 
> 标签：java, eclipse, macos

在 OS X 中运行的 Eclipse 中似乎没有 Windows 用户习惯的小下划线字母对话框热键。有没有办法启用它们？

例子：

Windows：要打开“浏览”对话框以选择包，请点击`ALT`+ `W`。

![在此处输入图像描述](../Images/e2431be64487c4596c6580e3eeb4f529.png)

OS X：要打开“浏览”对话框，首先检查您所在的位置，点击`TAB`...等待...重复点击`SHIFT`+ `TAB`，直到突出显示正确的“浏览”按钮。

![在此处输入图像描述](../Images/8724bf8af98f467ba6091530efdf9bd7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:30:21.850

不幸的是 OS X 没有这种热键。有关在对话框中更快导航的一些可能性，请参阅[https://superuser.com/questions/24159/osx-keyboard-shortcuts-in-dialogs 。](https://superuser.com/questions/24159/osx-keyboard-shortcuts-in-dialogs)

# php - 在 php 中使用 ajax 在文本框中输入某些字符时更改下拉列表中的值

> ID：14604918
> 
> 赞同：0
> 
> 时间：2013-01-30T13:13:30.713
> 
> 标签：php, ajax, jquery

我正在阅读 php 中的 csv 文件，其中包含 2 列。我想要的是当我在文本框中输入来自 csv 第一列的任何字符时，我希望来自同一个 csv 文件的第二列的相关值出现在下拉列表中。我对使用 ajax 很陌生，没有得到任何此类示例。

有谁能够帮我？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:21:39.550

这是您要查找的示例：[http ://www.99points.info/2010/12/n-level-dynamic-loading-of-dropdowns-using-ajax-and-php/](http://www.99points.info/2010/12/n-level-dynamic-loading-of-dropdowns-using-ajax-and-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:23:18.403

不太确定你想做什么，但如果你使用的是 jquery，那么 ajax 非常简单。您可以使用：

```
var sChar = 'c';
$.get('yourPhpFile.php', { sCharacter:sChar }, function(sData){
   alert(sData);
}); 
```

通过这种方式调用 yourPhpFile.php，sCharacter 在 yourPhpFile.php 中作为 $_GET 参数可用，并且 sData 保存输出。

见[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# extjs4 - 单击事件未从 ExtJS 4 MVC 中的控制器内注册

> ID：14604919
> 
> 赞同：1
> 
> 时间：2013-01-30T13:13:38.647
> 
> 标签：extjs4, extjs4.1, extjs-mvc

我在控制器中订阅的按钮单击事件被触发。这是代码。

**WebAppMasterController.js**

```
Ext.define('P.e.w.controller.WebAppMasterController', {
extend: 'P.e.w.controller.IController',
views: [
    'WebAppMasterView'
],
refs: [
    {
        ref: 'webAppView',
        selector: 'WebAppMasterView'
    }
],
init: function () {
     this.control({
        'WebAppMasterView': {
            afterrender: this.viewafterrender
        }
    }, {
        'button[action=save]': {
            click: function () {
                alert('dslksd');
            }
        }
    }
},
viewafterrender: function (panel) {
    alert();
}
}); 
```

`IController extends "Ext.app.Controller".`

在上面的代码中，`"afterrender"`事件被触发了，但是按钮点击事件没有被触发。

视图：**WebAppMasterView.js**

```
Ext.define('P.e.w.view.WebAppMasterView', {
extend: 'P.w.l.Header',
alias: 'widget.WebAppMasterView',
constructor: function (config) {
    var me = this;
    me.centerregion = me.createCenterRegion(config);
    Ext.applyIf(config, {
        favoriteBar: true,
        items: [me.centerregion],
        menuWidth: 0
    });
    this.callParent([config]);
},
 createBody: function () {
    var me = this;
    if (!me.controlPanel) {
        me.controlPanel = Ext.create('Ext.Panel', {
            layout: 'fit'
        });
    }
    return me.controlPanel;
},
 createCenterRegion: function (config) {
    var me = this,
        centerPanel = Ext.create('Ext.Panel', {
            region: 'center',
            layout: 'fit',
            tbar: {
                xtype: 'WorkRequestMenuBar',
                id: 'workrequestmenubar' 
            },
            defaults: {
                border: false
            },
            items: [me.createBody()]
        });
return centerPanel;
}
}); 
```

**WorkRequestMenuBar.js**

```
Ext.define('P.e.w.view.WorkRequestMenuBar', {
extend: 'Ext.Toolbar', alias: 'widget.WorkRequestMenuBar',
constructor: function (config) {
    config = config || {};
    Ext.apply(config, {
        defaults: {
            scale: 'large',
            cls: 'x-btn-text-icon',
            iconAlign: 'top'
        },
        items: [
                {
                    text: 'NEW_WORK_REQUEST',                        
                    iconCls: 'menubar-createWorkRequest',
                    action: 'save'
                },
                {
                    text: 'OVERVIEW',
                    iconCls: 'menubar-overview'

                }, '->', {
                    iconCls: 'icon-biggerHelp',
                    width: 80,
                    text: 'HELP'
                }
            ]
    });
    this.callParent([config]);
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:02:22.637

你有几个问题。

第一个。您的控制器中存在语法错误

```
 this.control({
               'WebAppMasterView': {
                  afterrender: this.viewafterrender
                }
            }, 
            {
               'button[action=save]': {
                    click: function () {
                        alert('dslksd');
                    }
                }
            }
     //missing --> ); 
}, 
```

第二。工具栏配置方法应该是 initComponent 方法。

# asp.net-mvc - 如何在 mvc 的 apicontroller 中获取部分视图字符串

> ID：14604927
> 
> 赞同：3
> 
> 时间：2013-01-30T13:14:01.117
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我有一个这样的 apicontroller：

```
public class MenuController : ApiController
{
    [HttpGet]
    public string GetMenu([FromUri]string page, [FromUri]string menu)
    {
    }

} 
```

我有一个部分视图说“menu.cshtml”我想使用那个部分视图并在字符串中给出菜单。我尝试了各种功能，说renderpartialviewtostring，但他们在其中使用控制器，但我使用的是ApiController

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T07:59:24.800

您可以从 IHttpActionResult 派生自己的类型并执行此操作。

这篇文章谈到了它 - [http://www.strathweb.com/2013/06/ihttpactionresult-new-way-of-creating-responses-in-asp-net-web-api-2/](http://www.strathweb.com/2013/06/ihttpactionresult-new-way-of-creating-responses-in-asp-net-web-api-2/)

您需要参考 RazorEngine - [http://www.nuget.org/packages/RazorEngine/](http://www.nuget.org/packages/RazorEngine/)

在您的情况下，您可以创建一个从 IHttpActionResult 派生的 StringActionResult ，它执行类似于下面的操作。

```
public class StringActionResult : IHttpActionResult
{
    private const string ViewDirectory = @"c:\path-to-views";
    private readonly string _view;
    private readonly dynamic _model;

    public StringActionResult(string viewName, dynamic model)
    {
        _view = LoadView(viewName);
        _model = model;
    }

    public Task<HttpResponseMessage> ExecuteAsync(CancellationToken cancellationToken)
    {
        var response = new HttpResponseMessage(HttpStatusCode.OK);
        var parsedView = RazorEngine.Razor.Parse(_view, _model);
        response.Content = new StringContent(parsedView);
        response.Content.Headers.ContentType = new MediaTypeHeaderValue("text/plain");
        return Task.FromResult(response);
    }

    private static string LoadView(string name)
    {
        var view = File.ReadAllText(Path.Combine(ViewDirectory, name + ".cshtml"));
        return view;
    }
} 
```

然后在你的控制器中，做这样的事情。

```
 public class MenuController : ApiController
    {
        [HttpGet]
        public StringActionResult GetMenu([FromUri]string page, [FromUri]string menu)
        {
             return new StringActionResult("menu", new {Page: page, Menu: menu});

        }

    } 
```

# javascript - 地理位置无法通过网络框架工作

> ID：14604928
> 
> 赞同：1
> 
> 时间：2013-01-30T13:14:04.613
> 
> 标签：javascript, android, mobile, geolocation

我创建了一个移动网站，我的位置功能在所有浏览器上都可以正常工作，包括 iOS 上的 Safari 和 Android 原生浏览器：

```
function getLocation()
  {
    navigator.geolocation.getCurrentPosition(showPosition);
  }

function showPosition(position)
  {
position.coords.longitude;
  var ox = position.coords.latitude;
  var oy = position.coords.longitude;
  alert(ox); 
```

我在 Safari 和 Android 本机浏览器上收到警报（牛）。之后我的任务是通过 web 框架在应用程序中显示此页面，并获得相同的结果。

在 iOS 应用程序中，它运行良好——我正在调用该函数并获得高度、经度和移动网站上的所有内容的警报。

但是在 Android 应用程序中，当我单击调用该函数的按钮时，什么也没有发生。

有人可以告诉我为什么这不起作用吗？我应该不仅使用 Javascript，还应该使用一些 Android 代码吗？

# android - Webservice url 图像存储到 android Gallery

> ID：14604930
> 
> 赞同：0
> 
> 时间：2013-01-30T13:14:16.360
> 
> 标签：android

我在我的 android 应用程序中使用 ImageView 在这里我显示来自 web 服务的图像，所以我使用 UrlImageViewHelper。我想将此图像存储到 android Gallery 文件中。

我的图像像：

```
 String Images = dataExtra.get("images").toString();
    System.out.println("image URL"+Images);     
    Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
    File f = new File(Images);
    Uri contentUri = Uri.fromFile(f);
    mediaScanIntent.setData(contentUri);
    this.sendBroadcast(mediaScanIntent); 
```

我试过这样..但它不工作。任何人都可以帮助我如何将这些图像存储到 Android Gallery 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:57:45.553

我得到了这个问题的解决方案，这是我的答案

```
private void saveImagesIntoGallery(){
        BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();
        Bitmap bitmap = drawable.getBitmap();
       // File sdCardDirectory = Environment.getExternalStorageDirectory();// its stores under sdcard not in a specific path
        String sdCardDirectory = Environment.getExternalStorageDirectory().toString()+"/Pictures/";
        String url = arrayForImages[i].toString();
        String file = url.substring(url.lastIndexOf('/')+1);
        System.out.println("PATH NAME"+sdCardDirectory);
        File image = new File(sdCardDirectory, file);
        boolean success = false;

        // Encode the file as a PNG image.
        FileOutputStream outStream;
        try {

            outStream = new FileOutputStream(image);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream); 
            /* 100 to keep full quality of the image */
            outStream.flush();
            outStream.close();
            success = true;
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        if (success) {
            Toast.makeText(getApplicationContext(), "Image saved with success",
                    Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(getApplicationContext(),
                    "Error during image saving", Toast.LENGTH_LONG).show();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:54:55.190

您确定画廊是存储网络服务图像的最佳场所吗？

如果您想保存到内部存储：

```
public void saveBitmap(String name, Bitmap bitmap){

        if(bitmap!=null && name!=null){
            FileOutputStream fos;

            if(bitmap!=null){
                try {
                    fos = openFileOutput(name, Context.MODE_PRIVATE);
                    bitmap.compress(CompressFormat.JPEG, 90, fos);
                } catch (FileNotFoundException e) {}
            }
        }
    } 
```

到画廊，我这里没有例子。但是搜索一下；）

# django - 用于在模型管理员中管理类别字段的现有包？

> ID：14604931
> 
> 赞同：1
> 
> 时间：2013-01-30T13:14:21.903
> 
> 标签：django, foreign-keys, admin

我有一个`MyModel`带有`category`字段的模型。该`Category`模型本身有一个 ForeignKey。

在 MyModel 的管理员中，我想要以下内容：

1- 一个选择框，其中类别实例没有父项，可以添加一个（ForeignKey 的常用“+”按钮）

2-如果所选类别有孩子，则显示另一个带有孩子的选择框，以及“+”按钮

3->2

注意：子类别的数量不固定。

有没有可以做到这一点的包？我可以自己用一些 ajax 来完成，但这似乎是一项常见的任务，我想确保没有包可以轻松管理它。

谢谢

```
class Category(models.Model):

    parent = models.ForeignKey('self', related_name="children")
    name = models.CharField(max_length=100)

class MyModel(models.Model):

    name = models.CharField(max_length=100)
    category = models.ForeignKey(Category) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:24:43.873

有 django-categories 包，它添加了一个包含所有类别的选择框，例如：

![在此处输入图像描述](../Images/ee9b12cc1ed451ba7fda7287e9ee5182.png)

[https://github.com/callowayproject/django-categories](https://github.com/callowayproject/django-categories)

# javascript - Javascript代码未按预期工作

> ID：14604936
> 
> 赞同：1
> 
> 时间：2013-01-30T13:14:32.403
> 
> 标签：javascript, firebug

我正在运行此代码并检查 firebug 中的日志：

```
 var a = new Array();
var b = new Array();
for (i=0; i<2 ; i++){
    a.push(1);
    b.push(a);
    console.log("a", a);
    console.log("b", b);
}; 
```

日志显示这些值：

```
a [1]
b [[1]]
a [1,1]
b [[1,1],[1,1]] 
```

根据我的价值观应该是：

```
a [1]
b [[1]]
a [1,1]
b [[1],[1,1]] 
```

我做错了什么，我怎么能得到我想要的值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T13:19:00.810

当您使用`.push`追加`a`到末尾时`b`，您传递的是引用而不是*ByVal*，因为*Array*是*Object*。这意味着未来的更改`a`会反映在`a`s 中`b`。您需要的是 to when ing to 。[`.slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice) `a``.push``b`

```
var a = new Array(), b = new Array();
for (i=0; i<2 ; i++) {
    a.push(1);
    b.push(a.slice());
    console.log("a", a);
    console.log("b", b);
};
/*
a [1]
b [[1]]
a [1, 1]
b [[1], [1, 1]]
*/ 
```

# user-controls - 用户控件和父页面的页面加载

> ID：14604937
> 
> 赞同：0
> 
> 时间：2013-01-30T13:14:37.093
> 
> 标签：user-controls, pageload

我有一个用于显示操作消息的用户控件。它在用户控件的页面加载时隐藏，因此一旦出现警告，它就会消失。但在某些情况下，当页面加载时，我希望用户控件可见，但不是因为隐藏在用户控件的页面加载中。我该如何管理？

用户控制

```
protected void Page_Load(object sender, EventArgs e)
{
    this.Visible = false;
}
public void SetMessage(string title, string desc)
{
    this.Visible = true;
    Title = title;
    Description = desc;
} 
```

父页面

```
protected void Page_Load(object sender, System.EventArgs e)
{ 
    msgDialogue.SetMessage(a);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T21:11:42.417

据我了解，您需要根据页面（或会话变量）中的属性值显示或隐藏用户控件。如果是这种情况，您最好在页面中添加一个占位符，然后根据您的条件加载控件（或不加载它）。

```
if(condition)
{    
_usercontrol ctrl = LoadControl("~/usercontrols/_usercontrol.ascx") as _usercontrol;
Placeholder1.Controls.Add(ctrl);
}
//otherwise, do not load the control 
```

希望能帮助到你。

# c# - C#.Net 设置项目全球化问题

> ID：14604941
> 
> 赞同：3
> 
> 时间：2013-01-30T13:14:41.397
> 
> 标签：c#

我有一个 ac#.net 项目，我在其中实施了阿拉伯语、英语和法语的全球化。只要我运行它的 exe 或通过 VS 2010 运行它，它就可以正常工作。但是当我将相同的项目输出添加到 .Net (VS 2010) 安装项目并安装它时，全球化根本不起作用。我在调试和发布模式下都试过了。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:27:18.327

您是否包括“本地化资源”？

您可以在设置项目 -> 添加 -> 项目输出 -> 本地化资源中找到它

# php - 使用 PHP 进行多个 MySQL 连接的推荐做法

> ID：14604942
> 
> 赞同：1
> 
> 时间：2013-01-30T13:14:42.063
> 
> 标签：php, mysql

我目前正在使用 SoapClient 通过 PHP 脚本访问 SOAP Web 服务。我的脚本调用多个下标（大约每秒 30 个），每个下标都发送一个请求，然后将响应推送到 MySQL 数据库。我的流程试图模拟“异步”请求/响应机制。

在我的下标中，我连接到 mysql 并在连接完成后关闭连接。我每秒运行大约 30 个下标。我遇到了一个问题，我正在最大化我的 MySQL 连接。

我不想增加最大连接数，因为我觉得这是不好的做法。有没有更好的方法来解决这个问题？我在想我可以以某种方式在下标和脚本之间共享一个 mysql 连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:22:49.357

如果所有下标在一个线程中按顺序运行，那么您可以连接到 MySQL 一次并将此连接传递给所有下标。

如果下标是并行运行的，那么这取决于你的 MySQL 库是否是线程安全的。如果是，那么您可以将一个连接传递给所有这些。但如果没有，您别无选择，只能每个脚本一个连接。此信息应在其文档中提及。

如果您只需要并行运行一些脚本并且有些可以等待一段时间，那么您可以准备几个连接池（10 个左右）并一次只运行 10 个脚本。当一个脚本结束时，您将启动下一个并重用旧连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:04:59.487

您可以尝试连接池。我不确定这在 php 中是否可行，以及是否已经有可用的框架。

如果它不可用，您可以使用包含连接列表的 Singleton 类。如果该类空闲 N 秒，则让该类关闭连接。这意味着您的 30 个下标可以重用其他脚本未使用的连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:13:49.957

你试过mysqli_pconnect吗？你如何产生你的子进程？不能在主进程中打开数据库连接，传给子进程吗？您正在做什么的任何代码示例？

# java - 使用 Spring WebFlow Flow 处理全局异常

> ID：14604944
> 
> 赞同：0
> 
> 时间：2013-01-30T13:14:48.100
> 
> 标签：java, spring, spring-mvc, spring-webflow

使用 Spring WebFlow Flow 处理全局异常。

我在一个 Spring webflow 项目中工作，我想知道是否有人知道如何在流中添加某种类型的全局异常处理，所以如果我的任何 java 调用抛出一个示例，它将捕获并引入相同的错误系统整个系统？

我的旧流程解决了一个问题：

```
<var name="member" class="xxxx" />
<decision-state id="checkIsInPending">
   <if test="flowControllerActions.isInPending(member)" then="endStateMemberPending" else="name" />
</decision-state> 
```

一旦我将全局添加到其中，我就开始出现错误。

```
<var name="member" class="xxxxx" />

    <global-transitions>
        <transition on-exception="java.lang.Exception"
                    to="SystemException" />
    </global-transitions>

    <decision-state id="checkIsInPending">
        <if test="flowControllerActions.isInPending(member)" then="endStateMemberPending" else="name" />
    </decision-state> 
```

这是我的错误：

```
org.xml.sax.SAXParseException; lineNumber: 29; columnNumber: 40; cvc-complex-type.2.4.a: Invalid content was found starting with element 'decision-state'. One of '{"http://www.springframework.org/schema/webflow":on-end, "http://www.springframework.org/schema/webflow":output, "http://www.springframework.org/schema/webflow":exception-handler, "http://www.springframework.org/schema/webflow":bean-import}' is expected. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:30:33.180

您可以使用全局转换来捕获异常：

```
<global-transitions>
    <transition on-exception="example.MyBusinessException" to="state3"/>
</global-transitions> 
```

有关更多详细信息，请参阅：[文档](http://static.springsource.org/spring-webflow/docs/1.0.x/reference/flow-definition.html#transition-global)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:49:07.403

尝试重新排列 XML 标记。您收到此异常是因为您的流 XML 不符合 XSD。Myabe 只是把 global-transition 放在最后

# jenkins - 在 Hudson/Jenkins 中将生成的文件夹从一个工作复制到另一个工作

> ID：14604948
> 
> 赞同：6
> 
> 时间：2013-01-30T13:15:08.340
> 
> 标签：jenkins, hudson

我的 Hudson 配置中有两个工作。我们称它们为 A 和 B。

作业 A 是专门为生成文件夹**application_home**而创建的。此文件夹是一个随时可用的安装应用程序主文件夹。

作业 B 是“打包所有安装作业”。它需要复制作业A生成的**application_home**来生成安装程序。我的问题是，经过一番调查，我无法以简单的方式做到这一点。

我可以使用 shell 脚本，但是我需要知道作业 A 路径以及它的工作区在哪里获取*应用程序*_*主*文件夹。

有没有更简单的方法来做到这一点？

**编辑**

我知道[Copy Artifact Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)。问题是它只复制工件。我需要按原样复制文件夹application_home *，*因为它已经在安装程序中使用的结构中*。*如果有办法使用这个插件只复制文件夹，我还没有找到。

**编辑 2\. 答案：**

好的，您可以使用[Copy Artifact Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)来完成。你需要

*   将其配置设置为*“从最新完成的构建的 WORKSPACE 复制”*。
*   将*Artifacts 设置为复制*选项文件夹，如下所示：target/application_home/**
*   将*目标目录*设置为您想要的位置，例如：installation_bundle_folder/application_home。

它完成了:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:23:05.563

你可以试试[Copy Artifact Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+Artifact+Plugin)。

然后，您可以向“pack-all-together-for-installation-job”添加一个构建步骤，该步骤将复制`application_home`到打包目录中。可以选择仅包含 Project A 的最新稳定版本。

* * *

另一种选择是为成功的*项目 A*构建一个构建后步骤，该步骤将脚本复制`application_home`到*项目 B*将使用它的位置。您可以使用`WORKSPACE`环境变量来获取绝对位置。（有关环境变量的列表，请参见[此处](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project)）。

# scala - 在 Scala 中使用默认值更新可变映射

> ID：14604952
> 
> 赞同：5
> 
> 时间：2013-01-30T13:15:19.197
> 
> 标签：scala, map

考虑以下代码，该代码计算列表中每个字符串的频率并将结果存储在可变映射中。这很好用，但我不明白 += 方法是在哪里定义的？！这是一些奇怪的隐式转换还是什么？我在某处看到了这段代码，但它没有包含对 += 的解释。

```
val list = List("a", "b", "a")
val counts = new scala.collection.mutable.HashMap[String, Int]().withDefaultValue(0)
list.foreach(counts(_) += 1)
counts
//> res7: scala.collection.mutable.Map[String,Int] = Map(a -> 2, b -> 1) 
```

map 的 apply 返回一个 Int，但 Int 没有 +=，并且此方法使用新值更新 map，因此看起来 apply 返回一个具有 += 方法的可变整数......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T13:30:27.997

这不是隐式转换 - 它是脱糖。写作：

```
x += 1 
```

脱糖：

```
x = x + 1 
```

如果该类上`x`没有`+=`定义方法。

以同样的方式：

```
counts("a") += 1 
```

脱糖：

```
counts("a") = counts("a") + 1 
```

因为`counts("a")`是`Int`, 并且`Int`没有`+=`定义方法。

另一方面，写作：

```
x(expression1) = expression2 
```

对 Scala中的方法的调用取消糖`update`：

```
x.update(expression1, expression2) 
```

每个可变对象都[定义](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.Map)`Map`了一个`update`方法——它允许在映射中设置键。

所以整个表达式被取消为：

```
list.foreach(x => counts.update(x, counts(x) + 1)) 
```

这不要与Scala 中的 s方法`+=`混淆。如果该键已经存在，该方法会更新映射中的条目，或者添加一个新的键值对。它返回引用，即相同的映射，因此您可以链接调用。请参阅[ScalaDoc](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.Map)或[源代码](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/collection/mutable/MapLike.scala#L89)。`+=``mutable.Map``this``+=`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T13:36:52.950

对于那些你想知道代码的一部分中发生了什么编译器魔法的时刻，`scalac -print`你最好的朋友是（见[这个问题](https://stackoverflow.com/questions/3784926/how-can-i-see-in-what-java-scala-code-does-scala-compiler-rewrites-original-s)）。

如果您执行`scalac -print C.scala`C.scala 所在的位置

```
package test

class C {
    def myMethod() {
        val counts = new scala.collection.mutable.HashMap[String, Int]().withDefaultValue(0)
        counts("a") += 1
    }
} 
```

你得到

```
package test {
  class C extends Object {
    def myMethod(): Unit = {
      val counts: collection.mutable.Map = new collection.mutable.HashMap().withDefaultValue(scala.Int.box(0));
      counts.update("a", scala.Int.box(scala.Int.unbox(counts.apply("a")).+(1)))
    };
    def <init>(): test.C = {
      C.super.<init>();
      ()
    }
  } 
```

这对我来说也很惊讶，但显然 scalac 会转变

```
map(key) =<op> rhs 
```

至

```
map.update(key, map.apply(key) <op> rhs) 
```

# postgresql - PostgreSQL：是否存在强大的第三方日期数学函数来增强内置日期运算符？

> ID：14604953
> 
> 赞同：1
> 
> 时间：2013-01-30T13:15:19.250
> 
> 标签：postgresql, package, date-math

我正在将一些 T-SQL 存储过程移植到 PL/pgSql，并且对 PostgreSQL 来说非常陌生，不知道 pg 社区中可能提供哪些有用的实用程序功能。是否有一套“几乎每个人都在使用”的强大的日期数学函数？如果那里已经有一个很棒的包，我不想快速拼凑一些日期数学函数。

如果您正在键入查询并且碰巧知道间隔，那么带有“自然语言”字符串字面量参数的 PostgreSQL 日期数学运算符是用户友好的：

```
 select now() - interval '1 day' 
```

但如果间隔`1`是涉及嵌套 date-math 函数调用的计算结果，那么这些字符串文字实际上根本不是非常用户友好，使用 date_add 函数会更容易：

```
 select dateadd(d, {calculation that returns the interval}, now() ) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:29:51.817

您正在谈论的“自然语言”字符串是区间文字。间隔也可以通过使用日期算术获得。

当然 dateadd 可以很简单地在 Postgresql 中模拟如下：

select d + ({计算返回间隔}::text || 'day')::interval

根据需要替换“月”或“小时”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:37:36.050

*让我给你举个例子。我想从任意日期减去自 1970 年 1 月 1 日以来经过的月数，然后将该月数添加到 1970 年 1 月 1 日，以返回任意日期所在月份的第一天*

```
select (date_trunc('month', '2013-01-30'::date))::date 
```

*或者在这个月的第一天加上一个月得到下个月的第一天，然后减去一天得到这个月的最后一天*

```
select date_trunc('month', '2013-01-30'::date + 1 * interval '1 month')::date - 1 
```

请注意，在上面的示例中，您可以通过将 乘以`interval '1 month'`整数来添加任意数量的月份。您可以在任何时间间隔内执行此操作，而无需操作字符串`'1 month'`。因此，要添加或减去任何间隔，您只需：

```
select current_date + 5 * interval '1 month' 
```

不需要凌乱的字符串操作。您也可以乘以分数：

```
select current_timestamp + 3.5 * interval '1 minute' 
```

要为`date`类型添加或减去天数，请使用整数：

```
select current_date + 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T13:18:05.263

在 PostgreSQL 中，您只需在日期时间值中添加和减去间隔值：

```
'2001-06-27 14:43:21'::TIMESTAMP - '00:10:00'::INTERVAL = '2001-06-27 14:33:21'::TIMESTAMP
'2001-06-27 14:43:21'::TIMESTAMP- '2001-06-27 14:33:21'::TIMESTAMP = '00:10:00'::INTERVAL 
```

有关更多信息，请参阅PostgreSQL 在线文档中的[“函数和运算符”](http://www.postgresql.org/docs/9.2/static/functions-datetime.html)。

要计算日期月份的第一天：`date_trunc('month', date)`

下个月的第一天：`date_trunc('month', date) + '1 month'::INTERVAL`

在该日期的月份的第一天加上三个月：`date_trunc('month', date) + 3*('1 month'::INTERVAL)`

间隔是一种数据类型，而不是字符串，您可以使用它的值进行计算。

# php - Codeigniter 从数据库加载两个不同的数据数组，第二个依赖于第一个并加载到视图中

> ID：14604954
> 
> 赞同：0
> 
> 时间：2013-01-30T13:15:22.770
> 
> 标签：php, codeigniter

这是我的代码：

我的模型：**My_model**

```
function load_modules(){

$modules = $this->db->query('SELECT name FROM module');
$result = $modules->result_array();

return $result;

}

function load_lesson($modname){

$lessons = $this->db->query(
'SELECT lesson.name 
FROM lesson 
INNER JOIN module 
ON module.id = lesson.moduleid and module.name = $modname'
); 

$result = $lessons->result_array();

return $result;

} 
```

我的控制器：**My_controller**

```
$this->load->model('My_model');
$arraydata['values'] = $this->My_model->load_modules(); 
```

在我看来：

```
foreach($values as $modulename){

load_lesson($modulename); // This is the method from my model which
// I want to be access in my controller in a way that will work like this.

} 
```

我想要发生的是能够获得每个模块的所有课程。但我想不出在控制器中做到这一点的方法。希望你能帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:26:00.790

不要试图从视图中调用模型的方法。在控制器中尝试这样的事情......

```
$this->load->model('My_model');
$arraydata['values'] = $this->My_model->load_modules();
foreach($arraydata['values'] as $key=>$value){
  $arraydata['values'][$key]['lessons']=$this->My_model->load_lesson($value);
} 
```

# javascript - 当图形变大时，d3js Dendrogram隐藏根节点

> ID：14604960
> 
> 赞同：0
> 
> 时间：2013-01-30T13:15:44.307
> 
> 标签：javascript, graph, svg, d3.js, visualization

这是我的代码：我希望在一页中为许多电子邮件线程的每个主题提供多个树状图：

```
var w = 1350, h;
var margin = {top: 20, right: 120, bottom: 20, left: 120}
var tree = d3.layout.tree();
//.size([h, w - 160]);

var diagonal = d3.svg.diagonal().projection(function(d) {
    return [d.y, d.x];
});

//  .attr("width", w + 200)
//  .attr("height", h + 160)
//.append("svg:g")
//  .attr("transform", "translate(40, 0)");

d3.json("flare2.json", function(error, json) {
    for (var tree_key in json.children) {

        build_tree(json.children[tree_key])
    }

});

function build_tree(tree_obj) {
    var vis = d3.select("#chart").append("svg:svg")
    h = 20
    h = h + (tree_obj.count * 15)
    tree.size([h, w]);

    vis.attr("width", w +1000)
        .attr("height", h)
    var nodes = tree.nodes(tree_obj);

    var link = vis.selectAll("path.link").data(tree.links(nodes)).enter().append("svg:path").attr("class", "link").attr("d", diagonal);
    // .attr("d", diagonal);

    var node = vis.selectAll("g.node").data(nodes).enter().append("svg:g").attr("class", "node").attr("transform", function(d) {
        return "translate(" + d.y + "," + d.x + ")";
    })

    node.append("svg:circle").attr("r", 4.5);

    node.append("svg:text").attr("dx", function(d) {
        return d.children ? -8 : 8;
    }).attr("dy", 3).attr("text-anchor", function(d) {
        return d.children ? "end" : "start";
    }).text(function(d) {
        return d.name;
    });
} 
```

结果是：

![部分隐藏的根主题](../Images/3feb17a9c22a60d7f58590c14e42bec0.png)

我不知道如何让它们出现，我尝试翻译但它不起作用。

这是 svg 节点的结果：

```
<svg width="2350" height="170"><path class="link" d="M0,85C225,85 225,17 450,17"></path><path class="link" d="M0,85C225,85 225,85 450,85"></path><path class="link" d="M0,85C225,85 225,153 450,153"></path><path class="link" d="M450,17C675,17 675,17 900,17"></path><path class="link" d="M900,17C1125,17 1125,17 1350,17"></path><path class="link" d="M450,85C675,85 675,85 900,85"></path><path class="link" d="M900,85C1125,85 1125,85 1350,85"></path><path class="link" d="M450,153C675,153 675,153 900,153"></path><path class="link" d="M900,153C1125,153 1125,153 1350,153"></path><g class="node" transform="translate(0,85)"><circle r="4.5"></circle><text dx="-8" dy="3" text-anchor="end">Re: Amusing atheists and anarchists</text></g><g class="node" transform="translate(450,17)"><circle r="4.5"></circle><text dx="-8" dy="3" text-anchor="end">Re: Amusing atheists and anarchists</text></g><g class="node" transform="translate(900,17)"><circle r="4.5"></circle><text dx="-8" dy="3" text-anchor="end">timmbake@mcl.ucsb.edu (Bake Timmons)</text></g><g class="node" transform="translate(1350,17)"><circle r="4.5"></circle><text dx="8" dy="3" text-anchor="start">alt.atheism</text></g><g class="node" transform="translate(450,85)"><circle r="4.5"></circle><text dx="-8" dy="3" text-anchor="end">Hard/Soft == Strong/Weak.  KISS!</text></g><g class="node" transform="translate(900,85)"><circle r="4.5"></circle><text dx="-8" dy="3" text-anchor="end">mam@mouse.cmhnet.org (Mike McAngus)</text></g><g class="node" transform="translate(1350,85)"><circle r="4.5"></circle><text dx="8" dy="3" text-anchor="start">alt.atheism</text></g><g class="node" transform="translate(450,153)"><circle r="4.5"></circle><text dx="-8" dy="3" text-anchor="end">Re: Amusing atheists and anarchists</text></g><g class="node" transform="translate(900,153)"><circle r="4.5"></circle><text dx="-8" dy="3" text-anchor="end">mccullou@snake2.cs.wisc.edu (Mark McCullough)</text></g><g class="node" transform="translate(1350,153)"><circle r="4.5"></circle><text dx="8" dy="3" text-anchor="start">alt.atheism</text></g></svg> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:41:33.237

由于没有人可以帮助这里是功能代码：

```
function build_tree(tree_obj,is_diagonal) {
    var height = tree_obj.count * 10
    var cluster = d3.layout.tree().size([height, width - 300]);

    var diagonal = d3.svg.diagonal().projection(function(d) {
        return [d.y, d.x];
    });

    var vis = d3.select("#chart").append("svg").attr("width", width).attr("height", height).append("g").attr("transform", "translate(40, 0)");

    var nodes = cluster.nodes(tree_obj);
    var link = vis.selectAll("path.link")
                    .data(cluster.links(nodes))
                    .enter().append("path")
                    .attr("class", "link")
    if (is_diagonal==true){
        link.attr("d", diagonal);
    } else {
        link.attr("d", elbow);
    };

    var node = vis.selectAll("g.node").data(nodes).enter().append("g").attr("class", "node").attr("transform", function(d) {
        return "translate(" + d.y + "," + d.x + ")";
    })

    node.append("circle").attr("r", 4.5);

    node.append("text").attr("dx", function(d) {
        return d.children ? -8 : 8;
    }).attr("dy", 3).attr("text-anchor", function(d) {
        return d.children ? "end" : "start";
    }).text(function(d) {
        return d.name;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-13T03:22:21.860

添加一个父元素`g`，然后`translate(70,0)`像：

```
var svg = d3.select(rawSvg[0]).
             attr("width", width).
             attr("height", height).
             append("g").
             attr("transform", "translate(70,0)"); 
```

然后将树大小设置为`d3.layout.tree().size([height, width - 250]);`.

# javascript - Javascript - Youtube API 检测删除/阻止的视频

> ID：14604961
> 
> 赞同：2
> 
> 时间：2013-01-30T13:15:56.203
> 
> 标签：javascript, jquery, youtube-api

我如何检查 -> 视频是否被删除/私有或不允许嵌入？

**演示： http:** [//jsbin.com/eyexah/15/edit](http://jsbin.com/eyexah/15/edit)
**YT API 文档：** [https ://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

**JS代码**

```
var params = {
    allowScriptAccess: "always"
},
    atts = {
        id: "youtube_player"
    };

swfobject.embedSWF('http://www.youtube.com/v/SJmrqKOsIpM?enablejsapi=1&playerapiid=ytplayer&version=3&autoplay=1', 'youtube', '425', '356', '8', null, null, params, atts);

function onPlayerStateChange(e) {
    if (e !== 1) {
        return;
    }

    var availableQualityLevels = ytp.getAvailableQualityLevels();
    console.log(availableQualityLevels);
}

function onYouTubePlayerReady() {
    window.ytp = document.getElementById("youtube_player");
    ytp.addEventListener('onStateChange', 'onPlayerStateChange')

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:32:05.040

您可以在播放时通过`onError`使用 Player API 侦听回调来执行此操作：[https ://developers.google.com/youtube/iframe_api_reference#onError](https://developers.google.com/youtube/iframe_api_reference#onError)

这篇博文详细介绍了如何使用数据 API 提前检测某些限制：http: [//apiblog.youtube.com/2011/12/understanding-playback-restrictions.html](http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html)

域级白名单或黑名单仍未通过 Data API 公开>

# git - 在 GIT 中阻止和/或识别虚假作者姓名/电子邮件

> ID：14604962
> 
> 赞同：3
> 
> 时间：2013-01-30T13:16:00.427
> 
> 标签：git, security, commit, gitolite, spoofing

我想阻止`git commit`. 这意味着一个用户不能与其他人更改他/她的电子邮件。我用gitolite。如何实现此功能？由于我有用户的公钥，我可以将他们的电子邮件/姓名绑定到该公钥吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:42:48.823

> 由于我有用户的公钥，我可以将电子邮件/姓名与该公钥绑定吗？

非本地：Gitolite 仅适用于用户 ID（从 http 或 ssh 会话中提取并设置在变量中`GL_USER`）

因此，您需要在其他地方获得该信息。

我使用的是用户提供并存储在repo`gitolite/keys`目录中的公钥。`gitolite-admin`

一个公共 ssh 密钥由 3 部分组成：

```
 ssh-rsa xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx WhateverYouWant 
```

最后一部分，在公钥之后，是一个可以代表你想要的字符串。

我要求用户提供一个包含其电子邮件地址的密钥（最后）。
然后，我为所有 repo 设置了一个[`VREF`（gitolite 中的更新挂钩）](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite/10888358#10888358)，它将`user.email`使用从文件中提取的电子邮件验证提交中看到的`~gitolite/.ssh/authorized_keys`内容。
该文件由 gitolite 管理，并包含`user.name`电子邮件及其电子邮件（因为我希望用户给我他们的公钥的方式）

```
 command=="..../gitolite-shell user-id" xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx WhateverYouWant 
```

如果任何电子邮件与正确的用户名不匹配，VREF 挂钩将拒绝推送。

* * *

我自己的[VREF`CHECKID`](https://github.com/VonC/compileEverything/blob/passenger/gitolite/VREF/CHECKID.tpl)（出于稍微不同的目的）在以下声明中声明`gitolite.conf`：

```
repo    @all
  RW+                            = gitoliteadm
  -     VREF/CHECKID             = @all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-29T21:37:54.343

我写了一个钩子，它采用与之前的答案略有不同的方法。您在顶部输入一个 EMAILDOMAIN，它确保提交日志上的电子邮件地址等于 [提交用户的 SSH 密钥文件名]@[EMAILDOMAIN]。

我把它扔到 gitolite-admin/common-hooks 中，所以它在推送时运行服务器端。

```
#!/bin/bash

EMAILDOMAIN="company.com"

if [[ $2 = 0000000000000000000000000000000000000000 ]] || [[ $3 = 0000000000000000000000000000000000000000 ]]
then
  exit 0
fi

# get name and email from git log
EMAILCMD="git log --format="%ce" $3 -1"
EMAIL=$($EMAILCMD)  
NAMECMD="git log --format="%cn" $3 -1"
NAME=$($NAMECMD)

# environment variable for the gitolite user (the SSH key)
# echo $GL_USER

# compare email with gitolite user
EXPEMAIL="$GL_USER@$EMAILDOMAIN"
if [ "{$EXPEMAIL,,}" != "{$EMAIL,,}" ]
then
  echo "You're committing with the SSH key for '$GL_USER'. That key belongs to $EXPEMAIL."
  echo "  (You've configured your email as $EMAIL)"
  exit 1
fi

# TODO: maybe, if we ever bother installing mail on this box, send an email to some admins if someone is trying to key share

# check the name...
IFS=' ' read -ra NAMEPARTS <<< "${NAME,,}"
PARTCOUNT=0
for PART in "${NAMEPARTS[@]}"
do
  PARTCOUNT=$((PARTCOUNT+1))
done

# make sure it's a full name
if (( "$PARTCOUNT" < 2 ))
then
  echo "You should put in your full name, $NAME."
  echo "If you've really only got one name (like Sting or Madonna), email an admin and we can make an exception for you."
  exit 1
fi

exit 0 
```

# download - 智能下载工具？

> ID：14604964
> 
> 赞同：-1
> 
> 时间：2013-01-30T13:16:06.250
> 
> 标签：download

有我可以使用的 SMART 下载工具吗？我正在尝试下载 1.5 GB 的文件。我正在使用 AT&T 网络服务，我正在使用 Windows 8。我正在使用 Firefox 18，并且计算机有 IE 10。AT&T 网络服务每 20 分钟中断一次或出现问题。在过去的一周里，我多次尝试下载该文件，但总是失败。有时 IE 或 Firefox 下载 10MB、100MB、150MB 或 250MB，但随后显示失败。然后我必须重新开始。是否有一个智能下载工具，当连接中断时，它可以从故障点继续之前的下载，而不是重新开始下载。

我坐在轮椅上，不能移动太多，也无法使用任何其他计算机或服务。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:17:50.647

网络下载管理器。

你可以恢复下载，它比大多数浏览器快得多。

[http://www.internetdownloadmanager.com/download.html](http://www.internetdownloadmanager.com/download.html)

轨道下载器

[http://www.orbitdownloader.com/](http://www.orbitdownloader.com/)

# sql - 如何在sql server的while循环中使用select表达式？

> ID：14604965
> 
> 赞同：2
> 
> 时间：2013-01-30T13:16:10.053
> 
> 标签：sql, sql-server, tsql

我需要在 while 循环中使用选择表达式，并使用以下示例代码：

```
 declare @i integer
 set @i=1
 while (@i<10)
 begin
   select @i as m;
   set @i=@i+1
 END 
```

此代码返回 10 个单独的表！我希望它在一个表中返回所有选择结果......这可能吗？如果是的话......如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T13:19:09.413

您可以为此使用临时表或表变量。

这是使用临时表的方法。

```
CREATE TABLE #t (m INT)
DECLARE @i INT
SET @i=1
WHILE (@i<10)
BEGIN
  INSERT INTO #t SELECT @i
  SET @i=@i+1
END 
SELECT m FROM #t 
```

与表变量非常相似

```
DECLARE @t TABLE (m INT)
DECLARE @i INT
SET @i=1
WHILE (@i<10)
BEGIN
  INSERT INTO @t SELECT @i
  SET @i=@i+1
END 
SELECT m FROM @t 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-30T13:18:55.057

这不可能。每个`SELECT`语句都会生成自己的结果集。您可以使用临时表添加每次迭代的结果，然后将所有结果放在一个表中。要生成整数序列，您可以使用它（对于 SQL SERVER 2005 + ）

```
;WITH CTE
AS
(
   SELECT 1 N
   UNION ALL
   SELECT N + 1 FROM CTE
   WHERE N<10
)
SELECT N FROM CTE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T13:33:26.803

squillman 知道了...with #t (create table # - table 在会话打开时保留在顶级范围内 - 如果您有多个批处理语句，您可以在任何 after 声明中引用此表，直到您删除表)

Cris 也通过 @test 得到了它（声明 @table - 变量 - 仅在当前范围内持久化 - 单个执行批处理块...请注意，如果使用它，可能会引入几个性能问题）

您可以使用的最后一种临时表是全局临时表（创建表## - 只要创建它的会话保持打开状态或直到它被删除，它就会持续存在）

使用#t，如果您不关闭会话，您可能希望将其添加到脚本的开头：

```
IF OBJECT_ID('tempdb..#t') IS NOT NULL
    DROP TABLE #t 
```

享受临时表！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T13:21:53.913

```
declare @i integer
DECLARE @test TABLE(
  m /*your data type*/
)
 set @i=1
 while (@i<10)
 begin
   insert into @test select @i;

   set @i=@i+1
 END 

select * from @test 
```

# google-app-engine - JPA@Google App Engine：JPQL SELECT 查询总是返回空结果

> ID：14604968
> 
> 赞同：1
> 
> 时间：2013-01-30T13:16:21.423
> 
> 标签：google-app-engine, jpa, jpa-2.0, datanucleus

我目前正在将基于 JPA-2.0 的应用程序从 Hibernate 迁移到 Google App Engine，因为我只想在那里运行它。

我被困住了，因为我无法从 SELECT 查询中获得任何结果。我可以持久化实体并通过 id 找到它们，但是如果我想使用 SELECT 查询检索所有现有实体，则结果为空。

我在一个简单的测试用例中隔离了这个问题：

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
    <persistence-unit name="google.transactions-optional">
        <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
        <properties>
            <property name="datanucleus.NontransactionalRead" value="true"/>
            <property name="datanucleus.NontransactionalWrite" value="true"/>
            <property name="datanucleus.ConnectionURL" value="appengine"/>
            <property name="datanucleus.singletonEMFForName" value="true"/>^
        </properties>
    </persistence-unit>
</persistence> 
```

**JPA 实体类**

```
import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
class TestEntity
{
    @Id
    String id;
    String name;

    TestEntity(String id, String name)
    {
        this.id = id;
        this.name = name;
    }

    // For deseralization
    @SuppressWarnings("unused")
    private TestEntity()
    {
    }
} 
```

**失败的 JUnit 测试**

```
import org.junit.*;
import static org.junit.Assert.*;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.TypedQuery;

import com.google.appengine.tools.development.testing.LocalDatastoreServiceTestConfig;
import com.google.appengine.tools.development.testing.LocalServiceTestHelper;

public class SimpleJpaTest
{
    private static final String PERSISTENCE_UNIT = "google.transactions-optional";
    private static final EntityManagerFactory EMF = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT);

    private final LocalServiceTestHelper _helper;

    public SimpleJpaTest()
    {
        _helper = new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig().setDefaultHighRepJobPolicyUnappliedJobPercentage(100));
    }

    @Before
    public void setUp()
    {
        _helper.setUp();
    }

    @After
    public void tearDown()
    {
        _helper.tearDown();
    }

    @Test
    public void testPersistAndGet()
    {
        String id = "test";
        String name = "Test";

        // Persist entity
        EntityManager entityManager1 = EMF.createEntityManager();
        entityManager1.getTransaction().begin();
        TestEntity entity1 = new TestEntity(id, name);
        entityManager1.persist(entity1);
        entityManager1.getTransaction().commit();
        entityManager1.close();

        // Find specific entity
        EntityManager entityManager2 = EMF.createEntityManager();
        entityManager2.getTransaction().begin();
        TestEntity result2 = entityManager2.find(TestEntity.class, id);
        entityManager2.getTransaction().commit();
        entityManager2.close();

        assertNotNull(result2); // succeeds
        assertEquals(id, result2.id); // succeeds
        assertEquals(name, result2.name); // succeeds

        // Get all entities
        EntityManager entityManager3 = EMF.createEntityManager();
        entityManager3.getTransaction().begin();
        String queryString3 = "SELECT e from TestEntity e";
        TypedQuery<TestEntity> query3 = entityManager3.createQuery(queryString3, TestEntity.class);
        List<TestEntity> result3 = query3.getResultList();
        entityManager3.getTransaction().commit();
        entityManager3.close();

        assertNotNull(result3); // succeeds
        assertFalse(result3.isEmpty()); // fails
        assertEquals(1, result3.size());
        assertNotNull(result3.get(0));
        assertEquals(id, result3.get(0).id);
        assertEquals(name, result3.get(0).name);
    }
} 
```

如您所见，通过 find() 检索单个实体效果很好，但 SELECT 查询却不行。相同的代码适用于 Hibernate。

* * *

根据 DataNucleus 的评论进行编辑：

**控制台输出**

```
Jan 30, 2013 2:41:10 PM org.datanucleus.metadata.MetaDataManager loadPersistenceUnit
WARNING: Class SimpleJpaTest was specified in persistence-unit google.transactions-optional but not annotated, so ignoring
Jan 30, 2013 1:41:11 PM com.google.appengine.api.datastore.dev.LocalDatastoreService init
INFO: Local Datastore initialized: 
    Type: High Replication
    Storage: In-memory
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl internalPreCommit
INFO: >> calling preCommit on org.datanucleus.store.connection.ConnectionManagerImpl$2@15b573da
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl internalPreCommit
INFO: >> calling preCommit on org.datanucleus.ObjectManagerImpl@5ede1ffa
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl preFlush
INFO: >> calling preFlush on org.datanucleus.store.connection.ConnectionManagerImpl$2@15b573da
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl preFlush
INFO: >> calling preFlush on org.datanucleus.ObjectManagerImpl@5ede1ffa
Jan 30, 2013 1:41:11 PM com.google.appengine.datanucleus.MetaDataValidator validate
INFO: Performing appengine-specific metadata validation for TestEntity
Jan 30, 2013 1:41:11 PM com.google.appengine.datanucleus.MetaDataValidator validate
INFO: Finished performing appengine-specific metadata validation for TestEntity
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl internalPreCommit
INFO: >> calling preCommit on org.datanucleus.store.connection.ConnectionManagerImpl$2@49c54f01
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl internalPreCommit
INFO: >> calling preCommit on org.datanucleus.ObjectManagerImpl@69eeff74
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl preFlush
INFO: >> calling preFlush on org.datanucleus.store.connection.ConnectionManagerImpl$2@49c54f01
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl preFlush
INFO: >> calling preFlush on org.datanucleus.ObjectManagerImpl@69eeff74
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl preFlush
INFO: >> calling preFlush on org.datanucleus.store.connection.ConnectionManagerImpl$2@16f650e5
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl preFlush
INFO: >> calling preFlush on org.datanucleus.ObjectManagerImpl@71fcf7e2
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl internalPreCommit
INFO: >> calling preCommit on org.datanucleus.store.connection.ConnectionManagerImpl$2@16f650e5
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl internalPreCommit
INFO: >> calling preCommit on org.datanucleus.ObjectManagerImpl@71fcf7e2
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl preFlush
INFO: >> calling preFlush on org.datanucleus.store.connection.ConnectionManagerImpl$2@16f650e5
Jan 30, 2013 1:41:11 PM org.datanucleus.TransactionImpl preFlush
INFO: >> calling preFlush on org.datanucleus.ObjectManagerImpl@71fcf7e2 
```

* * *

顺便说一句：这个问题似乎类似于[Google App Engine + google cloud sql jpa query does not retrieve data from database](https://stackoverflow.com/questions/12593464/google-app-engine-google-cloud-sql-jpa-query-does-not-retrieve-data-from-datab)，但还没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:34:14.897

[我想我留在 Hibernate 并使用Google Cloud SQL](https://developers.google.com/cloud-sql/)比迁移到[App Engine Datastore](https://developers.google.com/appengine/docs/java/datastore/)更容易......

# ajax - android模拟器和restful web服务不适用于PhoneGap

> ID：14604969
> 
> 赞同：0
> 
> 时间：2013-01-30T13:16:24.310
> 
> 标签：ajax, cordova, android-emulator

当我使用以下 ajax 代码对其进行测试时，我运行了一个安静的 Web 服务并且它正在工作：

```
$(document).on('pagebeforeshow','#page2',
    function(){
                $('#submit').click(function() 
                {
                    var name = $("#username").val();
                    var surname = $("#usersurname").val();

                    alert(name + " " + surname);

                    $.getJSON("http://localhost:8080/rest/index.php/api/practice/test/name/"+name+"/surname/"+surname + "/format/json",
                    function(data) 
                    { 
                        alert(data.result);
                    });
                });         
              }); 
```

现在我想使用此代码访问相同的宁静 Web 服务，但通过 android 模拟器。这是我在使用PhoneGap的模拟器中使用的代码：

```
$(document).on('pagebeforeshow','#page2',
    function(){
                $('#submit').click(function() 
                {
                    var name = $("#username").val();
                    var surname = $("#usersurname").val();

                    alert(name + " " + surname);

                    $.getJSON("http://10.0.2.2:8080/rest/index.php/api/practice/test/name/"+name+"/surname/"+surname + "/format/json",
                    function(data) 
                    { 
                        alert(data.result);
                    });
                });         
              }); 
```

我还对 config.xml 文件进行了如下更改：

```
<access origin="http://10.0.2.2/rest/index.php/api/practice/test" subdomains="true"/> 
```

该应用程序似乎仍然无法正常工作。请有人帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:40:03.323

不确定原产线...您尝试过吗：

```
<access origin="http://10.0.2.2:80080*" subdomains="true"/> 
```

甚至

```
<access origin="http://10.0.2.2*" subdomains="true"/> 
```

?

# .net - LINQ 将连接结果存储在 DataTable 中

> ID：14604971
> 
> 赞同：0
> 
> 时间：2013-01-30T13:16:39.900
> 
> 标签：.net, linq, join, datatable

linq 中有没有办法加入两个 DataTable 并将结果存储在另一个 DataTable 中？我的意思是**DataTable**不是 group join 创建的分层形式。

这是我到目前为止获得的组加入代码。哪个有效，但我不明白如何处理结果。

```
var temp = from t1 in table1
           join t2 in table2
           on t1.Field<string>("a")
           equals t2.Field<string>("b") into t
           select t; 
```

而且，无论如何，如何使用由组加入创建的分层形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:32:51.823

那个 LINQ 查询应该给你一个 DataRow 对象的集合，对吗？您可以尝试[在 SO 上使用这种方法](https://stackoverflow.com/questions/2122511/simple-way-to-convert-datarow-array-to-datatable)将行转换为新表。

# c - 预处理器如何在 C 中工作？

> ID：14604975
> 
> 赞同：7
> 
> 时间：2013-01-30T13:16:52.310
> 
> 标签：c

为什么下面代码 16 的答案是？任何人都可以解释这个程序的工作原理吗？

```
#define SQUARE(n) n*n
void main()
{
    int j;      
    j =16/SQUARE(2);

    printf("\n j=%d",j);
    getch();
} 
```

如果我们编写如下相同的代码，那么答案是 4：

```
//the ans is 4 why?
#include<stdio.h>
#include<conio.h>

#define SQUARE(n) n*n

void main()
{
    int j;      
    j =16/(SQUARE(2));

    printf("\n j=%d",j);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T13:21:29.073

预处理器只是替换文本，完全按照书面形式。

所以，宏调用`SQUARE(2)`变成字面意思`2*2`。

在您的情况下，这意味着整个表达式变为`16/2*2`，由于[C 的优先规则](http://en.wikipedia.org/wiki/Operators_in_C_and_C++#Operator_precedence)，其计算结果为 (16/2)*2，即 16。

宏应该总是用括号括起来，并且每个参数也要括起来。

如果我们这样做，我们会得到：

```
#define SQUARE(n)  ((n) * (n)) 
```

替换为`16/((2) * (2))`，其计算结果为 16/4，即 4。

每个参数周围的括号使事情像`SQUARE(1+1)`预期的那样工作，没有它们的调用`16/SQUARE(1+1)`会变成`16/(1+1*1+1)`which is `16/3`，即根本不是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T13:18:07.777

您需要使用绝缘括号定义宏，如下所示：

```
 #define SQUARE(n) ((n)*(n)) 
```

除此以外

```
 j = 16/SQUARE(2); 
```

扩展到

```
j = 16 / 2 * 2;   which is equivalent to (16 / 2) * 2 
```

当你想要的是

```
j = 16 / (2 * 2); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T13:19:58.933

操作顺序。您的表达式正在评估为：

```
 j = 16 / 2 * 2 
```

等于 16。使它：

```
#define SQUARE(n) (n*n) 
```

这将强制首先评估正方形。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-30T13:21:10.033

### 1\. 使用要用作表达式的宏时，应将整个宏体括起来。

这可以防止错误的扩展，例如：

```
#define SQUARE(x) x*x
-SQUARE(5,5)
// becomes -5 * 5 
```

### 2\. 如果宏参数是表达式，也应该用括号括起来。

这可以防止不同类型的问题：

```
#define SQUARE(x) x*x
SQUARE(5+2)
// becomes 5 + 2*5 + 2 
```

* * *

因此正确的方法是这样写：

```
#define square(n) ((n)*(n))
-SQUARE(5+2)
// becomes -((5+2)*(5+2)) 
```

虽然不鼓励使用宏作为函数（猜猜为什么），所以请改用函数。例如：

```
inline double square(n) { return n*n; } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-30T13:19:26.073

宏的扩展将如下所示：

```
 j = 16/SQUARE(2);
  j = 16/2*2; 
```

等于：`j = (16/2)*2;`意味着`j = 16;`

和 ：

```
 j = 16/(SQUARE(2));
 j = 16/(2*2); 
```

等于：`j = 16/4;`意味着`j = 4;`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-30T13:19:58.963

因为宏将扩展为：

```
j = 16/2*2; 
```

预编译器不对扩展做任何处理。它将扩展的宏按原样放置在您的代码中。由于您没有为替换文本加上括号，因此它也不会在主代码中为您执行此操作。做了 ：

```
#define SQUARE(n) ((n)*(n)) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-30T13:22:29.137

第一个示例被评估为：

```
16 / 2 * 2
(16 / 2) * 2
8 * 2
16 
```

第二个例子被评估为：

```
16 / (2 * 2)
16 / 4
4 
```

在预处理器语句中添加括号以控制操作顺序：

```
#define SQUARE(n) ((n)*(n)) 
```

((n)*(n)) 中的外括号确保在执行任何外部操作之前 n 是平方的。内括号 (n) 确保在将表达式传递给 SQUARE 的情况下正确评估 n，如下所示：

```
16 / SQUARE(2 * 2)
16 / ((2 * 2)*(2 * 2))
16 / (4 * 4)
16 / 16
1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-30T13:20:16.500

你会得到

```
j =16/2*2; // (16 / 2) * 2 = 16 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-30T15:44:34.313

```
Its because Whenever macro name is used, it is replaced by the contents of the macro.its simple rule of working of macro.

Case 1 : result 16

        define SQUARE(n) n*n
        void main()
         {
            int j;      
            j =16/SQUARE(2);

          printf("\n j=%d",j);
          getch();
       }

its get expand as below

j =16/SQUARE(2); 

so in place of SQUARE(2) it will replace 2*2 because Macro is SQUARE(n) n*n

j = 16/2*2
j = (16/2)*2
j = 8*2
j =16

Case 2 : result 4

        define SQUARE(n) n*n

        void main()
       {
            int j;      
            j =16/(SQUARE(2));

          printf("\n j=%d",j);
          getch();
       }

its get expand as below

j =16/(SQUARE(2));

so in place of SQUARE(2) it will replace 2*2 because Macro is SQUARE(n) n*n

j = 16/(2*2)
j = 16/(4)
j = 4

Hope this will help 
```

# sql - SQL Server 中的 INSERT 语句 - 是否正确？

> ID：14604980
> 
> 赞同：-4
> 
> 时间：2013-01-30T13:17:06.950
> 
> 标签：sql, sql-server

```
insert into Employee_Document 
values(FristName, LastName, BeginWeek, EndWeek, 
       Hrs_Mon, hrs_tues, Hrs_Wed, Hrs_Thu, Hrs_Fri, Total_Hours,
       TaskDesc_Mon, TaskDesc_Tues, TaskDesc_Wed, TaskDesc_Thu, TaskDesc_Fri, '')

select 
   FristName, LastName, BeginWeek, EndWeek, 
   TotalHours where TimeSheetDate='31-12-2012' AS Hrs_Mon,'08:00:00',
   TotalHours where TimeSheetDate='02-01-2013' AS Hrs_Wed,
   TotalHours where TimeSheetDate='03-01-2013' AS Hrs_Thu,
   TotalHours where TimeSheetDate='04-01-2013' AS Hrs_Fri,
   TaskDescription where TimeSheetDate='31-12-2012' AS TaskDesc_Mon,
   TaskDescription where TimeSheetDate='02-01-2013' AS TaskDesc_Wed,
   TaskDescription where TimeSheetDate='03-01-2013' AS TaskDesc_Thu,
   TaskDescription where TimeSheetDate='04-01-2013' AS TaskDesc_Fri,'' 
from 
   vw_TSDailyTotalHoursTaskDesc) 
```

由于我是 SQL Server 的新手，因此此语句是否有任何错误。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:31:29.107

（哈哈）

好的，首先需要删除关键字 VALUES，基本的插入语法是：

```
INSERT [INTO] tablename (column list...) VALUES (literals...) 
```

或者

```
INSERT [INTO] tablename (column list) SELECT... 
```

由于上面是后者，只需完全删除 VALUES 即可。

接下来，根本就没有这样的名为''的列，不能（如果真的不正常的话，极限可能是['']），把它整理出来。

最后，我猜你想用这个做什么

```
TotalHours where TimeSheetDate='31-12-2012' AS Hrs_Mon,'08:00:00', 
```

可能是这样的

```
CASE WHEN TimeSheetDate='31-12-2012' THEN TotalHours ELSE '08:00:00' END AS Hrs_Mon, 
```

或者其他的东西？？

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-30T13:21:11.920

据我所知，唯一不正确的是在第一行你有不需要的单词值。

# symfony - 开发插件兼容应用程序的最佳方式。依赖注入？

> ID：14604981
> 
> 赞同：1
> 
> 时间：2013-01-30T13:17:09.883
> 
> 标签：symfony, dependency-injection, event-dispatching, pluggable

我想知道创建与插件完全兼容的应用程序的最佳方法。

我习惯了 Wordpress 插件概念，您可以定义操作和过滤器，然后在您的插件中使用。所以其他人可以在他们的插件上定义在调用动作（或过滤器）时执行的方法。

我的想法是使用一些操作和过滤器创建我的应用程序，然后其他开发人员可以构建一个干扰“正常”应用程序流程的 Bundle...

我正在阅读有关 Symfony2 依赖注入的信息，但我没有找到一些全面的示例来执行我​​想要的类似操作。

*   有人有一个我正在寻找的类似东西的真实例子吗？
*   依赖注入是最好的解决方案还是我应该构建自己的插件处理程序？

编辑：

我做了什么来允许其他包将项目添加到我的 knp-menu 菜单中。

在我的基础包中：

定义允许订阅者获取和设置菜单数据的过滤器：

```
# BaseBundle/Event/FilterMenuEvent.php

class FilterMenuEvent extends Event
{
    protected $menu;

    public function __construct($menu)
    {
        $this->menu = $menu;
    }

    public function getMenu()
    {
        return $this->menu;
    }
} 
```

定义菜单事件：

```
# Event/MenuEvents.php
final class MenuEvents
{
    const BEFORE_ITEMS = 'menu.before.items';
    const AFTER_ITEMS = 'menu.after.items';
} 
```

设置订阅者：

```
# Event/MenuSubscriber.php
class MenuSubscriber implements EventSubscriberInterface
{
    public static function getSubscribedEvents()
    {
        return array(
            'menu.after.items'     => array(
                array('homeItems', 9000),
                array('quickactionsItems', 80),
                array('adminItems', 70),
             ...
                array('logoutItems', -9000),
            )
        );
    }
    public function homeItems(FilterMenuEvent $menu_filter)
    {
        $menu = $menu_filter->getMenu();
        $menu->addChild('Home', array('route' => 'zashost_zaspanel_homepage'));
    }

    public function quickactionsItems(FilterMenuEvent $menu_filter)
    {
        $menu = $menu_filter->getMenu();
        $menu->addChild('Quick actions', array( 'route' => null));
        $menu['Quick actions']->addChild('Add hosting', array( 'route' => 'zashost_zaspanel_register_host'));
    }
} 
```

菜单生成中的调度事件：

```
# Menu\Builder.php

class Builder extends ContainerAware
{
    public function userMenu(FactoryInterface $factory, array $options)
    {
        $menu = $factory->createItem('root');

        $this->container->get('event_dispatcher')->dispatch(MenuEvents::AFTER_ITEMS , new FilterMenuEvent($menu));

        return $menu;
    }
} 
```

将订阅者附加到内核事件订阅者：

```
# services.yml
    services:
        # Menu items added with event listener
        base_menu_subscriber:
            class: Acme\BaseBundle\Event\MenuSubscriber
            arguments: ['@event_dispatcher']
            tags:
                - {name: kernel.event_subscriber} 
```

然后在第三方捆绑包中：

设置我的第三方事件订阅者：

```
class MenuSubscriber implements EventSubscriberInterface
{
    public static function getSubscribedEvents()
    {
        return array(
            'menu.after.items'     => array('afterItems', 55)
        );
    }

    public function afterItems(FilterMenuEvent $menu_filter)
    {
        $menu = $menu_filter->getMenu();
        $menu->addChild('Backups', array( 'route' => null));
        $menu['Backups']->addChild('Create new backup', array( 'route' => null));
        return $menu;
    }
} 
```

并附加到内核事件订阅者：

```
# srevices.yml
services:
    menu_subscriber:
        class: Acme\ThirdPartyBundle\Event\MenuSubscriber
        arguments: ['@event_dispatcher']
        tags:
            - {name: kernel.event_subscriber} 
```

这样我就可以使用 Event Dispatcher 的优先级来设置菜单中每组项目的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:58:54.117

为您的应用程序提供扩展点的一个很好的起点是使用Symfony的[EventDispatcher组件（](http://symfony.com/doc/current/components/event_dispatcher/introduction.html)[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的实现），其他开发人员可以在其中挂钩他们的自定义行为。

Symfony 已经在它自己的核心（[HttpKernel](http://symfony.com/doc/master/components/http_kernel/introduction.html)）中广泛使用了该组件，以允许其他组件（或插件，如果你愿意的话）挂钩 http 请求 -> 响应流中的各个点，并处理从请求匹配到响应生成的所有事情。

例如，`kernel.request`如果请求无效，您可以连接到事件并立即返回响应，或者连接到`kernel.response`事件并更改响应内容。

[查看默认 KernelEvents](http://api.symfony.com/master/Symfony/Component/HttpKernel/KernelEvents.html)的完整列表。

通过仅使用这些（还有许多与其他组件相关的其他组件），您可以创建一个比 Wordpress“平台”更强大、更可测试和更健壮的插件系统。

当然，您可以轻松地为博客应用程序创建和分发适合您的业务逻辑的自己的事件（例如创建类似`post.created`or的事件`comment.created`）。

现在，为了一个例子，这里是你将如何配置一个“插件”，它将对生成的响应做一些事情，然后将触发另一个事件（可以被另一个插件使用）

```
namespace Vendor;

use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\EventDispatcher\EventDispatcher;
use Symfony\Component\HttpKernel\Event\FilterResponseEvent;

class ResponseAlter implements EventSubscriberInterface
{

    private $dispatcher;

    public function __construct(EventDispatcher $dispatcher)
    {
        $this->dispatcher = $dispatcher;
    }

    public function doSomethingWithResponse(FilterResponseEvent $event)
    {
        $response = $event->getResponse();

        /**
         * let other plugins hook to the provide.footer event and
         * add the result to the response
         */
        $footer = new ProvideFooterEvent();
        $this->dispatcher->dispatch('provide.footer', $footer);

        $this->addFooterProvidedByPluginToResponse($response, $footer->getProvidedFooter());

        $event->setResponse($response);
    }

    static function getSubscribedEvents() 
    {
        return array(
            'kernel.response' => 'doSomethingWithResponse'
        );
    }
} 
```

现在您只需将您的服务[标记](http://symfony.com/doc/master/reference/dic_tags.html)为服务订阅者即可。您刚刚**插入**了 HttpKernel 组件：

```
services:
    my_subscriber:
        class: Vendor\ResponseAlter
        arguments: ['@event_dispatcher']
        tags:
            - {name: kernel.event_subscriber} 
```

# iphone - 如何在地图视图上保存注释

> ID：14604988
> 
> 赞同：0
> 
> 时间：2013-01-30T13:17:19.510
> 
> 标签：iphone, mkmapview

我想在地图视图上保存添加的注释。我在设备的当前位置添加注释，当用户稍后打开应用程序时，所有添加的注释都应该在地图视图中。我该怎么做，请指导我。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:22:05.003

一种方法是创建一个字典并将所有注释存储在该字典中。稍后将字典保存在 NSUserDefaults 中。

另一种方法是制作一个核心数据数据库并将键值（对于MKAnnotation：原始数据类型中的标题，副标题，纬度，经度。）存储在数据库中。稍后在加载时创建所有注释并将它们放入地图中。

你需要知道如何使用 CoreData，以及它的不同版本。还有一些关于 MapKit 的想法。要显示注释，您必须在从核心数据加载数据（标题、副标题、纬度、经度）后创建 MKAnnotation。这是最简单的方法。

您可以将对象存储在核心数据中。但在那种情况下，你需要继承 MKAnnotation 类以使其可序列化，我猜。

# vim - 如何在 Vim 中映射搜索？

> ID：14604989
> 
> 赞同：0
> 
> 时间：2013-01-30T13:17:21.693
> 
> 标签：vim

我是一名 Python 程序员，按照惯例，以 a 开头的方法`_`是私有的，因此不应在它所属的类之外调用。

我想要一种更快的方法来在 Python 中查找类和公共方法（因为我经常不得不深入研究其他人的代码来研究 API），所以我写了一个搜索，即

```
/^    def [^_]\|^class 
```

这在直接输入 Vim 时效果很好，但当然输入时间太长。我想将它映射到一个键（比如，`t`因为我现在在 Vim 中根本不使用它）。所以，我把它放在我的`~/.vimrc`：

```
nmap t /^    def [^_]\|^class 
```

但它不起作用：当我点击 时`t`，Vim 会按原样搜索字符串，而不是解析特殊字符（在本例中为`^`,`[^_]`和`\|`）。

任何人都知道如何编写此映射？我在 Vim Wikia、Google 和各种我能想到的资源中试了试运气，到目前为止还没有运气。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T13:23:39.123

您有一个问题`\|`：在读取自身时会删除一层转义`:nmap`，因此您需要另一层：使用`\\`to say `\`。

```
nmap t /^    def [^_]\\|^class
# or maybe add a final <CR> key
nmap t /^    def [^_]\\|^class<CR> 
```

# assembly - MASM 将 DWORD 写入注册表

> ID：14604991
> 
> 赞同：0
> 
> 时间：2013-01-30T13:17:38.107
> 
> 标签：assembly, masm, masm32

我正在尝试将 DWORD 写入注册表，我喜欢这样：

```
 WSTR keyvalue,"0"

       invoke RegCreateKeyExW,HKEY_LOCAL_MACHINE,offset keylocation,NULL,NULL,REG_OPTION_NON_VOLATILE,KEY_ALL_ACCESS,NULL,offset hIDKey,NULL 
      .IF eax==ERROR_SUCCESS
        invoke lstrlenW,offset keyvalue
        add eax,eax
        add eax,2
        invoke RegSetValueExW,hIDKey,offset keyname,NULL,REG_DWORD,offset keyvalue,eax 
        invoke RegFlushKey,hIDKey
        .ENDIF 
```

keyvalue 是 0，所以我希望注册表中的键是 0，但它写的是“38”。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:28:58.033

字符 0 是 0x38，并且您保留了一个宽*字符串*( `WSTR keyvalue`)，所以这是意料之中的。您需要 dword 值 0 （具有固定大小，因此您不需要`_wcslen`）。就像是：

```
keyvalue DD 0
....
mov eax,4
.... 
```