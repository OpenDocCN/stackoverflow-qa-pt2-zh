# StackOverflow 问答 12549000-12549999

# c# - C# 的任何等价物“扩展”？

> ID：12549000
> 
> 赞同：7
> 
> 时间：2012-09-23T01:15:20.347
> 
> 标签：c#, performance, double, floating-point-precision

我正在开发新版本的[Mandelbrot 屏幕保护程序](http://www.nichesoftware.co.nz/nicheMANDELBROTsaver)，但浮点精度已用完 - 简单的[双](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.110%29.aspx)精度值没有足够的有效数字来满足我的需要。

更重要的数字 = 更高级别的分形放大

当我在 Delphi 7 中编写此屏幕保护程序的版本时，我使用了[扩展](http://docwiki.embarcadero.com/RADStudio/en/Internal_Data_Formats#The_Extended_type)的浮点类型，大小为 80 位。

在 .NET 中，我可以切换到[decimal](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)，但是这样做的性能非常糟糕，分形生成速度减慢了 20 倍左右。

.NET是否有任何等效的**扩展？**或者，是否有任何精度高于**double**的数字类型仍然使用 FPU 进行评估，因此没有**decimal**的高性能命中？

**更新**

我的屏幕保护程序已经设法将分形放大许多（许多！）数量级；目前，仅当使用的数字类型无法分隔相邻像素的纵坐标时，它才会重置为基本分形。双扩展改进带来的额外 16 位精度将使我的大小增加近 16 倍。

至于性能，我的算法已经设法消除了所需的 95-99% 的数学运算（与计算许多像素的简单实现相比），同时保留了分形的完整性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T01:35:34.083

> 在 64 位平台上，`Extended`类型是 Double 的别名，只有 8 个字节。在 32 位平台上，一个`Extended`数字表示为 10 个字节（80 位）。

这意味着即使是您的 Delphi 程序也可能无法在 64 位平台上运行良好。

如果您需要超过 64 位的数字数据类型，请继续`decimal`优化您的算法以提高性能。

# gridview - 是否可以在不使用 CollectionViewSource 的情况下对 GridView 进行分组？

> ID：12549006
> 
> 赞同：2
> 
> 时间：2012-09-23T01:16:40.033
> 
> 标签：gridview, windows-8, windows-runtime, winrt-xaml

将功能绑定到类而不是接口似乎有点尴尬。有没有人设法在没有 CollectionViewSource 的情况下对 GridView 进行分组？

这里还有一个额外的问题：为什么必须通过绑定来引用 CollectionViewSource 资源：

```
 <GridView
        ItemsSource="{Binding Source={StaticResource groupedData}}"
        > 
```

代替

```
 <GridView
        ItemsSource="{StaticResource groupedData}"
        > 
```

??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T03:34:41.987

您不必使用 CollectionViewSource。您需要做的就是使用 ICollectionView 接口创建您自己的类。不过，使用 CollectionViewSource 会为您节省大量代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T07:54:47.810

我已经尝试了几天不使用 CollectionViewSource。不是因为我认为这很糟糕，而是我不知道你必须这样做。没有它，IMO 不可能有组和分组项目。我不知道为什么（我想当你阅读参考文献或看到你会理解的代码时）但你必须这样做。当您将分组数据放入 GridView 时，您将获得第一级（仅限组），但您将无法访问项目。只有将它与 CollectionViewSource 连接，你才能同时拥有

# python - Python 菜鸟：面向对象编程的头痛

> ID：12549007
> 
> 赞同：1
> 
> 时间：2012-09-23T01:17:10.207
> 
> 标签：python, oop

1.  这两个类声明有什么区别？“对象”有什么作用？

    ```
    class className(object):
        pass 

    class className:
        pass 
    ```

2.  为什么我在运行以下代码时会收到此错误：“不接受任何参数（给定 1 个）”

    ```
    class Hobbs():
        def represent():
            print "Hobbs represent!"
        represent = classmethod(represent)

    Hobbs.represent() 
    ```

3.  为什么即使我没有将参数传递给函数，“Foo.class_foo()”也不会出错。

    ```
    class Foo(object):
        @staticmethod
        def static_foo():
        print "static method"
        @classmethod
        def class_foo(cls):
            print "Class method. Automatically passed the class: %s" % cls      
    Foo.static_foo()
    Foo.class_foo() 
    ```

4.  为什么我在运行以下代码时会收到此错误？

    ```
    class Foo(object):  
        def static_foo():
            print "static method"
            static_foo = staticmethod(static_foo)
        def class_foo(cls):
                print "Class method. Automatically passed the class: %s" % cls
        class_foo = classmethod(class_foo)  
    Foo.static_foo()
    Foo.class_foo() 
    ```

> “TypeError：必须使用 Foo 实例作为第一个参数调用未绑定的方法 static_foo()（什么都没有）”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T01:41:43.407

1.  `object`至少从 Python 2.2 开始，作为新类的基类就已成为惯例，并且被称为“新样式类”——有关更多详细信息，请参阅此[问题](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python)。旧样式类（即：不继承自 的类`object`）在 Python 3.0 中被设置为弃用。这些变化的原因有些模糊，与低级类解析和继承模式有关。

2.  按照惯例，Python 实例方法`self`作为它们的第一个参数。这个参数是隐式传递的——所以如果你的方法定义不接受`self`，那么解释器会抱怨你试图调用的方法不接受自动传递给它的参数。这对于类方法完全相同，只是`self`它们通常不采用 ，而不是采用`cls`。（只是一个命名约定。）快速修复：

    ```
    class Hobbs():
        def represent(cls):
            print "Hobbs represent!"
        represent = classmethod(represent)

    Hobbs.represent() 
    ```

3.  调用`Foo.class_foo()`不会导致任何问题，因为`class_foo`无论何时调用，Python 都会自动将类对象传递给方法。这些方法称为*绑定方法*——这意味着它们是常规函数，但绑定到类或实例对象。绑定方法自动将它们绑定到的类或实例对象作为它们的第一个参数。

4.  缩进级别在 Python 中很重要。我已尝试执行您提供的代码示例，但`static_foo =`和`class_foo =`行都必须在`Foo`类定义内，而不是在它之下或在其他方法内。正确缩进后，代码运行良好：

    ```
    class Foo(object):
        def static_foo():
            print "static method"
        static_foo = staticmethod(static_foo)
        def class_foo(cls):
            print "Class method. Automatically passed the class: %s" % cls
        class_foo = classmethod(class_foo)
    Foo.static_foo()
    Foo.class_foo() 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T01:49:42.130

1.  最后两个是相同的 - 空括号与省略它们相同。第一个继承自内置类`object`，使其成为“新样式类”。新旧样式类的原因是历史性的，而旧样式只是为了向后兼容而保留——本质上，在 Python 2 中，`object`如果你不从其他任何东西继承，建议总是从继承，因为一些您将学习的花哨技巧最终依赖于它。如果升级到 Python 3，这将成为默认行为，并且所有三个类声明都是等效的。

2.  A`classmethod`需要采用类似于`self`- 的第一个参数，当您调用 时`Hobbs.represent()`，Python 最终`Hobbs`会作为第一个参数传入。`classmethod`这是和之间的根本区别`staticmethod`- a`classmethod`接受第一个参数（作为它被调用的类）， a`staticmethod`没有。

3.  与 2-class 相同的是传递给`classmethod`in 代替通常的`self`。

4.  这似乎是一个缩进问题 - 如果它被缩进，您的代码就可以正常工作：

    ```
    def static_foo():
        print "static method"
    static_foo = staticmethod(staticfoo) 
    ```

但不像

```
def static_foo():
    print "static method"
    static_foo = staticmethod(staticfoo) 
```

因为重新分配的行`static_foo`需要在类主体中，而不是函数本身的一部分。在后者中，该行在函数运行之前不会执行（这意味着它没有运行，因为函数错误） - 并且它将 a 分配`staticmethod`给局部变量而不是方法本身。这种类型的错误是最好使用装饰器语法的原因之一：

```
 class Hobbs:
    @staticmethod
    def static_foo():
         print "static method" 
```

作品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T01:47:43.587

您的大多数问题都不是关于面向对象本身，而是 Python 的具体实现。

1.  Python 2.x 经历了一些演变，添加了新功能。所以有两种定义类的方法，产生了“新式类”和“旧式类”。Python 3.x 只有“新样式类”。新型类的基础对象称为`object`. 如果你从那里继承，你就有了一个新风格的类。它为您提供了一些额外的功能，例如某些装饰器。如果您在 Python 2.x 中有一个简单的（无继承）定义，那么您就有了一个老式类。这是为了向后兼容而存在的。在 Python 3.x 中，您还将获得一个新样式的类（因此从`object`那里继承是可选的）。

2.  您已经制作了`represent()`“类方法”。所以它会在调用时将类对象作为隐式的第一个参数。但那些只适用于新型类。您已尝试将它与旧式类一起使用。所以它不会工作。

3.  Python 自动插入类对象作为类方法的参数零。所以这是正确的模式并且有效。

4.  该方法不知何故没有进入类方法，可能是因为缩进错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T01:48:05.263

1.  `class ClassName(OtherClass):` 表示 ClassName 继承自 OtherClass。继承是一个很大的主题，但基本上它意味着 ClassName 至少具有与 OtherClass 相同的功能和字段。

    在 python 中，一切都是对象，因此，所有类都隐式或显式地从对象继承。这么说

    该`class ClassName():`声明是一种旧语法，应避免使用。

    `class ClassName:`相当于类`ClassName(object):`

2.  类方法不是静态方法。它与任何其他实例方法一样，只是它作为参数而不是实例传递给类。

    你的类方法声明是错误的。它应该有一个 cls 参数。

3.  另一方面，静态方法是在上下文之外调用的方法。这意味着它与任何实例都没有关系。它可以被认为是一个独立的函数，出于语义原因简单地放在一个类中。

    这就是为什么它不需要 self 参数并且永远不会传递给它的原因。

4.  你有一个缩进错误。这可能是导致错误的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T01:19:28.707

所有类函数都必须以 self 作为第一个参数

```
class  A:
   def my_func(self):
        print "In my func" 
```

静态方法是几乎只是命名空间中的一个函数的类（在 python 中很少使用）

类方法是类命名空间中的函数，应该在类本身而不是实例上调用

# c++ - 访问向量时出现 C++ 错误 通过迭代器的元素

> ID：12549010
> 
> 赞同：-1
> 
> 时间：2012-09-23T01:18:03.893
> 
> 标签：c++, vector, iterator, sdl

相关代码如下：

我已经分别测试了每个 Nurse 对象分配和整个事情，并且数据存储正确，但由于某种原因我无法访问它来确定要显示哪些图块。我也尝试过在没有迭代器的情况下访问数据，但这也不起作用。任何想法都非常感谢，我已经尝试了好几个小时：/

```
for(unsigned int j = 42; j < EntityManager::getInstance()->nurses.size() * 42 + 42; j += 42) //increment y axis
{
    int rosterCounter = 0;
    int count = 0;
    vector<string> roster = EntityManager::getInstance()->nurses[count]->getRosterData();
    vector<string>::const_iterator iter;

    iter = roster.begin();

    for(unsigned int i = GraphicsCore::getInstance()->screenWidth; rosterCounter <= EntityManager::getInstance()->getSize() && iter != roster.end(); i -= 64) //iterate through each column, RTL
    {

        TextBox * text;

        if(*iter == "D")
        {
            text = new TextBox("resources/tiles/textboxshortd.png", i, j, (TextBox::type) 4);
        }
        else if(*iter == "N")
        {
            text = new TextBox("resources/tiles/textboxshortn.png", i, j, (TextBox::type) 4);
        }
        else if(*iter == "O")
        {
            text = new TextBox("resources/tiles/textboxshorto.png", i, j, (TextBox::type) 4);
        }
        else
        {
            text = new TextBox("resources/tiles/textboxshort.png", i, j, (TextBox::type) 4);
        }
        iter++;
        rosterCounter++;
    }
    count++;
} 
```

**编辑：它现在运行，但第一次迭代似乎什么都不做，出于某种原因，第一列中根本没有放置任何图块，而且它似乎完全偏移了 1。我尝试了 begin()-1 但这没有用任何一个。谢谢你们的帮助：）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T01:28:11.683

您永远不会检查您的迭代器以查看它是否为`!= roster.end()`. 如果是这样，当您尝试取消引用或增加它时，它将导致未定义的行为。

另外，请注意您的代码很可能会泄漏。你从来没有`delete text;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:39:58.577

如果你知道它的大小

```
vector.size() 
```

您可以通过以下方式访问每个元素

```
vector.at(x); 
```

如果实体管理器为您提供数据的副本，那么这应该没问题（我假设它不是指针）

你可能需要解释的是为什么你有如此神秘的 for 循环，你的第一个循环在索引变量中以 42 开头是没有意义的，我认为你一步要做两件事，这让你的生活更加困难。

正如您可能知道的那样，您应该提供崩溃所在的行。

如果您首先选择数据并在显示它之后，您可能会自己发现错误。

编辑：我已经意识到你似乎不明白你在做什么，不要只是在你的代码中乱搞，想象你的问题。另外，我不清楚您的逻辑，当您有一个包含 10 个元素的向量时，如果元素 0 不会打印出您想要查看的值，您为什么要尝试访问元素 -1？你应该反过来尝试，检查为什么 0 的值不包含你想要的。我也假设你没有写过初始代码，先试着理解代码。拿一些纸并画出当前的工作流程和您正在尝试构建的目标工作流程。

# ruby - 尝试在 Windows 上使用 Ruby 获取 HTTPS 数据时完全卡住了

> ID：12549011
> 
> 赞同：0
> 
> 时间：2012-09-23T01:18:44.753
> 
> 标签：ruby, https, web-scraping

我正在使用 Ruby 1.9.3 并尝试在[此](https://github.com/tdoyle/Google-Play-Unofficial-Gem)基础上松散地编写 Google Play 刮板。我很难使用其中的 HTTPS 部分。

基本上，`Nokogiri::HTML(open("https://play.google.com/store/#{type}/details?id=#{id}"))`在 Windows 上使用（如在原始 gem 中）失败，原因在[此线程](http://railsforum.com/viewtopic.php?id=36340)中解释。

所以，我尝试从同一个线程实现解决方案，但它实际上根本不起作用。我什至现在已经停止尝试使用 HTTPS，因为即使只是 HTTP，我也必须缺少一些基本的东西。

这是我目前拥有的代码：

```
 url = URI.parse( "http://google.com/" )
  http = Net::HTTP.new( url.host, url.port )
  http.use_ssl = true if url.port == 443
  http.verify_mode = OpenSSL::SSL::VERIFY_NONE
  res, data = http.get ("http://google.com/")
  puts data 
```

在这种情况下，我什么也得不到。甚至没有“零”，根本没有输出。

但是，当我做一个 Straight 时`Net::HTTP.get_print URI('http://www.google.com')`，我得到了输出，没有问题。

非常感激任何的帮助。我正在寻找的真正解决方案是在使用 Windows 时抓取 Google Play 页面的简单方法——这只是实现这一目标的一步。因此，如果您知道实现此目的的更简单方法，我很想听听。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:33:14.807

你得到的原因`nil`是因为`data`没有分配任何东西。此行仅分配给`res`：

```
res, data = http.get("http://google.com/") 
```

此外，必须使用 Google 访问`http://www.google.com`，`www`否则您得到的只是 301 重定向消息和 `Net::HTTPMovedPermanently`对象。

# python - 在 zinnia 中为视图函数 -basic python 创建一个入口对象

> ID：12549014
> 
> 赞同：0
> 
> 时间：2012-09-23T01:19:02.147
> 
> 标签：python, django, zinnia, zinnia-entry

有人可以帮我解释一下以下页面吗 [http://nullege.com/codes/search/zinnia.models.Entry.objects.create](http://nullege.com/codes/search/zinnia.models.Entry.objects.create)

如何在 django 中使用 form.html 文件和视图函数在 zinnia 中创建条目

我知道这是基本的 python 玩类

地狱世界可以在这里找到 [http://django-blog-zinnia.com/blog/](http://django-blog-zinnia.com/blog/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:42:19.220

对于你的第一个问题：

```
params = {'title': 'My entry 1', 'content': 'My content 1',
          'tags': 'zinnia, test', 'slug': 'my-entry-1',
          'status': PUBLISHED}
self.entry_1 = Entry.objects.create(**params)
self.entry_1.authors.add(self.authors[0])
self.entry_1.categories.add(*self.categories)
self.entry_1.sites.add(*self.sites) 
```

这里`Entry.objects.create(**params)`相当于 [`Entry.objects.create(title='My entry 1', content='My conten 1', tags='zinnia, test', slug='my-entry-1', status='PUBLISHED' )](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.create)，它会创建一个标题为“我的条目 1”、内容为“我的内容 1”的新条目并保存到数据库中。基本条目类看起来像这样：

```
class EntryAbstractClass(models.Model):
    """Base Model design for publishing entries"""
    STATUS_CHOICES = ((DRAFT, _('draft')),
                      (HIDDEN, _('hidden')),
                      (PUBLISHED, _('published')))

    title = models.CharField(_('title'), max_length=255)

    image = models.ImageField(_('image'), upload_to=UPLOAD_TO,
                              blank=True, help_text=_('used for illustration'))
    content = models.TextField(_('content'))
    excerpt = models.TextField(_('excerpt'), blank=True,
                                help_text=_('optional element'))

    tags = TagField(_('tags'))
    categories = models.ManyToManyField(Category, verbose_name=_('categories'),
                                        related_name='entries',
                                        blank=True, null=True)
    related = models.ManyToManyField('self', verbose_name=_('related entries'),
                                     blank=True, null=True)

    slug = models.SlugField(help_text=_('used for publication'),
                            unique_for_date='creation_date',
                            max_length=255)

    authors = models.ManyToManyField(User, verbose_name=_('authors'),
                                     related_name='entries',
                                     blank=True, null=False) 
```

所以行 like`self.entry_1.authors.add(self.authors[0]`将与 `self.athors[0]`through`self.entry_1`相关`ManyToManyField`。

至于你的第二个问题，是的，你可以创建一个`form.html`视图函数来添加一个新条目，但是 zinnia 旨在与 Django Admin 界面一起使用来管理内容。它也会让你的生活更轻松。要使用它，您需要`'django.contrib.admin',`在`INSTALLED_APPS`您`settings.py`的文件和`urls.py`文件中启用。

启用 Django admin 后，您可以简单地去`example.com/admin/`创建新条目。

* * *

现在，如果由于某种原因您不使用或无法使用 Django 管理员，那么`views.py`添加新条目的效果如下：

```
#views.py
from . import forms as entryform
from zinnia.models.entry import Entry

def add_entry(request):
    form = entryform.EntryForm(request.POST or None)
    if not (request.method == 'POST' and form.is_valid()):
        return render_to_response("forms.html", {'form': form})
    title = request.POST['title']
    content = request.POST['content']
    #...many more..
    Entry.objects.create(title=title, content=content)
    return render_to_response('success.html', {'form': form,}) 
```

请注意，您还需要创建一个`forms.py`来验证提交的表单。

至于您，`forms.html`您需要编写一个表单，其中包含您需要的所有输入，例如“标题”和“内容”，并将其发布到此 `add_entry`视图。

# ios - RestKit loadObjectsAtResourcePath 不起作用

> ID：12549021
> 
> 赞同：0
> 
> 时间：2012-09-23T01:21:58.273
> 
> 标签：ios, restkit

谁能告诉我为什么当我调用 loadObjectsAtResourcePath 时我的行为完全没有？日志中没有任何内容，我在课堂上定义的任何代表都没有被调用。

```
 RKObjectMapping* roundMapping = [RKObjectMapping mappingForClass:[Round class]];
        [roundMapping mapKeyPath:@"Id" toAttribute:@"id"];
        [roundMapping mapKeyPath:@"Name" toAttribute:@"name"];
        [roundMapping mapKeyPath:@"Description" toAttribute:@"description"];
        [roundMapping mapKeyPath:@"NumberOfPlayers" toAttribute:@"numberOfPlayers"];
        [roundMapping mapKeyPath:@"PlayerLimit" toAttribute:@"playerLimit"];
        [roundMapping mapKeyPath:@"Url" toAttribute:@"url"];

        [[RKObjectManager sharedManager].mappingProvider addObjectMapping:roundMapping];

        [RKObjectManager sharedManager].client.baseURL = [RKURL URLWithString:@"http://69.999.150.71:1023/service/"];

        [[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/lobby2" delegate:self];

        //[RKClient clientWithBaseURLString:@"http://69.999.150.71:1023/service/"];

        //[[RKClient sharedClient] get:@"/lobby?format=JSON" delegate:self];
    }
    return self;
}

- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error
{
    UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"Error" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
    [alert show];
    NSLog(@"Hit error: %@", error);
}

- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response
{
    NSLog(@"Loaded payload: %@", [response bodyAsString]);
}

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    NSLog(@"Loaded: %@", objects);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:46:13.870

在您的@interface 中您使用的是`<RKObjectLoaderDelegate>`？除非实现，否则 ObjectLoader 不会收到消息。

# compass-sass - 嵌套列计算错误？

> ID：12549028
> 
> 赞同：2
> 
> 时间：2012-09-23T01:24:03.797
> 
> 标签：compass-sass, susy-compass

我拼命想用 Susy 模拟一个网站。我担心我可能只是遗漏了一些明显的东西，但是当我在我的 Susy 网格中嵌套项目时，每列的百分比宽度和边距似乎略微超调，以至于它们加起来超过 100% 并换行到下一行。在以下示例中，#main_headernav 设置为 12 列中的 8 列，其中的每个 li 应填充 8 列中的 2 列。每个 li 都有一个计算样式如下，加起来超过 100% 并导致最后一个项目换行

```
width: 22.58065%;
float: left;
margin-right: 3.22581%; 
```

这是有问题的例子：

```
<header id="main_header">
    <img id="main_banner" src="images/test_banner.png" alt="Test">
    <nav id="main_headernav">
        <ul>
            <li><a href="#about">About</a></li>
            <li><a href="#blog">Blog</a></li>
            <li><a href="#shop">Shop</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
    </nav>          
</header> 
```

和SASS：

```
$total-columns  : 12;           
$column-width   : 60px;           
$gutter-width   : 20px;  
$grid-padding   : $gutter-width;

//Set border-box sizing - also alters SUSY grid math
//@include border-box-sizing;

// Main Container
#main_container {
    @include container;
}

#main_header {
    @include span-columns(12 omega);

    #main_banner {
        @include span-columns(12 omega,12);
    }

    #main_headernav {
        @include span-columns(8 omega,12);

        li {
            @include span-columns(2,8);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T20:40:01.543

好的，所以我知道这将是我的问题:)

当然，有必要在每 4 li 子节点上使用 nth-omega mixin，以避免多余的边距并防止包装。

盯着同一个屏幕只花了 2 个小时 :)

# sql - SQL 错误“ORA-01722：无效号码”

> ID：12549029
> 
> 赞同：125
> 
> 时间：2012-09-23T01:24:16.340
> 
> 标签：sql, oracle, plsql, casting, type-conversion

对某人来说非常简单，下面的插页给了我

> ORA-01722: 无效号码

为什么？

```
INSERT INTO CUSTOMER VALUES (1,'MALADY','Claire','27 Smith St Caulfield','0419 853 694');
INSERT INTO CUSTOMER VALUES (2,'GIBSON','Jake','27 Smith St Caulfield','0415 713 598');
INSERT INTO CUSTOMER VALUES (3,'LUU','Barry','5  Jones St Malvern','0413 591 341');
INSERT INTO CUSTOMER VALUES (4,'JONES','Michael','7  Smith St Caulfield','0419 853 694');
INSERT INTO CUSTOMER VALUES (5,'MALADY','Betty','27 Smith St Knox','0418 418 347'); 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-09-23T01:32:35.087

尝试将字符串转换为数字时出现 ORA-01722 错误，但无法将字符串转换为数字。

在没有看到您的表定义的情况下，您似乎正在尝试将值列表末尾的数字序列转换为数字，并且分隔它的空格会引发此错误。但根据您提供给我们的信息，它可能发生在任何领域（除了第一个领域）。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-23T08:37:53.787

假设电话号码被定义为`NUMBER`那么空格不能转换为数字：

```
create table telephone_number (tel_number number);
insert into telephone_number values ('0419 853 694'); 
```

以上给你一个

> ORA-01722: 无效号码

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-12-27T15:35:57.033

这是解决它的一种方法。删除非数字字符，然后将其转换为数字。

```
cast(regexp_replace('0419 853 694', '[^0-9]+', '') as number) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-08-08T12:35:39.177

那么它也可以是：

```
SELECT t.col1, t.col2, ('test' + t.col3) as test_col3 
FROM table t; 
```

在 oracle 中的连接使用运算符`||`not `+`。

在这种情况下，您会得到：`ORA-01722: invalid number ...`

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-09-23T03:10:35.173

As this error comes when you are trying to insert non-numeric value into a numeric column in db it seems that your last field might be numeric and you are trying to send it as a string in database. check your last value.

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-09-23T01:31:48.187

这是因为：

> 您执行了一条 SQL 语句，试图将字符串转换为数字，但没有成功。

如中所述：

*   [Oracle/PLSQL：ORA-01722 错误。](http://www.techonthenet.com/oracle/errors/ora01722.php)

要解决此错误：

> 只有数字字段或包含数值的字符字段才能用于算术运算。确保所有表达式都计算为数字。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-11-15T12:08:52.927

Oracle为**String 列值****自动进行 String2number**转换！但是，对于 SQL 中的文本比较，输入必须明确地分隔为字符串：相反的转换 number2String 不会自动执行，不在 SQL 查询级别。

 **我有这个查询：

> `select max(acc_num) from ACCOUNTS where acc_num between 1001000 and 1001999;`

那一个提出了一个问题：`Error: ORA-01722: invalid number`

我刚刚包围了**“数字”**值，使它们成为**'Strings'**，只是使它们**明确分隔**：

> `select max(acc_num) from ACCOUNTS where acc_num between '1001000' and '1001999';`

...然后瞧：它返回预期的结果。

**编辑：** 确实：我表中的 col`acc_num`定义为`String`. 虽然不是数字，但`invalid number`报告了。字符串数字的**显式定界**解决了这个问题。

另一方面，Oracle**可以**将字符串视为数字。所以数值运算/函数可以应用于字符串，并且这些查询有效：

> 从表中选择**最大值**（string_column）；
> 
> 从 TABLE 中选择 string_column，其中 string_column**在**'2' 和 'z' 之间；
> 
> 从表中选择 string_column 其中 string_column **>** '1';
> 
> 从表中选择 string_column 其中 string_column **<=** 'b';

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-09-02T14:28:33.983

在我的情况下，转换错误出现在我为表创建的**基于功能的索引中。**

插入的数据没问题。我花了一段时间才弄清楚实际错误来自错误索引。

如果 Oracle 在这种情况下可以给出更准确的错误消息，那就太好了。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-09-23T22:23:21.923

如果你做一个`insert into...select * from...`声明，也很容易得到“无效号码”的错误。

假设您有一个名为的表`FUND_ACCOUNT`，它有两列：

```
AID_YEAR  char(4)
OFFICE_ID char(5) 
```

假设您想将 OFFICE_ID 修改为数字，但表中存在现有行，更糟糕的是，其中一些行的 OFFICE_ID 值为“”（空白）。在Oracle中，如果表有数据，则不能修改列的数据类型，将''转换为0需要一些技巧。所以这里是如何做到的：

1.  创建重复表：`CREATE TABLE FUND_ACCOUNT2 AS SELECT * FROM FUND_ACCOUNT;`
2.  从原始表中删除所有行：`DELETE FROM FUND_ACCOUNT;`
3.  一旦原始表中没有数据，更改其 OFFICE_ID 列的数据类型：`ALTER TABLE FUND_ACCOUNT MODIFY (OFFICE_ID number);`

4.  但这是棘手的部分。因为有些行包含空白的 OFFICE_ID 值，所以如果你做一个简单的`INSERT INTO FUND_ACCOUNT SELECT * FROM FUND_ACCOUNT2`，你会得到“ORA-01722 Invalid Number”错误。为了将“”（空白）OFFICE_ID 转换为 0，您的插入语句必须如下所示：

`INSERT INTO FUND_ACCOUNT (AID_YEAR, OFFICE_ID) SELECT AID_YEAR, decode(OFFICE_ID,' ',0,OFFICE_ID) FROM FUND_ACCOUNT2;`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-03-12T14:54:12.230

这也发生在我身上，但问题实际上不同：**文件编码**。

文件正确，但文件编码错误。它是由 SQL Server 的导出实用程序生成的，我将其保存为 Unicode。

该文件本身在文本编辑器中看起来不错，但是当我打开`*.bad`SQL*loader 生成的带有被拒绝行的文件时，我看到它在每个原始字符之间都有坏字符。然后我想到了编码。

我用记事本++打开了原始文件并将其转换为ANSI，并且所有内容都正确加载。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-05-11T23:01:17.203

ORA-01722 错误非常简单。根据[汤姆凯特](https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:45012348053)的说法：

> 我们尝试将字符串显式或隐式转换为数字，但都失败了。

然而，问题出在哪里往往一开始并不明显。 [此页面](http://www.dba-oracle.com/sf_ora_01722_invalid_number.htm)帮助我排除故障、查找并解决我的问题。提示：查找将字符串显式或隐式转换为数字的位置。（我`NVL(number_field, 'string')`的代码中有。）

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-06-08T14:35:05.303

试试这个，当你有一个无效的数字错误

在这个 a.emplid 是数字， b.emplid 是一个 varchar2 所以如果你必须转换其中一个边

其中 to_char(a.emplid)=b.emplid

* * *

## 回答 #13

> 赞同：-4
> 
> 时间：2014-10-11T06:08:05.663

您始终可以使用 TO_NUMBER() 函数来消除此错误。这可以作为 INSERT INTO 员工电话号码值包含在内（TO_NUMBER('0419 853 694');**

# windows-7 - windows - 用户配置文件路径因值空间而受到影响

> ID：12549041
> 
> 赞同：0
> 
> 时间：2012-09-23T01:29:27.983
> 
> 标签：windows-7

我的用户配置文件中有一个空格（名字 - 空格 - 姓氏），因此，当我安装一些程序时，它在我的 C:\Users 目录中创建了一个只有我名字的文件。我不知道这是如何或何时发生的。

现在，当我使用“运行”并键入 %temp% 时，Windows 会提示我找不到“C:\User(firstname)”的错误。

有什么办法可以恢复原价吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:43:47.943

删除或重命名错误目录。

* * *

在 Windows 上，如果文件名中有空格，一些服务会尝试“聪明”地处理命令。该算法首先用空格分割输入（与正常的命令行解析一样），然后如果第一个组件没有给出有效路径，则收集相邻参数。如果它在某个点找到有效路径，它将停止解析并将其余部分视为参数。

说我有`C:\Users\John Smith`一个错误的目录`C:\Users\John`。然后，如果我尝试访问`%TEMP%`，Windows 会将其扩展为`C:\Users\John Smith\AppData\Local\Temp`. 由于第一个“参数”`C:\Users\John`存在，它被视为一个命令，但由于它不是一个命令（它是一个文件），你会得到那个错误。

# javascript - 根据值悬停并显示图像

> ID：12549042
> 
> 赞同：3
> 
> 时间：2012-09-23T01:29:49.857
> 
> 标签：javascript, jquery

当标签悬停时，我目前正在显示图片。我已经能够解决显示图片的主要问题。问题是当快速悬停时它会出现故障。有没有办法避免这种情况？另外，如何设置加载页面时显示的默认图像？[JSFIDDLE](http://jsfiddle.net/BramVanroy/7Wp9z/)

**HTML**

```
<div id="links">    
    <a href="example.htm" class="large magenta awesome" data-content="cheeseburger">Cheeseburger »</a>
    <a href="example.htm" class="large blue awesome" data-content="tacos">Tacos »</a>
    <a href="example.htm" class="large red awesome" data-content="salads">Salads »</a>
    <a href="example.htm" class="large orange awesome" data-content="bread-sticks">Bread Sticks »</a>
    <a href="example.htm" class="large yellow awesome" data-content="dessert">Dessert »</a>
</div> 
```

**jQuery**

```
$("div#links > a").hover(
    function(){
        var ID = $(this).data("content");
        $("div#images").children("img#" + ID).fadeIn("slow");
    },
    function() {
        var ID = $(this).data("content");
        $("div#images").children("img#" + ID).hide();
    }
);​ 
```

毛刺

![在此处输入图像描述](../Images/d2925143cd4998562caf85c317a0075b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T01:39:05.053

> 问题是当快速悬停时它会出现故障。有没有办法避免这种情况？

这不是故障。`fadeIn`正在使用动画。当您将鼠标悬停在链接上时，动画完成您体验“故障”的速度比动画快。

为确保您不会与之前正在运行的动画发生冲突，您必须停止任何当前和任何排队的动画。

代替

```
$("div#images").children("img#" + ID).fadeIn("slow"); 
```

和

```
$("div#images").children("img#" + ID).stop(true, true).fadeIn("slow"); 
```

### [演示](http://jsfiddle.net/FranWahl/7Wp9z/5/)- 在开始下一个之前清除动画队列

> 如何设置加载页面时显示的默认图像？

我添加了代码以显示默认图像。在使用默认图像时第一次将鼠标悬停在菜单项上时，防止出现任何奇怪的视觉效果。代码检查我们是否显示默认图像，如果显示，它将进一步检查当前菜单的图像是否为默认图像。

如果是，它不会隐藏它，因为它无论如何都会显示它，但如果不是，它会在淡入新图像之前隐藏默认图像。

希望这是有道理的，请参阅下面的完整代码和 DEMO。

```
// Indicates if default image is shown
var showingDefaultImage = true;

var $images = $("div#images");
var $defaultImage = $images.children("img#tacos");

// Display a default image
$defaultImage.show();

$("div#links > a").hover(

function() {
    var ID = $(this).data("content");
    var $image = $images.children("img#" + ID);

    if (showingDefaultImage) {
        showingDefaultImage = false;
        if (!$image.is($defaultImage)) {
            $defaultImage.hide();
        }
    }

    $image.stop(true, true).fadeIn("slow");
}, function() {
    $images.children().hide();
});​ 
```

### [演示](http://jsfiddle.net/FranWahl/b7jQ6/)- 显示默认图像

上面 DEMO 中的代码也通过缓存选择器进行了一些优化。

> 是否可以留下最后一个悬停标签中的最新图像？（而不是隐藏图像并留空）

如果我理解正确，您不想在用鼠标离开菜单时隐藏图像，而是想让您上次悬停在菜单上的图像保持可见。

为此，您删除了的第二个功能，`hover`并且不再需要它，您现在可以附加该`mouseenter`事件。

```
var $images = $("div#images");
var $currentImage = $images.children("img#tacos");

$currentImage .show();

$("div#links > a").mouseenter(function() {
    var ID = $(this).data("content");
    var $image = $images.children("img#" + ID);

    if (!$image.is($currentImage)) {
        $currentImage.hide();
    }

    $currentImage = $image;
    $image.stop(true, true).fadeIn("slow");
}); 
```

### [演示](http://jsfiddle.net/FranWahl/eHdZt/)- 在 mouseenter 上淡入图像并使最后一张图像可见

上面的代码包括用于优化的选择器缓存以及确保当新悬停的菜单项与上一个悬停的菜单项相同时不会发生“闪烁”的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T01:43:43.000

见[http://jsfiddle.net/7Wp9z/7/](http://jsfiddle.net/7Wp9z/7/)

正如 François Wahl 所说，用于`stop`停止动画。`data-content`但我认为您可以使用索引，而不是使用和 ID：

HTML：

```
<div id="links">    
    <a href="example.htm" class="large magenta awesome">Cheeseburger »</a>
    <a href="example.htm" class="large blue awesome">Tacos »</a>
    <a href="example.htm" class="large red awesome">Salads »</a>
    <a href="example.htm" class="large orange awesome">Bread Sticks »</a>
    <a href="example.htm" class="large yellow awesome">Dessert »</a>
</div>

<div id="images">
    <img src="http://media.smashingmagazine.com/wp-content/uploads/images/brand-ux/cb.jpg">
    <img src="http://adventuresoflittlemiss.files.wordpress.com/2012/07/tacos.jpg">
    <img src="http://www.growingappetite.com/wp-content/uploads/2011/05/chicken-salad1.jpg">
    <img src="http://afflictor.com/wp-content/uploads/2010/10/breadsticks1.jpg">
    <img src="http://1.bp.blogspot.com/-IaURSrV70LI/T4YzPubl9EI/AAAAAAAAGSg/AEdd-eLuJUk/s1600/Cooking+Weekly.jpg">
</div> 
```

JavaScript：

```
$("div#links > a").hover(
    function(){
        $("#images>img")
            .hide()
            .stop(true,true)
            .eq($(this).index()).fadeIn("slow");
    },
    function() {
        $("#images>img").hide();
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T01:34:07.667

您是否尝试过不指定哪些孩子应该隐藏在鼠标移出部分？

```
$("div#links > a").hover(
    function(){
        var ID = $(this).data("content");
        $("div#images").children("img#" + ID).fadeIn("slow");
    },
    function() {
        $("div#images").children().hide();
    }
);​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T01:34:37.883

故障可能是因为图像尚未加载，您应该查找一些预加载技术。您将始终必须等待相关图像被加载，然后才能显示它们。

但是您可以通过指示图像正在加载或在图像加载之前不激活悬停效果来增强用户体验。

我可能会选择最后一个案例，因为我很懒，但这只是我。

一种简单的预加载技术是声明多个具有不同背景图像的 id，然后使用 javascript 动态更改 id 并显示图像。

```
$("#id-of-element").attr('id','preloaded-bg-div'); 
```

# javascript - 在 Chrome 中跨窗口显示文本选择

> ID：12549044
> 
> 赞同：0
> 
> 时间：2012-09-23T01:30:51.553
> 
> 标签：javascript, css, google-chrome, selection

所以我正在使用一个函数来选择`<div>`. 它可以工作，但我不喜欢它在 Google Chrome 中的显示方式。[你可以在这里](http://www.dstrout.net/pub/selectdiv.htm)看到我的作品。单击按钮并选择文本中的文本`<div>`，但在 Chrome 中，选择一直延伸到窗口的右侧，这并不好。不过，它就像我在 Firefox 和 IE 中想要的那样工作。

`<div>`当然，它的宽度为 200px 。我也尝试过`max-width`声明，但这也没有任何好处。有什么办法可以防止选择以这种方式显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:34:41.253

尝试将 CSS 规则添加`display:inline-block`到您的 div：

```
#result {
    width: 200px;
    font-family: Arial;
    font-size: 10pt;
    text-align: center;
    padding: 8px;
    border: 2px solid black;
    display:inline-block;
}
​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Bjs4x/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T01:40:04.233

您可以使用`selectNodeContents()`代替：http `selectNode()`: [//jsfiddle.net/6XUJR/](http://jsfiddle.net/6XUJR/)

# c - 遍历C中字符串的每个可能值？

> ID：12549045
> 
> 赞同：-3
> 
> 时间：2012-09-23T01:30:59.160
> 
> 标签：c

如何遍历c中字符串的每个可能值？这**包括**像“&”、“%”或“/”这样的字符。例如，一个 3 字符的字符串可以是“aaa”、“a$f”、“acg”等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:40:58.230

如果您预先知道限制，并且限制很低，则可以使用嵌套循环。例如，for thee-character 字符串使用三个嵌套循环，如下所示：

```
char str[4] = "---";
for (str[0] = ' ' ; str[0] <= 'z' ; str[0]++) {
    for (str[1] = ' ' ; str[1] <= 'z' ; str[1]++) {
        for (str[2] = ' ' ; str[2] <= 'z' ; str[2]++) {
            printf("%s\n", str);
        }
    }
} 
```

如果您不知道预先的长度，则需要使用递归。这个想法是在每个级别的递归调用中实现一个循环，当您处于所需的深度时终止。

```
char *str = new malloc(n+1);
str[n] = '\0';
all_strings(str, n-1);

void all_strings(char *str, int n) {
    if (n == -1) {
        printf("%s\n", str);
    } else {
        for (str[n] = ' ' ; str[n] <= 'z' ; str[n]++) {
            all_strings(str, n-1);
        }
    }
} 
```

# javascript - 我的玉怎么了？

> ID：12549051
> 
> 赞同：0
> 
> 时间：2012-09-23T01:32:07.363
> 
> 标签：javascript, node.js, pug

内容：file.js

```
var jade;

jade = require('jade');

console.log(jade.render("!!! 5")); 
```

在外壳上：

```
$ node file.js 
```

产生此错误：

```
~/Documents/projects/mine/nodetest/jade.js:207
  if (options.cache && !options.filename) {
             ^ 
```

我正在使用最新下载的翡翠，通过以下方式安装：

```
$ npm install jade 
```

在我项目的根目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:47:52.257

`jade.render`期望在模板字符串之后有一个回调，它将传递结果：

```
jade.render('!!! 5', function (err, html) {
    console.log(html); // <!DOCTYPE html>
}); 
```

[来源](https://github.com/visionmedia/jade/blob/0.27.4/lib/jade.js#L200-220)。

# matlab - 我们如何使用 Matlab 在以下模型中生成 kappa 和 delta？

> ID：12549056
> 
> 赞同：6
> 
> 时间：2012-09-23T01:33:07.543
> 
> 标签：matlab, geospatial, noise, temporal, stochastic-process

我有一个以下随机模型，描述了一个过程（Y）在空间和时间上的演化。Ds 和 Dt 是空间域（具有 x 和 y 轴的 2D）和时间域（具有 t 轴的 1D）。该模型通常称为[混合效应模型](http://www.stat.missouri.edu/~wikle/ISR_hier_env_v2.pdf)或变异分量模型

![在此处输入图像描述](../Images/9b6b5812080b10f3162e62423c5b34fe.png)

我目前正在开发 Y 如下：

```
%# Time parameters
T=1:1:20; % input
nT=numel(T);

%# Grid and model parameters
nRow=100;
nCol=100;

[Grid.Nx,Grid.Ny,Grid.Nt] = meshgrid(1:1:nCol,1:1:nRow,T);

xPower=0.1;
tPower=1;
noisePower=1;
detConstant=1;

deterministic_mu = detConstant.*(((Grid.Nt).^tPower)./((Grid.Nx).^xPower));

beta_s = randn(nRow,nCol); % mean-zero random effect representing location specific variability common to all times

gammaTemp = randn(nT,1);

for t = 1:nT
    gamma_t(:,:,t) = repmat(gammaTemp(t),nRow,nCol); % mean-zero random effect representing time specific variability common to all locations
end

var=0.1;% noise has variance = 0.1
for t=1:nT
    kappa_st(:,:,t) = sqrt(var)*randn(nRow,nCol);
end

for t=1:nT
    Y(:,:,t) = deterministic_mu(:,:,t) + beta_s + gamma_t(:,:,t) + kappa_st(:,:,t);
end 
```

**我的问题是：**

1.  如何在 Y 的表达式中产生 delta 以及 kappa 和 delta 的差异？
2.  通过使用 Matlab 的一些说明帮助解释我是否正确生成 Y？

如果您需要更多信息/解释，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:02:55.590

首先，我重写了您的代码以使其更有效率。我看到您为 生成线性间隔网格`x`，`y`并`t`为此网格中的所有点执行计算。这种方法对可达到的最大网格分辨率有严格的限制，因为如果分辨率提高，3D 网格（以及用它定义的所有变量）会消耗大量内存。如果您正在实现的模型的复杂性和大小会增加（它经常如此），我建议您将这一切都投入到一个接受矩阵/向量输入的函数中`s`，`t`这在这方面会更加灵活——以这种方式处理原本无法放入内存的数据“块”会容易得多。

然后，我生成了这个`delta_st`术语，`rand`而不是`randn`因为噪声应该是“白色”。现在我对最后一个*非常*不确定，而且我没有时间阅读你链接到的论文——你能告诉我在哪些页面上我可以找到相关的部分`delta_st`吗？

现在，代码：

```
%# Time parameters
T  = 1:1:20; % input
nT = numel(T);

%# Grid and model parameters
nRow = 100;
nCol = 100;

% noise has variance = 0.1
var = 0.1;

xPower = 0.1;
tPower = 1;
noisePower  = 1;
detConstant = 1;

[Grid.Nx,Grid.Ny,Grid.Nt] = meshgrid(1:nCol,1:nRow,T);

% deterministic mean
deterministic_mu = detConstant .* Grid.Nt.^tPower ./ Grid.Nx.^xPower;

% mean-zero random effect representing location specific 
% variability common to all times
beta_s = repmat(randn(nRow,nCol), [1 1 nT]);

% mean-zero random effect representing time specific 
% variability common to all locations
gamma_t = bsxfun(@times, ones(nRow,nCol,nT), randn(1, 1, nT));

% mean zero random effect capturing the spatio-temporal 
% interaction not found in the larger-scale deterministic mu 
kappa_st = sqrt(var)*randn(nRow,nCol,nT);

% mean zero random effect representing the micro-scale
% spatio-temporal variability that is modelled by white
% noise (i.i.d. at different time steps) in Ds·Dt
delta_st = noisePower * (rand(nRow,nCol,nT)-0.5);

% Final result: 
Y = deterministic_mu + beta_s + gamma_t + kappa_st + delta_st; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T08:50:52.837

您的实现对 beta、gamma 和 kappa 进行采样，就好像它们是白色的一样（例如，它们在每个 (x,y,t) 处的值是独立的）。这些术语的描述表明并非如此。看起来 delta 应该捕获白噪声，而其他项捕获它们各自域上的相关性。例如，gamma(t_1) 和 gamma(t_1+1) 之间存在非零相关性。

如果您希望将 gamma 建模为具有方差 var_g 和 gamma(t) 和 gamma(t+1) 之间的相关 cor_g 的平稳高斯马尔可夫过程，您可以使用类似

```
gamma_t = nan( nT, 1 );
gamma_t(1) = sqrt(var_g)*randn();
K_g = cor_g/var_g;
K_w = sqrt( (1-K_g^2)*var_g );
for t = 2:nT,
   gamma_t(t) = K_g*gamma_t(t-1) + K_w*randn();
end
gamma_t = reshape( gamma_t, [ 1 1 nT ] ); 
```

我在上述代码中用于增益 K_g 和 K_w 的公式（以及 gamma_t(1) 的初始化）产生了所需的平稳方差 \sigma^2_0 和一步协方差 \sigma^2_1：

![增益公式，并证明方差和协方差符合要求](../Images/486b8fcfc5c22f7779b6eac54946f339.png)

请注意，上面的实现假设稍后您将使用 bsxfun 为您执行“repmat”对术语求和：

```
Y = bsxfun( @plus, deterministic_mu + kappa_st + delta_st, beta_s );
Y = bsxfun( @plus, Y, gamma_t ); 
```

请注意，我没有测试过上面的代码，因此您应该通过采样确认它确实会产生相邻样本之间指定方差和协方差的零噪声过程。对 beta 进行采样，同样的过程可以扩展到二维，但原理基本相同。我怀疑 kappa 应该被类似地建模为马尔可夫高斯过程，但在所有三个维度上并具有较低的方差来表示未在 mu、beta 和 gamma 中捕获的高阶效应。

Delta 应该是零均值静止白噪声。假设它是高斯方差，noisePower 将使用它对其进行采样

```
delta_st = sqrt(noisePower)*randn( [ nRows nCols nT ] ); 
```

# pointers - 内存泄漏在哪里？

> ID：12549060
> 
> 赞同：1
> 
> 时间：2012-09-23T01:34:09.580
> 
> 标签：pointers, memory-leaks, pointer-arithmetic

所以我正在学习指针并且很难在这里识别内存泄漏。我承认我以前从未使用过 malloc() 并且是指针算术的新手。提前致谢。

```
 /*filename: p3.c */
#include <stdio.h>
#include <stdlib.h>

int main()
{
        char *buffer;
        char *p;
        int n;

        /* allocate 10 bytes */
        buffer = (char *) malloc(10);

        p = buffer;
        for (n=0; n<=10; n++)
                *p++ = '*';

        p = buffer;
        for (n=0; n <=10; n++)
                printf("%c ", *p++);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T01:37:40.823

规则相当简单，每个 malloc 都必须有一个 free。如果你的 malloc 比 frees 多，那么你忘记了释放内存，所以你有内存泄漏。如果您有比 malloc 更多的空闲空间，那么您正在尝试取消分配已经被取消分配的内存，这不是您想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T01:37:28.410

当您不再需要缓冲区时，您只需使用该函数**释放缓冲区：**`free()`

```
 /* ... */
    free( buffer );
    return 0;
} 
```

**当内存不再使用时，**只需记住**平衡**每次调用`malloc`与调用。`free`

 **对`p`变量的操作不会影响`buffer`. 它们是指向**同一区域**的两个指针（在开始时），但它们仍然是**两个不同的变量**。所以递增`p`不会递增`buffer`。
所以指针操作没有错`p`，除了你**写的越界**，正如*丹尼尔费舍尔*在你的问题评论中所说的那样。

另请注意，您还应该在通话后始终**检查`NULL`**,可能会失败。现在很少见了，但是如果失败了，你的程序可能会崩溃，因为你会取消引用一个指针：`malloc``malloc``NULL`

```
buffer = malloc( 10 );

if( buffer == NULL )
{
    /* Error management - Do not use buffer */
} 
```

`char *`不需要强制转换为，`malloc`除非您正在处理 C++。在 C 中，将 a 分配`void pointer`给另一个指针类型是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T01:38:02.483

你打电话`malloc`，从不打电话`free`。当然会泄漏。

原则上，您从函数族请求的每个分配都`alloc`应该在`free`您完成它们后立即进行编辑。

您在程序终止之前继续使用的缓冲区在*形式上*是泄漏，但只要您分配了明确定义的数量，就不是问题。这包括你在这里做的事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T01:38:15.273

你想要的不是 n<=10，而是 n<10。**

# command-line - 输入重定向后程序如何读取控制台输入？

> ID：12549067
> 
> 赞同：1
> 
> 时间：2012-09-23T01:35:57.957
> 
> 标签：command-line, io-redirection

我一直觉得命令行`mysql`实用程序有点令人惊讶，因为您可以这样做：

```
gzcat dumpfile.sql.gz | mysql -u <user> -p <options> 
```

并`mysql`会提示您输入密码。现在，`stdin`in`mysql`被重定向了——人们会期望它从转储文件中读取密码。相反，它以某种方式绕过`stdin`并直接前往终端。`ssh`做同样的事情。

我怀疑这是某种魔法`/dev/tty`，`/dev/pty`但我希望能对这种明显的魔法做出适当的解释:)（以及为什么这些程序可以在任何平台上做到这一点，甚至是 Windows）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T01:42:13.717

正如您所猜测的，它正在使用`/dev/tty`，它是这样指定的：

> 在每个进程中，[`/dev/tty`是与该进程的进程组相关联的控制终端的同义词，如果有的话。无论输出如何重定向，它对于希望确保向终端写入消息或从终端读取数据的程序或 shell 过程很有用。它也可以用于要求输出文件名的程序，当需要键入输出并且查找当前正在使用的终端很烦人时。

除此之外没有真正的“魔法”。

[[链接](http://pubs.opengroup.org/onlinepubs/7908799/xbd/files.html)]

# android - 从哪里开始服务？

> ID：12549070
> 
> 赞同：0
> 
> 时间：2012-09-23T01:36:36.310
> 
> 标签：android

我正在编写一个小应用程序以从 url 下载歌曲，然后使用媒体播放器在服务中播放它。我已经拥有了我需要工作的一切。但是，当我开始播放歌曲时，停止和暂停按钮不起作用，如果我再次点击播放，则开始播放歌曲的第二份副本。我很确定我知道出了什么问题，我只是不知道如何解决它。

```
public class Player extends IntentService {
    public Player() {
        super("Player");
    }
    MediaPlayer mp;

    @Override
    protected void onHandleIntent(Intent intent) {
        Bundle extras = intent.getExtras();
        Uri uri = intent.getData();
        mp = MediaPlayer.create(this, uri);

        if(extras != null)
        {
            if(extras.getString("action").equals("play"))
            {
                mp.start();
            }
            else if(extras.getString("action").equals("pause"))
            {
                mp.pause();
            }
            else if(extras.getString("action").equals("stop"))
            {
                if (mp != null) {
                    mp.stop();
                    mp.release();
                }
            }
        }
    }
} 
```

我的一个按钮的代码示例：

```
 play.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            intent.putExtra("action", "play");
            startService(intent);
        }}); 
```

我相信每次我点击一个按钮并发送我的意图时，它都会创建我的媒体播放器的另一个实例，所以它不会暂停或播放，因为那个副本没有播放，而点击播放只会产生另一个副本。我试图设置它，以便我第一次并且只有第一次点击播放时创建播放器，但这没有奏效。我还尝试进行另一个操作，例如“创建”并在主要活动第一次下载文件时发送它，但这也不起作用。两者都导致它崩溃。也许我做错了；很抱歉，我没有这些代码副本或 LogCat。有人对我如何只创建一次播放器有任何建议吗？或者将文件的 uri 传递给 onCreate？

编辑：自从发布此消息后，我再次尝试更改播放按钮响应。就是现在：

```
protected void onHandleIntent(Intent intent) {
    Bundle extras = intent.getExtras();

    if(extras != null)
    {
        if(extras.getString("action").equals("play"))
        {
            if (mp != null) {
                mp.start();
            }
            else {
                Uri uri = intent.getData();
                    mp = MediaPlayer.create(this, uri);                 
                mp.start();
            }
        } 
```

我已经使用日志调用来确定我崩溃的地方。我的 LogCat 的 .create 调用失败了：

09-22 22:58:24.566：E/AndroidRuntime(1446)：致命异常：IntentService[Player] 09-22 22:58:24.566：E/AndroidRuntime(1446)：java.lang.NullPointerException 09-22 22:58 :24.566: E/AndroidRuntime(1446): 在 android.media.MediaPlayer.setDataSource(MediaPlayer.java:868) 09-22 22:58:24.566: E/AndroidRuntime(1446): 在 android.media.MediaPlayer.setDataSource( MediaPlayer.java:854) 09-22 22:58:24.566: E/AndroidRuntime(1446): 在 android.media.MediaPlayer.create(MediaPlayer.java:788) 09-22 22:58:24.566: E/AndroidRuntime( 1446): 在 android.media.MediaPlayer.create(MediaPlayer.java:769) 09-22 22:58:24.566: E/AndroidRuntime(1446): 在 com.example.mp3player.Player.onHandleIntent(Player.java:36 ) 09-22 22:58:24.566: E/AndroidRuntime(1446): 在 android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65) 09-22 22:58:24.566:E/AndroidRuntime(1446): 在 android.os.Handler.dispatchMessage(Handler.java:99) 09-22 22:58:24.566: E/AndroidRuntime(1446): 在 android.os.Looper.loop(Looper.java :137) 09-22 22:58:24.566: E/AndroidRuntime(1446): 在 android.os.HandlerThread.run(HandlerThread.java:60)

任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:15:04.143

虽然 Squonk 的建议确实有助于在创建播放器时删除初始 NPE，但我仍然遇到同样的问题。它将 mp 视为局部变量，因此更改不会持续存在。我通过将`public static`修饰符添加到我的 mp 变量声明中解决了这个问题。现在所有出现的 mp 都是同一个变量，并且变化持续存在！

# model-view-controller - 我应该从这个模型类中提取功能到表单类中吗？（活动记录模式）

> ID：12549071
> 
> 赞同：4
> 
> 时间：2012-09-23T01:36:50.150
> 
> 标签：model-view-controller, database-design, web-applications, sqlalchemy, pyramid

我正在按照 mvc 范例设计一个应用程序。我正在使用 sqlalchemy 表达式语言（不是 orm），如果有人好奇，我会使用金字塔。

因此，对于代表系统上的用户的用户类，我有几个访问器方法用于各种数据，例如 avatar_url、name、about 等。我有一个名为 getuser 的方法，它在 db(按名称或 ID），检索用户行，并将其与用户类封装。

但是，我是否必须在每次创建用户类时都进行此查找？如果用户正在查看她的控制面板并想要更改头像并发送 xhr 怎么办；必须创建一个用户对象，并在用户甚至不会使用检索到的数据时查找用户行，这不是一种浪费吗？但只是想对列的子集进行更改？我怀疑这个查找是可以忽略不计的，尽管索引是因为等待 i/o 正确？

*更一般地说，必须查询数据库并加载模型类的所有*数据以进行任何更改（即使是很小的更改）不是效率低下吗？

我在想我应该只创建一个单独的表单类（因为所做的每个更改都是通过某种表单进行的），并让特定的表单类继承它们，这些 setter 方法将在其中实现。你怎么看？

EX：类：表单 <- 类：Change_password_form <- 功能：change_usr_pass

我真的很感激有关创建适当设计的一些建议；谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T00:47:04.327

**SQLAlchemy ORM**有一些工具可以简化你的任务。看起来您必须重新发明已经存在于 ORM 层中的一些轮子：“我有一个名为 getuser 的方法，它在 db 中查找用户（按名称或 id），检索用户行，并封装它与用户类” - 这就是 ORM 所做的。

*   使用 ORM，您有一个 Session，除了其他东西之外，它还用作 ORM 对象的缓存，因此您可以避免在每个事务中多次加载相同的模型。您会发现无论如何都需要加载 User 对象来验证请求，因此根本不查询表可能不是一种选择。

*   您还可以配置一些属性为[延迟加载](http://docs.sqlalchemy.org/en/rel_0_7/orm/loading.html?highlight=lazy#sqlalchemy.orm.lazyload)，这样一些很少需要或笨重的属性只有在您访问它们时才会加载

*   您还可以将关系配置为在单个查询中快速[加载，这可以使您免于执行数百个小的单独查询。](http://docs.sqlalchemy.org/en/rel_0_7/orm/loading.html?highlight=eagerload#using-loader-strategies-lazy-loading-eager-loading)我的意思是，在您当前的设计中，以下代码将启动多少个查询：

    ```
    for user in get_all_users():
        print user.get_avatar_uri()
        print user.get_name()
        print user.get_about() 
    ```

从您的描述看来，它可能需要 1 + (num_users*3) 次查询。使用 SQLAlchemy ORM，您可以在单个查询中加载所有内容。

结论是：通过主键从数据库中获取单个对象是一种相当便宜的操作，除非您正在构建 facebook 大小的东西，否则您不应该担心这一点。您应该担心的是进行数百个小的单独查询，而一个较大的查询就足够了。这是 SQLAlchemy ORM 非常非常好的领域。

现在，关于“必须创建一个用户对象，并在用户甚至不使用检索到的数据时查找用户行，这难道不是一种浪费；而只是想对列的子集进行更改”-我理解你正在考虑类似的事情

```
class ChangePasswordForm(...):

    def _change_password(self, user_id, new_password):
         session.execute("UPDATE users ...", user_id, new_password)

    def save(self, request):
         self._change_password(request['user_id'], request['password']) 
```

相对

```
class ChangePasswordForm(...):

    def save(self, request):
         user = getuser(request['user_id'])
         user.change_password(request['password']) 
```

前一个示例将只发出一个查询，后者必须发出一个 SELECT 并构建用户对象，然后发出一个 UPDATE。后者可能看起来“效率高出两倍”，但在实际应用中，差异*可能可以*忽略不计。此外，您通常需要从数据库中获取对象，或者进行验证（新密码不能与旧密码相同）、权限检查（用户 Molly 是否允许编辑照片 #12343 的描述？）或记录。

如果您认为执行额外查询的区别很重要（数百万用户不断编辑他们的个人资料图片），那么您可能需要进行一些分析并查看瓶颈在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:05:14.863

阅读[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)，在回答您的问题时特别注意**S。**

创建一个类来执行用户存在检查，并将其**注入**到任何**需要**该功能的类中。

另外，还需要创建一个数据持久化类来存储用户的数据，这样就不用每次都查询数据库了。

# linux - 如何更改列的顺序并连接 csv 文件中的某些列？

> ID：12549080
> 
> 赞同：1
> 
> 时间：2012-09-23T01:38:05.533
> 
> 标签：linux, csv, concatenation

我一直在尝试解决这个问题，但我有一个包含 13 列的 csv 文件。我想连接第 1、2 和 3 列（输出为“第 3 列，第 1 列第 2 列”）。然后，我希望将列组织为 4,7，（新连接列），6,9,10,11,12,13,5,8。我找到了一种使用 python 来组织列的方法，但我不知道如何连接三个字段并将其输入到新的 csv 文件中。有谁知道如何做到这一点？我真的不在乎它是在 bash 还是 python 中，或者其他任何东西。我对 Linux 脚本相当陌生，所以我不偏爱任何特定语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:55:24.563

一种使用方式`GNU awk`：

```
awk 'BEGIN { OFS=FS=","; X = "\"" } { print $4, $7, X$3, $1 $2X $6, $9, $10, $11, $12, $13, $5, $8 }' file.txt 
```

# google-apps-script - 在处理函数中使用和修改全局变量

> ID：12549085
> 
> 赞同：3
> 
> 时间：2012-09-23T01:38:43.673
> 
> 标签：google-apps-script

大家好，

我可以在处理函数中使用全局变量，但是我不能在函数中“全局”修改它们。

在下面的代码中，第一次单击后它将显示数字 1001（处理程序读取、递增并显示正确的结果）。但是，任何进一步的点击将始终显示 1001，因此处理程序会继续读取原始 globalVar 值：它没有像我预期的那样被修改。

我能做些什么来解决这个问题？

```
var globalVar = 1000;

function testingGlobals() {
  var app = UiApp.createApplication();
  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var panel = app.createVerticalPanel().setId('panel');
  app.add(panel);
  panel.add(app.createButton(globalVar).setId("globalVar").addClickHandler(app.createServerHandler("chgGlobal").addCallbackElement(panel)));
  doc.show(app)
}

function chgGlobal(e) {
  var app = UiApp.createApplication();
  globalVar++;
  app.getElementById("globalVar").setText(globalVar);
  return app;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T07:20:01.233

您不能以这种方式增加全局变量，因为每次执行处理程序时，都会初始化全局变量然后对其进行操作。您可以使用隐藏的表单域来保存您可以在处理程序中更改的变量，并且只要应用程序打开，它将是持久的。

例如

```
function testingGlobals() {
  var app = UiApp.createApplication();
  var doc = SpreadsheetApp.getActiveSpreadsheet();
  var panel = app.createVerticalPanel().setId('panel');
  var myVar = app.createHidden().setValue('0').setName('myVar').setId('myVar');
  panel.add(myVar);
  app.add(panel);
  panel.add(app.createButton('0').setId("globalVar").addClickHandler(app.createServerHandler("chgGlobal").addCallbackElement(panel)));
  doc.show(app)
}

function chgGlobal(e) {
  var app = UiApp.createApplication();
  gloabalVar = parseInt(e.parameter.myVar);
  gloabalVar ++;
  app.getElementById('myVar').setValue(gloabalVar.toString());
  app.getElementById("globalVar").setText(gloabalVar);
  return app;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:21:15.403

您可以将数据保存在 CacheService（快速但不保证）或 ScriptProperties 或 ScriptDb（慢一点，但可以保存）而不是全局属性中。特别是 ScriptDb 可以保存对象，而无需使用字符串来存储它们。

# oauth-2.0 - 什么原因导致间歇性无效授权

> ID：12549088
> 
> 赞同：1
> 
> 时间：2012-09-23T01:39:23.677
> 
> 标签：oauth-2.0, google-drive-api, google-authentication

我得到以下

```
{
  "error" : "invalid_grant"
}
    at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)
    at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
    at com.google.api.client.googleapis.auth.oauth2.GoogleRefreshTokenRequest.execute(GoogleRefreshTokenRequest.java:130) 
```

这仅发生在我的生产 Appengine 实例中（即不在开发服务器上），并且仅发生在我用于测试开发和生产的电子邮件地址中。

我的工作假设是，这与用户在开发服务器上被授予刷新令牌有关，这会以某种方式干扰产品服务器上存储的刷新令牌。

任何人都可以确认这个解释，是否有关于如何处理这个异常的最佳实践？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T07:16:05.767

目前只有 Google 授予的最后 25 个刷新令牌有效。我们基本上保留了一个大小为 25 的生成刷新令牌的队列。

这意味着在您的测试帐户上，如果您碰巧生成了超过 25 个刷新令牌，那么旧的令牌将开始被撤销。

也许这就是这里发生的事情，所以我想指出这一点，可能是您使用测试帐户在开发服务器上生成了超过 25 个刷新令牌，并且 prod 中的令牌被丢弃（因为有 25 个较新的令牌）。

这是关于我们的身份验证服务器没有记录的内容，因此请注意它可能随时更改。

通常，当发生此异常时，您需要让用户通过新的 OAuth 2.0 流程才能获得新的刷新令牌。

# list - 如何在 Chrome 或 Firefox 中编写 URL 选项卡定位器？

> ID：12549089
> 
> 赞同：1
> 
> 时间：2012-09-23T01:39:22.747
> 
> 标签：list, firefox, google-chrome, search, tabs

我想创建一个扩展，当链接悬停或右键单击时，可以搜索打开到网站的所有选项卡，显示它们的列表并允许您选择其中一个跳转到，或创建一个新的该网站的选项卡（如果不存在）。

可以在 Firefox 或 Chrome 中使用 Javascript 吗？列出所有选项卡按钮是其中的一部分，但仅显示页面标题，而不是包含 URL。

# python - NameError：未定义全局名称“numKilos”

> ID：12549098
> 
> 赞同：0
> 
> 时间：2012-09-23T01:40:47.440
> 
> 标签：python, global-variables, nameerror

```
def inputKilos():

    while True:
        numKilos = float(raw_input("Enter a number of Kilometers.  Enter 0 to end program. "))

        if numKilos == 0:
            break 
        else: 
            convert_kilos(numKilos)

    return

def convert_kilos(numKilos):
    numMiles = numKilos * 0.6214
    print_output()
    return

def print_output():
    print numKilos, "kilometers eqauls", numMiles, "miles."

def main():
    inputKilos()

main() 
```

当我尝试运行程序时，它显示“ **NameError: global name 'numKilos' is not defined** ” 我不知道为什么它说 numKilos 没有定义。numKilos 等于用户输入的数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T01:45:39.227

`numKilos`是 和 中的局部变量`inputKilos`，`convert_kilos`但不是`print_output`。局部变量只能从该函数内访问。

要传递变量，请使用`return <value>`从函数返回一个值，然后通过使用收集它`result = function()`，或者通过将值传递给函数来执行相反的操作（就像您使用`convert_kilos`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:09:27.280

Here's a refactored version:

```
MILES_PER_KM = 0.621371

def get_float(prompt=''):
    while True:
        try:
            return float(raw_input(prompt))
        except ValueError:
            pass

def main():
    while True:
        kms = get_float('Enter a distance in kms (or 0 to exit): ')
        if kms:
            miles = MILES_PER_KM * kms
            print '  {} kilometers is {} miles.'.format(kms, miles)
        else:
            break

if __name__=='__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T02:24:49.903

这些是局部变量而不是全局变量。

你可以试试这个：

```
#!/usr/bin/python

def inputKilos():
    while True:
        numKilos = float(raw_input("Enter a number of Kilometers.  Enter 0 to end program. "))
        if numKilos == 0:
            break 
        else: 
            miles = convert_kilos(numKilos)
            print_output(numKilos,miles)
    return

def convert_kilos(numKilos):
    numMiles = numKilos * 0.6214
    return numMiles

def print_output(numKilos,numMiles):
    print numKilos, "kilometers eqauls", numMiles, "miles."

inputKilos() 
```

或使用全局关键字：

```
#!/usr/bin/python

numKilos=0
numMiles=0

def inputKilos():
    while True:
        global numKilos
        numKilos = float(raw_input("Enter a number of Kilometers.  Enter 0 to end program. "))
        if numKilos == 0:
            break 
        else: 
            convert_kilos(numKilos)
            print_output

def convert_kilos(numKilos):
    global numKilos
    global numMiles
    numMiles = numKilos * 0.6214    

def print_output:
    global numKilos
    global numMiles
    print numKilos, "kilometers eqauls", numMiles, "miles."

inputKilos() 
```

# ios - 如果由 Xcode 4.5 和 iPhone 5 的 Interface Builder 构建，如何使视图中的控件不重叠？

> ID：12549106
> 
> 赞同：5
> 
> 时间：2012-09-23T01:42:31.747
> 
> 标签：ios, xcode, interface-builder, iphone-5

我正在使用 Xcode 4.5 和 iPhone 4 和 5 模拟器，Interface Builder 会在屏幕的上半部分添加一个带有顶部约束的 UIButton，并在屏幕的下半部分添加一个带有底部约束的 UIButton。

它在 iPhone 5 模拟器上运行良好，但在 iPhone 4 模拟器上，按钮可能重叠，或者底部按钮甚至可能位于顶部按钮上方。

我认为这是由于约束，例如底部按钮“必须距离底部边距 250 点”。我无法删除约束，如果将其更改为“250 点或更少”，它将不起作用，如果将其更改为“250 点或更多”，它也将不起作用。

有没有办法：

1）让它没有约束，但只是绝对x和y的位置？（或者说过去的春天怎么样，让 iPhone 5 的一切都间隔得更远了？）

2) 将NIB 设置为仅适用于iPhone 4 和4S 的NIB，以便该应用程序在iPhone 4 和4S 上运行良好，而在iPhone 5 上只是“黑边”。

3) 让它在 iPhone 5 上运行良好并且在 iPhone 4 上运行良好？

如果您只知道上述 (1)、(2) 或 (3) 的解决方案，请无论如何都给出解决方案，因为它仍然是过渡期的可行解决方案。

实际上很容易重现：使用 Xcode 4.5 创建一个简单的 Single View 应用程序，然后将一个按钮拖到屏幕中心点上方，另一个按钮拖到屏幕中心点下方。然后在模拟器上运行它。在 iPhone 5 上，它是：

![在此处输入图像描述](../Images/4b6c19a48735b2735b32e27727eb4356.png)

现在停止应用程序，并将模拟器中的设备更改为 iPhone 4S（3.5 英寸 Retina）。如果您不先停止应用程序，模拟器可能会崩溃。现在再次运行应用程序，按钮将重叠：

![在此处输入图像描述](../Images/ac691d07866d27ab9ce4b705286cf45c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T14:02:56.597

我遇到了同样的问题，这是由于自动调整大小设置错误。要更改自动调整大小，请单击界面构建器中的控件，转到尺寸检查器。

请注意自动调整大小网格中的粗体红色 I，它们控制屏幕大小调整时的位置（例如从 iPhone 3GS 转到 iPhone 5 时）。

![从左下角自动调整大小](../Images/6091de9da44a135a8045e4efabb5022b.png)

我认为如果你让你的自动调整看起来像这样，它会最适合你：

![从左上角自动调整大小](../Images/c416d63e48a525afa517830c2be59538.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T14:42:23.890

选择您的按钮并为它们添加“垂直间距”约束。并为顶部/底部边距设置“小于”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:45:24.470

1.  我不确定，因为我没有使用基于约束的布局（并且在我们放弃对 iOS 5 的支持之前不会使用）。传统的基于 NIB 的自动调整大小将执行绝对坐标。
2.  据我所知，你不能只在一个屏幕上这样做——你可以通过删除`Default-568h@2x.png`.
3.  我会选择程序化布局，或者如果你想要简单的方法（维护起来会很痛苦），不同的笔尖适用于不同的屏幕尺寸。请注意，您还需要正确处理通话状态栏...

**编辑：**将两个按钮放在容器视图中并使约束中心成为其父容器内的容器？它不会调整按钮之间的间距，但在两种设备上看起来都还可以。

# javascript - 以随机顺序将 div 动态添加到另一个 div

> ID：12549112
> 
> 赞同：0
> 
> 时间：2012-09-23T01:44:54.450
> 
> 标签：javascript, jquery, html

我正在尝试打乱关键字列表并将它们放入文本幻灯片中的单个 div 中。

这是我的脚本：

```
var keys = ["dancing.", "computers.", "food.", "movies.", "singing.", "hiking.", "math.", "music.", "reading.", "cars.", "laughing.", "animals.", "cupcakes.", "shopping.", "soccer.", "Europe.", "photography.", "volunteering.", "outerspace.", "traveling.", "guitar.", "painting.", "children.", "boats.", "science.", "art.", "cheerleading.", "Einstein.", "teaching.", "politics.", "waterskiing.", "volleyball.", "whittling.", "volleyball.", "running.", "comedy.", "theater.", "Africa."];

keys.sort(function() { return Math.floor(Math.random()*3 -1)});

for(i = 0; i < keys.length; i++) {
    ("<div>" + keys[i] + "</div>").appendTo("slideshow");   
}

function randomize(myArray) {
  var i = myArray.length;
  if ( i == 0 ) return false;
  while ( --i ) {
     var j = Math.floor( Math.random() * ( i + 1 ) );
     var tempi = myArray[i];
     var tempj = myArray[j];
     myArray[i] = tempj;
     myArray[j] = tempi;
   }
} 
```

* * *

```
<td class="align-top">
   <div class="slideshow"></div>
</td> 
```

* * *

有任何想法吗？我还认为我的 javascript 和 jQuery 混合不好。你能帮我清理一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:53:06.147

试试这个：

```
keys.sort(function() { return Math.random() - 0.5; });

var $slideshow = $(".slideshow");
for(var i = 0; i < keys.length; i++) {
    $slideshow.append("<div>" + keys[i] + "</div>");   
} 
```

演示：http: [//jsfiddle.net/XpyYX/1/](http://jsfiddle.net/XpyYX/1/)

您的代码不起作用，因为在这一行：

```
("<div>" + keys[i] + "</div>").appendTo("slideshow"); 
```

您在 open 之前省略了`$`or `jQuery`from `(`，并且因为您想附加到`".slideshow"`（使用 a `.`）以按类选择元素。它会像这样工作：

```
$("<div>" + keys[i] + "</div>").appendTo(".slideshow"); 
```

...但是缓存对幻灯片元素的引用应该更有效。

此外，您的随机排序过于复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:59:13.320

试试这个：

```
while(keys.length > 0)
{
    var k = Math.floor(Math.random()*keys.length);
    $("<div>"+keys[k]+"</div>").appendTo('.slideshow');
    keys.slice(k, 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T02:04:50.760

你可以使用

```
var keys = ["dancing", "computers", "food", "movies", "singing", "hiking", "math", "music", "reading", "cars", "laughing", "animals", "cupcakes", "shopping", "soccer", "Europe", "photography", "volunteering", "outerspace", "traveling", "guitar", "painting", "children", "boats", "science", "art", "cheerleading", "Einstein", "teaching", "politics", "waterskiing", "volleyball", "whittling", "volleyball", "running", "comedy", "theater", "Africa"];

var el=document.getElementById('slideshow'),
    temp=document.createElement('div');
for(var i=0;i<keys.length;i++){
    var current=temp.cloneNode(false);
    current.appendChild(document.createTextNode(keys[i]+'.'));
    var position=Math.floor(Math.random()*(el.childNodes.length+1));
    if(position==el.childNodes.length){
        el.appendChild(current);
    }else{
        el.insertBefore(current,el.childNodes[position]);
    }
} 
```

**演示**：http: [//jsfiddle.net/UFdbm/](http://jsfiddle.net/UFdbm/)

**备注**：

*   您可以删除元素末尾的点并稍后添加
*   请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)。如果使用`.sort(compareFunction)`,`compareFunction(a, b)`在给定一对特定元素`a`并`b`作为其两个参数时，必须始终返回相同的值。如果返回不一致的结果，则排序顺序未定义。因此，您不能使用在对数组进行排序时返回随机值的函数。

**编辑**：

您可以使用 jQuery 稍微简化一下：

```
var keys = ["dancing", "computers", "food", "movies", "singing", "hiking", "math", "music", "reading", "cars", "laughing", "animals", "cupcakes", "shopping", "soccer", "Europe", "photography", "volunteering", "outerspace", "traveling", "guitar", "painting", "children", "boats", "science", "art", "cheerleading", "Einstein", "teaching", "politics", "waterskiing", "volleyball", "whittling", "volleyball", "running", "comedy", "theater", "Africa"];

var el=$('#slideshow');
for(var i=0;i<keys.length;i++){
    var current=$("<div>"+keys[i]+".</div>");
    var position=Math.floor(Math.random()*(el.children().length+1));
    if(position==el.children().length){
        el.append(current);
    }else{
        current.insertBefore(el.children().eq(position));
    }
} 
```

**演示**：http: [//jsfiddle.net/UFdbm/1/](http://jsfiddle.net/UFdbm/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T02:12:59.123

```
var keys = ["dancing.", "computers.", "food.", "movies.", "singing.", "hiking.", "math.", "music.", "reading.", "cars.", "laughing.", "animals.", "cupcakes.", "shopping.", "soccer.", "Europe.", "photography.", "volunteering.", "outerspace.", "traveling.", "guitar.", "painting.", "children.", "boats.", "science.", "art.", "cheerleading.", "Einstein.", "teaching.", "politics.", "waterskiing.", "volleyball.", "whittling.", "volleyball.", "running.", "comedy.", "theater.", "Africa."];

var insertionSort = function (arr) {
    var len = arr.length, i = -1, j, tmp;

    while (len--) {
        tmp = arr[++i];
        j = i;
        while (j-- && arr[j] > tmp) {
            arr[j + 1] = arr[j];
        }
        arr[j + 1] = tmp;
    }
};

insertionSort(keys);
alert(keys);
for(i = 0; i < keys.length; i++) {
    $("<div>"+keys[k]+"</div>").appendTo('.slideshow');

} 
```

试试这个

# c# - 使用枚举标志如何？

> ID：12549114
> 
> 赞同：0
> 
> 时间：2012-09-23T01:45:12.477
> 
> 标签：c#, asp.net-mvc, enums

目前我的网站有 4 个权限

```
Edit
Delete
Add
View 
```

当有人订阅其他人时，每个人都会获得查看权限。

目前，我在我的数据库中将每个列存储为一个位值。

我在想也许我应该将枚举与标志一起使用，但我有一些问题。

1.  用户将能够选择用户权限（每个人都可以查看您无法取消的权限）。现在很容易，因为我使用了一个复选框，然后将 bool 值保存到数据库中。

我的问题是将复选框转换为枚举类型的最佳方法是什么？因此，如果他们选择添加权限，我可以将其映射到正确的枚举类型。

想知道是否有更好的方法

```
PermissionTypes t;
if(add == true)
{
   t = PermissionTypes.Add
}

if(edit == true)
{
   t += PermissionTypes.Edit // not sure if you even can do this.
} 
```

我知道使用枚举标志你可以使用管道并做这样的事情

```
PermissionTypes t = PermissionTypes.Add | PermissionTypes.Edit 
```

我想知道在我的枚举中有另一种类型是一种好习惯，比如

```
AddEdit = Add | Edit 
```

我在想这会导致很多组合（想象一下，如果我有 10 个权限或类似的东西）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T01:57:49.630

枚举只是整数值。通过将枚举值设置为 2 的不同幂，您可以轻松获得所需的任何组合：

```
enum ePermissions
{

   None = 0,
   View = 1,
   Edit = 2,
   Delete = 4,
   Add = 8,
   All = 15
}

ePermissions t;
t = (ePermissions)((add?ePermissions.Add:ePermissions.None) | (delete?ePermissions.Delete:ePermissions.None) | ...); 
```

如果您想知道某个用户是否具有添加权限，请执行以下操作：

```
canAdd = (currentPermission & ePermissions.Add) != 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:57:25.263

在将一组`bool`值转换为枚举时 - 对于小型组`if`就可以了。您还可以使用`?:`运算符在较少的行中执行相同的操作：

```
[Flags]
enum Permissions 
{ 
   None = 0, 
   View = 1, 
   Edit = 2, 
   Delete = 4, 
   Add = 8, 
}

var permissions = 
  (add ? Permissions.Add : Permissions.None) |
  (edit ? Permissions.Edit : Permissions.None) |
  (delete ? Permissions.Delete : Permissions.None); 
```

如果您有大量值，则某种 Control 到 Enum 的映射可能很有用。

On `AddEdit`- 这个特殊的 on 可能没有用。您可以轻松编写`Add | Edit`. 如果代码将以一种有意义的方式使用这种组合，则可以专门命名一些权限（或 falgs）的有意义的组合。即`CanModify = Add | View`。

# jquery - 如何制作菜单

> ID：12549115
> 
> 赞同：-1
> 
> 时间：2012-09-23T01:45:18.930
> 
> 标签：jquery, css, jquery-ui

任何人都可以把一些链接如何制作一个munu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:49:45.117

这是针对此问题的一些建议。我希望你能从中得到解决方案。

请对您的列表进行以下更改。

```
<li><a href="#">About us</a></li>
<li><a href="#">Project</a></li>
<li id="red"><a href="#" id="middle">Home</a></li>
<li><a href="#">Our Team</a></li>
<li><a href="#" id="last">Contact Us</a></li> 
```

并将以下js添加到您的页面：

```
$('#navigation ul li a').click(function () {

    var currentId = $(this).attr('id');

    if (currentId == 'middle') { 
        return false; 
    } else {
        var Ltext = $('#middle').text(); 
        $('#middle').text($(this).text()); 
        $(this).text($('#last').text()); 
        $('#last').text(Ltext);
    }
}); 
```

# google-docs - 谷歌文档命令标准

> ID：12549118
> 
> 赞同：1
> 
> 时间：2012-09-23T01:46:26.620
> 
> 标签：google-docs

我在离线谷歌文档中写了一些文本，但无法同步。检查请求我发现它尝试使用包含我在离线时完成的操作的发布请求来执行同步过程。是这样的：

{'commands': [{'ibi': 14223, 's': '', 'ty': 'is'}, {'ibi': 14224, 's': '', 'ty': 'is' }, {'ibi': 14225, 's': '', 'ty': 'is'}, {'ibi': 14226, 's': '', 'ty': 'is'}, {' ibi': 14227, 's': '', 'ty': 'is'}, {'si': 14228, 'ei': 14261, 'ty': 'ds'}, {'si': 14227, 'ei': 14227, 'ty': 'ds'}, {'si': 14226, 'ei': 14226, 'ty': 'ds'}, {'si': 14225, 'ei': 14225, 'ty': 'ds'}, {'si': 14224, 'ei': 14224, 'ty': 'ds'}, {'si': 14223, 'ei': 14223, 'ty': 'ds '}, {'si':14222, 'ei': 14222, 'ty': 'ds'}, {'mts': [{'ibi': 14222, 's': '', 'ty': 'is'}, {'si' ：14222，'st'：'文本'，'ei'：14222，'sm'：{'ts_it_i'：真，'ts_st_i'：真，'ts_fgc_i'：真，'ts_bd_i'：真，'ts_fs_i'：真，'ts_un_i'：真，'ts_ff_i'：真，'ts_va_i'：真，'ts_bgc_i'：真，'ts_sc_i'：真}，'ty'：'as'}]，'ty'：'mlti' }, {'ibi': 14223, 's': ';', 'ty': 'is'}, {'si': 14223, 'ei': 14223, 'ty': 'ds'}, {' mts': [{'ibi': 14223, 's': 'ک', 'ty': 'is'}, {'si': 14223, 'st': 'text', 'ei'：14223，'sm'：{'ts_it_i'：真，'ts_st_i'：真，'ts_fgc_i'：真，'ts_bd_i'：真，'ts_fs_i'：真，'ts_un_i'：真，'ts_ff_i'：真，'ts_va_i'：真，'ts_bgc_i'：真，'ts_sc_i'：真}，'ty'：'as'}]，'ty'：'mlti'}，{'ibi'：14224，'s' : 'ه', 'ty': 'is'}, {'ibi': 14225, 's': '', 'ty': 'is'}, {'ibi': 14226, 's': 'ر ', 'ty': 'is'}, {'ibi': 14227, 's': 'ف', 'ty': 'is'}, {'ibi': 14228, 's': 'ت', 'ty': 'is'}, {'ibi': 14229, 's': 'ه', 'ty': 'is'}, {'ibi': 14230, 's': '', 'ty': 'is'}, {'ibi': 14231, 's': 'ر', 'ty': 'is'}, {'ibi': 14232, 's': 'ف', ' ty': 'is'}, {'ibi': 14233, 's': 'ت', 'ty': 'is'}, {'ibi': 14234, 's': 'ه', 'ty' : 'is'}, {'ibi': 14235, 's': '', 'ty': 'is'}, {'ibi': 14236, 's': 'ب', 'ty': 'is '}, {'ibi': 14237, 's': 'ع', 'ty': 'is'}, {'si': 14237, 'ei': 14237, 'ty': 'ds'}, { 'mts': [{'ibi': 14237, 's': 'ه', 'ty': 'is'}, {'si': 14237, 'st': 'text', 'ei': 14237, 'sm'：{'ts_it_i'：是的，'ts_st_i'：真，'ts_fgc_i'：真，'ts_bd_i'：真，'ts_fs_i'：真，'ts_un_i'：真，'ts_ff_i'：真，'ts_va_i'：真，'ts_bgc_i'：真，'ts_sc_i ': True}, 'ty': 'as'}], 'ty': 'mlti'}, {'ibi': 14238, 's': '', 'ty': 'is'}, {'ibi ': 14239, 's': 'ت', 'ty': 'is'}, {'ibi': 14240, 's': 'ع', 'ty': 'is'}, {'ibi': 14241, 's': 'د', 'ty': 'is'}, {'ibi': 14242, 's': 'ا', 'ty': 'is'}, {'ibi': 14243, 's': 'د', 'ty': 'is'}, {'ibi': 14244, 's': 'ش', 'ty': 'is'}, {'ibi': 14245,'s': 'ا', 'ty': 'is'}, {'ibi': 14246, 's': 'ن', 'ty': 'is'}, {'ibi': 14247, 's ': '', 'ty': 'is'}, {'ibi': 14248, 's': 'ا', 'ty': 'is'}, {'ibi': 14249, 's': ' ف', 'ty': 'is'}, {'ibi': 14250, 's': 'ز', 'ty': 'is'}, {'ibi': 14251, 's': 'و' , 'ty': 'is'}, {'ibi': 14252, 's': 'د', 'ty': 'is'}, {'ibi': 14253, 's': 'د', ' ty': 'is'}, {'ibi': 14254, 's': 'ه', 'ty': 'is'}, {'si': 14254, 'ei': 14254, 'ty': ' ds'}, {'si': 14253, 'ei': 14253, 'ty': 'ds'}, {'mts': [{'ibi': 14253, 's': 'ه', 'ty': 'is'}, {'si': 14253 ，'st'：'文本'，'ei'：14253，'sm'：{'ts_it_i'：真，'ts_st_i'：真，'ts_fgc_i'：真，'ts_bd_i'：真，'ts_fs_i'：真， 'ts_un_i'：真，'ts_ff_i'：真，'ts_va_i'：真，'ts_bgc_i'：真，'ts_sc_i'：真}，'ty'：'as'}]，'ty'：'mlti'}， {'ibi': 14254, 's': '', 'ty': 'is'}, {'ibi': 14255, 's': 'م', 'ty': 'is'}, {'ibi ': 14256, 's': 'ی', 'ty': 'is'}, {'ibi': 14257, 's': '\u200c', 'ty': 'is'},{'ibi': 14258, 's': 'ش', 'ty': 'is'}, {'ibi': 14259, 's': 'د', 'ty': 'is'}, {' ibi': 14260, 's': '.', 'ty': 'is'}], 'reqId': 0, 'sid': 'e0e19c9076fbda5'}

如何通过此命令恢复我的文本？它的标准是什么？有人知道可以解析它的程序吗？有谁知道 google-drive-offline 将这些命令存储在哪里，以便我可以将其拆分成小块？

# linux - 更改与模式不匹配的行的大小写

> ID：12549119
> 
> 赞同：1
> 
> 时间：2012-09-23T01:46:28.340
> 
> 标签：linux, sed, pattern-matching, substitution

我有一个这种格式的大文件：

>ABC1 | 一些文字

atgcgnntcagacagacaa

>ABC2 | 一些不同的文本

nnatgcgatgacatacanggaaga

>ABC3 | 其他一些文字

gcatgacagagacagatgacaggcacacg

我要做的就是改变不以'> Abc'开头的行的情况。看起来很简单，但我不知道为什么它不起作用：

```
sed -n '/^>/! y/atgcn/ATGCN/' sequence.fa > test2 
```

我会很感激你的帮助。

AK

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T02:02:13.573

从命令中删除`-n`开关

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T05:32:05.403

另一种做事方式：

```
sed '/^>/!s/./\u&/g' sequence.fa > test2 
```

# ruby-on-rails - 使用 User.deleted_at (timestamp) 禁止/删除用户时，如何隐藏 soft_deleted 用户？

> ID：12549120
> 
> 赞同：0
> 
> 时间：2012-09-23T01:46:47.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我目前正在使用 Rails 3 + 设计。我通过将 Time.now 设置为 User.deleted_at 来软删除用户。

这将删除用户。然后在我的 application_controller 中，我检查以摆脱任何软删除的用户。

```
 before_filter :no_deleted_users

  def no_deleted_users
    if current_user && current_user.deleted_at
      flash[:alert] = "Access Denied"
      return sign_out_and_redirect('/')
    end
  end 
```

问题是软删除的用户仍然出现在我的应用程序中。我有这样的模型：

```
User (id, deleted_at)
GroupMember(id,user_id)
Comment(id,user_id) 
```

我怎样才能使 soft_deleted 用户永远不会出现在应用程序中？我尝试在 User.rb 中这样做：

default_scope :conditions => 'users.deleted_at IS NULL'

但是当我执行 group.group_members 之类的操作时，该范围不起作用。仍然返回了带有已软删除的 user_id 记录的 Group_members。

关于如何优雅地处理删除应用程序中的 soft_deleted 用户的建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:53:03.387

您的 GroupMember 记录不会知道用户的默认范围。如果您通过组成员指定一个组具有许多用户，那么我希望 group.users 仅返回具有您的用户默认范围的现有用户。要使 group.group_members 行为符合预期，您需要删除将组关联到软删除用户的记录，或者在 GroupMember 中维护一个单独的默认范围，例如（假设 Rails 3）：

```
class GroupMember < ActiveRecord::Base
  belongs_to :user
  default_scope joins(:user).where('users.deleted_at IS NULL')

  # rest of the class
end 
```

# asp.net - 为用户提供易于打印的页面选项的最佳方式是什么？

> ID：12549121
> 
> 赞同：1
> 
> 时间：2012-09-23T01:46:48.577
> 
> 标签：asp.net, css, printing, stylesheet

我的网站在 asp.net 4 / vb 中。我试图找出最好的方法来制作一个对打印友好的页面，该页面仅在顶部包含我们的徽标和相关信息，但省略了导航栏和其他不必要的内容。我有一个点击打印图标，它在所有浏览器中都能正常工作，但它并不总是打印出适合打印机的。

我已经在这个网站上阅读了有关制作 print.css 样式表的内容，但我不确定如何编写样式表，或者是否必须将 div 属性分配给我想要省略的内容——这些帖子是以前的帖子。是否建议我省略导航链接等，如果是，最好的方法是什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:07:56.670

You can use CSS `@media` types.

```
<p> this should be part of the printed page </p>

<div id="navigation_bar_that_should_not_be printed" class="noprint">.....</div> 
```

A simplistic style sheet for the above would be:

```
@media screen
{
   /* whatever styles you have for display */
}

@media print
{
   .noprint { display: none; }
} 
```

In the above, the `<div>` with the `class="noprint"` will be displayed on screen as usual, but it will not be printed.

* * *

Update:

The "C" in `CSS` stands for "cascading" - meaning the "last" or closest instruction wins. I can only assume that the `<span class="bodycontent"...` (being the *last or closest*) is overriding the div.

ASP.Net Controls have a `CssClass` property, that's how you'd define it:

```
<asp:HyperLink NavigateUrl="http://www.google.com" runat="server" CssClass="noprint" Text="foo" /> 
```

You can even directly type `class="noprint"` (instead of using CssClass) in any ASP.Net tag - VS may complain but it should be ok:

```
<asp:HyperLink NavigateUrl="http://www.google.com" runat="server" class="noprint" Text="foo" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T02:12:49.877

您不需要实际添加其他元素来包装您不想在打印时显示的内容。`print_hide`打印样式表的最佳方法是在打印页面时对要隐藏的元素应用一个类（可能称为它）。例如：

```
<div>Text</div>
<img class='print_hide' src='some_huge_image.png'/> 
```

在您的 print.css 样式表中，您可以：

```
.print_hide {
    display: none;
} 
```

要应用样式表，请将其添加到您的`head`：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css"> 
```

仍然会`div`打印，但图像不会。

当然，这是除了您想要的任何其他样式更改之外的，例如删除背景图像、更改颜色、字体等。

将该类添加到要在打印时隐藏的东西是对现有代码的相对最小的更改。

另一种选择是为您的所有页面创建一个单独的打印机友好版本，如果您的页面非常复杂，这可能就是这样做的方法。话虽如此， print.css 的好处（除了工作量减少之外）当然是用户不需要显式选择 select `Printer friendly version`。

# flash - SWF 运行时上的 OpenLaszlo 和可访问性

> ID：12549126
> 
> 赞同：3
> 
> 时间：2012-09-23T01:48:32.807
> 
> 标签：flash, accessibility, openlaszlo

我一直在尝试在 SWF10 运行时上添加一些我的 OpenLaszlo 应用程序的辅助功能。基本上我一无所获。我用来测试的屏幕阅读器 Mac 上的“VoiceOver”拒绝注意到我的 flash 小部件，但确实注意到了其他非 OpenLaszlo 小部件。

我已将这些属性添加到 canvas 元素中，但我认为只有“可访问”属性就可以完成这项工作。

aaactive="true" aaname="MP3 Recorder" access="true" focusable="true"

并且在 laszlo javascript 嵌入代码中已将可访问性设置为“true”。

我现在在使用 OL49 编译时注意到控制台中有一条警告消息，上面写着“警告：此运行时不支持可访问性”。

这看起来很糟糕，但也不太可能。所以我做了一些研究，在这个页面 [http://labs.openlaszlo.org/trunk-nightly/docs/developers/architecture.html](http://labs.openlaszlo.org/trunk-nightly/docs/developers/architecture.html) 他们说“[可访问性]仅在 Internet 下运行 Flash Player 的 OpenLaszlo 目标中可用探险家。”

好吧，我开始在带有 IE8 的 Windows XP 上运行它，我得到了同样的错误消息。当我查看生成该警告的画布源代码时，它只是说如果将“可访问”属性设置为 true 失败。

所以我的问题是，在 SWF 运行时 OpenLaszlo（4.9 或更高版本）的可访问性状态如何？它有效吗？

贾斯汀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:38:19.147

**基于 ActionScript 3 的运行时（SWF9、SWF10、SWF11）和可访问性**
OpenLaszlo JIRA 问题*[LPP-7071 swf9：实现可访问性](http://jira.openlaszlo.org/jira/browse/LPP-7071)*已于 2008 年 9 月创建，似乎没有人对基于 ActionScript 的运行时（SWF9）的可访问性做任何工作, SWF10, ...)。

我已经检查了*[ActionScript 3 运行时 LzSprite.as](http://svn.openlaszlo.org/openlaszlo/trunk/WEB-INF/lps/lfc/kernel/swf9/LzSprite.as)*源以获得可访问性的提示，这是我发现的：

```
public function setAccessible(accessible:*) :void {
    trace('LzSprite.setAccessible not yet implemented');
} 
```

这意味着，目前不支持 SWF10 的可访问性。

Adobe 已经发布了标题*[为 Adob​​e Flex 4 可访问性的最佳实践](http://blogs.adobe.com/accessibility/files/2011/03/Flex-4-Accessibility-Best-Practices.pdf)*的文档，按照文档中描述的方法可将可访问性支持添加到 ActionScript 3 内核中，但这将是社区的努力。

[在这篇Adob​​e 博客文章](http://blogs.adobe.com/accessibility/2010/03/flash_player_and_flex_support.html)的评论部分，有一些关于 Flash Player 11 和 OS X 上 VoiceOver 的辅助功能的讨论。

**Flash 8 和 DHTML 运行时**
我在这里添加了一些关于 SWF8 和 DHTML 运行时的可访问性支持的信息，尽管您没有要求它。当其他开发人员找到此页面时，它可能对他们有用。

有关可访问性的[OpenLaszlo Wiki 页面](http://wiki.openlaszlo.org/Accessibility_Support)绝对过时，自 2006 年以来一直没有更新。我记得过去几年在可访问性支持方面所做的大部分工作都是围绕 JAWS 对 Flash 8 和 DHTML 的支持，但我从未从事过任何那。

[4.2 发行说明提到 JAWS 对 Flash 8](http://www.openlaszlo.org/lps4.2/release-notes.html)的支持是一项新功能：

> 此版本增加了 JAWS 阅读器对单选框、树和按钮的可访问性，以使其在底层 Flash 8 实现中受支持。仅建议将 4.2.0.4 版本用于在 Flash 8 中需要可访问性且无法升级到当前 4.X 版本的特定应用程序，其中包含可访问性支持以及许多其他改进。

基于[LPP-8248 的](http://jira.openlaszlo.org/jira/browse/LPP-8248)JAWS 支持也已添加到 DHTML 运行时。但它只用IE7测试过。

# c - FLEX - 正则表达式 - 匹配 AWK 中的注释

> ID：12549128
> 
> 赞同：1
> 
> 时间：2012-09-23T01:49:08.027
> 
> 标签：c, awk, lex, flex-lexer

我正在开发一个程序来扫描文件并突出显示 (g)awk 令牌。Flex 用于为 (g)awk 生成词法分析器扫描器。

我的问题：我没有为 Flex 编写正则表达式的经验。现在我无法弄清楚如何生成一个正则表达式来匹配整个评论。请参阅下面将被扫描的示例 .awk 程序：

```
#!/usr/bin/awk -f
###############################################################################
#
# @(#) solve.awk - sudoku solver in awk using efficient backtracking algorithm
# @(#) $Id: solve.awk,v 1.16 2008/03/24 04:04:44 bduncan Exp bduncan $
# @(#) Copyright (C) 2005-2008, Bill Duncan, <bduncan-sudoku@beachnet.org>
#
# License:
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program. If not, see http://www.gnu.org/licenses/.
#
# Description:
# - uses simple recursive backtracking algorithm with up-front and
# ongoing elimination of invalid tries by tracking for each row,
# column and region..
#
# Notes:
# - precalc of regmap didn't seem to make a difference
# - removed unmark() function and added a parameter to mark()
#
# Variables:
# regmap[r,c] ; pre-compiled, which region sector is r,c
# master[r,c] ; master matrix
# C[col, elem] ; true if elem in Column
# R[row, elem] ; true if elem in Row
# Q[reg, elem] ; true if elem in Region (Quadrant)
#
###############################################################################
BEGIN {
SUBSEP = "," # so we can dump and it looks nice
ORDER = 9
DEBUG = 0
count = 0
# precompile region map for faster lookup
# for (i = 0; i < ORDER; i++)
# for (j = 0; j < ORDER; j++)
# regmap[i+1,j+1] = int(i/3)*3+int(j/3)+1
}
function dump( i,j) {
printf "\n"
for (i=1;i<=ORDER;i++) {
if (!((i-1)%3)) printf "\n"
for (j=1;j<=ORDER;j++) {
if (!((j-1)%3)) printf " "
printf " %1d",master[i,j]
}
printf "\n"
}
printf "\n"
}
function fregmap(r,c) {
# return regmap[r,c]
return int((r-1)/3)*3+int((c-1)/3)+1
}
function inuse(r,c,try) {
# q = fregmap(r,c)
# can we use it or is it in use? returns true if already used, not avail
return (C[c,try] || R[r,try] || Q[fregmap(r,c),try])
}
function mark(r,c,try, flag, q) {
q = fregmap(r,c)
Q[q,try] = flag
R[r,try] = flag
C[c,try] = flag
master[r,c] = flag ? try : 0
}
function search(r,c, q,i,a,try) {
# find the next empty slot from here r,c
# if we've reached the end (no more empty) do check?
# for each available number, recurse search
count++
while (master[r,c]) {
if (++c > ORDER) {
c = 1
if (++r > ORDER) {
# then we're done filling! return goodness
return 1
}
}
}
# for each of the available numbers for this slot
for (try=1; try <= ORDER; try++) {
if (! inuse(r,c,try)) {
mark(r,c,try, 1)
if (search(r,c)) return 1
# else zero returned -- unwind
mark(r,c,try, 0) # unmark
}
}
return 0
}
############
# PATTERNS #
############
NF == 0 { next }
$1 ~ /^#/ { next }
NF != ORDER {
printf "error on line %d, NF=%d\n", FNR, NF
exit 1
}
{
++row
for (col=1; col <= ORDER; col++) {
mark(row,col,$col, 1)
}
}
END {
search(1,1)
printf "\n# Searches=%d\n", count
dump()
} 
```

我目前正在使用“^#+”来匹配评论。这匹配所有“#”字符，但不匹配该行中的其余字符。你如何匹配“#”之后的所有内容？

可以[在 Flex 手册](http://westes.github.io/flex/manual/Patterns.html)中查看 Flex 模式结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:27:55.847

修饰符的`+`意思是“一个或多个先前的模式”，它是文字`#`，所以它只匹配包含从第 1 列开始的一个或多个连续哈希的行的开始部分。

对于锚定（行首）匹配，您将需要：

```
^#.* 
```

AFAICR，`.`不匹配换行符。这意味着一行以 开头，`#`后跟零个或多个其他任何类型的字符（换行符除外）。

不要忘记`awk`注释不限于从行首开始：

```
awk '{
         # This comment is indented by a number of spaces
         print $1; # And this is preceded by a command
     }' 
```

在广泛的范围内，任何时候你遇到一个`#`，它就是一个评论的开始。这些限制不包括字符串和正则表达式的主体：

```
awk '{ print "# Not a comment" }'

awk '/#.*/ { print "Line contains a # comment: ", $0; }' 
```

等等。因此，您需要在评论规则之前启动您的正则表达式规则和字符串规则。

# iphone - UIAlertView 操作和取消按钮

> ID：12549130
> 
> 赞同：3
> 
> 时间：2012-09-23T01:49:55.710
> 
> 标签：iphone, objective-c, ios, uialertview

我一直在研究和分析，我意识到 UIAlertView 中的按钮在按钮和操作之间没有相似之处。

* * *

![前任。 01](../Images/55d21e9fb681807bc1300281ef38775f.png)
*左侧按钮执行主要操作，右侧按钮关闭警报。*

![前任。 02](../Images/3799d6be1eb635eb74e984e75e527f97.png)
*左侧按钮关闭警报，右侧按钮执行主要操作。*

* * *

在文档中，“cancelButtonTitle”（右键）是`the title of the cancel button`，但没有说明此按钮是否真的是解除警报的按钮还是执行主要操作的按钮。

好吧，我的问题是：有关于按钮的模式或者任何人都可以执行任何操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:13:59.020

来自 Apple HIG：

> 启动操作的按钮位于最右侧。这个最右边的按钮，称为操作按钮，确认对话框的要点。取消按钮位于操作按钮的左侧。

# ios - 标签栏控制器无法显示视图控制器

> ID：12549133
> 
> 赞同：-1
> 
> 时间：2012-09-23T01:50:18.910
> 
> 标签：ios, tabbarcontroller

这是我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    CSDisplayPlaza *displayPlaza = [[CSDisplayPlaza alloc] initWithNibName:@"CSDisplayPlaza" bundle:nil];
    [displayPlaza setTabBarItem:[[UITabBarItem alloc] initWithTitle:@"one" image:[UIImage imageNamed:@"displayPlaza"] tag:0]];
    UINavigationController *displayPlazaNav = [[UINavigationController alloc] initWithRootViewController:displayPlaza];

    CSGameHall *gameHall = [[CSGameHall alloc] initWithNibName:@"CSGameHall" bundle:nil];
    [gameHall setTabBarItem:[[UITabBarItem alloc] initWithTitle:@"two" image:[UIImage imageNamed:@"displayPlaza"] tag:1]];
    UINavigationController *gameHallNav = [[UINavigationController alloc] initWithRootViewController:gameHall];

    CSMyInformation *myInformation = [[CSMyInformation alloc] initWithNibName:@"CSMyInformation" bundle:nil];
    [myInformation setTabBarItem:[[UITabBarItem alloc] initWithTitle:@"three" image:[UIImage imageNamed:@"myInformation"] tag:2]];
    UINavigationController *myInformationNav = [[UINavigationController alloc] initWithRootViewController:myInformation];

    self.tabBarController = [[UITabBarController alloc] init];
    [tabBarController setViewControllers:[NSArray arrayWithObjects:displayPlazaNav,gameHallNav,myInformationNav,nil]];
    [tabBarController setSelectedViewController:displayPlazaNav];
    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

在模拟器中，无法显示任何视图控制器。在我的模拟器中只是一个空的标签栏。我不知道会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:32:49.600

我的猜测是 displayPlaza 出于某种原因为零。创建每个对象后添加日志消息以验证您是否确实创建了一个对象，以及选项卡栏控制器数组。

# php - 用于从 url 解析数据并插入数据库的 CGI 或 php

> ID：12549134
> 
> 赞同：0
> 
> 时间：2012-09-23T01:50:21.983
> 
> 标签：php, cgi

我需要创建一个脚本，它将解析来自 url 的一些数据，然后将其插入数据库。我想知道 perl cgi 脚本或 php 脚本是否更适合此目的。我必须每十分钟左右运行一次这个脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T01:54:14.890

任何能够完成工作的东西都是“适合”的。就我个人而言，我会选择 PHP，但这只是因为我知道 PHP 而不是 Perl。最终由你决定——如果你可以在 Perl 中做到这一点，那就去做吧。如果您更喜欢 PHP，请使用 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T01:55:07.890

PHP 或 Perl 都可以很好地完成这项工作。我会向您发送 PHP 的方向，只是因为它更容易开箱即用，并且有更多针对刚入门的人的示例。

[这是此问题的示例答案](https://stackoverflow.com/questions/6829760/how-to-parse-a-html-and-store-into-database-using-curl-in-php-mysql)

# ruby-on-rails-3 - heroku rails logging 不显示输出？

> ID：12549136
> 
> 赞同：2
> 
> 时间：2012-09-23T01:50:28.957
> 
> 标签：ruby-on-rails-3, debugging, logging, heroku

我正在尝试调试我的一个 Rails 控制器的问题。它在本地开发中运行良好，但推送到 heroku 时存在不一致的行为。

我已经设置`config.log_level = :debug`了`/app/config/production.rb` 我已经尝试了控制器的插件`puts`和`logger.debug`语句。

我确实在本地看到了输出，但在 heroku 上没有看到。[根据https://devcenter.heroku.com/articles/logging](https://devcenter.heroku.com/articles/logging)上的 heroku 文档，这应该不难。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:13:05.780

我必须将这些配置值设置为 false 才能重新加载代码`app/config/environments/production.rb`

```
config.cache_classes = false                                                                                                                                                 
config.action_controller.perform_caching = false 
```

# html - 将 div 扩展到 100% 页面高度减去像素

> ID：12549145
> 
> 赞同：1
> 
> 时间：2012-09-23T01:53:45.373
> 
> 标签：html, css, height, fluid-layout

我正在处理具有表格布局的网页，其中包含三个单元格：顶部、左下角、右下角。顶部单元格包含一个标题元素，高度为 105 像素。左下角的单元格是导航窗格。标题和导航窗格都是固定的。右下角的单元格是内容窗格。底部的两个单元格被包裹在一个 div 中。我希望底部包装器本质上是页面的高度减去页眉元素的高度（105px），以便覆盖整个页面。我环顾四周，但我找到的解决方案都没有奏效。这是我的 CSS（我正在使用 SASS）：

```
div#lower-container {
position:absolute;
width:100%;
height:100%;
div#navigation {
    width:20%;
    background-color:transparent;
    position:fixed;
    top:105px;
    height:100%;
    border-right:1px solid $blue;
};
div#content {
    position:absolute;
    top:105px;
    width:80%;
    height:100%;
    background-color:white;
    margin-left:20%;
    overflow-y:scroll;
};
}; 
```

这是我的 HTML 代码：

```
<div id="lower-container">
<div id="navigation">
</div>
<div id="content">
<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
</div>
</div> 
```

最后是现在的截图：http: [//i.imgur.com/jsXa5.png](http://i.imgur.com/jsXa5.png)

我更喜欢使用纯 CSS/SASS，而不是 JavaScript/jQuery。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T02:07:53.520

如果我理解你的话，你想要这样的东西吗？
CSS：

```
#wrapper{
  height:100%;
  width:100%;
   #top:{
      position: absolute;
      height: 135px;
   }
   #content{
      position: relative;
      height:100%;
   }
} 
```

HTML：

```
 <div id="wrapper">
   <div id="top">PICTURE</div>
   <div id="content">Lorem Ipsum Dolor Sit Amet Bla Bla Bla</div>
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-02T19:09:38.550

CSS3 支持[`calc`](https://developer.mozilla.org/en-US/docs/Web/CSS/calc)操作，所以你可能正在寻找

`height: calc(100% - 105px);`

（周围的间距`-`很重要）

# twitter-bootstrap - Twitter 引导表在右侧延伸到容器之外

> ID：12549149
> 
> 赞同：5
> 
> 时间：2012-09-23T01:55:59.423
> 
> 标签：twitter-bootstrap

我在 Twitter Bootstrap 中有一个表格，当表格有很多列（大约 19-20 取决于它们里面的内容）时，它会延伸到 .container 之外。

![推特引导表](../Images/9c5169d47b2fe52c9329a78494338ac8.png)

hr 标签（表格下方的灰线）定义了 .container 的边缘。桌子总是向右延伸过去。

**是否可以将表格居中，使其在两侧均等地延伸到 .container 之外？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:27:57.680

我有同样的问题。结果发现容器的宽度小于桌子的宽度。如果您使用的是 Chrome，开发者工具非常棒。

我只是将它设置为大于我的桌子的宽度，作为临时修复。我的表格宽度当前为 1079 像素。

```
.container { width: 1200px; } 
```

当我将表格的宽度增加到 1132 像素时，它又开始向右漂移。我将尝试减小内容的宽度，但这是一个难题。可折叠的列可能是一个东西，并且有水平滚动，但这似乎是数据的更多障碍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-07T14:25:31.140

尝试：

```
.table{table-layout:fixed} 
```

演示：http: [//jsfiddle.net/GCu2D/4889/](http://jsfiddle.net/GCu2D/4889/)

# c# - DataGridView C# 绑定多个列表

> ID：12549150
> 
> 赞同：2
> 
> 时间：2012-09-23T01:56:28.283
> 
> 标签：c#, xml, winforms, datagridview, datasource

基本上我在一个列表中有一个列表，我想绑定到一个dataGridView。就像这样

```
public class Town {
    public List<Shop> Shops { get; set; }
}

public class Shop {
    public List<Car> Cars {get; set; }
} 
```

以及具有一些属性并覆盖 ToString 方法的 Cars 类。

现在，我想在网格行上显示列中带有汽车属性的商店。

我还将 Town 对象序列化和反序列化为 XML。我找到了一种修改 DataSource 对象的方法，以便它可以存储用户的输入，但我无法显示加载的 XML 中的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:19:40.187

目前尚不清楚问题是什么。从你所说的，它应该是相当简单的。将 Town 对象反序列化回对象图，您就可以执行以下操作：

```
var shop = town.Shops[0];
grid.DataSource = shop.Cars; 
```

如果您的网格在设计时正确配置，这就足够了。

Car 类型必须将其数据公开为公共属性才能使其工作，而不是作为字段。

# shell - 使用 sed 转换 C 结构和 typedef

> ID：12549152
> 
> 赞同：2
> 
> 时间：2012-09-23T01:57:20.107
> 
> 标签：shell, unix, sed

我的输入代码中有几个结构定义。例如：

```
struct node {
   int val;
   struct node *next;
}; 
```

或者

```
typedef struct {
   int numer;
   int denom;
} Rational; 
```

我使用以下行将它们转换为一行并复制两次。

```
sed '/struct[^(){]*{/{:l N;s/\n//;/}[^}]*;/!t l;s/  */ /g;p;p}' 
```

结果是这样的：

```
struct node { int val; struct node *next;};
struct node { int val; struct node *next;};
struct node { int val; struct node *next;};

typedef struct { int numer; int denom;} Rational;
typedef struct { int numer; int denom;} Rational;
typedef struct { int numer; int denom;} Rational; 
```

这就是我要的：

1.  我想将第一行恢复到原来的结构块
2.  我希望第二行变成一个看起来像这样的函数标题......

    ```
    void init_structName( structName *var, int data1, int data2 ) 
    ```

-structName 基本上是结构的名称。

-var 是您喜欢的任何名称。

-data1, data2.... 是结构中的值。

3.我想把第三行变成函数体。我在哪里初始化数据参数。它看起来像这样。

```
 {
        var->data1 = data1;
        var->data2 = data2;
    } 
```

请记住，我在输入文件中的所有结构定义都放在一行中并复制了三遍。因此，当代码找到结构定义时，它可以假设下面还会有两个副本。

例如，如果输入文件具有上面显示的重复行，这就是我想要的输出。

```
struct node {
   int val;
   struct node *next;
};
void init_node(struct node *var, int val, struct node *next)
{
var->val = val;
var->next =  next;
}

typedef struct {
   int numer;
   int denom;
} Rational;
void init_Rational( Rational *var, int numer, int denom ) 
{
   var->numer = numer;
   var->denom = denom;
} 
```

以防有人好奇。这些函数将从主函数调用以初始化结构变量。

有人可以帮忙吗？我意识到这有点困难。非常感谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:58:56.637

看到[sed 是 Turing Complete](http://sed.sourceforge.net/grabbag/scripts/turing.sed)，可以一次性完成，但这并不意味着代码非常用户友好 =)

我对解决方案的尝试是：

```
#!/bin/sed -nf

/struct/b continue
p
d

: continue

# 1st step:
s/\(struct\s.*{\)\([^}]*\)\(}.*\)/\1\
\2\
\3/
s/;\(\s*[^\n}]\)/;\
\1/g
p

s/.*//
n
# 2nd step:
s/struct\s*\([A-Za-z_][A-Za-z_0-9]*\)\s*{\([^}]*\)}.*/void init_\1(struct \1 *var, \2)/
s/typedef\s*struct\s*{\([^}]*\)}\s*\([A-Za-z_][A-Za-z_0-9]*\)\s*;/void init_\2(struct \2 *var, \1)/
s/;/,/g
s/,\s*)/)/
p

s/.*//
n
# 3rd step
s/.*{\s*\([^}]*\)}.*/{\
\1}/
s/[A-Za-z \t]*[\* \t]\s*\([A-Za-z_][A-Za-z_0-9]*\)\s*;/\tvar->\1 = \1;\
/g
p 
```

我将尝试解释我所做的一切，但首先我必须警告这可能不是很笼统。例如，它假设三个相同的线彼此跟随（即它们之间没有其他线）。

在开始之前，请注意该文件是一个需要“-n”标志才能运行的脚本。这告诉 sed 除非脚本明确告诉它（例如通过“p”命令），否则不要将任何内容打印到标准输出。“-f”选项是告诉 sed 打开后面的文件的“技巧”。当使用“./myscript.sed”执行脚本时，bash 将执行“/bin/sed -nf myscript.sed”，因此它将正确读取脚本的其余部分。

步骤零只是检查我们是否有一条有效的线。我假设每个有效行都包含单词 struct。如果该行有效，则脚本分支（跳转，“b”命令相当于 C 中的 goto 语句）到 continue 标签（与 C 不同，标签以“:”开头，而不是以它结尾）。如果它无效，我们用“p”命令强制打印它，然后用“d”命令从模式空间中删除该行。通过删除该行，sed 将读取下一行并从头开始执行脚本。

如果该行有效，则更改该行的操作开始。第一步是生成结构体。这是通过一系列命令完成的。

1.  将该行分成三部分，从左括号开始的所有内容，直到右括号的所有内容（但不包括它），以及来自右括号的所有内容（现在包括它）。我应该提到，sed 的一个怪癖是我们用“\n”搜索换行符，但是用“\”写换行符，然后是一个实际的换行符。这就是为什么这个命令被分成三个不同的行。IIRC 这种行为特定于 POSIX sed，但可能 GNU 版本（存在于大多数 Linux 发行版中）允许使用“\n”编写换行符。
2.  在每个分号后添加一个换行符。这个工作有点尴尬，我们在分号后插入换行符后复制分号后的所有内容。g 标志告诉 sed 重复执行此操作，这就是它起作用的原因。还要再次注意换行符转义。
3.  强制打印结果

在第二步之前，我们手动从模式空间（即缓冲区）中清除行，以便我们可以重新开始下一行。如果我们使用“d”命令执行此操作，sed 将再次从文件开头开始读取命令。然后“n”命令将下一行读入模式空间。之后，我们启动命令将该行转换为函数声明：

1.  我们首先匹配单词 struct，后跟零个或多个空格，然后是 C 标识符，该标识符可以以下划线或字母开头，并且可以包含下划线和字母数字字符。标识符被捕获到“变量”“\1”中。然后我们匹配括号之间的内容，存储到“\2”中。然后这些用于生成函数声明。
2.  然后我们执行相同的过程，但现在是针对“typedef”的情况。请注意，现在标识符位于括号之后，因此“\1”现在包含括号内的内容，“\2”包含标识符。
3.  现在我们用逗号替换所有分号，所以它可以开始看起来更像一个函数定义。
4.  最后一个替换命令删除右括号之前的多余逗号。
5.  最后打印结果。

同样，在最后一步之前，手动清理模式空间并阅读下一行。然后该步骤将生成函数体：

1.  匹配并捕获括号内的所有内容。注意左括号之前和右括号之后的“.*”。使用它，因此只有括号的内容在之后被写入。在编写输出时，我们将左括号放在单独的行中。
2.  我们匹配字母字符和空格，因此我们可以跳过类型声明。我们至少需要一个空格字符或一个星号（用于指针）来标记标识符的开始。然后我们继续捕获标识符。这只适用于捕获之后的内容：我们明确要求在标识符之后只有可选的空格，后跟分号。这会强制表达式在分号之前获取标识符字符，即。如果有两个以上的单词，它只会得到最后一个单词。因此它可以与“unsigned int var”一起使用，正确捕获“var”。在编写输出时，我们放置一些缩进，然后是所需的格式，包括转义的换行符。
3.  打印最终输出。

我不知道我是否足够清楚。随时要求任何澄清。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:46:27.807

这应该为您提供一些关于 sed 实际上对于此类任务有多不合适的提示。我无法弄清楚如何一次性完成，当我完成编写脚本时，我注意到您期望的结果有些不同。

您的问题更适合脚本语言和解析库。考虑 python + pyparsing（[这里](http://pyparsing.wikispaces.com/UnderDevelopment#toc1)是一个示例 C 结构解析语法，但您需要比这更简单的东西）或 perl6 的[规则](http://en.wikibooks.org/wiki/Perl_6_Programming/Grammars)。

不过，如果您决定坚持使用 sed，也许这会有一些用处：

**`pass-one.sh`**

```
#!/bin/sed -nf

/^struct/ {
  s|^\(struct[^(){]*{\)|\1\n|
  s|[^}];|;\n|gp
  a \\n
}

/^typedef/ {
  h
  # create signature
  s|.*{\(.*\)} \(.*\);|void init_\2( \2 *var, \1 ) {|
  # insert argument list to signature and remove trailing ;
  s|\([^;]*\); ) {|\1 ) {|g
  s|;|,|g
  p

  g
  # add constructor (further substitutions follow in pass-two)
  s|.*{\(.*\)}.*|\1|
  s|;|;\n|g
  s|\n$||p

  a }
  a \\n
} 
```

**`pass-two.sh`**

```
#!/bin/sed -f

# fix struct indent
/^struct/ {
  :loop1
  n
  s|^ |    |
  t loop1
}

# unsigned int name -> var->name = name
/^void init_/{
  :loop2
  n
  s|.* \(.*\);|    var->\1 = \1;|
  t loop2
} 
```

**`Usage`**

```
$ cat << EOF | ./pass-one.sh | ./pass-two.sh
struct node { int val; struct node *next;};
typedef struct { int numer; int denom;} Rational;

struct node { int val; struct node *next;};
typedef struct { int numer; unsigned int denom;} Rational;
EOF 
```

```
struct node {
    int va;
    struct node *nex;
};

void init_Rational( Rational *var,  int numer, int denom ) {
    var->numer = numer;
    var->denom = denom;
}

struct node {
    int va;
    struct node *nex;
};

void init_Rational( Rational *var,  int numer, unsigned int denom ) {
    var->numer = numer;
    var->denom = denom;
} 
```

# javascript - jQuery：添加基于内联条件的内联函数调用......可能吗？

> ID：12549154
> 
> 赞同：1
> 
> 时间：2012-09-23T01:57:42.500
> 
> 标签：javascript, jquery, datatables

我过去从未真正遇到过这种情况，所以我很好奇。您能以某种方式执行以下操作吗？

我正在使用 Datatables jQuery 插件。这是我的基本电话：

```
var oTable = $("#example").dataTable(); 
```

我在一个名为 EnableInlineEdit 的类中有一个属性。如果是真的，我想添加一个函数调用内联：

```
var oTable = $("#example").dataTable().makeEditable(); 
```

这将使 jEditable 插件能够工作。我定期向 Datatable 插件添加了很多我没有包括在内的选项，因此只需制作一个条件 if/else 并创建两个单独的调用就不可能了。通过这样做，我会将大型文件的大小增加一倍。有没有办法以某种方式创建内联条件以将 .makeEditable 添加到 Datatable 初始化的末尾，而无需创建两个完全相同的代码副本，其中一个仅具有 .makeEditable() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:51:42.777

你不能做这样的事情：

```
var oTable = var oTable = $("#example").dataTable();
if (whatever) {
    oTable.makeEditable();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T02:05:14.243

创建一个返回相关值的命名函数。

```
function getval() {
    return some.value; // the value that decides if .makeEditable should run
} 
```

然后添加`.filter`对链的调用。

```
var oTable = $("#example").dataTable().filter(getval).makeEditable(); 
```

如果`getval`返回一个真值，`.makeEditable()`将被调用。否则不行。

如果您需要`oTable`引用原始元素，请添加`.end()`到链的末尾。

```
var oTable = $("#example").dataTable().filter(getval).makeEditable().end(); 
```

* * *

这可能是一个更好的解决方案。

只需包含`.makeEditable()`调用，如果`EnableInlineEdit`是`false`，则覆盖该函数*（或视情况添加该函数）*。

```
if (EnableInlineEdit === false)
    jQuery.fn.makeEditable = function() { return this; }; 
```

所以现在 if `EnableInlineEdit`is`false`是`makeEditable`一个函数，它什么都不做，只返回 jQuery 对象，因此链接可以继续。

# java - 链接项目

> ID：12549158
> 
> 赞同：-1
> 
> 时间：2012-09-23T01:59:13.467
> 
> 标签：java, css, eclipse, netbeans, notepad++

如何安排项目文件并将它们链接在一起？

例如，我喜欢在[Notepad++中编写](http://en.wikipedia.org/wiki/Notepad_%28software%29)[CSS](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)，但我更愿意在[NetBeans](http://en.wikipedia.org/wiki/NetBeans)中编写 Java 部分。

有没有一种好方法可以将这些文件以某种方式组合到一个项目中，在不同的[IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)中编写不同的脚本并将它们链接起来，以便它们一起运行，即一个网站？或者更好的是，一个与所有或大多数语言和语言/GUI 插件工具具有良好兼容性的一体化 IDE。

（我是一个业余程序员。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:22:59.693

您可以继续使用[NetBeans](http://en.wikipedia.org/wiki/NetBeans)来管理您的项目。将 CSS 文件复制到您的项目中，但如果您愿意，仍然可以使用 Notepad++ 继续编辑文件。您可以从 NetBeans 构建和部署您的项目。

基本上，使用 NetBeans 作为您的项目容器，但使用您喜欢的任何东西来编辑文件。您可能需要从 NetBeans 刷新项目以获取最新更改。

我对 NetBeans 不是很熟悉，但我知道[Eclipse IDE](http://en.wikipedia.org/wiki/Eclipse_%28software%29)有用于许多不同类型开发的插件。它可能适合作为满足您所有开发需求的单个 IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T02:15:37.907

NetBeans 非常适合这种情况。单个项目可以有任意数量的声明`main()`方法的类，如此处和[此处所讨论](https://stackoverflow.com/questions/2211566/creating-jars-with-multiple-main-classes-in-netbeans/2211980#2211980)[的](https://stackoverflow.com/questions/2127546/choosing-a-java-ide-for-homework-assignments/2127928#2127928)。[您可以挂钩到构建脚本，如此处](https://stackoverflow.com/questions/3955299/netbeans-adding-resource-files-to-jar-file-with-ant)所示。

[![图片](../Images/67c092707888bfefde193748ba59e61e.png)](https://i.stack.imgur.com/HDUZO.png)

# data-structures - 在无向图中测试连通性（使用 DFS）

> ID：12549161
> 
> 赞同：1
> 
> 时间：2012-09-23T01:59:31.643
> 
> 标签：data-structures, graph-theory

我需要测试哪个顶点是“重要的”，当连接的边被移除时，图形变得断开连接。所以我的想法是尝试删除每条边，然后测试从一个节点到另一个节点的连接性。

示例：删除连接 2 - 5 的边。然后测试 2 - 5 的连接性：`isConnected(2,5)`

```
 // DFS from node1 to node2
  boolean isConnected(int node1, int node2) {
    // keep track of (visited) status of nodes
    visited = new VertexState[V];
    for (int i = 0; i < V; i++) 
      visited[i] = VertexState.NotVisited;

    // recursively test connectivity
    return _isConnected(node1, node2);
  }

  boolean _isConnected(int node1, int node2) {
    visited[node1] = VertexState.Visiting;
    if (node1 == node2) { // we found the node
      return true; 
    } else {
      for (int i = 0; i < V; i++) { // for all children of node1
        if (AdjMatrix[node1][i] == 1 && visited[i] == VertexState.NotVisited) {
          if (_isConnected(i, node2)) { // test if child can reach node2
            return true;
          }
        }
      }
      visited[node1] = VertexState.Visited;
    }
    return false;
  } 
```

当我用一个简单的图表尝试它时，它可以工作，但是当我用一个复杂的测试用例测试它时，它似乎会产生错误的结果。我在调试时遇到了困难，因为它是一个复杂的测试用例，无法将其绘制出来。

* * *

**更新**

如果它只帮助伪代码：

```
isConnected(node1, node2) 
    visited = new VertexState[V]
    for each v in visited
        v = NotVisited
    return _isConnected(node1, node2); // the recursion

_isConnected(node1, node2) 
    visited[node1] = Visiting
    if (node1 == node2) 
        return true // we found the node
    else 
        for each neighbour of node1
            if visited[neighbour] == NotVisited
                if_isConnected(neighbour, node2) 
                    return true
        visited[node1] = Visited
    return false 
```

**更新 2**

完整源代码**[https://gist.github.com/3779445](https://gist.github.com/3779445)**，但使用邻接列表，它似乎可以工作......不确定它是否是最有效的算法......

# unit-testing - 用于 Windows 应用商店应用程序开发的 TDD，无需模拟

> ID：12549162
> 
> 赞同：5
> 
> 时间：2012-09-23T01:59:39.563
> 
> 标签：unit-testing, mocking, tdd, windows-runtime

有没有人想出一个好的 TDD 设置用于 Windows 应用商店应用程序开发？我已经习惯了使用模拟框架，但这不再是一种选择，因为 WinRT 中缺少动态程序集生成。

我已经看到了 alpha MoqRT 框架，但我希望在这样的实验阶段避免一些事情。我也被使用模拟对象宠坏了，以至于我不愿意使用微软提供的存根或垫片作为替代品（Microsoft Fakes）。

你们中是否有人成功地找到了使用 DI 和适当隔离的 TDD 样式单元测试进行 Windows 应用商店应用程序开发的好技术？如果是这样，你做了什么？

**编辑**：

我还注意到我的“Windows Store App”单元测试项目中没有“Add Fakes Assembly”选项，所以这可能不是一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T20:47:20.123

我现在尝试的方法是将可测试的代码放在常规的 .NET 4.5 程序集中，允许使用普通的单元测试项目通过 mock 对其进行单元测试。然后，在 Windows Store App 项目中，将这些相同的源文件添加为链接。这很不方便，因为我不得不在两个平台之间复制项目引用，而且我必须小心确保代码在两个项目中都能编译，但这种方法确实允许我使用更好的单元测试工具。

我仍然急切地等待着，看看是否有人想出更好的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-17T09:43:07.447

[通过使用Telerik JustMock](http://www.telerik.com/help/justmock/introduction.html)，您将能够像以前一样在 Windows Store App 中进行模拟。它作为单独的安装程序提供，可提供您在测试项目中导入的 DLL。它是免费的，但您必须先注册。

语法与 Moq 没有太大区别。请记住还要添加命名空间 Telerik.JustMock.Helpers 以添加有用的扩展。

我目前正在使用它来开发一个使用 Prism.StoreApps 的 Universall 应用程序。使用 JustMock，我现在可以单独对我的 ViewModel 进行单元测试。我现在可以对我的软件的所有层进行单元测试，我不再被迫创建 PCL 层。它们现在是 Portable 8.1 项目。

# iphone - 应用程序运行时 Xcode 4.5 选项卡消失

> ID：12549167
> 
> 赞同：6
> 
> 时间：2012-09-23T02:01:46.820
> 
> 标签：iphone, xcode, xcode4.5

更新：看起来每当 Xcode 4.5 开始运行应用程序时，View -> Hide Tab Bar 命令都会自动执行......它看起来真的像一个错误。

**这个问题中的tabs**一词是指我们在**Xcode IDE**顶部看到的那个。不是 Cocoa Touch 中的标签栏类。

我正在运行 Mountain Lion 10.8.2 + Xcode 4.5(4G182)。我发现了一个烦人的问题。

*   在 Xcode 全屏模式下，我喜欢在处理 iPhone 项目时打开多个选项卡（第一张截图）
*   在我升级到 Xcode 4.5 之前，这些标签效果很好（就像我们在 Safari 或 Chrome 中看到的任何标签一样）
*   在 Xcode 4.5 全屏模式下，每当我要运行我的应用程序（在真实设备或模拟器上）时，只要按下运行按钮或按下键盘快捷键（command + r），选项卡就会自动隐藏（第二张截图）
*   如果我在非全屏模式下工作，就不会有这样的问题。

知道为什么吗？我怎样才能解决这个问题？

![在此处输入图像描述](../Images/7b23ef2b7078ed22b9c0db753645cf9f.png) ![在此处输入图像描述](../Images/c514c2fd9e1261cd55a880136f30ceb2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T04:43:09.470

好消息，最新的更新版本**4.5.1** (4G1004) 修复了这个错误。:)

干杯。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-01T11:08:37.970

这是 xcode 功能，它不是错误。

xcode 在全视图模式下隐藏选项卡。

# django - 如何测试我的 Django 电子邮件视图是否可以捕获 BadHeaderError？

> ID：12549175
> 
> 赞同：2
> 
> 时间：2012-09-23T02:04:39.673
> 
> 标签：django, email

我有一个带有电子邮件表单的 Django 视图。它允许用户键入主题和消息，并将其作为电子邮件发送给站点管理员。我想编写一个单元测试，以确保该视图可以捕获[BadHeaderError](https://docs.djangoproject.com/en/1.4/topics/email/#preventing-header-injection)。

```
subject = contact_form.cleaned_data['subject']
message = contact_form.cleaned_data['message']
try:
    mail_admins(
        subject=subject,
        message=message,
    )
except BadHeaderError:
    # I want to test this case.
    messages.error(request, "Sorry, the email could not be sent. An invalid header was found.")
else:
    messages.success(request, "Your email was sent to the admins.") 
```

如何在单元测试中触发 BadHeaderError？

我知道标头注入的典型示例是在主题中有换行符。但是，我编写了一个单元测试，在主题中使用换行符填写此表单，并且它没有触发无效的标题消息。

```
# This didn't trigger the invalid header message. So how do I do it?
response = self.client.post(reverse('contact_us'), dict(
    subject="Subject goes here\ncc:spamvictim@example.com",
    message="Message goes here",
)) 
```

**编辑：**

[Hassek 关于](https://stackoverflow.com/a/12549859/859858)使用 Mocker 的建议是我最初没有考虑过的一种方法，并且在这里可以达到我的目的。但是，我很好奇邮件函数中实际触发 BadHeaderError 的原因 - 如果换行符不这样做，主题中需要什么样的特殊字符？还是有另一种触发 BadHeaderError 的方法？我对网络安全不太了解，所以我想学习这些东西。

**编辑2：**

我使用的是 Django 1.3.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-03T10:11:06.410

这个片段来自 Django 自己的测试；这就是他们测试是否引发此错误的方式

```
def test_header_injection(self):
    email = EmailMessage('Subject\nInjection Test', 'Content', 'from@example.com', ['to@example.com'])
    self.assertRaises(BadHeaderError, email.message) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T04:58:25.837

[在mail_admins](http://labix.org/mocker)函数上使用模拟程序在调用时引发 BadHeaderError。它会是这样的：

```
from mocker import Mocker, KWARGS

mocker = Mocker()
raise_error = mocker.replace('COMPLETE_PATH_TO_mail_admins_FUNCTION')  
#  i.e django.contrib.emails.mail_admins

raise_error(KWARGS)
mocker.raise(BadHeaderException) 
```

尚未对此进行测试，但它应该可以帮助您:)

# html - 通过正在运行的声音线程播放声音，或恢复播放？

> ID：12549177
> 
> 赞同：2
> 
> 时间：2012-09-23T02:04:55.100
> 
> 标签：html, audio, cordova, sencha-touch, media

我有以下方法在 phonegap 应用程序中播放声音：

```
 if (Ext.os.is.Android) {
            var soundPath = util.phonegap.getResourcesPath() + "/sounds/1khz_1_5s.mp3";
            var restSound = new Media(soundPath,
                function () {
                }, function (error) {
                    console.log(error);
                });
            restSound.play();
        }
        else {
            new Ext.Audio({hidden:true, url:'sounds/1khz_1_5s.mp3'}).play();
        } 
```

但是，如果在我的应用程序打开时正在播放 Pandora 或类似软件，这会停止音频并且在我的声音结束时不会恢复它。如何恢复播放声音时发生的任何音频？

我需要这个才能在 iOS 和 Android 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T14:02:21.540

使用 javascript 桥接器。这更容易。

# jquery - Jquery将值从表td复制到输入

> ID：12549180
> 
> 赞同：1
> 
> 时间：2012-09-23T02:05:37.820
> 
> 标签：jquery, html-table

我有一个显示我所有客户信息的表格。我希望能够获取 clientid 列并将所有 id 复制到输入框中。TD 有一个唯一的 ID，即“clientid”。如果我尝试将文本复制到输入中，它只会获取表中的第一个值，而不是全部。

```
<table>
  <tr>
    <td id="clientid">
       45
    </td>
    <td>
       John Salsasauce
    </td>
  </tr>
  <tr>
    <td id="clientid">
       53
    </td>
    <td>
       Andrew Foobaloba
    </td>
  </tr>
// more here...
</table> 
```

这是我正在使用的 jQuery，但它只获取`#clientid`值的第一个实例。

```
$("button#copybutton").click(function(){
   $("textarea#copy").val($("#clientid").text()); 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T02:14:18.850

使用类（比如 myclass）

```
 $("textarea#copy").val( $(".myclass").map(function(){
      return $(this).text();
    }).get().join(", ") ); 
```

# spring - Spring Security OAuth2 未构建（测试失败：TestOAuth2AccessTokenSerializer.writeValueAsStringWithNullScope）

> ID：12549182
> 
> 赞同：0
> 
> 时间：2012-09-23T02:07:12.920
> 
> 标签：spring, spring-security, oauth-2.0

我目前正在尝试构建 spring-security-oauth 示例应用程序（用于 OAuth2），但测试失败（截至今天的版本）。不幸的是，没有为项目激活问题跟踪器来报告它。有没有人已经经历过并解决了这个问题？

（当然我可以跳过测试来构建，但当然，如果所有测试都成功，那就太好了。）

测试错误：

```
writeValueAsStringWithNullScope(org.springframework.security.oauth2.common.TestOAuth2AccessTokenSerializer) 
```

以下是万无一失的报告：

[http://pastebin.com/Mhpqepca](http://pastebin.com/Mhpqepca)

[http://pastebin.com/s1V12cnt](http://pastebin.com/s1V12cnt)

万全报告：

```
 <testcase time="0.028" classname="org.springframework.security.oauth2.common.TestOAuth2AccessTokenSerializer" name="writeValueAsStringWithNullScope">
    <error type="java.lang.NullPointerException">java.lang.NullPointerException
    at java.util.TreeMap.compare(TreeMap.java:1188)
    at java.util.TreeMap.put(TreeMap.java:531)
    at java.util.TreeSet.add(TreeSet.java:255)
    at org.springframework.security.oauth2.common.TestOAuth2AccessTokenSerializer.writeValueAsStringWithNullScope(TestOAuth2AccessTokenSerializer.java:55)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:66)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:307)
    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:86)
    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:94)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:294)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:112)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$LastRuleTestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:133)
    at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:110)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:83)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:282)
    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)
    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:207)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:146)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:120)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)
    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:118)
    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:102)
    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:115)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
    at $Proxy0.invoke(Unknown Source)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69)
</error>
  </testcase> 
```

相关论坛帖子（最后有我的评论）：

[http://forum.springsource.org/showthread.php?130378-OAuth-2-0&highlight=oauth2](http://forum.springsource.org/showthread.php?130378-OAuth-2-0&highlight=oauth2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:12:19.023

论坛主题的链接显示这是 JDK 7 平台的问题，而不是 Spring OAuth 本身的问题。另请注意，（当然）有一个问题跟踪器，pom 中有一个链接，并且在 github 上的 README 中：[https](https://github.com/spring-projects/spring-security-oauth) ://github.com/spring-projects/spring-security-oauth 。

# java - 自定义多标签表单编辑器 - 资源更改

> ID：12549185
> 
> 赞同：1
> 
> 时间：2012-09-23T02:08:58.970
> 
> 标签：java, eclipse-rcp

在我的 Eclipse-RCP 中，我使用了 FormEditor 的自定义实现，它由两个部分/选项卡组成，一个普通的 TextEditor 和一个自定义的 FormPage。保存并且一切正常，但是如果切换选项卡（并且之前已保存资源/文件）我没有得到更改（通常 eclipse 会显示类似“资源...已更改...重新加载”的消息）。我在工作区注册了一个 ResourceChangeListener，我从 TextEditor（但不是从 FormPage）获得了更改，但是当我切换选项卡时我仍然没有收到消息。

谢谢

# python-2.7 - 用 Python 中的 for 循环确定“Expected:in”指的是什么

> ID：12549186
> 
> 赞同：0
> 
> 时间：2012-09-23T02:08:59.517
> 
> 标签：python-2.7

所以我有以下代码

```
 base = "INSERT INTO " + table + " ("
    lineCount = 0
    tableFieldNames = dataArray['titleRow']

    **for titleRow as tableFieldNames:**
        if some_list[-1] == titleRow:
            base = base + titleRow
        else:
            base = base + titleRow + ","

    base = base + ") VALUES " 
```

其中粗体部分给出了一个错误“无效的语法”，而 pypex 的 eclipse 插件为粗体文本给出了更详细的“Excepted：in”。扔给我的也是那个指的东西。我在 for 循环声明的末尾添加了一个 : ，它引用的数组也是有效的。另外，在这段代码之后我有一个 for 循环，它没有给出这种奇怪的错误。

有没有人遇到过这样的事情，并找到了解决它的方法（甚至使解析错误更加冗长？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:27:25.797

它应该是`for titleRow in tableFieldNames:`( **in**，而不是**as** )。

# java - 在 Java 中使用带有 Accept 标头的 GET 请求获取 RDF/XML 网页

> ID：12549191
> 
> 赞同：0
> 
> 时间：2012-09-23T02:11:50.180
> 
> 标签：java, get, rdf

我想发送一个 GET 请求，只接受`application/rdf+xml`使用`Accept:`标头的类型结果。下面的代码对吗？

```
URLConnection connection = new URL(url + "?" + query).openConnection();
connection.setRequestProperty("Accept", "application/rdf+xml");
InputStream response = connection.getInputStream(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:31:11.140

@gigadot 确定了它，`Accept`标头是对服务器的建议，服务器可以随意忽略。

如果您的应用程序只能接受 RDF/XML，那么您需要在接收请求中添加逻辑以强制执行此操作。

您可以使用`getContentType()`a 的方法`URLConnection`查看服务器返回给您的内容类型，如果它不符合您的要求，则采取适当的措施（例如报告错误）。

# java - 铸造泛型

> ID：12549193
> 
> 赞同：1
> 
> 时间：2012-09-23T02:12:09.570
> 
> 标签：java, oop, generics

我有一个类，其中包含几个从一种泛型类型转换为另一种泛型类型的方法，但如果两者都返回原始值：参数类型和返回类型相同。我能想到的最佳选择是转换参数类型并将其包装在 try catch 语句中，但这对我来说似乎很脏。

```
public WK wrapKey(K key) {...

public abstract class MyClass<K, V extends Comparable, WK, WV> extends BaseClass<Map<WK, WV>, KeyValueBean<K, V>> {

...
public WK wrapKey(K key) {

    try {
        return (WK) key;
    } catch (Exception e) {
        return null;
    }
}

public WV wrapValue(V value) {

    try {
        return (WV) value;
    } catch (Exception e) {
        return null;
    }
} 
```

我认为另一种选择可能是将类类型指定为构造函数或setter方法中的参数，然后使用isAssignableFrom：

```
public WV wrapValue(V value) {
  if (value.class.isAssignableFrom(this.getWrappedValueClass())){
     return WK(V);
  }
  return null;
} 
```

有没有别的办法？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:39:03.050

Java 通过*类型擦除*实现泛型，这意味着所有类型检查都在编译时执行，然后泛型在运行时被擦除。因此，您下面的代码实际上什么都不做：

```
public WV wrapValue(V value) {
    try {
        return (WV) value;
    } catch (Exception e) {
        return null;
    }
} 
```

在运行时，这相当于：

```
public Object wrapValue(Object value) {
  return value;
} 
```

此方法永远不会抛出异常，而是此方法的调用者可能会抛出异常，因为编译器在调用站点添加了隐式转换。

您的第二个示例甚至无法编译，因为您无法执行`value.class`. 如果要进行此检查`V`，则必须传入两者的类类型。`KV`

无论如何，您的设计似乎过于复杂——也许如果您解释您要做什么，可能会有更好的解决方案。

# php - PHP邮件表单文本框由于...CSS而无法编辑？

> ID：12549195
> 
> 赞同：0
> 
> 时间：2012-09-23T02:12:55.997
> 
> 标签：php, html, css, forms

我以前从未遇到过这个问题，但我希望其他人有。我有一个无法在我的页面上运行的 php 邮件脚本。它甚至不允许您在文本框中输入文本。其中一个选项是一个选择，您甚至无法使下拉菜单起作用。整个事情是完全不可编辑的。

我可以采用相同的确切代码并将其放入一个简单的 HTML 文件中，一切都可以找到。正确发送邮件，一切正常。

很明显，我的网页或 CSS 文件中的某些内容完全扼杀了 HTML 表单，使其无用。

这是表单代码：

```
<form action="contact.php" method="post">
    <table>
        <tr>
            <td><b>Your Name:</b></td>
            <td> <input type="text" name="yourname" /></td>
        </tr>
        <tr>
            <td><b>Subject:</b> </td>
            <td><select name="subject" />
                <option value=""> -- Please select -- </option>
                <option>Prayer Requests</option>
                <option>Praise Report</option>
                <option>General Feedback</option>
            </select></td>
        </tr>
        <tr>
            <td><b>E-mail:</b> </td>
            <td><input type="text" name="email" /></td>
        </tr>
        <tr>
            <td><b>Your comments:</b></td>
            <td><textarea name="comments" rows="10" cols="40"></textarea><td></tr></td>
        <tr>
            <td><input type="submit" value="Send it!"></td>
        </tr>
    </table>
</form> 
```

这是php脚本：

```
<?php
/* Set e-mail recipient */
$myemail  = "feedback@the-ecclesia.org";

/* Check all form inputs using check_input function */
$yourname = check_input($_POST['yourname'], "Enter your name");
$subject  = check_input($_POST['subject'], "Write a subject");
$email    = check_input($_POST['email']);
$website  = check_input($_POST['website']);
$likeit   = check_input($_POST['likeit']);
$comments = check_input($_POST['comments'], "Write your comments");

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
{
    show_error("E-mail address not valid");
}

/* If URL is not valid set $website to empty */
if (!preg_match("/^(https?:\/\/+[\w\-]+\.[\w\-]+)/i", $website))
{
    $website = '';
}

/* Let's prepare the message for the e-mail */
$message = "Hello!

Your contact form has been submitted by:

Name: $yourname
E-mail: $email
URL: $website

Comments:
$comments

End of message
";

/* Send the message using mail() function */
mail($myemail, $subject, $message);

/* Redirect visitor to the thank you page */
header('Location: thanks.htm');
exit();

/* Functions we used */
function check_input($data, $problem='')
{
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    if ($problem && strlen($data) == 0)
    {
        show_error($problem);
    }
    return $data;
}

function show_error($myError)
{
?>

<html>
    <body>
        <b>Please correct the following error:</b><br />
        <?php echo $myError; ?>
    </body>
</html>

<?php
exit();
}
?> 
```

如果需要，我可以发布 CSS。有没有人听说过这样的邮件表格？

如果有帮助，这里是指向页面的链接。

这是表单可以正常工作的基本页面： [工作测试页面](http://www.the-ecclesia.org/phpmailtest.html)

这是我试图让它工作的联系页面，但它不会： [非工作实际页面](http://www.the-ecclesia.org/contactus.html)

在这一点上，我会很感激任何信息，因为我从周四晚上就一直在撞墙，我的头很痛……哈哈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T02:23:01.147

您需要清除容器中的浮动...

```
.container {
  width: 980px;
  position: relative;
  margin-left: auto;
  margin-right: auto;
  clear: both;
} 
```

现代浏览器已经集成了允许您检查 HTML 和 CSS 正在发生的事情的工具。在 Chrome 中，它是视图 > 开发人员 > 开发人员工具。Firebug 是一个不错的 Firefox 插件，Opera 有 Dragonfly。使用这些工具可以在 3 秒内找到问题（您的底部容器挡住了表单），使用这些信息可以更轻松地解决任何渲染问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T02:25:39.907

添加`display: inline-block;`到`<div class="container">`使其可编辑。所以我相信你可以说它是由于 CSS 而无法编辑的……不过，真的不知道为什么。

# c# - C# 中是否有任何 Int24 实现？

> ID：12549197
> 
> 赞同：4
> 
> 时间：2012-09-23T02:13:02.563
> 
> 标签：c#, types

我有一个正在处理的项目，我需要一个.NET BCL 中不存在的数据类型 - 一个无符号 Int24。对于我正在进行的计算，int32 中的第 4 个字节，即使设置为全零，也会破坏我的结果。

编辑：我正在对仅限于 24 位的 24 位整数空间进行按位循环移位。如果在 32 位数字上以 24 位级别执行旋转，则结果非常不正确。

有谁知道可用的这种数据类型的任何第三方实现？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T02:26:13.553

实现 Int24 并不难（老实说！）。但是我们需要更多地了解为什么需要实施它。@nneonneo 想知道您是否正在尝试与使用 24 位整数的本机库进行交互。如果是这种情况，那么您可以通过执行以下操作来完成：

```
[StructLayout(LayoutKind.Sequential)]
public struct UInt24 {
    private Byte _b0;
    private Byte _b1;
    private Byte _b2;

    public UInt24(UInt32 value) {
        _b0 = (byte)( (value      ) & 0xFF );
        _b1 = (byte)( (value >>  8) & 0xFF ); 
        _b2 = (byte)( (value >> 16) & 0xFF );
    }

    public unsafe Byte* Byte0 { get { return &_b0; } }

    public UInt32 Value { get { return _b0 | ( _b1 << 8 ) | ( _b2 << 16 ); } }
}

// Usage:

[DllImport("foo.dll")]
public static unsafe void SomeImportedFunction(byte* uint24Value);

UInt24 uint24 = new UInt24( 123 );
SomeImportedFunction( uint24.Byte0 ); 
```

Modifying the class for big-endian or signed Int24 is an exercise left up to the reader.

# c# - 委托 BeginInvoke 是否需要清理？

> ID：12549198
> 
> 赞同：0
> 
> 时间：2012-09-23T02:13:10.213
> 
> 标签：c#, .net, asynchronous, delegates, .net-2.0

即使我们不需要等待结果，我们是否需要在调用委托 BeginInvoke() 后调用 EndInvoke() 并关闭等待句柄？如果不这样做，任何资源泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:14:54.937

是的; 你总是需要打电话`EndInvoke()`。
否则，.Net 将永远保留结果，以防您最终调用`EndInvoke()`。

如果您想要“触发并忘记它”异步调用（或者即使您不想要），您应该使用`Task`更好的类。

# php - php中\n\t\t\t\t\的含义和用途是什么

> ID：12549199
> 
> 赞同：4
> 
> 时间：2012-09-23T02:13:52.423
> 
> 标签：php, html

谁能告诉我 : **n\t\t\t\t\n\t\t\t**在以下来自和 dwr 服务的响应中的含义和用途。

```
\r\n\t\t\t                    \r\n\t\t\t                    \t\r\n\t\t\t                    \r\n\t\t\t                \r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t                    \r\n\t\t\t                    \r\n\t\t\t                    \t\r\n\t\t\t                    \r\n\t\t\t                \r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t 
```

上面是一个示例，它还包括根据页面设计的 html。我真的不明白这些是什么意思。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T02:16:07.937

它们是[转义序列](http://php.net/manual/en/regexp.reference.escape.php)。 `\r`代表回车，`\n`代表换行（换行），`\t`代表制表符。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T02:15:25.200

`\r\n`是一个换行符，`\t`是一个制表符。

# r - 在 R 中生成“2D”直方图

> ID：12549208
> 
> 赞同：1
> 
> 时间：2012-09-23T02:15:10.753
> 
> 标签：r, 2d, histogram

我是 R 新手，我想知道如何为以下情况生成直方图：

我最初有一个包含 2 列的常规频率表：A 列是类别（或 bin），B 列是属于该类别的案例数

```
Col A    Col B
1-10       7
11-20      4
21-30      5 
```

从这个初始频率表中，我创建了一个包含 3 列的表：Col A 再次是类别（或 bin），但现在 Col B 是“总病例数的一部分”，因此对于类别 1-10，B 列将有值 7/(7+4+5) = 7/16 。现在还有第三列，Col C，它是“在类别 1-20 之间的总病例的分数”，所以对于 1-10，Col C 的值将是 7/(7+4) = 7/11 . 完整的表格如下所示：

```
Col A    Col B    Col C
1-10      7/16     7/11
11-20     4/16     4/11
21-30     5/16      0 
```

如何从上面的这个 3 列表中生成直方图？我的 X 轴应该是 bin（1-10、11-20 等），我的 Y 轴应该是分数，但是对于每个 bin，我有两个分数（Col B 和 Col C），所以会有两个分数“直方图中每个 bin 的 bar”。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:49:21.703

数据：

```
dat <- data.frame(A = c("1-10", "11-20", "21-30"), B = c(7, 4, 5)) 
```

现在，计算比例并创建一个新对象：

```
dat2 <- rbind(B = dat$B/sum(dat$B), C = c(dat$B[1:2]/sum(dat$B[1:2]), 0))
colnames(dat2) <- dat$A 
```

阴谋：

```
barplot(dat2, beside = TRUE, legend = rownames(dat2)) 
```

![在此处输入图像描述](../Images/2d017b85459c1ac10e2a0d779d6873d5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:39:12.947

您的标题应更改为“闪避条形图”而不是 2D 直方图，因为直方图与条形图不同，在 x 轴上具有连续比例，并且它们基本上用于比较单变量数据的分布或基于依赖因素建模的单变量数据的分布. 您正在尝试比较 colB 与 colC ，它们可以使用 2D 散点图有效地可视化，但不能使用条形图。使用直方图比较 colB 和 colC 分布的更好方法是分别绘制两个直方图并检查数据点位置的变化。

如果您想比较 colB 和 colC 的分布，请尝试以下代码：我确实根据您的数据描述对值进行了四舍五入以获得合理的数据。请注意，通过排列进行随机抽样，每次运行相同的代码时，分布都会有轻微的变化，但这不会影响 colB 和 colC 之间分布的推断。

```
library("ggplot2")
# 44 datapoints between 1-10
a <- rep(1:10, 4)
a <- c(a, sample(a, size=4, replace=FALSE))
# 25 datapoints between 11-20
b <- rep(11:20, 2)
b <- c(b, sample(b, size=5, replace=FALSE))
# 31 datapoints between 21-30
c <- rep(21:30, 3)
c <- c(c, sample(c, size=1, replace=FALSE))
colB <- c(a, b, c)
# 64 datapoints between 1-10
a <- rep(1:10, 6)
a <- c(a, sample(a, size=4, replace=FALSE))
# 36 datapoints between 11-20
b <- rep(11:20, 3)
b <- c(b, sample(b, size=6, replace=FALSE))
colC <- c(a, b)
df <- data.frame(cbind(colB, colC=colC))
write.table(df, file = "data")
data <- read.table("data", header=TRUE)
data
ggplot(data=data, aes(x=colB, xmin=1, xmax=30)) + stat_bin(binwidth = 1)
ggplot(data=data, aes(x=colC, xmin=1, xmax=30)) + stat_bin(binwidth = 1)

# if you want density distribution, then you can try something like this:
ggplot(data=data, aes(x=colB, y = ..density.., xmin=1, xmax=30)) + stat_bin(binwidth = 1)
ggplot(data=data, aes(x=colC, y = ..density.., xmin=1, xmax=30)) + stat_bin(binwidth = 1) 
```

HTH-Sathish

# windows - g++ 不适用于 windows（在 MinGW 之后安装）

> ID：12549211
> 
> 赞同：0
> 
> 时间：2012-09-23T02:15:52.267
> 
> 标签：windows, g++, mingw

我将 MinGW 下载并安装到 Windows 7 计算机。我通过 My Computer -> Advanced -> ... 设置 Path 并在字符串末尾添加“; C:\MinGW\bin”。但是，当我在包含文件夹中的提示符中写入“g++ hello.cpp”时，它仍然不起作用。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T02:20:14.110

启动一个新终端并重试。如果这不起作用，请注销并重新登录（我必须在 Vista 中这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T02:56:39.293

问题解决了。添加路径时，我将其设置为“; C:\MinGW\bin”。当我删除分号前后的空格时，它起作用了。

# objective-c - 更改网格中的特定按钮

> ID：12549219
> 
> 赞同：0
> 
> 时间：2012-09-23T02:16:54.790
> 
> 标签：objective-c, xcode, uibutton

我正在使用它来定义按钮网格。我想以编程方式更改特定按钮的属性，例如：

```
if(button.tag == 6)
{
    [button setBackgroundImage:imageRed forState:UIControlStateNormal];
    [button setImage:imageRed forState:UIControlStateNormal];
} 
```

下面的按钮创建。

* * *

```
for (int y=0; y < 3; y++) {
    for (int x = 0; x < 3; x++) {
        UIButton * button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        //button.frame = CGRectMake(40 + 80 * x, 40 + 80 * y, 80, 80);

        button.frame=CGRectMake(5+5*x,5+5*y,5,5);

        unsigned buttonNumber = y * 3 + x + 1;
        button.tag = buttonNumber;
        //[button setTitle:[NSString stringWithFormat:@"%u", buttonNumber] forState:UIControlStateNormal];
        [button setBackgroundImage:imageWhite forState:UIControlStateNormal];
        [button setImage:imageWhite forState:UIControlStateNormal];

        [button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview: button];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:59:05.823

我不完全确定您的问题是什么，但似乎“如何找到具有特定标签的视图？”。答案是 UIView 方法

```
- (UIView *)viewWithTag:(NSInteger)tag 
```

这将查看当前视图及其指定标签的所有子视图，并返回它找到的第一个与其匹配的视图。例如，要获取标签为 6 的按钮，只需执行以下操作：

```
UIView* button = [self.view viewWithTag:6]; 
```

当然，在处理目标方法时，比如你的`buttonPressed:`方法，触发事件的视图作为参数传递，所以如果这是你唯一需要的时候，你也可以使用它。除此之外，您的代码中的所有内容看起来都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:39:14.450

我最终使用了这个...

```
 for (int row = 0; row < ROWS; row++) {
    for (int col = 0; col < COLS; col++) {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
       // [ButtonArray addObject:button];

        button.tag = row * COLS + col;

        button.frame = CGRectMake(5+5*row,5+5*col,5,5);
        [button addTarget:self action:@selector(didPushButton:) forControlEvents:UIControlEventTouchDown];

        [button setBackgroundImage:imageWhite forState:UIControlStateNormal];
        [button setImage:imageWhite forState:UIControlStateNormal];
        [self.view addSubview:button];
        buttonArr[row*COLS+col]=button;
    }
} 
```

# android - 使用自定义速率注册加速度计侦听器

> ID：12549222
> 
> 赞同：0
> 
> 时间：2012-09-23T02:17:45.253
> 
> 标签：android, accelerometer, sensors, frequency, rate

```
private static int SENSOR_DELAY_SLOW = 5000000;

sensMngr = (SensorManager) getSystemService(SENSOR_SERVICE);

sensMngr.registerListener(this, sensMngr.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SENSOR_DELAY_SLOW); 
```

我想每 5 秒捕获一次传感器的数据，但它忽略了我想要的速率。侦听器每秒捕获的值甚至超过 400 次。

当然，我可以在*onSensorChanged(SensorEvent event)*方法中手动过滤传入的数据，但我的主要目标是减少电池消耗。

[文档](http://developer.android.com/reference/android/hardware/SensorManager.html#registerListener%28android.hardware.SensorEventListener,%20android.hardware.Sensor,%20int%29)

我究竟做错了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:11:48.720

您需要 SensorManager.SENSOR_DELAY_UI 并且您将不得不从那里过滤。只有 4 种可选速度，您无法定义自己的速度。SENSOR_DELAY_UI 往往最多每秒大约 3 个样本，并且由于您在传感器值更改时获得结果，因此样本之间可能需要几秒钟。这将因设备而异。

无法在 Android 中为传感器值传递定义固定速率。

# pdf - 从 Automator 中的路径中删除文件名

> ID：12549224
> 
> 赞同：0
> 
> 时间：2012-09-23T02:18:21.310
> 
> 标签：pdf, applescript, automator

我正在创建一个自动化服务，它将我的发票标记为已付款...我有一个工作流程，它获取选定的 PDF，将变量设置为 PDF 的路径，为其添加水印，然后将其返回到其原始位置。但是，最后一步不起作用，因为路径变量链接到 PDF 而不是文件夹。

请帮忙。

![工作流程](../Images/5aa8f28d7a055c2b6447ed84d169bbf1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:40:44.607

您可以像这样获取输入的父文件夹：

![我的文件夹](../Images/9ddff5e246fd0a291d8af428675bfe8e.png)

```
on run {input}
    tell application "Finder" to set myFolder to (container of (first item of input)) as alias
    return myFolder
end run 
```

# cuda - CUDA 纹理内存程序不工作

> ID：12549227
> 
> 赞同：-1
> 
> 时间：2012-09-23T02:19:44.137
> 
> 标签：cuda

我正在通过简单的示例学习在 CUDA 中使用纹理。我尝试了以下示例，但它不起作用。它显示值为 0。

```
#include "cuPrintf.cu"
texture<int,1,cudaReadModeElementType> ref;
__global__ void kernel(int *a)  
{  
    int b=tex1D(ref,0);  
    cuPrintf("value is %d",b);  

}  

int main()  
{  
    int *a;  
    cudaMalloc((void**)&a,32000*sizeof(int));  
    cudaMemset(a,1,32000*sizeof(int));  
    cudaChannelFormatDesc bit = cudaCreateChannelDesc<int>();  
    cudaBindTexture(0,ref,a,bit,32000*sizeof(int)); 
    kernel<<<1,1>>>(a);  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:16:17.463

您已经使用该`cudaMalloc`函数分配了内存。如果将纹理绑定到使用 分配的内存`cudaMalloc`，则可以使用`tex1Dfetch()`内核中的函数对其进行访问。使用`tex1D`将返回零。

但是，如果将纹理绑定到由`cudaMallocPitch`or分配的内存`cudaArray`，则可以使用内核内部的`tex1D`or函数访问它。`tex2D`

# asp.net - 在 ASP.NET 中制作网站，但无法让浏览器滚动条工作

> ID：12549228
> 
> 赞同：1
> 
> 时间：2012-09-23T02:19:47.097
> 
> 标签：asp.net, scroll, scrollbar

我是 Web 开发的新手，所以也许这是一个很容易解决的问题，但目前我很困惑。

我正在制作这个网站 - [http://www.astranavis.com](http://www.astranavis.com)，但无法让浏览器滚动条工作。（我不想将它插入到 globalContainer div 标签中，如果浏览器窗口最小化，我希望滚动条自动出现在浏览器中）。

我尝试将overflow-y:scroll 插入到css 的body 标签中，虽然它在浏览器中创建了实际的滚动条，但它实际上并没有滚动。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:36:49.933

您的问题出`position: fixed;`在您的全局容器中。您将其居中的方式是..至少可以说很奇怪。相反，使用`margin: 0 auto;`它水平居中。此外，摆脱负边距。

# c# - 使用 XAML C# 删除背景动画？

> ID：12549230
> 
> 赞同：3
> 
> 时间：2012-09-23T02:20:00.870
> 
> 标签：c#, windows-8, microsoft-metro, winrt-xaml

我正在创建一个带有后退按钮和徽标的标题。我想出了如何使用添加背景

```
<Grid Grid.ColumnSpan="2" Background="Black">
[...]
</Grid> 
```

但现在我最终将背景作为页面动画过渡的一部分。我想要的与 Microsoft Contoso News 演示应用程序中“为[您的 UI 制作动画](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh452701.aspx#page_transition)”页面上的标题背景完全一样。第一个视频显示应用程序中的所有内容都是动画的，标题是静态的。

我尝试了多次搜索并将我认为可行的代码放在一起，包括弄乱`<EntranceThemeTransition FromHorizontalOffset="0" FromVerticalOffset="0"/>`. 除非我遗漏了什么，否则我找不到有关删除动画的文档。

朝着正确方向迈出的一步将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T05:03:50.360

我想我在凌晨 3 点的会议期间没有足够彻底地阅读 Microsoft 的文档。

我需要做的是`EntranceThemeTransition`向父级添加一个自定义：

```
<Style x:Key="LayoutRootStyle" TargetType="Panel">
    <Setter Property="Background" Value="{StaticResource ApplicationPageBackgroundThemeBrush}"/>
    <Setter Property="ChildrenTransitions">
        <Setter.Value>
            <TransitionCollection>
                <EntranceThemeTransition FromHorizontalOffset="0" IsStaggeringEnabled="false"/>
            </TransitionCollection>
        </Setter.Value>
    </Setter>
</Style> 
```

告诉它水平移动零像素（`FromHorizontalOffset="0"`换句话说，根本不动画），并`IsStaggeringEnabled="false"`告诉它一次渲染所有项目。从这里，我可以为每个孩子添加自定义动画。

MSDN 资源：
[IsStaggeringEnabled 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.entrancethemetransition.isstaggeringenabled)
[FromHorizo​​ntalOffset 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.entrancethemetransition.fromhorizontaloffset)

# iphone - iOS 6 中视图控制器的不正确旋转

> ID：12549234
> 
> 赞同：2
> 
> 时间：2012-09-23T02:20:26.777
> 
> 标签：iphone, objective-c, ios, xcode, rotation

在我的应用程序中，我一直在使用现已弃用的 shouldAutoRotateToFace 方法。现在，当使用 iOS 6 模拟器时，我的所有子视图都旋转到纵向，而设备处于横向。有谁知道可能导致这种情况的原因？我已经尝试用supportedOrientations方法（或者你现在应该使用的任何方法）替换我的主视图控制器中的自动旋转。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T03:32:56.093

如果您可以登录 Apple 开发论坛，[请查看此线程](https://devforums.apple.com/message/727235)。

基本上，这是对我有帮助的信息：

* * *

**1.**我必须`window.rootViewController = mainViewController`进去

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

**2.**对于视图控制器

```
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation 
```

**不**只是返回`YES`，我必须添加

```
- (NSUInteger)supportedInterfaceOrientations 
```

返回相同的值

**3.**新增

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
            UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

到 mainViewController.m

**4.**新增

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft |
            UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

到 appDelegate.m （我相信这是可选的，用于设置默认值，以防它们未在应用程序的 Info.plist 文件或单个视图控制器中指定）

因为我希望我的代码向后兼容回 3.0，所以我没有使用*所有*方向掩码，因为我需要使用 XCode 4.3 进行编译

# ios - Xcode 4.5（iOS 6 SDK）不适用于旧项目，编译xib文件时冻结

> ID：12549239
> 
> 赞同：0
> 
> 时间：2012-09-23T02:22:21.790
> 
> 标签：ios, xcode

我升级到 Mountain Lion 和 XCode 4.5，然后当我在 Snow Leopard 上打开与 XCode 4.2（iOS SDK 5）一起工作的旧项目然后构建时，它在编译 xib 文件时卡住了。xib 文件是使用旧 SDK（XCode 3.2.5 和 XCode 4.2）创建的。如果我选择一个 xib 文件，而不是显示 xib 编辑界面，它只会冻结 XCode。

知道如何解决这个问题吗？

我也想知道是否有办法在 Mountain Lion 上安装 XCode 4.2？我的旧安装适用于 Snow Leopard，因此现在无法使用，但从苹果网站上只有一个 XCode 4.2 Lion/Snow leopard 可供下载。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:02:15.123

我想到了。我安装了 3 个版本的旧 XCode（3.2.1 3.2.5,4.2），删除它

sudo /Developer/Library/uninstall-devtools --mode=all

然后重新启动，现在不再冻结

# java - 安装了新版本的 Eclipse 并更改了设置

> ID：12549240
> 
> 赞同：1
> 
> 时间：2012-09-23T02:22:38.870
> 
> 标签：java, eclipse, ide, eclipse-indigo, eclipse-juno

我以前有 eclipse indigo，一切看起来都不错，但是当我删除它并安装新的 Eclipse(Eclipse Juno) 时，它改变了 .HTML 和 .JSP 文件的字体颜色，我怎样才能将其返回？jsp 和 .html 文件的字体颜色看起来像这样

![在此处输入图像描述](../Images/36d2c3e3d489e8a4d68c72834e21428e.png)

# shell - sed 在每一行中添加空格

> ID：12549241
> 
> 赞同：0
> 
> 时间：2012-09-23T02:22:46.780
> 
> 标签：shell

我想在名为 test 的文本中插入 4 个空格。

```
sed 's/^/  \{4\}/'  test 
```

为什么它不能工作？我该怎么办？

我想添加 10 个空格或 20 个空格怎么样？

```
sed 's/^/    /' test  #can work ,but not well done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:23:54.580

nneonneo 解释了为什么您的脚本不起作用。众所周知，如何在左侧用空格填充行以实现固定宽度的行，但是在 sed 中为每一行在左侧添加相同数量的空白是一个不同的问题。

如果你能忍受使用 sed 以外的东西，

或者你可以使用`ruby`

```
ruby -e 'ARGF.each {|l| puts (" " * 4) + l}' test 
```

或者您可以使用`awk`：

```
awk '{for (i=0; i<4; i++) printf(" "); print $0}' test 
```

或者`perl`：

```
perl -ne 'printf "%s%s", (" " x 4), $_' test 
```

编辑：我希望看到一个纯粹的`sed`解决方案。使用条件分支 ( `t`) 似乎对填充很有用，但不能满足您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T02:24:04.677

`{n}`重复在替换模式中不起作用。

做就是了

```
sed 's/^/    /' test 
```

# java - Canvas.DrawBitmap() 不会在 android 上绘制任何东西！！:(

> ID：12549246
> 
> 赞同：-1
> 
> 时间：2012-09-23T02:23:24.960
> 
> 标签：java, android, bitmap, android-canvas

我正在尝试制作游戏，但我卡在了图纸上......

我制作了一个自定义的surfaceView（使用draw（）和update（）方法）和我的游戏循环（更新和绘制视图）。

在我使用 Canvas.drawBitmap(Bitmap, Rect src, Rect dst, Paint p) 方法之前，一切都很完美，因为当我尝试绘制时，例如：

```
Canvas.DrawBitmap(bitmap, null, new Rect(100, 100, 200, 150), null); 
```

它不画任何东西！但这是最糟糕的部分，如果我这样写的话：

```
Canvas.DrawBitmap(bitmap, null, new Rect(0,0,100,150), null); 
```

它必须完美地绘制它！！！！如果我放这样的东西：

```
Canvas.DrawBitmap(bitmap, null, new Rect(50,0,100,150), null); 
```

它形成了限制，我的意思是，一切都超过了（例如，因为我不确定有多少像素）100px 高度没有出现！我试过很多方法，拜托！！！你能帮助我吗！！！

（PD：我的母语是西班牙语，如果我的文字有问题，我很抱歉。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:01:00.137

The last parameter to any `Canvas#draw` methods as an object of `Paint` class. Without it, Canvas cannot do any drawing.

Before you do any drawing, initialize a `Paint` object with `Paint paint = new Paint()` and pass it to the `Canvas#draw` method. Remember to `null` the Paint object when you're done drawing, as it takes up a lot of memory.

# java - 最简单的任务是给我 nullPointerException

> ID：12549247
> 
> 赞同：0
> 
> 时间：2012-09-23T02:23:34.280
> 
> 标签：java, nullpointerexception

```
 Collection Class

private E[] data;

@Override
       public boolean add(E element) {
       //NULL POINTER EXCEPTION HAPPENS ON NEXT LINE
                data[actualSize] = element;
                actualSize++;

          return true;
       } 
```

主要的

```
 System.out.println ("Enter the integer to be added:   ");
        n = scan.nextInt();

        ac.add(n); 
```

我在集合类中的注释行之后得到一个空指针异常......为什么？！？！？

编辑：所以我的问题是我需要调整 E[] 数据的大小，如何调整数据的大小？我的老师从来没有告诉我们这个“E”的生意，她甚至从来没有告诉我们这个东西“E”到底叫什么或用来做什么的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T02:45:17.167

> 为什么？！？！？

因为`data`还没有初始化。这`null`是尚未初始化的实例变量的默认值。

* * *

但似乎还有一个更根本的问题：

*   您似乎有这样的印象，Java 数组会神奇地为自己分配正确的大小……并且它们会增长。事实上，当你分配一个数组时，你的程序必须明确说明它有多少个元素。一旦它被分配，数组的大小是固定的。

*   该代码似乎是在尝试实现某种泛型类型（其中`E`）是泛型类型参数。

* * *

> 所以我的问题是我需要调整 E[] 数据的大小，如何调整数据的大小？

您创建一个大小合适的新数组，将元素从旧数组复制到新数组，然后更新`data`变量以指向新数组。查看有关如何在 Java 中创建新数组的笔记/教科书。

> 我的老师从来没有告诉我们这个“E”的生意，她甚至从来没有告诉我们这个东西“E”到底叫什么或用来做什么的。

1.  它很可能是一个泛型类型参数。

2.  我很确定她*会*告诉全班同学，或者设置 Java 教科书的相关部分供全班同学阅读。

（假设这`E`是一个泛型类型参数，分配一个`E[]`没有“未经检查的转换”警告的新数组实例有点棘手。也许你的导师*已经*领先于班级目前的能力......）

# objective-c - 在 Objective-C 中，我们可以有一个泛型或基类引用来调用不同的类方法吗？

> ID：12549250
> 
> 赞同：0
> 
> 时间：2012-09-23T02:24:11.213
> 
> 标签：objective-c

在 Objective-C 中，我们可以有一个类 Foo 和一个类 Bar，然后做类似的事情

```
Class aClass = [Foo class];
[aClass getURLString]; 
```

其中`getURLString`是类 Foo 或 Bar 的类方法。所以换句话说，根据类调用不同的类方法，这个类被一个变量引用。

在本例中，Foo 和 Bar 具有相同的 NSObject 基类。我尝试使用上面的代码，但它不起作用。如果我使用

```
id aClass = Foo; 
```

或者

```
id aClass = [Foo class]; 
```

它也行不通。我必须实例化一个虚拟对象吗？Objective-C 可以在没有实例化的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:30:09.297

你正在尝试的应该可以正常工作。例如，以下工作：

```
Class NSStringClass = [NSString class];
NSString *string = [NSStringClass string]; 
```

您是否可能忽略了`#import`的定义`Foo`？

# php - 我应该使用 or for loading a video?

> ID：12549252
> 
> 赞同：2
> 
> 时间：2012-09-23T02:24:24.673
> 
> 标签：php, object, iframe, youtube

I load lots of Youtube videos in one page (up to 25). Should I use iframe for each video or show it just in `<object>`? As I understand, if I use iframe, my page will load much faster, because it will load my page first and it will not have to wait to load videos. Am I right?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T02:33:46.447

Your understanding is incorrect. Your "page" (that is, your HTML document itself) will load and render in the same amount of time. However using `<iframes>` means the browser has to load not just the same video files that it would with `<object>`, but also the HTML contained within each iframe.

Note that YouTube instructs users to use `<iframe>` to embed a video because it allows YouTube to customize the HTML sent to the user: appropriate browsers will be given the HTML5 `<video>` treatment.

So it's a trade-off: you can slightly decrease page load times with `<object>` or `<video>` at the cost of excluding non-Flash (or non-HTML5 browsers, respectively), or you can use `<iframe>` and be sure of compatibility with whatever browser your visitors might be using.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T02:32:19.027

You should use `<iframe>` since `<object>` is deprecated. The first one supports both Flash and HTML5 video. The second one support only Flash. This is extremely useful for users who don't or can't use flash (all of iPad/iPhone users, some of Linux folks).

[Google Help on this question](http://support.google.com/youtube/bin/answer.py?hl=en&answer=171780&expand=UseOldEmbedCode#oldcode)

# node.js - Node.js 中间件组织和参数验证

> ID：12549256
> 
> 赞同：8
> 
> 时间：2012-09-23T02:25:08.297
> 
> 标签：node.js, express, middleware, connect.js

我正在构建一个快速应用程序，我想知道我能用中间件获得多少。粗略地说，我想用中间件完成以下工作。

完毕：

*   将 requestId 添加到所有路由
*   验证请求
*   检查用户是否有权访问给定资源（身份验证除外）

尚未完成：

*   **A)**验证给定路由的参数
*   **B）**如果中间件因路由而异，则以合理的方式组织中间件，并且每个路由例行调用 3 个中间件

我在一个单独的文件中定义了我的中间件，并将其导入 app.js，如下所示：

```
var middleware = require('./middleware');
var requestId = middleware.requestId;
var authenticate = middleware.authenticate; 
```

要将其应用于所有路由，我将其添加到 express 配置中：

```
var app = express.createServer();
app.configure(function () {
  app.use(express.logger());
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(requestId); // add requestId to all incoming requests
}); 
```

对于路线细节，我将其添加为 app.get 参数：

```
var routes = require('./v1/routes');
app.get("/v1/foo", routes.foo);
app.get("/v1/bar", authenticate, routes.bar); 
```

**问题A**

我很想拥有可以用来检查参数的中间件

```
validate('x','y','z') 
```

并像这样对给定的路线使用它：

```
app.get("/v1/bar", authenticate, validate('x','y','z'), routes.bar); 
```

有没有好的方法来做到这一点？或者我应该只是在路由定义文件中基于每个路由进行验证？

**问题 B**

有没有更好的方法来组织和使用我应该考虑的中间件？

**更新**

我正在寻找一种方法来验证路由之间变化很大的参数。下面显然不起作用-我不能将参数传递给中间件-但是有没有办法可以定义中间件来执行此操作并按照我上面所说的那样调用它？

```
var validateParams = function (req, res, params, callback) {
  // Make sure the required parameters are in the request
  console.log('checking for params '+params);
  for (var i = 0; i < params.length; i++) {
    var param = params[i];
    if(!(param in req.query)){
      logger.info('cannot find param ['+param+'] in req: '+JSON.stringify(req.query));
      res.writeHead(400, {
        "Content-Type": "application/json"
      });
      var out = {
        "err": "request missing required parameters"
      };
      res.end(JSON.stringify(out));
      return;      
    }
  }
  callback();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:00:53.447

**Problem A**

```
app.get("/v1/bar", authenticate, validate, routes.bar);

function validate(req,res,next){

//Get all parameters here by req.params and req.body.parameter
//validate them and return.
if(validation_true)
next()
} 
```

**Problem B**

You can use middleware in a way that you don't always need to call authenticate and validate they are called automatically. But that can lead to a mess, for ex. Your middleware then would run on every call, so for SIGNUP/REGISTER there is no point running authenticate.

With validate, sometimes you would need to validate email, sometimes phone no. so both cannot go along.

So using them separate on every call seems the BEST way to me.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-14T15:49:37.700

您还可以使用高阶函数（返回函数的函数）。从而传递一组端点特定参数来检查。

```
module.export = Class RequestValidator {
  static validate(params) {
    return function(req, res, next){
      for(const param of params) {
       validateYourParams here...
       if (validation fails) {
         return next(new Error());
       }
      }
      next();
    }
  }
} 
```

在您的 routeDefinition 中，您现在可以调用验证中间件并将特定于路由的参数传递给它。

```
const RequestValidator = require('your-validation-middleware');
const controller = require('your-controller');

app.post('/path')
   .RequestValidator.validate(
   [{
    name: 'paramName',
    type: 'boolean'
   },
   {
    name: 'paramName2',
    type: 'string'
   }
   ])
   .Controller.handleRequest; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-24T12:13:05.990

您可以使用[express-validation](https://www.npmjs.com/package/express-validation)来验证请求的正文、查询、参数、标头和 cookie。如果任何配置的验证规则失败，它会以错误响应。

```
var validate = require('express-validation'),
    Joi = require('joi');

app.post('/login', validate({
  body: {
    email: Joi.string().email().required(),
    password: Joi.string().regex(/[a-zA-Z0-9]{3,30}/).required()
  }
}), function(req, res){
    res.json(200);
}); 
```

这将检查电子邮件和密码正文参数是否与验证规则匹配。

如果验证失败，它将响应以下错误。

```
{
  "status": 400,
  "statusText": "Bad Request",
  "errors": [
    {
      "field": "password",
      "location": "body",
      "messages": [
        "the value of password is not allowed to be empty",
        "the value of password must match the regular expression /[a-zA-Z0-9]{3,30}/"
      ],
      "types": [ "any.empty", "string.regex.base" ]
    }
  ]
} 
```

您还可以查看我的 repo [express-mongoose-es6-rest-api](https://github.com/KunalKapadia/express-mongoose-es6-rest-api)以获得完整的集成。

# c# - 为两个表和配置文件属性中的数据创建模型？

> ID：12549258
> 
> 赞同：0
> 
> 时间：2012-09-23T02:25:22.023
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc-3, entity-framework

我现在只使用 Asp.Net MVC 3 几个月了，这对 MVC 模式来说是相当新的。多年来一直使用 .net 和 C#。

我很困惑创建适合我的情况所需的模型的最佳方式。我正在创建一个新闻发布网站，并且正在处理实际的发布数据本身。我在数据库中有一个 NPost 表，其中包含帖子的数据，如 Title、Body、UserId、CreationDate 等。我还在使用 Forms Authentication 中的构建，并为它自动生成表，并与数据的配置文件属性一起使用比如名字，头像图片。

您还应该知道我正在使用 EntityFramework 和 Reverse Engineer Code First 来生成我迄今为止一直在使用的模型。

**我的问题：**如何将帖子与作者联系起来？

在我刚刚在存储过程中加入 UserId 上的表并使用数据源将其与控件连接之前，但我对在 MVC 中执行此操作的最佳方式感到困惑。

感谢您给我的任何帮助！

# git - 我可以删除我所有的提交历史，但保持我的文件不变吗？

> ID：12549261
> 
> 赞同：0
> 
> 时间：2012-09-23T02:27:04.460
> 
> 标签：git

所以，我需要学习如何构建一个 Shopify 应用程序，并且是一个相当新的开发人员，所以我一直在研究如何存储我的密钥和秘密等。

我可能会将它们存储在我的开发机器和 Heroku 上的 ENV 变量中。问题是 - 我如何删除所有过去的提交数据，以便我的密钥和秘密得到烤？

我现在的想法......谷歌搜索并寻找删除提交但保持我的文件不变的方法。或者...复制整个目录，除了 /.git，然后重新开始。

我提前感谢您的帮助。凯文

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T02:29:58.873

只需删除 .git 目录，然后`git init .`重新开始。

# php - 无法从 HTML5 和 PHP 表单在 MySQL 表中插入记录

> ID：12549264
> 
> 赞同：1
> 
> 时间：2012-09-23T02:27:35.983
> 
> 标签：php, mysql, forms, html

我无法在此处插入记录。不知道为什么。我的登录有效。我的两个`echo`陈述有效。但是没有记录被记录。所有以“type”或“subj”开头的变量都是复选框表单元素，因此我在数据库中将这些列设置为“Null”（使用 phpMyAdmin）。不确定这是否正确 - 想法是它们不是必需的。此外，我的数据库中的第一列不是此表单中的条目，它应该是条目的 id，设置为主键，不为空，并设置为自动增量。这是我第一次这样做。我怎样才能测试发生了什么？谢谢！-*我的代码块到底发生了什么！！！*

```
 <!DOCTYPE html>
    <head>
    <title>Submit entry to database </title>
    </head>
    <body>  <?php
    //when Submit clicked
    if ( isset($_POST['submit']) ){
    $data_source = 'mysql:host=myHost;dbname=myDatabase';
    $db_user = 'myUserName';
    $db_password = 'myPassword';
    $db = new PDO($data_source, $db_user, $db_password);

    //load the form data into variables
    $reviewer = $_POST['reviewer'];
    $osj = $_POST['osj'];
    $touchDate = $_POST['touchDate'];
    $typeAction = $_POST['typeAction'];
    $typeTech = $_POST['typeTech'];
    $typeReg = $_POST['typeReg'];
    $subjSuit = $_POST['subjSuit'];
    $subjMFtran = $_POST['subjMFtran'];
    $subjConcen = $_POST['subjConcen'];
    $subjOption = $_POST['subjOption'];
    $subjTrade = $_POST['subjTrade'];
    $subjMuni = $_POST['subjMuni'];
    $subjUIT = $_POST['subjUIT'];
    $subjBkRecMFdir = $_POST['subjBkRecMFdir'];
    $subjOBA = $_POST['subjOBA'];
    $subjOther = $_POST['subjOther'];
    $flavor = $_POST['flavor'];
    $notes = $_POST['notes'];
    echo $reviewer;
    //prepare SQL statement
    $statement = "INSERT INTO tblBranchTouches 
    (reviewer, osj, touchDate, typeAction, typeTech, typeReg, subjSuit, 
    subjMFtran, subjConcen, subjOption, subjTrade, subjMuni, subjUIT, subjBkRecMFdir, 
    subjOBA, subjOther, flavor, notes) 
    VALUES ('$reviewer', '$osj', '$touchDate', '$typeAction', '$typeTech', '$typeReg', '$subjSuit', 
    '$subjMFtran', '$subjConcen', '$subjOption', '$subjTrade', '$subjMuni', '$subjUIT', '$subjBkRecMFdir', 
    '$subjOBA', '$subjOther', '$flavor', '$notes') ";
    $db->query($statement);
    //confirm
    echo "<h1>Thank You</h1>";
    }
    ?>
    <form method="post">
    <p>
    <label>
      Reviewer: 
      <input type="text" name="reviewer" list="ARTies">
      <datalist id="ARTies">
        <option value = "MWeber">
        <option value = "JBurchill">
        <option value = "DGlazer">
        <option value = "EKiburz">
        <option value = "CSupak">
        <option value = "MVallery">
        <option value = "CHo">
        <option value = "HPatil">
        <option value = "NVanDoorn">
      </datalist>
    </label>
    <label>
      OSJ: 
      <input type="text" name="osj" maxlength=3 size=3>
    </label>
    <input type="date" name="touchDate" value="<?php echo date('Y-m-d', strtotime(date('Y/m/d'))); ?>">
    </p>
    <fieldset>
    <legend>Type: </legend>
    <p><label><input type="checkbox" name="typeAction"> Action </label>
    <label><input type="checkbox" name="typeTech"> Tech. </label>
    <label><input type="checkbox" name="typeReg"> Reg.</label></p>
    </fieldset>
    <fieldset>
    <legend>Subject: </legend>
    <p>
    <label><input type="checkbox" name="subjSuit"> Suitability </label>
    <label><input type="checkbox" name="subjMFtrans"> MF Transactions </label>
    <label><input type="checkbox" name="subjConcen"> Concentrations </label>
    <label><input type="checkbox" name="subjOption"> Options </label>
    <label><input type="checkbox" name="subjTrade"> Trade Review </label>
    <label><input type="checkbox" name="subjMuni"> Munis </label>
    <label><input type="checkbox" name="subjUIT"> UITs </label>
    <label><input type="checkbox" name="subjBkRecMFdir"> Bks-Recs-MFDirect </label>
    <label><input type="checkbox" name="subjOBA"> OBAs  </label>
    <label><input type="checkbox" name="subjOther"> Other </label>
    </p>
    </fieldset>
    <p>
    <label>
      Flavor: 
      <input type="number" name="flavor" min=1 max=5 value=3>
    </label>
    <label>Notes: <textarea name="notes"></textarea></label>
    </p>
    <p>
    <input type="submit" name="submit" value="ENTER">
    </p>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:19:37.187

对于`INSERT`，您需要使用`pdo::exec`，这将返回否。插入的行数。[http://us.php.net/manual/en/pdo.exec.php](http://us.php.net/manual/en/pdo.exec.php) `pdo::query`用于`SELECT`查询。

所以你的陈述是，

```
 $statement = "INSERT INTO tblBranchTouches 
(reviewer, osj, touchDate, typeAction, typeTech, typeReg, subjSuit, 
subjMFtran, subjConcen, subjOption, subjTrade, subjMuni, subjUIT, subjBkRecMFdir, 
subjOBA, subjOther, flavor, notes) 
VALUES ('$reviewer', '$osj', '$touchDate', '$typeAction', '$typeTech', '$typeReg', '$subjSuit', 
'$subjMFtran', '$subjConcen', '$subjOption', '$subjTrade', '$subjMuni', '$subjUIT', '$subjBkRecMFdir', 
'$subjOBA', '$subjOther', '$flavor', '$notes') ";
$count = $db->exec($statement);
if($count > 0)
  echo "<h1>Thank You</h1>";
else //else statement if you need it
  echo "<h1>No records were inserted.</h1>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:15:02.117

您可以使用以下方法检查错误：

if ($db->e​​rror) 回显 $db->e​​rror;

很有用！永远不要假设查询是成功的；你总是想检查错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:15:22.593

这就是现在对我有用的东西。我只是希望我不必编写大约 7 次不同的表单变量。再次感谢...

```
<?php
//when Submit clicked
if ( isset($_POST['submit']) ){
  $data_source = 'mysql:host=myHost;dbname=myDB';
  $db_user = 'myUsername';
  $db_password = 'myPass';
  //create a new PDO object - constructor takes at most 4 parameters, DSN, username, password, 
  //and an array of driver options
  //a DSN is basically a string of options that tell PDO which driver to use, and the connection details
  $conn = new PDO($data_source, $db_user, $db_password, 
                array(PDO::ATTR_EMULATE_PREPARES => false, 
                      PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
  //first driver option turns off prepare emulation which is enabled in MySQL driver by default, but really should be turned off to use PDO safely
  //second driver option puts PDO into exception mode
  //
  //load the form data into variables
  $reviewer = $_POST['reviewer'];
  //(more)      
  //prepare SQL statement
  $sql="INSERT INTO tblBranchTouches 
    (reviewer, osj, touchDate, typeAction, typeTech, typeReg, subjSuit, 
    subjMFtrans, subjConcen, subjOption, subjTrade, subjMuni, subjUIT, subjBkRecMFdir, 
    subjOBA, subjOther, flavor, notes) 
    VALUES (:reviewer, :osj, :touchDate, :typeAction, :typeTech, :typeReg, :subjSuit, 
    :subjMFtrans, :subjConcen, :subjOption, :subjTrade, :subjMuni, :subjUIT, :subjBkRecMFdir, 
    :subjOBA, :subjOther, :flavor, :notes)";
  $q = $conn->prepare($sql);  
  $q->execute(array(':reviewer'=>$reviewer, ':osj'=>$osj, ':touchDate'=>$touchDate, ':typeAction'=>$typeAction, ':typeTech'=>$typeTech, 
                   ':typeReg'=>$typeReg, ':subjSuit'=>$subjSuit, ':subjMFtrans'=>$subjMFtrans, ':subjConcen'=>$subjConcen, ':subjOption'=>$subjOption, 
                   ':subjTrade'=>$subjTrade, ':subjMuni'=>$subjMuni, ':subjUIT'=>$subjUIT, ':subjBkRecMFdir'=>$subjBkRecMFdir, ':subjOBA'=>$subjOBA, 
                   ':subjOther'=>$subjOther, ':flavor'=>$flavor, ':notes'=>$notes));
} 
```

?>

# jquery - jquery运行后CSS属性不会保留

> ID：12549265
> 
> 赞同：2
> 
> 时间：2012-09-23T02:27:47.340
> 
> 标签：jquery, css

“活动”类应该使导航项目发光。

[http://kevinmikol.com/dmi/home](http://kevinmikol.com/dmi/home)

```
(function($) {
  var currentRadius, multiplier;

  function parseOptions(options) {
    return {
      RADIUS:     (options.radius    || 20),
      DURATION:   (options.duration  || 500),
      TEXT_COLOR: (options.textColor || '#fff'),
      HALO_COLOR: (options.haloColor || '#777')
    }
  }

  function currentRadius(elem) {
    if (prop = elem.style['text-shadow']) {
      return parseInt(prop.match(/0 0 (\d+)px/));
    } else {
      return 0;
    }
  }

  function stepTextShadow(fx) {
    if (fx.state == 0) {
      fx.start = currentRadius(fx.elem);
    }

    updatedRadius = fx.end.begin ?
      parseInt(fx.end.radius * fx.pos) :
      parseInt(fx.end.radius - (fx.end.radius * fx.pos))

    if (fx.end.begin || (fx.state < 1)) {
      $(fx.elem).css('text-shadow', fx.end.color + ' 0 0 ' + updatedRadius + 'px');
    } else {
      $(fx.elem).css('text-shadow', $(fx.elem).data('glow.originalGlow'));
    }
  }

  function addGlow(opts) {
    var opts = parseOptions(opts || { });

    function startGlow() {
      $(this).stop().animate({
        color: opts.TEXT_COLOR,
        textShadow: {
          begin: true,
          color: opts.HALO_COLOR,
          radius: opts.RADIUS
        }
      }, opts.DURATION);
    }

    function startFade() {
      $(this).stop().animate({
        color: $(this).data('glow.originColor'),
        textShadow: {
          begin: false,
          color: opts.HALO_COLOR,
          radius: opts.RADIUS
        }
      }, opts.DURATION);
    }

    with($(this)) {
      bind('mouseenter', startGlow);
      bind('mouseleave', startFade);
      data('glow.originColor', css('color'));
      data('glow.originalGlow', (css('text-shadow') || 'none'));
    }

    return this;
  }

  $.fx.step['textShadow'] = stepTextShadow;
  $.fn.addGlow = addGlow;
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T02:57:16.163

据我了解。当悬停在单击的页面上时，发光消失是因为当悬停时，类中的`a`标签正在获取属性。因此，如果您添加一个脚本，以便导航选项卡的每次悬停，您都可以检查该类是否处于活动状态您可以使用`li``active``display none``li is active``li`

```
$('.active').find('a').attr('style',''); 
```

当然，您已经`active`使用 css 给出了类的样式。但是内联样式总是会覆盖 css 样式。

希望这可以帮助。

# mysql - 使用 WHERE 选择 LEFT/RIGHT JOIN 并返回 NULL

> ID：12549266
> 
> 赞同：4
> 
> 时间：2012-09-23T02:27:48.200
> 
> 标签：mysql, sql

我需要将以下两个**工作**查询转换为一个查询，但是由于各种原因，我尝试的所有内容都死在了我身上。我的最终结果是尝试列出手头上的所有软件，并显示为正在查询的特定 PC 安装了哪些软件，哪些未安装。对于已安装的软件，列出名称，否则名称显示 NULL。我在 where 子句中尝试了一些子选择语句，它给了我一个没有错误的结果，但不是正确的结果。任何帮助表示赞赏。

qry1

```
SELECT device_software.sw_id

FROM Software_device LEFT JOIN Device ON Software_device.d_id = Device.d_id

WHERE Device.d_id = 1; 
```

qry2

```
SELECT Software.name, Software.sw_id, qry1.sw_id

FROM software LEFT JOIN qry1 ON software.sw_id = qry1.sw_id; 
```

* * *

设备表

```
------------------
| name  | d_id  |
------------------
| PC1   | 1     |
| PC2   | 2     |
| PC3   | 3     |
------------------ 
```

软件表

```
------------------
| name  | sw_id |
------------------
| SW_a  | A     |
| SW_b  | B     |
| SW_c  | C     |
| SW_d  | D     |
------------------ 
```

Software_Device 表（多对多）

```
------------------
| d_id  | sw_id |
------------------
| 1     | A     |
| 1     | B     |
| 2     | A     |
| 2     | B     |
| 2     | C     |
------------------ 
```

结果我正在寻找...（在 PC1 上安装和卸载软件）

```
---------------------------------
| Sotfware  | pc_id |   name    |
---------------------------------
| SW_a      | 1     |   PC1     |
| SW_b      | 1     |   PC1     |
| SW_c      | NULL  |   NULL    |
| SW_d      | NULL  |   NULL    |
--------------------------------- 
```

我列出了 mysql 和 sql 标签，因为我认为这并不重要，但以防万一，我正在使用 mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:46:37.477

```
SELECT 
   s.name AS software, 
   IF((SELECT COUNT(sw.d_id) FROM software_device sw WHERE sw.sw_id = s.sw_id AND d_id = 1) > 0, 1, NULL) AS pc_id, 
    (SELECT d.name FROM device d INNER JOIN software_device sw ON d.d_id = sw.d_id WHERE sw.sw_id = s.sw_id AND d.d_id = 1)  AS name
FROM 
   software s
ORDER BY s.name 
```

**编辑2：**也许不是最有效/最漂亮的，但它有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:23:38.500

根据您的要求，这将为您提供正确的结果：

```
select software.name as Software,
    device.d_id as pc_id,
    device.name as name
from software
    left join device_software
        on device_software.sw_id = software.sw_id
    left join device
        on device_software.d_id = device.d_id
            and device.d_id = 1 
```

只是注意：我更喜欢将主键作为表中的第一列。我也建议用复数命名你的表（设备）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T15:58:27.993

如果 RomanKonz 的答案肯定很接近，只需将“where”移动到“on”，让左连接正常工作。

```
select software.name as Software,
    device.d_id as pc_id,
    device.name as name
from software
    left join device_software
        on device_software.sw_id = software.sw_id
       and **device_software**.d_id = 1
    left join device
        on device_software.d_id = device.d_id
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T02:46:12.343

以下应该做你需要的：

```
select s.`name` as `Software`, d.`d_id`, d.`name` as `Device` 
from software s
      left outer join software_device sd 
          on sd.`sw_id` = s.`sw_id` and sd.`d_id` = 1     
      left outer join device d using (`d_id`)  
order by s.`name` 
```

# html - 媒体=全部与媒体=屏幕

> ID：12549267
> 
> 赞同：34
> 
> 时间：2012-09-23T02:28:16.157
> 
> 标签：html, css, media-queries

似乎最近我看到更多的人开始在他们的样式表中使用`media="all"`vs。`media="screen"`

我的问题是我应该什么时候使用`media="all"`over `media="screen"`，反之亦然？

注意：我正在使用 HTML5 Doctype，如果这有影响的话。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-23T02:31:38.100

```
media="all"    // Used for all media type devices ( its default under html 5)
media="screen" // Used for computer screens(default value  for html 4.01) 
```

**好读**

[7.3 可识别的媒体类型](http://www.w3.org/TR/CSS2/media.html)
[css 链接中的 No media 和 media="all" 没有区别吗？](https://stackoverflow.com/questions/6921573/is-there-no-difference-between-no-media-and-media-all-in-css-link)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-07T17:52:52.553

根据[W3C 规范](https://www.w3.org/TR/CSS2/media.html)：

7.3 可识别的媒体类型

> 为 CSS 媒体类型选择的名称反映了相关属性对其有意义的目标设备。在下面的 CSS 媒体类型列表中，媒体类型的名称是规范的，但描述是信息性的。同样，每个属性的描述中的“媒体”字段都是信息性的。

**全部**

> 适用于所有设备。

**盲文**

> 适用于盲文触觉反馈设备。

**浮雕**

> 适用于分页盲文打印机。

**手持式**

> 适用于手持设备（通常是小屏幕、有限带宽）。

**打印**

> 用于分页材料和在打印预览模式下在屏幕上查看的文档。有关分页媒体特有的格式问题的信息，请参阅分页媒体部分。

**投影**

> 用于投影演示，例如投影仪。有关分页媒体特有的格式问题的信息，请参阅分页媒体部分。

**屏幕**

> 主要用于彩色计算机屏幕。

**演讲**

> 用于语音合成器。注意：为此，CSS2 有一个类似的媒体类型，称为“听觉”。有关详细信息，请参阅有关听觉样式表的附录。

**tty**

> 适用于使用固定间距字符网格的媒体（例如电传打字机、终端或显示能力有限的便携式设备）。作者不应使用具有“tty”媒体类型的像素单位。

**电视**

> 用于电视类设备（低分辨率、彩色、有限滚动屏幕、可用声音）。

# r - 奇怪的事情发生了：较长的物体长度不是较短物体长度的倍数

> ID：12549274
> 
> 赞同：0
> 
> 时间：2012-09-23T02:30:19.390
> 
> 标签：r

```
x1 = c(1,2,3,4,5,6,7)
x1
[1] 1 2 3 4 5 6 7
x1[which(x1== c(5,6))]
[1] 5 6
Warning message:
In x1 == c(5, 6) :
longer object length is not a multiple of shorter object length 
```

当我退出 R 然后重新打开 RI 得到这个：

```
x1 = c(1,2,3,4,5,6,7)   
x1
[1] 1 2 3 4 5 6 7
x1[which(x1== c(5,6))]
[1] 5 6 
```

警告消息消失。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T02:40:28.763

这里有几点需要注意：

您应该收到该消息，因为正是它所说的原因 - 较长项目的长度不是较短项目长度的倍数。这意味着您认为自己在做的事情可能不是您实际在做的事情。每次尝试运行该代码时，您都应该收到此消息 - 我不知道为什么您在运行它时不会收到该消息。

您可以使用逻辑值对向量进行索引，因此这里不需要使用 which。

您最有可能在`%in%`运算符中寻找什么。您当前正在做的是逐个元素比较相等性，较短的向量将自行“回收”，直到它与较长的向量具有相同的长度。例如：

```
x1 <- c(1, 2)
x2 <- c(1, 2, 3, 4)
x1 == x2
#[1]  TRUE  TRUE FALSE FALSE 
```

这样做是针对 x2[1] 测试 x1[1]，然后针对 x2[2] 测试 x1[2]，然后由于 x1 中没有更多元素，它循环回到开头并针对 x2 测试 x1[1] [3]，然后是 x1[2] 对 x2[4]。

相反，如果我们只是想找出 x1 的哪些元素在向量 x2 中，那么如前所述，`%in%`运算符会为我们处理这些问题：

```
x1 %in% x2
#[1] TRUE TRUE 
```

这是在问 x1[1] 是 x2 的一个元素吗？x1[2] 是 x2 的元素吗？等等等等...

# php - 限制每个 IP 的并行下载次数

> ID：12549275
> 
> 赞同：1
> 
> 时间：2012-09-23T02:30:21.613
> 
> 标签：php, amazon-s3

我们有一个 Amazon S3 存储桶，它使用以下代码生成限时 Web URL：

```
define('WP_USE_THEMES', false);
require 'wp-blog-header.php';
require_once './sdk-1.5.3/sdk.class.php';
require_once './sdk-1.5.3/services/s3.class.php';

$FILENAME = $_GET['filename'];  

S3GetFile($FILENAME);

function S3GetFile($filename){

if(is_user_logged_in()){
    $url = getS3SignedURL($filename);
    header('Location: '.$url);
}else{
    $url = 'http://myurl.com/';
    header('Location: '.$url);
}
}

function getS3SignedURL($filename){
    $s3 = new AmazonS3();
    $bucket = 'bucketname';
    $url = $s3->get_object_url($bucket,$filename,'2 minutes');
    return $url;
} 
```

所以，这就是代码。我们使用**AWSSDK for PHP**。

这是一个会员网站。我们遇到了一些成员从服务器并行下载所有文件的问题。主机以大量资源使用为由不断关闭我们。

我试图找出限制*每个 IP*或*每个用户*同时下载数量的最佳方法（可能两者兼而有之，因为我想测试案例场景）。我也在检查文档，但如果您已经知道，这里的一些专家也会提供帮助。

非常感谢，萨钦。

# jsp - JSP 2.0 自定义标记：找不到设置方法？

> ID：12549279
> 
> 赞同：4
> 
> 时间：2012-09-23T02:31:27.943
> 
> 标签：jsp, exception, jsp-tags

我对“JSP”很陌生；我正在使用 Eclipse Juno 和 xampp（Tomcat 7.0.28）。我创建了以下 jsp 标记文件：

```
<%@ tag language="java" pageEncoding="ISO-8859-1" body-content="empty" description="Read Property from the Application's properties file."%>  
<%@ attribute name="Key" required="true" description="Key for searching Properties File."   type="java.lang.String"%>  
<% System.out.println(Key); %> 
```

在 JSP 中使用与以下相同时：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ taglib prefix="app" tagdir="/WEB-INF/tags/app" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title><app:random/></title>
</head>
<body>
    <app:getProp Key="APP.TITLE"/>
</body>
</html> 
```

我已将标签文件放在：/WEB-INF/tags/app. 但是在执行文件时，我得到以下异常：

*2012 年 9 月 23 日上午 7:49:19 org.apache.catalina.core.StandardWrapperValve 在路径 [/MedCamp] 的上下文中调用 servlet [jsp] 的 Servlet.service() 引发异常 [/index.jsp（行： 11, column: 1) Unable to find setter method for attribute: Key] with root cause org.apache.jasper.JasperException: /index.jsp (line: 11, column: 1) Unable to find setter method for attribute: Key at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42) at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408) at org.apache.jasper.compiler.ErrorDispatcher.jspError( ErrorDispatcher.java:149) 在 org.apache.jasper.compiler.Generator$GenerateVisitor.evaluateAttribute(Generator.java:2865) 在 org.apache.jasper.compiler.Generator$GenerateVisitor.generateSetters(Generator.java:3089) 在 org .apache。jasper.compiler.Generator$GenerateVisitor.generateCustomDoTag(Generator.java:2507) 在 org.apache.jasper.compiler.Generator$GenerateVisitor.visit(Generator.java:1748) 在 org.apache.jasper.compiler.Node$CustomTag。在 org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2428) 处接受（Node.java:1539）在 org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2376)在 org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2434) 在 org.apache.jasper.compiler.Node$Root.accept(Node.java:475) 在 org.apache.jasper.compiler .Node$Nodes.visit(Node.java:2376) 在 org.apache.jasper.compiler.Generator.generate(Generator.java:3490) 在 org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:250) ) 在 org.apache.jasper.compiler.Compiler 的 org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)。在 org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646) 在 org.apache.jasper 的 org.apache.jasper.compiler.Compiler.compile(Compiler.java:340) 编译(Compiler.java:353) .servlet.JspServletWrapper.service(JspServletWrapper.java:357) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390) 在 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334 ) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 在 org.apache.catalina.core.ApplicationFilterChain.doFilter( ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) 在 org.apache.catalina.core.StandardContextValve。在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 的 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 处调用(StandardContextValve.java:123) .catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java :118) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001) 在 org.apache.coyote.AbstractProtocol$ 的 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) AbstractConnectionHandler.process(AbstractProtocol.java:579) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) at java。util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)*

请让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:56:30.473

传递给标记文件的属性名称应以小写字母开头。将您的`Key`属性重命名为`key`，您的代码将起作用。

# python - Qt/PyQt：如何将 QMenu 用作永久小部件？

> ID：12549281
> 
> 赞同：1
> 
> 时间：2012-09-23T02:31:53.623
> 
> 标签：python, qt, pyqt

我想使用 QMenu 作为 gui 中的永久小部件。（我喜欢它的外观和布局，当我将鼠标悬停在它上面时，会弹出必要的菜单，无需单击。尝试使用自定义小部件来模拟它会让人头疼。）我已尝试将其添加到父小部件的布局中，但在第一次使用后，它消失了。我将如何将其保留在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:10:26.547

我找不到任何`QMenu`会禁用自动隐藏的选项，所以最简单的方法是覆盖`hideEvent`. `hideEvent`在完成之前被解雇`hide()`。这意味着您不能拦截/忽略`hide()`，但可以重新显示它：

```
class PermanentMenu(QtGui.QMenu):
    def hideEvent(self, event):
        self.show() 
```

只需制作您的顶级菜单`PermanentMenu`，就可以了。

使用它的一个简单示例：

```
import sys
from PyQt4 import QtGui

class PermanentMenu(QtGui.QMenu):
    def hideEvent(self, event):
        self.show()

class Window(QtGui.QWidget):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)

        self.menu = PermanentMenu()

        self.menu.addAction('one')
        self.menu.addAction('two')

        self.submenu = self.menu.addMenu('submenu')
        self.submenu.addAction('sub one')
        self.submenu.addAction('sub two')

        self.submenu2 = self.menu.addMenu('submenu 2')
        self.submenu2.addAction('sub 2 one')
        self.submenu2.addAction('sub 2 two')

        layout = QtGui.QHBoxLayout()
        layout.addWidget(self.menu)
        self.setLayout(layout)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    w = Window()
    w.show()

    sys.exit(app.exec_()) 
```

# c - 您使用什么工具来衡量绩效？

> ID：12549288
> 
> 赞同：0
> 
> 时间：2012-09-23T02:33:59.650
> 
> 标签：c, linux, performance, performance-testing

> **可能重复：**
> [您最喜欢的分析工具是什么（用于 C++）](https://stackoverflow.com/questions/26663/whats-your-favorite-profiling-tool-for-c)

我不想直接在 C 代码中执行此操作，而是需要一些工具来为我执行此操作。例如，给定一些 C 代码，它返回执行了多长时间。像 LinqPad 和大多数给定 SQL 查询的客户端，它返回查询在 *conds 中执行的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:12:01.797

你们很多人尝试

1) GNU profiler **(gprof)**用于函数级分析

[http://www.cs.utah.edu/dept/old/texinfo/as/gprof.html#SEC2](http://www.cs.utah.edu/dept/old/texinfo/as/gprof.html#SEC2)

2）对于整体时间统计，您可以使用命令，

```
time 
```

[例子](http://linux.about.com/od/commands/a/Example-Uses-Of-The-Command-Time.htm)

3）您也可以尝试 为特定进程解析**/proc （/proc/[pid]/stat）中的文件，**

[过程手册](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)

# c++ - 排序中无效的 < 运算符断言

> ID：12549289
> 
> 赞同：6
> 
> 时间：2012-09-23T02:35:27.173
> 
> 标签：c++, sorting, operator-keyword, assertion

我正在尝试实现一个简单的比较器，用于根据数组“_vec”中的值对索引进行排序。我收到“无效的 < 运算符”运行时错误消息。我不明白以下代码有什么问题：

```
class Compare{
vector<int>& _vec;
public:
    Compare(vector<int>& vec) : _vec(vec) {}
    bool operator()(size_t i, size_t j){
        if(_vec[i] != _vec[j])
        return _vec[i] < _vec[j];
        else
        return (double)rand()/RAND_MAX < 0.5; 
    }
}; 
```

我正在使用以下函数调用：

```
sort(inds.begin(),inds.end(),Compare(vals)); 
```

其中 inds 只是一个包含从 1 到 15（比如说）的索引的数组，而 vals 是长度为 15 的数组，其中包含一些我想要计算其排序索引的值。总体目标是在 vals 中的两个（或更多）条目相等时随机化排序顺序。有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T02:40:40.410

`std::sort()`期望比较操作是稳定的 - 如果在比较两个项目时返回特定结果，则如果稍后再次比较这些项目，比较必须返回相同的结果。当您返回一个随机值时，显然这不一定会成立。

C++03 25.3/4“排序及相关操作” 说：

> 如果我们将 equiv(a, b) 定义为 !comp(a, b) && !comp(b, a)，那么要求 comp 和 equiv 都是传递关系：
> 
> *   comp(a, b) && comp(b, c) 意味着 comp(a, c)
> *   equiv(a, b) && equiv(b, c) 意味着 equiv(a, c)
> 
> [注：在这些条件下，可以证明
> 
> *   equiv 是等价关系
> *   comp 在由 equiv 确定的等价类上引入明确定义的关系
> *   诱导关系是严格的全序。
> 
> ——尾注]

为了澄清起见，表 28 定义了一个等价关系：

> `==`是等价关系，即满足如下性质：
> 
> *   对于所有 a，a == a。
> *   如果 a == b，则 b == a。

所以你的`Compare()`操作不会产生等价关系。

获得断言而不是随机丢失数据是一种不错的选择。

当两个（或更多）条目相等时，解决随机排序问题的一种方法`_vec`是为这些索引组成一个随机值，并在索引 => 随机值或其他东西的映射中跟踪这些随机值。只需确保您跟踪并使用这些随机值，以`Compare()`保持传递和等价属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T02:41:46.393

`std::sort`期望您的小于运算符提供*传递*关系，即当排序看到`A < B`为真并且`B < C`为真时，它*暗示*也`A < C`为真。

在您的实现中，传递性规则不成立：当两个项目相等时，您随机告诉排序其中一个大于另一个。这会触发调试断言。

为相等的值返回 false 以解决此问题。

# c++ - 在 wxTextCtrl 中设置插入点的问题

> ID：12549292
> 
> 赞同：1
> 
> 时间：2012-09-23T02:36:05.957
> 
> 标签：c++, user-interface, textbox, wxwidgets, wxtextctrl

我正在尝试在 wxWidgets（2.8.12 版）中实现自定义小部件，本质上是修改后的单行 wxTextCtrl。它需要一个文本输入，其中包含由空格分隔的两组 8 位十六进制数字，我希望控件自动处理该空格。例如，如果用户两次键入 1-8（无需按空格键），则文本控件的结果内容应为：

```
12345678 12345678 
```

如果用户将光标放在第一个“3”之后并退格三次，则该空间应在编辑时自动调整，从而导致：

```
45678123 45678 
```

本质上，空间应该对用户完全透明。

在大多数情况下，我已经完成了。贴在这里的代码有点长，所以这里是一个要点：
[https ://gist.github.com/036c1a90f77521a8653c](https://gist.github.com/036c1a90f77521a8653c)

然而，有一个错误，我似乎无法修复——在输入第九位数字时，它会自动插入空格，但光标会在空格之后结束，就在第九位数字的后面。

![12345678 |1](../Images/45e05f64a26f2d598367b94788ed5aef.png)

所有尝试使用`wxTextCtrl::SetInsertionPoint()`都`wxTextCtrl::SetInsertionPointEnd()`没有成功，所以我作为最后的手段来到这里，希望有人能指出我做错了什么。

为了帮助测试这个小部件，我准备了一个*非常*快速和肮脏的应用程序，其中包含小部件：
[https](https://gist.github.com/cf3219eb47e2bfe85b38)
://gist.github.com/cf3219eb47e2bfe85b38 或单击此处以 tarball 格式下载代码：
[https://gist。 github.com/gists/cf3219eb47e2bfe85b38/download](https://gist.github.com/gists/cf3219eb47e2bfe85b38/download)

只需运行`make`即可一次清理、编译和运行代码。当然，您需要安装 wxWidgets 2.8.12 才能编译。

大多数情况下，这个小部件的所有其他方面都完全按照我的意愿工作——正是这个非常大的问题使它无法正常工作。然而，我很好奇有一个小错误，虽然这不是一个主要问题，但我想在一段时间内修复它。

即使删除字符，空格也会自动处理，即使您删除了一个选择 - 但是，如果您删除的选择在第九位结束，它不会在删除后重新格式化控件的内容。

如果有人能查明原因，将不胜感激，但插入点问题显然是我主要关心的问题。

感谢任何愿意提供帮助的人，我试图提供尽可能多的信息和解释——如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:21:11.410

一般来说，很难修改原生控件的输入处理，因为它在不同平台下的行为不同。我不知道您是否已经在所有（或至少一个以上）代码下测试了您的代码，但我完全希望您能找到更多问题。

我建议您不要尝试自己做，而是查看`wxMaskedEdit`建议添加到 wxWidgets 本身。它还不是最终版本，但已经有一个[初步版本](http://trac.wxwidgets.org/ticket/14535#comment:5)，我认为它也可以与 2.8 一起使用（当然，它是用 2.9 开发的）。

# entity-framework - EF codefirst 如何知道要为哪个模型类创建表？

> ID：12549296
> 
> 赞同：4
> 
> 时间：2012-09-23T02:36:50.593
> 
> 标签：entity-framework, asp.net-mvc-4

我无法在网上找到答案 - 如果我忽略了任何资源，请链接我。

我了解 Entity Framework 的 codefirst 是如何工作的。问题是：EF 如何知道要为哪个模型类创建表以及将哪个模型类视为一个类？

例如，在使用 VS 2012 Express Developer 创建新 MVC 项目的示例 MVC4 应用程序中，Account Model 中有没有表的类（LocalPasswordModel、LoginModel、RegisterModel 等），EF 知道不生成表对于这些课程。

EF 是如何知道这一点的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T02:39:02.570

Entity Framework 查看您的`DbContext`类，并为您定义的每个`DbSet<T>`属性创建一个表。

EF 甚至看不到任何 DbContext 未引用的类。

# objective-c - 在 Windows 上开发 iPhone 应用程序/在远程 Mac 上编译

> ID：12549297
> 
> 赞同：-1
> 
> 时间：2012-09-23T02:37:31.950
> 
> 标签：objective-c, ios4

我意识到 iPhone 应用程序是否可以在 Windows 中构建已被无数次询问，简单的答案是否定的，使用诸如使用 VM 或什至需要使用 C/C++ 编写应用程序的 Dragon SDK 之类的变通方法，但我会喜欢使用 Objective C 构建应用程序。

我的问题是iPhone应用程序的代码不能在Windows计算机上开发，上传到远程Mac计算机，在Mac上编译，然后下载回Windows通过iTunes安装吗？我不想购买 Mac mini 来涉足 iPhone 开发，但我不想局限于使用 Phone Gap 或类似工具编写 HTML 5 应用程序。

如果不出意外，是否可以使用远程桌面连接直接在远程/虚拟 Mac 上开发应用程序？

如果其中任何一个是可能的，有没有人知道提供这种服务的公司？如果不是，它没有被创建的可能原因是什么？似乎会有巨大的需求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T04:44:27.683

也许[http://www.macincloud.com/](http://www.macincloud.com/)是您正在寻找的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T02:44:05.780

我相信您尝试做的事情是不可能的，但是 MonoTouch 怎么样？ [http://xamarin.com/monotouch](http://xamarin.com/monotouch)

在 Windows 技术上使用 .NET 开发 iPhone 和其他应用程序？

# magento - Magento 中 FedEx/UPS 模块中的加拿大原产地地址无法检索费率（服务不可用）

> ID：12549303
> 
> 赞同：2
> 
> 时间：2012-09-23T02:39:03.773
> 
> 标签：magento, shipping, fedex, ups

在 Magento 中，如果起始地址（运输设置）是加拿大，FedEx 和 UPS 模块将无法检索到美国和加拿大的费率。如果原始地址更改为任何美国地址，FedEx 和 UPS 将立即提取费率。问题在于加拿大作为原始地址。

有没有人遇到过这个或可能有修复？

ShipSync（FedEx Module 社区）可以拉取费率，但它会使购物车崩溃。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:56:29.883

这个问题花了我一个月的时间才解决。

很简单，我的网站使用美元作为货币。

在货币设置 ( `System -> Configuration -> Currency Setup`) 的`Allowed Currencies`多选框中，我只选择了美元。那是我的大错误！

**解决方案是：选择您的发货国家/地区。**

然后我遇到了另一个问题：UPS 系统返回 0 美元或只是您的手续费。

**解决方案是：配置您的货币汇率（系统 -> 管理货币汇率）**

希望这个帮助和好运！提姆·阮。

# android - 获取 facebook 用户 ID 时出现“facebook 无法解析或不是字段”错误

> ID：12549308
> 
> 赞同：-1
> 
> 时间：2012-09-23T02:39:32.047
> 
> 标签：android, facebook-graph-api

在这里，我试图在我的应用程序中获取带有 facebook 详细信息的用户登录 ID，并且在下面的代码中，我得到“facebook 无法解析或不是字段错误

```
 try {
    // PROFILE DETAILS AND FRIENDS COUNTER    
    String queryUserInfo = "SELECT uid FROM user WHERE uid = me()";
    Bundle paramUserInfo = new Bundle();
    paramUserInfo.putString("method", "fql.query");
    paramUserInfo.putString("query", queryUserInfo);
    String responseUserInfo = Util.facebook.request(paramUserInfo);
//"facebook cannot be resolved or is not a field " error in getting facebook userid.
       JSONArray JAUserData = new JSONArray(responseUserInfo);
       for (int i = 0; i < JAUserData.length(); i++) {
            JSONObject JOUserData = JAUserData.getJSONObject(i);
            if (JOUserData.has("uid")) {
            String getUserID = JOUserData.getString("uid");
            }
       }
     } catch (Exception e) {
        e.printStackTrace();
     } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-23T06:53:37.440

不喜欢 fql，但我认为：

1.  您不能将参数添加`method`为`fql-query`
2.  你必须添加子路径 `/fql`
3.  您不得将 fql 用于此类简单的事情（`https://graph.facebook.com/me`会有所帮助）

毕竟：

您需要创建一个带有子路径`/fql`且只有一个参数的请求：`q=YOURQUERY`

例子：`https://graph.facebook.com/fql?q=YOUREQUEST&access_token=ACCESS_TOKEN`

忠告：`Graph-API`改用，很简单。

如何开始：[它是 Graph Api](http://developers.facebook.com/docs/reference/api/)

你可以找到[facebook Api 的工具](http://developers.facebook.com/tools/)（我推荐`Graph API Explorer`）

# sql - 在 SQL 数据库中存储数字列表的最佳方法是什么？

> ID：12549313
> 
> 赞同：4
> 
> 时间：2012-09-23T02:41:01.330
> 
> 标签：sql, database

我需要存储一个数字列表，最好存储在一个单元格中。我有一个人名单，每个人都有一个唯一的 ID，我需要知道他们的家庭成员是谁。我对 SQL 数据库相当陌生，请尽量保持简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T03:00:00.840

Do not do this: storing multiple values in the single column kills the possibility of using referential integrity constraints, and turns into a nightmare to maintain (imagine maintaining everyone's lists when a new baby's born!)

The simplest solution is to add a column with a `family_id` to each person's row. All members of the same family will have this unique ID set to the same value; members of different families will have different `family_id`s.

This is not ideal in cases of marriages, unless you are willing to either join the two families on marriage of their children, or move the bride or the groom to the family of the spouse.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T02:53:47.240

您将要设置一个包含两列的 Family 表，一列存储相关人员的唯一 ID，另一列存储其家庭成员的唯一 ID。您的表格最终将如下所示：

`Family(userID, familyMemberID)`

每个家庭成员都会有一个条目，所以它看起来像这样：

`(1, 2), (1, 3), (1, 4), (1, 5), (2, 8)`

由您决定是否要在两个方向上存储连接（即，对于每个插入，您还插入倒数 (1,2) 和插入 (2,1)），这可以通过触发器或其他方式轻松完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T15:10:17.487

添加familyId是最简单的解决方案。

但是，由于随着孩子结婚并组建新家庭，家庭成员会随着时间而变化。我将创建一个单独的“关系”表，其中包含 personId 和 familyID。

如果您想跟踪成员的移动。在数据仓库世界中，您通常有一个 relId、relTy 和 Timestamp 来保存历史记录，但您不必走那么远。

也许有一天，您想创建一棵家谱。因此，请确定您是否真的希望将 personId/familyId 作为关系表中的列名。

总之，为了您的迫切需要，我将使用单独的关系表。

# c# - Beta 版发布前的 C# 最终测试。异常断点......我们应该测试任何有用的断点吗？

> ID：12549315
> 
> 赞同：-1
> 
> 时间：2012-09-23T02:41:37.413
> 
> 标签：c#, debugging, exception, testing, beta-testing

在初始测试版发布之前的开发和测试的最后阶段。作为最后阶段测试的一部分，我想在异常上使用断点进行调试，并想知道是否有其他程序员可以推荐一些异常来启用，为什么？

这里只是一些适合这个练习的......

*System.ArgumentNullException
System.ArgumentOutOfRangeException
System.NotEnoughCommentsInMethodException
System.NullReferenceException*

应用程序是 C#、Winforms、Firebird DB、NHibernate、.NET 4.0

期待一些输入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T02:43:51.950

## 他们都是

如果您的应用程序抛出任何异常，您需要注意它。

有时，会出现预期的异常；如果您遇到它们，您应该取消选中它们以减少噪音。
但是，您还应该尝试消除那些（如果可能）；应为特殊情况保留例外。

# iphone - iPad 视网膜图像 - 为什么使用两种不同的图像尺寸？

> ID：12549318
> 
> 赞同：1
> 
> 时间：2012-09-23T02:41:57.593
> 
> 标签：iphone, ios, image, ipad, retina-display

对于 iPad Retina（或 iPhone Retina），为什么我们需要有两种类型的图像尺寸并为视网膜版本添加像 @2x 这样的后缀？

难道我们不能只有一种视网膜分辨率图像，而对于没有视网膜显示器的设备，让设备处理将图像调整为更小（非视网膜）尺寸吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T02:44:43.710

调整大小需要时间和内存。并且很难在保持清晰度的同时调整大小。您使用哪种算法？双三次还是双线性？*“但是这个图标在使用other-algorithm-here*调整大小时看起来更好！” iOS 是如何知道你绘制的 1px 边框仍然是分辨率一半的 1px 边框？

# python - 在脱水中序列化查询集

> ID：12549319
> 
> 赞同：1
> 
> 时间：2012-09-23T02:42:25.490
> 
> 标签：python, django, tastypie

我试图在我的美味派脱水方法中公开整个查询集：

```
def dehydrate(self, bundle):
    bundle.data['stuff'] = serializers.serialize('json', Stuff.objects.filter(object_id=object_id))
    return bundle 
```

我无法弄清楚如何做到这一点。上面的例子把它作为一个字符串放在了tastepie 中。我也尝试过调用 .values() 而不是使用 django.core 的序列化程序，但这也将它作为字符串塞进了美味的派 - 我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T04:51:07.463

我猜你想要的是一本字典，所以你可以做这样的事情：

```
bundle.data['stuff'] = [st.__dict__ for st in Stuff.objects.all()] 
```

这将返回一些您可能不需要的信息，但这是一个好的开始。

# vb.net - SQLite page_size 在VB.net中使用真空改变

> ID：12549328
> 
> 赞同：0
> 
> 时间：2012-09-23T02:44:24.800
> 
> 标签：vb.net, sqlite, system.data.sqlite

引用 SQLite 网页“如果 page_size 编译指示用于在运行 VACUUM 命令之前指定新的页面大小，并且如果数据库未处于 WAL 日志模式，则 VACUUM 会将页面大小更改为新值。”

我的 SQLite 3.7 数据库在 1024 页大小上运行，由于我使用 Windows，我想我会尝试 4096 看看会发生什么。我一辈子都无法改变它，有人可以看看我的代码并告诉我我在哪里搞砸了，谢谢

```
 Dim connection As New SQLite.SQLiteConnection(conectionString)
            connection.Open()
            Dim oMainQueryR As New SQLite.SQLiteCommand
            oMainQueryR.Connection = connection
            oMainQueryR.CommandText = ("PRAGMA page_size=4096")
            oMainQueryR.ExecuteNonQuery()

            oMainQueryR = New SQLite.SQLiteCommand
            oMainQueryR.Connection = connection
            oMainQueryR.CommandText = ("vacuum")
            oMainQueryR.ExecuteNonQuery()
            connection.Close() 
```

真空命令运行正常，只是它重新设置了页面大小，并且我没有运行 WAL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:24:46.267

问题是加密，去掉它，代码如下所示。感谢让我思考的CL！如果您没有加密，则只需删除对 ChangePasswords 的 2 个引用。有趣的是，将页面大小从默认的 1024 设置为 4096，数据库增长了大约 10%。

```
 Dim connection As New SQLite.SQLiteConnection(conectionString)
        connection.Open()
        connection.ChangePassword("")
        Dim oMainQueryR As New SQLite.SQLiteCommand
        oMainQueryR.Connection = connection
        oMainQueryR.CommandText = ("PRAGMA page_size=") & Val(Me.TextBox254.Text) & "; vacuum"
        oMainQueryR.ExecuteNonQuery()
        connection.ChangePassword(previous password)

        connection.Close() 
```

# memory - 如何使用程序记忆恢复更改？

> ID：12549330
> 
> 赞同：0
> 
> 时间：2012-09-23T02:44:47.123
> 
> 标签：memory, logic, procedural

是否有可能通过使用某种逻辑路径的方式来存储集合的所有更改 - 更改发生时的更改 - 以便可以通过基本上“后退”来恢复更改？我假设有些东西需要在变化发生时映射变化，因此恢复它们的过程最终将是线性的。

对任何不一致的地方表示歉意，这不适用于任何特定的语言。相反，这是一个内存问题 - 即可以连续更改的有限大小的集合 *（例如，它可能是用户输入的一些存储）*（例如，在任何给定时间，任何时间 - 没有限制关于可以更改多少）* 以程序方式映射，以便假定新的 - 未来的 - 更改是先前更改的结果 * （在第二个中，镜像存储可用于一直恢复集合的状态到它的初始状态）*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:32:55.470

您可能想查看一些函数式数据结构。像 Erlang 这样的函数式语言可以很容易地回滚到早期的状态，因为总是对新的数据结构进行更改，而不是改变现有的数据结构。虽然这个特性可以在内部重复使用，但 Erlang 编程通常在“进程”的顶层大量使用这个特性，以便在任何类型的失败时，它只需抛出一个异常（在非函数式语言中，使用可变数据结构，您可以抛出异常以中止，但恢复原件将是您的程序的工作，而不是运行时的工作）。这是 Erlang 享有盛誉的原因之一。

这种函数式编程风格中的一些有用地应用于非函数式语言，特别是不可变数据结构的使用，例如不可变集合、列表或树。

例如，关于不可变集，人们可能会设计一种面向功能的数据结构，其中修改总是会在给定一些更改和现有集（由添加和删除组成的更改集）的情况下生成一个新集。你会留下旧的集合以供参考（无论是谁）；具有自动垃圾收集的语言在不再使用（引用）时回收旧的。

您可以将 id 或 tag 放入您设置的数据结构中，这样您就可以进行一些自省以查看某人拥有的数据结构 id。您还可以捕获生成每个新版本的基础的 id；这给了你一些历史或血统。

如果需要，您还可以在新数据结构中捕获对整个旧数据结构的引用，或者可以在生成所有集合时维护所有集合的全局列表。但是，如果这样做，您将不得不承担更多的存储管理责任，因为如果没有额外的帮助，自动收集器可能不会找到任何未使用（未引用）的垃圾来收集。

数据库设计在他们的事务控制器中做了一些这样的事情。出于您的问题的目的，您可以将数据库视为一个美化的集合。您可能会将 MVCC（多版本并发控制）作为一个在文献中写得相当好的示例。这种技术（临时）保留数据结构的旧快照版本，这意味着突变总是出现在数据的新版本中。维护旧快照，直到没有活动事务引用它；然后被丢弃。当两个并发运行的事务都修改数据库时，它们每个都会根据相同的当前和最新数据集获得一个新版本。（事务控制器确切地知道每个事务基于哪个版本，尽管事务的客户端看不到版本信息。) 假设两个并发事务都选择提交它们的更改，事务控制器中的版本控制识别出第二个提交者正在尝试提交一个不是第一个的逻辑继任者的更改集（因为我们上面假设的两个更改集都是基于在相同的早期版本上）。如果可能，事务控制器将合并更改，就好像第二个提交者真的在处理第一个提交者提交的另一个更新版本一样。（对于何时可以实现这一点有不同的定义，MVCC 说这是没有写冲突的时候，这是一个不太完美的答案，但速度快且可扩展。）但如果不可能，它将中止第二个提交者事务并通知第二个提交者（然后他们有机会，如果他们愿意，从较新的基础开始重试他们的事务）。在幕后，并发事务的各种快照版本可能会共享大部分数据（首先咨询一些特定于事务的更改集），以使快照便宜。通常没有提供 API 来访问旧版本，因此在这个域中，事务控制器知道随着事务退休，他们使用的原始快照版本也可以（引用计数和）退休。

完成的另一个领域是使用 Append-Only-Files。日志记录是记录更改的一种方式；一些数据库 100% 基于面向日志的设计。

BerkeleyDB 有一个很好的日志结构。虽然主要用于恢复，但它确实包含所有历史记录，因此您可以从日志中重新创建数据库（直到您清除日志，在这种情况下您还应该归档数据库）。再次有人必须决定何时可以启动新的日志文件，以及何时可以清除旧的日志文件，您可以这样做以节省空间。

这些数据库技术也可以应用在内存中。（当然，没有什么是免费的；）

无论如何，是的，有些领域可以做到这一点。

1.  不可变数据结构通过简单地保留旧副本来帮助保存历史；更改总是转到新副本。（效率技术可以让这不像听起来那么糟糕。）
2.  身份证可以帮助理解血统，而不必保留所有旧副本。
3.  如果您确实想保留所有旧副本，则必须查看您的域设计以了解何时/如何/是否可以访问旧数据结构，并着眼于如何最终回收它们。如果有的话，您很可能必须帮助参与定义它们的发布方式。或者如何将它们存档以供后代使用，但代价是以后访问速度较慢。

# html - HTML中的“通用”链接？

> ID：12549333
> 
> 赞同：0
> 
> 时间：2012-09-23T02:46:36.763
> 
> 标签：html, universal

> **可能重复：**
> [在另一个 HTML 文件中包含一个 HTML 文件](https://stackoverflow.com/questions/2336569/include-one-html-file-in-another-html-file)

在我网站上的每个页面上，我都有一个包含大约 12 个链接的页脚。每次我想更改链接时，我都必须在每个页面上都这样做。是否有可能做到这一点，以便我可以以某种方式在一个地方更改链接并在每个页面上更改？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T02:48:09.177

这个确切的问题是服务器端脚本的美妙之处，您可以在其中定义每个页面在检索时从中提取的头文件，从而允许您更改单个文件并将更改传播到您的整个网站。

这就是它在 PHP 中的样子：

header.php -`<a href="link">Link</a>`

all_other_pages.php -`<?php include header.php; ?> ...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T02:57:09.950

更好的方法是为此使用 mvc 架构。你可以通过创建单独的 php 文件并包含它们来做到这一点

喜欢 header header.php 用于包装器 wrapper.php 和页脚 footer.php 并显示一个页面只需包含或需要它们

像 index.php

```
 <?php
     require"header.php"; // for the header of the page 
     require"wrapper.php";
     require"footer.php";  // for the footer of the page 
```

您还可以制作功能，`header()`因此`footer()`您还可以在一个文件中包含更多功能，它减少了文件的数量，您只需要包含一个具有功能的文件

索引.php

```
 <?php
      require"function.php"; 
      header();      // for the header of the page           
      require"wrapper.php";
      footer();       // for the footer of the page 
```

在上述方法中，header 和 futtor 的代码对于所有网站都是通用的，您需要更改的是 wrapper.php 中的代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T02:57:24.053

你不需要做服务器端编程来解决这个问题（尽管你可以这样做），你可以在浏览器中用一点 javascript 完美地完成它。

例如：在每一页的底部：

```
<div class="page-footer"/>
<script src="footer.js"></script> 
```

在 footer.js 中的内容大致如下：

```
$(".page-footer").append("<ul><li><a href='about.html'>About</a></li></ul>"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T02:48:11.177

如果您可以使用服务器端包含或其他服务器端编程，那么可以，否则无法使用直接 HTML。您可以在 IFRAME 中包含页脚，以便每个页面加载相同的页脚页面，但这远非理想的解决方案。

# javascript - 使用 HTML 模板字符串和正则表达式动态值。卡在正则表达式上

> ID：12549338
> 
> 赞同：0
> 
> 时间：2012-09-23T02:47:46.440
> 
> 标签：javascript, jquery

我卡住了。也许正则表达式有更好的方法（喜欢听听你的想法）。

如果我只是在做一件事，比如-link-，那么以下是一次性的。

```
var testHtmlStr = '<tr>' +
                '<td class="eve"><div class="pad" style="overflow:hidden;">' +
                  '<a href="#" class="pic"><img height="50" width="80" title="{%desc%}" alt="{%desc%}" src="{%image%}"></a>' +
                  '<div class="sum"><a href="{%link%}" class="url">{%name%}</a></div>' +
                  '{%star_rating_html%}' +
                  '<a href="#" class="gray">{%eventC%}</a>' +
                  '<span class="block">{%evenC%}</span>' +
                '</div></td>' +
                '<td class="mor"><div class="pad"><a class="mor" href="{%link%}">{%linkName%}</a>' +
                '</div></td>' +
              '</tr>';
var ss = 'link';
var syntax = new RegExp('(^|.|\r|\n)(\{%\s*(' + ss + ')\s*%\})',"gi");

 alert(testHtmlStr.replace(syntax, '$1TESTESTESTESTS')); 
```

以下是我的代码，它不起作用。我不知道为什么。相同的正则表达式，相同的 html 模板模式。此外，我的 .each 通过字符串重复，但似乎在每次重复后字符串都返回到未修改状态。基本上，无论像 {%somehashkey%} 这样的 html 字符串是什么，我都希望将其替换为相应的哈希值。我认为我的代码可以工作，但不知道出了什么问题。有点不对劲，我知道。我无法追捕它。你的意见？

```
(function($){
var testHTML2 = '<tr>' +
                '<td class="eve"><div class="pad" style="overflow:hidden;">' +
                  '<a href="#" class="pic"><img height="50" width="80" title="{%desc%}" alt="{%desc%}" src="{%image%}"></a>' +
                  '<div class="sum"><a href="{%link%}" class="url">{%name%}</a></div>' +
                  '{%rating%}' +
                  '<a href="#" class="gray">{%eventC%}</a>' +
                  '<span class="block">{%evenC%}</span>' +
                '</div></td>' +
                '<td class="mor"><div class="pad"><a class="mor" href="{%link%}">{%linkName%}</a>' +
                '</div></td>' +
              '</tr>';

var type = "yahoo";
var disp = {};
disp.eventC = '5';
disp.rating = "<div>rating here</div>";
switch (type) {
case 'yahoo':
    disp.link = 'http://www.yahoo.com';
    disp.image = 'SOMe IMAGE' ;
    disp.name = "VENICE BEACH";
    disp.desc = 'MORE INFO&nbsp;';
    disp.linkName = 'YAHOO';
break;
default:
    disp.link = 'http://www.google.com';
    disp.image = 'Some IMAGE';
    disp.name = "BABY BABY";
    disp.desc = 'MORE INFO&nbsp;YOYOYO';
    disp.linkName = 'GOOGLE';
}

$.each( disp, function(t, num){
var syntax = new RegExp('(^|.|\r|\n)(\{%\s*(' + t + ')\s*%\})',"gi");
testHTML2.replace(syntax, num)
});
alert(testHTML2);
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:58:44.120

您没有为 testHTML2 分配新值。

```
testHTML2 = testHTML2.replace(syntax, num) 
```

# jquery - 更改 SimpleModal 的 innerHTML 并将参数传递给方法会引发错误

> ID：12549341
> 
> 赞同：0
> 
> 时间：2012-09-23T02:49:11.417
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我有一组照片，我正在遍历并显示在我的索引页面上。当我单击每张图片时，应该会弹出一个模式并显示更大版本的图像。我正在尝试使用 jQuery 来更改模态的 innerHTML。

问题是当我尝试传递照片变量时，我得到一个`undefined local variable or method 'photo'`. 索引页面根本不加载。

照片.js

```
jQuery(function () {
  $('.photo_container').click(function (e) {
    $('#basic_modal').html("<p><%= image_tag modal_url(photo), :class=>'modal_image' %></p>");
    return false;
  });

  $('.photo_container').click(function (e) {
    $('#basic_modal').modal({
      overlayClose:true
    });
  return false;
  });
}); 
```

错误发生在上面的第一个函数中，我尝试在单击 .photo_container 时传递一些 rails 代码。

index.html.erb

```
<% @photos.each do |photo| %>

  <%= link_to '#', :class => 'basic' do %>
    <div class="photo_container">
      <%= image_tag flickr_url(photo) %>
    </div>
  <% end %>

  <div id="basic_modal">
  </div>

<% end %> 
```

控制器

```
class PhotosController < ApplicationController

  def index
    if params[:search].empty?
      redirect_to root_path
    else
      @title = params[:search]
      @photos = flickr.photos.search(:tags => params[:search], :has_geo => 1)
    end
  end
end 
```

**关于如何传递照片参数的任何线索？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:54:11.410

您可以将`image_tag`带有模态 url 的 erb 放在 erb 中。无需动态添加内容。`basic_modal`您可以使用一些基本的 css 隐藏div。然后你可以摆脱javascript函数的第一部分。

此外，javascript 代码应该在`photos.js`，而不是在应用程序布局中。

**编辑**

以下是您的 erb 的外观：

```
<% @photos.each do |photo| %>

  <%= link_to '#', :class => 'basic' do %>
    <div class="photo_container">
      <%= image_tag flickr_url(photo) %>
    </div>
  <% end %>

  <div class="basic_modal">
    <%= image_tag modal_url(photo), :class=>'modal_image' %>
  </div>

<% end %> 
```

# regex - 提升正则表达式以从字符串中提取数字

> ID：12549343
> 
> 赞同：0
> 
> 时间：2012-09-23T02:49:57.820
> 
> 标签：regex, boost

我有一个字符串 resource = "/Music/1" 字符串可以在 "/Music/" 之后采用多个数值。我是正则表达式的新手。我尝试了以下代码

```
#include <iostream>

#include<boost/regex.hpp>

int main()
{
    std::string resource = "/Music/123";

    const char * pattern = "\\d+";

    boost::regex re(pattern);

    boost::sregex_iterator it(resource.begin(), resource.end(), re);
    boost::sregex_iterator end;

    for( ; it != end; ++it)
    {
        std::cout<< it->str() <<"\n";
    }
    return 0;
}

vickey@tb:~/trash/boost$ g++ idExtraction.cpp  -lboost_regex
vickey@tb:~/trash/boost$ ./a.out 
123 
```

工作正常 。但即使字符串恰好是“/Music23/123”之类的东西，它也会在 123 之前给我一个值 23。当我使用模式“/\d+”时，它会在字符串为 /23/Music/123 时给出结果事件. 我想要做的是提取 "/Music/" 之后的唯一数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:50:09.473

我认为部分问题在于您没有很好地定义（至少对我们而言）您要匹配的内容。我会做一些猜测。也许一个会满足您的需求。

*   输入字符串末尾的数字。例如“/a/b/ **34** ”。使用正则表达式`"\\d+$"`。
*   完全是数字的路径元素。例如“/a/b/ **12** /c”或“/a/b/ **34** ”，但不是“/a/b56/d”。使用正则表达式`"(?:^|/)(\\d+)(?:/|$)"`并获取捕获组 [1]。您可能会使用前瞻和后瞻来做同样的事情，也许使用`"(?<=^|/)\\d+(?=/|$)"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:00:45.780

If there will never be anything after the last slash could you just use a regex or string.split() to get everything after the last slash. I'd get you code but I'm on my phone now.

# recursion - 简单的 LISP 代码不会捕获输入错误

> ID：12549344
> 
> 赞同：1
> 
> 时间：2012-09-23T02:50:13.760
> 
> 标签：recursion, error-handling, lisp, factorial

我正在为递归阶乘函数编写一个非常简单的 lisp 代码。当使用号码调用时，它工作正常。但是，当我尝试使用不是数字的东西（例如 a）来调用它时，我收到以下错误：

错误：尝试获取未绑定变量“A”的值。[条件类型：UNBOUND-VARIABLE]

但是，这应该包含在我的代码中。这是我的代码：

```
(defun FactorialRec (num)
   (cond                                                  
      ((not(numberp num))
         (princ "Argument must be a number.")
         (terpri)
         ())
      ((equal num 1) ;base case                                                       
         1)
      ((<= 1 num) (* num(FactorialRec (- num 1))))
   )
) 
```

我不知道为什么 numberp 没有抓住这个。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:48:16.520

不要将参数类型检查混入您的主要逻辑中。`check-type`在进入函数时使用宏，或者尽可能早地在函数中使用：

```
(defun factorial (num)
  (check-type num (and integer (satisfies plusp)))
  (if (= num 1)
     1
     (* (factorial (1- num)) num))) 
```

表单`(and integer (satisfies plusp))`是一个类型表达式。Lisp 类型可以与诸如之类`and`的运算符连接，并且`satisfies`类型运算符可用于从任何谓词函数中创建类型。所以我们可以指定一个类型，它的域值是整数对象，并且是正数。`check-type`会很高兴地验证我们的变量，看看它是否属于这种类型。

我还使用了内置`1-`函数，它从它的参数中减去一个而不是`(- num 1)`. 这`1-`是一个符号，不是特殊语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T03:15:51.413

该错误发生在您的函数被调用之前。当您在 Lisp 解释器中键入函数调用表达式时，它首先计算所有参数和调用函数。如果您使用未绑定的变量，则参数评估将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:15:30.850

```
Break 2 [6]> (FactorialRec "A")
Argument must be a number. 
```

它适用于我的机器。所以我认为你是通过`A`但不是`"A"`？

# php - 使用 PHP exec() 在后台 Linux 服务器中运行脚本

> ID：12549348
> 
> 赞同：4
> 
> 时间：2012-09-23T02:51:05.830
> 
> 标签：php, apache

我正在尝试使用 exec() 函数触发 PHP 脚本在后台运行，但我无法让它工作。我已经阅读了关于堆栈溢出和其他论坛的无数帖子，并尝试了许多变体均无济于事。

**服务器信息：**

```
Operating System: Linux
PHP: 5.2.17 
Apache Version: 2.2.23
Home Directory: /home1/username 
```

我目前正在使用代码：

```
exec("/home1/username/php /home1/username/public_html/myscript.php > /dev/null &"); 
```

当我运行上述脚本时，我的 cPanel 错误日志中没有 error_log 并且没有错误，但是该脚本肯定不会执行。当我浏览到[http://www.mydomain.com/myscript.php](http://www.mydomain.com/myscript.php)时，它会立即运行并向我发送电子邮件。知道为什么这不起作用/我如何找出正在产生什么错误？

**更新 cPanel 进程管理器输出**

```
exec("php /home1/username/php /home1/username/public_html/myscript.php > /dev/null &"); 
```

产生：

```
27183   php /home1/username/php /home1/username/public_html/myscript.php
27221   [sh]
27207   php /home1/username/php /home1/username/public_html/myscript.php
27219   php /home1/username/php /home1/username/public_html/myscript.php
27222   php /home1/username/php /home1/username/public_html/myscript.php
27224   php /home1/username/php /home1/username/public_html/myscript.php
27249   sh -c php /home1/username/php /home1/username/public_html/myscript.php > /dev/null & 
```

这正常吗？脚本似乎停留了很长时间，即使它应该执行得非常快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T16:55:23.570

无法让 exec 使用 php。即使我获得了对服务器的 shell 访问权限，该命令也只是挂起。我决定改用 wget 来完成同样的事情。效果很好:)

```
exec("wget http://www.mydomain.com/myscript.php > /dev/null &"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T04:08:23.627

您是否尝试过直接调用 php CLI？

```
exec("php /home1/username/php /home1/username/public_html/myscript.php > /dev/null &"); 
```

您将不需要 #!，如果通过 Apache 调用它会输出到浏览器。

**编辑**。看起来您的脚本正在运行，但您在后台执行的 PHP 脚本挂起（未退出）。试试这个变化：

```
exec("php /home1/username/php /home1/username/public_html/myscript.php > /dev/null 2>&1 &"); 
```

[“> /dev/null 2>&1” 是什么意思？](http://www.xaprb.com/blog/2006/06/06/what-does-devnull-21-mean/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:04:40.230

since you want to run the `myscript` from your command line, wy not do this:

```
exec('(/home1/username/public_html/myscript.php) > /dev/null &',$r,$s); 
```

And write this as a first line in the myscript.php:

```
#!/home1/username/php -n
<?php
    //script goes here
?> 
```

That *should* work. The hashbang tells the system what programme to use to run the script that follows, so you don't need to add that to your `exec` call. Also, it's safer (and therefore better) to put brackets around the full script call, just so PHP knows what output has to be redirected to what stream, to avoid any issues that might occur. Especially when libs or packages like PHP-GTK are installed on the server (hence the `-n` option).

# javascript - UPNP 与黑莓剧本

> ID：12549349
> 
> 赞同：1
> 
> 时间：2012-09-23T02:51:10.223
> 
> 标签：javascript, actionscript, air, blackberry-webworks, upnp

尝试构建需要 UPNP 发现的应用程序。有没有办法在黑莓剧本上做到这一点？首选脚本是客户端 HTML5/JS（即 Webworks）和 Actionscript，尽管也支持 Java 和 Flash。

出于兴趣，UPNP 发现使用哪些脚本语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:57:03.800

UPnP 发现依赖于无法通过 JavaScript 获得的多播 UDP。我不知道任何 ActionScript UPnP 堆栈。

最好的办法是使用 Java 堆栈，例如[ohNet](http://wiki.openhome.org/wiki/OhNet)或[Cling](http://4thline.org/projects/cling)。这两者都被各种产品使用并得到积极支持。对于 ohNet，发现由 CpDeviceListUpnpXxx 类处理；我不确定你从哪里开始使用 Cling，但如果你需要提问，它确实有一个活跃的社区。

[免责声明：我为 ohNet 做贡献]

# jquery - ISSUE Cakephp 2.2 - Jquery Ajax Js->链接在同一页面上保存多个条目 id

> ID：12549351
> 
> 赞同：0
> 
> 时间：2012-09-23T02:52:08.767
> 
> 标签：jquery, cakephp-2.0

抱歉，如果这个问题在某个地方得到了回答，我试图找到它但无济于事

Cakephp 通常是我的朋友，但它现在让我发疯。我正在尝试创建选项，以便在存在许多其他条目的同一页面上对条目进行投票。我已经在 Cake 1.3 中做了一百万次

**问题：** 如果我在一个页面上有 10 个条目（包装在唯一的 div 中），我只能“评分”第一个条目，即使控制器 (FireBug) 中正确接收了 entry_id 并且调试显示 $this->request- >数据是正确的。尽管如此，Cake 只保存页面上第一个条目的“分数”，并且在单击链接后不会显示其他条目的分数的任何错误消息。

UpdateALL 操作对所有条目都正确，只有 SAVE 操作失败。

**问题：**如果我单击 + 链接，为什么 Cake 不保存页面上所有条目的分数。同样，不会抛出任何错误消息。

控制器：

```
public function score($id = null)
{
    if ($this->Auth->user('id')) {
        if ($this->Entry->updateAll(array('Entry.score' => 'Entry.score+1'), array('Entry.id' => $id))) {
            $this->Entry->Score->create();
            $this->request->data['Score']['entry_id'] = $id;
            $this->request->data['Score']['user_id'] = $this->Auth->user('id');
            if ($this->Entry->Score->save($this->request->data)) {
                $total_scored = $this->Entry->find('first', array('conditions' => array('Entry.id' => $id)));
                $this->Entry->contain();
                $this->set('total_scored', $total_scored);
                if ($this->request->is('ajax')) {
                    $this->render('_scored', 'ajax');
                } else {
                    $this->redirect(array('action' => 'index'));

                }
            }
        }
    }
} 
```

看法：

```
 <div class="scoreButton-<?php echo $entry['Entry']['id'];?>">
 <?php if (((AuthComponent::user('id')) && ($entry['Entry']['user_id'] !== AuthComponent::user('id')))): ?>
            <p class="monster l20 t25 hover"><?php echo $this->Js->link('+','/entries/score/' . $entry['Entry']['id'] . '', array('update' => '.scored-' . $entry['Entry']['id'] . '', 'complete' => $this->Js->get('.scoreButton-' . $entry['Entry']['id'] . '')->effect('hide'))); ?>
            </p>
        </div>
        <div class="scored-<?php echo $entry['Entry']['id'];?>"> </div>

        <?php endif;?>
        <?php if (!AuthComponent::user('id')): ?>
        <p class="monster grey l20 t25">+</p>
        <?php endif;?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T23:22:53.477

我暂时找到了解决方法。它看起来像一个蛋糕错误，我会报告它。解决方法是使用虚拟 entry_id（用户不可见）保存分数，并在保存后立即将其更新为正确的 entry_id。

```
 public function score($id = null)
{
if ($this->Auth->user('id')) {
    if ($this->Entry->updateAll(array('Entry.score' => 'Entry.score+1'), array('Entry.id' => $id))) {
        //$this->Entry->Score->create();
        $this->request->data['Score']['entry_id'] = '50458841-0000-0000-0000-1166a76fed09';
        $this->request->data['Score']['user_id'] = $this->Auth->user('id');
        if ($this->Entry->Score->save($this->request->data)) {
            $this->Entry->Score->updateAll(
                array('Score.Entry_id' => "'".$id."'"),
                array('Score.id' => $this->Entry->Score->id)
            );
            $total_scored = $this->Entry->find('first', array('conditions' => array('Entry.id' => $id)));
            $this->Entry->contain();
            $this->set('total_scored', $total_scored);
            if ($this->request->is('ajax')) {
                $this->render('_scored', 'ajax');
            } else {
                $this->redirect(array('action' => 'index'));

            }
        }
    }
} 
```

}

# javascript - JavaScript 中“in”的解释

> ID：12549352
> 
> 赞同：6
> 
> 时间：2012-09-23T02:52:15.897
> 
> 标签：javascript, web-services, web-applications, web

请考虑下面的代码示例，并专注于变量分配。由于我从未在 C++ 中见过这种形式，以下是什么意思：**在**新的 XMLHttpRequest 中“上传”。

我需要很好地解释以下陈述的含义：`progress: "upload" in new XMLHttpRequest`。特别是，`in`不在 C++ 中。那**`in`**应该做什么？

```
tests = {
  filereader: typeof FileReader != 'undefined',
  dnd: 'draggable' in document.createElement('span'),
  formdata: !!window.FormData,
  progress: "upload" in new XMLHttpRequest
}; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T03:03:32.070

[第 11.8.7 章 -`in`操作员](http://es5.github.com/#x11.8.7)说

> 返回使用参数*ToString(lval)调用**rval的**[[HasProperty]]*内部方法的结果。

 **意思就是

```
(lval in rval) 
```

当`rval`是一个对象并且它有一个名为 的属性时为真`String(lval)`。

`in`也用于`for (... in ...)`循环，但这只是类似的语法，而不是使用此运算符。

* * *

> ```
> "upload" in new XMLHttpRequest 
> ```

这是在询问“`XMLHttpRequest`实例是否有一个名为‘upload’的属性？” 它有效地检查此浏览器是否具有可能并非所有浏览器都存在的特定功能。

`upload`特别是在[XMLHttpRequest Level 2中指定为](http://www.w3.org/TR/XMLHttpRequest/#the-upload-attribute)[支持某些事件处理程序](http://www.w3.org/TR/XMLHttpRequest/#xmlhttprequesteventtarget)的对象，以让您监控上传的进度：

> ```
> interface XMLHttpRequestEventTarget : EventTarget {
>   // event handlers
>   [TreatNonCallableAsNull] attribute Function? onloadstart;
>   [TreatNonCallableAsNull] attribute Function? onprogress;
>   [TreatNonCallableAsNull] attribute Function? onabort;
>   [TreatNonCallableAsNull] attribute Function? onerror;
>   [TreatNonCallableAsNull] attribute Function? onload;
>   [TreatNonCallableAsNull] attribute Function? ontimeout;
>   [TreatNonCallableAsNull] attribute Function? onloadend;
> }; 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T02:55:57.363

该语句`'draggable' in document.createElement('span')`返回一个布尔值。它检查元素（在本例中为跨度）是否具有`draggable`属性，如果有`true`则返回，如果没有则返回值为 false。没有什么了。

如果你看到这样的代码：

```
for (varName in obj)
{
    //some stuff
} 
```

`obj`您真正看到的只是对象 ( )的可枚举属性的循环。假设一个看起来像这样的对象：

```
var obj = {foo:'bar',non:'sense'}; 
```

Then`varName`将等于`foo`, then `non`etc... 换句话说：“`x in y`语句”的主要目标是检查对象的可枚举（公共）属性是否存在

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T03:11:48.270

*   `typeof FileReader != 'undefined'`
    *   **如果存在名为*FileReader的对象，则为***true** ，否则为**false**** 

***   `'draggable' in document.createElement('span')`
    *   **如果***<span>*元素允许*可拖动*的属性/方法，则为true，否则为**false**

        *   `!!window.FormData`
    *   **如果***窗口*对象具有名称为*FormData*的属性/方法，则为true ，否则为**false**

        *   `"upload" in new XMLHttpRequest`
    *   **如果***XMLHttpRequest*对象具有名称为*upload*的属性/方法，则为true ，否则为**false****

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T02:55:08.547

`'x' in y`如果 "y" 包含名为 "x" 的属性，将返回 true

顺便说一句，您不应该期望 Javascript 和 C++ 如此相似。它们完全不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T03:06:45.343

```
tests = {
  filereader: typeof FileReader != 'undefined',
  dnd: 'draggable' in document.createElement('span'),// Basically checks the draggable property of span
  formdata: !!window.FormData,
  progress: "upload" in new XMLHttpRequest// checking for the upload property of XMLHttpRequest/, you can add an eventlistner to check the progress event. 
}; 
```

就“in”而言，它只不过是检查元素是否存在。它返回一个布尔值****

# javascript - 自动 JQuery 幻灯片

> ID：12549356
> 
> 赞同：0
> 
> 时间：2012-09-23T02:53:50.730
> 
> 标签：javascript, jquery

我使用 javascript 和 JQuery 创建了这个幻灯片。我想在网页上多次使用它。我可以让两者都出现，但只有一个会循环浏览所有图片，然后重新开始。第二个只是循环然后结束。有人可以帮我写代码吗？我希望网页上的所有幻灯片不断循环。谢谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type"/>

<title></title>

<script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>

<script type="text/javascript">
function slideSwitch() {
    var $active = $('#slideshow IMG.active');

    if ( $active.length == 0 ) $active = $('#slideshow IMG:last');
    var $next =  $active.next().length ? $active.next()
        : $('#slideshow IMG:first');

    $active.addClass('last-active');

    $next.css({opacity: 0.0})
        .addClass('active')
        .animate({opacity: 1.0}, 1000, function() {
            $active.removeClass('active last-active');
        });
}

$(function() {
    setInterval( "slideSwitch()", 5000 );
});
</script>

<style type="text/css">

#slideshow {
    position:relative;
    height:350px;
}

#slideshow IMG {
    position:absolute;
    top:0;
    left:0;
    z-index:8;
    opacity:0.0;
}

#slideshow IMG.active {
    z-index:10;
    opacity:1.0;
}

#slideshow IMG.last-active {
    z-index:9;
}

</style>

</head>

<div id="slideshow">
    <img src="ocean.png" alt="Slideshow Image 1" class="active" />
    <img src="ocean2.png" alt="Slideshow Image 2" />
    <img src="ocean3.png" alt="Slideshow Image 3" />
</div>

<br />

<div id="slideshow">
    <img src="flower.png" alt="Slideshow Image 1" class="active" />
    <img src="flower2.png" alt="Slideshow Image 2" />
    <img src="flower3.png" alt="Slideshow Image 3" />
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T02:58:03.647

你可以为幻灯片的每个实例生成一个唯一的 ID，因为你的`$('#slideshow IMG.active');`东西会选择你拥有的多个实例。尝试这样的部分：

```
function slideShow(element_of_slideshow){
    var now = new Date().getTime(), uid = "ss" + now;
    $(element_of_slideshow).attr("id",uid);

   // then call it like this in the function
   $("#"+uid+" IMG.active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T02:58:29.220

您的问题是`id`html 标签中的属性应该在页面上是唯一的。

因此，您的选择器：将在 ID 为 #slideshow 的标签**第一次**`$('#slideshow IMG:last')`出现时找到最后一个 img 标签。

 **也许考虑使用[jquery 插件模式](http://docs.jquery.com/Plugins/Authoring)。**

# google-app-engine - 如何通过 gae-archetype-objectify-jsp 使用静态文件

> ID：12549358
> 
> 赞同：2
> 
> 时间：2012-09-23T02:54:14.713
> 
> 标签：google-app-engine, maven, maven-archetype

我正在用 Java 编写我的第一个 Google App Engine 项目，没有 GWT。我开始使用 gae-archetype-objectify-jsp 原型来获取项目的骨架结构，并使用 eclipse 插件在本地进行开发和测试。

一切都很顺利（特别喜欢objectify），除了一件事：每次运行项目时，我的静态文件（如图像和样式表）都会丢失。我一直把这些放在 下`src/main/webapp/`，但是我在那里创建的任何东西都会在构建时自动删除。

我还应该对静态文件做些什么吗？

干杯，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:50:12.227

它位于 war/ 下的子文件夹中

对于处理静态文件，你真的应该看到这个...... [https://developers.google.com/appengine/docs/java/gettingstarted/staticfiles](https://developers.google.com/appengine/docs/java/gettingstarted/staticfiles)

src 文件在构建时被删除有点令人不安。我认为这不应该发生。您将“默认输出文件夹”设置为什么？（在Java Build Path --> Source（eclipse下）中找到它不应该是project_name/war/WEB-INF/classes之类的东西。当然它可能是你的maven系统而不是Eclipse。

# javascript - 为什么javascript函数是这样的

> ID：12549376
> 
> 赞同：5
> 
> 时间：2012-09-23T02:59:34.537
> 
> 标签：javascript

> **可能重复：**
> [这是什么意思？(函数 (x,y)){…}){a,b); 在 JavaScript 中](https://stackoverflow.com/questions/3921922/what-does-this-mean-function-x-y-a-b-in-javascript)

我是 javascript 的初学者。我知道编写 JS 用户定义函数。但是最近我遇到了一些我无法识别的东西。谁能向我解释这是什么？

```
(function( window, undefined ) {

    var jQuery = (function() {
    });
           window.jQuery = window.$ = jQuery;
})(window); 
```

这是什么意思？当我使用 Google javascript 函数时，我得到的只是

```
function foo(){ 
    alert("This is an alert"); 
} 
```

我知道使用这些类型的功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T03:04:03.693

简短的回答：这些是提供词法范围和闭包的立即调用函数。

如需更好的解释，请查看我前段时间发布的[**这个答案。**](https://stackoverflow.com/questions/5305634/jquery-question-what-does-it-really-mean/5305786#5305786)

**更新：**

词法作用域意味着在函数内声明的变量在函数体之外是不可见的。

闭包是一种保留对否则超出范围的变量的引用的方法，因为如果它们在定义函数体的范围内，那么它可用于该函数的任何后续调用。请参阅：[关闭维基百科](http://en.wikipedia.org/wiki/Closure_(computer_science))。

**更新 2：**

如果您**真的**想了解所有这些内容，那么我强烈建议您观看 Gerry Sussman 和 Hal Abelson 于 1986 年在麻省理工学院举办[的计算机程序结构和解释](http://groups.csail.mit.edu/mac/classes/6.001/abelson-sussman-lectures/)讲座（[可在 YouTube 上找到](http://www.youtube.com/playlist?list=PL8FE88AA54363BC46)）。在我看来，没有比观看这些讲座更好的方式来真正理解 JavaScript，即使它们不是关于 JavaScript 的。您将很快看到 Brendan Eich 在设计 JavaScript 时真正的灵感来源是哪种语言。提示：这不是 Java。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T03:06:45.410

它是一个自行执行的函数，也称为[模块模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)。

它通常用于引入`public`和`private`命名空间，因为在所述函数内部定义的属性不能从外部访问，而您返回的属性是。

例如，如果您返回一个对象，则可以将函数视为一个对象，如下所示：

```
var a = (function() {
  var a= 0; // this is only accessible inside this function
  var b = {
    a: 1 // this will be returned and therefore be accessible on the outside
  };
  return b;
})();

console.log(a.a); // outputs 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T03:44:44.400

下面是一个函数语句。它可以单独存在。

```
function foo(){ 
    alert("This is an alert"); 
} 
```

它可以像这样“调用”（执行）：

```
foo(); 
```

下面是一个函数表达式（如匿名函数**见底部编辑**）。与任何其他表达式一样，它就像一个右值，您可以将它分配给一个变量

```
var f = function (){ 
    alert("This is an alert"); 
}; 
```

然后，可以像这样“调用”（执行）：

```
f(); 
```

或者您可以像这样使用运算符：

```
(function (){ 
 alert("This is an alert"); 
})(); 
```

请注意，这个变量现在可以作为参数传递给其他函数！（即我们可以将函数作为参数传递）。

现在，让我们分析一下：

```
(function( window, undefined ) {
    //blah blah blah -1
    //blah blah blah -2
})(window); 
```

这可以分为两个：

```
var f = function( window, undefined ) {
    //blah blah blah
};
f(window); 
```

该函数（分配给 f）有 2 个参数，***`window`***并且***`undefined`***. 我们将第一个参数作为`window`（由浏览器提供给调用者；它是一个全局对象）传递。请注意，我们没有传递任何第二个参数。但是由于我们期望函数中有第二个参数但没有传递任何参数，Javascript 解释器将为它分配一个`undefined`值（如解释器中定义的那样）。所以变量（参数）***`undefined`***现在包含未定义。

接受这两个值作为参数的主要目的是使函数独立于全局变量。（想象一下，如果某些 JS 脚本或浏览器插件将 undefined 更改为其他内容会发生什么！）

参考： [https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions) [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators)

编辑：

正如@FelixKling 评论的那样，函数表达式不必是匿名的，它们可以有名称。

```
var f = function foo(){ 
    alert("This is an alert"); 
} 
```

[这](http://kangax.github.com/nfe/)是一篇关于它们用法的有趣文章。

# c# - 如何使用 string.compare

> ID：12549377
> 
> 赞同：-4
> 
> 时间：2012-09-23T02:59:55.967
> 
> 标签：c#

那个 string.compiler 东西有一个错误，我不知道该怎么做。我真的需要一些帮助

```
char[] valWord = new char[100];

Console.WriteLine(textBox1.Text);
valWord = textBox1.Text;
int beg = 0;
int val = 0;
int value = 0;

for (int i = 0; i < 100; i++)
{
    if (valWord[i] == ' ' || valWord[i] == '\0')
    {
        char[] temp = new char[100];
        for (int j = 0; j < i - beg; j++)
        {
            temp[j] = valWord[beg + j];
        }
        temp[i - beg] = '\0';

//there is an error in this if statement: String.Compare

        if (String.Compare(temp, "thousand") == 0)
        {
            value += (val*1000);
            val = 0;
        }
        else if (String.Compare(temp, "hundred") == 0)
        {
            value += (val*100);
            val = 0;
        }
        else if (String.Compare(temp, "one") == 0)
        {
            val = 1;
        }
        else if (String.Compare(temp, "two") == 0)
        {
            val = 2;
        }

        if (valWord[i] == '\0')
        {
            value += val;
            break;
        }
    }
    Console.WriteLine(textBox2.Text);

}
else
{
    _list.Add(name, new GenericList());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:02:07.977

You can't compare a string to a char array. They are different types.

Use `if (string.Equals(new string(temp),"thousand"))` instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:16:57.043

根据[MSDN](http://msdn.microsoft.com/en-us/library/2se42k1z.aspx)，没有为 String.Compare 定义这样的函数重载

# wpf - 无法将 UserControl 添加到 ListBox 中 SelectedItem 上的现有网格

> ID：12549384
> 
> 赞同：0
> 
> 时间：2012-09-23T03:01:15.143
> 
> 标签：wpf, mvvm, listbox, visibility

我是 WPF 的新手。我目前正在开发一个应用程序，我在 MSVC# 2010 中的解决方案有 2 个项目。一个项目（即MSPBoardControl）有一个mainwindow.xaml，我添加了另一个wpf 窗口ConnectView.xaml。通过使用 mainwindow.xaml 中的网格，我可以将 Connectview.xaml 视图添加到我在 mainwindow.xaml.cs 中的应用程序中。我的第二个项目是一个类库，它有一个用户控件（即电压）。

**Mainwindow.xaml：**此网格是我添加 Connectview.xaml UI 组件的网格

```
<Grid Grid.Row="0" Name="MainGrid" HorizontalAlignment="Stretch" Style="{DynamicResource styleBackground}" >                        
                </Grid> 
```

我的 mainwindow.xaml 左侧有一个列表框，其中包含项目列表（即电压、时钟等）。.xaml 的右侧有我的网格，如上所示（包含启动时的连接视图）。我基本上需要的是当我从列表框中单击项目时，我想隐藏启动时显示的视图（连接视图）并使所选项目 UI 组件可见。

如开头所述，我想让我的类库（VoltageView）的用户控件在从列表框中单击“电压”项时可见。

**我的 mainwindow.xaml 中的 ListBox：**

```
 <ListBox Name="ButtonPanel" Style="{DynamicResource styleBanner}" ItemsSource="{Binding BoardOperations, Mode=TwoWay}" SelectedItem="{Binding SelectedList}" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Name="BoardTabChanger" Margin="53,27,0,0" Text="{Binding ListName}" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

MSBoardControl 的 ViewModel 类在这里：

```
public class BoardControlViewModel : INotifyPropertyChanged
{        
    public ObservableCollection<BoardControlModel> m_BoardOperation;
    public List<ConnectModel> m_BoardNames; 

    public BoardControlViewModel()
    {
        //Adding items to ListBox
    }

    public List<ConnectModel> BoardNames
    {
        get; set;
    }

    private ConnectModel m_SelectedBoardItem;
    public ConnectModel SelectedBoard
    {
        get; set;
    }

    public ObservableCollection<BoardControlModel> BoardOperations
    {
        get; set;
    }

    //GIVES ME THE SELECTED ITEM FROM LISTBOX

    private BoardControlModel m_SelectedListItem;
    public BoardControlModel SelectedList
    {
        get
        {
            return m_SelectedListItem;
        }

        set
        {
            m_SelectedListItem = value;
            onListSelected(value);
            NotifyPropertyChanged("SelectedList");                
        }
    }

    private void onListSelected(BoardControlModel SelectedItem)
    {
        if (SelectedItem.ListName == "Voltage")
        {
            //HOW CAN I ADD THE VOLTAGEVIEW HERE???
        }
    } 
```

上述方法 OnListSelected() 检索所选项目，当我检查条件 dat item = voltage 时，我想将电压视图组件添加到我的主网格并隐藏连接视图。

电压视图.xaml：

```
<Grid Name="VoltageControl" Style="{DynamicResource styleBackground}" DataContext="{StaticResource VoltageViewModel}" >
    <Label Content="Label" FontSize="15" Foreground="Black" Height="28" HorizontalAlignment="Left" Margin="10,31,0,0" Name="label9" VerticalAlignment="Top" Width="117" />
    <Label Content="Set Voltage" FontSize="15" Foreground="Black" Height="28" HorizontalAlignment="Left" Margin="150,31,0,0" Name="label10" VerticalAlignment="Top" Width="117" />
    <Label Content="Current Value" FontSize="16" Foreground="Black" Height="28" HorizontalAlignment="Left" Margin="300,31,0,0" Name="label11" VerticalAlignment="Top" Width="117" />
    <Label Content="Enable/Disable" FontSize="15" Foreground="Black" Height="28" HorizontalAlignment="Left" Margin="460,31,0,0" Name="label12" VerticalAlignment="Top" Width="127" />
    <Button Content="Refresh All" FontSize="13" Height="25" HorizontalAlignment="Left" Margin="230,520,0,0" Name="RefreshBtn" VerticalAlignment="Top" Width="105" />
</Grid> 
```

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:15:48.920

我会保留这个一般（ish）。您最好的选择可能是在 BoardControlViewModel 上添加一个 Grid 类型的属性（或任何电压和连接通用的 UIElement）。随着选择的更改，将 UI 属性更改为您想要的视图，然后为该属性点击 NotifyPropertyChanged。如果您愿意，可以直接从 onListSelected 调用 NotifyPropertyChanged。将您使用的任何网格的内容绑定到此属性，最好在 xaml.xml 中。当属性更改时，WPF 将通知网格其绑定内容已更改，并且它将查询您的新属性以查看它应该是什么。

# iphone - 在 iOS 上，如何使“链接”或按钮的动态列表调用带有字符串参数的方法？

> ID：12549396
> 
> 赞同：4
> 
> 时间：2012-09-23T03:05:17.340
> 
> 标签：iphone, ios, uikit, uibutton

似乎使文本在 iOS 上表现得像链接的一种常见方法是使其成为 UIButton，但我注意到 UIButton`addTarget`或gestureRecognizer`addTarget`都没有可以在按下按钮时传递给方法的参数？

情况是，从服务器上，我们可能会返回一个单词列表，例如“pineapple”、“apple”、“orange”，并且数字可能会有所不同。这些词显示在屏幕上，按下该词将调用 ViewController 来替换主视图控制器。

似乎一种方法是使用 UIButton 的标签，所以我们在设置按钮时，给它一个标签 0，并在当前视图或视图控制器的另一个数组中，使元素 0 指向一个 NSString 对象，其中包含“菠萝”一词。所以在处理程序中，可以获取标签，并且可以使用它来检索字符串。但这是唯一的方法，因为它似乎不是很结构化。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:25:24.763

我下意识的回答是简单地建议你将`UIButton`. 每当您想向现有类添加属性时，“子类”是您想到的第一个答案。但是当我尝试对 进行子类化时`UIButton`，它并没有很好地工作。搜索“UIButton 子类”时，我发现这是一个众所周知的问题，有几个推荐的解决方案：

*   [子类 UIButton 添加属性](https://stackoverflow.com/questions/5500327/subclass-uibutton-to-add-a-property)
*   [目标 C：从 UIButton 类的子类创建的按钮不起作用](https://stackoverflow.com/questions/6443639/objective-c-buttons-created-from-subclass-of-uibutton-class-not-working)
*   [创建 uibutton 子类](https://stackoverflow.com/questions/5045672/create-uibutton-subclass)

我已经尝试过创建[具有关联引用的类别](https://stackoverflow.com/a/5500525/1271826)以及仅将 a 子类化的简单方法`UIView`，并将所需的按钮作为其子视图。两种方法都可以正常工作。`UIButton`但是仅子类化的直观有吸引力的选择效果*不佳*。

但是，虽然为对象添加属性的各种变通方法都`UIButton`有效，但它们似乎不够直观，我倾向于回到简单的东西，例如使用`tag`数组或字典中的数字，而不是追求这些繁琐的按钮子类化技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T13:54:56.667

创建一个可变字典。要将单词与按钮相关联，请将包含在 nsnumber 中的按钮地址添加为键，将单词添加为对象。当按钮被按下并与“发送者”一起发送操作消息时，您可以从字典中检索当前单词。

# android - Android ParcelFileDescriptor.createPipe() for Froyo?

> ID：12549404
> 
> 赞同：4
> 
> 时间：2012-09-23T03:08:00.317
> 
> 标签：android, file-descriptor, android-2.2-froyo, android-2.3-gingerbread

I have a need to use [`ParcelFileDescriptor.createPipe()`](http://developer.android.com/reference/android/os/ParcelFileDescriptor.html#createPipe%28%29), but I would still like to target API 8/Froyo. This function requires API 9/Gingerbread.

I have read that there are compatibility kits that allow newer API functions to be used on the older OS versions, but know nothing about them. Is that an option here?

If not, what would be the cleanest method for going about duplicating this functionality? I have considered using [`fromSocket()`](http://developer.android.com/reference/android/os/ParcelFileDescriptor.html#fromSocket%28java.net.Socket%29) and making a simple network connection over the loopback interface, but that seems like more overhead than is needed, if there were a simpler way.

Any thoughts or advice would be much appreciated. I should also point out that I am using Monodroid, but a simple Java-based example that uses the Android API would be fine. I can translate it to C#.

# javascript - 在保持订单的同时选择照片

> ID：12549405
> 
> 赞同：0
> 
> 时间：2012-09-23T03:08:00.807
> 
> 标签：javascript

我在页面上有一个照片列表，每个都有一个唯一的 id，用户可以单击它们来切换选择照片，当他们单击提交按钮时，我需要将所选照片 id 的数组发送到后端，在选择照片的顺序。

我认为跟踪照片是否被选中的最快方法是使用使用照片 ID 作为键的对象，例如：

```
var selected = {
    "6272861": true,
    "6272888": true
} 
```

当用户取消选择一张照片时，我只需要`delete selected["6272861"]`.

但这将忽略顺序，如果我使用数组来保留选定的照片：

```
var selected = ["6272861", "6272888"]; 
```

然后当我需要取消选择照片时，我必须遍历数组并删除该项目。

有没有更好的方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:24:07.763

这是一些执行您所说的JavaScript：

```
window.addEventListener("load", function () {
    "use strict";

    var imgClick = function (elemSelected, elemThis) {
        var idIndex;
        if ((idIndex = imgSelected.indexOf(elemThis.id)) === -1) {
            imgSelected.push(elemThis.id);
            elemThis.className = "selected"
        } else {
            imgSelected.splice(idIndex, 1);
            elemThis.className = "unselected";
        };
        console.log(elemSelected);
    }

    var imgDiv = document.getElementById("imgDiv");
    var imgChildren = imgDiv.children;
    var imgElements = [];
    var imgSelected = [];
    var i;

    for (i = 0; i < imgChildren.length; i += 1) {
        imgElements.push(imgChildren[i]);
        imgChildren[i].addEventListener("click", function () {imgClick(imgSelected, this)});
    }
}); 
```

以下是相关的 HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<script type="text/javascript" src="imageSelect.js"></script>
<style type="text/css">
    img.unselected {
        border-color: black;
        border-width: 1px;
        border-style: solid;
    }
    img.selected {
        border-color: red;
        border-width: 3px;
        border-style: solid;
    }
</style>
<body>
<div id="imgDiv">
    <img class="unselected" id="img01" src="intrepidWidgets.ico" title="Unselected"/>
    <img class="unselected" id="img02" src="300px-Java_logo_svg.png" title="Unselected"/>
</div>

</body>
</html> 
```

这是一个讨论 Array 全局对象的 indexOf 属性的链接。它可能与 IE 9 之前的 Internet Explorer 存在兼容性问题，但他们有代码来解决这个问题：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

这是工作代码的链接。您需要打开控制台查看生成的日志（在 Chrome 中按 F12）：

[http://www.quirkscode.com/flat/forumPosts/imgSelect/imageSelect.html](http://www.quirkscode.com/flat/forumPosts/imgSelect/imageSelect.html)

MDN also discusses addEventListener (search for that element name). It is the preferred way now of adding event listeners, but has compatibility issues with IE < 9:

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:32:04.853

正如您似乎已经知道的那样，对象不会保持顺序，因此如果顺序很重要，那么您将需要使用数组。

您可以使用以下命令将项目添加到数组的末尾：

```
selected.push("6272898"); 
```

您可以使用简单的功能删除项目：

```
function removeSelected(item) {
    for (var i = selected.length - 1; i >= 0; i--) {
        if (selected[i] === item) {
             selected.splice(i, 1);
        }
    }
} 
```

注意：这会从后到前搜索数组，因此当删除项目时，我们不必更正/更改循环索引。

# javascript - how to run the Mozilla browserQuest?

> ID：12549406
> 
> 赞同：-3
> 
> 时间：2012-09-23T03:08:02.803
> 
> 标签：javascript, html, client

Wish someone will give me a hand. I am a very very newbie web developer(Even i never hear node.js and how to use it?).Now i download the Mozilla opensource game browserQuest from github.After read the README.md under the bin file.I open the node.js and type the command which it says then come some errors

Could someone show me the procedure step by step.Appreciate any relay.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:55:39.810

对于有兴趣尝试 BrowerQuest 代码或参与进一步开发的任何人，请使用此 GitHub 存储库：

[https://github.com/browserquest/BrowserQuest](https://github.com/browserquest/BrowserQuest)

Mozilla 存储库有许多错误，虽然是一个有用的参考点，但已被放弃。:(

# io - OCaml 格式和结构框：为什么我的输出与示例不匹配？

> ID：12549411
> 
> 赞同：6
> 
> 时间：2012-09-23T03:09:35.887
> 
> 标签：io, ocaml

在 OCaml 网站上的[Using the Format module页面上有一个示例，它给出了结构和包装 hov 盒之间差异的示例。](http://caml.inria.fr/resources/doc/guides/format.en.html)我试图复制这个例子。（我使用的是 OCaml 3.12.1。）

使用以下输入：

```
Format.printf "@[<hov 2>(---@\n@[<hov 2>(---@\n@[<hov 2>(---@,)@]@,)@]@,)@]@\n" 
```

我得到了预期的输出：

```
(---
  (---
    (---))) 
```

我想不通的是如何获得页面归于“结构框”的输出：

```
(---
  (---
    (---
    )
  )
) 
```

我不确定哪个`Format.printf`标识符映射到这些框，所以我尝试了几种变体：

```
Format.printf "@[<hv 2>(---@\n@[<hv 2>(---@\n@[<hv 2>(---@,)@]@,)@]@,)@]@\n"
Format.printf "@[<2>(---@\n@[<2>(---@\n@[<2>(---@,)@]@,)@]@,)@]@\n"
Format.printf "@[<b 2>(---@\n@[<b 2>(---@\n@[<b 2>(---@,)@]@,)@]@,)@]@\n" 
```

`<hov 2>`但是以上所有内容都给出了与初始示例相同的输出。有人知道如何从网页获得类似于第二个示例的输出吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T09:44:29.213

我原以为您的第二个示例（带有高压盒）应该可以工作。但似乎@\n 没有我们期望的行为。

**解决方案1：**强制右括号前换行，即用@\n替换@。

```
let () =
  Format.printf "@.";
  Format.printf "@[<hov 2>(---@\n@[<hov 2>(---@\n@[<hov 2>(---@\n)@]@\n)@]@\n)@]@\n";
  Format.printf "@." 
```

结果：

```
(---
  (---
    (---
      )
    )
  ) 
```

问题：总会有一个换行符，它永远不会打印：

> (---(---(---)))

即使它有空间。如果这对您来说是个问题，请参阅解决方案 2。

**解决方案 2：**使用更长的行 :) 如果中断是由长行引起的，那么 hv 框会在右括号之前中断行。

```
let () =
  Format.printf "@.";
  Format.printf "@[<hv 2>(------------------------------------------------------------------------@,@[<hv 2>(---@,@[<hv 2>(---@,)@]@,)@]@,)@]";
  Format.printf "@." 
```

结果：

```
(------------------------------------------------------------------------
  (---(---))
  ) 
```

但是，右括号与左括号不对齐。

**解决方案3：**如果要右括号与左括号对齐，则需要两个框。

```
let () =
  Format.printf "@.";
  Format.printf
    "@[<hv>@[<hv 2>(------------------------------------------------------------------------\
     @[<hv>@[<hv 2>(------------------------------------------------------------------------\
     @[<hv>@[<hv 2>(------------------------------------------------------------------------\
     @]@,)@]@]@,)@]@]@,)@]";
  Format.printf "@." 
```

结果：

```
(------------------------------------------------------------------------
  (------------------------------------------------------------------------
    (------------------------------------------------------------------------
    )
  )
) 
```

# coq - 假设“或消除”证明的一半析取前提

> ID：12549412
> 
> 赞同：2
> 
> 时间：2012-09-23T03:09:40.600
> 
> 标签：coq, coq

我想到目前为止，我已经阅读了标记为[coq](/questions/tagged/coq "显示标记为“coq”的问题")的 81 个问题（如果不是全部的话）的大部分内容。作为 coq 的新手，我无法找到这个非常简单的问题的答案（我相当肯定没有在 SO 上问过这个问题，因为它非常基础）。

我正在做一个家庭作业，为此我需要使用 coq 来证明：

*   给定：P/Q。～问
*   证明：P

这是我在纸上做的一个足够简单的证明，但我似乎无法让 coq 为我做这件事。

我的策略是假设每个`P`和`Q`，显示`P`并因此得出结论`P`必须成立：

1.  P / Q [前提]
2.  ～Q【前提】

    1.  P [假设]
    2.  P [复制上一行]

        * * *

    3.  问 [假设]

    4.  ~Q [复制上一行]
    5.  [矛盾]
    6.  P【矛盾消除】
3.  P [消除`\/`]

* * *

鉴于这是我在纸上证明它的方式，我能够想出以下 coq 代码在 coq 中证明它。可悲的是，我努力假设`P`,`Q`或`~P`没有通过：

```
Section Q5.

Variables P Q : Prop.
Hypothesis premise1 : P \/ Q.
Hypothesis premise2 : ~Q.

Goal P. 
```

这是我对下一行的尝试，以及它们产生的错误：

```
+-----------------+---------------------------------------------------------------------+
|      Code       |                                Error                                |
+-----------------+---------------------------------------------------------------------+
| assumption.     | Error: No such assumption.                                          |
| exact P.        | The term "P" has type "Prop" while it is expected to have type "P". |
| apply premise1\. | Error: Impossible to unify "P \/ Q" with "P".                       |
| apply P.        | Error: Impossible to unify "Prop" with "P".                         |
+-----------------+---------------------------------------------------------------------+ 
```

我很感激这方面的任何帮助，因为我已经用尽了我能想到的一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T06:12:17.507

我不确定我是否理解你的策略，但它似乎是正确的。

您要做的基本上是考虑`P \/ Q`析取的两种情况。这可以通过策略来完成`destruct premise1.`，这将产生两个目标，一个在其中`p: P`，一个在其中`q: Q`。这两个应该很容易证明。

你的战术失败的原因：

```
P : Prop
Q : Prop
premise1 : P \/ Q
premise2 : ~ Q
______________________________________(1/1)
P 
```

1.  `assumption.`不会起作用，因为它只是在您的假设中查找类型是您当前目标的术语。这里没有类型的术语`P`。

2.  `exact P.`将失败，因为该策略`exact <term>.`应该解决一个目标`<type>`，如果`<term> : <type>`. 你的目标不是`Prop`，对吧？:)

3.  `apply premise1.`会失败，因为它只适用于一个目标`P \/ Q`。

4.  `apply P.`与当时基本相同`exact P.`。

* * *

总体而言，您似乎在区分术语和类型时遇到了（常见）问题。请记住，您的目标是一种类型，您尝试通过构建一个术语来证明它。你的假设都是形式的`<term> : <type>`，所以每当你使用`exact <term>.`or时`apply <term>.`，这是因为冒号右边的东西`<term>`匹配你的目标，而不是冒号左边的名字。

# python - String with special characters don't work with Python and regex

> ID：12549414
> 
> 赞同：1
> 
> 时间：2012-09-23T03:09:59.790
> 
> 标签：python, regex

I'm working in this project and the special characters are driving me crazy! I've searched a lot of solutions around the foruns but they didn't fix my problem.

I have this string with special characters:

```
['{"response":{"startRow":0,"endRow":5,"totalRows":5,"data":   [{"CODIGO":"72","DESCRICAO":"RECEITA INTRA-ORÇÁMENTÁRIAS DE CONTRIBUÇÕES","PREVISTA":225847716.0,"REALIZADA":165311075.58,"DIFERENCA":60536640.42,"R___":1.0},{"CODIGO":"76","DESCRICAO":"RECEITA  INTRA-ORÇAMENTÁRIAS DE SERVIÇOS","PREVISTA":22367493.0,"REALIZADA":3435363.08,"DIFERENCA":18932129.92,"R___":2.0},{"CODIGO":"77","DESCRICAO":"TRANSFERÊNCIAS  INTRA-ORÇAMENTÁRIAS CORRENTES","PREVISTA":1218252.0,"REALIZADA":0.0,"DIFERENCA":1218252.0,"R___":3.0},{"CODIGO":"71","DESCRICAO":"RECEITA TRIBUTÁRIA INTRA-ORÇAMENTÁRIA","PREVISTA":12000.0,"REALIZADA":0.0,"DIFERENCA":12000.0,"R___":4.0},{"CODIGO":"79","DESCRICAO":"OUTRAS RECEITAS INTRA-ORÇAMENTÁRIAS CORRENTES","PREVISTA":0.0,"REALIZADA":311785.30,"DIFERENCA":-311785.30,"R___":5.0}]}}'] 
```

And I have to find some specifics strings using regex but I have to mantain the special characters.

I've tried some things:

```
nkfd_form = unicodedata.normalize('NFKD', unicode(html))
print u"".join([c for c in nkfd_form if not unicodedata.combining(c)])

print ' '.join(re.findall(r'(?:\w{3,}|-(?=\s))', html))
print ' '.join(''.join([i if ord(i) < 128 else ' ' for i in html]).split()) 
```

And a lot of others things...

But when I search using my pattern:

```
result = re.findall('(:\"[\w\-r"/" ]+"|:[\w\s.\-r"/" ]+)', html, re.U) 
```

The special characters aren't correct. The result is something like this:

```
[':0', ':2', ':2', ':"94"', ':"DEDU', ':0.0', ':-2748373.25', ':2748373.25', ':1.0', ':"95"', ':"DEDU', ':-1421484000.0', ':-1062829156.22', ':-358654843.78', ':2.0']
[':0', ':5', ':5', ':"72"', ':"RECEITA INTRA-OR', ':225847716.0', ':165311075.58', ':60536640.42', ':1.0', ':"76"', ':"RECEITA  INTRA-OR', ':22367493.0', ':3435363.08', ':18932129.92', ':2.0', ':"77"', ':"TRANSFER', ':1218252.0', ':0.0', ':1218252.0', ':3.0', ':"71"', ':"RECEITA TRIBUT', ':12000.0', ':0.0', ':12000.0', ':4.0', ':"79"', ':"OUTRAS RECEITAS INTRA-OR', ':0.0', ':311785.30', ':-311785.30', ':5.0'] 
```

It ignores the special characters!

I need it because I'll write data in a CSV files and it wont work with this errors.

A simple test using prompt:

```
>>> import re
>>> re.findall('\w+', 'Márquez', re.U)
['M\xc3', 'rquez'] 
```

What do I have to do to fix this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:09:23.790

将我的评论变成答案（有点，因为它不包含正则表达式）：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import json
import csv
import cStringIO
import codecs
import types

class UnicodeDictWriter(csv.DictWriter):
    """
    A CSV DictWriter which will write rows to CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, fields, dialect=csv.excel, encoding="utf-8", **kwds):
        # Redirect output to a queue
        self.queue = cStringIO.StringIO()
        self.writer = csv.DictWriter(
            self.queue, fields, dialect=dialect, **kwds)
        self.stream = f
        self.encoder = codecs.getincrementalencoder(encoding)()

    def writerow(self, row):
        self.writer.writerow(dict(
            (f, v.encode("utf-8") if isinstance(v, types.StringTypes) else v)
                for f, v in row.iteritems()))
        # Fetch UTF-8 output from the queue ...
        data = self.queue.getvalue()
        data = data.decode("utf-8")
        # ... and reencode it into the target encoding
        data = self.encoder.encode(data)
        # write to the target stream
        self.stream.write(data)
        # empty queue
        self.queue.truncate(0)

    def writerows(self, rows):
        for row in rows:
            self.writerow(row)

data = '{"response":{"startRow":0,"endRow":5,"totalRows":5,"data":   [{"CODIGO":"72","DESCRICAO":"RECEITA INTRA-ORÇÁMENTÁRIAS DE CONTRIBUÇÕES","PREVISTA":225847716.0,"REALIZADA":165311075.58,"DIFERENCA":60536640.42,"R___":1.0},{"CODIGO":"76","DESCRICAO":"RECEITA  INTRA-ORÇAMENTÁRIAS DE SERVIÇOS","PREVISTA":22367493.0,"REALIZADA":3435363.08,"DIFERENCA":18932129.92,"R___":2.0},{"CODIGO":"77","DESCRICAO":"TRANSFERÊNCIAS  INTRA-ORÇAMENTÁRIAS CORRENTES","PREVISTA":1218252.0,"REALIZADA":0.0,"DIFERENCA":1218252.0,"R___":3.0},{"CODIGO":"71","DESCRICAO":"RECEITA TRIBUTÁRIA INTRA-ORÇAMENTÁRIA","PREVISTA":12000.0,"REALIZADA":0.0,"DIFERENCA":12000.0,"R___":4.0},{"CODIGO":"79","DESCRICAO":"OUTRAS RECEITAS INTRA-ORÇAMENTÁRIAS CORRENTES","PREVISTA":0.0,"REALIZADA":311785.30,"DIFERENCA":-311785.30,"R___":5.0}]}}'
field_order = [
    'CODIGO', 'DESCRICAO', 'PREVISTA', 'REALIZADA', 'DIFERENCA', 'R___']

with open('jsontest.csv', 'w') as csvfile:
    writer = UnicodeDictWriter(csvfile, field_order)
    writer.writerows(json.loads(data)['response']['data']) 
```

然后`jsontest.csv`看起来像这样：

```
72,RECEITA INTRA-ORÇÁMENTÁRIAS DE CONTRIBUÇÕES,225847716.0,165311075.58,60536640.42,1.0
76,RECEITA  INTRA-ORÇAMENTÁRIAS DE SERVIÇOS,22367493.0,3435363.08,18932129.92,2.0
77,TRANSFERÊNCIAS  INTRA-ORÇAMENTÁRIAS CORRENTES,1218252.0,0.0,1218252.0,3.0
71,RECEITA TRIBUTÁRIA INTRA-ORÇAMENTÁRIA,12000.0,0.0,12000.0,4.0
79,OUTRAS RECEITAS INTRA-ORÇAMENTÁRIAS CORRENTES,0.0,311785.3,-311785.3,5.0 
```

我使用了 Python 2.6.8。

顺便说一句：我从[这里](http://docs.python.org/library/csv.html#examples)`UnicodeDictWriter`改编了课程。只需向下滚动两三个屏幕，您就会找到原始课程。`UnicodeWriter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:25:57.663

您的输入似乎是 unicode，但正则表达式不是..

尝试将**所有**正则表达式模式更改为 unicode，如下所示：

```
print ' '.join(re.findall(ur'(?:\w{3,}|-(?=\s))', html)) 
```

参考：

[http://docs.python.org/tutorial/introduction.html#unicode-strings](http://docs.python.org/tutorial/introduction.html#unicode-strings)

# sql-server-2008 - 在 SQL Server 2008 中使用 MERGE

> ID：12549415
> 
> 赞同：1
> 
> 时间：2012-09-23T03:10:03.130
> 
> 标签：sql-server-2008, merge

我刚刚发现了这个漂亮的小功能。我有几个问题。考虑下面的陈述。

这就是解释它是如何工作的。USING 语句是用来比较是否匹配正确的？我想使用它现在的样子，但我想在 MATCH 部分的源表中使用另外 2 个列。我不能那样做。那么有没有办法可以使用 2 列（已故（我知道它的拼写错误:)）和 hicno_enc）？
我想做的另一件事不知道是否可能，但是如果该行存在于目标中但不存在于源中，则将其标记为非活动。

```
SELECT FIRST_NAME, LAST_NAME, SEX1, BIRTH_DATE
FROM 
    aco.tmpimport i
    INNER JOIN aco.patients p 
    ON p.hicnoenc = i.hicno_enc
    MERGE aco.patients AS target
    USING (
            SELECT FIRST_NAME, LAST_NAME, SEX1, BIRTH_DATE 
            FROM aco.tmpimport
          ) AS source
    ON target.hicnoenc = source.hicno_enc
    WHEN MATCHED AND target.isdeceased <> CONVERT(BIT,source.decesed) THEN 
        UPDATE 
            SET 
                target.isdeceased = source.decesed, 
                updatedat = getdate(), 
                updatedby = 0
    WHEN NOT MATCHED THEN
        INSERT (firstname, lastname, gender, dob, isdeceased, hicnoenc)
        VALUES (source.FIRST_NAME, 
                source.LAST_NAME, 
                source.sex1, 
                source.BIRTH_DATE, 
                source.decesed, 
                source.hicno_enc); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:20:37.767

> 那么有没有办法可以使用 2 列（已故（我知道它的拼写错误:)）和 hicno_enc）？

在 using 子句的 select 语句中添加您需要的列。

```
USING (
        SELECT FIRST_NAME, LAST_NAME, SEX1, BIRTH_DATE, decesed, hicno_enc 
        FROM aco.tmpimport
      ) AS source 
```

> 如果该行存在于目标中但不存在于源中，则将其标记为非活动。

添加一个`when not matched by source`子句并进行更新。

```
WHEN NOT MATCHED BY SOURCE THEN
    UPDATE 
        SET active = 0 
```

# jquery - 用 jQuery 替换正确 div 中的 HTML

> ID：12549419
> 
> 赞同：1
> 
> 时间：2012-09-23T03:11:01.337
> 
> 标签：jquery

我有一些从 php 循环自动生成的 div。

```
<div class="link_0"><a href=# onclick="getLink('20120922','0');">Get Link</a></div>
<div class="link_1"><a href=# onclick="getLink('20120922','1');">Get Link</a></div>
<div class="link_2"><a href=# onclick="getLink('20120922','2');">Get Link</a></div> 
```

我正在尝试使用 jQuery 将用户单击的正确 div 替换为另一个 php 查询中的内容。

```
function getLink(thisDate, i)
{
    $.post("json.php?page=ajax", { date: thisDate },
        function(data) {
            ('.link_'+i).html(data);
    });  
} 
```

我束手无策，试图找出我做错了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T03:12:59.820

看起来您缺少美元符号 ($(...))！;-)

```
$('.link_'+i).html(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T03:24:04.493

```
$('.link_'+i).html(data); 
```

你错过了$

# php - 如何将博客的最后一篇文章摘要放在另一个博客的主页中？

> ID：12549421
> 
> 赞同：0
> 
> 时间：2012-09-23T03:11:41.337
> 
> 标签：php, wordpress, blogs

我有两个博客。一名个人和其他专业人士。我不希望我的客户在我的专业博客中看到我的个人资料，但我希望在我的个人博客中查看最后的专业帖子之二。如果读者点击标题，他会被重定向到专业博客。

我怎么做？这甚至可能吗？

* * *

类似于 wordpress 认为请求最后一篇文章的那种链接，`site.com/wp/lastpost-non-themed`例如……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:18:37.260

如果你会编程应该没问题。:)

您可以创建一个仅显示帖子摘要的页面，并将`include()`其显示在其他页面上。

循环这样的事情应该这样做：

```
<?php the_excerpt(); ?>
<a href="<?php the_permalink(); ?>">Read More</a> 
```

# objective-c - 在 xib 文件中的视图上设置类

> ID：12549424
> 
> 赞同：0
> 
> 时间：2012-09-23T03:12:01.040
> 
> 标签：objective-c, ios, xcode, xib

我在 Xcode 4.5 中有一个带有情节提要的项目。

我想为一个 UI 使用单独的 xib 文件（长篇故事），但我不知道如何将它连接到该文件的 ViewController。我创建了一个单独的 FooViewController，它是 UIViewController 的子类。但是，它不允许我将其设置为我的 xib 的类（我收到提示名称无效的哔声）

![在此处输入图像描述](../Images/f448e722915d85b4d4da820f8f73d848.png)

奇怪的是，我可以将它设置为一些不是我项目中的类的无意义字符串！？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:55:06.870

Rob 在评论中回答了我的问题。基本上我是在为视图设置类，而不是像我应该的那样设置文件的所有者。

# python - 如何创建独立的列表列表

> ID：12549427
> 
> 赞同：1
> 
> 时间：2012-09-23T03:12:53.557
> 
> 标签：python, list, graph

我想阅读一个图，其顶点编号为 0..n-1。我尝试了以下代码：

```
myfile = open('test.in', 'r')
n = int(myfile.readline())
graph = [[]]*n
for line in myfile:
    u, v, w = map(int, line.strip().split(' '))
    graph[u].append((v, w))
print graph 
```

但效果不好。我发现里面的所有元素`graph`都是一样的！然后我使用下面的代码来修复它：

```
road = [[] for i in xrange(n)] 
```

它确实有效，但看起来不那么漂亮。

我想知道**这种情况是否有更好的解决方案**以及**为什么第一个代码中的所有元素都相同**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:16:47.867

你可以使用

```
from collections import defaultdict
graph = defaultdict(list) 
```

`graph = [[]]*n`不起作用的原因是您正在创建一个空列表，然后对同一个列表进行多次引用

# java - 双向链表

> ID：12549431
> 
> 赞同：1
> 
> 时间：2012-09-23T03:13:33.620
> 
> 标签：java, list, null, linked-list, tail

我有一个任务，我在涉及双向链表时非常迷失（注意，我们应该从头开始创建它，而不是使用内置 API）。该程序应该基本上跟踪信用卡。我的教授希望我们使用双向链表来实现这一点。问题是，这本书没有详细介绍这个主题（甚至没有显示涉及双向链表的伪代码），它只是描述了双向链表是什么，然后用图片来讨论，没有一小段代码。但无论如何，我已经抱怨完了。我非常了解如何创建节点类以及它是如何工作的。问题是如何使用节点来创建列表？这是我到目前为止所拥有的。

```
public class CardInfo 
{
private String name;
private String cardVendor;
private String dateOpened;
private double lastBalance;
private int accountStatus;

private final int MAX_NAME_LENGTH = 25;
private final int MAX_VENDOR_LENGTH = 15;

CardInfo()
{

}

CardInfo(String n, String v, String d, double b, int s)
{
    setName(n);
    setCardVendor(v);
    setDateOpened(d);
    setLastBalance(b);
    setAccountStatus(s);
}

public String  getName()
{
    return name;
}

public String getCardVendor()
{
    return cardVendor;
}

public String getDateOpened()
{
    return dateOpened;
}

public double getLastBalance()
{
    return lastBalance;
}

public int getAccountStatus()
{
    return accountStatus;
}

public void setName(String n)
{
    if (n.length() > MAX_NAME_LENGTH)
        throw new IllegalArgumentException("Too Many Characters");
    else 
        name = n;           
}

public void setCardVendor(String v)
{
    if (v.length() > MAX_VENDOR_LENGTH)
        throw new IllegalArgumentException("Too Many Characters");
    else
        cardVendor = v;
}

public void setDateOpened(String d)
{
    dateOpened = d;
}

public void setLastBalance(double b)
{
    lastBalance = b;
}

public void setAccountStatus(int s)
{
    accountStatus = s;
}

public String toString()
{
    return String.format("%-25s     %-15s     $%-s     %-s     %-s",
            name, cardVendor, lastBalance, dateOpened, accountStatus);
}
} 
```

* * *

```
public class CardInfoNode 
{
CardInfo thisCard;

CardInfoNode next;
CardInfoNode prev;

CardInfoNode()
{

}

 public void setCardInfo(CardInfo info)
 {
     thisCard.setName(info.getName());
     thisCard.setCardVendor(info.getCardVendor());
     thisCard.setLastBalance(info.getLastBalance());
     thisCard.setDateOpened(info.getDateOpened());
     thisCard.setAccountStatus(info.getAccountStatus());
 }

 public CardInfo getInfo()
 {
     return thisCard;
 }

 public void setNext(CardInfoNode node)
 {
     next = node;
 }

 public void setPrev(CardInfoNode node)
 {
     prev = node;
 }

 public CardInfoNode getNext()
 {
     return next;
 }

 public CardInfoNode getPrev()
 {
     return prev;
 }
} 
```

* * *

```
public class CardList
{
CardInfoNode head;
CardInfoNode current;
CardInfoNode tail;

CardList()
{
    head = current = tail = null;
}

public void insertCardInfo(CardInfo info)
{
    if(head == null)
    {
        head = new CardInfoNode();
        head.setCardInfo(info);
        head.setNext(tail);
        tail.setPrev(node) // here lies the problem. tail must be set to something
                               // to make it doubly-linked. but tail is null since it's
                               // and end point of the list.
    }

}

} 
```

这是作业本身，如果它有助于澄清所需的内容，更重要的是，我不理解的部分。谢谢 [https://docs.google.com/open?id=0B3vVwsO0eQRaQlRSZG95eXlPcVE](https://docs.google.com/open?id=0B3vVwsO0eQRaQlRSZG95eXlPcVE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:21:58.153

我假设`CardList`是为了封装实际的双向链表实现。

考虑仅具有单个节点的 DLL 的基本情况：节点`prev`和`next`引用将为空（或自身）。列表的封装`head`和`tail`引用都将是单个节点（因为节点既是列表的开始又是列表的结尾）。这有什么难理解的？

注意：假设这`CardList`是对 DLL 结构（而不​​是操作）的封装，它没有理由拥有一个`CardInfoNode current`字段，因为这种状态信息仅对在结构上工作的算法有用，而这些算法将自己维护（它也使你的类线程不安全）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:24:53.130

```
if(head == null)
    {
        head = new CardInfoNode();
        head.setCardInfo(info);
        head.setNext(tail);
        tail.setPrev(node) // here lies the problem. tail must be set to something
                               // to make it doubly-linked. but tail is null since it's
                               // and end point of the list.
    } 
```

上面的代码适用于当您在列表中没有任何节点时，您将在此处将节点添加到您的列表中。即此处列出的 ist 节点您
将头和尾指向同一个节点

# c# - 分离开发者（管理员）应用程序版本和普通版本

> ID：12549436
> 
> 赞同：1
> 
> 时间：2012-09-23T03:14:44.353
> 
> 标签：c#

我正在编写这个应用程序，我希望（管理员 - 开发人员）比“普通”用户对应用程序有更多的控制权。比方说，只有在启用设置时才会向管理员显示一个按钮。

所以我想知道如何制作两个不同的版本？我现在能想到的唯一方法是首先编写“常规”并发布它，然后重新添加我希望管理员拥有的代码/功能。

也许某个地方的设置或可以在发布期间启用/禁用的东西可以让生活更轻松？任何帮助/提示将不胜感激。

编辑：我刚刚在设置面板中设置了一个设置（设置真/假）并使用属性来允许/禁止功能。如果有人知道更好的方法，请回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:32:29.807

首先，您应该清楚地确定管理员的任务，例如创建用户、删除用户、授予权限、重置密码和配置数据库连接等与用户相关的任务可能属于此类。然后您可以创建一组单独的界面/窗口来处理此任务，您应该仅在管理员登录时启用它们。这是最简单的方法。确定管理员功能后，您还可以选择为管理员创建单独的应用程序。

如果您有一些无法从常规表单中分离出来的功能，例如您的常规表单中的按钮只能为特定用户启用，我认为您应该使用基于设置的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T21:48:05.647

这取决于两个用户组之间的 UI 差异有多大。通常，您希望维护最少的代码量，因此驱动是避免代码重复，因此您不必维护三个具有相同逻辑或 ui 元素的文件。（我假设 ASP.NET：用户控件非常适合处理这个问题。）

其次，不要对用户是谁做出逻辑决定，而是将其抽象出来并根据角色可以做什么（即权限）来建立逻辑。例如：在处理页面和隐藏/显示元素时，如果用户具有“删除”权限，则决定显示“删除”链接。

# c# - 如何从c#中找到新条目已进入数据库

> ID：12549440
> 
> 赞同：0
> 
> 时间：2012-09-23T03:15:21.440
> 
> 标签：c#, sql-server-2008

> **可能重复：**
> [需要 C#/SQL 数据库侦听器帮助](https://stackoverflow.com/questions/2152516/c-sql-database-listener-help-needed)

我正在编写一个应用程序来继续监视服务器机器上的数据库表。如果已在表中添加了新条目，那么我必须使用选择查询收集新的详细信息并作为参数传递给最终构建器以启动自动化。

问题：如何使用 c# 在数据库表中找到新条目？

我对此一无所知？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:19:59.830

在要向其中插入数据的表中使用自动递增 ID。然后，您可以在与插入相同的查询中检索最后插入的 id，从而获得对它的引用。语法取决于您使用的数据库类型，但它们都有某种检索最后插入 id 的方法。请参阅以下 SQL 查询文章来执行此操作：

[http://www.devx.com/vb2themax/Tip/18893](http://www.devx.com/vb2themax/Tip/18893)

编辑：对不起，我想我误读了你的问题。你不是插入数据的人吗？在这种情况下，您仍然需要一个自动递增的 ID，以便您可以选择所有 ID > 您检索到的最后一个 ID 的行。除非您手动重置计数器，否则自动递增的 ID 不会重复使用旧的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:41:18.353

您可以使用表触发器来执行具有自动化指令的存储过程。

您可以获取插入的行并将参数传递给存储过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T04:48:01.347

在表中使用额外的列`InsertedDateTime`。然后，查看表有任何`InsetedDateTime`大于上次使用`InsertedDateTime`的。即您可以读取所有具有`InsertedDatatime`> last的行`InsertedDateTime`

通过使用此解决方案，应用程序不需要了解 PrimaryKey 类型。（自动增量或非自动增量）。

希望这可能会有所帮助。

# cocos2d-iphone - 更改可变数组中的对象 CCSprite Image

> ID：12549441
> 
> 赞同：0
> 
> 时间：2012-09-23T03:15:27.160
> 
> 标签：cocos2d-iphone, nsmutablearray, ccsprite

我创建了一个将 CCSprite 设置为其视觉对象的精灵对象

```
//shapes.h
@interface Shapes : CCSprite 
{
    CCSprite *mySprite;
    GamePlayLayerShapes *theGame;
    NSInteger shapeID;
}

@property (nonatomic, retain) CCSprite *mySprite;
@property (nonatomic, retain) GamePlayLayerShapes *theGame;
@property (nonatomic, readwrite) NSInteger shapeID;

@end 
```

然后在shapes.mi中初始化对象

```
//shapes.m
@implementation Shapes

@synthesize mySprite, theGame, active, shapeID;

-(id) initWithGame:(GamePlayLayerShapes *)game andFile:(NSString *)file andNumber:  (NSInteger)number andZ:(NSInteger)z
{
self = [super init];
if(self != nil) 
{
    self.theGame = game;

    if (number > 25)
    {
        mySprite = [CCSprite spriteWithFile:file];
    }
    else
    {
        mySprite = [CCSprite spriteWithSpriteFrameName:file];
    }
    [theGame addChild:mySprite z:z];
    [mySprite setPosition:ccp(500, 200)];
    self.shapeID = number;
}
return self;
} 
```

然后在gameplaylayershapes.hi中设置两个NSMutableArray（我没有添加所有不相关的变量。

```
@interface GamePlayLayerShapes : CCLayer 
{
CCSpriteBatchNode *shapesSpriteBatchNode;
NSMutableArray *shapeArray;
NSMutableArray *targetShapeArray;
    Shapes *newShape;
} 
```

然后我在gameplaylayershapes.m中设置它

```
-(id) init
{
self = [super init];
if(self != nil)
{
    srandom(time(NULL));
    shapeArray = [[NSMutableArray alloc] init];
    targetShapeArray = [[NSMutableArray alloc] init];

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"GameplayShapes.plist"];
    shapesSpriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"GameplayShapes.png"];

    [self addChild:shapesSpriteBatchNode];

    [self createTargetShape];

    [self runGame];

    }
return self;
}

-(void)createTargetShape
{
   //fills 4 variables with random numbers between 1 and 25
    targetShape1 = (arc4random() % 25) +1;
    targetShape2 = (arc4random() % 25) +1;
    targetShape3 = (arc4random() % 25) +1;
    targetShape4 = (arc4random() % 25) +1;

for (int x=1; x<5; x++)
{
    switch (x)
    {
        case 1:
            shapeFileName = [NSString stringWithFormat:@"shape%i.png",targetShape1];
            shapeNumber = targetShape1;
            break;
        case 2:
            shapeFileName = [NSString stringWithFormat:@"shape%i.png",targetShape2];
            shapeNumber = targetShape2;
            break;
        case 3:
            shapeFileName = [NSString stringWithFormat:@"shape%i.png",targetShape3];
            shapeNumber = targetShape3;
            break;
        case 4:
            shapeFileName = [NSString stringWithFormat:@"shape%i.png",targetShape4];
            shapeNumber = targetShape4;
            break;
        default:
            break;
    }
    newShape = [[Shapes alloc] initWithGame:self andFile:shapeFileName andNumber:shapeNumber andZ:10];
    [targetShapeArray addObject:newShape];
    [newShape release];
}
} 
```

现在我要做的是更改 targetshapearray 中每个形状对象的 shapeID 和 mySprite。我可以改变 shapeID，但我一辈子都无法改变 mySprite 图像，这会改变它在我的游戏中的外观。我不断收到 EXC_BAD_ACCESS 错误。任何帮助，将不胜感激

```
-(void)createNewTargetShapes
{
//fills 4 variables with random numbers between 1 and 25
targetShape1 = (arc4random() % 25) +1;
targetShape2 = (arc4random() % 25) +1;
targetShape3 = (arc4random() % 25) +1;
targetShape4 = (arc4random() % 25) +1;

for (int x=0; x<4; x++)
{
    Shapes * n = (Shapes *) [targetShapeArray objectAtIndex:x];
    switch (x)
        {
            case 0:
                n.shapeID = targetShape1;
                shapeFileName = [NSString stringWithFormat:@"shape%i.png",targetShape1];
                n.mySprite = [CCSprite spriteWithFile:shapeFileName];
                break;
            case 1:
                n.shapeID = targetShape2;
                shapeFileName = [NSString stringWithFormat:@"shape%i.png",targetShape2];
                n.mySprite = [CCSprite spriteWithFile:shapeFileName];
                break;
            case 2:
                n.shapeID = targetShape3;
                shapeFileName = [NSString stringWithFormat:@"shape%i.png",targetShape3];
                n.mySprite = [CCSprite spriteWithFile:shapeFileName];
                break;
            case 3:
                n.shapeID = targetShape4;
                shapeFileName = [NSString stringWithFormat:@"shape%i.png",targetShape4];
                n.mySprite = [CCSprite spriteWithFile:shapeFileName];
                break;
            default:
                break;
        }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:12:56.947

要更改 CCSprites 图像，您必须更改其纹理。以下是如何执行此操作的示例代码块：

```
CCTexture2D* tex = [[CCTextureCache sharedTextureCache] addImage:@"spriteimagefile.png"];
[sprite setTexture: tex]; 
```

这会将精灵图像更改为“spriteimagefile.png”。

使用上面的代码代替

```
n.mySprite = [CCSprite spriteWithFile:shapeFileName]; 
```

我希望这就是你要找的！

# android - 在应用发明者应用中添加新列表

> ID：12549447
> 
> 赞同：1
> 
> 时间：2012-09-23T03:17:25.657
> 
> 标签：android, list, app-inventor

我在 App Inventor 和列表中有点尴尬。我曾希望为用户输入的值生成一个列表。例如 - 用户输入书名、出版年份、作者和 ISBN 的文本框。我想创建一个以 ISBN 作为列表编号的列表。

这有多可行/实用？

将项目 x、y、z 添加到（以前不存在的）ISBN 列表不起作用。

我目前正在尝试使用按顺序填充的空列表 List1、List2 等，但这并不理想。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T13:43:37.490

这是非常可行/实用的。您必须使用 2 个列表：存储您的 ISBN 的 listISBN 和另一个列表，我们称之为 listDetails 存储详细数据的子列表。

要保存数据，请使用两个[添加项来列出](http://appinventor.mit.edu/explore/content/list-blocks.html#add%20items%20to%20list)块，请参见屏幕截图：![截屏](../Images/1217b4921c7860e18c9c20b2f954da03.png)

要从列表中选择项目，请使用相同的列表索引和[选择列表项](http://appinventor.mit.edu/explore/content/list-blocks.html#select%20list%20item)块。![截屏](../Images/0ff1d5958762992b90fb1318387b9728.png)

有关列表的更多信息，请参见[此处的](https://sites.google.com/site/blocks123/lists)[第 19 章](https://sites.google.com/site/appinventor/projects)

# java - 如何从给定列表中随机生成？

> ID：12549448
> 
> 赞同：2
> 
> 时间：2012-09-23T03:17:30.087
> 
> 标签：java, arrays, random, arraylist

我遇到的问题是从特定列表中随机生成名称。我希望我的程序只能从以下名称中进行选择：*Bob、Jill、Tom*和*Brandon*。我尝试学习数组，但我认为这对我来说有点太远了。到目前为止，我想我有一个大致的想法，但我不确定。

```
import java.util.Random;

public class NameGenerator
{

        public static void main(String[] args)
        {

           System.out.println("This is a program that generates random names from a list!");

           int Bob = 0;
           int Jill = 0;
           int Tom = 0;
           int Brandon = 0;
           Random r = new Random(); 
```

在那之后，我有点纠结于如何让发电机运转起来。

更新：好吧，我接受了您的建议并尝试学习数组。到目前为止，这就是我所拥有的。

```
ArrayList<String> names = new ArrayList<String>();
names.add("Bob");
names.add("Jill");
names.add("Tom");
names.add("Brandon");

char index = randomGenerator.nextChar(names.size());
String anynames = names.get(index);
System.out.println("Your random name is" + anynames + "now!"); 
```

但是现在它说 randomGenerator 无法解析，并且 void 方法无法返回值。关于我哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-16T19:55:21.187

```
import java.util.*; 

public class characters 
{
    public static void main(String[] args)
    {
       Random generate = new Random();
       String[] name = {"John", "Marcus", "Susan", "Henry"};

       System.out.println("Customer: " + name[generate.nextInt(4)]);      

    }
} 
```

看看有多容易？我给了 4 个简单的名字，可以用单词等代替。代码中的“4”代表String中名字的个数。这很简单。对于那些想要更短的人（我所做的只是减少间距）：

```
import java.util.*; 
public class characters{ 
public static void main(String[] args){
Random generate = new Random(); 
String[] name = {"John", "Marcus", "Susan", "Henry"};
System.out.println("Customer: " + name[generate.nextInt(4)]); }} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T07:08:17.440

您可以打乱`ArrayList`并获取第一个元素，或者迭代并以不同的顺序获取所有元素。

```
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

public class NameGenerator {
    public static void main(String[] args) {
        String[] peoples = {"Bob","Jill","Tom","Brandon"};
        List<String> names = Arrays.asList(peoples);
        Collections.shuffle(names);
        for (String name : names) {
            System.out.print(name + " ");
        }
    }
} 
```

否则，您可以每次创建一个随机数并采用不同的名称。

```
 int index = new Random().nextInt(names.size());
        String anynames = names.get(index);
        System.out.println("Your random name is" + anynames + "now!"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T07:21:39.350

你可以用更少的行来表达它：

```
String[] names = {"Bob", "Jill", "Tom", "Brandon"};
int index = Math.random() * names.length;
String name = names[index];
System.out.println("Your random name is" + name + "now!"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-20T03:09:05.130

```
import java.util.*;
import java.io.*;

public class Main {
  public static void main(String[] args) throws Exception {

    // To generate random information
    Random random = new Random(); // necessary for this project

    // To get the names and surnames .txt files in local directory
    Scanner male = new Scanner(
        new File("/storage/emulated/0/Download/male.txt")); // male names .txt

    Scanner female = new Scanner(
        new File("/storage/emulated/0/Download/female.txt")); // female names .txt

    Scanner surname = new Scanner(
        new File("/storage/emulated/0/Download/surnames.txt")); // surname lists .txt

    // Each name and surname will be stored here for easier use
    LinkedList<String> maleNames = new LinkedList<String>(); // male names
    LinkedList<String> femaleNames = new LinkedList<String>(); // female names
    LinkedList<String> surnameLists = new LinkedList<String>(); // surname lists

    // Loops are used to automatically store each name and surname into the list
    while (male.hasNext()) {
        maleNames.add(male.next()); // auto store each male name into the list
    }
    while (female.hasNext()) {
        femaleNames.add(female.next()); // auto store each female name into the list
    }
    while (surname.hasNext()) {
        surnameLists.add(surname.next()); // auto store each surname into the list
    }

    // Sorting Elements is optional
    surnameLists.sort(Comparator.naturalOrder()); // optional
    femaleNames.sort(Comparator.naturalOrder()); // optional
    maleNames.sort(Comparator.naturalOrder()); // optional

    // Closing these objects is necessary
    surname.close(); // necessary
    female.close(); // necessary
    male.close(); // necessary

    // For loop is used to generate multiple information
    for (int index = 0; index < 10000; index++) { // optional

        String firstName = "", lastName = "", completeName = "", gender = ""; // temporary storage

        byte age = (byte)(random.nextInt(99 - 18 + 1) + 18); // generates random age between 18 to 99 years old

        // If boolean value is true, it is male
        if (random.nextBoolean()) {
            firstName += maleNames.get(random.nextInt(maleNames.size())); // generates random name
            lastName += surnameLists.get(random.nextInt(surnameLists.size())); // generates random surname

            firstName = (firstName.substring(0, 1).toUpperCase() + firstName.substring(1)); // uppercase first letter
            lastName = (lastName.substring(0, 1).toUpperCase() + lastName.substring(1)); // uppercase first letter

            completeName = firstName + " " + lastName; // creates a complete name
            gender = "Male"; // sets the gender into male

            // Otherwise, it is female
        } else {
            firstName += femaleNames.get(random.nextInt(femaleNames.size())); // generates random name
            lastName += surnameLists.get(random.nextInt(surnameLists.size())); // generates random surname

            firstName = (firstName.substring(0, 1).toUpperCase() + firstName.substring(1)); // uppercase first letter
            lastName = (lastName.substring(0, 1).toUpperCase() + lastName.substring(1)); // uppercase first letter

            completeName = firstName + " " + lastName; // creates a complete name
            gender = "Female"; // sets the gender into female
        }

        // Finally, printing out the results
        System.out.printf("Name: %s%nAge:  %d%nSex:  %s%n%n", completeName, age, gender);
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-19T15:15:30.567

```
public static void main(String[] args) {
    String[] peoples = {"Bob", "Jill", "Tom", "Brandon"};
    List<String> names = Arrays.asList(peoples);
    int index = new Random().nextInt(names.size());
    String name = names.get(index);
    System.out.print(name+ " "); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T03:28:28.687

一个小提示 -`Random r = new Random`创建了一个新的“随机”实例。由于您使用的是 Eclipse，因此您将拥有 AutoComplete。声明 Random "r" 的实例后，如果使用，`r.<somemethod>`您可能会发现一些有用的东西。

此外，如果您将“名称”存储在一个数组中，您可以以一种相当简单的方式访问它们。我会让你弄清楚其余的。

良好的编码:)

# css - 如何使子 div 在 HTML 中填充其父 div 的所有剩余水平空间？

> ID：12549449
> 
> 赞同：1
> 
> 时间：2012-09-23T03:18:25.930
> 
> 标签：css, html

[测试 http://o7.no/U5w2EV](http://o7.no/U5w2EV)

这个结构是：

```
<div id='container'>
    <div id='play'>▶&lt;/div>
    <div id='res'>RES</div>
    <div id='bar'>test</div>
    <div id='time'>0</div>
</div> 
```

样式是：

对于#container

```
 #container
{backgroundColor:'#CCCCCC',
position:'absolute',
bottom:'-40px',
width:'100%',
height:'40px'} 
```

对于按钮 #res 和 #bar

```
#res , #bar
 {width:30px; 
 height:30px; 
 border:1px solid #DDDDDD; 
 margin:5px; 
 font-weight:bold; 
 cursor:pointer; 
 float:left} 
```

#时间

```
#time
 {float:'left',fontSize:'16px',margin:'12px 5px'} 
```

注意：容器的容器宽度（占 100% 的位置）会发生动态变化。

如何将CSS设置为#bar div填充其他div剩余的所有空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:32:30.647

您在上面发布了不完整的代码。它的格式也不正确（css）。

但是我“认为”如果您删除 inner 上的 css float`<div>`并改为让它们`display: inline-block;`，您应该能够`width:`在 inner 上声明 CSS 百分比`<div>`并让它们填充您的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:47:09.127

`<div>`您可以在底部添加另一个`<div id='time'>`并设置样式`clear:both`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T18:46:21.857

我无法以令人满意的方式使用 CSS 来做到这一点，所以我添加了一个 JavaScript 来监听调整大小的尝试，这将在数学上保持正确的大小。

# vim - Vim 中的拼写检查 - 告诉 Vim 这没问题

> ID：12549451
> 
> 赞同：0
> 
> 时间：2012-09-23T03:18:39.463
> 
> 标签：vim

*是的，这个标题是我能想到的最好的:-)*

我有一个文本，当激活拼写检查时，很多单词自然会突出显示。像电子邮件、地址、姓名等。如何告诉 Vim 某个单词没问题，而不将其添加到单词表中。

意思是，只是在编辑此文档时，我不想看到我的名字被突出显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:14:59.450

尝试：`zG`

```
:help internal-wordlist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T04:04:25.043

我在 git 存储库中有我的 Vim 配置，这对几件事很有用；例如，您可以将您的别名`vim`命名为正常调用 Vim 的小脚本，但在 Vim 完成后检查`~/.vim/spell`目录是否有任何修改，如果有，询问您是否要保留或丢弃它们。如果您想保留它们，它可以自动提交所有内容`spell`，否则会重置其中的所有内容。因此，除非您确实使用拼写检查器，否则您通常不会被该脚本打扰。

唯一的缺点是您不能在一个会话中同时对字典进行持久性和易失性添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:32:41.653

来自[http://vimdoc.sourceforge.net/htmldoc/spell.html](http://vimdoc.sourceforge.net/htmldoc/spell.html)

zg 将光标下的单词作为好词添加到“spellfile”中的名字。计数可以在命令之前指示要使用的 'spellfile' 中的条目。计数二使用第二个条目。

```
 In Visual mode the selected characters are added as a
        word (including white space!).
        When the cursor is on text that is marked as badly
        spelled then the marked text is used.
        Otherwise the word under the cursor, separated by
        non-word characters, is used.

        If the word is explicitly marked as bad word in
        another spell file the result is unpredictable. 
```

# php - 有什么缺陷，上传文件时一定要注意

> ID：12549454
> 
> 赞同：0
> 
> 时间：2012-09-23T03:19:55.203
> 
> 标签：php, html, linux, file-upload, upload

我有一台Linux服务器，我的网站上有一个上传图片，注册的用户可以上传他的图片，当他登录到他的个人资料时，他可以看到他的图片，也可以得到他的图片的url链接，所以图片上传到服务器的 WWW/img 目录我正在检查 php 文件的扩展名，只允许 (.png ,.gif,.jpg) 文件

但是我不知道为什么有人上传了一张 gif 图像并删除了我所有的文件，我得到了用户上传的图像，因为我们有 RAID，图像的内容类似于......

```
function vUMmFr($MkUOmK){$MkUOmK=gzinflate(base64_decode($MkUOmK));for($i=0;$i<strlen($MkUOmK);$i++){$MkUOmK[$i]=chr(ord($MkUOmK[$i])-1)}return $MkUOmK}eval(vUMmFr("7b1pe+M2sij8ved55j............ 
```

> **这是什么，这是怎么发生的，所有的文件是怎么被删除的？这是什么语言，我怎样才能保护文件不被删除..**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T03:25:45.233

您可能有一个写得很糟糕的文件上传处理程序，它盲目地信任用户提供的内容，将具有原始用户提供的文件名的文件放入您的 webroot 中可公开访问的目录中。**简而言之，您的文件上传脚本相当于一个闪烁着“HACK ME！”**的大霓虹灯。.

例如，像这样：

```
<?php

if ($_FILES['file']['type'] == 'image/gif') {
    move_uploaded_files($_FILES['file']['tmp_name'], '/some/path/in/your/docroot/' . $_FILES['file']['name']);
} 
```

这里有问题：

1.  不检查错误 - 文件上传可能由于多种原因而失败，不检查错误是一件非常糟糕的事情
2.  该`['type']`字段是用户提供的数据 - 恶意用户可以轻松伪造该 mime 类型。他们可以很容易地上传“somescript.php”，但将其标记为图像。
3.  盲目地使用`['name']`参数作为您存储文件的路径的一部分。同样，这是在用户的控制之下。一名恶意用户和您的服务器将自己冲下马桶。
4.  将文件存储在 docroot 中。因此，现在您允许上传具有任何名称的任何类型的任何文件。如果它是一个脚本，并且文件的位置可以通过 URL 访问，那么您现在允许远程用户在您的服务器上执行他们想要的任何代码。

简而言之，在处理文件上传时，您将文件视为距离爆炸 0.001 秒的准备爆炸的核弹。您不使用原始文件名存储它。您不会将其存储在用户可以获取的任何地方。您不使用可预测的文件名存储它。您对文件进行服务器端验证。你掀起文件的裙子，看看引擎盖下的内容，以确保它是它应该是的......即使那样你仍然认为它在撒谎。

# java - 多级泛型类型中的 Java 通配符

> ID：12549458
> 
> 赞同：7
> 
> 时间：2012-09-23T03:20:54.047
> 
> 标签：java, generics, wildcard

为什么`Bar.go`是`OK`with argument`f2`而不是 with argument `f1`？

```
public class HelloWorld {
    public static void main(String[] args) {
        Foo<Foo<?>> f1 = new Foo<Foo<?>>();
        Foo<Foo<String>> f2 = new Foo<Foo<String>>();
        Bar.go(f1);     // not OK
        Bar.go(f2);     // OK
    }

    public static void p(Object o) {
        System.out.println(o);
    }
}

class Foo<E> {
}

class Bar {
    public static <T> void go(Foo<Foo<T>> f) {
    }
} 
```

编译器不应该在这两种情况下自动推断类型`T`吗`capture of ?`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:39:46.770

```
Foo<Foo<?>> f1 = new Foo<Foo<?>>(); 
```

这意味着类型是未知的，并且可以将任何类型的对象添加到`Foo<Foo<?>>`异构的对象中，并且编译器不能保证其中的所有对象`Foo<Foo<?>>`都是相同类型的。因此，它不能传递`Bar.go`给以有界类型作为参数的对象。

您可以改为将其声明为`Foo<Foo<Object>> f1 = new Foo<Foo<Object>>();`将其传递到`Bar.go`您明确提及所有内容的地方都是 type `Object`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T05:12:52.587

好问题！

`E`（在下面的注释中，在like中定义一个泛型类`Foo< E >`，将“协变方法”定义为返回`E`不带任何参数 using的方法`E`，而将“逆变方法”定义为相反：接受类型的形式参数`E`但不'不返回涉及的类型`E`。[这些术语的真正定义更复杂，但暂时不要介意。]）

在 的情况下，编译器`T`似乎正在尝试绑定，因为如果您这样做`Object``f1`

```
class Bar0 {
    public static < T > void go( Foo< Foo< ? extends T > > f ) {
        // can pass a Foo< T > to a contravariant method of f;
        // can use any result r of any covariant method of f,
        // but can't pass T to any contravariant method of r
    }
} 
```

然后`go(f1)`工作，但现在`go(f2)`没有，因为即使`Foo< String > <: Foo< ? extends String >`，这并不意味着`Foo< Foo< String > > <: Foo< Foo< ? extends String > >`。

以下是一些针对`f1`和编译的修改`f2`：

```
class Bar1 {
    public static < T > void go( Foo< ? super Foo< T > > f ) {
        // can't properly type the results of any covariant method of f,
        // but we can pass a Foo< T > to any contravariant method of f
    }
}

class Bar2 {
    public static < T > void go( Foo< ? extends Foo< ? extends T > > f ) {
        // can't pass a Foo< T > to a contravariant method of f;
        // can use result r of any covariant method of f;
        // can't pass a T to a contravariant method of r;
        // can use result of covariant method of r
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:45:25.820

不错的阅读[多级通配符是什么意思？](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeArguments.html#What%20do%20multilevel%20wildcards%20mean?)

例子：

```
Collection< Pair<String,Long> >        c1 = new ArrayList<Pair<String,Long>>();

Collection< Pair<String,Long> >        c2 = c1;  // fine
Collection< Pair<String,?> >           c3 = c1;  // error
Collection< ? extends Pair<String,?> > c4 = c1; // fine 
```

当然，我们可以将 a 分配`Collection<Pair<String,Long>>`给 a `Collection<Pair<String,Long>>`。这里没有什么令人惊讶的。

但是我们不能将 a 分配`Collection<Pair<String,Long>>`给 a `Collection<Pair<String,?>>`。参数化类型`Collection<Pair<String,Long>>`是 String 和 Long 对的同质集合；参数化类型`Collection<Pair<String,?>>`是字符串对和未知类型的异构集合。例如，异构`Collection<Pair<String,?>>`可以包含 a`Pair<String,Date>`并且显然不属于 a `Collection<Pair<String,Long>>`。因此，不允许分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T06:29:27.167

我将证明如果编译器允许`Bar.go(f1);`，类型系统（安全）将被破坏：

Java 语法允许您`T`用作类型来在`go()`. 类似的东西：`T t = <something>`。

现在，让我们使用，`ArrayList`而不是`Foo`

然后我们有：

```
class HW {
 public static void main(String[] args) {
        ArrayList<ArrayList<?>> f1 = new ArrayList<ArrayList<?>>();
        go(f1);     // not OK
    }

    public static <T> void go(ArrayList<ArrayList<T>> f) {
    }
} 
```

`ArrayList<?>`是 的超类型`ArrayList<String>`，它也是 的超类型`ArrayList<Integer>`，这意味着您可以在 中执行以下操作`main`：

```
ArrayList<?> s = new ArrayList<String>();
f1.add(s);

ArrayList<?> i = new ArrayList<Integer>();
f1.add(i); 
```

现在，让我们假设编译器允许您调用`go()`with`f1`作为参数。推断的选项`T`是：

1.  `T = Object`，但`ArrayList<ArrayList<Object>>`不是`ArrayList<ArrayList<?>>`因为`ArrayList<Object>`与`ArrayList<?>` So that is not allowed 选项的类型不同。

2.  `T = ?`，那么我们就可以做到：

    ```
    public static <T> void go(ArrayList<ArrayList<T>> f) {
         ArrayList<T> alt1 = f.get(0); // ArrayList<String>
         T str = alt1.get(0);
         ArrayList<T> alt2 = f.get(1); // ArrayList<Integer>
         alt2.add(str); // We have added String to List<Integer>
        // ... type system broken
    } 
    ```

`go()`要在这两种情况下工作，您必须这样做：

```
public static void go(ArrayList<? extends ArrayList<?>> f) {
} 
```

# oracle - 使用 pl/sql 更新序列

> ID：12549460
> 
> 赞同：2
> 
> 时间：2012-09-23T03:21:22.897
> 
> 标签：oracle

在种子数据填充我们的表后，我们有一个 sql 脚本来更新一组序列。下面的代码不起作用：

```
declare
cursor c1 is 
    select
      'select nvl(max(id),0) from '||uc.table_name sql_text,
      uc.table_name||'_SEQ' sequence_name 
    from
      user_constraints uc,
      user_cons_columns ucc
    where uc.constraint_type='P'
      and ucc.constraint_name = uc.constraint_name
      and ucc.column_name='ID'
      and uc.owner='ME';

alter_sequence_text varchar2(1024);
TYPE generic_cursor_type IS REF CURSOR;
max_id number;
c2 generic_cursor_type;
begin
for r1 in c1 loop
    open c2 for r1.sql_text;
    fetch c2 into max_id;
    close c2;

    if( max_id != 0 ) then
        dbms_output.put_line( 'seq name = '||r1.sequence_name );
        execute immediate 'alter sequence '||r1.sequence_name||' increment by '||to_char(max_id);
        dbms_output.put_line( 'max_id = '||to_char(max_id) );
        execute immediate 'select '||r1.sequence_name||'.nextval from dual';
        dbms_output.put_line( 'sequence value = '||to_char(next_id) );
        execute immediate 'alter sequence '||r1.sequence_name||' increment by 1';
        dbms_output.put_line( 'sequence: '||r1.sequence_name||' is at '||to_char(max_id+1) );
    end if;
end loop;
end; 
```

搜索后，我找到了一个说明我需要更改行的参考：

```
execute immediate 'select '||r1.sequence_name||'.nextval from dual' 
```

并添加'到 next_id;' （当然适当地声明 next_id ）所以结果将是：

```
execute immediate 'select '||r1.sequence_name||'.nextval from dual into next_id; 
```

我一般只简单地处理了 pl/sql 和 sql，并且很想知道为什么要使脚本正常工作需要进行此更改。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:18:01.813

当您使用`select`内部`PL/SQL`块时，您必须将该选择语句返回的数据放在某处。因此，您必须声明一个适当数据类型的变量并使用`select into`子句将数据选择返回到该变量中，即使`select`语句是按`execute immediate`语句执行的。

例子

```
declare
  x number;
begin
  select count(*)
    into x
    from all_objects;
end;

declare
  x number;
begin
  execute immediate 'select count(*)from all_objects' into x;
end; 
```

所以你的`execute immediate`陈述是

```
execute immediate 'select '||sequence_name||'.nextval from dual' into newseqval; 
```

如果您使用 Oracle 11g 以后的版本，您可以将序列的值直接分配给变量，不需要 using`select into`子句。

```
 declare
   x number;
 begin
   x := Sequence_Name.nextval;
 end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T06:42:47.573

select seq_name.nextval from dual 意味着隐式游标的创建，并且游标的结果应该在某处获取，因此您需要将其获取到任何外部声明的绑定变量中。

# php - 如何从 2 个表中联合

> ID：12549462
> 
> 赞同：0
> 
> 时间：2012-09-23T03:21:33.753
> 
> 标签：php, mysql

我有 2 张桌子：

```
`tb_a` :         `tb_b`

========         ========
|id|key|         |id|key|
========         ========
| 1|  A|         | 1|  D|
| 2|  B|         | 2|  E|
| 3|  C|         | 3|  F|
| 4|  B|         | 4|  B|
========         | 5|  A|
                 | 6|  G|
                 ======== 
```

我想`key`从`tb_a`和联合起来`tb_b`。所以结果必须是 = ABCDEFG。

我尝试过的代码是：

```
SELECT id, key
  FROM tb_a
UNION ALL 
SELECT id, key
  FROM tb_b
ORDER BY id 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:56:17.570

不要`id`在查询输出中使用字段，因为它会阻止将输出分组`key`。也不要使用`UNION ALL`，`UNION`而是使用：

```
SELECT  `key` 
FROM tb_a
UNION 
SELECT  `key` 
FROM tb_b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:59:15.873

```
SELECT DISTINCT `key` FROM (
  SELECT key FROM tb_a
  UNION
  SELECT key FROM tb_b
) AS t ORDER BY `key` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:25:50.067

你需要`CONCAT`像这样在你的 sql 查询中使用：

```
SELECT tb_a.id, tb_b.id, CONCAT(tb_a.key,tb_b.key) as Combined_key
FROM tb_a, tb_b
ORDER BY tb_a.id, tb_b.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T03:29:07.753

如果您遇到的问题是重复值，那是因为 UNION ALL。单独使用 UNION。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T03:37:35.143

连接不直接映射到集合论的基本加法运算（并、交、差），它通过简单地包含或排除其他集合的元素来创建新集合。有一些方法可以在 SQL 中获得这些，但它涉及链接 UNION 和 MINUS 语句。

相反，连接是映射操作，它根据一组规则从每个集合中获取一个元素，并将它们集中在一个新元素中，新集合实际上本身就是一个包含原始两个元素的小集合其他集合中的元素。

```
SELECT column_name(s) FROM table_name1
UNION
SELECT column_name(s) FROM table_name2 
```

**请注意**，UNION 中的每个 SELECT 语句必须具有相同数量的列。这些列还必须具有相似的数据类型。此外，每个 SELECT 语句中的列的顺序必须相同。

**注意**：默认情况下，UNION 运算符仅选择不同的值。要允许重复值，请使用 UNION ALL。

```
SELECT column_name(s) FROM table_name1
UNION ALL
SELECT column_name(s) FROM table_name2 
```

**好读**

[SQL 连接的可视化解释 - 编码恐怖](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T03:43:28.413

```
SELECT GROUP_CONCAT(`key` ORDER BY `key` SEPARATOR '') AS 'key'
FROM (
    SELECT `key` FROM tb_a
    UNION
    SELECT `key` FROM tb_b
) a
GROUP BY NULL 
```

**编辑：**我的错。这里：

```
SELECT * FROM (
    SELECT `id`,`key` FROM tb_a
    UNION
    SELECT `id`,`key` FROM tb_b
) tb_ab
GROUP BY `key`
ORDER BY `key` 
```

虽然，您的答案尚不清楚应根据哪个标准`id`来确定。

# html - 浮动div内的margin-top和margin-bottom不起作用

> ID：12549465
> 
> 赞同：1
> 
> 时间：2012-09-23T03:22:02.637
> 
> 标签：html, css, margin

对于浮动 div 内的某些元素，我的 margin-top 和 margin-bottom 有问题。

这是一个向右浮动的列 div（我还有 2 个其他向左浮动的列 div）

在这里演示：http: [//jsfiddle.net/zTb3g/](http://jsfiddle.net/zTb3g/)

我需要“浮动”来调整页面中的列，但边距顶部和边距底部在某些元素（例如：b、标签、a）中不起作用，但它对于其他元素（例如：p，输入）。

我在标记的不同位置尝试了很多清除样式。希望有人可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:29:30.503

您必须为元素设置 display:block 。除此之外，当您将两个元素一个接一个放置时，它们的边距将重叠。您可以考虑改为设置它们的填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T17:49:04.037

看到这个我认为这就是你想要的[http://jsfiddle.net/afshinprofe/zTb3g/1/](http://jsfiddle.net/afshinprofe/zTb3g/1/)

# node.js - heroku 支持 Express 3.0 吗？

> ID：12549467
> 
> 赞同：2
> 
> 时间：2012-09-23T03:22:45.437
> 
> 标签：node.js, heroku, express

我正在尝试将 node.js 应用程序部署到 heroku，但出现错误：

```
Installing dependencies with npm
       npm ERR! Error: No compatible version found: express@'>=3.0.0' 
```

从 Cloud9 部署时。heroku 支持 express 3.0 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T03:33:13.573

您可能尚未指定您的应用程序支持的 Nodejs 版本。

[https://devcenter.heroku.com/articles/nodejs-versions](https://devcenter.heroku.com/articles/nodejs-versions)

默认情况下，它使用 Node 0.4.7，这不适用于 express 3.x。我认为您至少需要 Node >= 0.5.0。

# html - Songza 在浏览其网站时使用什么技术来播放连续音频？

> ID：12549468
> 
> 赞同：3
> 
> 时间：2012-09-23T03:22:56.047
> 
> 标签：html, audio, audio-streaming

当我使用 Songza 时，我可以浏览网站并且音频会继续播放。他们使用什么技术来实现这一点。潘多拉也这样做。他们都更改了完整的 URL。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T03:36:46.750

没有使用过 Songza，但从我对 Pandora 的了解来看，他们实际上并没有改变网站，它都（或多或少）在一页上。

[使用jQuerys load() function 之](http://api.jquery.com/load/)类的东西更改内容。

url 也通过 javascript 更改，使用[pushState等方法](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#Adding_and_modifying_history_entries)

# c# - 如何获取 ObservableCollection 中特定索引处的元素

> ID：12549469
> 
> 赞同：0
> 
> 时间：2012-09-23T03:22:56.163
> 
> 标签：c#, windows-phone-7, observablecollection

我正在尝试制作一个选项卡式浏览器代码示例，但我无法正确实现解决方案。我创建了一个自定义类`BrowserItem`，它有两个值，我的自定义 Web 浏览器和一个 url 字符串。然后，我创建了一个 BrowserItem 类型的 ObservableCollection，在其中我在单击事件时将新项目添加到 ObservableCollection。但是，由于某种原因，当我`ShowTab`在 MainPage 中调用我的方法以显示用户选择的 Web 浏览器实例（从由 ObservableCollection 填充的 ListBox 中）时，我得到了一个 ArgumentOutOfRange 异常。为了说明，我到目前为止的内容如下：

浏览器项.cs

```
public FullWebBrowser browser
    {
        get;
        set;
    }

    public string url
    {
        get;
        set;
    } 
```

设置.cs

```
public static Setting<ObservableCollection<BrowserItem>> Browsers = new Setting<ObservableCollection<BrowserItem>>("Browsers", new ObservableCollection<BrowserItem>()); 
```

上面的 Setting 类从隔离存储中保存并获取 ObservableCollection。

MainPage.xaml.cs

```
private void ShowTab(int index) 
    {
        this.currentIndex = index;
        //Settings.Browsers.Value.ElementAt(currentIndex);  //ArgumentOutOfRange exception
        int count = Settings.Browsers.Value.Count;

        if (count <= 0)
        {                
            FullWebBrowser browser = new FullWebBrowser();
            browser.InitialUri = "http://www.bing.com";

            BrowserItem Browser = new BrowserItem();
            Browser.browser = browser;
            Browser.url = browser.InitialUri;
            Settings.Browsers.Value.Add(Browser);
            BrowserHost.Children.Add(Browser.browser);
        }

        //SearchBar.Text = Settings.Browsers.Value.ElementAt(currentIndex).url ?? "";

        if (Settings.Browsers.Value.ElementAt(currentIndex) == null)  //ArgumentOutOfRangeException
        {
            FullWebBrowser browser = new FullWebBrowser();
            browser.InitialUri = "http://www.bing.com";

            BrowserItem Browser = new BrowserItem();
            Browser.browser = browser;
            Browser.url = browser.InitialUri;
            Settings.Browsers.Value.Add(Browser);
            BrowserHost.Children.Add(Browser.browser);
        }

        for (int i = 0; i < Settings.Browsers.Value.Count; i++)
        {
            if (Settings.Browsers.Value.ElementAt(i) != null)
            {
                Settings.Browsers.Value.ElementAt(i).browser.Visibility = i == this.currentIndex ? Visibility.Visible : Visibility.Collapsed;
            }
        }
    } 
```

ArgumentOutOfRangeException 首先出现`Settings.Browsers.Value.ElementAt(currentIndex);`在`ShowTab`方法中，其他任何地方都包含相同的语句。我只想在 MainPage 的 ObservableCollection 中显示相应索引值的 webbrowser。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:20:42.597

您需要从某个地方以某种方式将项目添加到集合中。应该有一些代码，如

```
 Settings.Browsers.Value.Add(browserItemInstanceHere); 
```

或者

```
 Settings.Browsers.Value = getSomeBrowserCollections(); 
```

您无法从空集合中获取项目，并且您的索引不得大于`Count-1`

# directx - 在 Visual Studio 2012 中使用 DirectX Effect11

> ID：12549472
> 
> 赞同：3
> 
> 时间：2012-09-23T03:23:14.520
> 
> 标签：directx, visual-studio-2012

我最近更新到 Visual Studio 2012 Ultimate。我以前使用 DirectX 2010 年 6 月 11 日 SDK 进行编程，并希望继续使用 Visual Studio 2012 进行编程。但是，我发现 VS2012 带有自己的 DirectX SDK（在 Windows Kit 8.0 中）并且我一直在尝试迁移我的代码使用较新版本的 d3d11。一切都很顺利，直到我尝试在我的项目中使用效果文件（.fx 文件）。我必须使用 VS2012 在 DirectX SDK 中编译 Effects11 示例，并在我的项目中链接 lib 文件。那也很顺利。但是，当我编译我的项目时，该函数`D3DX11CreateEffectFromMemory`返回一个`E_NOINTERFACE error (no such interface is supported)`. 谁能告诉我这是为什么？请注意，我使用的是 Windows Kit 中的 d3d11.lib 和`d3dx11.lib`来自 DirectX SDK。也许我不应该混合它们？但是，当我混合它们时，其他一切都正常，除了效果文件创建。

任何帮助，将不胜感激。

PS我不知道这是否有帮助，但你知道，如果我在项目设置中添加一个额外的库目录，`"DirectXSDKInstallPath\lib\x86\"`它就可以工作。这是为什么？这是否意味着我正在使用旧版本的库？这将给出大量关于 winerror.h 中重新定义的标头的警告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T02:26:43.720

Effect11 已经移到[https://fx11.codeplex.com/](https://fx11.codeplex.com/)了，需要自己编译链接。

DirectXTK 不提供 effect11 接口，只提供简化效果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T20:39:56.080

最新版本的 DirectX 11 (Windows 8) 已弃用 D3DX 库。请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/bb172965(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172965(v=vs.85).aspx)

效果现在以不同的方式处理。您可以编写自己的库来加载效果或使用 DirectX 工具包 (DirectXTK)：[http ://directxtk.codeplex.com/](http://directxtk.codeplex.com/)

Microsoft 已在其网站上推荐此工具包，有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T03:51:03.040

这可能是由 d3d 库冲突引起的。

确保您使用的是什么 d3d 库。因为有 2 个不同的 d3d 库。

一个在 DXSDK_DIR\Lib\x86 或 \x64 中，一个在 c:\program files(x86?)\Microsoft SDKs 中。

如果您使用的是 DXSDK，则在包含目录和库目录字段中分别在 Microsoft SDK 的包含、libs 目录之前传递 $(DXSDK_DIR)Include $(DXSDK_DIR)Lib\x86。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-29T01:58:07.827

在以前版本的 Direct3D 中，一旦您与 D3D10 库链接，效果框架就可以立即使用。在 Direct3D 11 中，效果框架已移至 D3DX 库，您必须包含单独的头文件 (d3dx11Effect.h) 并与单独的库链接（D3DX11Effects.lib 用于发布版本，D3DX11EffectsD.lib 用于调试版本）。

此外，在 Direct3D 11 中，它们为您提供了效果库代码的完整源代码 (DirectX SDK\Samples\C++ \Effects11)。因此，您可以根据自己的需要修改效果框架。在本书中，我们将只使用效果框架，无需修改。为了使用该库，您需要首先在发布和调试模式下构建 Effects11 项目以生成 D3DX11Effects.lib 和 D3DX11EffectsD.lib 文件；除非更新了效果框架，否则您只需要这样做一次（例如，新版本的 DirectX SDK 可能会更新这些文件，因此您可能需要重新构建 .lib 文件以获得最新版本）。d3dx11Effect.h 头文件可以在 DirectX SDK\Samples\C++\Effects11\Inc 中找到。

对于我们的示例项目，我们将 d3dx11Effect.h、D3DX11EffectsD.lib 和 D3DX11Effects.lib 文件放在我们所有项目共享代码的公共目录中（有关示例项目组织的描述，请参见“简介”）。

# ios - 如何使用 curl 发布 JSON 数据并在 RoR 中使用它？

> ID：12549474
> 
> 赞同：2
> 
> 时间：2012-09-23T03:24:01.180
> 
> 标签：ios, ruby-on-rails, json

我正在构建一个 iOS 应用程序，它需要发布到 RoR API。

为了测试 POST，我正在运行以下命令：

```
curl -d @/tmp/data localhost:3000/api/ratings 
```

其中 /tmp/data 包含一个哈希数组：

```
[    {        "uid": "gilt_162929239",        "rate": 1    }   ] 
```

在 Ruby 中，参数看起来像这样：

```
[1] pry(#<Api::PromotionRatingsController>)> params
=> {"    {        \"uid\": \"good_162929239\",        \"rate\": 1    }   "=>nil,
 "format"=>"json",
 "action"=>"create",
 "controller"=>"api/ratings"} 
```

如何让 Rails 为我创建哈希数组以迭代每个？

编辑：我看到我缺少标题。

添加到 curl 命令行：

```
--header "Accept: application/json" --header "Content-type: application/json" 
```

现在，这是我的参数：

```
[1] pry(#<Api::PromotionRatingsController>)> params
=> {"_json"=>[{"uid"=>"good_162929239", "rate"=>1}],
 "format"=>"json",
 "action"=>"create",
 "controller"=>"api/ratings",
 "promotion_rating"=>{"_json"=>[{"uid"=>"good_162929239", "rate"=>1}]}} 
```

还是不对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:41:25.753

据此：[_](http://guides.rubyonrails.org/action_controller_overview.html#json-xml-parameters)

> 如果您在初始化程序中打开了 config.wrap_parameters 或在控制器中调用了 wrap_parameters，则可以安全地省略 JSON/XML 参数中的根元素。默认情况下，参数将根据您的控制器名称克隆并包装在密钥中。

所以，我的猜测是你要么需要包含一个根元素，要么是 set `config.wrap_parameters`。

# perl - Perl 中 '\xa1' 的编码

> ID：12549480
> 
> 赞同：-1
> 
> 时间：2012-09-23T03:25:05.373
> 
> 标签：perl

我想使用 perl 处理一个 txt 文件。我之前已经成功使用这个perl代码来处理wikipedia txt文件，所以是正确的。但是当我运行 perl 代码时，出现了一个错误：

```
utf8 "\xA1" does not map to Unicode at xxx 
```

我检查了txt文件。其中有 \xA1 字符。我试图用 RegEx 删除那些 "\xA1"`s/(\xa1)+//g;`但失败了。

那么问题是什么，我该如何解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:48:56.507

最后，我修改了我的代码。我用

```
binmode( IN,  ':stdio' ); 
```

代替

```
binmode( IN,  ':utf8' ); 
```

它有效。

# sqlite - sqlite：将csv导入表格

> ID：12549481
> 
> 赞同：2
> 
> 时间：2012-09-23T03:25:20.930
> 
> 标签：sqlite, csv, import

我有一个具有以下列结构的表：

```
sqlite> create table stocks(stockticker varchar(4), tradedate date, open double, high double, low double, close double, volume integer, adjclose double); 
```

我想要做的是将一组股票的每日股票数据保存到这个表中，但用当前存在的任何历史数据填充它。所以我将 XLI 的历史数据从 yahoo/finance 保存到一个名为 XLI.csv 的文件中

在 mySQL 中，我曾经能够执行以下操作：

```
sqlite> LOAD DATA INLINE 'XLI.csv'
   ...> INTO TABLE stocks
   ...> FIELDS TERMINATED BY ','
   ...> LINES TERMINATED BY '\n'
   ...> IGNORE 1 LINES
   ...> (@tradedate, open, high, low, close, volume, adjclose)
   ...> SET stockticker = 'XLI',
   ...> tradedate = STR_TO_DATE(@tradedate, '%m/%d/%Y');
Error: near "LOAD": syntax error
sqlite> 
```

现在我了解 SQLITE 有很多不同之处，但我是新手，我发现的所有示例通常具有以下命令结构：

```
sqlite> .import <filename> <table> 
```

这对我没有帮助，因为我还需要设置“stockticker”字段，忽略第一行（标题）并确保正确导入日期。我没有在文档或互联网上找到任何显示我想做的事情的示例。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T03:44:25.983

将原始数据导入临时表，然后将内容选择到刻度表中（添加 where 条件以忽略第一行中的值）

要转换日期字符串，您可以通过重新排列原始日期字符串并将其插入目标日期列来创建有效的[sqlite 日期字符串（例如：yyyy-mm-dd）。](http://www.sqlite.org/lang_datefunc.html)

```
insert into tick (stockticker, tradedate, open, high, low, close, volume, adjclose)
  select stockticker, (substr(date, 7) || '-' || substr(date, 1, 2) || '-' || substr(date, 4, 2)),
  open, high, low, close, volume, adjclose from stage 
```

# facebook - 这个 Facebook 应用程序是如何工作的？

> ID：12549485
> 
> 赞同：-1
> 
> 时间：2012-09-23T03:26:16.270
> 
> 标签：facebook, api, facebook-apps, facebook-comments

我相信你们中的一些人已经看到了这个病毒式的 Facebook 帖子。它的工作原理是你在@[1988:] 之类的评论中输入你的出生年份，它会给你一个名字。我很难弄清楚他们如何能够以编程方式更改用户评论。Facebook API 并没有真正提供有关如何完成此操作的任何文档，我不明白的是它如何在没有任何用户权限的情况下工作？这甚至是一个应用程序还是一些 Facebook 复活节彩蛋？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:05:51.583

他们什么也没做，这也不是 API 的使用；这是 Facebook 在纯文本帖子中标记的标准方法 - 例如，@[4:] 将显示 Mark ZUckerberg 的个人资料图片 - 它也适用于聊天

它适用于“出生年份”，因为最初的几百个用户 ID 大部分都在使用，因为当 Facebook 首次启动时，它会将新的 uid 从 4 个向上递增。

# google-chrome - 如何更改 chrome 浏览器的快捷方式？

> ID：12549487
> 
> 赞同：5
> 
> 时间：2012-09-23T03:26:27.483
> 
> 标签：google-chrome, keyboard-shortcuts

我正在使用 Chrome 开发人员工具。当我工作时，我每次按 F12 打开 chrome 开发者工具。第二个 f12 使它关闭。

我知道它工作正常，但我想改变它。我需要的是更改 Chrome 的快捷键，使其成为我的快捷键。

我如何修改 f12 键。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T03:30:37.583

试试这个，他似乎正在做你需要的。

[https://superuser.com/questions/204770/how-to-change-a-shortcut-on-google-chrome](https://superuser.com/questions/204770/how-to-change-a-shortcut-on-google-chrome)

“有一个可能有用的重新映射快捷方式的扩展：[https](https://chrome.google.com/extensions/detail/mgjjeipcdnnjhgodgjpfkffcejoljijf) ://chrome.google.com/extensions/detail/mgjjeipcdnnjhgodgjpfkffcejoljijf 。虽然还没有尝试过。”

# ios - armv7s 的编译库 - cputype (12) 和 cpusubtype (11)

> ID：12549489
> 
> 赞同：32
> 
> 时间：2012-09-23T03:26:50.543
> 
> 标签：ios, armv7

我是第三方库的开发人员，我想为 armv7s 重新编译我的库，但我似乎有问题。

我将 xcode 更新为 4.5。我更新了项目和相关目标，使其具有有效的`armv7 armv7s`.

但是，当我运行`file`or时`lipo -info`，它会列出

*   i386
*   armv7
*   (cputype (12) cpusubtype (11))

没有armv7s。我错过了什么吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-25T12:59:53.723

使用 XCode 的 lipo：

```
xcrun -sdk iphoneos lipo 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-25T10:06:06.003

显然，`(cputype (12) cpusubtype (11))`是 armv7s 的另一种命名法。

你可以在这里参考更多：[http ://www.galloway.me.uk/2012/09/hacking-up-an-armv7s-library/](http://www.galloway.me.uk/2012/09/hacking-up-an-armv7s-library/)

上面的博客还介绍了一种使某些库 armv7s 构建兼容的方法。上面的描述接近文章的结尾，他解释了`file`命令的输出。

引用其中的一部分：

> 在此标头（称为 Mach-O 标头）内是 CPU 类型和 CPU 子类型的字段。ARM 是 CPU 类型 12，armv7 是 CPU 子类型 9，armv7s 是 CPU 子类型 11。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:37:43.570

lipo 没有 armv7s 的定义，这就是为什么您看不到名称而只能看到 cpu 类型和子类型的原因。所以这个胖二进制文件是可以的，只是我们可能不得不等到苹果更新它的工具，如果我们想手动弄乱新架构（例如，现在没有办法手动将 armv7s slim 二进制文件合并到一个胖二进制文件中）。

# android - 使用 LongClick 侦听器时如何在 Android 中禁用 EditText 框

> ID：12549491
> 
> 赞同：1
> 
> 时间：2012-09-23T03:27:20.837
> 
> 标签：android, android-edittext

我有`EditText`一个可聚焦和`focusableontouch`启用的框，其余的都在 XML 中禁用。我面临的问题是，在长按此文本框时，会弹出 selectAll 和 select 弹出窗口 - 我想禁用它，同时也使用`OnlongClick`Function ..

所以我尝试 使用 XML 并在 java 中使用侦听`android:longClickable="false"`器设置文本框`LongClick`

像这样的东西：`edEmailId.setOnLongClickListener(myOnLongClickListener);`

没用，我仍然收到 selectALL 弹出窗口。XML中的LongClickable和`SetOnlongClicklistener`一样吗？

如果是这样，我如何禁用弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:50:24.667

从 OnLongClickListener 中的 onLongClick() 返回 true 而不是 false。

# java - 跨方法的 Java 变量

> ID：12549492
> 
> 赞同：-2
> 
> 时间：2012-09-23T03:27:25.807
> 
> 标签：java, variables

我正在制作一个基本的文本编辑器，我有 2 种方法，当用户单击“打开”时会触发第一种方法，它会提示用户选择一个文件并很好地打开文件。我只想访问用户单击保存时触发的方法中的变量中的相同文件路径。我的方法是公开的，我试过通过一个类来访问它，仍然没有。请帮忙！代码：

```
public void open(){
    try{
        //Open file
    JFileChooser fc = new JFileChooser();
    fc.showOpenDialog(null);
    File file = fc.getSelectedFile();
    String haha = file.getPath();
    BufferedReader br = new BufferedReader(new FileReader(file.getPath()));
    String line;
    while((line = br.readLine()) != null){
        text.append(line + "\n");
    }

    } catch (FileNotFoundException e){
        e.printStackTrace();
    }catch (IOException e){

    }
}

public void save(){
    try {
        BufferedWriter bw = new BufferedWriter(new FileWriter(file.filePath));

        bw.write(text.getText());

        bw.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:31:50.293

将文件的完整路径存储在一个变量中，并在您想要的地方使用该变量：唯一的条件是您的变量必须是可访问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T03:46:41.077

通常，您会有一个`TextEditor`保存数据的实例。方法`open()`, `display()`,`save()`将出现在 中，`TextEditor`并使用 的状态`TextEditor`（例如文件名）来执行它们的操作。类中的 UI 事件处理程序`Controller`可以访问`TextEditor`作为模型的实例，并在实例上调用适当的操作（如打开、显示、保存等）。

# ember.js - 在 Ember.js 应用程序中使用 jsPlumb

> ID：12549494
> 
> 赞同：2
> 
> 时间：2012-09-23T03:27:56.137
> 
> 标签：ember.js, jsplumb

我正在尝试学习如何在我的[Ember.js应用程序中使用](http://emberjs.com/)[jsPlumb](http://jsplumb.org/jquery/demo.html) ，因此我将一个最小的[jsFiddle](http://jsfiddle.net/arasbm/xZVzQ/6/)放在一起来演示它们如何协同工作。

在这个例子中，到目前为止，我只是插入节点并将它们添加到 jsPlumb。我还没有在它们之间添加任何链接。在这个阶段，节点应该是**可拖动**的，但它们不是。

我在浏览器控制台中遇到的错误：

```
TypeError: myOffset is null 
```

这指向jsPlumb中的这部分代码：

```
for (var i = 0; i < inputs.length; i++) {
    var _el = _getElementObject(inputs[i]), id = _getId(_el);
    p.source = _el;
    _updateOffset({ elId : id });
    var e = _newEndpoint(p);
    _addToList(endpointsByElement, id, e);
    var myOffset = offsets[id], myWH = sizes[id];
    var anchorLoc = e.anchor.compute( { xy : [ myOffset.left, myOffset.top ], wh : myWH, element : e });
    e.paint({ anchorLoc : anchorLoc });
    results.push(e);
} 
```

您可以看到一个没有与 Ember.js 集成的[简单示例按预期工作。](http://jsfiddle.net/arasbm/4XwfZ/)我知道我有这个版本的 jsPlumb 使用 jquery-ui 来克隆元素并支持拖放。[此处的帖子](https://stackoverflow.com/questions/8797632/ember-js-jquery-ui-draggable-clone)显示 Ember 中的 jquery-ui 可拖动功能存在问题。但是，我不确定我是否遇到了同样的问题。如果这与我遇到的问题相同，我将不胜感激有关如何在我的应用程序中实施建议的解决方案的帮助。我对 Ember 和 jsPlumb 都是新手，所以我希望能得到关于这里发生的事情和采取什么路径的明确指导。

我怎样才能使这个例子工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T04:10:34.213

幸运的是，我的怀疑是错误的，问题不在于变形。jsPlumb 和 Ember 一起工作得很好，没有任何黑客攻击。[我在这个 jsFiddle](http://jsfiddle.net/arasbm/xZVzQ/15/)中放了一个小例子，展示了它们如何协同工作。

归功于 Simon Porritt，他在 jsPlumb 用户组帮助我发现了问题。我缺少的是对`jsPlumb.draggable element`. 但是，上述错误在此修复后仍然存在。

上面的特定错误消息是 Ember`didInsertElement`使用未进入 DOM 的元素调用额外时间的结果。我已经报告了这个[问题](https://github.com/emberjs/ember.js/issues/1400)。一种解决方法是在调用 jsPlumb 之前检查元素是否进入 DOM。正如您在 jsFiddle 中看到的那样，我已在`didInsertElement`挂钩中添加了此代码以消除错误。

```
elementId = this.get 'elementId'
element = $("#"+elementId)
if element.size() > 0
  console.log "added element", element
  jsPlumb.addEndpoint element, endpoint
  jsPlumb.draggable element
else
  console.log "bad element" 
```

希望这可以帮助某人。

# google-app-engine - 为什么 Appengine 有时会更改内容类型？

> ID：12549496
> 
> 赞同：0
> 
> 时间：2012-09-23T03:28:53.600
> 
> 标签：google-app-engine

我有一个 JS 应用程序，它设置了一个针对我的 appengine 服务的 iframe URL。返回的页面间歇性地具有“application/json”而不是“text/html”的内容类型。重复调用始终作为“text/html”。

这就是 Chrome 捕获的内容

```
Request URL:http://www.clevernote.co/app/editpopupG.jsp?u=https://docs.google.com/feeds/download/documents/export/Export?id=1mc_hXOOP-PppCn3GebeGREBRDKLSXp2R1R2ij2_ki_A&exportFormat=html&t=google%20integration&i=1mc_hXOOP-PppCn3GebeGREBRDKLSXp2R1R2ij2_ki_A
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:oauth2-token=; JSESSIONID=DHwIAl
Host:www.clevernote.co
Referer:http://www.clevernote.co/app/main.jsp
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.77 Safari/537.1
Query String Parametersview URL encoded
u:https://docs.google.com/feeds/download/documents/export/Export

Response Headersview source
    Cache-Control:no-cache
    Content-Encoding:gzip
    Content-Length:1544
    Content-Type:application/json; charset=UTF-8
    Date:Sun, 23 Sep 2012 02:49:37 GMT
    Server:Google Frontend
    Vary:Accept-Encoding 
```

如果我重新加载页面，则响应正确为“text/html”

内容 ...

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- CSS -->
<link href="../css/cnw  ... etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:23:28.870

尝试在 HTML 文档中设置内容类型：

```
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T17:26:53.007

您可以直接在 servlet 中设置内容类型。

```
public void doGet(HttpServletRequest request, HttpServletResponse response)...{ 

      response.setContentType("text/html; charset=UTF-8");    
      //...        
} 
```

# vb.net - 使工作簿可见

> ID：12549497
> 
> 赞同：3
> 
> 时间：2012-09-23T03:28:54.990
> 
> 标签：vb.net, excel, office-automation

我有以下代码：

```
Dim DumpXlApp As Excel.Application = New Excel.Application
Dim DumpWkBk As Excel.Workbook
DumpWkBk = System.Runtime.InteropServices.Marshal.BindToMoniker(FilePath)
DumpXlApp = DumpWkBk.Parent
DumpXlApp.Visible = True 
```

我无法让 DumpWkBk 工作簿变得可见。是问题`DumpXlApp = DumpWkBk.Parent`线吗？我认为这不是 BindToMoniker 行，因为我可以使用 DumpWkBk 来做事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T13:47:11.710

我已经看到，当在 Excel 中使用 BindToMoniker 时，通常窗口最终会被隐藏。工作簿仍然是打开的并且可供代码访问，只是没有出现在用户界面中。

尝试在您的其他代码之后调用它：

```
DumpXlApp.Windows(DumpWkBk.Name).visible = true 
```

# ruby-on-rails - has_one 具有多个可能的外键列

> ID：12549502
> 
> 赞同：0
> 
> 时间：2012-09-23T03:30:25.100
> 
> 标签：ruby-on-rails, activerecord

我有一个`Family`包含 a`mother_id`和 a的课程`father_id`。从Family 模型的角度来看，重要的是要知道哪个父母是母亲，哪个是父亲，但是母亲和父亲`Residents`具有所有相同的属性（即数据库列）。所以理想情况下，我希望我的模型文件看起来像这样：

```
class Resident < ActiveRecord::Base
  has_one :family, :dependent => :nullify, :foreign_key => :father_id
  has_one :family, :dependent => :nullify, :foreign_key => :mother_id
  attr_accessible :email, :cell, :first_name, :last_name
end

class Family < ActiveRecord::Base
  belongs_to :father, :class_name => 'Resident', :foreign_key => 'father_id'
  belongs_to :mother, :class_name => 'Resident', :foreign_key => 'mother_id'
  attr_accessible :address, :city, :state, :number_of_children
end 
```

这行不通。 `my_family.mother`和`my_family.father`工作，所以 Rails 似乎对 double 很满意`belongs_to`。但是，`my_dad.family == nil`表示第二个`has_one`覆盖第一个。这是合理的，因为否则，如果 resident_id 同时出现在 mother_id 和父亲 ID 列中会发生什么？（虽然我计划添加模型级验证以确保永远不会发生，`has_one`但不涉及验证方法。）此外，这`my_dad.family = Family.new`意味着什么？ActiveRecord 将如何选择是否`my_dad.id`插入`Family.mother_id`或`Family.father_id`？

从[这个 Stackoverflow question](https://stackoverflow.com/questions/3393561/has-one-with-two-foreign-keys)，我得到了使用不同名称的想法，即将`has_one`行更改为：

```
has_one :wife_and_kids, :class_name => 'Family', :dependent => :nullify, :foreign_key => :father_id
has_one :husband_and_kids, :class_name => 'Family', :dependent => :nullify, :foreign_key => :mother_id 
```

我的问题是：

1）有更好的方法吗？也许是不同的数据库模式？

2) 数据库级验证是否可以补充模型级验证以确保`my_dad.id`不能同时出现在`mother_id`和`father_id`列中？

3) 你能想出比`husband_and_kids`/更好的名字`wife_and_kids`吗？（诚​​然不是编程问题......）

**编辑：** 我想到要添加一个家庭吸气剂：

```
def family
  @family ||= self.wife_and_kids || self.husband_and_kids
end
after_save :reset_family
def reset_family
  @family = nil
end 
```

这使它在语法上更干净（因为我真的不是 的粉丝`[husband|wife]_and_kids`），因为没有设置器，所以不会产生任何歧义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:06:51.963

您面临的主要问题是您有一个“条件”外键，这意味着用于解析 :family 居民的外键取决于居民是男性还是女性（母亲或父亲）。在我看来，处理这个问题的最好方法是使用 STI（单表继承）来区分这两种情况。

```
class Resident < ActiveRecord::Base
    attr_accessible :email, :cell, :first_name, :last_name
end

class Mother < Resident
    has_one :family, :dependent => :nullify, :foreign_key => :mother_id
end

class Father < Resident
    has_one :family, :dependent => :nullify, :foreign_key => :father_id
end 
```

您仍然可以使用 Resident 表，但您需要迁移字符串类型的 :type 字段并根据具体情况存储值“Mother”或“Father”。此外，将这些类定义中的每一个都放在 models/.js 中自己的文件中。

编辑：我认为这也解决了您的第二个和第三个问题中提出的问题。

编辑2：

给定当前架构，您需要在表上创建[检查约束](http://w3schools.com/sql/sql_check.asp)`families`。一方面，活动记录对此没有直接支持，因此您必须执行原始 sql 来添加约束。理论上，每次在“families”的“mother_id”列中添加或更改一个值时，检查都必须与“residents”表进行交叉引用，确定“resident”的“type”列是“母亲。” 将（理论上）添加此约束的 SQL 是

```
ALTER TABLE families
ADD CONSTRAINT must_be_mother CHECK ((SELECT type FROM residents WHERE residents.id = families.mother_id) = 'Mother') 
```

问题是它`CHECK`包含一个子查询，据我所知，许多数据库都不允许检查中的子查询。（有关详细信息，请参阅此[问题](https://stackoverflow.com/questions/6195881/what-sql-databases-support-subqueries-in-check-constraints)）。

如果您真的想在这里实现数据库级别的验证，您可能需要通过将“居民”分为“母亲”和“父亲”来更改架构。

# c# - 客户端计算机上的 Windows 应用程序和 SQL Server 2000 数据库

> ID：12549507
> 
> 赞同：0
> 
> 时间：2012-09-23T03:31:56.060
> 
> 标签：c#, winforms, deployment, sql-server-2000

我在客户端机器上安装了一个 .net Windows 应用程序，它的数据库在 SQL Server 2000 中。

对于应用程序，我安装了 .net 框架和其他支持软件，对于数据库，我安装了 SQL Server 2000 并在那里创建了一个数据库并连接它。好好工作

但是现在客户端从 Windows XP 更改为 Windows 7。我搜索 SQL Server 2000 的安装，但它在那里不起作用。所以我做了什么，我`.mdf`用exe应用程序发送了数据库文件并制作了连接字符串

```
<add name="AccountingConnectionString" 
     connectionString="data source=.\SQLEXPRESS Integrated Security=SSPI;AttachDBFilename=C:\SetupOfApplication\DataBase\Database.mdf;User Instance=true" 
     providerName="System.Data.SqlClient" /> 
```

它也在工作。

现在我更改了数据库中的某些内容，并尝试更新`.mdf`文件，但它不反映新文件`.mdf`正在获取旧文件。我被困住了......

我做错什么了吗？因为它对我来说很难修复。

或者

我想知道在 Windows 7 上使用 SQL Server 2000 数据库的有效方法是什么，或者还有其他解决方案吗？

# java - 添加到列表中的字符

> ID：12549516
> 
> 赞同：0
> 
> 时间：2012-09-23T03:33:37.147
> 
> 标签：java, android, string, list, stringbuilder

我有一个名为 dbData 的列表和两个名为 infoSB 和 historySB 的 StringBuilder。我已经调试了我的项目，两个 StringBuilders 拥有它们应该拥有的所有数据，但由于某种原因，它还向数据中添加了一些随机字符。我为添加数据所做的只是下面的代码：

```
dbData.add(infoSB.toString());
dbData.add(historySB.toString()); 
```

添加的字符是 [ ] 和 ,

有没有人遇到过这种情况并知道如何防止它这样做？

更新：这是我获取数据并将其分配给 StringBuilder 的方式。

```
JSONObject json_data = jArray.getJSONObject(i);
double altitudeData = json_data.getDouble("altitude");
double altitudeInFeet = altitudeData * 3.281;
historySB.append("Altitude: " + df.format(altitudeInFeet) + "ft\n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:46:46.090

这些字符是在字符串的开头和结尾吗，中间的某个地方是逗号吗？这就是`toString`方法的`List`目的。

如果你有一个包含三个元素的列表

1.  “车”
2.  “面包车”
3.  “自行车”

然后列表将创建以下字符串`[car, van, bike]`。表示列表的`[]`开头和结尾，逗号表示元素之间的边界。

如果您只想连接字符串，请使用`+`运算符或`StringBuilder`/ `StringBuffer`。

例如。

```
String data = infoSB + historySB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T19:58:02.447

**-**首先检查你的`data source`，它们是否带有你收到的一些奇怪的字符。

**-**我希望那些`StringBuilder`持有的不是`JSON`，我怀疑它是因为你得到`[]`了`,`你的 StringBuilders ，所以如果你需要先解析它们，然后需要检索你想要的特定数据......

**-**`trim()`您可以使用方法避免任何悬空的空白

**例如：**

```
dbData.add(infoSB.toString().trim());
dbData.add(historySB.toString().trim()); 
```

**/////////////////编辑部分////////////////**

```
DecimalFormat df = new DecimalFormat("##.###");
String altitudeData = json_data.getString("altitude");
double altitudeInFeet = Double.parseDouble(altitudeData) * 3.281;
historySB.append("Altitude: " + df.format(altitudeInFeet) + "ft\n"); 
```

# android - 如何在 ViewPager 中添加 OnClickListener

> ID：12549517
> 
> 赞同：1
> 
> 时间：2012-09-23T03:34:02.247
> 
> 标签：android, android-viewpager

我对 ViewPager 有疑问，找不到答案。我想在点击图片（查看）时发送消息。我做不到，请帮帮我。示例：点击图片1-->留言“图片1” 点击图片2-->留言“图片2”

非常感谢，

我的页面适配器；

```
package com.example.pictures;

import android.content.Context;
import android.media.AudioManager;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;

public class MyPagerAdapter extends  PagerAdapter{

public int getCount() {
    return 6;
}

public Object instantiateItem(View collection, int position) {

    View view=null;

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.picture1;
        view = inflater.inflate(resId, null);         
        break;
    case 1:
        resId = R.layout.picture2;   
        view = inflater.inflate(resId, null);
        break;
    case 2:
        resId = R.layout.picture3;
        view = inflater.inflate(resId, null);
        break;
    case 3:
        resId = R.layout.picture4;
        view = inflater.inflate(resId, null);
        break;
    case 4:
        resId = R.layout.picture5;
        view = inflater.inflate(resId, null);   
        break;
    case 5:
        resId = R.layout.picture6;
        view = inflater.inflate(resId, null);
        break;
    }

    ((ViewPager) collection).addView(view, 0);

    return view;
}

@SuppressWarnings("unused")
private Context getApplicationContext() {
    // TODO Auto-generated method stub
    return null;
}

private void setVolumeControlStream(int streamMusic) {
    // TODO Auto-generated method stub

}

@SuppressWarnings("unused")
private Context getBaseContext() {
    // TODO Auto-generated method stub
    return null;
}

@SuppressWarnings("unused")
private PagerAdapter findViewById(int myfivepanelpager) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}

public static Integer getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

} 
```

OnPageChangeListener;

```
package com.example.pictures;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.support.v4.view.ViewPager.OnPageChangeListener;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class Pictures extends Activity implements OnPageChangeListener{
SoundManager snd; 
int sound1,sound2,sound3;
View view=null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.picturespage);

 MyPagerAdapter adapter = new MyPagerAdapter();
 ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
 myPager.setAdapter(adapter);
 myPager.setCurrentItem(0); 
 myPager.setOnPageChangeListener(this);
snd = new SoundManager(this);
 sound1 = snd.load(R.raw.sound1);
 sound2 = snd.load(R.raw.sound2);
 sound3 = snd.load(R.raw.sound3);

}
public void onPageScrollStateChanged(int arg0) {
    // TODO Auto-generated method stub

}

public void onPageScrolled(int arg0, float arg1, int arg2) {
    // TODO Auto-generated method stub

}

public void onPageSelected(int position) {
    // TODO Auto-generated method stub

    switch (position) {
    case 0:
            snd.play(sound1);
        break;
    case 1:
        snd.play(sound2);
        break;
    case 2:
            snd.play(sound3);
        break;
    case 3:
      Toast.makeText(this, "1", Toast.LENGTH_SHORT).show();
        break;
    case 4:
       Toast.makeText(this, "2", Toast.LENGTH_SHORT).show();
        break;
    case 5:
        Toast.makeText(this, "3", Toast.LENGTH_SHORT).show();
        break;
    }
}
}; 
```

# android - 官方 Android 片段训练示例中的错误？

> ID：12549521
> 
> 赞同：2
> 
> 时间：2012-09-23T03:34:37.940
> 
> 标签：android, oop, android-fragments, android-view

在我看来，Android Fragments 演示中一定有一个错误。

作为背景，片段显然有时由 Android 操作系统实例化，因此[需要一个公共的无参数构造函数](http://developer.android.com/reference/android/app/Fragment.html)：

> Fragment 的所有子类都必须包含一个公共的空构造函数。框架通常会在需要时重新实例化一个片段类，特别是在状态恢复期间，并且需要能够找到这个构造函数来实例化它。如果空构造函数不可用，在状态恢复过程中某些情况下会出现运行时异常。

但是来自官方 Android 培训 Fragments的[NewsReader 演示](http://developer.android.com/training/multiscreen/adaptui.html)`HeadlinesFragment`构建了该类并使用`setOnHeadlineSelectedListener(this)`from对其进行配置`NewsReaderActivity.onCreate()`。

如果 Android 操作系统重新实例化此片段，则该`mHeadlineSelectedListener`字段将为 null，因为`HeadlinesFragment`不保存或恢复其状态。无论如何它不能，因为我相信不可能持久引用`Activity`.

此外，我注意到[`Fragment`文档](http://developer.android.com/reference/android/support/v4/app/Fragment.html)指出：

> 强烈建议子类不要有其他带参数的构造函数，因为片段重新实例化时不会调用这些构造函数；相反，参数可以由调用者使用 setArguments(Bundle) 提供，然后由 Fragment 使用 getArguments() 检索。

另一方面，在前面的[`FragmentBasics`](http://developer.android.com/training/basics/fragments/creating.html)示例中，它们似乎正确地执行了实例化和配置（排序）。我说“有点”是因为出于某种原因，它们直接实例化了`HeadlinesFragment`而不是 via `SupportFragmentManager`，就像在`NewsReader`演示中所做的那样。无论如何，他们不会犯从 调用 setter 的明显错误`HeadlinesFragment`，`MainActivity`而是让`HeadlinesFragment`负责在`OnArticleSelectedListener`期间找到它的地方`onAttach()`。

这是`NewsReader`示例中的错误还是我遗漏了什么？与此同时，我提交了一个[Android 文档问题](http://code.google.com/p/android/issues/detail?id=37755)。

# php - 如何更正此重写规则？

> ID：12549526
> 
> 赞同：0
> 
> 时间：2012-09-23T03:35:13.067
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我的网址为 `http://www.mydomain.com/levels/home?mode=48bb6e862e54f2a795ffc4e541caed5c`. 我需要将此网址更改为`http://www.mydomain.com/medium`. 我不熟悉重写网址。

我试过了`RewriteRule ^medium/?$ levels/home?mode=48bb6e862e54f2a795ffc4e541caed5c`，但没有正常工作。

完全重写规则

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^medium/?$    levels/home?mode=48bb6e862e54f2a795ffc4e541caed5c
RewriteRule ^(.*)$ index.php [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:58:52.143

尝试仅将该行更改为：

```
RewriteRule ^medium /levels/home?mode=48bb6e862e54f2a795ffc4e541caed5c 
```

或者，如果您不在乎介质之后是否有任何内容，则如下：

```
RewriteRule ^medium(.*) /levels/home?mode=48bb6e862e54f2a795ffc4e541caed5c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T01:31:41.990

您的规则顺序错误，请尝试将它们更改为：

```
RewriteEngine On

RewriteRule ^medium/?$    levels/home?mode=48bb6e862e54f2a795ffc4e541caed5c

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [QSA,L] 
```

条件需要应用于 index.php 规则，而不是 medium 规则。`RewriteCond`s 仅适用于紧随其后的`RewriteRule`，而不是全部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T08:24:45.800

这个重写规则工作得很好

```
RewriteRule ^medium.*$  /levels/home?mode=48bb6e862e54f2a795ffc4e541caed5c [R=301,L] 
```

# java - sphinx4 原始格子演示

> ID：12549527
> 
> 赞同：0
> 
> 时间：2012-09-23T03:35:14.523
> 
> 标签：java, speech, jsapi, sphinx4

我只有一个关于 sphinx raw lattice demo 的简单问题（连同所有其他 Java 文件）。

程序是否扫描音频文件并打印出它认为音频文件在说什么？如果不是，那么为什么需要将音频文件加载到 Java 应用程序？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T21:48:25.447

> 程序是否扫描音频文件并打印出它认为音频文件在说什么？

是的

# c# - 线程等待 WaitOne() 时停止应用程序的正确方法

> ID：12549530
> 
> 赞同：1
> 
> 时间：2012-09-23T03:36:58.620
> 
> 标签：c#, multithreading, autoresetevent, event-wait-handle

我正在玩`AutoResetEvent`，我的应用程序没有结束，我想我知道为什么：线程仍在运行，因此应用程序不会终止。通常，在 中`Main()`，我按下一个键后，应用程序就会终止。但是控制台窗口不再关闭。我有一个简单的控制台应用程序：

```
 private static EventWaitHandle waitHandle = new AutoResetEvent(false);

    static void Main(string[] args)
    {
        AutoResetEventFun();

        Console.WriteLine("Press any key to end.");
        Console.ReadKey();

        waitHandle.Close();  // This didn't cause the app to terminate.
        waitHandle.Dispose();  // Nor did this.
    }

    private static void AutoResetEventFun()
    {
        // Start all of our threads.
        new Thread(ThreadMethod1).Start();
        new Thread(ThreadMethod2).Start();
        new Thread(ThreadMethod3).Start();
        new Thread(ThreadMethod4).Start();

        while (Console.ReadKey().Key != ConsoleKey.X)
        {
            waitHandle.Set();  // Let one of our threads process.
        }
    }

    // There are four of these methods. Only showing this one for brevity.
    private static void ThreadMethod1()
    {
        Console.WriteLine("ThreadMethod1() waiting...");

        while (true)
        {
            waitHandle.WaitOne();
            Console.WriteLine("ThreadMethod1() continuing...");   
        }
    } 
```

终止此应用程序的正确方法是什么？我是否需要保留对每个线程的引用并调用每个线程`Abort()`？有没有办法发出信号`waitHandle`让等待它的线程终止？（我不这么认为，但我认为值得一问。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T03:45:01.833

虽然我不完全确定您要完成什么，但终止此应用程序的一种方法是使所有线程后台线程：

```
private static void ThreadMethod1()
{ 
    Thread.CurrentThread.IsBackground = true;
    Console.WriteLine("ThreadMethod1() waiting...");

    while (true)
    {
        waitHandle.WaitOne();
        Console.WriteLine("ThreadMethod1() continuing...");   
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:12:38.283

Another way is to set a volatile 'Abort' boolean flag that the threads always check after returning from the WaitOne() call to see if they need to exit. You could then set this flag and signal the WaitHandle [no. of threads] times.

# c# - ASP MVC 将视图中的模型数据作为表单数据传回

> ID：12549536
> 
> 赞同：0
> 
> 时间：2012-09-23T03:38:01.853
> 
> 标签：c#, asp.net-mvc-3, razor

我得到了以下 Razor 视图，该视图显示 HDD 列表，以便用户添加到购物车。当用户按下每行硬盘旁边的按钮时，它会将数量和硬盘的身份传递给控制器​​。但是，虽然每个 HDD 的 ID 都正确显示，但当我检查控制器的参数时，“hddId”始终为 1，“数量”正确为 5。

```
@model IEnumerable<TestStore.Models.Hdd>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
@using(Html.BeginForm("AddToCart","Cart")){
<table>
    <tr>
        <th>
            Ident
        </th>
        <th>
            Brand
        </th>
        <th>
            Name
        </th>
        <th>
            Model
        </th>
        <th>
            Speed
        </th>
        <th>
            Capacity
        </th>
        <th>
            Cache
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.hddId)
        </td>
        <td>
            @Html.Hidden("hddId", item.hddId)
            @Html.Hidden("quantity", 5)
            @Html.DisplayFor(modelItem => item.brand)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.model)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.speed)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.capacity)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.cache)
        </td>
        <td>
            <input type="submit" value="Add to Cart" />
        </td>
    </tr>

}

</table>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:40:47.287

正如其他人所说，这不起作用，因为当您提交时，您提交的是表格中的每一行，而不仅仅是点击的那一行。

一种选择是按照他们在本文中的建议进行操作：

[http://federmanscripts.com/2010/01/12/form-and-table-row-nesting-workaround/](http://federmanscripts.com/2010/01/12/form-and-table-row-nesting-workaround/)

也就是说，使用 javascript，您将按下按钮时的表单值复制到隐藏行并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:19:45.077

Codingbiz 是正确的。提交按钮不是指任何特定的行，而是指整个表格。我怀疑“hddId”总是“1”的原因是因为这是提交表单时看到的“hddId”的第一个引用。我对其进行了更改，因此 @using(Html.BeginForm(...)) 位于 @foreach 循环内，因此每一行都有自己的表单和提交按钮：

```
@foreach (var item in Model) {

    <tr>
        @using(Html.BeginForm("AddToCart","Cart")){
        <td>
            @Html.DisplayFor(modelItem => item.hddId)
        </td>
        <td>
            @Html.Hidden("hddId", item.hddId)
            @Html.Hidden("quantity", 5)
            @Html.DisplayFor(modelItem => item.brand)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.model)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.speed)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.capacity)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.cache)
        </td>
        <td>
            <input type="submit" value="Add to Cart" />
        </td>
        }
    </tr>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:41:44.417

我通过使用按钮类型=“提交”而不是输入类型=“提交”来解决验证问题。通过将 id 号传递给控制器​​，它仍然可以正常工作。

```
@using(Html.BeginForm("AddToCart","Cart")){
<table>
    <tr>
    //header stuff here
    </tr>

    @foreach (var item in Model) {
    //row data goes here
    //remove hidden field reference to @item.hddId
    <tr>
    <td>
        <button type="submit" value="@item.hddId" name="hddId">Add to Cart</button>
    </td>
    </tr>
</table>
} 
```

# unix - 对命令行参数感到沮丧 = $1 和 awk 列 1 = $1

> ID：12549537
> 
> 赞同：1
> 
> 时间：2012-09-23T03:39:11.320
> 
> 标签：unix

我正在尝试通读文件的第一行并找到在命令行中指定的列。例如：`command <column> <textfile>`so column is`$1`和 textfile `$2`。

我正在编写一个 awk 命令来将文件列拆分为一个数组，然后是一个 for 循环来检查数组元素何时与列参数匹配。这是代码：

```
awk 'NR == 1 {split ( $0,titles ); for ( i=1 ; titles[i] != "$1" ; i++ ) ; FS = " "} NR > 1 {print $i }' file 
```

我希望`$1`引用第一个命令行参数而不是 awk 看到的第一列。 **如何在 for 循环中获取 column 参数？**我以为我可以为变量创建一个变量`$1`并将其传递给它，`awk`但这没有用，或者我做错了——非此即彼。几个小时以来，我一直在查找有关此的内容。我可能会遗漏一些明显或愚蠢的东西，但它已经到了我真的只需要知道如何做到这一点的地步。同样在我寻找答案的过程中，我阅读了有关`ARGV[]`. 我想`ARGV[1] == $1`但显然不是这样的`ARGV`数组指的是什么？谢谢你的尽心帮助。

*（注意：只是为了帮助解决任何混淆文件是文本文件的编辑版本，称为 $2）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:02:49.193

```
awk -v column="$1" 'NR == 1 { ... } NR > 1 { ... }' "$2" 
```

在脚本内部，您可以通过名称（标志预设变量）`awk`引用传递给 shell 脚本的值。`$1``column``-v``awk`

我不太明白你对你在做什么的解释，但我认为我会使用：

```
awk -v column="$1" '
    NR == 1 { for (i = 1; $i != column && i <= NF; i++) ; }
    NR >  1 { print $i }' \
    "$2" 
```

`awk`将行拆分为单独的字段；你不需要这个`split`功能；你也不需要玩`FS`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T03:58:26.777

在 awk 中，第一个命令行参数是`ARGV[1]`，而`$1`是当前行的第一个单词。他们是两个完全不同的东西。

例如：

```
$ awk 'BEGIN { print "ARGV[1] =", ARGV[1] }' foo bar
ARGV[1] = foo 
```

# iphone - 获取不兼容的块指针类型发送 void *(^)

> ID：12549540
> 
> 赞同：5
> 
> 时间：2012-09-23T03:39:44.530
> 
> 标签：iphone, ios5, objective-c-blocks

```
[AsyncRequest performGetRequestWithUrl:[NSString stringWithFormat:@"http://%@/api/streams/%d", @"server.herokuapp.com", userId]
                     completionHandler:^(NSDictionary *result, NSError *error) {
    // Create new SBJSON parser object
    NSError *e;
    NSArray *jsonArray =[NSJSONSerialization JSONObjectWithData:result options:NSJSONReadingMutableContainers error: &e];

    NSLog(@"parse result to JSON object with jsonArray: %@ and error: %@", jsonArray, e.description);

    if ([jsonArray valueForKey:@"error"]) {
        return nil;
    }

    NSLog(@"getStreams size of the return array: %d", [jsonArray count]);
    NSMutableArray* data = [[NSMutableArray alloc] initWithCapacity:0];

    if (jsonArray) {
        data = [[NSMutableArray alloc] initWithCapacity:[jsonArray count]];
        for (NSDictionary *item in jsonArray) {
            NSLog(@"item: %@", item);
            [data addObject:[[Stream alloc] initWithJSONObject:item]];
        }
    }

    onComplete(data, error);

}]; 
```

我在这段代码上遇到奇怪的错误。它显示错误消息“获取不兼容的块指针类型将 void *(^)(NSDictionary *_strong, NSError *_strong) 发送到 'void (^)(NSDictionary *_strong, NSError *_strong) 类型的参数'

这是函数签名：

```
+(void)performGetRequestWithUrl:(NSString *)requestUrl completionHandler:(void (^)(NSDictionary *result, NSError *error))completionBlock 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-23T03:47:31.303

将“返回零”更改为“返回”

# php - 从 php 对象中回显值

> ID：12549543
> 
> 赞同：1
> 
> 时间：2012-09-23T03:39:56.967
> 
> 标签：php, object

我有一个名为`$result`　(got from `json_decode`) 的 php 对象，下面是该对象的 print_r。我试图呼应问题编号和答案。前任：

```
4 answer1
5 answer2 
```

我该怎么做。

```
stdClass Object
    (
    [request] => stdClass Object        (
            [other] => stdClass Object
                (
                    [4] => stdClass Object
                        (
                            [answer] => answer1
                        )
                    [5] => stdClass Object
                        (
                            [answer] => answer2
                        )
                )
        )
    ) 
```

我还在学习面向对象编程。作为一个简单的方法，我试图`echo $result->request->other->4->answer`回应第一个答案，但这似乎不对。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:05:53.577

您需要将 number 属性包装为`{}`：

```
echo $result->request->other->{4}->answer; 
```

# java - int 不能被取消引用错误

> ID：12549547
> 
> 赞同：-2
> 
> 时间：2012-09-23T03:41:37.027
> 
> 标签：java

我在下面的代码中有 int cannot be dereferenced 错误，我在这里有 //error。我很困惑，因为变量 b 用于在后面的行中引用 empl 数组中的一个点，而不会显示为错误。那么我该如何解决这个问题，为什么会产生错误？我将不胜感激任何帮助。示例代码也会很棒，因为这似乎是我学习得最好的方式。谢谢！

```
public static void bubbleSort(Employee[] empl) {
    for (int a = 1; a < empl.length; a++) 
    {
        for (int b = 0; b < empl.length - a; b++) 
        {
            if (((empl[b].//error is here
                    getEmployeeNumber()).compareTo
                   ((empl[b + 1].getEmployeeNumber()))) > 0) 
            {
               // swap employees[b] with employees[b+1]
               Employee temp = empl[b];
               empl[b] = empl[b + 1];
               empl[b + 1] = temp;
            }
        }
    }
} 
```

编辑：欢迎任何其他按员工编号对数组进行排序的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T03:45:47.257

`getEmployeeNumber()`显然返回一个`int`.

`int`是原始类型，而不是对象。
因此，您不能调用类似`compareTo()`的方法。

# php - 本地主机中的 WAMP PHP 测试

> ID：12549549
> 
> 赞同：0
> 
> 时间：2012-09-23T03:42:42.963
> 
> 标签：php, web, wamp

我创建了一个简单的登录网页，其中包含 CSS 和背景图像等。当您单击登录/提交时，它使用 PHP 访问数据库。

问题是当我在 WAMP 中使用 Localhost 进行测试/查看时。它显示表单和其他内容，例如文本和段落..但不显示用作登录页面边框和按钮的背景图像和图像。它只显示损坏的图像图标。

当我在浏览器中打开 php 页面时，它会显示所有内容，唯一不正确的是在数据库中查找，但这是可以理解的，因为 PHP 服务器位于 WAMP 中。

如何使图像在 WAMP 的 Localhost 中正确显示？

这是我的登录页面的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/cssLoginPage.css">
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>

<script>

$(document).ready(function() {  

    //Put in the DIV id you want to display
    launchWindow('#dialog1');

    //if close button is clicked
    $('.window #close').click(function () {
        $('#mask').hide();
        $('.window').hide();
    });     

    //if mask is clicked
    $('#mask').click(function () {
        $(this).hide();
        $('.window').hide();
    });         

    $(window).resize(function () {

        var box = $('#boxes .window');

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        //Set the popup window to center
        box.css('top',  winH/2 - box.height()/2);
        box.css('left', winW/2 - box.width()/2);

    }); 

});

function launchWindow(id) {

        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();

        //Set heigth and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});

        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.8);  

        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();

        $(id).css('top',  10);
        $(id).css('left', 780);
        /*      
        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height());
        $(id).css('left', winW/2-$(id).width()/2);
        */

        //transition effect
        $(id).fadeIn(2000); 

}

</script>

<title>Untitled Document</title>
</head>

<body>

<div id="boxes">

<!-- Start of Login Dialog -->  

<div id="dialog1" class="window">
  <div class="d-header">
  <form name="form1" method="post" action="loginproc.php">
    <input name="myusername"  type="text" id="myusername" value="username" onclick="this.value=''"/><br/>
    <input name="mypassword"  type="password" id="mypassword" value="Password" onclick="this.value=''"/>    
  </div>
  <div class="d-blank"></div>

  <div class="d-login"><input type="image" alt="Login" title="Login" src="./css/images/login-button.png"/></div>
  </form>
  </div>

  <!-- End of Login Dialog -->  
</div>
</div>
</body>
</html> 
```

这是CSS：

```
@charset "utf-8";
/* CSS Document */

.loginTable { 
    width:300px; margin: 250px auto;
    box-shadow: 1px 1px 3px #000;
            }

body
{
background:url(../css/images/homepage.jpg)no-repeat top center;

}
#mask {
  position:absolute;
  left:0;
  top:0;
  z-index:9000;
  background-color:#000;
  display:none;
}

#boxes .window {
  position:fixed;
  width:440px;
  height:200px;
  display:none;
  z-index:9999;
  padding:20px;
}

#boxes #dialog {
  width:375px; 
  height:203px;
  padding:10px;
  background-color:#ffffff;
}

#boxes #dialog1 {
  width:375px; 
  height:203px;
}

#dialog1 .d-header {
  background:url(../css/images/login-header.png) no-repeat 0 0 transparent; 
  width:375px; 
  height:150px;
}

#dialog1 .d-header input {
  position:relative;
  top:60px;
  left:100px;
  border:3px solid #cccccc;
  height:22px;
  width:200px;
  font-size:15px;
  padding:5px;
  margin-top:4px;
}

#dialog1 .d-blank {
  float:left;
  background:url(../css/images/login-blank.png) no-repeat 0 0 transparent; 
  width:267px; 
  height:53px;
}

#dialog1 .d-login {
  float:left;
  width:108px; 
  height:53px;
}

#boxes #dialog2 {
  background:url(../css/images/notice.png) no-repeat 0 0 transparent; 
  width:326px; 
  height:229px;
  padding:50px 0 20px 25px; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:11:16.143

图片中的`src`标签需要是这样的：

```
<div class="d-login">
    <input type="image" alt="Login" title="Login" 
           src="/css/images/login-button.png"/>
</div> 
```

请注意， src 属性不再具有`.`. 另外，请确保图像位于 www 文件夹中。

# javascript - 在 Firefox 中，窗口没有使用 javascript 重新调整大小，

> ID：12549552
> 
> 赞同：0
> 
> 时间：2012-09-23T03:43:14.953
> 
> 标签：javascript, html, javascript-events

我有一个 java 脚本来重新调整我所有的弹出窗口的大小

```
function resize()
{
window.resizeTo(240,230);
} 
```

但是现在它在 mozilla firefox 中没有调整大小，但它很早就做了，或者如果在新选项卡中打开弹出窗口，它没有调整大小，在某些浏览器中也没有，是否有任何 java 脚本适用于所有场景和所有浏览器的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:46:08.930

> Firefox 带有用户偏好，允许/禁止使用 Javascript 调整窗口大小。它在工具 - 选项 - 内容 - 启用 Javascript -> [高级]。
> 
> 我不确定默认情况下是否禁用调整大小，但您可能需要先检查自己的 Firefox 安装。
> 
> 如果默认情况下禁用它，那么不幸的是，在打开窗口后您无法调整窗口大小。一个丑陋的解决方法是使用具有首选大小的 window.open() 再次打开自身。

来源：[timdream](https://stackoverflow.com/users/519617/timdream)（[这里](https://stackoverflow.com/questions/6124400/javascript-resizing-of-firefox-pop-up-window)）

我还要补充一点：

> 您不能确信任何浏览器都会让您控制您创建的窗口的大小。你甚至不能确定你会得到一个窗口——人们可以指示他们的浏览器将所有新窗口作为浏览器选项卡打开

来源：[Pointy](https://stackoverflow.com/users/182668/pointy)（与 timdream 相同的来源）

# c++ - 递增和递减输出行为

> ID：12549555
> 
> 赞同：0
> 
> 时间：2012-09-23T03:43:29.927
> 
> 标签：c++, gcc, codeblocks

> **可能重复：**
> [cout << c++ << c; 的正确答案是什么？](https://stackoverflow.com/questions/10782863/what-is-the-correct-answer-for-cout-c-c)

这是我的一段代码：

```
#include <iostream>
using namespace std;

int main(){
int val = 10;
cout << "\n" << val++<< " "<< ++val << " " << val;
cin.get();
return 0;
} 
```

输出返回

```
11 12 12 
```

但难道不应该

```
10 12 12 
```

?

我在某处读到，在级联多个值的情况下，计算从右到左进行，但打印像往常一样从左到右进行。真的吗 ？

# python - Python，迭代非常大的数字时内存不足

> ID：12549558
> 
> 赞同：0
> 
> 时间：2012-09-23T03:44:49.520
> 
> 标签：python, list, memory

我正在编写一个执行各种字符排列的 python 脚本。最终，脚本将因内存不足错误而崩溃，具体取决于我想要进行置换的深度。

我最初认为解决方案会清空列表并重新启动，但这样做会导致索引越界错误。

这是我目前的设置：

```
for j in range(0, csetlen):
    getJ = None
    for i in range(0, char_set_len):
        getJ = word_list[j] + char_set[i]
        word_list.append(getJ)

    csetlen = csetlen - j
    del word_list[j-1:]
    word_list.append(getJ)
    j=0 
```

基本上，`csetlen`可以是一个非常大的数字（超过 100,000,000）。当然，我没有足够的内存。所以我试图找出如何缩小外`for`循环中的列表。如何优雅地做到这一点？

内存错误与`word_list`. 目前，我正在存储数百万种不同的排列；我需要能够“回收”一些旧的列表值。如何对 python 列表执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T03:49:38.453

您想要的是一个按需生成值的迭代器（并且不将它们存储在内存中）：

```
from itertools import product
getJ_iterator = product(wordlist[:csetlen], char_set[:char_set_len]) 
```

这等效于以下生成器函数：

```
def getJ_gen(first_list, second_list):
    for i in first_list:
        for j in second_list:
            yield (i, j)

getJ_iterator = getJ_gen(wordlist[:csetlen], char_set[:char_set_len]) 
```

您将像这样遍历对象：

```
for item in getJ_iterator:
    #do stuff 
```

请注意，`item`在这种情况下，将是一个形式为 的元组`(word, char)`。

# iphone - 没有锚的popover segue，MKMapView

> ID：12549564
> 
> 赞同：1
> 
> 时间：2012-09-23T03:46:09.800
> 
> 标签：iphone, uipopovercontroller, uistoryboard

我正在尝试在添加到 MKMapView 的图钉上显示一个弹出框。我在我的故事板中添加了一个 UIViewController，并将一个 segue 从一个视图控制器中的 MKMapView 拖到我想在我的弹出窗口和选定的弹出窗口中显示的 viewController。我得到错误：

```
Popover segue with no anchor 
```

在 IB 中，我看到“拖动以选择锚点”，但是当我尝试将其拖动到包含 MKMapView 的第一个 viewController 中的任何位置时，没有任何内容被选中。我不确定从这里去哪里，如果动态创建的视图中的弹出框可用于显示带有情节提要的弹出框。我知道我可以在代码中做到这一点，但是我必须将我的设置器复制并粘贴到 prepareForSegue: 中。想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T00:30:43.113

您需要制作自定义注释视图。这看起来像一个弹出视图，但实际上是不同的。可以在这里找到一个很好的教程：[http ://www.raywenderlich.com/30001/overlay-images-and-overlay-views-with-mapkit-tutorial](http://www.raywenderlich.com/30001/overlay-images-and-overlay-views-with-mapkit-tutorial)

本质上，您需要转到 NEW->NEW FILE-> 左上角的第一个选项 OBJECTIVE C CLASS-> 随意命名，我推荐 CustomAnnotationView，并使其成为 NSObject 的一部分（而不是默认的 UIViewController）- >按照上面列出的教程中的说明进行操作。如果该教程不适合您，那么您可以搜索“自定义地图注释”，然后会弹出许多其他教程。Apple 甚至有几个很好的（虽然已经过时）示例项目，例如天气应用程序和标注应用程序，其中标注了旧金山的三个地点。

# android - 如果重新启动应用程序或其他东西，Int 值 R.string.app_name 会改变吗

> ID：12549569
> 
> 赞同：0
> 
> 时间：2012-09-23T03:48:07.573
> 
> 标签：android, string, notifications

正如标题所说，我怀疑我的 R.string.app_name 改变了。由于我的通知有时不再更新，但下面的代码确实执行了（我可以在 logcat 中看到它）。那可能吗？

```
 nm.notify(R.string.app_name, notification);
    Log.i(TAG, "B:showNotification(): id = " + R.string.app_name); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:16:49.173

不，这是不可能的，因为所有资源都在您的文件（文件夹中）`R.*.*`中定义为常量。稍后 Android 不会编辑这些内容。`R.java``/gen/<your-package>`

例子：

```
public final class R {
    public static final class anim {
        public static final int accelerate_interpolator=0x7f040000;
        public static final int activity_slide_in=0x7f040001;
        public static final int activity_slide_out=0x7f040002;
    }
    public static final class attr {
    }
    public static final class drawable {
        public static final int ic_action_search=0x7f020000;
        public static final int ic_launcher=0x7f020001;
    }
    public static final class id {
        public static final int main_layout=0x7f070001;
        public static final int scroll=0x7f070000;
    }
    public static final class layout {
        public static final int main=0x7f030000;
    }
    public static final class string {
        public static final int app_name=0x7f050000;
    }
    public static final class style {
        public static final int AppTheme=0x7f060000;
    }
} 
```

这是我的一个真实项目中的 R.java 文件。如您所见，每个值都是`final int`在您开发应用程序时分配的（所有值都使用十六进制分配，因此您必须使用在线转换器来转换实际的 int 值）

# java - 更改 Swing 组件的首选大小

> ID：12549571
> 
> 赞同：2
> 
> 时间：2012-09-23T03:48:35.547
> 
> 标签：java, swing, layout, layout-manager, sizing

我有一个摆动组件，其中组件的理想大小将**根据**当前正在显示的内容（在这种情况下发生在图像）而有所不同。

我希望在更改内容时更改此首选大小，并允许更改布局（例如，如果在 JScrollPane 内使用组件，则滚动范围将更改以适应组件的大小） .

在 Swing 中执行此操作的规范方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T03:53:32.540

建议：

*   使用类扩展 JPanel（或 JComponent），
*   给它一个`getPreferredSize()`方法覆盖，您可以在其中返回带有所需参数的 Dimension。
*   例如，如果直径将基于 BufferedImage，您可以有如下内容：

getPreferredSize 示例：

```
public Dimension getPreferredSize() {
  if (myBuffImg != null) {
    return new Dimension(myBuffImg.getWidth(), myBuffImg.getHeight());
  } 
  // default return value
  return super.getPreferredSize();      
} 
```

**编辑**
关于您的评论：

> 但是，您将如何处理组件的内容图像发生变化的情况？是否只是在周围容器中触发重新布局的情况？

你当然会给这个类一个`setImage(Image image)`方法，你可以`repaint()`在这个方法中使用这个面板。我想这个方法可以调用`revalidate()`这个 JPanel 的祖先，导致这个组件被重新布局，但是我对这个类中的方法对其祖先有副作用并不太疯狂，并且认为代码调用可能会更好`setImage(...)`建议容器重新验证自身的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T03:59:04.307

很多都取决于您的个人需求。在处理“图像窗格”时，我通常会在图像更改时调用`setPreferredSize`and 。`invalidate``repaint`

更改布局应该会自动触发无效的重新打印请求。

但我同意气垫船，你会想从你自己的海关面板中做到这一点。

另一种方法是使用类似`CardLayout`处理不同内容布局输出之间的变化，而不是清理单个面板并重新添加comports

我还要看看[Scrollable](http://docs.oracle.com/javase/7/docs/api/javax/swing/Scrollable.html)

# javascript - JavaScript中方法和函数区别的基本代码示例

> ID：12549578
> 
> 赞同：3
> 
> 时间：2012-09-23T03:49:48.430
> 
> 标签：javascript, function, methods

如果没有看到我所阅读内容的真实、基本、有效的例子，我总是很难掌握新概念。虽然我喜欢[关于 stackoverflow 的其他解释](https://stackoverflow.com/questions/155609/what-is-the-difference-between-a-method-and-a-function)，但我真的很想看到一个非常基本的示例，展示 JavaScript 中方法和函数之间的区别，我可以快速运行以了解更多信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T03:54:12.167

A`method`只是一个`property`对象的函数。它不是 javascript 中不同类型的对象，而`method`只是赋予`function`定义为`property`对象的 a 的描述性名称。

```
var myObj = {};
myObj.go = function() {alert("hi");}
myObj.go(); 
```

在本例中，是对象`go`上的一个方法。`myObj`

当如上例中调用方法时，指针`myObj.go()`的值将`this`设置为方法调用所涉及的对象（在本例中`myObj`）。

由于全局函数也是`window`对象上的隐式属性，因此可以说全局函数也是`window`对象上的方法，但您无需`window`指定即可调用它们。

像这个函数中的局部函数`inner()`只是函数而不是方法，因为它们没有附加到特定对象：

```
function main() {
    function inner() {
        alert("hi");
    }
    inner();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T03:54:31.937

这是一个函数和一个函数调用：

```
function myFunction(){
    alert("This is a function!");
}

myFunction(); 
```

另一方面，这是一个方法调用，因为它是对象的成员函数。

```
message.toUpperCase(); 
```

这是创建类/方法和调用的完整代码：

```
function Circle(x,y,r) {
  this.xcoord = x;
  this.ycoord = y;
  this.radius = r;
}
Circle.prototype.retArea = function () {
  return ( Math.PI * this.radius * this.radius );
};

var aCircle = new Circle(1,2,3); 
var a = aCircle.retArea(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T03:58:28.677

例子：

功能：

```
var f1 = function fBase() { ... }

function f2() { ... }

var f3 = function() { ... }

f1()
f2()
f3() 
```

方法：

```
var c = function oBase() { 

   this.method1 = function() { ... };

}

c.prototype.method2 = function() { ... }

var o = new c()
o.method1()
o.method2() 
```

方法json：

```
var o = { method1: function() { ... } }
o.method2 = function() { ... }

o.method1()
o.method2() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T04:26:01.503

函数是一种可用于定义一段代码的类型，该代码可通过使用 call ("()") 运算符执行，并可将数据返回给调用者。

例如

定义

```
function sayHello(){
 return "Hello";
} 
```

采用

```
var result = sayHello(); 
```

现在，结果将包含“Hello”。

方法是定义在对象内部并可通过属性访问的函数。例如，**`slice`**是否在所有字符串实例上定义了函数

例如

定义

```
var obj = {
 sayHello : function(){
  return "Hello";
 }
}; 
```

您还可以在对象定义之外定义方法

```
var obj = {};
obj.sayHello = function(){
      return "Hello";
     }; 
```

采用

```
var result = obj.sayHello(); 
```

我们在面向对象编程中使用方法。

参考：

*   [MDN 的职能](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions)
*   [MDN 中的对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

# security - Magento - 安全和蛮力

> ID：12549585
> 
> 赞同：1
> 
> 时间：2012-09-23T03:51:50.723
> 
> 标签：security, magento, e-commerce, brute-force, magento-1.7

我正在尝试决定是使用 Magento 还是创建自己的平台，我想知道安全性。Magento 的代码是否包含某种蛮力保护？如果不是，这不重要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-20T09:28:44.917

**保护您的 Magento 商店免受暴力攻击。按照以下步骤。**

> **Apache 服务器用户**
> 
> 要将管理面板的 IP 地址列入白名单，请在根 .htaccess 文件（内部`<IfModule mod_rewrite.c>`）中添加以下规则

```
RewriteCond %{REMOTE_ADDR} !^xx.xx.xx.xx
RewriteRule ^(index.php/)?admin/ - [L,R=403] 
```

> 要将 RSS 提要的 IP 地址列入白名单，请在根 .htaccess 文件中添加以下规则（在`<IfModule mod_rewrite.c>):`

```
RewriteCond %{REMOTE_ADDR} !^xx.xx.xx.xx
RewriteRule ^(index.php/?)?rss/ - [L,R=403] 
```

> 要将下载器应用程序的 IP 地址列入白名单，请在 ./downloader/.htaccess 文件中添加以下规则：

```
order deny,allow
deny from all
allow from xx.xx.xx.xx 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-20T13:07:36.653

所以我知道这是一个旧线程，但我发现它正在寻找有关如何保护 Magento 免受暴力攻击的答案。自 2012 年以来，情况发生了变化，因此我想指出寻找有关 Magento 安全信息的人们（希望）是正确的方向。
似乎 Magento 终于决定不再忽视 Magento 网站上越来越多的暴力攻击的问题，因此他们发布了一份关于如何保护 Magento 免受此类攻击的推荐步骤的官方列表：[https ://magento.com/security /best-practices/protect-your-magento-installation-password-guessing](https://magento.com/security/best-practices/protect-your-magento-installation-password-guessing)
托管公司也开始提供解决方案来阻止这些黑客尝试，从阻止和黑名单 IP 到安装过滤软件。
还有几个安全扩展，包括大量的两因素身份验证。在我看来，目前可用的最完整的安全扩展是 ExtensionsMall 的 MageFence。这是 Magento Connect 上的链接：*magentocommerce[.]com/magento-connect/catalog/product/view/id/30596/*。它具有许多有用的功能，例如扫描您的网站以查找恶意软件和漏洞，在多次失败的登录尝试后阻止 IP 地址，并且它与两因素身份验证模块一起提供。您还可以查看[ExtensionsMall 网站上的 MageFence 页面](http://www.extensionsmall.com/mage-fence-security.html)以了解所有信息该模块将帮助您修补安全漏洞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:44:51.850

Magento 唯一的强力保护是在礼品卡的情况下。当在那里抛出异常时，Magento 会隐藏真正的异常消息（但将其放在日志中）并显示“错误的礼品卡代码”消息。

在登录表单方面，Magento 没有蛮力保护。

如果在决定是使用 Magento 还是编写自己的平台时，这对您来说是一个重要因素，请记住您可以编写自己的 Magento 模块来引入一些蛮力保护。这将比编写具有类似于 Magento 功能的自己的平台更省时。

我在 Magento Connect 上进行了快速搜索，发现了一个提供蛮力保护的扩展。这是： http: [//www.magentocommerce.com/magento-connect/market-ready-germany.html](http://www.magentocommerce.com/magento-connect/market-ready-germany.html)。您可以使用[Freegento 网站](http://freegento.com/ddl-magento-extension.php)下载它，并查看代码以获取有关如何制作类似内容的线索。

# html - -webkit-padding-start：40px；IE 和 Firefox 应该是什么？

> ID：12549591
> 
> 赞同：19
> 
> 时间：2012-09-23T03:52:27.623
> 
> 标签：html, css, cross-browser

`-webkit-padding-start: 40px;`铬

*IE*和*Firefox*是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T06:28:51.767

对于 Firefox，属性名称是[`-moz-padding-start`](https://developer.mozilla.org/en-US/docs/CSS/-moz-padding-start). 对于 IE，没有对应的（到目前为止）。

至少在页面整体处于从左到右或从右到左布局和书写方向的简单场景中，您可以使用广泛支持的 CSS 特性来实现相同的效果。分别使用`<html dir=ltr>`or `<html dir=rtl>`，您可以像这样编写您的 CSS 代码：

```
[dir=ltr] .foo {
   padding-left: 2.5em;
}
[dir=rtl] .foo {
   padding-right: 2.5em;
} 
```

这将对应于`.foo { padding-start: 2.5em; }`。当然，这种方法意味着一些代码重复。但它几乎可以 100% 运行（包括标准模式下的 IE 7 和更新版本）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-23T04:04:21.097

```
-moz-padding-start: 40px;
-webkit-padding-start: 40px;
-khtml-padding-start: 40px;
-o-padding-start: 40px;
padding-start: 40px;
padding: 40px; 
```

我不相信 IE 有一个填充启动等效项。

# python - 在 Python 中实现传输层安全性 - 简单邮件客户端

> ID：12549593
> 
> 赞同：4
> 
> 时间：2012-09-23T03:53:54.030
> 
> 标签：python, sockets, smtp, ssl

我有一个任务是编写一个简单的邮件客户端，并使用套接字（不使用 smtp lib）连接到谷歌 smtp 服务器。但是，向 google smtp 服务器发出 MAIL FROM 命令需要 ssl 或 tls，这是我无法弄清楚的部分。因此，我正在尝试使用 Python 的 ssl.wrap_socket() 方法....

```
# Create socket called clientSocket and establish a TCP connection with mailserver
clientSocket = socket(AF_INET, SOCK_STREAM)
ssl_clientSocket = ssl.wrap_socket(clientSocket) 
ssl_clientSocket.connect((mailserver, port)) 
```

...这是行不通的。我很确定我需要包含 ca_certs 和 ca_reqs 参数，但我不确定。如果是这样，我该如何获得这些证书？我必须下载 openssl 并生成一个吗？有这方面经验的人吗？为了安全起见，这是整个代码。

```
from socket import *
import ssl

msg = "\r\n I love computer networks!"
endmsg = "\r\n.\r\n"

# Choose a mail server (e.g. Google mail server) and call it mailserver
mailserver = "smtp.gmail.com"
port = 587

# Create socket called clientSocket and establish a TCP connection with mailserver
clientSocket = socket(AF_INET, SOCK_STREAM)
ssl_clientSocket = ssl.wrap_socket(clientSocket) 
ssl_clientSocket.connect((mailserver, port))

recv = ssl_clientSocket.recv(1024)
print
print recv

# If the first three numbers of what we receive from the SMTP server are not
# '220', we have a problem
if recv[:3] != '220':
    print '220 reply not received from server.'

# Send HELO command and print server response.
heloCommand = 'HELO Alice\r\n'
ssl_clientSocket.send(heloCommand)
recv1 = ssl_clientSocket.recv(1024)
print recv1

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv1[:3] != '250':
    print '250 reply not received from server.'

# Send MAIL FROM command and print server response.
mailFromCommand = 'MAIL From: wgimson@gmail.com\r\n'
ssl_clientSocket.send(mailFromCommand)
recv2 = ssl_clientSocket.recv(1024)
print recv2

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv2[:3] != '250':
    print '250 reply not received from server.'

# Send RCPT TO command and print server response.
rcptToCommand = 'RCPT To: macyali@gmail.com\r\n'
ssl_clientSocket.send(rcptToCommand)
recv3 = ssl_clientSocket.recv(1024)
print recv3

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv3[:3] != '250':
    print '250 reply not received from server.'

# Send DATA command and print server response.
dataCommand = 'DATA\r\n'
ssl_clientSocket.send(dataCommand)
recv4 = ssl_clientSocket.recv(1024)
print recv4

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv4[:3] != '250':
    print '250 reply not received from server.'

# Send message data.
ssl_clientSocket.send(msg)

# Message ends with a single period.
ssl_clientSocket.send(endmsg)

# Send QUIT command and get server response.
quitCommand = 'QUIT\r\n'
ssl_clientSocket.send(quitCommand)
recv5 = ssl_clientSocket.recv(I1024)
print recv5

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv5[:3] != '221':
    print '221 reply not received from server.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:54:29.093

您正在连接到端口 587，这是 STARTTLS 的端口。使用 SMTPS 时（即在任何其他通信之前包装套接字），您需要连接到端口 465 而不是端口 587。如果您使用 STARTTLS，则在使用`STARTTLS`命令并收到`220`对它的响应之后，稍后包装套接字。做完之后`STARTTLS`，你应该再做`HELO`一次，因为服务器应该忘记之前发生的任何事情`STARTTLS`。

无论哪种情况，smtp.google.com 端口 465 和 587 上的服务器仍然不会返回对该命令的`250`响应`MAIL`，因为它们要求您在发送邮件之前进行身份验证。相反，您会收到`530`回复。您需要使用`AUTH`带有 gmail.com 凭据的命令进行身份验证，然后才能`MAIL`在这些服务器上成功使用。

如果您不想进行身份验证，并且根据您需要做什么的详细信息，您可以尝试使用在 gmail.com 的 MX 记录中找到的服务器的端口 25。目前，服务器是 gmail-smtp-in.l.google.com 并支持 STARTTLS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T02:47:04.397

```
 recv5 = ssl_clientSocket.recv(I1024) 
```

`I`端口号中有一个，这是导致您的问题吗？或者你已经修复了那个部分？

# python - 使用占位符使用 python mysqldb 删除 mysql 中的行代码

> ID：12549599
> 
> 赞同：0
> 
> 时间：2012-09-23T03:55:39.173
> 
> 标签：python, mysql-python

```
conn = MySQLdb.connect(hostip, username, password, dbname)
cur = conn.cursor()
tablename = raw_input("Choose your table name: ")
if tablename:
cur.execute("SELECT * FROM %s" % tablename)
rows = cur.fetchall()

desc = cur.description
fields = [j[0] for j in desc]

for row in rows:
    for kword in dust:
        for fs in fields:
            cur.execute("SELECT * FROM %s WHERE %s LIKE '%%s%'" % (tablename, fs, kword))

conn.close() 
```

#

像简单的代码一样，我想在 mysqldb 中传递参数 use %% PlaceHolder ，但它不起作用，有人能帮我解决这句话吗？'%%s%' ，第一个和最后一个 '%' 是使用 'like' 的 sql 语法 非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:17:06.230

使用 %s 和 {} 格式化字符串有两种方式，示例如下：

```
print "key:%(key)s value:%(value)s" % {"key":"key1","value":"value1"}
print "{{keep me}} key:{key} value:{value}".format(**{"key":"key1","value":"value1"}) 
```

要解决您的问题：

```
>>> "SELECT * FROM {tablename} WHERE {field} LIKE '%{keyword}%'".format(**{"tablename":"UserTable","field":"NameField","keyword":"Wuliang"})
"SELECT * FROM UserTable WHERE NameField LIKE '%Wuliang%'" 
```

# sms - Clickatell 替代 SMS-Gateway？

> ID：12549601
> 
> 赞同：12
> 
> 时间：2012-09-23T03:56:33.703
> 
> 标签：sms, sms-gateway, bulksms

我们即将上线，但 Clickatell 似乎有问题。计费和服务器问题！！

快速的谷歌搜索显示了很长的问题记录。

然而，他们一开始确实给人留下了很好的印象，但现在我们根本不确定——他们似乎并不稳定！

那么，哪个**可靠的**SMS 网关可以让我向以色列发送简单的英文 SMS（通过 HTTP API 以编程方式）？

到目前为止看到：

*   [http://www.bulksms.com/](http://www.bulksms.com/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T20:12:58.007

*免责声明，我在 Nexmo 兼职做开发人员宣传。*

如果您正在寻找一种 API 来发送具有广泛全球影响力和高交付率的 SMS，您应该查看[Nexmo](http://nexmo.com)。

我不记得确切的数字，但是对于超过 200 个国家/800 个运营商（我认为现在更像是 1K）的传出 SMS 是受支持的。您似乎不需要传入，但如果需要，您可以获得 14 个（这个数字也在增长）国家的传入号码。

至于可靠性，我相信 Nexmo 是唯一[发布交付统计信息](https://dashboard.nexmo.com/ratios/public)的 SMS 提供商。我在这里粘贴了以色列的交货状态：

```
Network         | Success Ratio | DLR Ratio
42503 Pelephone | 91.47         | 99.99
42502 Cellcom   | 92.01         | 99.95
42501 Orange    | 93.14         | 99.97 
```

成功率是发送到手机的消息，DLR 比率是导致发送回执的消息 - 因此对于 Pelephone，99.99% 的情况下，您的应用程序将收到通知消息状态的报告，即使它不是 91.47 的一部分消息成功传送到手机的百分比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T00:32:07.757

对于高质量的 SMS 服务，您应该查看[我的雇主网站](http://www.vianett.com)。考虑启用交付报告回调。这将在您的服务器上触发一个脚本，其中包含有关消息是否以及何时成功传递到用户电话的信息。

PHP 示例：

```
<?php

// Register here to get a username and password:
// http://www.vianett.com/en/free-demonstration-account

if (vianett_sendsms('username', 'password', 'example', '+4412345678', 'Hello world', $error)) {
    echo 'Success!';
} else {
    echo $error;
}

function vianett_sendsms($username, $password, $from, $to, $msg, &$response=null) {
    $url = 'https://smsc.vianett.no/v3/send.ashx';
    $data = array(
        'user'  => $username,
        'pass'  => $password,
        'src'   => $from,
        'dst'   => $to,
        'msg'   => $msg
    );
    $qs = http_build_query($data);
    $response = file_get_contents($url.'?'.$qs);
    return $response == '200|OK';
} 
```

# c++ - 将两个数组排序为一个组合数组

> ID：12549603
> 
> 赞同：3
> 
> 时间：2012-09-23T03:57:03.220
> 
> 标签：c++, algorithm, mergesort

我已经有几年没有上过任何编程课程了，所以请原谅任何初学者的错误/做某事的方法。我喜欢对未来的建议。使用下面的代码，我试图检查两个数组的值（已经排序）并将它们放入一个组合数组中。我的解决方案，无论多么低效/草率，是使用 for 循环来比较每个数组在 j 处的索引的内容，然后将较低的值分配给 combineArray 的索引 i，将较高的值分配给索引 i+1。我将 i 增加 2 以避免覆盖前一个循环的索引。

```
int sortedArray1 [5] = {11, 33, 55, 77, 99};
int sortedArray2 [5] = {22, 44, 66, 88, 00};
combinedSize = 10;
int *combinedArray;
combinedArray = new int[combinedSize];
    for(int i = 0; i <= combinedSize; i+=2)
{
    for(int j = 0; j <= 5; j++)
    {
        if(sortedArray1[j] < sortedArray2[j])
        {
            combinedArray[i] = sortedArray1[j];
            combinedArray[i+1] = sortedArray2[j];
        }
        else if(sortedArray1[j] > sortedArray2[j])
        {
            combinedArray[i] = sortedArray2[j];
            combinedArray[i+1] = sortedArray1[j];
        }
        else if(sortedArray1[j] = sortedArray2[j])
        {
            combinedArray[i] = sortedArray1[j];
            combinedArray[i+1] = sortedArray2[j];
        }
    }
}

for(int i = 0; i < combinedSize; i++)
{
    cout << combinedArray[i];
    cout << " ";
} 
```

我的结果是这样的

```
Sorted Array 1 contents: 11 33 55 77 99
Sorted Array 2 contents: 0 22 44 66 88
5 77 5 77 5 77 5 77 5 77 Press any key to continue . . . 
```

在我缺乏经验的头脑中，排序的实现看起来不错，所以我不确定为什么我会得到这个糟糕的输出。建议会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:10:54.590

那这个呢：

```
int i=0,j=0,k=0;
while(i<5 && j<5)
     {
        if(sortedArray1[i] < sortedArray2[j])
         {
           combinedArray[k]=sortedArray1[i];
            i++;
          }
       else
         {
           combinedArray[k]=sortedArray2[j];
           j++;
          }
      k++;
     }
   while(i<5)
     {
           combinedArray[k]=sortedArray1[i];
           i++;k++;
          }
   while(j<5)
     {
           combinedArray[k]=sortedArray2[j];
           j++;  k++;

          } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T04:26:58.660

首先，在如何使用 C++ 方面存在一些直接的问题：

*   您使用`=`而不是`==`进行相等性检查（因此导致不希望的值分配和 if 条件在不应该返回 true 时返回）；
*   您的外循环上边界定义为`i <= 10`，而正确的边界检查将是`i < 10`;
*   在函数结束时出现内存泄漏，因为您未能取消分配内存。最后你需要一个`delete [] combinedArray`。

其次，您的外循环遍历目标数组的所有值，并且**在每个步骤中**使用一个内循环遍历源数组的所有值。那不是你想要的。你想要的是**一个循环**`j=0`，从源数组开始计数`j<5`并遍历源数组。然后将目标数组中的位置确定为`2*j`和`2*j+1`，并且不需要内部循环。

第三，正如评论中所解释的，排序列表合并的正确实现需要两个独立的计数器`j1`和`j2`. 但是，您当前的输入是硬连线到代码中的，如果您替换`00`为`100`，您当前的算法（在进行上述更正之后）实际上将适用于给定的输入。

最后，但不太重要的是，我想知道为什么您的目标数组使用`new`. 只要您处理的是小数组，您就可以像源数组一样在堆栈上分配它。但是，如果您在堆上分配它，最好使用 a `std::unique_ptr<>`，可能与`std::array<>`. 然后，您将免费获得取消分配，而不必考虑`delete []`在函数末尾添加语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T04:29:13.290

甚至在查看实现之前，检查算法并用笔和纸写下来。弹出的第一件事是您假设结果中的前两个元素将来自每个源数组。不一定是这种情况，考虑两个数组，其中一个中的所有元素都小于另一个中的所有元素以及预期的结果：

```
int a[] = { 1, 2, 3 };
int b[] = { 4, 5, 6 }; 
```

如果要对结果进行排序，则前三个元素都来自第一个数组。考虑到这一点，想想你对数据的真正了解。特别是，两个数组都已排序，这意味着第一个元素将小于相应数组中的其余元素。这意味着较小的元素是较小的头部。通过将该元素放入结果中，您可以将问题减少到更小的集合。你有`a' = { 2, 3 }`,`b = { 4, 5, 6 }`和`res = { 1 }`一个新的问题是找到`res`知道`a'`和`b`排序的第二个元素。

在纸上弄清楚您需要做什么，然后将其映射到代码应该是直截了当的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T07:30:56.890

因此，我修改了您的代码以使其正常工作。实际上，为两个排序数组设置两个指针/索引是个好主意。这样您就可以在将相应的指针添加到您的 combineArray 后更新它。如果您不理解此代码的任何部分，请告诉我。谢谢。

```
 int sortedArray1 [5] = {11, 33, 55, 77, 99};
    int sortedArray2 [5] = {0, 22, 44, 66, 88}; 
    int combinedSize = 10;
    int *combinedArray;
    combinedArray = new int[combinedSize];
    int j = 0;
    int k = 0;
    for(int i = 0; i < combinedSize; i++)
    {
            if (j < 5 && k < 5) {
                    if (sortedArray1[j] < sortedArray2[k]) {
                            combinedArray[i] = sortedArray1[j];
                            j++;
                    } else {                  
                            combinedArray[i] = sortedArray2[k];
                            k++;
                    }                         
            } 
            else if (j < 5) {
                    combinedArray[i] = sortedArray1[j];
                    j++;
            }                         
            else {
                    combinedArray[i] = sortedArray2[k];
                    k++;
            }                         
    }

    for(int i = 0; i < combinedSize; i++)
    {
        cout << combinedArray[i];
        cout << " ";
    }
    cout<<endl; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T04:08:17.340

的`else if(sortedArray1[j] = sortedArray2[j])`，你的意思是`else if(sortedArray1[j] == sortedArray2[j])`？

前一个会将 sortedArray2[j] 的值分配给 sortedArray1[j] - 这就是你得到的原因`5 77 5 77...`

但是`5`从哪里来？两者都没有5 `sortedArray`，但我发现`for(int j = 0; j <= 5; j++)`一定有问题。大小`N`数组的最高索引`N-1`不是`N`在 C/C++ 中（但不是在 Basic 中）.. 所以`j<5`用作条件，否则您可能会遇到一些难以解释或预测的情况..

毕竟，您的算法本身存在问题，每次外循环循环时，它都会最后比较两个数组中的最后一个元素，这使得输出重复两个数字。

因此，您还需要更正您的算法，请参阅[合并排序](http://en.wikipedia.org/wiki/Merge_sort)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-07T21:18:09.533

稍微不同的方法，恕我直言，它更干净：

```
//A is the first array, m its length
//B is the second array, n its length
printSortedAndMerged(int A[], int m, int B[], int n){
    int c[n+m];
    int i=0, j=0;

    for(int k=0; k < n+m; k++){

        if(i < m && j < n){
            if(A[i] < B[j]){
                c[k] = A[i];
                i++;
            }
            else{
                c[k] = B[j];
                j++;
            }
            continue; //jump to next iteration
        }

        if(i < m){ // && ~(j < n)
        //we already completely traversed B[]
            c[k] = A[i];
            i++;
            continue;
        }

        if(j < n){ // %% ~(i < m)
        //we already completely traversed A[]
            c[k] = B[j];
            j++;
            continue;
        }

        //we should never reach this
        cout << "Wow, something wrong happened!" << endl;
}//for

for(int i=0; i<n+m; i++){
    cout << c[i] << endl;
}
} 
```

希望能帮助到你。

# php - 如果满足条件，则存储登录名和密码

> ID：12549604
> 
> 赞同：-1
> 
> 时间：2012-09-23T03:57:21.250
> 
> 标签：php, session, cookies, passwords

成功登录后，我想将用户名存储在 cookie 中，如果用户已在数据库中标记为管理员，我希望它以某种方式存储用户名和密码，我已阅读存储密码在 cookie 中是不安全的，但还能怎么做。这是一个 jQuery 移动网站。请参阅[http://jsfiddle.net/jamesil/4VAJc/](http://jsfiddle.net/jamesil/4VAJc/)这是我目前所拥有的，目前存储用户名和密码并使用 js。也许这需要在 PHP 中完成？目前，如果我只想向管理员展示一些东西，我会在其中包装它

```
<?php 
$is_admin=(isset($_SESSION) && isset($_SESSION['is_admin_flag']) && $_SESSION['is_admin_flag']=='t');
?>
Some code
<?php } ?> 
```

非常感谢任何反馈，我对 PHP 也很陌生。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:10:46.817

是的，在客户端存储密码是一种非常不安全的做法，你应该在服务器端生成一个令牌。我的意思是使用任何密码算法的唯一标识符，即（，，，`md5`）。`sha1``sha256`

例如，使用连接的用户名和密码信息以及一些随机信息创建一个令牌：

```
md5($_SESSION['username'] . $_SESSION['password'] . time() . microtime()) 
```

然后，将此令牌存储在数据库中，并将此令牌保存在用户 cookie 中。

此令牌是用户已通过身份验证的证明。因此，在此之后，在客户端，每个请求都应在`http`标头或任何其他位置发送令牌，而在后端，它将与在数据库中排序的令牌进行比较。

如果它们匹配，那么您确定请求来自正确的人。

**另一件事，使令牌在最后一次请求后一段时间（可能是 30 分钟）后过期。**

# c# - 创建 List64 类

> ID：12549613
> 
> 赞同：0
> 
> 时间：2012-09-23T03:59:15.417
> 
> 标签：c#, .net

我决定我需要创建一个 64 位列表来满足我的程序的一些需求，即使用 long 作为索引的能力。我查看了实现 List 的 Mono 代码，并得出一个普遍的结论，即无论我选择什么，我都应该对 IList 进行变体（使用 long）来使用它。

现在我的问题是，您认为这种设计的好方法是什么？我目前正在考虑两种可能性-> 由于 List 只是 Array 类的包装器，我可以重写 List 类以使用巨型数组；或者我可以编写类以使用列表列表来根据需要维护和增长数据。第一个问题似乎是选择了一个太大的数组，第二个问题是试图让 Remove() 和其他各种方法工作，而我可能需要执行大量内存复制以保持所有内容正确索引。你的意见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T04:13:00.207

由于数组仅限于由 int 索引，因此无论如何您都必须使用它们的倍数。我会直接去列表列表。请注意，CLR 中的所有对象都受到 2Gb 单块内存的限制以进行分配。

旁注：

*   如果您计划在中间实现支持插入/删除操作的真正 4GB+ 线性阵列，您只需调整您的性能预期 - 任何插入或删除都会很慢。在这样的规模下，仅附加数组可能是合理的方法。
*   如果添加/删除很重要，请考虑其他一些数据结构，即[B-tree](http://en.wikipedia.org/wiki/B-tree)。在大多数情况下，您会牺牲恒定的访问时间，但会获得合理的收益。
*   如果您的数组稀疏，请考虑使用简单的 Dictionary 代替或作为后备存储。

[这是有关大型阵列](http://blogs.msdn.com/b/joshwil/archive/2005/08/10/450202.aspx)的更详细讨论的链接。

# keyboard - 检测数字键盘的存在/不存在？

> ID：12549614
> 
> 赞同：1
> 
> 时间：2012-09-23T04:00:36.357
> 
> 标签：keyboard

是否可以确定系统是否连接了数字小键盘？台式机键盘通常具有数字键盘，而笔记本电脑通常没有（尽管它们将数字键盘键放在普通键盘中，并使用 Num Lock 激活）。操作系统是否知道数字键盘的键是否在物理上是分开的？如果是这样，这些信息是否会以某种方式暴露给程序？

了解这一点有助于确定适当的默认键绑定。如果它不可用，那么我将不得不选择一个保守的默认值（不使用数字键盘），这意味着一个稍微令人讨厌的额外配置步骤可以让拥有单独数字键盘的人获得更好的行为，或者我必须选择一个非保守的默认设置并激怒没有数字键盘的人...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T04:03:39.393

我不相信您可以查询键盘功能，但 iirc 有一个“数字键盘”键。;)

您应该能够查询`Num`是打开还是关闭，但关闭它并不是知道没有数字键盘的万无一失的方法。

您可能会做的是检测小键盘上被按下的键并潜意识地欺骗用户这样做，这将识别所述特征。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T22:49:45.713

安装这些软件包

```
sudo apt-get install -y numlockx xdotool x11-utils 
```

然后使用这样的脚本

```
#!/bin/bash
cd
numlockx off &
rm -f s1.sh s2.sh out
 echo -e "#\041/bin/bash
sleep 2
xdotool key KP_5 | xev > out
exit 0" >> s1.sh
chmod +x s1.sh
echo -e "#\041/bin/bash
sleep 9
killall -9 xev
sleep 5
xdotool key BackSpace
exit 0" >> s2.sh
chmod +x s2.sh

bash s1.sh &
bash s2.sh

rm -f s1.sh s2.sh
if [[ "$(cat out | grep "keycode 84" | grep "KP_Begin" )" != "" ]]; then
  echo "Separated Numpad Detected!"
fi
rm out
exit 0 
```

因为在带有真实键盘的真实键盘中，当 numlock 未激活时，它是`KP_Begin`numpad 键的键码。`KP_5`在 3 台电脑上进行了测试，其中一台带有单独的键盘 e 2 没有。

# java - 将 Checkout 请求发布到 Google Checkout API 时出现 400 响应

> ID：12549619
> 
> 赞同：0
> 
> 时间：2012-09-23T04:01:51.983
> 
> 标签：java, xml, google-checkout

虽然我过去集成了几个支付处理器和购物车，但这个 Google Checkout API 集成对我来说并不顺利。即使我使用诊断链接，我也会收到来自 Google 的 400 响应。我确定我的 URL 有问题，但我似乎无法弄清楚是什么。我正在使用沙盒商家 ID 和密钥。

有人可以帮我看看我在做什么来得到这个 400 响应吗？

我正在使用 Java 并从服务器发布，因此我正在调用服务器到服务器 API 链接：

```
https://sandbox.google.com/checkout/api/checkout/v2/merchantCheckout/Merchant/%SANDBOXID%

<?xml version="1.0" encoding="UTF-8"?>
<checkout-shopping-cart xmlns="http://checkout.google.com/schema/2">
    <shopping-cart>
        <merchant-private-data>
            <merchant-note>8Ra8fw4tBaOdP4v3lseykKO6crR0dFqhzWV0EmqKuVuQaN1w0mcScAAR71pbexXlVnrwpP8wNzehuc7wz3KO9JM6xfedW8106olarCZcZBs=</merchant-note>
        </merchant-private-data>
        <items>
            <item-name>MyName : MySubname</item-name>
            <item-description>Weigh in on this year's...</item-description>
            <unit-price currency="USD">100</unit-price>
            <quantity>1</quantity>
         </items>
     </shopping-cart>
</checkout-shopping-cart> 
```

我正在使用 Java 发布这些数据。在下面的代码中，上面的url是代码中的sandboxLink，checkReq是XML post...

```
 public static String postCheckoutReqData(String userID, String gameName, boolean test) {

    String checkRequest = GoogleCheckoutXML.getCheckoutRequestXML(userID, gameName);

    if(checkRequest.indexOf("error,") != -1) return checkRequest;

    URL url = null;
    try {           
        String baseCodeString;          
        if(test) {
            url = new URL(GoogleCheckoutXML.sandboxLink + GoogleCheckoutXML.sandboxMerchID);
            baseCodeString = GoogleCheckoutXML.sandboxMerchID + ":" + GoogleCheckoutXML.sandboxMerchKey;
        }
        else {
            url = new URL(GoogleCheckoutXML.productionLink + GoogleCheckoutXML.merchantID);
            baseCodeString = GoogleCheckoutXML.merchantID + ":" + GoogleCheckoutXML.merchantKey;
        }
        //url = new URL(GoogleCheckoutXML.diagnose);
        byte[] bytes = (baseCodeString.getBytes());
        baseCodeString = new Base64().encodeAsString(bytes);
        URLConnection conn = url.openConnection();          
        conn.setDoOutput(true);
        conn.setRequestProperty("Authorization", "Basic " + baseCodeString);
        conn.setRequestProperty("Content-Type", "application/xml; charset=UTF-8");
        conn.setRequestProperty("Accept", "application/xml; charset=UTF-8");

        OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
        wr.write(checkRequest);
        wr.flush();

        // Get the response
        BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String line;
        while ((line = rd.readLine()) != null) {
            line = line + rd.readLine();
        }

        wr.close();
        rd.close();
        return line;
    } 
    catch (Exception e) {   
        e.printStackTrace();
        return "error,Purchase Error posting communcation failed";
    } 
```

Tomcat 中的实际堆栈跟踪是：

```
java.io.IOException: Server returned HTTP response code: 400 for URL: https://sandbox.google.com/checkout/api/checkout/v2/merchantCheckout/Merchant/[withheld]
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1612)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
at com.[withheld]..GoogleCheckoutXML.postCheckoutReqData(GoogleCheckoutXML.java:194)
at com.[withheld]...l.getCheckoutLink(DubQueryImpl.java:270)
at com.[withheld]....GenerateCheckoutLinkServlet.doGet(GenerateCheckoutLinkServlet.java:56)
at com.[withheld]...doPost(GenerateCheckoutLinkServlet.java:73)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:54:28.947

我想我已经解决了一个类似的问题 - 它可能是也可能不是你的......

1.  检查返回码：

    int code = conn.getResponseCode(); // 整数（在上面给出的情况下为 400） \String msg = conn.getResponseMessage(); // 字符串（在您上面给出的情况下将是“错误请求”

2.  检查更多细节

    InputStream in = new BufferedInputStream(conn.getErrorStream());

    阅读以查看提供了哪些进一步的信息 - 我发现它非常有帮助！

3.  就我而言，我精心准备的 xml 在途中某处丢失了引号，`<xml version="1.0" ... >`一开始就破坏了右边，从那时起就造成了严重破坏......

# google-visualization - Google Viz 仪表板与图表动画一起使用？

> ID：12549621
> 
> 赞同：1
> 
> 时间：2012-09-23T04:02:27.207
> 
> 标签：google-visualization

**Google.Visualization.Dashboard**是否与开箱即用的图表动画一起使用？在下面的代码中，我将 a 绑定`CategoryFilter`到 an`AreaChart`并指定了动画选项 - 仪表板工作正常，但在数据更改时没有动画（通过控件选择新值）。如果我遗漏了什么，请告诉我，谷歌教程不包括[仪表板或 ChartWrapper](https://developers.google.com/chart/interactive/docs/animation)方法（我正在使用）。

```
var control1 = new google.visualization.ControlWrapper({
        'controlType' : 'CategoryFilter',
        'containerId' : 'control1',
        'options' : {
            'filterColumnLabel' : 'ThisColumn',
            'ui' : {
                'labelStacking' : 'vertical',
                'allowTyping' : false,
                'allowMultiple' : false
            }
        }
    });

var areaChart = new google.visualization.ChartWrapper({
    'chartType' : 'AreaChart',
    'containerId' : 'chart1',
    'options' : {
        'animation' : {
            'duration' : 4000
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T17:30:37.207

动画作品。我不知道您使用的是哪种数据，所以我用面积图设置了一个示例，但作为控件使用了 NumberRangeFilter。

请参阅[jsBin 的演示](http://jsbin.com/OjaTebO/1/edit)。

# javascript - node.js 脚本可以在命令行下工作，但不能在浏览器中工作？

> ID：12549624
> 
> 赞同：0
> 
> 时间：2012-09-23T04:03:05.170
> 
> 标签：javascript, linux, node.js, ubuntu, amazon-ec2

我启动了运行 ubuntu 12.04 的亚马逊 ec2 实例

然后我按照说明从这里安装 node.js [http://howtonode.org/how-to-install-nodejs](http://howtonode.org/how-to-install-nodejs)

```
sudo apt-get install g++ curl libssl-dev apache2-utils
sudo apt-get install git-core

git clone git://github.com/ry/node.git
cd node
./configure
make
sudo make install 
```

然后我使用示例代码制作`hello.js`

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello Node.js\n');
}).listen(8124, "127.0.0.1");
console.log('Server running at http://127.0.0.1:8124/'); 
```

然后我跑了`hello.js`

```
/var/www$ node hello.js
Server running at http://127.0.0.1:8124/ 
```

但是，当我尝试从 url 访问它时，`http://ec2-***.compute-1.amazonaws.com:8124/`我从浏览器中得到一个错误页面。

关于如何让它显示在浏览器中的任何建议？

**编辑** 更改上面的代码行后我仍然遇到这个问题

```
}).listen(8124, "127.0.0.1"); 
```

对此

```
}).listen(8124); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T04:07:28.947

127.0.0.1 是环回地址。只有主机可以访问它。如果您想监听任何可用的 IP，请不要指定该参数。否则，请指定您要侦听的真实 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-31T04:56:03.100

我也有同样的问题，卸载Skype对我有用，您还可以搜索一些强制Skype移动到其他端口的设置。

# delphi - Delphi Web Script (DWScript) 将脚本方法链接到外部控制事件

> ID：12549625
> 
> 赞同：5
> 
> 时间：2012-09-23T04:03:32.660
> 
> 标签：delphi, events, dwscript

我想知道 DWScript 是否支持使用脚本方法作为 Delphi 表单上的控件的事件处理程序。例如，我想将 TButton OnClick 事件链接到脚本中存在的方法。

我可以通过调用返回 TMethod 对象的 GetProcMethod 来使用 RemObjects Delphi 脚本引擎执行此操作。然后我使用 SetMethodProp 将脚本方法分配给按钮的 OnClick 事件。

```
procedure LinkMethod(SourceMethodName: String; Instance: TObject; ScriptMethodName: String);
var
  ScriptMethod: TMethod;
begin
  ScriptMethod := ScriptEngine.GetProcMethod(ScripMethodName);

  SetMethodProp(Instance, SourceMethodName, ScriptMethod);
end; 
```

我想在 DWScript 而不是 Rem 对象脚本引擎中执行此操作，因为它执行我需要的其他一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:03:17.227

我决定改用 RemObjects。它是最容易使用的并且可以满足我的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:21:45.350

AFAIK DWScript 不直接支持您要实现的目标，但可以以不同的方式实现。我将尝试发布一些如何实现它的源代码，但您可能需要根据您的需要对其进行调整。

首先，声明一个小包装类，它应该为每个脚本方法分开：

```
type
  TDwsMethod = class
  private
    FDoExecute: TNotifyEvent;
    FScriptText: string;
    FDws: TDelphiWebScript;
    FLastResult: string;
    FMethod: TMethod;
  protected
    procedure Execute(Sender: TObject);
  public
    constructor Create(const AScriptText: string); virtual;
    destructor Destroy; override;

    property Method: TMethod read FMethod;
    property LastResult: string read FLastResult;
  published
    property DoExecute: TNotifyEvent read FDoExecute write FDoExecute;
  end;

constructor TDwsMethod.Create(const AScriptText: string);
begin
  inherited Create();
  FDoExecute := Execute;
  FScriptText := AScriptText;
  FDws := TDelphiWebScript.Create(nil);
  FMethod := GetMethodProp(Self, 'DoExecute');
end;

destructor TDwsMethod.Destroy;
begin
  FDws.Free;
  inherited Destroy;
end;

procedure TDwsMethod.Execute(Sender: TObject);
begin
  ShowMessage('My Method executed. Value: ' + FDws.Compile(FScriptText).Execute().Result.ToString);
end; 
```

现在我们必须在代码中的某处创建这个类的实例（例如在表单的创​​建事件中）：

```
procedure TMainForm.FormCreate(Sender: TObject);
begin
  FDWSMethod := TDwsMethod.Create('PrintLn(100);'); //in constructor we pass script text which needs to be executed
  //now we can set form's mainclick event to our DWS method
  SetMethodProp(Self, 'MainClick', FDWSMethod.Method);
end;

procedure TMainForm.FormDestroy(Sender: TObject);
begin
  FDWSMethod.Free;
end; 
```

现在，当我们调用 MainClick 时，我们的脚本被编译并执行：

![从表单事件执行的脚本方法](../Images/2414ad78ea2a415a3ba8743da61e3a94.png)

# visual-studio - 在 VB6.0 中使用 ADODC 从 DataGrid 控件中搜索数据

> ID：12549627
> 
> 赞同：2
> 
> 时间：2012-09-23T04:03:43.677
> 
> 标签：visual-studio, datagrid, vb6

我是一名学生，正在做我最后一年的迷你项目，并且面临与在数据网格中搜索数据相关的问题。我得到的错误是：

> 运行时错误：“3001”参数类型错误、超出可接受范围或相互冲突

代码是：

```
Private Sub Command1_Click()
Dim item As String
    Adodc1.Recordset.MoveFirst
    item = Text1.Text
    Adodc1.Recordset.Find "L_No = " & item
    If Adodc1.Recordset.EOF Then
        MsgBox "Record Set not found"
    End If
End Sub 
```

当我正在搜索的数据只是数字时，上面的代码正在工作。例如，当我根据 L_Id（许可证 ID 和整数值）搜索数据时，搜索完成，我得到了结果。当我根据 L_No 搜索数据时，L_No 是一个许可证号，一个由数字和字母组成的字符串值，我得到了上述错误。

我必须解析值是 text1.text 还是做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:14:50.167

当您搜索的字段不是数字类型时，您需要用单引号将其分隔：

```
Adodc1.Recordset.Find "L_No = '" & item & "'" 
```

# c - 在 C 错误消息中返回结构数据类型

> ID：12549631
> 
> 赞同：1
> 
> 时间：2012-09-23T04:04:23.400
> 
> 标签：c, struct, arguments, return

请参阅我以前的帖子： [https ://stackoverflow.com/questions/12548828/trying-to-save-command-line-arguments-in-a-dynamic-array-in-c](https://stackoverflow.com/questions/12548828/trying-to-save-command-line-arguments-in-a-dynamic-array-in-c)

所以，我想返回一个 char* 数组和其中的元素总数。我无法找到直接获取元素总数的方法，因为我不知道是否可以遍历数组并在发现 NULL 时停止，这可能吗？我的意思是，如果它超出了数组的范围，它会给出一个 NULL 值吗？否则，我尝试按如下方式创建结构： struct name_vertex 它有两个变量 char** vertex_name 和 int curr_size 并根据更改代码，我收到错误消息 **“expected =, ,, ;, asm or __attribute__ before unique_name** ” 我不明白这是什么意思..我检查了我的 .h 文件，我没有遗漏任何文件；或 , 或 =。

```
name_vertex* unique_name(char *argv[], int argc)
     {
       int i, j, curr_max, index, counter, flag;
       char *temp;
       name_vertex* structure_p;

       /*
    *Allocating of size 4 char*. Trying to make it a string pointer array
    *Not sure if this is the correct way
    */  
       structure_p= malloc(4*sizeof(name_vertex));
       /*
    *Setting the first two elements of the allocation to 
        *the second and third element of the command line argv 
    *as you may know, the first one is the file name
    */
       structure_p.vertex_name[0] = argv[1];
       structure_p.vertex_name[1] = argv[2];
       index=2;  //Index variable for the dynamic array
       curr_max = 3;   //current total number of elements, 1 < total allocated as array element count starts at 0
       structure_p.curr_size = 4;  //Allocation amount int literal, count starts at 1

       /*
    *The outer loops starts at four as it is for the argv[] and the first one is irrelevent
    *The outer loop essentially jumps 3 elements at a time as 
    *I am ultimately going to use this for a graph data structure that 
    *I am trying to create. So this array will store all the unique names of vertices
    *so it makes setting the names when creating  vertices easy
    * Also will tell me how many unique vertices to create.
    *The inner loop only runs once and it checks if there is a name that alreaady exist.
    *It only takes into cosideration the first 2 out of the 3 that are considered in the outer loop
    *The the third one is going to be an integer value for the edge weight of two vertices 
    *so don't need it right now
    */
       for(i=4; i<argc; i+=3)
     {
       for(j=0; j<1; j++)
         {
               flag = 0;
           counter = 0;

           //Compare first argv[i] with all the elements
           //of vertex_name array
           while(counter<index)
         {
           if(strcmp(argv[i], stucture_p.vertex_name[counter]) == 0)
             {
               flag = 1;
               break;
             }
           counter++;
         }
           //If no match found, allocates some memory
           //adds the element to vertex_name
           //Increments index, curr_size, curr_max
           if(flag == 0)
             {
           temp = realloc(structure_p, (structure_p.curr_size + 2) * sizeof(name_vertex)); //CHECK THE SYNTAX, WANNA ADD 2 MORE ELEMENTS TO ARRAY
           structure_p = temp;
           structure_p.vertex_name[index] = argv[i];
           index++;
           structure.curr_size +=2;
           curr_max +=2;
         }

           flag = 0;   //reset flag
           counter = 0; //reset counter

           //Do the same comparison as above, but
           //this time its argv[i+1] compared
           while(counter < index)
         {
           if(strcmp(argv[i+1], structure_p.vertex_name[j]) ==0)
             {
               flag = 1;
               break;
             }
           counter++;
         }
           //If no match found, same process as before
           //Increment index, curr_size, curr_max variables
         if(flag == 0)
           {
             temp = realloc(structure.vertex_name, (structure.curr_size + 2) * sizeof(name_vertex)); //CHECK THE SYNTAX, WANNA ADD 2 MORE ELEMENTS TO ARRAY
             structure_p.vertex_name = temp;
             structure_p.vertex_name[index] = argv[i+1];
             index++;
             structure_p.curr_size += 2;
             curr_max +=2;
           }

         }
     }
       //Returning the new array
       return structure_p;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:29:36.807

`name_vertex`可能未定义或定义与您尝试使用它的方式不同。

选项1：

```
typedef struct
{
  // yada, yada, yada
} name_vertex;

name_vertex unique_name(/*etc*/)
{
  // ...
  name_vertex structure;
  // ...
  return structure;
} 
```

选项 2：

```
struct name_vertex
{
  // yada, yada, yada
};

struct name_vertex unique_name(/*etc*/)
{
  // ...
  struct name_vertex structure;
  // ...
  return structure;
} 
```

选项 3：

```
typedef struct name_vertex
{
  // yada, yada, yada
} name_vertex;

name_vertex unique_name1(/*etc*/)
{
  // ...
  name_vertex structure;
  // ...
  return structure;
}

struct name_vertex unique_name2(/*etc*/)
{
  // ...
  struct name_vertex structure;
  // ...
  return structure;
} 
```

至于用指针遍历数组，当指针超出数组边界时，它不会变成`NULL`. 您要么必须知道数组大小或指向其第一个或最后一个元素的指针（以适当者为准），要么数组本身必须在其第一个/最后一个元素中包含一个特殊值，这样您就知道何时完成了对数组的处理。没有魔法。您必须自己管理指针和数组索引。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T04:10:24.483

C 不支持从函数返回复杂数据类型。相反，您需要传入一个指向已分配结构的指针并让函数填充它，或者让函数返回一个新分配的指针。

选项1：

```
void unique_name(char *argv[], int argc, name_vertex* structure_p) {
  // fill structure_p using structure_p->field = value.
}
// In the caller:
name_vertex* structure_p = malloc(sizeof(name_vertex));
unique_name(argv, argc, structure_p);
// use structure_p
free(structure_p); 
```

选项 2：

```
name_vertex* unique_name(char *argv[], int argc) {
  // ...
  name_vertex* structure_p = malloc(sizeof(name_vertex));
  // fill structure_p using structure_p->field = value.
  return structure_p;
}

// In the caller:
name_vertex* structure_p = unique_name(argv, argc);
// use structure_p
free(structure_p); 
```

# xcode - Xcode 4.5：iphoneos 没有“com.apple.product-type.application”产品类型

> ID：12549633
> 
> 赞同：7
> 
> 时间：2012-09-23T04:04:40.203
> 
> 标签：xcode, compiler-errors, xcode4.5

我刚刚将 Xcode 升级到 4.5 版，但现在尝试在我的 iPhone 上运行它时出现此错误：

```
target specifies product type 'com.apple.product-type.application', but there's no such product type for the 'iphoneos' platform 
```

它在模拟器上运行良好，并且曾经在 4.4 版中运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-31T20:09:01.740

编辑：也可能是该项目希望您安装[http://www.iosopendev.com/](http://www.iosopendev.com/)。

我的错误是“目标指定产品类型‘com.apple.product-type.library.dynamic’，但‘iphoneos’平台没有这样的产品类型”

在适当的目录中，根据 TwiterZX 的评论，运行以下命令：

```
sudo plutil -convert json iPhoneOSProductTypes.xcspec
sudo plutil -convert json iPhoneOSPackageTypes.xcspec 
```

如果您首先在文件内容上使用 json pretty 服务，那么编辑这些文件会容易得多。

在 iPhoneOSProductTypes.xcspec 的第一个 [ 之后，粘贴：

```
{   "Type": "ProductType",
    "Identifier": "com.apple.product-type.library.dynamic",
    "Class": "PBXDynamicLibraryProductType",
    "Name": "Dynamic Library",
    "Description": "Dynamic library",
    "IconNamePrefix": "TargetPlugin",
    "DefaultTargetName": "Dynamic Library",
    "DefaultBuildProperties": {
        "FULL_PRODUCT_NAME": "$(EXECUTABLE_NAME)",
        "MACH_O_TYPE": "mh_dylib",
        "REZ_EXECUTABLE": "YES",
        "EXECUTABLE_SUFFIX": ".$(EXECUTABLE_EXTENSION)",
        "EXECUTABLE_EXTENSION": "dylib",
        "PUBLIC_HEADERS_FOLDER_PATH": "/usr/local/include",
        "PRIVATE_HEADERS_FOLDER_PATH": "/usr/local/include",
        "INSTALL_PATH": "/usr/local/lib",
        "DYLIB_INSTALL_NAME_BASE": "$(INSTALL_PATH)",
        "LD_DYLIB_INSTALL_NAME": "$(DYLIB_INSTALL_NAME_BASE:standardizepath)/$(EXECUTABLE_PATH)",
        "DYLIB_COMPATIBILITY_VERSION": "1",
        "DYLIB_CURRENT_VERSION": "1",
        "FRAMEWORK_FLAG_PREFIX": "-framework",
        "LIBRARY_FLAG_PREFIX": "-l",
        "LIBRARY_FLAG_NOSPACE": "YES",
        "STRIP_STYLE": "debugging",
        "GCC_INLINES_ARE_PRIVATE_EXTERN": "YES",
        "CODE_SIGNING_ALLOWED": "YES"
    },
    "PackageTypes": [
        "com.apple.package-type.mach-o-dylib"
    ]
}, 
```

在 iPhoneOSPackageTypes.xcspec 的第一个 [ 之后，粘贴：

```
{   "Type": "PackageType",
    "Identifier": "com.apple.package-type.mach-o-dylib",
    "Name": "Mach-O Dynamic Library",
    "Description": "Mach-O dynamic library",
    "DefaultBuildSettings": {
        "EXECUTABLE_PREFIX": "",
        "EXECUTABLE_SUFFIX": "",
        "EXECUTABLE_NAME": "$(EXECUTABLE_PREFIX)$(PRODUCT_NAME)$(EXECUTABLE_VARIANT_SUFFIX)$(EXECUTABLE_SUFFIX)",
        "EXECUTABLE_PATH": "$(EXECUTABLE_NAME)"
    },
    "ProductReference": {
        "FileType": "compiled.mach-o.dylib",
        "Name": "$(EXECUTABLE_NAME)",
        "IsLaunchable": "NO"
    }
}, 
```

现在您需要将这些文件转换回二进制文件：

```
sudo plutil -convert binary1 iPhoneOSProductTypes.xcspec
sudo plutil -convert binary1 iPhoneOSPackageTypes.xcspec 
```

应该这样做！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T11:10:56.283

您可能丢失了 XCode 规范中的应用程序部分

退出**XCode**并**转到**（对于来自 MacAppStore 的 Xcode）：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Specifications/

编辑前备份这两个文件： **`iPhoneOSPackageTypes.xcspec`** **`iPhoneOSProductTypes.xcspec`**

将此内容覆盖为**`iPhoneOSPackageTypes.xcspec`**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
<dict>
    <key>DefaultBuildSettings</key>
    <dict>
        <key>CONTENTS_FOLDER_PATH</key>
        <string>$(WRAPPER_NAME)</string>
        <key>DOCUMENTATION_FOLDER_PATH</key>
        <string>$(LOCALIZED_RESOURCES_FOLDER_PATH)/Documentation</string>
        <key>EXECUTABLES_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/Executables</string>
        <key>EXECUTABLE_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>EXECUTABLE_NAME</key>
        <string>$(EXECUTABLE_PREFIX)$(PRODUCT_NAME)$(EXECUTABLE_VARIANT_SUFFIX)$(EXECUTABLE_SUFFIX)</string>
        <key>EXECUTABLE_PATH</key>
        <string>$(EXECUTABLE_FOLDER_PATH)/$(EXECUTABLE_NAME)</string>
        <key>EXECUTABLE_PREFIX</key>
        <string></string>
        <key>EXECUTABLE_SUFFIX</key>
        <string></string>
        <key>FRAMEWORKS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/Frameworks</string>
        <key>INFOPLIST_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/Info.plist</string>
        <key>INFOSTRINGS_PATH</key>
        <string>$(LOCALIZED_RESOURCES_FOLDER_PATH)/InfoPlist.strings</string>
        <key>JAVA_FOLDER_PATH</key>
        <string>$(UNLOCALIZED_RESOURCES_FOLDER_PATH)/Java</string>
        <key>LOCALIZED_RESOURCES_FOLDER_PATH</key>
        <string>$(UNLOCALIZED_RESOURCES_FOLDER_PATH)/$(DEVELOPMENT_LANGUAGE).lproj</string>
        <key>PBDEVELOPMENTPLIST_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/pbdevelopment.plist</string>
        <key>PKGINFO_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/PkgInfo</string>
        <key>PLUGINS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/PlugIns</string>
        <key>PRIVATE_HEADERS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/PrivateHeaders</string>
        <key>PUBLIC_HEADERS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/Headers</string>
        <key>SCRIPTS_FOLDER_PATH</key>
        <string>$(UNLOCALIZED_RESOURCES_FOLDER_PATH)/Scripts</string>
        <key>SHALLOW_BUNDLE</key>
        <string>YES</string>
        <key>SHARED_FRAMEWORKS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/SharedFrameworks</string>
        <key>SHARED_SUPPORT_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/SharedSupport</string>
        <key>UNLOCALIZED_RESOURCES_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>VERSIONPLIST_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)/version.plist</string>
        <key>WRAPPER_NAME</key>
        <string>$(WRAPPER_PREFIX)$(PRODUCT_NAME)$(WRAPPER_SUFFIX)</string>
        <key>WRAPPER_PREFIX</key>
        <string></string>
        <key>WRAPPER_SUFFIX</key>
        <string>.bundle</string>
    </dict>
    <key>Description</key>
    <string>Wrapper</string>
    <key>Identifier</key>
    <string>com.apple.package-type.wrapper</string>
    <key>Name</key>
    <string>Wrapper</string>
    <key>ProductReference</key>
    <dict>
        <key>FileType</key>
        <string>wrapper.cfbundle</string>
        <key>IsLaunchable</key>
        <string>NO</string>
        <key>Name</key>
        <string>$(WRAPPER_NAME)</string>
    </dict>
    <key>Type</key>
    <string>PackageType</string>
</dict>
<dict>
    <key>BasedOn</key>
    <string>com.apple.package-type.wrapper</string>
    <key>DefaultBuildSettings</key>
    <dict>
        <key>GENERATE_PKGINFO_FILE</key>
        <string>YES</string>
    </dict>
    <key>Description</key>
    <string>Application Wrapper</string>
    <key>Identifier</key>
    <string>com.apple.package-type.wrapper.application</string>
    <key>Name</key>
    <string>Application Wrapper</string>
    <key>ProductReference</key>
    <dict>
        <key>FileType</key>
        <string>wrapper.application</string>
        <key>IsLaunchable</key>
        <string>YES</string>
        <key>Name</key>
        <string>$(WRAPPER_NAME)</string>
    </dict>
    <key>Type</key>
    <string>PackageType</string>
</dict>
<dict>
    <key>BasedOn</key>
    <string>com.apple.package-type.wrapper</string>
    <key>DefaultBuildSettings</key>
    <dict>
        <key>CONTENTS_FOLDER_PATH</key>
        <string>$(WRAPPER_NAME)/Contents</string>
        <key>DOCUMENTATION_FOLDER_PATH</key>
        <string>$(LOCALIZED_RESOURCES_FOLDER_PATH)</string>
        <key>EXECUTABLES_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>EXECUTABLE_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>FRAMEWORKS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>INFOPLIST_PATH</key>
        <string>$(WRAPPER_NAME)/ContentInfo.plist</string>
        <key>INFOSTRINGS_PATH</key>
        <string>$(LOCALIZED_RESOURCES_FOLDER_PATH)/ContentInfo.strings</string>
        <key>JAVA_FOLDER_PATH</key>
        <string>$(UNLOCALIZED_RESOURCES_FOLDER_PATH)</string>
        <key>LOCALIZED_RESOURCES_FOLDER_PATH</key>
        <string>$(UNLOCALIZED_RESOURCES_FOLDER_PATH)/$(DEVELOPMENT_LANGUAGE).lproj</string>
        <key>PLUGINS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>PRIVATE_HEADERS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>PUBLIC_HEADERS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>SCRIPTS_FOLDER_PATH</key>
        <string>$(UNLOCALIZED_RESOURCES_FOLDER_PATH)</string>
        <key>SHARED_FRAMEWORKS_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>SHARED_SUPPORT_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>UNLOCALIZED_RESOURCES_FOLDER_PATH</key>
        <string>$(CONTENTS_FOLDER_PATH)</string>
        <key>WRAPPER_SUFFIX</key>
        <string></string>
    </dict>
    <key>Description</key>
    <string>In-App Purchase Content</string>
    <key>Identifier</key>
    <string>com.apple.package-type.in-app-purchase-content</string>
    <key>Name</key>
    <string>In-App Purchase Content</string>
    <key>ProductReference</key>
    <dict>
        <key>FileType</key>
        <string>folder</string>
        <key>IsLaunchable</key>
        <string>NO</string>
        <key>Name</key>
        <string>$(WRAPPER_NAME)</string>
    </dict>
    <key>Type</key>
    <string>PackageType</string>
</dict>
<dict>
    <key>DefaultBuildSettings</key>
    <dict>
        <key>EXECUTABLE_NAME</key>
        <string>$(EXECUTABLE_PREFIX)$(PRODUCT_NAME)$(EXECUTABLE_VARIANT_SUFFIX)$(EXECUTABLE_SUFFIX)</string>
        <key>EXECUTABLE_PATH</key>
        <string>$(EXECUTABLE_NAME)</string>
        <key>EXECUTABLE_PREFIX</key>
        <string>lib</string>
        <key>EXECUTABLE_SUFFIX</key>
        <string>.a</string>
    </dict>
    <key>Description</key>
    <string>Mach-O static library</string>
    <key>Identifier</key>
    <string>com.apple.package-type.static-library</string>
    <key>Name</key>
    <string>Mach-O Static Library</string>
    <key>ProductReference</key>
    <dict>
        <key>FileType</key>
        <string>archive.ar</string>
        <key>IsLaunchable</key>
        <string>NO</string>
        <key>Name</key>
        <string>$(EXECUTABLE_NAME)</string>
    </dict>
    <key>Type</key>
    <string>PackageType</string>
</dict>
</array>
</plist> 
```

和这个内容**`iPhoneOSProductTypes.xcspec`**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
<dict>
    <key>Class</key>
    <string>PBXBundleProductType</string>
    <key>DefaultBuildProperties</key>
    <dict>
        <key>FRAMEWORK_FLAG_PREFIX</key>
        <string>-framework</string>
        <key>FULL_PRODUCT_NAME</key>
        <string>$(WRAPPER_NAME)</string>
        <key>GCC_INLINES_ARE_PRIVATE_EXTERN</key>
        <string>YES</string>
        <key>LIBRARY_FLAG_NOSPACE</key>
        <string>YES</string>
        <key>LIBRARY_FLAG_PREFIX</key>
        <string>-l</string>
        <key>MACH_O_TYPE</key>
        <string>mh_bundle</string>
        <key>STRIP_STYLE</key>
        <string>non-global</string>
        <key>WRAPPER_EXTENSION</key>
        <string>bundle</string>
        <key>WRAPPER_NAME</key>
        <string>$(WRAPPER_PREFIX)$(PRODUCT_NAME)$(WRAPPER_SUFFIX)</string>
        <key>WRAPPER_PREFIX</key>
        <string></string>
        <key>WRAPPER_SUFFIX</key>
        <string>.$(WRAPPER_EXTENSION)</string>
    </dict>
    <key>DefaultTargetName</key>
    <string>Bundle</string>
    <key>Description</key>
    <string>Generic bundle</string>
    <key>HasInfoPlist</key>
    <string>YES</string>
    <key>HasInfoPlistStrings</key>
    <string>YES</string>
    <key>IconNamePrefix</key>
    <string>TargetPlugin</string>
    <key>Identifier</key>
    <string>com.apple.product-type.bundle</string>
    <key>IsWrapper</key>
    <string>YES</string>
    <key>Name</key>
    <string>Bundle</string>
    <key>PackageTypes</key>
    <array>
        <string>com.apple.package-type.wrapper</string>
    </array>
    <key>Type</key>
    <string>ProductType</string>
</dict>
<dict>
    <key>BasedOn</key>
    <string>com.apple.product-type.bundle</string>
    <key>Class</key>
    <string>PBXApplicationProductType</string>
    <key>DefaultBuildProperties</key>
    <dict>
        <key>CODE_SIGNING_ALLOWED</key>
        <string>YES</string>
        <key>ENTITLEMENTS_ALLOWED</key>
        <string>YES</string>
        <key>GCC_INLINES_ARE_PRIVATE_EXTERN</key>
        <string>YES</string>
        <key>GCC_SYMBOLS_PRIVATE_EXTERN</key>
        <string>YES</string>
        <key>INSTALL_PATH</key>
        <string>$(LOCAL_APPS_DIR)</string>
        <key>MACH_O_TYPE</key>
        <string>mh_execute</string>
        <key>PROVISIONING_PROFILE_REQUIRED</key>
        <string>YES</string>
        <key>RESOURCE_RULES_REQUIRED</key>
        <string>YES</string>
        <key>STRIP_STYLE</key>
        <string>all</string>
        <key>WRAPPER_EXTENSION</key>
        <string>app</string>
        <key>WRAPPER_SUFFIX</key>
        <string>.$(WRAPPER_EXTENSION)</string>
    </dict>
    <key>DefaultTargetName</key>
    <string>Application</string>
    <key>Description</key>
    <string>Application</string>
    <key>IconNamePrefix</key>
    <string>TargetApp</string>
    <key>Identifier</key>
    <string>com.apple.product-type.application</string>
    <key>Name</key>
    <string>Application</string>
    <key>PackageTypes</key>
    <array>
        <string>com.apple.package-type.wrapper.application</string>
    </array>
    <key>SupportsZeroLink</key>
    <string>YES</string>
    <key>Type</key>
    <string>ProductType</string>
    <key>Validation</key>
    <dict>
        <key>AdditionalValidationClass</key>
        <string>XCiPhoneOSPlatformPlugin</string>
        <key>Checks</key>
        <dict>
            <key>!(  $(VALIDATE_PRODUCT) == NO &amp;&amp; $(CODE_SIGN_IDENTITY) == 'iPhone Distribution'  )</key>
            <string>The Validate Built Product build setting was not enabled when building for Distribution.</string>
        </dict>
        <key>ValidationToolSpec</key>
        <string>com.apple.build-tools.platform.validate</string>
    </dict>
</dict>
<dict>
    <key>Class</key>
    <string>PBXBundleProductType</string>
    <key>DefaultBuildProperties</key>
    <dict>
        <key>FULL_PRODUCT_NAME</key>
        <string>$(WRAPPER_NAME)</string>
    </dict>
    <key>Description</key>
    <string>In-App Purchase Content</string>
    <key>HasInfoPlist</key>
    <string>YES</string>
    <key>HasInfoPlistStrings</key>
    <string>NO</string>
    <key>Identifier</key>
    <string>com.apple.product-type.in-app-purchase-content</string>
    <key>IsWrapper</key>
    <string>YES</string>
    <key>Name</key>
    <string>In-App Purchase Content</string>
    <key>PackageTypes</key>
    <array>
        <string>com.apple.package-type.in-app-purchase-content</string>
    </array>
    <key>Type</key>
    <string>ProductType</string>
</dict>
<dict>
    <key>AlwaysPerformSeparateStrip</key>
    <string>YES</string>
    <key>Class</key>
    <string>PBXStaticLibraryProductType</string>
    <key>DefaultBuildProperties</key>
    <dict>
        <key>CODE_SIGNING_ALLOWED</key>
        <string>NO</string>
        <key>EXECUTABLE_EXTENSION</key>
        <string>a</string>
        <key>EXECUTABLE_PREFIX</key>
        <string>lib</string>
        <key>EXECUTABLE_SUFFIX</key>
        <string>.$(EXECUTABLE_EXTENSION)</string>
        <key>FRAMEWORK_FLAG_PREFIX</key>
        <string>-framework</string>
        <key>FULL_PRODUCT_NAME</key>
        <string>$(EXECUTABLE_NAME)</string>
        <key>GCC_ENABLE_SYMBOL_SEPARATION</key>
        <string>NO</string>
        <key>INSTALL_PATH</key>
        <string>/usr/local/lib</string>
        <key>LIBRARY_FLAG_NOSPACE</key>
        <string>YES</string>
        <key>LIBRARY_FLAG_PREFIX</key>
        <string>-l</string>
        <key>MACH_O_TYPE</key>
        <string>staticlib</string>
        <key>PRIVATE_HEADERS_FOLDER_PATH</key>
        <string>/usr/local/include</string>
        <key>PUBLIC_HEADERS_FOLDER_PATH</key>
        <string>/usr/local/include</string>
        <key>REZ_EXECUTABLE</key>
        <string>YES</string>
        <key>SEPARATE_STRIP</key>
        <string>YES</string>
        <key>STRIP_STYLE</key>
        <string>debugging</string>
    </dict>
    <key>DefaultTargetName</key>
    <string>Static Library</string>
    <key>Description</key>
    <string>Static library</string>
    <key>IconNamePrefix</key>
    <string>TargetLibrary</string>
    <key>Identifier</key>
    <string>com.apple.product-type.library.static</string>
    <key>Name</key>
    <string>Static Library</string>
    <key>PackageTypes</key>
    <array>
        <string>com.apple.package-type.static-library</string>
    </array>
    <key>Type</key>
    <string>ProductType</string>
</dict>
</array>
</plist> 
```

重新启动 XCode，然后清理您的项目并为您的设备再次构建它。

# java - Java Azure 请求签名

> ID：12549634
> 
> 赞同：1
> 
> 时间：2012-09-23T04:04:52.300
> 
> 标签：java, azure, request, signing

我正在使用最新的 Azure SDK 存储模拟器。我正在尝试签署对我的 blob 的请求。当我运行以下代码时，我收到身份验证错误。

我不知道出了什么问题，尽管我已经多次检查代码是否符合 Azure SDK blob 访问规范。

这是控制台输出：

```
GET

x-ms-date:Sun, 23 Sep 2012 04:04:07 GMT
/devstoreaccount1/tweet/?comp=list
SharedKey devstoreaccount1:Hx3Pm9knGwCb4Hs9ftBX/+QlX0kCGGlUOX5g6JHZ9Kw=
Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature. 
```

这是代码：

```
public static void signRequest(HttpURLConnection request, String account, String key) throws Exception
{
    SimpleDateFormat fmt = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss");
    fmt.setTimeZone(TimeZone.getTimeZone("GMT"));
    String date = fmt.format(Calendar.getInstance().getTime()) + " GMT";

    StringBuilder sb = new StringBuilder();
    sb.append("GET\n"); // method
    sb.append('\n'); // md5 (optional)
    sb.append('\n'); // content type
    sb.append('\n'); // legacy date
    sb.append("x-ms-date:" + date + '\n'); // headers
    sb.append(request.getURL().getPath() + "/tweet/?comp=list"); // resource TODO: "?comp=..." if present

    System.out.println(sb.toString());
    Mac mac = Mac.getInstance("HmacSHA256");
    mac.init(new SecretKeySpec(Base64.decode(key), "HmacSHA256"));
    String authKey = new String(Base64.encode(mac.doFinal(sb.toString().getBytes("UTF-8"))));
    String auth = "SharedKey " + account + ":" + authKey;
    request.setRequestProperty("x-ms-date", date);
    request.setRequestProperty("Authorization", auth);
    request.setRequestMethod("GET");
    System.out.println(auth);
}

public static void main(String args[]) throws Exception
{
     String account = "devstoreaccount1";
     String key = "Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==";
     HttpURLConnection connection = (HttpURLConnection) (new URL("http://localhost:10000/devstoreaccount1")).openConnection();
     signRequest(connection, account, key);
     connection.connect();
     System.out.println(connection.getResponseMessage());
 } 
```

在 Gaurav 和 Smarx 的反馈之后，这里是代码，我仍然得到同样的错误。你能给我看一些代码吗？否则很难理解。

```
 public static void sign(HttpURLConnection request, String account, String key, String url) throws Exception
    {
        SimpleDateFormat fmt = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss");
        fmt.setTimeZone(TimeZone.getTimeZone("GMT"));
        String date = fmt.format(Calendar.getInstance().getTime()) + " GMT";

        StringBuilder sb = new StringBuilder();
        sb.append("GET\n"); // method
        sb.append('\n'); // md5 (optional)
        sb.append('\n'); // content type
        sb.append('\n'); // legacy date
        sb.append("x-ms-date:" + date + '\n'); // headers
        sb.append("x-ms-version:2009-09-19\n"); // headers
        sb.append("/devstoreaccount1/devstoreaccount1/\n$maxresults:1\ncomp:list\nrestype:container"); // resource TODO: "?comp=..." if present

        System.out.println(sb.toString());
        Mac mac = Mac.getInstance("HmacSHA256");
        mac.init(new SecretKeySpec(Base64.decode(key), "HmacSHA256"));
        String authKey = new String(Base64.encode(mac.doFinal(sb.toString().getBytes("UTF-8"))));
        String auth = "SharedKeyLite " + account + ":" + authKey;
        request.setRequestProperty("x-ms-date", date);
        request.setRequestProperty("Authorization", auth);
        request.setRequestMethod("GET");
        System.out.println(auth);
    }

    public static void main(String args[]) throws Exception
    {

        String account = "devstoreaccount1";
        String key = "Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==";
        String url = "http://127.0.0.1:10000/devstoreaccount1/?restype=container&comp=list&$maxresults=1";
        HttpURLConnection connection = (HttpURLConnection) (new URL(url)).openConnection();
        sign(connection, account, key, url);
        connection.connect();
        System.out.println(connection.getResponseMessage());
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T04:57:19.490

**编辑**Gaurav 的答案去哪儿了？:-) 我相信他已经回答并提到您似乎正在构建一个 Shared Key Lite 签名，因此应该在您的授权标头中使用“SharedKeyLite”。

* * *

我认为 Gaurav 的回答是正确的，但我注意到其他三个问题：

1.  您似乎正在调用`http://localhost/devstoreaccount1`，但您正在计算 的签名`http://localhost/devstoreaccount1/tweet/?comp=list`。确保 URL 匹配。
2.  对于存储模拟器，我认为您的规范化资源实际上应该是`/devstoreaccount1/devstoreaccount1/tweet/?comp=list`. （注意帐户名的重复。）通常应该是`/<account>/<path>`，对于存储模拟器，帐户名显示在路径中。
3.  `x-ms-version`标题在哪里？我*相信*这是必需的。

**更新**这里有一些工作代码有两种方法，一种使用共享密钥，另一种使用共享密钥 Lite。希望这可以解决问题。请注意，要使用存储模拟器，您需要将 URL 切换回`localhost:10000/devstoreaccount1`. 签名代码应该仍然适用于模拟器，但我还没有测试过。Base64 库来自这里：[http](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html) ://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64.html 。

```
import java.net.*;
import java.util.*;
import java.text.*;
import javax.crypto.*;
import javax.crypto.spec.*;
import org.apache.commons.codec.binary.Base64;

public class Test
{
    private static Base64 base64 = new Base64();

    public static void signRequestSK(HttpURLConnection request, String account, String key) throws Exception
    {
        SimpleDateFormat fmt = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss");
        fmt.setTimeZone(TimeZone.getTimeZone("GMT"));
        String date = fmt.format(Calendar.getInstance().getTime()) + " GMT";

        StringBuilder sb = new StringBuilder();
        sb.append("GET\n"); // method
        sb.append('\n'); // content encoding
        sb.append('\n'); // content language
        sb.append('\n'); // content length
        sb.append('\n'); // md5 (optional)
        sb.append('\n'); // content type
        sb.append('\n'); // legacy date
        sb.append('\n'); // if-modified-since
        sb.append('\n'); // if-match
        sb.append('\n'); // if-none-match
        sb.append('\n'); // if-unmodified-since
        sb.append('\n'); // range
        sb.append("x-ms-date:" + date + '\n'); // headers
        sb.append("x-ms-version:2009-09-19\n");
        sb.append("/" + account + request.getURL().getPath() + "\ncomp:list");

        //System.out.println(sb.toString());
        Mac mac = Mac.getInstance("HmacSHA256");
        mac.init(new SecretKeySpec(base64.decode(key), "HmacSHA256"));
        String authKey = new String(base64.encode(mac.doFinal(sb.toString().getBytes("UTF-8"))));
        String auth = "SharedKey " + account + ":" + authKey;
        request.setRequestProperty("x-ms-date", date);
        request.setRequestProperty("x-ms-version", "2009-09-19");
        request.setRequestProperty("Authorization", auth);
        request.setRequestMethod("GET");
        System.out.println(auth);
    }

    public static void signRequestSKL(HttpURLConnection request, String account, String key) throws Exception
    {
        SimpleDateFormat fmt = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss");
        fmt.setTimeZone(TimeZone.getTimeZone("GMT"));
        String date = fmt.format(Calendar.getInstance().getTime()) + " GMT";

        StringBuilder sb = new StringBuilder();
        sb.append("GET\n"); // method
        sb.append('\n'); // md5 (optional)
        sb.append('\n'); // content type
        sb.append('\n'); // legacy date
        sb.append("x-ms-date:" + date + '\n'); // headers
        sb.append("x-ms-version:2009-09-19\n");
        sb.append("/" + account + request.getURL().getPath() + "?comp=list");

        //System.out.println(sb.toString());
        Mac mac = Mac.getInstance("HmacSHA256");
        mac.init(new SecretKeySpec(base64.decode(key), "HmacSHA256"));
        String authKey = new String(base64.encode(mac.doFinal(sb.toString().getBytes("UTF-8"))));
        String auth = "SharedKeyLite " + account + ":" + authKey;
        request.setRequestProperty("x-ms-date", date);
        request.setRequestProperty("x-ms-version", "2009-09-19");
        request.setRequestProperty("Authorization", auth);
        request.setRequestMethod("GET");
        System.out.println(auth);
    }

    public static void main(String args[]) throws Exception
    {
        String account = args[0];
        String key = args[1];
        HttpURLConnection connection = (HttpURLConnection) (new URL("http://" + account + ".blob.core.windows.net/?comp=list")).openConnection();
        signRequestSKL(connection, account, key);
        connection.connect();
        System.out.println(connection.getResponseMessage());

        connection = (HttpURLConnection) (new URL("http://" + account + ".blob.core.windows.net/?comp=list")).openConnection();
        signRequestSK(connection, account, key);
        connection.connect();
        System.out.println(connection.getResponseMessage());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T04:47:10.117

根据此处的文档：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179428](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428)，我相信您构建签名的“规范化资源字符串”部分的方式存在问题。

我注意到的几件事：

*   您将查询字符串参数 (comp=list) 附加到您不应该的字符串中。
*   如果您正在针对开发存储（您正在这样做）构建此字符串，“devstoreaccount1”应该出现两次。

例如，如果我试图在我的开发存储帐户中仅列出 1 个 blob 容器，这应该是基于以下请求 URL 的规范化资源字符串 - 127.0.0.1:10000/devstoreaccount1/?restype=container&comp=list&$maxresults= 1：

/devstoreaccount1/devstoreaccount1/

$最大结果：1

比较：列表

重新输入：容器

# c# - 通过 C# 上传 g+ 帐户的个人资料照片

> ID：12549635
> 
> 赞同：0
> 
> 时间：2012-09-23T04:04:56.213
> 
> 标签：c#, httpwebrequest, google-plus, web-inspector

我想通过 C# 使用 HttpWebRequest 为 Google Plus 帐户上传个人资料照片。如何在此帖子查询的页面源中查找方法？我正在使用 Web Inspector（Chrome 开发人员工具），但无法找到单击“设置个人资料照片”按钮后执行的代码。

这里上传照片的代码，我在网上找到的：

```
public bool UploadPhoto( Photo photo, string accountLine, string googleCookie )
{
    try
    {
        string query, upload_id;

        // проверка ошибок
        if( photo.Size == 0 ) return false;
        HttpWebRequest req = (HttpWebRequest)WebRequest.Create( "https://plus.google.com/_/upload/photos/resumable?authuser=0" );
        string content = "{\"protocolVersion\":\"0.8\",\"createSessionRequest\":{\"fields\":[{\"external\":{\"name\":\"file\",\"filename\":\"image-8453.jpg\",\"put\":{},\"size\":" +
                                    photo.Size.ToString() + "}},{\"inlined\":{\"name\":\"async_thumbnail\",\"content\":\"false\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"auto_create_album\",\"content\":\"profile_photos.draft\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"disable_asbe_notification\",\"content\":\"true\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"enable_face_detection\",\"content\":\"true\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"use_upload_size_pref\",\"content\":\"true\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"title\",\"content\":\"image-8453.jpg\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"addtime\",\"content\":\"1341478011235\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"batchid\",\"content\":\"1341477814870\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"album_name\",\"content\":\"5 \\u043b\\u0438\\u043f\\u043d\\u044f 2012 \\u0440.\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"album_abs_position\",\"content\":\"0\",\"contentType\":\"text/plain\"}},{\"inlined\":{\"name\":\"client\",\"content\":\"es-profile-signup\",\"contentType\":\"text/plain\"}}]}}";
        byte[] bcontent;

        string header = "Cookie: " + googleCookie;

        bcontent = Encoding.Default.GetBytes( content );

        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded;charset=UTF-8";
        req.ContentLength = bcontent.Length;
        req.UserAgent = userAgent;
        req.Referer = "https://plus.google.com/u/0/_/notifications/frame?sourceid=1&hl=ru&origin=https%3A%2F%2Fwww.google.com&uc=1&jsh=m%3B%2F_%2Fabc-static%2F_%2Fjs%2Fgapi%2F__features__%2Frt%3Dj%2Fver%3DVO1wk6ea0_A.en.%2Fsv%3D1%2Fam%3D!OgKRzknZ1ASBPEY3DA%2Fd%3D1";
        req.Headers.Add( header );

        req.GetRequestStream().Write( bcontent, 0, bcontent.Length );
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        StreamReader sr = new StreamReader( resp.GetResponseStream() );
        content = sr.ReadToEnd();

        Match m = Regex.Match( content, "\"url\":\"(?<url>[^\"]+)\"" );
        if( !m.Success ) return false;
        query = m.Groups[ "url" ].Value;
        m = Regex.Match( content, "upload_id\":\"(?<upload_id>[^\"]+)\"" );
        if( !m.Success ) return false;
        upload_id = m.Groups[ "upload_id" ].Value;

        req = (HttpWebRequest)WebRequest.Create( query );
        req.ContentLength = photo.Size;
        req.Method = "POST";
        req.ContentType = "application/octet-stream";
        req.Headers.Add( "Accept-Charset", "utf-8" );
        req.Headers.Add( "Origin", "plus.google.com" );
        req.Headers.Add( "X-GUploader-No-308", "yes" );
        req.Headers.Add( "X-HTTP-Method-Override", "PUT" );
        req.Headers.Add( header );
        req.Accept = "*/*";
        req.UserAgent = userAgent;
        req.GetRequestStream().Write( photo.Data, 0, photo.Size );
        resp = (HttpWebResponse)req.GetResponse();

        return true;
    }
    catch( Exception ex )
    {
        Log( accountLine + ": Error with uploading photo: " + ex.Message );
        return false;
    }
} 
```

但是此代码在执行第二个查询时会生成异常“方法不允许”。

另外，我已经有登录和发布文本的成功代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:44:37.463

无法使用官方 Google+ API 更新用户的个人资料照片。

有关 Google+ API 中支持的 API 列表，请参阅： [https ://developers.google.com/+/api/latest](https://developers.google.com/+/api/latest)

Google 不支持该端点`https://plus.google.com/_/`的 API，并且可以随时更改。

# c# - 具有 nhibernate / fluent 的枚举标志

> ID：12549639
> 
> 赞同：3
> 
> 时间：2012-09-23T04:05:40.760
> 
> 标签：c#, nhibernate, fluent-nhibernate

我正在使用 nhibernate 3 和流利的 nhibernate

我有这个枚举

```
[Flags]
public enum Permission
{
    View = 1,
    Add = 2,
    Edit = 4,
    Delete = 8,
    All = View | Add | Edit | Delete
} 
```

现在说我想找到所有有“查看”或“全部”的用户。

我怎么能用 nhibernate(linq) 做到这一点？

```
session.Query<TableA>().Where x.Permission == Permission.View); // does not bring back all

session.Query<TableA>().Where x.Permission.HasFlag(Permission.View); // crashes 
```

有没有必须去的地方

```
 session.Query<TableA>().Where x.Permission == Permission.View || x.Permission == Permission.All); 
```

**编辑**

```
 public class TableAMap : ClassMap<TableA>
    {
        public TableAMap()
        {
            Id(x => x.Id).GeneratedBy.GuidComb();
            Map(x => x.Permission).Not.Nullable().CustomType<PermissionTypes>();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:13:13.720

如果您的 TableA 类型具有以下映射：

```
public class TableAMap : ClassMap<TableA>
{
    public TableAMap()
    {
        ...
        Map(x => x.Permission).CustomType(typeof(Permission)).Not.Nullable();
        ...
    } 
} 
```

然后，您应该能够在您的存储库或您进行数据访问的任何地方发出以下查询：

```
public IList<TableA> GetTableByPermission(Permission permission)
{
    return Session.Query<TableA>
                  .Where(x => x.Permission == permission ||
                              x.Permission == Permission.All)
                  .ToList();
} 
```

或者您可以检查单个 TableA 实例是否获得了所需的权限：

```
public bool HasPermission(Guid guid, Permission permission)
{
    var tableA = Session.Query<TableA>.SingleOrDefault(x => x.Id == guid);

    if (tableA != null)
        return (tableA.Permission & permission) == permission;

    // Return false or whatever is appropriate.
    return false;
} 
```

您不能在查询中使用 HasFlag() 方法，NHibernate 不了解如何在查询中使用它。

# mysql - 连接到远程服务器上的 MySQL 数据库 - 遇到拒绝访问

> ID：12549640
> 
> 赞同：0
> 
> 时间：2012-09-23T04:05:45.463
> 
> 标签：mysql

我试图`MySQL`从命令行连接到远程服务器上的数据库。

```
mysql --host=<host name> --user=<username> --password=<password> <db name> 
```

我从 PHP 源连接到数据库没有问题，但是在尝试从命令行连接时遇到了这个错误。我使用完全相同的用户名和密码连接。

```
ERROR 1045 (28000): Access denied for user '<username>'@'<host IP address>' (using password: YES) 
```

我不确定哪个出了问题。

# python - Python 菜鸟：令人困惑的 OOP 训练代码的一部分

> ID：12549643
> 
> 赞同：0
> 
> 时间：2012-09-23T04:06:24.420
> 
> 标签：python, oop

一个。

有人可以解释这部分在这段代码中的作用吗（http://codepad.org/SyWLTfqs）？

```
class_names = [w.capitalize() for w in
               random.sample(WORDS, snippet.count("###"))] 
```

“w”从何而来？函数 capitalize() 来自哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:13:58.793

这是一个列表推导，遍历一堆字符串并调用它们`w`，然后调用`.capitalize()`它们。`class_names`从 中随机选择的 N 个大写单词的列表也是如此`WORDS`，其中 N 是“###”在 中的出现次数`snippet`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T04:21:09.460

首先，请注意[random.sample(input, length)](http://docs.python.org/library/random.html#random.sample)`snippet.count("###")`以随机顺序返回值的长度列表`WORDS`，而 capitalize 是 String 类的方法。
如果`WORDS`是一个字符串数组，则意味着`w`将随机分配给每个字符串，应用方法`capitalize()`，然后放入括号中所示的列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T04:19:27.110

**capitize()是一个 Python 内置字符串函数，它将变量****w**中的值大写；用户不必创建它[http://docs.python.org/library/string.html](http://docs.python.org/library/string.html)。
基本上，该列表变量中有一个迭代，并且每次迭代中的值都分配给**w**。

# php - PHP - strpos 如果它在 [ ] 中包含任何内容

> ID：12549645
> 
> 赞同：0
> 
> 时间：2012-09-23T04:06:57.757
> 
> 标签：php, arrays, strpos

我有以下效果很好，但现在我想要做的是如果用户键入`[MAP]`然后我想得到单词 MAP

我也希望允许用户发送类似的东西`[MAP = array("LOCATION"=>"Melbourne Australia")]`

并让 PHP 将 map 制作成一个数组，以便稍后我可以将其发送到函数

我目前执行以下操作

```
$map = strpos($stringtocheck, "[MAP]"); 
```

但是这里的问题是，如果我们有许多具有不同内部的 []，例如 [BOLD]、[INSERT] 等，那么它不会找到它并将其放入自己的 $ 中，这也意味着我们需要知道数组是什么带有或类似的字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:28:12.347

一个简单的正则表达式将从方括号中提取信息：

```
$s = 'Yo be [diggin] [my leet] scriptzors!';
$matches = null;
preg_match_all('/\[(.*?)\]/', $s, $matches);
var_dump($matches[1]); 
```

结果：

```
array(2) {
  [0]=>
  string(6) "diggin"
  [1]=>
  string(7) "my leet"
} 
```

示例：[http ://codepad.viper-7.com/erBpuB](http://codepad.viper-7.com/erBpuB)

# android - Android动态文字绘制/触摸检测

> ID：12549647
> 
> 赞同：1
> 
> 时间：2012-09-23T04:08:00.523
> 
> 标签：android, text, canvas, drawing

我想显示文本（相对较大）并确定用户触摸的字符。我还想通过在某些字符上画一个圆圈（例如）来修饰文本。我怎么知道哪些角色在什么位置？如果以编程方式有帮助，则强制执行等宽字体会很好。

它是否也能够使这一行文本向左/向右滚动（使用触摸->滑动）并且仍然具有触摸工作来确定正确的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:24:19.720

一个非常广泛的问题，你还有很多工作要做，但这里是一个可能的解决方案的概要：

*   创建自定义视图。ImageView 通常是一个很好的继承基类。

    覆盖视图的 onDraw() 方法。

    使用 canvas.drawText() 将文本放置在屏幕上。

    使用paint.getTextBounds 来测量您的文本。请参阅下面链接的讨论以获得彻底的理解。由于您在屏幕上绘制了文本并对其进行了测量，因此您可以准确地知道每个字符的位置。

    在您的自定义视图中覆盖 onTouch() 方法并跟踪您需要的事件。SO中有很多关于如何做到这一点的质量保证。

    要滚动文本，请使用您在 onTouch() 中计算的移动使用 canvas.translate()。由于您知道滚动（翻译）了多少，您就知道您的角色移动了多远，并且可以抵消您的触摸检测以检测字符触摸。

    最后，由于您现在控制所有绘图，并且您的角色位置是抽象的，只有与触摸位置相比才有意义，您可以选择任何方式来修饰它们。

[Android 画图：.measureText() 与 .getTextBounds()](https://stackoverflow.com/questions/7549182/android-paint-measuretext-vs-gettextbounds)

呸！

祝你好运。

# php - 阿贾克斯不工作。输出不显示

> ID：12549652
> 
> 赞同：0
> 
> 时间：2012-09-23T04:08:39.110
> 
> 标签：php, javascript, ajax, d3.js, tree-structure

我在代码中使用 ajax 时遇到问题。它的工作原理是 index.php 会将值传递给 ajax.js，然后转到further.php。在进一步的.php 中将生成一个树形图，并且应该在 index.php 页面的一个 div 中呈现。这应该在我单击 index.php 上的“继续”时完成。但是，当我尝试这个时，输出现在出现了。div 有一个边框，所以我看到 div 显示为空，而它应该有来自进一步.php 的树图。下面是该过程之前和之后的图像，我单击“进一步”，从进一步的.php 中获取图表。

图 1：点击链接之前的 index.php 并调用 ajax 函数。

图 2：空的 div 屏幕截图。（在文本下：“Go far”）。空 div 上方的部分图是树的样子。调用ajax函数后。空 div，即数字 1 下方的边界区域，是应该显示来自进一步.js 的树形图的位置。

图中的图 1，即在图 2 中的文字下方，是一个测试，看数据是否从 index.html 成功传递，通过 ajax.js 到further.php。出现这个数字，表示数据正在成功传递。但是所需的输出没有出现，div 是空的。

我该如何解决？

那么为什么further.php的javascript代码中的树形图没有出现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:01:35.383

问题究竟出在哪里？只是ajax不起作用？我建议你花一些时间学习 jQuery，它处理 ajax 和许多其他 javascript 函数要简单得多。并开发一个测试例程来测试您的 ajax 响应；创建一个并确保在尝试传递更复杂的函数生成结果之前传递一个简单的字符串。并修复 SQL 注入问题。

一行没有意义的代码：$row2['Pid']; 这应该怎么做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:27:50.660

为什么 ajax 在您的代码中不起作用。处理 ajax 响应的代码中的一个小错误。

```
 function handleAjaxResponse()
{
    if (xmlhttp.readyState==4)
    {
        document.getElementById("output").innerHTML = xmlhttp.responseText;

    }else{
        document.getElementById("main").innerHTML = "";
    }
} 
```

在 handleAjaxResponse 方法中没有 应该解析**xmlhttp变量，这是错误的原因。**请参考以下代码。

xmlhttp.onreadystatechange = handleAjaxResponse(xmlhttp);

```
function handleAjaxResponse(xhr){
    console.log(xhr);   
} 
```

# java - java - 将字节数组转换为类？

> ID：12549653
> 
> 赞同：0
> 
> 时间：2012-09-23T04:09:09.937
> 
> 标签：java, c++, c

在 C/C++ 中，您可以执行以下操作：

```
struct DataStructure
{
  char member1;
  char member2;
};

DataStructure ds;
char bytes[] = {0xFF, 0xFE};

memcpy(&ds, bytes, sizeof(ds)); 
```

你基本上会得到以下信息：

```
ds.member1 = 0xFF;
ds.member2 = 0xFE; 
```

Java 等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:20:43.877

> Java 等价物是什么？

没有 Java 等价物。

Java 不允许您通过在该级别访问对象来创建或修改对象。您应该使用`new`或设置方法，具体取决于您要实现的目标。

[（有几种方法可以做这种事情，但它们是不安全的、不可移植的并且“不是 Java”......在这种情况下它们是没有保证的。）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T04:19:17.600

您编写的`memcpy`取决于结构的内部实现，不一定有效。在java中，您需要定义一个接受字节数组并设置字段的构造函数。没有这样的快捷方式，因为类的内存结构没有定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T04:19:30.713

在 Java**中，您不能直接使用内存**（否`memcpy`），这是 Java 的优点（缺点？）。有一些 java 库方法可以复制数组：[System.arraycopy()](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)。一般来说，要复制一些对象，您需要使用[clone](http://javapapers.com/core-java/java-clone-shallow-copy-and-deep-copy/)方法来发送它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T04:31:09.217

你也许可以在 C 中做到这一点。但你会陷入混叠问题和一个 hunka hunka 燃烧未定义行为的问题。

而且因为 struct padding 取决于编译器，所以 memcpy 可能得到的只是 ds.member1 = 0xFF, ds.member2 = 当时堆栈上发生的任何垃圾，因为 member1 被填充为占用 4 个字节而不是而不仅仅是 1。或者你可能会同时得到垃圾，因为你设置了 4 字节的前 2 个字节，而它们位于底部的 2 个字节中。

您正在徘徊的是编译器/运行时特定的内存布局。在 Java 中也是如此。Java 本身不会让你做如此可怕的非 Java 的事情，但是如果你编写自己的 JVM 或调试用 C 或 C++ 编写的现有 JVM，你可以做类似的事情。谁知道会发生什么；我不是 Java 神，无法确切知道 JVM 规范对 JVM 实现的限制程度，但我的猜测是，还没有达到启用对象的内存中、运行时表示的互操作性所必需的程度。

因此，您会在每种语言风格中获得未定义的行为。每种语言的味道都一样好——就像神秘的肉。

# javascript - 强制内容从左到右而不溢出高度

> ID：12549658
> 
> 赞同：1
> 
> 时间：2012-09-23T04:10:28.913
> 
> 标签：javascript, css, html

目前，通过使用左浮动元素，我可以在水平滚动的容器中强制内容从左到右。（见图1）

我需要这些框按图 2 的顺序流动。到目前为止，如果内容“击中”div 的底部，我找不到任何方法来阻止内容向右移动 - 如果使用溢出：隐藏，它要么流到外面，要么表面停止。

内容正在动态加载

这可以用 CSS 完成还是我需要 javascript？

非常感谢任何帮助

**图像1** ![图 1](../Images/fbce52f02e674949bbe10a587271810d.png)

**图2** ![在此处输入图像描述](../Images/6dc010f77fd9a9135ec0463b78f793cb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T04:23:00.347

您将不得不使用`<div>`'s 为内部内容创建列。`append()`然后，您可以使用 jQuery 的方法将您的内容动态加载到所选的 div 中。

我建议使用布局“网格”库来减少跨浏览器错误并使列布局更容易一些。Twitter Bootstrap 框架非常适合：http: [//twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

这是网格部分的链接：http: [//twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

# python - 如何在 python 中循环回到我的程序的一部分？

> ID：12549659
> 
> 赞同：0
> 
> 时间：2012-09-23T04:10:33.563
> 
> 标签：python, loops

所以我一直在尝试为我的朋友和我的密码制作一个 python 程序（加入了 2 个不同的密码），我一直在努力让加密不同的字符串变得容易，而无需每次都打开和关闭程序。我在 64 位 Windows 7 计算机上使用 python 3.2。

这是我的代码（也请给我一些完善它的提示）：

```
#!/usr/bin/python

#from string import maketrans   # Required to call maketrans function.

print ("Welcome to the Rotten Bat encription program. Coded in python by Diego Granada")
answer = input("Please enter the password: ")
if answer == 'raindrops':
    print("Password accepted")
else:
    print ("Incorrect password. Quiting")
    from time import sleep
    sleep(3)
    exit()
intab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
outtab = "N9Q2T1VWXYZ7B3D5F8H4JK60n9pq2st1vwxyz7b3d5f8h4jk60"

message = input("Put your message here: ")

print(message.translate(dict((ord(x), y) for (x, y) in zip(intab, outtab))))

print ("Thank you for using this program")

input() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T04:21:08.510

良好的编程实践是将您的代码分解为模块化的功能单元 - 例如，一个实际*执行*密码的函数，一个收集用户输入的函数等。这个想法的更高级和更模块化的版本是面向对象编程 -今天在大多数大型项目和编程语言中使用。（如果你有兴趣，这里有很多学习 OOP 的好资源，比如[这个教程](http://www.voidspace.org.uk/python/articles/OOP.shtml)。）

最简单的是，您可以将密码本身放入它自己的函数中，然后在每次用户输入消息时调用它。这可以解决问题：

```
#!/usr/bin/python

print ("Welcome to the Rotten Bat encription program. Coded in python by Diego Granada")
answer = input("Please enter the password: ")
if answer == 'raindrops':
    print("Password accepted")
else:
    print ("Incorrect password. Quiting")
    from time import sleep
    sleep(3)
    exit()

def cipher(message):
    intab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"
    outtab = "N9Q2T1VWXYZ7B3D5F8H4JK60n9pq2st1vwxyz7b3d5f8h4jk60"
    return (message.translate(dict((ord(x), y) for (x, y) in zip(intab, outtab))))

while True:
    message = input("Put your message here: ")
    print cipher(message)
    print ("Thank you for using this program") 
```

该程序现在将在向用户询问另一条消息时永远循环 - 使用组合键`ctrl`+`c`停止程序。

# objective-c - 如何为属性的集合属性编写我自己的迭代器（使用正确的类型转换）？

> ID：12549667
> 
> 赞同：9
> 
> 时间：2012-09-23T04:11:46.417
> 
> 标签：objective-c, ios, collections, casting, iterator

我有一个包含一些对象组合的模型类，但我不知道为此编写迭代器的最佳方法。要更详细地查看问题，这里是层次结构（半伪代码）：

根类：

```
MYEntity : NSObject
@property int commonProperty;
@property NSArray *childs; //Childs of any kind. 
```

一些具体的子类：

```
MYConcreteStuff : MYEntity
@property int number;

MYConcreteThing : MYEntity
@property NSString *string; 
```

还有一个带有具体集合的根对象：

```
MYRoot : MYEntity
@property MYEntity *stuff; //Collect only stuff childs here.
@property MYEntity *things; //Collect only thing childs here. 
```

现在我可以为集合（在 MYEntity 中）编写很酷的成员访问器，例如：

```
-(MYEntity*)entityForIndex:(int) index
{
    if ([self.childs count] > index)
        return [self.childs objectAtIndex:index];

    return nil;      
} 
```

甚至更酷、类型良好的根对象的成员访问器。

```
-(MYConcreteThing*)thingForIndex:(int) index
{
    if ([self.things count] > index)
        return (MYConcreteThing*)[self.things entityForIndex];

    return nil;    
} 
```

但我不知道如何为此类集合编写一些单行迭代器。想要的客户端代码类似于：

```
for (MYConcreteThing *eachThing in myRoot.things)
  eachThing.string = @"Success."; //Set "thingy" stuff thanks to the correct type. 
```

我正在考虑使用块，但可能会有更干净的解决方案。有什么想法/经验吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T13:09:30.853

现在我将继续使用积木，这非常简单。现在我更喜欢枚举这个词。

事物枚举的块类型（确保类型正确）：

```
typedef void (^MYThingEnumeratorBlock)(MYThing *eachThing); 
```

MYRoot 中事物的一种很酷的枚举器方法（不公开集合）：

```
-(void)enumerateThings:(MYThingEnumeratorBlock) block
{    
    for (MYThing *eachThing in self.things.childs)
        block(eachThing);
} 
```

所以客户端代码如下：

```
[myRoot enumerateThings:^(MYThing *eachThing)
 {
    NSLog(@"Thing: %@", eachThing.string);         
 }]; 
```

使用一些简洁的宏：

```
#define ENUMARATE_THINGS myRoot enumerateThings:^(MYThing *eachThing)

[ENUMARATE_THINGS
{
   NSLog(@"Thing: %@", eachThing.string); //Cool "thingy" properties.        
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:06:48.110

在我看来，最好的方法是为数组属性实现符合键值编码的方法。这将有额外的好处，使您的集合可以被其他对象观察到。您可以在[苹果文档](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-BAJEAIEE "苹果文档")中阅读所有相关信息。这是 MYRoot 类中 Things 数组的示例实现。随意个性化每种方法中的代码：

```
// KVC method for read-only array of Things
- (NSUInteger) countOfThings
{
    return _things.count;
}

- (Thing*) objectInThingsAtIndex:(NSUInteger)index
{
    return [_things objectAtIndex:index];
}

// Additional KVC methods for mutable array collection
- (void) insertObject:(Thing*)thing inThingsAtIndex:(NSUInteger)index
{
    [_things insertObject:thing atIndex:index];
}

- (void) removeObjectInThingsAtIndex:(NSUInteger)index
{
    [_things removeObjectAtIndex:index];
} 
```

要遍历集合，您将执行以下操作：

```
for (Thing *thing in [_entity valueForKey:@"things"]) {
} 
```

要在数组中添加一个东西，你可以做

```
NSMutableArray *children = [_entity mutableArrayValueForKey:@"things"];
[children addObject:aThing]; 
```

这样做可以确保所有观察该`@"things"`属性的对象都将收到有关数组所有更改的通知。如果您直接调用插入方法，它们不会（这有时本身很有用）。

# java - Android 模拟器与手机

> ID：12549669
> 
> 赞同：0
> 
> 时间：2012-09-23T04:12:17.683
> 
> 标签：java, android, adb

我正在运行我创建的使用 Google Maps API 的应用程序。

它在我正在使用的模拟器上按预期工作，但是，图形似乎在我的手机上以不同的方式呈现。

请参阅以下图片以供参考

![在我的 HTC Explorer 上，斜角效果不可见](../Images/040775b3b84536d85ad82bfe9ee3cb8e.png) ![在我的模拟器上，斜角效果非常明显](../Images/f669dad98780260b7a93658c13f2c980.png) ![这是我正在重复的图像 - 它被用于视图的背景](../Images/aa8e78bb9342bc8e1d79a7d306edadc2.png)

这是我的 activity.xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

  <TextView
     android:id="@+id/textView1"
     android:layout_width="fill_parent"
     android:layout_height="30dp"
     android:background="@drawable/repeat"
     android:layout_marginTop="0dp"
     android:text=""
     android:textAppearance="?android:attr/textAppearanceLarge" /> 

   <com.google.android.maps.MapView
       android:id="@+id/mapView"
       android:layout_marginTop="30dp"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:enabled="true"
       android:clickable="true"
       android:apiKey="--private--" />

</RelativeLayout> 
```

为什么同一图像的观察结果不同 - 一个在设备上，一个在模拟器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:15:31.240

要在真实硬件上进行测试，您需要使用与调试密钥不同的密钥。我认为您正在使用调试密钥库。

访问：[https ://developers.google.com/maps/documentation/android-api/v1/?csw=1#getfingerprint](https://developers.google.com/maps/documentation/android-api/v1/?csw=1#getfingerprint)

在谷歌上阅读那段。

将应用程序导出为具有用于 google api 的相同密钥（而不是调试密钥）的签名应用程序很重要。

要创建有效的阅读该段落：

访问：http: [//developer.android.com/guide/publishing/app-signing.html#releasemode](http://developer.android.com/guide/publishing/app-signing.html#releasemode)

然后使用相同的密钥获取 google maps api 密钥。

获得应用程序的密钥后，您可以通过在项目上单击鼠标右键来导出签名的应用程序，选择 Android 工具，然后导出为签名的应用程序包并按照向导进行操作（可能您可以使用该密钥创建新密钥向导）。

希望有所帮助。

# sqlite - SQLite 中的 strftime 函数不起作用

> ID：12549671
> 
> 赞同：2
> 
> 时间：2012-09-23T04:13:02.227
> 
> 标签：sqlite, strftime

嗨，我正在使用以下查询，但它不起作用，

```
SELECT strftime('%m',Since) AS Month FROM Dates 
```

列的类型`Since`是`DATETIME`，但结果显示为空的 Month 列，没有任何错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T04:35:26.347

[`strftime`](http://www.sqlite.org/lang_datefunc.html)没有损坏，它只是不理解数据库中日期戳的格式。

```
SQLite version 3.7.9 2011-11-01 00:52:41
sqlite> create table dates (id int, d datetime);
sqlite> insert into dates (id,d) values (1, date('now'));
sqlite> insert into dates (id,d) values (2, 'bad date');
sqlite> insert into dates (id,d) values (3, NULL);
sqlite> insert into dates (id,d) values (4, datetime('now'));
sqlite> select * from dates;
1|2012-09-23
2|bad date
3|
4|2012-09-23 04:31:36
sqlite> select id, strftime('%m', d) from dates;
1|09
2|
3|
4|09 
```

# c# - 如何在 DataContext 中重新加载特定对象（表）

> ID：12549674
> 
> 赞同：1
> 
> 时间：2012-09-23T04:13:59.573
> 
> 标签：c#, wpf, linq-to-sql

我为我的整个 WPF 应用程序使用相同的数据上下文。如何从数据库中重新加载特定对象？我尝试了该对象的数据上下文的刷新功能，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:45:09.530

你做;

你的数据上下文 = null; YourDataContext = Database.Read();

# css - Chrome中的输入按钮位置已关闭？

> ID：12549680
> 
> 赞同：0
> 
> 时间：2012-09-23T04:15:36.873
> 
> 标签：css, forms, button, input, alignment

当我在 Firefox 中打开页面时，此电子邮件订阅表单的输入按钮与输入字段正确对齐，但在 Chrome 中它看起来有点不对劲。

有人能帮我弄清楚如何让它在 Chrome 中正确排列吗？太感谢了！

**html代码：**

```
<div id="socialmedia">

    <form action="********/account.php" name="digiSHOP" method="post">

        <input type="hidden" name="m" value="subscribe" />

        <input type="hidden" name="submit" value="true" />

        <input type="hidden" name="secret" value="a6887a2c4d7909f10a4e01778cdd4b02" />

        <input type="hidden" name="mailingListId" value="1" />

        <div class="form-label" >
            <div class="nicelabel" >
                <img border="0" src="updateme.gif" width="132" height="30"></a>
            </div>
            <div class="niceform" >
                <input align="left" type="text" value=" your email" name="email" style="width:150px; height:24px; maxlength="80" value="" size="20" />
                <input class="edit-button" type="submit" value="" />
            </div>
        </div>
    </form>
</div> 
```

**CSS 样式：**

```
#socialmedia{
    float: left;
    width: 350px;
    height: auto;
    margin-top: 15px;
    margin-bottom: 0px;
    margin-right: 0px;
    margin-left: 0px;
    text-align: left;
}

.form-label {
    float: left;
    width: 400px; height: 28px;
    font-size: 1.5em;
    margin: 10px 0 0 0;
    text-align: left;
}

.nicelabel { float: left; text-align:left; width:132px; }

.niceform { float: left; text-align:right; width:230px; }

input, textarea {margin-left: 0px; } 
```

**截屏：**

![截屏](../Images/1a748f5f995e59492e3eda907c2c9e2e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:40:51.547

不同的浏览器之间存在这样的不一致。有两种方法可以解决此问题：

*   使用绝对定位

    HTML

    ```
    <form class="contact-form">
        email id <input type="text"/><input type="submit" value="submit" />
    </form> 
    ```

    CSS

    ```
    form.contact-form{
        position:relative;
    }

    form.contact-form input[type=text]{
        position:aboslute;
        top:0;
    }

    form.contact-form input[type=submit]{
        position:absolute;
        top:0;
    } 
    ```

    此方法将表单的元素推到顶部，从而确保对齐。js小提琴在这里-> [http://jsfiddle.net/xcpSg/](http://jsfiddle.net/xcpSg/)

    *   使用表格
    表格也可以完成这项工作。Facebook 将这种方法用于其主页顶部的登录表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T04:39:33.493

这可能是您的代码本身的一个小错误

`<img border="0" src="updateme.gif" width="132" height="30"></a>`

在这里你`closing anchor tag`没有`<a>`任何地方给予，你也不是`img`像下面这样的结束标签。

`<img border="0" src="updateme.gif" width="132" height="30"/>`

通过纠正这些事情来检查。

# date - 如何将时间戳转换为日期 MySQL

> ID：12549685
> 
> 赞同：4
> 
> 时间：2012-09-23T04:16:42.770
> 
> 标签：date, unix-timestamp

我正在关注 YouTube 上关于如何制作图片上传网站的指南，由 phpacademy 提供，很棒的指南。但是，我试图通过以人类可读的方式显示它来扩展它。

目前，它`albums.timestamp`被保存在数据库中，例如`UNIX_TIMESTAMP()`结果。`1348372089`现在，如果我想将这些数字转换为常规日期和时间，例如`23-09-2012 05:00`（欧洲标准），我应该如何进行？

我尝试过`DATE(albums.timestamp)`和`CONVERT(albums.timestamp, 120)`，`unix_timestamp(albums.timestamp)`以及`CAST(120 as albums.timestamp)`，但它们都不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T04:38:25.463

使用 FROM_UNIXTIME(str,format)。 [http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)

第二个参数将让您根据自己的喜好格式化日期字符串。

格式化字符：
[http ://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T04:16:42.770

`FROM_UNIXTIME(albums.timestamp)`虽然有效！

# php - 在 PHP 脚本中重命名图像文件名？

> ID：12549692
> 
> 赞同：1
> 
> 时间：2012-09-23T04:18:03.080
> 
> 标签：php, image, photo, rename

这是我用来将一些图像从一台服务器传输到另一台服务器的基本传输器。这是一个基本脚本，允许我输入 URL，单击下载，它将保存到我服务器上的目录并显示新 URL。

我需要添加一些东西，同时自动给我的图像一个随机数字文件名。我今晚玩了它并且非常接近，但没有任何运气。您可以将功能添加到工具中吗？我很着急，因为我需要在星期一之前使用该工具进行项目，所以我决定寻求帮助来完成这项工作。提前致谢！！！！

```
<?php

// Check if form has been submitted
if($_POST['submit']){

    ini_set("max_execution_time", 0);   // no time-outs!
    ignore_user_abort(true);            // Continue downloading even after user closes the browser.

    // URLS -- One on each line
    $URL = $_POST['url'];

    // Relative path to Save downloaded images
    // Default is "downloads"
    // Make sure that it is writable (chmoded correctly)
    $folder = $_POST['folder']; 

    // Check if User has provided a local folder
    if (!$folder || !isset($folder)){

        // Generate error if left blank by user.
        die ("Please specify local folder name");
    }

    // Split all URLS into an array
    $urls = split("\n", $URL);

    // Remove Carriage Returns (useful for Windows-based browsers)
    $urls = str_replace("\r", "", $urls);

$mh = curl_multi_init();
foreach ($urls as $i => $url) {
    $path = pathinfo($url);
    $g=$folder . "/" . $path["basename"] ;
        // Check if file already exists on local folder.
    if(file_exists($g)){

        // If exists, delete the file so it always contains the latest update.  
        unlink($g) or die("Unable to delete existing '$g'!");
    }
    // Update the user of what's going on
    echo "$i) <b>Sucess! Your image has been transloaded from:</b> <br><small><small>$url</small></small><p><b>Your new image URL is:</b><br>http://myURL.com/gallery/$g<br />";

    if(!is_file($g)){
        $conn[$i]=curl_init($url);
        $fp[$i]=fopen ($g, "w");
        curl_setopt ($conn[$i], CURLOPT_FILE, $fp[$i]);
        curl_setopt ($conn[$i], CURLOPT_HEADER ,0);
 //       curl_setopt($conn[$i],CURLOPT_CONNECTTIMEOUT,1000);
        curl_multi_add_handle ($mh,$conn[$i]);
    }
}
do {
    $n=curl_multi_exec($mh,$active);
}
while ($active);
foreach ($urls as $i => $url) {
    curl_multi_remove_handle($mh,$conn[$i]);
    curl_close($conn[$i]);
    fclose ($fp[$i]);
}
curl_multi_close($mh);

} //  task closed
?>
<br />
<br />
<fieldset>
        <legend>
            <label for="url">Download Remote Files And Save Locally</label>
        </legend>
        <form method=POST>
            <label for="url">URL: </label><br />
            <textarea rows=15 cols=75 id="url" name="url"><?= $URL ?></textarea><br />
            <label for="folder">Local folder : </label><input type=text id="folder" name="folder" value="downloads"/>
            <input type=submit name="submit" value="Download Files!" />
        </form>
</fieldset> 
```

# solr - 为什么 solr 不索引一些分词

> ID：12549695
> 
> 赞同：1
> 
> 时间：2012-09-23T04:18:58.807
> 
> 标签：solr, indexing, text-segmentation

我正在尝试用 Solr 索引一些中文文档，但看起来 Solr 没有索引一些分段词。

我使用的分析器是 IK 分析器[http://code.google.com/p/ik-analyzer/](http://code.google.com/p/ik-analyzer/)。

要索引的字段：

```
 <field name="hospital_alias_splitted" type="cn_ik" indexed="true" stored="true" multiValued="true" omitNorms="false"/> 
```

cn_ik 定义：

```
<fieldType name="cn_ik" class="solr.TextField" positionIncrementGap="100">
<analyzer> 
    <tokenizer class="org.wltea.analyzer.solr.IKTokenizerFactory" useSmart ="false"/>
</analyzer> 
```

例如，将被索引的单词是“AB”（不带引号）。使用中文分析器进行分词后，我得到了 3 个标记，它们是“AB”、“A”和“B”。

如我们所见，第一个标记“AB”涵盖了以下两个标记。

在将这些令牌提供给 Solr 之后，看起来 Solr 仅索引“AB”、“A”和“B”被忽略了。因为当我搜索“A”或搜索“B”时没有得到任何结果。

我猜当 Solr 索引“AB”时，它已经到达索引词的末尾，所以“A”和“B”被忽略了。

使用 Luke 和 Analysis Request Handler 不会向我显示更多提示。我不确定这是 Solr 的错误还是功能。

有什么意见或建议吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T00:29:48.930

（因为我无法对这个问题发表评论，所以我在这里输入）

我建议您尝试使用不同的分析仪。由于您没有告诉我们您的分析仪，我假设您使用的是默认值，例如 CJK 等。

据我所知，中文和中文等语言的分析器更多，两个词之间没有空格。他们也可能会帮助你。

不过，很高兴看到有关该字段的架构的某些部分...

编辑：您也可以查看[此链接](http://java.dzone.com/articles/indexing-chinese-solr)

# ios - iPad 上的 GameCenter 登录控制器问题

> ID：12549697
> 
> 赞同：0
> 
> 时间：2012-09-23T04:19:15.513
> 
> 标签：ios, ipad, gamekit

我正在制作一个使用 GameKit 来报告成就的通用应用程序。这在 iPhone 上运行时效果很好 - 全屏模式 Game Center 视图控制器向上滑动并要求我在应用程序启动时登录。

然而，当我在 iPad 上运行这个应用程序时，GC 视图控制器的窗口 iPad 版本会向上滑动，但一旦停止，屏幕就会略微变灰，我无法与模态视图控制器或其他任何东西进行交互。

我已将问题缩小到用于应用程序窗口背景的滚动效果，特别是在将动画子层添加到窗口层时：

```
-(void)startGridScroll
{
    //Create layer and pattern it with the grid image as a color
    UIImage * gridImage = [UIImage imageNamed:@"scrolling_grid.png"];
    UIColor * gridPattern = [UIColor colorWithPatternImage:gridImage];
    CALayer * gridLayer = [CALayer layer];
    [gridLayer setZPosition:-1];
    gridLayer.backgroundColor = gridPattern.CGColor;

    //Transform the image on its Y-axis
    gridLayer.transform = CATransform3DMakeScale(1.0, -1.0, 1.0);
    gridLayer.anchorPoint = CGPointMake(0.0,1.0);
    CGSize scrollSize = self.window.bounds.size;

    //Make the layer's frame twice the width of the image
    gridLayer.frame = CGRectMake(0.0, 0.0, gridImage.size.width + scrollSize.width, scrollSize.height);

     //*******This is the line causing the issue******
     [self.window.layer addSublayer:gridLayer];

    //Define start position and end coordinates for grid image
    CGPoint start = CGPointZero;
    CGPoint end = CGPointMake(-gridImage.size.width, 0);
    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    animation.fromValue = [NSValue valueWithCGPoint:start];
    animation.toValue = [NSValue valueWithCGPoint:end];
    animation.repeatCount = HUGE_VALF;

    //Set animation duration and begin
    animation.duration = 7.0;
    [gridLayer addAnimation:animation forKey:@"position"];

} 
```

我两次调用此方法：最初在`application: didFinishLaunchingWithOptions`方法中，然后在`applicationDidBecomeActive`方法中。消除一个电话或另一个没有帮助。如果我将它们都注释掉，Game Center 登录视图控制器会向上滑动并正常工作。

我假设正在发生某种与层相关的问题。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:31:37.323

我解决了这个问题。我将滚动效果应用于新的 UIView 层，然后将其作为子视图添加到应用程序窗口，而不是将滚动效果层作为直接子层添加到窗口。仍然不确定为什么这在 iPad 和 iPhone 上表现不同。

# c++ - 如何使用 ncurses 构建复杂的“图形”？

> ID：12549701
> 
> 赞同：3
> 
> 时间：2012-09-23T04:19:45.500
> 
> 标签：c++, ncurses

我被告知使用这样的代码：

```
 void printCharacter(int row, int col) {
        move(row, col);
        addch(' ');
        addch(' ');
        addch('0');
        addch(' ');
        addch(' ');
        move(row + 1, col);
        addch('<');
        addch('-');
        addch('|');
        addch('-');
        addch('>');
        move(row + 2, col);
        addch(' ');
        addch('/');
        addch(' ');
        addch('\\'); // Escape required for using '\'
        addch(' ');
    } 
```

在使用 ncurses 库编写游戏时构建火柴人形状的“图形”。我觉得这是非常重复的。有没有更好的**正确方法**来做到这一点？

我发现`mvaddch(row, col, ' ')`了，但这似乎仍然过于冗长。

（是的，这是一个家庭作业，但我不是在要求答案，只是一种很好地解决问题的方法。太多的 CS 课程只教如何，他们不教手艺。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T04:28:38.703

把控制台想象成一个分辨率很低的光栅显示器——当你这样做时，你可以看到 ncurses 如何被用作一种原始图形 API，允许你设置每像素值（其中一个像素是单个字符），以及基本形状，例如线条和盒子。

通过重复调用`addch`（连同`move`），您可以将图形对象绘制到屏幕上，就像您可以通过重复调用`Graphics`Java 或 GDI 中的对象来制作复杂场景一样——只是做起来很慢；）

关于您给出的示例，唯一感觉“错误”的是艺术品被硬编码（相当字面意思）到您的代码中。这意味着您的代码非常快，但编辑起来却是一场噩梦。

一个长期的解决方案是将您的作品移动到文件系统中的单独文件中，并修改您的程序以将该文件读入缓冲区。要使用 ncurses 绘制艺术作品，您只需遍历缓冲区中的 (ascii) 字符并采取相应措施，例如 (pusedocode)：

```
void drawBuffer(int x, int y, char[] artBuffer) {
    move( x, y );
    foreach(char c in artBuffer) {
        if( c == '\n' ) move( x, ++y );
        else addch( c );
    }
} 
```

编辑：或者`drawBuffer`直接从代码中使用，如下所示：

```
char* stickFigure = "   0\n<-|->\n / \\";
void drawStickFigure(int x, int y) {
    drawBuffer( x, y, stickFigure );
} 
```

达达。

# c - glibc，退出时关闭 FILE* 之间可能的竞争条件？

> ID：12549704
> 
> 赞同：2
> 
> 时间：2012-09-23T04:20:02.267
> 
> 标签：c, linux, multithreading

我将一个更大的程序提炼成底部显示的代码。在valgrind中运行这个程序最终会报这个错误：

```
==7234== 大小为 4 的读取无效
==7234== 在 0x34A7275FC8：_IO_file_write@@GLIBC_2.2.5（在 /usr/lib64/libc-2.15.so 中）
==7234== 由 0x34A7275EA1：new_do_write（在 /usr/lib64/libc-2.15.so 中）
==7234== 0x34A7276D44：_IO_do_write@@GLIBC_2.2.5（在 /usr/lib64/libc-2.15.so 中）
==7234== 由 0x34A7278DB6：_IO_flush_all_lockp（在 /usr/lib64/libc-2.15.so 中）
==7234== 由 0x34A7278F07：_IO_cleanup（在 /usr/lib64/libc-2.15.so 中）
==7234== 由 0x34A7238BBF：__run_exit_handlers（在 /usr/lib64/libc-2.15.so 中）
==7234== by 0x34A7238BF4：退出（在 /usr/lib64/libc-2.15.so 中）
==7234== by 0x34A722173B: (在 main 下面) (在 /usr/lib64/libc-2.15.so)
==7234== 地址 0x542f2e0 是大小为 568 的块内的 0 个字节 free'd
==7234== 在 0x4A079AE: 空闲 (vg_replace_malloc.c:427)
==7234== by 0x34A726B11C: fclose@@GLIBC_2.2.5 (在/usr/lib64/libc-2.15.so)
==7234== by 0x40087C: writer (tc:22)
==7234== by 0x34A7607D13: start_thread (在/usr/lib64/libpthread-2.15.so)
==7234== by 0x34A72F167C：克隆（在 /usr/lib64/libc-2.15.so 中）

```

从上面的输出来看，这似乎是正在发生的事情：

*   main() 返回，并开始运行退出处理程序以关闭所有 FILE*
*   writer() 线程，仍在运行，唤醒，关闭 FILE*
*   退出处理程序尝试访问已关闭的 FILE*，它现在是无效/free()'d

据我所知，测试程序没有做任何未定义的事情，但我很乐意在这方面犯错。

Valgrind 与各种功能挂钩，因此它可能是 valgrind 错误而不是 glibc。

*   这是一个 glibc 错误吗？
*   或者它是一个 valgrind 错误？

*   关于如何确定它是 valgrind 还是 glibc 的任何想法？

tc：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

void *test(void *arg)
{
    return NULL;
}
void *writer(void *arg)
{
    for(;;) {
        char a[100];
        FILE *f = fopen("out", "w");

        if(f == NULL)
           abort();

        fputs("Test", f);

        if(fgets(a, 100, stdin))
            fputs(a, f);
        fclose(f);  //line 22
    }

    return NULL;
}

int main(int argc, char *argv[])
{
    pthread_t tid1,tid2;

    pthread_create(&tid1, NULL, writer, NULL);
    pthread_create(&tid2, NULL, test, NULL);
    pthread_join(tid2, NULL);
    //pthread_join(tid1, NULL); //no bug if we wait for writer()
    return 0;
}
//compile: gcc t.c -g -pthread 
```

可能需要几分钟才能从 valgrind 触发错误，其中：

```
while [ true ]; do 
  echo test |valgrind --error-exitcode=2 ./a.out  || break  
done 
```

环境：Fedora 17、glibc-2.15、gcc-4.7.0-5、内核 3.5.3-1.fc17.x86_64、valgrind-3.7.0-4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T04:38:46.743

你有一个竞争条件。您有一个调用 的线程，该线程`exit`被记录为关闭所有打开的 stdio 流。然后，您有另一个线程，可能在`exit`关闭它之后访问这样的流。a 关闭后你不能访问`FILE*`它——它被允许指向垃圾。

如果一个线程做了一些使调用`exit`不安全的事情，你必须确保你不调用`exit`. 真的就是这么简单。

# c# - 添加新的一对一亲子记录说模型无效

> ID：12549707
> 
> 赞同：0
> 
> 时间：2012-09-23T04:20:44.510
> 
> 标签：c#, asp.net-mvc-3, razor

我有这个模型：

```
public class Employee {
    public int EmployeeId { get; set; }
    [Required(ErrorMessage = "Employee Name is Required.")]
    public string Name { get; set; }

    public SkillSet SkillSet { get; set; }
}

public class SkillSet {
    public int SkillSetId { get; set; }
    public string ProgrammingLanguage { get; set; }

    public int EmployeeId { get; set; }
    public Employee Employee { get; set; }
} 
```

使用在表单中呈现的局部视图：

```
@Html.HiddenFor(x => x.EmployeeId)
<div class="row">
    <div class="span3"><strong>Name</strong></div>
    <div class="span2">@Html.TextBoxFor(x => x.Name, new { @class = "" })</div>
</div>
@Html.HiddenFor(x => x.SkillSet.SkillSetId)
@Html.HiddenFor(x => x.SkillSet.EmployeeId)
<div class="row">
    <div class="span3"><strong>Programming Skills</strong></div>
    <div class="span2">@Html.TextBoxFor(x => x.SkillSet.Programming, new { @class = "" })</div>
</div> 
```

我通过返回 Employee 的新实例进行发布来填充表单，但是当我尝试保存新记录时，ModelState 中出现关于`SkillSet.SkillSetId`新记录为空的错误。

我在这里缺少什么来将新的父子记录添加到我的数据库中？

编辑：我现在可以开始工作了。我的问题只是为我的表单渲染隐藏字段。我不得不将隐藏字段放在一个 div 中，它们渲染得很好，我能够处理回发的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:31:36.010

您发布的代码不足以得出一些结论，但我可以告诉您：控制器/视图和模型之间似乎没有问题，它似乎是数据库中的问题。

*在您的技能表（无论您如何称呼它）中，ID 似乎`SkillSetId`应该定义为 key 和 identifier*。

我在您的模型中注意到并且不喜欢的另一件事是您有一个循环引用（Employee 指向 SkillSet，SkillSet 指向 Employee）。Entity Framework 不喜欢它，并且可能会导致您没有预料到的问题。由于它是一个视图模型，它可以，但如果您的数据库以相同的方式定义 - 考虑重新定义它。

希望这对您的解决方案有所帮助。

# python - 如何重置 Python 字符串中的值

> ID：12549713
> 
> 赞同：0
> 
> 时间：2012-09-23T04:21:54.683
> 
> 标签：python, string

每次单词中出现元音时，我都会尝试添加某些文本。到目前为止，这是我的代码：

```
first_syl = 'ab'
second_syl = 'bc'
word = 'income'

vowels = "aeiou"
diction = "bcdfghjklmnpqrstvwxyz"
empty_str = ""
word_str = ""

for ch in word:
    if ch in diction:
        word_str += ch
    if ch in vowels:
        empty_str += word_str + ch + first_syl

print (empty_str) 
```

结果 - iabncoabncmeab

正确结果 - iabncoabmeab

不同之处在于，在我的程序中，在“meab”之前有一个额外的“nc”。问题是当循环运行时，它首先添加'n'，然后是'nc'，然后是'ncm'（非元音），但我需要它添加'n'，然后是'c'，然后是'm'。

关于如何做到这一点的任何想法..？使用 python 3.2.3，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:39:18.237

如果我理解您的目标正确，您希望在每次通过时将 ch 添加到 empty_str ，然后仅在您击中元音时添加 first_syl 。

您堆叠的原因是每次击中元音时都是 += word_str 。您提供作为源的字符串中的元音越多，它只会变得越来越糟。

```
for ch in word:
    empty_str += ch
    if ch in diction:
        word_str += ch
    if ch in vowels:
        empty_str +=  first_syl

print (empty_str, word_str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T04:45:30.153

不确定您尝试做什么，但如果您的目标是要获得 iabncoabmeab 那么您需要在出现元音后重置 word_str

```
for ch in word:
if ch in diction:
    word_str += ch
if ch in vowels:
    empty_str += word_str + ch + first_syl
    word_str="" // I don't now python but you should clear the string 
```

# algorithm - Algorithm to find the order of evaluation of multiple equations

> ID：12549715
> 
> 赞同：3
> 
> 时间：2012-09-23T04:22:45.247
> 
> 标签：algorithm

I have the text content full of expressions like:

```
a = 1
d = b + c 
b = a * c
c = 2 - a
... 
```

This expressions may be written in random order. I can extract each of these expressions and evaluate each of them but I need to find optimal algorithm to avoid circular evaluations like:

```
a = 1
d = ? (skip)
b = ? (skip)
c = 2 - a = 1
...
d = ? (skip)
b = a * c = 1
...
d = b + c = 2
... 
```

Is there the way "to order" the equations by the involved arguments to avoid extra calculation passes by like:

```
a = 1
c = 2 - a = 1
b = a * c = 1
d = b + c = 2
... 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T04:25:57.303

For each expression, create a node in a graph, where the incoming edges are the other expressions it depends upon. Then use a topological sort to determine the evaluation order.

Example:

Expressions:

```
a = 1
d = b + c 
b = a * c
c = 2 - a 
```

Graph nodes:

```
a()
d(b,c)
b(a,c)
c(a) 
```

Topological sort:

```
begin
    process a
        process a's dependencies (none)
        output a
        mark a as done
    process d
        process d's dependencies
            process b
                process b's dependencies
                    process a (already done)
                    process c
                        process c's dependencies
                            process a (already done)
                        output c
                        mark c as done
                output b
                mark b as done
            process c (already done)
        output d
        mark d as done
    process b (already done)
    process c (already done)
end 
```

Result:

```
a c b d 
```

# python - 在具有多个迭代的 python 列表理解中定位条件语句

> ID：12549717
> 
> 赞同：3
> 
> 时间：2012-09-23T04:23:29.927
> 
> 标签：python, list-comprehension

我很难理解为什么在多个迭代的列表理解中放置相同的条件语句会影响结果。

```
>>> boys = 'Jim','Jeff'
>>> girls = 'Bonnie', 'Buffy'

# This generates four tuples as expected
>>> [(b,g) for b in boys for g in girls]
[('Jim', 'Bonnie'), ('Jim', 'Buffy'), ('Jeff', 'Bonnie'), ('Jeff', 'Buffy')]

# If the conditional "if b[-1] not in g" is at the end of the LC we get 3
>>> [(b,g) for b in boys for g in girls if b[-1] not in g]
[('Jim', 'Bonnie'), ('Jim', 'Buffy'), ('Jeff', 'Bonnie')]

# If the conditional is after the first sequence, we only get two results
>>> [(b,g) for b in boys if b[-1] not in g for g in girls]
[('Jim', 'Bonnie'), ('Jim', 'Buffy')] 
```

如果其他人已经在 StackOverflow 上询问/回答了这个问题，请提前道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:42:58.760

您所做的与以下内容相同：

```
>>> boys = 'Jim','Jeff'
>>> girls = 'Bonnie', 'Buffy'
>>>
>>> out = []
>>> for b in boys:
...    for g in girls:
...       out.append((b,g))
...
>>> out
[('Jim', 'Bonnie'), ('Jim', 'Buffy'), ('Jeff', 'Bonnie'), ('Jeff', 'Buffy')]
>>>
>>> out = []
>>> for b in boys:
...    for g in girls:
...        if b[-1] not in g:
...            out.append((b,g))
...
>>> out
[('Jim', 'Bonnie'), ('Jim', 'Buffy'), ('Jeff', 'Bonnie')]
>>>
>>> b
'Jeff'
>>> g
'Buffy'
>>> out = []
>>> for b in boys:
...     if b[-1] not in g:
...         for g in girls:
...            out.append((b,g))
...
>>> out
[('Jim', 'Bonnie'), ('Jim', 'Buffy')] 
```

由于`b`和`g`已经定义并填充了上次运行的值，因此会发生以下情况：

*   第一个外循环`Jim`。
    *   `m`在`Buffy`？否 - 运行内部循环：
    *   附加`(Jim, Bonnie)`
    *   附加`(Jim, Buffy)`
*   第二外环`Jeff`
    *   `f`在`Buffy`？是的 - 跳过内循环。

如果您首先在*新*的Python shell 中运行它，它会引发`Exception`：

```
>>> # b = g = None 
>>> boys = 'Jim','Jeff'
>>> girls = 'Bonnie', 'Buffy'
>>>
>>> [(b,g) for b in boys if b[-1] not in g for g in girls]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 1, in <listcomp>
UnboundLocalError: local variable 'g' referenced before assignment 
```

# eclipse - 将项目构建路径传递给 Eclipse 中的外部工具

> ID：12549718
> 
> 赞同：3
> 
> 时间：2012-09-23T04:23:54.993
> 
> 标签：eclipse, classpath, javac, buildpath, external-tools

我想在 Eclipse 中设置一个外部工具，通过`javac`直接调用来对项目中的类进行一些自定义编译。为此，我需要传递参数`javac`，`classpath`以便它知道去哪里寻找依赖项。

是否有可能，例如在外部工具配置对话框中，告诉 Eclipse 将所有引用的库和源目录的列表传递给我的外部工具，最好以分号分隔的方式`javac`期望？有一个名为 的变量`project_classpath`，但不幸的是，它返回 Eclipse 生成的编译类的输出目录，而不是依赖目录。

我认为 Eclipse 应该在某个地方随时提供这些信息，因为它可能需要它来调用`javac`.

还有其他地方可以找到这些信息吗？不幸的是，`.classpath`与该项目关联的文件包含对 Eclipse 内部定义的库的各种神秘引用，而不是简单的路径名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:44:24.397

我使用最小的应用程序打印出 jsp 编译任务的类路径。根据需要进行调整

```
public class JspCompileArgs {
    static public void main(String [] args){
        StringBuilder sb=new StringBuilder();
        sb.append("-war.path \"${resource_loc}/src/main/webapp\"\n");
        sb.append("-keepgenerated true\n");
        sb.append("-compileToDir /tmp/jsp_compile\n");
        sb.append("-additional.classpath \"");
        ClassLoader cl = ClassLoader.getSystemClassLoader();
        URL[] urls = ((URLClassLoader)cl).getURLs();
        for(URL url: urls){
            sb.append(url.getFile());
            sb.append(";");
        }
        sb.append('"');
        System.out.println(sb);
    }
} 
```

# python - 在远程主机上重新加载主管的结构问题

> ID：12549719
> 
> 赞同：0
> 
> 时间：2012-09-23T04:24:53.110
> 
> 标签：python, django, fabric, supervisord, webfaction

我的项目托管在 Webfaction 上，主管用于了解流程。我使用 shell utils 来获取主管的 PID，当我手动执行它时它工作得很好，但是当我使用 Fabric 远程执行相同的命令时，我得到了随机的 PID

### 获取主管PID的代码

```
spid = run('ps auxw | grep supervisord | grep %s | tr -s \' \' | cut -d\  -f 2' % USER)

if spid:                   # if supervisor is running and PID is found
    run('kill %s' % spid)  # kill supervidor daemon 
```

我很困惑为什么在远程调用命令时会得到随机 PID，我这样做的方式有什么问题？

谢谢，

苏丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:07:48.480

您可以通过使用`pkill`或`pgrep`查找 pid 来更简单地解决这个问题。但是，如果这就是您所做的全部，我会说使用该`-j|--pidfile=`选项，这样您就不必通过流程输出查找它。

# magento - Magento 分层导航和 SEO

> ID：12549720
> 
> 赞同：5
> 
> 时间：2012-09-23T04:24:58.097
> 
> 标签：magento, attributes, seo, layered-navigation

我对 Magento 分层导航和 seo 有疑问。

似乎我们的网站正在使用与属性相关的 URL 进行索引，例如 www.abc.com/exampleproduct?brand=69

这会产生大量重复内容的问题。有没有人遇到过这样的事情，是否有任何好的解决方案。Inchoo 在这里写了一篇关于它的博客：http://inchoo.net/online-marketing/magento-seo-how-to-handle-problems-caused-by-layered-navigation/[但](http://inchoo.net/online-marketing/magento-seo-how-to-handle-problems-caused-by-layered-navigation/)它并没有真正找到一个可靠的解决方案.

在此先感谢，厘米。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-01T09:44:23.400

您可以将 Head.php 文件 (/app/code/core/Mage/Page/Block/Html/Head.php) 复制到本地目录 (/app/code/local/Mage/Page/Block/Html/Head. php)

以下是如何实现对新文件的修改：

```
public function getRobots()
    {
        if (empty($this->_data['robots'])) {
            $this->_data['robots'] = Mage::getStoreConfig('design/head/default_robots');
        }

        //Added NOINDEX, FOLLOW for category page with filter(s)
        if(Mage::app()->getFrontController()->getAction()->getFullActionName() == 'catalog_category_view'){
            $appliedFilters = Mage::getSingleton('catalog/layer')->getState()->getFilters();

            //var_dump($appliedFilters);  //<-- uncomment and see filters as array in page source code in meta robots tag.

            if(is_array($appliedFilters) && count($appliedFilters) > 0){
                $this->_data['robots'] = "NOINDEX, FOLLOW";
            }
        }

        return $this->_data['robots'];
    } 
```

PS 另请注意，您应该添加一些检查对象是否存在。

```
Mage::app()->getFrontController()->getAction()->getFullActionName() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:14:00.923

尝试使用规范的 url 元标记，谷歌、雅虎和其他主要搜索引擎将仅索引该元标记指定的 url。为此，我推荐：[Yoast 扩展](http://yoast.com/canonical-url-links/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-20T15:10:00.460

在视频中，有一些解决方案，如 nofollow、Robots.txt 等。您也可以查看以下建议。

1.  您可以在所有动态/过滤器页面上使用相应产品页面/类别页面的规范。

2.  如果您遇到此问题，Google 网站管理员会报告重复的元标记，因为所有页面都已编入索引并且它们包含主页的元标记。然后您可以使用动态元标记。

但是使用主页的规范是最好的选择。希望这些建议对您有所帮助！:)

# javascript - 使用 nodejs 在服务器之间传递消息

> ID：12549725
> 
> 赞同：1
> 
> 时间：2012-09-23T04:26:13.203
> 
> 标签：javascript, node.js

我正在研究在 node.js 服务器之间传递消息的方法。

我正在考虑使用 hook.io。但是 hook.io 现在已经死了。hook.io 有哪些替代方案？优选地，替代方案将在节点用户区中以保持简单。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T15:37:22.213

基本上我认为消息队列可能是个好主意。您将使用哪个消息队列取决于您的要求 - 容错、事务支持......

有趣的是，消息队列有一个标准：[AMQP](http://www.amqp.org/) -*高级消息队列协议*。如果您使用支持 AMQP 的消息队列，则无需调整代码即可轻松切换实现。

您可能想要查看的模块是[node-amqp](https://github.com/postwait/node-amqp)，它允许您连接到任何基于 AMQP 的消息队列。

我用它运行[RabbitMQ](http://www.rabbitmq.com/)，到目前为止我很有信心。如果您在 Heroku 上托管 Node.js 应用程序：[CloudAMQP](http://www.cloudamqp.com/)提供与 Heroku 集成的托管 RabbitMQ 服务。

如果您更喜欢完全用 Node.js 编写的解决方案，请查看TJ Holowaychuk 的[Kue](http://learnboost.github.com/kue/) - 这是一个由 Redis 支持的出色消息队列。

# java - 从android向servlet发送数据

> ID：12549728
> 
> 赞同：1
> 
> 时间：2012-09-23T04:26:33.980
> 
> 标签：java, android, servlets, send

我正在尝试将数据从 android 模拟器发送到在 localhost 上运行的 servlet，我有以下代码，但它没有向 servlet 发送数据。我也试过我的 ip "192.168.2.15:8080" 而不是 "10.0.2.2:8080" 但结果是一样的，谁能告诉我哪里错了？

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(
    "http://10.0.2.2:8080/Interactive_ICS_Web/datareciever");

try {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("username", "naveed"));
    nameValuePairs.add(new BasicNameValuePair("password", "12345"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:43:56.620

问题解决了，这是我的愚蠢。我在 android 代码中使用 httppost，并尝试在 servlet 上的 doGet() 中接收

# javascript - 时间：2019-01-10 标签：c#accessdomjavascript生成的表单

> ID：12549730
> 
> 赞同：3
> 
> 时间：2012-09-23T04:26:43.903
> 
> 标签：javascript, .net, winforms, dom, webbrowser-control

我正在使用 webbrowser 控件加载网页，其中有一个由 javascript 生成的表单。

当我尝试访问 c# 中的元素时，找不到它们。

该页面在普通浏览器中呈现良好，但在我的 winforms 应用程序中，表单元素未呈现，我只能在调试时看到生成表单的 javascript

我在堆栈上找到的一个接近的解决方案是将 to 强制`webbrowser.document.domdocument`转换`ihtmldocument`，但我没有成功，

这就是我想做的

```
Dim doc As HtmlDocument = DirectCast(wbMain.Document.DomDocument, MSH.IHTMLDocument) 
```

但我收到了这个警告

> 将“mshtml.IHTMLDocument”转换为“System.Windows.Forms.HtmlDocument”时可能会出现运行时错误。

当我忽略并运行时，我收到了这个错误

> 无法将类型为“mshtml.HTMLDocumentClass”的 COM 对象转换为类类型“System.Windows.Forms.HtmlDocument”。表示 COM 组件的类型的实例不能转换为不表示 COM 组件的类型；但是，只要底层 COM 组件支持对接口的 IID 的 QueryInterface 调用，它们就可以转换为接口。

编辑示例 javascript

```
<SCRIPT type=text/javascript>  
        (function(){            
        function runElemGen() {
       var ElemGenForm = [{"label":"Email:","name":"ElemGen_email_field","oldName":"","value":"","ElemGen":"text"},{"label":"","name":"ElemGensubscribe","oldName":"","value":"Submit","ElemGen":"submit"}];
       ElemGenBuildForm({makeDivs: true, arr:ElemGenForm, place:"ElemGen-email-form-"});                
        }
      if (window.addEventListener) {
        window.addEventListener("load", runElemGen, false);
      } else {
        window.attachEvent("onload", runElemGen);
      }
    })();
</SCRIPT> 
```

任何有解决方案的人都可以帮忙吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T18:52:12.807

**编辑：**下面的解决方案修复了 OP 无法访问 dom 以进行调试。OP 实际上需要解决文档在`WebBrowserControl`. 这`WebBrowserControl`是对同名 ActiveX 控件的重新打包，因此可能会使用当前安装的 Internet Explorer 版本。如果可能的话，我建议在有问题的计算机上启动 IE 并尝试呈现相同的文档，包括用于加载文档的代码`WebBrowserControl`也可以帮助我们诊断问题。

我认为您想要以下内容：

```
if (webBrowser1.Document != null)
{
    var currentDoc = (MSHTML.IHTMLDocument2)webBrowser1.Document.DomDocument;
    return (currentDoc.lastModified);
} 
```

您从`IHTMLDocument`to`HtmlDocument`的转换无效。

这是[IHTMLDocument2](http://msdn.microsoft.com/en-us/library/aa752574.aspx)属性和方法文档。

在上面的例子中，扩展它`webBrowser1.Document`是一个`System.Windows.Forms.HtmlDocument`. 它的`DomDocument`属性是一个指向文档的非托管指针。`Document`仅当您查找未在浏览器控件的托管属性上公开的文档属性时才需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T09:23:04.900

您确实说过生成的表单没有显示在您的 webbrowser 控件中，所以我猜它显示在您的正常 Internet Explorer 会话中，我是否正确？您是否意识到，当您运行 WebBrowser 控件时，它是在 IE 7.0 渲染引擎下运行的？这样做是为了兼容性。因此，如果您的 JS 中有任何需要 IE 8.0 或更高版本的内容，除非您专门更改某些注册表设置（或进行元数据标记插入），表明您希望内容在当前安装的 IE 版本，或您选择的特定固定版本。

如果这是问题所在，我对以下问题的回答几乎肯定会解决您的问题。您可以在此处找到它：[脚本在 dotnet WebBrowser 控件中运行速度较慢](https://stackoverflow.com/questions/12490512/script-runs-slower-in-the-dotnet-webbrowser-control/12548037#12548037)

让我知道它是怎么回事，如果它解决了你的问题，如果没有，我会和你一起工作，直到我们找到解决方案。

# asp.net - 如何找到我的 SQL Server 2012 Express 实例的命名实例

> ID：12549734
> 
> 赞同：2
> 
> 时间：2012-09-23T04:27:01.423
> 
> 标签：asp.net, sql-server-2012-express

使用 SSMS 验证我的`ServerName\instance`……我只能让它与点`.`（或`computerName`）连接。我认为默认实例是`.\SQLEXPRESS`......但这不起作用。

似乎 Visual Studio 2012 也期望 ( `.\SQLEXPRESS`) ....更改我的`web.config`文件以反映数据源，因为`DATA SOURCE= .;`没有修复任何问题....VS 2012 在尝试添加数据库项时找不到我的 SQL Server 2012 Express。我所有的尝试都失败了。

我试图发布图像，但它对我大惊小怪，因为我是一个新用户......但这是我尝试添加数据库时收到的 Visual Studio 错误消息：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或可访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：50 - 发生本地数据库运行时错误。无法创建自动实例。有关错误详细信息，请参阅 Windows 应用事件日志

Windows 应用事件日志：

> 无法访问 LocalDB 实例文件夹：%%LOCALAPPDATA%%\Microsoft\Microsoft SQL Server Local DB\Instances\。

（检查上面的路径..仅显示一个实例文件夹和一个项目子文件夹。项目文件夹包含许多文件，包括主数据库）

如何将我的 SQL Server 2012 Express 安装与 VS 2012 同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T11:42:56.233

选择@@servername + '\' + @@servicename

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:01:18.783

要检查您的连接，请执行以下步骤创建一个新文本框，将其重命名为带有 udl 索引的文件，例如 a.udl 现在打开此文件，首先有 4 个选项卡，您应该在第二个选项卡中选择 microsoft ole db provider for sql server（连接选项卡）选择您的服务器名称与 sql server 连接的确切名称（例如 NIKTANA\SQLEXPRESS）现在设置用户并通过，如果您的服务器名称正常，您会看到服务器上的数据库选择数据库单击确定，现在如果你用记事本打开文件你看到你的连接字符串这个连接字符串在visual studio中工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T04:47:24.017

一年前有人问过这个问题，当我开始使用 SQL Server Express 2012 时，我没有找到任何直接答案。当没有发现服务实例作为服务运行时，我感到很惊讶。然后我花了一些时间阅读 2012 SQL Server Express 版本及以后的新内容。

您可以快速浏览一下； [http://msdn.microsoft.com/en-IN/library/hh510202.aspx](http://msdn.microsoft.com/en-IN/library/hh510202.aspx)

言归正传，如何知道实例名称？

找到以下文件夹快速知道实例名称，注意AppData默认为隐藏文件夹。C:\Users\\AppData\Local\Microsoft\Microsoft SQL Server 本地 DB\Instances\

# prolog - Qn 上书 Learn Prolog Now

> ID：12549735
> 
> 赞同：2
> 
> 时间：2012-09-23T04:27:03.030
> 
> 标签：prolog, predicate

我指的这本书的部分在这里， [http://cs.union.edu/~striegnk/learn-prolog-now/html/node4.html](http://cs.union.edu/~striegnk/learn-prolog-now/html/node4.html)

```
listensToMusic(mia).
happy(yolanda).
playsAirGuitar(mia)  :- listensToMusic(mia).
playsAirGuitar(yolanda) :- listensToMusic(yolanda).
listensToMusic(yolanda):- happy(yolanda). 
```

> `happy`谓词是使用单个子句（事实）定义的。和 谓词分别使用两个子句定义（在这两种情况下，两个规则）`listensToMusic`。`playsAirGuitar`

我理解它说`happy`谓词是使用单个子句（事实）定义的第一部分。但我不明白它说的下一部分， `listensToMusic` 谓词`playsAirGuitar`每个都使用两个子句定义。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:16:17.693

*我认为这本书在哪些条款是事实*和*规则*方面有点不一致或令人困惑：

> 知识库中包含的事实和规则称为子句。因此 KB2 包含五个条款，**即三个规则和两个事实。** 另一种看待 KB2 的方式是说它由三个谓词（或过程）组成。三个谓词是：
> 
> ```
> listensToMusic
> happy
> playsAirGuitar 
> ```
> 
> 快乐谓词是使用单个子句（**事实**）定义的。listensToMusic 和 playAirGuitar 谓词分别使用两个子句定义（在这两种情况下，**两个规则**）。

我认为括号“ *（在这两种情况下，两个规则）* ”只是增加了混乱 -`listensToMusic(mia).`是一个空规则，即一个事实。

文本可能试图在将 Prolog 知识库作为一个整体（一组子句）和一组谓词 - 视为谓词时建立区别，`happy`只有事实子句，而同时`listensToMusic`具有事实和规则子句。

如果你得到它`listensToMusic/1`是用两个子句定义的（一个空规则，一个非空）：

```
listensToMusic(mia).
listensToMusic(yolanda):- happy(yolanda). 
```

...并`playsAirGuitar/1`用两个子句（两个非空规则）定义：

```
playsAirGuitar(mia)  :- listensToMusic(mia).
playsAirGuitar(yolanda) :- listensToMusic(yolanda). 
```

...我想你会没事的。不用担心！

# binary - Prolog二进制加法问题？

> ID：12549737
> 
> 赞同：6
> 
> 时间：2012-09-23T04:27:36.353
> 
> 标签：binary, prolog

我有这个作业，我必须在 Prolog 中编写。要求是编写一段执行二进制加法的代码，例如：

```
?- add([1,0,1],[1,1],X).
X = [0,0,0,1] 
```

所以，这是我想出的代码：

```
add([],[], _).
add([],Y, Z) :- append([], Y, Z).
add(X,[], Z) :- append(X,[],Z).
add([HX|TX],[HY|TY], Z) :-
    HX = 1,
    HY = 1,
    add(TX,TY, Z1),
    add([1],Z1, Z2),
    append([0],Z2,Z),!.
add([HX|TX],[HY,TY], Z) :-
    HX = 0,
    HY = 1,
    add(TX,TY,Z1),
    append([1],Z1, Z),!.
add([HX|TX],[HY|TY], Z) :-
    HX = 1,
    HY = 0,
    add(TX,TY,Z1),
    append([1],Z1, Z),!.
add([HX|TX],[HY,TY], Z) :-
    HX = 0,
    HY = 0,
    add(TX,TY,Z1),
    append([0],Z1, Z),!. 
```

它似乎做了我需要的，但是，它有一些我无法理解的奇怪问题，所以如果有人能指导我做错了什么，我会很高兴。

结果：

```
?- add([1,1,1,1], [1,1],Z).
Z = [0, 1, 0, 0, 1]. % this is correct

?- add([1], [1],Z).
Z = [0, 1]. % this is correct

?- add([1,1,0,1], [1,1],Z).
Z = [0, 1, 1, 1]. % this is correct

?- add([1],[0],Y).
Y = [1|_G7100]. % there is an error here, but its not the big issue.

?- add([1,0,1], [1,1],Z).   
false. % no results are returned.

    104 ?- add([0], [1],Z).
    false. % no results returned either 
```

问题：每当第一个二进制列表中似乎有 0 时，在某些情况下（仍在尝试找出它们），似乎没有返回任何结果。但我似乎无法找到我的错误。如果有人会很高兴可以告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T06:36:04.250

有3个错误：

*   规则#1：应该`add([],[],[]).`代替`add([],[], _).`. 这对于等长列表失败。
*   规则 #5 和 #7：应该`add([HX|TX],[HY|TY], Z)`代替`add([HX|TX],[HY,TY], Z)`. 当第二个列表 ( `Y`) 包含的元素少于两个时，这将失败。

修复这些问题，您的代码应该运行良好：请参见[此处](http://ideone.com/rNggO)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:22:40.100

我看到您使用 7 种不同的规则，因为您将二进制算术放在规则中。您可以使用 6 种不同的规则加上一个开始规则，如下所示：

```
add2(AL, BL, CL) :-
   add2(AL, BL, 0, CL).

add2([A | AL], [B | BL], Carry, [C | CL]) :-
   X is (A + B + Carry),
   C is X rem 2,
   NewCarry is X // 2,
   add2(AL, BL, NewCarry, CL).
add2([], BL, 0, BL) :- !.
add2(AL, [], 0, AL) :- !.
add2([], [B | BL], Carry, [C | CL]) :-
   X is B + Carry,
   NewCarry is X // 2,
   C is X rem 2,
   add2([], BL, NewCarry, CL).
add2([A | AL], [], Carry, [C | CL]) :-
   X is A + Carry,
   NewCarry is X // 2,
   C is X rem 2,
   add2([], AL, NewCarry, CL).
add2([], [], Carry, [Carry]). 
```

以下是一些示例运行：

```
?- add2([1,1,1,1], [1,1],Z).
Z = [0,1,0,0,1]
?- add2([1], [1],Z).
Z = [0,1]
?- add2([1,1,0,1], [1,1],Z).
Z = [0,1,1,1]
?- add2([1],[0],Y).
Y = [1]
?- add2([1,0,1], [1,1],Z).
Z = [0,0,0,1]
?- add2([0], [1],Z).
Z = [1] 
```

上述解决方案的主要优点是，对 add2/4 的调用较少，您可以替换 //2 和 rem 2，也可以在其他数字系统中进行加法。

PS：代码取自[这里](http://www.jekejeke.ch/idatab/doclet/prod/en/docs/05_run/15_stdy/06_bench/09_programs/02_crypt/package.html)。

# javascript - 如何在 GWT RichTextArea 中设置光标位置

> ID：12549739
> 
> 赞同：6
> 
> 时间：2012-09-23T04:28:00.363
> 
> 标签：javascript, java, gwt, richtextbox, text-cursor

有没有办法在 GWT RichTextArea 中设置光标位置。在 TextArea 中有 setCusrorPosition() 方法，但在 RichTextArea 中没有。

也许有一个本机 JavaScript（从 GWT 调用）可以在 RichTextArea 中设置光标位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T12:45:43.460

你是对的 RichTextArea 没有提供 setSelectionRange 方法，但我使用 JSNI 创建了一个。

下面是方法，

```
public native void setSelectionRange(Element elem, int pos, int length) /*-{
    try {
        var selection = null, range2 = null;
        var iframeWindow = elem.contentWindow;
        var iframeDocument = iframeWindow.document;

        selection = iframeWindow.getSelection();
        range2 = selection.getRangeAt(0);

        //create new range
        var range = iframeDocument.createRange();
        range.setStart(selection.anchorNode, pos);
        range.setEnd(selection.anchorNode, length);

        //remove the old range and add the newly created range
        if (selection.removeRange) { // Firefox, Opera, IE after version 9
            selection.removeRange(range2);
        } else {
            if (selection.removeAllRanges) { // Safari, Google Chrome
                selection.removeAllRanges();
            }
        }
        selection.addRange(range);
    } catch (e) {
        $wnd.alert(e);
    }
}-*/; 
```

要使用上述方法，请编写以下代码：

```
final RichTextArea tr = new RichTextArea();
    Button b = new Button("Test");
    b.addClickHandler(new ClickHandler() {

        @Override
        public void onClick(ClickEvent event) {
            setSelectionRange(tr.getElement(), 15, 20);
            tr.setFocus(true);
        }
    });
    RootPanel.get().add(tr);
    RootPanel.get().add(b); 
```

注意：请记住将您传递的“pos”和“length”的验证检查放入 setSelectionRange() 方法。此代码已在 IE9、FF、Chrome 中测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T22:02:54.420

不确定这是否仍然需要，但我一整天都在努力让它工作，最终设法破解了我的解决方案。这仅在 Chrome/Safari 中进行了测试。希望它可以帮助某人。

```
public static native void setCursor(Element elem, int pos, int length) /*-{
    var node = elem.contentWindow.document.body;
    var range = elem.contentWindow.getSelection().getRangeAt(0);

    var treeWalker = $doc.createTreeWalker(node, NodeFilter.SHOW_TEXT, function(node) {
        var nodeRange = $doc.createRange();
        nodeRange.selectNodeContents(node);
        return NodeFilter.FILTER_ACCEPT;
    });

    var charCount = 0;
    while (treeWalker.nextNode()) {
        if (charCount + treeWalker.currentNode.length > pos)
            break;

        charCount += treeWalker.currentNode.length;
    }

    var newRange = elem.contentWindow.document.createRange();
    newRange.setStart(treeWalker.currentNode, 1);
    newRange.setEnd(treeWalker.currentNode, 1);

    var selection = elem.contentWindow.getSelection();

    if (selection.removeRange) { // Firefox, Opera, IE after version 9
        selection.removeRange(range);
    } else if (selection.removeAllRanges) { // Safari, Google Chrome
        selection.removeAllRanges();
    }

    selection.addRange(newRange);
}-*/; 
```

此代码于 2016 年 11 月 28 日进行了编辑，以纠正轻微的语法错误。

# maven - Maven部署到相对目录路径

> ID：12549742
> 
> 赞同：12
> 
> 时间：2012-09-23T04:29:16.767
> 
> 标签：maven

我可以部署到绝对目录：

```
<distributionManagement>
    <repository>
        <id>absolute directory</id>
        <url>file:///home/tukushan/workspace/omcutil/repo</url>
    </repository>
</distributionManagement> 
```

但是如何部署到相对于我的项目目录的目录？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T04:47:14.060

使用参数时可以指定相对目录`-DaltDeploymentRepository`，例如：

```
mvn deploy -DaltDeploymentRepository=snapshot-repo::default::file:../../my-local-snapshots-dir 
```

文件 URL 相对于`mvn`运行的目录。

有关参数的更多信息，请参见[此处](http://cemerick.com/2010/08/24/hosting-maven-repos-on-github)`altDeploymentRepository`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:18:32.940

我不认为它可以做到。文件 URL 需要服务器上的挂载点，例如：

```
file://hostname/path/to/file 
```

因此，对于本地文件系统上的文件，只需省略“主机名”组件（解释 3 个前导斜杠）：

```
file:///path/to/file 
```

另一方面，相对路径假定远程文件系统中的起始位置......如果希望 URL 明确，这是不可能支持的。

# lua - Lua 表和迭代

> ID：12549747
> 
> 赞同：2
> 
> 时间：2012-09-23T04:30:30.370
> 
> 标签：lua, iteration, lua-table

这看起来对吗？

```
local data = {}

for i = 1, 22 do
  table.insert( data, data[i].title = "A title here")
end 
```

我在 insert() 中遇到语法错误，我不确定是什么原因造成的。我猜 data[i].title 不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:49:26.617

我认为这就是你想要做的：

```
local data = {}

for i = 1, 22 do
  local newdata = {
    title = "A title here"
  }
  table.insert(data, newdata)
end 
```

`data[i]`直到您创建一个新表并将`nil`其分配到那里。此外，看起来您要么尝试将标题插入，要么尝试`data`将新表插入`data`，很难判断是哪个。我的示例是假设您正在尝试创建一个新表，为其分配一个标题，然后将该新表放入`data`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T11:27:07.480

`table.insert`当这更清楚时，为什么还要使用呢？

```
for i = 1, 22 do
   data[i]= {title = "A title here"}
end 
```

# php - 复制文件时用标题重命名文件名

> ID：12549750
> 
> 赞同：1
> 
> 时间：2012-09-23T04:31:41.960
> 
> 标签：php

我想重命名从使用 simple_html_dom 抓取网络中获得的文档的文件名。这是我的整个代码：

```
foreach($html->find('h3[class=gs_rt] a') as $link1){
    foreach($link1->parent()->parent()->parent()->find('div[class=gs_ggs gs_fl]') as $link2){
        $docLink = $link2->first_child();
        if(strtolower(substr($docLink->href, strrpos($docLink->href, '.'))) === '.pdf') {
            $title   = strip_tags($link1->plaintext);
            $webLink = strip_tags($link1->href);
            $pdfLink = strip_tags($docLink->href);
            copy($pdfLink, $savePath . basename($pdfLink));
        }
    }
} 
```

我想用这一行中的标题重命名文件名：

```
copy($pdfLink, $title)); 
```

但。它不起作用，怎么了？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T04:46:31.240

看起来您需要先从 $link2 创建一个对象，然后才能访问它的属性。

# python - 如何防止上传非图片

> ID：12549752
> 
> 赞同：2
> 
> 时间：2012-09-23T04:32:10.280
> 
> 标签：python, image, google-app-engine, google-cloud-datastore, blobstore

我正在使用 python 在谷歌应用程序引擎上构建一个 webapp，我有以下代码允许用户上传图像，但是如果有人上传不是图像的东西，代码就会崩溃，因为我试图从数据，它当然不接受任何不是图像文件的东西。基本上我想知道是否有一种简单的方法可以防止上传不是图像文件的文件。

```
class RecordPage(BlogHandler):
    def get(self, keyid, title):
        record = individual_record_cache(keyid)
        upload_url = blobstore.create_upload_url('/upload/%s' % (keyid))
        photos = []
        for blobRef in record.blobRefs:
            photos.append(images.get_serving_url(blobRef, size=None, crop=False, secure_url=None))

        global visits
        user = users.get_current_user()
        logout = users.create_logout_url(self.request.uri)       
        self.render("recordpermalink.html", user=user, logout=logout, record=record, visits=visits, photos=photos, upload_url=upload_url, keyid=keyid)

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self, record_id):
        upload_files = self.get_uploads('file')
        blob_info = upload_files[0]
        blobRef = blob_info.key()
        record = Record.get_by_id(int(record_id))
        record.blobRefs.append(blobRef)
        record.put()
        individual_record_cache(record_id, True)
        record_cache(True)
        profile_record_cache(True)
        self.redirect('/record/%s/%s' % (record_id, record.title)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T06:56:15.797

1.  如果您安装了上传处理程序，则无法阻止上传 blob，因为您的处理程序仅在 blob 已在 blobstore 中后调用。但是，您可以检查 blob 并将其删除。

2.  上传 blob 后，您可以使用以下命令检查它是否为图像`ImageService`：

    ```
    Image image = ImagesServiceFactory.makeImageFromBlob(blobKey);
    try {
        image.getFormat();
    } catch (IllegalArgumentException e) {
        // wrong image data - blob uploaded was not an image -> delete it
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T06:17:37.110

您应该使用两种形式的检查（但是都在上传完成之后）。首先，MIME 类型：确保它以“image/*”开头。其次，尝试使用图像处理程序读取图像：

```
from PIL import Image
class UploadHandler(BaseUploadHandler):
    def post(self):
    try:
        upload = self.get_uploads()[0]
        # also check mime type here
        i = Image.open(upload.open()) # open it with PIL
        w, h = i.size # make sure you can read its size
    except:
        # error stuff here, probably means it's not an image 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T05:12:28.703

在上传之前，没有办法知道什么是图像，或者至少上传了前几个字节。

如果您想信任文件名上的文件扩展名，您可以执行以下操作：

```
import mimetypes
blob_mimetype = mimetypes.guess_type(blob_info.filename)[0]
# or just: blob_mimetype = blob_info.content_type
if not blob_mimetype.startswith('image/'):
    self.error(400) 
```

无论代码在做什么“分解”，如果有人想要上传无效图像，或者如果他们在上传之前重命名文件以具有不同的文件扩展名，这可能不会保护您。只有当您试图阻止大多数善意的用户看到错误时，它才会有所帮助。

理想情况下，如果“代码崩溃”意味着从处理程序代码中获取异常，您可以将其包装在 try/except 中并适当地处理它。这是更 Pythonic 的方法，不会进行额外的前期计算或尝试变得比它必须的更聪明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T05:05:16.657

您可以尝试使用[ImageMagick](http://www.imagemagick.org/)来识别文件。只需让上传完成，然后使用他们的命令行工具`identify`查看它是否真的是图像。

[这](http://www.imagemagick.org/script/identify.php)是`identify`命令行文档的链接。但是，我不建议您使用这样的命令。您可能应该使用 PythonMagick 之类的包装器。

**编辑：再次查看您的问题后，您正在使用 GAE。我只有 GAE 的 Java 方面的经验，但我认为由于 Java GAE 并没有真正有很多图像处理 API，Python 方面也不会。我能想到的最好的解决方案是将这项工作转移到像 EC2 这样的 VPS 上。**

# mysql - MySQL基于另一列创建日期范围

> ID：12549756
> 
> 赞同：2
> 
> 时间：2012-09-23T04:32:52.413
> 
> 标签：mysql, date, range

我有一个看起来像这样的日历表：

```
 date   |  qty
-------------------
1998-11-18 |  2
1998-11-19 |  0
1998-11-20 |  0
1998-11-21 |  0
1998-11-22 |  3
1998-11-23 |  0
1998-11-24 |  0
1998-11-25 |  3 
```

我正在尝试生成一个报告，该报告将给出条目的范围以及`0`数量（`qty`）的值。我无法对日期进行硬编码，它们需要由第二列的值确定。从上面看，报告应该是这样的：

```
1998-11-19 - 1998-11-21  
1998-11-23 - 1998-11-24 
```

所有`GROUP BY`和`UNION`查询都给了我单独的条目，但我不知道如何创建日期范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:28:22.393

假设表名是`calendar`，下面的查询完成了这项工作：

```
SELECT 
   MIN(t.date),
   MAX(t.date)
from
    (SELECT
        c.date,
        MAX(prev.date) mindat,
        MIN(next.date) maxdat
    FROM 
        calendar c,
        calendar prev,
        calendar next
    WHERE 
        c.qty = 0 AND
        c.date > prev.date AND prev.qty != 0 AND
        c.date < next.date AND next.qty != 0
    GROUP BY
        c.date) t
GROUP BY
    mindat, maxdat 
```

在内部查询中，我们基本上将`calendar`表连接到自身两次：第一次连接（`c`表到表）为每个表行`prev`选择小于日期的最大日期。`c`这给了我们该行所属区间的开始。第二个连接选择以相同方式结束的间隔。

外部查询从间隔中提取最小和最大日期。

我用您的数据测试了查询，这是输出：

```
min(t.date) max(t.date)
1998-11-19  1998-11-21
1998-11-23  1998-11-24 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T18:32:41.763

在尝试了很多事情之后，解决问题的查询是：

```
SELECT start_date, MAX(dates) AS End
FROM (
  SELECT calendar.*,
         @f:=CONVERT(
             IF(@r<=>gty AND DATEDIFF(dates, @d)=1, @f, dates), DATE
           ) AS start_date,
           @d:=dates, @r:=gty
  FROM     calendar JOIN (SELECT @d:=NULL) AS init
  where gty="0"
  ORDER BY gty, dates
)  AS t
GROUP BY start_date, gty; 
```

谢谢大家的帮助。

# ios - JSON 序列化后 URI 值的语法错误

> ID：12549757
> 
> 赞同：0
> 
> 时间：2012-09-23T04:33:32.420
> 
> 标签：ios, json, rest, tastypie

对于使用 PUT 的 REST Web 服务调用，我需要发送如下所示的 JSON：

```
{"leader":"John Smith","leader_id":"asldfkj234234324asldkfs234","resource_uri":"/api/event/38001"} 
```

相反，当我序列化 JSON 时，它会插入额外的 '/' 字符，这就是我相信我收到 400 错误的原因：

```
{"leader":"John Smith","leader_id":"asldfkj234234324asldkfs234","resource_uri":"\/api\/event\/38001"} 
```

这是我正在使用的代码。有任何想法吗？

```
NSDictionary *myDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                self.clubToEdit.leader, @"leader",
                                self.clubToEdit.leaderID, @"leader_id",
                                @"/api/event/38001", @"resource_uri",
                                nil];

NSError *error; 
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:myDictionary options:0 error:&error];

if (!jsonData) 
{
    NSAssert(FALSE, @"Unable to serialize JSON from NSDict to NSData"); 
} else {
    NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];

    RKParams *params = [RKRequestSerialization serializationWithData:[jsonString dataUsingEncoding:NSUTF8StringEncoding]MIMEType:RKMIMETypeJSON];
    [client put:@"/api/event/?format=json&username=test&api_key=apikey" params:params delegate:self]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:48:30.033

首先，您的问题与代码不匹配。在您的问题中，您声明您需要发送`"\api\event\38001"`，而在您的代码中您编写 " `/api/event/38001"`。由于您的问题仅对第二种情况有意义，因此我认为它是有效的。

现在问题是您的 JSON 序列化程序类*转义*了斜杠（一些特殊字符需要转义），这就是它在这些字符之前添加反斜杠的原因。

# java - 如何确保 LAN 故障立即导致 InterruptedException

> ID：12549758
> 
> 赞同：2
> 
> 时间：2012-09-23T04:33:46.737
> 
> 标签：java, multithreading, interrupt

我在正在执行的服务器中有一个线程（线程 a） `object = ois.readObject();`。当我从客户端拔出 LAN 线时，该线程没有出现异常并继续从流中读取。

服务器上的另一个线程（线程 b）每隔一秒尝试向客户端写入一个字节，以检查连接是否仍然存在：`checkingStream.writeObject(b);`

当我拉这根线时，我得到一个`IOException`from `checkingStream.writeObject(b);`。我希望“线程 b”导致“线程 a”停止从流中读取并继续执行代码/抛出异常。

`threadA.interrupt();`不工作。我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T04:52:43.987

> 当我从客户端拔出 LAN 线时，该线程没有出现异常并继续从流中读取。

好吧，我会说这是正确的行为。互联网（通常）和基于 IP 的网络协议旨在对本地中断具有弹性……例如与网络断开连接。

在您的情况下，问题是读取线程所做的任何事情都没有告诉网络堆栈它期望每秒传递一次数据。因此，网络堆栈无法判断网络是否存在问题……或远程服务……或 1 秒内没有数据只是正常行为。

解决方案是按照 EJP 的建议设置读取超时，或者删除旨在检测网络始终存在的内容。我推荐后者。除非您有一个压倒一切的特定应用程序需要知道网络始终存在，否则最好忽略任何短期网络中断，和/或将您的应用程序级协议设计为具有弹性。

* * *

> 线程A.中断（）；不工作。我该怎么办？

读取超时是一种选择。解除阻塞`read`调用的另一种方法是`close()`在`Socket`. 这将导致与套接字关联的 Java 流上的任何未决读取或写入以异常终止。

* * *

关于读取超时：

> 但是这个论坛的其他答案说这是不安全的

在收到超时异常后尝试继续使用套接字是不安全的。如果使用超时，则需要在套接字级别超时后丢弃连接并创建一个新连接。

如果您不想这样做，那么您需要以不同的方式实现超时。例如，创建一个新线程来监视读取线程的状态及其读取的数据。如果新线程没有检测到读取线程的活动，它可以发出警报……同时在读取调用中阻止读取线程，以防连接恢复正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T04:36:19.820

使用 Socket.setSoTimeout() 设置读取超时。捕获 SocketTimeoutException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T12:33:16.677

我认为扩展 Thread 类和覆盖`interrupt()`方法将是一个更好的选择。它会像：

```
@Override
public void interrupt()
{
    socket.close();
    super.interrupt();
} 
```

# ruby-on-rails - Carrierwave 程序化上传

> ID：12549759
> 
> 赞同：2
> 
> 时间：2012-09-23T04:33:47.597
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave

现在在我的 Rails 应用程序中，我正在使用 Carrierwave 将文件上传到 Amazon S3。我正在使用文件选择器和表单来选择和提交文件，这很好用。

但是，我现在正在尝试从 iPhone 应用程序中发布帖子，并且正在接收文件的内容。我想使用这些数据创建一个文件，然后使用 Carrierwave 上传它，这样我就可以获得正确的路径。

可能文件模型包括：

```
path
file_name
id
user_id 
```

其中 path 是 Amazon S3 url。我想做这样的事情来构建文件：

```
 data = params[:data]
~file creation magic using data~
~carrierwave upload magic using file~
@user_id = params[:id]
@file_name = params[:name]
@path = path_provided_by_carrierwave_magic
File.build(@user_id, @file_name, @path) 
```

真的很想有人指出我正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:15:28.223

这是我写的通过carrierwave从ios应用程序上传到s3的内容：

首先是照片模型

```
class Photo
  include Mongoid::Document
  include Mongoid::Timestamps

  mount_uploader :image, PhotoImageUploader

  field :title, :type => String
  field :description, :type => String
end 
```

第二个在 Api::V1::PhotosController

```
def create
    @photo = current_user.photos.build(params)
    if @photo.save
        render :json => @photo.to_json, :status=>201
    else
        render :json => {:errors => @photo.errors}.to_json, :status=>403
    end
end 
```

然后使用[AFNetworking从我的 iPhone 应用程序调用](https://github.com/AFNetworking/AFNetworking)

```
-(void) sendNewPhoto
{
    NSURL *url = [NSURL URLWithString:@"http://myserverurl.com"];

    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:_photoTitle.text, @"title", _photoDescription.text, @"description",nil];

    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

    NSString *endUrl = [NSString stringWithFormat:@"/api/v1/photos?auth_token=%@", [[User sharedInstance] token]];

    NSData *imageData = UIImageJPEGRepresentation(_photo.image, 1.0);
    NSURLRequest *request = [httpClient multipartFormRequestWithMethod:@"POST" path:endUrl parameters:params constructingBodyWithBlock:^(id<AFMultipartFormData> formData) {
        [formData appendPartWithFileData:imageData name:@"image" fileName:@"image.jpg" mimeType:@"image/jpg"];
    }];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSLog(@"%@", JSON);
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Error creating photo!");
        NSLog(@"%@", error);
    }];

    [operation start];
} 
```

在 JSON 响应中，我可以获得 Photo 的新实例，其中 image.url 属性设置为 s3 中的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:46:33.730

好吧，我有一个可行的解决方案。我将最好地解释我所做的事情，以便其他人可以从我的经验中学习。开始：

假设你有一个可以拍照的 iPhone 应用：

```
//handle the image that has just been selected
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    //get the image
    UIImage* image = [info valueForKey:@"UIImagePickerControllerOriginalImage"];

    //scale and rotate so you're not sending a sideways image -> method provided by http://blog.logichigh.com/2008/06/05/uiimage-fix/
    image = [self scaleAndRotateImage:image];

    //obtain the jpeg data (.1 is quicker to send, i found it better for testing)
    NSData *imageData = [NSData dataWithData:UIImageJPEGRepresentation(image, .1)];

    //get the data into a string
    NSString* imageString = [NSString stringWithFormat:@"%@", imageData];
    //remove whitespace from the string
    imageString = [imageString stringByReplacingOccurrencesOfString:@" " withString:@""];
    //remove < and > from string
    imageString = [imageString substringWithRange:NSMakeRange(1, [imageString length]-2)];

    self.view.hidden = YES;
    //dismissed the camera
    [picker dismissModalViewControllerAnimated:YES];

    //posts the image
    [self performSelectorInBackground:@selector(postImage:) withObject:imageString];
}

- (void)postImage:(NSString*)imageData
{
    //image string formatted in json
   NSString* imageString = [NSString stringWithFormat:@"{\"image\": \"%@\", \"authenticity_token\": \"\", \"utf8\": \"✓\"}", imageData];

    //encoded json string
    NSData* data = [imageString dataUsingEncoding:NSUTF8StringEncoding];

    //post the image
    [API postImage:data];
}[/code]

Then for the post:

[code]+(NSArray*)postImage:(NSData*) data
{
    //url that you're going to send the image to
    NSString* url = @"www.yoururl.com/images";

    //pretty self explanatory request building
    NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:url]];

    [request setTimeoutInterval:10000];

    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    [request setHTTPMethod: @"POST"];

    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];

    [request setHTTPBody:data];

    NSError *requestError;
    NSURLResponse *urlResponse = nil;

    NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&requestError];

    return [API generateArrayWithData:result];
} 
```

在 rails 方面，我设置了一个专门用于处理移动图像的方法，这应该可以帮助您通过 Carrierwave 将图像发布到您的 Amazon S3 帐户：

```
def post
      respond_to do |format|
  format.json {
 #create a new image so that you can call it's class method (a bit hacky, i know)
  @image = Image.new
#get the json image data
  pixels = params[:image]
#convert it from hex to binary
pixels = @image.hex_to_string(pixels)
#create it as a file
   data = StringIO.new(pixels)
#set file types
    data.class.class_eval { attr_accessor :original_filename, :content_type }
    data.original_filename = "test1.jpeg"
    data.content_type = "image/jpeg"
#set the image id, had some weird behavior when i didn't
    @image.id = Image.count + 1
#upload the data to Amazon S3
  @image.upload(data)
#save the image
  if @image.save!
  render :nothing => true
  end
  }
  end
  end 
```

这对我来说很适合发帖，我觉得应该可以扩展。对于类方法：

```
#stores the file
  def upload(file)
  self.path.store!(file)
  end

#converts the data from hex to a string -> found code here http://4thmouse.com/index.php/2008/02/18/converting-hex-to-binary-in-4-languages/
  def hex_to_string(hex)
    temp = hex.gsub("\s", "");
    ret = []
    (0...temp.size()/2).each{|index| ret[index] = [temp[index*2, 2]].pack("H2")}
    file = String.new
    ret.each { |x| file << x}
    file  
  end 
```

并不是说这段代码是完美的，即使是远景也不行。但是，它确实对我有用。如果有人认为可以改进，我愿意接受建议。希望这可以帮助！

# android - 当 ACTION_MOVE 到某些点时如何释放 onTouch 事件？安卓

> ID：12549760
> 
> 赞同：0
> 
> 时间：2012-09-23T04:34:32.800
> 
> 标签：android, multi-touch

我有一个`onTouch`与我的`View`. 由于某些原因，我想`onTouch`在将手指移动到屏幕的某个点后释放动作：

```
switch(event.getAction & MotionEvent.ACTION_MASK){
    case ACTION_UP:
        // When I release the touch, Event goes here 
        break;
    case ACTION_DOWN:
        // when I touch screen, Event goes here
        break;
    case ACTION_MOVE:
        // When I move the finger, Event goes here
        break;

} 
```

有没有办法`ACTION_MOVE`通过代码（不是我的手指：D）释放触摸。欢迎任何建议！
还有一个问题：我不知道 2 个函数之间的区别：`event.getX()`和`event.getRawX()`. 任何人都可以解释一下吗？（有时，我使用`getX()`，我的代码会出错，但如果我使用`getRawX()`，它工作得很好！！）
P/s：对不起，如果有任何打字或英文错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:25:47.303

`onTouchEvent`一种方法是用一个`ACTION_UP`值重新调用函数。你可以使用这样的东西：

```
if(wantToRelease) {
    MotionEvent newEvent = MotionEvent.obtain(event);  
    newEvent.setAction(MotionEvent.ACTION_UP);
    this.onTouchEvent(newEvent);
    return true;
} 
```

`getX/Y()`和之间的区别在于`getRawX/Y()`它`getX/Y()`针对容器和视图进行了调整，如果您的事件跨越多个视图，这有时可能会出现问题。`getRawX/Y()`未调整

# linux - 为什么 telnet 和 nmap 不反映我为 ec2 安全组关闭的端口？

> ID：12549763
> 
> 赞同：1
> 
> 时间：2012-09-23T04:34:51.507
> 
> 标签：linux, ubuntu, amazon-ec2, telnet

对于我的 ec2 服务器（ubuntu 12.04）上的安全组，我只打开了 tcp 端口 80 和 22。我可以从浏览器访问我的网站，也可以通过 ssh 访问服务器。

然后我从安全组中删除了端口 80 并保存。我不再能够从浏览器访问我的网站。

但是，当我运行此命令时

```
nmap -p 80 127.0.0.1

Starting Nmap 5.21 ( http://nmap.org ) at 2012-09-23 04:29 UTC
Nmap scan report for localhost (127.0.0.1)
Host is up (0.000067s latency).
PORT   STATE SERVICE
80/tcp open  http 
```

和这个

```
telnet 127.0.0.1 80
Trying 127.0.0.1...
Connected to 127.0.0.1. 
```

它们表明端口 80 已打开，即使它已从 ec2 安全组中删除，我也无法再访问该网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:55:20.623

据我所知，ec2 安全组设置独立于实例防火墙规则。将 ec2 安全组视为 ec2 实例防火墙之上的防火墙层。因此，**当且仅当**安全组将其打开*并且*您的实例内的防火墙未阻止该端口时，该端口才可访问。任一层对端口的阻塞都会使端口无法访问。

# c++ - Boost::asio SSL 与 Facebook 的连接行为异常

> ID：12549764
> 
> 赞同：1
> 
> 时间：2012-09-23T04:34:57.410
> 
> 标签：c++, facebook, boost-asio

我正在使用 boost::asio 向 Facebook 发出异步 http 请求（主要将客户端令牌交换为我可以进行 API 调用的令牌）。大多数时候它工作得很好，几乎可以立即返回数据。

但是有时它会在连接过程中挂起 3 或 4 秒，然后返回（请记住这是 SSL）。有时它甚至会返回“连接被拒绝”错误。这是每次都传递相同的数据（我自己的 facebook 令牌用于本地测试）。

我不确定我是否搞砸了（我的代码与 boost 网站上的示例几乎完全相同）或者这是因为 Facebook。Facebook 服务器挂起连接到可能超时的点是否很常见？

我的连接代码如下所示：

```
m_sslSocket.set_verify_mode(boost::asio::ssl::verify_peer);
m_sslSocket.set_verify_callback(boost::asio::ssl::rfc2818_verification(a_server));

boost::asio::async_connect(m_sslSocket.lowest_layer(), a_endpointIterator, boost::bind(&BoostHttpRequest::HandleConnect, this, boost::asio::placeholders::error)); 
```

考虑到它在大多数情况下都可以正常工作并且一直挂在连接上，我猜这是 Facebook 的问题，而不是代码的问题。任何从事 Facebook API 调用的人都可以投入两分钱吗？

# java - java中的文件选择器

> ID：12549765
> 
> 赞同：3
> 
> 时间：2012-09-23T04:35:08.410
> 
> 标签：java, swing, jbutton, actionlistener, jfilechooser

我试图在我的代码中使用文件选择器，我`"Not an enclosing class"`在`"int returnVal = fc.showOpenDialog(FileChooserDemo.this);"`. 下面是我的代码。任何猜测来解决它？

```
browse_button.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent e) {

     int returnVal = fc.showOpenDialog(FileChooserDemo.this);

      File file = fc.getSelectedFile();

                log.append("Opening: " + file.getAbsolutePath() + "." + "\n");
                String ab=file.getAbsolutePath();
                System.out.println(ab);

}}); 
```

我已经做了`actionlistener`in main 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:55:53.143

您的问题是您在静态方法中进行此调用`main(...)`，并尝试`FileChooserDemo.this`在此静态方法中使用（对封闭类的引用）。好吧，这是行不通的，因为`this`静态世界中没有。解决方案是在非静态代码中执行此操作，例如非静态方法或类的构造函数。

# extjs - Ext.form.Panel 没有方法 'getEl'

> ID：12549769
> 
> 赞同：1
> 
> 时间：2012-09-23T04:35:50.627
> 
> 标签：extjs, extjs4, extjs4.1

当我执行下面的代码时，我可以在我的 chrome 中看到一个异常，如下所示：

> 未捕获的类型错误：对象 [object Object] 没有方法“getEl”

```
var search = new Ext.form.Panel({
    renderTo: 'pan',
    title: 'Basic Panel',
    collapsible:true,
    width: 400,
    defaults: {width: 230},
    defaultType: 'textfield',
    bodyPadding: 10,
    //layout: 'form',
    frame:true,
    items: [{
            fieldLabel: 'Username',
            name: 'username',
            id: 'username',
            allowBlank:false
        },
        {
            fieldLabel: 'Password',
            name: 'password',
           inputType:'password',
            allowBlank:false
        },

        {
            fieldLabel: 'First Name',
            name: 'firstname',
           inputType:'text',
            allowBlank:false
        }, 
        {
            fieldLabel: 'Last Name',
            name: 'lastname',
           inputType:'text',
            allowBlank:false
        },
        {
            fieldLabel: 'E-Mail Address',
            name: 'email',
           vtype:'email',

           allowBlank:false
        },

        {
            fieldLabel: 'State',
            name: 'state',
           allowBlank:false
        },
        {
            fieldLabel: 'City',
            name: 'city',
           allowBlank:false
        }, 
       {
            fieldLabel: 'Country',
            name: 'country',
           allowBlank:false
        }, 
        {
            inputType: 'hidden',
            id: 'submitbutton',
            name: 'myhiddenbutton',
            value: 'hiddenvalue'
        }

    ],
    buttons: [{
        text: 'Submit',
        handler: function() {
            search.getForm().getEl().dom.action = 'FormServlet';
            search.getForm().getEl().dom.method = 'POST';
            search.getForm().submit();
        }
    }] 
```

我在包含名称、类和 url 的 web.xml 文件中定义了 servlet。

请让我知道如何解决此问题。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:41:16.900

不要把事情弄得那么复杂。我猜 ExtJS 会覆盖您的设置或根本没有使用它们，因为您没有使用适当的配置属性来设置它。

这是两者的API链接

*   **[方法](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-method)**
*   **[网址](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-url)**

这是您使用这些扩展的演示代码

```
var search = new Ext.form.Panel({
    renderTo: 'pan',
    title: 'Basic Panel',
    collapsible:true,
    width: 400,
    defaults: {width: 230},
    defaultType: 'textfield',
    bodyPadding: 10,
    url: 'FormServlet', // you can fix a parameter like this : FormServlet?action=create
    action: 'POST',
    frame:true,
    items: [
         //....
    ],
    buttons: [{
        text: 'Submit',
        handler: function() {
            search.getForm().submit();
        }
    }] 
```

或者这样做更灵活

```
var search = new Ext.form.Panel({
    renderTo: 'pan',
    title: 'Basic Panel',
    collapsible:true,
    width: 400,
    defaults: {width: 230},
    defaultType: 'textfield',
    bodyPadding: 10,
    url: 'FormServlet', 
    action: 'POST',
    frame:true,
    items: [
         //....
    ],
    buttons: [{
        text: 'Submit',
        handler: function() {
            Ext.Ajax.request({
                url : 'FormServlet',
                method:'POST', 
                params : {
                    yourParam: Ext.encode(form.getValues())
                },
                scope : this,
                //method to call when the request is successful
                success : this.onLoginSuccess,
                //method to call when the request is a failure
                failure : this.onLoginFailure
            });
        }
    }] 
```

# javascript - 计算多选框中的选择数

> ID：12549770
> 
> 赞同：13
> 
> 时间：2012-09-23T04:36:05.727
> 
> 标签：javascript, html

我有一个多选列表，其中有 5 个以上的选项，我想计算用户选择的选项的选择数量。

如何使用java脚本来做到这一点？

我尝试了以下方法，但对我不起作用：

```
var x = document.getElementById("preference").count; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-23T04:50:54.207

假设`foo`是选择的 id。

如果您使用普通的 javasript：

```
var options = document.getElementById('foo').options, count = 0;
for (var i=0; i < options.length; i++) {
  if (options[i].selected) count++;
} 
```

如果你使用 jQuery：

```
var count = $('#foo option:selected').length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T04:56:36.227

您可以尝试这个来获取多个选择框用户选择的选项计数及其选择的名称。试试这个链接[http://jsfiddle.net/N6YK8/8/](http://jsfiddle.net/N6YK8/8/)

```
function getCount(){
             var comboBoxes = document.querySelectorAll("select");
             var selected = [];
             for(var i=0,len=comboBoxes.length;i<len;i++){
                    var combo = comboBoxes[i];
                    var options = combo.children;
                    for(var j=0,length=options.length;j<length;j++){
                         var option = options[j];
                         if(option.selected){
                           selected.push(option.text);
                         }
                    }
             }
            alert("Selected Options '" + selected + "' Total Count "+ selected.length);
         } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-10T12:33:50.043

这为我做到了。 `var x = document.querySelector("#preference").selectedOptions.length;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T04:52:12.583

使用`:selected`选择器，如下所示：

```
$('#example option:selected').length; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T06:43:58.960

如果 < IE8 不是问题，你可以做一个单行喜欢`document.querySelectorAll("option:checked")`得到所有选定的选项。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-24T07:54:02.510

```
function SelectPage(elem)
{
    alert(elem);
}
<select id="page" name="section" onChange="SelectPage(this);" id="num">
    <option value="">Select Section</option>
    <option value="1">Page-1</option>
    <option value="2">Page-2</option>
    <option value="3">Page-3</option>
    <option value="4">Page-4</option>
    <option value="5">Page-5</option>
</select> 
```

# javascript - 有没有办法在旧版浏览器（JS？）中使用 CSS3 属性？

> ID：12549773
> 
> 赞同：4
> 
> 时间：2012-09-23T04:36:32.650
> 
> 标签：javascript, html, css

例如border-radius、box-shadow等...

我正在寻找可以在 IE6+ 上运行的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T04:42:10.247

看看[CSS3PIE](http://css3pie.com/)。它允许您在 Internet Exploder 中添加大部分 CSS3 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T04:44:03.817

你可以通过 [Modernizr](http://modernizr.com/)（一个用于实现 CSS3 后备的有用的 JavaScript 工具）来做到这一点。或[CSS3 PIE](http://css3pie.com/)或[Selectivzr](http://selectivizr.com/)

**好读**

[使用 CSS3：旧版浏览器和常见注意事项](http://coding.smashingmagazine.com/2011/05/03/using-css3-older-browsers-and-common-considerations/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T04:38:54.587

我相信您可能正在寻找类似[http://selectivizr.com/的东西](http://selectivizr.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T04:56:31.990

供参考

**谷歌浏览器框架**

Google Chrome Frame 是一个开源插件，它将 Google Chrome 的开放网络技术和快速的 JavaScript 引擎无缝地引入 Internet Explorer。使用 Google Chrome Frame，您可以：

*   立即开始使用开放式 Web 技术（例如 HTML5 画布标签），即使是 Internet Explorer 6、7、8 或 9 尚不支持的技术。
*   利用 JavaScript 性能改进，使您的应用程序更快、响应更快。

[http://www.google.com/chromeframe?quickenable=true](http://www.google.com/chromeframe?quickenable=true)

# c++ - 带有外部“C”的 C++ 导致重复符号错误

> ID：12549787
> 
> 赞同：0
> 
> 时间：2012-09-23T04:39:59.407
> 
> 标签：c++, extern, include-guards

我正在尝试在头文件中为 c++ 类使用外部“C”函数。

当我编译时，我不断收到错误

```
duplicate symbol _currentInstance in:
main.o
GLHandler.o 
```

我以为我有合适的警卫，但似乎无法弄清楚为什么会发生这种情况。任何帮助将非常感激。

这是头文件。

```
#ifndef GLHANDLER_H
#define GLHANDLER_H

#include "LoadedObject.h"

#ifdef __cplusplus
extern "C" {
void displayCallback();
}
#endif

class GLHandler {

private:
    LoadedObject *object;

public:
    GLHandler(LoadedObject *);
    void initializeVBO(LoadedObject *);
    void renderObject(struct model *);
    void displayFunction(void);
    model *createModel(void);
    void setupDisplayCallback();

};

GLHandler *currentInstance;

#ifdef __cplusplus
}

#endif

#endif 
```

编辑：大卫很快指出，外部 GLHandler *currentInstance 修复了错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T04:45:32.350

这个问题与声明无关`extern "C"`- 您在标头中定义了一个全局变量，因此它在每个编译单元中定义：

```
GLHandler *currentInstance; 
```

在标题中，您应该改用：

```
extern GLHandler *currentInstance; 
```

然后在*一个*.cpp 文件中有：

```
GLHandler *currentInstance; 
```

作为旁注，就目前而言，标头仅对 C++ 有效，因为它具有类定义。这些`#ifdef __cplusplus`指令是毫无意义的混乱（尽管无害）。

# model - 在 cakephp 中检索模型数据的“belongsTo”部分

> ID：12549790
> 
> 赞同：0
> 
> 时间：2012-09-23T04:40:41.523
> 
> 标签：model, cakephp-1.3, belongs-to, cakephp-model

也许是因为我累死了，但我在这里完全错过了一些东西。我从一个朋友那里继承了一个蛋糕 1.3 应用程序，他正确设置了他的桌子，但我丢失了一些数据。当我打印数据数组时，我期望的是：

```
 Array
(
[Listing] => Array
    (
        [id] => 74
        [listing_name] => El Toro
        [category_id] => 3
        [location_id] => 2
        [long_desc] => 
    ),

[Category] => Array
    (
        [id] => 3
        [category_name] => Restaurant

    ),
) 
```

（列表属于类别）。控制器函数定义如下：

```
function view_detail(){

    $this->set('um','true');
    $l=$this->Listing->find('first', array('conditions'=>array('id'=>$this->params['cid'])));
    $this->set('lst', $l);

} 
```

相反，我得到了这个：

```
 Array
(
[Listing] => Array
    (
        [id] => 74
        [listing_name] => El Toro
        [category_id] => 3
        [location_id] => 2
        [long_desc] => 
    )
) 
```

翻看他设置的数据库表，所有 cake 的约定都被遵循：listings 有 category_id，categories 有 listing_id。我相信不久前有人告诉我，如果您有简单的千篇一律的模型/关联，您甚至不需要设置模型页面，因为蛋糕会自动知道关联。但无论如何我都做了，并没有什么不同。我尝试将递归一直设置为 2，但没有任何区别。Sooooo ....不擅长cakephp，我不知道我做错了什么。顺便说一下，我正在寻找列出列表的类别名称（餐厅）。

**更新**

这是我的2个模型：

```
class Category extends AppModel{

var $hasMany = array( 'Listing' );

}

class Listing extends AppModel{
var $name='Listing';
var $belongsTo = array( 'Location'=>array('foreignKey'=>'location_id'),   'Category'=>array('foreignKey'=>'category_id') );

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:21:26.640

在 1.x 模型文件应该是小写和下划线，所以`app/model/listing.php`. 当您的模型类显示为 AppModel 时，这意味着 cake 没有找到您的模型类并基于 AppModel 制作通用模型。

# java - 在现有的 Swing 项目中使用 JavaFX 的 MediaPlayer

> ID：12549793
> 
> 赞同：3
> 
> 时间：2012-09-23T04:41:03.177
> 
> 标签：java, multithreading, swing, javafx-2

我有一个用 Swing 编写的应用程序，我想在其中使用 JavaFX 的 MediaPlayer 播放音频/声音文件。

这是主文件的精简版：

```
class MyApp
{
   private MyApp myApp;
   private JFrame myFrame;
   private Media media;
   private MediaPlayer mediaPlayer;
   public static void main(String[] args)
   {
      Runnable thread = new Runnable()
      {
         public void run()
         {
             myApp = new MyApp();
         }          
      };
      SwingUtilities.invokeLater(thread);
  }
  public void MyApp()
  {
    //this is called by SwingUtilities.invokeLater();

    URL url = //getting URL to a sound file stored locally//;
    media = new Media(url.toString() );
    mediaPlayer = new MediaPlayer( media );                        
    mediaPlayer.play();

    myFrame = new JFrame(); //building swing UI here
  } 
```

这似乎在 Netbeans 中有效。但是，当 Netbeans 构建一个 .jar 并且我尝试运行该 .jar 时，我在 .jar 目录中构建了一个错误日志文件，其中包含一些内存/线程错误。

我是否需要使用该`Platform.runLater()`方法才能使其正常工作？还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T04:54:46.107

当与 Swing 应用程序中嵌入的 JavaFX 控件交互时，一定要在`Platform.runLater`调用中执行此操作，而不是`Swing.invokeLater`调用。

您还应该确保 JavaFX 系统已初始化，并且（最好）使用本文中提到的 JavaFX 打包工具对应用程序进行确认：[在普通 Java 应用程序中使用 JavaFX MediaPlayer 播放音频？](https://stackoverflow.com/questions/12548603/playing-audio-using-javafx-mediaplayer-in-a-normal-java-application).

虽然运行一些在 JavaFX 线程之外创建一些 JavaFX 控件的代码适用于大多数控件，甚至与某些控件的某些交互有时似乎在 JavaFX 线程之外工作，但实际上我发现它不值得冒风险，并且可能会掩盖错误或竞争条件这样做的时候可能会遇到。JavaFX 在设计时考虑了 UI 的单线程交互模型，因此最好使用`Platform.runLater`. Swing 的事件调度线程也是如此。您需要将这两个框架之间的线程交互分开。

查看问题中 MyApp 代码中的 5 行，我有以下建议。

这在哪个线程上执行无关紧要，因为它不与任何框架交互：

```
URL url = //getting URL to a sound file stored locally//; 
```

使用 JavaFX 的控件确实应该包装在 Platform.runLater 中：

```
media = new Media(url.toString() );
mediaPlayer = new MediaPlayer( media );                        
mediaPlayer.play(); 
```

与 Swing 框架交互，因此应包含在`Swing.invokeLater`：

```
myFrame = new JFrame(); //building swing UI here 
```

注意：只调用一次runLater是不够的，还需要在MediaPlayer play调用之后从runLater主体内部调用Swing jframe调用。

# python - __init__ 方法给出异常

> ID：12549794
> 
> 赞同：1
> 
> 时间：2012-09-23T04:41:03.637
> 
> 标签：python

我是 python 新手。我正在尝试运行以下程序：

```
class Temp():

    def __init__(self):
        print 'hello world!'

    def main():
        temp = Temp()
        print 'here i am'

    if __name__ == '__main__':
        main() 
```

我收到此错误：

```
Traceback (most recent call last):
File "test.py", line 1, in <module>
  class Temp():
File "test.py", line 11, in Temp
  main()
File "test.py", line 7, in main
  temp = Temp() 
```

为什么我收到此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T04:43:26.137

Unndent`main()`和它下面的东西，现在它是一种`Temp`非独立功能的方法。您实际上是在尝试调用没有`Temp`.

缩进是 python 如何确定方法、类、循环中的内容。看这里：

**编辑**：

```
class Temp():
    def __init__(self):
        # this method is in Temp
        pass

    def prettyPrint(self):
        # this method is also in temp
        print("I'm in temp")

def prettyPrint(self):
    #this is not in Temp (notice the indentation change)
    print("I'm not in temp")

if __name__ == "__main__":
    #this is not in temp either
    t = Temp()
    t.prettyPrint()
    prettyPrint(None) 
```

# solr - 在 Eclipse 中为 solr 设置环境变量

> ID：12549797
> 
> 赞同：1
> 
> 时间：2012-09-23T04:41:20.400
> 
> 标签：solr

您好，我正在尝试从 Eclipse 运行 solr。我知道我们需要设置 solr home。如果我使用`web.xml`来设置它可以工作

```
<env-entry>
   <env-entry-name>solr/home</env-entry-name>
   <env-entry-value>/put/your/solr/home/here</env-entry-value>
   <env-entry-type>java.lang.String</env-entry-type>
</env-entry> 
```

但是，如果我尝试在 eclipse 中使用相同的设置，则通过设置 Runtime->Tomcat Configuration->Environment 或 Runtime->Tomcat Configuration->Argument VM Arguments 会失败。我使用了 -Dsolr.data.dir=/home/test/test 我可以知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:01:54.517

您需要设置的环境变量是`-Dsolr.solr.home`. 看起来您正在`-Dsolr.data.dir`eclipse 中设置变量，这是您要放置索引的位置。如果您有这样的占位符，则这种配置有效

```
<dataDir>${solr.data.dir}</dataDir> 
```

在你的`solrconfig.xml`，但无论如何你需要设置第`solr_home`一个。

# javascript - 了解此 javascript 代码的输出

> ID：12549800
> 
> 赞同：0
> 
> 时间：2012-09-23T04:42:41.463
> 
> 标签：javascript

使用 C/C++、Java 编程后，我发现很难理解以下程序的输出。

[http://jsfiddle.net/iamrohitbanga/nubgw/](http://jsfiddle.net/iamrohitbanga/nubgw/)

```
var foo = function() {}
foo.prototype.out = function() {
    console.log(this.num);
}
var bar = function() {};

var f = new foo();
f.num = 1;
var b = new bar();
b.num = 2;

console.log(this);           // 1
f.out();                     // 2
foo.prototype.out.call(b);   // 3
foo.prototype.out.call(bar); // 4 
```

我看到以下输出

```
Window
1
2
undefined 
```

我已经用 javascript 编码有一段时间了，可以理解一些概念，但对我来说并不是一切都清楚。

我有一个粗略的了解。我觉得在全局空间中 this 指向窗口，因此第一行输出很清楚。对于第二行，我认为由于函数 out 是在 f 上调用的，所以 this in out 的值是 f。对于第三个，我的感觉是，通过调用输入为 b 的函数，-this 的值被设置为 b。对于第四个 bar 是一个全局对象，它的字典中没有名为“num”的成员。

我的理解正确吗？有人可以在这个程序的上下文中解释“this”和“prototype”的作用吗？我发现原型的语法有点晦涩。当我在 gmail 窗口中按 F12 并将程序粘贴到那里时，也在 chrome 中。第三行输出未定义，不是 2。但在 jsfiddle 中是 2。这似乎有点令人毛骨悚然。为什么不一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:11:54.543

* * *

**`console.log(this)`**

你的假设是正确的。您的程序在浏览器中的全局范围内运行`window`。

* * *

**`f.out();`**

我不确定原型的概念是否存在于 C/C++ 或 Java 中。本质上，对象构造函数的原型是对象可以继承的东西。将函数添加到`foo`s 的原型使其可用于`foo`s 的所有实例。

在这种情况下，在程序的前面，您创建了一个`foo`被调用的实例`f`。然后，将`f`被调用的属性设置`num`为`1`。

`out`, 一个函数可`f`通过扩展`foo`'prototype `console.log`s`num`被调用的上下文对象的属性（在本例中为`f`）。

因此，`f.out();`打印`1`.

* * *

**`foo.prototype.out.call(b);`**

`call`是`Function`对象原型上的一个函数。`call`在第一个参数的上下文中调用函数。本质上，这一行 ( `foo.prototype.out.call(b);`) 与`b.out();`作为`b`上下文参数传递的操作相同。

此行输出的其余解释与最后一行的全部解释相同

* * *

**`foo.prototype.out.call(bar);`**

在最后一行中，您正在调用`out`. 是一个函数对象。没有属性，因此是。`bar``bar``bar``num``bar.num``undefined`

这并不是说您不能`bar`像使用`f`and那样添加属性`b`。函数也是对象。因此，您可以将属性添加到与和`bar`完全相同的方式。添加会产生你认为它会产生的结果。或者至少我希望你认为它会......`f``b``bar.num = 3`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:02:42.140

`this`表示代码执行的范围。在您的情况下，它是全局范围`window`。

JavaScript 中的原型只是一个具有属性和方法的对象。您可以向它添加成员，也可以从它继承。您可以阅读这篇[文章](http://net.tutsplus.com/tutorials/javascript-ajax/prototypes-in-javascript-what-you-need-to-know/)以获取更多信息。

让我们分解您的代码，一一查看。

1.  **`f.out();`**

    这也指的是以下对象

    ```
    var f = new foo();
    f.num = 1; //Here you define a property `num` as 1 
    ```

    然后，当您调用`f.out()`原型函数时，将简单地记录`num`

2.  **`foo.prototype.out.call(b);`**

    在这里，您可以直接访问该函数并将一个对象传递给该函数。因此，当执行该方法时，它`this`代表的是传递的对象，因此最终记录了它的值。

3.  **`foo.prototype.out.call(bar);`**

    在这部分，对象 bar 是一个空对象`var bar = function() {};`，因此函数无法读取其`num`属性，因此输出为`undefined`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T05:25:22.323

this 指的是当前范围。

话虽如此，一步一步这就是为什么你得到你得到的结果

```
var foo = function() {}
foo.prototype.out = function() {//f.out inherits this and so prints 1
    console.log(this.num);
}
var bar = function() {};

var f = new foo();
f.num = 1;
var b = new bar();
b.num = 2;

console.log(this);           
 /* At this point you are making the above log call, outside of any local scope.
 in the global scope =this= refers to =window= */

f.out();
 /* In here the keyword =this= refers to the object =f=
 If we look above it says f.num is 1, so the inherited function which outputs 
 the =num= property then outputs 1.*/

foo.prototype.out.call(b);
/*by adding the call method you are assigning the this keyword to the b object, and
since b.num is 2, just as in the previous step that is being output*/

foo.prototype.out.call(bar); // 4
/*This returns undefined because as in all previous steps, inside the =out= 
function we are printing object.num.  The bar object, however, does not have 
this value*/ 
```

我已将解释作为注释放在代码中。至于 gmail 中的奇怪行为，有可能因为这些都在全局范围内，某些东西被 gmail 中的代码覆盖了。这是一个应该防止上述情况发生的闭包。第一个日志将更改，因为它将不再引用全局范围

```
(function(){

   var foo = function() {}
   foo.prototype.out = function() {
       console.log(this.num);
   }
   var bar = function() {};

   var f = new foo();
   f.num = 1;
   var b = new bar();
   b.num = 2;

   console.log(this);           // 1
   f.out();                     // 2
   foo.prototype.out.call(b);   // 3
   foo.prototype.out.call(bar); // 4

})(); 
```

# asp.net-mvc - Azure Web 角色压力测试 - AsyncController 中的 1000 毫秒阻塞操作

> ID：12549805
> 
> 赞同：2
> 
> 时间：2012-09-23T04:44:13.657
> 
> 标签：asp.net-mvc, iis-7, azure, task-parallel-library, azure-web-roles

今天，我想在 MVC3 Web 角色的 AsyncController 中模拟等待一个长时间运行的阻塞进程（5 到 30 秒）。然而，首先，我只是从 1 秒开始，让事情顺利进行。是的，这样做的智慧值得怀疑，因为阻塞操作目前不能在 I/O 完成端口上异步运行到外部服务，但我想看看这种特殊情况下的性能限制是多少。

在我的网络角色中，我部署了 6 个小型实例。唯一的控制器是 AsyncController，有两个简单的方法来模拟 1000 毫秒的阻塞操作。

MVC3 Web 角色控制器就是这样的：

```
public class MessageController : AsyncController
{
    public void ProcessMessageAsync(string id)
    {
        AsyncManager.OutstandingOperations.Increment();
        Task.Factory.StartNew(() => DoSlowWork());
    }

    public ActionResult ProcessMessageCompleted()
    {
        return View("Message");
    }

    private void DoSlowWork()
    {
        Thread.Sleep(1000);
        AsyncManager.OutstandingOperations.Decrement();
    }
} 
```

接下来，我从 Amazon EC2 向 Web 角色施加压力。使用 12 台服务器，我缓慢增加负载，接近 550 个请求/秒。任何超出此范围的尝试都会遇到明显的线程饥饿和后续错误。我假设我们达到了 CLR 线程限制，我理解为每个 CPU 100 个线程。计算 AsyncController 的一些开销，对于 1000 毫秒的阻塞操作，每台服务器平均每秒 550/6 = 92 个请求似乎符合这个结论。

这是真的吗？我见过其他人说类似的话，他们在这种类型的负载下每个实例每秒达到 60 到 80 个请求。该系统上的负载将主要由运行时间较长的操作组成，因此当 5000 毫秒的任务上线时，每秒 1000 毫秒的 92 个请求将大大减少。

如果没有通过多个单独的 Web 角色前端路由阻塞 I/O 的请求以将此负载分散到更多内核，有没有办法在 1000 毫秒阻塞时间内获得高于每秒 90 个左右请求的明显限制？我在这里犯了某种明显的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T08:17:06.297

很抱歉，我不得不说这个购买你被所有博客误导，声称通过简单地使用`Task.Factory.StartNew`是解决你所有问题的方法，好吧，事实并非如此。

## 使用 Task.Factory.StartNew 进行负载测试

看看我对您的代码进行的以下负载测试（我将睡眠时间更改为 10 秒而不是 1 秒，以使其更糟）。该测试模拟了 200 个固定用户执行总共 2500 个请求。看看有多少由于线程饥饿而失败的请求：

![在此处输入图像描述](../Images/a86d77972f6143149ba3fdbd4fe21ab0.png)

如您所见，即使您将 AsyncController 与 Task 一起使用，线程饥饿仍然会发生。可能是因为长时间运行的过程造成的吗？

## 使用 TaskCreationOptions.LongRunning 进行负载测试

您知道您可以指定任务是否长时间运行吗？看看这个问题：[我不使用 TaskCreationOptions.LongRunning 时的奇怪行为](https://stackoverflow.com/questions/5295265/strange-behavior-when-i-dont-use-taskcreationoptions-longrunning)

> 当您不使用 LongRunning 标志时，任务被安排在线程池线程上，而不是它自己的（专用）线程上。这可能是您的行为改变的原因 -**当您在没有设置 LongRunning 标志的情况下运行时，您可能会**由于进程中的其他线程而导致线程池不足。

让我们看看如果我们更改 1 行代码会发生什么：

```
 public void ProcessMessageAsync(string id)
    {
        Task.Factory.StartNew(DoSlowWork, TaskCreationOptions.LongRunning);
        AsyncManager.OutstandingOperations.Increment();
    } 
```

看看负载测试，有什么不同！

![在此处输入图像描述](../Images/8ea6e9fdab5fdeca375d026e48433a47.png)

## 刚刚发生了什么？

如您所见，LongRunning 选项似乎有很大的不同。让我们添加一些日志来看看内部发生了什么：

```
 public void ProcessMessageAsync(string id)
    {
        Trace.WriteLine(String.Format("Before async call - ThreadID: {0} | IsBackground: {1} | IsThreadPoolThread: {2} | Priority: {3} | ThreadState: {4}", Thread.CurrentThread.ManagedThreadId, Thread.CurrentThread.IsBackground,
            Thread.CurrentThread.IsThreadPoolThread, Thread.CurrentThread.Priority, Thread.CurrentThread.ThreadState));
        Task.Factory.StartNew(DoSlowWork, TaskCreationOptions.LongRunning);
        AsyncManager.OutstandingOperations.Increment();
    }

    ...

    private void DoSlowWork()
    {
        Trace.WriteLine(String.Format("In async call - ThreadID: {0} | IsBackground: {1} | IsThreadPoolThread: {2} | Priority: {3} | ThreadState: {4}", Thread.CurrentThread.ManagedThreadId, Thread.CurrentThread.IsBackground,
               Thread.CurrentThread.IsThreadPoolThread, Thread.CurrentThread.Priority, Thread.CurrentThread.ThreadState)); 
        Thread.Sleep(10000);
        AsyncManager.OutstandingOperations.Decrement();
    } 
```

**没有 LongRunning：**

```
Before async call - ThreadID: 11 | IsBackground: True | IsThreadPoolThread: True | Priority: Normal | ThreadState: Background
Async call - ThreadID: 11 | IsBackground: True | IsThreadPoolThread: True | Priority: Normal | ThreadState: Background 
```

**使用 LongRunning：**

```
Before async call - ThreadID: 48 | IsBackground: True | IsThreadPoolThread: True | Priority: Normal | ThreadState: Background
Async call - ThreadID: 48 | IsBackground: True | IsThreadPoolThread: False | Priority: Normal | ThreadState: Background 
```

如您所见，如果没有 LongRunning，您实际上是在使用线程池中的线程，从而导致饥饿。虽然 LongRunning 选项在这种情况下效果很好，但您[应该始终评估](http://social.msdn.microsoft.com/Forums/en/parallelextensions/thread/8304b44f-0480-488c-93a4-ec419327183b)您是否真的需要它。

**注意：**由于您使用的是 Windows Azure，因此您需要考虑到负载均衡器会在几分钟不活动后超时。

# listview - 如何确定 WinJS.UI.Listview 中哪个项目触发了 onselectionchanged 事件

> ID：12549821
> 
> 赞同：0
> 
> 时间：2012-09-23T04:47:33.633
> 
> 标签：listview, microsoft-metro, winjs

情况如下：

我允许用户从列表视图中选择项目并将它们添加为收藏。当列表第一次加载时，我预先选择了之前作为收藏夹添加的项目。要保存收藏夹，我可以简单地获取选择列表并覆盖收藏夹，也就是说，如果取消选择的任何内容都会自动处理。

**但：**

在列表视图的顶部有一个搜索框，它刷新相同的列表视图以显示每个新搜索关键字的搜索结果。因此用户可以搜索和选择/取消选择项目。这种情况不允许我简单地获取选择列表并覆盖收藏夹。

我需要明确知道用户点击了哪个项目（注意我的列表视图的 tapBehavior 设置为 toggleSelect）以选择/取消选择它并从收藏列表中手动添加/删除它。

***如何获取有关触发列表视图的 onselectionchanged 事件的项目的信息以及该项目的当前状态（即选择/取消选择）。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:14:22.440

您可以为 selectionchange 事件添加处理程序，并将 event.detail.newSelection 与当前选择的列表视图控件进行比较。缺少/新项目将是必需的元素。

我不确定这个解决方案是否是最优化的，但至少它有效。

# css - ul 标签中的对齐文本

> ID：12549826
> 
> 赞同：0
> 
> 时间：2012-09-23T04:49:08.830
> 
> 标签：css

我正在使用 ul 和 li 标签显示文本。

```
<ul class="archive-item-list-pt">
    <li><a href="/blogs/2012/9/22/reading-and-writing.html">Reading and writing</a></li>  
    <li><a href="/blogs/2012/9/22/celebrations-arent-what-they-used-to-be.html">Celebrations aren’t what they used to be</a></li>
</ul> 
```

如果文本很长，它会显示（光盘）下方的文本。我想对齐第一行和第二行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T04:51:13.673

你应该设置[`list-style-position`](https://developer.mozilla.org/en-US/docs/CSS/list-style-position)为`outside`：

```
.archive-item-list-pt {
    list-style-position: outside;
} 
```

这是小提琴：http: [//jsfiddle.net/qMM5x/](http://jsfiddle.net/qMM5x/)

* * *

或者使用简写属性：

```
.archive-item-list-pt {
    list-style: square outside;
} 
```

这是小提琴：http: [//jsfiddle.net/nfYVP/](http://jsfiddle.net/nfYVP/)

# django - 各种网络服务器有什么区别

> ID：12549834
> 
> 赞同：0
> 
> 时间：2012-09-23T04:52:07.443
> 
> 标签：django, apache, web-applications, webserver, gunicorn

当 PaaS 出现时，我听到了很多话*`NGINX, uWSGI, Gunicorn, lighthttpd, Apache`*.. 等等。

这应该是绝对新手的问题。但我主要知道的是

> 网络服务器监听请求执行操作并返回响应

现在我想知道的是，两者有什么区别

`NGINX, lighthttpd, Apache, uWSGI`这两个组都是 Web 服务器，`Gunicorn..etc`但有什么区别以及它们在哪里使用？

我使用像 openshift 这样的平台，他们实际上使用 Apache，我们必须使用 wsgi 服务器在内部移植它。

我可以使用 NGINX 或 lighthttd 代替 uWSGI 或 Gunicorn 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:15:33.273

这是一个非常广泛的问题。

Web 服务器都使用 HTTP 协议提供网页服务。查看 Wikipedia 上的此比较图表，了解有关大量 Web 服务器的大量信息。

[http://en.wikipedia.org/wiki/Comparison_of_web_server_software](http://en.wikipedia.org/wiki/Comparison_of_web_server_software)

# c# - 带有特殊字符的 iTextSharp

> ID：12549836
> 
> 赞同：0
> 
> 时间：2012-09-23T04:52:16.163
> 
> 标签：c#, asp.net, html-parsing, itextsharp

我有一个 aspx 表单，用户在其中进行调查并将调查保存到数据库中。保存到数据库后，将显示用户给出的调查回复，以便用户可以将回复保存为 pdf。

这是保存为pdf的功能

```
//Save as PDF
protected void SaveAsPDF_Click(object sender, EventArgs e)
{
    Random nRandom = new Random(DateTime.Now.Second);
    string strFileName = nRandom.Next().ToString() + ".pdf";
    string target = Server.MapPath(System.Configuration.ConfigurationManager.AppSettings["NewResponsePDF"].ToString() + strFileName);

    string filepath = target;
    string filename = Path.GetFileName(filepath);

    Response.Clear();
    Response.ContentType = "application/pdf";
    Response.AddHeader("content-disposition", "attachment;filename=" + filename);

    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    this.Page.Form.RenderControl(hw);
    StringReader sr = new StringReader(sw.ToString());
    Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 100f, 0f);
    HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
    PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
    pdfDoc.Open();
    htmlparser.Parse(sr);
    pdfDoc.Close();
    Response.Write(pdfDoc);
    Response.End();
} 
```

它工作正常，一切都很好。表单有一些文本框。用户可以在文本框中输入文本。有时，用户输入诸如 <、>、= 之类的数学符号。为了确保将文本框值保存到数据库中，`ValidateRequest="false"`在 aspx 文件中进行了以下操作。但是，SaveAsPDF 会引发错误，因为它无法解析这些符号。

我很确定主要是这些特殊符号导致了问题

`htmlparser.Parse(sr)`方法

因为如果文本框中没有特殊符号，则可以正常生成 PDF。

你能帮我看看我能做什么吗？/任何指针。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T05:01:56.367

您应该首先使用**HttpUtility.HtmlEncode**对输入文本进行编码，然后再处理文本并执行保存。

[http://msdn.microsoft.com/en-us/library/73z22y6h.aspx](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)

# java - 如何向 REST Web 服务发送 POST 请求并发送 JSON？

> ID：12549839
> 
> 赞同：3
> 
> 时间：2012-09-23T04:53:14.763
> 
> 标签：java, web-services

我有一个网络服务，我想通过 POST 方法向它发送一个 JSON 字符串。到目前为止，我制作的 Web 服务都使用了该`GET`方法，看起来像这样：

```
@GET
@Produces("application/json")
@Path("{name}")

 public String getJson(@PathParam("name") String name) {
    //TODO return proper representation object
     CompanyDatabase cmpdb=new CompanyDatabase();
     String json=cmpdb.searchAgent(name);
    return json;
 } 
```

我需要对此方法进行哪些更改才能接受 POST 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:32:19.030

要接受输入数据，您的方法需要声明它**消耗**的不是产生的。

```
import javax.ws.rs.Consumes;
import javax.ws.rs.POST;
import javax.ws.rs.core.MediaType;

@POST
@Consumes(MediaType.APPLICATION_JSON)
public void acceptsCustomer(Customer c)  {
  // .. do something with the input.
} 
```

Customer 类需要正确注释才能将 JSON 转换为 Java POJO。对 MediaType 使用 JAX-RS 常量是一种很好的做法。

您还应该查阅您的 JAX-RS 提供者的文档（例如：RESTEasy 或 Jersey），因为这些用户指南可能会有示例。

# ios - 在陌生目录中的ios中创建通用框架

> ID：12549840
> 
> 赞同：1
> 
> 时间：2012-09-23T04:53:39.227
> 
> 标签：ios, xcode, build

我遵循了这个在 Xcode for iOS 中创建框架的优秀指南。

[http://spin.atomicobject.com/2011/12/13/building-a-universal-framework-for-ios/](http://spin.atomicobject.com/2011/12/13/building-a-universal-framework-for-ios/)

我有我的框架，但我希望它在 /MyProject/build/ 下，但它不是......它在 /Users/confusedn00b/Library/Developer/Xcode/DerivedData/MyProject-gsgtxxwyxrghdygelnfssplakpoc/Build

这是为什么？此外，作者在教程结束时说“运行 lipo -info ..”。他是打开一个终端窗口来执行此操作，还是您可以以某种方式从 xcode 执行命令？如果前者（终端）假设他正在导航到上面的（疯狂）文件夹结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:48:07.280

旧的 Xcode 版本用于将所有生成的文件放在项目文件夹的“build”子目录中。（我认为如果您使用“xcodebuild”从命令行编译，情况仍然如此。）

当前的 Xcode 版本默认在“~/Library/Developer/Xcode/DerivedData”的某个子目录中创建所有文件。随机子目录用于防止同名的不同项目覆盖彼此的数据。

我更喜欢将生成的文件放在我的项目文件夹中，幸运的是您可以在 Xcode 首选项中进行配置：转到“位置”选项卡并将“派生数据”设置为“相对”而不是“默认”。现在所有生成的文件都在项目文件夹的“DerivedData”子目录中。

对于您的最后一个问题：是的，作者可能打算在终端中运行“lipo”，但在撰写该文章时，文件夹结构“不那么疯狂”。

# jquery - jQuery UI Draggable - connectToSortable 没有帮助克隆 - 或如何将项目从一个列表移动到另一个

> ID：12549841
> 
> 赞同：0
> 
> 时间：2012-09-23T04:53:55.140
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

看看[这个例子](http://jsfiddle.net/xD2dW/)。

[文档](http://jqueryui.com/demos/draggable/#option-connectToSortable)说：

> `helper`必须设置为“克隆”才能完美工作

确实，如果我删除`helper: 'clone'`，拖动时会发生奇怪的事情。

问题是我对“克隆”行为不感兴趣。我希望这些项目从一个列表**移动**到另一个列表。

注意：原始（左）列表不应该是可排序的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T19:02:53.890

我一直在努力解决同样的问题。如果我确实将助手设置为“原始”，我会得到各种神经质和奇怪的行为。

不确定它是否符合您的目的，但我编写了一些代码来监听拖动开始/停止事件以及可排序的更新事件。

在拖动开始时，该项目从列表中隐藏。如果该项目未转移到另一个列表（由布尔值确定），则该项目未隐藏。但是，如果该项目被转移，那么原件将被移除。

```
$(function() {
var transferred = false;
$('#draggable li').draggable({
    connectToSortable: '#sortable',
    helper: 'clone',
    start: function(event, ui)
    {
        $(this).hide();
    },
    stop: function(event, ui)
    {
        if(!transferred)
            $(this).show();
        else
        {
            $(this).remove();
            transferred = false;
        }
    }
});

$('#sortable').sortable({
    receive: function(event, ui)
    {
        transferred = true;
    }
}); 
```

}); ​</p>

[修改 jsfiddle 示例。(http://jsfiddle.net/xD2dW/12/)](http://jsfiddle.net/xD2dW/12/)

显然可以修改代码以满足您的特定需求，但我希望这至少是一个好的开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T12:45:37.623

helper: function(){ //Do Something; }

# hadoop - PIG 将文本行转换为稀疏向量

> ID：12549842
> 
> 赞同：2
> 
> 时间：2012-09-23T04:54:15.507
> 
> 标签：hadoop, apache-pig

我必须使用 Apache PIG 将需要组合在一起的文件。第一个文件包含书名列表，就像这样，每个书名都单独一行。

```
Ted Dunning,  Mahout in Action
Leo Tolstoy,  War and Peace
Douglas Adams, The hitchhiker guide to the galaxy.
James Sununu,  galaxy III for Dummies
Tom McArthur,  The War we went to 
```

第二个文件是单词列表及其 ID。像这样

```
ted, 12
tom, 13
douglas, 14
galaxy, 15
war, 16
leo, 17
peace, 18 
```

我需要加入这两个文件以产生如下输出：

对于“列夫·托尔斯泰，战争与片断”这句话，它应该产生

```
17:1,16:1,18:1 
```

对于“汤姆麦克阿瑟，我们参加的战争”这句话，它应该产生

```
13:1,16:1 
```

换句话说，我需要使用单词作为键来执行连接。到目前为止，我已经在 pig 中编写了以下代码

```
titles = LOAD 'Titles' AS ( title : chararray );  
termIDs = LOAD  'TermIDs' AS (  term:chararray,id:int);

A = SAMPLE titles 0.01;
X = FOREACH A GENERATE STRSPLIT(title,'[ _\\[\\]\\/,\\.\\(\\)]+'); 
```

这给出了加载的两个文件，并且 X 包含 BAGS 列表，每个包包含相应行上出现的术语。像这样：

```
((ted,dunning,mahout,in,action))
((leo,tolstoy,war,and,peace)) 
```

由于周六晚上迟到的原因，如果不编写 UDF 或使用流式传输，我无法弄清楚 JOIN 步骤的方法。是否甚至可以只使用 PIG 原语。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T15:57:53.243

您可以将 TOKENIZE 的结果展平，因此所有的包都变成了行，现在您可以使用 termsID 加入 X 关系。

```
X = foreach A generate title, flatten(TOKENIZE(title)) as term;
J = join X by (term),  termIDs by (term);
G = group J by title;
Result = foreach G generate group as title, termIDs.id; 
```

上面的代码是在我的手机上打的，所以没有调试。

**更新 1：**

对于最好使用 STRSPLIT 而不是 TOKENIZE 的情况，您可以结合使用 FLATTEN 和 TOBAG 来实现与 TOKENIZE 相同的效果，即从 STRSPLIT 返回的元组中获取单词包。

```
SPLT = foreach A generate title, FLATTEN(STRSPLIT(title,'[ _\\[\\]\\/,\\.\\(\\)]+'));
X_tmp = foreach SPLT generate $0 as title, FLATTEN(TOBAG($1..$20)) as term; -- pivots the row
X = filter X_tmp by term is not null; -- this removes the extra bag rows when title was split in less than 20 terms
J = join X by (term),  termIDs by (term) using 'replicated';
G = group J by title;
Result = foreach G generate group as title, termIDs.id; 
```

如果任何标题超过 20 个术语，则增加 TOBAG 中的数量。

# c# - 使用 C# 的 Windows 8 Live Tile 后台代理

> ID：12549854
> 
> 赞同：3
> 
> 时间：2012-09-23T04:56:48.153
> 
> 标签：c#, windows-8, live-tile

我正在尝试在 Windows 8 上经常更新动态磁贴，即使应用程序本身没有运行，我也需要这样做。[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/apps/hh761484.aspx)上列出的通知选项都不合适，我想轮询 CPU 温度等不适合列出的通知样式的系统信息。

我在 StackOverflow 上查看了其他地方并看到了类似的问题，但对于 Windows Phone 7 [using background workers](http://www.jeffblankenburg.com/2011/11/25/31-days-of-mango-day-25-background-agents/)。对我来说，使用后台工作人员似乎也是正确的答案。但是，像上一篇教程一样，侧重于 Windows Phone 7，但情况略有不同，例如，Visual Studio 2012 Ultimate 中的 Windows 应用商店模板没有用于计划任务代理的 C# 模板。

所以我的问题是，当应用程序本身没有运行时，我们如何为 Windows 8 应用程序设置后台工作人员以执行实时磁贴更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T11:39:00.830

[您可以在此处](http://www.jeffblankenburg.com/2012/11/12/31-days-of-windows-8-day-12-background-tasks)阅读有关后台任务的信息；[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977059)阅读 TimeTrigger ，在操作后台任务的 OnCompleted 方法中，我们可以设置 LiveTile

```
 void OnCompleted(BackgroundTaskRegistration sender, BackgroundTaskCompletedEventArgs args)
    { 
      var tile = CreateNotification(String.Format(@"<tile>
      <visual>
        <binding template=""TileSquareText04"">
          <text id=""1"">{0}</text>
          <text id=""2""></text>
        </binding> 
        <binding template=""TileSquareText02"">
          <text id=""1"">{0}</text>
          <text id=""2""></text>
        </binding>  
      </visual>
    </tile>", DateTime.Now.ToString("hh:mm:ss")));
     TileUpdateManager.CreateTileUpdaterForApplication().Update(tile);
     }
    private TileNotification CreateNotification(string xml)
    {
        var xmlDocument = new XmlDocument();
        xmlDocument.LoadXml(xml);
        return new TileNotification(xmlDocument);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:25:32.270

查看白皮书：[后台任务简介](http://www.microsoft.com/en-us/download/details.aspx?id=27411)；在这与你已经学习和研究过的瓷砖之间，你应该能够把一些东西放在一起。

# html - 四列到两列的响应性

> ID：12549863
> 
> 赞同：0
> 
> 时间：2012-09-23T05:00:03.030
> 
> 标签：html, css, responsive-design, floating

我正在创建一个包含四列的响应式网站。当屏幕变窄时，我希望四列变成两列。但是，当第二列比第一列短时，这种方法会失败，因为第 3 列低于 2，并且在看到第 1 列下方的第 4 列之前存在巨大差距。有没有办法使用 CSS 来避免这个巨大的差距？我不想添加额外的 HTML 元素，但是如果必须的话，我可以。

[http://jsfiddle.net/ACJHg/](http://jsfiddle.net/ACJHg/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:49:48.827

只需添加`clear: left`到您的第三列（使用`.fourcolumn:nth-child(3)`）或一般的奇数列（使用`.fourcolumn:nth-child(2n+1)`）

# [演示](http://jsfiddle.net/ACJHg/1/)

[另外，最好从窄屏开始，然后转到宽屏（移动优先方法）并[使用`em`基于媒体查询而不是基于媒体查询`px`（](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)以防止用户缩放时布局中断）]

# python - 马戏团，将马戏团作为守护进程运行？

> ID：12549864
> 
> 赞同：5
> 
> 时间：2012-09-23T05:00:07.133
> 
> 标签：python, daemon

所以，我刚刚从 Supervisor 切换到 Circus 来控制 Python 进程。我从命令行启动守护进程作为马戏团。显然，这不是我应该这样做的方式，但我无法以正确的方式找到任何文档。启示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T17:05:41.760

没有一种内置的方式可以用 Upstart 开始马戏团。`circus.conf`我添加了一个文件`/etc/init`：

```
start on filesystem and net-device-up IFACE=lo
exec /usr/local/bin/circusd /etc/circus.ini 
```

我的马戏团会议在`/etc/circus.ini`

在此之后，我可以`sudo service circus...`用来控制过程。

在这里更新了更多信息：http: [//nathancahill.github.com/circus/](http://nathancahill.github.com/circus/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-18T10:48:00.420

当前版本的 circus (0.13.0) 采用 --daemon 标志。所以你可以简单地做：

```
$ circusd circus.ini --daemon 
```

并将进程发送到后台。

# javascript - 用于 Javascript 内容的 Ajax 不起作用

> ID：12549866
> 
> 赞同：0
> 
> 时间：2012-09-23T05:00:51.163
> 
> 标签：javascript, ajax, d3.js

使用 ajax 时，这段代码会显示 javascript 内容吗？

```
 var xmlhttp;
var nocache = 0;

function further($id)
{
    xmlhttp=getXmlHttpObject();
    if (xmlhttp==null)
    {
        alert ("Browser does not support HTTP Request");
        return;
    }
    var url="further.php?Pid=" + $id;
    //url=url+"cachestopper=" + Math.random();

    xmlhttp.onreadystatechange=handleAjaxResponse;
    xmlhttp.open("GET",url,'&nocache = '+nocache,true);
    xmlhttp.send(null);
}

function handleAjaxResponse()
{
    if (xmlhttp.readyState==4)
    {
        document.getElementById("output").innerHTML = xmlhttp.responseText;

    }else{
        document.getElementById("main").innerHTML = "";
    }
}

function getXmlHttpObject()
{
    if (window.XMLHttpRequest)
    {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        return new XMLHttpRequest();
    }
    if (window.ActiveXObject)
    {
        // code for IE6, IE5
        return new ActiveXObject("Microsoft.XMLHTTP");
    }
    return null;
} 
```

我知道这适用于 html 和文本内容，但就我而言，我需要生成一个使用 javascript 生成的图表，确切地说是 d3.js。将 .innerHTML = xmlhttp.responseText; 为此工作？如果没有，我将不得不使用什么来生成 javascript 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:52:42.240

打开 XMLHttpRequest 对象时代码中的一个小错误。

```
xmlhttp.open("GET",url,'&nocache = '+nocache,true);

It should be 
 xmlhttp.open("GET",url+'&nocache = '+nocache,true); 
```

试试这个[http://jsfiddle.net/nubgw/7/](http://jsfiddle.net/nubgw/7/)

# jsf - onclick() 成功完成后如何调用命令按钮的操作方法？

> ID：12549868
> 
> 赞同：1
> 
> 时间：2012-09-23T05:01:22.153
> 
> 标签：jsf, jsf-2, primefaces

我的目标是，当我们按下命令按钮时，它需要执行`onclick`调用另一个单击按钮来上传文件的方法。上传文件完成后，需要执行action方法。但是目前，虽然它正在调用该函数，但它正在异步执行 action 方法，甚至在文件上传完成之前完成。我们如何使它同步，只有当`onclick`方法完成时，它才需要执行 action 方法？

```
<p:commandButton styleClass="shareButton" ajax="true"
                 action="#{topicController.createTopic}"
                 onclick='javascript:setTopicDetails();uploadFile();'
                 value="Share"
                 oncomplete="javascript:complTopic(xhr, status,args);"
                 partialSubmit="true">
</p:commandButton>

function uploadFile(){
    $('.progress').show();
    $('button.start[type=button]').click();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:21:49.303

尝试类似下面代码 e.preventDefault() 的回调函数；//防止默认点击动作，上传完成后手动触发点击事件。

```
function uploadFile(){
e.preventDefault(); 
$('#upload').load('ajax/test.html', function() {
  alert('upLoad completed.');

//call functions which need to be called after upload completed..
setTopicDetail();
 $('.progress').show();
    $('button.start[type=button]').click();

// click commandlink here.
$('commandlink').click();
});

} 
```

# windows - 根据驱动器名称将文件批处理到 USB 驱动器

> ID：12549872
> 
> 赞同：0
> 
> 时间：2012-09-23T05:02:06.770
> 
> 标签：windows

我已经为 USB 驱动器分配了一个名称，我想知道是否有一种简单的方法可以让桌面快捷方式基于名称而不是字母来定位它。

所以代替： F:\program_to_run.exe 它会像： DRIVENAME:\program_to_run.exe

虽然上述显然行不通，但可以使用快捷方式或简单的批处理文件完成类似的操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T03:04:18.943

既然您刚刚进入 VB.Net，那么创建一个命令行程序来为您做这件事怎么样？

1.  创建控制台应用程序

粘贴此代码：

```
Module Module1

    Sub Main()

        Dim program = ""
        Dim drive As String = ""

        Try
            'Get the commandLine, without thhis application name or the beginning space
            Dim commandLine As String = Environment.CommandLine.Replace(System.Reflection.Assembly.GetExecutingAssembly().Location, "").Replace("""", "").Substring(1)

            'Get the DriveNAme part of the commaneLine
            Dim driveName As String = commandLine.Split(":"c)(0)
            drive = GetDriveByName(driveName)

            'Get the Program Name part of the commandLine
            program = commandLine.Split(":"c)(1)

            If drive.Length = 0 Then Throw New Exception("No drive was found with the name '" + driveName + "'")

            Dim starter As New System.Diagnostics.ProcessStartInfo(drive + program)
            starter.UseShellExecute = True
            System.Diagnostics.Process.Start(starter)

        Catch ex As Exception
            Console.WriteLine("Failed starting " + drive + program + ". " + ex.Message)
        End Try

    End Sub

    ''' <summary>Returns the drive letter of the Fixed or Removable drive with the specified name</summary>
    ''' <param name="DriveName"></param>
    ''' <returns></returns>
    ''' <remarks></remarks>
    Public Function GetDriveByName(ByVal DriveName As String) As String

        Dim returnDrive As String = ""

        For Each drive As System.IO.DriveInfo In System.IO.DriveInfo.GetDrives()
            If (drive.DriveType = (IO.DriveType.Fixed Or IO.DriveType.Removable)) Then  'Only interested in removable drives
                If (drive.VolumeLabel.Equals(DriveName, StringComparison.OrdinalIgnoreCase)) Then
                    'This is our drive!
                    returnDrive = drive.Name
                End If
            End If
        Next drive

        Return returnDrive
    End Function
End Module 
```

然后 build 给你的应用程序起一个好听的名字（例如 StartByDriveName.exe）并编译它。

您现在可以在批处理文件中使用它：

`StartByDriveName <driveName>:<path>\ProgramName`

例如 StartByDriveName MomsUSB:\Program Files\Excel.Exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:08:34.133

我相信您可以在磁盘管理实用程序中为各个设备永久分配某个驱动器号

# mysql - mysql过程当while case

> ID：12549874
> 
> 赞同：0
> 
> 时间：2012-09-23T05:02:28.393
> 
> 标签：mysql, while-loop, procedures, case-when

```
Create procedure count_loop( p_start int, 
                               p_stop int,
                               p_step int unsigned, 
                               p_delim varchar(5))
begin
declare v_start int ;
declare v_stop int ;
declare v_step int ;
declare v_sign int;
declare v_sum int;

-- check p_start
case p_start
when null then
    set v_start := 1;
else
    set v_start := p_start;
end case;

-- check p_stop
case p_stop
when null then
    set v_stop := 10;
else
    set v_stop := p_stop;
end case;

-- check p_stop
case p_step
when null then
    set v_step := 1;
when 0 then
    set v_step := 1;
else
    set v_step := p_step;
end case;

-- set v_sign as v_stop - v_start 
set v_sign := (v_stop - v_start) ;

case
-- if v_sign and v_step are negative, 
-- then run while loop
when v_sign < 0 and v_step < 0 then
    while v_start > v_stop then
        set v_start = v_start + v_step ; 
        select v_start as 'The Loop Output';
        set v_step = v_step - 1;
    end while;
-- if both v_sign and v_step are positive 
-- then run loop
when v_sign > 0 and v_step > 0 then
    while v_start > v_stop then
        set v_start := v_start + v_step ; 
        select v_start as 'The Loop Output';
        set v_step := v_step + 1;
    end while; 
-- if v_sign and v_step are different signs
-- terminate loop
when v_sign > 0 and v_step < 0 then
    select 'Loop collapsed' as 'The Loop Output' ; 
when v_sign < 0 and v_step > 0 then
    select 'Loop collapsed' as 'The Loop Output' ;
end case ;

end;
# 
```

我正在循环一系列算术序列。此代码应加或减，具体取决于前两个参数是什么。然后我们检查步长值是正还是负。我收到一个错误，说要检查以下位置的语法：

```
set v_start = v_start + v_step ; 
        select v_start as 'The Loop Output';
        set v_step = v_step - 1; 
```

因此，我删除了包含该内容的两个 when 语句并运行了我的代码。没有错误。但现在我不确定下一步该做什么。我看不出有什么需要纠正的。有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:27:16.850

您的错误位于`while v_start > v_stop then`您发布的代码段的右上方。它应该改为阅读`while v_start > v_stop do`。（实际上，您在几个地方都有它；检查每个`while`语句。）

在此处查看[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/while.html)

# php - 单击模态表单关闭的按钮后出现什么问题？

> ID：12549885
> 
> 赞同：0
> 
> 时间：2012-09-23T05:06:03.380
> 
> 标签：php, jquery-ui, jquery, modal-dialog

我在从模态表单上传图像时遇到问题，单击上传按钮后，模态表单关闭，我不知道会发生什么，因为模态关闭并且在我的文件夹中我期待上传的文件但没有. 我期望发生的是，在我单击上传按钮后，它会自动以模态形式显示上传的图像，我的代码是缺少什么还是什么？

这是我使用的 jquery 代码：

```
$(function() {
        $('button').button();
        $('.upload-profile-pic').click(function() {
            $.ajax({
                url: 'upload-image.php',
                method: 'post',
                data: { uploadedfile: $('.profile-pic-name').val().trim() },
                success: function(data) {
                    $('.new-profile-pic').html(data);
                }
            });
        })
        $('.update-profile-pic').click(function() {
            $('#dialog').dialog({
                width:350,
                modal:true
            });
        });
    }); 
```

这是我的html表单

```
<button class="update-profile-pic">Update Profile Picture</button>
<div id="dialog">
    <p class="new-profile-pic">

    </p>
    <form enctype="multipart/form-data">
        <input type="hidden" name="MAX_FILE_SIZE" value="100000">
        <input class="profile-pic-name" name="uploadedfile" type="file">
        <input class="upload-profile-pic" type="submit" name="upload" value="Upload File">
    </form>
<div> 
```

这是我的 PHP 代码：

```
 <?php
$target_path = "uploads/";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo '<img alt="" src="'.$target_path.'">';
} else{
    echo "There was an error uploading the file, please try again!";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:11:55.567

您不能通过 ajax 提交进行简单的表单上传。您将不得不使用类似[jquery form submit](http://malsup.com/jquery/form/)

用法：

```
$(document).ready(function() { 
    var options = { 
        target:        '#dialog',   // target element(s) to be updated with server response 
        url:   'url: 'upload-image.php',
        type:      'POST',
        resetForm: true        // reset the form after successful submit  
    }; 

    $('#dialog form').ajaxForm(options); 
}); 
```

您可以参考[此](http://www.malsup.com/jquery/form/#ajaxForm)示例以进行进一步的自定义/更改

# android - Android ABS 左侧填充到 ProgressBar

> ID：12549897
> 
> 赞同：2
> 
> 时间：2012-09-23T05:09:29.373
> 
> 标签：android, actionbarsherlock

我创建了自定义进度条样式，以在操作栏的右上角显示一个不确定的进度条。这是我的代码

```
 <style name="IndeterminateProgress" parent="@android:style/Widget.ProgressBar.Small"> 
     <item name="android:paddingRight">5dp</item>
</style> 
```

现在我假设填充元素应该在进度条的右侧添加一个 5dp 填充。但这不起作用。它仍然卡在操作栏的最右侧？谁能帮帮我。

亲切的问候，

# android - 从 /sdcard/Movies 文件夹以外的 SD 卡的特定文件夹中读取视频

> ID：12549898
> 
> 赞同：1
> 
> 时间：2012-09-23T05:09:34.053
> 
> 标签：android, android-sdcard

我创建了一个 android 程序来从 sdcard 的任何特定文件夹中读取视频，然后在网格视图中显示它们的缩略图。但是，我的程序仅适用于 sdcard 中的 Movies 文件夹。它没有显示 sdcard 中其他文件夹的任何视频。

我在代码中的两个位置指定了文件夹“电影”的名称。一次在 AdapterView.OnItemClickListener 中，另一个在 initVideosId() 中。

现在我的 sdcard 中还有其他文件夹，比如 sdcard->geovideo

现在，当我指定“geovideo”而不是“电影”时，它在我的平板电脑中什么也没有显示。你知道有什么问题吗。

任何人都请帮助我完成我的任务。谢谢。下面是我的安卓程序

```
package com.vt.soc;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class MainActivity extends Activity {
    //set constants for MediaStore to query, and show videos
    private final static Uri MEDIA_EXTERNAL_CONTENT_URI = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
    private final static String _ID = MediaStore.Video.Media._ID;
    private final static String MEDIA_DATA = MediaStore.Video.Media.DATA;
    //flag for which one is used for images selection
    private GridView _gallery; 
    private Cursor _cursor;
    private int _columnIndex;
    private int[] _videosId;
    private Uri _contentUri;
    String filename;
    int flag = 0;

    protected Context _context;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        _context = getApplicationContext();
        setContentView(R.layout.activity_main);
        //set GridView for gallery
        _gallery = (GridView) findViewById(R.id.videoGrdVw);
        //set default as external/sdcard uri
        _contentUri = MEDIA_EXTERNAL_CONTENT_URI;

        initVideosId();

        //set gallery adapter
        setGalleryAdapter();

    }
    private void setGalleryAdapter() {
        _gallery.setAdapter(new VideoGalleryAdapter(_context));
        _gallery.setOnItemClickListener(_itemClickLis);
        flag = 1;       
    }
    private AdapterView.OnItemClickListener _itemClickLis = new OnItemClickListener() 
    {
        @SuppressWarnings({ "deprecation", "unused", "rawtypes" })
        public void onItemClick(AdapterView parent, View v, int position, long id) 
        {
            // Now we want to actually get the data location of the file
            String [] proj={MEDIA_DATA};
            // We request our cursor again
            _cursor = managedQuery(_contentUri,
                    proj, // Which columns to return
                    MEDIA_DATA + " like ? ",       // WHERE clause; which rows to return (all rows)
                    new String[] {"%Movies%"},       // WHERE clause selection arguments (none)
                    null); // Order-by clause (ascending by name)
            // We want to get the column index for the data uri
            int count = _cursor.getCount();
            //
            _cursor.moveToFirst();
            //
            _columnIndex = _cursor.getColumnIndex(MEDIA_DATA);
            // Lets move to the selected item in the cursor
            _cursor.moveToPosition(position);
            // And here we get the filename
            filename = _cursor.getString(_columnIndex);
            //*********** You can do anything when you know the file path :-)
            showToast(filename);

            Intent i = new Intent(MainActivity.this, Player.class); 
            i.putExtra("videoPath", filename);
            startActivity(i);

            //
        }
    };
    @SuppressWarnings("deprecation")
    private void initVideosId() {
        try
        {
            //Here we set up a string array of the thumbnail ID column we want to get back
            String [] proj={_ID};
            // Now we create the cursor pointing to the external thumbnail store
            _cursor = managedQuery(_contentUri,
                    proj, // Which columns to return
                    MEDIA_DATA + " like ? ",       // WHERE clause; which rows to return (all rows)
                    new String[] {"%Movies%"},       // WHERE clause selection arguments (none)
                    null); // Order-by clause (ascending by name)
            int count= _cursor.getCount();
            // We now get the column index of the thumbnail id
            _columnIndex = _cursor.getColumnIndex(_ID);
            //initialize 
            _videosId = new int[count];
            //move position to first element
            _cursor.moveToFirst();          
            for(int i=0;i<count;i++)
            {           
                int id = _cursor.getInt(_columnIndex);
                //
                _videosId[i]= id;
                //
                _cursor.moveToNext();
                //
            }
        }catch(Exception ex)
        {
            showToast(ex.getMessage().toString());          
        }

    }
    protected void showToast(String msg)
    {
        Toast.makeText(_context, msg, Toast.LENGTH_LONG).show();
    }

    //
    private class VideoGalleryAdapter extends BaseAdapter
    {
        public VideoGalleryAdapter(Context c) 
        {
            _context = c;
        }
        public int getCount() 
        {
            return _videosId.length;
        }
        public Object getItem(int position) 
        {
            return position;
        }
        public long getItemId(int position) 
        {
            return position;
        }
        public View getView(int position, View convertView, ViewGroup parent) 
        {
            ImageView imgVw= new ImageView(_context);;
            try
            {
                if(convertView!=null)
                {
                    imgVw= (ImageView) convertView;
                }
                imgVw.setImageBitmap(getImage(_videosId[position]));
                imgVw.setLayoutParams(new GridView.LayoutParams(200, 200));
                imgVw.setPadding(8, 8, 8, 8);
            }
            catch(Exception ex)
            {
                System.out.println("MainActivity:getView()-135: ex " + ex.getClass() +", "+ ex.getMessage());
            }
            return imgVw;
        }

        // Create the thumbnail on the fly
        private Bitmap getImage(int id) {
            Bitmap thumb = MediaStore.Video.Thumbnails.getThumbnail(
                    getContentResolver(),
                    id, MediaStore.Video.Thumbnails.MICRO_KIND, null);
            return thumb;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:17:08.910

实际上问题是我的清单文件中的用户权限。

我希望任何面临与我相同问题的人都会很高兴看到我的回答。

实际上，电影文件夹在 sdcard 的内置文件夹中，正如我提到的，我在 sdcard 中有自己的文件夹“geovideo”，我无法通过我的程序看到。所以我需要在 Manifest 文件中指定权限。

当我添加

```
 <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

我的清单。它正在工作。所以只是简单的建议，当你的程序不工作时，也要考虑许可。

# javascript - Javascript：GetElementById - DOM 什么时候命中？

> ID：12549899
> 
> 赞同：0
> 
> 时间：2012-09-23T05:09:43.537
> 
> 标签：javascript, getelementbyid, performance

我正在这样做：

```
var hpl = doc.getElementById("hpl"); 
```

然后这个：

```
hpl.style.height = 28 + "px"; 
```

我的问题：我是否访问过 DOM 两次，一次是为了引用元素，一次是为了设置样式高度？

如果是这样，那么我得出的结论是，这对于 DOM 调用来说是低效的，尽管它可以很好地最小化。

```
var hpl = document.getElementById("hpl");
if (test === "Abel") {
    hpl.style.height = 28 + "px";
} else {
    hpl.style.height = 42 + "px";
} 
```

所以这在速度方面会更好：

```
if (test === "Abel") {
    document.getElementById("hpl").style.height = 28 + "px";
} else {
    document.getElementById("hpl").style.height = 42 + "px";
} 
```

我在[这里](http://jsperf.com/get-element-by-id-efficiency)有一个 jsperf表明没有真正的区别，尽管我想了解这背后的理论。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:13:30.103

据我所知，一旦您通过 Id 访问过 DOM 元素一次，它就会被放入字典中以供稍后快速参考（如哈希表/hasmap）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:23:49.063

从访问 DOM 的角度来看，您执行此操作的两种不同方式没有什么不同。

```
var hpl = doc.getElementById("hpl");
hpl.style.height = 28 + "px"; 
```

这会找到具有 的 DOM 元素`id="hpl"`，将其放入局部变量中，然后使用局部变量直接引用 DOM 元素（无需搜索）来修改它。

* * *

当你这样做时：

```
document.getElementById("hpl").style.height = 28 + "px"; 
```

唯一的区别是您不将其存储在局部变量中（尽管它存储在 javascript 引擎内部）。它仍然通过查找具有的 DOM 元素来获取 DOM 元素，`id="hpl"`然后使用对 DOM 元素的引用来直接设置样式值。这种方式与第一种方式没有显着差异。

对 DOM 元素的存储引用是访问 DOM 元素的一种非常有效的方式。无需搜索。在浏览器/javascript 引擎内部，DOM 引用是一种数据结构，它包含快速访问实际 DOM 对象的方法（可能是指向它的指针，但实际实现取决于浏览器）。

# objective-c - Xcode 4.5 Interface Builder 为 Outlets 添加下划线

> ID：12549909
> 
> 赞同：8
> 
> 时间：2012-09-23T05:13:37.113
> 
> 标签：objective-c, xcode, properties, outlet

**Xcode 4.5 的自动生成属性及其相关的内存释放部分（在 dealloc 和 viewDidUnload 中）的方式是否略有不同？**

我昨天从 4.5 Beta 1 升级到 Xcode 4.5。现在，当我使用 Interface Builder 创建一个插座时（通过 Ctrl 键从一个 UILabel 拖动到关联的头文件），它会`@property`像往常一样在头文件中创建声明：

```
@property (retain, nonatomic) IBOutlet UILabel *propertyName; 
```

但是，在关联的 .m 文件中，没有`@synthesize`声明。

里面的代码`viewDidUnload`是正常的：

```
- (void)viewDidUnload {
    [self setPropertyName:nil];
    [super viewDidUnload];
} 
```

但是，中的代码在属性名称前`dealloc`添加了一个：`_`

```
- (void)dealloc {
    [_propertyName release];
    [super dealloc];
} 
```

这也意味着我无法正常引用该属性 ( `[propertyName doSomething];`)

有什么改变吗？还是我不小心更改了某些设置？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-23T05:56:03.597

是的，Xcode 4.5 中的行为略有改变。

> ...在关联的 .m 文件中，没有 @synthesize 声明。

在 Xcode 4.5 中，该`@synthesize`语句现在是可选的，并且属性是自动合成的。自动生成的 IBOutlet 属性因此不再添加`@synthesize`，因为不再需要它。

> ... dealloc 中的代码在属性名称前添加了一个 _

当属性被自动合成（没有显式的 @synthesize 语句）时，相应的实例变量会在前面加上下划线。这就是为什么它在您的 dealloc 方法中如此显示的原因。这样实例变量和属性名称就不会重叠。

> 这也意味着我无法正常引用该属性

没有。访问实例变量和属性没有改变。改变的只是实例变量的默认名称。例如：

```
_foo = @"Bar"; // Setting an instance variable directly.
self.foo = @"Bar";  // Setting an instance variable via a property accessor method. 
```

下划线只是样式问题，因此更清楚的是您访问的是实例变量而不是属性。

请注意，您可以自己添加 @synthesize 语句，这将强制相应实例变量的名称为您想要的任何名称。同样，如果您添加自己的属性访问器方法，那么这将阻止实例变量自动生成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T05:23:45.140

Xcode 现在自动将所有属性合成为一个名为`_propertyName`. 在许多情况下，您不再需要`@synthesize`或显式声明实例变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T05:27:30.747

在 XCode 4.5 中，默认情况下现在将下划线添加到底层实例变量。但这对您的唯一影响是您需要使用下划线引用该变量。这是一个例子：

```
@property (retain) UIColor color; 
```

在您的实现代码中，您可以像这样引用颜色：

```
[_color set]; // Now do some drawing... 
```

对于外部世界来说，事情保持不变。

```
object.color = [UIColor redColor]; 
```

此更改基于一种常见做法，即使用下划线前缀命名实例变量，以将它们与代码中的局部变量区分开来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T05:29:13.813

另外，请注意，您通常希望以 访问您的属性`[self.propertyName doSomething];`，这就是为什么使用下划线自动为实例变量添加前缀以指示隐私是有意义的。

如果你真的需要，你可以像`[_propertyName doSomething]`让它自动合成一样访问它，但这会绕过 getter。或者，您可以再次`@synthesize propertyName = propertyName;`使用`[propertyName doSomething]`，但您为什么要这样做？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-23T05:27:22.053

我发现，如果您在 @property 名称前使用下划线，您就可以像以前一样实现所需的方法。

# php - 使用 PHP 重定向用户

> ID：12549910
> 
> 赞同：0
> 
> 时间：2012-09-23T05:13:40.560
> 
> 标签：php, html

我最初是使用带有 PHP 的标头重定向用户。但是在我的服务器上，我遇到了一个问题，因为 HTML 位于 Location 标头之前。现在，改变我的脚本结构不是我能做的。我可以使用哪些其他方式在我的 PHP 中进行重定向。

我尝试了这些选项，但它们不起作用：

```
echo "<META HTTP-EQUIV="Refresh" Content="1; URL=index.php">"; 
```

还有单引号：

```
echo <META HTTP-EQUIV="Refresh" Content="1; URL=index.php">; 
```

两种方法都不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T05:16:21.887

您可以[启用输出缓冲](http://php.net/manual/en/outcontrol.configuration.php)。输出将被缓冲直到完成，允许您随时设置标题。

但实际上，您应该修复您的应用程序，使其不会按照您描述的方式进行设置。我知道您说这不是您可以做的事情，但是如果您将应用程序逻辑与 HTML 混合在一起，您可能会遇到其他问题。代码的可读性和可重用性是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:17:24.210

看看[输出缓冲](http://php.net/manual/en/book.outcontrol.php)。你基本上`ob_start()`在你的第一个输出之前和`ob_flush()`最后一个输出之后调用这个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T05:56:03.417

**你的 php**有一个主要错误 试试这个

```
echo '<META HTTP-EQUIV="Refresh" Content="1; URL=index.php">'; 
```

*因为您已经在 Meta 标记中使用了双引号，所以必须使用单引号来开始和结束回显字符串。好了，Meta标签现在可以正常工作了。*

使用标题

```
header('Location:http://www.mtrix.in');

exit(); 
```

此人将被重定向到提供的此位置。但这必须在任何输出之前发送，甚至在发送标头之前，因为标头只能发送一次，并且通常在输出之前发送。

您还可以输出以下内容

```
<script> 

window.location='index.php';

</script> 
```

元标记应该可以工作

<meta http-equiv="refresh" content="2;url=http://mtrix.in/">

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T06:12:01.673

抱歉，我没有意识到您在回显代码中犯的错误，所以我编辑了答案，检查一下，它现在应该可以工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T05:17:57.757

如果您想显示一些 html 内容，并在一段时间后重定向到其他页面。您可以使用以下元标记。

```
<meta http-equiv="refresh" content="5;url=http://www.example.com/otherpage"> 
```

# apache-flex - 如何在 Flex 的录制视频上写文字？

> ID：12549911
> 
> 赞同：0
> 
> 时间：2012-09-23T05:13:49.873
> 
> 标签：apache-flex, flex4

我正在使用 Red 5 服务器从网络摄像头和 netstream 录制视频以将记录保存到服务器。

我有一个要求，每 1 分钟通过 JavaScript 向 Flash 文件发送一个文本，我想在视频上显示该文本。重要的是，当我播放录制的流时，我希望在视频上显示该文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:50:29.017

没有文件处理选项或即时选项可将文本发送到视频中。您必须添加例如 FFMPEG 并编写一个将文本合并到视频中的小批量脚本。搜索“FFMPEG 添加文本”，您会发现大量此类脚本的示例。

# windows - 有什么方法可以在没有开发人员许可的情况下安装“地铁”应用程序？

> ID：12549912
> 
> 赞同：1
> 
> 时间：2012-09-23T05:14:02.010
> 
> 标签：windows, windows-8, microsoft-metro, windows-runtime

如果我为（以前的）metro UI 开发应用程序，是否有任何方法（无论多么hacky 或不愉快）在没有开发人员许可证的情况下在我的计算机上安装我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:49:10.270

有 3 种官方方法可以将应用程序旁加载到 Windows 8 中：

*   获得机器的开发者许可证，但是这些许可证确实会过期，并且没有商店帐户，过期的时间很短。许可证过期后，旁加载的应用程序将无法运行，直到续订为止。
*   使用 Windows 8 Enterprise 并设置组策略以启用它，但应用程序仍必须由客户端 PC 信任的证书签名
*   使用 Windows 8 专业版并使用特殊的侧载产品密钥激活它（尽管这些只能通过捆绑包中的批量许可获得）

[此处](http://technet.microsoft.com/en-us/library/hh852635.aspx "如何添加和删除应用程序")的 TechNet 文章提供了完整的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:25:41.843

如果您使用 PowerShell 脚本（您想要做的）在另一台机器上安装您的应用程序，它将自动显示一个[对话框以请求开发人员许可证](http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx#getting_a_developer_license_at_a_command_prompt)。为此，您不需要 Visual Studio。但是在开发者许可证过期后，您的应用程序将无法启动。也许卸载和重新安装会有所帮助。

您只会将其用于测试目的。否则，您应该真正获得一个 Windows 应用商店帐户来部署您的应用程序。

也许[侧载](http://technet.microsoft.com/en-us/library/hh852635.aspx)对你来说是一个选择，但我没有深入研究这个，所以我不能在这里提供更多信息。来自 MS 的关于侧载的简短[博客](http://blogs.msdn.com/b/uk_faculty_connection/archive/2012/04/03/installing-enterprise-metro-apps-without-using-microsoft-store.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T12:29:00.780

你知道，我借助一个小技巧在我的 Windows 8.1 Enterprise 副本中做了同样的事情。首先，我在 Visual Studio 2013 中创建了我的 windows Metro 应用程序包，然后在我的本地安装了受信任的证书机器以及当前用户，并在 powershell 脚本中进行了“一些”更改，生成了我的 Visual Studio。这项工作做得很好，我还没有遇到任何问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-06-15T19:04:13.517

您可以在没有开发人员许可的情况下安装 Windows 8 应用程序。只需右键单击项目并选择商店-> 创建应用程序包，然后按照屏幕上的说明进行操作。它将生成所需的包文件以及证书。现在转到文件夹并编辑 Add-AppDevPackage.ps1 powershell 脚本文件。换行

```
`$NeedDeveloperLicense = CheckIfNeedDeveloperLicense` 
```

和

```
$NeedDeveloperLicense = $false 
```

现在，如果您运行 powershell 脚本，您可以毫无问题地安装 Windows 应用商店应用程序。

# css - 使 IE 9 在没有 Doctype 的标准模式下工作

> ID：12549915
> 
> 赞同：1
> 
> 时间：2012-09-23T05:14:25.980
> 
> 标签：css, html, internet-explorer, doctype

我希望这里有人可以帮助我。我知道在 IE 9 中，有怪癖模式和标准模式，如果我没有定义文档类型，例如：

```
<!DOCTYPE html> 
```

作为我的 html 的第一行，浏览器将进入怪癖模式。

这是问题所在，我正在用 HTML 编写一些东西，然后将其嵌入到另一个站点中（我已经检查过，没有 doctype 声明，该站点属于我的学校，所以我无法更改它） .

所以最终它会是这样的

```
<html> .... </html> //the original website code
<!DOCTYPE html>//my doctype declaration
<html>... </html> //my html code 
```

如您所见，我的 DOCTYPE 变得毫无用处。

不，我无法更改原始 html 代码，也无法强制它使用 iframe 或其他任何可能对我有帮助的东西。

所以我的问题是，是否有人强制 IE 9 在没有 DOCTYPE 的情况下以标准模式运行？

我试过了：

```
<html xmlns="http://www.w3.org/1999/xhtml"> //putting page in xhtml

<meta http-equiv="X-UA-Compatible" content="IE=9" />//forcing it like this 
```

他们都没有为我工作。

有任何想法吗 ？

在这一点上真的很感激任何帮助。

提前致谢！

编辑：更新：

大家好，感谢您的帮助。我知道拥有 < html > ... < html > ... < /html > ... < /html > 是一种可怕的做法。然而，这是我的项目的一个限制，我无法控制它。另外，我只能操作内部的<html>..</html>。

我四处搜索，似乎没有“很棒”的解决方案，正如有人建议的那样，可以使用 Javascript 强制 IE 9 以标准模式运行，但这对我的项目来说并不理想。

我最终做的是剥离我的 html 页面的 css（这样浏览器是否在标准模式下运行都没有关系），相反，我在整个 HTML 中添加了内联样式（非常基本的样式）作为一个痛苦变通方法。

似乎这是 IE 9 没有预料到的极端情况，我已经测试过，Chrome、Firefox、IE 8 中不存在这个问题。

无论如何，感谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:15:57.763

为什么没有`<!DOCTYPE>`？这是最糟糕的选择。

`<!DOCTYPE>`声明必须是 HTML 文档中的第一件事，在标记`<html>`之前。`<!DOCTYPE>`声明不是 HTML 标记。它是对 Web 浏览器的指示，说明页面是用什么版本的 HTML 编写的。

**DOCTYPE（“文档类型声明”的缩写）通知验证器您正在使用哪个版本的 (X)HTML，并且必须出现在每个网页的最顶部。DOCTYPE 是合规网页的关键组成部分：没有它们，您的标记和 CSS 将无法验证。**

好读：

1.  [使用正确的 DOCTYPE 修复您的网站！](http://www.alistapart.com/articles/doctype/)
2.  [推荐在您的 Web 文档中使用的 Doctype 声明。](http://www.w3.org/QA/2002/04/valid-dtd-list.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:19:49.900

您只能在页面内容的开头选择标准模式或怪癖模式。（也可能在开头附近使用元标记，或者使用 HTTP 标头，但我也不是 IE 专家可以确定。而且我认为其中一些在 IE9 或 IE10 中发生了变化，所以有一个遗留问题-浏览器版本与任何一个都有关。）一旦选择它，您就不能在页面中途“切换”到另一种模式，然后再返回。

这意味着，如果您的内容要插入到页面的中间，并且您无法控制或影响外部部分，那么您将不得不忍受使用 quirks 模式呈现的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T05:49:17.043

`<meta http-equiv="X-UA-Compatible" content="IE=9" />`尽早在代码中使用标签。它必须出现在`<!doctype ...>`声明之后、`<html>`标签之后和`<head>`标签（如果存在）之后，但它应该出现在任何其他标签之前。

例如，如果它之前只有`<style></style>`（一个`style`内容为空的元素），IE 9 会进入 Quirks 模式。显然，IE 想要在处理可能受模式影响的构造之前决定模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T11:57:20.980

我认为您将不得不接受怪癖模式，抱歉。

这是邪恶的，但理论上，你可以在下面做这样的事情。

```
<html>
<title>Bad School Code - No DOCTYPE</title>
<!-- embedded code  -->
<script type="text/html"><!DOCTYPE html>
 <html lang="en-US">
  <head>
    <title>My Properly DOCTYPE'd Page</title>
    <meta charset="UTF-8">
  </head>
  <body>
    <p>lorem ipsum solor sit amet</p>
    <script>
      document.body.appendChild(document.createTextNode(((document.compatMode=='CSS1Compat')?'Standards': 'Quirks')+' mode.'));
    <\/script>
  </body>
 </html>
</script>
<script>
  var scripts = document.getElementsByTagName("script");
  var embedded = scripts[scripts.length - 2];
  var text = (embedded.firstChild ? embedded.firstChild.nodeValue : embedded.innerHTML).replace('\\/', '/');
  window.onload = function() {
    document.write(text);
  }
</script> 
<!-- end embedded code  -->
</html> 
```

document.write 清除容器页面并将其替换为您放置在`<script type="text/html">`块中的页面。您将需要在整个页面中替换为以阻止该`</script>`块过早结束，否则不应进行任何必要的更改。`<\/script>``<script type="text/html">`

请注意，在上面的示例中，document.write 运行后剩余的 html 是有效的 HTML5，如果您告诉验证器将其验证为 HTML5，则整个页面也将通过验证。

但是，您学校提供的容器代码可能正在做一些重要的事情，上面的代码会破坏它，因此您需要在代码中重新构建它。在使用它之前，请获得许可。奇怪的是，如果您的学校一开始就无法为您提供标准模式页面，并且要求您将页面放入他们的页面中，那么他们不会批准（甚至理解）这样的诡计。

# python - 使用 python ctypes 模块使 Windows 控制台光标不可见

> ID：12549921
> 
> 赞同：0
> 
> 时间：2012-09-23T05:15:51.700
> 
> 标签：python, winapi, python-2.7, ctypes, windows-console

我最近尝试在 Windows XP 上使用适用于 python 2.7 的控制台模块，但发现它的文档记录很差，并且会在我的机器上崩溃。

所以，我现在所做的基本上是编写自己的模块，但是遇到了这个问题，我无法弄清楚如何使用 ctypes.windll.kernel32 将控制台光标设置为不可见

我该怎么做呢？（使用标准模块和 python 2.7（希望只是 ctypes））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:27:31.477

大概是这样的吧。

```
from ctypes import *
class CONSOLE_CURSOR_INFO(Structure):
    _fields_ = [('dwSize', c_int),
                ('bVisible', c_int)]

STD_OUTPUT_HANDLE = -11

hStdOut = windll.kernel32.GetStdHandle(STD_OUTPUT_HANDLE)
cursorInfo = CONSOLE_CURSOR_INFO()
cursorInfo.dwSize = 1
cursorInfo.bVisible = 0
windll.kernel32.SetConsoleCursorInfo(hStdOut, byref(cursorInfo)) 
```

免责声明：未经测试。

# functional-programming - 在方案中的列表中查找重复元素

> ID：12549922
> 
> 赞同：1
> 
> 时间：2012-09-23T05:15:56.400
> 
> 标签：functional-programming, scheme, racket

我需要创建一个用方案编写的程序来接收这样的列表：

```
(function '(2 3 4 3 2 3 1 1 1 1 2 1 2)) 
```

这必须给我作为输出：

```
-> '((4 2) (3 3) (1 4) (5 1)) 
```

这个输出是因为有 4 位 2、3 位 3、1 位 4 和 5 位 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:05:06.263

正如@soegaard 所说，更多的上下文会很好。这个问题看起来像家庭作业，可能必须使用基本的列表操作来解决，而不必太担心效率。我将以一种*不会*作为家庭作业答案有用的方式来解决这个问题，因为它使用了一些高级功能，但希望它对将来的参考有用。

我将使用哈希表作为帮助数据结构来跟踪数字计数，旨在获得一个有效的答案，最大限度地减少输入列表上的列表遍历次数 - 只需要一次遍历。此外，它适用于任意数字列表，而不仅仅是数字列表。

首先是使用可变状态的高效、非函数式解决方案：

```
(define (counter lst)
  (let ((ht (make-hash)))
    (for-each
     (lambda (e)
       (hash-update! ht e add1 (lambda () 0)))
     lst)
    (hash-map ht (lambda (k v) (list v k))))) 
```

现在是相同的过程，但以纯功能样式实现，没有状态突变（请记住，问题被标记为`functional-programming`）：

```
(define (counter lst)
  (hash-map
   (foldl (lambda (e ht)
            (hash-update ht e add1 (lambda () 0)))
          (hash)
          lst)
   (lambda (k v) (list v k)))) 
```

无论哪种方式，这都有效 - 尽管结果可能以不同的顺序出现：

```
(counter '(2 3 4 3 2 3 1 1 1 1 2 1 2))
> '((5 1) (4 2) (3 3) (1 4)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:57:45.397

这是一个使用 of`fold`代替原版递归的解决方案。我还有帮助程序来获取列表中的唯一元素以及计算元素出现次数的方法。

```
#lang racket

(define (counted-elements lst)
  ;; This creates the list of (counted element)
  ;; pairs
  (foldl
    (lambda (next result)
      (cons
        (list (count next lst) next)
        result))
    '()
    (uniques lst)))

(define (count digit lst)
  ;; Count how many times digit appears in lst
  (foldl
    (lambda (next count)
      (if (= next digit) (+ count 1) count))
    0
    lst))

(define (uniques lst)
  ;; Get all the unique elements of lst
  (define (contains? elem collection)
    (not (zero? (count elem collection))))
  (foldl
    (lambda (next result)
      (if (contains? next result)
          result
          (cons next result)))
    '()
    lst)) 
```

样本输入的结果：

```
(counted-elements '(2 3 4 3 2 3 1 1 1 1 2 1 2))
;=> '((4 2) (3 3) (1 4) (5 1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T06:58:55.470

编辑代码：

```
(define (counter lst) 
        (if (null? lst)
         '()
        (cons (cons (count_help (car lst) lst) (car lst))
              (counter (delete (car lst) lst)))))

(define (count_help x lst)
        (cond ((null? lst) 0)
        ((eq? x (car lst)) (+ 1 (count_help x (cdr lst))))
        (else   (count_help x (cdr lst)))))

(define delete
  (lambda (item list)
    (cond
      ((null? list) '())
     ((equal? item (car list)) (delete item (cdr list)))
     (else (cons (car list) (delete item (cdr list))))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T11:23:07.627

练习的背景很重要。有*很多*方法可以解决这个练习，所以正确的解决方案取决于你知道什么概念。

这是一个简单的解决方案，它使用列表包含数字的事实：

1.  `count`将长度为 10的向量初始化为包含零。

    这里 count[i] 是 v 的第 i 个条目，是`i`到目前为止已处理的列表部分中出现的次数。

2.  对于列表中的每个元素`i`，递增`i`向量的第 th 个元素。

3.  将向量中的信息转换为列表形式。

如果您应该训练基于列表的函数，那么在进一步处理之前按升序对列表进行排序是个好主意。这简化了您需要进行的计数。

# c++ - 我如何让它发挥作用——我不明白的 2 个严重错误？

> ID：12549925
> 
> 赞同：-1
> 
> 时间：2012-09-23T05:16:38.890
> 
> 标签：c++, visual-studio-2010, visual-c++, visual-c++-2010

```
#include <iostream>
#include <iomanip>
using namespace std;

int main () // print to console: 3.0*5.0=15.00
{
    double a;
    double b;
    a =(3.0);
    b =(5.0);
    cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
    cout << "* " << b << "\n" << endl;
    cout << "------" << endl;
    cout << fixed << setprecision (2) << a*b << "\n" << endl;
    return 0;
}

int calculate () // print to console: (7.1*8.3)-2.2=56.73
{
    double a;
    double b;
    double c;
    a = (7.1);
    b = (8.3);
    c = (2.2);
    cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
    cout << "* " << b << "\n" << endl;
    cout << "- " << c << "\n" << endl;
    cout << "------" << endl;
    cout << setprecision(2) << (a*b)-c << "\n" << endl;
    return (a*b)-c;
}

int calculation () // print to console: 3.2/(6.1*5.0)=0.10
{
    double a;
    double b;
    double c;
    a=(3.2);
    b=(6.1);
    c=(5.0);
    cout << "  " << fixed << setprecision (1) << a << "\n" << endl;
    cout << b << "*" << c << endl; 
    cout << "------" << endl;
    cout << setprecision(2) << a/(b*c) << "\n" << endl;

    system("PAUSE");
    return a/(b*c);
} 
```

我从来没有遇到过这个错误。我是 C++ 新手，所以一些方向会很棒！如何更改此代码以使其在不闪烁的情况下打印。谢谢！

输出：1>LINK：错误 LNK2001：无法解析的外部符号 _mainCRTStartup 1>致命错误 LNK1120：1 无法解析的外部符号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:54:31.847

很可能您的 [.cpp] 文件不是项目源文件的一部分，因此它没有被编译，也没有链接相应的目标代码文件。

重现错误：

```
[d:\开发\测试]
> 键入 nul >bah.rc

[d:\开发\测试]
> rc /nologo bah.rc

[d:\开发\测试]
> 目录 /b *.res
bah.res

[d:\开发\测试]
> 链接 /nologo bah.res /out:bah.exe /entry:mainCRTStartup /subsystem:console /machine:x86
链接：错误 LNK2001：未解析的外部符号 _mainCRTStartup
bah.exe : 致命错误 LNK1120: 1 未解决的外部

[d:\开发\测试]
> _

```

解决方案：将文件添加到 Visual Studio 项目（而不是作为解决方案文件）。

* * *

关于代码，试试这个：

```
#include <iostream>         // std::wcout, std::endl, std::fixed
#include <iomanip>          // std::setprecision
#include <string>           // std::wstring
using namespace std;

void display( char const expression[], double const result )
{
    wcout << expression << " = " << result << endl;
}

#define DISPLAY( expr ) display( #expr, expr )

int main()
{
    wcout << fixed << setprecision( 1 );
    DISPLAY( 3.0*5.0 );
    DISPLAY( (7.1*8.3)-2.2 );
    DISPLAY( 3.2/(6.1*5.0) );
} 
```

我通常不会为典型的家庭作业问题提供解决方案。

但是您尝试的解决方案似乎朝着错误（不利于学习）的方向发展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:55:52.347

检查/更新此变量：

![在此处输入图像描述](../Images/9c95a7d30fdb3c630b3efd8ac0ce6952.png)

此设置控制“主要”功能的名称。换句话说，此设置告诉链接器在开始链接过程时应该查找什么名称。大约有 8 个子系统，每个子系统都有自己的“主要”。

# php - php类中的错误？

> ID：12549928
> 
> 赞同：0
> 
> 时间：2012-09-23T05:17:10.773
> 
> 标签：php, class, object, constructor

我正在使用我正在开发的一个类的框架，并且在完成它之前我正在对其进行测试。

但是，我遇到了几个似乎干扰其执行的错误。

以下是 php 警告/错误：

```
Notice: A session had already been started - ignoring session_start() in
/var/www/VRC_Header2.php on line 2

Strict Standards: Redefining already defined constructor for class CheckOut in 
/var/www/CheckOut_old.php on line 18 
```

这是涉及的两个类：

```
<?php //Checkout class - NOTE: Add exception handler later

class CheckOut extends DB_MySQL{

    public $fName;

    public $lName;

    public $numberOut;

    public $p_id;

     public function __construct($dbuser, $dbpass, $dbhost, $dbname) 
     {

        parent::__construct($dbuser, $dbpass, $dbhost, $dbname);

        $this->connect();

     }

    //Grab the values of the territory being checked out

    public function checkOut($numberOut)
    {

        $this->numberOut=$numberOut;

        /*
         *Begin checkout function that inserts into database.
         *Make sure all tests are run BEFORE calling this method.
         *Begin checkout function:
        */

        //Check Connection

        $this->checkConnect();

        //Start Checkout

        $stmt = $this->dbh->prepare("INSERT INTO checkOut(t_id, p_id, checkTime, due) VALUES(:param1, :param2, curdate(), date_add(curdate(), interval 3 month))");

        $stmt->bindParam(':param1', $this->numberOut);

        $stmt->bindParam(':param2', $this->p_id);

        $stmt->execute();

        if($stmt == FALSE)

                        return false;
        else

            return true;            
    }

    private function checkConnect()
    {

        if(!isset($this->dbh))

            $this->connect();

    }               

    public function territoryCheck($numberOut)
    {

        $this->numberOut = $numberOut;

        //Execute test

        $this->checkConnect();

        $stmt = $this->dbh->prepare("SELECT t_id FROM Territory WHERE t_id = :param1");

        $stmt->bindParam(':param1', $this->numberOut);

        $stmt->execute();           

        $stmt->fetch();

        //Determine value of test

        if($stmt == FALSE)
        {
            return FALSE;
        }   
    }

    public function publisherCheck($lName, $fName)
    {

        $this->lName = $lName;

        $this->fName = $fName;

        //Execute test

        $this->checkConnect();

        $stmt = $this->dbh->prepare("SELECT p_id FROM People WHERE lastName = :param1 AND firstName = :param2");

        $stmt->bindParam(':param1', $this->lName);

        $stmt->bindParam(':param2', $this->fName);

        $stmt->execute();

        //Determine value of test

        if($stmt == FALSE)
        {
            return FALSE;
        }
        else
        {

            $dummyvar = $stmt->fetch();
            $this->p_id = implode($dummyvar);
        }           
    }

    public function isTerritoryOut($numberOut)
    {
        //Execute test

        $this->checkConnect();

        $this->numberOut = $numberOut;

        $stmt = $this->dbh->prepare("SELECT t_id FROM checkIn WHERE t_id = :param1");

        $stmt->bindParam(':param1', $this->numberOut);

        $stmt->execute();

        $stmt->fetch();

        //Determine value of test

        if($stmt == FALSE)
        {
            return FALSE;
        }   
    }       
}   
?> 
```

和另外一个：

```
include 'VRC_Header2.php';

class DB_MySQL {

    protected $dbuser;

    protected $dbpass;

    protected $dbhost;

    protected $dbname;

    protected $dbh; // Database connection handle       

    public function __construct($dbuser, $dbpass, $dbhost, $dbname)
    {

        $this->dbuser = $dbuser;

        $this->dbpass = $dbpass;

        $this->dbhost = $dbhost;

        $this->dbname = $dbname;
    }

    //Used to create connections - almost always called by execute()

    protected function connect()
    {

        try
        {

            $this->dbh = new PDO("mysql:host=$this->dbhost;dbname=$this->dbname",$this->dbuser,$this->dbpass);

        }
        catch(PDOException $e)
        {
            print "Error!: ".$e->getMessage()."<br/>";
                        die();
        }
    }       
}
?> 
```

这些类不完整，但它们是功能性的。现在，我觉得真正的问题与构造函数有关（它们当然是错误的）。但这是我之前发布的关于该问题的问题以及我收到的答案：[子类构造函数将如何与 php 中的父类构造函数交互？](https://stackoverflow.com/questions/12453143/how-will-a-child-class-constructor-interact-with-a-parent-class-constructor-in-p).

这里出了什么问题？

任何帮助表示赞赏。

编辑：我还应该添加我传递给类的值没有插入到数据库中。我认为这是错误的结果/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:34:20.677

您可能会注意到`<?php`将发送开始标记之前的空格或换行符。

> 严格标准：在第 18 行的 /var/www/CheckOut_old.php 中为类 CheckOut 重新定义已定义的构造函数

在这里，您为您的应用程序定义了 2 个构造函数：正如您在[php 文档](http://php.net/manual/en/language.oop5.decon.php)中看到的，您有 2 种创建构造函数的方法：

1/ __construct() 魔术方法：

```
class A
{
  public function __construct()
  {

  }
} 
```

2/ 类名本身，不区分大小写：

```
class A
{
  public function a()
  {

  }
} 
```

你在你的类中创建`__construct`了`checkout`方法`checkout`。

在你的情况下：

```
 class A
  {

     public function __construct()
     {
       echo "ok construct()";   
     }

     public function a()
     {
       echo "ok a()";
     }
  }

 $test = new A(); 
```

将输出：

> 好的构造（）

但这是一个非常模棱两可的情况，所以 PHP 会给你这个警告。

# mysql - 根据列值忽略mysql行

> ID：12549933
> 
> 赞同：1
> 
> 时间：2012-09-23T05:19:06.177
> 
> 标签：mysql

我有一个使用 mysql 数据库的 phpbb 论坛。用户由“user_id”标识。但是，他们有多个组。用户将属于“人类”（9）或“僵尸”（8）组。但是，它们将始终位于“已注册”(2) 组中。这将创建一个如下所示的表：

![mysql表](../Images/279a8f994b82262e87ab85394ee19f46.png)

总共使用三个数据库来形成一个新表。

```
SELECT phpbb_users.user_id 'ID',
IF( phpbb_user_group.group_id =9,  'Human', IF( phpbb_user_group.group_id =8,  'Zombie', '')) AS Team,

IF( phpbb_profile_fields_data.pf_oz =1,  'Yes',  ' ' ) AS OZ,
phpbb_users.username 'Player', phpbb_users.user_email 'E-mail',
IF( phpbb_profile_fields_data.pf_share_phonenum =1, phpbb_profile_fields_data.pf_phone_number,  ' ' ) AS Phone,
phpbb_profile_fields_data.pf_code 'Tag Code',
phpbb_profile_fields_data.pf_student_id 'Student ID', phpbb_users.starve 'Time Remaining (in hours)'
FROM phpbb_profile_fields_data, phpbb_users, phpbb_user_group
WHERE phpbb_profile_fields_data.user_id = phpbb_users.user_id
AND phpbb_profile_fields_data.user_id = phpbb_user_group.user_id
LIMIT 0 , 300 
```

我需要从结果集中删除“团队”下所有带有空白字段的行（这是“注册”组的结果）。感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:28:49.493

`HAVING`在子句的末尾添加一个子句`WHERE`，如下所示：

```
WHERE phpbb_profile_fields_data.user_id = phpbb_users.user_id
AND phpbb_profile_fields_data.user_id = phpbb_user_group.user_id
HAVING Team <> ''
LIMIT 0 , 300 
```

该`HAVING`子句将使**MySQL**对查询结果（包括任何聚合结果）进行另一次过滤，然后丢弃那些不匹配该`HAVING`子句的记录。

您还可以在`HAVING`子句中包含多个条件，如下所示：

```
HAVING Team <> '' and Player <> 'First Last' 
```

# layer - 在视图中执行代码将出现一次

> ID：12549935
> 
> 赞同：0
> 
> 时间：2012-09-23T05:19:11.123
> 
> 标签：layer, viewwillappear

我在 viewwillappear 方法中有几行代码。我只想执行此代码一次。我怎样才能做到这一点。但是，此代码在循环内。

`CALayer *myLayer = btn.layer; myLayer.borderColor = [UIColor blackColor].CGColor; myLayer.masksToBounds=NO; myLayer.borderWidth = 2.0; myLayer.shadowOffset = CGSizeMake(0, 3); myLayer.shadowRadius = 10.0; myLayer.shadowColor = [UIColor blackColor].CGColor; myLayer.shadowOpacity = 1.0;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:29:10.333

在 .h 文件中声明一个`BOOL`变量（或您喜欢的任何名称）。在 viewDidLoad 方法中`flag`设置它。`NO`在 viewWillAppear 方法中，检查此代码之前是否执行过：

```
for(---)
{
if(!flag)
 {
      //execute above lines of code
   flag = YES;
 }
} 
```

就在最后一行，使其值`YES`。

# facebook - 如何让我的网站自动提交要处理的 url 到 facebooks opengraph 平台？

> ID：12549936
> 
> 赞同：0
> 
> 时间：2012-09-23T05:19:44.143
> 
> 标签：facebook, facebook-opengraph, scraper

我经营着一个每年有数十万浏览量的新闻网站。每当发布新内容时（每个星期天晚上），作者都喜欢在 facebook 上发布指向新内容的链接。然而，据我所知，facebook 仅每 24 小时抓取一次网站......所以当链接粘贴到 facebook 上时，它只会出现默认文本。（即不是嵌入在页面中的 opengraph 数据）。

网站上的所有页面（尤其是新闻文章本身）都标有完整的 opengraph 数据。facebook linter 将始终正确显示嵌入的 opengraph 数据。但是，在它刮掉新页面之前，它们不会在 facebook 上正确显示。

目前一种手动解决方案是通过 facebook linter 运行所有新的 URL，在 opengraph 数据库中更新它们。但是，我希望有某种自动化系统，Facebook 可以直接收到每篇新文章的通知。

整个网站是动态的 php - 任何人都可以让我朝着正确的方向前进吗？也许可以修改代码以在每次提交新闻文章后向 facebook 提交调用？

任何帮助将不胜感激 =)

网站 = [Critic.co.nz](http://critic.co.nz)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:22:26.907

没有必要这样做。当有人在您的页面上发表评论、共享/喜欢链接或将 URL 粘贴到他们的提要上时，Facebook 将自动抓取该页面。

这里的问题似乎是网站本身。

查看元标记：

```
<meta property='og:description' content='Dubstep gets a bad rap, and to be fair, it does deserve a lot of it. But dubstep is not total shit. There is some wonderfully interesting, energetic, face-meltingly beautiful dubstep created out there in a truly global scene, facilitated by the same';?>> 
```

注意最后的 ';?>。那是php。

# android - 应用程序始终在平板电脑中显示横向模式

> ID：12549942
> 
> 赞同：1
> 
> 时间：2012-09-23T05:22:28.073
> 
> 标签：android

我制作了一个在模拟器以及中小型手机上运行良好的应用程序。但是在平板电脑上运行时，它总是只显示横向模式。我还使用了单独的布局和布局-土地布局。我没有得到背后的原因。这是代码：

```
public class SplashActivity extends FragmentActivity
{
  public void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    requestWindowFeature(1);
    getWindow().setFlags(1024, 1024);

  FragmentManager fragmentmanager = getSupportFragmentManager();
  FragmentTransaction fragmenttransaction = fragmentmanager.beginTransaction();
  if (getResources().getConfiguration().orientation == 
      Configuration.ORIENTATION_LANDSCAPE) {
      setRequestedOrientation(0);
  }
  else
  {
      setRequestedOrientation(1);  
  }
  fragmenttransaction.commit();

    setContentView(R.layout.welcome);
    new Handler().postDelayed(new SplashThread(), 2000L);
  }

  class SplashThread implements Runnable
  {
    SplashThread()
    {
    }

    public void run()
    {
      SplashActivity.this.startActivity(new Intent(SplashActivity.this, McqHomePage.class));
      SplashActivity.this.finish();
    }
  }
} 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:36:28.973

如果您不关心方向，则不妨完全省略这段代码：

```
if (getResources().getConfiguration().orientation == 
      Configuration.ORIENTATION_LANDSCAPE) {
      setRequestedOrientation(0);
  }
  else
  {
      setRequestedOrientation(1);  
  } 
```

上面的代码也有一个丑陋的副作用，即某些方向更改总是会导致纵向——例如，您的代码不会捕捉到反向横向。此外，请不要使用 0 或 1，而是使用提供的常量，这样如果值发生变化，您的代码也不会中断。

与此同时，检查你的[清单](http://developer.android.com/guide/topics/manifest/activity-element.html)——我敢打赌你在那里添加了一个方向属性。

# asp.net-mvc-4 - MVC4：什么实体代表表格网页_Membership

> ID：12549945
> 
> 赞同：6
> 
> 时间：2012-09-23T05:22:51.997
> 
> 标签：asp.net-mvc-4, simplemembership

我正在尝试访问 pages_Membership 表（我正在使用 SimpleMembership）来检索帐户 ConfirmationToken。

如何从我的模型/控制器/DAL 访问此表？

我唯一能想到的就是从我的代码中执行纯 SQL 来获取这个值，但这似乎不是正确的做法，也不优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T22:11:25.370

据我了解，没有直接的方法可以使用`WebSecurity`帮助器检索值。

当您创建用户和帐户时，该方法会返回确认令牌：

```
string confirmationToken = WebSecurity.CreateUserAndAccount("tester", "test123", requireConfirmationToken: true); 
```

然后，您将此令牌（例如在链接中作为 QueryString 参数）发送到用户的电子邮件地址。当用户单击链接时，您的应用必须获取/读取此令牌，然后您必须调用：

```
WebSecurity.ConfirmAccount(userName, confirmationToken); 
```

正如您所提到的，您当然可以直接编写自己的 SQL 来访问数据库，甚至可以将其添加`webpages_Membership`到 EntityFramewok EDMX 模型并直接查询表：

```
var confirmationToken = Database.Memberships.Single(m => m.UserId == userId).ConfirmationToken; 
```

更多关于这个：

[使用 ASP.NET 网页安全性的确认功能](http://www.mikepope.com/blog/AddComment.aspx?blogid=2267)

[获取帐户确认令牌？](http://forums.asp.net/t/1733841.aspx/1?Get%20Account%20Confirmation%20Token%20)

# javascript - Jasmine jQuery 未检测到 DOM 操作

> ID：12549946
> 
> 赞同：0
> 
> 时间：2012-09-23T05:22:57.127
> 
> 标签：javascript, jquery, jasmine, jasmine-jquery

我正在使用 Jasmine jQuery 测试自定义 javascript 模块的 AJAX 请求，最终它是对 DOM 的后处理操作，但我的 Jasmine 测试没有找到新操作的元素。

茉莉花测试如下...

```
describe("#init", function() {
  it("should return a JSON object from the server", function() {
    loadFixtures("top_content_container.html");

    // This method will add 'div.search_result' to the 'div.top_content' container
    SC.init();

    expect($('div.top_content')).toContain('div.top_content_container');
    expect($('div.top_content')).toContain('div.search_results');

   // THIS TEST SHOULD PASS, BUT DOES NOT DETECT THE DOM UPDATES AND DOES NOT
   expect($('div.top_content div.search_result').length == 10).toBeTruthy();
  });
}); 
```

在该`SC.init()`方法中，它将元素添加到 DOM，然后运行 ​​AJAX 请求，该请求返回数据并将其注入 DOM。这些新创建的元素匹配“div.search_result”。

我已经确认所有 AJAX 请求都在正常运行，并且 SC 库正在正确地将所有元素注入 DOM；从功能的角度来看，该库正在运行。问题是如何让 Jasmine 测试来查看 DOM 的更新。同样，我不需要帮助调试 SC 代码库；我需要帮助调试测试本身。

你看到有什么不正常的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:44:00.583

AJAX 是异步的，因此您的 Jasmine 规范可能会在 AJAX 请求收到响应之前达到关于搜索结果的断言。您可能希望`jasmine.Ajax.useMock()`在调用之前执行一次`SC.init()`，然后将成功响应传递给它。为此，您需要[Jasmine-Ajax](https://github.com/pivotal/jasmine-ajax)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:38:52.527

像[https://github.com/velesin/jasmine-jquery](https://github.com/velesin/jasmine-jquery)这样的库会给你更多的权力。但是，粗略的解决方案也可以使用 runs/waitsFor 进行异步查询。

```
 it("should load asynchronously", function() {

     runs(function() {
        $el = $('<div id="jasmine-insert">').appendTo('body');
        $el.load('path/file.html');
      });
      waitsFor(
        function() {  return $el.html().length > 0; }, // tested at intervals
        "html couldn't be loaded", // message on error
        500); // wait time out
      runs(function() {
        expect($('div.top_content').find('div.top_content_container').toEqual(1));
      });

  }); 
```

# c - strcpy 在函数中的使用

> ID：12549952
> 
> 赞同：0
> 
> 时间：2012-09-23T05:24:33.523
> 
> 标签：c, pointers, gcc, gcc-warning, strcpy

```
#include<stdio.h>
#include<stdlib.h>
#include<ctype.h>
#include<string.h>

struct person *create_node(char *, char *,int);
void addnode(char *,char *,int,struct person *);

struct person
{
   char fname[20];
   char sname[20];
   int pno;
   struct person *next,*prev;
};

struct person *create_node(char *first,char *second,int mob)
{
   struct person *pnode=(struct person *)malloc(sizeof(struct person));
   strcpy(pnode->fname,*first);
   strcpy(pnode->sname,*second);
   pnode->pno=mob;
   pnode->next=pnode->prev=NULL;

  return pnode;

 }

 void addnode(char *first,char *second,int mob,struct person *pnode)
 {
   while(pnode->next!=NULL)
   {
        pnode=pnode->next;
   }
   pnode->next=create_node(first,second,mob);
   pnode->next->prev=pnode;

 }

 int main()
 {
   struct person *root=NULL;
   char choice='y';
   char first[20];
   char second[20];
   int mob;

   while(tolower(choice)=='y')
  {
        printf("enter the first name:");
    scanf("%s",first);

    printf("enter the second name:");
    scanf("%s",second);

    printf("enter the mobile no:");
    scanf("%d",&mob);

    if(root==NULL)
    root=create_node(first,second,mob);
    else
    addnode(first,second,mob,root);
    printf("enter the option to continue or end(y or n):");
    scanf("%c",&choice);
    fflush(stdin);
  }

  return 0;
  } 
```

这是我编写的程序，它的基本作用是，它将创建链表，从用户那里获取结构的值。

当我从函数运行这个程序时，我收到了 2 个类似的警告

```
 struct person * create_node(char *, char *, int),
    passing char to argument 2 of strcpy(char *, const char *) lacks a cast 
```

我不明白为什么它将值传递`const`给函数。

这个程序还有一个问题。在我输入第一个节点的信息后，程序停止工作。

我`gcc`在 Windows 平台上使用编译器。请帮帮我。谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T05:27:22.747

问题不在于。问题是您传递`*first`的`*second`第二个参数`strcpy()`是`char`s 而不是 char 指针。您必须简单地传递`first`and `second`，指针本身。

另外，请[不要强制转换 malloc 的返回值。](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T05:30:06.917

这里：

```
struct person *create_node(char *first,char *second,int mob)
{
   // ...
   strcpy(pnode->fname,*first);
   strcpy(pnode->sname,*second);
   // ...
   return pnode;
} 
```

`first`并且`second`是指针（指向`char`）。没有理由取消引用它们`*`并提取字符。`strcpy()`将指针作为其参数。`first`并且`second`是好的`strcpy()`。

# javascript - 在同一个容器中渲染内容的有效方法

> ID：12549953
> 
> 赞同：1
> 
> 时间：2012-09-23T05:24:47.793
> 
> 标签：javascript, html, performance, render

假设，我有一个 HTML 元素，

```
<div class = "variable-content"> </div> 
```

我想根据某些条件在这个 div 中放置一些内容。就像有两个按钮一样，如果用户点击 button_a，那么这个 div 会有一些内容 A，如果用户点击 button_b，那么我们会显示内容 B。

有两种方法：-

1.  制作两个 div，一个包含内容 A，另一个包含内容 B，并隐藏其中一个。当用户单击 button_a 时，隐藏带有内容 B 的 div 并显示内容 A div。反之亦然。

2.  当用户单击 button_a 时，将内容 A 呈现在 div 中，当用户单击 button_b 时，将内容 B 呈现在同一个 div 中。

方法1的优点： - 只渲染一次，其余时间只显示和隐藏div。

apprach2 的优势：- 代码变得更易于管理。（我猜）

我想知道这两种方法中哪一种更好更有效？有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:34:39.457

我想说这取决于您页面上已有的内容量以及您正在使用多少元素。如果有很多，你想释放一些内存并替换一些内容，如果只有几个，只需显示/隐藏，不要强制浏览器重新创建 DOM 元素。

# php - 定期获取 API 提供的内容

> ID：12549962
> 
> 赞同：0
> 
> 时间：2012-09-23T05:27:09.547
> 
> 标签：php, javascript, api, long-polling

我只是在[这里](http://www.programmableweb.com/apis/directory/1?apicat=sports)查看所有可用的 API 。由于有很多 API 提供定期更新的内容（例如最新消息），我应该如何在内容更新或有新内容可用时立即获取内容。

据我所知，只有长轮询提供定期检查，是否有另一种更新检查技术？

对不起我糟糕的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:31:06.487

获取内容实时更新的唯一方法是 API 是否向您的服务器提供了推送通知，这将取决于您正在实施的 API。大多数将要求您轮询新数据。

# java - 深拷贝多维数组

> ID：12549963
> 
> 赞同：0
> 
> 时间：2012-09-23T05:27:09.623
> 
> 标签：java

我正在创建一个通过交换原始板上同一行中的两个相邻块获得的新板。问题是新版块覆盖了原版块的内容。

例如：

```
 int[][] origBoard = { { 0, 4, 6 }, {  5, 3, 1 }, { 2, 8, 7 } };
 int[][] twinBoard = { { 0, 6, 4 }, { 5, 3, 1 }, { 2, 8, 7 } }; 
```

发生的情况是，当我断言以下内容时，origBoard 与 twinBoard 相同：

```
 Board B = new Board(origBoard);
 Board b = B.twin();
 assertFalse("Calling twin() modifies the original Board.", B.equals(b)); 
```

我的代码如下：

```
public class Board {

    private int[][] goalBoard;

    private final Node node;

    private class Node {
        private int[][] board;
        private int move;
        private Node next;
    }

    // construct a board from an N-by-N array of blocks
    // (where blocks[i][j] = block in row i, column j)
    public Board(int[][] blocks) {
        int N = blocks.length;

        goalBoard = new int[N][N];
        for (int i = 0; i < dimension(); i++) {
            for (int j = 0; j < dimension(); j++) {
                if (i == N - 1 && j == N - 1) {
                    goalBoard[i][j] = 0;
                } else {
                    goalBoard[i][j] = N * i + (j + 1);
                }
            }
        }

        // initial node
        node = new Node();
        node.board = blocks;
        node.move = 0;
        node.next = null;
    }

    // board dimension N
    public int dimension() {
        return goalBoard.length;
    }

    // a board obtained by exchanging two adjacent blocks in the same row
    public Board twin() {
        int[][] testBoardATwin = new int[dimension()][dimension()];
        testBoardATwin = node.board;
        int x = node.board[0][0];
        int y = node.board[0][1];

        // DEFAULT
        if (x != 0 && y != 0) {
            testBoardATwin[0][0] = y;
            testBoardATwin[0][1] = x;
        }
        // 2x2
        if (dimension() == 2 || y == 0) {
            if (x == 0 || y == 0) {
                x = node.board[1][0];
                y = node.board[1][1];
                testBoardATwin[1][1] = x;
                testBoardATwin[1][0] = y;
            }
        } else {
            if (x == 0) {
                testBoardATwin[0][1] = node.board[0][2];
                testBoardATwin[0][2] = y;
            }
        }

        Board board = new Board(testBoardATwin);
        return board;
    }

    // does this board equal y?
    public boolean equals(Object y) {
        Board testBoard = (Board) y;
        if (testBoard == null) {
            return false;
        }
        for (int i = 0; i < dimension(); i++) {
            for (int j = 0; j < dimension(); j++) {
                if (testBoard.node.board[i][j] != node.board[i][j]) {
                    return false;
                }
            }
        }
        return true;
    }

} 
```

我究竟做错了什么？请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T05:34:43.047

```
int[][] testBoardATwin = new int[dimension()][dimension()];
testBoardATwin = node.board; 
```

这就是你的问题所在。如果您想制作`new`一个，请不要立即将其更改为旧的。

但评论也是对的。直接复制和修改会更有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T05:34:50.937

这就是问题：

```
int[][] testBoardATwin = new int[dimension()][dimension()];
testBoardATwin = node.board; 
```

当代码创建一个新的 int[][] 数组时，一切都开始顺利，但随后它立即丢弃该新数组并仅使用属于`twin`调用实例的那个。

相反，需要做的是`node.board`逐个索引，或者使用类似`Arrays.copyOf`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-23T05:54:38.243

`node = new Node(); node.board = blocks;`

在 Board 构造函数中同样棘手的地方。您不是复制输入数组，而是分配对类成员属性的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T06:39:44.890

为了深度复制多维数组，我这样做了：

```
 private static int[][] copy2d(int[][] nums) {
            int[][] copy = new int[nums.length][];

            for (int i = 0; i < copy.length; i++) {
                    int[] member = new int[nums[i].length];
                    System.arraycopy(nums[i], 0, member, 0, nums[i].length);
                    copy[i] = member;
            }

            return copy;
        }

    int[][] testBoardATwin = copy2d(node.board); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-23T05:40:30.967

要制作对象，您必须遵循以下说明：

*   首先，你必须使课程最终
*   将所有字段设为最终字段和私有字段。
*   不要提供“setter”方法
*   不允许子类覆盖方法。
*   请注意，没有修改状态的方法

您可以参考的最佳参考之一是 [http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html)

# jquery - 改变 当页面宽度小于 960 像素时，jquery 的高度

> ID：12549965
> 
> 赞同：2
> 
> 时间：2012-09-23T05:27:16.433
> 
> 标签：jquery, jquery-animate, height, width

当页面宽度小于960px时如何使用jquery改变元素的高度

这是我尝试过的：

```
$(document).ready(function() {

if ( $(window).width() < 960) {
    $('menu').animate({height:'60px'});
}
else {
    $('menu').animate({height:'40px'});
}

}); 
```

但它仅在您刷新页面时才有效，并且我希望它在页面加载后重新调整页面大小时工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T05:30:43.293

```
 $('menu').animate({height:'60px'});
    ^^^^
 here is the error if menu is `id` than should be `#menu` if `class` than `.menu` 
```

菜单标签浏览器支持

> ![在此处输入图像描述](../Images/91ddc86d0dd69549fbefc7a5fd4e513b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T05:29:22.463

您需要发布 HTML 以确保，但`$('menu')`通常不是有效的选择器，它将匹配`<menu>`. 更有可能它是一个类或 id - 如果它是一个类，它应该是`$('.menu')`，如果它是一个 ID，它应该是`$('#menu')`

要在调整页面大小时运行，请将代码包装在`resize()`方法中 - [http://api.jquery.com/resize/](http://api.jquery.com/resize/)

```
// resize menu depending on page width
function do_resize(){
    if ( $(window).width() < 960) {
        $('menu').animate({height:'60px'});
    } else {
        $('menu').animate({height:'40px'});
    }
}
// resize menu on initial page load
$(document).ready(do_resize);
// resize menu when page is resized
$(window).resize(do_resize); 
```

# php - PHP OOP5 - 无法通过方法向对象添加上下文

> ID：12549968
> 
> 赞同：0
> 
> 时间：2012-09-23T05:27:22.613
> 
> 标签：php, oop

我上了这门课：

```
class Trajectory{
    private $points = array();

    public function __construct(){
    }

    public function addPoint(Point $myPoint){
        $this->points[] = $myPoint; // line 20
    }
} 
```

当我尝试运行方法 addPoint() 时，我得到了这个错误：

```
( ! ) Fatal error: Using $this when not in object context in /index.php on line 20 
```

我尝试将其更改为：

```
$points[] = $myPoint; 
```

但是轨迹的 $point 数组并没有改变，而是每次我使用 addPoint 方法时都会创建一个新的 $points 数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T05:29:59.883

您不能将此方法称为静态方法。

您应该在类的实例上调用它。

```
$trajectory = new Trajectory();
$trajectory->addPoint($point); 
```

代替`Trajectory::addPoint($point);`

# sql - SQL 中的递归 - 公用表表达式与 WHILE

> ID：12549971
> 
> 赞同：3
> 
> 时间：2012-09-23T05:28:00.180
> 
> 标签：sql, tsql, recursion, common-table-expression

我有这张桌子：

```
Categories( CatId, Name, ParentId NULL ) 
```

...这是递归的，因此每个类别都可以命名一个父类别，而该父类别又具有一个父类别，依此类推。像这样：

```
1, "Sports", NULL
2, "Football", 1
3, "Golf", 1
4, "Handegg", 2
5, "Sex", NULL
6, "On the beach", 5 
```

不久前，我使用 CTE 对类别的父级执行递归查找，如下所示：

```
WITH Categories(CatId, Name, ParentId, n) AS (
    SELECT CatId, Name, ParentId, 1
    FROM Categories
    WHERE CatId = @categoryId

    UNION ALL

    SELECT c1.CatId, c1.Name, c1.ParentId, c2.n + 1
    FROM Categories AS c1
         INNER JOIN Categories AS c2 ON c1.CatId = c2.ParentId
) 
```

但我在想，我不能将其改写为 WHILE 查询吗？

```
DECLARE @ret TABLE( CatId, Name, ParentId )

DECLARE @tCatId int
DECLARE @tName nvarchar(255)
DECLARE @tParentId int NULL

SELECT @tCatId = CatId, @tName = Name, @tParentId = ParentId
FROM Categories
WHERE CatId = @categoryId

WHILE( @tParentId IS NOT NULL ) BEGIN
    INSERT INTO @ret ( CatId, Name, ParentId ) VALUES ( @tCatId, @tName, @tParentId )

    SELECT @tCatId = CatId, @tName = Name, @tParentId = ParentId
    FROM Categories
    WHERE CatId = @tParentId
END

SELECT @ret 
```

显然它的边缘有点粗糙（例如当第一行的 ParentId 为 NULL 时没有完成），而且我无法对其进行测试（因为我的 SQL Server 已关闭以进行重建），但它肯定是正确的?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:59:56.300

虽然这在语义上可行，但 CTE 通常更易于编程，因为它们代表不可变的逻辑结果集。while 循环命令式地指示执行模型。出于这个原因，正确和维护需要更多的工作。

CTE 很有可能会更快。在内部，它包含一种形式的 while 循环，但该循环位于查询执行管道的深处。它比 T-SQL 循环快得多。此外，它是一个单一的声明。while 循环运行许多语句。SQL Server 的每条语句开销很小（即使它只是`select null`）。

也就是说，while 循环有时会给您更多的灵活性和更多的控制权。

您可能应该首先尝试通过 CTE 解决您的要求。仅当您注意到（或您可以预见）由于某些具体原因，while 循环将成为更好的解决方案时，才使用命令式控制流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:50:37.997

CTE 用于表示一个临时结果集，您可以使用它来编写复杂的查询。

```
WITH DerviedTable (<Column>) AS (SELECT query to derive a table from one or more tables)
<A complex SELECT query that uses the DerviedTable one or more times> 
```

在没有 CTE 的情况下，您必须在需要在 JOINS 中引用它的所有地方定义该派生表。

使用递归的 CTE`UNION ALL`肯定补充了`WHILE`基于递归逻辑，但正如您所见，它消除了编写 TSQL 的麻烦，只需定义基和递归成员。

[在我们之前的一个 MSSQL Server 项目中，当我们迁移到 SQL Server 2005 时，我们积极地用 CTE 替换了所有此类基于 WHILE 的递归，并遇到了CTE 定义中涉及表变量](http://connect.microsoft.com/SQLServer/feedback/details/527843/deadlock-hang-cpu-thrashing-when-combining-udf-cte-and-udtt)的死锁情况。不确定这是否已在最近的版本中得到修复，但认为值得分享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T12:53:32.067

两者都不正确

在第一次缺少
c2.CatId = @categoryId

在第二个
WHERE CatId = @tParentId

# python - 如何让 Django 信号调用模型方法？

> ID：12549977
> 
> 赞同：21
> 
> 时间：2012-09-23T05:29:14.703
> 
> 标签：python, django, django-models, django-signals

也许只是太晚了，但我无法弄清楚为什么这不起作用。当我有一个 post_save 信号调用一个通用函数时，它可以工作，但是当我有一个 post_save 信号调用模型中的一个方法时，什么也没有发生。这是有效的代码：

```
class Revision(models.Model):
    # Model junk...

def send_email(sender, instance, created, **kwargs):
    if created:
        print "DO STUFF"

signals.post_save.connect(send_email, sender=Revision) 
```

但这不起作用：

```
class Revision(models.Model):
    # Model junk...

    def send_email(sender, instance, created, **kwargs):
        if created:
            print "DO STUFF"

signals.post_save.connect(Revision.send_email, sender=Revision) 
```

有没有善良的灵魂可以阻止我把头撞到墙上？谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-23T08:35:17.590

在我看来，第二个问题是您使用的是无界方法`send_mail`。如果您真的想`send_mail`在课堂上打电话，也许[`@classmethod`](http://docs.python.org/library/functions.html#classmethod)或[`@staticmethod`](http://docs.python.org/library/functions.html#staticmethod)会帮助您：

```
class Revision(models.Model):
    # Model junk...

    @classmethod
    def send_email(cls, sender, instance, created, **kwargs):
        if created:
            print "DO STUFF"

signals.post_save.connect(Revision.send_email, sender=Revision) 
```

或者

```
class Revision(models.Model):
    # Model junk...

    @staticmethod
    def send_email(sender, instance, created, **kwargs):
        if created:
            print "DO STUFF"

signals.post_save.connect(Revision.send_email, sender=Revision) 
```

或者，不使用这些装饰器，您可以传递有界实例方法：

```
class Revision(models.Model):
# Model junk...

    def send_email(self, sender, instance, created, **kwargs):
        if created:
            print "DO STUFF"

signals.post_save.connect(Revision().send_email, sender=Revision) 
```

* * *

参考：

1.  从 Django[源代码](https://github.com/django/django/blob/master/django/dispatch/dispatcher.py#L37)：

    ```
    def connect(self, receiver, sender=None, weak=True, dispatch_uid=None):
        """
        Connect receiver to sender for signal.

        Arguments:

            receiver
                A function or an instance method which is to receive signals.
                Receivers must be hashable objects.

                If weak is True, then receiver must be weak-referencable (more
                precisely saferef.safeRef() must be able to create a reference
                to the receiver).

                Receivers must be able to accept keyword arguments.

                If receivers have a dispatch_uid attribute, the receiver will
                not be added if another receiver already exists with that
                dispatch_uid. 
    ```

2.  Difference between `@classmethod` and `@staticmethod`: [What is the difference between @staticmethod and @classmethod in Python?](https://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python)

# c# - ServiceStack 服务可以包含多种方法吗？

> ID：12549981
> 
> 赞同：11
> 
> 时间：2012-09-23T05:29:50.350
> 
> 标签：c#, api, rest, soa, servicestack

环境是 Visual Studio 2012、ServiceStack、ASP.NET Web 应用程序项目（遵循[https://github.com/ServiceStack/ServiceStack/wiki/Create-your-first-webservice](https://github.com/ServiceStack/ServiceStack/wiki/Create-your-first-webservice)）

查看 ServiceStack.Examples 中的一些类，我注意到大多数服务只包含一个方法。一些覆盖，`Execute()`或者，如果是 REST 服务，一些覆盖`OnPost/Get/Put/Delete()`.

如果我需要实现数十个功能，我应该如何制作完整的 API 集，, `RegisterUser()`, `RemoveUser()`, `AddFriend()`...`RemoveFriend()`每个方法一个服务？

```
public RegisterUserService : IService<User> { public object Execute(User> dto) { ... } }
public RemoveUserService : IService<User> { public object Execute(User> dto) { ... } }
public AddFriendService : IService<Friend> { public object Execute(Friend dto) { ... } }
public RemoveFriendService: IService<RequestDTO4> { public object Execute(Friend dto) { ... } } 
```

我对如何开始实现完整的 API 集非常迷茫。我已经阅读了关于“创建您的第一个 web 服务”的[第一个](https://github.com/ServiceStack/ServiceStack/wiki/Create-your-first-webservice)和[第二个](https://github.com/ServiceStack/ServiceStack/wiki/Your-first-webservice-explained)wiki 页面，我已将其复制以制作 1 个服务方法。但现在我想做 10 或 40 种服务方法，但我不知道该怎么做。

我注意到实现 from`IRestService<T>`最多允许您使用 4 个方法而不是一个`Execute()`方法，这仅仅是因为每个方法对应于一个不同的 HTTP 动词。那么有没有我可以写的东西？基本上是这样的：

```
public MyService : IService/IRestService/ServiceBase?<User>
{
     public object AddUser(User user) { }
     public object RemoveUser(User user) { }
     public object ModifyUser(User user) { }
} 
```

只是寻找不一定必须包含一个服务类中的所有方法，但尽可能多的东西......我真的必须为每个服务方法创建 1 个服务吗？

关于追求严格的 RESTful 架构的注意事项：我只阅读了一点关于 REST 的内容，但似乎我必须严格遵循以下规则：即使您必须重新设计模型，也将所有内容视为资源，没有动词URL 名称（/Friends，而不是 /GetFriends，因为 REST 为您提供 OnGet()、OnPost()、OnPut() 和 OnDelete()……基本上我对最简单、最快和最轻松的实现方式感兴趣几十种服务方式，个人项目，要求不会相差太大。

提前感谢您指导我完成这第一步。

编辑：刚刚看到这个相关问题：[如何使用 ServiceStack 发送命令？](https://stackoverflow.com/questions/10060919/how-to-send-commands-using-servicestack?rq=1)

Mythz 说没有“ServiceStack 方式”来设计。这家伙的问题和我的差不多。我想知道如何在服务中堆叠很多服务方法。

编辑 2：刚刚看到[需要关于 servicestack 实施的帮助](https://stackoverflow.com/questions/8007232/need-help-on-servicestack-implementation)，以及[单独或组合的 ServiceStack 服务？](https://stackoverflow.com/questions/8415972/separate-or-combined-servicestack-services?rq=1).

我刚刚使用工作路线成功测试了以下代码：

```
[Route("/registerUser/setEmail/{Email}")]
[Route("/registerUser/setPassword/{Password}")]
[Route("/registerUser/setPhoneNumber/{PhoneNumber}")]
[Route("/lalal2395823")]
[Route("/test3234/test23423511")]
public class RegisterUser
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Nickname { get; set; }
    public string PhoneNumber { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
} 
```

但**我希望每个`[Route("path")]`人都使用*不同*的方法**，而不是让它们全部解析`Execute()`并解析哪个字符串不为空或不为空。

* * *

## 我的解决方案

我决定采纳 Rickard 的建议并制作一个合适的 REST API，因为它最终看起来更简单、更干净。

现在这是我使用[新 ServiceStack API 的课程（截至 2012 年 9 月 24 日是新的）](https://github.com/ServiceStack/ServiceStack/wiki/New-API)：

```
using UserModel = Project.Model.Entities.User;

[Route("/User", "POST")]
[Route("/User/{FirstName}", "POST")]
[Route("/User/{FirstName}/{LastName}", "POST")]
[Route("/User/{FirstName}/{LastName}/{Nickname}", "POST")]
[Route("/User/{FirstName}/{LastName}/{Nickname}/{PhoneNumber}", "POST")]
[Route("/User/{FirstName}/{LastName}/{Nickname}/{PhoneNumber}/{Email}", "POST")]
public class CreateUser : IReturn<UserModel>
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Nickname { get; set; }
    public string PhoneNumber { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
}

public class CreateUserService : Service
{
   public object Post(CreateUser request)
    {
        try
        {
            using (var session = FluentNHibernateHelper.OpenSession())
            {
                using (var transaction = session.BeginTransaction())
                {
                    var user = new UserModel()
                    {
                        FirstName = request.FirstName,
                        LastName = request.LastName,
                        Nickname = request.Nickname,
                        PhoneNumber = request.PhoneNumber,
                        Email = request.Email,
                        Password = request.Password,
                    };
                    session.SaveOrUpdate(user);
                    transaction.Commit();

                    return user;
                }
            }
        }
        catch
        {
            throw;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T07:59:58.127

现在，使用ServiceStack在 (v3.9.15+) 中发布[的新 API 设计，这变得简单多了。](https://github.com/ServiceStack/ServiceStack/wiki/New-API)

@Rickard 提出了很多关于如何重新构建服务的要点，使其更加符合 REST，现在使用 ServiceStack 的新 API 更容易实现，该 API 现在限制更少，更灵活，同一服务可以处理多个不同的请求 DTO并且您不再受限于可以返回的响应类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-23T19:23:00.747

遵循 HTTP 方式，您必须颠倒您的思维方式。您需要考虑资源，即用户、朋友等。使用 HTTP，您已经拥有一组有限的方法，即 Get、Put、Post 和 Delete。

因此，服务 API 设计可能如下所示：

```
RegisterUser() => POST /users
RemoveUser() => DELETE /users/{userid}
AddFriend() => POST /users/{userid}/friends
RemoveFriend() => DELETE /users/{userid}/friends/{friendid}
ModifyUser() => PUT /users/{userid} 
```

等等

要在 ServiceStack 中实现例如 RemoveFriend，您可以这样做：

```
public class UserFriendService : RestServiceBase<UserFriendRequest>
{
    public override object OnPost(UserFriendRequest request)
    {
        // pseudo code 
        var user = GetUser(request.UserId);
        var friend = GetUser(request.FriendId); // FriendId is a field in the HTTP body
        user.Friends.Add(friend);
        return HttpResult.Status201Created(user, ...);
    }
    //...
}

[Route("/users/{userId}/friends")]
public class UserFriendRequest
{
    public string UserId { get; set; }
    public string FriendId { get; set; }
} 
```

# php - c# 中的 fsockopen 等效项

> ID：12549988
> 
> 赞同：1
> 
> 时间：2012-09-23T05:31:50.303
> 
> 标签：php, asp.net, fsockopen

对 webrequests 等有点陌生，所以这是一个非常基本的问题。 *.NET 与 PHP 的 fsockopen 函数的等价物是什么*，特别是**如果我想同时向服务器读取和写入数据**？

我应该使用：

System.Net.WebRequest.Create(url); System.Net.WebClient wc = new System.Net.WebClient();

还有什么？我如何最好地读/写它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:46:38.153

WebRequest（即 HttpWebRequest ）和 WebClient 仅用于事务性消息（即请求/响应对），而不用于同步套接字通信。不是你想要的。

为此，您可以使用`System.Net.Sockets.Socket`该类或更易于使用的`TcpClient`类。我更喜欢`TcpClient`它，因为它`NetworkStream`比 BSD Socket 风格的 API 更容易使用。

# sql-server - SQL Server Management Studio 在打开或创建数据库图表后崩溃

> ID：12549990
> 
> 赞同：16
> 
> 时间：2012-09-23T05:32:06.710
> 
> 标签：sql-server, visual-studio, ssms, sql-server-2012

每次使用 SQL Server 2012 Management Studio 打开或创建新的数据库图表，然后自动重新启动 SSMS 时，都会出现错误消息。

错误信息是

> *尝试读取或写入受保护的内存。这通常表明其他内存已损坏。(Microsoft.VisualStudio.OLE.Interop)*

这是我为产生此问题所做的工作：

早些时候，我安装了 SQL Server 2008：通过我下载 Visual Basic Express 2010 时可用的选项。还没有错误。我可以毫无问题地创建和编辑数据库图表。然后我卸载了VB Express 2010，安装了Visual Studio 2012，结果发现是试用版，我不喜欢，于是我卸载了Visual Studio 2012。我启动了SSMS 2008并尝试在其中打开一个数据库图我的数据库之一。我收到一个错误说

> *找不到指定的模块。（MS 可视化数据库工具）*

我用 Management Studio 安装了 SQL Server 2012，然后使用 SSMS 2012 尝试打开数据库图。而不是`Specified module`错误，我得到了关于尝试读取或写入受保护内存的错误。

我正在运行 Windows 7、SQL Server 2012 Express，但我还没有卸载 SQL Sever 2008 Express、Visual C# 2010 Express、Visual Basic 2010 Express。

编辑：我*试图*通过应用名为 SQLServer2012_RTM_CU1_kb2679368_11_0_2316_x64 的修补程序来解决此问题。它没有*解决*问题。此修补程序是由 MSDN 论坛中的用户在此链接上建议的：http: [//social.msdn.microsoft.com/Forums/en/sqlexpress/thread/1753d7ba-f6ec-4a8e-a1c9-ded2a5b7c607](http://social.msdn.microsoft.com/Forums/en/sqlexpress/thread/1753d7ba-f6ec-4a8e-a1c9-ded2a5b7c607)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-09T15:32:43.630

我遇到了同样的问题。我的是windows7中的SQL 2012。我正在尝试连接到 Windows 2012 R2 中的 sql server 2014。

在我将 SQL 2012 客户端升级到 2014 后，问题得到解决。

有趣的是，可以在 Windows 2012 上使用 SQL2014 而不是在 Windows 2012 R2 上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T08:52:22.950

> 为了完整起见，我添加了此答案以及解决此问题所需的所有步骤

这是一个愚蠢的错误，几乎所有版本的 SQL Server Management Studio 都会出现。

寻找一台安装了 SSMS 且仍在正常工作且没有任何错误的机器。

将文件夹的**所有**文件从工作机器复制到故障机器

> **文件夹 1：** C:\Program Files (x86)\Common Files\microsoft shared\Visual Database Tools\
> 
> **文件夹 2：** C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8\

再次启动SSMS，错误消失了

> 已针对 2008R2、2012、2014 进行验证

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T05:36:45.243

我习惯于收到此消息并让管理层一直关闭

当我注意到错误中的一个模式时（并且给出消息，我猜测错误在尝试处理内存中的图表数据库对象时被隔离），如果我创建图表，放置一个表格，将第一列放在 pk 中，保存，关闭并再次打开图表它开始工作......

我曾经为图表中添加的每个新表重复此操作，而不保存在磁盘中

不知何故，它可能在主机中的一些更新之后停止发生

我希望它也适合你

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-24T22:16:11.613

我找到了答案，这要归功于 [位于此处](http://connect.microsoft.com/SQLServer/feedback/details/730985/smss-crashes-when-creating-new-database-diagram#)的另一篇文章。基本上，即使我的 Visual Studio 2012 安装是试用版，它似乎也会导致与链接中描述的 Visual Studio 相同的问题。检查它的解决方法。

# html - CSS Canvas 路径的交叉部分似乎颜色不正确。

> ID：12549992
> 
> 赞同：2
> 
> 时间：2012-09-23T05:32:31.080
> 
> 标签：html, css, canvas, web

我正在尝试使用`HTML Canvas`. 它由连接在一起的几条贝塞尔曲线组成。出于某种原因，我无法绘制整个路径然后进行描边。相反，我需要为每条贝塞尔曲线描边。我使用浅紫色作为描边颜色，但在曲线的交点处，我似乎得到了类似白色的东西，而不是我期望的浅紫色。像这样（对不起，我不能发布图片，因为我是 Stack Overflow 上的新手）：

![图片示例](../Images/877875f7df7703e6f2b0a3c9b3f32903.png)

我使用`stroke style`的是不透明度 1，所以我相信这不是透明度问题。那么可能是什么导致了这个问题呢？

仅供参考，我正在使用这样的代码绘制每条贝塞尔曲线，其中 a 是画布的绘制上下文，`this.bloom.c`类似于“ `rgba(xxx,xxx,xxx,1)`”：

```
a.strokeStyle = this.bloom.c;
a.beginPath();
a.moveTo(e.x, e.y);
a.bezierCurveTo(c.x, c.y, b.x, b.y, d.x, d.y);
a.stroke(); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T05:47:40.210

为复合操作使用 HTML5 Canvas 上下文本机支持的适当“混合模式”。在您的情况下，您可以使用 ' `source-over`'

例如：[_](http://mrcoles.com/blog/canvas-composite-operations-demo-animation/)

```
var context = document.getElementById('myCanvas').getContext('2d');
context.globalCompositeOperation = 'source-over'; 
```

请参阅[合成和混合 1.0](http://www.w3.org/TR/2012/WD-compositing-20120816/)

```
source-atop
source-in
source-out
source-over
destination-atop
destination-in
destination-out
destination-over
lighter
xor
copy 
```

# java - 如何在没有循环的情况下按顺序填充数组或数组列表？

> ID：12549995
> 
> 赞同：0
> 
> 时间：2012-09-23T05:33:14.230
> 
> 标签：java, arrays, arraylist, fill

我很惊讶我在任何地方都没有找到答案。我想用 1..100 填充一个 100 的 int 数组。填充是一个很好的方法，但它不会每回合增加值。很明显如何用循环来做，但我想避免这种情况，因为我的最大值非常高。有没有什么 api 方法可以为我做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T05:36:53.233

1.  标准库中没有方法可以做到这一点。

2.  即使有，它也需要在引擎盖下使用一个循环。

3.  我没有看到*“我的最大值非常高”*的意义。这对使用循环的决定没有影响......与否。

4.  不要使用递归。Java 没有实现尾调用优化，因此 1）它会比使用循环慢 2）`StackOverflowError`如果数组或列表很大，您可能会遇到这种情况。（是的，我知道所问的问题并不大......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:36:33.043

哦，使用递归！

```
void to100(int[] array, int i, int v) {
    if( i < array.length ) {
        array[i] = v;
        to100( i+1, v+1 );
    }
}

int[] array = new int[100];

too100( array, 0, 1 ); 
```

请享用。

# javascript - Android 视频会自动全屏显示。如何制止这种行为？

> ID：12549997
> 
> 赞同：0
> 
> 时间：2012-09-23T05:34:26.840
> 
> 标签：javascript, android, html, fullscreen, video.js

我正在开发一个 android smarthphone 应用程序，它应该在同一屏幕上并排显示视频和图像。我正在为此使用 video.js。问题是每当我点击视频上的播放按钮时，Android 都会自动进入全屏状态。如何制止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:31:41.467

不幸的是，据我所知，没有真正的方法可以阻止这种行为。当您在 Android 手机上播放视频时，每个视频都会全屏显示。