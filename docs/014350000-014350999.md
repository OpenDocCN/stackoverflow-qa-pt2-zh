# StackOverflow 问答 14350000-14350999

# java - 自动完成响应缓慢

> ID：14350000
> 
> 赞同：0
> 
> 时间：2013-01-16T01:22:13.780
> 
> 标签：java, swing, autocomplete, jtextarea, swingx

我已将自动完成功能应用于两个`textFields`. 为此，我使用了[AutocompleteDecorator](http://javadoc.geotoolkit.org/external/swingx/org/jdesktop/swingx/autocomplete/AutoCompleteDecorator.html)。我观察到它的速度减慢到我什至无法输入单个字符的程度。有什么解决办法吗？

谢谢

```
 JTextArea textArea = main.getEditor();
   String content = textArea.getText();

    try {
        if (content.length() > 0) {
            String[] lines = content.split("\n");
            String txt1 = null;
            String txt2 = null;

            for (String line : lines) {
                txt1= line.substring(0, 10);
                txt2 = line.substring(11, 15);

                listTxt1.add(txt1);
                listTxt2.add(txt2);
            }
            AutoCompleteDecorator.decorate(txtField1, listTxt1, false);
            AutoCompleteDecorator.decorate(txtField2, listTxt2, false);
        }
    } catch (Exception ex) {
        System.out.println(ex);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:48:29.330

根据我的评论，我决定验证这一点。

*我通过以下方式在我的字典*中添加了 1000 个随机字母`String`s ：

 *```
for (int i = 0; i < 1000; i++) {
    words.add(generateString(r, "abcdefghijklmnopqrstuvwxyz", 10));
}

...

public static String generateString(Random rng, String characters, int length) {
    char[] text = new char[length];
    for (int i = 0; i < length; i++) {
        text[i] = characters.charAt(rng.nextInt(characters.length()));
    }
    return new String(text);
} 
```

并且根本没有明显的减速。

![在此处输入图像描述](../Images/ce392dcd366cde43376a1190524a18bf.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JWindow;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;
import javax.swing.border.LineBorder;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

/**
 * @author David
 */
public class Test {

    Random r = new Random();

    public Test() {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JTextField f = new JTextField(10);

        //create list for dictionary this in your case might be done via calling a method which queries db and returns results as arraylist
        ArrayList<String> words = new ArrayList<>();

        for (int i = 0; i < 1000; i++) {
            words.add(generateString(r, "abcdefghijklmnopqrstuvwxyz", 10));
        }

        AutoSuggestor autoSuggestor = new AutoSuggestor(f, frame, words, Color.WHITE.brighter(), Color.BLUE, Color.RED, 0.75f);

        JPanel p = new JPanel();

        p.add(f);

        frame.add(p);

        frame.pack();
        frame.setVisible(true);
    }

    public static String generateString(Random rng, String characters, int length) {
        char[] text = new char[length];
        for (int i = 0; i < length; i++) {
            text[i] = characters.charAt(rng.nextInt(characters.length()));
        }
        return new String(text);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
}

class AutoSuggestor {

    private final JTextField textField;
    private final Window container;
    private JPanel suggestionsPanel;
    private JWindow autoSuggestionPopUpWindow;
    private String typedWord;
    private final ArrayList<String> dictionary = new ArrayList<>();
    private int currentIndexOfSpace, tW, tH;
    private DocumentListener documentListener = new DocumentListener() {
        @Override
        public void insertUpdate(DocumentEvent de) {
            checkForAndShowSuggestions();
        }

        @Override
        public void removeUpdate(DocumentEvent de) {
            checkForAndShowSuggestions();
        }

        @Override
        public void changedUpdate(DocumentEvent de) {
            checkForAndShowSuggestions();
        }
    };
    private final Color suggestionsTextColor;
    private final Color suggestionFocusedColor;

    public AutoSuggestor(JTextField textField, Window mainWindow, ArrayList<String> words, Color popUpBackground, Color textColor, Color suggestionFocusedColor, float opacity) {
        this.textField = textField;
        this.suggestionsTextColor = textColor;
        this.container = mainWindow;
        this.suggestionFocusedColor = suggestionFocusedColor;
        this.textField.getDocument().addDocumentListener(documentListener);

        setDictionary(words);

        typedWord = "";
        currentIndexOfSpace = 0;
        tW = 0;
        tH = 0;

        autoSuggestionPopUpWindow = new JWindow(mainWindow);
        autoSuggestionPopUpWindow.setOpacity(opacity);

        suggestionsPanel = new JPanel();
        suggestionsPanel.setLayout(new GridLayout(0, 1));
        suggestionsPanel.setBackground(popUpBackground);

        addKeyBindingToRequestFocusInPopUpWindow();
    }

    private void addKeyBindingToRequestFocusInPopUpWindow() {
        textField.getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, true), "Down released");
        textField.getActionMap().put("Down released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {//focuses the first label on popwindow
                for (int i = 0; i < suggestionsPanel.getComponentCount(); i++) {
                    if (suggestionsPanel.getComponent(i) instanceof SuggestionLabel) {
                        ((SuggestionLabel) suggestionsPanel.getComponent(i)).setFocused(true);
                        autoSuggestionPopUpWindow.toFront();
                        autoSuggestionPopUpWindow.requestFocusInWindow();
                        suggestionsPanel.requestFocusInWindow();
                        suggestionsPanel.getComponent(i).requestFocusInWindow();
                        break;
                    }
                }
            }
        });
        suggestionsPanel.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, true), "Down released");
        suggestionsPanel.getActionMap().put("Down released", new AbstractAction() {
            int lastFocusableIndex = 0;

            @Override
            public void actionPerformed(ActionEvent ae) {//allows scrolling of labels in pop window (I know very hacky for now :))

                ArrayList<SuggestionLabel> sls = getAddedSuggestionLabels();
                int max = sls.size();

                if (max > 1) {//more than 1 suggestion
                    for (int i = 0; i < max; i++) {
                        SuggestionLabel sl = sls.get(i);
                        if (sl.isFocused()) {
                            if (lastFocusableIndex == max - 1) {
                                lastFocusableIndex = 0;
                                sl.setFocused(false);
                                autoSuggestionPopUpWindow.setVisible(false);
                                setFocusToTextField();
                                checkForAndShowSuggestions();//fire method as if document listener change occured and fired it

                            } else {
                                sl.setFocused(false);
                                lastFocusableIndex = i;
                            }
                        } else if (lastFocusableIndex <= i) {
                            if (i < max) {
                                sl.setFocused(true);
                                autoSuggestionPopUpWindow.toFront();
                                autoSuggestionPopUpWindow.requestFocusInWindow();
                                suggestionsPanel.requestFocusInWindow();
                                suggestionsPanel.getComponent(i).requestFocusInWindow();
                                lastFocusableIndex = i;
                                break;
                            }
                        }
                    }
                } else {//only a single suggestion was given
                    autoSuggestionPopUpWindow.setVisible(false);
                    setFocusToTextField();
                    checkForAndShowSuggestions();//fire method as if document listener change occured and fired it
                }
            }
        });
    }

    private void setFocusToTextField() {
        container.toFront();
        container.requestFocusInWindow();
        textField.requestFocusInWindow();
    }

    public ArrayList<SuggestionLabel> getAddedSuggestionLabels() {
        ArrayList<SuggestionLabel> sls = new ArrayList<>();
        for (int i = 0; i < suggestionsPanel.getComponentCount(); i++) {
            if (suggestionsPanel.getComponent(i) instanceof SuggestionLabel) {
                SuggestionLabel sl = (SuggestionLabel) suggestionsPanel.getComponent(i);
                sls.add(sl);
            }
        }
        return sls;
    }

    private void checkForAndShowSuggestions() {
        typedWord = getCurrentlyTypedWord();

        suggestionsPanel.removeAll();//remove previos words/jlabels that were added

        //used to calcualte size of JWindow as new Jlabels are added
        tW = 0;
        tH = 0;

        boolean added = wordTyped(typedWord);

        if (!added) {
            if (autoSuggestionPopUpWindow.isVisible()) {
                autoSuggestionPopUpWindow.setVisible(false);
            }
        } else {
            showPopUpWindow();
            setFocusToTextField();
        }
    }

    protected void addWordToSuggestions(String word) {
        SuggestionLabel suggestionLabel = new SuggestionLabel(word, suggestionFocusedColor, suggestionsTextColor, this);

        calculatePopUpWindowSize(suggestionLabel);

        suggestionsPanel.add(suggestionLabel);
    }

    public String getCurrentlyTypedWord() {//get newest word after last white spaceif any or the first word if no white spaces
        String text = textField.getText();
        String wordBeingTyped = "";
        if (text.contains(" ")) {
            int tmp = text.lastIndexOf(" ");
            if (tmp >= currentIndexOfSpace) {
                currentIndexOfSpace = tmp;
                wordBeingTyped = text.substring(tmp);
            }
        } else {
            wordBeingTyped = text;
        }
        return wordBeingTyped.trim();
    }

    private void calculatePopUpWindowSize(JLabel label) {
        //so we can size the JWindow correctly
        if (tW < label.getPreferredSize().width) {
            tW = label.getPreferredSize().width;
        }
        tH += label.getPreferredSize().height;
    }

    private void showPopUpWindow() {
        autoSuggestionPopUpWindow.getContentPane().add(suggestionsPanel);
        autoSuggestionPopUpWindow.setMinimumSize(new Dimension(textField.getWidth(), 30));
        autoSuggestionPopUpWindow.setSize(tW, tH);
        autoSuggestionPopUpWindow.setVisible(true);

        int windowX = 0;
        int windowY = 0;

        windowX = container.getX() + textField.getX() + 5;
        if (suggestionsPanel.getHeight() > autoSuggestionPopUpWindow.getMinimumSize().height) {
            windowY = container.getY() + textField.getY() + textField.getHeight() + autoSuggestionPopUpWindow.getMinimumSize().height;
        } else {
            windowY = container.getY() + textField.getY() + textField.getHeight() + autoSuggestionPopUpWindow.getHeight();
        }

        autoSuggestionPopUpWindow.setLocation(windowX, windowY);
        autoSuggestionPopUpWindow.setMinimumSize(new Dimension(textField.getWidth(), 30));
        autoSuggestionPopUpWindow.revalidate();
        autoSuggestionPopUpWindow.repaint();

    }

    public void setDictionary(ArrayList<String> words) {
        dictionary.clear();
        if (words == null) {
            return;//so we can call constructor with null value for dictionary without exception thrown
        }
        for (String word : words) {
            dictionary.add(word);
        }
    }

    public JWindow getAutoSuggestionPopUpWindow() {
        return autoSuggestionPopUpWindow;
    }

    public Window getContainer() {
        return container;
    }

    public JTextField getTextField() {
        return textField;
    }

    public void addToDictionary(String word) {
        dictionary.add(word);
    }

    boolean wordTyped(String typedWord) {

        if (typedWord.isEmpty()) {
            return false;
        }
        //System.out.println("Typed word: " + typedWord);

        boolean suggestionAdded = false;

        for (String word : dictionary) {//get words in the dictionary which we added
            boolean fullymatches = true;
            for (int i = 0; i < typedWord.length(); i++) {//each string in the word
                if (!typedWord.toLowerCase().startsWith(String.valueOf(word.toLowerCase().charAt(i)), i)) {//check for match
                    fullymatches = false;
                    break;
                }
            }
            if (fullymatches) {
                addWordToSuggestions(word);
                suggestionAdded = true;
            }
        }
        return suggestionAdded;
    }
}

class SuggestionLabel extends JLabel {

    private boolean focused = false;
    private final JWindow autoSuggestionsPopUpWindow;
    private final JTextField textField;
    private final AutoSuggestor autoSuggestor;
    private Color suggestionsTextColor, suggestionBorderColor;

    public SuggestionLabel(String string, final Color borderColor, Color suggestionsTextColor, AutoSuggestor autoSuggestor) {
        super(string);

        this.suggestionsTextColor = suggestionsTextColor;
        this.autoSuggestor = autoSuggestor;
        this.textField = autoSuggestor.getTextField();
        this.suggestionBorderColor = borderColor;
        this.autoSuggestionsPopUpWindow = autoSuggestor.getAutoSuggestionPopUpWindow();

        initComponent();
    }

    private void initComponent() {
        setFocusable(true);
        setForeground(suggestionsTextColor);

        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent me) {
                super.mouseClicked(me);

                replaceWithSuggestedText();

                autoSuggestionsPopUpWindow.setVisible(false);
            }
        });

        getInputMap(JComponent.WHEN_FOCUSED).put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0, true), "Enter released");
        getActionMap().put("Enter released", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                replaceWithSuggestedText();
                autoSuggestionsPopUpWindow.setVisible(false);
            }
        });
    }

    public void setFocused(boolean focused) {
        if (focused) {
            setBorder(new LineBorder(suggestionBorderColor));
        } else {
            setBorder(null);
        }
        repaint();
        this.focused = focused;
    }

    public boolean isFocused() {
        return focused;
    }

    private void replaceWithSuggestedText() {
        String suggestedWord = getText();
        String text = textField.getText();
        String typedWord = autoSuggestor.getCurrentlyTypedWord();
        String t = text.substring(0, text.lastIndexOf(typedWord));
        String tmp = t + text.substring(text.lastIndexOf(typedWord)).replace(typedWord, suggestedWord);
        textField.setText(tmp + " ");
    }
} 
```

甚至将其增加到 50000 random `String`s，甚至只能看到/*感觉到微小的停顿**

# process - 在进程同步中，什么是 Monitor？

> ID：14350004
> 
> 赞同：0
> 
> 时间：2013-01-16T01:22:35.027
> 
> 标签：process, semaphore, mutual-exclusion

互联网上有很多关于 Semaphore、Mutex 等的信息。但据我搜索，Monitors 上没有明确的信息。

我知道 Mutex 有助于进程之间的互斥。二进制信号量也有类似的功能。那么引入一个叫做 Monitor 的新概念有什么用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-24T19:19:52.083

从我的操作系统注释中，我以以下方式理解它。我首先要了解一个对象，它是一种抽象数据类型。

抽象数据类型（或 ADT）使用一组函数封装数据，以对数据进行操作，这些函数独立于 ADT 的任何特定实现。

监视器类型是一种 ADT，它包括一组程序员定义的操作，这些操作在监视器内提供互斥。监视器几乎等同于封装数据的对象，但有两个例外。

*   一次只能执行一个监视器的一个函数
*   等待条件变量不占用监视器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:51:04.080

Monitor 是受管理的，并且更轻量级 - 但仅限于您的 AppDomain。Mutex 可以命名，并且可以跨越进程（允许应用程序之间的一些简单 IPC 场景），并且可以在需要等待句柄的代码中使用）。

# vba - 如何避免“编译错误：找不到对象或库”

> ID：14350005
> 
> 赞同：2
> 
> 时间：2013-01-16T01:22:42.833
> 
> 标签：vba, excel

我有一个脚本，它遍历数千个工作簿的列表并从每个工作簿中获取数据。

当脚本尝试打开某些工作簿时出现以下错误：

```
Compile Error: Can't find project or library 
```

我认为我可以通过以这种方式打开没有宏或警报的工作簿来避免此消息，我理解这是由于引用问题：

```
dim bk as workbook
for each path in listOfWorkbookPaths
 Application.DisplayAlerts = False
 Application.EnableEvents=false
 set bk=workbooks.open(path)
 Application.EnableEvents=true
 Application.DisplayAlerts = True
 collectData(bk)
next 
```

但这不起作用；我仍然得到编译错误。有没有办法确保这个错误不会弹出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:28:52.233

您需要更改`AutomationSecurity`设置：

```
子 ImportFromExternalWorkbooks()
    将 bk 调暗为工作簿
    Dim secAutomation 作为 MsoAutomationSecurity

    secAutomation = Application.AutomationSecurity
    Application.AutomationSecurity = msoAutomationSecurityForceDisable
    对于 listOfWorkbookPaths 中的每个路径
        设置 bk=Workbooks.Open(路径)
        收集数据 bk
    下一个
    Application.AutomationSecurity = secAutomation
结束子

```

# google-app-engine - 是否可以在 Google App Engine 上查看部署历史记录？

> ID：14350006
> 
> 赞同：3
> 
> 时间：2013-01-16T01:22:46.320
> 
> 标签：google-app-engine

我什至不知道是否存在此类日志，但查看它可能很有用。除此之外，标题是不言自明的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:39:50.840

查看管理控制台中的管理日志部分。它包含各种部署操作。您可以通过选择下拉列表中的“所有版本更改”选项进行过滤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-10T10:00:06.443

在 2018 年寻找这个 - 现在可以在 Cloud Builder 中轻松找到这些日志： [https ://console.cloud.google.com/cloud-build](https://console.cloud.google.com/cloud-build)

# regex - 如何在perl中从这个字符串中删除数字？

> ID：14350009
> 
> 赞同：1
> 
> 时间：2013-01-16T01:22:59.923
> 
> 标签：regex, perl

我有一种情况，当它们位于文字字符之间时，我需要删除（或替换）N 个数字。例如：

00000ASEDF32434VSC

我需要删除 32434 以便输出为：

00000ASEDFVSC

如果我想用 XXXXX 替换 32434 ？

如何使用正则表达式来做到这一点？

编辑

我选择了一个非常愚蠢的例子。对不起。考虑一下：

00000SQWDDWE12CSDCASEDF32434VSC

我只需要替换（或删除）模式 32434。

在一般情况下：如果我有一个字母数字字符串，当它们位于文字字符之间时，如何删除 N（比如 5）个数字的模式？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:45:43.000

> 当它们在文字字符之间时删除N（比如5）个数字的模式？

“文字字符”是什么意思？你的意思是“字母”吗？以下内容删除了前面和后面都跟有字母的 5 位数字 (0-9) 的序列。

```
$str =~ s/(?<=\pL)[0-9]{5}(?=\pL)//; 
```

免费免费更改`5`变量。

```
my $n = 5;
$str =~ s/(?<=\pL)[0-9]{$n}(?=\pL)//; 
```

从 Perl 5.14+ 开始，您可以使用`\d`to 来表示`[0-9]`使用`/a`. （没有`/a`,`\d`匹配超过 400 个不同的字符。）

```
$str =~ s/(?<=\pL)\d{5}(?=\pL)//a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T01:47:39.763

我们可以使用前瞻`(?=...)`和后瞻`(?<=...)`来断言数字在非数字之前和之后。这将删除这些封闭的数字：

```
$str =~ s{ (?<=\D) (\d+) (?=\D) }{}xg; 
```

我们可以给出不同的替换，甚至是将要执行的代码。这里是可变长度`X`：

```
$str =~ s{(?<=\D) (\d+) (?=\D)}{ "X" x length $1 }xge; 
```

`/e`执行了替换，并且`x`是未充分使用的重复运算符。

这是一个子例程，它返回删除了所有此类数字序列的字符串，可选的最小和最大长度是可能的：

```
use Carp;
sub remove_numbers {
  my ($string, $min, $max) = @_;
  $min //= 1;
  $max //= "";
  croak qq(argument \$min is not valid) if $min =~ /[^0-9]/;
  croak qq(argument \$max is not valid) if $max =~ /[^0-9]/;
  $string =~ s/(?<=\D) (\d{$min,$max}) (?=\D)/"X" x length $1/xge;
  return $string;
} 
```

通话

```
$str = remove_numbers($str, 5, 5); 
```

将等同于`$str =~ s/(?<=\D)(\d{5})(?=\D)/XXXXX/`。通话

```
$str = remove_numbers($str); 
```

相当于我的第二个代码示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T01:28:23.683

使用此代码删除：

```
$str =~ s/([a-z]+)\d{5}([a-z]+)/\1\2/i; 
```

这要替换：

```
$str =~ s/([a-z]+)\d{5}([a-z]+)/\1XXXXX\2/i; 
```

其中 5 是您必须替换的数字数量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T01:35:05.650

您可以拉出相关部件进行更换，然后重新包装。我假设它只是一个数字实例。这样，多少并不重要，但你总是用相同数量的'X'替换......

```
$str = "00000ASEDF32434VSC";

my($prefix, $digits, $suffix) = $str =~ /^(.*[a-z])(\d+)([a-z].*)$/i;

# Replace with X
$str = $prefix . ($digits =~ s/./X/g) . $suffix;

# Or remove
$str = $prefix . $suffix; 
```

您可能希望确保正则表达式成功！

作为对您的编辑的回应：您实际上想要删除一个特定的数字......

```
$str = $str =~ s/^(.*[a-z])32434([a-z].*)$/$1XXXXX$2/i; 
```

或者如果你想要 5 位数字（这已经被回答）

```
$str = $str =~ s/^(.*[a-z])\d{5}([a-z].*)$/$1XXXXX$2/i; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T01:25:32.827

```
$str =~ s/[1-9]//g 
```

这将删除所有数字 1-9。这行得通吗？

```
$str =~ s/(\D)\d\d*(\D)/$1$2/g 
```

仅当数字在字符串之间时才应替换，但不太确定它是否有效。

# java - 新手 hadoop .. 分布式缓存

> ID：14350015
> 
> 赞同：0
> 
> 时间：2013-01-16T01:23:31.693
> 
> 标签：java, hadoop, mapreduce

我有一个映射器

```
public class BuildGraph{
   public void config(JobConf job){ <==this block doesnt seems to be exexcuting at all :(
    super.configure(job);
    this.currentId = job.getInt("currentId",0);
    if (this.currentId!=0){ 
    // I call a method from differnt class to build a distributed cache
    }
   }
  public void map(....){
....  
} 
```

}

现在是调用它的主要代码..

```
public void run( String params,curId){
 JobConf conf = new JobConf(classname.class);
 conf.setInt("currentId",299); <--note this i am setting the value here
 conf.setMapperClass(BuildGraph.class);
 //.... 
  JobClient.runJob(conf);
} 
```

但问题是代码中的配置方法没有执行，好像“currentId”在主循环中返回 299，但在映射器类中根本没有设置。我究竟做错了什么

链接到完整代码 [http://pastebin.com/DRPXUm62](http://pastebin.com/DRPXUm62)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:45:25.107

看起来您没有使用正确的合同，因为您没有扩展`MapReduceBase`也没有实施`Mapper`. 该方法也应该被调用`configure`而不是`config`。尝试这样的事情：

```
public class BuildGraph extends MapReduceBase implements Mapper<K, V, K, V> {
    public void configure(JobConf job) {
        // this will get called once at the beginning of the task
    }

    public void map(...) {
        ...
    }
} 
```

# iphone - 添加@2x 版本时，xcode 4.5 图像未显示在模拟器或设备中

> ID：14350019
> 
> 赞同：0
> 
> 时间：2013-01-16T01:23:42.467
> 
> 标签：iphone, ios, xcode, storyboard, tabbar

我对主要在情节提要中设置但也通过代码设置的图像存在问题，问题是如果文件的@2x 版本，则该图像既不会显示在模拟器中，也不会显示在设备中，而在情节提要中完全可见。

此问题仅在存在版本的@2x 文件时才会发生，我已经搜索了几天并且已经检查了图像是否设置为目标，图像名称和扩展名大小写是否正确，以及图像正好是低分辨率文件大小的两倍（30x30 原始图像，60x60 @2x 图像），并且我读过以编程方式添加时删除扩展名将适用于目标 4+，但这也不起作用。我也尝试过创建新图像并清理构建，但我坚持认为没有任何效果，不是加载低分辨率图像，根本没有加载图像，这仅适用于@2x 文件资源。

就像是：

1.  资源中的两个图像

2.  普通图像（不是@2x）图像在情节提要中设置为选项卡图标

3.  使用@2x 对应设置的图标不会显示，而没有@2x 图像的图标将显示

（抱歉没有图片，新用户，不能发布任何内容）

如果所选图像具有 @2x 时由代码设置图像，也会发生这种情况

如果有人知道这是为什么或我如何解决它，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:26:51.330

ImageView 呢？它在正确的可见位置吗？是否有任何其他视图与您的图像视图重叠？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:36:05.580

好的，所以我为这个问题找到的唯一解决方案是删除原始文件（非@2x）并保留@2x 文件仅在代码或情节提要中引用常规文件（非@2x）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T07:31:52.147

如果您的项目中有 2 个目标，则图像可能不在您运行的目标中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-25T11:10:59.543

它比 Xcode 更像是一个 Photoshop 问题 - Xcode（或模拟器 n 设备）不显示所有 RGB 配置文件。我一直在寻找解决方案几个小时，这就是我所做的。在接受的 Photoshop 中打开相同大小的图像（设备上显示的任何图像）。将此图像复制到接受和展平的图层上（它应该提醒您 RGB 配置文件正在更改），保存此结果。现在模拟器和设备显示它。为我工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-02T12:24:33.430

将标签栏图像放在子文件夹中也可能导致问题。您不应该创建一个子文件夹来单独保存图像，而是在 Xcode 项目中创建一个组。当我将图像移出子文件夹并将它们放在项目的根文件夹中时，问题得到了解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-26T16:37:53.150

对我来说，当我在 Targets -> Build Phases -> Copy Bundle Resources -> 我没有添加 Assets.xcassets 时发现了这一点。

# unit-testing - Neo4j - 单元测试 REST Api 调用

> ID：14350021
> 
> 赞同：3
> 
> 时间：2013-01-16T01:23:57.350
> 
> 标签：unit-testing, rest, nosql, neo4j

我即将使用 Neo4j Server (Rest Api)。

我已经想到了对 Neo4j 进行单元测试的方式。

我发现[NoSqlUnit](https://github.com/lordofthejars/nosql-unit)的作用与 DbUnit 相同，但专门用于像 Neo4j 这样的 NoSql 数据库。

然而，对于那些使用 Neo4J 嵌入式版本（纯 Java、Scala ..）的人来说，主要的解决方案很容易设置。

由于嵌入式数据库替换，是否有一种有效的方法来对 Rest Api 调用进行单元测试？

**更新 - - - - - - - - - - -**

抱歉，我误读了 NoSqlUnit 文档。似乎一种有效的方法是创建一个由服务器包装的嵌入式数据库。也就是说，Rest API 调用将指向`localhost`. 非常适合单元测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-24T16:37:50.460

您可以使用`org.neo4j.harness`其中包含`newInProcessBuilder()`

[http://neo4j.com/docs/stable/server-unmanaged-extensions-testing.html](http://neo4j.com/docs/stable/server-unmanaged-extensions-testing.html)

第二种选择是使用`TestGraphDatabaseFactory().newImpermanentDatabase()`

[http://neo4j.com/docs/stable/tutorials-java-unit-testing.html](http://neo4j.com/docs/stable/tutorials-java-unit-testing.html)

最后但并非最不重要的（也是最好的）是使用 GraphUnit

[https://github.com/graphaware/neo4j-framework/tree/master/tests#graphunit](https://github.com/graphaware/neo4j-framework/tree/master/tests#graphunit)

# http - 使用浏览器的http完整性

> ID：14350022
> 
> 赞同：0
> 
> 时间：2013-01-16T01:24:02.590
> 
> 标签：http, browser, hmac, digest-authentication, integrity

如何以浏览器的方式检查 http 消息的完整性？实际上，使用“qop = auth-int”进行摘要身份验证会起作用（因为 md5 也在主体之上），但不幸的是，常见的网络服务器（如 apache）不支持这一点。有办法吗？

# html - 在一个类中使用多个 +（加号）运算符是否合法？

> ID：14350023
> 
> 赞同：3
> 
> 时间：2013-01-16T01:24:15.973
> 
> 标签：html, css

我目前正在编写响应式设计，并且我正处于导航折叠移动设备的地步。

为此，我创建了两个`div`s 和一个`ul`. `ul`包含我的元素`nav`，而`div`s 将显示导航图像以使用移动设备和平板电脑进行下拉。

### HTML

```
<div id="nav-tablet"><img></div>
<div id="nav-mobile"><img></div>
<ul></ul> 
```

### CSS

```
#nav-tablet:hover + div + ul {
    display:inline;;
} 
```

我已经测试过了，它可以工作。我想验证它是否是有效的 CSS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:25:56.507

是的，这是完全有效的。您可以使用任意数量`+`的 s。（或，或`>`，或`~`就此而言。）

但是，如果您只是想匹配任何`ul` *after* `#nav-tablet:hover`，`~`那很好。

```
#nav-tablet:hover ~ ul 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T01:26:13.340

绝对地。`table>tbody>tr>td`它与- 组合器的数量没有限制一样有效。

请注意，`+`它的处理速度可能比其他组合器慢一些，所以不要过度使用它。

# c# - WMPLib 经常停止播放

> ID：14350024
> 
> 赞同：2
> 
> 时间：2013-01-16T01:24:16.950
> 
> 标签：c#, backgroundworker, wmplib

我使用以下方法播放 mp3 和 m4as：

```
private void playmp3(string path)
    {
        WMPLib.WindowsMediaPlayer a = new WMPLib.WindowsMediaPlayer();
        a.URL = path;
        a.controls.play();
    } 
```

通常当我播放它们时，它们只播放大约 5 秒或更短，然后停止播放。如果我以任何方式与（WPF）表单交互，它也会停止。我`playmp3`从一个`BackgroundWorker`.

编辑：它实际上在我移动鼠标后停止播放大约十分之一秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:17:21.793

您还需要像这样在播放器状态中编码。

```
Player = new WMPLib.WindowsMediaPlayer();
            Player.PlayStateChange +=
                new WMPLib._WMPOCXEvents_PlayStateChangeEventHandler(Player_PlayStateChange);
            Player.MediaError +=
                new WMPLib._WMPOCXEvents_MediaErrorEventHandler(Player_MediaError);
            Player.URL = "FC.wav";
            Player.controls.play();

   private void Player_PlayStateChange(int NewState)
   {
       if ((WMPLib.WMPPlayState)NewState == WMPLib.WMPPlayState.wmppsStopped)
       {

       }
   }

   private void Player_MediaError(object pMediaObject)
   {
       MessageBox.Show("Cannot play media file.");
       this.Close();
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-25T12:12:42.600

以简单的方式。宣布你在班级级别的球员。

```
 WMPLib.WindowsMediaPlayer a;

 private void playmp3(string path)
{
    a = new WMPLib.WindowsMediaPlayer();
    a.URL = path;
    a.controls.play();
} 
```

这样您就可以轻松解决问题

如果您使用相同的方法来停止像这样使用 if 条件播放的东西

```
private void playmp3(string path)
{
     a = new WMPLib.WindowsMediaPlayer();
     a.URL = path;
     a.controls.play();
} 
```

您需要添加新的 WMPLib.WindowsMediaPlayer(); 同样在类级别，否则每次调用该方法时它都会创建一个新的播放器实例并尝试停止或播放它，所以这样做。

```
WMPLib.WindowsMediaPlayer a= new WMPLib.WindowsMediaPlayer();

private void playmp3(string path, string playState)
{

    a.URL = path;

    if(playstate.Equals("Play))
    {
    a.controls.play();
    }
    else if (playState.Equals("Stop"))
    {
      a.controls.stop();
    }
} 
```

# ios - 更改 UIAppearence 后刷新标签栏

> ID：14350027
> 
> 赞同：1
> 
> 时间：2013-01-16T01:24:36.227
> 
> 标签：ios, ios5, uiappearance

我有一个想法，我想尝试实现：

基本上，我希望能够轻松区分已登录和未登录我的应用程序。我的想法是，当用户未登录时，应用程序将在 UIAppearence 代理中设置背景颜色等。登录后，这些值将通过更改 UIAppearence 设置来更改。

我发现这种方法可行，但并非所有 UI 元素都会在更改 UIAppearence 后刷新。最突出的例子是我的 UITabBarController 中的标签栏（它是我窗口的 rootViewController）。

在寻找此问题的解决方案时，我发现了一些建议`layoutSubviews`或`drawRect`需要调用以使视图刷新并采用对 UIAppearence 的更改。但是，在我的应用程序委托中，我尝试了以下所有方法但均未成功：

```
[self.window.rootViewController.view setNeedsLayout]
[self.window.rootViewController.view setNeedsDisplay]

[self.tabbarController.tabBar setNeedsLayout]
[self.tabbarController.tabBar setNeedsDisplay]

[self.tabbarController.view setNeedsLayout]
[self.tabbarController.view setNeedsDisplay] 
```

有人对我如何强制重绘标签栏（和其他视图）有任何技巧或见解吗？我在想我只想将调用一直发送到`layoutSubviews`UIView 层次结构，但如果是这样，我还没有找到一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T22:57:33.270

UIAppearance 属性在视图添加到视图层次结构后设置。再次触发它的最简单技巧是分离关键窗口的 rootViewController，然后再次附加它。您还可以删除关键窗口的子视图并再次添加它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T07:42:43.313

这是我在更改内部主题后用来刷新应用程序 UIAppearance 的片段。

```
NSArray *windows = [UIApplication sharedApplication].windows;
for (UIWindow *window in windows) {
    for (UIView *view in window.subviews) {
        [view removeFromSuperview];
        [window addSubview:view];
    }
} 
```

[http://snipplr.com/view/75259/refresh-uiappearance-after-application-loaded/](http://snipplr.com/view/75259/refresh-uiappearance-after-application-loaded/)

希望它能满足您的需求，对我来说它是完美的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T10:54:14.240

我已经使用 KVO 来通知我的自定义 UITabBar。

我的诀窍是：

1.  创建 UITabBar 子类
2.  将其链接到 XIB/StoryBoard 上的 UITabBarController
3.  在创建项目时添加观察者（覆盖 - (void)setItems:(NSArray *)items animated:(BOOL)animate）
4.  处理观察者

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-10T01:07:19.707

你问这个问题已经很久了。当我尝试应用暗模式（iOS13）时，我遇到了同样的问题。

UITabbar 已使用“外观 API”进行了修改，并且当模式已更改时，但没有任何更改。我必须强制更改文本颜色和字体。

我的解决方案如下。

1.  在 UIViewController 的子类上实现 'traitCollectionDidChange' API。
2.  迭代UITabbar的项目
3.  带有 UITabbarItem 的 'setTitleTextAttributes' 的 setTitleAttributes

谢谢。

# mysql - 如果两个字段都不唯一，是否可以创建外键？

> ID：14350029
> 
> 赞同：0
> 
> 时间：2013-01-16T01:24:44.270
> 
> 标签：mysql, database-design

我正在考虑创建以下 2 个数据库表：

问题表：

```
QuestionId(PK)  QuestionNo  QuestionContent  SessionId (FK)
11              1           Question1        3    
12              2           Question2        3
13              3           Question3        3 
```

Image_Question

```
ImageId (PK)  SessionId (Fk)  QuestionNo (FK)
1              3               1
2              3               2 
```

由于我设置图像上传的方式，用户可以在问题提交到数据库之前将图像上传到问题，因此在我的 html 中确定图像属于哪个问题的唯一方法是使用 html 中的 QuestionNo知道哪个问题上传了图像文件，因为在提交页面之前不输入 QuestionId。

我的问题是可以有 2 个非唯一字段作为外键吗？

另外，如果我只是将 SessionId 自己设置为（FK），并且如果 QuestionNo 允许（FK），那是根据自己的问题设置的，因为有多个会话相同`QuestionNo`，如果我点击`QuestionNo`上面的一个，它可以`QuestionNo`在包含该的所有会话中显示相同的行`QuestionNo`。

我的另一个问题是如何结合`SessionId`和`QuestionNo`(FK) 以便如果我在 下`QuestionNo`搜索，它会`QuestionNo`在相关的`SessionId`? 如果我点击`SessionId`然后它会显示详细信息，`SessionId`这样就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:24:44.017

我发现您的问题有点难以理解，但据我所知，您使用 QuestionNo 作为临时令牌将多个 http 请求链接在一起（图片上传 + 问题发布）。

我建议类似：

```
SessionQuestionToken
{
  Token
  SessionId
}

Image
{
  ID
  QuestionId FK references Question(Id)
  ImageName
}

Question
{
  Id
  Content
}

TempImage
{
  Token FK references SessionQuestionToken(token)
  ImageName
} 
```

像这样的逻辑：

1.  用户请求问题表。服务器设置令牌并包含响应用户。
2.  用户上传包含令牌的图片。图像存储在临时表中。
3.  步骤 2 重复 n 次。
4.  如果用户提交带有令牌值的问题，则会在问题表中放置一个条目并分配一个 id。TempImage 表中共享令牌的所有图像都将插入到具有现在已知 QuestionId 的图像表中。然后删除 SessionQuestionToken 条目，并级联删除 TempImage 中的临时图像。
5.  否则用户不提交问题，则文件被删除并 SessionQuestionToken 条目被删除。

至于您的问题，如果外键仍然可以引用非唯一列，答案是肯定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:29:24.440

您可以在表中引用多个外键。只要确保您的主键是唯一的。

# ruby-on-rails - Rails 设计添加管理路由

> ID：14350031
> 
> 赞同：0
> 
> 时间：2013-01-16T01:25:04.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我不确定最好的方法是什么，但在某种程度上我有点混淆了自己。我想要做的是管理员进入用户个人资料并修改项目的一种方式。

路线

```
 devise_for :customers, :controllers => {:registrations => 'registrations'}
  resources :usermanagements 
```

控制器

```
class RegistrationsController < Devise::RegistrationsController
  def update
    # required for settings form to submit when password is left blank
    @customer = Customer.find(current_customer.id)
    if @customer.update_attributes(params[:customer])
      set_flash_message :notice, :updated
      # Sign in the customer bypassing validation in case his password changed
      sign_in @customer, :bypass => true
      redirect_to after_update_path_for(@customer)
    else
      render "edit"
    end
  end

  def edit
   @customer = current_customer
  end
end 
```

控制器

```
class UsermanagementsController < ApplicationController
  def index
    @usermngmts = Customer.paginate(:page => params[:page], :per_page => 30)
  end
  def show
    @usermngmts = Customer.find(params[:id])
  end
end 
```

查看registration/edit.html.erb

```
# i am trying to designate this one for public view
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put })  do |f| %>
...
<% end %> 
```

这有效

查看 usermanagements/index.html.erb

```
<% @usermngmts.each do |usrmngmt| %>
    <%= usrmngmt.incomplete_name %>
    <%= link_to ... i would like to go to the edit of usermanagement controller but get usermngents/userid/edit %>
    </div>
<% end%> 
```

不混合这两个控制器的最佳方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:05:34.473

我不太清楚你要做什么，但如果你想为管理员提供一个单独的控制器来管理注册（或客户），你总是可以创建一个“管理员”命名空间，然后使用 admin/registrations 和 admin/customers 控制器提供自定义的路由和操作，访问权限仅限于管理员。

此处有关命名空间的更多信息：http: [//guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

# php - 在一个活动中管理多个 asynctask 显示哪些数据（Survey App）？

> ID：14350032
> 
> 赞同：0
> 
> 时间：2013-01-16T01:25:18.497
> 
> 标签：php, android, mysql, android-asynctask, survey

我正在为一个应用程序工作（调查应用程序）我需要用问题和答案类型（选择、编辑文本等）填写活动问题在服务器（apache-mysql）的数据库中，我得到了网络服务，我可以在活动中显示，但我有一个问题，我称之为异步任务，但它在活动中无序地显示答案。我不知道使用多个异步任务（获取某些表的数据库数据）是否正确。

请帮助我，我需要在两天内纠正这个问题

感谢你所做的一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:40:55.507

当您启动一堆 asyncTask 时，它们会同时运行，因此没有顺序。如果要同步进行多个调用，则必须遵循此线程[Pattern 中的模式以使 AsyncTask “程序化”](https://stackoverflow.com/questions/6328013/pattern-to-make-asynctask-procedural)

# google-app-engine - 我是否将 PyCharm Google App Engine 项目的 IML 置于版本控制之下？

> ID：14350035
> 
> 赞同：1
> 
> 时间：2013-01-16T01:25:32.217
> 
> 标签：google-app-engine, version-control, intellij-idea, pycharm

对于 PyCharm 项目，有一个 .idea 目录，其中包含各种项目配置文件。[这个](https://stackoverflow.com/questions/3041154/intellij-idea-9-10-what-folders-to-check-into-or-not-check-into-source-contro/3041866#comment19914504_3041866)问题的答案指向一个[FAQ](http://devnet.jetbrains.net/docs/DOC-1186)，它说IML 文件应该受版本控制。但...

对于 Google App Engine 项目，存在特定于本地计算机的 GAE SDK 路径等设置。每次将 IML 文件置于版本控制之下都会“破坏构建”。另一方面，该文件中有真正的项目相关设置。

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:00:31.347

您可以将 GAE SDK 放在所有机器上的同一目录中。这只解决了 sdkFolder 选项的问题。

# visual-studio-2010 - Visual Studio 2010 - 生成后事件触发器，但描述文本未显示在输出窗口中

> ID：14350040
> 
> 赞同：0
> 
> 时间：2013-01-16T01:26:04.190
> 
> 标签：visual-studio-2010, msbuild

使用 VS2010，我在我的项目上设置了构建后事件，并且操作本身正确触发，但是我在设置构建后事件时在描述字段中输入的文本没有显示在输出窗口中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:46:02.323

可能是需要提高输出水平。尝试提高在以下位置找到的值：

*VS2010 -> Options -> Projects and Solutions -> Build and Run -> MSBuild project build output verbosity*

它也可能是您脚本中的消息级别，但我们需要查看该脚本才能确定。

# vb.net - 模型未传递回控制器 mvc3

> ID：14350046
> 
> 赞同：0
> 
> 时间：2013-01-16T01:26:34.080
> 
> 标签：vb.net, asp.net-mvc-3, razor

这是一个 MVC3、VB.NET 应用程序，使用 razor 视图引擎。由于某种原因，我的模型没有被传回控制器。在我查看变量时的发布操作中，它在集合中有 0 个项目。关于为什么会这样的任何想法？？？

Post Controller 操作如下所示：

```
 <AcceptVerbs(HttpVerbs.Post)>
    Function EditSponsorPercs(ByVal SponPercModel As PercsCollection) As ActionResult
        '' LOGIC HERE FOR processing model
        ''
        ''
        '  db.sponsorlevels.ApplyCurrentValues(y)
        db.SaveChanges()
        Return RedirectToAction("xxxxxxnsorInfo")
    End Function 
```

视图如下所示：

```
@ModelType xxxxxxx.PercsCollection

@Code
ViewData("Title") = "EditSponsorPercs"
End Code
@Using Html.BeginForm()
@<fieldset>

 <table style="width: 100%">
   <tr><td>@Html.ActionLink("Add Benefit", "AddSponBen", New With {.id = model.persCollections.ElementAt(0).idSponLevel})</td></tr>
   <tr><th style="width: 90%">Benefits Descriptions</th><th>Order</th></tr>
        @For i As Integer = 0 To Model.persCollections.Count - 1
             Dim _i = i
               @<tr><td style="min-height: 20px; width:80%">@Html.TextAreaFor(Function(f) f.persCollections.ElementAt(_i).sponLvlPercDesc, New With {.class = "item2"})</td><td>@Html.TextAreaFor(Function(f) f.persCollections.ElementAt(_i).percOrdering, New With {.class = "num1"})</td><td>@Html.ActionLink("Delete", "DeleteSponBen", New With {.id = Model.persCollections.ElementAt(0).idpercLevel})</td><td></td></tr>
        Next
  </table>
 <p><input type="submit" name="Submit" /></p>
</fieldset>
End Using 
```

模型是这样设置的：

```
Public Class PercsCollection
Private _percsCollections As New List(Of SponPercModel)
Public Property persCollections() As List(Of SponPercModel)
    Get
        Return _percsCollections
    End Get
    Set(ByVal value As List(Of SponPercModel))
        _percsCollections = value
    End Set
End Property

Public Class SponPercModel
    Private _idpercLevel As Integer
    Public Property idpercLevel() As Integer
        Get
            Return _idpercLevel
        End Get
        Set(ByVal value As Integer)
            _idpercLevel = value
        End Set
    End Property
    Private _sponLvlPercDesc As String
    Public Property sponLvlPercDesc() As String
        Get
            Return _sponLvlPercDesc
        End Get
        Set(ByVal value As String)
            _sponLvlPercDesc = value
        End Set
    End Property
    Private _idSponLevel As Integer
    Public Property idSponLevel() As Integer
        Get
            Return _idSponLevel
        End Get
        Set(ByVal value As Integer)
            _idSponLevel = value
        End Set
    End Property
    Private _percOrdering As Integer
    Public Property percOrdering() As Integer
        Get
            Return _percOrdering
        End Get
        Set(ByVal value As Integer)
            _percOrdering = value
        End Set
    End Property

End Class
End Class 
```

渲染的 HTML 源代码如下所示：

```
 <tr><td style="min-height: 20px; width:80%"><textarea class="item2" cols="20" id="sponLvlPercDesc" name="sponLvlPercDesc" rows="2">
 ...............</textarea><input id="sponLvlPercDesc" name="sponLvlPercDesc" type="hidden"     value=".................." /></td><td><textarea class="num1" cols="20" id="percOrdering" name="percOrdering" rows="2">
 1</textarea><input id="percOrdering" name="percOrdering" type="hidden" value="1" /></td><td><a href="/Admin/DeleteSponBen/1">Delete Sponsor Benefit</a></td><td></td></tr>
 <tr><td style="min-height: 20px; width:80%"><textarea class="item2" cols="20" id="sponLvlPercDesc" name="sponLvlPercDesc" rows="2">
 ..................</textarea><input id="sponLvlPercDesc" name="sponLvlPercDesc" type="hidden" value=".................." /></td><td><textarea class="num1" cols="20" id="percOrdering" name="percOrdering" rows="2">
 2</textarea><input id="percOrdering" name="percOrdering" type="hidden" value="2" /></td><td><a href="/Admin/DeleteSponBen/1">Delete Sponsor Benefit</a></td><td></td></tr>
 <tr><td style="min-height: 20px; width:80%"><textarea class="item2" cols="20" id="sponLvlPercDesc" name="sponLvlPercDesc" rows="2">
 ..................</textarea><input id="sponLvlPercDesc" name="sponLvlPercDesc" type="hidden" value=".................." /></td><td><textarea class="num1" cols="20" id="percOrdering" name="percOrdering" rows="2">
 3</textarea><input id="percOrdering" name="percOrdering" type="hidden" value="3" /></td><td><a href="/Admin/DeleteSponBen/1">Delete Sponsor Benefit</a></td><td></td></tr>
 <tr><td style="min-height: 20px; width:80%"><textarea class="item2" cols="20" id="sponLvlPercDesc" name="sponLvlPercDesc" rows="2">
  ..................</textarea><input id="sponLvlPercDesc" name="sponLvlPercDesc" type="hidden" value=".................." /></td><td><textarea class="num1" cols="20" id="percOrdering" name="percOrdering" rows="2">
 4</textarea><input id="percOrdering" name="percOrdering" type="hidden" value="4" /></td><td><a href="/Admin/DeleteSponBen/1">Delete Sponsor Benefit</a></td><td></td></tr>
 <tr><td style="min-height: 20px; width:80%"><textarea class="item2" cols="20" id="sponLvlPercDesc" name="sponLvlPercDesc" rows="2">
 ..................</textarea><input id="sponLvlPercDesc" name="sponLvlPercDesc" type="hidden" value="..................(Submit your logo)" /></td><td><textarea class="num1" cols="20" id="percOrdering" name="percOrdering" rows="2">
 5</textarea><input id="percOrdering" name="percOrdering" type="hidden" value="5" /></td><td><a href="/Admin/DeleteSponBen/1">Delete Sponsor Benefit</a></td><td></td></tr>
 <tr><td style="min-height: 20px; width:80%"><textarea class="item2" cols="20" id="sponLvlPercDesc" name="sponLvlPercDesc" rows="2">R..................</textarea><input id="sponLvlPercDesc" name="sponLvlPercDesc" type="hidden" value=".................." /></td><td><textarea class="num1" cols="20" id="percOrdering" name="percOrdering" rows="2">
 6</textarea><input id="percOrdering" name="percOrdering" type="hidden" value="6" /></td><td><a                                             href="/Admin/DeleteSponBen/1">Delete Sponsor Benefit</a></td><td></td></tr> 
```

视图填充良好，但在提交时模型返回为空.. 打开想法..

# html - 带有 div 的 HTML 列

> ID：14350052
> 
> 赞同：-2
> 
> 时间：2013-01-16T01:28:02.423
> 
> 标签：html, css

我正在尝试在窗口左侧实现一个栏，设置宽度，另一个 div 填充窗口右侧。我试过使用“float:left;” 两者都有，但这会导致“右”区域堆叠在左栏下方。

![正确的](../Images/6d83cc617a83c889979ff6051574aea5.png)

这是正确的，除了我需要右边的白色区域被另一个 div 填充。根据我目前的尝试，会发生以下情况：

![问题](../Images/d827a5ed5cf9600288475659ae986da4.png)

如何让底部 div 填充右侧的白色区域？黑色渐变是背景：设置，并将正确缩放。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:35:56.057

我已经想出了如何做到这一点......对于其他需要知道如何做的人：

对于左栏，您需要一个已知的宽度，在此将 %width% 替换为您的宽度...

CSS：

```
.leftBar{
    position:absolute;
    top:0;
    left:0;
    height:100%;
    color:white;
    height: 100%;
    width: %width%;
}
.mainCenterContent{
padding-left:%width%;
width:100%;
height:100%;
} 
```

HTML：

```
<div class="leftBar">
bleh
</div>
<div class="mainCenterContent">
    bleh
</div> 
```

正如您所看到的，填充基本上将 div 移动到足以不与左栏相交的程度。这对我来说工作正常。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:36:17.510

尝试拥有一个

```
clear:both; 
```

在两个组件之后。

看到这个：[侧边栏](http://jsfiddle.net/Vainglory07/G6uny/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T01:48:44.980

这是另一种方法：

```
<style>
body, html {
  margin:0px;
  padding:0px;
  height:100%;
  width:100%;
}
div#left_nav {
  position:relative;
  width:250px;
  float:left;
  background-color:#58A;
  height:100%;
}
div#page_content {
  position:static;
  background-color:#CDF;
  height:100%;
} 
```

```
<body>
  <div id="left_nav">left menu</div>
  <div id="page_content">page content</div>
</body> 
```

有许多不同的方法可以制作 2 列布局。有些比其他的更复杂。我发现，我的设计越复杂，我的布局就需要越健壮。四处搜索，您会找到最适合您需求的。

# python - 使用 ChromeDriver 在 Mac OS X 上设置 Selenium 2

> ID：14350053
> 
> 赞同：0
> 
> 时间：2013-01-16T01:28:06.543
> 
> 标签：python, macos, selenium-webdriver

我之前在 Java 和 OpenSUSE 中使用过 Selenium 2。现在，我在 Mac 上并希望将其设置为与 Python 2.7 一起使用。我已经下载并解压缩了 selenium 2.28 并下载了 ChromeDriver 并将其保存在 /Users/username/Downloads 中。并更新 bash_profile 中的路径。但是，当我像这样运行一个简单的代码片段时，

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

driver = webdriver.Chrome()
driver.get("http://www.python.org")
assert "Python" in driver.title
elem = driver.find_element_by_name("q")
elem.send_keys("selenium")
elem.send_keys(Keys.RETURN)
assert "Google" in driver.title
driver.close() 
```

我只是从文档中拿来测试。我收到如下错误：

```
Traceback (most recent call last):
  File "python_selenium_testing.py", line 4, in <module>
    driver = webdriver.Chrome()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/selenium-2.27.0-py2.7.egg/selenium/webdriver/chrome/webdriver.py", line 61, in __init__
    self.service.start()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/selenium-2.27.0-py2.7.egg/selenium/webdriver/chrome/service.py", line 64, in start
    and read up at http://code.google.com/p/selenium/wiki/ChromeDriver")
selenium.common.exceptions.WebDriverException: Message: 'ChromeDriver executable needs to be available in the path.                 Please download from http://code.google.com/p/selenium/downloads/list                and read up at http://code.google.com/p/selenium/wiki/ChromeDriver' 
```

但是，chromedriver 正在路上。这就是 echo $PATH 给我的：

```
Other stuff:***/Users/rohitdholakia/Downloads/chromedriver*** 
```

可能缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:33:12.180

看起来您将可执行文件本身放在 PATH 而不是包含它的目录中。

`/Users/rohitdholakia/Downloads`在你的 PATH 中尝试。

# django - Django models.py 错误（关于 ManyToManyField）

> ID：14350061
> 
> 赞同：0
> 
> 时间：2013-01-16T01:28:45.137
> 
> 标签：django, django-models, django-orm

```
from django.db import models
from django.contrib.auth.models import User

class WorkDailyRecord(models.Model):
    user = models.ForeignKey(User)
    date = models.DateTimeField(auto_now=True)
    contents = models.TextField()
    check_user = models.ManyToManyField(User)
    target_user = models.ManyToManyField(User)

    ONGOING_OR_END =(
            ('ing', '진행중'),
            ('end', '완료'),
        )

    ongoing_or_end = models.CharField(
            max_length=3,
            choices=ONGOING_OR_END,
            default='ing',
        ) 
```

我写了那个代码，然后我给出了错误......

所以我在网上搜索，我发现我必须使用'related_name'属性。

但我不知道为什么我必须使用那个 attr ？

**为什么？？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:39:10.147

`User`通过为模型设置 M2M ，`User`实例将自动`workdailyrecord_set`设置属性。由于您需要 2 个访问器，django 抱怨它不能设置`workdailyrecord_set`两次。

如果他们允许，那确实会非常混乱，因为谁知道`user.workdailyrecord_set`在这种情况下会返回什么。

您需要给它 a[`related_name`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.related_name)以区分指向 的两个关系`User`。

```
target_user = models.ManyToManyField(User, related_name='workdailyrecord_target')
check_user = models.ManyToManyField(User, related_name='workdailyrecord_check') 
```

这样，`User`实例将有一个`workdailyrecord_target`反向管理器，它只会查询与关系相关的`WorkDailyRecord`对象。`User``target_user`

例如

```
User.objects.latest('id').workdailyrecord_target.all()  
#  all WorkDailyRecords where user is referenced by 'target_user'

User.objects.latest('id').workdailyrecord_check.all()
 #  all WorkDailyRecords where user is referenced by 'target_check' 
```

`related_name='+'`不幸的是，当涉及到 M2M 时，即使使用 django 记录的功能，您也无法禁用此功能。不要问我为什么：）

# ios - 如何防止键盘出现在自定义警报视图上

> ID：14350067
> 
> 赞同：0
> 
> 时间：2013-01-16T01:29:52.883
> 
> 标签：ios, ipad, uitextview, uiresponder

我正在创建一个类似于 UIAlertView 的自定义警报视图。我遇到的是，当我的警报可见时 UITextField 在后台变为活动状态时，键盘会向上滑动。

如果我像这样将警报视图添加到主窗口：

```
[[[UIApplication sharedApplication] keyWindow] addSubview:myAlert]; 
```

它会出现在现有键盘上，但如果在出现警报后键盘变为活动状态，它仍然会被遮挡。

当从一个视图导航到另一个视图时，通常会发生这种情况。退出视图在退出时触发警报，下一个视图想要激活 UITextField 或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:45:25.337

也许您可以将自定义警报视图添加到新窗口并将此窗口的 windowLevel 设置为 UIWindowLevelAlert 或更高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:31:44.870

您是否尝试覆盖该方法

```
- (BOOL)canResignFirstResponder 
```

并返回否？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T19:27:46.877

[我在这里](http://joris.kluivers.nl/blog/2012/03/02/custom-popups-revisited/)找到了一个非常好的方法和解释。

# html - 我们可以在 HTML5 中的图形标签中使用视频标签吗

> ID：14350073
> 
> 赞同：28
> 
> 时间：2013-01-16T01:31:43.070
> 
> 标签：html, video, figure

我正在尝试为我的项目构建一个干净的 HTML5 结构，
但我没有得到 Figure 标签的使用范围；
我们真的可以像本页所说的那样使用图中的视频吗：http:
[//oopeducation.com/html5/html5-figure-tag/](http://oopeducation.com/html5/html5-figure-tag/)

还是仅适用于图像？

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-16T01:35:32.640

是的，您可以 - 根据 HTML5 规范，`<figure>`允许[流内容](http://dev.w3.org/html5/markup/terminology.html#flow-content)（由[流元素](http://dev.w3.org/html5/markup/common-models.html#common.elem.flow)和[普通字符数据](http://dev.w3.org/html5/markup/syntax.html#normal-character-data)组成）。鉴于`<video>`&`<audio>`都是众多流元素之一，将它们嵌套在图形中**是完全有效的。**

[HTML5 Doctor 的这篇](http://html5doctor.com/the-figure-figcaption-elements/)文章似乎暗示了同样的事情，看看吧。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-16T01:42:58.447

是的，有可能。

这是`<figure>`W3C 指定的标签定义：

> figure 元素表示一些流内容，可以选择带有标题，它是自包含的，通常作为文档主流中的单个单元引用。
> 
> 因此，该元素可用于注释插图、图表、照片、代码列表等，这些是从文档的主要内容中引用的，但可以在不影响文档流程的情况下从该主要内容中移开，例如页面的一侧、专用页面或附录。

在这里，您可以看到 W3C 文档提取的示例，其中`<video>`标签包含在`<figure>`标签中。

```
<figure>
 <video src="ex-b.mov"></video>
 <figcaption>Exhibit B. The <cite>Rough Copy</cite> trailer.</figcaption>
</figure> 
```

你可以在这里找到官方的 W3C 文档：http: [//www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-figure-element](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-figure-element)

# c# - 制表符分隔的文本文件

> ID：14350075
> 
> 赞同：0
> 
> 时间：2013-01-16T01:32:03.370
> 
> 标签：c#, datagridview, text-files

我能够读取文本文件中包含的数据。然后将此数据编码为在 datagridview 中显示。数据的原始格式以逗号分隔。现在我想使用 datagridview 的数据来使用制表符分隔来保存它。

问题是，并非所有字段的长度都相等，所以给了我类似的东西，

```
A B C
1 567889 123 
```

它应该是这样的，

```
A B      C
1 567889 123 
```

我想要的第二个例子，

```
ABCDE ABC     A
123   1258741 528712 
```

所以无论是标题长度列还是数据长度列。

我使用了字符串生成器，`sb.Append("{0}\t,{1}\t",field1, field2)`但它不起作用。也试过`write.Write(field + "\t")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:16:54.913

您可以使用`String.PadRight`这种方式来格式化文本。

您只想使用带有标题长度的 ' ' 填充并添加您的选项卡。

例子：

```
string line = string.Format("{0}\t{1}\t{2}", field1.PadRight(header1.Length, ' ')
                                           , field2.PadRight(header2.Length, ' ')
                                           , field3.PadRight(header3.Length, ' '))); 
```

结果：

```
ABCDE   A       ABC
5       356475  5657
566     66      4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:02:01.387

如果您希望可视化由`TAB`字符分隔的垂直对齐的可变长度数据项，记事本不是正确的工具。

使用支持弹性制表位的编辑器，例如： http: [//nickgravgaard.com/elastictabstops/](http://nickgravgaard.com/elastictabstops/)（向下滚动到 Java 小程序演示，以便您可以尝试在那里粘贴带有单个制表位的文本）。

或者将文本粘贴到专为处理列而设计的工具中，例如 Excel。它会自动将制表符识别为列分隔符。

# jquery - jquery UI 缺少 脚本

> ID：14350076
> 
> 赞同：1
> 
> 时间：2013-01-16T01:32:07.860
> 
> 标签：jquery, jquery-ui

我需要紧急建议。我正在使用来自 jQuery UI 站点的以下链接：

[http://ui.jquery.com/latest/ui/jquery.effects.core.js](http://ui.jquery.com/latest/ui/jquery.effects.core.js)

[http://ui.jquery.com/latest/ui/jquery.effects.slide.js](http://ui.jquery.com/latest/ui/jquery.effects.slide.js)

他们昨天在我的现场停止工作。我下载了这 2 个脚本并将其链接到我的本地服务器，但页面无法正常工作我是否缺少其他内容？有谁知道这些文件的其他位置？

非常感谢任何信息。

# mysql - 为什么这个简短的 SQL 文件会给我错误？

> ID：14350077
> 
> 赞同：0
> 
> 时间：2013-01-16T01:32:17.157
> 
> 标签：mysql, sql

这是文件：

```
ALTER TABLE tablename
    ADD COLUMN `column_name` varchar(255) NULL; 
```

我在第一行收到此错误：

`ERROR 1064 (42000): YOu have an error in your SQL syntax; ... line 1`

为什么是这样？

我确定表名和列名输入正确，因为还有其他类似的 sql 文件是我以此为基础的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:40:44.163

您在`mysql < MyFile.sql`MySQL 命令提示符中输入。

您需要从您的*shell*运行它。这是一种不同的运行方式`mysql`，而不是特殊的`mysql`命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T01:40:54.800

如果你从 mysql 命令提示符调用它，你需要使用这个：

```
source path/to/file.sql; 
```

或从外壳调用您现在正在调用的内容。

# c# - 模仿 WP7 解锁页面动画错误

> ID：14350082
> 
> 赞同：-1
> 
> 时间：2013-01-16T01:32:53.693
> 
> 标签：c#, windows-phone-7

我正在尝试使用此代码 [Mimicking WP7 Unlock Page Animation获得解锁手机效果](https://stackoverflow.com/questions/7513776/mimicking-wp7-unlock-page-animation?answertab=active#tab-top)

但我真的不知道如何让它工作。我没有经验，`Storyboard`而且我遇到了错误`gridTranslate`，因为我没有它的定义。我不知道我是否正确输入了代码。有人可以帮我弄这个吗

我的xml代码是

```
<Grid Grid.Row="1" x:Name="LockScreenGrid" Visibility="{Binding LockScreenGridVisibility}" ManipulationDelta="lock_ManipulationDelta" ManipulationCompleted="lock_ManipulationCompleted" >
        <Grid.RenderTransform>
            <TranslateTransform x:Name="GridTranslate" />
        </Grid.RenderTransform>
        <Grid.Resources>
            <Storyboard x:Name="LockScreenSlideAnimation">
                <DoubleAnimation Duration="0:0:1" To="-768"  
   Storyboard.TargetProperty="  
   (UIElement.RenderTransform).  
   (CompositeTransform.TranslateY)" 
   Storyboard.TargetName="LockScreenGrid" d:IsOptimized="True"/>
            </Storyboard>

            <Storyboard x:Name="CoastGrid" >
                <DoubleAnimationUsingKeyFrames Storyboard.TargetName="LockScreenGrid" Storyboard.TargetProperty="(UIElement.RenderTransform)
.(CompositeTransform.TranslateY)">
                    <EasingDoubleKeyFrame x:Name="coastY"           
        KeyTime="00:00:01" Value="0">
                    </EasingDoubleKeyFrame>
                </DoubleAnimationUsingKeyFrames>
            </Storyboard>
        </Grid.Resources>

    </Grid> 
```

我的 .cs 代码是

```
 public SlideTest()
    {
        InitializeComponent();
    }
    private void lock_ManipulationCompleted(object sender, ManipulationCompletedEventArgs e)
    {

        if (this.gridTranslate.TranslateY < 0.0)
        {
            IEasingFunction function;
            this.CoastGrid.Stop();
            this.gridTranslate.TranslateY = e.TotalManipulation.Translation.Y;
            if ((e.IsInertial) && (e.FinalVelocities.LinearVelocity.Y < -1500) ||
            (this.gridTranslate.TranslateY < (base.ActualHeight / -2.0)))
            {

                this.coastY.Value = (-1.0 * this.LockScreenGrid.ActualHeight);
                function = new CircleEase();
                ((CircleEase)function).Ease(1.0);
            }
            else
            {
                this.coastY.Value = 0.0;
                function = new BounceEase();
                ((BounceEase)function).Ease(0);
                ((BounceEase)function).Ease(2);
                ((BounceEase)function).Ease(5.0);
            }
            this.coastY.EasingFunction = function;
            this.CoastGrid.Begin();
        }
    }
    private void lock_ManipulationDelta(object sender, ManipulationDeltaEventArgs e)
    {
        e.Handled = true;
        this.gridTranslate.TranslateY = (this.gridTranslate.TranslateY +
        e.DeltaManipulation.Translation.Y);
        if (this.gridTranslate.TranslateY > 0.0)
        {
            this.gridTranslate.TranslateY = 0.0;
        }
    } 
```

这只是我从源代码获得的代码的复制/粘贴。我不知道我是否需要一些参考，或者我是否必须定义`gridTranslate`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:36:43.057

您的 XAML 有一个名为 GridTranslate 的元素，而您的代码使用 gridTranslate - 请注意不同的大小写。

# c++ - 从 Matlab 连接到本地服务器

> ID：14350086
> 
> 赞同：1
> 
> 时间：2013-01-16T01:33:29.117
> 
> 标签：c++, qt, matlab, localserver

我想在同一台机器上的 Matlab 脚本和 Qt (C++) 应用程序之间来回通信。在 Qt 中，您创建一个`QLocalServer`对象并引导它侦听特定句柄上的连接，例如“my_server”（可以是任何东西）。

在 Matlab 中，我查看了相关的 MatlabCentral 列表，例如[this one](http://www.mathworks.com/matlabcentral/fileexchange/24525-a-simple-udp-communications-application)和[this one](http://www.mathworks.com/matlabcentral/fileexchange/21131-tcpip-socket-communications-in-matlab)，但在这两种情况下我都无法让它们工作，我什至不知道如何做到这一点——有无法指定句柄。如果我只是告诉他们收听本地主机，他们不会连接。

那么我可以在这里做什么？通过 MEX 文件执行此操作可能是可能的，但我将其作为最后的手段。`udp`我也坚持使用 R2009b，所以我在 Matlab 中没有命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:30:34.813

试试 Peter Rydesäter 的工具箱：http: [//www.mathworks.com/matlabcentral/fileexchange/345-tcpudpip-toolbox-2-0-6](http://www.mathworks.com/matlabcentral/fileexchange/345-tcpudpip-toolbox-2-0-6)很旧但仍然有效。

具有两个 Matlab 实例的示例：

发件人：

```
function sendudp(host, port, data)
  udp=pnet('udpsocket',1111);          % open local socket on port 1111
  pnet(udp,'write',data);              % write data to buffer
  pnet(udp,'writepacket',host,port);   % send udp-packet
  pnet(udp,'close');                   % close connection
end 
```

接收者：

```
sock = pnet('udpsocket', 950) % open socket on port 950 
```

发件人：

```
sendudp('127.0.0.1', 950, 'Hello World') % Call function defined above, send Hello World to localhost, port 950 
```

接收者：

```
size = pnet(sock, 'readpacket'); % Get Data from sock, and load to buffer
data = pnet(sock, 'read'); % Read Data from buffer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:39:30.260

所以事实证明，Qt 的`QLocalServer`/`QLocalSocket`不是这样做的正确类，尽管它们的名字。相反，我引用的 MatlabCentral 文件（可能还有@Frederik 提到的那个，虽然我不能立即让它工作）如果你创建一个`QTcpServer`和对应的`QTcpSocket`，并在两端设置主机到 localhost 和端口到4444（或其他）。[我发现按照 Qt 的Loopback 示例](http://doc.qt.digia.com/main-snapshot/network-loopback.html)构建我需要的东西非常容易。

# mysql - DataGridView 中的 DataGridViewComboBoxColumn

> ID：14350101
> 
> 赞同：1
> 
> 时间：2013-01-16T01:35:49.023
> 
> 标签：mysql, vb.net, visual-studio-2012

我正在编写一个小应用程序来查看和编辑 mySQL 表。

我想将 ComboBox 输入放在 DataGridView 中，以从其他表中的外键中选择数据。

有什么方法可以这样做吗？

到目前为止，我只找到了这段代码：

```
 Dim cmb As New DataGridViewComboBoxColumn()
        cmb.HeaderText = "Select Data"
        cmb.Name = "cmb"
        cmb.DataSource = Form1.table
        cmb.DisplayMember = "adrese_id"
        cmb.ValueMember = "adrese_id"
        cmb.DataPropertyName = "adrese_id"
        DataGridView1.Columns.Add(cmb)

        Form1.adapter.Update(Form1.table) 
```

这是我的桌子：

**阿博内蒂**

abonents_id *PK*
vards
uzvards
tel_num
adrese_id *FK*

**地址**

adrese_id *PK*
dziv_num
iela

当我从组合框中选择某些内容时，它只会返回表中的值。所以我不能把它换成其他的。

有人知道如何解决这个问题，或者如何使组合框在数据网格视图中使用外键？

PS还有一种方法可以放置该选择列而不是原始列吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:54:39.530

这是我在做类似事情时想到的。

将数据插入 datagridview 后，将单元格转换为组合框。所以基本上你像下面的代码一样循环遍历 DGV 并更改单元类型。您将 dgvDropDown 项目设置为数据库中的项目（当然是字符串）。请记住，如果在下拉列表中找不到该项目的值，则会发生错误。

```
int column = 0     
For row As Integer = 0 To DataGridView1.Rows.Count - 1
        Dim dgvDropDown As DataGridViewComboBoxCell = New DataGridViewComboBoxCell()
        dgvDropDown.Items.Add("dbItem1")
        dgvDropDown.Items.Add("dbItem2")
        DataGridView1.Item(column, row) = dgvDropDown
Next 
```

# html - 页脚在页眉上方结束，但仅在主页上

> ID：14350102
> 
> 赞同：1
> 
> 时间：2013-01-16T01:35:49.303
> 
> 标签：html, css, wordpress, footer

我正在拼命地让页脚在我正在处理的这个网站的主页上正常运行。在除主页之外的所有页面上，它都非常适合页面底部。

但是在主页上它跳到屏幕顶部，我不知道为什么。我一直在搜索 HTML 和 CSS，但找不到故障。

网站：[http ://dumbbell-divas.com/](http://dumbbell-divas.com/)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:41:30.023

你成功`#maincontent{ position: absolute; }`了`position: relative`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:40:51.187

从**div#maincontent**中删除**position:absolute**

# windows-7 - RubyTest 在 Windows 7 上不输出测试结果

> ID：14350104
> 
> 赞同：2
> 
> 时间：2013-01-16T01:35:59.990
> 
> 标签：windows-7, ruby-test

我在 Windows 7 Pro 上并尝试将 RubyTest 与 Sublime Text 2 一起使用。我已经安装了它。我在测试结果窗口中没有得到任何输出。例如，如果我运行一个测试，我会在控制台中看到以下内容：

运行`bin/rspec spec\features\static_pages_spec.rb -l9` 重新加载`/C/Users/jgriffin/AppData/Roaming/Sublime Text 2/Packages/User/RubyTest.last-run`

如果我在 Dos 窗口的命令行中运行它，它就会执行。如果我在 Git Bash 窗口的命令行中运行它，它不会。

我宁愿用完我的 Bash 窗口。我尝试在 Bash 和 DOS 命令窗口中从命令行运行 subl，但结果似乎总是相同的。根本没有输出。

我正在运行：

```
ruby 1.9.3p125 (2012-02-16) [i386-mingw32] 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:55:23.040

如果您还没有通过 Sublime 在 Windows 上工作，您可能需要修改该`User - RubyTest.sublime-settings`文件以包含前缀。`bundle exec`不久前我遇到了同样的问题。例如：

```
{
  "erb_verify_command": "bundle exec erb -xT - {file_name} | ruby -c",
  "ruby_verify_command": "bundle exec ruby -c {file_name}",

  "run_ruby_unit_command": "bundle exec ruby -Itest {relative_path}",
  "run_single_ruby_unit_command": "bundle exec ruby -Itest {relative_path} -n '{test_name}'",

  "run_cucumber_command": "bundle exec cucumber {relative_path}",
  "run_single_cucumber_command": "bundle exec cucumber {relative_path} -l{line_number}",

  "run_rspec_command": "bundle exec rspec {relative_path}",
  "run_single_rspec_command": "bundle exec rspec {relative_path} -l{line_number}",

  "ruby_unit_folder": "test",
  "ruby_cucumber_folder": "features",
  "ruby_rspec_folder": "spec",

  "ruby_use_scratch" : false,
  "save_on_run": false,
  "ignored_directories": [".git", "vendor", "tmp"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T11:29:41.907

我遇到了同样的问题，调试控制台中没有错误，实际控制台中没有输出。

在我的情况下，我需要以管理员身份运行 sublime text（sublime_text.exe > 属性 > 兼容性 > 以管理员身份运行此程序）。

然后我通过 sublime text 重新运行测试，大约 10 秒后它终于输出了测试结果。

我希望这有帮助。

# stl - 使用 stl 和 boost 将两个向量转换为元组向量

> ID：14350106
> 
> 赞同：0
> 
> 时间：2013-01-16T01:36:24.777
> 
> 标签：stl, boost-iterators, boost-foreach

我有

```
vector<time> tt;
vector<space> xx; 
```

我想得到

```
vector<tuple<time,space>> trajectory; 
```

这就是我到目前为止所拥有的

```
 std::for_each(boost::make_zip_iterator(
        boost::make_tuple(tt.begin(),xx.begin(),
        boost::make_tuple(tt.end(),xx.end(),
        []() {
          trajectory.push_back(make_tuple(get<0>(),get<1>()));
        }
        ); 
```

我不确定如何进一步进行。[一种方法是我可以在http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/zip_iterator.html#examples](http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/zip_iterator.html#examples)中制作一个函子作为 zip_func但我不想写额外的代码，我想使用 lambda。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:27:45.607

怎么样（未经测试的代码）：

```
std::copy( 
    boost::make_zip_iterator(boost::make_tuple(tt.begin(),xx.begin()),
    boost::make_zip_iterator(boost::make_tuple(tt.end  (),xx.end  ()),
    std::back_inserter(trajectory)
    ); 
```

不需要 lambda！在您的示例代码中，您解包一个元组只是为了创建另一个元组，所以我能够摆脱它。

# android - 将图标添加到上下文列表中的菜单项

> ID：14350107
> 
> 赞同：1
> 
> 时间：2013-01-16T01:36:45.447
> 
> 标签：android, contextmenu

大家好，我正在尝试将图标添加到当用户长按列表视图项目时触发的上下文菜单中的项目列表。

该列表与上下文菜单一起显示得很好，我似乎唯一遇到的困难是设置图标。这是我的上下文菜单 xml 文件。

```
<item android:id="@+id/delete_item" android:title="Delete" android:icon="@drawable/delete" />
<item android:id="@+id/edit_item" android:title="Edit"  android:icon="@drawable/edit"/> 
```

我唯一想知道的可能是图像尺寸，它们必须是特定尺寸吗？

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.setHeaderTitle("Options");
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.context_menu, menu);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:40:02.010

请参阅此链接：

[在android中添加上下文菜单图标](https://stackoverflow.com/questions/1245543/add-context-menu-icon-in-android)

> 上下文菜单不支持图标。

从上面的 SO 问题中，有一个库可以让你做类似的事情：

[https://code.google.com/p/android-icon-context-menu/](https://code.google.com/p/android-icon-context-menu/)

# typescript - 声明单一类型 - 单一类型的“使用”等价物

> ID：14350108
> 
> 赞同：9
> 
> 时间：2013-01-16T01:36:48.757
> 
> 标签：typescript

在 C# 中，我可以这样做：

```
using IAnyType = App.Namespace.Types.IAnyType ;
class BaseClass : IAnyType { } 
```

有打字稿等价物吗？

```
//BAD:
import IDialogOptions = App.Widgets.Interfaces.IDialogOptions; //A module cannot be aliased as a non-module type
class BaseClass implements IDialogOptions { }

//BAD:     
declare var IDialogOptions: App.Widgets.Interfaces.IDialogOptions;
class BaseClass implements IDialogOptions { } //The name IDialogOptions does not exist in the current context 
```

我能得到的最接近的是：

```
import Interfaces = App.Widgets.Interfaces;
class BaseDialog implements Interfaces.IDialogOptions { } 
```

每次需要使用这个接口的时候都用这个长名字不太理想。我想这还不是很糟糕，但我想知道是否有更好的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T15:06:56.717

我实际上更喜欢您的原始解决方案而不是替代方案：

```
import Interfaces = App.Widgets.Interfaces;
class BaseDialog implements Interfaces.IDialogOptions { } 
```

如果没有别名 ( `Interfaces`)，您可能会遇到命名冲突 - 如果您曾经不得不处理 with`using`语句，那将是一个真正的痛苦，因为您最终使用别名或使用完整的命名空间。

```
using myAlias = App.Namespace.Types; 
```

至少为您导入的所有模块设置一个别名意味着这不会成为问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T03:00:43.577

我也很恼火，你不能像你期望的那样给事物起别名。我所做的最终是使用缩写的“命名空间”来保持简短。

```
import RSV = module("views/researchSectionView")
var r = new RSV.ResearchSectionView(); 
```

# c - 终端中非常奇怪的“假号码”

> ID：14350115
> 
> 赞同：-4
> 
> 时间：2013-01-16T01:37:41.000
> 
> 标签：c, numbers, numeric

我知道图像通常不是这样做的方式，但我有一个非常奇怪的.. 错误.. 看起来更像是一个黑客而不是其他任何东西。

我在这里有一张显示代码和输出的图片，因为这是我可以显示正在发生的事情的唯一方法。不知何故，我设法输入了看起来像数字但行为不像数字的数字。他们的文字比实数更方正，这是我能找到的唯一区别。这有点吓到我了……我觉得我被人控制了。

有人请告诉我这是一个简单的错误造成了这些数字冒名顶替。

图片链接：http: [//i.stack.imgur.com/grZiu.png](http://i.stack.imgur.com/grZiu.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:45:34.090

> 如果无法执行有效转换，则函数返回零 (0.0)。

来源 - [atof](http://www.cplusplus.com/reference/cstdlib/atof/)

这似乎是出于某种原因发生的..

就像链接建议的那样，您可能想尝试[strtod](http://www.cplusplus.com/reference/cstdlib/strtod/)。

* * *

正如@aschepler 所建议的那样，似乎 s 以某种方式被 s替换`1`了`l`

# spring - 无法使用通过 URL 传递参数 标签

> ID：14350117
> 
> 赞同：1
> 
> 时间：2013-01-16T01:37:48.737
> 
> 标签：spring, spring-mvc, spring-security, jstl

我正在使用 Spring MVC + Spring Security，并且正在尝试实现分页。为此，我修改了菜单中指向要使用分页的页面的链接。

当使用下面的代码单击菜单中的“列表”链接时，出现错误 400：请求的资源不可用。

```
<li>
  <a href="<c:url value="/list.htm" ><c:param name="page" value="1" /></c:url>">List
  </a>
</li> 
```

将参数添加到链接时，不使用`<c:param>`，同样的事情，错误 400：

```
<li><a href="<c:url value="/list.htm?page=1" />">List</a></li> 
```

当简单地使用它时，不传递任何参数，链接工作正常：

```
<li><a href="<c:url value="/list.htm" />">List</a></li> 
```

这是我的控制器中的相关代码：

```
@RequestMapping(value = "/list", method = RequestMethod.GET)
    public String getEmployees(@RequestParam(value = "page", required = false) int page, ModelMap model) {
        model.addAttribute("employees", this.employeeManager.getEmployees(page));
        return "list";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:45:22.823

尝试以下使用通配符的请求映射。

```
@RequestMapping(value = "/list.htm*", method = RequestMethod.GET)
    public String getEmployees(@RequestParam(value = "page", required = false) int page, ModelMap model) {
        model.addAttribute("employees", this.employeeManager.getEmployees(page));
        return "list";
    } 
```

您也可以尝试不使用通配符，但包括 .htm

```
@RequestMapping(value = "/list.htm", method = RequestMethod.GET)
    public String getEmployees(@RequestParam(value = "page", required = false) int page, ModelMap model) {
        model.addAttribute("employees", this.employeeManager.getEmployees(page));
        return "list";
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-01T06:10:20.153

在 Spring 控制器中：

```
@RequestMapping(value = "/list.htm", method = RequestMethod.GET)
public String funcName(@RequestParam(value = "page", required = false) int page){
return String;
} 
```

# android - 没有视图的Android自定义上下文菜单

> ID：14350118
> 
> 赞同：1
> 
> 时间：2013-01-16T01:37:50.583
> 
> 标签：android, android-menu

我正在使用 OSM 地图做一些工作，它的 MapView 支持 OnItemGestureListener 用于单次和长按放置在 MapView 上的项目。我试图想出一种方法来在长按时显示项目的上下文菜单（例如命令列表）。我不能使用通常的 Activity onCreateContextMenu 方法，因为我没有用于 registerForContextMenu() 的视图。如果我注册了 MapView，只要按住 MapView 一秒钟，即使在平移时，我都会弹出上下文菜单。

所以我想我必须要么将 MenuInflater 与 ContextMenu 一起使用，要么只使用 Menu 对象，我可以调用它来显示何时进行长按回调。然而，这两个 Menu 对象都不允许使用构造函数或其他方式来保存 Menu 对象以及显示和回调的方式。

我是否应该创建一个单独的布局，将菜单项作为视图，然后在长按时弹出它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:47:51.350

如何显示一个模拟 ContextMenu 功能的 DialogFragment，查看此链接：[http ://android-developers.blogspot.in/2012/05/using-dialogfragments.html](http://android-developers.blogspot.in/2012/05/using-dialogfragments.html)

您几乎可以在该片段上放置任何功能

![在此处输入图像描述](../Images/d9239a6ecb8bfb6f436ae91afb7e2c3e.png)

# java - 在 Java 中解析 JSON 嵌套数组（使用字典？）

> ID：14350119
> 
> 赞同：4
> 
> 时间：2013-01-16T01:37:53.373
> 
> 标签：java, json, parsing

我在解析 Java 应用程序中的一些 JSON 时遇到问题。

JSON格式如下：

```
{"values": [["kevin", "a value"], ["another name", "another value"]], "cols":["name", "val"]} 
```

我的代码解析它（“结果”包含原始 JSON 字符串）：

```
JSONObject myobj = new JSONObject(results);
JSONArray json = myobj.getJSONArray("values");

for(int i = 0; i < json.length(); i++){

    JSONArray tmpArr = json.getJSONObject(i).getJSONArray("values");

    for(int j = 0; j < tmpArr.length(); j++){
        System.out.println(tmpArr.getJSONObject(j).toString());
    }
} 
```

这给了我一个 JSON typeMismatch 错误。

我的最终目标是能够使用我习惯使用的这种 JSON 方法从我的数据中获取单个值：

```
jsonObject.getString("name"); 
```

其中 name 将是 JSON 字符串中“cols”中指定的列/属性名称。

很感谢任何形式的帮助。

# linux - 如何比较 awk 中不同行的列

> ID：14350120
> 
> 赞同：0
> 
> 时间：2013-01-16T01:38:01.767
> 
> 标签：linux, awk

假设我有这个文件

```
var1 300
var1 400
var3 600
var1 200 
```

现在我该如何比较`$1(from line 1) == $1 (from line 2)`

基本上我只想在名称相等时添加列

只有`awk`

输出应该是

```
var1 900
var3 600 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:43:20.383

使用 awk：

```
$ awk '{a[$1]+=$2;}END{for (i in a)print i, a[i];}' file
var1 700
var3 600 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T03:02:45.790

如果您的文件很大和/或您关心保留输入顺序并且您的输入在第一个字段上排序，请在 @Guru 的解决方案上使用它：

```
$ awk '(NR>1) && ($1!=p){print p, s; s=0} {p=$1; s+=$2} END{print p, s}' file
var1 700
var3 600 
```

# c# - Managedwifi：有时，WlanConnectionNotification 不会被触发

> ID：14350121
> 
> 赞同：2
> 
> 时间：2013-01-16T01:38:08.627
> 
> 标签：c#, windows, wifi, codeplex

我有以下代码来使用 managedWifi api (http://managedwifi.codeplex.com/) 监听 wifi 连接/断开事件

```
public void wlanConnectionChangeHandler(Wlan.WlanNotificationData notifyData, Wlan.WlanConnectionNotificationData connNotifyData){
        string msg = String.Empty;

        switch (notifyData.notificationSource)
        {
            case Wlan.WlanNotificationSource.ACM:

                switch ((Wlan.WlanNotificationCodeAcm)notifyData.notificationCode)
                {
                    case Wlan.WlanNotificationCodeAcm.ConnectionStart:
                        msg = "ConnectionStart";
                        break;

                    case Wlan.WlanNotificationCodeAcm.ConnectionComplete:
                            msg = "ConnectionComplete";
                            WlanClient client = new WlanClient();
                            foreach (WlanClient.WlanInterface wlanIface in client.Interfaces)
                            {
                                Wlan.WlanAssociationAttributes conAttributes = wlanIface.CurrentConnection.wlanAssociationAttributes;
                                Wlan.Dot11Ssid ssid = conAttributes.dot11Ssid;
                                PhysicalAddress bssid = conAttributes.Dot11Bssid;
                                int rssi = wlanIface.RSSI;

                                msg += ". ssid: " + GetStringForSSID(ssid) + ". rssi: " + rssi.ToString() + ". MAC: " + bssid.ToString();
                                break;
                            }

                        break;

                    case Wlan.WlanNotificationCodeAcm.Disconnecting:
                        msg = "Disconnecting";
                        break;

                    case Wlan.WlanNotificationCodeAcm.Disconnected:
                        msg = "Disconnected";
                        break;

                    default:
                        msg = "unknown notificationCode =" + notifyData.notificationCode;
                        break;

                }
                MessageBox.Show(msg + " for profile:" + connNotifyData.profileName);
                break;

            default:
                //MessageBox.Show("irrelevant notification. Ignore");
                break;
        }
    }

    static string GetStringForSSID(Wlan.Dot11Ssid ssid)
    {
        return Encoding.ASCII.GetString( ssid.SSID, 0, (int) ssid.SSIDLength );
    }

    private void registerWlanListener()
    {
        WlanClient client = new WlanClient();

        foreach (WlanClient.WlanInterface wlanIface in client.Interfaces)
        {
            string str = "Name=" + wlanIface.InterfaceName + ". State: ";

            switch (wlanIface.InterfaceState)
            {
                case Wlan.WlanInterfaceState.NotReady:
                    str += "NotReady";
                    break;

                case Wlan.WlanInterfaceState.Disconnected:
                    str += "Disconnected";
                    break;

                case Wlan.WlanInterfaceState.Disconnecting:
                    str += "Disconnecting";
                    break;

                case Wlan.WlanInterfaceState.Connected:
                    str += "Connected";
                    break;
            }

            wlanIface.WlanConnectionNotification += wlanConnectionChangeHandler;
            MessageBox.Show(str + ". Listener registered");
        }
    }

    private void unregisterWlanListener()
    {
        WlanClient client = new WlanClient();

        foreach (WlanClient.WlanInterface wlanIface in client.Interfaces)
        {
            wlanIface.WlanConnectionNotification -= wlanConnectionChangeHandler;
            MessageBox.Show(wlanIface.InterfaceName + ". Listener unregistered");
        }
    } 
```

一开始，我调用 registerWlanListener，在停止我的应用程序之前，我调用 unregisterWlanListener()。我通过多次连接/断开wifi连接并尝试观察通知，在win7和win8平板电脑上测试了我的桌面应用程序。这些是两个平台上的问题：

1.  大多数时候，我的 wlanConnectionChangeHandler 在 wifi 连接/断开时被调用，一切正常。但是，在某些情况下，它根本不会被调用。什么会导致这种情况？我注意到在最初错过的通知之后，即使我继续连接/断开 wifi 连接，我也根本无法收到任何进一步的通知。

2.  在不同的情况下，即使我删除了事件处理程序，我仍然会收到通知。我在删除这些事件处理程序时遗漏了什么吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:58:27.910

显然，当我编写此代码时，我并没有清楚地思考。问题是我的 WlanClient 客户端的本地范围。通过使其成为全局变量并仅实例化一次来修复它。/掌脸

# php - 绕过 DNS 服务器向特定服务器请求域

> ID：14350122
> 
> 赞同：2
> 
> 时间：2013-01-16T01:38:12.090
> 
> 标签：php, apache, redirect, dns

我有一个超出我专业领域的特殊情况，我是一名 PHP 开发人员而不是网络管理员。

客户想要在我建立的新网站和竞争对手建立的旧网站之间进行拆分测试。所有流量都将发送到现有 url (a.com)。我可以访问客户的 a.com 的 godaddy 帐户，并且流量通过 A-Record 发送到我*无权*访问的服务器。可以理解，老站长不会做任何事情来帮助我的事业。

因此，我相信我需要更改域上的 a-record 以指向我自己的服务器。但是我如何将 50% 的流量发送到旧服务器？如果我直接导​​航到 A-Record 上的 IP 地址，则该网站不会出现，我认为是因为服务器只知道在请求以 a.com 形式进入时使用虚拟主机。因此，我需要更改 A 记录，然后将流量发送到请求此服务器的 IP 地址……我需要为收到的 50% 的点击量执行此操作。我不确定我是否可以使用 php header() 来做到这一点......我根本不知道该怎么做。

欢迎任何建议......我绞尽脑汁但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:57:49.790

是否有用户访问您的网站版本？

如果您有权访问 a 记录，则实际上可以添加两个 a 记录。

```
@ IP1
@ IP2 
```

让 DNS 来做这件事。

**编辑**

或者正如其他用户所说，apache负载处理可以解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:01:15.230

如果您可以将 DNS 移至您有权访问的服务器。DNS Round Robbin 可能是实现此目的的一种粗略方法。设置 2 条记录，每台服务器一条记录将在解析域时自动交替。我没有在两台服务器上尝试过完全不同的内容，但它可能值得测试

# python - 调用 Twitter API 时无法使用 Python 获取 URL 内容

> ID：14350124
> 
> 赞同：0
> 
> 时间：2013-01-16T01:38:26.823
> 
> 标签：python, json, google-app-engine, twitter, urllib2

我正在尝试调用 Twitter API 以获取 JSON，但似乎无法获取 JSON。如果我将代码中的 URL 替换为“https://mashable.com”，我可以阅读响应。我可以使用 CURL 读取 PHP 中的响应。我正在使用 Python 2.7，Google App Engine。我对 Python 很陌生。你能看出我哪里错了吗？这是我的代码：

```
import jinja2
import os
import webapp2
import urllib2

template_env = jinja2.Environment(
    loader=jinja2.FileSystemLoader(os.getcwd()))

class MainPage(webapp2.RequestHandler):
    def get(self):
        template = template_env.get_template('home.html')
        self.response.out.write(template.render())

class Get_data(webapp2.RequestHandler):
    def get(self):
        response = urllib2.urlopen('https://api.twitter.com/1/favorites.json?count=5&screen_name=episod')
        html = response.read()
        print(html)

application = webapp2.WSGIApplication([('/', MainPage),('/get_data', Get_data)],debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:50:27.133

获取数据中的代码有效，但您尝试打印而不是在页面上输出它。使用**self.response.out.write(str(html))**来测试它（顺便说一句，它的 JSON 数据不是 html）。然后创建一个模板，您可以在其中呈现响应。

```
from django.utils import simplejson as json

class Get_data(webapp2.RequestHandler):
    def get(self):
        response = urllib2.urlopen('https://api.twitter.com/1/favorites.json?count=5&screen_name=episod')
        data = response.read()
        json_data = json.loads(data)

        template_values = {
            'param1': json_data["..."],
            'param2': json_data["..."],
        }

        template = jinja_environment.get_template(TEMPLATE)
        self.response.out.write(template.render(template_values)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:43:52.203

你得到的回应是什么？我猜 appengine 服务器已经达到 Twitter API 速率限制。

您可能需要考虑使用完整的 Oauth2 版本的 twitter API 来获得您自己的限速帐户。查看 tweepy 以获得良好的 python 客户端：[https ://github.com/tweepy/tweepy](https://github.com/tweepy/tweepy)

# css - 悬停时过渡颜色褪色？

> ID：14350126
> 
> 赞同：56
> 
> 时间：2013-01-16T01:38:46.267
> 
> 标签：css

我试图`h3`让它在悬停时消失。有人可以帮我吗？

HTML

```
<h3 class="clicker">test</h3> 
```

CSS

```
.clicker {
    -moz-transition:color .2s ease-in;
    -o-transition:color .2s ease-in;
    -webkit-transition:color .2s ease-in;
    background:#f5f5f5;padding:20px;
}

.clicker:hover{
    background:#eee;
} 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-01-16T01:44:51.017

你想淡化什么？`background`or`color`属性？

目前您正在更改背景颜色，但告诉它转换颜色属性。您可以使用`all`来转换所有属性。

```
.clicker { 
    -moz-transition: all .2s ease-in;
    -o-transition: all .2s ease-in;
    -webkit-transition: all .2s ease-in;
    transition: all .2s ease-in;
    background: #f5f5f5; 
    padding: 20px;
}

.clicker:hover { 
    background: #eee;
} 
```

否则只需使用`transition: background .2s ease-in`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-23T15:00:45.900

为了具有像荧光笔这样的过渡效果，只是为了突出显示文本并淡出背景颜色，我们使用了以下内容：

```
.field-error {
    color: #f44336;
    padding: 2px 5px;
    position: absolute;
    font-size: small;
    background-color: white;
}

.highlighter {
    animation: fadeoutBg 3s; /***Transition delay 3s fadeout is class***/
    -moz-animation: fadeoutBg 3s; /* Firefox */
    -webkit-animation: fadeoutBg 3s; /* Safari and Chrome */
    -o-animation: fadeoutBg 3s; /* Opera */
}

@keyframes fadeoutBg {
    from { background-color: lightgreen; } /** from color **/
    to { background-color: white; } /** to color **/
}

@-moz-keyframes fadeoutBg { /* Firefox */
    from { background-color: lightgreen; }
    to { background-color: white; }
}

@-webkit-keyframes fadeoutBg { /* Safari and Chrome */
    from { background-color: lightgreen; }
    to { background-color: white; }
}

@-o-keyframes fadeoutBg { /* Opera */
    from { background-color: lightgreen; }
    to { background-color: white; }
}
```

```
<div class="field-error highlighter">File name already exists.</div>
```

# android - 我应该如何在我的 Android 应用程序中构建数据库访问方法？

> ID：14350129
> 
> 赞同：0
> 
> 时间：2013-01-16T01:38:56.523
> 
> 标签：android, database, sqlite, sqliteopenhelper

我正在开发一个具有 14-15 个表的数据库的 Android 应用程序。我显然想访问这些表以进行查询、插入、删除等。

我是否应该创建一个可以打开数据库的助手，然后创建一个可以访问它并按照我的计划查询它的适配器？或者为每张桌子做一个助手？

我对这一点感到困惑。第一个选项对我来说似乎更现实，因为我不需要多次打开数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:14:19.960

创建一个类，扩展自每个类，`SQLiteOpenHelper` 并为每个类创建方法。一种用于插入，一种用于删除，一种用于更新，一种用于检索 ResultSet。这是一个例子：

```
public class Db extends SQLiteOpenHelper {
    static final int    version=1;
    static final String dbName="phoneBook";
    static final String dbtable="data";
    Context cont;

    public Db(Context context) 
    {
        super(context, dbName, null, version);
        cont = context;
    }

    public void onCreate(SQLiteDatabase db) 
    {
        try {
            String sql = "CREATE TABLE "+dbtable+" (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, phone TEXT)";
            db.execSQL(sql);
        } catch (SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
    }

    public void addContact(String name, String number) 
    {
        try 
        {
            SQLiteDatabase db = getWritableDatabase();
            String sql = "INSERT INTO "+dbtable+" VALUES(NULL,'"+name+"', '"+number+"')";
            db.execSQL(sql);
            db.close();
        } catch (SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
    }
    public void updateContact(int sid, String name, String number) {
        try {
            SQLiteDatabase db = getWritableDatabase();
            String sql = "UPDATE "+dbtable+" SET name = '"+name+"', phone = '"+number+"' WHERE id = "+sid;
            db.execSQL(sql);
            db.close();
        } catch (SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
    }
    public ArrayList<String> getContactByPhone(String number) {
        try {
            SQLiteDatabase db=this.getReadableDatabase();
            ArrayList<String> al = new ArrayList<String>();
            Cursor cur = db.rawQuery("SELECT * from "+dbtable+" WHERE phone like '%"+number+"%'",null);
            while(cur.moveToNext())
                al.add(cur.getInt(0)+","+cur.getString(1)+","+cur.getString(2));
            db.close();
            return al;
        } catch(SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
        return null;
    }

    public ArrayList<String> getContactByName(String sname) {
        try {
            SQLiteDatabase db=this.getReadableDatabase();
            ArrayList<String> al = new ArrayList<String>();
            Cursor cur = db.rawQuery("SELECT * from "+dbtable+" WHERE name like '%"+sname+"%'",null);
            while(cur.moveToNext())
                al.add(cur.getInt(0)+","+cur.getString(1)+","+cur.getString(2));
            db.close();
            return al;
        } catch(SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
        return null;
    }

    public ArrayList<String> getAllContact() {
        try {
            SQLiteDatabase db=this.getReadableDatabase();
            ArrayList<String> al = new ArrayList<String>();
            Cursor cur = db.rawQuery("SELECT * from "+dbtable,null);
            while(cur.moveToNext())
                al.add(cur.getInt(0)+","+cur.getString(1)+","+cur.getString(2));
            db.close();
            return al;
        } catch(SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
        return null;
    }

    public void deleteContact(int sid) {
        try {
            SQLiteDatabase db = getWritableDatabase();
            String sql = "DELETE FROM "+dbtable+" WHERE id = "+sid;
            db.execSQL(sql);
            db.close();
        } catch (SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
    }

    public void deleteData() {
        try {
            SQLiteDatabase db = getWritableDatabase();
            db.execSQL("DELETE FROM "+dbtable);
            db.close();
        } catch (SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
    }

    public void showAll() {
        try {
            SQLiteDatabase db = getReadableDatabase();
            Cursor cur = db.rawQuery("SELECT * from "+dbtable, null);
            while(cur.moveToNext())
                Toast.makeText(cont, cur.getString(1)+" "+cur.getString(2), Toast.LENGTH_LONG).show();
            db.close();
        } catch (SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
    }

    public int getCount() {
        int total = 0;
        try {
            SQLiteDatabase db = getReadableDatabase();
            Cursor curs = db.rawQuery("SELECT * FROM "+dbtable+" WHERE 1",null);
            total = curs.getCount();            
            db.close();
        } catch (SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
        return total;
    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        try {
            db.execSQL("DROP TABLE IF EXISTS "+dbtable);
            onCreate(db);
        } catch (SQLException e) {
            Toast.makeText(cont, e.toString(), Toast.LENGTH_LONG).show();
        }
    }

} 
```

`

# macos - 当相同的命令通过终端运行时，expect spawn 调用的脚本未运行

> ID：14350135
> 
> 赞同：1
> 
> 时间：2013-01-16T01:40:12.703
> 
> 标签：macos, bash, shell, automation, expect

我对这个期望的东西还有另一个问题。我已经尝试了八种方法到星期天来让它工作，但似乎无法弄清楚。基本上，我想要么在期望生成过程中“调用脚本”，要么弄清楚如何调用 sudo，然后运行一组 Mac CLI 命令作为提升的提示。

以下是我要运行的命令（它们需要以管理员身份运行）：

```
#!/bin/bash

networksetup -setdnsservers "Ethernet" 172.xxx.xxx.xxx;
networksetup -setsearchdomains "Ethernet" "congo.test"; 
```

我将此文件命名为“change.sh”

基本上，我想在运行我现在正在使用的主安装脚本之前先设置一些网络接口。

这是我所拥有的似乎不起作用的东西，但是，当直接在命令行上调用时，它可以找到：

```
expect -c "
set password \"foobar\"
spawn su root -c \"/bin/bash change.sh\"
expect \"Password:\"
send \"\$password\r\"
" 
```

现在，我知道我可以传入一个 argv，我很可能会在最终运行时这样做，但这不起作用，它实际上似乎从未触发脚本并运行网络更改。如果我运行：

```
%> su root -c ./change.sh 
```

这行得通。但是，它在期望脚本中不起作用。

我有另一个脚本，称为“install.sh”，它适用于上面的以下代码：

```
spawn su root -c \"/bin/bash install.sh\"
expect \"Password:\"
send \"\$password\r\"
" 
```

这完美地工作。

两个问题：

1.  我可以在主脚本中调用那些networksetup cli吗？如果是这样，为什么不调用这个“change.sh”脚本？
2.  对于“install.sh”脚本，spawn 以 root 身份成功触发并且效果很好，它们看起来完全一样

我确定这是我遇到的一个愚蠢的问题，需要在某个地方解决一些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T19:50:28.773

奇怪的是，这有效：

```
#!/bin/bash

cd /Users/wqcoleman/Desktop/

expect -c "
set password \"william1\"
spawn su root -c \"/bin/bash /Users/wqcoleman/Desktop/change.sh\"
expect \"Password:\"
send \"\$password\r\"
interact
" 
```

在片段结束时进行交互。不知道为什么？也许有人可以为我回答这个问题，但显然交互与“时间”有关？或者也许是 change.sh 中的步骤的执行？无论如何，它奏效了。

# javascript - 将刻度转换为时间格式 (hh:mm:ss)

> ID：14350148
> 
> 赞同：11
> 
> 时间：2013-01-16T01:42:30.117
> 
> 标签：javascript, html, time

我从网络服务器获取视频长度值作为滴答声。我想以“hh:mm:ss”格式显示它。如何在 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T01:46:01.143

假设刻度以秒为单位（如果不是，您可以先将它们转换为秒），您可以通过查找时间跨度中的整分钟和小时数来获得所需的格式，然后计算剩余的秒数。[模](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Remainder_())运算符在这里很有用，因为一小时是 3600 秒，一分钟是 60 秒：

```
function displayTime(ticksInSecs) {
    var ticks = ticksInSecs;
    var hh = Math.floor(ticks / 3600);
    var mm = Math.floor((ticks % 3600) / 60);
    var ss = ticks % 60;

    alert( pad(hh, 2) + ":" + pad(mm, 2) + ":" + pad(ss, 2) );
}

function pad(n, width) {
    var n = n + '';
    return n.length >= width ? n : new Array(width - n.length + 1).join('0') + n;
} 
```

有关如何在 JS 中用前导零填充数字，请参阅[此答案](https://stackoverflow.com/a/10073788)（上述方法源自此答案）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-18T11:20:13.027

这是一个老问题，但我对任何答案都不满意。

## 这里有3个问题：

*   将刻度大小转换为秒
*   从持续时间（以秒为单位）中提取小时、分钟和秒
*   将数字格式化为 2 位数字

## 第 1 部分 - 蜱虫

媒体[的刻度大小有很多持续时间](https://codesequoia.wordpress.com/2008/11/30/tick-frequency-for-media-processing/)，因此需要做出一些假设才能回答这个问题。

由于所需的答案是以秒、分钟和小时为单位的，因此第一步是将“滴答”值转换为秒。

```
 seconds = ticks / tickspersecond 
```

例如，如果刻度以毫秒为单位，那么转换将是

```
 seconds = ticks / 1000 
```

## 第 2 部分 - 提取小时、分钟和秒

*   `hour = seconds / secondsperhour`=>`hour = seconds / 3600`
*   `minute = seconds / secondsperminute modulus minutesperhour`=>`minute = (seconds / 60) % 60)`
*   `second = seconds modulus secondsperminute`=>`second = seconds % 60`

## 第 3 部分 - 格式化

*   有多种方法可以格式化数字的前导零，这一种将使用特定于该示例的简单函数（最多 2 位数字）。

例如

```
function pad2(number){
   number = '0' + number;
   return number.substr(number.length - 2);
} 
```

注意：由于浮点错误，您需要将 Math.floor 应用于小时和分钟值。如果要缩短主代码，可以放入`Math.floor`该函数。`pad2`

## 最后的答案变成：

```
// Assume milliseconds for now
var seconds = ticks / 1000; 
var hour = Math.floor(seconds / 3600);
var minute = Math.floor((seconds / 60) % 60);
var second = seconds % 60;

var result = pad2(hour) + ':' + pad2(minute) + ':' + pad2(second) 
```

注意：为了演示，我在小时显示中添加了`% 24`( `modulus hoursperday`)，因为自 1971 年以来的小时是一个“大”数字 - 所以不会格式化为 2 位小数 :)

**JSfiddle 演示：** [https ://jsfiddle.net/TrueBlueAussie/x2s77gzu/](https://jsfiddle.net/TrueBlueAussie/x2s77gzu/)

或者如果你想`Math.floor`放入`pad2` [https://jsfiddle.net/TrueBlueAussie/x2s77gzu/1/](https://jsfiddle.net/TrueBlueAussie/x2s77gzu/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-06T16:36:15.783

假设刻度是 javascript 格式（自 1970 年 1 月 1 日午夜以来的毫秒数）：

```
var date = ticks.toISOString(); // gives e.g. 2015-10-06T16:34:23.062Z
var time = date.substring(11,19);  // 16:34:23 
```

[http://www.w3schools.com/jsref/jsref_toisostring.asp](http://www.w3schools.com/jsref/jsref_toisostring.asp)

编辑： [![在此处输入图像描述](../Images/495ea390246c033550a27cc7f057d9fc.png)](https://i.stack.imgur.com/egS9m.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-17T09:31:43.153

您将需要以下代码：

```
//define ticks
var ticks = {...};

//get seconds from ticks
var ts = ticks / 1000;

//conversion based on seconds
var hh = Math.floor( ts / 3600);
var mm = Math.floor( (ts % 3600) / 60);
var ss = (ts % 3600) % 60;

//prepend '0' when needed
hh = hh < 10 ? '0' + hh : hh;
mm = mm < 10 ? '0' + mm : mm;
ss = ss < 10 ? '0' + ss : ss;

//use it
var str = hh + ":" + mm + ":" + ss;
console.log(str); 
```

# java - 如何将多个罐子合二为一？

> ID：14350150
> 
> 赞同：12
> 
> 时间：2013-01-16T01:42:43.517
> 
> 标签：java, eclipse, netbeans, jar, applet

我已经阅读了很多关于此的文章/解释并且花费了太多时间，但是一切都太宽泛或太具体了。

这个问题实际上只适用于我制作的 Applet。它包含一个类，并需要 2 个其他 Jar 库。我已经将这些包含在项目中（多个项目，因为我已经在 Netbeans 和 Eclipse 中尝试过这个......重新创建一个类项目很容易）。这一切的重点是我的 HTML/web 项目不应该处理多个 Jar 或引用它们。这也不是一个复杂的小程序/项目。

最初，我是在 Netbeans 中制作的。它有主包，添加 2 个罐子后，它们被放在“库”区域（“资源”文件夹）中。在构建它之后，Netbeans 为我的一个包/类创建一个 Jar，然后将其他 2 个库放在它旁边的“lib”目录中。我希望它们在一个可分发的 Jar 中。从我看过的许多事情中，我尝试将以下内容放入 build.xml：

```
<target name="YourBigJar" depends="-post-jar">
  <jar destfile="dist/BigJar.jar">
    <zipfileset src="dist/cxapplet.jar"/>
    <zipfileset src="resources/dpotapi.jar"/>
    <zipfileset src="resources/dpotjni.jar"/>
  </jar>
</target> 
```

但它什么也没产生。我从[NetBeans 获得了这个 - 将所有内容部署在一个 jar 中](https://stackoverflow.com/questions/2212913/netbeans-deploying-all-in-one-jar)。我不知道/理解如何使用 build.xml，所以如果出现问题（显然）我不会感到惊讶，但我没有收到错误/警告消息。

当我在 Eclipse 中创建它时，它有效地结合了它们，但是当我在我的实际 Web 项目中使用 Jar 时，它说它无法从其他 2 个 Jar 中找到类。我不明白如何解决它，但这是一个类路径问题吗？在 Eclipse 中，我创建了一个名为“lib”的新目录并将 Jars 放入其中。然后，我右键单击该项目，转到“Java Build Path”，然后添加 Jars，同时在“Order and Export”选项卡下检查它们。根据我阅读的内容，我右键单击项目，选择“导出”，选择“Jar”，取消选中“.classpath”和“.project”文件，只选中“导出生成的类文件和资源”，然后允许它生成清单文件。就像我说的，这会生成一个 Jar，但它的内容是我的包，然后是一个“lib” 具有其他 2 个罐子的目录。Manifest 在那里，但它很空，并且没有引用任何文件（不确定这是否重要）。当我把它放在我的网络应用程序中时，它说小程序找不到其他类。

它看起来很简单——一个包/类，两个外部罐子......当构建为作为小程序分发时组合成一个罐子。有任何想法吗？

**更新：**

自从我们开始使用 Maven 以来，有人研究使用 Maven 插件。所以我们最终创建了一个新项目来容纳小程序（因为它在多个项目中使用），并在我们的`pom.xml`中使用它，最后：

```
<build>
  <resources>
    <resource>
      <directory>${basedir}/applet</directory>
      <excludes>
        <exclude>codesignstore</exclude>
      </excludes>
    </resource>
    <resource>
      <directory>${basedir}/src/main/resources</directory>
      <filtering>true</filtering>
    </resource>
  </resources>
  <plugins>
    <plugin>
      <artifactId>maven-assembly-plugin</artifactId>
      <version>2.2-beta-5</version>
      <configuration>
        <descriptorRefs>
          <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        <finalName>cxapplet</finalName>
        <archive>
          <index>true</index>
          <manifest>
            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
          </manifest>
        </archive>
        <appendAssemblyId>false</appendAssemblyId>
      </configuration>
      <executions>
        <execution>
          <id>make-my-applet-jar</id>
          <phase>package</phase>
          <goals>
            <goal>single</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jarsigner-plugin</artifactId>
      <version>1.2</version>
      <executions>
        <execution>
          <id>sign</id>
          <goals>
            <goal>sign</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <keystore>${basedir}/applet/codesignstore</keystore>
        <alias>codesigncert</alias>
        <storepass>HIDDEN</storepass>
        <keypass>HIDDEN</keypass>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

这很好，因为它允许我们使用我们的代码签名证书来自动签名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T03:05:36.717

首先，让我说真的没有理由合并 jar - 您可以使用您的类文件（不在 jar 中）及其单独的依赖 jar 部署小程序。

但是，如果您觉得必须从您的类及其所有依赖项中创建一个大 jar，那么您可以这样做。

但是，您不能将 jar 文件放入另一个 jar 文件中 - jar 文件不能那样工作。您需要的是提取所有 jar 文件的所有内容，然后再次压缩到一个 jar 中。

如果你打算这样做，我建议使用[Maven](http://maven.apache.org/)构建工具来完成。使用 Maven 设置构建后，您可以配置[Maven 程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/)来为您构建一个大 jar。

我知道 Eclipse 支持 Maven，并且我假设 NetBeans 也支持。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T02:24:38.363

从您的 bin 目录的基础上，为什么不尝试：

```
jar.exe -cvf cxapplet.jar * 
```

将外部 jar 文件放在`bin`目录中的适当位置，并使用外部 jar 文件手动 jar 类文件。

或者，请参阅[此线程](https://stackoverflow.com/questions/81260/easiest-way-to-merge-a-release-into-one-jar-file)，它可能会为您提供更多信息。

# gnu-make - Gnu 从脚本和 shell 中创建不同的退出状态

> ID：14350152
> 
> 赞同：0
> 
> 时间：2013-01-16T01:42:53.983
> 
> 标签：gnu-make, bazaar

基本代码：

```
def make_check(local, master, old_revno, old_revid, future_revno, future_revid,
    tree_delta, future_tree):
    try:
        check_call('make check', shell=True)
    except CalledProcessError as e:
        raise BzrError(e) 
```

结果：bzr：错误：命令“make check”返回非零退出状态 2

我有一个包含“检查”目标的 Makefile，其中运行一些脚本以检查所有源代码是否具有有效的语法。

如果我`make check`从控制台运行，它的状态为 0。

如果我`make check`从 Bazaar 中的预提交挂钩运行，它的状态为 2。

我进行了一些深入的调查，包括检查环境变量（基本上相同）并`strace`针对这两种方法运行。

在这两种情况下，脚本的输出是相同的，但是在 precommit 钩子的情况下，退出状态是 2 没有任何解释我可以辨别，因为它调用的最后一个进程的退出状态为零并且没有其他外部系统调用。有没有我忽略的东西，或者可能是内部错误的一些机会`make`？

## 安慰

```
16436 execve("/usr/bin/make", ["make", "check"], [/* 22 vars */]) = 0
#Big snip
16947 execve("/bin/sh", ["/bin/sh", "-c", "find archive/rpm/6 -name '*.rpm' -printf '%f\\n' | rev | cut -d- -f3- | rev | sort | uniq -c | grep -v '^ *1 ' &&  \\\n{ echo \"ERROR: Found duplicate RPMs in archive.\"; exit 1; } || true"], [/* 35 vars */]) = 0
#Big snip
16948 exit_group(0)                     = ?
16947 <... wait4 resumed> [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 16949
16947 --- SIGCHLD (Child exited) @ 0 (0) ---
16947 rt_sigreturn(0x11)                = 16949
16947 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 16948
16947 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 16950
16947 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 16951
16947 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 16952
16947 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 16953
16947 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 1}], 0, NULL) = 16954
16947 exit_group(0)                     = ?
16436 <... wait4 resumed> [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 16947
16436 --- SIGCHLD (Child exited) @ 0 (0) ---
16436 rt_sigreturn(0xffffffff)          = 16947
16436 rt_sigprocmask(SIG_BLOCK, [HUP INT QUIT TERM XCPU XFSZ], NULL, 8) = 0
16436 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
16436 chdir("/code/n/branches/jeff")    = 0
16436 close(1)                          = 0
16436 munmap(0x7f7ed780e000, 4096)      = 0
16436 exit_group(0) 
```

## 脚本

```
14001 execve("/usr/bin/make", ["make", "check"], [/* 21 vars */]) = 0
#Big snip
14525 execve("/bin/sh", ["/bin/sh", "-c", "find archive/rpm/6 -name '*.rpm' -printf '%f\\n' | rev | cut -d- -f3- | rev | sort | uniq -c | grep -v '^ *1 ' &&  \\\n{ echo \"ERROR: Found duplicate RPMs in archive.\"; exit 1; } || true"], [/* 34 vars */]) = 0
#Big snip
14526 exit_group(0)                     = ?
14525 <... wait4 resumed> [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 14527
14525 --- SIGCHLD (Child exited) @ 0 (0) ---
14525 rt_sigreturn(0x11)                = 14527
14525 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 14526
14525 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 14528
14525 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 14529
14525 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 14530
14525 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 14531
14525 wait4(-1, [{WIFEXITED(s) && WEXITSTATUS(s) == 1}], 0, NULL) = 14532
14525 exit_group(0)                     = ?
14001 <... wait4 resumed> [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 14525
14001 --- SIGCHLD (Child exited) @ 0 (0) ---
14001 rt_sigreturn(0xffffffff)          = 14525
14001 rt_sigprocmask(SIG_BLOCK, [HUP INT QUIT TERM XCPU], NULL, 8) = 0
14001 rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0
14001 chdir("/code/n/branches/jeff")    = 0
14001 close(1)                          = 0
14001 munmap(0x7f064aa7b000, 4096)      = 0
14001 exit_group(2)                     = ? 
```

## 更新

我将以下目标附加到我的 Makefile 中：

```
.PHONY: foobar

foobar:
        echo "Testing foobar" 
```

当通过 pre-commit 钩子脚本调用时，此目标还会导致 make 进程以错误状态 2 退出，同时手动执行仍然成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:40:11.710

这本质上是一个 Makefile Inception 问题。`bzr`已启动`make`，其中包含许多 Makefile，其中一些已构建，其中一个依赖于`bzr`无法获得锁定的命令，因为另一个 bzr 进程持有它。由于它是从一个包含启动并对其进行了 FORCE 设置，因此从运行时它总是会导致任何目标失败`bzr`，但并不明显，因为它没有`make`像大多数错误那样停止命令。

# c# - RESTful .net - 没有 Content-Type 的 POST

> ID：14350157
> 
> 赞同：0
> 
> 时间：2013-01-16T01:43:27.807
> 
> 标签：c#, .net, json, rest

是否可以让 Web 服务接受没有内容类型标头的 json 格式的请求？

当我传递 Content-type: application/json 标头时，POST 动词效果很好。如果不这样做，则会引发 400 错误。我在这里遇到了很多问题，询问他们为什么要退回 400，答案是内容类型。那么服务器端是否可以代表用户“填写”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:48:16.463

如果没有某种内容标头来告诉它如何解释请求，则默认 .NET webstack 不可能这样做。如果您想进入 ASP.NET 堆栈的内部（您可以使用反射器应用程序，例如 ILSpy），您可能会找到一个拦截点，但您很可能必须进行一些自定义 IIS 集成才能获取该模块拦截请求，甚至可能在涉及 ASP.NET 堆栈之前。

对于大多数人来说，让 JSON 请求应用程序引入标头要容易得多。

此外，我鼓励你开始学习如何使用 Reflector 来探索这些堆栈是如何工作的，它们确实很复杂，而且很大，而且可扩展性很高，但代价是工程成本（现在大胆猜测说没有经验的 IIS 开发人员需要大约 50 小时设计这种技术，如果它可以巧妙地完成）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:11:12.717

您使用的是 WebAPI 还是 ASP.NET MVC？我有一个解决方案给你，尽管有些人可能会对我大喊大叫。

*   您可以创建一个属性，尝试将请求的主体反序列化为您正在寻找的特定操作的对象。如果它有效，那么您可以使用 RequestContext 将其传递给参数列表。我不知道你需要设置哪些确切的属性，但我记得在 ASP.NET MVC 中做了一些非常相似的事情。

希望有帮助。

PS 使用 JSON.Net，它有很多有用的反序列化方法，这将使这变得轻而易举。

# signalr - SignalR 1.0 beta 连接工厂

> ID：14350158
> 
> 赞同：4
> 
> 时间：2013-01-16T01:43:40.300
> 
> 标签：signalr

现在新版本的 SignalR 已经取消了 IConnectionFactory 接口，建议使用什么模式来设置客户端的连接 ID？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T03:19:52.610

在 1.0 中不再有任何推荐的模式来设置 SignalR 客户端的连接 ID。

最佳做法是在 SignalR 服务器上维护将应用程序的用户映射到连接 ID 的状态。在此地图中添加连接 ID 的明显位置是 OnConnected。您可以使用 OnDisconnected 删除连接 ID。

也可以在 OnConnected 中完成的另一个选项是将客户端的连接 ID 添加到具有您之前在 IConnectionIdFactory.CreateConnectionId 中为客户端创建的名称的组中。自然，该组将只包含一个客户端，因此您可以将您发送到自定义连接 ID 的所有消息发送到该组。

注意：如果您使用映射选项，如果您担心 AppDomain 重新启动并且将此状态存储在某种静态变量而不是更持久的东西中，您也可以尝试在 OnReconnected 中将连接 ID 添加到映射。显然，如果您要扩展 SignalR，您将需要共享状态。

# windows - 有没有办法在没有安装的情况下在 Windows 上安装 Haskell？（复制+粘贴）

> ID：14350161
> 
> 赞同：13
> 
> 时间：2013-01-16T01:43:59.190
> 
> 标签：windows, haskell, compiler-construction, ide

我正在学校提供的计算机上编程。我需要一个不需要安装的 Haskell 设置（我可以放在闪存驱动器上并复制到 C 驱动器，或者只是从闪存驱动器使用）。

我已经启动并运行了 Eclipse，所以如果我可以在 Eclipse 上安装它，而不会对 Eclipse 目录之外的系统产生任何影响，那也很好。

没有安装，我的意思是我必须能够在没有任何卸载工具的情况下轻松删除程序和几乎所有的痕迹。所有卸载程序工具都可能被阻止。

我有哪些选择？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-16T02:20:24.283

[Haskell Platform](http://www.haskell.org/platform/)的 Windows 安装程序（我是它的维护者）有一个“便携式安装”选项，它只是将文件提取到给定位置，而不涉及注册表或任何系统设置。您可以使用它将 Haskell Platform 安装到您的闪存驱动器，但您需要手动将 GHC 的位置添加到 PATH 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-27T10:02:00.083

我来自未来。[正如Mikhail Glushenkov 所说](https://stackoverflow.com/questions/14350161/is-there-a-way-to-get-a-haskell-setup-on-windows-without-an-installation-copy#14350419)，我正在使用[Haskell Platform](http://www.haskell.org/platform/)的 Windows 安装程序。

> 那么您将不得不更改计算机设置吗？– 派鲁莱兹

您还可以使用`CMD.exe`'`SET`命令设置环境变量。（这些天他们教你什么孩子？）一旦你`PATH`像这样设置（或其他），该值将持续存在于该会话和任何子会话。如果你从 shell 启动一个 IDE - 它应该有这些设置（除非有以前的实例......也许）所以它应该在你给出的约束内工作。我建议您将其保存到`.bat`文件中

**TL：博士**；提取等人旁边的[Haskell 平台](http://www.haskell.org/platform/)创建并将其粘贴到其中；`shell.bat``bin/` `lib/`

```
@ECHO OFF
SET PATH=%~dp0/bin;%PATH%
CMD /K 
```

现在运行`shell.bat`，该提示将能够找到 Haskell。由于您可以随身`shell.bat`携带 - 插入新的实验室机器并开始工作应该更容易

# mongodb - ubuntu 服务器上 pecl 的问题

> ID：14350163
> 
> 赞同：0
> 
> 时间：2013-01-16T01:44:20.833
> 
> 标签：mongodb, pecl

我无法在我的 Ubuntu 12 服务器中安装任何 pecl。这里的错误：

```
$ sudo pecl install mongo
downloading mongo-1.3.2.tgz ...
Starting to download mongo-1.3.2.tgz (120,931 bytes)
..........................done: 120,931 bytes
49 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
configure.in:36: error: AC_REQUIRE_AUX_FILE: requires a literal argument
aclocal.m4:124: PHP_CANONICAL_HOST_TARGET is expanded from...
aclocal.m4:1980: PHP_SHLIB_SUFFIX_NAMES is expanded from...
configure.in:36: the top level
autom4te: /usr/bin/m4 failed with exit status: 1
If the command failed with 'phpize: not found' then you need to install php5-dev packageYou can do it by running 'apt-get install php5-dev' as a root userERROR: `phpize' failed 
```

我已经安装了 php5-dev、m4 和 phpize 我也尝试手动安装 mongo 驱动程序并发生同样的错误。在 configure.in 的第 36 行，我们有： PHP_SHLIB_SUFFIX_NAMES

我的 PHP 版本：带有 Suhosin-Patch (cli) 的 PHP 5.3.10-1ubuntu3.4（构建时间：2012 年 9 月 12 日 18:59:41）

# javascript - Internet Explorer 10：$(window).load 不等待自定义字体。

> ID：14350177
> 
> 赞同：2
> 
> 时间：2013-01-16T01:45:49.190
> 
> 标签：javascript, onload, webfonts, internet-explorer-10

我在 IE10 中遇到了调用 JavaScript 函数的问题，该函数应该在加载自定义字体后发生。在 IE9 和 IE8 中，将调用包装在 $(window).load 中会阻止调用在加载字体之前执行。但是，在 IE10 中，调用仍在事件上执行，但字体尚未加载。有人对可能发生的事情有建议吗？预先感谢您的帮助。

```
(function() {
    var resizeAndAttachHandlers = function (context) {
        // This code gets executed before fonts are loaded 
    };

    namespace('$.mynamespace').initialize() {
        $(window).load(function (context) {
            resizeAndAttachHandlers(context);
        });
    };
})(); 

$(document).ready(function() {
    $.mynamespace.initialize({
        .
        .
        .
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T22:15:12.237

# 谷歌网络字体 API

如果您的字体是从 Google Web Fonts API、TypeKit、Ascender、Fonts.com 或 Fontdeck 加载的，那么您可以使用 Google WebFont Loader [https://developers.google.com/webfonts/docs/webfont_loader](https://developers.google.com/webfonts/docs/webfont_loader)

加载器具有您可以响应的特定事件[https://developers.google.com/webfonts/docs/webfont_loader#Events](https://developers.google.com/webfonts/docs/webfont_loader#Events)听起来您会对`fontactive`指示网络字体何时完成加载的回调感兴趣。

```
var WebFontConfig = {
    google: {
        families: [ "Tangerine", "Cantarell" ]
    },
    fontactive: function( fontName ) {
        console.log( "The font has loaded!", fontName );
    }
};
(function() {
    var webFont = document.createElement( "script" ), script;

    webFont.src = "//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";
    webFont.async = "true";

    script = document.getElementsByTagName( "script" )[ 0 ];
    script.parentNode.insertBefore( webFont, script );
})(); 
```

[您可以从以下 jsFiddle http://jsfiddle.net/wE2W5/](http://jsfiddle.net/wE2W5/)运行上述代码

# 字体检测库

如果这对您来说似乎很沉重，那么您可以考虑使用fontdetect 库[http://www.atomicjetpacks.com/blog/8](http://www.atomicjetpacks.com/blog/8)

```
$( document ).ready( function() { 
    fontDetect.onFontLoaded( "MyCustomFont", 
        function fontLoaded() {
            console.log( "The font has loaded!" );
        }, 
        function fontError() {}, 
        { msTimeout: 3000 } );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-08T11:47:52.923

尝试使用 `window.onload = function() {}`

# windows-phone-8 - 手机上的 Debug.Assert UI 对话框

> ID：14350179
> 
> 赞同：1
> 
> 时间：2013-01-16T01:45:56.570
> 
> 标签：windows-phone-8

有没有办法`Debug.Assert`在 Windows Phone 8 上显示对话框？当我在调试器下运行我的代码时，我可以在调试输出中看到断言消息。但是，我需要明确地查看；即使没有附加调试器，我也宁愿在我的脸上看到一个对话框（类似于桌面）。

# android - Android 应用中 Guava 的 EventBus 组件性能

> ID：14350183
> 
> 赞同：0
> 
> 时间：2013-01-16T01:46:31.717
> 
> 标签：android, guava

我正在对应用程序进行原型设计，尽管我会尝试使用 Guava 的 EventBus 组件来摆脱一些我一直在编写的代码，例如将事件从片段传播到活动。

令我惊讶的是，当活动开始时，我的表现受到了很大的打击。

我只对活动本身进行一次 EventBus.register 调用。删除该呼叫会使活动开始时间恢复正常。我还注意到当时正在进行很多垃圾收集。

有人对 Guava 的 EventBus 和 Android 有什么建议吗？我应该简单地回到简单的片段侦听器模式吗？任何其他图书馆（我也打算尝试 mbassador，但我的原型设计时间不多了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:11:40.037

由于时间不够，我最终没有使用任何事件总线实现（而且项目很小，所以它更像是一个个人实验）。

然而，正如 L. Wasserman 所说，Guava 的 EventBus 有许多替代品：[Square 的 Otto](https://github.com/square/otto)、[mbassador](https://github.com/bennidi/mbassador)、...

# jquery - 嵌套 LI 函数

> ID：14350184
> 
> 赞同：1
> 
> 时间：2013-01-16T01:46:33.027
> 
> 标签：jquery, html, function

我基本上有这个标记：

```
<div class="navBar">
  <div class="inner blueTheme"> 
    <ul id="" class="navBarMenu">
      <li class="xenonActiveMenu blue"><a href="/new_order">Orders</a>
        <ul>
          <li class="backBtn"><a href="#">&lt; Back</a>
          </li>
          <li class="xenonActiveMenu "><a href="/new_order">New Order</a>
          </li>
        </ul>
      </li>  
      <li class="green"><a href="/account_details">Profile</a>
        <ul>
          <li class="backBtn"><a href="#">Back</a>
          </li>
        </ul>
      </li>
      </ul>
  </div>      
</div> 
```

查询：

```
$('.navBar .inner ul > li').bind('click', function(e){  
    e.preventDefault();
    item = $(this);
    if (item.attr('class') != 'selected' && item.attr('class') !='backBtn') {
        item.addClass('selected');
        var parent = item.parent();
        var barWidth = item.width();
        var hasSub = item.find('ul').length;
        if (hasSub > 0 ){
        //Item Does have a submenu
        parent.children().each(function(){
            $(this).animate({marginLeft: -barWidth}, 400);
        });
        }
    } else {
        var parent = $(this).parent().closest('li');
        var barWidth = $(this).width();
        parent.each(function(){
        $(this).animate({marginLeft: barWidth}, 400);
        });
    }
    }); 
```

我的问题是，它认为“li”元素被点击了两次，因为嵌套的 LI 元素有两个单独的函数，我只是不知道解决方法，有人可以帮忙吗？

香农

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:30:35.763

Use [`stopPropagation`](http://api.jquery.com/event.stopPropagation/)，正如它的名字所暗示的那样：它防止事件冒泡到 DOM 树到下一级`<li>`元素。

或者，您可以分离处理程序以使代码更具可读性，`$('.navBar .inner > ul > li')`用于第一级和`$('.navBar .inner > ul > li ul li')`第二级。

使用的更新代码`stopPropagation`如下所示。

```
$('.navBar .inner ul > li').click( function(e) {  
    e.preventDefault();
    e.stopPropagation();

    // your code for handler
}); 
```

# c# - 其他域上的 javascript 调用的 localhost webservice 侦听器

> ID：14350186
> 
> 赞同：0
> 
> 时间：2013-01-16T01:47:09.313
> 
> 标签：c#, javascript, web-services, cross-domain, localhost

我们在本地机器上构建了一个 html Web 侦听器 (C#) 来侦听来自本地浏览器的任何 Web 服务请求。本地浏览器通过我们正在构建的特定网页上的 javascript XMLHttpRequest 执行此操作。我们控制本地机器和加载的网页（但不控制服务器主机）。我们知道有跨域问题需要注意，因为网页是从非本地域加载的。我们控制网页权限，使其仅适用于在同一台机器上登录的一个用户。

本地webservice和javascript处理本地webservice调用的最佳实践技术是什么？我们需要 web 服务来建立连接并从本地机器异步传回特定信息。我们宁愿不向安全区互联网安全添加 url，而是使用已知的安全技术从本地机器传递信息。

如果是 CORS，我们需要在本地 web listener C# 项目中添加什么来允许这种类型的连接？还有 CORS 版本的 javascript XMLHttpRequest 是什么样的？我们希望网络服务器本身不需要更改设置（我们不允许）。

谢谢！

# vb.net - 如何在 vb.net 中解码 url

> ID：14350192
> 
> 赞同：3
> 
> 时间：2013-01-16T01:47:32.383
> 
> 标签：vb.net, url, decode

此行表示未声明服务器。

```
Dim DecodedString As String = server.UrlDecode(context.Request.Form("DeckName")) 
```

我在顶部有导入 system.web。似乎无法弄清楚为什么它不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T01:49:12.017

改为使用`HttpUtility`。

```
Dim decodedUrl As String = HttpUtility.UrlDecode(encodedUrl) 
```

更多详细信息：http:
[//msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.urldecode.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T19:24:50.253

这是旧的，K3N 已经提供了一个很好的答案.. 但我相信 'server' 中的 's' 应该在你的代码中大写。这可能是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-24T16:25:41.417

```
Imports System.Net

Dim DecodedString As String = WebUtility.UrlDecode(context.Request.Form("DeckName")) 
```

这应该适用于 vb.net。我尝试了 HttpUtility，但即使我导入了 System.Web，它也无法识别。

# sql - 下面的数据应该是外键还是主键？

> ID：14350193
> 
> 赞同：0
> 
> 时间：2013-01-16T01:47:34.707
> 
> 标签：sql, foreign-keys

**会议**

```
SessionId (PK) SessionName  SessionDuration  TotalMarks  SessionWeight  ModuleId (FK)
1             AAA          01:00:00        30         20            1 
```

**惩罚**

```
SessionId (PK)  PenaltyEnalbed
1               1 
```

我的问题是，就像`SessionId`在 Penalty Table 中指代表一样，在惩罚表中`Session`应该`SessionId`是主键还是外键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T01:49:15.127

它应该是外键，但作为惩罚，还应该有一个 Id 设置为主键。所以惩罚应该是 ID(PK) SessionId (FK) PenaltyEnalbed

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T01:49:44.497

`SessionID`in table`Penalty`应该定义为，`FOREIGN KEY`因为您已经提到它在`SessionID`table 的列上引用`Session`。

```
CREATE TABLE Session
(
    SessionID INT PRIMARY KEY NOT NULL,
    -- OTHER columns here...
);

CREATE TABLE Penalty
(
    SessionID INT NOT NULL,
    -- OTHER columns here...,
    CONSTRAINT penalty_fk FOREIGN KEY (SessionID)
        REFERENCES Session(SessionID)
); 
```

# android - 在 ICS(4.0.4) 中出现 SQLite 语法错误，但在其他版本上工作正常？

> ID：14350195
> 
> 赞同：2
> 
> 时间：2013-01-16T01:47:47.860
> 
> 标签：android, database, sqlite

SQL是

```
INSERT INTO "quotes" VALUES(1,1,1,'This is a quote','This is a quote in german','By Me','jackson',1,1,1305587611,'0','Thriller'); 
```

从文本文件中读取后，我正在使用 db.execSQL 执行此行。

```
 InputStream is = myContext.getResources().openRawResource(R.raw.quotesinsert);
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            String readLine = null;
            db.execSQL(QUOTE_DB_CREATE);                    
            while ((readLine = br.readLine()) != null) {
                db.execSQL(readLine); 
            } 
```

这适用于所有其他版本的 Android，但在 ICS(4.0.4) 上崩溃

```
01-14 02:07:46.271: E/AndroidRuntime(1802): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.foo.quotesapp/com.foo.quotesapp.QuoteList}: android.database.sqlite.SQLiteException: near "?INSERT": syntax error 
```

我已经在独立的 SQLite 程序中尝试了创建表的 SQL 和插入的 SQL，它们工作正常，这里会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:53:42.090

您的文本文件以 UTF-8 编码，并使用在开头插入[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)的程序创建。

Java/Android 运行时在读取文件时不会删除此字符；你必须自己做。
（此行为是故意的；请参阅[UTF-8 encoding does not identify initial BOM](http://bugs.sun.com/view_bug.do?bug_id=4508058) and [UTF-8 decoder processing of byte-order mark has changed](http://bugs.sun.com/view_bug.do?bug_id=6378911)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:53:06.023

确保 sql 语句为 Single（SQL 语句前有空格，后有空格）

# matlab - 需要仅使用一个命令创建具有特定元素的矩阵

> ID：14350196
> 
> 赞同：3
> 
> 时间：2013-01-16T01:48:03.570
> 
> 标签：matlab, matrix, vectorization

**我只需要使用一个命令**来创建以下矩阵，而无需明确输入：

```
M = [0 0 0 0 0 0;...
     0 0 0 0 0 0;...
     0 0 0 0 0 0;...
     0 0 0 1 2 3;...
     0 0 0 4 5 6;....
     0 0 0 7 8 9] 
```

我是新手，所以我不能使用任何复杂的命令。

我尝试`linspace`结合使用，`zeros`但效果不佳。

请帮忙！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T06:20:45.287

`M`如果尚未定义矩阵，您可以跳过`zeros(6)`（由[AlexL](https://stackoverflow.com/a/14350228/1714410)提出）并直接转到

```
M( 4:6, 4:6 ) = reshape( 1:9, [3 3] ).'; %' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T04:07:02.730

是不是使用了太复杂的命令？

```
ans=padarray(reshape(1:9,3,3)',[3 3],'pre') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T08:51:06.030

另一个简单而紧凑的 oneliner，结合了已经为 MATLAB 和 Octave 提到的一些东西：

```
M(4:6,4:6) = [1:3;4:6;7:9] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T02:05:49.930

不了解 Matlab，但在 Octave 中，您可以执行以下操作：

```
M = [zeros(3, 6); zeros(3), [1:3; 4:6; 7:9]] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T01:52:33.467

也许您可以尝试创建一个充满[零](http://www.mathworks.com.au/help/matlab/ref/zeros.html)的 6x6 矩阵：

```
M = zeros(6) 
```

然后只是将它的一部分设置为[1:9](http://www.mathworks.com.au/help/matlab/ref/colon.html)？

```
M(4:6,4:6) = reshape(1:9, 3, 3)' 
```

（'符号表示转置）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T02:00:17.837

纠正亚历克斯的回答：

```
M = zeros(6)

M(4:6,4:6) = [1,2,3;4,5,6;7,8,9] 
```

# java - 想让 SQL 查询知道当前 JDBC 连接命中的 Oracle RAC 节点

> ID：14350200
> 
> 赞同：1
> 
> 时间：2013-01-16T01:48:33.270
> 
> 标签：java, sql, oracle, jdbc

我正在尝试使用负载平衡，其中我的 Oracle 10g 数据库中有 3 个 RAC 节点，例如 db1、db2、db3。我开发了一个带有 JDBC 连接的 Java 程序。此 JDBC 连接使用负载平衡。我的问题是我想打印这个 JDBC 连接命中的 RAC 节点（无论是 db1、db2 还是 db3）。任何人都可以提供任何 SQL 查询来了解当前 JDBC 连接命中的 RAC 节点吗？我想测试当我们通过 JDBC Thin 连接时是否成功使用了负载平衡。任何人都可以建议使用 JDBC Java 程序测试负载平衡的任何替代方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:03:40.710

```
select instance_name from v$instance 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T01:59:12.547

通常，您会通过执行类似的操作来测试负载平衡是否正常工作

```
SELECT inst_id, count(*)
  FROM gv$session
 WHERE <<something that identifies your connections>>
 GROUP BY inst_id 
```

获取每个实例的会话数。`<<something that identifies your connections>>`可以是列上的谓词（`MACHINE`假设您的连接来自一个或多个应用服务器）、`PROGRAM`列、the `OSUSER`、the`SCHEMANAME`或任何其他标识您感兴趣的会话的东西。

如果您真的想从 Java 应用程序中单独获取此信息，您可以

```
SELECT DISTINCT inst_id
  FROM gv$mystat 
```

无论哪种情况，您都可以使用该表查找哪些`inst_id`映射到哪个服务器。`gv$instance`

# tfs - TFS 2012 分支 - 将开发复制为主

> ID：14350202
> 
> 赞同：6
> 
> 时间：2013-01-16T01:48:41.150
> 
> 标签：tfs, branching-and-merging

我目前在 TFS 中有一个只有一个开发文件夹的解决方案：

```
/Dev 
```

我想为此解决方案实施分支策略：

```
/Dev
/Main 
```

我知道我可以使用转换为分支功能，但是如何在新的父（主）分支和现有的子（开发）分支之间建立关系？

我不想将 Dev 重命名为 Main，因为我想在 dev 分支中保留现有的签入历史记录。是否有另一种方法可以将现有的 Dev 分支建立为子分支并将新的 Main 分支建立为父分支，而无需重命名 Dev？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T02:35:04.627

如果 main 尚不存在，则只需从 dev 中获取一个分支并将其称为 Main。完成此操作后，您可以重新设置分支的父级，以便 dev 是 main 的子级。

为此，请在源代码管理资源管理器中选择 Dev 并右键单击，然后选择“分支和合并”。最后选择“reparent”并使用UI改变与main的关系。

如果 Main 确实存在，那么您将需要执行[baseless 合并](http://www.incyclesoftware.com/2012/08/baseless-merge-vs-2012-ui/)来建立分支关系

# java - 可以与分配给命名管道的文件通道一起使用 transferto/from

> ID：14350212
> 
> 赞同：0
> 
> 时间：2013-01-16T01:49:52.707
> 
> 标签：java, nio, named-pipes, filechannel

我有一个设置，其中一个程序从命名管道读取数据并将读取的数据写入套接字。另一个程序从套接字读取数据并将数据写入另一个命名管道。这是在跨节点的 Linux 上。在 Java FileChannels 上进行常规读取和写入都可以正常工作，但是当我尝试提高效率并使用 transferTo 在套接字通道上发送命名管道数据时，transferTo 总是返回传输的 0 字节。接收数据 transferFrom 更具决定性：它在尝试对命名管道进行搜索时遇到异常（命名管道上不允许搜索）。我在尝试做不可能的事吗？有没有人幸运地使用带有命名管道的 transferTo 和/或 transferFrom 。

谢谢。

# macos - 使用 os x 在 python 3 中创建一个用于备份的 .zip 文件

> ID：14350222
> 
> 赞同：0
> 
> 时间：2013-01-16T01:51:20.227
> 
> 标签：macos, zip, backup, komodo, python-3.3

我是 python 编程新手（现在 5 天）并且遇到了一个我似乎无法在这个论坛中找到答案的问题。我将不胜感激任何帮助，并将非常感谢详细的解释。

成为。我在 macbook pro 上使用 python 3。我正在使用一个名为“komodo edit”的编辑器，我使用的是 CH Swaroop 的“Byte of Python”作为指南。

我遇到的问题是创建一个程序的示例，该程序从一个文件夹中获取文件并将其作为 zip 文件备份到另一个文件夹。

书中的例子如下：

```
Save as backup_ver1.py:
import os
import time
#  The files and directories to be backed up are specified in a list.
source = ['"C:\\My Documents"', 'C:\\Code']
# Notice we had to use double quotes inside the string for names with spaces in it.
#  The backup must be stored in a main backup directory
target_dir = 'E:\\Backup' # Remember to change this to what you will be using
#  The files are backed up into a zip file.
#  The name of the zip archive is the current date and time
target = target_dir + os.sep + time.strftime('%Y%m%d%H%M%S') + '.zip'
#  We use the zip command to put the files in a zip archive
zip_command = "zip -qr {0} {1}".format(target, ' '.join(source))
# Run the backup
if os.system(zip_command) == 0:
    print('Successful backup to', target)
else:
    print('Backup FAILED') 
```

我的代码如下

```
import os
import time
source = ['C:\\learningPython','C:\\scan'] # can i use / instead of the \?
# why is square brackets used here? i'm under the assumption the square brackets are used for list. i'm also assuming one is the directory and the other is the file.
target_dir = 'C:/backup' # created a "backup" folder
target = target_dir + os.sep +time.strftime('%Y%M%D%H%M%S') + '.zip'
zip_command = "zip -qr {0} {1}".format(target, ‚ ‚.join(source))
if os.system(zip_command) == 0:
    print(‚Successful backup to‚, target)
else:
    print(‚Backup FAILED‚) 
```

我得到一个

邮编错误：无事可做！（尝试：zip -qr C:/backup/20133201/15/13203219.zip .-i C:learningPythonC:scan）备份失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:13:54.670

您正在查看的示例代码完全是 Windows 特定的，`C:\blah`路径是什么。OS X 上的等效路径如下所示：

```
/Users/yourusername/Documents 
```

（在转换代码时，您似乎也以某种方式将几个`'`s 转换为`,`s。不知道那是什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:48:43.103

正如另一位回答者所指出的，您使用的代码是特定于 Windows 的，并且需要其他答案建议的修改才能使其在 OSX 中运行。

为了诊断问题，我对您的代码进行了一些修改，如下所示（将一些逗号更改为撇号，更改`strftime()`调用并添加 a`print()`以显示 中的实际内容`zip_command`）：

```
import os
import time
source = ['C:\\learningPython','C:\\scan']
target_dir = 'C:/backup'
target = target_dir + os.sep + time.strftime('%Y%m%d%H%M%S') + '.zip'   # modified
zip_command = "zip -qr {0} {1}".format(target, ' '.join(source))
print(zip_command)  # added - see discussion below
if os.system(zip_command) == 0:
    print('Successful backup to', target)
else:
    print('Backup FAILED') 
```

当我还创建了三个文件夹`c:\backup`并`c:\learningPython`放入`c:\scan`一个文件`c:\learningPython`以便`zip`有事可做时，修改后的脚本在我的 Windows PC 上给出了以下输出：

```
C:\usr\sjl\dev\test\python>python ziptest.py
zip -qr C:/backup\20130116152602.zip C:\learningPython C:\scan
Successful backup to C:/backup\20130116152602.zip 
```

……我想，这就是你所希望的。

我发现当我从 Python 运行系统命令时，将命令打印出来总是值得的，就像我要求`os.system()`运行它一样，这样我就可以确切地知道将要运行什么（所以我可以尝试那个命令如果它没有做我认为它应该做的事情，则手动从 shell 中）。

我还修改了格式字符串，`strftime()`因为原始版本在“Y”之后有一个大写“M”（这将显示分钟数而不是月数）和一个大写“D”而不是“ d' 代表天数。'D' 不是`strftime()`格式字符串中的有效代码字母（请参阅[此处](http://docs.python.org/2/library/time.html)）。对我来说，使用 Python 3.2，当我尝试运行脚本时，错误的字母会导致运行时错误。

关于您的其他问题，是要求处理`source`的目录列表。`zip`如果您只需要处理一个目录，您可以轻松编写以`zip_command`as 开头的行（这次使用 OS X / Unix 样式的文件夹名称）：

```
zip_command = "zip -qr {0} {1}".format(target, '/Users/yourusername/Documents')) 
```

# c# - 检查文本框文本是否为空

> ID：14350223
> 
> 赞同：5
> 
> 时间：2013-01-16T01:51:28.997
> 
> 标签：c#, null

我正在使用以下代码检查空文本框，如果为空，则跳过复制到剪贴板并继续执行其余代码。

我不明白为什么会出现“值不能为 NULL”异常。它不应该看到空值并继续前进而不复制到剪贴板吗？

```
private void button_Click(object sender, EventArgs e)
{
    if (textBox_Results.Text != null) Clipboard.SetText(textBox_Results.Text);            

    //rest of the code goes here;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T01:57:11.087

您可能应该像这样进行检查：

```
if (textBox_Results != null && !string.IsNullOrWhiteSpace(textBox_Results.Text)) 
```

只是一个额外的检查，所以如果`textBox_Results`你`null`没有得到空引用异常。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T01:55:22.747

如果使用 .NET 4 [String.IsNullOrWhitespace()](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)检查 .Text 的 Null 值，则应使用[String.IsNullOrEmpty() 。](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)

```
private void button_Click(object sender, EventArgs e)
    {
        if (!String.IsNullOrEmpty(textBox_Results.Text) Clipboard.SetText(textBox_Results.Text);            

        //rest of the code goes here;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T01:57:54.907

我认为您可以检查 Text 是否为空字符串：

```
private void button_Click(object sender, EventArgs e)
{
    if (textBox_Results.Text != "") Clipboard.SetText(textBox_Results.Text);            

    //rest of the code goes here;
} 
```

您还可以使用 string.IsNullOrEmpty() 方法进行检查。

# c++ - 队列错误 C2371：“ItemType”：重新定义；不同的基本类型

> ID：14350225
> 
> 赞同：0
> 
> 时间：2013-01-16T01:51:53.543
> 
> 标签：c++, queue, console-application

我正在为 C++ 分配编写代码，并且我有 Queue.h 和 Queue.cpp 文件。但是当我将#include“Queue.h”放在main（）中时，无法使用它们。我在 Queue.h 文件的第 12 行遇到了上述问题。

```
error C2371: 'ItemType' : redefinition; different basic types 
```

我想把 RecordService 类作为 Itemtype。

我的 Queue.h 文件如下。

```
#pragma once
#ifndef Queue_H
#define Queue_H
#include<iostream>
#include<string>
#include "RecordService.h"
using namespace std;

typedef RecordService ItemType;  // << problem here

/** ADT queue - Pointer-based implementation. */
class Queue
{
private:
    /** A node on the queue. */ 
    struct Node
    {
        /** A data item on the queue. */
        ItemType item;
        /** Pointer to next node.     */
        Node    *next;
    }; // end Node

    /** Pointer to front node in the queue. */
    Node *frontNode;
    /** Pointer to back node in the queue. */
    Node *backNode;

public:

   /** Default constructor. */
   Queue();

   /** Destructor. */
   ~Queue();

// Queue operations:
   bool isEmpty() const;
   bool enqueue(ItemType& newItem);
   bool dequeue();
   bool dequeue(ItemType& item);
   void getFront(ItemType& item) const;

}; // end Queue
// End of header file.

#endif 
```

我的 Queue.cpp 在这里

```
#include "Queue.h"  // header file

Queue::Queue(void)
{   
}  // end default constructor

Queue::~Queue()
{
   while (!isEmpty())
      dequeue();
}  // end destructor

bool Queue::isEmpty() const
{
   return backNode == NULL;
}  // end isEmpty

bool Queue::enqueue(ItemType& newItem)
{
     // create a new node
      Node *newNode = new Node;
      newNode->item = newItem;
      newNode->next = NULL;

      // insert the new node
      if (isEmpty())
     // insertion into empty queue
         frontNode = newNode;
      else
     // insertion into nonempty queue
         backNode->next = newNode;

      backNode = newNode;  // new node is at back
      return true;

}  // end enqueue

bool Queue::dequeue() 
{
   if(isEmpty())
        {
            cout<<"The queue is empty."<<endl;
        }
        else
        {
            Node *temp= frontNode;
            if(frontNode==backNode)
            {
                frontNode=NULL;
                backNode=NULL;
            }
            else
                frontNode=frontNode->next;

            temp->next=NULL;
            delete (temp);
        }
        return true;  // end if

}  // end dequeue

bool Queue::dequeue(ItemType& item)
{
   if(isEmpty())
    {
        cout<<"The queue is empty."<<endl;
    }
    else
    {
        item = frontNode->item;
        dequeue();
    }
    return true;

}  // end dequeue

void Queue::getFront(ItemType& item) const
{
   if (!isEmpty())
      // queue is not empty; retrieve front
      item = frontNode->item;
    else 
        cout << "The queue is empty." << endl;
}  // end getFront 
```

您可能会看到我想将 RecordService 作为 Itemtype 放在“Queue.h”标题中。这是 RecordService.h

```
#pragma once
#ifndef RecordService_H
#define RecordService_H
#include <iostream>
#include <string>
#include <ctime>
using namespace std;

class RecordService
{
public:
    RecordService();
    RecordService(string, string, string, int, double, bool, string);
    ~RecordService();

    //set methods
    void setTransID(char);
    void setCusName(string);
    void setVehicleNo(string);
    void setCarType(string);
    void setWashDuration(int);
    void setShampooDuration(int);
    void setPolishDuration(int);
    void setVacuumDuration(int);
    void setTotalDuration(int,int,int,int);
    void setWashingCharge(double);
    void setShampooingCharge(double);
    void setPolishingCharge(double);
    void setVacuumingCharge(double);
    void setTotalCharge(double,double,double,double);
    void setRewardStatus(bool);
    void setDateOfTrans(string);

    //get methods
    char getTransID();
    string getCusName();
    string getVehicleNo();
    string getCarType();
    int getWashDuration();
    int getShampooDuration();
    int getPolishDuration();
    int getVacuumDuration();
    int getTotalDuration();
    double getWashingCharge();
    double getShampooingCharge();
    double getPolishingCharge();
    double getVacuumingCharge();
    double getTotalCharge();
    bool getRewardStatus();
    string getDateOfTrans();

private:
    char transID;
    string CusName;
    string vehicleNo;
    string carType;
    int WashDuration;
    int ShampooDuration;
    int PolishDuration;
    int VacuumDuration;
    int TotalDuration;
    double WashingCharge;
    double ShampooingCharge;
    double PolishingCharge;
    double VacuumingCharge;
    double TotalCharge;
    bool RewardStatus;
    string DateOfTrans;

};
#endif 
```

提前感谢您帮助我。由于此错误，我无法继续进行其他部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:11:47.060

`ItemType`可以在`Queue`课堂内移动。现在它可能会与您已`ItemType`定义的其他标题发生冲突。

所以而不是

```
typedef RecordService ItemType;  // << problem here

/** ADT queue - Pointer-based implementation. */
class Queue
{
    ...
} 
```

利用

```
/** ADT queue - Pointer-based implementation. */
class Queue
{
    typedef RecordService ItemType;

    ...
} 
```

`ItemType`仍然可以在课堂`ItemType`内外访问`Queue`（如果做了）`Queue::ItemType``Queue``public`

# java - 排序扑克等级

> ID：14350232
> 
> 赞同：-4
> 
> 时间：2013-01-16T01:53:25.650
> 
> 标签：java

扑克等级为2345..9TJQKA

给定一个卡片数组 String s[] = {"Qh", "Jd", "2h"}。

我想回来

s[] = {"2h", "Jd", "Qh"}

这是我的代码：

```
 Arrays.sort(s, new Comparator<String>() {
        @Override
        public int compare (String s1, String s2) {
            int v1 = (int) s1.charAt(0);
            int v2 = (int) s2.charAt(0);
            if (v1 == 65) v1 = 100; //changes the value of A
            if (v2 == 65) v2 = 100;
            if (v1 == 75) v1 = 85; //changes the value of K
            if (v2 == 75) v2 = 85;
            if (v1 == 84) v1 = 60;
            if (v2 == 84) v2 = 60; //changes the value of T
            return v1 - v2;
        }
    } 
```

它使数组保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:23:05.323

我使用以下代码测试了您的代码：

```
import java.util.*;

public class test {
   public static void main(String... args) {
      String s[] = {"Qh", "Jd", "2h"};
      Arrays.sort(s, new Comparator<String>() {
         @Override
         public int compare (String s1, String s2) {
            int v1 = (int) s1.charAt(0);
            int v2 = (int) s2.charAt(0);
            if (v1 == 65) v1 = 100; //changes the value of A
            if (v2 == 65) v2 = 100;
            if (v1 == 75) v1 = 85; //changes the value of K
            if (v2 == 75) v2 = 85;
            if (v1 == 84) v1 = 60;
            if (v2 == 84) v2 = 60; //changes the value of T
            return v1 - v2;
         }
      });
      for (String card : s) {
         System.out.println(card);
      }   
   }
} 
```

它打印：

```
2h
Jd
Qh 
```

它对我有用，所以问题可能出在您调用/使用排序例程的方式上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T01:58:20.337

浏览 compareInstance.compare 上的[javadocs](http://java.sun.com/javase/6/docs/api/java/util/Comparator.html)：

> 比较它的两个参数的顺序。返回负整数、零或正整数，因为第一个参数小于、等于或大于第二个。

因此，您返回的是 v1 和 v2 之间的差异，从表面上看，这很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:14:58.740

如果没有看到更多你的程序，很难确切地说出哪里出了问题，但是，你正在为你的`compare`. 通过重复`if`语句，而不是`if/else`，您可以在 v1 或 v2 上执行两个 if 语句。考虑使用`switch`.

另一个观察结果是，这种东西适合封装。为什么不使用 Card 类来隐藏每张卡片的值，而不是尝试在您的`compare`方法中“翻译”它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T02:16:25.683

您正在修改每只手的第一个字母的 ASCII 代码的*临时副本，而不是修改真实的字符串。*

并不是说我建议您按照您现在的方式进行操作，首先循环替换字符串，然后使用您的自定义逻辑对它们进行排序。~~这是 O(n*2)~~但它仍然非常快，你不是一次处理数百万手，是吗？

我很无聊，为你做这件事：

```
import java.util.*;
import java.lang.*;

class Main {
    public static void main(String[] args) throws java.lang.Exception {
        String s[] = {
            "Ad", "2h", "Qh" //I replaced it with an A so your replacement code can kick in
        }; //See http://www.asciitable.com/index/asciifull.gif
        String mod[] = new String[s.length];
        for(int i = 0; i < s.length; i++) {
            int v1 = s[i].charAt(0);
            int v2 = s[i].charAt(1);
            if (v1 == 65) v1 = 100; //changes the value of A
            if (v1 == 75) v1 = 85; //changes the value of K
            if (v1 == 84) v1 = 60;
            String a1 = (char)v1 + "";
            String a2 = (char)v2 + "";
            mod[i] = a1 + a2 + "";
        }
        Arrays.sort(mod, new Comparator < String > () {
            @Override
            public int compare(String s1, String s2) {
                int v1 = (int) s1.charAt(0);
                int v2 = (int) s2.charAt(0);
                return v1 - v2;
            }
        });
        for (int i = 0; i < mod.length; i++)
            System.out.println(mod[i]);
    }
} 
```

糟糕，它肯定不是 O(n*2)，因为文档引用的排序是 logn -ish，抱歉。

# ios - 部分和行数 NSFetchedResultsController

> ID：14350234
> 
> 赞同：1
> 
> 时间：2013-01-16T01:53:51.210
> 
> 标签：ios, xcode, core-data, nsfetchedresultscontroller

我有一个`NSFetchedResultsController`，我已经确认每当用户创建一个新对象时，他们的数据就会被保存到其中。但是，我发现唯一没有更新的是`NSFetchedResultsController`. 我不确定为什么会这样。

我尝试以多种不同的方式改变新对象的创建。我还尝试记录该过程的每个步骤以尝试查看发生了什么，但是我真的没有多少可以记录这样的事情，所以我现在几乎没有关于为什么会发生这种情况的信息. 无论如何，这里是代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"number of sections: %d", [[self.fetchedResultsController sections] count]);
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"number of rows: %d", [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects]);
    return [[[self.fetchedResultsController sections] objectAtIndex:section] numberOfObjects];
}

- (void)saveForName:(NSString *)name
              photo:(NSData *)photo
         timePosted:(NSDate *)timePosted
            details:(NSString *)details
        dateAndTime:(NSDate *)dateTime
           location:(NSString *)location
{

    if (!self.shindysDatabase) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        self.shindysDatabase = [[UIManagedDocument alloc] initWithFileURL:url];
        NSLog(@"shindy database reset.");
    }

    Shindy *shindy = (Shindy *)[NSEntityDescription insertNewObjectForEntityForName:@"Shindy" inManagedObjectContext:self.shindysDatabase.managedObjectContext];

    shindy.name = name;
    shindy.photo = photo;
    shindy.timePosted = timePosted;
    shindy.details = details;
    shindy.dateAndTime = dateTime;
    shindy.location = location;

    NSError *error = nil;
    [self.shindysDatabase.managedObjectContext save:&error];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    Shindy *shindy = (Shindy *)[NSEntityDescription entityForName:@"Shindy" inManagedObjectContext:self.shindysDatabase.managedObjectContext];
    shindy = [self.fetchedResultsController objectAtIndexPath:indexPath];

    UIImageView *avatar = [[UIImageView alloc] initWithFrame:CGRectMake(20, 10, 64, 56)];
    // Converting NSData to UIImage
    avatar.image = shindy.photo;
    avatar.clipsToBounds = NO;
    [cell addSubview:avatar];

    NSLog(@"avatar: %@", avatar);

    // The name of the user who posted the shindy
    UILabel *avatarName = [[UILabel alloc] initWithFrame:CGRectMake(90, 10, 125, 19)];
    avatarName.font = [UIFont boldSystemFontOfSize:15];
    avatarName.backgroundColor= [UIColor clearColor];
    avatarName.text = shindy.name;
    [cell addSubview:avatarName];

    NSLog(@"avatarName: %@", avatarName);

    // The time the shindy was posted
    NSDateFormatter *timePostedFormatter = [[NSDateFormatter alloc] init];
    [timePostedFormatter setDateFormat:@"mm"];
    UILabel *timePosted = [[UILabel alloc] initWithFrame:CGRectMake(280, 10, 30, 20)];
    timePosted.font = [UIFont systemFontOfSize:12];
    timePosted.textColor = [UIColor lightGrayColor];
    timePosted.backgroundColor= [UIColor clearColor];
    timePosted.text = [timePostedFormatter stringFromDate:shindy.timePosted];
    [cell addSubview:timePosted];

    NSLog(@"Time posted: %@", timePosted);

    // Formatting fetched NSDate into string
    NSDateFormatter *dateAndTimeFormatter = [[NSDateFormatter alloc] init];
    [timePostedFormatter setDateFormat:@"MM/DD/YYYY hh:mm"];
    UILabel *dateAndTimeLabel = [[UILabel alloc] initWithFrame:CGRectMake(250, 70, 30, 20)];
    dateAndTimeLabel.font = [UIFont systemFontOfSize:12];
    dateAndTimeLabel.backgroundColor= [UIColor clearColor];
    dateAndTimeLabel.text = [dateAndTimeFormatter stringFromDate:shindy.dateAndTime];
    [cell addSubview:dateAndTimeLabel];

    NSLog(@"date and time: %@", dateAndTimeLabel.text);

    // Details of the Shindy
    UILabel *shindyDescription = [[UILabel alloc] initWithFrame:CGRectMake(90, 20, 220 , 50)];
    shindyDescription.numberOfLines = 3;
    shindyDescription.font = [UIFont systemFontOfSize:12];
    shindyDescription.backgroundColor = [UIColor clearColor];
    shindyDescription.text = shindy.details;
    [cell addSubview:shindyDescription];

    NSLog(@"details: %@", shindyDescription.text);

    return cell;
} 
```

**样板代码：**

这只是我在更改对象时必须进行更新的代码。

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller is about to start sending change notifications, so prepare the table view for updates.
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            [tableView deleteRowsAtIndexPaths:[NSArray
                                               arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray
                                               arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

    switch(type) {

        case NSFetchedResultsChangeInsert:
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:12:36.583

我很久没有使用 NSFetchedResultController 了，但乍一看我会说：
`Where are you asking your table view to update itself?`
我不认为结果控制器会触发表更新本身。

* * *

我刚刚在[NSFetchedResultsController](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsController_Class/Reference/Reference.html)文档中，我也看到了这个：

> 此外，获取的结果控制器提供以下功能：
> 可选地监视关联托管对象上下文中对象的更改，并将结果集中的更改报告给其委托（请参阅“控制器的委托”）。

并且在[NSFetchedResultsControllerDelegate](http://developer.apple.com/library/ios/#documentation/CoreData/Reference/NSFetchedResultsControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSFetchedResultsControllerDelegate)文档 中

> 您可以只实现 controllerDidChangeContent: （在处理完所有待处理的更改后将其发送给委托）以重新加载表视图。

* * *

仅出于调试目的，您是否尝试删除：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller 
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath
- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type 
```

只是做：

```
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView reloadData];
} 
```

我并不是说这是一个解决方案，但看看结果是否相同会很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T11:00:27.203

您在创建 NSFetchedResultsController 对象时是否指定了 sectionNameKeyPath？如果使用 nil，则只会创建一个部分。

> (instancetype)initWithFetchRequest:(NSFetchRequest *)fetchRequest managedObjectContext:(NSManagedObjectContext *)context sectionNameKeyPath:(NSString *)sectionNameKeyPath cacheName:(NSString *)name;
> 
> sectionNameKeyPath：返回部分名称的结果对象的键路径。传递 nil 表示控制器应该生成单个部分。

# c# - 以 desc 或 asc 排序列表，具体取决于它当前是什么

> ID：14350238
> 
> 赞同：2
> 
> 时间：2013-01-16T01:54:34.480
> 
> 标签：c#, list, sorting, webforms

我有一个列表，我想以与当前相反的顺序对结果进行排序，以模仿用户单击列标题超链接。目前，我有以下内容：

```
 dsList.Sort((x, y) => String.CompareOrdinal(x.DisplayName, y.DisplayName)); 
```

但这只会升序排列。我知道按降序排序我会这样做：

```
 dsList.Sort((x, y) => String.CompareOrdinal(x.DisplayName, y.DisplayName)*-1); 
```

但是，我不想检测它当前是什么并决定要做什么。

说得通？

格拉西亚斯。

为了澄清，我不能使用 Reverse 因为我有超过 1 列可以排序，所以我需要能够指定要排序的值。

以下适用，但不适用于空值。如果有空白，排序就会卡住。

```
 dsList.Sort((x, y) => String.CompareOrdinal(x.Surname, y.Surname) * (strB != null && (strA != null && String.Compare(strA, strB) == -1) ? -1 : 1)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:18:52.117

为什么不使用 Linq 扩展[Reverse()](http://msdn.microsoft.com/en-us/library/bb358497.aspx)？这可以让您在不知道当前排序的情况下在升序和降序之间切换。如果您想使用它，请确保您正在引用库并在源文件顶部`System.Core`声明 using 指令。`System.Linq`

另一种方法是创建一个从 List 继承的类并像这样修改它：

```
public class LazyReversingList<T> : IList<T>
{
    private Boolean m_SortedAscending;
    private List<T> m_InnerList;

    public Boolean IsReadOnly
    {
        get
        {
            return false;
        }
    }

    public Boolean SortedAscending
    {
        get
        {
            return m_SortedAscending;
        }
    }

    public Int32 Count
    {
        get
        {
            EnsureList();
            return m_InnerList.Count;
        }
    }

    public T this[Int32 index]
    {
        get
        {
            EnsureList();
            return m_InnerList[index];
        }
        set
        {
            EnsureList();
            m_InnerList[index] = value;
        }
    }

    private void EnsureList()
    {
        if (m_InnerList == null)
            m_InnerList = new List<T>();
    }

    public Boolean Contains(T item)
    {
        EnsureList();
        return m_InnerList.Contains(item);
    }

    public Boolean Remove(T item)
    {
        EnsureList();
        return m_InnerList.Remove(item);
    }

    public IEnumerator<T> GetEnumerator()
    {
        EnsureList();
        return m_InnerList.GetEnumerator();
    }

    public Int32 IndexOf(T item)
    {
        EnsureList();
        return m_InnerList.IndexOf(item);
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        EnsureList();
        return m_InnerList.GetEnumerator();
    }

    public void Add(T item)
    {
        EnsureList();
        m_InnerList.Add(item);
    }

    public void Clear()
    {
        EnsureList();
        m_InnerList.Clear();
    }

    public void CopyTo(T[] array, Int32 arrayIndex)
    {
        EnsureList();
        m_InnerList.CopyTo(array, arrayIndex);
    }

    public void Insert(Int32 index, T item)
    {
        EnsureList();
        m_InnerList.Insert(index, item);
    }

    public void RemoveAt(Int32 index)
    {
        EnsureList();
        m_InnerList.RemoveAt(index);
    }

    public void Reverse()
    {
        if (!m_SortedAscending)
        {
            m_InnerList.Sort((x, y) => String.CompareOrdinal(x.DisplayName, y.DisplayName));
            m_SortedAscending = true;
        }
        else
        {
            m_InnerList.Sort((x, y) => (String.CompareOrdinal(x.DisplayName, y.DisplayName) * -1));
            m_SortedAscending = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:30:43.450

怎么样

```
dsList.Sort((x, y) => String.CompareOrdinal(x.DisplayName, y.DisplayName)*(dsList[0] < dsList[1]?-1:1)); 
```

编辑：在您的评论中，当存在重复值或空值时，您似乎遇到了问题......这应该可以解决

```
dsList.Sort((x, y) => String.CompareOrdinal(x.DisplayName, y.DisplayName)*String.CompareOrdinal(dsList[0].DisplayName, dsList[dsList.Length-1].DisplayName)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:18:08.203

如果您想要做的只是每次都简单地反转当前顺序，您应该考虑使用 .Net 的 LINQ 中提供的[Reverse](http://msdn.microsoft.com/en-us/library/bb358497.aspx)方法

或者

您可以简单地来回传递一个方向的值。这将允许将排序行为绑定到页面的所需状态，为此考虑一个隐藏字段。

# jquery - 使用 jquery .each 显示复杂的 JSON

> ID：14350249
> 
> 赞同：0
> 
> 时间：2013-01-16T01:56:34.643
> 
> 标签：jquery, json, getjson, each

我在尝试使此代码正常工作时遇到了麻烦。我真的看不出javascript有什么问题。当我调试时，我也没有发现错误。

```
<head>
<style type="text/css">
</style>
<script src="http://code.jquery.com/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
 $(document).ready(function() {
$('#Presentation').click(function() {
var jsonloc = "ppt.json";
        $.when($.getJSON(jsonloc)).then(function(info){
        $('#header').empty();
            $.each(info.slides, function(entryIndex, entry){
            var html = '<div class="info">';                      
            html += '<h3>' + entry['title'] + '</h3>';
            html += '<div class="author">' + entry['author'] + '</div>';                    
                if(entry['slides']){
                    $.each(entry['slides'],function(slideIndex, slides){
                        html += '<h3>' + slides['Slide'] + '<h3>';                                          
                        html += '<div class="header">' + slides['header'] + '</div>';                          
                        }); 
                if(slides['Content']){
                html += '<div class="Content">';                                            
                html += '<ol>';
                    $.each(slides['content'],function(contentIndex, content){
                        html += '<li>' + content + '</li>';                        
                            }); 
                        html += '</ol>';                        
                        html += '</div>';                               
                    };                                  
                $('#header').append(html);
            };                         
        });
        return false;
    });
    });

});
</script>
</head>
<body>

<a href="#" id="Presentation">ppt presentation</a>
<div id="header">
</div>
</body> 
```

这是JSON：

```
{
    "title": "presentation",
    "date_created": "",
    "last_modified": "",
    "author": "By: Someone online",
    "slides": [
        {
            "Slide": "1",
            "header": "first header",
            "src": "ssss.jpg",
            "Content": "dddddddddddddddddddddddddddddddddddd",
            "Content": "dddddddddddddddddddddddddddddddddddd",
            "Content": "dddddddddddddddddddddddddddddddddddd"
        },
        {
            "Slide2": "2",
            "header2": "header 2",
            "src2": null,
            "Content": "dddddddddddddddddddddddddddddddddddd",
            "Content": "dddddddddddddddddddddddddddddddddddd",
            "Content": "dddddddddddddddddddddddddddddddddddd"

        },
        {
            "Slide3": "3",
            "header3": "header3",
            "src3": "sdfdsf.jpg",
            "Content": "dddddddddddddddddddddddddddddddddddd",
            "Content": "dddddddddddddddddddddddddddddddddddd",
            "Content": "dddddddddddddddddddddddddddddddddddd"
        }
    ]
} 
```

我真的很想完成这项工作，并且不想使用其他方法，例如 jquery 模板。有什么东西会跳出来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:02:11.067

你关闭`.each`得太早了：

```
$.each(entry['slides'],function(slideIndex, slides){
    html += '<h3>' + slides['Slide'] + '<h3>';                                          
    html += '<div class="header">' + slides['header'] + '</div>';                          
 }); 
 if(slides['Content']){ 
 // ... 
```

这样您只能访问`slides['Content']`.

您需要将其`if`及其包含的内容放入循环中，如下所示：

```
 $.each(entry['slides'],function(slideIndex, slides){
    html += '<h3>' + slides['Slide'] + '<h3>';                                          
    html += '<div class="header">' + slides['header'] + '</div>';      
    if(slides['Content']){
    // ...

 }); 
```

# java - 如何启用 fedora 让我的 Java 程序访问音频设备

> ID：14350251
> 
> 赞同：0
> 
> 时间：2013-01-16T01:56:53.617
> 
> 标签：java, audio, fedora, voice, javasound

我在尝试访问允许我从麦克风插孔收听的音频设备时遇到问题。此代码可在 Windows 下使用输出，`Mic is supported!`

```
Mixer.Info[] mixerInfo = AudioSystem.getMixerInfo();
Mixer myMixer;

for(int i = 0; i < mixerInfo.length; i++){

    //System.out.println("Name: " + mixerInfo[i].getName());
    myMixer = AudioSystem.getMixer(mixerInfo[i]);

if(myMixer.isLineSupported(Port.Info.MICROPHONE)){
    System.out.println("Mic is supported!");
}

} 
```

这让我相信 Fedora 17 或某些 Java 安全管理器不允许我访问麦克风的端口。我该如何改变？为什么在 Windows 上不一样？

# ios - 无法运行 libpd 应用程序

> ID：14350254
> 
> 赞同：0
> 
> 时间：2013-01-16T01:57:40.750
> 
> 标签：ios, puredata

我是 libpd 的新手。我下载了 pd-for-ios 并按要求安装。然后在文件夹中打开一个示例xcode项目，并成功编译项目。

然后当我尝试在我的 iPad 或模拟器上运行该应用程序时，它不会运行。每次我在我的 xcode 中点击“播放”按钮时，它只会说“构建成功”，然后什么也没有发生。

我已经尝试过 DispatcherSample 项目和 WaveTable 项目，并且发生了同样的事情。为了验证，我打开了另一个非 libpd ios 应用程序项目，它可以在模拟器或我的 iPad 上编译和运行。

哪里可能出错了？IOS v6.0.1、Xcode V4.5、Mac OS 10.7.5

谢谢！

卫斌

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:28:26.040

事实证明，构建方案没有正确选择。默认值为“libpd-ios”，当我将其切换为与项目名称相同的名称时，它会运行。

# c++ - C++ 模板样式，旨在更容易理解编译器错误消息

> ID：14350257
> 
> 赞同：3
> 
> 时间：2013-01-16T01:58:02.580
> 
> 标签：c++, templates

我听说有人说，除非预先采用良好的编译器错误消息友好风格，否则 C++ 模板会使项目的开发和维护变得异常困难。

我会很感激指向描述这种风格的资源的指针，并解释它。

虽然我寻求具体的指示，但这个问题可以被解释为开放式的，在这种情况下，我愿意接受关于如何最好地提出它的建议，或者完全从 SO 中删除它，或者让它成为一个 wiki

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:19:51.190

当一系列模板深处发生类型不兼容错误时，模板错误消息往往会变得笨拙。可以这样编写代码，以便使用类型完整性检查技术及早检测模板错误，例如`std::enable_if`确保用于实例化类或函数模板的类型预先满足某些要求。事实上，这就是提议的 C++11 的目标`concepts`，但从未实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:32:43.470

andrei alexandrescu 的书，现代 c++ 设计，可能是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T02:41:14.863

使用编码风格可以做的主要事情是`static_assert`在尝试使用模板参数之前先检查模板参数。[注意：虽然 enable_if 也很有用，但我认为 static_assert 通常更适合此类任务。]

这有助于至少提供一些机会（例如）出现类似于“错误：X 必须是整数类型”的错误消息，而不是类似：“错误：无法实例化`_Detail::_Some_internal_type<double>`”或（总是心爱的）“ _Foo 的重载没有采用 ZZZ 类型的参数，或者没有合适的转换。候选人是：[在此处插入 5 页看似无关的废话]。”

# asp.net-mvc - 注册用户时如何将修改后的RegisterModel值插入数据库？

> ID：14350259
> 
> 赞同：0
> 
> 时间：2013-01-16T01:58:14.097
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-membership

我想创建一个与 MVC 4 模板中的不同的 RegisterModel，并且当新用户想要注册时，他们可以选择是否要成为“Premium”。问题是我不知道如何将 IsPremium 的复选框值传递给 WebSecurity.CreateUserAndAccount 方法并使其工作。

**问题**：当用户想要注册时，有一个 SQL 错误说 IsPremium 不能为空。

**问题**：我需要修改什么才能使 IsPremium chechbox 的值成为创建用户时插入数据库的值？

我还没有找到关于 RegisterModel 和 User 如何相关的解释，这也很好。

显然，IsPremium 是必需的。

（为简单起见，删除了 al [Display] 和验证注释：

```
 public class RegisterModel
{
    public string UserName { get; set; }
    public string Correo { get; set; }
    public string  Twitter { get; set; }
    public string LinkedIn { get; set; }
    public string Perfil { get; set; }
    public bool IsPremium { get; set; }
    public string Password { get; set; }
    public string ConfirmPassword { get; set; }
} 
```

我的用户类是：

```
public class Usuario
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    [EmailAddress]
    public string Correo { get; set; }
    public string UserName { get; set; }
    public string Twitter { get; set; }
    public string Perfil { get; set; }
    public bool IsPremium { get; set; }
    public string LinkedIn { get; set; }
    public List<Evento> Ponencias { get; set; }
    public List<Evento> Asistencias { get; set; }
    public List<Evento> EventosCreados { get; set; }
} 
```

创建新帐户的重要视图部分是：

```
 <fieldset>
    <legend>Formulario de registro</legend>
    <ol>
        <li>
            @Html.LabelFor(m => m.UserName)
            @Html.TextBoxFor(m => m.UserName)
        </li>
        <li>
            @Html.LabelFor(m=>m.Correo)
            @Html.TextBoxFor(m=>m.Correo)
        </li>
        <li>
            @Html.LabelFor(m=>m.Twitter)
            @Html.TextBoxFor(m=>m.Twitter)
        </li>
        <li>
            @Html.LabelFor(m=>m.LinkedIn)
            @Html.TextBoxFor(m=>m.LinkedIn)
        </li>
          <li>
            @Html.LabelFor(m=>m.Perfil)
            @Html.TextBoxFor(m=>m.Perfil)
        </li>
        <li>
            @Html.LabelFor(m=>m.IsPremium)
            @Html.CheckBoxFor(m=>m.IsPremium)
        </li>
        <li>
            @Html.LabelFor(m => m.Password)
            @Html.PasswordFor(m => m.Password)
        </li>
        <li>
            @Html.LabelFor(m => m.ConfirmPassword)
            @Html.PasswordFor(m => m.ConfirmPassword)
        </li>
    </ol>
    <input type="submit" value="Registrarse" />
</fieldset> 
```

最后是我的控制器：

```
 public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            try
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password, model.IsPremium); // THIS IS WHERE I GET AN EXCEPTION
                WebSecurity.Login(model.UserName, model.Password);
                return RedirectToAction("Index", "Home");
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }
        return View(model);
    } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:45:48.400

这解决了我修改 AccountController 中的注册操作：

```
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        try
        {
            WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { IsPremium = model.IsPremium, Twitter= model.Twitter} ); //just add properties to that anonymous object
            WebSecurity.Login(model.UserName, model.Password);
            return RedirectToAction("Index", "Home");
        }
        catch (MembershipCreateUserException e)
        {
            ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
        }
    }
    return View(model);
} 
```

然后，要获得额外的属性：

```
using (var context = new UsersContext())
                {
                    UserProfile profile = context.UserProfiles.First(x => x.UserName == User.Identity.Name);
                    // TODO: do something with the user profile
                } 
```

# symfony - 如何读取使用 Behat 和 Symfony2 执行的查询的 nr 个？

> ID：14350261
> 
> 赞同：0
> 
> 时间：2013-01-16T01:58:32.563
> 
> 标签：symfony, behat

我想开始 Behat-ing 我的应用程序，并希望看到每页执行 nr 个查询（以防我忘记了一些 Join 语句并且 Doctrine 延迟加载关系）。

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T13:20:10.277

如果您使用[Symfony2 Behat Extension ，您应该能够进行与](http://extensions.behat.org/symfony2/index.html)[Symfony2 功能测试中](http://symfony.com/doc/2.0/cookbook/testing/profiling.html)相同的事情。Profiler 只是一个可以很容易地从容器中检索到的服务：

```
$profiler = $kernel->getContainer()->get('profiler'); 
```

然后，您需要为您的响应加载配置文件：

```
$response = $session->getClient()->getResponse();
$token = $response->getHeader('X-Debug-Token');
$profile = $profiler->loadProfile($token); 
```

也可以从`Symfony\Component\HttpFoundation\Response`对象加载配置文件：

```
$profile = $profiler->loadProfileFromResponse($response); 
```

但是，`$session->getClient()->getResponse()`返回一个`Symfony\Component\BrowserKit\Response`.

# php - 在 Codeigniter 中使用 SimpleHTMLDOM

> ID：14350262
> 
> 赞同：1
> 
> 时间：2013-01-16T01:58:34.610
> 
> 标签：php, codeigniter, parsing, customization

我的问题是，我正在寻找使用[Php Simple Html Dom Parser](http://simplehtmldom.sourceforge.net/)但是，该文件似乎只是一组`functions`而不是`class SomeClass{}`声明，因此很难像在我声明它之后那样在 codeigniter 中作为*自定义* `library`嵌入. $this->load->library('someclass');

我已将此代码放在简单 Html Dom 解析器的 pastebin 中：http: [//pastebin.com/0rR6Kiex](http://pastebin.com/0rR6Kiex)

我想知道如何通过我定义的类轻松地使所有这些功能可用：

```
class MyClass{
   ## contents of pastebin here

} 
```

所以我可以加载codeigniter，比如：

```
$this->load->library('myclass');
$thus->myclass->fetchlinks(); 
```

目前，我正在尝试手动要求一个 php 文件，这有点违背了使用 codeigniter 的目的：

```
function fetchlinks(){
    ## include the Simpledom framework #########################################################
    include "localhost/mysite/assets/php/Simpledom.php" or die('Error occured on page');   #
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T05:43:21.463

既然它有一组功能，为什么不把它当作助手呢？

`$this->load->helper('myclass');`

`$this->myclass->fetchlinks();`

# iphone - 在 UITableView 的顶部和底部添加按钮

> ID：14350263
> 
> 赞同：1
> 
> 时间：2013-01-16T01:58:35.210
> 
> 标签：iphone, ios, objective-c, xcode

在我的回合制游戏中，我有一个屏幕显示我目前参加的所有比赛。我为此使用了一个包含 3 个部分的表格视图。

现在我想在显示的游戏上方添加一个“开始新游戏”按钮。在显示游戏下方，我想要一些按钮，例如“商店”等。我可以放置它们，但它们不会滚动，所以我需要将它们放在 tableview 中，以便它们滚动。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:55:42.767

```
UIView *headerContainer = [[UIView alloc]initWithFrame:CGRectMake(X, X, X, X)];
UIButton *btnHeader = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[headerContainer addSubview:btnHeader];

UIView *footerContainer = [[UIView alloc]initWithFrame:CGRectMake(X, X, X, X)];
UIButton *btnFooter = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[footerContainer addSubview:btnFooter];

tblView.tableHeaderView = headerContainer;
tblView.tableFooterView = footerContainer; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T03:41:35.510

UITableView 有一个 tableHeaderView 和一个 tableFooterView 属性。您可以为自定义视图设置此值。

```
@property(nonatomic,retain) UIView *tableHeaderView;                            // accessory view for above row content. default is nil. not to be confused with section header
@property(nonatomic,retain) UIView *tableFooterView;                            // accessory view below content. default is nil. not to be confused with section footer 
```

注意：当您将自定义视图设置为 tableHeaderView/tableFooterViewn 属性时，其宽度将更改为与表格视图一样宽

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T02:04:52.547

我不确定您想要按钮的确切位置，但 UITableView
`@property(nonatomic, retain) UIView *tableHeaderView`
有

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-14T06:26:49.620

将 UIbutton 添加到导航控制器视图，如下代码：

```
let createButton = UIButton.init(frame: CGRect.init(x: 0, y: self.view.frame.height-50, width: self.view.frame.width, height: 50))
createButton.backgroundColor = UIColor.orange
createButton.setTitle("Create", for: UIControlState())
createButton.addTarget(self, action: #selector(didTapCreate(_:)), for: .touchUpInside)
self.navigationController?.view.addSubview(createButton) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T05:42:46.900

你的问题不是很清楚..在tableview中我们给了一个properties property(nonatomic,retain) UIView *tableHeaderView;
@property(nonatomic,retain) UIView *tableFooterView;

甚至你也可以查看这个

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

您也可以在此处添加您的视图。

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
```

这可以用于部分之间的高度

# c# - 模拟大数据对象

> ID：14350273
> 
> 赞同：8
> 
> 时间：2013-01-16T02:00:08.070
> 
> 标签：c#, unit-testing, mocking

我正在为我们的 C# 项目编写单元测试。在我正在测试的几个类中，我们的方法如下所示：

```
public ClassWithLotsOfProperties doStuffINeedToTest(AnotherClassWithLotsOfProperties input)
{
    //do stuff
} 
```

我计划通过模拟几个`AnotherClassWithLotsOfProperties`对象来测试它们，确保我知道`ClassWithLotsOfProperties`当第一个对象传入时会期望什么对象，然后验证我得到了我正在寻找的结果。现在，我们的团队确信被测试的类工作正常，所以我正在运行程序，让它进入`doStuffINeedToTest()`被调用的状态，并在方法的末尾设置一个断点，这样我就可以写下什么在方法的输入和输出对象的状态中。

这种方法的缺点是`AnotherClassWithLotsOfProperties`两者`ClassWithLotsOfProperties`都有几十个属性，这意味着从调试器中写下它们的值，然后在单元测试中设置它们的模拟将是乏味的。有没有更快的方法来设置这些单元测试？现在，我正在使用 NUnit 和 Moq。我们的团队想坚持使用 NUnit，但我愿意看看另一个模拟框架。

特别是，我认为很好的一件事是，如果我可以让 Visual Studio 或模拟框架在我运行程序以设置我想要作为测试基础的方法调用时自动为我生成模拟对象。有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T02:06:21.863

使用[自动夹具](https://github.com/AutoFixture/AutoFixture)。这将使生成测试数据变得非常容易。这是一个例子：

```
var testData = fixture.CreateAnonymous<ClassWithLotsOfProperties>(); 
```

基本上，它将迭代类的所有属性，并为每个属性设置该类型的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T20:53:56.060

最后，我咬紧牙关，在我的代码中手动输入了我所有的虚拟数据。现在测试已经完成并且可以正常工作：3

# css - 仅使用 CSS 的最大高度和最大宽度

> ID：14350278
> 
> 赞同：35
> 
> 时间：2013-01-16T02:00:47.637
> 
> 标签：css, image

在这里给我的第一篇文章。

我正在使用 div 以相同的比例（180wx170h）裁剪缩略图。在处理纵向和横向图像时，我遇到了困难。如果我使用这个对于肖像风格的图像很好：

```
.crop img {max-height:170px; width:auto} 
```

.. 适用于风景风格的图像：

```
.crop img {max-width:180px; height: auto;} is fine for landscape style images. 
```

所以我基本上想裁剪横向的侧面和纵向的顶部/底部。有点像优先的最大高度和最大宽度。

我知道这可以用 PHP 轻松完成，但我真的只知道 CSS，所以这将是我的首选。

我需要保持图像的纵横比。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2015-10-29T16:50:37.090

经过大量其他“解决方案”后的解决方案

```
max-width:100%;
max-height:100%;
height: auto;
width:auto; 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-16T03:31:52.253

**2019年编辑：**

如果要保留`<img>`标签，请查看[`object-fit`](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit)css 属性，跨浏览器的支持非常好。

如果您想在宽度变化时保持纵横比，请尝试[padding-hack](https://css-tricks.com/aspect-ratio-boxes/)。

* * *

据我了解，您有 180x170 像素的块，并且您想用图像完全填充它们。尝试将图像移动到背景并使用[`background-size:cover`](https://developer.mozilla.org/ru/docs/CSS/background-size).

演示[http://jsfiddle.net/heuku/1/](http://jsfiddle.net/heuku/1/)

```
<div style="background-image:url(http://placekitten.com/100/200)"></div>
<div style="background-image:url(http://placekitten.com/200/100)"></div>
<div style="background-image:url(http://placekitten.com/200/200)"></div>

div {
  width:180px;
  height:170px;
  background-repeat:no-repeat;
  background-size:cover;
} 
```

请注意，此解决方案不适用于 IE8 及以下版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-21T17:54:40.050

**编辑：**我改进了解决方案，请参见此处：[https ://stackoverflow.com/a/34774905/1663572](https://stackoverflow.com/a/34774905/1663572)

* * *

我正在使用这个解决方案，当我试图将图像放入正方形（或其他任何东西）并将其居中时，我发现了这个解决方案。它的组合非常出色，您将 padding-bottom 和 height 0 设置为其容器 - 这使得它以固定比率响应。

适用于 IE9 及更高版本。对于 IE8 及以下需要一些 CSS hack。

**HTML**

```
.container {
    height: 0;
    padding-bottom: 100%; /* Or 75% for 4:3 aspect ratio */
    position: relative;
    overflow: hidden;
}
.container img {
    display: inline-block;
    max-width: 90%; /* You can use different numbers for max-width and max-height! */
    max-height: 75%;
    width: auto;
    height: auto;

    position: absolute;
    left: 50%; /* This sets left top corner of the image to the center of the block... */
    top: 50%; /* This can be set also to bottom: 0; for aligning image to bottom line. Only translateX is used then. */
    -webkit-transform: translate(-50%,-50%); /* ...and this moves the image 50 % of its width and height back. */
    -ms-transform: translate(-50%,-50%);
    -o-transform: translate(-50%,-50%);
    transform: translate(-50%,-50%);
}

/* Fallback for IE8 */
@media all\0 { 
    .container img {
        margin: auto;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
    }
} 
```

在这里试试：http: [//jsfiddle.net/thiemeljiri/uhdm4fce/4/](http://jsfiddle.net/thiemeljiri/uhdm4fce/4/)

**注意：**如果使用引导程序，请将类 .container 更改为其他内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T02:07:01.580

你可以试试

```
.crop img {max-height:170px; max-width:180px;} 
```

由于`max-height`和`max-width`是*最大值，*它应该可以工作。浏览器将使图像尽可能大，而不会超出您的尺寸。

请注意，这是未经测试的，但基于[此 W3Schools 页面](http://www.w3schools.com/cssref/pr_dim_max-width.asp)。

希望这可以帮助！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T02:07:27.210

### 你有答案！

尝试：

```
.crop img {max-height: 170px; max-width: 180px;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-18T08:45:14.020

这可能有点晚了，但我发现将所述图像按`<figure>`比例包装，以保持纵横比。

# bash - bash，在命名管道中开球？

> ID：14350280
> 
> 赞同：0
> 
> 时间：2013-01-16T02:00:49.010
> 
> 标签：bash, pipe, tee

以下代码：

```
#!/bin/bash -x
mkfifo pipe 2>/dev/null
tee pipe >/dev/null &
cat pipe 
```

运行时不产生输出，如下所示：

```
$ echo "hi" | ./test.sh
+ mkfifo pipe
+ cat pipe
+ tee pipe
$ 
```

为什么？！我希望`tee`将标准输入复制到命名管道（和`/dev/null`），然后`cat`将命名管道的内容复制到标准输出。为什么它不起作用？！

我正在尝试编写一个更大的 bash 脚本，我真的需要`tee`在其中，用其他东西代替`/dev/null`. 我将意外行为缩小到上面的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T04:02:06.967

当您在后台处理进程时，其标准输入将设置为`/dev/null`

```
#!/bin/bash -x
mkfifo pipe 2>/dev/null
cat - | tee pipe >/dev/null &
cat pipe 
```

所以你需要指定你想要的`stdin`父级，在你的情况下是和之间的`echo`管道`./test.sh`

# javascript - Javascript如何用单字节字符串搜索双字节字符串，反之亦然

> ID：14350281
> 
> 赞同：0
> 
> 时间：2013-01-16T02:00:56.833
> 
> 标签：javascript, search, multibyte

我有一个字符串

```
var str = "か22222"; 
```

我想这样搜索

str.indexOf("か２"); 其中“か２”都是多字节字符，“str”只有“か”作为多字节

但我仍然应该得到 indexOf 的结果为 0。

有什么办法可以做到这一点是 JS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:06:23.320

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:25:30.343

好吧，最简单的事情是

```
var result=str.match(/か[２2]/);
alert("match at "+result.index); 
```

您还可以使用 [１-９] 之类的内容作为字符范围，因为全角数字占用连续的代码点。

一个更通用的解决方案是在某个时候在“多字节”（更好地称为“全宽”）和单宽字符之间进行转换。稍微hacky的转换是将0xfee0添加到相应的半角代码点。假设您要将输入字符串转换为全角形式；你可以这样做：

```
var arr=[];
for(var i;i<str.length;i++){
  arr[i] = str.charPointAt(i);
  i(arr[i]>=0x30 && arr[i]<=0x39) { arr[i] += 0xfee0; }
}
var full_width_string=String.fromCharCode.apply(null,arr); 
```

现在您可以搜索全角字符串。

最好为 Javascript 使用 Unicode 库或规范器。

# dry - Vagrant 中的默认设置

> ID：14350285
> 
> 赞同：0
> 
> 时间：2013-01-16T02:01:45.460
> 
> 标签：dry, vagrant

我在一个 Vagrantfile 中配置了一堆盒子。什么是干燥代码的好方法，这样它就不会重复某些配置命令，例如：

```
Vagrant::Config.run do |config|
  config.vm.define 'box1' do |c|
    c.box = "precise64"
  end
  config.vm.define 'box2' do |c|
    c.box = "precise64"
  end
end 
```

我想这样做：

```
Vagrant::Config.defaults[:box] = 'precise64'
config.vm.define 'box1' do |c|
end
config.vm.define 'box2' do |c|
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:06:41.800

The nicest way I can think of so far is:

```
def defaults(c)
  c.vm.box = 'precise64'
end

config.vm.define 'box1' do |c|
  defaults(c)
end

config.vm.define 'box2' do |c|
  defaults(c)
end 
```

# web-services - Windows 服务上的 ODBC 数据连接

> ID：14350289
> 
> 赞同：2
> 
> 时间：2013-01-16T02:02:21.300
> 
> 标签：web-services, windows-services, odbc, windows-server-2008, database-connection

我有一个控制台应用程序，它通过 ODBC 连接连接到数据库，在 Windows Server 2008 上运行。当我将完全相同的代码复制到 Web 服务中时，它不起作用。为什么会这样/我能做些什么来解决它？

代码是：

 ````
string connectStringGems = "DSN=GF4D;UID=Admin;PWD=pword";

string getInfo = "Select RUC_Expiry from vehicles where rego = '" + rego + "'";

OdbcDataAdapter daGems = new OdbcDataAdapter(getInfo, connectStringGems);

DataSet ds = new DataSet();

daGems.Fill(ds, "GemsUpdate");//The error is here I believe

DataTable dt = ds.Tables["GemsUpdate"];

DataRow row = dt.Rows[0];

use row etc.... 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:17:49.420

您可能正在使用只有创建它的用户才能访问的[用户 DSN 。](http://digital.ni.com/public.nsf/allkb/852559036FB6447380256ADF007C3964)尝试：

*   使用系统 DSN
*   将您的服务配置为以创建 DSN[的用户身份登录](http://www.coretechnologies.com/WindowsServices/FAQ.html#AppNotWorkingFromService)`

# javascript - 如何将 localStorage 数据通过电子邮件发送给客户端

> ID：14350295
> 
> 赞同：1
> 
> 时间：2013-01-16T02:03:52.453
> 
> 标签：javascript, jquery, coldfusion, local-storage

我有一个由几页组成的表格。每个页面都将数据保存到 localStorage。最后一页需要从 localStorage 中提取数据，以便通过电子邮件发送。

如何以可以通过电子邮件发送的格式获取存储在 localStorage 中的数据？

目前，我正在使用存储在 localStorage 中的内容更新 ID，但更新是在呈现页面后发生的，因此 cfsavecontent 没有实现文本更新。

我需要另一种方法来做到这一点，并愿意接受建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:30:11.600

如果您能够收集数据，您可以使用 js 或 jquery 将其作为字符串发布到另一个 ColdFusion 页面。我的偏好是在一个非常小的 iframe 中。

将其放回 CF 后，您可以使用 urldecode() 恢复纯文本并按照您认为合适的方式对其进行处理。这个，

first_name=John&middle_name=T.&last_name=Doe&mobile_phone=(219)+555-1234&home_p‌​hone=(219)+555-1235&email_address=jd123%40msn.com&address=123+Main+Street&city=De‌​nver&state=CO&zip=90210。

对我来说看起来像嵌套列表。外分隔符是“&”，内分隔符是“=”。详细信息取决于您希望电子邮件的外观。

# c - 使用标准 C 库的 C SSL 实现

> ID：14350296
> 
> 赞同：-2
> 
> 时间：2013-01-16T02:04:07.907
> 
> 标签：c, sockets, ssl

我必须在我的应用程序中进行一些 SSL 编程，并且由于许可问题，我试图不使用 OpenSSL 等开源库。有什么办法可以使用标准 C 库来做到这一点？请注意，代码必须在 Windows 和 Linux 上都可以运行。

非常感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:37:22.130

OpenSSL*可*用于闭源商业产品。许可证施加的主要限制是您必须确认该产品包含 OpenSSL 软件。

OpenSSL 和 SSLeay 许可证的所有规定均适用于 OpenSSL。[OpenSSL 和 SSLeay 许可证](http://www.openssl.org/source/license.html)是：

```
 OpenSSL License
  ---------------

/* ====================================================================
 * Copyright (c) 1998-2011 The OpenSSL Project.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1\. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2\. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3\. All advertising materials mentioning features or use of this
 *    software must display the following acknowledgment:
 *    "This product includes software developed by the OpenSSL Project
 *    for use in the OpenSSL Toolkit. (http://www.openssl.org/)"
 *
 * 4\. The names "OpenSSL Toolkit" and "OpenSSL Project" must not be used to
 *    endorse or promote products derived from this software without
 *    prior written permission. For written permission, please contact
 *    openssl-core@openssl.org.
 *
 * 5\. Products derived from this software may not be called "OpenSSL"
 *    nor may "OpenSSL" appear in their names without prior written
 *    permission of the OpenSSL Project.
 *
 * 6\. Redistributions of any form whatsoever must retain the following
 *    acknowledgment:
 *    "This product includes software developed by the OpenSSL Project
 *    for use in the OpenSSL Toolkit (http://www.openssl.org/)"
 *
 * THIS SOFTWARE IS PROVIDED BY THE OpenSSL PROJECT ``AS IS'' AND ANY
 * EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE OpenSSL PROJECT OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 * ====================================================================
 *
 * This product includes cryptographic software written by Eric Young
 * (eay@cryptsoft.com).  This product includes software written by Tim
 * Hudson (tjh@cryptsoft.com).
 *
 */

 Original SSLeay License
 -----------------------

/* Copyright (C) 1995-1998 Eric Young (eay@cryptsoft.com)
 * All rights reserved.
 *
 * This package is an SSL implementation written
 * by Eric Young (eay@cryptsoft.com).
 * The implementation was written so as to conform with Netscapes SSL.
 *
 * This library is free for commercial and non-commercial use as long as
 * the following conditions are aheared to.  The following conditions
 * apply to all code found in this distribution, be it the RC4, RSA,
 * lhash, DES, etc., code; not just the SSL code.  The SSL documentation
 * included with this distribution is covered by the same copyright terms
 * except that the holder is Tim Hudson (tjh@cryptsoft.com).
 *
 * Copyright remains Eric Young's, and as such any Copyright notices in
 * the code are not to be removed.
 * If this package is used in a product, Eric Young should be given attribution
 * as the author of the parts of the library used.
 * This can be in the form of a textual message at program startup or
 * in documentation (online or textual) provided with the package.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1\. Redistributions of source code must retain the copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2\. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3\. All advertising materials mentioning features or use of this software
 *    must display the following acknowledgement:
 *    "This product includes cryptographic software written by
 *     Eric Young (eay@cryptsoft.com)"
 *    The word 'cryptographic' can be left out if the rouines from the library
 *    being used are not cryptographic related :-).
 * 4\. If you include any Windows specific code (or a derivative thereof) from
 *    the apps directory (application code) you must include an acknowledgement:
 *    "This product includes software written by Tim Hudson (tjh@cryptsoft.com)"
 *
 * THIS SOFTWARE IS PROVIDED BY ERIC YOUNG ``AS IS'' AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
 * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
 * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
 * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
 * SUCH DAMAGE.
 *
 * The licence and distribution terms for any publically available version or
 * derivative of this code cannot be changed.  i.e. this code cannot simply be
 * copied and put under another distribution licence
 * [including the GNU Public Licence.]
 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:38:30.950

[OpenSSL 许可证](http://www.openssl.org/source/license.html)中没有关于必须提供源代码的内容。再读一遍。您组织中的某个人被严重误导。

# database - 处理具有参照完整性的多个数据库的最佳方法

> ID：14350297
> 
> 赞同：2
> 
> 时间：2013-01-16T02:04:19.577
> 
> 标签：database

我正在为一个复杂的拍卖网站设计一个在线市场。

鉴于每个数据库的增长潜力和复杂性，我将成员数据库和产品数据库分开。问题是如何处理两个独立数据库之间的参照完整性？关系可以是一对一或一对多。我已经阅读了很多关于使用触发器、将表以只读方式从一个数据库复制到另一个数据库的信息；显然不会以孤立行结束。

我知道网站上有类似的问题，但没有一个具体的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:28:49.583

> 鉴于每个数据库的增长潜力和复杂性，我将成员数据库和产品数据库分开。问题是如何处理两个独立数据库之间的参照完整性？

这可能是一个可以防御的策略，也可能是一场灾难。这部分取决于您的 dbms。在大多数情况下，您会使用多个模式而不是多个数据库来解决此类问题。（从这个意义上说，模式是您在运行[CREATE SCHEMA 语句](http://www.postgresql.org/docs/current/static/ddl-schemas.html)时得到的。）外键引用在多个模式中工作正常。许多支持多个 SQL 模式的 dbms*不*支持对其他数据库的简单外键引用。

MySQL 不支持 CREATE SCHEMA。相反，MySQL 数据库的行为很像 SQL 模式。

> [CREATE SCHEMA 是 CREATE DATABASE 的同义词](http://dev.mysql.com/doc/refman/5.6/en/create-database.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:11:47.917

不要分开。数据库的处理能力取决于托管数据库的服务器的处理能力。如果有 2 个不同的模式，那么您可能会出于任何原因考虑分离。对于相同的模式符合条件的对象，我建议不要分开，而是托管在性能更好的服务器中。

# c# - 如何防止数据抓取有价值的数据 Web 服务？

> ID：14350298
> 
> 赞同：1
> 
> 时间：2013-01-16T02:04:20.880
> 
> 标签：c#, web-services, api, azure, windows-store

我对 Windows 商店应用程序有一个好主意。我想做这个应用程序。但是，它需要一个大型且有价值的数据库，我需要为其创建服务，这样人们就不能轻易窃取它。我的想法可能是在 Azure 上托管一个移动服务（我从未尝试过）并创建一个 .net Web API 项目来接受请求并将 Json 像糖果一样发送到 Windows 8 mvvmclient。但是我不希望有人在应用程序和服务之间来回嗅探我的流量，并弄清楚如何使用我的应用程序和服务获取/发布数据，然后设置他们自己的应用程序/网站以使用我的带宽显示这些数据让他们赚钱。

如何保护我的应用程序到数据库的数据访问，使其无法对我进行逆向工程。

这也是开发这样的大容量 Windows 8 应用程序的最佳设置吗？你有更好的建议吗？

我知道我可以使用 SSL 等来加密往返的流量。我想要保护的是有人使用 Firebug 或 Fiddler 来确定可以发布哪些参数来获取特定记录。然后创建他们自己的站点，该站点仅将我的服务用作端点并虹吸我的数据并嫖娼我的带宽。IE。只是使用萤火虫我知道我可以使用[https://www.google.com/search?q=dallas](https://www.google.com/search?q=dallas)在谷歌上搜索单词 dallas。即使我加密了页面，他们也可以在浏览器中看到这么多。因此，如果有人在他们自己的应用程序中执行相同的获取/发布，他们将获得相同的记录，从而使用我的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:09:54.003

您可以做的最直接的事情是使用类似[OAuth](http://oauth.net/code/)的方式为您的用户设置身份验证。这将允许您确保不会以匿名方式与您的服务进行通信。

一旦您验证了您的请求，您就可以对那些不会影响普通用户的请求进行控制。您可以对请求进行速率限制或限制或任何数量的策略，以使从大部分数据集中抽出非常昂贵的时间明智。

例如，当您注意到大量用户从单个 IP 地址聚集时，您可以开始阻止请求。您可以对每个用户设置合理的限制（例如每分钟 10 次 API 调用，结果集限制为 50）。你明白我敢肯定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:21:17.513

我想我们遇到了同样的问题。我正在开发一个 Windows 8 应用程序，它正在联系基于 Windows Azure 网站构建的 Web 服务。我不希望坏人通过 Fiddler 等工具拦截流量，从而向我的服务发起一些虚假请求。

我在一个邮件组中问了这个问题并得到了一个小费。我从未尝试过，只是为了您的信息。如果您的应用程序需要用户登录，那么用户密码是数据/流量保护的良好种子。您可以使用密码生成密钥对，签署请求并将其发送到服务器以及公钥。然后在服务器端它可以通过公钥验证签名。

使用 HTTPS 是另一种方法。但如你所知，即使是 HTTPS，坏人也可以通过 Fiddler 知道实际数据。

使用证书可能是我认为的另一种解决方案。但我没有找到有关如何从客户端机器安装和选择证书的相关文档。

高温高压

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-16T02:15:11.013

只需通过 HTTPS 提供它，然后他们就无法嗅探它。

# vim - 为什么这两个键绑定中的一个在它们几乎相同时会崩溃？

> ID：14350299
> 
> 赞同：2
> 
> 时间：2013-01-16T02:04:21.683
> 
> 标签：vim

这个问题显然远远超出了我对 Vim 的理解。这两个键绑定仅相差两个字符，否则它们完全相同。

```
" Move viewport up/down.
noremap <C-d> :exe "normal! " . (winheight(".") / 4) . "\<C-e>"<CR>
noremap <C-u> :exe "normal! " . (winheight(".") / 4) . "\<C-y>"<CR> 
```

然而，底部的 ( `<C-u>`) 可以正常工作，而顶部的 ( ) 会导致此错误：

> E114：缺少引号：“\” E15：无效的表达式：“正常！”。(winheight(".") / 4) 。"\"

我已经重新启动 Vim 两次，并确保只有这些命令绑定到它们的键。我也尝试切换它们，以防由于某种原因相关，但`<C-d>`命令仍然崩溃。

那么沃尔多在哪里？

* * *

输出`gvim.exe --version`：

```
VIM - Vi IMproved 7.3（2010 年 8 月 15 日，2010 年 8 月 16 日 10:31:31 编译）
支持 OLE 的 MS-Windows 64 位 GUI 版本
由 george@reilly.org 编译
带有 GUI 的巨大版本。包含 (+) 或不包含 (-) 的功能：
+阿拉伯语 +autocmd +balloon_eval +browse ++builtin_terms +byte_offset +cindent
+clientserver +剪贴板 +cmdline_compl +cmdline_hist +cmdline_info +comments
+隐藏 +cryptv +cscope +cursorbind +cursorshape +dialog_con_gui +diff
+digraphs -dnd -ebcdic +emacs_tags +eval +ex_extra +extra_search +farsi
+file_in_path +find_in_path +float +folding -footer +gettext/dyn -hangul_input
+iconv/dyn +insert_expand +jumplist +keymap +langmap +libcall +linebreak
+lispindent +listcmds +localmap -lua +menu +mksession +modify_fname +mouse
+mouseshape +multi_byte_ime/dyn +multi_lang -mzscheme +netbeans_intg +ole
-osfiletype +path_extra -perl +persistent_undo +postscript +printer +profile
+python/dyn -python3 +quickfix +reltime +rightleft -ruby +scrollbind +signs
+smartindent -sniff +startuptime +statusline -sun_workshop +syntax +tag_binary
+tag_old_static -tag_any_white -t​​cl -tgetent -termresponse +textobjects +title
+工具栏 +user_commands +vertsplit +virtualedit +visual +visualextra +viminfo
+vreplace +wildignore +wildmenu +windows +writebackup -xfontset -xim
-xterm_save -xpm_w32
   系统 vimrc 文件: "$VIM\vimrc"
     用户 vimrc 文件：“$HOME\_vimrc”
 第二个用户 vimrc 文件：“$VIM\_vimrc”
      用户 exrc 文件：“$HOME\_exrc”
  第二个用户 exrc 文件：“$VIM\_exrc”
  系统 gvimrc 文件: "$VIM\gvimrc"
    用户 gvimrc 文件：“$HOME\_gvimrc”
第二个用户 gvimrc 文件："$VIM\_gvimrc"
    系统菜单文件: "$VIMRUNTIME\menu.vim"
编译：cl -c /W3 /nologo -I。-Iproto -DHAVE_PATHDEF -DWIN32 -DFEAT_CSCOPE
-DFEAT_NETBEANS_INTG -DWINVER=0x0400 -D_WIN32_WINNT=0x0400 /Fo.\ObjGOY/ /Ox /GL -DNDEBUG  
/Zl /MT -DFEAT_OLE -DFEAT_MBYTE_IME -DDYNAMIC_IME -DFEAT_MBYTE -DFEAT_GUI_W32
-DDYNAMIC_ICONV -DDYNAMIC_GETTEXT -DFEAT_PYTHON -DDYNAMIC_PYTHON  
-DDYNAMIC_PYTHON_DLL=\"python27.dll\" -DMSWINPS -DFEAT_HUGE /Fd.\ObjGOY/ /Zi
链接：链接 /RELEASE /nologo /subsystem:windows /LTCG:STATUS oldnames.lib kernel32.lib advapi32.lib
shell32.lib gdi32.lib comdlg32.lib ole32.lib uuid.lib /machine:AMD64 /nodefaultlib gdi32.lib version.lib   
winspool.lib comctl32.lib advapi32.lib shell32.lib /machine:AMD64 /nodefaultlib libcmt.lib oleaut32.lib user32.lib
```

我从官方 Vim 下载页面上的链接下载了 Vim：

[http://code.google.com/p/vim-win3264/downloads/list](http://code.google.com/p/vim-win3264/downloads/list)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T02:44:09.800

`noremap`解释`<C-e>`和`<C-y>`之前`exe`一样，`exe`然后输入控制序列，这些序列不一定被正确解释。一种可能的解决方法是定义命令，然后映射到它们：

```
com! ShiftDown exe "norm!" winheight(".")/4 . "<C-e>"
com! ShiftUp exe "norm!" winheight(".")/4 . "<C-y>"
noremap <C-d> :ShiftDown<CR>
noremap <C-u> :ShiftUp<CR> 
```

也可以通过使用`<C-v>` `<C-e>`和`<C-v>` `<C-y>`插入这些字符直接映射命令：

```
noremap <C-d> :exe "norm!" winheight(".")/4 . "<C-v><C-e>"<CR>
noremap <C-u> :exe "norm!" winheight(".")/4 . "<C-v><C-y>"<CR> 
```

或者，`<LT>`可用于插入文字`<`：

```
noremap <C-d> :exe "norm!" winheight(".")/4 . "<Bslash><LT>C-e>"<CR>
noremap <C-u> :exe "norm!" winheight(".")/4 . "<Bslash><LT>C-y>"<CR> 
```

注意虽然文字`\`可能有效，但`:help map`建议使用`<Bslash>`是安全的。

# javascript - 在主干中捕获超时事件

> ID：14350300
> 
> 赞同：1
> 
> 时间：2013-01-16T02:04:22.757
> 
> 标签：javascript, backbone.js

我在我的主干请求上设置了 10000 超时。有没有办法捕捉这些事件？我在我的模型上发现了一个错误事件，然后当我查看`response.status`它时，我总是用谷歌`0`搜索状态 0 的含义，并且根据我的初始搜索，这意味着请求被中断。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:33:05.510

您还需要查看`response.statusText`，以获得人类可读的解释。

`response`是对象的一个​​实例`jqXHR`。这里有很多有价值的信息：http: [//api.jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)

如果您正在收听`error`模型上的事件，您应该能够根据`status`和/或`statusText`找出它是什么类型的错误进行过滤（例如，请求超时与错误请求与未找到）。

此处提供了错误代码列表及其解释： [http ://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

希望有帮助！

# php - 为什么这个递归 PHP 函数不起作用？

> ID：14350302
> 
> 赞同：0
> 
> 时间：2013-01-16T02:04:32.223
> 
> 标签：php, recursive-query

我有以下递归函数，如果它必须循环一次，它不会返回任何东西。我可以在返回条件中回显用户名，它会在循环后显示正确的用户名，并附加一个数字（例如 jdoe_45），但它不会返回它。

```
function createUsername ($conn, $firstname, $lastname, $numerate = false) {

    $fn = preg_replace("/[^A-Za-z0-9 ]/", '', $firstname);
    $ln = preg_replace("/[^A-Za-z0-9 ]/", '', $lastname);

    $arg = ($numerate) ? '_' . rand(11, 99) : '';

    $username = strtolower(substr($fn, 0, 1) . $ln . $arg);

    $sql = "SELECT * FROM users WHERE username = '$username'";
    $rs  = mysql_query($sql, $conn) or die ("Could not execute query.");
    $num = mysql_numrows($rs);

    if ($num == 0) {

        return $username;
    }

    createUsername($conn, $firstname, $lastname, 1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:06:04.873

您忘记获取结果：

```
if ($num == 0) {
    $row = mysql_fetch($rs);
    $username = $row['username'];
    return $username;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:08:07.917

您还需要返回递归调用：

```
return createUsername($conn, $firstname, $lastname, 1); 
```

目前，您仅在`$num == 0`.

# sql - 嵌套查询蓝调...按嵌套对象分组

> ID：14350304
> 
> 赞同：0
> 
> 时间：2013-01-16T02:04:54.803
> 
> 标签：sql, ruby-on-rails

我`Object`有很多`transactions`属于 a 的`type`，然后属于 a `group`。我想从我`Object`的特定组中提取所有交易，例如`blue`。

一直在尝试使用 SQL 和 Activerecord 来做到这一点，但都失败了。

我可以得到这个程序来打印出我想要排序的质量：

```
object.transactions.map { |to| "#{to.transaction_type.transaction_group.name}" } 
```

这是我一直在运行的示例，但显然不起作用。还没找到办法

```
id = Group.find_by_name("name")
object.transactions.where(transaction_type.group_id == id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:10:20.987

你可以做类似的事情：

```
id = Group.find_by_name("name")
object.transactions.
  joins(:type).
  where("types.group_id" => id) 
```

# ruby - 如何获取使用 IO.popen 调用的命令的退出状态？

> ID：14350307
> 
> 赞同：13
> 
> 时间：2013-01-16T02:05:13.187
> 
> 标签：ruby

我正在使用 IO.popen 执行命令并捕获输出，如下所示：

```
process = IO.popen("sudo -u service_user -i start_service.sh") do |io|
    while line = io.gets
      line.chomp!
      process_log_line(line)
    end
  end 
```

如何捕获 *start_service.sh* 的退出状态？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T02:05:13.187

*您可以通过引用$?*来捕获通过 IO.open() 调用的命令的退出状态。只要您在块的末端关闭了管道。

在上面的示例中，您将执行以下操作：

```
 process = IO.popen("sudo -u service_user -i start_service.sh") do |io|
    while line = io.gets
      line.chomp!
      process_log_line(line)
    end
    io.close
    do_more_stuff if $?.to_i == 0 
  end 
```

有关更多信息，请参阅[IO.popen 的 Ruby 核心库条目。](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-popen)

# codeigniter - CodeIgniter - Datamapper ORM - 自动填充实例

> ID：14350312
> 
> 赞同：1
> 
> 时间：2013-01-16T02:06:03.477
> 
> 标签：codeigniter, codeigniter-datamapper

只是想知道是否有一种简单的方法可以在逐个实例的基础上自动填充对象的相关字段，而不是在配置文件中全局，或者为整个类。

我想包含单个实例的所有相关模型，而不需要链接大量`include_related()`函数。像这样的东西会很好：

```
$x = new Model();
$x->include_all_related(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T23:00:40.917

以为我必须把手弄脏核心。无论出于何种原因，我都没有想到我可以访问`$has_many`and`$has_one`数组。

解决方案很简单：

```
class Model extends Datamapper{
    var $has_one = array('foo', 'bar', 'baz');
    var $table = 'models';

    function __construct($id = NULL){
        parent::__construct($id);
    }

    function include_all_related(){
        foreach($this->has_one as $h){
            $this->include_related($h['class']);
        }
        return $this;
    }
} 
```

您可能想知道为什么我在变量中使用`class`键。`$h`在底层，Datamapper ORM 也会跟踪一些其他键，作为更大数组的一部分。如果你打电话`print_r($h)`，你可以看到他们。密钥`class`跟踪`foo`和。_`bar``baz`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:33:43.190

您可以在关系定义上启用它，如果您想要在特定实例上启用它，则需要在运行时更改该实例的关系配置。

# python - 下载文件代码会更改文件内容并影响解密文件的能力

> ID：14350314
> 
> 赞同：0
> 
> 时间：2013-01-16T02:06:14.583
> 
> 标签：python, encryption, urllib

当我使用 Python 和 urlib2 从我的服务器下载文件时，文件内容与应有的内容略有不同。

它们的不同之处在于在下载的文件版本中添加了额外的行（“\r\n”或“\n”）。对于 xml 格式的文件，这不是主要问题，但当我的文件被加密时，这是一个主要问题，因为文件内容略有不同并且无法解密。

我知道是我的下载代码改变了文件内容，而不是服务器上的文件错误，因为我已经使用 FTP 下载了该文件，并且当我以这种方式下载它时发现它具有正确的内容。一些更有用的信息：文件是 ASCII 编码的。我的服务器是 Windows .NET，我不确定 http 响应是 ascii 还是 unicode - 也许这可能导致问题？

如何让 urlib2 从我的服务器下载我的文件并确保内容不会改变？

原创内容：

```
 <clientlist>

       <client>
         <clientauthblah>blah</clientauthblah>
         <version9>blah</version9>
         <version10>blah</version10>
         <companyno>1</companyno>
         <companyname>blah</companyname>
       </client> 
```

当我运行我的下载代码时，这是我得到的内容，这是我无法拥有的，因为我的文件是加密的，这意味着我无法解密文件：

```
 <clientlist>

   <client>

     <clientauthblah>blah</clientauthblah>

     <version9>blah</version9>

     <version10>blah</version10>

     <companyno>1</companyno>

     <companyname>blah</companyname>

   </client> 
```

这是我的代码：

```
# Download
response = urllib2.urlopen("http://www.mywebsite.com/Clients.xml")
output    = open("tempEncrypted.xml",'w')
res       = response.read()
output.write(res)
output.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:28:05.153

这里的问题是这一行：

```
output    = open("tempEncrypted.xml",'w') 
```

Python 默认以文本模式打开文件，这意味着您可能会得到换行符转换。平台差异、通用换行符等使细节变得复杂。

但是如果你有二进制数据，答案很简单：以二进制模式打开它，使用`'wb'`而不是`'w'`：

```
output    = open("tempEncrypted.xml",'wb') 
```

# .net - 如何使用 VBS 以编程方式将 DFS 路径转换为 UNC？

> ID：14350316
> 
> 赞同：3
> 
> 时间：2013-01-16T02:06:16.610
> 
> 标签：.net, vbscript, wmi, unc, microsoft-distributed-file-system

我有几个脚本必须使用 UNC 路径——而不是 DFS——并且希望能够以编程方式从 DFS 路径确定 UNC 路径。例如，我们有类似的东西：

```
\\domain\fs\Home\HomeFolder\MyUserID 
```

我想从中得到这样的 UNC 路径：

```
\\Server1\HomeFolder\MyUserID 
```

我不能指望像 DFSUtil.exe 这样的实用程序可用。它需要在 VBScript 中。

我在 NET 中找到了以下使用 WMI 的代码，但我无法弄清楚将其转换为可用 VBS 的情况：http: [//www.codeproject.com/Tips/158829/Convert-a-file-path-to -a-UNC-路径](http://www.codeproject.com/Tips/158829/Convert-a-file-path-to-a-UNC-Path)

任何人都可以伸出援助之手吗？我迷失在翻译中（不要说 NET）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T09:30:11.283

这是您链接到的内容的最小 VBScript 翻译：

```
Option Explicit

Dim wmi
Dim col
DIm itm

Set wmi = GetObject("winmgmts:\\.\root\cimv2")
Set col = wmi.ExecQuery("Select DeviceID,ProviderName From Win32_LogicalDisk where DriveType=4")

With WScript
  For Each itm in col
    .Echo "========="
    .Echo "DeviceID:" & vbTab & itm.DeviceID
    .Echo "ProviderName:" & vbTab & itm.ProviderName
  Next
End With

Set wmi = Nothing
Set col = Nothing
WScript.Quit 
```

简而言之，我认为这不是您想要的……我认为您必须先映射驱动器，然后再运行它。

更简洁的方法是对 Active Directory 运行查询以查找 DFS 共享定义，但在 AD 中实际查找的位置可能难以识别

# r - 具有两列标准的数据子集

> ID：14350324
> 
> 赞同：1
> 
> 时间：2013-01-16T02:07:27.850
> 
> 标签：r

我想创建一个数据子集，其中包含在 QTR 4 中得分高于 QTR 1（上升趋势）的单元。是否存在 QTR 2 或 3 无关紧要。

```
Unit QTR    Score 
5     4     34  
1     1     22  
5     3     67  
2     4     78  
3     2     39   
5     2     34  
1     2     34  
5     1     67  
1     3     70  
1     4     89
3     4     19 
```

子集将是：

```
Unit  QTR   Score
1     1     22   
1     2     34  
1     3     70 
1     4     89 
```

我尝试过类似这样的变体：upward_subset <- subset(mydata,Unit if QTR=4~Score > QTR=1~Score)

感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:31:07.360

如果数据框被命名为“d”，那么这将在您的测试集上成功：

```
d[ which(d$Unit %in% 
    (sapply( split(d, d["Unit"]), 
         function(dd) dd[dd$QTR ==4, "Score"] - dd[dd$QTR ==1, "Score"]) > 0)) ,
  ]
 #-------------
   Unit QTR Score
2     1   1    22
7     1   2    34
9     1   3    70
10    1   4    89 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:11:06.520

使用的解决方案`data.table`（可能有比我目前更好的版本）。

注意：假设`QTR`给定的值`Unit`是唯一的

`Data:`

```
df <- structure(list(Unit = c(5L, 1L, 5L, 2L, 3L, 5L, 1L, 5L, 1L, 1L, 
      3L), QTR = c(4L, 1L, 3L, 4L, 2L, 2L, 2L, 1L, 3L, 4L, 4L), Score = c(34L, 
      22L, 67L, 78L, 39L, 34L, 34L, 67L, 70L, 89L, 19L)), .Names = c("Unit", 
      "QTR", "Score"), class = "data.frame", row.names = c(NA, -11L
      )) 
```

`Solution:`

```
dt <- data.table(df, key=c("Unit", "QTR"))
dt[, Score[Score[QTR == 4] > Score[QTR == 1]], by=Unit]

   Unit V1
1:    1 22
2:    1 34
3:    1 70
4:    1 89 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T02:37:27.143

分两步的替代方案：

```
result <- unlist(
                 by(
                 test,
                 test$Unit,
                 function(x) x$Score[x$QTR==4] > x$Score[x$QTR==2])
                )

test[test$Unit %in% names(result[result==TRUE]),]

   Unit QTR Score
2     1   1    22
7     1   2    34
9     1   3    70
10    1   4    89 
```

# php - 成功后php注册表中的“邮件传递延迟”

> ID：14350330
> 
> 赞同：0
> 
> 时间：2013-01-16T02:08:20.637
> 
> 标签：php, database

我有一个非常奇怪的问题。请花时间阅读。我是一名大学生，我们可以在凌晨 1:00 之前访问网络（之后`LAN`自动关闭）。

所以，我编写了一个`php`注册脚本。成功注册后，会通过用户的电子邮件 ID 向用户发送一封邮件。（表格工作正常）。我必须进行一些更改，并且在我单击表单上的“注册”按钮（文件托管在服务器上）的那一刻，它击中了`1:00`. 我没有使用有效的身份证件。（它是`xyz@box.com`）

现在 6 小时后，我发现，我`462` `Mail delivery deferred`在管理员收件箱中收到了电子邮件，并且该域已被暂停。

这是我的一段代码，它将在更新数据库后成功注册后运行：（`send_mail`是先前定义的函数）

```
send_mail('Administrator, Tryst IIT Delhi <admin@tryst-iitd.com>',$_POST['email'],'Tryst 2013 - Welcome!','Hi '.$u_name.', \n Thank you for registering for Tryst 2013\. \n\nYour Tryst ID is : '.$u_id.'\nLogin using your email id: '.$_POST['email'].'\nLogin using your password : '.$password.'\n\nSee you at IIT Delhi from 1st - 4th March.\n\nRegards,\nTryst 2013 Team');
            $_SESSION['msg']['reg-success']='We sent you an email with your new password! Login using your password and register for events.</a>';//gets printed on the webpage 
```

我想，原因是当我单击“注册”时， `send_mail()`被执行了，但是由于我的互联网不可用，相同的命令一直在运行。我对么？这种荒谬的各种原因可能是什么？

PS：请编辑`question title`。我猜不出一个更好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:10:14.710

你`$_POST['email']`直接用。允许垃圾邮件发送者使用您的表单并发送电子邮件给任何他们喜欢的人。机器人通常会爬取页面以寻找可以使用电子邮件地址提交的表单，以期劫持您的邮件服务器。因此，大多数注册表单都需要验证码。

# php - 如何重命名以某个单词为前缀的目录中的图像文件

> ID：14350331
> 
> 赞同：0
> 
> 时间：2013-01-16T02:08:35.930
> 
> 标签：php, arrays

我正在为我的客户开发购物车解决方案。购物车足够聪明，可以将文件名与产品 ID 关联起来，所以我要做的就是重命名每个图像文件名以将其与产品 ID 关联起来。（即product_id1 和product_id1.jpg）

```
$filename;

  function renamer(){
foreach(glob('./my_images/*.*') as $filename){

    for($i =0; $i<10;$i++ ){
      rename($filename, "/my_images/product_id".$i.".jpg");
    }  

}

}

renamer(); 
```

由于某种原因，这些文件没有被重命名。我收到一条错误消息：

该系统找不到指定的路径。（代码：3）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:35:40.047

```
rename($filename, "/my_images/product_id".$i.".jpg"); 
```

将尝试将文件移动到`/my_images/product_id`. 请注意，这是在根目录中。如果这是有意的，请确保它`/my_images`存在。否则尝试：

```
rename($filename, "my_images/product_id".$i.".jpg"); 
```

这会将文件添加到`my_images`当前目录中的文件夹中。再次，确保它存在。

# php - 如何从 PHP 中的日期时间中减去时间长度？

> ID：14350337
> 
> 赞同：0
> 
> 时间：2013-01-16T02:09:56.927
> 
> 标签：php, date

假设我有类似的日期时间`2013-01-16-0900`。我怎样才能减去一段时间——比如 30 分钟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:12:00.217

它是完全像您发布的那样存储为字符串，还是实际上是 unix 时间戳？如果它是一个字符串，你可以`strtotime`在它上面运行，然后从中减去`1800`（秒），然后用`date()`. 这可能是最简单的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:16:32.473

这将从提供​​的时间戳中减去 30 分钟。

```
echo date( 'Y-m-d-Hi', strtotime( $timestamp ) - 30 * 60 ); 
```

`$timestamp = '2013-01-16-0900'`在这个例子中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T03:07:24.167

我强烈倾向于使用 PHP 内置的[DateTime 模块](http://php.net/manual/en/class.datetime.php)，并使用 PHP 内置的[DateInterval 模块](http://php.net/manual/en/class.dateinterval.php)增加或减少时间。这允许您执行相当复杂的日期/时间数学，并且仍然遵守时间规则。

另外值得注意的是[DateTimeZone](http://php.net/manual/en/class.datetimezone.php)

示例时间

```
$dt = new DateTime("2013-01-16-0900", new DateTimeZone("America/Los_Angeles"));
$dt->setTimeZone("America/New_York");
$dt->sub(new DateInterval("PT30M"));
print $dt->format('Y-m-d H:i:s'); 
```

组装时间间隔字符串有一些学习曲线，但是一旦你弄清楚了，你应该能够编写一个可重用的函数。

# ios - 动态重新定位 UI 按钮

> ID：14350341
> 
> 赞同：0
> 
> 时间：2013-01-16T02:10:30.017
> 
> 标签：ios, uibutton

我正在尝试更改 UIButton 的位置，它在界面生成器中定位和调整大小。我难住了。

我在末尾尝试了这段代码`viewDidAppear`：

```
[_smartphoneButton setFrame:CGRectMake( 20, 20, 100, 50 )]; 
```

没有什么变化。但我知道`_smartphoneButton`它是有效的，因为它`_smartphoneButton.hidden = YES;`可以工作，也可以改变 UIButton 图像。

和建议？

PS，这些都不起作用：

```
_smartphoneButton.frame = CGRectMake( 20, 20, 100, 50 ); 
```

或者

```
_smartphoneButton.center = CGPointMake(10.0f, 10.0f); 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:22:39.943

同意CodaFi，打个断点看_smartphoneButton的值。
但即使`viewWillAppear`可行，我建议将您的代码移至`viewDidLoad`以下原因。
`viewWillAppear`可以在 ViewController 的实时调用中多次调用，并且您将经常修改按钮的位置。

# python - python argparse - 要么两个可选参数，要么一个都没有

> ID：14350343
> 
> 赞同：34
> 
> 时间：2013-01-16T02:10:35.180
> 
> 标签：python, command-line-arguments, argparse

我有一个使用默认名称和密码的程序。我正在使用 argparse 来允许用户指定命令行选项，并且我想让用户能够为程序提供不同的名称和密码以供使用。所以我有以下内容：

```
parser.add_argument(
    '-n',
    '--name',
    help='the login name that you wish the program to use'
    )

parser.add_argument(
    '-p',
    '--password',
    help='the password to log in with.'
    ) 
```

但是只指定名称或只指定密码没有任何意义，但不指定任何一个都是有意义的。我注意到 argparse 确实有能力指定两个参数是互斥的。但我所拥有的是两个必须同时出现的论点。我如何得到这种行为？（我发现文档中提到的“参数组”，但它们似乎没有解决我的问题[http://docs.python.org/2/library/argparse.html#argument-groups](http://docs.python.org/2/library/argparse.html#argument-groups)）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-16T02:21:27.543

我相信处理这个问题的最好方法是对返回的命名空间进行后处理。`argparse`不支持这一点的原因是因为它一次解析参数 1。检查某些内容是否已经解析很容易`argparse`（这就是互斥参数起作用的原因），但要查看将来是否*会*解析某些内容并不容易。

一个简单的：

```
parser.add_argument('-n','--name',...,default=None)
parser.add_argument('-p','--password',...,default=None)
ns = parser.parse_args()

if len([x for x in (ns.name,ns.password) if x is not None]) == 1:
   parser.error('--name and --password must be given together')

name = ns.name if ns.name is not None else "default_name"
password = ns.password if ns.password is not None else "default_password" 
```

似乎就足够了。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-10-07T17:11:41.587

我知道这已经晚了两年多，但我找到了一种简洁明了的方法：

```
if bool(ns.username) ^ bool(ns.password):
    parser.error('--username and --password must be given together') 
```

`^`是 Python 中的 XOR 运算符。要求在命令行中给出两个参数本质上是一个 XOR 测试。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-16T02:26:13.473

这大概就是我的做法。由于您拥有可以更改选项的现有默认值，因此请定义默认值，但不要将它们用作参数默认值：

```
default_name = "x"
default_pass = "y"
parser.add_argument(
    '-n',
    '--name',
    default=None,
    help='the login name that you wish the program to use'
    )

parser.add_argument(
    '-p',
    '--password',
    default=None,
    help='the password to log in with.'
    )
args = parser.parse_args()
if all(i is not None for i in [args.name, args.password]):
    name = args.name
    passwd = args.password
elif any(i is not None for i in [args.name, args.password]):
    parser.error("Both Name and Password are Required!")
else:
    name = default_name
    passwd = default_pass 
```

# scala - 如何调用 Scala 的 Queue.enqueue(iter: Iterable[B])？

> ID：14350344
> 
> 赞同：6
> 
> 时间：2013-01-16T02:10:36.533
> 
> 标签：scala

在 Scala 中`immutable.Queue`，有两种方法都命名为`enqueue`：

```
 /** Creates a new queue with element added at the end
   *  of the old queue.
   *
   *  @param  elem        the element to insert
   */
  def enqueue[B >: A](elem: B) = new Queue(elem :: in, out)

  /** Returns a new queue with all elements provided by an `Iterable` object
   *  added at the end of the queue.
   *
   *  The elements are prepended in the order they are given out by the
   *  iterator.
   *
   *  @param  iter        an iterable object
   */
  def enqueue[B >: A](iter: Iterable[B]) =
    new Queue(iter.toList reverse_::: in, out) 
```

我不知道如何解决歧义并调用第二个。这是我尝试过的：

```
Welcome to Scala version 2.10.0 (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_07).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import collection.immutable.Queue
import collection.immutable.Queue

scala> val q: Queue[Int] = Queue(1,2,3)
q: scala.collection.immutable.Queue[Int] = Queue(1, 2, 3)

scala> q.enqueue(Iterable(4))
res0: scala.collection.immutable.Queue[Any] = Queue(1, 2, 3, List(4))

scala> q.enqueue[Int](Iterable(4))
<console>:10: error: overloaded method value enqueue with alternatives:
  (iter: scala.collection.immutable.Iterable[Int])scala.collection.immutable.Queue[Int] <and>
  (elem: Int)scala.collection.immutable.Queue[Int]
 cannot be applied to (Iterable[Int])
              q.enqueue[Int](Iterable(4))
                       ^ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T02:24:07.523

棘手，棘手！

我[为此创建了一张票](https://issues.scala-lang.org/browse/SI-6981)。你看，你被类型误导了！

```
scala> q.enqueue(scala.collection.Iterable(4))
res8: scala.collection.immutable.Queue[Any] = Queue(1, 2, 3, List(4))

scala> q.enqueue(scala.collection.immutable.Iterable(4))
res9: scala.collection.immutable.Queue[Int] = Queue(1, 2, 3, 4) 
```

`Iterable`默认导入的是，`scala.collection.Iterable`它可以是可变的或不可变的，但不可变队列需要*不可变* `Iterable`的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-09T16:41:02.293

Scala 2.13 弃用重载，支持`enqueueAll`.

同时，更简单的解决方法是明确提及类型。

```
 val q = Queue[Vector[Int]]()

  val uQ: Queue[Vector[Int]] = q.enqueue(Vector(6)) 
```

# java - 需要帮助在 java 中进行聊天

> ID：14350345
> 
> 赞同：-1
> 
> 时间：2013-01-16T02:10:50.313
> 
> 标签：java, string, compare

好的，所以我一直在开发一个聊天程序。它的 WIP 还没有联网。我需要帮助检查我的“输入”变量是否为空。我尝试检查长度是否等于 0，但它仍然让我输入空白消息。我需要这样做，所以我不能输入空白数据，而且它一直不想工作。

```
if(input.getText().length() == 0) {
    chat.append(username + ": " + input.getText() + "\n");
    input.setText("");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:15:05.937

应该足够简单。

```
if (!input.getText().trim().equals(""))
{
     // Do stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:29:50.727

您还可以使用名为 .isEmpty 的函数

```
if(!input.getText().trim().isEmpty()){
  //send a text
} 
```

# php - 将 Session 变量从 Ajax 发送到 PHP

> ID：14350346
> 
> 赞同：1
> 
> 时间：2013-01-16T02:11:05.790
> 
> 标签：php, jquery, ajax, session

我在一个页面上有 4 个按钮，每个按钮都有自己的按钮。单击按钮时，页面不会刷新，也不会打开新页面。

当按下按钮时，我想通过 Ajax 以会话的形式将该按钮的 ID 发送到 php 文件。4 个按钮中的每一个都有不同的 ID (1,2,3,4)。如果用户单击一个按钮，然后单击第二个按钮等，我想将每个单击的按钮 ID 添加到此会话中。

这是我到目前为止所拥有的：

查询：

```
 $(document).ready(function() {  
     $('a[name=add]').click(function(e) {
     session = $(this).attr('id')

     $.post('sessions.php', {session:session}
    );              
     });
     }); 
```

所以这只是检查是否单击了一个名为“add”的按钮（所有 4 个按钮都具有该名称），并获取按钮 ID 并将其发送到 session.php

PHP：

```
 <?php
    session_start();
    $_SESSION['ids'] = $_POST['session'];  
    ?> 
```

只需创建会话。

我遇到的问题是 PHP 会话正在获取单击的第一个按钮的 ID，仅此而已。如果单击另一个按钮，Ajax 会发布按钮 ID，但会话仅保留单击的第一个按钮的 ID。

如何将单击的下一个按钮的 ID 添加到会话中。

示例：如果单击按钮 1 和 3，我需要会话具有 ID 1 和 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:21:39.447

这是因为 Jquery 将 name 或 id 视为唯一的。这就是为什么您的 javascript 函数只读取第一个按钮的原因。

**解决方案：**

为 4 个按钮使用一个**通用的类名**。(<a class="sessionclass otherclasses" href="#">1</a>)

然后更改您的 jquery 代码：

```
 $(document).ready(function() {  
     $('a.sessionclass').click(function(e) {
         session = $(this).attr('id');    
         $.post('sessions.php', {session:session}
         );              
    });
}); 
```

现在您的 php 会话应该在单击时设置适当的按钮值。

我同意@Lim H。像他建议的那样改变你的php代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:24:32.230

```
session_start();

// prepare $_SESSION['ids']
if ( ! is_array($_SESSION['ids']))
{
    $_SESSION['ids'] = array();
}

// fill $_SESSION['ids'] only with new $_POST['session'] posted
if ( ! in_array($_POST['session'], $_SESSION['ids']))
{
    $_SESSION['ids'][] = $_POST['session'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T02:17:42.823

```
<?php
    session_start();
    $id = $_POST['session']);
    if(!isset($_SESSION['ids'])) {
        $_SESSION['ids']= array();         
    }

    $_SESSION['ids'][$id] = $_POST['session']';
?> 
```

每次发出 AJAX 请求时，您的会话 id 都会重新初始化，因此最终只剩下一个值。因此，您可能希望为会话 id 创建一个数组，并将每个新的 id 值插入到该数组中。

# maven - 如何在使用 maven 打包过程中转换 web.xml？

> ID：14350349
> 
> 赞同：1
> 
> 时间：2013-01-16T02:11:30.120
> 
> 标签：maven, maven-3

我正在将一个 ant 脚本移植到 maven，并且我一直在转换我的 web.xml。

我的 web.xml 在开发期间将以下安全约束设置为 NONE，并为生产服务器生成的战争设置为 CONFIDENTIAL。

```
<security-constraint>
    <web-resource-collection>
      <web-resource-name>HTTPSOnly</web-resource-name>
      <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
      <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

我使用 XSL 脚本来处理从 ant 调用的 web.xml 文件。我希望 Maven 生成战争文件，其中 XSL 已应用于 web.xml，并且转换后的 web.xml 用于生成的战争。

我知道 maven XSL 插件和 maven 配置文件的概念，但我正在努力将它们放在一起，我不确定处理情况的正确 maven 方式是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:53:16.063

Maven的方式是使用过滤。

下面是常规 web.xml 过滤的示例，没有 xsl：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <configuration>
                <webResources>
                    <webResource>
                        <directory>${basedir}/src/main/webapp/WEB-INF</directory>
                        <includes>
                            <include>web.xml</include>
                        </includes>
                        <targetPath>WEB-INF</targetPath>
                        <filtering>true</filtering>
                    </webResource>
                </webResources>
            </configuration>
        </plugin>
    </plugins>
    <filters>
        <filter>src/main/filters/filter-${env}.properties</filter>
    </filters>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
</build> 
```

如果你坚持使用 xsl，你可以使用[Maven xml 插件](http://mojo.codehaus.org/xml-maven-plugin/)，从[示例](http://mojo.codehaus.org/xml-maven-plugin/examples/transform-basic.html)的基础开始工作：

```
 <build>
    <plugins>
      ...
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>xml-maven-plugin</artifactId>
        <executions>
          <execution>
            <goals>
              <goal>transform</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <transformationSets>
            <transformationSet>
              <dir>src/main/xml</dir>
              <stylesheet>src/main/stylesheet.xsl</stylesheet>
            </transformationSet>
          </transformationSets>
        </configuration>
      </plugin>
      ...
    </plugins>
  </build> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T06:15:50.807

有很多方法可以实现这一目标。可能最简单的方法是使用 maven-antrun-plugin [http://maven.apache.org/plugins/maven-antrun-plugin/](http://maven.apache.org/plugins/maven-antrun-plugin/)并调用您现有的 ant 任务

我知道的其他方法是使用变量/占位符和 Maven 过滤（变量替换），看看：[http ://maven.apache.org/plugins/maven-assembly-plugin/examples/single/filtering-some-分发文件.html](http://maven.apache.org/plugins/maven-assembly-plugin/examples/single/filtering-some-distribution-files.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T19:22:34.430

我解决了我的问题，我使用 pom.xml 为 web 应用程序设置了一个 prod 配置文件，其中包含以下插件。这对我有用，因为当项目被导入 eclipse 时，我真的不希望发生任何花哨的事情，我希望一切都可以在开发人员机器上开箱即用。它没有在下面显示，但我还在生成源阶段添加了对 NodeJS 的调用以使用 RequireJS 构建 javascript 前端。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>xml-maven-plugin</artifactId>
    <version>1.0</version>
    <executions>
        <execution>
            <phase>prepare-package</phase>
            <goals>
                <goal>transform</goal>
            </goals>
            <configuration>
                <transformationSets>
                    <transformationSet>
                        <dir>src/main/webapp/WEB-INF</dir>
                        <includes>
                            <include>web.xml</include>
                        </includes>
                        <stylesheet>src/main/webapp/WEB-INF/web.xsl</stylesheet>
                    </transformationSet>
                </transformationSets>
            </configuration>
        </execution>
    </executions>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <configuration>
        <webXml>target/generated-resources/xml/xslt/web.xml</webXml>
        <archiveClasses>true</archiveClasses>
        <warSourceExcludes>META-INF/context.xml</warSourceExcludes>
        <packagingExcludes>
            **/**/context.xml
        </packagingExcludes>
    </configuration>
</plugin> 
```

# three.js - 我们如何在 Three.js 中处理 webgl 上下文丢失事件

> ID：14350350
> 
> 赞同：9
> 
> 时间：2013-01-16T02:11:38.823
> 
> 标签：three.js, webgl

我想在 Three.js 中处理丢失的上下文事件。[这里](http://www.khronos.org/webgl/wiki/HandlingContextLost)有一个很好的文档，但不幸的是，当我将它应用到我的`renderer.domElement`. 我尝试通过单击来丢失上下文，并且其中的一些变量`loseContext()`未定义。

我猜 Three.js 的结构不同。有专家吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T19:00:38.803

您应该能够对渲染器进行初始化，并且当然假设您存储渲染器的变量名为“渲染器”。

```
renderer.context.canvas.addEventListener("webglcontextlost", function(event) {
    event.preventDefault();
    // animationID would have been set by your call to requestAnimationFrame
    cancelAnimationFrame(animationID); 
}, false);

renderer.context.canvas.addEventListener("webglcontextrestored", function(event) {
   // Do something 
}, false); 
```

顺便说一句-looseContext 不是由 Three.JS 定义的，而且它不是此时的标准方法。您可以通过执行以下操作来模拟它。

在 Three.JS 之前加载这个脚本

[https://github.com/vorg/webgl-debug](https://raw.github.com/tparisi/WebGLBook/master/Chapter%207/webgl-debug.js)

然后，在您启动渲染器后，您可以将 lostContext 挂接到画布上。

```
renderer.context.canvas = WebGLDebugUtils.makeLostContextSimulatingCanvas(renderer.context.canvas); 
```

要触发 lostContext 你会这样做。

```
renderer.context.canvas.loseContext(); 
```

然后你也可以通过这样做在一定数量的调用后让它失败。

```
renderer.context.canvas.loseContextInNCalls(5); 
```

# spotify - Libspotify 销毁程序

> ID：14350355
> 
> 赞同：2
> 
> 时间：2013-01-16T02:11:55.567
> 
> 标签：spotify, libspotify

我正在为 C# 开发一个 libspotify 包装器，并且正在编写单元测试。因此，我需要反复创建会话、登录、执行操作、注销、释放和清理会话，为下一次测试做好准备。

我不确定 libspotify 的正确“关闭”程序是什么。“点唱机”示例根本不执行任何关闭 - 主函数只是退出而不调用 sp_session_release。

例如，我应该在释放之前关闭所有回调吗？目前，每当我尝试调用 sp_session_release 时都会崩溃。

干杯汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T18:26:26.893

目前（这是一种非常糟糕的形式），libspotify 仅支持“每个进程一个 sp_session 实例”，并且正如您所见，它在发布时是不可靠的。理论上，在注销后释放会话（并等待注销回调）应该没问题，但我们看到了一些可靠性问题，如您所见。

我们自己的内部 libspotify 单元测试为每个测试创建了一个流程，以真正确保状态被重置，这就是为什么我们在 libspotify 12 中错过了这个问题。

CocoaLibSpotify 的单元测试在一个进程中运行所有测试，但不要在它们之间注销等。

# jboss - 将 JBoss 作为服务运行时如何指定 run.bat 选项？

> ID：14350363
> 
> 赞同：0
> 
> 时间：2013-01-16T02:13:42.767
> 
> 标签：jboss, jboss6.x

在 Windows Server 2008 R2 中，我可以从命令行成功运行 JBoss，指定诸如“-b 0.0.0.0”之类的选项。但是，我想将 JBoss 作为 Windows 服务运行。我知道我从命令行运行 /Path/To/JBoss/bin/service.bat install ，这基本上在计算机启动时运行 start.bat 。如何配置服务以使用 -b 0.0.0.0 的命令行参数启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T19:31:03.817

[如何将作为服务运行的 JBoss AS 6 绑定到 0.0.0.0](https://stackoverflow.com/questions/7171875/how-can-i-bind-a-jboss-as-6-running-as-service-to-0-0-0-0?rq=1)？

你可以在`-b 0.0.0.0`里面硬编码`run.bat`。

顺便说一句，请考虑按照[RunJBossAsAServiceOnWindows wiki的建议使用](https://community.jboss.org/wiki/RunJBossAsAServiceOnWindows)[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/product-overview.html)或[YAJSW](http://yajsw.sourceforge.net/)。它允许在配置中指定各种服务参数。

# backbone.js - Backbone js 路由/视图关系

> ID：14350364
> 
> 赞同：1
> 
> 时间：2013-01-16T02:13:45.720
> 
> 标签：backbone.js, meteor, backbone-views, backbone-routing

我正在使用 Meteor 构建应用程序，但无法理解 Routes 和 Views 之间的关系。我的路由器工作正常，但是在对调用新视图进行研究后感到困惑。

我使用 App.navigate 吗？我是否称其为：

```
var newView = new MyView(); 
```

在适当的路由器功能范围内？这是我正在使用的代码（有效），我的应用程序只有两个页面 - 索引页面和项目视图：

```
var Aphorism = Backbone.Router.extend({
  routes: {
    "saying/:id": "showSaying"
  },
  showSaying: function (id) {
    alert('Saying id ' + id + '.');
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:44:25.473

您定义路由器中存在哪些路由。你通常只需要其中一个，除非你有一个非常复杂的应用程序。

然后在应用程序中连接链接和按钮以在单击时执行 app.navigate。您可以使用视图来执行此操作，也可以使用 jQuery 之类的东西自己执行此操作，这取决于您。

例如：

```
<div id="myButton">Click me!</div>

var myView = Backbone.View.extend({
  el: "#myButton",
  events: {
    "click": "go"
  },
  go: function() {
    myRouter.navigate("/someUrl", {trigger: true});
  }
}); 
```

# drupal - Drupal 和 NFS 目录

> ID：14350366
> 
> 赞同：0
> 
> 时间：2013-01-16T02:13:57.247
> 
> 标签：drupal, nfs, file-sharing, nas

我有 2 个并行的 Drupal Web 服务器正在运行（一起为一个 Drupal 实例服务），现在我需要安装 NFS。我在多 Drupal 服务器方面的经验是，每个 Drupal 实例（服务器）都使用它们自己的聚合 JS + CSS 文件（存储在：`sites/default/files/js`和`sites/default/files/css`文件夹中），这些文件不能被普遍使用。（两个服务器的文件不能相同。它们使用自己的文件。）

基于这些问题，我的问题是：

*   NFS 在多 Drupal 服务器之间实际上是如何工作的？
*   哪些`directories`将/需要在它们之间共享？
*   聚合文件会发生什么？
*   Web 用户上传路径和文件会发生什么情况？（需要 Drupal 中的任何配置？）

有人可以分享这些知识/经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T12:45:15.573

您完全可以使用 NFS 和 Drupal。

我不明白你为什么不想在两者之间共享文件目录。

实际上，您有两种解决方案：

*   1) 共享所有源代码树，从 web 目录根目录开始，如果您有私有文件的外部目录，甚至更早
*   2）仅共享移动目录，并通过一些 rsync 命令在任何升级之前和之后同步所有基于代码的代码。在这种情况下，您**需要**在服务器之间共享：
*   **文件**目录（project/www/site/default/files、project/www/site//files）
*   **私有**文件目录（项目/私有）<--这是一个例子
*   php**临时上传**路径（例如 project/tmp），检查两个服务器是否使用正确的文件夹（这是一个 php 设置）并且该文件夹是共享的。

在 Drupal7 之前，我会使用解决方案 1，现在 Drupal 在很多情况下启动的内部文件系统树遍历的数量使得它在慢速文件系统上非常糟糕（并且 NFS 通常很慢）。在禁用所有文件系统检查（apc.stat、stat.ctime 等）的情况下使用 APC 并不会阻止 Drupal 在很多情况下尝试访问文件系统上的每个文件。所以解决方案2是首选。

对于此类安装，我没有遇到任何文件聚合问题。

# google-maps - 谷歌地图 RichMarker 事件

> ID：14350369
> 
> 赞同：0
> 
> 时间：2013-01-16T02:14:03.643
> 
> 标签：google-maps, events, firefox

我的事件在谷歌地图（APIv3）和 RichMarkers 的 Chrome 和 IE10 中运行良好。问题是，相同的代码在 Firefox19 上*发生了 undefined 事件*。因此，此代码适用于 Chrome 和 IE10...

```
google.maps.event.addListener( marker, 'mouseover', function(event) {
        console.log(event);
}); 
```

但不是在 Firefox 上。有趣的是，将 CLICK 事件附加到地图对象确实可以按您的预期工作。事件对象在所有浏览器的被调用函数中都是可见的。那么，有没有人知道如何解决这个问题？我真的需要继续传递事件对象，因为我有使用它进行定位等的函数。

通常，我会使用 jQuery 附加事件来解决这个问题，但这不是一个选项。

干杯

电脑断层扫描

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:25:40.043

没有鼠标悬停事件：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/docs/reference.html)

将鼠标悬停事件应用于标记的内容（内容必须是节点）

# python - x == "N" 或 "No" 的 if-branch 始终运行

> ID：14350370
> 
> 赞同：0
> 
> 时间：2013-01-16T02:14:14.157
> 
> 标签：python, if-statement, syntax, or-operator

> **可能重复：**
> [为什么 `letter==“A” 或 “a”` 总是评估为 True？](https://stackoverflow.com/questions/4360066/why-does-letter-a-or-a-always-evaluate-to-true)

当我在我的程序中运行它时，问题会通过，但是无论答案如何，“否”选项总是会运行。如果我切换选项顺序，“Y”选项只会运行，它总是会直接开始。我确定我错过了一些简单的东西，我只是不知道是什么。

```
infoconf = raw_input("Is this information correct? Y/N: ")

    if infoconf == "N" or "No":
        print "Please try again."
    elif infoconf == "Y" or "Yes":
        start()
    else:
        print "That is not a yes or no answer, please try again." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:18:27.933

应该是

```
infoconf = raw_input("Is this information correct? Y/N: ")

#you wrote:  infoconf == "N" or "No" but should be:
if infoconf == "N" or infoconf == "No": 
  print "Please try again."
#you wrote: infoconf == "Y" or "Yes" but should be
elif infoconf == "Y" or infoconf == "Yes": 
  start()
else:
  print "That is not a yes or no answer, please try again." 
```

简短说明：

```
when value of x = 'N'
x == 'N' or 'No' will return True
when value of x = 'Y'
x == 'N' or 'No' will return 'No' i believe this is not what you want 
```

在另一边

```
when value of x = 'N'
x == 'N' or x == 'No' will return True
when value of x = 'Y'
x == 'N' or x == 'No' will return False i believe this is what you want 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:38:07.603

Python 的解释`infoconf == "N" or "No"`与你想象的不同。这在某种程度上是“运算符优先级”的情况，您的条件被解析为`(infoconf == "N") or ("No")`.

现在，`infoconf == "N"`可能是也可能不是真的，但`"No"`它是“某事”，当被视为逻辑时，评估为真。实际上，您的条件`infoconf == "N" or true`将始终为真。

正如许多其他人所建议的那样，与您的第二个逻辑术语进行比较就可以了`infoconf`。`"No"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T02:41:26.927

我个人会做这样的事情：

```
infoconf = raw_input("Is this information correct? Y/N: ")

if infoconf.lower().startswith('n'):
   # No
elif infoconf.lower().startswith('y'):
   # Yes
else:
   # Invalid 
```

这意味着用户可以回复“Y/y/yes/yeah”表示是，而“N/n/no/nah”表示否。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T02:53:08.603

在 Python 中，这样做会更容易一些：

```
infoconf = raw_input("Is this information correct? Y/N: ")

if infoconf in ["N", "No"]:
    print "Please try again."
elif infoconf in ["Y", "Yes"]:
    start()
else:
    print "That is not a yes or no answer, please try again." 
```

正如其他人所说，`if infoconf == "N" or "No"`等同于`if (infoconf == "N") or "No"`，并且由于`"No"`（作为非空字符串）计算结果为 True，因此该语句将始终为真。

此外，为了对输入不那么挑剔，您可能希望`infoconf = infoconf.strip().lower()`在进行测试之前执行此操作（然后与小写版本进行比较）。

# css - CSS 过渡问题

> ID：14350373
> 
> 赞同：2
> 
> 时间：2013-01-16T02:14:24.517
> 
> 标签：css, tabs, hover, transition

我试图让选项卡（作为菜单）偏移屏幕，当有人将鼠标悬停在它上面时，它会向下过渡以显示更多选项卡。我的代码是这样的：

```
.tab:hover {
    position: relative; 
    top: 45px;
    -webkit-transition: all 0.5s ease-in-out;
    -moz-transition: all 0.5s ease-in-out;
    -o-transition: all 0.5s ease-in-out;
    -ms-transition: all 0.5s ease-in-out;
    transition: all 0.5s ease-in-out;
} 
```

当我将鼠标悬停在图像上时，它会正确地向下过渡。但是，当我离开选项卡时，它会弹回原位。我想要它做的是过渡回原来的位置，而不是快照。为了实现这一点，我从代码中遗漏了什么？

**更新：**

我解决了这个问题。我为 just 制作了一个新的 CSS 样式集，`.tab`并放入了过渡 AND `top: 0px`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:17:31.997

与其放在 上`:hover`，不如放在`transition`上`.tab`。

# html - 无法摆脱图像之间的空格和边距

> ID：14350376
> 
> 赞同：0
> 
> 时间：2013-01-16T02:15:05.547
> 
> 标签：html, css, image-resizing

我一直在做一个项目，我必须将 Excel 表格的图像放在一起。它应该看起来像所有图像中的唯一表，最后两个应该并排。我试着写点东西，但是图像之间的空间和最后两张图像之间的边距现在让我很头疼。您的帮助将不胜感激。

```
 //***CSS file

  .crop img 
   {
    height: 791px;
    margin-bottom: 0;
    margin-left: 0;
    margin-right: 0;
    margin-top: 0;
    width: 850px;
    display: block;
   }
  .LeftTable 
   {
     float: left;
   }

  .RightTable 
  {
    float: right;
    width: 400px;  //when increasing over 400px, the image on right gets closer but goes underneath of the one on left side.
  }

  //**HTML file
   <div class="crop">
      <img src="QATables/image1.png">
      <img src="QATables/image2.png">
      <img src="QATables/image3.png">
      <img src="QATables/image4.png">
      <div class="LeftTable">
         <img src="QATables/image5.png">
      </div>
      <div class="RightTable">
         <img src="QATables/image6.png">
      </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:04:52.440

我想补充一下 MathSquared11235 的答案。它总是有助于重置边距和填充。让我再说一遍......它总是有助于重置边距和填充。不同的浏览器有不同的默认边距和内边距，如果不重新设置，就不可能让你的网站在所有浏览器中看起来都一样。这也可能是您当前使用的浏览器所面临的问题，可能会“添加”不需要的边距或填充。并且不要只在特定元素上重置它们，例如建议的“div”。我建议把它放在你的css的顶部......

// * { 边距：0; 填充：0；}

星号 (*) 仅表示“一切”。因此，在您自己添加之前，所有内容的边距为 0，填充为 0。是的，您需要为每个元素添加所需的边距和填充......但这是一件好事，而不是让浏览器单独为您决定。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:28:05.707

我不确定我是否完全理解你在做什么，但我已经尽我所能回答了这个问题。如果我误解了，请澄清，我会再试一次。

假设您只想确保最后一张图片与倒数第二张图片完美对齐，您可以将浮动从右到左更改，这是一个 jsfiddle：http: [//jsfiddle.net/mcabrams/qB9fA/](http://jsfiddle.net/mcabrams/qB9fA/)

// 相关代码：

```
 .LeftTable 
   {
     float: left;
   }

  .RightTable 
  {
    float: left;
    width: 400px;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:31:15.743

你需要设置它`.crop{ width: 1700px; }`，`.right{ float: left; }`因为没有空间把它放在左边的img旁边。

jsfiddle：http: [//jsfiddle.net/2usCh/](http://jsfiddle.net/2usCh/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T02:22:11.603

如果您使用的是 Internet Explorer，请知道它非常有问题。我的意思是*非常*故障。我在另一篇 SO 帖子上读到，不幸的是，我现在找不到，您的故障原因可能是 HTML 中的换行符，IE*非常*有用地认为是您想要放入文本中的排版空间。

另外，你可能会做

```
div {margin: 0; padding: 0;} 
```

如果您的布局允许。它将删除图像周围的任何空间。

希望这可以帮助！

# javascript - 范围或功能提升问题？我不确定

> ID：14350380
> 
> 赞同：1
> 
> 时间：2013-01-16T02:15:25.703
> 
> 标签：javascript

如下所示，我制作了一个简单的高分数组，将其保存到本地存储并添加到用户提示中。

作为一个独立的文件，它工作得很好。或者至少看起来是这样。

但是，当我尝试将其集成到更大的应用程序中时，我的全局变量 allScores 似乎存在范围问题。数组的长度保持在 0。我检查了是否有任何变量重复，但我没有。

我一直在尝试阅读有关函数提升和范围的信息。我不确定为什么下面的代码作为一个独立文件工作，但是当我将它集成到我更大的应用程序中时，我遇到了范围问题。

我应该如何以不同的方式做到这一点？由于我是 JavaScript 新手，因此我的最佳实践很可能会被取消。感谢您的指导。谢谢。

```
var allScores = [];

function saveScore() {

if (allScores.length === 0) {
    allScores[0]= prompt('enter score', '');
    localStorage ['allScores'] = JSON.stringify(allScores);
}

else if (allScores.length < 3) {
    var storedScores = JSON.parse(localStorage ['allScores']);
    storedScores = allScores;
    var injectScore = prompt('enter score', '');
    allScores.push(injectScore);
    allScores.sort(function(a, b) {return b-a});
    localStorage ['allScores'] = JSON.stringify(allScores);
}

else {
    var storedScores = JSON.parse(localStorage ['allScores']);
    storedScores = allScores;
    var injectScore = prompt('enter score', '');
    allScores.pop();
    allScores.push(injectScore);
    allScores.sort(function(a, b) {return b-a});
    localStorage ['allScores'] = JSON.stringify(allScores);
}
document.getElementById('readScores').innerHTML = allScores;
}** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:52:59.700

你考虑过 JS 闭包吗？这里有一些东西给你一个想法..

```
var scoreboard = (function () {
    var _privateVar = "some value"; //this is never exposed globally
    var _allScores = [];

    return {
        getAllScores: function() { //public
            return _allScores;
        },
        saveScore: function(value) { //public
            _allScores.push(value);
        }
    };
})();

alert(scoreboard.getAllScores().length); //0
scoreboard.saveScore(1);
alert(scoreboard.getAllScores().length); //1
alert(scoreboard._privateVar); //undefined
alert(scoreboard._allScores); //undefined 
```

这样你的变量和函数就不会暴露给 window 对象，你也不需要担心重复或作用域。唯一必须唯一的变量是闭包函数的名称（`scoreboard`在本例中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:50:55.650

由于您在问题中提到了最佳实践，因此我已经重构了您的代码，以显示一些可能对您和其他人将来有所帮助的实践。下面将列出此重构中使用的概念。

```
var saveScore = (function () { /* Begin IIFE */
    /*
    The variables here are scoped to this function only.
    They are essentially private properties.
    */
    var MAX_ENTRIES = 3;

    /*
    Move the sorting function out of the scope of saveScore,
    since it does not need any of the variables inside,
    and possibly prevent a closure from being created every time
    that saveScore is executed, depending upon your interpreter.
    */
    function sorter(a, b) {
        return b - a;
    }

    /*
    As far as your example code shows, you don't appear to need the
    allScores variable around all the time, since you persist it
    to localStorage, so we have this loadScore function which
    pulls it from storage or returns a blank array.
    */
    function getScores() {
        var scores = localStorage.getItem('scores');
        return scores ? JSON.parse(scores) : [];
        /*
        Please note that JSON.parse *could* throw if "scores" is invalid JSON.
        This should only happen if a user alters their localStorage.
        */
    }

    function saveScore(score) {
        /* Implicitly load the scores from localStorage, if available. */
        var scores = getScores();

        /*
        Coerce the score into a number, if it isn't one already.
        There are a few ways of doing this, among them, Number(),
        parseInt(), and parseFloat(), each with their own behaviors.

        Using Number() will return NaN if the score does not explicitly
        conform to a textually-represented numeral.
        I.e., "300pt" is invalid.

        You could use parseInt(score, 10) to accept patterns
        such as "300pt" but not anything with
        leading non-numeric characters.
        */
        score = Number(score);

        /* If the score did not conform to specifications ... */
        if (isNaN(score)) {
            /*
            You could throw an error here or return false to indicate
            invalid input, depending on how critical the error may be
            and how it will be handled by the rest of the program.

            If this function will accept user input,
            it would be best to return a true or false value,
            but if a non-numeric value is a big problem in your
            program, an exception may be more appropriate.
            */

            // throw new Error('Score input was not a number.');
            // return false;
        }

        scores.push(score);
        scores.sort(sorter);

        /*
        From your code, it looks like you don't want more than 3 scores
        recorded, so we simplify the conditional here and move
        "magic numbers" to the header of the IIFE.
        */
        if (scores.length >= MAX_ENTRIES) {
            scores.length = MAX_ENTRIES;
        }
        /* Limiting an array is as simple as decreasing its length. */

        /* Save the scores at the end. */
        localStorage.setItem('scores', JSON.stringify(scores));

        /* Return true here, if you are using that style of error detection. */
        // return true;
    }

    /* Provide this inner function to the outer scope. */
    return saveScore;

}()); /* End IIFE */

/* Usage */
saveScore(prompt('Enter score.', '')); 
```

如您所见，将您的分数处理逻辑封装在此函数上下文中，几乎没有任何东西可以在不使用接口的情况下篡改内部。从理论上讲，您的`saveScore`函数可以被其他代码取代，但`IIFE`'s 上下文的内部仅对那些有权访问的代码是可变的。虽然[标准化的 ECMAScript](https://stackoverflow.com/questions/2821509/can-you-use-constant-variables-in-javascript)中还[没有常量，](https://stackoverflow.com/questions/130396/are-there-constants-in-javascript) *但*这种模块模式方法提供了一个不错的解决方案，结果可预测。

*   [**`IIFE`**](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)，一个立即调用的函数表达式，用于创建我们的模块
*   [**`DRY`**](http://c2.com/cgi/wiki?DontRepeatYourself), 不要重复自己：代码重用
*   [**幻数**](https://stackoverflow.com/questions/47882/what-is-a-magic-number-and-why-is-it-bad)及其消除
*   [**将字符串类型强制**转换为数字](https://stackoverflow.com/questions/4090518/string-to-int-use-parseint-or-number)
*   [**错误处理**](https://stackoverflow.com/questions/99683/which-and-why-do-you-prefer-exceptions-or-return-codes)，以及区分异常或返回代码的使用。相关[：](https://stackoverflow.com/questions/1736146/why-is-exception-handling-bad)[8、9](https://stackoverflow.com/questions/1744070/why-should-exceptions-be-used-conservatively) _

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T03:19:42.447

在无法访问您的环境的情况下，您可以做的最好的事情是使用 firefox 开发工具（或获取 firebug）在您的`saveScore`函数中放置一个断点。您可以逐行逐行检查值，甚至可以在控制台窗口 (REPL) 中评估当前范围内的表达式。

[https://developer.mozilla.org/en-US/docs/Tools/Debugger](https://developer.mozilla.org/en-US/docs/Tools/Debugger) - 使用 Firefox

[http://getfirebug.com/javascript](http://getfirebug.com/javascript) - 带有 firebug（一个 firefox 插件）

如果你在做网络开发，这些都是无价的资源，所以花一些时间来学习如何使用它们。（它们会为你节省更多的时间！）

# java - Java中的静态嵌套类

> ID：14350384
> 
> 赞同：3
> 
> 时间：2013-01-16T02:15:57.520
> 
> 标签：java, inner-classes, static-members

我不确定为什么这段代码会编译......引用Java教程：

> 与静态类方法一样，静态嵌套类不能直接引用在其封闭类中定义的实例变量或方法——它只能通过对象引用来使用它们。

源：[http ://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

```
public class StaticNested {

    private String member;
    private static String staticMember;

    static class StaticNestedClass {
        private void myMethod() {
            System.out.println(staticMember);
            StaticNested nested = new StaticNested();
            System.out.println(nested.member);
        }
    }
} 
```

我没想到能够直接访问成员，但是代码编译得很好。我误解了Java规范吗？

抱歉格式化，我在浏览器+帖子编辑器上苦苦挣扎。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T02:17:37.787

您**没有**直接访问实例成员。

`staticMember`正在访问一个非实例成员，并且`nested.member`正在通过对象引用访问一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:22:37.290

这是正确的行为。`String member`规范的意思是（在您的代码示例中）您不能直接在静态嵌套类中访问非静态成员字段，例如

```
public class StaticNested {

    private String member;
    private static String staticMember;

    static class StaticNestedClass {
        private void myMethod() {
            System.out.println(staticMember);
            System.out.println(member);//<-here you will get compilation error
        }
    }
} 
```

但是由于非静态字段属于类的对象，您可以像在代码中一样参考该对象来访问它

```
StaticNested nested = new StaticNested();
System.out.println(nested.member); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T02:28:52.973

您正在通过实例（非静态）访问它。

这不会*编译*：

```
System.out.println(member); 
```

编译器消息：

> 无法对非静态字段成员进行静态引用

# linux - 在 Linux 和 Mac 的命令行上使用 svn。如何绕过用户名和密码

> ID：14350396
> 
> 赞同：0
> 
> 时间：2013-01-16T02:17:41.910
> 
> 标签：linux, macos, svn

> **可能重复：**
> [从控制台使用 Subversion 时如何保存密码](https://stackoverflow.com/questions/2899209/how-to-save-password-when-using-subversion-from-the-console)

在 Linux 和 Mac 的命令行上使用 svn。如何绕过用户名和密码。

有人可以告诉我是否可以在 linux 和 mac 上以某种方式设置 svn 以停止询问用户名和密码...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:20:03.770

一种常见的方法是通过在远程存储库中注册您的公共 ssh 密钥来使用 svn+ssh。然后，您可以使用 ssh-agent 保持“在本地进行身份验证”，而 ssh 协议会负​​责其余的工作。

一些存储库有关于 ssh 使用的 HOWTO，参见例如[这里的 Sourceforge](http://sourceforge.net/apps/trac/sourceforge/wiki/SSH%20keys)。

# python - 在 Python 中替换列表中的选定元素

> ID：14350400
> 
> 赞同：7
> 
> 时间：2013-01-16T02:18:12.597
> 
> 标签：python, list, list-comprehension, slice

我有一个清单：`mylist = [0, 0, 0, 0, 0]`

我只想用一个共同的数字替换选定的元素，比如第一个、第二个和第四个`A = 100`。

一种方法：

```
mylist[:2] = [A]*2
mylist[3] = A
mylist
[100, 100, 0, 100, 0] 
```

我正在寻找一种单线或更简单的方法来做到这一点。更通用和灵活的答案是可取的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T02:31:14.427

特别是因为你要替换相当大的一部分`list`，我会一成不变地这样做：

```
mylist = [100 if i in (0, 1, 3) else e for i, e in enumerate(mylist)] 
```

`list`在 Python 中，创建一个 new是单行的，而改变 a`list`需要一个显式循环，这是有意的。通常，如果你不知道你想要哪个，你想要新的`list`. （在某些情况下它更慢或更复杂，或者你有一些其他代码引用了相同的代码`list`并且需要看到它发生了变异，或者其他什么，这就是为什么这是“通常”而不是“总是”。）

如果您想多次执行此操作，我会将其包装在一个函数中，正如 Volatility 所建议的那样：

```
def elements_replaced(lst, new_element, indices):
    return [new_element if i in indices else e for i, e in enumerate(lst)] 
```

我个人可能会把它做成一个生成器，所以它会产生一个迭代而不是返回一个列表，即使我永远不需要它，只是因为我那样愚蠢。但如果你真的*需要*它：

```
myiter = (100 if i in (0, 1, 3) else e for i, e in enumerate(mylist)) 
```

或者：

```
def elements_replaced(lst, new_element, indices):
    for i, e in enumerate(lst):
        if i in indices:
            yield new_element
        else:
            yield e 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:24:29.367

```
def replace_element(lst, new_element, indices):
    for i in indices:
        lst[i] = new_element
    return lst 
```

这绝对是一个更通用的解决方案，但不是单行的。例如，在您的情况下，您会调用：

```
mylist = replace_element(mylist, 100, [0, 1, 3]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T02:26:52.727

如果你不反对使用 Numpy 支持这一点`np.ndarray`：

```
>>> a = np.zeros(5)
>>> a[[0,1,3]] = 100
>>> a
array([ 100.,  100.,    0.,  100.,    0.]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T02:20:47.477

这是你要找的吗？列出要更改的索引，然后遍历该列表以更改值。

```
els_to_replace = [0, 1, 3]

mylist = [0, 0, 0, 0, 0]

for index in els_to_replace:
    mylist[index] = 100

mylist
Out[9]: [100, 100, 0, 100, 0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T02:31:49.073

不是这个的超级粉丝，但你可以试试这个（尽管我认为以上所有内容都更加简洁易读）：

```
In [22]: from operator import setitem

In [23]: mylist = [0, 0, 0, 0, 0]

In [24]: indeces_to_replace = [0, 1, 3]

In [25]: _ = map(lambda x: setitem(mylist, x, 100), indeces_to_replace)

In [26]: mylist
Out[26]: [100, 100, 0, 100, 0] 
```

除了值得怀疑的可读性和导入的需要之外，@abarnert 还指出了一些额外的问题，即它`map`仍然创建了一个不必要的列表（它被丢弃`_`但仍然创建了）并且它在 Python 3 中不起作用，因为`map` [返回一个](http://docs.python.org/3.0/library/functions.html#map)Python 3.x 中的[迭代器。](http://docs.python.org/3.0/library/functions.html#map)您可以使用这[六个](http://packages.python.org/six/)模块`map`从 Python 2.x 模拟 Python 3.x 中的行为，并结合`collections.deque`（再次如 @abarnert 建议的那样），您可以实现相同的输出，而无需在内存中创建额外的列表，因为`deque`可以包含最多`0`项目的将丢弃它从`map`迭代器接收到的所有内容（请注意，使用`six`,`map`是通过使用 模拟的`itertools.imap`）。

同样，绝对没有必要使用它 - 上面/下面的每个解决方案都更好:)

```
In [1]: from collections import deque

In [2]: from six.moves import map

In [3]: from operator import setitem

In [4]: mylist = [0, 0, 0, 0, 0]

In [5]: indeces_to_replace = [0, 1, 3]

In [6]: deque(map(lambda x: setitem(mylist, x, 100), indeces_to_replace), maxlen=0)
Out[6]: deque([], maxlen=0)

In [7]: mylist
Out[7]: [100, 100, 0, 100, 0] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T02:32:46.410

我喜欢列表理解：

```
[100 if index in [1, 4] else 0 for index, x in enumerate(mylist) ] 
```

# redirect - Spring URL路径不变

> ID：14350403
> 
> 赞同：0
> 
> 时间：2013-01-16T02:18:32.783
> 
> 标签：redirect, spring-mvc

我试过[这个](https://stackoverflow.com/questions/4321517/can-i-set-the-url-before-returning-the-modelandview)和[这个](http://forum.springsource.org/showthread.php?125065-Redirect-to-new-controller-method-does-not-change-url)，但我有同样的问题。登录后，URL没有改变。这是我的代码：

```
@RequestMapping(value="/login", method = RequestMethod.POST)
public String processLogin(@ModelAttribute("login") Login login,BindingResult result, SessionStatus status) throws ServiceException, RemoteException{
    loginValidator.validate(login, result);
if (result.hasErrors()) {
        //if validator failed
        return "login";
    } else {
        status.setComplete();
        AdministrationServiceResponse rs = null;
        AdministrationServiceRequest rsr = new AdministrationServiceRequest();
        AdministrationServiceService ts = new AdministrationServiceServiceLocator(Config.HOST, Config.PORT, Config.LOCATION, false);
        AdministrationServiceSoapBindingStub rssbs = (AdministrationServiceSoapBindingStub) ts.getAdministrationService();

        rsr.setLoginId(Config.USERNAME);
        rsr.setPassword(Config.PASSWORD);
        rsr.setOrgId(new Integer(1));
        rsr.setFunction("VALIDATEUSER");

        AdministrationPerson ap = new AdministrationPerson();
        ap.setUserId(login.getUsername());
        ap.setPassword(login.getPassword());
        rsr.setPerson(ap);
        rs = rssbs.remoteAdministrationCall(rsr);
        if ("SUCCESS".equals(rs.getStatusCode()) ) {
            return "redirect:/WebBI/report";
        } else {
            return  "login";
        }
    }
} 
```

如何更改我的网址？

# angularjs - AngularJS 指令的完整列表？

> ID：14350412
> 
> 赞同：35
> 
> 时间：2013-01-16T02:20:03.453
> 
> 标签：angularjs

我正在学习 AngularJS。是否有所有开箱即用指令的完整列表？[常见问题解答](http://docs.angularjs.org/misc/faq)中提到`ng-repeat`、`ng-show`和`ng-class`，但我觉得还有更多。似乎很奇怪，我找不到一个可以发现其余部分的地方。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-16T02:21:18.807

该清单可以在他们的 API 页面上找到：

[http://docs.angularjs.org/api/](http://docs.angularjs.org/api/)

如果您是 AngularJS 的新手，您可能会发现这也很有用：

[http://www.cheatography.com/proloser/cheat-sheets/angularjs/](http://www.cheatography.com/proloser/cheat-sheets/angularjs/)

它遍历指令、过滤器等，并提供有关所有内容的有用信息片段。如果文档中的某些内容令人困惑，您可能需要阅读更多内容，但通常我发现该备忘单足以完成简单的任务。

# objective-c - 使 NSWindow 真正成为最高级别（在鼠标之上，在任务控制/暴露之上）

> ID：14350415
> 
> 赞同：9
> 
> 时间：2013-01-16T02:20:16.313
> 
> 标签：objective-c, macos, nsview, nswindow

我想知道是否有可能让我的 NSWindow 绝对显示在所有内容之上。我目前使用代码将窗口级别设置为 CGShieldingWindowLevel ...

```
[self setLevel:CGShieldingWindowLevel()]; 
```

...这在大多数情况下做得很好，但这还不够。当任务控制或暴露处于活动状态时，不会绘制窗口，而是在鼠标下方绘制。我想知道是否有可能创建一个真正的“顶级”，将其绘制在所有这些元素之上。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T05:08:48.663

关于您关于 Expose 的问题，您可能只是没有正确设置您的收集行为。创建一个 的子类`NSWindow`，并在初始化的某个地方执行以下操作：

```
self.collectionBehavior = (NSWindowCollectionBehaviorStationary | NSWindowCollectionBehaviorIgnoresCycle); 
```

如果您希望您的窗口在所有空间上（您可能会这样做），请不要忘记添加`NSWindowCollectionBehaviorCanJoinAllSpaces`.

就你关于鼠标的问题而言，不幸的是，我认为没有办法在它上面画图。

# json - 使用带有 Ext-JS 的 JSON 向 JAX-RS 提交 multipart/form，如何设置 Content-Type？

> ID：14350416
> 
> 赞同：2
> 
> 时间：2013-01-16T02:20:16.653
> 
> 标签：json, extjs, jackson, jax-rs

我想使用 Ext-JS 将带有文件附件的表单提交到使用 Jackson 处理 JSON 的 JAX-RS 服务。

我遇到的问题是 JSON 数据没有 Content-Type 并且我不知道如何设置它？

目前，请求正文如下所示：

```
-----------------------------4664151417711
Content-Disposition: form-data; name="productBinary"; filename="new.txt"
Content-Type: text/plain

blah
-----------------------------4664151417711
Content-Disposition: form-data; name="myData"

{"MyData": [1,2,3] }
-----------------------------4664151417711-- 
```

一切都很好，除了 JSON 部分没有 Content-Type，因此我无法让 JAX-RS 服务将 JSON 反序列化为对象

JAX-RS 服务类似于：

```
@POST
@Path("/submit")
@Consumes("mulitipart/form-data")
public String submit( MultipartBody body )
{
    MyData myData = body.getAttachmentObject("myData",MyData.class);
    return "done";
} 
```

有任何想法吗？

**更新：**

似乎没有“好”的方法可以做到这一点，相反我发现我需要直接调用 json 反序列化器。

```
ObjectMapper om = new ObjectMapper();
InputStream is = body.getAttachment("myData").getDataHandler().getInputStream()
MyData md = om.readValue(is,MyData.class); 
```

# iphone - 在 iOS 上，if() 语句在发布版本和调试版本之间有不同的结果

> ID：14350420
> 
> 赞同：-1
> 
> 时间：2013-01-16T02:20:43.423
> 
> 标签：iphone, ios, pointers, if-statement

我有一个应用程序提交到 Apple Store，它通过了。但是我发现有一个错误会使应用程序崩溃。最后，我发现真正的问题是一段代码有相反的结果。

代码：

```
CGPoint now;
CGPoint old;
UIView *lastDot;
now = dotView.center;
if(lastDot){
    //release version, will go here. then crashed.
    old = lastDot.center;
}else{
    //debug version, will go here. run ok.
} 
```

* * *

我声明了一个 UIView 指针，并用“if 语句”检查它，

UIView *lastDot;

调试版本认为 lastDot 为 nil，但发布版本认为不为空。

谁能给我任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T02:27:00.130

根据您的编译器设置，调试构建通常会初始化指向某些标记值的指针，例如`0xcccccccc`.

```
UIView *lastDot = nil; 
```

应该按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:24:35.467

问题是由于未初始化的指针。

将其初始化为 nil 以避免此类麻烦。

```
UIView *lastDot = nil; 
```

我知道你已经得到了答案。

我也想补充几点：

> **指针就像任何其他变量一样：如果您没有明确地将它们设置为一个值，则该值将是未定义的，意味着一个随机值。如果您随后不小心访问了该变量，则可能会发生非常糟糕的事情。**
> 
> 有时人们建议将指针分配给 NULL，通用值意味着“这个指针不指向任何东西”，因为很多代码已经检查了 NULL 指针。例如，如果您调用`[nil release]`，则保证什么也不做。如果你传递了一个未初始化的指针，谁知道会发生什么。
> 
> 它实际上只是防止程序员错误的一种保护措施。如果您将指针初始化为一个合理的值，那么未初始化的指针在未来某个时候导致系统崩溃的可能性就会降低。
> 
> **当您不初始化指针然后尝试使用它时，您会遇到 3 个问题：**
> 
> *   它可能指向您无权访问的内存，在这种情况下，它会导致分段错误并使您的程序崩溃
> *   它可能指向真实数据，如果你不知道它指向什么，你就会对数据造成不可预测的（并且非常难以调试）的变化。
> *   您无法知道它是否已初始化 - 因为您如何区分有效地址和声明指针时碰巧存在的地址之间的区别？
> 
> **初始化每个指针以`nil`严重减少或消除这些问题：**
> 
> *   如果我尝试使用它，它仍然会出现段错误，但至少我可以测试它是否为 NULL 并采取相应的行动——我可以知道它会出现段错误，并做其他事情。如果它是一个随机值，那么在它崩溃之前我什么都不知道。
> *   如果您将其初始化为`nil`，除非我明确告诉它，否则我无法使其指向数据。所以我只修改我的意思。
> *   正如上面所暗示的，我可以知道我什么时候初始化了它，什么时候没有初始化，然后做出决定。
> 
> 显然这是一个风格问题，并且可以编写一个应用程序，其中变量只初始化为它们的预期值，但我觉得将它们初始化为`nil` 总是更安全、更容易。即使是最好的程序员也会犯错 -`nil`更容易知道什么时候发生了错别字。

参考 ：

1.  [爱斯基摩人](http://www.eskimo.com/~scs/cclass/int/sx7.html)
2.  [始终需要初始化指针](http://cboard.cprogramming.com/c-programming/129311-initializing-pointers-always-necessary.html)

# javascript - 将南/东 GPS 坐标转换为纬度/经度

> ID：14350429
> 
> 赞同：2
> 
> 时间：2013-01-16T02:21:46.527
> 
> 标签：javascript, geolocation, gps, coordinates, coordinate-transformation

我正在使用 JQuery 框架开发一个 Web 应用程序，并正在使用 Geolocation 来确定要在 Google 地图上显示的硬件站的位置。

在我们的数据库中，站点的位置以 Southing/Easting 格式存储。

我需要一种将南/东坐标转换为谷歌地图可以理解的纬度/经度的方法。

谁能告诉我解决这个问题的公式或最佳方法？

我已经对 Southing/Easting 进行了搜索，但是没有出现任何结果，更像是向北/向西等，即使那样，也没有太多信息..

编程部分我真的不需要太多帮助，只是关于如何执行这两种格式之间的转换的实际概念。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T03:54:16.467

您的问题中没有足够的信息来回答它 - 但您可能能够自己找出信息。这就是我将如何去做。

向南和向东（以及向北和向西）只是测量距某个“零点”的距离。如果您知道零点是什么以及单位是什么，它会*变得容易得多*——但如果您不知道，转​​换也不是不可能的。

例如，亚特兰大市位于乔治亚州迪凯特以西 5 英里处（我假设在这个例子中是正西，尽管它实际上是西南偏西 5 英里）。埃默里大学位于迪凯特以北 1.5 英里和以西 1.5 英里（这是一个近似值，但出于我们的目的，我们假设它完全正确）。

现在让我们假设一些事情：

1.  我们被告知亚特兰大在北 0 和西 8800。
2.  我们被告知埃默里大学位于北 2640 和西 2640。
3.  没有人记得迪凯特是网格的起源。
4.  没有人记得距离代表什么单位（顺便说一句，它是码）。

如果我们去谷歌地图并在亚特兰大的零英里柱上放置一个纬度标记（可能必须在谷歌地图实验室中启用），我们发现它位于 33.75116，-84.38740。

如果我们对埃默里大学做同样的事情，我们会发现它位于 33.7909，-84.3248。

然后我们可以做以下数学运算来找到经度与未知西西单位的比率：

绝对值（-84.38740 - -84.3248）=（绝对值（8000 - 2640））* x
0.0626 = 5360 * x
x = 0.0626 / 5360
x = 0.000011679

从那里我们可以找到我们理论上未知的零点的经度，方法是将亚特兰大的西行值乘以该因子，然后将其（因为亚特兰大位于本初子午线以西，因此经度数为负数）与亚特兰大的已知经度相加：

零经度 = -84.38740 + ( 8000 * 0.000011679 )
零经度 = -84.293968

将相同的逻辑应用于纬度，我们可以根据未知的北移单位找到一个因子：

绝对值（33.75116 - 33.7909）=（绝对值（2640 - 0））* y
0.03974 = 2640 * y
y = 0.03974 / 2640
y = 0.000015053

我们以同样的方式找到零纬度点（这在这个例子中很明显，因为亚特兰大在北 0 - 但无论如何最好通过这些动作）：

零纬度 = 33.75116 + ( 0 * 0.000015053 )
零纬度 = 33.75116

所以我们计算的零点是 33.75116，-84.293968。谷歌地图确认该纬度相对于已知点落在预期的位置。

那么我可以通过使用这个派生的零点和派生的比率来找到任何其他的北点和西点。例如，如果我们被告知某个东西是北 3000 西 500，我们会得到它的纬度和经度，如下所示：

纬度 = 33.75116 + ( 3000 * 0.000015053 )
*（添加是因为我们向北移动）*
纬度 = 33.796319

经度 = -84.293968 - ( 500 * 0.000011679 )
*（减去因为我们向西移动）*
经度 = -84.2998075

因此，北 3000 西 500 = 33.796319，-84.2998075

如果你的零点和计量单位没有被历史遗忘，那么你就有了一个重要的开端。如果有，您可以使用这种技术来推断它们——但您可能必须使用多个相关性对其进行微调，直到您获得感觉可靠的值。

# mysql - 这两种 MySQL 查询形式总是等价的吗？分组依据 + 排序依据 + 限制

> ID：14350430
> 
> 赞同：0
> 
> 时间：2013-01-16T02:21:47.027
> 
> 标签：mysql, group-by, sql-order-by, query-optimization, limit

我遇到了一个优化问题，以下更改似乎可以作为一种解决方法：

**之前（100+s）：**

```
SELECT t1.*,t2.a AS t2_a,t2.b AS t2_b FROM ... JOIN ... WHERE ... GROUP BY ... ORDER BY ... LIMIT 5 
```

**之后（0.01 秒）：**

```
SELECT * FROM
    (SELECT t1.*,t2.a AS t2_a,t2.b AS t2_b FROM ... JOIN ... WHERE ... GROUP BY ... ORDER BY ...) AS x
LIMIT 5 
```

抛开这种类型的优化是否最适合我的情况的问题（我的研究告诉我它对我来说是最实用的），这两种形式是否保证在所有情况下都返回相同的结果？

我们可以假设内部查询可能有许多 JOIN，但没有其他子查询或 UNION（即是一个简单的 SELECT）。在我的情况下，内部查询可能会因用户输入而有很大差异，所以这就是为什么我将其构建为关于查询表单的一般问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:27:32.553

唯一的区别是后者将有一个额外的“步骤”来使用派生查询。否则，结果将是相同的。

# nhibernate - NHibernate 查询多对多

> ID：14350431
> 
> 赞同：1
> 
> 时间：2013-01-16T02:22:01.103
> 
> 标签：nhibernate, model-associations

我有一个奇怪的要求。简而言之，我有一张产品表和一张语言表。每个产品都包含一个英文字符串描述。在我的应用程序中，我需要以用户确定的 15 种语言之一显示描述。每个产品都包含一个`IDictionary<Language, String>`包含本地化描述、按语言索引的内容。所有产品都有英文描述，但并非所有产品都同时翻译成所有 15 种语言。

奇怪的要求是：对于给定的产品，如果翻译后的产品描述不存在以用户的语言，则回退到英语。

如前所述，这可能看起来并不奇怪，但我正在努力映射它。在几次错误的开始之后，我在 SQL 中创建了一个视图，该视图基本上创建了和的交叉连接（笛卡尔积），`ProductId`并`LanguageId`与翻译表连接两次，一次用于所有翻译，一次用于英语子查询。从中，我使用 COALESCE() 提取翻译，以获取产品和语言代码的每种组合的翻译，必要时使用英语。所以基本上这个视图中的列`ProductId`是`LanguageId`和`Translation`。

我将如何映射这个？最重要的是，我该如何查询？我只需要能够从这个视图中读取数据。

显然这有点复杂。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:41:53.833

这样的事情会做吗？

```
<class name="Product" table="products">
  <id name="Id">  
    <generator class="native"/>  
  </id>  
  <property name="Description" />

  <map name="LocalizedDescriptions" table="descriptions">
    <key column="product_id"/>  
    <index column="language" type="String" />  
    <element column="description" type="String" />  
  </map>
</class> 
```

对于用户语言中没有描述的情况，只需检查条目是否在字典中即可。

```
public string GetDescription(string language)
{
    return LocalizedDescriptions.ContainsKey(language) ? LocalizedDescriptions[language] : Description;
} 
```

# javascript - 带 x 和 y 轴的 Highcharts 空白图表

> ID：14350435
> 
> 赞同：4
> 
> 时间：2013-01-16T02:22:36.010
> 
> 标签：javascript, highcharts

我想使用 highcharts 创建一个没有数据但 x 和 y 轴的空白图表。怎么做？

```
var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container'
    },

    yAxis: {        
        labels: {
            formatter: function() {
                return this.value +' km';
            }
        }
    },

    series: [{
        data: []        
    }]

}); 
```

它返回

![在此处输入图像描述](../Images/1e8121cc2d2401bdd61d5b1fa236f62f.png)

但我想用标签显示 y 轴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T11:13:20.570

您可以输入 xAxis 和 yAxis 的最小/最大值，并对所有数据使用 null。

[从@ZaheerAhmed](http://jsfiddle.net/duniyadnd/9SfAj/1/)的上述回复中分叉出来，因为我认为它应该作为替代解决方案而无需在事后隐藏数据。

IE

```
yAxis: {
   min: 1,
   max:
} ,
xAxis: {
   min: 1,
   max: 50
},
series: {
   data:[null,null]
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T05:48:22.437

您可以在设置属性后放置数据并隐藏系列

```
ignoreHiddenSeries : false 
```

这是[工作演示](http://jsfiddle.net/zaheerahmed/gzJRN/)如果您隐藏系列 Y 轴仍然可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T15:48:57.593

FWIW，似乎 highcharts 在[yAxis.showEmpty中内置了这个功能](http://api.highcharts.com/highcharts#yAxis.showEmpty)

Unfortunately, the fiddle listed in the documentation doesn't work, and there is a related open highcharts issue on the matter:

[no hide y axis](http://forum.highcharts.com/highcharts-usage/no-hide-y-axis-t25041/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-07T12:43:06.393

Setting min and max for `xAxis` and `yAxis` is not a good solution! Because if the data is loaded later (When it's resolved), then you won't have auto calculated min and max. In [Highcharts API](https://api.highcharts.com/highcharts/xAxis.max), it's said:

> If null, the max value is automatically calculated

So you should set min and max back to `null` when the data is loaded. But in my case setting it to null or even deleting the option, didn't result in automatic calculating (Seems strange).

What I did instead was setting [charts.showAxes](https://api.highcharts.com/highcharts/chart.showAxes) to true! That's it. Take a look at [the demo provided by Highcharts](http://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/chart/showaxes-true/)

**重要提示：**您当然需要将系列设置为以下内容：

```
series: [
  {
    data: [null, null, null]
  },
  {
    data: [null, null, null]
  }
] 
```

注意：确保[xAxis.showEmpty](https://api.highcharts.com/highcharts/xAxis.showEmpty)和[yAxis.showEmpty](https://api.highcharts.com/highcharts/yAxis.showEmpty)设置为 true（默认为 true）。

# html - 绝对定位的html元素

> ID：14350452
> 
> 赞同：-3
> 
> 时间：2013-01-16T02:25:11.817
> 
> 标签：html, css

`position: absolute`制作包含所有元素的网页是好还是坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:33:54.977

这完全取决于您要达到的目标。在某些情况下，绝对位置可能会导致不必要的重叠，此外还会将特定元素从文档流中取出，但在许多情况下，这可能是预期的效果并且可以考虑。

此外，在具有相对定位的父元素内使用绝对定位可以让您将元素放置在相对于其父约束的位置。参考这篇文章了解更多：[http ://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

编辑：错过了您计划为每个元素执行此操作的事实。这是设计网页的一种非常糟糕的方式，除非您对少数元素执行此操作，而这些元素无法通过更传统的方式实现所需的布局。问题是您需要为每个元素设置顶部和左侧坐标 - 如果您决定移动一个元素或更改其大小，突然间您将不得不更改所有元素的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:24:10.710

一切都是有目的的......绝对位置没有好坏之分。这取决于使用位置作为相对或绝对的需要。如果该人希望元素相对于其他元素定位，则使用相对位置。如果必须将元素定位在与其他元素无关的位置，则使用绝对。所以这完全取决于设计。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-16T02:31:02.567

这是一个糟糕的网页设计，因为没有任何东西可以流动，而且你没有机会让它做出响应。我曾在 Dreamweaver 中看到过类似的设计，但它们无法维护。如果内容发生变化，则需要完全重做设计。

# c# - 带网络流的充气城堡

> ID：14350455
> 
> 赞同：2
> 
> 时间：2013-01-16T02:25:36.973
> 
> 标签：c#, cryptography, bouncycastle

我正在尝试创建一个流式 cyrpto 包装器。我有一个网络连接，可以将加密的数据向下传输，我想即时对其进行解码。这是使用本机加密类的相同功能的链接，但我需要使用 Bouncy Castle 来完成。

[https://github.com/pdelvo/Pdelvo.Minecraft/blob/master/Pdelvo.Minecraft.Network/AesStream.cs](https://github.com/pdelvo/Pdelvo.Minecraft/blob/master/Pdelvo.Minecraft.Network/AesStream.cs)

我尝试使用 BufferedStreamCipher 但无法弄清楚如何让它工作并且找不到任何示例。任何帮助将不胜感激。

谢谢，雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:57:35.270

所以它似乎是 CFB8 模式下的 AES，你需要一个 Stream。

您可以使用以下命令获取 enc/dec 密码对象

> CipherUtilities.GetCipher("AES/CFB8/NoPadding");

您必须在每个上调用 Init，使用

> new ParametersWithIV(new KeyParameter(keyBytes), ivBytes)

然后你可以用它们包装一个（双向）流：

> 新密码流（innerStream，readCipher，writeCipher）

这可能会让你开始，但我不确定它会以你需要的方式流式传输。试一试吧。如果我们可以做些什么来改进它，请回复我或发布到 BC C# 邮件列表。

# ruby-on-rails - 带有自引用关联的体面曝光

> ID：14350458
> 
> 赞同：0
> 
> 时间：2013-01-16T02:25:51.700
> 
> 标签：ruby-on-rails, simple-form, self-reference

我有一个自引用关联：

```
has_many :households
has_many :relations, :through => :households
has_many :inverse_relationships, :class_name => 'Household', :foreign_key => 'friend_id'
has_many :inverse_relations, :through => :inverse_relationships, :source => :person 
```

我是我的控制器，我使用的有体面曝光：

```
expose(:neighbor)
expose(:neighbors) 
```

现在，在我使用 simple_form 的 haml 视图中，我有：

```
= f.input  :first_name,:label => 'First Name'
= f.input  :middle_name, :label => 'Middle Name'
= f.input  :last_name, :label => 'Last Name' 
```

现在我希望能够列出或输入我的“家庭”中的关系，但我不知道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:32:02.643

我将其更改为更简单的安排，即仅具有具有许多邻居的家庭模型和邻居模型，而不是通过家庭将邻居链接到邻居的自我参照安排

有时越简单越好

# javascript - 从变量中获得的 javascript 正则表达式在测试中给出错误：“不是函数”

> ID：14350459
> 
> 赞同：0
> 
> 时间：2013-01-16T02:25:52.903
> 
> 标签：javascript, regex, testing

在纯javascript中：运行以下命令时出现错误：

```
var arg_regex = 'myregex:/^[:a-z0-9\s!\\\/]+$/i';

regex_patt = arg_regex.replace(/^myregex:/,'');

if(regex_patt.test(stringtocheck)){
//good
} else {
//bad
} 
```

错误：

```
regex_patt.test is not a function 
```

请帮忙。无法弄清楚为什么它会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:31:17.210

菲利克斯说的：

```
regex_string = arg_regex.split('myregex:/').join('').split('/i').join('');
regex_patt = new RegExp(regex_string); 
```

RegExp 对象必须首先从字符串构造。

在上面的示例中，您正在替换一个静态字符串，因此您可以使用`string.replace('staticTextToRemove','')`或使用上面显示的`split`and `join`。

我听说`split().join()`它的性能稍微好一点......而且它是一个巧妙的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:34:44.367

尝试添加这一行，让 regex_patt 成为一个对象：

```
 regex_patt = eval(regex_patt); 
```

# android - Android：应用程序安装/卸载上的 BroadcastReceiver

> ID：14350460
> 
> 赞同：8
> 
> 时间：2013-01-16T02:26:08.140
> 
> 标签：android, android-intent, broadcast, intentfilter

我想安装一个 apk 文件并设置一个广播接收器以获取有关安装状态的信息。

我准备了一个 BroadcastReceiver 类：

```
public class newPackageReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("DEBUG"," test for application install/uninstall");
    }

} 
```

在主要活动中，我首先注册一个新的接收器对象，然后实例化按钮以进行应用程序安装。

```
public void onCreate(Bundle savedInstanceState) {
...
IntentFilter filter = new IntentFilter();
        filter.addAction(Intent.ACTION_PACKAGE_ADDED);
        filter.addAction(Intent.ACTION_PACKAGE_CHANGED);
        filter.addAction(Intent.ACTION_PACKAGE_DATA_CLEARED);
        filter.addAction(Intent.ACTION_PACKAGE_INSTALL);
        filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
        filter.addAction(Intent.ACTION_PACKAGE_REPLACED);
        filter.addAction(Intent.ACTION_PACKAGE_RESTARTED);

        receiver = new newPackageReceiver();
        registerReceiver(receiver, filter);
        ...

dlButton.setText(R.string.dl_button);
dlButton.setOnClickListener(new AppliDownloadOnClickListener(this ));   

@Override
public void onDestroy(){
     unregisterReceiver(receiver);
     super.onDestroy();
} 
```

在我的 OnclickListener 类中，我输入：

```
@Override
    public void onClick(View v) {

    // actually, the below process is in an asyncTask
    URL url;
    Intent promptInstall;

    try {
        url = new URL(apkurl);

        HttpURLConnection c = (HttpURLConnection) url.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();

        String PATH = Environment.getExternalStorageDirectory()+ "/download/";
        File file = new File(PATH);
        file.mkdirs();
        File outputFile = new File(file, "app.apk");
        FileOutputStream fos = new FileOutputStream(outputFile);

        InputStream is = c.getInputStream();

        byte[] buffer = new byte[1024];
        int len1 = 0;
        while ((len1 = is.read(buffer)) != -1) {
            fos.write(buffer, 0, len1);
        }

        fos.close();
        is.close();

        promptInstall = new Intent(Intent.ACTION_VIEW);
        promptInstall.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "app.apk")), "application/vnd.android.package-archive");

        if (promptInstall != null) {
            activity.startActivity(promptInstall);
        } else {
            ErrorDetails.displayToastMessage(activity,R.string.connection_error);
        }

    } catch (...) {
        ...
    }

} 
```

使用上面的代码（我已经缩小了它），当单击按钮时，会显示安装程序并且应用程序已完美安装，但从未调用接收器类（newPackageReceiver）。注册（registerReceiver）在onCreate方法中完成，unregisterReceiver在onDestroy方法中调用，所以应该是有效的。你知道为什么吗 ？

感谢您的阅读！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T03:15:21.593

您需要将[数据方案](http://developer.android.com/reference/android/content/IntentFilter.html#addDataScheme%28java.lang.String%29)添加到您的意图过滤器。

```
filter.addDataScheme("package"); 
```

此外，从未使用过[ACTION_PACKAGE_INSTALL 。](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_INSTALL)

# ruby-on-rails - Nginx 代理重定向到另一个 URI

> ID：14350461
> 
> 赞同：4
> 
> 时间：2013-01-16T02:26:09.437
> 
> 标签：ruby-on-rails, nginx, streaming, cdn, large-files

我们的网站是一个图像存储库。每个图像都有一个外部 URL 和一个内部 URL 的概念。客户可以看到外部 URL，并且在我们尝试 SEO 时它们会发生变化。内部 URL 是指向我们的图像托管服务的永久 URL。我们使用我们的 Ruby on Rails 应用程序来提供 URL 翻译。下面是一个请求示例：

```
--------           -----     -------     -------          ------------
|      | --eURL--> |   | --> |     | --> |     | -iURL--> |          |
|client|           |CDN|     |Nginx|     | RoR |          |Image Host|
|      | <-------- |   | <-- |     | <-- |     | <-IMG--- |          |
--------           -----     -------     -------          ------------ 
```

该架构正在运行，但通过 RoR 流式传输图像效率低下。我想让 Nginx 做代理。这就是它的用途。提议的架构看起来像这样：

```
--------           -----     -------         -------
|      | --eURL--> |   | --> |     | ------> | RoR |
|client|           |CDN|     |Nginx| <-????- |     |
|      | <-------- |   | <-- |     |         -------
--------           -----     |     |         ------------
                             |     | -iURL-> |Image Host|
                             |     | <-IMG-- |          |
                             -------         ------------ 
```

我可以向 Nginx 发送什么响应以使其代理数据？我不介意将 Nginx 模块添加到我的基础架构中，当然我愿意更改我的 nginx.conf。

[X-Sendfile](http://wiki.nginx.org/XSendfile)是我发现的最接近的东西，但它只允许从本地文件系统流式传输。也许还有其他一些我不知道的模糊 HTTP 响应标头或状态代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:22:22.833

将`X-Accel-Redirect`标头与特殊的 Nginx 结合使用`location`以使 Nginx 代理远程文件。

这是`location`要添加到您的 Nginx 配置中的内容：

```
# Proxy download 
location ~* ^/internal_redirect/(.*?)/(.*) {
  # Do not allow people to mess with this location directly
  # Only internal redirects are allowed
  internal;

  # Location-specific logging
  access_log logs/internal_redirect.access.log main;
  error_log logs/internal_redirect.error.log warn;

  # Extract download url from the request
  set $download_uri $2;
  set $download_host $1;

  # Compose download url
  set $download_url http://$download_host/$download_uri;

  # Set download request headers
  proxy_set_header Host $download_host;
  proxy_set_header Authorization '';

  # The next two lines could be used if your storage 
  # backend does not support Content-Disposition 
  # headers used to specify file name browsers use 
  # when save content to the disk
  proxy_hide_header Content-Disposition;
  add_header Content-Disposition 'attachment; filename="$args"';

  # Do not touch local disks when proxying 
  # content to clients
  proxy_max_temp_file_size 0;

  # Download the file and send it to client
  proxy_pass $download_url;
} 
```

现在您只需`X-Accel-Redirect`在对 Nginx 的响应中设置标题：

```
# This header will ask nginx to download a file 
# from http://some.site.com/secret/url.ext and send it to user
X-Accel-Redirect: /internal_redirect/some.site.com/secret/url.ext

# This header will ask nginx to download a file 
# from http://blah.com/secret/url and send it to user as cool.pdf
X-Accel-Redirect: /internal_redirect/blah.com/secret/url?cool.pdf 
```

[在这里](http://kovyrin.net/2010/07/24/nginx-fu-x-accel-redirect-remote/)找到了完整的解决方案。我建议在实施之前阅读它。

# orm - 如何提高 Play 的 max_fetch_depth？

> ID：14350465
> 
> 赞同：0
> 
> 时间：2013-01-16T02:26:50.487
> 
> 标签：orm, playframework-2.0, ebean

在我的视图模板中仅访问 3 个级别的成员字段时，我收到 NullPointerException：

```
@tfz.modelTfzTyp.simulierteTfzTyp.typ 
```

如果我改用 getter 函数，它就可以工作。但这很麻烦。

我正在使用 Ebean，我读到 Hibernate 有一个`max_fetch_depth`. 我怀疑类似的事情导致了我的问题。如何让 Play 急切地加载更多对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:16:49.780

`max_fetch_depth`这与财产无关。

模型上的字节码增强允许动态获取，它仅适用于 getter。

见官方[文档](http://play2-docs-snapshot.herokuapp.com/render/master/JavaEbean)：

> 直接 Ebean 字段访问的增强（启用延迟加载）仅适用于 Java 类，不适用于 Scala。因此，从 Scala 源文件（包括标准 Play 2 模板）直接访问字段不会调用延迟加载，通常会导致空的（未填充的）实体字段。为确保字段被填充，要么 (a) 手动创建 getter/setter 并改为调用它们，要么 (b) 在访问字段之前确保实体已完全填充。

# php - Sed 在名为 Themes 的文件夹中查找和替换 PHP 文件

> ID：14350471
> 
> 赞同：0
> 
> 时间：2013-01-16T02:27:19.627
> 
> 标签：php, sed, replace

该脚本正在查找和替换 PHP 文件中的 URL，当我在只有 1 个文件的测试目录中运行它时，它的运行速度非常快。但是，我需要从我的服务器上的主目录运行它，这需要永远（到目前为止至少 5 分钟。）如果我可以将搜索范围缩小到不是所有 PHP 文件，而只限于 "主题”文件夹。整个服务器中有多个“主题”文件夹。是否可以将搜索范围缩小到仅名为“主题”的文件夹中的 php 文件？

```
find . -type f -iname "*.php" -exec sed -i.bak 's/http:\/\/www.changed.com/http:\/\/www.stillchanged.com/g' {} \; 
```

**主题文件夹的示例路径**

/home/site1/public_html/wp-content/themes/

/home/site2/public_html/wp-content/themes/

/home/site3/public_html/wp-content/themes/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:36:09.510

```
find /tmp/* -type d -iname test\* -exec find {} -type f -iname test\* \; 
```

`find`你可以像上面那样做一个嵌套。

**示例结果：**

```
sgeorge-mn:~ sgeorge$ find /tmp/* -type d -iname test\*
/tmp/stack/test_e
/tmp/stack/test_f
/tmp/stack/test_g
/tmp/stack/test_h
/tmp/stack/test_i
/tmp/stack/test_j
/tmp/stack/test_k
/tmp/test_a
/tmp/test_b
/tmp/test_c
/tmp/test_d
sgeorge-mn:~ sgeorge$ find /tmp/* -type d -iname test\* -exec find {} -type f -iname test\* \;
/tmp/stack/test_e/testa
/tmp/stack/test_e/testb
/tmp/stack/test_e/testc
/tmp/stack/test_e/testd
/tmp/stack/test_f/testa
/tmp/stack/test_f/testb
/tmp/stack/test_f/testc
/tmp/stack/test_f/testd
/tmp/stack/test_g/testa
/tmp/stack/test_g/testb
/tmp/stack/test_g/testc
/tmp/stack/test_g/testd
/tmp/stack/test_h/testa
/tmp/stack/test_h/testb
/tmp/stack/test_h/testc
/tmp/stack/test_h/testd
/tmp/stack/test_i/testa
/tmp/stack/test_i/testb
/tmp/stack/test_i/testc
/tmp/stack/test_i/testd
/tmp/stack/test_j/testa
/tmp/stack/test_j/testb
/tmp/stack/test_j/testc
/tmp/stack/test_j/testd
/tmp/stack/test_k/testa
/tmp/stack/test_k/testb
/tmp/stack/test_k/testc
/tmp/stack/test_k/testd
/tmp/test_a/testa
/tmp/test_a/testb
/tmp/test_a/testc
/tmp/test_a/testd
/tmp/test_b/testa
/tmp/test_b/testb
/tmp/test_b/testc
/tmp/test_b/testd
/tmp/test_c/testa
/tmp/test_c/testb
/tmp/test_c/testc
/tmp/test_c/testd
/tmp/test_d/testa
/tmp/test_d/testb
/tmp/test_d/testc
/tmp/test_d/testd 
```

**编辑：** 在你的情况下，你甚至不想要一个嵌套的`find`：

使用`find`如下：

```
find /home/*/public_html/wp-content/themes/ -type f -iname \*.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:38:04.840

添加`-wholename "*themes*"`到您的条件列表中。这将仅匹配“主题”子目录下的文件（递归）。

# ios - 在 xcode 中计算 1,000 个慢速对象的百分比

> ID：14350477
> 
> 赞同：0
> 
> 时间：2013-01-16T02:28:14.797
> 
> 标签：ios, core-data

任何人都可以建议一种更快的方法来解决以下问题：

我有一个包含 5,000 个托管对象的数组（故障）（一个 car.h 对象数组）

每个对象都有一组项目（toCarParts.h）。这个集合可以有任意数量的对象。

现在我想通过我的搜索查询 carpart 数组中的最匹配来对这些进行排序。

我寻找轮子、座椅、窗户、镜子。

该方法将遍历每辆车并找到最接近的匹配，并计算百分比。因此，如果汽车 a 有车轮、座椅、车窗、镜子、垫子、轮胎、雨刷器、管道 --> % 应该是 50%。（匹配 4/8 部分。

这很简单，但问题在于 5,000 项搜索需要很长时间（即使使用 coredata）。

我使用的逻辑类似于：（伪代码）

```
 For each Car*car in array.
   NSMutableArray *x=[car tocarparts]allobjects];
   For the count of objects in x.
     Carpart*part=objectatindex...i.
     If the name of this matches one of my parts 
       add a count to my counter.
   At the end of the loop counter/[x count] =%.car.percent=%. 
```

必须有更好的方法，有什么建议吗？（我认为它需要永远的划分和检查每个部分。

先感谢您。

编辑，添加以下代码：。

-(NSMutableArray*)calculatePercentagePerFind:(NSMutableArray*)CarArray:(NSMutableArray*)partsArray{ NSArray*defaultParts =[NSArray arrayWithArray:[[[HelperMethods alloc]init]getObjectUserDefault:@"AvailableDefaultParts"]];

```
int lowestPercentMatchInt=[[[HelperMethods alloc]init]getIntegerUserDefault:@"lowestPercentageMatch"];

NSMutableArray*partsFromCarArray=[[NSMutableArray alloc]init];

NSMutableArray*returnArray=[[NSMutableArray alloc]init];

NSMutableArray *partsWithDefaultParts =[NSMutableArray arrayWithArray:partsArray];
[partsWithDefaultParts addObjectsFromArray:defaultParts];

for (int i=0; i<[CarArray count]; i++) {
    double matchCount=0;
    Car *CarResult =(Car*)[CarArray objectAtIndex:i];

            //Check if it will at least be 30% match
    double number1 = [partsWithDefaultParts count];
        number1 =(number1/[CarResult.numberOfParts doubleValue])*100;
        if (number1>lowestPercentMatchInt) {
            partsFromCarArray =[NSMutableArray arrayWithArray:[[CarResult toParts]allObjects]];
            NSMutableArray *faultedParts=[[NSMutableArray alloc]init];
            for (int i =0; i<[partsFromCarArray count]; i++) {
                CarPart*part = (CarPart*)[partsFromCarArray objectAtIndex:i];
                    [faultedParts addObject:part.name];
            }
        // for each part in the Car
        for (NSString *partInCar in partsWithDefaultParts){
            //if the search parts contain that part, add one to count
            if ([faultedParts containsObject:partInCar]) {
                matchCount++;
            }
        }
        //Calculate percent match
        double percentMatch = matchCount;

        percentMatch =(percentMatch/[CarResult.numberOfParts doubleValue])*100;

        //if at least 30%(user default) then add the percent match to Car result
        if (percentMatch >lowestPercentMatchInt) {
            if (percentMatch>100) {
                CarResult.percentMatch = [NSNumber numberWithDouble:100.00];
            }else{
                CarResult.percentMatch = [NSNumber numberWithDouble:percentMatch];
            }
            [returnArray addObject:CarResult];
        }
}
}
NSLog(@"Percent Matched Cars = %i",[returnArray count]);
return [self arrangeByHighestPercentMatch:returnArray]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:09:53.557

试试这个，我相信这将最大限度地减少对核心数据的压力。

```
NSSet *selectionSet; // contains the selected parts
NSPredicate *filter = [NSPredicate predicateWithFormat:
                          @"self IN %@", selectionSet];
float percentageSum = 0;
NSSet *parts;
for (Car *car in fetchedObjects) {
   parts = car.parts;  // so the relationship is retrieved only once
   percentageSum += 
       [parts filteredSetUsingPredicate:predicate].count*1.0f 
                                          / (parts.count*1.0f);
}
return percentageSum/fetchedObjects.count; 
```

这将平均所有汽车的百分比。还有其他方法可以对总体中的各个部分进行不同的称重。

您的问题尚不清楚，但是如果您不需要总百分比，而是每辆车需要一个百分比，则无需遍历所有汽车-您可以在显示时即时计算百分比（例如，使用瞬态属性）。

# excel - 如何使用 VBA 将文本放置在 Excel 中图像（在评论中）的一侧？

> ID：14350480
> 
> 赞同：1
> 
> 时间：2013-01-16T02:28:43.720
> 
> 标签：excel, vba

我正在使用以下命令将图像添加到 Excel 中的评论中：

```
ActiveWorkbook.Sheets(1).Range("A1").AddComment

With Range("A1").Comment.Shape
    .Fill.UserPicture "C:\Temp\110003.jpg"
    .Shadow.Visible = msoFalse
    .Height = 200
    .Width = 200
End With 
```

然后我想在评论中添加一些文本：

```
Range("A1").Comment.Text "Text over the top of the image"
Range("A1").Comment.Shape.TextFrame.VerticalAlignment = xlVAlignTop 
```

这会将文本放置在图像上。有什么方法可以将文本放置在图像的右侧，使其不在图像的顶部？

# android - Android Eclipse 导入现有代码

> ID：14350484
> 
> 赞同：37
> 
> 时间：2013-01-16T02:29:03.387
> 
> 标签：android, eclipse, import, project

我正在尝试为 SVN 组织我的代码，这样我就可以在多个位置工作而不会出现问题，并且可能会添加更多的开发人员。问题是我无法轻松地将代码放入新项目中。我正在尝试从现有代码创建一个项目。

一旦我选择了文件夹，“主要活动”就会出现，但我永远无法使用它。我已经尝试删除所有 .project 文件以及文件夹中没有的文件，但该文件始终显示为灰色，我永远无法将其导入。

为什么是灰色的？我需要做什么才能将其导入？

-- ADT Build v21.0.0-519525

![导入项目灰色](../Images/001b3e345809cdd148333083d6acced7.png)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-16T02:40:02.897

我玩了一堆，发现它与工作区中已经存在的另一个类似名称的活动冲突。错误消息“选择至少一个项目”掩盖了该消息。它会很快出现，然后切换到至少选择一个项目。

为了解决这个问题，我从我的工作区中删除了所有项目。我不知道是哪一个，因为我正在为不同的公司制作一个版本和品牌的应用程序。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-09T23:58:56.147

我在使用 TrivialDrive 时遇到了同样的问题。尝试从工作区中的项目名称中检查“主要活动”。如果存在，您将收到此错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-25T15:26:48.870

**解决方案 A：**

1) 关闭 Eclipse，2) 当它启动时，它会要求新的工作目录，选择与默认目录不同的东西。

如果它不要求“新工作目录”

解决方案B：1）转到文件>切换工作区>其他2）选择一个新的工作目录（不一样！）

![在此处输入图像描述](../Images/24160ae720112301e324a0fc0d7ba400.png)

之后应该可以导入项目

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-17T08:22:56.063

只需删除项目文件夹中的“.project”文件（它在 Linux 上隐藏，使用“ls -a”显示），然后从 Eclipse 中选择从现有源中创建 Android 项目。它对我有用..

就是这样。Cheerzz..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-02T17:06:04.160

它是灰色的，因为项目名称等于工作空间中现有项目的名称。解决方案：使用“Existing Android Code Into Workspace”导入。键入“根目录”。直接在导入项目向导中更改“新项目名称”字段。执行以下操作：首先在“要导入的项目”字段中按路径文本（复选框右侧），然后转到“新项目名称”字段以更改名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-31T21:15:26.783

只需转到 eclipse-workspace 并删除 .metadata 文件重新启动 eclipse 打开项目

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-22T00:09:01.203

当我需要从 svn 标签一次性构建一个 apk 文件时，我遇到了这个问题。我通过创建一个新的工作区并切换到它来管理它。之后，New->Project->Android->Android Application From Existing Code 会如您所愿。

# joomla - 在 joomla 中找不到视图

> ID：14350485
> 
> 赞同：0
> 
> 时间：2013-01-16T02:29:14.953
> 
> 标签：joomla, joomla2.5

大家好，我正在使用 joomla 2.5 作为网站

我创建了一个组件来在后端的数据库中插入产品，我想在前端展示这个产品

我在视图中有此链接以显示 type=1 的产品；

```
 <div class="col2"><a href="<?php echo $this->baseurl ?>/index.php/hardware/integrados">Productos</a></div> 
```

在组件 controller.php 的前端我有这个

```
class HardwareController extends JController
    function integrados(){
            $model = &$this->getModel(JRequest::getCmd('view'));
            $view  = &$this->getView(JRequest::getCmd('view'), 'html');
        $view->setModel($model, true);
        $view->hardwareIntegrado();
    } 
```

在我的模型中，我有

```
class HardwareModelHardwares extends JModelList 
     function getIntegrados(){
         $db=& JFactory::getDBO();
         $query= "SELECT *
            FROM ".$db->nameQuote('#__hardware')."
            WHERE ".$db->nameQuote('tipo')."=".$db->quote("1").";";
         $db->setQuery( $query);
         $restaurantes=$db->loadObjectList();
         JRequest::setVar('hard', $restaurantes);
         return $restaurantes;
    } 
```

在我的 view.html.php 我有这个

```
public function hardwareIntegrado(){
    $this->assignRef('pagination', $this->get('pagination'));
    $this->assignRef('hardware', $this->get('integrados'));
    $this->assignRef('list', $this->get('list'));
    parent::display();
} 
```

当我单击链接时，我收到此错误

```
500 - View not found [name, type, prefix]: hardware, html, hardwareView 
```

任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:13:33.350

您应该将视图类更改为**hardwareViewHardware**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T07:19:33.877

You are getting this error-

```
500 - View not found [name, type, prefix]: hardware, html, hardwareView 
```

because it's looking for `hardware` view.In the link- `index.php/hardware/integrados` it seems you are passing `view=hardware` . Whereas everywhere you have defined it as `hardwares` like in folder name and class.Either change link or class and folder.

Hope this will help.

# c++ - Matlab 不会运行我的 C++ .exe 文件

> ID：14350486
> 
> 赞同：1
> 
> 时间：2013-01-16T02:29:21.110
> 
> 标签：c++, visual-studio-2010, matlab, cmd

我有运行良好的 C++ 程序，但其中有不同的步骤。它首先打开一个文件，然后根据从文件中获取的数据进行一些计算。现在我正在尝试通过matlab运行它。我尝试了 mex，但它变得太复杂了，因为我有 VS 2010 Express 和 MATLAB 2007b。所以 mex 永远找不到我的 c 编译器。

我现在正试图直接从 C++ 程序可执行文件中运行它。这是我尝试这样做的方法：

```
system('C:\path\file.exe') 
```

它会运行，但命令窗口冻结，我每次都必须关闭 Matlab 才能回到正轨。然后我尝试双击它自己的可执行文件。它闪烁但我可以看到它从我的文件中输出一些东西，`"file could not be uploaded"`如果它找不到文件，它是由我的程序的一部分生成的。

所以后来我意识到这可能是因为它导致它无法运行和崩溃。所以我写了一个示例代码，在系统命令打开文件之前先打开`.exe`文件。我做过类似的事情`fopen('fname','r')`，但没有任何效果。请注意，我试图打开的这个文件是一个`.COF`文件。

我尝试`.exe`使用调试和发布模式运行文件，但没有任何反应。它没有给出错误，这意味着它可以看到该`.exe`文件，但没有出现命令行并且 matland 命令窗口冻结。

运行后，它应该在命令行提示用户，然后接受输入参数并输出一些东西......

请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:52:13.720

我猜您的 .COF 文件与您的二进制文件可访问的路径不同。如果可以重新编译，请尝试使用绝对路径名，并在不使用 MATLAB 的情况下先进行测试。

有更彻底的方法可以解决这个问题，比如将文件名作为命令行参数传递给二进制文件，或者在使用 时阅读“当前目录”的规则`system`，但也许你会对快速解决方案。

# gcc - 编译 gcc-4.7.2 时出错

> ID：14350488
> 
> 赞同：0
> 
> 时间：2013-01-16T02:29:53.390
> 
> 标签：gcc

我正在尝试使用 gcc-4.6.1 从源代码编译 gcc-4.7.2。

首先，我运行 contrib/download_prerequisites 下载所需的包，然后按照 LFS [http://www.linuxfromscratch.org/blfs/view/svn/general/gcc.html上的说明进行操作](http://www.linuxfromscratch.org/blfs/view/svn/general/gcc.html)

运行时`make bootstrap`，我收到错误消息：

```
In file included from ../../gcc-4.7.2/gcc/c-lang.c:24:0:
../../gcc-4.7.2/gcc/system.h:499:20: error: conflicting types for ‘strsignal’
/usr/include/string.h:566:14: note: previous declaration of ‘strsignal’ was here 
```

我的情况与此处发布的情况相同：http: [//gcc.gnu.org/ml/gcc-help/2011-12/msg00062.html](http://gcc.gnu.org/ml/gcc-help/2011-12/msg00062.html)。原因也是一样的：gcc找错了`config.h`，应该是当前目录下的那个，但实际上是用了下的那个`gmp`。

我发现原因是，即使命令行在`-I.`所有其他`-I`选项之前指定，`-I.`也会被忽略，因为它已经在标准搜索路径中。这是我通过运行得到的消息`gcc -v`：

```
ignoring duplicate directory "."
as it is a non-system directory that duplicates a system directory 
```

这是与此问题相关的路径搜索顺序（[http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)）：“唯一的例外是默认情况下已经搜索了dir。在这种情况下，该选项被忽略，系统目录的搜索顺序保持不变。”

我该怎么做才能让 gcc 在`-I`选项指定的其他路径之前搜索当前目录？

产生错误消息的命令是：

```
gcc -c  -DIN_GCC_FRONTEND -g -fkeep-inline-functions -DIN_GCC   -W -Wall -Wwrite-strings -Wcast-qual -Wstrict-prototypes -Wmissing-prototypes -Wmissing-format-attribute -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings -Wold-style-definition -Wc++-compat -fno-common  -DHAVE_CONFIG_H -I. -I. -I../../gcc-4.7.2/gcc -I../../gcc-4.7.2/gcc/. -I../../gcc-4.7.2/gcc/../include -I../../gcc-4.7.2/gcc/../libcpp/include -I/home/dwang/Downloads/gcc-build/./gmp -I/home/dwang/Downloads/gcc-4.7.2/gmp -I/home/dwang/Downloads/gcc-build/./mpfr -I/home/dwang/Downloads/gcc-4.7.2/mpfr -I/home/dwang/Downloads/gcc-4.7.2/mpc/src  -I../../gcc-4.7.2/gcc/../libdecnumber -I../../gcc-4.7.2/gcc/../libdecnumber/bid -I../libdecnumber    ../../gcc-4.7.2/gcc/c-lang.c -o c-lang.o 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:58:48.330

这在我的`~/.bashrc`. 我曾经在 bashrc 中添加以下行：

```
export C_INCLUDE_PATH=/home/dwang/local/include:/export/scratch/packages/include/:$C_INCLUDE_PATH 
```

的输出`echo $C_INCLUDE_PATH`是：

```
/home/dwang/local/include:/export/scratch/packages/include/: 
```

事实证明，如果`:`C_INCLUDE_PATH 中有尾随，那么`.`也会添加。如果我删除尾随`:`，一切都很好。

原因记录[在这里](http://gcc.gnu.org/onlinedocs/cpp/Environment-Variables.html)：

> 在所有这些变量中，一个空元素指示编译器搜索其当前工作目录。空元素可以出现在路径的开头或结尾。例如，如果 CPATH 的值为 :/special/include，则与 `-I. -我/特别/包括'。

# javascript - 使用jQuery不能动态添加多个元素

> ID：14350505
> 
> 赞同：0
> 
> 时间：2013-01-16T02:31:29.833
> 
> 标签：javascript, jquery, internet-explorer, dynamic, treenode

我正在使用 ASP.NET 制作多文件上传器，并且我知道 IE 不支持`multiple`内部属性`<input type="file"/>`。

所以我写了一个jQuery代码来检查用户是否使用IE。如果是，则显示一个按钮，让用户添加多个文件上传控件，这样他也可以上传多个文件。

**问题是**，当用户单击该链接以生成`<input/>`控件，然后再次单击以添加第三个控件时。什么都没发生！.. 只添加了一个控件，因此可以使用两个控件。不多，无论他点击多少，都不会`<input/>`添加更多控件。

这是我的代码：

```
$(function () {
    if (!('multiple' in document.createElement('input'))) {
        var add_btn = $("<a href='#'>Add more photos</a>").insertAfter("#ContentPlaceHolder1_upload_lbl");
        var upload_pnl = $('<input type="file" runat="server"/>');
        var upload_holder = $("#fileinput_placeholder");
        add_btn.on("click", function () {
            upload_holder.append(upload_pnl);
            alert("click event called(debugging)");
        });
    }
}); 
```

这是该部分的节点树的图片：

![在此处输入图像描述](../Images/73535aa1a849e6cc7e084c5d799e6fd6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:35:52.197

在您附加的点击事件上`upload_pnl`，每次连续点击您都附加相同的元素，因此您只会得到 2。

要添加更多内容，您需要在 click 事件回调中创建元素，或者使用类似[jquery clone](http://api.jquery.com/clone/)函数的东西来创建一个新元素。

```
var upload_pnl = $('<input type="file" runat="server"/>');
var upload_holder = $("#fileinput_placeholder");
add_btn.on("click", function () {
    upload_pnl.clone().appendTo(upload_holder);
    alert("click event called(debugging)");
}); 
```

同样正如 fscan 指出的那样， runat="server" 不会使这个新元素在后面的代码中可访问，因为页面现在是客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:41:43.247

首先，每次使用 append 插入新元素时都必须创建一个新元素。Append 会将元素从旧的父元素中移出。其次， runat="server" afaik 是一个 asp.net 属性，在 html 中完全没有任何作用。如果您使用 javascript 创建元素，则必须自己进行发布和填充。

# vb.net - Request.QueryString 返回 '<%=Request.QueryString('ID')%>' 问题 vb.net

> ID：14350506
> 
> 赞同：1
> 
> 时间：2013-01-16T02:31:35.743
> 
> 标签：vb.net, request.querystring

我有一个 Request.QueryString 的问题。当用户单击一个按钮时，该页面应该重定向到另一个具有某些值的 url。

当前页面有这个url

```
http://localhost:61430/CM/cm08.aspx?ID=ABC123&PID=Y6543&APPTYPE=1 
```

这是单击按钮的方法。我什至尝试将 Request.QueryString 值存储在一个变量中，但我仍然在“测试”变量内容中得到 '<%=Request.QueryString('ID')%>'。

```
Protected Sub btnBack_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnBack.Click, btnNo.Click

        Dim test As String = Request.QueryString("ID")
        Response.Redirect("cm02.aspx?ID=" & Request.QueryString("ID"))
End Sub 
```

无论如何，当页面加载 cm02 页面时，url 看起来像这样

```
http://localhost:61430/CM/cm02.aspx?ID=<%=Request.QueryString('ID')%> 
```

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:36:40.257

我很确定问题不存在。
在您的代码中搜索此字符串（带单引号）：QueryString('ID')

# python - Python winreg 循环遍历子键

> ID：14350517
> 
> 赞同：9
> 
> 时间：2013-01-16T02:32:52.480
> 
> 标签：python, winreg

我可以使用下面的代码从我的 Windows 7 机器注册表配置单元“HKEY_LOCAL_MACHINE”中成功检索 5 个子键。

```
from _winreg import *

try:
    i = 0
    while True:
        subkey = EnumKey(HKEY_LOCAL_MACHINE, i)
        print subkey
        i += 1
except WindowsError:
    pass 
```

我的问题是，我该如何枚举这些下的键？我想最终列出 SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkList\Signatures\Unmanaged 文件夹中的所有密钥，但我不知道如何一步步往下走。

作为对第一条评论的回应，我在我的机器上运行了这段代码，虽然它没有出错，但它没有产生结果。

```
from _winreg import *

aReg = ConnectRegistry(None,HKEY_LOCAL_MACHINE)
aKey = OpenKey(aReg, r"SOFTWARE\Microsoft\Windows NT\CurrentVersion\NetworkList\Signatures\Unmanaged")
for i in range(1024):
    try:
        keyname = EnumKey(aKey, i)
        asubkey = OpenKey(aKey, keyname)
        val = QueryValueEx(asubkey, "Description")
        print val
    except WindowsError:
        break 
```

regedit 或 reg 查询在该文件夹中显示 6 个值，但我无法获得 python 脚本来显示这六个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-20T13:50:54.510

只是想添加一个可能更 Pythonic 的解决方案。

```
from _winreg import *
from contextlib import suppress
import itertools

def subkeys(path, hkey=HKEY_LOCAL_MACHINE, flags=0):
    with suppress(WindowsError), OpenKey(hkey, path, 0, KEY_READ|flags) as k:
        for i in itertools.count():
            yield EnumKey(k, i) 
```

您现在可以按预期访问密钥

```
for key in subkeys(r'path\to\your\key'):
    print key 
```

对于缺少[suppress()](https://docs.python.org/3/library/contextlib.html#contextlib.suppress)的 python 版本**< 3.4**，我建议将其添加到您的项目中：

```
from contextlib import contextmanager

@contextmanager
def suppress(*exceptions):
    try:
        yield
    except exceptions:
        pass 
```

> **注意：**如果您在读取某些值时遇到问题，则可能是从错误的注册表视图中读取。传递`KEY_WOW64_64KEY`或传递`KEY_WOW64_32KEY`给`flags`参数）。**在python 2.6**[`OpenKey()`](https://docs.python.org/2/library/_winreg.html#_winreg.PyHKEY.__enter__)中引入了用作上下文管理器。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-27T15:09:53.683

这有效，并打印出所有子键的列表（@Broseph 答案的固定版本）

```
import _winreg

def subkeys(key):
    i = 0
    while True:
        try:
            subkey = _winreg.EnumKey(key, i)
            yield subkey
            i+=1
        except WindowsError as e:
            break

def traverse_registry_tree(hkey, keypath, tabs=0):
    key = _winreg.OpenKey(hkey, keypath, 0, _winreg.KEY_READ)
    for subkeyname in subkeys(key):
        print '\t'*tabs + subkeyname
        subkeypath = "%s\\%s" % (keypath, subkeyname)
        traverse_registry_tree(hkey, subkeypath, tabs+1)

keypath = r"SOFTWARE\\Microsoft\\Windows"

traverse_registry_tree(_winreg.HKEY_LOCAL_MACHINE, keypath) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-02T18:56:48.813

我没有要搜索的相同注册表项，但以下代码将列出 HKEY_LOCAL_MACHINE\Software 中的所有子项。我认为如果您将 keyVal 字符串的值更改为您的目录，它将起作用。

该`try ... except`集团是这样的，因为 EnumKey 将失败。我没有将它作为 for 循环来做，因为我不知道如何获得正确的 aKey 长度。

```
keyVal = r"Software"
aKey = OpenKey(HKEY_LOCAL_MACHINE, keyVal, 0, KEY_ALL_ACCESS)
try:
    i = 0
    while True:
        asubkey = EnumKey(aKey, i)
        print(asubkey)
        i += 1
except WindowsError:
    pass 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-22T03:12:38.067

这样的事情有用吗？

```
import _winreg

def subkeys(key):
    i = 0
    while True:
        try:
            subkey = _winreg.EnumKey(key, i)
            yield subkey
            i+=1
        except WindowsError:
            break

def traverse_registry_tree(key=_winreg.HKEY_LOCAL_MACHINE, tabs=0):
    for k in subkeys(key):
        print '\t'*tabs + str(k)
        traverse_registry_tree(k, tabs+1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-13T17:40:25.643

这只是对@sparrowt 答案的改进。当我尝试时他的答案失败了，但认为它在正确的轨道上。这将在 keypath 下方给出树。很抱歉在重写中更改了一些变量和方法名称，但只是想快速发布。在我的代码中，我将 hkey 作为全局变量 bc 我希望一次只能使用一个 hkey。

```
import winreg
import itertools
hkey = winreg.HKEY_LOCAL_MACHINE
def list_subkeys(path, hkey_set=None):
    global hkey
    if not hkey_set:
        hkey_set = hkey
    try:
        registry_key = winreg.OpenKey(hkey_set, path, 0, winreg.KEY_READ)
        for i in itertools.count():
            yield winreg.EnumKey(registry_key, i)
        winreg.CloseKey(registry_key)
    except Exception as ex:
        if str(ex) != '[WinError 259] No more data is available':
            print(str(ex))
        try:
            winreg.CloseKey(registry_key)
        except:
            pass
        return []

def traverse_registry_tree(keypath, levels=None, hkey_set=None):
    global hkey
    if not levels:
        levels = []
    if not hkey_set:
        hkey_set = hkey
    subkeys = list(list_subkeys(keypath, hkey_set))
    for subkeyname in subkeys:
        subkeypath = "%s\\%s" % (keypath, subkeyname)
        levels.append(subkeypath)
        levels.extend([r for r in traverse_registry_tree(subkeypath, levels, hkey_set) if r not in levels])
    del subkeys
    return levels 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-12T13:06:30.283

要遍历 Windows 注册表的键，您需要`EnumKey()`from `_winreg`module. 下面给出了以下定义`EnumKey()`：-

> def EnumKey（键，索引）：
> 
> *   枚举打开的注册表项的子项。
> *   key 是一个已经打开的密钥，或者任何一个预定义的 HKEY_* 常量。
> *   index 是一个整数，用于标识要检索的键的索引。

请注意，此方法将索引作为参数，并且只会为您提供给定索引的键。因此，为了获取所有键，您需要将索引加一并继续，直到遇到`WindowsError`.

有关相同的详细了解，请参阅[此帖子](https://pabitrap.wordpress.com/2016/09/08/accessing-windows-registry-using-pythons-winreg-module/)。代码的 Github 链接可以在帖子中找到。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-16T11:13:26.143

我做了这个代码。它打印一个键的整个子树。但首先我想说的是，下面的代码并没有使用原始命名：

```
[key]
  |-[key]
  |   └-[value1: data]
  |-[value1: data]
  └-[value2: data] 
```

我使用以下方案

```
[folder]
  |-[subfolder]
  |   └-[key1: value]
  |-[key1: value]
  └-[key2: value] 
```

```
import winreg
def padding(cnt):
    str = ""
    for i in range(cnt):
        str += '\t'
    return str

def recursive_visit(folder, i):
    subfolders_count, subkeys_count, modified = winreg.QueryInfoKey(folder)
    for subfolder_index in range(subfolders_count):
        try:
            subfolder_name = winreg.EnumKey(folder, subfolder_index)
            print(padding(i)+subfolder_name+":")
            with winreg.OpenKeyEx(folder, subfolder_name) as subfolder:
                recursive_visit(subfolder, i+1)
        except (WindowsError, KeyError, ValueError):
            print("Error reading " + folder)
    for subkey_index in range(subkeys_count):
        print(padding(i)+str(winreg.EnumValue(folder, subkey_index)))
        globals()["cnt"] += 1

cnt = 0 #how many keys we visited

### ENTER INPUT HERE
root = winreg.HKEY_LOCAL_MACHINE
folder = r"SYSTEM\Setup\FirstBoot\Services"
###

with winreg.OpenKey(root, folder) as reg:
    keys_count, values_count, modified = winreg.QueryInfoKey(reg)
    print("Subfolders: " + str(keys_count) + " Subkeys: " + str(values_count))
    recursive_visit(reg, 1)
print("visited " + str(cnt) + " leaf keys") 
```

这将为您提供以下输出：

```
Subkeys: 72 Subvalues: 1
    AdobeARMservice:
        ('ServiceName', 'AdobeARMservice', 1)
        ('Path', '"C:\\Program Files (x86)\\Common Files\\Adobe\\ARM\\1.0\\armsvc.exe"', 1)
        ('Path.Org', '"C:\\Program Files (x86)\\Common Files\\Adobe\\ARM\\1.0\\armsvc.exe"', 1)
        ('Path.Win32', 'C:\\Program Files (x86)\\Common Files\\Adobe\\ARM\\1.0\\armsvc.exe', 1)
        ('StartName', 'LocalSystem', 1)
        ('DisplayName', 'Adobe Acrobat Update Service', 1)
        ('Type', 16, 4)
        ('StartType', 2, 4)
        ('ErrorControl', 0, 4)
        ('LoadOrderGroup', '', 1)
        ('TagId', 0, 4)
    AdobeUpdateService:
        ('ServiceName', 'AdobeUpdateService', 1)
        ... 
```**

# javascript - 如何在带有变量选择器的输入变量上使用 jquery 读取属性？

> ID：14350519
> 
> 赞同：3
> 
> 时间：2013-01-16T02:33:14.050
> 
> 标签：javascript, jquery, html

我想重新加载一个特定的 div，它的 id 对应于表元素的 id...（该 div 只有一个表子元素）。

警报说 tID 未定义。

javascript:

```
function (msg) {
         var tID = $("table", msg).attr('id');
         alert(tID);
         $("#reloadme_"+tID).html(msg);
} 
```

html:

```
 <div id="reloadme_2036">

        <table id="2036"  class="customCSSclass">
            ...table contents...
        </table>

   </div> 
```

我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:51:16.123

[`find`](http://api.jquery.com/find/)在 jQuery 对象中查找当前元素集的*后代*[`.filter`](http://api.jquery.com/filter/)，您应该使用which 过滤 jQuery 对象本身中的元素：

```
$('<table id="001">[...]</table>')
//the jQuery object will contain a reference to the parsed <table> element,
//so you have to .filter() the jQuery object itself to extract it 
```

当然，如果是jQuery对象内部的唯一元素，就不需要过滤了。`=]`

此外，您还可以使用`.find`例如查找`tr`/ `td`s（或任何其他元素），它们是`table`您的 jQuery 对象内部引用的元素的后代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:49:59.493

也许这就是你要找的东西？

```
function reload(msg) {
  var tID = msg.match(/id="(\d{1,4})"/i)[1]; //find 1 to 4 digits in the id attribute
  alert(tID);  //alerts 2036
  $("#reloadme_"+tID).html(msg); //adds the content to the div
}
reload('<table id="2036" class="customCSSclass"> ...table contents... </table>'); 
```

如果是这样，您可能正在寻找的是 javascript 的 .match() 方法，该方法将在字符串中查找 id 号。

查看[JSFiddle](http://jsfiddle.net/bozdoz/Z3W3Z/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:53:54.857

你必须像这样尝试

```
var msg='<table id="2036"  class="customCSSclass"></table>';
alert($(msg).attr("id")); 
```

# c# - 将 C# 对象数组序列化为字符串的最快方法

> ID：14350526
> 
> 赞同：3
> 
> 时间：2013-01-16T02:34:34.160
> 
> 标签：c#, string, networking, serialization, unity3d

我正在寻找将 C# 对象数组序列化和反序列化为字符串的最快方法...

为什么是字符串而不是字节数组？好吧，我正在使用网络系统（具体来说是 Unity3d 网络系统），他们设置了一个相当烦人的限制，不允许发送字节数组或自定义类型，这是我需要的两件事（很难解释我的情况） .

为此我想出的最简单的解决方案是将我的自定义类型序列化为一个字符串，然后传输该字符串，而不是直接发送对象数组。

所以，这就是问题！将对象数组序列化为字符串的最快方法是什么？我最好避免使用巫毒字符（不可见/特殊字符），因为我不确定 Unity3d 是否会剔除它们，但 base64 编码并没有充分利用允许的字符谱。我也担心使用 base 64 的效率。

显然，由于这与网络相关，序列化数据尽可能小是一个优势。

编辑：
一种可能的方法是序列化为一个字节数组，然后假装该字节数组是一个字符串。问题是，我担心 .Net 2.0 或 Unity 的网络系统最终会剔除使用这种方法创建的一些特殊或不可见的字符......非常需要避免的事情。我希望有一个与此速度接近或相等的解决方案，但不使用任何可能被剔除的字符。（我不知道这些是什么字符，但是在从字节数组直接转换为字符串时，我对 Unity 有过不好的体验）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T02:37:42.547

[Json.Net](http://nuget.org/packages/newtonsoft.json)是我一直使用它的简单方式，并以人类可读的方式完成工作。Json 几乎是轻量级的，并且被广泛用于通过网络发送数据。

> 我会给你这个答案被接受，但我建议在你的答案中添加 base64 编码！
> 
> ——乔治·奥茨·拉森

谢谢，是的，如果可读性不是问题，这也是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:55:09.207

我们使用[SoapFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.soap.soapformatter.aspx)以便将对象嵌入到 Javascript 变量中，否则可以“安全”地传递：

```
using (MemoryStream oStream = new MemoryStream())
{
    (new SoapFormatter()).Serialize(oStream, theObject);

    return Encoding.Default.GetString(oStream.ToArray());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T08:42:29.797

```
using(MemoryStream s = new MemoryStream()) {
    new BinaryFormatter().Serialize(s, obj);
    return Convert.ToBase64String(s.ToArray());
} 
```

和

```
using(MemoryStream s = new MemoryStream(Convert.FromBase64String(str))) {
    return new BinaryFormatter().Deserialize(s);
} 
```

# java - JList 仅在第一次插入时更新

> ID：14350529
> 
> 赞同：0
> 
> 时间：2013-01-16T02:34:44.630
> 
> 标签：java, swing, jlist

这是我第一次尝试为 Java 应用程序提供一个像样的 GUI，我需要将[JLists](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JList.html)与自定义[ListModels](http://docs.oracle.com/javase/7/docs/api/javax/swing/ListModel.html)一起使用以表示某些结构。

```
//The 2 below structures implement the ListModel interface, using an internal
//ArrayList, in order to be used as
//a model for 2 different JLists in my GUI.
private PropertyList propertiesList = new PropertyList();
private SelectedProperties selProperties = new SelectedProperties();
//and these are the two JLists they are the models for
private javax.swing.JList Properties_JList;
private javax.swing.JList SelectedProperties_JList; 
```

在这里，我通过流填充我的第一个 JList：

```
private void OpenFile_MenuItemActionPerformed(java.awt.event.ActionEvent evt) {                                                  
    final JFileChooser fc = new JFileChooser();
    fc.setCurrentDirectory(null);
    int returnVal = fc.showOpenDialog(this);

    if (returnVal == JFileChooser.APPROVE_OPTION) {
        File file = fc.getSelectedFile();
        this.Properties_JList.setModel(propertiesList);
        this.propertiesList.AddFromFile(file);
    } else {
        //...
    }
} 
```

这恰好工作得很好。我通过读取文件导入了一些条目，它们都按预期以 .toString() 表示形式显示。

问题是第二个 JList：

```
private void AddToSelected_JButtonActionPerformed(java.awt.event.ActionEvent evt) {

    Property p = (Property) this.Properties_JList.getSelectedValue();
    this.SelectedProperties_JList.setModel(selProperties);
    this.selProperties.InsertProperty(p);
    this.SelectedProperties_JList.revalidate();
} 
```

这似乎**只**显示了我尝试通过上述按钮事件添加到它的第一个项目，我不知道为什么。我考虑在表单的 initComponents() 调用之后立即移动两个 .setModel(...) 调用，但如果我这样做，则根本不会填充任何列表。
记录消息清楚地表明内部结构**正在**被填充，但即使它们都是我的 JList 的各自 ListModel，其中一个也没有按预期工作。

足够部分的代码是由 Netbeans 生成的，我花了几个小时查找 API，但仍然无法找出我做错了什么。有任何想法吗？

# c# - c#进度条百分比

> ID：14350533
> 
> 赞同：1
> 
> 时间：2013-01-16T02:35:16.050
> 
> 标签：c#, progress-bar, percentage

我在 winform c# 应用程序中有一个进度条，我将其作为进度指示器。进度条可以有不同的最大大小，具体取决于用户输入的数量（可以超过 100），所以这就是我设置它的方式：

```
this.pbLoadingWrite.Maximum = Input.Length;
this.pbLoadingWrite.Step = 1; 
```

然后只需更新进度条：

```
this.pbLoadingWrite.PerformStep(); 
```

一切正常，但我想在进度条顶部显示一个 % 数字以提高可见性。

由于 Input.Length 可以大于 100，所以显示百分比的语法是什么？VS c# 中是否内置了任何辅助函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T02:40:10.503

在这种情况下，计算百分比非常容易

```
int percent = (progressbar1.Value / progressbar.Maximum) * 100; 
```

分解：

```
value = 56, Max = 300,

56 / 300 = 0.186666
0.186666 * 100 = 18.666% 
```

# android - 用户更改手机字体后，应用程序中的自定义字体会发生什么变化？

> ID：14350541
> 
> 赞同：0
> 
> 时间：2013-01-16T02:35:55.287
> 
> 标签：android, fonts, custom-font

我打算在应用程序中实现自定义字体，我知道 android 用户可以根据需要更改为其他字体。所以我的问题是，一旦用户更改手机的字体，应用程序中的自定义字体会发生什么？它是否会更改所有字体，包括自定义字体？我没有安卓手机可以测试，有人可以回答我的疑问吗？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:41:07.460

如果您在应用程序中使用自定义字体，它将优先使用自定义字体而不是手机的默认字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:41:29.797

如果您设置自定义字体，您的应用将不会使用手机默认字体，因此它不会附加到手机设置的字体。它不应该被影响

# environment-variables - 在 Java 运行时环境之间切换

> ID：14350544
> 
> 赞同：3
> 
> 时间：2013-01-16T02:36:38.327
> 
> 标签：environment-variables, java

我在运行 Windows XP sp3 的计算机上安装了 Java 6 和 Java 7。我在“我的电脑”->“属性”中的环境变量（PATH、JAVA_HOME）中输入了路径。但是当我给

> java版本

我仍然收到以下文字

> java 版本 "1.7.0_09" Java(TM) SE Runtime Environment (build 1.7.0_09-b05) Java HotSpot(TM) Client VM (build 23.5-b02, 混合模式, 共享)

但是，当我尝试

> javac-版本

我明白了

> javac 1.6.0_03

如何将运行时从 Java 7 更改为 Java 6？当我使用 ant 在 eclipse 中编译我的程序时，我得到以下信息

> 警告：java\util\List.class(java\util:List.class)：主要版本 51 比 50 新，这是此编译器支持的最高主要版本。[javac] 建议升级编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T02:44:00.343

Path 首先是 JRE，因此`java -version`是 JDK，其次是`javac -version`. 检查您的 PATH 变量。

如果您想要 JDK 版本，请将其放在 PATH 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:45:12.353

如果没记错的话，JDK 或 JRE 的 java 7 windows 安装程序会将 java.exe 复制到某些 windows 公共路径。我不记得确切的路径，但可能是 C:\Windows\System32。在命令行上试试这个以知道 java.exe 的位置在哪里：

```
where java 
```

相应地更新您的路径优先级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T02:50:31.013

安装Java (JRE) 时，它会复制`java.exe`到. 但是，当您安装完整的 JDK（带有编译器）时，它不会为. 当您有多个版本的 java 时，将在您输入命令行时调用最后安装的一个。 `C:\Windows\System32``C:\Program Files``javac.exe``java`

如果您需要拥有多个 Java 版本，请使用完整路径，尝试`java`在命令行中使用 unqualified 总是会遇到问题。或者，重新安装 JRE 7 - 这将强制默认`java`为 V7。

# c++ - 带堆内存的 glBuffer

> ID：14350549
> 
> 赞同：4
> 
> 时间：2013-01-16T02:37:38.810
> 
> 标签：c++, opengl

我遇到了一个问题，我不确定如何正确处理。我最近开始为我的游戏创建一个粒子系统，并且一直在为我的粒子数据使用一种名为“粒子”的结构。“粒子”包含用于渲染的顶点信息。

我遇到问题的原因是我将我的粒子结构汇集在堆内存中以节省大量分配，但是我不确定如何在 glBufferData 中使用指针数组，我的印象是 glBufferData 需要实际的结构实例而不是指向结构实例的指针。

我知道我可以重建一个浮点数组，每次渲染只是为了绘制我的粒子，但是是否有一个像 glBufferData 这样的 OpenGL 调用，我在某处丢失了它能够在遍历我提供的数据时取消引用我的指针？理想情况下，我希望避免为了复制数据而不得不遍历数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:09:45.470

> 我的印象是 glBufferData 需要实际的结构实例，而不是指向结构实例的指针。

正确的。*在通过data*参数`glBufferData`指向它的地址处有效地创建数据的平面副本。

 *> 当它通过我提供的数据时，我错过了能够取消引用我的指针的地方？

您正在考虑客户端顶点数组，这些是 OpenGL 最古老的功能之一。自 19 年前发布的 OpenGL-1.1 以来，它们就一直存在。

您只是*不*使用缓冲区对象，即不调用glGenBuffers、glBindBuffer、glBufferData 并将您的客户端数据地址直接传递给glVertexPointer 或glVertexAttribPointer。

但是我强烈建议实际使用缓冲区对象。无论如何都必须将数据复制到 GPU 上，以便进行渲染。通过缓冲区对象执行此操作可以使 OpenGL 驱动程序更有效地工作。此外，从 OpenGL-4 开始，缓冲区对象的使用不再是可选的。*

# c# - 索引数组 - 超出范围

> ID：14350551
> 
> 赞同：0
> 
> 时间：2013-01-16T02:37:44.937
> 
> 标签：c#, arrays, outofrangeexception

我正在遍历一个字符串列表（storedProcedures）并将每个列表项拆分为一个数组。然后我想使用特定索引访问数组元素。一旦我尝试访问数组的第二个元素，我就会得到一个超出范围的异常。

```
string[] myArray = new string[4];
foreach (string procedure in storedProcedures)
{
    myArray = procedure.Split(',');

    foreach (string index in myArray)
    {
        Console.WriteLine(index);
    }

    for (int i = 0; i < myArray.Length; i++)
    {
        Console.WriteLine(myArray[i]);
    }

    Console.WriteLine(myArray[0]);
    Console.WriteLine(myArray[1]);  <---- out of range exception here
    Console.WriteLine(myArray[2]);
    Console.WriteLine(myArray[3]);
} 
```

使用“foreach”和“for”循环访问数组并打印其内容工作正常，所以我不确定为什么通过直接指定索引来访问数组不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:42:32.763

这是没用的：

```
string[] myArray = new string[4]; 
```

因为这会把你的数组扔掉：

```
myArray = procedure.Split(','); 
```

您的问题是其中一个`storedProcedures`没有逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:40:23.920

显示什么`Console.WriteLine(myArray.Length)`？您以 4 的大小开始数组，但`procedure.Split(',')`给了您一个新数组，其中可能只有一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T03:03:57.253

可能您的拆分数组比预期的要短。在从数组中检索值之前，您应该始终检查长度。也许缺少一些逗号，也许你的字符串格式不正确......更好地调试它，如下所示：

```
foreach (String procedure in storedProcedures)
{
    Console.WriteLine("Current Procedure: \"" + procedure + "\"");

    String[] split = procedure.Split(',');

    Console.WriteLine("Split Length: " + split.Length.ToString());

    for (int i = 0; i < myArray.Length; i++)
        Console.WriteLine(i.ToString() + ") " + split[i]);
} 
```

# c++ - c ++如何测试一个类以查看它是否有成员？

> ID：14350552
> 
> 赞同：0
> 
> 时间：2013-01-16T02:37:52.643
> 
> 标签：c++, polymorphism, member, ascii-art

你如何测试一个对象以查看它是否具有某个成员？或者有没有办法查看一个对象是否是某个类的实例？

我正在使用字符图片的继承结构。有 String_Pics、HCat_Pics、VCat_Pics 和 Frame_Pics。它们都源自 Pic_Base。用户使用包含指向对象的智能指针的句柄类“图片”。每个对象都存储一个指向它所基于的图片的指针（另一张图片的一帧，水平连接的两张图片等）。

例如：一个围绕 VCat-Pic 的 Frame-Pic，并且 VCat-Pic 中的两个图片都是围绕 String_Pics 的 Frame_Pics。

```
***************
*             *
* *********** *
* * This    * *
* * is      * *
* *********** *
* *********** *
* * The     * *
* * Example * *
* *********** *
*             *
*************** 
```

Frame_Pics 具有“帧字符”的数据成员，但没有其他类。我正在编写一个函数，它将递归地更改结构中每一帧的帧字符。也许我错过了一种方法来做到这一点，但我正在寻找一种方法来测试我正在处理的对象是否是 Frame_Pic ，从而尝试更改框架字符是否意味着什么.

我的第一直觉是尝试类似`if (p->frame_char)`where frame_char 是 Frame_Pic 数据成员之一的名称，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:39:06.210

您可以尝试将指针动态转换为 a`Frame_pic`并查看它是否返回非空值。

```
Frame_Pic *frame =dynamic_cast<Frame_Pic*>(p);
if(frame  != nullptr){
    //It is Frame_Pic
    frame->frame_char;
} 
```

不过，这样做并不是一个好主意`cast`。尝试编写虚拟函数来消除对它的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:05:37.023

事实证明，我真的不需要对会员资格进行直接测试。这实际上是一个非常适合多态性的问题：

我在 Pic_Base 中声明了一个`virtual`函数“reframe”，并定义了“frame”的版本以更改字符，并为其他类定义了在必要时通过嵌套图片递归的版本。

# bash - 创建计算器脚本

> ID：14350556
> 
> 赞同：3
> 
> 时间：2013-01-16T02:38:16.653
> 
> 标签：bash, shell, unix

我正在尝试使用 bash 脚本制作计算器。用户输入一个数字，选择他们是否希望加、减、乘或除。然后用户输入第二个数字并且能够选择是否在循环中再次进行求和，或者加、减、乘或除。

我现在无法解决这个问题

```
echo Please enter a number
read number

echo What operation would you like to perform: 1: Add, 2: Subtract, 3: Multiple, 4: Divide
read operation

case $operation in
    1) math='+';;
    2) math='-';;
    3) math='*';;
    4) math='/';;
    *) math='not an option, please select again';;
esac
echo "$number $math"

echo Please enter a number
read number2

echo What operation would you like to perform: 1: Add, 2: Subtract, 3: Multiple, 4: Divide, 5: Equals
read operation2
case $operation2 in
    1)math2='Add';;
    2)math2='Subtract';;
    3)math2='Multiply';;
    4)math2='Divide';;
    5)math2='Equals';;
    *)math2='not an option, please select again';;
esac
echo You have selected $math2

exit 0 
```

这是我到目前为止所做的，但谁能帮我弄清楚如何在计算器上循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T04:21:24.140

鲜为人知的 shell 内置命令`select`对于这种菜单驱动程序很方便：

```
#!/bin/bash
while true; do
    read -p "what's the first number? " n1
    read -p "what's the second number? " n2
    PS3="what's the operation? "
    select ans in add subtract multiply divide; do
        case $ans in 
            add) op='+' ; break ;;
            subtract) op='-' ; break ;;
            multiply) op='*' ; break ;;
            divide) op='/' ; break ;;
            *) echo "invalid response" ;;
        esac
    done
    ans=$(echo "$n1 $op $n2" | bc -l)
    printf "%s %s %s = %s\n\n" "$n1" "$op" "$n2" "$ans"
done 
```

样本输出

```
what's the first number? 5
what's the second number? 4
1) add
2) subtract
3) multiply
4) divide
what's the operation? /
invalid response
what's the operation? 4
5 / 4 = 1.25000000000000000000 
```

* * *

如果我想使用 bash v4 功能和 DRY：

```
#!/bin/bash

PS3="what's the operation? "
declare -A op=([add]='+' [subtract]='-' [multiply]='*' [divide]='/')

while true; do
    read -p "what's the first number? " n1
    read -p "what's the second number? " n2
    select ans in "${!op[@]}"; do
        for key in "${!op[@]}"; do
            [[ $REPLY == $key ]] && ans=$REPLY
            [[ $ans == $key ]] && break 2
        done
        echo "invalid response"
    done
    formula="$n1 ${op[$ans]} $n2"
    printf "%s = %s\n\n" "$formula" "$(bc -l <<< "$formula")"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T02:54:58.693

### 在循环中包装代码

如果您只想将代码包装在[Bash 循环结构](http://www.gnu.org/software/bash/manual/html_node/Looping-Constructs.html)中，并且愿意按 CTRL-C 来终止循环而不是做一些更花哨的事情，那么您可以将代码包装在 while 循环中。例如：

```
while true; do
    : # Your code goes here, inside the loop.
done 
```

只要确保将您的无条件`exit`语句移出循环体即可。否则，循环将在到达该行时终止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-30T11:29:43.650

对于您的`~/.bashrc`：

```
alias bc="BC_ENV_ARGS=<(echo "scale=2") \bc" 
```

只需使用`bc`, 使用该别名，它就会自动使用两位小数而不是整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:28:14.223

# !/bin/bash

PS3="操作是什么？" 声明-A op=([add]='+' [subtract]='-' [multiply]='*' [divide]='/')

虽然是真的；do read -p "第一个数字是多少？" n1 read -p "第二个数字是多少？" n2 select ans in "${!op[@]}"; 输入 "${!op[@]}"; do [[ $REPLY == $key ]] && ans=$REPLY [[ $ans == $key ]] && break 2 done echo "invalid response" done formula="$n1 ${op[$ans]} $ n2" printf "%s = %s\n\n" "$formula" "$(bc -l <​​<< "$formula")" 完成

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-27T05:07:08.220

请使用以下脚本。

```
clear
sum=0
i="y"

echo " Enter one no."
read n1
echo "Enter second no."
read n2
while [ $i = "y" ]
do
echo "1.Addition"
echo "2.Subtraction"
echo "3.Multiplication"
echo "4.Division"
echo "Enter your choice"
read ch
case $ch in
    1)sum=`expr $n1 + $n2`
     echo "Sum ="$sum;;
        2)sum=`expr $n1 - $n2`
     echo "Sub = "$sum;;
    3)sum=`expr $n1 \* $n2`
     echo "Mul = "$sum;;
    4)sum=`expr $n1 / $n2`
     echo "Div = "$sum;;
    *)echo "Invalid choice";;
esac
echo "Do u want to continue ?"
read i
if [ $i != "y" ]
then
    exit
fi
done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-13T10:18:22.770

```
#calculator

while (true) # while loop 1
do  
echo "enter first no"
read fno
if [ $fno -eq $fno 2>/dev/null ]; # if cond 1 -> checking integer or not
then
c=1
else
echo "please enter an integer"
c=0
fi # end of if 1
if [ $c -eq 1 ]; #if 2
then
break
fi # end of if 2
done # end of whie 1

while(true) #while loop 2
do
echo "enter second no"
read sno
if [ $sno -eq $sno >/dev/null 2>&1 ] # if cond 3 -> checking integer or not
then
c=1
else
echo "please enter an integer"
c=0
fi # end of if 3
if [ $c -eq 1 ] # if cond 4
then
break
fi # end of if 4
done #2

while(true) # while loop 3
do
printf "enter the operation (add,div,mul,sub) of $fno and $sno\n"
read op
count=0
##addition

if [ $op = add ] #if cond 5
then
echo "$fno+$sno is `expr $fno + $sno`"

#multiplication

elif [ $op = mul ]; 
then
echo "$fno*$sno is `expr $fno \* $sno`"

#substraction

elif [ $op = sub ] 
then
while(true) #while loop 3.1
do
printf "what do you want to do??? \n 1\. $fno-$sno \n 2\. $sno-$fno"
printf "\n press the option you want to perform?(1 or 2)\n"
read opt
if [ $opt = 1 ] #if cond 5.1
then
echo "$fno-$sno is `expr $fno - $sno`"
break
elif [ $opt = 2 ] 
then
echo " $sno-$fno  is `expr $sno - $fno`"
break
else "please enter valid options to proceed(1 or 2)";
clear
fi #end of if 5.1
done  # end of 3.1

#division
elif [ $op = div ]
then
while(true) # whilw loop 3.2
do
printf "what do you want to do??? \n 1\. $fno/$sno \n 2\. $sno/$fno"
printf "\n press the option you want to perform?(1 or 2)\n"
read opt
if [ $opt = 1 ] #if cond 5.2
then
echo "$fno divided by $sno is  `expr $fno / $sno`"
break
elif [ $opt = 2 ]
then
echo " $sno divided by $fno  is `expr $sno / $fno`"
break
else 
clear
fi #end of if 5.2
done  # end of 3.2
else 
echo "valid option please!!!"
count=1
fi # end of if 5

if [ $count -eq 0 ] #if cond 6
then
echo "Do you want to do more ops"
echo "(y/n)"
read ans
clear
if [ $ans = n ] # if 6.1
then
break
fi # end of if 6.1
fi #end of if 6
done  #end of while 3 
```

# php - 如果我单击重置按钮以重置不同表单上的单选按钮，我如何清除可能的表格数据

> ID：14350563
> 
> 赞同：2
> 
> 时间：2013-01-16T02:38:58.990
> 
> 标签：php, javascript

我想要的是如果我单击我的重置按钮，它会重置我的单选按钮并清除它在可能表数据上的值....我应该在这里添加什么到我的代码中...

```
function  clear(){
    var elems = document.getElementsByName('president') && document.getElementById('president');
    for(i=0;i<elems.length;i++)
        elems[i].checked=false;
    document.list.editform.president.value='';

} 
```

例如`document.getElementsByName('president')`，我的编辑表单上的重置按钮是我`document.getElementById('president')`的，另一个表单上的表数据是我的。如果我单击重置，是否有可能在我的函数上调用两个表单？请帮助...

这是我的 select_candidate.php

```
<script type="text/javascript">
<!--
function  clear(){
    var elems = document.getElementsByName('president');
    for(i=0;i<elems.length;i++)
        elems[i].checked=false;
    document.list.editform.president.value='';

}
function get_president_value()
{
    for (var i=0; i < document.list.president.length; i++)
    {
        if (document.list.president[i].checked)
        {
            return document.getElementById('president').innerHTML = document.list.president[i].value;
        }
    }
}
-->
</script>
<form method="post" name="list">
    <div id="TabbedPanels1" class="TabbedPanels" >
        <ul class="TabbedPanelsTabGroup">
            <li class="TabbedPanelsTab" tabindex="0">President</li>
        </ul>
    <div class="TabbedPanelsContentGroup">
    <div class="TabbedPanelsContent"> 
        <fieldset>
            <legend>President</legend>
<?php require_once('candidate/president.php'); ?>   
        </fieldset></div>
</form>

<!-- here the value of my radio button will appear on this table data and this is where i want to clear as i click my reset button which clears also my radio buttons... -->
<div>
    <fieldset>
        <legend>List of Your Candidates</legend>
        <table>
            <tr><td>President: </td> <td id="president" onclick="clear()"> </td> </tr>
        </table>
    </fieldset>
</div> 
```

这是我的president.php

```
 <?php
   // get the records from the database
      if ($result = $mysqli->query("SELECT * FROM candidate_info WHERE position= 'president'"))
       {
        // display records if there are records to display
          if ($result->num_rows > 0)
         {
           // display records in a table
           echo "<table border='1' cellpadding='10'>"; 
            // set table headers
         echo "<tr><th>Student ID</td><th>Course</th><th>Name</th></tr>";
             while ($row = $result->fetch_object())
               {
             // set up a row for each record
              echo "<tr>";
            echo "<td>" . $row->studid . "</td>";
   echo "<td>" . $row->course . "</td>";
        echo "<td>" . $row->fname . " ". $row->mname ." ". $row->lname ." </td>";
   echo "<td><input type ='radio' name='president' id='". $row->studid ."' value='" . $row->fname . " ". $row->mname ." ". $row->lname ."' onchange='get_president_value()' ></td>";
      echo "</tr>";
            }
    echo "</table>";
           }
        // if there are no records in the database, display an alert message
           else
            {
                echo "No results to display!";
          }
           }
            // show an error if there is an issue with the database query
                    else
                    {
            echo "Error: " . $mysqli->error;
                    }
              // close database connection
                    $mysqli->close();
            //    <a href="records.php">Add New Record</a>      
            ?>
        //here is my reset button that resets my radio buttons
            <form name="editform" method="post">
      <input type="reset" name="reset" value="Clear" id="candidate2" onClick="clear()">
     </form></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:15:43.497

```
Java Script Code use tableid.rows.length  take number of row;

        if(tabLen == 1){ return;}//its mean only header remaning no data 

        where rowId while creating table giving rowId string like "userRow" ;
        for (i=1; i< tabLen; i++)
                {
                    if (document.getElementById(rowId+(i-1)) != undefined)
                        tableToBeDeleted.deleteRow(document.getElementById(rowId+(i-1)).rowIndex);
                    else if (document.getElementById(rowId+"_New") != undefined)
                        tableToBeDeleted.deleteRow(document.getElementById(rowId+"_New").rowIndex);
                } 
```

# c# - 在 UserControl 处丢失 GridView SelectIndexChanged

> ID：14350564
> 
> 赞同：-1
> 
> 时间：2013-01-16T02:39:02.167
> 
> 标签：c#, asp.net, code-behind, webusercontrol, web-user-controls

我有一个包含 GridView 的用户控件。我为此 GridView 设置了 AutoGenerateSelectButton 为真。但是当我在 UserControl 中按 Select 时它不起作用。你有什么主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:26:54.037

您应该将事件处理移动到拥有 UserControl 而不是 UserControl 的页面

在页面的 Page_Load 中，添加这个

```
myUserControl.FindControl("GridView1"));
dvGrid.SelectedIndexChanged += new EventHandler(GridView1_SelectedIndexChanged); 
```

将处理程序添加到页面

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
     //access the GridView
     GridView grid = (GridView) sender;

     //access the selected row
     GridViewRow selectedRow = grid.SelectedRow;

     //access the selected Primary key - make sure you set the DataKeyNames property of the GridView to the Record Id - in your Markup
     string currentRowPrimaryKey = grid.SelectedValue;
     //OR
     string currentRowPrimaryKey = grid.SelectedDataKey.Value;

} 
```

现在你有几个值可以使用。您可以设置断点并检查发件人的属性以获得更多选项。祝你好运

# c# - 如何用浮点格式化字符串？

> ID：14350568
> 
> 赞同：1
> 
> 时间：2013-01-16T02:39:25.463
> 
> 标签：c#, .net

在数据库中，我有一个值为 54342.76 的浮点型 PRICE 字段类型，我想在 gridview 上将其显示为 54,342.76。如何格式化这个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:44:40.840

尝试

```
float f = 54342.76F;
string s = f.ToString("0,0.000", CultureInfo.InvariantCulture);
Console.WriteLine(s); 
```

您可以改用`c`说明符，但它也会打印货币符号。`CultureInfo.InvariantCulture`在某些本地化中使用as`,`可能会丢失千位分隔符。

另请阅读[Decimal.ToString 方法](http://msdn.microsoft.com/en-us/library/fzeeb5cd.aspx)、[标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)、[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:44:19.263

这就是我使用的：

```
x.ToString("c") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T02:48:48.237

```
String.Format("{0:n}", 54342.76F) 
```

N 方法是一个很好的解决方案，因为它应该尊重用户的语言环境，而其他人喜欢：

```
String.Format("{0:#,###,###.##}", 54342.76F) 
```

在某些情况下可以绕过当前的文化。如果要显示不带小数的数字，请使用`{0:n0}`而不是。`{0:n}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T03:02:50.313

过去我用过这个： http: [//www.codeproject.com/Articles/11531/Money-DataType](http://www.codeproject.com/Articles/11531/Money-DataType)

在 DataGridView 列中使用时，它可以完美地格式化钱。

# java - Java 与 Android SDK

> ID：14350570
> 
> 赞同：0
> 
> 时间：2013-01-16T02:39:37.617
> 
> 标签：java, android

我想知道 Java 与 Android SDK 的相似程度。我知道 Android SDK 使用 Java，但我也知道有很多不同的东西，比如清单文件和 XML 文件等等。我想知道SDK是否足够相似，如果我要制作一个简单`Swing`的基于GUI的程序，我能在一天内移植它吗？这是现实的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:43:06.477

Swing 和 Android 的概念 UI 模型有很大不同。除了最琐碎的 UI 之外，期望在一天内移植任何东西是不现实的。（我这样说是基于做端口的经验。）

# neo4j - py2neo , Neo4j 中的索引错误

> ID：14350571
> 
> 赞同：0
> 
> 时间：2013-01-16T02:39:43.340
> 
> 标签：neo4j, py2neo

我是 py2neo 的新手，所以我想我会从一个简单的程序开始。它返回一个 TypeError: Index is not iterable。无论如何，我正在尝试添加一组节点，然后为它们创建关系，同时避免重复。不知道我做错了什么。

```
from py2neo import neo4j, cypher
graph_db = neo4j.GraphDatabaseService("http://localhost:7474/db/data/")

happy = "happy"
glad = "glad"
mad = "mad"
irate = "irate"
love = "love"

wordindex = graph_db.get_or_create_index(neo4j.Node, "word")

for node in wordindex:
              wordindex.add("word", node["word"], node)

def createnodes(a, b, c, d, e):
nodes = wordindex.get_or_create(
    {"word": (a)},
    {"word": (b)},
    {"word": (c)},
    {"word": (d)},
    {"word": (e)},
    )

def createrel(a, b, c, d, e):
rels = wordindex.get_or_create(
    ((a), "is", (b)),
    ((c), "is", (d)),
    ((e), "is", (a)),
    )

createnodes(happy, glad, mad, irate, love)
createrel(happy, glad, mad, irate, love) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T09:45:37.183

您在这里错误地使用了许多方法，从[`Index.add`](http://nigelsmall.com/_api/py2neo/neo4j.html#py2neo.neo4j.Index.add)方法开始。应该使用此方法将现有节点添加到索引中，但此时代码中尚未实际创建任何节点。我认为你想使用[`Index.get_or_create`](http://nigelsmall.com/_api/py2neo/neo4j.html#py2neo.neo4j.Index.get_or_create)如下：

```
nodes = []
for word in [happy, glad, mad, irate, love]:
    # get or create an entry in wordindex and append it to the `nodes` list
    nodes.append(wordindex.get_or_create("word", word, {"word": word})) 
```

这基本上会替换您的`createnodes`函数，因为节点是通过索引直接创建的，保持唯一性。

然后你就可以用上面代码得到的节点对象唯一地创建你的关系，加上[`GraphDatabaseService.get_or_create_relationships`](http://nigelsmall.com/_api/py2neo/neo4j.html#py2neo.neo4j.GraphDatabaseService.get_or_create_relationships)方法如下：

```
graph_db.get_or_create_relationships(
    (nodes[0], "is", nodes[1]),
    (nodes[2], "is", nodes[3]),
    (nodes[4], "is", nodes[0]),
) 
```

希望这可以帮助

奈杰尔

# excel-2007 - 将报告从 cognos 导出到 excel 时面临的数据类型问题

> ID：14350573
> 
> 赞同：1
> 
> 时间：2013-01-16T02:40:06.387
> 
> 标签：excel-2007, export-to-excel, cognos, cognos-8, cognos-bi

当我将报告从 cognos 导出为 excel 2002 或 2007 格式时，我想将数字转换为数字数据类型。

当我尝试查找某些列的总和时，我在导出后遇到问题，它的值为

23,3456| 2356| 45,686.89| 20.00

由于这个逗号或其他字符，它将列作为文本或其他数据类型。所以我手动转换为数字数据类型，然后应用求和函数。需要一个解决方案来避免这种情况。

我希望十进制值为十进制，而数值为数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T14:12:48.873

Cognos 安装的区域/语言设置与 Excel（继承自 Windows）的区域/语言设置不匹配。最好的解决方案是调整 Windows 设置以匹配 Cognos，反之亦然。

或者，在相关报告中，您可以通过选择它们并从属性窗口中选择数据格式来覆盖值的数据格式。从那里您可以调整各种设置，例如强制使用特定数据类型以及其他选项，例如是否使用逗号分隔符。

![在此处输入图像描述](../Images/c8981f86fe21fb5b92a47067d3c2d6f4.png)

# asp.net - ASP.NET Web API - 路由

> ID：14350577
> 
> 赞同：2
> 
> 时间：2013-01-16T02:40:35.287
> 
> 标签：asp.net, asp.net-mvc-4, asp.net-web-api

我正在使用 Web API 来公开一堆服务。我遇到了一些路线问题，需要一些帮助。

我定义了默认路由：

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new {id = RouteParameter.Optional}
            ); 
```

使用这条路线，我可以到达正常路线，例如：'/api/clients/' 和 '/api/clients/4'。我想要一个 GET 访问以下路由“api/clients/4/profiles”和“api/clients/4/validations”。

我尝试了以下路线但没有成功：

```
config.Routes.MapHttpRoute(
    name: "ClientProfilesApi",
    routeTemplate: "api/{controller}/{clientid}/profiles",
    defaults: new { action = RouteParameter.Optional },
    constraints: new { controller = "clients" }
    );

 config.Routes.MapHttpRoute(
   name: "ClientValidationsApi",
       routeTemplate: "api/{controller}/{clientid}/validations",
       defaults: new { action = RouteParameter.Optional },
   constraints: new { controller = "clients" }
   ); 
```

我还尝试使用“ActionName”属性，如下所示：

```
[HttpGet]
[ActionName("profiles")]
public IEnumerableResponseDto<ProfileLayoutDto> GetProfiles(Int64 clientId, [FromUri] IEnumerableRequestDto request)
{ .... }

[HttpGet]
[ActionName("profiles")]
public IEnumerableResponseDto<ValidationLayoutDto> GetValidations(Int64 clientId, [FromUri] IEnumerableRequestDto request)
{ .... } 
```

我错过了什么？一个控制器中不可能有多个 GET 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T02:59:31.417

对于路由“api/clients/4/profiles”和“api/clients/4/validations”，将操作命名为“profiles”和“validations”，然后在默认路由之前使用以下路由：

```
config.Routes.MapHttpRoute(
    name: "ClientProfilesApi",
    routeTemplate: "api/clients/{clientid}/profiles",
    defaults: new { controller = "clients", action = "profiles",  },
    constraints: new {clientid = @"\d+" }
    );

 config.Routes.MapHttpRoute(
    name: "ClientValidationsApi",
    routeTemplate: "api/clients/{clientid}/validations",
    defaults: new { controller = "clients", action = "validations",  },
    constraints: new {clientid = @"\d+" }       ); 
```

这意味着路由“api/clients/4/profiles”转到控制器“clients”和操作“profiles”，并且参数“clientid”必须是整数。

默认路由应始终在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T02:49:18.160

你需要：

```
config.Routes.MapHttpRoute(
name: "ClientApi",
routeTemplate: "api/{controller}/{clientid}/{action}",
defaults: new { action = RouteParameter.Optional },
constraints: new { controller = "clients" }
); 
```

您可能仍需要 ActionName 属性（但我不确定），并且您可能希望从操作中删除 RouteParameter.Optional 默认值，除非您还希望获得 Get 请求（例如）：

```
api/clients/4 
```

由控制器中的 Get 操作提供服务。

# iphone - openfire 是否实现了 xmpp XEP-0234 Jingle 文件传输？

> ID：14350580
> 
> 赞同：0
> 
> 时间：2013-01-16T02:41:10.620
> 
> 标签：iphone, ios, xmpp

我搜索了 openfire 的源代码，但没有找到任何适用于 XEP-0234 的文件。谁能给我一个答案，因为我是openfire的新手并且不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:13:49.587

XEP-0234 不需要特殊的服务器代码。服务器必须仅将 iq 节从客户端路由到客户端。这是在 XMPP 核心协议中定义的，并且由每个 XMPP 兼容服务器支持。

# javascript - jqplot x轴间距

> ID：14350591
> 
> 赞同：2
> 
> 时间：2013-01-16T02:42:54.363
> 
> 标签：javascript, html, graph, jqplot, spacing

我正在使用 jqplot 并且在 X 轴上的间距有问题。

这是我的代码：

```
$(document).ready(function(){

var plot3 = $.jqplot('CogsLineGraph', [[1,2,3,4,5,6], [2,3,4,5,6,7], [3,4,5,6,7,8]], 
{ 
    title:'Cogs (Last 6 Months)', 
    seriesDefaults: 
    {
        rendererOptions: {smooth: true}
    },
    series:[ 
        {
            lineWidth:1, 
            markerOptions: { size:7, style:'dimaond' }
        }, 
        {
            lineWidth:1, 
            markerOptions: { size: 7, style:"dimaond" }
        }, 
        {
            lineWidth:1,  
            markerOptions: { size:7, style:"filledSquare" }
        }
        ]
    }
); 
}); 
```

这是网页上显示的图表的图像：

![在此处输入图像描述](../Images/65f759c6ea9785143f394bdde74a82db.png)

在 X 轴上，值为：

0, 0.5, 1, 1.5, 2, 2.5 等

能否请我帮忙修改我的代码，使 X 轴上的值如下：

0、1、2、3 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:58:34.987

试试这个，

```
axes: {
xaxis: {

    ticks: ['1','2','3','4','5','6'];
       }
} 
```

# jquery - jquery以形式隐藏东西

> ID：14350592
> 
> 赞同：0
> 
> 时间：2013-01-16T02:42:54.317
> 
> 标签：jquery, asp.net, razor

我有一个搜索表单，其中有文本框和下拉菜单，其中一些不起作用。当我点击一个选项然后隐藏它时它会起作用。如果我选择另一个选项，它会显示备份。

这是示例。

我有一个文本框，如果您选择某些选项，我会隐藏另一个文本框，然后它会显示或隐藏。如果我选择了一些东西然后去我的导航菜单然后回来形成一个应该隐藏的盒子。这是我用来隐藏东西的代码。我不确定为什么它没有设置回默认值并在页面加载时隐藏它们。这是在剃刀视图页面上。

```
 @*hidefields - Spec Guide*@

//condition fields for the end user request form make sure you change the field ID to yours. 
$(document).ready(function () {
    //check to see if you are on the end users request page
    if (location.pathname === '/Reporting/Summary') {
        //if (document.location.href='/Tickets/New'){
        //toggle the field ,description and title invisible
        $('label for="CustomFieldValue@field.FieldID":contains(* On what page of the Spec Guide:)').toggle();
        $('input#CustomFieldValue3').parent().toggle();

        //monitor the dropdown field
        $('select#CustomFieldValue2').change(function(endUserselect) {
            //grab the value of the dropdown
            var userSelection = $('select#CustomFieldValue2 option:selected').text();

            //do the compare and toggle the field ,description and title visible 
            if (userSelection === 'Spec Guide') {
                $('label for="CustomFieldValue@field.FieldID":contains(* On what page of the Spec Guide:)').toggle();
                $('input#CustomFieldValue3').parent().toggle();
            }
            //hide them again if the user changes his mind
            else {
                $('label for="CustomFieldValue@field.FieldID":contains(* On what page of the Spec Guide:)').hide();
                $('input#CustomFieldValue3').parent().hide();
            }

        });

    }
});
@*hidefields - Spec Guide*@ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:53:03.533

这可能是缓存问题。

有时当您导航到另一个页面并单击后退按钮时，javascript 不会再次执行。相反，您会看到表格的最新版本。

我认为对此的替代方案（如果您希望它始终有效）可能是用于重置页面的卸载事件。

当用户离开页面时，unload 事件被发送到窗口元素。这可能意味着许多事情之一。用户可以单击链接离开页面，或者在地址栏中输入新的 URL。前进和后退按钮将触发事件。关闭浏览器窗口将导致事件被触发。即使是页面重新加载也会首先创建一个卸载事件。

```
$(window).unload(function () {
    // Here set the default options/hide/show dom elements for your form
}); 
```

试试看，让我知道它是否有效。

# perl - 在打开串行监视器之前，Arduino 不会监听通过虚拟串行端口发送的数据

> ID：14350594
> 
> 赞同：0
> 
> 时间：2013-01-16T02:43:06.920
> 
> 标签：perl, serial-port, arduino

我有一个[BotBoarduino](http://www.lynxmotion.com/c-153-botboarduino.aspx)（一个带有一些附加功能的 Duemilanove），我正在尝试使用 Perl 脚本与之通信。如果我从 Arduino IDE 打开串行监视器，我可以毫无问题地发送和接收数据。在此之后，我的 Perl 脚本可以毫无问题地进行通信。但是，如果 Arduino 断开连接然后重新连接到 PC，则 Arduino 似乎不会监听从我的 Perl 脚本发送的命令，直到再次打开串行监视器。

我还尝试使用 PuTTY 与 Arduino 进行通信，这与 Arduino IDE 中的串行监视器的工作方式相同 - Arduino 在连接打开一次之前不会监听我的 Perl 脚本。

这是我使用 Perl 与 Arduino 进行通信的示例：

```
#!perl -w

use Win32::SerialPort;

my $PortName = "COM4";
my $sendData = "c";

### SERIAL PORT SETUP ###
my $PortObj = new Win32::SerialPort($PortName) or die "Can't open $PortName: $^E\n";
$PortObj->baudrate(115200);
$PortObj->parity("none");
$PortObj->databits(8);
$PortObj->stopbits(1);
#$PortObj->dtr_active(1);
#$PortObj->rts_active(0);
#$PortObj->handshake("xoff");

$PortObj->lookclear();
$PortObj->write($sendData);

$PortObj->close(); 
```

我已经注释掉了`dtr_active`,`rts_active`和`handshake`位。我玩弄了这些设置，因为它们在某处被提及为可能的罪魁祸首。

另外，我使用了一个 120 欧姆的电阻来阻止 Arduino 自动重置，如此[处](http://playground.arduino.cc/Main/DisablingAutoResetOnSerialConnection)所述。

有没有人对让 Arduino 收听我的 Perl 程序而无需先打开 PuTTY/Serial Monitor 所需的设置有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:35:03.707

原来我没有保存串行端口设置，如[Arduino 论坛](http://arduino.cc/forum/index.php/topic,21051.0.html)上的一个线程中所述。`$PortObj->write_settings();`设置串口参数后添加解决了这个问题。我的最终 Perl 代码是：

```
#!perl -w

use Win32::SerialPort;
use strict;
use warnings;

$| = 1; #enable autoflush

my $PortName = "COM4";
my $sendData = "o";

### SERIAL PORT SETUP ###
my $PortObj = new Win32::SerialPort($PortName) or die "Can't open $PortName: $^E\n";
$PortObj->baudrate(57600);
$PortObj->parity("none");
$PortObj->databits(8);
$PortObj->stopbits(1);
$PortObj->write_settings(); #very important!

$PortObj->write($sendData);

$PortObj->close() || warn "\nClose failed\n"; 
```

# php - 如何使用其他 Web 服务（wordpress、joomla）运行 Bitnami OSQA？

> ID：14350605
> 
> 赞同：0
> 
> 时间：2013-01-16T02:45:42.813
> 
> 标签：php, python, bitnami, osqa

我在我的 VPS 上安装了 OSQA Bitnami。我还将 3 个域指向此 VPS。现在我希望每个域指向不同的 Web 服务（我想在这里托管另一个 PHP 网站）。

如何与 OSQA Bitnami（它是 python 堆栈）一起运行 php 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:15:36.277

您可以为每个堆栈安装 BitNami 模块，只需转到堆栈下载页面，选择适合您平台的模块，在命令行中执行并指向现有安装。然后您需要配置 httpd.conf 以将每个域指向每个应用程序。

# rest - Bitbucket API 公共问题创建

> ID：14350606
> 
> 赞同：2
> 
> 时间：2013-01-16T02:45:55.750
> 
> 标签：rest, bitbucket, bitbucket-api

我是否可以让我网站的用户将错误发送到我的 Bitbucket 存储库的问题跟踪器而不将它们重定向到 Bitbucket 页面？

我知道这可以通过身份验证来实现，但是他们可以在没有来自 Bitbucket 站点而不是 API 的身份验证的情况下添加问题似乎很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T16:43:55.573

我创建了一个 PHP 库来执行此操作，您没有说明您的网站是基于什么语言构建的，但是这个插件将完成创建简单错误提交表单、使用 Basic Auth 向 BitBucket API 发送 POST 的基本工作，并将向用户发送一封不错的确认电子邮件，其中包含错误号（以及错误的可选 URL）。用户不必进行任何登录......您在服务器上的代码可以做到这一点。

它在这里：[http ://syntaxseed.com/project/bitbucketphpbuglib/](http://syntaxseed.com/project/bitbucketphpbuglib/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T01:36:52.287

我最终对普通用户使用了基本身份验证。

用户不必是团队的一员，因此可以是任何用户。

**编辑：它在我的帖子中解决了，请参阅** [通过 bitbucket api 使用 oauth 向 bitbucket 发送问题](https://stackoverflow.com/questions/26335267/sending-issue-to-bitbucket-using-oauth-via-bitbucket-api)

```
$account_name = 'companyy';    
$repo_slug = 'issuer';

$oauth_params = array(
    'oauth_consumer_key'      => 'key',
    'oauth_consumer_secret'   => 'secret'
);

$issue = new issues();
//this was the missing peace of the puzzle . one single line
$issue->getClient()->addListener( new OAuthListener($oauth_params) );

$issue->create($account_name, $repo_slug, array(
    'title'     => 'title 123',
    'content'   => 'coententt123 ',
    'kind'      => 'proposal',
    'priority'  => 'blocker'
    )); 
```

# c++ - c ++如何使用来自另一个ctor的ctor？

> ID：14350607
> 
> 赞同：0
> 
> 时间：2013-01-16T02:46:00.740
> 
> 标签：c++

> **可能重复：**
> [在构造具有 const 成员的对象时调用另一个构造函数](https://stackoverflow.com/questions/12030769/calling-another-constructor-when-constructing-an-object-with-const-members)

我希望后者使用前者。我怎么能在 C++ 中做到这一点？如果不可能，为什么我不能做`*this = regMatrix`任务？

```
RegMatrix::RegMatrix(int numRow,int numCol)
{
    int i;
    for(i=0;i<numRow;i++)
    {
        _matrix.push_back(vector<double>(numCol,0));
    }
}

RegMatrix::RegMatrix(const SparseMatrix &sparseMatrix)
{
    RegMatrix regMatrix(sparseMatrix.getNumRow(),sparseMatrix.getNumCol());
    vector<Node> matrix = sparseMatrix.getMatrix();
    cout << "size: " << matrix.size() << endl;
    for(std::vector<Node>::const_iterator it = matrix.begin(); it != matrix.end(); ++it )
    {
        cout << "Position: [" << (*it).i << ", " << (*it).j << "] Value:" << (*it).value << endl;
        regMatrix._matrix[(*it).i][(*it).j] = (*it).value;
    }

    *this = regMatrix;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:01:22.793

您可以使用“委托构造函数”在新的 C++0x 中执行此操作。`

```
RegMatrix(const SparseMatrix &sparseMatrix) : RegMatrix(sparseMatrix.getNumRow(),sparseMatrix.getNumCol())
{
    vector<Node> matrix = sparseMatrix.getMatrix();
    cout << "size: " << matrix.size() << endl;
    for(std::vector<Node>::const_iterator it = matrix.begin(); it != matrix.end(); ++it )
    {
        cout << "Position: [" << (*it).i << ", " << (*it).j << "] Value:" << (*it).value << endl;
        this->_matrix[(*it).i][(*it).j] = (*it).value;
    }
} 
```

`

# ssh - 如何允许一台服务器上的用户“postgres”同步到另一台服务器？

> ID：14350610
> 
> 赞同：2
> 
> 时间：2013-01-16T02:46:07.377
> 
> 标签：ssh, rsync

我试图让这个命令作为用户 postgres 工作（所以我可以发送 wal 文件）：

```
rsync -a /tmp/test postgres@server2:/tmp/test 
```

但我得到了错误：

```
Permission denied (publickey). 
```

我已经在 server1`ssh-keygen` `eval `ssh-agent``上`ssh-add`以 postgres 用户身份运行。keygen 创建了`/var/lib/postgresql/.ssh/id_rsa`，`id_rsa.pub`我可以看到它是使用`ssh -vvv postgres@server2`.

在 server2 上，我创建了`/var/lib/postgresql/.ssh/authorized_keys`将 id_rsa.pub 表单 server1 的内容放入其中。它归 postgres 用户和组以及 chmod 600 所有。该`.ssh`目录也归 postgres 和 chmod 700 所有。

我可以从 server2 上的详细 sshd 日志中看到`Failed publickey for postgres...`

我错过了什么？我猜 sshd 没有在 server2 上查看我的 authorized_keys 文件

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-07-28T05:17:33.503

假设您的从服务器允许密钥身份验证，您只需`/etc/ssh/sshd_config`在设置“AllowedUsers”时进行更新，在这种情况下，您需要确保`postgres`在该列表中。

除此之外，只需`ssh-keygen`（将私钥密码留空），然后将`~/.ssh/authorized_keys`目录/文件添加到从服务器。的主目录`postgres`是`/var/lib/postgresql`，但是如果您`su`以用户身份执行这些操作`postgres`，则可以使用`~`，更不用说您不需要`chown`任何东西，因为`postgres`将拥有主服务器上生成的 ssh 密钥，并且`postgres`将拥有从服务器上创建的目录/文件。

请务必在主服务器和从服务器上安全地设置文件权限：

# 在主人

```
chmod 700 ~/.ssh

chmod 600 ~/.ssh/id_rsa

chmod 600 ~/.ssh/id_rsa.pub

chmod 600 ~/.ssh/known_hosts  # this one won't exist until you SSH once 
```

# 在奴隶

```
chmod 700 ~/.ssh

chmod 600 ~/.ssh/authorized_keys 
```

# extjs - Ext Js 4 MVC 将侦听器添加到网格面板中的图像

> ID：14350612
> 
> 赞同：2
> 
> 时间：2013-01-16T02:46:19.510
> 
> 标签：extjs, extjs4.1

我想在网格面板中显示图像并在用户单击图像时触发单击事件。显示图像没有问题。我遇到的问题是我不确定如何将侦听器添加到图像中。任何帮助将不胜感激？真的不知道下一步该怎么做。谢谢。

```
Ext.define('MyApp.view.people.List' ,{
extend: 'Ext.grid.Panel',
alias: 'widget.myList',
requires: [
    'MyApp.util.Globals',
    'MyApp.util.ImageTmpl'
],

id: 'myGrid',

title: 'All People',

initComponent: function() {

    var imagesUrl =/'+MyApp.util.Globals.projectName+'/'+MyApp.util.Globals.imageFolder;

    this.store = {
        fields: ['name', 'email'],
        data  : [
            {name: 'Ed',    email: 'ed@sencha.com', myVal: 1},
            {name: 'Tommy', email: 'tommy@sencha.com',myVal: 2}
        ]
    };

    this.columns = [
        {header: 'Name',  dataIndex: 'name',  flex: 1},
        {header: 'Email', dataIndex: 'email', flex: 1},
        {header: '', dataIndex: 'myVal',
            renderer: function() {
                return Ext.String.format('<img src="'+imagesUrl+'/edit.png" />');
            }
        },
        {header: '', dataIndex: 'myVal',
            renderer: function() {
                return '<img src="'+imagesUrl+'/book.png" alt="Lesson Study"/>';
            }
        },
        {header: '', dataIndex: 'myVal',
            renderer: function(){

                var imageTmpl = Ext.create('MyApp.util.ImageTmpl');

                console.log(imageTmpl);

                return imageTmpl;
            }
        }
    ];

    this.callParent(arguments);
} 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:32:41.817

将您的列定义更改为单击单元格的这种格式，我认为这将适用于您的情况：

```
{
    header: '', dataIndex: 'myVal',
    renderer: function() {
        return Ext.String.format('<img src="'+imagesUrl+'/edit.png" />');
    },
    listeners: {
        click: function(){
            //action of the image here
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:37:48.207

我还没有测试过这段代码，按照这些线路的总线应该可以工作：

```
Ext.define('app.controller.myController', {
    extend: 'Ext.app.Controller',

    init: function() {
        this.control({
            'people.List': {
               afterrender: function( aCmp ){
                    var me = this; 
                    var iImages = aCmp.getEl().select('img'); 

                    iImages.on('click', function( aEvent, aElement ){
                        me.onImageClick( aElement );
                    });

                }
            }   
        });
    },

    onImageClick: function( aElement ) {
        console.log('Image Clicked');
    }   
}); 
```

# c++ - 尝试编译 Fubi 时链接错误

> ID：14350620
> 
> 赞同：0
> 
> 时间：2013-01-16T02:47:49.317
> 
> 标签：c++, linker, openni

这个问题不是 Fubi 特有的，而是一般的链接器问题。过去几天（读作 5 天）充满了链接错误，但我设法将其缩小到少数几个。

我正在尝试在 Linux 环境下编译 Fubi（全身交互框架）。它只在 Windows 7 上进行了测试，并且网络缺乏在 *nix 平台上编译的资源。

现在，就像我上面提到的那样，我遇到了大量的链接问题，这些问题主要涉及不正确的 g++ 标志。Fubi 需要 OpenNI 和 NITE（以及 OpenCV，如果你愿意的话）来提供它的基本功能。我已经能够成功地编译来自 OpenNI 和 NITE 框架的两个样本。

据我了解，Fubi 是一个框架，因此我需要编译一个共享库而不是二进制文件。

当我尝试使用以下命令将其编译为二进制文件时

```
g++ *.cpp -lglut -lGL -lGLU -lOpenNI -lXnVNite_1_5_2 -I/usr/include/nite -I/usr/include/ni -I/usr/include/GL -I./GestureRecognizer/ -o FubiBin 
```

我得到位于[此处](http://pastebin.com/PvNKDiGc)的输出。（有点长，我不想破坏格式）

如果我改为编译成目标文件（-c 标志），则不会出现错误并且它会成功构建目标文件。请注意，我正在使用以下命令：

```
g++ -c *.cpp -lglut -lGL -lGLU -lOpenNI -lXnVNite_1_5_2 -I/usr/include/nite -I/usr/include/ni -I/usr/include/GL -I./GestureRecognizer/ 
```

然后我可以使用该`ar`命令生成一个静态链接库。没有错误[可能]发生（这只是我的猜测）因为它还没有通过链接器运行，所以这些错误不会出现。

感谢您耐心阅读所有内容。最后，提问时间：

1)尝试编译为二进制文件时，第一个错误是关于*未定义对 main normal 的引用吗？*我搜索了该文件夹中的所有文件，但没有一个**主要**功能存在。

2）其余未定义的参考错误抱怨他们找不到提到的功能。所有这些函数都位于子目录**GestureRecognizer/**中的 .cpp 和 .h 文件中，这是我正在编译的路径的子目录。那么参数不会解决`-I./GestureRecognizer/`这个问题吗？

我想确保当我创建共享库时，在运行时不会出现任何链接问题。如果最初链接正确，所有这些错误在尝试编译为二进制文件时会消失吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T06:19:02.010

您告诉编译器在第一次调用中创建一个可执行文件，而一个可执行文件需要一个`main()`它找不到的函数。所以不，错误是不正常的。为了创建一个共享库，使用 GCC 的“-shared”选项。在这里尝试一些测试代码，在我的系统上编译时它也需要“-fPIC”，但这可能会有所不同。最好的想法是剖析在您的系统上正确构建的其他一些库的编译器和链接器命令行。

为了从子目录中添加缺少的符号，您也必须编译它们：`g++ *.cpp ./GestureRecognizer/*.cpp ...`. “-I...”仅告诉编译器在找到`#include ...`. 如果这甚至不是必需的，我不会感到惊讶，许多项目都使用`#include "GestureRecognizer/Foo.h"`直接实现这一目标。

顺便提一句：

*   考虑在运行编译器时激活警告（“-W...”）。
*   您可以在编译（“-c”）和链接之间进行拆分。在这两种情况下，请使用“g++”。在测试不同的链接器设置时，这应该会减少您的周转时间。

# ruby-on-rails - 如何将图像的缩小器/优化器集成到资产管道中？

> ID：14350622
> 
> 赞同：0
> 
> 时间：2013-01-16T02:48:21.577
> 
> 标签：ruby-on-rails, ruby-on-rails-3, image, asset-pipeline

假设有一个 shell 脚本可以缩小任何给定的图像文件（png、gif、jpeg 等）。我想将其作为生产部署过程的一部分运行，并集成到 Asset Pipeline 中。1）可行吗？2）我该怎么做？就像“ [Rails 图像资产管道有什么好处](https://stackoverflow.com/questions/12462712/whats-the-benefit-of-rails-asset-pipeline-for-images)”问题一样，我只看到图像资产管道为每个图像添加一个哈希值，这是有道理的，但没有给我任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:03:19.387

您的部署脚本可以调用 rake 任务，该任务将运行 shell 脚本以在部署发生之前压缩图像。

# java - Java - 压缩现有文件

> ID：14350629
> 
> 赞同：4
> 
> 时间：2013-01-16T02:49:21.450
> 
> 标签：java, zip, append, truezip

> **可能重复：**
> [使用 Java 将文件附加到 zip 文件](https://stackoverflow.com/questions/2223434/appending-files-to-a-zip-file-with-java)

您好 Java 开发人员，

这是场景：

假设我有一个名为`sample.txt`. 我真正想做的是将`sample.txt`文件放入`*.zip`名为`TextFiles.zip`.

这是我到目前为止所学到的。

```
try{
    File f = new File(compProperty.getZIP_OUTPUT_PATH());
    zipOut = new ZipOutputStream(new FileOutputStream(f));
    ZipEntry zipEntry = new ZipEntry("sample.txt");
    zipOut.putNextEntry(zipEntry);
    zipOut.closeEntry();
    zipOut.close();
    System.out.println("Done");

} catch ( Exception e ){
    // My catch block
} 
```

到目前为止，我的代码创建了一个`*.zip`文件并插入了该`sample.txt`文件。
我的问题是如何将现有文件插入到创建的`*.zip`文件中？
如果您的回答与[TrueZIP](http://truezip.java.net/6/index.html)有任何关系，请发布 SSCCE。

我做了以下事情：

*   谷歌搜索
*   搜索现有问题。（发现很少。没有答案。有些人没有回答我的特定问题。
*   阅读[TrueZip](http://truezip.java.net/6/index.html)。然而，我无法理解一件事。（请理解）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T03:17:29.160

使用内置的 Java API。这会将文件添加到 Zip 文件中，这将替换可能存在的任何现有 Zip 文件，从而创建一个新的 Zip 文件。

```
public class TestZip02 {

  public static void main(String[] args) {
    try {
      zip(new File("TextFiles.zip"), new File("sample.txt"));
    } catch (IOException ex) {
      ex.printStackTrace();
    }
  }

  public static void zip(File zip, File file) throws IOException {
    ZipOutputStream zos = null;
    try {
      String name = file.getName();
      zos = new ZipOutputStream(new FileOutputStream(zip));

      ZipEntry entry = new ZipEntry(name);
      zos.putNextEntry(entry);

      FileInputStream fis = null;
      try {
        fis = new FileInputStream(file);
        byte[] byteBuffer = new byte[1024];
        int bytesRead = -1;
        while ((bytesRead = fis.read(byteBuffer)) != -1) {
          zos.write(byteBuffer, 0, bytesRead);
        }
        zos.flush();
      } finally {
        try {
          fis.close();
        } catch (Exception e) {
        }
      }
      zos.closeEntry();

      zos.flush();
    } finally {
      try {
        zos.close();
      } catch (Exception e) {
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T03:10:52.423

在这里你可以得到你的问题的答案： http: [//truezip.schlichtherle.de/2011/07/26/appending-to-zip-files/](http://truezip.schlichtherle.de/2011/07/26/appending-to-zip-files/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T03:04:13.173

看来，根据[史诗 JDK 参考](http://docs.oracle.com/javase/7/docs/api/)，您可以使用`while zis.getNextEntry() != null`循环遍历文件（其中 zis 是 ZipInputStream），然后用于`zis.read()`读取数组，该数组被发送到 ArrayList 或类似的。

然后，可以使用`toArray()`，使用此方法将其“转换[”到一个`byte`数组中，](http://randomtype.ca/blog/how-to-cast-object-arrays-in-java/)并将`zos.write()`其放入输出 ZIP 文件（其中 zos 是 a `ZipOutputStream`），`zos.putNextEntry()`用于创建新条目。（您将需要保存 ZipEntry 并使用`ze.getName()`,`ze`作为 a来获取其名称`ZipEntry`。）您应该替换`T`为`Byte`and `byte`（`byte`在除循环体之外的任何地方使用`for`），并且可能需要修改转换代码以用于`Byte.byteValue()`从`Byte`（包装器类）转换为`byte`（原始类型），如下所示：

```
for(int i = 0; i < objects.length; i++) {
    convertedObjects[i] = (Byte)objects[i].byteValue();
} 
```

请注意，这是未经测试的，并且基于 JDK（条目`ZipInputStream`、`ZipOutputStream`、`ArrayList`和`Byte`）和关于数组转换的 Google 搜索。

抱歉，如果这有点密集，希望这会有所帮助！

# android - Android ListView sqlite 更新刷新

> ID：14350631
> 
> 赞同：0
> 
> 时间：2013-01-16T02:49:36.737
> 
> 标签：android, android-intent, android-listview, refresh

我当前的应用程序有一个 Listview，它从 sqlite DB 中提取和显示数据。DB 第一列中的数据显示在列表视图中，单击时，活动开始显示与第一列关联的列的其余部分。编辑数据时，数据库会更新，但列表视图不会显示更新，除非重新启动应用程序。我试图在我的 onResume 方法中实现 startActivityForResult() 但没有成功。数据库更新后，我正在尝试刷新我的列表视图。我怎样才能做到这一点。

列表视图活动：

```
@Override 
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_listview);

    loginList = (ListView)
   findViewById(R.id.loginlist);
    loginList.setOnItemClickListener(this);

    webLogin = (Button)
   findViewById(R.id.button3);
    webLogin.setOnClickListener(this);

    loginArrayList = new ArrayList<LoginDetails>();

    loginListAdapter = new ArrayAdapter<String>(this,   android.R.layout.simple_list_item_1, populateList());
    loginList.setAdapter(loginListAdapter);
}

@Override
public void onClick (View v) {
    Intent webLoginIntent = new Intent (this, LoginPlusActivity.class);
    startActivity(webLoginIntent);
}

public List<String> populateList (){

    List<String> webNameList = new ArrayList<String>();

    dataStore openHelperClass = new dataStore (this);

    SQLiteDatabase sqliteDatabase = openHelperClass.getReadableDatabase();

    Cursor cursor = sqliteDatabase.query(dataStore.TABLE_NAME_INFOTABLE, null, null, null, null, null, dataStore.COLUMN_NAME_SITE, null);

    startManagingCursor(cursor);

    while (cursor.moveToNext()){

    String sName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_SITE));
    String wUrl = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_ADDRESS));
    String uName = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_USERNAME));
    String pWord = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_PASSWORD));
    String lNotes = cursor.getString(cursor.getColumnIndex(dataStore.COLUMN_NAME_NOTES));

    LoginDetails lpDetails = new LoginDetails();

        lpDetails.setsName(sName);
        lpDetails.setwUrl(wUrl);
        lpDetails.setuName(uName);
        lpDetails.setpWord(pWord);
        lpDetails.setlNotes(lNotes);

        loginArrayList.add(lpDetails);
        webNameList.add(sName);
}

sqliteDatabase.close();
return webNameList;
}

@Override
protected void onResume() {
    super.onResume();

    Intent i = new Intent(LoginList.this, UpdateDeleteLoginList.class);
    LoginList.this.startActivityForResult(i, 1);    
    loginList.setAdapter(loginListAdapter);

loginListAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, populateList());
loginList.setAdapter(loginListAdapter);

} 
```

更新活动：

```
 @Override
public void onClick(View v){

    loginSitetext = sName.getText().toString();
    loginAddresstext = wUrl.getText().toString();
    loginUsertext = uName.getText().toString();
    loginpassWordtext = pWord.getText().toString();
    loginNotestext = lNotes.getText().toString();

    LoginDetails loginDetails = new LoginDetails();

    loginDetails.setsName(bundledWebSite);
    loginDetails.setwUrl(bundledWebAddress);
    loginDetails.setuName(bundledUserName);
    loginDetails.setpWord(bundledPassWord);
    loginDetails.setlNotes(bundledNotes);

    if(v.getId()==R.id.rucBttn){
        finish();

    }else if(v.getId()==R.id.ruuBttn){
        updateLoginDetails(loginDetails);

        Intent returnIntent = new Intent();
        setResult(RESULT_CANCELED, returnIntent);
        finish();

    }else if(v.getId()==R.id.rudBttn){
        deleteLoginDetails(loginDetails);
    }

}

private void updateLoginDetails(LoginDetails loginDetails){

    dataStore androidOpenDbHelper = new dataStore(this);

    SQLiteDatabase sqliteDatabase = androidOpenDbHelper.getWritableDatabase();

    ContentValues contentValues = new ContentValues();

    contentValues.put(dataStore.COLUMN_NAME_SITE, loginSitetext);
    contentValues.put(dataStore.COLUMN_NAME_ADDRESS, loginAddresstext);
    contentValues.put(dataStore.COLUMN_NAME_USERNAME, loginUsertext);
    contentValues.put(dataStore.COLUMN_NAME_PASSWORD, loginpassWordtext);
    contentValues.put(dataStore.COLUMN_NAME_NOTES, loginNotestext);

    String[] whereClauseArgument = new String[1];
    whereClauseArgument[0] = loginDetails.getsName();

    System.out.println("whereClauseArgument[0] is :" + whereClauseArgument[0]);

    sqliteDatabase.update(dataStore.TABLE_NAME_INFOTABLE, contentValues, dataStore.COLUMN_NAME_SITE+"=?", whereClauseArgument);

    sqliteDatabase.close();
    finish(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:51:07.073

您可以通过在适配器上调用 notifyDataSetUpdated 来刷新列表视图。这会强制刷新整个列表视图，并且会在所有刷新它的视图上调用 getView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T03:41:35.487

您要问的问题有一个标准解决方案，即（不幸的是）比几行代码更复杂。它是由*Content Provider*、*Data Loader*和*Cursor Adapter*组合而成的。

我在[GitHub 上](https://github.com/seanpjanson/SQListView)放了一个小演示，它有一个包含所有组件的骨架，并且可以进行修改以完成您的需要。它还可以处理平板电脑（以及较新的手机）上的单窗格/两窗格布局。

[内容提供程序](https://github.com/seanpjanson/SQListView/blob/master/app/src/main/java/com/andyscan/sqlistview/ContPrvdr.java)是用作数据库表接口的模块，它会将更改通知您的 ListView，从而负责立即刷新列表。只需 grep ' *getContentResolver().notifyChange()* ' 调用，这些负责刷新您的列表。只要您使用 Content Provider 对您的数据进行所有访问（CRUD - 查询、插入、删除、更新...），您的所有操作都会立即反映在 ListView 中。

[Wolfram Rittmeyer](http://www.grokkingandroid.com/tutorials/)、[Lars Vogel](http://www.vogella.com/tutorials/AndroidSQLite/article.html)、[Alex Lockwood](http://www.androiddesignpatterns.com/2012/07/loaders-and-loadermanager-background.html)提供了很多关于此的信息……如果您想了解这个问题。

祝你好运

# mysql - 创建用户相关的用户特定内容

> ID：14350638
> 
> 赞同：0
> 
> 时间：2013-01-16T02:50:36.573
> 
> 标签：mysql, database-design

您是否应该为每个用户创建一个表格以包含有关帐户特定内容的信息，例如最喜欢的文章、兴趣等。用户定义的列表将用于生成有用的内容，使用标签系统定义内容组。我会接近这个接近正确的，还是有更好的方法。我知道你不应该在一个列中定义一个以上的东西，但我也想要最少的数字表？有没有办法让所有用户都使用一个表格来以这种方式存储信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:52:56.730

理想情况下，您数据库中的表数不应取决于用户数。有一个用户表和另一个用户表的外键首选项表。

# html - 无法在 ERB 文件上添加 CSS，Sinatra

> ID：14350644
> 
> 赞同：4
> 
> 时间：2013-01-16T02:51:16.623
> 
> 标签：html, css, sinatra, erb

我正在尝试将 Twitter Bootstrap CSS 添加到 ERB 文件并使用 Sinatra 运行，但 CSS 不显示。

我的代码：

```
<link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css"> 
```

我的文件夹结构在代码中是相同的。

我已经尝试过`href="lib/...`并且`href="../lib/...`不工作

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T09:10:52.613

您应该复制`bootstrap.min.css`到您的 Sinatra`public`目录中。然后使用：

```
<link rel="stylesheet" href="/bootstrap.min.css"> 
```

将其包含在您的页面中。

# python - Python PIL 有抗锯齿方法吗？

> ID：14350645
> 
> 赞同：25
> 
> 时间：2013-01-16T02:51:22.147
> 
> 标签：python, python-imaging-library, antialiasing

对于 PIL 中的线和椭圆，图像很粗糙。

我只在调整大小和缩略图中发现抗锯齿。

画线或椭圆时有什么方法可以做抗锯齿吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-16T05:26:09.440

在本地进行此操作的唯一方法是使用超级采样。以所需大小的倍数渲染图像，然后[`resize`](https://pillow.readthedocs.io/en/stable/reference/Image.html#PIL.Image.Image.resize)使用`resample=Image.ANTIALIAS`，例如：

```
im = im.resize((width // 2, height // 2), resample=Image.ANTIALIAS) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-30T15:45:31.710

aggdraw ( [http://effbot.org/zone/aggdraw-index.htm](http://effbot.org/zone/aggdraw-index.htm) ) 可能是你感兴趣的东西。

aggdraw 模块在 AGG 库之上实现了基本的 WCK 2D 绘图接口。该库提供高质量的绘图，具有抗锯齿和 alpha 合成，同时与 WCK 渲染器完全兼容。

aggdraw 模块可以与 PIL 或 WCK 库（在 Tkinter 或本机 Windows 下）一起使用。它也可以用作独立库。

# c++ - 匿名变量，通过引用传递，初始化列表

> ID：14350647
> 
> 赞同：1
> 
> 时间：2013-01-16T02:51:32.223
> 
> 标签：c++, initialization, pass-by-reference, anonymous-types

所以我只是陷入了一些 C++ 的麻烦事。具体来说，通过引用传递匿名变量，以便在 C++ 中的类的初始化列表中使用。考虑以下代码；

```
class A {
public:
  int x;

  A(int x=0) : x(x) {
    std::cout <<"A: creatred\n";
  }

  ~A() {
    std::cout << "A: destroyed\n";
  }
};

class B {
public:
  A a;

  B(const A& in) : a(in) {
    std::cout <<"B: creatred\n";
  }

  ~B() {
    std::cout << "B: destroyed\n";
  }
};

int main() {
  B b(A(0));
  std::cout << "END\n";
  return 0;
} 
```

输出：

```
A: creatred
B: creatred
A: destroyed
END
B: destroyed
A: destroyed 
```

我数了 2 次创造和 3 次破坏。这是怎么回事？我看到它的方式，我`A(0)`在创建时使用匿名变量作为输入`b`。不知道现在事情的顺序是什么。对匿名变量的引用被创建并用于复制（复制构造函数将在初始化列表中调用，是吗？）成员变量`a`。匿名变量何时销毁？一般来说，为什么我会看到 2 个构造函数和 3 个析构函数。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T02:53:06.840

您没有覆盖`A`的复制构造函数来打印消息...

具体来说，`a(in)`调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T02:53:11.740

缺少的构造函数将是 A 的复制构造函数。

您在下面的行中复制构造 A。

```
B(const A& in) : a(in) 
```

* * *

```
A: destroyed
END 
```

这是临时被销毁的，在行尾被销毁

```
B b(A(0)); 
```

# pdo - pdo 没有返回输出。致命错误：在第 12 行的 C:\webroot\wamp\www\index.php 中的非对象上调用成员函数 fetch()

> ID：14350649
> 
> 赞同：-2
> 
> 时间：2013-01-16T02:51:40.350
> 
> 标签：pdo

```
<?php
$config['db'] = array (
'host'                      =>  'localhost',
'username'                  =>  'root',
'password'                  =>  '',
'dbname'                    =>  'pdologin'
);

$db = new PDO("mysql:host={$config['db']['host']};dbname={$config['db']['dbname']}",
      $config['db']['username'], $config['db']['password']);
$query = $db->query("SELECT * 'firstname' FROM 'login'");
while ($row = $query->fetch(PDO::FETCH_ASSOC)){
echo $row['firstname'], '<br>';
 }
?> 
```

当我运行代码时，我收到错误“致命错误：在第 12 行的 C:\webroot\wamp\www\index.php 中的非对象上调用成员函数 fetch()”。

是什么让它出错？我唯一能想到的就是 SQL 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:24:55.350

此 SQL 查询中有两个语法错误：

```
$query = $db->query("SELECT * 'firstname' FROM 'login'"); 
```

您不能将字符串文字用作 FROM 子句中的表。

说明：不同类型的引号在 SQL 中做不同的事情。

*   单引号始终是字符串文字或日期文字的分隔符。
*   在 MySQL 中，反引号是表标识符（以及列和其他元数据对象）的分隔符。
*   双引号是标准 SQL 中表标识符的分隔符，如果您设置[SQL_MODE=ANSI_QUOTES](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html) ，则在 MySQL 中。但默认情况下，在 MySQL 中，双引号与单引号相同，用于分隔字符串和日期。

您`'firstname'`的查询中还有一个无效的地方。我不知道您是否打算为列命名（如果是这样，您又把引用类型弄错了），或者您是否打算将它作为列别名（如果是这样，您不能 alias `*`，您只能别名单个特定列）。

所以你的查询应该是这样的：

```
$query = $db->query("SELECT * FROM `login`"); 
```

`$query`脚本中的另一个错误是，在调用 PDOStatement 方法之前，您没有验证它是 PDOStatement 类型的对象。`false`如果 SQL 中有错误， PDO::query() 将返回。`false`是原始值，而不是对象，所以它自然不会有任何可以调用的方法。因此，在对它进行任何其他操作之前，您*总是*必须检查返回值。

例如：

```
$query = $db->query("SELECT * FROM `login`");
if ($query === false) {
  die(print_r($db->errorInfo(), true));
} 
```

# json - JSON 字符串化操作

> ID：14350650
> 
> 赞同：0
> 
> 时间：2013-01-16T02:51:51.357
> 
> 标签：json, stringify

拿下代码：

```
JSON.stringify({ "x": 1.0 }); 
```

输出将是

```
{"x":1} 
```

我已经使用 toFixed()、parseFloat()、+() 和许多其他方法尝试了所有方法，但我一生都无法让它返回：

```
{"x":1.0} 
```

我可以让它返回：

```
{"x":"1.0"} 
```

但我无法得到

```
{"x":1.0} 
```

这可能吗？我倾向于不。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:55:14.090

如果您需要浮动以特定方式显示，则需要将其保留为字符串。

然而，更好的解决方案是将其保留为数字并让客户端/视图对其进行格式化。

# javascript - Backbone：在 _.template 中使用视图

> ID：14350651
> 
> 赞同：1
> 
> 时间：2013-01-16T02:51:54.733
> 
> 标签：javascript, templates, backbone.js, view, underscore.js

我试图创建一个动态小部件系统来在我的页面内创建面板。让我们举一个例子：

```
 Widgets.create({
                    name : 'menu-site',
                    title: 'Menu', 
                    content: 'This is my menu!'
                }); 
```

它将呈现：

```
<section class="widget menu-site">
    <h1>Menu</h1>
    <article>This is my menu!</article>
</section> 
```

没问题吧？我已经做过一千次了。但是，当我尝试在内部使用视图时，问题就开始了：

```
 var view = new MyCustomView;                  
                Widgets.create({
                    name : 'custom-panel',
                    title: 'Custom Panel', 
                    content: view.render().el
                }); 
```

我可以通过在 WidgetView 中调用 outerHTML 来呈现内容，但是，当我这样做时，在 MyCustomView 中声明的事件不起作用！

有人遇到过这个问题吗？

对于那些需要更多细节的人，这是我的 WidgetView 代码：

```
 var Widget = Backbone.Model.extend({
            defaults : function() {
                return {
                    title : '',
                    content : '',
                    closeable : true
                }
            }
        });
        var WidgetList = Backbone.Collection.extend({
            url : '/widgets',
            model : Widget
        });
        Widgets = new WidgetList;

        var WidgetView = Backbone.View.extend({
            tagName : 'section',
            className : function() {
                return ['widget',' ', this.model.get('name')].join('');
            },
    template: _.template($('#widget-template').html()),

            events : {
                "click .close" : "removeWidget"
            },

            initialize : function() {
                this.listenTo(this.model, 'destroy', this.remove);
            },

            removeWidget  : function() {
                this.model.destroy();
            },

            render: function() {
              this.$el.append(this.template(this.model.toJSON()));   
              return this;
            },
        });

        var AppViewport = Backbone.View.extend({
            el : $("#widgets"),

            events : {
            },

            initialize : function() {
                this.listenTo(Widgets, 'add', this.addNewWidgetView);
            },

            addNewWidgetView : function(widget) {
              var view = new WidgetView({model: widget});
              this.$el.append(view.render().el);
            }
        });

        new AppViewport; 
```

或者，也许，我正在考虑另一种解决方法。但我浪费了太多时间试图理解这个问题，以至于我看不到光明！

**更新 --------------- 18/01 ---------**

我做了一些测试，并更改了我的代码：我没有使用下划线模板，而是创建了一个 WidgetViewLayout，并手动完成了所有模板工作：

```
 var WidgetView = Backbone.View.extend({
                tagName : 'section',
                className : function() {
                    return ['widget',' ', this.model.get('name')].join('');
                },

                events : {
                    "click .close" : "removeWidget"
                },

                initialize : function() {
                    this.listenTo(this.model, 'destroy', this.remove);
                },

                removeWidget  : function() {
                    this.model.destroy();
                    MenuRouterInstance.navigate('');
                },

                render: function() {
                    var layout_view = new WidgetViewLayout({model: this.model.toJSON()});
                    this.$el.append(layout_view.render().el);   
                    return this;
                }
            });

            var WidgetViewLayout = Backbone.View.extend({
                tagName : 'div',

                render : function() {
                    var title = this.model.title,
                        content = this.model.content,
                        closeable = this.model.closeable || false;

                    var anchor = this.setupAnchor(closeable),
                        h1 = this.setupH1(title, anchor),
                        article = this.setupArticle(content);

                    this.$el.append(h1);
                    this.$el.append(article);

                    return this;
                },

                setupH1 : function(title, target) {
                    var element = $('<h1 />');
                    element.text(title);
                    element.append(target);   

                    return element;
                },

                setupAnchor : function(closeable) {
                    var element = '';
                    if(closeable == true) {
                        element = $('<a />'); 
                        element.addClass('close');
                        element.text('(fechar)');
                    }

                    return element;
                },

                setupArticle : function(content) {
                    var element = $('<article />');
                    element.append(content);

                    return element;
                }
            }) 
```

它现在似乎可以工作了，但是我在 Widget 中创建的视图仍然存在一些问题，如下所示：

```
 var view = new MyView;                  
                    Widgets.create({
                        name : 'menu',
                        title: 'My menu', 
                        content: view.render().el
                    }); 
```

当 MyView 在自身内部创建多个 SubView，并且我调用 model.destroy 来删除其中一个 Subview 的模型时，侦听的方法“this.remove”最终会删除所有 SubView，而不是仅删除一个。最后，我被迫这样做：

```
 removeit : function(removed_item) {
                    if(removed_item.get('name') == this.model.get('name')) {
                        this.remove();                            
                    }
                }, 
```

我不知道它是否是一个糟糕的模式，但它已经奏效了！如果有人有更好的主意，我将不胜感激！

][`,s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:15:49.777

我认为您的问题是您试图将 DOM 元素对象 ( `el`) 视为字符串。当你这样做时：

```
content: view.render().el 
```

您将拥有一个实时 DOM 节点，`content`并且视图的事件将绑定到该 DOM 节点。您可以使用其中一种 HTML 方法（显然`outerHTML`在您的情况下）通过模板获取节点的 HTML，但[`delegate`](http://api.jquery.com/delegate/)处理事件的方法绑定到 DOM 节点，而不是最终使用的 HTML 字符串。

您可以在必要时修改您`render`的一点以按原样使用原始 DOM 节点，就像这样。

```
render: function() {
    var json = this.model.toJSON();
    if(_(json.content).isString()) {
        this.$el.append(this.template(json));
    }
    else {
        var content = json.content;
        delete json.content;
        this.$el.append(this.template(json));
        this.$('article').append(content);
    }
} 
```

基本上，如果你`content`不是一个字符串，那么手动放入你的`$el`而不是通过模板。

# background-process - 执行unix终端后台进程。

> ID：14350653
> 
> 赞同：1
> 
> 时间：2013-01-16T02:52:11.143
> 
> 标签：background-process, shellexecute

我正在用c编写自己的shell，问题在于后台进程的实现。现在在 BASH 上，每当我们执行以“&”结尾的进程时，该进程进入后台并开始执行，后台进程的输出出现在终端上，当**后台进程需要输入时，它会暂停**，直到我们给出“fg”命令。

那么如何实现后台进程呢？

对于命令的任何正常执行（不以 & 结尾），我调用 fork 系统调用，然后在子进程中执行命令，父进程将等待子进程的执行（通过 wait()）。

对于具有“&”的命令，我做了同样的事情，但父进程不会等待子进程的执行。我的问题是**每当后台进程需要输入时，它就会控制终端**。那么如何在需要输入时暂停子进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:12:41.890

要将进程与父进程分离，您需要在子进程上使用 setsid() ，它将在新会话中运行程序

```
 sid = setsid(); 
```

另见[http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html](http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html)

# facebook - 返回 Facebook API 朋友位置对象，其中 id 为空字符串，名称为 null

> ID：14350661
> 
> 赞同：2
> 
> 时间：2013-01-16T02:52:59.123
> 
> 标签：facebook, facebook-graph-api, location, friend

昨天，当我使用查询“me/friends?fields=id,location”从 Graph API 检索我的 Facebook 好友时，500+ 返回了位置数据。

今天，500+ 与 location 对象一起返回，但只有 36 个在 location 对象中有任何数据，其余的返回为：

```
"location": {
    "id": "", 
    "name": null
} 
```

您可以在 Graph API Explorer 中自己重现它。您会看到一些朋友有合法的位置，但大多数有空值。有谁知道发生了什么？这恰好发生在 Graph Search 发布的同一天。有关系吗？我该如何解决？

**更新**：Facebook 已经更新了我发布到“修复就绪”的错误状态，所以这应该很快得到解决...... [https://developers.facebook.com/bugs/487611667944115](https://developers.facebook.com/bugs/487611667944115)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T07:30:22.163

正如 Zachary 提到的，这可能是一个 facebook 错误。然而，他们将该错误标记为“中等”优先级，并且可能需要很长时间才能修复。如果您需要重新启动并快速运行，请改用 FQL 呼叫。以下正确返回所有朋友的位置数据：

```
SELECT name, uid, current_location FROM user WHERE uid in (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

但是，如果您也在寻找家乡信息，那么运气不好。在这种情况下，似乎提到的错误也会影响 FQL ......

# google-apps-script - 如何使用 Google Apps 脚本将日期与电子表格进行比较？

> ID：14350671
> 
> 赞同：5
> 
> 时间：2013-01-16T02:53:44.840
> 
> 标签：google-apps-script

我有一个电子表格，我想根据日期有条件地格式化。如果日期是 7 天，我希望单元格变成红色，如果日期是 14 天，我希望它变成绿色，等等。

我想，这样做的第一步是创建一个简单的条件格式脚本，如果日期是今天，它将被突出显示。但是我的代码不起作用:(

```
function formatting() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet1'); // get the sheet
  var columnF = sheet.getRange(2, 6, sheet.getLastRow()-1, 1); // get all the rows
  var fValues = columnF.getValues(); // get the values
  var today = Utilities.formatDate(new Date(), "GMT", "MM/dd/yyyy"); // get today's date
  for (var i = 0; i < fValues.length; i++) { // repeat loop
    if (fValues[i][0] == today) { // if the date in the cell is today's date...
      sheet.getRange(i + 2, 6, 1, 1).setBackgroundColor('green'); // ...turn that cell green
    }
  }
} 
```

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T07:08:39.883

您不应该将日期转换为字符串，您可以像在 Srik 的回答中那样以天、月和年来解析日期，或者您也可以使用它们的原生值比较日期，如下所示，计算其他日期变得更容易......我创建了一些变量来简化数学：

`day`= 一天中的毫秒数

`today`= 今天 00:00 的日期（以天为单位）

```
function formatting() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet1'); // get the sheet
  var columnF = sheet.getRange(2, 6, sheet.getLastRow()-1, 1).setBackgroundColor('white'); // get all the rows and clear colors
  var fValues = columnF.getValues(); // get the values
  var day = 24*3600*1000
  var today = parseInt((new Date().setHours(0,0,0,0))/day); // get date today
  for (var i = 0; i < fValues.length; i++) { // repeat loop
    var dataday = parseInt(fValues[i][0].getTime()/day)
    Logger.log(dataday+' = '+today)
    if (dataday == today-7) {sheet.getRange(i + 2, 6, 1, 1).setBackgroundColor('red')}
    else if (dataday == today-14){sheet.getRange(i + 2, 6, 1, 1).setBackgroundColor('green')}
    else if (dataday == today-21){sheet.getRange(i + 2, 6, 1, 1).setBackgroundColor('blue')}
  }
} 
```

[此处](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dGN5ckx0YnlBdnF1UlhEd1c4a193dnc)提供测试表

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T05:12:48.157

您不能直接比较 Date 对象。您需要按日期、月份和年份进行比较。尝试类似的东西

```
function formatting() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet1'); // get the sheet
  var columnF = sheet.getRange(2, 6, sheet.getLastRow()-1, 1); // get all the rows
  var fValues = columnF.getValues(); // get the values
  var today = new Date(); 
  for (var i = 0; i < fValues.length; i++) { // repeat loop
    var fDate = new Date(fValues[i][0]);
    if (fDate.getDate() == today.getDate() && 
        fDate.getMonth() == today.getMonth() && 
        fDate.getFullYear() == today.getFullYear()) { // if the date in the cell is today's date...
      sheet.getRange(i + 2, 6, 1, 1).setBackgroundColor('green'); // ...turn that cell green
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-20T21:26:36.103

我会在 Serge 的帖子中补充说，在第 8 行中，最好不要使用 getDate() 调用。这是因为如果您在工作表本身中复制/粘贴了值，则 fValues 数组中的条目不一定是日期。

# c# - System.Web.HttpUtility.UrlEncode c# 使用

> ID：14350674
> 
> 赞同：0
> 
> 时间：2013-01-16T02:54:20.170
> 
> 标签：c#, urlencode

在以下代码中：

```
for (int line = 0; line < CHUNKSTOBEFOUND; line++) {
    nvc.Add ("search", System.Web.HttpUtility.UrlEncode (stringsToSearchFor[line]));
} 
```

我被告知命名空间名称 HttpUtility 不存在。 [http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx)似乎表明我应该使用 System.Web。我试过使用它，但我仍然得到错误。还有什么我应该包括或使用的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:10:24.993

正如主管所说，您可能`Client Profile`在您的项目中针对 System.Web.dll 不可用的项目。您可以在 Project Properties 中[定位完整框架](http://msdn.microsoft.com/en-us/library/bb398202%28v=vs.100%29.aspx)以使其恢复工作。

另一个可能的原因可能是您没有引用`System.Web`库。为此：

1.  右键单击解决方案资源管理器中的“参考”。
2.  选择“添加参考”
3.  检查“.NET”选项卡是否被选中。
4.  搜索并添加“System.Web”。

也许您只是缺少`using System.Web;`源文件顶部的 using 指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:57:56.080

您很可能使用的是 .Net 框架的[客户端配置文件](http://msdn.microsoft.com/en-us/library/cc656912%28v=vs.100%29.aspx)版本。您需要打开项目属性并将[框架版本更改](http://msdn.microsoft.com/en-us/library/bb398202%28v=vs.100%29.aspx)为完整版本。

# python - 从 numpy 数组创建 pydicom 文件

> ID：14350675
> 
> 赞同：9
> 
> 时间：2013-01-16T02:54:22.173
> 
> 标签：python, dicom, pydicom

我正在尝试从标准尺寸（512 x 512 或 256 x 256）numpy 数组创建一个新的 dicom 图像。

```
import dicom, dicom.UID
from dicom.dataset import Dataset, FileDataset

def write_dicom(pixel_array,filename):

    file_meta = Dataset()
    ds = FileDataset(filename, {},file_meta = file_meta,preamble="\0"*128)
    ds.PixelData = pixel_array.tostring()
    ds.save_as(filename)
    return

if __name__ == "__main__":
    import numpy as np
    pixel_array = np.tile(np.arange(256).reshape(16,16), (16,16)) * 4
    write_dicom(pixel_array,'pretty.dcm') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-01-17T11:11:30.703

2020年更新:)

这些答案都不适合我。这就是我最终保存有效的单色 16bpp MR 切片的结果，该切片至少在 Slicer、Radiant 和 MicroDicom 中正确显示：

```
import pydicom
from pydicom.dataset import Dataset, FileDataset
from pydicom.uid import ExplicitVRLittleEndian
import pydicom._storage_sopclass_uids

image2d = image2d.astype(np.uint16)

print("Setting file meta information...")
# Populate required values for file meta information

meta = pydicom.Dataset()
meta.MediaStorageSOPClassUID = pydicom._storage_sopclass_uids.MRImageStorage
meta.MediaStorageSOPInstanceUID = pydicom.uid.generate_uid()
meta.TransferSyntaxUID = pydicom.uid.ExplicitVRLittleEndian  

ds = Dataset()
ds.file_meta = meta

ds.is_little_endian = True
ds.is_implicit_VR = False

ds.SOPClassUID = pydicom._storage_sopclass_uids.MRImageStorage
ds.PatientName = "Test^Firstname"
ds.PatientID = "123456"

ds.Modality = "MR"
ds.SeriesInstanceUID = pydicom.uid.generate_uid()
ds.StudyInstanceUID = pydicom.uid.generate_uid()
ds.FrameOfReferenceUID = pydicom.uid.generate_uid()

ds.BitsStored = 16
ds.BitsAllocated = 16
ds.SamplesPerPixel = 1
ds.HighBit = 15

ds.ImagesInAcquisition = "1"

ds.Rows = image2d.shape[0]
ds.Columns = image2d.shape[1]
ds.InstanceNumber = 1

ds.ImagePositionPatient = r"0\0\1"
ds.ImageOrientationPatient = r"1\0\0\0\-1\0"
ds.ImageType = r"ORIGINAL\PRIMARY\AXIAL"

ds.RescaleIntercept = "0"
ds.RescaleSlope = "1"
ds.PixelSpacing = r"1\1"
ds.PhotometricInterpretation = "MONOCHROME2"
ds.PixelRepresentation = 1

pydicom.dataset.validate_file_meta(ds.file_meta, enforce_standard=True)

print("Setting pixel data...")
ds.PixelData = image2d.tobytes()

ds.save_as(r"out.dcm") 
```

请注意以下事项：

*   按照 PyDicom 文档的建议，通过 FileDataset 构造函数未能为我创建有效的标头
*   validate_file_meta 将为您在标题中创建一些缺少的元素（版本）
*   您需要指定字节顺序和显式/隐式 VR 两次：/
*   只要您相应地更新每个切片的 ImagePositionPatient 和 InstanceNumber，此方法将允许您创建一个有效的卷
*   确保您的 numpy 数组转换为与您的 BitsStored 具有相同位数的数据格式

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T17:56:21.017

这是我需要编写的代码的功能版本。它将从给定的 2D 像素阵列写入 16 位灰度 DICOM 图像。根据 DICOM 标准，每个图像和系列的 UID 应该是唯一的，这段代码并不担心，因为我不知道 UID 实际做什么。如果其他人这样做，我会很乐意添加它。

```
import dicom, dicom.UID
from dicom.dataset import Dataset, FileDataset
import numpy as np
import datetime, time

def write_dicom(pixel_array,filename):
    """
    INPUTS:
    pixel_array: 2D numpy ndarray.  If pixel_array is larger than 2D, errors.
    filename: string name for the output file.
    """

    ## This code block was taken from the output of a MATLAB secondary
    ## capture.  I do not know what the long dotted UIDs mean, but
    ## this code works.
    file_meta = Dataset()
    file_meta.MediaStorageSOPClassUID = 'Secondary Capture Image Storage'
    file_meta.MediaStorageSOPInstanceUID = '1.3.6.1.4.1.9590.100.1.1.111165684411017669021768385720736873780'
    file_meta.ImplementationClassUID = '1.3.6.1.4.1.9590.100.1.0.100.4.0'
    ds = FileDataset(filename, {},file_meta = file_meta,preamble="\0"*128)
    ds.Modality = 'WSD'
    ds.ContentDate = str(datetime.date.today()).replace('-','')
    ds.ContentTime = str(time.time()) #milliseconds since the epoch
    ds.StudyInstanceUID =  '1.3.6.1.4.1.9590.100.1.1.124313977412360175234271287472804872093'
    ds.SeriesInstanceUID = '1.3.6.1.4.1.9590.100.1.1.369231118011061003403421859172643143649'
    ds.SOPInstanceUID =    '1.3.6.1.4.1.9590.100.1.1.111165684411017669021768385720736873780'
    ds.SOPClassUID = 'Secondary Capture Image Storage'
    ds.SecondaryCaptureDeviceManufctur = 'Python 2.7.3'

    ## These are the necessary imaging components of the FileDataset object.
    ds.SamplesPerPixel = 1
    ds.PhotometricInterpretation = "MONOCHROME2"
    ds.PixelRepresentation = 0
    ds.HighBit = 15
    ds.BitsStored = 16
    ds.BitsAllocated = 16
    ds.SmallestImagePixelValue = '\\x00\\x00'
    ds.LargestImagePixelValue = '\\xff\\xff'
    ds.Columns = pixel_array.shape[0]
    ds.Rows = pixel_array.shape[1]
    if pixel_array.dtype != np.uint16:
        pixel_array = pixel_array.astype(np.uint16)
    ds.PixelData = pixel_array.tostring()

    ds.save_as(filename)
    return

if __name__ == "__main__":
#    pixel_array = np.arange(256*256).reshape(256,256)
#    pixel_array = np.tile(np.arange(256).reshape(16,16),(16,16))
    x = np.arange(16).reshape(16,1)
    pixel_array = (x + x.T) * 32
    pixel_array = np.tile(pixel_array,(16,16))
    write_dicom(pixel_array,'pretty.dcm') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-03T06:11:22.033

上面的示例有效，但导致许多工具抱怨 DICOM，甚至使用 itk/SimpleITK 作为堆栈根本无法读取它们。我发现从 numpy 制作 DICOM 的最佳方法是使用 SimpleITK 工具并逐片生成 DICOM。一个基本示例（[https://github.com/zivy/SimpleITK/blob/8e94451e4c0e90bcc6a1ffdd7bc3d56c81f58d80/Examples/DicomSeriesReadModifyWrite/DicomSeriesReadModifySeriesWrite.py](https://github.com/zivy/SimpleITK/blob/8e94451e4c0e90bcc6a1ffdd7bc3d56c81f58d80/Examples/DicomSeriesReadModifyWrite/DicomSeriesReadModifySeriesWrite.py)）显示了如何在堆栈中加载，执行转换然后重新保存文件，但这很容易通过使用修改

```
import SimpleITK as sitk
filtered_image = sitk.GetImageFromArray(my_numpy_array) 
```

最终输出图像中的标签数量非常多，因此手动创建所有标签非常繁琐。此外，SimpleITK 支持 8、16、32 位图像以及 RGB，因此比在 pydicom 中制作它们要容易得多。

```
(0008, 0008) Image Type                          CS: ['DERIVED', 'SECONDARY']
(0008, 0016) SOP Class UID                       UI: Secondary Capture Image Storage
(0008, 0018) SOP Instance UID                    UI: 1.2.826.0.1.3680043.2.1125.1.35596048796922805578234000521866725
(0008, 0020) Study Date                          DA: '20170803'
(0008, 0021) Series Date                         DA: '20170803'
(0008, 0023) Content Date                        DA: 0
(0008, 0030) Study Time                          TM: '080429.171808'
(0008, 0031) Series Time                         TM: '080429'
(0008, 0033) Content Time                        TM: 0
(0008, 0050) Accession Number                    SH: ''
(0008, 0060) Modality                            CS: 'OT'
(0008, 0064) Conversion Type                     CS: 'WSD'
(0008, 0090) Referring Physician's Name          PN: ''
(0010, 0010) Patient's Name                      PN: ''
(0010, 0020) Patient ID                          LO: ''
(0010, 0030) Patient's Birth Date                DA: ''
(0010, 0040) Patient's Sex                       CS: ''
(0018, 2010) Nominal Scanned Pixel Spacing       DS: ['1', '3']
(0020, 000d) Study Instance UID                  UI: 1.2.826.0.1.3680043.2.1125.1.33389357207068897066210100430826006
(0020, 000e) Series Instance UID                 UI: 1.2.826.0.1.3680043.2.1125.1.51488923827429438625199681257282809
(0020, 0010) Study ID                            SH: ''
(0020, 0011) Series Number                       IS: ''
(0020, 0013) Instance Number                     IS: ''
(0020, 0020) Patient Orientation                 CS: ''
(0020, 0052) Frame of Reference UID              UI: 1.2.826.0.1.3680043.2.1125.1.35696880630664441938326682384062489
(0028, 0002) Samples per Pixel                   US: 1
(0028, 0004) Photometric Interpretation          CS: 'MONOCHROME2'
(0028, 0010) Rows                                US: 40
(0028, 0011) Columns                             US: 50
(0028, 0100) Bits Allocated                      US: 32
(0028, 0101) Bits Stored                         US: 32
(0028, 0102) High Bit                            US: 31
(0028, 0103) Pixel Representation                US: 1
(0028, 1052) Rescale Intercept                   DS: "0"
(0028, 1053) Rescale Slope                       DS: "1"
(0028, 1054) Rescale Type                        LO: 'US'
(7fe0, 0010) Pixel Data                          OW: Array of 8000 bytes 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T08:21:25.363

DICOM 是一种非常复杂的格式。有很多方言，兼容性是一个运气问题。你也可以试试[`nibabel`](http://nipy.sourceforge.net/nibabel/)，也许它的方言对 RadiAnt 或 MicroDicom 更有吸引力。

一般来说，我建议尽可能使用 Nifti 格式。它的标准更加简洁，不兼容的情况很少见。nibabel 也支持这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-08T08:04:12.973

Corvin 的 2020 年更新几乎对我有用。元数据仍未写入文件，因此在读取它时引发了以下异常：

> pydicom.errors.InvalidDicomError：文件缺少 DICOM 文件元信息标头或标头中缺少“DICM”前缀。

为了解决这个问题并将元数据写入 dicom 文件，我需要添加`enforce_standard=True`调用`the save_as()`：

```
ds.save_as(filename=out_filename, enforce_standard=True) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-26T13:21:08.040

一种适用于需要它的人的工作配置和一个问题。问题在另一个线程中[从多个 jpg 图像创建 Dicom](https://stackoverflow.com/q/68939302/1827162) 对我有用的是没有压缩的灰度。每次压缩尝试都失败了，我不知道为什么：

```
# Populate required values for file meta information
meta = pydicom.Dataset()
meta.TransferSyntaxUID = pydicom.uid.ExplicitVRLittleEndian
meta.MediaStorageSOPClassUID = pydicom._storage_sopclass_uids.MRImageStorage
meta.MediaStorageSOPInstanceUID = pydicom.uid.generate_uid()

# build dataset
ds = Dataset()
ds.file_meta = meta
ds.fix_meta_info()

# unknown options
ds.is_little_endian = True
ds.is_implicit_VR = False
ds.SOPClassUID = pydicom._storage_sopclass_uids.MRImageStorage
ds.SeriesInstanceUID = pydicom.uid.generate_uid()
ds.StudyInstanceUID = pydicom.uid.generate_uid()
ds.FrameOfReferenceUID = pydicom.uid.generate_uid()
ds.BitsStored = 16
ds.BitsAllocated = 16
ds.SamplesPerPixel = 1
ds.HighBit = 15
ds.ImagesInAcquisition = "1"
ds.InstanceNumber = 1
ds.ImagePositionPatient = r"0\0\1"
ds.ImageOrientationPatient = r"1\0\0\0\-1\0"
ds.ImageType = r"ORIGINAL\PRIMARY\AXIAL"
ds.RescaleIntercept = "0"
ds.RescaleSlope = "1"
ds.PixelRepresentation = 1

# Case options
ds.PatientName = "Anonymous"
ds.PatientID = "123456"
ds.Modality = "MR"
ds.StudyDate = '20200225'
ds.ContentDate = '20200225'

# convert image to grayscale
img = Image.open(filename).convert('L')
img.save(filename)

# open image, decode and ensure_even stream
with open(filename, 'rb') as f:
    arr = decode(f)

def ensure_even(stream):
    # Very important for some viewers
    if len(stream) % 2:
        return stream + b"\x00"
    return stream

# required for pixel handler
ds.BitsStored = 8
ds.BitsAllocated = 8
ds.HighBit = 7
ds.PixelRepresentation = 0

# grayscale without compression WORKS
ds.PhotometricInterpretation = "MONOCHROME2"
ds.SamplesPerPixel = 1  # 1 color = 1 sample per pixel
ds.file_meta.TransferSyntaxUID = pydicom.uid.ExplicitVRLittleEndian
ds.PixelData = ensure_even(arr.tobytes())

# JPEGBaseline compressed DOES NOT WORK
# ds.PixelData = encapsulate([ensure_even(arr.tobytes())])
# ds.PhotometricInterpretation = "YBR_FULL"
# ds.SamplesPerPixel = 3  # 3 colors = 3 sampleperpixel
# ds.file_meta.TransferSyntaxUID = pydicom.uid.JPEGBaseline
# ds.compress(pydicom.uid.JPEGBaseline)

# JPEGExtended compressed DOES NOT WORK
# ds.PixelData = encapsulate([ensure_even(arr.tobytes())])
# ds.PhotometricInterpretation = "YBR_FULL_422"
# ds.SamplesPerPixel = 3  # 3 colors = 3 sampleperpixel
# ds.file_meta.TransferSyntaxUID = pydicom.uid.JPEGExtended
# ds.compress(pydicom.uid.JPEGExtended)

# JPEG2000 compressed DOES NOT WORK
# ds.PhotometricInterpretation = "RGB"
# ds.SamplesPerPixel = 3  # 3 colors = 3 sampleperpixel
# ds.file_meta.TransferSyntaxUID = pydicom.uid.JPEG2000
# ds.PixelData = encapsulate([ensure_even(arr.tobytes())])
# ds.compress(pydicom.uid.JPEG2000)

# Image shape
ds['PixelData'].is_undefined_length = False
array_shape = arr.shape
ds.Rows = array_shape[0]
ds.Columns = array_shape[1]

# validate and save
pydicom.dataset.validate_file_meta(ds.file_meta, enforce_standard=True)
new_filename = filename.replace('.jpg', name + '.dcm')
ds.save_as(new_filename, write_like_original=False) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-11-16T21:30:04.593

我能够进一步减少@Corvin 的好答案。这是一个极简代码示例，允许将（虚拟）3D numpy 数组保存到可以用[Amide](http://amide.sourceforge.net/)打开的有效 DICOM 图像：

```
#!/usr/bin/python3
import numpy
import pydicom
import pydicom._storage_sopclass_uids

# dummy image
image = numpy.random.randint(2**16, size=(512, 512, 512), dtype=numpy.uint16)

# metadata
fileMeta = pydicom.Dataset()
fileMeta.MediaStorageSOPClassUID = pydicom._storage_sopclass_uids.CTImageStorage
fileMeta.MediaStorageSOPInstanceUID = pydicom.uid.generate_uid()
fileMeta.TransferSyntaxUID = pydicom.uid.ExplicitVRLittleEndian

# dataset
ds = pydicom.Dataset()
ds.file_meta = fileMeta

ds.Rows = image.shape[0]
ds.Columns = image.shape[1]
ds.NumberOfFrames = image.shape[2]

ds.PixelSpacing = [1, 1] # in mm
ds.SliceThickness = 1 # in mm

ds.BitsAllocated = 16
ds.PixelRepresentation = 1
ds.PixelData = image.tobytes()

# save
ds.save_as('image.dcm', write_like_original=False) 
```

`image.dcm`正如人们可能会观察到的，如果将输出文件传递给[dciodvfy](https://www.dclunie.com/dicom3tools/dciodvfy.html)，则会丢失很多字段。这些字段的填写留给读者；）

# javascript - 将新文本框添加到表单并“返回”到页面时，Chrome 会丢弃文本区域的更改

> ID：14350682
> 
> 赞同：0
> 
> 时间：2013-01-16T02:55:02.953
> 
> 标签：javascript, forms, google-chrome

请看这个 HTML：

```
<script>
function insert() { 
   document.getElementById("add").innerHTML="<input name=a>";
}
</script>
<button onclick="insert()">Insert new textbox</button>
<form>
  <div id="add"></div>
  <textarea name=b>a</textarea>
  <a href="other.html">Go</a>
  <!-- The content of other.html does not matter -->
</form> 
```

并在Chrome中打开此页面（Win7 64bit, 24.0.1312.52 m）

*   在 textarea 中添加一些文本，例如“b”（textarea 的值将是“ab”）
*   选择“Go”链接，显示 other.html
*   “返回”到这个页面，那么textarea的值依然是“ab”
*   按“插入新文本框”
*   选择“前往”链接
*   再次“返回”，然后 textarea 的值回到“a”！

不仅是这个过程，一旦按下“插入新文本框”，当我“返回”到这个页面时，Chrome 就不再记得表单的变化了。

这在其他浏览器中不会发生（它们可以将值“ab”保留到最后）：

*   歌剧 11.11
*   火狐12.0
*   IE 9.0.12

这是Chrome的错误吗？或者我有什么可以避免的？

演示：http: [//jsfiddle.net/DerekL/Lsnvp/](http://jsfiddle.net/DerekL/Lsnvp/)

# c# - 获取 WPF RichTextBox 以在文本上绘制水平线

> ID：14350683
> 
> 赞同：1
> 
> 时间：2013-01-16T02:55:03.543
> 
> 标签：c#, .net, wpf, richtextbox

假设我有一个给定的 TextRange`range`恰好有这个文本`-----------------`（在它自己的行上。）

每当我看到该文本时，我都想画一条实线（而不是只有 15 个破折号）。

但是，当我保存它时（以及当其他纯文本查看器加载它时），我需要将破折号留在那里。

我发现了如何在 RichTextBox 中画一条线：

```
var line = new Line {X1 = 10, X2 = 200, Y1 = 5, Y2 = 5, 
var paragraph = (Paragraph) MyRichTextBox.Document.Blocks.FirstBlock;
paragraph.Inlines.Add(line); 
```

但这只是在段落中的最后一个 Inline 之后绘制。

所以，我的问题是：

**如何绘制，以便我的 UIElement 没有文字环绕**（以便我可以覆盖破折号）？

WPF RichTextBox 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:12:07.203

我认为你必须从段落中删除并用一个元素`Inline`替换它。`Line`在这种情况下，您必须`Line`在保存时将元素替换为“-----”。

```
 private void FindHRules()
    {
        foreach (Paragraph block in rtf.Document.Blocks.OfType<Paragraph>())
        {
            var inlines = block.Inlines.ToList();
            for(int i = 0; i<inlines.Count; i++)
            {
                var inline = inlines[i];
                TextRange r = new TextRange(inline.ContentStart, inline.ContentEnd);
                if (r.Text.StartsWith("--"))
                {
                    Line l = new Line { Stretch = Stretch.Fill, Stroke = Brushes.DarkBlue, X2 = 1 };
                    block.Inlines.InsertAfter(inline, new InlineUIContainer(l));
                    block.Inlines.Remove(inline);
                }
            }
        }
    } 
```

我使用一个 RTF 文档对此进行了测试，该文档在独立段落 (<enter>) 中具有“-----”行，在其他段落中具有换行符 (<shift-enter>)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:07:52.597

您能否为此使用“TextDecorations.Strikethrough”。

```
TextRange range = new TextRange(RichTextBox.Selection.Start, RichTextBox.Selection.End);

TextDecorationCollection tdc = (TextDecorationCollection)RichTextBox.Selection.GetPropertyValue(Inline.TextDecorationsProperty);
if (!tdc.Equals(TextDecorations.Strikethrough))
{
    tdc = TextDecorations.Strikethrough;
}
range.ApplyPropertyValue(Inline.TextDecorationsProperty, tdc); 
```

# ruby-on-rails - 如何遍历哈希列表？

> ID：14350693
> 
> 赞同：2
> 
> 时间：2013-01-16T02:56:58.397
> 
> 标签：ruby-on-rails, ruby

我有一个这样的哈希：

```
@json = [{"id"=> 1, "username" => "Example"}, {"id"=> 2, "username" => "Example 2"}] 
```

我想做这样的事情：

```
<ul>
    <% @json.each do |user| %>
    <li><%= user.username %></li>
    <% end %>
</ul> 
```

它会输出一个包含两个用户名的列表。

刚刚在 IRB 中尝试过：

```
json2 = [{"id"=> 1, "username" => "Example"}, {"id"=> 2, "username" => "Example 2"}]
irb(main):076:0> json2.each do |user|
irb(main):077:1* user["id"]
irb(main):078:1> end
=> [{"id"=>1, "username"=>"Example"}, {"id"=>2, "username"=>"Example 2"}]
irb(main):079:0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:58:27.157

你所拥有的是一个[`Hash`](http://www.ruby-doc.org/core-1.9.3/Hash.html)，而不是一个`User`对象。因此，您必须使用索引运算符 ( `[]`) 访问用户名：

```
<ul>

<% @json.each do |user| %>
  <li><%= user["username"] %></li>
<% end %>

</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:54:30.813

```
json2 = [{"id"=> 1, "username" => "Example"}, {"id"=> 2, "username" => "Example 2"}]
json2.each do |user|
    puts user['username']
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T08:39:14.930

如果您需要在控制台中输出，那么您需要执行以下操作：

```
@json = [{"id"=> 1, "username" => "Example"}, {"id"=> 2, "username" => "Example 2"}]
@json.collect{|json| puts json['username'] } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-19T09:35:50.923

如果你想迭代数组中的哈希，你可以使用其中的任何一个。

```
@json = [{"id"=> 1, "username" => "user_name"}, {"id"=> 2, "username" => "user_name"}, {"id"=> 3, "username" => "user_name"}]

@json.each{|json| puts json['username'] } 

@json.collect{|json| json['username'] } 

@json.map{|json| json['username'] } 
```

如果你想在视图中，那么你可以使用

```
<ul>
  <% @json.each do |user| %>
    <li><%= user["username"] %></li>
  <% end %>
</ul> 
```

# lua - 插入到字符串

> ID：14350694
> 
> 赞同：3
> 
> 时间：2013-01-16T02:57:50.543
> 
> 标签：lua

我有一个像“123456789012345678901234”这样的字符串，它总是24个字符，总是数字，我想知道如何在除最后一个字符之外的每4个字符处插入“-”字符，所以我得到“1234-5678-9012- 3456-7890-1234”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T03:08:37.373

像这样：`("123456789012345678901234"):gsub(("(%d%d%d%d)"):rep(6), "%1-%2-%3-%4-%5-%6")`？

# php - 显示 2 列之间哪个值更高

> ID：14350698
> 
> 赞同：2
> 
> 时间：2013-01-16T02:58:11.447
> 
> 标签：php, mysql, sql, select

我有一张这样的桌子

```
╔═══════╦════════╗
║  VOL  ║ WEIGHT ║
╠═══════╬════════╣
║ 20.00 ║ 222.00 ║
╚═══════╩════════╝ 
```

但是然后我想显示2列之间哪个值更高，就像...

```
╔═══════╦════════╦═════════╗
║  VOL  ║ WEIGHT ║ TONNAGE ║
╠═══════╬════════╬═════════╣
║ 20.00 ║ 222.00 ║ 222.00  ║
╚═══════╩════════╩═════════╝ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T02:59:30.470

利用`GREATEST`

```
SELECT vol, weight, GREATEST(vol, weight) Tonnage
FROM tableName 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1a5444/1)

资源

*   [最伟大的](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_greatest)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T03:18:49.113

我同意之前关于 的帖子`GREATEST`，但是对于更通用的语法，`CASE`也可以很好地工作（应该适用于大多数 RDBMS）：

```
SELECT vol, 
  weight, 
  case 
     when vol > weight 
     then vol 
     else weight end as Tonnage
FROM tableName 
```

[SQL 小提琴](http://sqlfiddle.com/#!3/7ef28/1)。

# c# - 单击按钮显示 gps 纬度和经度

> ID：14350702
> 
> 赞同：0
> 
> 时间：2013-01-16T02:58:36.593
> 
> 标签：c#, asp.net, latitude-longitude

我正在开发 gps 网络应用程序，我需要在页面加载或按钮单击时将用户的经度和纬度获取到隐藏字段。通过使用这些，我可以从我的数据库中检索用户所需的信息。

目前，我可以在页面加载时通过 javascript 检索 gps 坐标，有人可以告诉我如何将这些纬度和经度获取到 c# 中的隐藏文件或标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:07:07.333

```
alert( $("input#fooBox").val() ); // alert default value
$("input#fooBox").val("end test"); // change value
alert( $("input#fooBox").val() ); // alert new value

<input type="hidden" id="fooBox" value="hello world" /> 
```

# css - UI 的变化使得萤火虫选择了standard.css 而不是原来的样式

> ID：14350703
> 
> 赞同：0
> 
> 时间：2013-01-16T02:58:43.200
> 
> 标签：css, gwt, firebug

我写了以下css

```
 .rightCheckBoxes {
      float: right;
      width: 139px;
      margin: 4px 3px 2px 3px;
 }

 <div class="clearfix">
    <g:HTML addStyleNames="{style.formLabel}" ui:field="accountHTMLLabel">A<u>c</u>count</g:HTML>
    <fa:FocusAwareSuggestBox maxLength="20" addStyleNames="{style.formField} {style.accountWidth}" ui:field="accountSuggestBox"/>
    <g:Button addStyleNames="{style.normalButtons} {style.rightAlignment} {style.rightFieldAdjust}" enabled="false" ui:field="allocationButton">Bu<u>tto</u>n</g:Button>
    <g:CheckBox addStyleNames="{style.rightCheckBoxes}" checked="true" ui:field="allocationCompleteCB">Allocation Complete</g:CheckBox>
</div> 
```

当我将其更改为以下内容时：

```
 .rightCheckBoxes {
      float: right;
      width: 139px;
      margin: 4px 3px 2px 3px;
 }

 <!-- Added this -->
.rightCheckBoxWidth {
      width:142px !important;            
 }  
 <!-- -->

<div class="clearfix">
    <g:HTML addStyleNames="{style.formLabel}" ui:field="accountHTMLLabel">T<u>i</u>tle</g:HTML>
    <fa:FocusAwareSuggestBox maxLength="20" addStyleNames="{style.formField} {style.accountWidth}" ui:field="acctSuggestBox"/>
    <g:Button addStyleNames="{style.normalButtons} {style.rightAlignment} {style.rightFieldAdjust}" enabled="false" ui:field="button1">Bu<u>tto</u>n</g:Button>
    <g:CheckBox addStyleNames="{style.rightCheckBoxes} {style.rightCheckBoxWidth}" checked="true" ui:field="chk2">Status Complete</g:CheckBox>
</div> 
```

并单击firebug选项以查看元素“chk2”，它向我显示了来自standard.css的gwt复选框元素的默认样式，而不是在上面选择我自己的样式。为什么这是我无法理解的逻辑！

# java - 如何让 Java StyleSheet 类优先于 Java 7 中的外部 CSS 样式表？

> ID：14350704
> 
> 赞同：1
> 
> 时间：2013-01-16T02:58:52.023
> 
> 标签：java, html, css

我正在尝试使用外部 CSS 样式表来为我在 JEditorPane 中显示的网页设置默认标记属性。我正在尝试使用 Java 的 StyleSheet 类来覆盖在我的网页链接到的外部样式表中定义的特定标记属性。我正在使用以下代码：

```
 editorPane = new JEditorPane();
    editorPane.setEditable(false);
    editorPane.setContentType("text/html");
    try
    {
        editorPane.setPage(new URL("file:///c:/users/ryan/desktop/htmlviewer.htm"));
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    HTMLEditorKit editorKit = new HTMLEditorKit();
    editorPane.setEditorKit(editorKit);
    HTMLDocument document = (HTMLDocument) editorKit.createDefaultDocument();

    StyleSheet styleSheet = document.getStyleSheet();
    styleSheet.addRule("p { color:#0000ff; }");

    editorKit.setStyleSheet(styleSheet);

    add(editorPane); 
```

我的外部 CSS 样式表包含以下行：

p { 颜色：#ff0000; }

当我在 Java 6 中运行它时，p 标签的文本颜色是#0000ff。但是当我在 Java 7 中运行它时，p 标签的文本颜色是#ff0000。

为什么行为发生了变化？有没有办法让我在 Java 中定义的 CSS 属性优先于在我的外部 CSS 样式表中定义的那些？示例代码将不胜感激。

# c++ - 这个浮动公式是什么意思？

> ID：14350705
> 
> 赞同：6
> 
> 时间：2013-01-16T02:59:02.607
> 
> 标签：c++, floating-point

好的，我得到了一个公式，可以使用 i 和 j（二维数组中值的坐标）确定 0.0 到 1.0 之间的浮点值。我只是想确切地知道这个公式的作用。对我来说完全是无稽之谈。我已经在它自己的函数中实现了它，其中 i 和 j 的 int 值作为参数传递。有人可以提供解释吗？我不必理解它，因为他把它交给我们只是为了按原样使用，但我真的很想知道。

```
float col = float (((i & 0x08) == 0) ^ ((j & 0x08) == 0)); 
```

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T04:15:48.840

结果，如果绘制`i,j`为 x,y 坐标，将是一个具有 8x8 像素正方形的棋盘。

`i & 0x08`和`j & 0x08`只是测试每个轴的一个位。该位将每 8 个像素更改一次状态。

`== 0`会将每个结果转换为布尔值，其计算结果为 0 或 1。它还会反转结果，但我认为这与整个公式无关。

如果两者`^`相同，异或运算符将返回 0，如果它们不同，则返回 1。这就是您获得棋盘的方式 - 结果每次交替出现`i`或`j`越过边界。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T03:08:32.613

这里有很多布尔和[按位布尔运算符](http://www.cprogramming.com/tutorial/bitwise_operators.html)..让我尝试分部分回答..让我们先分成几部分

`A:(i & 0x08)`
在 i 上执行按位和 - 基本上是在 i 和 0x08 的每个位上执行（二进制为 1000）

`B:A==0`
检查每个位的按位和是否为假 **基本上检查最后的第 4 位是否为 0**

`C: B ^ B'`
按位异或 - 如果其中一个为真，而不是两个都为真，则返回 1（按位）

`D:float(C)`
简单的一个，将 C 抛到浮动。

最终结果 - 不知道..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T03:08:31.623

```
float col = float (((i & 0x08) == 0) ^ ((j & 0x08) == 0)); 
```

`& 0x08``i`用 8 进行按位运算，这意味着它从数字和中提取第 4 个最低有效位（1 是最低的，然后是 2、4、8）`j`。是`^`异或运算：如果两个位相同，则结果为 0，如果它们不同，则结果为 1。`float`外部将其提升为 a `= float(...)`，因此`col`变为`0.0`if`i`和`j`are 相同，但`1.0`如果它们不同。

为什么它可能有用？这取决于什么`i`和`j`是什么。据推测，第 4 位编码一些特定的条件或标志（布尔值），例如：一个人是男性还是女性。`&`操作提取，然后说`^`“他们不同吗？”。为什么要将布尔表达式转换为浮点数？老实说，没有太多充分的理由 - 你总是可以让转换在它使用的地方隐式完成（假设男性/女性）：

```
bool hetero = i & 0x08 ^ j & 0x08;
float estimated_children_from_coupling = 1.3 * hetero;  // same as hetero ? 1.3 : 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T03:28:20.060

简而言之，如果“i”或“j”等于 0x08（十进制 8），则“col = 1.0”。

(i & 0x08)：如果 "i == 0x08" 则不为零，否则为零 (i & 0x08) == 0：如果 "i != 0x08" 则为 1/true，如果 "i == 0x08" 则为 0/false “j”

因此，两侧的“异或”（^ 运算符）将是正确的，其中任何一个都是正确的，但不是两者都是正确的，当 i OR j 为 0x08 时会发生这种情况。

最后，无论出于何种原因，它都会将结果转换为浮动。

# ruby-on-rails - 如何将 erb 模板渲染为内部动作字符串？

> ID：14350708
> 
> 赞同：14
> 
> 时间：2013-01-16T02:59:13.990
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要一串 html（类似于`"<html><body>Hello World</body></html>"`）用于传真目的。

我把它写到一个单独的 erb 文件中：`views/orders/_fax.html.erb`，并尝试渲染 erb 在行动：`html_data = render(:partial => 'fax')`。

这是引发问题的控制器的一部分：

```
 respond_to do |format|
      if @order.save   
        html_data = render(:partial => 'fax')
        response = fax_machine.send_fax(html_data)
        ......

        format.html { redirect_to @order, notice: 'Order was successfully created.' }
        format.json { render json: @order, status: :created, location: @order }
      else  
        format.html { render action: "new" }
        format.json { render json: @order.errors, status: :unprocessable_entity }
      end
    end 
```

它给了我一个 AbstractController::DoubleRenderError 如下：

```
AbstractController::DoubleRenderError in OrdersController#create

Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return". 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T03:58:28.453

如果您只需要呈现的 HTML，并且不需要控制器的任何功能，您可以尝试在帮助程序类中直接使用 ERB，例如：

```
module FaxHelper

  def to_fax
    html = File.open(path_to_template).read
    template = ERB.new(html)
    template.result
  end

end 
```

[ERB 文档](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)更详细地解释了这一点。

编辑

要从控制器获取实例变量，请将绑定传递给`result`调用，例如：

```
# controller
to_fax(binding)

# helper class
def to_fax(controller_binding)
  html = File.open(path_to_template).read
  template = ERB.new(html)
  template.result(controller_binding)
end 
```

注意：我从来没有这样做过，但它似乎可行:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-06T03:02:38.223

使用 #render_to_string 方法

它的工作方式与典型的渲染方法相同，但当您需要将一些模板化 HTML 添加到 json 响应时很有用

[http://apidock.com/rails/ActionController/Base/render_to_string](http://apidock.com/rails/ActionController/Base/render_to_string)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T03:09:54.463

如果您不想转义 html，只需调用 .html_safe 即可：

`"<html><body>Hello World</body></html>".html_safe`

关于您的错误，请发布您的 OrdersController - 看起来您在创建操作中不止一次调用渲染或重定向。

（顺便说一句，以防万一你尝试它 - 你不能在控制器中渲染部分 - 你只能在视图中渲染部分）

编辑：是的，您的问题是您尝试在控制器操作中呈现部分内容。您可以使用`after_create`回调来设置和发送传真 - 尽管您不想再次使用部分（因为它们用于视图）。[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

编辑：对于您的传真问题，您可以创建一个普通的 Ruby 类，请参阅 Yehuda 的这一极好的建议：[https ://stackoverflow.com/a/1071510/468009](https://stackoverflow.com/a/1071510/468009)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T03:57:44.490

原因是您不能在给定时间多次在同一操作中呈现或重定向。

但是在您的代码中，您同时拥有`render`和`redirect`。我认为在你的控制器中你可以只使用渲染，假设你不需要任何 json 输出。

试试这个

```
def create
  @order.save   
  render(:partial => 'fax')
end 
```

我没有对此进行测试，但我想你明白了:)，并考虑一种处理错误的方法（以防订单未保存）。

# delphi - 为什么包含过程时 Delphi 记录的大小没有增加？

> ID：14350714
> 
> 赞同：8
> 
> 时间：2013-01-16T03:00:10.603
> 
> 标签：delphi, delphi-xe2

我有两条具有相同字段的记录，其中一条有一组程序。为什么两条记录的大小相同？

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

type
  TData = record
    Age : Byte;
    Id  : Integer;
  end;

  TData2 = record
    Age : Byte;
    Id  : Integer;
    procedure foo1;
    procedure foo2;
    procedure foo3;
  end;

procedure TData2.foo1;
begin

end;

procedure TData2.foo2;
begin

end;

procedure TData2.foo3;
begin

end;

begin
  try
    Writeln('SizeOf(TData) = '+ IntToStr(SizeOf(TData)));
    Writeln('SizeOf(TData2) = '+ IntToStr(SizeOf(TData2)));
    Readln;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;

end. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T03:04:58.703

那是因为记录本身只携带构成记录的数据，没有过程或功能。过程和函数是一种**语法糖**，以避免将记录本身作为参数传递：编译器为您*自动添加的**self*变量。

 *您在记录中声明的每个方法都有记录本身的另一个参数，例如：

```
 TData2 = record
    Age : Byte;
    Id  : Integer;
    procedure Foo1;
    procedure Foo2(SomeParam: Integer);
  end; 
```

更改为等效于：

```
 PData2 = ^TData2;

  TData2 = record
    Age : Byte;
    Id  : Integer;
  end;

  procedure TData2_Foo1(Self: PData2);
  procedure TData2_Foo2(Self: PData2; SomeParam: Integer); 
```

结束您拨打的每个电话也会更改，例如：

```
var
  Data: TData2;
begin
  Data.Foo1;
  Data.Foo2(1);
end; 
```

更改为等效于：

```
var
  Data: TData2;
begin
  TData2_Foo1(@Data);
  TData2_Foo1(@Data, 1);
end; 
```

我手头没有 Delphi 来检查参数是添加在参数列表的开头还是末尾，但我希望你能明白。

当然，这并没有真正的语法，因为它是由编译器动态完成*的*，因此，例如，过程名称不会更改。我这样做是为了让我的答案易于理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T03:03:37.240

程序不占用空间。编译器会正确连接它们。对于每条记录，它们的地址在运行时不需要在内存中。如果您查看 TData2 在内存中的表示，您将找不到这些过程。*

# facebook - 在我的网站上实现多个 facebook 评论框

> ID：14350716
> 
> 赞同：0
> 
> 时间：2013-01-16T03:00:32.657
> 
> 标签：facebook, comments

我需要在我使用 asp.net 的每个产品页面中添加 facebook 评论，并且我的产品页面 url 像这样 (mydomail.com/Products.aspx?id=5) 有什么办法可以做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:12:07.130

与 Facebook 的 Like 按钮类似，[Facebook 评论插件](http://developers.facebook.com/docs/reference/plugins/comments/)与一个 URL 相关联——这就是它的独特之处。

由于您在 URL 中使用了 id 参数，只需将 URL 传递给评论插件即可。这应该使每个页面都有一组独特的评论。

例如，在产品第 5 页上，您可以执行以下操作：

```
<div class="fb-comments" data-href="<?php echo 'http://myurl.com?id=' . $_GET['id']; ?>" data-width="470" data-num-posts="2"></div> 
```

您当然要确保您已放入 Facebook Javascript SDK 片段（我建议将其动态加载到 HTML 正文的顶部）：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=336176363148369";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

您可以使用其他类型的插件（XFBML、IFRAME），所有内容都记录[在此处](http://developers.facebook.com/docs/reference/plugins/comments/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-28T23:55:52.870

**`FB.XFBML.parse()` 在你的新 facebook 插件之后**使用****

# boost-graph - 我应该使用迭代器还是描述符来保持对边或顶点的引用？

> ID：14350721
> 
> 赞同：3
> 
> 时间：2013-01-16T03:00:46.787
> 
> 标签：boost-graph

我目前正在设计一个由 Boost Graph (adjacency_list) 和几个引用该结构的边或顶点的类组成的应用程序。

我的问题是：维护对节点或顶点的引用的推荐方法是什么？

我猜在迭代器的情况下，对象访问速度更快，但迭代器可能会因图结构的动态变化而失效。

相反，描述符是一个 id，这意味着搜索是检索数据所必需的，但在图形发生变化时可能不太容易触发内存错误。

这是真的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T15:05:31.513

迭代器/描述符的稳定性和迭代器的效率都取决于您的顶点容器。

例如`vectorS`，顶点描述符只是向量中顶点的索引，因此容器中的查找与索引向量一样快。在这种情况下，描述符与迭代器一样不稳定，因为插入和删除会导致元素四处移动。

因为`listS`我希望（阅读：'guess'）描述符是元素的地址，所以描述符和迭代器都可能具有相同的稳定性保证。在这种情况下，使用顶点描述符来访问属性可能与迭代器一样有效。

有关`adjacency_list`迭代器/描述符稳定性的更多信息，请阅读本页标题为[迭代](http://www.boost.org/doc/libs/1_54_0/libs/graph/doc/adjacency_list.html)**器和描述符稳定性/无效**的部分。考虑到性能问题，您最好对 2 进行比较，并且仅当它似乎是您的应用程序的瓶颈时。

# maven - 为什么 Maven 报告“校验和验证失败，存储库中没有可用的校验和”？

> ID：14350729
> 
> 赞同：12
> 
> 时间：2013-01-16T03:01:26.397
> 
> 标签：maven, repository

我正在尝试使用此处描述的 3 个步骤创建自定义 Maven 存储库 - [http://www.javaworld.com/community/node/3968](http://www.javaworld.com/community/node/3968)。所以，我遵循了所有步骤，在这里我有存储库：

```
D:\maven2>dir /s/b
D:\maven2\com
D:\maven2\org
D:\maven2\web.config
D:\maven2\com\safenet
D:\maven2\com\safenet\hasp
D:\maven2\com\safenet\hasp\1
D:\maven2\com\safenet\hasp\maven-metadata.xml
D:\maven2\com\safenet\hasp\maven-metadata.xml.md5
D:\maven2\com\safenet\hasp\maven-metadata.xml.sha1
D:\maven2\com\safenet\hasp\1\hasp-1.jar
D:\maven2\com\safenet\hasp\1\hasp-1.pom
D:\maven2\com\safenet\hasp\1\_maven.repositories
D:\maven2\org\jnetpcap
D:\maven2\org\jnetpcap\jnetcap
D:\maven2\org\jnetpcap\jnetcap\1.3
D:\maven2\org\jnetpcap\jnetcap\maven-metadata.xml
D:\maven2\org\jnetpcap\jnetcap\maven-metadata.xml.md5
D:\maven2\org\jnetpcap\jnetcap\maven-metadata.xml.sha1
D:\maven2\org\jnetpcap\jnetcap\1.3\jnetcap-1.3.jar
D:\maven2\org\jnetpcap\jnetcap\1.3\jnetcap-1.3.pom
D:\maven2\org\jnetpcap\jnetcap\1.3\_maven.repositories

D:\maven2>type com\safenet\hasp\maven-metadata.xml
<?xml version="1.0" encoding="UTF-8"?>
<metadata>
  <groupId>com.safenet</groupId>
  <artifactId>hasp</artifactId>
  <versioning>
    <release>1</release>
    <versions>
      <version>1</version>
    </versions>
    <lastUpdated>20130108125547</lastUpdated>
  </versioning>
</metadata>

D:\maven2>type org\jnetpcap\jnetcap\maven-metadata.xml.md5
297455697088aad6bdbe256d48fb0676 *maven-metadata.xml

D:\maven2>type org\jnetpcap\jnetcap\maven-metadata.xml.sha1
f86d93727a76525f42f1b67997020e1a9a41b948 *maven-metadata.xml

D:\maven2>type org\jnetpcap\jnetcap\1.3\jnetcap-1.3.pom
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.jnetpcap</groupId>
  <artifactId>jnetcap</artifactId>
  <version>1.3</version>
  <description>POM was created from install:install-file</description>
</project>

D:\maven2> 
```

现在我正在尝试在这样的 pom 文件中使用搭扣工件：

```
<dependency>
  <groupId>com.safenet</groupId>
  <artifactId>hasp</artifactId>
  <version>1</version>
  <scope>provided</scope>
</dependency> 
```

并且存储库是这样引用的：

```
<repository>
  <releases>
    <enabled>true</enabled>
    <updatePolicy>always</updatePolicy>
    <checksumPolicy>fail</checksumPolicy>
  </releases>
  <id>dev-builder</id>
  <name>Shunra private repository</name>
  <url>http://dev-builder/maven2</url>
  <layout>default</layout>
</repository> 
```

不幸的是，它没有按预期工作：

```
[INFO] Building license 0.0.1
[INFO] ------------------------------------------------------------------------
Downloading: http://dev-builder/maven2/com/safenet/hasp/1/hasp-1.pom
[WARNING] The POM for com.safenet:hasp:jar:1 is missing, no dependency information available
Downloading: http://dev-builder/maven2/com/safenet/hasp/1/hasp-1.jar
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO]
[INFO] Local Driver Proxy ................................ SUCCESS [2.579s]
[INFO] Emulation API ..................................... SUCCESS [1.637s]
[INFO] util.logging ...................................... SUCCESS [1.023s]
[INFO] Infra ............................................. SUCCESS [0.250s]
[INFO] dtos .............................................. SUCCESS [0.691s]
[INFO] commons ........................................... SUCCESS [0.426s]
[INFO] license ........................................... FAILURE [2.195s]
[INFO] core .............................................. SKIPPED
[INFO] vcat .............................................. SKIPPED
[INFO] VCat-build ........................................ SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.044s
[INFO] Finished at: Tue Jan 15 21:27:43 EST 2013
[INFO] Final Memory: 6M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project license: Could not resolve dependencies for project com.shunra:license:jar:0.0.1: Could not transfer artifact com.safenet:hasp:jar:1 from/to dev-builder (http
://dev-builder/maven2): Checksum validation failed, no checksums available from the repository -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
[ERROR]
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn <goals> -rf :license
c:\dev\shunra\Application\Builder\build\vcat> 
```

我不知道它有什么问题。md5 和 sha1 文件是使用 md5sum 和 sha1sum 实用程序的 cygwin 端口创建的。尽管如此，Maven 仍报告错误的校验和。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T21:05:58.543

我来到这里寻找相同的答案。在花了几个小时试图弄清楚之后，我终于发现发生这种情况的原因有两个：

1.  md5sum 和 shasum 创建的校验和并不是 maven 正在寻找的
2.  您需要所有文件的校验和。

所以基本上 javaworld.com 上的教程是完全或至少部分错误的。

那么答案是什么：

1.  在您的命令上使用`-DcreateChecksum=true`参数。`mvn install:install-file`
2.  重命名`maven-metadata-local`生成的文件以删除`local`零件。

我决定我会经常这样做，我会创建一个 bash 脚本来自动化这个过程，也许你会发现它也很有用。

我设计了下面的脚本以在临时目录中运行整个过程，然后压缩结果，然后您可以将其上传到您的自定义存储库。

```
#! /bin/bash

USAGE(){
    println "Usage: `basename $0` -g GroupId -a ArtifactId  -f file [-voh] args\n\n";

    println "Options:";
    println "   h   Print usage";
    println "   v   Version (Defaults to 1.0)";
    println "   o   Output zip file name (Defaults to GroupId.ArtifactId.zip)";

}
println(){

    echo "$1";
}

VERSION="1.0";

# Parse command line options.
while getopts hv:o:g:a:f: OPT; do
    case "$OPT" in
        h)
            USAGE
            exit 0
            ;;
        v)
          VERSION=$OPTARG;
            ;;
    g)
          GROUP_ID=$OPTARG;
            ;;
    a)
          ARTIFACT_ID=$OPTARG;
            ;;
    f)
            INPUT_FILE=$OPTARG
            ;;
        o)
            OUTPUT_FILE=$OPTARG
            ;;
        \?)
            # getopts issues an error message
        echo "Error: " >&2;
            USAGE
            exit 1
            ;;
    esac
done

if [ -z "${OUTPUT_FILE}" ]; then
    OUTPUT_FILE="$GROUP_ID.$ARTIFACT_ID.zip";
fi

# Remove the switches we parsed above.
shift `expr $OPTIND - 1`

if [ -z "${ARTIFACT_ID}" ]; then
    echo "Error: You must specify an artifact id."
fi

if [ -z "${GROUP_ID}" ]; then
    echo "Error: You must specify an group id."
fi

if [ -z "${INPUT_FILE}" ]; then
    echo "Error: You must specify an group id."
fi

if [ ! -f "${INPUT_FILE}" ];
then
     echo "Error: Input file '$INPUT_FILE' does not exist."
fi

# Create a temp directory which we will use as our 'local repository'
TEMPDIR=$(mktemp -dt "build-maven-dep.XXXXXXX")

TEMPDIR_SUB="$GROUP_ID.$ARTIFACT_ID";
TEMP_REPO_LOC="$TEMPDIR/$TEMPDIR_SUB";
mkdir -p $TEMP_REPO_LOC;

mvn install:install-file -DlocalRepositoryPath=$TEMP_REPO_LOC -DgroupId=$GROUP_ID -DartifactId=$ARTIFACT_ID -Dversion=$VERSION -Dfile=$INPUT_FILE -Dpackaging=jar -DgeneratePom=true -DcreateChecksum=true

CUR_DIR=$(pwd);

# Enter the temp repository we created which is now populated.
cd $TEMP_REPO_LOC;

PACKAGE_STRUC="$GROUP_ID.$ARTIFACT_ID";

# Dive down into directory structure until we get to the *.xml files.
IFS='. ' read -ra ADDR <<< $PACKAGE_STRUC
for i in "${ADDR[@]}"; do
   println "Moving into: $i";
   cd $i;
   println "Now  in $(pwd)";
done

# Rename the files to what maven expects.
mv maven-metadata-local.xml maven-metadata.xml
mv maven-metadata-local.xml.md5 maven-metadata.xml.md5 
mv maven-metadata-local.xml.sha1 maven-metadata.xml.sha1

# Zip up our results.
cd $TEMP_REPO_LOC;
cd ..;
zip -r $OUTPUT_FILE $TEMPDIR_SUB
mv $OUTPUT_FILE $CUR_DIR

# Return back to our original directory and remove the temp directory
cd $CUR_DIR;
rm -Rf $TEMPDIR;

# EOF 
```

假设您想为您的自定义存储库打包 myjar.jar：

```
./bundle-for-remote.sh -g com.mygroup -a myJar -f myJar.jar 
```

这将在您当前名为 com.mygroup.myJar.zip 的目录中创建一个包含所有组件的 .zip。

干杯，

凯西

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T06:09:49.570

根据您上面粘贴的内容，我在您的存储库中看不到 com.shunra:license:jar:0.0.1 。尝试将其安装到您的存储库中。或者某个maven可以找到它。

虽然错误说“没有可用的校验和信息”，但我认为它真正想说的是“我什至找不到它”

另外..如果您是喜欢走捷径的人之一，则始终可以通过删除**<checksumPolicy>fail</checksumPolicy>来跳过校验和验证**

# gmail - 撰写新电子邮件时的 Gmail 上下文小工具触发器

> ID：14350732
> 
> 赞同：1
> 
> 时间：2013-01-16T03:01:47.090
> 
> 标签：gmail, gmail-contextual-gadgets

当用户点击“COMPOSE”时，我应该如何触发 Gmail 上下文小工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T09:26:08.447

“在撰写电子邮件或提交电子邮件时，既不能触发上下文小工具，也不能在提交电子邮件时触发它。它只能在用户选择从他的收件箱或发送的邮件中打开电子邮件时触发。”

[从这里](http://productforums.google.com/forum/#!topic/gmail/VDrVtTtcVDA)复制

# javascript - 为什么我的 Bootstrap Carousel 没有缩放？

> ID：14350733
> 
> 赞同：0
> 
> 时间：2013-01-16T03:01:51.363
> 
> 标签：javascript, html, twitter-bootstrap, carousel

我已经查找了一些关于此的信息并找到了一些答案，但是当我将它应用于我的代码时，什么也没有发生。当我调整窗口大小时，轮播不会调整大小，而是在右侧被切断。关于如何使其正确扩展的任何想法？

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Title</title>
    <!-- Bootstrap -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
    $(document).ready(function(){
        $('.carousel').carousel({
          interval: 3000
        });
    });
    </script>
  </head>

<body>
    <div class="container">
        <div id="myCarousel" class="carousel slide">
            <!-- Carousel items -->
            <div class="carousel-inner">
            <div class="active item"><img src="img/guy.png" alt="Wedge Tire"></div>
            <div class="item"><img src="img/front.png" alt="Wedge Tire"></div>
            <div class="item"><img src="img/fleet.png" alt="Wedge Tire"></div>
            <div class="item"><img src="img/inside.png" alt="Wedge Tire"></div>
            <div class="item"><img src="img/more_tires.png" alt="Wedge Tire"></div>
            <div class="item"><img src="img/tires.png" alt="Wedge Tire"></div>
            <div class="item"><img src="img/truck.png" alt="Wedge Tire"></div>
            <div class="item"><img src="img/trucks.png" alt="Wedge Tire"></div>
            <div class="item"><img src="img/warehouse.png" alt="Wedge Tire"></div>
        </div>
        <!-- Carousel nav -->
        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div>

    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
    </div><!--CONTAINER-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:32:57.397

验证了我的上述评论。`<link href="css/bootstrap-responsive.css" rel="stylesheet">`需要去追求`<link href="css/bootstrap.min.css" rel="stylesheet">`。

# java - 如果在同一事务中删除实体，EM Find 的行为会有所不同

> ID：14350739
> 
> 赞同：0
> 
> 时间：2013-01-16T03:03:05.523
> 
> 标签：java, hibernate, entitymanager

`find`在以下两种情况下，Hibernate EntityManager 方法的行为似乎有所不同：

情况 1 - 事务开始之前数据库中不存在实体。在交易中，`find`实体返回`null`。

案例 2 - 实体在事务之前存在于数据库中。在事务中，实体是`remove`'d，然后是`find`相同的键 throws `EntityNotFoundException`。

这是预期的行为吗？我需要在它`flush`之前做一个`find`它的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T20:41:10.537

当找不到实体时，`find`方法 in `EntityManager`throws是出乎意料的。[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#find%28java.lang.Class,%20java.lang.Object%29)很清楚：`EntityNotFoundException`

> **返回：**
> 找到的实体实例；如果实体不存在，则返回 null

此错误已在[HHH-7861](https://hibernate.onjira.com/browse/HHH-7861)中报告。它已在 4.1.10 中修复，尚未发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:23:08.650

好的，回答我问题的第二部分，似乎在 case 2和 the`flush`之间的a使它的行为与 case 1 相同。也就是说，只是返回而不抛出异常（这是我们想要的，作为异常触发回滚）。`remove``find``find``null`

**任何能告诉我为什么**`find`应该表现不同的人都会得到答案。

# jquery - Jquery treeview 节点在 ajax 调用后不会切换

> ID：14350742
> 
> 赞同：0
> 
> 时间：2013-01-16T03:03:43.653
> 
> 标签：jquery, asp.net-mvc, razor

我的视图中有两个对话框。这些对话框中的每一个都有 ajax 命令，例如第一个执行 a `POST`，第二个执行 a `LOAD`。

问题是在我从对话框 1 中的复选框列表中选择并点击 UpdatePage 按钮后，我的模型更新得很好。但是，包含带有另一个 checbobox 列表/节点的树视图的第二个对话框根本不会切换。但它确实保留了以前的状态：先前选择的复选框已选中，但根本不会切换。

以下函数创建对话框 1，并且在成功完成此对话框中的 post 命令后，第二个对话框和其中的树视图将不会切换。

```
function initDailog() {

        RunDialog = $("#runDatestreeview").dialog({ closeOnEscape: true, stack: false, autoOpen: true,
            modal: false, resizable: true, draggable: true, title: 'Select Run Dates to Auto-Populate Form Fields & Test Exceptions:',
            width: 600, height: 500, position: 'center',
            open: function (type, data) {
            },
            buttons: { UpdatePage: function () {
                //storing the value of treeview selections in dialog box 2
                var originalContent = $("#treeview").html();
                $.post(runDatesUrl,
              $("#form").serialize(),
               function (data) {
                   $("#runDatestreeview").remove();
                   //removing the div which contains the treeview
                   $("#treeview").remove();
                   $("#testExceptiontreeview").remove();
                   $("#main").html(data);
                  //setting back the value of the div which contains the treeview 
                   $("#treeview").html(originalContent);
               }, "html");
            },
                Cancel: function () {
                    $(this).dialog("close");
                                      }
            }
        });

        RunDialog.closest("div.ui-dialog").appendTo("#form");
    } 
```

在对话框 2 中定义的 Treeview，在其单独的 JS 文件中：

```
$("#errorCodes ul").treeview({
collapsed: true,
prerendered: false
}); 
```

包含树视图的 div 的 HTML：

```
<div id="treeview" title="Dialog Title" style="font-size: 10px; font-weight: normal;
    overflow: scroll; width: 800px; height: 450px; display: none;">
    <div id="errorCodes">
        @Html.RenderTree(CacheHelper.ErrorCodes(), ec => ec.Name, ec => ec.Children.ToList(), ec => (ec.ID).ToString(), null, "e")
    </div>
    <div id="inputReps" style="display: none;">
    </div>
</div 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:22:59.910

我对此进行了尝试，如果您存储它`.html()`，然后再次添加它，再次重新绑定插件，状态会被**记住**。

我使用了为您的最后一个问题创建的小提琴中的代码并稍微更新了它。

* * *

[**DEMO**](http://jsfiddle.net/LVUGk/) - 存储 HTML、删除树、添加新树、设置 HTML 和重新绑定树视图

* * *

在上面的演示中，我在加载时绑定树视图，折叠/展开树视图，然后点击`store/remove/attach`按钮。之后，树看起来和以前一样，折叠/展开/切换仍然有效。

单击该`store/remove/attach`按钮时将执行以下操作：

*   `ul`存储作为树视图的元素的 HTML
*   移除`ul`元素
*   重新添加一个新`ul`元素
*   将原始 HTML 添加到新的`ul`
*   重新绑定`ul`到treeview插件

它记住状态，如果树被折叠，它呈现折叠并展开它呈现展开。

除了默认的封闭元素（文件 3），因为`close`该类将在第一次呈现时重新应用。

除此之外，它看起来还可以。

* * *

### 来自 DEMO 的代码

* * *

*HTML*

```
<div id="treeviewcontrol"> <a href="#"> collapse </a><a href="#"> expand </a><a href="#"> toggle </a>

</div>
<ul id="tree" class="filetree">
  <li><span class="folder">Folder 1</span>

    <ul>
      <li><span class="file">Item 1.1</span>

      </li>
    </ul>
  </li>
  <li><span class="folder">Folder 2</span>

    <ul>
      <li><span class="folder">Subfolder 2.1</span>

        <ul id="folder21">
          <li><span class="file">File 2.1.1</span>

          </li>
          <li><span class="file">File 2.1.2</span>

          </li>
        </ul>
      </li>
      <li><span class="file">File 2.2</span>

      </li>
    </ul>
  </li>
  <li class="closed"><span class="folder">Folder 3 (closed at start)</span>

    <ul>
      <li><span class="file">File 3.1</span>

      </li>
    </ul>
  </li>
  <li><span class="file">File 4</span>

  </li>
</ul>
<button id="cloneTree" type="button">Store/Remove/Attach Tree</button> 
```

*脚本*

```
$("#tree").treeview({
  control: "#treeviewcontrol",
  prerendered: false
});

$("#cloneTree").click(function () {
  var $tree = $("#tree");
  var originalHtml = $tree.html();

  $tree.remove();

  var newBrowser = $('<ul id="tree" class="filetree"></ul>')

  newBrowser.html(originalHtml);
  $("body").append(newBrowser);

  $("#tree").treeview({
    control: "#treeviewcontrol",
    prerendered: false
  });
}); 
```

*CSS*

```
.treeview, .treeview ul {
  padding: 0;
  margin: 0;
  list-style: none;
}
.treeview ul {
  background-color: white;
  margin-top: 4px;
}
.treeview .hitarea {
  background: url(images/treeview-default.gif) -64px -25px no-repeat;
  height: 16px;
  width: 16px;
  margin-left: -16px;
  float: left;
  cursor: pointer;
}
/* fix for IE6 */
 * html .hitarea {
  display: inline;
  float:none;
}
.treeview li {
  margin: 0;
  padding: 3px 0pt 3px 16px;
}
.treeview a.selected {
  background-color: #eee;
}
#treecontrol {
  margin: 1em 0;
  display: none;
}
.treeview .hover {
  color: red;
  cursor: pointer;
}
.treeview li {
  background: url(images/treeview-default-line.gif) 0 0 no-repeat;
}
.treeview li.collapsable, .treeview li.expandable {
  background-position: 0 -176px;
}
.treeview .expandable-hitarea {
  background-position: -80px -3px;
}
.treeview li.last {
  background-position: 0 -1766px
}
.treeview li.lastCollapsable, .treeview li.lastExpandable {
  background-image: url(images/treeview-default.gif);
}
.treeview li.lastCollapsable {
  background-position: 0 -111px
}
.treeview li.lastExpandable {
  background-position: -32px -67px
}
.treeview div.lastCollapsable-hitarea, .treeview div.lastExpandable-hitarea {
  background-position: 0;
}
.treeview-red li {
  background-image: url(images/treeview-red-line.gif);
}
.treeview-red .hitarea, .treeview-red li.lastCollapsable, .treeview-red li.lastExpandable {
  background-image: url(images/treeview-red.gif);
}
.treeview-black li {
  background-image: url(images/treeview-black-line.gif);
}
.treeview-black .hitarea, .treeview-black li.lastCollapsable, .treeview-black li.lastExpandable {
  background-image: url(images/treeview-black.gif);
}
.treeview-gray li {
  background-image: url(images/treeview-gray-line.gif);
}
.treeview-gray .hitarea, .treeview-gray li.lastCollapsable, .treeview-gray li.lastExpandable {
  background-image: url(images/treeview-gray.gif);
}
.treeview-famfamfam li {
  background-image: url(images/treeview-famfamfam-line.gif);
}
.treeview-famfamfam .hitarea, .treeview-famfamfam li.lastCollapsable, .treeview-famfamfam li.lastExpandable {
  background-image: url(images/treeview-famfamfam.gif);
}
.treeview .placeholder {
  background: url(images/ajax-loader.gif) 0 0 no-repeat;
  height: 16px;
  width: 16px;
  display: block;
}
.filetree li {
  padding: 3px 0 2px 16px;
}
.filetree span.folder, .filetree span.file {
  padding: 1px 0 1px 16px;
  display: block;
}
.filetree span.folder {
  background: url(images/folder.gif) 0 0 no-repeat;
}
.filetree li.expandable span.folder {
  background: url(images/folder-closed.gif) 0 0 no-repeat;
}
.filetree span.file {
  background: url(images/file.gif) 0 0 no-repeat;
} 
```

# java - 以编程方式修改 Java 源代码中的注解

> ID：14350743
> 
> 赞同：0
> 
> 时间：2013-01-16T03:03:46.337
> 
> 标签：java, static-analysis

我正在寻找一种方法来分析 Java 代码并以编程方式修改它们，

例如，代码可能是这样的：

```
@FindBy(id = "login")    
WebElement btnLogin;

@FindBy(xpath = "//div/a")    
List<WebElement> aNodes; 
```

我希望检查@FindBy注释的每个字段，并将注释@FindBy更改为@Synchronized。

那是：

```
@Synchronized
WebElement btnLogin;

@Synchronized
List<WebElement> aNodes; 
```

与我发现的类似问题不同（他们使用 javassist 或 ASM 修改字节码），这些注释将在运行时被删除，所以我只能在源代码级别而不是在字节码级别。

到目前为止，我找到[了 qdox](http://qdox.codehaus.org/usage.html)，但它似乎只能分析代码而不能修改它。

我试图自己编写正则表达式来解决它，但这似乎是一个太大的项目。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:21:28.750

这个的正则表达式应该很简单

匹配任何以开头的行

```
"^@FindBy" 
```

或者，如果您担心奇怪（但有效）的语法（@FindBy(blah) protected void ..）

```
"^@FindBy(.*)" 
```

也就是说，您也可以使用您最喜欢的 IDE 手动进行搜索和替换（Eclipse、IntelliJ 甚至 emacs 应该能够在所有文件中执行此操作），因为您似乎是静态执行此操作

# gwt - 大气中覆盖的广播（对象消息，GwtAtmosphereResource 资源）方法，GWT 不起作用

> ID：14350746
> 
> 赞同：0
> 
> 时间：2013-01-16T03:04:27.993
> 
> 标签：gwt, atmosphere

我们正在尝试处理一个场景，当用户退出房间时，我们使用 MetaBroadcaster 向所有房间发送消息。我们通过覆盖 AtmosphereGwtHandler 的广播方法来实现此功能。

在开发模式下测试时该功能很好，但是当我们在Jetty8生产模式下测试时，通过日志告诉覆盖方法是无效的，永远不会被调用。

所以任何人都知道它有什么问题，或者我们对此功能有更好的解决方案。这是我们的代码片段：

```
public class ChatHandler extends AtmosphereGwtHandler { 
    ...
    @Override
    public void broadcast(Object message, GwtAtmosphereResource resource) {

        MsgType msgtype=((ChatMessage)message).getMsgtype();
        if(msgtype==MsgType.Broad){
            MetaBroadcaster.getDefault().broadcastTo(((ChatMessage)message).getChanel(), message);
            System.out.println("Doing to all room);
        }else{
            super.broadcast(message, resource);
            System.out.println("Doing to myself);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:38:27.537

无法就所提供的信息给出答案。

你在哪里配置了你的处理程序？web.xml 或大气.xml

你在使用 Meteor/Atmosphere 什么 servlet？什么版本的氛围？

# less - 更少的@arguments 线性梯度（逗号）

> ID：14350749
> 
> 赞同：3
> 
> 时间：2013-01-16T03:05:24.633
> 
> 标签：less

在[他们的网站上](http://lesscss.org/)，他们举了一个如何使用的例子`@arguments`：

```
.box-shadow (@x: 0, @y: 0, @blur: 1px, @color: #000) {
  box-shadow: @arguments;
  -moz-box-shadow: @arguments;
  -webkit-box-shadow: @arguments;
}
.box-shadow(2px, 5px); 
```

结果是：

```
box-shadow: 2px 5px 1px #000;
  -moz-box-shadow: 2px 5px 1px #000;
  -webkit-box-shadow: 2px 5px 1px #000; 
```

它似乎只接受所有参数并用空格分隔它们。我实际上希望用逗号分隔的参数用于`linear-gradient`：

```
background: linear-gradient(top, @arg1, @arg2, @arg3...); 
```

这可能用更少的钱吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:50:44.780

受@Allan 回答的启发，我不得不使用以下方法将@arguments 传递给线性梯度函数：

```
.linear-gradient-multi( ... ) {
   background-image: -webkit-linear-gradient( ~`"@{arguments}".slice(1,-1)` );
   ...
} 
```

只有这样我才能用百分比和变量调用 mixin：

```
.linear-gradient-multi(left, #CCC 0%, #DDD @percent, #FFF @percent + 1, #FFF 100%); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T09:17:45.607

你可以做这样的事情

```
.mixin(...) {
  filter: gradient( ~`@{arguments}.join(",")` );
}

test {
 .mixin("x1","x2","x3")
} 
```

您应该使用反引号来运行一些 javascript。但这意味着参数数组中的所有元素都应该是有效的 javascript 变量，这就是为什么在调用 mixin 时应该将所有参数括在引号中以使其成为 javascript 字符串。上面的代码将被编译为：

```
test {
 filter: gradient(x1,2,3);
} 
```

# ruby-on-rails - 在任何源中都找不到 rake-10.0.3 (Bundler::GemNotFound)

> ID：14350755
> 
> 赞同：3
> 
> 时间：2013-01-16T03:05:59.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano, passenger

> **可能重复：**
> [在任何来源中都找不到 rake-10.0.3](https://stackoverflow.com/questions/14169828/could-not-find-rake-10-0-3-in-any-of-the-sources)

我一直在尝试使用 capistrano 将 rails 3 应用程序部署到 bluehost。并弹出此错误 `Could not find rake-10.0.3 in any of the sources (Bundler::GemNotFound)`

我已经`rake 10.0.3`安装了。这是错误日志

```
0   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/spec_set.rb    90  in `materialize'
1   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/spec_set.rb    83  in `map!'
2   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/spec_set.rb    83  in `materialize'
3   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/definition.rb  113 in `specs'
4   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/definition.rb  158 in `specs_for'
5   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/definition.rb  147 in `requested_specs'
6   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/environment.rb 23  in `requested_specs'
7   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler/runtime.rb 11  in `setup'
8   /home/myaccount/.rvm/gems/ruby-1.9.3-p362/gems/bundler-1.2.3/lib/bundler.rb 116 in `setup' 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:48:07.257

似乎您没有使用正确的 gem 集和 rvm。因此，即使您可以看到 gem 已安装，它也不会被 rvm 拾取。前段时间我写了这篇关于如何[使用 rvm 创建 gem 集的博文](http://keepthingssimple.tumblr.com/post/11274588229/using-rvm-to-keep-things-simple)

尝试创建具有 rake 10.0.3 的 rvm gem 集，然后尝试再次运行 bundle install。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T00:01:35.530

将以下内容添加到您的 Gemfile 可能会解决问题：

```
source 'https://rubygems.org' 
```

出于某种原因，我自己删除了它。

# bash - bash中文件名中的递增数字

> ID：14350756
> 
> 赞同：3
> 
> 时间：2013-01-16T03:06:04.020
> 
> 标签：bash

我正在尝试获取文件列表并重命名它们，在它们的文件名中增加一个数字。该目录包含一堆文件，名称如下：

```
senreg1.csv      senreg2.csv              senreg10.csv
senreg1.csv.1    senreg2.csv.1            senreg10.csv.1
senreg1.csv.2    senreg2.csv.2            senreg10.csv.2
senreg1.csv.3    senreg2.csv.3      ...   senreg10.csv.3
senreg1.csv.4    senreg2.csv.4            senreg10.csv.4
...              ...                      ...
senreg1.csv.10   senreg2.csv.10           senreg10.csv.10
senreg1.csv.11   senreg2.csv.11           senreg10.csv.11 
```

我想增加所有以 3 或更高结尾的文件，这样我就可以插入一个后缀为 3 的新文件，所以我创建了一个名为“renames.txt”的文本文件，其中包含我想要重命名的所有文件名。然后，我尝试使用 for 循环来进行实际的重命名。

```
for f in `cat renames.txt`
do
    newfile=`echo $f | awk 'BEGIN { FS = "."}; { printf $1 "." $2 "." $3+1 }'`
    mv "$f" "$newfile"
done 
```

我想最终得到类似的东西：

```
senreg1.csv      senreg2.csv              senreg10.csv
senreg1.csv.1    senreg2.csv.1            senreg10.csv.1
senreg1.csv.2    senreg2.csv.2            senreg10.csv.2
senreg1.csv.4    senreg2.csv.4      ...   senreg10.csv.4
senreg1.csv.5    senreg2.csv.5            senreg10.csv.5
...              ...                      ...
senreg1.csv.11   senreg2.csv.11           senreg10.csv.11
senreg1.csv.12   senreg2.csv.12           senreg10.csv.12 
```

但相反，我得到：

```
senreg1.csv      senreg2.csv              senreg10.csv
senreg1.csv.1    senreg2.csv.1            senreg10.csv.1
senreg1.csv.2    senreg2.csv.2     ...    senreg10.csv.2
senreg1.csv.12   senreg2.csv.12           senreg10.csv.12 
```

senregX.csv.12 的内容与原始的 senregX.csv.3 相同。希望这个解释是有道理的。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:22:55.560

您需要反向重命名文件。

```
11 -> 12
10 -> 11
9 -> 10 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:00:36.177

这个脚本做你想做的事，没有临时文件，只是为了有多种解决方案：

```
#!/bin/bash
for file in $(ls -1 *[0-9]) # list files ending with a number
do 
  # get file name and id
  name=$(echo $file | sed 's/\(.*\)\.\([0-9]\+\)$/\1/g');
  id=$(echo $file | sed 's/.*\.\([0-9]\+\)$/\1/g');

  if [ $id -ge 3 ]
  then
    ((id += 1))

    # We need to backup the files because we may override some files
    cp  $file  "_$name.$id"
  fi
done

# remove old files
for file in $(ls -1 [!_]*[0-9])
do 
  id=$(echo $file | sed 's/.*\.\([0-9]\+\)$/\1/g');

  if [ $id -ge 3 ]
  then
    rm $file;
  fi
done

# finish
for file in $(ls -1 _*[0-9])
do 
  name=$(echo $file | tr -d '_');
  mv "$file" "$name";
done 
```

# node.js - gruntjs 0.4 registerHelper 已弃用，语法修复？

> ID：14350759
> 
> 赞同：2
> 
> 时间：2013-01-16T03:06:19.400
> 
> 标签：node.js, build, module, task, gruntjs

我一直在为 grunt 0.3 运行以下任务并移至 0.4，并且 registerHelper 已被弃用。使用新 API 实现此功能的正确方法是什么。

```
module.exports = function(grunt) {
'use strict';

var fs = require('fs');
var path = require('path');
var crypto = require('crypto');

grunt.registerTask('wpversion', 'Set the versions in scripts.php for CSS/JS', function() {
  var scriptsPhp = 'src/lib/include_functions/scripts.php';

  // Hash the CSS
  var hashCss = grunt.helper('md5', 'dist/assets/css/main.min.css');

  // Hash the JS
  var hashJs = grunt.helper('md5', 'dist/assets/scripts/scripts.min.js');

  // Update scripts.php to reference the new versions
  var regexCss = /(wp_enqueue_style\('main_css',(\s*[^,]+,){2})\s*[^\)]+\);/;
  var regexJs = /(wp_register_script\('main_js',(\s*[^,]+,){2})\s*[^,]+,\s*([^\)]+)\);/;

  var content = grunt.file.read(scriptsPhp);
  content = content.replace(regexCss, "\$1 '" + hashCss + "');");
  content = content.replace(regexJs, "\$1 '" + hashJs + "', " + "\$3);");
  grunt.file.write(scriptsPhp, content);
  grunt.log.writeln('"' + scriptsPhp + '" updated with new CSS/JS versions.');
});

/**
* The 'md5' helper is a basic wrapper around crypto.createHash
*/
grunt.registerHelper('md5', function(filepath) {
  var hash = crypto.createHash('md5');
  hash.update(fs.readFileSync(filepath));
  grunt.log.write('Versioning ' + filepath + '...').ok();
  return hash.digest('hex');
});
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T14:27:24.563

让它成为一个正常的功能。如果它很大，请将其放在一个单独的文件中并要求它。如果它可用于其他任务，请将其发布为节点模块，以便其他任务可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:46:14.900

不推荐使用 grunt-helpers，取而代之的是 node 的`require`. 有一个项目可以帮助使用遗留助手：

[https://github.com/gruntjs/grunt-lib-legacyhelpers](https://github.com/gruntjs/grunt-lib-legacyhelpers)

# excel - Excel 上的文本和数字格式

> ID：14350760
> 
> 赞同：1
> 
> 时间：2013-01-16T03:06:30.217
> 
> 标签：excel, vba, excel-formula

![在此处输入图像描述](../Images/e39f17856791e595ffc27cd09d31b518.png)

我有疑问，例如，当我想在 excel 上比较 a1= 1.3 b1= 3 和 a2= 1.3 b2= 2 时 `=IF(a1>a2,"Yes",IF(a1=a2,IF(b1>b2,"Yes","No"),"no"))`

第一次没问题，但后来我将值从 b1 =1 更改为“否”，然后我将其更改回 b1=3，但仍然是“否”

我认为它与单元格中的格式有关。

另一个问题是，如果我使用 1.3.1 与 1.3.1.2 相比，它没有任何问题，但是当我只使用 1.3（一位小数）时，它总是有问题

很难解释你应该尝试在 xx 和 xxx 之间进行比较，如果你有另一个很好的 VBA 代码来比较版本号

它就像 1 个小数点 excel 视为数字，但许多小数点 excel 视为文本

我该如何解决这个问题（我尝试更改为文本格式，但在您更改单元格中的值后它会工作 1 次，它会返回错误。）

由于我的英语很差。让它更清楚 `"How do i make x.x see as text so that i can compare with x.x.x :) "`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:39:16.420

这是您可能想要查看的文章/帖子。我对您的问题的第一印象是您可能正在尝试进行版本号比较。文本中点分隔符的长度和数量可能非常重要。现在请检查一下，

[http://www.dbforums.com/microsoft-excel/1670840-compare-version-numbers-return-highest-value.html](http://www.dbforums.com/microsoft-excel/1670840-compare-version-numbers-return-highest-value.html)

否则你也可以试试`log`：

=A1*10^(4-INT(LOG(A1)))

或者对尾随`.`点进行替换，第二个文本肯定会变成小数：

例如，1.3.4 将是 1.34，而 1.3.4.1.3 将是 1.3413

1.2.5.6 将是 125.6，1.2.4.6.1 将是 124.61

PS：不是机前。将为您提供我基于点分隔符拆分和比较的另一个代码。

使用函数编辑：这会将两个版本号与任意数量的点进行比较，将其视为字符串/文本。然而，在 1.3.1 和 1.21.1 的情况下，这将 1.21.1 作为最高数字。

```
Option Explicit

Function versionNumberComparison(ByRef rng1 As Range, ByRef rng2 As Range) As String
    Dim i As Integer
    Dim arrVersion1 As Variant, arrVersion2 As Variant
    Dim strVer1 As String, strVer2 As String
    Dim bool2 As Boolean, bool1 As Boolean
    Dim x As Long, y As Long

    Application.EnableEvents = False
    If Not IsEmpty(rng1.Value) Then
        strVer1 = rng1.Value
        arrVersion1 = Split(rng1.Value, ".")
    Else
        versionNumberComparison = "Version number empty"
        GoTo Zoo
    End If
    If Not IsEmpty(rng2.Value) Then
        strVer2 = rng2.Value
        arrVersion2 = Split(rng2.Value, ".")
    Else
        versionNumberComparison = "Version number empty"
        GoTo Zoo
    End If

    If UBound(arrVersion1) > UBound(arrVersion2) Then
        x = UBound(arrVersion1)
        y = UBound(arrVersion2)
    ElseIf UBound(arrVersion1) < UBound(arrVersion2) Then
        x = UBound(arrVersion2)
        y = UBound(arrVersion1)
    Else
        x = UBound(arrVersion1)
        y = x
    End If

    i = 0
        While i <= y
            If IsNumeric(arrVersion1(i)) And IsNumeric(arrVersion2(i)) Then
                    If CInt(Trim(arrVersion1(i))) = CInt(Trim(arrVersion2(i))) Then
                        If i = y Then
                            If x <> y Then
                                If Len(strVer1) > Len(strVer2) Then
                                    bool1 = True
                                    bool2 = False
                                    GoTo PrintOut
                                Else
                                    bool2 = True
                                    bool1 = False
                                    GoTo PrintOut
                                End If
                            End If
                        End If
                            bool1 = False
                            bool2 = False
                    ElseIf CInt(Trim(arrVersion1(i))) > CInt(Trim(arrVersion2(i))) Then
                        bool1 = True
                        bool2 = False
                        GoTo PrintOut
                    Else
                        bool2 = True
                        bool1 = False
                        GoTo PrintOut
                    End If
            Else
                versionNumberComparison = "Enter Valid version numbers"
                GoTo Zoo
            End If
            i = i + 1
        Wend

PrintOut:

    If bool1 Then
        versionNumberComparison = strVer1
    ElseIf bool2 Then
        versionNumberComparison = strVer2
    Else
        versionNumberComparison = "Both the same"
    End If

Zoo:
Application.EnableEvents = True
End Function 
```

输出：

![在此处输入图像描述](../Images/3b9bc72305c424e9e296aecaba7cf6ac.png)

# java - 运算符 && 不能应用于布尔值、字符

> ID：14350770
> 
> 赞同：0
> 
> 时间：2013-01-16T03:07:43.610
> 
> 标签：java

所以我正在做一个 ModelViewController tic-tac-toe 游戏作业，我正在尝试检查板在位置 xpos、ypos 是否为空，但我收到一个错误消息

> 运算符 && 不能应用于布尔值、字符

为什么会发生这种情况，我该如何更改它以使其正常工作？

```
double xpos,ypos,xr,yr;
char[][] position = {{' ',' ',' '},
             {' ',' ',' '},
             {' ',' ',' '}};

public boolean isEmpty(int xpos, int ypos){
    int pos=xpos+3*ypos;
    boolean isPosWithinRange = pos>=0 && pos<9 ;
    return isPosWithinRange && position[xpos][ypos]=' ';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:10:23.757

更正您的代码，使用 == 进行比较

```
return isPosWithinRange && position[xpos][ypos]==' '; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T03:30:00.700

比较时使用 ==...'=' 将分配它不会比较的值...

# c# - 从列表框/列表中删除多个选定对象

> ID：14350771
> 
> 赞同：1
> 
> 时间：2013-01-16T03:07:47.963
> 
> 标签：c#

这是我第一次使用这个网站，所以希望我能正确地提出我的问题。

我正在尝试制作一个具有 RentalCar 对象的 BindingList 的程序。现在我试图让自己一次移除多辆汽车。

这是我目前用于删除按钮的代码。

```
 private void buttonRemoveRental_Click(object sender, EventArgs e)

        {
        try

        {

            //List<RentalCar> tempList = new List<RentalCar>(); (This was here for another solution i am trying)

            int index = listBoxRental.SelectedIndex;
            for (int i = rentalList_.Count - 1; i >= 0; i--)
            {
                if (listBoxRental.SelectedIndices.Contains(i))
                {
                    rentalList_.RemoveAt(i);
                }

            }
        }
        catch(Exception)
        {
            MessageBox.Show("Please select a vehicle to remove from the list");
        } 
```

但有时一个项目会留在我无法删除的列表框中。每次如果我尝试删除最后一个项目，它就会从列表中删除每个项目。

我正在尝试的另一个解决方案是创建另一个列表，它将存储从我的rentalList_中选择的车辆，然后循环并从rentalList_中删除tempList中的项目但我不知道该怎么做，因为我正在存储对象.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:16:51.787

当您从同一个列表中循环和删除项目时，您正在删除错误索引处的错误项目，因为删除项目后索引将被重置。

尝试这个

```
List<RentalCar> tempList = new List<RentalCar>();
for (int i = 0; i <=rentalList.Count - 1; i++)
{
    if (!listBoxRental.SelectedIndices.Contains(i))
    {
       tempList.Add(rentalList[i]);
    }
} 
```

然后你可以绑定`tempList`到`ListBox`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T04:22:14.877

试试这个解决方案。它对我很好。

```
 private void buttonRemoveRental_Click(object sender, EventArgs e)
    {
       var selectedItems= listBoxRental.SelectedItems.Cast<String>().ToList();
       foreach (var item in selectedItems)
            listBoxRental.Items.Remove(item);
    } 
```

# linux - 加载共享库 libstdc++.so.5 时出错

> ID：14350773
> 
> 赞同：7
> 
> 时间：2013-01-16T03:07:58.367
> 
> 标签：linux, ubuntu, shared-libraries, libstdc++

我正在尝试运行一个名为 GlimmerHMM 的程序，但是当我尝试调用该程序时出现此错误：

```
./glimmerhmm_linux
./glimmerhmm_linux: error while loading shared libraries: libstdc++.so.5: cannot open shared object file: No such file or directory 
```

所以我尝试下载和安装：

```
sudo apt-get install libstdc++5
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
html2text libmail-sendmail-perl libsys-hostname-long-perl
Use 'apt-get autoremove' to remove them.
The following NEW packages will be installed: libstdc++5
0 upgraded, 1 newly installed, 0 to remove and 183 not upgraded.
Need to get 255 kB of archives.
After this operation, 1,155 kB of additional disk space will be used.
Get:1 http://archive.ubuntu.com/ubuntu/ precise/universe libstdc++5 amd64 1:3.3.6-25ubuntu1 [255 kB]
Fetched 255 kB in 4s (54.0 kB/s)                     
Selecting previously unselected package libstdc++5.
(Reading database ... 176303 files and directories currently installed.)
Unpacking libstdc++5 (from .../libstdc++5_1%3a3.3.6-25ubuntu1_amd64.deb) ...
Setting up libstdc++5 (1:3.3.6-25ubuntu1) ...
Processing triggers for libc-bin ...
ldconfig deferred processing now taking place 
```

但是我在调​​用程序时仍然遇到同样的错误。提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T03:26:17.993

很有可能，如果您运行的程序老得需要`libstdc++`v5，它也是一个 32 位应用程序，因此它不能使用`libstdc++5`您安装的（64 位）。安装`ia32-libs`软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-28T07:57:00.303

我试图让一个遗留应用程序工作，并注意到使用 Ubuntu 20.04 需要添加 i386 架构，然后才能安装 i386 库。

```
sudo dpkg --add-architecture i386
sudo apt update
sudo apt install libstdc++5:i386

# libstdc++.so.5 shows up.
ls -la /usr/lib/i386-linux-gnu/libstdc++.so.5
lrwxrwxrwx 1 root root 18 Apr 11  2020 /usr/lib/i386-linux-gnu/libstdc++.so.5 -> libstdc++.so.5.0.7 
```

# matlab - 使用 UIControl 控制 matlab 中多个子图的 x 范围

> ID：14350779
> 
> 赞同：0
> 
> 时间：2013-01-16T03:09:14.450
> 
> 标签：matlab, user-interface, animation

我正在尝试创建一个滑动窗口（带有一个滑块）来查看多个子图，每个子图都是一个很长的时间序列。

```
S=['set(gca,''xlim'',get(gcbo,''value'')+[0 ' num2str(chunkDuration) '])'];
h=uicontrol('style','slider','units','normalized','position',Newpos,...
    'callback',S,'min',0,'max',xmax-chunkDuration); 
```

如前所述，这只会使底部的情节移动。我明白那是因为我设置了`gca`. 但是，更改`gcf`为`gca`将无济于事，因为这会尝试设置`xlim`of 图形而不是其子级。

当我尝试

```
 kids = get(gcf,'Children')
 S=['set(kids,''xlim'',get(gcbo,''value'')+[0 ' num2str(chunkDuration) '])']; 
```

我得到错误：

```
 ??? Undefined function or variable 'kids'.
 ??? Error while evaluating uicontrol Callback 
```

那么，为什么上述方法不起作用？

即使[在方法发生重大变化](https://stackoverflow.com/questions/14359231/too-many-input-arguments-to-uicontrol-callback)之后，问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:38:34.150

Somewhere in your code you try to use a variable named `subplot_handles`. The error arises because this variable is undefined at the time you try to use it.

## **Update**:

Is there a reason why you are saving your `set` commands as `String`s? I suspect that its completely un-needed.

When you create your subplots try storing the handles to the axes created by the subplot objects.

```
ax(1) = subplot(311);
ax(2) = subplot(312);
ax(3) = subplot(313); 
```

Later on you can set the limits for all `subplot`s using:

```
set(ax, 'XLim', get(gcbo,'value') + [0  num2str(chunkDuration)] ); 
```

# hadoop - HDFS 使用 libhdfs 附加到 0.23.5

> ID：14350781
> 
> 赞同：2
> 
> 时间：2013-01-16T03:09:32.853
> 
> 标签：hadoop, append, hdfs

我正在尝试附加到版本 0.23.5 上的 hdfs 文件。我在 hdfs-site.xml 中将属性 dfs.support.append 设置为 true。调用 hdfsWrite() 说不支持追加时出现以下错误。

`Exception in thread "main" java.io.IOException: Not supported at org.apache.hadoop.fs.ChecksumFileSystem.append(ChecksumFileSystem.java:345) at org.apache.hadoop.fs.FileSystem.append(FileSystem.java:1046) Call to org.apache.hadoop.conf.FileSystem::append((Lorg/apache/hadoop/fs/Path;)Lorg/apache/hadoop/fs/FSDataOutputStream;) failed!`

我检查了过去关于在 hdfs 中追加的文献。看起来 append 应该在 0.23.5 中工作。

我能够插入和阅读。问题是当我尝试打开 O_APPEND 并写入文件时。这是示例代码 -

```
int append(char *filepath, char *data, int size)
{
   hdfsFS fs = hdfsConnect("default", 0);
   int openFlags = O_WRONLY | O_APPEND;
   hdfsFile fdData = hdfsOpenFile(fs, filepath, openFlags, 0, 0, 0);
   if (!fdData) 
     return -1;
   if (hdfsWrite(fs, fdData, data, size) == -1)
     return -1;
   hdfsCloseFile(fs, fdData);

   return 0;
} 
```

我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-22T21:21:59.327

FSDataOutputStream 不支持 append 方法。以下是相关来源：

```
 public FSDataOutputStream append(Path f, int bufferSize, Progressable progress) throws IOException {
    throw new IOException("Not supported");
  } 
```

您会注意到它的超类 FileSystem 指出 append 是一个可选方法。

# jakarta-ee - 错误 404：javax.servlet.UnavailableException

> ID：14350787
> 
> 赞同：2
> 
> 时间：2013-01-16T03:10:31.137
> 
> 标签：jakarta-ee, websphere-8

我在 Websphere8 上部署了一个示例 Web 应用程序，但出现以下错误：

错误 404：javax.servlet.UnavailableException：

SRVE0203E: Servlet [TestServlet]：找到了 org.test.servlet.TestServlet，但缺少另一个必需的类。SRVE0206E: 此错误通常意味着 servlet 最初是使用服务器无法定位的类编译的。SRVE0187E: 检查您的类路径以确保存在 servlet 所需的所有类。SRVE0210I: 可以通过仅使用应用程序的运行时类路径中的类重新编译 servlet 来调试此问题。

我检查了类路径，看起来没问题，但我仍然收到此错误。

提前致谢

# php - 按索引对 stdClass 对象进行排序

> ID：14350788
> 
> 赞同：2
> 
> 时间：2013-01-16T03:10:34.957
> 
> 标签：php, arrays, sorting, object

我在 stackoverflow 上看到了一百万个类似的问题，但我找不到的一个是处理对象的实际索引值的排序。

我有一个标准对象，我给它一个值（$vid）来排序，而不是它自己增量填充。

```
foreach ($array_videos as $v) {
            $govideo = $this->staff_model->get_video($v->vid);
            $goforit[$v->vid] = $vimeo->call('vimeo.videos.getInfo', array('video_id' => $govideo->video_id));
} 
```

当我这样做时，我收到以下输出：

```
[33] => stdClass Object ...
[12] => stdClass Object ...
[55] => stdClass Object ...
[61] => stdClass Object ... 
```

我想按对象索引、ASC 或 DESC 对这个对象数组进行排序。例如：

```
[61] => stdClass Object ...
[55] => stdClass Object ...
[33] => stdClass Object ...
[12] => stdClass Object ... 
```

我已经尝试过 ksort 和一些不同的 usort 函数。似乎无法解决这个问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T03:13:27.170

[ksort()](http://php.net/manual/en/function.ksort.php)可以解决问题：

```
ksort($array_videos); 
```

ksort 将对数组中的键进行排序`ASC`。[您可以使用array_reverse()](http://php.net/manual/en/function.array-reverse.php)快速反转顺序：

```
$array_videos = array_reverse($array_videos); 
```

对于您的真实世界示例，您可以执行以下操作之一：

```
foreach (ksort($array_videos) as $v) 
```

或者

```
foreach (array_reverse(ksort($array_videos)) as $v) 
```

**更好！** 要将排序反转`DESC`为根据[Jim](https://stackoverflow.com/users/505722/jim)的建议，您可以使用[krsort()](https://stackoverflow.com/users/505722/jim)：

```
ksort($array_videos); //ASC
krsort($array_videos); //DESC 
```

# c# - NAudio 峰值音量计

> ID：14350790
> 
> 赞同：3
> 
> 时间：2013-01-16T03:10:50.610
> 
> 标签：c#, naudio

我正在尝试使用 NAudio 编写峰值音量计。[我的代码与http://channel9.msdn.com/coding4fun/articles/NET-Voice-Recorder](http://channel9.msdn.com/coding4fun/articles/NET-Voice-Recorder)非常相似，但我的代码和链接的 Voice Recorder 项目都存在问题。

当播放恒定频率和音量的声音时，音量表最初以合理的电平开始，但随后衰减到非常小的值。我不确定为什么会这样，因为 NAudioDemo 中的峰值音量计不这样做。我试图在我的程序中复制来自 NAudioDemo 的代码，但我无法找到包含峰值音量计代码的代码文件。

有人可以指导我使用另一种解决方案来创建峰值音量计或帮助我确定为什么我的解决方案（以及链接中提供的解决方案）都不起作用吗？

```
public MainWindow()
    {
        int waveInDevices = WaveIn.DeviceCount;
        for (int waveInDevice = 0; waveInDevice < waveInDevices; waveInDevice++)
        {
            WaveInCapabilities deviceInfo = WaveIn.GetCapabilities(waveInDevice);
            Console.WriteLine("Device {0}: {1}, {2} channels",
                waveInDevice, deviceInfo.ProductName, deviceInfo.Channels);

            WaveIn waveIn = new WaveIn();
            waveIn.DeviceNumber = 0; //TODO: Let the user choose which device, this comes from the device numbers above
            waveIn.DataAvailable += waveIn_DataAvailable;
            int sampleRate = SAMPLE_RATE; // 8 kHz
            int channels = 1; // mono
            waveIn.WaveFormat = new WaveFormat(sampleRate, channels);
            waveIn.StartRecording();
        }
    }

    void waveIn_DataAvailable(object sender, WaveInEventArgs e)
    {
        for (int index = 0; index < e.BytesRecorded; index += 2)
        {
            short sample = (short)((e.Buffer[index + 1] << 8) |
                                    e.Buffer[index + 0]);
            float sample32 = sample / 32768f;
            ProcessSample(sample32);
        }           

    }

    void ProcessSample(float sample1)
    {
        samplenumber += 1;

        if (sample1 > maxval)
        {
            maxval = sample1;
        }

        if (sample1 < minval)
        {
            minval = sample1;
        }

        //Run updateView every few loops

        if (samplenumber > (double)SAMPLE_RATE / DISPLAY_UPDATE_RATE)
        {
            samplenumber = 0;
            updateView(); //needs to be fast!
        }
    }

    void updateView()
    {
        Console.WriteLine(maxval);
        Console.WriteLine(minval);
        progressBar1.Value = (maxval - minval)*50;

        maxval = 0;
        minval = 0;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T09:27:42.477

那篇文章中发生的所有事情都是它在一个小间隔（例如 20 毫秒）内找到最大音频峰值，然后将其绘制在分贝标度上。要找到峰值，请检查间隔中每个样本的值并选择最大值（这是`SampleAggregator`班级正在做的事情）。要转换为分贝，取最大值的以 10 为底的对数，然后乘以 10。所以 0dB 是最响亮的，低于 -96dB 的任何东西实际上都是静音。（实际上，回顾文章，我认为我什至都懒得转换成分贝标度，我可能应该这样做）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-05T07:00:56.327

这是我从输出设备获得峰值的小解决方案。我正在使用 NAudio 版本 1.7.0.15

```
 public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();

        MMDeviceEnumerator enumerator = new MMDeviceEnumerator();

        var devices = enumerator.EnumerateAudioEndPoints(DataFlow.All, DeviceState.Active);
        comboboxDevices.Items.AddRange(devices.ToArray());
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (comboboxDevices.SelectedItem != null)
        {
            var device = (MMDevice)comboboxDevices.SelectedItem;
            progressBar1.Value = (int)(Math.Round(device.AudioMeterInformation.MasterPeakValue * 100));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-12T11:05:33.460

尝试使用 MasterPeakValue 获取级别似乎比仅调用该方法更复杂，这破坏了它的简单性。

我不小心意识到你必须打开设备进行记录，即使你不使用传入的数据。由于您正在启动 WaveIn，因此 MasterPeakValue 应该返回一个非 0 值。

一个简单的替代方法，仅用于测试，是打开系统录音设备的属性（右键单击系统音量图标并选择“录音设备”）。

（在 2 台不同的计算机上测试。）

# json - Backbone JS 将 json 属性解析为集合的模型

> ID：14350794
> 
> 赞同：9
> 
> 时间：2013-01-16T03:11:15.707
> 
> 标签：json, parsing, backbone.js, collections

我无法将 json 解析为模型。

这是JSON：

```
[
{
    "name": "Douglas Crockford",
    "email": "example@gmail.com",
    "_id": "50f5f5d4014e045f000002",
    "__v": 0,
    "items": [
        {
            "cena1": "Cena1",
            "cena2": "Cena2",
            "cena3": Cena3,
            "cena4": "Cena4",
            "cena5": "Cena5",
            "cena6": Cena6,
            "_id": "50ee3e782a3d30fe020001"
        }
    ]
} 
```

]

我需要一个模型来拥有这样的“项目”属性：

```
cena = new Model({ 
           cena1: "Cena1", 
           cena2: "Cena2",
           ... 
}); 
```

我试过的：

```
var cenaCollection = new Backbone.Collection.extend({
   model: Cenas,
   url: '/orders',

   parse: function (response) {
      return this.model = response.items;
   }

}); 
```

然后我创建集合的新实例并获取，但我得到“response.items”总是“未定义”：|

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T03:15:22.913

该`parse`函数应返回要在模型上设置的属性哈希（请参阅[此处的文档](http://backbonejs.org/#Model-parse)）。所以你只需要：

```
parse: function (response) {
   return response[0].items;
} 
```

# symfony - 在学说 2 中获取自定义字段

> ID：14350795
> 
> 赞同：3
> 
> 时间：2013-01-16T03:11:23.230
> 
> 标签：symfony, doctrine, doctrine-orm

我有一个实体如下：

```
private $username;
private $password;
private $createdAt; //datetime 
```

我想在学说中运行查询以获取具有现有字段和另一个字段的实体（在这种情况下，一列显示 createdAt 和当前日期时间的差异（以分钟为单位）。在 sql 中，我将运行如下查询：

```
 select username, password, createdAt,TIMESTAMPDIFF(MINUTE , created_at, NOW()) AS minutes from users 
```

在学说中，我获取了如下实体：

```
 $user = $em->getRepository('TestBundle:Users'); 
```

如何从学说中获取自定义字段分钟？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T06:54:04.473

您应该检查[ResultSetMapping](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)：

并检查如何添加[标量结果](http://docs.doctrine-project.org/en/latest/reference/native-sql.html#scalar-results)

```
$rsm = new ResultSetMapping;
$rsm->addEntityResult('Users', 'u');
$rsm->addFieldResult('u', 'id', 'id');
$rsm->addFieldResult('u', 'password', 'password');
$rsm->addScalarResult('minutes', 'minutes');

$query = $this->_em->createNativeQuery('select username, password, TIMESTAMPDIFF(MINUTE , created_at, NOW()) AS minutes', $rsm);

$users = $query->getResult(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T07:23:02.280

您可以在您的实体中设置功能，例如

```
function GetDifference() {
     return getField1() - getField2()
} 
```

然后每个对象都可以使用

编辑：这很容易。就像任何其他功能一样

```
function getDateDifference() {
return abs(strtotime($createdAT) - strtotime($now));
} 
```

# jquery - Jquery AutoComplete 在选择时设置隐藏输入

> ID：14350801
> 
> 赞同：0
> 
> 时间：2013-01-16T03:12:16.720
> 
> 标签：jquery, input, autocomplete, undefined, hidden

我需要您在以下问题上的帮助。

我正在尝试使用 jQuery AutoComplete 函数设置一个 Input Hidden 值，但该值没有被传递（ui.item.bank_id 未定义）。

Javascript代码：

```
$("#reg_bank").autocomplete({  
    //define callback to format results  
    source: function(req, add){  
        //pass request to server  
      $.getJSON("/get_banks.php?callback=?", { q:req.term }, function(data) {  
        //create array for response objects  
        var suggestions = [];  
        //process response  
        $.each(data, function(i, val){  
            suggestions.push(val.bank_name+"("+val.bank_id+")");  
         });  
         //pass array to callback  
         add(suggestions);  
      });  
    },  
    select: function(e, ui) {  
        alert(ui.item.bank_id);
        //$('#reg_bank_id').val(ui.item.bank_id); 
    },   
    change: function() {   
    }  
  }); 
```

由于某种原因，我无法弄清楚，`ui.item.bank_id is undefined`.

我的 JSON 输出类似这样的内容： `[{"bank_id":"341","bank_name":"Ita\u00fa Unibanco S.A."}]`

如果您需要任何其他信息，请告诉我。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:23:57.400

我认为你应该调整源功能如下

```
source: function(req, add){  
    //pass request to server  
  $.getJSON("/get_banks.php?callback=?", { q:req.term }, function(data) {  
    //create array for response objects  
    var suggestions = [];  
    //process response  
    $.each(data, function(i, val){  
        suggestions.push({'label':val.bank_name, 'value':val.bank_id});  
     });  
     //pass array to callback  
     add(suggestions);  
     // now suggestions is arrays of object with 'label' and 'value' properties
  });  
} 
```

并选择功能如下

```
select: function(e, ui) {  
  alert(ui.item.value); // will get bank_id
  alert(ui.item.label); // will get bank_name
} 
```

# header - 定位页面

> ID：14350802
> 
> 赞同：0
> 
> 时间：2013-01-16T03:12:21.310
> 
> 标签：header, position, centering, css-position

我想创建一个类似于 facebook where position:fixed 的标题。当你缩小整个页面中心时，当我放大标题时，标题也会拉伸。当我使用位置：固定和放大时，由于窗口空间不足，某些内容会消失。

```
<div id="header_line" ></div>
<div id="header">
  <div id="heading_name" ><a href="home.php">Home</a> </div>

<div id="heading_name" style="left:28%;">Advertisement Board</div>
<div id="heading_name" style="left:46%;">Advertise</div>
<div id="heading_name"  style="left:60%;">Sign In</div>
<div id="heading_name"  style="left:76%;">About Us</div>

</div>

<style>

#header_line{
    position:fixed;
    top:0%;
    left:0%;
    width:1370px;
    height:7px;
    z-index:20;
    background-color:#F60;
}
#header{
    position:fixed;
    left: 0px;
    z-index:20;
    top: 7px;
    width:1370px;
    height: 30px;
    background-color:#003;
    border-bottom:thick;
    border-bottom-color:#000;
    box-shadow:2px 5px 5px 1px #033;

    }

</style> 
```

# php - 如何使用另一个文件中的 PHP 类？

> ID：14350803
> 
> 赞同：53
> 
> 时间：2013-01-16T03:12:28.780
> 
> 标签：php

假设我有两个文件**class.php**和**page.php**

**类.php**

```
<?php 
    class IUarts {
        function __construct() {
            $this->data = get_data('mydata');
        }
    }
?> 
```

这是一个非常基本的例子，但假设我想使用：

```
$vars = new IUarts(); 
print($vars->data); 
```

在我的 page.php 文件中；我该怎么做呢？如果我这样做`include(LIB.'/class.php');`，它会对我大喊大叫并给我`Fatal error: Cannot redeclare class IUarts in /dir/class.php on line 4`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-16T03:20:48.640

您可以使用[`include`](http://php.net/manual/en/function.include.php)/[`include_once`](http://php.net/manual/en/function.include_once.php)或[`require`](http://php.net/manual/en/function.require.php)/[`require_once`](http://php.net/manual/en/function.require_once.php)

```
require_once('class.php'); 
```

* * *

或者， 通过添加到使用[自动加载](http://php.net/manual/en/language.oop5.autoload.php)`page.php`

```
<?php 
function my_autoloader($class) {
    include 'classes/' . $class . '.class.php';
}

spl_autoload_register('my_autoloader');

$vars = new IUarts(); 
print($vars->data);    
?> 
```

它还可以将该`__autoload`函数添加到您包含在每个文件中的库中，例如`utils.php`.

还有这篇文章有一个很好的不同的方法。

[高效的 PHP 自动加载和命名策略](https://stackoverflow.com/questions/791899/efficient-php-auto-loading-and-naming-strategies)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-16T03:14:47.170

在这种情况下，您似乎已经在某处包含了该文件。但是对于类文件，您应该真正“包含”它们`require_once`以避免这种情况；如果文件已经包含，它将不包含该文件。（并且您通常应该使用`require[_once]`, not `include[_once]`，不同之处在于`require`如果文件不存在会导致致命错误，而不是仅仅发出警告。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-16T03:14:29.747

改为使用`include_once`。
这个错误意味着你已经包含了这个文件。

`include_once(LIB.'/class.php');`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-30T04:43:49.617

采用`include("class.classname.php");`

并且类应该使用`<?php //code ?> not <? //code ?>`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-25T04:59:23.860

采用

```
require_once(__DIR__.'/_path/_of/_filename.php'); 
```

这也将有助于从不同的文件夹中导入文件。尝试`extends`继承该文件中的类并重用函数的方法

# java - 如何在我的 Android 应用程序中显示数学公式？

> ID：14350812
> 
> 赞同：7
> 
> 时间：2013-01-16T03:13:30.407
> 
> 标签：java, javascript, android, android-layout, math

我正在尝试将数学公式放入我的 android 应用程序中，以便用户可以看到公式的样子，即距离公式。有什么方法可以在不导入第三方软件的情况下做到这一点？或者这是唯一的方法？先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T03:35:13.320

如果您决定可以使用库，则可以查看[此问题](https://stackoverflow.com/questions/5820740/typesetting-math-functions-in-latex-to-render-in-android-application)中引用的[JLaTeXMath](http://forge.scilab.org/index.php/p/jlatexmath/) ，或者您可以尝试[此处](https://stackoverflow.com/questions/8359032/how-to-practically-display-math-formula-in-android)提到的[jqMath](http://mathscribe.com/author/jqmath.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T04:03:44.327

如果您需要根据用户输入动态创建方程式，您可能需要一个库。

您可以在 HTML 中完成一些格式化并使用[`Html.fromHtml`](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)，但您会受到限制。主要用于下标和上标。例如，

```
Html.fromHtml("A<sup>2</sup>+B<sup>2</sup> = C<sup>2</sup>") 
```

给出毕达哥拉斯方程的渲染.

如果您不需要动态生成方程式，而是有一组您希望能够显示未修改的参考方程式，您始终可以将它们预渲染为 PNG 并将它们显示为图像。有[LaTeX](http://www.latex-project.org/)的插件，以及各种在线方程编辑器，例如[这个](http://www.codecogs.com/latex/eqneditor.php)，将为您呈现 PNG。

# macos - 在 Mac OS X 10.8 上使用 gstreamer 编译 OpenCV 2.4.3-rc

> ID：14350813
> 
> 赞同：0
> 
> 时间：2013-01-16T03:13:41.167
> 
> 标签：macos, opencv, compilation, gstreamer, ip-camera

我可以在没有 gstreamer 的情况下在我的 Mac 上编译 OpenCV。

`cmake`问题是，即使我通过 Macports 安装了以下库，gstreamer 似乎也没有被选中：

```
 ffmpeg-devel                   @20121205       multimedia/ffmpeg-devel
    ...
    gst-ffmpeg                     @0.10.13        gnome/gst-ffmpeg
    gst-plugins-bad                @0.10.23        gnome/gst-plugins-bad
    gst-plugins-base               @0.10.36        gnome/gst-plugins-base
    gst-plugins-gl                 @0.10.3         gnome/gst-plugins-gl
    gst-plugins-good               @0.10.31        gnome/gst-plugins-good
    gst-plugins-math               @0.1.0          science/gst-plugins-math
    gstreamer                      @0.10.36        gnome/gstreamer 
```

我的 cmake 生成日志如下所示（大部分省略）：

```
 --   Video I/O:
    --     DC1394 1.x:                  NO
    --     DC1394 2.x:                  YES (ver 2.1.3)
    --     FFMPEG:                      YES
    --       codec:                     YES (ver Unknown)
    --       format:                    YES (ver Unknown)
    --       util:                      YES (ver Unknown)
    --       swscale:                   YES (ver Unknown)
    --       gentoo-style:              YES
    --     OpenNI:                      NO
    --     OpenNI PrimeSensor Modules:  NO
    --     PvAPI:                       NO
    --     GigEVisionSDK:               NO
    --     QuickTime:                   NO
    --     QTKit:                       YES 
```

如您所见，`gstreamer`生成的日志中不存在。

我正在尝试将 OpenCV 用于 Apexis IP 摄像机，该摄像机通过 HTTP 提供视频源。使用 Gstreamer，我可以在 Ubuntu 12.10 服务器版上构建——并且 IP 摄像机可以工作——但我希望能够在我的 Mac 上进行 GUI 会话。

欢迎任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:34:32.050

感谢@yiding，我发现了这个问题。

出于某种原因，OpenCV 将 Mac 上的 gstreamer 列入黑名单。我可以通过简单地更改 cmake 配置 ( `CMakeLists.txt`) 将其取消黑名单。

改变

```
OCV_OPTION(WITH_GSTREAMER "Include Gstreamer support" ON IF (UNIX AND NOT APPLE AND NOT ANDROID) ) 
```

至

```
OCV_OPTION(WITH_GSTREAMER "Include Gstreamer support" ON IF (UNIX AND NOT ANDROID) ) 
```

然后，我重新安装了所有依赖项，并`ffmpeg`使用. . 就是这样。`gstreamer``make -j8``sudo make install`

现在我可以使用 OpenCV 将 IP 摄像机流式传输到我的 Mac！

*编辑*：对于上下文，这是 OpenCV 2.4.3-rc 和 Mac OS X 10.8。

# cocoa-touch - 离开编辑模式时，为什么我的 UITableView 没有为所有行设置相同的动画？

> ID：14350814
> 
> 赞同：4
> 
> 时间：2013-01-16T03:13:41.790
> 
> 标签：cocoa-touch, uitableview

这类似于我之前的问题，但我之前的问题实际上已经得到了一些回答，这是它的一种延伸。

我有一个`UITableView`我正在进入和退出编辑模式的东西。在编辑模式下，我会显示一个带有插入图标的附加行。我的数据源中的所有其他行都显示有删除图标。

出于某种原因，离开编辑模式时，我的数据源中的最后一行的动画效果与所有其他行不同。根据行为，这对我来说似乎是一些明显的代码问题，但我似乎无法修复它。我制作了一个动画 GIF 来向您展示我在说什么：

[![](../Images/fed0715b79ca8f0dca8e1bb61a1b85b1.png)](https://i.imgur.com/Nz39i.gif)

有谁知道为什么会发生这种情况？它总是来自我的数据源的最后一行。自定义插入行的图标动画效果很好。这不是一大堆代码，但最容易一次查看所有代码，所以我会将您链接到 Github 上的确切代码：

[https://github.com/ryancole/pound-client/blob/master/pound-client/controllers/ChannelListViewController.m#L100](https://github.com/ryancole/pound-client/blob/master/pound-client/controllers/ChannelListViewController.m#L100)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T01:54:36.547

似乎问题不在于 tableView 或与之相关的任何代码。似乎是由于拉动刷新视图而引起的。不幸的是，我没有该组件的代码。我试过你没有拉刷新，它工作得很好。所以请移除拉动刷新，看看发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T23:02:26.070

动画是正确的。您正在插入/删除最后一行`-setEditing:animated:`，所以有两种动画正在进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T21:56:18.893

```
#import <UIKit/UIKit.h>

@interface zViewController : UIViewController

@property (weak, nonatomic) IBOutlet UITableView *table;
@end

#import "zViewController.h"

@interface zViewController ()
@property (nonatomic, retain) NSArray* data;
@end

@implementation zViewController{
    BOOL _editing;
}
@synthesize data = _data;
@synthesize table = _table;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        _editing = NO;
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStyleBordered target:self action:@selector(editButtonWasPressed:)];
    [self loadRecords];
}

- (void)editButtonWasPressed:(id)sender {
    self.navigationItem.leftBarButtonItem  = [[UIBarButtonItem alloc] initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(saveButtonWasPressed:)];
    [self setEditing:YES animated:YES];
}

- (void)saveButtonWasPressed:(id)sender {
    self.navigationItem.leftBarButtonItem  = [[UIBarButtonItem alloc] initWithTitle:@"Edit" style:UIBarButtonItemStyleBordered target:self action:@selector(editButtonWasPressed:)];
    [self setEditing:NO animated:YES];
}
- (void)setEditing:(BOOL)editing animated:(BOOL)animated {
    _editing = editing;

    if (editing == YES) {
        [self.table insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:self.data.count -1 inSection:0]] withRowAnimation:UITableViewRowAnimationNone];
    }

    [super setEditing:editing animated:animated];
    [self.table setEditing:editing animated:animated];

    if (editing == NO) {
        [self.table deleteRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:self.data.count inSection:0]] withRowAnimation:UITableViewRowAnimationNone];
    }
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    [self fetchChannels];
}

- (void)fetchChannels {
    [self.table reloadData];
}

-(void) loadRecords{
    self.data = @[@"Record 1", @"Record 2", @"Record 3"];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath {
    return (indexPath.row == self.data.count)? UITableViewCellEditingStyleInsert : UITableViewCellEditingStyleDelete;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _editing? self.data.count + 1 : self.data.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.textLabel.text = self.data[indexPath.row];
    return cell;
}
@end 
```

# perl - Perl根据下一个值计算当前值

> ID：14350818
> 
> 赞同：0
> 
> 时间：2013-01-16T03:14:24.393
> 
> 标签：perl, text, linear-algebra

目前我正在学习 Perl 和 gnuplot。我想知道如何根据下一个值计算某个值。例如，我有一个文本文件包括：

```
#ID(X) Y
1 1
3 9
5 11 
```

输出也应该显示未知 ID 的值。所以，输出应该显示：

```
#ID(X) Y
1 1
2 5
3 9
4 10
5 11 
```

ID#2 的 Y 基于以下公式：((2-3)/(1-3))*1 + ((2-1)/(3-1))*9，即线性代数

```
Y2=((X2-X3)/(X1-X3))*Y1 + ((X2-X1)/(X3-X1)) * Y3 
```

ID#5 也是如此

目前我有这个代码，

```
 #! /usr/bin/perl -w
    use strict;

    my $prev_id = 0;
    my $prev_val = 0;
    my $next_id;
    my $next_val;

    while (<>)
    {
    my ($id, $val) = split;
    for (my $i = $prev_id + 1; $i < $next_id; $i++)
    {
    $val = (($id - $next_id) / ($prev_id - $next_id)) * $prev_val + (($id - $prev_id) / ($next_id - $prev_id)) * $next_val;
    printf ("%d %s\n", $i, $val);
    }
    printf ("%d %s\n", $id, $val);
    ($prev_val, $prev_id) = ($val, $id);
    ($next_val, $next_id) = ($prev_val, $prev_id);  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:52:15.243

鉴于您总是处理 1 的整数间距，您的公式似乎比我预期的要复杂。

您没有说是否要填补多个连续缺失值的空白，但让我们假设您想要。

您所做的是在第一行中读取，并说这是当前行，然后将其输出。现在你阅读下一行，如果它的 ID 不是预期的，你用简单的线性插值来填补空白......

伪代码

```
(currID, currY) = readline()
outputvals( currID, currY )

while lines remain do
    (nextID, nextY) = readline()
    gap = nextID - currID

    for i = 1 to gap
        id = currID + i
        y = currY + (nextY - currY) * i / gap
        outputvals( id, y )
    end

    (currID, currY) = (nextID, nextY)
end 
```

对不起，非 Perl 代码。只是我好久没用Perl了，一半的语法记不住了。=) 这里的概念很容易转化为代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:14:21.360

使用数组可能是要走的路。这也将使您的数据可用于进一步操作。

** 警告：不适用于 y 的多个连续缺失值；请参阅@paddy 的回答。

```
#!/usr/bin/perl
use strict;
use warnings;

my @coordinates;
while (<DATA>) {
    my ($x, $y) = split;
    $coordinates[$x] = $y;
}

# note that the for loop starts on index 1 here ...
for my $x (1 .. $#coordinates) {
    if (! $coordinates[$x]) {
        $coordinates[$x] = (($x - ($x + 1)) / (($x - 1) - ($x + 1)))
                         * $coordinates[$x - 1]
                         + (($x - ($x - 1)) / (($x + 1) - ($x - 1)))
                         * $coordinates[$x + 1];
    }

    print "$x - $coordinates[$x]\n";
}

__DATA__
1 1
3 9
5 11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T06:25:59.513

您表示您的问题是获得下一个值。关键不是向前看，而是向后看。

```
my $prev = get first value;
my ($prev_a, $prev_b) = parse($prev);

my $this = get second value;
my ($this_a, $this_b) = parse($this);

while ($next = get next value) {
   my ($next_a, $next_b) = parse($next);
   ...
   $prev = $this;  $prev_a = $this_a;  $prev_b = $this_b;  
   $this = $next;  $this_a = $next_a;  $this_b = $next_b;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-16T04:11:12.097

```
#! /usr/bin/perl -w
use strict;

my @in = (1,9,11);
my @out;

for (my $i = 0; $i<$#in; $i++) {

    my $j = $i*2;

    my $X1 = $i;
    my $X2 = $i+1;
    my $X3 = $i+2;

    my $Y1 = $in[$i];
    my $Y3 = $in[$i+1];

    my $Y2 = $Y1*(($X2-$X3)/($X1-$X3))
           + $Y3*(($X2-$X1)/($X3-$X1));

    $out[$j]   = $in[$i];
    $out[$j+1] = $Y2;
}

$out[$#in*2] = $in[$#in];
print (join " ",@out); 
```

# java - 在java中将Object []数组转换为int []数组？

> ID：14350822
> 
> 赞同：9
> 
> 时间：2013-01-16T03:14:43.190
> 
> 标签：java, arrays, object, integer

似乎没有简单的方法可以做到这一点，但这是我迄今为止所做的，如果有人可以纠正它以使其工作，那就太好了。在“newarray [e] = array [i].intValue();” 我收到一个错误“在“java.lang.Object”类型中找不到名为“intValue”的方法。” 帮助！

```
/*
Description: A game that displays digits 0-9 and asks the user for a number N.
 It then reverses the first N numbers of the sequence. It continues this until
 all of the numbers are in order.
 numbers

*/

import hsa.Console;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Arrays;

public class ReversalGame3test

{
    static Console c;

    public static void main (String[] args)
{
    c = new Console ();

    c.println ("3\. REVERSAL GAME");
    c.println ("");
    c.println ("Displayed below are the digits 0-9 in random order. You must then enter a");
    c.println ("number N after which the computer will reverse the first N numbers in the");
    c.println ("sequence. The goal of this game is to sort all of the numbers in the fewest");
    c.println ("number of reversals.");
    c.println (""); //introduction

    List numbers = new ArrayList ();
    numbers.add ("0");
    numbers.add ("1");
    numbers.add ("2");
    numbers.add ("3");
    numbers.add ("4");
    numbers.add ("5");
    numbers.add ("6");
    numbers.add ("7");
    numbers.add ("8");
    numbers.add ("9");
    Collections.shuffle (numbers);
    Object[] array = numbers.toArray (new String [10]); // declares + shuffles numbers and converts them to array

    c.print ("Random Order: ");
    for (int i = 0 ; i < 10 ; i++)
    {
        c.print ((array [i]) + " ");
    }
    c.println ("");

    boolean check = false;
    boolean check2 = false;
    String NS;
    int N = 0;
    int count = 0;
    int e = -1;
    int[] newarray = new int [10];

    //INPUT
    do
    {
        c.print ("Enter a number: ");
        NS = c.readString ();
        count += 1;

        check = isInteger (NS);
        if (check == true)
        {
            N = Integer.parseInt (NS);
            if (N < 1 || N > 10)
            {
                check = false;
                c.println ("ERROR - INPUT NOT VALID");
                c.println ("");
            }
            else
            {
                c.print ("Next Order: ");
                for (int i = N - 1 ; i > -1 ; i--)
                {
                    e += 1;
                    newarray [e] = array [i].intValue ();
                    c.print ((newarray [e]) + " ");
                }
                for (int i = N ; i < 10 ; i++)
                {
                    e += 1;
                    newarray [e] = array [i].intValue ();
                    c.print ((newarray [e]) + " ");
                }
                check2 = sorted (newarray);
            } // rearranges numbers if valid
        } // checks if N is valid number
    }
    while (check == false);
} // main method

public static boolean isInteger (String input)
{
    try
    {
        Integer.parseInt (input);
        return true;
    }
    catch (NumberFormatException nfe)
    {
        return false;
    }
} //isInteger method

public static boolean sorted (int array[])
{
    boolean isSorted = false;

    for (int i = 0 ; i < 10 ; i++)
    {
        if (array [i] < array [i + 1])
        {
            isSorted = true;
        }
        else if (array [i] > array [i + 1])
        {
            isSorted = true;
        }
        else
            isSorted = false;

        if (isSorted != true)
            return isSorted;
    }
    return isSorted;
} // sorted method 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T03:20:15.410

您可以使用[Integer.valueOf](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html)。

```
Integer.valueOf((String) array [i]) 
```

该类`Integer`有一个`valueOf`将字符串作为值并返回`int`值的方法，您可以使用它。`NumberFormatException`如果传递给它的字符串不是有效的整数值，它将抛出一个。

此外，如果您使用的是 java5 或更高版本，您可以尝试使用[泛型](http://docs.oracle.com/javase/tutorial/extra/generics/index.html)来使代码更具可读性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T03:20:26.443

您可以使用[Generics](http://docs.oracle.com/javase/tutorial/java/generics/)实现相同的功能，这会更容易。

```
List<Integer> numbers = new ArrayList<Integer> ();
Integer[] array = numbers.toArray (new Integer [10]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T04:02:50.317

试试 commons-lang

```
org.apache.commons.lang.ArrayUtils.toPrimitive(Integer[]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T03:19:56.487

您不能调用`.intValue()`an `Object`，因为`Object`该类缺少 method `intValue()`。

相反，您需要先将其`Object`转换为`Integer`类，如下所示：

```
newarray[e] = ((Integer)array[i]).intValue(); 
```

编辑：只是一个关于 StackOverflow 的有用提示 - 请将您的代码限制在相关的范围内！尽管有时需要大块的代码，但在这种情况下，它不是。它使问题看起来更好，并且一定会以这种方式得到更好的回答。

另外，请不要使用[作业](/questions/tagged/homework "显示标记为“作业”的问题")标签。它目前已被弃用，并且正在老化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-19T10:16:10.047

我知道这已经很晚了，但这是我的 2 美分！

```
int[] newArray=new int[objectArray.length];
Object[] objectArray = {1,2,3,4,5};

for(int i=0;i<objectArray.length();i++){
    b[i]=(int)objectArray[i];
} 
```

# c# - 聆听来自多个麦克风的音频

> ID：14350823
> 
> 赞同：1
> 
> 时间：2013-01-16T03:14:43.753
> 
> 标签：c#, audio, naudio, wave

我想编写一个程序，它可以从许多（比如 30 个）麦克风中获取音频。我可以更换连接的麦克风。并且可以收听所选的麦克风。我用谷歌搜索并对完美的 API 感到困惑。够`Wave`我用吗？`NAudio`是否也有并且可能很多。但哪个最适合我？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T03:18:27.613

如果您想一次录制来自多个麦克风的音频，您需要一个支持这么多通道的 API。

[ASIO](http://en.wikipedia.org/wiki/Audio_Stream_Input/Output)是一个不错的选择。具有许多通道的声音接口通常具有 ASIO 驱动程序。如果您需要将多个传统声卡组合到一个设备中，您可以使用[ASIO4All](http://www.asio4all.com/)，它也会尝试同步多个卡上的时钟。

Direct Audio 和[Windows Core Audio](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370784%28v=vs.85%29.aspx)也可能支持这么多通道，但我没有使用它们。

# objective-c - 使用交叉溶解呈现模态视图控制器不显示代码中添加的视图

> ID：14350832
> 
> 赞同：1
> 
> 时间：2013-01-16T03:15:46.960
> 
> 标签：objective-c, ipad, modalviewcontroller, uistoryboard, uistoryboardsegue

当我在我的视图故事板起源的根视图控制器上呈现模式视图控制器时，它会闪烁故事板视图，即使它已被更改。我的根视图控制器有一个明亮的绿色背景，顶部有一个大的白色子视图，其中包含一个绑定到 IBOutlet 的标签。在 UIViewController viewDidLoad 中，我添加了一个浅灰色、略微透明的 UIView，它作为 viewcontroller 视图的子视图覆盖整个视图。我还将标签文本设置为不同于情节提要布局的标签文本。

当我通过 segue 或通过 presentViewController:completion: 触发模式时，我看到的是标签上的浅灰色视图，然后在代码中添加的视图似乎变得透明并动画消失，并且情节提要布局的亮绿色出现并且然后模态视图交叉溶解。当我关闭第一个并在完成块中呈现第二个时，我看到交叉溶解为亮绿色，当添加的视图再次可见时弹出光，弹出亮绿色和十字-溶解在第二个视图控制器的视图中。

当我关闭第二个视图控制器时，我会看到交叉溶解为亮绿色，然后添加的浅灰色、半透明视图弹回可见。

***任何人都知道如何阻止交叉溶解显示代码中添加的视图下方的视图？***

如果您从 viewDidLoad 中添加的覆盖视图中删除不透明度，则此示例会变得更加不和谐。

[https://github.com/jonnolen/ios-cross-disolve-problem](https://github.com/jonnolen/ios-cross-disolve-problem)

代码片段和故事板布局：

![在此处输入图像描述](../Images/8d819beeb7b0033f65585739561c81b8.png)

```
@interface DTViewController (){
    BOOL hasShownSegue;
}

@end

@implementation DTViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIView * view = [UIView new];

    view.frame = self.view.bounds;
    view.backgroundColor = [UIColor colorWithWhite:.95 alpha:.7];

    NSLog(@"View Bounds: %@", NSStringFromCGRect(self.view.bounds));

    [self.view addSubview:view];
    self.label.text = @"Hello!";
}

-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
    if (!hasShownSegue){
        [self performSegueWithIdentifier:@"modal.1.segue" sender:self];
        hasShownSegue = YES;
    }
}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    DTCallbackViewController *vc = segue.destinationViewController;

    vc.completionCallback = ^{
        [self dismissViewControllerAnimated:YES completion:^{
            DTCallbackViewController * vc = [self.storyboard instantiateViewControllerWithIdentifier:@"vc.2"];

            vc.completionCallback = ^{
                [self dismissViewControllerAnimated:YES completion:nil];
            };

            [self presentViewController:vc animated:YES completion:nil];

        }];
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T17:04:04.317

想通了，我不是很喜欢它，但它有效：

我将所有可屏蔽的内容放入一个单独的视图中：

![在此处输入图像描述](../Images/1e54079208dc5924f001a21fe9a9b26d.png)

然后在我需要“屏蔽”该视图时隐藏该视图。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"View Bounds: %@", NSStringFromCGRect(self.view.bounds));
    self.label.text = @"Hello!";
    self.content.hidden = YES;
} 
```

然后动画按预期运行。但是，这只适用于不透明的蒙版（这是我需要的）。

# php - Wordpress/PHP/JQuery 验证错误？HTML 5 验证失败？

> ID：14350835
> 
> 赞同：1
> 
> 时间：2013-01-16T03:16:07.950
> 
> 标签：php, javascript, jquery, html, wordpress

我在 PHP 文件中有一个 HTML 表单，我正在尝试使用 Jquery 验证这个表单。令我沮丧的是，我无法在页面登顶之前验证表单，即刷新。此外，我使用了几个不同的插件，我没有收到任何类型的通知。这是表格：

```
<div id="contactRight">
<form method="post" action="form.php">
<input type="text" class="required" id="first" value="First*" ></input><br/>
<input type="Last Name" value="Last*" id="lastname"></input><br/>
<input type="text" value="Email*" id="email"></input><br/>
<textarea id="subject" id="subject">Subject*</textarea>
<input class="submit" type="submit" value="submit"></input>
</form> 
```

使用 bassistance 验证插件，它说您可以为您的输入提供一个值为“required”的类，从而导致验证插件启动。我对使此表单工作的尝试感到非常沮丧。更重要的是，使用 HTML 5 是灾难性的，我不会收到任何未填写任何输入字段的通知。我应该采取不同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:41:05.910

如果要使用 HTML5 的原生表单验证，请执行以下操作：

1.  对于需要值的输入字段，`required`在输入标签中添加属性
2.  对于检查电子邮件，输入标签应具有`type`“电子邮件”属性。
3.  对于其他类型的模式匹配，请使用`pattern`带有正则表达式的属性。

参考： [https ://blog.mozilla.org/webdev/2011/03/14/html5-form-validation-on-sumo/](https://blog.mozilla.org/webdev/2011/03/14/html5-form-validation-on-sumo/) [http://www.developer.nokia.com/Blogs/Code/2012/11/ 21/创建-a-custom-html5-form-validation/](http://www.developer.nokia.com/Blogs/Code/2012/11/21/creating-a-custom-html5-form-validation/)

顺便说一句，如果要禁用此本机表单验证，请`novalidate`在表单标记中添加属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:06:59.057

我发现了问题，我可以添加一个占位符标签，让我将值保持为空。我有值，所以验证器按预期工作。傻我。不过，我的下一个问题是，占位符标签是否适用于所有其他浏览器？

# c# - 如何在c#中使两个列表视图彼此同步滚动

> ID：14350836
> 
> 赞同：0
> 
> 时间：2013-01-16T03:16:11.097
> 
> 标签：c#, wpf, listviewitem, synchronize

我有 listview1 和 listview2，并且希望在滚动其中一个时，另一个也同步滚动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:24:44.233

`OnScroll()`在以下方法中尝试这样的事情`OnScrollListener`：

```
if (this.getScrollY() != otherList.getScrollY())
    otherList.setScrollY(this.getScrollY()); 
```

另一种方式，总是实现一个 AbsListView.OnScrollListener 是，当 ListView 滚动时，调用另一个 ListView 上的`OnScroll()`方法以同步到相同的位置。`OnScrollListener``SmoothScrollToPosition()`

[本文](http://www.devnewsgroups.net/windowsforms/t34807-no-message-listview-scroll.aspx)和[本文](http://www.codeproject.com/Articles/39244/Scroll-Synchronization)正在实现另一种方法，稍微复杂一点，包括创建自定义控件。

# php - 搜索建议不起作用

> ID：14350838
> 
> 赞同：0
> 
> 时间：2013-01-16T03:16:37.537
> 
> 标签：php, jquery, html

我有一个搜索建议代码，它是从我之前设计的一个网站中获取的。我将完整代码复制到我的新站点，但知道搜索建议由于某种原因不起作用！

请看我的代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<!--search suggestions-->
<script type="text/javascript">
function lookup(inputString) {
if(inputString.length == 0) 
{
$('#suggestions').hide();
}
else
{
$.post("suggest.php", {queryString: ""+inputString+""}, function(data){
if(data.length > 0) {
$('#suggestions').show();
$('#autoSuggestionsList').html(data);
}
});
}
} 
function fill(thisValue) {
$('#inputString').val(thisValue);
setTimeout("$('#suggestions').hide();", 200);
}
function outoffocus() {
setTimeout("$('#suggestions').hide();", 200);
}
</script> 
```

我的PHP：

```
<?php
if(isset($_POST['inputString']))
{ 
  $inputString = safe($_POST['inputString']);
  if(mb_strlen($inputString) > 0)
  {
     $query = $db->query("SELECT title FROM table WHERE title LIKE '$inputString%' LIMIT 5");
     if($db->num_rows($query) > 0) 
     {
        while($result = $db->fetch_array($query))
        {
           echo "<li onClick=\"fill('".$result['title']."');\"><a href='".$config['site_dir']."/".$result['title']."/'>".$result['title']."</a></li>";
        }
     }
     else
     {
        echo "NOTHING HERE GO AWAY";
     }
  } 
}
?> 
```

我已经测试了 PHP 文件和 SQL STATMENT。他们两个似乎都有效。

我认为问题在于 HTML 和 JQUERY

这是我的 HTML

```
<form id="search" action="{$url}/search.php" method="get"> 
<input type="text" name="search" id="inputString" onkeyup="lookup(this.value);" onblur="outoffocus()" onfocus="lookup(this.value);"/>
<input type="submit" value="&nbsp;" />
<div class="suggestionsBox" id="suggestions" >
 <div class="suggestionList" id="autoSuggestionsList">
&nbsp;
</div>
</div>
</form> 
```

在你回答之前你应该知道两件事：我有一个链接到Suggest.php的文件来连接到sql..所以这应该不是问题。我放在那里的查询与我在原始文件中的查询不完全相同，所以我可以告诉你问题不在 MYSQL 中。它在我给出的代码中的某个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:28:23.283

尝试更改以下功能：

```
function fill(thisValue) {
$('#inputString').val(thisValue);
setTimeout("$('#suggestions').hide();", 200);
}
function outoffocus() {
setTimeout("$('#suggestions').hide();", 200);
} 
```

至

```
function fill(thisValue) {
  $('#inputString').val(thisValue);
  setTimeout(function() {
    $('#suggestions').hide(); }, 200);
}
function outoffocus() {
  setTimeout(function() {
    $('#suggestions').hide();}, 200);
} 
```

# windows-phone-7 - 系统 OnTouch 事件中引发 ArgumentException

> ID：14350840
> 
> 赞同：1
> 
> 时间：2013-01-16T03:17:23.543
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone-8, windows-phone, windows-phone-7.1.1

我有一个简单的应用程序，上面有两页。第一页正常运行，我在页面上有一个导航到第二页的按钮。

但是，当我到达第二页时，每当我尝试触摸任何东西时，都会`OnTouch`触发事件并`ArgumentException`在`ListDictionaryInternal`

但是，页面上没有与此 OnTouch 事件交互的任何内容，因此我不确定是什么原因造成的。

导航到新页面的代码：

```
string page = "valid";
NavigationService.Navigate(
    new Uri("/Dialog.xaml?page=" + page,
    UriKind.Relative)
); 
```

崩溃页面的 XAML 非常简单：

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel Grid.Row="0" Margin="12,17,0,28">
        <TextBlock Name="AppName" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock Name="PageName" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle2Style}"/>
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <Button Click="CancelDownload_Click" Opacity="1.0" Content="Cancel REST Request!" Background="Blue" Foreground="White" BorderBrush="Black" FontWeight="Bold" BorderThickness="1" x:Name="CancelData" VerticalAlignment="Center" Margin="90,327,90,291" Height="150" Width="300" Visibility="Collapsed" />
    </Grid>
</Grid> 
```

什么可能导致 OnTouch 以这种方式失败？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:55:30.677

事实证明，你是我在与嵌套全景图交互时用来禁用 PivotItems 滚动的主页中的一个黑客。

导致错误的代码：

```
Touch.FrameReported += (s, e) =>
{
    if (e.GetPrimaryTouchPoint(MainItems).Action == TouchAction.Up)
    {
        MainItems.IsHitTestVisible = true;
    }
}; 
```

# python - django 预先计算和缓存视图

> ID：14350846
> 
> 赞同：6
> 
> 时间：2013-01-16T03:17:57.950
> 
> 标签：python, django

这可能是一个python问题。可以肯定的是，这是一个愚蠢的问题。

客户端请求计算密集型页面 [page-1] 并将最终请求第二个计算密集型页面 [page-2]，该页面可以在已知请求 page-1 的情况下计算。我不想在提供第 1 页之前计算每组数据，因为它会显着降低初始响应的性能。

我确实想在客户端读取第 1 页时计算第 2 页的值。客户端也可能单击一些按钮，这些按钮会导致提供不同视图的第 1 页数据的响应，但不需要进行密集计算。最终但不一定立即，客户会要求第 2 页，我希望能够以预渲染的响应进行响应。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T07:13:35.837

正如评论中提到的，听起来您需要使用异步后台任务来处理这个问题，将结果保存在[Django 低级缓存](https://docs.djangoproject.com/en/dev/topics/cache/?from=olddocs#the-low-level-cache-api)中。我个人会使用[芹菜](http://celeryproject.org)作为任务队列。

基本上，在请求第一页后，您将添加一个异步任务来启动第二页计算，并将结果存储在缓存中。因此，当请求第 2 页时，您检查缓存中的预渲染响应，如果不存在，您可以同步计算该值。

因此，您的代码将如下所示（任务将位于应用程序的 task.py 文件中，但这应该会给您一个大致的概念）：

```
from celery import task
from django.core.cache import cache

def page_two_calculation(arg1, arg2):
    return arg1 + arg2

@task
def page_two_task(arg1, arg2):
    result = page_two_calculation(arg1, arg2)
    cache_key = "page-two-%s-%s" (arg1, arg2)
    cache.set(cache_key, result)

def page_one(request, arg1, arg2):

    # Start the page two task
    page_two_task.delay(arg1, arg2)

    # Return the page one response
    return HttpResponse('page one')

def page_two(request, arg1, arg2)
    cache_key = "page-two-%s-%s" (arg1, arg2)
    result = cache.get(cache_key)
    if result is None:
         # the result will only be None if the page 2 calculation
         # doesn't exist in the cache, in which case we'll have to
         # return the value synchronously.
         result = page_two_calculation(arg1, arg2)
    return result 
```

# jquery - 使用 ajax:loading 出现 gif 不工作 rails Jquery

> ID：14350847
> 
> 赞同：0
> 
> 时间：2013-01-16T03:18:02.533
> 
> 标签：jquery, ruby-on-rails, ajax, ruby-on-rails-3, ruby-on-rails-3.2

我的请求 ajax 不调用函数来显示加载的 gif，我使用示例 ajax 申请，我的 js 是：

```
$("#carregar").bind("ajax:loading", function(et, e){
    $(this).hide();
    $("#load_img").show();
}); 
```

我正在使用 controller.js.erb 的示例方法并加载内容，但没有出现 gif，请问这是怎么回事？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:38:13.377

`ajax:loading`是由旧版本的 jquery-rails 附带的 JS 驱动程序触发的事件。它已经被改变了。如果您使用的是更新版本的 Rails，那么您应该绑定到`ajax:beforeSend`事件。

其他需要考虑的事项：

1)`ajax:beforeSend`事件处理程序应绑定到触发 AJAX 请求的元素，很可能是 FORM 元素。

2) 使用 jQuery .bind() 时，目标元素需要存在于 DOM 中。在绑定事件处理程序之前确保加载 DOM 的一种简单方法是将脚本包装在文档就绪回调中。

```
$(document).ready(function(){
  $("#carregar").bind(...)
}) 
```

3) Arun 关于使用 ajaxStart 的建议有助于显示和隐藏 ajax 加载指示器。

```
// Show and hide the indicator for every AJAX request.

$(document).ajaxStart(function(){
  $("#load_img").show();
});

$(document).ajaxStop(function(){
  $("#load_img").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:59:34.927

有关触发的事件，请参阅[jQuery 文档](http://docs.jquery.com/Ajax_Events)。

尝试绑定`ajax:before`事件而不是`ajax:loading`.

# linux - awk 模式可以匹配多行吗？

> ID：14350856
> 
> 赞同：30
> 
> 时间：2013-01-16T03:19:37.380
> 
> 标签：linux, awk

我有一些复杂的日志文件，我需要编写一些工具来处理它们。我一直在玩 awk，但我不确定 awk 是否是正确的工具。

我的日志文件是 OSPF 协议解码的打印输出，其中包含各种协议 pkts 及其内容的文本日志，以及用它们的值标识的各种协议字段。我想处理这些文件并仅打印出与特定 pkts 相关的某些日志行。每个 pkt 日志可以包含该 pkt 条目的不同数量的行。

awk 似乎能够处理与模式匹配的单行。我可以找到所需的 pkt，但随后我需要匹配后面几行中的模式，以确定它是否是我要打印的 pkt。

另一种看待这个问题的方法是，我想隔离日志文件中的几行，并根据多行上的模式匹配打印出作为特定 pkt 详细信息的那些行。

由于 awk 似乎是基于行的，我不确定这是否是最好的工具。

如果awk可以做到这一点，它是如何做到的？如果没有，关于使用哪种工具的任何建议？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-16T03:29:04.570

awk 可以轻松检测模式的多行组合，但您需要在代码中创建所谓的*[状态机](http://en.wikipedia.org/wiki/State_machine)*来识别序列。

考虑这个输入：

```
how
second half #1
now
first half
second half #2
brown
second half #3
cow 
```

如您所见，识别单一模式很容易。现在，我们可以编写一个 awk 程序，该程序仅在前半行直接位于*前半行之前识别**后半部分*。（使用更复杂的状态机，您可以检测任意模式序列。）

 *```
/second half/ {
  if(lastLine == "first half") {
    print
  }
}

{ lastLine = $0 } 
```

如果你运行它，你会看到：

```
second half #2 
```

现在，这个例子非常简单，只是一个状态机。有趣的状态仅持续*if*语句的持续时间，并且前面的状态是隐含的，取决于*lastLine 的值。*在更规范的状态机中，您将保留显式状态变量并根据现有状态和当前输入从状态到状态转换。但是你可能不需要那么多的控制机制。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-06-14T14:35:43.540

awk 能够处理从开始模式到结束模式

```
/start-pattern/,/end-pattern/ {
  print
} 
```

我正在寻找如何匹配

```
 * Implements hook_entity_info_alter().
 */
function file_test_entity_type_alter(&$entity_types) { 
```

如此创造

```
/\* Implements hook_/,/function / {
  print
} 
```

我需要的内容。一个更复杂的例子是跳过行并擦掉非空格部分。注意 awk 是一个记录（行）和单词（空格分割）的工具。

```
# start,end pattern match using comma
/ \* Implements hook_(.*?)\./,/function (.\S*?)/ {
  # skip PHP multi line comment end
  $0 ~ / \*\// skip

  # Only print 3rd word
  if ($0 ~ /Implements/) {
    hook=$3
    # scrub of opening parenthesis and following.
    sub(/\(.*$/, "", hook)
    print hook
  }

  # Only print function name without parenthesis
  if ($0 ~ /function/) {
    name=$2

    # scrub of opening parenthesis and following.
    sub(/\(.*$/, "", name)

    print name
    print ""
  }
} 
```

希望这也有帮助。

另见[ftp://ftp.gnu.org/old-gnu/Manuals/gawk-3.0.3/html_chapter/gawk_toc.html](ftp://ftp.gnu.org/old-gnu/Manuals/gawk-3.0.3/html_chapter/gawk_toc.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-16T04:00:10.637

awk 确实是基于记录的。默认情况下，它将一行视为一条记录，但您可以使用 RS（记录分隔符）变量对其进行更改。

解决此问题的一种方法是使用 sed 进行第一次传递（如果您愿意，也可以使用 awk 执行此操作），以使用不同的字符（如换页）分隔记录。然后，您可以编写 awk 脚本，它将这组行视为一条记录。

例如，如果这是您的数据：

```
animal 0
name: joe
type: dog
animal 1
name: bill
type: cat
animal 2
name: ed
type: cat 
```

要使用换页符分隔记录：

```
$ cat data | sed $'s|^\(animal.*\)|\f\\1|' 
```

现在我们将接受它并通过 awk 传递它。这是有条件地打印记录的示例：

```
$ cat data | sed $'s|^\(animal.*\)|\f\\1|' | awk '
      BEGIN { RS="\f" }                                     
      /type: cat/ { print }' 
```

输出：

```
animal 1
name: bill
type: cat

animal 2
name: ed
type: cat 
```

编辑：作为奖励，这里是使用 awk-ward ruby​​ 的方法（-014 表示使用换页符（八进制代码 014）作为记录分隔符）：

```
$ cat data | sed $'s|^\(animal.*\)|\f\\1|' |
      ruby -014 -ne 'print if /type: cat/' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T03:44:07.717

我不时对 sendmail 日志做这种事情。

鉴于：

```
Jan 15 22:34:39 mail sm-mta[36383]: r0B8xkuT048547: to=<www@web3>, delay=4+18:34:53, xdelay=00:00:00, mailer=esmtp, pri=21092363, relay=web3., dsn=4.0.0, stat=Deferred: Operation timed out with web3.
Jan 15 22:34:39 mail sm-mta[36383]: r0B8hpoV047895: to=<www@web3>, delay=4+18:49:22, xdelay=00:00:00, mailer=esmtp, pri=21092556, relay=web3., dsn=4.0.0, stat=Deferred: Operation timed out with web3.
Jan 15 22:34:51 mail sm-mta[36719]: r0G3Youh036719: from=<obfTaIX3@nickhearn.com>, size=0, class=0, nrcpts=0, proto=ESMTP, daemon=IPv4, relay=[50.71.152.178]
Jan 15 22:35:04 mail sm-mta[36722]: r0G3Z2SF036722: lost input channel from [190.107.98.82] to IPv4 after rcpt
Jan 15 22:35:04 mail sm-mta[36722]: r0G3Z2SF036722: from=<amahrroc@europe.com>, size=0, class=0, nrcpts=0, proto=SMTP, daemon=IPv4, relay=[190.107.98.82]
Jan 15 22:35:36 mail sm-mta[36728]: r0G3ZXiX036728: lost input channel from ABTS-TN-dynamic-237.104.174.122.airtelbroadband.in [122.174.104.237] (may be forged) to IPv4 after rcpt
Jan 15 22:35:36 mail sm-mta[36728]: r0G3ZXiX036728: from=<clunch.hilarymas@javagame.ru>, size=0, class=0, nrcpts=0, proto=SMTP, daemon=IPv4, relay=ABTS-TN-dynamic-237.104.174.122.airtelbroadband.in [122.174.104.237] (may be forged) 
```

我使用这样的脚本：

```
#!/usr/bin/awk -f

BEGIN {
  search=ARGV[1];  # Grab the first command line option
  delete ARGV[1];  # Delete it so it won't be considered a file
}

# First, store every line in an array keyed on the Queue ID.
# Obviously, this only works for smallish log segments, as it uses up memory.
{
  line[$6]=sprintf("%s\n%s", line[$6], $0);
}

# Next, keep a record of Queue IDs with substrings that match our search string.
index($0, search) {
  show[$6];
}

# Finally, once we've processed all input data, walk through our array of "found"
# Queue IDs, and print the corresponding records from the storage array.
END {
  for(qid in show) {
    print line[qid];
  }
} 
```

获得以下输出：

```
$ mqsearch airtel /var/log/maillog

Jan 15 22:35:36 mail sm-mta[36728]: r0G3ZXiX036728: lost input channel from ABTS-TN-dynamic-237.104.174.122.airtelbroadband.in [122.174.104.237] (may be forged) to IPv4 after rcpt
Jan 15 22:35:36 mail sm-mta[36728]: r0G3ZXiX036728: from=<clunch.hilarymas@javagame.ru>, size=0, class=0, nrcpts=0, proto=SMTP, daemon=IPv4, relay=ABTS-TN-dynamic-237.104.174.122.airtelbroadband.in [122.174.104.237] (may be forged) 
```

这里的想法是我正在打印与我要搜索的字符串的 Sendmail 队列 ID 匹配的所有行。代码的结构当然是日志文件结构的产物，因此您需要针对要分析和提取的数据自定义解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T03:28:37.553

```
awk '/pattern-start/,/pattern-end/' 
```

[**参考**](http://sed.sourceforge.net/sed1line.txt)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-16T03:38:28.773

```
`pcregrep -M` works pretty well for this. 
```

来自 pcregrep(1)：

> -M，--多行
> 
> 允许模式匹配多于一行。当给出此选项时，模式可能有用地包含文字换行符和内部出现的 ^ 和 $ 字符。成功匹配的输出可能包含多行，最后一行是匹配结束的那一行。如果匹配的字符串以换行序列结束，则输出在该行的末尾结束。
> 
> 设置此选项时，PCRE 库以“多行”模式调用。可以匹配的行数是有限制的，这是由 pcregrep 在扫描输入文件时缓冲输入文件的方式所施加的。但是，pcgrep 确保至少 8K 字符或文档的其余部分（以较短者为准）可用于前向匹配，并且类似地，前面的 8K 字符（或所有前面的字符，如果少于 8K）保证可用对于后向断言。此选项在逐行读取输入时不起作用（请参阅 --line-buffered。）*

# string - 如何在字符串中查找字符串？

> ID：14350865
> 
> 赞同：1
> 
> 时间：2013-01-16T03:20:36.810
> 
> 标签：string, char, cstring, getline

只是偶尔我必须用 C++ 编写。我的问题是如何在字符串中找到字符串？然后保存该行，然后在该行中查找一组数字。例如，我有一个看起来像这样的文本文件。

地址 长度 名称 87623498 2 狗 12345678 4 猫 98737289 1 鸟

我想搜索“猫”，然后将与其关联的数字（12345678）和（4）存储到不同的变量名中。这是我编写的一些代码，但它并不接近正确。我有一个调用这个 DLL 的 .exe。任何帮助表示赞赏！` #include #include #include #include #include

```
char* File_Path;  //Path is sent by another program
char* Name;   //value is being sent by another program
unsigned long Address;
int Length;
int found = 0;
{
   using namespace std;
   std::string Line;
   std::ifstream infile;
   infile.open (File_Path);
   if (infile.is_open())
   {
       std::ofstream outfile;
       outfile.open ("C:\\debug\\test.txt")
       while (infile.good()  && found == 0)
       {
           std::getline(infile,Line);
           //if (Name is within Line){
           /*I want to say IF char* Name = a part of the string line 
           ie.  Name = cat and the string Line is (12345678 4 cat)
           Then store the number (12345678 = Address), and 
           (4 = Length)  I hope that makes sense :/
            */
                outfile << Line;                 //output the stored line for debug
                outfile << address;              //output the stored address for debug
                outfile << length;               //output the stored length for debug
                found = 1;
        }
            outfile.close();
            infile.close();

     }

return 0;
} 
```

`请帮忙！谢谢！

# svn - 跟踪 SVN 中的现有标签

> ID：14350867
> 
> 赞同：1
> 
> 时间：2013-01-16T03:21:07.660
> 
> 标签：svn, tagging

目前我们正在使用一个流程，将代码库标记为生产代码，`CVS`然后进行正常开发。可以提交到主干和新标签，但产品标签在生产版本之前不能更改，此时产品版本的标签成为新的产品标签。因此，每当需要生产代码时，只需签出 prod 标签即可。prod 标签基本上就像一个更传统的开发过程中的主干头。

我们现在正在迁移`SVN`，计划是保持当前的方法。我想知道为特定代码库维护生产标签的最佳/标准方法`SVN`是什么？是否可以创建一个在新的生产版本之前永远不会更改的标签，其中生产代码将合并到标签中？拥有生产标签历史的能力也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T04:44:04.760

对你来说坏消息：你必须改变习惯。标签是 Subversion（通常）不可变的，即关系 URL-OF-TAG <-> Revision 在项目的生命周期内（不得）更改。

你可以：

1.  每次发布时忽略约定并重新创建 PROD 标签。IE
    *   第一次创建 PROD`svn cp REPO/TRUNK@R1 REPO/tags/PROD`
    *   在下一个版本中`svn rm REPO/tags/PROD & svn cp REPO/TRUNK@RN REPO/tags/PROD`
2.  使用主干外部 repo 中的任何路径作为特殊用途的分支（可变子树）：“MergeTo Only”并合并到此 PROD 发布的代码
    *   首次创建 PROD`svn cp REPO/TRUNK@R1 REPO/PROD`或`... REPO/branches/PROD`
    *   在每个下一个版本中将主干（或版本分支的版本标签或 HEAD）合并到 PROD
3.  使用外部
    *   第一次创建 PROD：在某个地方添加（第 2 页的注释适用）“虚拟文件夹”使用 svn:externals 到存储库中的某个点（树和历史）（我将 PROD 添加到分支，将使用 propset在树干根上）`svn propset svn:externals . branches/PROD REPO/TRUNK@R1 & svn ci &svn up`
    *   在每个下一个版本中：更改 PROD 的外部资源定义`svn propedit svn:externals .`（再次在主干的根目录中）并将（交互式，在文本编辑器中）替换`REPO/TRUNK@R1`为新路径（为了便于自动化`propedit`，可以替换为`propdel`+ `propset`）

# objective-c - 我想在Objective-c中将类别添加到Class类

> ID：14350868
> 
> 赞同：0
> 
> 时间：2013-01-16T03:21:07.867
> 
> 标签：objective-c

我做了这个方法

```
-(NSMutableArray *)getProperties:(id)c
{
    NSString *propertyName;
    unsigned int outCount, i;
    NSMutableArray *propertieNames = [[NSMutableArray alloc] initWithObjects: nil];

    objc_property_t *properties = class_copyPropertyList(c, &outCount);
    for (i = 0; i < outCount; i++) {
        objc_property_t property = properties[i];
        propertyName = [NSString stringWithUTF8String:property_getName(property)];
        [propertieNames addObject:propertyName];
    }
    return propertieNames;
} 
```

我用这个

```
NSMutableArray *propertiesNames = [self getProperties:[self class]]; 
```

我想用这个

```
NSMutableArray *propertiesNames = [[self class] getProperties]; 
```

如何将类别添加到 Class 类。也许 Class 类不是 Object....

我尝试将类别添加到类

```
#import "Class+SN.h"

@implementation Class (SN)

@end 
```

我有错误

```
Cannot find interface declaration for 'Class' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:45:40.123

如果你想要一个类方法，你必须使用`+`而不是`-`. 在类方法中，`self`指的是类，所以可以`c`用`self`. 的文档[`class_copyPropertyList`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/doc/uid/TP40001418-CH1g-SW45)说您需要稍后使用 释放列表`free()`，否则您会泄漏内存。

```
+ (NSArray *) getProperties
{
    NSString *propertyName;
    unsigned int outCount, i;
    NSMutableArray *propertyNames = [NSMutableArray array];

    objc_property_t *properties = class_copyPropertyList(self, &outCount);
    for (i = 0; i < outCount; i++)
    {
        objc_property_t property = properties[i];
        propertyName = [NSString stringWithUTF8String:property_getName(property)];
        [propertyNames addObject:propertyName];
    }

    free(properties);

    return propertyNames;
} 
```

Also, Objective-C method names rarely use `get`. Many methods with `get` in the name imply that they have output parameters or that the caller should provide their own buffer (for examples of when to use `get` in the name, see [`getCharacters:range:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-getCharacters_range_), and also [`getStreamsToHost:port:inputStream:outputStream:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSStream_Class/Reference/Reference.html)). This convention means your method would be more appropriately named `properties` or `classProperties` etc.

# haskell - Pointfree（或库）函数，用于将两个函数应用于单个输入

> ID：14350871
> 
> 赞同：8
> 
> 时间：2013-01-16T03:21:45.967
> 
> 标签：haskell, pointfree

我一直在重用 lambda 表达式，例如

```
\x -> (f x, g x) 
```

我将相同的输入应用于两个函数并将结果封装成一对。我可以写一个函数来捕捉这个

```
combine :: (a -> b) -> (a -> c) -> a -> (b,c)
combine f g x = (f x, g x) 
```

现在上面的 lambda 表达式只是`combine f g`. 我有两个问题。

1.  我很想知道是否有一个标准库函数可以做到这一点，而我只是找不到。
2.  出于好奇，我想以无点风格重写此功能，但我遇到了很多麻烦。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-16T03:28:05.533

1.  `Control.Arrow`有这个功能[`(&&&)`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Arrow.html#v:-38--38--38-)。它有一个“更通用”的类型，不幸的是，这意味着 Hoogle 没有找到它（也许这应该被认为是 Hoogle 中的一个错误？）。

2.  您通常可以使用 自动计算出这种东西[`pointfree`](http://hackage.haskell.org/package/pointfree)，其中`lambdabot`有`#haskell`一个插件。

例如：

```
<shachaf> @pl combine f g x = (f x, g x)
<lambdabot> combine = liftM2 (,) 
```

有类型`liftM2`的`(r ->)`实例在哪里。当然，根据您允许的原语，还有许多其他的无点编写方式。`Monad``(a -> b -> c) -> (r -> a) -> (r -> b) -> r -> c`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-16T03:31:14.350

> 我很想知道是否有一个标准库函数可以做到这一点，而我只是找不到。

由于类型类，很容易错过，但[看看`Control.Arrow`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Arrow.html). Plain `Arrow`s 不能被`Arrow`柯里化或应用，因此组合子必然是无点的。如果你专门研究它们`(->)`，你会发现你想要的是这样的：

```
(&&&) :: (Arrow a) => a b c -> a b c' -> a b (c, c') 
```

还有其他类似的函数，例如 for 的等效操作`Either`，它专门为`(->)`如下所示：

```
(|||) :: (a -> c) -> (b -> c) -> Either a b -> c 
```

这与`either`.

> 出于好奇，我想以无点风格重写此功能，但我遇到了很多麻烦。

由于您要复制输入，因此您需要某种方式来实现这一点——最常见的方式是通过`Applicative`或的`Monad`实例`(->)`，例如. 这本质上是一个隐式的内联monad，被拆分的参数是“环境”值。使用这种方法，成为，或成为，成为，并成为[S 组合子](http://en.wikipedia.org/wiki/Combinatory_Logic)。`\f g -> `(,)` <$> f <*> g``Reader``join f x``f x x``pure``return``const``fmap``(.)``(<*>)` `\f g x -> f x (g x)`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-16T04:01:27.987

实际上有很多方法可以做到这一点。最常见的方法是使用`(&&&)`函数 from `Control.Arrow`：

```
f &&& g 
```

但是，通常你有更多的函数或者需要将结果传递给另一个函数，在这种情况下使用 applicative 风格会更方便。然后

```
uncurry (+) . (f &&& g) 
```

变成

```
liftA2 (+) f g 
```

如前所述，这可以与多个功能一起使用：

```
liftA3 zip3 f g h 
```

# r - 连接来自向量的相邻字符串

> ID：14350872
> 
> 赞同：3
> 
> 时间：2013-01-16T03:21:58.933
> 
> 标签：r, vector

给定

```
qz <- quantile(c(1,2,3,4,5,6,7,8,9,10), c(0.0, 0.2, 0.4, 0.6, 0.8, 1.0)) 
```

我想从分位数创建一个标签向量。目前，我这样做

```
zlab <- c(paste(paste(sprintf(qz[[1]], fmt='$%.2f'), "-"), sprintf(qz[2],
fmt='$%.2f')), paste(paste(sprintf(qz[[2]], fmt='$%.2f'), "-"), sprintf(qz[3],
fmt='$%.2f')),paste(paste(sprintf(qz[[3]], fmt='$%.2f'), "-"), sprintf(qz[4],
fmt='$%.2f')), paste(paste(sprintf(qz[[4]], fmt='$%.2f'), "-"), sprintf(qz[5],
fmt='$%.2f')), paste(paste(sprintf(qz[[5]], fmt='$%.2f'), "-"), sprintf(qz[6],
fmt='$%.2f'))) 
```

并得到

```
zlab
[1] "$1.00 - $2.80"  "$2.80 - $4.60"  "$4.60 - $6.40"  "$6.40 - $8.20"  "$8.20 - $10.00" 
```

zlab 的格式完全正确，并最终作为绘图上的标签结束。但是生成zlab真的很丑。我可以以更优雅的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T03:25:58.770

`head`并`tail`为您提供需要粘贴的分位数切片。

```
x <- sprintf("$%.2f", qz)
x
## [1] "$1.00"  "$2.80"  "$4.60"  "$6.40"  "$8.20"  "$10.00"

paste(head(x, -1), tail(x, -1), sep=' - ')
## [1] "$1.00 - $2.80"  "$2.80 - $4.60"  "$4.60 - $6.40"  "$6.40 - $8.20"  "$8.20 - $10.00" 
```

# android - ScrollView 中的 WebView 似乎工作正常，但警告不要使用 - 替代方案？

> ID：14350873
> 
> 赞同：5
> 
> 时间：2013-01-16T03:22:04.453
> 
> 标签：android, android-webview, android-scrollview

我读过的所有内容（在制作我的应用程序之后:(）都说“你永远不应该在 ScrollView 中使用 WebView！”。这是可以理解的，因为理论上你可以有 2 个滚动的东西，这会产生奇怪的可用性。

但是 - 到目前为止，我没有看到任何不利影响。再说一次，我使用的每个 WebView 都不需要滚动——也许这使得它可以接受——即使它在技术上是错误的？

由于缺乏对特定版本的测试，是否有我没有注意到的不利影响？

如果我不能在 ScrollView 中使用 WebView，我将如何获得以下布局（我当前的应用程序）：

```
LinearLayout
    ScrollView
        LinearLayout
            TextView //Title of article
            TextView //Subtitle of article
            RelativeLayout
                ImageView //Large Image (clickable to gallery)
                ImageView //"more photos icon"
            WebView // a small horizontal ad
            TextView // actual article text
            WebView //embedded HTML code ranging from iframe to video...etc
            WebView //embedded HTML code ranging from iframe to video...etc
            WebView // a small horizontal ad
            LinearLayout
                TextView //DB-driven "similar articles" list
            WebView //disqus comments 
```

注意：我意识到这是“错误的”——但`<center>`在 HTML 中使用标签也是如此，人们仍然一直有效地使用它们。不同之处似乎在于有一个简单且更好的替代方案`<center>`- Android 中的这种情况是否有类似的东西？获得上述内容的一种简单方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T00:33:22.653

> 这是可以理解的，因为理论上你可以有 2 个滚动的东西，这会产生奇怪的可用性。

更具体地说，`ScrollView`它就像一盒石头一样愚蠢，并假设它可以完全控制滚动。

> 再说一次，我使用的每个 WebView 都不需要滚动

更准确地说，它不需要在您测试过的设备上滚动，也不需要滚动您测试过的内容。

例如，DISQUS 评论线程通常需要*在桌面浏览器上*滚动。可以想象，会有足够长的评论线程需要在移动设备上滚动，除非有可以使用的无滚动 DISQUS 嵌入。

> 如果我不能在 ScrollView 中使用 WebView，我将如何获得以下布局（我当前的应用程序）：

摆脱一切并拥有一个`WebView`生成的 HTML 内容，其中包含当前结构中的所有内容。IOW，做你在网站上会做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T01:15:47.427

只要 WebView 不能在与 ScrollView 相同的方向上在内部滚动，将 WebView 放置在 ScrollView 中就可以工作。使 WebView 在内部不滚动可以通过以下几种方式实现：

*   WebView 的高度（假设 ScrollView 可以垂直滚动）是 WRAP_CONTENT，
*   WebView 具有固定大小，并且内容具有永远不会大于视口的反应式布局（或者可以使用“溢出：隐藏”）。

我认为上述方法不能很好地与捏缩放混合，所以你最好不要启用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T18:37:42.090

不要使用 Web 视图。您可以附加到应用程序或使用 AdMob 的广告。视频是 VideoView。评论 webview 的替代方法是制作 api（使用 php [POST] 和 sql）。使用 webview 不是强制性的。我希望我有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-19T12:30:18.430

创建一个 Java 类并使用 WebView 扩展

```
package com.mypackage.common.custom.android.widgets

public class TouchyWebView extends WebView {

     public TouchyWebView(Context context) {
        super(context);
     }

    public TouchyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

  public TouchyWebView(Context context, AttributeSet attrs, int defStyle) {
     super(context, attrs, defStyle);
  }

  @Override
  public boolean onTouchEvent(MotionEvent event){
     requestDisallowInterceptTouchEvent(true);
     return super.onTouchEvent(event);
  }          
} 
```

并在布局

```
<com.mypackage.common.custom.android.widgets
      android:id="@+id/webView"
                android:layout_width="match_parent"
                android:layout_height="match_parent" /> 
```

我希望这能解决你的问题

# three20 - ttnavigator 可以在目标 c 中呈现 xib 视图吗？

> ID：14350874
> 
> 赞同：0
> 
> 时间：2013-01-16T03:22:03.890
> 
> 标签：three20

为了制作我自己的应用程序，我遵循了three20 ttnavigator 示例，但是我看到视图是在控制器中创建的，但是我想在xib 文件中创建我的视图，然后在触发openURLAction 时从控制器渲染它，怎么可能？，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:20:20.663

我曾经覆盖 initWithNibName 以在 xib 文件中显示我的视图，导航器 openURLAction 可以。

# java - java中的hashmap在哪些情况下会丢失一些条目？

> ID：14350878
> 
> 赞同：6
> 
> 时间：2013-01-16T03:22:25.403
> 
> 标签：java, hashmap, weblogic, key-value

我写了一个哈希图并用键/值条目填充它。值是对象。该地图包含至少 10,000 个条目。稍后当我想使用某个键获取值时，地图似乎找不到这个条目。这太奇怪了。即使每次它在不同的条目上失败。我能做些什么来解决这个问题？我正在使用 weblogic 作为服务器。我应该使用任何环境值吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T03:37:41.727

以下是一些可能导致条目“丢失”的情况：

*   在您的关键对象上错误地实现了 equals / hashcode 方法。这两种方法需要遵守“契约”才能使哈希表正常工作。最重要的属性是：

    ```
    key1.equals(key2) IMPLIES key1.hashcode() == key2.hashcode 
    ```

*   在映射中使用键时更改的可变键对象。特别是，如果 key 改变导致 key 的 hashcode 改变，它就会丢失。（在这种情况下，如果您遍历整个地图，条目将显示出来。但是使用 has lookup 的地图操作不会找到它们......因为它们位于错误的哈希链上。）

    最安全的方法是使用不可变的密钥类。

*   在没有正确同步的多线程应用程序中使用映射。这可能会导致地图数据结构损坏，这可能表现为丢失的条目。

*   您不知道的应用程序的其他一些部分正在删除条目。

* * *

声明/声明您*必须*覆盖`equals`并且`hashcode`是/不正确的答案。在某些情况下`Object`，这些方法的实现正是所需要的。您*需要*做的是确保：

1.  您正在使用用例要求的*适当*形式的密钥相等，并且
2.  您`equals`并`hashcode`遵守“合同”。

* * *

> 我能做些什么来解决这个问题？

我建议进行代码检查以检查上述问题。

调试是另一种选择。例如，您可以查看是否可以在错误的哈希链上找到丢失的条目。但是，我怀疑这种方法可能有点“碰巧”。

> 我正在使用 weblogic 作为服务器。

不相关......除非您碰巧使用由 Weblogic 而不是 J2SE 实现的某些 Map 实现类。（查看对象的类名。）

> 我应该使用任何环境值吗？

不，这无济于事

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T03:23:40.023

一种可能的情况是：

如果 key 是类的实例并且该类没有覆盖 equals/hashcode 方法，则 get 方法可能返回 false。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T03:36:54.240

如果您的密钥是可变的，那么以改变其哈希值的方式改变密钥将导致查找失败。

例如，假设您有以下可变类：

```
public class MyKey {
    private int value;
    public void setValue(int value) {
        this.value = value;
    }
    public int hashCode() {
        return value;
    }
    public boolean equals(Object obj) {
        //...
    }
} 
```

那么这是可能的：

```
MyKey key = new MyKey();
key.setValue(1);

Map<MyKey, String> map = new HashMap<MyKey, String>();
map.put(key, "Hello");

System.out.println("map contains: " + map.get(key)); // "map contains: Hello"
key.setValue(2);
System.out.println("map contains: " + map.get(key)); // "map contains: " 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T03:28:38.923

扩展 Nambari 的答案：

如果您使用不覆盖 equals 和 hashCode 作为键的类，则相等性基于对象相等性（例如：相同的对象地址，不同的内容）。这与您不能将字符串与 == 进行比较的原因相同。

```
 class Key {
       public String k;
       public Key(String k) { this.k = k; }

       /*
       //with this it would work.
       public boolean equals(Object o) { 
            if (o instanceof Key) return ((Key)o).k.equals(k);
            return false;
       }

       public int hashCode() {
            return k.hashCode();
       }
       */
    }

    map.put(new Key("a"),"test");
    map.get(new Key("a"));  // does NOT return "test" because key is another instance. 
```

# layout - ExtJs Layout：如何在每一行中排列项目？

> ID：14350882
> 
> 赞同：1
> 
> 时间：2013-01-16T03:22:58.713
> 
> 标签：layout, extjs, vbox

我是 extjs 的初学者。
我想安排一些TextFields如下：

    a:______ b:______ c:______
    d:______ e:______ f:______

以下是我的测试代码：

```
Ext.onReady(function()
{
    new Ext.panel.Panel(
    {
        renderTo: Ext.getBody(),
        layout:'vbox',
        width: 670,
        tbar: [{text:"Add"}],
        defaults:
        {
            layout:"column",
            height:50
        },
        items:
        [
            {
                defaults:
                {
                    labelAlign:"right",
                    labelWidth:50
                },
                items:
                [
                    {
                        xtype: 'textfield',
                        fieldLabel: 'a'
                    },
                    {
                        xtype: 'textfield',
                        fieldLabel: 'b'
                    },
                    {
                        xtype: 'textfield',
                        fieldLabel: 'c'
                    }
                ]
            },
            {
                defaults:
                {
                    labelAlign:"right",
                    labelWidth:50
                },
                items:
                [
                    {
                        xtype: 'textfield',
                        fieldLabel: 'd'
                    },
                    {
                        xtype: 'textfield',
                        fieldLabel: 'e'
                    },
                    {
                        xtype: 'textfield',
                        fieldLabel: 'f'
                    }
                ]
            }
        ]
    });
}); 
```

因此，页面无法显示任何文本字段。
感谢您提前提供任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T04:40:10.600

您可以执行以下操作：

```
new Ext.panel.Panel({
  renderTo: Ext.getBody(),
  width: 670,
  tbar: [{
    text: "Add"
  }],
  defaults: {
    layout: ,
    height: 50
  },
  items: [{
    defaults: {
      labelAlign: "right",
      labelWidth: 50
    },
    items: [{
      xtype: 'textfield',
      fieldLabel: 'a'
    }, {
      xtype: 'textfield',
      fieldLabel: 'b'
    }, {
      xtype: 'textfield',
      fieldLabel: 'c'
    }]
  }, {
    defaults: {
      labelAlign: "right",
      labelWidth: 50
    },
    items: [{
      xtype: 'textfield',
      fieldLabel: 'd'
    }, {
      xtype: 'textfield',
      fieldLabel: 'e'
    }, {
      xtype: 'textfield',
      fieldLabel: 'f'
    }]
  }]
}); 
```

`vbox`除了用默认布局替换布局外，它基本上与您的示例相同`auto`。您的示例不起作用的原因是`vbox`布局需要以某种方式在其上设置高度和宽度。

您还可以执行以下操作：

```
new Ext.panel.Panel({
  renderTo: Ext.getBody(),
  layout: 'column',
  width: 670,
  tbar: [{
    text: "Add"
  }],
  defaults: {
    labelAlign: "right",
    labelWidth: 50
  },
  items: [{
    xtype: 'textfield',
    fieldLabel: 'a'
  }, {
    xtype: 'textfield',
    fieldLabel: 'b'
  }, {
    xtype: 'textfield',
    fieldLabel: 'c'
  }, {
    xtype: 'textfield',
    fieldLabel: 'd'
  }, {
    xtype: 'textfield',
    fieldLabel: 'e'
  }, {
    xtype: 'textfield',
    fieldLabel: 'f'
  }]
}); 
```

它是一种`column`没有像以前那样嵌套项目的布局。布局的一个`column`好处是它将尽可能多的项目向左移动，如果一个项目不适合，它将进入下一行。由于宽度是静态的 670，因此每行只能容纳 3 个文本字段。列布局不需要设置高度。

# c++ - 如何在c ++中遍历数字列表

> ID：14350886
> 
> 赞同：7
> 
> 时间：2013-01-16T03:24:40.380
> 
> 标签：c++

我如何遍历一个数字列表，有多少种不同的方法可以做到这一点？

我认为会起作用的：

```
#include <cstdlib>
#include <iostream>
#include <list>

using namespace std;

int main()

{
    int numbers[] = {2, 4, 6, 8};
    int i = 0;
    for(i=0; i< numbers.size();i++)
            cout << "the current number is " << numbers[i];

    system("pause");

    return 0;

} 
```

我在 for 循环行上收到错误：

> 请求成员`'size'`in `'numbers'`，它是非类类型`'int[4]'`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-16T03:46:11.250

与许多现代语言不同，普通 C++ 数组没有`.size()`函数。根据存储类型，您有许多选项可以遍历列表。

一些常见的存储选项包括：

```
// used for fixed size storage. Requires #include <array>
std::array<type, size> collection;

// used for dynamic sized storage. Requires #include <vector>
std::vector<type> collection;

// Dynamic storage. In general: slower iteration, faster insert
// Requires #include <list>     
std::list<type> collection;  

// Old style C arrays
int myarray[size]; 
```

您的迭代选项将取决于您使用的类型。如果您使用的是普通的旧 C 数组，您可以将大小存储在其他地方，或者根据数组类型的大小计算数组的大小。[计算数组的大小在 DevSolar 的这个答案中概述了许多缺点](https://stackoverflow.com/a/4162948/203133)

```
// Store the value as a constant
int oldschool[10];
for(int i = 0; i < 10; ++i) {
    oldschool[i]; // Get
    oldschool[i] = 5; // Set
} 

// Calculate the size of the array
int size = sizeof(oldschool)/sizeof(int);
for(int i = 0; i < size; ++i) {
    oldschool[i]; // Get
    oldschool[i] = 5; // Set
} 
```

如果您使用任何提供 a `.begin()`and`.end()`函数的类型，您可以使用它们来获得一个迭代器，与基于索引的迭代相比，它在 C++ 中被认为是好的风格：

```
// Could also be an array, list, or anything with begin()/end()
std::vector<int> newschool;     

// Regular iterator, non-C++11
for(std::vector<int>::iterator num = newschool.begin(); num != newschool.end(); ++num) {
    int current = *num; // * gets the number out of the iterator
    *num = 5; // Sets the number.
}

// Better syntax, use auto! automatically gets the right iterator type (C++11)
for(auto num = newschool.begin(); num != newschool.end(); ++num) {
    int current = *num; // As above
    *num = 5;
}

// std::for_each also available
std::for_each(newschool.begin(), newschool.end(), function_taking_int);

// std::for_each with lambdas (C++11)
std::for_each(newschool.begin(), newschool.end(), [](int i) {
    // Just use i, can't modify though.
}); 
```

向量也很特殊，因为它们被设计为数组的替代品。您可以完全按照使用`.size()`函数遍历数组的方式遍历向量。然而，这在 C++ 中被认为是不好的做法，您应该尽可能使用迭代器：

```
std::vector<int> badpractice;
for(int i = 0; i < badpractice.size(); ++i) {
    badpractice[i]; // Get
    badpractice[i] = 5; // Set
} 
```

C++11（新标准）还带来了新的和花哨的范围，因为它应该适用于任何提供 a`.begin()`和`.end()`. 但是：此功能的编译器支持可能会有所不同。您也可以使用`begin(type)`and`end(type)`作为替代方案。

```
std::array<int, 10> fancy;
for(int i : fancy) {
    // Just use i, can't modify though.
}

// begin/end requires #include <iterator> also included in most container headers.
for(auto num = std::begin(fancy); num != std::end(fancy); ++num) {
    int current = *num; // Get
    *num = 131; // Set
} 
```

`std::begin`还有另一个有趣的属性：它适用于原始数组。这意味着您可以在数组和非数组之间使用相同的迭代语义（您仍然应该更喜欢标准类型而不是原始数组）：

```
int raw[10];
for(auto num = std::begin(raw); num != std::end(raw); ++num) {
    int current = *num; // Get
    *num = 131; // Set
} 
```

如果您想在循环中从集合中删除项目，您还需要小心，因为调用`container.erase()`会使所有现有迭代器无效：

```
std::vector<int> numbers;
for(auto num = numbers.begin(); num != numbers.end(); /* Intentionally empty */) {
    ...

    if(someDeleteCondition) {
        num = numbers.erase(num);
    } else {
        // No deletition, no problem
        ++num;
    }
} 
```

这个列表远非全面，但正如您所见，有很多方法可以迭代集合。一般来说，除非您有充分的理由不这样做，否则您更喜欢迭代器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T03:29:19.003

将您的 for 循环更改为

```
 for(i=0; i< sizeof(numbers)/sizeof(int);i++){ 
```

简而言之， `sizeof(numbers)`数组中的平均元素数 * 原始类型 int 的大小，因此除以`sizeof(int)`得到元素数

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-16T03:30:46.637

如果你修复它，它是`list<int> numbers = {1,2,3,4}`：

通过使用迭代器进行迭代：

```
#include <iterator>

for(auto it = std::begin(numbers); it != std::end(numbers); ++it) { ... } 
```

通过 using 迭代`std::for_each`：

```
#include <algorithm>
#include <iterator>

std::for_each(numbers.begin(), numbers.end(), some_func); 
```

利用 for-each 循环 (C++11)：

```
for(int i : numbers) { ... } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T03:28:05.880

“普通” C 样式数组没有`size`函数。如果要使用`std::vector`则需要使用`size`，或者通过计算大小`sizeof`。

在 C++11 中，您可以使用数组初始化语法来初始化向量，如下所示：

```
vector<int> numbers = {2, 4, 6, 8}; 
```

其他一切都保持不变（请参阅[此处](http://ideone.com/IfcOYK)的演示）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-16T13:50:59.897

您还可以使用普通的旧 C 容器**并**使用迭代器语法进行循环：

```
#include <iostream>

int main()
{
    int numbers[] = {2, 4, 6, 8};
    int *numbers_end = numbers + sizeof(numbers)/sizeof(numbers[0]);
    for (int *it = numbers; it != numbers_end; ++it)
        std::cout << "the current number is " << *it << std::endl;

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-22T16:27:29.967

我没有在答案中看到它，但这是 imo 最好的方法：[基于范围的 for loop](https://en.cppreference.com/w/cpp/language/range-for)

> 在通用代码中使用推导来转发引用是安全的，事实上，更可取的是：
> for (auto&& var : sequence)。

极简主义和工作示例：

```
#include <list>
#include <iostream>

int main()
{
    std::list<int> numbers = {2, 4, 6, 8};
    for (const int & num : numbers)
        std::cout << num << "  ";
    std::cout << '\n';
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-16T03:32:44.833

没有成员函数“size”，因为“numbers”不是一个类。您无法以这种方式获取数组的大小，您必须知道它（或计算它）或使用某个类来存储您的数字。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-29T08:14:59.170

如果您的数字列表是固定的，请注意您可以简单地编写：

```
#include <iostream>
#include <initializer_list>

int main()
{
    for (int i : {2, 4, 6, 8})
        std::cout << i << std::endl;
    return 0;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-17T21:53:38.620

在我看来，最简单的方法是使用[span](https://stackoverflow.com/questions/45723819/what-is-a-span-and-when-should-i-use-one)。

```
#include <cstdlib>
#include <iostream>
#include <gsl/span>

int main() {
    int numbers[] = {2, 4, 6, 8};
    for(auto& num : gsl::span(numbers)) {
            cout << "the current number is " << num;
    }

    system("pause");
} 
```

笔记：

*   跨度是 GSL 库的一部分。[要使用它们，请从此处](https://github.com/microsoft/gsl)下载库，并将下载路径添加到编译命令中，例如`g++ -o foo foo.cpp -I/path/to/gsl`
*   在 C++20 中，`span`将成为标准的一部分，因此您只需使用`std::span`and `#include <span>`。

# javascript - 获取 .attr('id').length; 孩子对焦点的投入

> ID：14350889
> 
> 赞同：0
> 
> 时间：2013-01-16T03:24:44.527
> 
> 标签：javascript, jquery

我正在尝试将键盘添加`.keyboard`到`$('.keyboard').keypad();`动态插入的行。`$('button[id^="product"]').click()`如果我在此之后尝试，我将插入行。它现在正在工作。

```
var count = 1;
$('button[id^="product"]').click(function () {
//adding row to table : WORKING FINE
var leng=$(this).attr('id').length;
var last = $(this).attr('id').substr(leng-4);
var newTr = $('<tr id="row_'+ count + last +'"></tr>');
newTr.html('<td width="29px" style="text-align:center;"><button class="del_row" id="'+ count + last +'" value="'+ item_price +'"> x </button></td><td width="144px"><input type="text" class="code" name="product'+ count +'" value="'+ prod_name +'" /></td><td width="44px" style="text-align:center;"><input class="keyboard" name="quantity'+ count +'" type="text" value="1" id="'+ quan +'"/></td><td style="width: 76px; padding-right: 10px; text-align:right;"><input type="text" class="price" name="price'+ count +'" value="'+ item_price +'" id="'+ pric +'"/></td>');

newTr.appendTo("#saletbl");

count++;         
});

$('.keyboard').keypad({
var leng=$(this).attr('id').length;
var last = $(this).attr('id').substr(leng-4);
}); //not working 
```

我试过`.on`这个但不工作

```
$("#saletbl").on("focus", ".keyboard", function() {

$('.keyboard').keypad({
var leng=$(this).attr('id').length;
var last = $(this).attr('id').substr(leng-4);
}); //not working

}); 
```

**如果我在里面尝试`$('button[id^="product"]').click()`它正在工作并显示键盘**

```
var count = 1;
$('button[id^="product"]').click(function () {
//adding row to table : WORKING FINE

$('.keyboard').keypad({
var leng=$(this).attr('id').length;
var last = $(this).attr('id').substr(leng-4);
}); // working but variable are being changed with parent

count++;         
}); 
```

我的问题是当我在主函数中添加它时，其中的变量`keypad()`会随着主函数而变化。如果数量发生变化，我需要更改该行的价格。我怎样才能获得`var leng = $(this).attr('id').length;`元素`.keyboard`？我试过`$(this).children().attr('id').length;`但没有。我需要`var leng = $(this).attr('id').length;`在键盘功能中分别为每一行设置。非常感谢您的帮助！

# javascript - 访问变量中动态创建的内容

> ID：14350895
> 
> 赞同：0
> 
> 时间：2013-01-16T03:26:10.877
> 
> 标签：javascript, jquery

我想使用 jquery 在 javascript 中创建一些动态元素，将它们弹出到变量中，然后访问它们。我想知道以下是否可能？

```
var content=$("<div>Person<div>Name</div><div>Surname</div></div>");
content.find("div").each(function(){
//do something
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:31:10.893

JQuery 提供了可以像这样使用的[.each方法。](http://api.jquery.com/each/)

```
var content=$("<div>Person<div>Name</div><div>Surname</div></div>");
content.find("div").each(function(){
   $(this).addClass( "foo" );
}); 
```

但显然，只有将它们添加到 DOM 时，更改才会可见，因为现在这些元素位于单独的[DocumentFragment](http://www.google.com/url?sa=t&rct=j&q=documentfragment&source=web&cd=2&cad=rja&ved=0CD8QFjAB&url=https://developer.mozilla.org/en-US/docs/DOM/DocumentFragment&ei=1B72UOPdPIm0rAfp5oHwBQ&usg=AFQjCNGF0eq4FA9ENSINM9enr63_LF0DQA&bvm=bv.41018144,d.bmk)中。

# css - 网站加载问题

> ID：14350896
> 
> 赞同：0
> 
> 时间：2013-01-16T03:26:15.667
> 
> 标签：css, wordpress, slider

我的网站[(Film Blurb)](http://www.filmblurb.org)加载有问题。当您在浏览器中指向 URL 并且它最初加载时，CSS 看起来有问题，文本和图像看起来很有趣，并且在实际完成加载过程之前没有正确格式化。特别是，滑块在完全加载之前看起来不正常且不成比例。执行此操作后，所有元素都很好，但这是我不想处理的问题。我一直在互联网上寻找如何解决这个问题。我正在使用 Wordpress，并且我尝试了不同的插件，这些插件应该可以提高速度并创建缓存文件和类似的东西。所有这些都没有解决这个问题。

有没有办法可以解决这个问题？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:35:11.760

滑块的一种快速解决方案是在 CSS 中分配每张幻灯片的宽度/高度属性。延迟是由于我们等待 JavaScript 控制并分配维度而引起的。

```
.sd2-slide-background {
    width: 596px;
    height: 356px;
} 
```

我认为整体延迟是由外部 Twitter 脚本挂起引起的。您可以将它移到页面下方，超出所有其他外部 JS 脚本吗？

```
<script type='text/javascript' src='http://platform.twitter.com/widgets.js?ver=1316526300'>
</script> 
```

# python - Python：如何比较字典中不同键的值，然后删除重复项？

> ID：14350899
> 
> 赞同：0
> 
> 时间：2013-01-16T03:26:46.840
> 
> 标签：python

我正在解析 100 多个遵循相同格式的文件。例如，对于一个文件，我有一个由列表中的两个键和多个值组成的字典。

```
 temp2 = {
  '0.1995': ['X3:GATE', 'IN1', 'IN1', 'X7:GATE', 'X4:GATE', 'IN2', 'IN2', 'X8:GATE'],
  '0.399': ['X4:GATE', 'Y', 'Y', 'X3:GATE', 'Y', 'X8:SRC', 'X1:GATE', 'IN0', 'IN0', 'X5:GATE'] 
```

下面是创建 temp2 字典的代码：

```
#temp_delvt_list, temp_pin_list is from an external function
for delvt, pin in zip(temp_delvt_list, temp_pin_list):
                temp[delvt].append(pin) #dictionary with delvt and pin names for cell

            for line in SPFFile1:
#                   print line
                for delvt_keys,pin_values in temp.items():
#                   if re.match('[RC].*(?:i%s)' % '|'.join(pin_values), line): //couldn't get working
                    if re.search('(?i)' '|'.join(pin_values),line) and re.match('R',line):
                        #print delvt_keys
                        line_split = line.split(" ")
                        temp_list.append(delvt_keys)
                        temp_list.append(delvt_keys) #duplicated to create balanced list with temp_search_list
                        temp_search_list.append(line_split[1])
                        temp_search_list.append(line_split[2])
#                       print temp_list
#                       print temp_search_list
            SPFFile1.close()
            for d, p in zip(temp_list, temp_search_list):
                #print temp2[d]
            #   print re.sub(':SRC',':ISI',p)
                temp2[d].append(p) #dictionary with delvt and pin names for cell
#           print temp2

} 
```

我正在尝试搜索每个键的值，然后搜索没有 Y 值的键 (0.1995)，删除为该键出现的所有值，这些值也出现在具有 Y 值的键 (0.399) 中。键值为没有硬编码，可能会改变。

输出应该是：

```
temp2 = {
  '0.1995': ['X3:GATE', 'IN1', 'IN1', 'X7:GATE', 'X4:GATE', 'IN2', 'IN2', 'X8:GATE'],
  '0.399': ['Y', 'Y','Y', 'X8:SRC', 'X1:GATE', 'IN0', 'IN0', 'X5:GATE']
} 
```

这是我到目前为止想出的代码：

```
 for test_d, test_p in temp2.items():
            if not re.search('Y', ' '.join(test_p)) :
                for x in test_p:
                    print x
            else:
                for y in test_p:
                    print y 
```

我认为我应该用我比较的任何一个列表替换打印语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:53:10.677

可能你正在寻找

```
>>> temp2 = {
  '0.1995': ['X3:GATE', 'IN1', 'IN1', 'X7:GATE', 'X4:GATE', 'IN2', 'IN2', 'X8:GATE'],
  '0.399': ['X4:GATE', 'Y', 'Y', 'X3:GATE', 'Y', 'X8:SRC', 'X1:GATE', 'IN0', 'IN0', 'X5:GATE']
}
>>> _set = set(temp2['0.1995'])
>>> temp2['0.399'] = [e for e in temp2['0.399'] if e not in _set]
>>> import pprint
>>> pp = PrettyPrinter(indent = 4)
>>> pp.pprint(temp2)
{   '0.1995': [   'X3:GATE',
                  'IN1',
                  'IN1',
                  'X7:GATE',
                  'X4:GATE',
                  'IN2',
                  'IN2',
                  'X8:GATE'],
    '0.399': ['Y', 'Y', 'Y', 'X8:SRC', 'X1:GATE', 'IN0', 'IN0', 'X5:GATE']}
>>> 
```

# colors - OziExplorer 所说的“RGB 值”是什么意思？

> ID：14350901
> 
> 赞同：1
> 
> 时间：2013-01-16T03:27:00.443
> 
> 标签：colors, rgb

[OziExplorer 文件格式文档](http://www.rus-roads.ru/gps/help_ozi/fileformats.html)将其前景和背景颜色字段描述为“RGB 值”。我已经尝试了大约一个小时来弄清楚这意味着什么。例如，以下是 OziExplorer 导出的一些颜色：

*   红色：**5450740**
*   绿色：**65280**
*   蓝色：**16711680**
*   灰色：**12632256**
*   白：**16777215**
*   “透明”：**13158342**

我不能 100% 确定，但从外观上看，红色、绿色和蓝色**完全**是红色、绿色和蓝色，意思是**#FF0000**等。

我要做的是了解上述数字的含义。颜色**(255, 0, 0)**和数字**5450740**之间的联系是什么？透明度从何而来？有人可以帮我解决这个问题吗？

* * *

我确实注意到了一些有趣的事情。十六进制值**#FF0000**具有十进制值**16711680**，这是 Ozi Explorer 输出的蓝色值。有人会认为**#FF0000**意味着红色。此外，白色 ( **16777215** ) 具有十六进制值**#FFFFFF**，根据 #RRGGBB 标准，它至少是“正确的”。

* * *

**编辑：**在尝试使用十进制值**#FF0000**、**#00FF00**和**#0000FF**（红色、绿色和蓝色）创建航点文件后，我发现 OziExplorer 确实交换了红色和绿色。不过，我仍然不知道它*为什么*会这样做，而且我不知道透明度在哪里适合这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:40:16.730

好吧，这些颜色似乎只是正常的 24 位 RGB 值，但是是镜像的。红色是**#0000FF**，绿色是**#00FF00**，蓝色是**#FF0000**。事实证明，没有“alpha通道”，只有颜色值**#C6C7C8**，意思是“透明”。

# search - jquery自动完成与django

> ID：14350905
> 
> 赞同：0
> 
> 时间：2013-01-16T03:27:27.557
> 
> 标签：search, jquery-autocomplete, django-haystack

我找不到任何带有下拉搜索结果和 django haystack 的客户端自动完成示例。我研究了 django-selectable 但它不使用文本字段。如何将 jquery 自动完成与 django haystack 集成

```
 @login_required
def autocomplete(request):
    if 'term' in request.GET:
        people = Person.objects.filter(
            first_name__contains=request.GET['term']
        )[:10]
        print people.count()
    return HttpResponse( simplejson.dumps( [ people.first_name for person in people ] ) ) 
```

出于某种原因，我在调试模式下的 google 检查元素中出现 javascript 错误：

```
'QuerySet' object has no attribute 'first_name' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T04:08:59.340

它应该是 person.first_name 而不是 people

# vb.net - 在 VB.NET 中将大文件上传到 FTP 时出现套接字错误

> ID：14350912
> 
> 赞同：1
> 
> 时间：2013-01-16T03:28:23.477
> 
> 标签：vb.net, sockets, ftp

请考虑下面的代码，它适用于小文件（小于 50 MB），但 100 MB 或更大的文件会崩溃。并给出以下错误。

“无法将数据写入传输连接：无法对套接字执行操作，因为系统缺少足够的缓冲区空间或队列已满。”

```
'Method
Private Sub Upload(ByVal source As String, ByVal target As String, ByVal credential As NetworkCredential)
    Dim request As FtpWebRequest = DirectCast(WebRequest.Create(target), FtpWebRequest)
    request.Method = WebRequestMethods.Ftp.UploadFile
    request.Credentials = credential
    request.Proxy = Nothing
    Dim reader As New FileStream(source, FileMode.Open)
    Dim buffer(Convert.ToInt32(reader.Length - 1)) As Byte
    reader.Read(buffer, 0, buffer.Length)
    reader.Close()
    request.ContentLength = buffer.Length
    Dim stream As Stream = request.GetRequestStream
    stream.Write(buffer, 0, buffer.Length)
    stream.Close()
    Dim response As FtpWebResponse = DirectCast(request.GetResponse, FtpWebResponse)
    response.Close()
End Sub

'Calling Function
Dim credential As New NetworkCredential("FTPUserName", "FTPPassword")

Upload(FileName.Zip, "ftp://abc.com/Location/FileName.Zip", credential) 
```

请告诉我我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T22:41:08.693

请使用此脚本。效果很好，我已经用 200+ GB 的文件对其进行了测试。

```
Private Sub Upload(ByVal sourceFiles() As String)
    Dim cm As ConnectionManager = Dts.Connections.Add("FTP")
    cm.Properties("ServerName").SetValue(cm, Dts.Variables("User::FTPServerName").Value.ToString())
    cm.Properties("ServerUserName").SetValue(cm, Dts.Variables("User::FTPUserName").Value.ToString())
    cm.Properties("ServerPassword").SetValue(cm, Dts.Variables("User::FTPPassword").Value.ToString())
    cm.Properties("ServerPort").SetValue(cm, "21")
    cm.Properties("Timeout").SetValue(cm, "0")
    cm.Properties("ChunkSize").SetValue(cm, "1000")
    cm.Properties("Retries").SetValue(cm, "1")
    Dim ftp As FtpClientConnection = New FtpClientConnection(cm.AcquireConnection(Nothing))
    ftp.Connect()
    ftp.SendFiles(sourceFiles, Dts.Variables("User::FTPFolder").Value.ToString(), True, False)
    ftp.Close()
End Sub 
```

谢谢

# ruby-on-rails - Rails嵌套has_one：无法删除现有记录

> ID：14350914
> 
> 赞同：23
> 
> 时间：2013-01-16T03:28:28.877
> 
> 标签：ruby-on-rails, nested-attributes, has-one

我正在尝试更新“问题”模型中的嵌套 question_output 属性。一个问题 has_one question_output。*如果*数据库中没有现有的 question_outputs，则一切正常。但是，如果记录已经有 question_output，我在尝试更新时会得到以下信息：

> 无法删除现有的关联 question_output。将外键设置为 nil 后，记录无法保存。

我原以为 allow_destroy 会解决这个问题，但可惜 - 不高兴。诚然，我以前没有使用过 has_one 。但是，如果有人对如何解决此问题有任何想法，我将不胜感激。相关代码如下：

表格：

```
= form_for [@question.project, @question], :as => :question, :url => admin_project_question_path(@question.project, @question) do |f|
  = render '/shared/form_errors', :model => @question
  = f.fields_for :question_output_attributes do |qo|
    .field
      = qo.label :question_type
      = qo.select :question_type, QuestionOutput::QUESTION_TYPES
    .field
      = qo.label :client_format
      = qo.select :client_format, QuestionOutput::CLIENT_FORMATS
    .field
      = qo.label :required
      = qo.check_box :required
    .field
      = qo.label :min_input, 'Length'
      = qo.text_field :min_length
      = qo.text_field :max_length
    = f.submit 'Save Question Formatting' 
```

问题模型：

```
class Question < ActiveRecord::Base
  has_one :question_output
  accepts_nested_attributes_for :question_output, :allow_destroy => true
end 
```

问题输出模型：

```
 class QuestionOutput < ActiveRecord::Base
   belongs_to :question
 end 
```

问题控制器：

```
class Admin::QuestionsController < ApplicationController

 def show
   @question = Question.find(params[:id])
   @question.question_output ||= @question.build_question_output
 end 

 def update
    @question = Question.find(params[:id])
    if @question.update_attributes(params[:question])
      flash[:notice] = t('models.update.success', :model => "Question")
      redirect_to admin_project_question_path(@question.project, @question)
    else
      flash[:alert] = t('models.update.failure', :model => "Question")
      redirect_to admin_project_question_path(@question.project, @question)
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-16T04:10:06.480

在您的问题模型中，将 has_one 行更改为：

```
has_one :question_output, :dependent => :destroy 
```

上允许您通过HTML 属性从问题表单`:allow_destroy => true`中删除 question_output。`accepts_nested_attributes``_destroy=1`

`:dependent => :destroy`删除问题时会删除 question_output 。**或者在您的情况下**，将 question_output 替换为新问题时会删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T22:44:13.930

每次创建新记录都是某种开销。您只需包含带有记录 id 的隐藏字段，它将被更新而不是销毁

```
= qo.hidden_field :id 
```

# objective-c - 在视图之间传递数据的最有效方式

> ID：14350915
> 
> 赞同：1
> 
> 时间：2013-01-16T03:28:29.363
> 
> 标签：objective-c

假设我需要将某些数据（如数组）保存到 NSUserDefaults。

如果我需要从我的应用程序中的不同位置访问该数据，是否更有效地将其从视图控制器传递到视图控制器，或者每次需要时将其从 NSUserDefaults 中拉出？

请记住，我需要保存它，因此请忽略保存数据所涉及的开销。基本上，在创建和设置 ivar 或从 NSUserDefaults 加载数据时是否有更多开销？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T03:43:23.460

我总是更喜欢创建一个可以从应用程序中的任何位置访问的单例对象来保存此类信息。例如，假设您创建了一个名为`DataStore`. 像这样创建一个类方法`sharedDataStore`：

```
@implementation DataStore

static DataStore *sharedGameStore_ = nil;

+ (DataStore *)sharedDataStore {
    if (sharedDataStore_ != nil) return sharedDataStore_;
    static dispatch_once_t pred;        
    dispatch_once(&pred, ^{             
        sharedDataStore_ = [[DataStore alloc] init];
    });
    return sharedDataStore_;
} 
```

在`init`你的数据存储类的方法中你做了所有的设置，读入`NSUserDefaults`你有什么。然后添加属性和/或方法来读取/写入您需要使用的数据，并且您可以确保它被正确缓存等以进行多次读取。

然后，您可以从应用程序的任何位置包含该`.h`文件并调用：

```
[DataStore sharedDataStore] someMethodName] 
```

并确保您集中高效地读取和写入数据，因为您的应用程序只创建对象的一个​​实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T04:02:49.297

> 我总是更喜欢创建一个可以从应用程序中的任何位置访问的单例对象来保存此类信息。

我想一个例子是[这个](http://www.raywenderlich.com/21081/introduction-to-in-app-purchases-in-ios-6-tutorial)应用内购买教程中的 RageIAPHelper。

# c# - 使用 asmx Web 服务处理大型数组

> ID：14350918
> 
> 赞同：0
> 
> 时间：2013-01-16T03:28:37.613
> 
> 标签：c#, .net, web-services, asmx

我们的旧版 Web 服务中使用了以下 Web 方法。

```
[WebMethod(Description = "Get Bulk Data")]
public string[] getBulkData(string[] arrInput)
{
    string[] arrResults = new string[arrInput.Length];  
    using(SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["mydb"].ToString()))
    {
        conn.Open();
        //some db operations...
        for (int arrIndex = 0; arrIndex < arrInput.Length; arrIndex++) //arrInput size can be very large
        {
             arrResults[arrIndex] = getResult();
        }
    }
    return arrResults;            
}
private string getResult()
{
    string r;
    using (SqlConnection thisConn = new SqlConnection(ConfigurationManager.ConnectionStrings["mydb2"].ToString()))
    {
        //some db operations
        //assign values to r
    }
    return r;
} 
```

Web 方法`getBulkData`接受一个字符串数组，查询数据库并返回一个大小相同的结果数组。结果来自一个私有方法，`getResult()`该方法也将查询数据库。

我不确定这是否是正确的实现，但我倾向于说不是，因为有多个查询数据库，这可能会影响 getBulkData 的性能。显然，该数组中的元素越多，处理时间就越长。

如果我在 getBulkData() 中创建 thisConn 对象，并将其传递给 getResult，那么在提高性能方面会有什么不同吗？在这种情况下，处理大型数组的最佳方法是什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:08:15.990

数据库事务需要时间来处理。如果您在循环中查询数据库数百或数千次，您的性能肯定会受到打击。如果可能，尝试将 GetResult 方法修改为只触发一次，但将结果保存在 IEnumerable 类型的属性中。这会将所有记录放在您的计算机内存中，并允许您使用 LINQ 对其运行查询。您将看到使用这种方法显着提高性能。[你可以在这里](https://stackoverflow.com/questions/11634285/how-do-i-return-an-ienumerable-using-ado-net)看到一个例子。

# python - 在python中定义以整数结尾的url的路由

> ID：14350920
> 
> 赞同：15
> 
> 时间：2013-01-16T03:28:42.980
> 
> 标签：python, flask, routes

这是我的python代码的一部分：

```
@app.route("/<int:param>/")
def go_to(param):
    return param 
```

上面的函数将一个 url 路由`www.example.com/12`到这个函数。

如何声明参数规则以将以整数结尾的 url 重定向`www.example.com/and/boy/12`到此函数？

我正在使用 Flask 框架。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T04:05:34.887

您只需将“and/boy”添加到您的参数中：

```
@app.route("/and/boy/<int:param>/")
def go_to(param):
    return param 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-16T03:50:59.290

您将需要`Werkzeug routing`.

*完整代码：*

```
from flask import Flask
from werkzeug.routing import BaseConverter

app = Flask(__name__)

class RegexConverter(BaseConverter):
        def __init__(self, url_map, *items):
                super(RegexConverter, self).__init__(url_map)
                self.regex = items[0]

app.url_map.converters['regex'] = RegexConverter

# To get all URLs ending with "/number"
@app.route("/<regex('.*\/([0-9]+)'):param>/")
def go_to_one(param):
    return param.split("/")[-1]

# To get all URLs ending with a number
@app.route("/<regex('.*([0-9]+)'):param>/")
def go_to_one(param):
    return param.split("/")[-1]

# To get all URLs without a number
@app.route("/<regex('[^0-9]+'):param>/")
def go_to_two(param):
    return param

@app.route('/')
def hello_world():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-04-23T03:14:03.637

```
@app.route('/profile/<username>')
def profile(username):
    return f"you are in {username} page" 
```

如果您需要特定的数据类型，例如像这样的整数，您可以使用任何数据类型传递参数

```
@app.route('/profile/<int:id')
def profile(id):
    return f"your profile id is {id}" 
```

# javascript - 如何在脚本中的特定位置添加文本？

> ID：14350921
> 
> 赞同：0
> 
> 时间：2013-01-16T03:28:45.023
> 
> 标签：javascript, text

如何在特定位置动态添加文本？我可以：

```
var txt = document.createTextNode("text") 
```

但是后来我动不了了！如果这是一个简单的问题，我很抱歉，但我对 JavaScript**非常陌生：-/**

**编辑**例如：如果您必须在脚本内部的坐标 450、238 处添加“这是一个文本”，您会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:46:04.737

这取决于您添加的内容以及添加的位置。例如，如果您将文本添加到空节点，那么 innerHtml 可能是最简单、最快和最高效的方法。 `document.getElementById('container').innerHtml = 'text I want to insert'`

需要注意的是，它将用您的文本完全替换容器元素的内容，因此如果您只想添加到文本中，则无法执行此操作。

否则，正如 pst 在对您的问题的评论中所说，调用`document.getElementById('container').addChild(txtNode)`将向容器节点添加一个新子节点。

# python - 在 GAE 中实现 URL slug

> ID：14350922
> 
> 赞同：2
> 
> 时间：2013-01-16T03:29:04.300
> 
> 标签：python, google-app-engine, slug

我正在尝试在我的应用程序（基于 python）中实现 URL slugs。我希望 slugged URL 的格式为`myhost/{post_id}/{post_title}`.

当我尝试使用上述 slugged URL 格式访问该页面时，我收到一个错误并且（在 Chrome 中，错误显示 - 意外令牌 <）。`/<post_title>`如果我从 URL 中删除，页面加载正确。具体来说，我注意到一旦在 之后有一个“正斜杠” `<post_id>`，我就会遇到问题。没有额外的斜线（额外目录），一切正常

我的代码是：

```
class mainhandler(webapp.RequestHandler):
    def get(self):
        if (self.request.path == '/test'):
            path = os.path.join (os.path.dirname (__file__), 'test.htm')
            self.response.headers ['Content-Type'] = 'text/html'
            self.response.out.write (template.render (path, {}))
        else:                       
            path = os.path.join (os.path.dirname (__file__), 'index.htm')            
            self.response.headers ['Content-Type'] = 'text/html'                 
            self.response.out.write (template.render (path, {}))

    application = webapp.WSGIApplication( [('/.*', mainhandler)],  debug=True) 
```

基本上，我想加载`index.htm`文件，在该文件上，我有 JavaScript，它应该`post-id`从 URL 中提取并用它做一些事情。

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:57:39.137

您将需要修改您在`application`. 如果我理解正确，你会想要做这样的事情：

```
application = webapp.WSGIApplication(
    [('/(.*)/(.*)', mainhandler),
     ('/.*', mainhandler)],
    debug=True) 
```

然后将您定义`mainhandler`为：

```
class mainhandler(webapp.RequestHandler):
    def get(self, post_id=None, post_title=None): 
```

尽管目前您似乎没有对它们做任何事情，但一旦进入您的系统，`mainhandler`您将拥有这些变量可供您使用。您的第一个映射不起作用的原因是它没有设置为处理`/`URL 中的其他 's 和项目。

根据我们随后的对话，`syntaxError`（这是一个与 JavaScript 相关的错误）的原因是`/`因为`include/load.js`. 如果没有该前缀，则路径是相对于当前位置的。在 的情况下`localhost:8080/1234/a-test-case`，它变为`/1234/a-test-case/include/load.js`，它不会映射到任何特定的内容`app.yaml`，因此会落入`.*`处理程序（而**不是**您定义的 Javascript 处理程序），它会将您返回到主脚本并遵循那里的处理程序路径。您现在的链接`.js.`返回您的`index.html`而不是您的`.js`文件，这会导致错误（类似于可以在[此处](https://stackoverflow.com/questions/7714896/firebug-returns-syntax-error-in-doctype)找到的内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:05:51.187

我会考虑使用支持扩展路由和 Python 2.7 的 webapp2。

[WebApp2 路由](http://webapp-improved.appspot.com/guide/routing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:47:53.530

在与 RocketDonkey 进行了广泛的讨论后，我尝试了一些可行的方法。

我改变了我的脚本文件

```
<script src="include/load.js" type="text/javascript"></script> 
```

至

```
<script **src="/include/load.js"** type="text/javascript"></script> 
```

RocketDonkey 对工作解决方案的解释：当您使用正斜杠时，您是在说“从根目录获取此 URL 路径”。但是没有它，就目前的位置而言

这解释了为什么当我的 url 只是 localhost:8081/1234 而在我有第二个目录的第二种情况下原始代码有效

**注意：这里描述的解决方案与 RocketDonkey 的原始提案一起使用**

# iphone - 渐变方向从左到右

> ID：14350926
> 
> 赞同：4
> 
> 时间：2013-01-16T03:29:23.180
> 
> 标签：iphone, ios, xcode

我完全被这个问题难住了，它应该很简单，以至于让我发疯。

我正在使用这个苹果反射教程。

[苹果反射示例](http://developer.apple.com/library/ios/#samplecode/Reflection/Listings/MyViewController_m.html#//apple_ref/doc/uid/DTS40008063-MyViewController_m-DontLinkElementID_6)

它们具有从上到下显示的图像渐变。

*   如何从左到右进行渐变
*   如何水平翻转图像。在他们的示例中，他们垂直翻转图像。

有什么帮助吗？

```
//The gradient code is here but I don't know what should be the gradient start / end points
CGImageRef CreateGradientImage(int pixelsWide, int pixelsHigh)
{
.....
gradientStartPoint = CGPointZero;
        gradientEndPoint = CGPointMake(0, pixelsHigh);
}

//similarly I know the image flip happens here but for life of me I cannot make it flip horizontally

- (UIImage *)reflectedImage:(UIImageView *)fromImage withHeight:(NSUInteger)height
{
.....
CGContextTranslateCTM(mainViewContentContext, 0.0, height);
        CGContextScaleCTM(mainViewContentContext, 1.0, -1.0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T03:45:55.390

尝试这个：

```
//horizontal gradient
CGImageRef CreateGradientImage(int pixelsWide, int pixelsHigh)
{
    .....
    gradientStartPoint = CGPointZero;
    gradientEndPoint = CGPointMake(pixelsWide, 0);
}

//horizontal flip

- (UIImage *)reflectedImage:(UIImageView *)fromImage withWidth:(NSUInteger)width
{
    .....
    CGContextTranslateCTM(mainViewContentContext, width, 0,0);
    CGContextScaleCTM(mainViewContentContext, -1.0, 1.0);
} 
```

对于水平翻转，您应该添加一个新方法，因为您必须指定宽度，而不是高度。

祝你好运！

**编辑1：**

为了获得渐变，您应该对反射图像添加另一个修改：withWidth。

```
- (UIImage *)reflectedImage:(UIImageView *)fromImage withWidth:(NSUInteger)width
{
    .....
    CGImageRef gradientMaskImage = CreateGradientImage(width, 1);
    .....
} 
```

# git - 合并两个 git 分支之间的差异并将其应用于工作副本

> ID：14350930
> 
> 赞同：7
> 
> 时间：2013-01-16T03:29:53.920
> 
> 标签：git, merge, branch

我有一个开发存储库和一个部署存储库。部署代码时，代码库会从 dev 中签出，rsync'd 到部署工作副本，并提交到部署存储库。因此，这些存储库是独立的，但相似。

在 dev 上，我有一个分支。我想将该分支“应用”到部署工作副本。换句话说，我想将分支上的所有提交（不包括合并）重播到部署存储库（如果可能的话，在一次提交中），或者在分支和主服务器之间进行差异并将其应用于部署工作副本。

我认为类似的 svn 命令将是：

```
svn merge $SVN_REPO/trunk $SVN_REPO/branch/dev_branch deploy_dir 
```

... deploy_dir 甚至不需要是工作副本。

这可能吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-16T03:42:54.930

一种方法是从另一个 repo 获取分支：

```
cd <deploy-path>
git remote add devel <devel-path>
git fetch devel

git cherry-pick devel/master...devel/branch  # Assuming your branch is based on master 
```

另一种方法是创建一个补丁然后应用它：

```
git diff commitid1 commitid2 > something.patch
cd deploy
git apply something.patch 
```

# iphone - 本地化NameOfStringEncoding 不起作用

> ID：14350937
> 
> 赞同：3
> 
> 时间：2013-01-16T03:30:39.800
> 
> 标签：iphone, ios, string, nsstring

```
const NSStringEncoding *enc = [NSString availableStringEncodings];
while (*enc != 0) {
    NSString *name = [NSString localizedNameOfStringEncoding:*enc];
    NSLog(@"%@ %d",name, *enc);
    enc++;
} 
```

名称为空，我使用的是 IOS 6，这是一个错误吗？还是我做错了什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:11:04.753

我调整了你的代码

```
NSLog(@"%@ %d (0x%x)",name, *enc, *enc); 
```

所以我们可以看到十六进制和十进制的 NSStringEncoding。在 iOS 6.1 iPhone 模拟器上运行你的测试代码，我总共得到 88 个不同的 NSStringEncoding，其中一些返回有意义的本地化NameOfStringEncoding，它们是：

```
Unicode (UTF-16) 10 (0xa)
Unicode (UTF-7) -2080374528 (0x84000100)
Unicode (UTF-8) 4 (0x4)
Unicode (UTF-32) -1946156800 (0x8c000100)
Unicode (UTF-16BE) -1879047936 (0x90000100)
Unicode (UTF-16LE) -1811939072 (0x94000100)
Unicode (UTF-32BE) -1744830208 (0x98000100)
Unicode (UTF-32LE) -1677721344 (0x9c000100)
Non-lossy ASCII 7 (0x7) 
```

据推测，所有支持的编码*都没有本地化名称。*

# php - 使用 Heroku 的 Facebook 应用程序

> ID：14350942
> 
> 赞同：1
> 
> 时间：2013-01-16T03:31:21.567
> 
> 标签：php, facebook, heroku, facebook-apps, heroku-toolbelt

我刚刚创建了我的第一个 Facebook 应用程序并选择使用 Heroku。我按照说明下载了 Heroku 工具带。顺便说一句，我在 php.ini 中这样做。下一步是通过输入 Heroku 登录名然后我的电子邮件和密码登录并上传您的 SSH 密钥...在我这样做之后，它确实说身份验证成功，但与示例不同，它不会创建/要求我创建一个 ssh钥匙。如果我尝试通过键入 git clone git@heroku.com 来获取应用程序的源代码来进入下一步：***我的 heroku url thingy*** .git -o heroku...当我这样做时显示：致命：目标路径'***我的heroku url thingy***已经存在并且不是一个空目录...最后我不知道从哪里开始编辑我的应用程序...在我的计算机（Windows）上创建了一个文件...所以谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:39:35.347

首先进入文件夹`c:/program files/heroku`，然后使用命令

`rm -r myheroku url thingy`

这将删除您之前创建的现有目录和文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T11:15:39.337

首先，您需要 使用命令**提交**

```
$ git commit -am "changed" 
```

然后**推送**使用

```
$ git push 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T22:57:06.897

好的，所以我终于修复了它...命令 git clone git@heroku.com:my-heroku-thingy.git -o heroku 没有工作...所以我用 cd my-heroku 更改了目录（感谢您的回答） -thingy 然后提交然后推送

# angularjs - Angular 指令 ng-selected 不更新模型

> ID：14350946
> 
> 赞同：3
> 
> 时间：2013-01-16T03:31:40.173
> 
> 标签：angularjs

在选项上使用角度指令 ng-selected 时，绑定模型在您手动更改选择之前不会更新。这是设计好的吗？

[http://jsfiddle.net/PqHsL/1/](http://jsfiddle.net/PqHsL/1/)

```
<div ng-app ng-init="colors=['red', 'yellow', 'blue']">
  <select ng-model=selectedElement>
    <option ng-repeat="color in colors" value="{{color}}" ng-selected="$last">{{color}}</option>
  </select>

  selectedElement: {{ selectedElement }}
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T04:43:21.270

我不知道它是否按设计工作。

我的印象是 ng-selected 和 ng-model 不能很好地配合使用。（请注意，[ng-selected API 页面](http://docs.angularjs.org/api/ng.directive%3angSelected)在示例选择列表中不使用 ng-model。）

以下是解决此问题的两种方法：

1.  除了设置 ng-selected 之外，还设置绑定模型。ng-init 也可以用于此：
    `ng-init="colors=['red', 'yellow', 'blue']; selectedElement=colors[colors.length-1]"`

2.  设置绑定模型，不要使用 ng-selected，使用 ng-options：
    `...ng-init as above...`
    `<select ng-model=selectedElement ng-options="color for color in colors">{{color}}</select>`

[小提琴](http://jsfiddle.net/mrajcok/z6Vg8/)。

解决方案 1 有那个奇怪的“空白”/空选项，当您选择某些东西时它会消失。解决方案 2 没有空选项，并且不那么冗长。（所以是的，我喜欢解决方案 2。）

如果我们可以将模型设置为预选选项，我不确定 ng-selected 的用例是什么。我们也可以稍后以编程方式更改选择 - 请参阅[Fiddle](http://jsfiddle.net/mrajcok/z6Vg8/)中的 ng-click 。

# c - 使用原始源地址重放 http 流量

> ID：14350951
> 
> 赞同：2
> 
> 时间：2013-01-16T03:32:03.130
> 
> 标签：c, http, sockets, setsockopt

我想构建一个包含客户端和 Web 服务器的测试平台，我可以在其中向 Web 服务器重放一些记录的 http get 请求。所以我打算用原始源地址和端口号的请求来精确模拟实际流量。

为了构建客户端，我希望可以使用套接字选项 IP_FREEBIND 绑定到任何可能的源地址和端口号。为此目的是否有任何已知代码？（我真的不想重新发明轮子）我应该按照[这个线程](https://stackoverflow.com/questions/13044388/transmitting-udp-packages-with-source-address-0-0-0-0)的建议使用原始套接字吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T04:00:20.877

IP_FREEBIND 用于*侦听*当前主机尚未配置的地址*，*因此如果稍后配置了该地址，您的程序可以接收到它的连接。它不允许您发送假装来自另一台计算机的数据包。你需要一个原始套接字。

如果您在客户端伪造数据包的源地址，请记住服务器会将其响应发送到该伪造地址。您的客户端必须能够接收这些返回的数据包，因为您需要进行双向通信以建立 TCP 连接，然后才能发送实际的 HTTP 请求。您可以使用原始套接字来实现您自己的整个假 IP 层，但在隔离网络上进行测试并使用您希望测试请求来自的任何 IP 地址配置客户端计算机可能会简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T01:12:08.190

您可以尝试使用原始源地址重放 http 流量的[tcpcopy 。](https://github.com/wangbin579/tcpcopy)

# jquery - jquery文件上传错误

> ID：14350952
> 
> 赞同：0
> 
> 时间：2013-01-16T03:32:31.960
> 
> 标签：jquery, jquery-plugins, fileapi

我正在使用一个 jquery 插件来上传内容。这个插件使用 File api。当我使用 chrome 时出现错误显示

```
 Uncaught TypeError: Object #<File> has no method 'webkitSlice'. 
```

这是存在的错误

```
 /**
 * Return the proper slice (packet)
 * @param {Number} packetId 
 * @returns {Blob} Returns a new Blob object containing the data in the specified range of bytes
 */
function getPacket(packetId){

    var startByte = packetId  * self.packetSize,
    endByte = startByte+self.packetSize,
    packet;

    if ('mozSlice' in self.file) {
        // mozilla
        packet = self.file.mozSlice(startByte, endByte);
    } else {
        // webkit
        packet = self.file.webkitSlice(startByte, endByte); // here
    }
    return packet;
} 
```

如果有人知道这件事，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:49:12.147

该方法`webkitSlice`很久以前就已弃用，并且不再用于该对象。请尝试`slice()`：

```
packet = self.file.slice(startByte, endByte); 
```

# three.js - 如何使用以前的转换组合新的相机旋转？

> ID：14350953
> 
> 赞同：2
> 
> 时间：2013-01-16T03:32:31.893
> 
> 标签：three.js, webgl, transformation

我正在尝试在 THREE.js 中实现类似于 FlyControls 的东西，但我无法终生弄清楚如何正确旋转相机的俯仰角：

[http://radiantjs.herokuapp.com/](http://radiantjs.herokuapp.com/)

按 A 或 Z 键“向上看/向下看”。因为该演示中的初始位置已经在偏航轴上旋转，所以俯仰基本上看起来像滚动。

我更新相机位置和旋转的代码如下：

```
/**
 * Updates this View. This is called once per frame.
 * 
 * @param {Number} delta The length of the frame (16 / milliseconds).
 */
update: function(delta) {

        if (this.velocity.length() < 0.15) {
            this.velocity.clear()
        } else {
            this.velocity.multiplyScalar(0.85 * delta)
        }

        if (this.velocity.x || this.velocity.y || this.velocity.z) {
            this.camera.position = this.camera.localToWorld(this.velocity.clone())
            this.camera.position.clamp(-16384, 16384)
        }

        if (this.rotation.length() < 0.15) {
            this.rotation.clear()
        } else {
            this.rotation.multiplyScalar(0.85 * delta)
        }

        if (this.rotation.x || this.rotation.y) {
            var rotation = this.rotation.clone().multiplyScalar(Math.PI / 180)
            this.camera.rotation.add(rotation)
        }
    } 
```

完整的代码也可以在这里找到： [https ://github.com/jdolan/radiantjs/blob/master/public/scripts/main/view.js#L291](https://github.com/jdolan/radiantjs/blob/master/public/scripts/main/view.js#L291)

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T21:14:53.430

A kind user in the THREE.js IRC channel explained that the easiest way to accomplish what I wanted to do was to wrap the camera in a separate object (a parent / container). Translation and yaw are applied to the container, while pitch is applied to the camera itself:

```
this.boom = new THREE.Object3D()
this.boom.position.copy(params.position)
this.boom.up.set(0, 0, 1)
this.boom.lookAt(new THREE.Vector3(0, 1, 0).add(params.position))

this.camera = new THREE.PerspectiveCamera(this.fov, this.aspect, 0.1, 4096)

this.boom.add(this.camera)
this.scene.add(this.boom) 
```

Then to apply my transform at each frame:

```
if (this.velocity.length() < 0.15) {
    this.velocity.clear()
} else {
    this.velocity.multiplyScalar(0.85)
}

if (this.velocity.x || this.velocity.y || this.velocity.z) {
    this.boom.translate(3, this.velocity.clone())
    this.boom.position.clamp(-16384, 16384)
}

if (this.avelocity.length() < 0.15) {
    this.avelocity.clear()
} else {
    this.avelocity.multiplyScalar(0.85)
}

if (this.avelocity.x || this.avelocity.y) {
    var rotation = this.avelocity.clone().multiplyScalar(Math.PI / 180)
    this.boom.rotation.y += rotation.y
    this.camera.rotation.x += rotation.x
} 
```

Works like a charm! Note that, again, yaw is applied to `this.boom` while pitch is applied to `this.camera`. This has the effect of rotating the camera relative to the boom, rather than relative to the scene.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T23:40:11.713

我的方法是先设置`camera.eulerOrder = "YXZ";`，然后我可以`camera.rotation.y`用作偏航和`camera.rotation.x`俯仰。

对于运动，我`camera.translateZ`用于前进/后退和`camera.translateX`扫射。因为我希望玩家总是向上/向下看，即使他们直接向上/向下看，我也使用`camera.position.y += velocity.y;`而不是`translateY`（基于旋转）。

我不确定这是否比使用容器更好或更差。

# php - strtotime 函数不需要返回值

> ID：14350954
> 
> 赞同：0
> 
> 时间：2013-01-16T03:32:43.147
> 
> 标签：php

我在让下面的代码正常工作时遇到问题，基本上我正在做的是检查 24 小时格式的时间戳变量的值是否在`1:00 PM`之后将其转换为 12 小时格式。当我回显该值时，它总是显示下午 6:00。问题是什么？

这是我获取`$timeToday`变量的方法

```
$timeToday = date("H:i A"); 
```

这是无法正常工作的代码：

```
 if ($timeToday>"12:59"){
            $timeConverted = date("h:i A", strtotime($timeToday));
            echo "You clocked out at: " . $timeConverted . "<br>";
        } else {
        echo "You clocked out at: " . $timeToday . "<br>";
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T03:48:08.260

您正在比较 2 个字符串，它们的格式不同。$timeToday 是上午/下午，而您将其转换为 24 小时制。

此外，无论哪种方式，代码都会打印 AM/PM。如果我理解正确，您不想打印 AM，只打印 PM。

```
 $format = strtotime($timeToday) > strtotime("12:59") ? "h:i A" : "h:i";
 $timeConverted = date($format, strtotime($timeToday));
 echo "You clocked out at: " . $timeConverted . "<br>"; 
```

# visual-studio - TeamFoundation Client v10 和 v11 之间的兼容性

> ID：14350960
> 
> 赞同：1
> 
> 时间：2013-01-16T03:33:46.693
> 
> 标签：visual-studio, tfs-sdk

我正在开发一个需要与 Team Foundation Server 交互的 WPF 应用程序，主要是检索一些工作项。为此，我使用了随 Visual Studio Team Explorer 2012 提供的 TeamFoundation Client 程序集 v11。该应用程序适用于已安装 Visual Studio Team Explorer 2012 的用户。但是，只有 Visual Studio Team Explorer 2010 的用户会遇到异常说“TeamFoundation Client v11”丢失。当我在我的应用程序中将 TeamFoundation 客户端程序集更改为 v10 时。现在，只有 Visual Studio Team Explorer 2012 的用户会收到异常提示“TeamFoundation Client v10”缺失。

如果用户必须拥有特定版本的 Visual Studio Team Studio 并且不同版本的 TeamFoundation 客户端程序集彼此不兼容，请告诉我？还是我犯了一个错误？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:08:50.120

当您使用 TFS 客户端对象模型时，该版本的对象模型必须安装在客户端计算机上。Visual Studio 2012 安装并使用 2012 版本的对象模型 (11.0.0.0)，2010 使用 2010 版本。

如果您希望您的应用程序与 Visual Studio 2010 和 2012 兼容，那么最好的选择是使用 TFS 2010 对象模型。您可以单独下载和安装对象模型，这样您就不需要并排安装 Team Explorer 或 Visual Studio。

[安装 TFS 客户端对象模型 2010](http://visualstudiogallery.msdn.microsoft.com/a37e19fb-3052-4fc9-bef7-4a4682069a75)，然后在 Visual Studio 2012 旁边安装[Visual Studio 2010 前向兼容性补丁](http://www.microsoft.com/en-us/download/details.aspx?id=29082)应该允许您的 2012 用户以及 2010 用户进行连接。

您还可以在 VS2010 旁边安装[TFS 客户端对象模型 2012](http://visualstudiogallery.msdn.microsoft.com/f30e5cc7-036e-449c-a541-d522299445aa)，但由于这需要安装 .NET 4.5，因此您将无法通过这种方式为使用 Windows XP 的客户端提供服务。

最后一种选择是构建应用程序/库的两个版本，一个针对 2010 对象模型，一个针对 2012 版本。您可以让安装程序决定安装哪个版本。

注意：最后一个场景可以通过抽象使用分支来扩展，并在运行时加载正确版本的 TFS 特定二进制文件。使用接口将这一切抽象出来。

# ms-access - 使用组合框中的选择填充文本框中的计算字段

> ID：14350964
> 
> 赞同：1
> 
> 时间：2013-01-16T03:34:32.543
> 
> 标签：ms-access, combobox, vba, ms-access-2003, calculated-field

我在这里先向您的帮助表示感谢。对功能不熟悉...

我有一个子表单，其中包含类型、数量和单位等字段列表。我想根据所选类型计算总金额。通过这样做，我尝试使用编码，但遇到了各种错误。

首先，“运行时错误'3078'：”Microsoft Jet 数据库引擎找不到输入表/查询“50000”。

我的代码是：

```
If Me.cmbTOL1 = "Type B" Then
Me.txtC1 = (DMax(Me.txtAmt1, 50000) * 0.055) / Me.txtNoofUnits1
End If 
```

其次，“运行时错误'2450'：”Mircosoft Access 找不到宏表达式或Visual Basic 代码中提到的“frmInformation”表格。

我的代码是：

```
If Me.cmbTOL1 = "Type M" Then
Me.txtC1 = (DMax(Me.txtAmt1, (2 * [Forms]![frmInformation]![GrossAmt])) * 0.015) / Me.txtNoofUnits1
End If 
```

编辑：

我正在尝试从 frmInformation 中获取值 [GrossAmt]。除了 [Forms]![frmInformation]![GrossAmt] 还有其他方法来检索值吗？

我并没有真正得到 DMax() 函数......但我已经将我的代码更改为这个......

```
If Me.cmbTOL1 = "Type B" Then 
   If Me.txtAmt1 > 50000 Then 
   Me.txtC1 = (Me.txtAmt1 * 0.055) / Me.txtNoofUnits1 
   Else 
   Me.txtC1 = (50000 * 0.055) / Me.txtNoofUnits1 
   End If 
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T08:03:54.507

从[DMin, DMax Functions](http://office.microsoft.com/en-us/access-help/dmin-dmax-functions-HA001228826.aspx)，语法是：

```
DMax(expr, domain[, criteria]) 
```

第二个参数*domain*应该是“*一个字符串表达式，用于标识构成域的记录集。它可以是表名，也可以是不需要参数的查询的查询名。* ”

但是您的代码为*域*参数提供了`DMax()`数值：

 *```
DMax(Me.txtAmt1, 50000)
DMax(Me.txtAmt1, (2 * [Forms]![frmInformation]![GrossAmt])) 
```

我不明白你想要完成什么。但是，如果您使用`DMax()`，则必须将表或查询的名称作为*域*参数。并且应该是*域中*`Me.txtAmt1`的字段名称或基于字段的表达式。

 *抱怨*Access 找不到表单“frmInformation”*的错误消息可能是因为表单未打开（因此不在 Forms 集合中），名称拼写错误，或者它实际上是另一个表单中包含的子表单。

您没有解释问题中的代码更新会发生什么。告诉我们当您在“立即”窗口中键入此行并按 时会发生什么`Enter`：

```
? [Forms]![frmInformation]![GrossAmt] 
```

`Ctrl`您可以使用+打开即时窗口`g`。当您在“立即”窗口中键入上述行时，`frmInformation`应在“表单视图”中打开表单。

您可以从“立即”窗口检查所有打开的表单的名称，就像 Access 看到的那样：

```
for each f in forms : ? f.Name : next 
```**

# google-profiles-api - Google Apps Profiles API：java.lang.NullPointerException：没有身份验证标头信息

> ID：14350971
> 
> 赞同：3
> 
> 时间：2013-01-16T03:35:16.100
> 
> 标签：google-profiles-api

```
public ContactFeed retrieveContacts(ContactsService service,
                                    Credential credential) throws Exception {

    URL url = new URL("https://www.google.com/m8/feeds/profiles/domain/my.domain.com/full");

    service.setOAuth2Credentials(credential);
    service.useSsl();
    service.setHeader("GData-Version", "3.0");

    ContactFeed contactFeed = new ContactFeed();

    do {
        ContactFeed feedResult = service.getFeed(url, ContactFeed.class);
        contactFeed.getEntries().addAll(feedResult.getEntries());

        if (feedResult.getNextLink() != null && feedResult.getNextLink().getHref() != null
                && !feedResult.getNextLink().getHref().isEmpty()) {
            url = new URL(feedResult.getNextLink().getHref());
        } else {
            url = null;
        }
    } while (url != null);

    return contactFeed;
} 
```

这是我检索配置文件的代码。运行此行时

```
ContactFeed feedResult = service.getFeed(query, ContactFeed.class); 
```

它会给出**java.lang.NullPointerException: No authentication header information**错误。

我的 Google 协作平台、Google 云端硬盘、Google Apps 配置、Google 电子邮件设置在 OAuth2 中运行良好。但是带有 OAuth2 的 Google Apps Profile 给出了**java.lang.NullPointerException: No authentication header information**。我在网上冲浪，他们说这是一个错误？他们所做的只是手动将 AccessToken 传递到标头中。反正有这个工作吗？因为我使用它在 Cron Job 上运行并且我使用的是 OAuth2 服务帐户。

====

编辑：

我试图用这样的设置标题来暴力破解它：

```
service.setHeader("GData-Version", "3.0");
service.setUserCredentials(myusername, mypassword); 
```

这非常完美。service.setOAuth2Credentials() 内部似乎有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T07:23:53.153

我找到了为什么 service.setOAuth2Credentials() 不适用于构建新的 Google Credential（使用 P12File 构建）的原因。

这是因为 service.setOAuth2Credentials() 不会像 Google Sites、Google Drive 等中的其他服务那样在内部**刷新令牌...**

如果您使用 P12File 构建 Google Credential，只需在构建 Google Credential 后添加此行。

```
googleCredential.refreshToken(); 
```

我猜这是 ContactsService.setOAuth2Credentials() 的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T19:00:59.827

我在使用 SecureSociale 进行身份验证时遇到了这个问题。

就我而言，问题与 SecureSociale 配置中定义的范围有关。

不要忘记检查您是否为给定的令牌使用了正确的范围。

# android - 是否可以为多种语言使用相同的字符串资源文件？

> ID：14350972
> 
> 赞同：1
> 
> 时间：2013-01-16T03:35:46.647
> 
> 标签：android, localization, android-resources

在我的 Android 应用程序中，我需要实现本地化。是否可以为所有语言（例如，中文、法语、日本、乌尔都语、..）提供相同的字符串文件？如果没有，如何为不同语言创建字符串的值文件夹名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T03:40:02.597

`res/values/strings.xml`如果未找到特定语言，则默认使用。它应该包含应用程序中每个字符串的默认值。[请参阅本地化指南](http://developer.android.com/guide/topics/resources/localization.html)的“为什么默认资源很重要”部分。事实上，整个文档是本地化应用程序的良好指南。

# java - 易失性关键字和线程本地内存

> ID：14350974
> 
> 赞同：6
> 
> 时间：2013-01-16T03:35:51.397
> 
> 标签：java, jvm, thread-safety, heap-memory, volatile

我对`volatile`Java中关键字的用法感到困惑。我在互联网上阅读了很多文章，但仍然一无所获。我的脑海里有很多问题想问：

首先，维基百科和许多博客都说所有`volatile`变量都存储在*线程本地内存*中，而不是所有线程共享的主内存！我有点困惑，他们的意思是`stack memory`？我知道每个线程都有自己的`stack memory`存储自己的原始文字和对象引用的地方。

如果是这样，那么如果`volatile`变量是对象引用而不是原始文字会发生什么？我猜所有的对象都存储在堆空间而不是堆栈内存中。

其次，您能否通过示例详细说明`volatile`关键字的工作原理以及我们应该何时使用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T03:52:41.523

> 首先，维基百科和许多博客都说所有易失性变量都存储在线程本地内存中，而不是所有线程共享的主内存。

这是不正确的。可变字段是实例或类（静态）变量，存储在堆中。

他们*可能*指的是特定于单个处理器/内核的高速缓存......但这是特定于硬件的东西。但这绝对不是“线程本地的”。这个词的意思完全不同。

> 如果是这样，那么如果 volatile 变量是对象引用而不是原始文字会发生什么？

没什么特别的。你的假设是不正确的。

易失性变量不存储在堆栈中。实际上，如果您尝试将`volatile`关键字用于局部变量，您将收到编译错误。（这毫无意义。堆栈上的变量仅对一个线程可见。易失语义是关于由不同线程共享的变量。）

> 我知道每个线程都有自己的堆栈内存，它存储自己的原始文字和对象引用。

存储在线程堆栈中的是：

*   方法的局部变量，
*   方法的参数，
*   方法的返回地址等，以便 CPU 在调用返回时知道去哪里，并且（可能）
*   JIT 编译器认为不需要将本地对象的状态存储在堆中。

方法的原始文字通常嵌入在代码本身中。字符串文字也在其他地方。（当这些文字被分配给局部变量时，它们将被保存在堆栈中......）

> 其次，您能否通过示例详细说明 volatile 关键字的工作原理以及我们应该何时使用它？

检查评论和相关问题......或谷歌“java volatile example”。解释将是多余的。

# html - 如何在按钮旁边居中对齐此文本？

> ID：14350976
> 
> 赞同：6
> 
> 时间：2013-01-16T03:36:02.653
> 
> 标签：html, css

[jsFiddle](http://jsfiddle.net/TpqD8/1/)

**截屏**

![](../Images/40398fc09d63556aa03e4693e12dfda2.png)

**html**

```
<div class="client-box">
  <div class="box-header clearfix">
    <h6 class="pull-left">General Information</h6>
    <button class="btn btn-small pull-right"><i class="icon-pencil"></i> Edit</button>
  </div>
  <p>box content</p>
</div> 
```

如何使标题`<h6>`相对于“编辑”按钮垂直居中？

`vertical-align`装上没用`box-header`。我不想硬编码行高，因为我可能会在以后更改按钮大小或其他内容，然后它会中断。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T04:31:24.847

您可以使用 css`display: table`和`display: table-cell`and `vertical-align: middle`。

**HTML**

```
<div class="box-header clearfix">
    <div class="left-cell">
        <h6>General Information</h6>
    </div>
    <div class="right-cell">
        <button class="btn btn-small"><i class="icon-pencil"></i> Edit</button>
    </div>
</div> 
```

**CSS**

```
.box-header {
    border-bottom: 1px solid #aac7ef;
    padding-bottom: 5px;
    display: table;
    width: 100%;
}
.left-cell {
    display: table-cell;
    vertical-align: middle;
}
.right-cell {
    display: table-cell;
    vertical-align: middle;
    text-align: right;
} 
```

**[演示](http://jsfiddle.net/TpqD8/10/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T04:32:44.067

`vertical-align`仅适用于两种类型的对象：1、表格单元格和 2、内联元素。

它与任何其他类型的 HTML 元素无关。

这并不是说它“参差不齐”或“有问题”，只是它没有做大多数人希望它做的事情。

理想情况下，您应该完全避免垂直对齐文本，但有时我们需要这样做。有多种方法可以做到这一点，至于决定采用哪种方法，通常取决于您所处的特定情况。

在这种情况下，如果您可以依靠它作为一行文本，我认为您最好的选择是使用一些额外的顶部填充进行光学调整，或者`position-relative`将其降低几个像素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T04:01:12.617

如果您不想对其进行硬编码，可以尝试动态设置它。

```
$(function () {
  $('h6.pull-left').css('line-height', $('button.btn.pull-right').outerHeight() + 'px');
}); 
```

我创建了一个[jsfiddle](http://jsfiddle.net/TpqD8/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T04:04:27.383

您正在使用`pull-right`，`pull-left`它使元素左右浮动，因此在这种情况下垂直对齐将不起作用。你能做的最好的就是使用填充，或者像其他人建议的那样将`line-height`你的`h6`元素设置为 24px 之类的东西。是`vertical-align:middle`的，充其量只是参差不齐，永远不会满足那些追求像素完美的人

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T04:00:40.307

是的..垂直对齐一直是css中的一个问题。所以我建议你设置 box-header 的 margin-top ... 比如 margin-top:1px .. 调整 box header wrt margin top 将解决问题。您还可以使用 Firefox 中的 Firebug 检查您需要设置多少像素来设置边距顶部。

# android - 如何在 LockScreen 中获取窗口（）？

> ID：14350983
> 
> 赞同：0
> 
> 时间：2013-01-16T03:37:14.020
> 
> 标签：android, lockscreen, android-framework

我正在修改`LockScreen.java`Android 源包（4.1.2）。现在，我想`getWindow()`添加一些适当的标志，例如：

```
Window window = getWindow();
window.addFlags(WindowManager.LayourParams.FLAG_SHOW_WHEN_LOCKED); 
```

但我不知道如何在非`Activity`类中调用此函数。我试过了：

```
Window window = mContext.getWindow() 
```

但它不起作用。

我想知道是否可以使用`getWindow()`in `LockScreen.java`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:43:19.043

我不明白你想做什么。从的解释`WindowManager.LayourParams.FLAG_SHOW_WHEN_LOCKED`：

> 窗口标志：屏幕锁定时显示窗口的特殊标志。这将使应用程序窗口优先于密钥保护或任何其他锁定屏幕。

所以从这个定义我知道你想在 ScreenLock 窗口之前制作一个 ScreenLock 窗口:)

我猜您想创建一个将在 ScreenLock 窗口之前显示的屏幕。如果是，我建议您创建一个带有活动的系统应用程序，您可以在其中设置此参数。

# jquery - 将可拖动对象放入可排序对象后，jQuery Click 事件不起作用

> ID：14350985
> 
> 赞同：3
> 
> 时间：2013-01-16T03:37:33.457
> 
> 标签：jquery, events, clone, draggable, jquery-ui-sortable

使用 jQueryUI 教程中提供的示例：[jQuery UI Draggable + Sortable](http://jqueryui.com/resources/demos/draggable/sortable.html)

当我将可拖动`<li>`元素拖放到可排序列表中时，它将被克隆。哪个按预期工作。然后也可以重新排序克隆元素。这也按预期工作。问题是新创建的克隆元素的“单击”事件不会触发。为了说明这一点，只需通过在函数末尾插入以下四行代码来修改 sortable.html。

```
$("li").on("click", function(event){
   var clicked_element_class = $(this).attr('class');
   alert(clicked_element_class);
});
    <!doctype html> 
```

这将在每次`<li>`单击元素时触发显示元素的类属性的警报。但是，当单击通过将可拖动元素拖放到列表中创建的克隆元素时不会触发警报。这向我表明，在创建此克隆并将其添加到可排序列表后，不会为特定克隆触发 click 事件。实际上，似乎 click 事件已从克隆中删除，或者现有`$("li").on("click", ...`函数无法识别它，因为它是稍后添加到 DOM 中的。如何`$("li").on("click", ...`通过可排序列表中新创建的克隆的“单击”事件触发具有警报的相同（现有）功能？很感谢任何形式的帮助。

**更新：**

这是整个源代码：

```
 <!doctype html>
            <html lang="en">
            <head>
              <meta charset="utf-8" />
              <title>jQuery UI Draggable + Sortable</title>
              <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
              <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
              <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
              <link rel="stylesheet" href="/resources/demos/style.css" />
              <style>
              ul { list-style-type: none; margin: 0; padding: 0; margin-bottom: 10px; }
              li { margin: 5px; padding: 5px; width: 150px; }
              </style>
              <script>
              $(function() {
                var cloneCache;      
                $( "#sortable" ).sortable({
                  revert: true,
                });
                $( ".ui-state-highlight" ).draggable({
                  connectToSortable: "#sortable",
                  helper: "clone",
                  revert: "invalid"
                });
                $( "ul, li " ).disableSelection();

                $("li").on("click", function(event){
                  var clicked_element_class = $(this).attr('class');
                  alert(clicked_element_class);
                });
               });
               </script>
              </head>
             <body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T03:41:01.657

这是因为您仅将点击侦听器应用于现有`li`元素。

您想使用[`.on()`](http://api.jquery.com/on/)函数的选择器参数动态添加这些侦听器：

替换这个：

```
$('li').on('click', function(event) {
    var clicked_element_class = $(this).attr('class');
    alert(clicked_element_class);
}); 
```

有了这个：

```
$('ul, ol').on('click', 'li', function(event) {
    var clicked_element_class = $(this).attr('class');
    alert(clicked_element_class);
}); 
```

**更新 1**

要将此点击侦听器应用到`li`and`a`和`p`元素，请更改您的选择器参数：

```
$('ul, ol').on('click', 'li, li a, li p', function(event) {
    var clicked_element_class = $(this).attr('class');
    alert(clicked_element_class);
}); 
```

这会将侦听器应用于`li`元素、`a`元素的子`li`元素和`p`元素的子`li`元素。

请注意，此侦听器将返回每个元素的类，而不是`li`类。也就是说，当点击一个`a`标签时，`a`将返回类，而不是`li`类。

此外，应用此 jQuery 侦听器的更好方法可能`on`是将其应用于`#sortable`元素：

```
$('#sortable').on('click', 'li, li a, li p', function(event) {
    var clicked_element_class = $(this).attr('class');
    alert(clicked_element_class);
}); 
```

# c# - 在 c# winform 中更改的文本上启用禁用按钮

> ID：14350987
> 
> 赞同：1
> 
> 时间：2013-01-16T03:37:42.397
> 
> 标签：c#, winforms

我正在开发一个应用程序，其中搜索框中有一个按钮（如 iTunes 中的一个）。我想在文本框中有文本时启用取消按钮，并在文本框为空时禁用它。我尝试使用以下代码在文本框上使用 text_changed 事件，但它跳过了 if 条件。即使发件人向我发送了正确的值，但我无法将其放入 if else 中。

```
private void textBox1_TextChanged(object sender, EventArgs e)
    {
        if (string.IsNullOrEmpty(sender.ToString()))
        {
            btn_cancel.Visible = false;
        }
        else
        {
            btn_cancel.Visible = true;
        }
    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T03:49:57.637

这是一个简单的解决方案。

```
 private void textBox1_TextChanged(object sender, EventArgs e)
    {
        this.button1.Enabled = !string.IsNullOrWhiteSpace(this.textBox1.Text);
    } 
```

当然，您必须在表单最初加载时设置 button.Enabled = false，因为文本框事件不会在启动时触发（当前为您的问题提供的所有答案都为 true）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T03:41:06.133

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    if (String.IsNullOrEmpty(textBox1.Text))
        btn_cancel.Visible = false;
    else
        btn_cancel.Visible = true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T03:40:24.703

试试这个：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    var textbox = sender as TextBox;
    if (string.IsNullOrEmpty(textbox.Text))
    {
        btn_cancel.Visible = false;
    }
    else
    {
        btn_cancel.Visible = true;
    }
} 
```

`sender.ToString()`将始终返回`System.Windows.Forms.TextBox`您需要转换`sender`为`TextBox`并使用该`Text`值进行空或空检查

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T03:40:58.813

尝试将发件人投射到 TextBox ：

```
if (string.IsNullOrEmpty(((TextBox)sender).Text)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T03:43:26.607

一个班轮：

```
btn_cancel.Visible = textBox1.Text.Length > 0; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T13:07:13.170

这就是我的做法：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{        
    string text = ((sender as TextBox) == null ? string.Empty : (sender as TextBox).Text);
    this.button1.Enabled = (string.IsNullOrWhiteSpace(text) == false);
} 
```

这并不假定事件源是特定控件，并且如果错误地将其附加到不是`TextBox`.

# codeigniter - CodeIgniter 助手未加载

> ID：14350990
> 
> 赞同：1
> 
> 时间：2013-01-16T03:38:05.163
> 
> 标签：codeigniter, helper

我试图使用这个助手来创建一个国家下拉列表。（https://github.com/EllisLab/CodeIgniter/wiki/helper-dropdown-country-code）

我在我的控制器中创建了一个使用助手代码调用的文件`country_helper.php`，我正在加载该助手`$this->load->helper('country_helper');`

但是在使用时`country_dropdown();`出现以下错误：

```
Call to undefined function country_dropdown() in /Users/wouter/Sites/socialagent.me/application/controllers/user.php on line 299 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-04T10:03:50.283

使用： `$this->load->helper('country');`

不是： `$this->load->helper('country_helper');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-03T18:08:15.337

您需要更好的设置助手在全球范围内发挥作用。找到文件 application/config/autoload.php 并设置

```
$autoload['helper'] = array('country'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T04:24:28.160

```
class Welcome extends CI_Controller {
    public function __construct()
    {   
        parent::__construct();
        $this->load->helper('country_helper');
        echo country_dropdown();
    }   
    public function index()
    {
    }    
} 
```

我试过这段代码，它工作正常。

# ruby-on-rails - Rails：如何解决不会过期的cookies？

> ID：14350992
> 
> 赞同：0
> 
> 时间：2013-01-16T03:38:22.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session, cookies, session-cookies

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:28:15.800

我今天一直在和这个作斗争，它恰好不是 Rails 相关的，而是 Chrome 的（我猜 Opera 也是如此）。由于 Chrome 的第 19 版，当设置了**从我离开的地方继续**的选项时，它们不遵循[标准（第 4.3.1 节）](http://www.w3.org/Protocols/rfc2109/rfc2109)并且不会在浏览器关闭时删除任何 cookie。因此，记住我功能无法按预期工作，因为您希望在关闭浏览器时删除非永久性 cookie。这是具有 WontFix 状态的铬错误：[http ://code.google.com/p/chromium/issues/detail?id=128513](http://code.google.com/p/chromium/issues/detail?id=128513)

在我的情况下（也可能是你的情况），情况更加奇怪，因为我没有使用*在我离开的地方继续*选项，并且 Chrome 仍然没有在浏览器关闭时删除 cookie。在找到另一个错误后，我意识到这实际上是关闭谷歌浏览器时继续运行后台应用程序的选项，以[防止](http://code.google.com/p/chromium/issues/detail?id=128567)**这些**cookie 被删除。我不知道/不记得该选项是如何在我的浏览器中启用的，或者它现在是否是默认行为......

无论如何，我的 remember_me 复选框现在按预期工作。希望你的也得到修复，如果没有，至少这会对你有所帮助。