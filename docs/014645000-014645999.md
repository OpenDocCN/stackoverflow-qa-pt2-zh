# StackOverflow 问答 14645000-14645999

# web-services - Oracle BPEL 中的回复机制和 Tx 管理

> ID：14645001
> 
> 赞同：2
> 
> 时间：2013-02-01T11:09:44.750
> 
> 标签：web-services, oracle, soa, bpel, business-process-management

从同步 BPEL 服务调用异步 BPEL 服务时，我收到请求超时异常。

我处于学习阶段并创建了一个等待仅 5 秒的异步 bpel，并使用同步 BPEL 调用它，但仍然出现超时错误调用的异步进程在等待 5 秒后完成，但即使如此，同步进程仍在等待回应

在使用另一个异步 bpel 服务调用相同的异步服务时，它工作正常。

为什么在使用同步服务调用异步 bpel 服务时出现此错误

我试图通过一个疯狂的猜测将同步进程事务属性更改为“requriesNew”

## 异步进程

```
<?xml version = "1.0" encoding = "UTF-8" ?>
<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  Oracle JDeveloper BPEL Designer 

  Created: Wed Jan 30 16:13:48 IST 2013
  Author:  loganvm
  Type: BPEL 1.1 Process
  Purpose: Asynchronous BPEL Process
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
<process name="TestAsync"
         targetNamespace="http://xmlns.oracle.com/BankInterestRate/TestAsyncproject/TestAsync"
         xmlns="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
         xmlns:client="http://xmlns.oracle.com/BankInterestRate/TestAsyncproject/TestAsync"
         xmlns:ora="http://schemas.oracle.com/xpath/extension"
         xmlns:bpelx="http://schemas.oracle.com/bpel/extension"
         xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
         xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20"
         xmlns:bpel2="http://docs.oasis-open.org/wsbpel/2.0/process/executable"
         xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
         xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue"
         xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath"
         xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath"
         xmlns:bpm="http://xmlns.oracle.com/bpmn20/extensions"
         xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk"
         xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions"
         xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap">

    <!-- 
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        PARTNERLINKS                                                      
        List of services participating in this BPEL process               
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    --> 
    <partnerLinks>
        <!-- 
      The 'client' role represents the requester of this service. It is 
      used for callback. The location and correlation information associated
      with the client role are automatically set using WS-Addressing.
    -->
        <partnerLink name="testasync_client" partnerLinkType="client:TestAsync" myRole="TestAsyncProvider" partnerRole="TestAsyncRequester"/>
    </partnerLinks>

    <!-- 
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        VARIABLES                                                        
        List of messages and XML documents used within this BPEL process 
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->
    <variables>
        <!-- Reference to the message passed as input during initiation -->
        <variable name="inputVariable" messageType="client:TestAsyncRequestMessage"/>

        <!-- Reference to the message that will be sent back to the requester during callback -->
        <variable name="outputVariable" messageType="client:TestAsyncResponseMessage"/>
        <variable messageType="bpelx:bindingFault" name="FaultVar"/>
        <variable messageType="bpelx:remoteFault" name="FaultVar_1"/>
    </variables>
    <faultHandlers>
        <catch faultName="bpelx:bindingFault" faultVariable="FaultVar"/>
    </faultHandlers>
    <!-- 
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
       ORCHESTRATION LOGIC                                               
       Set of activities coordinating the flow of messages across the    
       services integrated within this business process                  
      ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    -->
    <sequence name="main">
        <!-- Receive input from requestor. (Note: This maps to operation defined in TestAsync.wsdl) -->
        <receive name="receiveInput" partnerLink="testasync_client" portType="client:TestAsync" operation="process" variable="inputVariable" createInstance="yes"
                 bpelx:conversationId="1"/>
        <assign name="assign_hello">
            <bpelx:append>
                <bpelx:from expression="concat(bpws:getVariableData('inputVariable','payload','/client:process/client:input'),' Hello')"/>
                <bpelx:to variable="outputVariable" part="payload"
                          query="/client:processResponse/client:result"/>
            </bpelx:append>
        </assign>
        <wait name="Wait1" for="'PT5S'"/>
        <!-- 
          Asynchronous callback to the requester. (Note: the callback location and correlation id is transparently handled using WS-addressing.)
        -->
        <invoke name="callbackClient" partnerLink="testasync_client" portType="client:TestAsyncCallback" operation="processResponse" inputVariable="outputVariable"
                bpelx:invokeAsDetail="no" bpelx:conversationId="1"/>
    </sequence>
</process> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:31:40.767

**要调试**此问题：

*   **启用审计**，在**开发模式下**运行，然后**从测试控制台****运行**同步过程。这将向您展示流程、调用和同步流程等待的位置。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T19:52:37.277

尝试在事务属性中添加任何这些组合。

```
bpel.config.transaction=required
bpel.config.oneWayDeliveryPolicy=async.persist 
```

如果以上对没有帮助...尝试在下面添加并注释掉 bpel.config.transaction 属性

```
bpel.config.oneWayDeliveryPolicy=async.persist 
```**

# android - Android：ListView.setScrollIndicators(up, down) 做什么？

> ID：14645005
> 
> 赞同：3
> 
> 时间：2013-02-01T11:09:59.063
> 
> 标签：android, listview

我试图查阅[文档](http://developer.android.com/reference/android/widget/AbsListView.html#setScrollIndicators%28android.view.View,%20android.view.View%29)，但发现 setScrollIndicators 那里是空的。它能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:59:19.550

我试图搜索但也找不到文档。但是在查看 AbsListView 的来源时，我发现了以下内容

```
 View mScrollUp;
 View mScrollDown;

 public void setScrollIndicators(View up, View down) {
    mScrollUp = up;
    mScrollDown = down;
}

void updateScrollIndicators() {
    if (mScrollUp != null) {
        boolean canScrollUp;
        // 0th element is not visible
        canScrollUp = mFirstPosition > 0;

        // ... Or top of 0th element is not visible
        if (!canScrollUp) {
            if (getChildCount() > 0) {
                View child = getChildAt(0);
                canScrollUp = child.getTop() < mListPadding.top;
            }
        }

        mScrollUp.setVisibility(canScrollUp ? View.VISIBLE : View.INVISIBLE);
    }

    if (mScrollDown != null) {
        boolean canScrollDown;
        int count = getChildCount();

        // Last item is not visible
        canScrollDown = (mFirstPosition + count) < mItemCount;

        // ... Or bottom of the last element is not visible
        if (!canScrollDown && count > 0) {
            View child = getChildAt(count - 1);
            canScrollDown = child.getBottom() > mBottom - mListPadding.bottom;
        }

        mScrollDown.setVisibility(canScrollDown ? View.VISIBLE : View.INVISIBLE);
    }
} 
```

这里 mListPadding 是

```
 Rect mListPadding = new Rect(); 
```

这可能有助于更好地理解概念。我还没有尝试过，但据我了解，如果列表视图的第一个元素的顶部或最后一个元素或最后一个元素的底部不可见，并且如果列表可以滚动（向上或向下），则相应的视图通过调用 updateScrollIndicators() 方法

希望这对你有用

# c++ - 从字符串到 GUID 的转换失败

> ID：14645010
> 
> 赞同：1
> 
> 时间：2013-02-01T11:10:05.537
> 
> 标签：c++, winapi, guid

我正在尝试使用函数将字符串转换为 GUID `UuidFromString`。

**我的问题：**生成的 GUID 不正确。当我使用`IsEqualGUID`该函数比较 GUID 时，它应该说 2 个 GUID 相同时总是返回零。

看看这个显示错误的例子：

```
// NOTE: MONITOR_CLASS and MONITOR_CLASS_STR are EXACTLY the same GUID
//       except that one is in string version. When I convert the string
//       to a GUID then compare both of them, the comparison says they
//       AREN'T the same?? Whats going wrong? 
GUID id;
GUID MONITOR_CLASS       = { 0x4d36e96e, 0xe325, 0x11c3, { 0xbf, 0xc1, 0x08, 0x00, 0x2b, 0xe1, 0x03, 0x18 } };
LPTSTR MONITOR_CLASS_STR = L"4d36e96e-e325-11ce-bfc1-08002be10318";
UuidFromString((RPC_WSTR)MONITOR_CLASS_STR, &id);

_tprintf(_T("String: {%s}\nuID:    {%x-%x-%x-%2x%2x-%2x%2x%2x%2x%2x%2x}\n"), MONITOR_CLASS_STR, id.Data1, id.Data2, id.Data3, id.Data4[0],
     id.Data4[1], id.Data4[2], id.Data4[3], id.Data4[4], id.Data4[5], id.Data4[6], id.Data4[7]);

_tprintf(_T("IsEqualGUID: %d\n"), IsEqualGUID(id, MONITOR_CLASS)); 
```

输出是：

> 字符串：{4d36e96e-e325-11ce-bfc1-08002be10318}
> uID：{4d36e96e-e325-11ce-bfc1-8 02be1 318}
> IsEqualGUID：0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:14:58.483

它们*是*不同的：GUID MONITOR_CLASS 具有 0x11c **3**，而您的 _STR 版本具有“11c **e** ”。

# javascript - window.onbeforeunload 和 window.onunload 在 Firefox、Safari、Opera 中不起作用？

> ID：14645011
> 
> 赞同：79
> 
> 时间：2013-02-01T11:10:10.070
> 
> 标签：javascript, jquery, dom-events

在我的聊天应用程序中，当我的应用程序关闭时，我需要得到用户的确认。

所以我使用了`window.onbeforeunload`for 确认警报和`window.onunload`for `logout()`。

1.  但是这两个功能都可以在 IE 和 Chrome 中运行。（应用程序工作正常）

2.  `window.onbeforeunload` 在 Opera 中不起作用，我的消息不会在 Firefox 中显示。

3.  `window.onunload`无法在 Safari、Opera 和 Firefox 中运行。

我的 JavaScript 代码将是：

```
// Used for confirmation, to closing the window 
window.onbeforeunload = function () {

    return  "Are you sure want to LOGOUT the session ?";
}; 

// Used to logout the session, when browser window was closed 
window.onunload = function () {

    if((sessionId != null)&&(sessionId!="null")&& (sessionId != ""))
        logout();
}; 
```

我也用 JQuery 尝试了同样的功能，

```
<script type="text/javascript">

    $(window).on('beforeunload', function() {
        return 'Are you sure want to LOGOUT the session ?';
    });

    $(window).unload(function() {
        if ((sessionId != null) && (sessionId != "null") && (sessionId != "")) {
            logout();
        }
    });

</script> 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-02-01T13:48:58.553

不幸的是，这些浏览器不支持您使用的方法。为了支持我的回答（这种不支持的行为），我在下面给出了链接。

`onbeforeunload`而`onunload`不是在`opera`……支持这一点

> [Opera 中的 onbeforeunload](https://stackoverflow.com/questions/390260/onbeforeunload-in-opera)
> [http://www.zachleat.com/web/dont-let-the-door-hit-you-onunload-and-onbeforeunload/](http://www.zachleat.com/web/dont-let-the-door-hit-you-onunload-and-onbeforeunload/)

尽管该`onunload`事件不能完全发挥作用，但`onunload`如果用户单击链接以离开带有未保存表单的页面，您可以使用它来显示警告。

`onunload`不工作`safari`...支持这一点

> [https://www.webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/](https://www.webkit.org/blog/516/webkit-page-cache-ii-the-unload-event/)

您可以尝试`pagehide`在 safari 浏览器中使用该事件来代替`onunload`.

`onunload`不工作`firefox`...支持这一点

> [https://bugzilla.mozilla.org/show_bug.cgi?id=681636](https://bugzilla.mozilla.org/show_bug.cgi?id=681636)

他们还没有在 FF 中提出解决方案

祝你好运加油。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2014-01-30T11:58:49.920

这是 ie，firefox 和 chrome 的工作解决方案：

```
var myEvent = window.attachEvent || window.addEventListener;
var chkevent = window.attachEvent ? 'onbeforeunload' : 'beforeunload'; /// make IE7, IE8 compitable

            myEvent(chkevent, function(e) { // For >=IE7, Chrome, Firefox
                var confirmationMessage = 'Are you sure to leave the page?';  // a space
                (e || window.event).returnValue = confirmationMessage;
                return confirmationMessage;
            }); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-26T21:31:47.747

我能够使用 jQuery 让它在 IE 和 FF 中工作：

```
$(window).bind('beforeunload', function(){

}); 
```

而不是：卸载、onunload 或 onbeforeunload

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-02-07T08:39:02.833

`onunload`通过将 Ajax 异步请求更改为同步请求，我得到了除 Opera 之外的所有浏览器的解决方案。

```
xmlhttp.open("POST","LogoutAction",false); 
```

它适用于除**Opera**之外的所有浏览器。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-07T06:30:32.300

并非所有浏览器都调用 onunload 事件。更糟糕的是，您无法检查 onbeforeunload 事件的返回值。这会阻止我们实际执行注销功能。

但是，您可以解决这个问题。

在 onbeforeunload 事件中首先调用注销。然后提示用户。如果用户取消注销，则使用 onfocus 事件自动重新登录。有点倒退，但我认为它应该工作。

```
'use strict';

var reconnect = false;

window.onfocus = function () {
  if (reconnect) {
    reconnect = false;
    alert("Perform an auto-login here!");
  }
};

window.onbeforeunload = function () {
  //logout();
  var msg = "Are you sure you want to leave?";
  reconnect = true;
  return msg;
}; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-24T10:26:40.230

Firefox 根本不显示自定义 onbeforeunload 消息。Mozilla 表示，他们正在保护最终用户免受可能显示误导性文本的恶意网站的侵害。

# asp.net - rawurl 和查询字符串有什么区别？

> ID：14645013
> 
> 赞同：1
> 
> 时间：2013-02-01T11:10:12.707
> 
> 标签：asp.net, c#-4.0

我阅读了有关 httphandler 的信息，他们使用 rawurl 然后他们说：例如，假设您重写了处理图像请求的 HTTP 处理程序，以便它基于查询字符串而不是文件名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:14:21.047

当您进行 url 重写时，`Request.RawUrl`将显示用户在栏上看到的 url，您没有重写的查询字符串。

例如，如果您将 重写为`www.site.com/2/product`能够`www.site.com/product.aspx?id=2`读取`id`您需要使用查询字符串，因为`RawUrl`没有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T23:28:10.693

HttpRequest.RawUrl 属性 获取当前请求的原始 URL。

查看更多[http://msdn.microsoft.com/en-us/library/system.web.httprequest.rawurl(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.rawurl(v=vs.110).aspx)

html 地址使用 QueryString 属性在页面之间传递值

[http://www.localhost.com/Webform2.aspx?name=Atilla&lastName=Ozgur](http://www.localhost.com/Webform2.aspx?name=Atilla&lastName=Ozgur)

Webform2.aspx 这是您的浏览器将访问的页面。name=Atilla 您发送一个设置为 Atilla 的名称变量 lastName=Ozgur 您发送一个设置为 Ozgur 的 lastName 变量

# database - 在实体框架中分别保存任何新的/更改的实体

> ID：14645017
> 
> 赞同：0
> 
> 时间：2013-02-01T11:10:25.963
> 
> 标签：database, entity-framework-4, asp.net-mvc-4, entity-framework-5

首先，我只是想更新一个修改过的模型。可以说，我们将“文章”作为模型进行讨论。以下方法在名为“Articles”的类中实现：

```
 public static void SaveArticle(Article article) 
    {
        if (article.Id == 0)
        {
            webEntities.Articles.Add(article);
        }
        else
        {
            webEntities.Articles.Attach(article);
            webEntities.Entry(article).State = EntityState.Modified;
        }

        webEntities.SaveChanges();
    } 
```

因此，每当我想在控制器操作中保存修改后的文章时，我只需要调用“Articles.SaveArticle(myArticle);”，它会按预期工作。
到目前为止一切顺利，但这意味着我需要为每个模型/实体冗余地实现它。

然后我想到了类似模板模式的东西。即一个名为“Entity”的类，其中“Article”继承自“Entity”。
此外，一个名为“实体”的类包含一个像这样的静态方法：

```
 public static void SaveEntity(Entity entity) 
    {
        if (Entity.Id == 0) // <-- Problem 1
        {
            webEntities.Entities.Add(entity); // <-- Problem 2
        }
        else
        {
            webEntities.Entities.Attach(entity); // <-- Problem 3
            webEntities.Entry(entity).State = EntityState.Modified; // <-- Problem 4
        }

        webEntities.SaveChanges();
    } 
```

所以我不需要冗余地实现它，但我不知道如何解决上面代码中提到的问题。我是否认为太复杂或者什么是我的问题的最佳实践？

提前致谢！

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:50:20.113

使用泛型。

```
public static void Save<T>(T entity)
    where T : class
{
    webEntities.Set<T>().AddOrUpdate(entity);
    webEntities.SaveChanges();
} 
```

[`AddOrUpdate`](http://msdn.microsoft.com/en-us/library/hh846520%28v=vs.103%29.aspx)是 System.Data.Entity.Migrations 中的扩展方法。

# javascript - 原型 setAttribute 是否与元素类选择器一起使用

> ID：14645019
> 
> 赞同：0
> 
> 时间：2013-02-01T11:10:31.390
> 
> 标签：javascript, prototype

我正在使用原型来更改按钮的 onclick 功能。以下代码运行良好。

```
$('button_id').setAttribute('onclick','test();'); 
```

但以下不起作用

```
$$('div#divid button.buttonclass').setAttribute('onclick','test();'); or

$$('button.buttonclass').setAttribute('onclick','test();'); 
```

我只想更改按钮`onclick`功能。该按钮位于 div 元素内。按钮`button`只有类名，没有 id 属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:11:38.823

尝试：

```
$$('div#divid button.buttonclass')[0].setAttribute('onclick','test();'); 
```

或者

```
$$('button.buttonclass')[0].setAttribute('onclick','test();'); 
```

类选择器以 ARRAY 的形式返回匹配的元素。

# iphone - iPhone sdk UITableView 单元重用标识符

> ID：14645020
> 
> 赞同：1
> 
> 时间：2013-02-01T11:10:31.903
> 
> 标签：iphone, uitableview

我正在使用 UITableView。下载一本书后，我将在我的表格中添加一个复选标记图像。我已经做到了。但是，当我滚动我的表格时，即使对于未下载的书籍（即）我的表格单元格被重复使用，我也会得到图像。为此，我用谷歌搜索并检查了我的代码。一切似乎都一样。这是我的代码，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

      UIImage *cellImage= [cacheImage getCachedImage:[listOfThumImages objectAtIndex:indexPath.row]];
      if(cellImage == nil)
{
    DeviantDownload *download;
    download = [DownloadsArray objectAtIndex:indexPath.row];
    cellImage = download.image;
    if (cellImage == nil)
    {
        download.delegate = self;
    }

NSLog(@"cellImage%@",cellImage);
UIImageView *imgView;

static NSString *CellIdentifier = @"";

cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

} 

  imgView1 = [[UIImageView alloc] initWithFrame:CGRectMake(680, 60, 40, 40)];//self.view.bounds.size.width-
    [imgView1 setImage:[UIImage imageNamed:@"Downloaded.png"]];

  NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if([defaults objectForKey:@"firstRun"])
    {
       if([[[appDelegate selectDB] valueForKey:@"bookname"] containsObject:[listOfBooks objectAtIndex:indexPath.row]] )
      {
           NSString *cellValue = [listOfBooks objectAtIndex:indexPath.row];
           cell.contentView addSubview:imgView1];
      }
   return cell;

    }
 }

} 
```

我的代码有什么问题？请帮帮我。感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:23:10.570

CheckMarks`UITableView`看起来并不复杂。首先，您必须保存已经有书签的行的状态。并且，在您的`cellForRowAtIndexPath`方法中进行比较。您可以做的是在`NSMutableArray`. 为下载的书保存 1，为未下载的书保存 0。在您的`cellForRowAtIndexPath`方法中比较 [array objectAtIndex:indexpath.row] 并相应地设置图像。

另外，改变：

```
static NSString *CellIdentifier = @""; 
```

至 ：

```
static NSString *CellIdentifier = @"MyCell"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:26:19.747

如果您希望某个单元格不显示图像，则只需删除该单元格的图像视图。为图像视图设置一个 view.tag 并检索它，然后将其删除。

您现在正在做的是在需要时为单元格添加图像子视图，然后将该单元格重用于所有其他行。但是您从未删除不需要它的单元格的图像视图。

# delphi - RemObjects SDK 参数可以通过 URI 传递吗？

> ID：14645022
> 
> 赞同：5
> 
> 时间：2013-02-01T11:10:41.340
> 
> 标签：delphi, uri, delphi-xe2, remobjects

我们有一个 RemObjects SDK HTTP 服务器，它公开了许多服务和方法。是否可以通过 URI 调用方法而不是将参数作为 SOAP/JSON 传递，例如

```
http://www.mywebservice.com/servicename/methodname?param1=xxx&param2=yyy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:20:29.220

**更新**

我已经编写了服务器后代的改进版本。这会将格式化的 URI 转换为 JSON 对象，该对象随后将由 RO JSON 消息处理程序处理。

默认处理方法是忽略 URI。

更改`URIHandlingMethod`为`urhJSON`接受这样的 URI：

```
http://www.mywebservice.com/json?{JSON OBJECT} 
```

设置`URIHandlingMethod`为`urhParametersto`接受这样的 URI：

```
http://www.mywebservice.com/json/service/method?param1=xxx&param2=yyy 
```

这是代码：

```
unit ROJSONURIIndyHTTPServer ;

interface

uses
  SysUtils, Classes,

  uROIndyHTTPServer,

  IdURI, IdCustomHTTPServer;

type
  TURIHandlingMethod = (
    urhNone,
    urhJSON,
    urhParameters
  );

  TROJSONURIIndyHTTPServer = class(TROIndyHTTPServer)
  private
    FURIHandlingMethod: TURIHandlingMethod;
    FJSONVersion: String;

    function ConvertURIToJSON(const Document, Params: String): String;
    function NextBlock(var Value: String; Delimiter: Char = '/'): String;
  protected
    procedure InternalServerCommandGet(AThread: TIdThreadClass; RequestInfo: TIdHTTPRequestInfo; ResponseInfo: TIdHTTPResponseInfo); override;
  public
    constructor Create(AOwner: TComponent); override;
  published
    property URIHandlingMethod: TURIHandlingMethod read FURIHandlingMethod write FURIHandlingMethod;
    property JSONVersion: String read FJSONVersion write FJSONVersion;
  end;

implementation

{ TROJSONURIIndyHTTPServer }

constructor TROJSONURIIndyHTTPServer.Create(AOwner: TComponent);
begin
  inherited;

  FJSONVersion := '1.1';
end;

function TROJSONURIIndyHTTPServer.NextBlock(var Value: String; Delimiter: Char): String;
var
  p: Integer;
begin
  p := 1;

  while (p <= length(Value)) and (Value[p] <> Delimiter) do
    Inc(p);

  if p = length(Value) then
    Result := Value
  else
    Result := copy(Value, 1, p - 1);

  Value := copy(Value, p + 1, MaxInt);
end;

function TROJSONURIIndyHTTPServer.ConvertURIToJSON(const Document, Params: String): String;
const
  JSONObjectTemplate = '{"method":"%s.%s"%s,"version": "%s"}';
  JSONParamTemplate = '"%s":"%s"';
  JSONParamsTemplate = ',"params":{%s}';
var
  CallService, CallMessage,
  ParsedDocument, ParsedParams, JSONParams,
  Param, ParamName, ParamValue: String;
  i: Integer;
begin
  Result := '';

  ParsedDocument := Trim(Document);

  // Remove the leading /
  if (length(Document) > 0) and
     (Document[1] = '/') then
    NextBlock(ParsedDocument);

  // Remove the message type
  NextBlock(ParsedDocument);

  // Extract the service
  CallService := NextBlock(ParsedDocument);

  // Exctract the service message (method)
  CallMessage := NextBlock(ParsedDocument);

  JSONParams := '';
  ParsedParams := Params;

  while ParsedParams <> '' do
  begin
    // Extract the parameter and value
    Param := NextBlock(ParsedParams, '&');

    // See RFC 1866 section 8.2.1\. TP
    Param := StringReplace(Param, '+', ' ', [rfReplaceAll]);  {do not localize}

    // Extract the parameter name
    ParamName := NextBlock(Param, '=');

    // Extract the parameter value
    ParamValue := Param;

    // Add a delimiter if required
    if JSONParams <> '' then
      JSONParams := JSONParams + ',';

    // Build the JSON style parameter
    JSONParams := JSONParams + format(JSONParamTemplate, [ParamName, ParamValue]);
  end;

  if JSONParams <> '' then
    JSONParams := format(JSONParamsTemplate, [JSONParams]);

  // Make sure we have values for all the object variables, then build the JSON object
  if (CallService <> '') and
     (CallMessage <> '') and
     (FJSONVersion <> '') then
    Result := format(JSONObjectTemplate, [CallService, CallMessage, JSONParams, JSONVersion]);
end;

procedure TROJSONURIIndyHTTPServer.InternalServerCommandGet(
  AThread: TIdThreadClass; RequestInfo: TIdHTTPRequestInfo;
  ResponseInfo: TIdHTTPResponseInfo);
begin
  if FURIHandlingMethod in [urhJSON, urhParameters] then
  begin
    // Parse parameters into JSON if required
    if FURIHandlingMethod = urhParameters then
      RequestInfo.UnparsedParams := ConvertURIToJSON(RequestInfo.Document, RequestInfo.UnparsedParams);

    // Decode the URI e.g. converts %20 to whitespace
    RequestInfo.UnparsedParams := TIdURI.URLDecode(RequestInfo.UnparsedParams);

    //  This works around a bug in TROIndyHTTPServer. By adding a whitespace to the
    //  end of the QueryParams it forces the http server to process the parameters
    RequestInfo.QueryParams := TIdURI.URLDecode(RequestInfo.QueryParams) + ' ';
  end;

  inherited;
end;

end. 
```

* * *

**原始答案**

这是对安德烈的回答的跟进。

对于当前版本的 RemObjects SDK，以下 URI 应该可以工作，但不能：

```
http://www.mywebservice.com/JSON?{"id":"{392543cf-f110-4ba3-95471b02ce5bd693}","method":"servicename.methodname","params":{"param1":"xxx","param2":"yyy"}}: 
```

有两个原因：

*   URI 在传递给消息处理程序之前不会被解码。如果任何字符已被编码，例如 %20 等，这将导致 JSON 错误。
*   ROIndyHTTPServer 代码中似乎存在错误处理 URI 参数的错误。

我创建了一个 ROIndyHTTPServer 后代来解决这两个问题。这是代码：

```
unit FixedROIndyHTTPServer;

interface

uses
  SysUtils, Classes,

  uROIndyHTTPServer,

  IdURI, IdCustomHTTPServer;

type
  TFixedROIndyHTTPServer = class(TROIndyHTTPServer)
  protected
    procedure InternalServerCommandGet(AThread: TIdThreadClass; RequestInfo: TIdHTTPRequestInfo; ResponseInfo: TIdHTTPResponseInfo); override;
  public
    constructor Create(AOwner: TComponent); override;
  end;

implementation

{ TFixedROIndyHTTPServer }

constructor TFixedROIndyHTTPServer.Create(AOwner: TComponent);
begin
  inherited;
end;

procedure TFixedROIndyHTTPServer.InternalServerCommandGet(
  AThread: TIdThreadClass; RequestInfo: TIdHTTPRequestInfo;
  ResponseInfo: TIdHTTPResponseInfo);
begin
  // This fixes 2 issues with TROIndyHTTPServer
  //  1) It decodes the parameters e.g. converts %20 to whitespace
  //  2) It adds a whitespace to the end of the QueryParams. This
  //     forces the http server to process the parameters.

  RequestInfo.QueryParams := TIdURI.URLDecode(RequestInfo.QueryParams) + ' ';
  RequestInfo.UnparsedParams := TIdURI.URLDecode(RequestInfo.UnparsedParams);

  inherited;
end;

end. 
```

这不能回答我的问题，但对于任何有类似问题的人来说，它都是一种解决方法。

我仍然很想知道 RO SDK 是否支持使用自定义 URI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T17:25:29.520

这是一个关于[norgepaul 的](https://stackoverflow.com/a/14648334/282676)解决方案的剧本，看起来不错并返回 JSON。它基于使用 的后代拦截 HTTP 请求的相同想法`TROIndyHTTPServer`，但这次我不仅要修复请求的参数，还要创建客户端未发送的“JSON”帖子！

这是我用来测试默认“VCL Standalon”服务器实现的代码：

```
TUriROIndyHTTPServer = class(TROIndyHTTPServer)
protected
  procedure InternalServerCommandGet(AThread: TIdThreadClass; RequestInfo: TIdHTTPRequestInfo; ResponseInfo: TIdHTTPResponseInfo); override;
end;

procedure TUriROIndyHTTPServer.InternalServerCommandGet(AThread: TIdThreadClass;RequestInfo: TIdHTTPRequestInfo; ResponseInfo: TIdHTTPResponseInfo);
var A, B: Integer;
    NewPost: AnsiString;
begin
  if RequestInfo.Document = '/json/sum' then
    begin
      // Extract the parameters
      A := StrToIntDef(RequestInfo.Params.Values['a'], 0);
      B := StrToIntDef(RequestInfo.Params.Values['b'], 0);
      NewPost := AnsiString(Format('{"version":"1.1","method":"NewService.Sum","params":{"A":"%d","B":"%d"}}', [A, B]));

      // Prepare the (fake) post-stream
      RequestInfo.PostStream.Free;
      RequestInfo.PostStream := TMemoryStream.Create;
      RequestInfo.PostStream.Write(NewPost[1], Length(NewPost));
      RequestInfo.PostStream.Position := 0;
    end
  else if RequestInfo.Document = '/json/getservertime' then
    begin
      // Extract the parameters
      NewPost := '{"version":"1.1","method":"NewService.GetServerTime"}';

      // Prepare the (fake) post-stream
      RequestInfo.PostStream.Free;
      RequestInfo.PostStream := TMemoryStream.Create;
      RequestInfo.PostStream.Write(NewPost[1], Length(NewPost));
      RequestInfo.PostStream.Position := 0;
    end;

  inherited;
end; 
```

有了这种代码，我可以发出这样的请求：

```
http://localhost:8080/json/sum?a=1&b=2 
```

返回（在浏览器中！）

```
 {"version":"1.1","result":"3"} 
```

还有这个：

```
 http://localhost:8080/json/getservertime 
```

返回这个（好吧，在撰写本文时）：

```
{"version":"1.1","result":"2013-02-01T19:24:24.827"} 
```

*   我的服务器主表单[pastebin 链接的整个代码](http://pastebin.com/600z7Ahw)
*   我的服务器主窗体[pastebin 链接的 DFM](http://pastebin.com/RWU0wtuL)

结果（在浏览器或外部应用程序中）是纯 JSON，因为它已使用 RO 的代码格式化为“JSON 消息”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T11:51:29.733

据我所知：没有。

您只能使用 JSON 结构进行某种 REST 调用： [http](http://www.mywebservice.com/JSON) ://www.mywebservice.com/JSON ?{"id":"{392543cf-f110-4ba3-95471b02ce5bd693}","method":"servicename.方法名","params":{"param1":"xxx","param2":"yyy"}}:

顺便说一句：DataAbstract（基于 RO）有一个 REST 接口，但 RO 本身没有...... :(

# asp.net-web-api - System.Web.Http.HttpError 上缺少属性

> ID：14645033
> 
> 赞同：0
> 
> 时间：2013-02-01T11:11:16.887
> 
> 标签：asp.net-web-api

除非我要疯了，否则`HttpError`应该具有以下属性：

*   `Message`
*   `ModelState`
*   `MessageDetail`
*   `ExceptionMessage`
*   `ExceptionType`
*   `StackTrace`
*   `InnerException`

我可以在[这里](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1b78397f32fc#src/System.Web.Http/HttpError.cs)的源代码中看到它们，它们都是公开的。

但是，从 NuGet 安装最新包后，唯一的公共属性`HttpError`是`Message`.

我在这里错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:48:26.733

您正在寻找的是拥有最新版本的[主](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1b78397f32fc)分支。如果您查看[v2-rtm](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/75b5e7ea58d2)分支，您将看到`System.Web.Http.HttpError`该类仅具有`Message`ASP.NET Web API 的 RTW 版本的属性：

[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/75b5e7ea58d2#src/System.Web.Http/HttpError.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/75b5e7ea58d2#src/System.Web.Http/HttpError.cs)

# javascript - 排序地图实现

> ID：14645035
> 
> 赞同：4
> 
> 时间：2013-02-01T11:11:18.283
> 
> 标签：javascript, jquery, map, underscore.js, sortedmap

**我的任务**

在我的 JavaScript 代码中，我经常使用对象将键“映射”到值，以便以后可以通过某个值直接访问它们。例如：

```
var helloMap = {};
helloMap.de = "Hallo";
helloMap["en"] = "Hello";
helloMap.es = "Hola"; 
```

*因此，我使用两种可用的符号对象样式*和*数组样式*在我的源代码中逐步构建地图对象。

稍后我可以访问我添加的值`helloMap["de"]`，例如。如果我不必关心在对象上设置属性的顺序，那一切都很好。

如果我现在想迭代对象属性，据我所知，没有办法确保我会按照它们被添加的顺序迭代它们。

**注意：**我不能使用一些包装对象，而只是在其中保存一个数组，然后使用它的方法添加值，如下所示：

```
var HelloMap = function(){
  this.myMap = [];
  this.addProperty = function(key, value){
    this.myMap.push({key: key, value: value});
  }
} 
```

或类似的东西对我不起作用。所以解决方案需要对使用对象的程序员绝对透明。

也就是说，我需要的对象将是一个空对象，它维护添加到它的属性的顺序。这样的事情会做：

```
var helloMap = {};
helloMap = getOrderAwareObject(helloMap); 
```

以便表格的每一次进一步分配，`helloMap.xy = "foo"`都`helloMap["yz"] = "bar"`将在对象中“按顺序”进行跟踪，

**可能的解决方案**

由于我没有在下划线或 jQuery 中找到任何解决方案给我这样一个特殊的对象，我遇到了为 JavaScript 对象中的属性定义 getter 和 setter 的可能性，`Object.defineProperty`因为我可以依赖*ECMAScript 5*标准，我可以使用它。

这个问题是，在实际设置之前，您必须知道可以在对象上设置的所有可能属性。因为如果你*定义*它，你必须*命名*它。

如果没有为属性定义 getter 和 setter，我正在搜索的是类似于**Default Getter**和**Default Setter的东西。**所以我可以将**排序后的地图**隐藏在对象接口后面。

*   在您知道的任何框架中是否已经有解决方案？
*   有没有像“默认getter/setter”这样的机制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T11:38:51.660

恐怕你需要在内部使用数组的某种包装器。ECMAScript 5（这是当前浏览器 JavaScript 实现所基于的标准）根本不允许有序对象属性。

但是，ECMAScript 6 将有一个具有有序属性的[`Map`实现。](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-15.14)另见[http://www.nczonline.net/blog/2012/10/09/ecmascript-6-collections-part-2-maps/](http://www.nczonline.net/blog/2012/10/09/ecmascript-6-collections-part-2-maps/)。

ECMAScript 6 中可能还有其他选项。请参阅以下问题：

[如何使用 ECMAScript 5 定义默认的 getter 和 setter？](https://stackoverflow.com/q/3112793/96100)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-27T06:00:41.180

添加指向提供排序地图和其他实现的自定义 javascript 库的链接，以供将来在此线程中参考。查看[https://github.com/monmohan/dsjslib](https://github.com/monmohan/dsjslib) -msingh

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T12:22:23.533

我不知道通用解决方案，但非通用解决方案的构造非常简单。

通常，您维护一个对象数组，其中几个方法被定义为数组的属性。至少，这是我的方法。

这是一个示例，取自一个更大的应用程序（以修改后的形式）：

```
var srcs = [];
srcs.find = function(dist) {
    var i;
    for(i=0; i<this.length; i++) {
        if(dist <= this[i].dist) { return this[i]; }
    }
    return null;
};
srcs.add = function(dist, src) {
    this.push({ dist:dist, src:src });
}
srcs.remove = function(dist) {
    var i;
    for(i=0; i<this.length; i++) {
        if(this[i].dist === dist) {
            srcs.splice(i,1);
            return true;
        }
    }
    return false;
};
srcs.add(-1, 'item_0.gif' );
srcs.add(1.7, 'item_1.gif');
srcs.add(5, 'item_2.gif');
srcs.add(15, 'item_3.gif');
srcs.add(90, 'item_4.gif'); 
```

不幸的是，您失去了普通 js 对象查找的简单性，但这就是您为拥有有序实体所付出的代价。

如果你绝对必须有 order 和 dot.notation，那么维护一个普通的 js Object 用于查找*和*一个 Array 用于 order。小心，两者可以保持完全的完整性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T18:06:21.627

请参阅我对[这个](https://stackoverflow.com/questions/2798893/ordered-hash-in-javascript)问题的回答。我实现了一个基本的有序哈希表（仅限 ES 5+，不需要填充）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-01-15T14:53:43.160

```
var put = function(k,v){
 if(map[k]){
   console.log("Key "+ k+" is already present");
 }else
 {
   var newMap = {};
   map[k] = v;
   Object.keys(map).sort().forEach(function(key){
   newMap[key] = map[key];
 });
   map = newMap;
   //delete newMap; in case object memory need to release
   return map;
 }
} 
```

Put 方法将始终采用键值对，在内部使用实际映射的排序键创建另一个映射，更新值并返回具有排序键的更新映射。无需包含外部库。

# php - PECL solr 软件包问题

> ID：14645042
> 
> 赞同：1
> 
> 时间：2013-02-01T11:11:40.047
> 
> 标签：php, solr, nginx, pecl

在 solr PECL php 包中，我们可以使用 solrparam::set 方法向 solrQuery 类添加参数作为名称值对。因此，为了构建查询，我们可以使用这个 SolrParams 类。

我只是想弄清楚 solrquery 对象中所有方法的用例是什么。喜欢

> ```
>  ***"SolrQuery::addFacetDateField — Maps to facet.date
>       SolrQuery::addFacetDateOther — Adds another facet.date.other parameter
>       SolrQuery::addFacetField — Adds another field to the facet
>       SolrQuery::addFacetQuery — Adds a facet query
>       SolrQuery::addField — Specifies which fields to return in the result
>       SolrQuery::addFilterQuery — Specifies a filter query
>        SolrQuery::addHighlightField — Maps to hl.fl"*** 
> ```

....ETC。

我们可以简单地使用 solrparam 给查询添加参数，那么这些有什么用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T23:20:14.070

添加这些方法是为了简化 Solr 函数的使用，不幸的是，当前文档遗漏了很多我目前正在处理的用例。

使用日期方面等查询功能的方法更容易且更一致，而无需每次都进入 Solr 文档来提取参数名称。它也不易出错。

目前，如果您想了解更多关于这些功能的信息，可以查看 Solr Wiki [http://wiki.apache.org/solr/SimpleFacetParameters#facet.date.other](http://wiki.apache.org/solr/SimpleFacetParameters#facet.date.other)

SolrParams 是 SolrQuery 的祖先，SolrQuery 的功能比裸骨（SolrParams）要多得多。在文档中，它传递给 SolrClient::query() 作为查询方法接受 SolrParams 类型的参数（这意味着 SolrParams 的任何后代）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T01:22:39.933

这些方法没有什么特别之处。您可以以两种方式使用 API，而不会受到任何惩罚。使用 SolrQuery 方法使您的代码更加明确，因此我认为它的可读性更好。

# android - Android ICS 小部件 - 列表视图随机变为空白（当启动器重新启动时？） RemoteviesService 错误？

> ID：14645044
> 
> 赞同：5
> 
> 时间：2013-02-01T11:11:43.890
> 
> 标签：android, listview, widget, android-launcher

我有一个带有列表视图的小部件，每天有几次列表视图项目会消失。我发现这可能是由于启动器重新启动 - 所以我尝试了一些测试。我手动重新启动了启动器，它只是证实了我的怀疑 - 这绝对是因为启动器重新启动。

如何处理？小部件的其余部分（按钮、侦听器......）正在工作，只是列表视图项目消失了，我什至看不到我定义的 empty_list 布局 - 这就是为什么我必须添加到我的小部件手动刷新按钮，但它不是很很好的解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:18:33.287

您遇到的问题似乎是一个已知问题：请参阅此处的链接：[http ://code.google.com/p/android/issues/detail?id=28216](http://code.google.com/p/android/issues/detail?id=28216)

在那里你可以找到一些关于如何解决这个问题的解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T13:04:07.467

好的，除了它是 ICS 错误，部分也是我的错 - 总是在 onUpdate 方法中重新创建小部件内容，它会好的；）

# java - 如何使用 Selenium WebDriver 和 Java 从下拉列表中选择一个选项？

> ID：14645045
> 
> 赞同：0
> 
> 时间：2013-02-01T11:11:46.020
> 
> 标签：java, selenium-webdriver

我需要从下面的 html 中选择一个类别。我尝试了不同的选项，并且在博客中显示了不同的方式，但无法选择选项。任何帮助将不胜感激。

我使用的一种方式（不是更好的方式）

```
private boolean select_dropdown_xpath(String value, String seleniumObjectValue) {
    try {
        boolean isListItemFound = false;
        int i = 0;

        do {
            i++;
            String category = driver.findElement(By.xpath(seleniumObjectValue+"/div["+ i +"]")).getText();
            if(category.equals(value)) {
                driver.findElement(By.xpath(seleniumObjectValue+"/div["+ i +"]")).click();
                isListItemFound = true;
            }
        } while (isListItemFound == false);

        if(!(isListItemFound)) {
            return false;
        }               

    } catch(Exception e) {
        return false;
    }

    return true;
} 
```

工具：Selenium WebDriver 2.28 with Java

谢谢普纳

HTML：

```
<div class="drop-down">
    <div class="label_field">
        <label>Category:</label>
        <fieldset>
            <div id="Ccategory" class="jSym_select_element jSym_pie jSym_noSelectText false hover" tabindex="0" textval="Default" style="width: 350px;">
                <div class="jSym_drop_arrow false"/>
                <div class="jSym_select_inner false">Default</div>
            </div>
        <div id="selectDrop" class="jSym_select_drop jSym_noSelectText " style="height: 50px; width: 350px; margin-top: 10px;">
            <div class="jSym_select_item jSym_noSelectText" optionval="Default">Default</div>
            <div class="jSym_select_item jSym_noSelectText" optionval="Reset">Reset</div>
        </div>
            <select id="select_category" class="jSym_dropdown" name="category" style="visibility: hidden;">
                <option value="Default">Default</option>
                <option value="Reset">Reset</option>
            </select>
        </fieldset>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T11:38:30.727

**试试这个代码：**

```
Select sele = new Select(driver.findElement(By.id("select_category")));

//Select the dropdown by using the displayed value.
sele.selectByVisibleText(`displayed value`);

//or you can Select the dropdown by using the index value.
sele.selectByIndex(`index value`);

 //or you can Select the dropdown by using the value attribute.
sele.selectByIndex(`value in the value attribute`); 
```

在您的情况下，下拉可见性是隐藏的。`JavaScript Executor`因此，首先通过使用class使其可见。然后使用上面的代码。

# java - Spring注入静态（全局）单例

> ID：14645047
> 
> 赞同：12
> 
> 时间：2013-02-01T11:11:57.603
> 
> 标签：java, spring, dependency-injection, singleton

我有一个看起来像这样的类：

```
public class Configurator {
    private static Configurator INSTANCE = null;

    private int maxRange = 1;

    // many other properties; each property has a default value

    private static synchronized Configurator getInstance() {
        if(INSTANCE == null)
            return new Configurator();

        return INSTANCE;
    }

    public static int getMaxRange() {
        getInstance().maxRange;
    }

    public static void setMaxRange(int range) {
        getInstance().maxRange = range;
    }

    // Getters and setters for all properties follow this pattern
} 
```

它作为一个全局配置对象，可以在应用启动时设置，然后被整个项目的几十个类使用：

```
// Called at app startup to configure everything
public class AppRunner {
    Configurator.setMaxRange(30);
}

// Example of Configurator being used by another class
public class WidgetFactory {
    public void doSomething() {
        if(Configurator.getMaxRange() < 50)
            // do A
        else
            // do B
    }
} 
```

我现在将此代码导入 Spring 项目，并尝试配置我的 Sprinig XML (bean)。我的猜测是我可以`Configurator`像这样（或类似的东西）定义一个孤豆：

```
<bean id="configurator" class="com.me.myapp.Configurator" scope="singleton">
    <property name="maxRange" value="30"/>
    <!-- etc., for all properties -->
</bean> 
```

这样，当`WidgetFactory#doSomething`执行时，Spring 将已经加载了`Configurator`该类并提前对其进行了配置。

设置 对我来说是否正确`scope="singleton"`，或者这无关紧要？我是否正确设置了静态属性？还有什么我需要做或考虑的吗？提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T11:25:05.240

作为一种设计模式的单例与 Spring 的单例设施之间存在一些差异。单例作为一种设计模式将确保您为每个类加载器定义一个类对象。相比之下，Spring 的单例工具（和方法）将为每个 Spring Context 定义一个实例。

在这种情况下，您可以利用`getInstance()`Spring 使用的方法来获取对象实例：

```
<bean id="configurator" class="com.me.myapp.Configurator" factory-method="getInstance">
</bean> 
```

使用 Spring，`singleton`bean 范围是默认的，因此您不需要定义它。

如果您想`configurator`用作 Spring bean，则必须将其注入其他对象，而不是`getInstance()`用来抓取它。所以在其他 Spring bean 中使用 @Autowired 或通过 xml 文件定义对 bean 的引用。如果你不重新组织`configurator`其他类中的用法，没有区别，Spring会实例化你的类，但你会像以前一样使用它。

我还看到您在设计单例时有错误。你的`getInstance()`方法应该是公开的，其他方法不应该是静态的。在您使用的示例中，您应该像这样使用 Singleton：

```
Configurator.getInstance().someMethod() 
```

在这种情况下，您实际上只是使用 Singleton 类，而不实例化任何对象！有关Singleton 设计模式以及如何使用它的更多信息，请参阅[关于 Singleton 的 wikipedia（带有 Java 示例） 。](http://en.wikipedia.org/wiki/Singleton_pattern)

* * *

注意：值得了解并尝试将其`Configurator`用作单例并使用 Spring 的单例工具。如果你这样做，好处是你可以

*   删除`getInstance()`方法
*   公开你的构造函数
*   让 Spring 实例化该单个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:15:50.840

默认情况下，bean 是单例的。您可以通过 spring 网站找到此/更多信息。

您不应该在 getInstance 中实例化新的配置器，因为它不会引用弹簧加载的 bean，这可能会导致一些严重的问题。您可以连接这个 bean，然后不理会它，它不会为空，因为您已经连接了它（如果是，您的程序将无法初始化）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:21:08.013

是的，如果你想要一些全局的东西，单例范围是正确的选择。这里值得一提的是：

1.  spring 的默认作用域是单例的，所以你不需要显式地将你的 bean 设置为单例作用域。
2.  使用 Spring，您无需编写*单例模式*样式代码，例如私有实例和工厂方法。这是因为 Spring 将保证每个 Spring 容器只有一个实例。更不用说，你的工厂方法是私有的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-11T11:23:52.393

顺便说一句：这不是线程安全的：

```
if(INSTANCE == null)
        return new Configurator();

    return INSTANCE;
} 
```

而这将是：

```
private static Configurator INSTANCE = new Configurator(); 
```

（急切初始化）

```
private static volatile Singleton _instance = null; 
```

（使用 volatile 关键字进行延迟初始化）

它与 Java 分配内存和创建实例的方式有关。这不是原子的，而是分两步完成的，并且可能会受到线程调度程序的干扰。

另请参阅[http://regrecall.blogspot.de/2012/05/java-singleton-pattern-thread-safe.html](http://regrecall.blogspot.de/2012/05/java-singleton-pattern-thread-safe.html)。

# batch-file - 如何知道批处理脚本中先前命令的输出

> ID：14645051
> 
> 赞同：0
> 
> 时间：2013-02-01T11:12:01.457
> 
> 标签：batch-file

```
@echo off
setlocal enabledelayedexpansion
>result.txt (
  for /f %%a in (srvrname.txt) do (
   ping -n 1 %%a > nul && echo %%a up||echo %%a DOWN 
)) 
```

我正在使用上述脚本对某些服务器进行 ping 测试。我想了解如何将 ping 命令的输出传递给 echo UP 或 echo DOWN 部分。在 unix 中，我们有 $? 知道上一个命令是否成功执行，例如 if[$? -eq 0] 然后；做成功，否则失败。这是如何在批处理脚本中发生的。我们有像 $ 这样的变量吗？批量。请告诉我。另外请建议我们是否可以使 pingtest 脚本更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:22:10.587

我想你正在寻找`%errorlevel%`.

这将为您提供最后执行的命令的错误代码。

```
if %errorlevel%==0 echo SUCCESS
if %errorlevel%==1 echo FAIL 
```

***注意：***可以设置的错误代码范围很广，我只是以1为例，查看命令文档以查找错误代码的含义。

但请注意，如果您`%errorlevel%`在`for`循环中使用，则需要使用延迟扩展。

您已经在脚本 ( `setlocal enabledelayedexpansion`) 中添加了它，因此您只需将`%`'s 更改为`!`'s。

```
@echo off
setlocal enabledelayedexpansion
>result.txt (
  for /f %%a in (srvrname.txt) do (
   ping -n 1 %%a > nul
   if !errorlevel!==0 (
   echo Ping replied successfully
   ) else (
   echo There was an error
   )
)) 
```

# php - 如何解码html标签中的文本

> ID：14645055
> 
> 赞同：0
> 
> 时间：2013-02-01T11:12:27.990
> 
> 标签：php, cakephp

我必须将请求数据解码为 html 标签。代码 ：-

```
#039;&lt;div class=&quot;span12&quot;&gt;
    &lt;!----------------------- Company ------------------&gt;
    &lt;div class=&quot;row&quot;&gt;
        &lt;div class=&quot;span6&quot;&gt;
            &lt;h3&gt;Company Name&lt;/h3&gt;
            Company Address
        &lt;/div&gt;
        &lt;div class=&quot;span6&quot;&gt;
            &lt;h5&gt;INVOICE&lt;/h5&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;br /&gt; &lt;br /&gt; 
```

我必须在 php 中对此进行解码。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:16:13.327

你试过使用`html_entity_decode()`吗？[查看php.net](http://php.net/manual/en/function.html-entity-decode.php)上的 php 文档

```
$text = "#039;&lt;div class=&quot;span12&quot;&gt;
&lt;!----------------------- Company ------------------&gt;
&lt;div class=&quot;row&quot;&gt;
    &lt;div class=&quot;span6&quot;&gt;
        &lt;h3&gt;Company Name&lt;/h3&gt;
        Company Address
    &lt;/div&gt;
    &lt;div class=&quot;span6&quot;&gt;
        &lt;h5&gt;INVOICE&lt;/h5&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br /&gt; &lt;br /&gt;";

$html = html_entity_decode($text);
echo $html; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:16:08.110

试试这个[http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php) 或[http://www.php.net/manual/en/function.htmlspecialchars-decode.php](http://www.php.net/manual/en/function.htmlspecialchars-decode.php)

这些功能将让您解码 html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:15:38.057

您可以使用`html_entity_decode`. 见[http://www.php.net/manual/de/function.html-entity-decode.php](http://www.php.net/manual/de/function.html-entity-decode.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:16:27.350

您可以使用`html_entity_decode()`函数对其进行解码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T11:18:30.647

考虑使用`html_entity_decode` [http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

# audio - 是否可以从 Spotify 应用程序访问歌曲的波形？

> ID：14645056
> 
> 赞同：2
> 
> 时间：2013-02-01T11:12:42.417
> 
> 标签：audio, audio-streaming, spotify, audio-processing

我正在考虑如何构建一个进行节拍检测（提取歌曲的 bpm）的 Spotify 应用程序。为此，我需要访问原始音频、波形并对其进行分析。

我是构建 spotify 应用程序的新手。我知道使用“libspotify”可以访问原始音频。你可以通过 Spotify 应用程序 API 做同样的事情吗？如何？

作为记录，目前存在两个 Spotify 应用程序 api：

*   [当前的](https://developer.spotify.com/technologies/apps/docs/)
*   [预览](https://developer.spotify.com/technologies/apps/docs/preview/api/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:41:02.597

除非您真的热衷于自己编写节拍检测代码，否则您应该查看[EchoNest](http://developer.echonest.com/)提供的 API ，其中包括这些（以及许多其他很棒的东西）。

请参阅[获取歌曲的速度、调号和其他音频属性](http://developer.echonest.com/raw_tutorials/faqs/faq_04.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:48:02.187

一句话：没有。目前在 Apps API 中不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-21T22:10:06.490

我猜有一个新的端点。查看示例[https://medium.com/swlh/creating-waveforms-out-of-spotify-tracks-b22030dd442b?source=linkShare-962ec94337a0-1616364513](https://medium.com/swlh/creating-waveforms-out-of-spotify-tracks-b22030dd442b?source=linkShare-962ec94337a0-1616364513)

使用端点[https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-analysis/](https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-analysis/)

**编辑：我同意评论者@wizbcn 的观点，即这不能回答这个问题。**把它留在这里是不是有点不正确，因为我在搜索链接文章中关于可视化大头钉波形的信息时发现了这个 SO 帖子？也许我应该对此发表评论？

# iphone - UITableCell 以阴影为中心

> ID：14645060
> 
> 赞同：0
> 
> 时间：2013-02-01T11:13:08.080
> 
> 标签：iphone, uitableview

我想以与 Google+ 应用类似的方式构建我的 UITableView，该应用具有：

1.  我猜 UITableCell 宽度约为 310，但重要的是它们居中，我不知道如何实现...

2.  单元格下方有 1-2 像素的阴影。

请帮助我了解如何以相同的方式定位我的单元格以及如何添加阴影效果。

![在此处输入图像描述](../Images/9418354d03fc286eaaca2585c98f8d7d.png)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:18:59.277

1.  我猜 UITableCell 宽度约为 310，但重要的是它们居中，我不知道如何实现...：您必须创建自己的`UITableViewCell`. 在这里，您可以根据需要放置所需的控件。您`UITableView`只能通过创建自定义`UITableViewCell`. 你可以参考[这个](http://howtomakeiphoneapps.com/how-to-design-a-custom-uitableviewcell-from-scratch/1292/)

2.  单元格下方有 1-2 像素的阴影。：这只能通过使用带有阴影的图像作为您自定义的背景来实现`UITableViewCell`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:43:07.637

好的，所以我终于得到了解决方案。

我为每个单元格使用了一个背景图像，它占据了整个宽度（我有点作弊）并将阴影和 10px 分隔合并到背景图像中。

当然，我必须使用 Photoshop 或类似的程序来实现这一点。所以 UITableView 和单元格的宽度应该是 320，单元格的高度也应该包含阴影和分隔。

这就是我如何让桌子看起来完全像我想要的那样！！

![在此处输入图像描述](../Images/94c5e966c3638c59e2d9d71e3f62911a.png)

# javascript - 从可折叠标题内的按钮调用函数而不展开

> ID：14645063
> 
> 赞同：2
> 
> 时间：2013-02-01T11:13:14.150
> 
> 标签：javascript, jquery, css, jquery-mobile, event-handling

我有一个带有一些可折叠项目的可折叠套装。每个可折叠项目的呼喊都有几个带有 onclick 事件的按钮：

```
 <div id="List" data-role="collapsible-set" data-theme="b" data-content-theme="d">
    <div id='ListItem' data-role='collapsible' data-content-theme='b' data-collapsed='false'>
        <h3>Title
            <div style='float:right;'>
                <input type='button'  data-theme='b' value='Settings' data-mini='true' data-inline='true' data-icon='gear' data-icon-pos='top' onclick='test(43);'/>
                <input type='button' value='Delete' data-theme='b' data-mini='true' data-inline='true' data-icon='delete' onclick='test(45);' class='splitButtonClicked'/>
            </div>
        </h3>
        CONTENT
    </div>
</div>

function test(value){
    alert(value);
    return false;
} 
```

onclick 事件应该调用带有一个或多个参数的函数。该事件运行良好，但事件发生后列表视图项崩溃。这不应该发生！

我怎样才能中断崩溃？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:41:55.563

内联 javascript 之类的 **`onclick=...`**不应与**`jQuery Mobile`**. 为防止出现此问题，必须将单击事件绑定到按钮并防止传播到情人级别。

这是一个工作**`jsFiddle`**示例：http: [//jsfiddle.net/Gajotres/z3hsb/](http://jsfiddle.net/Gajotres/z3hsb/)

代码示例：

```
$(document).on('pagebeforeshow', '#index', function(){    
    $('#first-button').bind('click', function(e) {       
        alert('First button');       
        e.stopPropagation();
        e.stopImmediatePropagation();          
    });    
    $('#second-button').bind('click', function(e) {    
        alert('Second button');   
        e.stopPropagation();
        e.stopImmediatePropagation();           
    });
}); 
```

如果您想了解更多关于这个主题的信息，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，更透明的是我的个人博客。或者可以在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到。还有一件事，在我的文章中，我已经说过开发人员不应该使用 bind/live/delegate 来绑定事件，但是在这里我们必须使用 bind，因为它是如何工作/与**`data-role="collapsible-set"`**函数交互的，**`live`**并且**`on`**不会在这里工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:17:16.680

您的函数返回 false，但它不是从调用者返回的。

```
<input type='button' value='Delete' data-theme='b' data-mini='true' data-inline='true' data-icon='delete' onclick='return test(45);' class='splitButtonClicked'/> 
```

尝试将返回语句添加到按钮标记。

# magento - Magmi 不会更新图像

> ID：14645064
> 
> 赞同：0
> 
> 时间：2013-02-01T11:13:14.333
> 
> 标签：magento, import, magmi

我正在使用数据泵 API - 它适用于我的产品，但现在更新图像它将无法正常工作。

这是 Magmi 不喜欢的我的数组

```
array(5) {
  ["type"]=>
  string(6) "simple"
  ["sku"]=>
  string(6) "131017"
  ["image"]=>
  string(76) "/ext/vhosts/site/subdomains/m/public/importer/../import/NO/A_131017.jpg"
  ["small_image"]=>
  string(76) "/ext/vhosts/site/subdomains/m/public/importer/../import/NO/A_131017.jpg"
  ["thumbnail"]=>
  string(76) "/ext/vhosts/site/subdomains/m/public/importer/../import/NO/A_131017.jpg"
} 
```

当我导入我的产品时，这很好用，但是上面有描述等

我有以下 magmi 设置：

*   使用模式 -*仅更新现有项目，跳过新项目*
*   图像导入模式 -*覆盖现有图像*
*   远程图像的预下载检查 - 已*启用*
*   仅分配现有图像 -*否*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T04:44:49.397

图像应该放在 media/import 文件夹中，这似乎是 Magento 导入（以及 Magmi）的先决条件。因此，无论您从哪里运行 Magmi GUI，图像都应该放在 media/import 文件夹中。此外，如果您的图像位于 media/import 内的文件夹中，您还必须在导入 csv 中指定它。

例如，您的图像位于制造商-A 文件夹中，那么您还必须在图像列上定义相关文件夹路径，即制造商-A/imagefilename.jpg
另外，请注意，将图像命名为一个坏主意作为 1.jpg、2.jpg。Magento 尝试使用文件名中的前两个字母创建子文件夹以进行缓存。因此，理想情况下，1.jpg 将放置在 1/./1.jpg 内，由于点，这是不可能的。

请注意，当您定义图像的路径时，不需要定义完整路径，只需定义导入文件夹 (media/import)的相对路径**，因此在上面的示例中，它是**

`manufacturer-A/image-1.jpg`

**并不是**

`/ext/vhosts/site/subdomains/m/sitename/magento/media/import/manufacturer-A/image-1.jpg`

希望这可以帮助。:-)

# email - Procmail拆分邮件列表答案

> ID：14645067
> 
> 赞同：0
> 
> 时间：2013-02-01T11:13:22.790
> 
> 标签：email, procmail

关于邮件列表的常见道德规范是回复人类，并抄送邮件列表，如下所示：

```
To: help-volounter@dev.full
Cc: some-program@mailing-list.com
Subject: Re: Describtion of the problem 
```

问题是我收到了两份这样的电子邮件（这是预期的）。我想将`procmail`一份复制到邮件列表 mbox，另一份复制到收件箱 mbox。这是简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:23:38.800

这并不完全是微不足道的，但有一些你可能会发现有用的构建块。

您可以通过保留已看到的 message-id:s 的缓存来检测您是否已收到消息。这是[`procmailex`手册页](http://www.themanualpage.org/man/man5/procmailex.5.php)中更详细描述的标准技术。我建议使用相同的技术来决定将传入消息归档的位置；如果以前没有看过，请发送到您的收件箱；否则，文件到列表的文件夹。

锁定变得有些复杂，因为您需要在进入`formail -D`配方之前获取锁定文件。这可以通过使用`LOCKFILE`特殊变量来完成。

```
# Is this message addressed both to yourself and to the list?
:0
* ^TO_you@example\.net\>
* ^TO_mailing-list@elsewhere\.example\.org\>
{
    # Select regular inbox as default target for this message
    dest=$DEFAULT

    # Lock msgid.lock for exclusive access to msgid.cache
    LOCKFILE=msgid.lock

    # If message-id is already cached, override $dest
    :0
    * H ? formail -D 8192 msgid.cache
    { dest=listbox/ }

    # Release lock
    LOCKFILE=

    # Deliver to $dest
    :0
    $dest
} 
```

这不是 100% 万无一失的。例如，如果您得到一个`Bcc:`，您自己的地址将不会出现在标题中，因此您`^TO_` *自己*将不会匹配。

# facebook - Facebook 实时更新 - 当用户朋友更新照片时收到通知

> ID：14645075
> 
> 赞同：0
> 
> 时间：2013-02-01T11:13:48.207
> 
> 标签：facebook, real-time-updates

使用实时更新我可以在用户上传照片时收到通知，但是否可以在他们的朋友上传照片时收到通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:58:52.863

根据[文档](https://developers.facebook.com/docs/reference/api/realtime/)，您无法订阅`User.home`（用户的新闻提要）的更改。这是您可以看到朋友照片的地方，因此我断定您无法收到这些事件的通知。

# django - Django QuerySet get_or_create - TypeError - save() 得到了一个意外的关键字参数“使用”

> ID：14645084
> 
> 赞同：6
> 
> 时间：2013-02-01T11:14:25.863
> 
> 标签：django, django-models, django-queryset

我在查询集上使用`get_or_create`时出错：

> TypeError at ...`save()`得到了一个意外的关键字参数“使用”

这是我的看法：

```
class MailingListSubscriptionForm(forms.ModelForm):
    """Form for subscribing to a mailing list"""
    # Notes : This form will not check the uniquess of
    # the 'email' field, by defining it explictly and setting
    # it the Meta.exclude list, for allowing registration
    # to a mailing list even if the contact already exists.
    # Then the contact is always added to the subscribers field
    # of the mailing list because it will be cleaned with no
    # double.

    email = forms.EmailField(label=_('Email'), max_length=75)

    def save(self, mailing_list):
        data = self.cleaned_data
        contact, created = Subscriber.objects.get_or_create(
            email__exact=data['email'], defaults={'email': data['email']}
        )

        mailing_list.subscribers.add(contact)
        mailing_list.unsubscribers.remove(contact)

    class Meta:
        model = Subscriber
        fields = ('email',) 
```

这是完整的追溯：

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/home/newsletter/

Django Version: 1.4.3
Python Version: 2.7.3
Installed Applications:
('jmb.core',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'south',
 'easy_thumbnails',

 'web',
 'sccore.profiles',
 'django.contrib.admin',
 'django_extensions',

 'cms',
 'mptt',
 'menus',
 'south',
 'sekizai',
 'cms.plugins.flash',
 'cms.plugins.googlemap',
 'cms.plugins.link',
 'cms.plugins.snippet',
 'cms.plugins.text',
 'cms.plugins.twitter',
 'filer',
 'cmsplugin_filer_file',
 'cmsplugin_filer_folder',
 'cmsplugin_filer_image',
 'cmsplugin_filer_teaser',
 'cmsplugin_filer_video',
 'easy_thumbnails',
 'tinymce',

 'debug_toolbar',
 'django_extensions')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'jmb.core.middleware.thread_local.ThreadLocals',
 'cms.middleware.multilingual.MultilingualURLMiddleware',
 'cms.middleware.page.CurrentPageMiddleware',
 'cms.middleware.user.CurrentUserMiddleware',
 'cms.middleware.toolbar.ToolbarMiddleware',
 'debug_toolbar.middleware.DebugToolbarMiddleware')

Template error:
In template /home/luca/src/jmb-siti/www.acomea.it/web/templates/bootstrap_full.html, error at line 12
   save() got an unexpected keyword argument 'using'
   2 : {% load cms_tags menu_tags sekizai_tags %}

   3 : 

   4 : {% block central_content_left %}{% endblock %}

   5 : {% block central_content %}

   6 : <div class="span9 central_content">

   7 :     <div class="row-fluid">

   8 :         {% block central_content_central %}

   9 :         {% block central_content_central_top %}{% endblock %}

   10 :         {% block central_content_central_middle %}

   11 :         <div class="span12 central_content_central_middle"><div class="item6 height5">

   12 :              {% placeholder central_content_central_middle %} 

   13 :         </div></div>

   14 :         {% endblock %}

   15 :         {% block central_content_central_bottom %}{% endblock %}

   16 :         {% endblock %}

   17 :     </div>

   18 : </div>

   19 : {% endblock %}

   20 : {% block central_content_right %}{% endblock %}

   21 : 

   22 : {% block central_right %}{% endblock %}

Traceback:
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/luca/.buildout/eggs/django_cms-2.3.3-py2.7.egg/cms/views.py" in details
  113\.     return render_to_response(template_name, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/loader.py" in render_to_string
  171\.         return t.render(Context(dictionary))
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  140\.             return self._render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in render
  123\.         return compiled_parent._render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/django_classy_tags-0.3.4.1-py2.7.egg/classytags/core.py" in render
  102\.         return self.render_tag(context, **kwargs)
File "/home/luca/.buildout/eggs/django_sekizai-0.6.1-py2.7.egg/sekizai/templatetags/sekizai_tags.py" in render_tag
  75\.         rendered_contents = nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/loader_tags.py" in render
  62\.             result = block.nodelist.render(context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/home/luca/.buildout/eggs/django_classy_tags-0.3.4.1-py2.7.egg/classytags/core.py" in render
  102\.         return self.render_tag(context, **kwargs)
File "/home/luca/.buildout/eggs/django_cms-2.3.3-py2.7.egg/cms/templatetags/cms_tags.py" in render_tag
  235\.         content = get_placeholder_content(context, request, page, name, inherit)
File "/home/luca/.buildout/eggs/django_cms-2.3.3-py2.7.egg/cms/templatetags/cms_tags.py" in get_placeholder_content
  154\.         content = render_placeholder(placeholder, context, name)
File "/home/luca/.buildout/eggs/django_cms-2.3.3-py2.7.egg/cms/plugin_rendering.py" in render_placeholder
  126\.     content.extend(render_plugins(plugins, context, placeholder, processors))
File "/home/luca/.buildout/eggs/django_cms-2.3.3-py2.7.egg/cms/plugin_rendering.py" in render_plugins
  80\.         out.append(plugin.render_plugin(context, placeholder, processors=processors))
File "/home/luca/.buildout/eggs/django_cms-2.3.3-py2.7.egg/cms/models/pluginmodel.py" in render_plugin
  171\.             context = plugin.render(context, instance, placeholder_slot)
File "/home/luca/src/jumbo2/jmb.newsletter/jmb/newsletter/cms/plugins.py" in render
  27\.                 form.save(instance.mailing_list)
File "/home/luca/src/jumbo2/jmb.newsletter/jmb/newsletter/forms.py" in save
  27\.             email__exact=data['email'], defaults={'email': data['email']}
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/db/models/manager.py" in get_or_create
  134\.         return self.get_query_set().get_or_create(**kwargs)
File "/home/luca/.buildout/eggs/Django-1.4.3-py2.7.egg/django/db/models/query.py" in get_or_create
  452\.                 obj.save(force_insert=True, using=self.db)

Exception Type: TypeError at /home/newsletter/
Exception Value: save() got an unexpected keyword argument 'using' 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T11:22:09.420

您已经覆盖了模型中未显示的定义`save`，`Subscriber`而不允许完整的参数列表。您应该始终支持`*args, **kwargs`覆盖的方法，并将它们传递给`super()`调用。

尽管这不是导致此问题的原因，但您的表单保存方法也是如此，它不支持`commit`. 再次，接受`*args, **kwargs`。并且绝对在`super`这里调用该方法，您目前没有这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T11:19:55.367

像这样改变你`save`可能会解决问题

```
def save(self, mailing_list, *args, **kwargs):
    data = self.cleaned_data
    contact, created = Subscriber.objects.get_or_create(
        email__exact=data['email'], defaults={'email': data['email']}
    )

    mailing_list.subscribers.add(contact)
    mailing_list.unsubscribers.remove(contact)

    super(MailingListSubscriptionForm, self).save(*args, **kwargs) 
```

正如[丹尼尔](https://stackoverflow.com/users/104349/daniel-roseman)所说，看起来你已经做了类似于`Subscriber`模型的事情（你没有发布）。`super()`如果您还没有，我建议您在那里进行类似的添加。一旦完成（或在函数开始之前）您的自定义保存代码，该`super`调用将只调用父级。`save()`

# android - 使用 jlayer 在 Android 上慢速 MP3 解码

> ID：14645087
> 
> 赞同：1
> 
> 时间：2013-02-01T11:14:32.453
> 
> 标签：android, mp3, jlayer

解码10秒需要1分钟，如何才能更快地解码MP3？

```
public static byte[] decode(String path, int startMs, int maxMs) throws FileNotFoundException 
{
    float totalMs = 0;
    ByteArrayOutputStream os = new ByteArrayOutputStream();
    File file = new File(path);
    InputStream inputStream = new BufferedInputStream(new FileInputStream(file), 8 * 1024);
    try {
        Bitstream bitstream = new Bitstream(inputStream);
        Decoder decoder = new Decoder();
        boolean done = false;
        while (! done) {
            Header frameHeader = bitstream.readFrame();
            totalMs += frameHeader.ms_per_frame();
            SampleBuffer output = (SampleBuffer) decoder.decodeFrame(frameHeader, bitstream);  
            short[] pcm = output.getBuffer();   

            for (short s : pcm) {
                os.write(s & 0xff);
                os.write((s >> 8 ) & 0xff);
              }
            if (totalMs >= (startMs + maxMs)) {
                done = true;
            }
            bitstream.closeFrame();
        } 
        return os.toByteArray();
    }catch(Exception e){
          e.printStackTrace();
    }
    return null;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:06:19.513

您上面列出的`decode`方法只是示例代码。您不应该在生产中使用它，也就是说，您要传递一个路径并反复重新打开同一个文件，这是一项代价高昂的操作。

相反，您应该在此方法之外将文件打开到 InputStream，然后将 InputStream 传递给该方法。看这个问题的例子：[Android JellyBean network media issue](https://stackoverflow.com/questions/13191350/android-jellybean-network-media-issue)

# ruby-on-rails - 如何在 Ruby 中通过 Internet 控制没有静态 IP 的嵌入式设备？

> ID：14645088
> 
> 赞同：3
> 
> 时间：2013-02-01T11:14:38.130
> 
> 标签：ruby-on-rails, ruby, networking, embedded

我们有一个没有静态IP的设备，连接到互联网，我们想向设备发送数据来控制它，并且需要通过rails中的服务器应用程序定期从设备接收报告数据。使用 http 和 ruby​​ 完成此任务的可能方法是什么？

有没有办法在没有 dyndns 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:32:05.643

它更多的是服务器/路由问题。与 ruby​​ on rails 没有太大关系。如果您的设计支持 dyndns，那么您的问题是可以解决的。

*   1 告诉设备你正在使用 dyndns
*   2 在此处注册您的 dyndns 域，例如：[http ://dyn.com/dns/](http://dyn.com/dns/)
*   3 设计将始终使用新 ip 更新 dyndns 域
*   4 为您的服务器设置虚拟主机配置，如下所示：

> ```
> <VirtualHost *:80>
>   ServerName my.dyndns.domain
>   DocumentRoot ...
>   ...
> </VirtualHost> 
> ```

现在，其他人或您的 Rails 应用程序应该可以访问该设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T04:50:16.310

当它出现时，你可以让设备打电话回家。如果您在公共互联网上有一台服务器，则该设备可以知道如何联系服务器并自行注册以获取更新。

如果设备知道通过 HTTP 或其他协议轮询更新，那么在许多情况下，这也会让您绕过防火墙和 NAT。

# php - 使用 Perl 转发 IMAP 消息

> ID：14645089
> 
> 赞同：0
> 
> 时间：2013-02-01T11:14:46.987
> 
> 标签：php, perl, imap

我需要处理一些邮件。我已经构建了一个脚本，可以解析邮箱并执行一些操作，如保存附件、将电子邮件移动到文件夹和其他管理任务。在此过程中，一些电子邮件被识别为流氓电子邮件，需要转发。这些邮件可能有也可能没有一个或多个附件，并被转储到它们自己的标有 的文件夹`fwd`中。

我可以创建和发送新电子邮件，但在查找有关转发或回复现有电子邮件的信息时遇到问题。一种解决方案是将部分（正文、主题、附件）保存到数据库中并构造一条新消息，[`MIME::Lite`](https://metacpan.org/module/MIME%3a%3aLite)但这似乎充其量是低效的。

我正在使用[`Net::IMAP::Simple::SSL`](https://metacpan.org/module/Net%3a%3aIMAP%3a%3aSimple%3a%3aSSL)和处理电子邮件[`MIME::Parser`](https://metacpan.org/module/MIME%3a%3aParser)。

由于电子邮件被转储到一个临时文件夹中以保存我并不完全反对使用 PHP 脚本来处理消息，而是更喜欢与我当前的 Perl 处理程序一致的东西来执行任务。

寻找一些有用的信息来帮助完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:23:33.243

您可能想查看 CPAN `Mail::Box`，这是一个处理邮件消息的丰富（并且有点复杂）的模块，包括诸如 message->copy 和 message->reply 之类的原语。

对于文档和示例，作者的网站位于`http://perl.overmeer.net/mailbox/`

# xml - 如何在 XML 中制作标记语言？

> ID：14645090
> 
> 赞同：1
> 
> 时间：2013-02-01T11:14:56.493
> 
> 标签：xml

我想知道如何在 XML 中制作标记语言，以及文件结构和文件中的哪些代码，以及我是否得到一个以 .mml 或 .thisml 结尾的文件？

谢谢，Lordtenteth

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:21:01.727

> 我想知道如何在 XML 中制作标记语言

1.  决定你想要什么元素和属性。
2.  记录它们

考虑编写模式或 DTD。

> 以及文件结构

您自己决定（在 XML 格式的范围内）。

> 以及文件中的代码

XML

> 如果我得到一个以 .mml 或 .thisml 结尾的文件？

文件扩展名在很大程度上没有意义，除非您想使用它们将文件类型与应用程序相关联。如果`.xml`您希望文件与用户通常用于 XML 的任何应用程序相关联，请使用此选项。如果您正在编写应用程序来处理它们，请自行编写。

# javascript - Dojo 和 doh：测试特定主题订阅

> ID：14645099
> 
> 赞同：1
> 
> 时间：2013-02-01T11:15:14.197
> 
> 标签：javascript, dojo, doh

有谁知道使用 doh 测试对象是否订阅特定主题的方法？

我正在努力寻找任何描述此类测试的文档。

我问这个的原因是因为当我构建我的小部件时，我订阅了一个主题。我想要一个单元测试来测试小部件在构建后是否总是具有该主题订阅。

我的主题有一个私有变量，我在创建订阅时将其用作主题字符串。

例如，这里有一个名为“CustomTopic”的主题：

```
define([], function(){

    var topicString= "topicString";

    return {
        TOPIC_STRING: function(){
            return topicString;
        }
    }
}) 
```

我的小部件中的构造函数如下所示：

```
constructor: function() {   
    topic.subscribe(CustomTopic.TOPIC_STRING(), function(params) {doSomething(params)});
} 
```

所以你可以看到根据私有变量值检查主题订阅是多么容易，如果我能弄清楚如何查看我的小部件的所有订阅？

以供参考：

[Dojo 1.8 文档](http://dojotoolkit.org/documentation/)

[Dojo 的测试工具“doh”文档](http://dojotoolkit.org/reference-guide/1.8/util/doh.html#id1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:12:36.140

*我建议如果您的测试专注于行为*而不是实现，它将更加健壮/有用。在这种情况下，测试您的小部件是否响应主题（或者更好的是，导致发布主题的事件，以进行更多集成测试）而不是尝试捕获订阅本身会更有意义。

当然，您可以尝试包装 topic.subscribe（坏事），或检查小部件的私有句柄列表（另一个坏事）。顺便说一句，我希望您实际上保存了 topic.subscribe 返回的句柄，以便稍后在对象被销毁时删除（之前取消订阅）它。

比这些更好的是简单地创建一个新对象，发布到该主题，然后查看是否调用了 doSomething，或者是否发生了所需的结果。虽然 doh 不支持监听函数调用，但 dojo/aspect 是用于此目的的理想选择。所以你可能有这样的事情：

```
var myWidget = new myWidget(); // presumably subscription happened, 
                               // but we only care about later behaviour
var somethingDone = false;
aspect.after(window, "doSomething", function(){somethingDone = true;});
topic.publish(CustomTopic.TOPIC_STRING());
doh.assertTrue(somethingDone); 
```

事实上，我假设 doSomething 不是一个全局方法，所以你必须正确地确定它的范围，否则这应该可以正常工作。目前 topic.publish 是同步的，所以这应该可以正常工作，但将来它可能会变成异步的，在这种情况下，你会希望避免调用 doh.assertTrue 直到稍后阶段。

# debugging - D-Bus 通过 d-feet 发送变体

> ID：14645112
> 
> 赞同：10
> 
> 时间：2013-02-01T11:15:55.490
> 
> 标签：debugging, dbus

我使用 D-Feet D-Bus 调试器来调查一些接口。其中一个需要将`variant`类型作为参数发送（这意味着您可以发送任何内容）。

但是我在发送参数时遇到了麻烦`variant`- 正常的 python 语法将`__import__('dbus').Boolean(0)`用于布尔值，但这不起作用（`Error.InvalidArguement`）。

使用`variant:boolean:0`也不行。

如何`variant`通过 D-Feet 发送争论？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-16T22:06:57.983

至少在 d-feet 0.3.9 中`GLib.Variant('b', False)`有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T12:08:24.770

我试过`__import__('dbus').Boolean(0, variant_level=1)`了，它似乎奏效了。

# c++ - 使用 GetPrivateProfileInt、GetPrivateProfileString 读取十六进制值的正确方法是什么？

> ID：14645114
> 
> 赞同：0
> 
> 时间：2013-02-01T11:15:58.610
> 
> 标签：c++, windows, winapi, types

现在我想从 ini 中的变量中获取值并将它们吐出到 sendkey 函数中。所以目前这就是我在顶部定义它们的方式显然不正确，因为我在测试变量时得到了默认值。

```
const int KeyAtk = GetPrivateProfileInt(L"BotSettings",L"AttackKey", 0xA2, L"config.ini");
const int KeyLoot = GetPrivateProfileInt(L"BotSettings",L"LootKey", 0x5A, L"config.ini");
//Counts
int CntAtk = GetPrivateProfileInt(L"BotSettings",L"PressAttack", 25, L"config.ini");
int CntLoot = GetPrivateProfileInt(L"BotSettings",L"PressLoot", 15, L"config.ini"); 
```

前面带有 const int 的值具有十六进制值，例如 0xA2 和 0x5A，它们只是虚拟键代码。我希望能够随时更改此密钥，这就是为什么我不只是在 sendkey 函数中使用它的任何人都知道如何让 GetPrivateProfileInt 读取十六进制值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:49:27.010

`GetPrivateProfileInt`不支持十六进制。如果你想支持十六进制，你必须自己调用`GetPrivateProfileString`和解析它。

# java - Java/SWT 显示来自字节数组的 8 位灰度图像

> ID：14645117
> 
> 赞同：2
> 
> 时间：2013-02-01T11:16:15.650
> 
> 标签：java, swt

我正在使用 Eclipse Window Builder Editor 构建一个 GUI。我用 Gridlayout 制作了一个 Composite，并在里面放了一个 Label。另一个类的一些方法会生成一个原始的 8 位 1280x1024 灰度图像，该图像保存在一个字节数组中。这就是我在 mainMethod 中生成 ImageData 等的方式：

```
Color white = display.getSystemColor(SWT.COLOR_WHITE);
Color black = display.getSystemColor(SWT.COLOR_BLACK);

PaletteData palette = new PaletteData( 255, 255, 255 );

imgData = new ImageData(1280, 1024, 8, palette);

imgLabel = new Label(composite_3, SWT.NONE);
imgLabel.setImage(null);
imgLabel.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1)); 
```

我仍然无法理解我应该对 PaletteData 做什么，因为无论如何我都不需要颜色。（颜色）深度应该是 8，因为我希望它有 255 个灰度值？

这是我的 setImg 方法，一旦 byte[] 充满数据，就会从另一个线程调用它：

```
public static void setImg(final byte[] b) {
    Display.getDefault().syncExec( new Runnable() {
        @Override
        public void run() {
            imgData.setPixels(0, 0, 1280, b, 0);
            img = new Image(Display.getCurrent(), imgData);
            Image grayImg = new Image(Display.getCurrent(), img, SWT.IMAGE_GRAY);
            imgLabel.setImage(img);

//              img.dispose();
        }
    });
} 
```

我试过了

```
imgLabel.setImage(img); 
```

和

```
imgLabel.setImage(grayImg); 
```

好的，第一行现在可以正确显示...看来我只能使用 imgData.setPixels(...) 设置 1 行像素，这在 imo 中是无用的，还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:54:04.033

您`PaletteData`将构造函数用于*直接*调色板。我猜你想要的是索引调色板的构造函数。另请参阅[此处](http://www.eclipse.org/articles/Article-SWT-images/graphics-resources.html#PaletteData)和[此处](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/PaletteData.html)以获取更多说明。

以下代码片段显示

*   如何使用索引调色板创建灰度调色板
*   如何将图像设置为一个整体（不是逐行）

    ```
    // pixel depth will be 8-bit, so there is space for 256 different (grey) values
    RGB[] rgb = new RGB[256];

    // build grey scale palette: 256 different grey values are generated. 
    for (int i = 0; i < 256; i++) {
        rgb[i] = new RGB(i, i, i);
    }

    // Construct a new indexed palette given an array of RGB values.
    PaletteData paletteData = new PaletteData(rgb);

    // create an image with given dimensions, depth and color palette
    ImageData imageData = new ImageData(1280, 1024, 8, paletteData);

    // data represents the pixels of the image. This corresponds to 'b' in Your code
    imageData.data = b;

    // note that there are also other 'Image', e.g. java.awt.Image
    org.eclipse.swt.graphics.Image image = new Image(Display.getCurrent(), imageData);

    // paint
    imgLabel.setImage(img);

    // release operating system resources corresponding to the image
    image.dispose(); 
    ```

**注意：**我尝试了一个使用 Your PaletteData 的示例，例如

```
 PaletteData palette = new PaletteData( 255, 255, 255 ); 
```

从某种意义上说，它显示了一些灰度图片（实际上是视频）。但是，给定代码片段中使用的*索引版本对眼睛更友好。*看看上面提供的第一个链接。它很好地解释了*索引*调色板和*直接*调色板之间的区别。

# google-maps-android-api-2 - Google maps API v2 Android，离线时不绘制多边形

> ID：14645118
> 
> 赞同：1
> 
> 时间：2013-02-01T11:16:18.513
> 
> 标签：google-maps-android-api-2, offline-caching

我有一个使用谷歌地图 API 绘制多边形的测试应用程序。

问题是，当我没有缓存任何地图（新安装的应用程序）时，多边形不会绘制。没有加载地图不是问题，但我确实需要在我的屏幕上绘制多边形。有没有办法我可以做到这一点？

对不起我的英语不好

这是我的代码：

```
package ngvl.testegmaps_v2;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Random;

import ngvl.testegmaps_v2.VO.GeoPosicionamento;
import ngvl.testegmaps_v2.VO.Layer;
import ngvl.testegmaps_v2.VO.Secao;
import ngvl.testegmaps_v2.VO.Talhao;
import android.graphics.Color;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Polygon;
import com.google.android.gms.maps.model.PolygonOptions;
import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;

public class MainActivity extends FragmentActivity {

    private List<Secao> secoes;
    private List<Polygon> poligonos = new ArrayList<Polygon>();

    private HashMap<String,Object[]>  informacoes  = new HashMap<String,Object[]>();

    private GoogleMap map;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        SupportMapFragment fragment = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map);

        map = fragment.getMap();

        map.getUiSettings().setRotateGesturesEnabled(false);

        // Setting a click event handler for the map

        LatLng latLng = new LatLng(-20.9957152, -47.3241304);
        // map.addMarker(new
        // MarkerOptions().position(latLng).icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)).title("Av. Paulista").snippet("São Paulo"));

        configuraPosicao(map, latLng);

        Button button = (Button)findViewById(R.id.button1);
        // Register the onClick listener with the implementation above
        button.setOnClickListener(mCorkyListener);

    }

    private void configuraPosicao(GoogleMap map, LatLng latLng) {

        /*
         * 3D map.moveCamera( CameraUpdateFactory.newLatLngZoom(latLng, 15));
         * map.animateCamera( CameraUpdateFactory.zoomTo(10), 2000, null);
         * 
         * CameraPosition cameraPosition = new CameraPosition.Builder()
         * .target(latLng) .zoom(17) .bearing(90) .tilt(45) .build();
         * 
         * map.animateCamera( CameraUpdateFactory.newCameraPosition(
         * cameraPosition));
         */
        map.setMapType(GoogleMap.MAP_TYPE_NONE);
        // map.animateCamera(CameraUpdateFactory.newLatLngZoom(latLng, 17.0f));
        map.moveCamera(CameraUpdateFactory.newLatLngZoom(latLng, 15));

        try {

            String json = readFileAsString("geo.json");

            Gson gson = new Gson();
            this.secoes = gson.fromJson(json, new TypeToken<List<Secao>>() {
            }.getType());
            json = null;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        escrevePoligons(map);

    }

    private String readFileAsString(String fileName) throws IOException {
        InputStream is = getAssets().open(fileName);
        if (is != null) {
            StringBuilder sb = new StringBuilder();
            String line;

            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "UTF-8"));
                while ((line = reader.readLine()) != null) {
                    sb.append(line).append("\n");
                }
            } finally {
                is.close();
            }
            return sb.toString();
        } else {
            return "";
        }
    }

    private void escrevePoligons(GoogleMap map) {

        float stroke = (float) 1.5;

        for (Secao secao : secoes) {
            for (Talhao talhao : secao.getTalhoes()) {
                for (Layer layer : talhao.getLayers()) {

                    // PolygonOptions rectOptions = new PolygonOptions();
                    List<LatLng> latlngs = new ArrayList<LatLng>();

                    for (GeoPosicionamento geoPosicionamento : layer.getGeoPosicionamentos()) {

                        latlngs.add(new LatLng(geoPosicionamento.getLatitude()
                                .setScale(7, BigDecimal.ROUND_HALF_EVEN)
                                .doubleValue(), geoPosicionamento
                                .getLongitude()
                                .setScale(7, BigDecimal.ROUND_HALF_EVEN)
                                .doubleValue()));
                    }

                    int color = 0x1F00FF00;
                    int color2 = 0x5F000000;

                    PolygonOptions polygonOptions = new PolygonOptions()
                                                        .fillColor(color).addAll(latlngs)
                                                        .strokeColor(color2).strokeWidth(stroke);

                    Polygon p = map.addPolygon(polygonOptions);

                    poligonos.add(p);

                    informacoes.put( p.getId(), new Object[]{ secao, talhao , layer } );

                    //System.out.println(polygonOptions.getPoints());

                    polygonOptions = null;
                    latlngs = null;
                }
            }
        }
        this.secoes = null;

        // String mUrl =
        // "https://khms0.google.com.br/kh/v=124&src=app&z={z}&x={x}&y={y}";
        // MyUrlTileProvider mTileProvider = new MyUrlTileProvider(256, 256,
        // mUrl);
        // mTileProvider.tilesRange();
        // map.addTileOverlay(new
        // TileOverlayOptions().tileProvider(mTileProvider).zIndex(-1f));

        //String mUrl = "http://a.tile.openstreetmap.org/{z}/{x}/{y}.png";
        //MyUrlTileProvider mTileProvider = new MyUrlTileProvider(256, 256, mUrl);
        //map.addTileOverlay(new TileOverlayOptions().tileProvider(mTileProvider).zIndex(-1f));

        map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(-20.9957152, -47.3241304), 14));

        // TileProvider tileProvider = TileProviderFactory.getTileProvider();
        // map.addTileOverlay(new
        // TileOverlayOptions().tileProvider(tileProvider));
        // map.moveCamera(CameraUpdateFactory.newLatLngZoom(new
        // LatLng(-20.9957152, -47.3241304), 15));

        map.setOnMapClickListener(new OnMapClickListener() 
        {
            public void onMapClick(LatLng point) 
            {
                Polygon p = isPointInPolygon(point);

                if( p != null){

                    p.setFillColor(getRandomColor());

                    Object[] clicado = informacoes.get( p.getId() );

                    Secao  secao_clicada  = (Secao)  clicado[0];
                    Talhao talhao_clicada = (Talhao) clicado[1];
                    Layer  layer_clicada  = (Layer)  clicado[2];

                    //System.out.println(secao_clicada);                    
                    //System.out.println(talhao_clicada);
                    //System.out.println(layer_clicada);
                    //System.out.println("=======================");

                    StringBuilder texto = new StringBuilder();
                    texto.append("Seção: " + secao_clicada.getDesc() + "\n");
                    texto.append("Talhão: " + talhao_clicada.getTalhao() + "\n");
                    texto.append("Variedade: " + talhao_clicada.getVariedade() + " - " + talhao_clicada.getDescVariedade() + "\n");
                    texto.append("Layer: " + layer_clicada.getSequencia() + "\n");

                    //Toast.makeText(MainActivity.this, texto , Toast.LENGTH_LONG).show();

                    addMarker(point,texto);

                }//else
                    //Toast.makeText(MainActivity.this,"Clicou fora da Área de um Poligono", Toast.LENGTH_LONG).show();
            }    
         });

    }

    public void addMarker(LatLng point, StringBuilder texto) {

        /*map.addMarker(new MarkerOptions().position(point).icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher))
                                         .title("Caracteristicas: ")
                                         .snippet( texto );
                                         */
        Toast.makeText(MainActivity.this, texto , Toast.LENGTH_LONG).show();

    }

    private Polygon isPointInPolygon(LatLng tap) {

        for( Polygon p  : poligonos){
            int intersectCount = 0;
            List<LatLng> vertices = p.getPoints();

            for(int j=0; j<vertices.size()-1; j++) {
                if( rayCastIntersect(tap, vertices.get(j), vertices.get(j+1)) ) {
                    intersectCount++;
                }
            }

            if(((intersectCount % 2) == 1)){
                return p;
            }

        }

        return  null;// odd = inside, even = outside;
    }

    private boolean rayCastIntersect(LatLng tap, LatLng vertA, LatLng vertB) {

         double aY = vertA.latitude;
            double bY = vertB.latitude;
            double aX = vertA.longitude;
            double bX = vertB.longitude;
            double pY = tap.latitude;
            double pX = tap.longitude;

            if ( (aY>pY && bY>pY) || (aY<pY && bY<pY) || (aX<pX && bX<pX) ) {
                return false; // a and b can't both be above or below pt.y, and a or b must be east of pt.x
            }

            double m = (aY-bY) / (aX-bX);               // Rise over run
            double bee = (-aX) * m + aY;                // y = mx + b
            double x = (pY - bee) / m;                  // algebra is neat!

            return x > pX;
    }

    private OnClickListener mCorkyListener = new OnClickListener() {
        public void onClick(View v) {
          // do something when the button is clicked

            map.moveCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(-20.9957152, -47.3241304), 14));

        }
    };

    public int getRandomColor() {
        int color;
        Random rnd = new Random();
        color = Color.argb(255, rnd.nextInt(256), rnd.nextInt(256),
                rnd.nextInt(256));
        return color;
    }

} 
```

像上面的例子一样将地图类型设置为 MAP_TYPE_NONE 并不能解决问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:57:41.323

我将使用[Maps Forge Open Source API](http://code.google.com/p/mapsforge/)标记为已解决 如果有人使用 Google Maps Api 请分享，我会更改答案。

我发现的答案是，如果不先渲染地图（在线或通过缓存），就不可能渲染或访问任何东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T11:56:01.023

这实际上是适用于 Android 的 GoogleMaps Api v2 的错误。

它在这里被引用： [https ://code.google.com/p/gmaps-api-issues/issues/detail?id=5017](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5017)

如果您想加速错误修复，请加注星标！

# visual-studio-2012 - 部署 lightswitch 桌面应用程序错误

> ID：14645128
> 
> 赞同：2
> 
> 时间：2013-02-01T11:17:25.313
> 
> 标签：visual-studio-2012, visual-studio-lightswitch, lightswitch-2012

我在部署我的 forst lightswitch 桌面应用程序时遇到了困难。当我尝试发布时，在摘要窗口中显示
数据库：不发布

install.htm 文件让我很困惑。

有人可以帮助我一步一步的教程。我会很感激。

我已经安装了 Microsoft SQL Server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:25:10.333

部署基于 LightSwitch 的应用程序的过程因您选择的应用程序类型和部署方案而异。您说过您的电灯开关应用程序是一个桌面应用程序。因此，可能的部署方案是：

1.  桌面客户端 2 层

2.  桌面客户端，3 层

这些链接将帮助您：

[部署 LightSwitch 应用程序](http://anonymouse.org/cgi-bin/anon-www.cgi/http://msdn.microsoft.com/en-us/library/vstudio/ff872288.aspx)

[如何：部署 2 层应用程序](http://anonymouse.org/cgi-bin/anon-www.cgi/http://msdn.microsoft.com/en-us/library/vstudio/ff852056.aspx)

[如何：部署 3 层应用程序](http://anonymouse.org/cgi-bin/anon-www.cgi/http://msdn.microsoft.com/en-us/library/vstudio/gg481778.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T13:43:50.000

您应该尝试从服务器进程 (vslshost.exe) 获取异常信息/堆栈跟踪，以获取有关检索或保存数据时错误的更多信息。如果您的应用在打开时尝试加载数据，请将其更改为没有默认屏幕。这将阻止应用程序在加载应用程序并尝试加载数据时打开屏幕，从而在打开应用程序后有足够的时间附加调试器。[您可以在http://blogs.msdn.com/b/mthalman/archive/2013/08/16/how-to-get-a-stack-trace-in-lightswitch.aspx](http://blogs.msdn.com/b/mthalman/archive/2013/08/16/how-to-get-a-stack-trace-in-lightswitch.aspx)关注我的博客文章，了解如何获取异常信息。

# python - Matplotlib x-labels 用于对数图

> ID：14645134
> 
> 赞同：0
> 
> 时间：2013-02-01T11:17:43.807
> 
> 标签：python, graph, matplotlib, axis-labels

我正在尝试在 matplotlib 中绘制一些数据以显示实验结果，如下所示：

```
xvalues = [2, 4, 8, 16, 32, 64, 128, 256]
yvalues = [400139397.517, 339303459.4277, 296846508.2103, 271801897.1163,
           295153640.7553, 323820220.6226, 372099806.9102, 466940449.0719] 
```

我希望将其绘制在对数刻度上以使其更易于可视化，因此编写了以下代码：

```
import matplotlib.pyplot as plt

def plot_energy(xvalues, yvalues):
    fig = plt.figure()
    ax = fig.add_subplot(1,1,1)

    ax.scatter(xvalues, yvalues)
    ax.plot(xvalues, yvalues)

    ax.set_xscale('log')

    ax.set_xticklabels(xvalues)

    ax.set_xlabel('RUU size')
    ax.set_title("Energy consumption")
    ax.set_ylabel('Energy per instruction (nJ)')
    plt.show() 
```

但是，正如您所见，我的 xlabels 并没有像我希望的那样出现，如下所示 ![Matplotlib 轴图](../Images/83de957f96b67cae76ce907373c3d79e.png)

如果我删除该行`ax.set_xticklabels(xvalues)`，那么我会得到以下结果，这也不是我想要的： ![Matplotlib 第二轴图](../Images/a597ada6f1bb8297f1f2cc5b730e9683.png)

对于在 x 轴上绘制正确值的帮助，我将不胜感激！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:24:04.787

您只是在更改刻度的标签，而不是刻度位置。如果您使用：

```
ax.set_xticks(xvalues) 
```

看起来像：

![在此处输入图像描述](../Images/e10daaf4fdd32646c6287a107243073d.png)

大多数时候，如果您想要完全不同的东西，例如类别标签，您只想设置（覆盖）标签。如果您想坚持轴上的实际单位，最好使用（如果需要）自定义格式化程序设置刻度位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:29:00.177

```
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker

def plot_energy(xvalues, yvalues):
    fig = plt.figure()
    ax = fig.add_subplot(1,1,1)

    ax.scatter(xvalues, yvalues)
    ax.semilogx(xvalues, yvalues, basex = 2)
    ax.xaxis.set_major_formatter(ticker.ScalarFormatter())
    ax.set_xlabel('RUU size')
    ax.set_title("Energy consumption")
    ax.set_ylabel('Energy per instruction (nJ)')
    plt.show()

xvalues = [2, 4, 8, 16, 32, 64, 128, 256]
yvalues = [400139397.517, 339303459.4277, 296846508.2103, 271801897.1163,
           295153640.7553, 323820220.6226, 372099806.9102, 466940449.0719]
plot_energy(xvalues, yvalues) 
```

产量

![在此处输入图像描述](../Images/0f8ec25950ad0a04e6a3a59edc16649b.png)

# perl - 在 perl 中对序列化数据结构使用解冻时出现问题

> ID：14645136
> 
> 赞同：4
> 
> 时间：2013-02-01T11:17:52.390
> 
> 标签：perl, perl-data-structures, storable

我正在使用 perl DB_File 模块将哈希变量保存到文件中。

我的散列变量包含作为普通字符串的键和作为另一个散列变量的值。

我曾经`Storable::freeze(\%value);`序列化哈希值。

但是当我试图检索这些值时，我得到了一个错误。当我第一次运行检索代码时，它可以工作。接下来的连续几次，它失败了。

我使用了这样的方法：

```
tie(%HASH, "DB_File", "dbfile", O_RDWR, 0444); 
foreach $key (%HASH)
{
    $hashRef = Storable::thaw($HASH{$key};  --> here it fails with the error 
} 
```

## 错误信息

> 可存储二进制映像 v25.47 比我 (v2.7) 更新，位于 ../../lib/Storable.pm（自动拆分为 ../../lib/auto/Storable/thaw.al）第 366 行，在 ../../lib/Storable.pm 的retrieve.pl 第 15 行（自动拆分为 ../../lib/auto/Storable/logcroak.al） 第 74 行 Storable::logcroak('') 调用于 . ./../lib/Storable.pm (autosplit into ../../lib/auto/Storable/thaw.al) 第 367 行 Storable::thaw('2/8') 在 retrieve.pl 第 15 行调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T08:23:58.447

看看错误：

```
.... Storable::thaw('2/8') called .... 
```

您尝试解冻的值是哈希的标量结果。

我假设`$HASH{$key}`在

```
$hashRef = Storable::thaw($HASH{$key}); 
```

包含一个哈希（可能是冻结的对象）。

尝试添加

```
use Data::Dumper;
print 'content : '.Dumper $HASH{$key}; 
```

在尝试解冻值之前，先查看其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:28:32.310

```
Storable::thaw($HASH{$key}; 
```

你忘记关闭 ()

```
Storable::thaw($HASH{$key}); 
```

你确定你需要解冻所有的钥匙吗？我认为您的字段很少，并非所有字段都必须是可存储的。

# javascript - 防止触角（JS游戏）

> ID：14645138
> 
> 赞同：2
> 
> 时间：2013-02-01T11:17:56.917
> 
> 标签：javascript

如何防止此地图生成器创建这样的接触角：

```
-X
X- 
```

或者

```
X-
-X 
```

这是生成器的简化示例：http: [//jsfiddle.net/fDv9C/2/](http://jsfiddle.net/fDv9C/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T21:59:41.857

由于您创建板的方式，在生成期间进行此检查非常困难。我创建了检查板之后的简单功能。它使用洪水算法。这里是小提琴[http://jsfiddle.net/jzTEX/8/](http://jsfiddle.net/jzTEX/8/)（蓝色背景是原图，红色背景是检查后的地图）

基本上我们创建第二个数组`grid2`。填充后`grid`我们递归运行`floodV`函数

```
function floodV(x,y) {
    var shiftArray = [[0,1],[0,-1],[1,0],[-1,0]];
    grid2[y][x]=1;
    for(var k=0;k<4;k++) {
        var x1=x+shiftArray[k][0];
        var y1=y+shiftArray[k][1];
        if(grid[y1][x1] == 1 && grid2[y1][x1] == 0 && checkV(x1,y1)) {
            grid2[y1][x1] = 1;
            floodV(x1,y1);
        }
    }
} 
```

带有检查功能

```
function checkV(x,y) {
    var checkVarr = [[-1,-1], [-1,1], [1,1], [1,-1]];
    for(var k=0;k<4;k++) {
        if(grid[y+checkVarr[k][0]][x+checkVarr[k][1]] == 1 && grid[y+checkVarr[k][0]][x] == 0 && grid[y][x+checkVarr[k][1]] == 0 && grid2[y+checkVarr[k][0]][x+checkVarr[k][1]] == 1) 
            return false;
    }
    return true;
} 
```

这并不完美，因为我们有时会丢弃地图的大部分，但如果我们尝试开始添加新元素，我们必须再次检查整个地图（在值得的情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:55:54.887

您的问题几乎可以自行回答。

这是小提琴：http: [//jsfiddle.net/qBJVY/](http://jsfiddle.net/qBJVY/)

```
if (!!grid[y][x] && !!grid[y+1][x+1] && !grid[y+1][x] && !grid[y][x+1]) {
    good=false;
    grid[y+1][x]=2;
} 
```

它只是检查您不想要的组合并修补它们。它总是添加一个网格点，以免断开地图的任何部分。

这反过来可能会导致可能出现问题的另一种情况，但如果它改变了任何东西（即，如果它发现问题），它将再次检查。这可以进行优化，例如通过递归调整任何更改的内容，但通常只需要 1 或 2 遍。那里有一个限制器，不允许超过 100 次通过，以防万一出现无法修复的不可预见的情况（不过，我想不出这种情况 :)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:36:32.407

这就是我所做的：http: [//jsfiddle.net/fDv9C/13/](http://jsfiddle.net/fDv9C/13/)

魔法发生在哪里？向下滚动到第 53 到 58 行：

```
var bottom = y_next + 1;
var left = x_next - 1;
var right = x_next + 1;
var top = y_next - 1;

if (grid[top][left] || grid[top][right] ||
    grid[bottom][left] || grid[bottom][right]) continue; 
```

简而言之，您的接触角点只能出现在计算出的下一个位置。因此，如果下一个位置的四个角落邻居中的任何一个存在，则必须计算另一个下一个位置。

`i`当碰巧获得尽可能多的路径时，您甚至可以减少计数器（尽管它并没有真正产生很大的不同）：

```
var bottom = y_next + 1;
var left = x_next - 1;
var right = x_next + 1;
var top = y_next - 1;

if (grid[top][left] || grid[top][right] ||
    grid[bottom][left] || grid[bottom][right]) {
    i--;
    continue;
} 
```

在此处查看演示：http: [//jsfiddle.net/fDv9C/12/](http://jsfiddle.net/fDv9C/12/)

**编辑：**我无法抗拒。我必须创建一个自动地图生成器，这样我就不需要一直点击运行：http: [//jsfiddle.net/fDv9C/14/](http://jsfiddle.net/fDv9C/14/)

# installation - WiX 将引导 x86 和 x64 msi 刻录到单个 No-UI 引导程序中

> ID：14645142
> 
> 赞同：10
> 
> 时间：2013-02-01T11:18:09.237
> 
> 标签：installation, wix, 32bit-64bit, bootstrapper, burn

我有我的安装程序 .msi 的 x64 和 x86 版本，并且**想要发布一个可执行文件，它只检查机器架构并运行 x86/x64 MSI**。MSI 基本相同，它们安装相同的 AnyCPU 文件，我将这些文件捆绑在一个共享的 .cab 文件中，以免安装程序的大小加倍。

到目前为止，我已经尝试过 WiX Burn，它会弹出一个我不想要的 GUI（我只想使用 MSI GUI），我尝试通过 /silent 标志禁用刻录 GUI - 这会将这个标志传播到 MSI所以它禁用了 MSI 的所有 GUI（不是我想要的）。

**当我说没有默认的 No-GUI 版本的 Burn bootstrapper**时，我认为我是正确的，并且要创建一个，您必须自己编辑源代码？这听起来像是一个巨大的缺失功能？

我还尝试过 DotNetInstaller，它有自己的一系列问题，用户界面令人困惑。我也尝试过 setupbld，它不支持带有外部 cab 的 MSI。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-15T14:51:32.300

对于体系结构检测，您可以使用 MsiPackage 元素中的 InstallCondition 属性。

简单地说，试试：

```
<MsiPackage SourceFile="..\Example\bin\Release\x86\example.msi" Compressed="no" InstallCondition="NOT VersionNT64" />
<MsiPackage SourceFile="..\Example\bin\Release\x64\example.msi" Compressed="no" InstallCondition="VersionNT64" /> 
```

资料来源： [http ://wix.sourceforge.net/manual-wix3/wix_xsd_msipackage.htm](http://wix.sourceforge.net/manual-wix3/wix_xsd_msipackage.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T12:02:23.803

正如其他答案所建议的那样，您可以使用 VERSIONNT64 变量来检查您正在安装的平台。

Wix Burn 通过传递命令行参数“-q”来支持 NO-GUI 或安静模式。

除此之外，它还支持以下其他论点：

wixstdba 仅支持“标准包开关”：

```
-q, -quiet, -s, -silent = silent install 
-passive = progress bar only install 
-norestart = suppress any restarts 
-forcerestart = restart no matter what (I don't know why this is still around) 
-promptrestart = prompt if a restart is required (default) 
-layout = create a local image of the bootstrapper (i.e. download files so they can be burned to DVD) 
-l, -log = log to a specific file (default is controled by bundle developer) 
-uninstall = uninstall 
-repair = repair (or install if not installed) 
-package,-update = install (default if no -uninstall or -repair) 
```

输入你的 wixburnexename /? 获取您机器上的详细信息。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-26T03:42:45.423

您可以使用自定义操作和[刻录内置变量](http://wix.sourceforge.net/manual-wix3/bundle_built_in_variables.htm)来检查您是在 X86 还是 x64 上运行。基于此，您可以执行/安排操作列表。

```
<InstallExecuteSequence>
   <Custom Action="Windows32bitInstall" After="InstallFiles">NOT VersionNT64</Custom>
   <Custom Action ="Windows64bitInstall" After="InstallFiles" >VersionNT64</Custom>
   <Custom Action="InstallHelp" After="Windows64bitInstall">NOT Installed</Custom>
</InstallExecuteSequence> 
```

这将以相同的高度执行。

```
<CustomAction Id="InstallHelp" Directory="ProgramFilesFolder"
          Execute="deferred" Impersonate="no" Return="ignore"
          ExeCommand="[HELPDIR]\help.exe /log" /> 
```

# dart - 构造函数中的语法错误

> ID：14645144
> 
> 赞同：0
> 
> 时间：2013-02-01T11:18:14.633
> 
> 标签：dart

以下代码

```
class MemberException extends ServerException {
  String message;
  MemberException(message) {
    super(message);
  }
}

class ServerException implements Exception {
  String message;
  ServerException(this.message);
} 
```

产生以下（有点无用）错误消息

```
Too few arguments in implicit super() constructor invocation in '(String) -> dynamic' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:29:27.413

正确的格式是：

```
class MemberException extends ServerException {
  String message;
  MemberException(message) : super(message) {
    // constructor body
  }
} 
```

您需要在调用构造函数主体之前初始化 super 。参考：[http](http://www.dartlang.org/docs/dart-up-and-running/contents/ch02.html#ch02-constructors) ://www.dartlang.org/docs/dart-up-and-running/contents/ch02.html#ch02-constructors （见初始化部分）

# objective-c - 在 OS X 10.8 中内置关于应用程序对话框

> ID：14645157
> 
> 赞同：1
> 
> 时间：2013-02-01T11:19:08.303
> 
> 标签：objective-c, macos

有没有办法我可以快速为我的 OS X 应用程序设置一个关于窗口，而无需创建一个窗口并从头开始向其中添加元素？类似于 HIAboutBox 但也适用于 OS X 10.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:28:24.943

Cocoa 内置支持显示标准的 about box，从任何 Xcode 模板创建的项目都将把它连接到应用程序菜单中的“About MyApplication”菜单项。它通过调用`-[NSApplication orderFrontStandardAboutPanel:]`. 它会自动从您的应用程序包中提取基本信息（图标、名称、版本、内部版本号、版权声明）。它还支持通过在应用程序包中查找名为 Credits.html / Credits.rtf / Credits.rtfd 的文件来显示额外信息。

# iphone - 裁剪后图像被拉伸和模糊

> ID：14645158
> 
> 赞同：0
> 
> 时间：2013-02-01T11:19:09.440
> 
> 标签：iphone, ios, ipad

![在此处输入图像描述](../Images/23b8ad338dac9ecdedd808133e02a10e.png)

我有 UIImageView 并且 UIImageView 上有另一个画布视图。我想根据画布视图的框架剪切 UIImageView 的图像。但是在裁剪后，图像会在裁剪后被拉伸和模糊。以下是我的代码。

```
[UIImage *images = [self captureScreenInRect1:canvas.frame];
    self.imgViewCurrent.contentMode = UIViewContentModeScaleToFill;
     self.imgViewCurrent.image = images;

    - (UIImage *)captureScreenInRect1:(CGRect)captureFrame {
        CALayer *layer;
        layer = self.view.layer;enter image description here
        UIGraphicsBeginImageContextWithOptions(self.view.bounds.size, NO, 1.0);
        CGContextClipToRect (UIGraphicsGetCurrentContext(),captureFrame);
        [layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        CGImageRef imageRef = CGImageCreateWithImageInRect([screenImage CGImage], captureFrame);

        UIImage *img = [UIImage imageWithCGImage:imageRef scale:0.0 orientation:UIImageOrientationUp];
        CGImageRelease(imageRef);
        return img;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:27:39.500

裁剪图像后，您可以使用自定义大小调整图像大小。它可能会帮助你。

```
-(UIImage*) resizedImage:(UIImage *)inImage: (CGRect) thumbRect
{
CGImageRef          imageRef = [inImage CGImage];
CGImageAlphaInfo    alphaInfo = CGImageGetAlphaInfo(imageRef);

// There's a wierdness with kCGImageAlphaNone and CGBitmapContextCreate
// see Supported Pixel Formats in the Quartz 2D Programming Guide
// Creating a Bitmap Graphics Context section
// only RGB 8 bit images with alpha of kCGImageAlphaNoneSkipFirst, kCGImageAlphaNoneSkipLast, kCGImageAlphaPremultipliedFirst,
// and kCGImageAlphaPremultipliedLast, with a few other oddball image kinds are supported
// The images on input here are likely to be png or jpeg files
if (alphaInfo == kCGImageAlphaNone)
    alphaInfo = kCGImageAlphaNoneSkipLast;

// Build a bitmap context that's the size of the thumbRect
CGContextRef bitmap = CGBitmapContextCreate(
                                            NULL,
                                            thumbRect.size.width,       // width
                                            thumbRect.size.height,      // height
                                            CGImageGetBitsPerComponent(imageRef),   // really needs to always be 8
                                            4 * thumbRect.size.width,   // rowbytes
                                            CGImageGetColorSpace(imageRef),
                                            alphaInfo
                                            );

// Draw into the context, this scales the image
CGContextDrawImage(bitmap, thumbRect, imageRef);

// Get an image from the context and a UIImage
CGImageRef  ref = CGBitmapContextCreateImage(bitmap);
UIImage*    result = [UIImage imageWithCGImage:ref];

CGContextRelease(bitmap);   // ok if NULL
CGImageRelease(ref);

return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:22:58.797

更改此行

```
self.imgViewCurrent.contentMode = UIViewContentModeScaleToFill; 
```

到这条线

```
 self.imgViewCurrent.contentMode = UIViewContentModeScaleAspectFit 
```

`UIViewContentModeScaleToFill`基本上会拉伸图像。

# vb.net - 将 NSubstitute 与 vb.net 模块一起使用

> ID：14645160
> 
> 赞同：1
> 
> 时间：2013-02-01T11:19:13.743
> 
> 标签：vb.net, nsubstitute

我们有一些现有的静态方法，它们分组在 VB 模块中。

我想向公司介绍单元测试，并且正在研究使用 NUnit 和 NSubstitute。

我似乎无法为我想要测试的 VB 模块创建一个替代品，或者找到任何如何做到这一点的示例。我正在尝试做类似的事情：

```
Dim Sub = Substitute.For(MyModule)() 
```

但 VB 告诉我“MyModule 是一种类型，不能用作表达式”。

如果我尝试

```
Dim Sub = Substitute.For(Of MyModule)() 
```

VB 告诉我'Module 'MyModule' 不能用作类型'。

我的语法错误还是我想做一些愚蠢的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T22:25:19.357

使用模拟框架对模块和共享方法（C# 中的静态类和方法）进行单元测试是不合适的，因为：

*   模块（C# 中的静态类）不能：
    *   从基类继承
    *   实现接口
    *   因此，被嘲笑
*   无法调用模拟实例中的共享方法（C# 中的静态方法）

因此，要使用共享方法对模块或类进行单元测试，您需要直接进行。示例：（单元测试属性省略...）

```
Public Class A
    Public Shared Function Go(a As Integer) As Integer
        Return a + 10
    End Function
End Class

Public Class TestClass
    Public Sub Test()
        Assert.AreEqual(A.Go(5), 15)
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T10:16:01.667

确保您在接口中发送，并且我不会使用变量名作为 Sub，因为它是保留类型。

示例 Dim fakeWebRequestService = Substitute.For(Of IWebRequestService)()

# android - Android Visualizer Wtat 是 captureSize？

> ID：14645163
> 
> 赞同：0
> 
> 时间：2013-02-01T11:19:29.610
> 
> 标签：android

我无法理解 1 件事：

我用方法设置了捕获大小，`setCaptureSize(1024)`或者无论如何`setCaptureSize(1)` 我得到了长度为 1024 的字节数组。`getFfft`

这是`captureSize`吗？我无法理解如何使用它，仅此而已，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:24:01.533

[setCaptureSize](http://developer.android.com/reference/android/media/audiofx/Visualizer.html#setCaptureSize%28int%29)表示监听器返回的字节数组的长度。捕获大小必须是 2 的幂，它表示音频捕获的“粒度”。

# arrays - 匹配三个排序列表的算法

> ID：14645167
> 
> 赞同：2
> 
> 时间：2013-02-01T11:19:43.760
> 
> 标签：arrays, algorithm, list, match

所以我已经尝试解决这个问题几个小时了，但显然仍然缺少一些东西。也许我想错了，但我认为这是一个非常复杂的问题：

我有三个列表，其中的项目按固定顺序排列。为了解释问题，假设它们包含项目 A 到 Z - 大部分顺序相同，但有一些例外，项目可以位于不同的位置。此外，只有一个列表包含所有项目 - 另一个包含一个子集并且缺少某些项目。由于此问题的解决方案就足够了，因此可能没有包含所有项目的列表，而只有部分重叠的集合。更好的是解决多个（> 3）列表问题的算法。

所以这里是例子：

```
List 1: A B C D E F G H I J
List 2: A C D B F G
List 3: B C D E H F G 
```

现在我想要匹配这三个列表，以可视化排序顺序不同的地方以及缺少的项目在哪里。所以结果应该是：

```
List 1: A B C D   E   F G H I J
List 2: A   C D B     F G
List 3:   B C D   E H F G 
```

所以我立即看到，列表 2 的 B 位置错误，列表 3 中缺少 A，而列表 3 中的 H 位置也错误。

我正在考虑将结果存储在 CSV 中以导入 Excel。所以这些行是：

```
A,A,
B,,B
C,C,C
... 
```

现在我的问题是：如何匹配列表以生成 CSV 输出？我使用的语言是 Java。到目前为止，我未能解决除参考列表之外的列表包含较早项目的问题，这些项目稍后出现在参考列表中。

顺便说一下，这是一个现实世界的问题。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:44:42.483

有现成的工具可以解决这个问题，例如 Unix 工具`diff3`。除非您愿意投入大量时间开发启发式算法，否则不建议尝试解决任意数量的列表，因为您正在处理[最长公共子序列问题](https://en.wikipedia.org/wiki/Longest_common_subsequence_problem)的 NP-hard 一般情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:48:21.410

如果我正确理解了您的问题，那么您实际上是在尝试解决[多序列比对问题](http://en.wikipedia.org/wiki/Multiple_sequence_alignment)，这是生物信息学中经过充分研究的主题。有几种算法，其中一些基于[Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance)的概念（这将解决你的问题的两个数组版本） - 我建议你从那里开始。

# wpf - WPF，如何在相同元素值的触发器中将值设置为绑定

> ID：14645171
> 
> 赞同：0
> 
> 时间：2013-02-01T11:20:12.303
> 
> 标签：wpf

如何将 Image 的值绑定到 Image2 的值？

```
<Style x:Key="ImageButton" TargetType="c:ImageButton">
       <Setter Property="Image" Value="/*My image 1*/" />
       <Setter Property="Image2" Value="/*My image 2*/" />
       <Setter Property="Template">
          <Setter.Value>
             <ControlTemplate TargetType="c:ImageButton">
                   <StackPanel Orientation="Horizontal" Height="30" Width="30">
                       <Image Width="30" Height="30" Source="{TemplateBinding Image}" />
                    </StackPanel>
             </ControlTemplate>
          </Setter.Value>
       </Setter>
        <Style.Triggers>
           <Trigger Property="IsMouseOver" Value="True">
               <Setter Property="Image" Value="{Binding to Property Image2 value}" /> // How bind value to Image2
           </Trigger>
       </Style.Triggers>

</Style> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T15:29:25.573

由于`Image2`是你的一个属性`ImageButton`，你可以简单地将你的绑定源设置为`ImageButton`控件`RelativeSource Self`，并绑定到该`Image2`属性

```
<Setter Property="Image" 
        Value="{Binding Image2, RelativeSource={RelativeSource Self}}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:27:37.407

您可以尝试`Image1`使用以下方式访问`ElementName`：

```
{Binding ElementName=Image1, Path=DataContext} 
```

确保您定义`Image1`为

```
<Image Name="Image1" Width="30" Height="30" Source="{TemplateBinding Image}" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T11:44:56.630

我不确定它是否适用于您的情况，但您可以尝试以下代码：

```
<Style x:Key="ImageButton" TargetType="c:ImageButton">
    <Setter Property="Image" Value="/*My image 1*/" />
    <Setter Property="Image2" Value="/*My image 2*/" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="c:ImageButton">
                <StackPanel Orientation="Horizontal" Height="30" Width="30">
                    <Image x:Name="MyImage" Width="30" Height="30" Source="{TemplateBinding Image}" />
                </StackPanel>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="MyImage" Property="Source" Value="{TemplateBinding Image2}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>                
        </Setter.Value>
    </Setter>
</Style> 
```

# gwt - CellTree 以编程方式“显示更多”

> ID：14645172
> 
> 赞同：0
> 
> 时间：2013-02-01T11:20:14.963
> 
> 标签：gwt, pager

有谁知道如何以编程方式触发 GWT CellTree 的“显示更多”功能，而无需单击“显示更多”按钮？

我的目标是实现一种寻呼机，当用户向下滚动 ScollPanel 时，它会增加显示的元素数量，因此它类似于：

```
//inside pager class

onScroll(ScrollEvent)
{

    //here I would call CellTree's show more

} 
```

我一直在查看 CellTree 和 CellTreeNodeView 类的代码，但找不到明确的方法。

我知道 CellTreeNodeView 类有一个 showMore 函数，它是执行此操作的函数，但我不知道如何从另一个类中调用它。我需要一个 CellTreeNodeView 对象，但不知道如何获取它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:04:49.300

它是包保护类 CellTreeNodeView 中的包保护方法，即只有 com.google.gwt.user.cellview.client 中的代码可以调用它。

```
 void showMore() 
```

## 非常hacky的解决方案

1）解决它的唯一方法是。将 CellTreeNodeView 和 CellTree 复制到您的代码库中（维护包）

2) 将**访问器**更改为 public 以允许您根据需要调用 showMore。

3) 确保您测试所有可能的流程。

4) 确保代码库中复制的类出现在 GWT Compiler 比 gwt-user jar 更高的类路径层次结构中，从而确保拾取修改后的类而不是原始类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:48:27.863

最后，我让它完全按照我的意愿工作，而无需从受保护的原始 GWT 中复制代码。

重点是触发与“显示更多”按钮相同的事件，所以我创建了一个假的 onMouseDown 事件，并以显示更多按钮作为目标来触发它：

```
final ScrollPanel sp = new ScrollPanel();

sp.addScrollHandler(new ScrollHandler() {

  @Override
  public void onScroll(ScrollEvent event)
  {
    int maxScrollBottom = sp.getWidget().getOffsetHeight()
        - sp.getOffsetHeight();

    if (sp.getVerticalScrollPosition() >= maxScrollBottom) {
      NativeEvent clickEvent = Document.get().createMouseDownEvent(0,0,0,0,0,false,false,false,false,0);
      Element target = (Element) cellTree.getCellTree().getElement().getLastChild().getFirstChild().getLastChild();
      target.dispatchEvent(clickEvent);
    }
  }
}); 
```

无论如何，非常感谢！:D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-06T15:27:48.753

我的解决方法是这个：

```
public static void makeShowMoreVisible(Element element, boolean isVisible) {
    ArrayList<Element> result = new ArrayList<Element>();
    findShowMore(result, element);  

    for (Element elt : result) {
        if (isVisible) {
            element.getStyle().clearDisplay();
        } else {  
            element.getStyle().setDisplay(Display.NONE); 
        }
    }
}

private static void findShowMore(ArrayList res, Element element) {
    String c;

    if (element == null) {
        return;
    }

    if (element.getInnerText().equals("Show more")) {
        res.add(element);
    }

    for (int i = 0; i < DOM.getChildCount(element); i++) {
        Element child = DOM.getChild(element, i);
        findShowMore(res, child);   
    }
} 
```

# maven - 订购 Maven 版本插件以仅使用特定的存储库

> ID：14645176
> 
> 赞同：1
> 
> 时间：2013-02-01T11:20:33.590
> 
> 标签：maven, versioning, nexus

也许这太细化了，但我想命令[Maven 版本插件](http://mojo.codehaus.org/versions-maven-plugin/ "Maven 版本插件")仅使用特定的存储库来检查（新版本）。这样做的原因是：我希望插件仅检查公司内部依赖项（来自本地 Nexus），我们没有理由检查外部存储库。（需要一些时间，这在某种程度上也是一个安全问题）。我在父（“配置”）POM 中有以下设置：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>versions-maven-plugin</artifactId>
    <version>2.0</version>
    <configuration>
        <includes>
            <include>com.mycompany.*:*</include>
        </includes>
        <serverId>automation-nexus</serverId>
    </configuration>
</plugin> 
```

上面的配置在不更新“外部”依赖项方面工作正常，但仍然从所有其他存储库中查询“com.mycompany”工件。如您所见，我尝试使用`<serverId>`，但这只是一个猜测，它似乎没有做任何“过滤”（我想这只是使用特定凭据的一种方式）

如果这可行与否，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:24:03.690

您必须更改您的 settings.xml 而不是这样的版本插件配置：

```
<settings>
  <mirrors>
    <mirror>
      <!--This sends everything else to /public -->
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://localhost:8081/nexus/content/groups/public</url>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>nexus</id>
      <!--Enable snapshots for the built in central repo to direct -->
      <!--all requests to nexus via the mirror -->
      <repositories>
        <repository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
     <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  <activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
</settings> 
```

通过使用上述设置，您将限制对上述组的访问，此外，您可以在存储库组中搜索，而不是在任何外部存储库中进行搜索。

# php - 使用 json-data POST 在 https 上自动登录

> ID：14645180
> 
> 赞同：1
> 
> 时间：2013-02-01T11:20:48.517
> 
> 标签：php, json, forms, post, login

> **可能重复：**
> [使用 jQuery 将表单数据转换为 JS 对象](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)

我需要让我的用户登录到外部网站，但是有一个问题，这个网站只处理 json-data POST 值，例如。{“用户名”：“用户”，“密码”：“12345”}

```
<form action="https://external.com/login" method="POST">
<input name="username" value="user" />
<input name="password" value="12345" />
<input type="submit" />
</form> 
```

以上仅发送平均 key=value 数据，我如何使用 POST json-data 到外部 https？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:48:58.037

这是一个简单的jquery示例，使用[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)

HTML：

```
<form action="https://external.com/login" method="POST" onsubmit="return postJson(this)">
<input name="username" value="user" />
<input name="password" value="12345" />
<input type="submit" />
</form> 
```

JQ:

```
function postJson(form) {
    var action = $(form).attr('action');
    var user = $('[name="username"]', form).val();
    var pass = $('[name="password"]', form).val();

    console.log('action=' + action + ', user=' + user + ', pass=' + pass);

    $.ajax({
        url: action,
        type: 'POST',
        data: JSON.stringify({ username: user, password: pass }),
        success: function(data, status) {
            // do something after login
            console.log('success');
        },
        error: function() {
            console.log('error');
        }
    });

    return false;
} 
```

[JSFiddle](http://jsfiddle.net/cNhBs/1/)

# java - 如何使用 Tracer 在骆驼中记录流的主体？

> ID：14645181
> 
> 赞同：3
> 
> 时间：2013-02-01T11:20:52.103
> 
> 标签：java, apache-camel

我知道如何让 Apache Camel (2.10.3) 使用 Log 组件记录流的主体（soap 消息）。但是，我想使用 Tracer 而不是 Log。

[文档](http://camel.apache.org/tracer.html)说要启用LOG_DEBUG_BODY_STREAMS属性，我这样做了，但这似乎没有什么区别：

```
 <bean id="camelTracer" class="org.apache.camel.processor.interceptor.Tracer">
    <property name="traceOutExchanges" value="true"/>
    <property name="traceExceptions" value="true"/>
    <property name="logStackTrace" value="true"/>
    <property name="traceInterceptors" value="true"/>
    <property name="logLevel" value="TRACE"/>
    <property name="logName" value="xxx.cameltracer"/>
</bean>     

<bean id="traceFormatter" class="org.apache.camel.processor.interceptor.DefaultTraceFormatter">
    <property name="showBody" value="true"/>
    <property name="showOutBody" value="true"/>
    <property name="showBodyType" value="false"/>
    <property name="showBreadCrumb" value="true"/>
    <property name="showHeaders" value="false"/>
</bean> 

<camelContext id="camelContext" xmlns="http://camel.apache.org/schema/spring" streamCache="true" trace="true">
    <properties>
       <property key="CamelLogDebugBodyStreams" value="true"/>
    </properties>
    ... 
```

还有什么我需要配置的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:34:30.073

您的财产中有一个类型-o，它应该是：

```
<camelContext id="camelContext" xmlns="http://camel.apache.org/schema/spring" streamCache="true" trace="true">
    <properties>
       <property key="CamelLogDebugStreams" value="true"/>
    </properties> 
```

# android - 支持和反对 Android SQLite 使用的论据

> ID：14645183
> 
> 赞同：1
> 
> 时间：2013-02-01T11:20:53.897
> 
> 标签：android, database, sqlite, architecture, software-design

我不确定我是否应该在我的 Android 程序中使用 Android SQLite 数据库。

该程序有几个表，我有查询、更新和显示这些表的操作。但是数据总量不是很大（可能最多几十行）。

有人告诉我，我不应该再使用数据库了，因为将所有内容存储到平面文件中更容易实现，完成的实现更易于维护，并且数据库引擎可以替换为存储预加载的平面文件的集合框架。这些人在决策中有一定的权重，所以如果我仍然想使用数据库，我需要论证。

何时应该使用 Android SQLite 数据库以及何时不应该使用，是否有可能获得争论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:29:52.060

[`ContentProvider`](http://developer.android.com/reference/android/content/ContentProvider.html)从用于持久化数据的实际技术中抽象出来的概念。它允许您很好地分离数据源的实现和该数据的可视化。在这方面，我不认为*易于实施*是支持或反对 SQLite 的一个很好的论据。如果你使用`Cursors`，你可能还是会使用 a `ContentProvider`。

如果您执行大量（复杂）查询，则查询性能可能是支持 SQLite 的一个论据，因为这是构建的。此外，调试 SQL 数据库似乎比调试平面文件容易得多。

# php - 排序数组：降序排列返回 1

> ID：14645184
> 
> 赞同：1
> 
> 时间：2013-02-01T11:21:00.523
> 
> 标签：php, arrays

我有一个数组，当我运行时，`print_r($array)`我得到：

```
Array
(
    [XS] => 110
    [S] => 171
    [M] => 172
    [L] => 171
    [XL] => 171
    [2X] => 172
    [3X] => 154
    [4X] => 139
    [5X] => 47
    [6X] => 32
    [OSFA] => 12
    [FITTED S-M] => 12
    [FITTED L-XL] => 12
    [ADJ] => 52
    [YXS] => 15
    [YSM] => 20
    [YMD] => 20
    [YLG] => 20
    [YXL] => 17
    [TLG] => 1
    [TXL] => 1
    [T2X] => 1
    [T3X] => 3
    [S-M FLEX] => 3
    [M-L FLEX] => 3
    [L-XL FLEX] => 3
    [CHILD STRETCH] => 1
    [S/M] => 1
 ) 
```

我想对其进行降序排序，但`arsort`返回 1。我可以使用 for 循环对其进行排序，但我想要最好的解决方案。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:26:28.393

使用`arsort($icon,SORT_NUMERIC)`；您可以将数据排序为数字将您的数据放在 $icon

# android - Android - 获取所有可用存储的列表

> ID：14645189
> 
> 赞同：2
> 
> 时间：2013-02-01T11:21:13.920
> 
> 标签：android, storage

我正在从互联网将数据下载到我的应用程序中。如果我指定内部存储器（=Environment.getExternalStorageDirectory()），我可能会遇到“空间不足”的问题。SD卡安装地址总是因手机而异，所以我想让用户选择他喜欢的位置，在哪里存储下载的数据。有什么方法，如何获得所有可用的存储选项，哪些可以使用？（通常，我想在内部存储器或插入 sdcard 之间进行选择）。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T11:22:55.520

请检查以下代码。

**计算可用的内部存储器**

```
StatFs stat = new StatFs(Environment.getDataDirectory().getPath());
long bytesAvailable = (long)stat.getFreeBlocks() * (long)stat.getBlockSize();
long megAvailable = bytesAvailable / 1048576; 
```

**计算总内部存储内存**

```
StatFs stat = new StatFs(Environment.getDataDirectory().getPath());
long bytesAvailable = (long)stat.getBlockSize() *(long)stat.getBlockCount();
long megAvailable = bytesAvailable / 1048576; 
```

**计算可用的外部存储内存**

```
StatFs stat = new StatFs(Environment.getExternalStorageDirectory().getPath());
long bytesAvailable = (long)stat.getFreeBlocks() * (long)stat.getBlockSize();
long megAvailable = bytesAvailable / 1048576; 
```

**计算外部存储总内存**

```
StatFs stat = new StatFs(Environment.getExternalStorageDirectory().getPath());
long bytesAvailable = (long)stat.getBlockSize() *(long)stat.getBlockCount();
long megAvailable = bytesAvailable / 1048576; 
```

**注意：**首先您需要计算可用的内存并向用户显示他/她想要下载文件的位置。

# java - java - 复制到Java中的JEditorPane时如何保持字体不变？

> ID：14645190
> 
> 赞同：0
> 
> 时间：2013-02-01T11:21:20.013
> 
> 标签：java, swing, jeditorpane

我有一个`JEditorPane`从其他应用程序（例如 Adob​​e Pagemaker、Corel Draw 等）复制一些文本的地方。我想保持我的字体不变。我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:03:07.583

> 我想要一个`JEditorPane`不同的字体。

[*如何使用编辑器窗格和文本窗格*](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)中的示例可能会在这方面为您提供指导。特别地，[`TextComponentDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html#eg)说明了以编程方式和交互方式改变字体特征。详情请参阅`initDocument()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:27:14.180

您必须将其设置`StyleContext`为默认字体，然后`StyleContext`为您的 JEditorPane 设置对象

阅读[StyleContext](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/StyleContext.html)

# java - 为包装库设计异常类

> ID：14645191
> 
> 赞同：0
> 
> 时间：2013-02-01T11:21:20.627
> 
> 标签：java, web-services, exception, axis

我有一组托管在服务器上的网络服务。

我使用轴为 web 服务（`java org.apache.axis.wsdl.WSDL2Java http://whatever1?wsdl, java org.apache.axis.wsdl.WSDL2Java http://whatever2?wsdl`等）生成类和存根

这会生成很多类，我从中创建一个 jar 文件。

对于一个特定的项目，我必须创建一个包装类，它使用 jar 中的不同类来执行 3 个任务。这是为了抽象出 jar 中的所有不同类并提供 1 个类，您可以在该类上调用 3 个不同的方法来实现 3 个不同的任务）。

我已经完成了包装类的编码，但是对于如何处理从 web 服务客户端 jar 文件中抛出的异常，我感到非常困惑。

要求之一是我的包装器的客户端永远不需要知道原始 web 服务客户端 jar 中的任何类。所以除了我的包装罐之外，我还需要创建更多的异常类。

在 webservice 客户端 jar 中有 3-4 种不同类型的用户定义的异常类，所有这些类都派生自`WSException`这些类，而这些类又派生自`org.apache.axis.AxisFault`（这是因为我使用了轴来生成客户端 jar）。

现在，我试图弄清楚如何最好地设计我的异常类——这样调用我的包装器的代码就不会丢失直接调用 web 服务客户端时可能获得的任何信息。

由于我的包装器中有 3 个方法（例如 m1、m2、m3）来执行三个不同的任务，我想我会有 3 个异常类（m1exc、m2exc、m3exc）。

这是一个示例异常类

```
public class m1exc
{
    WSException ws;

    public m1exc(WSException e)
    {
        ws = e;
    }

    public String toString()
    {
        return ws.toString();
    }
    // Returns the error code
    public int getCode()
    {
        return ws.getCode();
    }

} 
```

在我的包装中，我会

```
class Wrap
{
    void m1() throws m1exc, javax.xml.rpc.ServiceException, java.rmi.RemoteException
    {
        try
        {
            // call stuff from the webservice client jar to get things done
        }
        catch(WSException w)
        {
            throw new m1exc(w);
        }
    }
} 
```

在包装器代码中，我会尝试捕获我将捕获的块并`WSException`让其他所有内容通过。

这听起来像是正确的策略吗？有没有更好的方法来做到这一点 - 主要标准是调用我的包装器的代码不应该丢失任何异常信息。是否有为此目的的标准设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:00:37.263

您不会向您的客户隐藏 WSException 类，我相信这是您想要完成的。

而是让您的 m1exc 类接受`code`并`toString`作为您从 WSException 传递的参数。您可以从 WSException 类中添加您喜欢的任何其他字段。

要强制 m1exc 由 WSExceptions 创建，而不仅仅是程序员想要的任何值，您可以创建一个接受 WSException 并生成 m1exc 的 m1exc 工厂。工厂和 m1exc 应该在同一个包中，并且 m1exc 类的构造函数上没有访问修饰符（公共），这使得 m1exc 构造函数只能在包内访问。

```
public class m1excFactory {

  public static m1exc createM1Exc(WSExcetion e){
    return new m1exc(e.toString(), e.getCode());
  }
}

public class m1exc{
  String message;
  int code;

  m1exc(String message, int code)
  {
     this.message = message;
     this.code = code;
  }

  public String toString()
  {
    return message;
  }
  // Returns the error code
  public int getCode()
  {
      return code;
  }
} 
```

# java - 检测并返回 Java 字符串中的字符

> ID：14645194
> 
> 赞同：2
> 
> 时间：2013-02-01T11:21:29.330
> 
> 标签：java, regex, string

我正在尝试编写一种方法来扫描字符串中的某些字符，并报告找到了哪些（如果有的话）：

```
// Special characters are ~, #, @, and *
// If text == "Hello~Clarice, you're s#o ambitious", then this
// method should return a string == "~#". If no special characters
// found, return null. If the same special character occurs 2+ times,
// ignore it and do not return strings with duplicate special chars, like
// "##@***", etc. --> just "#@*".
public String detectAndGetSpecialCharacters(String text) {
    Pattern p = Pattern.compile("[~#@*]");
    Matcher m = pattern.matcher(text);

    String specialCharactersFound = null;
    if(m.find()) {
        // ???
    }

    return specialCharactersFound;
} 
```

我已经完成了这个方法的*检测*部分，但我正在努力寻找一种有效/优雅的方法`Matcher`来告诉我找到了*哪些*特殊字符，此外，将它们连接在一起（删除重复项！）并返回它们。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:36:45.413

为什么不简单地使用`String.indexOf(specialChar)`. 如果结果 >= 0，则为每个特殊字符调用此方法，这意味着该特殊字符至少存在一次。

然后根据找到的索引对特殊字符进行排序以构建解析字符串。

不是很优雅，但我认为它很有效，因为：

*   您不必删除重复项。
*   如果你有很多（重复的）特殊字符，它不会有任何影响

编辑（这里是示例代码）

```
 private static class SpecialChar implements Comparable<SpecialChar>{
        Integer position;
        char c;

        private SpecialChar(char c, Integer position) {
            this.c = c;
            this.position = position;
        }

        @Override
        public int compareTo(SpecialChar another) {
            return position.compareTo(another.position);
        }
    }

    public static void main(String[] args){
        String input = args[0];
        char[]  specialsChars = new char[]{'*','@','~','#'};
        List<SpecialChar> results = new ArrayList<SpecialChar>();
        for(char c:specialsChars){
            int position = input.indexOf(c);
            if(position>-1)results.add(new SpecialChar(c,position));
        }
        Collections.sort(results);
        StringBuilder builder = new StringBuilder();
        for(SpecialChar sp:results){
            builder.append(sp.c);
        }
        System.out.print(builder.toString());
   } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:26:28.207

`StringBuilder`如果不存在，您可以使用 a 并将每个匹配的字符附加到它而不是使用字符串：-

```
StringBuilder builder = new StringBuilder();
while (m.find()) {
    String str = m.group();
    if (!builder.toString().contains(str)) {
        builder.append(str);
    }
}

// And finally
return builder.toString(); 
```

* * *

另一种方法是维护 a `Set<String>`，并继续向其中添加匹配的字符。它将自动删除重复项。然后您可以合并 的值`Set`以形成`String`使用[Apache Commons](http://commons.apache.org/) [`StringUtils#join()`](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#join%28java.util.Collection,%20char%29)的方法。或者您可以简单地迭代`Set`并将每个字符串附加到一个`StringBuilder`对象。你喜欢的任何方式都适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:31:32.163

您需要[捕获组](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#cg)。只需用括号将您的正则表达式括起来，然后为每个`matcher#find`获取它。它会是这样的：

```
public String detectAndGetSpecialCharacters(String text) {
    Pattern p = Pattern.compile("([~#@*])");
    Matcher m = pattern.matcher(text);
    Set<String> specialCharacters = new HashSet<String>();

    if (m.find()) {
        specialCharacters.add(m.group(1));
    }
    StringBuilder specialCharactersFound = new StringBuilder();

    for (String specialChar : specialCharacters) {
        specialCharactersFound.append(specialChar);
    }
    return specialCharactersFound.toString();
} 
```

添加到`Set`将删除重复项，并在最后构建带有特殊字符的字符串。而且它不会返回null，这通常不是一件好事。

* * *

**编辑**

您实际上并不需要捕获组，因为您的正则表达式只获取特殊字符。你可以只使用`Matcher#group`. 但是，多学习一件事是件好事；）

# android - 将数百张图像加载到网格时，Android 应用程序的性能问题

> ID：14645196
> 
> 赞同：0
> 
> 时间：2013-02-01T11:21:38.520
> 
> 标签：android, android-sdk-2.1

我在 Android 中有一个工程行业的编目应用程序。超过 30 万张设计图片已上传到 Android 设备。每天有超过 200 张新图像与设备同步。

有一个名为 CatalogDetail 的表，其中存储了设计的详细信息。它有大约 20 列用于存储不同的属性和两个图像路径，一个用于缩略图，另一个用于大图像。缩略图的平均大小约为 20KB，大图的平均大小约为 40KB。所有这些图像都存储在同一个文件夹中（不在数据库中）。30 万张图片的总大小约为 6GB。根据各种搜索条件，缩略图和简短描述显示在应用程序的网格中。

如果文件夹中有 5000 张图像，则应用程序可以正常工作，并且随着数据大小的增加，应用程序变得越来越慢。现在加载了 30 万张图片后，当我将 250 张图片（最终用户希望一次至少加载 250 张图片）加载到网格中时，加载到网格中相对较慢，但是当我尝试滚动时，它需要相当长的时间长时间（大约 10 – 15 秒），这是不可取的。

我分析了我的 SQL，并发现 SQL 并没有花费大量时间（获取数据不到 1 秒）。最后我发现，问题在于从文件夹中加载图像。图像存储在内部存储器中。该应用程序适用于三星 Galaxy Tab 750 10.1 英寸，配备 Android 3.1（蜂窝）操作系统、1GB RAM 和 16GB 内部存储器。该应用程序是使用 SDK 10 开发的。最终用户的基本要求之一是设计图像是非常专有的，它们应该从设备中复制。所以图像文件夹是隐藏的，不能在应用程序之外访问。

请让我知道如何提高性能。
1\. 如果图像是索引，性能可以提高吗？是否可以索引（是否有任何可用的软件、应用程序等？
2.如果我在每个文件夹中保存 1000 张图像，如果我创建 300 个文件夹并从它们中访问图像，性能可以提高吗？但是这应该是最后一个选项，因为我必须重新加载所有图像并修改表中的图像位置
。3.线程可以帮助吗？（我真的不知道线程！）

请建议我如何提高性能。
谢谢你的帮助。

搜索功能将执行此方法：

```
private void ShowData() {
    try {
        Cursor countc = dal.getCursor("Select count(*) From Product " + whereCondition);
        SQL = "Select ID as _id, Name, Code, ProductWeight, '" + fileLoc + "' || ImageLoc as ImageLoc, ReleaseDate From CatalogDetail " + whereCondition;
        Cursor c = dal.getCursor(SQL + " Order By " + orderByField + " " + OrderSeq);

        ProductGridView.setAdapter(new CatalogueListAdapter(this, c));
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这是将目录加载到网格的方式：

```
public class CatalogueListAdapter extends SimpleCursorAdapter {
    private Context context;
    private Cursor c;

    public CatalogueListAdapter(Context context, Cursor c) {
        super(context, R.layout.thumbnail, c, new String[] {}, new int[] {});
        this.context = context;
        this.c = c;
    }
    @Override
    public View getView(int position, View inView, ViewGroup parent) {
        View v = inView;
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.thumbnail, null);
        }
        c.moveToPosition(position);

        ImageView ivThumb = (ImageView) v.findViewById(R.id.thumbnail);
        String imageLoc = this.c.getString(this.c.getColumnIndex("ImageLoc"));
        if (imageLoc != null) 
            ivThumb.setImageURI(Uri.parse(imageLoc));
        return v;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:38:41.320

我不由自主地想到的一件事是根据图片的名称将图片简单地分配到子文件夹中，或者，如果这不可能，则给它们起适合的名称。

通常，open() 调用需要扫描一个称为目录的特殊文件。如果条目很多，这种线性搜索会变得非常慢。

如果你愿意，我的建议有点像“索引”，尽管我喜欢这里的“混合”方法。仅仅因为冒泡排序总是因为开销较小而对少数项目最快，所以类似的规则也适用于目录。

因此，如果图像可以通过它们的文件名或文件名的哈希值分布，那么使用子目录结构来放置它们。当然，均匀分布必须是这里的主要目标，因此请明智地选择名称或散列函数。

总结一下：

1.  是与否；见上面的文字。;)
2.  是的，我更喜欢它，因为如果我的假设是正确的，那么单独的附加索引将无济于事，即问题确实出在 open() 上。
3.  同样，如果我的假设是正确的，那么线程将无济于事。

# playframework - Play Framework 2 ElasticSearch 存储类型

> ID：14645197
> 
> 赞同：1
> 
> 时间：2013-02-01T11:21:39.237
> 
> 标签：playframework, playframework-2.0, elasticsearch

我决定在我的 Play Framework 项目（Play 2.0.3）中使用 ElasticSearch。

我发现并开始使用[play2-elasticsearch](https://github.com/cleverage/play2-elasticsearch)插件（感谢 autors，它确实是非常有用的工具），它以本地模式启动 ElasticSearch 服务器并将其用作搜索服务器。

现在我想为 ElasticSearch 服务器设置一些额外的配置选项。例如，将存储类型设置为内存。ElasticSearch 文档[描述](http://www.elasticsearch.org/guide/reference/setup/configuration.html)了如何在独立模式下调整配置设置。

但是我如何使用 play 插件来执行这些操作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:22:26.200

实际上，无法在“node”（[issue9](https://github.com/cleverage/play2-elasticsearch/issues/9)）上自定义设置，但您可以通过 application.conf 中的“elasticsearch.index.settings”属性在“index”上定义设置

```
## Custom settings to apply when creating the index (optional)
elasticsearch.index.settings="{ analysis: { analyzer: { my_analyzer: { type: \"custom\", tokenizer: \"standard\" } } } }" 
```

对于设置存储类型，您可以这样设置：

```
elasticsearch.index.settings="{ store : { type: \"memory\" } }" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T13:46:16.987

我是 play2-elasticsearch 插件的作者之一。我只是在我们的 github 存储库上创建了一个问题以添加此配置设置。

如果您想在本地修改和发布模块，它位于此类[https://github.com/cleverage/play2-elasticsearch/blob/master/module/app/com/github/cleverage/elasticsearch/IndexClient.java](https://github.com/cleverage/play2-elasticsearch/blob/master/module/app/com/github/cleverage/elasticsearch/IndexClient.java)我们将发布一个新版本。

@nboire

# webdriver - Webdriver：如何覆盖 get() 方法？

> ID：14645198
> 
> 赞同：1
> 
> 时间：2013-02-01T11:21:39.127
> 
> 标签：webdriver, selenium-webdriver

在 webdriver 中，打开页面时

Webdriver.get("www.yahoo.com");

如果我想点击的元素立即出现，我必须等到页面加载完成。

有没有解决这个问题的解决方案/建议？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:51:20.210

在 WebDriver 中有三个隐式等待

1.  隐式等待

    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

2.  页面加载超时

    driver.manage().timeouts().pageLoadTimeout(30, SECONDS);

3.  设置脚本超时

    driver.manage().timeouts().setScriptTimeout(30,SECONDS);

您可以在上述方法中指定在抛出异常之前等待的时间。

有关更多信息，请参阅此[链接](http://santoshsarmajv.blogspot.in/2013/01/webdriver-waits.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:03:09.617

默认情况下，Web 驱动程序实例将等待页面加载完成。但是您可以使用更改`timeout`持续时间

```
 //Assume driver instance is initialized properly
  driver.manage().timeouts().pageLoadTimeout(5, TimeUnit.SECONDS); 
```

如果页面加载超过给定的持续时间意味着它将抛出`TimeOut Exception`

欲了解更多[信息](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:22:28.083

试试 FluentWait，虽然这是用于处理 ajax 元素，但可能对您的情况有用。这是资源 - [http://www.thoughtworks-studios.com/twist/2.3/help/how_do_i_handle_ajax_in_selenium2.html](http://www.thoughtworks-studios.com/twist/2.3/help/how_do_i_handle_ajax_in_selenium2.html)

# r - 在 R 中拟合这些数据的曲线？

> ID：14645199
> 
> 赞同：2
> 
> 时间：2013-02-01T11:21:42.343
> 
> 标签：r, curve-fitting

几天来我一直在解决这个问题，但我被困住了......

我在 R 中执行了许多蒙特卡罗模拟，它为每个输入 x 提供了一个输出 y，并且 x 和 y 之间显然存在一些简单的关系，所以我想确定公式及其参数。但我似乎无法很好地适应“低 x”和“高 x”系列，例如使用这样的对数：

```
dat = data.frame(x=x, y=y)
fit = nls(y~a*log10(x)+b, data=dat, start=list(a=-0.8,b=-2), trace=TRUE) 
```

我也尝试过拟合 (log10(x), 10^y) ，这给出了很好的拟合，但反向变换不太适合 (x, y) 。

谁能解决这个问题？

请说明您是如何找到解决方案的。

谢谢！

**编辑：**

感谢所有快速反馈！

我不知道我正在模拟的理论模型，所以我没有比较的基础。我根本不知道 x 和 y 之间的真正关系。顺便说一句，我不是统计学家。

底层模型是一种随机反馈增长模型。我的目标是在给定一些输入 x>0 的情况下确定长期增长率 g，因此系统的输出在每次迭代中以 1+g 的速率呈指数增长。根据系统的大小，系统在每次迭代中都有一个随机生成，该生成的一部分是输出，其余部分保存在由另一个随机变量确定的系统中。从 MC 模拟中，我发现对于我测试的每个 x，系统输出的增长率都是对数正态分布的，并且数据系列中的 y 是增长率 g 的对数均值。当 x 趋向无穷大时，g 趋向于零。当 x 趋向于零时，g 趋向于无穷大。

我想要一个可以从 x 计算 y 的函数。实际上，我只需要一个低 x 的函数，比如说，在 0 到 10 的范围内。我能够很好地拟合 y=1.556 * x^-0.4 -3.58，但它不适合大 x。我想要一个对所有 x>0 通用的函数。我也尝试过 Spacedman 的 poly fit（谢谢！），但它在 x=1 到 6 的关键范围内不够好。

有任何想法吗？

**编辑2：**

我做了更多的实验，还有 Grothendieck 的详细建议（谢谢！）经过一番考虑，我决定，因为我没有选择一个函数而不是另一个函数的理论基础，而且我很可能只对 x-感兴趣值在 1 到 6 之间，我应该使用一个适合的简单函数。所以我只使用了 y~a*x^b+c 并记下它不适合高 x。等论文初稿完成后，我可能会再次寻求社区的帮助。一旦您看到蒙特卡洛模型，也许你们中的一个人可以发现 x 和 y 之间的理论关系。

再次感谢！

**低x系列：**

```
 x          y
1   0.2 -0.7031864
2   0.3 -1.0533648
3   0.4 -1.3019655
4   0.5 -1.4919278
5   0.6 -1.6369545
6   0.7 -1.7477481
7   0.8 -1.8497117
8   0.9 -1.9300209
9   1.0 -2.0036842
10  1.1 -2.0659970
11  1.2 -2.1224324
12  1.3 -2.1693986
13  1.4 -2.2162889
14  1.5 -2.2548485
15  1.6 -2.2953162
16  1.7 -2.3249750
17  1.8 -2.3570141
18  1.9 -2.3872684
19  2.0 -2.4133978
20  2.1 -2.4359624
21  2.2 -2.4597122
22  2.3 -2.4818787
23  2.4 -2.5019371
24  2.5 -2.5173966
25  2.6 -2.5378936
26  2.7 -2.5549524
27  2.8 -2.5677939
28  2.9 -2.5865958
29  3.0 -2.5952558
30  3.1 -2.6120607
31  3.2 -2.6216831
32  3.3 -2.6370452
33  3.4 -2.6474608
34  3.5 -2.6576862
35  3.6 -2.6655606
36  3.7 -2.6763866
37  3.8 -2.6881303
38  3.9 -2.6932310
39  4.0 -2.7073198
40  4.1 -2.7165035
41  4.2 -2.7204063
42  4.3 -2.7278532
43  4.4 -2.7321731
44  4.5 -2.7444773
45  4.6 -2.7490365
46  4.7 -2.7554178
47  4.8 -2.7611471
48  4.9 -2.7719188
49  5.0 -2.7739299
50  5.1 -2.7807113
51  5.2 -2.7870781
52  5.3 -2.7950429
53  5.4 -2.7975677
54  5.5 -2.7990999
55  5.6 -2.8095955
56  5.7 -2.8142453
57  5.8 -2.8162046
58  5.9 -2.8240594
59  6.0 -2.8272394
60  6.1 -2.8338866
61  6.2 -2.8382038
62  6.3 -2.8401935
63  6.4 -2.8444915
64  6.5 -2.8448382
65  6.6 -2.8512086
66  6.7 -2.8550240
67  6.8 -2.8592950
68  6.9 -2.8622220
69  7.0 -2.8660817
70  7.1 -2.8710430
71  7.2 -2.8736998
72  7.3 -2.8764701
73  7.4 -2.8818748
74  7.5 -2.8832696
75  7.6 -2.8833351
76  7.7 -2.8891867
77  7.8 -2.8926849
78  7.9 -2.8944987
79  8.0 -2.8996780
80  8.1 -2.9011012
81  8.2 -2.9053911
82  8.3 -2.9063661
83  8.4 -2.9092228
84  8.5 -2.9135426
85  8.6 -2.9101730
86  8.7 -2.9186316
87  8.8 -2.9199631
88  8.9 -2.9199856
89  9.0 -2.9239220
90  9.1 -2.9240167
91  9.2 -2.9284608
92  9.3 -2.9294951
93  9.4 -2.9310985
94  9.5 -2.9352370
95  9.6 -2.9403694
96  9.7 -2.9395336
97  9.8 -2.9404153
98  9.9 -2.9437564
99 10.0 -2.9452175 
```

**高x系列：**

```
 x         y
1  2.000000e-01 -0.701301
2  2.517851e-01 -0.907446
3  3.169786e-01 -1.104863
4  3.990525e-01 -1.304556
5  5.023773e-01 -1.496033
6  6.324555e-01 -1.674629
7  7.962143e-01 -1.842118
8  1.002374e+00 -1.998864
9  1.261915e+00 -2.153993
10 1.588656e+00 -2.287607
11 2.000000e+00 -2.415137
12 2.517851e+00 -2.522978
13 3.169786e+00 -2.621386
14 3.990525e+00 -2.701105
15 5.023773e+00 -2.778751
16 6.324555e+00 -2.841699
17 7.962143e+00 -2.900664
18 1.002374e+01 -2.947035
19 1.261915e+01 -2.993301
20 1.588656e+01 -3.033517
21 2.000000e+01 -3.072003
22 2.517851e+01 -3.102536
23 3.169786e+01 -3.138539
24 3.990525e+01 -3.167577
25 5.023773e+01 -3.200739
26 6.324555e+01 -3.233111
27 7.962143e+01 -3.259738
28 1.002374e+02 -3.291657
29 1.261915e+02 -3.324449
30 1.588656e+02 -3.349988
31 2.000000e+02 -3.380031
32 2.517851e+02 -3.405850
33 3.169786e+02 -3.438225
34 3.990525e+02 -3.467420
35 5.023773e+02 -3.496026
36 6.324555e+02 -3.531125
37 7.962143e+02 -3.558215
38 1.002374e+03 -3.587526
39 1.261915e+03 -3.616800
40 1.588656e+03 -3.648891
41 2.000000e+03 -3.684342
42 2.517851e+03 -3.716174
43 3.169786e+03 -3.752631
44 3.990525e+03 -3.786956
45 5.023773e+03 -3.819529
46 6.324555e+03 -3.857214
47 7.962143e+03 -3.899199
48 1.002374e+04 -3.937206
49 1.261915e+04 -3.968795
50 1.588656e+04 -4.015991
51 2.000000e+04 -4.055811
52 2.517851e+04 -4.098894
53 3.169786e+04 -4.135608
54 3.990525e+04 -4.190248
55 5.023773e+04 -4.237104
56 6.324555e+04 -4.286103
57 7.962143e+04 -4.332090
58 1.002374e+05 -4.392748
59 1.261915e+05 -4.446233
60 1.588656e+05 -4.497845
61 2.000000e+05 -4.568541
62 2.517851e+05 -4.628460
63 3.169786e+05 -4.686546
64 3.990525e+05 -4.759202
65 5.023773e+05 -4.826938
66 6.324555e+05 -4.912130
67 7.962143e+05 -4.985855
68 1.002374e+06 -5.070668
69 1.261915e+06 -5.143341
70 1.588656e+06 -5.261585
71 2.000000e+06 -5.343636
72 2.517851e+06 -5.447189
73 3.169786e+06 -5.559962
74 3.990525e+06 -5.683828
75 5.023773e+06 -5.799319
76 6.324555e+06 -5.929599
77 7.962143e+06 -6.065907
78 1.002374e+07 -6.200967
79 1.261915e+07 -6.361633
80 1.588656e+07 -6.509538
81 2.000000e+07 -6.682960
82 2.517851e+07 -6.887793
83 3.169786e+07 -7.026138
84 3.990525e+07 -7.227990
85 5.023773e+07 -7.413960
86 6.324555e+07 -7.620247
87 7.962143e+07 -7.815754
88 1.002374e+08 -8.020447
89 1.261915e+08 -8.229911
90 1.588656e+08 -8.447927
91 2.000000e+08 -8.665613 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T12:16:27.760

在不了解底层过程的情况下，您也可以将多项式与尽可能多的分量拟合。您似乎没有在测试假设（例如，重力与距离成反比），因此您可以随心所欲地寻找功能形式，数据不太可能告诉您哪个是“正确的”。

因此，如果我将您的数据读入带有 x 和 y 组件的数据框中，我可以这样做：

```
data$lx=log(data$x)
plot(data$lx,data$y) # needs at least a cubic polynomial 
m1 = lm(y~poly(lx,3),data=data) # fit a cubic
points(data$lx,fitted(m1),pch=19) 
```

并且拟合点非常接近。将多项式次数从 3 更改为 7，点相同。这是否意味着您的 Y 值真的来自 X 值的 7 次多项式？不，但是你有一条穿过这些点的曲线。

在这个比例下，你还不如把相邻的点用一条直线连接起来，你的情节很流畅。但是如果没有关于为什么 Y 依赖于 X 的基本理论（如平方反比定律，或指数增长，或其他东西），你所做的只是连接点，并且有无限的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-02T07:29:49.640

**回归 x/y 与 x**绘制`y`与`x`低数据的对比并玩弄一点似乎`x/y`是近似线性的，`x`所以尝试回归它`x/y`给`x`我们一个仅基于两个参数的关系：

```
y = x / (a + b * x) 
```

其中 a 和 b 是回归系数。

```
> lm(x / y ~ x, lo.data)

Call:
lm(formula = x/y ~ x, data = lo.data)

Coefficients:
(Intercept)            x  
    -0.1877      -0.3216 
```

**MM.2**以上可以转化为drc R包中的MM.2模型。如下所示，该模型具有高 R ²。此外，我们计算了可用于与其他模型进行比较的 AIC（越低越好）：

```
> library(drc)
> fm.mm2 <- drm(y ~ x, data = lo.data, fct = MM.2())
> cor(fitted(fm.mm2), lo.data$y)^2
[1] 0.9986303
> AIC(fm.mm2)
[1] -535.7969 
```

**CRS.6**这表明我们尝试了一些其他的 drc 模型，而我们尝试的 CRS.6 具有特别低的 AIC，并且在视觉上似乎很适合：

```
> fm.crs6 <- drm(y ~ x, data = lo.data, fct = CRS.6())
> AIC(fm.crs6)
[1] -942.7866
> plot(fm.crs6) # see output below 
```

这为我们提供了一系列模型，我们可以从 2 参数`MM.2`模型中使用该模型，该模型不如 CRS.6 的拟合（根据 AIC），但仍然非常拟合，并且具有只有两个参数或 6 参数的优势`CRS.6`具有卓越 AIC 的模型。请注意，AIC 已经惩罚了具有更多参数的模型，因此具有更好的 AIC 并不是具有更多参数的结果。

**其他**如果认为 low 和 high 都应该具有相同的模型形式，那么找到一个适合 low 和 high 的单一模型形式可能会用作选择模型形式的另一个标准。除了 drc 模型，在[Akbar et al, IRJFE, 2010](http://www.eurojournals.com/irjfe_43_15.pdf)的 (2.1), (2.2), (2.3) 和 (2.4) 中也有一些产量密度模型看起来类似于 MM.2 模型，可以受审。

![截屏](../Images/b7ef319b3e1bd46c12cb31d9df696ba2.png)

更新：围绕 drc 包重新设计。

# search - Sitecore Lucene 搜索索引和子文件夹

> ID：14645203
> 
> 赞同：1
> 
> 时间：2013-02-01T11:21:49.173
> 
> 标签：search, lucene, sitecore, root

**如何让 Lucene 包含在站点根目录之外索引的结果，例如。基于 fx 根的东西。**“/sitecore/content/stuff”，但没有放在“/sitecore/content/Home”中。

查看“/sitecore modules/LuceneSearch/”中的 SearchManager.cs，SiteRoot 被定义为“SiteCore.Content.Site.Startpath”，但对该文件进行任何更改似乎都会产生任何影响。

注意：
我只使用“LuceneResults”.ascx & .cs。

----- 问题已更新，因为我缩小了问题的可能范围 -----

我试图创建一组特定项目的索引，用于 Lucene 搜索。
在 web.config 中，我指定了一个索引，其中包含：

```
 ...
 <root>/sitecore/content/Home/Subfolder</root>
 ... 
```

并且可以完美运行，在搜索时获取所有子项。

然后我将完全相同的项目复制到一个新位置，并更新了我的 web.config 如下：

```
 ...
 <root>/sitecore/content/newSubfolder/Subfolder/Subfolder</root>
 ... 
```

现在我的搜索从来没有找到任何东西！
有谁知道这里可能是什么问题。

注意：
- 我在每次更改时都重建了搜索索引数据库。
- 在“卢克”中，索引似乎很好，并且这里的搜索产生了正确的结果。

完整索引：

```
<index id="faqindex" type="Sitecore.Search.Index, Sitecore.Kernel">
    <param desc="name">$(id)</param>
    <param desc="folder">__faq</param>
    <Analyzer ref="search/analyzer"/>
    <locations hint="list:AddCrawler">
        <resources type="Sitecore.Search.Crawlers.DatabaseCrawler, Sitecore.Kernel">
            <database>master</database>
                      <root>/sitecore/content/MyContent/Snippets/FAQ</root>
            <include hint="list:IncludeTemplate">
                <faqblock>{3340AAAE-B2F8-4E22-8B7B-F3EDDB48587E}</faqblock>
            </include>
            <tags>faqblock</tags>
            <boost>1.0</boost>
        </resources>
    </locations>
</index> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:34:29.197

听起来您正在使用 Sitecore Marketplace 中的**[Lucene Search](http://marketplace.sitecore.net/en/Modules/Lucene_Search.aspx)**模块。此模块的代码将搜索结果限制为站点根目录及其子项：

```
 public SearchManager(string indexName)
 {
   SearchIndexName = indexName;
   Database database = Factory.GetDatabase("master");
   var item = Sitecore.Context.Site.StartPath;
   SiteRoot = database.GetItem(item);
}
[...]
public SearchResultCollection Search(string searchString)
{
  //Getting index from the web.config
  var searchIndex = Sitecore.Search.SearchManager.GetIndex(SearchIndexName);
  using(IndexSearchContext context = searchIndex.CreateSearchContext())
  {
     SearchHits hits = context.Search(searchString, new SearchContext(SiteRoot)); 
```

*站点核心模块\Lucene Search\SearchManager.cs*

假设 Web.config 的**站点**部分中的“网站”节点具有 startItem="/home"，则不会返回“主页”层次结构之外的结果。

如果您下载此项目的源代码，并将填充 SiteRoot 的行编辑为以下内容，则将返回新项目：

```
SiteRoote = database.GetItem("/sitecore/content"); 
```

记得把新建的 LuceneSearch.dll 复制到网站项目的 bin 目录下。

# android - 在 Android 中运行 FFMPEG

> ID：14645209
> 
> 赞同：4
> 
> 时间：2013-02-01T11:22:10.447
> 
> 标签：android, video, android-ndk, ffmpeg, video-encoding

> **可能重复：**
> [适用于 android 的 ffmpeg（使用教程：“ffmpeg 和 Android.mk”）](https://stackoverflow.com/questions/2645041/ffmpeg-for-a-android-using-tutorial-ffmpeg-and-android-mk)

我已经尝试了几种在android中运行FFMPEG的东西，在整个网络上搜索，没有有效或直接的解决方案可用。裁判[这个](http://www.roman10.net/how-to-build-ffmpeg-for-android/)和相关的虽然非常有帮助。

此外，目前我能够在 Ubuntu 12 中构建 FFMPEG。创建了所有 .SO 二进制文件。

我的问题是，如何更改 ffmeg.c 文件以使我能够传递 ffmpeg 命令？

根据[此](http://www.roman10.net/how-to-port-ffmpeg-the-program-to-androidideas-and-thoughts/)通过以下步骤这是可能的。

通过上面的设计，对 ffmpeg.c 的更改很简单。

```
Change the main(int argc, char **argv) function prototype to a java JNI interface prototype that Android java code can call.
Change the output to stdout to the text files we created.
Comment out a few lines that cause the compilation error. 
```

但我无法更改主要内容以及它将如何。

请帮助我。如果有人已经实现了这件事。

# bluetooth - HID 连接到没有 SDP 记录的远程设备

> ID：14645211
> 
> 赞同：2
> 
> 时间：2013-02-01T11:22:17.333
> 
> 标签：bluetooth, hid, bluez

要将 HID 配置文件连接到鼠标/键盘，需要连接具有 psm 17 和 19 的 HID_CONTROL 和 HID_INTERUPT 通道。我们使用 HID 的 SDP 记录查找信息，然后建立 L2CAP 连接以连接通道。

bluez 中是否有任何实用程序可以帮助我连接输入设备。我的键盘/鼠标不支持 SDP 记录，所以当我使用 dbus 信号（连接到输入设备）时，它会失败。bluez 中是否提供了任何库，我可以使用 BD_ADDR 和 PSM 编号连接到设备，而无需通过 SDP 查询设备

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:44:09.867

它可以使用可用的 HIDD 实用程序，尽管 hidd 实用程序也执行 SDP 然后连接，但它通过删除代码进行 SDP 搜索来调整代码，之后它确实连接到控制和中断通道。由于我的对等设备能够支持 PSM 17 和 19，因此它确实接受了 HID 连接

# jquery - 使用 jQuery 在多个滑动面板上自动关闭

> ID：14645212
> 
> 赞同：1
> 
> 时间：2013-02-01T11:22:26.873
> 
> 标签：jquery

我有一段滑动面板效果很好，但我的问题是，一旦你打开一个然后点击第二个或第三个面板，前一个面板不会关闭并保持打开状态，看起来很乱，我有一个指向我的代码的链接[**jsfiddle**](http://jsfiddle.net/pcD8D/7/)。所以我想知道是否可以添加一些代码，当单击新面板时可以自动关闭以前打开的面板？

当前的 jQuery 代码如下所示：

```
 $("#team_section .team_member_photo").next().hide().append('<input type="button" value="close" />');

    $("#team_section .team_member_photo").click(function() {
        $(this).next().slideToggle("slow");
    });

    $("input").click(function() {
        $(this).parent().slideUp();
    }); 
```

HTML：

```
 <div id="team_wrapper">
  <div id="team_section" class="clearfix">

            <div class="team_member_photo">photo 0</div>
            <div class="team_member_profile_text"><p>text</p></div>

            <div class="team_member_photo">photo 1</div>
            <div class="team_member_profile_text"><p>text</p></div>

            <div class="team_member_photo">photo 2</div>
            <div class="team_member_profile_text"><p>text</p></div>

            <div class="team_member_photo">photo 3</div>
            <div class="team_member_profile_text"><p>text</p></div>

            <div class="team_member_photo">photo 4</div>
            <div class="team_member_profile_text"><p>text</p></div>

            <div class="team_member_photo">photo 5</div>
            <div class="team_member_profile_text"><p>text</p></div>

  </div><!-- team_section -->
  </div><!-- team_wrapper --> 
```

CSS：

```
 #team_wrapper {
                       width: 990px;
                        height: 600px;
                    }

                    #team_section {
                        width: 100%;
                        background-color: #fee9f2;
                        height: 100%;
                        position: relative;
                        visibility: visible;
                    }

                    .team_member_photo {
                        background-color: #d3d9fe;
                        width: 150px;
                        height: 170px;
                        display: inline-block;
                        padding: 0 10px 10px 0;
                    }

                    .team_member_profile_text {
                        background-color: #fff;
                        height: 100%;
                        overflow: hidden;
                        position: relative;
                        float: left;
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:28:58.563

不，你需要告诉 jquery 关闭所有其他的。

只需将您的点击侦听器更改为：

```
$("#team_section .team_member_photo").click(function() {
    var $this = $(this);
    $this.parent().find('.team_member_profile_text').slideUp("fast");
    $this.next().slideDown("slow");
}); 
```

# vb.net - VB.NET：在里面画笔，而不是在外面

> ID：14645213
> 
> 赞同：1
> 
> 时间：2013-02-01T11:22:27.237
> 
> 标签：vb.net, path, drawing

我想我曾经读到过，可以将笔设置为在路径“内部”而不是外部绘制。我不希望我的道路被扩大。具体来说，我想在我的路径周围画一个边框，并且边框不应该超出路径。

不幸的是，这扩大了我的道路：

```
 Dim nPen As New Pen(Brushes.Black, 15)
    g.DrawPath(nPen, nPath) 
```

如果有人明白我想做什么，我会很高兴得到答复！非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:23:13.030

您正在寻找[`Pen.Alignment property`](http://msdn.microsoft.com/en-us/library/system.drawing.pen.alignment.aspx). 它可以具有以下值（[source](http://msdn.microsoft.com/en-us/library/z62ath7a.aspx)）：

*   居中：指定 Pen 对象位于理论线的中心。
*   Inset：指定 Pen 位于理论线的内侧。
*   起点：指定笔位于理论线的外侧。
*   左：指定笔位于理论线的左侧。
*   右：指定笔位于理论线的右侧。

你需要这个`Inset`值。

*代码示例。*你可以像这样使用它：

```
Using nPen As New Pen(Brushes.Black, 15) With {.Alignment = Drawing2D.PenAlignment.Inset}
    g.DrawPath(nPen, nPath)
End Using 
```

（请注意，我正在使用[`using`语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)来确保正在处理对象。）

# asp.net - ASP.NET ViewState 错误？

> ID：14645215
> 
> 赞同：0
> 
> 时间：2013-02-01T11:22:42.387
> 
> 标签：asp.net

我们最近接管了客户网站的管理并将其移至新的 CMS，这是一项噩梦般的工作，我希望我们从未开始！

我不得不更改大量链接，所以为了安心，我在网上搜索了一个链接检查器，以确保一切正常。

我使用了一种名为 powermapper 的东西，它没有发现任何链接问题，但确实发现了以下 .net 问题。

我不是 .net 开发人员（前端设计师），所以我不明白在说什么，我希望我只是偏执，因为该网站在我检查过的每个浏览器/系统和我的同事上都能正常工作做的发展最近搬走了。

以下是严重的担忧吗？任何人都可以帮助减轻我的压力！？

错误 此页面包含大于 2K 的 ASP.NET ViewState。这可能会导致运行 IPVNMON.SYS 的 PC 上的系统不稳定和蓝屏，该文件由某些网络监控软件包安装。

3 页错误

来自提到的页面之一的来源如下 - 头部代码 -

```
Dim resourceclass As New resource
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
    rssRT.DataSource = resourceclass.ReturnActiveResourceswithLeadImage_ByResType("rev", 1)
    rssRT.DataBind()
End Sub

Protected Sub Repeater_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs)
    Dim rowindex As Integer = CType(e.Item.FindControl("rowindexHF"), HiddenField).Value
    If rowindex = 1 Or rowindex = 3 Or rowindex = 5 Or rowindex = 7 Or rowindex = 9 Or  rowindex = 11 Or rowindex = 13 Or rowindex = 15 Then
        CType(e.Item.FindControl("divPnl"), Panel).CssClass = "press_article float-right"
    Else
        CType(e.Item.FindControl("divPnl"), Panel).CssClass = "press_article float-left"
    End If

    '
    Dim desc As String = CType(e.Item.FindControl("descLT"), Literal).Text
    Dim desclength As Integer = desc.Length
    If desclength > 135 Then
        CType(e.Item.FindControl("descLT"), Literal).Text = "<p>" &   Regex.Replace(desc.Substring(0, 135), "<.*?>", String.Empty) & "</p>"
    End If

End Sub

</script> 
```

正文部分的一段代码 -

```
 <asp:Image width="477" height="181" Alternativetext="Cranleigh" id="offerIMG"  runat="server" ImageUrl='<%# "http://cranleigh.wrd5.com/writedir/images/" &  DataBinder.Eval(Container.DataItem,"file_title")%>' />

                </div>

                <div class="press_desc">
                    <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%# "Reviews-Article.aspx?id=" & DataBinder.Eval(Container.DataItem,"res_id")%>' ><img src="images/press_read_more2.png" width="98" height="33" alt="Click here to read more" class="float-right" /></asp:Hyperlink>

                   <asp:Literal ID="descLT" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"res_description")%>' />...
                </div>
            </asp:Panel>

                </ItemTemplate>
            </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:44:12.813

Viewstate 是 ASP.NET 使用的一种技巧，用于使网页在请求之间保持应用程序状态，试图使其看起来像一个 Windows 应用程序。它是存储此信息的页面上的隐藏 HTML 字段。

在开发 Web 应用程序时，使用 ASP.NET WebForms 的开发人员应注意不要过多地使用此功能。过度使用它是一个常见的错误，互联网上有很多网站都可以找到这个问题。如果您有权访问源代码，您可以要求/聘请开发人员重写这 3 个页面。

如果没有，您只需要担心您的客户在他们的机器上安装了 Visual IP InSight (Ipvnmon.sys)。

# php - 无效地址：SMTP 错误：无法连接到 SMTP 主机

> ID：14645217
> 
> 赞同：1
> 
> 时间：2013-02-01T11:22:46.390
> 
> 标签：php, smtp

我正在尝试使用 gmail smtp 服务器通过 php 邮件程序从 php 表单发送电子邮件。我已经从 Windows 防火墙打开了 465 端口，但是当我键入时该端口没有出现在 cmd 输出中

> netstat -an

command.php页面中出现的错误是： **无效地址：SMTP错误：无法连接到SMTP主机。** 在我的搜索结果中，我的问题没有确切的解决方案。我的代码是：

```
<?php
 require_once('PHPMailer_v5.1/class.phpmailer.php');
 define('GUSER', 'from@gmail.com'); // GMail username
define('GPWD', 'password'); // GMail password
function smtpmailer($to, $from, $from_name, $subject, $body) { 
    global $error;
    $mail = new PHPMailer();  // create a new object
    $mail->IsSMTP(); // enable SMTP
    $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only
    $mail->SMTPAuth = true;  // authentication enabled
    $mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for GMail
    $mail->Host = 'smtp.gmail.com';
    $mail->Port = 465; 
    $mail->Username = GUSER;  
    $mail->Password = GPWD;           
    $mail->SetFrom($from, $from_name);
    $mail->Subject = $subject;
    $mail->Body = $body;
    $mail->AddAddress($to);
    if(!$mail->Send()) {
        $error = 'Mail error: '.$mail->ErrorInfo; 
        return false;
    } else {
        $error = 'Message sent!';
        return true;
    }}
    if(smtpmailer('from@gmail.com', 'to@gmail.com', 'name', 'test mail message', 'Hello World!')){
        echo "sent";
    if (!empty($error)) echo $error;}

  ?> 
```

注意：我在我的网站上使用 localhost

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:29:06.383

尝试使用端口 25 或 587，同时检查您的 apache 日志。

# php - php jquery 获取它在第一个 td 上获得的每个 td 的值

> ID：14645228
> 
> 赞同：1
> 
> 时间：2013-02-01T11:23:33.993
> 
> 标签：php, jquery

我有这个 jquery，然后我用 foreach 来显示我数据库中的所有记录。

现在我想做的是将值传递给jquery，但该值只读取第一个td。

我的jQuery

```
jQuery('#nannyedit').click(function(){
    jQuery('<img src="<?php echo plugins_url( 'images/jon-loader.gif', __FILE__ ); ?>" id="loading" />').appendTo("#container");
    var unanny = jQuery(this).parent().siblings("input[name=nanny]:first").val();
    var access = jQuery( 'input[name=access]' ).val();

    alert( unanny );
    jQuery.ajax({
        type: "GET",
        url: "<?php echo plugins_url( 'edit.php', __FILE__ ); ?>",
        data: { user_login: unanny, access: access },
        dataType: 'html',
        target: '#tab-1',
        success: function(data){
            jQuery("#container").find('img#loading').remove();
            jQuery("#container").html(data);
        }
    })
}); 
```

我的 html

```
<table cellpadding="5" cellspacing="0">
    <thead>
    <tr>
        <th>Username</th>
        <th>Email</th>
        <th>First Name</th>
        <th>Middle Name</th>
        <th>Last Name</th>
        <th>Status</th>
        <th>Photo</th>
        <th>Resume</th>
        <th>Date</th>
        <th>Option</th>
     </tr>
    </thead>
    <tbody>
<?php
global $wpdb;
$mynanny = $wpdb->get_results( "SELECT * FROM jon_nanny" );
$color1 = "#FDF7E1"; 
$color2 = "#FFFFFF"; 
$row_count = 0;
foreach ($mynanny as $nanny) {
    $mynannyphoto = $wpdb->get_row( "SELECT * FROM jon_nanny_photo WHERE user_login = '".$nanny->user_login."' " );
    $mynannyresume = $wpdb->get_row( "SELECT * FROM jon_nanny_resume WHERE user_login = '".$nanny->user_login."' " );
$row_color = ($row_count % 2) ? $color1 : $color2;
$uploads = wp_upload_dir();
$upload_dir = ( $uploads['url'] );
    ?>
        <tr>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $nanny->user_login; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $nanny->email; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $nanny->fname; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $nanny->mname; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $nanny->lname; ?></td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $nanny->user_status; ?></td>
            <td style="background-color:<? echo $row_color; ?>">
            <img src="<?php echo $upload_dir.'/'.$mynannyphoto->imgname; ?>" width="150" />
            </td>
            <td style="background-color:<? echo $row_color; ?>">
            <a href="<?php echo $upload_dir.'/'.$mynannyresume->resume; ?>" />
                <img src="<?php echo plugins_url( 'images/resume.png', __FILE__ ); ?>" />
            </a>
            </td>
            <td style="background-color:<? echo $row_color; ?>"><?php echo $nanny->date; ?></td>
            <td style="background-color:<? echo $row_color; ?>" id="getnan">
            <?php
            $url = admin_url();    
            ?>
            <input type="hidden" name="nanny" value="<?php echo $nanny->user_login;?>" />
            <input type="hidden" name="access" value="nanny" />
            <a href="#" id="nannyedit">
                <img src="<?php echo plugins_url( 'images/edit-file-icon.png', __FILE__ ); ?>" />
            </a>
            <a href="">
                <img src="<?php echo plugins_url( 'images/delete-file-icon.png', __FILE__ ); ?>" />
            </a>
            <a href="" title="View">
                <img src="<?php echo plugins_url( 'images/Document-icon.png', __FILE__ ); ?>" />
            </a>
            </td>
        </tr>
<?php
$row_count++;
}       
?>
    </tbody>
</table> 
```

我的jQuery错了吗？请告诉我谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:29:30.530

将 foreach 循环更改为 while

```
 while($mynanny = $wpdb->get_results( "SELECT * FROM jon_nanny" )){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:32:03.883

问题是您在 foreach 循环中使用了#nannyedit。

> id 属性为 HTML 元素指定一个唯一的 id（该值在 HTML 文档中必须是唯一的）。

更改您的代码：

在脚本中：

```
jQuery('.nannyedit').click(.... 
```

在 foreach 中：

```
<a class='nannyedit'> ... 
```

# php - Chef 不会在 Centos 中安装 apache2

> ID：14645229
> 
> 赞同：0
> 
> 时间：2013-02-01T11:23:38.280
> 
> 标签：php, apache2, chef-infra, vagrant, yum

我试图通过在 Centos 盒子中创建 LAMP 堆栈来弄清楚 Chef 和 Vagrant 是如何工作的。使用 Chef 进行配置时，Apache2 安装会出现以下错误：

```
[2013-02-01T11:00:13+00:00] INFO: package[apache2] installing httpd-2.2.15-15.el6.centos.1 from base repository

================================================================================

Error executing action `install` on resource 'package[apache2]'

================================================================================

Chef::Exceptions::Exec

----------------------

 returned 1, expected 0

Resource Declaration:

---------------------

# In /tmp/vagrant-chef-1/chef-solo-1/cookbooks/apache2/recipes/default.rb

 20: package "apache2" do
 21:   package_name node['apache']['package']
 22: end
 23: 

Compiled Resource:

------------------

# Declared in /tmp/vagrant-chef-1/chef-solo-1/cookbooks/apache2/recipes/default.rb:20:in `from_file'

package("apache2") do
  package_name "httpd"
  retries 0
  recipe_name "default"
  cookbook_name :apache2
  version "2.2.15-15.el6.centos.1"
  action :install
  retry_delay 2
end

[2013-02-01T11:00:56+00:00] ERROR: Running exception handlers
[2013-02-01T11:00:56+00:00] ERROR: Exception handlers complete
[2013-02-01T11:00:56+00:00] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[2013-02-01T11:00:56+00:00] FATAL: Chef::Exceptions::Exec: package[apache2] (apache2::default line 20) had an error: Chef::Exceptions::Exec:  returned 1, expected 0
Chef never successfully completed! Any errors should be visible in the
output above. Please fix your recipes so that they properly complete. 
```

我注释掉了 Apache2 配方并试图只安装 PHP，但这给出了同样的错误。然而，MYSQL 配方可以正常工作并且安装得很好

基本盒子是用 Veewee 创建的`CentOS-6.3-i386-minimal`，这是我使用的配方：

```
include_recipe "yum"
include_recipe "apache2"
include_recipe "apache2::mod_php5"
include_recipe "apache2::mod_rewrite"
include_recipe "php"
include_recipe "php::module_mysql"
include_recipe "mysql::server" 
```

所有使用过的食谱都是最新的`opscode-cookbooks`。我不知道如何解决这个问题，是 yum 找不到软件包的错误，还是 de cookbook 中的一些错误安装代码？

以前安装的 Debian 盒子和相同的食谱（Apt 而不是 Yum）可以正常工作。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:46:26.157

感谢@DracoAter 的救命建议。

SSH`d 进入 vagrant 并尝试使用 yum 手动安装软件包。这给出了以下错误：

```
error: unpacking of archive failed on file /var/www/icons/poweredby.png;510bc31b: cpio: symlink 
```

我有这个`Vagrantfile`：

```
config.vm.share_folder "www", "/var/www", "./www" 
```

这显然阻止了从 yum 访问该目录。因此，删除该行修复了`httpd`.

# python - Python：当调用的函数依赖于文件时使用多处理

> ID：14645231
> 
> 赞同：0
> 
> 时间：2013-02-01T11:23:48.027
> 
> 标签：python

我有一个非常旧的 fortran 文件，它对我来说太复杂了，无法转换成 python。所以我必须编译文件并通过python运行它。

要使 fortran 文件正常工作，它需要文件中 3 行上的 3 个输入值`mobcal.run`。它们如下：

```
line 1 - Name of file to run
line 2 - Name of output file
line 3 - random seed number 
```

我更改函数中每个工人的输入值`run()`。当我运行我的脚本时（见下文），只创建了 2 个输出文件，但我通过`top`命令发现了所有 32 个处理器都在运行

我猜问题就在这里，是没有足够的时间`mobcal.run`为每个工人更改文件。

到目前为止，我想出的唯一解决方案是将 a放在函数`time.sleep(random.randint(1,100))`的开头。`run()`但是我觉得这个解决方案不是很优雅，并且可能并不总是有效，因为两个工人可能有相同的`random.randint`，有没有更 Pythonic 的方法来解决这个问题？

```
def run(mfj_file):
        import shutil
        import random
        import subprocess
        #shutil.copy('./mfj_files/%s' % mfj_file, './')
        print 'Calculating cross sections for: %s' % mfj_file[:-4]
        with open('mobcal.run', 'w') as outf:
                outf.write(mfj_file+'\n'+mfj_file[:-4]+'.out\n'+str(random.randint(5000000,6000000)))

        ccs = subprocess.Popen(['./a.out'])
        ccs.wait()

        shutil.move('./'+mfj_file[:-4]+'.out', './results/%s.out' % mfj_file[:-4])

def mobcal_multi_cpu():
        from multiprocessing import Pool
        import os
        import shutil
        mfj_list = os.listdir('./mfj_files/')

        for f in mfj_list:
                shutil.copy('./mfj_files/'+f, './')

        if __name__ == '__main__':
                pool = Pool(processes=32)              
                pool.map(run,mfj_list)       

mobcal_multi_cpu() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:35:49.720

我假设您`a.out`在当前工作目录中查找它的`mobcal.run`. 如果您在它自己的目录中运行每个实例，那么每个进程都可以拥有它自己的`mobcal.run`，而不会破坏其他进程。这不一定是最 Pythonic 的方式，但它是最统一的。

```
import tempfile
import os

def run(mjf_file):
    dir = tempfile.mkdtemp(dir=".")
    os.chdir(dir)

    # rest of function here
    # create mobcal.run in current directory
    # while changing references to other files from "./" to "../" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:30:57.787

创建几个目录，每个目录都有一个 mobcal.run，然后在其中运行你的 fortran 程序。

如果您在多处理中需要 sleep() ，那么您做错了。

# c# - 如何从带参数的线程返回值？

> ID：14645232
> 
> 赞同：1
> 
> 时间：2013-02-01T11:23:55.147
> 
> 标签：c#, multithreading

[从这里](https://stackoverflow.com/questions/1195896/c-sharp-threadstart-with-parameters)使用关于 lambda 运算符的答案，我有一个接受参数并且工作正常的线程。但是，我希望能够从线程中取回东西。这是代码的样子：

```
namespace Renamer
{
    class RenameThread
    {
        public Thread StartRename(bool commit, ICollection checkeditems, ArrayList rules)
        {
            var t = new Thread(() => doRename(commit, checkeditems, rules));
            t.Start();
            return t;

        }
        private void doRename(bool commit, ICollection checkeditems, ArrayList rules)
        {
            ArrayList filenames = new ArrayList();
            ArrayList newfilenames = new ArrayList();
            filenames.AddRange(checkeditems);
            //do stuff with filenames
            //I want to be able to return newfilenames (or perhaps some object that contains it)
        }
    }
} 
```

通过单击按钮调用它：

```
private void btnTest_Click(object sender, EventArgs e)
{
    RenameThread rt = new RenameThread();
    Thread renameThread = rt.StartRename(false, clbFiles.CheckedItems, rules);
    renameThread.Join();
} 
```

在 Java 中，我只是实现`Runnable`，所以如果我需要它们，我可以直接访问线程的成员和字段，但是由于我不能从那里继承，`Thread`所以我对我应该做什么有点茫然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:27:10.457

您将使用[Tasks](http://msdn.microsoft.com/en-us/library/dd460717.aspx)：

```
var renameTask = Task.Factory.StartNew(() => Rename(...)); 
```

`Join`您现在可以通过访问来等待任务完成，类似于您的`Result`：

```
var newFilenames = renameTask.Result; 
```

或者您可以异步执行此操作：

```
renameTask.ContinueWith(t => Console.WriteLine(t.Result)); 
```

我的回答假设这`Rename`是一个返回`string`.

# c# - 检测鼠标左键单击 Winform

> ID：14645233
> 
> 赞同：3
> 
> 时间：2013-02-01T11:23:57.907
> 
> 标签：c#, winforms

我想要做的是让我的winform在我点击我的winform时显示一个调试行。但是，当我这样做时，什么也没有发生。我知道如何让按钮/其他点击事件发生。但我需要的是能够点击我的winform中的任何地方。

在过去的一个小时里，我用谷歌搜索了这个，但看不到我做错了什么。据我所知，这段代码在检测鼠标点击时应该是正确的。此方法与 form1.cs 类一起保存：

```
private void mouseClick(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
        Trace.WriteLine("Mouse clicked");
} 
```

我试过设置刹车点，但也没有触发。我做错了什么？

很抱歉这个愚蠢的新手问题，但我对winform编程很陌生。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T11:30:48.973

使用 Visual Studio 内置的编辑器：

![在此处输入图像描述](../Images/579f37c91d73c9fa6df3de7753a5ce18.png)

1.  转到属性窗口（如果看不到，请按`Alt + Enter`）。
2.  选择事件图标（看起来像闪电）。
3.  **双击Click**右侧的空 ComboBox 。
4.  您将被带到一个空方法，您可以在其中放置代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-01T11:27:46.620

如何添加事件处理程序：

```
public Form1()
{
    InitializeComponent();
    // This line should you place in the InitializeComponent() method.
    this.MouseClick += mouseClick;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T11:30:18.557

方法本身是正确的。我认为您的实际问题是：您尚未将此方法添加到`MouseClick`事件中。

在 C#（以及大多数其他语言）中，事件由事件处理程序处理。Windows 窗体和控件包含控件中发生的所有事件的事件，例如`OnClick`或`OnResize`。您可以将方法附加到这些事件，当实际事件发生时，这些方法将自动被调用。只需将以下行添加到表单的构造函数、`Form_Load`-method、`InitializeComponent`-method 等：

```
this.MouseClick += mouseClick; 
```

现在，当`MouseClick`事件发生时，您的方法`mouseClick`将被自动调用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T11:29:56.783

我建议阅读 [Events C# Programming Guide](http://msdn.microsoft.com/en-gb/library/awbftdfh.aspx)。您需要像这样添加一个事件处理程序：

```
form1.MouseClick += mouseClick; 
```

# jquery - Select2 - 加载选项

> ID：14645234
> 
> 赞同：0
> 
> 时间：2013-02-01T11:23:57.517
> 
> 标签：jquery, jquery-select2

是否有任何本机方法可以在 select2 中添加加载器，同时通过 ajax 加载选项？

# jquery - CSS 属性未更新

> ID：14645242
> 
> 赞同：0
> 
> 时间：2013-02-01T11:24:19.047
> 
> 标签：jquery, css

我有一个带有 .toggle() 方法的代码，它工作得很好，但必须用 .on('click'..) 替换 .toggle() 才能稍后用 .off() 方法解除绑定。

这是使用 toggle() 方法的第一个代码：

```
 var befrestorex;
        var befrestorey;
        var befrestorew;
        var befrestoreh;
        var toggled =false;

    $('#restorebtndiv').toggle(
        function(){

        befrestorex = $('#windowdiv').css('left');
        befrestorey = $('#windowdiv').css('top');
        befrestorew = $('#windowdiv').css('width');
        befrestoreh = $('#windowdiv').css('height');

        windowScrollTopBrestore = $(document).scrollTop()+'px';
        console.log(windowScrollTopBrestore);

     $('#windowdiv').css({'left':'0px','top':windowScrollTopBrestore,'width':'100%','bottom':'50px','height':'100%'});  

        },function(){           

            $('#windowdiv').css({'left':befrestorex,'top':befrestorey,'width':befrestorew,'height':befrestoreh});

}); 
```

第二个代码是：

```
var befrestorex;
var befrestorey;
var befrestorew;
var befrestoreh;
var toggled =false;

$('#restorebtndiv').on('click', function(){

    console.log("function started ...");
    befrestorex = $('#windowdiv').css('left');
    befrestorey = $('#windowdiv').css('top');
    befrestorew = $('#windowdiv').css('width');
    befrestoreh = $('#windowdiv').css('height');

    if (!toggled){

           toggled=true;

        windowScrollTopBrestore = $(document).scrollTop()+'px';
        console.log(windowScrollTopBrestore);

        $('#windowdiv').css({'left':'0px','top': windowScrollTopBrestore,'width':'100%','bottom':'50px','height':'100%'});

    }
    else {          
           toggled=false;

           $('#windowdiv').css({'left':befrestorex,'top':befrestorey,'width':befrestorew,'height':befrestoreh});
           console.log(toggled);
    }
}); 
```

在 "else" 中， $('#windowdiv').css({'left':befrestorex,'top':befrestorey,'width':befrestorew,'height':befrestoreh}); 对匹配的 div 没有影响。它很奇怪，因为在第一个代码中它工作没有任何问题。我用谷歌搜索找到一种用 jquery 刷新 div 的方法，我找到了使用 .fadeIn('fast') 的解决方案，但它都不起作用。有人有想法吗？

# android - Android中的图像注释

> ID：14645243
> 
> 赞同：2
> 
> 时间：2013-02-01T11:24:24.803
> 
> 标签：android, android-camera, annotate, android-image

是否有任何库可用于在 android.xml 中注释图像。

我想知道我们如何注释从相机捕获的图像。

任何人都可以帮助解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:04:21.310

我刚刚完成了我在 Android 上的图像处理应用程序的工作。我的应用程序使用了名为 Leadtools 的库，它对我来说非常有用。我没有在我的应用程序中使用注释，但我看到他们的库中有相应的功能。你可能应该看看它，看看自己。希望这可以帮助。

# joomla - 如何在 joomla 2.5 中创建命中计数器模块？

> ID：14645245
> 
> 赞同：1
> 
> 时间：2013-02-01T11:24:30.323
> 
> 标签：joomla, joomla2.5, counter

如何在 joomla 2.5 中创建命中计数器模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:25:32.150

使用此扩展程序创建命中计数器

[模块命中计数器](http://extensions.joomla.org/extensions/site-management/analytics/visitors/20925)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T20:43:37.347

在生产中，Joomla 将启用缓存，这使得有必要使用 javascript 处理命中计数。

由于我们接受此限制，也许最好使用 piwik 等专用服务器，除了计算点击量之外，您还可以研究趋势、分析推荐、导航路径、站点停留时间等。

# c# - 创建像 Office 2010 这样的动画启动屏幕

> ID：14645252
> 
> 赞同：15
> 
> 时间：2013-02-01T11:24:57.990
> 
> 标签：c#, user-interface, splash-screen

如何使用 C# 创建类似于 Office 2010 中的动画启动屏幕？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T16:54:27.373

这是关于winforms或wpf的问题吗？

如果是关于 wpf：

动画启动屏幕只不过是在加载“主窗口”时显示的 wpf 窗口。如 wischi 所述，您可以使用 Expression Blend 设计此启动窗口。

你也可以看看这个[代码项目](http://www.codeproject.com/Articles/38291/Implement-Splash-Screen-with-WPF)。

用于创建某种加载动画：[A Simple WPF Loading Animation](http://elegantcode.com/2009/08/21/a-simple-wpf-loading-animation/)

只需创建一个带有在 xaml 中定义的动画的窗口，并在您的应用程序加载时显示它 -> 动画启动屏幕。

在 Winforms 中：

您可能必须重写窗体的绘制方法来创建动画。但它仍然显示另一个窗口，其中包含一个动画，而另一个窗口正在加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T14:57:58.703

我建议将**WPF**用于现代应用程序设计和闪屏问题。
Expression Blend 是用于创建动画和 xaml 设计的好工具。但是你也可以通过编写普通的 xaml 来设计动画

***Expression Blend 教程***
[使用 Expression Blend 的动画：如何创建](http://channel9.msdn.com/blogs/jennmar/animation-using-expression-blend-part-1-how-to-create-an-animation)
[动画 使用 Expression Blend 的动画：如何在事件上启动动画](http://channel9.msdn.com/blogs/jennmar/animation-using-expression-blend-how-to-start-animations-on-events)

***MSDN 信息***
[动画概述](http://msdn.microsoft.com/en-us/library/ms752312.aspx#introducinganimations)

使用 Winforms 会复杂得多。整个 GUI 由 CPU 渲染（不支持 GPU），但您可以创建自定义用户控件并覆盖`Paint`事件并使用 GDI 进行绘图，但这会比使用 wpf 复杂得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T08:27:29.613

如果你想制作像 Office 2010 这样的动态动画闪屏，我建议你使用**WPF**，永远不要考虑使用**WinForms**来使用代码制作动态动画！

但是，如果您确定要使用 WinForms，则必须很棘手，并使用以下技巧之一：

• 放置一个 Flash ActiveX 对象，并使用 Flash 制作动画，然后将它们链接在一起

• 如果您擅长**WPF**和**Silverlight**，您可以使用 Silverlight 制作动画并在 WebBrowser 控件中查看，您也可以使用 Flash 或**HTML5**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T12:07:52.717

启动画面的详细指南在这里： [eExample splashscreen](http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C)

[另一个例子](http://forum.junowebdesign.com/net-programming/29928-how-create-splash-screen-c.html)

虽然基础是：

1）创建一个启动画面，显示它，关闭/处理它

```
 private void SplashForm()
    {
    SplashForm newSplashForm = new SplashForm();
    newSplashForm.ShowDialog();
    newSplashForm.Dispose();
    } 
```

2）在单独的线程/后台工作人员上运行启动画面

```
 Thread t1 = new Thread(new ThreadStart(SplashForm));
        t1.Start();
        Thread.Sleep(5000); // 5 seconds
        t1.Abort();
        Thread.Sleep(1000); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-03T13:10:04.300

在 Winforms 中，最简单的方法是在初始屏幕上使用带有动画 Gif 的 PictureBox。

这种方式使您可以在动画上花费比代码更多的时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-21T09:24:55.723

在 WPF 中，只需右键单击项目 > 添加新项目 > 启动屏幕即可。[这](http://www.csharp-tutorials1.blogspot.com/2016/10/make-splash-screen-in-wpf-application-c.html)

是一个简单的例子来解释它。

# iphone - 选择不同 uitable 行的行时如何重新加载 uitable

> ID：14645257
> 
> 赞同：-1
> 
> 时间：2013-02-01T11:25:11.540
> 
> 标签：iphone, ios, objective-c, uitableview

I'm trying to reload a `UITableView`when the row of a different `UITableView's`row is selected. 我遇到的问题之一是两者的`UITableView's`观点相同。我想在 Table1 中进行选择以更改`NSMutableArray`用于填充 Table2 的选项。然后重新加载表。

目前它工作正常，但只有当应用程序重新启动（或视图从堆栈中弹出然后重新访问）并`viewWillAppear`再次被调用时

这是我的代码：

```
- (void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:NO];
    [self.navigationController setNavigationBarHidden:YES animated:NO];
    self.navigationController.toolbarHidden = YES;
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    // getting an NSString
    selectedTableString = [prefs stringForKey:@"selectedTableString"];
    if ([selectedTableString isEqualToString:@"Italy"]) {
        jsonStringCountry = @"http://****/v1/public/cities?country=it";
    }
    else if ([selectedTableString isEqualToString:@"Spain"]) {
        jsonStringCountry = @"http://****/v1/public/cities?country=es";
    }
    else if ([selectedTableString isEqualToString:@"UK"]) {
        jsonStringCountry = @"http://****/v1/public/cities?country=uk";
    }
    else if ([selectedTableString isEqualToString:@"Brazil"]) {
        jsonStringCountry = @"http://****/v1/public/cities?country=br";
    }
    NSLog(@"from two t selectedTableString %@",selectedTableString);

    // Download the yoodeal JSON
    NSString *jsonString = [NSString stringWithContentsOfURL:[NSURL URLWithString:jsonStringCountry] encoding:NSStringEncodingConversionAllowLossy|NSUTF8StringEncoding error:nil];
    NSLog(@"jsonStringCountry is %@", jsonStringCountry);
    NSMutableArray *itemsTMP = [[NSMutableArray alloc] init];

    // Create parser for the yoodeal api
    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:jsonString error:nil];
    itemsTMP = [results objectForKey:@"results"];
    self.displayItems = [itemsTMP copy];
} 
```

我的`UITableView`方法：

```
- (int)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}
- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [displayItems count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];
    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MainCell"];
    }

    // Get item from tableData
    NSDictionary *item = (NSDictionary *)[displayItems objectAtIndex:indexPath.row];
    cell.textLabel.text = [item objectForKey:@"name"];
    [cell.textLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 14.0f]];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:30:23.097

为表格视图创建出口

```
 [self.yourTableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:34:47.233

使用`[tablename reloadData];`点击。

当您更新 tableview 内容时，它不会刷新视图。只有重新加载视图控制器后，您才能看到更改。要立即更新表格，您需要调用上面的代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:35:20.803

您应该创建一个名为 UITableView 的属性，`secondTableView`然后使用`[secondTableView reloadData]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T11:54:11.697

您需要使用`UITablveView`. 方法是：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

当您单击 的行时，将调用此方法`UITableView`。按以下方式使用它：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   if(tableView == Table1)
   {
        //do the changes in array you want to do.
        [table2 reloadData];
   }
   else
   {
        //do the changes in array you want to do.
        [table1 reloadData];
   }
} 
```

# java - 共享偏好

> ID：14645258
> 
> 赞同：0
> 
> 时间：2013-02-01T11:25:13.550
> 
> 标签：java, android, sharedpreferences, android-preferences

我正在尝试在我的应用程序中使用 SharedPrefs，我只是想从单独的设置活动中检索电子邮件地址和密码。我已经实施

```
package com.overclockerz.webtest;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.EditText;

public class SettingScreen extends Activity {
    static EditText username;
    static EditText password;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.setting_screen);
    username = (EditText) findViewById(R.id.username);
    password = (EditText) findViewById(R.id.password);

    SharedPreferences settings =  
            getSharedPreferences("APP_PREFS", MODE_PRIVATE); 
    SharedPreferences.Editor prefEditor = settings.edit();
    prefEditor.putString("Username", username.getText().toString());
    prefEditor.putString("Password", username.getText().toString());
    prefEditor.commit();        

}

} 
```

我试图用包 com.overclockerz.webtest 检索；

```
import org.apache.http.util.EncodingUtils;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.CookieManager;
import android.webkit.WebSettings;
import android.webkit.WebSettings.LayoutAlgorithm;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class MainActivity extends Activity implements OnItemSelectedListener,
        OnClickListener {
String query = "fldUsername=" + username + "&fldPassword=" + password + "&ut=3";
String username = prefs.getString("Username");
String password = getText(R.id.password).toString();

    @SuppressLint("SetJavaScriptEnabled")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this); 
        // then you use
        prefs.getBoolean("keystring", true);
        //there are also methods to put strings,float, longs, ints

        WebView myWebView = (WebView) findViewById(R.id.webview);
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setUserAgentString("SMUK");
        //myWebView.setInitialScale(100);
        //myWebView.setPadding(0, 0, 0, 0);
        CookieManager.getInstance().setAcceptCookie(true);

        // webSettings.setUseWideViewPort(true);
        webSettings.setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);
        myWebView.setWebViewClient(new WebViewClient());
        myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                EncodingUtils.getBytes(query,"BASE64"));
        Toast.makeText(getApplicationContext(), query, Toast.LENGTH_LONG)
         .show();
        Spinner spinner = (Spinner) findViewById(R.id.menu_spinner);
        // Create an ArrayAdapter using the string array and a default spinner
        // layout
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.spinner_links,
                android.R.layout.simple_spinner_item);
        // Specify the layout to use when the list of choices appears
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        spinner.setAdapter(adapter);

        spinner.setOnItemSelectedListener(this);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        WebView myWebView = (WebView) findViewById(R.id.webview);
        // Check if the key event was the Back button and if there's history
        if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
            myWebView.goBack();
            return true;
        }
        // If it wasn't the Back key or there's no web page history, bubble up
        // to the default
        // system behavior (probably exit the activity)
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;

    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        WebView myWebView = (WebView) findViewById(R.id.webview);
        switch (arg2) {
        case 0:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView.loadUrl("http://test.schoolmilkuk.co.uk/parent-home");
            break;
        case 1:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView
                    .loadUrl("http://test.schoolmilkuk.co.uk/parent-change-pass");
            break;
        case 2:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView
                    .loadUrl("http://test.schoolmilkuk.co.uk/parent-add-child");
            break;
        case 3:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView
                    .loadUrl("http://test.schoolmilkuk.co.uk/parent-children-list");
            break;
        case 4:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView.loadUrl("http://test.schoolmilkuk.co.uk/parent-order");
            break;
        case 5:
            myWebView.clearCache(true);
            Toast.makeText(getApplicationContext(), "Cache Cleared :)",
                    Toast.LENGTH_LONG).show();
            break;
        default:
            myWebView.loadUrl("http://test.schoolmilkuk.co.uk/parent-home");
            break;
        }
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.settings_menu:
            startActivity(new Intent(this, SettingScreen.class));
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

} 
```

String username = prefs.getString("Username", "Username") 没有意义，因为它没有使用用户设置的变量，因为您提供了“用户名”？我很困惑。

**在遵循 Blackbelt 的建议**（**非常感谢**）之后，我将代码修改为，我看到一个空指针异常？

```
package com.overclockerz.webtest;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.EditText;

public class SettingScreen extends Activity {
    static EditText username;
    static EditText password;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.setting_screen);
        username = (EditText) findViewById(R.id.username);
        password = (EditText) findViewById(R.id.password);

        SharedPreferences settings =  
                getSharedPreferences("APP_PREFS", MODE_PRIVATE); 
        SharedPreferences.Editor prefEditor = settings.edit();
        prefEditor.putString("Username", username.getText().toString());
        prefEditor.putString("Password", username.getText().toString());
        prefEditor.commit();        

    }

}

package com.overclockerz.webtest;

import org.apache.http.util.EncodingUtils;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.CookieManager;
import android.webkit.WebSettings;
import android.webkit.WebSettings.LayoutAlgorithm;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class MainActivity extends Activity implements OnItemSelectedListener,
        OnClickListener {
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
String username = prefs.getString("Username", "default");
String password = prefs.getString("Password", "default");

String query = "fldUsername=" + username + "&fldPassword=" + password + "&ut=3";
    @SuppressLint("SetJavaScriptEnabled")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView myWebView = (WebView) findViewById(R.id.webview);
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setUserAgentString("SMUK");
        //myWebView.setInitialScale(100);
        //myWebView.setPadding(0, 0, 0, 0);
        CookieManager.getInstance().setAcceptCookie(true);

        // webSettings.setUseWideViewPort(true);
        webSettings.setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);
        myWebView.setWebViewClient(new WebViewClient());
        myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                EncodingUtils.getBytes(query,"BASE64"));
        Toast.makeText(getApplicationContext(), query, Toast.LENGTH_LONG)
         .show();
        Spinner spinner = (Spinner) findViewById(R.id.menu_spinner);
        // Create an ArrayAdapter using the string array and a default spinner
        // layout
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.spinner_links,
                android.R.layout.simple_spinner_item);
        // Specify the layout to use when the list of choices appears
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        spinner.setAdapter(adapter);

        spinner.setOnItemSelectedListener(this);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        WebView myWebView = (WebView) findViewById(R.id.webview);
        // Check if the key event was the Back button and if there's history
        if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
            myWebView.goBack();
            return true;
        }
        // If it wasn't the Back key or there's no web page history, bubble up
        // to the default
        // system behavior (probably exit the activity)
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;

    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        WebView myWebView = (WebView) findViewById(R.id.webview);
        switch (arg2) {
        case 0:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView.loadUrl("http://test.schoolmilkuk.co.uk/parent-home");
            break;
        case 1:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView
                    .loadUrl("http://test.schoolmilkuk.co.uk/parent-change-pass");
            break;
        case 2:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView
                    .loadUrl("http://test.schoolmilkuk.co.uk/parent-add-child");
            break;
        case 3:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView
                    .loadUrl("http://test.schoolmilkuk.co.uk/parent-children-list");
            break;
        case 4:
            myWebView.postUrl("http://test.schoolmilkuk.co.uk/parents-login",
                    EncodingUtils.getBytes(query,"BASE64"));
            myWebView.loadUrl("http://test.schoolmilkuk.co.uk/parent-order");
            break;
        case 5:
            myWebView.clearCache(true);
            Toast.makeText(getApplicationContext(), "Cache Cleared :)",
                    Toast.LENGTH_LONG).show();
            break;
        default:
            myWebView.loadUrl("http://test.schoolmilkuk.co.uk/parent-home");
            break;
        }
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.settings_menu:
            startActivity(new Intent(this, SettingScreen.class));
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:31:45.720

`PreferenceManager.getDefaultSharedPreferences`

和

```
SharedPreferences settings =  
            getSharedPreferences("APP_PREFS", MODE_PRIVATE); 
```

返回不同的东西。

前者将使用默认文件名（类似于您的包名），后者将需要一个名称。所以不要混淆。的第二个参数`getString()`是默认值。例如，您可以使用它来检查某些调味品是否不符合要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:28:56.173

[重新阅读getString](http://developer.android.com/reference/android/content/SharedPreferences.html#getString%28java.lang.String,%20java.lang.String%29)的文档。它`defValue`仅在首选项中没有值时返回。`null`您可以作为第二个参数传递。如果你得到`null`它意味着还没有设置用户名。
此外，您应该将用户名保存到某些操作的首选项中，而不是`onCreate`. 例如，创建按钮“OK”并`onClick`为该按钮保存用户名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T07:55:02.357

如果您需要多个共享首选项，请在其中输入一些名称。

```
SharedPreferences sp = getApplication().getSharedPreferences("someName", Context.MODE_PRIVATE); 
```

如果你只需要一个

```
SharedPrefrences sp = PreferenceManager.getDefaultSharedPreferences(this); 
```

# ruby-on-rails - 使用 Elasticsearch 的多方面过滤器

> ID：14645259
> 
> 赞同：3
> 
> 时间：2013-02-01T11:25:16.583
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, elasticsearch, tire

如何将多个过滤器应用于刻面（使用轮胎宝石）？我有一个代码：

```
facet "packages" do
  terms :package
  facet_filter :terms, producer: [*params[:producer]] if params[:producer].present?
  facet_filter :terms, category_id: [*params[:category_id]] if params[:category_id].present?
end 
```

但它似乎只应用最后一个过滤器。但我需要他们两个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T04:45:46.873

尝试这个

```
my_filter = []
my_filter << {:terms => {:producer => [*params[:producer]] }} if params[:producer].present?
my_filter << {:terms => { :producer => [*params[:category_id]] }} if params[:category_id].present?

facet "packages" do
  terms :package
  facet_filter :and, my_filter
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-22T11:23:37.703

```
my_filter = []
my_filter << {:term => {:producer => params[:producer] }} if params[:producer].present?
my_filter << {:term => {:category_id => params[:category_id] }} if params[:category_id].present?

facet "packages" do
  terms :package
  facet_filter(:and, my_filter) if my_filter.present?
end 
```

# php - Phalcon\Mvc\Model findBy*** 静态方法

> ID：14645263
> 
> 赞同：1
> 
> 时间：2013-02-01T11:25:34.890
> 
> 标签：php, phalcon

今天我发现我的模型对象有 findBy{property} 之类的方法。（我正在使用 phalcon 0.9.0）

例如，我有带有 id、code、name 属性的模型语言。对于每个我都可以调用方法，例如`Language::findByCode('en');`或 `Language::findByName('English');`

这是令人难以置信的美妙。我可以在我的项目中使用它吗（它足够大，所以我不想以后重写代码）？我的意思是这些静态方法将来会出现吗？

有没有关于这些方法的文档？我找不到关于此的此类文档:((

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:14:41.757

此功能已在 0.9.0 中引入，仍处于 Beta 阶段。

0.9.0 的文档可以在[这里](http://docs.phalconphp.com/en/0.9.0/index.html)找到。但是，由于 0.9.0 尚未标记为稳定，因此相关文档版本还有待完成。

# input - Safari 选项错误抑制标签

> ID：14645264
> 
> 赞同：1
> 
> 时间：2013-02-01T11:25:35.907
> 
> 标签：input, safari, label, option

我在 chrome 上设计了一个带有选项的表单，它在 firefox、webkit nightly builds 和 IE10 以及内置的 coda 浏览器上也能正常工作。我在 Safari 中发现了一个奇怪的错误。通过加载预先检查的选项，它看起来像这样： [在更改选项之前查看所有 webkit 浏览器和 safari](http://duotones.ch/media/img/1.png)

选择“专业”选项后，奇怪的是，它只改变了标签背景颜色和文本颜色的一半，这只发生在 safari 中： [选择另一个选项后的 Safari](http://duotones.ch/media/img/2.png)

在不隐藏 input="option" 字段的情况下，它可以很好地呈现。

但是，我不想显示选项输入本身，而只显示标签。

我尝试了一切，从显示：无，将其绝对定位到开箱即用，到可见性：隐藏，到像 Option-width 和 height 到 0px 等的黑客攻击，等等。

有没有人碰巧遇到这个并找到了解决方案或解决方法？

当前的 HTML 代码如下所示：

```
<div id="modules">
<fieldset class="pd3m gr group_modul">
<div class="g3 option">
<input id="Customer_modul_basic" value="basic" checked="checked" type="radio" name="Customer[modul]" />
<label for="Customer_modul_basic">Basic</label><div class="sub"> 
```

当前的 CSS：

```
.option label {
  border-bottom: 1px solid grey;
  display: block;
  padding: 7px 15px 4px;
  font-size: 20px;
  line-height: 32px;
}

.option input[type="radio"] {
  display: none;
}

.option input[type="radio"]:checked + label {
  background: #b8c102;
  -webkit-box-shadow: 0px 4px 0px 0px #888f01;
  -moz-box-shadow: 0px 4px 0px 0px #888f01;
  box-shadow: 0px 4px 0px 0px #888f01;
  border-bottom: 1px solid #888f01;
  color: white;
  text-shadow: 0px 4px 0px #888f01; 
```

编辑，针对这种情况解决：我能够避免这个错误。对于这个特定的用例，Safari 似乎在“过渡：全部”方面存在问题。在指定应在过渡中包含哪些属性并删除“全部”后使其正常工作。我想这在大多数情况下应该有效，必须有一个属性在这种情况下会导致转换问题，我不能说。

**如果有人遇到同样的问题，请准确说明您在过渡中想要什么。**

# magento - Magento：我应该把那个功能放在哪里？

> ID：14645265
> 
> 赞同：1
> 
> 时间：2013-02-01T11:25:38.807
> 
> 标签：magento

我有一个带有按钮和一些字段的 Magento 表单。按钮单击调用一个控制器，在控制器中我查询数据库（使用 fetchAll）并从结果中创建一个 csv 文件。

存储数据库操作和 CSV 文件创建的最佳位置是什么？也许在模型中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:19:32.060

我将为您需要导出的数据创建一个模型、一个资源模型和一个资源模型集合。在集合中，我将定义从一个或多个（如有必要）表中查询数据的功能。在模型本身中，我将创建一个函数来获取该集合并将其保存到 CSV 文件中。控制器操作将仅包含模型初始化和对导出函数的调用。

# c++ - glScissor() 在另一个 glScissor() 中调用

> ID：14645266
> 
> 赞同：7
> 
> 时间：2013-02-01T11:25:39.133
> 
> 标签：c++, user-interface, opengl

我`glScissor()`在我的应用程序中使用它并且它工作正常，但我遇到了一个问题：我有我的`Window`对象，其绘图区域由该区域指定`glScissor()`并在该区域内，我正在绘制我的`ListView`对象，其绘图区域也应指定为`glScissor()`因为我不想全部画出来。

在代码中，我可以将其表示为：

```
Window::draw() 
{
   glEnable(GL_SCISSOR_TEST);
    glScissor(x, y, width, height);
        // Draw some components...
        mListView.draw(); // mListView is an object of ListView type
   glDisable(GL_SCISSOR_TEST);
}

ListView::draw()
{
  glEnable(GL_SCISSOR_TEST);
    glScissor(x, y, width, height);
        // Draw a chosen part of ListView here
   glDisable(GL_SCISSOR_TEST);
} 
```

但当然在这种情况下启用/禁用调用是错误的：

```
glEnable(GL_SCISSOR_TEST);
   glEnable(GL_SCISSOR_TEST);
   glDisable(GL_SCISSOR_TEST);
glDisable(GL_SCISSOR_TEST); 
```

如果我删除那些内部 glEnable/glDisable 调用（ListView 中的调用），我无论如何都会得到两个 glScissor() 调用，这似乎也是错误的。

# 编辑

我想以某种方式实现这两种剪刀效果，我的意思是 - Window 应该只在它的剪刀区域中绘制，而内部 ListView 也只能在它的剪刀区域中绘制。

正如您在图片中看到的，我用红色矩形标记了`Window`WORKS 的剪刀区域，用蓝色矩形标记了我想在其上绘制`ListView`. 这就是我尝试使用嵌套剪刀的原因，但我知道它没用。所以基本上我的问题是，实现这一目标的最佳方法是什么？

![在此处输入图像描述](../Images/73aab9ce026e0ae0c6aa532c81929b02.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T12:14:51.517

`glScissor`由于 OpenGL 是一个状态机，并且与任何其他状态一样，在下次调用时会覆盖 scissor rect，因此您必须在绘制列表视图后正确恢复窗口的 scissor rect。这可以通过让窗口管理它来完成：

```
Window::draw() 
{
    // draw some components with their own scissors
    mListView.draw(); // mListView is an object of ListView type

    glScissor(x, y, width, height);
    glEnable(GL_SCISSOR_TEST);
        // draw other stuff using window's scissor
    glDisable(GL_SCISSOR_TEST);
} 
```

但是让各个组件自己恢复剪刀状态可能更灵活，尤其是在以这种分层方式使用时。为此，您可以使用已弃用的`glPush/PopAttrib`函数来保存和恢复剪刀矩形：

```
ListView::draw()
{
    glPushAttrib(GL_SCISSOR_BIT);
    glEnable(GL_SCISSOR_TEST);
    glScissor(x, y, width, height);
        // Draw a chosen part of ListView here
    glDisable(GL_SCISSOR_TEST);
    glPopAttrib();
} 
```

或者你自己保存并恢复剪刀状态：

```
ListView::draw()
{
    // save
    int rect[4];
    bool on = glIsEnabled(GL_SCISSOR_TEST);
    glGetIntegerv(GL_SCISSOR_BOX, rect);

    glEnable(GL_SCISSOR_TEST);
    glScissor(x, y, width, height);
        // Draw a chosen part of ListView here

    // restore
    glScissor(rect[0], rect[1], rect[2], rect[3]);
    if(!on)
        glDisable(GL_SCISSOR_TEST);
} 
```

当然，这可以通过一个不错的 RAII 包装器实现自动化，但您可以免费练习。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T11:33:46.133

**编辑**：一般情况。

每次使用 设置剪刀状态时`glScissor`，都会设置剪刀状态。它不嵌套，也不堆叠，因此您不能通过对`glScissor`. 您必须手动计算`ListView`您的边界矩形和`Window`边界矩形的矩形交集，然后在绘图时对其进行剪裁`ListView`。

在一般情况下，您将手动维护一堆剪刀矩形。在绘制每个子元素时，将子元素的边界矩形与堆栈的当前顶部相交，并将其用作该子元素的剪刀。绘制子项时将新的子矩形推入堆栈，并在返回层次结构时将其弹出。

如果您将其他内容绘制到`Window`，您还必须确保正确处理过度绘制；通过设置 Z 排序并启用深度缓冲，或者通过禁用深度缓冲并从后到前绘制内容。Scissoring 不会帮助您掩盖`Window`后面的内容`ListView`，因为 scissors 只能是矩形区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:30:52.507

OpenGL是一个状态机。您可以根据需要随时调用 glScissor、glEnable 和 glDisable。它们不像必须匹配的开闭大括号。如果你的电话像这样“折叠”，那没问题。只是不要指望一把剪刀会与另一把剪刀合并；它只会更改/覆盖以前的设置。

# android - 地理编码服务不可用

> ID：14645267
> 
> 赞同：0
> 
> 时间：2013-02-01T11:25:39.010
> 
> 标签：android, google-maps, reverse-geocoding

我正在使用**Emulator Google api**（Google 公司）。我想获取给予者地理点的地址。但我收到此“*服务不可用*”错误。我目前处于 api 级别 10。有人告诉我关于模拟器上的这个错误。但我不认为它在我的模拟器上，因为内置的地图应用程序运行良好。

这是我从点获取位置的代码：

```
GeoPoint point = mapView.getProjection().fromPixels(
                        (int) e.getX(), (int) e.getY());
                Geocoder coder = new Geocoder(GoogleMaps.this, Locale.ENGLISH);
                try {
                    List<Address> addresses = coder.getFromLocation(
                            point.getLatitudeE6() / 1E6,
                            point.getLongitudeE6() / 1E6, 1);
                    String address = "";
                    Address a = addresses.get(0);
                    Toast.makeText(GoogleMaps.this, a.getCountryName(), 300)
                            .show();
                } catch (IOException e1) {
                    Toast.makeText(GoogleMaps.this, e1.getMessage(),
                            Toast.LENGTH_LONG).show();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:44:11.117

你可以试试这个：

```
private String getAddress(double LATITUDE, double LONGITUDE){
        String strAdd = "";
        Geocoder geocoder = new Geocoder(context, Locale.getDefault());
        try {
            List<Address> addresses = geocoder.getFromLocation(LATITUDE, LONGITUDE, 1);

            if(addresses != null) {
                Address returnedAddress = addresses.get(0);
                StringBuilder strReturnedAddress = new StringBuilder("");
                for(int i=0; i<returnedAddress.getMaxAddressLineIndex(); i++) {
                    strReturnedAddress.append(returnedAddress.getAddressLine(i)).append("\n");
                }
                strAdd = strReturnedAddress.toString();
                MLog.v("My Current loction address", ""+strReturnedAddress.toString());
            }
            else{
                MLog.v("My Current loction address", "No Address returned!");
            }
        } catch (Exception e) {
            e.printStackTrace();
            MLog.v("My Current loction address", "Canont get Address!");
        }
        return strAdd;
    } 
```

# c# - Window 8 通过 FormsAuthentication 使用 SharePoint REST 接口？

> ID：14645268
> 
> 赞同：2
> 
> 时间：2013-02-01T11:26:07.847
> 
> 标签：c#, sharepoint, windows-8, form-authentication, networkcredentials

我创建了一个示例 Windows 8 应用程序，使用 REST API 获取 SharePoint 2010 列表数据，例如 _vti_bin/ListData.svc 我正在使用 NetworkCredential 访问列表，它工作正常。如何使用 FormsAuthentication 获得相同的结果？NetworkCredential 的代码：

```
 context = new CentralAdministrationDataContext(new Uri("http://<SharePoint_URL>/_vti_bin/ListData.svc"));
            NetworkCredential credentials = new NetworkCredential();
            context.UseDefaultCredentials = false;
            context.Credentials = new NetworkCredential("UserName", "Password"); 
```

# android - Android 问题中的 Spinner OnItemSelectedListener 方法

> ID：14645274
> 
> 赞同：1
> 
> 时间：2013-02-01T11:26:32.333
> 
> 标签：android, spinner

我的 xml 中有 3 个微调器。

```
1\. one is Product Name
2\. one is Product Quantity.
3\. and 3rd one is Discount 
```

现在，我为每个调用单独的侦听器..问题是我想使用项目数量来计算最终价格，我以相同的顺序调用了微调器，即我写了名称、数量和折扣..

即使我在 Discount Spinner 上面写了，最后还是调用了 Quantity 的侦听器..我不知道发生了什么..任何人都可以面对这个问题...请帮助我..

这是我的 Spinner 监听器：-

```
spnSelectItem.setOnItemSelectedListener(new OnItemSelectedListener() 
        {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3)
            {
                strItem=spnSelectItem.getItemAtPosition(arg2).toString();           }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });

          ///This method called last..
        spnQty.setOnItemSelectedListener(new OnItemSelectedListener() 
        {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3)
            {
                strQty=spnQty.getItemAtPosition(arg2).toString();

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
     ///This method called before spnQty ..
     spnItemDiscount.setOnItemSelectedListener(new OnItemSelectedListener()
        {
            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
            {
                disc=round(Double.parseDouble(spnItemDiscount.getItemAtPosition(arg2).toString().replace("%", "")));

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:41:38.847

为什么不创建一个单独的方法来执行所有计算，如下所示：

```
private void calculatePrice() {
        String strItem = spnSelectItem.getSelectedItem().toString();
        String qty = spnQty.getSelectedItem().toString();
        String discount = spnItemDiscount.getSelectedItem().toString().replace("%", "");

        //perform calculate and update UI as you like
    } 
```

然后要么为所有三个微调器创建一个侦听器，要么在所有这些微调器中调用它们，例如：

```
spnSelectItem.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {

            //do some work, update UI or reset qty and discount spinner or whatever
            strItem = spnSelectItem.getItemAtPosition(arg2).toString();

            //call calulcate method
            calculatePrice();
        }
    }); 
```

# android - 如何在android中突出显示选定的列表项？

> ID：14645275
> 
> 赞同：1
> 
> 时间：2013-02-01T11:26:36.130
> 
> 标签：android, android-listview, android-fragments, android-ui

在我的 android 应用程序中，我有每个列表项的列表视图和详细视图。对于平板电脑，我显示了项目的列表视图和所选项目的详细视图，如下所示。

![在此处输入图像描述](../Images/28c845570899b9bed705bd54e6038aaa.png)

所以我的问题是如何在用户单击列表项后突出显示所选项目。

我正在使用 BaseAdapter 加载列表视图。我该怎么做？

**编辑：**

是的，正如 chintan khetiya 提到的，我使用以下 xml 文件作为列表项的背景，但它不会使所选项目感到高兴。我错过了什么？

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item 
 android:state_selected="false"
    android:state_pressed="false" 
    android:drawable="@color/abs__background_holo_light" />
<item android:state_pressed="true" 
    android:drawable="@color/action_bar_blue" />
<item android:state_selected="true"
 android:state_pressed="false" 
    android:drawable="@color/action_bar_blue" />
</selector> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:32:47.023

**您的查询 ：**

> 我的问题是如何在用户单击列表项后突出显示所选项目。

我想你在问选择器。意味着如果列表行处于焦点状态，那么它应该与所有其他行看起来不同。当您按下或触摸行时也是如此。

为此，您必须在 Drawable 文件夹中创建[Selector.xml](https://stackoverflow.com/questions/2038040/android-listview-selector-color)文件，然后将该选择器文件放在列表行中

该文件应该具有不同的标签，`Focus-Click-Press`并根据状态更改 Drawable。

**更新 ：**

只需替换您的图标并保存在 Drawable 文件夹中。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Pressed -->
    <item android:drawable="@drawable/p_paly_press" android:state_pressed="true"/>

    <!-- selected -->
    <item android:drawable="@drawable/p_play" android:state_selected="true"/>

    <!-- focused -->
    <item android:drawable="@drawable/p_paly_press" android:state_focused="true"/>

    <!-- default -->
    <item android:drawable="@drawable/p_play"/>

</selector> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:02:47.707

类似于以下代码的代码可用于突出显示选定的项目，以确保如果其他方式不这样做您需要：

```
class Adapter extends ArrayAdapter<String> {

    private int selectedPos = -1;
    Drawable selectedBackground;

    public MainSelectAdapter(Context context, int textViewResourceId,
            List<String> objects) {
        super(context, textViewResourceId, objects);
        selectedBackground =
              context.getResources().getDrawable(R.color.selecteditembackground);
    }
    public void setSelectedPosition(int pos){
        selectedPos = pos;
        notifyDataSetChanged();
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = super.getView(position, convertView, parent);
        if (selectedPos == position) {
            v.setBackgroundDrawable(selectedBackground);
        } else {
            v.setBackgroundDrawable(null);
        }
        return v;
    }
} 
```

在主要活动中

```
 Adapter adapter = new Adapter(this, android.R.layout.simple_list_item_1,
    myItemsToShow);

  list = (ListView) findViewById(R.id.flows);
  list.setItemsCanFocus(true);
  list.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
  list.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    public void onItemClick(AdapterView<?> adapter, View view,
                int pos, long id) {
                adapter.setSelectedPosition(pos);
    }
  }); 
```

使用这种方法，您可以自己控制所选项目的突出显示，您有一个侦听器来捕获选择事件，并为自己设置所需的 Drawable。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:53:45.577

您可以在您的 styles.xml 中定义

```
 <style name="Theme.Base" parent="...">
        <item name="activatableItemBackground">@drawable/activatable_item_background</item>
    </style>

   <style name="ListItemContainerBase">
        <item name="android:background">?activatableItemBackground</item>
    </style> 
```

在 res/drawable 中定义 activatable_item_background.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/item_pressed" android:state_pressed="true" />
    <item android:drawable="@drawable/item_focused" android:state_focused="true" />
    <item android:drawable="@drawable/item_focused" android:state_selected="true" />
    <item android:drawable="@drawable/item_activated" android:state_activated="true" />
    <item android:drawable="@drawable/item_checked" android:state_checked="true" />
    <item android:drawable="@android:color/transparent" />
</selector> 
```

item_pressed, item_focused..... 是 res/drawable-xxx 中的图片

为视图中的每个项目定义如下布局：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    style="@style/ListItemContainerBase"> 
```

# java - 将日期转换为毫秒，给出错误的结果

> ID：14645276
> 
> 赞同：3
> 
> 时间：2013-02-01T11:26:39.273
> 
> 标签：java, date

我想将两个日期转换为毫秒，但是给定的结果是错误的，代码有什么问题吗？，否则如何解决...

```
GregorianCalendar c1 = new GregorianCalendar();
GregorianCalendar c2 = new GregorianCalendar();

c1.set(2013, 01, 31, 16, 44, 49);
c2.set(2013, 02, 01, 12, 59, 55);

System.out.println("c1 = "+c1.getTimeInMillis()+"\nc2 = "+ c2.getTimeInMillis());

output:
c1 = 1362300289619
c2 = 1362113995619 
```

计算时间后，它给出了这样的结果：`0Month -2Day -3Hour -44Min -54Sec` 这是错误的。并且必须是这样的：`0Month 0Day 20Hour 15Min 6Sec`.

c1 比 c2 大，因为它给出了错误的结果，但是为什么 c1 变得比 c2 大，在这种情况下无法计算两个日期之间的时间。如果有人知道请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T11:29:23.160

月份是从 0 开始的，因此在您的示例中，c1 是 2 月 31 日，这被解释为 3 月 3 日（2 月只有 28 天），而 c2 是 3 月 1 日。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T11:29:32.693

这段代码：

```
c1.set(2013, 01, 31, 16, 44, 49); 
```

正在尝试设置*2 月*31 日，因为 Java 月份是从 0 开始的。我怀疑你会在 3 月 3 日结束，即 2 月 28 日之后的 3 天。这显然是在 3 月 1 日之后，这就是你`c2`的目标。

来自以下文档[`Calendar.set`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#set%28int,%20int,%20int,%20int,%20int,%20int%29)：

> month - 用于设置 MONTH 日历字段的值。月份值从 0 开始。例如，0 表示一月。

每当您发现您的代码行为异常时，请*务必*检查您不确定 100% 的任何 API 调用的详细信息。

作为替代方案，我强烈建议您尽可能使用[Joda Time——它是一个](http://joda-time.sf.net)*更*明智的API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T16:24:21.207

> 谢谢你们的回复！现在解决的问题，只需从几个月中减去 1，在我不知道在 Java 中月份从零开始之前......这就是解决方法
> 
> c1.set(2013, (01-1), 31, 16, 44, 49);
> c2.set(2013, (02-1), 01, 12, 59, 55);

相反，您可以使用`java.util.Calendar`类上的常量，这将使您的代码更易于阅读。

```
c1.set(2013, Calendar.JANUARY, 31, 16, 44, 49);
c2.set(2013, Calendar.FEBRUARY, 01, 12, 59, 55); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:35:22.850

谢谢你们的回复！现在解决的问题，只需从几个月中减去 1，在我不知道在 Java 中月份从零开始之前......这是如何解决的：

```
c1.set(2013, (01-1), 31, 16, 44, 49);
c2.set(2013, (02-1), 01, 12, 59, 55); 
```

# android - 如何更改画布上的图片颜色

> ID：14645280
> 
> 赞同：1
> 
> 时间：2013-02-01T11:26:51.193
> 
> 标签：android, colors, bitmap, android-canvas, draw

我有一个带有背景图片的画布，我可以在上面写字、画线和放置较小的图片，以进行旋转、缩放等。我需要更改其中一个位图的颜色。我有一个看起来像这样的颜色选择器：

```
public void colorChanged(int color) {
    if (isText) {
        myView.setTextColor(color);
    } else if(isDrawing) {
        mPaint.setColor(color);
        myView.setPaint(mPaint);
    } else if(ispic) {
           //TODO
    }
} 
```

我尝试了与我所拥有的 isText 部分代码类似的东西，但它只会改变我放置的地方的行的颜色，或者移动我的图片（如果我不改变颜色，它当前是透明的）。

myView 是一个 CustomView，我有我的 onDraw 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:37:12.950

`ColorMatrix`您可以在 android 中使用更改位图的颜色。

访问[这篇文章](https://stackoverflow.com/questions/5699810/how-to-change-bitmap-image-color-in-android)了解更多信息。[这里的 ColorMatrix](http://www.java2s.com/Code/Android/2D-Graphics/ColorMatrixSample.htm)示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:40:17.403

# 选项1：

```
Paint p = new Paint(Color.RED);
ColorFilter filter = new LightingColorFilter(Color.RED, 1);
p.setColorFilter(filter); 
```

然后用那个`Paint`对象画。

# 选项 2：

```
 Bitmap sourceBitmap = BitmapFactory.decodeFile(imgPath);
    float[] colorTransform = {
            0, 1f, 0, 0, 0, 
            0, 0, 0f, 0, 0,
            0, 0, 0, 0f, 0, 
            0, 0, 0, 1f, 0};

    ColorMatrix colorMatrix = new ColorMatrix();
    colorMatrix.setSaturation(0f); //Remove Colour 
    colorMatrix.set(colorTransform); //Apply Red say

    ColorMatrixColorFilter colorFilter = new ColorMatrixColorFilter(colorMatrix);
    Paint paint = new Paint();
    paint.setColorFilter(colorFilter);   

    Display display = getWindowManager().getDefaultDisplay(); 

    Bitmap resultBitmap = Bitmap.createBitmap(sourceBitmap, 0, (int)(display.getHeight() * 0.15), display.getWidth(), (int)(display.getHeight() * 0.75));            

    Canvas canvas = new Canvas(resultBitmap);
    canvas.drawBitmap(resultBitmap, 0, 0, paint); 
```

# javascript - 如何用指定语言替换谷歌网站下拉菜单

> ID：14645283
> 
> 赞同：0
> 
> 时间：2013-02-01T11:27:00.433
> 
> 标签：javascript, google-translate

> 我已将谷歌网站翻译器与我的网站集成，但我只需要在下拉列表中使用英语和法语。如何更改下拉列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:49:50.663

我们必须添加 includeLanguages: 'en,fr' 如下所述...

```
<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',includedLanguages: 'en,fr', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:29:45.937

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'ar', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
}
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

# jsf - 如何在jsf中重置？

> ID：14645285
> 
> 赞同：3
> 
> 时间：2013-02-01T11:27:06.900
> 
> 标签：jsf, liferay, facelets, portlet

我正在使用 liferay 和 jsf。在我的 portlet 中，我尝试在提交页面后通过为支持 bean 设置新值来进行重置。我得到了空白字段，但是当我刷新页面时，我再次获得了我之前提交的旧值，并且它再次使用旧值提交。

我试图获得新的 viewroot，但它也给了我相同的结果。

```
public void reset(AjaxBehaviorEvent event){

    FacesContext context = FacesContext.getCurrentInstance();
    Application application = context.getApplication();
    ViewHandler viewHandler = application.getViewHandler();
    UIViewRoot viewRoot = viewHandler.createView(context, context
            .getViewRoot().getViewId());
    context.setViewRoot(viewRoot);
    context.renderResponse(); //Optional

    this.MyBean = new MyBean();
} 
```

PS 提交后，我将此方法称为 reset(null);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:32:03.340

如果您希望在每次请求后重置 bean；在这种情况下，您可以使用 jsf 提供的范围，而不是使用该功能。

`request`在范围内使用 bean

[bean 范围教程](http://www.java-samples.com/showtutorial.php?tutorialid=472)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:44:03.467

似乎您的 bean 的范围既不是请求也不是视图范围，因为您希望它甚至在视图被销毁之前就被重置。

您可以`ConversationScoped`在开始对话时创建的 CDI 中使用，您可以通过调用将其标记为结束`conversation.end()`。

[JSF 2 ConversationScope 是如何工作的？](https://stackoverflow.com/questions/7788430/how-does-jsf-2-conversationscope-work)

或者，如果你想重置 View Scope bean，那么你也可以在 Ajax 事件中使用下面的方法，

```
Map<String, Object> viewMap = FacesContext.getCurrentInstance().
                              getViewRoot().getViewMap();
viewMap.put("MyBean",new MyBean()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T20:30:08.077

刷新不是问题，而是发送先前提交的数据的浏览器。我找到了一些非常好的解决方案。

*   来自 BalusC 博客[POST-Redirect-GET 模式](http://balusc.blogspot.in/2007/03/post-redirect-get-pattern.html)

*   来自 rohit salecha 博客[Liferay 刷新错误](http://www.rohitsalecha.com/370/java/liferay/liferay-refresh-bug/)

由于我使用的是 Liferay，所以我只需要放

```
<action-url-redirect>true</action-url-redirect> 
```

在 liferay-portlet.xml 像这样

```
<portlet>
<portlet-name>booksportlet</portlet-name>
<icon>/icon.png</icon>
<action-url-redirect>true</action-url-redirect>
<instanceable>false</instanceable>
</portlet> 
```

所以我选择了这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T11:38:49.120

这真的很简单：只需使用 @RequestScoped 和一个按钮进行注释：

```
@ManagedBean
@RequestScoped
public class MyBean{

public void resetEvent(ActionEvent actionEv) {
    }

} 
```

# python - Interact with a wxPython frame in both directions from another thread

> ID：14645295
> 
> 赞同：0
> 
> 时间：2013-02-01T11:27:48.047
> 
> 标签：python, multithreading, wxpython

I have already read [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks) [http://wiki.wxpython.org/CallAfter](http://wiki.wxpython.org/CallAfter) and searched a lot in Google but found no answer to my problem. Because in my opinion it would be to much code and it is more a theoretical problem, I hope it is ok without code.

What I want to do with an example: I have a grid (wx.grid) with check boxes in the main thread. Then I start a new thread (thread.start_new_thread) where I go through all rows (1 second per row) and check if the checkbox is set. If it is set, some job is done.

This is working, if I read out all rows **before** I start the thread. But I need to read it out **while** the thread is running, because the user should have the ability to uncheck or check another checkbox! But if I read it out in the new thread sometimes a "NonType Object is not callable" error is raised. I think because wx.CallAfter should be used to interact with the grid in the other thread. But CallAfter I can not use to get the return value.

I have no idea how to solve this issue. Perhaps some people with more thread experience have some idea? If you need additional data please ask, but I think that my example contains all necessary information.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T23:38:28.350

A common approach to this type of thing is to use a Queue.Queue object to pass commands to one or more worker threads. The worker thread(s) will wait on a pull from the queue until there are items in the queue ready to be pulled. Part of the command object could be a target in the GUI thread to send a message to (in a thread-safe way, like with wx.CallAfter) when the command is completed.

You should also take a look at the wx.lib.delayedresult module. It is similar to the above but a little more capable and robust.

# jquery - 使用 jquery 完全删除 href 链接

> ID：14645297
> 
> 赞同：1
> 
> 时间：2013-02-01T11:27:50.740
> 
> 标签：jquery

我为我的网站构建了一个 jquery 滑块。总共有 3 张幻灯片，每张幻灯片包含 30-40 张图片，链接到单独的页面。

我想完全删除未激活的幻灯片上的 href 链接，然后在幻灯片处于活动状态时再次添加它们。我尝试了几种方法，例如：

```
$('a').click(function(e){
e.preventDefault();
}); 
```

但这只会阻止链接点击，并不会真正删除它。

关于我能做什么的任何建议？

我想这样做的原因是因为谷歌不喜欢一个页面上超过 100 个内部链接，而我几乎有两倍！

谢谢，丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:31:36.323

请注意，谷歌会抓取原始代码，不会关注导致 js 操作的代码。

您可以在 dom 中不使用 href 开始，并拥有类似的东西

```
<a data-href="url"> 
```

当图像滑动事件触发时，您可以通过以下方式激活它：

```
$(this).attr('href', $(this).data('href')) 
```

或者您实际上可以在 dom 就绪时立即激活它们

```
$('#carousel a').each(function() {
    $(this).attr('href', $(this).data('href'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:30:15.023

我没有得到你的代码，你为什么要听点击事件？如果您不想停用它们，您可以`$("a").css("display","none");`稍后再将其重新设置。如果你不想完全删除 html，那就是`$("a").remove();`

无论如何，这对你没有帮助。Google 的索引器没有启用 javascript，您必须更改原始 html。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:40:09.633

如果由于某种原因您不能，请在当前活动的图像上尝试此操作

```
$("active image identifier selector a").attr("href", "link to add");
$("all images selector").not("active image identifier selector").find("a").removeAttr("href") 
```

请注意，使用 removeAttr 不会禁用链接，它会完全删除它，不确定这是否是您想要做的。只是为了确认一下，您是否要停用或删除链接。

e.preventDefault 仅禁用链接但不删除它。

假设您有第二张图像处于活动状态并且您执行类似 $("images a").attr("href", "link to add") 之类的操作，那么您如何知道要添加到该图像的链接以及之前的图像变成活动，因为您几乎丢弃了 href 属性。

我建议的一个解决方案是将链接存储在数据属性中，例如

```
//store href in link data for each link to be deactivated
$("all images selector").not("active image identifier selector").each(function(){

    var $this = $(this);

    //get url of link
    var url = $this.attr("href");

    //store url in a data attribute for that link
    $this.data("my-url", url);

    $(this).removeAttr("href");
});

//get data attribute of active image and readd href attribute
$("active image identifier selector a").attr("href", $("active image identifier selector a").data("my-url")); 
```

试试这个，让我知道这是否有帮助。请注意，这不是最有效的方法。可能有更多优化的函数来循环链接，但我假设你首先要让它工作。

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:33:55.730

在**href**用户中使用**javascript:void(0)**将不会转到下一页，并且页面中不再使用 url。

 **试试这个代码：

```
$('a').click(function(e){
    $(this).attr("href","javascript:void(0)");
}) 
```**

# iphone - Xcode 不显示 iPhone 名称

> ID：14645310
> 
> 赞同：1
> 
> 时间：2013-02-01T11:28:57.443
> 
> 标签：iphone, ipad, ios6, xcode4.5

我有奇怪的问题。

我用 iOS 6.0 的部署目标制作了应用程序

我的 Mac 上安装了带有 XCode 4.5 的 iOS 6.1 的 iPhone 4s。XCode 看不到我的设备。它像往常一样说“iOS 设备”而不是“krunal 的 iPhone”。（我确定该设备已连接，因为我在 iTunes 中看到它。）XCode 拒绝在设备上启动我的应用程序。它说：

```
"The version of iOS on “krunal’s iPhone” is not supported by this installation of the iOS SDK. Please restore the device to a version of the OS listed below, or update to the latest version of the iOS SDK" 
```

**请帮忙..**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:33:28.660

升级到 Xcode 4.6，其中包括对 iOS 6.1 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:38:00.267

转到管理器并选择您的设备并标记您的设备进行开发，这应该可以。

# cxf - Camel CXF 抛出 AssertionBuilderRegistryImpl 异常

> ID：14645311
> 
> 赞同：1
> 
> 时间：2013-02-01T11:28:57.313
> 
> 标签：cxf, apache-camel

无法弄清楚这是怎么回事 - 试图设置一个路由来只看到 cxf 连接到一个肥皂网络服务（我不关心实际数据，也不期望数据真正“工作”，但是它不断抛出我不明白的异常：

我想知道我是否正确配置它。我在想它可能是一个丢失的 jar，但是当我尝试引入其他 jar 时导致依赖冲突

我正在使用 Maven 依赖项“camel-cxf”来加载我所有的 jar 配置

“原因：org.apache.cxf.bus.extension.ExtensionException：无法加载扩展类 org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl。”

确切的错误是

“无法为端点创建生产者：端点[cxf://http://wsf.cdyne.com/WeatherWS/Weather.asmx?dataFormat=MESSAGE&portName=WeatherSoap&serviceClass=prototypes.CxfExample%24GetWeatherInformationSoapIn&serviceName=Weather&wsdlURL=http%3A%2F% 2Fwsf.cdyne.com%2FWeatherWS%2FWeather.asmx%3FWSDL]。原因：org.apache.cxf.bus.extension.ExtensionException：无法加载扩展类 org.apache.cxf.ws.policy.AssertionBuilderRegistryImpl。"

我用来导致这种情况的代码是

```
 camel.addComponent( "cxf", new CxfComponent() );

        camel.addRoutes( new RouteBuilder() {

            @Override
            public void configure() throws Exception {
                from( "timer://sometimer?delay=1s")
                .to( "cxf://http://wsf.cdyne.com/WeatherWS/Weather.asmx"
                     +"?wsdlURL=http://wsf.cdyne.com/WeatherWS/Weather.asmx?WSDL"
                     +"&dataFormat=MESSAGE"
                     +"&serviceClass=prototypes.CxfExample$GetWeatherInformationSoapIn"
                     +"&serviceName=Weather"
                     +"&portName=WeatherSoap"

                   );
            }
        });
        camel.start();
        Thread.sleep( 10000 );
        camel.stop(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:51:16.367

我想我已经“解决”了它-

mvn:camel-cfx 依赖不够

你也需要 mvn:neethi 依赖

AssertationBuildImpl 类从一个未包含在 mvn:camel-cfx 的 jar 集中的类扩展，这使得 AssertationBuildImpl 在 ide 中显示为已知类，但在运行时不会加载类

通过分析第三方的源代码，这是一个可怕的问题

# asp.net-mvc - 循环 IQueryable 元素不记得以前的结果

> ID：14645314
> 
> 赞同：0
> 
> 时间：2013-02-01T11:29:00.713
> 
> 标签：asp.net-mvc, linq-to-sql

我会尽量解释清楚，因为这很奇怪。

我有一个带有 Linq2SQL 的 .NET MVC 4 应用程序，我正在开发一个搜索，用户可以通过一个或多个不同的值来查找元素。

我有一个接收字符串的方法：“value1&value2|value3&value4”

我假装返回一个确定元素包含 value1 AND value2 或该确定元素包含 value3 AND value4 的结果。

我正在使用这样的算法：

```
if (!String.IsNullOrEmpty(figuresSelected)) {
    string[] groupsOR = figuresSelected.Split('|');
    IQueryable<CENTROSOPERACIONES> sqlAuxOr = null;
    foreach (string goupOR in groupsOR) {
        string[] groupsAND = groupOR.Split('&');
        IQueryable<CENTROSOPERACIONES>[] sqlAuxAnd = sql; //sql contains current query so far
        foreach (string group in groupsAND) {
            sqlAuxAnd = sqlAuxAnd.Where(o => o.CENTROS.FIGURASCENTROS.Any(f => f.FIGURAS.nombre == group));
        }
        if (sqlAuxAnd != null)
            if (sqlAuxOr == null)
                sqlAuxOr = sqlAuxAnd;
            else
                sqlAuxOr = sqlAuxOr.Union(sqlAuxAnd);
    }

} 
```

好吧，这里的问题是，在内循环内的每次迭代中，sqlAuxAnd 从 sql 上的原始数据容器查询，而不是从前一个循环获得的子结果查询。我已经通过迭代跟踪循环迭代，并且检查了 sqlAuxAnd 在第一次迭代中是否包含预期的子结果，但是当到达第二个迭代时，该值丢失并且来自整个数据的完整查询存储在其上。

我试图将 sqlAuxAnd 部分结果存储在不同的元素上（我使用了一个数组）并检查了它的演变。在第一次迭代中，sqlAuxAnd[0] 包含预期结果，而 sqlAuxAnd[1] 为空，在第二次迭代中，两个元素 sqlAuxAnd[0] 和 sqlAuxAnd[1] 包含从整个数据集中查询第二个值的预期结果。

看来我在这里失去了一些东西......可能这是微不足道的，但我想我太头晕了，看不到它。有人有什么想法可以分享吗？随时要求对此事进行解释，英语不是我的母语，我想这个问题可能没有得到应有的编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:52:05.027

您需要`group`从 foreach 中捕获变量：

```
foreach (string group in groupsAND) {
    var captured = group;
    sqlAuxAnd = sqlAuxAnd.Where(o => o.CENTROS.FIGURASCENTROS.Any(f => f.FIGURAS.nombre == captured));
} 
```

请参阅[foreach 循环中内置的 Linq 查询始终从上次迭代中获取参数值](https://stackoverflow.com/questions/295593/linq-query-built-in-foreach-loop-always-takes-parameter-value-from-last-iteration)。

# c# - 如何在 C# (.NET 4.5) 中为 HttpClient.GetAsync(URI) 创建回调？

> ID：14645316
> 
> 赞同：3
> 
> 时间：2013-02-01T11:29:12.110
> 
> 标签：c#, asynchronous, .net-4.5, dotnet-httpclient

我想为 Google 搜索创建一个简单的异步请求。

根据谷歌的说法，最简单的方法是使用他们的 JSON API 和简单的 curl 请求

```
curl -e http://www.my-ajax-site.com \ 'https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=Paris%20Hilton' 
```

我想提取结果的前 5 页并将每个结果的 URL 添加到数组中。我发现很难在 HttpClient.GetAsync 上找到任何解释清楚的教程。我没有比这更进一步的了：

```
public String[] search(String term = "")
{
    var rq = new HttpClient();
    var uri = new Uri("https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q=site:" + term);
    rq.GetAsync(uri);
} 
```

我想这应该启动一个任务，这样我就不会阻塞主线程，但是如何在请求完成时注册一个回调方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T11:37:29.443

由于 GetAsync 是您可以执行的任务

```
 rq.GetAsync(uri).ContinueWith((requestTask) => SomeMethod(requestTask);); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T11:37:56.777

```
HttpResponseMessage response = await rq.GetAsync(uri);

//put here your continuation logic. 
```

# java - 如何使用java从两个列表中获取不常见元素的列表？

> ID：14645319
> 
> 赞同：0
> 
> 时间：2013-02-01T11:29:24.340
> 
> 标签：java

我需要在比较两个列表时获取不常见元素的列表。前任：-

```
List<String> readAllName = {"aaa","bbb","ccc","ddd"};
List<String> selectedName = {"bbb","ccc"}; 
```

在这里，我想要另一个列表中的 readAllName 列表（“aaa”、“ccc”、“ddd”）中的不常见元素。不使用 remove() 和 removeAll()。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T11:31:57.040

假设预期的输出是`aaa, ccc, eee, fff, xxx`（所有不常见的项目），您可以使用[`List#removeAll`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#removeAll%28java.util.Collection%29)，但您需要使用它两次以获取 name 中但不在 name2 中的项目以及 name2 中而不是 name 中的项目：

```
List<String> list = new ArrayList<> (name);
list.removeAll(name2); //list contains items only in name

List<String> list2 = new ArrayList<> (name2);
list2.removeAll(name); //list2 contains items only in name2

list2.addAll(list); //list2 now contains all the not-common items 
```

* * *

根据您的编辑，您不能使用`remove`或`removeAll`- 在这种情况下，您可以简单地运行两个循环：

```
List<String> uncommon = new ArrayList<> ();
for (String s : name) {
    if (!name2.contains(s)) uncommon.add(s);
}
for (String s : name2) {
    if (!name.contains(s)) uncommon.add(s);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T11:53:33.003

您可以使用 Guava 库来执行此操作。[Sets](http://guava-libraries.googlecode.com/svn/tags/release04/javadoc/com/google/common/collect/Sets.html)类有一个[不同](http://guava-libraries.googlecode.com/svn/tags/release04/javadoc/com/google/common/collect/Sets.html#difference%28java.util.Set,%20java.util.Set%29)的方法

我认为您必须运行两次才能获得双方的所有差异。

# coldfusion - 无法获取模板的绝对路径

> ID：14645321
> 
> 赞同：1
> 
> 时间：2013-02-01T11:29:27.207
> 
> 标签：coldfusion

我无法获得当前模板的绝对路径。以下是我尝试过的功能：

```
#ExpandPath( "./" )#<br />
#GetCurrentTemplatePath()#<br />
#GetBaseTemplatePath()#<br />
#ExpandPath( CGI.script_name )#<br /> 
```

这是输出（所有相对路径）：

```
/var/www/html/
/var/www/html/testPaths.cfm
/var/www/html/testPaths.cfm
/var/www/html/testPaths.cfm 
```

我缺少 CFAdmin 中的某些设置吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T13:51:37.313

您返回的路径是绝对路径，但在 linux 服务器上，而不是 windows 服务器上。Linux 路径没有驱动器号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:04:22.630

当我查看我们开发服务器上的调试信息时，以下 cgi 变量具有您想要的内容。

CF_TEMPLATE_PATH=D:\DW\dwtest\Dan\testcf.cfm

PATH_TRANSLATED=D:\DW\dwtest\Dan\testcf.cfm

# ms-access - 访问数据类型转换

> ID：14645326
> 
> 赞同：1
> 
> 时间：2013-02-01T11:29:34.297
> 
> 标签：ms-access, type-conversion

我正在修改和扩展一个有点复杂的数据库模式，它有少量的表和查询，但它们密切相关。我遇到的唯一问题是，在其中一个表中，与另一个表相关的 2 个字段使用的是记录的字段名称，而不是记录的 ID。我将引用字段数据类型从文本更改为数字并输入了一些数据。查询和报告工作正常，但有 1 个例外：

有一份报告同时使用了两个引用字段。其中一个字段没问题，但另一个显示符号而不是数字。（我的示例条目中的 ID 是 14 和 20，显示的符号是双杠音符 /alt 代码 14/ 和段落结尾的符号 /alt 代码 20/ ）进一步调查我发现，如果我让包含报表查询源的查询显示两个字段都很好，但是如果我向该查询添加另一个表，则第二个字段再次显示符号而不是数字。

通过将这些字段转换回文本并将其他表中的 id 字段也转换为文本，我找到了解决此问题的方法。这个文本键可能会在以后困扰我，所以我想在为时已晚之前把它做好。

这是所有访问 2010 顺便说一句。源文件已经在 2010 年了（甚至无法在 2007 年打开）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:39:08.697

Sounds like a corruption issue for sure. I would try adding a new column and run an update query to populate it with the values from the old column (maybe use cint(indexfield)), then delete the old column.

It might also be a good idea to decompile the database. This often helps resolve corruption issues.

# ruby-on-rails - Foreman 无法启动 Nginx，但我可以手动启动它。为什么？

> ID：14645327
> 
> 赞同：6
> 
> 时间：2013-02-01T11:29:34.647
> 
> 标签：ruby-on-rails, ruby, process, nginx, foreman

我目前正在登台（Ubuntu）上运行[工头](https://github.com/ddollar/foreman)，一旦我开始工作，将切换到使用新贵。

我的 Procfile.staging 看起来像这样：

```
nginx: sudo service nginx start
unicorn: bundle exec unicorn -c ./config/unicorn.rb
redis: bundle exec redis-server
sidekiq: bundle exec sidekiq -v -C ./config/sidekiq.yml 
```

我可以使用以下方法成功启动 nginx：

```
$ sudo service nginx start 
```

但是，当我运行时`$ foreman start`，虽然其他三个进程成功启动，但 nginx 却没有：

```
11:15:46 nginx.1   | started with pid 15966
11:15:46 unicorn.1 | started with pid 15968
11:15:46 redis.1   | started with pid 15971
11:15:46 sidekiq.1 | started with pid 15974
11:15:46 nginx.1   | Starting nginx: nginx.
11:15:46 nginx.1   | exited with code 0
11:15:46 system    | sending SIGTERM to all processes
SIGTERM received
11:15:46 unicorn.1 | terminated by SIGTERM
11:15:46 redis.1   | terminated by SIGTERM
11:15:46 sidekiq.1 | terminated by SIGTERM 
```

**那么为什么由 Foreman 启动时 nginx 不启动呢？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T20:29:56.310

这是您的 Procfile 中的问题。

该`nginx`命令不能使用`sudo`inside `foreman`，因为它会`always ask for a password`然后它会失败。这就是为什么您没有开始`nginx`并且日志为空的原因。

如果你真的需要在 procfile 中使用 sudo ，你可以使用这样的东西：

```
sudo_app: echo "sudo_password" | sudo -S app_command
nginx: echo "sudo_password" | sudo -S service nginx start 
```

我真的不推荐。其他选择是打电话`sudo foreman start`

有关更多信息，请查看[github 上的此问题](https://github.com/ddollar/foreman/issues/14)，这正是您想要解决的问题。

如果它对你有用，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T15:20:31.950

您应该能够为本地用户添加无需密码的 sudo 访问权限，以允许管理此服务。这可能是一个很大的安全漏洞，但是如果您将可以运行的命令列入白名单，则可以大大降低风险。我建议为 services 命令添加无密码 sudoers 条目以及您想要编写的任何其他内容：

/etc/sudoers：

```
your_user_name       ALL = (ALL) NOPASSWD: /usr/sbin/service 
```

如果您对此不满意，另一种选择是直接运行 nginx，而不是通过服务管理器：

```
nginx: /usr/sbin/nginx -c /path/to/nginx.conf 
```

# ruby-on-rails-3.2 - Ruby on Rails：使用简单的 file_field 进行多次上传

> ID：14645328
> 
> 赞同：1
> 
> 时间：2013-02-01T11:29:36.363
> 
> 标签：ruby-on-rails-3.2

我有一个 Rails 应用程序需要具有多个文件上传功能，让用户在单个文件浏览器中选择多个文件，而不是为它们提供多个 file_field。

但是，我的工作仅适用于单个文件上传，但对于多个文件上传，只上传一个文件。

我可以将所有文件对象传递给 ruby​​ 吗？如果可能的话，我不想要任何插件，因为一个简单的界面对我来说就足够了。我只需要简单地将文件从客户端传递到服务器端，所以我不使用任何模型。谢谢你的帮助！

index.html.erb

```
<%= form_tag 'file_upload/upload', :multipart => true, :remote => true do %>
<%= file_field_tag "file", :id => "filesID", :multiple => true %><br/>
<%= submit_tag "Submit", :onclick => "return checkSize();"%>
<% end %> 
```

控制器

```
def upload
  file = params["file"]
  name = file.original_filename
  File.open(File.join("public/data/001", name), "wb") { |f| f.write(file.read) }    
end 
```

# r - R日期时间对齐和填充值

> ID：14645329
> 
> 赞同：7
> 
> 时间：2013-02-01T11:29:39.577
> 
> 标签：r, dataframe, vectorization

我有多个框架，假设为 2。每个框架包含 2 列 - 一个索引列和一个值列

```
sz<-5;
frame_1<-data.frame(index=sort(sample(1:10,sz,replace=F)),value=rpois(sz,50));
frame_2<-data.frame(index=sort(sample(1:10,sz,replace=F)),value=rpois(sz,50)); 
```

框架_1：

```
 index value
  1    49
  6    62
  7    58
  8    30
 10    50 
```

框架_2：

```
index value
  4    60
  5    64
  6    48
  7    46
  9    57 
```

目标是创建第三个框架 frame_3，其索引将是 frame_1 和 frame_2 中的并集，

```
frame_3<-data.frame(index = sort(union(frame_1$index,frame_2$index))); 
```

其中将包含两个额外的列，value_1 和 value_2。

frame_3$value_1 将从 frame_1$value 填写，frame_3$value_2 将从 frame_2$value 填写；

这些应该像这样填写：frame_3：

```
index value_1 value_2
1      49       NA
4      49       60     # value_1 is filled through with previous value
5      49       64     # value_1 is filled through with previous value
6      62       48     
7      58       46   
8      30       46     # value_2 is filled through with previous value
9      30       57     # value_1 is filled through with previous value
10     50       57     # value_1 is filled through with previous value 
```

我正在寻找一个有效的解决方案，因为我正在处理成千上万的记录

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T11:41:30.990

这个问题为`data.table`. 您可以使用循环来逐一递归地构造列`x[y, roll=TRUE]`。

```
require(data.table)
dt1 <- data.table(frame_1)
dt2 <- data.table(frame_2)
setkey(dt1, index)
setkey(dt2, index)
dt3 <- data.table(index = sort(unique(c(dt1$index, dt2$index))))
> dt1[dt2[dt3, roll=TRUE], roll=TRUE]

#    index value value.1
# 1:     1    49      NA
# 2:     4    49      60
# 3:     5    49      64
# 4:     6    62      48
# 5:     7    58      46
# 6:     8    30      46
# 7:     9    30      57
# 8:    10    50      57 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T14:00:23.080

如果您的 data.frames 不是很大，您可以`merge`结合使用 with `zoo::na.locf`。

```
R> library(zoo)
R> frame_3 <- merge(frame_1, frame_2, by="index",
+                  all=TRUE, suffixes=paste(".",1:2,sep=""))
R > (frame_3 <- na.locf(frame_3))
  index value.1 value.2
1     1      49      NA
2     4      49      60
3     5      49      64
4     6      62      48
5     7      58      46
6     8      30      46
7     9      30      57
8    10      50      57 
```

或者，假设您的“值”列都是一种类型（如矩阵，您不能在 zoo 对象中混合类型），则只需使用 zoo 对象。

```
R> z1 <- zoo(frame_1$value, frame_1$index)
R> z2 <- zoo(frame_2$value, frame_2$index)
R> (z3 <- na.locf(merge(z1, z2)))
   z1 z2
1  49 NA
4  49 60
5  49 64
6  62 48
7  58 46
8  30 46
9  30 57
10 50 57 
```

# rest - java.net.URISyntaxException：jQuery PHONEGAP 中 AJAX POST 调用中查询中的非法字符

> ID：14645337
> 
> 赞同：0
> 
> 时间：2013-02-01T11:30:10.900
> 
> 标签：rest, jquery, cordova, http-post

我正在使用下面的 ajax 调用调用我的 Restful webservice POST 方法。

```
var inputData = '{"country","India"}'
$.ajax( {
        url : 'http://XXX.XXX.XXX.XX:XXXX/XXXX/services/ShopService/ShopSearchinfo',
        dataType : 'jsonp',
        data: inputData,
        cache: false,
        type: 'POST',
        mimeType: 'application/json', 
        contentType: 'application/json',
        error : function( thrownError) {
            alert('There is an error: '+ thrownError) ;

        },
        success : function(model) {
            trace('success') ;
            processResponse(model,successCallBack);
        }
    }); 
```

当请求到达服务器时，服务器抛出错误。

```
Caused by: java.net.URISyntaxException: Illegal character in query at index 119: http://XXX.XXX.XXX.XX:XXXX/XXXX/services/ShopService/ShopSearchinfo?callback=jQuery18209278033156879246_1359716402373&
{%22country%22,%22India%22}&_=1359716403257 
```

完整的日志是：

完整的服务器日志是：

```
WARN org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher - Failed to parse request.
java.lang.IllegalArgumentException
        at java.net.URI.create(URI.java:842)
        at org.jboss.resteasy.specimpl.UriInfoImpl.<init>(UriInfoImpl.java:70)
        at org.jboss.resteasy.plugins.server.servlet.ServletUtil.extractUriInfo(ServletUtil.java:72)
        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:178)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:48)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:43)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.URISyntaxException: Illegal character in query at index 119: http://XXX.XXX.XXX.XX:XXXX/XXXX/services//ShopSearchinfo?callback=jQuery18209278033156879246_1359716402373&
{%22country%22,%22India%22}&_=1359716403257
        at java.net.URI$Parser.fail(URI.java:2809)
        at java.net.URI$Parser.checkChars(URI.java:2982)
        at java.net.URI$Parser.parseHierarchical(URI.java:3072)
        at java.net.URI$Parser.parse(URI.java:3014)
        at java.net.URI.<init>(URI.java:578)
        at java.net.URI.create(URI.java:840)
        ... 18 more
Feb 1, 2013 4:30:03 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet Resteasy threw exception
java.lang.NullPointerException
        at org.jboss.resteasy.plugins.server.servlet.HttpServletInputMessage.<init>(HttpServletInputMessage.java:60)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.createHttpRequest(HttpServletDispatcher.java:64)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.createResteasyHttpRequest(HttpServletDispatcher.java:53)
        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:188)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:48)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:43)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

完整的日志是：

完整的服务器日志是：

```
WARN org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher - Failed to parse request.
java.lang.IllegalArgumentException
        at java.net.URI.create(URI.java:842)
        at org.jboss.resteasy.specimpl.UriInfoImpl.<init>(UriInfoImpl.java:70)
        at org.jboss.resteasy.plugins.server.servlet.ServletUtil.extractUriInfo(ServletUtil.java:72)
        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:178)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:48)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:43)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.URISyntaxException: Illegal character in query at index 119: http://XXX.XXX.XXX.XX:XXXX/XXXX/services//ShopSearchinfo?callback=jQuery18209278033156879246_1359716402373&
{%22country%22,%22India%22}&_=1359716403257
        at java.net.URI$Parser.fail(URI.java:2809)
        at java.net.URI$Parser.checkChars(URI.java:2982)
        at java.net.URI$Parser.parseHierarchical(URI.java:3072)
        at java.net.URI$Parser.parse(URI.java:3014)
        at java.net.URI.<init>(URI.java:578)
        at java.net.URI.create(URI.java:840)
        ... 18 more
Feb 1, 2013 4:30:03 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet Resteasy threw exception
java.lang.NullPointerException
        at org.jboss.resteasy.plugins.server.servlet.HttpServletInputMessage.<init>(HttpServletInputMessage.java:60)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.createHttpRequest(HttpServletDispatcher.java:64)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.createResteasyHttpRequest(HttpServletDispatcher.java:53)
        at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:188)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:48)
        at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:43)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:32:52.653

URL 格式不正确，因为它不接受字符`{`。如果您需要它们，请避开它​​们

# c++ - 使用 gst 管道播放多个音频文件

> ID：14645341
> 
> 赞同：0
> 
> 时间：2013-02-01T11:30:22.567
> 
> 标签：c++, gstreamer

我正在使用 gst 库播放多个音频文件，但我遇到了问题：

> 错误：内部数据流错误

这是我的代码（没有其他解复用器和接收器初始化）：

```
GstElement *elm1, *elm2;

elm1  = gst_element_factory_make ("filesrc", "file1.ogg");
elm2  = gst_element_factory_make ("filesrc", "file2.ogg");

g_object_set (G_OBJECT (elm1), "location", "file1.ogg", NULL);
g_object_set (G_OBJECT (elm2), "location", "file2.ogg", NULL);

GstBus *bus;

bus = gst_pipeline_get_bus (GST_PIPELINE (pipeline));
bus_watch_id = gst_bus_add_watch (bus, bus_call, loop);
gst_object_unref (bus);

gst_bin_add_many (GST_BIN (pipeline), elm1, elm2, demuxer, sink, NULL);

gst_element_link_many (elm1, elm2, demuxer);

g_signal_connect (demuxer, "pad-added", G_CALLBACK (on_pad_added), sink);
gst_element_set_state (pipeline, GST_STATE_PLAYING); 
```

我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:15:36.680

您需要为 file-1 监听 EOS，然后将 filesrc 更改为 file-2。

以下答案应该对您有所帮助-

' [GStreamer 动态更改管道的 filesrc 位置 - 没有声音](https://stackoverflow.com/questions/10398383/gstreamer-dynamically-change-the-filesrc-location-of-a-pipeline-no-sound)'

# php - 如何通过 FancyBox 传递 JavaScript 变量？

> ID：14645344
> 
> 赞同：0
> 
> 时间：2013-02-01T11:30:31.513
> 
> 标签：php, jquery, fancybox

我正在尝试通过 FancyBox 传递 JavaScript 变量，以便可以在出现的窗口中访问它们。到目前为止，我有以下代码：

```
<script type="text/javascript">
    var s;
    var e;
    var fancyboxdata = new Array();
    $(function(){
        $('#post_code').blur(function(){
            s = $('#post_code').val();
        });
    });
    function map_routes(e){
        if ((s.length !== 0) && (e.length !== 0)) {
            document.getElementById('map_routes_button').style.visibility="visible";
            fancyboxdata[s] = s;
            fancyboxdata[e] = e;
        } else {
            document.getElementById('map_routes_button').style.visibility="hidden";
        }
    }
</script>
...
<script type="text/javascript">
    $(document).ready(function() {
        $("a.iframe_maps").fancybox({
            ajax: {
                type: "POST",
                data: fancyboxdata
            },
            'hideOnContentClick': true,
            'height': 600,
            'padding': 0,
            'width': 700, 
            'type': 'iframe'
        });
    });
</script> 
```

在这个阶段，我知道 fancyboxdata 数组包含数据，但我不确定 FancyBox 函数中的 Ajax 参数，它应该传递数组变量。

在出现的窗口中，我有：

```
<?php

print_r($_POST);

echo $_POST['s'];

?>
<script>
    (function() {
        alert(fancyboxdata[s]);
    })();
</script> 
```

除了空数组和调试器中的错误之外，什么也没有出现。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:37:05.780

你能不能像这个问题一样单独听表单的提交和 AJAX 调用（使用 jQuery）？

[无法使用 Fancybox 通过 AJAX 获取要发布的表单数据](https://stackoverflow.com/questions/9101442/cant-get-form-data-to-post-via-ajax-using-fancybox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:37:12.000

使用喜欢`data: "phpVar="+fancyboxdata`

fancyboxdata （它是你的 javascript 数组变量）和

phpVar {将调用您的 php 页面。它持有fancyboxdata。}

对于 codeigniter-fancybox 你试试下面的代码。可能是'

```
$.fancybox({
            'width'             : 900,
            'height'            : 390,
            'autoScale'         : true,
            'transitionIn'      : 'none',
            'transitionOut'     : 'none',
            'href'              : 'page.php?id='+9,
            'type'              : 'iframe'
        }); 
```

然后使用 $_get['id']

# delphi - Indy (Delphi) Http 客户端和摘要式身份验证

> ID：14645346
> 
> 赞同：5
> 
> 时间：2013-02-01T11:30:46.090
> 
> 标签：delphi, http, delphi-7, indy, indy10

我正在尝试与需要摘要式身份验证的 LAN (http://) 服务器通信。

```
uses IdHttp, IdAuthenticationDigest;

...

begin
  IdHttp1 := TIdHttp.Create(nil);
  try
    IdHttp1.Request.Username := 'xxx';
    IdHttp1.Request.Password := 'xxx';

    Result := IdHttp1.Get(URL)
  finally
    idHttp1.Free;
  end;
end; 
```

不幸的是，我从服务器获得了**HTTP/1.0 401 Unauthorized** as IdHttp1.ResponseText。如果我输入用户名和密码，Firefox 和 Chrome 都可以正常连接。

我有来自 SVN 和 Delphi 7 的最新 Indy 10。

服务器的http头（局域网192.168.1.10）：

```
Connecting...
Resolving hostname dm7020hd.
Connecting to 192.168.1.10.
Connected.
Server: webserver/1.0
Date: Thu, 31 Jan 2013 11:28:32 GMT
WWW-Authenticate: Digest algorithm="MD5", realm="Forbidden", qop="auth", opaque="7edfc2c756ad1f795651f15f88c32b25", nonce="d2ef913b753b3b6ad8878b34b93cfc5a"
Content-Type: text/html
Cache-Control: no-store, no-cache, must-revalidate
Expires: Sat, 10 Jan 2000 05:00:00 GMT
Content-Length: 15
Last-Modified: Thu, 31 Jan 2013 11:28:32 GMT
ETag: "753868328"
Connection: close
Disconnected 
```

我已经用谷歌搜索了很多关于这个问题的信息，显然很多人在 indy 身份验证方面遇到了麻烦（它是否有效？）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T20:25:24.920

您需要在属性中启用该`hoInProcessAuth`标志。`TIdHTTP.HTTPOptions`默认情况下禁用。如果没有该标志，`TIdHTTP.Get()`将不会发送第二个 HTTP 请求来指定摘要凭据以响应服务器的 401 响应。它会简单地退出并期望您处理 401 响应并根据需要自己发送新请求。

# python - 在 pytest 中使用不同的数据库

> ID：14645348
> 
> 赞同：5
> 
> 时间：2013-02-01T11:30:49.593
> 
> 标签：python, django, sqlite, testing, pytest

我正在使用 pytest-django 插件为我的 django 应用程序 pytest 运行测试。我使用 MySQL 数据库作为 django 的默认数据库。是否有可能仅指定 pytest 使用不同的数据库进行测试，SQLite？

如果有的话，我正在寻找不同的选项，而不是为 py.test --ds=test_settings 创建特殊的 test_seetings.py。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T14:25:03.793

`--ds=test_settings`是要走的路！

如果您不想在`--ds=...`每次调用 py.test 时都输入，您可以添加一个包含以下内容的 pytest.ini：

```
[pytest]
DJANGO_SETTINGS_MODULE = test_settings 
```

附带说明：在运行测试时，最好使用与生产中使用的相同类型的数据库。pytest-django 提供了[`--reuse-db`](http://pytest-django.readthedocs.org/en/latest/database.html)在测试运行之间重用 MySQL/Postgres 数据库的选项，在为具有大量模型的项目运行一些测试时节省了大量的设置时间。

# php - 正则表达式提取图像名称

> ID：14645351
> 
> 赞同：0
> 
> 时间：2013-02-01T11:31:03.443
> 
> 标签：php, regex

我有一个这样的字符串

```
image/jpeg; name="3.jpg" 
```

`3.jpg`我想通过php正则表达式退出。我在用

```
$test='image/jpeg; name="3.jpg"';

preg_match('/^.*image\/(gif|png|jpg|jpeg|GIF|PNG|JPG|JPEG).*(name=(.+))?$/',$test, $matches); 
```

但它并没有拔出名字。你能指导我哪里做错了吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:40:29.947

你的问题是这样的：

```
.*(name=(.+))?$ 
```

首先，`.*`匹配直到字符串结尾的所有内容。

然后，`(name=(.+))?`不能匹配任何东西，但由于它是可选的，那没关系。所以匹配成功，但是什么都没有捕获。

```
/^.*image\/(?:GIF|PNG|JPG|JPEG).*?(?:name=(.+))?$/i 
```

在这种情况下会有所帮助，使`.*?`匹配尽可能少的字符。`image`（此外，除非您使用and区分大小写，否则您可以使用修饰符`name`缩短正则表达式。）`/i`

如果您只需要文件名，您也可以使其他组不捕获（`(?:...)`）。

# python - 将静态方法动态添加到 Python 类

> ID：14645353
> 
> 赞同：11
> 
> 时间：2013-02-01T11:31:08.600
> 
> 标签：python, oop, static-methods

我[发现](http://code.activestate.com/recipes/81732-dynamically-added-methods-to-a-class/)了非常好的例子，如何动态地向类添加新方法（移植类）：

```
def say(host, msg):
   print '%s says %s' % (host.name, msg)

def funcToMethod(func, clas, method_name=None):
   setattr(clas, method_name or func.__name__, func)

class transplant:
   def __init__(self, method, host, method_name=None):
      self.host = host
      self.method = method
      setattr(host, method_name or method.__name__, self)

   def __call__(self, *args, **kwargs):
      nargs = [self.host]
      nargs.extend(args)
      return apply(self.method, nargs, kwargs)

class Patient:
   def __init__(self, name):
      self.name = name

if __name__ == '__main__':
   jimmy = Patient('Jimmy')
   transplant(say, jimmy, 'say1')
   funcToMethod(say, jimmy, 'say2')

   jimmy.say1('Hello')
   jimmy.say2(jimmy, 'Good Bye!') 
```

但我不明白，如何修改它以添加静态方法。有人能帮我吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-01T11:33:17.787

您需要做的就是将函数包装在一个`staticmethod()`调用中：

```
say = staticmethod(say) 
```

或将其作为装饰器应用于函数定义：

```
@staticmethod
def say(host, msg):
    # ... 
```

这归结为同一件事。

只要记住; `@decorator`语法只是写作的语法糖，装饰对象`target = decorator(target)`在哪里。`target`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T11:41:47.460

我在这里看不到静态方法。该`say`函数需要两个参数，第一个参数`host`似乎是该类的实例。

所以看起来你只是想把一个新方法附加到一个类上。这可以在没有 funcToMethod 或移植的情况下完成：

```
def say(self, msg):
   print '%s says %s' % (self.name, msg)

class Patient:
   def __init__(self, name):
      self.name = name

if __name__ == '__main__':
   jimmy = Patient('Jimmy')
   Patient.say = say
   jimmy.say('Hello') 
```

产量

```
Jimmy says Hello 
```

* * *

如果您确实想附加一个静态方法，那么正如 MartijnPieters 回答的那样，使用`staticmethod`装饰器：

```
def tell(msg):
   print(msg)

if __name__ == '__main__':
   jimmy = Patient('Jimmy')
   Patient.tell = staticmethod(tell)
   jimmy.tell('Goodbye') 
```

产量

```
Goodbye 
```

* * *

上面显示了如何将新方法附加到没有`funcToMethod`or的类`transplant`。两者都`funcToMethod`尝试`transplant`将函数附加到类的*实例*而不是类本身。这是错误的，这就是为什么它需要扭曲（例如必须`jimmy`作为参数传递 in `jimmy.say2(jimmy, 'Good Bye!')`）才能使其工作。方法应该定义在类上（例如`Patient`），而不是实例上（例如`jimmy`）。

`transplant`特别可怕。当函数足够时，它会使用一个类。它使用古老的`apply`而不是现代的`self.method(*nargs, **kwargs)`语法，并且忽略了 PEP8 对 camelCasing 类名的约定。为其辩护，它是十年前写的。但从根本上说，让优秀编程成为一种诅咒的是你根本不需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:52:13.637

那么下面的作品，即在我认为OP想要的Patient上放置一个静态方法。

```
def tell(msg):
   print(msg)

...

funcToMethod(tell, Patient, 'say3')

...

Patient.say3('Bye!') 
```

# asp.net - 使用 LINQ 时是否需要自定义域模型？

> ID：14645358
> 
> 赞同：0
> 
> 时间：2013-02-01T11:31:30.993
> 
> 标签：asp.net, sql-server, asp.net-mvc, asp.net-mvc-3, model

我正在开发一个使用 LINQ-SQL 连接到我的 SQL Server 数据库的 MVC 应用程序。

目前在获取数据时，我将 LINQ 对象的属性传递给域模型，然后在我的视图模型中创建它的属性。

例如，我的视图模型可能具有以下属性：

```
public Models.UserModel user { get; set; }
public List<Models.CountryModel> countries { get; set; } 
```

我的领域模型与我的 LINQ 对象具有完全相同的属性，我将这些属性复制到如下：

```
Models.UserModel user = new Models.UserModel();
user.Username = User.Username;
user.FirstName = User.FirstName;
user.LastName = User.LastName; 
```

`user`我的`Models.UserModel`对象在哪里，`User`我的 LINQ 对象是从 User 数据库表映射的。

由于我的域模型与我的 LINQ 对象完全相同，我将这些数据传输到域模型有什么好处，或者我可以在我的视图模型中使用 LINQ 对象，例如：

```
public User user { get; set; }
public List<Country> countries { get; set; } 
```

使用领域模型有什么好处？这纯粹是为了与数据库 LINQ 对象松散耦合吗？

* * *

如果使用域模型有优势，那么如何最好地在我的 MVC 应用程序中构建它们？

它们应该在“Models”文件夹级别完全拆分（例如子文件夹“DomainModels”和“ViewModels”）还是重合（例如“UserEditViewModel.cs”和“UserDomainModel.cs”）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:34:55.177

> 由于我的域模型与我的 LINQ 对象完全相同，我将这些数据传输到域模型有什么好处，或者我可以在我的视图模型中使用 LINQ 对象，例如：

您可以在视图模型中引用域模型，以防它们**完全相同**。我看不出复制这个逻辑有什么好处，除了在现实世界中它们永远不会相同。您总是有一些特定的视图，例如验证甚至显示标签。*拥有纯*视图模型的优点是您的应用程序不再依赖于您的数据库结构。您可以轻松地翻转/翻转数据访问技术，而无需修改 UI 部分。我发现这种清晰的分离更易于维护，并且总是倾向于在我的应用程序中使用它。

# c# - 如何在 mvc3 的控制器中的操作的 get 方法中获取 Formcollection 值？

> ID：14645359
> 
> 赞同：0
> 
> 时间：2013-02-01T11:31:31.097
> 
> 标签：c#, asp.net-mvc-3

单击按钮后，我在网格中显示数据。在网格中排序属性的值为真。所以问题是，当我按下网格中的链接对特定列或下一页进行排序时，它会调用该操作的 get 方法，结果为无。我怎么能做到这一点？？？？提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:37:21.660

这不会是`FormCollection`因为您没有发布数据。看看`QueryString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T03:11:23.617

```
public ActionResult NewUser(FormCollection formCollection)
{
    String roleValue1 = formCollection["inputRole"];
} 
```

# r - 列出 R 包依赖项而不安装包

> ID：14645363
> 
> 赞同：46
> 
> 时间：2013-02-01T11:31:43.243
> 
> 标签：r, version-control, dependencies, packages

有没有一种简单的方法来获取给定包的 R 包依赖项（所有递归依赖项）列表，而无需安装包及其依赖项？类似于 portupgrade 或 apt 中的虚假安装。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-01T11:36:32.053

您可以使用`available.packages`函数的结果。例如，查看`ggplot2`依赖于什么：

```
pack <- available.packages()
pack["ggplot2","Depends"] 
```

这使 ：

```
[1] "R (>= 2.14), stats, methods" 
```

请注意，根据您想要实现的目标，您可能还需要检查该`Imports`字段。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-02-06T14:39:36.143

另一个简洁而简单的解决方案是`recursivePackageDependencies`库中的内部函数`packrat`。但是，该软件包必须安装在您机器上的*某个*库中。优点是它也适用于自制的非 CRAN 包。例子：

```
packrat:::recursivePackageDependencies("ggplot2",lib.loc = .libPaths()[1]) 
```

给予：

```
 [1] "R6"           "RColorBrewer" "Rcpp"         "colorspace"   "dichromat"    "digest"       "gtable"      
 [8] "labeling"     "lazyeval"     "magrittr"     "munsell"      "plyr"         "reshape2"     "rlang"       
 [15] "scales"       "stringi"      "stringr"      "tibble"       "viridisLite" 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-12-04T21:08:51.103

我很惊讶没有人提到`tools::package_dependencies()`，这是最简单的解决方案，并且有一个`recursive`论点（公认的解决方案不提供）。

查看 CRAN 上前 200 个包的递归依赖关系的简单示例：

```
library(tidyverse)
avail_pks <- available.packages()
deps <- tools::package_dependencies(packages = avail_pks[1:200, "Package"],
                                    recursive = TRUE)

tibble(Package=names(deps),
       data=map(deps, as_tibble)) %>% 
  unnest(data)
#> # A tibble: 7,125 x 2
#>    Package value         
#>    <chr>   <chr>         
#>  1 A3      xtable        
#>  2 A3      pbapply       
#>  3 A3      parallel      
#>  4 A3      stats         
#>  5 A3      utils         
#>  6 aaSEA   DT            
#>  7 aaSEA   networkD3     
#>  8 aaSEA   shiny         
#>  9 aaSEA   shinydashboard
#> 10 aaSEA   magrittr      
#> # … with 7,115 more rows 
```

^(由[reprex 包](https://reprex.tidyverse.org)于 2020-12-04 创建(v0.3.0))

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-09-03T16:55:45.337

我没有安装 R，我需要找出哪些 R 包依赖于我公司请求使用的 R 包列表。

我编写了一个 bash 脚本，它遍历文件中的 R 包列表，并递归地发现依赖项。

该脚本使用名为**rinput_orig.txt**的文件作为输入（下面的示例）。该脚本将在其工作时创建一个名为**rinput.txt的文件。**

该脚本将创建以下文件：

*   **rdepsfound.txt** - 列出找到的依赖项，包括依赖它的 R 包（下面的示例）。
*   **routput.txt** - 列出所有 R 包（来自原始列表和依赖项列表）以及许可证和 CRAN URL（示例如下）。
*   **r404.txt** - 尝试 curl 时收到 404 的 R 包列表。如果您的原始列表有任何拼写错误，这很方便。

**bash 脚本：**

```
#!/bin/bash

# CLEANUP
rm routput.txt
rm rdepsfound.txt
rm r404.txt

# COPY ORIGINAL INPUT TO WORKING INPUT
cp rinput_orig.txt rinput.txt

IFS=","
while read PACKAGE; do
    echo Processing $PACKAGE...

    PACKAGEURL="http://cran.r-project.org/web/packages/${PACKAGE}/index.html"

    if [ `curl -o /dev/null --silent --head --write-out '%{http_code}\n' ${PACKAGEURL}` != 404 ]; then
        # GET LICENSE INFO OF PACKAGE
        LICENSEINFO=$(curl ${PACKAGEURL} 2>/dev/null | grep -A1 "License:" | grep -v "License:" | gawk 'match($0, /<a href=".*">(.*)<\/a>/, a) {print a[0]}' | sed "s/|/,/g" | sed "s/+/,/g")
        for x in ${LICENSEINFO[*]}
        do
            # SAVE LICENSE
            LICENSE=$(echo ${x} | gawk 'match($0, /<a href=".*">(.*)<\/a>/, a) {print a[1]}')
            break
        done

        # WRITE PACKAGE AND LICENSE TO OUTPUT FILE
        echo $PACKAGE $LICENSE $PACKAGEURL >> routput.txt

        # GET DEPENDENCIES OF PACKAGE
        DEPS=$(curl ${PACKAGEURL} 2>/dev/null | grep -A1 "Depends:" | grep -v "Depends:" | gawk 'match($0, /<a href=".*">(.*)<\/a>/, a) {print a[0]}')
        for x in ${DEPS[*]}
        do
            FOUNDDEP=$(echo "${x}" | gawk 'match($0, /<a href=".*">(.*)<\/a>/, a) {print a[1]}' | sed "s/<\/span>//g")
            if [ "$FOUNDDEP" != "" ]; then
                echo Found dependency $FOUNDDEP for $PACKAGE...
                grep $FOUNDDEP rinput.txt > /dev/null
                if [ "$?" = "0" ]; then
                    echo $FOUNDDEP already exists in package list...
                else
                    echo Adding $FOUNDDEP to package list...
                    # SAVE FOUND DEPENDENCY BACK TO INPUT LIST
                    echo $FOUNDDEP >> rinput.txt
                    # SAVE FOUND DEPENDENCY TO DEPENDENCY LIST FOR EASY VIEWING OF ALL FOUND DEPENDENCIES
                    echo $FOUNDDEP is a dependency of $PACKAGE >> rdepsfound.txt
                fi
            fi
        done
    else
        echo Skipping $PACKAGE because 404 was received...
        echo $PACKAGE $PACKAGEURL >> r404.txt
    fi

done < rinput.txt
echo -e "\nRESULT:"
sort -u routput.txt 
```

**示例 rinput_orig.txt：**

```
shiny
rmarkdown
xtable
RODBC
RJDBC
XLConnect
openxlsx
xlsx
Rcpp 
```

**运行脚本时的示例控制台输出：**

```
Processing shiny...
Processing rmarkdown...
Processing xtable...
Processing RODBC...
Processing RJDBC...
Found dependency DBI for RJDBC...
Adding DBI to package list...
Found dependency rJava for RJDBC...
Adding rJava to package list...
Processing XLConnect...
Found dependency XLConnectJars for XLConnect...
Adding XLConnectJars to package list...
Processing openxlsx...
Processing xlsx...
Found dependency rJava for xlsx...
rJava already exists in package list...
Found dependency xlsxjars for xlsx...
Adding xlsxjars to package list...
Processing Rcpp...
Processing DBI...
Processing rJava...
Processing XLConnectJars...
Processing xlsxjars...
Found dependency rJava for xlsxjars...
rJava already exists in package list... 
```

**示例 rdepsfound.txt：**

```
DBI is a dependency of RJDBC
rJava is a dependency of RJDBC
XLConnectJars is a dependency of XLConnect
xlsxjars is a dependency of xlsx 
```

**示例 routput.txt：**

```
shiny GPL-3 http://cran.r-project.org/web/packages/shiny/index.html
rmarkdown GPL-3 http://cran.r-project.org/web/packages/rmarkdown/index.html
xtable GPL-2 http://cran.r-project.org/web/packages/xtable/index.html
RODBC GPL-2 http://cran.r-project.org/web/packages/RODBC/index.html
RJDBC GPL-2 http://cran.r-project.org/web/packages/RJDBC/index.html
XLConnect GPL-3 http://cran.r-project.org/web/packages/XLConnect/index.html
openxlsx GPL-3 http://cran.r-project.org/web/packages/openxlsx/index.html
xlsx GPL-3 http://cran.r-project.org/web/packages/xlsx/index.html
Rcpp GPL-2 http://cran.r-project.org/web/packages/Rcpp/index.html
DBI LGPL-2 http://cran.r-project.org/web/packages/DBI/index.html
rJava GPL-2 http://cran.r-project.org/web/packages/rJava/index.html
XLConnectJars GPL-3 http://cran.r-project.org/web/packages/XLConnectJars/index.html
xlsxjars GPL-3 http://cran.r-project.org/web/packages/xlsxjars/index.html 
```

我希望这可以帮助别人！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-06-25T07:08:24.590

我测试了我自己的解决方案（检查了本地安装的包`packrat`）`tools`。
您可以发现方法之间的明显差异。
`tools::package_dependencies`看起来对于旧 R 版本（直到 4.1.0 和）提供了太多，`recursive = TRUE`并且不是有效的解决方案。

```
R 4.1.0 NEWS
"Function tools::package_dependencies() (in package tools) can now use different dependency types for direct and recursive dependencies." 
```

`packrat:::recursivePackageDependencies`正在使用`available.packages`，因此它基于最新的远程包，而不是本地包。

默认情况下，我的功能是跳过基本包，`base`如果您也想附加它们，请更改 arg。

在 R 4.1.0 下测试：

```
get_deps <- function(package, fields = c("Depends", "Imports", "LinkingTo"), base = FALSE, lib.loc = NULL) {
  stopifnot((length(package) == 1) && is.character(package))
  stopifnot(all(fields %in% c("Depends", "Imports", "Suggests", "LinkingTo")))
  stopifnot(is.logical(base))
  stopifnot(package %in% rownames(utils::installed.packages(lib.loc = lib.loc)))

  paks_global <- NULL

  deps <- function(pak, fileds) {
    pks <- packageDescription(pak)
    res <- NULL
    for (f in fileds) {
      ff <- pks[[f]]
      if (!is.null(ff)) {
        res <- c(
          res,
          vapply(
            strsplit(trimws(strsplit(ff, ",")[[1]]), "[ \n\\(]"),
            function(x) x[1],
            character(1)
          )
        )
      }
    }
    if (is.null(res)) {
      return(NULL)
    }
    for (r in res) {
      if (r != "R" && !r %in% paks_global) {
        paks_global <<- c(r, paks_global)
        deps(r, fields)
      }
    }
  }

  deps(package, fields)

  setdiff(unique(paks_global), c(
     package,
     "R",
     if (!base) {
       c(
         "stats",
         "graphics",
         "grDevices",
         "utils",
         "datasets",
         "methods",
         "base", 
         "tools"
       )
     } else {
       NULL
     }
   ))
}

own = get_deps("shiny", fields = c("Depends", "Imports"))

packrat = packrat:::recursivePackageDependencies("shiny", lib.loc = .libPaths(), fields = c("Depends", "Imports"))

tools = tools::package_dependencies("shiny", which =  c("Depends", "Imports"), recursive = TRUE)[[1]]

setdiff(own, packrat)
#> character(0)
setdiff(packrat, own)
#> character(0)
setdiff(own, tools)
#> character(0)
setdiff(tools, own)
#> [1] "methods"   "utils"     "grDevices" "tools"     "stats"     "graphics"
setdiff(packrat, tools)
#> character(0)
setdiff(tools, packrat)
#> [1] "methods"   "utils"     "grDevices" "tools"     "stats"     "graphics"

own
#>  [1] "lifecycle"   "ellipsis"    "cachem"      "jquerylib"   "rappdirs"   
#>  [6] "fs"          "sass"        "bslib"       "glue"        "commonmark" 
#> [11] "withr"       "fastmap"     "crayon"      "sourcetools" "base64enc"  
#> [16] "htmltools"   "digest"      "xtable"      "jsonlite"    "mime"       
#> [21] "magrittr"    "rlang"       "later"       "promises"    "R6"         
#> [26] "Rcpp"        "httpuv"
packrat
#>  [1] "R6"          "Rcpp"        "base64enc"   "bslib"       "cachem"     
#>  [6] "commonmark"  "crayon"      "digest"      "ellipsis"    "fastmap"    
#> [11] "fs"          "glue"        "htmltools"   "httpuv"      "jquerylib"  
#> [16] "jsonlite"    "later"       "lifecycle"   "magrittr"    "mime"       
#> [21] "promises"    "rappdirs"    "rlang"       "sass"        "sourcetools"
#> [26] "withr"       "xtable"
tools
#>  [1] "methods"     "utils"       "grDevices"   "httpuv"      "mime"       
#>  [6] "jsonlite"    "xtable"      "digest"      "htmltools"   "R6"         
#> [11] "sourcetools" "later"       "promises"    "tools"       "crayon"     
#> [16] "rlang"       "fastmap"     "withr"       "commonmark"  "glue"       
#> [21] "bslib"       "cachem"      "ellipsis"    "lifecycle"   "sass"       
#> [26] "jquerylib"   "magrittr"    "base64enc"   "Rcpp"        "stats"      
#> [31] "graphics"    "fs"          "rappdirs"

microbenchmark::microbenchmark(get_deps("shiny", fields = c("Depends", "Imports")),
                               packrat:::recursivePackageDependencies("shiny", lib.loc = .libPaths(), fields = c("Depends", "Imports")),
                               tools = tools::package_dependencies("shiny", which =  c("Depends", "Imports"), recursive = TRUE)[[1]],
                               times = 5
)
#> Warning in microbenchmark::microbenchmark(get_deps("shiny", fields =
#> c("Depends", : less accurate nanosecond times to avoid potential integer
#> overflows
#> Unit: milliseconds
#>                                                                                                           expr
#>                                                            get_deps("shiny", fields = c("Depends", "Imports"))
#>  packrat:::recursivePackageDependencies("shiny", lib.loc = .libPaths(),      fields = c("Depends", "Imports"))
#>                                                                                                          tools
#>         min         lq       mean     median         uq        max neval
#>    5.316552   5.607365   6.054568   5.674359   6.633308   7.041258     5
#>   18.767340  19.387588  21.739127  21.581457  23.526169  25.433079     5
#>  411.589734 449.179354 458.526354 465.431262 468.440211 497.991207     5 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2021-06-25 创建)

证明`tools`在旧 R 版本下的解决方案是错误的。在 R 3.6.3 下测试。

```
paks <- tools::package_dependencies("shiny", which =  c("Depends", "Imports"), recursive = TRUE)[[1]]
"lifecycle" %in% paks
#> [1] TRUE
any(c(paks, "shiny") %in% tools::dependsOnPkgs("lifecycle"))
#> [1] FALSE 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2021-06-25 创建)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-24T17:18:19.417

试试这个：`tools::package_dependencies(recursive = TRUE)$package_name`

例如，这里是 dplyr 的依赖项：

```
tools::package_dependencies(recursive = TRUE)$dplyr
 [1] "ellipsis"   "generics"   "glue"       "lifecycle"  "magrittr"   "methods"   
 [7] "R6"         "rlang"      "tibble"     "tidyselect" "utils"      "vctrs"     
[13] "cli"        "crayon"     "fansi"      "pillar"     "pkgconfig"  "purrr"     
[19] "digest"     "assertthat" "grDevices"  "utf8"       "tools" 
```

# sitecore - Sitecore Workbox，显示名称的项目字段？

> ID：14645368
> 
> 赞同：2
> 
> 时间：2013-02-01T11:31:59.730
> 
> 标签：sitecore

默认情况下 Sitecore 工作框显示项目名称，我想显示“标题”字段（自定义字段）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:48:20.433

我有一个类似的要求，客户需要 Workbox 来显示项目的“路径”而不是它的名称。问题是他们的许多物品具有相同的名称 - 难以区分物品。

不幸的是，此更改要求我们对 Sitecore WorkboxForm 类进行自定义实现。我通常不建议像这样修改 Sitecore，但对于像 Workbox 这样重要的东西，这可能是值得的。

1.  在您的 Sitecore 网站的根目录中，找到以下文件：

    `\sitecore\shell\Applications\Workbox\Workbox.xml`

2.  将 CodeBeside 更改为指向 WorkboxForm 类的自定义实现。默认类位于程序`Sitecore.Shell.Applications.Workbox.WorkboxForm`集中的命名空间下`Sitecore.Client`。您基本上可以在 Reflector 中打开 Sitecore 的课程并将所有内容复制到您的新课程中。

3.  在私有**CreateItem()**方法中，更改以下行以使用项目的标题（我使用 item.Paths.ContentPath）：

    `webControl["Header"] = item["Your Title"];`

# wpf - WPF Mediaelement mediaopened 事件不会从后面的代码触发，而是从按钮单击处理程序触发

> ID：14645375
> 
> 赞同：3
> 
> 时间：2013-02-01T11:32:07.803
> 
> 标签：wpf, mediaelement

第一次发帖，所以要温柔，很抱歉发了很长的帖子，但我想提供尽可能多的细节。

我在用户控件中有一个 MediaElement 控件，其 LoadedBehaviour 属性设置为手动，见下文。当我单击“打开”按钮时，处理程序代码包括播放媒体，以便我可以在 MediaOpened 事件处理程序中准备好持续时间属性，它会成功完成。当我只需要媒体长度时，MediaOpened 处理程序会停止播放。

我还想在程序开始时加载一个播放列表并用信息填充数据网格，其中一个元素是媒体的长度。

XAML

```
 <MediaElement Grid.Row="5" Name="MediaEL" Grid.ColumnSpan="6" MediaOpened="MediaEL_MediaOpened"  LoadedBehavior="Manual" Height="169" />

    <DataGrid Grid.Row="1" Grid.ColumnSpan="6"  Name="dgPlayList" AutoGenerateColumns="False" Height="300" >
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding Position}" Header="#" Width="30"/>
            <DataGridTextColumn Binding="{Binding Title}" Header="Title" Width="182"/>
            <DataGridTextColumn Binding="{Binding Time}" Header="Time" Width="50"/>
            <DataGridCheckBoxColumn Binding="{Binding Dnp}" Header="Dnp" Width="35"/>
            <DataGridTextColumn Binding="{Binding Location}" Visibility="Hidden" />
        </DataGrid.Columns>
    </DataGrid> 
```

C＃

```
 private void btnOpen_Click(object sender, RoutedEventArgs e)  
    {  
        System.Windows.Forms.OpenFileDialog ofd = new System.Windows.Forms.OpenFileDialog();  

        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)  
        {  
            MediaEL.Source = new Uri(ofd.FileName);
            btnPlay.IsEnabled = true;
            MediaEL.Visibility = Visibility.Hidden;
            SettingTime = true;
            MediaEL.Play();
        }
    }

    private void MediaEL_MediaOpened(object sender, RoutedEventArgs e)
    {
        if (MediaEL.NaturalDuration.HasTimeSpan)
        {
            TimeSpan ts = MediaEL.NaturalDuration.TimeSpan;
            Length.Content = FormatLength(ts.TotalSeconds);  // make it look like 00:00:00
            seekBar.Maximum = ts.TotalSeconds;
            seekBar.SmallChange = 1;
            seekBar.LargeChange = Math.Min(10, ts.Seconds / 10);
        }
        if (!SettingTime)
            timer.Start();
        else
        {
            SettingTime = false;
            MediaEL.Stop();
            MediaEL.Visibility = Visibility.Visible;
            MediaEL.Close();
        }
    } 
```

dgPlayList.ItemsSource = LoadPlayListData();

在窗口加载方法中调用。
我已经在 foreach 语句下面的方法中注释掉了，直到我开始工作为止。

现在的问题是当试图让媒体长度填充数据网格时间列时，MediaOpened 事件不会触发，我看不出为什么不触发，并且已经用尽了对该主题的搜索。
任何想法将不胜感激！
谢谢，吉姆

C＃

```
 private ObservableCollection<PlayListEntry> LoadPlayListData()
    {
        var playListEntries = new ObservableCollection<PlayListEntry>();
        var position = 1;
        var bPlay = false;

        var doc = new XmlDocument();
        doc.Load(System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase) + @"/mpcplaylist.xml");

        var root = doc.DocumentElement;
        var nodes = root.SelectNodes("/playlist/media");

        XmlNode node = nodes[0];

        if (node.InnerXml.Contains("title"))
        {
            var xmlElement = node["title"];
            if (xmlElement != null)
                Title = xmlElement.InnerText;
        }

        if (node.InnerXml.Contains("artist"))
        {
            var xmlElement = node["artist"];
            if (xmlElement != null)
                Artist = xmlElement.InnerText;
        }

        if (node.InnerXml.Contains("location"))
        {
            var xmlElement = node["location"];
            if (xmlElement != null)
                Location = xmlElement.InnerText;
        }

        if (node.InnerXml.Contains("include"))
        {
            var xmlElement = node["include"];
            if (xmlElement != null)
                Include = xmlElement.InnerText;
        }

        if (Include == "No")
            bPlay = true;
        else
            bPlay = false;

        //foreach (XmlNode node in nodes)
        //{
        //    if (node.InnerXml.Contains("title"))
        //    {
        //        var xmlElement = node["title"];
        //        if (xmlElement != null)
        //            Title = xmlElement.InnerText;
        //    }

        //    if (node.InnerXml.Contains("artist"))
        //    {
        //        var xmlElement = node["artist"];
        //        if (xmlElement != null)
        //            Artist = xmlElement.InnerText;
        //    }

        //    if (node.InnerXml.Contains("location"))
        //    {
        //        var xmlElement = node["location"];
        //        if (xmlElement != null)
        //            Location = xmlElement.InnerText;
        //    }

        //    if (node.InnerXml.Contains("include"))
        //    {
        //        var xmlElement = node["include"];
        //        if (xmlElement != null)
        //            Include = xmlElement.InnerText;
        //    }

        //    if (Include == "No")
        //        bPlay = true;
        //    else
        //        bPlay = false;

            MediaEL.Source = new Uri(Location);

            SettingTime = true;

            MediaEL.Play();

            Medialength = Length.Content.ToString();

            playListEntries.Add(new PlayListEntry()
            {
                Dnp = bPlay,
                Position = position++,
                Time = Medialength,
                Title = Title,
                Location = Location
            });

        //}

        return playListEntries;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:11:15.160

解决方案是...

我从 xml 播放列表中获取第一个条目并设置源属性，然后调用 play 方法来获取持续时间。现在在 Media Opened 事件中，然后我抓取下一个条目并执行相同操作，直到获得列表中所有媒体项的持续时间。

这是让媒体打开事件在处理第一个条目后获得下一个条目的关键。

也就是说，我在线程和控件方面还有另一个问题，但我会为此创建一个新帖子。

谢谢，吉姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:19:26.377

好的，所以我还没有设法找到我的问题版本的完整解决方案，但我已经确定是什么导致我的`MediaPlayer`对象出现问题。我的应用程序（和内部媒体播放器）一切正常，但在更改包含音频的文件夹的权限后它停止工作。

该文件夹已更改为仅允许读取访问权限，因此`mediaPlayer`应该仍然能够访问文件。然而，它似乎需要更高级别的权限才能打开任何文件。我测试了这个 using`WindowsIdentity.Impersonate`方法，授予对该方法的调用的完全权限`MediaPlayer.Open`，但没有任何变化。

最后，我尝试将本地文件系统上的音频文件的路径传递给该`MediaPlayer.Open`方法，嘿，这一切又像以前一样工作了！也许您应该尝试最后一步，看看您的问题是否也是由安全权限引起的。

更新>>

是的，原来是权限错误。IT 部门弄乱了我的访问权限，这就是为什么`MediaPlayer`（或继承了我的访问权限的应用程序）无法打开音频文件的原因。在给我正确的权利后，它又`MediaPlayer`开始正常工作了。

我希望这个对你有用。

# c# - 如何在.net中使用jscript对文本框进行客户端验证

> ID：14645376
> 
> 赞同：1
> 
> 时间：2013-02-01T11:32:08.373
> 
> 标签：c#, javascript, asp.net

我们如何为文本框编写客户端验证。例如：如果我们有一个登录页面，那么如何编写验证函数来检查必填字段。

我设计了一个使用母版页的应用程序。在此，当我尝试编写代码时，我没有在源页面中获取脚本。我收到错误，仅允许内容控件意味着什么。如何进行我不明白。

登录页面设计：

```
<div id="contenttext" align="center" > 
```

```
 <tr>
            <td colspan="2" style="background-color: #E2E2E2">
                <asp:Label cssClass="orangelogotext"  runat="server" ID="lblinformation" Text="Login :"></asp:Label>
            </td>
        </tr>
        <tr>
            <td align="center" style="background-color: #E2E2E2">
                <asp:Label cssClass="smalltext"  runat="server" ID="lblEmail" Text="Email">
                </asp:Label>
            </td>
            <td style="background-color: #E2E2E2">
                <asp:TextBox runat="server" ID="Email" CssClass="textbox">
                </asp:TextBox>
            </td>
        </tr>
        <tr>
            <td align="center" style="background-color: #E2E2E2">
                <asp:Label cssClass="smalltext"  runat="server" ID="lblpassword" Text="Password" >
                </asp:Label>
            </td>
            <td style="background-color: #E2E2E2">
                <asp:TextBox runat="server" ID="Password"  Width="133px" TextMode="Password" CssClass="textbox"></asp:TextBox>
            </td>
        </tr>
        <tr>
            <td align="center" style="background-color: #E2E2E2">
                <asp:Label cssClass="smalltext"  runat="server" ID="lblorganisationname" Text="Organisation Name">
                </asp:Label>
            </td>
            <td style="background-color: #E2E2E2"> 
                <asp:DropDownList ID="ddlorganisationname" runat="server" DataTextField="OrganisationName"
                    DataValueField="OrganisationID" CssClass="textbox">
                </asp:DropDownList>
            </td>
        </tr>

        <tr>
            <td align="center" colspan="2" style="background-color: #E2E2E2">
                <asp:Button runat="server" ID="btnlogin" Text="LOGIN" Height="34px" onclick="btnlogin_Click;return validateForm()" CssClass="btntext" />
            </td>
        </tr>
    </table> 
```

问候， Dhriti

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:41:25.587

如果您使用母版页，请确保所有内容都在`<asp:Content>`标签内。这就是为什么你只得到**内容控件**被允许的错误。

```
<asp:Content ID="Content1" ContentPlaceHolderID="Contentplaceholder1" runat="Server">
***all the content***
</asp:Content> 
```

# asp.net-mvc - 在 ASP.NET MVC 中定义更多“共享”文件夹

> ID：14645377
> 
> 赞同：1
> 
> 时间：2013-02-01T11:32:09.510
> 
> 标签：asp.net-mvc, asp.net-mvc-4, partial-views

是否可以为 ASP.NET MVC 定义更多文件夹来搜索 Views 或 Partials？

例如，如果我浏览到 /Home/Index 并且 Index 操作返回 View()，ASP.NET MVC 将查看以下位置：

*   ~/Views/Home/Index.aspx
*   ~/Views/Home/Index.ascx
*   ~/Views/Shared/Index.aspx
*   ~/Views/Shared/Index.ascx
*   ~/Views/Home/Index.cshtml
*   ~/Views/Home/Index.vbhtml
*   ~/Views/Shared/Index.cshtml
*   ~/Views/Shared/Index.vbhtml

我想创建另一个文件夹，比如 ~/Views/PartivalViews/，它将被搜索。

显然，我正在寻找这种方式来存储我的 PartialViews。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T11:42:22.200

您可以编写一个[`custom view engine`](http://weblogs.asp.net/imranbaloch/archive/2011/06/27/view-engine-with-dynamic-view-location.aspx)可以指定 ASP.NET MVC 将在其中查找视图的其他文件夹的位置。

这里的想法是编写一个派生自`RazorViewEngine`并在其构造函数中设置各种属性的类，例如：

*   区域视图位置格式
*   AreaMasterLocationFormats
*   AreaPartialViewLocationFormats
*   查看位置格式
*   MasterLocation格式
*   PartialViewLocationFormats

以下是您可以随意覆盖的默认值：

```
public RazorViewEngine(IViewPageActivator viewPageActivator) : base(viewPageActivator)
{
    base.AreaViewLocationFormats = new string[] { "~/Areas/{2}/Views/{1}/{0}.cshtml", "~/Areas/{2}/Views/{1}/{0}.vbhtml", "~/Areas/{2}/Views/Shared/{0}.cshtml", "~/Areas/{2}/Views/Shared/{0}.vbhtml" };
    base.AreaMasterLocationFormats = new string[] { "~/Areas/{2}/Views/{1}/{0}.cshtml", "~/Areas/{2}/Views/{1}/{0}.vbhtml", "~/Areas/{2}/Views/Shared/{0}.cshtml", "~/Areas/{2}/Views/Shared/{0}.vbhtml" };
    base.AreaPartialViewLocationFormats = new string[] { "~/Areas/{2}/Views/{1}/{0}.cshtml", "~/Areas/{2}/Views/{1}/{0}.vbhtml", "~/Areas/{2}/Views/Shared/{0}.cshtml", "~/Areas/{2}/Views/Shared/{0}.vbhtml" };
    base.ViewLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/Views/{1}/{0}.vbhtml", "~/Views/Shared/{0}.cshtml", "~/Views/Shared/{0}.vbhtml" };
    base.MasterLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/Views/{1}/{0}.vbhtml", "~/Views/Shared/{0}.cshtml", "~/Views/Shared/{0}.vbhtml" };
    base.PartialViewLocationFormats = new string[] { "~/Views/{1}/{0}.cshtml", "~/Views/{1}/{0}.vbhtml", "~/Views/Shared/{0}.cshtml", "~/Views/Shared/{0}.vbhtml" };
    base.FileExtensions = new string[] { "cshtml", "vbhtml" };
} 
```

然后只需在以下位置注册您的自定义视图引擎`Application_Start`：

```
ViewEngines.Engines.Clear();
ViewEngines.Engines.Add(new MyRazorViewEngine()); 
```

在此示例中，我在注册自定义视图引擎之前删除了所有其他默认视图引擎（WebForms 和 Razor）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T04:55:39.167

如果您想知道如何从上面的 Darin 回答开始，这就是我实现它的方式。所有功劳都归功于达林和欧文。

我基本上想把我所有的部分视图放在`Views/Controller/Shared`文件夹下。所以我只替换了“RazorViewEngine”的“PartialViewLocationFormats”属性。添加“ `~/Views/{1}/Shared/{0}.cshtml`”作为列表中的第一个元素，以便 ViewEngine 将`"Views/Controller/Shared`首先查看“”文件夹。

然后正如 Darin 在上面的 global.asax 中解释的那样，清除现有的视图引擎并添加新的。

```
ViewEngines.Engines.Add(new CustomRazorViewEngine()); 
```

希望这可以帮助某人。

```
public class CustomRazorViewEngine : RazorViewEngine
    {
        public CustomRazorViewEngine()
        {
            var newLocationFormat = new[]
                                    {
                                        "~/Views/{1}/Shared/{0}.cshtml",
                                        "~/Views/{1}/{0}.cshtml", 
                                        "~/Views/{1}/{0}.vbhtml", 
                                        "~/Views/Shared/{0}.cshtml", 
                                        "~/Views/Shared/{0}.vbhtml"
                                    };

            PartialViewLocationFormats = newLocationFormat;
        }

    } 
```

# dojo - 使用 DOJO 将 JSON 中的数据填充到选择框中

> ID：14645378
> 
> 赞同：0
> 
> 时间：2013-02-01T11:32:17.160
> 
> 标签：dojo

我正在加载 JSON 数据并将其填充到选择标签上

我为此使用DOJO，我必须使用dojo，

请告诉我出了什么问题

我面临的问题是，在 JSON 中 GetStatesResult 用于声明数组但它不起作用，**它只有在我使用项目代替 GetStatesResult 时才有效**

```
dojo.ready(function() {
                    var stateStore = new dojo.data.ItemFileReadStore({
                        url : "http://localhost:8080/MobilePro/states.json"
                    });
                    function completed(GetStatesResult) {
                        var ref = dom.byId("stateSelect");
                        for ( var i = 0; i < GetStatesResult.length; i++) {
                            var node = domConstruct.create("option", {value: stateStore.getValue(GetStatesResult[i], "Value"), label: stateStore.getValue(GetStatesResult[i], "Desc")});
                            domConstruct.place(node, ref, "last");
                        }
                    }
                    function error(errData, request) {
                        console.log("Failed in loading data.");
                    }
                    stateStore.fetch({
                        onComplete : completed,
                        onError : error
                    });
                }); 
```

这是 JSON

```
{
    "GetStatesResult": [
        {
            "Desc": "--Select--",
            "Value": "-1"
        },
        {
            "Desc": "Alaska",
            "Value": "AK"
        },
        {
            "Desc": "Alabama",
            "Value": "AL"
        },
        {
            "Desc": "Arkansas",
            "Value": "AR"
        },
        {
            "Desc": "Arizona",
            "Value": "AZ"
        }

    ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:55:58.333

ItemFileReadStore 要求项目列表位于名为“items”的属性中。它对其源代码进行了硬编码：

```
this._arrayOfTopLevelItems = dataObject.items; 
```

如果您只使用 ItemFileReadStore 来获取项目，为什么不直接使用 dojo.xhrGet()？如果您真的想使用 ItemFileReadStore，用户 dojo.xhrGet() 来检索数据，将其放入正确的格式（使用 items 属性），然后使用 data 属性将其传递给 ItemFileReadStore 构造函数。就像是：

```
dojo.xhrGet({ url: "whatever", success: function(response) {
   var data = {items: response.GetStatesResult};
   var stateStore = new dojo.data.ItemFileReadStore({ data: data});
}); 
```

# java - 用类名创建一个类

> ID：14645384
> 
> 赞同：0
> 
> 时间：2013-02-01T11:32:42.313
> 
> 标签：java, class, public

我是Java的初学者。谁能帮我理解以下概念？

我在这里所做的是我试图创建一个类`Sample`，我在下面提到，我正在打印`You are in Main Method`

```
class Sample 
{
    public static void main(String args[]) {
        System.out.println("You are in Main Method");
    }

} 
```

并将这个 java 文件保存为**Student.java**。

我在 Eclipse 中没有收到任何错误。

`public`现在，我在这个类前面指定了一个，`public class Sample`我得到了一个错误。

谁能用正确的答案为我澄清一下，因为我发现这很难理解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:34:46.573

在 Java 中，所有具有作用域的类都`public`必须保存在文件中，该文件的名称与此类的名称完全相同。因此，如果您有名为的类`Sample`，则必须将其保存在名为`Sample.java`. 如果类被命名`Student`，那么文件应该被命名`Student.java`

原因之一是`packages`named 和`class`names 可以很容易地映射到真实的系统路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:39:24.553

确保类名与附加“.java”的文件名相同。所以如果你给你的类命名，`Sample`那么文件应该命名为`Sample.java`. 这就是您收到错误的原因，因为您的类名与您为文件命名的名称不同。

对于将来的参考，当您遇到编译器错误/运行时错误时，请确保在此处列出错误。它使处理问题变得更加容易，并且您获得真正解决问题的答案的机会增加了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:39:44.843

所有公共类必须以相同的名称保存。因此，如果您有名为 Sample 的类，则必须将其保存在名为 Sample.java 的文件中

如果您使用包，则必须将文件保存在此文件夹中。Example com.example，您必须将 Sample.java 保存在文件夹 root/com/example 中。

```
package com.example;

public class Sample{
   public static void main(String[] args){
   // put here your code
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:40:40.020

公共类必须有自己的编译单元（即`.java`必须与类名匹配的文件）并编译成`ClassName.class`文件。

这样，JDK 知道它应该在哪里生成输出`.class`文件，而 JVM 知道从哪里加载`.class`文件。

一个例外是内部/嵌套类，它们不需要单独的文件，并且将它们的字节码生成到文件中，例如`OuterClassName#InnerClassName.class`. `.java`内部类与定义它们的外部类存储在同一个文件中。

注意：`ClassName`和`OuterClassName`是`InnerClassName`您定义的类的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T11:42:59.687

首先你阅读修改的可见性我认为你很好地理解你的问题

访问修饰符

```
Same Class  Same Package    Subclass    Other packages 
```

public YYYY protected YYYN 无访问修饰符 YYNN private YNNN

# magento - 如何提醒 Magento 站点管理员有关废弃购物车的信息？

> ID：14645385
> 
> 赞同：0
> 
> 时间：2013-02-01T11:32:45.240
> 
> 标签：magento, magento-1.7, cart

我们如何在每个被遗弃的购物车被遗弃后立即提醒 magento 网站管理员？

它是 Magento EE 中的默认功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:51:25.897

不，它不是 Magento EE 中的默认功能。

您询问如何向站点管理员发出某种灰色区域的事件警报。

假设放弃购物车由以下标准定义（实际上不是定义，但可能适用于您）

*   一个注册用户（为了理智起见忽略来宾用户）在购物车中有产品。
*   该用户未完成结帐并离开店面
*   一段时间过去了（例如 1 天），购物车项目没有调整

假设这种情况是您放弃购物车的情况，我可以提出以下建议：

1.）我会使用 Magento 报价对象（这是在成功结帐后转换为订单的对象。）

查看报价对象，似乎已经有足够的字段可以监控报价的创建时间、更新时间、转换时间以及是否转换。如果对象不包含您需要的数据字段，则没有理由不能扩展它。查看示例快照：

![报价对象的部分字段](../Images/43d97ac993acd30723b55f9ca53f4344.png)

我的（天真的）建议是设置一个计划的作业，以与您定义“废弃购物车”场景（或任何频率）相同的频率运行。

这项工作可以执行以下操作：

1.) 实例化一组引号。2.) 过滤掉已转换的报价 3.) 过滤掉最近创建的报价（小于上述标准） 4.) 过滤掉在相同时间范围内修改的报价

此时，您应该拥有所有已创建报价的列表，可能已更新但在过去 24 小时内未转换（当然取决于您的标准）。

如果你达到了这一点，那么剩下的就是直截了当。

从引号中提取您需要的信息（id 的姓名、号码、电子邮件等），编译您的报告并通过电子邮件发送给管理员。

这是我现在能想到的最好的主意！我在实践中没有这样做...

当然，您可以使用 Google Analytic 设置漏斗和目标，为您提供有关客户的广泛信息，包括废弃的购物车，但这并不能回答您的问题。

# ant - 如果未指定，ant 询问用户要调用哪个目标

> ID：14645388
> 
> 赞同：1
> 
> 时间：2013-02-01T11:32:49.750
> 
> 标签：ant

我有这个 ant`build.xml`文件，里面有 3 个目标：

`target1`,`target2`和`target3`.

如果用户只是运行`ant`而不是显式运行`ant target1`或类似的东西，我想提示用户询问他想调用哪个目标。

请记住，仅当用户在运行时未显式调用目标时才应提示用户`ant`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:59:56.090

Ant 不是一种编程语言，它是一种依赖矩阵语言。两者有很大的不同。

在程序语言中，您可以指定序列的绝对顺序。另外，您在做事方面有更多的灵活性。在 Ant 中，您无需指定执行顺序。您指定各种简短*的如何构建此*步骤，然后指定它们的依赖关系。Ant 会自动计算出所需的执行顺序。

对于开发人员来说，了解 Ant 是最困难的事情之一。当开发人员试图强制执行顺序并最终一遍又一遍地执行同一组目标时，我见过太多次了。我最近有一个构建她花了将近 10 分钟来构建，我重写了它`build.xml`以在 2 分钟内生成相同的构建。

您可以使用`<input/>`获取用户输入，然后使用`<exec>`或`<java>`执行另一个 Ant 进程来执行请求的目标。然而，这打破了 Ant 的工作方式。

默认目标应该是开发人员在编程时希望定期执行的默认目标。它不应该*清理*构建。它不应该运行 10 分钟的测试。它应该编译任何更改的文件，并重建 war 或 jar。这就是我大约 99% 的时间想要的。整个过程需要10秒。

当有人不理解这一点时，我会非常非常生气。当我打字时我讨厌它，`ant`并且我得到有关如何执行我的构建的指示。当默认目标清除我以前的编译时，我真的很生气。而且，如果有人提示我做某事，我充满了一种致命的欲望，那就是用一个大的钝物来打击编写该死的构建文件的人。那是因为我将运行 Ant，在构建发生时执行其他操作，然后在我认为构建完成时返回该命令窗口。没有什么比让我更生气的是，回到一个*构建*只是发现它坐在那里等我告诉它哪个目标。

如果你真的，真的需要这样做。使用名为`build.sh`. 不要`build.xml`因为这样做会影响开发而感到困惑。

你真正需要做的是教大家如何使用 Ant：

*   Ant 将在您键入时列出用户可执行目标`ant -p`。这将列出所有目标及其描述。如果目标没有描述，则不会列出它。这对于用户不应自行执行的内部目标非常有用。（例如，一个目标只是进行某种测试以查看另一个目标是否应该执行）。要完成这项工作，请确保您的目标有描述。当编写 Ant 文件的人对一些我不想要的小目标进行描述时，我很生气，但忘记了我想要的目标的描述（比如编译）。不要让大卫生气。你不想让大卫[生气](http://www.kennethjohnson.us/HulkOutList.html)。
*   为您的组使用默认目标名称。这样，我就知道哪些目标在整个项目中做什么，而不是使用vs. `BUILD`vs. `build-programs`vs.`Compile`的一个项目。我们标准化了[Maven 生命周期](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)名称。他们被记录在案，没有争论或辩论。`build-my-stuff``StuffBuild`
*   不要使用`<ant/>`或`<antcall>`强制执行构建顺序。不要把你`build.xml`分成十几个单独的`build.xml`程序。所有这些都可能破坏 Ant 构建目标依赖矩阵的能力。此外，许多 Ant 工具在构建中显示依赖层次结构，它们不能跨多个构建文件工作。
*   不要将构建包装在 shell 脚本中。如果你这样做，你可能不了解构建是如何工作的。
*   构建不应该更新我的工作目录中由我签出的任何文件。它不应该用遍布各处的各种构建工件来污染我的工作目录。它不应该在工作目录之外做任何事情（除了可能做某种部署，但只有当我运行部署目标时）。事实上，所有构建处理都应该在我的工作目录内的一个子目录中进行。A`clean`应该只删除这个目录。有时，这被称为`build`，有时`dist`。我通常称它为`target`因为我采用了 Maven 命名约定。
*   您的构建脚本应该是构建脚本。它不应该进行结帐或更新——至少不应该自动进行。我知道，如果您将 CruiseControl 用作连续构建过程，则您的 build.xml 中必须具有更新和签出功能。这是我现在使用 Jenkins 的原因之一。

抱歉，这个答案不一定是您要找的答案。你并没有真正说明你在用 Ant 做什么。如果您正在构建，请不要做您想做的事情。如果您正在编写某种程序，请使用真正的编程语言而不是 Ant。

Ant 构建通常应该在一两分钟内完成，并且因为您更改了文件而重做构建不应该超过 30 秒。理解这一点很重要，因为我想鼓励我的开发人员使用 Ant 构建，并使用我的 Jenkins 服务器使用的相同目标。这样，他们就可以像我的 Jenkins 服务器进行官方构建一样测试他们的构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:22:05.793

您可以使用`input`ant 提供的任务并将其设为**默认**目标。

```
<input
message="Please enter Target ID (1,2 or 3):"
validargs="1,2,3"
addproperty="targetID"
/> 
```

使用此属性的值来决定执行哪个目标。

从蚂蚁文档：

> **message**：在构建运行期间向用户显示的消息。
> 
> **validargs**：逗号分隔的字符串，包含有效的输入参数。如果设置，输入任务将拒绝此处未定义的任何输入。您可以根据需要传递任何参数。
> 
> **addproperty**：要从 input.Behaviour 创建的属性的名称等于属性任务，这意味着不能覆盖现有属性。

# java - 如何禁用存储设备（usb）而不是 USB 端口

> ID：14645392
> 
> 赞同：2
> 
> 时间：2013-02-01T11:33:07.100
> 
> 标签：java, usb, device

我搜索了这个，但没有找到任何相关的线程。我们如何禁用特定设备，使其无法通过 USB 连接，就像使用任何病毒或任何程序（最好在 java 中）一样，同时应该为所有其他 USB 设备打开 USB 端口，即通过更改 USB 设备而不是在 USB 端口中。谢谢 ！

# c# - 有没有办法在c#中动态创建属性？

> ID：14645397
> 
> 赞同：0
> 
> 时间：2013-02-01T11:33:19.890
> 
> 标签：c#, properties

```
public class UserDetails
    {
        public string UserID { get; set; }

        public string UserName { get; set; }
    } 
```

在这里我想动态添加属性。**类型**和**属性名称**会随着我想要创建属性的值动态变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:10:02.207

这似乎可行，但需要强制转换才能获得“灵活”属性。

`UserDetails`班级_

```
public class UserDetails
{
    private dynamic _internal;

    public static implicit operator System.Dynamic.ExpandoObject(UserDetails details)
    {
        return details._internal;
    }

    public UserDetails()
    {
        _internal = new System.Dynamic.ExpandoObject();
    }

    public string UserID 
    { 
        get
        {
            return _internal.UserID;
        }
        set
        {
            _internal.UserID = value;
        }
    }

    public string UserName
    { 
        get
        {
            return _internal.UserName;
        }
        set
        {
            _internal.UserName = value;
        }
    }
} 
```

并使用类

```
UserDetails user = new UserDetails();
user.UserName = "bill";
user.UserID = "1";

dynamic dynamicUser = (System.Dynamic.ExpandoObject)user;
dynamicUser.newMember = "check this out!";

Console.WriteLine(user.UserName);
Console.WriteLine(user.UserID);
Console.WriteLine(dynamicUser.UserName);
Console.WriteLine(dynamicUser.UserID);
Console.WriteLine(dynamicUser.newMember); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:57:18.027

似乎您真正需要的只是一个“Property Bag”，即一个无序的容器，您可以在其中插入名称/值对，其中名称是字符串，值是任何类型的对象。

网上有很多 PropertyBag 的实现；这是我拼凑在一起的一个快速而肮脏的例子：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Drawing;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            var properties = new PropertyBag();

            properties["Colour"]   = Color.Red;
            properties["π"]        = Math.PI;
            properties["UserId"]   = "My User ID";
            properties["UserName"] = "Matthew";

            // Enumerate all properties.

            foreach (var property in properties)
            {
                Console.WriteLine(property.Key + " = " + property.Value);
            }

            // Check if property exists:

            if (properties["UserName"] != null)
            {
                Console.WriteLine("[UserName] exists.");
            }

            // Get a property:

            double π = (double)properties["π"];
            Console.WriteLine("Pi = " + π);
        }
    }

    public sealed class PropertyBag: IEnumerable<KeyValuePair<string, object>>
    {
        public object this[string propertyName]
        {
            get
            {
                if (propertyName == null)
                {
                    throw new ArgumentNullException("propertyName");
                }

                if (_dict.ContainsKey(propertyName))
                {
                    return _dict[propertyName];
                }
                else
                {
                    return null;
                }
            }

            set
            {
                if (propertyName == null)
                {
                    throw new ArgumentNullException("propertyName");
                }

                _dict[propertyName] = value;
            }
        }

        public IEnumerator<KeyValuePair<string, object>> GetEnumerator()
        {
            return _dict.GetEnumerator();
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return GetEnumerator();
        }

        private readonly Dictionary<string, object> _dict = new Dictionary<string, object>();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:38:48.547

是的，但它很复杂。检查实施`ICustomTypeDescriptor`。如果你让你的基类实现它，你将能够动态地添加属性。网上有教程，在网上搜索界面。

第二件事可以是使用[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)。
这样你就不能从基类继承，但实现起来要简单得多。

# wix - Msi 卸载不会删除程序功能中的产品条目

> ID：14645401
> 
> 赞同：0
> 
> 时间：2013-02-01T11:33:43.713
> 
> 标签：wix, windows-installer

我正在使用 WiX 3.6 创建一个复制一些 exe 和 dll 的 msi，安装一些 Windows 服务并添加和删除一些注册表项。

WiX 非常出色，使用它在关联的 .net 托管 dll 中的内置功能和自定义操作，我已经能够非常轻松地完成我需要做的一切。

不过，最近开始出现一个烦人的问题。

安装过程没有任何错误，并且完全符合我的预期，但是当我从“程序功能”控制面板或命令行卸载时，产品条目仍保留在“程序功能”列表中。所有其他文件、服务和文件夹都按预期删除，并且卸载完成且未报告任何错误！

如果我再次运行卸载，程序功能条目将被删除！

我使用了安装和卸载的详细日志记录，并通过平台 SDK 中的 Windows Installer 详细日志分析器进行了查看，并且它没有报告任何错误。

我很困惑！

我确定它之前已正确卸载，但我无法确定我做了什么使其开始表现出这种行为。

任何想法，将不胜感激。

PS 我在 Windows 7 64 位机器上运行，并生成一个 32 位安装程序。

PPS 日志太大，无法在此处包含。谁能建议我需要查看哪些条目来控制从“程序功能”列表中删除该条目？

进一步澄清;

我已经检查了下面克里斯托弗回答中的链接，但情况与我的不符。

第一次卸载后，该条目会从“程序功能”列表中消失，但如果刷新或退出控制面板并返回该列表，则会重新出现在列表中。注册表项仍然存在（我已经检查过），所以这就是它仍然出现在列表中的原因。

第二次卸载会从注册表中删除该条目，因此也会从列表中删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:17:11.283

我回顾了我最近对 ​​msi 所做的更改，并发现我所做的更改导致卸载行为异常。

我创建了一个删除一些旧注册表项的功能，我只需要在初始安装期间执行此操作，因此我对该功能设置了如下条件；

```
<Feature Id="RegistryEntries" Level="0">
        <Condition Level="1">(NOT Installed)</Condition>
        <ComponentRef Id="RegKeysToDelete"/>
</Feature> 
```

如果我没有条件，msi 会按预期安装和卸载。

在上述情况下，它可以正确安装并删除注册表项，但卸载会留下添加删除程序中的条目，我需要再次卸载才能完全删除它。

如果我使用以下条件，则 msi 会按预期安装和卸载；

```
<Feature Id="RegistryEntries" Level="0">
        <Condition Level="1">(NOT Installed) OR REMOVE ~= "ALL"</Condition>
        <ComponentRef Id="RegKeysToDelete"/>
</Feature> 
```

我最初并没有满足卸载的需要，因为我不需要使用这些注册表项对卸载执行任何操作。虽然这解决了我遇到的问题，但我不明白为什么第一个条件不评估为 1 会导致 msi 无法按预期卸载，但我想这是另一个问题......

请参阅 MSDN 主题[条件表 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368014%28v=vs.85%29.aspx)（备注部分）

> 应仔细选择条件，以便在安装时不启用某项功能，然后在卸载时禁用该功能。这将孤立该功能，并且无法卸载该产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:18:35.043

这是添加/删除程序（Windows Shell 团队）中的一个错误。如果您关闭或刷新 ARP，您应该会看到您的条目消失。您的 MSI（Windows 安装程序团队）可能没有任何问题。

查看：

[为什么卸载程序退出后我的程序仍显示在“程序和功能”文件夹中？](http://blogs.msdn.com/b/oldnewthing/archive/2011/12/05/10244090.aspx)

这是一个与 WiX 相关的线程：

[http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/quot-Add-Remove-Programs-quot-doesn-t-refresh-sometimes-td6918973.html](http://windows-installer-xml-wix-toolset.687559.n2.nabble.com/quot-Add-Remove-Programs-quot-doesn-t-refresh-sometimes-td6918973.html)

顺便说一句，您实际上并没有第二次运行卸载程序。您只需单击卸载按钮，此时 ARP 会意识到“哦，它不再存在”并被删除。卸载实际上并没有被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T13:11:26.217

这不是一个真正的“答案”，而是放置一些我从您的大量编辑日志中看到的工件的地方：

第一次运行：

(STATE) MSI (s) (B4:3C) [09:18:48:395]：功能：StartServices；安装：本地；请求：空；行动：空

(STATE) MSI (s) (B4:3C) [09:18:48:395]：功能：配置；安装：本地；请求：缺席；行动：缺席

(STATE) MSI (s) (B4:3C) [09:18:48:395]：特征：数据库；安装：本地；请求：缺席；行动：缺席

(STATE) MSI (s) (B4:3C) [09:18:48:395]：特征：RegistryEntries；安装：本地；请求：空；行动：空（状态）MSI（s）（B4：3C）[09：18：48：395]：功能：可执行文件；安装：本地；请求：缺席；行动：缺席 (STATE) MSI (s) (B4:3C) [09:18:48:395]：特征：完成；安装：本地；请求：缺席；行动：缺席 (STATE) MSI (s) (B4:3C) [09:18:48:395]：特征：服务；安装：本地；请求：缺席；行动：缺席 (STATE) MSI (s) (B4:3C) [09:18:48:395]：特征：DLL；安装：本地；请求：缺席；行动：缺席

第二轮：

(STATE) MSI (s) (48:0C) [09:33:17:664]：功能：StartServices；已安装：不存在；请求：空；行动：空（状态）MSI（s）（48:0C）[09:33:17:664]：功能：配置；已安装：不存在；请求：空；行动：空（状态）MSI（s）（48:0C）[09:33:17:664]：功能：数据库；已安装：不存在；请求：空；行动：空（状态）MSI（s）（48:0C）[09:33:17:664]：功能：RegistryEntries；已安装：不存在；请求：空；行动：空（状态）MSI（s）（48:0C）[09:33:17:664]：功能：可执行文件；已安装：不存在；请求：空；行动：空（状态）MSI（s）（48:0C）[09:33:17:664]：功能：完成；已安装：不存在；请求：空；行动：空（状态）MSI（s）（48:0C）[09:33:17:664]：功能：服务；已安装：不存在；请求：空；行动：空（状态）MSI（s）（48:0C）[09:33:17:664]：功能：DLL；已安装：不存在；请求：空；行动：空

底线是我不确定。第一个日志说安装了某些功能并且没有被要求删除。第二个日志说没有安装这些功能，也没有提出请求。对于第二个日志中的每个功能如何说它未安装但我们有一个安装要删除，我有点难过。

要么这是我从未见过的新事物，要么日志被大量编辑或无法代表情况，以至于它们会意外误导。

# ios - iPad 上的持久 WIFI 连接

> ID：14645406
> 
> 赞同：0
> 
> 时间：2013-02-01T11:33:56.540
> 
> 标签：ios, objective-c, ipad, ios5

我需要您对以下问题的意见：

我们有一个应用程序必须在 iPad 3 上运行（始终打开-永不关闭），但如果我们离开设备和应用程序约 30 分钟到 1 小时，我们将面临自动 wifi 断开/掉线（wifi 标志将从状态栏中消失） . 设置和应用程序代码都禁用了自动锁定，并且设备已连接到 MacBook Pro（电源）。

编码：

```
 [[UIApplication sharedApplication] setIdleTimerDisabled:YES]; 
```

这不会发生在所有设备上，我们都有相同的 iOS 版本 (5.1.1)。这只会在 iPAD 3 上发生（iPAD 1/2/mini 很好）。

# google-chrome - 无法通过脚本在谷歌浏览器上添加朋友，说这个脚本被阻止了

> ID：14645407
> 
> 赞同：0
> 
> 时间：2013-02-01T11:33:58.067
> 
> 标签：google-chrome, console

我有一个将成员添加到 Facebook 组的脚本，但我有一个问题是脚本很长，所以我想缩短它，这就是为什么我使用代码通过上传到服务器的源文件调用它的原因；代码是这样的：

`javascript:(function(){document.body.appendChild(document.createElement('script')).src='URL';})();`

但是代码不起作用；它说：

> 拒绝加载脚本“我的脚本 URL”，因为它违反了以下内容安全策略指令：“script-src https:// *.facebook.com http://* .facebook.com https:// *.fbcdn.net http: //* .fbcdn.net *.facebook.net *.google-analytics.com *.virtualearth.net *.google.com 127.0.0.1:* *.spotilocal.com:* chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl 'unsafe-inline' '不安全评估' https:// *.akamaihd.net http://* .akamaihd.net"。

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:38:45.230

> [所有 JavaScript 和所有资源都应该是本地的（所有内容都打包在打包的应用程序中）。](http://developer.chrome.com/apps/app_csp.html)

不要从服务器加载脚本。将其作为资源添加到您的扩展程序中，它应该可以正常工作。

# apache - .htaccess 重写未被读取

> ID：14645408
> 
> 赞同：0
> 
> 时间：2013-02-01T11:34:06.457
> 
> 标签：apache, .htaccess, mod-rewrite

我在 htaccess 中有以下内容：

```
 RewriteEngine on          
  RewriteRule ^list/([A-Za-z0-9_\.-]+).html?$ list.php?table=$1 [QSA,L] 
```

在虚拟主机中：
ServerName localhost DocumentRoot "c:/wamp/www" Options Indexes FollowSymLinks MultiViews AllowOverride All Order allow,deny allow from all

```
 <VirtualHost *:80>    
            DocumentRoot "c:/wamp/www/kurz/site/www"
            ServerName kurz.local
            <Directory c:/wamp/www/kurz/site/www>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
            </Directory>
        </VirtualHost> 
```

在 Apache 配置中：

```
 DocumentRoot "c:/wamp/www/"
        <Directory />
            Options FollowSymLinks
            AllowOverride All
            Order deny,allow
            Deny from all
        </Directory> 
```

现在奇怪的问题是：发生了重写，即使在我删除 .htaccess 之后，我也尝试删除 www 文件夹中的所有其他站点，但是仍然从某个地方发生重写（这些东西缓存吗？我尝试清除浏览器缓存和所有这些），

但

如果我在 .htaccess 中添加一些乱码，我会收到服务器错误，所以我知道它正在被读取！

另一个问题是重写没有传递任何变量，这个链接有效：

[http://kurz.local/admin/list/pages.html](http://kurz.local/admin/list/pages.html)

但它似乎需要：

[http://kurz.local/admin/list.php](http://kurz.local/admin/list.php)

代替

[http://kurz.local/admin/list.php?table=pages](http://kurz.local/admin/list.php?table=pages)

在线这个设置是有效的，但在本地它不是

有任何想法吗 ？我真的很困惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:27:39.260

您的服务器文档根目录是：c:/wamp/www/

您的虚拟主机文档根目录在上面，我认为这是不允许的。

它应该是 ：

c:/wamp/vhosts/site1root

c:/wamp/vhosts/site2root

等等

另请参阅：[https ://httpd.apache.org/docs/2.2/vhosts/name-based.html](https://httpd.apache.org/docs/2.2/vhosts/name-based.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:37:31.443

您没有提到您是否重新启动了服务器？编辑服务器配置文件需要重启，但我相信 .htaccess 文件更改不需要重启 apache 服务器。

# html - HTML5 中的视频流

> ID：14645420
> 
> 赞同：4
> 
> 时间：2013-02-01T11:34:55.780
> 
> 标签：html, video-streaming

如何在 HTML5 中流式传输视频？如果必须，我可以使用最新版本的单个浏览器。
即使浏览器没有加载整个视频，我也需要能够从电影的任何位置开始播放。
[网络RTC](http://www.webrtc.org/)？
我已经看到[了这个问题](https://stackoverflow.com/questions/14263977/html5-video-streaming)，但没有人回答。

> 不允许观看者在任何浏览器中跳到视频的中间。他们必须从头到尾直接观看视频，这并不理想。

这是流式传输的要点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T16:30:47.663

目前，如果您想使用纯 HTML5 并跨浏览器工作，则仅限于使用 <video> 元素进行渐进式流式传输。

虽然这仍然允许用户通过擦洗器或通过设置 .currentTime 以编程方式向前跳过，但在浏览器重新加载足够的内容以舒适流畅地播放时，仍然会有一些缓冲。

平滑流式处理、HLS 等解决方案目前无法跨浏览器运行，因此您需要 Flash 或 Silverlight 插件，但随着 W3C 认可 MPEG-DASH，未来有一些希望，因为此类示例展示了[http://dash- mse-test.appspot.com/release-notes.html](http://dash-mse-test.appspot.com/release-notes.html)

但是，对于今天，如果您想坚持使用 HTML5 解决方案并且您有格式的源代码可以与浏览器一起使用，那么您应该没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T09:55:17.547

与此同时，Chrome 已经实现了 Media Source API。希望其余的会跟进。
[http://www.w3.org/TR/media-source/](http://www.w3.org/TR/media-source/)

### 抽象的

该规范扩展了 HTMLMediaElement 以允许 JavaScript 生成用于播放的媒体流。允许 JavaScript 生成流有助于各种用例，例如自适应流和时移实时流。

# java - 使用 IntelliJ IDEA 处理源和测试的不同语言和目标级别

> ID：14645421
> 
> 赞同：12
> 
> 时间：2013-02-01T11:35:08.797
> 
> 标签：java, maven, intellij-idea

如果有人知道如何在 IDEA 的项目属性中处理这个 pom，我很感兴趣：

```
<plugin>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-compiler-plugin</artifactId>
   <configuration>
       <source>1.3</source>
       <target>1.3</target>
       <testSource>1.5</testSource>
       <testTarget>1.5</testTarget>
   </configuration>
   <version>3.0</version>
</plugin> 
```

我应该设置项目级别 1.3 和模块级别 1.5 还是明智的经文？

以及任何时候当 IDEA 重新加载 maven 项目时，它都会设置从 maven 到 1.3 的语言级别，并且总是抱怨测试类。

但这将作为错误报告提交给 JetBrains。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T12:29:57.087

[此请求](http://youtrack.jetbrains.com/issue/IDEA-85478)跟踪支持的测试源/目标级别。语言级别更改消息也是一个[已知问题](http://youtrack.jetbrains.com/issue/IDEA-81494)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-12T09:03:18.260

如前所述，Idea 尚不支持主要和测试源的不同语言级别。

有一种解决方法可以强制 Idea 在`testSource`导入 Maven 项目时使用定义的语言级别。您可以使用不同的编译器插件设置仅为 Idea 创建单独的 Maven 配置文件：

```
<profiles>

    <profile>
        <id>default</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>3.2</version>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                        <testSource>1.8</testSource>
                        <testTarget>1.8</testTarget>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>

    <profile>
        <id>ide</id>
        <activation>
            <activeByDefault>false</activeByDefault>
            <property>
                <name>idea.maven.embedder.version</name>
            </property>
        </activation>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>3.2</version>
                    <configuration>
                        <source>1.8</source>
                        <target>1.8</target>
                        <testSource>1.8</testSource>
                        <testTarget>1.8</testTarget>
                    </configuration>
                </plugin>
            </plugins>
        </build>
    </profile>

</profile> 
```

# c# - 在 Razor 中渲染 HTML

> ID：14645427
> 
> 赞同：0
> 
> 时间：2013-02-01T11:35:25.583
> 
> 标签：c#, asp.net-mvc, razor

在我的一个视图（.cshtml）中，我需要渲染一个静态文件（A.html），但同时我需要在 A.html 中渲染 B.html。这是因为 B.html 是可重用的。

同样，我需要在 B.html 中渲染 C.html。

我无法将 html 文件转换为 cshtml，在这种情况下我会使用 Html.Partial() :(

有什么建议吗？

# visual-studio - 完成 (intelliSense) 会话的智能缩进效果

> ID：14645429
> 
> 赞同：0
> 
> 时间：2013-02-01T11:35:29.097
> 
> 标签：visual-studio, intellisense, visual-studio-extensions

我正在编写一个 Visual Studio 扩展，它为某种内容类型提供智能感知。我现在面临的问题是当用户键入字符时 Visual Studio 在空行上提供的“自动缩进”效果。

这里完成会话在一个空行开始（通过虚拟空间）：

![前](../Images/b375bd4d771d49c8957652f28c959f0d.png)

请注意其他行上的制表符符号，而带有插入符号的行上没有制表符。

现在，当使用开始输入时，VS 会自动正确地将必要的制表符添加到该行：

![后](../Images/664bbdc0e1196959bbe09888f278a6b7.png)

现在的问题是那些添加的选项卡显然成为用户输入的一部分，因此`CurrentSession.SelectedCompletionSet.SelectBestMatch()`或`Filter()`方法无法在此处找到以“C”开头的当前项目（认为用户已键入 \t\tC 代替）。

如果我在其他不需要自动缩进的地方开始会话，一切正常。

任何的想法？

**编辑**（更多信息）：我使用的代码流非常类似于：

*   好的[在这里](http://code.msdn.microsoft.com/windowsdesktop/Ook-Language-Integration-13038284/sourcecode?fileId=41687&pathId=373876586)
*   vsLua[在这里](https://github.com/yujiang/vsLua/blob/master/LuaLanguage/VS2010/Intellisense/LuaCompletionController.cs)
*   vsClojure[在这里](https://github.com/vsClojure/vsClojure/blob/master/ClojureExtension.Editor/Intellisense/IntellisenseCommandFilter.cs)

在 Lua 和 Clojure 中，您不会遇到这个问题，因为它们从不在虚拟空间上提供智能感知（这意味着它们总是在特定字符集之后开始），并且如果您在字符虚拟空间已经变成真实空间之后开始。

好的，其他的也有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T17:43:05.600

**修改后的答案：**

啊，我明白了。我解释了您的问题，认为您指的是通过键入而不是通过显式命令触发完成。如果您为 C# 编辑器启用“显示空白”，您可以在这里看到我们所做的：当您触发“显示完成”命令时，我们显式地实现了空白，因此您不再在虚拟空间中漂浮。您可能也应该这样做。（或者，您可以通过调整 ApplicableTo 跨度来检测场景并在第一次输入时修复它，但这可能不值得麻烦。）

您可以从 IEditorOperations 中获取应插入的空格。所以MEF导入一个IEditorOperationsFactoryService，然后做：

```
var editorOperations = editorOperationsFactoryService.GetEditorOperations(textView);
var whitespace = editorOperations.GetWhitespaceForVirtualSpace(textView.Caret.Position.VirtualBufferPosition);
if (whitespace.Length != 0)
{
    textView.TextBuffer.Insert(textView.Caret.Position.BufferPosition, whitespace);
} 
```

（有趣的是：当我回答这个问题时，我很想知道我们是如何在 Roslyn C# 和 VB 编辑器中处理这个问题的。答案是“不是”，但在代码的后面，过滤仍然靠运气。）

**原答案：**

根据您对问题的描述，我怀疑您正在像这样实现完成：您知道将要输入一个字符（通过键盘过滤器或`IOleCommandTarget`），并且您触发了 ICompletionSession，其中跟踪跨度是当前插入符号位置。

解决此问题的最佳方法是在按键被按下并进入编辑器之前不触发会话，而是在它之后触发。这就是我们在 Roslyn 实现中为 C# 和 VB 完成所做的。然后，当您在 AugmentCompletionSession 调用并创建 CompletionSet 时，计算“适用于”跨度，该跨度由插入符号周围的非空白字符组成。计算它的最简单方法可能只是`GetWordExtent`从文本结构导航器中调用。

这允许其他场景正常工作。考虑用户键入 C，按转义键，然后继续键入您的标识符的情况。如果您想再次触发完成，则必须进行数学运算以确保“C”无论如何都被视为您的跨度的一部分。

# php - PHP GD PNG 透明黑色边框

> ID：14645437
> 
> 赞同：0
> 
> 时间：2013-02-01T11:35:54.690
> 
> 标签：php, png, gd, transparent

我用 php-gd 创建了一些 png 图像。

这是来源：

```
border = imagecreatefrompng ("./images/border/platinum.png"); 
```

PHP-GD：

[http://imgur.com/9A5Q0sQ](http://imgur.com/9A5Q0sQ)

它有一些未知像素的问题。

如何使用 php-gd 创建原始图像？

我成功地正确创建了图像，但我还有一个问题

```
$lol_border = imagecreatefrompng ("./images/border/platinum.png");

imagealphablending($lol_border, false);
imagesavealpha($lol_border, true);

$lol_border_sx = imagesx($lol_border);
$lol_border_sy = imagesy($lol_border);

imagecopy($lol_bg, $lol_border, 0, 0, 0, 0, $lol_border_sx, $lol_border_sy);

imagepng($lol_bg);
imagedestroy($lol_bg); 
```

这是我的图片：http: [//imgur.com/uui7TiY](http://imgur.com/uui7TiY)

此图像在透明上有黑色边框

我怎么解决这个问题？

# sql - Google Cloud SQL - “SELECT .. AS ..”不会更改列名

> ID：14645443
> 
> 赞同：0
> 
> 时间：2013-02-01T11:36:32.833
> 
> 标签：sql, select, google-cloud-sql

我正在尝试从 google cloud sql 数据库中检索一些列值，并且我想将输出列重命名如下：

```
select id as tot from mytable 
```

我得到的查询结果是这样的：

```
 id
value1
value2
value3
... 
```

如您所见，列名没有按我的意愿更改..我也尝试过

```
select id as 'tot' from mytable 
```

并且（实际上这可行，但显然每个行值都设置为“id”而不是实际行值）

```
select 'id' as 'tot' from mytable 
```

我正在测试的表架构尽可能简单：

```
create table mytable(id varchar(10)) 
```

有没有人遇到过这个问题？我错过了什么或做错了什么？

提前感谢您的帮助，最好的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:16:16.913

使用命令行工具可以按预期工作，并且看起来像 web ui 中的错误。

这是我从命令行工具使用（google_sql.sh）中得到的

```
sql> insert into mytable values('1'), ('2'), ('3');
3 row(s) affected.
sql> select * from mytable;                        
+----+
| id |
+----+
| 1  |
| 2  |
| 3  |
+----+
3 rows in set (0.10 sec)

sql> select id as 'tot' from mytable
-> ;
+-----+
| tot |
+-----+
| 1   |
| 2   |
| 3   |
+-----+
3 rows in set (0.09 sec)

sql> select 'id' as 'tot' from mytable
-> ;
+-----+
| tot |
+-----+
| id  |
| id  |
| id  |
+-----+
3 rows in set (0.09 sec) 
```

我刚刚为此记录了一个错误：[https ://code.google.com/p/googlecloudsql/issues/detail?id=60](https://code.google.com/p/googlecloudsql/issues/detail?id=60)

# ios - 更改基本视图高度不更改 tableview 高度 iPhone

> ID：14645444
> 
> 赞同：0
> 
> 时间：2013-02-01T11:36:36.763
> 
> 标签：ios, objective-c, xcode, uitableview

我有一个视图控制器，它有表视图作为子视图。当我尝试更改 viewcontroller 视图的高度时，tableview 高度没有改变。但是当我手动获取表格视图并设置它的高度时。它正在工作。这是我的示例代码。

> ViewController *view = [[ViewController alloc]init];

在视图控制器中

> UITableview *tableView = [[UITableView alloc]init]; // @property, @synthesize 被添加。tableview 框架大小添加为视图大小。
> 
> [self.view addSubView:tableVIew];

但是当我尝试更改 ViewController 框架时。ViewController 中的 tableview 没有改变，它仍然具有原始值。

任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:38:28.390

尝试添加：

[tableView setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth];

这应该确保表视图在其父视图的框架更改时得到调整大小

# php - wordpress，使存档页面类别特定

> ID：14645445
> 
> 赞同：0
> 
> 时间：2013-02-01T11:36:37.730
> 
> 标签：php, wordpress

我编辑了标准的 wordpress 日历以根据类别突出显示日期的颜色，日历功能使用`get_day_link()`它加载当天的所有帖子，但是我想将其限制为特定类别。这是使days可点击链接的代码，这是对general-template.php文件的编辑，功能是`get_calendar()`

```
 if  ( in_array($day, $daywithevent) && in_array($day, $daywithtraining) ) // are there both events AND training happening today?
            $calendar_output .= '<td class="training-events-calendar"><a  href="' . get_day_link( $thisyear, $thismonth, $day ) . '" title="' . esc_attr( $ak_titles_for_day[ $day ] ) . "\">$day</a>";
    elseif ( in_array($day, $daywithtraining ) ) // how about just training?
            $calendar_output .= '<td class="training-calendar"><a  href="' . get_day_link( $thisyear, $thismonth, $day ) . "\">$day</a>";
    elseif ( in_array($day, $daywithevent)  ) //how about just events?
            $calendar_output .= '<td class="event-calendar"><a  href="' . get_day_link( $thisyear, $thismonth, $day ) . "\">$day</a>";
    else
        $calendar_output .= '<td>'.$day;
    $calendar_output .= '</td>'; 
```

有什么我可以添加到网址的吗？喜欢查询以使这 3 个链接类别具体化吗？好像没有什么要补充的`get_day_link` 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:06:32.513

我没有检查你在做什么，但你可以做的一件事是创建一个与你的类别相同的 date.php 文件并运行一个循环

```
<?php
$query = new WP_Query(array('post_type' => 'post','category__in' => array( 2, 6 ), 'year'=>get_the_date('Y'),'monthnum'=>get_the_date('m'),'day'=>  get_the_date('d')));

 if ($query->have_posts() ) : while ($query->have_posts() ) : $query->the_post();
?>
post details goes here

<?php endwhile; endif; wp_reset_query();?> 
```

# java - Nomenklatura 和钥匙

> ID：14645446
> 
> 赞同：1
> 
> 时间：2013-02-01T11:36:37.803
> 
> 标签：java, properties, internationalization

除了这里，我不知道在哪里可以问。

我们得到了一个可白化的解决方案和不同语言的不同命令，好的。问题是如何命名键。

例如：

```
loginname1=nickname
loginname2=Nickname
loginnames1=nicknames
loginnames2=Nicknames
loginnames3=nickname's
loginnames4=Nickname's
login.error.invalid=Your $loginname1 has not been found. \\
  $loginname2 must contain at least two numbers. $loginnames4 firstchar \\
  must be upcase. ... 
```

好的，这是为了轻松地从名称“昵称”切换到“登录名”。现在我们在不同的语言中使用它。在德语中，loginname1 可能是句子中人的“Benutzernamen”xor“Benutzername”。这现在可能会变得非常有线。

实际上我需要更改登录密钥，“Einloggen”而不是“Anmelden”，例如：

```
login_imperativ_3person_singular=Anmelde 
```

这个结构创造了大约 20 个词的狂野狂欢。

我需要其他语言（如中文（_common，_demure））的任何规则？

# mysql - MYSQL DATE_FORMAT 函数不起作用

> ID：14645448
> 
> 赞同：0
> 
> 时间：2013-02-01T11:36:54.103
> 
> 标签：mysql, date-format

我目前正在制作一份演出指南，并希望将日期格式化为：日 - 月 - 日期

我正在使用以下 mysql 查询 -

```
$query_getEvents = "SELECT gig_guide.date, gig_guide.artist, gig_guide.venue, 
gig_guide.tickets, DATE_FORMAT(gig_guide.date, '%M %e, %Y') 
FROM gig_guide ORDER BY gig_guide.date ASC"; 
```

不幸的是， DATE_FORMAT 没有格式化，并且一直返回标准的 0000-00-00 格式，而不是我想要的格式。

有什么想法可能是这段代码出了什么问题？或者这可能是数据库本身和日期结构的直接问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:53:21.960

如果 gig_guide.date 中没有设置月份，则 mysql 无法将 00.month 表示为字符串。

尝试一些设置了月份的日期。

# image-processing - 如何跟踪图像以生成 SVG 模式？

> ID：14645449
> 
> 赞同：0
> 
> 时间：2013-02-01T11:36:56.237
> 
> 标签：image-processing, graphics, svg

我有一个图像（jpg 和 svg 格式），我想生成一个可以用作我正在处理的 SVG 图像的填充的图案。有没有什么工具或技术可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:19:28.237

当然，只需将图像（jpg 或 svg）放在一个模式中。

```
<defs>
    <pattern id="image1" width="100%" height="100%">
        <image xlink:href="image.jpg" width="100" height="100" />
    </pattern>
</defs> 
```

然后你可以像这样使用它作为填充属性：fill="url(#image1)" />

# php - 在 php 中使用 html 和 java script 标签

> ID：14645453
> 
> 赞同：0
> 
> 时间：2013-02-01T11:37:02.217
> 
> 标签：php, javascript, html

我对在 php 中使用 java 脚本和 html 标签时使用单引号和双引号以及反斜杠感到困惑，任何人都可以澄清一下，我用谷歌搜索了它，但仍然不清楚。我对这个小东西感到困惑。我是编程新手 - 这是我的代码

```
 <?php
if(isset($_GET['id'])) {
echo '<div id="d2">';
include "test2.php";
 echo '</div>'; }
 else
 { 
  echo '<div id="d1">';
 include "insert.php";
 print "<script type=javascript>"
 print "document.getEelementById('alertdiv1').innerHTML='hi' ;"
 print "</script>"
echo '</div>';
     }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:43:23.293

我在您的代码中看不到与引号相关的任何问题。

`<script type=javascript>`— 这不是 type 属性的有效值（现在无论如何都是可选的）。摆脱类型属性。

`document.getEelementById`— 元素中只有 3 个 es，而不是 4 个。

`alertdiv1`— 您的代码中没有具有该 id 的元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:43:44.023

在 PHP 中，您可以用单引号或双引号将字符串括起来。两者都有效：

```
$var = "this is a string";
$var2 = 'this is also a string'; 
```

主要区别在于，如果您的字符串包含变量，并且您希望变量内容被视为字符串的一部分，则需要使用双引号：

```
echo "$var which I made"; 
```

将返回：

> 这是我制作的字符串

当您操作 html、css 和 JavaScript 字符串时，您需要确保不会意外关闭您的 PHP 字符串。例如：

```
echo "<h1 class='myheading'>Heading Text</h1>"; 
```

请注意我是如何使用双引号将字符串括起来的？因为我这样做了，所以我能够在 html 中使用单引号，而无需转义它们。

如果我想在我的字符串中使用双引号，我将不得不转义它们，如下所示：

```
echo "<h1 class=\"myheading\">Heading Text</h1>"; 
```

告诉 PHP 紧随其后的`\`双引号将被视为文字，而不是用于终止字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:42:33.013

嗨，就单引号和双引号而言，当它是一个字符串时并不重要。但是当你在里面使用任何变量时

```
$a = 'hi';
echo '$a' ; 
```

将输出

```
$a 
```

但是当你使用“”

```
$a = 'hi';
    echo "$a" ; 
```

它会打印

```
hi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:45:53.437

基本上，如果您使用“”（引号）作为分隔符，然后使用引号作为字符串的一部分，则必须通过在其前面放置反斜杠来对其进行转义。

例如：

```
$string = "This is my string"; // This is fine as the value of the string doesn't contain any quotation marks (")

$string = "I am including a quote in my string \"To Be Or Not To Be\"."; // This is also fine, as I have escaped the quotation marks inside the string 
```

如果您使用 ''（撇号）作为分隔符，然后又想将它们用作字符串的一部分，则同样适用，您必须使用反斜杠 () 对它们进行转义。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T11:56:23.427

$var = "AAA";
echo '这要花费很多 $var.'; // 这会花费很多 $s。
echo "这要花很多 $var."; // 这要花很多 AAA。

# php - !preg_match - 非美国电话号码

> ID：14645455
> 
> 赞同：0
> 
> 时间：2013-02-01T11:37:07.077
> 
> 标签：php, preg-match

在过去，我只被要求对美国唯一的数字使用 preg_match，例如：

```
elseif(!preg_match("/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/", $telefon))
    {
        $error = "Your message has not been sent as you did not enter your telephone number, please try again.";
        selected_values();
    } 
```

但我不需要扩展以合并英国和德国号码。

这些数字通常用 [空格] 和（括号）格式化。

我尝试了以下操作并取得了一定的成功：

```
elseif(!preg_match("/^[0-9]$/", $telefon)) 
```

任何人都可以帮助我拥有一个包含许多不同电话号码变体的 preg_match 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:50:28.863

[对于英国号码，这里](https://stackoverflow.com/questions/32401/validate-a-uk-phone-number)有一个很好的答案。（不是公认的答案！正如评论所说，这不是一个好的答案）

但是，如果您想接受一般的国际号码，您需要对您接受的内容非常开放——除了括号和空格，您可能还会发现人们使用加号、点、连字符、斜杠等。

国际电话号码格式有一个公认的标准，如下所示：

```
+44.1234567890 
```

国际拨号代码在哪里`+44`（在这种情况下为英国），后跟一个点，然后是数字的其余部分（减去前导零，如果适用），没有任何其他格式。

当然，如果您需要接受用户以他们正在使用的任何格式输入的数字，这将无济于事，但如果您将此格式视为目标 - 即接受用户输入的任何内容并尝试将其重新格式化为该标准。

一旦您决定这样做，该过程就变成了从主号码中剥离任何格式的简单情况。只要位数正确，您就不必担心提供的格式。然后只需在前面加上国家代码和点，就完成了。

# android - 将图像文件保存在外部存储中有效，但图像不会立即显示在图库中

> ID：14645457
> 
> 赞同：1
> 
> 时间：2013-02-01T11:37:10.080
> 
> 标签：android

我在 android 中保存图像时遇到问题。当我按下保存按钮时，图像 (.jpg) 实际保存在外部存储中。但问题是它没有立即显示在我的 GALLERY 中。它在之后显示可能几个小时，几天o所以o永远......为了保存以下我正在使用以下代码：

```
if (item.getItemId() == R.id.item3) {
        String root = Environment.getExternalStorageDirectory().toString();
        myDir = new File(root + "/PaintImage");
        myDir.mkdirs();
        Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        String fname = "Image-" + n + ".jpg";
        file = new File(myDir, fname);
        if (file.exists())
            file.delete();
        FileOutputStream out = null;
        try {
            out = new FileOutputStream(file);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            Toast.makeText(getApplicationContext(), e.getMessage(),
                    Toast.LENGTH_LONG).show();

            e.printStackTrace();
        }
        bm.compress(Bitmap.CompressFormat.JPEG, 100, out);
        Toast.makeText(getApplicationContext(), file.getAbsolutePath(),
                Toast.LENGTH_LONG).show();

        try {
            out.flush();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            out.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

文件夹在 SD 卡中创建，但在保存图像时画廊不会立即显示。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:39:19.930

你必须调用媒体扫描仪来更新你的图书馆

[媒体扫描仪安卓](http://developer.android.com/reference/android/media/MediaScannerConnection.html)

# vb.net - VB.NET：变量范围

> ID：14645464
> 
> 赞同：0
> 
> 时间：2013-02-01T11:37:36.353
> 
> 标签：vb.net, scope

**目标：**填充一些文本框

**问题：**当第一个`TextBox`被填充时，下一个的值会受到影响。它分三个步骤发生。

*第一步。*假设我必须填写两个文本框。公共函数执行此操作：

```
Public Sub FillingTextBoxes(Name As String) 
    'Fetching my object from a collection
    Dim newObject As MyClass = MyCollection.Item(Name)

    'Filling two textboxes
    With newObject 
        TextBox1.Text = .Property1.ToString
        TextBox2.Text = .Property2.ToString 
```

MyCollection 是一个公开的`Microsoft.VisualBasic.Collection`.

*第二步。*填充`TextBox1`触发`TextChanged`事件。另一个公共函数更改同一对象的值：

```
Public Sub SomeOtherFunction(Name As String) 
    Dim newObject As MyClass = MyCollection.Item(Name)
    newObject.Property2 = "something else" 
```

*第三步，来了。*当`SomeOtherFunction`完成运行时，返回`FillingTextBoxes`的值`newObject.Property2`是 now `"something else"`，即使这发生在另一个函数中。

我怎么可能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:05:16.837

如果您在集合中存储的是自定义类，那么您需要实现一个`clone`允许**深度复制**的函数。

克隆功能允许您获取对象引用并返回相同类型的新副本，该副本是对不同对象的新引用。例如，如果你有这个：

```
public class MyClass

    public Property1 as string
    public Property2 as string

    public sub new()
        Property1 = string.empty
        Property2 = string.empty
    end sub

    public function clone() as MyClass
        dim returnThis as new MyClass

        returnThis.Property1 = Property1
        returnThis.Property2 = Property2        

        return returnThis
    end function

end class 
```

然后你可以像这样调用一个新的深拷贝：

```
Public Sub SomeOtherFunction(Name As String) 
    Dim newObject As MyClass = MyCollection.Item(Name).clone()
    newObject.Property2 = "something else" 
```

而且您不会有任何问题，因为您使用的是同一对象的新**副本**，而不是集合中的引用。

# python - 在 Python 接口中定义属性是个好主意吗？

> ID：14645466
> 
> 赞同：1
> 
> 时间：2013-02-01T11:37:48.480
> 
> 标签：python, interface

在这样的接口中定义属性是一种好习惯吗？

```
class MyInterface(object):
    def required_method(self):
        raise NotImplementedError

    @property
    def required_property(self):
        raise NotImplementedError 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:40:02.787

我会为此使用[ABC 类](http://docs.python.org/2/library/abc.html)，但是是的；您甚至可以将 a`@abstractproperty`用于该用例。

```
from abc import ABCMeta, abstractproperty, abstractmethod

class MyInterface(object):
    __metaclass__ = ABCMeta

    @abstractmethod
    def required_method(self):
        pass

    @abstractproperty
    def required_property(self):
        pass 
```

`required_property`ABC 的子类仍然可以作为属性自由实现；ABC 只会验证 的存在`required_property`，而不是它是什么类型。

# javascript - javascript 闭包不能正常工作

> ID：14645471
> 
> 赞同：2
> 
> 时间：2013-02-01T11:38:00.883
> 
> 标签：javascript, jquery

看第一个代码：

```
 var count = 0;
 (function addLinks() {
   var count = 0;//this count var is increasing

   for (var i = 0, link; i < 5; i++) {
     link = document.createElement("a");
     link.innerHTML = "Link " + i;

     link.onclick = function () {
       count++;
       alert(count);
     };

     document.body.appendChild(link);
   }
 })(); 
```

当链接被点击时，计数器变量会为每个链接元素不断增加。这是预期的结果。

第二：

```
var count = 0;
$("p").each(function () {
  var $thisParagraph = $(this);
  var count = 0;//this count var is increasing too.so what is different between them .They both are declared within the scope in which closure was declared

  $thisParagraph.click(function () {
    count++;
    $thisParagraph.find("span").text('clicks: ' + count);
    $thisParagraph.toggleClass("highlight", count % 3 == 0);
  });
}); 
```

这里的闭包函数没有按预期工作。每次单击段落元素时，计数器`var`都会增加，但单击第二个段落元素时不会显示该增量？这是什么原因？为什么会这样？每个段落元素的计数变量没有增加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:43:25.463

你的意思是：

```
var count = 0;
$("p").each(function() {
   var $thisParagraph = $(this);
   //var count = 0; //removed this count, as it re-inits count to 0
   $thisParagraph.click(function() {
   count++;
   $thisParagraph.find("span").text('clicks: ' + count);
   $thisParagraph.toggleClass("highlight", count % 3 == 0);
  });
}); 
```

# c++ - C++ 位运算

> ID：14645473
> 
> 赞同：1
> 
> 时间：2013-02-01T11:38:07.867
> 
> 标签：c++, c, bit-manipulation

我正在对两个整数的各个位进行操作（我在 Ubuntu 机器上使用 g++ 进行编译）。

在一些中间步骤中，我将位表示为

```
q = 11000000000000000000000000000000
q_1 = 00000000000000000000000000000001 
```

现在我想检查 q 和 q_1 的单位位置是否相同。所以，我正在检查`(*q)&1==q_1`if 条件，它工作正常。

但是每当我想检查 q 的单位位置是 0 和 q_1 的位置是 1 时，我想我应该这样做`((*q)&1==0) && (q_1==1)`，但它没有按预期工作。为了调试，我分别`cout`编辑了`((*q)&1==0)`和的值，`(q_1==1)`它们被打印为`1`. 但是， 的值`((*q)&1==0) && (q_1==1)`被打印为 0。为什么？

**编辑：**在函数中，q 是通过引用传递的，所以我使用 *q 来获取值..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T11:40:27.617

在 C 和 C++ 中，位运算`&`符的优先级实际上低于等价运算符`==`。您需要将按位运算符括在括号中。

所以：

```
((*q)&1==0) && (q_1==1) 
```

应该：

```
(((*q)&1)==0) && (q_1==1) 
```

请参阅：[http ://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

# node.js - `npm install mongodb` 出现错误

> ID：14645474
> 
> 赞同：3
> 
> 时间：2013-02-01T11:38:08.777
> 
> 标签：node.js, mongodb, npm, bson

我只是尝试学习 mongodb，当我尝试为 node 安装 mongodb 时，出现如下所示的错误。

顺便说一句，我的环境：`ubuntu 10.04`+ `node v0.6.9`。我也使用 nvm，它在本地切换节点版本。

```
zhkzyth@geek:~/codeRep/Nodejs---MongoDB$ npm install mongodb
npm http GET https://registry.npmjs.org/mongodb
npm http 304 https://registry.npmjs.org/mongodb
npm http GET https://registry.npmjs.org/bson/0.1.5
npm http 304 https://registry.npmjs.org/bson/0.1.5

> bson@0.1.5 install /home/zhkzyth/codeRep/Nodejs---MongoDB/node_modules/mongodb/node_modules/bson
> node install.js || (exit 0)

================================================================================
=                                                                              =
=  Attempting to build bson c++ extension                                      =
=   Windows: no build will be attempted as binaries are prepackaged            =
=   Unix: on failure the package will still install without the C++ extension  =
=                                                                              =
================================================================================
node-gyp clean
gyp ERR! clean error 
gyp ERR! stack Error: UNKNOWN, unknown error 'build'
gyp ERR! System Linux 2.6.32-45-generic
gyp ERR! command "node" "/usr/local/bin/node-gyp" "clean"
gyp ERR! cwd /home/zhkzyth/codeRep/Nodejs---MongoDB/node_modules/mongodb/node_modules/bson
gyp ERR! node -v v0.6.9
gyp ERR! node-gyp -v v0.8.3
gyp ERR! not ok 
make: *** [clean] 错误 1
child process exited with code 2
mongodb@1.2.8 ./node_modules/mongodb 
└── bson@0.1.5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:03:30.177

我不相信您能够在 0.6.19 之前的 Node.js 版本上安装它。这个[问题](https://github.com/mongodb/node-mongodb-native/issues/850)是在 mongodb github 问题页面上提出的，并且由于 Node 切换到使用 gyp 构建扩展而升级失败。

# json - 使用什么 http 动词在正文中发送 JSON？

> ID：14645475
> 
> 赞同：0
> 
> 时间：2013-02-01T11:38:13.750
> 
> 标签：json, http, http-post, http-get

我的 web 应用程序中有一个 UI，它允许用户构建相当复杂的图表，他们可以在其中指定图表类型、图表轴、范围，还可以指定多个过滤器（它们本身可能非常复杂）。我把javascript（其实是CoffeeScript）写得很OO风格，这样图表配置的整个状态就可以序列化成一个非常整洁的JSON文档。当用户想要呈现图表时，会在请求正文中使用该 JSON 文档向服务器发出请求，然后服务器会使用包含图表实际数据的另一个 JSON 文档进行响应。

我的问题是，我应该为这个请求使用什么 HTTP 动词？我目前使用 POST 作为 GET 请求，身体感觉不对，但 POST 并不适合。任何想法都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:42:11.967

是什么让你觉得 POST 不合适？

由于 GET 通过参数化/键值配对使用查询字符串，因此将 json 添加为一个 qs 值对我来说并不合适，而 POST 感觉绝对是正确的选择。

# javascript - 在一个字符串中查找多个字符串片段

> ID：14645479
> 
> 赞同：0
> 
> 时间：2013-02-01T11:38:37.600
> 
> 标签：javascript, string

我在输入框中有一串 CSV 格式的 ID

`12,23,26,32`

我必须检查这个字符串是否包含 23 或 24，如果是则返回 false，否则返回 true

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:45:16.583

使用 indexOf。您可以检查它是否包含子字符串。如果未找到，则返回 -1

```
var str = "12,23,26,32"
return !(str.indexOf("23")!=-1 || str.indexOf("24")!=-1) // Dont have 23 or 24 
```

=======编辑=======

就像@Matt 在评论中所说，这个解决方案也适用于“12,239,26,32”，这不是重点。

在检查 indexOf 之前进行拆分，然后您将获得逗号之间的元素。

```
var array = "12,23,26,32".split(",");
return !(array.indexOf("23")!=-1 || array.indexOf("24")!=-1) // Dont have 23 or 24 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:49:28.993

```
!/(^|,)2[34](,|$)/.test( str ); 
```

或者是否可能存在空格

```
!/(^|,)\s*2[34]\s*(,|$)/.test( str ); 
```

如果字符串参数与正则表达式匹配或不匹配， RegExp`test`方法将返回。反转测试调用的结果。`true``false``!`

`^`是字符串开头的元字符，因此`(^|,)`表示“字符串开头”或“一个逗号字符”。

不能这样写`[^,]`，因为这意味着“一个不是逗号的字符”，也不能这样写`[,^]`，因为这意味着“一个字符既可以是逗号，也可以是文字`^`字符。

`2[34]`表示 2 后跟 3 或 4。
`(,|$)`表示逗号或`$`字符串的结尾。
`\s*`表示零个或多个空格字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:47:13.057

```
if (/(?:^|,)(23|24)(?:,|$)/.test("12,23,26,32")) {
   /* found 23 or 24 */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:47:31.627

尝试这个

```
var str = "12,23,26,32";

var isFound = (str.indexOf('23') || str.indexOf('24')) > -1; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-01T11:42:36.510

```
var str = "12,23,26,32";

var obj = str.split(",");

var isFound = false;

for(i=0; i < obj.length; i++)
{
     if(obj[i] == "23" || obj[i] == "24")
     {
          isFound = true;
          break;
     }
}
return isFound; 
```

# windows - 是否可以在虚拟机 Win8 上对 CUDA 进行编码？

> ID：14645484
> 
> 赞同：2
> 
> 时间：2013-02-01T11:38:48.767
> 
> 标签：windows, ubuntu, cuda, virtualbox

我知道通过使用虚拟框，显卡不能被所有措施使用，所以我认为这是不可能的，但我也认为在 Windows 上编码 cuda 至少设置 CUDA 开发环境更容易（不幸的是）因此如果可能的话我打算在我的 Ubuntu 上将 win8 设置为虚拟机。

我确实想使用 win，因为我在 optimus Nvidia 机器上，因此 Ubuntu 存在驱动程序问题。此外，由于该驱动程序缺陷，Eclipse 中的代码编译不起作用。如果我使用 Win，可能会解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:10:31.063

1.  即使您在虚拟框中成功设置环境以编译 cuda 代码并且您在那里编译了 cuda 代码，它也将毫无用处，因为您将无法在虚拟框中运行代码。
2.  是的，你是绝对正确的，在 optimus nvidia 卡上安装驱动程序是一项艰巨的任务。我也遇到了同样的问题。但是随着 cuda 5 的发布，在 Ubuntu 上安装 cuda 非常简单。

遵循这些简单的步骤。

## 驱动安装##

1.  从这里下载 cuda 5。（32 位或 64 位取决于操作系统）

    > [库达 5 下载](https://developer.nvidia.com/cuda-downloads)

2.  通过以下命令安装所需的工具

    > sudo apt-get install freeglut3-dev build-essential libx11-dev libxmu-dev libxi-dev libgl1-mesa-glx libglu1-mesa libglu1-mesa-dev

3.  接下来，将不必要的模块列入黑名单

    > sudo gedit /etc/modprobe.d/blacklist.conf

    最后添加以下行

    > 黑名单 vga16fb
    > 
    > 新黑名单
    > 
    > 黑名单 rivafb
    > 
    > 黑名单 nvidiafb
    > 
    > 黑名单 rivatv

    并重新启动您的系统。

4.  重启后按Ctrl+Alt+F1。在那里登录并输入以下命令。

    > 服务 lightdm 停止

5.  转到您下载 cuda 5 的位置。在我的情况下，它在桌面上。

    > 光盘桌面

6.  让它从shell运行

    > chmod +x cuda_5.3.35_linux*****

7.  从终端运行

    > ./cuda_5.3.35_linux*****

8.  接受它，当要求安装驱动程序时，按 y 和 n 获取 cudatoolkit 和 gpucomputingsdk

9.  现在重新启动，您已完成驱动程序安装。

10.  要安装 cudatoolkit 和 gpucomputingsdk，请点击此链接

## [在 Ubuntu 上安装 Cuda 4.2](https://help.ubuntu.com/community/Cuda)

# android - Android Maps v2 - 动画标记

> ID：14645489
> 
> 赞同：2
> 
> 时间：2013-02-01T11:39:13.143
> 
> 标签：android, android-mapview, android-animation, android-maps-v2

我正在为地图（v2）创建一个集群功能。我将位置分组到集群中，然后将集群显示为自定义标记：

![在此处输入图像描述](../Images/61f7f56abcc49545fd2ea9be49a8752b.png)

这很好用，但我想在创建和拆分集群时创建一个动画。我通过在标记（注释）上创建 UIView 动画成功地使用 iOS 做到了这一点。我在网上找不到任何适用于 android 的代码/提示。

我设法得到一个简单的 ImageView 作为覆盖以类似于一个集群，然后使用 a`TranslateAnimation`来获得所需的动画。最后我删除了这个视图并添加了标记。

有没有更好的方法来为标记设置动画？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-30T14:42:44.273

通过为 Marker 对象设置动画而不是在 GoogleMap 前面添加和删除视图，您走在正确的轨道上，但是如果您使用 Animator 对象为 Marker 设置动画，您可以获得更好的性能。

使用 Handler 和延迟的 Runnable 方法，您可以有效地对目标帧速率进行硬编码。如果您以太低的延迟发布 Runnable，您的动画将需要更长的时间来执行。如果太高，帧速率会太慢，即使在功能强大的设备上也会显得断断续续。使用 Animator 优于 Handler 和延迟的 Runnable 的优点是它只会调用 onAnimationUpdate() 以在系统可以处理的情况下绘制下一帧。

在我的集群库[Clusterkraf](https://github.com/twotoasters/clusterkraf)中，我使用 ObjectAnimator（来自[NineOldAndroids](http://nineoldandroids.com/)以实现向后兼容性）在更改缩放级别时为集群过渡设置动画。它可以在我的 Galaxy Nexus 上平滑地为大约 100 个标记设置动画。

下面是一个片段，其中概述了如何使其工作。

```
class ClusterTransitionsAnimation implements AnimatorListener, AnimatorUpdateListener {

    private ObjectAnimator animator;
    private AnimatedTransitionState state;
    private ClusterTransitions transitions;
    private Marker[] animatedMarkers;

    void animate(ClusterTransitions transitions) {
        if (this.state == null) {
            Options options = optionsRef.get();
            Host host = hostRef.get();
            if (options != null && host != null) {
                this.state = new AnimatedTransitionState(transitions.animated);
                this.transitions = transitions;
                animator = ObjectAnimator.ofFloat(this.state, "value", 0f, 1f);
                animator.addListener(this);
                animator.addUpdateListener(this);
                animator.setDuration(options.getTransitionDuration());
                animator.setInterpolator(options.getTransitionInterpolator());
                host.onClusterTransitionStarting();
                animator.start();
            }
        }
    }

    @Override
        public void onAnimationStart(Animator animator) {
            // Add animatedMarkers to map, omitted for brevity
        }

    @Override
    public void onAnimationUpdate(ValueAnimator animator) {
        if (state != null && animatedMarkers != null) {
            LatLng[] positions = state.getPositions();
            for (int i = 0; i < animatedMarkers.length; i++) {
                animatedMarkers[i].setPosition(positions[i]);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T08:43:53.483

下面的代码是正确的，但我会强调一些东西。我会使用 16 毫秒 == 60fps。人眼无法区分小于 16 毫秒，因此：

```
final LatLng target = NEW_LOCATION;

final long duration = 400;
final Handler handler = new Handler();
final long start = SystemClock.uptimeMillis();
Projection proj = map.getProjection();

Point startPoint = proj.toScreenLocation(marker.getPosition());
final LatLng startLatLng = proj.fromScreenLocation(startPoint);

final Interpolator interpolator = new LinearInterpolator();
handler.post(new Runnable() {
    @Override
    public void run() {
        long elapsed = SystemClock.uptimeMillis() - start;
        float t = interpolator.getInterpolation((float) elapsed / duration);
        double lng = t * target.longitude + (1 - t) * startLatLng.longitude;
        double lat = t * target.latitude + (1 - t) * startLatLng.latitude;
        marker.setPosition(new LatLng(lat, lng));
        if (t < 1.0) {
            // Post again 16ms later == 60 frames per second
            handler.postDelayed(this, 16);
        } else {
            // animation ended
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T15:26:40.620

我找到了一个可行的[解决方案](https://stackoverflow.com/a/14079312/1472887)：

```
final LatLng target = NEW_LOCATION;

final long duration = 400;
final Handler handler = new Handler();
final long start = SystemClock.uptimeMillis();
Projection proj = map.getProjection();

Point startPoint = proj.toScreenLocation(marker.getPosition());
final LatLng startLatLng = proj.fromScreenLocation(startPoint);

final Interpolator interpolator = new LinearInterpolator();
handler.post(new Runnable() {
    @Override
    public void run() {
        long elapsed = SystemClock.uptimeMillis() - start;
        float t = interpolator.getInterpolation((float) elapsed / duration);
        double lng = t * target.longitude + (1 - t) * startLatLng.longitude;
        double lat = t * target.latitude + (1 - t) * startLatLng.latitude;
        marker.setPosition(new LatLng(lat, lng));
        if (t < 1.0) {
            // Post again 10ms later.
            handler.postDelayed(this, 10);
        } else {
            // animation ended
        }
    }
}); 
```

同时大约20个有点慢，也许有更好的方法？

# java - 对多维 ArrayList 使用 Androids sharedpreferences

> ID：14645490
> 
> 赞同：0
> 
> 时间：2013-02-01T11:39:16.900
> 
> 标签：java, android, sharedpreferences

我试图将包含多个 ArrayLists 字符串的 ArrayList 保存到 Android 的 sharedpreferences 中。我还想支持 API 级别 8 和更高级别，并且如果可能的话避免使用数据库。我需要做这样的事情[还是](https://stackoverflow.com/questions/12150597/save-an-arraylist-of-strings-to-shared-preferences)有更简单的方法来简单地保存我的 ArrayLists？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:48:41.400

为此，我会使用 JSON。请参阅：http: [//developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)

网上也有不错的 JSON 教程。

# android - 如何仅在手机上运行android应用程序，而不是在标签上

> ID：14645491
> 
> 赞同：2
> 
> 时间：2013-02-01T11:39:18.110
> 
> 标签：android

我开发了一款只能在手机上运行的 android 应用程序。但它也可以在 Tab 上运行我在 Manifest 文件中进行了如下更改-

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="false"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="false" /> 
```

但它不起作用。使用仅在手机上而不是在 android 选项卡上运行的代码设置 android 应用程序的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T22:00:13.070

只需在 Manifest.xml 中添加这一行：

```
<uses-feature android:name="android.hardware.telephony"/> 
```

如果设备没有拨号器和数据网络，则此设备将被排除在**GooglePlayStore**之外。

检查这个：[谷歌播放过滤](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#market-feature-filtering)

另一方面，如果您更改**supports-screens**属性，您将遇到具有高密度显示器的设备的问题。

祝你好运！

# twitter-bootstrap - 脚本标签影响引导程序中的复选框内联样式

> ID：14645493
> 
> 赞同：1
> 
> 时间：2013-02-01T11:39:21.590
> 
> 标签：twitter-bootstrap

我正在为我的 Emberjs 应用程序使用引导程序...我遍历一个数组以绘制我的复选框...但是我的脚本标签会影响内联复选框之间的间距...

```
 <div class="row-fluid">
     <script id="metamorph-933-start" type="text/x-placeholder"></script>       
        <label class="checkbox inline">     
        <input id="ember4029" class="ember-view ember-checkbox" type="checkbox">        
        Firstchance 
      </label>      
   <script id="metamorph-933-end" type="text/x-placeholder"></script><script id="metamorph-934-start" type="text/x-placeholder"></script>       
        <label class="checkbox inline">     
        <input id="ember4030" class="ember-view ember-checkbox" type="checkbox">        
        secondchance        
      </label>      
   <script id="metamorph-934-end" type="text/x-placeholder"></script><script id="metamorph-935-start" type="text/x-placeholder"></script>       
        <label class="checkbox inline">     
        <input id="ember4031" class="ember-view ember-checkbox" type="checkbox">        
        thirdchance     
      </label>      
   <script id="metamorph-935-end" type="text/x-placeholder"></script><script id="metamorph-936-start" type="text/x-placeholder"></script>       
        <label class="checkbox inline">     
        <input id="ember4032" class="ember-view ember-checkbox" type="checkbox">        
        finalchance     
      </label>      
   <script id="metamorph-936-end" type="text/x-placeholder"></script><script id="metamorph-937-end" type="text/x-placeholder"></script>

  </div> 
```

这是间距不合适的小提琴，

[http://jsfiddle.net/4XZMb/1249/](http://jsfiddle.net/4XZMb/1249/)

这是没有任何脚本标签的正确间隔小提琴

[http://jsfiddle.net/4XZMb/1248/](http://jsfiddle.net/4XZMb/1248/)

我的问题是脚本标签如何影响我的风格......？？？

我怎样才能在不添加任何额外样式的情况下在这里获得适当的间距......？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:51:11.067

“适当间隔”的版本在`<label class="checkbox inline">`其他标签之后有`<label class="checkbox inline">`标签。这些标签由 bootstrap 中的以下 CSS 设置样式：

```
.checkbox.inline + .checkbox.inline {
margin-left: 10px;
} 
```

带有脚本标签的版本在标签标签周围插入了脚本标签。这可以防止标签标签匹配上面的选择器，并且它们会丢失左边距。一个简单的解决方法是将您自己的类添加到您自己的 CSS 中，例如

```
.fluid-row-checkbox {
margin-left: 10px;
} 
```

然后将此类添加到您的第二个、第三个和第四个标签中：

`<label class="checkbox inline fluid-row-checkbox">`

还有其他可能更好的方法来解决这个问题，但这是最简单的。

# javascript - 0 或 x - y 字符的正则表达式

> ID：14645503
> 
> 赞同：2
> 
> 时间：2013-02-01T11:40:01.707
> 
> 标签：javascript, regex

我正在尝试为验证 JavaScript 编写一个正则表达式，它允许用户输入 4-9 个数字（作为字符串长度），但用户也应该能够将该字段留空。

4-9 数字部分很简单：`^[0-9]{4,9}$`，但我在“不需要”部分苦苦挣扎。

我已经尝试过`^[0-9]{4,9}|[0-9]{0}$`，但这根本不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T11:41:29.490

只需将现有模式设为可选：

```
^([0-9]{4,9})?$ 
```

# jquery - jQuery可拖动问题

> ID：14645510
> 
> 赞同：2
> 
> 时间：2013-02-01T11:40:25.700
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-draggable

基本上我想要的是，在拖动时，如果我走出收容区域并在那里释放鼠标点击，可拖动元素只会粘在我离开收容区域的边界上。当我将光标移回时，元素会回到光标上。当您只是移动光标（而不是拖动）并且元素仍在被拖动时，它看起来并不好。

[这](http://jsfiddle.net/JdbaS/)是一个可以玩的小提琴。只需在输出区域外拖动并释放光标，您就会明白我在说什么。

我想了两种方法

1.  在拖动时将鼠标移动限制到包含区域（我搜索了它但没有找到如何操作。也许那不可能？）

2.  如果光标离开包含区域，则将可拖动对象恢复到其位置。（仍然找不到这样做的方法）

有什么方法或更聪明的想法来实现这一目标？？？

`Relevant Code`（对于堆栈溢出）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:52:33.930

我认为这是因为它在 iframe 中。这就像在浏览器之外拖动一样。mouseup 事件不会在页面中注册。

看起来 chrome 不允许这样做，但 Firefox 允许。

试试这个： [小提琴](http://jsfiddle.net/4ESCu/4/)

```
$('body').mouseleave(function()
    {
    $(document).trigger("mouseup");
    }); 
```

这是您的解决方案，无需每次都设置事件。

矫枉过正的版本（这将允许用户暂时（1 秒）离开 iframe 并返回而不丢失拖动）：

```
$('body').prop('mouseuptimer',null)
    .mouseleave(function()
        {
        var objTimer = setTimeout(function() 
            {
            $(document).trigger("mouseup")
            }, 1000);
        $(document).prop('mouseuptimer', objTimer);
        })
    .mouseenter(function()
        {
        var objTimer = $(document).prop('mouseuptimer');
        if (objTimer) clearTimeout(objTimer);
        });
$(function() 
    {
    $( "#sortable" ).sortable({revert: true });
    $( "#draggable" ).draggable({
        connectToSortable: "#sortable",
        helper: "clone",
        revert: "invalid" });
    $( "ul, li" ).disableSelection();
    }); 
```

编辑：

要回答您的第一个问题：

您可以通过在选项中添加“包含”来包含可拖动对象，即：

```
$( "#draggable" ).draggable({
    connectToSortable: "#sortable",
    helper: "clone",
    revert: "invalid",
    containment: "document" }); 
```

但这只能包含拖动到边界框的元素（在本例中为“文档”，但也可以是“父”或“#somediv”）。鼠标光标仍然可以移动到 iframe 之外的任何地方，并从那里调度事件，超出 iframe 文档的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:31:00.653

好的，我找到了解决方法。适用于 IE8 和 Chrome。

为可拖动元素添加了此代码。

```
drag: function(){
     $('body').mouseleave(function(){
          $('body').mouseup();
     });
} 
```

[工作小提琴](http://jsfiddle.net/JdbaS/1/)

**编辑：**感谢[Rembunator](https://stackoverflow.com/users/2004315/rembunator)指出缺陷，我决定使用[.one()](http://api.jquery.com/one/)以获得更好的性能，并将代码从拖动转移到开始

```
start: function(){
     $('body').one("mouseleave", function(){
          $('body').mouseup();
     });
} 
```

**编辑2：**

终于找到了解决办法。

这是代码：

```
var flag=true;
start: function( event, ui ){
    if(flag){
         flag = false;
         $('body').one("mouseleave", function(){
             $('body').mouseup();
              flag = true; //event occured, rebind
          });
     }
     else{
         flag = false;
     }
} 
```

感谢[Rembunator](https://stackoverflow.com/users/2004315/rembunator)的帮助

# node.js - 玉模板中的节点验证

> ID：14645515
> 
> 赞同：1
> 
> 时间：2013-02-01T11:40:35.110
> 
> 标签：node.js, validation, modal-dialog, pug

我对 node.js 非常陌生，并且在 PHP 方面有多年的经验，所以我对以下问题的思考可能会受到我支持的方式的影响。

我目前正在使用带有基础 CSS 的节点设置，并使用它们的[显示模式](http://foundation.zurb.com/docs/reveal.php)窗口来显示我的大部分表单。我想避免在提交时重新显示它们，而是在客户端验证它们。

基本用户创建将具有如下字段：

*   姓名
*   电子邮件
*   密码
*   确认密码

形成我可以`require`用来验证输入的基本验证，

```
 input(type="text",name="user[email]",placeholder="@",required) 
```

但我也希望客户端在用户输入后检查电子邮件是否已经存在，以及密码是否正确。

我一直在阅读有关[验证器模块](https://github.com/chriso/node-validator)的信息，但从我阅读的文档中，我只了解如何在值发布后对其进行验证。我也见过[express-form](https://github.com/dandean/express-form)模块，但它不再维护，所以我宁愿避免它。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T14:45:39.380

我对验证器或快速表单没有任何经验，我不确定您是否需要它们来实现您想要实现的目标。您尝试做的大部分工作将是客户端工作（例如，用于验证数据的 jQuery Ajax 调用）无论您使用 Node.js 后端还是 PHP 后端，这种客户端代码都应该几乎相同.

一旦您确定了在 Jade 页面中包含 JavaScript 的正确语法，在您的 Jade 页面中注入初始 JavaScript 应该非常简单。页面上的 DOM 事件连接以进行 Ajax 调用（onClick、onTextChanged 等）在概念上与编写纯 HTML 页面相同。

在您的 Node.js 服务器端，您需要一个路由来处理请求，以验证电子邮件地址是否已经存在，并且该代码很可能会返回 JSON，您将在客户端表单中使用它来显示结果对用户进行验证。但这也应该与您使用 PHP 后端所做的非常相似。

# ios - 从服务器的响应流中检索文件内容并写入文件

> ID：14645516
> 
> 赞同：1
> 
> 时间：2013-02-01T11:40:37.043
> 
> 标签：ios, objective-c

我使用以下代码从服务器获取数据：

```
AFHTTPRequestOperation *operation = [self HTTPRequestOperationWithRequest:request
         success:^(AFHTTPRequestOperation *operation, id responseObject){}
         failure:^(AFHTTPRequestOperation *operation, NSError *error){}];

operation.outputStream = [NSOutputStream outputStreamToFileAtPath:
       [DOCUMENTS_FOLDER stringByAppendingPathComponent:@"test.m4v"] append:YES]; 
```

问题是：服务器发送了 512 KB 的数据，但它写入了超过 900 KB。我认为原因是：它将每个字节的十六进制表示写入文件 NOT BINARY。

请帮助：如何编写 BINARY 数据？

# java - 如何将 java 对象传递给 HTTP Post 参数

> ID：14645518
> 
> 赞同：1
> 
> 时间：2013-02-01T11:40:39.940
> 
> 标签：java, http-post

我想使用 java 对象传递给 HTTP POST 参数`java.net.*`？该对象包含多个参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:46:48.683

尝试

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(REQUEST_URL);
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//put here in nameValuePairs request parameters

UrlEncodedFormEntity form;
form = new UrlEncodedFormEntity(nameValuePairs, "UTF-8");
form.setContentEncoding(HTTP.UTF_8);
httppost.setEntity(form);

HttpResponse response = httpclient.execute(httppost); 
```

# tridion - 生产环境中 2011 SP1 中的内容搬运工包倒车

> ID：14645520
> 
> 赞同：4
> 
> 时间：2013-02-01T11:40:40.473
> 
> 标签：tridion, tridion-2011

是否需要（是否可取）在生产环境中拥有 Content Porter (cp) 服务器许可证？

反转包是否需要 CP Server 许可证？

它要多少钱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:20:12.310

如果您需要调整 BluePrint 或将一些生产内容复制到较低的环境以进行测试，它会很有用。更常见的是看到整个 CM 数据库备份并恢复到较低的环境，但由于工作流交错等原因，这可能并非在所有情况下都是可能的。

至于成本 - 您需要联系您的 SDL Tridion 销售代表。

# c# - 如何在一个存储过程中创建一个动态数据透视表，该过程需要 12 个月的当前日期在报告中？

> ID：14645522
> 
> 赞同：0
> 
> 时间：2013-02-01T11:40:43.390
> 
> 标签：c#, sql, report, pivot

我无法在 SQL 语句中将当前日期的 12 个月用于我的 Stimulsoft 报告。sql 表结构是这样的（图 1），注意我是巴西人，所以文化设置为 pt-BR (dd/mm/yyyy)

这是 SQL 表

[http://img534.imageshack.us/img534/1093/clipboard02xva.jpg](http://img534.imageshack.us/img534/1093/clipboard02xva.jpg)

我想做这个，过去 12 个月的当前日期是 01/02/2013 所以我们采取：

```
| DACP_Id | FEB 2012 | MAR 2012 | ABR 2012 ... | FEB 2013 
```

... 以及回到 2013 年 2 月的所有月份。数据透视表中月份内的行是当前月份的 DACP_Value。

我是 SQL 新手，所以希望您能提供帮助 :) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:01:07.430

从有限的样本数据中很难判断是否`DACP_Id`会重复多行和多日期。但是如果你想要`PIVOT`一个未知数量的日期或者可以随时更改的日期，那么你将需要使用动态 SQL。

您的代码将与此类似：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(DateName(month, DACP_date) +'_'+cast(Datepart(year, DACP_Date) as varchar(10))) 
                    from yourtable  
                    group by Datepart(month, DACP_date), Datepart(year, DACP_Date), DACP_date
                    order by DACP_date
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
    = 'select DACP_id, '+@cols+'
       from
       (
         select DACP_id, 
            DateName(month, DACP_date) +''_''+cast(Datepart(year, DACP_Date) as varchar(10)) date, 
            DACP_Value 
         from yourtable
       ) p
       pivot
       (
          sum(DACP_Value)
          for date in('+@cols+')
       ) piv'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/3205a/5)

正如您从演示中看到的那样，您会在该月获得多行，这是因为`DACP_ID`样本数据中的 是不同的。但这将是您在不提前知道值的情况下进行调整的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:04:10.860

我倾向于不使用动态枢轴，并处理应用程序代码中的标头：

```
WITH Data AS
(   SELECT  DACP_ID,
            DACP_Value,
            [MonthNum] = 12 - DATEDIFF(MONTH, DACP_Date, CURRENT_TIMESTAMP)
    FROM    T
    WHERE   DATEDIFF(MONTH, DACP_Date, CURRENT_TIMESTAMP) BETWEEN 0 AND 12
)   
SELECT  *
FROM    Data
        PIVOT
        (   SUM(DACP_Value)
            FOR MonthNum IN ([0], [1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12])
        ) pvt; 
```

如果您真的需要 Columns 标题，请使用：

```
DECLARE @Col NVARCHAR(MAX) = 
    (   SELECT  ', ' + QUOTENAME(CONVERT(VARCHAR, DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - (12 - Number), 0), 112)) + ' = [' + CAST(number AS VARCHAR) + ']'
        FROM    Master..spt_values
        WHERE   Type = 'P'
        AND     number BETWEEN 0 AND 12
        FOR XML PATH(''), TYPE
    ).value('.', 'NVARCHAR(MAX)');

DECLARE @SQL NVARCHAR(MAX) = 
        N'WITH Data AS
        (   SELECT  DACP_ID,
                    DACP_Value,
                    [MonthNum] = 12 - DATEDIFF(MONTH, DACP_Date, CURRENT_TIMESTAMP)
            FROM    T
            WHERE   DATEDIFF(MONTH, DACP_Date, CURRENT_TIMESTAMP) BETWEEN 0 AND 12
        )   
        SELECT  DACP_ID' + @Col + '
        FROM    Data
                PIVOT
                (   SUM(DACP_Value)
                    FOR MonthNum IN ([0], [1], [2], [3], [4], [5], [6], [7], [8], [9], [10], [11], [12])
                ) pvt;';

EXECUTE SP_EXECUTESQL @SQL; 
```

您可以`112`在将日期转换为 varchar 为各种数字时更改该值，以更改列标题中日期的格式（如问题中所述，103 将为您提供 dd/mm/yyyy）。

* * *

**[SQL Fiddle](http://www.sqlfiddle.com/#!3/3205a/14)**（无耻地从@bluefeet 那里偷来，他打败了我的答案）。我在这里留下了这个答案，因为它略有不同，因为它将提供 13 列（去年和当前月份），无论表中是否存在该月的数据。

# android - 如何将 DynamicLayout 锚定到画布底部？

> ID：14645524
> 
> 赞同：1
> 
> 时间：2013-02-01T11:40:46.827
> 
> 标签：android, android-layout, android-view

我正在处理一个自定义`View`，其中包含我想锚定到画布底部的经常更新的文本。

文本长度也会发生变化，我希望它可以换行，在需要更多行时向上移动屏幕。（`DynamicLayout`因此似乎是自动化这个的可靠选择）

但是，我在文档中没有看到任何关于指定在画布上绘制文本的位置或应该“增长”的方向的选项。

这是我的初始化：

```
TextPaint subtleTextPaint = new TextPaint();
DynamicLayout dl = new DynamicLayout(text,subtleTextPaint,getWidth()
    ,Layout.Alignment.ALIGN_CENTER,1,0,true); 
```

在 中`onDraw()`，我只是将画布传递给`DynamicLayout`对象，如下所示：

```
dl.draw(c); 
```

现在，文本绘制在屏幕的最顶部，随着文本变长，文字会向下换行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:38:34.997

经过相当多的搜索，我没有找到任何我想要的东西。所以，以真正的黑客风格，我创建了自己的解决方案。通过扩展`DynamicLayout`类并覆盖`getLineTop()`函数，我能够实现我正在寻找的功能。

我已经在[这里发布了源代码](http://kevinhulin.com/wordpress/?p=9)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:47:00.180

我认为第一个你得到屏幕的宽度，然后根据你的屏幕尺寸设置带有 X y 的文本，这将是下面的片段

```
 width=canvas.getWidth();

        if(width==720)
        {
            canvas.drawText(String, x , y, drawText);
        }
        else if(width==480)
        {
            canvas.drawText(String, x , (y, drawText);
        }
        else 
        {
            canvas.drawText(String, x , (y, drawText);
        } 
```

# java - 番石榴地图中的地图

> ID：14645525
> 
> 赞同：15
> 
> 时间：2013-02-01T11:40:49.457
> 
> 标签：java, data-structures, collections, guava

我有一些带有`Map<String, Map<String, String>>`对象的代码，它可以工作（它被实例化为 HashMaps 的 HashMap），但我想知道在 Guava 中是否有更好的方法来表示这个数据结构。

我已经考虑过`Multimap`，但是在 Guava 中有`ListMultimap`和`SetMultimap`时，我发现没有“MapMultimap”。

我也查了[Table](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Table.html)，看起来更像它，但它的名字让我很不舒服：我拥有的绝对不是一张桌子，而是一棵树。（第二个键之间没有重叠）

有更好的番石榴替代品还是我应该坚持使用`Map<String, Map<String, String>>`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-01T11:53:09.277

`Table`似乎很适合您的需要。但请确保您选择了正确的实现。特别是，如果您的第二个键都是不同的（表中的列），则生成的表将是稀疏的，您应该考虑到这一点来管理内存使用情况。

因此，您应该避免使用 ArrayTable，但可以使用任何其他实现。请注意，[文档](https://github.com/google/guava/wiki/NewCollectionTypesExplained#table)中提到了*`ImmutableTable`针对稀疏和密集数据集的优化实现。*

如果您`Table`是一次构建的，您可以使用[`ImmutableTable.Builder`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/ImmutableTable.Builder.html)并从这种优化中受益，并且如果表在多个线程之间共享，则可以简化您的生活。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-01T11:47:44.297

看一下 Guava 的[`Table`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Table.html)界面。

它的[文档](https://github.com/google/guava/wiki/NewCollectionTypesExplained#table)示例似乎与您的用例有很多重叠：

> 通常，当您尝试一次对多个键进行索引时，您最终会得到类似 Map<FirstName, Map<LastName, Person>> 的东西，这很难用且难以使用。Guava 提供了一种新的集合类型 Table，它支持任何“行”类型和“列”类型的这种用例。

# cakephp - 如何在控制器中设置请求数据

> ID：14645531
> 
> 赞同：1
> 
> 时间：2013-02-01T11:41:18.053
> 
> 标签：cakephp

**我必须在CAKEPHP**中设置 HTML 形式的请求数据。请求数据是：

```
<div class="row">
        <div class="span6">
            <h3>Company Name</h3>
            Company Address
        </div>
        <div class="span6">
            <h5>INVOICE</h5>
        </div>
    </div> 
```

如何在控制器中设置？$this->set() 不起作用。

```
$this->set('html', $this->request->data); 
```

看法 ：-

```
<?php echo $html; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:11:35.323

如果您正在谈论要填写表格的数据

```
$this->request->data = $this->YourModel->find(); 
```

应该做的伎俩。

# sqlite - 这是在 iPhone 应用程序中显示数据的更好方式：-创建我们的数据库或使用网站数据库

> ID：14645539
> 
> 赞同：0
> 
> 时间：2013-02-01T11:41:48.867
> 
> 标签：sqlite

我有 30.000 个数据，我想搜索所有数据，以便当我单击任何产品时，它会显示该产品的详细信息。我该怎么做？最强大的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:49:24.627

尝试生成 RSS (XML) 提要或对 JSON 进行一些研究，您可以找到两者的解析器以将数据带入应用程序。然后使用 NSPredicate 进行过滤或搜索。

从 SQL 表生成 xml 提要： [http ://www.pixel2life.com/forums/index.php?/topic/24572-creating-a-php-sql-rss-feed/](http://www.pixel2life.com/forums/index.php?/topic/24572-creating-a-php-sql-rss-feed/)

# asp.net - 使用 CSS3 向 ASP.NET 按钮添加图标

> ID：14645541
> 
> 赞同：0
> 
> 时间：2013-02-01T11:41:53.183
> 
> 标签：asp.net, css

我在这里找到了一组非常好的按钮，我想在 ASP.NET Web 应用程序中使用它们：

[http://www.red-team-design.com/just-another-awesome-css3-buttons#comment-168128](http://www.red-team-design.com/just-another-awesome-css3-buttons#comment-168128)

他们使用纯 CSS3 设计了这些按钮。如果我使用他们在那里的 CSS 类并设置 my `<asp:button CssClass = "button">`，它将只获取该 CSS 类中的一些元素（背景颜色、边框样式等），但不会使用图标。

我知道它不能使用任何图标，因为我不能使用 CSS 子类（例如`<asp:button CssClass = "button add">`……如果有办法，请纠正我），所以我愿意为每个按钮创建一个不同的类。

例如，对于我命名为 的带有加号图标的按钮`.buttonPlus`，我将 CSS 属性`content: "\271A";`（即 + 图标）移动到其`.buttonPlus:before`选择器的一部分，但它仍然不会呈现图标。如果我按照他们的建议使用按钮（使用 HTML 链接）：

`<a href="" class="button add">Add</a>`

该按钮按照应有的方式与图标一起呈现。当然，出于显而易见的原因，我不想使用我的 ASP.NET 服务器端按钮。

如果有人对 CSS3 和 ASP.NET 都有很好的经验，请告诉我如何去做。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:45:58.323

您需要使用`LinkButton`服务器控件而不是`Button`.

这将确保在呈现的 html 中使用 html 锚标记而不是按钮标记。

```
<asp:LinkButton CssClass="button" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:50:21.047

您可能希望使用将呈现为锚点的链接按钮，并应用相应的类应该为您提供与该链接中所示相同的输出。

# postgresql - 带有触发器和序列的自动增量字段 - 检查 ID 是否在语句中 [Postgres]

> ID：14645551
> 
> 赞同：0
> 
> 时间：2013-02-01T11:42:49.740
> 
> 标签：postgresql, triggers, auto-increment, sequences

我从另一个线程得到了这个样本，它完全符合我需要知道的内容。

```
CREATE SEQUENCE AlimentosSequencia;

CREATE TABLE alimento (
  id integer NOT NULL PRIMARY KEY
 ,name VARCHAR(255));

 CREATE OR REPLACE FUNCTION AlimentoFuncion()
 RETURNS "trigger" AS
 $BODY$
 BEGIN
   New.id:=nextval('AlimentosSequencia');
   Return NEW;
 END;
 $BODY$
 LANGUAGE 'plpgsql' VOLATILE;

 CREATE TRIGGER AlimentosTrigger
 BEFORE INSERT
 ON alimento
 FOR EACH ROW
 EXECUTE PROCEDURE AlimentoFuncion();

 INSERT INTO alimento (name) VALUES ('lemon'); 
```

这工作正常！但我必须补充功能 AlimentoFunction。

如果我的插入语句放置了一个 ID，有什么方法可以检查 IN THE FUNCTION？

例子：

```
INSERT INTO alimento (name) VALUES ('lemon'); 
```

好的，这可行……如果我这样做：

```
INSERT INTO alimento (id, name) VALUES (299, 'lemon'); 
```

我的函数必须检查是否必须使用序列。

我知道我可以将 ID 的默认值设置为创建表的顺序，但我不能修改它。我只能更改触发器功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:46:55.307

就像是：

```
if new.id is NULL then 
   New.id:=nextval('AlimentosSequencia');
end if; 
```

# c++ - 2D 矩阵变换（带有玩家和地面）

> ID：14645560
> 
> 赞同：3
> 
> 时间：2013-02-01T11:43:29.740
> 
> 标签：c++, matrix, directx, transformation, directx-9

我有一个简单的游戏，我正在尝试为学习目的做，但矩阵有点难，尤其是在 DirectX 中。

我目前有一个 tilesystem 可以在屏幕上渲染图块并在中心呈现一个字符位置（在启动时）

当玩家向左移动时，地面应该向右移动，因此他始终位于屏幕中央。我使用 Sprite 来转换 Tiles 和玩家，但由于地面在移动而玩家站在地面上仍然位于中心位置，因此遇到了麻烦。

这是一个自上而下的 2D 游戏，所以我只需要变换位置（也许还有旋转）

我的相机类有这个方法：

```
D3DXMatrixTransformation2D(&View, NULL, 0, &Scale, &Center, D3DXToRadian(Rotation), &Position); 
```

我也试过（对于相机）：

```
D3DXMatrixTranslation(&View, Position.x, Position.y, 0); 
```

然后当我渲染地面精灵时，我将它设置为转换为相机，但是玩家有它自己的矩阵，我在他移动时使用它。

和上面那个一模一样，但他的位置、轮换等等……

我错过了什么，我需要什么？

我只有一个适合屏幕宽度/高度的图块系统，所以我应该看到他什么时候移动，但他仍然站在中心和地面上，玩家在移动。

我是否需要反转矩阵以使地面向相反方向移动？

**只有玩家在这里移动，世界在他周围发生变化。**

![例子](../Images/1ca70918558fe1e79930258cf621077a.png)

*我必须说，作为游戏编程中排名第一的语言，很少有指南可以解释“2D 中的 TopDown 相机”这样简单的事情......*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T19:24:19.597

对于您的问题，您应该阅读有关不同空间的信息：对象空间、世界空间和相机空间。（通常与 3D 空间相关，但我将尝试针对 2D 进行解释）

**对象空间** 每个对象都应该被建模或在你的情况下被绘制在对象空间中。这意味着对于每个对象，它们都是一个矩阵，它决定了您的播放器的中心。

**世界空间** 这是你的游戏世界。它描述了场景中每个对象的位置和方向。

**相机空间** 这描述了您的游戏世界中的当前视图。假设相机固定在屏幕中间，您移动整个世界以适应当前视点（例如，使用负位置平移）。

对于您的情况，这意味着您需要为每个对象创建一个矩阵，该矩阵描述了图像在该位置（对象空间）正确居中的偏移量。然后您需要将对象转换为世界空间。因此，您需要一个包含对象位置和方向的矩阵，并将其与对象矩阵相乘。最后，您必须考虑视点并乘以相机矩阵，以便将对象从世界空间转换到视图空间。生成的矩阵是您用于渲染的矩阵。

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:14:40.657

在聊天人员的帮助下，我意识到我的系统出了什么问题，尽管我尝试了类似的事情，但可能是以错误的方式/顺序。

对于仅定位的简单 2D TopDown 相机：

Camera2D 翻译：

```
D3DXMatrixTranslation(&CameraView, Position.x, Position.y, 0); 
```

对于相机视图中的每个对象：

```
D3DXMATRIX ObjectWorld;
D3DXMatrixTransformation2D(&ObjectWorld, NULL, 0, NULL, NULL, 0, &Position);

D3DXMATRIX Translation;
D3DXMatrixMultiply(&Translation, ObjectWorld, CameraView); 
```

然后渲染精灵：

```
sprite->SetTransform(&Translation);
sprite->Draw(Texture, NULL, NULL, NULL, Color); 
```

虽然这种方法需要我将相机移动到玩家移动的相反方向，所以如果玩家移动 +100，相机应该移动 -100 以仍然定位在相对于玩家的相同位置。

# vim - TCL 错误：缺少右大括号：注释中可能存在不平衡大括号

> ID：14645561
> 
> 赞同：1
> 
> 时间：2013-02-01T11:43:33.623
> 
> 标签：vim, tcl, braces

我收到这个 TCL 错误

`ERROR: missing close-brace: possible unbalanced brace in comment`

并且不知道不平衡的支架可能在哪里。你能建议一些找到它的方法吗？也许一个程序会检查某些文件中的大括号并显示它的位置。我正在使用 vim。如果 vim 可以显示这种东西，那就太好了。

版本`VIM - Vi IMproved 7.3 (2010 Aug 15, compiled Mar 14 2012 14:58:45)`

错误在 tcl 源文件中。我没有使用任何 vim 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:02:27.530

默认情况下`%`（在正常模式下）当您的光标位于大括号或括号上时，应跳转到右/左大括号或括号。

所以你可以手动尝试找到它在哪里，但如果文件很大，它可能会相当低效。

不要忘记使用`/(`and then n 你应该能够快速地从一个大括号跳到另一个大括号。

Vim 应该默认安装一个默认的 tcl 语法文件，所以如果还没有，你应该在你的`.vimrc`

```
syntax on
filetype plugin indent on 
```

# codeigniter - CI上传图像验证硬件错误与“人类”字段？

> ID：14645562
> 
> 赞同：0
> 
> 时间：2013-02-01T11:43:40.247
> 
> 标签：codeigniter, validation, file-upload

我正在上传两个具有两个不同尺寸要求的图像。

设置验证规则后，将设置第二个参数（CI 文档所说的“人类可读”字段）。我使用自定义验证回调函数来处理图像验证（设置配置，调用 upload->do_upload() ）。我收到的错误消息是通用的“您尝试上传的图像超出了最大高度或宽度”。

如何通过正在验证的字段的人类可读名称（例如“图像 1”或“图像 2”），以便用户知道哪个错误消息与哪个图像上传字段相关？

编辑：我想出了一个部分解决方案：通过在验证 set_message 前加上字段名称，我现在可以将错误分组在一个标题下。然而问题现在不同了。每个图像的自定义验证功能都相同，但参数不同，但如果两者都有错误消息，则第二个分组显示它自己的和前一个。

例如，图像 1 的文件太大。图 2 太宽了。图 2 的错误消息显示文件太大且太宽。

我真的不想仅仅为了这个而复制这个功能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:48:16.017

我过去遇到过我认为类似的事情。

如果您正在循环浏览上传的文件，不同`$config`的文件不同，则需要在每次迭代之间初始化上传类：

```
$this->upload->initialize( $config ); 
```

你有 pastebin 或一些代码示例吗？

这是我在早期项目中所做的，用于根据文件类型处理更改 $config ：

if( $_FILES ) { $this->load->library('upload');

```
foreach ( $_FILES as $key => $value )
{
    $file_type = ( $key == 'image' ) ? 'image' : 'document';

    if( ! empty( $value['name'] ))
    {
        $config = array(
            'upload_path'   => './uploads/materials/' . strtolower($material['code']) . '/',
            'allowed_types' => ($file_type == 'image') ?  'jpg|jpeg|png' : 'jpg|jpeg|png|pdf',
            'max_size'      => 1024 * 10,
            'max_width'     => 19200,
            'max_height'    => 12800,
            'overwrite'     => TRUE,
        );

        // ------------------------------------------------------------------------
        // Here is the key idea: You need to initialize each time you change the $config
        // ------------------------------------------------------------------------
        $this->upload->initialize( $config );

        if( $this->upload->do_upload( $key ))
        {
            //Success! Files are all uploaded.
            $uploaded = $this->upload->data();

            $data['file_data'] = array(
                'parent_id'         => $data['material']->id,
                'filename'          => $uploaded['file_name'],
                'filename_original' => $uploaded['client_name'],
                'type'              => $file_type,
                'location'          => $config['upload_path'],
                'description'       => '',
            );

            // Add the file details to the database
            $this->material->add_material_file( $data );
        }
        else
        {
            // ERROR! Something went wrong... alert the user.
            $errors = $this->upload->display_errors();
            $this->session->set_flashdata( 'flashError', $errors );
        }
    }
} 
```

}

# asp.net-mvc - 使用 Git/Hg 存储库作为模板项目

> ID：14645563
> 
> 赞同：1
> 
> 时间：2013-02-01T11:43:41.117
> 
> 标签：asp.net-mvc, git, mercurial, tortoisehg

有没有办法实现类似于这个人对 SVN 所做的事情？ [如何使用 subversion 存储库作为新项目的模板？](https://stackoverflow.com/questions/682761/how-to-use-a-subversion-repository-as-a-template-for-new-projects)

我有一个基本的 ASP.NET MVC 项目，它本质上是一个简单的 CMS 站点，我以此为基础创建新站点。

我不喜欢每次都必须将存储库克隆到新站点的想法，因为这会在不同位置创建同一存储库的多个副本，这对我来说似乎不够干净。

分支是我的问题的解决方案吗？我应该为新站点创建一个新分支吗？这样我就可以通过两种方式进行更改，这是我非常喜欢的一种灵活性，支持多个项目，但仍将所有内容保存在一个 repo 下。

（有时可能会在要修复的新站点中发现错误，我们希望将修复带回源站点，反之亦然）

请根据 Git/Hg 回答，我同时使用两者，而且我相信它们足够相似。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T13:32:09.833

正如@hyde 所说，克隆是 DVCS 的工作方式，所以你不应该对此有任何问题。

但是，如果您更感兴趣，例如，不能意外地将站点更改推回模板，那么您可以初始化一个新存储库，然后再`pull`从模板执行任何其他操作（我在考虑 Mercurial在这里，我猜在 Git 中可能会有类似的东西）：

```
$ hg init new_project
$ cd new_project
$ hg pull -u ../template
$ hg push
comparing with default-push
abort: repository default-push not found! 
```

此序列将创建一个新的存储库，使用最新的模板（包括所有变更集）进行更新，但由于它不是直接克隆，因此您将无法意外地将更改推送回模板。但是，由于初始变更集是相同的，如果您在新项目中对模板进行了有用的更改，您仍然可以通过指定目标将其推回：

```
$ hg push ../template
pushing to ../template
searching for changes
no changes found 
```

以这种方式从模板创建新存储库也意味着，虽然存储库没有“链接”，但很容易拉入最近的模板更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:52:59.837

我认为分支不是可以帮助你的东西。从最基本的时间开始，分支用于在同一个项目上工作，但在不同的模式下（维护、下一个版本、新功能添加等），从概念的角度来看，为每个新项目创建新分支是错误的。

如果您使用 git 为什么不创建模板项目，请将其保存到 github，并且每次启动新项目时只是为了在您的机器上 fork 它，然后创建新的存储库并将您的新站点推送到它。思考是一种标准方法。

如果你想为此目的创建一些高级的东西——我建议你创建 Windows 安装程序，它会在你每次开始新项目时安装你需要的所有东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:51:45.363

只需克隆存储库。如果您想避免多个克隆具有不同的默认分支，则对特定于站点的分支进行修改，这将是该站点的“默认分支”。然后，您还可以通过拉取和合并来简单地更新“模板”代码。

如果您想要一个干净的开始，而不需要（简单）选项来应用模板中的更改，那么只需获取存储库内容的快照，并从中初始化一个新的存储库。

* * *

> 我不喜欢每次都必须将存储库克隆到新站点的想法，因为这会在不同位置创建同一存储库的多个副本，这对我来说似乎不够干净。

嗯，这就是*分布式*版本控制系统所做的。从技术上讲，没有中央存储库。“中央存储库”仅仅意味着一个特定的克隆，涉及的每个人都或多或少同意使用它来共享他们的更改。此外，这完全取决于 DVCS 用户，他们将哪些内容推送到中央存储库，以及他们仅在克隆中保留哪些内容。

# dygraphs - Y2 轴的对数缩放，同时在 dygraphs 中保持 Y1 轴线性

> ID：14645565
> 
> 赞同：0
> 
> 时间：2013-02-01T11:43:45.597
> 
> 标签：dygraphs

我有两个轴 Y 和 Y2 用于绘制 dygraph。y2 轴上的值呈指数变化，因此标签混乱。我想在保持 y 轴线性的同时缩放这个轴。我已经尝试过 logcale : true 选项但没有帮助。如果 dygraph 支持此选项，请提供帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:05:04.680

它可能是有关图表设计的指标。那就是说你看过这个吗？

> 网格线和轴标签使图表更易于理解。他们给线条一个清晰的比例。除非您另有说明，否则 dygraphs 将选择一个 y 轴和一组包含所有数据的网格线。
> 
> 如果您有许多具有不同比例的系列，这将压缩除最大系列之外的所有变化。处理此问题的标准方法包括辅助 y 轴和对数刻度。
> 
> 如果这些都不符合您的喜好，您可以手动重新缩放您的系列并撤消悬停值的缩放。这个演示展示了如何做到这一点。
> 
> [http://dygraphs.com/preview/tests/multi-scale.html](http://dygraphs.com/preview/tests/multi-scale.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:31:39.793

Dygraphs 目前不支持每个轴的对数刻度。我们喜欢这样做，但这需要一些时间。请参阅[https://code.google.com/p/dygraphs/issues/detail?id=126](https://code.google.com/p/dygraphs/issues/detail?id=126)以跟踪它的进展。

# css - 使用 css 伪元素将图形居中

> ID：14645567
> 
> 赞同：0
> 
> 时间：2013-02-01T11:43:56.967
> 
> 标签：css, css-selectors

我想在一个 CSS 伪类中居中一个图形，但它不起作用。我尝试了以下方法：

```
#login .login:before {
    content: url('../images/lglp.png');
    display: inline-block !important;
    margin: 0 auto !important;
} 
```

有人有想法吗？

[你](http://gaujugend.schuetzengau-donau-ries.de/OnlinemelderApp)可以在现场看到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:52:01.083

如果我理解正确你想要什么，你必须给出`width`并改变`display`from`inline-block`到`block`

```
#login .login:before {
    content: url('../images/lglp.png');
    display: block;
    margin: 0 auto;
    width:32px;
} 
```

`width`必须是图像宽度

# android - sqlite 的内部存储

> ID：14645573
> 
> 赞同：0
> 
> 时间：2013-02-01T11:44:23.477
> 
> 标签：android, sqlite

我正在我的 android 应用程序中使用 sqlite。

我在问这个荒谬但有效的问题。

1.  任何人都可以复制我存储在内部存储中的数据库吗？
2.  SD卡制作数据库的安全性如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:59:19.747

您必须在一段时间后将数据库发送到服务器，因为 SD 卡不够安全。在复制整个数据库文件夹的代码下方。

```
public static void copyDirectoryOneLocationToAnotherLocation(File sourceLocation, File targetLocation)
        throws IOException {

    if (sourceLocation.isDirectory()) {
        if (!targetLocation.exists()) {
            targetLocation.mkdir();
        }

        String[] children = sourceLocation.list();
        for (int i = 0; i < sourceLocation.listFiles().length; i++) {

            copyDirectoryOneLocationToAnotherLocation(new File(sourceLocation, children[i]),
                    new File(targetLocation, children[i]));
        }
    } else {

        InputStream in = new FileInputStream(sourceLocation);

        OutputStream out = new FileOutputStream(targetLocation);

        // Copy the bits from instream to outstream
        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) > 0) {
            out.write(buf, 0, len);
        }
        in.close();
        out.close();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:48:23.117

第二个问题：不是很安全。如果可以的话，使用内部存储，它更安全。任何程序都可以编辑 sd 卡上的任何内容，因此只需将卡插入计算机，挂载 sqlite 数据库，他们就可以完全访问数据库，包括读/写/编辑。

理论上，内部存储是安全的，但是，如果一个人有一个根设备，他们甚至可以进入。不过，人数不会很多，你只需要留意它。

如果您真的必须找到针对每次尝试的安全解决方案，您可能会研究加密数据库。

第一个问题：当然，您可以复制数据库，就像复制任何文件一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:49:25.250

您可以将数据库复制到 sdcard，但它不安全。任何读取 SD 卡的应用程序或外部设备都可以访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:51:57.497

任何有权访问 SD 的人在技术上都可以复制您的 sqlite 文件。我认为内部存储不够安全（因为您可以根设备并具有管理访问权限，因此您几乎可以在那里做所有事情）。无论如何，这里有一个关于如何[将你的 sqlite 文件复制到内部存储的链接](https://stackoverflow.com/questions/7268908/access-the-phone-internal-storage-to-push-in-sqlite-database-file)

# windows-phone-8 - Windows Phone 8 - 在后台运行的页面

> ID：14645577
> 
> 赞同：1
> 
> 时间：2013-02-01T11:44:36.767
> 
> 标签：windows-phone-8

我正在开发一个 Windows phone 8 应用程序。我的主页上有一些故事板动画。当我离开主页时，这些故事板继续运行，尽管它们在 UI 上不可见，但附加调试器后，我可以看到在我的代码隐藏文件中触发了故事板事件。

**问题：即使在我们离开页面后，Windows phone 8 是否仍保持页面及其资源处于活动状态？在离开页面之前，我是否需要明确销毁所有资源。**

PS 我没有使用任何额外的线程来运行故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T07:49:34.100

WP 使您后台堆栈中的页面保持活动状态。

这意味着如果您离开 MainPage 时**向前**导航到新页面 (Page2)，则 Mainpage 将保持活动状态。当按下返回按钮时，您将返回到 MainPage 的上一个实例。然后 Page2 实例将被销毁（除非您的代码中有泄漏）。

顺便说一句，最佳实践是在导航时停止故事板，尤其是当您在故事板的 Completed 事件中执行某些操作时。当页面不在可视化树中时可以调用此事件，并可能导致某些崩溃。

# php - CakePhP 1.3 查找中的多个和或条件

> ID：14645584
> 
> 赞同：0
> 
> 时间：2013-02-01T11:44:49.723
> 
> 标签：php, cakephp, conditional-statements

我正在尝试检索上传到我的网站的最新图像，但不是当它们在私人画廊、活动中或用户被删除时。我还需要对 0 或 null 进行这些检查。

我环顾四周，发现了很多做多个和的方法和多个或的但不在一起。它似乎看起来正确，但根本不起作用。

```
$conditions = array(
            'AND' => array(
                array(
                    'OR' => array(
                        'Event.private'     => null,
                        'Event.private'     => 0
                    )
                ),
                array(
                    'OR' => array(
                        'Gallery.private'   => null,
                        'Gallery.private'   => 0
                    )
                ),
                array(
                    'OR' => array(
                        'User.deleted'      => null,
                        'User.deleted'      => 0
                    )
                )
            )
        );

        $images = $this->Image->find('all',array(
                        'order'=>array('Image.id'=>'desc'),
                        'limit'=>$limit,
                        'group'=>'Image.id',
                        'offset'=>$offset,
                        'conditions'=>$conditions)
                    ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T12:13:32.477

OR 语句可能也应该在一个数组中。

尝试以下条件：

```
$conditions = array(
    'AND' => array(
        array(
            'OR' => array(
                array('Event.private' => null),
                array('Event.private' => 0)
            )
        ),
        array(
            'OR' => array(
                array('Gallery.private' => null),
                array('Gallery.private' => 0)
            )
        ),
        array(
            'OR' => array(
                array('User.deleted' => null),
                array('User.deleted' => 0)
            )
        )
    )
); 
```

# asp.net-mvc-3 - 添加注释后 ModelState.IsValid 变为 false

> ID：14645592
> 
> 赞同：0
> 
> 时间：2013-02-01T11:45:28.387
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

在我的应用程序中，如果我向模型属性添加注释，则 ModelState.IsValid 变为 false。如果我删除所有注释，那么它就变成了真的。当我添加注释时，它的注释确实有效，但即使字段为空，它仍然会进入代码，这不应该发生。我正在使用 mvc4 剃须刀。

我应用注释的模型

```
using System.ComponentModel.DataAnnotations;

namespace HRMDatabaseLayer.Entities
{
using System;
using System.Collections.Generic;

public partial class EmployeeDetail
{
    public EmployeeDetail()
    {
        this.EmployeeContactDetails = new HashSet<EmployeeContactDetail>();
        this.EmployeeDepartments = new HashSet<EmployeeDepartment>();
        this.EmployeeEducations = new HashSet<EmployeeEducation>();
        this.EmployeeExperiances = new HashSet<EmployeeExperiance>();
        this.EmployeeFamilies = new HashSet<EmployeeFamily>();
        this.EmployeeLanguages = new HashSet<EmployeeLanguage>();
        this.EmployeeSkills = new HashSet<EmployeeSkill>();
    }

    public int Id { get; set; }

    [Required(ErrorMessage = "First Name is Required")]
    public string FirstName { get; set; }
    public string MiddleName { get; set; }

    [Required(ErrorMessage = "Last Name is Required")]
    public string LastName { get; set; }

    [Required(ErrorMessage = "Employee Id is Required")]
    public string EmployeeId { get; set; }

    [Required(ErrorMessage = "Gender is Required")]
    public string Gender { get; set; }

    public string MaritalStatus { get; set; }

    [DataType(DataType.Date)]
    [DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)]
    [Required(ErrorMessage = "Birth Date is Required")]
    public System.DateTime DateOfBirth { get; set; }

    public string IsAdmin { get; set; }
    public byte[] Picture { get; set; }

    [Required(ErrorMessage = "Password is Required")]
    public string Password { get; set; }

    public virtual ICollection<EmployeeContactDetail> EmployeeContactDetails { get; set; }
    public virtual ICollection<EmployeeDepartment> EmployeeDepartments { get; set; }
    public virtual ICollection<EmployeeEducation> EmployeeEducations { get; set; }
    public virtual ICollection<EmployeeExperiance> EmployeeExperiances { get; set; }
    public virtual ICollection<EmployeeFamily> EmployeeFamilies { get; set; }
    public virtual ICollection<EmployeeLanguage> EmployeeLanguages { get; set; }
    public virtual ICollection<EmployeeSkill> EmployeeSkills { get; set; }
}
} 
```

这是我的看法

```
<div>
@using (Html.BeginForm("Login", "Login"))
{
    <table>
        <tr>
            <td>
                <h3>Login</h3>
            </td>
        </tr>
        <tr>
            <td>Employee Id :
            </td>
            <td>
                @Html.EditorFor(model => @model.Employee.EmployeeId)
            </td>
            <td>
                @Html.ValidationMessageFor(model => @Model.Employee.EmployeeId)
            </td>
        </tr>
        <tr>
            <td>
                Password : 
            </td>
            <td>
                @Html.EditorFor(model => @Model.Employee.Password)
            </td>
            <td>
                @Html.ValidationMessageFor(model => @Model.Employee.Password)
            </td>
        </tr>
        <tr>
            <td>
            </td>
            <td>
                <input type="submit" value ="Login" />
            </td>
        </tr>
    </table>
    @Html.ValidationSummary(true)
}
<br />
</div> 
```

这是我使用 ModelState.IsValid 的控制器代码

```
public ActionResult Login(LoginViewModel empDetails)
    {
        if (ModelState.IsValid)
        {
            if (ValidateUser(empDetails.Employee.EmployeeId, empDetails.Employee.Password))
            {
                Session["id"] = empRepository.GetEmpId(empDetails.Employee.EmployeeId);
                FormsAuthentication.SetAuthCookie(empDetails.Employee.EmployeeId, false);
                return RedirectToAction("Index", "User", new { area = "EmployeeDetails" });
            }
            else
            {
                ViewBag.LoginError = "The user name or password provided is incorrect.";
            }
        }
        empDetails.Employee.Password = string.Empty;
        return View("Index", empDetails);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:16:06.500

您应该没有所需属性 Employee.FirstName、Employee.LastName、Employee.Gender、Employee.DateOfBirth 的编辑器或隐藏字段。所以这个属性的验证失败。

如果您只想从客户端获取 EmployeeId 和 Password，则应使用仅包含这两个属性的另一个模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:21:08.253

如果您不需要字段 firstName、lastName 等，那么它们不应该是发送到视图的模型的一部分。您应该创建一个仅包含该视图所需的属性并将数据注释放在那里的[视图模型](http://www.rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)，而不是注释并将您的域模型发送到视图。

例如：从 EmployeeDetail 类中移除所有数据注解，然后

```
public class LoginViewModel
{
    [Required(ErrorMessage = "Employee Id is Required")]
    public string EmployeeId { get; set; }
    [Required(ErrorMessage = "Password is Required")]
    public string Password { get; set; }
    //others you need for this view
} 
```

现在强烈键入您对该模型的视图。ModelState 现在只关心视图模型中所需的属性，而不关心视图中不需要的任何属性。

至于您对“仍在使用代码”的评论，您可能只需要添加

```
<configuration>
    <appSettings>
        <add key="ClientValidationEnabled" value="true"/>
        <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    </appSettings>
</configuration> 
```

到您的 Web.Config，您应该花一些时间来更深入地研究服务器端与客户端验证。

# qt - 在 QMenuBar 的另一侧堆叠 QPushButtons

> ID：14645596
> 
> 赞同：7
> 
> 时间：2013-02-01T11:45:49.883
> 
> 标签：qt, qt4, qt4.8, qpushbutton, qmenubar

我想`QPushButton`在我的`QMenuBar`.

这就是我的窗口现在的样子： ![它看起来如何](../Images/e1631b8439a52bf6b8b175d51adc3a3d.png)

这就是我希望它看起来的样子（我已经对图像进行了Photoshop处理）： ![我希望它看起来如何](../Images/280a43f8433627229e06eb8d768028fb.png)

我知道在`motif`小部件样式中，帮助菜单向右对齐，但我坚持使用`plastique`，所以这对我来说不是问题。

我正在使用 Qt4.8。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T14:47:06.887

QMenuBar 有一个[`setCornerWidget`](http://doc.qt.digia.com/qt/qmenubar.html#setCornerWidget)函数，它将一个小部件（可能包括整个布局）设置为短号小部件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T12:28:06.530

`QMainWindow::setMenuWidget()`可用于将任何小部件设置为主窗口的菜单栏小部件。使用适当的布局，您可以使用类似以下的内容来自定义菜单栏（`MainWindowImpl`是 的子类`QMainWindow`）：

```
void MainWindowImpl::setupMenubar() {
    QWidget* menuWidget = new QWidget(this);

    QGridLayout* menuWidgetLayout = new QGridLayout(menuWidget);
    menuWidget->setLayout(menuWidgetLayout);

    // Add the menu bar and all tool buttons to the widget
    menuWidgetLayout->addWidget(theMenubar, 0, 0, 1,1);
    menuWidgetLayout->addWidget(new QToolButton(), 0, 1, 1, 1);
    menuWidgetLayout->addWidget(new QToolButton(), 0, 2, 1, 1);

    // set the custom widget as the main window's menu widget
    setMenuWidget(menuWidget);
} 
```

`theMenubar`指向`QMenuBar`包含应用程序主菜单栏的 。

# c# - EF5 + 在 Lambda 表达式中使用“LIKE”运算符

> ID：14645600
> 
> 赞同：0
> 
> 时间：2013-02-01T11:46:04.690
> 
> 标签：c#, entity-framework, ef-code-first, lambda

在我的 Entity (Sale) 中有一种`DateTime`column `Date`。

`TrNo`我使用以下 lambda 表达式从该表中获取最新信息。但它总是给我`Null`。因为它还比较了`Time`列的部分。其实我想比较一下专`Date`​​栏的部分。

```
db.Sales.OrderByDescending(O => O.Date).Where(O => O.Date == DateTime.Now ).Select(O => O.TrNo).FirstOrDefault(); 
```

请帮助我构建正确的代码。（我的数据库是 MySQL）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:50:08.397

如果`O.Date`是日期，只需将其与 进行比较`DateTime.Now.Date`，因为`DateTime.Now`将返回日期和时间。如果`O.Date`实际上是 a `DateTime`，只需做同样的事情 ，`O.Date.Date == DateTime.Now.Date`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:52:12.553

如果您只想测试日期时间的日期部分，请尝试此操作。

```
db.Sales.OrderByDescending(O => O.Date).Where(O => O.Date == DateTime.Now.Date ).Select(O => O.TrNo).FirstOrDefault(); 
```

# php - 如何修复 twitter 的 file_get_contents 警告

> ID：14645601
> 
> 赞同：0
> 
> 时间：2013-02-01T11:46:12.490
> 
> 标签：php, json, twitter

我有一个网站的 twitter 提要，它在过去 5 分钟内一直没有问题，但是突然间它停止并抛出了这个错误：

```
Warning: file_get_contents(http://api.twitter.com/1/statuses/user_timeline/xxx.json)

[function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request in /home/fhlinux009/t/xxx.co.uk/user/htdocs/wp-content/themes/xxx/homepageTest.php on line 100 
```

将敏感数据替换为 xxx。

代码是：

```
<?php
    $username='xxx'; // set user name
    $format='json'; // set format
    $tweet=json_decode(file_get_contents("http://api.twitter.com/1/statuses/
    user_timeline/{$username}.{$format}")); // get tweets 
    //and decode them into a variable
?>

<div id="sliderId">
  <ul>
    <li class="current"><?php echo $tweet[0]->text; ?></li>
    <li><?php echo $tweet[1]->text; ?></li>
    <li><?php echo $tweet[2]->text; ?></li>
  </ul>
</div> 
```

我不得不使用这种方法来处理滑块。我不确定它为什么停止工作。

**更新：如果请求耗尽服务器，是否可以一次将 file_get_contents 的结果缓存大约 15 / 30 分钟？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:57:57.577

1.  检查网址，在浏览器中手动执行。
2.  如果 url 在浏览器中有效`allow_url_fopen`，请在 php ini 中启用设置并重新启动服务器。

# c# - 动态更改 app_themes

> ID：14645603
> 
> 赞同：1
> 
> 时间：2013-02-01T11:46:14.830
> 
> 标签：c#, asp.net, visual-studio-2010, web-config, app-themes

我想让我的管理员用户能够使用 asp:dropbox 动态更改 web.config 中的 app_themes 值。我在网络上看到了允许用户在运行时更改主题的网站和示例。这些示例不会更新 web.config 主题值，我希望我的管理员（办公室老板）能够控制它。

有没有办法：

1.  获取所有文件夹名称以在 Dropbox 中显示它们？
2.  使用 Dropbox 中的选定值更新 web.config app_themes 值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:53:29.463

我相信这应该允许您编辑网络配置文件

[使用 C# (.NET) 以编程方式更改 web.config](https://stackoverflow.com/questions/2260317/change-a-web-config-programmatically-with-c-sharp-net)

并获取目录中所有文件夹名称的列表以放入保管箱：

[http://msdn.microsoft.com/en-gb/library/system.io.directory.getdirectories%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-gb/library/system.io.directory.getdirectories%28v=vs.71%29.aspx)

希望这是您正在寻找的。

# java - 请求的路径 JAX-RS

> ID：14645604
> 
> 赞同：5
> 
> 时间：2013-02-01T11:46:21.753
> 
> 标签：java, path, jersey, uri, jax-rs

如何用正确的 Java 编写以下内容？：

```
@GET
@Path("{blah}/{blahh}")
public String getAnything(@PathParam("blah") String blah, 
                          @PathParam("blahh") String blahh,
                          @Path String path) {
  return "<a href=" + path + ">Hi</a>";
} 
```

我想在一个变量中获取整个请求的路径。我该怎么做呢？我正在使用 Jersey、JAX-RS 和 Tomcat。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T11:52:19.093

您应该添加`UriInfo`参数：

```
@GET
@Path("{blah}/{blahh}")
public String getAnything(@PathParam("blah") String blah, 
                          @PathParam("blahh") String blahh,
                          @Context UriInfo uriInfo) {
  return "<a href='" + uriInfo.getAbsolutePath() + "'>Hi</a>";
} 
```

# php - 使用 pdo_ibm 或 ibm_db2 php 扩展通过 windows 机器上的 php 客户端连接到 i5/os 上的远程 DB2

> ID：14645605
> 
> 赞同：0
> 
> 时间：2013-02-01T11:46:21.903
> 
> 标签：php, pdo, doctrine-orm, db2, ibm-midrange

我想在我的 php 应用程序中使用 Doctrine2 ORM。

对于 DB2，Doctrine2 仅支持 pdo_ibm 和 ibm_db2 驱动程序。

我安装了一个本地 DB2 实例（DB2 Express-C），并成功连接了 pdo_ibm 和 ibm_db2，甚至使用本地 db2 实例，我的学说 2 安装工作正常并且功能正常，

但我真正的目标是连接到在 i5/os 上运行的远程 DB2 实例。与此（远程）DB2 的远程连接只能使用 odbc 和 PDO_ODBC，但会因 pdo_ibm 和 ibm_db2 而失败，从而导致以下错误：

> 无法连接 SQLSTATE=42968，SQLDriverConnect: -1598 [IBM][CLI Driver] SQL1598N 由于许可问题，尝试连接到数据库服务器失败。SQLSTATE=42968

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T13:40:25.993

Doctrine 用来连接函数`db2_connect`，但是对于 i5 可以连接使用`obdc_connect`。进行测试并查看结果。`db2_connect`也可用于 PECL 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:53:33.887

我不使用 Doctrine，我使用自己的包装器来交换我选择的数据库：

在 Zend Server for Windows 上：我可以将 IBM DB2 for Windows 与 PDO 和扩展名 ibm_db2 一起使用，或者我可以将 IBM DB2 for i5 与 PDO 和“System i ODBC 驱动程序”（与“System i Navigator”软件一起提供）一起使用。

在 IBM i 的 Zend Server 上：我交换了“ibm_db2”连接器（和 db2_connect）。

您可以在此处找到我的项目的源代码和文档：http: [//gregphplab.com/serendipity/index.php](http://gregphplab.com/serendipity/index.php?/archives/2-MacaronDB.html) ?/archives/2-MacaronDB.html 您可以重复使用它，或者只是接受这个想法。抱歉，文档目前只有法语版本。

# sql - sql server 查询 - 在 n 列之后进行透视

> ID：14645608
> 
> 赞同：0
> 
> 时间：2013-02-01T11:46:33.343
> 
> 标签：sql, sql-server-2008, pivot-table, unpivot

我有一个包含 N 列的表：

```
TABLE:
TB_SAMPLE

COLUMNS:

VALUE_A
COUNT_A
VALUE_B
COUNT_B
VALUE_C
COUNT_C
VALUE_D
COUNT_D
VALUE_E
COUNT_E
VALUE_F
COUNT_F
VALUE_G
COUNT_G
VALUE_H
COUNT_H
VALUE_I
COUNT_I 
```

我想这样返回：

```
'Value', 'Count'
A, 1 -- this is the first and the second column
B, 3 -- this is the third and the fourth column
C, 4 -- this is the fifth and sixth column 
```

等等。我已经尝试使用 UNION ALL 子句进行多项选择，但是由于我要返回很多记录，所以速度并没有那么快。有没有更好的方法来“透视”这个表的 2 列？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T14:56:15.147

这也可以使用`CROSS APPLY`with`VALUES`语句来执行：

```
SELECT vals, counts
FROM temp t
CROSS APPLY 
(
    VALUES
        (value_a, count_a),
        (value_b, count_b),
        (value_c, count_c),
        (value_d, count_d),
        (value_e, count_e),
        (value_f, count_f),
        (value_g, count_g),
        (value_h, count_h)
) x (vals, counts); 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/1a7fc/6)。

这是一篇文章来解释这是如何完成的（需要注册）：

[http://www.sqlservercentral.com/articles/CROSS+APPLY+VALUES+UNPIVOT/91234/](http://www.sqlservercentral.com/articles/CROSS+APPLY+VALUES+UNPIVOT/91234/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:16:29.340

这是另一种方法（如果我正确理解了您的问题）

```
declare @table table
(
value_a varchar(10),
count_a int,
value_b varchar(10),
count_b int,
value_c varchar(10),
count_c int,
value_d varchar(10),
count_d int,
value_e varchar(10),
count_e int,
value_f varchar(10),
count_f int,
value_g varchar(10),
count_g int,
value_h varchar(10),
count_h int
)

Insert Into @table
Select  'value a',675,
        'value b',646,
        'value c',13,
        'value d',22,
        'value e',768,
        'value f',223,
        'value g',66,
        'value h',55

SELECT  vals,
        counts
FROM 
   (
    SELECT  *
   FROM @table
    ) p
UNPIVOT
   (vals FOR cols IN 
      ([value_a],[value_b],[value_c],[value_d], [value_e],[value_f],[value_g],[value_h])
)AS unpvtValues
Unpivot 
    (
        counts for counters in ([count_a],[count_b],[count_c], [count_d],[count_e],[count_f],[count_g],[count_h])
    ) as unpvtCounts
where Right(cols, 2) = right(counters, 2) 
```

**编辑**

如果您想使用一些动态 SQL，那么您可以使用此选项（这会在您的数据库中创建一个适当的表，而不是使用表变量）

```
create  Table  dbo.TempTable
(
value_a varchar(10),
count_a int,
value_b varchar(10),
count_b int,
value_c varchar(10),
count_c int,
value_d varchar(10),
count_d int,
value_e varchar(10),
count_e int,
value_f varchar(10),
count_f int,
value_g varchar(10),
count_g int,
value_h varchar(10),
count_h int
)

Insert Into dbo.TempTable
Select  'value a',675,
        'value b',646,
        'value c',13,
        'value d',22,
        'value e',768,
        'value f',223,
        'value g',66,
        'value h',55

Declare @ValueCols varchar(max),
        @CountCols varchar(max),
        @sql varchar(max)

Select @ValueCols = Coalesce(@ValueCols + ', ','') + '[' + Column_Name +']'
From INFORMATION_SCHEMA.COLUMNS
Where TABLE_NAME  = 'TempTable'
And COLUMN_NAME Like 'Value%'

Select @CountCols = Coalesce(@CountCols + ', ','') + '[' + Column_Name +']'
From INFORMATION_SCHEMA.COLUMNS
Where TABLE_NAME  = 'TempTable'
And COLUMN_NAME Like 'Count%'

Set @sql = 'SELECT  vals,
        counts
FROM 
   (
    SELECT  *
   FROM dbo.TempTable
    ) p
    UNPIVOT
   (vals FOR cols IN 
      (' + @ValueCols +')
)AS unpvtValues
Unpivot 
    (
        counts for counters in (' + @CountCols + ')
    ) as unpvtCounts
where Right(cols, 2) = right(counters, 2)'

Execute (@sql)

drop table TempTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T13:06:49.870

您可以 UNPIVOT，然后 PIVOT 数据，它可能会表现得更好：

```
DECLARE @T TABLE 
(   VALUE_A INT, COUNT_A INT, VALUE_B INT, COUNT_B INT, VALUE_C INT, COUNT_C INT, VALUE_D INT, COUNT_D INT, VALUE_E INT, 
    COUNT_E INT, VALUE_F INT, COUNT_F INT, VALUE_G INT, COUNT_G INT, VALUE_H INT, COUNT_H INT, VALUE_I INT, COUNT_I INT
);
INSERT @T VALUES (1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1);

WITH D AS
(   SELECT  Category = SUBSTRING(B, 7, LEN(B)), [Type] = 'Value', A
    FROM    @T
            UNPIVOT 
            (   A
                FOR B IN ([VALUE_A], [VALUE_B], [VALUE_C], [VALUE_D], [VALUE_E], [VALUE_F], [VALUE_G], [VALUE_H], [VALUE_I])
            ) upvt
    UNION ALL
    SELECT  Category = SUBSTRING(B, 7, LEN(B)), [Type] = 'Count', A
    FROM    @T
            UNPIVOT 
            (   A
                FOR B IN ([COUNT_A], [COUNT_B], [COUNT_C], [COUNT_D], [COUNT_E], [COUNT_F], [COUNT_G], [COUNT_H], [COUNT_I])
            ) upvt
)
SELECT  *
FROM    D
        PIVOT
        (   SUM(A)
            FOR [Type] IN ([Value], [Count])
        ) pvt; 
```

如果需要，您也可以通过在系统视图中查询列名来动态执行此操作。

**附录**

刚刚意识到这可以通过联接而不是 UNION 和 PIVOT 来实现，我想联接会在删除 PIVOT 操作时表现得更好。我仍然建议测试两者，看看哪个最适合您的数据。

```
WITH Val AS
(   SELECT  Category = SUBSTRING(B, 7, LEN(B)), A
    FROM    @T
            UNPIVOT 
            (   A
                FOR B IN ([VALUE_A], [VALUE_B], [VALUE_C], [VALUE_D], [VALUE_E], [VALUE_F], [VALUE_G], [VALUE_H], [VALUE_I])
            ) upvt
), Co AS
(   SELECT  Category = SUBSTRING(B, 7, LEN(B)), A
    FROM    @T
            UNPIVOT 
            (   A
                FOR B IN ([COUNT_A], [COUNT_B], [COUNT_C], [COUNT_D], [COUNT_E], [COUNT_F], [COUNT_G], [COUNT_H], [COUNT_I])
            ) upvt
)
SELECT  val.Category,
        [Value] = val.A,
        [Count] = co.A
FROM    val
        INNER JOIN co
            ON co.Category = val.Category; 
```

# windows-8 - Windows 8 中的 VB6 拖放性能

> ID：14645609
> 
> 赞同：3
> 
> 时间：2013-02-01T11:46:37.557
> 
> 标签：windows-8, vb6, drag-and-drop, aero, dwm

我有一个相当大的 VB6 应用程序，它具有在 MDI 应用程序的子窗体之间拖放控件的功能。问题是拖动操作期间的性能非常糟糕。您可以在拖动时看到元素重绘（缓慢地）。

我第一次遇到这个问题是在 Windows 7 中，经过一些研究得出结论，这是与 Aero 界面的兼容性问题。我可以通过关闭 Aero 效果来解决它。现在我使用的是 Windows 8，问题又回来了，但是，这不再是要禁用的 Aero。我尝试停止 dwm.exe 进程，但这只是在 Windows 8 中重新启动，我认为这是因为它需要愚蠢的“现代用户界面”界面。

我计划将来迁移到 .NET，但这将是一项艰巨的工作。现在我需要一个解决方法来让这个拖动问题在 Windows 8 中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:05:06.820

我们找到了一种在 Windows 8 中运行良好的解决方法。将控件设置为在拖动时使用图标可以解决性能问题。这是通过设置 DragIcon 属性来完成的。如果没有设置 DragIcon（在我们的例子中），默认行为是在拖动时显示控件的边框。在启用 Aero 的桌面中，这个边界的绘制速度非常慢。现在它按预期执行并且看起来也好一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T19:35:19.380

这是一个糟糕的解决方案，但它可能只对您有用。进入 EXE 的属性并选择兼容性选项卡。将兼容模式设置为 WinXP。尝试弄乱以禁用开头的复选框...通常这些的某种组合通常可以解决问题。同样，这不是一个很好的解决方案。

# c - 使用指针访问枚举值

> ID：14645613
> 
> 赞同：0
> 
> 时间：2013-02-01T11:46:50.990
> 
> 标签：c

我有一个结构

```
 struct abc
   {
       struct xyz *ptr1; int *a;
   };

     struct xyz 
     {
         int *b;
        enum __boolean *filter;
     }; 
```

这里
枚举 __boolean { false = 0; 真 = 1; };

我已经声明了一个指向`struct abc *ptr`并完成了 malloc，任何人都可以告诉我如何访问枚举中的值，我想分配值。

我已经完成了所有结构的 malloc

```
ptr->ptr1->filter = ? 
```

如何访问枚举，我想把零值放在那里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:48:53.173

由于 struct 字段`filter`是指向枚举的指针，因此您需要取消引用：

```
*ptr->ptr1->filter = false; 
```

这并没有什么不同，因为它是一个枚举，对于任何其他可直接分配的（“标量”）类型，例如或其他`member`类型，它都是完全相同的。`int`

你说你想把值“零”，但由于类型`filter`是枚举，我猜你的意思是`false`.

另请注意，在 C99 中，我们有`stdbool.h>`which 给出`bool`and`true`和`false`。如果可以的话，最好使用它们，而不是做一个`enum`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:50:09.180

给定您的代码，您将编写：

```
*ptr->ptr1->filter = false; 
```

但是，这只有在您已经`malloc`编辑了适当的内存时才有效。几乎可以肯定，您最好创建`filter`一个非指针直接成员。

# php - CodeIgniter：检查用户是否在没有重定向的情况下登录了多个页面

> ID：14645614
> 
> 赞同：0
> 
> 时间：2013-02-01T11:46:53.750
> 
> 标签：php, codeigniter, codeigniter-2

我想在构造函数中不重定向所有页面（注册、登录、提醒）使用登录检查。

但如果我使用 die()，所有页面都无法正常工作。哪个函数可以替换 die() ？

```
function __construct() {
    parent::__construct();

    if($this->user->logged() == TRUE) {
        $data['message'] = 'You are already logged in';
        $this->load->view('error', $data);
        die(); // I don't want to use redirect('/error')
    }
}

public function registration() {
    ...
}

public function login() {
    ...
}

public function remind() {
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:53:10.483

我将在所有页面上作为其构造函数执行。相反，如果用户未登录，您可以检查该怎么做：

```
if($this->user->logged() == FALSE) {
       redirect("/login");
    } 
```

如果用户已登录，则无需执行任何操作，只需假设用户已登录并实现您的页面。这将正常工作。

如果您想对其他控制器执行相同操作，请使用基本控制器（如“MY_Controller”）进行此登录检查。并将这个基本控制器扩展到所有子控制器。会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:03:12.797

我找到了解决办法！

```
function __construct() {
    parent::__construct();

    if($this->user->logged() == TRUE) {
        $data['message'] = 'You are already logged in';
        $this->load->view('error', $data);

        $this->output->_display(); // <-- use this code for enable output with die()

        die();
    }
} 
```

# java - Android Java：在 onPause() 之后调用的活动

> ID：14645615
> 
> 赞同：1
> 
> 时间：2013-02-01T11:46:54.017
> 
> 标签：java, android, lifecycle

我的应用程序允许用户通过选择器意图选择文件，然后使用 asyncTask 打开文件。
现在，我记录所有程序条目，这就是我所看到的（Eclipse logcat）：

```
02-01 11:08:21.229: D/LogViewer(337): + onPause()
02-01 11:08:21.497: D/LogViewer(337): + onItemSelected()
02-01 11:08:21.507: D/LogViewer(337): + onItemSelected()
02-01 11:08:26.667: D/LogViewer(337): + onActivityResult(requestCode:0, resultCode:-1, data:Intent { dat=file:MyLog.gzip })
02-01 11:08:26.731: D/LogCollectTask(337): + onPreExecute()
02-01 11:08:26.737: D/LogCollectTask(337): + doInBackground()
02-01 11:08:27.157: D/LogViewer(337): + onResume() 
```

**暂停后如何调用 LogViewer？它不应该在 onResume() 之前处于非活动状态吗？**

PS：我知道它就是这样，但我正在努力理解 Android 行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:23:40.123

我想我会接受，因为选择器意图需要用户交互，它取代了暂停状态，除非有人更了解并纠正我。

# .htaccess - .htaccess 添加重复的 URL

> ID：14645619
> 
> 赞同：0
> 
> 时间：2013-02-01T11:47:01.387
> 
> 标签：.htaccess, ipb

所以我遇到的问题是 .htaccess 复制了部分 url。**本质上，我在root/forum/**中安装了一个 IPB，并且 .htaccess（如下所示的代码）复制了论坛，因此 url 看起来像**root/forum/forum/**

这是 .htaccess 代码。

```
<IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On
RewriteBase /forum/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule \.(jpeg|jpg|gif|png)$ /forum/public/404.php [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /forum/index.php [L]
</IfModule> 
```

从 .htaccess 中删除**/forum会破坏该站点。**是我的 .htaccess 代码还是别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T18:50:13.247

在这里，您有我的 .htaccess，这等于您的...

```
IfModule mod_rewrite.c>
Options -MultiViews
RewriteEngine On
RewriteBase /forum/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule \.(jpeg|jpg|gif|png)$ /forum/public/404.php [NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /forum/index.php [L]
</IfModule> 
```

在这里一切正常。我在“论坛”文件夹中也有一个论坛...您是否在 adminCP 中激活了 .htaccess mod_rewrite 设置？

您通过此网址 ( [http://site.com/forum](http://site.com/forum) ) 或此 ( [http://forum.site.com](http://forum.site.com) ) 访问您的论坛？我使用第一个，在这里工作得很好......

# testing - phpundercontrol 没有找到任何测试

> ID：14645620
> 
> 赞同：1
> 
> 时间：2013-02-01T11:47:03.987
> 
> 标签：testing, phpdoc

PhpUndercontrol 没有找到任何测试，在我的项目中（在 Cruisecontrol/项目中）我有这个：

/www/tests/DomainTEst/DomainTest.php （例如我现在只想运行一个测试）

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="myproject" default="build" basedir=".">

  <target name="build" depends="checkout,php-documentor,php-codesniffer,phpmd,phpunit" />
  <target name="checkout">
    <exec executable="git" dir="${basedir}/source" failonerror="on">
      <arg line="pull origin master"/>
    </exec>
  </target>

  <target name="php-documentor"> 
      <exec executable="phpdoc" dir="${basedir}/source">
        <arg line="-ct type -ue on -t ${basedir}/build/api -tb /usr/share/php/data/phpUnderControl/data/phpdoc -o HTML:Phpuc:phpuc -d src/"/>
      </exec>
  </target>

  <target name="php-codesniffer">
    <exec executable="phpcs" dir="${basedir}/source" output="${basedir}/build/logs/checkstyle.xml">
      <arg line="--report=checkstyle --standard=PEAR --ignore=src/autoload src/"/>
    </exec>
  </target>  

  <target name="phpmd">
    <exec executable="phpmd" dir="${basedir}/source">
      <arg line="./src xml codesize,unusedcode,naming"/>
    </exec>
  </target>   

  //here is the problem I suppose!!!!!!!!!!!!!
  <target name="phpunit">                
    <exec executable="phpunit" dir="${basedir}/source" failonerror="on">
      <arg line="--log-junit ${basedir}/build/logs/phpunit.xml --coverage-xml ${basedir}/build/logs/phpunit.coverage.xml --coverage-html ${basedir}/build/coverage DomainTest www/tests/DomainTest/DomainTest.php" />
    </exec>
  </target>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:38:13.687

你回来的错误是什么？

我认为您之前需要一个前导斜杠

```
www/tests/DomainTest/DomainTest.php 
```

但是，您在 PhpUnderControl 中的单元测试应该测试实际在您的 PhpUnderControl 目录中的代码，我相信，它应该看起来像这样：

```
/opt/cruisecontrol/projects/your project name/your project tests folder 
```

如果您的测试文件夹名为“tests”，并且您的 PHPunit 目标中的“dir”是“${basedir}/source”，则您只需要提供相对路径，即“test”。

# java - Javascript 中的 Java 数组索引：我的语法是否正确？

> ID：14645627
> 
> 赞同：0
> 
> 时间：2013-02-01T11:47:34.500
> 
> 标签：java, javascript, jsp

在我的 JSP 中，我有一个 Java 数组**menuNames**，我想将该数组中的一个值分配给一个文本区域。下面我提到了 Javascript 代码，请建议我更正代码。

```
function setMainMenuURL(index) {

document.getElementById("SelectedURL").value=<%menuNames[index]%>;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:57:23.693

您不能将值从 java 数组分配给 javascript 函数，因为 javascript 函数是在客户端调用的，而 java 是在服务器端执行的。所以用java在服务器端创建javascript数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:52:37.333

您混淆了 Java 代码（在 JSP 中）和 JavaScript 代码。Java 代码在服务器端运行，然后将任何内容返回给浏览器，与 JavaScript 代码无关。在 Java 代码已经运行之后，JavaScript 在客户端运行，在用户的浏览器中。

您正在尝试做的——这不起作用——是在 Java 代码中使用 JavaScript 参数。由于 Java 已经执行，这完全没有意义。

最好的办法是将 Java 数组打印为有效的 JavaScript 数组（将其保存到 JavaScript 变量），然后在 JavaScript 代码中使用它。像这样的东西：

```
var javascriptArrayMenuNames = <%= Java code to output JSON representation of the array %>;
function setMainMenuUrl(index) {
    document.getElementById('SelectedURL').value = javascriptArrayMenuNames[index];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:49:54.307

使用`JSP Expression`-

```
document.getElementById("SelectedURL").value=<%=menuNames[index]%>; 
```

JSP 表达式元素包含一个脚本语言表达式，该表达式被求值、转换为字符串并插入到表达式出现在 JSP 文件中的位置。

因为表达式的值被转换为字符串，所以您可以在 JSP 文件中的一行文本中使用表达式，无论它是否用 HTML 标记。

表达式元素可以包含根据 Java 语言规范有效的任何表达式，但不能使用分号来结束表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:06:19.113

请把它作为对 Quoi 回答的评论：这个：

```
document.getElementById("SelectedURL").value=<%=menuNames[index]%>; 
```

不管用。因为“索引”变量在编译的 servlet 中未定义。

# sql - 如何从 SQL Server CE 表中删除一行？

> ID：14645629
> 
> 赞同：1
> 
> 时间：2013-02-01T11:47:42.207
> 
> 标签：sql, vb.net, sql-server-ce

我想从 SQL Server CE 表中删除一条记录。

有 3 个表格脚本、选项和结果。我想从结果表中删除一条记录。where 子句包含通过其他查询检索到的动态信息。这些查询工作正常并提供所需的数据。

我得到的错误是：

> 解析查询时出错。[令牌行号=1，令牌行偏移量=25，错误令牌=来自]

抛出异常的代码如下：

```
Dim connLoc As SqlCeConnection = New SqlCeConnection(My.Settings.ConnectionString)
connLoc.Open()     
Dim strDel As String = "Delete ResultsTable from ResultsTable r inner join OptionsTable o ON o.TestName=r.TestName inner join ScriptTable c ON r.TestName=c.TestName WHERE r.TestName = '" & ds1Loc.Tables(0).Rows(0)(1) & "' AND [Index] = '" & lstIndex & "'"
Dim cmdDel As SqlCeCommand = New SqlCeCommand
cmdDel.CommandText = strDel
cmdDel.Connection = connLoc
cmdDel.ExecuteScalar() 
```

保存的值是正确的`ds1Loc.Tables(0).Rows(0)(1)`，`lstIndex`所以应该不是问题。

此查询也适用于 SQL Server。是不是 SQL CE 不支持与 SQL Server 2008 一样的删除功能？

**编辑**

在异常下面使用 Kafs 建议的解决方案仍然是相同的：

> 解析查询时出错。[令牌行号=1，令牌行偏移量=10，错误令牌=来自]

cmdDel执行前的commandText为

```
Delete r from ResultsTable r inner join OptionsTable o ON o.TestName=r.TestName inner join ScriptTable c ON r.TestName=c.TestName WHERE r.TestName = @TestName AND [Index] = @lstIndex 
```

`@TestName`并`@lstIndex`分别具有“我的测试”和“3”的值。

对于以后阅读本文的任何人来说，值得一提的是，我将“SQLParameter”更改为 SQLCeParameter，因为此查询将发送到 SQL CE 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:54:13.127

您需要使用正确的`Table alies`(r)`ResultsTable`作为；

```
//--Correct way
Dim strDel As String = "Delete r from ResultsTable r ..."

//--Following is wrong
Dim strDel As String = "Delete ResultsTable from ResultsTable r ..." 
```

此外，最好使用 a`Parameterized query` 而不是传递字符串`ExecuteNonQuery()`，`Close()`最后使用连接

```
Dim strDel As String = "Delete r from ResultsTable r inner join OptionsTable o
                         ON o.TestName=r.TestName inner join ScriptTable c 
                         ON r.TestName=c.TestName WHERE r.TestName = @TestName 
                         AND [Index] = @LastIndex"

With cmdDel.Parameters
        .Add(New SqlParameter("@TestName", ds1Loc.Tables(0).Rows(0)(1)))
        .Add(New SqlParameter("@LastIndex", lstIndex))
End With
...
cmdDel.ExecuteNonQuery() 
```

# html - HTML：使容器居中

> ID：14645632
> 
> 赞同：-1
> 
> 时间：2013-02-01T11:47:56.610
> 
> 标签：html, wordpress, css

我正在[这个](http://wordpressitis.altervista.org/)网站上工作。出于某种原因，即使我使用了“margin: 0px auto;”，“title”类和“container”类也不在页面的中心。财产。我几乎 100% 确定它是 CSS 中的东西，但我不知道是什么。

CSS

```
.container {
    margin: 0px auto;
    width: 545px;
    height: auto;
}

.title {
    margin: 0px auto;
    width: 600px;
    height: auto;
    text-align: center;
}

.elemento1 {
    float: left;
    width: 266;
    height: auto;
}

.elemento2 {
    float: right;
    width: 266;
    height: auto;
}

.foot {
    clear: both;
} 
```

头版

```
<div class="title">
<font size="20">WE LIKE TO PLAY FOOTBALL</font>
</div>

<div class="container">
<div class="elemento1">
<div class="wrap">
<div class="anim">
<p><a title="Edizione 2013" href="http://wordpressitis.altervista.org/edizione-2013/"><img alt="" src="http://wordpressitis.altervista.org/wp-content/uploads/2013/01/dividere-quadrato.jpg"/></a></p>
</div>
</div>
</div>

<div class="foot">
</div>

<div class="elemento1">

<div class="wrap">
<div class="anim">
<a title="Edizione 2013" href="http://wordpressitis.altervista.org/edizione-2013/"><img alt="" src="http://wordpressitis.altervista.org/wp-content/uploads/2013/01/dividere-quadrato.jpg"/></a>
</div>
</div>

<p>
<div class="wrap">
<div class="anim">
<a title="Edizione 2013" href="http://wordpressitis.altervista.org/edizione-2013/"><img alt="" src="http://wordpressitis.altervista.org/wp-content/uploads/2013/01/dividere-quadrato.jpg"/></a>
</div>
</div>
</p>

<div class="wrap">
<div class="anim">
<a title="Edizione 2013" href="http://wordpressitis.altervista.org/edizione-2013/"><img alt="" src="http://wordpressitis.altervista.org/wp-content/uploads/2013/01/dividere-quadrato.jpg"/></a>
</div>
</div>
</div>

<div class="elemento2">

<div class="wrap">
<div class="anim2">
<a title="Edizione 2013" href="http://wordpressitis.altervista.org/edizione-2013/"><img alt="" src="http://wordpressitis.altervista.org/wp-content/uploads/2013/01/dividere-quadrato.jpg"/></a>
</div>
</div>

<p>
<div class="wrap">
<div class="anim2">
<a title="Edizione 2013" href="http://wordpressitis.altervista.org/edizione-2013/"><img alt="" src="http://wordpressitis.altervista.org/wp-content/uploads/2013/01/dividere-quadrato.jpg"/></a>
</div>
</div>
</p>

<div class="wrap">
<div class="anim2">
<a title="Edizione 2013" href="http://wordpressitis.altervista.org/edizione-2013/"><img alt="" src="http://wordpressitis.altervista.org/wp-content/uploads/2013/01/dividere-quadrato.jpg"/></a>
</div>
</div>
</div>

<div class="foot">
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:53:16.053

从中删除`width:266px;`和。`height:267px;``.wrap`

**你的 CSS**

```
.wrap {
    width: 266px;
    height: 267px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:54:33.023

添加`.wrap{margin:0 auto;}`. 并从这个类中删除宽度。对我来说它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T11:56:39.167

我看到您的整个代码存在一个小问题。第一个问题是因为你的标题在“div class="wrap clearfix" id="inner-content" 下，它的宽度只有 266px。所以如果你设法把你的标题拿出来，那么我认为你应该能够解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:53:00.703

这是因为您的包装类，只需将其删除:)

/Edit: 或者至少从 div "inner-content" 中删除它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T11:57:45.897

* * *

```
.wrap {
margin: 0 auto;
width: 545px;
height: 267px;
}
should fix it 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T12:16:45.820

我假设您在 Google Chrome 和 Firefox 中使用 IE 效果更好，但页脚位置错误。您使用的不是 css 中列出的脚。只需将 css 中的 .foot 更改为页脚（假设您使用 html5）

页脚{清除：两者}

您可能想查看特定于浏览器的代码（在此处搜索或在 Google 上搜索）。火狐

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T13:55:29.340

尝试将标题 div 放入固定宽度为 100% 的容器中

# ruby - tesseract gem 不会在 Ruby 中编译

> ID：14645633
> 
> 赞同：2
> 
> 时间：2013-02-01T11:47:59.710
> 
> 标签：ruby, gem, centos, tesseract

总菜鸟在这里，但无法弄清楚如何克服这个错误。我希望在运行 Centos 6 的 Linux 服务器上安装和运行“tesseract”gem。结果似乎是 -ltesseract 应该在 /usr/bin/ld 中，但不是......

我已经阅读了发布的其他 tesseract / Ruby 问题，但我认为我没有任何这些问题。

任何帮助深表感谢。

* * *

**错误信息**

```
g++ -shared -fPIC    -o /tmp/.ffi-inline-0/3751549a49315e9a7703c6e20a39e587297ce8a8.so /tmp/.ffi-inline-0/3751549a49315e9a7703c6e20a39e587297ce8a8.cpp -ltesseract 2>>/tmp/.ffi-inline-0/3751549a49315e9a7703c6e20a39e587297ce8a8.log
/usr/bin/ld: cannot find -ltesseract
collect2: ld returned 1 exit status 
```

**动作错误**

```
[x@y ~]# irb
1.9.3-p327 :001 > require 'tesseract'
CompilationError: compile error: see logs at /tmp/.ffi-inline-0/3751549a49315e9a7703c6e20a39e587297ce8a8.log
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ffi-inline-0.0.4.2/lib/ffi/inline/compilers/gcc.rb:31:in `compile'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ffi-inline-0.0.4.2/lib/ffi/inline/builders/c.rb:114:in `shared_object'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ffi-inline-0.0.4.2/lib/ffi/inline/builders.rb:90:in `block in build'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ffi-inline-0.0.4.2/lib/ffi/inline/builders.rb:87:in `instance_eval'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ffi-inline-0.0.4.2/lib/ffi/inline/builders.rb:87:in `build'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ffi-inline-0.0.4.2/lib/ffi/inline/inline.rb:54:in `singleton_inline'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/ffi-inline-0.0.4.2/lib/ffi/inline/inline.rb:39:in `inline'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:34:in `<module:C>'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:31:in `<module:Tesseract>'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/tesseract-ocr-0.1.5/lib/tesseract/c.rb:29:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/tesseract-ocr-0.1.5/lib/tesseract/api.rb:26:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/tesseract-ocr-0.1.5/lib/tesseract-ocr.rb:35:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
        from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/tesseract-ocr-0.1.5/lib/tesseract.rb:25:in `<top (required)>'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
        from (irb):1
        from /usr/local/rvm/rubies/ruby-1.9.3-p327/bin/irb:13:in `<main>'1.9.3-p327 
```

**宝石版**

```
[x@y ~]# gem list
[...]
tesseract-ocr (0.1.5)
[...] 
```

**海合会版本**

```
[x@y ~]# gcc --version
gcc (GCC) 4.4.6 20120305 (Red Hat 4.4.6-4)
[...] 
```

**操作系统**

```
[x@y ~]# cat /etc/*release*
CentOS release 6.3 (Final) 
```

**红宝石版本**

```
[x@y ~]# ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-linux] 
```

**RVM 版本**（以防万一）

```
[x@y ~]# rvm -v
rvm 1.17.2 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T19:36:23.920

尝试在您的系统中安装一个 tesseract 包。我假设是`yum install tesseract`

# php - 即使在 Allow From All 和 Chmod 777 之后解决 Apache 上的 403 权限被拒绝错误？

> ID：14645640
> 
> 赞同：3
> 
> 时间：2013-02-01T11:48:18.630
> 
> 标签：php, macos, apache, permissions, http-status-code-403

我的 DocumentRoot 在 ~/Dropbox/Websites 中。它在 vhosts 和 httpd.conf 中设置为 Allow From All 和 AllowOverride All，我什至在整个 DocumentRoot 上递归地设置了 777 权限（它只是一个本地开发环境。我永远不会这样做，不要别担心）。这在 Ubuntu 和 Windows 上就像一个魅力，但在 OSX 上它一直告诉我 Permission Denied。我还能尝试什么？有没有办法查看为什么权限被拒绝？如果我至少得到类似“_www 不允许访问此文件夹”或“.htaccess 不允许进入此文件夹”之类的提示，那就太好了，但这个通用消息的帮助为零。

我还尝试将目录的所有者更改为 _www:_www，这是 Apache 在 OSX 上运行的内容，但无济于事，没有任何改变。

错误日志条目：

```
[Fri Feb 01 12:31:42 2013] [error] [client 127.0.0.1] (13)Permission denied: access to / denied 
```

访问日志条目：

```
127.0.0.1 - - [01/Feb/2013:12:31:42 +0100] "GET / HTTP/1.1" 403 202 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17"
127.0.0.1 - - [01/Feb/2013:12:31:42 +0100] "GET /favicon.ico HTTP/1.1" 403 213 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17" 
```

更多信息：虚拟主机工作。访问错误被记录在其正确的位置，在 vhost 文件夹本身的 /logs 下，我只是无法通过 403 错误。我认为这意味着这是某种 .htaccess 问题，因为 apache 显然成功地写入了该文件夹，不是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T12:17:49.830

IIRC，在 OS X 上，默认情况下您的主目录不可执行，因此它也无法访问该目录下的任何目录。您可以使用 进行检查`ls -ld ~`，并使用 进行修复`chmod go+x ~`。确保文档根目录之上的每个目录至少是世界可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-30T02:23:10.447

```
线上线下

# onlineoffline 标签 - 不要删除
    要求所有授予

```

只需在 C:\wamp\bin\apache\apache2.4.9\conf/httpd.conf 中执行此操作并重新启动 apache。

# c# - 如何使用 EWS 托管 API 保存 ItemAttachments

> ID：14645643
> 
> 赞同：7
> 
> 时间：2013-02-01T11:48:23.950
> 
> 标签：c#, exchangewebservices, ews-managed-api

可以保存一个`ItemAttachment`吗？对于`FileAttachment`我们使用以下 EWS 托管 API 代码进行保存，

```
 if(attachment is FileAttachment)
    {
      FileAttachment fAttachment = new FileAttachment();
      fAttachment.Load("D:\\Stream" + fAttachment.Name);
    } 
```

怎么样`ItemAttachment`？我们如何将这样的内容保存`ItemAttachment`在指定的文件中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-01-21T17:06:31.317

当然，这仍然不是一个紧迫的问题，但我想我会和我一样在未来偶然发现这个问题的人分享。

对于 ItemAttachments，您需要为该项目加载 MimeContent，然后您可以简单地写入文件/输出 [".eml", ".msg"]：

```
if (attachment is FileAttachment)
{
    FileAttachment fileAttachment = attachment as FileAttachment;

    // Load attachment contents into a file.
    fileAttachment.Load(<file path>);
}
else // Attachment is an ItemAttachment (Email)
{
    ItemAttachment itemAttachment = attachment as ItemAttachment;

    // Load Item with additionalProperties of MimeContent
    itemAttachment.Load(EmailMessageSchema.MimeContent);

    // MimeContent.Content will give you the byte[] for the ItemAttachment
    // Now all you have to do is write the byte[] to a file
    File.WriteAllBytes(<file path>, itemAttachment.Item.MimeContent.Content);
} 
```

# javascript - 从 iframe 提交表单并在提交后关闭它并显示隐藏的 div

> ID：14645647
> 
> 赞同：2
> 
> 时间：2013-02-01T11:48:28.140
> 
> 标签：javascript, forms, iframe, hide, show

这就是我所拥有的

```
 <html>
    <head>
    </head>
    <body>
    <iframe id="myiframe">
    <form id= "myform" action="submit.php" method="POST">
    <input type="submit">
    </form></iframe>
    <div id="hiddendiv" style="display:none">
    some text
    </div>
    </body></html> 
```

这就是我在 iframe 中的表单提交后想要得到的结果（通过输入或单击按钮提交，我不在乎，因为表单只有 1 个字段）

```
 <html>
    <head>
    </head>
    <body>
    //I want this iframe to become display:none or to be deleted
    /*<iframe id="myiframe">
    <form id= "myform" action="submit.php" method="POST">
    <input type="submit">
    </form></iframe>*/
    //and this div to be showed
    <div id="hiddendiv" style="display:">
    some text
    </div>
    </body></html> 
```

谁能帮忙，谢谢

我有答案，但我必须等待 8 小时才能发布，所以我编辑了最初的问题，如果你愿意，你可以将其验证为答案

知道了

```
<html>
<head>
</head>
<body>
<script>

function closeIframe() {
var iframe = document.getElementById('myiframe');
iframe.parentNode.removeChild(iframe);
document.getElementById("hiddendiv").style.display="";
}

</script>
<iframe id="myiframe">
<form id= "myform" action="submit.php" method="POST">
<input type="submit">
</form></iframe>
<div id="hiddendiv" style="display:none">
some text
</div>
</body></html> 
```

在 submit.php 中返回的是这个

```
echo '<script type="text/javascript">';
echo 'parent.closeIframe()';
echo '</script>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:51:23.307

如果来自同一域，请将其添加到 submit.php 并提取表单以放入 iframe 您需要

```
<iframe src="form.html"></iframe> 
```

[演示](http://plungjan.name/SO/iframe1.html)

```
<script>
top.document.getElementById("myiframe").style.display="none";        
top.document.getElementById("hiddendiv").style.display="block";
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T16:02:10.010

```
<html>
<head>
</head>
<body>
<script>

function closeIframe() {
var iframe = document.getElementById('myiframe');
iframe.parentNode.removeChild(iframe);
document.getElementById("hiddendiv").style.display="";
}

</script>
<iframe id="myiframe">
<form id= "myform" action="submit.php" method="POST">
<input type="submit">
</form></iframe>
<div id="hiddendiv" style="display:none">
some text
</div>
</body></html> 
```

在 submit.php 中返回的是这个

```
echo '<script type="text/javascript">';
echo 'parent.closeIframe()';
echo '</script>'; 
```

# iphone - 图像未在 cocos2d 中以原始大小显示

> ID：14645649
> 
> 赞同：2
> 
> 时间：2013-02-01T11:48:36.887
> 
> 标签：iphone, xcode, image, cocos2d-iphone, textures

```
 originalImage = [UIImage imageNamed:@"IMG_1968.PNG"];
        NSLog(@"originalImage Height :: %f", originalImage.size.height);
        NSLog(@"originalImage Width :: %f", originalImage.size.width);
    texture2D = [[CCTexture2D alloc] initWithImage:originalImage]; 
```

我用图像创建了纹理，图像尺寸为 320*480，但它没有以完整/原始尺寸显示。我的应用程序中没有任何代码来调整图像大小和缩放图像。我究竟做错了什么？//绘图中的代码

```
 - (id)init {
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {    
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];

    [[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:
    self priority:0 swallowsTouches:YES];
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];
    originalImage = [UIImage imageNamed:@"IMG_1968.PNG"];

    texture2D = [[CCTexture2D alloc] initWithImage:originalImage];

  //        CCSprite *sp = [CCSprite spriteWithTexture:texture2D];
  //            [sp setAnchorPoint:ccp(0.0,0.0)];
  //        [self addChild:sp z:2];

    [self body_init];
    [self scheduleUpdateWithPriority:-1];
    self.isTouchEnabled = YES;
}
return self;
  }

  - (void)draw {
  glDisableClientState(GL_COLOR_ARRAY);
  glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
  glColor4ub(224,224,244,200);

  [self body_redraw];

  glBlendFunc(CC_BLEND_SRC, CC_BLEND_DST);
  glEnableClientState(GL_COLOR_ARRAY);

}

 - (void)update:(ccTime)deltaTime {
 [self body_dynamics:mousex:mousey];

}
 - (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {

 isFirstTouch=YES;
 CGPoint location = [self convertTouchToNodeSpace: touch];
 mousex = location.x;
 mousey = location.y;
 firstPoint=location;

 NSLog(@"TouchBegan -> mousex:%f mousey:%f", mousex, mousey);

 grab = [self body_grab:location.x:location.y];

 NSLog(@"GRAB %d",grab);

 return YES;
 }
 - (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event {
 CGPoint location = [self convertTouchToNodeSpace: touch];
 isFirstTouch=NO;
 int gridSizeX2 = 10;

 if ((location.x < firstPoint.x + gridSizeX2 && location.y < firstPoint.y + gridSizeX2)
    && (location.x > firstPoint.x - gridSizeX2 && location.y > firstPoint.y - gridSizeX2)){

            mousex = location.x;
            mousey = location.y;

    NSLog(@"TouchMoved -> mousex:%f mousey:%f", mousex, mousey);
}
}

- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event {
grab = -1;

[self grabTextureToImage];
 }
 -(void) grabTextureToImage
 {
NSString *filepath = [[NSHomeDirectory() stringByAppendingPathComponent:
@"Documents"]   stringByAppendingPathComponent:@"IMG_1968.PNG"];
//Make sure your contentSize is not zero before doing this...
CCRenderTexture *rTexture =[CCRenderTexture renderTextureWithWidth:
texture2D.contentSize.width height:texture2D.contentSize.height];
 [rTexture begin];
 //[rTexture visit];
 [self visit];
 [rTexture end];

 [rTexture saveBuffer:filepath format:kCCImageFormatPNG];

 NSLog(@"Image Saved to Path %@",filepath);
 }
- (void)body_dynamics:(int)x:(int)y {

 if (grab != -1 && !mass[grab].nail &&!isFirstTouch)
{
    mass[grab].x[0] = x;
    mass[grab].x[1] = y;
    mass[grab].x[2] = -(CLIP_FAR - CLIP_NEAR)/4.0;
}
}

- (int)body_grab:(int)x:(int)y {

float dx[2];
float d;
float min_d;
float min_i;
int i;

for (i = 0; i < GRID_SIZE_X*GRID_SIZE_Y; i++)
{
    dx[0] = mass[i].x[0] - x;
    dx[1] = mass[i].x[1] - y;
    d = sqrt(dx[0]*dx[0] + dx[1]*dx[1]);
    if (i == 0 || d < min_d)
    {
        min_i = i;
        min_d = d;
    }
}

return min_i;
}

 - (void)body_redraw {
 int k;
 int i, j;
 if(mass == NULL) {
    NSLog(@"mass is null");
    return;
 }
 glBindTexture(GL_TEXTURE_2D, [texture2D name]);

  k = 0;
   for (i = 0; i < GRID_SIZE_X - 1; i++)
    {
    for (j = 0; j < GRID_SIZE_Y - 1; j++)
    {
        GLfloat vertices[]= {
            mass[k].x[0],mass[k].x[1],mass[k].x[2],
            mass[k + 1].x[0],mass[k + 1].x[1],mass[k + 1].x[2],
            mass[k + GRID_SIZE_Y + 1].x[0],mass[k + GRID_SIZE_Y + 1].x[1],mass[k + GRID_SIZE_Y 
+ 1].x[2],
            mass[k + GRID_SIZE_Y].x[0],mass[k + GRID_SIZE_Y].x[1],mass[k + GRID_SIZE_Y].x[2]
        };
        GLfloat tex[]={
            mass[k].t[0], mass[k].t[1],
            mass[k + 1].t[0], mass[k + 1].t[1],
            mass[k + GRID_SIZE_Y + 1].t[0], mass[k + GRID_SIZE_Y + 1].t[1],
            mass[k + GRID_SIZE_Y].t[0], mass[k + GRID_SIZE_Y].t[1]
        };

        glVertexPointer(3, GL_FLOAT, 0, vertices);
        glTexCoordPointer(2, GL_FLOAT, 0, tex);

        glDrawArrays(GL_TRIANGLE_FAN, 0, 4);

        k++;
    }
    k++;
}
}

 - (void)body_init {

  GLint width = texture2D.contentSizeInPixels.width;
  GLint height = texture2D.contentSizeInPixels.height;
  int i, j;
  int k;

  if (mass == NULL)
  {
    mass = (MASS *) malloc(sizeof(MASS)*GRID_SIZE_X*GRID_SIZE_Y);
    if (mass == NULL)
    {
        fprintf(stderr, "body: Can't allocate memory.\n");
        exit(-1);
    }
  }

    k = 0;
    for (i = 0; i < GRID_SIZE_X; i++)
    for (j = 0; j < GRID_SIZE_Y; j++)
    {
        //this code implements grid on texture2D, gets vertex & side vertex in array 
        mass[k].nail = (i == 0 || j == 0 || i == GRID_SIZE_X - 1
                        || j == GRID_SIZE_Y - 1);//value is 0/1

        mass[k].x[0] = i/(GRID_SIZE_X - 1.0)*width;
        mass[k].x[1] = j/(GRID_SIZE_Y - 1.0)*height;
        mass[k].x[2] = -(CLIP_FAR - CLIP_NEAR)/4.0;

        mass[k].v[0] = 0.0;
        mass[k].v[1] = 0.0;
        mass[k].v[2] = 0.0;

        mass[k].t[0] = i/(GRID_SIZE_X - 1.0);
        mass[k].t[1] = j/(GRID_SIZE_Y - 1.0);

        k++;
    }
}

- (void)dealloc {
// in case you have something to dealloc, do it in this method
// in this particular example nothing needs to be released.
// cocos2d will automatically release all the children (Label)

  [originalImage release];

 [self unscheduleUpdate];
 [texture2D release];
// don't forget to call "super dealloc"
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T06:11:54.270

我通过修改 ccConfig 文件解决了这个问题。

以前 CC_TEXTURE_NPOT_SUPPORT 0 //表示支持被禁用

我只是启用了此支持（将值从 0 更改为 1）& 现在图像以其原始大小显示。

# 定义 CC_TEXTURE_NPOT_SUPPORT 1

# php - 如何跟踪 codeigniter 框架发送的电子邮件打开率

> ID：14645650
> 
> 赞同：0
> 
> 时间：2013-02-01T11:48:40.307
> 
> 标签：php, codeigniter

我正在开发一个 CodeIgniter 项目，该项目涉及向大量电子邮件地址发送批量邮件。我想跟踪其中实际交付了多少。？怎么做到呢..？

帮助赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:51:05.980

这通常通过以下方式完成：

```
<img src="http://mydomain.com/email_tracker.php?email=X&..." style="width: 1px; height: 1px; display: none;" /> 
```

您`email_tracker.php`将拥有跟踪电子邮件的代码

**解释**

您在发送电子邮件时生成图像 HTML，通常会添加用户 ID、电子邮件或类似信息（唯一标识）。

当用户打开电子邮件时，图像会被加载，并向 发出请求`email_tracker.php?...`，这就是您可以跟踪电子邮件的方式。

**笔记**

这不是 100% 准确的。如果用户禁用了图像，您将无法查看他是否打开了电子邮件。

**PS：**

这将检查打开了多少。没有真正的方法可以知道哪些已成功交付。您必须解析您的日志才能执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T07:13:31.240

您可以通过以下方式使用跟踪：

[http://www.phpdevtips.com/2013/06/email-open-tracking-with-php-and-mysql/?utm_source=rss&utm_medium=rss&utm_campaign=email-open-tracking-with-php-and-mysql](http://www.phpdevtips.com/2013/06/email-open-tracking-with-php-and-mysql/?utm_source=rss&utm_medium=rss&utm_campaign=email-open-tracking-with-php-and-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:36:28.547

如果您要发送无法添加图像的纯文本电子邮件，您将为每个用户创建一个唯一的链接。但是，这只有在他们单击链接时才有效。

我会结合这两种方法以获得最佳结果，即使是基于 HTML 的电子邮件。一些用户单击链接，但不加载图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T12:43:28.403

有一个库调用 sendgrid 它有一个带有 codeigniter 的插件，您可以使用它检查天气电子邮件发送阅读和所有

[请看这里](http://sendgrid.com/docs/Integrate/Frameworks/codeigniter.html)

# iphone - 无法在 Ipad 中启动应用程序

> ID：14645654
> 
> 赞同：1
> 
> 时间：2013-02-01T11:49:02.583
> 
> 标签：iphone, ios, objective-c, xcode, ios-simulator

> **可能重复：**
> [Xcode 突然停止在硬件上运行项目：“Could not launch xxx.app: .. No such file..”</a>](https://stackoverflow.com/questions/11456312/xcode-suddenly-stopped-running-project-on-hardware-could-not-launch-xxx-app) [应用程序未在设备中自动启动并在 xcode 上出现错误](https://stackoverflow.com/questions/13373994/application-not-automatically-launching-in-device-and-getting-error-on-xcode)

我最近在 xcode 中更改了我的应用程序的名称。更改名称后，我无法在平板电脑中运行我的应用程序。我可以在模拟器中运行我的应用程序，但我无法在我的 IPAD 上运行它。

我收到以下错误。

![错误信息](../Images/91ba5b4f61472042cace26f6894db6e7.png)

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:11:24.387

1.  重新启动您的设备。
2.  继续并删除 XCWorkpace。我已经做了很多次了。以下是步骤：

    1.  在 Xcode 中关闭您的项目。导航到您的 xcodeproj 包（通过终端，或在 Finder 中右键单击并选择“显示包内容”）

    2.  删除您的 XCWorkpace。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:51:02.513

尝试清理（产品->清理）您的应用程序，然后运行它。

希望对你有帮助。。

编辑 ：-

尝试两件事

1.  删除具有相同捆绑标识符的应用程序
2.  删除您的派生数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:15:00.310

当您在 iPad 中启动应用程序进行调试时，您必须使用开发者证书。如果您使用分发证书，您可能会收到这种错误。

1.  转到构建设置
2.  在代码签名部分将有代码签名身份。
3.  其中会有debug和release
4.  在调试中，您必须使用开发人员证书。

# android - phonegap 中的 jQuery mobile 是否需要 jQuery

> ID：14645655
> 
> 赞同：0
> 
> 时间：2013-02-01T11:49:15.507
> 
> 标签：android, jquery, cordova, jquery-mobile, phonegap-plugins

我是开发 phonegap Android 应用程序的初学者。我只是问是否有必要包含 jQuery 才能使 jQuery mobile 工作意味着 jQuery mobile 依赖于 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:16:20.437

jQuery Mobile 是使用 jQuery 构建的。如果不在您的 HTML 文件中添加对 jQuery 的引用，它将无法工作。从 jQuery Mobile 网站查看此示例：http: [//jquerymobile.com/demos/1.2.0/docs/about/getting-started.html](http://jquerymobile.com/demos/1.2.0/docs/about/getting-started.html)

# android - 如果网络不可用，Android 应用程序会在后台终止

> ID：14645656
> 
> 赞同：0
> 
> 时间：2013-02-01T11:49:19.253
> 
> 标签：android

如果网络不可用，我的 android 应用程序会在 5 到 10 分钟内在后台被杀死。

App在后台不断调用一些rest服务。

我的 logcat 没有任何异常。

但是当我回到前台时，我的应用程序从头开始，因为它被操作系统杀死了。

请建议我可能是什么原因以及我应该怎么做才能防止它。

```
public void sendHttpPost() throws ClientProtocolException, IOException{
        HttpPost httpPostRequest = new HttpPost(url + buildParams());

        // add headers
        HttpParams httpParams = new BasicHttpParams();
        Iterator it = headers.entrySet().iterator();
        Iterator itP = params.entrySet().iterator();
        while (it.hasNext()) {
            Entry header = (Entry) it.next();
            httpPostRequest.addHeader((String)header.getKey(), (String)header.getValue());
        }
        while(itP.hasNext())
        {
            Entry header = (Entry) itP.next();
            StringEntity se = new StringEntity((String) header.getValue());
            httpPostRequest.setEntity(se);
        }
        HttpConnectionParams.setConnectionTimeout(httpParams, 30000);
        HttpConnectionParams.setSoTimeout(httpParams, 30000);
        httpPostRequest.setParams(httpParams);
        HttpClient client = new DefaultHttpClient();
        HttpResponse resp;

        resp = client.execute(httpPostRequest);

        this.respCode = resp.getStatusLine().getStatusCode();
    //  Log.i(TAG, "response code: " + getResponseCode());
        this.responsePhrase = resp.getStatusLine().getReasonPhrase();
    //  Log.i(TAG, "error msg: " + getErrorMsg());
        HttpEntity entity = resp.getEntity();

        if (entity != null){
            InputStream is = entity.getContent();
            //Header contentEncoding = resp.getFirstHeader("Content-encoding");
            //Log.i(TAG, "endoding" + contentEncoding.getValue());
            response = convertStreamToString(is);
            //response = response.substring(1,response.length()-1);
            //response = "{" + response + "}";
    //      Log.i(TAG, "response: " + response);
            screen.update("Login", response, false);
            is.close();
        }
    } 
```

这是即使网络不可用也与服务器交互的方法

下面是线程调用休息服务的代码。

如何对服务做同样的事情：

```
public void start()
    {
        try{

            if(_exit)
                return;      
            //_lastExecute = System.currentTimeMillis();
            _try++;
        //  Log.i("-----HK Requests--------- \n\r", _url);
            final String response = HttpConnector.callWebService(_url, _data, _listener, _token);

            CallBackThread ct = new CallBackThread(_action, response, autocallreq);
            ct.start();         
//          while(ct.isAlive())
//          {
//              Thread.sleep(500);  
//          }
        }        

        catch(Exception e)
        {
            System.out.print("error="+e.getMessage());
            Helper.LogException(this, e);
            //CallBackThread ct = new CallBackThread(_action, "", autocallreq);
            //ct.start();
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:00:10.610

> 如果网络不可用，我的 android 应用程序会在 5 到 10 分钟内在后台被杀死

当您的应用程序没有任何前台`Activity`或前台`Service`实例时，这就是假设发生的情况。这还取决于您的应用程序在后台消耗了多少内存 - 如果消耗大量内存，操作系统会将您的应用程序置于高优先级以首先被“杀死”。

此 Google IO 视频详细说明了在这种情况下您的应用程序何时可能被终止 - [http://www.youtube.com/watch?v=gbQb1PVjfqM&list=PL4C6BCDE45E05F49E&index=10&feature=plpp_video](http://www.youtube.com/watch?v=gbQb1PVjfqM&list=PL4C6BCDE45E05F49E&index=10&feature=plpp_video)

在视频中间讨论这个问题是两三分钟

> App在后台不断调用一些rest服务

如果你没有从 android`Service`类调用 REST 方法 - 你应该这样做，因为正如我所说 - 如果没有 Activity 是前台或没有前台服务正在运行，操作系统将非常快地终止你的进程，

我必须说，在后台运行长时间网络操作的后台服务无论如何都是一个坏主意：它会消耗大量电池，而且还会消耗 3G 带宽。用户意识到你的应用会耗尽电池后，他们会很快删除你的应用。所以你应该小心不要在后台做太多事情

# objective-c - 基于索引的 Objective-C 参数值的获取

> ID：14645659
> 
> 赞同：2
> 
> 时间：2013-02-01T11:49:25.397
> 
> 标签：objective-c, nsinvocation

我想**用正确的参数值为**`NSInvocation`当前方法动态创建。通常，人们可能会这样做：

 **```
- (void)messageWithArg:(NSString *)arg arg2:(NSString *)arg2
{
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:_cmd]];
    [invocation setTarget:self];

    /*
     * How do we set the argument values here dynamically?
     */
} 
```

显式设置参数值很简单，我们可以这样做：

```
[invocation setArgument:&arg atIndex:2];
[invocation setArgument:&arg2 atIndex:3]; 
```

我希望能够通过以下方式循环执行此操作：

```
for(int i = 0; i < [[self methodSignatureForSelector:_cmd] numberOfArguments]; i++) {
    [invocation setArgument:?!?! atIndex:i + 2];
} 
```

困难的部分是动态获取给定索引的参数值。

[这里](https://stackoverflow.com/questions/9053574/getargument-of-nsinvocation-of-current-method-always-returns-null)问了一个类似的问题，回答者说他不知道引用类复杂性的解决方案。我不同意复杂性 - 在底层代码中，我们已经确切地知道堆栈在设置堆栈框架后应该如何看待，因为编译器知道使用的调用约定。例如，在 x86 上，`stdcall`我们可以轻松访问参数值，因为我们知道它们是固定偏移量`ebp`：

*   旧`ebp`于**0(%ebp)**
*   返回地址为**4(%ebp)**
*   *第一个参数*在**8(%ebp)**
*   等等

我怎样才能实现我想要的，或者语言中真的不存在任何机制来支持基于索引的参数值获取？在这一点上，我可以接受这是真的，因为 C 标准中不存在这样的特性。但是，我想得到确认和/或解释这背后的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:28:54.907

这有效，但不是我所期望的。`va_start used in function with fixed arguments`错误阻止我以正常方法使用 va_start 。取决于您尝试实现的目标可能有用。

```
@interface Test : NSObject

- (void)method:(id)arg1 :(id)arg2;

@end

@implementation Test

+ (void)load {
    class_addMethod([Test class], @selector(method::), (IMP)method_imp, "v@:@@");
}

void method_imp(id self, SEL _cmd, ...) {
    va_list ap;
    va_start(ap, _cmd);
    SEL sel = NSSelectorFromString([@"_" stringByAppendingString:NSStringFromSelector(_cmd)]);
    NSMethodSignature *signature = [self methodSignatureForSelector:sel];
    NSInvocation *invocation = [NSInvocation invocationWithMethodSignature:signature];
    int argc = [signature numberOfArguments];
    char *ptr = (char *)ap;
    for (int i = 2; i < argc; i++) {
        const char *type = [signature getArgumentTypeAtIndex:i];
        [invocation setArgument:ptr atIndex:i];
        NSUInteger size;
        NSGetSizeAndAlignment(type, &size, NULL);
        ptr += size;
    }
    va_end(ap);
    [invocation setSelector:sel];
    [invocation invokeWithTarget:self];
}

- (void)_method:(id)arg1 :(id)arg2 {
    NSLog(@"%@, %@, %@", NSStringFromSelector(_cmd), arg1, arg2);
}

@end 
```

通话`method::`将结束`_method::`，没有任何东西是硬编码的

```
Test *test = [[Test alloc] init];
[test method:@"arg1" :@"arg2"];  // log: _method::, arg1, arg2 
```**

# javascript - 如何从流中收集数据并在 node.js 中写入响应

> ID：14645660
> 
> 赞同：0
> 
> 时间：2013-02-01T11:49:26.730
> 
> 标签：javascript, node.js, sockets, stream

我是 node.js 和它的环境的新手，所以当我想创建一个服务器来监听来自套接字的传入数据时，我遇到了问题。问题是我在使用 node.js 中的流时遇到问题。我监听传入的数据，通常我会在套接字上发送 3-4 个请求。问题是我想写，然后退出代码或其他东西。我怎么知道客户何时完成了所有数据的发送。我检查现在收到的 json 中的大小参数，但我不确定这是否是个好主意。基本上我想处理他发送的所有数据，然后发送 1 个响应，我现在是如何做到的，它多次发送相同的响应。

这是我的代码的一部分，例如和测试目的：

```
var server = net.createServer(function(sock) {
    sock.on('data', function(data) {
        var string = data.toString()
            ,json = JSON.parse(string);

        if (json.size > 50) {
            sock.write(JSON.stringify(
                {"success" : "OK"}
            ); 
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T04:06:02.010

```
var net = require('net');
var server = net.createServer(function(sock) {
  sock.on('data', function(data) {
    var json = JSON.parse(data.toString());
    // Probably want to do something special here
  });
  sock.on('end', function() {
    // Server disconnected
    sock.write(JSON.stringify({ success: 'OK' });
  });
}); 
```

# http - 是否可以在不使用会话的情况下在客户端保存数据？

> ID：14645662
> 
> 赞同：1
> 
> 时间：2013-02-01T11:49:38.883
> 
> 标签：http, browser

我想在页面加载后或 ajax 请求后将用户数据保存在**客户端**以供以后使用，这有助于不回头查看服务器数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:53:17.510

先`Cookies`有后才`HTML 5 Local Storage`能帮到你！

PS *Session*听起来像是*服务器端的*东西。

**更新**

关于您的评论：*因为会话将在一段时间后过期，所以我不想处理会话。*

如果您确实需要以某种方式保存用户状态，并且您希望将其保留很长时间。你可以：

1.  查看您的 Web 服务器的供应商手册；增加会话超时值。
2.  将用户的数据集（又名用户会话）存储到持久存储中：序列化数组，将其存储在数据库系统中。
3.  将 Session ID 或 UserID 存储在*浏览器的 Cookie*或*HTML5 Local Storage*中，并在下次检索它，查看数据库并将该复杂且大型数据集再次加载到用户会话中。
4.  想想你正在做的事情的安全性......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:52:52.557

在客户端，您应使用 JavaScript localStorage ，但它仅适用于现代浏览器和 IE > 8

# c# - 使用带有委托的线程池？

> ID：14645670
> 
> 赞同：1
> 
> 时间：2013-02-01T11:49:55.007
> 
> 标签：c#, multithreading, delegates, threadpool

我正在尝试在 上使用该`QueueUserWorkItem`方法`ThreadPool`，但是，当我尝试将委托传递给该方法时遇到了一些问题。我想我的代码的问题在于我设置委托的方式，但我似乎无法弄清楚，即使在谷歌上搜索之后也是如此。

我正在像这样创建我的代表：

```
public delegate void GetLatencyDelegate(Server server); 
```

我正在尝试遍历服务器列表并运行服务器 GetLatency 方法。每次我循环到一个新服务器时，都应该从池中运行一个新线程来运行 GetLatency 方法。这个想法是，这应该加快这个过程。我的代码如下：

```
 ThreadPool.SetMaxThreads(50, 50);

            foreach (Server server in serverList)
            {
                GetLatencyDelegate gld = new GetLatencyDelegate(server.GetLatency);
                ThreadPool.QueueUserWorkItem(new WaitCallback(gld));

            } 
```

但是，我得到两个错误。一个是：

> “‘GetLatencyDelegate’没有重载匹配委托‘System.Threading.WaitCallback’

另一个是：

> 'GetLatency' 没有重载匹配委托 'Program.GetLatencyDelegate'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:55:48.300

出现第一个错误是因为 的签名[`WaitCallback`](http://msdn.microsoft.com/en-us/library/system.threading.waitcallback.aspx)与 的签名不同`GetLatencyDelegate`。两者应该相同。

发生第二个错误是因为`Server.GetLatency`也没有与 兼容的签名`GetLatencyDelegate`：前者不接受参数，而后者期望`Server`传入实例。

事实上，绝对没有必要首先定义`GetLatencyDelegate`。您可以简单地提供一个签名兼容的 lambda `WaitCallback`：

```
foreach (Server server in serverList)
{
    ThreadPool.QueueUserWorkItem(srv => ((Server)srv).GetLatency(), server);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:56:02.110

试试这样：

```
ThreadPool.SetMaxThreads(50, 50);

foreach (Server server in serverList)
{
    ThreadPool.QueueUserWorkItem(state => 
    {
        var srv = ((Server)state);
        srv.GetLatency(srv);
    }, server);
} 
```

# solr - Solrj 查询限制

> ID：14645671
> 
> 赞同：0
> 
> 时间：2013-02-01T11:50:00.990
> 
> 标签：solr, lucene, solrj

我的应用程序触发了长度很长的 Solr 查询，我只想知道 SolrJ 允许的查询有限制还是无限制。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:54:08.750

在 Lucene 中，这通常限于[`BooleanQuery`](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/BooleanQuery.html). 您可以通过调用来增加它`BooleanQuery.setMaxClauseCount(...)`。

# javascript - 文本框自动完成时触发javascript事件？

> ID：14645673
> 
> 赞同：0
> 
> 时间：2013-02-01T11:50:03.417
> 
> 标签：javascript, jquery, autocomplete

填充文本框时，我需要启用一个按钮。*但是，当您使用浏览器自动完成*功能填充文本框时，不会触发任何 javascript 事件，因此我需要一种方法来捕获此“事件”。我尝试了许多javascript事件，例如*更改* *焦点*，但是当您在自动完成“组合”中选择和选项时，它们不会被触发。

```
$('#mytextbox').on('change', function(){
   $('#mybutton').removeAttr('disbled');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:00:57.043

您是否尝试过使用 jquery ui 自动完成功能？

[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

# qt - 如何将字符串添加到 QCombobox

> ID：14645674
> 
> 赞同：3
> 
> 时间：2013-02-01T11:50:07.037
> 
> 标签：qt, qcombobox

通常我会通过说将项目添加到 QCombobox：

```
QCombobox cbb;
cbb.addItem("Hello"); 
```

但是如果我尝试这个，我会得到一个错误：

```
QComboBox cbb;
QString * s = new QString("hallo");
cbb.addItem(s);

error: no matching function for call to 'QComboBox::addItem(QString*&)' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T11:52:55.757

不要将动态内存分配与`QString`. `QString`在内部处理字符串的内存管理 - 如果您`QString`自己为对象分配内存，您还需要注意释放内存。

在您的情况下，只需使用

```
QComboBox cbb;
QString s = "hallo";
cbb.addItem(s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:52:57.840

如果您使用指针，您需要先取消引用它： cbb.addItem(*s); 无论如何，您为什么要在堆上分配 QString 而在堆栈上分配组合框（很可能会获得父级）？

# django - 无法使用 django 1.5 自定义用户类执行数据迁移

> ID：14645675
> 
> 赞同：6
> 
> 时间：2013-02-01T11:50:07.367
> 
> 标签：django, django-south, django-1.5

我有许多具有历史悠久的南方初始迁移的应用程序，我想将其转换为适用的 django 1.5。因此，我将迁移文件中的所有 orm['auth.User'] 引用替换为自定义引用，但是当我尝试运行这些迁移时，出现以下错误：

> 迁移错误：django_notify:0001_initial KeyError：“应用程序'profiles'中的模型'customuser'在此迁移中不可用。”

有问题的迁移是这样的：http: [//bpaste.net/show/2CwaYrlNifNTd5gcHUfK/](http://bpaste.net/show/2CwaYrlNifNTd5gcHUfK/)

我的自定义用户类是：

```
class CustomUser(AbstractUser):
    image = models.ImageField(_('Image Field'), upload_to='user_images') 
```

我也无法使用 convert_to_south 命令将我的“个人资料”应用程序转换为南。我收到以下错误：

> 在'/Users/tejinder/Projects/basidia/apps/profiles/migrations'中创建**init .py ...**
> 
> *   添加了模型配置文件.CustomUser
>     
>     
>     *   为profiles.CustomUser上的组添加了M2M表
>         
>         
>     *   为 profile.CustomUser 上的 user_permissions 添加了 M2M 表
>         
>         
> 
> 创建 0001_initial.py。您现在可以通过以下方式应用此迁移：./manage.py migrate profiles
> 
> CommandError：一个或多个模型未验证：auth.user：模型已被替换为尚未安装或抽象的“profiles.CustomUser”。

可能出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T19:31:36.263

看到这个答案：[Migrating existing auth.User data to new Django 1.5 custom user model?](https://stackoverflow.com/questions/14904046/migrating-existing-auth-user-data-to-new-django-1-5-custom-user-model)

对于从自定义用户模型开始可能遇到类似问题的其他人：

如果您使用 'django.contrib.auth' 并拥有自定义用户模型，则如果您的自定义用户模型未包含在已安装的应用程序中，则无法运行 syncdb。你会得到这个错误

**CommandError：一个或多个模型未验证：auth.user：模型已被替换为尚未安装或抽象的“myapp.User”。admin.logentry: 'user' 与模型 myapp.User 有关系，该模型要么尚未安装，要么是抽象的。**

因此，要解决此问题，您需要在已安装的应用程序中包含包含用户模型的应用程序，现在当您运行 syncdb 时，它将为您自己的模型添加所有表。因此，您必须将您的应用程序转换为南，因为表已经创建。

```
python manage.py syncdb
python manage.py migrate
python manage.py convert_to_south myapp 
```

这将创建 0001_initial 并且您会收到此错误：

**CommandError：一个或多个模型未验证：auth.user：模型已被替换为尚未安装或抽象的“myapp.User”。**

解决方法：

```
python manage.py syncdb
python manage.py migrate
python manage.py convert_to_south myapp
python manage.py migrate myapp 0001 --fake 
```

当您运行 convert_to_south 时，您*仍然*会收到上述错误，但您现在可以忽略它。南方[文件](http://south.readthedocs.org/en/0.7.6/convertinganapp.html)说：

> convert_to_south：So​​uth 将自动进行并假装应用您的第一次迁移

我认为问题在于模型验证导致 convert_to_south 在假装（--fake）应用您的第一次迁移之前出错。

所以解决方法是基本上做被跳过的假迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T16:59:48.733

前几天我解决了同样的问题，所以我想其他人可能会觉得这很有用。在 South 兼容 Django 1.5+ 之前创建迁移时会发生这种情况。我在我的 Django 站点中使用 PybbM 论坛应用程序时遇到了类似的问题。解决方案是将您的模型和相关模型包含到旧的迁移 ORM 中。有两种方法可以做到这一点：

1) 您可以在每个失败的迁移文件底部的“模型”列表中手动输入您的模型。2) 使用您现有的传递迁移之一作为模板，并将所需的 orm 模型复制到最后。

示例：[http ://bpaste.net/show/Pv20CM5dTrbubzFZtiRY/](http://bpaste.net/show/Pv20CM5dTrbubzFZtiRY/)

*请记住，您还需要复制自定义用户可能需要的任何相关模型，因此对于我为您制作的自定义用户，您需要复制“ranks.rank”、“ranks.ranktest” ' 和 'schools.school'

# java - 如何在 SWT 中使用 DataBinding 启用和禁用按钮

> ID：14645678
> 
> 赞同：2
> 
> 时间：2013-02-01T11:50:14.157
> 
> 标签：java, eclipse, eclipse-plugin, swt, eclipse-rcp

我正在使用数据绑定来同步黑白两个按钮。如果一个启用，那么另一个应该禁用或反之亦然。在我的代码中，它在开始时工作正常，但是当我更改`button2`为禁用时，其他并没有更改为启用。

**问题：** 我在这里缺少什么。？

```
Button button1 = new Button(parent, SWT.NONE);
button1.setText("hello");
final Button button2 = new Button(parent, SWT.NONE);
button2.addSelectionListener(new SelectionAdapter() {
    @Override
    public void widgetSelected(SelectionEvent e) {
         button2.setEnabled(false);
    }
});
button2.setText("world");
ISWTObservableValue observeEnabledButton1 = SWTObservables.observeEnabled(button1);
ISWTObservableValue observeEnabledButton2 = SWTObservables.observeEnabled(button2);
UpdateValueStrategy updateValueStrategy = new UpdateValueStrategy();
updateValueStrategy.setConverter(new IConverter() {
@Override
public Object getToType() {
    return Boolean.TYPE;
}
   @Override
public Object getFromType() {
    return Boolean.TYPE;
}
@Override
    public Object convert(Object fromObject) {
    if (fromObject instanceof Boolean) {
   // return inverse to disable the other button
        return ((Boolean) fromObject).booleanValue() ? Boolean.FALSE : Boolean.TRUE;
        }
  return Boolean.FALSE;
}
});
dbc.bindValue(observeEnabledButton1, observeEnabledButton2, updateValueStrategy, updateValueStrategy); 
```

谢谢

# javascript - 如何在javascript中将当前日期时间与另一个日期时间进行比较

> ID：14645683
> 
> 赞同：1
> 
> 时间：2013-02-01T11:50:30.813
> 
> 标签：javascript, jquery, html, datetime, if-statement

我正在寻求一些帮助，试图在 JavaScript 中比较 2 个日期，但还没有设法在这个网站上找到确切的答案。

我刚刚开始使用 JavaScript，我得到的印象是获取当前日期\时间并不是我认为的简单的 1 行代码。我以为我可以使用三元运算符，但也许不行。我希望我错了，但这是我的困境。

***我想比较两个日期。如果 date1 在 date2 之前，那么做一些事情。如果没有，那么做其他事情。***

*   **date1**：是当前日期时间。即我的系统时钟
*   **date2**：是一个预定义的值。我已经在网页中有这个值： ${expiredDateTime.format("ddMyyyyhm") 我相信日期 2 是一个字符串，但我不是 jquery 专家。

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:05:38.800

请尝试以下代码：

```
var user="12/11/2012/5/30";
var arrdt= user.split("/");
var userdt = new Date(arrdt[2], arrdt[1] - 1, arrdt[0],arrdt[3],arrdt[4]);
var currdt = new Date();
if (userdt < currdt) {
alert("userdate is before current date");
}else{
alert("userdate is after current date");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:56:59.617

在 javascript 中比较日期的最简单方法是首先将其转换为 Date 对象，然后比较这些日期对象。

您可以在下面找到一个具有三个功能的对象：

日期.比较（a，b）

返回一个数字：

-1 如果 a < b 0 如果 a = b 1 如果 a > b NaN 如果 a 或 b 是非法日期 dates.inRange (d,start,end)

返回一个布尔值或 NaN：

如果 d 在 start 和 end（包括）之间，则为 true 如果 d 在 start 之前或 end 之后，则为 false。如果一个或多个日期是非法的，则为 NaN。日期转换

由其他函数用于将其输入转换为日期对象。输入可以是

日期对象：输入按原样返回。一个数组：解释为[年、月、日]。注意月份是 0-11。数字：解释为自 1970 年 1 月 1 日以来的毫秒数（时间戳）字符串：支持几种不同的格式，例如“YYYY/MM/DD”、“MM/DD/YYYY”、“2009 年 1 月 31 日”等。 object：解释为具有年、月、日属性的对象。注意月份是 0-11。

```
 // Source: http://stackoverflow.com/questions/497790
    var dates = {
        convert:function(d) {
            // Converts the date in d to a date-object. The input can be:
            //   a date object: returned without modification
            //  an array      : Interpreted as [year,month,day]. NOTE: month is 0-11.
            //   a number     : Interpreted as number of milliseconds
            //                  since 1 Jan 1970 (a timestamp) 
            //   a string     : Any format supported by the javascript engine, like
            //                  "YYYY/MM/DD", "MM/DD/YYYY", "Jan 31 2009" etc.
            //  an object     : Interpreted as an object with year, month and date
            //                  attributes.  **NOTE** month is 0-11.
            return (
                d.constructor === Date ? d :
                d.constructor === Array ? new Date(d[0],d[1],d[2]) :
                d.constructor === Number ? new Date(d) :
                d.constructor === String ? new Date(d) :
                typeof d === "object" ? new Date(d.year,d.month,d.date) :
                NaN
            );
        },
        compare:function(a,b) {
            // Compare two dates (could be of any type supported by the convert
            // function above) and returns:
            //  -1 : if a < b
            //   0 : if a = b
            //   1 : if a > b
            // NaN : if a or b is an illegal date
            // NOTE: The code inside isFinite does an assignment (=).
            return (
                isFinite(a=this.convert(a).valueOf()) &&
                isFinite(b=this.convert(b).valueOf()) ?
                (a>b)-(a<b) :
                NaN
            );
        },
        inRange:function(d,start,end) {
            // Checks if date in d is between dates in start and end.
            // Returns a boolean or NaN:
            //    true  : if d is between start and end (inclusive)
            //    false : if d is before start or after end
            //    NaN   : if one or more of the dates is illegal.
            // NOTE: The code inside isFinite does an assignment (=).
           return (
                isFinite(d=this.convert(d).valueOf()) &&
                isFinite(start=this.convert(start).valueOf()) &&
                isFinite(end=this.convert(end).valueOf()) ?
                start <= d && d <= end :
                NaN
            );
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:55:52.050

[链接](https://stackoverflow.com/questions/338463/how-do-i-do-a-date-comparison-in-javascript)可能重复

```
if (date1.getTime() > date2.getTime()) {
    alert("The first date is after the second date!");
} 
```

[引用日期对象](https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Date)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T11:57:21.537

尝试下面的代码获取当前月份、年份、日期

```
var date = new Date();
var currentMonth = date.getMonth();
var currentDate = date.getDate();
var currentYear = date.getFullYear(); 
```

# python - 以智能方式过滤列表列表

> ID：14645684
> 
> 赞同：0
> 
> 时间：2013-02-01T11:50:31.123
> 
> 标签：python

我有以下格式的列表列表

```
a = [[1,...,255],[1,...,255],...,[1,...,255]] 
```

即一个任意长度的列表，其中包含固定长度为 255 的整数列表。（固定长度列表的值是来自“现实世界”的数据，而不是本例中的整数 1 到 255。）

现在，我想过滤掉所有内部列表（长度为 255）中的所有值，`0`如果它们的值高于某个阈值，则将它们设置为。

有没有一种聪明的方法可以做到这一点而不必编写两个 for 循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:56:30.240

你可以`numpy`很容易地做到这一点：

```
import numpy as np

a = [range(255) for _ in range(10)]
np_a = np.array(a)    
# set all values above 200 to 0
np_a[np_a > 200] = 0
# np_a now contains the data with all values above 200 changed to 0

# if you needed to convert the numpy array back to a python list
a = np_a.tolist() 
```

输出以显示它工作。

```
In [209]: np_a
Out[209]:
array([[  0,   1,   2, ..., 252, 253, 254],
       [  0,   1,   2, ..., 252, 253, 254],
       [  0,   1,   2, ..., 252, 253, 254],
       ...,
       [  0,   1,   2, ..., 252, 253, 254],
       [  0,   1,   2, ..., 252, 253, 254],
       [  0,   1,   2, ..., 252, 253, 254]])

In [210]: np_a[np_a > 252]  = 0

In [211]: np_a
Out[211]:
array([[  0,   1,   2, ..., 252,   0,   0],
       [  0,   1,   2, ..., 252,   0,   0],
       [  0,   1,   2, ..., 252,   0,   0],
       ...,
       [  0,   1,   2, ..., 252,   0,   0],
       [  0,   1,   2, ..., 252,   0,   0],
       [  0,   1,   2, ..., 252,   0,   0]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:07:21.220

```
# arbitarry length list of 255 length lists.    
l = [range(255)]*3 # 3 inner lists (as example)

# get filtered results:
f = [[k if k > 5 else 0 for k in j] for j in l] # filter at value 5 (as example)

# as a function:
def filter(lst, num):
    return [[k if k > num else 0 for k in j] for j in lst]

# as an iter over inner lists.
def filter(lst, num):
    for j in lst:
        yield [k if k > num else 0 for k in j] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T11:57:51.993

**变体 1：**只有 1 `for`，例如：

```
dst = []
for s in src:
    dst.append([x if x < 3 else 0 for x in s]) 
```

**变体 2：**没有明确的`for`：

```
filter = lambda lst: [x if x < 3 else 0 for x in lst]
dst = [filter(x) for x in src] 
```

# java - 在 android 中使用 Lazy Adapter 来获取过滤器以不删除行

> ID：14645685
> 
> 赞同：1
> 
> 时间：2013-02-01T11:50:30.733
> 
> 标签：java, android, android-listview, adapter, android-lazyadapter

我正在使用 LazyAdapter(android) 来填充列表，但现在我正在尝试向其中添加搜索功能。我创建了以下仅部分起作用的 getFilter 函数...

```
 public View getFilter(CharSequence seq, View convertView) {

        String locationName;
        View vi = convertView;
        convertView = null;
        if (convertView == null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView name = (TextView)vi.findViewById(R.id.name); // title
        TextView smallDesc = (TextView)vi.findViewById(R.id.smallDesc);
        TextView address = (TextView)vi.findViewById(R.id.address);
        TextView phone = (TextView)vi.findViewById(R.id.phone);// artist name
        TextView latitude = (TextView)vi.findViewById(R.id.latitude);
        TextView longitude = (TextView)vi.findViewById(R.id.longitude);
        TextView thumb_url = (TextView)vi.findViewById(R.id.thumb_url);
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        for (int i = 0; i < data.size(); i++) {
            HashMap<String, String> locationList = new HashMap<String, String>();
            locationList = data.get(i);
            locationName = locationList.get(CustomizedListView.KEY_NAME);

            if (locationName != null && seq != null) {
                if (locationName.contains(seq)) {
                    name.setText(locationList.get(CustomizedListView.KEY_NAME));
                    address.setText(locationList.get(CustomizedListView.KEY_ADDRESS));
                    phone.setText(locationList.get(CustomizedListView.KEY_PHONE));
                    smallDesc.setText(locationList.get(CustomizedListView.KEY_SMALLDESC));
                    latitude.setText(locationList.get(CustomizedListView.KEY_LATITUDE));
                    longitude.setText(locationList.get(CustomizedListView.KEY_LONGITUDE));
                    thumb_url.setText(locationList.get(CustomizedListView.KEY_THUMB_URL));

                    String picture_name = (String) thumb_url.getText();
                    String _path = Environment.getExternalStorageDirectory().getAbsolutePath();
                    String location = _path+picture_name;
                    Bitmap bMap = BitmapFactory.decodeFile(location);
                    thumb_image.setImageBitmap(bMap);

                    notifyDataSetChanged();
                } else {
                    locationList.remove(CustomizedListView.KEY_NAME);
                    locationList.remove(CustomizedListView.KEY_ADDRESS);
                    locationList.remove(CustomizedListView.KEY_PHONE);
                    locationList.remove(CustomizedListView.KEY_SMALLDESC);
                    locationList.remove(CustomizedListView.KEY_LATITUDE);
                    locationList.remove(CustomizedListView.KEY_LONGITUDE);
                    locationList.remove(CustomizedListView.KEY_THUMB_URL);
                }
            }
        }
        return vi;
    }` 
```

过滤器正在工作，但不是删除整行，而是删除该行的标签，我仍然可以单击它。

如果我正在搜索的字符串不是列表，我该如何设置它以删除整行？

# android - 将元素添加到布局并在其他活动中查看此元素

> ID：14645688
> 
> 赞同：0
> 
> 时间：2013-02-01T11:50:57.653
> 
> 标签：android, android-layout

如何将新元素添加到我的布局中，例如按钮，但我想在代码中添加这个元素，而不是 xml。然后我开始第二个活动，我想使用相同的布局，但我想查看在以前的布局中添加的这个元素。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:34:29.637

我不确定你到底在问什么，但你可以通过在第一个活动中动态添加按钮并为相同的活动（比如`isButtonAdded = true`）和其他活动的 onCreate() 设置标志来实现，检查该标志。如果为真，则再次动态设置按钮..（您必须编写代码以在两个活动中添加按钮，但您可以检查是否显示它）。希望你明白我的意思...

# html - textarea 内部格式化文本的问题

> ID：14645689
> 
> 赞同：0
> 
> 时间：2013-02-01T11:50:57.673
> 
> 标签：html, css

我在这里有这个代码：

```
<label for='shenime'>Shenime nga Sherbimi per klientin:</label> <br/> <textarea name="shenime" id='shenime' cols=40 ><pre><?=htmlentities($row['shenime'])?></pre></textarea> 
```

现在，在 textarea 内，我不只得到文本，根据`<pre>`样式格式化，但我得到如下内容：

```
<pre>Text here </pre> 
```

我想分配`overflow:visible`给 pre 标签。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:59:23.727

`<textarea>`标记是，因此`input`不会将`<textarea>`and`</textarea>`标记内的任何 HTML 识别为 HTML。它被纯粹视为文本。

简而言之，您尝试做的事情是不可能的，因为`<textarea>`.

# android - 错误：无法找到 com.android.calendar 的提供者信息

> ID：14645691
> 
> 赞同：2
> 
> 时间：2013-02-01T11:51:00.327
> 
> 标签：android, android-emulator, android-contentresolver, android-calendar

我正在开发一个提醒应用程序。我在日历中设置提醒。我在 Eclipse 上尝试的代码如下所示：

```
public class MainActivity extends Activity {

    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    addReminder();
}

public void addReminder(){
    String eventUriString = "content://com.android.calendar/events";
    ContentResolver cr = getContentResolver();
    ContentValues eventValues = new ContentValues();

    eventValues.put(Events.CALENDAR_ID, 1);
    eventValues.put(Events.TITLE, "Hello");
    eventValues.put(Events.DESCRIPTION, "Hello Android");
    eventValues.put(Events.EVENT_TIMEZONE, "India");

    Calendar beginTime = Calendar.getInstance();
    beginTime.set(2013, 01, 01, 18, 05);
    long startMillis = beginTime.getTimeInMillis();

    Calendar endTime = Calendar.getInstance();
    endTime.set(2013, 01, 01, 18, 06);
    long endMillis = endTime.getTimeInMillis();

    eventValues.put(Events.DTSTART, startMillis);
    eventValues.put(Events.DTEND, endMillis);
    eventValues.put("eventStatus", 1);
    eventValues.put("visibility", 3); 
    eventValues.put("transparency", 0); 
    eventValues.put("hasAlarm", 1); 
    Uri eventUri = getContentResolver().insert(Uri.parse(eventUriString), eventValues);
    long eventID = Long.parseLong(eventUri.getLastPathSegment());      

    String reminderUriString = "content://com.android.calendar/reminders";
        ContentValues reminderValues = new ContentValues();

        reminderValues.put("event_id", eventID);
        reminderValues.put("minutes", 5); 
        reminderValues.put("method", 1);
    Uri reminderUri = this.getApplicationContext().getContentResolver().insert(Uri.parse(reminderUriString), reminderValues);
    }
} 
```

我在哪里得到错误：

```
02-01 17:15:05.855: E/ActivityThread(743): Failed to find provider info for com.android.calendar
02-01 17:15:05.865: D/AndroidRuntime(743): Shutting down VM
02-01 17:15:05.885: W/dalvikvm(743): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-01 17:15:05.905: E/AndroidRuntime(743): FATAL EXCEPTION: main
02-01 17:15:05.905: E/AndroidRuntime(743): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.testcalendar/com.android.testcalendar.MainActivity}: java.lang.IllegalArgumentException: Unknown URL content://com.android.calendar/events
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.os.Looper.loop(Looper.java:123)
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-01 17:15:05.905: E/AndroidRuntime(743):  at java.lang.reflect.Method.invokeNative(Native Method)
02-01 17:15:05.905: E/AndroidRuntime(743):  at java.lang.reflect.Method.invoke(Method.java:507)
02-01 17:15:05.905: E/AndroidRuntime(743):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-01 17:15:05.905: E/AndroidRuntime(743):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-01 17:15:05.905: E/AndroidRuntime(743):  at dalvik.system.NativeStart.main(Native Method)
02-01 17:15:05.905: E/AndroidRuntime(743): Caused by: java.lang.IllegalArgumentException: Unknown URL content://com.android.calendar/events
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.content.ContentResolver.insert(ContentResolver.java:600)
02-01 17:15:05.905: E/AndroidRuntime(743):  at com.ocs.testcalendar.MainActivity.addReminder(MainActivity.java:68)
02-01 17:15:05.905: E/AndroidRuntime(743):  at com.ocs.testcalendar.MainActivity.onCreate(MainActivity.java:19)
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-01 17:15:05.905: E/AndroidRuntime(743):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-01 17:15:05.905: E/AndroidRuntime(743):  ... 11 more 
```

这是我在运行我的应用程序时收到的错误日志。我还提供了日历中的读取和写入权限。

我应该遵循什么步骤或者我应该做什么或改变以避免错误。我在我的模拟器上运行这段代码。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T11:29:13.903

当我在模拟器上运行它时，我的应用程序中会发生此错误。因为在我的模拟器中没有日历可供访问。

# java - hadoop wordcount 不支持的 Major.Minor 版本 51.0 错误

> ID：14645698
> 
> 赞同：4
> 
> 时间：2013-02-01T11:51:18.080
> 
> 标签：java, hadoop, mapreduce

我在 Hadoop 1.1.1 中为 wordcount 创建了一个 jar 文件，同时运行 world count 它给了我以下错误：

```
hduseros@MT2012018:/usr/local/hadoop$ bin/hadoop jar playground/wordcount.jar org.apache.hadoop.examples.WordCount /user/input/playground /user/output1
Exception in thread "main" java.lang.UnsupportedClassVersionError: org/apache/hadoop/examples/WordCount : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:149) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-14T08:54:05.067

当您的 hadoop 系统运行的 Java 版本低于用于编译 MapReduce 代码的 Java 版本时，就会出现此错误。

检查你的 hadoop 系统的 java 版本和你用来用“ *java -version* ”编译你的代码的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T09:28:22.150

该错误是由于您正在编译的机器和您正在运行 jar 的机器上的 jdk 不匹配。匹配两个版本的 jdk。

# android - 中国用户可以访问亚马逊应用商店吗？

> ID：14645704
> 
> 赞同：2
> 
> 时间：2013-02-01T11:51:30.823
> 
> 标签：android, app-store, amazon, amazon-appstore

我们需要将我们的 android 应用程序发布给中国用户，而不是针对中国用户被屏蔽的 Google Play 商店。

所以我们想到了亚马逊应用商店，但没有确认中国用户可以访问亚马逊应用商店？

请让我确认一下针对中国用户的亚马逊应用商店。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-19T02:11:57.583

亚马逊于2013 年 5 月初[在中国推出了他们的 App Store 。](http://www.engadget.com/2013/05/06/amazon-appstore-china/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:11:01.063

不，亚马逊应用商店在中国不可用，仅在特定国家可用。

来自维基百科：

> 亚马逊应用商店是谷歌安卓操作系统的移动应用商店，于 2011 年 3 月 22 日开放。仅在美国、英国、德国、法国、意大利和西班牙提供。

中国有一些应用商店，[你的另一个问题的答案列出了其中一些。](https://stackoverflow.com/a/14645529/1700486)

**编辑：**

正如 Thilo 所提到的，亚马逊 Appstore 现已在中国推出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:42:30.237

还有一个全球商店 SlideMe（也可以在中国使用，具有本地化客户端！），它具有本地应用程序的功能，可以查看本地应用程序，只要您将设置设置为该特定国家和/或语言。

您可以在他们的网站[http://slideme.org](http://slideme.org)上找到更多详细信息，他们甚至在几周前更新了他们的移动客户端。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T22:48:36.103

除了美国、英国、德国、法国、意大利和西班牙（在 Wikipedia 文章中提到），亚马逊 Android 应用商店最近也在日本发布。

而在我正在做的一个项目中，似乎也会在中国......（我在亚马逊应用商店应用程序中找到了对中国的引用），所以我们不得不拭目以待。

# ios - Xcode 应用程序未在设备中运行

> ID：14645705
> 
> 赞同：0
> 
> 时间：2013-02-01T11:51:42.333
> 
> 标签：ios

我在 Xcode 4.5.2 中收到此错误消息：

```
Could not launch “TestApp”

No such file or directory (~/Library/Developer/Xcode/DerivedData/TestApp-dvmrmbairhacdcehjotrsbsxwiob/Build/Products/Debug-iphoneos/TestApp.app/TestApp) . 
```

我按照以下步骤但没有成功：

*   删除了我的 DerivedData 目录（也清空了垃圾箱）
*   退出 XCode
*   断开的 iPad USB
*   重新启动的 Mac
*   重新启动的 iPad（关机和备份）
*   重新连接 iPad USB。
*   使用项目重新启动 Xcode
*   确认在所选设备上进行调试的构建。
*   单击运行

实际上我从任何其他系统复制了这个项目。我还检查了捆绑标识符 - 没关系。并且项目在模拟器中运行成功，但在 iPhone 设备中没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:53:16.257

![在此处输入图像描述](../Images/156b7f1d3b890ed60bc7e2cb2c48490a.png)检查您的开发者证书！

# android - 3 行的单选按钮单击事件，最终检查最终单选按钮

> ID：14645706
> 
> 赞同：0
> 
> 时间：2013-02-01T11:51:44.167
> 
> 标签：android, radio-group

我想做的是我头上有 3 个单选按钮说是，不，不适用

后跟 3 行中的 2 个单选按钮

我想要的是如果在 3 Rows 标题 YES 中选中所有 YES

如果在 3 行中的任何一个中检查 NO，则检查标题 No

我怎样才能做到这一点

我为此制作了 3 个无线电组

请通过图片参考 ![在此处输入图像描述](../Images/7591def5b7f5d92e920fd5d90189ffec.png)

我试过的是

对于标题行

```
 vctOptionPoint=new Vector<String>();
                vctAnswerID=new Vector<String>();
                int iOpCount=3;
                RadioGroup rg=new RadioGroup(this);
                rg.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                rg.setId(idRadioGroup);
                rg.setOrientation(android.widget.RadioGroup.HORIZONTAL);
                rg.setPadding(5, 0, 0, 0);
                for(int j=0;j<iOpCount;j++){
                    String sOption="";
                    if(j==0){
                        sOption="Yes";
                        vctOptionPoint.addElement(sQuestionPoints);
                    }
                    else if(j==1){
                        sOption="No";
                        vctOptionPoint.addElement("0");
                    }
                    if(j==2){
                        sOption="NA";
                        vctOptionPoint.addElement("0");
                    }
                    vctAnswerID.addElement(String.valueOf(j));

                    RadioButton rb=new RadioButton(this);
                    rb.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                    rb.setText(sOption);
                    if(sAnswerText.toString().equals(sOption)){
                        rb.setChecked(true);
                    }
                    rb.setId(idRadioButton);
                    idRadioButton++;                            
                    rg.addView(rb);
                }
                rg.setOnCheckedChangeListener(rb_onCheckedChange);
                ll.addView(rg); 
```

第 2 行

```
vctOptionPoint2=new Vector<String>();
            vctAnswerID2=new Vector<String>();
            int iOpCount=2;
            RadioGroup rg1=new RadioGroup(this);
            rg1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
            rg1.setId(idRadioGroup);
            rg1.setOrientation(android.widget.RadioGroup.HORIZONTAL);
            rg1.setPadding(5, 0, 0, 0);
            for(int j=0;j<iOpCount;j++){
                String sOption="";
                if(j==0){
                    sOption="Yes";
                    vctOptionPoint2.addElement(sQuestionPoints);
                }
                else if(j==1){
                    sOption="No";
                    vctOptionPoint2.addElement("0");
                }
                vctAnswerID2.addElement(String.valueOf(j));

                RadioButton rb1=new RadioButton(this);
                rb1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                rb1.setText(sOption);
                rb1.setChecked(false);
                if(sAnswerText.toString().equals(sOption)){
                    //rb1.setChecked(true);
                }
                rb1.setId(idRadioButton2);
                idRadioButton2++;                           
                rg1.addView(rb1);
            }
            rg1.setOnCheckedChangeListener(rb_onCheckedChange_New); 
```

相同的前 3 和 4 排

检查更改方法

```
OnCheckedChangeListener rb_onCheckedChange_New=new OnCheckedChangeListener(){
        public void onCheckedChanged(RadioGroup rg,int arg1){
            idRadioButton=4;
            idRadioButton2=15;
            idRadioButton1=13;
            idRadioButton11=14;

            int iRGChildCount=rg.getChildCount();
            for(int yy=0;yy<iRGChildCount;yy++){
                RadioButton rb=(RadioButton)rg.findViewById(idRadioButton);
                RadioButton rb1=(RadioButton)rg.findViewById(idRadioButton2);
                RadioButton rb2=(RadioButton)rg.findViewById(idRadioButton1);
                RadioButton rb3=(RadioButton)rg.findViewById(idRadioButton11);

                if((rb1!=null)){
                    if(rb1.isChecked() && rb2.isChecked() && rb3.isChecked()){
                        //int iQusPoints=Integer.parseInt((String)vctOptionPoint2.elementAt(idRadioButton-4));
                        String sOption1=rb1.getText().toString();
                        String sOption2=rb2.getText().toString();
                        String sOption3=rb3.getText().toString();

                        if(sOption1.equals("No") || sOption2.equals("No") || sOption3.equals("No") ){
                            tvSecCount1.setText("Points : 0\nScored : 0");
                        }
                        else if(sOption1.equals("Yes") || sOption2.equals("No") || sOption3.equals("No") ){
                            int iQusPoints=0;
                            tvSecCount1.setText("Points : "+sQuestionPoints+"\nScored : "+iQusPoints);

                        }
                        else if(sOption1.equals("No") || sOption2.equals("Yes") || sOption3.equals("No") ){
                            int iQusPoints=0;
                            tvSecCount1.setText("Points : "+sQuestionPoints+"\nScored : "+iQusPoints);

                        }
                        else if(sOption1.equals("No") || sOption2.equals("No") || sOption3.equals("Yes") ){
                            int iQusPoints=0;
                            tvSecCount1.setText("Points : "+sQuestionPoints+"\nScored : "+iQusPoints);

                        }
                        else if(sOption1.equals("Yes") || sOption2.equals("Yes") || sOption3.equals("No") ){
                            int iQusPoints=0;
                            tvSecCount1.setText("Points : "+sQuestionPoints+"\nScored : "+iQusPoints);

                        }
                        else if(sOption1.equals("No") || sOption2.equals("Yes") || sOption3.equals("Yes") ){
                            int iQusPoints=0;
                            tvSecCount1.setText("Points : "+sQuestionPoints+"\nScored : "+iQusPoints);
                        }
                        else{
                            int iQusPoints=2;
                            tvSecCount1.setText("Points : "+sQuestionPoints+"\nScored : "+iQusPoints);
                            if(sOption1.equals("Yes") && sOption2.equals("Yes") && sOption3.equals("Yes") ){
                                //fnNext();
                            }
                        }
                    }
                }
                idRadioButton++;
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:33:20.520

res/values/strings.xml（请始终使用 strings.xml 文件）

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="yes">Yes</string>
    <string name="no">No</string>
    <string name="na">NA</string>
</resources> 
```

res/layout/activity_main.xml （以任何你想要的方式改变布局，我让它变得非常简单只是为了测试目的）

```
<RadioGroup
    android:id="@+id/radioHeader"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="14dp" >

    <RadioButton
        android:id="@+id/radioHeaderYes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/yes" />

    <RadioButton
        android:id="@+id/radioHeaderNo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/no" />

    <RadioButton
        android:id="@+id/radioHeaderNA"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/na" />
</RadioGroup>

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radio1Yes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/yes" />

    <RadioButton
        android:id="@+id/radio1No"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/no" />
</RadioGroup>

<RadioGroup
    android:id="@+id/radioGroup2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radio2Yes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/yes" />

    <RadioButton
        android:id="@+id/radio2No"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/no" />
</RadioGroup>

<RadioGroup
    android:id="@+id/radioGroup3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radio3Yes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/yes" />

    <RadioButton
        android:id="@+id/radio3No"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/no" />
</RadioGroup> 
```

MainActivity.java（看看我需要多少 Java 代码……）

```
public class MainActivity extends Activity {

Boolean[] radioGroups;
RadioGroup radioHeader, radioGroup1, radioGroup2, radioGroup3;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    radioGroups = new Boolean[] {true, true, true};
    initViews();
}

private void initViews() {
    radioHeader = (RadioGroup) this.findViewById(R.id.radioHeader);
    radioGroup1 = (RadioGroup) this.findViewById(R.id.radioGroup1);
    radioGroup1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            radioGroups[0] = checkedId == R.id.radio1Yes;
            refreshHeader();
        }
    });
    radioGroup2 = (RadioGroup) this.findViewById(R.id.radioGroup2);
    radioGroup2.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            radioGroups[1] = checkedId == R.id.radio2Yes;
            refreshHeader();
        }
    });
    radioGroup3 = (RadioGroup) this.findViewById(R.id.radioGroup3);
    radioGroup3.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            radioGroups[2] = checkedId == R.id.radio3Yes;
            refreshHeader();
        }
    });
}

private void refreshHeader() {
    radioHeader.check(radioGroups[0] & radioGroups[1] & radioGroups[2] ? R.id.radioHeaderYes : R.id.radioHeaderNo);
} 
```

# html - 在一行中显示两个单选按钮

> ID：14645709
> 
> 赞同：0
> 
> 时间：2013-02-01T11:51:53.703
> 
> 标签：html, css, radio-button

```
 <ul>
    <li  style="list-style:none;">
     <input type="radio" name="custom_type" value="public" />
      Public
     <input type="radio" name="custom_type" 
     value="private" id="custom_venuetype_private" />Private
     </li>
 </ul> 
```

我有 2 个单选按钮。我的问题是两个单选按钮都出现在两行中，并且在单选按钮之后自动出现一些空格，即在第一个单选按钮之后，一些空格出现，然后是文本。下一个单选按钮按钮出现在新行中。我需要将两者都放在单行中，文本和单选按钮之间不应有空格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:01:32.733

为了将元素放在一行中，您可以使用带值的**CSS** `display`属性：`inline`

**HTML**：

```
<ul>
  <li  style="list-style:none;">
    <input type="radio" name="custom_type" value="public" />
    Public
    <input type="radio" name="custom_type" 
    value="private" id="custom_venuetype_private" />
    Private
  </li>
</ul> 
```

**CSS**：

```
.li {display:inline} 
```

这是[JSFiddle](http://jsfiddle.net/rQTEL/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:04:24.587

我假设周围有更多的 hmtl 和/或 ccs。我只是尝试了一下：

```
<!DOCTYPE html>
<html>
<head><title>Test</title></head>

<body>
<ul>
    <li  style="list-style:none;">
     <input type="radio" name="custom_type" value="public" />
      Public
     <input type="radio" name="custom_type" 
     value="private" id="custom_venuetype_private" />Private
     </li>
</ul>

</body
</html> 
```

并且输出在一行中。

可能是你的 ul 周围的 div 太小，或者你的 css 中有 ul 的定义。

# iphone - rails和iphone native app之间的socket连接

> ID：14645712
> 
> 赞同：9
> 
> 时间：2013-02-01T11:52:03.390
> 
> 标签：iphone, ruby-on-rails, sockets, websocket, chat

我有一个带有 rails 的 iphone 应用程序作为后端服务器。

现在我需要使用套接字连接来实现聊天功能。

许多示例向您展示了如何在浏览器中使用套接字实现聊天。

我在这里需要的是如何实现一个应用程序，您可以在其中创建在 rails 应用程序中的套接字服务器，以及在 iphone 应用程序中创建监听我给他们的频道的客户端。

我尝试使用 faye（仅给出如何在浏览器中实现客户端的示例）并使用 fayeObjC 库为 iphone 创建客户端，但无法收听该库中的频道。我知道我必须在这里实现错误。

我也会在这里分享我的代码，但首先我需要知道有没有比这更好的解决方案？

另外，我很欣赏一些示例的链接，其中套接字服务器位于 Rails 中，客户端是 iphone 应用程序。

**感谢任何帮助，并且最需要一个正确的方向来实施它。**

* * *

**更新**

我再次尝试了faye组合并且它起作用了。尽管仍在寻找更多解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T00:46:17.107

您可以检查**TCP 套接字**：

*   [http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)
*   [使用 Ruby 的聊天应用程序](http://boddhisattvadedicates.blogspot.in/2011/08/chat-application-using-ruby.html)
*   [http://quickblox.com/modules/chat/](http://quickblox.com/modules/chat/)
*   [http://caydenliew.com/2011/11/ios-mac-os-communication-with-asyncsocket/](http://caydenliew.com/2011/11/ios-mac-os-communication-with-asyncsocket/)
*   [http://www.macresearch.org/cocoa-scientists-part-xxix-message](http://www.macresearch.org/cocoa-scientists-part-xxix-message)

下一个链接是全面的网络指南 -[使用 Internet 套接字](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)

您必须记住点对点通信（聊天）的两个主要问题：可达性以及如何在应用程序处于后台时接收新消息（获取通知）。最后，您可以使用**APNS 方法**：将向 iPhone 推送一条不可见的通知，指示有新消息可供阅读。因此，您的应用程序将请求未读消息（WhatsApp 之类的应用程序所做的）。

除了 TCP 套接字，您还可以使用**websockets**（HTTP - 所以没有防火墙问题）。同类最佳 - [Socket.IO](http://socket.io/#home)。在这里你会找到 wiki [https://github.com/learnboost/socket.io/wiki](https://github.com/learnboost/socket.io/wiki)（你会发现那里也有 Ruby 的扩展）

这是[用于 socket.io 和 node.js 后端的 iOS 聊天客户端的示例](https://github.com/honcheng/iOS-nodechat)

**胡言乱语**

另一种选择：**XMPP** -“代表可扩展消息传递和存在协议。这样的协议是开放标准的，面向消息交换（由 Jabber 社区构建和维护）。消息交换几乎是实时发生的，因此它是构建的理想基础设施类似聊天的应用程序。该协议还实现了通知状态信息（用户是否在线）和维护联系人列表的机制。XMPP 是一个彻底的协议，也被谷歌等大公司采用来构建他们的即时通讯服务。”

在这里，您将找到有关开发适用于 iOS 的 Jabber 客户端的所有信息（使用户能够登录、添加好友和发送消息；如何安装和配置 jabber 服务器、创建帐户以及从 iOS 应用程序与服务器交互[http:/ /mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T23:26:01.303

我知道[SocketRocket](https://github.com/square/SocketRocket) by square 是一个强大的原生 Objective-C 库。但它不提供您似乎正在寻找的通道抽象。

如果您考虑外包 WebSocket 连接，那么您可以使用像我工作的[Pusher这样的托管服务。](http://pusher.com)[您可以使用pusher-gem](https://github.com/pusher/pusher-gem)在通道上发布消息（触发事件）。[您可以使用Pusher 的 Objective-C 库](http://pusher.com/docs/client_libraries#objective-c)之一订阅频道和接收消息。

其他解决方案也将具有 Objective-C 库，您可以通过此[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)找到它们的列表。

# xslt-1.0 - 根据 XSLT 中的属性值拆分内容

> ID：14645724
> 
> 赞同：0
> 
> 时间：2013-02-01T11:52:52.413
> 
> 标签：xslt-1.0, xslt-2.0

有什么方法可以使用 XSLT 拆分内容和属性值。

我的输入将如下所示：

```
 <element id=”value1, value2, value3”&gt;value1; value2; value3</element> 
```

并且所需的输出是“

```
<a href=”#value1”&gt;value1</a>; <a href=”#value2”&gt;value2</a>; <a href=”#value3”&gt;value3</a> 
```

帮助我在 XSLT 中执行此操作的可能方法。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:17:56.473

尝试

```
<xsl:template match="element[@id]">
  <xsl:variable name="att-values" select="tokenize(@id, ', ')"/>
  <xsl:for-each select="tokenize(., '; ')">
    <xsl:variable name="pos" select="position()"/>
    <xsl:if test="position() gt 1"><xsl:text>; </xsl:text></xsl:if>
    <a href="#{$att-values[$pos]}">
      <xsl:value-of select="."/>
    </a>
  </xsl:for-each>
</xsl:template> 
```

# distributed - OrientDB - 如何在集群服务器上创建数据库？

> ID：14645726
> 
> 赞同：3
> 
> 时间：2013-02-01T11:52:54.977
> 
> 标签：distributed, orientdb

我使用默认配置、集群状态设置了两个节点：

```
"members": [{
    "id": "192.168.1.101:2434",
    "listeners": [{"protocol": "ONetworkProtocolBinary", "listen": "192.168.1.101:2424"}, {"protocol": "ONetworkProtocolHttpDb", "li
80"}],
    "alias": "192.168.1.101:2434",
    "status": "aligning"
    }, {
    "id": "192.168.1.102:2435",
    "listeners": [{"protocol": "ONetworkProtocolBinary", "listen": "192.168.1.101:2425"}, {"protocol": "ONetworkProtocolHttpDb", "li
80"}],
    "alias": "192.168.1.101:2435",
    "status": "aligning"
    }],
"name": "_hzInstance_1_orientdb",
"local": "192.168.1.101:2435"
} 
```

但是当我使用 Java API 连接到一台服务器并尝试创建数据库时，出现异常，

```
admin = new OServerAdmin(PATH);
            admin.connect("root", "password");

            if (!admin.existsDatabase()) {
                admin.createDatabase("document", "local");
            } 
```

堆：

```
Cannot create the remote storage: demo1
com.orientechnologies.orient.core.exception.ODatabaseException: Cannot create database
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinary.createException(OChannelBinary.java:515)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinary.handleStatus(OChannelBinary.java:470)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinaryAsynch.beginResponse(OChannelBinaryAsynch.java:145)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinaryAsynch.beginResponse(OChannelBinaryAsynch.java:59)
    at com.orientechnologies.orient.client.remote.OStorageRemote.beginResponse(OStorageRemote.java:1832)
    at com.orientechnologies.orient.client.remote.OStorageRemote.getResponse(OStorageRemote.java:1863)
    at com.orientechnologies.orient.client.remote.OServerAdmin.createDatabase(OServerAdmin.java:184)
    at com.test.db.Client.main(Client.java:19)
Caused by: java.lang.NullPointerException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinary.createException(OChannelBinary.java:517)
    ... 7 more
com.orientechnologies.orient.core.exception.OStorageException: Cannot create the remote storage: demo1
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.orientechnologies.common.log.OLogManager.error(OLogManager.java:119)
    at com.orientechnologies.orient.client.remote.OServerAdmin.createDatabase(OServerAdmin.java:189)
    at com.test.db.Client.main(Client.java:19)
Caused by: com.orientechnologies.orient.core.exception.ODatabaseException: Cannot create database
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinary.createException(OChannelBinary.java:515)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinary.handleStatus(OChannelBinary.java:470)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinaryAsynch.beginResponse(OChannelBinaryAsynch.java:145)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinaryAsynch.beginResponse(OChannelBinaryAsynch.java:59)
    at com.orientechnologies.orient.client.remote.OStorageRemote.beginResponse(OStorageRemote.java:1832)
    at com.orientechnologies.orient.client.remote.OStorageRemote.getResponse(OStorageRemote.java:1863)
    at com.orientechnologies.orient.client.remote.OServerAdmin.createDatabase(OServerAdmin.java:184)
    ... 1 more
Caused by: java.lang.NullPointerException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.orientechnologies.orient.enterprise.channel.binary.OChannelBinary.createException(OChannelBinary.java:517)
    ... 7 more 
```

为什么会这样？如何在集群服务器上创建数据库？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:25:54.130

数据库的初始创建必须在集群外完成。然后将数据库复制到所有服务器并启动集群。

# sql - 在哪里执行？SSRS 或 SQL

> ID：14645732
> 
> 赞同：4
> 
> 时间：2013-02-01T11:53:09.070
> 
> 标签：sql, sql-server-2008, reporting-services, ssrs-2008

在创建 SSRS 报告时，我总是对“如何以尽可能少的生成时间创建报告”感到两难。

一般来说，生成时间（或执行时间）分为两个主要部分：

1.  SQL 查询。
2.  报告组件（表达式、组等）。

如您所知，在 SSRS 中执行的一些事情可以在 SQL 查询中完成，反之亦然。

例如：

*   我可以`Group by`在 SQL 中使用子句，但在使用带有组定义的表时也可以这样做。
*   我可以`Casting`用来比较 SQL 中的两个值，也可以直接在表达式中使用。

还有很多...

我的问题是：

**A.**哪个部分（SQL 查询或 SSRS）花费更多时间（假设该任务可以在 SSRS 和 SQL 中完成）？

**B.**当遇到在哪里执行给定情况的两难选择时，我应该根据哪些指导方针（如果有）做出决定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T12:01:51.387

与性能问题一样：

*   **不要过早优化。**如果 SSRS 中的某些事情更简单，那么就在那里进行。只有在出现问题时才考虑用清晰度换取性能（可能通过将代码移动到 SQL 端）。
*   **措施。**使用[ExecutionLog2](http://blogs.msdn.com/b/robertbruckner/archive/2009/01/05/executionlog2-view.aspx)视图可以大致了解您的瓶颈在哪里。进行更多的测量和测试，以确保您正在投入时间来提高重要位的性能。

**底线**：让清晰的代码指导您解决特定问题的位置，并在性能成为问题时有选择地进行优化。

* * *

Eric Lippert 写了一篇关于何时以及如何担心性能[的不错的博客文章。](http://ericlippert.com/2012/12/17/performance-rant/)上下文是 C#，但基本思想也适用于其他情况，例如 SSRS/SQL。

顺便说一句，如果您查看提到的[ExecutionLog2](http://blogs.msdn.com/b/robertbruckner/archive/2009/01/05/executionlog2-view.aspx)视图，您会注意到实际上您应该了解*三个性能组件：*

1.  数据检索 (SQL)
2.  报告模型（将数据集转换为内部模型）
3.  渲染（将模型转换为 XLS、PDF 等）

了解瓶颈在哪一部分是了解如何解决性能问题的关键。

* * *

最后根据我的经验提出一个建议：

根据经验，*如果*您担心性能，尤其是聚合方面，请**首选 SQL 而不是 SSRS 。** 如果需要，还可以考虑调整您的数据库（索引等）。

 *如果我能用事实和研究来支持它，这条经验法则将是最好的。唉，我没有。我*可以*说，根据我自己的经验，当我遇到将聚合和计算从 SSRS 转移到 SQL 的报告时遇到性能问题时，通常会有助于解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T00:12:41.477

重要的是要记住 SSRS 很聪明，并且会在您需要时保存异常。如果您正在导出，那么它将提取所有数据。此外，如果您正在在线查看并且您有展开和折叠行，则在您想要查看之前不会执行它们。根据该理论，首选基本 SQL。

最好将聚合留给 SSRS，因为无论如何报告都会尝试在 tablix 中聚合。至于图表，除非您也有 tablix，否则最好汇总。

至于简单的计算，应该在SQL中完成，比如比较等。

请记住，SSRS比您*更聪明*;) 并且最简单的 SQL 可以使此服务发挥最佳效果，并且此服务主要用于显示。

如果您将 MS SQL 服务器用于数据集，则该服务将发挥最佳作用。*

# android - 无法在 iOS 5+ 中从 android 播放录制的音频文件

> ID：14645735
> 
> 赞同：10
> 
> 时间：2013-02-01T11:53:12.967
> 
> 标签：android, ios5, avaudiorecorder, aac, android-mediarecorder

我正在开发也支持 iOS 的 android 应用程序。我想录制音频并在 Android 和 iOS 设备中播放。我正在使用以下设置在 android 中录制音频

```
MediaRecorder audioRecorder = new MediaRecorder();
audioRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
audioRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
audioRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
audioRecorder.setAudioSamplingRate(44100);
audioRecorder.setAudioChannels(1);
audioRecorder.setAudioEncodingBitRate(12800);
audioRecorder.setOutputFile(<recordedSoundFilePath>);
audioRecorder.prepare();
audioRecorder.start(); 
```

在iOS端，设置如下

```
//audioRecorder is object of  AVAudioRecorder 

NSMutableDictionary *recordSettings = [[NSMutableDictionary alloc] initWithCapacity:10];
    NSNumber *formatObject;
    formatObject = [NSNumber numberWithInt: kAudioFormatMPEG4AAC ];

    [recordSettings setObject:formatObject forKey: AVFormatIDKey];
    [recordSettings setObject:[NSNumber numberWithFloat:44100.0] forKey: AVSampleRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:1] forKey:AVNumberOfChannelsKey];
    [recordSettings setObject:[NSNumber numberWithInt:12800] forKey:AVEncoderBitRateKey];
    [recordSettings setObject:[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSettings setObject:[NSNumber numberWithInt: AVAudioQualityHigh] forKey: AVEncoderAudioQualityKey];

    NSURL *soundFileURL = [NSURL fileURLWithPath:[self soundFilePath]];

    NSError *error = nil;
    audioRecorder = [[ AVAudioRecorder alloc] initWithURL:soundFileURL settings:recordSettings error:&error];

    if ([audioRecorder prepareToRecord] == YES){
        [audioRecorder record];
    }else {
        int errorCode = CFSwapInt32HostToBig ([error code]);
        NSLog(@"Error: %@ [%4.4s])" , [error localizedDescription], (char*)&errorCode);

    } 
```

我可以录制音频并且它在 android 设备中正确播放。现在的问题是我可以在 Android 设备上播放 iOS 录制的音频，但**iOS 设备无法播放 Android 设备上录制的音频**。它返回`OSStatus error 1937337955`。我搜索了这个错误，但我找不到任何东西。

谁能告诉我我的代码出了什么问题？

任何形式的帮助都将受到高度赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:09:31.223

试试这个：

```
audioRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
audioRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
audioRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-31T14:46:36.107

我遇到了同样的问题，即从三星设备录制的音频无法在所有 IOS 设备上运行，甚至在 safari 浏览器上也无法运行。但它们在所有安卓设备上都能正常工作。我已通过在 AudioRecordingUtil 类中添加以下行来解决此问题：

```
recorder?.let{
  it.setAudioSource(MediaRecorder.AudioSource.MIC)
  it.setOutputFormat(MediaRecorder.OutputFormat.AAC_ADTS)
  it.setAudioEncoder(MediaRecorder.AudioEncoder.AAC)
}
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T20:26:30.663

这是编解码器的问题，iOS 录制的格式无法通过 android 媒体播放器解码，为了使其正常工作，只需将 IOS 端的音频文件解码为 android 支持的格式，如 mp3 或 mp4 或 3Gp 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-18T21:33:48.290

我也遇到了 MediaRecorder 的问题。在录音时，Mime 类型是不同的，例如

```
Mac chrome - Mime Type:audio/webm;codecs=opus
Mac Safari - Mime Type:audio/mp4
Windows/Android - Mime Type:audio/webm;codecs=opus
Iphone Chrome - Mime Type:audio/mp4 
```

我将文件保存为 M4a，但音频未在 IOS 中运行。经过一些分析和测试。我决定在服务器上传后转换文件并使用 ffmpeg，它就像一个魅力。

```
 <!-- https://mvnrepository.com/artifact/org.bytedeco/ffmpeg-platform -->
    <dependency>
        <groupId>org.bytedeco</groupId>
        <artifactId>ffmpeg-platform</artifactId>
        <version>4.3.2-1.5.5</version>
    </dependency>

 /**
 * Convert the file into MP4 using H264 Codac in order to make it work in IOS Mobile Device
 * @param file
 * @param outputFile
 */
private void convertToM4A(File file, File outputFile) {
    try {
        String ffmpeg = Loader.load(org.bytedeco.ffmpeg.ffmpeg.class);
        ProcessBuilder pb = new ProcessBuilder(ffmpeg, "-i", file.getPath(), "-vcodec", "h264", outputFile.getPath());
        pb.inheritIO().start().waitFor();
    }catch (Exception e ){
        e.printStackTrace();
    }
} 
```

# java - 从 one-jar 中加载静态资源

> ID：14645744
> 
> 赞同：2
> 
> 时间：2013-02-01T11:53:31.583
> 
> 标签：java, jar, jetty

我有一个托管在码头服务器上的网页。该页面显示一些静态图像，图像目录保存在一个 jar 中，比如 application.jar。这个 application.jar 被打包在一个 jar 中。我在访问图像目录时遇到问题，因为它们位于另一个 jar 中的 jar 中。我已经尝试了几乎所有获取图像目录 URL 的方法：class.getClassLoader().getResource()、Thread.currenctThread.getContextClassLoader().getResource()、ClassLoader.getSystemClassLoader().getResource() 等。无其中有任何帮助。我编写了所有这些语句，即尝试从 application.jar 中的类访问图像目录。这个 jar 也包含图像目录。

如果有人以前遇到过这种情况，请回复此线程。我也愿意接受任何其他可以帮助我实现目标的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:36:26.577

您可以使用

```
InputStream input = getClass().getResourceAsStream("/classpath/to/my/file"); 
```

你可以在这里找到更多：

[如何从 Java 中的 jar 中读取文件？](https://stackoverflow.com/questions/3369794/how-can-i-read-file-from-jar-in-java)

[如何访问 JAR 文件中的资源？](https://stackoverflow.com/questions/2393194/how-to-access-resources-in-jar-file)

# android - GPE 3.2 发布？

> ID：14645746
> 
> 赞同：1
> 
> 时间：2013-02-01T11:53:33.837
> 
> 标签：android, google-app-engine

GPE 3.2 何时发布有任何更新吗？我听说它应该在一月中旬发布，但仍然没有任何迹象？我正在运行 Eclipse Juno，但连接到 android 的 App 引擎无法正常工作。我正在尝试使用谷歌应用引擎后端开发一个 android 应用，但在新版本发布之前无法取得进展。

非常感谢任何建议/通知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-16T12:48:34.880

2013 年 2 月 13 日：[https](https://developers.google.com/eclipse/docs/release_notes#v3.2.0) ://developers.google.com/eclipse/docs/release_notes#v3.2.0 ，当然还有更多最新版本。

# php - XSLTProcessor 从字符串而不是文档转换为 xml

> ID：14645747
> 
> 赞同：2
> 
> 时间：2013-02-01T11:53:38.010
> 
> 标签：php, xslt

这是我的问题：我正在尝试使用 XSLTProcessor 将 xml 转换为 html。我已经阅读了它的使用，但我有以下问题 - transformToXML(xml_file) 函数要求 xml_file 是一个实际的 xml 文件。transformToXML 函数是否可以使用字符串而不是文件？我试过在网上搜索这个，但我得到的只是我已经看到的使用 xml 文件的东西。由于我需要大规模使用这种转换（许多用户需要大量不同的转换），所以我不能在服务器上使用文件。这是我的代码，所以也许您可以获得更好的图片：

```
$productxml=  GetShoppingItem($params);

$file = 'ProductQr.xml';    
file_put_contents($file, $productxml);

$xml = new DOMDocument();
$xml->load('ProductQr.xml');

$XSL = new DOMDocument();
$XSL->load('XSLTForProduct.xsl');

$xslt = new XSLTProcessor();
$xslt->importStylesheet($XSL);

$html = $xslt->transformToXML( $xml );
return $html; 
```

如您所见，我在这里获取 $productxml 字符串并将其写入 ProductQr.xml，以便稍后在此处使用它：transformToXML($xml)。但是会有很多转换，我不能使用一个 xml 文件，因为有很多不同的产品。理想情况下，我会使用：

```
$html = $xslt->transformToXML($productxml); 
```

无需写入 xml 文件，但 transformToXML 需要一个文件而不是字符串。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:57:54.380

您可以使用`loadXML`而不是`load`从字符串中解析 XML。

# asp.net-mvc-3 - 具有 MVC 应用程序的分离模式下的实体框架

> ID：14645752
> 
> 赞同：0
> 
> 时间：2013-02-01T11:54:01.950
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, repository-pattern, n-tier-architecture

我已经开始为 MVC n 层应用程序使用实体框架 (EF)。很明显，这是一个 Web 应用程序（它是无状态的），我将不得不使用分离的对象模型。执行 Add 操作没有歧义。但是，在进行编辑时，有两种方法

2.  在上下文中获取原始对象，附加更新的对象，然后保存到数据库。在回答这个问题 EF4 Context.ApplyCurrentValues 时提到的东西 [不会更新当前值](https://stackoverflow.com/questions/4038713/ef4-context-applycurrentvalues-does-not-update-current-values)
3.  使用本文中提到的对象的各个字段的 IsModified 属性显式设置各个修改的属性 [http://msdn.microsoft.com/en-us/data/jj592677.aspx](http://msdn.microsoft.com/en-us/data/jj592677.aspx)

方法 1 的缺点是每次需要执行更新时都必须将对象从数据库加载到内存中。方法 2 将需要从要更新对象的任何位置手动传递要设置为 IsModified 的字段为 true。因此，例如对于每个对象，我可能需要为对象的每个字段创建一个布尔集合对象。例如

```
SaveEntity(EntityClass e, EntityStateClass ec)
{
  context.Entry(e).Property("Name").IsModified = ec.NameState;

  context.SaveChanges();
}

class EntityStateClass{ public bool NameState;} 
```

出于性能考虑，我更喜欢方法 2，但我受到我正在使用的 n 层架构和存储库模式的阻碍。我的存储库接口限制任何对象的保存方法

```
 SaveEntity(EntityClass e); 
```

所以我不能传递“状态”对象。上下文类不可用，不应该在 DAL 之外可用。所以我不能在外面设置属性。有没有“正确”的方法来实现这一目标？
注意：自我跟踪实体也没有问题，因为我无法将具有状态的实体发送到客户端（浏览器），因为我打算保持 html 轻量级。

**编辑：**经过深思熟虑，我试图使用以下机制来跟踪我的域类中每个字段的修改状态

*   为实体类声明一个部分类。
*   对于每个可更新的字段，声明一个布尔属性，如“ *IsModified_FieldName* ”
*   *设置字段*时设置“IsModified_FieldName ”属性。

但是为此，我需要 Entity Framework 为我生成显式属性，而不是它自动生成的隐式属性。EF 是否提供了执行此操作的句柄？

这是我想要实现的示例代码

```
 //Save Method for class EntityClass. 
 SaveEntity(EntityClass e)
 {
   context.Entry(e).Property("Name").IsModified = e.IsModified_Name;
   context.SaveChanges();
 }

//EntityClass is class autogenerated by EF
 public partial class EntityClass
  {

        //This is auto-generated property by EF
        public string Name {get; set;}

        /* This is what I would like EF to do
            private string name;
            public string Name 
            {
               get {return Name;}
               set {
                     name = value;
                     //this is what I would like to do
                     this.IsModified_Name = true;
                   };

            }
         */
 }

 //This is another partial definition for EntityClass that I will provide
  public partial class EntityClass
  {
     //This property will be set to true if "Name" is set
      public bool IsModified_Name {get; set;}
  } 
```

PS：看来我提供的信息不充分，所以没有回复。

*   我正在使用 DbContext（数据库优先模型）
*   EF 为我自动生成类文件。所以每次我更新我的数据库时，都会重新生成类文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:35:23.730

对于您的具体问题：实体是由 T4 模板生成的，应该可以修改此模板（文本格式）以您想要塑造实体的方式生成实体。

但我对你的概念有几点意见：

*   在 Web 应用程序中，数据通常由用户在浏览器中更改。要确定真正发生了哪些更改，您需要跟踪浏览器中的更改（可能是通过一些 Javascript 在用户编辑文本框时在数据中设置标志（例如 ViewModel））。

    如果您不跟踪浏览器中的更改，会发生什么？数据被发送回服务器，而您在服务器端（使用控制器中的 MVC）不知道哪个属性已更改。因此，您唯一的机会是将**所有**已发布回您的属性映射，`EntityClass`并且每个属性都将标记为`Modified`，无论用户是否真的进行了更改。当您稍后调用`SaveChanges`EF 时，将编写一个`UPDATE`涉及所有这些属性的语句，并且您需要避免不必要的开销。

*   那么，通过设置单个属性而不是将整个实体的状态设置为 ，您获得了什么`Modified`？**在这两种情况下，您都将所有**属性标记为`Modified`。例外是实体的部分更改，例如：您有一个`Customer`实体，该实体具有一个`Name`and`City`属性和一个仅允许编辑`Name`但不允许编辑的视图，`City`以及一个仅包含一个`Name`属性的相应 ViewModel。在这种情况下，您的程序只会将实体的`Name`属性标记为而不是. 您可能会在此处保存一点，因为您没有将属性值保存到数据库中。但是即使它没有更改，您仍然可以保存。`Customer``Modified``City``City``Name`

*   如果您使用解决方案 1 ( `ApplyCurrentValues`)，您必须首先从数据库中加载实体，是的，但它只会将属性标记为`Modified`与数据库中的值相比确实发生了变化。如果用户没有更改任何内容，则根本`UPDATE`不会写入任何内容。

*   请记住，您只是在开始实施您的概念。除了标量属性更改（即关系更改）之外，浏览器中还可能发生其他数据更改。例如，用户将关系从 an 更改`Order`为 a `Customer`，或者您有一个包含 an`Order`和集合的视图，`OrderItems`并且用户不仅可以编辑`Order`标题，还可以编辑`OrderItem`s 并删除和添加新`OrderItem`的 s。当数据从浏览器返回到服务器时，您希望如何识别哪些集合项已添加，哪些已删除 - 除非您在浏览器中跟踪所有这些更改并将跟踪信息发送回服务器实际数据或除非您重新加载`Order`和`OrderItem`s 并将更改合并到数据库中的原始实体中？

出于以下原因，我个人会投票支持选项 1：

*   您可以使用不携带额外跟踪信息的真实 POCO。（顺便说一句：我怀疑您是否没有通过实施自己的 EF 更改跟踪代理开箱即用的跟踪来重新发明轮子。）

*   您不需要跟踪浏览器中的更改，这可能会变得非常复杂，并且需要在每个编辑视图中使用 Javascript 将更改标志写入隐藏的表单字段或其他内容。

*   您可以使用 EF 的标准功能，而无需实现自己的跟踪。

*   当您想要更新实体时，您需要从数据库中加载实体，这是真的。但这是否是 Web 应用程序中真正的性能瓶颈，其中数据必须通过网络来回运行（并且模型绑定器涉及反射（实际上并不是很快））？如果您的数据库远离 Web 服务器并通过 9600 波特调制解调器连接，我无话可说。但除此之外，您的计划不仅是过早的优化，而且是一种过早的架构。您开始基于“它可能很慢”来构建一个潜在的复杂架构，以解决您实际上不知道它是否真的存在的性能问题。

# ember.js - 返回结构化 JSON 的 Ember 数据

> ID：14645754
> 
> 赞同：1
> 
> 时间：2013-02-01T11:54:10.087
> 
> 标签：ember.js, ember-data

我使用 Ember Data 已经有一段时间了，我对此非常满意。我喜欢它迫使我以合理的方式构建我的 REST api 的方式。

我遇到了一些问题，这是其中之一：我之前使用的是平面结构的模型：

```
App.Pageview = DS.Model.extend({
  event: attr('string'),
  value: attr('string'),
  time: attr('date'),
  count: attr('number')
}); 
```

在这种情况下，值是一个字符串中的 url。该模型适用于如下所示的 JSON：

```
{
  "event" : "pageview",
  "value" : "google.com/some/page",
  "time" : "2013-01-31T16:30:00.000Z",
  "count" : 14
} 
```

我改变了 JSON 在数据库中的结构方式，使其更易于查询，现在它看起来像这样：

```
{
  "event" : "pageview",
  "value" : {
    "url" : "google.com/some/page",
    "domain" : "google.com",
    "path" : "/some/page"
  },
  "time" : "2013-01-31T16:30:00.000Z",
  "count" : 14
} 
```

但现在我真的不知道该去哪里。我试着做这样的事情：

```
App.Pageview = DS.Model.extend({
  event: attr('string'),
  value: {
      domain: attr('string'),
      url: attr('string'),
      path: attr('string')
  },
  time: attr('date'),
  count: attr('number')
}); 
```

但这似乎不起作用，我像这样测试它：

```
 console.log(item.get('value'));
  console.log(item.get('value.domain'));
  // console.log(item.get('value').get('domain')); // throws 
  console.log(item.get('value').domain); 
```

并得到以下结果：[http ://d.pr/i/izDD](http://d.pr/i/izDD)

所以我做了更多的挖掘，发现我可能应该做这样的事情：

```
App.Pageview = DS.Model.extend({
  event: attr('string'),
  value: DS.belongsTo('App.SplitUrl', {embedded:true}),
  time: attr('date'),
  count: attr('number')
});

App.SplitUrl = DS.Model.extend({
  domain: attr('string'),
  url: attr('string'),
  path: attr('string')
}); 
```

但这不起作用，因为我得到一个错误：

```
Uncaught TypeError: Cannot call method 'hasOwnProperty' of undefined 
```

这通常发生在我向我的 REST api 发送一个没有 id 的对象时。这是我的 REST api 的确切响应：

[http://d.pr/n/UyW0](http://d.pr/n/UyW0)

注意：我已经重载了适配器，以便它期望 id 在 _id 字段中，以便它可以更好/更轻松地使用 mongodb。这就是我重载适配器的方式：

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.create({
    serializer: DS.JSONSerializer.extend({
      primaryKey: function(type) {
        return '_id';
      }
    }), 
    namespace: 'api'
  })
}); 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:43:17.927

假设您使用的是 ember-data 修订版 11，请尝试将您的值配置为嵌入在适配器中。

```
DS.RESTAdapter.map('App.SplitUrl',{value:{ embedded:'always'}}); 
```

# android - Android Widget：Textview 在主页滚动时停止选取框

> ID：14645756
> 
> 赞同：2
> 
> 时间：2013-02-01T11:54:12.800
> 
> 标签：android, android-widget, textview

我的小部件中有一个文本视图，可以像选框一样滚动文本。现在，它在正常状态下工作。但是，如果我在我的主屏幕上滚动（滑动）其他页面，那么这个 textview 将停止滚动。任何想法如何解决这个问题？

我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="8dip"
    android:background="@drawable/myshape" >

    <TextView
        android:id="@+id/update"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:freezesText="true"
        android:gravity="center_vertical|center_horizontal"
        android:layout_gravity="center"
        android:textColor="@android:color/black"
        android:marqueeRepeatLimit="marquee_forever"
        android:paddingLeft="15dip"
        android:paddingRight="15dip"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:textSize="25dp" >

        <requestFocus
            android:duplicateParentState="true"
            android:focusable="true"
            android:focusableInTouchMode="true" />
    </TextView>

</LinearLayout> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:58:24.780

你的xml看起来不错，

在您的简历方法中尝试添加

```
textview_update.setSelected(true); 
```

另外，我发现一些小型设备无法处理长度超过 1024 的文本视图，否则它将停止（当内存已满时）

# jquery - IFrame 上的 jQuery 对话框（包含 PDF 文档）在 IE 中重叠

> ID：14645759
> 
> 赞同：2
> 
> 时间：2013-02-01T11:54:13.820
> 
> 标签：jquery

我正在尝试在 IFrame 中的 PDF 文档之上显示一个 jQuery 对话框。当我单击表单中的按钮时，会弹出一个 jQuery 对话框。问题是弹出窗口位于 PDF 文档的后面，而不是显示在视口的顶部。此问题仅在 IE（6,7 和 8）中出现。Firefox 正确显示元素，没有任何重叠问题。

我尝试设置**position: relative**和**z-index:**，但没有运气！

请帮忙。

提前致谢 ！

# ios - 在设备上运行时出现 xcode 错误

> ID：14645760
> 
> 赞同：0
> 
> 时间：2013-02-01T11:54:14.140
> 
> 标签：ios, xcode

您好在尝试在设备（iPad）上运行我的代码时反复出现错误。在其巨大的描述命令 /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 结束时出现的错误，退出代码为 254

每次我从模拟器切换到设备运行时，我都需要清理、删除派生数据、退出并重新启动 xcode。这是完整的错误描述 -

```
CompileC /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Objects-normal/armv7/BriefcaseOperationsServiceAgent.o "SalesMaps/Classes/Service Agents/BriefcaseOperationsServiceAgent.m" normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
    cd /Users/c5180645/Perforce/SalesMapJan/onDevice/SAPGDBLR_SalesMap_MiOS/dev/src/xcode
    setenv LANG en_US.US-ASCII
    setenv PATH "/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Volumes/Xcode/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c -arch armv7 -fmessage-length=0 -std=gnu99 -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wmissing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -miphoneos-version-min=4.1 -iquote "/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Sales Maps-generated-files.hmap" "-I/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Sales Maps-own-target-headers.hmap" "-I/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Sales Maps-all-target-headers.hmap" -iquote "/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Sales Maps-project-headers.hmap" -I/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Products/Debug-iphoneos/include -ISalesMaps/Libraries -ISalesMaps/Libraries/GSComponent -ISalesMaps/Libraries/VFR -ISalesMaps/Libraries/GSComponent/Classes -ISalesMaps/Libraries/VFR/Classes -ISalesMaps/Libraries/VFR/Resources "-I/Users/c5180645/Perforce/SalesMapJan/onDevice/SAPGDBLR_SalesMap_MiOS/dev/src/xcode/../../target/headers/Debug-iphoneos/**" -I/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/DerivedSources/armv7 -I/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/DerivedSources -F/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Products/Debug-iphoneos -include /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/PrecompiledHeaders/SalesMap-Prefix-etkfpououlszbidzxbhsxwstcvcl/SalesMap-Prefix.pch -MMD -MT dependencies -MF /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Objects-normal/armv7/BriefcaseOperationsServiceAgent.d --serialize-diagnostics /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Objects-normal/armv7/BriefcaseOperationsServiceAgent.dia -c "/Users/c5180645/Perforce/SalesMapJan/onDevice/SAPGDBLR_SalesMap_MiOS/dev/src/xcode/SalesMaps/Classes/Service Agents/BriefcaseOperationsServiceAgent.m" -o /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Objects-normal/armv7/BriefcaseOperationsServiceAgent.o

0  clang             0x0000000101058eb2 main + 17130162
1  clang             0x0000000101059339 main + 17131321
2  libsystem_c.dylib 0x00007fff89fdb92a _sigtramp + 26
3  clang             0x0000000100303825 main + 3148837
4  clang             0x00000001003062c8 main + 3159752
5  clang             0x0000000100305fd1 main + 3158993
6  clang             0x000000010030275f main + 3144543
7  clang             0x00000001002fe0aa main + 3126442
8  clang             0x00000001002f13a9 main + 3073961
9  clang             0x00000001001cf1b7 main + 1885623
10 clang             0x00000001001ca43d main + 1865789
11 clang             0x00000001001ca305 main + 1865477
12 clang             0x00000001001ca1ed main + 1865197
13 clang             0x0000000100197f8c main + 1659788
14 clang             0x000000010018a4ad main + 1603757
15 clang             0x0000000100047556 main + 280918
16 clang             0x0000000100045b0e main + 274190
17 clang             0x0000000100044cd1 main + 270545
18 clang             0x0000000100019ae2 main + 93922
19 clang             0x0000000100018748 main + 88904
20 clang             0x0000000100006408 main + 14344
21 clang             0x0000000100002e87 main + 647
22 clang             0x0000000100002bf4
Stack dump:
0\.  Program arguments: /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -cc1 -triple thumbv7-apple-ios4.1.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name BriefcaseOperationsServiceAgent.m -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -target-abi apcs-gnu -target-cpu cortex-a8 -mfloat-abi soft -target-feature +soft-float-abi -target-linker-version 134.9 -g -coverage-file /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Objects-normal/armv7/BriefcaseOperationsServiceAgent.o -resource-dir /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.1 -dependency-file /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Objects-normal/armv7/BriefcaseOperationsServiceAgent.d -MT dependencies -isysroot /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -iquote /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Sales Maps-generated-files.hmap -iquote /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Sales Maps-project-headers.hmap -include-pch /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/PrecompiledHeaders/SalesMap-Prefix-etkfpououlszbidzxbhsxwstcvcl/SalesMap-Prefix.pch.pth -D DEBUG=1 -D IBOutlet=__attribute__((iboutlet)) -D IBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName))) -D IBAction=void)__attribute__((ibaction) -I /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Sales Maps-own-target-headers.hmap -I /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Sales Maps-all-target-headers.hmap -I /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Products/Debug-iphoneos/include -I SalesMaps/Libraries -I SalesMaps/Libraries/GSComponent -I SalesMaps/Libraries/VFR -I SalesMaps/Libraries/GSComponent/Classes -I SalesMaps/Libraries/VFR/Classes -I SalesMaps/Libraries/VFR/Resources -I /Users/c5180645/Perforce/SalesMapJan/onDevice/SAPGDBLR_SalesMap_MiOS/dev/src/xcode/../../target/headers/Debug-iphoneos/** -I /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/DerivedSources/armv7 -I /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/DerivedSources -F/Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Products/Debug-iphoneos -fmodule-cache-path /var/folders/wl/vp1gp4ks6_77xwvbcvlsm8tskgfr5y/T/clang-module-cache -O0 -Wno-trigraphs -Wno-missing-field-initializers -Wmissing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -Wprotocol -Wdeprecated-declarations -Wno-sign-conversion -std=gnu99 -ferror-limit 19 -fmessage-length 0 -stack-protector 1 -mstackrealign -fblocks -fobjc-default-synthesize-properties -fobjc-exceptions -fexceptions -fsjlj-exceptions -fpascal-strings -fdiagnostics-show-option -serialize-diagnostic-file /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Objects-normal/armv7/BriefcaseOperationsServiceAgent.dia -o /Users/c5180645/Library/Developer/Xcode/DerivedData/SalesMap-apwauterdbqwwrfeudcmuixcsupw/Build/Intermediates/SalesMap.build/Debug-iphoneos/SalesMap.build/Objects-normal/armv7/BriefcaseOperationsServiceAgent.o -x objective-c /Users/c5180645/Perforce/SalesMapJan/onDevice/SAPGDBLR_SalesMap_MiOS/dev/src/xcode/SalesMaps/Classes/Service Agents/BriefcaseOperationsServiceAgent.m 
1\.  <eof> parser at end of file
2\.  Code generation
3\.  Running pass 'Function Pass Manager' on module '/Users/c5180645/Perforce/SalesMapJan/onDevice/SAPGDBLR_SalesMap_MiOS/dev/src/xcode/SalesMaps/Classes/Service Agents/BriefcaseOperationsServiceAgent.m'.
clang: error: unable to execute command: Segmentation fault: 11
clang: error: clang frontend command failed due to signal (use -v to see invocation)
Apple clang version 4.1 (tags/Apple/clang-421.11.65) (based on LLVM 3.1svn)
Target: arm-apple-darwin12.0.0
Thread model: posix
clang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.
clang: note: diagnostic msg: 
********************

PLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:
Preprocessed source(s) and associated run script(s) are located at:
clang: note: diagnostic msg: /var/folders/wl/vp1gp4ks6_77xwvbcvlsm8tskgfr5y/T/BriefcaseOperationsServiceAgent-bAfEV4.mi
clang: note: diagnostic msg: /var/folders/wl/vp1gp4ks6_77xwvbcvlsm8tskgfr5y/T/BriefcaseOperationsServiceAgent-bAfEV4.sh
clang: note: diagnostic msg: 

********************
Command /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 254 
```

设备或任何其他东西是否有任何问题，如果您知道请帮助，有人会找到答案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-27T06:27:05.220

我遇到了类似的错误。在我的情况下，清理项目并删除构建和派生数据就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:35:47.503

我想通了，它只是一个链接错误，只需重建项目即可解决问题。谢谢

# java - 当另一个 JFrame 可见时，模态对话框并不总是位于未修饰的 JFrame 之上

> ID：14645761
> 
> 赞同：1
> 
> 时间：2013-02-01T11:54:23.463
> 
> 标签：java, linux, swing, jframe, modal-dialog

**我对模态对话框和**undecorated有一个奇怪的问题`JFrame`。

如果我创建一个未装饰的主目录`JFrame`，那么我会显示一个模式对话框，这要归功于`JOptionPane`，一切顺利。模态对话框始终位于顶部，我无法单击主要名声。

但是，如果创建另一个`JFrame`（或另一个`JDialog`），模态对话框仍然阻止我与主框架进行交互，但现在模态对话框并不总是在顶部，当我单击它时会进入主框架的下方。

不会发生此问题：

*   如果主框架被装饰
*   或者如果第二帧不可见

编辑

我`jdk1.7.0.0_09`在e 上使用。`Linux Sus`但我有相同的结果`jre 1.6.0_32`

我用来测试的代码：

```
 public static void main(String[] args) {
    // creates main frame and set visible to true
    final JFrame mainFrame = new JFrame();
    mainFrame.setUndecorated(true); // if I comment this line, everything goes well
    mainFrame.add((new JPanel()).add(new JButton("OK")));
    mainFrame.setSize(new Dimension(500, 500));
    mainFrame.setVisible(true);
    // creates a dialog and set visible to true
    JFrame anotherFrame = new JFrame();
    anotherFrame.setVisible(true); // or if I comment this line, everything goes well too
    // display a modal dialog
    JOptionPane.showMessageDialog(mainFrame, "A message");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:07:07.807

> 但是，如果创建另一个 JFrame（或另一个 JDialog），模态对话框仍然阻止我与主框架进行交互，但现在模态对话框并不总是在顶部，当我单击它时会进入主框架的下方。

*   根本不正确，在 JOptioPane 可见之前两者都不可访问

*   JOptionPane 或 JDialod.setModal(true) 阻止鼠标或键事件到从 currnet JVM 调用的所有窗口

*   您的问题中肯定还有其他不清楚的地方，其余代码，次要可能是Java版本和本机操作系统

![在此处输入图像描述](../Images/286cee0276108bb960df4ff03dd508bd.png)

Java6 (winxp) 的代码，适用于 Win7 / Java7(x.x_011)

```
import java.awt.Dimension;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class Main {

   private JFrame mainFrame = new JFrame();
   private JFrame anotherFrame = new JFrame();

    public Main() {
        mainFrame.setUndecorated(true);
        mainFrame.add((new JPanel()).add(new JButton("OK")));
        mainFrame.setSize(new Dimension(100, 60));
        mainFrame.setVisible(true);
        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        anotherFrame.setVisible(true);
        anotherFrame.setLocation(110, 0);
        anotherFrame.setSize(new Dimension(100, 60));
        anotherFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JOptionPane.showMessageDialog(mainFrame, "A message");
    }

    public static void main(String[] args) {
       java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                Main main = new Main();
            }
        });
    }
} 
```

# mysql - 我如何找到销售一种类型但不销售另一种类型的制造商？

> ID：14645764
> 
> 赞同：6
> 
> 时间：2013-02-01T11:54:42.850
> 
> 标签：mysql, sql, database

我必须：

> 查找销售个人电脑但不销售笔记本电脑的制造商。

此查询未输出正确结果：

```
SELECT maker, type FROM product
WHERE type = 'PC' AND type <> 'Laptop' 
```

此输出和正确输出：

![输出](../Images/9328a7bb68c7c49e7a8e31e2fdef3714.png)

此查询的结果集：

```
SELECT maker, type FROM product 
```

![ex2](../Images/8b3ade6b42b656adff996afaca40eb21.png)

表架构：

![桌子](../Images/94badf62c97ef185ce300b81b9c24a5c.png)

即使这个也不起作用：

```
SELECT maker, type FROM product
WHERE type IN('PC') AND type NOT IN('Laptop') 
```

注意 -`type`添加只是为了澄清

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T12:00:04.747

尝试：

```
SELECT maker
FROM product
GROUP BY maker
HAVING SUM(CASE WHEN type = 'PC' THEN 1 ELSE 0 END) > 0
   AND SUM(CASE WHEN type = 'Laptop' THEN 1 ELSE 0 END) = 0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-22T09:27:26.547

有许多奇特的方法可以解决这个问题。在这里，首先想到的是:)

1.  微不足道的解决方案。

    ```
    SELECT DISTINCT maker
       FROM Product
         WHERE type = 'PC' AND maker NOT IN (
             SELECT maker
             FROM Product
             WHERE type = 'Laptop') 
    ```

2.  使用`JOIN`

    ```
    SELECT DISTINCT Pr.maker
    FROM Product AS Pr LEFT JOIN Product AS Pr2
        ON Pr.maker = Pr2.maker AND Pr2.type = 'Laptop'
    WHERE Pr.type = 'PC' AND Pr2.maker IS NULL 
    ```

3.  使用`EXCEPT`.

    ```
    SELECT DISTINCT maker
        FROM product AS Pr1
        WHERE type = 'PC'
    EXCEPT
    SELECT DISTINCT Pr2.maker
        FROM product AS Pr2
        WHERE type = 'laptop' 
    ```

4.  使用`DISTINCT`和`NOT EXISTS`。

    ```
    SELECT DISTINCT maker
    FROM Product AS PcP
    WHERE type = 'PC' AND
          NOT EXISTS (SELECT maker
                      FROM Product
                      WHERE type = 'laptop' AND
                      maker = PcP.maker
                     ) 
    ```

5.  使用`CASE`增量和`HAVING`。

    ```
    SELECT maker
        FROM product
    GROUP BY maker
    HAVING SUM(CASE WHEN type = 'PC' THEN 1 ELSE 0 END) > 0
       AND SUM(CASE WHEN type = 'Laptop' THEN 1 ELSE 0 END) = 0 
    ```

6.  使用`DISTINCT`和比较子查询

    ```
    SELECT DISTINCT maker
    FROM Product AS Pr
    WHERE (SELECT COUNT(1)
           FROM Product AS Pt
           WHERE Pt.type = 'PC' AND Pt.maker = Pr.maker
          ) > 0 
        AND
          (SELECT COUNT(1)
           FROM Product AS Pt2
           WHERE Pt2.type = 'Laptop' AND
           Pt2.maker = Pr.maker
          ) = 0 
    ```

7.  使用`HAVING`和作弊（`HAVING`不能包含没有聚合的列，所以我们使用无意义的（在这种情况下）聚合`MIN`（或`MAX`- 没关系）

    ```
    SELECT maker
        FROM (SELECT DISTINCT maker, type
              FROM Product
              WHERE type IN ('PC', 'Laptop')
             ) AS T
    GROUP BY maker
    HAVING COUNT(*) = 1 AND MIN(type) = 'PC' 
    ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-01T12:02:45.137

试试这个 **找出销售个人电脑但不销售笔记本电脑的制造商。**

```
SELECT maker , type FROM product
WHERE type = 'PC' AND maker NOT IN 
( SELECT maker FROM product WHERE type = 'laptop' ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-04T08:25:17.690

```
select distinct maker 
from product 
where type = 'PC'  
  and maker not in ( select maker from product where type = 'Laptop') 
```

有用

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-29T19:46:58.867

```
SELECT DISTINCT maker
FROM Product AS pc_product
WHERE type = 'pc' AND 
      NOT EXISTS (SELECT maker 
                  FROM Product
                  WHERE type = 'laptop' AND 
                        maker = pc_product.maker
                  ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T11:59:45.650

我可以建议您尝试修剪 where 子句中的值...可能有一些差事空间，因此完全匹配不会返回所需的结果。

像这样：

```
SELECT maker , type FROM product
WHERE TRIM(type) = 'PC' AND TRIM(type) <> 'Laptop' 
```

或者，您可以简单地尝试：

```
SELECT maker , type FROM product
WHERE TRIM(type) = 'PC' 
```

如果笔记本电脑和 PC 是 2 种不同的类型，则只需过滤 PC。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-01T05:21:15.513

尝试如下；

```
 Select maker from product where type in('PC','laptop')
    except
    select maker from product where type='laptop' 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-02T00:35:33.897

从 type='PC' 和 maker 不在的产品中选择不同的制造商（从 type='laptop' 的产品中选择制造商）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-14T22:10:56.790

解决问题的简单方法

```
Select maker from product
where type = 'PC'
Except
Select maker from product
where type = 'laptop' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-10-06T07:36:08.077

```
select distinct Prd.maker as Maker
from   product as Prd INNER JOIN PC as P
ON     Prd.model = P.model
WHERE NOT EXISTS
(
  SELECT 1 FROM Laptop as L INNER JOIN Product as P
  ON L.model = P.model and Prd.maker = P.maker
) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-30T21:38:25.413

试试这个查询

```
SELECT DISTINCT MAKER FROM PRODUCT
WHERE TYPE IN ('PC') AND MAKER NOT IN
(SELECT MAKER FROM PRODUCT WHERE TYPE IN ('LAPTOP')) 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-08-19T07:11:56.143

```
select maker from Product where type in('PC')
intersect
select maker from Product where type  in ('PC','Printer')
except
select maker from Product where type='Laptop' 
```

# javascript - 页面高度变化时检查/触发

> ID：14645765
> 
> 赞同：1
> 
> 时间：2013-02-01T11:54:45.957
> 
> 标签：javascript, html, iframe, height, watch

**案子：**

我正在网上搜索以根据 iframe 的内容重新调整 iframe 的大小（iframe 和页面托管来自同一个域）。我发现可能的工作解决方案是从 iframe 调用父窗口的函数，发送大小以设置 iframe 的高度。这很容易实现。

**问题：**

现在的问题是 iframe 中的页面加载是 AJAX 密集型的，并且依赖于用户在页面上的交互。高度可以相对于用户的操作增加或减少（请注意，高度仅在用户交互时改变，而不是随机或自动改变）。现在我想在“body”（iframe 内的页面）的高度改变高度时触发一个函数。这将帮助我在每次高度变化时重新调整 iframe 的大小。

**可能的解决方案：**

我尝试使用

```
jQuery(document).ready(function(){
    document.body.watch("clientHeight", function(property, oldHeight, newHeight) {
        alert('New Height: ' + newHeight);
    });
}); 
```

但该功能永远不会触发。即使我让它工作，从我在互联网上发现的内容来看，它在 IE 上也不起作用。我想要一个至少适用于 IE8 的解决方案。

另一种可能的解决方案是观察用户对可能导致高度变化的事件的交互。但这确实是低效的，因为有很多这样的事件可能会导致高度变化。

那么绕过它的最佳方法是什么？

问候

杰汉则布

# c# - Outlook 互操作导致 Outlook 在事件处理程序完成后停止

> ID：14645769
> 
> 赞同：0
> 
> 时间：2013-02-01T11:55:00.603
> 
> 标签：c#, outlook, office-interop

我遇到了一个问题，如果我的应用程序忙/无响应/因断点暂停，即使我收到的邮件事件处理程序早已返回，它也会导致 Outlook 停止。

我整理了一个小测试用例：

```
using System;
using System.ComponentModel;
using System.Runtime.InteropServices;
using System.Threading;
using System.Threading.Tasks;
using Microsoft.Office.Interop.Outlook;

namespace OutlookPerfTest
{
    class Program
    {
        private static Application app;
        private static NameSpace ns;

        static void Main(string[] args)
        {
            Type olType = Type.GetTypeFromProgID("Outlook.Application", false);

            app = Activator.CreateInstance(olType) as Application;
            ns = app.GetNamespace("MAPI");
            ns.Logon(null, null, false, false);

            app.NewMailEx += app_NewMailEx;

            for (; ; )
            { Thread.Sleep(10000); }
        }

        static void app_NewMailEx(string EntryIDCollection)
        {
            Console.WriteLine("New mail event triggered, running on background worker...");
            var bg = new BackgroundWorker();
            bg.DoWork += bg_DoWork;
            bg.RunWorkerAsync(EntryIDCollection);
            Console.WriteLine("New mail event ended, returning");
        }

        static void bg_DoWork(object sender, DoWorkEventArgs e)
        {
            Thread.Sleep(5000);

            Console.WriteLine("New mail thread started");

            string EntryIDCollection = (string)e.Argument;

            foreach (var id in EntryIDCollection.Split(','))
            {
                if (ns.GetItemFromID(id) is MailItem)
                {
                    Console.WriteLine(id + " is a mail item");
                }
            }

            Console.WriteLine("New mail thread Ended");
        }
    }
} 
```

在`Thread.Sleep(5000);`展望期间保持快乐和响应。到`Console.WriteLine`调用以下内容时，原始`app_NewMailEx`事件处理程序早已返回。

但是，如果我在那条线上断点，或者以其他方式锁定我的应用程序来执行一些密集的任务 - 即使事件没有被重新触发，outlooks 在这段时间内仍然没有响应。

如果我在消息到达时删除事件处理程序，并在完成后重新添加它，`bg_DoWork`那么它会缓解问题 - 但这意味着如果消息在这两次到达之间会丢失。

为什么会这样？在这种情况下，我怎样才能阻止前景变得反应迟钝？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:47:04.067

这是一个命令行应用程序，它不运行 COM 使用的 Windows 消息泵。你在 GUI 应用程序中使用过同样的问题吗？

# c# - 如何使用 LINQ 对 DISTINCT 行中的值求和

> ID：14645770
> 
> 赞同：1
> 
> 时间：2013-02-01T11:55:03.173
> 
> 标签：c#, linq

数据表如下：

```
Item CartonID Quantity
A    0001     1000
A    0002     500
A    0003     250
A    0002     500
B    0002     500
B    0003     250 
```

我的输出假设是这样的：

```
ItemNo CartonID        TotalCarton TotalQuantity
A      0001,0002,0003  3           2250
B      0002,0003       2           750 
```

但我的结果如下：

```
ItemNo  CartonID            TotalCarton  TotalQuantity
    A   0001, 0002, 0003    3              2,250
    B   0002, 0003          2                750 
```

我的代码如下：

```
var items = ( from item in dtTest.AsEnumerable()
              group item by new
              {
                  Item_No=item.Field<string>("Item")
              }
              into g
              select new
              {
                  g.Key.Item_No,
                  TotalCarton = (from p in dtTest.AsEnumerable()
                                 where p.Field<string>("Item") == g.Key.Item_No
                                 select p.Field<string>("CartonID")).Distinct().ToArray().Count(),
                  Total_Quantity =g.Sum((p=>p.Field<decimal>("Quantity"))).ToString("###,###,###,###"),
                  CartonID = (from p in dtTest.AsEnumerable()
                              where p.Field<string>("Item") == g.Key.Item_No
                              select p.Field<string>("CartonID")).Distinct().ToArray().Aggregate
                              ((p1, p2) => p1 + ", " + p2)
                 }).ToList(); 
```

任何人都可以告诉我如何用不同的纸箱 ID 对总数求和。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:33:15.727

您应该 GroupBy CartonID 然后对组元素求和：

像这样的东西

```
dtTest.GroupBy(x => x.CartonId)
      .ToDictionary(y => y.Key, y => y.Sum(z => z.Quantity); 
```

这将返回一个字典，其中包含每个 CartonID 的总数量。我希望我理解正确，这就是你想要的。

* * *

根据您说应该检索的输出，我将查询调整为：

```
dtTest.GroupBy(x => x.ItemNo)
      .Select(itemGroup => new { 
              itemGroup.Key,
              itemGroup.Distinct(item => item.CartonID), 
              itemGroup.Distinct(item => item.CartonID).Count(),
              itemGroup.Sum(item => item.Quantity)
}); 
```

# batch-file - Windows批处理文件查找字符串但不打印

> ID：14645773
> 
> 赞同：1
> 
> 时间：2013-02-01T11:55:41.913
> 
> 标签：batch-file, command, windows-scripting, findstr

我是 Windows 批处理脚本的新手，但已经开始使用`findstr`命令，例如

```
findstr "test" file.txt
if not errorlevel 1 ( echo Found it!) 
```

代码设法找到`test`但`file.txt`我不希望它输出它找到“测试”的行我只是希望它回显`Found it!`

这是否可能`findstr`或我应该使用其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:58:34.643

只需将输出重定向到`nul`.

```
findstr "test" file.txt >nul
if not errorlevel 1 ( echo Found it!) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:13:09.540

Bali C 的重定向正确，但 OP 的原始逻辑不正确。以下任何一项都将起作用。

```
findstr "test" file.txt >nul
if not errorlevel 1 (echo Found it!) 
```

或者

```
findstr "test" file.txt >nul
if %errorlevel%==0 (echo Found it!) 
```

或者我个人最喜欢的

```
findstr "test" file.txt >nul && (echo Found it!) 
```

# ios - iOS NSFetchedResultsController：按> = 2个属性对部分进行排序

> ID：14645778
> 
> 赞同：0
> 
> 时间：2013-02-01T11:55:52.680
> 
> 标签：ios, sorting, nsfetchedresultscontroller

我使用 NSFetchedResultsController 通过 Core Data 从数据库中获取数据。我有一个具有 2 个属性的实体，即 NSString 的 prop1 和 prop2。
我将如何不仅按属性之一对部分进行排序，而且按两个属性对部分进行排序？
现在它是：

```
Title1ForProp1/Title2ForProp2 (prop1==1 prop2==2)
Title1ForProp1/Title1ForProp2 (prop1==1 prop2==1)
Title2ForProp1/Title1ForProp2 (prop1==2 prop2==1) 
```

我需要：

```
Title1ForProp1/Title1ForProp2 (prop1==1 prop2==1)
Title1ForProp1/Title2ForProp2 (prop1==1 prop2==2)
Title2ForProp1/Title1ForProp2 (prop1==2 prop2==1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:16:14.267

当您为 NSFC 创建获取请求时，您会创建排序描述符并为请求提供一个数组。

您可以根据需要在数组中放置任意数量的排序描述符。

只需为要排序的每个字段创建一个排序描述符。

不过，我记得您必须将它们放入数组中的顺序。

好的，所以代码明智......

```
NSSortDescriptor *sd1 = [[NSSortDescriptor alloc] initWithKey:@"prop1" ascending:YES];
NSSortDescriptor *sd2 = [[NSSortDescriptor alloc] initWithKey:@"prop2" ascending:YES];

[fetchRequest setSortDescriptors:@[sd1, sd2]]; 
```

这就是你所要做的。

如果你给它一个 sectionNameKeyPath，NSFC 只会将它们分成几个部分。如果您不想要任何部分，则将 sectionNameKeyPath 设为 nil。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:22:16.610

Fogmeister 的排序描述符数组是合适的（先在 prop1 上排序，然后在 prop2 上排序），但如果您在您`sectionNameKeyPath`的部分中提供 prop1，则只会被 prop1 分解。在每个部分中，项目将按 prop1 和 prop2 排序。

如果这不是您想要的，并且您需要将结果另外分组为 prop1 和 prop2 的部分，您可能希望创建一个连接 prop1 和 prop2 的瞬态属性，并将该瞬态属性作为您的`sectionNameKeyPath`. 这不仅提供了部分的标题，还确定了结果如何分组到部分中。

查看这个问题，了解如何为部分名称创建瞬态属性： [NSFetchedResultsController with section created by the first letter of a string](https://stackoverflow.com/questions/1112521/nsfetchedresultscontroller-with-sections-created-by-first-letter-of-a-string)

# ios - 使用 openssl/x509.h 解析证书

> ID：14645779
> 
> 赞同：0
> 
> 时间：2013-02-01T11:55:57.317
> 
> 标签：ios, openssl, ssl-certificate

我正在使用#import 类来解析证书并获取到期日期和开始日期，我正在使用以下函数

```
static NSDate *CertificateGetExpiryDate(X509 *certificateX509)
{
    NSDate *expiryDate = nil;

    if (certificateX509 != NULL) {
        ASN1_TIME *certificateExpiryASN1 = X509_get_notAfter(certificateX509);
        if (certificateExpiryASN1 != NULL) {
            ASN1_GENERALIZEDTIME *certificateExpiryASN1Generalized = ASN1_TIME_to_generalizedtime(certificateExpiryASN1, NULL);
            if (certificateExpiryASN1Generalized != NULL) {
                unsigned char *certificateExpiryData = ASN1_STRING_data(certificateExpiryASN1Generalized);

                // ASN1 generalized times look like this: "20131114230046Z"
                //                                format:  YYYYMMDDHHMMSS
                //                               indices:  01234567890123
                //                                                   1111
                // There are other formats (e.g. specifying partial seconds or
                // time zones) but this is good enough for our purposes since
                // we only use the date and not the time.
                //
                // (Source: http://www.obj-sys.com/asn1tutorial/node14.html)

                NSString *expiryTimeStr = [NSString stringWithUTF8String:(char *)certificateExpiryData];
                NSDateComponents *expiryDateComponents = [[NSDateComponents alloc] init];

                expiryDateComponents.year   = [[expiryTimeStr substringWithRange:NSMakeRange(0, 4)] intValue];
                expiryDateComponents.month  = [[expiryTimeStr substringWithRange:NSMakeRange(4, 2)] intValue];
                expiryDateComponents.day    = [[expiryTimeStr substringWithRange:NSMakeRange(6, 2)] intValue];
                expiryDateComponents.hour   = [[expiryTimeStr substringWithRange:NSMakeRange(8, 2)] intValue];
                expiryDateComponents.minute = [[expiryTimeStr substringWithRange:NSMakeRange(10, 2)] intValue];
                expiryDateComponents.second = [[expiryTimeStr substringWithRange:NSMakeRange(12, 2)] intValue];

                NSCalendar *calendar = [NSCalendar currentCalendar];
                expiryDate = [calendar dateFromComponents:expiryDateComponents];

                [expiryDateComponents release];
            }
        }
    }

    return expiryDate;
} 
```

但我想解析证书的全部细节，如公用名、版本、私钥等。

任何人都可以告诉我我怎么能得到那个东西

X509_NAME *issuerX509Name = X509_get_issuer_name(certificateX509); X509_NAME *subjectX509Name = X509_get_subject_name(certificateX509);

使用上述两个函数，我得到了问题名称和主题，但我想将这个东西转换为 Nsstring 格式。

任何人都可以帮助我如何将 X509_NAme 转换为 Nsstring sing 以便我的下一个请求我必须将这些名称附加到我的请求中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:51:14.727

我不知道 NSstring，但是您可以通过以下方式从 X509_NAME * 获取 C 样式的字符串：

```
int const nid = OBJ_txt2nid("commonName");

if (nid != NID_undef)
{
    int result = X509_NAME_get_text_by_NID(issuerX509Name, nid, NULL, 0);

    if (result > 0)
    {
        *cn = malloc((size_t)result + 1);

        if (*cn != NULL)
        {
            result = X509_NAME_get_text_by_NID(issuerX509Name, nid, cn, result+1); 
```

# ruby - 在 StockChart (highchart) 中以编程方式显示柱形图的工具提示

> ID：14645780
> 
> 赞同：7
> 
> 时间：2013-02-01T11:55:57.863
> 
> 标签：ruby, tooltip, highcharts, highstock

我有一个**Highstock**图表（带有标记和阴影的线），并且想以编程方式显示一个 highstock 工具提示，例如，当我选择某个表（包含图表数据）上的一行时，我想显示相应的 highstock工具提示。

那可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T17:21:46.337

对于 StockChart [，此解决方案](https://stackoverflow.com/questions/11194527/highcharts-manually-trigger-hover-event-on-a-point)不起作用：

在[此示例](http://jsfiddle.net/xW2MW/)中，您必须替换它：

```
chart.tooltip.refresh(chart.series[0].data[i]); 
```

对此：

```
chart.tooltip.refresh([chart.series[0].points[i]]); 
```

该解决方案可[在此处](http://jsfiddle.net/JMarques/w5mEH/)获得。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T12:19:47.343

如果您想要在数据点附近的绘图上触发工具提示^，那么*您*可能可以使用[这个答案](https://stackoverflow.com/a/11318136/693538)，它建议做类似的事情`i`

```
chart.series[0].data[i].setState('hover'); 
```

`chart`你的结果在哪里`new Highcharts.Chart`？（从评论到答案的[jsfiddle ）。](http://jsfiddle.net/xW2MW/)

我想如果你想`<tr>`点击一下，那么你的 js 最终可能看起来像这样

```
var chart = new Highcharts.Chart({ <your options> });
$('#yourTableId tr').click(function(){
   var i = $(this).index(); // `this` points to <tr>, get its index
   chart.series[0].data[i].setState('hover');
}); 
```

# c# - 影响现有 RadioButtonList 设置默认值

> ID：14645783
> 
> 赞同：0
> 
> 时间：2013-02-01T11:56:07.030
> 
> 标签：c#, javascript, html, radio-button, radiobuttonlist

我在页面上有一个现有`RadioButtonList`的，需要将第二个按钮设置为默认而不是第一个。

我可能需要`javascript`在页面上执行此操作，因为我无法编辑原始控件。

```
<list:RadioButtonList runat="server" Class="class" Text="text"
AlternativeText="alternative text"   /> 
```

知道如何检测控件并设置其默认值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T13:50:28.817

如果您使用 ASP.NET，您可以设置以下内容：

```
<asp:RadioButtonList ID="RadioButtonList1" runat="server">
  <asp:ListItem Selected="True" ></asp:ListItem>
  <asp:ListItem></asp:ListItem>
  <asp:ListItem></asp:ListItem>
  <asp:ListItem></asp:ListItem>
  <asp:ListItem></asp:ListItem>
</asp:RadioButtonList> 
```

我添加了属性 Selected="True"，因此您始终选择默认值。

您也可以在代码中执行此操作：

```
if (RadioButtonList1.SelectedIndex == -1) //-1 is the indication of none selected
{
    RadioButtonList1.SelectedIndex = 2; //select index 2 (can also be value or text)
} 
```

# objective-c - 从目标 c 和隐蔽数组中的 p12 文件读取

> ID：14645785
> 
> 赞同：1
> 
> 时间：2013-02-01T11:56:14.800
> 
> 标签：objective-c, security, ios6

我有以下代码可以从 .p12 证书中读取，并且我想将证书数据交给身份验证挑战：

```
- (SecIdentityRef)getClientCertificate {
NSString *thePath = [[NSBundle mainBundle] pathForResource:@"fest" ofType:@"p12"];
if(!thePath)
    return NULL;
NSData *PKCS12Data = [[NSData alloc] initWithContentsOfFile:thePath] ;
CFDataRef inPKCS12Data = (CFDataRef)CFBridgingRetain(PKCS12Data);
CFStringRef password = CFSTR("fest");
const void *keys[] = { kSecImportExportPassphrase };
const void *values[] = { password };
CFDictionaryRef optionsDictionary = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);
CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
OSStatus ret = SecPKCS12Import(inPKCS12Data, optionsDictionary, &items);
if (ret != errSecSuccess)
{
    // TODO: handle error.
    NSLog(@"-> SecPKCS12Import error (%ld)", ret);
}
CFRelease(optionsDictionary);

CFDictionaryRef identityDict = CFArrayGetValueAtIndex(items, 0);
SecIdentityRef identityApp = nil;
if(!identityDict)
    return nil;
identityApp = (SecIdentityRef)CFDictionaryGetValue(identityDict, kSecImportItemIdentity);

SecIdentityRef      identity;
SecCertificateRef   cert;
OSStatus            err;
CFStringRef         certName;

identity = identityApp;
assert( (identity != NULL) && (CFGetTypeID(identity) == SecIdentityGetTypeID()) );

cert = NULL;
err = SecIdentityCopyCertificate(identity, &cert);
assert(err == noErr);
assert(cert != NULL);

certName = SecCertificateCopySubjectSummary(cert);
assert(certName != NULL);

NSLog(@"%@" , (id) CFBridgingRelease(certName));
//NSDictionary *userInfo = [NSDictionary dictionaryWithObjectsAndKeys:(id)CFBridgingRelease(certName),@"USERID",nil];

[[NSNotificationCenter defaultCenter] postNotificationName:@"UserInfoReceived" object:nil];

//CFRelease(cert);
//CFRelease(certName);
return identityApp;
_identities = [[NSMutableArray alloc] initWithArray:(__bridge NSArray *)(items)];
_certs = [[NSMutableArray alloc] initWithArray:(__bridge NSArray *)(cert)]; 
```

}

最后，我想将项目 CFArrayRef 分配给身份数组。但是是行不通的。有人有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:03:04.277

CFArrayRef 是免费桥接到 NSArray *，因此您可以将其转换为这样，然后创建一个可变副本。尝试这个：

_identities = [(NSArray *)items mutableCopy];

# git - 如果执行此操作，为什么会发生冲突？

> ID：14645788
> 
> 赞同：0
> 
> 时间：2013-02-01T11:56:25.687
> 
> 标签：git

鉴于此 Git 树：

![在此处输入图像描述](../Images/377018168aaa8cde9eb06d19f6b09bc9.png)

***（相同的描述，相同的提交）***

如果我执行此操作，为什么 Git 会产生冲突？

```
git checkout bugs
git rebase es-dev 
```

我相信如果相同的提交存在于两个分支中，当 Git 将一个分支重新定位到另一个分支时，只会忽略正在重新定位的分支中的提交。但似乎情况并非如此，因为`es-dev`包含与我完全相同的提交`bugs`并且我遇到了冲突。在这种情况下，我可以做一个：

```
git checkout es-dev
git branch -D bugs
git checkout -b bugs 
```

但在更复杂的情况下，这可能是一个问题......（即，如果我有在or`bugs`中不存在的提交）`master``es-dev`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:10:23.290

分支`bugs`包含与分支不同的提交`es-dev`。否则，图形看起来会有所不同。
提交可能包含相同的更改，但提交哈希不同，因此它们是不同的提交。

在您的场景中，您可以简单地重置`bugs`为`es-dev`：

```
git branch -f bug es-dev 
```

# python - NumPy 实时读取文件，过滤线

> ID：14645789
> 
> 赞同：9
> 
> 时间：2013-02-01T11:56:27.417
> 
> 标签：python, input, numpy, large-files, bigdata

我在 CSV 文件中写入了大量数字，并且只需要加载该数组的一部分。从概念上讲，我想调用`np.genfromtxt()`然后对结果数组进行行切片，但是

1.  文件太大，可能无法放入 RAM
2.  相关行数可能很少，因此无需解析每一行。

MATLAB 具有`textscan()`可以获取文件描述符并仅读取文件块的函数。NumPy 中有类似的东西吗？

现在，我定义了以下函数，它只读取满足给定条件的行：

```
def genfromtxt_cond(fname, cond=(lambda str: True)):
  res = []
  with open(fname) as file:
    for line in file:
      if cond(line):
        res.append([float(s) for s in line.split()])

  return np.array(res, dtype=np.float64) 
```

这个解决方案有几个问题：

*   不通用：仅支持浮点类型，同时`genfromtxt`检测类型，可能因列而异；还缺少值、转换器、跳过等；
*   效率不高：当条件困难时，每行可能会被解析两次，使用的数据结构和读取缓冲也可能不是最优的；
*   需要写代码。

是否有实现过滤的标准函数，或 MATLAB 的一些对应物`textscan`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-09T20:29:38.577

我可以想到两种方法来提供您要求的一些功能：

1.  **要以块 / 或 n 行 / 等的方式读取文件：**
    您可以将 a 传递`generator`给[numpy.genfromtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html#numpy.genfromtxt)以及[numpy.loadtxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.loadtxt.html#numpy.loadtxt)。通过这种方式，您可以高效地从文本文件中加载大型数据集，同时保留这两个函数的**所有**便捷解析功能。

2.  **要仅从与可以表示为正则表达式的标准匹配的行中读取数据：**
    您可以使用[numpy.fromregex](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromregex.html#numpy.fromregex)并使用 a`regular expression`来**精确**定义应加载输入文件中给定行中的哪些标记。与模式不匹配的行将被忽略。

为了说明这两种方法，我将使用我的研究背景中的一个例子。
我经常需要加载具有以下结构的文件：

```
6
 generated by VMD
  CM         5.420501        3.880814        6.988216
  HM1        5.645992        2.839786        7.044024
  HM2        5.707437        4.336298        7.926170
  HM3        4.279596        4.059821        7.029471
  OD1        3.587806        6.069084        8.018103
  OD2        4.504519        4.977242        9.709150
6
 generated by VMD
  CM         5.421396        3.878586        6.989128
  HM1        5.639769        2.841884        7.045364
  HM2        5.707584        4.343513        7.928119
  HM3        4.277448        4.057222        7.022429
  OD1        3.588119        6.069086        8.017814 
```

这些文件可能很大（GB），我只对数字数据感兴趣。所有数据块都具有相同的大小——`6`在这个例子中——它们总是被两行分隔。所以`stride`块的 是`8`。

## 使用第一种方法：

首先，我将定义一个过滤掉不需要的行的生成器：

```
def filter_lines(f, stride):
    for i, line in enumerate(f):
        if i%stride and (i-1)%stride:
            yield line 
```

然后我打开文件，创建一个`filter_lines`-generator（这里我需要知道`stride`），然后将该生成器传递给`genfromtxt`：

```
with open(fname) as f:
    data = np.genfromtxt(filter_lines(f, 8),
                         dtype='f',
                         usecols=(1, 2, 3)) 
```

这就像轻而易举。请注意，我可以用来`usecols`删除数据的第一列。同样，您可以使用所有其他功能`genfromtxt`——检测类型、从列到列的不同类型、缺失值、转换器等。

在此示例`data.shape`中`(204000, 3)`，原始文件由`272000`行组成。

在这里，`generator`它用于过滤均匀跨度的线条，但同样可以想象它根据（简单）标准过滤掉不均匀的线条块。

## 使用第二种方法：

这是`regexp`我要使用的：

```
regexp = r'\s+\w+' + r'\s+([-.0-9]+)' * 3 + r'\s*\n' 
```

组——即内部`()`——定义要从给定行中提取的标记。接下来，`fromregex`完成这项工作并忽略与模式不匹配的行：

```
data = np.fromregex(fname, regexp, dtype='f') 
```

结果与第一种方法完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:49:21.673

如果您传递类型列表（格式条件），使用 try 块并使用 yield 来使用 genfromtxt 作为生成器，我们应该能够复制`textscan()`.

```
def genfromtext(fname, formatTypes):
    with open(fname, 'r') as file:
        for line in file:
            try:
                line = line.split(',')  # Do you care about line anymore?
                r = []
                for type, cell in zip(formatTypes, line):
                    r.append(type(cell))
            except:
                pass  # Fail silently on this line since we hit an error
            yield r 
```

编辑：我忘记了 except 块。它现在运行正常，您可以像这样使用 genfromtext 作为生成器（使用我坐在身边的随机 CSV 日志）：

```
>>> a = genfromtext('log.txt', [str, str, str, int])
>>> a.next()
['10.10.9.45', ' 2013/01/17 16:29:26', '00:00:36', 0]
>>> a.next()
['10.10.9.45', ' 2013/01/17 16:22:20', '00:08:14', 0]
>>> a.next()
['10.10.9.45', ' 2013/01/17 16:31:05', '00:00:11', 3] 
```

我可能应该注意到，我正在使用`zip`将逗号分割线和 formatSpec 压缩在一起，它将对两个列表进行元组化（当其中一个列表用完项目时停止），因此我们可以一起迭代它们，避免依赖于循环`len(line)`或类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T14:52:29.623

试图向OP展示评论。

```
def fread(name, cond):
    with open(name) as file:
        for line in file:
            if cond(line):
                yield line.split()

def a_genfromtxt_cond(fname, cond=(lambda str: True)):
    """Seems to work without need to convert to float."""
    return np.array(list(fread(fname, cond)), dtype=np.float64)

def b_genfromtxt_cond(fname, cond=(lambda str: True)):
    r = [[int(float(i)) for i in l] for l in fread(fname, cond)]
    return np.array(r, dtype=np.integer)

a = a_genfromtxt_cond("tar.data")
print a
aa = b_genfromtxt_cond("tar.data")
print aa 
```

输出

```
[[ 1\.   2.3  4.5]
 [ 4.7  9.2  6.7]
 [ 4.7  1.8  4.3]]
[[1 2 4]
 [4 9 6]
 [4 1 4]] 
```

# c# - 在 Visual Studio 中“全部中断”后，有没有办法留在当前文档上？

> ID：14645791
> 
> 赞同：17
> 
> 时间：2013-02-01T11:56:37.660
> 
> 标签：c#, visual-studio

当我在调试时“全部中断”时，Visual Studio 在堆栈顶部打开源代码；我想将光标保持在我当前正在处理的文档上，而不打开任何其他文档或窗口（例如：未加载符号）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-06T10:24:19.800

有一种方法可以保留在当前文档上，但这需要在“*调试*”工具栏中创建一个 Visual Studio 加载项和一个新的 UI 命令。这个答案的功劳实际上也应该 [归于 openshac](https://stackoverflow.com/users/283787/openshac)，他发布了一个类似的 SO[问题](https://stackoverflow.com/questions/2958087/how-to-break-all-without-changing-window-focus)，并通过使用宏在他的 OP 中给出了解决方法。

实现相当简单（我花了几分钟才让它工作）。首先，在加载项项目中，修改文件`Exec`中的方法，`Connect.cs`如下所示：

```
public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
{
    handled = false;
    if(executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
    {
        if(commandName == "BreakInCurrentDocument.Connect.BreakInCurrentDocument")
        {

            // here's where the magic happens
            // ******************************
            var activeWindow = _applicationObject.ActiveWindow;
            _applicationObject.Debugger.Break();
            if (_applicationObject.ActiveWindow != activeWindow)
            {
                _applicationObject.ActiveWindow.Close(vsSaveChanges.vsSaveChangesNo);
            }
            // ******************************

            handled = true;
            return;
        }
    }
} 
```

创建并注册加载项后，只需：

1.  单击Visual Studio 菜单上的*工具*
2.  *定制*
3.  *命令*
4.  选择“工具栏”单选按钮
5.  选择“调试”
6.  *添加命令...*
7.  从“插件”类别中，选择您的自定义插件。

就是这样。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-07T01:26:39.780

[可从http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8](http://visualstudiogallery.msdn.microsoft.com/a83505c6-77b3-44a6-b53b-73d77cba84c8)获得的最新版本的 VSCommands 扩展（免费版）正是您想要的。它在调试工具栏和调试菜单中添加了一个 Break In Current Document 按钮：

[http://vscommands.squaredinfinity.com/Media/VSCommands/BlogPost//blog/breakincurrentdocument.png](http://vscommands.squaredinfinity.com/Media/VSCommands/BlogPost//blog/breakincurrentdocument.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T09:06:10.843

这是一个功能..当您“全部中断”时，假定您的进程已挂起。您可能对这种情况感兴趣的第一件事是 - WHERE。因此，它会将您直接引导到正在执行的“当前”位置。IIRC，这是所有低级调试器的事实标准。如果您不希望“未加载符号”，只需标记“显示反汇编”，它将永远不会再次弹出:)（当然，相反，您会看到确切的停止点。是的，这也是一个我自己多次用于调试未知库代码的功能）

另一方面，如果您**知道**要在哪里停止代码，请将断点放在那里。

另一方面（好像我们有三个），如果你想真正*停止*应用程序 - 停止它，不要中断，只是停止。

我觉得您的实际问题在于您以错误的方式使用其中一个功能，因此另一个功能会困扰您。请告诉我，您将“全部中断”用于什么以及它如何/为什么与您当前的文本编辑发生冲突。为什么你不能在这里停下来或休息一下呢？还是“分离”？

无论如何，我不得不承认，作为一个特性，应该有一些关闭它的选项，只是为了 IDE 的可配置性。

* * *

编辑

啊。。你是对的。我完全忘记了光荣的编辑和继续。我不是在开玩笑/取笑，E&C 是一个很棒的功能，我希望所有其他平台都拥有。我已经忘记了，因为...我广泛使用 lambdas、泛型、foreachs 等功能，这些功能有效地阻止了编辑和继续。

无论如何，重点是，因为编辑并继续是您想要使用的黄金功能 - 应用程序必须处于“中断”模式。但是，无论如何如何“中断”/“暂停”等，IDE 将假定 PAUSE 是您的目标，而不是编辑，因此它会告诉您您在哪里暂停了应用程序。

MSVS 中有一些选项，例如“仅显示我的代码”，可能会对您有所帮助，但不会解决问题：调试期间的编辑并继续是为“小型本地编辑”而设计的。喜欢，`if(x>0)throw new uncaught()`而不是`if(x<0)throw new uncaught()`。您的应用程序在断言或断点处停止并即将崩溃，首次更改异常处理程序已启动，这是您的机会！您展开崩溃处理程序，更正代码，然后运行。作为即时补丁的一种方式，您**停止**的所有事情都发生**在同一方法中。**

 **这是为什么你不能在 E&C 会话期间添加方法、类、修改泛型等的主要问题之一：即。编辑您当前的 lambda 或当前 foreach 可能没问题，但 IDE 将无法重新定位流程并正确执行新代码。这有点类似于您有时会看到“陈旧代码”警告的原因，但是对于这些代码结构，分析起来更加困难，因此无法实现。并且可能永远不会在 MS 的 TO-DO 列表中名列前茅：/

当前 .Net/C# 的繁荣不是“实时开发”而是“notaliveyet 开发”，在模块化和单元测试的大力支持下，您可以努力离线测试应用程序的大部分功能。但是这是一种范式转变，对于小型项目或本地桌面开发来说，有时这只是一种矫枉过正。**

# php - 如何修复 jQuery AJAX 的“不支持的伪”错误？

> ID：14645796
> 
> 赞同：0
> 
> 时间：2013-02-01T11:57:10.470
> 
> 标签：php, ajax, jquery

我正在尝试使用 jQuery Ajax 从 php 页面获取响应。一切正常，直到我尝试分解一个数组并将它的元素组合起来得到一个 time `09:00`。

控制台说，`Uncaught Error: Syntax error, unrecognized expression: unsupported pseudo: 00`没有显示。

我的代码是，

```
$starttimeArr= explode(",",$comma_separated_starttime);// explodes 09,00,00
$endtimeArr= explode(",",$comma_separated_endtime);// explodes 17,00,00
echo $starttime= $starttimeArr[0].":".$starttimeArr[1];// combine to get 09:00\. The line pop up the error
$endtime= $endtimeArr[0].":".$endtimeArr[1];// combines to get 17:00 
```

我是如何克服这个错误的？任何帮助将不胜感激。

我的 Ajax 代码是

```
jQuery("#_dob").change(function() {
                    jQuery.ajax({
                        url: "<?php echo $this->getUrl('deliverybydatepro/index/index') ?>",
                        data: "checkIn="+jQuery(this).val()+"&type=calendar",
                        type: "GET",
                        dataType: "html",
                        success: function(data) {
                           var $response=jQuery(data);
                           jQuery("#div1").html(data);
                        }
                    });
    }); 
```

响应页面有一个带有选项的下拉菜单`"09:00"`。`jQuery-1.8.0`触发它的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T08:55:16.300

好的。用 JS 代码看过编辑过的问题后，问题就很清楚了：

```
var $response=jQuery(data); 
```

此行是错误的原因。

该`data`变量是来自 AJAX 请求的响应字符串。正如预期的那样，它包含字符串“09:00”。

这意味着您的代码相当于调用`jQuery('09:00')`.

jQuery 将尝试将其解释为 CSS 选择器。它将看到`09`并尝试查找具有该名称的元素。它当然不会找到一个，但它不会抱怨。然而，它会看到`:00`并假设它是一个伪选择器（如`:before`or`:first-child`等​​）。当然`:00`不是一个有效的伪选择器，jQuery 会抱怨这一点。所以这就是错误的来源。

那么该怎么办呢？答案很简单，真的。

您正在使用这一行来设置一个名为 的变量`$response`，但是您永远不会使用该变量；您将继续使用该`data`变量。所以实际上抛出错误的整个行是完全没有必要的。如果您的 PHP 正在输出 JSON 或 XML 数据，您可能需要这样的行，但如果它是纯字符串则不需要。

所以解决方案是完全删除该行。

希望有帮助。

顺便说一句，为了下次帮助您，使用浏览器中的调试器很容易找出导致问题的 JS 代码行。只需打开 Dev Tools 或 Firebug，然后运行代码，它就会停止并准确显示错误所在的位置。对调试器进行一些进一步的工作，查看变量，很可能会清楚问题出在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:22:51.680

php-answer 是正确的，它将文本 '09:00' 发送到 javascript ，但 jQuery 抛出错误：“Uncaught Error: Syntax error, unrecognized expression: unsupported pseudo: 00”，也许 ajax-answer 被用作行列式元素的，也许是其他的。显示您的 js 代码，因为它会引发错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:43:00.957

jQuery(data) 被视为具有伪选择器 '09:00' 的元素的定义，并说 :00 - 不支持的伪，因为存在伪选择器：first-child、hover、active 等。在这个字符串：

```
var $response=jQuery(data);
jQuery("#div1").html(data);
the string "var $response=jQuery(data); 
```

不需要，没有这个字符串脚本就可以工作。

# android - 收到短信后更新小部件

> ID：14645803
> 
> 赞同：0
> 
> 时间：2013-02-01T11:57:33.580
> 
> 标签：android, broadcastreceiver

我在这个操作上遇到了一些麻烦。我有一个更新一些东西的小部件。当收到短信时，我想在收到后更新它。我写了一个 BrodCastReceiver 类，但它在到达之前更新。

```
 public class SmsReceiver extends BroadcastReceiver
 {
@Override
public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;
    if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            

        ComponentName name = new ComponentName(context, Randomnuberwidget.class);
        int [] ids = AppWidgetManager.getInstance(context).getAppWidgetIds(name);

        Intent update = new Intent();
        update.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, ids);
        update.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
        context.sendBroadcast(update);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T12:10:00.783

我认为您需要添加一个 if 语句来检查意图的动作……据我所知，广播接收器能够接收任何隐式广播意图，因此只要有这样的广播意图，您的代码就会触发你现在已经设置好了...

尝试添加

```
if (bundle.getAction().equals("android.provider.Telephony.SMS_RECEIVED"){
//update widget
} 
```

授予我不确定if语句，但它应该是一个小的变化......

# ajax - 如何在响应 ajax 调用而返回的对象上应用属性编辑器？

> ID：14645805
> 
> 赞同：0
> 
> 时间：2013-02-01T11:57:40.490
> 
> 标签：ajax, spring, spring-mvc

我将控制器的属性编辑器指定为：

```
@InitBinder
    protected void initBinder(WebDataBinder binder) {
        SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
        CustomDateEditor editor = new CustomDateEditor(dateFormat, true);
        binder.registerCustomEditor(Date.class, editor);
    } 
```

在我在 AJAX 调用中调用以下方法之前，它工作正常。

```
@RequestMapping(value = "searchCriteria", method = RequestMethod.GET)
    public @ResponseBody Set<SearchCriteria> loadSearchCriterias(){
        // call service method to load criterias
        Set<SearchCriteria> criterias = new HashSet<SearchCriteria>();
        SearchCriteria sampleCriteria = new SearchCriteria();
        sampleCriteria.setStartDate(new Date());
                criterias.add(sampleCriteria);
        return criterias;
         } 
```

在这种情况下，`SearchCriteria`自定义属性编辑器没有将截止日期转换为正确的格式。即使通过 AJAX 调用返回对象，如何使属性编辑器被应用？

```
public class SearchCriteria{
    Date startDate;
    String name;
    // getter setters
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:30:55.073

我认为不可能为返回的值应用属性编辑器。Spring 有一个转换器机制。

如果您返回`json`并且您的类路径中有[Jackson](http://jackson.codehaus.org/)，那么 spring 将使用它将对象转换为响应字符串。
如果您返回`xml`并且您的类路径中有[JAXB](http://jaxb.java.net/)，那么 spring 将使用它将对象转换为响应字符串。

如果您使用`Jackson`带有 spring 的库，那么您需要告诉杰克逊您想如何使用[serializer 序列](http://wiki.fasterxml.com/JacksonHowToCustomSerializers)化该字段。

前任：

```
public class DateTimeSerializer extends JsonSerializer<Date> {

    @Override
    public void serialize(Date value, JsonGenerator jgen,
            SerializerProvider provider) throws IOException,
            JsonProcessingException {
        if (value != null) {
            SimpleDateFormat f = new SimpleDateFormat(format);
            jgen.writeString(f.format(value));
        }
    }

} 
```

然后注释你的领域

```
@JsonSerialize(using = DateTimeSerializer.class)
private Date createdDate; 
```

如果你想在全局范围内使用它，你可以尝试[这里](https://stackoverflow.com/questions/14363555/spring-3-2-and-jackson-2-add-custom-object-mapper)解释的机制。

# javascript - 使用jQuery获取元素的所有属性

> ID：14645806
> 
> 赞同：135
> 
> 时间：2013-02-01T11:57:43.417
> 
> 标签：javascript, jquery, attributes

我试图通过一个元素并获取该元素的所有属性以输出它们，例如一个标签可能有 3 个或更多属性，我不知道，我需要获取这些属性的名称和值。我在想一些事情：

```
$(this).attr().each(function(index, element) {
    var name = $(this).name;
    var value = $(this).value;
    //Do something with name and value...
}); 
```

谁能告诉我这是否可能，如果可以，正确的语法是什么？

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2013-02-01T11:58:58.463

该`attributes`属性包含所有这些：

```
$(this).each(function() {
  $.each(this.attributes, function() {
    // this.attributes is not a plain object, but an array
    // of attribute nodes, which contain both the name and value
    if(this.specified) {
      console.log(this.name, this.value);
    }
  });
}); 
```

* * *

您还可以做的是扩展`.attr`，以便您可以像调用它一样`.attr()`获取所有属性的普通对象：

```
(function(old) {
  $.fn.attr = function() {
    if(arguments.length === 0) {
      if(this.length === 0) {
        return null;
      }

      var obj = {};
      $.each(this[0].attributes, function() {
        if(this.specified) {
          obj[this.name] = this.value;
        }
      });
      return obj;
    }

    return old.apply(this, arguments);
  };
})($.fn.attr); 
```

用法：

```
var $div = $("<div data-a='1' id='b'>");
$div.attr();  // { "data-a": "1", "id": "b" } 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-07-27T21:54:41.523

以下是可以完成的许多方法的概述，供我自己参考以及您的参考:) 这些函数返回属性名称及其值的哈希值。

**香草JS**：

```
function getAttributes ( node ) {
    var i,
        attributeNodes = node.attributes,
        length = attributeNodes.length,
        attrs = {};

    for ( i = 0; i < length; i++ ) attrs[attributeNodes[i].name] = attributeNodes[i].value;
    return attrs;
} 
```

**带有 Array.reduce 的香草 JS**

适用于支持 ES 5.1 (2011) 的浏览器。需要 IE9+，在 IE8 中不起作用。

```
function getAttributes ( node ) {
    var attributeNodeArray = Array.prototype.slice.call( node.attributes );

    return attributeNodeArray.reduce( function ( attrs, attribute ) {
        attrs[attribute.name] = attribute.value;
        return attrs;
    }, {} );
} 
```

**jQuery**

这个函数需要一个 jQuery 对象，而不是 DOM 元素。

```
function getAttributes ( $node ) {
    var attrs = {};
    $.each( $node[0].attributes, function ( index, attribute ) {
        attrs[attribute.name] = attribute.value;
    } );

    return attrs;
} 
```

**下划线**

也适用于 lodash。

```
function getAttributes ( node ) {
    return _.reduce( node.attributes, function ( attrs, attribute ) {
        attrs[attribute.name] = attribute.value;
        return attrs;
    }, {} );
} 
```

**罗达什**

比 Underscore 版本更简洁，但仅适用于 lodash，不适用于 Underscore。需要 IE9+，在 IE8 中有问题。向@AlJey致敬[。](https://stackoverflow.com/a/25946982/508355)

```
function getAttributes ( node ) {
    return _.transform( node.attributes, function ( attrs, attribute ) {
        attrs[attribute.name] = attribute.value;
    }, {} );
} 
```

**测试页面**

在 JS Bin，有一个涵盖所有这些功能的[实时测试页面。](http://jsbin.com/vefiku/7)测试包括布尔属性 ( `hidden`) 和枚举属性 ( `contenteditable=""`)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-24T14:54:26.400

一个调试脚本（基于 hashchange 上面答案的 jquery 解决方案）

```
function getAttributes ( $node ) {
      $.each( $node[0].attributes, function ( index, attribute ) {
      console.log(attribute.name+':'+attribute.value);
   } );
}

getAttributes($(this));  // find out what attributes are available 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-20T08:48:19.763

使用 LoDash 你可以简单地做到这一点：

```
_.transform(this.attributes, function (result, item) {
  item.specified && (result[item.name] = item.value);
}, {}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-29T10:46:05.937

使用 javascript 函数可以更轻松地获取 NamedArrayFormat 中元素的所有属性。

```
$("#myTestDiv").click(function(){
  var attrs = document.getElementById("myTestDiv").attributes;
  $.each(attrs,function(i,elem){
    $("#attrs").html(    $("#attrs").html()+"<br><b>"+elem.name+"</b>:<i>"+elem.value+"</i>");
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<div id="myTestDiv" ekind="div" etype="text" name="stack">
click This
</div>
<div id="attrs">Attributes are <div>
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-10T09:47:49.950

**Underscore.js 的简单解决方案**

例如：获取所有链接文本谁的父母有课`someClass`

```
_.pluck($('.someClass').find('a'), 'text'); 
```

[工作小提琴](http://jsfiddle.net/htfL3d4g/1/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-21T09:50:43.157

这是给你的单线。

## jQuery 用户：

替换`$jQueryObject`为您的 jQuery 对象。即`$('div')`。

```
Object.values($jQueryObject.get(0).attributes).map(attr => console.log(`${attr.name + ' : ' + attr.value}`)); 
```

## 原版 Javascript 用户：

替换`$domElement`为您的 HTML DOM 选择器。即`document.getElementById('demo')`。

```
Object.values($domElement.attributes).map(attr => console.log(`${attr.name + ' : ' + attr.value}`)); 
```

干杯！！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-28T15:41:44.777

我的建议：

```
$.fn.attrs = function (fnc) {
    var obj = {};
    $.each(this[0].attributes, function() {
        if(this.name == 'value') return; // Avoid someone (optional)
        if(this.specified) obj[this.name] = this.value;
    });
    return obj;
} 
```

var a = $(el).attrs();

# php - Symfony2，querybuilder的Doctrine请求

> ID：14645814
> 
> 赞同：0
> 
> 时间：2013-02-01T11:57:56.060
> 
> 标签：php, sql, symfony, doctrine, query-builder

我有一个按（经典）`article`链接到一个表的基本表，我想提出一个原则请求，按类别仅检索 5 篇文章（对于所有类别）`category``id`

此请求将所有类别的文章归还给我，我只想要 5 个

```
public function getArticlesAndCategs(){
    $qb = $this->createQueryBuilder('c')
            ->orderBy('c.id','DESC')
                ->leftJoin('c.articles', 'a')
                ->addSelect('a')
                ->addOrderBy('a.id','DESC')
            ->getQuery();
    return $qb->execute();                
} 
```

你能帮我吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:09:01.530

不幸的是，这不是一件容易的事。至少我还没有找到令人满意的解决方案（对我来说很满足；））。

你可以做三件事：

1.  遍历类别并为每个类别检索 5 个帖子。这当然会导致许多数据库请求与您拥有的类别一样多。

2.  返回所有包含已加入帖子的类别并在 php.ini 中进行迭代。缺点 - 你会返回所有的帖子，所以如果你有很多，这可能意味着使用了大量的内存。

3.  如果您不必坚持 Doctrine，您可以从这里尝试解决方案：[mySQL Returning the top 5 of each category](https://stackoverflow.com/questions/4729406/mysql-returning-the-top-5-of-each-category)

# css - 带有cufon的自动换行

> ID：14645816
> 
> 赞同：1
> 
> 时间：2013-02-01T11:58:04.750
> 
> 标签：css, fonts, cufon

这是CSS：

```
h3 {
  font-size: 18px;
  font-weight: normal;
  line-height: normal;
  margin-bottom: 9px;
  word-wrap: break-word;
} 
```

& 然后将 cufon 应用为：

```
Cufon.replace('h3'); 
```

但文本仍以单行呈现。如果我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T14:00:02.723

Cufon 拥有一个`separate`可以设置为的属性`'words', 'none' or 'characters'`。

此外，我在使用 Cufon 时遇到的许多问题的一个共同点是没有指定`STRICT DOCTYPE`文档标题。

您可以在以下位置阅读更多信息：[https ://github.com/sorccu/cufon/wiki/API](https://github.com/sorccu/cufon/wiki/API)

# c++ - 没有扩展名的c++文件

> ID：14645818
> 
> 赞同：0
> 
> 时间：2013-02-01T11:58:23.383
> 
> 标签：c++, umfpack

我有一个引发编译错误的项目，我有一个名为“UmfPackSupport”的文件，该文件包含在另一个名为“PoissonBlender.hpp”的文件中，其中包含以下行：

```
#include "unsupported/Eigen/UmfPackSupport" 
```

然后我在行中有一个错误：

```
solve<double, UmfPackSupport>(A, b, u); 
```

说的是

```
'UmfPackSupport' was not declared in this scope 
```

那个没有扩展名的文件是什么？？

# php - PHP 显示 01 而不是 1

> ID：14645823
> 
> 赞同：9
> 
> 时间：2013-02-01T11:58:41.383
> 
> 标签：php

> **可能重复：**
> [在 PHP 中用前导零格式化数字](https://stackoverflow.com/questions/1699958/formatting-a-number-with-leading-zeros-in-php)

我正在用 php 填充一个选择框。

这是代码：

```
$select_month_control = '<select name="month" id="month">';
for($x = 1; $x <= 12; $x++) {
$select_month_control.= '<option value="'.$x.'"'.($x != $month ? '' : ' selected="selected"').'>'.date('F',mktime(0,0,0,$x,1,$year)).'</option>';
}
$select_month_control.= '</select>'; 
```

这是创建这个：

```
<select id="month" name="month">
<option value="1">January</option>
<option value="2">February</option>
<option value="3">March</option>
<option value="4">April</option>
<option value="5">May</option>
<option value="6">June</option>
<option value="7">July</option>
<option value="8">August</option>
<option selected="selected" value="9">September</option>
<option value="10">October</option>
<option value="11">November</option>
<option value="12">December</option>
</select> 
```

问题是我需要 1、2、3 等为 01、02、03 等......就像这样：

```
<option value="01">January</option> 
```

代替：

```
<option value="1">January</option> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-01T12:00:33.330

您可以使用`sprintf("%02d", $number)`格式化字符串。

编辑：有关格式字符串的更多信息，请参见[http://www.php.net/manual/en/function.sprintf.php](http://www.php.net/manual/en/function.sprintf.php)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-01T12:01:53.443

用户`str_pad`参考： http: [//php.net/manual/en/function.str-pad.php](http://php.net/manual/en/function.str-pad.php)

```
$select_month_control = '<select name="month" id="month">';
for($x = 1; $x <= 12; $x++) {
$select_month_control.= '<option value="'.str_pad($x, 2, "0", STR_PAD_LEFT).'"'.($x != $month ? '' : ' selected="selected"').'>'.date('F',mktime(0,0,0,$x,1,$year)).'</option>';
}
$select_month_control.= '</select>'; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-01T12:03:06.993

您可能想尝试[`str_pad()`](http://php.net/manual/en/function.str-pad.php)在循环中使用该函数：

> **`str_pad`**— 用另一个字符串将一个字符串填充到一定长度

```
for($x = 1; $x <= 12; $x++) {
  $value = str_pad($x,2,"0",STR_PAD_LEFT);
  $select_month_control.= '<option value="'.$value.'">'.$value.'</option>';
} 
```

# php - php通过shell在后台运行

> ID：14645829
> 
> 赞同：0
> 
> 时间：2013-02-01T11:59:06.610
> 
> 标签：php, background, cron, execution

创建了一个确实每六个小时执行一次的 cron，它确实创建了一个 shell 脚本，每次执行时对 store.php 有不同的输入。* */6 * * * /usr/bin/php /var/www/execute.php > /dev/null &

execute.php 将使用以下命令创建 test.sh 文件并执行 test.sh

/usr/bin/php /var/www/store.php 'x' > /dev/null & /usr/bin/php /var/www/store.php 'y' > /dev/null &

它成功执行并且逻辑完成。但是当我通过 shell 上的 top 命令检查时

$顶部

我看到所有的 php 进程都在持续运行，即使在执行完成之后也是如此。我希望它只运行一次 php 代码，但它仍在后台运行......我应该如何停止它以及如何只运行一次......甚至在 php 文件中添加了退出（最后是 store.php）。 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:16:55.203

如果要结束脚本，可以[`return`](http://php.net/manual/en/function.return.php)在文件末尾使用语句。或者您可以简单地调用[`exit()`](http://php.net/manual/en/function.exit.php). 但是，脚本一旦到达最后一行，就应该结束它自己。建议脚本永远不会到达文件末尾......我建议在文件的各个部分放入一些 echo 语句，并确保它实际上到达文件末尾。

# php - MySQL 拒绝基于撇号字符的查询语法

> ID：14645830
> 
> 赞同：0
> 
> 时间：2013-02-01T11:59:07.043
> 
> 标签：php, mysql

我正在使用 MeekroDB ( [http://www.meekro.com/quickstart.php](http://www.meekro.com/quickstart.php) ) 在 PHP 中构造简单的 MySQL 查询。由于语法不正确，即使是简单的查询也会被拒绝。通过在 phpMyAdmin 中手动编写查询，我注意到如果使用以下语法，查询将被拒绝：

```
SELECT * FROM 'table name' 
```

但如果他们使用以下语法则被接受：

```
SELECT * FROM `table name` 
```

唯一的区别是撇号略有不同。MeekroDB 似乎默认生成第一个语法，这导致查询被拒绝。有没有人遇到过这个问题？有什么解决办法吗？我正在使用 WAMP 服务器和 MySQL 5.5.24。

注意：如果 MeekroDB 生成的查询不包含撇号或手动插入第二个撇号类型，则它们可以正常工作。所以：

```
$result = DB::query("SELECT DISTINCT `column` FROM `table`") 
```

有效，但：

```
$result = DB::query("SELECT DISTINCT %s FROM %s", "column","table") 
```

没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:17:10.177

我没有听说过 MeekroDB，但它似乎是一个简单的数据库抽象层。你的第二个例子：

```
$result = DB::query("SELECT DISTINCT %s FROM %s", "column","table") 
```

... 无效，因为“列”和“表”都不是您要注入的文字字符串。它们是作为 SQL 语句一部分的列/表名称，而不是用户提供的参数。

这是大多数编程语言中的基本概念。`SELECT foo`与`SELECT 'foo'`SQL 不同，原因`echo md5(1);`与 PHP 不同`echo 'md5(1)';`。

**更新：**

我怀疑我不够清楚。使用准备好的语句来绑定语言结构或对象名称是对任何数据库库的滥用，无论是否是 MeekroDB。您应该绑定代表**值**的参数，尤其是。最终用户输入的值，因此您的值不会泄漏到 SQL 中并破坏查询或更改其含义。但是通常没有工具可以注入 SQL**命令**或**表名**——它们几乎没有什么用处：如果你允许用户构建任意 SQL 查询，他就已经被授予做几乎任何他想做的任何事情的权力。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-01T12:16:40.610

好吧，因为 PHP 对待字符串的方式与其他语言不同，所以这是一个坏主意。从本质上讲，他们试图让开发人员更容易，但并不总是这样。实际上你可以做的是

```
$result = DB::query(sprintf("SELECT DISTINCT %s FROM %s", "column","table")); 
```

# javascript - 输入用户名后编辑占位符html

> ID：14645831
> 
> 赞同：1
> 
> 时间：2013-02-01T11:59:12.860
> 
> 标签：javascript

为了节省空间（并使内容更紧凑），我添加了一个带有占位符的输入框

```
<input id="username-search" placeholder="view another users work"> 
```

添加用户名后，我想将占位符的文本更改为类似

```
<input id="username-search" placeholder="viewing -theuser-'s work"> 
```

以及删除用户添加到输入框中的文本，因为当输入文本时，占位符会消失。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:20:03.430

真的很简单。试试这个：

```
var input = document.getElementById('username-search');
input.onclick = function() {
    input.setAttribute('placeholder', "viewing " + input.value + "'s work");
    input.value = '';
} 
```

在框中键入内容，然后单击该框。该值将被删除，但占位符将更新为“查看亚当的作品”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:23:31.090

您可以根据需要在以下事件处理程序中动态更改`placeholder`属性：`onchange``<input type="text">`

```
<input id="username-search" placeholder="view another users work"
               onchange="changePlaceholder(this)">
<script>
function changePlaceholder(input){
    if (input.value == '') { 
        input.placeholder = "view another users work";
    }
    else {
        input.placeholder="viewing " + input.value + "'s work";
        input.value="";
    }
}
</script> 
```

[JSF](http://jsfiddle.net/QjMLn/)中。

考虑到`<input>`' 的值将在 之后被清除，因此如果您希望在外部对其进行处理`onchange()`，您可能希望保留最后输入的值。`<input type='hidden'>``onchange`

# python - 如何将继承对象视为 OpenERP 中的子类？

> ID：14645832
> 
> 赞同：2
> 
> 时间：2013-02-01T11:59:13.643
> 
> 标签：python, openerp

这个问题可能比最初看起来更复杂。

假设我有一个父类 Animal（我们在 OpenERP 中将其命名为`animal.base`）。我还有子类 Lion ( `animal.lion`) 和 Elephant ( `animal.elephant`)。我需要能够使用可以引用 Animal 的任何子类的 many2one 字段创建视图。这似乎可以通过执行以下操作：

```
class animal_lion(osv.osv):
    _name = 'animal.lion'
    _inherits = {'animal.base': 'base_id'}

    _columns = {
         ...
         'base_id': fields.many2one('animal.base', "Base ID")
    }

    def roar(self, cr, uid, context=None):
        print "rarrrrr" 
```

现在，当我们创建一个实例时，`animal.lion`我们可以看到它在引用的视图中是可见的`animal.base`。（Plain`inherit = 'animal.base'`不会这样，FWIW。）

但是，现在假设我们需要使用这种动物的方法。由于 many2one 仅指`animal.base`，我们不知道用户在视图中选择了哪种动物。即使我们碰巧知道只有狮子会被选中，我们也不能调用`roar`，因为`animal.base`对象只会让我们调用自己定义的方法。`emit_sound`我们可以尝试通过命名方法并尝试覆盖 Lion 类中的方法来绕过它。这至少会运行（一旦你添加一个`_inherit`除了`_inherits`），但它不会产生正确的 Lion 特定输出。需要某种方法来确定在基类的 many2one 中选择的特定实例的动态类型，`x`其中多个子类`_inherits`在同一类上指定`x`. 想象一个虚构的方法`get_subtype()`。然后我们可以在视图的按钮处理程序中说以下内容：

```
def perform(self, cr, uid, ids, context=None):
    this = self.browse(cr, uid, ids[0], context)
    subtype_name = this.my_many2one.get_subtype()
    subtype = self.pool.get(subtype_name)
    # will produce a roar if user picked a lion, else a meep
    subtype.emit_sound(cr, uid, context) 
```

或者，是否有任何其他架构可用于完成相同的任务？（是的，我设计了这个例子，但它应该说明真正的问题。） [也许在每个子类型实例的字段中编码子类型名称？]

我仅限于 OpenERP v5，但有兴趣知道任何版本的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T15:48:52.453

这里的关键是您希望您`base.animal`作为所有动物的通用索引单独存在于数据库中，因此这会使您的数据模型大大复杂化并迫使您使用记录级继承（通过`_inherits`）。

为了解析动物的子类型，您应该在 中添加一个显式`type`列`animal.base`，并始终正确设置它，以便您可以推断子类型记录。

```
# This static list could also be replaced by a function
ANIMALS = [
    ('lion', 'Lion'),
    ('elephant', 'Elephant'),
]
class animal_base(osv.osv):
    _name = 'animal.base'
    _columns = {
         ...
         'type': fields.selection(ANIMALS, 'Type'), 
    } 
```

您`base.animals`将自己存在于数据库中并且可以拥有自己的视图，因为您使用的是记录级继承。*子类型*（例如狮子）可以被视为每个动物的“装饰”，它实际上可能不是唯一的（同一记录可能同时存在 a和记录`base.lion`），因此您应该在某处添加唯一性约束。`base.elephant``base.animal`

现在，你永远不应该同时拥有`_inherit`并`_inherits`指向同一个父模型，这两个继承方案实际上是为了不同的目的，正如 OpenERP[技术备忘录](http://doc.openerp.com/memento)中所解释的那样。相反，您可以使用代理方法，`animal.base`它大致看起来像您的`perform`方法，除了它们需要找出子记录的 ID 以及它们的类型，例如：

```
def emit_sound(self, cr, uid, ids, context=None):
    for this in self.browse(cr, uid, ids, context):
       animal_registry = self.pool['animal.%s' % this.type]
       animal_ids = animal_registry.search(cr, uid, 
           [('base_id','=',this.id)], context)
       assert len(animal_ids) == 1, 'Chimera alert! ;-)'
       animal_registry.emit_sound(cr, uid, animal_ids, context) 
```

当然，您可以通过多种方式对其进行改进，例如添加功能字段`base.animal`以自动化更多此类管道工作。

* * *

另一方面，如果您并不*真的*需要`base.animal`在其他真实动物旁边存在，而只是需要一种在表单视图中选择任意动物的方法，您可以尝试使用带有`_inherit`+的传统继承`_name`，与`base.animal`它们的抽象基类（实际上没有任何记录）。选择任意动物可以使用 来完成`fields.reference`，您可以在其上过滤目标模型列表。5.0`subscription`模块包含[一个带有`doc_source`字段](http://bazaar.launchpad.net/~openerp/openobject-addons/5.0/view/2936/subscription/subscription.py#L67)的示例。
当心，`fields.reference`是一种不能与例如`browse`,`read`或`search`. 它以字符串形式存储为`'model,id'`并且您必须在需要取消引用时手动拆分该值 - 所以如果您走那条路要小心。它作为伪集成的唯一地方`many2one`是在客户端 UI 上，在其他任何地方它只是一个普通的、愚蠢的字符串值。

# php - symfony 1.4 在模板中使用 fetchOne() 解释并且不显示 html 标签

> ID：14645839
> 
> 赞同：4
> 
> 时间：2013-02-01T11:59:30.847
> 
> 标签：php, html, escaping, symfony-1.4, html-escape-characters

我有以下设置：php 5.4、symfony 1.4.17 和 firefox，即 chrome。

我已经建立了一个简单的新闻模块。

*   桌子：`TbNews`
*   列：
    *   `id`作为主键
    *   `scontent`作为保存新闻内容的文本字段。它将在里面有 html 内容，用 CKeditor 保存并且它工作得很好。

如果我使用`fetchOne()`（在模板中），则在编写内容之前会解释 html。

如果我使用 symfony 寻呼机（在行动中，然后是模板），则不会解释 html，并且我会在输出中看到带有内容的 HTML 标记。您可以看到下面的示例，这些示例准确地显示了我在说什么。

我在其他主题中读过，出于安全原因，symfony 输出转义器会自动将 HTML 转换为“文本”，我们必须在数据上使用 getRawValue 来获取原始 HTML 字符。

*   [在模板中显示 html 标签 - symfony 和 CKEDITOR。怎么安全？](https://stackoverflow.com/questions/7051847/show-html-tags-in-template-symfony-and-ckeditor-how-safety)
*   [阻止 symfony 从查询结果中转义 html](https://stackoverflow.com/questions/3602822/stop-symfony-from-escaping-html-from-query-result)
*   [Symfony.com 查看层输出转义](http://symfony.com/legacy/doc/gentle-introduction/1_4/en/07-Inside-the-View-Layer#chapter_07_output_escaping)
*   [Symfony sfOutputEscaper 方法 getRawValue()](http://www.symfony-project.org/api/1_4/sfOutputEscaper#method_getrawvalue)

我有一些疑问：

1.  为什么 symfony 输出转义器正在与 symfony 寻呼机一起使用，而如果我们使用它则不起作用`fetchOne()`？
2.  我应该如何`getRawValue()`在下面的示例中使用 symfony 寻呼机，解释 HTML，然后只显示内容？
3.  只写内容是`getRawValue()`最好的选择吗？

**示例代码：**

```
//1\. fetchOne() outputs content interpreting html before.
//index/templates/indexSuccess.php
//-------------------------------
$q = Doctrine_Query::create()->from('TbNews e')->where('e.id = ?', '1');
$new = $q->fetchOne(); // <p>testcontent</p>\r\n
echo $new['scontent']; 
// output:  testcontent  --- OK, output is not escaped because we are jumping symfony output escaper since we are doing it directly in the action.

//2\. Get all news with symfony pager, html tags are not interpreted, html tags are shown.
//index/actions/actions.class.php
//-------------------------------
$app_max_news_in_homepage = 4;
$this->pager = new sfDoctrinePager('TbNews', $app_max_news_in_homepage);
$this->pager->setQuery(Doctrine::getTable('TbNews')->createQuery('a'));
$this->pager->setPage($request->getParameter('page', 1));
$this->pager->init();

//index/templates/indexSuccess.php 
//--------------------------------
foreach ($pager->getResults() as $new)
{
  echo $new['scontent']; // &lt;p&gt;testcontent&lt;/p&gt;\r\n
}

//output:  <p>testcontent</p>  --- OK, since output is escaped by symfony output escaper since we get data at the action and show it in the template. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:25:11.147

你的第一个测试是错误的。

当你用 测试时`fetchOne()`，你在一个动作中。因此，您从数据库中检索的内容和您显示的内容（使用`echo`）不会被转义，因为它没有发送到模板。

当您执行第二个测试时，您从操作中检索内容并在模板中显示结果。在这种情况下，内容被`sfOutputEscaper`. 如果您进行第一次测试，然后尝试在模板中显示内容，您会看到 html 被转义。

```
// in actions
$this->new = $q->fetchOne();

// in template
echo $new['scontent'];

// result-> &lt;p&gt;testcontent&lt;/p&gt;\r\n 
```

如果您在您的 中激活`escaping_strategy`& ，则将转义给模板的所有内容。`escaping_method``apps/[app_name]/config/settings.yml`

当我想显示一个被转义的 html 内容时，我通常`unescape`使用`sfOutputEscaper`. 在你的情况下：

```
foreach ($pager->getResults() as $new)
{
  echo sfOutputEscaper::unescape($new['scontent']);
} 
```

另一种选择（由[Michal Trojanowski](https://stackoverflow.com/users/1712294/michal-trojanowski)说）：

```
foreach ($pager->getResults()->getRawValue() as $new)
{
  echo $new['scontent'];
} 
```

# html - PhantomJS / CasperJS 画布选择器

> ID：14645841
> 
> 赞同：1
> 
> 时间：2013-02-01T11:59:38.920
> 
> 标签：html, canvas, selector, phantomjs, casperjs

使用 PhantomJS V 1.8.1

提前致谢。

我正在尝试在我正在开发的使用backbone.js 的网站上运行一些测试。

我的一项测试涉及检查 Canvas 是否存在并单击它。我的问题是，无论我使用什么选择器来获取 Canvas 元素，我都无法让选择器找到它。查看页面时，我在 Google Chrome 中使用相同的 CSS 选择器，一切正常。起初我认为问题可能是由于页面上不存在该元素，但存在与画布一起插入的其他元素，所以我 99% 确定这不是问题。

我尝试使用的选择器是：

```
document.querySelectorAll('#idOfCanvas');

document.querySelectorAll('canvas#idOfCanvas'); 
```

此外，如果我`.classClassName:nth(1)`用来选择轮胎选择器，它仍然无法工作（在谷歌浏览器中工作，但与提供的其他示例一样）

画布有一个由选择器拾取的类名，我宁愿不使用类选择器。

任何帮助将非常感激。

干杯:)

还

就像我提到的那样，我几乎可以肯定 Canvas 作为容器 div 的存在而存在。此外，我在页面上有四个元素具有相同的类名（其中两个是画布），并且在我运行时返回了四个元素

返回 document.querySelectorAll('.className').length = 4;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:05:26.787

假设你有这样的事情：

```
<canvas id="idOfCanvas"></canvas> 
```

这应该有效：

```
canvas = document.getElementById("idOfCanvas");
// or
canvas = document.querySelector("#idOfCanvas"); // Only get the first match, ID's should be unique, any way.;
// or
canvas = document.querySelectorAll("#idOfCanvas")[0];
// or
canvas = document.getElementsByTagName("canvas")[0]; // Get the first <canvas> element. 
```

但是，您必须确保在执行脚本时实际加载了您的画布元素。例如，看看[这个`onload`教程](http://javascript.info/tutorial/onload-ondomcontentloaded)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-05T07:26:56.053

尝试这个 ：

```
canvas = document.getElementById(#IdOfCanvas:nth-child(1)); 
```

# symfony - 如何避免依赖来自不同捆绑包的实体

> ID：14645843
> 
> 赞同：2
> 
> 时间：2013-02-01T11:59:51.577
> 
> 标签：symfony, dependency-injection, doctrine-orm, entity-relationship, database-relations

我的应用程序中有几个捆绑包，我想在表之间建立关系。一个是我的 User(StoreOwner) 在 UserBundle 中，第二个是 Store 在 StoreBundle 中。

它们之间的关系是 OneToMany（用户 -> 是 -> 商店的所有者）。

**店铺**

```
/**
 * Description of Store
 * 
 * @ORM\Table(name="Store")
 * @ORM\Entity(repositoryClass="Traffic\StoreBundle\Repository\StoreRepository")
 * @author bart
 */
class Store extends StoreModel {

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @var string $name
     *
     * @ORM\Column(type="string", length=255)
     * @Assert\NotBlank(
     *    message="Please provide your shop name"
     * )
     */
    protected $name;

    /**
     * @ORM\ManyToOne(targetEntity="Application\Sonata\UserBundle\Entity\StoreOwner", inversedBy="stores")
     * 
     */
    protected $owner;

} 
```

**店老板**

```
/**
 * @ORM\Entity
 * 
 */
class StoreOwner extends User implements StoreOwnerInterface {

    /**
     * @var type ArrayCollection()
     * 
     * @ORM\OneToMany(targetEntity="Traffic\StoreBundle\Entity\Store", mappedBy="owner", cascade={"persist"})
     */
    protected $stores;

} 
```

**我的问题是：**

是否有任何解决方案可以避免 StoreBundle 和 UserBundle 之间的依赖关系并保持 Doctrine 中的实体之间的关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:05:20.260

在我看来，这是一个合理的担忧。捆绑包之间的双向依赖是一种气味。

解决依赖问题的一种方法是将实体从包中移出到更通用的命名空间中。这样，两个捆绑包都将依赖于同一个“库”，但不会直接相互依赖。

I recently wrote a blog post on how to do it: [How to store Doctrine entities outside of a Symfony bundle?](http://www.zalas.eu/how-to-store-doctrine-entities-outside-of-a-symfony-bundle)

# html - 为什么内联对齐在 Opera 上不起作用？

> ID：14645844
> 
> 赞同：1
> 
> 时间：2013-02-01T11:59:52.733
> 
> 标签：html, css

为什么内联对齐在 Opera 上不起作用？

演示：http: [//jsfiddle.net/KKEKW/](http://jsfiddle.net/KKEKW/)

**使用 Firefox 或 Safari 看起来就像这样。这就是我想要的样子。**

![在此处输入图像描述](../Images/f5273c6e43b5f85b580db3146fe42a54.png)

**有了 Opera，一切都会像这样直截了当。我不想要它。**

![在此处输入图像描述](../Images/25c4490801f89e386685202d2aeb2baf.png)

**HTML**

```
<div class ="social">
    <div class ="row">  
        <div class="twitter">
            twitter content
        </div>
        <div class="facebook">
            facebook content
        </div>
    </div>
    <div class ="row">
        <div class="google">
            google content
        </div>
        <div class="instagram">
            instagram content
        </div>        
    </div>
</div> 
```

**CSS**

```
div.social {
  margin-top: 10px;
  display: inline-block;
  height: 90px;
  overflow: hidden;
  text-align: left;
  vertical-align: bottom;
}

div.row{    
}

div.twitter {
  float: left;
  width: 200px;
  height: 30px;
  overflow: hidden;
  display:inline-block;
}

div.facebook {
  float: left;
  width: 170px;
  height: 30px;
  overflow: hidden;
  display:inline-block;
}

div.google {
  float: left;
  width: 200px;
  height: 25px;
  overflow:hidden;
  display:inline-block;
}

div.instrgram {
  float: left;
  width: 170px;
  height: 30px;
  overflow: hidden;
  display:inline-block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:26:36.723

`float:left`并且`display:inline-block`互相矛盾。如果您浮动一个元素，它会使该`display`属性变得无关紧要。

因此，从您的元素中删除 the`float`或 the 。`display`不要试图同时使用它们；它不会按您期望的方式工作。

`display:inline-block`无论如何，在我看来，您似乎可以通过指定on`.row`而不是`.twitter`,`.facebook`等元素来实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:15:18.293

不确定这是否是您想要的，但它对我有用（CSS/HTML 也更少）：

HTML：

```
<section class="left">
    <div>Twitter</div>
    <div>Google</div>
</section>

<section class="right">
    <div>Facebook</div>
    <div>Instagram</div>
</section> 
```

CSS：

```
div {
    display: block;
    padding: 5px;
}

.left {
    float: left;
}

.right {
    float: left;
} 
```

[jsfiddle 链接](http://jsfiddle.net/Eze5X/)。

# android-fragments - Android Fragment 状态和 setRetainInstance

> ID：14645847
> 
> 赞同：1
> 
> 时间：2013-02-01T12:00:09.313
> 
> 标签：android-fragments

请原谅长文。我正在玩一个简单的应用程序，并希望在方向更改时将自定义对象保存在片段中。以前在活动中使用 onRetainNonConfigurationInstance() / getLastNonConfigurationInstance() 方法来处理。鉴于这些方法现在已被弃用，文档鼓励使用片段和 setRetainInstance(boolean) 方法。

我继续尝试使用这种方法，然后注意到在跨方向更改保存片段状态时的行为有一个奇怪的差异。首先，对我正在玩的应用程序进行非常简短的解释：

* * *

## 主要活动

**片段 A**（应用启动时显示的第一个片段）

这是一个带有 3 个 EditText 控件的简单片段。每个在布局文件中都有一个 ID。The fragment also includes a button which when selected replaces Fragment A with Fragment B and saves the transaction on the backstack.

**片段 B**

这是一个布局为空的片段。如果 back 被推回，Fragment A 从 backstack 中恢复。

* * *

## 场景

**场景 A** - setRetainInstance(false)：

1.  应用启动并显示片段 A。
2.  我在 EditText 字段中输入值并选择按钮。
3.  显示片段 B。我更改了一次设备方向并按了返回键。
4.  显示片段 A 时输入的值（视图状态）保持不变。

**场景 A** - setRetainInstance(true)：

发生与上述相同的行为

**场景 B** - setRetainInstance(false)：

1.  应用启动并显示片段 A。
2.  我在 EditText 字段中输入值并选择按钮。
3.  显示片段 B。**我两次**更改设备方向并按后退键。
4.  片段 A 仍然显示完整的输入值（视图状态）。

**场景 B** - setRetainInstance(true)：

1.  应用启动并显示片段 A。
2.  我在 EditText 字段中输入值并选择按钮。
3.  显示片段 B。**我两次**更改设备方向并按后退键。
4.  片段 A 显示为空的 EditText 控件，即没有一个输入的值（视图状态）仍然完好无损。

出于某种原因，当方向更改不止一次时，使用 setRetainInstance(true) 会干扰片段 A（在后台堆栈上）的视图状态。

* * *

## 可能的解释

我开始对 setRetainInstance 的使用感到紧张，但对发生的事情没有完全了解，因此我在支持库源代码中进行了挖掘以尝试弄清楚。在非常高的层次上，我认为这可能是 setRetainInstance(true) 的情况：

1.  显示片段 A，按下按钮并将片段 A 替换为片段 B。作为此过程的一部分，片段管理器 (FM) 删除片段 A 并将`fragmentA.mRemoving`标志设置为真。

2.  第一次改变方向。此时 FM 尝试保存片段的所有状态：

    ```
    Parcelable saveAllState() {
    ...
    if (f.mState > Fragment.INITIALIZING && fs.mSavedFragmentState == null) {
                fs.mSavedFragmentState = saveFragmentBasicState(f); 
    ```

    片段 A 具有 CREATED 状态并且具有 null 已保存状态，因此它有资格保存其状态。

3.  活动作为方向改变的一部分被破坏。长话短说，Fragment A 的状态变为 INITIALIZING。

4.  重新创建活动并尝试将片段的状态移动到已创建。但是，此时在 FM moveToState() 方法中有一个检查：

    ```
    if (f.mRemoving && newState > f.mState) {
        // While removing a fragment, we can't change it to a higher state.
        newState = f.mState;
    } 
    ```

    因为`fragmentA.mRemoving`从第 1 步开始仍然为真，因为片段被保留（未重新创建），所以它的状态没有增加到 CREATED 而是保持在 INITIALIZING 状态。请注意，即使现​​在按下后退键，片段 A 仍将保持其状态不变，因为其状态已在步骤 2 中保存。

5.  第二次改变方向。FM 再次尝试保存片段的所有状态：

    ```
    Parcelable saveAllState() {
    ...
    if (f.mState > Fragment.INITIALIZING && fs.mSavedFragmentState == null) {
                fs.mSavedFragmentState = saveFragmentBasicState(f); 
    ```

    但是，由于片段 A 处于初始化状态，它没有资格保存其状态。因此，一旦第二次定向完成，如果按下返回键，片段 A 的状态就不再完整。

* * *

## 问题

1.  这种行为是预期的吗？也许这与不鼓励使用 setRetainInstance 和 backstack 片段的文档有关？

2.  我们应该如何处理视图状态和 setRetainInstance 的使用？也许我的用例不正确，但使用 setRetainInstance 功能和这种行为差异我会很紧张。

再一次，很抱歉发了这么长的帖子。反馈将一如既往地受到赞赏。

# gwt - 使用 Selenium 2 测试 GWT 应用程序

> ID：14645849
> 
> 赞同：1
> 
> 时间：2013-02-01T12:00:13.937
> 
> 标签：gwt, selenium

我正在尝试使用 Selenium 测试按钮单击。我的第一页有一个 ID = HOME_START_BUTTON 的按钮。当我单击它时，我的应用程序会转到一个带有 ID = CONTACTS_ADD_BUTTON 按钮的页面。这是我必须测试的代码。

```
private static boolean checkPageContainsStartButton()
{
    // type search query
    // driver.findElement(By.name("q")).sendKeys("qa automation\n");

    //Use static finals for these button names
    WebElement startButton = driver.findElement(By.id("HOME_START_BTN"));
    if (startButton == null)
    {
        return false;
    }
    else
    {
        startButton.click();
    }

    WebElement myDynamicElement = (new WebDriverWait(driver, 30))
      .until(new ExpectedCondition<WebElement>(){
            @Override
            public WebElement apply(WebDriver d) {
            return d.findElement(By.id("CONTACTS_ADD_BTN"));
    }});

    WebElement addButton = driver.findElement(By.id("CONTACTS_ADD_BTN"));
} 
```

错误堆栈跟踪

```
Command duration or timeout: 28 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.29.0', revision: '58258c3', time: '2013-01-17 22:47:00'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_04'
Session ID: b25e7efb428c98da880826fbf9e68de6
Driver info: org.openqa.selenium.chrome.ChromeDriver
Capabilities [{platform=XP, chrome.chromedriverVersion=26.0.1383.0, acceptSslCerts=false, javascriptEnabled=true, browserName=chrome, rotatable=false, locationContextEnabled=false, version=24.0.1312.57, cssSelectorsEnabled=true, databaseEnabled=false, handlesAlerts=true, browserConnectionEnabled=false, nativeEvents=true, webStorageEnabled=true, applicationCacheEnabled=false, takesScreenshot=true}]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:533)
    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:302)
    at org.openqa.selenium.remote.RemoteWebDriver.findElementById(RemoteWebDriver.java:331)
    at org.openqa.selenium.By$ById.findElement(By.java:216)
    at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:294)
    at WebDriverTestClass.checkPageContainsStartButton(WebDriverTestClass.java:67)
    at WebDriverTestClass.main(WebDriverTestClass.java:35)
Test failed. 
```

如果我注释掉，我的测试通过

```
WebElement addButton = driver.findElement(By.id("CONTACTS_ADD_BTN")); 
```

所以基本上，当我单击按钮时，Selenium 似乎无法在浏览器窗口上看到新的小部件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:43:36.913

You need to add a wait till the first button action is done. Use a default constant across all waits in your app. DEFAULT_RPC_WAIT, DEFAULT_SCREEN_WAIT etc. It would help to know where you have set up your waits by using Constants instead of just magic numbers.

Also reference GWT guidelines w.r.t to Selenium - [https://developers.google.com/web-toolkit/doc/latest/DevGuideTestingRemoteTesting](https://developers.google.com/web-toolkit/doc/latest/DevGuideTestingRemoteTesting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T10:29:59.707

1.  你发布了， 但在你的代码中我看到：`ID = **HOME_START_BUTTON**`
    `By.id("**HOME_START_BTN**")`

2.  来自 WebDriver 接口对 findElement 方法的注释：
    `findElement`不应该用于查找不存在的元素，而是使用并断言零长度响应。`findElement**s**(By)`

    ```
    /**
     * Find the first {@link WebElement} using the given method.
     * This method is affected by the 'implicit wait' times in force at the time of execution.
     * The findElement(..) invocation will return a matching row, or try again repeatedly until 
     * the configured timeout is reached.
     *
     * findElement should not be used to look for non-present elements, use {@link #findElements(By)}
     * and assert zero length response instead.
     *
     * @param by The locating mechanism
     * @return The first matching element on the current page
     * @throws NoSuchElementException If no matching elements are found
     * @see org.openqa.selenium.By
     * @see org.openqa.selenium.WebDriver.Timeouts
     */
    WebElement findElement(By by); 
    ```

# android - 什么是好的 setAudioEncodingBitRate 录制语音

> ID：14645850
> 
> 赞同：9
> 
> 时间：2013-02-01T12:00:14.087
> 
> 标签：android

你好，我想用 mediaRecorder 来录制声音。我要保存的格式是amr。

```
this.mediaRecorder = new MediaRecorder();
this.mediaRecorder.setAudioChannels(1);
this.mediaRecorder.setAudioSamplingRate(8000);

this.mediaRecorder.setAudioEncodingBitRate(16);
this.mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
this.mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.RAW_AMR);
this.mediaRecorder.setOutputFile(this.file.getAbsolutePath());

this.mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

我用 this.mediaRecorder.setAudioEncodingBitRate(16)，有些设备没问题

mediaRecorder.setAudioEncodingBitRate(12500),somedevice没问题

但我删除了 mediaRecorder.setAudioEncodingBitRate 一些设备没问题

所以我的问题是如何获得默认的 AudioEncodingBitRate。我需要使用哪个参数？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-04T18:58:54.300

您将 AudioEncodingBitRate 设置得太低。我犯了同样的错误:-)

这似乎有效：

```
MediaRecorder recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
if (Build.VERSION.SDK_INT >= 10) {
    recorder.setAudioSamplingRate(44100);
    recorder.setAudioEncodingBitRate(96000);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
} else {
    // older version of Android, use crappy sounding voice codec
    recorder.setAudioSamplingRate(8000);
    recorder.setAudioEncodingBitRate(12200);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
}
recorder.setOutputFile(file.getAbsolutePath());
try {
    recorder.prepare();
} catch (IOException e) {
    throw new RuntimeException(e);
} 
```

想法来自[这里](https://raw.github.com/soundcloud/android-intent-sharing/master/src/com/soundcloud/android/examples/intent/Record.java)

加：阅读文档。setAudioSamplingRate 的文档说如下：

> 采样率实际上取决于录音的格式以及平台的功能。例如，AAC 音频编码标准支持的采样率为 8 到 96 kHz，AMRNB 支持的采样率为 8kHz，AMRWB 支持的采样率为 16kHz。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-28T17:07:57.943

**我正在使用波纹管配置并提供惊人的清晰录音输出。**

```
localFileName = getFileName()+".wav";
localFile = new File(localdir, localFileName);
mRecorder = new MediaRecorder();
mRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
mRecorder.setOutputFormat(AudioFormat.ENCODING_PCM_16BIT);
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);
mRecorder.setAudioChannels(1);
mRecorder.setAudioEncodingBitRate(128000);
mRecorder.setAudioSamplingRate(44100);
mRecorder.setOutputFile(localFile.getPath()); 
```

但是，如果您在录制的同时播放音频，则在三星设备中会出现一些问题。

**[但仅当您同时播放音频和录制两者时再次使用]**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-16T13:10:21.930

我发现应该从采样率计算编码比特率。

[在https://micropyramid.com/blog/understanding-audio-quality-bit-rate-sample-rate/](https://micropyramid.com/blog/understanding-audio-quality-bit-rate-sample-rate/)上有一篇很好的关于这些值如何关联的文章

我使用 8:1 压缩来进行高质量的录音。我更喜欢 48 KHz 采样率，但同样的逻辑可以在本文要求的 8000 Hz 采样率下工作。

```
final int BITS_PER_SAMPLE = 16;       // 16-bit data
final int NUMBER_CHANNELS = 1;        // Mono
final int COMPRESSION_AMOUNT = 8;     // Compress the audio at 8:1

public MediaRecorder setupRecorder(String filename, int selectedAudioSource, int sampleRate) {
    final int uncompressedBitRate = sampleRate * BITS_PER_SAMPLE * NUMBER_CHANNELS;
    final int encodedBitRate = uncompressedBitRate  / COMPRESSION_AMOUNT;
    mediaRecorder = new MediaRecorder();
    try  {
        mediaRecorder.setAudioSource(selectedAudioSource);
        mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        mediaRecorder.setAudioEncoder(MediaRecorder.OutputFormat.AMR_NB);
        mediaRecorder.setAudioSamplingRate(sampleRate);
        mediaRecorder.setAudioEncodingBitRate(encodedBitRate);
        mediaRecorder.setOutputFile(filename);
    }catch (Exception e) {
        // TODO
    }
    return mediaRecorder;
}

MediaRecorder mediaRecorder = setupRecorder(this.file.getAbsolutePath(), 
                                   MediaRecorder.AudioSource.MIC, 
                                   8000); 
```

# git - 如何在 GIT 中执行取反操作？

> ID：14645855
> 
> 赞同：1
> 
> 时间：2013-02-01T12:00:26.287
> 
> 标签：git, cloud, push, fetch

**设置**

我有 4 台机器（**Dev1**，**Dev2**，**Server**和**Laptop**）的本地网络。

服务器有你可能称之为主存储库的东西。

2 台开发机器是进行开发的地方。

```
dev..commit...dev..commit...dev..commit...dev..commit...dev..commit. 
```

...然后最终...

```
push to **Server**. 
```

到目前为止一切都很好。这个循环效果很好。

* * *

**备份策略**

**笔记本电脑**具有其他机器使用的相同存储库的克隆。此克隆具有从**Server**、**Dev1**和**Dev2**到 repo 的遥控器。

**在笔记本电脑**上运行的计划任务每​​天下午 3 点左右从所有其他存储库中获取所有提交。

因为备份操作是获取，**Laptop**设法维护每个人的存储库所在的列表，而不允许他们的各个负责人相互影响。

我认为这是一个很好的异地备份，因为机器每天都和我一起离开。

* * *

**我想达到什么**

我想把这个责任从我的**笔记本电脑**转移到另一个可能基于云的服务器上。**云1**

但是**Cloud1**将无法找到**Dev1**、**Dev2**或位于我们防火墙后面的任何其他机器。

因此，我认为是否可以找到一种方法来安排从每台 Dev 机器到**Cloud1**的推送（对于含糊不清的术语感到抱歉）是合理的。

然而现在我们到达了问题的症结所在。

**问题**

Push 不是 fetch 的反面。

如果我的每台开发机器都尝试推送到**Cloud1**，那么它们的每个主分支（至少）都将尝试更新云机器的主指针。

当您想与他人分享您一直在做的工作时，推送是很好的选择。

我需要一个命令，它可以很好地在远程机器上备份您的所有提交和磁头，而不会影响该机器自己的磁头。

我不相信这是目前可能的。我正在研究其他方法。这个问题纯粹与 git 在没有合并的情况下推送的能力有关。（不完全准确，但读到这里你明白我的意思 - 我希望）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:19:34.830

您可以明确指定要更新的 refspec。所以，如果**Dev1**有

```
git push cloud +refs/heads/master:refs/remotes/dev1/master 
```

Dev2**确实**如此

```
git push cloud +refs/heads/master:refs/remotes/dev2/master 
```

他们不会发生冲突。

请注意，如果您不想在命令行上全部指定，您可以为每个开发人员配置不同的推送 refspec，但我认为无论如何都会编写脚本。

# javascript - 如何使用 html 中的 javascript 将文本转换为验证码图像？

> ID：14645859
> 
> 赞同：1
> 
> 时间：2013-02-01T12:01:01.250
> 
> 标签：javascript, captcha

我正在设计一个用于注册的网页，并且每次都需要验证码图像以确保安全。

如何将文本转换为验证码图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:55:30.063

您不应该在客户端（浏览器上的 HTML 页面）上获得验证码挑战的答案。任何试图克服挑战的非人类都可以从那里读取它。如果您希望使用 javascript 在浏览器中生成图像，则首先需要在客户端获得答案。

查看服务器端验证码选项，它们可以作为[reCAPTCHA 之](http://www.google.com/recaptcha)类的服务提供，也可以作为您选择的编程语言的某些库或脚本提供。

请注意，即使是正确实施的验证码也可以相对容易地通过文本识别 (OCR) 自动或[手动](http://www.blackhat-seo.com/2009/captcha-farms/)进行破解。

有关先前的讨论，请参阅[此 stackoverflow 问题](https://stackoverflow.com/questions/59560/most-effective-form-of-captcha)。有关传统文本识别验证码的替代方法，请参阅[In Search Of The Perfect Captcha](http://coding.smashingmagazine.com/2011/03/04/in-search-of-the-perfect-captcha/)。

# c# - 如何将 EF CodeFirst 多重性从一更改为零/一？

> ID：14645861
> 
> 赞同：0
> 
> 时间：2013-02-01T12:01:21.843
> 
> 标签：c#, entity-framework, entity-relationship, entities

想象一下我有两个实体：

```
 public class User{
    public Guid UserId { get; set; }
}

public class Country{
    public Guid CountryId {get; set;}
    public virtual List<User> Users {get; set;}
} 
```

如果我尝试添加一个不属于任何国家的用户，我会得到一个`UpdateException`命令`SaveChanges`：

> “SLContext.User”中的实体参与“Country_Users”关系。找到 0 个相关的“Country_Users_Source”。1 'Country_Users_Source' 应该是

我相信这个问题与自动生成的一对多关系有关。如何将此多重性设置为 0.1 ---> * ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:12:03.503

如果您使用**FluentAPI**，`User`Entity 的配置应该是：

```
 HasOptional(x=> x.Country)
       .WithMany(x=> x.Users); 
```

和你的用户实体：

```
 public class User{
        public Guid UserId { get; set; }
        public virtual Country Country { get; set; }
   } 
```

希望这有帮助。

# php - SimpleXML：无法从 XML 文件中获取数据

> ID：14645862
> 
> 赞同：2
> 
> 时间：2013-02-01T12:01:20.953
> 
> 标签：php, xml, api, simplexml

我正在尝试使用 DELL API 从我们的产品中获取保修信息。DELL 提供了一个 XML 文件，我想从中提取保修结束日期。

XML 文件的位置：[https ://api.dell.com/support/v2/assetinfo/warranty/tags?svctags=XXXXXX1&apikey=YYYYYYYYYYYYYYYYY](https://api.dell.com/support/v2/assetinfo/warranty/tags?svctags=XXXXXX1&apikey=YYYYYYYYYYYYYYYYY)

[注意：svctags 和 apikey 被混淆了]

代码：

```
$xml = simplexml_load_file("https://api.dell.com/support/v2/assetinfo/warranty/tags?svctags=XXXXXXX1&apikey=YYYYYYYYYYYYYYYYYY");
print_r($xml->GetAssetWarrantyResult->{'a:Response'}->{'a:DellAsset'}->{'a:Warranties'}->{'a:Warranty'}->{'a:EndDate'}); 
```

这是行不通的。执行此代码时，我得到一个空页面。谁能解释为什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:22:17.660

你可以使用 curl，例如：

```
$url = "https://api.dell.com/support/v2/assetinfo/warranty/tags?svctags=1RP22W1&apikey=1adecee8a60444738f280aad1cd87d0e"
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,5);
$response = curl_exec($ch); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T17:55:44.760

如果你想要更多。

获取网址：[https](https://api.dell.com/support/v2/assetinfo/warranty/tags.json?svctags=) ://api.dell.com/support/v2/assetinfo/warranty/tags.json?svctags=“+tag+”&apikey=1adecee8a60444738f280aad1cd87d0e

然后解析（javascript）中的响应。在 python 中，您还可以读取每一行 page.readlines() 并使用 encode=json.loads(data) 开始像字典一样读取结果。

# android - ActionBarSherlock SearchView - 如何以编程方式显示下拉菜单

> ID：14645863
> 
> 赞同：1
> 
> 时间：2013-02-01T12:01:24.917
> 
> 标签：android, actionbarsherlock

我使用 ActionBarSherlock 库中的 SearchView。当我的 searchView 为空时，我想显示带有最近搜索查询的下拉列表。（类似于 youtube 应用程序）。现在，当我插入包含至少两个字母的文本时，它会显示下拉菜单。有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:03:29.067

已经有一篇关于这个的文章

[http://developer.android.com/guide/topics/search/adding-recent-query-suggestions.html](http://developer.android.com/guide/topics/search/adding-recent-query-suggestions.html) [http://developer.android.com/guide/topics/search/searchable-config.html](http://developer.android.com/guide/topics/search/searchable-config.html)

如果您在使用 ActionBarSherlock 时遇到问题，请参阅此问题 [ActionBarSherlock 4.2 是否支持 SearchView 的搜索建议？](https://stackoverflow.com/questions/13798668/does-actionbarsherlock-4-2-support-search-suggestions-for-a-searchview/14260518#14260518)

# magento - 产品集合过滤/订单方向问题

> ID：14645868
> 
> 赞同：0
> 
> 时间：2013-02-01T12:01:30.480
> 
> 标签：magento, sorting, collections, position, product

对于我的类别视图。我有一个选择下拉菜单，它使用 ajax 设置带有选项值的会话。

我已经覆盖了`Mage_Catalog_Block_Product_List`.

从 ajax 处理的这个会话值在“ `protected function _getProductCollection()`”覆盖中调用，以根据需要过滤产品集合。

我的第一个问题是我想根据这些属性上的三个值按一个属性进行过滤：

```
 $collection = parent::_getProductCollection();
 $collection ->addAttributeToFilter('name', array('in' => array('Cat','Adam', 'Paul')));
 $collection->addAttributeToSort('name = Cat', 'DESC');
 $collection->addAttributeToSort('name = Adam', 'DESC');
 $collection->addAttributeToSort('name = Paul', 'DESC');

  return $this->_productCollection; 
```

问题是我想根据需要定位这些。例如，我首先需要 Cat，然后是 Adam，然后是 Paul。有没有办法定位这些？

第二个问题是我需要定位一个 ' `sort by`' 选项。' `asc`' 是默认值，但是我需要它降序为默认值。

到目前为止，我已经覆盖`'Mage_Catalog_Block_Product_List_Toolbar'`并使用了这段代码：

```
protected $_direction           = 'desc'; 
```

然而，这并没有改变方向。

排序优先于我创建的自定义产品集合吗？

日志

a:5:{i:0;s:126:"SQLSTATE[42000]: 语法错误或访问冲突：1582 调用本机函数'FIND_IN_SET'时参数计数不正确";i:1;s:6707:"# 0 /var/www/vhosts/mydomain.com/httpdocs/mypath/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array) /var/www/vhosts/mydomain.com /httpdocs/mypath/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array) /var/www/vhosts/mydomain.com/httpdocs/mypath/lib/Zend/Db/Adapter/Abstract. php(479): Zend_Db_Statement->execute(Array) /var/www/vhosts/mydomain.com/httpdocs/mypath/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('选择计数（DI ...'，数组）/var/www/vhosts/mydomain.com/httpdocs/mypath/lib/Varien/Db/Adapter/Pdo/Mysql.php（419）：Zend_Db_Adapter_Pdo_Abstract->query（'选择计数（DI ...'，数组）/var/www/vhosts/mydomain.com/httpdocs/mypath/lib/Zend/Db/Adapter/Abstract.php（825）：Varien_Db_Adapter_Pdo_Mysql->查询（对象（Varien_Db_Select） , 数组) /var/www/vhosts/mydomain.com/httpdocs/mypath/lib/Varien/Data/Collection/Db.php(225): Zend_Db_Adapter_Abstract->fetchOne(Object(Varien_Db_Select), 数组) /var/www/ vhosts/mydomain.com/httpdocs/mypath/lib/Varien/Data/Collection.php(225): Varien_Data_Collection_Db->getSize() /var/www/vhosts/mydomain.com/httpdocs/mypath/lib/Varien/Data/ Collection.php(211): Varien_Data_Collection->getLastPageNumber() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(1036) : Varien_Data_Collection->getCurPage() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Eav/Model/Entity/Collection/Abstract.php(871):Mage_Eav_Model_Entity_Collection_Abstract->_loadEntities(false, false) /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Review/Model/Observer.php(78): Mage_Eav_Model_Entity_Collection_Abstract->load() / var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Model/App.php(1334): Mage_Review_Model_Observer->catalogBlockProductCollectionBeforeToHtml(Object(Varien_Event_Observer)) /var/www/vhosts/ mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Model/App.php(1307): Mage_Core_Model_App->_callObserverMethod(Object(Mage_Review_Model_Observer), 'catalogBlockPro...', Object(Varien_Event_Observer)) / var/www/vhosts/mydomain.com/httpdocs/mypath/app/Mage.php(447): Mage_Core_Model_App->dispatchEvent('catalog_block_p...', Array) /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Catalog/Block/Product/List.php(163): Mage::dispatchEvent('catalog_block_p...', Array) /var/www/vhosts/mydomain. com/httpdocs/mypath/app/code/core/Mage/Core/Block/Abstract.php(862): Mage_Catalog_Block_Product_List->_beforeToHtml() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/ core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Block/Abstract. php(526): Mage_Core_Block_Abstract->_getChildHtml('product_list', true) /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Catalog/Block/Category/View.php(85 ): Mage_Core_Block_Abstract->getChildHtml('product_list') /var/www/vhosts/mydomain.com/httpdocs/mypath/app/design/frontend/default/gomer/template/catalog/category/view。phtml(115): Mage_Catalog_Block_Category_View->getProductListHtml() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Block/Template.php(241): include('/var /www/vhosts...') /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('前端/defaul...') /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView() /var/ www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml() /var/www/vhosts/mydomain.com/httpdocs/ mypath/app/code/core/Mage/Core/Block/Text/List.php(43): Mage_Core_Block_Abstract->toHtml() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/法师/核心/方块/Abstract.php(863)：Mage_Core_Block_Text_List->_toHtml() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Block/Abstract.php(582): Mage_Core_Block_Abstract->toHtml() /var/www /vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Block/Abstract.php(526): Mage_Core_Block_Abstract->_getChildHtml('content', true) /var/www/vhosts/mydomain. com/httpdocs/mypath/app/design/frontend/default/gomer/template/page/2columns-left.phtml(49): Mage_Core_Block_Abstract->getChildHtml('content') /var/www/vhosts/mydomain.com/httpdocs /mypath/app/code/core/Mage/Core/Block/Template.php(241): include('/var/www/vhosts...') /var/www/vhosts/mydomain.com/httpdocs/mypath /app/code/core/Mage/Core/Block/Template.php(272): Mage_Core_Block_Template->fetchView('frontend/defaul...') /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Block/Template.php(286): Mage_Core_Block_Template->renderView() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/ core/Mage/Core/Block/Abstract.php(863): Mage_Core_Block_Template->_toHtml() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Model/Layout。 php(555): Mage_Core_Block_Abstract->toHtml() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Controller/Varien/Action.php(390): Mage_Core_Model_Layout-> getOutput() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Catalog/controllers/CategoryController.php(159): Mage_Core_Controller_Varien_Action->renderLayout() /var/www/vhosts/ mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Controller/Varien/Action.php(419): Mage_Catalog_CategoryController->viewAction() /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('view') /var/www/vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http)) /var/www /vhosts/mydomain.com/httpdocs/mypath/app/code/core/Mage/Core/Model/App.php(354): Mage_Core_Controller_Varien_Front->dispatch() /var/www/vhosts/mydomain.com/httpdocs/mypath /app/Mage.php(683): Mage_Core_Model_App->run(Array) /var/www/vhosts/mydomain.com/httpdocs/mypath/index.php(87): Mage::run('', 'store' ) {main}";s:3:"url";s:72:"/mypath/index.php/books-for-adults/autobiography-and-biography.html";s:11:"script_name";s:22:"/mypath/index.php";s:4:"skin";s:7:"english";}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:34:43.263

尝试使用finset：

```
$collection->addAttributeToFilter('name', array('finset'=>array('Cat','Adam','Paul'))); 
```

finset 使用 MySQL 的 FIND_IN_SET 函数

# sql - 使用具有系统管理员角色的登录帐户时未启用 CDC

> ID：14645869
> 
> 赞同：2
> 
> 时间：2013-02-01T12:01:31.490
> 
> 标签：sql, security, sysadmin, cdc

尝试在我们的一个 SQL2012 实例上启用 CDC 时，当使用属于 sysadmin 固定服务器角色成员的登录帐户时，我收到错误消息。

`Procedure sp_cdc_enable_db_internal`,

> 无法更新指示数据库已启用更改数据捕获的元数据。执行命令“SetCDCTracked(Value = 1)”时发生故障，无法获取有关 WindowsNT 组/用户的信息”

有问题的登录帐户最初创建了数据库，因此在此特定数据库的 dbo 用户下的“登录名：”中提到。

当我在数据库上运行 sp_changedbowner 'sa' 然后再次运行该命令以启用 CDC 时，它起作用了。这是为什么？

我认为要启用 CDC，您要么必须是实际数据库中“db_owner”角色的成员，要么必须是 sysadmin 角色的成员。

有人可以帮我解释一下吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-21T05:39:12.070

这是一个答案：

1.  [https://docs.microsoft.com/en-us/archive/blogs/ramoji/could-not-update-the-metadata-that-indicates-database-is-enabled-for-change-data-capture-the-执行命令时发生故障-setcdctrackedvalue-1](https://docs.microsoft.com/en-us/archive/blogs/ramoji/could-not-update-the-metadata-that-indicates-database-is-enabled-for-change-data-capture-the-failure-occurred-when-executing-the-command-setcdctrackedvalue-1)

2.  [https://support.microsoft.com/en-us/help/913423/you-cannot-run-a-statement-or-a-module-that-includes-the-execute-as-cl](https://support.microsoft.com/en-us/help/913423/you-cannot-run-a-statement-or-a-module-that-includes-the-execute-as-cl)

> 出现此问题的原因是当您尝试模拟数据库用户运行语句或模块时，SQL Server 2005 无法获取有关上下文的信息。

# iphone - 在 2d 图像 cocos3d 上绘制网格

> ID：14645874
> 
> 赞同：-2
> 
> 时间：2013-02-01T12:01:52.933
> 
> 标签：iphone, opengl-es, cocos3d

嗨朋友们，我想在 2d 图像上绘制网格，如下图所示，下面我给出了代码，但是应用程序正在崩溃并且没有显示错误消息......所以很难识别问题。

```
 float arr_location[] = {0.0,0.0,0.0,  0.0,1.0, 0.0,  1.0,1.0,0.0, 1.0,0.0,0.0};

CC3VertexLocations* Vlocation = 
    [[CC3VertexLocations vertexArrayWithName:@"demoLocation"] retain];
Vlocation.drawingMode = GL_TRIANGLES;//
Vlocation.vertexCount = 3;
Vlocation.vertices = arr_location;

    float arr_normal[] = {0.0,0.0,-1.0};
CC3VertexNormals* normal = [[CC3VertexNormals vertexArrayWithName:@"demoNormal"] retain];
normal.vertexCount = 1;
normal.vertices = arr_normal;

    float arr_indice[] = {0,1,2};
CC3VertexIndices* demoIndices = [CC3VertexIndices vertexArrayWithName: @"demoIndicies"];
demoIndices.drawingMode = GL_TRIANGLES;
demoIndices.vertexCount = 3;
demoIndices.vertices = arr_indice;

CC3VertexArrayMesh* demoMeshModel = 
     [[CC3VertexArrayMesh meshWithName:@"demoMeshModel"] retain];
demoMeshModel.vertexLocations = Vlocation;
demoMeshModel.vertexNormals = normal;
demoMeshModel.vertexIndices = demoIndices;

CC3PlaneNode *meshNode = [[CC3PlaneNode alloc] init];
meshNode.mesh = demoMeshModel;
meshNode.material = [CC3Material shiny];
meshNode.texture = [CC3Texture textureFromFile: @"2.jpg"];

[self addChild: meshNode]; 
```

![参考图像](../Images/440d1e013fa6b87b7144906a2fd6961d.png)

![崩溃快照](../Images/37e0cf8ed31d86c455da3a553b0bd453.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:13:54.880

我认为 cocos2d 不可能，实际上它看起来像 3D，你可以肯定地用 OpenGL ES 来做，虽然我不确定具体如何，还没有在这么低的水平上工作，但如果你可以使用[cocos3d](http://brenwill.com/cocos3d/)然后使用 a`CC3PlaneNode`并将图片设置为纹理非常容易。我建议您阅读[编程指南](http://brenwill.com/2011/cocos3d-programming-guide/)并再次询问您是否还有其他问题。

# php - 使两个 sql 查询同时工作

> ID：14645875
> 
> 赞同：0
> 
> 时间：2013-02-01T12:02:03.290
> 
> 标签：php, sql, zip

我在一个 php 文件中有两个查询，但只有第二个查询被执行。但是第一个查询没有被执行。我可能做错了什么？这是我的代码。

```
<?php include('connections/pgconn.php'); ?>
<?php

function cleanData(&$str)
{
$str = preg_replace("/\t/", "\\t", $str);
$str = preg_replace("/\r?\n/", "\\n", $str);
if(strstr($str, '"')) $str = '"' . str_replace('"', '""', $str) . '"';
}

// filename for download
$filename = "eastafrica_revenue_monthly" . date('Ymd') . ".xls";

header("Content-Disposition: attachment; filename=\"$filename\"");
header("Content-Type: application/vnd.ms-excel");

$flag = false;
$result = pg_query("SELECT to_char (a.CALLDATE,'yyyymm') as month,min(a.calldate) as   start_time,max(a.calldate) as end_time,
   sum(a.alltaxcost::integer) AS revenue,
     COUNT (DISTINCT a.IDENTIFIANT) AS distinct_callers,
a.zoneiddest as country_code,b.country
FROM cdr_data a,COUNTRY_CODES b
WHERE  a.CALLSUBCLASS = '002'
     AND a.CALLCLASS = '008'
and a.zoneiddest::integer > 0
AND SUBSTR (a.CALLEDNUMBER, 1, 2) NOT IN
('77', '78', '75', '70', '71', '41', '31', '39', '76','79')
and  substr(a.zoneiddest,1,3)  in ('254','255','211','257','250')
and trim(a.zoneiddest)  = trim(b.country_code)
GROUP BY to_char (a.CALLDATE,'yyyymm') ,a.zoneiddest,b.country
ORDER BY 1");

while(false !== ($row = pg_fetch_assoc($result))) {
if(!$flag) {
  // display field/column names as first row
  echo implode("\t", array_keys($row)) . "\r\n";
  $flag = true;
}
array_walk($row, 'cleanData');
echo implode("\t", array_values($row)) . "\r\n";
}

?>

<?php
function cleanData2(&$str)
{
$str = preg_replace("/\t/", "\\t", $str);
$str = preg_replace("/\r?\n/", "\\n", $str);
if(strstr($str, '"')) $str = '"' . str_replace('"', '""', $str) . '"';
}

// filename for download
$filename = "international_revenue_daily" . date('Ymd') . ".xls";

header("Content-Disposition: attachment; filename=\"$filename\"");
header("Content-Type: application/vnd.ms-excel");

$flag = false;
$result = pg_query("SELECT to_char (a.CALLDATE,'yyyymmdd') as transdate,
    sum(a.alltaxcost::integer) AS revenue,
     COUNT (DISTINCT a.IDENTIFIANT) AS distinct_callers,
a.zoneiddest as country_code,b.country
FROM cdr_data a,  COUNTRY_CODES b
WHERE  a.CALLSUBCLASS = '002'
     AND a.CALLCLASS = '008'
and a.zoneiddest::integer > 0
AND SUBSTR (a.CALLEDNUMBER, 1, 2) NOT IN
('77', '78', '75', '70', '71', '41', '31', '39', '76','79')
and not substr(a.zoneiddest,1,3) in ('254','255','211','257','250','256')
and trim(a.zoneiddest)  = trim(b.country_code)
GROUP BY to_char (a.CALLDATE,'yyyymmdd') ,a.zoneiddest,b.country
ORDER BY 1") ;

while(false !== ($row = pg_fetch_assoc($result))) {
if(!$flag) {
  // display field/column names as first row
  echo implode("\t", array_keys($row)) . "\r\n";
  $flag = true;
}
array_walk($row, 'cleanData2');
echo implode("\t", array_values($row)) . "\r\n";
}
exit;
?> 
```

# javascript - 如何查找和标记网页中的所有链接？

> ID：14645876
> 
> 赞同：-1
> 
> 时间：2013-02-01T12:02:02.890
> 
> 标签：javascript, web, bho

我正在制作一个应用程序，它可以找到网页上的所有链接和按钮，并在链接和按钮上显示标记（使用任何浏览器或自定义应用程序窗口）。

现在，我正在尝试使用浏览器帮助对象（BHO）和 javascript 来实现它。BHO在现有网站中注入javascript代码，注入的javascript通过分析页面的DOM找到链接和按钮的位置并标记网页中的链接。

但是，它有很多问题，因为有很多由 DHTML、javascript、flash 等编码的链接。让我感到困难的是，标记这些链接并不容易，因为它经常在页面完全加载后移动和消失。

特别是 HTML DOM 无法访问 flash 按钮，所以我很难用上述方法找到这样的 flash 按钮。因此，我可能需要用不同的方法或框架来实现这个应用程序，但我找不到任何其他方法。我认为任何在屏幕网页上找到可点击对象的方法都会对我有所帮助。希望你能给我一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:09:00.953

要突出显示网站上的所有正常链接，您可以使用以下 jQuery 片段：

```
$('a').css('color', '#F00'); 
```

没有简单的方法可以`window.location`在 JavaScript 中突出显示 Flash 链接或链接。

# java - 如何使用 Java 在 Selenium2 中测试下载文件，然后检查下载文件的格式？

> ID：14645877
> 
> 赞同：1
> 
> 时间：2013-02-01T12:02:09.747
> 
> 标签：java, selenium, junit, selenium-webdriver

我有一个“导出”按钮，因此单击它后会下载包含一些数据的 .csv 文件。

有没有办法在 Selenium2 中测试以下几点：

*   单击“导出”按钮后下载文件
*   下载的文件是 .csv 格式的文件。
*   文件数据正确。（一共有三列，设 Column1, Column2, Column3 ）

我将非常感谢所有关于如何使用 Java 完成上述任务的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:00:26.950

`Native`实际上，使用 selenium web 驱动程序处理窗口是不可能的。您可以使用第三方工具`AutoIT`来解决此类问题。

有关[AutoIT 教程](https://beamtic.com/tag/autoit-tutorials)的更多信息，[这也是。](http://www.autoitscript.com/forum/topic/84960-learning-to-script-with-autoit-v3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:06:41.523

在 Firefox 中，你也可以做同样的事情。

1.  创建一个 Firefox 配置文件
2.  更改 Firefox 下载设置，因为它应该保存文件而不询问保存位置
3.  使用该配置文件启动自动化。

> FirefoxProfile 配置文件 = 新的 FirefoxProfile(profileDir);
> 
> 驱动程序=新的 FirefoxDriver（配置文件）；

下面你可以看到如何更改 firefox 文件下载设置

![在此处输入图像描述](../Images/a3759cff7b1904f30e6034d903f98734.png)

然后通过使用某种编程语言，你可以做剩下的事情

*   [检查格式](https://stackoverflow.com/questions/4583463/identifying-file-type-in-java)
*   [内容验证](https://stackoverflow.com/questions/2328735/java-file-i-o-text-file-how-to-check-for-content)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T04:36:01.177

将 Sikuli 库集成到您的测试脚本中。您可以通过快照轻松进行比较。

# wireshark - WireShark：WireShark 1.8.4 无法加载我的插件

> ID：14645885
> 
> 赞同：0
> 
> 时间：2013-02-01T12:02:48.100
> 
> 标签：wireshark, wireshark-dissector

我已经为 WireShark 框架编写了自己的插件（解析器）。现在它正在与我与插件一起构建的 WireShark 一起工作。但是当我把这些dll文件放到安装好的WireShark的Plugin目录下时，就无法加载了。我收到消息：

```
Runtime Error!
Programm: C:\Programme\System\WireShark-1.8.4\wireshark.exe
R6034
An application has made an attempt to load the C runtime library incorrectly. Please contact the application's support team for more information. 
```

在此之后，我收到了这条消息，也许还有更多细节。

```
Couldn't load module c:\Programme\System\Wireshark-1.8.4\plugins\1.8.4\wagocia.dll: `c:\Programme\System\Wireshark-1.8.4\plugins\1.8.4\wagocia.dll': Eine DLL-Initialisierungsroutine ist fehlgeschlagen. 
```

我已经用 MSVC2008EE 编译了 WireShark 和我的插件。是否由于插件的编译器版本和来自 Web 的 WireShark 的不同而出现错误？因为使用我构建的 WireShark（也使用 MSVC2008EE）一切正常。

最好的问候比约恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T02:54:17.290

使用 VC2010 重新编译您的插件以与 VC2010 兼容。

# jenkins - 如何让 Jenkins 在首页隐藏日志、历史记录等？

> ID：14645892
> 
> 赞同：7
> 
> 时间：2013-02-01T12:03:11.437
> 
> 标签：jenkins

我想从 Jenkins 首页删除所有更改、工作区链接和日志。

我不希望未经授权的人、机器人等访问此类信息。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-01T14:41:49.597

设置您的权限以不允许未经授权的访问

## **警告：**

***确保您拥有自己的用户/管理员设置所有权限，否则您可能会被锁定。***如果这样做，请使用[此处](https://wiki.jenkins-ci.org/display/JENKINS/Disable+security)的信息重置 [感谢[Alex]](https://stackoverflow.com/users/1087370/alex)

配置匿名用户看不到任何东西：

*   去**管理詹金斯**
*   单击**配置系统/配置全局安全性**（取决于您的 Jenkins/Hudson 配置）
*   在**Access Control -> Security Realm**下，您应该有`Matrix-based security`或`Project-based Matrix Authorization Strategy`。我假设你选择了后者。
*   在**要添加的用户/组下：**键入`authenticated`并单击**添加**
*   现在，给这个组您希望他们拥有的所有权限。
*   接下来，在**要添加的用户/组下：**键入`Anonymous`并单击**添加**
*   确保没有授予该组任何权限
*   点击**保存**

这样，匿名（未登录）用户将无法看到任何内容，但经过身份验证（登录）的用户将能够看到您选择的内容。您可以通过添加单个用户并授予他们某些权限来深入了解更具体的用户权限。

**PS**用户身份验证取决于您的**安全领域**配置。您可以配置为使用`Active Directory/LDAP`，或使用`Jenkin's own user database`. 前者意味着您不必在 Jenkins 中创建用户，只需授予他们权限即可。后者意味着您必须首先通过**Manage Jenkins -> Manage Users创建 Jenkins 的用户**

# php - 如何使用 gd 库或任何方法将高分辨率图像上传到文件夹？

> ID：14645895
> 
> 赞同：1
> 
> 时间：2013-02-01T12:03:28.677
> 
> 标签：php, image, image-processing, image-uploading, gdlib

如何使用 gd 库或任何方法将高分辨率图像上传到文件夹？任何帮助表示赞赏。

```
 mkdir("../Connectors/upload_images/$album_name/");

    $file_tmpname=$_FILES['is_albimg']['tmp_name'];

    $file_name=$_FILES['is_albimg']['name'];

    $file_nm=explode('.',$file_name);

    //print_r($file_nm); die();

    $fname2=$file_nm[0].time().".".$file_nm[1];

    $hash = hash('md5', $fname2);

    $fname = $hash.".".$file_nm[1];

                $up='../Connectors/upload_images/'.$album_name.'/'.$fname;

    //echo $up; die();

    move_uploaded_file($file_tmpname,$up) or die(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:49:10.893

PHP 上传处理对图像一无所知，更不用说分辨率。它只处理文件。

如果您想从上传的图像创建一个按比例缩小的预览（我想这就是您想要的；您的实际问题不太清楚），让自己熟悉 GD，然后创建图像。

检查文档： http: [//php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)

具体来说，`imagecopyresampled()`。

请注意，此处发布的代码示例包含**严重的安全问题**；我希望这只是一个示例，而不是生产代码。在此处查看有关处理上传文件的 PHP 手册：[http ://www.php.net/manual/en/features.file-upload.php](http://www.php.net/manual/en/features.file-upload.php)

# c# - 在没有 .ToString 的情况下更改日期时间格式

> ID：14645908
> 
> 赞同：-2
> 
> 时间：2013-02-01T12:04:22.933
> 
> 标签：c#, datetime

如何转换这个：

```
2-1-2013 0:00:00 
```

对此：

```
2/1/2013 12:00:00 AM 
```

不转换为字符串？或转换为字符串，但最终结果应该是`DateTime`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:06:37.007

`DateTime`结构没有格式含义，当您要在某处显示/输出日期时间时，格式变得很重要。所以你可以使用`DateTime.ToString()`重载来指定你需要输出的 excat 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:07:03.360

在我看来，请求没有多大意义，因为格式是数据的一种*呈现*方式，在这种情况下，数据是通过字符串呈现的。您存储`DateTime`到对象中，但可以*呈现*它。

如果您担心在`Watch`窗口中看到，请记住，它使用简单`DateTime.ToString(..).`的应用程序的默认文化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:12:51.710

正如 Jon 已经提到的， a`DataTime`没有固有的格式，它只有一个值。字符串有格式。所以你需要`DateTime.ToString`或`String.Format`得到你想要的结果：

```
var dt = DateTime.Parse("2-1-2013 0:00:00");
string result = dt.ToString("MM/dd/yyyy h:mm tt", CultureInfo.InvariantCulture); 
```

请注意，即使在默认情况下不使用它的文化中（如德国），我也曾经`ToString`通过`CultureInfo.InvariantCulture`以确保我得到您想要的 AM/PM 指示符。

# python - 确定列表中最大值的索引 - 优化

> ID：14645909
> 
> 赞同：1
> 
> 时间：2013-02-01T12:04:24.360
> 
> 标签：python, optimization

我写了几行代码来解决这个问题，但是分析器说，这非常耗时。（使用 kernprof 逐行分析器）这是代码：

```
comp = [1, 2, 3] #comp is list with always 3 elements, values 1, 2, 3 are just for illustration
m = max(comp)
max_where = [i for i, j in enumerate(comp) if j == m]
if 0 in max_where: 
    some action1
if 1 in max_where: 
    some action2
if 2 in max_where: 
    some action3 
```

Profiler 表示大部分时间都花在 max_where 计算中。我也曾尝试将这个计算拆分成 if-tree 以避免一些不必要的操作，但结果并不令人满意。

请问，我做错了还是只是python？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:17:07.183

如果它总是三个元素，为什么不简单地做：

```
comp = [1, 2, 3] 
m = max(comp)

if comp[0] == m: 
    some action
if comp[1] == m: 
    some action
if comp[2] == m: 
    some action 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T12:20:45.650

如果您多次这样做，并且同时拥有所有可用列表，那么您可以[利用](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argmax.html)来`numpy.argmax`获取所有列表的索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T12:15:03.233

您说这是一个耗时的操作，但我真诚地怀疑这是否会影响您的程序。您是否真的发现由于代码执行缓慢而导致了一些问题？如果没有，优化就没有意义了。

这就是说，我能想到一个小的优化——即使用 a`set`而不是`list`对`max_where`. 这将使您的三个成员资格测试更快。

```
max_where = {i for i, j in enumerate(comp) if j == m} 
```

也就是说，只有三个项目/检查，集合的构建可能需要比它节省更多的时间。

通常，对于包含三个项目的列表，此操作将花费可忽略不计的时间。在我的系统上，执行此操作需要*半微秒。*

简而言之：**不要打扰。**除非这是您的程序中*需要*加速的已证明瓶颈，否则您当前的代码很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T13:25:21.167

`for`使用循环扩展 Tobias 的答案：

```
comp = [1, 2, 3] 
m = max(comp)

for index in range(len(comp)):
    if comp[index] == m:
        # some action 
```

由于索引从 0 开始，因此您*不需要*执行`len(comp) + 1`. 我更喜欢在循环中使用索引`for`而不是实际元素，因为它可以大大加快速度。有时在一个过程中，您可能需要特定元素的索引。然后，使用`l.index(obj)`会浪费时间（即使只是微不足道的数量——对于更长的过程，这会变得乏味）。

这也假设每个过程（对于`comp[index]`）都非常相似：相同的过程但具有不同的变量。如果您对每个索引都有显着不同的过程，这将不起作用。

但是，通过使用`for index in range(len(l)):`，您已经有了索引，并且可以轻松地访问该项目`l[index]`（连同由循环给出的索引）。

奇怪的是，Tobias 的实现似乎更快（我不这么认为）：

```
comp = [1, 2, 3]
m = max(comp)
from timeit import timeit
def test1():
    if comp[0] == m: return m
    if comp[1] == m: return m
    if comp[2] == m: return m

def test2():
    for index in range(len(comp)):
        if comp[index] == m: return m

print 'test1:', timeit(test1, number = 1000)
print 'test2:', timeit(test2, number = 1000) 
```

回报：

```
test1: 0.00121262329299
test2: 0.00469034990534 
```

对于更长的列表，我的实现可能会更快（但不确定）。但是，为此编写代码很乏味（对于使用重复的长列表`if comp[n] == m`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T16:01:06.757

这个怎么样：

```
sample = [3,1,2]    
dic = {0:func_a,1:func_b,2:func_c}
x = max(sample) 
y = sample.index(x)
dic[y] 
```

如前所述并且正确地被否决，这不适用于多个函数调用。但是，这样做：

```
sample = [3,1,3]    
dic = {0:"func_a",1:"func_b",2:"func_c"}
max_val = max(sample) 
max_indices = [index for index, elem in enumerate(sample) if elem==max_val]
for key in max_indices:
    dic[key] 
```

这与上述其他解决方案非常相似。我知道一段时间过去了，但它是不正确的。:)

干杯!

# ruby-on-rails-3 - Rails i18n 如何获取某个键的所有值？

> ID：14645914
> 
> 赞同：10
> 
> 时间：2013-02-01T12:04:47.927
> 
> 标签：ruby-on-rails-3, key, key-value, rails-i18n

在 Rails i18n 中，如何使用以下命令获取某个键的所有值：

```
translations = I18n.backend.send(:translations) 
```

**拿到所有钥匙**

我需要能够获得*某个部分*，例如只返回“家”下的所有内容

```
en:
  home:
    test: test 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T13:29:31.960

的返回值`I18n.backend.send(:translations)`只是一个哈希值，因此您只需传入适当的键即可访问子集。

例如，如果您有：

```
en:
  foo:
    bar:
      some_term: "a translation"
      some_other_term: "another translation" 
```

然后你可以得到下面的哈希子集`bar`：

```
I18n.backend.send(:translations)[:en][:foo][:bar]
#=> { :some_term=>"a translation", :some_other_term => "another translation"} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T13:16:43.767

默认的 I18n 后端是`I18n::Backend::Simple`，它不会向您公开翻译。（`I18.backend.translations`是一种受保护的方法。）

这通常不是一个好主意，但是如果您确实需要此信息并且无法解析文件，则可以扩展后端类。

```
class I18n::Backend::Simple
  def translations_store
    translations
  end
end 
```

然后，您可以调用`I18n.backend.translations_store`以获取已解析的翻译。您可能不应该将此作为长期策略，但它可以为您提供您现在需要的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-28T12:28:37.330

设置`I18n.locale`然后做`I18n.t`的工作正常，例如：

```
def self.all_t(string)
  I18n.locale = :en
  en = I18n.t("pages.home.#{string}")
  I18n.locale = :fr
  fr = I18n.("pages.home.#{string}")
  [en, fr]
end 
```

# php - PHP：将字符串下载为 csv 文件？

> ID：14645916
> 
> 赞同：3
> 
> 时间：2013-02-01T12:04:54.340
> 
> 标签：php, download

我有一个包含 csv 数据的字符串。我可以以某种方式提供该字符串作为 csv 文件下载而不之前保存它吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T12:17:05.520

```
<?php
      header("Content-type: application/octet-stream");
      header("Content-Disposition: attachment; filename=\"my-data.csv\"");
      $data="col1, col start and end col2,col3, \n";
      $data .= "second line data";
      echo $data;
?> 
```

上面的代码将在访问者浏览器中显示一个窗口，要求将文件保存在本地计算机或由合适的应用程序打开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T12:08:39.597

```
header("Content-Disposition", "attachment;filename=myfilename.csv"); 
```

# python - 从一个文件读取到另一个缺少某些行

> ID：14645917
> 
> 赞同：0
> 
> 时间：2013-02-01T12:04:59.850
> 
> 标签：python, io, text-files

我有一个文本文件（file1.txt），每行有 1 个字符串，多行。我正在尝试读取文件并将某些行写入新文件。（file2.txt）

我的文本文件看起来像这样。

```
foo1
foo2
foo3
foo4
foo5
foo6 
```

ETC..

例如，我想将 foo1,foo2,foo4,foo6 写入我的新文件并错过 foo3 和 foo5。

```
foo1
foo2
foo4
foo6 
```

我希望保留原始文件。

我的代码看起来像这样......

```
with open("file1.txt","r") as r:
    lines=r.read()
    lines =lines.replace("foo3","")
    lines = lines.replace("foo5","")

r.close()
with open("file2.txt","a") as w:
    w.write(lines)
w.close 
```

问题是我最终得到了这个输出..

```
foo1
foo2

foo4

foo6 
```

我认为这是因为我将 foo 替换为 "" 我如何摆脱空白？

TIA,

保罗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:08:48.533

最小的更改是通过将`replace`调用更改为以下内容来替换行分隔符：

```
lines =lines.replace("foo3\n","")
lines = lines.replace("foo5\n","") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:23:28.753

假设排除是可变的：

```
def rwfile(infile, outfile, exceptions=[]):

    o = open(outfile, "w")

    for line in open(infile):
        if line.rstrip() not in exceptions:
            o.write(line)

    o.close()

rwfile("in", "out", ['foo3', 'foo5']) 
```

在：

```
foo1
foo2
foo3
foo4
foo5
foo6
foo7
foo8
foo9 
```

出去：

```
foo1
foo2
foo4
foo6
foo7
foo8
foo9 
```

继 OP 的评论之后 - 这是一个使用谓词函数来决定应包含哪些行的版本。

```
def rwfilep(infile, outfile, predicate=lambda x: True):

    o = open(outfile, "w")

    for line in open(infile):
        if predicate(line):
            o.write(line)

    o.close()

def ignore_some(line):
    """return True to include"""
    return line.rstrip() not in ['foo3', 'foo5']

def ignore_comments(line):
    """return True to include"""
    return not line.startswith("#")

rwfilep("in", "out2", ignore_some)

rwfilep("in", "out3", ignore_comments) 
```

# asp.net - 在 GridView 中显示本地时间

> ID：14645919
> 
> 赞同：1
> 
> 时间：2013-02-01T12:05:18.440
> 
> 标签：asp.net, gridview, databound

我有一个绑定到以下 sql server 2008r2 数据源的 asp.net gridview：

```
<asp:SqlDataSource ID="dsFault" runat="server" DataSourceMode="DataSet" 
 ConnectionString="<%$ ConnectionStrings:ESBExceptionDb %>"
SelectCommand="select * from Fault order by datetime desc"></asp:SqlDataSource> 
```

在我的故障表中有一个名为 DateTime 的日期时间类型的列。此列中存储的值采用 UTC 格式，我需要将它们显示在浏览器的本地时区中

我在网格视图的 Columns 集合中添加了一个模板字段，如下所示：

```
<asp:TemplateField>
  <ItemTemplate>
   <asp:Label ID="lblLocalTime" runat="server" 
    Text='<%# String.Format("{0:f}", Eval("DateTime").ToLocalTime()) %>'>
   </asp:Label>
  </ItemTemplate>    
</asp:TemplateField> 
```

当我浏览页面时，我收到以下错误：

```
CS1061: 'object' does not contain a definition for 'ToLocalTime' and no
extension method 'ToLocalTime' accepting a first argument of type 'object' 
could be found (are you missing a using directive or an assembly reference?) 
```

谁能告诉我我哪里出错了？

谢谢，罗伯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:26:50.420

从数据库返回的`Eval("DateTime")` **值**不是 C#`DataTime`对象。

并且因为该函数`.ToLocalTime()`属于`DateTime`c# 对象，所以您不能使用它。

您需要将对象转换为字符串，然后使用该函数`.ToLocalTime()`

```
<asp:TemplateField>
  <ItemTemplate>
   <asp:Label ID="lblLocalTime" runat="server" 
    Text='<%# Convert.ToDateTime(Eval("DateTime")).ToLocalTime() %>'>
   </asp:Label>
  </ItemTemplate>    
</asp:TemplateField> 
```

您将其转换为`DateTime`对象的那些，您可以使用任何可用的格式

例如

```
Text='<%# Convert.ToDateTime(Eval("DateTime")).ToString("dd/MM/yyyy") %>' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-29T09:22:16.427

除了其他答案，请记住 ToLocalTime() 将返回 SERVER 本地时间，而不是您请求的浏览器本地时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:26:42.290

像这样试试

`<%# Eval("DateTime", "{0:T}")%>`

```
<asp:Label ID="lblLocalTime" runat="server" 
    Text='<%# Eval("DateTime", "{0:T}")%>'>
   </asp:Label> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T07:00:23.943

这会成功的！试试这个。

```
<asp:TemplateField HeaderText="Account Created">
   <ItemTemplate>
      <asp:Label ID="lblLocalTime" runat="server" 
         Text='<%# Convert.ToDateTime(Eval("CreateDate", "{0:g}")).ToLocalTime() %>'>
      </asp:Label>
   </ItemTemplate>    
</asp:TemplateField> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-08T12:14:51.613

看起来没有干净简单的方法可以做到这一点，奇怪！到目前为止提到的答案尝试将日期转换为服务器时区，而不是客户端/浏览器的。即，如果服务器在美国而客户端在印度，您将看不到印度时区的日期时间，它将在美国。

这个的[副本](https://stackoverflow.com/questions/2732526/display-datetime-in-gridview-using-users-time)有更好的答案。基本上，您要么必须执行以下操作之一 -

*   将客户端时区信息发送到服务器并在那里进行适当的转换。最好发送时区名称而不是时区偏移量，因为时区偏移量可能因 DST 而异。您可以使用 Intl.DateTimeFormat().resolvedOptions().timeZone 发送时区名称。
*   将 UTC 日期字符串发送到客户端并让它使用 javascript(new Date(ISOUTCDateString)) 进行转换。这就是在 WCF 中发生的事情。

# arrays - 如何使用对象 json 转换数组 php

> ID：14645922
> 
> 赞同：0
> 
> 时间：2013-02-01T12:05:28.037
> 
> 标签：arrays, json, object

我有一个这样的 PHP 数组：

```
Array (
      [SCAN] => Array (
                      [SITE] => Array ([0] => http://www.site.com ) 
                      [DOMAIN] => Array ([0] => www.site.com )
                      [IP] => Array ( [0] => 134.0.xx.xxx )
                      )
      [SYSTEM] => Array ( [NOTICE] )
      ) 
```

我需要使用 json_encode() 函数转换对象 JSON。但问题是返回给我这个：

```
"Array\n(\n[SCAN] => Array\n (\n [SITE] => Array\n (\n [0] => http:\/\/www.site.com \n)\n\n" 
```

# c# - 如何用“预设回复”填充文本框？

> ID：14645926
> 
> 赞同：0
> 
> 时间：2013-02-01T12:05:39.440
> 
> 标签：c#, javascript, asp.net-mvc-3, razor

（免责声明/承认我的罪过：我被困在 Windows/桌面应用程序中很长一段时间，所以我的网络技能非常落后。所以请原谅我在 UI 问题上的愚蠢新手问题！）

我正在编写一个 ASP/MVC3-Razor UI。我的模型包含以下属性（除其他外）：

```
public string MyResponse { get; set; }
public IEnumerable<CannedResponse> CannedResponses { get; set; } 
```

哪里`CannedResponse`有属性

```
public int ID { get; set; }
public string Description { get; set; }
public string Text { get; set; } 
```

在 UI 上，我有一个文本区域供用户输入他的响应文本。或者，为了节省时间，他可以从下拉列表中选择一个预设响应，并且应该使用预设响应文本填充文本区域。

我可以将所有正确的数据放入模型中。我不知道该怎么做的部分是使用客户端事件创建下拉列表，以使用所选预设响应的“文本”属性填充“我的响应”文本区域。我认为这必须在 Javascript 中完成，但我不确定如何将 Razor 代码与 Javascript 联系起来。到目前为止，我所拥有的是：

```
@Html.DropDownList("cboCanned", Model.CannedResponsed.Select(c => 
  new SelectListItem { Value = c.ID.ToString(), Text = c.Description } ))
@Html.TextAreaFor(m => m.MyResponse) 
```

JavaScript 代码应该是什么，如何将其连接到下拉选择事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T12:44:28.643

据我了解， MyResponse 是保存您选择的“值”的变量，所以这应该会有所帮助：

```
 @Html.DropDownListFor(m => m.MyResponse , 
                              new SelectList{ Value = c.ID.ToString(), Text = c.Description },          
                              "Value", "Text", Model.MyResponse )) 
```

第一个参数：绑定 DropDownList 的值：（
`m => m.MyResponse`这是您的模型，您将其发送到 Razor 视图）

第二个参数：您的列表*（请注意，您可以在模型中传递列表，以免在视图中创建它只是为了使视图尽可能简单）*

第三个参数：（ `"Value"`保存列表元素的值成员的属性的名称）

第 4 个参数：（ `"Text"`保存列表元素的显示成员的属性的名称）

第 5 个参数：（ `Model.MyResponse`模型中的选定变量保存选定项的**值**）

希望这些信息有用...

# php - Laravel 4 中的瘦控制器

> ID：14645929
> 
> 赞同：4
> 
> 时间：2013-02-01T12:05:58.660
> 
> 标签：php, model-view-controller, laravel, laravel-4

我正在尝试找出在新的 Laravel 4 应用程序中构建控制器/模型的“最佳”方式。

显然，我想让控制器保持轻薄。所以我想使用 Repos/Services 来分离事物，但是我真的不知道如何在 Laravel 4 中实现它。Laravel 3 给了我们[一些关于它应该如何工作的想法](http://laravel.com/docs/models#best-practices)，但没有示例。

有没有人想出最巧妙的方法来做到这一点，或者有任何我可以看一看的示例代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T21:49:33.967

我同意这样一个事实，即在 Laravel 4 中存储这些类的位置不是很清楚。

一个简单的解决方案是在您的主 app/ 文件夹中创建 repositories/services 文件夹并更新您的主 composer.json 文件以使其自动加载：

```
{
    "require": {
        "laravel/framework": "4.0.*"
    },
    "autoload": {
        "classmap": [
            "app/commands",
            "app/controllers",
            "app/models",
            "app/database/migrations",
            "app/tests/TestCase.php",
            "app/repositories",
            "app/services"
        ]
    },
    "minimum-stability": "dev"
} 
```

注意：每次创建新类时，都必须运行`composer dump-autoload`.

如果是存储库，你可以让 Laravel 自动将它们注入到你的控制器中。我发现[这](http://www.youtube.com/watch?v=QSt9rBa_oUM&list=PLOeImSGaWW197aY3PILEeZjiy9G5G4coU)是一个很好的关于这个主题的截屏视频。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T19:26:30.423

我发现这个教程集合很好地介绍了存储自定义服务提供程序和其他要注入项目的文件的适当位置：

*   [http://fideloper.com/laravel-4-application-setup-app-library-autoloading](http://fideloper.com/laravel-4-application-setup-app-library-autoloading)
*   [http://fideloper.com/laravel-4-where-to-put-bindings](http://fideloper.com/laravel-4-where-to-put-bindings)
*   [http://fideloper.com/error-handling-with-content-negotiation](http://fideloper.com/error-handling-with-content-negotiation)

这些教程来自这个集合：

[http://fideloper.com/tag/laravel-4](http://fideloper.com/tag/laravel-4)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T19:00:15.920

当我全新安装 Laravel 时，我做的第一件事是：

*   删除“模型”文件夹
*   创建一个 src 文件夹
*   在 src 下，创建一个 Application 文件夹（或应用程序的名称）
*   在 Application 文件夹中，创建实体、存储库、服务和测试

因此，在这种情况下，您的命名空间将是 Application\Entities、Application\Repositories 和 Application\Services

在 composer.json 中：

```
{
    "require": {
        "laravel/framework": "4.0.*"
    },
    "autoload": {
        "psr-0": {
            "Application": "app/src/"
        },
        "classmap": [
            "app/commands",
            "app/controllers",
            "app/database/migrations",
        ]
    },
    "minimum-stability": "dev"
} 
```

对于其中的每一个，您都需要创建类和服务提供者以将存储库绑定到实体。

这是一个解释如何创建存储库的教程：

[http://culttt.com/2013/07/08/creating-flexible-controllers-in-laravel-4-using-repositories/](http://culttt.com/2013/07/08/creating-flexible-controllers-in-laravel-4-using-repositories/)

无论如何，我仍在寻找最好的架构。如果有人有更好的主意，我会很高兴听到它！

# jquery - 如何在 jquery mobile 中执行表单数据的跨域发布？

> ID：14645930
> 
> 赞同：0
> 
> 时间：2013-02-01T12:06:12.047
> 
> 标签：jquery, jquery-mobile, cross-domain

我正在尝试使用 ajax 将表单提交到不同域上的远程服务器（PHP 服务器）。虽然我听说过使用 jsonp 作为数据类型，但我不确定如何使用它，就像如何从 PHP 服务器返回 jsonp 数据一样。有人可以在这方面为我提供一些帮助吗？如果可以，请指定我应该如何编写返回 jsonp 的 PHP 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T10:35:56.620

我已经通过使用 jsonp 解决了跨域 ajax 请求。我能够通过 GET 而不是 POST 提交表单来做到这一点，所以这取决于您希望表单数据的安全性。我是这样做的：

PHP服务器代码：

```
header('Access-Control-Allow-Origin: *');
header('content-type: application/json; charset=utf-8');

$first_name = $_GET['first-name'];
$last_name = $_GET['last-name'];

// Process the first-name and last-name here, like storing them in a database or something like that.

$data = array('response' => "success");
echo $_GET['jsonp_callback'].'('.json_encode($data).')'; 
```

客户端ajax代码：

```
function init(){
//allowing cross domain requests :
        $.mobile.allowCrossDomainPages = true;
        $.support.cors = true;

        $.ajax({
                type:"GET",
                url:"http://xyz.com/process.php",
                cache:false,
                data:formData,
                crossDomain: true,
                dataType:'jsonp',
                jsonp:'jsonp_callback',
                 success:function(data){
                    if(data.response=="success"){
                          alert("success");
                    },

                 error:function(){
                    alert('Sorry, unable to register! Try again.');
                }
              });
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:37:24.840

这是一个简单的设置：

```
<?php

 $var1 = $_POST['var1'];
 // repeat mapping form post vars to local php vars

 // code to do something with vars such as INSERT to database goes here

 // select information or build up hard-coded response

 // set header for response
 header('content-type: application/json; charset=utf-8');

 // setup response object
 $data = array('resposne' => 'succcess', 'formId' => 5);

 // return json object
 echo json_encode($data);

?> 
```

那么你的 jQuery 可能看起来像这样：

```
$.ajax({
  url: 'data.php', 
  data: $('#yourForm').serialize(), 
  success: doSomethingWithResult 
});

function doSomethingWithResponse(result) {
  alert(result.response); // should alert "success"
} 
```

如果这不起作用，网络上还有很多其他更具体的示例。我发现这是一个很好的阅读：[http ://www.geekality.net/2010/06/27/php-how-to-easily-provide-json-and-jsonp/](http://www.geekality.net/2010/06/27/php-how-to-easily-provide-json-and-jsonp/)

# asp.net-mvc - 在 ASP.NET MVC 中返回 http://hostname:port:port/ 的绝对操作 URL

> ID：14645932
> 
> 赞同：1
> 
> 时间：2013-02-01T12:06:21.867
> 
> 标签：asp.net-mvc, url, absolute-path

以下`UrlHelper`用于获取 MVC 操作的绝对 URL 的扩展方法错误地返回格式为的 URL `http://hostname:port:port/`，例如`http://localhost:43256:43256/Job/Details`.

```
public static string AbsoluteAction(this UrlHelper url, string actionName,
                                    string controllerName, object routeValues)
{
        Uri requestUrl = url.RequestContext.HttpContext.Request.Url;
        return url.Action(actionName,
                          controllerName,
                          new RouteValueDictionary(routeValues),
                          requestUrl.Scheme,
                          requestUrl.Authority);
} 
```

为什么输出冗余端口号？是`requestUrl.Authority`吗？

# ruby-on-rails-3 - RSpec 让错误

> ID：14645936
> 
> 赞同：6
> 
> 时间：2013-02-01T12:06:35.163
> 
> 标签：ruby-on-rails-3, rspec, rspec2

在我的 spec/models/user_spec.rb 我有下一个：

```
require 'spec_helper'

describe User do

  before { 5.times { FactoryGirl.create(:sport) } }
  before { let(:user) { FactoryGirl.create(:user) } }

  ...

end 
```

但是在运行我的 user_spec.rb 时，我收到了这个错误：

```
Failure/Error: before { let(:user) { FactoryGirl.create(:user) } }
 NoMethodError:
   undefined method `let' for #<RSpec::Core::ExampleGroup::Nested_1:0x000001043033b0> 
```

这很奇怪，因为我的规格一直到现在都在工作，而且我没有改变任何东西......

这是我的 gemfile：[https ://gist.github.com/4690919](https://gist.github.com/4690919)

这是我的 spec_helper.rb：[https ://gist.github.com/4690935](https://gist.github.com/4690935)

我会很感激任何帮助，谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T12:20:49.557

我不知道为什么它以前工作，但你不应该在一个`let`块内有一个`before`块。它应该从`describe`(or `context`) 块中调用，如下所示：

```
describe User do
  let(:user) { FactoryGirl.create(:user) }
  before { 5.times { FactoryGirl.create(:sport) } }
  .... 
```

有关详细信息，请参阅[文档](http://rubydoc.info/gems/rspec-core/RSpec/Core/Let/ExampleGroupMethods)。

# javascript - 多个 TCP 连接是 UDP 的可行替代方案吗？（网络套接字）

> ID：14645937
> 
> 赞同：1
> 
> 时间：2013-02-01T12:06:36.163
> 
> 标签：javascript, html, tcp, udp, websocket

我正在研究 WebSockets 作为运行在线游戏的一种方式，其中屏幕上有多个玩家，并且所有玩家的位置更新都流式传输到每个客户端。

不幸的是，WebSockets 只是 TCP，所以如果管道中出现拥塞，流将会受到影响。

我的想法是通过从客户端建立多个 WebSocket 连接（同一服务器，多个端口？）并让服务器流以循环方式更新这些连接来尽可能减轻这种情况。

如果一个流拥塞，那么下一次更新可能会在另一个连接上通过，从而允许客户端赶上。无序的陈旧更新被丢弃。

这是一个可行的解决方案吗？我在说网络废话吗？或者对于太多的工程工作来说，这可能是一个小小的缓解措施？

# ios - 为 App Store 提交设置 iOS 版本（没有 Xcode ！！！）

> ID：14645943
> 
> 赞同：1
> 
> 时间：2013-02-01T12:06:48.910
> 
> 标签：ios, app-store, submission, application-loader

亲爱的stackoverflowers！

我目前正在准备一个 iPhone 应用程序以提交到 App Store。这是一个更大的跨平台 C++ 项目，为此我不得不放弃 Xcode 作为 IDE 并转向更“跨平台类型”的构建系统。现在这是一个简单的 Makefile。在开发过程中一切都很好，只是利用了 XCode 构建链，而不是使用 XCode 本身。但是，现在还有一个我不太知道如何通过的最后一道障碍：

在许多其他与打包相关的错误之后，Apple 的 Application Loader 吐出了我的 .ipa 文件，最后一个是：

```
"The bundle is invalid. Apple is not currently accepting applications built with this version of the SDK or Xcode." 
```

我已经看到我显然不是唯一遇到此错误的人，但大多数其他描述如何解决此问题的文章都是关于通过 Xcode 设置解决它，或者显然已经过时（2011 年或更早）。

关于应用程序的事实：

两天前，该应用程序仍然与 iOS 5.0 SDK 链接。鉴于该错误，我花了一些时间将应用程序与最新的 SDK 6.1 链接起来。所以这是出路，仍然是错误（但是，我没想到apploader后面的服务器会尝试“解析”我的可执行文件以查看我的SDK链接到哪个版本......或者这样做，并且是否有一些指向 iOS 5.0 的残留链接？）

接下来，我的 Info.plist。好吧，这里是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>CFBundleDevelopmentRegion</key>
  <string>en</string>
  <key>CFBundleDisplayName</key>
  <string>Drone game</string>
  <key>CFBundleExecutable</key>
  <string>game</string>
  <key>CFBundleIconFiles</key>
  <array>
    <string>icon.png</string>
    <string>icon@2x.png</string>
    <string>icon-iPad.png</string>
  </array>
  <key>CFBundleIdentifier</key>
  <string>[The bundle identifier]</string>
  <key>CFBundleInfoDictionaryVersion</key>
  <string>6.0</string>
  <key>CFBundleIconFile</key>
  <string>icon.png</string>
  <key>CFBundleName</key>
  <string>Drone game</string>
  <key>CFBundlePackageType</key>
  <string>APPL</string>
  <key>CFBundleShortVersionString</key>
  <string>1.0</string>
  <key>CFBundleSignature</key>
  <string>????</string>
  <key>CFBundleVersion</key>
  <string>1.0</string>
  <key>LSRequiresIPhoneOS</key>
  <true/>
  <key>NSMainNibFile</key>
  <string>MainView</string>
  <key>CFBundleResourceSpecification</key>
  <string>ResourceRules.plist</string>
  <key>UIRequiredDeviceCapabilities</key>
  <array>
    <string>armv7</string>
  </array>
  <key>UISupportedInterfaceOrientations</key>
  <array>
    <string>UIInterfaceOrientationLandscapeRight</string>
  </array>
  <key>UIApplicationExitsOnSuspend</key>
  <true/>
  <key>UIStatusBarHidden</key>
  <true/>
  <key>LSApplicationCategoryType</key>
  <string></string>
  <key>UIInterfaceOrientation</key>
  <string>UIInterfaceOrientationLandscapeRight</string>
  <key>MinimumOSVersion</key>
  <string>6.1</string>
  <key>LSRequiredIPhoneOS</key>
  <true/>
  <key>UILaunchImageFile</key>
  <string>Default.png</string>
  <key>CFBundleGetInfoString</key>
  <string></string>
  <key>UIDeviceFamily</key>
  <array>
    <integer>1</integer>
    <integer>2</integer>
  </array>
</dict>
</plist> 
```

我假设应用程序的属性列表中仍然缺少一些选项，这些选项被应用程序加载器检测到，或者某些值以错误的方式填充。部分问题在于 Apple 的开发人员指南在不使用 Xcode 时并没有真正的帮助。有很多键标有“不使用，由 Xcode 填写”，只有很少的解释（例如：MinimumOSVersion）。

**问题**本质上是：有人知道应用程序加载器从哪里获取使用的 SDK 版本吗？或者应用程序加载器是否关心“Xcode 版本”并且需要在某处指定？任何建议都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:21:16.123

其决定所依据的数据可能不在 Info.plist 中。至于信息在哪里，我不知道，因为该过程的那部分完全是黑匣子，并且没有关于它的文档。

为了让事情变得更容易和不那么复杂，我建议保留你的跨平台 IDE 用于开发和测试，但是当你准备好发布时，使用 Xcode。我有几个理由让你这样做：

1.  在 Xcode 中归档版本是一件轻而易举的事。这可以很好地管理您已存档的应用程序版本列表，以便您可以使用 dSYM 和代码供您以后调试。此存档过程已集成到应用程序上传系统，并有助于跟踪您在该时间点发布的代码。

2.  Application Loader 是 Xcode 的一部分；为了确保一切都兼容等，.ipa 应该由相同版本的 Xcode 生成。然后，如果捆绑包被拒绝，您只需要尝试不同的版本，您知道它不是您构建过程的一部分。

看起来我在回避您的问题，但最终当您将上传到 App Store 路线时，Apple 已经完全涵盖了这一点。因此，我们必须遵守他们的规则。他们希望防止任何形式的不可靠构建进入 App Store，因此他们有自己策划的上传过程。

Cross Platform IDE/Development 是一条很好的路线，看起来你已经解决了所有问题，但是当涉及到上传到专有的应用商店系统时，它就不能再跨平台了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:07:59.280

好的，这花了一些时间，但上周我成功地使用 Application Loader 提交了我的程序，并且没有使用 Xcode。问题是一堆未记录的密钥，我从 XCode 构建的项目中逆向工程。对于想要完成类似事情的每个人来说，这里更改后的 Info.plist 对我有用：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict> 
```

带有所用操作系统版本字符串的新魔法键。我不知道如何生成这个字符串，这是 Xcode 在另一个 plist 中写的，我复制了它。

```
 <key>BuildMachineOSBuild</key>
    <string>11G63b</string> 
```

.

```
 <key>CFBundleDevelopmentRegion</key>
    <string>en</string>
    <key>CFBundleDisplayName</key>
    <string>Drone game</string>
    <key>CFBundleExecutable</key>
    <string>game</string>
    <key>CFBundleIconFiles</key>
    <array>
        <string>icon.png</string>
        <string>icon@2x.png</string>
        <string>icon-iPad.png</string>
    </array>
    <key>CFBundleIdentifier</key>
    <string>[The bundle identifer]</string>
    <key>CFBundleInfoDictionaryVersion</key>
    <string>6.0</string>
    <key>NSHumanReadableCopyright</key>
    <string>[Copyright notice]</string>
    <key>CFBundleIconFile</key>
    <string>icon.png</string>
    <key>CFBundleName</key>
    <string>Drone game</string>
    <key>CFBundlePackageType</key>
    <string>APPL</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0</string> 
```

这里是真正的魔法。再次，一些无处记录的密钥，但是，鉴于问题描述中的错误消息，我怀疑密钥 DTSDKName 和 DTSDKBuild 特别重要。嗯，是的，但是 Xcode 的版本字符串（为什么苹果想知道这个？）和 iphone；再一次，我不知道如何生成这些。

```
 <key>DTCompiler</key>
    <string></string>
    <key>DTPlatformBuild</key>
    <string>10B141</string>
    <key>DTPlatformName</key>
    <string>iphoneos</string>
    <key>DTPlatformVersion</key>
    <string>6.1</string>
    <key>DTSDKBuild</key>
    <string>10B141</string>
    <key>DTSDKName</key>
    <string>iphoneos6.1</string>
    <key>DTXcode</key>
    <string>0460</string>
    <key>DTXcodeBuild</key>
    <string>4H127</string> 
```

也改变了这个，我认为这是一个复制粘贴的神器，因为我不记得改变它了....

```
 <key>CFBundleSignature</key>
    <string>ASDR</string> 
```

.

```
 <key>CFBundleVersion</key>
    <string>1.0</string>
    <key>LSRequiresIPhoneOS</key>
    <true/>
    <key>NSMainNibFile</key>
    <string>MainView</string>
    <key>CFBundleResourceSpecification</key>
    <string>ResourceRules.plist</string>
    <key>UIRequiredDeviceCapabilities</key>
    <array>
        <string>armv7</string>
    </array>
    <key>UISupportedInterfaceOrientations</key>
    <array>
        <string>UIInterfaceOrientationLandscapeRight</string>
    </array>
    <key>UIApplicationExitsOnSuspend</key>
    <true/>
    <key>UIStatusBarHidden</key>
    <true/>
    <key>LSApplicationCategoryType</key>
    <string></string>
    <key>UIInterfaceOrientation</key>
    <string>UIInterfaceOrientationLandscapeRight</string> 
```

更改为旧版本，似乎对 Application Loader 的拒绝不负责任，无论如何 5.0 都是正确的

```
 <key>MinimumOSVersion</key>
    <string>5.0</string> 
```

.

```
 <key>UILaunchImageFile</key>
    <string>Default.png</string>
    <key>CFBundleGetInfoString</key>
    <string></string>
    <key>UIDeviceFamily</key>
    <array>
        <integer>1</integer>
    </array>
</dict>
</plist> 
```

## 捆绑

最后，假设您可以编译一个有效的“.app”-目录，您需要从中生成一个包（通过尝试使用[ios-sim](https://github.com/phonegap/ios-sim)在模拟器上执行“.app”-目录或将其部署在您的手机上进行检查使用[水果带](https://github.com/ghughes/fruitstrap)- 很棒的工具！）。我选择了一个 ipa 捆绑包。我使用以下脚本从 .app 目录生成它：

```
#!/bin/bash
cp embedded.mobileprovision [.app directory]
codesign --force --sign "[Distribution Key Identifer]" --entitlements Entitlements.plist [.app directory]
cd [.app directory]
ln -s _CodeSignature/CodeResources CodeResources
cd ..
/usr/bin/xcrun -verbose -log -sdk iphoneos PackageApplication -v [.app directory] -o "$(pwd)/[bundle name].ipa" --sign "[Distribution Key Identifer]" --embed embedded.mobileprovision 
```

`embedded.mobileprovision`是您从 Apple 的 Mobile Provisioning Center 下载的分发配置文件。只需将其复制粘贴到您的 .app 目录中即可。

`[Distribution Key Identifer]`是您的密钥卡中的分发签名的标识符。

请注意，代码签名会执行两次，一次是作为“PackageApplication”的一部分，一次是手动调用。显然，我不知道构建有效的 .ipa 需要什么，但这很有效。随意通过剥离不必要的步骤来改进这一点。

希望这会帮助那些试图实现类似目标的人，干杯！

# java - 如何（静态）分析 java 代码并在构造函数或方法中提取实际参数值？

> ID：14645947
> 
> 赞同：2
> 
> 时间：2013-02-01T12:07:00.733
> 
> 标签：java, static-analysis

我想要一个工具来查找（Java）构造函数/方法的所有出现并报告每次调用的实际参数值。

我想还没有准备好，而且我还需要静态分析。

您建议使用哪个库/程序？

（我必须分析 Java 代码，但可以使用任何语言编写分析器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T04:09:46.773

你可以使用 AspectJ。在构造函数上定义一个切入点。然后编写一个方面以在每次调用时执行。然后将该方面应用于整个项目。

方面内的代码提供了调用链的详细信息，因此您可以自己查询参数并根据需要记录它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:24:59.800

您需要一个可以解析 Java、构建捕获代码的 AST（因此您可以搜索代码以查找方法调用）、可以解析类型和名称（因此您知道每个符号实例的含义并可以确定特定标识符名称）的工具感兴趣的方法，而不仅仅是一个意外同名的符号），并且可以帮助您生成方法调用。

Java 编译器提供了 API 来支持其中的一些。我不知道它会帮助您重新生成方法调用文本。

我们的 DMS Software Reengineering Toolkit 提供通用程序分析和转换功能，包括解析、AST 构建/访问、符号表构建和任意子树的漂亮打印（文本的重新生成）。它有一个完整的 Java 前端，提供全名和类型解析。使用 DMS 提供的支持编写一个准确、可靠的工具来做你想做的事情是非常简单的。

# css - 两列布局 - 第二列的内容出现在浮动的第一列下方

> ID：14645949
> 
> 赞同：0
> 
> 时间：2013-02-01T12:07:03.210
> 
> 标签：css, css-float, floating

我有一个两列布局，其中包含一个父 div（容器）和两个列 div。左列以宽度向左浮动，右列向左有一个边距，即左侧浮动 div 的宽度 + 20px。我希望第二列占据容器提供的其余宽度。

问题是放置在第二列中的浮动内容然后在第一列下方清除，出现与浮动列高度相同的空白。因此，在屏幕截图中，< p > 标签将向左浮动，第二个清除第一个作为示例。

如何解决这个问题？我已经包含了一个图片链接作为参考。我以前使用过这种技术没有问题，所以我不确定出了什么问题。

[问题的图像，包括使用中的 CSS](https://www.dropbox.com/s/eduiiij2eb4xhnh/Untitled.jpg)

感谢您的关注

# javascript - 在事件上调用两个函数

> ID：14645955
> 
> 赞同：1
> 
> 时间：2013-02-01T12:07:39.930
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-datepicker

我试图在关闭 jQuery UI Datepicker 时调用两个函数，但我不确定执行此操作的最佳方法是什么。

如果我只有一个功能，我可以这样做：

```
function splitArrivalDate() {
    // Some code
} 

$( '#mydatepicker' ).datepicker({
    onClose: splitArrivalDate
}); 
```

但是如果我想在 onClose 事件上依次调用两个函数呢？

```
function splitArrivalDate() {
    // Some code
} 

function setDepartureDate() {             
    // Some code
} 

$( '#mydatepicker' ).datepicker({
    onClose: splitArrivalDate; setDepartureDate // Does not work
}); 
```

我希望有人可以帮助我理解这一点。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:09:30.203

你想要这样的东西：

```
$( '#mydatepicker' ).datepicker({
    onClose: function () { splitArrivalDate(); setDepartureDate(); }
}); 
```

# c# - 从字符串反序列化 XML

> ID：14645964
> 
> 赞同：44
> 
> 时间：2013-02-01T12:08:03.843
> 
> 标签：c#, .net, xml, xml-deserialization

我正在尝试将从我的 Web 服务获得的结果转换为字符串并将其转换为对象。

这是我从服务中得到的字符串：

```
<StatusDocumentItem><DataUrl/><LastUpdated>2013-01-31T15:28:13.2847259Z</LastUpdated><Message>The processing of this task has started</Message><State>1</State><StateName>Started</StateName></StatusDocumentItem> 
```

所以我为此开设了一堂课：

```
[XmlRoot]
public class StatusDocumentItem
{
    [XmlElement]
    public string DataUrl;
    [XmlElement]
    public string LastUpdated;
    [XmlElement]
    public string Message;
    [XmlElement]
    public int State;
    [XmlElement]
    public string StateName;
} 
```

这就是我尝试使用 XMLDeserializer 将该字符串作为 StatusDocumentItem 类型的对象的方式（注意，operationXML 包含该字符串）：

```
string operationXML = webRequest.getJSON(args[1], args[2], pollURL);
var serializer = new XmlSerializer(typeof(StatusDocumentItem));
StatusDocumentItem result;

using (TextReader reader = new StringReader(operationXML))
{
    result = (StatusDocumentItem)serializer.Deserialize(reader);
}

Console.WriteLine(result.Message); 
```

但我的结果对象总是空的。我究竟做错了什么？

**更新**。我从 operationXML 获得的值是这样的，并且有一个不必要的 xmlns 属性阻止了我的反序列化。没有该属性，一切正常。这是它的样子：

```
"<StatusDocumentItem xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"><DataUrl/><LastUpdated>2013-02-01T12:35:29.9517061Z</LastUpdated><Message>Job put in queue</Message><State>0</State><StateName>Waiting to be processed</StateName></StatusDocumentItem>" 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-02-01T12:45:26.043

试试这个：

```
string xml = "<StatusDocumentItem xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"><DataUrl/><LastUpdated>2013-02-01T12:35:29.9517061Z</LastUpdated><Message>Job put in queue</Message><State>0</State><StateName>Waiting to be processed</StateName></StatusDocumentItem>";
var serializer = new XmlSerializer(typeof(StatusDocumentItem));
StatusDocumentItem result;

using (TextReader reader = new StringReader(xml))
{
    result = (StatusDocumentItem)serializer.Deserialize(reader);
}

Console.WriteLine(result.Message);
Console.ReadKey(); 
```

它是否显示“作业已排队”？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-10-14T03:22:15.453

这个通用扩展对我很有效....

```
public static class XmlHelper
{
    public static T FromXml<T>(this string value)
    {
        using TextReader reader = new StringReader(value);
        return (T) new XmlSerializer(typeof(T)).Deserialize(reader);
    }
} 
```

# cpu-architecture - 在 AVX2 Haswell 处理器中加载 256 位向量寄存器

> ID：14645967
> 
> 赞同：3
> 
> 时间：2013-02-01T12:08:09.707
> 
> 标签：cpu-architecture, avx2

我想加载一个`256 bit YMM`具有 32 个值的寄存器，每个值长度为 1 个字节。我研究的所有内在函数要么加载`double word`，即`4 byte`整数，要么加载，`quad word`即`8 byte`值。如何加载小于这些大小的数据？是否有任何助记符可以做到这一点但没有等效的内在函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:14:15.820

我认为没有办法只收集字节。但在我看来，你需要重新考虑你的问题。这是像素数据吗？例如 RGBA 值？如果是这样，也许您可​​以更改您的应用程序，使其读取/写入例如 RRRRGGGGBBBB (SSE)。然后你不必收集字节。您可以一次读取 128/256 位，这将是 SIMD 的最有效使用。

请注意，您可以通过使用短 int 操作来提高效率。我的意思是扩展到 16 位并使用 16 位整数 SSE/AVX 指令。

这是一个使用 SSE 的双线性插值示例，它读取四个字节 (RGBA) 的整数，并将它们扩展到 16 位。这比将它们扩展到 32 位要快。SSE3 示例将 RGBARGBARGBARGBA 转换为 RRRRGGGGBBBB。 [http://fastcpp.blogspot.no/2011/06/bilinear-pixel-interpolation-using-sse.html](http://fastcpp.blogspot.no/2011/06/bilinear-pixel-interpolation-using-sse.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T20:53:10.263

这是一个相当古老的问题，但我认为您可能想要的是采用 32 个字符作为输入参数的`AVX`内在函数。`__m256i _mm256_set_epi8`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T17:39:16.803

您可以简单地将[_mm256_load_si256](http://software.intel.com/sites/products/documentation/studio/composer/en-us/2011Update/compiler_c/intref_cls/common/intref_avx_load_si256.htm)内在函数与强制转换一起使用。该内在函数对应于 VMOVDQA 指令。

这是从内存中读取字节并将它们存储在内存中的代码。

```
char raw[32] __attribute__ ((aligned (32)));
__v32qi foo = _mm256_loadu_si256( (__m256i*) raw ); // read raw bytes from memory into avx register
_mm256_store_si256( (__m256i*) raw, foo ); // store contents of avx register into memory 
```

如果您愿意，也可以使用 _mm256_loadu_si256 加载未对齐的字节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-16T14:13:25.417

你认为这 32 个指针来自哪里？除非您想对 256 字节的查找表进行 32 次并行查找，否则源操作数中实际上没有空间来写入加载所需的地址。

我认为您必须执行四个 8x32 位收集操作，然后合并结果；收集操作支持非对齐访问，因此您可以从调整后的地址加载以在 YMM 寄存器中的正确位置获取目标字节，然后只需与掩码和 OR 进行合并。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:35:00.060

没有广播单字节的指令，但是你可以使用`_mm256_set1_epi8`intrinsic来达到这个效果。

# ruby-on-rails - 如何在rails中使用具有多个集合的部分

> ID：14645968
> 
> 赞同：0
> 
> 时间：2013-02-01T12:08:09.160
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, erb

我想在我的部分中使用两个集合 @ad_item 和 @user。这是我的索引 erb...

```
<% if @ad_items.any? && @user.any? %>
<%= render partial: 'yourads/ad_item', collection: {@ad_items,@user} %>
<% end %> 
```

这是我的控制器...

```
def index
  @ad_items = Yourad.all
  @user = User.all
  respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @yourads }
end 
```

结尾

这是我的 _ad_item.erb.html 部分

```
 <span class="date"><%= ad_item.created_at.to_date() %></span>
     <span class="location"><%= ad_item.title %></span>
     <div style="float:left"><%= ad_pic @user,ad_item %></div>
     <div class="description"><%= ad_item.description %></div> 
```

我的辅助功能是..

```
def ad_pic(user,ad)
cl_image_tag("Ad#{user.id}#{ad.id}.jpg", :version => rand(1000000000), :alt => "Ad pic",:width => 70, :height => 70, :crop => :fill)
end 
```

它在..中给出语法错误

```
<%= render partial: 'yourads/ad_item', collection: {@ad_items,@user} %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:29:05.980

请参阅[传递局部变量](http://guides.rubyonrails.org/layouts_and_rendering.html#passing-local-variables)

```
<%= render partial: 'yourads/ad_item', :locals => {:ad_items=>@ad_items,:user => @user }%> 
```

您可以在 yourads/ad_item 部分访问**@ad_items**作为**ad_items**和**@user**作为**用户**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:20:59.610

```
<%= render partial: 'yourads/ad_item', collection: @ad_items , 
                                       locals: {users: @users} %> 
```

并且在视野中

```
<% for user in users %>
 <span class="date"><%= ad_item.created_at.to_date() %></span>
 <span class="location"><%= ad_item.title %></span>
 <div style="float:left"><%= ad_pic user,ad_item %></div>
 <div class="description"><%= ad_item.description %></div>
<% end %> 
```

# mysql - 如何使用sql查询将同一字段分组到一个字段下

> ID：14645969
> 
> 赞同：3
> 
> 时间：2013-02-01T12:08:14.543
> 
> 标签：mysql, sql, group-by

我有下表的数据

```
emp_no emp_name login HOD_code 级别  
E43057 Ankita Barde 9:45 P00212 直接
E33995 Rakesh Sharma 8:15 P00212 直接
E31446 阿米特辛格 10:45 P00212 直接
E44920 Shweta Salve 9:38 E33995 间接   
E39787 Anita Shenoy 9:15 E31446 间接   
E37731 拉梅什舒克拉 9:10 E31446 间接   
E43455 Manish Shukla 11:01 E33995 间接   
E43130 Lubna Shaikh 9:39 E33995 间接

```

在上表中，我有一个 HOD 代码 (P00212) 优于所有，因此在 P00212 下映射的员工在 LEVEL 列中指定为直接员工，所有其他人都间接到 P00212。但是这种间接员工映射在直接员工下例如：P00212 是 Rakesh Sharma (E33995) 的 HOD，E33995 是其他 3 名员工的 HOD，即 Shweta(E44920)、E43455、E43130。所以我想以这样的方式编写一个查询，输出将如下所示

输出：

```
emp_no emp_name login HOD_NO 级别    
E43057 Ankita Barde 9:45 P00212 直接

E33995 Rakesh Sharma 8:15 P00212 直接   
E43455 Manish Shukla 11:01 E33995 间接
E43130 Lubna Shaikh 9:39 E33995 间接
E44920 Shweta Salve 9:38 E33995 间接

E31446 阿米特辛格 10:45 P00212 直接   
E39787 Anita Shenoy 9:15 E31446 间接
E37731 拉梅什舒克拉 9:10 E31446 间接

```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:39:44.330

[SQLFiddle 示例](http://sqlfiddle.com/#!2/3eb9fa/4)

```
select * from t
order by CASE WHEN HOD_CODE='P00212' THEN EMP_NO ELSE HOD_CODE END,
         CASE WHEN HOD_CODE='P00212' THEN 0 ELSE 1 END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:44:09.060

您可以尝试以下方法：

```
select 
    *, 
    case 
        when (HOD_CODE='P00212') 
        then emp_no 
        else HOD_code 
    end as Parent
from Table
Order by Parent, Emp_No 
```

## [SQL小提琴](http://sqlfiddle.com/#!2/85ee9/9)

# c# - 如何使“旧式”异步方法可等待

> ID：14645973
> 
> 赞同：6
> 
> 时间：2013-02-01T12:08:31.200
> 
> 标签：c#, async-await

如果我有一个带有回调的异步方法

```
MyMethodAsync( <Input Parameters ...>, Callback); 
```

我怎样才能让它等待？

[此方法适用于 windows phone 7，但应同样适用于任何类似的 c# 构造]

```
DNSEndpoint Endpoint = ...
NameResolutionCallback Callback = (nrr) => { ... }
DeviceNetworkInformation.ResolveHostNameAsync(Enpoint, Callback, null); 
```

我想在此调用周围放置一个可等待的包装器，因此我等待回调完成，然后再继续执行下一个命令。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T12:15:50.650

您可以使用[`TaskCompletionSource`](http://msdn.microsoft.com/en-us/library/dd449174.aspx)：

```
var tcs = new TaskCompletionSource<TypeOfCallbackParameter>();

MyMethodAsync(..., r => tcs.SetResult(r));

return tcs.Task; 
```

# utf-8 - C++ builder - 将 UnicodeString 转换为 UTF-8 编码字符串

> ID：14645985
> 
> 赞同：5
> 
> 时间：2013-02-01T12:09:10.390
> 
> 标签：utf-8, c++builder

我尝试在 C++ 构建器中将 UnicodeString 转换为 UTF-8 编码的字符串。我使用 UnicodeToUtf8() 函数来做到这一点。

```
char * dest;
UnicodeSring src;
UnicodeToUtf8(dest,256,src.w_str(),src.Length()); 
```

但编译器向我显示运行时访问冲突消息。我做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-02T06:56:48.463

假设您使用的是 C++Builder 2009 或更高版本（您没有说），并且使用的是 RTL 的`System::UnicodeString`类（而不是其他第三方`UnicodeString`类），那么有一种更简单的方法来处理这种情况。C++Builder 也有一个`System::UTF8String`可用的类（它从 C++Builder 6 开始可用，但直到 C++Builder 2009 才成为真正的 RTL 实现的 UTF-8 字符串类型）。只需将您分配`UnicodeString`给 a`UTF8String`并让 RTL 为您处理内存分配和数据转换，例如：

```
UnicodeString src = ...;
UTF8String dest = src; // <-- automatic UTF16-to-UTF8 conversion
// use dest.c_str() and dest.Length() as needed... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T18:14:45.880

这解决了问题中的问题，但是将 UTF16 转换为 UTF8 的真正方法在下面的 Remy 的回答中。

dest 是指向内存中随机空间的指针，因为您没有对其进行初始化。在调试版本中，它可能指向 0，但在发布版本中，它可能在任何地方。您告诉 UnicodeToUtf8 dest 是一个可容纳 256 个字符的缓冲区。

试试这个

```
char dest[256];  // room for 256 characters
UnicodeString src = L"Test this";
UnicodeToUtf8( dest, 256, src, src.Length() ); 
```

但实际上你可以使用更简单的：

```
char dest[256]; // room for 256 characters
UnicodeString src = L"Test this";
UnicodeToUtf8( dest, src, 256 ); 
```

# box-api - 仅获取图像

> ID：14645992
> 
> 赞同：0
> 
> 时间：2013-02-01T12:09:32.793
> 
> 标签：box-api

有什么方法可以使用 box-api 仅获取图像（仅音频或视频）。

我尝试使用搜索 api 和 If-Match 条件，但没有找到任何方法来做到这一点。

请建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:02:36.180

您的音频/视频文件有扩展名吗？在这种情况下，搜索 API 应该可以工作。如果您在它们之间放置一个空格，您可以一次搜索多个扩展名：

`GET /2.0/search?query=jpg%20mp4%20png`

# java - 从 ThreadPoolExecutor 重写的函数以进行日志记录

> ID：14645993
> 
> 赞同：0
> 
> 时间：2013-02-01T12:09:35.023
> 
> 标签：java, concurrency

```
// code exactly taken from java concurrency in practice

public class TimingThreadPool extends ThreadPoolExecutor {
  private final ThreadLocal<Long> startTime
    = new ThreadLocal<Long>();
  private final Logger log = Logger.getLogger("TimingThreadPool");
  private final AtomicLong numTasks = new AtomicLong();
  private final AtomicLong totalTime = new AtomicLong();

  protected void beforeExecute(Thread t, Runnable r) {
    super.beforeExecute(t, r);
    log.fine(String.format("Thread %s: start %s", t, r));
    startTime.set(System.nanoTime());
  }

  protected void afterExecute(Runnable r, Throwable t) {
    try {
    long endTime = System.nanoTime();
    long taskTime = endTime - startTime.get();
    numTasks.incrementAndGet();
    totalTime.addAndGet(taskTime);
    log.fine(String.format("Thread %s: end %s, time=%dns",
            t, r, taskTime));
    } finally {
    super.afterExecute(r, t);
    }
}

protected void terminated() {
try {
    log.info(String.format("Terminated: avg time=%dns",
            totalTime.get() / numTasks.get()));
    } finally {
    super.terminated();
    }
}
} 
```

实例是否`ThreadPoolExecutor`由所有工作线程共享。如果是，那么该方法`beforeExecute(...)`不`afterExecute(...)`应该同步？如果答案是否定的，那么原因是“局部变量是在线程堆栈中分配的，而 numTasks、totalTime、startTime 等状态变量是线程受限/原子的”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:19:45.290

您不需要同步 beforeExecute 和 afterExecute 因为这两个方法中使用的所有字段都是线程安全的 java.util.logging.Logger （来自 API - Logger 上的所有方法都是多线程安全的。）或 ThreadLocal 和 AtocmicLong 专门设计用于无锁使用。

至于局部变量，它们只能被一个线程访问，不需要任何同步。

# jquery - 将 Click 事件绑定到动态生成的 div

> ID：14645994
> 
> 赞同：1
> 
> 时间：2013-02-01T12:09:40.263
> 
> 标签：jquery, html, events, bind

所以我试图创建一个动态图片库。每个创建的图像都会在顶部有一个 div 供用户点击。我无法将点击事件绑定到 div

编码

```
$(document).ready(function()
{
    if()
    {

    }
    else
    {
        var divImgContainer =  '<div id="imgContainer">';
        var divInfo         = '<div id="info">';
        var divDetails      = '<div id="details">';
        var divImage        = '<div id="image">';
        var divVote         = '<div id ="click">';
        for(i=0; i<$ImageArray.length; i++)
        {
             document.getElementById("container").innerHTML += divImgContainer+divInfo+divDetails+'Caption</div>'+divVote+'</div></div>'+divImage+'<a href="img/'+$ImageArray[i].link +'"><img src="'+$ImageArray[i].thumb+'" /></a></div></div>';
         }
        $('#click').click(function()
        {
            alert("click");
        });
    }
}); 
```

谷歌搜索给出了两个流行的答案，一个是`$('#click').click(function()` ，另一个是`$('#click').live(click,function()` 两者都不起作用。

是否有任何特定方法可以为动态生成的 div 绑定点击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:26:54.847

首先，不要创建多个具有相同 ID 的 div

假设元素 id 'click' 具有类 'vote' 并且您想单击任何具有类 'vote' 的 div，试试这个：

```
$('#container').on('click', '.vote', function(e){
    alert("click");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:14:17.290

首先，该`.live()`方法在 jQuery 1.7 中被弃用并在 jQuery 1.9 中被删除，你不应该使用它。

您正在使用 JavaScript 创建元素，但您是在页面加载时执行它，并且在您（尝试）绑定事件处理程序之前，所以这不应该是一个问题。

但是，问题可能是您正在这样做：

```
... + divVote+'</div>... 
```

这会打开`<div id="click">`元素，然后立即结束它，因此它似乎没有任何内容。如果它没有内容，那么您将很难真正点击它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:15:19.597

放

```
$('#click').click(function(){
     alert("click");
}); 
```

之外

```
$(document).ready(function(){   }); 
```

如果它不起作用，然后尝试

```
$('#click').live(click,function() 
```

它可能会帮助你

# javascript - 从谷歌浏览器标签获取网址

> ID：14645996
> 
> 赞同：2
> 
> 时间：2013-02-01T12:09:58.213
> 
> 标签：javascript, html, google-chrome-extension

我正在为 chrome 构建一个扩展，并且我正在尝试将 chrome 选项卡 url（使用 JS）动态传递给 html 文件。我阅读了其他人关于同一问题的问题，但在我的情况下它不起作用。

我对 JS 和 HTML 的了解是基本的，但我不知道如何在它们之间移动参数数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:12:58.680

首先，设置选项卡 API 的权限：

```
"permissions": [
    "tabs"
] 
```

然后存储 URL：

```
chrome.tabs.getSelected(null,function(tab) {
    var tablink = tab.url;
}); 
```

或另一种方式：（首选）

```
chrome.tabs.query({'active': true}, function (tabs) {
    var url = tabs[0].url;
}); 
```

# asp.net-mvc-4 - 在哪里可以找到 WebMatrix.WebData.WebSecurity 的源代码

> ID：14645997
> 
> 赞同：9
> 
> 时间：2013-02-01T12:10:00.577
> 
> 标签：asp.net-mvc-4, security

我需要检查已实现的代码`WebMatrix.WebData.WebSecurity`。

我可以`WebSecurity`在线查看实现的代码吗？（这是一个开源类）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T15:22:13.797

当然，代码 `WebMatrix.WebData`是开源的

这是`WebSecurity`课程的链接 - [https://github.com/aspnetwebstack/aspnetwebstack/blob/master/src/WebMatrix.WebData/WebSecurity.cs](https://github.com/aspnetwebstack/aspnetwebstack/blob/master/src/WebMatrix.WebData/WebSecurity.cs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-24T05:13:01.357

官方源代码位于项目的 CodePlex Git repo： [https ://aspnetwebstack.codeplex.com/SourceControl/latest#src/WebMatrix.WebData/WebSecurity.cs](https://aspnetwebstack.codeplex.com/SourceControl/latest#src/WebMatrix.WebData/WebSecurity.cs)

不幸的是，GitHub 上的代码是克隆的，通常不是最新的。

# twitter - MVC4 获取用户推文，替代 v1（已弃用）

> ID：14645999
> 
> 赞同：1
> 
> 时间：2013-02-01T12:10:02.417
> 
> 标签：twitter, asp.net-mvc-4, oauth-2.0

使用`MVC4`，我想获得最近的`Tweets`（3）用户，而不必向他们请求访问权限，因为这对用户来说是一种痛苦。这也是因为一个用户可能正在查看另一个用户，而我也想显示他们的推文。

这很简单`Twitter API v1`：

```
$.ajax({
   url: 'https://api.twitter.com/1/statuses/user_timeline.json?count=3&screen_name=' +   twitterUser,
   ...
}); 
```

..但它已被弃用，并将在大约两个月后停止工作。

我是新手`Oauth`并且一直在努力寻找有关如何获取用户推文的任何好材料，但我相信现在使用`Twitter API v1.1`? 理想情况下，我想在前端实现一切，但认为我现在需要做一些身份验证服务器端并且必须使用`MVC`？

为了获得任何用户的`Tweets`，我想我可以`Twitter`为我的应用程序创建一个帐户并使用它来获取任何人的推文，只要它们不受保护。

有谁知道我可以用来实现这一目标的任何好的库，或者开箱即用的`MVC4 Oauth`东西是否足以完成这项工作？

任何关于从哪里开始的建议，尤其是示例，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:28:00.807

要使用 API 1.1，您必须拥有一个 Twitter 帐户和一个[Twitter 应用程序](https://dev.twitter.com/apps)，然后[使用 OAUTH使用](https://dev.twitter.com/docs/auth/using-oauth)[GET statuses/show/:id](https://dev.twitter.com/docs/api/1.1/get/statuses/show/%3aid)来验证您的速率限制请求。我所知道的唯一选择是 RSS，Twitter 和 Facebook 都已将其杀死、带回并威胁要再次杀死：

```
http://api.twitter.com/1/statuses/user_timeline.rss?screen_name={USERNAME} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:40:03.400

我决定使用[Linq2Twitter](http://linqtotwitter.codeplex.com/)，因为它使用了`V1.1 API`.

将授权凭据存储在对象中的`MVCDemo`示例，但我可以将对象存储在缓存中并为所有用户保留授权，这意味着他们不必授权任何东西。如果用户不受保护，则应该可以通过这种方式检索任何用户。`Linq2Twitter``SessionStateCredentials``Tweets``Tweet's`