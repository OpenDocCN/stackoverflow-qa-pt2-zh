# StackOverflow 问答 13718000-13718999

# c# - 无法更改日历可见性

> ID：13718004
> 
> 赞同：0
> 
> 时间：2012-12-05T07:06:40.577
> 
> 标签：c#, asp.net, visual-studio-2010

我有一个图像按钮，它应该切换最初设置为 false 的日历。这是 Page_Load 代码：

```
Calendar3.EnableViewState = false;

if (!IsPostBack)
{
    BindData();
} 
```

这是在图像按钮单击上。

```
 protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
 {
     if (Calendar3.Visible == false)
         Calendar3.Visible = true;
     else
         Calendar3.Visible = false;
 } 
```

日历在第一次单击时变得可见，如果再次单击该按钮，我将无法隐藏它。如何在每次单击按钮时更改日历控件的可见性属性。

PS：我正在使用更新面板中的日历控件和图像按钮进行回发，当我尝试调试时，可见性属性设置为每个 page_load 上日历标记的默认值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:09:16.450

删除线

```
Calendar3.EnableViewState = false; 
```

您可以简单地将按钮单击事件编写为：

```
Calendar3.Visible = !Calendar3.Visible; //toggle effect 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:21:33.750

您可以只使用客户端事件来更改日历控件的可见性，而不是使用服务器端事件。

例如。：

初始设置 style="display:none" 并使用客户端事件（**使用 jQuery**）切换它。

```
<script>
    $(function(){
        $("<%=Calendar3.ClientID%>").css("display", "none");
        $("<%=ImageButton1.ClientID%>").on("click", function(){
         $("<%=Calendar3.ClientID%>").toggle();
        });
    });
<\script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:12:22.730

Calendar3.Visible 返回一个布尔值，所以不需要

`if (Calendar3.Visible == false)`

只是

```
if (!Calendar3.Visible) 
```

会做

# ruby-on-rails-3 - 在 databasedotcom gem 中使用多个访问令牌

> ID：13718005
> 
> 赞同：0
> 
> 时间：2012-12-05T07:06:45.520
> 
> 标签：ruby-on-rails-3, databasedotcom-gem

在谷歌搜索足够多（并且失败了！）之后，我想在这里发布这个问题。（有趣的是，在您根据您用于问题的主题开始发布您的问题之前，SO会显示所有匹配的问题。但没有帮助:(

反正我的情况是：

1.  通过登录到不同的 Orgs 来授权 rails 应用程序并保存返回的 access_token (AT)、refresh_token(RT) 和 instance_url(IU)。列表项
2.  根据我想要访问数据的用户，使用不同的 AT、RT 和 IU 对 databasedotcom (DBDC) gem 客户端进行身份验证。

但。

*第一次*使用 DBDC gem 进行身份验证后，如果我尝试使用不同的 AT、RT 和 IU 对不同的用户进行身份验证并访问数据，我仍然会得到*第一个*经过身份验证的用户的数据！

我尝试查看 DBDC gem 的代码，但也许我真的没有足够的经验，所以我找不到我面临的这个问题的任何解决方案/回溯。

对此的任何帮助/链接/指针将不胜感激！

PS：有趣的是，似乎有一个注销表单oauth会话的概念。没有在文档中的任何地方看到它，但仍在苦苦挣扎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:58:24.440

嘿嘿！我什么都没做（我知道）来修复它，并且我成功地能够使用不同的访问令牌（以前使用 OAuth 接收）在不同的组织之间切换！

宽慰 ！

PS：我确实尝试过使用 cURL（假设 DBDC 可能正在存储旧令牌并重用），但是当我在使用 cURL 成功后尝试时突然间，它也可以与 DBDC 一起使用。

# matlab - 删除矩阵中第一个二维中的重复项，matlab

> ID：13718006
> 
> 赞同：2
> 
> 时间：2012-12-05T07:06:51.400
> 
> 标签：matlab

我有一个大小为 3XN 的矩阵。矩阵中的每一列都是一个 3d 点。我想删除重复项，我只关心前 2 个维度中的重复项。如果存在重复点（即 x,y 相同），我想选择第三维（z 坐标）中值最高的点。例如：（前 2 个维度是前 2 行）

```
M = [ 1 1 1 2 3 4 5 5 ;
      4 4 4 6 6 3 2 2 ;
      3 4 5 3 4 5 7 8 ];
          ^ ^ ^ ^   ^ 
```

我想得到：

```
Res = [ 1 2 3 4 5 ;
       4 6 6 3 2 ;
       5 3 4 5 8] 
```

我需要它尽可能快地工作，因为矩阵非常大。所以，如果可能的话，不用排序。我正在寻找一个matlab“快捷方式”来做到这一点，而不需要循环或排序。谢谢matlabit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:34:47.763

这可以通过以下方式轻松有效地完成`accumarray`：

```
% - choose pairs of row/column indices - first two rows of M
% - accumulate using MAX of the values in the third row - this step removes the duplicates
res = accumarray(M(1:2,:)', M(3,:)', [], @max);

% i/j indices of non-zero entries in the result matrix are
% the unique index pairs, and the value is the maximum third row
% value for all duplicates
[i, j, v] = find(res);

% construct the result matrix
[i j v]'

ans =

 5     4     1     2     3
 2     3     4     6     6
 8     5     5     3     4 
```

如果您的索引非常大并且`res`由于内存原因无法创建矩阵，则可以使用`accumarray`函数的稀疏版本 - 它创建一个稀疏矩阵，它只存储非零条目。其余的保持不变：

```
res = accumarray(M(1:2,:)', M(3,:)', [], @max, 0, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:17:51.667

扫描前 2 行并将元素插入到`max-heap`. 插入时，您可以即时检查元素是否已存在（在这种情况下不要将其插入堆中）。如果存在，将其与当前最大值进行比较，并在需要时设置为最大值。最终的最大值是您寻求的结果。

构建堆的复杂性是`O(n)`并且检查最大值不会超出此边界。因此，与使用排序`O(n)`的 if 相比，总时间复杂度为。`O(nlogn)`还需要额外的`O(n)`空间。

# iphone - 需要在卡号文本字段中编辑空格

> ID：13718007
> 
> 赞同：0
> 
> 时间：2012-12-05T07:06:51.637
> 
> 标签：iphone, uitextfield

我在带有数字键盘的文本字段中将信用卡号显示为 4111 1111 1111 1111，并且空格以编程方式附加。在从左侧编辑文本字段时，我无法编辑卡号之间的空格。

我以编程方式在卡号之间添加空格。如何通过单击数字键盘中的退格键来删除空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:31:36.480

对于此任务，您必须制定自己的逻辑，我正在告诉`delegate`方法，并且在此方法中您必须实现您的逻辑

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    //Just implement your logic here
    return YES;
} 
```

ufff 它太复杂了亲爱的，但我解决了它，享受..

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    static int i =0;
    if (![string isEqualToString:@""])
    {
        if (i==4) {
            NSString *yourString = [NSString stringWithFormat:@"%@ ",textField.text];
            textField.text=yourString;
            i=0;
        }
        i++;
    }
    else{
        NSArray *ary = [textField.text componentsSeparatedByString:@" "];
        NSString *str = [ary lastObject];
        if (str.length > 0) {
            i--;
        }
        else{
            i = 4;
        }
        NSLog(@"Rajneesh071");
    }
    return YES;
} 
```

# mysql - 如何检索创建的 ID 列表以在 Active Record 中批量插入？

> ID：13718013
> 
> 赞同：6
> 
> 时间：2012-12-05T07:07:19.853
> 
> 标签：mysql, ruby-on-rails, activerecord, insert, has-many

我有三个模型：

```
class Coupon < ActiveRecord::Base
  belongs_to :event
  has_many :coupon_events, :dependent => :destroy
  has_many :events, :through => :coupon_events
end 

class Event < ActiveRecord::Base
  belongs_to :event
  has_many :coupon_events, :dependent => :destroy
  has_many :coupons, :through => :coupon_events
end

class CouponEvent < ActiveRecord::Base
  belongs_to :coupon
  belongs_to :event
end 
```

我通读了一个 CSV 文件以创建优惠券和优惠券事件。这是非常低效的，因为一次创建一个记录并导致多个查询，每个查询都包括两个插入语句。

我想使用这样的单个插入查询：

```
coupon_string = " ('abc','AAA'), ('123','BBB')"
Coupon.connection.insert("INSERT INTO coupons (code, name) VALUES"+coupon_string) 
```

然后我需要为 CouponEvent 模型创建第二个插入查询，但我需要返回的 coupon_ids 的列表。是否有内置方法可以在插入时检索 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T14:10:55.943

目前，最好（但不理想）的解决方案是使用["activerecord-import"](https://github.com/zdennis/activerecord-import "主动记录导入")进行批量导入。不幸的是，该 gem 不会返回插入的 id，因此您必须转身查询才能获取 id。也就是说，您将批量插入事件模型，查询数据库以将它们全部恢复到内存中。现在您有了事件 ID，因此您可以创建优惠券并批量插入它们。为 CouponEvents 重复冲洗泡沫。

与每个事件、Coupon 和 CouponEvent 一次往返相比 - 对于具有数千行的文件可能有数千次往返 - 每个模型只执行 2 次往返 - 一个用于插入事件，一个用于使用 id 取回事件，同上 Coupon 和 CouponEvent - 共 6 次往返。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:25:52.763

实际上我不确定这个 colud 是否有效（如果它创建一个插入查询），但您可以尝试使用`#create`带有参数数组的方法：

```
new_coupons = Coupon.create([
  { :code => "abc", :name => "AAA" },
  { :code => "123", :name => "BBB" }
])

CouponEvent.create([
  { :enevt_id => ..., coupon_id: ...},
  ...
]) 
```

要为 CouponEvent 创建参数列表，您需要将返回的 new_coupons 集合映射到 id 并根据优惠券代码/名称添加 event_id（取决于它存储在 CVS 文件中的方式）。

**更新**：

我自己检查过，如果第一个解决方案不起作用（我的代码中没有简单的模型没有唯一性约束，所以我没有检查过），并且你使用 PostgreSQL，你总是可以做这样的事情：

```
res = Coupon.connection.execute(<<-EOSQL)
  INSERT INTO coupons (code, name)
  VALUES #{values}
  RETURNING id, code
EOSQL 
```

您需要最后一个“返回”子句，因此您可以获取插入的 id 以及插入行的代码。您需要映射结果集：

```
res.map {|row|
  { :coupon_id => row["id"],
    :event_id => events.find { |e| e.coupon_code == row["code"] }
  }
} 
```

SQL 中没有标准的方法来返回插入行的列，“RETURNING”子句仅在 PostgreSQL 中有效，因此如果您使用不同的数据库，则需要检查文档或一一插入行。

您也不能使用`connection.insert`，因为在 ActiveRecord 中它只返回一个插入行的 id，而不是所有行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T19:26:33.310

这样做的方法是插入具有唯一`import_id`值的记录。步骤是：

1.  向表中添加一`import_id`列。可能是`INT`或`VARCHAR`取决于您如何生成随机 ID。

2.  在第一个之前`INSERT`，生成一个随机ID。

3.  执行第一个 multi-value ，对每一行`INSERT`使用相同的值。`import_id`

4.  `SELECT id FROM first_table WHERE import_id=<the random import ID>`

5.  `INSERT`使用返回的 ID生成第二个多值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-29T01:20:49.647

connection.insert 只返回一个id，公用表表达式对我有用

```
 insert_sql = <<-SQL
      WITH inserted_ids AS (
        INSERT INTO clients (email, name) VALUES #{array.join(', ')}
        RETURNING id
      )
      SELECT * FROM inserted_ids
    SQL
    result = ActiveRecord::Base.connection.execute(insert_sql) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-05T08:51:34.053

如果您使用的是 mysql 并且没有在另一个脚本/进程中插入更多行，则可以使用 last_insert_id() 获取插入的第一行的 id

```
 first_id = ActiveRecord::Base.connection.execute("select last_insert_id()").first[0] 
```

然后依次生成其他记录的id。

IE

```
 data = %w(one two three)
    to_insert = "('" + data.join("'), ('") + "')"
    Model.connection.insert("INSERT INTO models(name) VALUES #{to_insert}")
    first_id = ActiveRecord::Base.connection.execute("select last_insert_id()").first[0].to_i
    hash = {}
    data.each_with_index {|d, i| hash[first_id + i] = d} 
```

# .htaccess - 两个域，一个 .htaccess，一个从 cookie 中释放

> ID：13718014
> 
> 赞同：1
> 
> 时间：2012-12-05T07:07:26.973
> 
> 标签：.htaccess, subdomain, cookieless

我有两个域都指向`/var/www`：

*   `www.example.com`: 主域，有 cookie
*   `static.example.com`：静态内容的无cookie域

我现在想使用以下行`static.example.com`从 cookie 中释放域：`.htaccess`

```
RequestHeader unset Cookie
Header unset Set-Cookie 
```

**我的问题：**

由于两个域共享一个`.htaccess`文件：如何确保这些行仅适用于`static.example.com`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:29:13.663

你有几个选择。让我按我的喜好顺序展示一些：

1）为每个域创建专用文件夹，您的服务器服务。然后，您还可以以不同的方式配置每个。

2) 正确设置cookies。浏览器只会将 cookie 附加到对正确域的请求 - 所以不要设置 cookie 域`example.com`，而是使用`www.example.com`和做你的请求的域名规范化 - 所以将所有请求永久重定向`http://example.com`到`http://www.example.com`

`mod_rewrite`3）使用`CO`开关取消设置特定的cookie 。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/10000587/unsetting-a-cookie-in-mod-rewrite)。

# c# - 为 C# 使用包装类

> ID：13718015
> 
> 赞同：1
> 
> 时间：2012-12-05T07:07:27.737
> 
> 标签：c#, .net, dll

这可能是一个显而易见的问题，但是我应该将 .NET 包装类 SoundTouchNet 的 dll 放在哪里，以便在 C# 项目中使用？我将 .dll 复制到 Windows/Microsoft.NET/assembly/GAC_MSIL，但是当我输入“使用 SoundTouchNet”时，编译器找不到它。这是网站：[http ://code.google.com/p/soundtouchnet/](http://code.google.com/p/soundtouchnet/)

我下载了 C++ SoundTouch 库的 dll，并将 .lib 放在 VC/lib 中，将 .h 放在 VC/include 中，将 .dll 放在 System32 中。这也对吗？

谢谢！

编辑：有谁知道如何将 SoundTouchNet 库与 C++ SoundTouch 连接起来？如前所述，我现在已经成功地将 SoundTouchNet 引用添加到项目中。怎么办？我是否需要对 SoundTouch 库做任何事情，还是独立于它？非常感谢您的所有回复！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T07:11:28.997

我认为您错过了将该 DLL 的引用添加到项目中。添加对您的项目的引用

```
Project>  Reference > Add Reference > Browse > Select the DLL 
```

有关更多信息，[请参阅此链接](http://msdn.microsoft.com/en-us/library/7314433t%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:13:13.543

`using`了解程序集引用和指令之间的区别很重要。`using`指令如

```
using SoundTouchNet; 
```

*只需*导入名称空间以在该源文件中使用。这意味着如果你有一个名为 的类`SoundTouchNet.Foo`，你可以`Foo`在代码的其他地方编写。

尽管程序集通常在名称空间中包含与程序集名称匹配的类型（例如`Foo.Bar.dll`，通常会在`Foo.Bar`名称空间中包含类型），但这*只是*约定——这两种名称是完全分开的。

要首先使该类型可用，您需要添加对包含它的程序集的*引用。*假设您使用的是 Visual Studio，请转到解决方案资源管理器，右键单击类似“引用”文件夹的图标，然后选择“添加引用”。就我个人而言，我通常避免使用 GAC，只是添加对同一解决方案中的其他项目或特定文件的引用（我通常将其放在一个`lib`目录中以保持理智）。您还应该考虑使用[NuGet](http://nuget.org)进行包管理 - 许多开源库现在都以 NuGet 包的形式提供。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T07:09:41.967

尝试添加对 dll 文件的引用。

`using Sound...``SoundTouchNet.RandomFunction()`简单地消除了每次写入的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:11:49.050

您需要在全局程序集缓存中注册您的外部 dll，

```
 gacutil.exe /i [Assembly] 
```

调用很简单，这里是参考[http://msdn.microsoft.com/en-us/library/ex0ss12c(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ex0ss12c(v=vs.80).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T07:13:39.990

如果您使用的是 Visual Studio：

检查 MSDN 中的“如何：在 Visual Studio (C#) 中添加和删除引用”：

[MSDN - 添加/删除引用](http://msdn.microsoft.com/en-us/library/7314433t%28v=vs.90%29.aspx)

# java - 使用 OpenNLP 训练大型数据集

> ID：13718026
> 
> 赞同：1
> 
> 时间：2012-12-05T07:08:16.677
> 
> 标签：java, nlp, opennlp

我有带有`.train`文件的数据集，它的文件非常大，比如 100MB 文件。我想执行 NER 来提取组织名称。我使用 OpenNLP 进行了培训。

示例代码：

```
TokenNameFinderModel model=NameFinderME.train("en","organization",
              sampleStream,Collections.<String, Object>emptyMap()); 
```

但我得到一个错误：`ArrayIndexOutofBoundException`。

有没有办法使用 openNLP 为 NER 训练大型数据集？你能发布示例代码吗？

当我用 Google 搜索时，我发现 Class GIS 和 DataIndexer 接口可用于训练大型数据集，但我知道怎么做吗？你能发布示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:58:18.130

我可以毫无问题地创建具有更大数据的模型。您的 .train 文件中的标记可能有问题。另外，如果您可以发布完整的例外情况会有所帮助吗？

为了训练更大的模型，我只需校准截止并增加 Java 内存。

# jquery - jQuery qrcode 不适用于 Internet Explorer 8

> ID：13718033
> 
> 赞同：1
> 
> 时间：2012-12-05T07:08:46.070
> 
> 标签：jquery, internet-explorer-8, qr-code

有一个不错的插件 QR Code：“ [https://github.com/lrsjng/jQuery.qrcode](https://github.com/lrsjng/jQuery.qrcode) ”。在 Firefox 和 Chrome 中运行成功，但在 Internet Explorer 8.0 中，我在 Line 中遇到错误：

此行的消息是：“对象不支持此属性或方法”。

完整的代码是：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="../jQuery/qrcode.js"></script>
        <script type="text/javascript">                   
            $(document).ready(function(){     
                $('#qrcode').qrcode("this plugin is great");
            });                 
        </script>
    </head> 
    <body>         
        <div id="qrcode" style="width:100px;height: 100px"></div>
    </body>
</html> 
```

大家有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:51:42.863

jQuery [QRCode 插件](http://jeromeetienne.github.com/jquery-qrcode/)的网站有一个[示例](http://jeromeetienne.github.com/jquery-qrcode/examples/basic.html)页面，可以在`<table>`和`<canvas>`. table 选项在 IE8 中有效，您可以使用它代替 canvas 以获得完全兼容性（或者您可以在检查浏览器类型和版本后编写切换代码）。

这是在 a 中呈现 QR 码的示例代码`<table>`：

```
<script>
    jQuery('#qrcodeTable').qrcode({
        render  : "table",
        text    : "http://jetienne.com"
    }); 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:16:34.433

使用这个`QRCode`jquery 插件，它依赖于`canvas`对象，因为它在 IE8 中不可用，你可能会得到这个`error object does not support this method or property`。

当我调试这段代码时，我得到了在线错误

```
canvas.getContext('2d'); 
```

所以，这个插件可能无法在 IE8 中运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T10:00:56.697

我已经在 Internet Explorer 10 中使用画布进行了测试，它可以正常工作......即使我选择“允许阻止的内容”，QR 码也会显示在 Internet Explorer 8 中。

# android - android Viewpager 一次只加载一页

> ID：13718038
> 
> 赞同：3
> 
> 时间：2012-12-05T07:09:06.403
> 
> 标签：android, android-viewpager

[ViewPager.setOffscreenPageLimit(0) 无法按预期工作](https://stackoverflow.com/questions/10073214/viewpager-setoffscreenpagelimit0-doesnt-work-as-expected)

喜欢这个问题。但我需要一个自定义的 Viewpager 来按时加载一页。有什么例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T07:22:10.500

是的，您可以通过以下步骤执行此操作

*   `count`首先在适配器类中创建一个变量
*   `ViewPager`适配器中的第二个`public`函数说`setCount()`
*   `getCount()`并且在Adapter的覆盖函数中`return`的`count` 变量
*   现在用户翻页时`override`的on`pageScroll()`函数可以调用增加 count变量的`ViewPager``setCount()``count`
*   还要检查当前`index`是否是最后一个页面是否向左滚动

这应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:32:41.420

根据您想要实现的目标（如果只是为了节省内存或降低加载时​​间），您也可以照常加载所有页面，但仅在片段实际显示时才加载片段的内容。

# cookies - Google Analytics Cookie 的平均时间

> ID：13718039
> 
> 赞同：0
> 
> 时间：2012-12-05T07:09:08.577
> 
> 标签：cookies, google-analytics, session-cookies

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:31:30.547

__utmc 已弃用。您必须使用 __utmz 广告系列价值。

# mysql - 我的 SQL 升级到 5.5 版本的问题

> ID：13718044
> 
> 赞同：0
> 
> 时间：2012-12-05T07:09:21.980
> 
> 标签：mysql, mysqldump

我正在尝试从 5.1 升级到 5.5，但是在转储和恢复时，我遇到了不同模式中的视图的一些问题。

它抛出一个错误：

> '无法执行'SHOW FIELDS FROM `---view`'：查看'schemaname。*** **视图'引用无效的表或列或函数或视图的定义者/调用者缺乏使用它们的权利 (1356)'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:10:50.397

转储无效视图时可能出错。使用命令检查这些视图`SHOW CREATE VIEW`，或使用来自`information_schema.views`. 检查定义器（即 MySQL 用户帐户）是否正确。

# sql - Linq sql查询未实现

> ID：13718050
> 
> 赞同：0
> 
> 时间：2012-12-05T07:09:50.997
> 
> 标签：sql, linq

```
 int no = 10;
            var duplicate = from m in context.PreferredFeedUserCompaniesFollwers
                            group m by new {m.CompanyID} into grp
                            where grp.Count()>no
                            select new {grp} 
```

我需要获取表中存在的所有comapnyids（一个或多个），其计数与我通过no动态给出的计数匹配。我无法完成任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:12:48.240

companyId 是您分组的关键，所以

```
var duplicate = from m in context.PreferredFeedUserCompaniesFollwers
                            group m by m.CompanyID into grp
                            where grp.Count()>no
                            select  grp.Key; 
```

顺便说一句，你不需要使用

```
group m by new {<your property>} 
```

如果您仅按一个属性分组。

# java - 如何更改谷歌应用程序联系人api中的图片？

> ID：13718051
> 
> 赞同：1
> 
> 时间：2012-12-05T07:09:53.140
> 
> 标签：java, gdata-api, google-contacts-api

* ***我想更改联系人 api 中的图片，但我遇到了一些异常，请检查我的代码

```
String filepath="C:\\Users\\bhanuprasad\\Documents\\Downloads\\549002_459129587462191_1689883124_n.jpg";
    File file = new File(filepath);

    byte[] photoData = new byte[(int) file.length()];
String url="https://www.google.com/m8/feeds/profiles/domain/"+ sDomain + "/full/pcvita1111qaeteam10?xoauth_requestor_id=appsadmin@soharcoas.com" ;
    ContactEntry profile = contactService.getEntry(
            new URL(url),ContactEntry.class);
 GDataRequest request = contactService.createRequest(GDataRequest.RequestType.UPDATE,
          photoUrl, new ContentType("image/jpeg"));

      request.setEtag(photoLink.getEtag());
    OutputStream requestStream = request.getRequestStream();
      requestStream.write(photoData);
     request.execute(); 
```

当我调用 request.execute(); 我有以下异常

com.google.gdata.util.InvalidEntryException：错误请求无效图像文件

```
at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:594)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:563)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:552)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:530)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:535) 
```

请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:46:10.697

我没有看到任何实际读取您的图像的代码。您只需使用文件的长度初始化字节数组。大概一个未初始化的文件只是不是一个有效的图像。将实际的照片数据放入您的字节数组中，它应该可以工作。

# jquery - 在 IE9 和 Opera 中显示标题

> ID：13718052
> 
> 赞同：1
> 
> 时间：2012-12-05T07:10:07.190
> 
> 标签：jquery, css, svg, cross-browser, raphael

我使用带有 Raphael 的 svg 制作了一个网站[http://zielonyzoliborz.pl/](http://zielonyzoliborz.pl/)，当您将鼠标悬停在屏幕上（FF、Chrome、Safari）上但不在 IE9 和 Opera 中时，我什至为IE8 可以工作但不是上述浏览器

我正在使用 Raphael.js 设置一个简单的标题，例如：

```
paper.path("M1345.5,413.5l0.125-31.125L1256.5,371l-18,22.5l1,22L1038,389.333l-3,3.333l-62,53V454 l-13,11.333v34.333l-42.333-7l-85.333,77v8.667l-14,12v95L821,689v5.25l3.25,2.75v9h5.5l1.25-5.25V697l3-2l2.75-3.875l2-2.625v-4.75 l3-3l3.5-2.75l6.5,0.25l1.75,1.25l2.5,1.75l2.75,4.75v4v2.25V694l2.5,2.25V701v5.75v3.75v2.5l3,1.25H867v-4.75V703v-4.25v-6.25 l2.75-2l1.25-6l3.25-2.5l2.25-5.75h4h3.75l2.5,4.75l1.75,3l1.25,3v5.75l2.5-2.75l3.25-0.25l4-3.25l2.25-1h3.5l3.25,0.75l1.5-4.5 c0,0,3.75-1.5,4.5-0.5s3,1.75,3,2.5s0.75,3,1.75,3.25s4.5,2.5,4.5,2.5s-0.25,3.75,0,4.5s1.25,4.25,1.25,4.25l2,2.5 c0,0,5,0.75,5.75,1s3-1.25,3-1.25l1.5-3.5l3-1.75l2-2.75H945l3.25,0.25h4.25l2.75-1l2.5,1.5c0,0,1.5,3.25,2.25,4s4,4.5,4,4.5 l2.25,4.5l1.75,1.25l4.75-0.5l2.25-4.75v-3.5l3-1.5l3.75,0.25c0,0,3.25,2.25,3.25,3.25s3.5,4.5,3.5,4.5l1.5,4.5l1.5,5.75l2,5v5.25 l3,2h3.25l3.75-2.5h3.75l2.5-1.5l2.5-2.75h3.75l4.75,2.75v3v4L1024,734v5.25v3.25v2l4.25-4.75c0,0,3-1.25,4-1.25s5.25-1,5.25-1 l-2-4.75l2-2.25l2-1.75l-5.75-2.5l-0.25-4l3-1.25l1.25-4.75l3-2.25l4.25-2.5l3.5-1.125l5,1.125l4,3l4.25,3l2.25,4l2.5,2v5.5l4,3.75 l2,2.75l1.75-0.25l2.75-2l1.25-4.75l3.25-4.25l2.5-3.25l2.729-2.25l2.021-2.25h3.75l3.5,1.5l3,3.5v5l2.5,1.25l1.75-3.25l4.25-1.5 h3.5l4.5,3.25l2.75,4.75l1.5,3.75l3.75,0.75l3,3.25l5.75,5.75l1.75,2.25l1.25,3.5v5.25l2.5,2.25l2.25,2.75h8.25h4.25l3.75,1.75 l3,2.5V767l3.25,4.75l2-4.5l3.75-3l2.5-8.5v-4.25c0,0,3.25-2.25,3.25-3s3.5-3.75,3.5-3.75l3.75-1.75l2-3.25V736l5.25-1.5l5-4.75h3.5 l3.25,1l2.75,2.5l3,2.5l1.25,6l1.5,3.5V749c0,0,2,2.5,1.75,3.25s-1,5.5-1,5.5l1.021,6c0,0,0.838,1.598,1.66,2.892l142.326-236.143 l0.617-116.749L1345.5,413.5z M1116,536h-4.667l0.042,6.375l-13.375,14.5v22.375l-68-10.917l35-41.667l26.667,5l5.666-2.667 l3.709-1.854l4.958-0.083l5.125,0.688l3.542,2.583l3,2.667L1116,536z").attr({
"fill":"#FBA919",
"stroke-width":0,
"fill-opacity":0,
"stroke":"transparent",
"cursor":"pointer",
"title":"Budynek B"
}).mouseover(
function(){
this.animate({
"fill-opacity":.4
},300);
}).mouseout(function(){
this.animate({
"fill-opacity":0
},300);
}); 
```

和 easytooltip.js 显示图形标题（FF。Chrome，Opera）

```
$('svg a:nth-child(21)').easyTooltip({
tooltipId:"budynek-b",
yOffset:90,
xOffset:-44,
});

#budynek-b{
background:url(../img/zz_budynekB_smal.png) no-repeat center center;    
width:60px;    
height:86px;    
overflow:hidden;    
text-indent:-9999px;    
z-index:1000000
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:59:39.827

您的代码中有一个 javascript 错误（这是从 Opera Dragonfly 调试工具复制而来的）：

```
Uncaught exception: TypeError: Cannot convert 'b' to objectError thrown at line 1210, column 3 in <anonymous function: _getDisplayTextForRecordField>(b, a) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    var c = this.options.fields[a],
called from line 1155, column 3 in <anonymous function: _createCellForRecordField>(b, a) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    return c('<td class="' + this.options.fields[a].listClass + '"></td>').append(this._getDisplayTextForRecordField(b, a) || "")
called via Function.prototype.apply() from line 2476, column 3 in <anonymous function: _createCellForRecordField>(a, b) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    var c = d.apply(this, arguments);
called from line 1152, column 4 in <anonymous function: _addCellsToRowUsingRecord>(b) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    this._createCellForRecordField(b.data("record"), this._columnList[a]).appendTo(b)
called via Function.prototype.apply() from line 1757, column 3 in <anonymous function: _addCellsToRowUsingRecord>(a) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    f.apply(this, arguments);
called via Function.prototype.apply() from line 1990, column 3 in <anonymous function: _addCellsToRowUsingRecord>(a) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    f.apply(this, arguments);
called via Function.prototype.apply() from line 2120, column 3 in <anonymous function: _addCellsToRowUsingRecord>(a) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    f.apply(this, arguments)
called from line 1147, column 3 in <anonymous function: _createRowFromRecord>(b) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    this._addCellsToRowUsingRecord(b);
called from line 1160, column 4 in <anonymous function: _addRecordsToTable>(b, d) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/plugins.js:
    a._addRowToTable(a._createRowFromRecord(d))
called via Function.prototype.call() from line 608, column 7 in <anonymous function: each>(a, c, d) in http://zielonyzoliborz.pl/wp-content/themes/zielonyzoliboz/js/jquery-1.7.2.min.js:
    if (c.call(a[g], g, a[g++]) === !1) 
```

我的猜测是缺少的工具提示与该错误有关。

**更新**：好的，在修复之后我又看了一眼，问题是元素`title`上属性的命名空间。`<svg:a>`如果使用命名空间感知方法来访问属性，它就可以工作。

黑客/解决方法是这样的：

```
var title = $(this).attr("title") || this.getAttributeNS("http://www.w3.org/1999/xlink", "title"); 
```

这将被放置在您的`plugin.js`脚本中（这显示了修改后的代码）：

```
$.fn.easyTooltip = function(options){

    // default configuration properties
    var defaults = {    
        xOffset: 10,        
        yOffset: 25,
        tooltipId: "easyTooltip",
        clickRemove: false,
        content: "",
        useElement: ""
    }; 

    var options = $.extend(defaults, options);  
    var content;

    this.each(function() {                  
        var title = $(this).attr("title") || this.getAttributeNS("http://www.w3.org/1999/xlink", "title");
        $(this).hover(function(e){                                                                         
            content = (options.content != "") ? options.content : title;
            content = (options.useElement != "") ? $("#" + options.useElement).html() : content;
            $(this).attr("title","");                                                   
            if (content != "" && content != undefined){         
                $("body").append("<div id='"+ options.tooltipId +"'>"+ content +"</div>");      
                $("#" + options.tooltipId)
                    .css("position","absolute")
                    .css("top",(e.pageY - options.yOffset) + "px")
                    .css("left",(e.pageX + options.xOffset) + "px")                     
                    .css("display","none")
                    .fadeIn("fast")
            }
        }, 
```

此处的更改是`getAttributeNS`在 jQuery`.attr`方法失败时回退（隐藏浏览器差异如此之多，嗯？；）。有了它，它至少在 Opera 中有效。真正更好的解决方法是确保设置属性的地方要么将它们设置在空命名空间中，例如，`elm.setAttributeNS(null, "title", "some-value")`要么让 jQuery 命名空间感知（但我不认为这种情况发生的可能性特别大）。

# java - 将最小化/最大化按钮添加到 JDialog 或 JPanel

> ID：13718054
> 
> 赞同：6
> 
> 时间：2012-12-05T07:10:19.610
> 
> 标签：java, swing, jpanel, jdialog

是否可以向 JDialog 添加最大化/最小化按钮？如果没有，那么我们可以将这些按钮添加到 JPanel 吗？

我有一个 JPanel，在那个面板里面有一个 JDialog。我想添加一个最小化/最大化按钮，这样当单击该按钮时，JDialog 和 JDialog 下的组件会根据 JPanel 进行调整。就像当我单击最大化时，jpanel 应该被放大并且该面板（JDialog）内的组件也被放大，反之亦然最小化按钮。我从这里得到的解决方案是 JFrame 中的 JPanel。但我的 JPanel 只是独立的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T07:16:40.567

> 是否可以向 JDialog 添加最大化/最小化按钮？

*   不，不要那样做，（即使有一些肮脏的黑客）你可以`JDialog.setUndecorated`添加所需的 Windows 装饰，注意 JDialog/JWindow 的资源来自本机操作系统，`SystemLookAndFeel`仅适用于并且可能是`CrossPlatfor`m 敏感的

> 如果没有，那么我们可以将这些按钮添加到 JPanel 吗？

*   是的，但是你可以使用`JOptionPane`和修改内容，你也可以在那里放置任何`JComponents`和/返回值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T07:12:52.017

`JDialog`： 不。

`JPanel`：是的，只需在侦听器中`JButtons`设置`JFrame#setMaximizedState`值，而不是在`JDialog`.

# drop-down-menu - yii 文本字段和下拉菜单

> ID：13718056
> 
> 赞同：0
> 
> 时间：2012-12-05T07:10:25.303
> 
> 标签：drop-down-menu, yii, textfield

```
<td><?php echo $form->textField($model,'SO_month'); ?><?php echo $form->dropDownList($model,'SO_month',array('Months'=>'Months','Years'=>'Years'),array());?></td> 
```

我不明白。我的表格是这样工作的我得到选定的单选按钮的整数。请帮帮我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:51:51.253

您对*textField*和*dropDownList使用相同的***属性**。您需要为模型添加一个附加属性（可能**是 date_type**）

 ****```
class MyModel extends CActiveRecord {
     public $date_type;
     ... 
```

然后执行以下操作：

```
<td>
    <?php echo $form->textField($model,'SO_month'); ?>
    <?php echo $form->dropDownList($model,'date_type',array('Months'=>'Months','Years'=>'Years'),array());?>
</td> 
```

然后在提交表单的操作中，您可以简单地检查选择了哪种类型并根据需要进行处理：

```
if ($model->date_type == "Years"){
    $model->SO_month = $model->SO_month * 12;
} 
```****

# javascript - 如何使用 javascript window.open 方法隐藏/消失地址栏？

> ID：13718057
> 
> 赞同：3
> 
> 时间：2012-12-05T07:10:27.600
> 
> 标签：javascript

我有一个页面，其中包含一个我想在新窗口中打开它的链接，它工作得很好，唯一的问题是地址栏仍然出现，而我已经设置了值'location = no' 下面是其中的代码我在工作...

```
function openWindow() {

    window.open('somepage.html',abc,'scrollbars=yes,width=600px,height=450px,location=no');

} 
```

# php - 从一维数组展平数组

> ID：13718059
> 
> 赞同：-4
> 
> 时间：2012-12-05T07:10:36.273
> 
> 标签：php

你好我的数组是这样的

```
Array(['a1','aa1','1'],['a2','aa2','2'],['a3','aa3','3'],['a4','aa4','4']) 
```

我需要的数组

```
 Array(['a1','1'],['aa1',[1]],['a2','2'],['aa2','2'],['a3','3'],['aa3','3'],    
 ['a4','4'],['aa4','4']) 
```

我的要求是我将得到 1 & 3,2 & 3 组合的数组

请帮我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:15:33.003

```
$b = array();
foreach ($a as $elem) {
    b[] = array($elem[0], $elem[2]);
    b[] = array($elem[1], $elem[2]);
} 
```

# java - 使用其他控件将视频添加到 JFrame 中间

> ID：13718066
> 
> 赞同：0
> 
> 时间：2012-12-05T07:11:07.100
> 
> 标签：java, swing, opencv, javacv

我有一个`JFrame`包含几个按钮的窗口。我还想将来自 javacv (opencv) 的视频源添加到帧的中间。我当前的示例将视频放在画布上。我想知道如何将画布添加到框架的中心，或者是否可以将视频添加到 a`JPanel`或其他内容，然后将其添加到框架中。

任何建议，将不胜感激

```
import javax.swing.JFrame;
import javax.swing.JPanel;

import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.cpp.opencv_core.*;
import com.googlecode.javacv.OpenCVFrameGrabber;
import static com.googlecode.javacv.cpp.opencv_core.cvFlip;

public class demo_video extends JFrame {

 public static void main(String[] args) {
  //Create canvas frame for displaying webcam.
     CanvasFrame canvas = new CanvasFrame("Webcam"); 
  //Set Canvas frame to close on exit
     canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);   
     //Declare FrameGrabber to import output from webcam
     FrameGrabber grabber = new OpenCVFrameGrabber(0);  
     try {      
      //Start grabber to capture video
      grabber.start();      
      //Declare img as IplImage
      IplImage img;

      while (true) {
       //inser grabed video fram to IplImage img
       img = grabber.grab();

       //Set canvas size as per dimentions of video frame.
       canvas.setCanvasSize(grabber.getImageWidth(), grabber.getImageHeight()); 

       if (img != null) {      
         //Flip image horizontally
         cvFlip(img, img, 1);
        //Show video frame in canvas
        canvas.showImage(img);               
        }
       }
      }
     catch (Exception e) {      
     }
    }
} 
```

# vbscript - 如何使用 VBscript 对日期值进行排序

> ID：13718067
> 
> 赞同：1
> 
> 时间：2012-12-05T07:11:13.920
> 
> 标签：vbscript

我有麻烦了。我有一个要求，我需要使用 VB 脚本对日期值进行排序，但我找不到如何去做。

我的示例代码如下：

```
Option Explicit

Dim Date1,Date2

Date1=#9/14/2012  1:15:20 AM#
Date2=#9/15/2012  2:36:49 PM#

If Date1>Date2 Then

 MsgBox("Hi")

Else

 MsgBox("Hello")

End If 
```

但是上面的代码在我运行它时没有产生正确的消息。有人能帮我一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:52:48.133

我看不出有任何问题：

```
>> Date1=#9/14/2012  1:15:20 AM#
>> WScript.Echo Date1
>> Date2=#9/15/2012  2:36:49 PM#
>> WScript.Echo Date2
>> WScript.Echo CStr(Date1 > Date2)
>> WScript.Echo DateDiff("s", Date2, Date1)
>> WScript.Echo DateDiff("h", Date2, Date1)
>> WScript.Echo DateDiff("d", Date2, Date1)
>>
14.09.2012 01:15:20   <-- german locale
15.09.2012 14:36:49
False
-134489
-37
-1 
```

# android - 在 Android 中滚动时阻止 Listview Cell 刷新？

> ID：13718073
> 
> 赞同：1
> 
> 时间：2012-12-05T07:11:32.467
> 
> 标签：android, listview

我在每一行都有一个带有 Toggle Button 的 Listview。在滚动 Listview 时会刷新，因此每次滚动时 Toggle Button 的值也会发生变化？

我想在滚动之前将切换按钮的值保持为用户设置的 ON/OFF 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:18:06.497

```
On Scrolling the Listview got refreshed, 
```

这是`ListView`. 它实际上没有刷新，内存中`ListView`只有可见的（有一些偏移量）`Views`。并摧毁他人。

```
I want to keep that Toggle button value 
```

您需要跟踪切换按钮的状态。就像存储在`Local`arrayList 中一样。并更新适配器方法中的`togglebutton`状态。`getView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-27T08:21:21.827

在 getView 函数的第一行试试这个

```
 if (convertView != null) return convertView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:20:14.077

Use following: This will take care of your listView.

```
View vi = convertView;

if (convertView == null) {
            vi = inflater.inflate(R.layout.layoutFile, null);
            holder = new ViewHolder();
            holder.layout1 = (LinearLayout) vi
                    .findViewById(R.id.layoutcourse);
            holder.text = (TextView) vi.findViewById(R.id.text);
            holder.status = (ImageView) vi.findViewById(R.id.img_status);
            holder.date = (TextView) vi.findViewById(R.id.date1);
            holder.toggleButton = (ImageView) vi
                    .findViewById(R.id.toggleButton);
            vi.setTag(holder);
        } else

            holder = (ViewHolder) vi.getTag(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:17:42.610

您应该将 ListView 设置为使用`setChoiceMode()`(with `CHOICE_MODE_SINGLE`or `CHOICE_MODE_MULTIPLE`) 并使用实现 Checkable 的自定义行布局，这样 ListView 将记住哪些行已为您切换。

[在 ListView 行中的 CheckedTextView 复选标记未显示](https://stackoverflow.com/q/12125792/1267661)之前，我详细介绍了如何创建自定义 Checkable 布局。（这并不难，这种方法允许您使用任何内置适配器而无需扩展它。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T07:14:40.057

当您切换按钮时，您还应该刷新适配器的数据源。例如，如果您使用arraylist 来填充适配器，则在按钮上切换时，您必须更新您的arraylist。

如果防止行回收，也可以防止刷新列表视图。

# java - Tomcat session.ser

> ID：13718077
> 
> 赞同：2
> 
> 时间：2012-12-05T07:11:59.753
> 
> 标签：java, oracle11g, tomcat6, oracle-adf, oracleapplications

我正在使用 apache-tomcat6.0.24 ..和 Enterprise Linux Enterprise Linux Server 版本 5.6 来安装我的 EGRCM 应用程序。当我重新启动我的 tomcat 时，它会引发一些异常..问题是重新部署我的应用程序时它无法打开..请帮助我找出问题所在。

提前致谢。

问题将在下面显示

on.StandardManager doUnload SEVERE：IOException，同时保存持久会话：java.io.FileNotFoundException：/home/grc/grcapp/tomcat/work/Catalina/localhost/grc/SESSIONS.ser（没有这样的文件或目录）java.io.FileNotFoundException : /home/grc/grcapp/tomcat/work/Catalina/localhost/grc/SESSIONS.ser (没有这样的文件或目录) 在 java.io.FileOutputStream.open(Native Method) 在 java.io.FileOutputStream.(FileOutputStream. java:194) 在 java.io.FileOutputStream.(FileOutputStream.java:84) 在 org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:489) 在 org.apache.catalina.session.StandardManager.unload( StandardManager.java:463) 在 org.apache.catalina.session.StandardManager.stop(StandardManager.java:667) 在 org.apache.catalina.core.StandardContext.stop(StandardContext.java:4611) 在 org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:924) 在 org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1319) 在 org.apache.catalina.startup.HostConfig .stop(HostConfig.java:1290) at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:323) at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119) at org. apache.catalina.core.ContainerBase.stop(ContainerBase.java:1086) 在 org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1098) 在 org.apache.catalina.core.StandardEngine.stop(StandardEngine. java:448) 在 org.apache.catalina.core.StandardService.stop(StandardService.java:584) 在 org.apache.catalina.core.StandardServer.stop(StandardServer.java:744) 在 org.apache.catalina.startup.Catalina.stop(Catalina.java:643) 在 org.apache.catalina.startup.Catalina.start(Catalina.java:618) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun。 reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.apache.catalina .startup.Bootstrap.start(Bootstrap.java:289) 在 org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.catalina.startup.Bootstrap .start(Bootstrap.java:289) 在 org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.catalina.startup.Bootstrap .start(Bootstrap.java:289) 在 org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

2012-12-03 04:50:38,180 错误 [main] JuliToLog4jHandler:76 (org.apache.catalina.session.StandardManager:669) 2012 年 12 月 3 日上午 4:50:38 org.apache.catalina.session.StandardManager 停止严重：异常卸载会话到持久存储 java.io.FileNotFoundException：/home/grc/grcapp/tomcat/work/Catalina/localhost/grc/SESSIONS.ser（没有这样的文件或目录）在 java.io.FileOutputStream.open（ Native Method) at java.io.FileOutputStream.(FileOutputStream.java:194) at java.io.FileOutputStream.(FileOutputStream.java:84) at org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:489)在 org.apache.catalina.session.StandardManager.unload(StandardManager.java:463) 在 org.apache.catalina.session.StandardManager.stop(StandardManager.java:667) 在 org.apache.catalina.core。StandardContext.stop(StandardContext.java:4611) at org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:924) at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1319) at org .apache.catalina.startup.HostConfig.stop(HostConfig.java:1290) 在 org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:323) 在 org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport .java:119) 在 org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1086) 在 org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1098) 在 org.apache.catalina。 core.StandardEngine.stop(StandardEngine.java:448) 在 org.apache.catalina.core.StandardService.stop(StandardService.java:584) 在 org.apache.catalina.core.StandardServer。在 org.apache.catalina.startup.Catalina.stop(Catalina.java:643) 在 org.apache.catalina.startup.Catalina.start(Catalina.java:618) 在 sun.reflect 停止(StandardServer.java:744) .NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method .java:597) 在 org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289) 在 org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java: 25) 的 invoke0(Native Method)第597章）在org.apache.catalina.startup.Bootstrap.start（Bootstrap.java:289）在在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java: 25) 的 invoke0(Native Method)第597章）在org.apache.catalina.startup.Bootstrap.start（Bootstrap.java:289）在

2012-12-03 04:50:38,182 INFO [main] QuartzScheduler:186 停止调度程序 2012-12-03 04:50:38,182 INFO [main] QuartzScheduler:570 调度程序 AGScheduler_$_NON_CLUSTERED 关闭。2012-12-03 04:50:38,183 信息 [main] QuartzScheduler:496 调度程序 AGScheduler_$_NON_CLUSTERED 已暂停。

2012-12-03 04:56:47,756 错误 [main] JuliToLog4jHandler:76 (oracle.adf.mbean.share.config.ADFConfigLifeCycleCallBack:83) 2012 年 12 月 3 日上午 4:56:47 oracle.adf.mbean.share。 config.ADFConfigLifeCycleCallBack contextInitialized 严重：无法为 defaultApplicationName 注册配置 mbean。

2012-12-03 04:56:47,757 错误 [main] JuliToLog4jHandler:76 (oracle.adf.mbean.share.config.ADFConfigLifeCycleCallBack:84) 2012 年 12 月 3 日上午 4:56:47 oracle.adf.mbean.share。 config.ADFConfigLifeCycleCallBack contextInitialized SEVERE: oracle.jrf.UnknownPlatformException: JRF 无法确定当前应用服务器平台。在 oracle.jrf.ServerPlatformSupportFactory.getInstance(ServerPlatformSupportFactory.java:79) 在 oracle.adf.mbean.share.config.ADFConfigLifeCycleCallBack.contextInitialized(ADFConfigLifeCycleCallBack.java:79) 在 org.apache.catalina.core.StandardContext.listenerStart(StandardContext .java:3972) 在 org.apache.catalina.core.StandardContext.start(StandardContext.java:4467) 在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791) 在 org.apache.catalina。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T07:39:49.107

当 Tomcat 关闭时，Tomcat 试图将所有会话存储对象（可序列化）保存为一个名为 sessions.ser 的文件，以便在启动期间恢复该会话。

在启动期间，它将尝试读取 session.ser 文件以恢复会话。您的问题似乎是权限问题。尝试授予文件夹/home/grc/grcapp/tomcat/work/Catalina/localhost/grc 的读/写权限

使用 chmod

# c++ - Boost单元测试链接错误

> ID：13718080
> 
> 赞同：3
> 
> 时间：2012-12-05T07:12:20.730
> 
> 标签：c++, unit-testing, boost

我刚开始在 Windows 环境（Visual Studio 2010）中使用“增强测试”进行 C++ 单元测试。我按照本教程作为指导：

[http://legalizeadulthood.wordpress.com/2009/07/04/c-unit-tests-with-boost-test-part-1/](http://legalizeadulthood.wordpress.com/2009/07/04/c-unit-tests-with-boost-test-part-1/) 但是在包含boost`unit_test.hpp`文件后，它显示以下编译错误：

```
LINK : fatal error LNK1104: cannot open file 'libboost_unit_test_framework-vc100-mt-gd-1_52.lib' 
```

我的源代码是这样的：

```
#define BOOST_TEST_MAIN
#include <boost/test/unit_test.hpp> 
```

请提供有关如何解决此问题的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:40:18.910

我通过两个步骤解决了这个问题。

1.  使用命令提示符构建 boost。说明[在这里检查](http://www.boost.org/doc/libs/1_44_0/more/getting_started/windows.html#or-simplified-build-from-source)
2.  将“boost_1_52_0\stage\lib”添加到项目属性->链接器->库路径

# c# - 使用 c# 实现鼠标自动化

> ID：13718082
> 
> 赞同：2
> 
> 时间：2012-12-05T07:12:24.043
> 
> 标签：c#, wpf, animation, mouseevent

我们可以`Microsoft.VisualStudio.TestTools.UITesting.Mouse`在程序中用于自动化目的吗（是否可以将它与我们的正常应用程序编码一起使用。不用于测试。）

我想在我的程序中自动化一些鼠标移动。就像我们在 Microsoft UI 自动化中所做的那样。我不打算创建一个测试项目。

如果这是可能的，请给我建议。

UI自动化是否可以模拟鼠标？

**编辑**
因为这是（`Microsoft.VisualStudio.TestTools.UITesting.Mouse`）用于编码的 UI 测试，我想知道是否可以用于正常的编程目的。因为这个`Mouse`类有一些我需要的有用的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:39:34.520

从应用程序中使用它在技术上是可行的。我相信您需要做的就是确保`Playback.Initialize`在使用`Mouse`课程之前致电。但是，我相信 VS 的许可证不允许您在应用程序中重新分发所需的 dll。

UI 自动化没有用于低级输入模拟的设施。

当无法使用 UI 自动化和编码的 UI api 时，我已经成功地使用了[TestApi项目来自动化鼠标和键盘输入。](http://testapi.codeplex.com/)用那里的类很容易完成移动和单击鼠标`Mouse`：

```
using Microsoft.Test.Input;
using System.Drawing;

Mouse.MoveTo(new Point(100, 200));
Mouse.Click(MouseButton.Left); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:26:59.647

设置鼠标位置就这么简单：

```
System.Windows.Forms.Cursor.Position = new Point(x, y); 
```

您还可以使用一些 pinvoke 调用通过消息循环发送点击消息。

我前段时间使用过[这个答案。](https://stackoverflow.com/a/2416762/410075)

**编辑**

正如我所想，如果没有额外的许可，您将无法使用编码的 UI 库分发您的应用程序：

[如何在没有 Visual Studio 2010 Premium 的情况下运行编码的 UI 测试](https://stackoverflow.com/questions/3778871/how-to-run-coded-ui-tests-without-visual-studio-2010-premium)

# java - 通过 JTextField 在 JTable 中搜索批量数据，没有太多延迟

> ID：13718083
> 
> 赞同：3
> 
> 时间：2012-12-05T07:12:23.390
> 
> 标签：java, swing, jtable, jtextfield, rowfilter

我创建了一个应用程序，它搜索在一段`JTable`时间内列出的数据，同时在`JTextField`.

该应用程序适用于少量数据，但在批量数据的情况下，搜索似乎有点延迟。

谁能告诉我这个问题的一些解决方案/建议/其他方法。

我的代码如下。

```
import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;
import javax.swing.table.TableRowSorter;
/**
 *
 * @author user55
 */
public class searching extends javax.swing.JFrame {
final TableRowSorter<TableModel> sorter;
    /**
     * Creates new form searching
     */
    public searching() {
        initComponents();
        int a=1,b=1000000,c=2000000;

           Object rows[][]=new Object[1000000][5];
  for(int i=0;i<1000000;i++)
  {
    rows[i][0]=a++;
    rows[i][1]=b++;
    rows[i][2]=c++;

  }
    String columns[] = { "Symbol", "Name", "Price" };
    TableModel model = new DefaultTableModel(rows, columns) {
      public Class getColumnClass(int column) {
        Class returnValue;
        if ((column >= 0) && (column < getColumnCount())) {
          returnValue = getValueAt(0, column).getClass();
        } else {
          returnValue = Object.class;
        }
        return returnValue;
      }
    };

    table1.setModel(model);
    sorter = new TableRowSorter<TableModel>(model);
    table1.setRowSorter(sorter);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        filterText = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        table1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3"
            }
        ));
        jScrollPane1.setViewportView(table1);

        filterText.addInputMethodListener(new java.awt.event.InputMethodListener() {
            public void caretPositionChanged(java.awt.event.InputMethodEvent evt) {
            }
            public void inputMethodTextChanged(java.awt.event.InputMethodEvent evt) {
                filterTextInputMethodTextChanged(evt);
            }
        });
        filterText.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                filterTextKeyTyped(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 472, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addContainerGap()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                            .addComponent(filterText)
                            .addGap(263, 263, 263))
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(19, 19, 19)
                    .addComponent(filterText, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(18, 18, 18)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 221, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(22, Short.MAX_VALUE)))
        );

        pack();
    }// </editor-fold>

    private void filterTextInputMethodTextChanged(java.awt.event.InputMethodEvent evt) {
        String text = filterText.getText();
        if (text.length() == 0) {
            sorter.setRowFilter(null);
        } else {
            sorter.setRowFilter(RowFilter.regexFilter(text));
        }
    }

    private void filterTextKeyTyped(java.awt.event.KeyEvent evt) {
        String text = filterText.getText();
        if (text.length() == 0) {
            sorter.setRowFilter(null);
        } else {
            sorter.setRowFilter(RowFilter.regexFilter(text));
        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(searching.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(searching.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(searching.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(searching.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new searching().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JTextField filterText;
    private javax.swing.JScrollPane jScrollPane1;
    private static final javax.swing.JTable table1 = new javax.swing.JTable();
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:28:32.403

*   `RowFilter`在整个内部搜索`XxxTableModel`，对于所有行，对于每列，对于大型模型必须更改`if (text.length() > 2) {`，仍然第一次搜索可能会延迟，但减少到搜索单个字符或两个字符的组合，这对于内存和处理器来说也可能是一项艰巨的工作

*   仅对其中一列应用过滤

*   显示一堆数据永远不会是可读的，这是`Sql interpeter`（数据库）的工作

*   `getText`从`Document`(model for `JTextComponents`) 作为参数`RowFilter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:18:18.143

如果 UI 是一个单独的线程并且对服务器的调用是另一个线程。当您从服务器获取前 100 行（例如您的调用需要获取 1000 行）时，我们可以立即将行加载到 UI 并使用这些行更新 UI，因此与用户的交互不会因为延迟而中断通过服务器调用。

这只是一个想法。即使我想知道如何有效地做到这一点。

在上述方法中会有任何并发​​问题吗？

**PS：**如果您已经尝试过，请告诉我结果。

# r - 按两列拆分表

> ID：13718085
> 
> 赞同：2
> 
> 时间：2012-12-05T07:12:35.417
> 
> 标签：r, split

我希望这不是一个骗局——我已经进行了长时间的艰苦搜索，发现了许多类似的问题，但没有解决我的问题。

我有一个数据框，1 列包含数据，另外 2 列是我之前计算的分位数度量。

```
set.seed(123)
d <- data.frame(data = 100:199, quantile1 = runif(100), quantile2 = runif(100))
head(d)

  data quantile1 quantile2
1  100 0.2875775 0.5999890
2  101 0.7883051 0.3328235
3  102 0.4089769 0.4886130
4  103 0.8830174 0.9544738
5  104 0.9404673 0.4829024
6  105 0.0455565 0.8903502 
```

我想要一种根据 quantile1 和 quantile2 列拆分数据的聪明方法。例如，我想要 quantile1 < 0.25 且 quantile2 > 0.5 的行。我目前正在这样做：

```
d[d[,2] < 0.25 & d[,3] > 0.5, ] 
```

这很有效，但如果我有很多子集我想将我的数据拆分成很多子集，那就有点麻烦了。我正在考虑在以下边界进行拆分：

```
quantile1 0.25, 0.75 (three subsets) 
```

然后对于 quantile1 的每个子集，进一步分割边界：

```
quantile2 0.5 (2 subsets) 
```

所以总共产生6个子集。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:24:45.873

尝试使用`split`and`findInterval`一起，也许是这样的：

```
dsplit <- split(d, list(findInterval(d[, "quantile1"], vec=c(0, .25, .75)),
                        findInterval(d[, "quantile2"], vec=c(0, .5)))) 
```

这创建了`list`6`data.frame`秒。前三个`data.frame`是“quantile2”小于 0.5 的那些，后三个是它大于 5 的那些。

```
str(dsplit)
# List of 6
#  $ 1.1:'data.frame':    9 obs. of  3 variables:
#   ..$ data     : int [1:9] 139 140 145 146 153 155 161 190 195
#   ..$ quantile1: num [1:9] 0.232 0.143 0.139 0.233 0.122 ...
#   ..$ quantile2: num [1:9] 0.439 0.312 0.231 0.239 0.246 ...
#  $ 2.1:'data.frame':  27 obs. of  3 variables:
#   ..$ data     : int [1:27] 102 108 109 111 112 121 122 124 126 127 ...
#   ..$ quantile1: num [1:27] 0.409 0.551 0.457 0.453 0.678 ...
#   ..$ quantile2: num [1:27] 0.4886 0.4107 0.1471 0.3012 0.0607 ...
#  $ 3.1:'data.frame':  14 obs. of  3 variables:
#   ..$ data     : int [1:14] 101 104 115 119 123 152 157 158 164 167 ...
#   ..$ quantile1: num [1:14] 0.788 0.94 0.9 0.955 0.994 ...
#   ..$ quantile2: num [1:14] 0.333 0.483 0.142 0.405 0.22 ...
#  $ 1.2:'data.frame':  17 obs. of  3 variables:
#   ..$ data     : int [1:17] 105 114 116 117 129 134 137 144 150 156 ...
#   ..$ quantile1: num [1:17] 0.0456 0.1029 0.2461 0.0421 0.1471 ...
#   ..$ quantile2: num [1:17] 0.89 0.721 0.549 0.954 0.69 ...
#  $ 2.2:'data.frame':  20 obs. of  3 variables:
#   ..$ data     : int [1:20] 100 106 113 118 125 132 135 138 160 162 ...
#   ..$ quantile1: num [1:20] 0.288 0.528 0.573 0.328 0.709 ...
#   ..$ quantile2: num [1:20] 0.6 0.914 0.948 0.585 0.984 ...
#  $ 3.2:'data.frame':  13 obs. of  3 variables:
#   ..$ data     : int [1:13] 103 107 110 120 130 131 133 136 149 166 ...
#   ..$ quantile1: num [1:13] 0.883 0.892 0.957 0.89 0.963 ...
#   ..$ quantile2: num [1:13] 0.954 0.609 0.935 0.648 0.619 ... 
```

您可以根据问题中的示例验证所需的输出。

```
dsplit[[4]]
#    data    quantile1 quantile2
# 6   105 0.0455564994 0.8903502
# 15  114 0.1029246827 0.7205963
# 17  116 0.2460877344 0.5492847
# 18  117 0.0420595335 0.9540912
# 30  129 0.1471136473 0.6900071
# 35  134 0.0246136845 0.5211357
# 38  137 0.2164079358 0.7862816
# 45  144 0.1524447477 0.8427293
# 51  150 0.0458311667 0.8474532
# 57  156 0.1275316502 0.5719353
# 74  173 0.0006247733 0.7465680
# 76  175 0.2201188852 0.6180179
# 80  179 0.1111354243 0.5817501
# 81  180 0.2436194727 0.8397678
# 85  184 0.1028646443 0.5943432
# 90  189 0.1750526503 0.9018744
# 98  197 0.0935949867 0.6592303

yourexample <- d[d[, 2] < 0.25 & d[,3] > 0.5, ]
identical(dsplit[[4]], yourexample)
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:34:19.593

有人可能会想出一个更优雅的解决方案，但这是我在类似情况下所做的：

```
> split(d, list(cut(d[,2], c(0,.25,.75,1)), cut(d[,3], c(0,.5,1)))) -> NewD
> NewD                 # Shows the six tables    

> lapply(NewD, nrow)   # Shows the name/size of each resulting data frame
$`(0,0.25].(0,0.5]`
[1] 9

$`(0.25,0.75].(0,0.5]`
[1] 27

$`(0.75,1].(0,0.5]`
[1] 14

$`(0,0.25].(0.5,1]`
[1] 17

$`(0.25,0.75].(0.5,1]`
[1] 20

$`(0.75,1].(0.5,1]`
[1] 13 
```

该函数根据第二个参数（在本例中为列表）中的条件在`split`a 中创建新数据框。`list`该`cut`函数将向量划分为用户指定的间隔（或者如果需要，可以划分为等距间隔的数量）。

您可以使用类似的名称重命名这些数据框`names(NewD) <- c("A", "B", "C", "D", "E", "F")`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T09:41:55.360

我更喜欢使用**plyr**进行拆分，因为它非常环保，并且可以使用 ggplot2 为未来的绘图准备数据。

1) bin quatile1,quantile2 使用 cut 的大小相似的组

```
 dat$qt1 <- cut(dat$quantile1,c(0,0.25,0.75,1),include.lowest=TRUE)
     dat$qt2 <- cut(dat$quantile2,c(0,0.5,1),include.lowest=TRUE) 
```

2) 我使用 melt 使用我的离散标识符(qt1,qt2) 重塑数据

```
 library(reshape2)
     mm <- melt(dat,measure.vars='data') 
```

现在我可以玩我融化的数据了，例如：

```
acast(mm,qt1~qt2)
Aggregation function missing: defaulting to length
            [0,0.5] (0.5,1]
[0,0.25]          9      18
(0.25,0.75]      26      22
(0.75,1]         18       7 
```

或者我可以使用 ggplot 绘制数据：

```
 library(ggplot2) 
 ggplot(data=mm)+geom_bar(aes(x=qt1,fill=qt2,group=qt2),position='dodge') 
```

![在此处输入图像描述](../Images/eeb84c4449d703ad03736ff064ca420d.png)

# qtp - 本地和共享存储库

> ID：13718089
> 
> 赞同：3
> 
> 时间：2012-12-05T07:12:56.600
> 
> 标签：qtp

谁能告诉我脚本是否具有本地存储库并且还使用共享存储库，在回放期间搜索对象时 QTP 将首先使用哪个存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:43:42.527

始终首先考虑本地对象存储库 (LOR)，如果 LOR 中不存在对象，则按顺序搜索所有关联的共享对象存储库 (SOR)，您可以通过以下方式控制它们的搜索顺序操作属性对话框（在*Associated Repositories*选项卡中）。

![关联存储库](../Images/dac1e133338cda4d11e5fe1a37fb8f88.png)

所有存储库的对象都被合并，因此如果存在重复对象（按类型和名称），它将出现在优先级较高的存储库中，并且您可以让一个存储库中的对象显示为另一个存储库中的对象的子级。

例如，考虑以下存储库。

1.  **当地的：** `Browser("Google").Page("Google").Link("+You")`
2.  **sor1.tsr：** `Browser("Google+").Page("Google+").WebEdit("Email")`
3.  **排序器.tsr：** `Browser("Google+").Page("Google+").WebEdit("Passwd")`

在这种情况下，`Browser`and `Page`from **sor1**将隐藏那些**sor并且您可以通过查看对象存储库编辑器中的****存储库**字段来判断每个对象的来源。

![对象存储库编辑器](../Images/2c00ced39b25d3e4ccb5f8c1c17150dc.png)

# boost - recv 期间 UDT 连接中断

> ID：13718091
> 
> 赞同：0
> 
> 时间：2012-12-05T07:13:05.743
> 
> 标签：boost, udp, boost-asio, udp-data-transfer

我的代码在 Windows 中运行良好，但是当我在 mac 中编译并运行它时，recv 期间连接中断。

我正在使用 UDT RENDEZVOUS 模式进行连接，效果很好

```
bool rendezvous = true;
UDT::setsockopt(serv, 0, UDT_RENDEZVOUS, &rendezvous, sizeof(bool));
UDT::bind(serv,socket_.native());

if (UDT::ERROR == UDT::connect(serv, (sockaddr*)&serv_addr, sizeof(serv_addr)))
{
std::cout << UDT::getsockstate(serv);
} 
```

我正在将 boost 套接字与 udt 套接字绑定。

在这里我的连接中断，错误说，套接字关闭，不存在

```
if (UDT::ERROR == (rs = UDT::recv(serv, data_read_TCP_Style.retdata() + rsize, size - rsize , 0)))
{
cout << "recv:" << UDT::getlasterror().getErrorMessage() << endl;
} 
```

为什么连接只在recv期间断开？什么可能影响连接？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-26T06:46:14.820

设置会合=假，也许可以解决这个问题。

# salesforce - apex 中的 SOQL - 从两种对象类型中获得不匹配的结果

> ID：13718097
> 
> 赞同：0
> 
> 时间：2012-12-05T07:13:14.933
> 
> 标签：salesforce, apex-code, soql

有谁知道如何在 apex 中为以下场景编写 SOQL

" 有两个对象说 "Countries" 和 "MappedCountries"，其中国家对象将有一个完整的国家列表，而 MappedCountries 将只有几个国家（它就像国家对象的子集）。

现在我想要一个 SOQL 顶点函数，例如“我想要在 MappedCountries 对象类型中不匹配的 Country 对象类型中的条目”。

例如：Countries 对象类型由 IND AUS NZ ENG 组成，MappedCountries 对象类型由 NZ AUS 组成，则查询应从两种对象类型中获取不匹配的结果作为 IND ENG。

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T20:22:32.520

如果它们之间没有直接关系（查找），我认为您需要 2 个查询来获取数据。那是因为`NOT IN`喜欢返回 Ids 的常量或子查询的显式列表（因此带有国家名称的字符串将不起作用）。例如，这甚至不编译：

```
SELECT Id, Name FROM Account WHERE Name NOT IN (SELECT Name FROM Contact) 
```

所以你需要这样的东西：

```
Set<String> countriesToExclude = new Set<String>();
for(Mapped_Country__c mc : [SELECT Name FROM Mapped_Country__c]){
    countriesToExclude.add(mc.Name);
}

List<Country__c> excludedCountries = [SELECT Name FROM Country__c WHERE Name NOT IN :countriesToExclude]; 
```

* * *

如果你有例如对象被调用`Selection__c`并且它有一个相关的`Country__c`记录列表会容易得多......你可以简单地编写类似的东西来返回没有帐户的联系人：

```
SELECT Id, Name FROM Contact WHERE AccountId = null 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T10:15:22.563

我想你可以试试这个：

```
Select Id, Name From Countries__c Where Name NOT IN (Select Name From MappedCountries) 
```

# cross-domain - Https 和 http 图像 URL 未在 silverlight 中加载

> ID：13718099
> 
> 赞同：1
> 
> 时间：2012-12-05T07:13:16.563
> 
> 标签：cross-domain, silverlight-5.0

在我的 silverlight 应用程序中，我有两个图像标签，一个带有 http 图像 url，另一个是 https 图像 url

在本地系统中，正在加载启用 http 的图像 url，但未加载 https 图像 url。

当我在启用 https 的站点中托管应用程序时，它显示启用 https 的图像 url，但不显示启用 http 的图像url

如何处理这个问题。

```
my client access policy :

<?xml version="1.0" encoding="utf-8"?>
<access-policy>
<cross-domain-access>
    <policy>
        <allow-from http-request-headers="*">
            <domain uri="http://*" />
            <domain uri="https://*" />
        </allow-from>
        <grant-to>
            <resource include-subpaths="true" path="/">
            </resource>
        </grant-to>
    </policy>
</cross-domain-access>
</access-policy>

my cross domain policy:
<?xml version="1.0"?>
<! DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-   policy.dtd">
<cross-domain-policy>
<allow-access-from domain="*" />
</cross-domain-policy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:54:47.980

这似乎是 Silverlight URL 限制的问题，请检查您是否遗漏了一些可以从这里帮助您的内容。

[http://msdn.microsoft.com/en-us/library/cc189008%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc189008%28v=vs.95%29.aspx)

您需要使用安全策略文件显式启用此功能。有关详细信息，请参阅 Silverlight 主题中的网络安全访问限制。

# java - 如何在 Java 中编写批处理程序以在 Google Drive 中上传文件？

> ID：13718100
> 
> 赞同：1
> 
> 时间：2012-12-05T07:13:19.813
> 
> 标签：java, google-docs, google-docs-api, google-drive-api

我已经编写了一些在 Google 驱动器中成功上传图像的代码，但我需要在浏览器中复制我们在运行该项目并在浏览器中获取代码后获得的授权代码。我需要在控制台中复制这段代码，然后它就可以正常工作了。

但我正在尝试制作用于上传图像的批处理文件，所以不想要这些手动工作。请帮我。提前致谢。

这是我的代码：

```
/**
 * Client id from GD.
 */
private static String CLIENT_ID = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";
/**
 * Client secret key from GD.
 */
private static String CLIENT_SECRET = "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX";

/**
 * Redirect url from GD.
 */
private static String REDIRECT_URI = "XXXXXXXXXXXXXXXXXXXXXXXXXX";

  public static void main(String[] args) throws IOException {

    HttpTransport httpTransport = new NetHttpTransport();
    JsonFactory jsonFactory = new JacksonFactory();

    GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(
        httpTransport, jsonFactory, CLIENT_ID, CLIENT_SECRET, Arrays.asList(DriveScopes.DRIVE))
        .setAccessType("online")
        .setApprovalPrompt("auto").build();

    String url = flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URI).build();
    System.out.println("Please open the following URL in your browser then type the authorization code:");
    System.out.println("  " + url);
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    String code = br.readLine();

    GoogleTokenResponse response = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URI).execute();
    GoogleCredential credential = new GoogleCredential().setFromTokenResponse(response);

    //Create a new authorized API client
    Drive service = new Drive.Builder(httpTransport, jsonFactory, credential).build();

    //Insert a file  
    File body = new File();
    body.setTitle("imagename");
    body.setDescription("A test document");
    body.setMimeType("image/jpeg");

    java.io.File fileContent = new java.io.File("icon.jpg");
    FileContent mediaContent = new FileContent("image/jpeg", fileContent);

    File file = service.files().insert(body, mediaContent).execute();
    System.out.println("File ID: " + file.getId()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:11:12.277

您只需要在第一次运行应用程序时完成授权流程。然后，您可以存储刷新令牌并使用它来构建授权您的请求所需的凭证对象。刷新令牌持续到用户手动撤销为止。

# iphone - 如何在 WWDC 2012 中使用“带有 iCloud 的核心数据”会话 227 的示例代码？

> ID：13718104
> 
> 赞同：1
> 
> 时间：2012-12-05T07:13:34.027
> 
> 标签：iphone, core-data, ios6, icloud

我正在努力解决这个问题几周。所以请帮我解决这个问题。

我从苹果 WWDC 2012 下载了带有 iCloud 的核心数据示例代码。并尝试将它用于我的应用程序，但没有任何效果。

当然，我稍微更改了一些代码..但我不知道我应该做什么，也找不到任何关于它和教程的网站..

我已经花了几个星期了，我很累。我知道这是因为我缺乏技巧。

我面临的问题是...

```
- (void)asyncLoadPersistentStores {
NSError *error = nil;

if ([self loadLocalPersistentStore:&error]) {
    NSLog(@"Added local store");
} else {
    NSLog(@"Unable to add local persistent store: %@", error);
}

//if iCloud is available, add the persistent store
//if iCloud is not available, or the add call fails, fallback to local storage
BOOL useFallbackStore = NO;
if ([self iCloudAvailable]) {
    if ([self loadiCloudStore:&error]) {
        NSLog(@"Added iCloud Store");

        //check to see if we need to seed data from the seed store
        if (SEED_ICLOUD_STORE) {
            //deleted because SEED_ICLOUD_STORE value is false
        }

        //check to see if we need to seed or migrate data from the fallback store
        NSFileManager *fm = [[NSFileManager alloc] init];
        if ([fm fileExistsAtPath:[[self fallbackStoreURL] path]]) {
            //migrate data from the fallback store to the iCloud store
            //there is no reason to do this synchronously since no other peer should have this data
            dispatch_queue_t globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
            dispatch_async(globalQueue, ^{
                NSError *blockError = nil;
                BOOL seedSuccess = [self seedStore:_iCloudStore
                          withPersistentStoreAtURL:[self fallbackStoreURL]
                                             error:&blockError];
                if (seedSuccess) {
                    NSLog(@"Successfully seeded iCloud Store from Fallback Store");
                } else {
                    NSLog(@"Error seeding iCloud Store from fallback store: %@", error);
                    abort();
                }
            });
        }
    } else {
        NSLog(@"Unable to add iCloud store: %@", error);
        useFallbackStore = YES;
    }
} else {
    useFallbackStore = YES;
}

if (useFallbackStore) {
    if ([self loadFallbackStore:&error]) {
        NSLog(@"Added fallback store: %@", self.fallbackStore);

        //you can seed the fallback store if you want to examine seeding performance without iCloud enabled
        //check to see if we need to seed data from the seed store
        if (SEED_ICLOUD_STORE) {
            //deleted
        }
    } else {
        NSLog(@"Unable to add fallback store: %@", error);
        abort();
        }
    }
} 
```

这是来自 CoreDataController.m（WWDC 2012 会话 227）的源代码的一部分，然后，程序在调用“loadLocalPersistentStore”方法时停止，我收到此错误消息“在捆绑包中找不到本地存储，这可能是构建问题，请确保将存储文件作为捆绑资源复制。”

我猜我得到这个的原因是我没有像示例这样的 localStore.sqlite 和 fallbackStore.sqlite 文件。所以它会出错。

但是虽然我跳过了那部分（评论它），但无法连接 iCloud，因为现在我收到此错误消息“无法添加 iCloud 商店：错误域 = NSCocoaErrorDomain 代码 = 134100”操作无法完成。（可可错误 134100。）“UserInfo=0x1dd93040 {元数据={ NSPersistenceFrameworkVersion = 419;”

我在 iOS5 上通过 iCloud 学到了很多关于核心数据的知识，而且它运行得几乎完美。但现在我就像一个愚蠢的人。我无能为力。请帮帮我。

奇怪的是没有输入关于 iCloud 应用程序 ID 的代码，在苹果的示例代码中没有 url。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T00:23:54.533

我在尝试实现 Apple WWDC 2012 中的示例 iCloud 代码时也遇到了问题。我向 Apple Developer Support 开了一张票，这是他们在 2012 年 11 月 15 日的回复。

> 一些开发人员在采用 iCloud 和 Core Data 以及来自 WWDC 的样本时遇到了问题。但是，我有一个更新的 SharedCoreData 示例（从 WWDC 改进），我认为您应该使用它。CoreDataController 对象仍然存在，但已被清理和改进。我建议先运行该示例，看看它是否在 iOS 设备之间正确同步。在继续进行更改之前先运行这一点很重要。这样你就可以得到一个很好的基线。一旦你确认它可以工作，继续将它的 CoreDataController 应用到你的应用程序中。

他提到 CoreDataController 类已经改变。AppDelegate 也发生了变化。添加了新方法，现在代码更干净了。我的 iCloud 几乎可以在我的应用程序上运行，但初始文件上传仍然存在问题。现在正试图解决这个问题。使用未修改的代码运行更新的 SharedCoreData 应用程序可以完美运行！所以这是一个很好的起点。

除了向 Apple Developer Support 开票（每次 50 美元）外，我不知道您将如何获得此新代码。新项目（仍命名为 SharedCoreData）只有 1 MB 大小。如果您愿意，我愿意通过电子邮件将其发送给您。

当我确定我的应用程序的初始文件上传解决方案时，我将在此处发布更新。

# java - 在java中将字符串转换为字节

> ID：13718106
> 
> 赞同：-1
> 
> 时间：2012-12-05T07:13:39.077
> 
> 标签：java, byte, bytebuffer

> **可能重复：**
> [使用 Java 将十六进制转储的字符串表示形式转换为字节数组？](https://stackoverflow.com/questions/140131/convert-a-string-representation-of-a-hex-dump-to-a-byte-array-using-java)

我想将字符串转换`"1B4322C2"`为字节，但问题是如果我使用`getBytes()`它会将其转换为字符串长度两倍的字节，并且我想将它们转换为字符串长度的一半。

例如上述字符串的输出应该是`{0x1B , 0x43, 0x22, 0xC2}`

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T07:19:31.517

(I've now voted to close as a duplicate, which I should have done first... but it makes sense to leave this answer here until the question is deleted...)

Right, so what you *actually* want to do is parse a hex string.

You should look at [Apache Commons Codec](http://commons.apache.org/codec/), which has a [`Hex`](http://commons.apache.org/codec/api-release/org/apache/commons/codec/binary/Hex.html) class for precisely that purpose. Personally I'm not wild about the API, but this should work:

```
Hex hex = new Hex();
byte[] data = (byte[]) hex.decode(text); 
```

Or:

```
byte[] data = Hex.decodeHex(text.toCharArray()); 
```

(Personally I wish you could just use `byte[] data = Hex.decodeHexString(text);` but there we go... you could always write your own wrapper method if you want.)

If you don't want to use a 3rd party library, there are plenty of implementations elsewhere on Stack Overflow, e.g. [this one](https://stackoverflow.com/a/140861/22656).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:11:56.807

要将“1B4322C2”编码为字节，您可以使用

```
byte[] bytes = new BigInteger("FB4322C2", 16).toByteArray();
if (bytes.length > 1 && bytes[0] == 0)
    bytes = Arrays.copyOfRange(bytes, 1, bytes.length);
System.out.println(Arrays.toString(bytes)); 
```

印刷

```
[-5, 67, 34, -62] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:23:23.807

如果您不想使用外部库，这应该通过一些调整来解决问题（添加 0x 和 { }）

```
public static String byteArrayToHexadecimal(byte[] raw) {
    final BigInteger bi = new BigInteger(1, raw);
    final String result = bi.toString(16);
    if (result.length() % 2 != 0) {
        return "0" + result;
    }
    return result;
} 
```

抱歉，换个方式（没有优化，因为对我来说根本不是瓶颈）：

```
public static byte[] hexadecimalToByteArray(String hex) {
    if (hex.length() % 2 != 0) {
        hex = "0" + hex;
    }
    final byte[] result = new byte[hex.length() / 2];
    for (int i = 0; i < hex.length(); i += 2) {
        String sub = "0x" + hex.substring(i, i + 2);
        result[i / 2] = (byte) ((int) Integer.decode(sub));
    }
    return result;
} 
```

但是，我建议按照 J. Skeet 的建议选择 Apache Commons Codec

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T07:19:27.810

您可以使用 String Tokenizer 或 String Builder 并分离字符串，然后将其从六进制转换为字符串...

此链接可能对您有帮助..
[将十六进制转换为 ASCII](http://www.mkyong.com/java/how-to-convert-hex-to-ascii-in-java/)

希望这可以帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T07:19:21.610

[`getBytes`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#getBytes%28%29)将每个字符转换为字节形式的字符代码；它不会从字符串本身解析出字节值。为此，您可能需要编写自己的解析函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T07:32:44.120

您不想要 String.getBytes() 方法。这会将字符串的字符转换为它们的字节表示形式。

要执行您想要执行的操作，您需要手动将字符串拆分为单独的字符串，每对一个字符串。然后，您将要解析它们。

不幸的是，Java 没有无符号字节，而且 0xC2 会溢出。如果内存不是问题，您可能会希望将这些值视为短裤或整数。

因此，您可以使用 Integer 类将字符串解析为数字。由于您的字符串是十六进制的，因此您必须使用 parse 方法来提供基数。

```
String test = "1B4322C2";

for (int bnum = 0; bnum < test.length() / 2; bnum++) {
    String bstring = test.substring(bnum * 2, bnum * 2 + 2);
    int bval = Integer.parseInt(bstring, 16);
    System.out.println(bstring + " -> " + bval);
} 
```

这将输出：

```
1B -> 27
43 -> 67
22 -> 34
C2 -> 194 
```

如果您需要将它们放在一个数组中，您可以实例化一个宽度为字符串一半的数组，然后它们将每个值放在其`bnum`索引下。

# iphone - 在保持货币格式的同时使用缩写缩短货币数字

> ID：13718107
> 
> 赞同：4
> 
> 时间：2012-12-05T07:13:43.763
> 
> 标签：iphone, ios, localization, currency, nsnumberformatter

1.  我想通过使用“K”代表千，“M”代表百万等等来缩短货币数字。

2.  由于数字代表货币价值，我还`NSNumberFormatter`根据其价值、货币和设备的区域设置来正确格式化每个数字。

我已经能够分别做 1 和 2，但是很难同时做这两个。起初，我尝试简单地将缩写附加到格式正确的输出字符串`NSNumberFormatter`（例如，将“K”附加到“$10.3”以获得“$10.3K”）。

*这适用于大多数货币，直到我遇到在数字值之后*显示货币符号的区域格式（例如，“+10.3 $US”将变为“+10.3 $USK”而不是“+10.3K $US”）。

我不确定是否有一种简单的方法可以确定货币符号是在给定货币和区域设置的数值之前还是之后。关于解决此问题的任何建议？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T11:41:46.670

有趣的问题！iOS 库不支持这一点（而且我也从未见过其他平台上的语言环境定义支持这种格式），因此您只能坚持自己的实现。

使用字母 K 和 M 本身的约定在其他语言环境中可能不起作用。例如，M 会让法语使用者感到困惑，因为“mille”、“million”和“milliard”（法语中表示千、百万和十亿的意思）都以字母 M 开头，而我只见过法语中常用的**K**带有金额（我是母语人士），在某些领域（例如地理）中使用小写**m**和大写**M分别表示百万和十亿。**

也许您应该权衡这是否是所有地区都必须具备的，或者是否有其他方式来展示您的信息。您总是可以在您知道它有效的语言环境（例如 en_US）中使用缩写的实现，并为其他语言环境使用非缩写数字。

另一个建议是基于活动语言而不使用 iOS 区域格式（即通过您的格式字符串自行决定货币、数字和字母 K 的位置）`localizable.strings`文件，以便翻译人员可以在必要时以您的每种语言更改它）。您仍然会获得依赖于语言环境的小数点，但其他一切都将由您的本地化决定。这不是一个坏主意，因为当用户使用另一种语言的应用程序但看到以他们自己的语言格式化的数字时，实际上可能会感到非常困惑（通常，如果您理解英语，即使您的母语也能理解英语数字格式）语言使用逗号而不是句点作为小数分隔符——我非常清楚这一点，因为我经常收到困惑的用户对我自己的应用程序的问题，他们尝试用句点输入数字，即使他们的语言环境需要逗号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:14:24.040

```
@interface ABNumberFormatter : NSNumberFormatter
@end

@implementation ABNumberFormatter

-(NSString *)stringForObjectValue:(id)obj
{
    static NSArray *names;
    if (!names) names = @[@" Bin", @" Milyon", @" Milyar", @" Trilyon"];
    double value = ((NSNumber*)obj).doubleValue;
    for (NSUInteger expo = 4; expo > 0; --expo)
    {
        double number = [NSDecimalNumber decimalNumberWithMantissa:1 exponent:expo*3 isNegative:NO].doubleValue;
        if (value >= number)
        {
            self.positiveSuffix = names[expo];
            return [super stringForObjectValue:@(value / number)];
        }
    }
    return [super stringForObjectValue:obj];
}
@end 
```

名字是土耳其语。

# joomla - 如何在 joomla 中列出所选类别中的所有文章以及标题、摘录和阅读更多链接

> ID：13718111
> 
> 赞同：-2
> 
> 时间：2012-12-05T07:13:52.577
> 
> 标签：joomla, joomla1.5

我想在 joomla 中显示所选类别中的所有文章，包括标题、摘录和阅读更多链接

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:07:46.077

检查演示并下载此扩展程序。

[http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/11827](http://extensions.joomla.org/extensions/news-display/articles-display/news-tickers-a-scrollers/11827)

# .net - Azure API 作为管理 Cmdlet 获取包的可用性

> ID：13718112
> 
> 赞同：-1
> 
> 时间：2012-12-05T07:14:00.637
> 
> 标签：.net, powershell, azure

我们必须从正在运行的 Azure 角色备份现有的 Azure 部署。Azure REST API 有一个方法[Get Package](http://msdn.microsoft.com/en-us/library/windowsazure/jj154121.aspx)来执行此操作，但我在 Management Cmdlet 上找不到此方法。

以下是可通过 Azure Cmdlet 获得[的方法列表](http://msdn.microsoft.com/en-us/library/windowsazure/jj152841)

这是否意味着并非 REST API 上的所有方法都公开为 cmdlet？我们还需要编写自定义代码来将请求发布到 REST API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:55:17.657

是的，看起来该`GetPackage`操作无法通过 Powershell Cmdlet 进行。在这种情况下，您需要自己实现，但您可以从允许您使用 C#（或 Powershell）调用服务管理 API 的程序集开始。该库[在 NuGet 上可用](https://nuget.org/packages/WindowsAzure.ServiceManagement.Library)。以下是使用 C# 获取包的方法：

```
var mgmt = ServiceManagementHelper.CreateServiceManagementChannel(mycert);
IAsyncResult result = mgmt.BeginGetPackage(subscriptionId, serviceName, deploymentName, containerUri, overwriteExisting, (ar) =>
{
    // Handle EndGetPackage...
}, null); 
```

# actionscript-3 - 使用 x 和 y 坐标 [actionscript 3.0] 自动将 MovieClip 向右移动

> ID：13718114
> 
> 赞同：1
> 
> 时间：2012-12-05T07:14:18.283
> 
> 标签：actionscript-3

我尝试在 AS 3 中制作简单的程序，这是场景：我在 Linkage 中有一个 MovieClip，名称为 Hero，我想将 Hero 向右移动，速度为 2，如果 hero.x = 200，那么 Hero 将停在位置x = 200，这是我的简单代码：

```
 var hero:Hero = new Hero();
        hero.x = 0;
        hero.y = 300;
        addChild(hero);

    addEventListener(Event.ENTER_FRAME, animateHero);
    function animateHero(event:Event) {

    if (hero.x <= 200){
        hero.play();
        } else { 
        hero.currentFrame(stop);
        }
        hero.x += 2;
    } 
```

我试试这段代码，它正在运行，但在输出面板中显示重复的错误消息：

```
 TypeError: Error #1006: value is not a function.
        at SpriteMovement_fla::MainTimeline/animateHero() 
```

我的问题 ：

我的代码错了吗？如果是，请告诉我如何正确的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:54:27.627

```
var hero:Hero = new Hero();
    hero.x = 0;
    hero.y = 300;
    addChild(hero);
    hero.play();
addEventListener(Event.ENTER_FRAME, animateHero);
function animateHero(event:Event) {

    if (hero.x <= 200){
        hero.x += 2;
    } else { 
        hero.stop();
        removeEventListener(Event.ENTER_FRAME, animateHero);
    }
} 
```

我想这就是你想要的。

“currentFrame”是一个值而不是一个函数。这就是显示该错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:40:15.257

如果我没记错的话（很久以前），你可以用`hero.stop()`currentFrame(stop) 代替。我认为产生错误是因为AS3不知道Hero是一个movieclip，所以将其转换为movieclip会导致flash明白可以在Hero上调用start和stop函数。

# java - Tomcat中的UncaughtExceptionHandler

> ID：13718116
> 
> 赞同：1
> 
> 时间：2012-12-05T07:14:27.487
> 
> 标签：java, multithreading, tomcat, out-of-memory

在执行我的 Web 应用程序时，我在 tomcat 源代码中出现 OutOfMemoryError。

**java.lang.OutOfMemoryError：Java 堆空间**

```
java.lang.OutOfMemoryError: Java heap space
at java.util.Arrays.copyOf(Unknown Source)
at java.lang.AbstractStringBuilder.expandCapacity(Unknown Source)
at java.lang.AbstractStringBuilder.append(Unknown Source)
at java.lang.StringBuilder.append(Unknown Source)
at com.source.server.wc.common.SupportAction.execute(SupportAction.java:252)
at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)
at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)
at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:507)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.source.server.wc.common.AuthenticationFilter.doFilter(AuthenticationFilter.java:300)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at com.source.server.wc.common.EncodingFilter.doFilter(EncodingFilter.java:70)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:568)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
at java.lang.Thread.run(Unknown Source) 
```

我添加了 **Thread.currentThread().setDefaultUncaughtExceptionHandler(new OOMEHandler());** 在我的主线程中，现在我在从 webclient 执行任务时收到 OOMError，但 UncaughtExceptionHandler 没有捕获 OOMError。

我怎么能抓住它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:09:39.230

`UncaughtExceptionHandler`也会赶上`OutOfMemoryError`。您似乎将其设置为正确的。因此，要么其他进程在之后调用它（您可以通过设置函数的断点来检查），或者 TomCat 在您`Thread`的`Thread.currentThread().getUncaughtExceptionHandler()`. `null`如果没有设置，这将返回。

还要注意它`setDefaultExceptionHandler()`是静态的，所以你不应该在对象上调用它，而不是在类上调用它，所以：

```
Thread.setDefaultUncaughtExceptionHandler(new OOMEHandler()); 
```

代替

```
Thread.currentThread().setDefaultUncaughtExceptionHandler(new OOMEHandler()); 
```

# windows - 枚举 WMI 事件的消费者

> ID：13718117
> 
> 赞同：1
> 
> 时间：2012-12-05T07:14:27.740
> 
> 标签：windows, wmi

网上有很多示例演示如何订阅事件源（如`RegistryValueChangeEvent`），并调用一些代码来响应该事件。

但是有没有办法枚举这样的听众？例如，我想列出所有正在收听`RegistryValueChangeEvent`. 这在 WMI 中可能吗？

这是一个示例脚本文件，监听注册表更改事件，我想检测：

```
strComputer = "."

Set objWMIServices=GetObject( _
    "winmgmts:{impersonationLevel=impersonate}!\\" & _ 
    strComputer & "\root\default")

set objSink = WScript.CreateObject( _
    "WbemScripting.SWbemSink","SINK_")

objWMIServices.ExecNotificationQueryAsync objSink, _
    "Select * from RegistryValueChangeEvent Where " & _
    "Hive = 'HKEY_LOCAL_MACHINE' and " & _
    "KeyPath = 'SYSTEM\\ControlSet001\\Control' and " & _
    "ValueName = 'CurrentUser'"

WScript.Echo "Listening for Registry " _
    & "Change Events..." & vbCrLf 

While(True) 
    WScript.Sleep 1000 
Wend 

Sub SINK_OnObjectReady(wmiObject, wmiAsyncContext) 
    WScript.Echo "Received Registry Value Change Event" _
    & vbCrLf & wmiObject.GetObjectText_() 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:06:53.603

*这是“提供一些附加信息”但不能解决您的问题的半答案之一*

如果您想查看**永久**事件消费者，他们将在 WMI`root\subscription`命名空间中注册（Win XP 及更高版本）。查找永久消费者所需的三件事的实例：__EventFilter、__EventConsumer（或派生类型之一）和 __FilterToConsumerBinding。

不幸的是，这并没有解决如何找到**临时**事件消费者 - 调用 ExecNotificationQueryAsync - 这是你所问的。
（但我想我会提到它以防万一它有帮助。）

# iphone - Titanium Force 日历访问请求

> ID：13718118
> 
> 赞同：0
> 
> 时间：2012-12-05T07:14:33.793
> 
> 标签：iphone, ios, titanium

我正在使用[https://github.com/stelford/Titanium-Calendar](https://github.com/stelford/Titanium-Calendar)

我的问题是它不会要求用户授予他们日历的权限。我知道代码有效，因为我使用了一个崩溃的不同模块，但是它强制我用于测试的手机授予它权限。所以现在我的测试手机运行良好，但没有其他人这样做，因为它实际上不会首先请求许可。

我不知道如何让这个日历模块强制请求用户访问他们的日历。任何帮助都会很棒..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:29:03.300

首先，您需要检查设备以查看它是否甚至请求访问日历。为此，请转到`Settings`-> `Privacy`--> `Calendars`。如果您的应用程序已请求访问日历，它将显示在那里。

[![设定画面](../Images/0a13d301c1f476f4b78f480efe7f2475.png)](https://i.stack.imgur.com/A3Cxo.jpg)
[（来源：[iphone-to-ipad.com](http://www.iphone-to-ipad.com/blog/wp-content/uploads/2012/10/ios-6-privacy-settings.jpg)）]

[![隐私设置](../Images/0075d167d7a142b0a23c47144237b37b.png)](https://i.stack.imgur.com/vd8kb.jpg)
[（来源：[iphonehacks.com](http://cdn.iphonehacks.com/wp-content/uploads/2012/10/ios_6_privacy_settings-2.jpg)）]

这个日历模块有几个问题。我将它们固定在 obj-c 中。我必须对日历模块做很多事情才能让它在 iPad 上顺利运行。如果您在 Titanium 论坛上查看此日历模块和我的名字（Blake Rogers），您应该能够找到我对 obj c 中的模块所做的一系列更改以解决问题。

要执行此修复，您实际上需要下载日历的 Xcode 项目。之后，您需要在`Module/AgCalendarModule.m`文件中添加以下代码。用该文件中的以下内容替换该`startup`方法。

替换代码后，您将需要使用`build.py`（如果我没记错的话……已经有一段时间了）重新编译它，一旦使用 编译它，`build.py`您就可以将该版本的模块添加回您当前的项目中工作。

```
-(void)startup
{
    // this method is called when the module is first loaded
    // you *must* call the superclass
    [super startup];
    EKEventStore *es = [[EKEventStore alloc] init];
    [es requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
        /* This code will run when uses has made his/her choice */
    }];
    NSLog(@"[INFO] %@ loaded",self);
} 
```

老实说，Titanium 对我来说是一次可怕的经历。一旦我的应用程序变得比最初的概念证明更大并且涉及与远程 Web 服务器同步......我开始从内存泄漏中得到奇怪的错误，你无法重现，因为内存泄漏会在不同的时间攻击。

我目前正在切换（是的，从头开始重建整个应用程序）到 Xamarin（Monotouch），这很棒:)

# c# - 在 LINQ 和 MVC 中显示 5 个内容

> ID：13718121
> 
> 赞同：-3
> 
> 时间：2012-12-05T07:14:41.110
> 
> 标签：c#, asp.net-mvc, linq

我是 LINQ 上的新手。我想显示观看次数较高的 5 内容。我的表上已经有 Viewed 字段，如果用户单击 ReadMore 按钮，它将增加 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:17:03.503

```
list.OrderByDescending(x=>x.Viewed).Take(5) 
```

# android - 显式 requestfocus 调用是否需要对该视图进行显式 clearfocus 调用？

> ID：13718123
> 
> 赞同：1
> 
> 时间：2012-12-05T07:14:45.750
> 
> 标签：android

我只是想了解是否必须为视图上的每个 requestfocus 调用提供 clearfocus 调用。例如，如果我请求将焦点放在第一个编辑文本上，我有两个编辑文本，我是否必须在其他编辑文本获得焦点时显式调用 clearfocus。我检查了文档，但他们没有明确提到相同的内容。如果有人能帮助我理解同样的事情，那就太好了。

谢谢，
鲁佩什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:39:32.537

无需明确清除项目的焦点。当视图中的另一个项目获得焦点时，Android 本身会自动清除项目的焦点。

# c# - 以编程方式从 IIS 获取站点状态，返回 COM 错误

> ID：13718128
> 
> 赞同：5
> 
> 时间：2012-12-05T07:15:29.760
> 
> 标签：c#, iis, iis-7, configuration, servermanager

我正在尝试以编程方式从 IIS 获取我的站点状态，以查看它是否已停止，但我不断收到以下错误，

> 对象标识符不代表有效对象。（来自 HRESULT 的异常：0x800710D8）

该应用程序正在使用 ServerManager Site 类来访问站点状态。这是代码，

```
//This is fine, gets back the site 
var serverManager = new Microsoft.Web.Administration.ServerManager(ConfigPath);
var site = serverManager.Sites.FirstOrDefault(x => x.Id == 5);
if (site == null) return;
var appPoolName = site.Applications["/"].ApplicationPoolName;
//error!
var state = site.State; 
```

我已经使用静态站点进行了测试以隔离问题，确保站点已启动并正在运行，所有配置均有效，指向有效的应用程序池...等。

如果您需要更多详细信息，请告诉我。是COM的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T23:49:24.167

我弄清楚问题出在哪里。基本上，服务器管理器有两个部分，服务器管理器的第一部分允许您从配置文件中读取站点详细信息，这就是我在上面所做的。这样做的问题是您只能获取文件中的信息，而站点状态不是其中的一部分。

服务器管理器的第二部分允许您直接连接到 IIS，它通过与 COM 元素交互来实现。所以我应该做的是：

```
ServerManager manager= ServerManager.OpenRemote("testserver");
var site = manager.Sites.First();
var status = site.State.ToString() ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-01T14:38:11.240

我有一个类似的问题，但我的问题是由于激活对 ServerManager 对象上的 CommitChanges 调用的更改所需的延迟引起的。我在这里找到了我需要的答案：

[ServerManager CommitChanges 稍有延迟进行更改](https://stackoverflow.com/questions/7446632/servermanager-commitchanges-makes-changes-with-a-slight-delay/7588790#7588790)

似乎需要轮询才能获得一致的结果。与此类似的东西解决了我的问题（访问新添加的应用程序池时出现异常）：

```
 ...
        create new application pool
        ...
        sman.CommitChanges();
        int i = 0;
        const int max = 10;
        do
        {
            i++;
            try
            {
                if (ObjectState.Stopped == pool.State)
                {
                    write_log("Pool was stopped, starting: " + pool.Name);
                    pool.Start();
                }
                sman.CommitChanges();
                break;
            }
            catch (System.Runtime.InteropServices.COMException e)
            {
                if (i < max)
                {
                    write_log("Waiting for IIS to activate new config...");
                    Thread.Sleep(1000);
                }
                else
                {
                    throw new Exception(
                        "CommitChanges timed out efter " + max + " attempts.",
                        e);
                }
            }
        } while (true);
        ... 
```

# bash - 构建脚本中的 sed 命令

> ID：13718135
> 
> 赞同：1
> 
> 时间：2012-12-05T07:15:56.063
> 
> 标签：bash, shell, sed, build-process

我是 sed 命令的新手。我正在阅读一些源代码的构建脚本，我在其中找到了这个 for 循环。

```
for x in '*.la'    
do    
sed -i -e 's|^\(libdir=.\).*\(/opt/toolchains\)|\1\2|' x    
done 
```

我无法理解这个 for 循环正在执行的功能。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:20:24.797

它正在遍历当前目录中以“.la”结尾的一系列文件，并且对于找到的每个文件，它正在使用 sed 编辑内容以转换表单的行：

```
libdir=X[zero-or-more-chars]/opt/toolchains 
```

（其中 X 是任何字符）转换为以下形式的行：

```
libdir=X/opt/toolchains. 
```

换句话说，它正在删除这些行的 [zero-or-more-chars] 部分。

实际上，这看起来有问题，因为我希望 sed 命令引用 $x，而不是 x。我有一种感觉，您在复制/粘贴步骤中以某种方式丢失了 $ （或者它可能只是一个错误）。

# python - 如何在 python 中解析这个特殊的配置文件？

> ID：13718140
> 
> 赞同：0
> 
> 时间：2012-12-05T07:16:09.413
> 
> 标签：python, json, parsing, configuration-files, data-transfer-objects

我有一些配置文件，数据格式无法更改。

其中一个看起来像这样：

```
root {
  configuration {
    field_a: "aaaa"
    field_b: "bbbb"
  }
  child {
    configuration {
        field_a: "aaa1"
        field_b: "bbb1"
    }
  }
  child {
    configuration {
        field_a: "aaa2"
        field_b: "bbb2"
    }
  }
} 
```

我需要的是解析文件并将其保存为 JSON 对象：

```
{root: 
    {field_a:"aaaa",field_b:"bbbb"},
    children: [{field_a:"aaa", field_b:"bbb"}, ... ]
} 
```

有没有办法让它成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:46:33.993

您的数据格式是 unofficial-javascript-array。对于伟大的 python，很容易用 4 行代码将它们解析为 python dict。然后使用 simplejson 解析为您喜欢的任何 json 格式。

```
s = '''                                                                                                          
root {                                                                                                           
  configuration {                                                                                                
    field_a: "aaaa"                                                                                              
    field_b: "bbbb"                                                                                              
  }                                                                                                              
  child {                                                                                                        
    configuration {                                                                                              
        field_a: "aaa"                                                                                           
        field_b: "bbb"                                                                                           
    }                                                                                                            
  }                                                                                                              
}                                                                                                                
'''                                                                                                              

s = s.replace("{", ":{").replace("}", "},")                                                                      
s = "{%s}"%s                                                                                                     

import re                                                                                                        
s = re.sub(r'(\w+)"', r'\1",', s)                                                                                
s = re.sub(r"(\w+)\s*\:", r'"\1":', s)                                                                           
print "string:", s                                                                                               

d = eval(s)                                                                                                      
print "python dict:", d                                                                                          

import simplejson as json                                                                                        
print "json:", json.dumps(d) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:36:56.527

一个快速的想法：

如果配置很好地缩进和排列，例如：

替换 "{" 和 "}" 使其如下所示：

```
root:
  configuration:
    field_a: "aaaa"
    field_b: "bbbb"
  child:
    configuration:
        field_a: "aaa"
        field_b: "bbb" 
```

现在它是一个 yaml 格式的文件！一定要从 yaml 转换为 json ！

```
import yaml
import json

s = "yamlstr"  # your yaml str
data = yaml.load(s)
jsondata = json.dumps(data)
print jsondata 
```

**更新**

由于 child 是一个列表，并且**"root"、"configuration" 和 "child" 似乎都是关键字**，所以稍微改变一下并寻找解决方法：

做到这一点：

```
root:
  - configuration:
    field_a: "aaaa"
    field_b: "bbbb"
  - child:
    - configuration:
        field_a: "aaa1"
        field_b: "bbb1"
  - child:
    - configuration:
        field_a: "aaa2"
        field_b: "bbb2" 
```

和输出 python dict 将是：

```
{'root': [{'configuration': None, 'field_b': 'bbbb', 'field_a': 'aaaa'}, {'child': [{'configuration': {'field_b': 'bbb1', 'field_a': 'aaa1'}}]}, {'child': [{'configuration': {'field_b': 'bbb2', 'field_a': 'aaa2'}}]}]} 
```

现在做一些简单的编程，让它成为你的结构:-)

# android - 自定义 ListView 与 Fragments 的混淆

> ID：13718141
> 
> 赞同：1
> 
> 时间：2012-12-05T07:16:20.477
> 
> 标签：android, listview, actionbarsherlock, fragment

我在理解如何在片段中创建自定义 listView 时遇到问题。我发现的大多数教程都有很多不同的方法来做到这一点，要么让我感到困惑，要么不能在片段中使用。因为我能够使用 ...simple_list_item_1 创建一个简单的 listView，所以当我尝试自定义我自己的 xml 以在 ea 列表中使用三个 textView 时，我的应用程序崩溃了。此时我要做的就是创建一个简单的列表视图，其中包含三个硬编码的字符串数组（textViews）。有人可以指出我正确的方向吗？

```
Fragment Code:

 public class BuyFragTab extends SherlockListFragment {

ArrayList<Bookinfo> bookRec = new ArrayList<Bookinfo>();

//defines the Arraylist Bookinfo record layout
//public class Bookinfo {
    public String titles[] = new String[]{"Bk 1", "Bk 2", "Bk 3", "Bk 4", "Bk 5", "Bk 6", "Bk 7", "Bk 8"};
    public String authors[] = new String[]{"Tom", "Dick", "Harry", "Jack", "James", "Skip", "Jim", "June"};
    public String status[] = new String[]{"Open", "Open", "Open", "Open", "Closed", "Closed", "Closed", "Closed"};

//}

//returns the view of the fragment
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity().getBaseContext(),
            android.R.layout.simple_list_item_1, titles);
            //R.layout.buy_tbfrag, titles);

    /** Setting the array adapter to the listview */
    setListAdapter(adapter);

    return super.onCreateView(inflater, container, savedInstanceState);  
}
}

Fragment xml layout:

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<!-- Put a background to the fragment android:background="#FF0000" -->
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/titleSearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="Input Title Name" />

    <Button
        android:id="@+id/button1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Search" />

    <ListView
        android:id="@id/android:list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>  

    <TextView
        android:id="@id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="No Books Registered" />
</LinearLayout> 
```

```
Fragment List xml:

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
        android:id="@+id/titleName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         />

<TextView
        android:id="@+id/authorName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         />

<TextView
        android:id="@+id/bookStatus"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:35:03.243

在这里，您可以找到此[示例的非常简单的教程，并在](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)[此处](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)找到 更多关于此的内容

# iphone - Facebook 登录集成

> ID：13718149
> 
> 赞同：3
> 
> 时间：2012-12-05T07:16:54.003
> 
> 标签：iphone, facebook-login

我有一个应用程序项目和 facebook 示例登录项目。我需要将两者结合在一起，以便用户提示使用 facebook 登录然后引导到应用程序。我不知道如何开始以及我的方法是否正确。

我做了什么：只需在我的应用程序中插入 delegate.m、delegate.h、login.m、login.h、login.xib 文件作为另一个类组。复制 login.xib 中的视图并将其粘贴到 mainwindow.xib 中。将类自定义为 FBLoginView（作为选项提供）。

我得到的错误：

> 2012-12-05 14:43:17.370 myapp[2312:c07] Interface Builder 文件中的未知类 FBLoginView。2012-12-05 14:43:17.400 myapp[2312:c07] Interface Builder 文件中的未知类 FBLoginView。2012-12-05 14:43:17.403 myapp[2312:c07] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键值编码的键委托。*** First throw call stack: (0x19ce012 0x2181e7e 0x1a56fb1 0x652711 0x5d3ec8 0x5d39b7 0x9d2573 0x5fe428 0xb9f0cc 0x2195663 0x19c945a 0xb9dbcf 0xb9f98d 0x981ceb 0x982002 0x980ed6 0x992315 0x99324b 0x984cf8 0x281edf9 0x281ead0 0x1943bf5 0x1943962 0x1974bb6 0x1973f44 0x1973e1b 0x9807da 0x98265c 0x2c8d 0x2bc5) libc++abi.dylib: terminate called throwing an exception (lldb)

无论如何要解决这个问题，还是应该有更好的集成方式？

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-22T17:30:08.197

我昨天有同样的问题。有两种解决方案：

1.  转到目标设置-> 构建设置，在`Other Linker Flags`写入`-ObjC`
2.  在 App Delegate 中，更新 didFinishLaunchingWithOptions 函数并添加`[FBLoginView class]`，例如：

* * *

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary     *)launchOptions
{
    [FBLoginView class];

    // Override point for customization after application launch.
    return YES;
} 
```

参考：[https ://developers.facebook.com/ios/login-ui-control/](https://developers.facebook.com/ios/login-ui-control/)

@shashwat 更新：

添加标志[始终不是最佳选择](https://developers.facebook.com/docs/ios/login-tutorial)

> 您可能还想将 -ObjC 链接器标志添加到您的项目中。但是，如果您选择这样做，您将增加可执行文件的大小（由于额外的 SDK 目标代码加载到您的应用程序中）。您可以在我们的故障排除指南中了解有关此权衡、-ObjC 标志的确切作用以及如何设置它的更多信息。

添加`[FBLoginView class];`将`didFinishLaunchingWithOptions`解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:57:16.543

我正在提供一个用于在 facebook 上发布的简单项目。请检查一下。您还需要一个来自 facebook 的 API 密钥，或者从您正在使用的示例代码中获取它，就像我在下面提供给您的那样，但它实际上只会显示项目中的内容。或者从 Facebook 开发者帐户获取您自己的密钥，制作它然后在项目中使用它。

[http://github.com/reallylongaddress/iPhone-Facebook-Graph-API](http://github.com/reallylongaddress/iPhone-Facebook-Graph-API)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-24T01:15:06.420

我遇到了同样的问题，这个文档对于解决问题很有价值。（请参阅本页的“图形”部分）

[https://developers.facebook.com/docs/ios/login-ui-control/](https://developers.facebook.com/docs/ios/login-ui-control/)

它也可能对您有所帮助。

# android - 在android中处理静态变量

> ID：13718160
> 
> 赞同：0
> 
> 时间：2012-12-05T07:17:42.050
> 
> 标签：android

我的应用程序中有很多活动（例如 A->B->C->D）...我有一个用于会话超时的倒数计时器。我所做的是创建了一个静态计数器...我在活动 A 处启动计数器......如果用户交互计数器被重置......这也适用于活动 B、C、D....同样在完成活动 D 时，活动 A 开始......为此我已经使用`addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)`所以它清除堆栈...

但是当活动 A 再次启动时会发生什么......一个新实例与前一个计数器一起创建并继续在后台运行......并且不会在用户交互时重置......我已经`counter = null`在 onDestroy 中完成......是对的还是我需要做其他事情？？？

```
 public class CountTime extends Activity {

    TextView tv;
    static MyCount counter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        tv = new TextView(this);
        this.setContentView(tv);
        // 5000 is the starting number (in milliseconds)
        // 1000 is the number to count down each time (in milliseconds)
        counter = new MyCount(5000, 1000);
        counter.start();
    }

    @Override
    public void onUserInteraction() {
        // TODO Auto-generated method stub
        super.onUserInteraction();
        counter.start();
    }

    // countdowntimer is an abstract class, so extend it and fill in methods
    public class MyCount extends CountDownTimer {
        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            tv.setText("done!");
        }

        @Override
        public void onTick(long millisUntilFinished) {
            tv.setText("Left: " + millisUntilFinished / 1000);
        }
    }
    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        counter = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:36:07.333

这是正常的 Android 行为。

在任何时候，一个 Activity 不是前台 Activity，它可能会被销毁，这取决于一些非确定性标准，例如可用内存、正在运行的后台应用程序数量等。

在您的情况下，活动 A 正在被销毁，当您返回它时，会创建一个新实例并调用它的 onCreate() 。

通常，您永远不应该尝试从另一个活动访问活动中的某些内容。

您可以扩展您的应用程序类并在其中实例化您的计时器。

```
public class MyApplication extends Application{

    static MyCount counter;

    @Override public void onCreate () 
    {     
        super.onCreate();   
        counter = new MyCount();
    } 

} 
```

在您的清单中

```
<application android:name="com.myname.MyApplication" 
```

您应该只在真正需要时才使用这种技术。请不要将所有内容都放在扩展的应用程序类中以使事情变得简单。这真是不好的做法。

最后，Android 没有约定 onDestroy() 将在您的活动被销毁时调用。只有您自己完成（）活动才能保证。您应该使用 onPause() 来执行当您的活动进入后台（并且可能被破坏）时需要发生的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T07:29:27.217

您可以通过替换此行来尝试

```
 counter = null; 
```

到线

```
 counter.cancel(); 
```

# batch-file - 剥离文件扩展名，但前提是它存在

> ID：13718163
> 
> 赞同：0
> 
> 时间：2012-12-05T07:17:59.213
> 
> 标签：batch-file

我有个问题。

我想知道如何从其名称中删除文件扩展名，但前提是它首先存在，因此仅删除最后四个字符是行不通的。

我使用批处理

这导致我的错觉：

```
rem SETS THE NAME THE USER WANTS TO SAVE THE FILE AS...
SET /P MY_NAME=   FILE NAME: 

REM SAVES FILE AS INDICATED BY USER...
ECHO %MYTEXT% > "%MY_DIR%\%MY_NAME%.txt" 
```

我可以完全关闭扩展（第二行代码）但是用户可能不会自己添加扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T09:47:11.047

[记录@npocmaka 回答了这个问题]

要检查文件是否存在，请使用：

```
if [not] exist %myfile% (something) 
```

要获取不带扩展名的文件名，请使用：

```
for /f %%F in (%myfile%) do ( echo %%~nF) 
```

# javascript - 了解 Javascript 发布订阅

> ID：13718165
> 
> 赞同：1
> 
> 时间：2012-12-05T07:18:03.013
> 
> 标签：javascript, jquery, publish-subscribe

我试图用一个非常简单的例子来理解 PubSub。在我的小提琴中，我有一个简单的输入元素。如何使用输入字段的值更新我的 model.prop？ [小提琴](http://jsfiddle.net/amitava82/CHvFk/3/)

```
<button>update</button>
<input type="text" value="10" /> <br />
<label></label>​

var model = function(){
    var p1 = $('input').val();
    return {
        prop: p1             
    }        
}();

$('button').click(function(){
    $('label').text(model.prop)      
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:10:08.347

我认为这不是 Pub/Sub 模式的示例，但请查看以下代码段：

```
var model = (function() {
    var inp = $('input');
    return {
        getProp: function() {
           return inp.val();
        }
    };
})();

$('button').click(function(){
    $('label').text(model.getProp());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:28:22.100

试试这个：

```
$(function(){

    var model = function(){
        return {
            prop: function () {
                return $('input').val();
            }                
        }        
    }();

    $('button').click(function(){
        $('label').text(model.prop)      
    })

})​ 
```

这是有效的，因为不是为`prop`属性定义标量值，而是定义一个函数并获得该结果。因此，每次调用该属性时，它都会使用文本字段中的值动态更新。请参阅[http://jsfiddle.net/CHvFk/4/](http://jsfiddle.net/CHvFk/4/)。​</p>

# c - Valgrind C：如何从 stdio 输入字符串

> ID：13718167
> 
> 赞同：0
> 
> 时间：2012-12-05T07:18:05.373
> 
> 标签：c, memory-management, valgrind

这是代码：

```
char* inputString(){
    int n = 5;
    int size = n;
    char* const_str = (char*)malloc((n+1)*sizeof(char));
    char* substring = (char*)malloc((n+n)*sizeof(char)); /*here*/
    char*p;
    while((fgets(const_str,n,stdin)!=NULL)&&(strchr(const_str,'\n')==NULL)){
        strcat(substring,const_str);
        size += n;
        substring = (char*)realloc(substring,size*sizeof(char)); /*here*/
        }
    strcat(substring,const_str);
    size += n;
    substring = (char*)realloc(substring,size*sizeof(char)); /*here*/
    /*
    printf("<%s> is \n",const_str);
    printf("%s is \n",substring);
    printf("%d is \n",size);
    */
    if ((p=strchr(substring,'\n'))!=NULL){
        p[0]='\0';
    }
    if(feof(stdin)){
        changeToFull();
    }
    return substring;
} 
```

它不适用于 valgrind。

我想，我这里有内存泄漏，但是，我看不到任何好的解决方案来为 valgrind 重写这个函数。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:23:58.133

我还没有尝试过，但我在 SO 上的一个问题上发现了这个：

```
--input-fd=<number> [default: 0, stdin]
          Specify the file descriptor to use for reading  input  from  the
          user.  This  is  used whenever valgrind needs to prompt the user
          for a decision. 
```

这里的原始问题：[使 valgrind 能够在 c++ 需要时读取用户输入](https://stackoverflow.com/questions/4973921/making-valgrind-able-to-read-user-input-when-c-needs-it)

编辑：

因此，对于您的情况，您可以尝试：

```
mkfifo /tmp/abcd
exec 3</tmp/abcd
valgrind_command...... --input-fd=3 
```

& 在另一个终端中，使用

```
cat > /tmp/abcd 
```

# sql - 解析自引用表时 CTE 中的无限循环

> ID：13718168
> 
> 赞同：13
> 
> 时间：2012-12-05T07:18:15.937
> 
> 标签：sql, sql-server, sql-server-2008, tsql, recursive-query

我正在使用以下公用表表达式来解析自引用表。但是CTE不起作用，产生无限循环并产生错误：

> Msg 530, Level 16, State 1, Line 1 语句终止。在语句完成之前，最大递归 100 已用完。

如何修改此 CTE 以使其正常工作？

```
SET NOCOUNT ON;
USE tempdb;

IF OBJECT_ID('dbo.Employees', 'U') IS NOT NULL DROP TABLE dbo.Employees;

CREATE TABLE dbo.Employees
(
  empid   INT         NOT NULL PRIMARY KEY,
  mgrid   INT         NULL     REFERENCES dbo.Employees,
  empname VARCHAR(25) NOT NULL,
  salary  MONEY       NOT NULL,
  CHECK (empid > 0)
);

INSERT INTO dbo.Employees(empid, mgrid, empname, salary) VALUES
  (1,  1, 'David'  , $10000.00),
  (2,  1,    'Eitan'  ,  $7000.00),
  (3,  1,    'Ina'    ,  $7500.00),
  (4,  2,    'Seraph' ,  $5000.00),
  (5,  2,    'Jiru'   ,  $5500.00),
  (6,  2,    'Steve'  ,  $4500.00),
  (7,  3,    'Aaron'  ,  $5000.00),
  (8,  5,    'Lilach' ,  $3500.00),
  (9,  7,    'Rita'   ,  $3000.00),
  (10, 5,    'Sean'   ,  $3000.00),
  (11, 7,    'Gabriel',  $3000.00),
  (12, 9,    'Emilia' ,  $2000.00),
  (13, 9,    'Michael',  $2000.00),
  (14, 9,    'Didi'   ,  $1500.00);

; with  Tree as
        (
        SELECT  empid
        ,       mgrid
        ,       1 as lv
        ,       1 as level1
        ,       null as level2
        ,       null as level3
        ,       null as level4
        ,       null as level5
        FROM    Employees
        WHERE   empid = 1 and mgrid = 1
        UNION ALL
        SELECT  E.empid
        ,       E.mgrid
        ,       T.lv + 1
        ,       T.level1
        ,       case when T.lv = 1 then E.empid else t.level2 end
        ,       case when T.lv = 2 then E.empid else t.level3 end
        ,       case when T.lv = 3 then E.empid else t.level4 end
        ,       case when T.lv = 4 then E.empid else t.level5 end
        FROM    Employees AS E
        JOIN    Tree T
        ON      E.mgrid = T.empid
        )
select  *
from Tree
order by empid 
```

首选输出是

```
+-------+-------+----+--------+--------+--------+--------+--------+
| empid | mgrid | lv | level1 | level2 | level3 | level4 | level5 |
+-------+-------+----+--------+--------+--------+--------+--------+
|     1 |     1 |  1 |      1 | NULL   | NULL   | NULL   | NULL   |
|     2 |     1 |  2 |      1 | 2      | NULL   | NULL   | NULL   |
|     3 |     1 |  2 |      1 | 3      | NULL   | NULL   | NULL   |
|     4 |     2 |  3 |      1 | 2      | 4      | NULL   | NULL   |
|     5 |     2 |  3 |      1 | 2      | 5      | NULL   | NULL   |
|     6 |     2 |  3 |      1 | 2      | 6      | NULL   | NULL   |
|     7 |     3 |  3 |      1 | 3      | 7      | NULL   | NULL   |
|     8 |     5 |  4 |      1 | 2      | 5      | 8      | NULL   |
|     9 |     7 |  4 |      1 | 3      | 7      | 9      | NULL   |
|    10 |     5 |  4 |      1 | 2      | 5      | 10     | NULL   |
|    11 |     7 |  4 |      1 | 3      | 7      | 11     | NULL   |
|    12 |     9 |  5 |      1 | 3      | 7      | 9      | 12     |
|    13 |     9 |  5 |      1 | 3      | 7      | 9      | 13     |
|    14 |     9 |  5 |      1 | 3      | 7      | 9      | 14     |
+-------+-------+----+--------+--------+--------+--------+--------+ 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-05T07:51:47.037

无限循环的原因是第一个记录 where `empid=mgrid`。要处理此问题，您应该包含一个累积字段（`levels`在此示例中）以存储`mgrid`您已处理并检查是否`emid`已在此列表中以避免循环。

这是一个查询：

```
with Tree as
        (
        SELECT  empid
        ,       mgrid
        ,       1 as lv
        ,       1 as level1
        ,       null as level2
        ,       null as level3
        ,       null as level4
        ,       null as level5
        ,       cast(mgrid as varchar(max)) levels  
        FROM    Employees
        WHERE   empid = 1 and mgrid = 1
        UNION ALL
        SELECT  E.empid
        ,       E.mgrid
        ,       T.lv + 1
        ,       T.level1
        ,       case when T.lv = 1 then E.empid else t.level2 end
        ,       case when T.lv = 2 then E.empid else t.level3 end
        ,       case when T.lv = 3 then E.empid else t.level4 end
        ,       case when T.lv = 4 then E.empid else t.level5 end
        ,       T.levels+','+cast(E.mgrid as varchar(max)) levels   

          FROM    Employees AS E
        JOIN    Tree T
        ON      E.mgrid = T.empid 
                and (','+T.levels+',' 
                      not like 
                     '%,'+cast(E.empid as varchar(max))+',%')
        )
select  *
from Tree
order by empid 
```

这是[**SQLFiddle 演示**](http://sqlfiddle.com/#!3/94921/12)

# android - 如何获取从第三方应用程序下载并存储在 sd 卡中的图像的路径

> ID：13718174
> 
> 赞同：1
> 
> 时间：2012-12-05T07:19:06.043
> 
> 标签：android

我正在尝试打开画廊并从那里选择图像。我得到了从相机捕获的所有图像的路径，但无法获得从 Facebook/picassa 等下载的图像的真实路径。它给出的路径就像[https://lh3.googleusercontent.com/XNzSBp0MycQ/TigFxMIWn2I/AAAAAAAAAAAAg/YJPWAWmGOy0/I/11%252520-%2525201.jpg](https://lh3.googleusercontent.com/XNzSBp0MycQ/TigFxMIWn2I/AAAAAAAAAAg/YJPWAWmGOy0/I/11%252520-%2525201.jpg) 即使它在画廊。

这是我的代码::

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),SELECT_IMAGE); 
```

我正在使用以下代码来获取路径

```
 Uri selectedImageUri = data.getData();
        String selectedImagePath = getPath(selectedImageUri);  

           public String getPath(Uri uri) {

    int columnIndex = 0;
    String[] projection = { MediaColumns.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    if (cursor != null) {
        columnIndex = cursor.getColumnIndexOrThrow(MediaColumns.DATA);
        cursor.moveToFirst();
        String imagePath = cursor.getString(columnIndex);
        return imagePath;
    } else {
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:23:38.617

```
String filename = "image.jpg";
String path = "/mnt/sdcard/" + filename;
 File f = new File(path);  //  
            Uri imageUri = Uri.fromFile(f); 
```

# php - 在表单提交之前执行一些 sql 查询以将值插入数据库

> ID：13718177
> 
> 赞同：0
> 
> 时间：2012-12-05T07:19:25.577
> 
> 标签：php, jquery, html, mysql, ajax

我在使用 jquery 和 Ajax 提交表单时遇到问题。我的问题是我想在提交表单之前向数据库中插入一些值。我正在使用的代码提交表单如下：

```
$('.buttons').click(function(){

var account_num = $("#accountNum").val();
var ref_num = $("#refNum").val();

var dataString = "account_num="+ escape(account_num) + "&reference_no=" + escape(ref_num);

$("#frmTransaction").hide();
$("#loader_div").show();

$.ajax({
   type : "Post",
   url  : "validate-data.php",
   data : dataString,
   success: function(html) {
      if(html) {
    alert(html);
    $("#frmTransaction").submit();

      } else {
          alert('Unknown Error Please...Retry');    
       return false;
       }
    }, error :function (){
        return false    
    }, 
       complete: function () {  }

});
 return false;

}); 
```

html表单如下：

```
<form  method="post" action="https://sample.com/pay" name="frmTransaction" id="frmTransaction">
<input name="accountNum" id="accountNum" type="hidden" size="60" value="<? echo $_POST['account_id'] ?>">
<input name="refNum" id="refNum" type="hidden" size="60" value="<? echo $reference_no;?>" />
<input type="text" class="field" name="name" id="name" />
<input type="text" class="field" name="city" id="city" />
<input type="text" class="field" name="state" id="state" />
<input type="text" class="field" name="postal_code" id="postal_code" />
<input type="submit" class="buttons" name="submitted" value="Proceed" />
</form> 
```

validate-data.php 的内容如下：

```
<?PHP
        $account_num = $_REQUEST['account_num'];
    $reference_no = $_REQUEST['reference_no'];

    $countF = mysql_num_rows(mysql_query("SELECT * FROM orders where order_id='".$reference_no."'"));

    if($countF == 0 ) {
        $res = mysql_query("insert into orders(order_id, user_account_num)values('".$reference_no."', '".$account_num."')");
    } 

if($res) 
    echo "$res ";
else 
    echo "";    
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:27:20.183

您的表单未提交，因为在提交按钮的 Javascript 中`click`，您`return false`最后。这意味着表单将被阻止提交，因此完全删除该行。

我还注意到您将原始帖子数据构建为字符串，您可以这样做，但让 jQuery 处理它更容易，您可以传递一个对象文字而不是编码：

```
$.ajax({
    .....
    data : { 'account_num' : account_num, 'reference_no' : ref_num },
    ..... 
```

在 PHP 中，您正在回显 MySQL 结果资源。相反，您应该回显类似 boolean `1`or`0`或 JSON 编码响应对象的内容。

```
echo $res ? '1' : '0'; 
```

上面是一个三元运算符，如果查询成功则 echo `1`，如果不成功则 echo `0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T11:56:21.720

只有两个问题：一、看你的回调`success:`

```
success: function(html) {
  if(html) {
  alert(html);
  $("#frmTransaction").submit();

  } else {
      alert('Unknown Error Please...Retry');    
   return false;
   }
} 
```

您的 if 语句将询问计算机，如果 isset 变量`html` 和两个，则在您的 php 代码上打印 mysql 查询...

```
if($res) 
   echo "$res ";
else 
   echo ""; 
```

和解决方法：用这个改变你的jquery代码：

```
$.ajax({
 type : "Post",
 url  : "validate-data.php",
 data : dataString,
 success: function(html) {
 var callback = $.parseJSON(html); // Parse your callback
   if(callback.process == 'success'){
      $("#frmTransaction").submit();
   } else {
      alert('Unknown Error Please...Retry');    
   }
 }, error:function(){
    alert('Unknown Error Please...Retry');    
 }, 
}); 
```

和php代码：

```
<?PHP
 $account_num = mysql_real_escape_string($_POST['account_num']); // make sure `$_POST` and `mysql_real_escape_string` used to prevent sql injection
 $reference_no = mysql_real_escape_string($_POST['reference_no']); // And this line too

 $countF = mysql_num_rows(mysql_query("SELECT * FROM orders where   order_id='".$reference_no."'"));

if($countF == 0 ) {
    $res = mysql_query("insert into orders(order_id,   user_account_num)values('".$reference_no."', '".$account_num."')");
} 

if($res){
  echo json_encode(Array("process" => "success"));
}
else {
  echo json_encode(Array("process" => "fail")); 
}
?> 
```

祝你好运，朋友

# java - 在java中将带有字母的字符串数组转换为int数组

> ID：13718180
> 
> 赞同：2
> 
> 时间：2012-12-05T07:19:28.803
> 
> 标签：java, arrays, string, integer, int

好的，我将在这里尝试解释我的问题，我需要做的是将字符串数组转换为 int 数组。

这是我所拥有的一部分（以及初始设置）

```
 System.out.println("Please enter a 4 digit number to be converted to decimal ");
    basenumber = input.next();

    temp = basenumber.split("");
    for(int i = 0; i < temp.length; i++)
        System.out.println(temp[i]);

    //int[] numValue = new int[temp.length];
    ArrayList<Integer>numValue = new ArrayList<Integer>();

    for(int i = 0; i < temp.length; i++)
        if (temp[i].equals('0')) 
            numValue.add(0);
        else if (temp[i].equals('1')) 
            numValue.add(1);
                     ........
        else if (temp[i].equals('a') || temp[i].equals('A'))
            numValue.add(10);
                     .........
             for(int i = 0; i < numValue.size(); i++)
        System.out.print(numValue.get(i)); 
```

基本上我正在尝试将 0-9 设置为实际数字，然后从输入字符串（例如 Z3A7）中继续将 az 设置为 10-35，理想情况下将打印为 35 3 10 7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T07:38:01.057

在你的循环中试试这个：

```
Integer.parseInt(letter, 36); 
```

这将解释`letter`为 base36 数字（0-9 + 26 个字母）。

```
Integer.parseInt("2", 36); // 2
Integer.parseInt("B", 36); // 11
Integer.parseInt("z", 36); // 35 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:24:59.383

您可以在循环中使用这一行（假设用户没有输入空字符串）：

```
int x = Character.isDigit(temp[i].charAt(0)) ?
        Integer.parseInt(temp[i]) : ((int) temp[i].toLowerCase().charAt(0)-87) ;

numValue.add( x ); 
```

**上面代码的解释：**

*   `temp[i].toLowerCase()`=> z 和 Z 将转换为相同的值。
*   `(int) temp[i].toLowerCase().charAt(0)`=>字符的*ASCII*码。
*   `-87`=> 为您的规格减去 87。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:35:55.757

考虑到您想将 Z 表示为 35，我编写了以下函数

**更新 ：**

Z 的 ASCII 值为 90，因此如果要将 Z 表示为 35，则应将 55 中的每个字符减去 (90-35=55)：

```
public static int[] convertStringArraytoIntArray(String[] sarray) throws Exception {
    if (sarray != null) {
        int intarray[] = new int[sarray.length];
        for (int i = 0; i < sarray.length; i++) {
            if (sarray[i].matches("[a-zA-Z]")) {
                intarray[i] = (int) sarray[i].toUpperCase().charAt(0) - 55;
            } else {
                intarray[i] = Integer.parseInt(sarray[i]);
            }
        }
        return intarray;
    }
    return null;
} 
```

# git - Move tag after commit on specified branch

> ID：13718182
> 
> 赞同：1
> 
> 时间：2012-12-05T07:19:33.543
> 
> 标签：git

I have a tag, that points on commit in branch.

This tag must be only in that branch.

Is it possible to make after commit hook, that will move tag's pointer to fresh commit, if this commit in specified branch?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:41:12.003

您可以移动标签：

```
git tag -a -f yourTag 
```

但这意味着

```
git push origin :refs/tag/yourTag # delete it on the remote
                                  # if you already pushed it
git push origin master --tags 
```

# sql - Combine two sql queries into one query

> ID：13718184
> 
> 赞同：2
> 
> 时间：2012-12-05T07:19:42.910
> 
> 标签：sql, db2

How can I combine following 2 queries so that I can get two columns PAYMODE and PAYTYPE. Both queries are similar and for same table.Combine two sql queries into one query so that I don't need to execute two separate queries.

```
SELECT ETBL_DESC_TXT as PAYMODE
FROM tedit
WHERE CO_ID = 'CP'
AND   ETBL_TYP_ID = 'PMODE'
AND   ETBL_VALU_ID = 'RC'

select ETBL_DESC_TXT as PAYTYPE
FROM tedit
WHERE CO_ID = 'CP'
AND   ETBL_TYP_ID = 'PTYPE'
AND   ETBL_VALU_ID = 'ER' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:26:49.810

由于记录出现在源数据的不同行中，我很难在单个结果行中检索它们。您可以在一个查询中获得结果，该查询为您提供两行。尝试这个：

```
SELECT ETBL_DESC_TXT as PAYFIELD
FROM tedit
WHERE CO_ID = 'CP' AND (
      (ETBL_TYP_ID = 'PMODE' AND ETBL_VALU_ID = 'RC')
   OR (ETBL_TYP_ID = 'PTYPE' AND ETBL_VALU_ID = 'ER')
)
ORDER BY ETBL_TYP_ID 
```

第一行将包含 paymode，第二行将包含 paytype。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:24:21.793

你总是可以做到这一点

```
select
    (
        SELECT ETBL_DESC_TXT
        FROM tedit
        WHERE CO_ID = 'CP'
        AND   ETBL_TYP_ID = 'PMODE'
        AND   ETBL_VALU_ID = 'RC'
    ) as PAYMODE,
    (    
        select ETBL_DESC_TXT
        FROM tedit
        WHERE CO_ID = 'CP'
        AND   ETBL_TYP_ID = 'PTYPE'
        AND   ETBL_VALU_ID = 'ER'
    ) as PAYTYPE
from SYSIBM.SYSDUMMY1 
```

在 SQL Server 中你可以这样做（不能在 DB2 中测试，抱歉）

```
 SELECT
            max(case when ETBL_VALU_ID = 'RC' and ETBL_TYP_ID = 'PMODE' then ETBL_DESC_TXT else null end) as PAYMODE,
            max(case when ETBL_VALU_ID = 'ER' and ETBL_TYP_ID = 'PTYPE' then ETBL_DESC_TXT else null end) as PAYTYPE
        FROM tedit
        where 
            CO_ID = 'CP' and
            (
                 (ETBL_VALU_ID = 'RC' and ETBL_TYP_ID = 'PMODE') or
                 (ETBL_VALU_ID = 'ER' and ETBL_TYP_ID = 'PTYPE')
             ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T09:05:48.380

```
SELECT 'PAYMODE' as RowType,ETBL_DESC_TXT as PayValue
FROM tedit
WHERE CO_ID = 'CP'
AND   ETBL_TYP_ID = 'PMODE'
AND   ETBL_VALU_ID = 'RC'

union all

select 'PAYTYPE' as RowType, ETBL_DESC_TXT as PayValue
FROM tedit
WHERE CO_ID = 'CP'
AND   ETBL_TYP_ID = 'PTYPE'
AND   ETBL_VALU_ID = 'ER' 
```

# string - 从 std::string 转换为 String^

> ID：13718188
> 
> 赞同：6
> 
> 时间：2012-12-05T07:19:58.880
> 
> 标签：string, c++-cli, managed-c++

我在 C++ 中有一个函数，该函数具有 std::string 类型的值，并希望将其转换为 String^。

```
void(String ^outValue)
{
   std::string str("Hello World");
   outValue = str;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T07:35:00.480

谷歌搜索显示[marshal_as](http://msdn.microsoft.com/en-us/library/bb384859.aspx)（未经测试）：

```
// marshal_as_test.cpp
// compile with: /clr
#include <stdlib.h>
#include <string>
#include <msclr\marshal_cppstd.h>

using namespace System;
using namespace msclr::interop;

int main() {
   std::string message = "Test String to Marshal";
   String^ result;
   result = marshal_as<String^>( message );
   return 0;
} 
```

另请参阅[编组概述](http://msdn.microsoft.com/en-us/library/bb384865.aspx)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-02T11:29:11.423

来自 MSDN：

```
#include <string>
#include <iostream>
using namespace System;
using namespace std;

int main() {
   string str = "test";
   String^ newSystemString = gcnew String(str.c_str());
} 
```

[http://msdn.microsoft.com/en-us/library/ms235219.aspx](http://msdn.microsoft.com/en-us/library/ms235219.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-19T16:24:54.960

据我所知，至少 marshal_as 方法（不确定 gcnew 字符串）会导致 std::string 中的非 ASCII UTF-8 字符被破坏。

根据我在[https://bytes.com/topic/c-sharp/answers/725734-utf-8-std-string-system-string](https://bytes.com/topic/c-sharp/answers/725734-utf-8-std-string-system-string)上找到的内容，我构建了这个似乎对我有用的解决方案最少使用德语变音符号：

```
System::String^ StdStringToUTF16(std::string s)
{

 cli::array<System::Byte>^ a = gcnew cli::array<System::Byte>(s.length());
 int i = s.length();
 while (i-- > 0)
 {
    a[i] = s[i];
 }

 return System::Text::Encoding::UTF8->GetString(a);
} 
```

# html - 为什么我的页面样式在 Firebug 中的样式子部分的 HTML 选项卡下被删除

> ID：13718190
> 
> 赞同：0
> 
> 时间：2012-12-05T07:20:19.570
> 
> 标签：html, css, firebug

我有一个 html 页面。当我用 Firebug 检查它的元素时，它的样式被删除了。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:21:24.903

因为那条风格线被另一种风格覆盖了。这取决于样式表的层次结构以及样式在代码行中的位置。

例子：

```
#test-element {
    display: block;
}

#test-element {
    display: none;
} 
```

在您的萤火虫中，您会看到“display：block”行将有一个删除线，因为它被“display：none”覆盖

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:34:54.863

浏览器在通过它们时应用样式表。第一个被应用，然后是第二个等等。因此，如果你有类似的东西

```
div{color:#ffe000}
div{color:#ffffff} 
```

将应用第二种样式。

如果您不希望任何样式被后续更改覆盖，您可以使用 !important 属性。这将防止具有此属性的样式被覆盖。

```
div{color:#ffe000!important}
div{color:#ffffff} 
```

因此 div 将保留其 #ffe000 颜色。

希望这可以帮助。

# c# - Mismatch columns in the primary key : versus

> ID：13718194
> 
> 赞同：1
> 
> 时间：2012-12-05T07:20:29.223
> 
> 标签：c#, merge, dataset, primary-key, mismatch

While merging two DataSets in C# .net framework 4.0, it raised an error:

> *Mismatch columns in the primary key: `<target>` versus `<source>`*

My 1st Dataset is from SQL Server of datatype `Varchar`, while other is from Oracle database of datatype `Varchar2`.

```
// SQL Server database
OrgStockMaster.PrimaryKey = new DataColumn[] { OrgStockMaster.Columns["PkID001"] };

// Oracle database 
dtOracleStock.PrimaryKey = new DataColumn[] { dtOracleStock.Columns["PkID001"] }; 
```

While doing this,

```
dsStockMaster.Merge(StkFrmOracle);
DataSet dsDiff = dsStockMaster.GetChanges(); 
```

It raises this `DataException` :

> *Mismatch columns in the primary key: `<target>.PkID001` versus `<source>.PKID001`.*

# barcode - Paper Size and Orientation in RDLC Report

> ID：13718200
> 
> 赞同：2
> 
> 时间：2012-12-05T07:21:01.503
> 
> 标签：barcode, rdlc, barcode-printing

I am printing Barcode Stickers. My problem is the size of the stickers. I am using [The "Citizen CLP-621" printer](http://www.citizen-systems.com/Product.aspx?id=25#1).

The problem is that I want to print stickers in portrait, but when I decrease the height in the rdlc report it converts the orientation to landscape.

How can I set the custom width (3.5 inch) and height (1.2 inch), but keep the portrait paper orientation?

# android - Vcard sent as plain text

> ID：13718203
> 
> 赞同：2
> 
> 时间：2012-12-05T07:21:09.497
> 
> 标签：android, sms, vcf-vcard

I have generated a vcard of the selected contact. I am sending it through sms (though i know we could send it through mms, but there are some phones that dont support mms).

when I am sending it to another phone, the exact string is received as such,

```
BEGIN:VCARD
VERSION:2.1
N:Mahajan;Sahil;;;
FN:Sahil Mahajan
TEL;HOME:964-695-7130
EMAIL;HOME:sahilmahajanmj@gmail.com
END:VCARD 
```

But I want that on receiving this message, there should be a default option of saving it as contact.

I am sending it using the following code,

```
SmsManager sms = SmsManager.getDefault();
sms.sendTextMessage(mobileNumber, null, vCardString, null, null); 
```

here vCardString is the actual string containing the vcard. Let me know, if i need to post anything else.

# javascript - How to replace HTML encoded characters in JavaScript?

> ID：13718204
> 
> 赞同：0
> 
> 时间：2012-12-05T07:21:11.097
> 
> 标签：javascript, jquery

I have a XML which I parse and place in HTML, dynamically when asked for.

It has some line feed `&#xa;` which I want to replace with `&#10;&#09;`, so it comes in proper readable format. For some reason `&#xa;` is not creating a LineFeed.

```
var lput=$(xml).find('lput_info').attr('output');

lput=lput.ReplaceAll("&#xa;", "&#10;&#09;");

'<table class="jpanelTable" >'+
    '<tbody>'+              
    '<tr width="100%">'+
        '<th class="thPanel">Output</th>'+
        '<td class="tdPanel"><pre class="preWrap">'+lput+'</pre></td>'+
    '</tr>'+                
    '</tbody>'+
'</table>' 
```

Using this function from [here](http://codes.codedigest.com/CodeDigest/75-String-ReplaceAll-function-in-JavaScript.aspx):

```
String.prototype.ReplaceAll = function(stringToFind,stringToReplace){
    var temp = this;
    var index = temp.indexOf(stringToFind);
    while(index != -1){
        temp = temp.replace(stringToFind,stringToReplace);
        index = temp.indexOf(stringToFind);
    }
    return temp;
} 
```

**Update**

```
.preWrap {
    overflow: auto;
    font-family: "Consolas",monospace;
    font-size: 9pt;
    text-align:left;
    background-color: #FCF7EC;
    overflow-x: auto; /* Use horizontal scroller if needed; for Firefox 2, not
    white-space: pre-wrap; /* css-3 */
    white-space: -moz-pre-wrap !important; /* Mozilla, since 1999 */
    word-wrap: break-word; /* Internet Explorer 5.5+ */
    margin: 0px 0px 0px 0px;
    padding:5px 5px 3px 5px;
    white-space : normal; /* crucial for IE 6, maybe 7? */
} 
```

Part of the xml input string:

```
"bpmz.a&#xa;/usr/lib/libdl.a(shr_64.o)&#xa;/usr/lib/libperfstat.a(shr_64.o)&#xa;/usr/lib/lib.a" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:40:56.987

有些人可能会建议一个（jQuery）函数创建一个临时`div`的，将文本放在那里，然后获取 , 的内容`div`来解码字符串。

尽管它的实现很简单，但它相当不安全，因为您几乎会要求用户在字符串中放置各种 html 标签。

[我建议使用这些功能](http://phpjs.org/functions/html_entity_decode/)
（[需要第二个功能](http://phpjs.org/functions/get_html_translation_table/)）

这些比`div`替代方案更安全。

# iphone - 在ios中的不同目标上定义一个宏两个值

> ID：13718205
> 
> 赞同：2
> 
> 时间：2012-12-05T07:21:12.240
> 
> 标签：iphone, ios

我有一个有两个目标的应用程序，我想为不同的目标定义一个具有不同值的宏。我该怎么做？两者都是发布版本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T07:44:45.457

每个目标在 Xcode 中都有自己的“构建设置”，您可以在其中设置“预处理”类别（查找定义 'DEBUG=1' 的位置），您可以在其中设置目标唯一的自定义宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:46:38.907

这样做

```
#define CONSOLE_DEBUG 1 // Comment this line to undefine

#ifdef CONSOLE_DEBUG
     #define SMLog(format, ...) NSLog((@"%s (%d) " format), __PRETTY_FUNCTION__, __LINE__, ##__VA_ARGS__)
#else
     #define SMLog(format, ...)
#endif 
```

当您定义 CONSOLE_DEBUG 时，SMLOG 将使用 Pretty 功能打印日志。否则，如果您在上面注释，那么它只会打印一个简单的 NSLOG。

您可以简单地检查目标宏而不是 CONSOLE_DEBUG。

**编辑：**

在我的一个应用程序中，我需要提供不同的 URL，所以使用不同的目标进行如下操作

```
#ifdef APP_LIVE

    #define strDefaultURL <Some URL String>
    #define strIndexPlistURL <Some URL String>

#elif APP_DEV

    #define strDefaultURL <Some URL String>
    #define strIndexPlistURL <Some URL String>

#else

    #define strDefaultURL <Some URL String>
    #define strIndexPlistURL <Some URL String>

#endif 
```

其中 APP_LIVE 和 APP_DEV 在各自的目标中定义。

# ruby-on-rails - Net::HTTP::Post::Multipart file parameter with file on the fly

> ID：13718211
> 
> 赞同：2
> 
> 时间：2012-12-05T07:21:35.200
> 
> 标签：ruby-on-rails, ruby, multipart, httparty, net-http

I'm trying to do a Net::HTTP:POST::Multiport and send some text in a file format to an API.

I get the data from my database, and I don't want to create physical files, I want to create a file on the fly with the data and send it to the API. Right now I have

```
request = Net::HTTP::Post::Multipart.new("my/path", 
                                           { "file" => UploadIO.new(file, "text/plain", file.path), 
                                             "merge" => false, 
                                             "ignore_missing" => false, 
                                             "label" => "", 
                                             "low_priority" => false }) 
```

Here `file` is supposed to be a file object I read from the disk or an `IO` according to [http://rubydoc.info/gems/multipart-post/1.1.0/UploadIO#initialize-instance_method](http://rubydoc.info/gems/multipart-post/1.1.0/UploadIO#initialize-instance_method), any idea how I can just create a JSON IO from a bunch of strings, without having to create a file and write to it?

Also any idea how I can do this via `httmultiparty` ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:26:42.710

是的，您可以通过“httmultiparty”
在您的控制器方法中添加 -

```
class SomeController <  ApplicationController
   def send_file
       response = Foo.post('/', :query => {
                  :file => File.new('abc.txt') # Generate your file here
       })
       # here Foo is class_name which is present in model/foo.rb
       response.code # it give response code success or failure.
   end
end 
```

在模型中，只需创建任何文件，让 foo.rb 并添加以下代码 -

```
require 'httmultiparty'
class Foo
   include HTTMultiParty
   base_uri 'my/path' #url where to send file 
end 
```

您只需执行 . 即可获得路径上的文件`params[:file]`。我认为这对你有帮助。

# angularjs - 如何在 AngularJS 中设置重复的元素 id？

> ID：13718215
> 
> 赞同：8
> 
> 时间：2012-12-05T07:21:54.233
> 
> 标签：angularjs

我想做类似的事情：

```
<div class='row' ng-repeat='row in _.range(0,12)'>
    <div id='{{row}}'></div>
</div> 
```

但是在控制器中我尝试：

```
function SetterForCatanCtrl($scope) {
    $scope._ = _;
    try {
        var tile = document.getElementById('5');
        tile.style.backgroundImage = "url('aoeu.png')";
    } catch (e) {
        alert(e)
    }
} 
```

`getElementById`返回 null 那么如何使用 AngularJS 变量设置元素的 id？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T08:04:25.987

该函数`SetterForCatanCtrl`仅运行一次，当 angular`ngController`在引导您的应用程序时遇到指令时。发生这种情况时，您要从 DOM 访问的元素还不存在。

从控制器进行DOM**操作不是一个好习惯**，指令可以解决您所面临的问题。你的用例可以通过 CSS 和切换类来解决，但我想你想做的不仅仅是设置背景图像。

# 来自控制器的 DOM 操作

您不要求自定义指令，因此可以使用 ngClick 指令完成快速解决方案并调用可以切换图像的方法

示例 HTML

```
<div ng-controller='ctrl'>
    <div class='row' ng-repeat='row in _.range(0,12)'>
        <div id='{{row}}' ng-click="click($index)">
            <button>{{row}}</button>
        </div>
    </div>
</div> 
```

和 JS

```
var App = angular.module('app', []);

App.run(function($rootScope) {
  $rootScope._ = _;
});

App.controller('ctrl', function($scope){
    $scope.click = function(idx){
        var elem = document.getElementById(idx);
        console.log('clicked row', idx, elem);   
    };
​});    ​ 
```

因此，当单击按钮时，您将获得一个 id 并使用它从 DOM 中获取一个元素。但让我再说一遍，对于这个用例，指令是更好的选择。

JSFiddle：http: [//jsfiddle.net/jaimem/3Cm2Y/](http://jsfiddle.net/jaimem/3Cm2Y/)

pd：如果您加载 jQuery，您可以使用`angular.element(<selector>)`它从 DOM 中选择元素。

* * *

编辑：添加指令示例

# 来自指令的 DOM 操作

使用指令更简单，因为您只需将事件绑定到应用指令的元素

HTML

```
<h1>Directive</h1>
<div class='row' ng-repeat='row in _.range(0,12)'>
    <div id='{{row}}' my-directive>
        <button>{{row}}</button>
     </div>
</div> 
```

JS

```
App.directive('myDirective', function(){
    return function(scope, element, attr){
        element.bind('click', function(){        
            console.log('clicked element: ', element, element.html());
        });
    };
}); 
```

[http://jsfiddle.net/jaimem/3Cm2Y/1/](http://jsfiddle.net/jaimem/3Cm2Y/1/)

# php - Advantaged and disadvantages of using switch statements without curly braces

> ID：13718216
> 
> 赞同：2
> 
> 时间：2012-12-05T07:21:55.997
> 
> 标签：php, performance, syntax, switch-statement, conditional-statements

```
switch($_SERVER["SCRIPT_NAME"]){
    case "/index.php":
            $this->pageId = 1;
        break;
    case "/shops/index.php":
            $this->pageId = 2;
        break;
    case "/shops/dailydeals.php":
            $this->pageId = 4;
        break;
    case "/shops/shops.php":
            $this->pageId = 5;
        break;
    case "/shops/deals.php":
            $this->pageId = 9;
        break;
    case "/shops/store.php":
            $this->pageId = 10;
        break;
    case "/user/cashmail.php":
            $this->pageId = 13;
        break;
    case "/user/cashmail.php":
            $this->pageId = 13;
        break;
    default ;
            $this->pageId = 1;
        break;
    } 
```

What do you say about the above code? I am trying to decide if I should use curly braces on my `case` arms or not. Each case in my example only has one line of code, so I am not using curly braces. Is there a performance difference between using with or without curly braces?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-17T08:53:08.083

我将在这个问题上添加我自己的答案，因为接受的答案不正确。

“多行” case 子句**可以**用花括号编写。是否应该完全取决于编写代码的开发人员和/或他们订阅的编码标准。

我个人在我使用的每一种编程语言（从 C 开始）中都在 case 语句中使用花括号，因为我相信它可以创建更具可读性的代码。

不，这不是语法错误。

关于性能。嗯，PHP 是解释的，所以从技术上讲，它必须解释花括号。但是，您不应该为了这样微不足道的性能提升而牺牲可读性。特别是在像 PHP 这样的语言中，性能影响远远超出了解释器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-12T01:48:20.780

您**应该**使用花括号，以便可以[折叠](https://en.wikipedia.org/wiki/Code_folding)case 子例程以提高可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-12T02:43:20.453

我发现这个问题类似于：“我应该用脏海绵还是油腻海绵洗车？” 答案当然是“都不是”。

我认为没有令人信服的理由用`switch()`块的冗长来膨胀你的文件。因为您只是将一个值转换为另一个值，所以您只需要一个“映射”或“查找”数组来利用。

这将帮助您发现愚蠢的编码错误，例如在您的 switch 块中复制一个案例（例如）：

```
case "/user/cashmail.php":
        $this->pageId = 13;
    break; 
```

查找的优点是简洁的代码，更容易（用人眼）扫描和维护。它也非常快，因为 php 在寻找数组中的键值方面做得非常好。我还应该声明，因为您的查找数组值可以合理地假定为静态的，所以您可以安全地将它们声明为常量。一旦这个代码结构就位，您只需要维护查找数组而不需要处理代码行。

代码：（[演示](https://3v4l.org/rse8b)）

```
define(
    'PATH_TO_PAGE_ID_LOOKUP',
    [
        "/index.php" => 1,
        "/shops/index.php" => 2,
        "/shops/dailydeals.php" => 4,
        "/shops/shops.php" => 5,
        "/shops/deals.php" => 9,
        "/shops/store.php" => 10,
        "/user/cashmail.php" => 13,
    ]
);
define('DEFAULT_PAGE_ID', 1);

$this->pageId = PATH_TO_PAGE_ID_LOOKUP[$_SERVER["SCRIPT_NAME"]] ?? DEFAULT_PAGE_ID;
echo $this->pageId;  // 9 
```

* * *

也就是说，从 PHP8 及更高版本开始，您还可以享受块的简洁性，[它`match()`是](https://www.php.net/manual/en/control-structures.match.php)开关和查找数组的漂亮孩子。

控制结构可以`match()`如下所示：（[演示](https://3v4l.org/vY4hr)）

```
$this->pageId = match ($_SERVER["SCRIPT_NAME"]) {
    "/index.php" => 1,
    "/shops/index.php" => 2,
    "/shops/dailydeals.php" => 4,
    "/shops/shops.php" => 5,
    "/shops/deals.php" => 9,
    "/shops/store.php" => 10,
    "/user/cashmail.php" => 13,
    default => 1,
};

echo $this->pageId; // 9 
```

这可能是在现代 php 中执行此任务的最干净的方式。也许您不会使用这种技术的唯一原因是：如果您还没有使用 PHP8，或者如果您计划在多个地方/方式使用查找数组并且具有单点参考提供了一些额外的好处。

# c++ - 如何创建指向另一个列表中对象的指针列表？

> ID：13718221
> 
> 赞同：2
> 
> 时间：2012-12-05T07:22:14.267
> 
> 标签：c++, list, pointers

我正在创建一个简单的图表，其中所有节点（或顶点）都收集到一个列表中。每个节点依次都有一个指针列表，这些指针可能指向第一个列表中的多个其他节点并调用这些边。例如，假设我有一个简单的图，`A -> B`然后`A -> C`Node`A`将有一个指向`B`和`C`作为边的指针列表。

在创建图表时，我首先创建节点，并使用与该节点相关的任何内容（权重或任何其他属性）填充它。然后我将该节点添加到所有节点的“主”列表中。之后，我将该节点的地址（现在是列表中的最后一个对象）传递给一个函数以添加到任何父节点：

`AddChildNode(&MasterListOfNodes.back(), NameOfParent)`

下面是添加子节点到父节点的代码

```
void GraphReader::AddChildNode(Vertex * const aChildVertex, const string aParent)
{
    for(list<Vertex>::iterator it = MasterListOfNodes.begin(); it != MasterListOfNodes.end(); it++)
    {
        if(it -> getName().compare(aParent) == 0)
        {
            it -> addEdge(aChildVertex);
            break;
        }
    }
} 
```

其中 addEdge 只是将新的孩子添加到父母“边缘”列表中：

```
const void Vertex::addEdge(Vertex * aEdge) {mEdges.push_back(aEdge);} 
```

我遇到的问题是边缘列表指向列表对象的副本，而不是列表本身中的实际对象：

![根节点和边的VS和打印输出](../Images/47b7db0884999831a0efbe2a37e5e061.png)

注意：根节点的地址（命令提示符输出）通过以下方式找到：

```
for (list<Vertex>::iterator it = MasterListOfNodes.begin(); it != MasterListOfNodes.end(); it++)
{
    cout << "Name: " << it->getName() << " | Address: {" << &(*it) << "}" << endl;
} 
```

如何创建指向主节点的边列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:40:35.980

当你使用：`list<Vertex>`那么列表数据结构将管理顶点在内存中的存储方式

您需要使用的是：`list<Vertex *>`

例子：

```
int main ()
{
    Vertex * a = new Vertex (..);

    list<Vertex*> v ();

    v.add(a);

    if (a == v[0])
    {
        // both points at the same Vertex in memory
    }

    return 0;
} 
```

# iphone - 如何使用objective c在一秒钟内拍摄和保存20张照片

> ID：13718225
> 
> 赞同：4
> 
> 时间：2012-12-05T07:22:31.123
> 
> 标签：iphone, objective-c, image, image-processing, avcapturesession

我正在创建一个照片捕捉应用程序，用户可以在一秒钟内拍摄多达 20 张照片。我已经尝试过苹果的 AVCam 示例代码，但它不允许以 20 FPS 的速度拍摄静止图像。

有没有其他方法可以以这种速度拍照。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:32:42.047

看到这个演示..[照片选择器](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196)

在这个演示中，只需检查或参考这两个类..

1.  [MyViewController.m](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Listings/MyViewController_m.html)和
2.  [OverlayViewController.m](http://developer.apple.com/library/ios/#samplecode/PhotoPicker/Listings/OverlayViewController_m.html)

在方法的`OverlayViewController.m`类中，`timedTakePhoto`只需按照您的要求设置计时器，如下所示..

```
- (IBAction)timedTakePhoto:(id)sender
{
    // these controls can't be used until the photo has been taken
    self.cancelButton.enabled = NO;
    self.takePictureButton.enabled = NO;
    self.timedButton.enabled = NO;
    self.startStopButton.enabled = NO;

    if (self.cameraTimer != nil)
        [self.cameraTimer invalidate];
    _cameraTimer = [NSTimer scheduledTimerWithTimeInterval:0.03
                                                   target:self
                                                 selector:@selector(timedPhotoFire:)
                                                 userInfo:[NSNumber numberWithInt:kOneShot]
                                                  repeats:YES];
     // set time with your requirement above     

    // start the timer to sound off a tick every 1 second (sound effect before a timed picture is taken)
    if (self.tickTimer != nil)
        [self.tickTimer invalidate];
    _tickTimer = [NSTimer scheduledTimerWithTimeInterval:1.0
                                                   target:self
                                                 selector:@selector(tickFire:)
                                                 userInfo:nil
                                                  repeats:YES];
} 
```

你可以从中得到想法，也可以使用这个演示来满足你的要求..

我希望这可以帮助你...

# c# - 在 MVC3 Razor 中单击提交按钮后在标签中显示测试框文本

> ID：13718227
> 
> 赞同：2
> 
> 时间：2012-12-05T07:22:42.413
> 
> 标签：c#, asp.net-mvc, razor

我的表单中有一个测试框控件和一个提交按钮控件以及一个标签控件。当我在我的测试框控件中输入一些文本并单击按钮控件时，我无法在我的标签控件中显示该文本。请帮忙。

由于我是 MVC 的新手并且正在学习基础知识，如果您能给我完整的编码，这将对我非常有帮助。

您也可以将编码邮寄给我。提前致谢。

我的代码如下：

模型

```
using System;
using System.Collections.Generic;
using System.Linq;

using System.Web;

namespace TestMVCProj.Models

{
     public class TestPost
     {
      public string name {get; set;}
     }
} 
```

控制器

```
using TestMVCProj.Models

public ActionResult TestPost(TestPost tp)
{
    return View();
} 
```

看法

```
@model TestMVCProj.Models.TestPost
@{
     ViewBag.Title ="TestPost";
}
@using (Html.BeginForm())
{
     @Html.TestBoxFor (x => x.name)
     <input type="submit" />
}
Your Name is <%= Model.name %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:34:50.210

我认为您需要在发布时将模型传递给 View。

```
public ActionResult TestPost(TestPost tp)
{
    return View(tp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:35:12.200

您可能需要在 Controller 中执行两个操作：

1.  一种采用 HTTP GET 且无参数的方式——用于初始页面加载
2.  一种以 HTTP POST 和模型作为参数的方法——用于回发

* * *

```
public ActionResult TestPost()
{
    return View();
} 

[HttpPost]
public ActionResult TestPost(TestPost post)
{
    return View(post);
} 
```

此外，由于您使用 Razor 作为视图，因此语法应如下所示：

```
Your Name is @Model.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:49:39.150

改变你的看法

```
 @model TestMVCProj.Models.TestPost
@{
     ViewBag.Title ="TestPost";
}
@using (Html.BeginForm())
{
     Html.TextBoxFor (x => x.name)
     <input type="submit" />
}
Your Name is @Model.name 
```

# python - 在python中使用html标签进行字符串分割

> ID：13718230
> 
> 赞同：1
> 
> 时间：2012-12-05T07:22:46.923
> 
> 标签：python, segments

我正在尝试使用 Python 将字符串分成更小的部分。各种情况可以是：
str1 = "Hello world。这是一个理想的示例字符串。"
结果：世界你好。
这是一个理想的示例字符串。

str2 = " `<H1>`Hello world。`</H1><P>`这是一个 HTML 示例字符串。`<P>`"
结果：
`<H1>`Hello world。`</H1>`
`<P>`这是一个 HTML 示例字符串。`<P>`

str3 = "1\. Hello World. 2\. 这是一个字符串。"
结果：
1\. Hello World。
2\. 这是一个字符串。

这是我的代码。但我似乎无法实现第二种情况：

```
import re

string = """<h1>This is a string.</h1><a href="www.abc.com"> This is another part. <P/>"""

segment_regex = re.compile(r"""
    (
        \r\n|
        \\r\\n|
        \n|
        \\n|
        \r|
        \\r|
        \t|
        \\t|
        (?:
            (?<=[^\d][\.|\!|\?])
            \s+
            (?=[A-Z0-9])
        )|
        (?:
            (?<=[\.|\!|\?])\s*(?=<.*?>)
        )
    )
    """, re.VERBOSE)
seg = segment_regex.split(string)
segments = seg[::2]
separator = seg[1::2]

print("Segments are ---->>")
for s in segments:
    print (s)

print("Separators are ---->>")
for p in separator:
    print (p) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:23:55.163

正则表达式可能试图一次做太多的事情。一种更简单且更易于管理的方法是首先检测字符串类型 html、idea、list，然后为每个类型调用适当的处理器。就像是 ：-

```
import re

string = """<h1>This is a string.</h1><a href="www.abc.com"> This is another part. <P/>"""
if re.search('<.*?>', string):
    split_html(string)
elif re.search('\\d\\.', string):
    split_list(string)
else:
    split_ideal(string) 
```

此外，虽然这可能适用于提到的情况，但通用“拆分器”会复杂得多，我并不声称这种方法适用于所有人。

# kendo-ui - 最初在 kendoui 中展开树视图项目

> ID：13718234
> 
> 赞同：2
> 
> 时间：2012-12-05T07:23:03.840
> 
> 标签：kendo-ui, kendo-treeview

我正在使用剑道 UI 树视图小部件控件。我正在动态地获取父母和孩子。我怎样才能扩展所有的父母和孩子。我写了代码：

```
 var treeview = $('#tree').kendoTreeView({
            dataSource: parent,
            dataTextField: ["question", "answer", "parentvalue"]
           });

            treeview.expand('.k-item'); 
```

但它不工作。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:49:41.490

如果您使用的是远程数据源，您将无法以这种方式扩展它，因为这些项目仍未加载和创建。

而是使用 TreeView 的**[dataBound](http://docs.kendoui.com/api/web/treeview#databound)**事件并将**[loadOnDemand](http://docs.kendoui.com/api/web/treeview#loadondemand%20booleandefault)**属性设置为 false （因此最初加载所有项目然后尝试展开项目（您可能需要递归执行）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:54:48.157

该`.kendoTreeView()`函数实际上返回应用树视图的 jQuery 元素，而不是小部件本身。

相反，您需要执行以下操作：

```
$("#my-treeview").data("kendoTreeView").expand(".k-item"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T12:54:09.050

与您的代码一样，您只能获得创建的元素，而不是与其关联的数据。您宁愿使用这样的代码：

```
$('#tree').kendoTreeView({
    dataSource: parent,
    dataTextField: ["question", "answer", "parentvalue"]
});
var treeview = $("#your-treeview-id").data("kendoTreeView"); 
```

正如我在上面的评论中指出的那样（而不是`var treeview = $("#tree").kendoTreeView(...)`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T09:54:32.093

函数展开树（）{

```
 treeview = $("#MyTreeview").data("kendoTreeView");

    if(treeview != undefined)
        {
            treeview.expand(".k-item");
        }
}

function CollapseTree()
{

   treeview = $("#MyTreeview").data("kendoTreeView");

    if(treeview != undefined)
        {
            treeview.collapse(".k-item");
             treeview.expand(".k-first"); //To expand only parent
        }
} 
```

# javascript - 如何从浏览器修改拖放行为？

> ID：13718241
> 
> 赞同：3
> 
> 时间：2012-12-05T07:23:38.440
> 
> 标签：javascript, google-chrome, drag-and-drop

按照惯例，如果我单击浏览器上的链接并拖动，“获取”的数据是 URL 及其名称，目标应用程序（MS Word 或 Java Swing 应用程序）可以使用这些数据。

**我想修改浏览器在拖动时的默认行为以包含更多数据。**

一个很好的应用程序是从谷歌搜索结果页面拖动。例如，如下图所示，当我从第一个结果区域（标记为**黄色**）的任意位置拖动时，我不仅要捕获页面的 url，还要捕获所有附加信息（例如“操作”的链接", "In Mac OS" 链接在第一个结果的底部）。

* * *

我不确定我需要什么才能获得这种行为。Javascript 可能是我猜想的一种解决方案（也许是一个让 javascript 代码在所有加载的页面上运行的扩展？），但我完全不确定。任何指针/提示/建议都会很有用。

* * *

![在此处输入图像描述](../Images/3e28023829c7411f11920bcece4658ee.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T07:12:27.520

要启用拖放功能，只需将`draggable="true"`其作为属性添加到元素上。

例子：

```
<div draggable="true">Little brother</div> 
```

所有拖动事件都有一个名为的属性`dataTransfer`，用于保存拖动数据。`dataTransfer`包含两条信息，数据格式（MIME）和存储的数据。使用 设置信息`event.dataTransfer.setData()`。

```
event.dataTransfer.setData("text/plain", "Text to drag"); 
```

这是一个更改拖放行为的示例。

设置：

*   使用 Google Chrome访问[Google.com 。](http://google.com)
*   搜索任何内容，例如“狗”。
*   按`F12`打开开发控制台。
*   在控制台中复制并粘贴[jQuery的内容。](http://code.jquery.com/jquery-1.8.3.min.js)
*   复制并粘贴`Drag-N-Drop Script`控制台中的内容。

用法：

*   将搜索结果部分从 Web 浏览器拖放到文本编辑器，例如写字板。

结果：

*   一组链接应显示在您的文本编辑器中。链接采用降价样式。

**拖放脚本**

```
(function () {
    // @author Larry Battle (http://bateru.com/news) 12.07.2012
    var URLS = {
        JQUERY : "http://code.jquery.com/jquery-1.8.3.min.js"
    };
    var SELECTORS = {
        GOOGLE_LINK_SECTIONS : ".g"
    };
    var getNameAndURLFromLinks = function (el) {
        var info = ["Links:\n"];
        $(el).find("a").each(function () {
            var url = $(this).attr("href");
            if (/https?:\/\//.test(url)) {
                info.push( "- [" + $(this).text() + "](" + url + ")");
            }
        });
        return info.join("\n");
    };
    var storeDataInEvent = function (evt) {
        var info = getNameAndURLFromLinks($(this));
        event.dataTransfer.setData('text/plain', info);
    };
    var main = function () {
        $(SELECTORS.GOOGLE_LINK_SECTIONS)
            .attr("draggable", true)
            .css("border", "3px orange solid")
            .bind("dragstart", storeDataInEvent);
    };
    if(!window.jQuery){
        window.alert("Paste the source of jQuery in the console and then run this script again. URL:" + URLS.JQUERY);
    }else if(!/search/.test(document.location.href)){
        window.alert("Google for something, then run this script in the console again.");
    }
    main();
}()); 
```

您应该能够为一定数量的网站创建具有此功能的 Google Chrome 扩展程序。每个站点应该有不同的`main()`功能。[但是，如果您针对前 100 个站点](http://www.alexa.com/topsites/global)进行测试，您或许能够创建一个通用算法。

*   拖放信息：[https ://developer.mozilla.org/en-US/docs/DragDrop/Drag_Operations](https://developer.mozilla.org/en-US/docs/DragDrop/Drag_Operations)
*   数据传输对象：[http ://help.dottoro.com/ljvspfdo.php](http://help.dottoro.com/ljvspfdo.php)
*   MIME 列表：[http ://en.wikipedia.org/wiki/Internet_media_type](http://en.wikipedia.org/wiki/Internet_media_type)

# bash - “（头；尾）<文件”是如何工作的？

> ID：13718242
> 
> 赞同：30
> 
> 时间：2012-12-05T07:23:39.063
> 
> 标签：bash, shell

（通过[https://stackoverflow.com/a/8624829/23582](https://stackoverflow.com/a/8624829/23582)）

如何`(head; tail) < file`工作？注意`cat file | (head;tail)`不是。

另外，为什么要`(head; wc -l) < file`给出`0`的输出`wc`？

注意：我了解头部和尾部的工作原理。只是不涉及这些特定调用的微妙之处。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T04:27:54.857

## 操作系统

对于 OS X，您可以查看[源代码`head`](http://opensource.apple.com/source/text_cmds/text_cmds-84/head/)和[源代码`tail`](http://opensource.apple.com/source/text_cmds/text_cmds-84/tail/)以了解发生了什么。在 的情况下`tail`，您需要查看`forward.c`。

所以，事实证明这`head`并没有做任何特别的事情。它只是使用库读取其输入`stdio`，因此它一次读取一个缓冲区并且可能读取太多。这意味着`cat file | (head; tail)`不适用于`head`'s 缓冲使其读取最后 10 行中的部分（或全部）的小文件。

另一方面，`tail`检查其输入文件的类型。如果它是一个常规文件，则`tail`寻找到最后并向后读取，直到找到足够的行来发出。这就是为什么`(head; tail) < file`适用于任何常规文件，无论大小。

## Linux

你也可以查看 Linux 的源代码`head`，`tail`但使用起来更容易`strace`，如下所示：

```
(strace -o /tmp/head.trace head; strace -o /tmp/tail.trace tail) < file 
```

看看`/tmp/head.trace`。您会看到该`head`命令尝试通过从标准输入（文件描述符 0）读取来填充缓冲区（在我的测试中为 8192 字节）。根据 的大小`file`，它可能会也可能不会填充缓冲区。无论如何，让我们假设它在第一次读取时读取了 10 行。然后，**它使用`lseek`将文件描述符备份**到第 10 行的末尾，基本上“未读取”它读取的任何额外字节。这是有效的，因为文件描述符是在一个普通的、可搜索的文件上打开的。所以`(head; tail) < file`适用于任何可搜索的文件，但它不会`cat file | (head; tail)`起作用。

另一方面， （在我的测试中）`tail`不会像在 OS X 上*那样*寻找到最后并向后读取。至少，它不会一直读回文件的开头。

这是我的测试。创建一个小的 12 行输入文件：

```
yes | head -12 | cat -n > /tmp/file 
```

`(head; tail) < /tmp/file`然后，在 Linux 上尝试。我用 GNU coreutils 5.97 得到了这个：

```
 1  y
     2  y
     3  y
     4  y
     5  y
     6  y
     7  y
     8  y
     9  y
    10  y
    11  y
    12  y 
```

但在 OS X 上，我得到了这个：

```
 1  y
     2  y
     3  y
     4  y
     5  y
     6  y
     7  y
     8  y
     9  y
    10  y
     3  y
     4  y
     5  y
     6  y
     7  y
     8  y
     9  y
    10  y
    11  y
    12  y 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-25T01:51:35.747

这里的括号创建一个`subshell`解释器的另一个实例来运行内部命令，有趣的是子shell充当单个标准输入/标准输出组合；在这种情况下，它将首先将 stdin 连接到`head`回显前 10 行并关闭管道，然后 subshel​​l 将其 stdin 连接到`tail`其消耗其余部分并将最后 10 行写回 stdout，但 subshel​​l 获取两个输出并写入它们作为它*自己的*标准输出，这就是它看起来合并的原因。

值得一提的是，同样的效果可以通过命令*分组*`{ head; tail; } < file`来实现，因为它不会创建另一个 bash 实例，因此更便宜。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T14:51:25.433

如果文件足够大，所有这些都应该按预期工作。head 命令将消耗一定数量的输入（不仅仅是它在缓冲输入时所需要的），如果没有为 tail 命令留下足够的输入，它将无法工作。

另一个问题是管道导致双方并行执行，因此生产方可能会导致消费方的 head 命令在每次运行时读取不同的数量。

比较以下命令的多次运行：

```
for i in `seq 1 10`; do echo "foo"; done | (head -n1; wc -l) 
```

wc 命令每次都应该看到不同数量的文件。

当使用 a`<`提供输入时，似乎不存在这种并行性（可能 bash 读取整个输入，然后将其传递给 head 命令）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-05T15:04:52.070

head 命令显示文件的前 10 行（默认）。tail 命令显示文件的最后 10 行（默认）。假设如果文件只有 3 行也没有问题，这些命令将显示这些行。但是如果你有超过 10 行，那么这两个命令将只显示默认的 10 行。使用 -n、n、+n 选项将更改默认行数。（参考手册页）

# html - css 下拉菜单显示悬停时每个子元素上的图像

> ID：13718248
> 
> 赞同：0
> 
> 时间：2012-12-05T07:24:36.213
> 
> 标签：html, css, wordpress

我正在使用 WordPress 211 主题并开发我的自定义主题。该网站的现场演示可以在[这里](http://modulesoft.info/projects/valuepayroll/)看到。在该站点中，您可以看到有两种类型的菜单。在左边，另一个在右边。在右侧菜单中，您可以看到有一个下拉菜单。当您将鼠标悬停在父菜单上时，下拉框会出现，但这有一个问题。当您将鼠标悬停在父菜单上时，可以看到下拉菜单，但右侧有箭头。所以在这里我希望当我将鼠标悬停在父菜单上时子菜单上不应该有箭头图像。有人可以告诉我该怎么做吗？我真的很了解这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:35:52.433

我认为您应该在 background-image: none; 之后添加 !important

```
#access #header-right-menu ul ul li a span {
    background-image: none !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:39:23.600

**定义你的**孩子`a span` `background-image:none;`

**添加这个CSS**

```
#access #header-right-menu ul li:hover ul a span {
    background-image: none;
} 
```

# cuda - cuBLAS argmin -- 如果输出到设备内存，会出现段错误？

> ID：13718253
> 
> 赞同：5
> 
> 时间：2012-12-05T07:24:51.963
> 
> 标签：cuda, gpu, gpgpu, blas, cublas

在 cuBLAS 中，`cublasIsamin()`给出单精度数组的 argmin。

这是完整的函数声明：`cublasStatus_t cublasIsamin(cublasHandle_t handle, int n, const float *x, int incx, int *result)`

cuBLAS 程序员指南提供了有关`cublasIsamin()`参数的信息： ![在此处输入图像描述](../Images/f385a76b8bbe4d7b11832a4ec57951e1.png)

如果我将**主机**（CPU）内存用于`result`，则`cublasIsamin`可以正常工作。这是一个例子：

```
void argmin_experiment_hostOutput(){
    float h_A[4] = {1, 2, 3, 4}; int N = 4; 
    float* d_A = 0;
    CHECK_CUDART(cudaMalloc((void**)&d_A, N * sizeof(d_A[0])));
    CHECK_CUBLAS(cublasSetVector(N, sizeof(h_A[0]), h_A, 1, d_A, 1));
    cublasHandle_t handle; CHECK_CUBLAS(cublasCreate(&handle));

    int result; //host memory
    CHECK_CUBLAS(cublasIsamin(handle, N, d_A, 1, &result));
    printf("argmin = %d, min = %f \n", result, h_A[result]);

    CHECK_CUBLAS(cublasDestroy(handle));
} 
```

但是，如果我将**设备**(GPU) 内存用于`result`，则会`cublasIsamin`出现段错误。这是一个段错误的示例：

```
void argmin_experiment_deviceOutput(){
    float h_A[4] = {1, 2, 3, 4}; int N = 4;
    float* d_A = 0;
    CHECK_CUDART(cudaMalloc((void**)&d_A, N * sizeof(d_A[0])));
    CHECK_CUBLAS(cublasSetVector(N, sizeof(h_A[0]), h_A, 1, d_A, 1));
    cublasHandle_t handle; CHECK_CUBLAS(cublasCreate(&handle));

    int* d_result = 0; 
    CHECK_CUDART(cudaMalloc((void**)&d_result, 1 * sizeof(d_result[0]))); //just enough device memory for 1 result
    CHECK_CUDART(cudaMemset(d_result, 0, 1 * sizeof(d_result[0])));
    CHECK_CUBLAS(cublasIsamin(handle, N, d_A, 1, d_result)); //SEGFAULT!

    CHECK_CUBLAS(cublasDestroy(handle));
} 
```

* * *

## Nvidia 指南说 `cublasIsamin()` 可以输出到设备内存。我究竟做错了什么？

* * *

**动机：**我想在多个流中同时计算多个向量的 argmin()。输出到主机内存需要 CPU-GPU 同步，并且似乎会杀死多内核并发。所以，我想将 argmin 输出到设备内存。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T08:08:45.013

CUBLAS V2 API 确实支持将标量结果写入设备内存。但它默认不支持这个。根据文档的第 2.4 节“标量参数”，您需要使用`cublasSetPointerMode()`让 API 知道标量参数指针将驻留在设备内存中。请注意，这也使这些 1 级 BLAS 函数异步，因此您必须确保 GPU 在尝试访问结果指针之前已完成内核。

有关完整的工作示例，请参阅[此答案](https://stackoverflow.com/a/12401838/681865)。

# ms-word - Word 2010 附加文件格式

> ID：13718254
> 
> 赞同：0
> 
> 时间：2012-12-05T07:24:51.963
> 
> 标签：ms-word, word-2010

我不确定这是否是最好的方法，或者我是否应该更清楚地问这个问题。

我想要做的是创建一个额外的文件输出 - 例如，如果用户使用 Word 创建由已知标签组成的描述，我希望能够将其保存为 bbcode。

现在我确实知道如何做到这一点，但是有没有办法说在“保存文件”对话框中添加另一种文件格式并让它运行一个解析器和文件编写器，它会读取当前文档和使用已知的 bbcode-tags 导出它（也许可以从某些配置窗口进行调整）？

结果将是一个包含 bbcode 以及用户输入的文本信息的文件。

如何将我的插件连接到文件输出对话框？有没有办法做到这一点？我不确定它是自定义 XML，因为我根本不会使用 XML。

在此先感谢，请原谅我糟糕的英语。

编辑：查看 Word 2010 AddIn 项目后，我想，我正在寻找一种方法来定义我自己的“导出”格式。我想将 BBCode 导出到 .txt（甚至 .bbcode）文件。Microsoft.Office.Interop.Word.WdExportFormat 似乎有自己的固定枚举。有没有办法添加导出格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:28:43.873

这里有一些代码：

phpbb.com/community/viewtopic.php?f=17&t=395554

# java - 使用滚动事件放大和缩小

> ID：13718259
> 
> 赞同：4
> 
> 时间：2012-12-05T07:25:38.353
> 
> 标签：java, javafx-2

我正在尝试创建一个包含对象的组`Rectangle`，以使用. 我无法从滚动的增量中获得正确的比例。以下代码是我目前所拥有的。任何帮助将不胜感激。`Text``ScrollEvent`

谢谢

```
import javafx.application.Application;
import javafx.event.EventHandler;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.input.ScrollEvent;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.scene.text.Text;
import javafx.stage.Stage;

// demonstrates scaling a test pane with content in it.
public class ScaleTest extends Application {
    Group page;
    double textScale =1.0;
    public static void main(String[] args) {
        launch();
    }

    @Override
    public void start(Stage stage) throws Exception {
        stage.setTitle("scale test");
        Group root = new Group();
        page= new Group();
        Rectangle r = new Rectangle(300,300);
        Text t = new Text("asodjoijdjiasjdoijaisjdijasijdiajsidjoiasjiodjiajosijdiojaisjdoijaoisjdiojaoisjdjaoisjdiojsoidj\njdoasijdoajsoidjoaisjoidjaoisjdiojs");
        t.setFill(Color.FLORALWHITE);
        t.setWrappingWidth(280);
        t.setX(10);
        t.setY(20);
        page.getChildren().addAll(r,t);
        root.getChildren().add(page);
        Scene scene = new Scene(root,800,600);
        this.setSceneEvents(scene);
        stage.setScene(scene);
        stage.show();
    }
    private void setSceneEvents(final Scene scene) {
        //handles mouse scrolling
        scene.setOnScroll(
                new EventHandler<ScrollEvent>() {
                    @Override
                    public void handle(ScrollEvent event) {
                        double xscale = page.getScaleX() * event.getDeltaY()/35;
                        double yscale= page.getScaleY() * event.getDeltaY()/35;
                        System.out.println("xscale: "+ xscale);
                        System.out.println("yscale: "+ yscale);
                        //page.setScaleX(page.getScaleX() * event.getDeltaY()/35);
                       // page.setScaleY(page.getScaleY() * event.getDeltaY()/35);
                        event.consume();
                    }
                });

    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T08:32:22.357

|增量Y| 对于所有滚动事件都是一样的。另请注意，deltaY 对于向下滚动是负数，并且缩放始终标准化为 1.0。所以我建议使用决定缩放比例的“缩放因子”。尝试类似：

```
private void setSceneEvents(final Scene scene) {
    //handles mouse scrolling
    scene.setOnScroll(
            new EventHandler<ScrollEvent>() {
              @Override
              public void handle(ScrollEvent event) {
                double zoomFactor = 1.05;
                double deltaY = event.getDeltaY();
                if (deltaY < 0){
                  zoomFactor = 2.0 - zoomFactor;
                }
                System.out.println(zoomFactor);
                page.setScaleX(page.getScaleX() * zoomFactor);
                page.setScaleY(page.getScaleY() * zoomFactor);
                event.consume();
              }
            });

  } 
```

# sql - 如何根据组合框选择使子表单显示数据？

> ID：13718260
> 
> 赞同：1
> 
> 时间：2012-12-05T07:25:44.960
> 
> 标签：sql, ms-access, combobox

我正在尝试将多个表绑定在一起，并在名为 Form2 的表单中根据我的组合框（ID 名称 = CbproductName）选择有一个子表单显示数据。我正在使用女士办公室访问。

这是查询

```
SELECT Employee.EmpName, Employee.EmpCode, Employee.CompanyID, Employee.DeptID,
       Employee.ComputerID, Software.ProductName 
  FROM Software
       INNER JOIN (
             (
              Computer INNER JOIN Employee ON Computer.CompID = Employee.ComputerID) 
              INNER JOIN Application ON Computer.ComputerName=Application.[A-ComputerID]
             )
       ON Software.ID = Application.SoftwareID 
 WHERE Application.SoftwareID = Form2.CbProductName; 
```

但是，当我运行表单时，它一直提示我输入参数值，并且它不显示输入值的结果。它也不会根据组合框的选择而改变。有人可以指点我完成它的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:31:17.640

在查询中，按名称引用表单作为`Forms`集合的成员。然后使用控件名称引用该窗体上的控件的值。它应该看起来像这样的模式：

```
Forms!FormName!ControlName 
```

在您的查询中，将`Where`子句更改为：

```
WHERE Application.SoftwareID = Forms!Form2!CbProductName; 
```

然后确保在更新事件之后刷新该查询`CbProductName`。您指示查询用作子表单的记录源，因此假设子表单控件与组合框位于同一表单上，请尝试将此作为更新后的过程：

```
Private Sub CbProductName_AfterUpdate()
    Me!SubformControlName.Form.Requery
End Sub 
```

请注意，子表单控件名称可能与其包含的表单名称不同。确保使用*控件*的名称。

# haskell - 在项目之间共享模块的规范方式是什么？

> ID：13718261
> 
> 赞同：6
> 
> 时间：2012-12-05T07:25:51.757
> 
> 标签：haskell

假设有A、B、C三个项目。C中的模块会被A和B共享。因为没有java的CLASSPATH这个东西，那么我们从C导入模块时需要使用绝对路径吗？

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T10:19:50.740

我敦促你对[你的项目](http://www.haskell.org/haskellwiki/How_to_write_a_Haskell_program)进行改造。

但是如果由于某种原因你不想这样做，那么最接近 java 类路径的就是[切换`-i`到 ghc](http://www.haskell.org/ghc/docs/latest/html/users_guide/separate-compilation.html#search-path)。请注意，当前目录需要显式出现在列表中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T07:35:29.230

规范的方法是仔细选择它们应该在模块层次结构中的位置，并将每个项目变成一个功能齐全的[Cabal](http://www.haskell.org/cabal/)包，然后在本地安装它们，以便它们成为本地编译器命名空间的一部分。

这样，每个模块都可用于您正在编写的任何源代码。

如果（例如）您使用[leksah](http://leksah.org/) IDE，它将为您完成很多工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T07:29:24.573

如果您所说的“项目”是指 Cabal 包，那么标准的做法是从 C 导出任何必要的模块，然后让 A 和 B 依赖于 C 并导入它们。让包中的源文件直接依赖于不属于该包的文件并不是一个好主意。

# php - 选择然后从数据库中删除

> ID：13718262
> 
> 赞同：2
> 
> 时间：2012-12-05T07:25:53.050
> 
> 标签：php, mysql, mysqli

我正在从数据库中删除，而不是加入表，我选择了服装 ID（主键）并尝试以这种方式删除，但它似乎只从一个表中删除，而不是从所有表中删除。我曾尝试在主键之前删除外键，但这也不起作用。我必须加入表格然后删除还是我的方式有效？

```
 $select =  $mysqli->query("SELECT * FROM costumes WHERE $q");
   while ($row = $select->fetch_assoc())
            $db_id = $row["costume_id"];

   $costume = $mysqli->query("DELETE FROM costumes WHERE costume_id='$db_id'");
   $costume_row = $costume->fetch_assoc();

   $history = $mysqli->query("DELETE FROM history WHERE history_id='$db_id'");
   $history_row = $history->fetch_assoc();

   $location = $mysqli->query("DELETE FROM location WHERE location_id='$db_id'");
   $location_row = $location->fetch_assoc();

   $state = $mysqli->query("DELETE FROM state WHERE state_id='$db_id'");
   $state_row = $state->fetch_assoc(); 
```

$q 是一个子流。在我的桌子上有：

```
costumes (
  costume_id varchar(10) primary key,
  name varchar(50), 
  is_seperate bool, 
  is_onepeice bool, 
  description text, 
  color varchar(25), 
  material varchar(50), 
  genre varchar(25), 
  gender char(1), 
  size varchar(5)
);
state (
  state_id varchar(10), 
  in_use bool, 
  fixed bool, 
  condition text, 
  foreign key (state_id) references costume(costume_id)
);
history (
  history_id varchar(10), 
  previous_user varchar(20), 
  profession varchar(20), 
  previous_play varchar(50), 
  date date, fixed_previous bool, 
  comments text, 
  foreign key (history_id) references costume (costume_id)
);
location (
  location_id varchar(10), 
  loc_no varchar(10) primary key, 
  room_no varchar(3), 
  foreign key (location_id) references costumes (costume_id)
);
```

我对删除的新查询是：

```
 $delete = $mysqli->query("DELETE costumes,history,status,location FROM costumes join   history on costumes.costume_id = history.history_id join status on status.status_id join location on location.location_id where costume_id='$db_id'"); 
```

该查询给了我约束问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:38:05.640

您应该在删除语句中加入您的表。所以完成这个查询然后尝试一下：

```
DELETE costumes, history
FROM costumes JOIN history ON costume.costume_id = history.costume_id
WHERE costume_id = '$db_id'; 
```

由于我不确切知道您的表的结构，您必须更正连接语法以匹配您通常连接它们的方式。如需进一步帮助，请尝试编辑您的问题并将您的 2 个表格中的所有字段名称提供给我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:03:05.967

我认为您应该使用`ON DELETE CASCADE`外键的属性。使用它，当您删除服装时，它也会从历史表中删除该客户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T07:39:12.837

尝试这个：：

```
DELETE from costumes where costumeid in 
(
Select temp_costume.id from
( Select costume_id as id from table....
) as temp_costume 
```

# asp.net-mvc - 具有实体框架和关系的 WebAPI

> ID：13718263
> 
> 赞同：1
> 
> 时间：2012-12-05T07:26:01.690
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api, edmx

当实体具有关系时，我们在使用 WebAPI 和实体框架时遇到性能问题。例如，我们在没有关系的情况下提取了 23000 条记录，耗时 2.1 秒。关系用了 2.7 秒。

我在上下文中禁用了 LazyLoading 和 ProxyCreation，因此它们不再是一个因素。生成的 JSON 文件几乎相同，唯一的区别是每个实体上都有一个空的相关实体。

有谁知道在 EDMX 中指定关系时为什么会有这样的开销，即使我们没有使用它？

# node.js - Node.js 温斯顿记录器；将日志插入日志文件时如何从换行符开始？

> ID：13718264
> 
> 赞同：3
> 
> 时间：2012-12-05T07:26:06.183
> 
> 标签：node.js, newline, winston

我正在制作一个 Node.js 应用程序，并且我将 Winston 用于我的大部分日志记录目的。但是我在一行中找到日志文件中的所有记录，我想为每条日志记录更改行，有什么办法可以做到这一点？我的代码；

```
var winston = require("winston"); var logger = new(winston.Logger)({
transports: [
new(winston.transports.Console)(),
new(winston.transports.File)({filename: './log/logFile.log', handleExceptions: true, json:true})
] 
```

})

就像这样：

```
{"level":"info","message":"test","timestamp":"2012-12-05T07:12:23.774Z"}

{"level":"info","message":"test","timestamp":"2012-12-05T07:15:16.780Z"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T08:14:57.457

这不是温斯顿的问题。Winston 使用 Unix 风格换行（即只有一个字符 xOA）。

您只需要停止使用 Windows 记事本，并开始使用其他文本编辑器（如[Notepad++](http://notepad-plus-plus.org/)、[Sublime](http://www.sublimetext.com/)）或 IDE 如[Enide Studio](http://www.nodeclipse.org/enide/studio/2014/)。

顺便说一句，较新的温斯顿有时间格式选项。

# android-tabactivity - 当我单击列表视图中的项目时，我想从第一个选项卡打开第二个选项卡

> ID：13718266
> 
> 赞同：6
> 
> 时间：2012-12-05T07:26:10.547
> 
> 标签：android-tabactivity

我有 3 个标签。第一个选项卡包含第一个活动。第二个选项卡包含第二个活动。

第一个活动包含项目列表。

当我单击列表中的项目时，我通过意图将其信息传递给第二个选项卡中的第二个活动。

现在我想启动第二个选项卡，显示第二个活动，其中包含来自第一个活动的信息。

如何做到这一点？

# php - CakePHP 等待警报接受

> ID：13718267
> 
> 赞同：0
> 
> 时间：2012-12-05T07:26:16.527
> 
> 标签：php, function, cakephp

我有一个为游戏启动第三方脚本的用户注册页面，如果用户接受许可（它将设置一个 HTTP 变量），我只希望此页面完成加载。我目前有它提示权限，但正在后台加载页面，我将如何“等待”或“重新加载”页面以重新检查此变量是否已设置？

添加控制器功能

```
public function add() {
    if ($this->User->IGBRequireTrust()) {
        if ($this->request->is('post')) {
            $this->User->create();
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The user has been saved'));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
            }
        }
    }
} 
```

上面调用的模型中的公共函数

```
// Returns TRUE if the user trusts the site, FALSE otherwise.
    public function IGBRequireTrust()
    {
        if($_SERVER['HTTP_EVE_TRUSTED'] != 'yes')
        {
            echo "<script>CCPEVE.requestTrust('http://*.".$_SERVER['HTTP_HOST']."');</script>";
        }
        return true;
    } 
```

如果页面不接受该权限，则该页面需要重定向回带有会话闪存消息集的索引函数。我尝试在调用 IGBRequireTrust 函数的地方添加一个 else ，但它似乎总是两者兼而有之。

更新：

应用控制器功能

public function beforeFilter() { $this->Auth->allow('index', 'view');

```
if($this->name == 'Users' && $this->action == 'add'){
    //die('correct controller and action');
    if(isset($_SERVER['HTTP_EVE_TRUSTED'])){
        if($_SERVER['HTTP_EVE_TRUSTED'] != 'yes' && $this->action != 'promptEveTrusted'){
            $this->redirect(array('controller'=>'Users', 'action'=>'promptEveTrusted'));
        }
    } else {
        $this->Session->setFlash(__('Registration is only allowed through the EVE in game browser.'));
        $this->redirect(array('controller'=>'Users', 'action'=>'index'));
    }
//} else {
  //  die('wrong controller and action');
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:03:45.577

看起来您正在将 javascript 注入页面，直到完成所有 php 代码后才会呈现。也许在这里尝试使用 javascript 作为您的逻辑。或者 jquery 会超级简单。此外，`$this->User->IGBRequireTrust()`总是返回 true。在你的 if 语句中加上 return false

```
// Returns TRUE if the user trusts the site, FALSE otherwise.
    public function IGBRequireTrust()
    {
        if($_SERVER['HTTP_EVE_TRUSTED'] != 'yes')
        {
            echo "<script>CCPEVE.requestTrust('http://*.".$_SERVER['HTTP_HOST']."');</script>";
            return false;
        }
        return true;
    }

<script>
var eve_trusted = '<?php echo $_SERVER['HTTP_EVE_TRUSTED']; ?>';
var declined_eve_url = '<?php echo $this->webroot; ?>users/unauthorized';
//Might have to wait for your script injection to load so we will wait for document ready
$(function(){
    if(!eve_trusted) window.location.href = declined_eve_url;
});
</script> 
```

在这里，我会为您提供使用 js 取消页面加载的帮助，但是我不确定您的主脚本将加载的顺序。

或者，您可以通过将逻辑放在 AppController.ctp 的 beforeFilter 中来清理所有这些

```
function beforeFilter(){
    if($_SERVER['HTTP_EVE_TRUSTED'] != 'yes' && $this->action != 'promptEveTrusted')
        $this->redirect(array('controller'=>'User', 'action'=>'promptEveTrusted'));
}

//USERS CONTROLLER
function promptEveTrusted(){
    //This will give the user a blank template, comment if you don't wish this
    $this->layout = 'ajax';
}
//views / users / prompt_eve_trusted.ctp
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script>
  $(function(){
     CCPEVE.requestTrust('http://*.".$_SERVER['HTTP_HOST']."');
  });
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:06:57.703

我会在没有 http 变量的情况下加载页面，并且只会显示一条消息（例如，通过 javascript）。

如果用户接受它，那么 javascript 会将他重定向到带有变量的同一页面，然后在设置变量时加载您想要的所有内容。

如果他不接受，它只会保留在同一页面或将他重定向到另一个页面，如您所愿。

# google-apps-script - Google Apps 脚本 - 如何在 onEdit 脚本或 onDelete 中获取已删除的行？

> ID：13718269
> 
> 赞同：3
> 
> 时间：2012-12-05T07:26:27.313
> 
> 标签：google-apps-script

我需要在 onEdit 触发器脚本中获取已删除行的行号和内容。还是有一个 onDelete 功能？

基本上，当用户删除一行或一系列行时，应该以某种方式通知脚本删除的范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-10T03:29:30.203

如果用户删除一个单元格，则此方法有效：

```
function onEdit(e) {
    if (e.value==e.source.getActiveSheet().getActiveCell().getValue()) {
        //Things to do for normal edition
    } else {
        //Things to do if cell was deleted
        deleted_range = e.range
    }
} 
```

我不确定这是否是正确的解决方案，但直到现在都可以正常工作。对于多个单元格，我还找不到解决方案：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T10:39:14.580

这是不可能的。有一个关于此的功能请求已打开，您可能希望为它加注*星*标以跟踪更新并为它投票。

[问题 1363：为电子表格列或行操作添加触发器](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1363)

# c# - 水晶报表询问用户名和密码

> ID：13718270
> 
> 赞同：1
> 
> 时间：2012-12-05T07:26:31.597
> 
> 标签：c#, asp.net, crystal-reports-2010

每次我打开有水晶报告的表单时，它总是要求输入用户名和密码，但我什至没有在我的网络应用程序中使用用户名和密码。我在 web.config 中使用集成安全性。我该如何解决这个问题？

这是代码：

```
 using System;
            using System.Collections.Generic;
            using System.Linq;
            using System.Web;
            using System.Web.UI;
            using System.Web.UI.WebControls;
            // FOR CRYSTAL REPORT
            using CrystalDecisions.CrystalReports.Engine;
            using CrystalDecisions.Shared;
            using System.Data;
            using System.Configuration;

            // FOR SQL CONNECTION
            using System.Data.Sql;
            using System.Data.SqlClient;
            using MediCard_Cooperative.App_Data;

            namespace MediCard_Cooperative.MediCard_Cooperative.Reports
            {
                public partial class rptTest : System.Web.UI.Page
                {
                    private SqlConnection connSQL;

                    protected void Page_Load(object sender, EventArgs e)
                    {
                        ReportDocument rptDoc = new ReportDocument();
                        dsMembers ds = new dsMembers();                     // .xsd or dataset filename
                        DataTable dt = new DataTable();

                        // Set the name of data table
                        dt.TableName = "Crystal Report Members";
                        dt = getAllData();                                  // calling 'getAllMembers' function
                        ds.Tables[0].Merge(dt);

                        // .rpt file path "../Reports/SimpleReports.rpt"
                        rptDoc.Load(Server.MapPath("../Reports/CrystalReports/ctrSample.rpt"));

                        //set dataset to the report viewer
                        rptDoc.SetDataSource(ds);
                        ctrViewerTest.ReportSource = rptDoc;
                    }

                    public DataTable getAllData()
                    {
                        try
                        {
                            using (connSQL = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["connstring"].ToString()))
                            {
                                using (SqlCommand cmd = new SqlCommand("usp_Test", connSQL))
                                {
                                    cmd.CommandType = CommandType.StoredProcedure;

                                    connSQL.Open();
                                    cmd.ExecuteNonQuery();

                                    using (SqlDataAdapter da = new SqlDataAdapter(cmd))
                                    {
                                        DataSet ds = new DataSet();

                                        da.Fill(ds, "dtTest");

                                        return ds.Tables[0];
                                    }

                                }

                            }

                        }
                        catch (Exception ex)
                        {
                            throw new Exception(ex.Message);
                        }
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:35:05.800

您将不得不通过`ReportDocument`对象提及数据库用户名和密码。

```
rptDoc.SetDatabaseLogon(username, password); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:52:40.630

您需要通过代码传递服务器凭据

```
rptDoc.SetDatabaseLogon(yourDatabaseServerUsername, yourDatabaseServerPassword); 
```

就像是

```
rptDoc.SetDatabaseLogon("sa", "123"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:30:46.847

无法找到数据集或用于设计报表的数据集与传递的数据集不同，水晶报表假设您需要登录。

由于您没有将参数传递给您的 sp，我认为直接让水晶报表管理这些会更好。需要维护的代码更少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-23T20:23:33.610

在 C# 或 VB 中打开您正在使用的水晶报表，然后转到字段资源管理器并右键单击数据库字段，如 [![在此处输入图像描述](../Images/ed02ac5adbf751bd412340f09bf82e58.png)](https://i.stack.imgur.com/Opkv1.png)

并选择设置数据源位置...

将打开一个新窗口...展开属性。

[![在此处输入图像描述](../Images/d61448a001167315e82f053b4667583e.png)](https://i.stack.imgur.com/jZCmW.png)

然后找到集成的 Security 它将默认为 False 将其更改为 True

喜欢

[![在此处输入图像描述](../Images/40da5e515046467a9b48b215600ed100.png)](https://i.stack.imgur.com/NugHA.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-05T02:43:11.140

请务必在 Crystal 中设置您的数据源位置：

1.  使用 OLEDB (ADO) 时，设置。
2.  选择“Microsoft OLE DB Provider for SQL Server”

![设置数据源位置图像](../Images/a80e9fdc39ea30807ea556f32522ea96.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-06T10:32:49.880

`Dim myreport As New PurchaseInvoiceTest` 'Crystal Reports 每次通过以下行解决问题时都要求进行身份验证 `myreport.SetDatabaseLogon("sa", "abcdef@12345")`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-07-19T09:30:23.730

`rpt.SetDatabaseLogon("sureguide_admin", "ejaz661")`

ts 工作

# python - 在客户端上接收多个 UDP 数据报

> ID：13718273
> 
> 赞同：-1
> 
> 时间：2012-12-05T07:26:42.753
> 
> 标签：python, sockets, udp

我有一个 python 脚本，它通过 UDP 联系服务器并接收几个数据报作为响应。我正在使用 recvfrom() 它只收集第一个响应而不是后续响应，我理解这是预期的行为。我应该使用什么来处理所有回复数据报（大约六个）？如果它实际上是 recvfrom()，我应该为循环使用什么条件，我还需要对套接字做什么才能在循环中使用 recvfrom()？

```
 #!/usr/bin/python

  import socket

  MESSAGE = "\xFF\xFF\xFF\xFFgetservers protocol_num args"
  endSequence = "\x45\x4f\x54\x00\x00\x00" #EOF

  datagrams = [] 

  sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
  sock.sendto(MESSAGE, ("master.serverlist.org", 15000))

  buf = sock.recvfrom(2000) [0]

    #process... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:00:08.943

```
#!/usr/bin/python

import socket

MESSAGE = "\xFF\xFF\xFF\xFFgetservers protocol_num args" 

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.sendto(MESSAGE, ("master.serverlist.org", 15000))

# here comes the trick
while True:

  buf = sock.recvfrom(2000) [0]
  responseSequence = "\xff\xff\xff\xffgetserversResponse"

   if buf.startswith(responseSequence): 
```

# wso2 - WSO2 + WCF 数据服务

> ID：13718284
> 
> 赞同：1
> 
> 时间：2012-12-05T07:27:26.167
> 
> 标签：wso2, wso2esb, wso2dss

对于我们的项目，我们使用 WSO2 产品，对于数据访问，微软选择了 WCF 数据服务技术。我们如何为我们的 WCF 数据服务使用 WSO2 ESB 或 WSO2 数据服务服务器生成代理服务？

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:03:44.477

使用 WSO2 ESB 公开您的代理服务。

# c++ - 算术表达式上下文中的宏扩展？

> ID：13718291
> 
> 赞同：6
> 
> 时间：2012-12-05T07:27:58.710
> 
> 标签：c++, c

我在一个网站上看到了下面的代码。我无法理解结果是如何来的`11`，而不是`25`or `13`。

为什么我在想`25`，因为`SQ(5) 5*5`

或者`13`因为

`SQ(2) = 4;`

`SQ(3) = 9;`

可能最终结果会是`13 (9 + 4)` ，但惊讶地看到结果`11`。结果如何`11`？

```
using namespace std;
#define SQ(a) (a*a)
int main()
{
    int ans = SQ(2 + 3);
    cout << ans << endl;
system("pause");
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T07:29:34.263

预处理器对源代码进行简单的文本替换。它对底层语言或其规则一无所知。

**在您的示例中，`SQ(2 + 3)`扩展为`(2 + 3*2 + 3)`，其计算结果为`11`。**

一种更稳健的定义方式`SQ`是：

```
#define SQ(a) ((a)*(a)) 
```

现在，`SQ(2 + 3)`将扩展为`((2 + 3)*(2 + 3))`，给予`25`。

尽管这个定义是一种改进，但它仍然不是万无一失的。如果`SQ()`应用于具有[副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)的表达式，这可能会产生不良后果。例如：

*   If`f()`是一个向控制台打印内容并返回 , 的函数`int`，`SQ(f())`将导致输出被打印两次。
*   如果`i`是一个`int`变量，则`SQ(i++)`导致[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。

有关使用宏的更多困难示例，请参阅[宏陷阱](http://gcc.gnu.org/onlinedocs/cpp/Macro-Pitfalls.html)。

由于这些原因，通常最好使用函数而不是宏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T07:39:28.230

`#define`扩展在编译器看到源代码之前就开始了。这就是为什么它们被称为*预处理器指令*，这里的处理器是将 C 转换为机器可读代码的编译器。

因此，这就是宏预处理器传递给编译器的内容：

`SQ(2 + 3)`扩展为`(2 + 3*2 + 3)`

所以，这真的是`2 + 6 + 3`= `11`。

你怎样才能让它达到你期望的效果？

1.  执行评估顺序。在宏定义或宏调用中使用 ()。或者
2.  编写一个简单的函数来完成这项工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T07:31:12.997

C 预处理器在编译器通常解释表达式和 C 语法之前进行文本替换。因此，在此代码上运行 C 预处理器会转换：

```
SQ(2 + 3) 
```

进入：

```
2 + 3*2 + 3 
```

这简化为：

```
2 + 6 + 3 
```

这是11。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T07:30:30.093

只是编译前的替换

所以你应该试试这个：

```
#define SQ(a) ((a)*(a)) 
```

在您的情况下，`SQ(2 + 3)`相当于`(2+3*2+3)`which is `11`。

但是按照我上面写的那样更正它，`((2+3)*(2+3))`这就是`5*5 = 25`你想要的答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T07:42:31.940

**#定义预**处理器

语法： **#定义标识符替换**

1.  当预处理器遇到此指令时，它会通过替换替换其余代码中出现的任何标识符。
2.  这种替换可以是表达式、语句、块或任何东西。
3.  预处理器不理解 C，它只是通过替换替换任何出现的标识符。

**#define 也可以使用参数来定义函数宏：**

**`# define SQ(a) (a*a)`**

将在编译时将任何出现的 SQ(a) 替换为 a*a。因此，

SQ(2+3) 将被替换为 2+3*2+3 替换完成后进行计算。因此回答 2+3*2+3=11

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T08:22:32.367

对于您的实现，该值将扩展`2+3 * 2+3`为 2+6+3=11。

您应该将其定义为：

```
#define SQ(x) ({typeof(x) y=x; y*y;}) 
```

测试`gcc`，对于像这样的输入

1.  常数，
2.  多变的，
3.  常数+常数
4.  常量+变量
5.  变量++ / ++变量
6.  函数调用，包含 printf。

注意：`typeof`是 GNU 对标准 C 的补充。在某些编译器中可能不可用。

# macos - Mac 上 Sencha touch SDK 命令工具 version3 命令无法识别

> ID：13718293
> 
> 赞同：0
> 
> 时间：2012-12-05T07:28:04.427
> 
> 标签：macos, extjs

我正在尝试在我的 macbook pro 上运行 Sencha touch 命令，但是当我运行此命令“sencha”以测试 SDK 命令工具是否安装正确时出现错误。

错误信息是这样的：-bash: sencha: command not found

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:23:29.130

未找到命令 运行 sencha 时，如果在 OS X / Linux 上出现错误消息“sencha: command not found”或“'sencha' 不是内部或外部命令、可运行程序或批处理文件”。在 Windows 上，请按照以下步骤进行故障排除：

关闭所有现有的终端/命令提示符窗口并重新打开它们。确保正确安装 Sencha SDK Tools： 安装目录存在。默认情况下，安装路径在 OS X 上为 /Applications/SenchaSDKTools-{version}，在 Linux 上为 /opt/SenchaSDKTools-{version}，C:\Program Files\SenchaSDKTools-{version} SDK Tools 目录的路径在前面到系统的 PATH 环境变量。从终端运行 echo $PATH（在 Windows 上为 echo %PATH%）。SDK 工具目录应显示在输出的一部分中。如果不是这种情况，请将其手动添加到您的 PATH 中。环境变量 SENCHA_SDK_TOOLS_{version} 设置，值为上述安装目录的绝对路径。例如：如果安装的版本是'2.0.0-beta2'，则必须设置一个SENCHA_SDK_TOOLS_2_0_0_BETA2。从终端运行 echo $SENCHA_SDK_TOOLS_2_0_0_BETA2（在 Windows 上为 echo %SENCHA_SDK_TOOLS_2_0_0_BETA2%）。如果输出为空，请手动设置环境变量。

[http://docs.sencha.com/touch/2-0/#!/guide/command](http://docs.sencha.com/touch/2-0/#!/guide/command)

# javascript - Twitter Bootstraps Rails - 当我单击字段时，下拉菜单正在关闭

> ID：13718297
> 
> 赞同：2
> 
> 时间：2012-12-05T07:28:25.750
> 
> 标签：javascript, ruby-on-rails, twitter-bootstrap

当我单击其中一个字段时，下拉菜单正在关闭。我必须重新打开它，然后我才能输入，直到单击下一个字段。即使关闭下拉菜单，这些值也会保留。我怎样才能让它保持打开状态？

html.erb

```
<ul class="nav secondary-nav">      
  <li><%= link_to image_tag('icons/lock_icon.png') + " Log In" +('<span class="caret"></span>').html_safe , '#', { :class => 'dropdown-toggle', 'data-toggle' => 'dropdown' } %>

    <ul id="dropdown-login" class="dropdown-menu" style="padding: 10px 10px 0px 10px; width: 240px;">

      <%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>

        <li> 
          <div>
            <%= f.label :email %><br />
            <%= f.email_field :email %>
           </div>
        </li> 

        <li>
          <div>
            <%= f.label :password %><br />
            <%= f.password_field :password %>
          </div>
        </li>

        <li> 
          <% if devise_mapping.rememberable? -%>

            <div>
              <%= f.check_box :remember_me %> <%= f.label :remember_me %>
            </div>
          <% end -%>
        </li> 

        <li>
          <div><%= f.submit "Sign in" %></div>
        </li>

      <% end %>
    </ul>
  </li>
</ul> 
```

我使用 javascripts 但不起作用，例如 1。

```
 <script type="text/javascript">
        $('#dropdown-login input, #dropdown-login label').click(function(e) {
            e.stopPropagation();
        });
  </script> 
```

2.

```
 <script type="text/javascript">
    $('.dropdown-menu').find('form').click(function (e) {
        e.stopPropagation();
    });
 </script> 
```

3.

```
<script type="text/javascript">
  $('body')
    .off('click.dropdown touchstart.dropdown.data-api', '.dropdown')
    .on('click.dropdown touchstart.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() });
</script> 
```

并在 application.js

```
//= require jquery
//= require jquery_ujs
//= require dataTables/jquery.dataTables
//= require dataTables/jquery.dataTables.bootstrap
//= require redactor-rails
//= require_tree .
//= require bootstrap-alert
//= require bootstrap-dropdown 
```

谁能帮我解决我的问题？

**更新 - 已解决**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T06:27:13.477

将 class="dropdown" 添加到第一个 li 中，例如

```
<li class="dropdown"><%= link_to image_tag('icons/lock_icon.png') + " Log In" +('<span class="caret"></span>').html_safe , '#', { :class => 'dropdown-toggle', 'data-toggle' => 'dropdown' } %> 
```

并添加javascript ..

```
 <script type="text/javascript">
    $('.dropdown-menu input, .dropdown-menu label').click(function(e) {
        e.stopPropagation();
    });
</script> 
```

# c# - 如何转换列表 到字典

> ID：13718305
> 
> 赞同：25
> 
> 时间：2012-12-05T07:28:52.827
> 
> 标签：c#, .net, linq, dictionary

我有`List<String>`，我需要将其转换为`Dictionary<int,String>`自动生成密钥，有什么最短的方法可以做到这一点吗？我试过了：

```
 var dictionary = new Dictionary<int, String>();
    int index = 0;
    list.ForEach(x=>{
      definitions.Add(index, x);
      index++;
}); 
```

但我认为这是肮脏的方式。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-12-05T07:30:54.640

```
var dict = list.Select((s, i) => new { s, i }).ToDictionary(x => x.i, x => x.s); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-03-01T18:23:56.323

我觉得这是最整洁的

```
int index = 0;
var dictionary = myList.ToDictionary(item => index++); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-05T08:48:45.590

在我看来，你所拥有的比 Linq 方式更具可读性（而且作为奖励，它恰好更有效）：

```
foreach(var item in list)
    dictionary[index++] = item; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-05T07:31:24.717

采用：

```
var dict = list.Select((x, i) => new {x, i})
    .ToDictionary(a => a.i, a => a.x); 
```

# javascript - 在附加 html 代码之前替换 Image src

> ID：13718314
> 
> 赞同：0
> 
> 时间：2012-12-05T07:29:30.637
> 
> 标签：javascript, jquery, jquery-mobile

我在 js 中有一个 html 内容变量作为

```
var htmlIs = '<p><img src="images/stories/fight_bpl.jpg" /></p>'; 
```

我将它附加到 div 使用

```
 $("#divId").append(htmlIs); 
```

但是在这里我只想替换 src 想要**在附加内容之前在**此处添加外部图像链接，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:32:24.170

您可以创建一个 jQuery 对象：

```
$(htmlIs).find('img').attr('src', 'url').end().appendTo('#divId'); 
```

[http://jsfiddle.net/BdnYd/](http://jsfiddle.net/BdnYd/)

对于多个图像：

```
var htmlIs = '<p><img src="images/stories/img_1.jpg" /><img src="images/stories/img_2.jpg" /></p>';

var urls = ['url1', 'url2']
$(htmlIs).find('img').each(function(i){
    $(this).attr('src', urls[i])
}).end().appendTo('#divId'); 
```

[http://jsfiddle.net/TUFcX/](http://jsfiddle.net/TUFcX/)

# javascript - 应防止 Jquery 日期选择器箭头键

> ID：13718324
> 
> 赞同：1
> 
> 时间：2012-12-05T07:30:26.520
> 
> 标签：javascript, jquery, jquery-ui-datepicker

我想强制用户只使用下拉菜单和日历来选择 DatetimePicker 控件中的日期。

我不希望他们选择控件，然后使用向上和向下箭头键更改日期。

我怎样才能防止他们使用箭头键？

非常感谢任何帮助。

```
<script type="text/javascript">
       $(function () {
           $(".datepicker").datepicker({
               changeMonth: true,
               changeYear: true
           });
       });
       $(function () {
           $(".datepickerApplyyear").datepicker({
               changeMonth: true,
               changeYear: true,
               yearRange: '0+100'
           });
       });
   </script> 
```

财政年度：

![在此处输入图像描述](../Images/89352f693e0188826cec9c672454bcc5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:33:53.750

我认为有一个名为 的配置`hideIfNoPrevNext`，但这似乎不起作用。我会使用以下 CSS：

```
.ui-datepicker-prev {
    display:none;
}
.ui-datepicker-next {
    display:none;
} 
```

另见以下内容：http: [//jsfiddle.net/neysor/5tX8q/3/](http://jsfiddle.net/neysor/5tX8q/3/)

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:20:27.410

试试这个：

```
$("#datepic").datepicker({
      changeMonth: true,
      changeYear: true,
      dateFormat: 'dd/mm/yy',
      duration: 'fast',
      stepMonths: 0
    });​ 
```

这将禁止用户使用下一个和上一个按钮进行选择。

# javascript - javascript字符串到对象

> ID：13718326
> 
> 赞同：26
> 
> 时间：2012-12-05T07:30:29.160
> 
> 标签：javascript, string, object

如何将字符串对象值应用于变量 Ex。

```
var str='{a:"www"}' 
```

现在怎么设置

```
var obj={a:"www"} 
```

我尝试 eval() 但不工作

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-05T08:00:00.667

`eval`应该可以工作，它实际上是一个[MDN 解决方案](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON#Browser_compatibility)，更不用说你的字符串不是有效的 JSON，所以`eval`是你唯一的选择（如果你不想为此包含一个库）。

```
var str='{a:"www"}';
var obj=eval("("+str+")");
console.log(obj); 
```

Chrome 开发工具中的快速测试：

```
eval("("+'{a:"www"}'+")")
Object
    a: "www"
    __proto__: Object 
```

只要记住将您的字符串放在括号中并将其分配到**外面** `eval`，它就会（相对）安全。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-05T07:33:24.730

```
var str='{"a":"www"}';
var obj = JSON.parse(str); 
```

# sql - 触发 2 个表

> ID：13718328
> 
> 赞同：3
> 
> 时间：2012-12-05T07:30:37.507
> 
> 标签：sql, sql-server, triggers

这是一个家庭作业问题，只是为了说清楚。

这是关系模式：

*   `PaperInvolvement`( `paperNr, academicId, paperRole`)
*   `Academic`( `academicId, acadName, employer`)

`(academicID)`表的主键`Academic`和表`(paperNr, academicId)`的主键也是如此`PaperInvolvement`。

这是我被要求做的触发器：

*   插入`PaperInvolvement`后更新
*   `Academic`更新后开启
*   防止为同一家公司工作的任何 2 位学者以相反的角色参与同一篇论文。
*   使用存储过程或在触发器中完全覆盖它

此表中只有 2 个角色可用，`Reviewer`即`Author`

这是我到目前为止所做的：

```
CREATE TRIGGER TR_PaperInvolvement_1
ON PaperInvolvement
AFTER INSERT, UPDATE
AS
IF EXISTS
(
SELECT a.academicId, paperRole, paperNr
FROM
(SELECT academicId
FROM Academic
GROUP BY employer, academicId) AS a
JOIN
(SELECT academicId, paperRole, paperNr
FROM PaperInvolvement

GROUP BY paperNr, academicId, paperRole) AS p_inv
ON a.academicId = p_inv.academicId
WHERE paperRole = 'Author' AND paperRole = 'Reviewer'

)
BEGIN
RAISERROR('Cannot have 2 Academics from the same company to work on
different roles for this paper.',16,1)
ROLLBACK TRANSACTION
END
GO 
```

我的问题是，根据要求（我在项目符号列表中列出的内容），这是回答问题的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:52:45.087

试试这个

```
CREATE TRIGGER TR_PaperInvolvement_Modify
ON PaperInvolvement
AFTER INSERT, UPDATE
AS
begin
    if exists
    (
        select P.paperNr, A.employer
        from PaperInvolvement as P   
            inner join Academic as A on A.academicID = P.academicID 
        where P.paperNr in (select i.paperNr from inserted as i)
        group by P.paperNr, A.employer
        having
            count(case when P.paperRole = 'Author' then 1 end) > 0 and
            count(case when P.paperRole = 'Reviewer' then 1 end) > 0
    )
    begin
        raiserror('Cannot have 2 Academics from the same company to work on different roles for this paper.', 16, 1)
        rollback transaction 
    end
end 
```

# javascript - Javascript - RadioButton，onClick 不使用仅本机 JS 切换复选框

> ID：13718329
> 
> 赞同：2
> 
> 时间：2012-12-05T07:30:41.700
> 
> 标签：javascript, html, checkbox, radio-button

**编辑：**联系了教授；我*实际上*并没有[supposed] 在这个作业上使用 jQuery，因为表单上的操作（例如教授的网站）不允许这样做。Tyvm 致所有回复如此迅速和乐于助人的人。因此，我对一个**纯粹的、原生的 JS 解决方案很感兴趣。**解决这些困难：

根据用户是否在面向 DOM 的表单中单击“是”或“否”单选按钮，获取一组复选框来切换“打开或关闭”。这是（I：单选按钮，II：复选框）的 HTML：

I:) 单选按钮

```
<label> Subscribe to our Mailing List? </label>
   <input type="radio" name="raydeo" id="rad1" value="Yes" onclick="subscribe()"></input> 
        <label>Yes</label>
   <input type="radio" name="raydeo" id="rad2" value="No" onclick="subscribe()"></input> 
        <label>No</label> 
```

II.) 复选框

```
<fieldset>
    <legend>Mailing List Subscriptions</legend>
    <br />
    <input type="checkbox" name="mailinglist" value="Corporate Press Release Emails" id="cor"></input><label> Corporate Press Release Emails</label>
    <br />
    <input type="checkbox" name="mailinglist" value="Upgrade Software Advertising List" id="sof"></input><label> Upgrade Software Advertising List</label>
    <br />
    <input type="checkbox" name="mailinglist" value="List given to spammers after buyout" id="lspa"></input><label> List given to spammers after buyout</label>
    <br />
    <input type="checkbox" name="mailinglist" value="The only non-cynical list" id="cyn"></input><label> The only non-cynical list</label>
    <br />
    <input type="checkbox" name="mailinglist" value="List to sell to spammers" id="tos"></input><label> List to sell to spammers</label>
    <br />
    <input type="checkbox" name="mailinglist" value="Spam List" id="spal"></input><label> Spam List</label>
    <br />
        </fieldset> 
```

使用仍然使用 jQuery 的文章中提供的基本原理，例如[Populating Checkboxes Based on Radio Button Click](https://stackoverflow.com/questions/12803049/is-there-a-way-to-populate-checkboxes-based-on-a-radio-button-click)，我迄今为止所做的最好尝试是：

```
<script>
function subscribe(){
  //var yesPlease = document.getElementById("rad1");
  //var noThx = document.getElementById("rad2");
   var arr = new Array["cor", "sof", "lspa", "cyn", "tos", "spal"];
     //var hold = document.getElementById(arr[i]);
     //if(hold.getAttribute(arr[i]).checked = true && arr[i] >= 1){
     //document.getElementById("cor").innerHTML=hold.getAttribute("checked");
    var hold = document.getElementsByName("mailinglist")[0];

    for(var i = 0; i < arr.length; i++)
    {
      if(document.getElementById("rad1").checked==true)
      {
          hold.getAttribute(arr[i]).checked == true;
      }
        else if(document.getElementById("rad2").checked==true)
        {
            hold.getAttribute(arr[i]).checked == false;
        }
    }
}
</script> 
```

当我加载我的文档并单击其中一个时，什么都没有发生。如果有帮助，这是相关部分的屏幕截图：谢谢：

![邮件列表订阅](../Images/ee8c7140601694eb406ad975e56db8a1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:36:21.933

删除您的内联 javascript 代码并尝试将事件附加到 js 文件本身中。

试试这个

```
$('#rad1,#rad2').on('click', function() {
        $('fieldset input[type="checkbox"]')
                               .prop('checked',this.value === 'Yes');
    }
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/5JwhP/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:43:41.637

单击单选按钮时，您需要一个操作处理程序。以便在单击时正确更新元素属性“checked”。

下面的代码是从您的代码中编辑的，仅包含所有输入类型收音机上的点击处理程序

```
$(document).ready(function(){
function subscribe() {
    $('input[type="radio"]').click(function(){
        var yesPlease = document.getElementById("rad1");
        var noThx = document.getElementById("rad2");
        if(yesPlease.checked == true){
            //check all boxes
            $("#cor").prop("checked", true);
            $("#sof").prop("checked", true);
            $("#lspa").prop("checked", true);
            $("#cyn").prop("checked", true);
            $("#tos").prop("checked", true);
            $("#spal").prop("checked", true);
        }
        else if(noThx.checked == true) {
            //uncheck all boxes
            $("#cor").prop("checked", false);
            $("#sof").prop("checked", false);
            $("#lspa").prop("checked", false);
            $("#cyn").prop("checked", false);
            $("#tos").prop("checked", false);
            $("#spal").prop("checked", false);
        }
    });
}
subscribe();
​});​ 
```

JSFiddle：http: [//jsfiddle.net/MSZtx/](http://jsfiddle.net/MSZtx/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:06:25.717

您的代码运行良好：- 请参见此处：- [http://jsfiddle.net/LeWbR/2/](http://jsfiddle.net/LeWbR/2/)
我能想象的唯一问题

1.  你有没有在你的页面中包含 jquery。
2.  您放置 JS 函数的位置。

请参阅 JSfiddle 中的左侧下拉菜单，如果您将值从 no wrap(body) 更改为 onDomReady 或 onLoad，它将不起作用。

```
function subscribe() {
    var yesPlease = document.getElementById("rad1");
    var noThx = document.getElementById("rad2");
    if(yesPlease.checked){
    //check all boxes
    $("#cor").prop("checked", true);
    $("#sof").prop("checked", true);
    $("#lspa").prop("checked", true);
    $("#cyn").prop("checked", true);
    $("#tos").prop("checked", true);
    $("#spal").prop("checked", true);
}
else if(noThx.checked) {
    //uncheck all boxes
    $("#cor").prop("checked", false);
    $("#sof").prop("checked", false);
    $("#lspa").prop("checked", false);
    $("#cyn").prop("checked", false);
    $("#tos").prop("checked", false);
    $("#spal").prop("checked", false);
}
} 
```

​​​

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T10:52:29.857

这个简单的代码将解决这个问题，

**HEAD**部分中的 JavaScript ：

```
$(document).ready(function(){ 

    $(".radio-button").click(function(){

        if($(this).val() == "No")
            $(".checkbox-list input").attr("disabled", true);
        else
            $(".checkbox-list input").attr("disabled", false);

    });

}) 
```

**另外，在上述代码之前添加jquery库CDN源码。**

**正文**部分中的标记：

```
<label> Subscribe to our Mailing List? </label>
<input type="radio" name="raydeo" id="rad1" value="Yes" onclick="subscribe()" class="radio-button"></input><label> Yes</label>
<input type="radio" name="raydeo" id="rad2" value="No" onclick="subscribe()" class="radio-button"></input><label> No</label>

<fieldset class="checkbox-list">
    <legend>Mailing List Subscriptions</legend>
    <br />
    <input type="checkbox" name="mailinglist" value="Corporate Press Release Emails" id="cor"></input><label> Corporate Press Release Emails</label>
    <br />
    <input type="checkbox" name="mailinglist" value="Upgrade Software Advertising List" id="sof"></input><label> Upgrade Software Advertising List</label>
    <br />
    <input type="checkbox" name="mailinglist" value="List given to spammers after buyout" id="lspa"></input><label> List given to spammers after buyout</label>
    <br />
    <input type="checkbox" name="mailinglist" value="The only non-cynical list" id="cyn"></input><label> The only non-cynical list</label>
    <br />
    <input type="checkbox" name="mailinglist" value="List to sell to spammers" id="tos"></input><label> List to sell to spammers</label>
    <br />
    <input type="checkbox" name="mailinglist" value="Spam List" id="spal"></input><label> Spam List</label>
    <br />
</fieldset> 
```

**还有第二个选项可以完成相同的任务，**

**HEAD**部分中的 JavaScript ：

```
/* Solution - 2 */
function subscribe(ele)
{

    if(ele == "No")
            $(".checkbox-list input").attr("disabled", true);
    else
            $(".checkbox-list input").attr("disabled", false);

} 
```

**另外，在上述代码之前添加jquery库CDN源码。**

正文部分**MARKUP**的变化：

```
<label> Subscribe to our Mailing List? </label>
<input type="radio" name="raydeo" id="rad1" value="Yes" onclick="subscribe(this.value)" class="radio-button"></input><label> Yes</label>
<input type="radio" name="raydeo" id="rad2" value="No" onclick="subscribe(this.value)" class="radio-button"></input><label> No</label> 
```

# php - PHP/XML/XSL 的问题

> ID：13718331
> 
> 赞同：1
> 
> 时间：2012-12-05T07:30:42.423
> 
> 标签：php, xml, xslt

我试图弄清楚我可以做些什么来创建一个在我的 XML 文件中附加数据而不是连续重写 XML 文件的代码。

我需要能够保存所有表单条目，并且现在每次提交表单时。它会创建一个新的 XML 文件并删除旧的文件。

这可能真的很容易解决，或者我真的很笨，但是我查看了 DOM 语法，没有看到我可以改变什么来改变结果。

```
// define configuration file name and path
$configFile = 'abook.xml';

// if form not yet submitted
// display form
if (!isset($_POST['submit'])) {

  // set up array with default parameters
  $data = array();
  $data['name'] = null;
  $data['email'] = null;
  $data['caddress'] = null;
  $data['city'] = null;
  $data['state'] = null;
  $data['zipcode'] = null;
  $data['phone'] = null;
  $data['pug'] = null;
  $data['comment'] = null;
  $data['subscribe'] = null;

  // read current configuration values
  // use them to pre-fill the form
  if (file_exists($configFile)) {
    $doc = new DOMDocument();
    $doc->preserveWhiteSpace = false;
    $doc->load($configFile);
    $address = $doc->getElementsByTagName('address');
    foreach ($address->item(0)->childNodes as $node) {
      $data[$node->nodeName] = $node->nodeValue; 

    }        
  } 
```

中间是 PHP 表单和验证代码，最后我再次使用 XML 标记：

```
 // generate new XML document
  $doc = new DOMDocument();

  // create and attach root element <configuration> 
  $root = $doc->createElement('addressbook');
  $configuration = $doc->appendChild($root);

  // create and attach <oven> element under <configuration>
  $address = $doc->createElement('address');
  $configuration->appendChild($address);

  // write each configuration value to the file
  foreach ($config as $key => $value) {
    if (trim($value) != '') {
      $elem = $doc->createElement($key);
      $text = $doc->createTextNode($value);
      $address->appendChild($elem);
      $elem->appendChild($text);          
    }
  }

  // format XML output

  // save XML file
  $doc->formatOutput = true;
  $doc->save($configFile) or die('ERROR: Cannot write configuration file');      
  echo 'Thank you for filling out an application.';
} 
```

我对此真的很陌生，所以如果我的代码很混乱，我很抱歉。

第二部分我正在处理一个已链接到我的 XML 文件的 XSL 文件，但无论我使用什么语法进行转换，都无法将其保存在表中。

同样，我不知道这是否是由我设置 PHP 以编写 XML 的方式引起的。

# python - 代码创建生成器对象，但我想要一个列表

> ID：13718335
> 
> 赞同：1
> 
> 时间：2012-12-05T07:30:58.040
> 
> 标签：python, list, generator

我有许多单张 Excel 文件，我想创建一个包含子列表的列表。每个子列表应该包含 1) 文件名、2) 工作表名称和 3) 工作表中除第一（标题）行之外的每一行的行值。我尝试了以下方法：

```
rdir=r"d:\temp"
import xlrd,spss
fils=[fil for fil in os.listdir(rdir) if fil.endswith(".xls")]
allData=[]
for cnt,fil in enumerate(fils):
    wb=xlrd.open_workbook(os.path.join(rdir,fil))
    allData.append([fil]+[wb.sheets()[0].name]+wb.sheets()[0].row_values(row) for row in range(1,wb.sheets()[0].nrows)) 
```

这并没有给我我正在寻找的列表，而是一个生成器对象的列表。我在这里做错了什么，如何获得我正在寻找的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:44:53.057

不确定您想要什么，我想问题是您在列表理解中缺少 []。

```
allData.append([fil]+[wb.sheets()[0].name]+ [ wb.sheets()[0].row_values(row) for row in range(1,wb.sheets()[0].nrows) ] ) 
```

那么你的最终列表应该是 ["Filename","WorksheetName",[row_value list]]

让我们简单点：

```
>>> list_a = [1,2,3]
>>> list_b = [ ['a','b','c'],['a','b','c'],['a','b','c']]
>>> [list_a + x for x in list_b]
[[1, 2, 3, 'a', 'b', 'c'], [1, 2, 3, 'a', 'b', 'c'], [1, 2, 3, 'a', 'b', 'c']]
>>> [list_a + [ x for x in list_b ] ]
[[1, 2, 3, ['a', 'b', 'c'], ['a', 'b', 'c'], ['a', 'b', 'c']]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:50:33.653

看起来您的列表理解不正确。它应该是：

```
 allData.append([fil]+[wb.sheets()[0].name]+[wb.sheets()[0].row_values(row) for row in range(1,wb.sheets()[0].nrows)]) 
```

此外，我建议建立 s1 = wb.sheets()[0] 以使代码更清晰且速度稍快

```
rdir=r"d:\temp"
import xlrd,spss
fils=[fil for fil in os.listdir(rdir) if fil.endswith(".xls")]
allData=[]
for cnt,fil in enumerate(fils):
    wb=xlrd.open_workbook(os.path.join(rdir,fil))
    s1 = wb.sheets()[0]
    allData.append([fil]+[s1.name]+[s1.row_values(row) for row in range(1,s1.nrows)]) 
```

您还在评论中提到您想看看如何使用多张纸来执行此操作。假设每个字段都相同，您可以使用：

```
rdir=r"d:\temp"
import xlrd,spss
fils=[fil for fil in os.listdir(rdir) if fil.endswith(".xls")]
allData=[]
for cnt,fil in enumerate(fils):
    wb=xlrd.open_workbook(os.path.join(rdir,fil))
    for sheet in wb.sheets():
        allData.append([fil]+[sheet.name]+[sheet.row_values(row) for row in range(1,sheet.nrows)]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T10:42:54.553

感谢大家的所有投入！我需要的列表是由

```
rdir=r"d:\temp"
import xlrd,spss
fils=[fil for fil in os.listdir(rdir) if fil.endswith(".xls")]
allData=[]
for cnt,fil in enumerate(fils):
    wb=xlrd.open_workbook(os.path.join(rdir,fil))
    ws=wb.sheets()[0]
    for row in range(1,ws.nrows):
        allData.append([fil]+[ws.name]+[val for val in ws.row_values(row)]) 
```

# javascript - 将 cookie 传回服务器

> ID：13718337
> 
> 赞同：4
> 
> 时间：2012-12-05T07:31:19.487
> 
> 标签：javascript, jquery, cookies

我正在用 CanJS 编写一个单页应用程序。对于其中一个模型，每次我保存一个新项目时，应用程序都会发送正常`POST`请求。但是，在`HTTP`响应中返回了一个特定的 cookie，我想`GET`在获取项目时根据请求将其发送回服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:55:06.737

所有特定于应用程序的 cookie 都会在请求标头中自动传递给服务器。**确保您要发送的 cookie 属于同一应用程序**。

这可以通过查看浏览器的 cookie 来检查。确保您要发送的 cookie 将**Domain**作为您的应用程序名称。像所有 stackoverflow cookie 的域值一样**.stackoverflow.com**

您可以参考本教程，其中讨论了 JavaScript 中 cookie 的创建和设置：http: [//www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

# visual-studio-2008 - 如何在调试 Visual C++ 程序-VS 2010 时更改变量的值

> ID：13718342
> 
> 赞同：0
> 
> 时间：2012-12-05T07:31:40.520
> 
> 标签：visual-studio-2008, visual-c++, out-of-memory, visual-studio-debugging

我的程序包含一个包含 600000 个元素的大数组（每个元素都是一个结构）。当我调试程序时，它在

```
FlightLeg *legRecord= new  FlightLeg[600000];(FlightLeg is a structure) 
```

该程序消耗大量时间，因为它必须进行多次数据处理和初始数据加载（超过两天！）。

所以我想在调试时进行更改。我认为将 600000 更改为更小的值会有所帮助。如果我错了，请给我任何建议。

你能告诉我有没有办法在调试时改变600000？因为我不想丢失之前消耗两天的数据加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:02:50.720

这取决于几件事：

*   `sizeof`结构`FlightLeg`。_ 例如，如果`FlightLeg`需要 100 字节，则需要 60,000,000 字节的内存，这是巨大的，尤其是在分配连续内存时。
*   在多次分配如此巨大的大小之后，您的进程可用的内存将受到限制。您可能需要编译和构建相同的 64 位版本，以便您可以利用更多（更多）内存。
*   分配这种尺寸，不推荐这种类型。您应该使用一些集合类（如`vector`, `list`）来做同样的事情。即使数组大小是恒定的，我也不推荐编译时分配（即堆栈分配）。

# python - Django 值错误

> ID：13718343
> 
> 赞同：0
> 
> 时间：2012-12-05T07:31:49.177
> 
> 标签：python, django

当我在名为 Practical Django Projects 的书上做练习时，我遇到了一些问题。当我点击我文章中关于详细信息的 Url 时，它返回错误。
网址.py

```
url(r'^weblog/$','django.views.generic.date_based.archive_index',entry_info_dict),
url(r'^weblog/(P<year>\d{4}/$)','django.views.generic.date_based.archive_year', entry_info_dict),
url(r'^weblog/(P<year>\d{4}/(P<month>\w{3})/$)','django.views.generic.date_based.archive_month', entry_info_dict),
url(r'^weblog/(P<year>\d{4}/(P<month>\w{3})/(P<day>\d{2})/$)','django.views.generic.date_based.archive_day', entry_info_dict),
url(r'^weblog/(?P<year>\d{4}/(?P<month>\w{3})/(P<day>\d{2})/(P<slug>[-\w]+)/$)',"blogCategory.views.entry_detail"), 
```

视图.py

```
def entry_detail(request, year, month, day, slug):
    date_stamp=time.strptime(year+month+day, "%Y%b%d")
    pub_date=datetime.date(*date_stamp[:3])
    entry=get_object_or_404(Entry,pub_date__year=pub_date.year,
        pub_date__month=pub_date.month,
        pub_date__day=pub_date.day,
        slug=slug)
    return render_to_response('Entry/entry_detail.html',{'entry': entry }) 
```

错误：

```
Traceback :
ValueError at /weblog/2012/dec/04/test22/

time data u'2012/dec/04/test22/dec04' does not match format '%Y%b%d'

Request Method:     GET
Request URL:    /weblog/2012/dec/04/test22/
Django Version:     1.4.1
Exception Type:     ValueError
Exception Value:    

time data u'2012/dec/04/test22/dec04' does not match format '%Y%b%d'

Exception Location:     /usr/lib/python2.7/_strptime.py in _strptime, line 325
Python Executable:  /usr/bin/python
Python Version:     2.7.3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:46:42.273

错误的数据被传递到`strptime`这里查看：

```
>>> time.strptime('2012dec04','%Y%b%d')
time.struct_time(tm_year=2012, tm_mon=12, tm_mday=4, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=1, tm_yday=339, tm_isdst=-1)
>>> time.strptime('2012/dec/04/test22/dec04','%Y%b%d')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_strptime.py", line 454, in _strptime_time
    return _strptime(data_string, format)[0]
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/_strptime.py", line 325, in _strptime
    (data_string, format))
ValueError: time data '2012/dec/04/test22/dec04' does not match format '%Y%b%d'
>>> 
```

原因是你的第一组没有关闭：

```
# yours
url(r'^weblog/(?P<year>\d{4}/(?P<month>\w{3})/(P<day>\d{2})/(P<slug>[-\w]+)/$)',"blogCategory.views.entry_detail"),

# change to
url(r'^weblog/(?P<year>\d{4})/(?P<month>\w{3})/(P<day>\d{2})/(P<slug>[-\w]+)/$',"blogCategory.views.entry_detail"), 
```

你让第一组关闭`$`而不是在第一组之前`/`

# asp.net - signalR OnDisconnected() 取消任务

> ID：13718347
> 
> 赞同：3
> 
> 时间：2012-12-05T07:32:23.763
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, signalr, signalr-hub

当页面加载时，我会在我的中心开始一项新任务。此任务将数据发送到浏览器以更新某些 html 元素。当我浏览离开页面时，我想停止任务。

问题是在任务停止之前（由于它的 sleep 参数），`tokenSource = new CancellationTokenSource();` 在该任务的前一个实例有机会停止之前设置了一个新的。

我要做的是在从页面浏览到不需要signalR的不同页面时停止任务。但也许，如果它只是对同一页面的刷新，就不要停止它。不知道该怎么做。总而言之，我想保证只有这个任务的 1 个实例正在运行（并且只在需要它/或有监听器的页面上）任何信息都非常感谢。谢谢

代码：

```
public class TaskActionStatus : Hub
{
    #region Static Fields

    /// <summary>
    /// The token source.
    /// </summary>
    private static CancellationTokenSource tokenSource;

    /// <summary>
    /// The url string.
    /// </summary>
    private static string url = string.Empty;

    #endregion

    #region Public Methods and Operators

    /// <summary>
    /// The get tasks status.
    /// </summary>
    /// <param name="siteId">
    /// The site id.
    /// </param>
    /// <param name="location"></param>
    public void GetTasksStatus(int? siteId)
    {
        var taskRepository = UnityContainerSetup.Container.Resolve<ITaskRepository>();

        tokenSource = new CancellationTokenSource();
        CancellationToken ct = tokenSource.Token;

        // init task for checking task statuses
        var tasksItem = new DownloadTaskItem();

        // start task only if at least one listener
        if (UserHandler.ConnectedIds.Count < 2 && !taskRepository.IsTasksStatusAsyncRunning())
        {
            taskRepository.GetTasksStatusAsync(siteId, tasksItem, ct);

            // subscribe to event [ listener ]
            tasksItem.Changed += this.UpdateTasksStatus;
        }
        else tokenSource.Cancel();
    }

    /// <summary>
    /// The on connected.
    /// </summary>
    /// <returns>
    /// The <see cref="Task"/>.
    /// </returns>
    public override Task OnConnected()
    {
        UserHandler.ConnectedIds.Add(this.Context.ConnectionId);
        return base.OnConnected();
    }

    /// <summary>
    /// The on disconnected.
    /// </summary>
    /// <returns>
    /// The <see cref="Task"/>.
    /// </returns>
    public override Task OnDisconnected()
    {
        UserHandler.ConnectedIds.Remove(this.Context.ConnectionId);
        if (UserHandler.ConnectedIds.Count == 0)
        {
            try
            {
                    tokenSource.Cancel();
            }
            catch (Exception ex)
            {
                Log.Error(ex);
            }
        }

        return base.OnDisconnected();
    }

    /// <summary>
    /// The update tasks status.
    /// </summary>
    /// <param name="sender">
    /// The sender.
    /// </param>
    /// <param name="e">
    /// The e.
    /// </param>
    public void UpdateTasksStatus(object sender, TaskEventArgs e)
    {
        this.Clients.All.updateMessages(e.Tasks);
    }

    #endregion
}

/// <summary>
/// The user handler.
/// </summary>
public static class UserHandler
{
    #region Static Fields

    /// <summary>
    /// The connected ids.
    /// </summary>
    public static HashSet<string> ConnectedIds = new HashSet<string>();

    #endregion
}

    public bool IsTasksStatusAsyncRunning()
    {
        if (tasksStatusAsync != null && tasksStatusAsync.Status.Equals(TaskStatus.Running))
        {
            return true;
        }

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:32:05.257

移动这条线：

```
 tokenSource = new CancellationTokenSource();
            CancellationToken ct = tokenSource.Token; 
```

...使它成为：

```
 if (UserHandler.ConnectedIds.Count < 2)
        {
            Trace.WriteLine("GetTasksStatus: Starting new task");

            tokenSource = new CancellationTokenSource();
            CancellationToken ct = tokenSource.Token;

            taskRepository.GetTasksStatusAsync(siteId, tasksItem, ct);

            // subscribe to event [ listener ]
            tasksItem.Changed += this.UpdateTasksStatus;
        } 
```

为我做的。谢谢

# java - 应用程序级线程的正确设计方法是什么？

> ID：13718349
> 
> 赞同：1
> 
> 时间：2012-12-05T07:32:23.903
> 
> 标签：java, android

我正在 Android 上开发多人在线文字游戏，并希望实现一个线程来检查服务器端事件，如下所示：

*   玩家加入游戏。
*   玩家离开了一场比赛。
*   玩家赢了一场比赛。
*   ETC...

如果对用户可见，线程将负责侦听各种事件并将事件分派给负责的活动。

换句话说，为了更清楚，我有一个事件列表，每个活动都必须注册到这些事件的子集。

## 事件：

E1 - E2 - E3 - E4

## 活动：

*   活动 1 对 E1 和 E2 感兴趣。
*   活动 2 对 E1、E2 和 E3 感兴趣。
*   活动 3 对 E3 和 E4 感兴趣。

我在问实现在后台运行的线程并可以将事件分派给所有活动的最佳设计方法？

## 一些想法：

- 在应用程序级别实现 AsyncTask。

- 将广播意图发送到自定义操作。

- 服务不是最好的方法，因为它应该被创建为在用户不与您的应用程序交互时在后台运行。

**你能提出一个最佳实践方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:13:07.557

一个很好的方法是使用结合 AsyncTasks 的服务。

虽然服务在用户不与您的应用程序交互时很有用，但这肯定不是它唯一的用途。服务是任何不需要 UI 的东西的逻辑家园。

在数据驱动的应用程序中，我使用服务作为 API 适配器层。这很好，因为我可以从任何活动中启动它，而不必担心它是否已经实例化，或者我完成后是否需要做任何清理工作。该框架管理服务的生命周期并跟踪客户端。

我认为你的情况类似。只要需要，每个活动都可以使用`bindService`和注册更新。`unbindService`只要绑定了任何 Activity，服务就会继续做它的事情。`onBind`服务可以使用在和中接收到的 Intent 来跟踪哪些活动需要更新`onUnbind`，并通过特定的 Intent 向它们发送更新，或者更恰当地说，服务可以触发广播意图，并且活动可以注册他们需要的内容。

在服务中，您将运行 AsyncTasks（可能会在其上运行它们`AsyncTask.THREAD_POOL_EXECUTOR`以便获得多个线程）来进行更新。请记住，服务本身是在 UI 线程上启动的。

使用服务的另一个好处是它不需要 Activity 来运行。想到的一个用途是关机后清理。如果您需要在用户退出时发布分数或分析或其他内容，您可以让活动快速关闭并在后台完成更长时间运行的工作。

活动可以使用 向服务请求那些较长的单个任务，并且服务在调用（或）`startService`之前不会退出。`stopSelf``stopSelfResult`

start/stop 和 bind/unbind 的组合确实允许对服务进行干净的管理。它会在需要时且仅在需要时运行，并且您可以将所有 API 访问权限保存在一个地方。

**编辑：**

好像这不是一个足够坚固的文字墙，我想出了另一个使用服务的好理由。来自[进程和线程的开发人员指南](http://developer.android.com/guide/components/processes-and-threads.html)：

> 由于运行服务的进程的排名高于具有后台活动的进程，因此启动长时间运行操作的活动可能会更好地为该操作启动服务，而不是简单地创建工作线程 - 特别是如果操作可能超过活动...

# batch-file - 读取批处理文件中参数的每个字符

> ID：13718351
> 
> 赞同：4
> 
> 时间：2012-12-05T07:32:35.480
> 
> 标签：batch-file, arguments, parameter-passing, command-line-arguments

cmd中的示例输入：

```
test.bat /p 1,3,4 
```

预期结果：

```
1
3
4 
```

到目前为止我的代码：

```
@echo off
set arg = %1
set var = %2
if (%1)==(/p) (
... need code that will read and print each character of var
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T10:08:56.870

您的问题存在潜在问题。如果 test.bat 是：

```
@echo %1% 
```

然后

```
test 1,2,3 
```

印刷：

```
1 
```

因为，在这种情况下，逗号被视为参数分隔符。

所以你要么需要用引号括起来：

```
test "1,2,3" 
```

或者使用不同的内部分隔符：

```
test 1:2:3 
```

除非您希望将零件放置在 %2、%3 等中，在这种情况下，您的问题可以通过简单使用`SHIFT`.

对于我的解决方案，我选择在组参数“1,2,3”周围使用引号（尽管通过更改`delims=,`以指定要使用的字符，这很容易适应不同的分隔符）。

```
@echo off
setlocal ENABLEDELAYEDEXPANSION ENABLEEXTENSIONS

set args=%~2

if "%1"=="/p" (
:NextToken
    for /F "usebackq tokens=1* delims=," %%f in ('!args!') do (
        echo %%f
        set args=%%g
    )
    if defined args goto NextToken
) 
```

像这样调用：

```
readch.bat /p "1,2,3" 
```

`%~2`用于删除引号。

该`FOR`语句解析 args，将第一个标记放入`%f`，将行的其余部分放入`%g`.

`goto NextToken' 行循环直到没有更多的标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T09:22:05.800

```
@echo off
if "%1"=="/p" (
:LOOP
echo %2
shift
set arg=%2
if defined arg goto :LOOP else exit >nul
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:28:49.740

```
set params=%%~2
if (%1)==(/p) (
    set params=%params:,= %
)
if "%params%" NEQ "" (
  call :printer %params%
)
goto :eof

:printer
:shifting
if "%%1" NEQ "" (
  echo %%1
) else (
 goto :eof
)
shift
goto :shifting
goto :eof 
```

# android - 当我尝试使用 kSoap2 时，Android 应用程序崩溃

> ID：13718363
> 
> 赞同：0
> 
> 时间：2012-12-05T07:33:29.097
> 
> 标签：android, web-services, ksoap2

嗨，我是 Android 开发的新手。抱歉。

当我尝试使用 kSoap2 将应用程序连接到 Web 服务时，我的 Android 应用程序崩溃：我的错误日志如下：

```
2-05 12:48:05.100: E/dalvikvm(749): Could not find class 'org.ksoap2.serialization.SoapObject', referenced from method com.example.mytestws.MainActivity.onCreate
12-05 12:48:05.100: W/dalvikvm(749): VFY: unable to resolve new-instance 548 (Lorg/ksoap2/serialization/SoapObject;) in Lcom/example/mytestws/MainActivity;
12-05 12:48:05.100: D/dalvikvm(749): VFY: replacing opcode 0x22 at 0x0012
12-05 12:48:05.100: D/dalvikvm(749): VFY: dead code 0x0014-0057 in Lcom/example/mytestws/MainActivity;.onCreate (Landroid/os/Bundle;)V
12-05 12:48:05.250: D/AndroidRuntime(749): Shutting down VM
12-05 12:48:05.250: W/dalvikvm(749): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
12-05 12:48:05.261: E/AndroidRuntime(749): FATAL EXCEPTION: main
12-05 12:48:05.261: E/AndroidRuntime(749): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
12-05 12:48:05.261: E/AndroidRuntime(749):  at com.example.mytestws.MainActivity.onCreate(MainActivity.java:29)
12-05 12:48:05.261: E/AndroidRuntime(749):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-05 12:48:05.261: E/AndroidRuntime(749):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-05 12:48:05.261: E/AndroidRuntime(749):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-05 12:48:05.261: E/AndroidRuntime(749):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-05 12:48:05.261: E/AndroidRuntime(749):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-05 12:48:05.261: E/AndroidRuntime(749):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 12:48:05.261: E/AndroidRuntime(749):  at android.os.Looper.loop(Looper.java:123)
12-05 12:48:05.261: E/AndroidRuntime(749):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-05 12:48:05.261: E/AndroidRuntime(749):  at java.lang.reflect.Method.invokeNative(Native Method)
12-05 12:48:05.261: E/AndroidRuntime(749):  at java.lang.reflect.Method.invoke(Method.java:521)
12-05 12:48:05.261: E/AndroidRuntime(749):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-05 12:48:05.261: E/AndroidRuntime(749):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-05 12:48:05.261: E/AndroidRuntime(749):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:08:37.970

您必须将 ksoap2 库作为外部库添加到类路径中，并将 .jar 复制到项目的 libs 文件夹中。

# excel - 如何整理导出的 html 文件的源代码？

> ID：13718382
> 
> 赞同：1
> 
> 时间：2012-12-05T07:35:27.800
> 
> 标签：excel, vba

使用 VBA，我将 Excel 电子表格导出为网页。

导出的 html 文件的源代码相当混乱。中间有多个换行符。例如：

```
 <td colspan="3" class="xl681522" style="height:17.1pt" height="22">Select X
  and Y</td>
<td class="xl731522" style="width:253pt" width="337">Hello World
 and my country</td> 
```

如何整理 html 源代码，例如：

```
<td colspan="3" class="xl681522" style="height:17.1pt" height="22">Select X and Y</td>
<td class="xl731522" style="width:253pt" width="337">Hello World and my country</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-01T09:56:46.997

这可能会有所帮助，或者只是 CTRL + H 然后搜索 <*> 并替换为“”（空白）：

```
'PURPOSE: Find & Replace a list of text/values throughout entire workbook from a table
'SOURCE: www.TheSpreadsheetGuru.com/the-code-vault, I used <p*> to <p> in the table
Dim sht As Worksheet
Dim fndList As Integer
Dim rplcList As Integer
Dim tbl As ListObject
Dim myArray As Variant

'Create variable to point to your table
  Set tbl = Worksheets("Sheet1").ListObjects("Table1")

'Create an Array out of the Table's Data
  Set TempArray = tbl.DataBodyRange
  myArray = Application.Transpose(TempArray)

'Designate Columns for Find/Replace data
  fndList = 1
  rplcList = 2

'Loop through each item in Array lists
  For x = LBound(myArray, 1) To UBound(myArray, 2)
    'Loop through each worksheet in ActiveWorkbook (skip sheet with table in it)
      For Each sht In ActiveWorkbook.Worksheets
        If sht.Name <> tbl.Parent.Name Then

          sht.Cells.Replace What:=myArray(fndList, x), Replacement:=myArray(rplcList, x), _
            LookAt:=xlPart, SearchOrder:=xlByRows, MatchCase:=False, _
            SearchFormat:=False, ReplaceFormat:=False

        End If
      Next sht
  Next x

End Sub 
```

# c# - 以独占方式访问变量的最佳方法

> ID：13718385
> 
> 赞同：1
> 
> 时间：2012-12-05T07:35:39.033
> 
> 标签：c#, .net, task-parallel-library, .net-4.5

为了在多线程程序中专门使用一个变量，我曾经声明一个静态变量并在`Lock()`块中更改该变量。

我想知道是否有更好的方法来声明（例如：一个`int`）应该相互使用的变量（例如：增加和减少一个`int`变量）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:10:14.843

我发现`Interlocked.Increment()`和`Interlocked.Decrement()`。我认为这对我来说是一个很好的解决方案。

# javascript - 如何隐藏 javascript 微模板？

> ID：13718390
> 
> 赞同：0
> 
> 时间：2012-12-05T07:35:56.660
> 
> 标签：javascript, templates, external

有没有办法隐藏 javascript 微模板

喜欢：

```
<script id="id" type="text/html"></script> 
```

或者至少将所有模板放在一个 js 文件中并以某种方式调用它们？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:37:25.643

尝试通过 AJAX 加载它们，并将它们作为字符串存储在变量中。这样，您可以按需加载它们。也有一个方便的缓存机制。

# path - 如何在统一 3d 中的 iTween 路径上运行时将 FBX 文件旋转 90 度

> ID：13718392
> 
> 赞同：1
> 
> 时间：2012-12-05T07:36:03.287
> 
> 标签：path, unity3d

我正在做一个赛车游戏，在其中我使用 iTween 路径系统来平滑相机转弯，iTween 路径系统工作正常（特别感谢 Bob Berkebile）首先我使用一个立方体跟随路径，它在转弯时工作正常但是我的问题是我使用 FBX(character) 来跟随路径而不是使用立方体，当转弯时角色不会移动这是我的问题图片： ![在此处输入图像描述](../Images/1606c7a3851e9f68cee1f25199bee379.png)

我想要这种类型：

![在此处输入图像描述](../Images/fd7b261d4e3f16005c5442f1ee05942a.png)

如何解决这个问题？

# shell - 交互式 shell 应该在孤立的进程组中做什么？

> ID：13718394
> 
> 赞同：25
> 
> 时间：2012-12-05T07:36:09.017
> 
> 标签：shell, unix, signals, process-group

简短的问题是，如果 shell 位于不拥有 tty 的孤立进程组中，它应该做什么？但我建议阅读长问题，因为它很有趣。

这是一种有趣且令人兴奋的方法，可以使用您最喜欢的外壳将您的笔记本电脑变成便携式空间加热器（除非您是那些 tcsh 怪人之一）：

```
#include <unistd.h>   
int main(void) {
    if (fork() == 0) {
        execl("/bin/bash", "/bin/bash", NULL);
    }
    return 0;
} 
```

这会导致 bash 将 CPU 固定在 100%。zsh 和 fish 也一样，而 ksh 和 tcsh 咕哝着一些关于工作控制的事情，然后就倒下了，这有点好，但不多。哦，这是一个与平台无关的违规者：OS X 和 Linux 都受到影响。

我的（可能是错误的）解释如下：子外壳检测到它不在前台：`tcgetpgrp(0) != getpgrp()`. 因此它试图停止自己：`killpg(getpgrp(), SIGTTIN)`. 但是它的进程组是孤立的，因为它的父进程（C 程序）是领导者并死亡，并且发送到孤立进程组的 SIGTTIN 只是被丢弃（否则没有任何东西可以再次启动它）。因此，子 shell 并没有停止，但它仍然在后台，所以它会立即再次执行所有操作。冲洗并重复。

我的问题是，命令行 shell 如何检测到这种情况，它应该做什么？我的想法是外壳尝试`read`从标准输入，如果读取给它 EIO 就退出。

谢谢你的想法！

*编辑*：我尝试在 /dev/tty 上执行零长度读取（），并且成功了，这很糟糕。为了获得 EIO，我实际上必须准备从 /dev/tty 读取一些数据。

*编辑*：我的另一个想法是`kill(getpgrp(), 0)`。如果进程组是孤立的，那么我相信这将永远失败。但是，它也可能会失败，因为我无权向会话负责人发出信号。

*编辑*：对于以后发现此问题的任何人，我最终所做的都在[https://github.com/fish-shell/fish-shell/issues/422](https://github.com/fish-shell/fish-shell/issues/422)中进行了描述。还有，未来怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T15:34:26.003

这是 strace 所说的正在发生的事情：

```
--- SIGTTIN（停止（tty 输入））@ 0 (0) ---
rt_sigaction(SIGTTIN, {SIG_IGN, [], SA_RESTORER, 0x7fd5f6989d80}, {SIG_DFL, [], SA_RESTORER, 0x7fd5f6989d80}, 8) = 0
ioctl(255, TIOCGPGRP, [9954]) = 0
rt_sigaction(SIGTTIN, {SIG_DFL, [], SA_RESTORER, 0x7fd5f6989d80}, {SIG_IGN, [], SA_RESTORER, 0x7fd5f6989d80}, 8) = 0
杀死（0，SIGTTIN）= 0
--- SIGTTIN（停止（tty 输入））@ 0 (0) ---
rt_sigaction(SIGTTIN, {SIG_IGN, [], SA_RESTORER, 0x7fd5f6989d80}, {SIG_DFL, [], SA_RESTORER, 0x7fd5f6989d80}, 8) = 0
ioctl(255, TIOCGPGRP, [9954]) = 0
rt_sigaction(SIGTTIN, {SIG_DFL, [], SA_RESTORER, 0x7fd5f6989d80}, {SIG_IGN, [], SA_RESTORER, 0x7fd5f6989d80}, 8) = 0
杀死（0，SIGTTIN）= 0
[重复...]

```

这就是为什么，来自jobs.c，bash 4.2：

```
 while ((terminal_pgrp = tcgetpgrp (shell_tty)) != -1)
    {
      if (shell_pgrp != terminal_pgrp)
        {
          SigHandler *ottin;

          ottin = set_signal_handler(SIGTTIN, SIG_DFL);
          kill (0, SIGTTIN);
          set_signal_handler (SIGTTIN, ottin);
          continue;
        } 
      break;
    } 
```

至于怎么办……这超出了我的能力范围。但是，我认为这是有用的信息，有点需要评论。

# asp.net-mvc - ASP.NET MVC 4 验证错误未出现

> ID：13718400
> 
> 赞同：0
> 
> 时间：2012-12-05T07:36:22.817
> 
> 标签：asp.net-mvc, validation, validationsummary

我所有的路线：

```
 routes.MapRoute(
        name: "Login",
        url: "{eid}/Login",
        defaults: new { controller = "Account", action = "Login", eid = ConfigurationManager.AppSettings["Congress_Code"] } // Parameter defaults
    );

    routes.MapRoute(
        name: "Account",
        url: "{eid}/Account/{action}",
        defaults: new { controller = "Account", action = "{action}", eid = ConfigurationManager.AppSettings["Congress_Code"] }
    );

    routes.MapRoute(
        name: "Default",
        url: "{eid}/{controller}/{action}",
        defaults: new { controller = "Account", action = "Login", eid = ConfigurationManager.AppSettings["Congress_Code"] }
    ); 
```

在 manage.cshtml 中：

```
@using (Html.BeginForm(new { eid = ViewBag.EventId }))
{
    @Html.ValidationSummary(false) 
```

在帐户控制器中：

```
//
// GET: /Account/Manage
//[AllowAnonymous]
public ActionResult Manage(int eid, ManageMessageId? message)
{
    ViewBag.StatusMessage =
        (message == ManageMessageId.UpdateDetailsObjSuccess) ? "Your user details have been modified."
        : "";
    return View();
}

//
// POST: /Account/Manage
[HttpPost]
public ActionResult Manage(UpdateUserDetailsModel model,int eid)
{
    if (ModelState.IsValid)
    {
        var updateModel = AutoMapper.Mapper.Map<Models.UpdateUserDetailsModel,KPAD_Api.Kiosk.KioskUserDetailsExtended>(model);
        try
        {
            long token = Proxy.Proxy.Instance.Token[KioskUser.Id];
            var result = Proxy.Proxy.Instance.KioskUserClient.UpdateKioskUser(updateModel, token);
            if (result.ErrorCode == ReturnCodes.Codes.ALL_OK)
                return RedirectToAction("Manage", new { Message = ManageMessageId.UpdateDetailsObjSuccess });
            else
                ModelState.AddModelError(ReturnCodes.Instance.GetMessage(result.ErrorCode), new Exception(ReturnCodes.Instance.GetMessage(result.ErrorCode)));
        }
        catch (Exception e)
        {
            ModelState.AddModelError("Database error occured.Please contact the website administrator", e);
        }
    }
    else
    {
        ModelState.AddModelError("An unknown error occurend. Please try again. If it persists please contact the admin.",new Exception("Unknown"));
    }
    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

但是，当我故意生成异常或自然发生异常时，验证摘要仍然没有显示。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:04:16.510

试试这个

在 manage.cshtml 中：

```
@using (Html.BeginForm(new { eid = ViewBag.EventId }))
{
    @Html.ValidationSummary(true) 
```

在控制器中

```
[HttpPost]
public ActionResult Manage(UpdateUserDetailsModel model,int eid)
{
    if (ModelState.IsValid)
    {
        var updateModel = AutoMapper.Mapper.Map<Models.UpdateUserDetailsModel,KPAD_Api.Kiosk.KioskUserDetailsExtended>(model);
        try
        {
            long token = Proxy.Proxy.Instance.Token[KioskUser.Id];
            var result = Proxy.Proxy.Instance.KioskUserClient.UpdateKioskUser(updateModel, token);
            if (result.ErrorCode == ReturnCodes.Codes.ALL_OK)
                return RedirectToAction("Manage", new { Message = ManageMessageId.UpdateDetailsObjSuccess });
            else
                ModelState.AddModelError(ReturnCodes.Instance.GetMessage(result.ErrorCode), new Exception(ReturnCodes.Instance.GetMessage(result.ErrorCode)));
        }
        catch (Exception e)
        {
            ModelState.AddModelError("","Database error occured.Please contact the website administrator");
        }
    }
    else
    {
        ModelState.AddModelError("","An unknown error occurend. Please try again. If it persists please contact the admin.");
    }
    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

它绑定了键值对中的错误。

# javascript - 如何使用 javascript 定位 jquery 创建的 div

> ID：13718401
> 
> 赞同：0
> 
> 时间：2012-12-05T07:36:24.687
> 
> 标签：javascript, jquery

我有一个创建专辑的函数和 jquery 的 post 函数，然后它创建必要的 HTML 元素并将它们附加到文档中。问题是元素是一个链接及其目标，而当我刷新页面时链接工作正常，浏览器似乎找不到使用 jquery 创建的添加目标。我怎么能用 javascript 创建一个用 jquery 或 javascript 创建的元素。提前谢谢。编辑：

[jsfiddle 代码](http://jsfiddle.net/9tWu3/)

代码：

```
btn        = document.getElementById('add_album_btn');
btn.addEventListener('click', add_album_btn_func, false);
function add_album_btn_func(){
    div              = $('<div>').addClass('albums_div');
    a                = $('<a>').addClass('albums');
    a.attr('onclick', 'return false;');
    a.attr('onmousedown', 'autoScrollTo("new_section");').attr('href', '#');
    a.append('&#9733; New Album');
    div.append(a);
    section          = $('<section>').attr('id', 'new_section');
    header           = $('<header>').addClass('inner_header');
    header.append($('<h4>').append('New Album'));
    inner_section    = $('<section>').append($('<h5>').append('Images List :'));
    footer           = $('<footer>').addClass('inner_footer');
    upload_btn       = $('<a>').attr('id', 'new_section').addClass('upload_file ajax');
    upload_btn.attr('href', 'some/link/');
    upload_btn.append('Upload a file');
    footer.append(upload_btn);
    section.append(header);
    header.after(inner_section);
    inner_section.after(footer);
    $('#wrap').append(div);
    $('#separator').after(section);
}
var scrollY          = 0;
var distance         = 40;
var speed            = 24;
function autoScrollTo(el){
    var currentY     = window.pageYOffset;
    var targetY      = document.getElementById(el).offsetTop;
    var bodyHeight   = document.body.offsetHeight;
    var yPos         = currentY + window.innerHeight;
    var animator     = setTimeout('autoScrollTo(\'' + el + '\')', speed);
    if(yPos >= bodyHeight){
        clearTimeout(animator);
    }else{
        if(currentY < targetY - distance){
            scrollY = currentY + distance;
            window.scroll(0, scrollY);
        }else{
            clearTimeout(animator);
        }
    }
}​ 
```

编辑：显然我不够清楚我想要的是以下内容：我有这个 javascript 代码：

```
$(document).ready(function(){
    $('.lightbox').click(function(){
        $('.backdrop').animate({'opacity': '.50'}, 300, 'linear');
        $('.box').animate({'opacity': '1.00'}, 300, 'linear');
        $('.backdrop, .box').css('display', 'block');
    });
    $('.close').click(function(){
        close_box();
    });
    $(".backdrop").click(function(){
        close_box();
    });
    function close_box(){
        $('.backdrop, .box').animate({'opacity': '.0'}, 300, 'linear', function(){
            $('.backdrop, .box').css('display', 'none');
        });
    }
    a = $('<a>').addClass('lightbox').attr('href', '#').append('<br>Click to Test.');
    $('body').append(a);
}); 
```

的HTML：

```
<h1>jquery light-box</h1>
<a href=# class=lightbox>open lightbox</a>
<div class="backdrop"></div>
<div class="box"><div class="close">X</div>this is the light box</div> 
```

的CSS：

```
body{
    font-family: Helvetica, Arial;
}
.backdrop{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000000;
    opacity: .0;
    z-index: 50;
    display: none;
}
.box{
    position: absolute;
    top: 20%;
    left: 30%;
    width: 500px;
    height: 300px;
    background: #ffffff;
    z-index: 51;
    padding: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    -khtml-border-radius: 10px;
    border-radius: 10px;
    box-shadow: 0 0 5px #444444;
    display: none;
}
.close{
    float: right;
    margin-right: 6px;
    cursor: pointer;
} 
```

[jsfiddle 链接](http://jsfiddle.net/9tWu3/)

当使用 javascript 添加第二个链接时的问题，它似乎对函数不可见。任何帮助thanx提前。

注意：此灯箱代码来自 PHPacademy 教程。

注意：如果您要给出关于重写函数的答案并将其重新分配给新创建的元素，我已经知道我需要另一种方法。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T08:57:07.893

尝试这个：

```
$(".lightbox").live("click", function() {
        $('.backdrop').animate({
            'opacity': '.50'
        }, 300, 'linear');
        $('.box').animate({
            'opacity': '1.00'
        }, 300, 'linear');
        $('.backdrop, .box').css('display', 'block');
    }); 
```

[在这里演示](http://jsfiddle.net/9tWu3/10/)

**更新**

由于`lightbox`类元素是动态添加的，因此您需要使用[事件委托](http://learn.jquery.com/events/event-delegation/)来注册事件处理程序，例如：-

```
// New way (jQuery 1.7+) - .on(events, selector, handler)
$(document.body).on('click', '.lightbox', function (e) {
    e.preventDefault();
    $('.backdrop').animate({
        'opacity': '.50'
    }, 300, 'linear');
    $('.box').animate({
        'opacity': '1.00'
    }, 300, 'linear');
    $('.backdrop, .box').css('display', 'block');
}); 
```

[在这里演示](http://jsfiddle.net/9tWu3/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:47:26.130

How about to target element in callback function of jQuery post? In this callback function, append element to document first, then target it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T08:57:52.003

据我了解，您希望在单击“单击以测试”时触发相同的灯箱动画。当您单击“打开灯箱”时？

在这种情况下，`.click()`只需将事件处理程序绑定到匹配元素的 CURRENT 集。您正在寻找的是[`.on()`](http://api.jquery.com/on/)或[`.delegate()`](http://api.jquery.com/delegate/)

[小提琴](http://jsfiddle.net/9tWu3/9/)

# c - 需要以状态机风格编写算法，但它变得非常难以阅读

> ID：13718404
> 
> 赞同：1
> 
> 时间：2012-12-05T07:37:07.717
> 
> 标签：c, embedded, state

我在嵌入式设备的固件上工作（用 C 编写），我需要从显示器上截取屏幕截图并将其保存为 bmp 文件。目前我正在研究生成 bmp 文件数据的模块。最简单的方法是编写一些带有以下参数的函数：

（为简单起见，我的示例中仅支持带有索引颜色的图像）

*   颜色深度
*   图像尺寸（宽、高）
*   指向函数的指针以获取 color_index (i) 的调色板颜色
*   指向函数的指针，以获取具有给定坐标 (x, y) 的像素的 color_index
*   指向写入图像数据的函数的指针

然后这个函数的用户应该这样调用它：

```
/*
 * Assume we have the following functions:
 *    int_least32_t palette_color_get  (int color_index);
 *    int           pix_color_idx_get  (int x, int y);
 *    void          data_write         (const char *p_data, size_t len);
 */

bmp_file_generate(
      1,         //-- color_depth
      x, y,      //-- size
      palette_color_get,
      pic_color_idx_get,
      data_write
      ); 
```

就是这样：这个函数完成所有工作，并且仅在工作完成时返回（即由给定的用户回调函数生成和“写入”的 bmp 文件`data_write()`。

但是，我需要使`bmp_writer`模块在协作 RTOS 中可用，并且`data_write()`可能是一个通过某种协议（例如，UART）实际将数据传输到另一个设备的函数），因此，这个函数只需要从任务上下文中调用。这种方法不起作用，我需要以 OO 风格制作它，它的用法应该如下所示：

```
/*
 * create instance of bmp_writer with needed params
 * (we don't need "data_write" pointer anymore)
 */
T_BmpWriter *p_bmp_writer = new_bmp_writer(
      1,         //-- color_depth
      x, y,      //-- size
      palette_color_get,
      pic_color_idx_get
      );

/*
 * Now, byte-by-byte get all the data!
 */
while (bmp_writer__data_available(p_bmp_writer) > 0){
   char cur_char = bmp_writer__get_next_char(p_bmp_writer);
   //-- do something useful with current byte (i.e. cur_char).
   //   maybe transmit to another device, or save to flash, or anything.
}

/*
 * Done! Free memory now.
 */ 
delete_bmp_writer(p_bmp_writer); 
```

如您所见，用户可以`bmp_writer__get_next_char(p_bmp_writer)`在需要时调用，并根据需要处理接收到的数据。

实际上我已经实现了这个，但是，通过这种方法，所有的算法都被彻底颠覆了，而且这段代码非常不可读。

我将向您展示生成调色板数据的旧代码的一部分（来自完成所有工作的函数，并且仅在工作完成时返回），以及新代码的适当部分（以状态机样式）。

旧代码：

```
void bmp_file_generate(/*....args....*/)
{
   //-- ... write headers

   //-- write palette (if needed)
   if (palette_colors_cnt > 0){
      size_t i;
      int_least32_t cur_color;
      for (i = 0; i < palette_colors_cnt; i++){
         cur_color = callback_palette_color_get(i);
         callback_data_write((const char *)&cur_color, sizeof(cur_color));
      }
   }

   //-- ...... write image data ..........
} 
```

如您所见，代码非常简短易读。

现在，新代码。

它看起来像状态机，因为它实际上是按阶段划分的（HEADER_WRITE、PALETTE_WRITE、IMG_DATA_WRITE），每个阶段都有自己的上下文。在旧代码中，上下文保存在局部变量中，但现在我们需要创建结构并从堆中分配它。所以：

```
/*
 * Palette stage context
 */
typedef struct {
   size_t         i;
   size_t         cur_color_idx;
   int_least32_t  cur_color;
} T_StageContext_Palette;

/*
 * Function that switches stage.
 * T_BmpWriter is an object context, and pointer *me is analogue of "this" in OO-languages.
 * bool_start is 1 if stage is just started, and 0 if it is finished.
 */
static void _stage_start_end(T_BmpWriter *me, U08 bool_start)
{
   switch (me->stage){
      //-- ...........other stages.........

      case BMP_WR_STAGE__PALETTE:
         if (bool_start){
            //-- palette stage is just started. Allocate stage context and initialize it.
            me->p_stage_context = malloc(sizeof(T_StageContext_Palette));
            memset(me->p_stage_context, 0x00, sizeof(T_StageContext_Palette));

            //-- we need to get first color, so, set index of byte in cur_color to maximum
            ((T_StageContext_Palette *)me->p_stage_context)->i = sizeof(int_least32_t);
         } else {
            free(me->p_stage_context);
            me->p_stage_context = NULL;
         }
         break;

      //-- ...........other stages.........

   }
}

/*
 * Function that turns to the next stage
 */
static void _next_stage(T_BmpWriter *me)
{
   _stage_start_end(me, 0);
   me->stage++;
   _stage_start_end(me, 1);
}

/*
 * Function that actually does the job and returns next byte
 */
U08 bmp_writer__get_next_char(T_BmpWriter *me)
{
   U08 ret = 0;        //-- resulting byte to return
   U08 bool_ready = 0; //-- flag if byte is ready

   while (!bool_ready){
      switch (me->stage){

         //-- ...........other stages.........

         case BMP_WR_STAGE__PALETTE:
            {
               T_StageContext_Palette *p_stage_context =
                  (T_StageContext_Palette *)me->p_stage_context;

               if (p_stage_context->i < sizeof(int_least32_t)){
                  //-- return byte of cur_color
                  ret = *( (U08 *)&p_stage_context->cur_color + p_stage_context->i );
                  p_stage_context->i++;
                  bool_ready = 1;
               } else {
                  //-- need to get next color (or even go to next stage)

                  if (p_stage_context->cur_color_idx < me->bmp_details.palette_colors_cnt){
                     //-- next color
                     p_stage_context->cur_color = me->callback.p_palette_color_get(
                           me->callback.user_data,
                           p_stage_context->cur_color_idx
                           );
                     p_stage_context->cur_color_idx++;
                     p_stage_context->i = 0;
                  } else {
                     //-- next stage!
                     _next_stage(me);
                  }
               }

            }
            break;

         //-- ...........other stages.........

      }
   }

   return ret;

} 
```

如此庞大的代码，很难理解！但我真的不知道如何以某种不同的方式制作它，以便能够逐字节获取信息。

有谁知道如何实现这一点，并保持代码的可读性？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:55:09.023

您可以尝试**protothread**，这对于将基于状态机的程序转换为线程式程序很有用。我不是 100% 确定它可以优雅地解决你的问题，你可以试一试。这篇论文是一个很好的起点：`Protothreads: simplifying event-driven programming of memory-constrained embedded systems`

这是它的源代码：[http ://code.google.com/p/protothread/](http://code.google.com/p/protothread/)

顺便说一句，在Contiki嵌入式操作系统中也使用protothread，用于在Contiki中实现进程。

# android - 如何删除条形图顶部显示的文本？

> ID：13718406
> 
> 赞同：0
> 
> 时间：2012-12-05T07:37:15.990
> 
> 标签：android, charts, bar-chart, achartengine

我需要删除我创建的条形图顶部的文本，你能告诉我如何实现它。我将我得到的输出与我想要删除的带圆圈的文本一起附上。我正在使用 achartengine 来绘制图表。

![在此处输入图像描述](../Images/7bfd685bf83abe39b5cef0565800165b.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T08:01:10.137

要在 AChartEngine 中禁用这些数字，请找到以以下结尾的行：

```
...setDisplayChartValues(true); 
```

并删除它。（或切换`true`到`false`，但我认为默认情况下不会显示它们。）

* * *

这是 SimpleSeriesRenderer 类的一个特性[`setDisplayChartValues()`](http://www.achartengine.org/content/javadoc/org/achartengine/renderer/SimpleSeriesRenderer.html#setDisplayChartValues%28boolean%29)：

> 设置图表点值是否应显示为文本。

# c# - 如何从网页将动态参数值设置为自定义控件

> ID：13718412
> 
> 赞同：1
> 
> 时间：2012-12-05T07:37:45.040
> 
> 标签：c#, asp.net, sharepoint

我在自定义控件中有一个图像按钮，如下所示。

```
 public string SearchTableName = string.Empty;
       public string SearchColumnName = string.Empty;
       public string SiteURL = string.Empty;
        ImageButton _imgbtn;
         protected override void OnInit(EventArgs e)
         {
           _imgbtn = new ImageButton();
           _imgbtn.ImageUrl = ImageURL;
           _imgbtn.OnClientClick = "ShowSearchBox('" + SiteURL +"/_layouts/CustomSearch/SearchPage/Searchpage.aspx?table_name=" + SearchTableName + " &column_name=" + SearchColumnName + "')";
         } 
```

单击图像按钮时，我想迁移到另一个弹出窗口。为此，我编写了一个 javascript 函数。我在我们正在使用这个自定义控件的网页中设置`SearchTableName`and ，如下所示。`SearchColumnName`在消费之前，我在带有注册标签的网页中注册了这个控件。

`<ncc:SearchControl runat="server" ID="txtSearchControl" />`在此网页的代码隐藏文件中，我使用以下代码来设置值。

```
protected void Page_Load(object sender, EventArgs e)
{
  txtSearchControl.ImageURL = "_layouts/Images/settingsicon.gif";
  txtSearchControl.SearchTableName = "Employees";
  txtSearchControl.SearchColumnName = "LastName";
  txtSearchControl.SiteURL = "http://Sp2010:8787";
 } 
```

现在问题来了，当我单击图像按钮时`SearchTableName`，`SearchColumnName`值不会出现。我想我正在调用`OnClientClick`函数，这就是为什么没有设置值的原因。但是如何根据网页中设置的值设置自定义控件的值。如果我使用该`Click`功能，它将达到我的目的吗？如果是这样，如何从此单击事件中调用该 javascript 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:40:35.113

终于得到解决方案。我正在`init`自定义控件中的页面方法中初始化值。这就是为什么我在可视 webpart 页面中设置的值没有被捕获的原因。现在我更改了`CreateChildControl`方法中的初始化值。现在它完美地工作了。谢谢你。

# visual-studio-2012 - NavigateBackward 在 Visual Studio 2012 中损坏？

> ID：13718415
> 
> 赞同：1
> 
> 时间：2012-12-05T07:38:06.067
> 
> 标签：visual-studio-2012

假设您在位置 X。
F12 在 foo.cpp 中运行 foo（以预览模式打开）
F12 在 bar.cpp 中运行 bar（预览模式，foo.cpp 消失）。
Navigate Back (Ctrl-) 将带您返回 X。预计返回 foo。

这很烦人。无论如何解决方法？

# mysql - Mysql六表连接代码不起作用

> ID：13718416
> 
> 赞同：-4
> 
> 时间：2012-12-05T07:38:07.857
> 
> 标签：mysql, sql, database

当前 MySQL 查询：

```
SELECT A.* 
FROM std_results_lev1_sem1 A JOIN std_results_lev1_sem2 B
     ON A.std_id = B.std_id
     JOIN std_results_lev2_sem1 C
     ON B.std_id = C.std_id
     JOIN std_results_lev2_sem2 D
     ON C.std_id =D.std_id
     JOIN  std_results_lev3_sem1 E 
     ON D.std_id = E.std_id
   JOIN  std_results_lev3_sem2 F 
     ON E.std_id = F.std_id
ORDER BY std_id ASC; 
```

所有这些表都有相同的`std_id`列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:41:10.727

按顺序排列的 std_id 不明确。

```
ORDER BY A.std_id ASC; 
```

# java - 从 Fusion Table 过滤到 Google Maps v3 复选框问题

> ID：13718417
> 
> 赞同：0
> 
> 时间：2012-12-05T07:38:12.050
> 
> 标签：java, google-maps-api-3, checkbox, where, google-fusion-tables

我没有使用 100 万公里（大约 10 分钟后会停止显示），而是尝试使用 Fusion 表并使用复选框在不同的过滤器之间切换。这对于前两个非常有效，但现在其他类别将不会显示，除非第一个或两个被单击并单击关闭。显然有些不对劲。我从 Google 示例（IN，关于比萨店）中窃取了代码，但这对扩展不起作用。另外，我有一个扩展的侧边栏，这并不能帮助我控制它。

我创造了一堆这样的：

```
google.maps.event.addDomListener(document.getElementById('Food Manufacturing/Wholesale'),
        'click', function() {
          filterMap(layer, tableId, map);
    }); 
```

然后是这个：

```
 function filterMap(layer, tableId, map) {
    var where = generateWhere();

    if (where) {
      if (!layer.getMap()) {
        layer.setMap(map);
      }
      layer.setOptions({
        query: {
          select: 'Longitude',
          from: tableId,
          where: where
        }
      });
    } else {
      layer.setMap(null);
    }
  }

  // Generate a where clause from the checkboxes. If no boxes
  // are checked, return an empty string.
  function generateWhere() {
    var filter = [];
    var stores = document.getElementsByName('store');
    for (var i = 0, store; store = stores[i]; i++) {
      if (store.checked) {
        var storeName = store.value.replace(/'/g, '\\\'');
        filter.push("'" + storeName + "'");
      }
    }
    var where = '';
    if (filter.length) {
      where = "'Displ_Type' IN (" + filter.join(',') + ')';
    }
    return where;
  }

  google.maps.event.addDomListener(window, 'load', initialize); 
```

然后这些在 div 正文中：

```
<li><a1><input type="checkbox" name="store" id="cafe" value="Cafe">Cafe</a1></li>
    <li><a1><input type="checkbox" name="store" id="Catering" value="Catering"> Catering</a1></li>
    <li><a1><input type="checkbox" name="store" id="Cooking School" value="Cooking School"> Cooking School</a1></li> 
```

还有 [http://jsfiddle.net/pwhqq/1/](http://jsfiddle.net/pwhqq/1/)

融合表为： [https ://www.google.com/fusiontables/DataSource?snapid=S7955100ZHL](https://www.google.com/fusiontables/DataSource?snapid=S7955100ZHL)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:41:11.877

安宁我是个白痴。解决方案是不要用大写字母或空格或标点符号来命名您的 Fusion Table 列（这将成为您的 id、您的名称和您的值）。Java 对此并不友好。

# python - Easy_install 不断将软件包安装到过时的 python 版本

> ID：13718419
> 
> 赞同：1
> 
> 时间：2012-12-05T07:38:20.913
> 
> 标签：python, macos, python-2.7, networkx

[使用 Mac OSX 10.6.8]

我正在尝试将networkx安装到python 2.7，但它一直在尝试将其安装到2.6版（当我升级到2.7时已卸载）

我为未指定的版本尝试了 easy_install，它得到了 2.6 版本

命令：

easy_install networkx

输出

```
Searching for networkx
Best match: networkx 1.7
Processing networkx-1.7-py2.6.egg
Removing networkx 1.7 from easy-install.pth file
Adding networkx 1.7 to easy-install.pth file

Using /Library/Python/2.6/site-packages/networkx-1.7-py2.6.egg
Processing dependencies for networkx
Finished processing dependencies for networkx
smms-baldrick:20121205_coif kirstin$ 
```

我尝试下载python 2.7版本并直接安装它，但它仍然去了2.6的库

命令：

easy_install [http://networkx.lanl.gov/download/networkx/networkx-1.7-py2.7.egg](http://networkx.lanl.gov/download/networkx/networkx-1.7-py2.7.egg)

输出

```
Downloading http://networkx.lanl.gov/download/networkx/networkx-1.7-py2.7.egg
Processing networkx-1.7-py2.7.egg
removing '/Library/Python/2.6/site-packages/networkx-1.7-py2.7.egg' (and everything under it)
creating /Library/Python/2.6/site-packages/networkx-1.7-py2.7.egg
Extracting networkx-1.7-py2.7.egg to /Library/Python/2.6/site-packages
networkx 1.7 is already the active version in easy-install.pth

Installed /Library/Python/2.6/site-packages/networkx-1.7-py2.7.egg
Processing dependencies for networkx==1.7
Finished processing dependencies for networkx==1.7 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:11:58.690

在 Unix 变体中，easy_install 还安装了一个后缀链接，所以应该有一个 easy_install-2.7 。一般来说，了解新 Python 的安装位置并使用该知识安装 setup-tools，然后使用 easy_install 可能是一个好主意。例如：

```
 $ cd to/my/setuptools/
 $ sudo /my/new/python2.7 setup.py install 
```

之后

```
 $ /my/new/easy_install-2.7 networkx 
```

然后您可以创建一组符号链接。此外，因为 Mac 在内部使用 python，所以最好不要弄乱默认的 python 安装，而是使用你自己的类似[virtualenv](http://www.virtualenv.org/en/latest/)的东西（这将自动安装 setuptools）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:51:44.310

您为 Python 的特定安装安装 easy_install。然后，easy_install 将安装到安装了 easy_install 的 Python 安装中。

如果您想使用 easy_install 将软件包安装到另一个 Python 安装中，您必须做的第一件事就是在该 Python 安装中安装 easy_install。然后您可以使用该 easy_install 来安装软件包。

您可能还想改用[pip](http://pypi.python.org/pypi/pip)。

另请参阅：[关于安装 Python 及其模块和包的新手提示。](http://regebro.wordpress.com/2011/02/02/newbie-hint-on-installing-python-and-its-modules-and-packages/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:29:39.597

我设法安装了这个包

```
python -m easy_install networkx 
```

从[如何使用特定的 python 版本运行 easy_install](https://stackoverflow.com/questions/6611730/how-to-run-easy-install-using-a-particular-python-version)

[我的默认 python 安装称为easy-install]

但我可以使用更长期的解决方案来更改我的默认易于安装版本

# iphone - 如何将我的电子邮件文本字段值与 iphone 中的数据库值进行比较

> ID：13718420
> 
> 赞同：1
> 
> 时间：2012-12-05T07:38:22.943
> 
> 标签：iphone, objective-c, ios

我在将我的文本字段电子邮件值与 sqlite 数据库中的值进行比较时遇到问题。如果两个值相同，则会显示“数据库中已存在电子邮件”的警报框。为此，我创建了一个名为 findcontact 的函数，我通过单击按钮调用该函数。按钮单击方法正在工作，因为当我单击按钮时，按钮单击方法会生成我在 findContact 方法中编写的日志。

但对我来说问题是如果两封电子邮件都匹配，如何比较电子邮件并显示警报框

```
- (void) findContact:(NSString *) email{

    const char *dbpath = [path UTF8String];

    if (sqlite3_open(dbpath, &database) == SQLITE_OK){
        NSString *querySQL = [NSString stringWithFormat: @"SELECT email FROM CONTACT WHERE email=\"%@\"",email];
        NSLog(@" email = %@", querySQL);
        const char *query_stmt = [querySQL UTF8String];
        NSLog(@" char email = %s", query_stmt);
        if (sqlite3_prepare_v2(database, query_stmt, -1, &init_statement, NULL) == SQLITE_OK){
            if (sqlite3_step(init_statement) == SQLITE_ROW){
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"email already exist in database" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK ", nil];
                [alert show];
                [alert release];
            }
            else {
                UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Success" message:@"email not exist" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"OK ", nil];
                [alert show];
                [alert release];
            }
            sqlite3_finalize(init_statement);
        }
        sqlite3_close(database);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:12:06.950

在您的代码中进行这样的比较

```
 while(sqlite3_step(compiledStatement)==SQLITE_ROW)
    {

        NSString *emaiID = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement,0)];

        if ([emaiID isEqualToString:yourTextField.text])
        {
            UIAlertView *alert = [[UIAlertView alloc]
                                  initWithTitle:@"Error"
                                  message:@"email already exist in database"
                                  delegate:nil
                                  cancelButtonTitle:nil
                                  otherButtonTitles:@"OK ", nil];
            [alert show];
        }
        else{
            //Your task
        }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:51:35.857

检查这个

```
NSString *querySQL = [NSString stringWithFormat: @"SELECT email FROM CONTACT WHERE email='%@'",email]; 

    if(sqlite3_prepare_v2(sharedDataBase, [querySQL UTF8String], -1, &statment, nil) == SQLITE_OK)
    {
        if(sqlite3_step(statment)==SQLITE_ROW){

            char *email=(char *)sqlite3_column_text(statment, 0); 

            NSString  *emailStr =[NSString stringWithUTF8String:email]; 

            // email exist 

        }
        else{

            // email not exist
        }

        sqlite3_finalize(statment); 
    }
    else
        sqlite3_close(sharedDataBase); 
```

# regex - 正则表达式替换标签之间的文本 and

> ID：13718423
> 
> 赞同：0
> 
> 时间：2012-12-05T07:39:14.003
> 
> 标签：regex, vb.net, replace, tags

我在 StackOverflow 或 Google 上找不到这个的工作演示。我有一个字符串，其中包含我需要删除的区域。

```
 </tr>
    </table>
</div>

<script language='javascript'>
//Lots of javascript here
</script> 
```

我需要帮助删除`<script language='javascript'>`和`<script>`请之间的所有文本，包括标签本身。我尝试过

```
 Dim str As String = Regex.Replace(mystring,"\<script language='javascript'>(.*?)\</script>", "") 
```

最近我找到的东西是这个 [正则表达式来替换 </script> 标记之前的文本或 c# 中脚本标记中的文本之间的文本，](https://stackoverflow.com/questions/4049167/regular-expression-to-replace-text-before-script-tag-or-between-text-in-scrip) 但不幸的是没有雪茄

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:49:20.837

This looks like a job for an XML parser:

```
Dim xm = New XmlDocument()
xm.LoadXml(String.Format("{0}", str))
Dim scripts = xm.DocumentElement.SelectNodes("script")
For Each s In scripts
    xm.DocumentElement.RemoveChild(s)
Next
str = xm.DocumentElement.InnerXml 
```

This removes all script tags, along with their contents.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:46:48.407

这是 HTML 解析器的工作。通过使用[HtmlAgilityPack](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://htmlagilitypack.codeplex.com/&ei=wAi_ULjBD4Wl4gTUpYHQBw&usg=AFQjCNG2MH29eft1y8OrwFMjVzPNbVc0-w&sig2=Qbz6s0OjLEVK9XsBDs5sdQ)：

```
Dim doc = New HtmlDocument()
doc.LoadHtml(html)
Dim scriptNodes = doc.DocumentNode.SelectNodes("//script[@language='javascript']").ToList()

For Each scriptNode As HtmlNode In scriptNodes
    scriptNode.InnerHtml = String.Empty
Next

Dim result = doc.DocumentNode.InnerHtml 
```

这将选择属性设置为的`script`节点，然后删除这些节点的内容。`language``javascript`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:11:09.413

以下正则表达式应该做你想做的。

```
/<script.*>([\s\S]*)</script>/m 
```

说明：[\s\S] 组匹配所有字符，其中 '.' 匹配所有字符 - 除了 - 换行符。我们想要换行符。

/m 使正则表达式成为多行，因此它匹配多行而不是仅一行。

话虽这么说：我刚刚回答了您刚刚提出的问题（如何使用正则表达式），但我同意您应该为此使用 dom 解析器，因为它更有弹性。（但话又说回来，这个正则表达式在性能方面可能更快。）

# php - 如何判断一个邮箱地址是不是教育邮箱？

> ID：13718426
> 
> 赞同：5
> 
> 时间：2012-12-05T07:39:28.883
> 
> 标签：php, email, web, laravel

我希望只有大学生能够注册我的网站，但我不知道如何控制它。我还希望 .edu.fr、edu.tr 或其他 .edu 扩展名能够加入我的网站，而不仅仅是 .edu 的。我正在考虑使用一些 reg-ex，但我找不到任何解决方案。如果有人可以帮助我，我会很高兴？

不应该那么重要，但我正在使用带有 laravel 框架的 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:52:38.070

大多数教育机构的域名都遵循以下模式：

```
uni.edu
uni.edu.fr
uni.ac.uk 
```

以下正则表达式涵盖了所有此类情况：

```
/(\.edu(\.[a-z]+)?|\.ac\.[a-z]+)$/ 
```

您可以根据需要将案例添加到正则表达式。通过发送带有确认链接的自动电子邮件来检查电子邮件是否真实。

对应的PHP：

```
if (preg_match('/(\.edu(\.[a-zA-Z]+)?|\.ac\.[a-zA-Z]+)$/i', $domain)) {
    // allow
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:45:51.447

没有一个很好的方法来做到这一点，但一种可能的方法可能是使用 @ 符号来分解地址：

```
// Split the email address into 2 values of an array using the @ symbol as delimiter.
$emailParts = explode('@', $theEmailAddress);
// If the second part (domain part) contains .edu, period, country code or just .edu, then allow signup.
if (preg_match('/\.edu\.[^.]+$/i', trim($emailParts[1])) || preg_match('/\.edu$/i', trim($emailParts[1]))) {
    // Use the above if you are assuming that the country codes can be any number of characters. If you know for sure country codes are 2 chars, use this condition:
    // (preg_match('/\.edu\.[^.]{2}$/i', trim($emailParts[1])) || preg_match('/\.edu$/i', trim($emailParts[1])))
    // Allow signup
} 
```

当然，这并不能保证域或电子邮件地址是现有的！

# grails - Groovy/GSP 重定向控制器

> ID：13718431
> 
> 赞同：1
> 
> 时间：2012-12-05T07:39:50.870
> 
> 标签：grails, controllers

我有一个 Web 应用程序，我试图不重新编译，因为文档很少，而且环境有点敏感。

考虑到这一点，我要做的就是劫持身份验证机制以重定向到几个替代网站之一。为此，有一个身份验证服务和一个身份验证控制器。当用户未经身份验证时，网站会重定向到 /auth/login。

在视图文件夹中，我构建了一个替代 /auth/login_new.gsp 并从那里可以验证用户并以某种频率但不是 100% 重定向回 /auth/redirect.gsp。该重定向页面从数据库中获取一个值，并将用户重定向到网站上的正确关注。当我从 /auth/login 运行身份验证时，站点会忽略对 /auth/redirect.gsp 的重定向请求。

我已将所有不同控制器的显示页面设置为 window.location.href="/auth/redirect.gsp" 但我无法让它 100% 到达那里。我还重置了 layout/domain.gsp 文件以破坏站点的其他功能和脚本重定向。我在重复重定向尝试时遇到错误，但现在我只是去了一个死/毁坏的主页......

关于如何避开重新编译的任何建议？

谢谢莱夫

# c# - 在 .NET 4.0 中使用 task.run 与 task.run 和 continuewith 进行异步/等待

> ID：13718436
> 
> 赞同：9
> 
> 时间：2012-12-05T07:40:19.530
> 
> 标签：c#, .net, async-await

我已经在 .net 4.0 中安装了异步包。这使我能够在我的应用程序中使用 async / await 关键字。

据我所知，到目前为止，我可以在 async / await 中使用包装我的 task.run 代码，并且与使用 task.run 和 continuewith 具有相同的结果。

这是真的？还是有更深层次的差异？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T07:47:35.147

这取决于你在做什么`ContinueWith`。但是，是的，通常您可以`await`使用`ContinueWith`. 您*不能*做的是诸如“仅在失败时继续使用此代码”之类的事情-您只需为此使用正常的异常处理即可。正如 AlexH 所说，在您的方法的整体行为方面会有进一步的差异`async`- 但在大多数情况下，我会说这是*可取*的。基本上，代码流的异步性，所以异步方法倾向于调用更多的异步方法等。

我建议您阅读`async`/`await`是关于什么的（那里有大量资源 - 我建议将 MSDN 上的[“使用基于任务的异步模式”](http://msdn.microsoft.com/en-us/library/hh873173.aspx)页面作为一个起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T07:51:07.917

如果在函数原型中引入 async 关键字，将会有所不同；异常将在任务调用者级别引发。如果没有 async 关键字，您必须检查 TaskContinuationOptions.OnlyOnFaulted 状态以获取异常。

# url - wso2 自定义 url 空指针

> ID：13718437
> 
> 赞同：0
> 
> 时间：2012-12-05T07:40:33.363
> 
> 标签：url, soap, null, wso2, wso2carbon

我已经按照下面的 url 到 T 的程序进行了操作，但仍然有问题：

[http://wso2.org/library/knowledge-base/2011/01/custom-urls-wso2-esb-proxy-service](http://wso2.org/library/knowledge-base/2011/01/custom-urls-wso2-esb-proxy-service) _

我可以更改我的网址，对于肥皂服务，它可以在没有安全性的情况下工作。如果我尝试添加安全性，它将无法正常工作。它也不适用于休息服务。我得到一个空指针，堆栈跟踪指向`POXSecurityHandler`我收集的从基本身份验证到肥皂头的变化。

有人见过这个吗？

在我的第二个系统上，soap 在我更改 URL 后似乎只是忽略了身份验证。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T19:27:49.920

搁置自定义网址。确定了 wso2 4.5.1 中的一个错误，该错误在 4.5.0 中不存在。不能将安全性与休息服务一起使用。将基本身份验证转换为肥皂安全性的 poxsecurityhandler 有一个错误。

# php - PHP 批量插入

> ID：13718439
> 
> 赞同：0
> 
> 时间：2012-12-05T07:41:01.070
> 
> 标签：php, bulkinsert, output

我有使用批量插入的php代码。，我运行代码并且没有错误。，问题没有这个代码的输出并且出现空白页面/屏幕..我想要做的就是让输出使用此代码的页面和数据库..

```
 <?php

     $dbh = odbc_connect(
           "DRIVER={SQL Server Native Client 10.0};Server=.;Database=ECPNWEB", 
           "sa", "ECPAY");

 if (($handle = fopen("c:\\tblmcwd.txt", "r")) !== FALSE) {
     while (($data = fgetcsv($handle, 4096, "|")) !== FALSE) {
         if (count($data) == 10) {
             $sql = "INSERT INTO [dbo].[tblMCWD] (
                         [ID], 
                         [ConsumerCode], 
                         [ConsumerName], 
                         [AccountStatus], 
                         [AccountNumber], 
                         [DueDate], 
                         [CurrentBill], 
                         [PreviousBill], 
                         [TotalDiscount], 
                         [TotalGrossAmountDue]
                     ) VALUES (
                         ?, ?, ?, ?, ?, ?, ?, ?, ?, ?
                     )";

             $stmt = $dbh->prepare($sql);
             $stmt->bindValue(1, $data[0]);
             $stmt->bindValue(2, $data[1]);
             $stmt->bindValue(3, $data[2]);
             $stmt->bindValue(4, $data[3]);
             $stmt->bindValue(5, $data[4]);
             $stmt->bindValue(6, $data[5]);
             $stmt->bindValue(7, $data[6]);
             $stmt->bindValue(8, $data[7]);
             $stmt->bindValue(9, $data[8]);
             $stmt->bindValue(10, $data[9]);
             $stmt->execute();
         }
     }
     fclose($handle);
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:02:00.793

试试这个：

```
....

$sql = "INSERT INTO [dbo].[tblMCWD] (
                     [ID], 
                     [ConsumerCode], 
                     [ConsumerName], 
                     [AccountStatus], 
                     [AccountNumber], 
                     [DueDate], 
                     [CurrentBill], 
                     [PreviousBill], 
                     [TotalDiscount], 
                     [TotalGrossAmountDue]
                 ) VALUES (
                     :ID, :ConsumerCode, :ConsumerName, :AccountStatus, :AccountNumber, :DueDate, :CurrentBill, :PreviousBill, TotalDiscount, TotalGrossAmountDue
                 )";
$stmt = $dbh->prepare($sql);
$stmt->bindParam(':ID', $data[0]);
$stmt->bindParam(':ConsumerCode', $data[1],PDO::PARAM_STR);
$stmt->bindParam(':ConsumerName', $data[2],PDO::PARAM_STR);
$stmt->bindParam(':AccountStatus', $data[3],PDO::PARAM_STR);
$stmt->bindParam(':AccountNumber', $data[4],PDO::PARAM_STR);
$stmt->bindParam(':DuaDate' , $data[5],PDO::PARAM_STR);
$stmt->bindParam(':CurrentBill', $data[6],PDO::PARAM_STR);
$stmt->bindParam(':PreviousBill', $data[7],PDO::PARAM_STR);
$stmt->bindParam(':TotalDiscount', $data[8],PDO::PARAM_STR);
$stmt->bindParam(':TotalGrossAmountDue', $data[9],PDO::PARAM_STR);
$stmt->execute();

if(!$stmt){    // Check if the query executed succesfull, if not, print the data...
    $printedString = "ID: %1$s ConsumerCode: %2$s ConsumerName: %3$s"; // and so on....
    $printedString = sprintf($printedString , $data[0],$data[1],$data[2]); // and so on...
} else{
    echo "Everything executed succesfully!<br />";
} 
```

您可以在此处找到更多信息：[链接](http://php.net/manual/en/function.sprintf.php) 此处：[链接 2](http://php.net/manual/en/pdostatement.execute.php) 此处：[链接 3](http://php.net/manual/en/pdostatement.bindparam.php)

用于`PDO::PARAM_STR`字符串和`PDO::PARAM_INT`整数，试一试

# php - 在 firebug 中发现 JQuery 语法错误，但在我的代码中没有

> ID：13718441
> 
> 赞同：8
> 
> 时间：2012-12-05T07:41:01.680
> 
> 标签：php, ajax, jquery, post

在 PHP 页面中，我有一个下拉列表，它触发 jQuery 更改功能并使用 AJAX 进行 POST，以便在页面中填充第二个下拉列表。

这一切都应该很简单，但是 Firebug 会为 '?' 引发语法错误。它在运行时出现在我的代码中，而实际上并不在我的代码中。

这是我的 JavaScript 代码：

```
$(document).ready(function() {
    $('#taglist').change(function(){
        $.ajax({
            type: "POST",
            url: "../includes/ajax.php",
            data: "taglist=" + $(this).find("option:selected").attr('value'),
            dataType: 'json',
            success: function(response, textStatus, jqXHR) {
                $("#catlist").html(response.catlist);
            },
            error: function (xhr, textStatus, errorThrown) {
                $("#catlist").html(xhr.responseText);
            }
        });​
    });
}); 
```

以下是在 ajax.php 中执行的 PHP 代码：

```
if(isset($_POST['taglist'])){
    $catlist = '<select name="cat_id[]" size="5" multiple id="cat_id[]">';
    $catlist .= fillselecteditmultiple(0, 0, $_POST['taglist']);
    $catlist .= '</select>';

    echo json_encode(array("status"=>"success", "catlist" => $catlist));
} 
```

fillselecteditmultiple() 输出填充的选项，突出显示应该预先选择的选项。它工作正常，因为我在其他页面中使用没有问题。为了确保函数本身没有抛出错误，我什至尝试更改函数以输出一个简单的 $catlist='abc' 字符串作为响应，但仍然是相同的错误。

奇怪的是，Firebug 在 javascript 代码的最后 2 行抛出一个错误，就像您在所附图片中看到的那样：

![萤火虫错误](../Images/4871fc69afce39a0a054a17508d0be8c.png) ![执行时的源代码](../Images/155666430c4da931d85bb6cd71ace35b.png)

什么可能导致“？” 出现在我的代码中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T09:31:39.550

只需检查您的编码。当您在行尾看到“奇怪”符号时，这主要是由编码问题引起的。

此外，常见的建议：

> 当一个程序不知道如何表示一个 unicode 代码点时，它会在一个正方形内打印一个问号（我想你以前看过这个），或者如果它不能，一个简单的问号。一个意想不到的问号总是让开发人员怀疑编码。
> (c) 阿克塞尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T07:55:56.940

你在 javascript 代码中发送这些数据，

```
data: "tag=" + $(this).find("option:selected").attr('value') 
```

但在 php 文件中，您尝试获取 $_POST['taglist']，

变量名不一样。

尝试更改数据：“taglist=....”或 $_POST['tag']。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:56:20.997

一步一步调试代码。首先`else`在您的文件中添加一条语句`ajax.php`并检查执行的位置。如果它进入`if`语句，则`die()`在每一行上放置一个函数来检查错误来自哪里。您的代码中的一个可能错误是您正在发送`tag`ajax 函数并且您正在获取`$_POST['taglist']`. `#taglist`触发这个ajax函数，它的值是不贴的。仅发布您在`data`属性中提供的值。所以改变你的 if 条件

从

```
if(isset($_POST['taglist'])){ 
```

到

```
if(isset($_POST['tag'])){ 
```

这可能是原因。其他很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:47:53.303

我想你那里可能有一个空格..删除 }) 之后的空格;​</p>

# javascript - 带有javascript函数的jsp oracle

> ID：13718446
> 
> 赞同：3
> 
> 时间：2012-12-05T07:41:12.473
> 
> 标签：javascript, jsp

问题是当 rs.getString (1) 是整数时代码正在工作，但在我的情况下它是一个 varchar 主键，如何解决这个问题。

```
function getId(id){
    var f=document.form;
    f.method="post";
    f.action='SelectBank1.jsp?id='+id;
    f.submit();
}

<%
Statement stmt = conn.createStatement();
    ResultSet rs = stmt.executeQuery("select IdwhichIsVarchar, description from  SomeDataBase where IS_VISIBLE = 1 order by description  ");
%>

<%
while(rs.next()){
%>
<tr><td><%=rs.getString(2)%></td>

<td><input type="button" name="edit" value="Edit" style="background-color:green;font-weight:bold;color:white;" onclick="getId(<%=rs.getString(1)%>);" ></td>
</tr>
<%
}
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:42:16.767

您需要用引号将值括起来：

```
onclick="getId('<%=rs.getString(1)%>')" 
```

否则你会得到这样的输出，例如：

```
onclick="getId(foo)" 
```

JavaScript 会尝试将“foo”解析为变量，因此会失败。修复后它将是：

```
onclick="getId('foo')" 
```

并且“foo”将作为字符串传递给函数。

# session - 如何检查用户是否已经登录 LDAP 服务器

> ID：13718451
> 
> 赞同：2
> 
> 时间：2012-12-05T07:41:24.500
> 
> 标签：session, ldap, single-sign-on

假设用户使用域名和密码登录他的个人计算机，然后我想从 ldap 服务器获取当前用户信息（例如会话）。因为我想使用这个会话来登录另一个没有密码的网站。

我不确定我是否清楚地描述了这个问题，我再次总结如下： 1\. 用户使用他的密码和用户名登录 PC 2\. 脚本从 ldap 服务器获取此用户的会话并存储 3\. 当此用户想登录另一个网页，本网站使用session登录（无需密码）

对此有什么想法吗？我仍然不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T07:44:15.783

据我所知，LDAP 在对目录中的人员进行身份验证的级别上没有会话的概念（而不是对 LDAP 服务器的访问进行身份验证）。所以答案是你没有。LDAP 通常只用于存储用户信息。

您需要的是某种单点登录 (SSO) 解决方案。它当然可以使用 LDAP 来存储用户数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:46:40.657

我同意伦纳特的观点。在 LDAP 中，没有确定用户是否已绑定的机制。

可能有一些扩展或控件或 SASL 机制可以提供来自某些 LDAP 服务器供应商实现的信息。-吉姆

# matlab - 关于matlab目录

> ID：13718452
> 
> 赞同：0
> 
> 时间：2012-12-05T07:41:27.920
> 
> 标签：matlab, directory

我的不同数据集存储在同一目录的不同文件夹中。然后我使用 cd 命令获取每组数据的路径。我编写了使用两组图像的函数（Max_get.m）文件。现在我想问的是 Max_get.m 文件是否可以通过**从不同目录**加载这些图像或所有图像（这两组图像）必须在同一个文件夹中来运行？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:43:08.343

如果您提供了图像文件的完整路径，那么即使它们位于不同的文件夹中，它也可以运行

如果您没有指定完整路径，那么这些必须在工作目录中。

# java - 在 Eclipse 应用程序中从 App Inventor 应用程序获取数据

> ID：13718453
> 
> 赞同：1
> 
> 时间：2012-12-05T07:41:29.090
> 
> 标签：java, android, app-inventor

有谁知道如何从 App Inventor 应用程序发送数据并在 Eclipse 制作的应用程序中接收数据。

我需要从 App Inventor 中启动该应用程序（已完成此部分）并将一串数据从 App Inventor 发送到另一个应用程序，然后在另一个应用程序中操作数据。

任何帮助将不胜感激

谢谢帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:44:46.053

所以我终于想通了。

这是我两个应用程序的代码：

App Inventor：在 Activity Starter 设置中，您需要以下内容：

```
ActivityPackage: something.something.Packagename 
ActivityClass: something.something.Packagename.classname
ExtraKey: APP_INVENTOR_START
ExtraValue: Value that you would like to send. 
```

这是您在 Eclipse 应用程序中接收价值的方式：

```
Bundle extras = getIntent().getExtras();
String  ReceivedValue = extras.getString("APP_INVENTOR_START"); 
```

是的。真的就这么简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T21:09:01.773

Patrick 的回答是首选，但如果你真的想做 Einar 提到的事情（即打开一个套接字），你可以让你的基于 Eclipse 的应用程序运行一个小型 HTTP 服务器并使用 App Inventor 的 Web 组件与之通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:12:38.050

如果变量交换是不可能的，你也许可以打开 à socket。如果它们都在同一台机器上运行，则延迟不会太高。

# javascript - 检查浏览器是否支持 HTML5 时间选择器

> ID：13718456
> 
> 赞同：5
> 
> 时间：2012-12-05T07:42:00.823
> 
> 标签：javascript, html, mobile-browser

我在 JavaScript 中构建了一个时间掩码，它适用于 PC、Mac、iPhone 和 iPad，但在大多数 Android 手机中无法始终如一地工作（我不想详细说明为什么此功能无法始终如一地工作）在 Android 中）所以我禁用它。对于三星来说，内置的 HTML5 时间选择器效果很好。

对于 Android 手机，当本机浏览器时间选择器可用时（例如现代三星手机），我想利用 HTML5 时间选择器。

我知道我可以检测浏览器是否支持`date`/`datetime`输入类型，但这并不一定表明浏览器支持时间选择器（对于任何怀疑使用 HTC EVO 3D 进行测试的人，仅作为一个示例。）这个问题( [Detect browser's native date/time pickers](https://stackoverflow.com/questions/13025102/detect-browsers-native-date-time-pickers) ) 表示如果支持时间类型，则浏览器已经实现了时间选择器，但这是错误的。

我知道modernizr，但我没有看到一种方法来实际验证浏览器是否支持时间选择器。

所以有了这些背景信息。有谁知道确定浏览器是否实现了时间选择器的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-20T04:04:41.213

我认为最安全的赌注实际上是假设这`<input type="date">`是不受支持的。截至今天（2016 年初），日期选择器的实际 UI 在浏览器中仍然非常不一致。除非您正在开发一个非常具体的浏览器子集，否则无论如何您都将需要一些 JavaScript。

参考：

*   [http://html5doctor.com/the-woes-of-date-input](http://html5doctor.com/the-woes-of-date-input)
*   [http://caniuse.com/#feat=input-datetime](http://caniuse.com/#feat=input-datetime)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:11:13.070

您最好的选择是假设支持 a 的浏览器`<input type="date">`也为其实现了时间选择器。
（据我所知，是这样的`type="date"`，如果没有合理的方式输入日期，支持有什么意义？）

这是因为无法检查浏览器是否真的显示时间选择器。除了modernizr检查，你真的无能为力。

# android - Android EditText 真实内容高度

> ID：13718457
> 
> 赞同：5
> 
> 时间：2012-12-05T07:42:03.703
> 
> 标签：android, android-layout, android-edittext

我有一个`EditText`. `Android`它的内容很长，并且会滚动到页面中 我怎样才能找到内容的真实高度，而不仅仅是可见区域？

我试过这个，但它只是给出了可见区域的高度：

```
EditText editor=(EditText)findViewById(R.id.ed1);
.
.
.
double H=editor.getHeight(); 
```

不是 H 是 1150，不是 10000 或类似内容的真实高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-30T13:45:12.613

这就是我所做的：

```
EditText tv = ...;
if (Build.VERSION.SDK_INT >= 16) {
    totalHeight = Math.round((tv.getLineCount() * (tv.getLineHeight() + tv.getLineSpacingExtra()) *
                    tv.getLineSpacingMultiplier())) + tv.getCompoundPaddingTop() + tv.getCompoundPaddingBottom();
} else {
    totalHeight = tv.getLineCount() * tv.getLineHeight() + tv.getCompoundPaddingTop() + tv.getCompoundPaddingBottom();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:01:37.640

您可以按照以下步骤执行此操作

计算编辑文本中的行数 从[这里获得帮助](https://stackoverflow.com/questions/4787736/android-development-count-edittext-lines-on-textchanged)

之后计算单行的高度（包括顶部填充）然后简单地乘以该数字以获得editText内文本的实际高度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-16T05:42:14.983

我打电话就够了`EditText.getLayout().getHeight();`

我刚刚调试了一个我也需要这个功能的应用程序：

```
 int contentHeight = view.getTextArea().getLayout().getHeight();
        int visibleAreaHeight = view.getTextArea().getHeight(); 
```

这些值为：

```
contentHeight = 7531
visibleAreaHeight = 1408 
```

# mysql - mysql如何加入这些表？

> ID：13718461
> 
> 赞同：0
> 
> 时间：2012-12-05T07:42:25.397
> 
> 标签：mysql, join

我有几张表：型号、产品、规格、图片和商店。
它们的关联如下：

每个产品属于（型号，商店）
每个图片属于（产品）
每个规格属于（产品）

我需要一份产品清单，

> > 与他们所属的商店（按product.store_id）
> > ，其中product.model_id=some_id
> > 仅当产品有规格时（按spec.product_id）仅当产品有图片时（按picture.product_id）

我需要什么类型的查询？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:48:50.810

您的定义非常完整，可以直译为：

```
select
  -- Selecting all fields of product and store. 
  -- You can refine this by only listing the fields you need.
  p.*,
  s.*
from
  -- need a list of products,
  product p
  -- with the store they belongs to (by product.store_id)
  inner join store s on s.store_id = p.store_id
where
  -- ONLY if there are specs for the product (by spec.product_id)
  exists
    (select
      'x'
    from
      spec ps 
    where
      ps.product_id = p.product_id) and
  -- ONLY if a product has pictures (by picture.product_id)
  exists
    (select
      'x'
    from
      pictures pp 
    where
      pp.product_id = p.product_id) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T07:46:40.883

试试这个：：

```
Select * from 
from 
product p
inner join model m on (p.model_id=m.id)
inner join store s on (p.store_id=s.id)
inner join picture pc on (p.picture_id=pc.id)
inner join spec sp on (p.spec_id=sp_id)

where product.model_id=some_id
GROUP BY product.id 
```

# uitabbarcontroller - 将 IASKAppSettingsViewController 与 UITabBarController 集成

> ID：13718463
> 
> 赞同：0
> 
> 时间：2012-12-05T07:42:30.823
> 
> 标签：uitabbarcontroller, settings.bundle

我无法将 IASKAppSettingsViewController 集成到我的标签栏。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:41:01.887

为此，故事板应如下所示：

[UITabBarController]-->[UINavController]--> *RootControllerSegue* -->[UITableViewController]

将 [UITableViewController] 的类设置为“IASKAppSettingsViewController”

将 [UITableView] 样式设置为“分组”

# c++ - 返回引用是什么意思？

> ID：13718465
> 
> 赞同：9
> 
> 时间：2012-12-05T07:42:40.823
> 
> 标签：c++, parameters, reference, return-type

我了解 C++ 中引用的概念，并且了解它们在函数参数中使用时的作用，但我仍然对它们如何处理返回类型感到非常困惑。

例如，在参数中使用时，此代码：

```
int main (void) {
  int foo = 42;
  doit(foo);
}

void doit (int& value) {
  value = 24;
} 
```

类似于此代码：

```
int main (void) {
  int foo = 42;
  doit(&foo);
}

void doit (int* value) {
  *value = 24;
} 
```

（知道每次在*doit的第一个代码示例中使用 value 时，编译器都会自动在**value*前面加上一个星号，但在后者中，每次尝试使用*value*时都必须自己加上星号）

 **那么当用作参考时，下一个代码（在返回类型中使用参考）转换为什么？它是否返回一个指向 int 的指针？或者它只会返回一个int？

```
int main (void) {
  int* foo = /*insert useful place in memory*/;
  foo = doit(foo);
}

int& doit (int* value) {
  //insert useful code
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-05T07:47:44.587

It means you return by reference, which is, at least in this case, probably not desired. It basically means the returned value is an alias to whatever you returned from the function. Unless it's a persistent object it's illegal.

For example:

```
int& foo () {
    static int x = 0;
    return x;
}

//...
int main()
{
    foo() = 2;
    cout << foo();
} 
```

would be legal and print out `2`, because `foo() = 2` modifies the actual value returned by `foo`.

However:

```
int& doit () {
    int x = 0;
    return x;
} 
```

would be illegal (well, accessing the returned value would), because `x` is destroyed when the method exits, so you'd be left with a dangling reference.

Returning by reference isn't common for free functions, but it is for methods returning members. For example, in the `std`, the `operator []` for common containers return by reference. For example, accessing a vector's elements with `[i]` returns an actual reference to that element, so `v[i] = x` actually changes that element.

Also, I hope that "is essentially equal to this code" means that they're semantically sort of (but not really) similar. Nothing more.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T20:40:43.163

这意味着您返回一个指向对应数据所在的内存地址的指针，而不是数据本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:02:35.230

假设此代码（使其与第一个示例相当）：

```
int main (void) {
  int* foo = /*insert useful place in memory*/;
  *foo = doit(foo);
}

int& doit (int* value) {
  *value = 24;
  return *value;
} 
```

在这种`int&`情况下，作为返回类型并没有真正有用，因为它提供了对内存中变量的访问（您将指针传递给函数）。

> 它是否返回一个指向 int 的指针？或者它只会返回一个int？

不，它返回对 int 的引用。如果你愿意，你可以把它看成一个指针，它不能`nullptr`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:58:10.500

嗯，知道答案的最好方法是尝试一下……

您的代码不会通过类型检查，因为当您接受返回值作为 int 的指针时，doit 将返回对 int 的引用。

你可以看看这个：

```
#include<iostream>
using namespace std;
int& doit (int* value) {
    value[0] = 3;
    return value[4];
}
int main (void) {
  int* foo = new int[10];
  for (int i=0; i<10; i++)
    foo[i] = i;
  int& bar = doit(foo);
  cout<<bar<<endl;
  for (int i=0; i<10; i++)
      cout<<foo[i]<<" ";
  cout<<endl;
  bar = 12;
  for (int i=0; i<10; i++)
      cout<<foo[i]<<" ";
  cout<<endl;
  return 0;
} 
```

变量“bar”将接受返回值，可以用来改变“foo”的内容。正如 Luchian 所提到的，从函数返回引用可能很危险，因为后面的代码可能会修改堆栈中的值。**

# jira - Jira Agile 和几个团队在一个项目中

> ID：13718472
> 
> 赞同：0
> 
> 时间：2012-12-05T07:43:45.877
> 
> 标签：jira, jira-agile

我有一个项目，有 4 个团队处理一个相当大的基于 Web 的系统的不同部分。在 Jira 和 Jira Agile 中处理此问题的最佳方法是什么？

每个团队一个项目和一个董事会，还是在 Jira Agile 中有另一种组织方式？

阅读有关使用组件的信息，但由于我对 Jira Agile 还很陌生，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:31:25.867

如果多个团队在同一系统的不同部分工作，我建议您只创建一个项目。根据我的经验，您很有可能希望将“项目”从一个团队移动到另一个团队，或者链接两个相关但不由同一团队处理的项目。

就像之前提到的帖子一样，GreenHopper 只是一个（敏捷的）插件，可以帮助您管理 JIRA 中的项目，允许以不同的方式显示和管理它们。如果您遵循像 Scrum 这样的开发过程，这些插件特别有用。

使用该工具的最新版本，我能够轻松地在多个团队之间共享单个“待办事项”工作，然后在需要处理时将项目“分配”给特定团队。例如，在计划下一个 Sprint 时。

当然，清楚地了解您的流程是关键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:16:16.740

我认为您对一些事情感到困惑，这对于该工具的新手来说是可以理解的。

Jira 是您正在使用的软件，Greenhopper 是一家为其生产插件的外部公司，主要是敏捷插件。组件位于 Jira 中，它们只是您对问题进行分类的一种方式。我建议您在 jira 上找到一个教程视频，以更好地向您介绍该工具。

现在，再一次，**这些只是工具**。他们没有规定你应该如何工作。Jira 以这种方式非常灵活，因此您可以在其中执行敏捷、Scrum、看板或任何您想要的方法。

您需要首先决定您将采用哪种方法/流程。基本上，你们将如何工作？

所有团队都在冲刺中工作吗？他们有相同的截止日期吗？故事问题是整体的一部分，还是每个团队都可以自己提供完整的功能？

例如，如果一个团队是基础设施，一个是 UI，一个是 DB，他们的部分很可能会组合在一起形成一个“整体”功能，即完整且经过测试。另一个例子是如果团队 A 正在做一个报告模块，而团队 B 正在做一个登录模块，它们的功能通常不相关，它们可以单独工作。

所以基本上，你不能要求这里的任何人给你直接的答案。停止专注于工具并了解您将如何工作以及什么对您有意义。

请记住：敏捷是反复试验。尝试一些东西，如果它不起作用，请适应。

# build - 如何在 Jenkins 中执行远程构建

> ID：13718476
> 
> 赞同：3
> 
> 时间：2012-12-05T07:44:17.413
> 
> 标签：build, jenkins, remote-server

我是詹金斯的新手。请帮我解决我的要求。

我在 Windows 环境中运行 Jenkins。我有一个 Jenkins 成功运行的开发箱。现在，我必须从开发盒中构建另一台 Windows 机器（比如 QA 盒）。谁能建议我如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:28:51.630

解决方法很简单。

**第 1 步**：使用 Jenkins 创建和配置从节点（QA BOX）。

*   转到管理詹金斯
*   点击管理节点
*   新节点配置

**第 2 步**：可能有几种方法可以完成此任务。 **根据新机器（IP、端口或任何其他依赖项）配置作业。**一个好的做法是为机器保留构建脚本或为不同的机器保留单独的属性文件。

*   Configuer Jobs 根据新的从属配置。

*   请记住对文件结构、IP 和端口的任何依赖。

**第 3 步**：运行作业并调试有关机器的任何依赖项。

*   如果遇到任何麻烦。浏览日志并找到相关问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:12:07.103

1.  为您的 QA BOX 创建一个测试节点
2.  将作业配置为：
    *   更新最新代码到远程测试节点，例如SVN
    *   为远程测试节点构建配置构建设置，例如使用 ANT
3.  完毕

# xaml - Access Denied when deleting image file previously used in DataTemplate in WinRT

> ID：13718478
> 
> 赞同：6
> 
> 时间：2012-12-05T07:44:28.123
> 
> 标签：xaml, windows-runtime, datatemplate, winrt-xaml, storagefile

I have image (PNG) files used by my GridView as part of its DataTemplate. If I try to delete a specific object row in my GridView, I would delete the related image file for that row as well. The images are different for every item on the list.

I'm using this code to delete the image file

```
StorageFile _file = await DataStore.GetFileAsync(filename);
await _file.DeleteAsync(StorageDeleteOption.Default); 
```

The image file is rendered on the GridView under the GridView's DataTemplate. So in each object model in my List, I have a public property there that returns an ImageSource for my DataTemplate.

I'm calling my delete procedure right after i deleted the object row from the List and after the GridView has been refreshed of the new List items.

Even though the List does not contain the object (consuming the image) anymore, the app throws the Access is Denied exception if i try to delete the file. While the app is running, if i try to delete that particular file manually (through file explorer), it won't allow me too.

I tried clearing all unused objects in my app, even setting the GridView's ItemSource to null and the List to null before I delete the image. Still the exception persist.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:57:48.387

您可以尝试的一种方法是将图像加载到内存流中，然后`BitmapImage`从该流创建一个对象，然后您可以将`Image`控件的源设置为该位图图像。

由于您没有使用实际的图像文件作为图像的来源，因此您可以随时轻松删除它:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-01T15:49:30.743

马克已经提到了其中的一部分，但没有必要让它那么复杂。简单地说，无论您希望在系统保留位图时需要删除位图的任何位置，都可以使用如下转换器：

```
public class SafeImageFileConverter : IValueConverter {
  public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
    string path = (string)value;
    var stream = new MemoryStream(File.ReadAllBytes(path));
    return ImageSource.FromStream(() => stream);
  }
} 
```

在实践中，您可能想要检查路径是否存在，`error.png`如果不存在则返回或类似。此外，不要试图`using`与流一起使用，系统将需要流，因此您不应该提前处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-01T18:23:45.907

虽然这是一个老问题，但我最近在 UWP 应用程序中遇到了这个问题，并且实际上设法找到了解决方案。但首先是有关该问题的一些背景信息：

当您使用 URI 创建 BitmapImage 时，创建的 URI 对象包含对本地存储中文件的引用并保持打开状态，即不可写。顺便说一句，仅当位图足够大以完全适合图像时才适用，通常是小型或中型位图。如果位图恰好足够大，WinRT 会在图像中显示时自动使用下采样版本。在这种情况下，URI 不包含对原始文件的引用。

**现在到实际的解决方案：**

将 Image.Source 设置为 null 在这里不起作用，因为 URI 仍然存在（至少直到下一个 GC 周期）。对我有用的是，将 Source 转换为原来的 BitmapImage 并将 UriSource 设置为 null。

```
var bitmapImage = image.Source as BitmapImage;
if (bitmapImage != null)
  bitmapImage.UriSource = null; 
```

是的，这很愚蠢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T19:50:26.747

诀窍是使用 Uri 对象来加载图像（而不是字符串文件名），然后使用完全相同的 Uri 实例来删除文件（当然是在从 UI 中删除图像之后）。这是一个例子：

```
//Save the Uri as a member variable so you can get to it later
private Uri uri;

//Create the Uri
uri = new Uri(OriginalImageFilename, UriKind.Absolute);

//Load the image
BitmapImage bitmapImage = new BitmapImage(uri);
//This can also be done by binding a Image control's source property to the uri.

//Delete the image (remember to use the same Uri instance)
StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(uri);
await file.DeleteAsync(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T05:45:18.887

作为一种解决方法，我只是在应用程序启动期间删除了未使用的图像，以便没有进程正在使用它。谢谢。

# jquery - 单击按钮时获取表单中不同类的属性

> ID：13718479
> 
> 赞同：1
> 
> 时间：2012-12-05T07:44:40.527
> 
> 标签：jquery

当我单击删除按钮时，如何在 jquery 中获取 art-no 的值？

```
<form id="artForm" method="post">
<input type="hidden" name="sequence" value="27" art-no="27">
<input type="button" value="Delete" class="delete" id="submitbutton">
</form> 
```

在像这样使用 jQuery 时：

```
$(".delete").click(function() {
alert (".sequence").attr("art-no");
return false;
}); 
```

这实际上应该有效，但我不断在警报框中收到 .sequence 。是因为隐藏了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:49:29.877

首先，这是有效的解决方案：

```
$(".delete").click(function() {
    alert ($("[name='sequence']").attr("art-no"));
    return false;
}); 
```

我有一些建议；

*   那个隐藏字段没有类名，所以你不能`.sequence`用于选择器，你必须使用`[name='sequence']`或者你可以给它`sequence`类并使用它`.sequence`
*   `data`您可以使用属性和，而不是组成自己的属性[`.data()`](http://api.jquery.com/jQuery.data/)，像使用它`data-art-no="27"`并像访问它一样`.data('art-no')`
*   最后，使用[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)insted of `return false`。

这是您修改后的代码：

```
$(".delete").click(function(e) {
    e.preventDefault();
    alert ($("[name='sequence']").data("art-no"));
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T07:46:34.837

添加`class="sequence"`您的输入，现在只有一个名称，然后替换

```
alert (".sequence").attr("art-no"); 
```

和

```
alert ($(".sequence").attr("art-no")); 
```

或更好

```
alert ($(this).prev(".sequence").attr("art-no")); 
```

如果您多次使用该类，以确保您拥有正确的元素`sequence`（这通常是使用类而不是 id 的原因）。

如果您不想添加类或 id，则选择器将是`input[name=sequence]`：

```
alert ($("input[name=sequence]").attr("art-no")); 
```

# c# - How can I print the string to center of a receipt

> ID：13718484
> 
> 赞同：0
> 
> 时间：2012-12-05T07:45:41.197
> 
> 标签：c#, vb.net

I am using Pos for .net.

Below is a vb code, how can I convert to c# to print receipt:

```
 Public Const ESC = Chr(&H1B) & "|"
        Public Const SetBold = ESC & "bC"
        Public Const SetUnderline = ESC & "uC"
        Public Const SetItalic = ESC & "iC"
        Public Const SetCentre = ESC & "cA"
        Public Const SetRight = ESC & "rA"
        Public Const ResetFormatting = ESC & "N"

 Dim msg As String = "This is a test" & vbCrLf & SetBold & SetSize(3) & SetCentre & "it works" & SetSize(1) & " pretty well" & vbCrLf & "OK" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:50:23.223

替换`vbCrLf`为`"\r\n"`

```
Public Const ESC = Chr(&H1B) + "|" ;
        Public Const SetBold = ESC+ "bC";
        Public Const SetUnderline = ESC + "uC";
        Public Const SetItalic = ESC +"iC" ;
        Public Const SetCentre = ESC + "cA" ;
        Public Const SetRight = ESC + "rA" ;
        Public Const ResetFormatting = ESC + "N" ;

 String msg = "This is a test" + "\r\n"+ SetBold + SetSize(3)+ SetCentre + "it works" +SetSize(1) + " pretty well" + "\r\n" + "OK" ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:42:13.510

一般来说，如果您需要将 VB 翻译成 C#，请使用更自动化的东西：例如[http://www.developerfusion.com/tools/convert/vb-to-csharp/ 。](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

# scala - Initializing traits within a trait in scala

> ID：13718486
> 
> 赞同：3
> 
> 时间：2012-12-05T07:46:25.647
> 
> 标签：scala, composition, traits

In [Scala in Depth](http://www.manning.com/suereth/) there is this example:

```
trait Logger {
  def log(category: String, msg: String) : Unit = {
       println(msg)
  }
}

trait DataAccess {
  def query[A](in: String) : A = {
     ...
  }
}

trait LoggedDataAccess {
  val logger = new Logger
  val dao = new DataAccess

  def query[A](in: String) : A = {
     logger.log("QUERY", in)

     dao.query(in)
  }
} 
```

I am a little confused by the initialization of Logger and DataAccess in the trait LoggedDataAccess. In the REPL, when I type out this code, I get the following exception:

```
 error: trait Logger is abstract; cannot be instantiated
       val logger = new Logger 
```

Can a trait actually be initialized like that?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T08:03:11.213

Trait 不能被实例化，但是你可以创建一个 trait 匿名实现的实例：

```
scala> trait Test
defined trait Test

scala> new Test
<console>:9: error: trait Test is abstract; cannot be instantiated
              new Test
              ^

scala> new Test{}
res0: Test = $anon$1@7fafd333

scala> new Object with Test
res1: Test = $anon$1@4fe11d82 
```

`new Test{}`和`new Object with Test`意思一样。他们创建新的匿名类并立即实例化它。

# github - Sourcetree and github

> ID：13718492
> 
> 赞同：7
> 
> 时间：2012-12-05T07:46:36.770
> 
> 标签：github, atlassian-sourcetree

When I push commits to github repo from windows github client, I can see my github username and link to my profile in history, like this:

> initial commit [[username](https://github.com/username)]

But when I push changes from SourceTree, in commits history it looks like:

> initial commit [mac_username]

I want my history on github.com looks like the first example (with github username and link to the profile) What settings I should enable in SourceTree to get it?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T07:52:36.043

检查这些 repos 中的配置：

```
git config user.name
git config user.email 
```

确保 Mac 上的 repo 与 Windows 上的设置相同。

[该线程](https://answers.atlassian.com/questions/49996/how-to-change-username)详细说明了如何更改 SourceTree 中的这些设置，但请检查是否设置了“允许 SourceTree 修改您的全局 Git 配置文件”：这意味着它将适用于您的*所有*本地 git 存储库（Github 与否）。

![设置](../Images/726071135e18888ddc706c0fb1d63870.png)

“全名”有点误导，因为您应该使用您的 GitHub 登录名（和 GitHub 帐户电子邮件），以便在 GitHub 上生成正确的提交作者历史记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:57:14.070

转到首选项并在常规选项卡上，您可以看到两个文本字段，一个用于全名，另一个用于电子邮件，设置您想要显示的名称

# c# - Content.Load does not exist in current context

> ID：13718496
> 
> 赞同：2
> 
> 时间：2012-12-05T07:46:54.240
> 
> 标签：c#, xna

I'm going through this tutorial on SoundEffect: [http://msdn.microsoft.com/en-us/library/bb195053.aspx](http://msdn.microsoft.com/en-us/library/bb195053.aspx) However, I'm getting the error from the compiler that "Content" doesn't exist in the current context.

Here's the code:

```
using Microsoft.Xna.Framework.Audio; 
using Microsfot.Xna.Framework.Content;

namespace SoundTouchTest 
{
     class SoundTouchTest
     {
            public void loadContent()
            {
                  SoundEffect s; 
                  s = Content.Load<SoundEffect>("example"); 
            }
     }
} 
```

I've successfully added the references (or at least I think that I have).Any ideas why this is happening? Thanks!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T15:01:11.803

`Content` **是一个属性**，通常引用类中的类型[`ContentManager`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.content.contentmanager.aspx)实例[`Game`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.game.aspx)。由于您的`SoundTouchTest`课程不是 a `Game`，因此它**没有该属性**。

您应该**将`ContentManager`实例作为参数**传递给您的`loadContent()`方法：

```
void loadContent(ContentManager content)
{
    SoundEffect e = content.Load<SoundEffect>("example");
} 
```

在你`Game`班里的某个地方：

```
SoundTouchTest soundTouchTest = new SoundTouchTest();
soundTouchTest.loadContent(this.Content); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T12:49:54.870

您可以`ContentManager`通过 loadContent 作为参数传入，然后在 game1 中找到的 load 方法中调用 loadContent ，或者您可以创建它的新实例（我不建议这样做，您不想每次都创建一个新对象当已经为您创建了对象时需要加载一些东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:20:58.357

而不是 Content.Load 它应该真的是 ContentManager.Load

[http://msdn.microsoft.com/en-us/library/bb197848.aspx](http://msdn.microsoft.com/en-us/library/bb197848.aspx)

您可能需要创建一个 Content Manager 实例才能使用它

# android - emulator command doesn't work in crontab (start GUI in contab)

> ID：13718497
> 
> 赞同：1
> 
> 时间：2012-12-05T07:46:56.287
> 
> 标签：android, user-interface, automation, emulation, crontab

I've wrote a script test.sh for android automation testing, here require start emulator each time

```
PATH="$PATH:/home/xxx/tool/jdk1.6.0_34/bin:/home/xxx/tool/android-sdk-linux/tools:"
emulator -avd avd22 
```

I put test.sh in crontab, but looks emulator can't come up in crontab, but manually I execute test.sh, all things work fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:50:26.337

通过在模拟器命令之前添加以下命令来修复它

```
export DISPLAY=:0 && emulator -avd avd22 
```

# javascript - AngularJS ng-repeat and filter

> ID：13718499
> 
> 赞同：1
> 
> 时间：2012-12-05T07:47:09.500
> 
> 标签：javascript, angularjs

I'm using `scope.$first` and `scope.$index` to apply accordion to my content when `ng-repeat` finishes populating it. At first I was using just `scope.$last` but faced this problem - when try to search for some info (using filter) and then turn back to the whole list, accordion doesn't apply.

How to apply accordion when `ng-repeat` finishes and save it further while filtering?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:43:16.790

我建议将“应用手风琴”功能包装到指令中。为 ng-repeat 定义一个模板，然后 $watch() 模型数据进行更改。当 $watch 触发时，应用手风琴的东西。

另请参阅[https://groups.google.com/d/topic/angular/lACrEA-TIto/discussion](https://groups.google.com/d/topic/angular/lACrEA-TIto/discussion)
和 [http://angular-ui.github.com/bootstrap/](http://angular-ui.github.com/bootstrap/)

# php - Using Xpath with PHP to parse HTML

> ID：13718500
> 
> 赞同：15
> 
> 时间：2012-12-05T07:47:08.597
> 
> 标签：php, xpath

I'm currently trying to parse some data from a forum. Here is the code:

```
$xml = simplexml_load_file('https://forums.eveonline.com');

$names = $xml->xpath("html/body/div/div/form/div/div/div/div/div[*]/div/div/table//tr/td[@class='topicViews']");
foreach($names as $name) 
{
    echo $name . "<br/>";
} 
```

Anyway, the problem is that I'm using google xpath extension to help me get the path, and I'm guessing that google is changing the html enough to make it not come up when i use my website to do this search. Is there some type of way I can make the host look at the site through google chrome so that it gets the right code? What would you suggest?

Thanks!

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-05T08:06:51.333

我的建议是始终使用[DOMDocument](http://www.php.net/dom)而不是 SimpleXML，因为它是一个更好的界面，并且使任务更加直观。

下面的示例展示了如何将 HTML 加载到 DOMDocument 对象中并使用 XPath 查询 DOM。您真正需要做的就是找到所有类名为*topicViews的***td**元素，这将输出在此 XPath 查询返回的*DOMNodeList中找到的每个***nodeValue**成员。

 ****```
/* Use internal libxml errors -- turn on in production, off for debugging */
libxml_use_internal_errors(true);
/* Createa a new DomDocument object */
$dom = new DomDocument;
/* Load the HTML */
$dom->loadHTMLFile("https://forums.eveonline.com");
/* Create a new XPath object */
$xpath = new DomXPath($dom);
/* Query all <td> nodes containing specified class name */
$nodes = $xpath->query("//td[@class='topicViews']");
/* Set HTTP response header to plain text for debugging output */
header("Content-type: text/plain");
/* Traverse the DOMNodeList object to output each DomNode's nodeValue */
foreach ($nodes as $i => $node) {
    echo "Node($i): ", $node->nodeValue, "\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T07:57:29.770

双 '/' 将进行 xpath 搜索。因此，如果您使用 xpath '//table'，您将获得所有表格。您还可以在您的 xpath 结构中更深入地使用它，例如 'html/body/div/div/form//table' 来获取 xpath 'html/body/div/div/form' 下的所有表。

这样，您可以使您的代码对 html 源代码中的更改更具弹性。

如果您想使用 xpath，我确实建议您学习一些有关 xpath 的知识。复制粘贴只能让你到目前为止。

关于语法的简单解释可以在 w3schools.com/xml/xpath_syntax.asp 找到****

# php - popen and poclose under zend-server

> ID：13718506
> 
> 赞同：5
> 
> 时间：2012-12-05T07:47:32.617
> 
> 标签：php, zend-server

I've stumbled upon a phenomenon that I can't explain myself.

I'm using popen to execute php and then execute a php script that way, and pclose to close that. So far so fine. I ran into quite some severe troubles as the script where I used this didn't execute and instead after trying it 3 times in a row I crashed the zend-server (no page would open any more). I found out that the reason to this was that I used a wrong directory for the php.exe. Example:

```
if (pclose(popen("C:\wrongDir\php\php.exe C:\Zend\Apache2\htdocs\myApp\public\mytest.php 57 > C:\Logs\1\0\jobOut.log 2> C:\Logs\1\0\jobErr.log"))>-1)
{
.....
} 
```

Aside from the "wrongDir" all other dirs were correct....the popen even created the jobOut and jobErr files (which were empty). (remark: PHP is not in a searchpath that is why it wasn't found without the correct path)

Even though I now solved the problem....**I have the question if this is a normal behaviour there, or if I have done something wrong (maybe even server settings).** *As from what I read in the manual about both commands it sounded to me that in the my case I should have had a return value of either -1 or 0 and not the problem I ran into with the process and then the server hanging).*

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:17:52.660

似乎 pclose() 不会返回进程的退出状态，而是返回关闭进程的能力。

要获取进程终止“代码”，请使用 pcntl_wifexited() 和 pcntl_wexitstatus()

[http://php.net/manual/en/function.pclose.php](http://php.net/manual/en/function.pclose.php)
[http://php.net/manual/en/function.pcntl-wexitstatus.php](http://php.net/manual/en/function.pcntl-wexitstatus.php)

# objective-c - 在嵌套的 NSDictionary 中查找最小值和最大值

> ID：13718508
> 
> 赞同：2
> 
> 时间：2012-12-05T07:47:35.180
> 
> 标签：objective-c, sorting, nsdictionary

我有一个 Person NSDictionary，它的键是人的姓名，对象是一个 NSDictionary，它有两个键：他的昵称 (NSString) 和他的年龄 (NSNumber)。

我想得到按年龄升序排序的 Person 字典，这样我就可以得到最年轻和最年长的人的名字。最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T07:57:40.703

NSDictionary 中定义了一些方便的方法来按值对项目进行排序并取回排序后的键。

见文档，

```
keysSortedByValueUsingComparator:
keysSortedByValueUsingSelector:
keysSortedByValueWithOptions:usingComparator: 
```

我猜你正在使用现代的 Objective-C 语法，而年龄实际上是用数字表示的。这是它的外观：

```
[people keysSortedByValueUsingComparator:(NSDictionary *firstPerson, NSDictionary *secondPerson) {
    return [firstPerson[@"age"] compare:secondPerson[@"age"]];
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T07:49:59.660

一些语言提供排序字典，但标准`NSDictionary`本质上是未排序的。您可以获取所有键，对键数组进行排序，然后根据排序后的键遍历字典。（`NSDictionary`有几种我不知道的用例的便捷方法，请参阅 Anurag 的回答。）

您的情况有点复杂，解决它的一种方法是引入一个临时字典，将年龄映射到名称。但是，如果您只是在最小和最大年龄之后，只需遍历所有人并跟踪最大和最小年龄和姓名：

```
NSString *oldestName = nil;
float maxAge = -1;
for (NSString *name in [persons allKeys]) {
    NSDictionary *info = persons[name];
    float age = [info[@"age"] floatValue];
    if (age > maxAge) {
        oldestName = info[@"nick"];
        maxAge = age;
    }
} 
```

如果我们回到对字典排序的想法，这可能会奏效：

```
NSArray *peopleByAge = [people keysSortedByValueUsingComparator:^(id a, id b) {
    // Again, see Anurag’s answer for a more concise
    // solution using the compare: method on NSNumbers.
    float ageA = [a objectForKey:@"age"];
    float ageB = [b objectForKey:@"age"];
    return (ageA > ageB) ? NSOrderedDescending
        : (ageB > ageA) ? NSOrderedAscending
        : NSOrderedSame;
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:58:10.223

正如@Zoul 所说，标准的 NSDictionary 是未排序的。

要对其进行排序，您可以使用数组，我会这样做

```
//the dictionary is called dict : in my case it is loaded from a plist file
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfFile:plistPath];

//make a dicoArray that is sorted so the results are sorted
NSArray *dicoArray = [[dict allKeys] sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
}]; 
```

检查所有排序选项的帮助。在本例中，字典使用被视为数值的键进行排序（对我来说就是这种情况）。

如果您需要以另一种方式排序，则排序可能性列表是

```
enum {
   NSCaseInsensitiveSearch = 1,
   NSLiteralSearch = 2,
   NSBackwardsSearch = 4,
   NSAnchoredSearch = 8,
   NSNumericSearch = 64,
   NSDiacriticInsensitiveSearch = 128,
   NSWidthInsensitiveSearch = 256,
   NSForcedOrderingSearch = 512,
   NSRegularExpressionSearch = 1024
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-27T06:25:51.943

在**iOS 9.2中**

// NSNumbers 字典

```
NSDictionary * phoneNumbersDict = @{@"400-234-090":67,@"701-080-080":150}; 
```

> // 升序

```
 NSArray * keysArraySortedByValue = [phoneNumbersDict keysSortedByValueUsingComparator:^NSComparisonResult(id  _Nonnull obj1, id  _Nonnull obj2) {
            return [obj1 compare:obj2];
        }]; 
```

> // 降序排列

```
NSArray * keysArraySortedByValue = [phoneNumbersDict keysSortedByValueUsingComparator:^NSComparisonResult(id  _Nonnull obj1, id  _Nonnull obj2) {
                return [obj2 compare:obj1];
            }]; 
```

这是 NSComparisonResults 的枚举。

```
enum {
   NSOrderedAscending = -1,
   NSOrderedSame,
   NSOrderedDescending
};
typedef NSInteger NSComparisonResult; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T07:58:14.137

查看[NSDictionary 的方法](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)，该方法返回按选择器排序的键。这样的方法不止一种。你得到一组排序的键，然后访问第一个和最后一个，并拥有你最小和最年长的人。

# linux-device-driver - memory sharing -- between sytem call & interupt handler

> ID：13718513
> 
> 赞同：0
> 
> 时间：2012-12-05T07:47:55.647
> 
> 标签：linux-device-driver, embedded-linux

I read following link [Linux Device Driver Program, where the program starts?](https://stackoverflow.com/questions/12917198/linux-device-driver-program-where-the-program-starts/12923107#12923107)

as per this all system calls operate independent to each other.

1> Then how to share common memory between different system call & interrupt handler. but there should be some way to allocate memory ... so that they have common access to a block of memory.

2> Also which pointer to allocate the memory? so that it is accessiable by all ?

Is there some example which uses driver private data ?

# sql-server - 将权限概念引入数据库

> ID：13718514
> 
> 赞同：3
> 
> 时间：2012-12-05T07:48:04.710
> 
> 标签：sql-server, tsql, c#-4.0

我有一个 ASP.net (.net 4, c#) Web 应用程序（后端：SQL Server 2012）。权限概念（每个用户允许查看哪些数据）在 Web 应用程序中处理。

权限来自不同的来源：

**-AD 组成员身份**：

*   AD 组名称链接到记录的属性

**-基础数据库**：

- 用户被分配到不同的标准

*   组织架构

*   位置结构

*   直接赋值

目前，所有这些都在 Web 应用程序中处理。所以我收集了所有用户的权限，然后我在数据库中查询允许他查看的数据。

现在我需要将权限概念带到数据库级别。目标是用户几乎可以直接查询数据库（预定义视图）（Reporting Services、Excel 等）

知道如何解决这样的问题吗？

考虑加入用户对外键的权限。但这对于 AD 权限是不可能的。或者也许创建一个 dll 并从存储过程中调用这个 dll。然后视图加入存储过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T07:55:54.993

您应该查看在数据库 [http://msdn.microsoft.com/en-us/library/ms188659.aspx](http://msdn.microsoft.com/en-us/library/ms188659.aspx)中定义角色。然后根据您的要求授予对不同表或视图的权限。我已经看到数据是专门从视图中读取的。因此，这也可能是一种选择。

编辑：

因此，看起来您需要行级安全性。请阅读 Microsoft 提供的本指南。

[http://technet.microsoft.com/en-us/library/cc966395.aspx](http://technet.microsoft.com/en-us/library/cc966395.aspx)

# .net - Exception handling SqlException

> ID：13718522
> 
> 赞同：0
> 
> 时间：2012-12-05T07:48:38.077
> 
> 标签：.net, sql, exception-handling

I am generating a `SqlException` in two procedures.

Both the procedures are called within the same `try catch` block depending upon a condition (either is called at a time).

For one procedure both the errors are being caught in the correct catch. For the second procedure call.. it says `SqlException unhandled by usercode`.

```
 protected void btnAdd_Click(object sender, ImageClickEventArgs e)
    {
        try
        {
            ALN_VM_Cust ObjCust = new ALN_VM_Cust();
            IManageVM objImanageVM = new ALN_VM_Rep();
            ALN_VM_BOL ObjBOL = new ALN_VM_BOL(objImanageVM);

            ObjCust.VMName = txtVMName.Text;
            if(txtDescription.Value=="")
                Response.Write("<script langauge=\"javascript\">alert(\"Please enter the description for configuration\");</script>");
            ObjCust.VMDescription = Server.HtmlEncode(txtDescription.Value);
            ObjCust.CreatedBy = Session["UserAccentureID"].ToString();
            ObjCust.VMConfig = Convert.ToInt32(ddlVMConfig.SelectedValue);
            ObjCust.VMCost =Convert.ToDouble( txtCost.Text);
            ObjCust.Comment = Server.HtmlEncode(txtComment.Value);

            if (ViewState["Mode"].ToString() == "Edit")
            {
                ObjCust.ModifiedBy = Session["UserAccentureID"].ToString();
                ObjCust.VMId = Convert.ToInt32(ViewState["VMID"].ToString());
                ObjCust.CommandType = "U";

                    string strResult = ObjBOL.UpdateVMDetails(ObjCust);
                    if (strResult == "Success")
                    {
                        ALNMessageHandler.LogEvent("VM details updated successfully", true, "VM updated");
                        BindGrid();
                        ClearFields();
                    }
                }
            }
            else
            {
                string Result = ObjBOL.InsertVMDetails(ObjCust);
                if (Result == "Success")
                {
                    ALNMessageHandler.LogEvent("VM details saved successfully", true, "VM created");
                    ClearFields();
                    ViewState["Mode"] = "Add";
                    BindGrid();
                }
            }
        }
        catch (Exception ex)
        {
            if (ex.Message.ToString().ToUpper() == "VM NAME ALREADY EXIST.")
            {
                AlnErrorHandler.DisplayError(ex.Message);
            }

            if (ex.Message.ToString() == "Total VM cost exceeds 3000$.")
            {
                AlnErrorHandler.DisplayError(ex.Message);
            }

            //if (ex.Message.ToString().Contains("VM cannot be currently deleted") == true)
            if (ex.Message.ToString() == "VM cannot be currently deleted") 
            {
                AlnErrorHandler.DisplayError(ex.Message);
            }
        }
    } 
```

The procedure call in another project's call..

```
 public string UpdateVMDetails(ALN_VM_Cust objCust)
    {
        try
        {
            SqlParameter[] storedParams = new SqlParameter[7];
            storedParams[0] = new SqlParameter("@VMId", SqlDbType.VarChar);
            storedParams[0].Value = objCust.VMId;

            storedParams[1] = new SqlParameter("@VMName", SqlDbType.VarChar);
            storedParams[1].Value = objCust.VMName;

            storedParams[2] = new SqlParameter("@ModifiedBy", SqlDbType.VarChar);
            storedParams[2].Value = objCust.ModifiedBy;

            storedParams[3] = new SqlParameter("@VMDescription", SqlDbType.VarChar);
            storedParams[3].Value = objCust.VMDescription;

            storedParams[4] = new SqlParameter("@CommandType", SqlDbType.VarChar);
            storedParams[4].Value = objCust.CommandType;

            storedParams[5] = new SqlParameter("@VMCost", SqlDbType.Float);
            storedParams[5].Value = objCust.VMCost;

            storedParams[6] = new SqlParameter("@Comment", SqlDbType.VarChar);
            storedParams[6].Value = objCust.Comment;

            DataSet ds = SqlHelper.ExecuteDataset(ALNConnection, CommandType.StoredProcedure, "VM_UpdateVMDetails", storedParams);

            return "Success";
        }
        catch (SqlException exSQL)
        {
            throw exSQL;
        }
        catch (Exception exError)
        {
            throw exError;
        }
    } 
```

It goes in last catch in the above quoted function of other class

Where am I going wrong?

# mysql - Start mysql and apache from cmd

> ID：13718523
> 
> 赞同：0
> 
> 时间：2012-12-05T07:48:46.007
> 
> 标签：mysql, apache, batch-file, cmd, xampp

I installed xampp and now I want start apache and mysql from command line and also I won't install services. I use some command and it's worked but after start mysql (for example) cmd is open, I want close but after close cmd mysql stopped.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:03:54.547

你不能。要么从命令行运行它，必须保持外壳打开，要么将它作为服务运行，之后你可以关闭 cmd（如果你使用过 cmd 的话）。

我会选择后者，我不明白你为什么不将它安装为服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-04T22:00:47.433

如果您使用 XAMPP，您可以通过以下方式启动服务器：

> `sudo /opt/lampp/lampp start`

否则，您可以使用以下服务器启动服务器：

> `sudo service apache2 start && sudo service mysql start`

# c++ - How to make an array with polymorphism in C++?

> ID：13718527
> 
> 赞同：7
> 
> 时间：2012-12-05T07:49:12.840
> 
> 标签：c++, arrays, inheritance, polymorphism, virtual

```
class Base1
{
    private:
     int testInput; 
    public:
       Base1();
       virtual int GetRow(void) = 0;
 };

 Base1::Base1()
 {
   testInput = 0;
 }

class table : public Base1
{
   private:
    int row;    
   public:  
     table();
     virtual int GetRow(void);
};

table::table()
{   
  //Contructor
  row = 5;
}

int table::GetRow()
{
  return row;
}

int main ()
{
  Base1* pBase = new table[3];
  pBase[0].GetRow();
  pBase[1].GetRow();   //when i get to  this line, the compiler keep saying access
                           // violation.
  pBase[2].GetRow();

  return 0;
} 
```

I'm trying to create an array of 3 table class. The requirement is I have to use Base object to do that.

```
Base1 * pBase = new table[3]; 
```

look fine to me. But when I tried to access each table, the compiler said it's access violation. I don't know what wrong with this code. I'm using Visual Studio 2010 though.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-05T07:52:24.933

**在 C++ 中，多态性和数组不会混合使用。**

由于通常派生类的大小与基类的大小不同，因此多态性和指针算术不能很好地结合使用。由于数组访问涉及指针运算，因此诸如此类的表达式`pBase[1]` 无法按预期工作。

*一种可能性是拥有一个指向对象的指针*数组，甚至可能是智能指针来简化内存管理。但是不要忘记在`Base1`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T07:57:33.403

您收到错误是因为该数组是静态类型为`Base1`. 这意味着这一行：

```
pBase[1].GetRow(); 
```

`Base1`以字节为单位添加大小并将其`pBase`解释为另一个`Base1`对象的开头，但这实际上指向第一个`table`实例中间的某个地方。

如果你需要一个多态实例数组，你必须`std::vector`通过指针（或者最好是某种形式的智能指针）将它们存储在数组中（或者最好是在 a 中）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T08:07:53.407

阿格纽的反应很到位。让我再解释一下。通过扩充您的代码，我打印出一个`Base1`和一个`table`对象的大小以及三个`table`对象的地址，因为它们是由`new`操作员创建的：

```
A Base1 object is 8 bytes
A table object is 12 bytes
A table object is being constructed at 0x002977C0
A table object is being constructed at 0x002977CC
A table object is being constructed at 0x002977D8 
```

如您所见，这些对象在内存中彼此间隔 12 个字节。

现在，让我们打印出 pBase[0]、pBase[1] 和 pBase[2] 给出的地址：

```
pBase[0] is at 0x002977C0
pBase[1] is at 0x002977C8
pBase[2] is at 0x002977D0 
```

现在看看会发生什么：我们返回的指针相隔 8 个字节。这是因为指针运算是在一个指针上完成的，它的类型是`Base1`并且因为`Base1`是 8 字节长，编译器所做的就是翻译`pBase[n]`成`pBase + (n * sizeof(Base1))`.

现在您应该能够准确理解*第一个* `GetRow()`工作的原因以及第二个崩溃的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T07:56:18.130

您需要创建（使用`new`）所有这些数组元素，这样做：

```
for(int i = 0; i < 3; ++i)
    pBase[i] = new table(); 
```

# android - 在android中绘制imageview图像？

> ID：13718538
> 
> 赞同：0
> 
> 时间：2012-12-05T07:50:14.637
> 
> 标签：android, image

各位程序员，

我是 android 新手，我正在尝试基于将图像的 x 和 y 轴作为输入来绘制图像。因此，对应于坐标的像素值被我提到的颜色填充。现在说红色。

用户故事：通过图像视图渲染图像并单击按钮我需要传递表示图像像素的图像坐标值并用红色填充它。继续这样做看起来就像在我使用图像视图渲染的图像上绘图。

这个用户故事可以在Android中完成吗？如果那么请帮助我。我提到了绘制类和画布类，不知道如何实现。

期待您在 Android 应用程序上开发此用户故事的帮助。

最好的，

谷歌员工

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:30:42.897

1.  拿一张空白画布。
2.  在画布上绘制您的图像。
3.  通过指定 x 和 y 坐标以及油漆中的红色在画布上绘制点。

# python - Wapiti 安全工具：获取“无效语法错误”

> ID：13718542
> 
> 赞同：3
> 
> 时间：2012-12-05T07:50:48.527
> 
> 标签：python, python-2.7, security, wapiti

我按照以下步骤操作：

1.  安装 Python27 并下载`wapiti`，放在里面`c:\wapiti-2.2.1`。
2.  为 python(var name : `c:\python27`) 设置环境变量。
3.  打开 python 命令提示符。
4.  更改第 4 步的根目录我使用了脚本：

    ```
    import os
    os.chdir("c:\wapiti-2.2.1\src") 
    ```

完成所有这些之后，我仍然遇到错误

```
python wapiti.py -h
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:37:36.053

认为您在路径中缺少 \ ：

```
import os 
os.chdir("c:\wapiti-2.2.1\src") 
```

# java - 比较两个 ArrayList 以获得唯一值和重复值

> ID：13718548
> 
> 赞同：3
> 
> 时间：2012-12-05T07:51:13.653
> 
> 标签：java

如图所示，我有两个`ArrayLists`-`pinklist`和`normallist`. 我正在比较它们并从两者中找到唯一值和重复值，如下面的代码所示：

```
List<String> pinklist = t2.getList();
List<String> normallist = t.getList();
ArrayList<String> duplicatevalues = new ArrayList<String>();
ArrayList<String> uniquevalues = new ArrayList<String>();

for (String finalval : pinklist) {
    if (pinklist.contains(normallist)) {
        duplicatevalues.add(finalval);
    } else if (!normallist.contains(pinklist)) {
        uniquevalues.add(finalval);
    }
} 
```

我得到了`duplicateValues`正确的，但我没有得到独特的价值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T07:54:29.150

您忽略`finalval`了您的条件，而是询问一个*列表*是否包含另一个*列表*。

你可以这样做：

```
// Variable names edited for readability
for (String item : pinkList) {
    if (normalList.contains(item)) {
        duplicateList.add(item);
    } else {
        uniqueList.add(item);
    }
} 
```

不过，我不会真正将这些称为“独特”或“重复”项目 - 这些通常与*一个集合*中的项目有关。这只是测试一个列表中的每个项目是否在另一个列表中。我想说，在这种情况下，它更像是“现有”和“新”。

请注意，当您以基于集合的方式处理这些时，我建议使用集合实现，例如`HashSet<E>`代替列表。[Guava](https://github.com/google/guava)中的[`Sets`](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Sets.html)类提供了使用集合的有用方法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-05T07:56:40.793

这应该这样做：

```
List<String> pinklist = t2.getList();
List<String> normallist = t.getList();

ArrayList<String> duplicates = new ArrayList<String>(normallist);
duplicates.retainAll(pinklist);

ArrayList<String> uniques = new ArrayList<String>(normallist);
uniques.removeAll(pinklist); 
```

解释：

*   每个都`List`可以将另一个列表作为构造函数参数，并复制它的值。

*   `retainAll(list2)`将删除所有不存在于`list2`.

*   `removeAll(list2)`将删除所有条目，确实存在于`list2`.

*   我们不想删除/保留原始列表，因为这会修改它，所以我们在构造函数中复制它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-14T09:10:06.110

试试 ListUtils [https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html)

要获取重复值，请使用 ListUtils.intersection(list1, list2) 要获取唯一值，您可以使用 ListUtils.sum(list1, list2) 然后减去重复列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T07:55:10.610

这样做——

```
for (String finalval : pinklist)
{   
    if(normallist.contains(finalval))
    {
        // finalval is both in pinklist and in
        // normallist. Add it as a duplicate.
        duplicatevalues.add(finalval);  // this will get you the duplicate values
    }
    else {
        // finalval is in pinklist but not in
        // normallist. Add it as unique.
        uniquevalues.add(finalval);    // this will get you the values which are in 
                                       // pinklist but not in normallist
    }
}

// This will give you the values which are
// in normallist but not in pinklist.
for(String value : normallist) {
    if(!pinklist.contains(value)) {
        uniquevalues.add(value);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T14:49:14.423

使用 Java8 Stream API，我们可以过滤列表并获得预期的结果。

```
List<String> listOne = // Your list1
List<String> listTwo = // Your list2

List<String> uniqueElementsFromBothList = new ArrayList<>();
List<String> commonElementsFromBothList = new ArrayList<>();

// Duplicate/Common elements from both lists
commonElementsFromBothList.addAll(
         listOne.stream()
        .filter(str -> listTwo.contains(str))
        .collect(Collectors.toList()));

// Unique element from listOne
uniqueElementsFromBothList.addAll(
         listOne.stream()
        .filter(str -> !listTwo.contains(str))
        .collect(Collectors.toList())); 

// Unique element from listOne and listTwo 
// Here adding unique elements of listTwo in existing unique elements list (i.e. unique from listOne)
uniqueElementsFromBothList.addAll(
         listTwo.stream()
        .filter(str -> !listOne.contains(str))
        .collect(Collectors.toList())); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-02T05:40:05.893

这是我对问题的解决方案。我们可以创建一个包含两个列表中元素的集合。

对于唯一元素，使用 Stream API，我们可以根据返回`contains`方法 XOR 的谓词过滤掉元素。它只会为`true ^ false`OR返回 true `false ^ true`，确保其中只有一个包含它。

对于不同的元素，只需将 XOR 更改为`&&`，它将检查两个列表是否都有对象。

代码：

```
private static void uniqueAndDuplicateElements(List<String> a, List<String> b) {
    Set<String> containsAll = new HashSet<String>();
    containsAll.addAll(a);
    containsAll.addAll(b);

    List<String> uniquevalues = containsAll.stream()
                                .filter(str -> a.contains(str) ^ b.contains(str))
                                .collect(Collectors.toList());

    List<String> duplicatevalues = containsAll.stream()
                                   .filter(str -> a.contains(str) && b.contains(str))
                                   .collect(Collectors.toList());

    System.out.println("Unique elements from both lists: " + uniquevalues);
    System.out.println("Elements present in both lists: " + duplicatevalues);
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-05T08:00:18.507

为什么要将整个列表传递给 contains 方法？你应该通过`finalval`。

# php - Codeigniter，路由在生产服务器上不起作用

> ID：13718549
> 
> 赞同：7
> 
> 时间：2012-12-05T07:51:26.573
> 
> 标签：php, .htaccess, codeigniter

我有 3 台服务器，一台 localhost apache 服务器，一台测试远程服务器和生产实时服务器。

我在所有 3 个和本地主机上都安装了相同的 codeigniter 和站点设置，并且没有“index.php”的测试服务器路由工作 100%。然而，在生产服务器上，无论 URL 说什么，只会显示主页（通过默认控制器），似乎所有路由规则都被忽略了，除了默认规则。

但是，如果在 URL 中添加了 index.php，那么它将按预期工作。

例如，如果生产站点上的 URL 是：“www.mysite.com/information”，则加载的内容来自默认控制器。

但是当生产站点上的 URL 是：“www.mysite.com/index.php/information”时，加载的内容来自“信息”控制器。

这是我的 htacess 文件的内容：http: [//pastebin.com/cDaZVJ8A](http://pastebin.com/cDaZVJ8A)

这是我的路线配置文件： http: [//pastebin.com/7Ewc2bwN](http://pastebin.com/7Ewc2bwN)

我的 $config['index_page'] 设置为空。

我真的不知道为什么它不工作，就codeigniter本身而言，所有服务器上的设置相同，而 mod_rewrite 正在生产服务器上工作。

我不知道该怎么办，我怎样才能找出问题所在？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T09:09:19.160

这是一个很常见的问题，当人们将 codeigniter 安装从一个环境移动到另一个环境时，经常会出现这种问题。`?`我不知道它为什么会发生，可能是服务器操作系统或 apache 设置的差异，但解决方案通常是在 .htaccess 文件中的 index.php 的 RewriteRule 中添加一个问号。

老的：

```
RewriteRule ^(.*)$ index.php/$1 [L] 
```

新的：

```
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:32:28.350

检查您的 Apache 虚拟主机配置并验证`AllowOverride All`您的目录定义中是否包含该配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:35:34.683

1.  也许您的 .htaccess 文件有问题？

    当我将应用程序移动到生产服务器时遇到问题，因为 RewriteBase 被设置为开发服务器上的某个目录。

    在我的生产服务器上，应用程序位于 web 根目录中，所以`RewriteBase`应该是`/`，我在`/something`那里。

2.  一旦我遇到了大写/小写的愚蠢问题，当我将站点从开发服务器（Windows）移动到生产服务器（Linux）时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-22T10:25:10.427

我有同样的问题。我正在使用函数将文章名称转换为 URL（slugify）。

在 localhost 和服务器上，此函数返回略有不同的 url。

# python - 在python中合并3个dict（）

> ID：13718558
> 
> 赞同：3
> 
> 时间：2012-12-05T07:51:54.063
> 
> 标签：python, dictionary

如果它们之间有共同的字符串，是否有一种逻辑合并多个字典的方法？即使这些公共字符串在一个 dict() 的值与另一个键的值之间匹配？

我在 SO 上看到了很多类似的问题，但似乎没有一个可以解决我将“较低级别文件”中的多个键与较高键/值中的多个键相关联的具体问题（level1dict）

假设我们有：

```
level1dict = { '1':[1,3], '2':2 }
level2dict = { '1':4, '3':[5,9], '2':10 }
level3dict = { '1':[6,8,11], '4':12, '2':13, '3':[14,15], '5':16, '9':17, '10':[18,19,20]}
finaldict = level1dict 
```

当我从逻辑上说时，我的意思是，在 level1dict 1=1,3 和 level2dict 1=4 和 3=5,9 中（到目前为止）1 = 1,3,4,5,9（排序不重要）

我想得到的结果是

```
#.update or .append or .default?
finaldict = {'1':[1,3,4,5,9,6,8,11,12,14,15,16,17] '2':[2,10,18,19,20]} 
```

回答：感谢 Ashwini Chaudhary 和 Abhijit 提供 networkx 模块。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T08:10:21.083

[这是连接组件子图的问题，如果您想使用networkx](http://networkx.lanl.gov/)可以最好地确定。这是您的问题的解决方案

```
>>> import networkx as nx
>>> level1dict = { '1':[1,3], '2':2 }
>>> level2dict = { '1':4, '3':[5,9], '2':10 }
>>> level3dict = { '1':[6,8,11], '4':12, '2':13, '3':[14,15], '5':16, '9':17, '10':[18,19,20]}
>>> G=nx.Graph()
>>> for lvl in level:
    for key, value in lvl.items():
        key = int(key)
        try:
            for node in value:
                G.add_edge(key, node)
        except TypeError:
            G.add_edge(key, value)

>>> for sg in nx.connected_component_subgraphs(G):
    print sg.nodes()

[1, 3, 4, 5, 6, 8, 9, 11, 12, 14, 15, 16, 17]
[2, 10, 13, 18, 19, 20]
>>> 
```

这是您如何可视化它的方式

```
>>> import matplotlib.pyplot as plt
>>> nx.draw(G)
>>> plt.show() 
```

![在此处输入图像描述](../Images/f17c89242719e1c1ba13d404a232755d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:02:12.220

几点注意事项：

1.  有些值是数字，有些是列表，这很不方便。首先尝试将数字转换为单项列表。
2.  如果顺序不重要，最好使用[`set`](http://docs.python.org/2/library/stdtypes.html#set-types-set-frozenset)s 而不是列表。他们有各种“逻辑”操作的方法。

然后你可以这样做：

```
In [1]: dict1 = {'1': {1, 3}, '2': {2}}

In [2]: dict2 = {'1': {4}, '2': {10}, '3': {5, 9}}

In [3]: dict3 = {'1': {6, 8, 11}, '2': {13}, '4': {12}}

In [4]: {k: set.union(*(d[k] for d in (dict1, dict2, dict3)))
    for k in set.intersection(*(set(d.keys()) for d in (dict1, dict2, dict3)))}
Out[4]: {'1': set([1, 3, 4, 6, 8, 11]), '2': set([2, 10, 13])} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T08:18:22.410

```
In [106]: level1dict = { '1':[1,3], '2':2 }

In [107]: level2dict = { '1':4, '3':[5,9], '2':10 }
In [108]: level3dict = { '1':[6,8,11], '4':12, '2':13, '3':[14,15], '5':16, '9':17, '10':[18,19,20]}

In [109]: keys=set(level2dict) & set(level1dict) & set(level3dict) #returns ['1','2']
In [110]: dic={}

In [111]: for key in keys:
    dic[key]=[]
    for x in (level1dict,level2dict,level3dict):
        if isinstance(x[key],int):
            dic[key].append(x[key])
        elif isinstance(x[key],list):
            dic[key].extend(x[key])
   .....:             

In [112]: dic
Out[112]: {'1': [1, 3, 4, 6, 8, 11], '2': [2, 10, 13]}

# now iterate over `dic` again to get the values related to the items present
# in the keys `'1'` and `'2'`.

In [122]: for x in dic:
    for y in dic[x]:
        for z in (level1dict,level2dict,level3dict):
            if str(y) in z and str(y) not in dic:
                if isinstance(z[str(y)],(int,str)):
                     dic[x].append(z[str(y)])
                elif isinstance(z[str(y)],list):
                     dic[x].extend(z[str(y)])
   .....:                     

In [123]: dic
Out[123]: 
{'1': [1, 3, 4, 6, 8, 11, 5, 9, 14, 15, 12, 16, 17],
 '2': [2, 10, 13, 18, 19, 20]} 
```

# css - @font 脸不工作

> ID：13718559
> 
> 赞同：0
> 
> 时间：2012-12-05T07:51:55.040
> 
> 标签：css

我正在尝试从我的服务器加载自定义字体，但它没有检索字体

我正在使用以下代码，有人可以告诉我我正在使用的代码格式是否正确。

代码 ：

```
@font-face {  
      font-family: trcustomfont ;  
      src: url( http://content.sales-accredit.com/BTGOV/Fonts/Knowledge-Regular.otf ) format("opentype");  
}  

.customfont { 
      font-family: trcustomfont;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:07:37.710

你应该这样写：-

```
@font-face {
    font-family: 'MyWebFont';
    src: url('webfont.eot'); /* IE9 Compat Modes */
    src: url('webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('webfont.woff') format('woff'), /* Modern Browsers */
         url('webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('webfont.svg#svgFontName') format('svg'); /* Legacy iOS */
    } 
```

[**或阅读有关如何为我们的网站使用自定义字体的更多信息.....**](http://www.red-team-design.com/css3-font-face-or-how-to-use-a-custom-font-for-your-website)

# c# - pac 文件中的 Web 代理和错误

> ID：13718560
> 
> 赞同：1
> 
> 时间：2012-12-05T07:51:55.670
> 
> 标签：c#, proxy, httpwebrequest

我的问题是关于 pac 文件和 .net 应用程序来使用它进行连接。

基本上我有一个 HttpWebRequest 和 HttpWebResponse，当我创建一个 HttpWebRequest 时，因为我在代理后面，所以我必须使用代理连接到外部世界。所以在我的代理设置中，我必须使用 PAC 文件来获取正确的地址，但是当我使用 pac 文件时，我收到以下错误：

```
{"The underlying connection was closed: An unexpected error occurred on a receive."} 
```

内部异常：

```
{"Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host."} 
```

我确定这与错误使用 PAC 文件有关，因为例如，如果我从 pac 文件中获取代理 IP 地址，我可以连接，但我当然想使用 pac 文件作为连接规则互联网。

这是我的代码：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(fileUrl);                request.Method = "GET";
            request.AllowAutoRedirect=true;
            request.CookieContainer = new CookieContainer();
            request.KeepAlive = true;
            WebProxy proxy = new WebProxy("http://.../proxy.pac");                
            NetworkCredential networkCredential = new NetworkCredential(UsrData.username, UsrData.password);
            proxy.Credentials = networkCredential;

            request.Proxy = proxy;

            using (HttpWebResponse webResponse = (HttpWebResponse)request.GetResponse())
            {
              ....
            }
           } 
```

对于请求，这里是 pac 的简短版本：

```
function FindProxyForURL(url, host)
{
if ( shExpMatch(host,"bbcs.companyname.com"))
        return  "PROXY 158.169.10.11:8010; "+
                "PROXY 158.169.132.11:8010";

if ( !shExpMatch(host,"*.*") ||
      shExpMatch(host,"intragate*.compname.com") ||
      shExpMatch(host,"127.0.0.*") ||
      shExpMatch(host,"10.*.*.*") ||
      shExpMatch(host,"192.168.*") ||
      shExpMatch(host,"139.191.*") ||
   )
        return "DIRECT";

if (isInNet(myIpAddress(), "158.166.0.0","255.255.128.0") ||
        isInNet(myIpAddress(), "158.168.0.0", "255.255.0.0"))
                return  "PROXY 158.165.132.13:8010; " +
                                "PROXY 158.165.5.11:8010";

else 
        return  "PROXY 158.169.10.11:8010; " +
                "PROXY 158.169.132.11:8010";
} 
```

知道我想念什么吗？

使用 PacTester 并浏览某个 url 我得到了 PROXY + ip 的返回，这可能是返回词 PROXY 的原因吗？itp 也不是完全正确的路径，不像“http://ip...”

# mysql - 如何在 SQL phpMyAdmin 3.11 中创建表

> ID：13718562
> 
> 赞同：1
> 
> 时间：2012-12-05T07:52:11.750
> 
> 标签：mysql, phpmyadmin

我想用这些细节创建一个表

```
CREATE TABLE site_data
(
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(250),
    link VARCHAR(250),
    description TEXT
); 
```

但是还有另一个字段，如下所示

我是 SQL 和 PHP 的新手。

![http://i.imgur.com/NoRHz.jpg](../Images/46f1f225ed6c264e54a3f17a3201b58a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T01:17:24.173

回到家中。单击要在其中添加表的数据库。单击顶部的“SQL”，然后将代码复制并粘贴到运行 SQL 区域。点击 Go，你的表应该已经创建好了。确保它在数据库中。

# linux - asm 在 linux/include/asm 中代表什么

> ID：13718563
> 
> 赞同：6
> 
> 时间：2012-12-05T07:52:15.047
> 
> 标签：linux

从[howto_add_systemcall 中读取](http://www.csee.umbc.edu/courses/undergraduate/CMSC421/fall02/burt/projects/howto_add_systemcall.html)

> “一般来说，与机器架构无关的系统调用和函数的头文件保存在 linux/include/linux/ 下，而与机器架构相关的头文件保存在 linux/include/asm/ 下”

那么 asm 在这里代表什么？

我搜索了wiki，但没有找到答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-06-08T23:34:19.943

我猜它最初代表体系结构特定宏（asm）。在那之后，任何架构特定的东西都放在那里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T07:54:43.770

“asm”代表“汇编程序”或[“汇编语言”](http://en.wikipedia.org/wiki/Assembly_language)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:01:13.113

用于处理 x86 架构的系统调用的汇编代码位于，

```
arch/x86/kernel/entry_32.S (or _64.S) 
```

# testing - JS测试驱动中测试用例的异步执行

> ID：13718567
> 
> 赞同：1
> 
> 时间：2012-12-05T07:52:28.023
> 
> 标签：testing, asynchronous, case, execution, js-test-driver

我们有 CI 构建服务器，其中不同的 JS 测试用例将在 JS 测试驱动程序服务器的同一实例上并行（异步）执行。测试用例相互独立，不应相互干扰。这可能使用JS测试驱动程序吗？

目前，我已经编写了两个测试用例，只是为了检查这是否可能：

测试用例 1：

```
GreeterTest = TestCase("GreeterTest");

GreeterTest.prototype.testGreet = function() {
  var greeter = new myapp.Greeter();
  alert(“just hang in there”);
  assertEquals("Hello World!", greeter.greet("World"));
}; 
```

测试用例2：

```
GreeterTest = TestCase("GreeterTest");

GreeterTest.prototype.testGreet = function() {
   var greeter = new myapp.Greeter();
   assertEquals("Hello World!", greeter.greet("World"));
}; 
```

我在测试用例 1 中添加了 alert 语句，以确保它挂在那里。

我已经使用以下命令启动了 JS 测试驱动服务器：

```
java --jar JsTestDriver-1.3.5.jar --port 9877 --browser <path to browser exe> 
```

我开始执行两个测试用例，如下所示：

```
java -jar JsTestDriver-1.3.5.jar --tests all --server http://localhost:9877 
```

测试用例 1 在 alert 语句处执行并挂起。测试用例 2 失败并出现异常 (BrowserPanicException)。conf 文件是正确的，因为第二个测试用例如果自行执行则通过。

在第一个测试用例仍在执行时，是否需要进行任何配置更改才能使第二个测试用例通过？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:48:50.683

这个问题是由“app”（jsTestDriver slave，运行测试）不能真正并行运行它们引起的。这是因为它是用 javascript 编写的，它是单线程的。
该实现可能会循环所有测试并逐个运行它们，因此，当警报弹出时，整个“应用程序”被阻塞，甚至无法向 jsTestDriver 服务器报告，导致超时，表现为 BrowserPanicException。
编写[异步测试](http://code.google.com/p/js-test-driver/wiki/AsyncTestCase)无济于事，因为整个“应用程序”都被卡住了。

# windows-phone-7 - PhotoChooserTask.Completed 未触发

> ID：13718568
> 
> 赞同：0
> 
> 时间：2012-12-05T07:52:30.727
> 
> 标签：windows-phone-7, photo

我正在尝试将其`PhotoChooserTask`用于我们的目的。调用`photoChooserTask.Show()`选择器后显示，但是当我选择一张图片时，它正在关闭并且事件 Completed**未触发**！

为什么？

还有更多，之后`PhotoChooserTask`下次调用时不会显示`Show`。

PS如果我在新解决方案中尝试此代码 - 它会正常工作，但为什么它在我们的项目中不起作用？

```
PhotoChooserTask photoChooserTask;
        private void button2_Click(object sender, System.Windows.RoutedEventArgs e)
        {
            photoChooserTask = new PhotoChooserTask();
            photoChooserTask.Completed += new EventHandler<PhotoResult>(photoChooserTask_Completed);
            photoChooserTask.Show();
            // TODO: Add event handler implementation here.
        }

        void photoChooserTask_Completed(object sender, PhotoResult e)
        {
            //Bla bla bla
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:50:16.367

我解决了这个问题。

因此，项目不能有多个照片选择器。您不能`PhotoChooserTask`使用不同的处理逻辑在 Page1 和 Page2 中声明。

希望这对某人有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T08:12:31.607

您应该确保遵守创建和初始化对象的准则：

> 为确保您的应用程序接收到 PhotoChooserTask 的结果，必须在 PhoneApplicationPage 类中使用类范围声明该对象，并且您必须调用选择器构造函数并在页面的构造函数中分配 Completed 事件委托。

[来源](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.photochoosertask.photochoosertask%28v=vs.92%29.aspx)

# apache - 如何删除目录中可用的链接文件？

> ID：13718574
> 
> 赞同：0
> 
> 时间：2012-12-05T07:52:42.940
> 
> 标签：apache

嗨朋友们，当我尝试使用以下命令删除该文件时，我在“/etc/apache2/sites-enabled/”文件夹中的“mentortask”中有链接。当我重新加载 apache 服务器时，它不能工作并说不能删除被拒绝的权限。

“ **rm /etc/apache2/sites-enabled/mentortask.com** ” 和 “**取消链接 /etc/apache2/sites-enabled/mentortask.com** ”

这个问题将如何解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T07:54:40.353

```
sudo rm /etc/apache2/sites-enabled/mentortask.com 
```

如果你不能，那么你需要请求管理员为你做这件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-30T11:18:15.407

查找 ./{DirectoryName} -type l -print0 | xargs -0 ls -plah |tr -s ' ' | 剪切-f9 -d''| xargs rm -rf

# java - 带有公共数组的指针

> ID：13718577
> 
> 赞同：-1
> 
> 时间：2012-12-05T07:52:50.080
> 
> 标签：java, arrays, pointers, public

事情是这样的——我的 Main 方法只调用 InitGui。在整个类中（基本上是整个文件，我有 InitGui 方法和一些公共静态 gui 对象。其中一个对象实际上是一个数组

```
public static JButton Keys[] = null; 
```

我有一个名为 placeKeys 的方法，它获取每个 JButton“键”的位置并将其放置在面板上。当我不使用这种方法时，整个代码都可以工作，基本上不是 for i=0 到任何东西，我只想调用 placeKey(arguments here...) 而不是像这样放置每个 jButton

```
for i=0 to whatever
Keys[i] = new JButton(jBStringArray[i]);
        Keys[i].setLocation(2 + i*kSize,2+row*50);
        Keys[i].setSize(50, kSize);     
        keyboardPane.add(Keys[i]); 
```

我把方法写下来了，但是当它尝试访问 Keys[] 时，它在 placeKeys 报告指针错误，这意味着方法的第一行

希望你能理解我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:58:41.953

在你的 for 循环之前（或者当你声明它时，或者，如果你依赖空检查，就在 for 循环之前）你需要用`Keys = new JButton[whatever+1];`. 哦，请以小写字母开头变量名 - 这是普遍接受的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T07:58:46.337

```
//assuming jBStringArray is already defined here
public static JButton Keys[] = new JButton[jBStringArray.length]; 
```

# java - HttpClient 用于相对重定向的自定义重定向处理程序

> ID：13718580
> 
> 赞同：0
> 
> 时间：2012-12-05T07:53:05.417
> 
> 标签：java, android, redirect, apache-commons-httpclient

有没有办法制作一个自定义重定向处理程序，它告诉 Apache HttpClient 我想在重定向发生之前重定向到哪里，在 post 方法执行之后？这是因为我在响应页面中收到错误，我的猜测是这是由于相对重定向，没有正确解释。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:34:31.883

不确定“在重定向发生之前重定向”是什么意思，但您可以创建自己的重定向处理程序并替换默认处理程序。然后你可以随心所欲地处理`Location`标题。在任何情况下，如果默认的不能正确处理它，很可能是一些服务器配置错误。这是接口的默认实现供参考：

[http://developer.android.com/reference/org/apache/http/client/RedirectHandler.html](http://developer.android.com/reference/org/apache/http/client/RedirectHandler.html)

[http://developer.android.com/reference/org/apache/http/impl/client/DefaultRedirectHandler.html](http://developer.android.com/reference/org/apache/http/impl/client/DefaultRedirectHandler.html)

# java - 为什么这个图像的 tesseract 失败了？

> ID：13718586
> 
> 赞同：0
> 
> 时间：2012-12-05T07:53:46.810
> 
> 标签：java, image-processing, ocr, tesseract

![在此处输入图像描述](../Images/cac422a67f57f7c646bba2d6e09a2cd2.png)

我已经在这张图片和一些扫描的图片上尝试了 tesseract，其中一些文本在矩形内。但每次都会失败，并输出一些垃圾文本。并在文本周围不带框的情况下进行更正。请告诉我如何处理图像或 tesseract ？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:02:13.157

Tesseract 在分类之前将图像转换为灰度，因此粉红色的线条可能被提取为文本。

只从图像中提取黑色像素，你应该没问题。您可以为此使用[ImageMagick 。](http://www.imagemagick.org/script/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:13:25.840

如前所述，在进行 OCR 之前，您应该去掉粉色线条（尽管它们仍然可以用作字符边界）

一旦你提取了你的 gliphs 并将它们二值化（转换为位图），你就可以开始在它上面使用 tesseract。请记住，tesseract 使用形状提取方法并依赖于字典支持 - 您可能会通过 Hu 等不变矩获得更好的结果（和更快的处理时间）

如果您对基于 java 的方法感兴趣，这里是我们的 OCR 库在纯 java 中执行此操作（可以移植到其他语言）：

[http://sourceforge.net/projects/javaocr/](http://sourceforge.net/projects/javaocr/)

# hide - 星号从 nmap 扫描中隐藏版本

> ID：13718587
> 
> 赞同：1
> 
> 时间：2012-12-05T07:54:04.827
> 
> 标签：hide, version, asterisk, nmap, network-scan

我正在寻找方法（iptables 规则等）以防止星号版本显示在 nmap udp 扫描中而不关闭（丢弃）端口。如果我为某个 IP 地址打开它，从该 IP 地址到端口 5060 的 nmap udp 扫描可以解析星号版本（`nmap -sU -sV -p 5060 <ipaddress>`）：

```
PORT     STATE  SERVICE VERSION
5060/udp open   sip     Asterisk PBX 1.8.13.0 
```

有什么方法只显示端口 5060 打开？是否可以隐藏此星号信息或更改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:40:23.123

我认为您可以在 sip.conf 中通过以下方式使用 pbx 信息

```
useragent=SIPClient XXX 
```

但实际上在我的主机上该命令显示：

```
[root@pro-sip ~]# nmap -sU -sV -p 5060  78.47.XXX.XXX

Starting Nmap 4.11 ( http://www.insecure.org/nmap/ ) at 2012-12-05 22:35 UTC
Interesting ports on pro-sip.net (78.47.XXX.XXX):
PORT     STATE         SERVICE VERSION
5060/udp open|filtered sip

Nmap finished: 1 IP address (1 host up) scanned in 52.025 seconds 
```

所以也许在你的主机上它只是发现了一些问题并猜测它是星号版本 XXX

# javascript - Object.defineProperties/create 真的需要吗？

> ID：13718590
> 
> 赞同：0
> 
> 时间：2012-12-05T07:54:29.820
> 
> 标签：javascript, oop

一些项目使用`Object.create()`或`Object.defineProperties()`功能。我想知道是推荐的吗？有什么区别

```
x = Object.create(null); 
```

对比

```
x = {} 
```

和

```
x = {}
x.__proto__.hello = function() { 
    console.log("hello"); 
} 
```

对比

```
x = Object.create(null);
Object.defineProperty(x, "hello", { 
    value: function() { 
        console.log("hello"); 
    } 
}); 
```

`defineProperty/create`对我来说似乎非常冗长和冗长。我何时/为什么使用它们？也许好的可能是强制执行 getter/setter/overriding 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:45:47.650

这是个很大的差异。看看文档！

*   [`Object.create`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)在您的情况下，确实会创建一个继承自第一个参数的对象`null`。相反，`{}`- 或`new Object()`- 创建一个继承自 的新对象`Object.prototype`。
*   [`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)是非标准的，不应使用。但是，在您的情况下，您只需执行`Object.prototype.hello = function() {…};`. 永远不要用可枚举的属性扩展该对象，永远不要！
*   [`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)确实在具有特殊描述符对象的对象上定义了一个属性。`enumerable`和属性默认为`configurable`，这意味着您将无法例如或分配任何其他值。`writable``false``delete x.hello`

您的第一个片段创建了一个普通对象，该对象继承了一个`hello`方法`Object.prototype`，而您的第二个片段创建了一个从无继承并具有不可编辑`hello`属性的对象。我没有看到太多的相关性。

# internationalization - lwuit 更改 UI 语言

> ID：13718591
> 
> 赞同：1
> 
> 时间：2012-12-05T07:54:37.180
> 
> 标签：internationalization, lwuit, lwuit-form

我使用代号来开发我的移动应用程序。在这个应用程序中，我手动实现了一些类和代码，例如通过硬编码而不是出于某种原因使用代号设计器来创建所有表单。

顺便说一句，我想在类似代号使用的表单中导航，所以我使用了一个`Form`名为它的类型的变量`prevForm`，当我想打开一个表单时，我将它设置为当前表单，然后显示新表单。

好的，这是主要场景。在这个应用程序中，我也想实现国际化，所以我为此应用程序创建了自己的哈希表（波斯语和英语）。

这是我的问题：

1.  如何设置或更改语言并将其应用于我打开的表单？

2.  我在表单之间导航的方法好吗？

这是我的代码：

```
public class BaseForm extends Form implements ActionListener {
public BaseForm(){
    this.setLayout(new BoxLayout(BoxLayout.Y_AXIS));
}

Command exit, ok, back;
Form prevForm;

protected void initForm(){

}

protected void showForm(){

}

protected void showForm(final Form prevForm){
    //String name = this.getName();
    //if("Reminder".equals(name) || "3Transaction".equals(name))
    {
        this.prevForm = prevForm;
        Form f = this;
        back = new Command("Back");
        //ok = new Command("Ok");
        //delete = new Command("Delete");;
        Button button = new Button("Button");

        f.addCommand(back);
        //f.addCommand(ok);
        //f.addCommand(delete);
        //f.addComponent(button);

        f.addCommandListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                if (ae.getCommand().equals(back)) {
                    //Do Exit command code
                    System.out.println("Back pressed");
                    prevForm.showBack();
                } else if (ae.getCommand().equals(ok)) {
                    //Do Start command code
                    System.out.println("Ok pressed");
                }
            }
        });

        button.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent ae) {
                //Do button code
                System.out.println("Action performed");
            }
        });
    }
    showForm();
}} 
```

对于打开的嵌套表单，我使用以下代码：

```
LanguageUI lang = new LanguageUI();
lang.showForm(this); 
```

更改语言[表格]：

```
protected boolean onBtnSave() {
    if(isRbFarsiSelected()){
        UIManager.getInstance().setResourceBundle(new CommonSettings().getFarsi());
    }
    else {
        UIManager.getInstance().setResourceBundle(new CommonSettings().getEnglish());
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:47:48.927

我还在 lwuit 上对我的 UI 进行了硬编码，并且每个类都有一个可变的 parentForm，因此我可以轻松地显示以前的表单。对于语言更改，我知道您可以使用资源编辑器中的本地化。以下是您如何访问它。我想诀窍是如何在代码中的 res 文件中设置 L10N 的内容？另一方面，您可以创建自己的帮助类来反映以下方法。

```
Resources theme = Resources.open("/theme.res");
theme.getL10N(id, locale);
theme.getL10NResourceNames();
theme.isL10N(name);
theme.listL10NLocales(id) 
```

# ruby-on-rails-3 - 使用 Rspec Rails 测试异常

> ID：13718592
> 
> 赞同：0
> 
> 时间：2012-12-05T07:54:39.677
> 
> 标签：ruby-on-rails-3, unit-testing, rspec

我想对类似于以下的方法调用进行测试：

```
call_to_method_1 param1 
```

这种方法可以引发例如：

```
raise msg1 if ...
raise msg2 if ... 
```

我的问题是如何使用 RSpec 的 msg1、msg2 异常消息测试异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:14:01.217

```
describe SomeClass do
  let(:some_object) { described_class.new }

  it 'should raise an exception' do
    some_object.some_method('param').should raise_error(ExceptionClass, "exception_message")
  end
end 
```

如果你`raise "message"`那么`ExceptionClass`将是`RuntimeClass`.

IMO 最好提出特定类型的异常，而不是依赖消息。

# javascript - jquery取消绑定img元素上的点击事件

> ID：13718596
> 
> 赞同：1
> 
> 时间：2012-12-05T07:54:56.343
> 
> 标签：javascript, jquery

取消绑定后我无法绑定点击事件。任何人都可以解决这个问题吗？这是我的代码示例：

```
if(condition for radio button)
  jQuery('#txtEffectiveBeginDate').
      next('.ui-datepicker-trigger').
      unbind('click').
      css({ 'opacity': .50 }).
      css('cursor', 'text');
else
  jQuery('#txtEffectiveBeginDate').
      next('.ui-datepicker-trigger').
      bind('click').
      css({ 'opacity': 1 }).
      css('cursor', 'pointer'); 
```

# wpf - 在 DataTemplate 中更新 DataTemplate 的绑定

> ID：13718597
> 
> 赞同：2
> 
> 时间：2012-12-05T07:54:57.947
> 
> 标签：wpf, data-binding

我有以下xaml；

```
 <DataTemplate DataType="{x:Type NameSpace:Node}">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Item.Value}"/>
            <ContentControl Content="{Binding Item}"/>
        </StackPanel>
    </DataTemplate>

    <DataTemplate DataType="{x:Type NameSpace:Item}">
        <TextBlock Text="{Binding Value}" />
    </DataTemplate> 
```

当我使用 Node 模板显示 Node 对象时，我得到两个 TextBlock，它们都显示相同的值。到现在为止还挺好。项目更改时会出现问题。当 Node 类触发 INotifyPropertyChanged 事件时，Node DataTemplate 中的 TextBlock 会按预期更新，但 Item DataTemplate 中的 TextBlock 不会更新。

当 Node 类触发 IPropertyChanged 事件时，如何让 Item DataTemplate 更新其绑定？

**更新** 事实证明，上述方法适用于以下简单场景；

Xaml

```
 <DataTemplate DataType="{x:Type DataTemplateExample:Node}">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Item.Value}"/>
                <ContentControl Content="{Binding Item}"/>
            </StackPanel>
        </DataTemplate>

        <DataTemplate DataType="{x:Type DataTemplateExample:Item}">
            <TextBlock Text="{Binding Value}" />
        </DataTemplate>
    </Window.Resources>

    <Grid>
        <StackPanel Orientation="Vertical">
            <ContentControl Content="{Binding MyNode}"/>
            <Button Command="{Binding ChangeMyNodeItem}">Change Item</Button>
        </StackPanel>
    </Grid>
</Window> 
```

C＃

```
public class MainViewModel
{
    private readonly Node myNode;
    private readonly DelegateCommand changeMyNodeItemCmd;

    public MainViewModel()
    {
        myNode = new Node {Item = new Item("a")};
        changeMyNodeItemCmd = new DelegateCommand(()=>
            myNode.Item = new Item("b"));
    }

    public Node MyNode { get { return myNode; } }

    public ICommand ChangeMyNodeItem
    {
        get { return changeMyNodeItemCmd; }
    }
}

public class Node : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private Item item;
    public Item Item
    {
        set
        {
            item = value;
            if (PropertyChanged != null)
                PropertyChanged(this,new PropertyChangedEventArgs("Item"));
        }
        get { return item; }
    }
}

public class Item
{
    private readonly string value;

    public Item(string value)
    {
        this.value = value;
    }

    public string Value
    {
        get { return value; }
    }
} 
```

在我的真实场景中，我使用了代理，我认为这就是让 WPF 感到困惑的原因。项目实际上并没有改变 - 它正在重新映射。

最终，我使用类似于 ShadeOfGray 提出的解决方案解决了这个问题。但我应该指出，除非您使用代理，否则这不是必需的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:42:10.117

从您发布的内容来看，我认为您在错误的类中触发了 NotifyPropertyChanged。类似的东西应该在您的场景中正常工作。

**根据评论更新：**

```
public class Node : INotifyPropertyChanged
{
    private Item item;

    public event PropertyChangedEventHandler PropertyChanged;

    public Item Item
    {
        get
        {
            return item;
        }

        set
        {
            item = value;

            this.NotifyPropertyChanged("Item");

            if (item != null)
            {
                item.ForcePropertyChanged("Value");
            }
        }
    }

    protected void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}

public class Item : INotifyPropertyChanged
{
    private string itemValue;

    public Item()
    {
        this.Value = string.Empty;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public string Value
    {
        get
        {
            return itemValue;
        }

        set
        {
            itemValue = value;

            NotifyPropertyChanged("Value");
        }
    }

    public void ForcePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    protected void NotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

# java - 使用 jdk 1.7 构建，无法使用 jboss 4.2.3.GA（运行时环境 java 1.7）调用 Web 服务。错误：无法构建 JAXB 上下文

> ID：13718604
> 
> 赞同：4
> 
> 时间：2012-12-05T07:55:24.053
> 
> 标签：java, web-services, eclipse-juno, jboss-4.2.x

1.  **在 Eclipse 中，我正在使用jdk 1.5**构建我的项目，我正在使用**jre 1.5**并且它与 jboss 4.2.3.GA 一起工作正常（如果我使用的是 jboss 运行时环境**java 1.5**）......**没问题**

2.  **在 Eclipse 中，我正在使用jdk 1.7**构建我的项目，我使用的是**jre 1.7**，但它无法与 jboss **4.2.3.GA**一起正常工作（如果我使用的是 jboss 运行时环境**java 1.5**）......不**工作......没有任何问题 。** .

3.  但**问题在于.....在eclipse中，我正在使用****jdk 1.7**构建我的项目，我使用的是**jre 1.7**，它**不适**用于jboss 4.2.3.GA（如果我使用的是jboss运行时环境**java 1.7**） .

在第三种情况下，**项目没有显示任何错误**。但是**当我启动 jboss 时......在控制台上我发现错误**......***无法构建 JAXB 上下文***

* * *

***或者，JDK 1.7 与 jboss 4.2.3.GA 不兼容？***

* * *

**我在这里粘贴控制台描述：**

```
Initializing Application: /usr/home/
12:56:20,770 INFO  [[/lb]] app: Application Library correctly initialized!
12:56:20,773 INFO  [STDOUT] 
Application 'Library ' initialized at Wed Dec 05 12:56:20 IST 2012
12:56:24,179 ERROR [MainDeployer] Could not start deployment: file:/software/jboss/jboss-4.2.3.GA/server/deploy/lb.war/
java.lang.IllegalStateException: Cannot build JAXB context
    at org.jboss.ws.metadata.builder.jaxws.JAXWSMetaDataBuilder.createJAXBContext(JAXWSMetaDataBuilder.java:953)
    at org.jboss.ws.metadata.builder.jaxws.JAXWSWebServiceMetaDataBuilder.buildWebServiceMetaData(JAXWSWebServiceMetaDataBuilder.java:154)
    at org.jboss.ws.metadata.builder.jaxws.JAXWSServerMetaDataBuilder.setupProviderOrWebService(JAXWSServerMetaDataBuilder.java:50)
    at org.jboss.ws.metadata.builder.jaxws.JAXWSMetaDataBuilderJSE.buildMetaData(JAXWSMetaDataBuilderJSE.java:61)
    at org.jboss.wsf.stack.jbws.UnifiedMetaDataDeploymentAspect.start(UnifiedMetaDataDeploymentAspect.java:65)
    at org.jboss.wsf.framework.deployment.DeploymentAspectManagerImpl.start(DeploymentAspectManagerImpl.java:144)
    at org.jboss.wsf.container.jboss42.LazyAssemblyWSFRuntime.start(LazyAssemblyWSFRuntime.java:66)
    at org.jboss.wsf.container.jboss42.JAXWSDeployerHookPostJSE.deploy(JAXWSDeployerHookPostJSE.java:52)
    at org.jboss.wsf.container.jboss42.DeployerInterceptor.start(DeployerInterceptor.java:90)
    at org.jboss.deployment.SubDeployerInterceptorSupport$XMBeanInterceptor.start(SubDeployerInterceptorSupport.java:188)
    at org.jboss.deployment.SubDeployerInterceptor.invoke(SubDeployerInterceptor.java:95)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy45.start(Unknown Source)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy9.deploy(Unknown Source)
    at org.jboss.deployment.scanner.URLDeploymentScanner.deploy(URLDeploymentScanner.java:421)
    at org.jboss.deployment.scanner.URLDeploymentScanner.scan(URLDeploymentScanner.java:634)
    at org.jboss.deployment.scanner.AbstractDeploymentScanner$ScannerThread.doScan(AbstractDeploymentScanner.java:263)
    at org.jboss.deployment.scanner.AbstractDeploymentScanner.startService(AbstractDeploymentScanner.java:336)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:289)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalLifecycle(ServiceMBeanSupport.java:245)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.system.ServiceController$ServiceProxy.invoke(ServiceController.java:978)
    at $Proxy0.start(Unknown Source)
    at org.jboss.system.ServiceController.start(ServiceController.java:417)
    at sun.reflect.GeneratedMethodAccessor9.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:86)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy4.start(Unknown Source)
    at org.jboss.deployment.SARDeployer.start(SARDeployer.java:304)
    at org.jboss.deployment.MainDeployer.start(MainDeployer.java:1025)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:819)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:782)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:766)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:155)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:94)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:133)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:142)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:659)
    at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:210)
    at $Proxy5.deploy(Unknown Source)
    at org.jboss.system.server.ServerImpl.doStart(ServerImpl.java:482)
    at org.jboss.system.server.ServerImpl.start(ServerImpl.java:362)
    at org.jboss.Main.boot(Main.java:200)
    at org.jboss.Main$1.run(Main.java:508)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.jboss.ws.WSException: Failed to create JAXBContext
    at org.jboss.ws.core.jaxws.CustomizableJAXBContextFactory.createContext(CustomizableJAXBContextFactory.java:114)
    at org.jboss.ws.metadata.builder.jaxws.JAXWSMetaDataBuilder.createJAXBContext(JAXWSMetaDataBuilder.java:949)
    ... 82 more
Caused by: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
java.lang.StackTraceElement does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.lang.StackTraceElement
        at public java.lang.StackTraceElement[] java.lang.Throwable.getStackTrace()
        at java.lang.Throwable
        at private java.lang.Throwable[] st.erpsapccn.bs.ip.admin.service.jaxws.IPWSExceptionBean.suppressed
        at st.erpsapccn.bs.ip.admin.service.jaxws.IPWSExceptionBean

    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:102)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:438)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:286)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:139)
    at com.sun.xml.bind.api.JAXBRIContext.newInstance(JAXBRIContext.java:105)
    at org.jboss.ws.core.jaxws.CustomizableJAXBContextFactory.createContext(CustomizableJAXBContextFactory.java:108)
    ... 83 more
12:56:24,287 INFO  [TomcatDeployer] deploy, ctxPath=/jmx-console, warUrl=.../deploy/jmx-console.war/
12:56:25,426 ERROR [URLDeploymentScanner] Incomplete Deployment listing:

--- Incompletely deployed packages ---
org.jboss.deployment.DeploymentInfo@f5e4ea04 { url=file:/software/jboss/jboss-4.2.3.GA/server/deploy/lb.war/ }
  deployer: MBeanProxyExt[jboss.web:service=WebServer]
  status: Deployment FAILED reason: Cannot build JAXB context
  state: FAILED
  watch: file:/software/jboss/jboss-4.2.3.GA/server/deploy/lb.war/WEB-INF/web.xml
  altDD: null
  lastDeployed: 1354692375941
  lastModified: 1354610826000
  mbeans:
    jboss.web:j2eeType=Servlet,name=default,WebModule=//localhost/lb,J2EEApplication=none,J2EEServer=none (state not available)
    jboss.web:j2eeType=Servlet,name=jsp,WebModule=//localhost/lb,J2EEApplication=none,J2EEServer=none (state not available)
    jboss.web:j2eeType=Servlet,name=LBRefDataWS,WebModule=//localhost/lb,J2EEApplication=none,J2EEServer=none (state not available)
    jboss.web:j2eeType=Servlet,name=AlternateLoginServlet,WebModule=//localhost/lb,J2EEApplication=none,J2EEServer=none (state not available)
    jboss.web:j2eeType=Servlet,name=LBAdminWS,WebModule=//localhost/lb,J2EEApplication=none,J2EEServer=none (state not available)
    jboss.web:j2eeType=Servlet,name=app,WebModule=//localhost/lb,J2EEApplication=none,J2EEServer=none (state not available)
    jboss.web:j2eeType=Servlet,name=LBWS,WebModule=//localhost/lb,J2EEApplication=none,J2EEServer=none (state not available)

12:56:25,549 INFO  [Http11Protocol] Starting Coyote HTTP/1.1 on http-dlhl0664.dlh.st.com%2F10.199.3.147-23920
12:56:25,608 INFO  [AjpProtocol] Starting Coyote AJP/1.3 on ajp-dlhl0664.dlh.st.com%2F10.199.3.147-23921
12:56:25,623 INFO  [Server] JBoss (MX MicroKernel) [4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181417)] Started in 44s:551ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T18:58:20.893

也许这个链接应该对你有帮助：

[http://leakfromjavaheap.blogspot.com/2013/03/jboss-422-ga-to-jdk-7-or-jdk-6-migration.html](http://leakfromjavaheap.blogspot.com/2013/03/jboss-422-ga-to-jdk-7-or-jdk-6-migration.html)

我单独编译了那个类，并将它注入到 jbossws-core.jar 中。JBoss 4.2.2 GA 在 JDK7 上启动，没有任何错误。”

[https://source.jboss.org/changelog/JBossWS?cs=16285&_sscc=t](https://source.jboss.org/changelog/JBossWS?cs=16285&_sscc=t)

# java - Hibernate：线程“main”中的异常 org.hibernate.exception.SQLGrammarException：“字段列表”中的未知列“DTYPE”

> ID：13718612
> 
> 赞同：0
> 
> 时间：2012-12-05T07:56:04.043
> 
> 标签：java, hibernate, exception, jpa

当我尝试运行我的代码时，它会生成以下异常。

```
INFO: HHH000397: Using ASTQueryTranslatorFactory
Hibernate: select sequence_next_hi_value from hibernate_sequences where sequence_name =     'Ancestor' for update
Hibernate: insert into hibernate_sequences(sequence_name, sequence_next_hi_value)   values('Ancestor', ?)
Hibernate: update hibernate_sequences set sequence_next_hi_value = ? where   sequence_next_hi_value = ? and sequence_name = 'Ancestor'
Hibernate: insert into Ancestor (nationality, DTYPE, id) values (?, 'Ancestor', ?)  
Dec 05, 2012 1:14:43 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions     
WARN: SQL Error: 1054, SQLState: 42S22
Dec 05, 2012 1:14:43 PM org.hibernate.engine.jdbc.spi.SqlExceptionHelper logExceptions
ERROR: Unknown column 'DTYPE' in 'field list' 
Exception in thread "main" org.hibernate.exception.SQLGrammarException: Unknown column   'DTYPE' in 'field list'
    at         org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDeleg    ate.java:122)
at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy10.executeUpdate(Unknown Source)
at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2859)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3300)
at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:88)
at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:275)
at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1214)
at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:403)
at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
at com.mappings.util.HibernateUtil.commitTransaction(HibernateUtil.java:70)
at com.mappings.main.MappingsTest.main(MappingsTest.java:33)
Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Unknown column 'DTYPE'   in 'field list'
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2941)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1623)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1715)
at com.mysql.jdbc.Connection.execSQL(Connection.java:3249)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1268)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1541)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1455)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1440)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at       org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
... 17 more 
```

当我尝试在表中插入数据时，代码会生成异常。我不明白为什么会生成此异常。以下是我的代码： -

```
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
public class Ancestor {
private int id;
private String nationality;

@Id
@GeneratedValue(strategy=GenerationType.TABLE)
public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}
public String getNationality() {
    return nationality;
}
public void setNationality(String nationality) {
    this.nationality = nationality;
}
}

@Entity
public class Parent extends Ancestor{
private String firstName;

public String getFirstName() {
    return firstName;
}

public void setFirstName(String firstName) {
    this.firstName = firstName;
}
}

@Entity
public class Child extends Parent{
private String lastName;

public String getLastName() {
    return lastName;
}

public void setLastName(String lastName) {
    this.lastName = lastName;
}
}

public class MappingsTest {
public static void  main(String[] args) {
    HibernateUtil.recreateDatabase();
    Ancestor ancestor = new Ancestor();
    ancestor.setNationality("Indian");

    Ancestor ancestor1 = new Ancestor();
    ancestor1.setNationality("Indian");

    Parent parent = new Parent();
    parent.setNationality("India");
    parent.setFirstName("Harmeet Singh");

    Child child = new Child();
    child.setNationality("Indian");
    child.setFirstName("Harmeet Singh");
    child.setLastName("Kalra");

    Session session = HibernateUtil.beginTransaction();
    session.saveOrUpdate(ancestor);
    session.saveOrUpdate(parent);
    session.saveOrUpdate(child);
    session.saveOrUpdate(ancestor1);
    HibernateUtil.commitTransaction();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:21:58.443

您的架构缺少`DTYPE`用于区分多态实体类型（`Ancestor`和）的鉴别器列（是其默认名称`Parent`）。

如果您手动创建模式，则需要添加该列（您可以使用 配置其名称`@DiscriminatorColumn`），或者让 Hibernate 生成新模式。

# google-maps-api-3 - Google 地图 API 的版本特定路径

> ID：13718613
> 
> 赞同：2
> 
> 时间：2012-12-05T07:56:08.847
> 
> 标签：google-maps-api-3

我正在使用此路径加载 Google 地图

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

在某些情况下，我需要能够加载旧版本的 API，但无法找到链接。

谁知道在哪里可以找到？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T08:01:46.967

请参阅[文档](https://developers.google.com/maps/documentation/javascript/basics#Versioning)

以下引导请求说明了如何请求特定版本的 Maps Javascript API：

[http://maps.googleapis.com/maps/api/js?v=3.9&sensor=true_or_false](http://maps.googleapis.com/maps/api/js?v=3.9&sensor=true_or_false)

目前可用的版本有： 版本 3.10 参考（发布） 版本 3.11 参考（实验） 版本 3.9 参考（冻结） 版本 3.0 - 3.8 已停用。

当某个版本退役时，它不再可用，您将获得“冻结”版本。

# javascript - Objective-C - Javascript 通信

> ID：13718615
> 
> 赞同：1
> 
> 时间：2012-12-05T07:56:15.817
> 
> 标签：javascript, objective-c, webview

我正在为 iOS 开发一个混合应用程序。为了实现 Javascript 和原生代码之间的双向通信，我正在使用`Webviewjavascriptbridge`第三方库。这是我正在使用的代码。

```
//pkViewcontroller.h
@class WebViewJavascriptBridge;
@property (strong, nonatomic) WebViewJavascriptBridge *javascriptBridge;  
@property (strong, nonatomic) IBOutlet UIWebView *webView;
//pkViewcontroller.m
 - (void)viewDidLoad
 {
     [WebViewJavascriptBridge enableLogging];
     _bridge= [WebViewJavascriptBridge bridgeForWebView:_webView handler:nil];
     NSString *path=[[NSBundle mainBundle]pathForResource:@"index"  ofType:@"html"];
     NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL  fileURLWithPath:path]];
     [_webView loadRequest:request];

    [_bridge registerHandler:@"testObjcCallback" handler:^(id data, WVJBResponse *response) {
    NSLog(@"after getContactBttnTapped method call");
    ABPeoplePickerNavigationController *picker=[[ABPeoplePickerNavigationController alloc]init];
    picker.peoplePickerDelegate= self;
    [self presentViewController:picker animated:YES completion:nil];
   }];
} 
```

HTML 文件

```
<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="test.js"></script>
  </head>
  <body>
    <input type="Button" value="ChooseContact" onClick="ChooseContactTapped()">
  </body>
</html> 
```

测试.js

```
var bridge
window.onerror = function(err) {
  alert('window.onerror: ' + err)
}
document.addEventListener('WebViewJavascriptBridgeReady', onBridgeReady, false)
function onBridgeReady(event) {
  bridge = event.bridge
}

function ChooseContactTapped(){
  bridge.callHandler('testObjcCallback', {'foo': 'bar'}, function(response) {
    log('Got response from testObjcCallback', response)
  })
} 
```

JS 文件将驻留在服务器上。现在我想调用我的本地方法而不在 JS 文件中编写代码。请帮我。如果我所做的不正确，请建议我一种在本机代码和 Javascript 之间进行通信的方法。请注意，JS 文件将在服务器上，而且我需要在 JS 和本机代码之间传递对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:03:51.773

根据我们的讨论，

这是解决这个问题的方法。

这是一项艰巨的任务，但您可以实现自己想做的事情。

- 调用一个服务，你可以在 xml 中发送所有对象的内容。

-解析该xml并形成一个数据类。

- 从该 xml 构建一个数据类。

- 最后，您将拥有一份您希望使用 JS 从服务器传递的可可对象副本

# haproxy - 禁用“连接自”登录 haproxy

> ID：13718622
> 
> 赞同：4
> 
> 时间：2012-12-05T07:56:40.343
> 
> 标签：haproxy

我在 haproxy.cfg 的默认部分中有以下选项：

```
 option dontlog-normal
 option dontlognull 
```

但是日志文件中仍然有这种类型的日志行：

```
localhost haproxy[28330]: Connect from XXX.XXX.XXX.XXX:2536 to YYY.YYY.YYY.YYY:80 (http-in/HTTP) 
```

如何在日志中禁用此行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-12T05:35:22.327

指定要注意的最低日志级别，例如：

```
log 127.0.0.1 local0 notice 
```

# c - 需要反转文件，但它只适用于一行文件

> ID：13718624
> 
> 赞同：1
> 
> 时间：2012-12-05T07:56:56.947
> 
> 标签：c, string, fopen, swap

所以我认为我离这里更近了，但在打印反向字符串时我仍然会得到有趣的结果。我会尽量详细的。

## 这是输入：

```
Writing code in c
is fun 
```

## 这是我想要的：

```
c in code Writing
fun is 
```

## 这是实际的输出：

```
C
 in code Writing
fun
 is 
```

## 这是我的代码：

```
char str[1000];  /*making array large. I picked 1000 beacuse it'll never be written over.  A line will never hole 1000 characters so fgets won't write into memory where it doesnt belong*/

int reverse(int pos)
{
    int strl = strlen(str)-1,i;
    int substrstart = 0,substrend = 0;
    char temp;

    for(;;)
    {
            if( pos <= strl/2){    /*This will allow the for loop to iterate to the middle of the string. Once the middle is reached you no longer need to swap*/ 
                    temp = str[pos];        /*Classic swap algorithm where you move the value of the first into a temp variable*/
                    str[pos]= str[strl-pos]; /*Move the value of last index into the first*/
                    str[strl-pos] = temp;   /*move the value of the first into the last*/
            }

            else
            break;
    pos++;  /*Increment your position so that you are now swaping the next two indicies inside the last two*/
    }       /* If you just swapped index 5 with 0 now you're swapping index 4 with 1*/

    for(;substrend-1 <= strl;)
    {
    if(str[substrend] == ' ' || str[substrend] == '\0' ) /*in this second part of reverse we take the now completely reversed*/ 
            {
            for(i = 0; i <= ((substrend-1) - substrstart)/2; i++)       /*Once we find a word delimiter we go into the word and apply the same swap algorthim*/
                    {
                    temp = str[substrstart+i];              /*This time we are only swapping the characters in the word so it looks as if the string was reversed in place*/
                    str[substrstart+i] = str[(substrend-1)-i]; 
                    str[(substrend-1)-i] = temp;
                    }
    if(str[substrend] == '\t' || str[substrend] == '\n')
    {
    str[substrend] = ' ';   
     for(i = 0; i <= ((substrend-1) - substrstart)/2; i++)      /*Once we find a word delimiter we go into the word and apply the same swap algorthim*/
                    {
                    temp = str[substrstart+i];              /*This time we are only swapping the characters in the word so it looks as if the string was reversed in place*/
                    str[substrstart+i] = str[(substrend-1)-i]; 
                    str[(substrend-1)-i] = temp;
                    }
    }   
            if(str[substrend] == '\0')
            {
                    break;
            }
            substrstart=substrend+1;
            }
    substrend++;    /*Keep increasing the substrend until we hit a word delimiter*/
    }
printf("%s\n", str);   /*Print the reversed line and then jump down a line*/
   return 0;
}

int main(int argc, char *argv[]) 
{

char *filename;  /*creating a pointer to a filename*/
FILE *file20;   /*creating FIlE pointer to a file to open*/
int n;
int i;

if (argc==1) /*If there is no line parameter*/
{
printf("Please use line parameter!\n");
return(5); /*a return of 5 should mean that now line parameter was given*/
}

if(argc>1){
for(i=1; i < argc; i++)
{
filename = argv[i]; //get first line parameter
file20 = fopen(filename, "r"); //read text file, use rb for binary

    if (file20 == NULL){
    printf("Cannot open empty file!\n");
    }

    while(fgets(str, 1000, file20) != NULL) {
    reverse(0);
    }

fclose(file20);

}
return(0); /*return a value of 0 if all the line parameters were opened reveresed and closed successfully*/ 

}
} 
```

谁能指出我的反向函数逻辑中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:06:30.543

您所写的内容将整个文件读出到一个缓冲区中，并立即在整个文件上运行您的反向函数。

如果您希望将第一行反转，然后将下一行反转，等等，您需要使用 fgets 之类的东西一次读取一行。在每一行上反向运行，一次一个，你应该得到你想要的。

[http://www.cplusplus.com/reference/cstdio/fgets/](http://www.cplusplus.com/reference/cstdio/fgets/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:19:50.303

假设您想继续将整个文件读入单个缓冲区，然后一次对缓冲区进行逐行反转（而不是读取一行，反转它，读取下一行，反转它，等等），你需要重新编写你的 reverse() 算法。

你所拥有的似乎已经奏效了；我认为您可以通过围绕现有逻辑添加另一个循环来获得所需的内容，并对现有逻辑进行一些修改。从指向 str[] 开头的指针开始，我们称之为`char* cp1 = str`. 在这个新循环的顶部，创建另一个指针 ，`char* cp2`并将其设置为等于 cp1。使用 cp2，扫描到当前行的末尾以寻找换行符或 '\0'。现在你有一个指向当前行开头的指针（cp1）和一个指向当前行结尾的指针（cp2）。现在修改您现有的逻辑以直接使用这些指针而不是 str[]。您可以通过简单地计算当前行的长度`lineLen = cp2 - cp1;`（您不想使用 strlen() 因为该行可能没有终止的 '\0'）。之后，它将循环回到新循环的顶部并继续下一行（如果 *cp2 不指向 '\0'）...只需设置 cp1 = cp2+1 并继续下一行线。

# angularjs - 在尚未加载范围时使用 AngularJS 指令

> ID：13718625
> 
> 赞同：1
> 
> 时间：2012-12-05T07:57:08.397
> 
> 标签：angularjs

我正在尝试基于 jQuery timeago 插件实现一个简单的指令。这是指令的代码（嗯，就我目前所知）

```
<small timeago milliseconds="{{conversation.timestamp}}"></small> 
```

我正在尝试使用时间戳（以毫秒为单位），并让 angularJs 像这样绑定 timeago() 函数。

```
App.Directives.directive('timeago', function() {

    return {
        restrict: 'A',
        replace: false,
        scope: false,
        link: function (scope, element, attrs) {

            scope.$watch('ready', function () {

                var x = attrs['milliseconds'];

                alert(x);

                $(element).timeago();

            });
        },
    };

}); 
```

当我手动设置毫秒值时它工作得很好，但似乎 $scope 还没有完成它的事情......我确定这很简单，我只是不知道用谷歌搜索它的正确词.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T08:53:08.673

我不确定这`scope.$watch`是否符合您的期望；`scope.$watch`将一个表达式作为其第一个参数，以在当前范围内求值；当该表达式返回一个新值时，它将使用新值调用第二个参数，一个函数。因此，

```
scope.$watch('ready', function() {...}); 
```

和说的基本一样

> 每次`scope.ready`更改时调用此函数。

这显然不是你想要的。

* * *

关于你的功能——你可以通过几种方法来实现这样的东西。第一个是一个简单的过滤器：

```
app.filter('timeago', function() {
  return function(time) {
    if(time) return jQuery.timeago(time);
    else return "";
  };
}); 
```

```
<p>The timestapm was {{conversation.timestamp|timeago}} ago.</p> 
```

但是，在这种情况下，只要在作用域上运行摘要循环，返回的字符串就会自动刷新。

要只处理时间戳一次，您可以使用如下指令：

```
app.directive('timeago', function($timeout) {
  return {
    restrict: 'A',
    link: function(scope, elem, attrs) {
      scope.$watch(attrs.timeago, function(value) {                
        if(value) elem.text(jQuery.timeago(value));
      });
    }
  };
}); 
```

```
<p>The timestamp was <span timeago="conversation.timestamp"></span> ago.</p> 
```

这是一个每 15 秒重新运行一次摘要循环的版本，以每隔一段时间自动更新时间戳：

```
app.directive('timeago', function($timeout) {
  return {
    restrict: 'A',
    link: function(scope, elem, attrs) {
      var updateTime = function() {
        if (attrs.timeagoAutoupdate) {
          var time = scope.$eval(attrs.timeagoAutoupdate);
          elem.text(jQuery.timeago(time));
          $timeout(updateTime, 15000);
        }
      };
      scope.$watch(attrs.timeago, updateTime);
    }
  };
}); 
```

```
<p>The timestamp was <span timeago="conversation.timestamp"></span> ago.</p> 
```

[这是一个演示所有三个示例的 jsFiddle](http://jsfiddle.net/BinaryMuse/un8ch/)。请注意，第三个示例（使用过滤器）每分钟自动更新的唯一原因是因为第二个示例（`timeagoAutoupdate`指令）正在调用`scope.$eval`.

# asp.net-mvc - 路线中的奇怪路线值

> ID：13718626
> 
> 赞同：2
> 
> 时间：2012-12-05T07:57:10.487
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

在我的 asp.net mvc 3 站点中，我的实际路线看起来像`/FF.mvc/116/MVt?m=01-12-2012`，但我的一些用户遇到了错误，他们有奇怪的路线，比如

```
/FF.mvc/116/ossw=((qncufuh)niah(`r)mt 
```

任何想法从这里

```
ossw=((qncufuh)niah(`r)mt 
```

来自（哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T03:20:12.390

您是否尝试过类似的方法：

```
Url = "/FF.mvc/116/MVt?m=" + HttpUtility.UrlEncode("01-12-2012") 
```

我不知道 char '-' 是否会出错。((qncufuh).... 可能来自一些奇怪的语言代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:54:09.797

我的预感是您的应用程序页面已被搜索（谷歌）引擎索引（可能违背您的意愿`:)`）。如果您在 google 中搜索任何内容，例如您的应用程序名称，`ossw=((qncufuh)niah(`当返回结果时，您将在地址栏中看到类似的 r)mt` 字符串。

![在此处输入图像描述](../Images/50c71ea241b9ed8ae110c08df0d19606.png)

一些员工在谷歌中搜索了页面链接并试图从那里访问它。

为了防止搜索蜘蛛索引您的应用程序页面`robots.txt`，请在您的应用程序中添加一个文件。

# jquery - Twitter BootStrap 模态窗口后备链接

> ID：13718628
> 
> 赞同：13
> 
> 时间：2012-12-05T07:57:15.727
> 
> 标签：jquery, css, twitter-bootstrap, modal-dialog

我正在使用 Twitter Bootstrap 模式窗口。以防模式窗口由于 js 错误而无法工作 - 有一个后备页面。如果模态窗口未加载，我如何确保页面已加载？

打开模态窗口的链接

```
<a href="#login-modal" data-toggle="modal" data-target="#login-modal">Login</a> 
```

模态窗口

```
<!-- Login Modal -->
        <div id="login-modal" class="modal hide fade landing-modal" tabindex="-2" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    ×
                </button>
                <h3>Login</h3>
            </div>
            <div class="modal-body">
                <form>
                    <div class="control-group">
                        <label for="email">Email Address</label>
                        <div class="controls">
                            <input class="input-medium" name="email" type="text"  />
                        </div>
                    </div>
                    <div class="control-group">
                        <label for="password">Password</label>
                        <div class="controls">
                            <input class="input-medium" name="password" type="password" />
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="checkbox">
                            <input type="checkbox" value="">
                            Remember me</label>
                    </div>
                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="button">
                                Login
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div> 
```

当我尝试将链接添加到 href 时，如下所示

```
 <a href="login.html" data-toggle="modal" data-target="#login-modal">Login</a> 
```

模态窗口中的链接页面加载！！

![在此处输入图像描述](../Images/11f196c817609b5910c67b8fef790489.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-05T17:35:25.837

查看 bootstrap-modal.js 中的第 223 行揭示了正在发生的事情：

```
, option = $target.data('modal') ? 'toggle' : $.extend({ remote:!/#/.test(href) && href }, $target.data(), $this.data()) 
```

使用数据 api 时，模式会检查`href`属性是否不是 id 并将其设置为`remote`选项的值。这会导致页面`data-target`最初加载内容，然后`href`作为内容加载`remote`内容。

因此，为避免将 href 内容加载到您需要`data-remote="false"`在链接上指定的模式中：

```
<a href="/some-login-page.html" data-toggle="modal" data-target="#login-modal" data-remote="false">Login</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T13:07:44.870

Modal 插件优先考虑`data-target`属性。然后，您可以使用`href`to 指向您想要的后备链接。由于 Modal 插件调用与 selector 匹配的点击事件`preventDefault`，**因此**`[data-toggle="modal"]`只有在禁用 JavaScript（或 Modal 插件未加载）时才会跟踪该链接。

但是，要记住的一件事是 Modal 插件确实使用该`href`属性来加载远程内容。要绕过该功能被激活，只需在值的末尾包含一个“#” `href`。

```
<a href="/some-login-page.html#" data-toggle="modal" data-target="#login-modal">Login</a> 
```

# php - 头文件中的函数文件的require_once

> ID：13718630
> 
> 赞同：1
> 
> 时间：2012-12-05T07:57:27.493
> 
> 标签：php

我有一个全局`include/header.php`文件，例如：

更新文件夹结构：

```
 /
   include/
            header.php
            functions.php

   content/
            show.php 
```

**包含/header.php**

```
<?php
  require_once('functions.php');
  $settings = blaa;
     ....
?> 
```

**包含/functions.php**

```
<?php
    function hello()
    {
      echo "hello world";
    }
?> 
```

现在是一个内容文件`content/show.php`

**内容/show.php**

```
<?php
  require_once('../include/header.php');

  echo "show page want to say: ";
  hello();
?> 
```

现在如果我查看 apache error_log`call to undefined function in content/show.php on line...`

我不知道为什么：-/

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:18:00.733

如果您将 header.php 代码调整为：

```
<?php

    define('INCDIR', str_replace('\\', '/', dirname(__FILE__)));
    require_once(INCDIR . '/functions.php'); 
```

从哪里包含它并不重要，它会不断找到包含文件夹的正确路径

# iphone - 与 Facebook Initial ViewController 的集成有一个 UITabBarController 而不是 UINavigationController

> ID：13718632
> 
> 赞同：0
> 
> 时间：2012-12-05T07:57:32.220
> 
> 标签：iphone, xcode, facebook-ios-sdk, ios6

标题基本概括了所有内容。我正在尝试创建一个界面，在与 Facebook 连接后，窗口会加载我的`HomeViewController`（我最初选择的`UITabBarItem`）。虽然，我不希望`UINavigationBar`通过，因为我已将 设置`HomeViewController`为`LoginViewController`的根视图。我为每个视图都有不同的导航栏项目，所以默认为那个是行不通的。我现在有这个代码。

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.mainViewController = [[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil];
    self.navigationController = [[UINavigationController alloc] initWithRootViewController:self.mainViewController];
    self.window.rootViewController = self.navigationController;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:48:08.820

经过一夜好眠后，我能够弄清楚。希望这可以帮助其他人！

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.tabBarController = [[UITabBarController alloc] init];

    // Initialize view controllers
    HomeViewController *homeViewController = [[HomeViewController alloc] initWithNibName:@"HomeViewController" bundle:nil];
    ConnectViewController *connectViewController = [[ConnectViewController alloc] initWithNibName:@"ConnectViewController" bundle:nil];
    PartyControlViewController *partyControlViewController = [[PartyControlViewController alloc] initWithNibName:@"PartyControlViewController" bundle:nil];
    MeViewController *meViewController = [[MeViewController alloc] initWithNibName:@"MeViewController" bundle:nil];
    MoreViewController *moreViewController = [[MoreViewController alloc] initWithNibName:@"MoreViewController" bundle:nil];

    [self.tabBarController setViewControllers:[NSArray arrayWithObjects:homeViewController, connectViewController, partyControlViewController, meViewController, moreViewController, nil]];

    // Customize Tab Bar
    UITabBarItem *homeTab = [[UITabBarItem alloc] initWithTitle:@"Home" image:nil tag:0];
    UITabBarItem *connectTab = [[UITabBarItem alloc] initWithTitle:@"Connect" image:nil tag:1];
    UITabBarItem *partyControlTab = [[UITabBarItem alloc] initWithTitle:@"Party Control" image:nil tag:2];
    UITabBarItem *meTab = [[UITabBarItem alloc] initWithTitle:@"Me" image:[UIImage imageNamed:@"person.png"] tag:3];
    UITabBarItem *moreTab = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemMore tag:4];

    [homeViewController setTabBarItem:homeTab];
    [connectViewController setTabBarItem:connectTab];
    [partyControlViewController setTabBarItem:partyControlTab];
    [meViewController setTabBarItem:meTab];
    [moreViewController setTabBarItem:moreTab];

    self.window.rootViewController = self.tabBarController;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:11:02.817

创建您的自定义标签栏类将其添加到 appDelegate

appDelegate.m

```
self.tabBarVC = [[[TabBarVC alloc] init] autorelease];
self.navController = [[[UINavigationController alloc]initWithRootViewController:self.tabBarVC]autorelease]; 
self.window.rootViewController = self.navController; 
```

TabBarVC.h

```
#import <UIKit/UIKit.h>

@interface TabBarVC : UITabBarController

@end 
```

标签栏VC.m

```
#import "TabBarVC.h" 
#import "ViewController1.h" 
#import "ViewController2.h"

@implementation TabBarVC

 - (void)viewDidLoad
{
    [super viewDidLoad]; 

    UIViewController *vc1 = [[UIViewController alloc] initWithNibName:@"ViewController1" bundle:nil];

    UIViewController *vc2 = [[UIViewController alloc] initWithNibName:@"ViewController2" bundle:nil];

    [self setViewControllers:[NSArray arrayWithObjects:vc1,vc2, nil]];  

}

@end 
```

# c# - 如何在 Exchange 2010 c# 中识别客户端类型

> ID：13718637
> 
> 赞同：2
> 
> 时间：2012-12-05T07:57:49.453
> 
> 标签：c#, exchange-server, exchange-server-2010, exchange-transport-agents

在我当前的工作项目中，我需要识别 Exchange 2010 中的客户端类型。

在我的场景中，我有 Exchange 代理，它观察 Exchange 服务器上的邮件流。如果传入的电子邮件包含某种类型的附件（例如 MS Word），代理需要根据客户端类型（Outlook、OWA、移动客户端...）执行特殊操作。

在 Internet 上冲浪 我想出了使用 Exchange 命令行管理程序命令获取此信息的能力，该命令从邮件跟踪日志中获取此信息。

但我想知道有没有办法通过我的 Exchange 代理中的 C# 来做到这一点。

# c# - Json.NET 中的 RawJSON 对象

> ID：13718638
> 
> 赞同：2
> 
> 时间：2012-12-05T07:57:50.987
> 
> 标签：c#, json.net, json-rpc

我想分两步反序列化 JSON-RPC 请求：

*第 1 步：*解析`id`并`method`放入基类
*第 2 步：*`params`根据方法解析为第二个类

*例子：*

```
interface IAction
{
    bool Exec();
}

class Request
{
    [JsonProperty("method")]
    public string Method;

    [JsonProperty("params")]
    public RawJson Params;

    [JsonProperty("id")]
    public RawJson Id;
}

class Whisper : IAction
{
    [JsonProperty("to")]
    public string To;

    [JsonProperty("msg")]
    public string Message;

    public bool Exec()
    {
        // Perform the whisper action
        return true;
    }
}

class Say : IAction
{
    [JsonProperty("msg")]
    public string Message;

    public bool Exec()
    {
        // Perform the say action
        return true;
    }

} 
```

代码（如果有这样的对象`RawJson`）

```
Request req = JsonConvert.DeserializeObject<Request>(s);
if( req.Method == "whisper" )
{
    Whisper whisper = RawJson.DeserializeObject<Whisper>();
    whisper.Exec();
} 
```

解决它的一种方法是如果 Json.NET 有某种原始 json 对象，但我找不到。

那么，我只是错过了原始对象还是有另一种好方法呢？

* * *

附言。该`id`值可以是任何值：null、string、int、array 等。它应该只在 json-rpc 响应中返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:03:38.960

您可以使用`dynamic`

```
dynamic dynJson = JsonConvert.DeserializeObject(s)
if(dynJson.method=="whisper")
{
    var to = dynJson.@params.to; //since params is reserved word
} 
```

这也是可以的

```
string json = "{method:'whisper',params:{to:'aaa',msg:'msg1'}}";

var jObj = JsonConvert.DeserializeObject(json) as JObject;
if (jObj["method"].ToString() == "whisper")
{
    var whisper = JsonConvert.DeserializeObject<Whisper>(jObj["params"].ToString());
} 
```

# c - 具有包含 C 中联合的结构的动态数组

> ID：13718639
> 
> 赞同：0
> 
> 时间：2012-12-05T07:57:53.093
> 
> 标签：c, struct, unions, dynamic-arrays

我对C有点陌生，所以请多多包涵。我有一个结构，其中包含其他大小可变的结构的联合，如下所示：

```
typedef struct _obj_struct {
    struct_type type;
    union obj {
        struct1 s1;
        struct2 s2;
        struct3 s3;
    } s_obj;
} obj_struct;

typedef struct _t_struct {
    unsigned int number_of_obj;
    obj_struct* objs;
    other_struct os;
    unsigned int loop;
} t_struct; 
```

struct_type 是我们在联合中使用的结构的类型。如何遍历 objs 中的所有元素？这是执行此操作的正确方法吗：

```
struct1 s1;
struct2 s2;
struct3 s3;

for (j=0; j<t_struct.number_of_obj; j++)
{
    switch (t_struct.obj[j].type) {
        case STRUCT1:
            s1 = t_struct.objs[j].s_obj.s1;
            break;
        case STRUCT2:
            s2 = t_struct.objs[j].s_obj.s2;
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:04:42.923

这`t_struct.obj[j].s_obj`是联合，而不是实际的结构。你必须使用`t_struct.obj[j].s_obj.s1`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:05:32.627

除非您需要每个结构的副本，否则请改用指针：

```
struct1 *s1;
// ...
s1 = &t_struct.objs[j].s_obj.s1; 
```

请注意，您还必须指定联合的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:40:31.887

在访问包含在结构中的联合成员时，一般语法是

```
structVariable.unionVariable.memberName 
```

如果您只是在末尾添加成员名称，那么您访问的方式就很好。所以正确的版本是：

```
switch (t_struct.objs[j].type) {
    case STRUCT1:
        s1 = t_struct.objs[j].s_obj.s1;
        break;
    case STRUCT2:
        s2 = t_struct.objs[j].s_obj.s2;
        break;
} 
```

# javascript - 帮助管理对话框堆栈的 JavaScript 库？

> ID：13718649
> 
> 赞同：0
> 
> 时间：2012-12-05T07:58:50.933
> 
> 标签：javascript, html, user-interface, dialog

在我们的应用程序中，我们正在解决对话层次结构的问题。考虑以下示例：用户打开一个对话框（对象列表），然后从第一个对话框中打开另一个对话框（例如详细信息），然后打开下一个对话框（例如对话框中的日期选择器）。

当用户点击对话框边界外会发生什么？

*   是否应该关闭并取消最顶层的对话框？
*   是否应该取消整个对话框堆栈？
*   或者，如果点击目标打开一个完全不同的对话框堆栈（应用程序中的项目列表），两个堆栈是否应该同时打开？

这些都是非常真实的用例，虽然我看到许多小型库在做绝对定位的覆盖（如 jQuery UI），但我没有看到任何可以帮助管理更复杂的对话框工作流的东西。目前我们还没有系统的方法来解决这些问题，我们主要是根据具体情况进行判断，这很容易出错。请提出一个解决方案、一个库或至少一些代码/项目来获得灵感。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:06:55.947

在任何框架中寻找 ZIndexManager 或任何类似的源代码，尝试模拟桌面 UX（例如 ExtJS），以获得这个想法。

jQuery 及其插件是为没有数十个堆叠窗口的轻量级 Web 界面创建的。

# android - Android Facebook 相册照片请求仅返回 25 张照片

> ID：13718651
> 
> 赞同：0
> 
> 时间：2012-12-05T07:58:58.243
> 
> 标签：android, facebook, json, facebook-android-sdk

所以我试图在和 Android 应用程序中显示相册中的 facebook 照片。

我遇到的问题是，如果我这样称呼：

```
facebookAsyncRunner.request(albumId + "/photos", new UserAlbumPhotosFetchListener(JSONResponse, photoView)); 
```

我得到一个包含 25 张照片的 JSONResponse。但是，我需要的不仅仅是 25 张照片……我需要相册中的所有照片。所以我试着这样称呼：

```
facebookAsyncRunner.request(albumId + "/photos?limit=50", new UserAlbumPhotosFetchListener(JSONResponse, photoView)); 
```

试图获得 50 张照片而不是 25 张照片。这没有用。相反，我什么都没有。我也尝试用limit = 0调用同样的东西，但这给了我相同的结果。具体来说： JSONResponse.getJSONArray("data") = []

有没有人知道发生了什么/如何从相册中请求超过 25 张照片？

谢谢！

编辑：我找到了解决方案！

`Bundle params = new Bundle(); params.putString("limit", "10"); facebookAsyncRunner.request(albumId + "/photos", params, new UserAlbumPhotosFetchListener(JSONResponse, photoView));`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:44:08.630

我在这里发布了一个答案，其中集成了 Endless Scrolling List 的分页：

[https://stackoverflow.com/a/13265776/450534](https://stackoverflow.com/a/13265776/450534)

它太大了，不能重新发布，所以我链接到原来的答案。答案实际上是一个完整的解决方案，关于如何对相册进行 Facebook 查询，获取所有照片（最初限制为 limit=10），然后在用户向下滚动到最后并添加时从相册中获取其他照片将它们添加到已获取的现有照片列表中。

它使用 a`GridView`而不是 a，`ListView`但逻辑保持完全相同。

或者，如果您只是在寻找*一种*获取照片的方法，这里有一个更简单的解决方案来帮助您入门。

```
try {
    String test = Utility.mFacebook.request("/10151498156121729/photos&access_token=YOUR_ACCESS_TOKEN?limit=1");
    Log.e("TEST", test);
} catch (Exception e) {
    // TODO: handle exception
} 
```

*上面代码块中使用的相册 ID (10151498156121729) 是 Facebook 公共相册。*

我使用 3.0 之前的 Facebook SDK 的 HackBook 示例中的 Utility 类。如果您使用的是 3.0 SDK，我认为您需要`Utility.mFacebook.request`用 Facebook 类的实例替换该位

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:32:54.073

您应该需要使用分页来获取超过 25 张照片。您只能获得 25 个项目作为单个查询的结果。要加载接下来的 25 个，您应该使用如下代码：

```
facebookAsyncRunner.request(albumId + "/photos?offset=25&limit=25", new UserAlbumPhotosFetchListener(JSONResponse, photoView)); 
```

这将返回接下来的 25 个项目，在本例中是从第 25 位到第 50 位的照片。

以这种方式尝试..希望这可以解决您的问题。

# clarion - 访问和修改 clarion .dat 文件

> ID：13718655
> 
> 赞同：6
> 
> 时间：2012-12-05T07:59:20.330
> 
> 标签：clarion

有谁知道如何访问和编辑 .dat clarion 文件？似乎 clarion 是 DOS 的数据库。这些表存储在 DAT 文件中。我需要更新该文件的几个字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:42:52.900

对于简单的编辑，您可以使用 CSCN.EXE 实用程序。这是一个 DOS 应用程序，它在 Windows 32 位中运行。[在此处](http://sca.mx/ftp/cscn.zip)
下载（尝试 F1）。

对于编程访问，您需要使用[Clarion for Windows进行开发](http://softvelocity.com)

# python - 我可以在 django 的不同文件中划分模型吗

> ID：13718656
> 
> 赞同：8
> 
> 时间：2012-12-05T07:59:25.497
> 
> 标签：python, django, django-models

目前我所有的模型都在m​​odels.py中。变得非常混乱。我可以有一个单独的文件， `base_models.py`这样我就可以把我不想碰的主要模型放在那里

视图也是相同的情况并放在单独的文件夹中，而不是开发新的应用程序

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T08:21:35.640

是的，这是可行的。虽然它不是特别漂亮：

使模型成为一个模块，因此您的目录结构如下所示：

```
- models
|- __init__.py
|- some_model.py
|- some_other_model.py
|- ... 
```

现在，神奇之处在于`__init__.py`模型中的一些额外内容。`__init__.py`：

```
from some_model import SomeModel
from some_other_model import SomeOtherModel

__all__ = [ 
    'SomeModel',
    'SomeOtherModel',
] 
```

some_model.py：

```
class SomeModel(models.Model):
    class Meta(object):
        app_label = 'yourapplabel'
        db_table = 'yourapplabel_somemodel' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:25:52.360

acjohnson55 所说的一切，加上您需要在每个模型的 Meta 类中指定 app_label 属性的事实。

github上实际示例的链接： [https ://github.com/stefanfoulis/django-filer/tree/develop/filer/models](https://github.com/stefanfoulis/django-filer/tree/develop/filer/models)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:23:11.233

是的，只需创建一个名为的文件夹`models`，然后在该文件夹中放置所有分离的模型文件。您需要在文件夹中放置一个名为`__init__.py`的`models`文件，以便将其视为`models`模块。在`__init__.py`, 中用于`from ... import ...`将您想要的名称直接放在 中`yourapp.models`，否则您必须将它们导入为`yourapp.models.base_model`，或者您使用的任何子模块名称。

此外，在每个模型中，您必须添加一个称为 Meta 属性[`app_label = 'yourapp'`](https://docs.djangoproject.com/en/dev/ref/models/options/#app-label)以确保您的模型被识别为应用程序的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T08:25:53.353

您可以像这样分隔模型文件：
-------models/
-------------- **init** .py
-------------- usermodels .py
--------------其他模型.py

在**init** .py 中：
---------------from usermodels import *
---------------from othermodel import *
和 *models. py , 添加 META 类:
--------class Meta:
--------------app_label = 'appName'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-27T07:17:01.710

这就是我通常的做法：

```
# Folder structure:
#==================
# models/
#   __init__.py
#   products.py
#   stocks.py

# In init.py (don't forget the period before model file name)
#===========
from .products import Product
from .stocks import Stock

__all__ = [
    'Product',
    'Stock',
]

# And run "py manage.py makemigrations" and "py manage.py migrate" as normal 
```

# javascript - 有谁知道为什么我的画布标签不会出现在 IE 8 中？

> ID：13718657
> 
> 赞同：-1
> 
> 时间：2012-12-05T07:59:27.280
> 
> 标签：javascript, html, internet-explorer, html5-canvas, excanvas

> **可能重复：**
> [如何在 IE 中使用 HTML5 画布元素？](https://stackoverflow.com/questions/1332501/how-can-i-use-the-html5-canvas-element-in-ie)

我不确定我做错了什么。我按照它说的做了，但没有任何效果。我正在使用网格系统，但我认为这不是问题所在。而且我也不认为这是我的安全设置。如果有帮助，这是我的 HTML 和 Javascript。

HTML

```
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Zack Vivier</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--[if IE]><script type="text/javascript" src="js/excanvas.js"></script><![endif]-->
    <!-- enable HTML5 elements in IE7+8 -->
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <![endif]-->
    <!-- 1140px Grid styles for IE -->
    <!--[if lte IE 9]><link rel="stylesheet" href="styles/ie.css" type="text/css" media="screen" /><![endif]-->
    <link href="styles/styles.css" rel="stylesheet" type="text/css">
    <link href="styles/1140.css" rel="stylesheet" type="text/css">
    <!--css3-mediaqueries-js - http://code.google.com/p/css3-mediaqueries-js/ - Enables media queries in some unsupported browsers-->
    <script type="text/javascript" src="js/css3-mediaqueries.js"></script>
    <script src="js/js.js"></script>
  </head>
  <body>
    <header>
      <h1 class="hidden">Zack Vivier Home</h1>
      <div class="container">
        <div class="row">
          <div class="fivecol">
            <div class="logo"><img src="images/logo.png" alt="zack vivier logo"></div>
          </div>
          <div class="sevencol last">
            <nav>
              <h2 class="hidden">Site Navigation</h2>
              <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="info.html">Information</a></li>
                <li><a href="portfolio.html">Portfolio</a></li>
                <li><a href="contact.html">Contact</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="twelvecol last">
          <div class="lineone"></div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="twelvecol last">
          <div class="caption">
            <h4 id="tagLine">Image Number</h4>
          </div>
          <div class="slideshow">
            <canvas id='showCanvas' width='1022' height='397'>Canvas Not Supported</canvas>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="threecol last">
          <div class="about"><h2>About Me</h2></div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="twelvecol last">
          <div class="linetwo"></div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="sevencol last">
          <div class="contenthome">
            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; My Name is Zack Vivier; currently I am 19</p>
            <p>years old and attend Fanshawe College for Interactive</p>
            <p>Media Design and Production. I am a Designer,</p
            <p>Programmer, Musician, Video Editor, and Animator.</p>
          </div>
        </div>
      </div>
    </div>
    <h1 class="hidden">footer</h1>
    <div class="container">
      <div class="row">
        <div class="twelvecol last">
          <div class="footer">
            <h3>Copyright &copy; 2012 Zack Vivier. All Rights Reserved.</h3>
          </div>
        </div>
      </div>
    </div>
  </body>
</html> 
```

Javascript

```
// JavaScript Document
var imagePaths = new Array("images/photo_1.png", "images/game_web.jpg", "images/tattoo.jpg");
var whichImage = new Array("Graffti Project", "Game WebSite", "Tattoo Project");
var showCanvas;
var showCanvasCtx;
var imageText;
var currentImage = 0;
var currentImageText = 0;
var img = document.createElement("img");
function init() {
  imageText=document.getElementById('tagLine');
  showCanvas = document.getElementById('showCanvas');
  showCanvasCtx = showCanvas.getContext('2d');
  img.setAttribute('width','1022');
  img.setAttribute('height','397');
  switchImage();
  setInterval(switchImage, 2500);
}
function switchImage() {
  imageText.innerHTML = whichImage[currentImageText++];
  img.setAttribute('src',imagePaths[currentImage++]);
  img.onload = function() {
    if (currentImage >= imagePaths.length) {
      currentImage = 0;
      currentImageText = 0;
    }
    showCanvasCtx.drawImage(img,0,0,1022,397);
  }
  window.onload = init(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:18:38.297

Canvas 是 IE8 不支持的 HTML5 元素。您的文档类型也是错误的，因为您使用的是 HTML5 将其设置为：“”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:19:01.993

正如评论中所说：IE8 将不支持 canvas 标签。但是有一些插件可以模仿它的行为。我曾经使用过这个：http: [//flashcanvas.net/](http://flashcanvas.net/)，它可以完成这项工作，还有另一个叫做[http://code.google.com/p/explorercanvas/](http://code.google.com/p/explorercanvas/)。但我对此没有任何评论，从未使用过，不知道会发生什么。

只需**注意一点**：后备方案有其局限性，但就 2D 绘图而言，我认为这些对你有用

# android - 无法在外部存储中创建目录

> ID：13718658
> 
> 赞同：1
> 
> 时间：2012-12-05T07:59:32.187
> 
> 标签：android, directory, save, storage, store

我想让应用程序创建一个新目录来将下载的图像存储在 sdcard 中。我尝试了一些方法，但似乎仍然无法正常工作。我也在 android manifest 中包含了外部存储的权限。任何意见将不胜感激。

```
 Bitmap bm = null;
        InputStream in;
            in = new java.net.URL("http://blogs.computerworld.com/sites/computerworld.com/files/u177/google-nexus-4.jpg").openStream();
            bm = BitmapFactory.decodeStream(new PatchInputStream(in));
            File file = new File(Environment.getExternalStorageDirectory() + "/map");
            file.mkdirs();
            File outputFile = new File(file, "Image"+NumIncrease);
            FileOutputStream fos = new FileOutputStream(outputFile); 
```

以下是我从运行中得到的。

```
12-05 15:55:25.566: D/skia(4244): ---- read threw an exception
12-05 15:55:25.585: D/skia(4244): ---- read threw an exception
12-05 15:55:25.585: W/System.err(4244): java.io.IOException: Is a directory
12-05 15:55:25.585: W/System.err(4244):     at org.apache.harmony.luni.platform.OSFileSystem.read(Native Method)
12-05 15:55:25.585: W/System.err(4244):     at dalvik.system.BlockGuard$WrappedFileSystem.read(BlockGuard.java:165)
12-05 15:55:25.585: W/System.err(4244):     at java.io.FileInputStream.read(FileInputStream.java:290)
12-05 15:55:25.585: W/System.err(4244):     at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:166)
12-05 15:55:25.863: E/MediaStore(4244): Failed to create thumbnail, removing original 
```

**编辑** 下面是我如何处理位图。

```
bm.compress(Bitmap.CompressFormat.JPEG, 85, fos); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:28:41.167

以下几点可能对您有所帮助

*   可能会抛出异常，因为没有 MediaCard 子目录。您应该检查路径中的所有目录是否存在。
*   在清单中添加权限以使其正常工作..
*   您永远不应使用“/sdcard/”作为常量，因为制造商可能会决定将 SD 卡安装到另一条路径。始终使用 Environment.getExternalStorageDirectory(); 反而。

进一步阅读

*   [http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_EXTERNAL_STORAGE)
*   [Android将文件保存到外部存储](https://stackoverflow.com/questions/7887078/android-saving-file-to-external-storage)
*   [Android 写入 sd 卡文件夹](https://stackoverflow.com/questions/3551821/android-write-to-sd-card-folder)

# c# - 内置程序集方法的方法体在哪里

> ID：13718660
> 
> 赞同：-2
> 
> 时间：2012-12-05T07:59:38.950
> 
> 标签：c#, methods, assemblies

考虑以下代码：

```
int i = 0;        
private void AddValue()
{
    i++;
} 
```

当我调用 AddValue 方法时，它有一些在 i 中加 1 的方法体。现在考虑一下：

```
 ArrayList ar = new ArrayList(); 
```

当我调用 ar.Add(1) 时，它会在 ar 中添加对象 1。当我右键单击添加并按转到定义时，我看到了

```
public virtual int Add(object value); 
```

没有这样的方法体在 ar 中添加 1 作为对象，即 ArrayList。我的问题是 ArrayList.Add() 的方法体到底在哪里。当它似乎没有这样的 MethodBody 时，它到底是如何向 ArrayList 添加一个对象的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:03:07.183

如果您查看代码选项卡的标题，它会显示`[from metadata]`. 这不是您正在查看的实现，而是*“在只读缓冲区中显示为 C# 源代码的元数据”*。另请参阅：[元数据作为源](http://msdn.microsoft.com/en-us/library/ms236403.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:12:38.560

实现在dll内部。您可以使用任何 .NET 反编译器来查看代码。有许多免费的反编译器，只需使用搜索即可。

# asp.net-mvc - 使用数据源加载 Kendo UI 面板栏

> ID：13718665
> 
> 赞同：0
> 
> 时间：2012-12-05T07:59:59.950
> 
> 标签：asp.net-mvc, kendo-ui, kendo-panelbar

我正在尝试使用数据源动态加载面板栏。实际上在文档中我只使用了 ajax 的信息，所以我已经实现了这样的，

```
 $.ajax({                        
                type: "POST",
                url: '/Home/GetPanelInfo',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (json) {

                    $("#panelBar").kendoPanelBar({
                        expandMode: "single",
                        id: "usr_id",
                        dataSource: [{ text: json[0].groups_name, expand: true, contentUrl: "/Home/Index" },
                                     { text: json[1].groups_name, expand: true, contentUrl: "/Home/Index" },
                                     { text: json[3].groups_name, expand: true, contentUrl: "/Home/Index"}]
                    });
                }
}); 
```

但是这样我无法显示所有值，我认为这不是加载面板栏以显示所有值的正确方法，如何在面板栏中显示所有值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:35:18.123

你应该迭代你的结果数组。您可以使用[jQuery Map 函数](http://api.jquery.com/jQuery.map/)，例如：

```
$.ajax({                        
            type: "POST",
            url: '/Home/GetPanelInfo',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (json) {
                var dataSource = $.map(json, function(obj){
                    return {
                        text: obj.groups_name,
                        expand: true,
                        contentUrl: "/Home/Index" 
                    };
                });

                $("#panelBar").kendoPanelBar({
                    expandMode: "single",
                    id: "usr_id",
                    dataSource: dataSource 
                });
            }
}); 
```

# jquery-ui - Chrome Ext 和 JQuery 资源必须列在 web_accessible_resources 清单键中，才能被扩展之外的页面加载

> ID：13718669
> 
> 赞同：1
> 
> 时间：2012-12-05T08:00:15.907
> 
> 标签：jquery-ui, google-chrome-extension

我有将 jquery-1.8.3.min.js 和 jquery-ui.js 和 jquery-ui-base64.css 加载到内容脚本中的 Chrome 扩展程序。
我在内容脚本而**不是**后台脚本中使用它们。
我设置了配置（我认为）正确但是当我在控制台中看到我收到错误时，我可以在窗口中看到图标很好，但我仍然在 Chrome 窗口中收到错误。
它是使用 23.0.1271.95 m 版本的 chrome im 中的错误吗？

这是清单：

```
{
"name":"Sample communication from content to background",
"description":"This is a sample for Simulating communication from content to background",
"manifest_version":2,
"version":"2",
"background":{
    "scripts":["background.js"]
},
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["jquery-1.8.3.min.js","jquery-ui.js","client.js"],
      "run_at":"document_end",
      "all_frames": true,
      "css":["jquery-ui-base64.css"]
    }
  ],
"web_accessible_resources": [
    "client.js","jquery-1.8.3.min.js","jquery-ui.js","jquery-ui-base64.css",
    "images/ui-bg_flat_0_aaaaaa_40x100.png",
    "images/ui-bg_flat_75_ffffff_40x100.png",
    "images/ui-bg_glass_55_fbf9ee_1x400.png",
    "images/ui-bg_glass_65_ffffff_1x400.png",
    "images/ui-bg_glass_75_dadada_1x400.png",
    "images/ui-bg_glass_75_e6e6e6_1x400.png",
    "images/ui-bg_glass_95_fef1ec_1x400.png",
    "images/ui-bg_highlight-soft_75_cccccc_1x100.png",
    "images/ui-icons_222222_256x240.png",
    "images/ui-icons_2e83ff_256x240.png",
    "images/ui-icons_454545_256x240.png",
    "images/ui-icons_888888_256x240.png",
    "images/ui-icons_cd0a0a_256x240.png"
  ],
"permissions": [ 
        "unlimitedStorage",
        "http://*/",
        "<all_urls>",
        "tabs"
   ]
} 
```

在 jquery-ui-base64.css 中，我将所有 imags url 加载更改为如下内容：

```
 url(chrome-extension://__MSG_@@extension_id__/chrome-extension://__MSG_@@extension_id__/images/ui-bg_flat_75_ffffff_40x100.png) 
url(chrome-extension://__MSG_@@extension_id__/chrome-extension://__MSG_@@extension_id__/images/ui-bg_highlight-soft_75_cccccc_1x100.png) 
```

但我仍然收到错误：

```
Denying load of chrome-extension://mmoccjinakdjcmhjdjghhjnihbfkkgkp/chrome-extension://mmoccjinakdjcmhjdjghhjnihbfkkgkp/images/ui-bg_flat_75_ffffff_40x100.png. Resources must be listed in the web_accessible_resources manifest key in order to be loaded by pages outside the extension.
Denying load of chrome-extension://mmoccjinakdjcmhjdjghhjnihbfkkgkp/chrome-extension://mmoccjinakdjcmhjdjghhjnihbfkkgkp/images/ui-bg_highlight-soft_75_cccccc_1x100.png. Resources must be listed in the web_accessible_resources manifest key in order to be loaded by pages outside the extension. 
```

图像在图像目录中，我可以在我创建的 JQuery 对话框中看到图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:48:55.717

**编辑 1)**

以下代码适用于所有背景\扩展相关的 DOM 和 css

***清单.json***

*定义了所有权限的简单 json 结构*

```
{
"name": "My extension",
"version": "1.0",
"permissions": [
    "http://*/*", "tabs", "https://*/*"
],
"browser_action": {
    "default_icon": "icon.jpg",
    "default_popup":"popup.html"
},
"manifest_version": 2
} 
```

***popup.html***

*浏览器操作弹出窗口的链接样式表*

```
<html>
<head>
<link rel="stylesheet" href="styles.css"></link>
</head>
<body>
</body>
</html> 
```

***样式.css***

*使用 url() 作为图像路径*

```
body{
    width : 500px;
    height: 500px;
    background-image: url('img/icon.jpg');
} 
```

让我知道它是否仍然失败

![在此处输入图像描述](../Images/470676f5c7d70d6da8c53ef00b45525e.png)

> **编辑 2)**

通过内容注入图像

**解决方案一）**

使用[此转换器](http://webcodertools.com/imagetobase64converter)，您可以将图像转换为 base64 字符串，并且可以将它们用作

> { 背景图像：url（数据：图像/png；base64，iVBORw ........ };

**解决方案 b)**

以下代码将不起作用，因为

```
{
background-image:url(chrome.extension.getURL('img/icon.jpg'));
} 
```

[chrome.extension.getURL()](https://developer.chrome.com/extensions/extension.html#method-getURL)未为 css 定义。

因此，我使用 js 注入背景图像\任何图像 URL（因为它们具有动态 URL）

***清单.json***

*简单的 json 结构，为内容脚本和 css 定义了所有权限*

```
{
"name": "My extension",
"version": "1.0",
"permissions": [
    "http://*/*", "tabs", "https://*/*"
],
 "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js":["content.js"],
      "css": ["styles.css"]
    }
  ],
"web_accessible_resources": [
    "img/icon.jpg"
],  
"manifest_version": 2
} 
```

***内容.js***

*作为一个简单的用例准备了一个 div 并添加了背景 Image 属性*

```
var newdiv = document.createElement('div');
newdiv.setAttribute("id", "moot450");
document.body.appendChild(newdiv);
document.getElementById('moot450').style.backgroundImage = "url(" + chrome.extension.getURL('img/icon.jpg') + ")"; 
```

***样式.css***

*注入另一个用于精炼注入的 div 的 css*

```
#moot450{
    position:absolute; 
    width:500px;
    height:500px;
    /*background-image:url(chrome-extension://faaligkhohdchiijdkcokpefpancidoo/img/icon.jpg);*/
} 
```

**输出**

*注入后从谷歌页面截取的屏幕截图*

![在此处输入图像描述](../Images/ddc7a4f9129bf79d46430b582138af48.png)

让我知道您是否需要更多信息或它是否失败。

# javascript - 如何将 servlet 生成的图像传递给 FB.api imgURL 函数？

> ID：13718671
> 
> 赞同：0
> 
> 时间：2012-12-05T08:00:22.037
> 
> 标签：javascript, html, jakarta-ee, facebook-javascript-sdk

我的代码在这里

```
var imgURL="http://localhost:8084/WebApplication6/imagefromservlet";
FB.api('/me/photos', 'post', {
    message:' coffee',
    url:imgURL        
}, function(response){
    alert('getting photo');
    if (!response || response.error) {
      alert('Error occured');
    } else {alert('OK'); 
```

这向我展示了错误问题是我如何将 servlet 生成的图像传递给这个“imgURL”，以便它可以正常工作。Servlet“imagefromservlet”为我生成编辑后的图像。更正这个或告诉我正确的方法吗？

# android - 使用 mediaelement 在 Android 上流式传输 hls

> ID：13718678
> 
> 赞同：2
> 
> 时间：2012-12-05T08:01:20.723
> 
> 标签：android, streaming, mediaelement.js

我正在尝试使用 mediaelement.js UI 在 iPad、iPhone 和 Android 中流式传输 hls。

html 如下所示（抱歉，我无法公开我们的 hls 链接）：

```
<video src="testinghls.m3u8"></video> 
```

和脚本：

```
$('video').mediaelementplayer({
      // if the <video width> is not specified, this is the default
      defaultVideoWidth: 480,
      // if the <video height> is not specified, this is the default
      defaultVideoHeight: 270,
      // specify to force MediaElement to use a particular video or audio type
      type: 'application/x-mpegURL',
      // the order of controls you want on the control bar (and other plugins below)
      features: ['playpause','progress','volume','fullscreen'],
      // Hide controls when playing and mouse is not over the video
      alwaysShowControls: false,
      // force iPad's native controls
      iPadUseNativeControls: false,
      // force iPhone's native controls
      iPhoneUseNativeControls: false,
      // force Android's native controls
      AndroidUseNativeControls: false
    }); 
```

这适用于 iPad 和 iPhone，但不适用于 Android。它只是以某种方式检测到视频无法播放并退回到下载链接。

除了我尝试了带有 hls 的纯视频标签之外，无论是否使用 iOS 和 Android 设备中的类型，它都可以正常工作，如下面的两个：

```
<video src="{{c.get('hls')}}" type="application/x-mpegURL" style="width:320px;height:185px" controls></video>
<video src="{{c.get('hls')}}" style="width:320px;height:185px" controls></video> 
```

我应该如何配置 Mediaelement 以使其工作？或者也许对 Mediaelement.js 进行一些调整/修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:13:35.157

可能是视频编码问题。Android 需要某种编码，这是 MediaElement.js 中的一个值得注意的问题

[对此](https://github.com/johndyer/mediaelement/issues/545)提出了解决方案

# web-applications - Spring 3 MVC 示例未在 Apache Tomcat 7.0 中运行

> ID：13718681
> 
> 赞同：0
> 
> 时间：2012-12-05T08:01:29.150
> 
> 标签：web-applications, spring-mvc

所以基本上我试图在我的系统上运行一个基本的 Spring 3 MVC 示例。然而，这个例子很固执。我按照这里提到的步骤：http: [//viralpatel.net/blogs/spring-3-mvc-create-hello-world-application-spring-3-mvc/](http://viralpatel.net/blogs/spring-3-mvc-create-hello-world-application-spring-3-mvc/)

在我看来，映射明智。但是，当我在 Eclipse 或 Tomcat 服务器中直接在 Apache Tomcat 7.0 上运行它时，会出现以下错误：

```
**type** Status report

**message** /Spring3MVC/

**description** The requested resource is not available. 
```

控制台日志如下所示：

```
Dec 5, 2012 1:13:04 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre6\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:/Program Files/Java/jre6/lib/i386;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\Intel\DMIX;C:\Program Files\TortoiseSVN\bin;D:\apache-maven-2.2.1\bin;.
Dec 5, 2012 1:13:04 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Spring3MVC' did not find a matching property.
Dec 5, 2012 1:13:04 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Dec 5, 2012 1:13:04 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Dec 5, 2012 1:13:04 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 402 ms
Dec 5, 2012 1:13:04 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Dec 5, 2012 1:13:04 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.33
Dec 5, 2012 1:13:05 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://www.springframework.org/tags/form is already defined
Dec 5, 2012 1:13:05 PM org.apache.catalina.startup.TaglibUriRule body
INFO: TLD skipped. URI: http://www.springframework.org/tags is already defined
Dec 5, 2012 1:13:05 PM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
Dec 5, 2012 1:13:05 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'spring'
Dec 5, 2012 1:13:05 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'spring': initialization started
Dec 5, 2012 1:13:05 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing WebApplicationContext for namespace 'spring-servlet': startup date [Wed Dec 05 13:13:05 IST 2012]; root of context hierarchy
Dec 5, 2012 1:13:06 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from ServletContext resource [/WEB-INF/spring-servlet.xml]
Dec 5, 2012 1:13:06 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a0219e: defining beans [helloWorldController,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,viewResolver,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
Dec 5, 2012 1:13:06 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/hello] onto handler 'helloWorldController'
Dec 5, 2012 1:13:06 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/hello.*] onto handler 'helloWorldController'
Dec 5, 2012 1:13:06 PM org.springframework.web.servlet.handler.AbstractUrlHandlerMapping registerHandler
INFO: Mapped URL path [/hello/] onto handler 'helloWorldController'
Dec 5, 2012 1:13:06 PM org.springframework.web.servlet.FrameworkServlet initServletBean
INFO: FrameworkServlet 'spring': initialization completed in 469 ms
Dec 5, 2012 1:13:06 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Dec 5, 2012 1:13:06 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Dec 5, 2012 1:13:06 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1554 ms 
```

我唯一能看到的是在**Dec 5, 2012 1:13:04 PM**提到的警告，但显然这不应该干扰应用程序。

我在 Web-INF/ 的 web.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>Spring3MVC</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>
            org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
</web-app> 
```

我在 Web-Inf/ 的 spring-servlet.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans

http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

http://www.springframework.org/schema/context

http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan
        base-package="net.viralpatel.spring3.controller" />

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.JstlView" />
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>
</beans> 
```

我的 helloWorldController 如下：

```
package net.viralpatel.spring3.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class HelloWorldController {

    @RequestMapping("/hello")
    public ModelAndView helloWorld() {

        String message = "Hello World, Spring 3.0!";
        return new ModelAndView("hello", "message", message);
    }
} 
```

最后我的 index.jsp 在 Web-INF/ 而我的 hello.jsp 在 Web-INF/jsp

我刚从 Spring 开始，但据我所知，这个应用程序应该运行。还比较了网上的其他例子，它们的结构相似。谷歌搜索错误只是说 servlet 的映射不存在，这是不正确的。希望有人在那里有解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T10:53:30.677

您已经在 web.xml 中定义了 *.html。因此，您需要使用 URL hello.html 访问它或将 url-pattern 更改为 / only。

# javascript - 通过主机页面传递数据错误：JavaScriptObject$ 无法转换为 com.pkg.model

> ID：13718682
> 
> 赞同：0
> 
> 时间：2012-12-05T08:01:30.167
> 
> 标签：javascript, gwt, casting

我按照这篇文章使用主机页将数组传递给客户端：

```
https://developers.google.com/web-toolkit/articles/dynamic_host_page 
```

目前，我可以在firebug中看到关注内容

```
<html style="overflow: hidden;">
<head>
......
    <script type="text/javascript">
       var rcmdFriends=[{"Name":"Friend-0","Image":"url"}];
    </script>
</head>
......
</html> 
```

然后我尝试使用这些代码从主机页面获取 js 变量（实际上是一个 json 数组）并将其打印给用户：

```
 //get array from host page
private native JsArrayExt<People> getRecommendedFriends()/*-{
    return $wnd.rcmdFriends;
}-*/;

@Override
public void onModuleLoad()
{
    final FlowPanel fPanel = new FlowPanel();
    JsArrayExt<People> channels = getRecommendedFriends();
    for (int i = 0, len = channels.length(); i < len; i++)
    {
                 //"print" name to user
         fPanel.add(new Label(channels.get(i).getName()));
    }
    RootPanel.get().add(fPanel);
}

    //model definition
    @SingleJsoImpl(PeopleImpl.class)
    public interface People extends HasName
    {
        String getImage();
        void setImage(String Image);
    } 
```

但是得到了这个错误：

```
java.lang.ClassCastException: com.google.gwt.core.client.JavaScriptObject$ cannot be cast to com.pkg.People 
```

奇怪的是，我已经可以看到“通道”的长度是 1，为什么会出现这个转换错误？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:25:59.320

您不能转换为普通的 Java pojo。您必须实现[覆盖类型](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsOverlay)

```
public class PersonJSON extends JavaScriptObject {

    protected PersonJSON() {
    }

    public final native String getName() /*-{
        return this.Name;
    }-*/;

    public final native String getImage() /*-{
        return this.Image;
    }-*/;
} 
```

然后你可以打电话

```
JsArray<PersonJSON> channels = getRecommendedFriends(); 
```

并从 PersonJSON 元素中读出值；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:23:06.580

假设`JsArrayExt`是[为什么我不能为覆盖类型轻量级集合定义接口？](https://stackoverflow.com/q/11202382/116472)，我想您不使用显式 JSO 子类这一事实会混淆 DevMode。

因为您直接调用了 JSNI 方法，所以我不明白您为什么不使用`JsArrayExtImpl<PersonImpl>`我认为 Just Work™ 的方法；在这里使用接口没有意义。

如果你真的不能让它工作，我建议使用 AutoBeans 代替（不幸的是它需要在 DevMode: 中进行一个小的序列化/解析舞蹈`AutoBeanCodex.decode(factory, Person.class, new JSONObject(rawJso).toString())`，而在 prod 模式下你可以简单地使用`AutoBeanCodex.decode(factory, Person.class, (JsoSplittable) rawJso)`）。在您的情况下，它需要另一个*舞蹈*，因为您使用数组作为*根*对象；请参阅[GWT Autobean - 如何处理列表？](https://stackoverflow.com/q/13651068/116472)

# javascript - 2 个 JavaScript 事件按顺序触发 - 第 2 个被忽略

> ID：13718684
> 
> 赞同：1
> 
> 时间：2012-12-05T08:01:36.003
> 
> 标签：javascript, triggers, onclick, onchange

我在页面上有一个输入文本框和一个按钮。在文本框上有一个 onchange 事件，在按钮上有一个 onclick。每个事件触发一个完全独立的不相关方法。

问题如下：如果用户对文本框进行了更改，则立即单击按钮-触发了 onchange，但我失去了 onclick。我可以避免这种情况吗？我需要这两个事件发生。谢谢

更新：我在本地尝试了一个非常简单的测试：

```
<input type="text" onchange="alert1();"/>
<input type="button" onclick="alert2();"/> 
```

js在哪里：

```
<script type="text/javascript">
function alert1()
{
alert("1");
}
function alert2()
{
alert("2");
}
</script> 
```

更改文本并立即单击按钮只会触发第一个事件。有没有办法强制第二个事件发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:40:51.100

尝试这个，

```
function showAlert1() {
    setTimeout(function(){ alert("ONE") }, 250);
}

function showAlert2() {
    setTimeout(function(){ alert("TWO") }, 250);
}​ 
```

它缓冲每个函数的执行，以便可以触发按钮的 onclick。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:45:18.350

一个`alert`（连同其他模态对话框）是一种特殊情况，因为它会暂停脚本其余部分的执行，直到用户单击“确定”。这就是为什么你的第二个处理程序从裂缝中掉下来的原因。

如果你`document.write('foo')`在你的处理程序中做了类似的事情，你就不会遇到这个问题。

# android - Google Mobile App Analytics v2 中我的异常的描述在哪里？

> ID：13718688
> 
> 赞同：1
> 
> 时间：2012-12-05T08:01:53.820
> 
> 标签：android, mobile, google-analytics

我在我的应用程序中使用 Google Mobile App Analytics v2。

我创建了自己的 ExceptionParser 以获得更好的描述。

```
@Override
public String getDescription(String threadName, Throwable t) {
    StringBuilder messageBuilder = new StringBuilder();

    // Header
    messageBuilder.append(getHeader());

    // Message
    messageBuilder.append("Message \n\n");
    messageBuilder.append(t.getMessage());
    messageBuilder.append("\n\n");

    // Stack trace
    messageBuilder.append("Stacktrace \n\n");
    StackTraceElement[] stackTraceElements = t.getStackTrace();
    for (int i = 0; i < stackTraceElements.length; i++) {
        StackTraceElement stackTraceElement = stackTraceElements[i];
        messageBuilder.append(stackTraceElement.getClassName());
        messageBuilder.append(".");
        messageBuilder.append(stackTraceElement.getMethodName());
        messageBuilder.append("(");
        messageBuilder.append(stackTraceElement.getFileName());
        messageBuilder.append(":");
        messageBuilder.append(stackTraceElement.getLineNumber());
        messageBuilder.append(")\n");
    }
    messageBuilder.append("\n");

    // Thread
    messageBuilder.append("Thread \n\n");
    messageBuilder.append(threadName);

    String message = messageBuilder.toString();
    try {
        MyApplication.getFileLogger().e(message);
    } catch (Throwable e) {
        // Log.e(TAG,"Exception: " + e.getMessage(),e);
    }
    return message; 
```

我可以在分析控制台的哪里看到这个描述？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:41:48.430

如果您不想使用： [https ://developers.google.com/analytics/devguides/collection/android/v2/exceptions](https://developers.google.com/analytics/devguides/collection/android/v2/exceptions)

根据：

[https://developers.google.com/analytics/devguides/collection/android/v2/events](https://developers.google.com/analytics/devguides/collection/android/v2/events)

```
trackEvent(category, action, opt_label, opt_value) 
```

> 类别（必需）您为要跟踪的对象组提供的名称。
> 
> label（可选）一个可选字符串，用于为事件数据提供额外的维度。

接着：

> 查看报告。设置事件跟踪并在您的站点上运行一天后，请转到报告的内容部分并查看事件跟踪。

我猜 Catgory 应该是一个例外，您可以在 label 参数中提供您的信息。

我不知道允许的最大长度，但应该足够了..

```
 EasyTracker.getTracker().trackEvent(
       "Crash",  // Category
       "WatheverYouWant",  // Action
       getDescription(thread,e), // Label
       0);       // Value 
```

# c++ - 从文件 C++ 将双精度集导入数组

> ID：13718689
> 
> 赞同：0
> 
> 时间：2012-12-05T08:01:53.873
> 
> 标签：c++, arrays, vector, ifstream

我试图完成的是使用“ifstream”打开一个外部 .dat 文件，然后将每个双精度读入向量数组。

是）我有的：

```
//Setup I/O
ifstream fileIn;
ofstream fileOut;

//Define vector for file data
vector<double> fileData;

fileIn.open("/FilePath.../checkIn.dat");
//If opening failed, display this text.
if (fileIn.fail( ))
{
    cout << "    Input file opening failed.\n";
    //stop program
    exit(1);
} 
```

我正在阅读的文件：

```
2000 1 1225.72 1 463.81 3 200 1 632 2 1500 1 300 2 1800 
```

我一直在互联网上四处寻找，找不到有用的东西。我正在寻找类似于 Java 中的“hasNextDouble”的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:06:21.077

在我看来，您正试图过于接近地模仿 Java（即，使事情变得比必要的复杂得多）。

```
// Open the file
std::ifstream file_in("/FilePath.../checkIn.dat");

// Create the vector, initialized from the numbers in the file:
std::vector<double> fileData((std::istream_iterator<double>(file_in)),
                              std::istream_iterator<double>()); 
```

...你就完成了。

# android - 如何在一个活动中开始处理异步任务并在 OnBackground 中完成工作时通知另一个活动

> ID：13718694
> 
> 赞同：1
> 
> 时间：2012-12-05T08:02:13.103
> 
> 标签：android, android-asynctask

我想实现以下行为，但我不确定如何：

```
 1\. User start an activity
   2\. Activity starts an AsyncTask
   3\. After initiating the AsyncTask,the control is transferred to another activity.
   4\. Now,when the AsynTask finishes its work,the 2nd activity should get to know that        AsyncTask has completed its working in the previous activity. 
```

我不知道如何实现该功能。`I know how to use AsyncTask`但我不知道如何通知其父活动以外的任何活动关于其工作的完成。请帮助我。提前致谢。

我想这样做是因为在第一个活动中我想在 AsyncTask 中开始一些工作，然后将控件转移到第二个活动但 AsyncTask 仍在运行。当 AsyncTask 完成其功能时，我想通知第二个活动它然后想在第二个活动中执行一些功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:05:04.260

您可以创建`interface`，将其传递给`AsyncTask`（在构造函数中），然后在`onPostExecute`..中调用接口方法并使您的第二个活动实现此接口..

例如：

你的界面：

```
public interface OnTaskCompleted {
    void onTaskCompleted();
} 
```

你的第二个活动：

```
public MyActivity implements OnTaskCompleted {
    //your Activity
} 
```

还有你的 AsyncTask：

```
public YourTask extends AsyncTask<Object,Object,Object> { //change Object to required type
    private OnTaskCompleted listener;

    public YourTask(OnTaskCompleted listener) {
        this.listener=listener;
    }

    //required methods

    protected void onPostExecute(Object o) {
        //your stuff
        listener.onTaskCompleted();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:12:58.713

*   在第二个活动中创建 BroadcastReceiver 并使用 registerReceiver() 方法注册它。
*   第一个 Activity 的 AsyncTask onPostExecute() 方法中的 sendBroadcast()。

    ```
    public class SecondActivity extends Activity {
        private BroadcastReceiver myBroadcastReceiver =
            new BroadcastReceiver() {
                @Override
                public void onReceive(...) {
                    ...
                }
           });

        ...

        public void onResume() {
            super.onResume();
            IntentFilter filter = new IntentFilter();  
                        filter.addAction("com.example.asynctaskcompleted");  
                        filter.addCategory("android.intent.category.DEFAULT");
            registerReceiver(myBroadcastReceiver, filter);
        }

        public void onPause() {
            super.onPause();
            ...
            unregisterReceiver(myBroadcastReceiver);
        }
        ...
    }

    public class FirstActivity extends Activity {
        private class MyTask extends AsyncTask<Void, Void, Void> {
            protected Void doInBackground(Void... args) {
            ...
        }    

        protected void onPostExecute(Void result) {
            Intent intent = new Intent ("com.example.asynctaskcompleted");            

            FirstActivity.this.sendBroadcast(intent);
     } 
    ```

    }

# java - 模拟静态方法

> ID：13718697
> 
> 赞同：0
> 
> 时间：2012-12-05T08:02:34.923
> 
> 标签：java, junit, mockito, jmock

我想编写一个测试用例来验证我班级中的一个方法。我的方法中有一个必须模拟的本地`ApplicationLauncher`对象，因为它调用了一个`launch()`不应在单元测试中调用的方法。

```
public class RunApp
{
   public void check(String name)
   {
     if(name !=null)
     {
       ApplicationLauncher launcher = Application.getLauncher("launch");
       String appName = name+".bat";
       launcher.launch(appName);
     }
   }
 } 
```

我的 JUnit 测试代码如下：

```
RunApp runapp = new RunApp();

@Mock
ApplicationLauncher launcher;

@Test
public void test()
{
  runapp.check("test");
  verify(launcher,atLeastOnce).launch(anyString());
} 
```

我无法返回类似的模拟对象

```
when(Application.getLauncher(anyString())).thenReturn(launcher); 
```

因为`getLauncher`是`Application`类中的静态方法。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:27:29.987

更好的应用程序设计可能是`ApplicationLauncher`作为接口并创建生产和测试实现（或只是模拟测试实现）。您可能需要将一个实例传递`ApplicationLauncher`给您的`RunApp`类，也许是在构造函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:13:04.880

[您可以使用PowerMock](http://code.google.com/p/powermock/)模拟静态方法，但是您应该检查静态方法调用是否真的有必要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T13:32:11.147

您可以重构您的类以接受启动器被“注入”。

```
public class RunApp
{
  public void check(String name)
  {
    check(name, Application.getLauncher("launch"));
  }

  protected check(String name, ApplicationLauncher launcher) {
    if (name != null)
    {
      String appName = name + ".bat";
      launcher.launch(appName);
    }
  }
} 
```

这样你就可以使用新的包保护的 check() 方法来测试你的代码，使用一个假的启动器。

# javascript - 将用户重定向到新域

> ID：13718708
> 
> 赞同：0
> 
> 时间：2012-12-05T08:03:24.633
> 
> 标签：javascript, http, redirect

我希望将访问的用户`www.xyz.com/whatever/example.html`重定向到`www.newdomain.com/whatever/example.html`. 这样做时，我想转到一个中间页面以显示一些信息，说明该站点已移至新域并在 5-10 秒后自动重定向。

即我只想更改我的主机名，URL 中之后的任何内容都应该保持不变，例如：`www.xyz.com?foo=bar&a=b&c=d`应该重定向到`www.newdomain.com?foo=bar&a=b&c=d`

做这个的最好方式是什么 ？

我的想法是将任何传入页面重定向到`www.xyz.com/index.html`并编写一个javascript函数来解析URL并将其主机名替换为 www.newdomain.com 。我能够`www.xyz.com/index.html`成功重定向，但我丢失了原始 URL 信息。我怎样才能跟踪那个原始 URL 字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:11:16.787

这最好在服务器上完成，但如果必须通过 javascript 完成：

```
var newDomain = "www.xyz.com"
window.location = window.location.protocol + "//" + newDomain + window.location.pathname + window.location.search; 
```

# java - 使用不同字体时，换行符会转换为空格

> ID：13718709
> 
> 赞同：0
> 
> 时间：2012-12-05T08:03:33.330
> 
> 标签：java

我试图让我的行每 20 个字符换行一次，我将此代码用于：

```
 for (Map.Entry<Integer, Character> keyWithLetter : keyMap.entrySet()) {
        if (input.isKeyPressed(keyWithLetter.getKey())) {
            String charCount = this.tekst.replaceAll("\\n", "");
            if (charCount.length() % 20 == 0 && charCount.length() >= 20) {
                this.tekst += "\n";
            }
            this.tekst += keyWithLetter.getValue();
        }
    } 
```

它适用于标准字体。但是，当我将字体更改为 Verdana 时，换行符会转换为空格。这是什么原因造成的？

这是字体：

```
 Font awtFont = new Font("Verdana", Font.PLAIN, 13);
    this.font = new TrueTypeFont(awtFont, true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:19:41.263

我使用的框架 Slick2d 有一个不支持 \n 换行符的 TrueTypeFont 类。

# loadrunner - 如何使用 Vuser Int、Action 和 Vuser End 进行录制？

> ID：13718710
> 
> 赞同：0
> 
> 时间：2012-12-05T08:03:35.217
> 
> 标签：loadrunner

我是使用 LoadRunner 的新手。确实需要帮助来记录`Vuser Int`登录过程、`Action`注册过程和`Vuser End`注销过程。

首先在开始录制窗口中，我将录制更改为操作，`Action`然后单击确定开始录制登录过程。然后我很困惑是单击`Start`还是开始记录注册操作过程`Pause`。`Stop`谁能指导我使用此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T08:40:01.210

开始录制时，选择 VUSER_INIT 作为要录制的初始操作。在此处记录您的登录过程。然后切换到使用 ACTION 动作来记录实际过程，最后在执行 Logout 过程时切换到使用 VUSER_END 动作。

*提示：如果您的流程更复杂，您可能也希望将其拆分为多个操作。这可以通过在录制期间显示的录制工具栏中创建新操作来完成。*

*这样，您将把 3 个单独的过程记录到 3 个单独的操作中。*

**注意** 以这种方式使用 VUSER_INIT 和 VUSER_END 操作可能会导致奇怪且难以处理的情况。最好在实际脚本中需要时动态调用登录和注销操作。下面的例子：

*情况1*

如果您希望新用户在每次迭代中登录/注销，您需要在每次迭代中执行登录和注销过程，而不是在开始和结束时执行一次。

*案例2*

想象一下，您一遍又一遍地运行您的流程，然后突然出现问题，您需要执行注销和登录（或切换用户）来修复流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:37:23.830

请阅读产品文档并参加培训。您的问题在这两种媒介中都有解决。

保持好奇心。在研究中使用你的基础技能。坚持让你的管理层走一条成功的道路，包括培训和实习期，让你在这个职位上取得成功。

# model-view-controller - 在这种情况下使用 Ember.js 控制器的正确方法是什么？

> ID：13718711
> 
> 赞同：1
> 
> 时间：2012-12-05T08:03:36.823
> 
> 标签：model-view-controller, ember.js

我正在编写一个`Ember.js`应用程序来显示从 CRUD RESTful API 获取的嵌套评论列表。

进行到一半时，我意识到我可能在滥用`Ember.js`而不是利用它的范例。

例如，我的`Comment`对象如下所示：

```
App.Comment = Em.Object.extend({
  id: null,
  author: null,
  text: null,

  delete: function() { /* AJAX call to API here */ }
}); 
```

将`delete()`函数作为模型对象的一部分而不是控制器可以吗？

我的另一个疑问是我对状态的处理。在我的模板中，我执行以下操作：

```
{{#if view.comment.editing}}
    {{view Ember.TextArea valueBinding="view.comment.text"}}
    <a href="#" {{action cancelEditingComment}}>Cancel</a>
{{else}}
    <p>{{view.comment.text}}</p>
    <a href="#" {{action editComment}}>Edit</a>
{{/if}} 
```

然后在我的路由器中，`editComment`and`cancelEditingComment`动作将委托给`Comment`，它具有以下功能：

```
startEditing: function() { this.set('editing', true); }
cancelEditing: function() { this.set('editing', false); } 
```

我不禁认为我做错了什么，尽管这种代码似乎有效。

您对如何重组我的代码有任何建议，以及任何可能对我有帮助的推荐阅读吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T10:51:07.247

根据我的经验，您的模型中不应该有任何业务逻辑。如果您有一些可以生成的复杂字段，它应该只有一组字段和一些计算属性。

您将视图委托给您的控制器绝对是删除的正确举措。但是，当涉及到编辑时，因为只有您的视图才真正关心这一点（通常），所以我倾向于`isEditing`将视图本身作为一部分。然后您可以检查此标志来决定是绘制简单文本还是文本区域进行输入。

```
App.controller = Em.Object.create({
    comments: [],

    deleteComment: function(comment) {
        this.get('comments').removeObject(comment);
    }
});

App.CommentView = Em.View.extend({
    comment: null,
    isEditing: null,

    delete: function() {
        App.controller.deleteComment(this.get('comment'));
    },

    startEditing: function() {
        this.set('isEditing', true);
    }
}); 
```

# c# - 如何遍历字典列表？

> ID：13718713
> 
> 赞同：4
> 
> 时间：2012-12-05T08:03:39.367
> 
> 标签：c#, .net, list, dictionary

我有以下代码：

```
List<Dictionary<string, string>> allMonthsList = new List<Dictionary<string, string>>();
while (getAllMonthsReader.Read()) {
    Dictionary<string, string> month = new Dictionary<string, string>();
    month.Add(getAllMonthsReader["year"].ToString(),
    getAllMonthsReader["month"].ToString());
    allMonthsList.Add(month);
}
getAllMonthsReader.Close(); 
```

现在我正在尝试遍历所有月份，如下所示：

```
foreach (Dictionary<string, string> allMonths in allMonthsList) 
```

如何访问键值？难道我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T08:06:31.360

```
foreach (Dictionary<string, string> allMonths in allMonthsList)
{
    foreach(KeyValuePair<string, string> kvp in allMonths)
     {
         string year = kvp.Key;
         string month = kvp.Value;
     }
} 
```

*BTW*一年通常有一个多月。看起来你需要在这里查找，或者`Dictionary<string, List<string>>`存储一年中的所有月份。

*解释*通用字典[`Dictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)实现`IEnumerable`接口，它返回一个遍历集合的枚举器。来自 msdn：

> 出于枚举的目的，字典中的每个项目都被视为`KeyValuePair<TKey, TValue>`表示值及其键的结构。返回项目的顺序未定义。
> 
> C# 语言的 foreach 语句需要集合中每个元素的类型。由于`Dictionary<TKey, TValue>`是键和值的集合，因此元素类型不是键的类型或值的类型。相反，元素类型是`KeyValuePair<TKey, TValue>`键类型和值类型的一种。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T08:07:19.063

```
var months = allMonthsList.SelectMany(x => x.Keys); 
```

然后，您可以随意迭代，`IEnumerable<string>`这是对所有键的简单枚举。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:32:36.523

你的设计是错误的。在字典中使用一对是没有意义的。您不需要使用字典列表。

试试这个：

```
class YearMonth
{
    public string Year { get; set; }
    public string Month { get; set; }
}

List<YearMonth> allMonths = List<YearMonth>();
while (getAllMonthsReader.Read())
{
     allMonths.Add(new List<YearMonth> {
                            Year = getAllMonthsReader["year"].ToString(),
                            Month = getAllMonthsReader["month"].ToString()
                                        });
}

getAllMonthsReader.Close(); 
```

用于：

```
foreach (var yearMonth in allMonths)
{
   Console.WriteLine("Year is {0}, Month is {1}", yearMonth.Year, yearMonth.Month);
} 
```

或者，如果您使用 .Net framework 4.0 或更高版本，则可以使用 Tuple

```
List<Tuple<string, string>> allMonths = List<Tuple<string, string>>();
while (getAllMonthsReader.Read())
{
     allMonths.Add(Tuple.Create( getAllMonthsReader["year"].ToString(),
                                 getAllMonthsReader["month"].ToString())
                  );
} 
```

getAllMonthsReader.Close();

然后使用：

```
foreach (var yearMonth in allMonths)
{
   Console.WriteLine("Year is {0}, Month is {1}", yearMonth.Item1, yearMonth.Item2);
} 
```

# php - 是什么真正导致了这个未定义的变量

> ID：13718714
> 
> 赞同：0
> 
> 时间：2012-12-05T08:03:49.970
> 
> 标签：php

我知道编程时最好的方法不是禁用错误，自从我开始制作我的简单网络论坛以来，我一直遇到一系列错误，我试图解决一些问题，但我遇到了一些问题，这`undefined variable`是最常见的错误，例如我似乎必须声明一些类似的错误，`A='';`但`A=values;` 我不知道如何解决下面的错误

```
Notice: Undefined variable: act in C:\xampp\htdocs\mysite\forum part two\login.php on line 74 
```

第 74 行的代码是这样的

```
case "login"; 
```

`login`和我的其他代码`login.php`

```
switch($act){

default;
index();
break;

case "login";
login();
break;

} 
```

我的代码`login.php`是这个

```
<?php
session_start();
//This displays your login form
function index(){
echo "<form action='?act=login' method='post'>" 
    ."Username: <input type='text' name='username' size='30'><br>"
    ."Password: <input type='password' name='password' size='30'><br>"
    ."<input type='submit' value='Login'>"
    ."</form>";    
}
//This function will find and checks if your data is correct
function login(){
//Collect your info from login form
$username = $_REQUEST['username'];
$password = $_REQUEST['password'];
//Connecting to database
$connect = mysql_connect("localhost", "root", "nokiae71");
if(!$connect){
die(mysql_error());
}
//Selecting database
$select_db = mysql_select_db("forumStructure", $connect);
if(!$select_db){
die(mysql_error());
}
//Find if entered data is correct
$result = mysql_query("SELECT * FROM users WHERE username='$username' AND password='$password'");
$row = mysql_fetch_array($result);
$id = $row['id'];
$select_user = mysql_query("SELECT * FROM users WHERE id='$id'");
$row2 = mysql_fetch_array($select_user);
$user = $row2['username'];

if($username != $user){
die("Username is wrong!");
}
$pass_check = mysql_query("SELECT * FROM users WHERE username='$username' AND id='$id'");
$row3 = mysql_fetch_array($pass_check);
$email = $row3['email'];
$select_pass = mysql_query("SELECT * FROM users WHERE username='$username' AND id='$id' AND email='$email'");
$row4 = mysql_fetch_array($select_pass);
$real_password = $row4['password'];
if($password != $real_password){
die("Your password is wrong!");
}
//Now if everything is correct let's finish his/her/its login
session_register("username", $username);
session_register("password", $password);
echo "Welcome, ".$username." please continue on our <a href=index.php>Index</a>";
}

switch($act){
default;
index();
break;
case "login";
login();
break;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:11:57.517

可能你没有定义`$act`变量..

```
$act = isset($_GET['act']) ? $_GET['act'] : ''; 
```

和 in`case`语句不要使用分号

```
case "whatever":
               ^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:13:49.250

将其添加到您的代码之上：

```
$act = !empty($_REQUEST['act']) ? $_REQUEST['act'] : null; 
```

即使你把所有这些全局的东西都放在一个名为 example 的文件中，然后将它包含到其他页面中，这可能`session_start();`会`$act = ...`更好`gloabls.inc.php`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:17:04.660

这很可能意味着您没有声明变量 $act。

您可以通过在 switch 语句周围添加条件来处理此问题：

```
if (isset($act)) {
    switch($act) {
        // Do what you need here
    }
}
else {
    echo '$act is not set';
} 
```

这样，您可以使用 else 条件来处理 $act 为空或未设置而不抛出警告的情况。

# php - 保存帖子数据后如何重定向到上一页并在上一页中显示该数据？

> ID：13718716
> 
> 赞同：0
> 
> 时间：2012-12-05T08:04:20.233
> 
> 标签：php, codeigniter

第 1 页有一个按钮。当用户点击时，他可以看到一个表格，要求填写金额和分享详细信息。一旦他提交数据将被保存到数据库中。将数据保存到数据库后，我想重定向到上一页（我单击按钮查看表单的页面）。在那个页面中，当我重定向代替按钮时，我想显示 eh 保存在数据库中的数量。

任何想法如何有效地做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:09:07.253

您可以将数据存储在`$_SESSION`数据库插入中，然后在订单页面上检查是否存在具有该特定名称的会话，如果不显示按钮，则显示数量、价格或重定向到该页面的任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:09:15.893

第1页.php

```
if ($_GET['details']=="true") {
  //print details
} else {
  //print button
} 
```

postpage.php

```
//handle database
header('Location: page1.php?details=true'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:18:16.830

尝试这个 ：

```
header('Location: ' . $_SERVER['HTTP_REFERER']); 
```

请注意，这可能不适用于安全页面 (HTTPS)，总体而言这是一个非常糟糕的主意，因为标头可能被劫持，将用户发送到其他目的地。标头甚至可能不会由浏览器发送。

您可以将数据存储在`$_SESSION`值中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T08:43:03.187

通过调用以下任一方式加载 Codeigniter 的 URL Helper：

```
$this->load->helper('url'); 
```

或编辑您的`application/config/autoload.php`文件并自动加载它：

```
$autoload['helper'] = array('url'); 
```

数据成功存储到数据库后，只需使用：

> 重定向('/CONTROLLER_NAME_HERE/METHOD_NAME_HERE/', '刷新');

在此处查看 url 帮助程序文档：http: [//ellislab.com/codeigniter/user-guide/helpers/url_helper.html](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

# ios - 在另一个 viewController 中调整子 ViewController

> ID：13718721
> 
> 赞同：0
> 
> 时间：2012-12-05T08:04:41.153
> 
> 标签：ios

我正在尝试使用另一个 viewController 中的子 ViewController 的应用程序。我有一个 VC，我正在外部 VC 中用自己的 xib 实例化另一个 VC。

我使用新的 iOS 5 方法 addChildViewController 将其添加为子视图，并且我已将其视图添加为子视图。

但是如何控制它在父视图控制器中的位置和大小呢？

我应该修改子控制器视图的框架吗？或者我必须调整 xib 本身的自由视图？

同样在我当前的实现中，子视图从父视图控制器视图的状态栏后面开始。关于如何系统地实施这样的事情的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:14:54.780

```
#define SUBVIEWS_FRAME CGRectMake(0,20,100,100) // whatever frame you need
- (void)addChildViewController:(UIViewController *)childController{

    [childController.view setFrame:SUBVIEWS_FRAME];
    [super addChildViewController:childController];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:20:05.923

只需在 parentViewController @`synthesize`中添加一个视图，就像`childView`. 现在将您`childViewController`的添加`childView`为`parentViewController`. `parentViewController`在 nib 文件上使用 View 可以很容易地进行调整。如果你有一个大的`childViewController`，那么请使用`UIScrollView`instad`UIView`

# ruby-on-rails - ActiveAdmin 按角色过滤用户

> ID：13718727
> 
> 赞同：1
> 
> 时间：2012-12-05T08:05:13.700
> 
> 标签：ruby-on-rails, devise, activeadmin

我希望能够在活动管理员中过滤设计用户，以便我可以显示用户列表，然后按他们拥有的角色过滤这些用户。

我所拥有的是：

```
class User < ActiveRecord::Base
  has_many :user_permissions
  has_many :roles, :through => :user_permissions

class Role < ActiveRecord::Base
  has_many :user_permissions
  has_many :users, :through => :user_permissions

class UserPermission < ActiveRecord::Base
  belongs_to :user, :dependent => :destroy
  belongs_to :role 
```

那么过滤器是：

```
ActiveAdmin.register User do
  filter :roles, as: :select, collection: proc { Role.all } 
```

但我得到的是这个错误：

```
 undefined method `role_ids_eq' for #<MetaSearch::Searches::User:0x0000012a2f7170> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T15:35:04.233

尝试类似：

```
ActiveAdmin.register User do
  filter :user_roles, as: :select, collection: proc { Role.all } 
```

如果关系还可以，那应该可以

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:38:19.613

我不知道过滤器的活动管理员工作，但如果您正在谈论查询过滤器，那么这将起作用 -

```
User.where(:role => 'admin') 
```

**注意：**上面的查询将给所有具有角色的用户`admin`。

如前所述，Rails 3 引入了一个新的查询接口，用于在 Active Record 中执行查找。

> [http://railscasts.com/episodes/202-active-record-queries-in-rails-3](http://railscasts.com/episodes/202-active-record-queries-in-rails-3)

# c# - 如何使用事件和委托在表单之间发送数据？

> ID：13718728
> 
> 赞同：5
> 
> 时间：2012-12-05T08:05:20.767
> 
> 标签：c#, .net, events, delegates, event-handling

我需要创建一个能够发送数据并从另一个`Form`实例接收数据的 Windows 窗体应用程序。什么意思，它们`Form`都是发布者和订阅者。

不幸的是，那天我病了，那天我不能参加讲座。

我再解释一下：

我有一个小聊天`Form`，他们有：新的实例按钮、收到的消息和发送消息。

正如您在下面看到的：

![在此处输入图像描述](../Images/eb09903e5d2897067df79448a8320b18.png)

当我发送消息时，它将显示在所有实例的“已收到”文本框中。

我想我需要使用委托和事件。

怎么做？谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T10:09:19.747

这是一个快速的解决方案。如果您有任何问题或发现评论令人困惑，请告诉我。

这是 Form 类（后面的代码）。请注意，一旦表单被实例化，它就会通过将事件处理程序“连接”到 Message 类中的 HandleMessage 事件来“订阅”事件。在 Form 类中，这是填充 ListView 的项目集合的地方。

每当单击 New Form 按钮时，都会创建并显示相同的 Form get（这允许代码重用，因为相同的逻辑对于 Form 的所有实例都是完全相同的）

```
public partial class Form1 : Form
{
    Messages _messages = Messages.Instance; // Singleton reference to the Messages class. This contains the shared event
                                            // and messages list.

    /// <summary>
    /// Initializes a new instance of the <see cref="Form1"/> class.
    /// </summary>
public Form1()
{
    InitializeComponent();

    // Subscribe to the message event. This will allow the form to be notified whenever there's a new message.
    //
    _messages.HandleMessage += new EventHandler(OnHandleMessage);

    // If there any existing messages that other forms have sent, populate list with them.
    //
    foreach (var messages in _messages.CurrentMessages)
    {
        listView1.Items.Add(messages);
    }
}

/// <summary>
/// Handles the Click event of the buttonNewForm control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
private void buttonNewForm_Click(object sender, EventArgs e)
{
    // Create a new form to display..
    //
    var newForm = new Form1();
    newForm.Show();
}

/// <summary>
/// Handles the Click event of the buttonSend control. Adds a new message to the "central" message list.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
private void buttonSend_Click(object sender, EventArgs e)
{
    string message = String.Format("{0} -- {1}", DateTime.UtcNow.ToLongTimeString(), textBox1.Text);
    textBox1.Clear();
    _messages.AddMessage(message);
}

/// <summary>
/// Called when [handle message].
/// This is called whenever a new message has been added to the "central" list.
/// </summary>
/// <param name="sender">The sender.</param>
/// <param name="args">The <see cref="System.EventArgs"/> instance containing the event data.</param>
public void OnHandleMessage(object sender, EventArgs args)
{
    var messageEvent = args as MessageEventArgs;
    if (messageEvent != null)
    {
        string message = messageEvent.Message;
        listView1.Items.Add(message);
    }
} 
```

}

这是我创建的一个 Messages 类，用于处理在表单之间发送的“中央”消息列表。Messages 类是一个单例（意味着它只能被实例化一次），它允许一个列表在表单的所有实例中保持不变。所有表单将共享同一个列表，并在列表更新时收到通知。如您所见，“HandleMessage”事件是每个表单在创建/显示时将订阅的事件。

如果您看一下 NotifyNewMessage 函数，Messages 类会调用它来通知订阅者发生了变化。由于 EventArgs 用于将数据传递给订阅者，因此我创建了一个特殊的 EventArgs 来将新添加的消息传递给所有订阅者。

```
class Messages
{
    private List<string> _messages = new List<string>();
    private static readonly Messages _instance = new Messages();
    public event EventHandler HandleMessage;

    /// <summary>
    /// Prevents a default instance of the <see cref="Messages"/> class from being created.
    /// </summary>
    private Messages() 
    {
    }

    /// <summary>
    /// Gets the instance of the class.
    /// </summary>
    public static Messages Instance 
    { 
        get 
        { 
            return _instance; 
        } 
    }

    /// <summary>
    /// Gets the current messages list.
    /// </summary>
    public List<string> CurrentMessages 
    {
        get
        {
            return _messages;
        }
    }

    /// <summary>
    /// Notifies any of the subscribers that a new message has been received.
    /// </summary>
    /// <param name="message">The message.</param>
    public void NotifyNewMessage(string message)
    {
        EventHandler handler = HandleMessage;
        if (handler != null)
        {
            // This will call the any form that is currently "wired" to the event, notifying them
            // of the new message.
            handler(this, new MessageEventArgs(message));
        }
    }

    /// <summary>
    /// Adds a new messages to the "central" list
    /// </summary>
    /// <param name="message">The message.</param>
    public void AddMessage(string message)
    {
        _messages.Add(message);
        NotifyNewMessage(message);
    }
}

/// <summary>
/// Special Event Args used to pass the message data to the subscribers.
/// </summary>
class MessageEventArgs : EventArgs
{
    private string _message = string.Empty;
    public MessageEventArgs(string message)
    {
        _message = message;
    }

    public String Message
    {
        get
        {
            return _message;
        }
    }
} 
```

另外..为了正确“显示”消息，不要忘记将ListView控件的“View”属性设置为“List”。一种更简单（也是首选的方式）就是使用 ObservableCollection 列表类型，它已经提供了一个可以订阅的事件。

希望这可以帮助。

# objective-c - 循环头导入，枚举无法识别

> ID：13718729
> 
> 赞同：2
> 
> 时间：2012-12-05T08:05:23.283
> 
> 标签：objective-c, cocoa-touch

我有两个 Cocoa Touch 类（objective-c）。和`#import`对方的头。

A 类的标头定义了一个枚举，B 类的标头正在尝试使用该枚举。由于无法识别类型，B 类无法编译。

我认为这是一个循环依赖问题，但我认为`@class`不会有太大帮助，因为问题在于枚举。

你有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T08:17:03.913

将枚举放在它自己的头文件中，然后在彼此的头文件中使用@class 向前声明类，这样A 不需要导入B，B 不需要导入A，但展位导入枚举头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:07:37.650

在头文件中使用`@class ClassName;` ，在 .m 文件中使用导入。

# authentication - 通过另一个应用程序访问 jenkins 资源

> ID：13718730
> 
> 赞同：3
> 
> 时间：2012-12-05T08:05:30.147
> 
> 标签：authentication, jenkins, session-cookies, http-status-code-403, httpforbiddenhandler

我在必须在另一个应用程序中显示詹金斯的图形（图像）的情况下苦苦挣扎。当我保持登录到 jenkins（同一浏览器中的不同选项卡）时，另一个应用程序能够使用该图像 url 来显示图形。但是当我从 jenkins 注销时，不允许访问该图，因为浏览器不再具有经过身份验证的 jenkins 会话。

如果我知道登录 jenkins 的用户名和密码，如何在不手动登录 jenkins 的情况下显示此图像（在其他应用程序中验证和调用图像 url）？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T23:15:55.157

Jenkins 支持常规 HTTP 身份验证。尽管您应该使用 Jenkins 帐户的 API 令牌，而不是密码。

您可以在您的用户页面上找到您的 API 令牌：在 Jenkins 右上角单击您的用户名，然后单击配置链接。

有了这些细节，你可以参考 Jenkins 中的一个工件，例如：

`http://USER:API-TOKEN@JENKINS/job/JOB-NAME/lastSuccessfulBuild/artifact/graph.png`

# wordpress - Wordpress - 将前端的 TinyMCE 添加到 jQuery UI 小部件中

> ID：13718731
> 
> 赞同：2
> 
> 时间：2012-12-05T08:05:29.923
> 
> 标签：wordpress, jquery-ui, tinymce, accordion

我正在创建一个 Wordpress 应用程序。它包括在自定义类型上使用自定义字段，用于管理个人项目。

我的问题：我想在前端添加管理编辑器（tinyMCE）。考虑到我可以拥有许多将开始 TinyMCE 编辑器的文本区域。所以，我使用了这段代码：

PHP（关于主题functions.php）：

```
// TINY-MCE EDITOR ON FRONTEND
add_filter('wp_head','add_tinymce_editor');

function add_tinymce_editor(){
    wp_admin_css('thickbox');
    wp_enqueue_script('wp-tinymce');
    wp_enqueue_script('tinymce');
    wp_enqueue_script('editor');
    add_thickbox();
} 
```

JS（关于主题 single-projects.php）：

```
jQuery(document).ready(function(){
    // EDITORS
    tinyMCE.init({
        mode : "specific_textareas",
        theme : "simple", 
        editor_selector :"tinymce_enabled"
    });
 }); 
```

在 JS 上，我为所有将启动 tinyMCE 编辑器的文本区域设置了带有 Class 的“editor_selector”。我不能为每个文本区域分配一个 ID，因为它们可以是 4 个或 5 个或 6 个，甚至更多！！！！

HTML：（在主题 single-projects.php 上）：

```
<textarea name="new-task-description" id="new-task-description"
    class="tinymce_enabled required"></textarea> 
```

每个文本区域都存在于 Jquery UI Accordions 上。

现在，我的问题是，在 Firebug（或浏览器控制台）上出现此错误：

```
tinyMCE is not defined 
```

怎么了？

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:31:46.930

使用 Wordpress 3.3，您可以`wp_editor()`轻松使用它。

[http://codex.wordpress.org/Function_Reference/wp_editor](http://codex.wordpress.org/Function_Reference/wp_editor)

包含脚本的正确方法是`add_action('wp_enqueue_scripts', 'tinymce_editor');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T09:54:30.487

如果 tinymce 未定义，则文件 tiny_mce.js 尚未加载到页面上。确保文件被直接加载或使用 wordpress 提供的方式加载。

# javascript - 在列表框之间移动项目

> ID：13718733
> 
> 赞同：0
> 
> 时间：2012-12-05T08:05:35.530
> 
> 标签：javascript, asp.net, html

我的页面上有两个列表框，我需要在 javascript 的帮助下在它们之间移动项目。这是我的标记：

```
<asp:ListBox ID="ListBox1" Height="300px" runat="server" AppendDataBoundItems="true" 
        SelectionMode="Multiple"></asp:ListBox>

<div>

<asp:ImageButton ID="ButtonRight" runat="server" ImageUrl="~/Images/right.gif" OnClientClick="return     
      LeftToRightMoveItems('AddSetup');" /><br />
<br />
<asp:ImageButton ID="ButtonLeft" runat="server" ImageUrl="~/Images/left.gif" OnClientClick="return 
       RightToLeftMoveItems('AddSetup');" />
</div>

<asp:ListBox ID="ListBox2" Height="300px" runat="server" AppendDataBoundItems="true"  
      SelectionMode="Multiple"></asp:ListBox> 
```

这是我的 JavaScript 代码：

**Javascript：**

```
 function LeftToRightMoveItems() {
        try {
            if (status == "AddSetup") {
                var varFromBox = document.getElementById("<%=ListBox1.ClientID%>").options;
                var varToBox = document.getElementById("<%=ListBox2.ClientID%>").options;
            }

            alert(varFromBox.length);
            alert(varToBox.length);

            if ((varFromBox != null)) {
                if (varFromBox.length < 1) {
                    alert('There are no items to move!');
                    return false;
                }
                if (varFromBox.options.selectedIndex == -1) // when no Item is selected the index will be -1
                {
                    alert('Please select an item to move!');
                    return false;
                }
                while (varFromBox.options.selectedIndex >= 0) {
                    var newOption = new Option(); // Create a new instance of ListItem 
                    newOption.text = varFromBox.options[varFromBox.options.selectedIndex].text;
                    newOption.value = varFromBox.options[varFromBox.options.selectedIndex].value;
                    varToBox.options[varToBox.length] = newOption; //Append the item in Target Listbox
                    varFromBox.remove(varFromBox.options.selectedIndex); //Remove the item from Source Listbox
                }
            }
        }
        catch (e) {
            alert("Following error occured : \n" + e.description);
        }
        return false;
    } 
```

在页面加载时，我正在填写`ListBox1`. 但是在`alert()`我得到0个项目。

HTML 看起来像：

```
<SELECT style="HEIGHT: 300px" id=ListBox1 multiple size=4 name=ctl00$ContentPlaceHolderNewSys$TabContainerMain$tabPanelAdd$tabContainerInnerAdd$tabPanelAdd_1$ListBoxAll1> <OPTION value=1>param1</OPTION> <OPTION value=2>param2</OPTION> <OPTION value=3>param3</OPTION></SELECT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:09:22.590

该函数不接受状态参数。修改函数的签名以接受`status`作为参数。

```
function LeftToRightMoveItems(status) {
...
} 
```

提供状态后，代码也存在一些问题。主要是`varFromBox`当它实际表示一组选项时，它被用作选择。

例如，`varFromBox`最初声明为对象数组：

```
var varFromBox = document.getElementById("<%=ListBox1.ClientID%>").options; 
```

然后在不同的地方，代码尝试访问 options 属性，就好像`varFromBox`是一个 select 元素。实际上它实际上是在寻找`options.options`

```
 while (varFromBox.options.selectedIndex >= 0) {..} 
```

这是我想出的否定这些问题的方法。我删除了 try/catch，因此任何错误都更加明显。还要检查这个例子：http: [//jsfiddle.net/7dVyq/](http://jsfiddle.net/7dVyq/)

```
function LeftToRightMoveItems(status){

                if (status == "AddSetup") {
                    var varFromBox = document.getElementById("ListBox1").options;
                    var varToBox = document.getElementById("ListBox2");
                }

                alert(varFromBox.length);
                alert(varToBox.length);

                if ((varFromBox != null)) {
                    if (varFromBox.length < 1) {
                        alert('There are no items to move!');
                        return false;
                    }
                    console.log(varFromBox.selectedIndex);
                    if (varFromBox.selectedIndex == -1) // when no Item is selected the index will be -1
                    {
                        alert('Please select an item to move!');
                        return false;
                    }
                    for (var i = 0; i < varFromBox.length; i++) {
                        if (varFromBox[i].selectedIndex != -1) {
                            var newOption = new Option(); // Create a new instance of ListItem
                            newOption.text = varFromBox[i].text;
                            newOption.value = varFromBox[i].value;
                            varToBox.options[varToBox.length] = newOption; //Append the item in Target Listbox
                            document.getElementById("ListBox1").remove(varFromBox[i]); //Remove the item from Source Listbox
                        }
                    }
                    return false;
                }
            } 
```

# c - 以最优方法在链表中找到最小值

> ID：13718735
> 
> 赞同：1
> 
> 时间：2012-12-05T08:05:59.813
> 
> 标签：c, algorithm, list, linked-list

我遇到了这个问题，我们被要求存储一个字符串和一个否。与它相关联，我们应该从列表中删除最小编号（及其字符串），并删除存储在它之后的编号（和字符串）。输入是编号，字符串对和输入的流of -1 表示我们需要从列表中删除最少量的及其上方的对。输出应该是最小编号项目上方的项目数。例如 2 abcd 1 aabb 3 dbbb -1 o/p 1 （因为最小值是 1 aabb 并且后面只有一项，即 3 dbbb；我们的列表现在只包含 2 abcd）。另一个 -1 会产生 o/p 0。我已经尝试过使用链表，但它似乎比预期花费更多的时间。我需要一个更好的数据结构或算法。这是我的代码：

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
typedef struct data
    {
        int no,pos;
        char *st;
        struct data *next;
    }data;
void insert(data *start,int n,char *s);
void minimum(data *start);
int total=0,min=100001,posn=0;//total=total no of nodes,rem=nodes after minimum
data *temp;
int main()
    {
        int N,n;
        data *start;
        start=(data*)malloc(sizeof(data));
        start->pos=0;
        start->no=100002;
        start->next=NULL;
        char c,s[16];
        scanf("%d",&N);
        while(N)
            {
                scanf("%d",&n);
                if(n!=-1)
                    {
                        scanf("%c",&c);
                        scanf("%s",s);
                        total++;
                        posn++;
                        insert(start,n,s);
                    }
                else
                    {
                        printf("%d %s\n",total-(temp->next->pos),temp->next->st);
                        posn=temp->pos;
                        total=temp->pos;
                        temp->next=NULL;
                        minimum(start);
                    }
                N--;
            }
    }
void insert(data *start,int n,char *s)
    {
    while(start->next!=NULL)
        start=start->next;
    if(n<=min)
        {
            temp=start;
            min=n;
        }
    start->next=(data*)malloc(sizeof(data));
    start=start->next;
    start->no=n;
    start->st=(char*)malloc(sizeof(char)*(strlen(s)));
    strcpy(start->st,s);
    start->pos=posn;
    start->next=NULL;
    return;
    }
void minimum(data *start)
    {
        min=100001;
        while(start->next!=NULL)
            {
                if(start->next->no<=min)
                    {
                        min=start->next->no;
                        temp=start;
                        start=start->next;
                    }
            }
        return;
    } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:09:08.727

那么这里是您的代码的一些问题：

1.  `start=start->next;`应该在每次迭代中完成，而不仅仅是在找到新的最小值时。
2.  ~~您总是缺少列表的头部，迭代`while(start != NULL)`（并检查`start->no`而不是下一个节点）。~~（这似乎`start`是一个虚拟变量，如果确实如此 - 你只是错过了它 - 这很好）。
3.  ~~您缺少该`minimum()`函数的返回类型，它不应该是`void`. 如果您的列表包含`int`s，则返回类型应该是`int`，并且当您用完循环时应该是`return min;`。（如果您有兴趣返回附加的最小字符串，请存储一个额外的变量`char* minElement`，在您修改时修改它，并在循环耗尽时`min`返回它（`minelement`~~ ）。 （请注意，将答案存储在全局变量中是一种不好的做法，更好的方法是从函数中返回它）
4.  您应该将 min 初始化为`INT_MAX`一个任意数字。

* * *

关于优化问题：

如果您只对找到最小元素感兴趣，那么**[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)就是专门为它设计的数据结构**！它是用于检索最小值的简单且非常有效的数据结构。

另请注意，如果您的数据结构不支持删除，您可以在每次插入时缓存 min，类似于此伪代码的行：

添加到插入功能：

```
if (newValue < min):
   min <- newValue 
```

和 min 很简单，就像检索缓存的`min`.

# javascript - javascript中明天的演出日期

> ID：13718738
> 
> 赞同：0
> 
> 时间：2012-12-05T08:06:16.437
> 
> 标签：javascript, date

> **可能重复：**
> [使用 JavaScript 将日期添加到 DateTime](https://stackoverflow.com/questions/563406/add-days-to-datetime-using-javascript)

如果今天的日期是 5-12-2012，我想显示第二天的日期 6-12-2012。那是如何用javascript编码的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:17:05.360

```
var date = "5-12-2012";
var datum = new Date(date);
datum.setDate(datum.getDate() + 1);
date = datum.getDate() + "-" + (datum.getMonth() + 1) + "-" + datum.getFullYear(); 
```

# eclipse - 如何通过 M2E 禁用 Eclipse HTML 验证

> ID：13718746
> 
> 赞同：3
> 
> 时间：2012-12-05T08:06:50.143
> 
> 标签：eclipse, m2e

我有这个项目，其中包含 src/webapp 中的一些 HTML 模板。这些模板具有 freemarker 占位符，例如

```
<# something %> 
```

这使 Eclipse 抱怨未关闭的标签。

我可以在 M2E 插件中配置什么来指示 Eclipse 跳过对这些文件的验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:56:31.277

尝试取消选中使用此的一些`html`验证`eclipse`：

```
Window > Preferences > Validation 
```

# c# - 如何自动检测装配接口变化？

> ID：13718747
> 
> 赞同：0
> 
> 时间：2012-12-05T08:06:55.100
> 
> 标签：c#, .net, .net-assembly

程序集 A 在 1.0 版中发布 一些补丁是在 A 上开发的。

这些补丁可能涉及 100% 的内部代码（例如：更改私有函数的实现），或者它们甚至可能以不破坏依赖程序集编译的方式影响 A 接口（例如：更改公共常量值）。

如何自动检测程序集 A 接口已更改，以便您知道您可能还需要交付依赖于 A 的程序集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:10:37.090

*最明显的解决方案是（如果您在运行时检测到它们）为您定义版本*和*依赖程序集列表*（可能因版本而异）的程序集提供某种清单。

# php - 在同一网格上搜索多个日期选择器

> ID：13718749
> 
> 赞同：2
> 
> 时间：2012-12-05T08:06:56.947
> 
> 标签：php, jquery, jqgrid, jqgrid-php

我在同一个网格上使用多个日期选择器，我遇到了问题以获得正确的结果。

我在 1 个网格中使用了 3 个日期选择器。

只有第一个日期选择器（订单日期）能够输出正确的结果，而其他 2 个日期选择器（开始日期和结束日期）无法生成正确的结果。

查询没有问题，所以你能找出这里发生了什么吗？

提前致谢！

php 包装器

```
<?php
ob_start();
require_once 'config.php';
// include the jqGrid Class
require_once "php/jqGrid.php";
// include the PDO driver class
require_once "php/jqGridPdo.php";
// include the datepicker
require_once "php/jqCalendar.php"; 
// Connection to the server
$conn = new PDO(DB_DSN,DB_USER,DB_PASSWORD);
// Tell the db that we use utf-8
$conn->query("SET NAMES utf8");

// Create the jqGrid instance
$grid = new jqGridRender($conn);
// Write the SQL Query
$grid->SelectCommand = "SELECT c.CompanyID, c.CompanyCode, c.CompanyName, c.Area, o.OrderCode, o.Date, m.maID ,m.System, m.Status, m.StartDate, m.EndDate, m.Type  FROM company c, orders o, maintenance_agreement m WHERE c.CompanyID = o.CompanyID AND o.OrderID = m.OrderID ";  
// Set the table to where you update the data
$grid->table = 'maintenance_agreement'; 
// set the ouput format to json
$grid->dataType = 'json';
// Let the grid create the model
$grid->setPrimaryKeyId('maID');
// Let the grid create the model
$grid->setColModel();
// Set the url from where we obtain the data
$grid->setUrl('grouping_ma_details.php');
// Set grid caption using the option caption
$grid->setGridOptions(array(
    "sortable"=>true,
    "rownumbers"=>true, 
    "caption"=>"Group by Maintenance Agreement",
    "rowNum"=>20,
    "height"=>'auto', 
    "width"=>1300,
    "sortname"=>"maID",
    "hoverrows"=>true,
    "rowList"=>array(10,20,50),     
    "footerrow"=>false,
    "userDataOnFooter"=>false,
    "grouping"=>true,
    "groupingView"=>array(
        "groupField" => array('CompanyName'),
        "groupColumnShow" => array(true), //show or hide area column
        "groupText" =>array('<b> Company Name: {0}</b>',),
        "groupDataSorted" => true,
        "groupSummary" => array(true)
    ) 
));

//Start Date
$grid->setColProperty("StartDate", array("label"=>"Start Date","width"=>120,"align"=>"center","fixed"=>true,
    "formatter"=>"date",
    "formatoptions"=>array("srcformat"=>"Y-m-d H:i:s","newformat"=>"d M Y")
    ));
$grid->setUserTime("d M Y");
$grid->setUserDate("d M Y");
$grid->setDatepicker("StartDate",array("buttonOnly"=>false));
$grid->datearray = array('StartDate');

//End Date
$grid->setColProperty("EndDate", array("label"=>"End Date","width"=>120,"align"=>"center","fixed"=>true,
    "formatter"=>"date",
    "formatoptions"=>array("srcformat"=>"Y-m-d H:i:s","newformat"=>"d M Y")
    ));
$grid->setUserTime("d M Y");
$grid->setUserDate("d M Y");
$grid->setDatepicker("EndDate",array("buttonOnly"=>false));
$grid->datearray = array('EndDate');

//Order Date
$grid->setColProperty("Date", array("label"=>"Order Date","width"=>100,"editable"=>false,"align"=>"center","fixed"=>true,
    "formatter"=>"date",
    "formatoptions"=>array("srcformat"=>"Y-m-d H:i:s","newformat"=>"d M Y")
    ));
$grid->setUserTime("d M Y");
$grid->setUserDate("d M Y");
$grid->setDatepicker("Date",array("buttonOnly"=>false));
$grid->datearray = array('Date');

// Enable toolbar searching
$grid->toolbarfilter = true;
$grid->setFilterOptions(array("stringResult"=>true,"searchOnEnter"=>false,"defaultSearch"=>"cn")); 
// Enable navigator
$grid->navigator = true;

$grid->setNavOptions('navigator', array("pdf"=>true, "excel"=>true,"add"=>false,"edit"=>true,"del"=>false,"view"=>true, "search"=>true));

$grid->renderGrid('#grid','#pager',true, null, null, true,true);
$conn = null;
?> 
```

javascript代码

```
 jQuery(document).ready(function ($) {
        jQuery('#grid').jqGrid({
            "width": 1300,
            "hoverrows": true,
            "viewrecords": true,
            "jsonReader": {
                "repeatitems": false,
                "subgrid": {
                    "repeatitems": false
                }
            },
            "xmlReader": {
                "repeatitems": false,
                "subgrid": {
                    "repeatitems": false
                }
            },
            "gridview": true,
            "url": "grouping_ma_details.php",
            "editurl": "grouping_ma_details.php",
            "cellurl": "grouping_ma_details.php",
            "sortable": true,
            "rownumbers": true,
            "caption": "Group by Maintenance Agreement",
            "rowNum": 20,
            "height": "auto",
            "sortname": "maID",
            "rowList": [10, 20, 50],
            "footerrow": false,
            "userDataOnFooter": false,
            "grouping": true,
            "groupingView": {
                "groupField": ["CompanyName"],
                "groupColumnShow": [true],
                "groupText": ["<b> Company Name: {0}</b>"],
                "groupDataSorted": true,
                "groupSummary": [true]
            },
            "datatype": "json",
            "colModel": [{
                "name": "CompanyID",
                "index": "CompanyID",
                "sorttype": "int",
                "editable": true
            }, {
                "name": "CompanyCode",
                "index": "CompanyCode",
                "sorttype": "string",
                "editable": true
            }, {
                "name": "CompanyName",
                "index": "CompanyName",
                "sorttype": "string",
                "editable": true
            }, {
                "name": "Area",
                "index": "Area",
                "sorttype": "string",
                "editable": true
            }, {
                "name": "OrderCode",
                "index": "OrderCode",
                "sorttype": "string",
                "editable": true
            }, {
                "name": "Date",
                "index": "Date",
                "sorttype": "date",
                "label": "Order Date",
                "width": 100,
                "editable": false,
                "align": "center",
                "fixed": true,
                "formatter": "date",
                "formatoptions": {
                    "srcformat": "Y-m-d H:i:s",
                    "newformat": "d M Y"
                },
                "editoptions": {
                    "dataInit": function (el) {
                        setTimeout(function () {
                            if (jQuery.ui) {
                                if (jQuery.ui.datepicker) {
                                    jQuery(el).datepicker({
                                        "disabled": false,
                                        "dateFormat": "dd M yy"
                                    });
                                    jQuery('.ui-datepicker').css({
                                        'font-size': '75%'
                                    });
                                }
                            }
                        }, 100);
                    }
                },
                "searchoptions": {
                    "dataInit": function (el) {
                        setTimeout(function () {
                            if (jQuery.ui) {
                                if (jQuery.ui.datepicker) {
                                    jQuery(el).datepicker({
                                        "disabled": false,
                                        "dateFormat": "dd M yy"
                                    });
                                    jQuery('.ui-datepicker').css({
                                        'font-size': '75%'
                                    });
                                }
                            }
                        }, 100);
                    }
                }
            }, {
                "name": "maID",
                "index": "maID",
                "sorttype": "int",
                "key": true,
                "editable": true
            }, {
                "name": "System",
                "index": "System",
                "sorttype": "string",
                "editable": true
            }, {
                "name": "Status",
                "index": "Status",
                "sorttype": "string",
                "editable": true
            }, {
                "name": "StartDate",
                "index": "StartDate",
                "sorttype": "date",
                "label": "Start Date",
                "width": 120,
                "align": "center",
                "fixed": true,
                "formatter": "date",
                "formatoptions": {
                    "srcformat": "Y-m-d H:i:s",
                    "newformat": "d M Y"
                },
                "editoptions": {
                    "dataInit": function (el) {
                        setTimeout(function () {
                            if (jQuery.ui) {
                                if (jQuery.ui.datepicker) {
                                    jQuery(el).datepicker({
                                        "disabled": false,
                                        "dateFormat": "dd M yy"
                                    });
                                    jQuery('.ui-datepicker').css({
                                        'font-size': '75%'
                                    });
                                }
                            }
                        }, 100);
                    }
                },
                "searchoptions": {
                    "dataInit": function (el) {
                        setTimeout(function () {
                            if (jQuery.ui) {
                                if (jQuery.ui.datepicker) {
                                    jQuery(el).datepicker({
                                        "disabled": false,
                                        "dateFormat": "dd M yy"
                                    });
                                    jQuery('.ui-datepicker').css({
                                        'font-size': '75%'
                                    });
                                }
                            }
                        }, 100);
                    }
                },
                "editable": true
            }, {
                "name": "EndDate",
                "index": "EndDate",
                "sorttype": "date",
                "label": "End Date",
                "width": 120,
                "align": "center",
                "fixed": true,
                "formatter": "date",
                "formatoptions": {
                    "srcformat": "Y-m-d H:i:s",
                    "newformat": "d M Y"
                },
                "editoptions": {
                    "dataInit": function (el) {
                        setTimeout(function () {
                            if (jQuery.ui) {
                                if (jQuery.ui.datepicker) {
                                    jQuery(el).datepicker({
                                        "disabled": false,
                                        "dateFormat": "dd M yy"
                                    });
                                    jQuery('.ui-datepicker').css({
                                        'font-size': '75%'
                                    });
                                }
                            }
                        }, 100);
                    }
                },
                "searchoptions": {
                    "dataInit": function (el) {
                        setTimeout(function () {
                            if (jQuery.ui) {
                                if (jQuery.ui.datepicker) {
                                    jQuery(el).datepicker({
                                        "disabled": false,
                                        "dateFormat": "dd M yy"
                                    });
                                    jQuery('.ui-datepicker').css({
                                        'font-size': '75%'
                                    });
                                }
                            }
                        }, 100);
                    }
                },
                "editable": true
            }, {
                "name": "Type",
                "index": "Type",
                "sorttype": "string",
                "editable": true
            }],
            "postData": {
                "oper": "grid"
            },
            "prmNames": {
                "page": "page",
                "rows": "rows",
                "sort": "sidx",
                "order": "sord",
                "search": "_search",
                "nd": "nd",
                "id": "maID",
                "filter": "filters",
                "searchField": "searchField",
                "searchOper": "searchOper",
                "searchString": "searchString",
                "oper": "oper",
                "query": "grid",
                "addoper": "add",
                "editoper": "edit",
                "deloper": "del",
                "excel": "excel",
                "subgrid": "subgrid",
                "totalrows": "totalrows",
                "autocomplete": "autocmpl"
            },
            "loadError": function (xhr, status, err) {
                try {
                    jQuery.jgrid.info_dialog(jQuery.jgrid.errors.errcap, '<div class="ui-state-error">' + xhr.responseText + '</div>', jQuery.jgrid.edit.bClose, {
                        buttonalign: 'right'
                    });
                } catch (e) {
                    alert(xhr.responseText);
                }
            },
            "pager": "#pager"
        });
        jQuery('#grid').jqGrid('navGrid', '#pager', {
            "edit": true,
            "add": false,
            "del": false,
            "search": true,
            "refresh": true,
            "view": true,
            "excel": true,
            "pdf": true,
            "csv": false,
            "columns": false
        }, {
            "drag": true,
            "resize": true,
            "closeOnEscape": true,
            "dataheight": 150,
            "errorTextFormat": function (r) {
                return r.responseText;
            }
        }, {
            "drag": true,
            "resize": true,
            "closeOnEscape": true,
            "dataheight": 150,
            "errorTextFormat": function (r) {
                return r.responseText;
            }
        }, {
            "errorTextFormat": function (r) {
                return r.responseText;
            }
        }, {
            "drag": true,
            "closeAfterSearch": true,
            "multipleSearch": true
        }, {
            "drag": true,
            "resize": true,
            "closeOnEscape": true,
            "dataheight": 150
        });
        jQuery('#grid').jqGrid('navButtonAdd', '#pager', {
            id: 'pager_excel',
            caption: '',
            title: 'Export To Excel',
            onClickButton: function (e) {
                try {
                    jQuery("#grid").jqGrid('excelExport', {
                        tag: 'excel',
                        url: 'grouping_ma_details.php'
                    });
                } catch (e) {
                    window.location = 'grouping_ma_details.php?oper=excel';
                }
            },
            buttonicon: 'ui-icon-newwin'
        });
        jQuery('#grid').jqGrid('navButtonAdd', '#pager', {
            id: 'pager_pdf',
            caption: '',
            title: 'Export To Pdf',
            onClickButton: function (e) {
                try {
                    jQuery("#grid").jqGrid('excelExport', {
                        tag: 'pdf',
                        url: 'grouping_ma_details.php'
                    });
                } catch (e) {
                    window.location = 'grouping_ma_details.php?oper=pdf';
                }
            },
            buttonicon: 'ui-icon-print'
        });
        jQuery('#grid').jqGrid('filterToolbar', {
            "stringResult": true,
            "searchOnEnter": false,
            "defaultSearch": "cn"
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:27:31.620

如果使用搜索工具栏 ( `filterToolbar`)，则只能指定搜索期间使用的一项操作。你用过

```
$('#grid').jqGrid('filterToolbar',
    { stringResult: true, searchOnEnter: false, defaultSearch: "cn" }); 
```

因此，操作“包含”（“cn”）将应用于过滤期间未指定的**所有列。**对于所有具有.`sopt``searchoptions``sopt``searchoptions``stype: "select"`

如果您不使用搜索对话框，那么您可以包含`sopt: ["eq"]`在`searchoptions`所有具有`stype: "select"`和的列中`formatter: "date"`。如果您在搜索工具栏之外使用搜索对话框，您应该`sopt`使用一些数组，其中数组`"eq"`的第一个元素。在这种情况下，将在网格过滤期间使用“相等”操作。

因为您使用高级搜索对话框（带有`multipleSearch: true`），您可以非常轻松地验证搜索工具栏生成的过滤器。您只需设置任何过滤器（或多个过滤器），然后打开搜索对话框。如果您之前没有打开搜索对话框，您将看到搜索过滤器生成的过滤器。我建议您将`recreateForm: true`option 与`multipleSearch: true`（或可能与`multipleGroup: true`）一起使用。在这种情况下，您将始终在搜索对话框中看到当前使用的过滤器，而不是最后一个搜索对话框（它将被隐藏而不是销毁）。

# magento - 显示可配置产品属性选项的管理标签

> ID：13718750
> 
> 赞同：0
> 
> 时间：2012-12-05T08:07:04.137
> 
> 标签：magento

我想在产品列表页面上显示可配置产品的属性值。我特别需要分配给特定产品的属性选项的管理标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:07:04.137

在我的例子中，属性名称是 confi_color。所以在 list.phtml

```
if($_product->getTypeId()=='configurable'){
                        $colorList      =   array();
                        $attrs  = $_product->getTypeInstance(true)->getConfigurableAttributesAsArray($_product);
                        foreach($attrs as $attr) {
                            if(0 == strcmp("config_color", $attr['attribute_code'])) {
                                $options    = $attr['values'];
                                $arr        =   array();
                                $count      =   0;
                                foreach($options as $option) {
                                    //print_r($option);
                                    $arr[$count]    =   $option['value_index'];
                                    $count++;
                                }
                                $colorList          =   $_product->getAdminAttributeText($attr['attribute_id'],$arr);
                                //echo getAdminAttributeText($attributeCode);    
                            }
                        }
                        echo '<div style="float:right;">';
                        if(count($colorList >   1)){
                            for($i=1;$i<count($colorList);$i++) {
                                echo '<div style="background:'.$colorList[$i].';float:left;display:block;width:16px;border:1px solid #B6B6B6;margin-right:2px;">&nbsp;</div>';
                            //$optStr .= "<option value='".$valuesVal->getId()."'>".$valuesVal->getTitle()."</option>";
                            }
                            echo '</div><div style="clear:left;"></div>';
                        }

                    } 
```

现在将 /app/code/core/Mage/Catalog/Model/Product.php 中的管理员标签添加到 /app/code/local/Mage/Catalog/Model/Product.php 中创建一个函数：

```
public function getAdminAttributeText($attributeCode,$arr) {
      $_attribute= $this->getResource()->getAttribute($attributeCode);
      $_options= $_attribute->getSource()->getAllOptions(true, true);
      $count        =   0;
      $flag         =   0;
      $returnArr    =   array();
      foreach($_options as $option){
            for($count=0;$count<=count($arr);$count++){
              if ($option['value'] ==   $arr[$count]){
                   $returnArr[$flag]        =   $option['label'];
                   $flag++;
                }
            }
        }
        return($returnArr);
    } 
```

# c++ - OpenCV 连接组件的输出

> ID：13718752
> 
> 赞同：1
> 
> 时间：2012-12-05T08:07:07.630
> 
> 标签：c++, opencv, contour

我想重现[此处](http://www.bukisa.com/articles/263221_connected-components-using-opencv)找到的有关连接组件的示例（代码不再在线，我想使用 C++ API）。

我使用了以下调用`findCountours`：

```
findContours(img, contours, hierarchy, CV_RETR_CCOMP,CV_CHAIN_APPROX_SIMPLE); 
```

其中img是通过对文章中提出的图像进行阈值化获得的：

[输入图片 http://img8.imageshack.us/img8/7249/78825396.png](http://img8.imageshack.us/img8/7249/78825396.png)

预期的输出是：

[输出图像 http://img8.imageshack.us/img8/5142/resultw.png](http://img8.imageshack.us/img8/5142/resultw.png)

根据我的描述，`CV_RETR_CCOMP`我期望有 6 个顶层轮廓，它们对应于结果图像的 6 种颜色。

它在文档中说连接组件位于顶层，并且孔是连接组件（CC）的子级。

但是从 的探索中`hierarchy`，我可以看到前 3 个轮廓 (0, 1, 3) 既没有父母也没有孩子。它们对应于“a”字母中的孔。其他轮廓在层次结构中（参见最后的转储）。Contours 3 是包含所有图像的“顶级”CC。其他轮廓是预期 CC 的外部轮廓。

```
Contour 0: next: 1,  previous: -1,  child: -1,  parent: -1,  size: 4
Contour 1: next: 2,  previous: 0,  child: -1,  parent: -1,  size: 4
Contour 2: next: 3,  previous: 1,  child: -1,  parent: -1,  size: 4
Contour 3: next: -1,  previous: 2,  child: 4,  parent: -1,  size: 4
Contour 4: next: 5,  previous: -1,  child: -1,  parent: 3,  size: 121
Contour 5: next: 6,  previous: 4,  child: -1,  parent: 3,  size: 80
Contour 6: next: 7,  previous: 5,  child: -1,  parent: 3,  size: 18
Contour 7: next: 8,  previous: 6,  child: -1,  parent: 3,  size: 18
Contour 8: next: 9,  previous: 7,  child: -1,  parent: 3,  size: 18
Contour 9: next: -1,  previous: 8,  child: -1,  parent: 3,  size: 8 
```

我已经用 OpenCV 2.2 和 2.3.1 测试了代码。我用更简单的图像（带孔的圆）进行了测试，得到了相同的结果（3 个轮廓：0 是孔，1 是顶层，2 是外轮廓）。

有人可以解释这与 doc有何关系`CV_RETR_CCOMP`？

# wordpress - 在 wordpress 多站点安装上自动添加更多页面

> ID：13718760
> 
> 赞同：0
> 
> 时间：2012-12-05T08:07:55.493
> 
> 标签：wordpress

我想在 wordpress 多站点上制作 5 个带有导航的页面。

这意味着当新用户注册新站点时，他/她将获得一个带有 5 个默认页面和导航菜单的新站点。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:15:06.070

我终于找到了。:) 它在

> wp-admin/includes/upgrade.php

函数名

> wp_install_defaults();

覆盖此函数以在 wp install 上生成自定义帖子和页面。

# iphone - Cocos 2d 2.0 shouldAutorotate 不工作？

> ID：13718761
> 
> 赞同：1
> 
> 时间：2012-12-05T08:07:58.113
> 
> 标签：iphone, cocos2d-iphone, cocos2d-x

我有一些问题。我有一个即将完成开发的 cocos2d 游戏。但是，我遇到了一个问题，我需要在我的应用程序列表中启用纵向方向，以便游戏中心登录工作而不会引发 SIGABRT 错误。因此，一旦我从我的应用程序的构建摘要页面启用它（或将其添加到 info.plist 文件作为支持的方向），它就可以正常工作。但是，在我的游戏中，如果您转动 iPhone，它会在感应到您以这种方式转动时切换到纵向模式。我已经尝试从我的 AppDelegate.m 中弄乱 shouldAutorotateToInterfaceOrientation 方法，它根本没有被调用，也没有在任何时候被调用。我在方法中抛出了一个 NSLog 语句来确定它是否被调用，而事实并非如此。

所以，基本上我真正的问题是。当 Game Center 登录屏幕弹出时，我需要我的游戏保持横向模式。我如何在 Cocos2d 2.0 游戏中做到这一点？

我正在使用iOS6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:30:37.067

首先，确保应用在目标摘要中支持纵向和横向。

然后你需要创建一个新的根视图控制器来强制你进入横向模式，这样你的游戏就不会开始奇怪地旋转：

```
@implementation CUSTOM_RootViewController
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotate {
    return YES;
}

@end 
```

最后，在 AppDelegate.m 文件中，用新的导航控制器替换原来的导航控制器：

```
// Create a Navigation Controller with the Director
//navController_ = [[UINavigationController alloc] initWithRootViewController:director_];
navController_ = [[SMD_RootViewController alloc] initWithRootViewController:director_];
navController_.navigationBarHidden = YES; 
```

现在您应该能够在顶部覆盖纵向视图。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:35:49.017

在 AppDelegate.mm 中使用此代码

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_6_0

-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskLandscape;
}

- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskLandscape;
}
#else
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
}
#endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T06:26:15.363

在 IOs6 shouldAutorotateToInterfaceOrientation 方法不起作用，所以你在 appDelegate .m 文件 [window addSubview:viewcontroller] 更改为 [window setRootviewcontroller:viewcontroller] 后它的工作正常。

# delphi - Delphi DBGrid 在编辑时禁用单击另一行

> ID：13718764
> 
> 赞同：2
> 
> 时间：2012-12-05T08:08:30.317
> 
> 标签：delphi, dbgrid

我有一个 dbgrid 显示来自 Ttable 的数据，我的问题是，在网格中编辑一行时，焦点在我要编辑的行上，但我仍然可以单击另一行并对其进行编辑。如何禁用单击另一行或将注意力集中在同一行上？

第二个问题是（仍然在 dbgrid 上）当我编辑一列并双击该列时，焦点移动到文本行的末尾，因此不显示原始文本，而只显示最后一个字符和空格。

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:43:00.523

在玩了一段时间之后，我发现当单击另一行时，没有简单的方法可以禁止用户从突出显示的行（要编辑的行）移动。最好的方法是在他单击另一行时取消，我使用的是 TTable 和 TQuery，所以在 BeforePost 事件中，只需取消您的表或查询。但是你也需要在 AfterScroll 上做同样的事情，以防万一。

感谢你的帮助。

# forms - 通过表单传递单选按钮

> ID：13718772
> 
> 赞同：1
> 
> 时间：2012-12-05T08:09:02.097
> 
> 标签：forms, radio-button

我正在设计一个有五种形式的投资组合。一个是主页，三个是不同的艺术类别（每个类别里面有一系列四张图片，每张都有一个单选按钮，询问用户最喜欢哪张图片），最后一个是弹出菜单并告诉用户每个类别中他们最喜欢的艺术品是什么。除了单选按钮外，一切都很好。我如何对它们进行编码，以便在单击一个时，它会告诉 frmTest lblModel =“blah blah”？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:24:49.780

请参阅下面两个无线电组的示例。我还在[这里](http://jsfiddle.net/salih0vicX/KbPuG/)为您创建了简单的演示：

```
<input type="radio" name="group1" value="art_a"> Art A<br>
<input type="radio" name="group1" value="art_b" checked> Art B<br>
<input type="radio" name="group1" value="art_c> Art C </br>

<!-- next group -->

<input type="radio" name="group2" value="image_a"> Favorite Image A<br>
<input type="radio" name="group2" value="image_b" checked> Favorite Image B<br>
<input type="radio" name="group2" value="image_c> Favorite Image C </br> 
```

# c# - 如何在 Mono 开发（Ubuntu，Linux）中将 Saltarelle C# 设置为 JavaScript 编译器

> ID：13718787
> 
> 赞同：2
> 
> 时间：2012-12-05T08:09:56.907
> 
> 标签：c#, javascript, linux, compiler-construction, monodevelop

我尝试在 Mono 的默认控制台项目上使用[Saltarelle C# 编译器](http://www.saltarelle-compiler.com/)

```
using System;

namespace SaltarelleConsoleTest
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            Console.WriteLine ("Hello World!");
        }
    }
} 
```

但是当我尝试用终端命令编译它时

```
mono lib/Saltarelle.Compiler/tools/sc.exe -reference:lib/Saltarelle.Runtime/tools/Assemblies/mscorlib.dll Main.cs -outscript:bin/main.js 
```

发生此错误：

```
Unhandled Exception: System.TypeLoadException: Could not load type 'Saltarelle.Compiler.Program' from assembly 'sc, Version=1.5.0.0, Culture=neutral, PublicKeyToken=a4048e8fcc593f14'.
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeLoadException: Could not load type 'Saltarelle.Compiler.Program' from assembly 'sc, Version=1.5.0.0, Culture=neutral, PublicKeyToken=a4048e8fcc593f14'. 
```

我做错了什么？[有没有人用 Saltarelle （或任何其他 C# 到 Javascript 编译器如Script#](http://scriptsharp.com/)）成功设置 Mono-Develop

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:37:20.390

我试过你的例子，它产生以下内容：

```
Main.cs(9,13): error CS0103: The name `Console' does not exist in the current context 
```

考虑到 Saltarelle 的`System`命名空间没有`Console`类型，这是正确的。我不知道为什么它会给你未处理的异常，你使用的是什么版本？

Saltarelle 是一个不依赖于 Mono 或 Visual Studio 的外部编译器，尽管您可以配置 IDE 以在编译项目时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:02:43.830

你必须：

1.  消除 MS System.dll 引用（并使用 System; 所以没有 Console.WriteLine ！）；
2.  添加对 saltarelle mscorlib.dll 的引用，也可以添加对 Script.Web.dll 的引用
3.  指示运行时：

mono --runtime=v4.0.30319 lib/Saltarelle.Compiler/tools/sc.exe -reference:lib/Saltarelle.Runtime/tools/Assemblies/mscorlib.dll Main.cs -outscript:bin/main.js

# android - 如何处理 webview 中的错误？

> ID：13718789
> 
> 赞同：2
> 
> 时间：2012-12-05T08:10:11.743
> 
> 标签：android, webview, webviewclient

我想加载一个网页。

```
private class MyJavaScriptInterface {

    private MyJavaScriptInterface () {
    }

    public void setHtml(String contentHtml) {

        if (contentHtml != null && contentHtml.trim().length() > 0) {
            //Do something
        }
    }
}
private WebViewClient webViewClient = new WebViewClient() {

    @Override
    public void onPageFinished(WebView view, String url) {

        view.loadUrl("javascript:window.ResponseChecker.setHtml"
            + "(document.body.innerHTML);");
        if (progressDialog != null && progressDialog.isShowing()) {
            progressDialog.dismiss();
        }
    }

    public void onReceivedSslError(WebView view, SslErrorHandler handler,
        SslError error) {
        handler.proceed();
    }

    public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
        Log.e("ProcessPayment", "onReceivedError = " + errorCode);
    }

}; 
```

我想处理网页加载错误。我知道错误可以在 `onReceivedError(...)`方法中获得。

我的问题是如何处理错误而不显示`Page Not found`在 webview 中？（例如：显示一个对话框并使 webview 为空白）。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T08:13:14.890

检查为：

```
 public void onReceivedError(WebView view, int errorCode, 
                           String description, String failingUrl) {
             Log.e("ProcessPayment", "onReceivedError = " + errorCode);

            //404 : error code for Page Not found
             if(errorCode==404){
               // show Alert here for Page Not found
               view.loadUrl("file:///android_asset/Page_Not_found.html");
             }
            else{

              }
           } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-27T17:08:18.617

```
public void onReceivedError(WebView view, int errorCode, String description,
        String failingUrl) {

    if (errorCode == ERROR_HOST_LOOKUP || errorCode == ERROR_FILE_NOT_FOUND) {
        // TODO your dialog here
    }
} 
```

# ftp - sftp/ftp 需要有关错误消息的信息

> ID：13718791
> 
> 赞同：0
> 
> 时间：2012-12-05T08:10:23.647
> 
> 标签：ftp, sftp, messages

我需要填充可能遇到的错误列表`sftp`和`ftp`。之后，我只需要匹配此列表附带的错误并执行各种操作。

在我的属性文件中

```
SFTP_ERRORS= <list of comman separated token> 
```

后来在java中，我只是对此进行了简单的迭代

```
StringTokenizer tok = new StringTokenizer(getProperty(SFTP_ERRORS),",");
while (tok.hasMoreTokens()) {
  /// various action for specific errors
} 
```

我无法找到完整的错误消息列表，`sftp`并且`ftp`会给出。

此外，有些已登录，有些已登录`stdout`，`stderr`这是另一回事。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:05:53.210

对于 SFTP，[第 20 页](https://datatracker.ietf.org/doc/html/draft-ietf-secsh-filexfer-02)可能会有所帮助。[JSCH](http://www.jcraft.com/jsch/)以 SftpException 的形式返回 id 和消息。

# javascript - 图像上传部分中的跨浏览器图像预览在 ie8 中不起作用

> ID：13718795
> 
> 赞同：7
> 
> 时间：2012-12-05T08:10:37.347
> 
> 标签：javascript, image, internet-explorer, upload, cross-browser

我网站上传图片部分的图片预览在 IE8+ 浏览器中不起作用。但在 IE7 和 IE6 中工作正常。我正在使用下面的代码来实现图像预览功能。 **JS：**

```
var loadImageFile = (function () {
    if (window.FileReader) {
        var oPreviewImg = null, oFReader = new window.FileReader(),
            rFilter = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;

        oFReader.onload = function (oFREvent) {
            if (!oPreviewImg) {
                var newPreview = document.getElementById("imagePreview");
                oPreviewImg = new Image();
                oPreviewImg.style.width = (newPreview.offsetWidth).toString() + "px";
                oPreviewImg.style.height = (newPreview.offsetHeight).toString() + "px";
                newPreview.appendChild(oPreviewImg);
            }
            oPreviewImg.src = oFREvent.target.result;
        };

        return function () {
            var aFiles = document.getElementById("imageInput").files;
            if (aFiles.length === 0) { return; }
            if (!rFilter.test(aFiles[0].type)) { alert("You must select a valid image file!"); return; }
            oFReader.readAsDataURL(aFiles[0]);
        }

    }
    if (navigator.appName === "Microsoft Internet Explorer") {
        return function () {
            document.getElementById("imagePreview").filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = document.getElementById("imageInput").value;

        }
    }
})(); 
```

**CSS 样式：**

```
#imagePreview {
    width: 160px;
    height: 120px;
    float: right;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale);
}
</style> 
```

**HTML：**

```
<html>
    <body>
        <div id="imagePreview"></div>

        <form name="uploadForm">
            <p><input id="imageInput" type="file" name="myPhoto" onchange="loadImageFile();"><br>
            <input type="submit" value="Send"></p>
        </form>

    </body>
</html> 
```

此代码在 IE 6 和 IE7 中运行，但不在 IE8+ 中运行。任何人都知道上面代码中的问题是什么。运行示例链接： [https ://developer.mozilla.org/files/3699/crossbrowser_image_preview.html](https://developer.mozilla.org/files/3699/crossbrowser_image_preview.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-10T10:07:47.543

请查看这篇文章： [如何在通过JavaScript上传之前上传预览图像](https://stackoverflow.com/questions/4094012/how-to-upload-preview-image-before-upload-through-javascript)
我已经测试过，必须做的一件事：

```
IE8 需要更改安全设置：互联网设置、安全性、自定义级别：

 [] 上传文件到服务器时包含本地目录路径
 ( ) 禁用
 (o) 启用
```

启用此选项后，您的演示在 ie8 中运行良好！[https://developer.mozilla.org/files/3699/crossbrowser_image_preview.html](https://developer.mozilla.org/files/3699/crossbrowser_image_preview.html)
谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T07:15:47.760

按照这篇[文章做](https://stackoverflow.com/questions/23361822/get-image-hight-after-dximagetransform-microsoft-alphaimageloader/23511042#23511042)

您的代码中缺少的是高度和宽度设置

试试这个

```
 imagePreview.style.width = "160px";
    imagePreview.style.height = "120px"; 
```

如果图像尺寸大于提及的尺寸，它不会在您编码时扩展，`sizingMethod=scale`请将`sizingMethod=image`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T23:03:38.770

IE8 用 -ms-filter 替换了过滤器。如果要同时支持 IE7 和 8，则需要同时提供这两种样式。-ms-filter 的语法也与 filter 略有不同。

您可能会在此处找到更多信息： [IE8 忽略“过滤器”CSS 样式](https://stackoverflow.com/questions/6593873/ie8-ignores-filter-css-styles)

# sql - 当列包含至少一个匹配项时返回一个值

> ID：13718797
> 
> 赞同：0
> 
> 时间：2012-12-05T08:10:42.693
> 
> 标签：sql, postgresql, postgresql-8.3

编辑：很抱歉在此之前没有提及 postgres 8.3 实现。

我有一张今天建造的四列表格。

```
Source_IP, Destination_IP, user_type, ut_bool 
```

该`user_type`列不断获得新条目，因此我想将其与历史条目表进行比较，以查看它在相关日期是否是新条目。,可以被认为是主`source_ip`键`destination_Ip`

```
10.1.1.2, 30.30.30.1, type1, 0
10.1.1.2, 30.30.30.1, type4, 1
10.1.1.2, 30.30.30.4, type5, 0
10.1.1.2, 30.30.30.4, type3, 0
10.1.1.2, 30.30.50.9, type2, 0
10.1.1.4, 30.30.30.4, type4, 0
10.1.1.4, 30.30.30.4, type3, 1 
```

`source_ip, destination_ip`如果至少一对旁边有一个 1 ，我无法将 1 返回给给定的一组 ( ) 对的列`source_ip,destination_ip, user_type`，例如我想得到

```
10.1.1.2, 30.30.30.1, 1
10.1.1.2, 30.30.30.4, 0
10.1.1.4, 30.30.30.4, 1 
```

我不确定如何正确使用存在语句。

**如何修复以下查询？**

```
select source_ip, destination_ip,
(
select
case when exists 
(select true from table
where ut_bool =1)
then '1'
else '0' end
) as ut_new
from
table; 
```

我的查询不断返回，因为我没有正确使用存在语句：

```
10.1.1.2, 30.30.30.1, 0
10.1.1.2, 30.30.30.4, 0
10.1.1.4, 30.30.30.4, 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:27:59.240

我建议修改您的 SQL 语句：

```
SELECT SOURCE_IP,
  DESTINATION_IP,
  CASE SUM(UT_BOOL)
    WHEN 0
    THEN 0
    ELSE 1
  END AS UT_NEW
FROM test_table_name
GROUP BY SOURCE_IP,
  DESTINATION_IP; 
```

在您的测试数据上执行返回：

```
10.1.1.2    30.30.50.9  0
10.1.1.2    30.30.30.1  1
10.1.1.2    30.30.30.4  0
10.1.1.4    30.30.30.4  1 
```

在 Oracle 和 Postgres 上测试和工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T00:00:09.897

```
SELECT Source_IP, Destination_IP
    , MAX(ut_bool) As the_value
FROM ztable
GROUP BY Source_IP, Destination_IP
    ; 
```

# jquery - jQuery旋钮停止在最大值

> ID：13718800
> 
> 赞同：3
> 
> 时间：2012-12-05T08:10:59.167
> 
> 标签：jquery, jquery-knob

我正在使用带有选项的[jQuery 旋钮](http://anthonyterrien.com/knob/)`data-displayPrevious=true`。

我需要一些行为上的改变：

如果用户向上更改值，它应该在最大值处停止，并且在溢出最大值后不会跳到最小值。如果用户更改值，它应该至少停止。完全像这样：[http ://demo.tutorialzine.com/2011/11/pretty-switches-css3-jquery/](http://demo.tutorialzine.com/2011/11/pretty-switches-css3-jquery/)

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:10:50.607

这是您可以执行的方法的粗略示例。[http://jsfiddle.net/KjtSP/](http://jsfiddle.net/KjtSP/)

它有一些问题，比如如果你回去就不会继续拖，但除此之外，它应该作为你概念的一个很好的基础。基本上我正在做的是在它之前检查旋钮想要设置的值，如果它符合超过最大值或低于最小值的标准，可以说，我取消当前的鼠标事件。

通过返回 false 我们阻止插件设置它收到的值。

```
var knob = $(".dial");
lastValue = 0;
max = 100;
min = 0;
variance = Math.floor(max / 5);

knob.knob({
    "change": function(v) {
        if (v > max - variance && lastValue < min + variance) {
            knob.val(0).change();
            return false;
        } else if (v < min + variance && lastValue > max - variance) {
            knob.val(100).change();
            return false;
        }
        lastValue = v;
    }
});​ 
```

**更新**

由于返回 false**确实会**阻止设置新值，因此您可以做的不是调用`mouseup`允许进程继续的尔格。稍微调整一下我的代码，得到以下[fiddle](http://jsfiddle.net/TJVFc/1/)，可以让你做你想做的事。

您遇到此代码的唯一*怪癖是，如果您超过代码中设置的容差或阈值，您的旋钮***将**达到该值，但我个人认为它应该是这样工作的。

# eclipse - 通过 M2E 在 Eclipse 中禁用泛型验证

> ID：13718815
> 
> 赞同：2
> 
> 时间：2012-12-05T08:12:07.650
> 
> 标签：eclipse, maven, m2e

我有这个来自 Java 1.4（古老，我知道！）的遗留项目，它具有未指定泛型类型的所有 List 和 ArrayList。我最近将此项目迁移到 Maven 以便于构建自动化。

现在，当我将它导入 Eclipse 时，我会看到大量警告，例如*ArrayList 是原始类型。对泛型 ArrayList 的引用应该被参数化*。有没有办法指示 pom.xml 中的 M2E 在将此项目导入 Eclipse 时自动禁用这些检查？

注意：我希望项目在 Java 1.6 下编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:38:02.857

Eclipse 显示警告，不一定是 m2e 插件。

在 Eclipse 中，您可以像这样配置项目的目标编译器：

*   *在Package Explorer*中右键单击您的项目
**   选择*Java 编译器**   单击*启用项目特定设置**   *将编译器合规级别*更改为*1.4**

 *![在此处输入图像描述](../Images/4fae3a341134dca470db1fd34e63eaaa.png)

这应该消除您在 Eclipse 中看到的警告。

正如@Duncan Jones 所指出的，如果您想通过命令行使用 Maven 构建，请将您的目标编译器添加到您的项目 pom 文件中，而不会出现任何编译时警告。

**更新**

如果做不到这一点，`@SuppressWarnings("rawtypes")`如果您愿意忽略该问题，您可以添加为类级别注释。这将为您提供您正在寻找的独立于 IDE 的解决方案。*

# c# - 在命令提示符 (cmd) 中执行 C#

> ID：13718816
> 
> 赞同：2
> 
> 时间：2012-12-05T08:12:08.437
> 
> 标签：c#, command-line, cmd

Python 允许执行以下操作：打开 cmd 后，我可以启动 python，然后运行直接在 cmd 中返回结果的 python 命令。例如，我键入`print word`并 cmd 返回`word`. C# 是否有类似的事情，或者执行 C# 代码的唯一方法是将其写入文件然后编译？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T08:15:48.780

使用 PowerShell。

这将允许您访问 .Net Framework 中的对象以及操作系统中的对象。

检查这个简单的例子：

![在此处输入图像描述](../Images/f223d58bd19c0ff7225c9290848fb06a.png)

或者您可以查看这个高级示例：

[http://blogs.technet.com/b/stefan_gossner/archive/2010/05/07/using-csharp-c-code-in-powershell-scripts.aspx](http://blogs.technet.com/b/stefan_gossner/archive/2010/05/07/using-csharp-c-code-in-powershell-scripts.aspx)

# python - 在启动时将 python 脚本作为守护进程运行（Ubuntu）

> ID：13718821
> 
> 赞同：9
> 
> 时间：2012-12-05T08:12:20.183
> 
> 标签：python, upstart, werkzeug

我已经使用 werkzeug 创建了小型 Web 服务器，并且可以使用`python my_server.py`. 页面加载，一切正常。现在我想在我的电脑启动时启动它。最简单的方法是什么？我一直在与暴发户斗争，但它似乎并没有“生活在后台”，因为在我执行后`start my_server`我立即收到`kernel: [ 8799.793942] init: my_server main process (7274) terminated with status 1`

my_server.py：

```
...
if __name__ == '__main__':
    from werkzeug.serving import run_simple
    app = create_app()
    run_simple('0.0.0.0', 4000, app) 
```

新贵配置文件 my_server.conf：

```
description "My service"
author  "Some Dude <blah@foo.com>"
start on runlevel [2345]
stop on runlevel [016]
exec /path/to/my_server.py
start on startup 
```

任何想法如何使它工作？或者任何其他更好的方式来守护脚本？

**更新：** 我相信问题出在`my_server.py`. 它似乎并没有首先启动网络服务器（方法`run_simple()`）。应该采取哪些步骤来使 .py 文件由任务处理程序（例如 upstart）运行？

*   将shebang作为第一行`#!/usr/bin/env python`
*   允许执行权限`chmod 755`
*   以超级用户权限启动守护进程（绝对确保没有权限限制阻止它启动）
*   确保所有 python 库都在那里！
*   *还有什么？*

**已解决：** 问题在于缺少 python 依赖项。通过任务管理器（例如`upstart`或`start-stop-daemon`）启动脚本时，不会引发错误。需要绝对确定 pythonpath 包含你需要的一切。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T10:21:46.680

除了 gg.kaspersky 方法，您还可以将脚本变成“服务”，以便您可以使用以下方法启动或停止它：

```
$ sudo service myserver start
 * Starting system myserver.py Daemon                          [ OK ]
$ sudo service myserver status
 * /path/to/myserver.py is running
$ sudo service myserver stop
 * Stopping system myserver.py Daemon                          [ OK ] 
```

并将其定义为启动服务：

```
$ sudo update-rc.d myserver defaults 
```

为此，您必须创建此文件并将其保存在 /etc/init.d/ 中。

```
#!/bin/sh -e

DAEMON="/path/to/myserver.py"
DAEMONUSER="myuser"
DAEMON_NAME="myserver.py"

PATH="/sbin:/bin:/usr/sbin:/usr/bin"

test -x $DAEMON || exit 0

. /lib/lsb/init-functions

d_start () {
        log_daemon_msg "Starting system $DAEMON_NAME Daemon"
        start-stop-daemon --background --name $DAEMON_NAME --start --user $DAEMONUSER --exec $DAEMON
        log_end_msg $?
}

d_stop () {
        log_daemon_msg "Stopping system $DAEMON_NAME Daemon"
        start-stop-daemon --name $DAEMON_NAME --stop --retry 5 --name $DAEMON_NAME
          log_end_msg $?
}

case "$1" in

        start|stop)
                d_${1}
                ;;

        restart|reload|force-reload)
                        d_stop
                        d_start
                ;;

        force-stop)
               d_stop
                killall -q $DAEMON_NAME || true
                sleep 2
                killall -q -9 $DAEMON_NAME || true
                ;;

        status)
                status_of_proc "$DAEMON_NAME" "$DAEMON" "system-wide $DAEMON_NAME" && exit 0 || exit $?
                ;;
        *)
                echo "Usage: /etc/init.d/$DAEMON_NAME {start|stop|force-stop|restart|reload|force-reload|status}"
                exit 1
                ;;
esac
exit 0 
```

在这个例子中，我假设你的 python 文件的头部有一个类似 #!/usr/bin/python 的 shebang，这样你就可以直接执行它。

最后但同样重要的是，不要忘记为您的 python 服务器和服务脚本赋予执行权限：

```
$ sudo chmod 755 /etc/init.d/myserver
$ sudo chmod 755 /path/to/mserver.py 
```

这是我最初学习这个的[页面（法语）。](http://doc.ubuntu-fr.org/tutoriel/comment_transformer_un_programme_en_service)

干杯。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-05T09:49:40.550

一种简单的方法是使用 crontab：

```
$ crontab -e 
```

将出现一个 crontab 文件进行编辑，在末尾写下一行：

```
@reboot python myserver.py 
```

并退出。现在，每次重启后，cron 守护进程都会运行你的 myserver python 脚本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T10:46:47.473

如果您有在启动时启动的[主管](http://supervisord.org/)服务，那么编写一个主管服务要简单得多。

如果您的程序失败，您甚至可以设置自动重启。

# yii - YII getFlashes() 没有删除？

> ID：13718826
> 
> 赞同：1
> 
> 时间：2012-12-05T08:12:38.780
> 
> 标签：yii

在回答之前，请确保您了解我的情况。

1.  我有 CREATE 闪烁的 ajax 调用。
2.  我有其他 ajax 调用将闪烁作为 JSON 获取。

当前正在发生的事情：我单击一个创建闪光灯的按钮。之后我运行一个ajax调用来执行：

```
public function actionGetAllFlashesAsJSON() {
   $flashMessages = Yii::app()->user->getFlashes(true);
   $returnResult = array();
   foreach ($flashMessages as $key => $value) {
     $newItem = array();
     $newItem['message']  = $value;
     $newItem['kind']     = $key;
     $returnResult[]= $newItem;  
   }
   print json_encode($returnResult);
   die();
} 
```

我的问题是，当我连续两次执行这个函数时，它仍然不断返回闪烁。但是，如果我刷新站点，它会显示错误，然后如果我再次按刷新，它就消失了。我的理论是页面刷新会导致其他类型的消息删除......但是什么？在收到上述代码中的消息后，如何强制删除这些消息？

更多背景信息：我将闪烁用作错误消息，但我希望它们在创建时出现在我的网站顶部。Flash 可能是通过 Ajax 创建的，所以我运行 javascript 来检查新消息并显示它们，但我的问题是它多次显示消息，因为在调用 getFlashes 后它们没有被删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:00:11.730

flash 消息由*SESSION*变量控制，当页面加载时 Yii 将其销毁（可能在框架中相当深的地方）。您必须在 ajax 请求开始时手动销毁所有先前的 flash 消息

您可以使用：**getFlashes()**来获取所有现有的 flash 消息

对于其他 Flash 消息方法，请查看[此处的 CWebUser 文档](http://www.yiiframework.com/doc/api/1.1/CWebUser)

# jquery - JQuery UI 编码噩梦

> ID：13718836
> 
> 赞同：4
> 
> 时间：2012-12-05T08:13:30.373
> 
> 标签：jquery, jquery-ui, html-encode, html-escape-characters

我希望能够将任何字符串传递给 JQuery UI 中的按钮文本。

假设我有这个字符串：

Ajouter L'amie a la liste "amies"

在不导致大量 JavaScript 错误的情况下实际传递此文本的唯一方法是对其进行 HTML 编码。

```
registerhtml.dialog({
        modal: true,
        title: 'My Dialog Title',
        resizable: false,
        buttons: [
            {
                text: 'Ajouter L&#39;amie a la liste &quot;amies&quot;',
                click: function(){
                    // Do something important
                    $(this).dialog('close');
                }
            },
            {
                text: 'Cancel',
                click: function() {
                    $(this).dialog('close');
                }
            }
        ]
    }); 
```

但我没有在按钮中看到任何人类可读的文本。只有相同的编码文本。

有没有快速解决这个问题的方法？也许我在按钮对象中缺少一个选项。

或者我应该戴上手套，打电话给护士，然后在 JQuery-ui.js 文件中开始手术？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T08:17:47.673

为了能够使用 htmlentities，您必须`html`在将字符串插入按钮时使用该方法，因为`text`将在不进行实体编码的情况下插入文本：

```
registerhtml.dialog({
    modal: true,
    title: 'My Dialog Title',
    resizable: false,
    buttons: [
        {
            html: 'Ajouter L&#39;amie a la liste &quot;amies&quot;',
            click: function(){
                // Do something important
                $(this).dialog('close');
            }
        },
        {
            html: 'Cancel',
            click: function() {
                $(this).dialog('close');
            }
        }
    ]
}); 
```

[**小提琴**](http://jsfiddle.net/aUskd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:20:26.267

根据您是否使用`'`或为您的字符串，使用 \`"`转义字符串中所有 ör 的`'`出现`"`

例子：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Demo</title>
        <script src="jquery-1.8.2.min.js"></script>
        <script src="jquery-ui-1.9.0.custom.min.js"></script>
        <link href="jQueryUI_css/ui-lightness/jquery-ui-1.8.24.custom.css" rel="stylesheet" />
        <script>
            $(function(){

                //using ' to define a string
                var text = 'Ajouter L\'amie a la liste "amies"'
                $('div').text(text).button();

                //using " to define a string
                var text2 = "Ajouter L'amie a la liste \"amies\"";
                $('button').text(text).button();
            });
        </script>
    </head>
    <body>
    <div></div>
    <button></button>
    </body>
</html> 
```

# javafx - 舞台图标不可见

> ID：13718837
> 
> 赞同：2
> 
> 时间：2012-12-05T08:13:43.087
> 
> 标签：javafx

我正在创建一个示例代码来显示用 Javafx 设计的舞台，它不应该只有最小化和最大化按钮需要关闭 ('X') 按钮。

为此，我们使用以下代码。

```
 Stage stage = new Stage(); 
    // Here we have load it using JFXML
     stage.initModality(Modality.WINDOW_MODAL);
    stage.initStyle(StageStyle.UTILITY);
    stage.setResizable(true);
    if (title != null && !title.trim().isEmpty()) {
        stage.setTitle(title);
    }
    stage.setWidth(w);
    stage.setHeight(h);
    stage.getIcons().add(new Image(Dialog.class.getResourceAsStream("/image/myicon.png")));
    stage.showAndWait(); 
```

现在我在舞台上设置的图标不可见。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:32:18.080

我假设 Windows 作为操作系统（在 MacOSX 中显示图标）。在 Windows 下，`StageStyle.UTILITY`导致使用`WS_EX_TOOLWINDOW`这种情况下不显示图标。您可能需要使用另一个 StageStyle。

*   “PRB：WS_EX_TOOLWINDOW Windows 不显示系统菜单图标”：http: [//support.microsoft.com/kb/179376](http://support.microsoft.com/kb/179376)

# jquery - 如何使用jquery更改点击链接的颜色

> ID：13718840
> 
> 赞同：1
> 
> 时间：2012-12-05T08:13:50.373
> 
> 标签：jquery, jquery-ui, javascript

我写的jquery如下

```
 <script type="text/javascript">
     var jq = $.noConflict();
     jq(document).ready(function(){
     jq("a.tag-link").click(function(){
     jq(".selected").removeClass("selected");
     jq(this).addClass("selected");
    });
   });
  </script> 
```

html类似于

```
 <a href="home.html"class="tag-link selected" >home</a>
 <a href="about-us.html"class="tag-link" >about us</a>
 <a href="why-us.html"class="tag-link" >why-us</a> 
```

在 css `a.selected{color:red;}` 现在我的问题是，当我点击让我们说一下我们的链接时，它的颜色只有在点击时才会变为红色。但是在它被重定向到关于我们页面之后。它的颜色变为默认颜色。它不会变成红色。我希望点击的链接应该是红色，其他应该是默认颜色。请帮助我...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T08:16:03.600

删除整个 jQuery 代码，只需使用 CSS：

```
a:visited {
    color:#FF0000; /* Or color:red; if you prefer not using the hex codes) */
} 
```

链接的可用选择器是：

`a:link {}`
定义普通未访问链接的样式。

`a:visited {}`
定义访问链接的样式。

`a:active {}`
定义活动链接的样式。
单击链接后，链接将变为活动状态。

`a:hover {}` 定义悬停链接的样式。
当鼠标移到链接上时，链接将悬停。

（[来源](http://www.echoecho.com/csslinks.htm)）

或者，如果您希望此选择在单击链接时保持不变，但不适用于所有单击的链接，请使用`localStorage`：

```
var jq = $.noConflict();
jq(document).ready(function(){
    if(localStorage.getItem("clickedLinkId")){ // If "clickedLinkClass" has been set.
        jq('#'+localStorage.getItem("clickedLinkId")).addClass("selected"); // add the class "Selected", to the previously clicked link.
    }
    jq("a.tag-link").click(function(){ // On click
        jq(".selected").removeClass("selected");
        jq(this).addClass("selected");
        localStorage.setItem("clickedLinkId", jq(this).attr("id")); // Save the class of the current element in the localStorage.
    });
}); 
```

HTML：

```
<a href="home.html"class="tag-link selected" id="home" >home</a>
<a href="about-us.html"class="tag-link" id="about" >about us</a>
<a href="why-us.html"class="tag-link" id="why" >why-us</a> 
```

这应该设置先前单击的链接的类，并将单击的链接存储在`localStorage`.

[工作样本](http://jsbin.com/unatod/2/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:10:02.857

您可以通过在下一页具有参数读取功能来做到这一点，

***在 about-us.html 页面中***

```
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script language="javascript" type="text/javascript">
function getURLParameter(id) {
    return decodeURI(
        (RegExp(id + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
    );
}
$(document).ready(function () { 
    clickedUrl = getURLParameter('id');                 
    if(clickedUrl=='aboutus'){
        $(".selected").removeClass("selected");
        $('#aboutus').addClass("selected");
    }
});

</script>
<style type="text/css">
a.selected{color:red;}
</style>

<a id="home" href="home.html?id=home" class="tag-link selected" >home</a>
 <a id="aboutus" href="about-us.html?id=aboutus" class="tag-link" >about us</a>
 <a id="yus" href="why-us.html?id=yus" class="tag-link" >why-us</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:40:28.847

如果您只是希望 /home.html 的链接在您实际位于 /home.html 时变为红色，但不是其他情况，只需解析当前 url

```
var selectedLink = location.href.replace(/http:\/\/[^\/]+\//i,'/');
$('a[href="' + selectedLink + '"]').addClass('selected'); 
```

您只需要将链接路径设为绝对路径，或者更改替换以在最后一个斜杠之前切断所有内容，例如：

```
var selectedLink = location.href.replace(/http:\/\/.*\/([^\/]+)/i,"$1"); 
```

# jquery - 带有 KnockoutJS 可观察数组的嵌套表（父表和子表）

> ID：13718841
> 
> 赞同：1
> 
> 时间：2012-12-05T08:13:50.733
> 
> 标签：jquery, knockout.js, html-table

我正在尝试使用 KnockoutJS 构建一个嵌套的可编辑网格视图，但我不知道在哪里或如何处理它。

我已经通过从我的服务器获取 JSON 数据并使用映射模型来映射所需的 JSON 信息来开始这个过程。我什至有包含所有必需值的父网格。现在基于父网格的选择，它应该向子网格传递 2 个值，然后应该出现子 JSON 方法。而且因为它显然是淘汰赛，所以它应该是完全可以观察到的。

这是我到目前为止所做的代码：

```
var ProductViewmodel;

function bindProductModel(Products) {
    var self = this;
    self.items = ko.mapping.fromJS([]);
    ProductViewmodel = ko.mapping.fromJS(Products.d, self.items);
    console.log(ProductViewmodel);
    ko.applyBindings(ProductViewmodel);
}

function bindModel(data) {
    var self = this;
    self.Locations = ko.mapping.fromJS([]);
    viewModel = ko.mapping.fromJS(data.d, self.Locations);
    console.log(viewModel);
    ko.applyBindings(viewModel);
}

$(document).ready(function () {
    bindProductModel(data);
    $('#child').click(function () {
        bindModel(data2);
        $('#childtable').show();
    });
}); 
```

从服务器返回的 JSON：

```
var data = {
    "d": [{
        "__type": "Warehouse.Tracntrace.Members_Only.StockMovement.ProductStagingMethod",
        "ProductSKUID": 2,
        "ProductSKUName": "Decoder 1131",
        "WarehouseID": 1,
        "WarehouseName": "SoftwareDevelopmentTest",
        "SystemAreaName": "Staging",
        "Qty": 5
    }]
};

var data2 = {
    "d": [{
        "__type": "Warehouse.Tracntrace.Members_Only.StockMovement.StockReturnMethod",
        "LotID": 3,
        "LotName": "TestLot3",
        "AreaID": 11,
        "AreaName": "TestArea2L3",
        "BinID": 20,
        "BinName": "Area10Bin1"
    }, {
        "__type": "Warehouse.Tracntrace.Members_Only.StockMovement.StockReturnMethod",
        "LotID": 4,
        "LotName": "TestLot4",
        "AreaID": 15,
        "AreaName": "TestArea2L4",
        "BinID": 24,
        "BinName": "Area14Bin1"
    }, {
        "__type": "Warehouse.Tracntrace.Members_Only.StockMovement.StockReturnMethod",
        "LotID": 2,
        "LotName": "TestLot2",
        "AreaID": 8,
        "AreaName": "TestArea3L2",
        "BinID": 18,
        "BinName": "Area8Bin2"
    }]
}; 
```

最后是我的简单表：

```
 <table border="1" cellpadding="0" cellspacing="0">
 <tbody data-bind="foreach: items">
   <tr>
   <td>
       <input type="button" name="ShowmetheChild" value="ShowmetheChild" id="child" /></td>
    <td data-bind="text: ProductSKUID"></td>
    <td data-bind="text: ProductSKUName"></td>
    <td data-bind="text: WarehouseID"></td>
    <td data-bind="text: WarehouseName"></td>
    <td data-bind="text: SystemAreaName"></td>
    <td data-bind="text: Qty"></td>
    <div id="childtable" style="display: none";>
        <table>
        <tbody data-bind="foreach: Locations>
        <tr>
           <td data-bind="text: LotName"></td>
           <td data-bind="text: AreaName"></td>
           <td data-bind="text: BinName"></td>
           <td><input type="text" name="Qty" data-bind="text: 0"  /></td>
        </tr>
        </tbody>
        </table>
    </div>
    </tr>

    </tbody> 
```

所以在父表中，数量表应该是可观察的（它应该随着子表中输入的每个数量而减少。）

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:12:00.140

JavaScript 出现了几个问题。

最大的问题是您在单击 ShowMeBUtton 后添加了位置数据。在这种情况下要让 Knockout 正常工作并不容易。因此，我修改了代码，以便在执行 ko.applyBinding 之前将位置数据添加到视图模型中。

简化的 JavaScript 如下。

```
function bindProductModel(Products) {
    var self = this;
    self.items = ko.mapping.fromJS([]);
    ProductViewmodel = ko.mapping.fromJS(Products.d, self.items);
}

function bindModel(vm, data) {
    vm.Locations = ko.mapping.fromJS(data.d);
}

$(document).ready(function() {
    bindProductModel(data);
    bindModel(ProductViewmodel()[0], data2);
    ko.applyBindings(ProductViewmodel);
    $('#child').click(function() {
        $('#childtable').show();
    });
});​ 
```

我在以下位置整理了一个工作小提琴：http: [//jsfiddle.net/photo_tom/p6dW6/23/](http://jsfiddle.net/photo_tom/p6dW6/23/)

# html - 仅将样式表应用于特定元素特征

> ID：13718842
> 
> 赞同：4
> 
> 时间：2012-12-05T08:13:52.597
> 
> 标签：html, css

在做了一些谷歌搜索后，我无法想出答案，所以这是我的问题。有没有办法指定一个特定的元素特征，例如一个 id，应该在其中应用整个样式表？

例如，如果我有一个这样的 html 块

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="./style.css">
    </head>
    <body>
        <div id="my_id">
            <!-- A bunch of elements here -->
        </div>
    </body>
</html> 
```

有没有办法指定包含的规则`./style.css`只应用于匹配元素 in `#my_id`，类似于`#my_id`在样式表中的每个规则之前指定。

我理解`#my_id`在每个规则之前指定将实现这一点，但我想知道是否有一种方法可以做到这一点而无需向样式表添加膨胀。

我正在编写一个greasemonkey(userscript) 脚本，它在特定页面上创建一个“容器”元素，并在其中创建并放置所有其他所需的GUI 元素。我不希望我的 CSS 干扰页面上的 CSS（例如意外覆盖页面上已经存在的规则），但如果可以避免的话，我不想在样式表中添加不必要的膨胀，因为所有规则仅*适用*于“包装”元素和/或其子元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:21:21.477

据我所知，这是不可能的。正如您所说，您可以在规则前加上 ID，但这不是您想要做的。

然而，我应该说，您不必为单个 ID 指定样式表，因为 ID 在页面上下文中应该是唯一的。此外，我发现将相同的 ID 应用于在不同页面上用于不同目的的元素是一种不好的做法，因为这会使编写常见的 JavaScript 页面变得非常混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:27:01.640

这也是人们开始使用[SASS](http://sass-lang.com/)的原因之一。在 SASS 中，这就像将所有 css 类嵌套在 id 类中一样简单，如下所示：

```
#my_id {
  // all styles without editing
  // Now all these styles are applied only if they fall
  // under the element with id "my_id".
} 
```

**编辑：**另一个（丑陋的）选项是使用 an`iframe`而不是 div 并在其中加载您的子元素和样式表，以便按如下方式将其沙箱化。

```
<html>
    <head></head>
    <body>
        <iframe id="my_id">
            <html>
                <head>
                    <link rel="stylesheet" type="text/css" href="./style.css" />
                </head>
                <body>
                    <!-- A bunch of elements here -->
                </body>
            </html>
        </iframe>
    </body>
</html> 
```

PS：不要忘记添加文档类型。为简单起见，我没有在示例中添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:21:07.707

您可以使用 > 选择器将样式应用于 #my_id 中的元素。例子：

```
#my_id {
  /* some style for #my_id */
}

#my_id > p {
  /* this will style all p tags within #my_id */
} 
```

# maven - Maven 插件输出到使用过滤的资源文件

> ID：13718845
> 
> 赞同：0
> 
> 时间：2012-12-05T08:14:11.730
> 
> 标签：maven, maven-dependency-plugin, maven-resources-plugin

我的资源文件包含：

```
${project.version}
${dependency.tree} 
```

是否可以用命令输出替换（过滤）`${dependency.tree}`属性？`mvn dependency:tree -Dincludes=com.foo.bar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:24:31.090

这里没有简单的出路，但我认为这是可能的。

我会这样做：

1.  `dependency`将插件目标`tree`执行绑定到`generate-resources`阶段并将其配置为将所有内容输出到某个文件（`outputFile`选项，请参见[此处](http://maven.apache.org/plugins/maven-dependency-plugin/tree-mojo.html)）。
2.  使用`gmaven`插件将此文件加载到属性中（有关如何执行[此](https://stackoverflow.com/questions/9335221/read-a-file-into-a-maven-property/9339405#9339405)`dependency.tree`操作，请参阅我的答案）。这应该在 pom.xml 中的上一步之后进行并绑定到阶段。`generate-resources`
3.  使用`resources`插件+过滤来实现目标。

# c# - 如何识别两个不同鼠标的点击？

> ID：13718851
> 
> 赞同：0
> 
> 时间：2012-12-05T08:15:19.600
> 
> 标签：c#, .net, wpf, mouse, mouseevent

我想识别两只鼠标的点击 - 这可能吗？我必须根据按下的按钮执行不同的操作。

**更新**：例如，两个鼠标的两个左键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:14:31.503

我知道原始 Windows API 支持这一点——但我不记得确切的库/API。但它可能需要一些 P/Invoke。您可以从查看 Touch SDK 或[multitouchvista](http://multitouchvista.codeplex.com/)开始，它专门为多个鼠标提供代码。或者，[多点 SDK](http://research.microsoft.com/en-us/um/india/projects/edulab/multipoint.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:19:04.360

看来你必须实现一种多点触控..

看看[TUIO](http://www.tuio.org/)，我以前用过它，用两个鼠标！

# objective-c - 有效地从 NSMutableArray 中删除索引集

> ID：13718858
> 
> 赞同：0
> 
> 时间：2012-12-05T08:15:49.817
> 
> 标签：objective-c, ios

我有一组索引 setOFIndex = {0,1,3,4}。现在我想从 NSMutableArray 中删除这组索引？

这样做的有效方法是什么？

我检查了任何库方法，但找不到任何方法。我不能直接使用 removeObjectAtIndex，因为每个删除数组都会移动一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:19:47.127

```
NSMutableArray *array = [NSMutableArray arrayWithObjects: @"one", @"a", @"two", @"b", @"three", @"four", nil];
NSMutableIndexSet *indexes = [NSMutableIndexSet indexSetWithIndex:1];
[indexes addIndex:3];
[array removeObjectsAtIndexes:indexes];
NSLog(@"array: %@", array);

// Output: array: (one, two, three, four) 
```

[阅读文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T08:20:49.340

您应该使用 NSMUTABleArray 的方法`removeObjectsAtIndexes:` 这是来自文档的代码

```
NSMutableArray *array = [NSMutableArray arrayWithObjects: @"one", @"a", @"two", @"b", @"three", @"four", nil];

NSMutableIndexSet *indexes = [NSMutableIndexSet indexSetWithIndex:1];

[indexes addIndex:3];

[array removeObjectsAtIndexes:indexes];

NSLog(@"array: %@", array); 
```

我只是不明白为什么人们不阅读文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:18:43.837

你为什么不使用

```
– removeObjectsInArray: 
```

将您的 Indexset 转换为数组，然后使用上述方法。

编辑：文档中非常直接的示例。

```
NSMutableArray *array = [NSMutableArray arrayWithObjects: @"one", @"a", @"two", @"b", @"three", @"four", nil];

NSMutableIndexSet *indexes = [NSMutableIndexSet indexSetWithIndex:1];

[indexes addIndex:3];

[array removeObjectsAtIndexes:indexes];

NSLog(@"array: %@", array); 
```

# php - 将信用卡详细信息存储到 mysql 数据库中

> ID：13718862
> 
> 赞同：1
> 
> 时间：2012-12-05T08:16:02.760
> 
> 标签：php

> **可能重复：**
> [在 MySQL 数据库中保存信用卡信息？](https://stackoverflow.com/questions/3328922/saving-credit-card-information-in-mysql-database)

我想知道将信用卡详细信息存储到数据库中是否安全。

我开始考虑使用 AES128 加密它，每个条目都有单独的解密密钥。

但我想知道它安全吗？

我使用 hextobin 和 bintohex 对其进行编码和解码，我成功地完成了所有操作，但我只关心安全性。

存储这些细节的 IV 是什么，我有效地完成了所有编程，但我担心安全我需要采取什么步骤来确保它的安全。

如果我使用专用服务器并使用 SSL 是否安全？我还能做什么。？

提前感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T08:19:22.117

不。风险太高了。更好地使用 Google Checkout、Amazon Payments、2Checkout、Authorize.net、Zaarly 等第三方。

**编辑**

不管您将采取何种保护措施，总有可能有人入侵您的系统（即使是像 RSA 这样的大公司也被入侵了）。如果它发生在你身上，你可能会受到重罚，这取决于它发生在哪个国家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:20:26.000

这里的一个重要问题是您***为什么***要存储信用卡数据？是为了方便用户吗？还是用作身份检查的一部分？无论哪种方式，几乎可以肯定有更好的解决方案。调查第三方网关支付解决方案！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:22:47.330

我认为是的。在计数器 (CTR) 模式下使用 AES-128 分组密码算法。使用 128 位密钥

以下是使用信用卡号从简单数据到复杂数据的加密示例

[http://www.di-mgt.com.au/cryptoCreditcard.html](http://www.di-mgt.com.au/cryptoCreditcard.html)

# php - PHP：借助正则表达式在两个标签之间选择文本

> ID：13718865
> 
> 赞同：0
> 
> 时间：2012-12-05T08:16:06.960
> 
> 标签：php, expression, selection

我得到了这个正则表达式来选择标签之间的文本。

```
preg_match_all('/<t>(.*?)<\/t>/s', $text, $match); 
```

我需要的是编辑这个表达式，所以它只会选择至少有 3 个字符长的文本......这可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:19:12.617

```
'/<t>(.{3,}?)<\/t>/s' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T08:21:19.667

```
preg_match_all('/<t>(.{3,}?)<\/t>/s', $text, $match); 
```

# c++ - 从起点遍历图形并在起点 C++ 结束

> ID：13718869
> 
> 赞同：1
> 
> 时间：2012-12-05T08:16:28.860
> 
> 标签：c++, graph, path, dijkstra

我正在开发一个 C++ 程序，在该程序中，我们必须以一种从用户指定的顶点开始，然后在经过一定的所需距离后在同一个顶点结束的方式遍历顶点和加权边的图。我不知道如何用代码实现它，但到目前为止我有这个：

```
void DijkstrasShortestPath()
{
    while (vertices.size() != 0)
    {
        Vertex* u = extract_min(vertices);
        vector<Vertex*>* adjVertex = AdjVertices(u);

        const int size = adjVertex->size();
        for (int i=0; i<size; ++i)
        {
            Vertex* v = adjVertex->at(i);
            int distance = travel_dist(u, v) +
                u->distFromStart;

            if (distance < v->distFromStart)
            {
                v->distFromStart = distance;
                v->previous = u;
            }
        }
        delete adjVertex;
    }
}

Vertex* extract_min(vector<Vertex*>& vertices)
{
    int size = vertices.size();
    if (size == 0) {
        return NULL;
    }
    int minimum = 0;
    Vertex* min = vertices.at(0);
    int i = 0;
    for( i=1; i<size; ++i)
    {
        Vertex* temp = vertices.at(i);
        if( temp->distFromStart < min->distFromStart) {
            min = temp;
            minimum = i;
        }
    }
    vertices.erase(vertices.begin() + minimum);
    return min;
}

vector <Vertex*>* AdjVertices(Vertex* vert)
{
    vector<Vertex*>* adjVertex = new vector <Vertex*> ();
    const int size = edges.size();
    for(int i=0; i<size; ++i)
    {
        Edge* edge = edges.at(i);
        Vertex* adjacent = NULL;
        if (edge->intersection1 == vert)
        {
            adjacent = edge->intersection2;
        }
        else if (edge->intersection2 == vert)
        {
            adjacent = edge->intersection1;
        }
        if (adjacent && vertices_check(vertices, adjacent))
        {
            adjVertex->push_back(adjacent);
        }
    }
    return adjVertex;
}

int travel_dist(Vertex* u, Vertex* v)
{
    const int size = edges.size();
    for(int i=0; i<size; ++i)
    {
        Edge* edge = edges.at(i);
        if (edge->street_connection(u, v))
        {
            return edge->distance;
        }
    }
    return -1;
}

bool vertices_check(vector<Vertex*>& vertices, Vertex* vert)
{
    const int size = vertices.size();
    for(int i=0; i<size; ++i)
    {
        if (vert == vertices.at(i))
        {
            return true;
        }
    }
    return false;
} 
```

这本质上是 Dijkstra 的最短路径算法，这并不是我想要的。我想要做的是让程序计算距离在用户指定距离的 1 个单位内并且在同一个顶点开始和结束的路线。有什么办法可以通过改变我所拥有的来做到这一点？

这是否需要广度优先搜索或深度优先搜索而不是 Dijkstra 算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:01:59.323

Dijkstra 的算法将只存储从起始节点到任何其他节点的最短路径。相反，您想要的是跟踪通向节点的所有路径。如果你有这些，你可以在每次找到到节点的新路径时检查是否有一条在之前找到的路径，其长度加上新路径的长度在用户指定距离的一个单位内。如果你然后走一条路向前走，另一条路向后走，你就有了循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T01:02:07.043

一种可能的方法。

你可以使用有界的[`best-first search`](https://en.wikipedia.org/wiki/Best-first_search).

创建一个结构，该结构`P`存储形成潜在循环的节点列表，以及到目前为止创建的循环的长度。

`S`通过为每个`S`链接到的节点创建一个单独的 P 结构，在指定的顶点进行搜索。将这些 P 结构添加到优先级队列中，该队列按 P 结构描述的路径长度排序。

考虑这些节点中的每一个依次从优先级队列中删除它们的 P 结构，复制它们的 P 结构，并附加它们链接到的节点。如果要添加的节点已经存在于 P 结构中而不是不存在`S`，则丢弃该结构并且不再考虑该路由。同样，如果任何路径超过指定的成本`C`，则丢弃该路径并且不再考虑它。如果路径没有被丢弃，则将其关联的 P 结构添加到优先级队列中。

如果`S`确实两次出现在一个P结构中，并且P结构描述的路径长度在允许的范围内，则成功退出。如果不是，则继续搜索，直到priortiy-queue 为空。

[您可以通过使用可接受的启发式方法](https://en.wikipedia.org/wiki/Admissible_heuristic)来加速算法来猜测从给定节点到 的距离`S`，将其添加到正在进行的路径的既定成本中，并使用总和作为优先级队列的排序键。这种启发式是[A* 算法](https://en.wikipedia.org/wiki/A%2a_search_algorithm)的核心，您可能会对此感兴趣。

这清楚吗？如果没有，我可以编写一个简短的示例代码。

# php - 特殊字符“'”未正确显示 PHP？

> ID：13718884
> 
> 赞同：-4
> 
> 时间：2012-12-05T08:17:54.420
> 
> 标签：php, special-characters

我已经问过一个与此相关的问题，根据我使用的一个答案`<meta charset=utf-8>`，使用此之后，其他**特殊字符**正在正确显示，但“'”尚未正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:43:27.730

您必须确保在 PHP 配置为处理 UTF-8 的任何地方都使用 UTF-8。

在 html 中，添加元标记：

```
<meta charset="utf-8" /> 
```

并将其保存为 UTF-8 格式。这里是[如何在记事本++ 中做到这一点](https://superuser.com/questions/21135/how-can-i-edit-unicode-text-in-notepad)。

在`php.ini`:中[启用 UTF-8](http://www.php.net/manual/en/ini.core.php#ini.default-charset)

```
default_charset = "utf-8" 
```

[有关在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)的完整手动检查

# javascript - 为什么原型中声明的函数没有被调用？

> ID：13718890
> 
> 赞同：8
> 
> 时间：2012-12-05T08:18:31.497
> 
> 标签：javascript, inheritance, prototype

```
var p = function () {
    this.show = function () {
       alert('hello world!!!');
    }
}

p.prototype.show = function() {
    alert('haha');
}

var o  = new p();
o.show(); 
```

会报警`"hello world!!!"`，为什么？

我可以修改原型方法吗，如果可以怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T08:21:06.640

这是因为您在构造函数中定义的特定函数会覆盖通过原型继承的函数。

来自[EcmaScript 规范](http://www.ecma-international.org/ecma-262/5.1/#sec-4.2.1)：

> 构造函数创建的每个对象都有一个对其构造函数的“原型”属性值的隐式引用（称为对象的原型）。此外，原型可能具有对其原型的非空隐式引用，依此类推；这称为原型链。当引用对象中的属性时，该引用是指原型链中包含该名称属性的第一个对象中该名称的属性。换句话说，首先检查直接提到的对象是否具有这样的属性；如果该对象包含命名属性，即引用所指的属性；如果该对象不包含命名属性，则接下来检查该对象的原型；等等。

简而言之：在查找函数（或任何按其名称的属性）时，您从对象开始，然后在原型链中向上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T08:20:39.183

您在函数中覆盖您的`prototype.show`方法`p`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:24:01.460

在 Javascript 中，当解析属性时，引擎首先查看对象的属性。在您的示例中，对象将由 表示`this`。如果它找到该属性，在这种情况下`show`（记住函数可以是属性）它使用该属性。如果未找到该属性，则沿原型链迭代以解决该属性。

# cocos2d-iphone - 没有动画的精灵

> ID：13718894
> 
> 赞同：0
> 
> 时间：2012-12-05T08:18:45.487
> 
> 标签：cocos2d-iphone, cocos2d-android

我正在尝试添加一个显示在图层中但尚未动画的 SpriteSheet，我想为 onClick 设置动画。

问题是在将精灵添加到图层时，如果精灵在开始时没有动画，则不会显示精灵。

在 Cocos2D-iphone 中我没有这个问题。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:09:19.873

看看 coocs2d-android 主文件：cocos2d-master\cocos2d-android\src\org\cocos2d\tests\ActionTest.java

在此您可以找到 Animation 类并将您的代码与测试文件进行比较...

或者

写下你的代码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-24T21:39:45.510

或者，在用户单击之前显示静态图像（第一个精灵），然后加载精灵并开始动画。

# android - Android：添加内容视图

> ID：13718900
> 
> 赞同：0
> 
> 时间：2012-12-05T08:19:14.053
> 
> 标签：android, view

我尝试从本机扩展内部向当前活动添加内容视图，如下所示：

```
 // context is the current FREContext
           View extensionview = LayoutInflater.from(context.getActivity().getBaseContext()).inflate(
                context.getResourceId("layout.activity_map"), null);

           context.getActivity().addContentView(extensionview, new ViewGroup.LayoutParams(
                ViewGroup.LayoutParams.FILL_PARENT,
                ViewGroup.LayoutParams.FILL_PARENT)); 
```

如果我开始一项新活动，它会正确显示。我只是不能使用这种方法，因为基础活动已暂停。所以我想将视图作为新的内容视图添加到当前活动中。该视图未显示，但也不会引发任何错误。任何提示这里有什么问题？提前谢谢，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:35:28.200

您必须付出额外的努力并使用 ressourceId，因为它可以从扩展上下文中获得（而不是生成的资源，不是）。

```
 int layoutId = MyExtension.extensionContext.getResourceId("layout.callout");

        LayoutInflater inflater = (LayoutInflater)mContext.getSystemService (Context.LAYOUT_INFLATER_SERVICE);
        View v = inflater.inflate(layoutId, layout); 
```

希望，这可以帮助某人。

# ruby - 一个用于将元素添加到可能不存在的数组的衬垫

> ID：13718901
> 
> 赞同：0
> 
> 时间：2012-12-05T08:19:18.047
> 
> 标签：ruby

有没有一种方法可以将检查数组是否存在并创建和清空的行以及将新元素推入其中的行压缩成一行？

```
hash = {}
(('a'..'z').to_a+('a'..'z').to_a).shuffle.each do |e|
    hash[:"#{e}"] ||= []
    hash[:"#{e}"] << rand(10)
end 
```

我正在寻找更多的风格“||=”但是对于“<<”操作数感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:24:15.217

您可以改为以不同的方式定义哈希：

```
hash = Hash.new {|h, k| h[k] = []}
(('a'..'z').to_a+('a'..'z').to_a).shuffle.each do |e|
    hash[:"#{e}"] << rand(10)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:27:28.487

```
(hash[e.to_sym] ||= []) << rand(10) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T09:39:46.523

`arr.inject({}){|h, x| (h[x.to_sym] || = []) << rand(10); h }`

# android - 条码扫描器连接到平板电脑时软键盘不工作

> ID：13718904
> 
> 赞同：5
> 
> 时间：2012-12-05T08:19:32.177
> 
> 标签：android

```
InputMethodManager imm = (InputMethodManager)getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE); 
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

连接条形码扫描仪时，使用此代码也不会出现软键盘，请帮助解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T19:31:41.163

我找到了解决方案，它适用于 Nexus 4.4.2

```
if(getResources().getConfiguration().hardKeyboardHidden == Configuration.HARDKEYBOARDHIDDEN_NO){
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showInputMethodPicker();
    } 
```

您必须在弹出消息中禁用硬件键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T19:41:56.850

Android 一次只能连接**一个**键盘。

扫描仪算作键盘。

# .htaccess - codeigniter 和 htaccess

> ID：13718916
> 
> 赞同：0
> 
> 时间：2012-12-05T08:20:12.117
> 
> 标签：.htaccess, codeigniter

我最近将一个功能性的 codeigniter 应用程序转移到了一个新的托管服务提供商，并且遇到了我认为与[本主题](https://stackoverflow.com/questions/1872505/codeigniter-configuri-protocolproblem)类似的挑战。总而言之，除非我在 URL 中包含 index.php 引用，否则不会设置我的 $_SERVER['PATH_INFO'] 和 $_SERVER['ORIG_PATH_INFO'] 值。我假设这意味着我的 .htaccess 可能是罪魁祸首或问题的组合。这是我所做的：

1.  我编辑了 codeigniter 的 config.php 文件以删除 index.php 引用

    ```
    $config['index_page'] = ''; 
    ```

2.  我创建了以下 .htaccess 文件以从 URL 中删除 index.php

    ```
    <IfModule mod_rewrite.c>
      RewriteEngine On

      RewriteBase /

      RewriteCond %{REQUEST_FILENAME} !-f
      RewriteCond %{REQUEST_FILENAME} !-d
      #RewriteRule ^(.*)$ index.php?/$1 [L]
      RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
    </IfModule>

    <IfModule !mod_rewrite.c>
      ErrorDocument 404 /index.php
    </IfModule> 
    ```

    我在 RewriteRule [L] 和 [QSA,L] 值之间切换并获得相同的行为。

3.  在 config.php 文件中，我设置了以下值

    ```
    $config['uri_protocol'] = 'PATH_INFO'; 
    ```

使用上述配置，尝试打开 www.mysite.com/test/1234 只需打开 www.mysite.com。但是当我打开 www.mysite.com/index.php / **test** /1234 时，$_SERVER[PATH_INFO] => /test/1234，却只打开 www.mysite.com。

当我切换回：

```
 $config['uri_protocol'] = 'AUTO'; 
```

我可以访问 www.mysite.com/test/1234（不需要 /index.php/），但没有设置 $_SERVER[PATH_INFO] 值。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:10:24.810

开发和生产环境中没有参考 PHP 版本，但乍一看我会尝试更改 cgi.fix-pathinfo 设置：

[http://php.net/manual/en/ini.core.php#ini.cgi.fix-pathinfo](http://php.net/manual/en/ini.core.php#ini.cgi.fix-pathinfo)

如果 php.ini 编辑可用。

# objective-c - awk 从输出中删除空间

> ID：13718921
> 
> 赞同：1
> 
> 时间：2012-12-05T08:20:38.137
> 
> 标签：objective-c, macos, unix, awk

我正在使用`@"df -lH | grep \"/Volumes/*\" | awk '{$1=$2=$3=$4=$5=$6=$7=$8\"\"; print $0 }'"`获取本地安装的卷路径。但如果卷名包含两个或更多空格（Leopard 1）。its(awk) 从输出中删除空间。

输出：

```
$df -lH

Filesystem     Size   Used  Avail Capacity  Mounted on
/dev/disk0s3    81G    61G    19G    77%    /
/dev/disk0s2    81G    72G   8.2G    90%    /Volumes/Leopard  1  2     3
/dev/disk0s4   158G    47G   111G    30%    /Volumes/Backup  

$ df -lH | grep "/Volumes/*"
/dev/disk0s2    81G    72G   8.2G    90%    /Volumes/Leopard  1  2     3
/dev/disk0s4   158G    47G   111G    30%    /Volumes/Backup  

$ df -lH | grep "/Volumes/*" | awk '{$1=$2=$3=$4=$5=""; print $0}'
     /Volumes/Leopard 1 2 3
     /Volumes/Backup 
```

谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:51:48.730

默认情况下`awk`， 的输出字段分隔符是一个空格。所以你的`awk`命令的输出是完全可以预期的。为了得到你想要的结果，你需要使用某种正则表达式，所以试试这个`GNU awk`：

```
df -lH | awk '/Volumes/ { sub(/^(\S+\s+){5}/, ""); print }' 
```

或者，如果您有`GNU sed`：

```
df -lH | sed -nr '/Volumes/s/^(\S+\s+){5}//p' 
```

结果：

```
/Volumes/Leopard  1  2     3
/Volumes/Backup 
```

*编辑：*

不幸的是，我看到它`BSD/OSX awk` [不支持区间表达式。](http://awk.freeshell.org/AwkFeatureComparison)因此，最安全的方法是这样做`awk`：

```
df -lH | awk '/Volumes/ { sub(/^[^ ]+ +[^ ]+ +[^ ]+ +[^ ]+ +[^ ]+ +/, ""); print }' 
```

或与`sed`：

```
df -lH | sed -n '/Volumes/s/^[^ ]\+ \+[^ ]\+ \+[^ ]\+ \+[^ ]\+ \+[^ ]\+ \+[^ ]\+ \+[^ ]\+ \+//p' 
```

这也应该是高度便携的！HTH。

*编辑：*

对于具有 8 列的 Mac OSX 10.8，只需扩展正则表达式：

```
df -lH | awk '/Volumes/ { sub(/^[^ ]+ +[^ ]+ +[^ ]+ +[^ ]+ +[^ ]+ +[^ ]+ +[^ ]+ +/, ""); print }' 
```

或与`sed`：

```
df -lH | sed -n '/Volumes/s/^[^ ]\+ \+[^ ]\+ \+[^ ]\+ \+[^ ]\+ \+[^ ]\+ \+//p' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:27:49.233

使用该`mount`命令更容易，它的输出比`df`, 和更简单`perl`，它支持非贪婪匹配：

```
:; mount | perl -pe 's/.*? on //;s/ \([^\)]*\)$//'
/
/dev
/Volumes/pro Time Machine 2
/Volumes/b
/Volumes/p
/net
/home 
```

请注意，我确实在安装点安装了一个带有空格的卷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T08:37:20.733

```
df -lH | grep "/Volumes/*" | perl -pe 's/[^\%]*\%//g' 
```

如果您想在 awk 中执行此操作：

```
df -lH | grep "/Volumes/*"|awk '{gsub(/[^\%]*\%/,"");print}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T10:01:52.177

检查此命令的输出，可能会帮助您解析和获取信息

```
mount | column -t 
```

# iphone - 如何在文档目录中保存当前日期和时间值？

> ID：13718924
> 
> 赞同：1
> 
> 时间：2012-12-05T08:20:46.953
> 
> 标签：iphone, xcode, uitableview, date

![在此处输入图像描述](../Images/f5e8abebeb1cffc9956f2ecd663ce3f8.png)

正如我上面的屏幕截图所示，我想在 Tableview 的每个单元格中显示两个值。如果我有要在同一类的单元格标签中显示的数据，我可以做到这一点，但对我来说，问题是我尝试使用（NSDocumentDirectory，NSUserDomainMask，是的）从其他视图或其他类中获取这两个标签) 所以我成功地将一个值显示为我的屏幕截图显示，但由当前数据和时间显示组成的另一部分对我来说仍然是问题。现在这是我尝试这样做的代码。

```
NSString *fina = [NSString stringWithFormat:@"%@",mySongname];
NSArray  *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docsDir  = [dirPaths objectAtIndex:0];
    NSString *soundFilePath = [docsDir stringByAppendingPathComponent:@"MyRecordings"];
    if (![[NSFileManager defaultManager] fileExistsAtPath:soundFilePath])
        [[NSFileManager defaultManager] createDirectoryAtPath:soundFilePath withIntermediateDirectories:NO attributes:nil error:nil];
    soundFilePath = [soundFilePath stringByAppendingPathComponent:fina];
    recordedTmpFile = [NSURL fileURLWithPath:soundFilePath];
    recorder = [[ AVAudioRecorder alloc] initWithURL:recordedTmpFile settings:recordSetting error:&error];
    [recorder setDelegate:self];
    [recorder prepareToRecord];
    [recorder record];
    [recordSetting release]; 
```

代码的上述部分工作正常，它在 Tableview 单元格中显示我的屏幕显示的值。现在在同一个函数中，我尝试获取数据以红色部分显示它，这是我在 Tableview 单元格中使用下面的代码的 UILabel。

```
 NSDate* now = [NSDate date];
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
 [dateFormatter setDateFormat:@"dd:MMM:YY_hh:mm:ss a"];
 NSString *file= [dateFormatter stringFromDate:now];
 NSLog(@"myfinaldate:%@",file); 
```

现在我想将此日期值保存在我上面使用的同一目录中，并将其显示为 UITableview 的红色部分。现在这是我的代码，我在其中使用这个 Tableview 并获取这些文档目录值。

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *documentPath = [documentsDirectory stringByAppendingPathComponent:@"MyRecordings"];
directoryContent = [[NSFileManager defaultManager] directoryContentsAtPath:documentPath];
      NSLog(@"file found %i",[directoryContent count]);
[directoryContent retain];
[self.tableView reloadData];
  }

  - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
static NSInteger StateTag = 1;
static NSInteger CapitalTag = 2;
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    UILabel *capitalLabel = [[UILabel alloc] initWithFrame:CGRectMake(2, 2, 80, 20)];
    //capitalLabel.text=@"mydata";
    capitalLabel.backgroundColor=[UIColor redColor];
    capitalLabel.tag = CapitalTag;
    [cell.contentView addSubview:capitalLabel];
    [capitalLabel release];

    UILabel *stateLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, 22, 310, 20)];
    stateLabel.tag = StateTag;
    [stateLabel setFont:[UIFont systemFontOfSize:14]];
    stateLabel.adjustsFontSizeToFitWidth=YES;
    [cell.contentView addSubview:stateLabel];
    [stateLabel release];

}
UILabel * stateLabel = (UILabel *) [cell.contentView viewWithTag:StateTag];
//UILabel * capitalLabel = (UILabel *) [cell.contentView viewWithTag:CapitalTag];

stateLabel.text = [directoryContent objectAtIndex:indexPath.row];
//capitalLabel.text = [directoryContent1 objectAtIndex:indexPath.row];
  return cell;
 } 
```

现在我试图总结这个问题。我们如何将日期和时间值保存在同一目录中，然后如何在 UITableview Cell 的红色部分中显示？capitalLabel 是我的单元格的红色部分，用于显示有问题的日期和时间。stateLabel 全部准备好显示值。所以这个标签没问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:12:18.957

就这样做....

你可以设置`NSCachesDirectory`为`NSDocumentDirectory`

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];

NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:yourComponent];
//    NSLog(@"Path : %@",writableDBPath);

NSMutableDictionary *plistArr = [[NSMutableDictionary alloc] initWithContentsOfFile:writableDBPath]; 
```

# android - 如何调用系统默认播放器播放视频？

> ID：13718930
> 
> 赞同：1
> 
> 时间：2012-12-05T08:21:03.833
> 
> 标签：android, video

我正在开发一个应用程序。我想实现一个我想调用系统默认播放器的功能。

下载自定义音频或视频文件后。可以在程序中使用系统音视频播放器播放吗？

我想创建意图，并给出文件路径。然后调用系统的播放器。

有什么想法吗？</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:28:14.500

尝试这个

```
videourl="/sdcard/zzzz.3gp";

Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(videourl)); 

startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:24:28.203

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(videourl));
startActivity(intent); 
```

上面的代码应该适用于您播放视频文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-21T09:26:06.763

```
String video = "http://www.nandudu.com/hls/course/video/2/test.m3u8";  

Intent openVideo = new Intent(Intent.ACTION_VIEW);  

openVideo.setDataAndType(Uri.parse(video), "video/*");  

startActivity(openVideo); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-20T09:30:12.307

对于**科特林**：

```
val path: String = contentUri.getPath()
val file = File(path)
val intent = Intent(
Intent.ACTION_VIEW,Uri.fromFile(file))
intent.setDataAndType(Uri.parse(path), "video/*")
startActivity(intent) 
```

# c# - 获取 ICollection 的类型参数 实现类

> ID：13718938
> 
> 赞同：3
> 
> 时间：2012-12-05T08:21:43.960
> 
> 标签：c#, .net, generics, reflection

我正在.net 中编写一个小的序列化库。目标是替代 XmlSerialize，但更易于配置，并且不会用属性弄乱模型。

我面临的问题是我需要 `ICollection<T>`在遍历模型期间找到的每个类型。天真的方法是这样的：

```
 var theType=myModel.GetType().GetGenericArguments()[0]; 
```

`ICollection<T>`但它对派生自特定 T的类没有帮助。

```
public class MyClass:A,ICollection<B>{} 
```

我尝试使用反射获取界面

```
 var iCollectionInterface =
  o.GetType().GetInterfaces()
     .Where(i => i.IsGenericType)
     .Select(i => i.GetGenericTypeDefinition())
     .FirstOrDefault(i => i == typeof(ICollection<>)); 
```

but `iCollectionInterface.GetGenericArguments()[0]`is just `T`，不是`B`因为它只描述了接口的定义，而不是它的用法。

有任何想法吗？我也需要它，`IDictionary<TKey, TValue>`但这基本上是相同的问题，并且会有相同的解决方案。

谢谢！

*编辑*

谢谢大家，这是我最终的结果：

```
public static Type GetTypeParameter(object o, Type typeToSearch, int argumentNumber)
{
    return o.GetType()
            .GetInterfaces()
            .Where(i => i.IsGenericType)
            .Where(i => i.GetGenericTypeDefinition() == typeToSearch)
            .Select(t => t.GetGenericArguments()[argumentNumber])
            .FirstOrDefault();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:29:04.990

这就是您需要的：[Type.GetGenericArguments 方法](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx)。

所以，有

```
class MyDictionary: IDictionary<string, decimal>
{
    ...
} 
```

试试这个扩展方法：

```
public static Type[] GetClosingArguments<T>(this Type type)
{
    Type iType = typeof(T).GetInterfaces()
                          .FirstOrDefault(i => i.IsGenericType &&
                                     i.GetGenericTypeDefinition() == type);
    if (iType == null)
        return null;
    else
        return iType.GetGenericArguments();
} 
```

像这样

```
Type[] types = typeof(IDictionary<,>).GetClosingArguments<MyDictionary>();
if (types != null)
{
    foreach (Type t in types)
        Console.WriteLine(t.Name);
} 
```

或相反亦然：

```
public static Type[] GetClosingArguments(this Type type, Type baseGenericType)
{
    Type iType = type.GetInterfaces()
                     .FirstOrDefault(i => i.IsGenericType &&
                               i.GetGenericTypeDefinition() == baseGenericType);
    if (iType == null)
        return null;
    else
        return iType.GetGenericArguments();
} 
```

被称为

```
Type[] types = typeof(MyDictionary).GetClosingArguments(typeof(IDictionary<,>)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T09:31:46.877

从评论看来，您似乎需要弄清楚如何过滤集合以仅包含 ICollection。您可以通过以下方式实现该目标：

```
var iCollectionInterfaces =
      from i in o.GetType().GetInterfaces()
      where i.IsGenericType 
            && i.GetGenericTypeDefinition() == typeof(IColection<>)
      select i; 
```

然后，您可以遍历集合并对每个类型参数执行任何您需要的操作

```
//same type might implement ICollection<T> more than once
foreach(var collection in iCollectionInterfaces) {
     //More than one is invalid for ICollection<T>
    var T = collection.GetGenericArguments().Single();
    //do what ever you need
} 
```

当然，如果你想让它更通用。即支持具有多个类型参数的接口/类型，您需要删除对类型参数的调用`Single`并替换为类型参数的迭代

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:28:29.917

我认为以下电话是问题所在

```
.Select(i => i.GetGenericTypeDefinition()) 
```

您采用已定义泛型参数的封闭泛型类型，然后获得其泛型定义，它是开放的并且只知道`T`. 也许您还需要更改`FirstOrDefault`呼叫，我不确定封闭类型是否等于`ICollection<>`

# c# - 如何通过 C# 编码在 Windows 窗体中显示报表？

> ID：13718939
> 
> 赞同：0
> 
> 时间：2012-12-05T08:21:43.463
> 
> 标签：c#, sql, winforms, reporting

我是新来的报告。我正在使用 MicrosoftaReportViewr 来显示报告。为此，我创建并填充了数据集。然后我尝试将该数据集作为reportviewr1 的源。但我没有得到实际的编码。我的代码是

```
if (cbReprt.Text == "FirmDetails")
{
            ReportDocument rpt = new ReportDocument();

rpt.Load("C:\\Users\\ALEN\\Desktop\\Merchant\\MerchantAssociation\\MerchantAssociation\\CrystalReport1.rpt");

SqlConnection myCon;
SqlDataAdapter myAdapter;

DataSet1 myDataset = new DataSet1(); //The DataSet you created.

           myCon = new SqlConnection("Data Source=202.88.231.102;Initial Catalog=dbs_Merchant;Persist Security Info=True;User ID=sa;Password=abc123*");

           SqlCommand cmd3 = new SqlCommand("select * from View1", myCon);
           cmd3.CommandType = CommandType.StoredProcedure;

           myAdapter = new SqlDataAdapter(cmd3);
           myAdapter.Fill(myDataset, "View1");
           rpt.SetDataSource(myDataset);
           reportViewer1.LocalReport.DataSources= rpt;
          reportViewer1.RefreshReport();
        } 
```

但我 **reportViewer1.LocalReport.DataSources=rpt;** 显示错误...是否需要任何特殊的命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:44:37.723

这是您可以将 DataSources 用于 reportviewer 控件的方式：

```
var myRds = new ReportDataSource("NameOfDataSourceDefinedInTheReport", myDataSet);
reportViewer1.LocalReport.DataSources.Add(myRds); 
```

请记住，报告必须是 SSRS 格式，如果您使用的是 ReportViewer 控件 2010 - 它必须是 SSRS 2008 或更高版本的格式（不推荐使用 2005）。

对于要加载的任何数据，名称“NameOfDataSourceDefinedInTheReport”必须与实际报告中定义的名称相同，当然数据的结构必须与报告中定义的相同。

# r - 表格的图形显示

> ID：13718940
> 
> 赞同：1
> 
> 时间：2012-12-05T08:21:46.203
> 
> 标签：r, console

我希望这不是一个太愚蠢的问题，但我觉得有时查看以 R-console 为中心的表的列会更好......目前，数据（从 csv 文件中读取）是绑定到右边。有没有办法调整这个？

# android - 内存溢出安卓

> ID：13718944
> 
> 赞同：0
> 
> 时间：2012-12-05T08:22:05.513
> 
> 标签：android, bitmap, android-arrayadapter, android-resolution, android-memory

**更新：2012 年 10 月 12 日**

用图像制作后：

```
 WeakHashMap<Bitmap, WeakReference<Bitmap>> objReferenciaDebilBitmaps;
 Bitmap imagen = datossss.getImagen();
 objreCReferencias.RegristrarReferenciaDebilBitmap(imagen, objReferenciaDebilBitmaps); 
```

我的班级 Creferencias

```
public class CReferencias {

public CReferencias(){

}

public void RegristrarReferenciaDebilBitmap(Bitmap img, WeakHashMap<Bitmap, WeakReference<Bitmap>> objReferenciaDebilBitmaps){
    WeakReference<Bitmap> objrererencia1 = new WeakReference<Bitmap>(img);
    objReferenciaDebilBitmaps.put(img, objrererencia1);

} 
```

每次创建图像时都使用它后，我不知道这是否是对位图使用弱引用的正确方法，

但仍然给我带来了问题

这是我的日志猫

```
 12-10 13:54:53.523: E/dalvikvm-heap(1211): Out of memory on a 2304016-byte allocation.
12-10 13:54:53.528: E/AndroidRuntime(1211): FATAL EXCEPTION: main
12-10 13:54:53.528: E/AndroidRuntime(1211): java.lang.OutOfMemoryError
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.graphics.Bitmap.nativeCreate(Native Method)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at dep.Agenda.CustomAdapterDetalleEventos.getView(CustomAdapterDetalleEventos.java:558)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:220)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.AbsListView.obtainView(AbsListView.java:2201)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.ListView.makeAndAddView(ListView.java:1774)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.ListView.fillUp(ListView.java:705)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.ListView.fillGap(ListView.java:645)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.AbsListView.trackMotionScroll(AbsListView.java:5263)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.widget.AbsListView$TwFlingRunnable.run(AbsListView.java:4156)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.os.Handler.handleCallback(Handler.java:605)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.os.Looper.loop(Looper.java:137)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at android.app.ActivityThread.main(ActivityThread.java:4507)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at java.lang.reflect.Method.invokeNative(Native Method)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at java.lang.reflect.Method.invoke(Method.java:511)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-10 13:54:53.528: E/AndroidRuntime(1211):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的适配器

```
 public View getView(final int position,  View convertView, ViewGroup parent){
        View vistaFila =null;

     final  ElementosLinea objelementos;//=null;

        //final ElementosLinea obj;
        //final View auxVistaFila=null;

     LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if (convertView == null) {
             //  LayoutInflater inflator = context.getLayoutInflater();

            //LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            vistaFila = vi.inflate(R.layout.ll_lineas_lista_detalle_evento_nueva, null);

            //AsignarElementos(vistaFila);

           objelementos = new ElementosLinea();
          AsignarElementos(vistaFila,objelementos);

         vistaFila.setTag(objelementos);
         objelementos.posicion= position;

        }else{
            //vistaFila = vi.inflate(R.layout.ll_lineas_lista_detalles_evento, null);
          vistaFila=convertView;
          objelementos=(ElementosLinea)convertView.getTag();
          objelementos.posicion= position;
       }

        DetalleEvento datossss = arrayDatos.get(position);

        if (datossss.getGusta()==0){

            objelementos.btnMegusta.setBackgroundResource(R.drawable.megustagris);
            objelementos.txtMegusta.setText("Me gusta");
        }else{
            objelementos.btnMegusta.setBackgroundResource(R.drawable.megustaazul);
            objelementos.txtMegusta.setText("No me gusta"); 
            }

      //llenamos la barra de progreso
    if (datossss.getTipo()==1){//SI ES UN VIDEO

        objelementos.txtTitulo.setText(datossss.getTituloPost());
        objelementos.txtAutor.setText(datossss.getAutor());
        objelementos.txtPost.setVisibility(View.INVISIBLE);

        if (datossss.getImagen()!=null){
            Bitmap imagen = datossss.getImagen();
            objreCReferencias.RegristrarReferenciaDebilBitmap(imagen, objReferenciaDebilBitmaps);
             int width = imagen.getWidth();
                int height = imagen.getHeight();
                int newWidth = activiadPricipal.getWindowManager().getDefaultDisplay().getWidth();
                int newHeight = newWidth-80;

                float scalarw=((float) newWidth) /width;
                float scalarh=((float) newHeight) /height;

            Matrix ma = new Matrix();
             ma.postScale(scalarw, scalarh);

             Bitmap res = Bitmap.createBitmap(imagen, 0, 0,
                  width, height, ma, true);
        objreCReferencias.RegristrarReferenciaDebilBitmap(res, objReferenciaDebilBitmaps); 
        objelementos.imgfotoVideo.setImageBitmap(res);
        //imagen.recycle();
        //res.recycle();
        objelementos.btnComentarios.setEnabled(true);
        objelementos.pgrprogreso.setVisibility(View.INVISIBLE);

        }else{

              int newWidth = activiadPricipal.getWindowManager().getDefaultDisplay().getWidth();
              int newHeight = newWidth-80;

              objelementos.imgfotoVideo.setImageBitmap(null);
              objelementos.imgfotoVideo.setMinimumHeight(newHeight);
              objelementos.imgfotoVideo.setMinimumWidth(newWidth);
              objelementos.pgrprogreso.setVisibility(View.VISIBLE);
        objelementos.btnComentarios.setEnabled(false);
        }
        objelementos.imgfotoVideo.setVisibility(View.VISIBLE);
        objelementos.btnVerVideo.setVisibility(View.VISIBLE);
        objelementos.txtFecha.setText(datossss.getFecha());
        objelementos.btnVerfoto.setVisibility(View.INVISIBLE);

    }else{  if (datossss.getTipo()==2){ //SI ES UN POST

        objelementos.txtTitulo.setText(datossss.getTituloPost());
        objelementos.txtAutor.setText(datossss.getAutor());
        objelementos.txtPost.setText(datossss.getTexto());
        objelementos.txtPost.setVisibility(View.VISIBLE);
        objelementos.imgfotoVideo.setVisibility(View.INVISIBLE);
        objelementos.imgfotoVideo.setImageBitmap(null);
        objelementos.btnVerVideo.setVisibility(View.INVISIBLE);
        objelementos.txtFecha.setText(datossss.getFecha());
        objelementos.btnVerfoto.setVisibility(View.INVISIBLE);
        objelementos.btnComentarios.setEnabled(true);

        objelementos.imgfotoVideo.setMinimumHeight(0);
          objelementos.imgfotoVideo.setMinimumWidth(0);

          objelementos.pgrprogreso.setVisibility(View.INVISIBLE);
        //rtlCuerpo.set

    }else{//SI ES UNA FOTO

        objelementos.txtTitulo.setText(datossss.getTituloPost());
        objelementos.txtAutor.setText(datossss.getAutor());
        objelementos.imgfotoVideo.setVisibility(View.VISIBLE);
        objelementos.btnVerfoto.setVisibility(View.VISIBLE);

        if (datossss.getImagen()!=null){
        Bitmap imagen = datossss.getImagen();
         objreCReferencias.RegristrarReferenciaDebilBitmap(imagen, objReferenciaDebilBitmaps); 
         int width = imagen.getWidth();
            int height = imagen.getHeight();
            int newWidth = activiadPricipal.getWindowManager().getDefaultDisplay().getWidth();
            int newHeight = newWidth-80;

            float scalarw=((float) newWidth) /width;
            float scalarh=((float) newHeight) /height;

        Matrix ma = new Matrix();
         ma.postScale(scalarw, scalarh);

         Bitmap res = Bitmap.createBitmap(imagen, 0, 0,
              width, height, ma, true);

         objreCReferencias.RegristrarReferenciaDebilBitmap(res, objReferenciaDebilBitmaps);     
        objelementos.imgfotoVideo.setImageBitmap(res);
        //imagen.recycle();
        //res.recycle();
        objelementos.btnComentarios.setEnabled(true);
        objelementos.pgrprogreso.setVisibility(View.INVISIBLE);
        }else{
              int newWidth = activiadPricipal.getWindowManager().getDefaultDisplay().getWidth();
              int newHeight = newWidth-80;

              objelementos.imgfotoVideo.setImageBitmap(null);
              objelementos.imgfotoVideo.setMinimumHeight(newHeight);
              objelementos.imgfotoVideo.setMinimumWidth(newWidth);

            objelementos.btnComentarios.setEnabled(false);
            objelementos.pgrprogreso.setVisibility(View.VISIBLE);
        }
        objelementos.txtPost.setVisibility(View.INVISIBLE);
        objelementos.btnVerVideo.setVisibility(View.INVISIBLE);
        objelementos.txtFecha.setText(datossss.getFecha());

    }

    }

    if (datossss.getImagenAvatar()!=null){
         objelementos.imgAvatar.setImageBitmap(datossss.getImagenAvatar());
    }else{
         objelementos.imgAvatar.setImageResource(R.drawable.avatarpredeterminado);
    }

     objelementos.txtTitulo.setText(datossss.getTituloPost());

    return vistaFila;

      } 
```

objelementos 等效视图

**那是我做错了吗？我可能会说，对所有图像使用弱引用并在我不需要时被删除的正确方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:26:28.113

如果您`bitmaps`在您的应用程序中使用，请不要忘记调用`bmp.recycle()`，因为`GC`在 android 中无法回收位图（对于 < Android v4.0，从 4.0 开始，位图是 dvm 的一部分）。另请参阅我对同一问题的回答。我已经解决了很多答案，它肯定会解决您的问题。 [位图大小超出Vm预算错误android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T08:25:18.803

似乎您的适配器效率不高。您是否像在 api 演示中那样实现了 ViewHolder？您可以编辑您的帖子并将您的适配器粘贴到那里，以便我们查看是否是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:35:47.663

我认为问题在于加载图像，如果您在没有回收的情况下加载图像，那么它将始终显示 OutOfMemoryError。因此，在渲染图像之前，请尝试使用以下代码缩小图像：

```
 /*
     * Function used to reduce the size of the image to avoid memory out of
     * bound exception.
     */
    public static Bitmap decodeFile(String f) {
        try {
            // Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);
            // The new size we want to scale to
            final int REQUIRED_SIZE = 150;
            // Find the correct scale value. It should be the power of 2.
            int scale = 1;
            while (o.outWidth / scale / 2 >= REQUIRED_SIZE
                    && o.outHeight / scale / 2 >= REQUIRED_SIZE)
                scale *= 2;

            // Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {

        }
        return null;
    } 
```

请记住，按比例缩小图像质量会略微降低。

# c# - 在 CellBeginEdit 事件中添加新的空白行

> ID：13718954
> 
> 赞同：0
> 
> 时间：2012-12-05T08:22:50.873
> 
> 标签：c#, datagridview, window

My`DataGridView`由 a 绑定，`DataTable`并设置为启用添加。
在`CellBeginEdit`事件中，我将值添加到具有上排单元格值的新行单元格中。像这样-

```
 private void dgGrid_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
{
dgGrid[intCol, intLastRow].Value = dgGrid[intCol, intLastRow-1].Value;
} 
```

我是否可以为新单元格设置值，但下面没有自动出现新行。
当我在这个单元格中输入内容时，新行会自动出现，但我想在输入内容之前在下面显示新的空白行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:37:53.207

我认为你应该看看下面的这个链接。我不确定你能解决这个问题。

[http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/27624ce6-1c84-4e65-8ba7-fc5a8a3e1ec8](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/27624ce6-1c84-4e65-8ba7-fc5a8a3e1ec8)

# c - 如何使 doxygen 预处理器递归到子目录中？

> ID：13718958
> 
> 赞同：14
> 
> 时间：2012-12-05T08:23:12.373
> 
> 标签：c, doxygen

我没有让 doxygen 预处理器递归地包含文件。这个怎么做？

我制作了一个包含两个头文件和一个 Doxygen 文件的示例：

```
subdir/example.h
subdir2/example_include.h
Doxygen 
```

这是清单`example.h`：

```
#include "example_include.h"

typedef struct
{
    float   array[ARRAY_LENGTH * 2 - 1];
#if CONDITION == MY_FALSE
    char        optional_char;
#endif
} ExampleType; 
```

这是清单`example_include.h`：

```
#define MY_FALSE            (0u)
#define MY_TRUE             (1u)
#define CONDITION       MY_TRUE
#define ARRAY_LENGTH    (20u) 
```

我对默认 Doxygen 配置文件（使用 Doxygen 1.8.2）的更改是：

```
INPUT                  = .
RECURSIVE              = YES
GENERATE_XML           = YES
MACRO_EXPANSION        = YES
INCLUDE_PATH           = . 
```

`ExampleType`(file: )的 Doxygen 的输出 XML`xml/struct_example_type.xml`是：

```
<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.2">
  <compounddef id="struct_example_type" kind="struct" prot="public">
    <compoundname>ExampleType</compoundname>
      <sectiondef kind="public-attrib">
      <memberdef kind="variable" id="struct_example_type_1aa7b8f391fc62f93c34c2b305542db339" prot="public" static="no" mutable="no">
        <type>float</type>
        <definition>float ExampleType::array[ARRAY_LENGTH *2-1]</definition>
        <argsstring>[ARRAY_LENGTH *2-1]</argsstring>
        <name>array</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/Sandboxes/ALN_Alignment_SRR295/04_Engineering/01_Source_Code/algo/exmaple/subdir/example.h" line="5" bodyfile="D:/Sandboxes/ALN_Alignment_SRR295/04_Engineering/01_Source_Code/algo/exmaple/subdir/example.h" bodystart="5" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="struct_example_type_1a8428371f21c1fb8fd28cb1062c7b1152" prot="public" static="no" mutable="no">
        <type>char</type>
        <definition>char ExampleType::optional_char</definition>
        <argsstring></argsstring>
        <name>optional_char</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="D:/Sandboxes/ALN_Alignment_SRR295/04_Engineering/01_Source_Code/algo/exmaple/subdir/example.h" line="7" bodyfile="D:/Sandboxes/ALN_Alignment_SRR295/04_Engineering/01_Source_Code/algo/exmaple/subdir/example.h" bodystart="7" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <location file="D:/Sandboxes/ALN_Alignment_SRR295/04_Engineering/01_Source_Code/algo/exmaple/subdir/example.h" line="4" bodyfile="D:/Sandboxes/ALN_Alignment_SRR295/04_Engineering/01_Source_Code/algo/exmaple/subdir/example.h" bodystart="3" bodyend="9"/>
    <listofallmembers>
      <member refid="struct_example_type_1aa7b8f391fc62f93c34c2b305542db339" prot="public" virt="non-virtual"><scope>ExampleType</scope><name>array</name></member>
      <member refid="struct_example_type_1a8428371f21c1fb8fd28cb1062c7b1152" prot="public" virt="non-virtual"><scope>ExampleType</scope><name>optional_char</name></member>
    </listofallmembers>
  </compounddef>
</doxygen> 
```

实际上，我希望`ARRAY_LENGTH`被结构取代`(20u)`并且`optional_char`不应该成为结构的成员。

我的问题似乎与[此](https://stackoverflow.com/questions/5121333/how-do-i-get-doxygen-to-expand-macros-from-include-files)有关，但唯一有希望的答案是@Phineas 的评论说这是一个已在 doxygen 版本 1.7.4 中修复的问题。但是，我仍然看到相同的行为。该怎么办？

顺便说一句 - “用例”很简单：这是一个视觉工作室项目。编译器根据需要包含所有文件，因为它们都包含在项目定义中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-06-29T00:05:56.260

> 您是否将 RECURSIVE 设置为 YES？
> 
> ```
> # The RECURSIVE tag can be used to turn specify whether or not subdirectories
> # should be searched for input files as well. Possible values are YES and NO.
> # If left blank NO is used.
> 
> RECURSIVE              = YES 
> ```
> 
> 它在`Doxyfile`

[资源](https://stackoverflow.com/a/4409269/1429450)

需要明确的是，默认值为 NO。

# javascript - IE：预期的标识符字符串或数字

> ID：13718959
> 
> 赞同：1
> 
> 时间：2012-12-05T08:23:25.320
> 
> 标签：javascript, jquery, internet-explorer, runtime-error

我已经在这几个小时了。我已经阅读了各种常见原因等，但似乎没有解决方案有效。

我正在处理的网站：http: [//goo.gl/UWyHB](http://goo.gl/UWyHB)

Javascript 文件：http: [//goo.gl/5kJkA](http://goo.gl/5kJkA)

随意自己在 IEX 中进行测试。我在 Windows 8 上使用 IETester 进行测试，它根本不稳定，几乎在每次页面加载时都会崩溃。

我在 IE7 中收到以下错误：

```
Line: 157
Char: 3
Error: Expected identifier string or number
Code: 0 
```

我假设这是 javascript 文件中的第 157 行。我在那条线上有以下内容：

```
 /* Slide */
    $('.slider-wrapper .slider').animate({        <--- 154
        left: '-' + left
    }, slideSpeed);                               <--- 157

    // Scroll window to top
    var wrappos = $('.slider-wrapper').position().top - 20,
        docScrollTop = $('html').scrollTop() > $('body').scrollTop() ? $('html').scrollTop() : $('body').scrollTop();     <!--- 160 
```

有任何想法吗？我在“left”值之后有一个逗号，但删除它并没有做任何事情。我还尝试将“左”键用引号括起来，也没有区别。

有什么建议么？这真让我抓狂。

# java - 如何测试 SOAP 服务？

> ID：13718964
> 
> 赞同：5
> 
> 时间：2012-12-05T08:24:11.013
> 
> 标签：java, web-services, soap, junit, soa

你们如何测试您的 SOAP 服务？你使用类似的工具`soapUI`还是你写的`Unit Tests`？只是想听听一些意见，你喜欢什么，两种方法的优点或缺点是什么？如果有人写`Unit Tests`，你能给我举个例子怎么写吗？？？

**编辑：**我开发了很多 REST 服务，我通常使用 JUnit 和 REST 客户端框架进行测试。因此，当部署 REST 服务时，我能够使用 http 连接调用这些服务作为 JUnit 测试。SOAP 中也有类似的东西吗？有人有 SOAP 客户端的示例代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T18:26:45.823

测试 SOAP 服务的最佳方法是使用 SOAPUI 测试工具。

使用 JDEF，您可以按照 SOAP 标准创建 SOAP 应用程序，然后通过 Oracle 提供的 Enterprise Manager Console 轻松验证这一点。

您只需获得该特定服务的一个实例，然后您就可以看到审计流程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T08:47:50.917

我使用 Junit 对我的函数和后端代码进行功能性低级测试。我使用 SOAPUI 来测试 Web 服务。还要记住，您可以从单元测试中运行 SOAPUI 测试，如此[处](http://www.soapui.org/Test-Automation/integrating-with-junit.html)所述。例子：

```
public void testRunner() throws Exception 
{
  SoapUITestCaseRunner runner = new SoapUITestCaseRunner(); 
  runner.setProjectFile( "src/dist/sample-soapui-project.xml" );
  runner.run(); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:36:36.790

如果你喜欢测试服务，你可以使用简单的 SOAPUI 工具。但是如果你想测试服务的功能是否正常工作，你需要正确的统一。这意味着如果您是 Web 服务的作者，您可能需要编写单元测试来检查功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T08:54:33.443

我两个都用。基本上 JUnit 用于简单的自动化单元测试。和 SoapUI 用于更复杂的系统测试，这比单个 Web 服务调用更多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-31T14:13:24.937

我编写了一个[小型库](https://github.com/skjolber/mockito-soap-cxf)，它完成了单元测试 SOAP 服务的大部分繁重工作。基本上你会得到易于使用的 mockito 模拟。

# database - NBody 模拟 - 适当的设计方法

> ID：13718981
> 
> 赞同：2
> 
> 时间：2012-12-05T08:25:24.377
> 
> 标签：database, cuda, opencl, cpu, gpu

我有一个问题，我将拥有一堆 nbodies - 每个物体的运动都由现有数据预先描述，但是当一个物体在另一个物体的范围内时，它的某些属性会发生变化。为了这个问题，我们假设你每个身体都有一个计数器来计算你在其他身体周围的时间。所以基本上你从 t = 0 开始，你在身体 2 周围花费 5 秒，所以你的 t 现在是 5。我想知道我应该怎么做最好的方法，我还没有数据，但我只是想知道我是否适合探索 CUDA/OpenCL 之类的东西，或者我应该坚持在多核 cpu 机器上优化它。因为这将被模拟的数据量大约是 500 具尸体，每具尸体在 30 天的时间里都有运动描述到第二个，所以'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T08:37:51.213

Brute force nbody 绝对适合 GPU，因为它是“令人尴尬的并行”。每个身体对身体的交互计算都完全独立于任何其他计算。您的变化包括跟踪在其他物体“存在”中花费的时间，这将是对现有身体对身体力计算的直接补充，因为无论如何一切都是在时间步长的基础上完成的。

[这是 nbody 的一些示例 CUDA 代码](http://docs.nvidia.com/cuda/cuda-samples/index.html#cuda-n-body-simulation)。

# jquery - Jquery移动点击堆叠元素

> ID：13718985
> 
> 赞同：1
> 
> 时间：2012-12-05T08:25:51.030
> 
> 标签：jquery, events, web-applications, mobile, tap

我正在制作一个与 facebook app/webapp 具有类似导航结构的 webapp。

我的问题是，当我点击“显示菜单”按钮时，我也会点击它后面的菜单项。

我的 HTML 结构是这样的：

```
<div id="menu">
  <ul>
    <li>
      <a href="page.html">Menu item</a>
    </li>
  </ul>
</div>

<div id="contentholder">
  <div id="menu-btn"></div>
</div> 
```

#menu 和 #contentholder 以 position:absolute;top:0;left:0; 相互重叠放置

我使用 Jquery mobile 进行触摸事件。

我的点击脚本如下：

```
$('body').on('tap', '#menu-btn', menuActive); 
```

我在 menuActive 函数中尝试了 e.stopPropagation() ，但这似乎没有任何好处。

menuActive 函数：

```
function menuActive(e){
  $('#menu-btn').addClass('active');
  $('#contentholder').addClass('slided');
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:30:12.147

在我的 menuActive 函数中使用 e.preventDefault() 修复了它。虽然我不明白为什么它会通过我的#contentholder...哦，好吧，现在它可以工作了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T15:32:36.030

很抱歉回答并没有链接到该信息，但我找不到我在哪里阅读它。

总之，“tap”事件是为了替换“click”，因为“click”等待太多毫秒才能知道它是单击还是其他事件。

因为它很短，所以当它引起某物移动时不应该使用它。这是因为“点击”或“点击”将仍然在 X 和 Y 处注册，并点击现在暴露的区域。

看来您找到了解决方案。

# c# - C# 中具有多个泛型类型的泛型导致允许和不允许的歧义

> ID：13718989
> 
> 赞同：6
> 
> 时间：2012-12-05T08:26:02.543
> 
> 标签：c#, generics, ambiguity

我最近写了这个，很惊讶它编译：

```
public class MyGeneric<U, V> {
  MyGeneric(U u) { ... }
  MyGeneric(V v) { ... }
  public void Add(U u, V v) { ... }
  public void Add(V v, U u) { ... }
} 
```

如果我按如下方式使用这个类，如果我调用 Add，我会得到一个“不明确的构造函数引用”和一个“不明确的调用”。

```
var myVar = new MyGeneric<int, int>(new MyIntComparer()); 
```

显然，当我使用 int 和 double 作为泛型类型时没有歧义，当然，当我同时使用这两个 int 时，它们也会分配给一个 double。

```
var myVar = new MyGeneric<int, double>(new MyIntComparer());
myVar.Add(3, 5); 
```

所以后来我认为以下也是允许的，但令人惊讶的是我得到了一个错误。为什么以下不允许编译？

```
public interface IMyInterface<T, S> {
  void Add(T t, S s);
}

public class MyGeneric<U, V> : IMyInterface<U, V>, IMyInterface<V, U> {
  public MyGeneric(U u) { }
  public MyGeneric(V v) { }
  void IMyInterface<U, V>.Add(U u, V v) { ... }
  void IMyInterface<V, U>.Add(V v, U u) { ... }
} 
```

无论我使用隐式还是显式接口实现，编译器都会声明

> 'MyGeneric<U,V>' 不能同时实现 'IMyInterface<U,V>' 和 'IMyInterface<V,U>' 因为它们可能会针对某些类型参数替换进行统一

为什么第一个允许写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T08:42:11.897

1-为什么不允许编译以下内容？

部分响应在该帖子中：[为什么 C# 编译器在从不同的基类派生时抱怨“类型可能统一”？](https://stackoverflow.com/questions/7664790/why-does-the-c-sharp-compiler-complain-that-types-may-unify-when-they-derive-f)

C# 4 规范的第 13.4.2 节规定：

> 由泛型类型声明实现的接口对于所有可能的构造类型必须保持唯一。如果没有这条规则，就不可能确定调用某些构造类型的正确方法。

2-为什么第一个允许写？

编译器在编译时执行泛型类型检查，C# 4 规范的第 7.4.3.5 节指出：

> 虽然声明的签名必须是唯一的，但类型参数的替换可能会导致相同的签名。在这种情况下，上述重载决议的平局规则将选择最具体的成员。以下示例显示了根据此规则有效和无效的重载：

```
interface I1<T> {...}
interface I2<T> {...}
class G1<U>
{
    int F1(U u);                    // Overload resulotion for G<int>.F1
    int F1(int i);                  // will pick non-generic
    void F2(I1<U> a);               // Valid overload
    void F2(I2<U> a);
}
class G2<U,V>
{
    void F3(U u, V v);          // Valid, but overload resolution for
    void F3(V v, U u);          // G2<int,int>.F3 will fail
    void F4(U u, I1<V> v);      // Valid, but overload resolution for   
   void F4(I1<V> v, U u);       // G2<I1<int>,int>.F4 will fail
    void F5(U u1, I1<V> v2);    // Valid overload
    void F5(V v1, U u2);
    void F6(ref U u);               // valid overload
    void F6(out V v);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:51:06.893

它是语言规范的一部分，如此处接受的答案中所述：

[为什么 C# 编译器从不同的基类派生时会抱怨“类型可能会统一”？](https://stackoverflow.com/questions/7664790/why-does-the-c-sharp-compiler-complain-that-types-may-unify-when-they-derive-f)

C# 4 规范的第 13.4.2 节指出：

> 如果从 C 创建的任何可能的构造类型在将类型参数替换为 L 后会导致 L 中的两个接口相同，则 C 的声明无效。在确定所有可能的构造类型时，不考虑约束声明。

我猜您的两个示例之间的区别在于第二个使用接口（根据语言规范检查重复项），但第一个使用类型（不检查重复项，尽管可能会导致歧义，如您所见）。

# iphone - spring mvc 解码 + 被替换为空格

> ID：13718995
> 
> 赞同：3
> 
> 时间：2012-12-05T08:26:28.697
> 
> 标签：iphone, rest, spring-mvc

我在 Spring MVC 模式中有问题。当我使用编码值从 iPhone 应用程序调用 Web 服务时，解码没有正确进行。不确定问题是什么。+ 号被替换为空格“”。下面是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?><br>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br>
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"<br>
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"<br>
id="WebApp_ID" version="3.0"><br>
<display-name>APPLICATIONNAME</display-name><br>
<filter><br>
<filter-name>encoding-filter</filter-name><br>
<filter-class>org.springframework.web.filter.CharacterEnco dingFilter</filter-class><br>
<init-param><br>
<param-name>encoding</param-name><br>
<param-value>UTF-8</param-value><br>
</init-param><br>
<init-param><br>
<param-name>forceEncoding</param-name><br>
<param-value>true</param-value><br>
</init-param><br>
</filter><br>
<filter-mapping><br>
<filter-name>encoding-filter</filter-name><br>
<url-pattern>/rest/*</url-pattern><br>
</filter-mapping><br>
<servlet><br>
<servlet-name>spring</servlet-name><br>
<servlet-class>org.springframework.web.servlet.DispatcherSe rvlet</servlet-class><br>
<load-on-startup>1</load-on-startup><br>
</servlet><br>
<servlet-mapping><br>
<servlet-name>spring</servlet-name><br>
<url-pattern>/rest/*</url-pattern><br>
</servlet-mapping><br>
<welcome-file-list><br>
<welcome-file>index.jsp</welcome-file><br>
</welcome-file-list><br>
</web-app><br> 
```

我的控制器类

```
@Controller
public class LoginController {

@Autowired
private LoginServiceImpl loginService;

@RequestMapping(value = "/getUserDetails", method = RequestMethod.POST)
public @ResponseBody
LoginData getUserDetails(@ModelAttribute LoginDetails loginDetails) {
LOGGER.debug("Session ID = " + loginDetails.getSessionID());
} 
```

iPhone APP 输入请求示例

```
NSURLResponse *response = nil;
NSError *error = nil;
NSString *urlString = @"http://localhost:8080/rest/getUserDetails";
NSURL *url = [NSURL URLWithString:urlString];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];
NSURLConnection *connection= [[NSURLConnection alloc] initWithRequest:urlRequest
                                                             delegate:self];
[urlRequest setHTTPMethod:@"POST"];
NSString *postString = [NSString stringWithFormat:@"sessionID=%@",@"ABCD+/EFGH"];
NSData *a=[postString dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"encoded %@",a);
[urlRequest setHTTPBody:a];
    [connection start];
NSString *returnString = [[NSString alloc] initWithData:[NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:&error] encoding:NSUTF8StringEncoding];

NSLog(@" %@ ",returnString);
NSLog(@"%@",error); 
```

在服务器端而不是“ABCD + / EFGH”我得到“ABCD / EFGH”。所以加号（+）没有被解码。需要做什么才能在服务器上获得加号 (+)？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:05:15.140

这是预期的行为。

在[`application/x-www-form-urlencoded`表单](http://en.wikipedia.org/wiki/Percent-encoding#The_application.2Fx-www-form-urlencoded_type)中（用于在 POST 中发送表单数据）空间被编码为`+`，而 real`+`应该以百分比编码的形式 ( `%2B`) 表示。

我认为最好使用某种内置`application/x-www-form-urlencoded`编码例程（如果在 iPhone 上可用），而不是手动替换。

# database-design - 哪一个是更好的数据库设计？

> ID：13718996
> 
> 赞同：2
> 
> 时间：2012-12-05T08:26:35.617
> 
> 标签：database-design

我对数据库设计感到困惑。我在其中一家公司担任开发人员，我与老板讨论了数据库设计中的以下问题。我必须处理的数据库设计的一部分包含两个表：

```
Employees Table: Username, Name, JobTitle, OrganizationCode
Organizations Table: OrganizationCode, Name... 
```

这两张表将照顾公司中所有的员工、部门、部门和单位。其他开发人员设计的大多数数据库都是这样设计的，这两个表之间没有关系。

对我来说，我告诉我的老板最好在这两个表之间建立关系（这意味着它`OrganizationCode`是 Organizations 表主键的外键）。因为执行约束、完整性以及编写查询将很容易。

他拒绝了，没有给我一个正当的理由。我们部门有 2000 多名员工，公司约有 50000 多名员工。所以我认为他推荐的设计会占用很大的空间，从应用程序开发的角度来看会很难处理。

**大家有什么推荐的吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T12:12:27.920

你和你的老板都需要了解分析和设计之间的区别。两个表之间的关系设计服从于现实世界中主题的实际情况，以及对数据库的信息需求。

当您从数据角度分析主题（所谓的“现实世界”）时，您将整个主题空间划分为实体以及这些实体之间的关系。然后，您将要存储在数据库中的每个值视为属性的实例。每个属性都描述了实体或关系的某些方面。每个属性也有一个域，它是该属性的可能值的集合。所有这些构成了一个概念数据模型，其特征是被发现的，而不是发明的。

然后，当您进行数据库设计时，根据您对实体、关系和属性的了解来设计列、表和外键。给定概念模型和其他一些细节，您当然需要知道如何做出好的设计。

那么，就您而言，主题是什么样的？员工是否在一个部门工作？那是一种关系。一个部门可以有许多员工在其中工作。一名员工可以在多个部门工作吗？如果是，那么你有一个多对多的关系。如果是这种情况，您将需要一个包含两个外键的联结表。如果不是，那么您的设计将充分反映多对一的关系。

通过这种方式表达问题，就主题而言，您可能能够与您的老板就现实世界的结构达成共识。然后，您可能能够就外键如何帮助表示该现实达成共识。或者你的老板可能会满足于将数据库（重新）设计留给你，只要她/他保留对概念模型的否决权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:38:01.950

员工必须以某种方式与组织单位建立联系，而真正的问题是是否保留这种关系的历史。如果您不需要保留历史记录，那么您可以在员工表中使用组织代码，否则您需要组织和员工之间的连接表来显示员工-部门关系的历史记录。

另一个考虑是是否保留组织间关系的历史，这将需要另一个连接表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:47:26.853

你的设计比你老板的好。有了你老板的设计，员工就有可能与不存在的组织单位联系起来。更新组织信息也很痛苦，这些更新必须在两个位置进行。

在当今时代，空间已经不再是一个重要因素，但系统的可维护性和确保数据正确应该是在两个表之间建立适当关系的决定因素。

如果我是你，我会询问你的老板究竟为什么反对加强这种关系。

# algorithm - 什么是可用于有效查找对象是否与一组模式中的任何一个匹配的算法/结构？

> ID：13718999
> 
> 赞同：2
> 
> 时间：2012-12-05T08:26:46.537
> 
> 标签：algorithm, data-structures, language-agnostic, tree

模式是具有值和函数的散列。例如：

```
pattern = {a:1,b:2,c:function(x){ return x<5; }} 
```

有一个函数可以检查对象是否与模式匹配。例如，如果 obj.a == 1、obj.b == 2 和 obj.c < 5，则对象将匹配上述模式。一些测试：

```
matches(pattern,{a:1,b:3,c:2}) == false // because b != 2
matches(pattern,{a:1,b:2,c:7}) == false // because c >= 5
matches(pattern,{a:1,b:2,c:3}) == true //fine
matches(pattern,{a:1,b:2,c:2,d:4}) == true //no problems in having extras 
```

假设我有一组模式，我想找出一个对象是否与这些模式中的任何一个匹配。我可以一一检查，但是这样一来，我就有了 O(n) 复杂度，其中 n 是模式的数量。我有一种感觉，如果我使用这组模式来构建一些其他结构，这可以优化；但我不确定那个结构可能是什么。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T08:31:03.407

您可以创建[决策树](http://en.wikipedia.org/wiki/Decision_tree)（或将其优化为[BDD](http://en.wikipedia.org/wiki/Binary_decision_diagram)数据结构）。这需要在评估每个对象期间仅读取每个相关变量一次。

BDD 是一种评估逻辑公式的方法，在您的情况下，逻辑公式是

```
pattern_1 OR pattern_2 OR pattern_3 OR .... OR pattern_n 
```