# StackOverflow 问答 15610000-15610999

# r - 准备一个规则交易清单

> ID：15610002
> 
> 赞同：3
> 
> 时间：2013-03-25T07:50:08.520
> 
> 标签：r, arules

`arules`需要交易清单。列表中的每一行都将包含一个产品数组。并非每笔交易都有相同数量的产品。这听起来像支点，但事实并非如此。一个例子可以在[这里找到](http://rss.acs.unt.edu/Rdoc/library/arules/html/transactions-class.html)

我想要 `aggregate(dvd , by=list("ID"), FUN=c)` 失败的东西`arguments must have same length`

这是我的数据

```
> dvd
   ID          Item
1   1   Sixth Sense
2   1         LOTR1
3   1 Harry Potter1
4   1    Green Mile
5   1         LOTR2
6   2     Gladiator
7   2       Patriot
8   2    Braveheart
9   3         LOTR1
10  3         LOTR2
11  4     Gladiator
12  4       Patriot
13  4   Sixth Sense
14  5     Gladiator
15  5       Patriot
16  5   Sixth Sense
17  6     Gladiator
18  6       Patriot
19  6   Sixth Sense
20  7 Harry Potter1
21  7 Harry Potter2
22  8     Gladiator
23  8       Patriot
24  9     Gladiator
25  9       Patriot
26  9   Sixth Sense
27 10   Sixth Sense
28 10          LOTR
29 10     Galdiator
30 10    Green Mile 
```

我需要一个看起来像这样的列表

```
TR1     c("Sixth Sense","LOTR1","Harry Potter1","Green Mile","LOTR2")
TR2     c("Gladiator","Patriot","Braveheart")
TR3     c("LOTR1","LOTR2")
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-19T14:17:57.470

arules 的[read.transactions](http://www.inside-r.org/packages/cran/arules/docs/read.transactions)有一个参数`format`可以解决您的问题。这是用法：

```
read.transactions(file, format = c("basket", "single"), sep = NULL,
                  cols = NULL, rm.duplicates = FALSE, encoding = "unknown") 
```

看到`format`论证了吗？您可以使用“basket”或“single”来表示输入数据的格式。您正在尝试将数据转换为“篮子”格式，但您拥有的数据类型已经是“单一”的 - 每行都包含一个带有 ID 的项目。只需使用 read.transactions 并设置`format`为“single”，你就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-31T08:56:35.460

您的`aggregate`命令可以工作，但您没有正确指定参数。你需要类似的东西：`with(DF, aggregate(Item, list(ID), FUN = function(x) c(as.character(x))))`.

或者，您可以使用公式方法`aggregate`：

```
aggregate(Item ~ ID, DF, c)
#    ID                                                 Item
# 1   1 Sixth Sense, LOTR1, Harry Potter1, Green Mile, LOTR2
# 2  10             Sixth Sense, LOTR, Galdiator, Green Mile
# 3   2                       Gladiator, Patriot, Braveheart
# 4   3                                         LOTR1, LOTR2
# 5   4                      Gladiator, Patriot, Sixth Sense
# 6   5                      Gladiator, Patriot, Sixth Sense
# 7   6                      Gladiator, Patriot, Sixth Sense
# 8   7                         Harry Potter1, Harry Potter2
# 9   8                                   Gladiator, Patriot
# 10  9                      Gladiator, Patriot, Sixth Sense
str(.Last.value)
# 'data.frame':  10 obs. of  2 variables:
# $ ID  : chr  "1" "10" "2" "3" ...
# $ Item:List of 10
#  ..$ 1 : chr  "Sixth Sense" "LOTR1" "Harry Potter1" "Green Mile" ...
#  ..$ 6 : chr  "Sixth Sense" "LOTR" "Galdiator" "Green Mile"
#  ..$ 10: chr  "Gladiator" "Patriot" "Braveheart"
#  ..$ 13: chr  "LOTR1" "LOTR2"
#  ..$ 15: chr  "Gladiator" "Patriot" "Sixth Sense"
#  ..$ 18: chr  "Gladiator" "Patriot" "Sixth Sense"
#  ..$ 21: chr  "Gladiator" "Patriot" "Sixth Sense"
#  ..$ 24: chr  "Harry Potter1" "Harry Potter2"
#  ..$ 26: chr  "Gladiator" "Patriot"
#  ..$ 28: chr  "Gladiator" "Patriot" "Sixth Sense" 
```

或者，您可以使用“data.table”包：

```
library(data.table)
as.data.table(DF)[, list(list(Item)), by = ID]
#     ID                                               V1
#  1:  1 Sixth Sense,LOTR1,Harry Potter1,Green Mile,LOTR2
#  2:  2                     Gladiator,Patriot,Braveheart
#  3:  3                                      LOTR1,LOTR2
#  4:  4                    Gladiator,Patriot,Sixth Sense
#  5:  5                    Gladiator,Patriot,Sixth Sense
#  6:  6                    Gladiator,Patriot,Sixth Sense
#  7:  7                      Harry Potter1,Harry Potter2
#  8:  8                                Gladiator,Patriot
#  9:  9                    Gladiator,Patriot,Sixth Sense
# 10: 10            Sixth Sense,LOTR,Galdiator,Green Mile 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T08:14:50.937

我想`split`会为你完成这项工作。

```
 DF <- structure(list(ID = c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 
4L, 4L, 4L, 5L, 5L, 5L, 6L, 6L, 6L, 7L, 7L, 8L, 8L, 9L, 9L, 9L, 
10L, 10L, 10L, 10L), Item = c("   Sixth Sense", "         LOTR1", 
" Harry Potter1", "    Green Mile", "         LOTR2", "     Gladiator", 
"       Patriot", "    Braveheart", "         LOTR1", "         LOTR2", 
"     Gladiator", "       Patriot", "   Sixth Sense", "     Gladiator", 
"       Patriot", "   Sixth Sense", "     Gladiator", "       Patriot", 
"   Sixth Sense", " Harry Potter1", " Harry Potter2", "     Gladiator", 
"       Patriot", "     Gladiator", "       Patriot", "   Sixth Sense", 
"   Sixth Sense", "          LOTR", "     Galdiator", "    Green Mile"
)), .Names = c("ID", "Item"), class = "data.frame", row.names = c(NA, 
-30L))

    DF <- read.csv(textConnection(txt), header = TRUE, stringsAsFactors = FALSE, strip.white = TRUE)
result <- split(DF$Item, DF$ID)
names(result) <- gsub("(.*)", "TR\\1", names(result))
result
## $TR1
## [1] "Sixth Sense"   "LOTR1"         "Harry Potter1" "Green Mile"    "LOTR2"        
## 
## $TR2
## [1] "Gladiator"  "Patriot"    "Braveheart"
## 
## $TR3
## [1] "LOTR1" "LOTR2"
## 
## $TR4
## [1] "Gladiator"   "Patriot"     "Sixth Sense"
## 
## $TR5
## [1] "Gladiator"   "Patriot"     "Sixth Sense"
## 
## $TR6
## [1] "Gladiator"   "Patriot"     "Sixth Sense"
## 
## $TR7
## [1] "Harry Potter1" "Harry Potter2"
## 
## $TR8
## [1] "Gladiator" "Patriot"  
## 
## $TR9
## [1] "Gladiator"   "Patriot"     "Sixth Sense"
## 
## $TR10
## [1] "Sixth Sense" "LOTR"        "Galdiator"   "Green Mile" 
```

# javascript - 越界物体的运动，画布

> ID：15610003
> 
> 赞同：0
> 
> 时间：2013-03-25T07:50:09.850
> 
> 标签：javascript, html, canvas, collision

我在画布上有一艘宇宙飞船。它有速度，`ship.vx`并且`ship.vy`。当它距离画布边界 30 像素时，我设置`ship.vx`&`ship.vy`并`0`沿船的相反方向移动背景对象。此刻，船被卡在了一个点上。这都很好。现在，如果我尝试将它向左向右（`stuck at top/bottom`）或自上而下（`stuck at left/right`）移动，它不会因为它卡在`vx`&`vy`设置为的点`0`。

如果我朝相反的方向加速，则需要 5 秒才能选择它的速度（大约 2），所以它基本上在同一点持续 5 秒。

我试图不设置`vy`为何`0`时超出 x 轴，反之亦然，但船在另一个轴上保持缓慢移动。

所以我想要实现的是船在距离边界 30 px 时会卡住，但如果我尝试在其他 3 个方向上移动或加速，它会假装它没有卡住。

你们中有人知道任何机制吗？
谢谢。

```
function stuckShip(){
    if(
                (ship.x - ship.width < 0)  || 
                (ship.x + ship.width > w)  ||
                (ship.y + ship.height > h) ||
                (ship.y - ship.height < 0))
              {
        ship.vx = 0;
        ship.vy = 0;
     }

}

function againAndAgain(){
    var angle = ship.rotation;

    var x = Math.cos(angle);
    var y = Math.sin(angle);        

    var ax = x*thrust,
        ay = y*thrust;

    ship.vx += ax;
    ship.vy += ay;

            stuckShip();
            ship.draw(context);

}

document.addEventListener('keydown', function(e){
    switch(e.keyCode){
        case 38:
            thrust = 0.35;
        break;
        case 37:
            ship.rotation -= 3;
        break;
        case 39:
            ship.rotation += 3;
        break;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:48:21.137

哈哈，很简单，把船的位置设置为离边界31px，

```
if(ship.x <= 30){
   ship.x = 30 + 1;
} 
```

它的作用是，当船距离左边 30px 时，它会设置`ship.x`为 31，所以它永远不会被卡住，只是来回摆动 1px。我不确定这是否是一个完美的解决方案，但它不会在 5 秒内将船拉回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:04:10.177

根据对象在屏幕上的位置来操纵对象的速度以用于显示目的从来都不是最好的主意。通常您使用基于父容器的系统，因此您有一个主容器，所有对象（包括船）都是该容器的子容器，并且相对于主容器移动。现在您可以更新容器的位置，如果船的全局位置在该 30 像素范围内，则使其“锁定”在屏幕边缘。

# android - 如何以编程方式在右侧 Textview 设置图像

> ID：15610005
> 
> 赞同：3
> 
> 时间：2013-03-25T07:50:11.333
> 
> 标签：android, textview

我可以使用 xml 属性设置图像 textview 右侧

```
 <TextView
                    android:id="@+id/txtarrow1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:drawableRight="@drawable/arrow"
                    android:gravity="right"
                    android:onClick="VideoClick"
                    android:padding="5dip"
                    android:textColor="#feb4e7" >
                </TextView> 
```

我想设置

```
android:drawableRight="@drawable/arrow" 
```

像编程一样

```
txtarrow1.setBackgroundResource(R.drawable.arrow_blue); 
```

但这一个不起作用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T07:54:17.823

您可以简单地使用 Google 查找 TextView 的 Android java 文档。他们有一个巨大的表格，显示每个属性的编程选项。

```
android:drawableRight   (@compile time)
setCompoundDrawablesWithIntrinsicBounds(int,int,int,int)    (@runtime) 
```

绘制在文本右侧的drawable。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-07T10:40:57.910

在这里你想使用

# 以编程方式在文本视图中的特定方向上添加图像

有2种方法：

1>**通过 Image Drawable**

前任：

```
 Drawable img = getContext().getResources().getDrawable( R.drawable.dogy );
    txtarrow1.setCompoundDrawablesWithIntrinsicBounds( 
    img,// left 
    null,//top 
    null,// right 
    null//bottom); 
```

请记住，此方法在一个视图中的图像存储中最有用（文本视图，按钮）

2>**通过图像 ID**

```
 txtarrow1.setCompoundDrawablesWithIntrinsicBounds( 
        R.drawable.ic_doggy,// left 
        0,//top 
        0,// right 
        0//bottom); 
```

最有可能这些方法用于不同的图像显示在多个视图中，如**（GridView）**

**当Drawable**无法显示图像集**null**和**ID** 集**0**（零）时，必须记住这两者之间的区别

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T07:53:43.310

你可以用`SpannableString`..

```
SpannableString text = new SpannableString("text");
text.setSpan(new ImageSpan(getActivity(), R.drawable.arrow_blue), 0, 1, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
txtarrow1.setText(text); 
```

# java - Asana：我如何从 asana 获取 Worksapce id

> ID：15610007
> 
> 赞同：0
> 
> 时间：2013-03-25T07:50:19.950
> 
> 标签：java, javascript, json, asana

我正在使用 java/javascript 开发一个小型 Web 应用程序。我想为特定用户查询与 Asana 相关的所有任务。

我已经浏览了 API，我发现作为请求参数需要有工作区 Id 和 Api id 。我能够找到的 API ID。但不知道如何找到工作区 ID。

你能帮我获取工作区ID吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:54:09.330

您需要调用 /workspaces 以获取工作空间列表。从工作区列表中选择一个工作区。

检查此[https://asana.com/developers/api-reference/workspaces](https://asana.com/developers/api-reference/workspaces)

# php - PHP - 解析一个 csv 文件并将输出写入另一个 csv 文件

> ID：15610011
> 
> 赞同：-1
> 
> 时间：2013-03-25T07:50:27.367
> 
> 标签：php, magento, csv

我正在处理 Magento 产品 csv 文件，我有一个包含 3 列的 csv 文件，例如

```
<pre>Name, description, Color</pre>
<pre>t-shirt, tshirt description, "green, blue, yellow"</pre> 
```

现在基于第 3 列（颜色）的值，我想在单独的文件中输出每一行，以某种方式说“new_products.csv”，这样生成的文件就像

```
<p>Name, description, Color</p>
<pre>t-shirt, tshirt description, green</pre>
<pre>t-shirt, tshirt description, blue</pre>
<pre>t-shirt, tshirt description, yellow</pre> 
```

我从这段代码开始

```
$row = 1;

if (($handle = fopen("product.csv", "r")) !== FALSE) {
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $num = count($data);
            $name = $data[0];
    $desc = $data[1];

    for ($c=0; $c < $num; $c++) {

        $fp = fopen('new_products.csv', 'w');

        if($c == 2){ //if we are at color field
            $color = explode(',', $data[$c]);
            $color_count = count($color);
            for($i=0; $i<$color_count; $i++){

                fputcsv($fp, array($name,$desc,$color[$i]));
            }

        }

    }
            $row++;
}
fclose($handle);
} 
```

但是上面的代码只输出最后一行。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:35:42.147

最后我已经能够找到我自己的解决方案。实际上需要在文件末尾设置文件指针。

```
$row = 1;

if (($handle = fopen("test.csv", "r")) !== FALSE) {
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $num = count($data);
    $name = $data[0];
    $desc = $data[1];

    for ($c=0; $c < $num; $c++) {            

        if($c == 2){ //if we are at color field
          $fp = fopen('file.csv', 'a'); //Open for writing only; place the file pointer at the end of the file.
            $color = explode(',', $data[$c]);
            $color_count = count($color);
            for($i=0; $i<$color_count; $i++){
                fputcsv($fp, array($name,$desc,$color[$i]));
            }
            fclose($fp);
        }

    }

            $row++;
}
fclose($handle); 
```

}

# android - 在 FragmentActivity 中管理堆栈

> ID：15610018
> 
> 赞同：-1
> 
> 时间：2013-03-25T07:51:04.643
> 
> 标签：android, android-layout, android-intent

我是安卓新手。我正在使用“FragmentActivity”来实现标签栏控件。当我从一个片段中推送另一个片段时，我遇到了问题。当我更改标签或尝试返回上一个片段时，行为很奇怪。任何人都可以提供一些可靠的代码来正确管理堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:00:29.883

用于片段之间的过渡

```
Fragment frag;
FragmentTransaction transaction;
frag = new Fragment1();

transaction = getSupportFragmentManager().beginTransaction();
transaction.replace(R.id.detailFragment, frag);
transaction.commit(); 
```

覆盖 onKeyDown 方法并在每次按下后退按钮时删除当前片段。

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if (keyCode == KeyEvent.KEYCODE_BACK)
        {
            if (getSupportFragmentManager().getBackStackEntryCount() == 0)
            {
                this.finish();
                return false;
            }
            else
            {
                getSupportFragmentManager().popBackStack();
                removeCurrentFragment();

                return false;
            }

        }

        return super.onKeyDown(keyCode, event);
    }

    public void removeCurrentFragment()
    {
        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        Fragment currentFrag =  getSupportFragmentManager().findFragmentById(R.id.detailFragment);

        String fragName = "NONE";

        if (currentFrag!=null)
            fragName = currentFrag.getClass().getSimpleName();

        if (currentFrag != null)
            transaction.remove(currentFrag);

        transaction.commit();

    } 
```

# user-interface - 如何管理 JavaFX2 中的元素优先级？

> ID：15610019
> 
> 赞同：1
> 
> 时间：2013-03-25T07:51:15.187
> 
> 标签：user-interface, javafx-2, operator-precedence

鉴于此代码：

```
@Override
public void start(final Stage stage)
{
    final StackPane root = new StackPane();
    final Region r1 =  new Region(), r2 = new Region(), r3 = new Region();

    r1.setMaxSize(400, 400);
    r1.setStyle("-fx-background-color: yellow");
    StackPane.setAlignment(r1, Pos.TOP_LEFT);

    r2.setMaxSize(400, 400);
    r2.setStyle("-fx-background-color: black");
    StackPane.setAlignment(r2, Pos.TOP_RIGHT);

    r3.setMaxSize(400, 400);
    r3.setStyle("-fx-background-color: blue");
    StackPane.setAlignment(r3, Pos.BOTTOM_CENTER);

    root.getChildren().addAll(r1, r2 ,r3);

    final Scene scene = new Scene(root, 600, 600);
    stage.setScene(scene);
    stage.show();
} 
```

输出如下：

![在此处输入图像描述](../Images/3c0a70a81ac12067e2b7ee3f23fd4cbc.png)

是否有任何简单的方法来控制元素优先级，而无需删除并重新添加以正确顺序跟随的所有元素？在这种特殊情况下，我想要做的是使具有`yellow`背景的元素覆盖其他两个，从而导致：

![在此处输入图像描述](../Images/bfda17c0e0cb560ba0e1c9e4de00d1ab.png)

可以用`Scene Builder`移动元素`CTRL+([|])`。不过，我目前能想到的唯一方法是，在代码中执行此操作时，获取根元素的子元素并以正确的顺序执行一对删除/添加。有没有其他方法，比如管理覆盖优先级的一些属性？谢谢你。

# ruby-on-rails-3.2 - 为什么 first_or_initialize 尝试保存记录？

> ID：15610021
> 
> 赞同：1
> 
> 时间：2013-03-25T07:51:20.450
> 
> 标签：ruby-on-rails-3.2, rails-activerecord

在 Rails 3.2 应用程序中，我有一个简单的关联

```
class Element < ActiveRecord::Base
  has_many :categories
end

class Category < ActiveRecord::Base
  belongs_to :element
  validates :name, uniqueness: true
end 
```

以及以下代码

```
element = Element.find_or_initialize_by_name(elem_name)
element.categories = cat_names.map { |name| Category.where(name: name, element_id: element).first_or_initialize } 
```

当 cat_names 包含已使用的名称时，引发**ActiveRecord::RecordNotSaved （无法替换资源，因为无法保存一个或多个新记录。） 。**

据我了解 first_or_initialize 调用“新”，因此不应保存任何记录。这是预期的行为吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T00:18:04.543

这是因为当找不到 Element 实例时，rails 会初始化它的一个实例，您的“元素”变量指向该实例。然后，当您尝试访问元素的“类别”属性时，它会抛出：

**ActiveRecord::RecordNotSaved（替换资源失败，因为一条或多条新记录无法保存。）**

因为元素记录没有持久化到数据库中（仅初始化）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T18:54:01.000

我认为这里有问题`element_id: element`。使用`element: element`或`element_id: element_id`。

您的查询`Category.where(name: name, element_id: element)`始终返回空。

并且您使用现有名称初始化新类别。由于您的模型已验证`validates :name, uniqueness: true`，您会收到此错误

# asp.net-mvc-4 - 在 MVC4 中使用 DotNetOpenAuth 的 LinkedIn 完整个人资料详细信息

> ID：15610026
> 
> 赞同：7
> 
> 时间：2013-03-25T07:51:33.687
> 
> 标签：asp.net-mvc-4, oauth, linkedin

我的 MVC4 应用程序允许使用 LinkedIn 帐户登录。我想从登录用户的linkedIn 中提取所有可用的详细信息。目前我已经做了以下事情。

在我的 AuthConfig.cs 中，

```
 Dictionary<string, object> linkedInExtraData = new Dictionary<string, object>();           
        linkedInExtraData.Add("Icon", "../Images/linkedIn.png");          
        OAuthWebSecurity.RegisterClient(
          client: new App_Start.LinkedInCustomClient("xxxxxxxxxxxx", "yyyyyyyyyyyyyyy"),
          displayName: "LinkedIn",
          extraData: linkedInExtraData); 
```

在linkedInCustomClient.cs 中，来自LinkedIn Developer Kit

```
public class LinkedInCustomClient : OAuthClient
{
    private static XDocument LoadXDocumentFromStream(Stream stream)
    {
        var settings = new XmlReaderSettings
        {
            MaxCharactersInDocument = 65536L
        };
        return XDocument.Load(XmlReader.Create(stream, settings));
    }

    /// Describes the OAuth service provider endpoints for LinkedIn.
    private static readonly ServiceProviderDescription LinkedInServiceDescription =
            new ServiceProviderDescription
            {
                AccessTokenEndpoint =
                        new MessageReceivingEndpoint("https://api.linkedin.com/uas/oauth/accessToken",
                        HttpDeliveryMethods.PostRequest),
                RequestTokenEndpoint =
                        new MessageReceivingEndpoint("https://api.linkedin.com/uas/oauth/requestToken?scope=r_fullprofile",
                        HttpDeliveryMethods.PostRequest),
                UserAuthorizationEndpoint =
                        new MessageReceivingEndpoint("https://www.linkedin.com/uas/oauth/authorize",
                        HttpDeliveryMethods.PostRequest),
                TamperProtectionElements =
                        new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
                ProtocolVersion = ProtocolVersion.V10a
            };

    public LinkedInCustomClient(string consumerKey, string consumerSecret) :
        base("linkedIn", LinkedInServiceDescription, consumerKey, consumerSecret) { }

    /// Check if authentication succeeded after user is redirected back from the service provider.
    /// The response token returned from service provider authentication result. 
    [SuppressMessage("Microsoft.Design", "CA1031:DoNotCatchGeneralExceptionTypes",
        Justification = "We don't care if the request fails.")]
    protected override AuthenticationResult VerifyAuthenticationCore(AuthorizedTokenResponse response)
    {
        // See here for Field Selectors API http://developer.linkedin.com/docs/DOC-1014
        const string profileRequestUrl =
            "https://api.linkedin.com/v1/people/~:(id,first-name,last-name,interests,headline,industry,summary,email-address,location:(name),picture-url,positions,associations,languages,honors,educations,date-of-birth,primary-twitter-account,three-current-positions,three-past-positions,group-memberships,specialties,skills)";

        string accessToken = response.AccessToken;
        string tokenSecret = (response as ITokenSecretContainingMessage).TokenSecret;
        string Verifier = response.ExtraData.Values.First();

        var profileEndpoint =
            new MessageReceivingEndpoint(profileRequestUrl, HttpDeliveryMethods.GetRequest);
        HttpWebRequest request =
            WebWorker.PrepareAuthorizedRequest(profileEndpoint, accessToken);

        try
        { 
            using (WebResponse profileResponse = request.GetResponse())
            {
                using (Stream responseStream = profileResponse.GetResponseStream())
                {
                    XDocument document = LoadXDocumentFromStream(responseStream); 

                    return new AuthenticationResult(
                        isSuccessful: true,
                        provider: ProviderName,
                        providerUserId: userId,
                        userName: userName,
                        extraData: extraData);
                }
            }
        }
        catch (Exception exception)
        {
            return new AuthenticationResult(exception);
        }
    }

} 
```

在我的控制器中，

```
AuthenticationResult result = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));
        if (!result.IsSuccessful)
        {
            return RedirectToAction("ExternalLoginFailure");
        } 
```

我需要在我的控制器中获取以下详细信息作为身份验证结果。

```
(id,first-name,last-name,interests,headline,industry,summary,email-address,location:(name),picture-url,positions,associations,languages,honors,educations,date-of-birth,primary-twitter-account,three-current-positions,three-past-positions,group-memberships,specialties,skills) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:18:51.010

来自 LinkedIn 的请求的响应将是一个 xml 文件。[LinkedIn 个人资料字段](https://developer.linkedin.com/documents/profile-fields)中提到了格式和字段

要获取电子邮件字段，您需要将请求令牌 url 修改为

`RequestTokenEndpoint = new MessageReceivingEndpoint("https://api.linkedin.com/uas/oauth/requestToken?scope=r_fullprofile+r_emailaddress", HttpDeliveryMethods.PostRequest),`

您可以在以下代码中获取所需的字段

```
 XDocument document = LoadXDocumentFromStream(responseStream); 
```

例如：为了从 xml 文件中获取名字字段，

```
var firstName = document.Root.Element("first-name").Value; 
```

语言、职位、技能等字段将作为配置文件的一部分作为结构化对象返回。

例如：语言字段。

```
 var Lang = document.Root.Element("languages");                        
    var languages = new List<string>();
    if (Lang != null)
    {
     foreach (var l in Lang.Elements())
        {
          if (l.Element("language") != null && l.Element("language").Element("name") != null)
          {
            languages.Add(l.Element("language").Element("name").Value);
           }
         }
      } 
```

然后您可以将字段添加到可以在控制器中访问的“extraData”。

```
 extraData.Add("firstName", firstName);
 extraData.Add("languages", lang); 
```

# ios - 为什么我收到“无法识别的选择器发送到实例”错误？

> ID：15610029
> 
> 赞同：1
> 
> 时间：2013-03-25T07:51:58.780
> 
> 标签：ios, objective-c, oauth

我有一个 Ruby on Rails 应用程序，它有一个 API，它是一个 OAuth 2.0 提供程序并使用 Doorkeeper。我正在为该应用程序创建一个 iPhone 客户端，并使用[gtm-oauth2](https://code.google.com/p/gtm-oauth2/)库进行身份验证。这是 iPhone 应用程序的[Github 存储库](https://github.com/AzizLight/Catapult-for-iOS)。

我管理使用库执行身份验证请求并从 OAuth 服务器获取响应，但是（我认为）当 iPhone 应用程序收到响应时，iPhone 应用程序崩溃。我收到以下错误：

```
2013-03-25 07:30:51.563 Catapult for iOS[68917:c07] -[NSNull length]: unrecognized selector sent to instance 0x14f2678
2013-03-25 07:30:51.564 Catapult for iOS[68917:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSNull length]: unrecognized selector sent to instance 0x14f2678'
*** First throw call stack:
(0x13c1012 0x11e6e7e 0x144c4bd 0x13b0bbc 0x13b094e 0xf074 0x185e3 0x13b51bd 0x13b50d6 0x1531a 0x1512b 0x14ae2 0x13b51bd 0x13b50d6 0x11d0a 0x1032a 0x13b51bd 0x13b50d6 0x79be 0x77ed 0x8cf2 0xcec589 0xcea652 0xceb89a 0xcea60d 0xcea785 0xc37a68 0x4a2a911 0x4a29bb3 0x4a67cda 0x13638fd 0x4a6835c 0x4a682d5 0x4952250 0x1344f3f 0x1344a39 0x1367734 0x1366f44 0x1366e1b 0x22be7e3 0x22be668 0x12affc 0x2c6d 0x2b95)
libc++abi.dylib: terminate called throwing an exception 
```

在 iOS 开发和 Objective-C 编程方面，我是一个完全的菜鸟/初学者，我正在学习如何使用这个小项目创建我的第一个应用程序。我在 gtm-oaut2 Google Group 中问了同样的问题，根据他们的说法，问题来自我的代码而不是库。问题是我的所有代码都取自他们的 wiki，我无法确定应用程序崩溃的位置。如果我理解正确，在某些时候我会调用`length`NSNull，但我没有`length`在任何地方调用，因此我很困惑。此外，当应用程序崩溃时，突出显示的行位于 main.m 文件中，错误（在右侧标签上，不在输出中）如下：

```
Thread 1: signal SIGABRT 
```

我不知道那是什么意思...

请问有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:01:08.020

你是对的，问题是在某个地方你已经将`length`消息发送到`NSNull`. 要查明发生这种情况的确切位置，请在 objc_exception_throw 上设置断点。您可以在 Xcode UI 中使用断点选项卡左下角的小“+”按钮执行此操作。选择“添加异常断点”。然后调试器将在发生错误的地方停止您的程序，而不是等待程序实际崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T07:59:52.533

嗯......你正确理解了这个错误......你在某个地方调用了一个 NSNull 实例的长度。

我必须找出发生这种情况的地方。我认为这是在 JSON 响应中发生的。也许你（或“代码”）正在调用它期望它的东西的长度，`NSString`但它是相反`NSNull`的（即 json 有一个 NULL 值）。尝试您是否设法打印 json 响应并查看是否找到映射到空值的键...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:27:12.593

NSNull 不响应长度

您可以查看 NSNull 的[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNull_Class/Reference/Reference.html)以了解情况是否如此。

在不知道您的代码库在做什么的情况下，我不确定在哪里看，您必须调用 [NSNull null]; 在某些时候获取 NSNull 对象，或者您在某处使用返回此对象的框架。

# rdf - 从 dbpedia 查询城市及其国家

> ID：15610033
> 
> 赞同：2
> 
> 时间：2013-03-25T07:52:06.313
> 
> 标签：rdf, sparql, owl, dbpedia

我正在尝试在OWL中为国家和城市构建一个本体（如果已经存在这样的实现，请指出我）

为了获取数据，我尝试将 sparql 与以下代码一起使用：

```
SELECT ?c WHERE {
   ?c rdfs:label ?name .
   ?c dbpedia-owl:country <http://dbpedia.org/resource/Country> .
} 
```

我是 sparql 和 dbpedia 的新手。上面的代码并没有返回我所有的城市和他们所在的国家。我真的需要使用 dbpedia 来实现这一点。

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T17:54:55.723

SPARQL 区分大小写（因为 RDF 区分大小写）。DBpedia 使用的约定是属性名称以小写字母开头（例如`dbpedia-owl:country`“属于 X 的国家是……”），类名称以大写字母开头（例如`dbpedia-owl:Country`）。

如果按*作品*，我的意思是*返回结果*，这有效（`City`而不是`city`）：

```
SELECT DISTINCT ?city ?country 
WHERE { ?city rdf:type dbpedia-owl:City ; 
              rdfs:label ?label ; 
              dbpedia-owl:country ?country 
} 
```

但是请注意，并非所有您和我称之为城市的地方都被定义为`dbpedia-owl:City`- 它们可能属于类`dbpedia-owl:Settlement`或其他类。所以上面的查询可能不会产生你想要的所有城市。

另外：要构建本体，您不需要“数据”。例如，本体定义所有城市都是人口稠密的地方，所有人口稠密的地方都是地方。要能这么说，你不需要知道爱丁堡在英国。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-05T06:39:20.950

[在https://dbpedia.org/sparql](https://dbpedia.org/sparql)上使用以下代码

```
SELECT DISTINCT ?city ?country 
WHERE { ?city rdf:type dbo:City ; 
        rdfs:label ?label ; 
        dbo:country ?country 
     } 
```

# html - 将滚动条放在 div 标签的末尾

> ID：15610034
> 
> 赞同：0
> 
> 时间：2013-03-25T07:52:14.560
> 
> 标签：html, css, html-table, scrollbar

我在一个 div (MainDiv) 旁边有三个表格，最大宽度：200 像素和最大高度：400 像素，而我的 BodyDiv 具有自动大小和最大高度：300 像素。

我需要（MainDiv）中的X方向滚动和BodyDiv的Y方向滚动。所以从 MainDiv 滚动我可以滚动所有三个表。

但它只显示了三列 BodyDiv 并在 200px 位置放置了一个滚动条。我在 BodyDiv 的末尾需要这个卷轴。

这是我的代码：

## 代码

```
<div id="MainDiv" style="max-width:200px;max-height: 400px;overflow-X: auto;overflow-Y: hidden;">
<table style="background-color:Fuchsia;width:100%;">
    <tr >
        <td class="Cell">
            column1
        </td>
        <td class="Cell">
            column2
        </td>
        <td class="Cell">
            column3
        </td>
        <td class="Cell">
            column4
        </td>
        <td class="Cell">
            column5
        </td>
    </tr>
</table>
<div id="BodyDiv" style="max-height: 300px;overflow-Y: visible;overflow-X: hidden;">
    <table style="width:100%;">
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_odd">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
        <tr class="tr_even">
            <td class="Cell">
                column1
            </td>
            <td class="Cell">
                column2
            </td>
            <td class="Cell">
                column3
            </td>
            <td class="Cell">
                column4
            </td>
            <td class="Cell">
                column5
            </td>
        </tr>
    </table>
</div>
<table style="background-color:Fuchsia;width:100%;">
    <tr >
        <td class="Cell">
            column1
        </td>
        <td class="Cell">
            column2
        </td>
        <td class="Cell">
            column3
        </td>
        <td class="Cell">
            column4
        </td>
        <td class="Cell">
            column5
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:02:20.270

了解您在哪个浏览器中看到问题会有所帮助。在 Chrome 中对我来说看起来大部分都很好。

将两个 div 设置为 400px 的最大高度，您将超载外部 div 的大小（第一个表的高度 + 中间表的高度 + 最后一个表的高度，当允许中间表扩展时，将始终大于 400px 到400px），因此底部表格将被“推”出外部 div 的可视区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:08:14.507

看起来包含 DIV 应该有 overflow-X:hidden; 溢出-Y:auto 不是反过来吗？

您还需要给容器 DIV 增加一点高度以适应所有三个 DIV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:20:43.667

您将 BodyDiv 指定为 100% 宽度。这将意味着（包括存在时的滚动条）它只会是其父级宽度的 100%（MainDiv 宽度为 200px）。

使 BodyDiv 大于其父级的唯一方法是使用固定宽度值，这也可能会导致一些问题，因为不同浏览器的滚动条宽度略有不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:24:56.007

这个问题是通过添加内部div（BodyDiv）标签的固定宽度来解决的。它将滚动条放在 div 的末尾。当我们滚动 Main Div 时，它会滚动所有三个表。

# jquery - 如何在 Strut2 中使用 Ajax 调用 Action

> ID：15610035
> 
> 赞同：0
> 
> 时间：2013-03-25T07:52:16.297
> 
> 标签：jquery, ajax, jsp, struts2

[在继续从 struts1.2 中的 ajax 调用](https://stackoverflow.com/questions/15499629/how-to-call-java-action-using-ajax)以下操作

我正在尝试使用 struts2。我试过以下代码：

```
function onChangeProduct(){
  var name = $('#product').val();   
   alert(name);
  $.ajax({  
    type: "POST",  
    url: "/SampleAjax/getProduct.do",  
    data: "name=" + name,  
    success: function(response){  
      // we have the response  
      $('#info').html(response);  
    },  
    error: function(e){  
      alert('Error: ' + e);  
    }  
  }); 
```

}

下拉框：

```
<s:select  name="product"  headerKey="0" headerValue="Select Product" list="#request.Product" onchange="onChangeProduct()"></s:select> 
```

当我从上面的下拉框中选择值并尝试获取产品的价值时。我在警报消息中没有定义。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:57:09.793

是的，它会给出 undefined ，因为您没有在标签中提供 id 。将**id="product"**放入您的标签中，它将显示价值。Jquery 将使用 id 而不是名称来查找标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:08:32.967

我得到了上述相同的解决方案，特此我在下面分享代码，

详细信息.jsp

```
<script type="text/javascript">
    function onChangeProduct() {/* 
        var name = $('#product').val();
        alert(name);
        $.ajax({
            type : "POST",
            url : "/SampleAjax/getProduct.action",
            data : {
                prod : name
            },
            success : function(response) {
                // we have the response  
                $('#productPitch').html(response);
            },
            error : function(e) {
                alert('Error: ' + e);
            }
        }); */

        name=document.getElementById("product").value;
           //document.myForm.selectedGroupId.value=groupIds;
             var  strURL="/SampleAjax/getProduct.action?prod="+name;

                          if (window.XMLHttpRequest) { 

                             var xmlHttp = new XMLHttpRequest();

                           } else if (window.ActiveXObject) { 

                             var xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");

                           }
                        xmlHttp.open('POST',strURL , true);
                        xmlHttp.onreadystatechange = function() {
                        if (xmlHttp.readyState == 4) {
                    document.getElementById("productPitch").innerHTML = xmlHttp.responseText;
                      //document.getElementById("load3").style.display = "none";
                    //document.getElementById("load").style.display = "block";

                       }
                }

                xmlHttp.send(null);

    }
</script>
</head>
<body>
    Details
<s:form name="sampleDto">

    <s:select name="product" id="product" headerKey="0"
        headerValue="Select Product" list="#request.Product"
        onchange="onChangeProduct()" theme="simple">
        </s:select>
</s:form>
<div id="productPitch"></div> 
```

产品.jsp

```
<select>
        <option value="">Select</option>
        <c:forEach var="listItems" items="${ProductPitch }">

            <option value="<c:out value="${listItems}" />">
                <c:out value="${listItems}" />
            </option>
        </c:forEach>
    </select> 
```

行动：

```
System.out.println("Hi");
    ArrayList<String> prodPitch = new ArrayList<String>();
    if(null != getProd()){
        System.out.println(""+getProd());
        prodPitch = sampleBo.getProductPitch(getProd());
    }
    System.out.println(prodPitch.size());
        request.put("ProductPitch", prodPitch);

    return "success"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:05:31.333

您可以尝试更改此设置：

```
var name = $('#product').val(); 
```

对此：

```
var name = $(this).val(); 
```

并在此处添加：

```
onchange="onChangeProduct(this.value)"></s:select> 
```

完整的功能：

```
function onChangeProduct(val){
   var name = val;   
   alert(name);
   $.ajax({  
      type: "POST",  
      url: "/SampleAjax/getProduct.do",  
      data: {name : name},   //<-----use this to make a dataString
      success: function(response){  
           // we have the response  
          $('#info').html(response);  
      },  
      error: function(e){  
          alert('Error: ' + e);  
      }  
   });  

} 
```

# javascript - 如何设置视频标题 - Youtube UploadWidget

> ID：15610037
> 
> 赞同：0
> 
> 时间：2013-03-25T07:52:26.067
> 
> 标签：javascript, jquery, youtube-api

我正在尝试设置正在上传的视频的标题，并且我正在使用 ajax 来获取输入字段的值，但似乎无法让它工作。我认为问题是由于我用来获取输入字段值的 jquery 代码造成的。如果您有任何建议，请告诉我。

谢谢

这是我的代码

```
 <script>
function onYouTubeIframeAPIReady() {
  widget = new YT.UploadWidget('widget', {
    width: 500,
    events: {
      'onUploadSuccess': onUploadSuccess,
      'onProcessingComplete': onProcessingComplete,
      'onApiReady': onApiReady
    }
  });
}

function onApiReady(event){
  widget.setVideoTitle($('#title').val());
  widget.setVideoPrivacy('unlisted');
}
  <script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:57:49.147

该`onApiReady`函数在您能够在文本框中输入任何内容之前被触发。

我已经用可能最复杂的方式解决了这个问题。当用户提交标题时，我在用户身上存储了一个 cookie。然后，我在页面重新加载后检索标题并将其传递给`widget.setVideoTitle`

这是 jsfiddle 演示[http://jsfiddle.net/btevfik/BbDwj/](http://jsfiddle.net/btevfik/BbDwj/)

# android - 使用 android.app.ServiceConnectionLeaked 在模拟器中获取 android 安装错误

> ID：15610039
> 
> 赞同：1
> 
> 时间：2013-03-25T07:52:29.313
> 
> 标签：android, android-intent, android-emulator, android-service, android-logcat

我正在尝试构建一个简单的 android 应用程序，它有一个带有两个按钮的活动，上面有两个带有`setOnClickListener`方法的按钮。但是在尝试在模拟器中运行 android 项目时，该应用程序无法安装说明

```
[2013-03-25 13:03:38 - MyHapiSample] Installation error: INSTALL_FAILED_UID_CHANGED
[2013-03-25 13:03:38 - MyHapiSample] Please check logcat output for more details.
[2013-03-25 13:03:38 - MyHapiSample] Launch canceled! 
```

我在 logcat 视图中收到以下错误

```
03-25 11:52:20.430: D/ExchangeService(630): Received deviceId from Email app: null
03-25 11:52:20.430: D/ExchangeService(630): !!! deviceId unknown; stopping self and   retrying
03-25 11:52:22.543: W/Trace(429): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:22.564: W/Trace(429): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.503: W/Trace(630): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.513: D/ExchangeService(630): !!! EAS ExchangeService, onCreate
03-25 11:52:25.523: W/Trace(630): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.523: W/Trace(630): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.523: D/ExchangeService(630): !!! EAS ExchangeService, onStartCommand,   startingUp = false, running = false
03-25 11:52:25.533: W/ActivityManager(274): Unable to start service Intent {  act=com.android.email.ACCOUNT_INTENT } U=0: not found
03-25 11:52:25.533: D/ExchangeService(630): !!! Email application not found; stopping  self
03-25 11:52:25.544: W/Trace(630): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.544: W/Trace(630): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.544: D/ExchangeService(630): !!! EAS ExchangeService, onStartCommand, startingUp = true, running = false
03-25 11:52:25.564: W/ActivityManager(274): Unable to start service Intent {  act=com.android.email.ACCOUNT_INTENT } U=0: not found
03-25 11:52:25.564: W/Trace(630): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.573: W/Trace(630): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.584: W/Trace(630): Unexpected value from nativeGetEnabledTags: 0
03-25 11:52:25.593: E/ActivityThread(630): Service  com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cecfc8 that was originally bound here
03-25 11:52:25.593: E/ActivityThread(630): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cecfc8 that was originally bound here
03-25 11:52:25.593: E/ActivityThread(630):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-25 11:52:25.593: E/ActivityThread(630):  at  android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-25 11:52:25.593: E/ActivityThread(630):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-25 11:52:25.593: E/ActivityThread(630):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-25 11:52:25.593: E/ActivityThread(630):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-25 11:52:25.593: E/ActivityThread(630):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-25 11:52:25.593: E/ActivityThread(630):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-25 11:52:25.593: E/ActivityThread(630):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-25 11:52:25.593: E/ActivityThread(630):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-25 11:52:25.593: E/ActivityThread(630):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-25 11:52:25.593: E/ActivityThread(630):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-25 11:52:25.593: E/ActivityThread(630):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-25 11:52:25.593: E/ActivityThread(630):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-25 11:52:25.593: E/ActivityThread(630):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-25 11:52:25.593: E/ActivityThread(630):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-25 11:52:25.593: E/ActivityThread(630):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-25 11:52:25.593: E/ActivityThread(630):  at java.lang.Thread.run(Thread.java:856)
03-25 11:52:25.615: E/StrictMode(630): null
03-25 11:52:25.615: E/StrictMode(630): android.app.ServiceConnectionLeaked: Service  com.android.exchange.ExchangeService has leaked ServiceConnection  com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cecfc8 that was originally  bound here

03-25 11:52:25.615: E/StrictMode(630):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-25 11:52:25.615: E/StrictMode(630):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-25 11:52:25.615: E/StrictMode(630):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-25 11:52:25.615: E/StrictMode(630):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-25 11:52:25.615: E/StrictMode(630):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-25 11:52:25.615: E/StrictMode(630):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-25 11:52:25.615: E/StrictMode(630):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-25 11:52:25.615: E/StrictMode(630):  at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
03-25 11:52:25.615: E/StrictMode(630):  at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
03-25 11:52:25.615: E/StrictMode(630):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
03-25 11:52:25.615: E/StrictMode(630):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-25 11:52:25.615: E/StrictMode(630):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
03-25 11:52:25.615: E/StrictMode(630):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-25 11:52:25.615: E/StrictMode(630):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-25 11:52:25.615: E/StrictMode(630):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-25 11:52:25.615: E/StrictMode(630):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-25 11:52:25.615: E/StrictMode(630):  at java.lang.Thread.run(Thread.java:856)
03-25 11:52:25.615: W/ActivityManager(274): Unbind failed: could not find connection for android.os.BinderProxy@41649e50 
```

我没有得到可能是什么错误。我的模拟器在其他应用程序上运行良好。我正在使用**Android API 4.2(17)**

对此的任何帮助表示赞赏。

**编辑 1**

下面是我的代码，包含一个活动。

```
package com.example.myhapisample;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

import java.io.IOException;

import ca.uhn.hl7v2.DefaultHapiContext;
import ca.uhn.hl7v2.HL7Exception;
import ca.uhn.hl7v2.HapiContext;
import ca.uhn.hl7v2.model.Message;

import ca.uhn.hl7v2.parser.EncodingNotSupportedException;
import ca.uhn.hl7v2.parser.Parser;

import ca.uhn.hl7v2.model.v24.message.ADT_A01;
import ca.uhn.hl7v2.model.v24.segment.MSH;
import ca.uhn.hl7v2.model.v24.segment.PID;
import ca.uhn.hl7v2.model.v24.segment.PV1;
import ca.uhn.hl7v2.model.v24.segment.PV2;
import ca.uhn.hl7v2.model.v24.segment.NK1;
import ca.uhn.hl7v2.model.v24.segment.OBX;
import ca.uhn.hl7v2.model.v24.datatype.PN;
import ca.uhn.hl7v2.model.v24.datatype.XPN;

public class MyHapiSampleActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my_hapi_sample);

    System.out.println("HapiSample App screen launched");
     Button ParseMsgbutton=(Button)findViewById(R.id.button1);

     Button GenerateMsgbutton=(Button)findViewById(R.id.button2);

        ParseMsgbutton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View view) {

             String msg = "MSH|^~\\&|HIS|RIH|EKG|EKG|199904140038||ADT^A01||P|2.2\r"
                          + "PID|0001|00009874|00001122|A00977|SMITH^JOHN^M|MOM|19581119|F|NOTREAL^LINDA^M|C|564 SPRING ST^^NEEDHAM^MA^02494^US|0002|(818)565-1551|(425)828-3344|E|S|C|0000444444|252-00-4414||||SA|||SA||||NONE|V1|0001|I|D.ER^50A^M110^01|ER|P00055|11B^M011^02|070615^BATMAN^GEORGE^L|555888^NOTREAL^BOB^K^DR^MD|777889^NOTREAL^SAM^T^DR^MD^PHD|ER|D.WT^1A^M010^01|||ER|AMB|02|070615^NOTREAL^BILL^L|ER|000001916994|D||||||||||||||||GDD|WA|NORM|02|O|02|E.IN^02D^M090^01|E.IN^01D^M080^01|199904072124|199904101200|199904101200||||5555112333|||666097^NOTREAL^MANNY^P\r"
                        + "NK1|0222555|NOTREAL^JAMES^R|FA|STREET^OTHER STREET^CITY^ST^55566|(222)111-3333|(888)999-0000|||||||ORGANIZATION\r"
                        + "PV1|0001|I|D.ER^1F^M950^01|ER|P000998|11B^M011^02|070615^BATMAN^GEORGE^L|555888^OKNEL^BOB^K^DR^MD|777889^NOTREAL^SAM^T^DR^MD^PHD|ER|D.WT^1A^M010^01|||ER|AMB|02|070615^VOICE^BILL^L|ER|000001916994|D||||||||||||||||GDD|WA|NORM|02|O|02|E.IN^02D^M090^01|E.IN^01D^M080^01|199904072124|199904101200|||||5555112333|||666097^DNOTREAL^MANNY^P\r"
                         + "PV2|||0112^TESTING|55555^PATIENT IS NORMAL|NONE|||19990225|19990226|1|1|TESTING|555888^NOTREAL^BOB^K^DR^MD||||||||||PROD^003^099|02|ER||NONE|19990225|19990223|19990316|NONE\r"
                          + "AL1||SEV|001^POLLEN\r"
                        + "GT1||0222PL|NOTREAL^BOB^B||STREET^OTHER STREET^CITY^ST^77787|(444)999-3333|(222)777-5555||||MO|111-33-5555||||NOTREAL GILL N|STREET^OTHER STREET^CITY^ST^99999|(111)222-3333\r"
                         + "IN1||022254P|4558PD|BLUE CROSS|STREET^OTHER STREET^CITY^ST^00990||(333)333-6666||221K|LENIX|||19980515|19990515|||PATIENT01 TEST D||||||||||||||||||02LL|022LP554";

                  * The HapiContext holds all configuration and provides factory methods for obtaining
                 * all sorts of HAPI objects, e.g. parsers. 

                   HapiContext context = new DefaultHapiContext();
                   System.out.println("HapiSample App Hapi Context created");

                  * A Parser is used to convert between string representations of messages and instances of
                * HAPI's "Message" object. In this case, we are using a "GenericParser", which is able to
                * handle both XML and ER7 (pipe & hat) encodings.

                  Parser p = context.getGenericParser();

                         Message hapiMsg;
                    try {
                        // The parse method performs the actual parsing
                        hapiMsg = p.parse(msg);
               } catch (EncodingNotSupportedException e) {
                          e.printStackTrace();
                        return;
                     } catch (HL7Exception e) {
                     e.printStackTrace();
                       return;
                     }

                     * This message was an ADT^A01 is an HL7 data type consisting of several components1, so we
                           * will cast it as such. The ADT_A01 class extends from Message, providing specialized
                          * accessors for ADT^A01's segments.
                          * 
                           * HAPI provides several versions of the ADT_A01 class, each in a different package (note
                           * the import statement above) corresponding to the HL7 version for the message.

                          ADT_A01 adtMsg = (ADT_A01)hapiMsg;

                     MSH msh = adtMsg.getMSH();

                    // Retrieve some data from the MSH segment
                         String msgType = msh.getMessageType().getMessageType().getValue();
                  String msgTrigger = msh.getMessageType().getTriggerEvent().getValue();
                  Log.e("Upto this working fine", "HL7 Message parsed properly");
                        // Prints "ADT A01"
                         System.out.println(msgType + " " + msgTrigger);

                          * Now let's retrieve the patient's name from the parsed message. 
                      * 
                          * PN is an HL7 data type consisting of several components, such as 
                     * family name, given name, etc. 

                         //XPN patientName = adtMsg.getPID().getPatientName();
                         //String obxObs=adtMsg.getOBX().getObservationValue().toString();
                         //System.out.println(obxObs);

                         // Prints "SMITH"
                       // String familyName = patientName.getFamilyName().getValue();
                       // System.out.println(familyName);

        }
    });

     GenerateMsgbutton.setOnClickListener(new View.OnClickListener() {

         public void onClick(View view){

             generateHL7Message();

         }
     });

}
@Override

public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_my_hapi_sample, menu);
    return true;
}

void generateHL7Message(){
    try{
    ADT_A01 adt = new ADT_A01();
    adt.initQuickstart("ADT", "A01", "P");

// Populate the MSH Segment
  MSH mshSegment = adt.getMSH();
  mshSegment.getSendingApplication().getNamespaceID().setValue("TestSendingSystem");
    mshSegment.getSequenceNumber().setValue("123");

    // Populate the PID Segment
PID pid = adt.getPID(); 
pid.getPatientName(0).getFamilyName().getSurname().setValue("Miki");
pid.getPatientName(0).getGivenName().setValue("Daniel");
   pid.getPatientIdentifierList(0).getID().setValue("123456");
pid.getPid23_BirthPlace().setValue("Ontario");

PV1 pv1=adt.getPV1();
pv1.getAdmissionType().setValue("Above normal");
pv1.getPatientClass().setValue("E");
pv1.getPatientType().setValue("Old Patient");   
pv1.getBedStatus().setValue("Occupied");
pv1.getDietType().getIdentifier().setValue("1");
pv1.getDietType().getText().setValue("Prescription");
pv1.getDietType().getCe3_NameOfCodingSystem().setValue("Internal");

PV2 pv2=adt.getPV2();
pv2.getAdmitReason().getIdentifier().setValue("P01");
pv2.getAdmitReason().getCe2_Text().setValue("Treatment");
pv2.getVisitDescription().setValue("FirstVisitToClinic");
pv2.getPreviousTreatmentDate().setYearMonthDayPrecision(2004, 11, 6);
pv2.getPatientConditionCode().getIdentifier().setValue("1");
pv2.getPatientConditionCode().getCe2_Text().setValue("Improving");
pv2.getPatientStatusEffectiveDate().setValue("");
pv2.getModeOfArrivalCode().getCe1_Identifier().setValue("67709");
pv2.getModeOfArrivalCode().getCe2_Text().setValue("ambulance");

NK1 nk1=adt.getNK1();
nk1.getNk127_Nationality().getCe2_Text().setValue("Indian");
nk1.getRelationship().getIdentifier().setValue("1");
nk1.getRelationship().getText().setValue("Brother");

OBX obx=adt.getOBX();
   obx.getDateTimeOfTheAnalysis().getTimeOfAnEvent().setDateMinutePrecision(2013,02,11,9,36);
obx.getObx3_ObservationIdentifier().getCe1_Identifier().setValue("1");
obx.getObx3_ObservationIdentifier().getText().setValue("Blood Pressure");
obx.getObx3_ObservationIdentifier().getAlternateText().setValue("Normal");
obx.getObx11_ObservationResultStatus().setValue("Result updated");
 /*
        * In a real situation, of course, many more segments and fields would be  populated
     */

// Now, let's encode the message and look at the output
 HapiContext context = new DefaultHapiContext();
    Parser parser = context.getPipeParser();
 String encodedMessage = parser.encode(adt);
 System.out.println("Printing HL7 Encoded Message:\n\n\n");
 System.out.println(encodedMessage);
 String outputHL7="\n\n\n\n\n\n"+encodedMessage;
    }
     catch(HL7Exception ex){
         Log.e("HL7 error", "HL7 exception");
     } 
     catch(IOException e){
         Log.e("IOException error", "msg");
     }
    }
} 
```

我正在使用 HAPI 库提供的几个 jar 来解析和生成 HL7 数据。之前应用程序在模拟器中运行良好，这些 jar 带有一个按钮和`setOnClickListener`. 但是在添加另一个按钮及其`setOnClickListener`方法后，我遇到了错误。

我对这个错误的到来一无所知。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:05:12.280

`adb kill-server`当我执行并重新创建我的设备模拟器时，这个问题得到了解决。我 `adb start-server`还不得不洗牌一些我用于我的应用程序的第三方 jars。我认为这个错误与 android 模拟器的内存泄漏有关运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:35:46.587

`HAPI`我没有看到与您得到的错误之间的关系，但由于`generateHL7Message()`方法捕获了一个`IOException`，它可能正在尝试做一些与网络相关的事情。禁止主线程上的网络连接。您可以尝试`AsyncTask`按顺序处理网络事物并在`onPostExecute`方法上进行 GUI 更新。

# angularjs - 如何使用指令的模板呈现树结构数据

> ID：15610041
> 
> 赞同：4
> 
> 时间：2013-03-25T07:52:49.963
> 
> 标签：angularjs, angularjs-directive

有没有人尝试过使用指令来渲染树结构数据？

我想做的是渲染数据，如......

```
{ 
  name: "root", 
  next: null,
  child: {
    name : "1"
    next : {
      name : "2",
      next : {
        name: "3",
        next: null,
        child: null
      }, 
      child: {
        name: "2-1",
        next: null,
        child: null
      }
    },
    child: {
      name: "1-1",
      next: {
        name: "1-2",
        next: null,
        child: null
      },
      child: null
    }
  }
} 
```

到 HTML 数据，如

```
<ul>
  <li> root 
    <ul>
      <li> 1 
        <ul>
          <li> 1-1 </li>
          <li> 1-2 </li>
        </ul>
      </li>
      <l1> 2 
        <ul>
          <li> 2-1 </li>
        </ul>
      </li>
      <li> 3 </li>
    </ul>
  </li>
</ul> 
```

我知道如果数据是一个数组，我可以使用“ng-repeat”作为模板，如果数据是一个我知道结构的对象，我可以使用“{{ }}”标签。

但我不知道处理对象数据会动态变化。这意味着我还想将一些子对象作为 $scope 中的一个对象添加到数据中，并使用 angular.js 同步渲染它。

有没有人有一个好主意或你做过的经验？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-13T12:57:06.253

angularjs

```
<div ng-init="friends = [
  {name:'John', age:25, gender:'boy'},
  {name:'Jessie', age:30, gender:'girl'},
  {name:'Johanna', age:28, gender:'girl'},
  {name:'Joy', age:15, gender:'girl'},
  {name:'Mary', age:28, gender:'girl'},
  {name:'Peter', age:95, gender:'boy'},
  {name:'Sebastian', age:50, gender:'boy'},
  {name:'Erika', age:27, gender:'girl'},
  {name:'Patrick', age:40, gender:'boy'},
  {name:'Samantha', age:60, gender:'girl'}
]">     

  <ul class="example-animate-container">
    <li class="animate-repeat" ng-repeat="friend in friends | filter:q">
      [{{$index + 1}}] {{friend.name}} who is {{friend.age}} years old.
    </li>
  </ul>
</div> 
```

结果

```
[1] John who is 25 years old.
[2] Jessie who is 30 years old.
[3] Johanna who is 28 years old.
[4] Joy who is 15 years old.
[5] Mary who is 28 years old.
[6] Peter who is 95 years old.
[7] Sebastian who is 50 years old.
[8] Erika who is 27 years old.
[9] Patrick who is 40 years old.
[10] Samantha who is 60 years old. 
```

# c++ - size_t 的正确 printf 格式说明符：%zu 还是 %Iu？

> ID：15610053
> 
> 赞同：49
> 
> 时间：2013-03-25T07:53:51.493
> 
> 标签：c++, c, visual-studio-2010, printf, format-specifiers

我想使用 Microsoft Visual Studio 2010 在 C++ 中打印出一个`size_t`变量的值`printf`（我想在这段特定的代码中使用`printf`而不是，所以请不要告诉我我应该使用的答案）。`<<``<<`

根据帖子

> [c 中与平台无关的 size_t 格式说明符？](https://stackoverflow.com/questions/2125845/platform-independent-size-t-format-specifiers-in-c)

正确的独立于平台的方法是使用`%zu`，但这似乎在 Visual Studio 中不起作用。Visual Studio 文档位于

> [http://msdn.microsoft.com/en-us/library/vstudio/tcxf1dw6.aspx](http://msdn.microsoft.com/en-us/library/vstudio/tcxf1dw6.aspx)

告诉我必须使用`%Iu`（使用大写`i`，而不是小写`l`）。

微软没有遵循这里的标准吗？还是自 C99 以来标准已更改？还是 C 和 C++ 之间的标准不同（这对我来说似乎很奇怪）？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2017-05-18T18:20:15.133

MS Visual Studio 之前不支持`%zu`printf 说明符`VS2013`。从 VS2013 开始（例如`_MSC_VER`>= `1800`）`%zu` [可用](https://docs.microsoft.com/en-us/cpp/c-runtime-library/format-specification-syntax-printf-and-wprintf-functions?view=vs-2015#size-prefixes-for-printf-and-wprintf-format-type-specifiers)。

作为替代方案，对于以前版本的 Visual Studio，如果您要打印较小的值（例如 std 容器中的元素数量），您可以简单地转换为 an`int`并使用`%d`：

```
printf("count: %d\n", (int)str.size()); // less digital ink spent
// or:
printf("count: %u\n", (unsigned)str.size()); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-12-11T20:21:59.167

[微软文档](http://msdn.microsoft.com/en-us/library/vstudio/tcxf1dw6.aspx) 指出：

> 不支持、`hh`、`j`和length 前缀`z`。`t`

因此`%zu`不支持。

它还指出要使用的正确前缀`size_t`是`I`- 所以你会使用`%Iu`.

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-25T07:57:56.760

微软的 C 编译器没有赶上最新的 C 标准。它基本上是一个 C89 编译器，带有一些从 C99 中挑选出来的特性（例如`long long`）。因此，不支持某些东西（`%zu`出现在 C99 中）也就不足为奇了。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-25T07:58:58.297

根据[这里](https://stackoverflow.com/questions/2524611/how-to-print-size-t-variable-portably)的答案，`%z`是 C99 的补充。由于 MSVC 不支持任何后来的 C 标准，因此`%z`不受支持也就不足为奇了。

# php - 当我运行此代码时出现解析错误：语法错误，文件意外结束

> ID：15610055
> 
> 赞同：3
> 
> 时间：2013-03-25T07:54:01.847
> 
> 标签：php

```
<?php
    require('config.php');
    if(isset($_POST['submit'])){
    }else{
    $form =<<<EOT
    <form action="reg.php" method="POST">
        First Name: <input type="text" name="name"/><br />
        Last Name: <input type="text" name="lname"/><br />
        Username: <input type="text" name="uname"/><br />
        Email: <input type="text" name="email1"/><br />
        Confirm Email: <input type="text" name="email2"/><br />
        Password: <input type="password" name="pass1"/><br />
        Confirm Password: <input type="password" name="pass2"/><br />
        <input type="submit" value="Register" name="submit"/>
    </form>
    EOT;
    echo $form;
    }
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T07:55:33.510

你的“EOT”不能缩进，它必须在行的开头（很遗憾）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:06:58.997

在开始和结束 EOT 的定义时，你不能有意图……看下面的代码。这不好（它搞砸了其余代码的意图），但这是唯一的方法。

```
<?php
    require('config.php');

    if(isset($_POST['submit'])){

    }else{
$form =<<<EOT
    <form action="reg.php" method="POST">
    First Name: <input type="text" name="name"/><br />
    Last Name: <input type="text" name="lname"/><br />
    Username: <input type="text" name="uname"/><br />
    Email: <input type="text" name="email1"/><br />
    Confirm Email: <input type="text" name="email2"/><br />
    Password: <input type="password" name="pass1"/><br />
    Confirm Password: <input type="password" name="pass2"/><br />
    <input type="submit" value="Register" name="submit"/>
    </form>
EOT;
    }

    echo $form;

?> 
```

# core-data - sqlite manager firefox extensions 不显示所有表

> ID：15610062
> 
> 赞同：1
> 
> 时间：2013-03-25T07:54:38.387
> 
> 标签：core-data, browser

我正在使用 Firefox 上的 sqlite manager 插件来检查我的 iOS 应用程序的 sqlite 文件，但问题是我的核心数据文件中有 45 个表，而 sqlite manager 没有全部显示，我不知道为什么！ ！

有人知道吗？

谢谢，

# android - 如何将viewflipper中的视图添加到android的左侧

> ID：15610064
> 
> 赞同：0
> 
> 时间：2013-03-25T07:54:55.500
> 
> 标签：android, viewflipper

我正在尝试有一个 viewflipper，它将图像视图添加到左侧。当前，当我使用 viewflipper 添加视图时

viewFlipper.addview（图像）；

图像被添加到右侧的取景器中。

孩子 0-> 孩子 1-> 孩子 2-> 孩子 3-> 等等

我想将子视图从右到左添加到 viewflipper。

<- 孩子 3 <-孩子 2 <- 孩子 1 <-孩子 0

有没有我失踪的财产？还是应该明确地完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:03:11.130

你可以使用这个：

```
addView(View child, int index, ViewGroup.LayoutParams params) 
```

或者

```
addView(View child, int index) 
```

在索引 0 处添加视图以获得您想要的效果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:20:03.847

按如下顺序将视图添加到您的 ViewFlipper 对象

```
child 3 at index 0
child 2 at index 1
child 1 at index 2
child 0 at index 3 
```

结果将 child3 显示为第一个元素，将 child 0 显示为最后一个元素。

# sharepoint-2010 - SharePoint 2010 在文档库上创建示例工作流

> ID：15610066
> 
> 赞同：0
> 
> 时间：2013-03-25T07:55:16.030
> 
> 标签：sharepoint-2010, sharepoint-workflow

我对 SharePoint 2010 中的工作流完全陌生。我知道这个问题可能太基础了。但请帮我解决这个问题。

我有 SharePoint 2010 Web 应用程序有组：演示者和批准者。演示者需要提交演示幻灯片，审批者批准/拒绝它。我有一个将演示文稿上传到的文档库。当演示者上传演示文稿时，必须向 Approvers 组发送电子邮件通知。审批者审查演示文稿并批准/拒绝演示文稿，向演示者发送一封电子邮件，通知审批者的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:37:02.963

通过 SharePoint Designer 2010，您可以轻松地将审批工作流 (OOB) 附加到您的文档库。

您的 wf 将根据文档库项目值处理操作。

如果项目值（字段 Approbation 状态）等于 Approved => send mail ok to presenter

如果项目值（字段 Approbation 状态）等于 Rejected => 将邮件 ko 发送给演示者

ETC...

更多详情：http: [//blog.sharepoint-videos.com/workflow-designer-in-sharepoint-designer-2010/](http://blog.sharepoint-videos.com/workflow-designer-in-sharepoint-designer-2010/)

# c# - 在设备上运行时 WP7 套接字响应“连接重置”

> ID：15610072
> 
> 赞同：0
> 
> 时间：2013-03-25T07:55:41.027
> 
> 标签：c#, windows-phone-7, sockets, usb, zune

我真的很难解决这个问题：

*   我将套接字连接到服务器的 ip 和端口
*   等到我收到*成功*消息
*   调用 send() 函数将数据包发送到服务器
*   receive() 函数返回“*连接重置*”并且没有到达服务器

在模拟器上一切正常，我正在使用 USB 电缆连接设备，Zune 正常启动。

有任何想法吗？

# ios - -[__NSDictionaryM isEqualToString:]：无法识别的选择器发送到实例，当我调用此方法时 [self.tableView endUpdates]

> ID：15610074
> 
> 赞同：1
> 
> 时间：2013-03-25T07:55:47.623
> 
> 标签：ios, objective-c

```
0   YunYing                             0x0003fbc1 -[EnterpriseInfo didSelectCellRowFirstDo:nextDo:] + 993
1   YunYing                             0x0003f569 -[EnterpriseInfo tableView:didSelectRowAtIndexPath:] + 473
2   UIKit                               0x00564285 -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 1194
3   UIKit                               0x005644ed -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 201
4   Foundation                          0x00f6e5b3 __NSFireDelayedPerform + 380
5   CoreFoundation                      0x01b6f376 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
6   CoreFoundation                      0x01b6ee06 __CFRunLoopDoTimer + 534
7   CoreFoundation                      0x01b56a82 __CFRunLoopRun + 1810
8   CoreFoundation                      0x01b55f44 CFRunLoopRunSpecific + 276
9   CoreFoundation                      0x01b55e1b CFRunLoopRunInMode + 123
10  GraphicsServices                    0x0208c7e3 GSEventRunModal + 88
11  GraphicsServices                    0x0208c668 GSEventRun + 104
12  UIKit                               0x004b4ffc UIApplicationMain + 1211
13  YunYing                             0x0000221d main + 141
14  YunYing                             0x00002145 start + 53
)
 2013-03-25 16:52:39.867 YunYing[4242:c07] -[__NSDictionaryM isEqualToString:]:       unrecognized selector sent to instance 0x154bd020
  2013-03-25 16:52:39.868 YunYing[4242:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryM isEqualToString:]:  unrecognized selector sent to instance 0x154bd020'
  *** First throw call stack:
  (0x1bb0012 0x1570e7e 0x1c3b4bd 0x1b9fbbc 0x1b9f94e 0x60de9f 0x60e064 0x3efed 0x56f8fb   0x56f9cf 0x714f30 0x71f7e2 0x55a016 0x556617 0x562945 0x562973 0x3fc26 0x3f569 0x564285 0x5644ed 0xf6e5b3 0x1b6f376 0x1b6ee06 0x1b56a82 0x1b55f44 0x1b55e1b 0x208c7e3 0x208c668 0x4b4ffc 0x221d 0x2145)
  libc++abi.dylib: terminate called throwing an exception 
```

> -[__NSDictionaryM isEqualToString:]：无法识别的选择器发送到实例

，当我调用这个方法时：`[self.tableView endUpdates]`，代码停在这里并通过断点调试抛出错误。

我检查了我的代码，没有`NSDictionary`对象调用`isEqualToString`方法。

谢谢！以下是我的代码：我只想实现可伸缩的表格视图

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return arrayForShow.count;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{   
    if (self.isOpen) {
    if (self.selectIndex.section==section) {
        return [[[arrayForShow objectAtIndex:section]objectForKey:@"list"]count]+1;
    }
    }
    return 1; 
 }

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{

    if ((self.isOpen)&&(self.selectIndex.section==indexPath.section)&&(indexPath.row!=0)){
    static NSString *CellIdentifier = @"EnterpriseCell";

    EnterpriseCell *cell=(EnterpriseCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil) {
        cell = [[[NSBundle mainBundle] loadNibNamed:@"EnterpriseCell" owner:self options:nil] objectAtIndex:0];
    }
    NSArray *enterpriseNames=[[arrayForShow objectAtIndex:indexPath.section]objectForKey:@"list"];
    cell.enterpriseName.text = [enterpriseNames objectAtIndex:indexPath.row-1];
    return cell;

}
    else
    {
    static NSString *CellIdentifier = @"CityCell";
    CityCell *cell=(CityCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil) {
        cell = [[[NSBundle mainBundle] loadNibNamed:@"CityCell" owner:self options:nil]objectAtIndex:0];
    }
    NSString *name=[[arrayForShow objectAtIndex:indexPath.section]objectForKey:@"name"];
    cell.cityName.text=name;
    [cell changeArrowWithUp:([self.selectIndex isEqual:indexPath]? YES:NO)];

        return cell;
    }  
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.row == 0) {
        if ([indexPath isEqual:self.selectIndex]) {
        self.isOpen = NO;
        [self didSelectCellRowFirstDo:NO nextDo:NO];
        self.selectIndex = nil;

        }else
        {
            if (!self.selectIndex) {
            self.selectIndex = indexPath;
            [self didSelectCellRowFirstDo:YES nextDo:NO];

            }else
            {

            [self didSelectCellRowFirstDo:NO nextDo:YES];
        }
    }

}
else
{
    NSDictionary *dic = [arrayForShow objectAtIndex:indexPath.section];
    NSArray *list = [dic objectForKey:@"list"];
    NSString *item = [list objectAtIndex:indexPath.row-1];
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:item message:nil delegate:nil cancelButtonTitle:@"cancel" otherButtonTitles: nil];
    [alert show];
}

[tableView deselectRowAtIndexPath:indexPath animated:YES];

}

- (void)didSelectCellRowFirstDo:(BOOL)firstDoInsert nextDo:(BOOL)nextDoInsert
{
    self.isOpen = firstDoInsert;

    CityCell *cell = (CityCell *)[self.cityTable cellForRowAtIndexPath:self.selectIndex];
    [cell changeArrowWithUp:firstDoInsert];

   int section = self.selectIndex.section;
    int contentCount = [[[arrayForShow objectAtIndex:section] objectForKey:@"list"] count];

NSMutableArray* rowToInsert = [[NSMutableArray alloc] init];
for (NSUInteger i = 1; i < contentCount + 1; i++) {
    NSIndexPath* indexPathToInsert = [NSIndexPath indexPathForRow:i inSection:section];
    [rowToInsert addObject:indexPathToInsert];
}

[self.cityTable beginUpdates];

if (firstDoInsert)
{   [self.cityTable insertRowsAtIndexPaths:rowToInsert withRowAnimation:UITableViewRowAnimationTop];
}
else
{
    [self.cityTable deleteRowsAtIndexPaths:rowToInsert withRowAnimation:UITableViewRowAnimationTop];
}

[self.cityTable endUpdates];

    if (nextDoInsert) {
    self.isOpen = YES;
    self.selectIndex = [self.cityTable indexPathForSelectedRow];
    [self didSelectCellRowFirstDo:YES nextDo:NO];
    }
    if (self.isOpen){
    [self.cityTable scrollToNearestSelectedRowAtScrollPosition:UITableViewScrollPositionTop animated:YES];
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:10:55.397

在您的代码中的某处，您正在拨打电话`isEqualToString`。现在源字符串当时无效。它要么已被释放，要么现在指向 Dictionary 对象。

检查生成方法调用的字符串变量的引用`isEqualToString`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:03:11.363

在某处您使用没有正确数据的 NSDictionaryM，因此您面临此类错误，或者您检查存储在包含 NSDictionary 的表中的值。

# r - OCaml 中是否有内置函数用于平均和方差值？

> ID：15610077
> 
> 赞同：1
> 
> 时间：2013-03-25T07:56:17.390
> 
> 标签：r, ocaml

我发现使用该函数 `mean()`并`var()`计算 R 中的平均值和方差值很方便。

我想知道 OCaml 中是否有类似的内置函数？

```
mean(x) = sum(x)/length(x)

var(x) = sum((x-mean(x))^2)/(length(x)-1) 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:07:26.930

OCaml 在标准库中没有这些功能。但是，存在与[GSL的](http://www.gnu.org/software/gsl/ "GSL")[绑定](https://bitbucket.org/mmottl/gsl-ocaml "OCaml 绑定")。[统计绑定](http://mmottl.bitbucket.org/projects/gsl-ocaml/api/Stats.html "Statistics bindings")包括均值、方差和许多其他函数。

# vb.net - 插入/删除记录后组合框未刷新

> ID：15610080
> 
> 赞同：0
> 
> 时间：2013-03-25T07:56:23.437
> 
> 标签：vb.net, ms-access-2007

我正在使用 vb.net 并访问 2007 我有一个关于组合框刷新的问题

这是我的代码：

```
Private Sub comboRefresh()

    Try
        cmbSn_no.DataSource = Nothing
        cmbSn_no.Items.Clear()

        Dim asql As String = ("SELECT * FROM Vendor_det")
        da = New OleDb.OleDbDataAdapter(asql, cnnOLEDB)
        da.Fill(ds, "Vendor_det")

        cmbSn_no.ValueMember = "sr_no"
        cmbSn_no.DataSource = ds.Tables(0)
        cmbSn_no.SelectedIndex = 0

        'DataGridView1.DataSource = ds.Tables(0)
        'DataGridView1.Update()

    Catch ex As Exception
        MsgBox("ERROR : " & ex.Message.ToString)

    End Try

End Sub

Private Sub cmbSn_no_SelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmbSn_no.SelectedIndexChanged

    Dim asql As String = ("SELECT * FROM Vendor_det where sr_no='" & cmbSn_no.Text & "'")
    cnnOLEDB.Open()
    cmd = New OleDb.OleDbCommand(asql, cnnOLEDB)
    dr = cmd.ExecuteReader
    If dr.Read = True Then

        cmbSn_no.Text = dr("sr_no")
        txtPart_no.Text = dr("part_no")
      .......... 
    End If
    cnnOLEDB.Close()
End Sub 
```

我从添加和删除记录按钮单击事件中调用 comborefresh() 方法。如果我不使用注释代码并单击添加/删除按钮，则输出如下所示：

数据库中的记录：

abcd123 bbbc123

如果我添加记录 cccc123 .. 它应该更新并且我的组合框应该填充以下记录：

abcd123 bbbc123 cccc123

但它充满了

abcd123 bbbc123 cccc123 abcd123 bbbc123

如果我使用注释行，那么组合框将充满“System.Data.DataRowView”没有提示错误，但我没有得到我的答案......即使我已经尝试过......

combobox.refresh() combobox.selectedindex=-1 和 combobox.items.clear()

这没用

请解决我的问题....提前谢谢您...:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:42:28.820

您刷新 ComboBox 的代码应该没问题，但无需调用 cmbSn_no.Items.Clear()，因为 cmbSn_no.DataSource = Nothing 将删除 ComboBox 中的所有数据。

但是，根据您的代码，我假设您将 DataSet (ds) 声明为表单变量，因此当您要填写**ds**时，旧数据（前 2 个数据 - abcd123 bbbc123）仍然存在，然后运行 ​​Fill方法会将**这些**旧数据与**一整套新数据相加——即 abcd123 bbbc123 cccc123**。为确保，请尝试**在 da.Fill(ds, "Vendor_det") 之后**添加此代码：

```
MsgBox.Show(ds.Tables(0).Rows.Count) 
```

我认为它会显示 5，而不是 3。如果是这种情况，请尝试在 Fill 之前先刷新 DataSet，方法是创建 DataSet 的新实例，或者删除表。

# gwt - 哪个 Google GWT 产品使用 UiBinder？

> ID：15610082
> 
> 赞同：8
> 
> 时间：2013-03-25T07:56:32.300
> 
> 标签：gwt, uibinder

我想知道用GWT编写的google的哪个产品使用了UiBinder。这将使我能够为我们的团队/管理层强调 UiBinder 的用例。

我知道以下[使用 GWT 的 Google 产品](https://plus.google.com/+RayCromwell/posts/ivVepvxCu3g)列表。***哪一个使用 UiBinder？***

```
AdWords - http://google.com/adwords
AdSense - http://google.com/adsense
Flights - http://flights.google.com
Hotel Finder - http://www.google.com/hotelfinder
Offers - https://www.google.com/offers
Wallet - http://wallet.google.com
The New Blogger - http://www.blogger.com/
Chrome Webstore - https://chrome.google.com/webstore (Closure, but embeds GWT checkout code)
Product Search - http://www.google.com/prdhp?hl=en&tab=mf
Public Data - http://www.google.com/publicdata/home
New Google Groups - http://groups.google.com
Orkut - http://www.orkut.com
Google Health (discontinued)
Google Wave (discontinued)
PlayN (basis of Angry Birds)
Google Takeout - https://www.google.com/takeout/#custom
Google Pagespeed - https://developers.google.com/pagespeed/
Google WebFonts - http://www.google.com/webfonts
Google Tables - https://www.google.com/fusiontables/DataSource?dsrcid=2049253
Google Merchants - http://www.google.com/merchants 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:11:25.870

这几乎是不可能确定的，因为 UiBinder 生成的代码是你可以手写的，但是如果你在脚本中看到大块的 HTML，那么它们很可能来自`HTMLPanel`UiBinder 模板中的一个或一个`UiRenderer`; 特别是如果字符串以结尾`<span id='`或开头`'></span>`（但它也可以简单地来自 a`SafeHtmlTemplates`或手动编码`HTMLPanel`或`setInnerHTML`调用。

# python - 如何在python中从csv中读取编码字符串的数据帧

> ID：15610083
> 
> 赞同：5
> 
> 时间：2013-03-25T07:56:38.330
> 
> 标签：python, utf-8, pandas

假设我阅读了一个 html 网站，我得到了一个名字列表，例如：'Amiel, Henri-Frédéric'。

为了获取名称列表，我使用以下代码对 html 进行解码：

```
f = urllib.urlopen("http://xxx.htm")
html = f.read()
html=html.decode('utf8')
t.feed(html)
t.close()
lista=t.data 
```

此时，变量 lista 包含一个名称列表，例如：

[u'Abatantuono, Diego', ... , u'Amiel, Henri-Frédéric']

现在我想：

1.  将这些名称放在 DataFrame 中；
2.  将 DataFrame 保存在 csv 文件中；
3.  通过 DataFrame 在 Python 中读取 csv

为简单起见，让我们只考虑上面的名称来完成步骤 1 到 3。我将使用以下代码：

```
name=u'Amiel, Henri-Fr\xe9d\xe9ric'
name=name.encode('utf8')
array=[name]
df=pd.DataFrame({'Names':array})
df.to_csv('names')
uni=pd.read_csv('names')
uni #trying to read the csv file in a DataFrame 
```

此时我收到以下错误：

```
UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 67: invalid continuation byte 
```

如果我将上述代码的最后一行替换为：

```
print uni 
```

我可以阅读 DataFrame，但我认为这不是处理此问题的正确方法。

我对其他用户发布的关于这个论点的许多问题提出了质疑，但我没有解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T08:02:36.343

`to_csv`方法和`read_csv`函数都接受一个`encoding`参数。用它。并在内部使用 unicode。如果你不这样做，尝试在你的程序中编码/解码*会让你得到*.

```
import pandas as pd

name = u'Amiel, Henri-Fr\xe9d\xe9ric'
array = [name]
df = pd.DataFrame({'Names':array})
df.to_csv('names', encoding='utf-8')
uni = pd.read_csv('names', index_col = [0], encoding='utf-8')
print uni  # for me it works with or without print 
```

出去：

```
 Names
0  Amiel, Henri-Frédéric 
```

# c# - String.Format 在字符串中存储双引号

> ID：15610091
> 
> 赞同：22
> 
> 时间：2013-03-25T07:57:17.803
> 
> 标签：c#, string

我想表示以下字符串：

```
aaaa,23,"something inside double quotes", 99, 8, 7 
```

我想这样做使用`String.Format`：

```
StringBuilder.AppendLine(string.Format("{0},{1},{2},{3},{4},{5}",
    item.one, item.two, item.three, item.four, item.five, item.six)); 
```

我需要`{2}`用双引号括起第三个参数。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-25T07:59:13.873

```
string.Format("{0}, {1}, \"{2}\", {3}, {4}, {5}", ...); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-25T08:00:32.740

你可以这样做：

```
string.Format("{0},{1},\"{2}\",{3},{4},{5}"
   , item.one
   , item.two
   , item.three
   , item.four
   , item.five
   , item.six); 
```

这是一个很好的链接，您可以在其中阅读更多相关信息：http: [//msdn.microsoft.com/en-us/library/267k4fw5.aspx](http://msdn.microsoft.com/en-us/library/267k4fw5.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-25T08:00:21.270

您应该`\`在 qoutes 之前添加：

```
stringbuilder.AppendLine(string.Format("{0},{1},\"{2}\",{3},{4},{5}", item.one, item.two, item.three, item.four, item.five, item.six)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T08:03:57.477

您可以放置`\`​​符号来指示转义序列，后跟保留字符（通常为 \n、\0、\t、\r、\" 等）

# jpa - JPA 使用 Criteria 查找日期在开始日期和结束日期之间可以为空的实体

> ID：15610094
> 
> 赞同：4
> 
> 时间：2013-03-25T07:57:46.370
> 
> 标签：jpa, criteria-api

```
CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery cQuery = builder.createQuery();
    Root<AcsTemplateDateJPA> root = cQuery.from(AcsTemplateDateJPA.class);
    ParameterExpression<Date> d = builder.parameter(Date.class);
    cQuery.where(builder.between(d, root.<Date>get("inservicedate"), root.<Date>get("outservicedate"))); 
    Query query = em.createQuery(cQuery.select(root.get("acstemplateid"))).setParameter(d, planDate, TemporalType.DATE);
    List results =query.getResultList(); 
```

这里 outService 日期可以为空（结束在未来无限期）我如何添加这个条件？

谢谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T08:47:36.003

我会将日期比较分成两个块，并测试 if `outservicedate` [isNull()](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#isNull%28javax.persistence.criteria.Expression%29)。就像是：

```
Predicate startPredicate = builder.greaterThanOrEqualTo(root.<Date>get("inservicedate"), d);
Path<Date> outServiceDate = root.<Date>get("outservicedate");
Predicate endPredicate = builder.or(builder.isNull(outServiceDate), builder.lessThanOrEqualTo(outServiceDate, d));
Predicate finalCondition = builder.and(startPredicate, endPredicate); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-09T12:10:20.720

这应该是不言自明的：

```
 @Override
                public Predicate toPredicate( Root<OrganizationCommission> root, CriteriaQuery<?> query,
                                              CriteriaBuilder cb )
                {
                    // The predicate validFrom - the column should contains null or values less than validityDate
                    Predicate validFrom = cb.or( root.get( OrganizationCommission_.validFrom ).isNull(),
                                                 cb.lessThanOrEqualTo(
                                                         root.get( OrganizationCommission_.validFrom ),
                                                         validityDate ) );
                    // The predicate validTo - the column should contains null or values greater than validityDate
                    Predicate validTo = cb.or( root.get( OrganizationCommission_.validTo ).isNull(),
                                               cb.greaterThanOrEqualTo( root.get( OrganizationCommission_.validTo ),
                                                                        validityDate ) );
                    Predicate predicate = cb.conjunction();
                    predicate.getExpressions().add( cb.and( validFrom, validTo ) );
                    return predicate;
                } 
```

# wpf - WPF Windowstyle 无 + 使用本机 Windows API 创建 DropShadow

> ID：15610096
> 
> 赞同：1
> 
> 时间：2013-03-25T07:57:51.590
> 
> 标签：wpf, window, dropshadow, window-style

我想通过 Windowstyle=None 创建一个无边框窗口，但仍需要默认的 OS DropShadow 效果。

我不想自己画边界，因为我不想设置 AllowTransparency=True（应用程序在低端系统上运行，这会导致应用程序的性能非常差）。

我也不想使用为我生成“外壳”的第三方 Dll。

所以想要的是调用操作系统原生 API 来为我绘制它的默认边框。[我在DropShadow for WPF Borderless Window](https://stackoverflow.com/questions/3372303/dropshadow-for-wpf-borderless-window)尝试了这个答案，但这对窗口 8 不起作用。

任何的意见都将会有帮助。

谢谢

编辑：使用 .NET 4.0，解决方案应该支持 Windows 7 和 Windows 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T19:31:20.703

Windows 8 中没有原生阴影。您可以调用 API，但它不会做任何事情。

Metro 扁平化设计没有阴影，与光面的 Vista 和 W7 不同。

没有 AllowsTransparency="True" 的 AFAIK 你不会有这种效果。

# android - Android4.2安装或升级后Widget加载缓慢

> ID：15610100
> 
> 赞同：1
> 
> 时间：2013-03-25T07:58:12.920
> 
> 标签：android, widget, android-4.2-jelly-bean

我在几个版本前为我的应用程序添加了一个小部件。它一直运行良好。最近我收到一些反馈，显示当应用程序首次安装或升级时，小部件加载非常缓慢。这个问题发生在 Nexus 和 Nexus4(Android 4.2)。

我试图在我的 .onReceive 中记录操作`AppWidgetProvider`。

然后我找到了广播，`android.appwidget.action.APPWIDGET_ENABLED`并且 `android.appwidget.action.APPWIDGET_UPDATE`，在我安装应用程序后将近 1 分钟就收到了。

有没有人解决这个问题

# ruby-on-rails - 创建范围方法

> ID：15610101
> 
> 赞同：1
> 
> 时间：2013-03-25T07:58:23.027
> 
> 标签：ruby-on-rails

我正在玩 Active Record Reputation gem [https://github.com/twitter/activerecord-reputation-system/wiki/Scope-Reputations](https://github.com/twitter/activerecord-reputation-system/wiki/Scope-Reputations)。在我的应用程序中，我创建了一个信誉系统，用户可以根据他收到的每一个答案投票获得信誉积分，如果他收到最佳答案，则可以获得额外积分（该代码未显示）。在`User.rb`模型中，我计算了一个“业力”声誉（见下文），它只是将他获得的两种积分的总和相加。

```
has_reputation :karma,
    :source => [
      { :reputation => :total_vote_points },
      { :reputation => :total_best_points }
    ]

  has_reputation :total_vote_points,
    :source => {reputation: :votes, of: :answers}

  has_reputation :total_best_points, 
    :source => {reputation: :best, of: :answers} 
```

total_vote_points 信誉将创建这样的表记录，其中 target_id:8 是用户的 id

```
#<ReputationSystem::Reputation id: 24, reputation_name: "total_vote_points", value: 1.0, aggregated_by: "sum", target_id: 8, target_type: "User", active: true, created_at: "2013-03-25 06:07:28", updated_at: "2013-03-25 06:07:28"> 
```

karam 声誉将创建一个像这样的表记录

```
#<ReputationSystem::Reputation id: 28, reputation_name: "karma", value: 11.0, aggregated_by: "sum", target_id: 7, target_type: "User", active: true, created_at: "2013-03-25 06:07:35", updated_at: "2013-03-25 06:07:35"> 
```

继续前进，gem 文档说范围可以添加到声誉中，但不要详细说明。它给出了这个例子

```
has_reputation :name,
    ...
    :scopes => [:scope1, :scope2, ...] 
```

使用我上面的代码，如果我想检查“thisWeek”和“allTime”的业力点，我猜它看起来像这样

```
 has_reputation :karma,
    :source => [
      { :reputation => :total_vote_points },
      { :reputation => :total_best_points }
    ], 
    :scopes => [:thisWeek, :allTime] 
```

我想知道如何编写 :thisWeek （本周获得的业力积分）和 :allTime （无限制的业力积分）范围方法。

知道“业力”的一个声誉表记录看起来像这样

```
 #<ReputationSystem::Reputation id: 28, reputation_name: "karma", value: 11.0, aggregated_by: "sum", target_id: 7, target_type: "User", active: true, created_at: "2013-03-25 06:07:35", updated_at: "2013-03-25 06:07:35"> 
```

你能建议我如何编写所需的范围方法吗？

# asp.net-mvc - 如何拆分我的控制器名称以进行 url 路由？

> ID：15610104
> 
> 赞同：1
> 
> 时间：2013-03-25T07:58:35.043
> 
> 标签：asp.net-mvc, url-routing

我想拆分我的控制器名称..

*例如;*

我的控制器名称是 For_ExpController.cs

和

我想要这样的网址；

```
http://localhost/For/Exp/Action 
```

如何在我的 RouteConfig.cs 上定义它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:04:00.913

您可以编写自定义路线：

```
public class MyRoute: Route
{
    public MyRoute()
        : base(
            "{part1}_{part2}/{action}",
            new RouteValueDictionary(new { controller = "for_exp", action = "index" }),
            new RouteValueDictionary(new { part1 = @"[a-z]+", part2 = @"[a-z]+" }),
            new MvcRouteHandler()
        )
    {
    }

    public override RouteData GetRouteData(HttpContextBase httpContext)
    {
        var rd = base.GetRouteData(httpContext);
        if (rd == null)
        {
            return null;
        }

        var part1 = rd.GetRequiredString("part1");
        var part2 = rd.GetRequiredString("part2");
        rd.Values["controller"] = string.Concat(part1, "_", part2);
        return rd;
    }
} 
```

这将在您的`Application_Start`：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.Add("MyRoute", new MyRoute());

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}",
        defaults: new { controller = "Home", action = "Index" }
    );
} 
```

# php - 如何从远程服务器执行 PHP 中的 .bat 文件？

> ID：15610105
> 
> 赞同：2
> 
> 时间：2013-03-25T07:58:39.310
> 
> 标签：php, batch-file, remote-server

我正在尝试在 PHP 中执行以下代码。它运行，但返回我的本地系统的结果，我需要 bat 文件应该在远程系统上运行。

```
if( pclose(popen("cmd /c "."\\\\ServerName\path\Test.bat", 'r')) ) {
    return true;
    }
    return false; 
```

Test.bat DIR > mohit.txt 我看到 mohit.txt 是在我的本地计算机根目录中创建的，因为我期望远程服务器上的文件位于同一目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T01:23:15.467

您是否尝试过使用 php 的[exec](http://php.net/manual/pt_BR/function.exec.php)函数？

`exec( '/path/Test.bat' );`

# .net - 如何使用 ExpandoObject 重载方法？

> ID：15610106
> 
> 赞同：0
> 
> 时间：2013-03-25T07:58:43.653
> 
> 标签：.net, c#-4.0, dynamic, expandoobject

我有以下 expando 对象

```
 dynamic person = new ExpandoObject();
        person.FirstName = " FirstName ";
        person.SecondName = " FirstName ";
        person.FullName = person.FirstName + person.SecondName;
        person.BirthDate = new DateTime(1990, 1, 1);

        person.CalcAge = (Func<int>)
            (() => DateTime.Now.Year - person.BirthDate.Year); 
```

我定义**`CalcAge`**了计算年龄的方法..我想添加具有如下参数的重载方法

```
person.CalcAge = (Func<DateTime, int>)
            ((DateTime date) => date.Year - person.BirthDate.Year); 
```

我该如何实现它**`ExpandoObject`**，我可以在其中执行以下操作？

```
int age1 = person.CalcAge();
MessageBox.Show(age1.ToString());

int age2 = person.CalcAge2(new DateTime(1980, 1, 1));
MessageBox.Show(age2.ToString()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:02:26.060

我不相信你可以。我强烈建议您创建一个新的*命名*类型。看起来您知道要创建的所有属性和方法 - 所以只需创建一个`Person`类型。`ExpandoObject`在某些场景下很有用，但不要指望它能够应付一切。

如果您真的想要一个具有此功能的动态对象，则需要从中派生一个类`DynamicObject`- 这样您*就可以*实现重载，如果您愿意（通过拦截方法调用）。

# hibernate - Hibernate优化，使用二级缓存？

> ID：15610108
> 
> 赞同：0
> 
> 时间：2013-03-25T07:58:47.280
> 
> 标签：hibernate, caching, optimization

我正在开发一个基于 Hibernate 的数据库访问和持久层。必须使用休眠模块的应用程序必须执行具有多个连接的非常复杂的查询。

我必须根据其他客户购买的商品来推荐商品，因此很难将特定数据存储在缓存中，因为推荐是具体的并且缓存未命中的百分比会非常高。

我已经测试了性能，我观察到所有的工作都很慢，我使用 Mysql 5、Hibernate 4 和 C3P0 连接提供程序。我应该使用基于 EHCACHE 的二级 Hibernate 缓存系统吗？Memcached 是一个好的解决方案吗？有没有其他方法可以提高 Hibernate 性能？

感谢您的建议和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:35:38.200

首先通过直接 SQLClient 工具检查查询的性能。如果它表现不好，请调整它。现在，如果您打算单独对参考数据使用缓存（主要是只读的），EHCache 是一个不错的选择。如果您想对事务数据使用缓存，JBOSS Tree Cache 是一个不错的选择。

# matlab - 如何确保子图上的所有 Y 轴具有相同的值

> ID：15610109
> 
> 赞同：3
> 
> 时间：2013-03-25T07:58:47.947
> 
> 标签：matlab

这是我面临的问题。我有代码，它构建了一些条形图。

为了更好地比较它们，我需要它们都具有相同的比例。查看文档栏，我无法找到如何指定条形图具有特定的最大高度。

因此，就我而言，例如，我有以下代码：

```
c = [0 0 12 8 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];
e = [0 2 5 6 5 2 0 0 0 0 0 0 0 0 0 0 0 0 0];
f = [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 19];
b = [0 9 7 0 0 1 0 1 0 1 1 0 0 0 0 0 0 0 0];

subplot(2,2,1)
bar(b)
subplot(2,2,2)
bar(e)
subplot(2,2,3)
bar(f)
subplot(2,2,4)
bar(c) 
```

第一个子图的高度为 10，比 6，比 20 比 15。

有没有一种简单的方法可以让它们的最大高度为 20。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T08:07:25.540

您可以使用以下[`linkaxes`](http://www.mathworks.de/de/help/matlab/ref/linkaxes.html)命令：

```
h(1) = subplot(2,2,1)
bar(b)
h(2) = subplot(2,2,2)
bar(e)
h(3) = subplot(2,2,3)
bar(f)
h(4) = subplot(2,2,4)
bar(c)

linkaxes(h)
ylim([0 20]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T08:05:58.877

`set`您可以使用命令和轴的句柄（=标识符）轻松更改轴属性。如果您还没有存储轴句柄（的第一个输出`subplot`），您首先必须找到它们：

```
%# collect axes handles
axH = findall(gcf,'type','axes');

%# set the y-limits of all axes (see axes properties for 
%# more customization possibilities)
set(axH,'ylim',[0 20]) 
```

# android - 纵向屏幕模式三星手机中的方向问题

> ID：15610114
> 
> 赞同：0
> 
> 时间：2013-03-25T07:59:19.910
> 
> 标签：android

我正在开发自定义相机应用程序。我被迫将屏幕模式设置为纵向。但是来到三星手机屏幕的方向问题。如何在三星手机中使用纵向模式设置应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:25:17.433

尝试以下操作：在您的活动中，

```
 /** Forces the application to run in portrait mode */
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    } 
```

在你的 manifest.xml

```
 <activity
        android:name="yourActivityName"
        android:configChanges="keyboardHidden|orientation|screenSize"
        android:screenOrientation="portrait" >
  </activity> 
```

此外，如果您的应用程序在 v2.2 或更高版本上运行，您可以使用 camera.setDisplayOrientation(90) 将相机方向旋转为纵向。

# hadoop - 如何限制 Hadoop 序列文件的大小？

> ID：15610116
> 
> 赞同：0
> 
> 时间：2013-03-25T07:59:37.923
> 
> 标签：hadoop, mapreduce, sequencefile

我正在使用 txt 作为输入编写 Hadoop seq 文件。我知道如何从文本文件中编写序列文件。

但我想将输出序列文件限制为某个特定大小，例如 256MB。

有没有内置的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:51:59.603

AFIAK 你需要编写自己的自定义输出格式来限制输出文件的大小——默认情况下 FileOutputFormats 为每个 reducer 创建一个输出文件。

另一种选择是正常创建序列文件，然后使用身份映射器创建第二个作业（仅映射），然后修改最小/最大输入拆分大小以确保每个映射器仅处理 ¬256MB。这意味着 og 1GB 的输入文件将由 4 个映射器处理并创建 ¬256MB 的输出文件。您将获得较小的文件，其中输入文件为 300MB（256MB 映射器和 44MB 映射器将运行）。

您正在寻找的属性是：

*   `mapred.min.split.size`
*   `mapred.max.split.size`

它们都配置为字节大小，因此将它们都设置为`268435456`

# php - IE 上的错误 XML5633

> ID：15610120
> 
> 赞同：0
> 
> 时间：2013-03-25T08:00:07.390
> 
> 标签：php, html, xml

大家好，我有一个网站，我用 xml 调用带有 curl 的服务器并检索结果在 Firefox 和 Chrome 中工作正常，但在 Internet Explorer 9 中，在关闭标签上返回此错误

> `</head>`

错误：

> XML 5633：结束标记的名称与相应开始标记的名称不匹配。

这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link media="screen" type="text/css" href="http://myurl/style.css" rel="stylesheet"/>
    <link media="screen" type="text/css" href="http://myurl/css/backend/jquery-ui-1.9.1.css"  rel="stylesheet"/>
    <script src="http://myurl/js/jquery/jquery-1.8.2.min.js" type="text/javascript"></script>         
    <title>My Page</title>
</head>
//rest of code 
```

XML请求是（在其他浏览器中工作正常，请求参数正常）：

```
$xml_data ="<?xml version='1.0' encoding='UTF-8'?>
<BOOKING type='HA' lang='it-IT' returnURLNeed='no' returnURL='http://' AGENTCODE='XXX' AGENTPASSWORD='YYY' AVAILABLE_HOTELS_ONLY='NO' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:noNamespaceSchemaLocation='http://link/Hrequest.xsd'>
    <DATA COUNTRY_CODE='".$nation_code."' CITY_CODE='".$city_code."'>
<ROOMS_DATA ".$room."/>
<DATE_DATA CHECK_IN_DATE='".$date_start."' CHECK_OUT_DATE='".$date_end."'/>
<OPTIONAL_DATA ".$rating." NeedReductionAmount='NO' NeedHotelMessages='NO' NeedFreeNightDetails='NO' SortingOrder='Low'/>
<ADDITIONAL_DATA PICTURE_NEED='YES' AMENITY_NEED='NO' HOTEL_ADDRESS_NEED='NO' TELEPHONE_NO_NEED='NO' FAX_NO_NEED='NO' EMAIL_NEED='NO' HotelDescription='YES' HotelCity='YES' HotelProperties='YES' HotelArrivalPointOther='NO' HotelArrivalPoint='NO' GeoCodes='YES' Location='YES' CityArea='YES' EnglishTextNeed='NO'/>".$multirating."
    </DATA>
</BOOKING>"; 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:49:19.573

请试试

改变：

```
<DATA COUNTRY_CODE='".$nation_code."' CITY_CODE='".$city_code."'> 
```

至：

```
<DATA COUNTRY_CODE=".$nation_code." CITY_CODE=".$city_code."> 
```

改变：

```
<DATE_DATA CHECK_IN_DATE='".$date_start."' CHECK_OUT_DATE='".$date_end."'/> 
```

至：

```
<DATE_DATA CHECK_IN_DATE=".$date_start." CHECK_OUT_DATE=".$date_end."/> 
```

编辑1：

明确地关闭标签`</DATE_DATA>`

编辑2：

增加或减少jquery版本

编辑3：

禁用 IE 加载项

# windows-8 - 便携式类库上的 sqlite

> ID：15610130
> 
> 赞同：0
> 
> 时间：2013-03-25T08:00:35.897
> 
> 标签：windows-8, sqlite, windows-store-apps

是否可以在可移植类库中使用 Sqlite？我需要在 win 商店应用程序和 Web 应用程序之间共享代码，两者都使用 sqlite 作为数据库。我被困在将 Windows 引用添加到我的 PCL 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T11:24:56.767

简而言之，不，根据我的阅读，这个问题提供了更详细的解释：

[在可移植类库中使用 SQLite](https://stackoverflow.com/questions/13699544/using-sqlite-inside-portable-class-library)

# variables - 如何在Lua中声明一个变量而不将其初始化为零？

> ID：15610131
> 
> 赞同：2
> 
> 时间：2013-03-25T08:00:40.970
> 
> 标签：variables, lua, scope, local, declaration

我发现执行以下操作非常有用：

```
if not variable then
    variable = value
end 
```

当然，我通常宁愿那个变量是本地的，但我不能在我的 if 中声明它是本地的，否则它将无法访问。

所以有时我会这样做：

```
local variable
if not variable then
    variable = value
end 
```

问题是当我迭代这段代码时，变量声明将变量设置为 nil。如果我可以接受一个全局值（我可以），我可以通过不在 if 块之外声明变量来解决它。

但是有没有什么方法可以让我既拥有我的本地价值又让它保持它的价值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T09:16:54.237

首先，`or`在 Lua 中定义的方式为您提供了一个很好的习惯用法，可以`if`完全避免：

```
variable = variable or value 
```

如果变量是`nil`，`or`将评估为它的第二个操作数。当然，这只有在`false`不是有效值的情况下才有效`variable`（因为`false`和就相关而言`nil`都是“假” `or`）。

但是，您仍然存在需要在某处声明变量的问题。我想你的问题是，在全局循环的情况下，你认为你必须这样做：

```
while condition do
    variable = variable or value
    process(variable)
end 
```

（这将使`variable`全球）或

```
while condition do
    local variable
    variable = variable or value
    process(variable)
end 
```

这是没有意义的，因为`local`将范围限制为一次迭代并重新初始化`variable`为`nil。

但是，您**可以**做的是创建另一个块来限制变量的范围，`local`但什么也不做：

```
do
    local variable
    while condition do
        variable = variable or value
        process(variable)
    end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T10:44:34.267

有一种简单的方法可以测试循环内局部变量的范围：

```
local a = "this is external a"
for x = 1, 3 do
    print(a)
    local a = "THIS IS INTERNAL a"
    print(a)
end 
```

如果你运行它，你会得到：

```
this is external a
THIS IS INTERNAL a
this is external a
THIS IS INTERNAL a
this is external a
THIS IS INTERNAL a 
```

如果循环内的本地**a**存活到下一次迭代，那么在第一次打印后它应该只打印“这是内部 a”，因为内部**a**会遮蔽外部**a**。两个字符串交替意味着内部局部**a**永远不会在循环的底部幸存下来。

当然，即使它确实存在，您也会遇到内部局部声明的问题，即每次通过循环时都会隐藏上一次迭代的局部**a 。**本质上，您将无法访问上一次迭代的**a**版本，并且到第三次迭代时，您将拥有 3 个单独的内部本地变量，只有最后一个可以访问。就像您这样做一样：

```
local a = "THIS IS INTERNAL a"
local a = "THIS IS INTERNAL a"
local a = "THIS IS INTERNAL a" 
```

# wcf - Silverlight 启用 WCF 服务和实体框架 504 问题

> ID：15610135
> 
> 赞同：0
> 
> 时间：2013-03-25T08:00:46.963
> 
> 标签：wcf, silverlight, entity-framework, mvvm, http-status-code-504

我正在构建一个 Silverlight MVVM 模板，并且遇到了 WCF 服务返回和实体对象。

这是我所做的：

1.  在服务器端使用实体框架
2.  创建了一个带有几个表的小型测试数据库。
3.  在服务器端创建了 WCF 服务
4.  然后我创建了一个返回整数的小测试方法。
5.  在我的客户端，我添加了一个服务引用，并且我在完成的方法中成功收到了整数结果
6.  然后更改了我的测试服务方法以返回一个“Person”对象（这是来自实体框架的实体）
7.  更新了我的服务参考，然后它不起作用！
8.  然后我将返回类型返回到任何基本 CLR 类型，它再次工作

我检查了 Fiddler，在我的服务响应中收到以下**504错误：**

HTTP/1.1 504 Fiddler - 接收失败 Content-Type: text/html; charset=UTF-8 连接：关闭时间戳：08:56:23.783

[Fiddler] ReadResponse() 失败：服务器没有返回对此请求的响应。

在试图弄清楚这一点后，我遇到了[WCF Trace Logging](http://msdn.microsoft.com/en-us/library/ms733025.aspx)并发现了这个错误：

```
 There was an error while trying to serialize parameter :BasicResult. The InnerException message was 'Type 'MVVMProject.Web.DataSource.Person' with data contract name 'Person:http://schemas.datacontract.org/2004/07/MVVMProject.Web.DataSource' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.'.  Please see InnerException for more details. 
```

我不明白为什么这么难？我必须在我的实体上设置一些属性以使其可序列化吗？如果我查看 Entity Framework 的 Designer.cs 文件，我会在 Entity 上看到一个 Serializable 属性。当然这意味着我可以通过 WCF 服务传递它？？？我不明白这个错误，不幸的是......

甚至可以将实体框架与 WCF 服务一起使用吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:25:22.050

我遇到了同样的问题，似乎`DataContractSerializer`ef 对象的导航属性有问题。

在我的测试项目中，我使用的是北风数据库。我想用推荐的 DbContext 测试 CodeFirst 方法。

提供的导航属性是虚拟的，它们是按需加载的，但 ef 只是返回，导航属性上的实体的第一级已填充。

在序列化实体对象时，DataContractSerializer 失败，因为实体对象不再绑定到 DbContext 并且导航属性的序列化失败。

当我尝试通过我的 wcf 服务使用 NW Employee 对象时，就会发生这种情况。

我的想法是将所有数据复制到具有数据合约属性的新对象中！

服务电话：

```
public IEnumerable<EmployeeWcf> GetAll()
    {
        IEnumerable<EmployeeWcf> result = null;

        result = from e in context.Employees.OrderBy( e => e.LastName ) 
                         select new EmployeeWcf 
                         { 
                             EmployeeId = e.EmployeeID, 
                             Firstname = e.FirstName, 
                             Lastname = e.LastName 
                         };

        return result;
    } 
```

班上：

```
 [DataContract]
public class EmployeeWcf
{
    [DataMember]
    public int EmployeeId { get; set; }
    [DataMember]
    public string Firstname { get; set; }
    [DataMember]
    public string Lastname { get; set; }
} 
```

这项工作，但在我看来，这不是一个完美的解决方案。

我希望这可以帮助你。

# objective-c - 将 NSArray 转换为 NSString 包含 NSDictionary

> ID：15610146
> 
> 赞同：0
> 
> 时间：2013-03-25T08:01:31.747
> 
> 标签：objective-c, nsstring, nsarray, nsdictionary

我正在尝试将其转换`NSArray`为`NSString`包含`NSDictionary`，我可以通过数组迭代来实现这一点，并将字符串附加到最后一个，但我认为应该有一些简单的方法来实现这一点，比如`componentsJoinedByString:` **有没有**？

我的一个样本数组是，

> [o] {name="ABC", age = "19", package = "3.4"}
> 
> [1] {name="PQR", 年龄 = "33", 包 = "5.0"}
> 
> [2] {name="XYZ", 年龄 = "24", 包 = "2.2"}

我现在正在做的是，

```
NSString *name = @"";
NSString *age = @"";
NSString *package = @"";

for(NSDictionary *p in array)
{
    name = [name stringByAppendingFormat:@"%@,",[p valueForKey:@"name"]];

    age = [age stringByAppendingFormat:@"%@,",[p valueForKey:@"age"]];

    package = [package stringByAppendingFormat:@"%@,",[p valueForKey:@"package"]];
}

name = [name substringToIndex:[name length] - 1];
age = [age substringToIndex:[age length] - 1];
package = [package substringToIndex:[package length] - 1];

NSLog(@"%@",name);
NSLog(@"%@",age);
NSLog(@"%@",package); 
```

有没有更简单的方法来获得这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:37:30.200

简单地做：

假设你有`array`包含 NSDictionary 的对象。

```
NSString *name = [[array  valueForKey:@"name"] componentsJoinedByString:@","];
NSString *age = [[array  valueForKey:@"age"] componentsJoinedByString:@","];
NSString *package = [[array  valueForKey:@"package"] componentsJoinedByString:@","];

NSLog(@"%@",name);
NSLog(@"%@",age);
NSLog(@"%@",package); 
```

# android - 防止 Android ADT 包含重复的 JAR 文件

> ID：15610148
> 
> 赞同：1
> 
> 时间：2013-03-25T08:01:41.497
> 
> 标签：android, jar, version

当 Eclipse 启动并编译我的项目时，它将包含重复的 JAR 文件并生成一个 dx 错误，表明类已经存在。谷歌在下面记录了这一点：

[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

> Jar 文件由它们的文件名严格标识。
> 
> 这意味着 mylib.jar 与 mylib-v2.jar 不同，两者都将被打包，如果它们实际上是不同版本中的同一个库，则可能导致“已添加”dx 错误。

就我而言，有两个 GSON 文件（gson-2.1 和 gson-2.2.1）。只有当我删除 gson-2.1 文件时，项目才会编译。在谷歌添加更好的版本检测之前，有没有办法阻止 ADT 在 Eclipse 启动时添加旧的 jar 文件？

# iphone - 使用 Facebook ios SDK 在应用程序中注销 Facebook

> ID：15610152
> 
> 赞同：45
> 
> 时间：2013-03-25T08:02:03.667
> 
> 标签：iphone, ios, facebook, xcode4.5

我已经在我的应用程序中集成了 Facebook 登录，因此用户可以使用我的应用程序帐户和 Facebook 登录并执行相应的操作。对于 Facebook 集成，我添加了 Facebook SDK。现在，当在我的应用程序中单击注销按钮时，它必须清除所有Facebook 帐户的凭据。我已经去了：

```
-(IBAction)btnlogOutClicked:(id)sender
{
  [appDelegate fbDidlogout]; 
}
-(void)fbDidlogout
{
    FBSession* session = [FBSession activeSession];
    [session closeAndClearTokenInformation];
    [session close];
    [FBSession setActiveSession:nil];

} 
```

但是当我再次单击按钮时，我会直接重定向到我的帐户，而无需转到 Facebook 登录页面。

如何退出 Facebook？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-05-19T13:57:24.207

使用新的 Facebook SDK 登录工具包，只需在下面写下即可。

```
[[FBSDKLoginManager new] logOut]; 
```

* * *

如果使用 swift，请确保有必要的导入

```
import FBSDKLoginKit

func logout() {
    FBSDKLoginManager().logOut()
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-25T10:54:42.257

对于注销，你应该试试这个

您可以在**viewDidLoad**方法中**的导航控制器**（右上角）上添加注销按钮

 **```
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] 
                                    initWithTitle:@"Logout"
                                    style:UIBarButtonItemStyleBordered
                                    target:self
                                    action:@selector(logoutButtonWasPressed:)]; 
```

上面添加按钮的**操作方法**是

```
-(void)logoutButtonWasPressed:(id)sender {
    [FBSession.activeSession closeAndClearTokenInformation];
} 
```

希望对你有帮助！

[参考](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)

**编辑：**

正如你问为什么它不要求用户名和密码，所以原因是：

当我们在我们的应用程序中集成 Facebook SDK 并尝试登录时，它会自动检查两个地方（以确保我们已经登录过 Facebook）

1.  首先，它检查我们是否已经登录到安装在此设备上的 Facebook Native 应用程序。

2.  然后它会检查我们是否在设备设置中保存了我们的 Facebook 用户名和密码。

如果两个地方我们都没有登录，那么它会在应用程序中询问用户名和密码

您可以在设备设置中检查 Facebook 帐户设置，如下面的屏幕截图所示，

按主页按钮->设置-> Facebook

![在此处输入图像描述](../Images/ac462809cb4e0616fc6a790e348bffa0.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-04-29T09:43:17.027

FBSDK 是这样注销的：

```
 [FBSession.activeSession closeAndClearTokenInformation];
  FBSDKLoginManager *login = [[FBSDKLoginManager alloc] init];
  [login logOut]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-19T15:38:32.273

如果使用 swift 3 或 4：

```
var loginManager = LoginManager() 
```

当需要执行某些操作以注销时粘贴此代码

```
loginManager.logOut() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T08:23:40.127

在你`postButtonClicked`写下面的 if else ：

```
-(void)postButtonClicked
{

    _session = [[FBSession sessionForApplication:kApiKey secret:kApiSecret delegate:self] retain];
    [_session resume];

    posting = YES;
    showSlideShow = 1;

    if (_facebookName != nil)
    {
        [self logoutButtonClicked];
    }
    if (![_session isConnected])
    {
        self.loginDialog = nil;
        _loginDialog = [[FBLoginDialog alloc] init];
        [_loginDialog show];
    }
    else {
        self.loginDialog = nil;
        _loginDialog = [[FBLoginDialog alloc] init];
        [_loginDialog show];
    }
} 
```**

# jquery - 将单列文本输入重新排列为多列

> ID：15610156
> 
> 赞同：2
> 
> 时间：2013-03-25T08:02:13.557
> 
> 标签：jquery, css, jquery-jtable

我正在将 jTable 用于我目前正在从事的项目，并想看看你们是否可以帮助解决我遇到的 CSS 问题。我在向 jTable 添加新记录时弹出的表单下方制作了一个 jsfiddle。因为我有这么多行，它比可见屏幕长。你认为有可能通过一些 CSS 调整来使它成为一个两列或三列的框吗？

[http://jsfiddle.net/Euwsm/](http://jsfiddle.net/Euwsm/)

我无法更改此表单的生成，因此它只能是 CSS。

表格的简短版本如下：

```
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-front ui-dialog-buttons ui-draggable ui-resizable" style="position: absolute; height: auto; width: auto; top: 0px;" tabindex="-1" role="dialog" aria-describedby="ui-id-58" aria-labelledby="ui-id-59">
    <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix"><span id="ui-id-59" class="ui-dialog-title">Add new record</span>
        <button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close" role="button" aria-disabled="false" title="close"><span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span><span class="ui-button-text">close</span>
        </button>
    </div>
    <div id="ui-id-58" style="width: auto; min-height: 0px; max-height: none; height: auto; display: block;" class="ui-dialog-content ui-widget-content">
        <form id="jtable-create-form" class="jtable-dialog-form jtable-create-form" action="/Demo/CreateStudent" method="POST">
            <div class="jtable-input-field-container">
                <div class="jtable-input-label">Institution Name</div>
                <div class="jtable-input jtable-text-input">
                    <input class="" id="Edit-[Institution Name]" type="text" name="[Institution Name]">
                </div>
            </div>
            <div class="jtable-input-field-container">
                <div class="jtable-input-label">RSE50 Name</div>
                <div class="jtable-input jtable-text-input">
                    <input class="" id="Edit-[Institution RSE50 Name]" type="text" name="[Institution RSE50 Name]">
                </div>
            </div>
            <div class="jtable-input-field-container">
                <div class="jtable-input-label">Legal Name</div>
                <div class="jtable-input jtable-text-input">
                    <input class="" id="Edit-[Interest Fax Institution]" type="text" name="[Interest Fax Institution]">
                </div>
            </div>
        </form>
    </div>
    <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
        <div class="ui-dialog-buttonset">
            <button type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Cancel</span>
            </button>
            <button type="button" id="AddRecordDialogSaveButton" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Save</span>
            </button>
        </div>
    </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:24:21.383

可以仅使用 CSS 将它们分成列。那将是使用 CSS3 columns 属性。但是，它不适用于 IE。

```
#jtable-create-form {
  display: block;
  width: 450px;
  -moz-column-gap:40px;
  -webkit-column-gap:40px;
  column-gap:40px;
  -moz-column-count:2;
  -webkit-column-count:2;
  column-count:2;
} 
```

这是带有上述代码的工作示例[http://jsfiddle.net/shodaburp/Euwsm/1/](http://jsfiddle.net/shodaburp/Euwsm/1/)

# android - 滑动菜单的自定义列表视图

> ID：15610161
> 
> 赞同：1
> 
> 时间：2013-03-25T08:02:41.293
> 
> 标签：android, listview, menu, sliding

**编辑：* *我现在可以使用它了。在下面的代码中进行了必要的更改。

我正在尝试在 Android 应用程序中创建一个滑动菜单。滑动菜单必须包含带有图像和文本视图的自定义列表视图。虽然我能够获得滑动菜单，但我似乎无法将任何内容放入列表视图。

这是我的主要活动：

```
public class Main extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Context context=this;
    LayoutInflater inflater=(LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v=inflater.inflate(R.layout.slidingmenu, null, true);

    final ListView lv=(ListView) v.findViewById(R.id.listView);

    SlidingMenu menu=new SlidingMenu(this);
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setShadowWidth(5);
    menu.setFadeDegree(0.0f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setBehindWidth(100);
    menu.setMenu(v);
    menu.setOnOpenListener(new OnOpenListener() {

        @Override
        public void onOpen() {
            MenuAdapter ma=new MenuAdapter(context);
            lv.setAdapter(ma);
        }
    });

} 
```

我的适配器类：

```
public class MenuAdapter extends ArrayAdapter<String>{
Context context;

@Override
public int getCount() {
    return 2;
}

public MenuAdapter(Context c) {
    super(c, R.layout.menucontent);
    context=c;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    /*int height=LinearLayout.LayoutParams.MATCH_PARENT;
    int width=LinearLayout.LayoutParams.MATCH_PARENT;*/

    LayoutInflater inflater=(LayoutInflater) context.
            getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View view=inflater.inflate(R.layout.menucontent, parent, false);
    TextView tv=(TextView) view.findViewById(R.id.tv_content);

    tv.setText("Hello World");

    return view;
} 
```

}

PS：我有 3 个不同的 XML 文件 - main.xml 是启动器活动，slidingmenu.xml 显示菜单，最后是 menucontent.xml，其中包含应显示在列表中的文本和图像视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:19:49.697

覆盖，`getCount()`方法`MenuAdapter`返回一些大于 1 的值，例如 2、10。然后您将能够看到列表项。

# c - 如何使用信号量强制执行进程之间的操作顺序？

> ID：15610176
> 
> 赞同：1
> 
> 时间：2013-03-25T08:03:29.683
> 
> 标签：c, process, semaphore

我目前正在玩信号量并试图理解它们。我正在尝试遵循一个教程，该教程要求我编辑示例代码以使程序运行两个进程，这两个进程轮流将歌词输出到歌曲中（“[*桶中有一个洞*](http://en.wikipedia.org/wiki/There%27s_a_Hole_in_My_Bucket)”）。

我的问题是，当我在程序中添加更多歌曲行时，这些过程不会交替，但是当只有两行时它们可以正常工作。

一个进程处理 Liza 的部分，另一个处理 Henry 的部分。这是我的代码：

```
#include <sys/ipc.h>
#include <sys/sem.h>
#include <stdio.h>
#include <stdlib.h>

#define KEY 87654 //Unique semaphore key

int main()
{
  int id; /* Number by which the semaphore is known within a program */

  union semun {
    int val;
    struct semid_ds *buf;
    ushort * array;
  } argument;

  argument.val = 1;

  /* Create the semaphore with external key KEY if it doesn't already 
     exists. Give permissions to the world. */
  id = semget(KEY, 1, 0666 | IPC_CREAT);

  /* Always check system returns. */      
  if(id < 0) {
      fprintf(stderr, "Unable to obtain semaphore.\n");
      exit(0);
  }

  /* What we actually get is an array of semaphores. The second 
     argument to semget() was the array dimension - in our case
     1\. */

  /* Set the value of the number 0 semaphore in semaphore array
     # id to the value 0\. */      
  if( semctl(id, 0, SETVAL, argument) < 0) {
      fprintf( stderr, "Cannot set semaphore value.\n");
  } else {
      fprintf(stderr, "Semaphore %d initialized.\n", KEY);
  }

  int pid=fork();

  if(pid) {
    struct sembuf operations[1];
    int retval; /* Return value from semop() */

    /* Get the index for the semaphore with external name KEY. */
    id = semget(KEY, 1, 0666);

    if(id < 0){
      /* Semaphore does not exist. */

      fprintf(stderr, "Program sema cannot find semaphore, exiting.\n");
      exit(0);
    }
    operations[0].sem_num = 0;
    /* Which operation? Subtract 1 from semaphore value : */
    operations[0].sem_op = -1;
    /* Set the flag so we will wait : */   
    operations[0].sem_flg = 0;

    while(1){
      //Process 1

      //wait
      operations[0].sem_op = -1;
      retval = semop(id, operations, 1);

      //critical section
      printf("Then mend it, dear Henry, dear Henry, dear Henry, \n");
      printf("Then mend it, dear Henry, dear Henry, mend it. \n");

      fflush(stdout);
      int stime=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stime);
      sleep(stime);

      printf("With a straw, dear Henry, dear Henry, dear Henry, \n");
      printf("With a straw, dear Henry, dear Henry, with a straw. \n");

      fflush(stdout);

      int stim1e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim1e);
      sleep(stim1e);

      printf("Then cut it, dear Henry, dear Henry, dear Henry, \n");
      printf("Then cut it, dear Henry, dear Henry, cut it. \n");

      fflush(stdout);
      int stim2e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim2e);
      sleep(stim2e);

      printf("With a knife, dear Henry, dear Henry, dear Henry, \n");
      printf("With a knife, dear Henry, dear Henry, with a knife. \n");
      fflush(stdout);

      int stim3e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim3e);
      sleep(stim3e);

      printf("Then sharpen it, dear Henry, dear Henry, dear Henry \n");
      printf("Then sharpen it, dear Henry, dear Henry, sharpen it. \n");

      fflush(stdout);
      int stim4e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim4e);
      sleep(stim4e);

      printf("On a stone, dear Henry, dear Henry, dear Henry, \n");
      printf("On a stone, dear Henry, dear Henry, a stone. \n");

      fflush(stdout);
      int stim5e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim5e);
      sleep(stim5e);

      printf("Well wet it, dear Henry, dear Henry, dear Henry, \n");
      printf("Well wet it, dear Henry, dear Henry, wet it. \n");

      fflush(stdout);
      int stim6e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim6e);
      sleep(stim6e);

      printf("try water, dear Henry, dear Henry, dear Henry, \n");
      printf("try water, dear Henry, dear Henry, water. \n");

      fflush(stdout);
      int stim7e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim7e);
      sleep(stim7e);

      printf("In a bucket, dear Henry, dear Henry, dear Henry, \n");
      printf("In a bucket, dear Henry, dear Henry, a bucket. \n");

      fflush(stdout);
      int stim8e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim8e);
      sleep(stim8e);

      printf("Use your head, then! dear Henry, dear Henry, dear Henry, \n");
      printf("Use your head, then! dear Henry, dear Henry, use your head! \n");

      fflush(stdout);

      operations[0].sem_op = 1;
      //signal
      retval = semop(id, operations, 1);

    }
  }else{
    //Process 2
    struct sembuf operations[1];
    int retval; /* Return value from semop() */
    /* Get the index for the semaphore with external name KEY. */
    id = semget(KEY, 1, 0666);
    if(id < 0){
      /* Semaphore does not exist. */

      fprintf(stderr, "Program sema cannot find semaphore, exiting.\n");
      exit(0);
    }
    operations[0].sem_num = 0;
    /* Which operation? Subtract 1 from semaphore value : */
    operations[0].sem_op = -1;
    /* Set the flag so we will wait : */   
    operations[0].sem_flg = 0;

    while(1){

      //wait
      operations[0].sem_op = -1;
      retval = semop(id, operations, 1);

      //critical section

      printf("There's a hole in the bucket, dear Liza, dear Liza, \n");
      printf("There's a hole in the bucket, dear Liza, a hole. \n");

      fflush(stdout);
      int stim9e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim9e);
      sleep(stim9e);

      printf("With what shall I mend it, dear Liza, dear Liza? \n");
      printf("With what shall I mend it, dear Liza, with what? \n");
      fflush(stdout);

      int stim0e=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stim0e);
      sleep(stim0e);

      printf("The straw is too long, dear Liza, dear Liza, \n");
      printf("The straw is too long, dear Liza, too long, \n");

      fflush(stdout);
      int stimae=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stimae);
      sleep(stimae);

      printf("The knife is too dull, dear Liza, dear Liza, \n");
      printf("The knife is too dull, dear Liza, too dull. \n");

      fflush(stdout);
      int stimse=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stimse);
      sleep(stimse);

      printf("On what shall I sharpen it, dear Liza, dear Liza? \n");
      printf("On what shall I sharpen it, dear Liza, on what? \n");

      fflush(stdout);
      int stimde=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stimde);
      sleep(stimde);

      printf("The stone is too dry, dear Liza, dear Liza, \n");
      printf("The stone is too dry, dear Liza, too dry. \n");

      fflush(stdout);
      int stimwe=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stimwe);
      sleep(stimwe);

      printf("With what shall I wet it, dear Liza, dear Liza? \n");
      printf("With what shall I wet it, dear Liza, with what? \n");

      fflush(stdout);
      int stimqe=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stimqe);
      sleep(stimqe);

      printf("In what shall I fetch it, dear Liza, dear Liza? \n");
      printf("In what shall I fetch it, dear Liza, in what? \n");

      fflush(stdout);
      int stimee=2+(rand()/(float)(RAND_MAX))*4;
      printf("Sleeping for %d secs\n",stimee);
      sleep(stimee);

      printf("There's a hole in my bucket, dear Liza, dear Liza \n ");
      printf("There's a hole in my bucket, dear Liza, a hole. \n ");
      fflush(stdout);

      //signal
      operations[0].sem_op = 1;
      retval = semop(id, operations, 1);

    }

  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:44:03.097

信号量不强制关键部分的调度或排序，它们仅用于资源锁定。你想要的可以这样想：

给定一组有序/排序的数据和两个负责将其内容打印到流的“工人”：

1.  每个工人“等待”轮到他们
2.  它获取一个数据（例如歌曲中的一行）
3.  它将数据打印到标准输出
4.  它向其他工作人员表明它已完成并进入睡眠/等待

如果您将所有步骤 1-4 视为关键部分，则信号量足以解决此问题，即您的“资源”既是 a) 数据的存储，也是 b) 输出流。要查看信号量用于资源锁定的示例，请参阅[哲学家就餐问题](http://en.wikipedia.org/wiki/Dining_philosophers_problem)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:07:21.803

`Henry`线程需要告诉`Liza`线程他已经完成了他的行。一个简单的方法是通过一个变量。

```
const int HENRY_DONE = 0;
const inte LIZA_DONE = 1;
volatile int flag = HENRY_DONE; 
```

注意`volatile`关键字？它告诉编译器不要将变量存储在寄存器中，每次都必须从内存中读取它，因为它可能会被外部修改（在这种情况下是由另一个线程）。我还为这两种状态添加了两个常量，只是为了使代码更易于阅读。我你想要，你可以用一个`enum`代替。它使代码更漂亮一些（它也减少了有人编写代码行的机会`flag = -32`）。

```
 //critical section
  printf("Then mend it, dear Henry, dear Henry, dear Henry, \n");
  printf("Then mend it, dear Henry, dear Henry, mend it. \n");

  fflush(stdout);

  flag = LIZA_DONE;   // Hand over to Henry
  do {
    sleep(1); // If we don't sleep at all, there will be a busy wait. If you want to sleep for shorter than 1 s use usleep (located in `unistd.h`).
  } until (flag == HENRY_DONE);  // Wait for Henry to complete his next line.
  printf("With a straw, dear Henry, dear Henry, dear Henry, \n");
  printf("With a straw, dear Henry, dear Henry, with a straw. \n"); 
```

对亨利部分做同样的事情。

**笔记：**

上述解决方案要求将`flag`放置在 LIZA 和 HENRY 均可访问的内存中。如果您使用线程，它将按原样工作，但如果您使用，`fork`则需要将其`flag`放在共享内存中[（示例）](http://www.cs.cf.ac.uk/Dave/C/node27.html)。

# zend-framework - ZEND：FlashMessenger 和 redirect() 方法在实时站点中不起作用

> ID：15610178
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:03:52.173
> 
> 标签：zend-framework

我需要一些有关 ZEND FlashMessenger 和重定向方法的帮助。这些在我的测试服务器上工作得非常好，但在实时服务器上却不行。

收到警告“**警告：缺少 Zend_Controller_Action_Helper_FlashMessenger::direct() 的参数 1 in /home/ *** *** /public_html/library/Zend/Controller/Action/Helper/FlashMessenger.php on line 309**”。实际上，我在完成操作后使用它存储错误和成功消息，并在重定向后在另一个页面上显示错误/成功消息。

我也在使用“ **$this->_redirect($url);** ”重定向到另一个动作 url（通过使用 $url;$url=' [http://www.abcd.com](http://www.abcd.com) '）。这也适用于我的测试站点，但不适用于实时站点。我也在我的其他实时网站上使用过它，并且发现它们没有问题。

您的建议/帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T19:22:58.090

我知道这是一个旧线程，但万一其他人遇到这个 -

我遇到了同样的警告，并且感到困惑，因为我没有在任何地方调用 direct()。我终于发现这与我访问 FlashMessenger 以添加消息的方式有关。

不确定这是否与该用户遇到的问题相同，因为没有发布代码，但对我来说，这段代码是导致错误的原因：

```
$this->_helper->FlashMessenger()->addMessage('Success!'); 
```

我发现使用这种方法会使警告消失：

```
$this->_helper->getHelper('FlashMessenger')->addMessage('Success!'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:08:17.193

正如我从代码中看到的， Zend_Controller_Action_Helper_FlashMessenger::direct() 不用于重定向，而是用于添加消息，见下文：

```
/**
 * Strategy pattern: proxy to addMessage()
 *
 * @param  string $message
 * @return void
 */
public function direct($message)
{
    return $this->addMessage($message);
} 
```

另外，您所说的“不工作”是什么意思。它有什么作用或有什么错误？

# java - ANTLR 中使用监听器的 if/else 语句

> ID：15610183
> 
> 赞同：60
> 
> 时间：2013-03-25T08:04:16.400
> 
> 标签：java, listener, antlr, antlr4

我正在为一个学校项目创建一种简单的编程语言。我正在使用 ANTLR 4 从我的语法中生成词法分析器和解析器。到目前为止，我一直在使用 ANTLRs 监听器模式来应用编程语言的实际功能。

现在我想实现 if/else 语句，但我不确定在使用侦听器模式时是否可以实际实现这些语句，因为 ANTLR 决定在使用侦听器时遍历解析树的顺序，我想 if/ 的实现else 语句将需要根据语句中满足的条件在解析树中跳转。

谁能告诉我是否可以使用 ANTLR 实现 if/else 语句，或者我是否必须自己实现访问者模式？另外，任何人都可以给出一个非常简单的实现语句的例子吗？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-03-25T12:26:01.130

默认情况下，ANTLR 4 生成侦听器。但是如果你给出`org.antlr.v4.Tool`命令行参数`-visitor`，ANTLR 会为你生成访问者类。这些工作很像侦听器，但让您可以更好地控制遍历/访问哪些（子）树。如果您想排除某些（子）树（如 else/if 块，如您的情况），这将特别有用。虽然这*可以*使用侦听器来完成，但对访问者执行此操作要干净得多。使用侦听器，您需要引入全局变量来跟踪是否需要评估（子）树，而哪些不需要。

碰巧的是，我正在编写一个小型 ANTLR 4 教程。它还没有完成，但我将发布一个小的工作示例来演示这些访问者类和`if`语句构造的使用。

* * *

# 1\. 语法

`if`这是一个支持基本表达式、 -、`while`- 和-语句的简单语法`log`：

## 穆格4

```
grammar Mu;

parse
 : block EOF
 ;

block
 : stat*
 ;

stat
 : assignment
 | if_stat
 | while_stat
 | log
 | OTHER {System.err.println("unknown char: " + $OTHER.text);}
 ;

assignment
 : ID ASSIGN expr SCOL
 ;

if_stat
 : IF condition_block (ELSE IF condition_block)* (ELSE stat_block)?
 ;

condition_block
 : expr stat_block
 ;

stat_block
 : OBRACE block CBRACE
 | stat
 ;

while_stat
 : WHILE expr stat_block
 ;

log
 : LOG expr SCOL
 ;

expr
 : expr POW<assoc=right> expr           #powExpr
 | MINUS expr                           #unaryMinusExpr
 | NOT expr                             #notExpr
 | expr op=(MULT | DIV | MOD) expr      #multiplicationExpr
 | expr op=(PLUS | MINUS) expr          #additiveExpr
 | expr op=(LTEQ | GTEQ | LT | GT) expr #relationalExpr
 | expr op=(EQ | NEQ) expr              #equalityExpr
 | expr AND expr                        #andExpr
 | expr OR expr                         #orExpr
 | atom                                 #atomExpr
 ;

atom
 : OPAR expr CPAR #parExpr
 | (INT | FLOAT)  #numberAtom
 | (TRUE | FALSE) #booleanAtom
 | ID             #idAtom
 | STRING         #stringAtom
 | NIL            #nilAtom
 ;

OR : '||';
AND : '&&';
EQ : '==';
NEQ : '!=';
GT : '>';
LT : '<';
GTEQ : '>=';
LTEQ : '<=';
PLUS : '+';
MINUS : '-';
MULT : '*';
DIV : '/';
MOD : '%';
POW : '^';
NOT : '!';

SCOL : ';';
ASSIGN : '=';
OPAR : '(';
CPAR : ')';
OBRACE : '{';
CBRACE : '}';

TRUE : 'true';
FALSE : 'false';
NIL : 'nil';
IF : 'if';
ELSE : 'else';
WHILE : 'while';
LOG : 'log';

ID
 : [a-zA-Z_] [a-zA-Z_0-9]*
 ;

INT
 : [0-9]+
 ;

FLOAT
 : [0-9]+ '.' [0-9]* 
 | '.' [0-9]+
 ;

STRING
 : '"' (~["\r\n] | '""')* '"'
 ;

COMMENT
 : '#' ~[\r\n]* -> skip
 ;

SPACE
 : [ \t\r\n] -> skip
 ;

OTHER
 : . 
 ; 
```

现在假设您想解析和评估输入，如下所示：

## 测试.mu

```
a = true;
b = false;

if a && b {
  log "1 :: a=" + a +", b=" + b;
}
else if a || b {
  log "2 :: a=" + a +", b=" + b;
}
else {
  log "3 :: a=" + a +", b=" + b;
}

log "Done!"; 
```

* * *

# 2\. 来访者 I

首先生成解析器和访问者类：

```
java -cp antlr-4.0-complete.jar org.antlr.v4.Tool Mu.g4 -visitor 
```

上面的命令将生成文件`MuBaseVisitor<T>`. 这是我们要扩展的没有自己的逻辑的类：

## EvalVisitor.java

```
public class EvalVisitor extends MuBaseVisitor<Value> {
    // ...
} 
```

where`Value`只是我们语言的任何类型（`String`, `Boolean`, `Double`）的包装器：

## 价值.java

```
public class Value {

    public static Value VOID = new Value(new Object());

    final Object value;

    public Value(Object value) {
        this.value = value;
    }

    public Boolean asBoolean() {
        return (Boolean)value;
    }

    public Double asDouble() {
        return (Double)value;
    }

    public String asString() {
        return String.valueOf(value);
    }

    public boolean isDouble() {
        return value instanceof Double;
    }

    @Override
    public int hashCode() {

        if(value == null) {
            return 0;
        }

        return this.value.hashCode();
    }

    @Override
    public boolean equals(Object o) {

        if(value == o) {
            return true;
        }

        if(value == null || o == null || o.getClass() != this.getClass()) {
            return false;
        }

        Value that = (Value)o;

        return this.value.equals(that.value);
    }

    @Override
    public String toString() {
        return String.valueOf(value);
    }
} 
```

* * *

# 3\. 测试一

要测试这些类，请使用以下`Main`类：

## 主.java

```
import org.antlr.v4.runtime.ANTLRFileStream;
import org.antlr.v4.runtime.CommonTokenStream;
import org.antlr.v4.runtime.tree.ParseTree;

public class Main {
    public static void main(String[] args) throws Exception {
        MuLexer lexer = new MuLexer(new ANTLRFileStream("test.mu"));
        MuParser parser = new MuParser(new CommonTokenStream(lexer));
        ParseTree tree = parser.parse();
        EvalVisitor visitor = new EvalVisitor();
        visitor.visit(tree);
    }
} 
```

并编译并运行源文件：

```
javac -cp antlr-4.0-complete.jar *.java
java -cp .:antlr-4.0-complete.jar Main 
```

*（在 Windows 上，最后一个命令是`java -cp .;antlr-4.0-complete.jar Main`：）*

运行后`Main`，什么也没有发生（当然？）。这是因为我们没有在我们的`EvalVisitor`类中实现任何规则。为了能够`test.mu`正确评估文件，我们需要为以下规则提供正确的实现：

*   `if_stat`
*   `andExpr`
*   `orExpr`
*   `plusExpr`
*   `assignment`
*   `idAtom`
*   `booleanAtom`
*   `stringAtom`
*   `log`

* * *

#4。访客 II & 测试 II

以下是这些规则的实现：

```
import org.antlr.v4.runtime.misc.NotNull;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class EvalVisitor extends MuBaseVisitor<Value> {

    // used to compare floating point numbers
    public static final double SMALL_VALUE = 0.00000000001;

    // store variables (there's only one global scope!)
    private Map<String, Value> memory = new HashMap<String, Value>();

    // assignment/id overrides
    @Override
    public Value visitAssignment(MuParser.AssignmentContext ctx) {
        String id = ctx.ID().getText();
        Value value = this.visit(ctx.expr());
        return memory.put(id, value);
    }

    @Override
    public Value visitIdAtom(MuParser.IdAtomContext ctx) {
        String id = ctx.getText();
        Value value = memory.get(id);
        if(value == null) {
            throw new RuntimeException("no such variable: " + id);
        }
        return value;
    }

    // atom overrides
    @Override
    public Value visitStringAtom(MuParser.StringAtomContext ctx) {
        String str = ctx.getText();
        // strip quotes
        str = str.substring(1, str.length() - 1).replace("\"\"", "\"");
        return new Value(str);
    }

    @Override
    public Value visitNumberAtom(MuParser.NumberAtomContext ctx) {
        return new Value(Double.valueOf(ctx.getText()));
    }

    @Override
    public Value visitBooleanAtom(MuParser.BooleanAtomContext ctx) {
        return new Value(Boolean.valueOf(ctx.getText()));
    }

    @Override
    public Value visitNilAtom(MuParser.NilAtomContext ctx) {
        return new Value(null);
    }

    // expr overrides
    @Override
    public Value visitParExpr(MuParser.ParExprContext ctx) {
        return this.visit(ctx.expr());
    }

    @Override
    public Value visitPowExpr(MuParser.PowExprContext ctx) {
        Value left = this.visit(ctx.expr(0));
        Value right = this.visit(ctx.expr(1));
        return new Value(Math.pow(left.asDouble(), right.asDouble()));
    }

    @Override
    public Value visitUnaryMinusExpr(MuParser.UnaryMinusExprContext ctx) {
        Value value = this.visit(ctx.expr());
        return new Value(-value.asDouble());
    }

    @Override
    public Value visitNotExpr(MuParser.NotExprContext ctx) {
        Value value = this.visit(ctx.expr());
        return new Value(!value.asBoolean());
    }

    @Override
    public Value visitMultiplicationExpr(@NotNull MuParser.MultiplicationExprContext ctx) {

        Value left = this.visit(ctx.expr(0));
        Value right = this.visit(ctx.expr(1));

        switch (ctx.op.getType()) {
            case MuParser.MULT:
                return new Value(left.asDouble() * right.asDouble());
            case MuParser.DIV:
                return new Value(left.asDouble() / right.asDouble());
            case MuParser.MOD:
                return new Value(left.asDouble() % right.asDouble());
            default:
                throw new RuntimeException("unknown operator: " + MuParser.tokenNames[ctx.op.getType()]);
        }
    }

    @Override
    public Value visitAdditiveExpr(@NotNull MuParser.AdditiveExprContext ctx) {

        Value left = this.visit(ctx.expr(0));
        Value right = this.visit(ctx.expr(1));

        switch (ctx.op.getType()) {
            case MuParser.PLUS:
                return left.isDouble() && right.isDouble() ?
                        new Value(left.asDouble() + right.asDouble()) :
                        new Value(left.asString() + right.asString());
            case MuParser.MINUS:
                return new Value(left.asDouble() - right.asDouble());
            default:
                throw new RuntimeException("unknown operator: " + MuParser.tokenNames[ctx.op.getType()]);
        }
    }

    @Override
    public Value visitRelationalExpr(@NotNull MuParser.RelationalExprContext ctx) {

        Value left = this.visit(ctx.expr(0));
        Value right = this.visit(ctx.expr(1));

        switch (ctx.op.getType()) {
            case MuParser.LT:
                return new Value(left.asDouble() < right.asDouble());
            case MuParser.LTEQ:
                return new Value(left.asDouble() <= right.asDouble());
            case MuParser.GT:
                return new Value(left.asDouble() > right.asDouble());
            case MuParser.GTEQ:
                return new Value(left.asDouble() >= right.asDouble());
            default:
                throw new RuntimeException("unknown operator: " + MuParser.tokenNames[ctx.op.getType()]);
        }
    }

    @Override
    public Value visitEqualityExpr(@NotNull MuParser.EqualityExprContext ctx) {

        Value left = this.visit(ctx.expr(0));
        Value right = this.visit(ctx.expr(1));

        switch (ctx.op.getType()) {
            case MuParser.EQ:
                return left.isDouble() && right.isDouble() ?
                        new Value(Math.abs(left.asDouble() - right.asDouble()) < SMALL_VALUE) :
                        new Value(left.equals(right));
            case MuParser.NEQ:
                return left.isDouble() && right.isDouble() ?
                        new Value(Math.abs(left.asDouble() - right.asDouble()) >= SMALL_VALUE) :
                        new Value(!left.equals(right));
            default:
                throw new RuntimeException("unknown operator: " + MuParser.tokenNames[ctx.op.getType()]);
        }
    }

    @Override
    public Value visitAndExpr(MuParser.AndExprContext ctx) {
        Value left = this.visit(ctx.expr(0));
        Value right = this.visit(ctx.expr(1));
        return new Value(left.asBoolean() && right.asBoolean());
    }

    @Override
    public Value visitOrExpr(MuParser.OrExprContext ctx) {
        Value left = this.visit(ctx.expr(0));
        Value right = this.visit(ctx.expr(1));
        return new Value(left.asBoolean() || right.asBoolean());
    }

    // log override
    @Override
    public Value visitLog(MuParser.LogContext ctx) {
        Value value = this.visit(ctx.expr());
        System.out.println(value);
        return value;
    }

    // if override
    @Override
    public Value visitIf_stat(MuParser.If_statContext ctx) {

        List<MuParser.Condition_blockContext> conditions =  ctx.condition_block();

        boolean evaluatedBlock = false;

        for(MuParser.Condition_blockContext condition : conditions) {

            Value evaluated = this.visit(condition.expr());

            if(evaluated.asBoolean()) {
                evaluatedBlock = true;
                // evaluate this block whose expr==true
                this.visit(condition.stat_block());
                break;
            }
        }

        if(!evaluatedBlock && ctx.stat_block() != null) {
            // evaluate the else-stat_block (if present == not null)
            this.visit(ctx.stat_block());
        }

        return Value.VOID;
    }

    // while override
    @Override
    public Value visitWhile_stat(MuParser.While_statContext ctx) {

        Value value = this.visit(ctx.expr());

        while(value.asBoolean()) {

            // evaluate the code block
            this.visit(ctx.stat_block());

            // evaluate the expression
            value = this.visit(ctx.expr());
        }

        return Value.VOID;
    }
} 
```

当您重新编译并运行`Main`时，以下内容将打印到您的控制台：

```
2 :: a=true, b=false
Done! 
```

* * *

有关所有其他规则的实现，请参阅：[https ://github.com/bkiers/Mu](https://github.com/bkiers/Mu)

### 编辑

来自@pwwpche，在评论中：

> 对于那些使用 jdk1.8 和遇到的人`IndexOutOfBoundsException`来说，antlr 4.0 不知何故与 jdk1.8 不兼容。下载antlr-4.6-complete.jar，替换`expr POW<assoc=right> expr`为`<assoc=right>expr POW expr`将消除错误和警告。

# c# - 未调用 CreateBehavior()

> ID：15610186
> 
> 赞同：2
> 
> 时间：2013-03-25T08:04:24.417
> 
> 标签：c#, .net, wcf

我已经提到[为什么找不到我的自定义 WCF 行为扩展元素类型？](https://stackoverflow.com/questions/169342/why-isnt-my-custom-wcf-behavior-extension-element-type-being-found); 但以下是一个不同的问题

我有一个自定义的 BehaviorExtensionElement，如下所示。在运行服务时，它的构造函数被调用。但是它不调用 CreateBehavior() 方法。因此我的 IEndpointBehavior 没有被构建。

该服务工作正常，没有任何例外。

知道为什么`CreateBehavior()`不调用该方法吗？

注意：我正在从`Visual Studio 2010`.

**配置**

```
 <endpointBehaviors>
    <behavior name="EndpointBehavior">
      <XMessageValidator validateRequest="True" validateReply="true" validateWSE="true">
      </XMessageValidator>
    </behavior>
  </endpointBehaviors>

 //Other config entries

<extensions>
  <behaviorExtensions>
    <add name="XMessageValidator" type="MessageInspectorLibrary.ValidationBehaviorExtensionElement, MessageInspectors, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions> 
```

**行为扩展元素**

```
public class ValidationBehaviorExtensionElement : BehaviorExtensionElement
{
    public ValidationBehaviorExtensionElement()
    {
        //Constructor
    }

    public override Type BehaviorType 
    { 
        get
        {
            return typeof(MessageValidationBehavior);
        } 
    }

    protected override object CreateBehavior()
    {
        throw new Exception("My CreateBehavior");
        return null;

    }

    [ConfigurationProperty("validateRequest", DefaultValue = false, IsRequired = false)]
    public bool ValidateRequest
    {
        get { return (bool)base["validateRequest"]; }
        set { base["validateRequest"] = value; }
    }

    [ConfigurationProperty("validateReply", DefaultValue = false, IsRequired = false)]
    public bool ValidateReply
    {
        get { return (bool)base["validateReply"]; }
        set { base["validateReply"] = value; }
    }

    [ConfigurationProperty("validateWSE", DefaultValue = false, IsRequired = false)]
    public bool ValidateWSE
    {
        get { return (bool)base["validateWSE"]; }
        set { base["validateWSE"] = value; }
    }

} 
```

**端点行为**

```
public class MessageValidationBehavior : IEndpointBehavior
{
    XmlSchemaSet schemaSet; 
    bool validateRequest; 
    bool validateReply;
    bool validateWSE;

    public MessageValidationBehavior(XmlSchemaSet schemaSet, bool inspectRequest, bool inspectReply, bool inspectWSE)
    {
        this.schemaSet = schemaSet;
        this.validateReply = inspectReply;
        this.validateRequest = inspectRequest;
        this.validateWSE = inspectWSE;

        throw new Exception("My MessageValidationBehavior");
    }

    #region IEndpointBehavior Members

    public void AddBindingParameters(ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime clientRuntime)
    {
        ValidationMessageInspector inspector = new ValidationMessageInspector(schemaSet, validateRequest, validateReply, validateWSE, true);
        clientRuntime.MessageInspectors.Add(inspector);
    }

    public void ApplyDispatchBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.EndpointDispatcher endpointDispatcher)
    {
        ValidationMessageInspector inspector = new ValidationMessageInspector(schemaSet, validateRequest, validateReply, validateWSE, false);
        endpointDispatcher.DispatchRuntime.MessageInspectors.Add(inspector);
    }

    public void Validate(ServiceEndpoint endpoint)
    {
    }

    #endregion
} 
```

参考

1.  [http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/6be701c0-25f9-4850-82f9-62a9b8e9ac04/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/6be701c0-25f9-4850-82f9-62a9b8e9ac04/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:50:44.600

Note: As I said in the question, the service gives proper response message even without the following change. Also, the ValidationBehaviorExtensionElement class was getting called.

**Solution**

The `CreateBehavior()` is called when I made the service name correct – i.e, `namespace.servicename`.

What I understand is - `BehaviorExtension` is created irrespective of the service name. But `EndPointBehavior` is created only if the service name is proper. More details are welcome if you have some idea/reference on this.

![enter image description here](../Images/432f3f4f523858723650f37181b278fa.png)

Following is the complete serviceModel config

```
<system.serviceModel>

<services>

  <service
          name="WcfServiceApp001.Service1"
          behaviorConfiguration="InternalPayrollBehavior">
    <endpoint address="" binding="basicHttpBinding"
              behaviorConfiguration="EndpointBehavior"
              contract="WcfServiceApp001.IService1"
              />
  </service>
</services>

<behaviors>
  <serviceBehaviors>
    <behavior name="InternalPayrollBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
  </serviceBehaviors>

  <endpointBehaviors>
    <behavior name="EndpointBehavior">
      <XMessageValidator validateRequest="True" validateReply="true" validateWSE="true">
      </XMessageValidator>
    </behavior>
  </endpointBehaviors>
</behaviors>

<extensions>
  <behaviorExtensions>
    <add name="XMessageValidator" type="MessageInspectorLibrary.ValidationBehaviorExtensionElement, MessageInspectors, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions>

<serviceHostingEnvironment multipleSiteBindingsEnabled="false" />
</system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:06:03.597

我建议你把你的封装在`behaviors node`

```
 <behaviors>
  ....
  <endpointBehaviors>
    <behavior name="EndpointBehavior">
      <XMessageValidator validateRequest="True" validateReply="true" validateWSE="true">
      </XMessageValidator>
    </behavior>
  </endpointBehaviors>
  ....
 </behaviors> 
```

# sql - 我怎样才能避免额外的内部连接来优化这个查询？

> ID：15610188
> 
> 赞同：3
> 
> 时间：2013-03-25T08:04:31.290
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, sql-execution-plan

有什么方法可以避免内部连接以从客户表中获取客户名字和姓氏，以及如何优化执行计划？

```
SELECT c1.firstname, c1.lastname, t.*
FROM customer c1
INNER JOIN
    (select c.Customerid ,count(si.CustomerID) as 'No Of Orders'
    from Customer c
    LEFT OUTER join SalesInvoice si ON si.CustomerID = c.CustomerID
    GROUP by c.CustomerID) as t
ON c1.CustomerID = t.Customerid 
```

![在此处输入图像描述](../Images/8e63050b9e8d845c2590b693e0d3aec4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:23:38.220

可能有两种方法可以做到这一点。一种方法是将所有非聚合列包含到分组列表中，如下所示：

```
SELECT
    c.firstname,
    c.lastname,
    c.CustomerId,
    count(si.CustomerID) as 'No Of Orders'
FROM
    customer c
LEFT OUTER JOIN
    SalesInvoice si ON si.CustomerID = c.CustomerID
GROUP BY
    c.CustomerID,
    c.firstname,
    c.lastname 
```

另一种方法是在选择列表中使用聚合函数（应该使用最小值或最大值）：

```
SELECT
    MIN(c.firstname) as firstname,
    MIN(c.lastname) as lastname,
    c.CustomerId,
    count(si.CustomerID) as 'No Of Orders'
FROM
    customer c
LEFT OUTER JOIN
    SalesInvoice si ON si.CustomerID = c.CustomerID
GROUP BY
    c.CustomerID 
```

我认为第一个查询的性能可能更好。为了提高整体性能，您需要创建一个包含或覆盖索引。

您可以查看以下链接，了解包含的索引：

1.  [为什么在创建索引时使用 INCLUDE 子句？](https://stackoverflow.com/questions/1307990/why-use-the-include-clause-when-creating-an-index)
2.  [http://msdn.microsoft.com/en-IN/library/ms190806.aspx](http://msdn.microsoft.com/en-IN/library/ms190806.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:21:19.807

[使用OVER()](http://msdn.microsoft.com/en-us/library/ms189461.aspx)子句尝试此选项

```
SELECT c1.Customerid, c1.firstname, c1.lastname, 
       COUNT(si.CustomerID) OVER(PARTITION BY c1.CustomerID) AS 'No Of Orders'
FROM customer c1 LEFT JOIN SalesInvoice si ON si.CustomerID = c1.CustomerID 
```

为了提高性能，您需要此索引

```
CREATE INDEX ix_Customerid_Customer ON Customer(Customerid) INCLUDE(firstname, lastname) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:11:36.737

试试那个：

```
SELECT
    c.firstname,
    c.lastname,
    c.CustomerId,
    count(si.CustomerID) as 'No Of Orders'
FROM
    customer c
LEFT OUTER JOIN
    SalesInvoice si ON si.CustomerID = c.CustomerID
GROUP BY
    c.CustomerID,
    c.firstname,
    c.lastname 
```

# python - Gunicorn-Django：找不到 django 项目

> ID：15610189
> 
> 赞同：2
> 
> 时间：2013-03-25T08:04:37.743
> 
> 标签：python, django, nginx, gunicorn

我一直在尝试通过 Django、Gunicorn、nginx 设置我的生产服务器（Linode 512），但在 nginx 和 gunicorn 中出现错误。由于 nginx 部分纯粹与服务器问题有关，因此我必须将其发布在 serverfault 中。但是对于 Gunicorn 错误，这与我的项目结构有关

```
Django Project/
  apps/
  confs/
    development/
    production/gunicorn.conf
  settings/
    custom.py
    database.py
    development.py
    production.py
    default.py
  static/
    js/
    css/
    admin/
  templates/
  manage.py
  urls.py 
```

这种结构在 Django 开发服务器中运行良好，但是当我尝试使用 Gunicorn 时，它显示`RuntimeError("django project not found")`完整的错误详细信息在[这里](https://gist.github.com/anonymous/5235542)

独角兽设置：

```
import os

def numCPUs():
    if not hasattr(os, "sysconf"):
        raise RuntimeError("No sysconf detected.")
    return os.sysconf("SC_NPROCESSORS_ONLN")

bind = "unix:/opt/Project1432/shared/gunicorn.sock"
workers = numCPUs() * 2 + 1
pidfile = "/opt/Project1432/shared/Project1432.pid"
logfile = "/opt/Project1432/shared/Project1432.log"
daemon = True 
```

项目路径：

```
/opt/Project1432/releases/current/Project1432/... 
```

谁能指导我解决这个问题？

谢谢！

更新：

Gunicorn 运行命令：我在上面给出的项目路径中运行此命令。

```
gunicorn_django --config /opt/Project1432/releases/current/Project1432/confs/production/gunicorn.conf 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:33:56.253

在我看来，该项目不在gunicorn的道路上。

就个人而言，我使用`manage.py run_gunicorn`并通过命令行传递所有配置参数，对于路径，我使用 virtualenv 并在我的 shell 脚本中获取 bin/activate

这是我的 bash 脚本：

```
#!/bin/sh

### BEGIN INIT INFO
# Provides:             myProject.exemple.com
# Required-Start:       $syslog $nginx
# Required-Stop:        $syslog $nginx
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description:    the django fast_cgi portal for myProject.exemple.com
### END INIT INFO

# with this config :
#  the project is in /home/web/prod/myProject.exemple.com/src/myProject/
#  the socket is in /var/run/django/myProject.sock   
#  the log files is /val/log/nginx/myProject.exemple.com/gunicorn.log
#  the pid file is /var/run/django/myProject.pid      

# note, for debuging purpose, you can set a DEBUG env variable to prevent gunicorn to fork and to see all the output.
# ie :  sudo DEBUG=True /etc/init.d/django_myProject start                                                                                                                                                                                              

if [ -f  "/lib/lsb/init-functions-color"] ;
then
  .  /lib/lsb/init-functions-color
else
  . /lib/lsb/init-functions
fi

# not exactly used by workon, but used to source the activate
WORKON_HOME=/home/web/prod/Envs                                                                                                                                                                                                              

# change on eveny new project                                                                                                                                                                                                                
PROJECT_NAME=myProject                                                                                                                                                                            
DOMAINE=$PROJECT_NAME.exemple.com                                                                                                                                                                                                         

# fixed                                                                                                                                                                                                                                                                                                                                                                                                                                                  
PIDFILE=/var/run/django/$PROJECT_NAME.pid                                                                                                                                                                                                    
LOGFILE=/var/log/nginx/$DOMAINE/gunicorn.log                                                                                                                                                                                                 
SOCKFILE=/var/run/django/$PROJECT_NAME.sock                                                                                                                                                                                                  
SOCKET=unix:$SOCKFILE                                                                                                                                                                                                                        
#SOCKET=192.9.201.3:8050                                                                                                                                                                                                                     
#This is the command to be run, give the full pathname                                                                                                                                                                                       
PROJECT_DIR=/home/web/prod/$DOMAINE/src/$PROJECT_NAME/                                                                                                                                                                                       
DAEMON="$PROJECT_DIR/manage.py run_gunicorn"                                                                                                                                                                                                 
USER=www-data                                                                                                                                                                                                                                
GROUP=www-data                                                                                                                                                                                                                               
WORKERS=2                                                                                                                                                                                                                                    

# could be changed                                                                                                                                                                                                                           

#DAEMON_OPTS="run_gunicorn --workers 1 \
#                          --worker-connections 5 \
#                          --daemon\
#                          --user www-data\
#                          --group www-data\
#                          -t 30\
#                          --bind unix:$SOCKET \
#                          --pid $PIDFILE \
#                          --error-logfile /var/log/nginx/$DOMAINE/gunicorn.log"
#                    --daemon \

DEBUG_ARGS="        --user=$USER \
                    --group=$GROUP \
                    --workers=$WORKERS \
                    --bind $SOCKET \
                    -t 90 \
                    --settings=$PROJECT_NAME.settings.prod \
                    --name=$DOMAINE"

DAEMON_OPTS="       $DEBUG_ARGS \
                    --pid=$PIDFILE \
                    --daemon \
                    --log-file=$LOGFILE \
                    --log-level=info"

start()
{

  cd "$PROJECT_DIR"
  log_begin_msg "starting django website" "$PROJECT_NAME"
  mkdir -p `dirname $SOCKFILE`
  chown www-data:www-data  `dirname $SOCKFILE`
#  echo "$SOCKET" |  grep '^unix:' > /dev/null 2> /dev/null
#  if [ ! -e "$SOCKFILE" -a "$?" -eq "0" ] 
#  then
#    log_warning_msg "creation du socket $SOCKFILE"
#    
#    mkfifo $SOCKFILE
#    
#  fi
  if [ -f "$PIDFILE" ]
  then
    ps faux | grep -v grep | grep "$DAEMON" | grep `cat $PIDFILE` > /dev/null
    if [ $? -eq 0 ]
    then
      log_failure_msg "fichier pid deja present avec un pid existant"
      log_end_msg 1
      return 1
    fi
    rm "$PIDFILE"
    log_warning_msg "pid file deja existant"
  fi
  if [ -f "$WORKON_HOME/$PROJECT_NAME/bin/activate" ];
  then
    . $WORKON_HOME/$PROJECT_NAME/bin/activate 
  else
    echo "impossible d'activer l'environement $WORKON_HOME/$PROJECT_NAME/bin/activate"
    exit 1
  fi
  if [ ! -z  "$DEBUG" ] ;
  then
    echo "sourcing $WORKON_HOME/$PROJECT_NAME/bin/activate"
    echo $DAEMON $DEBUG_ARGS
    $DAEMON $DEBUG_ARGS
  else
    $DAEMON $DAEMON_OPTS
  fi
  if [ $? -eq 0 ]
  then
    log_end_msg 0
  else
    log_end_msg 1
  fi

}

stop()
{
  log_begin_msg "stoping django website" "$PROJECT_NAME"
  if [ -f  "$PIDFILE" ]
  then
    start-stop-daemon --oknodo --stop --quiet --pidfile $PIDFILE 2> /dev/null
    rm "$PIDFILE"
    log_end_msg 0
  else
    log_failure_msg "pid file absent for $PROJECT_NAME django website"
    #log_end_msg 1
  fi

}

status()
{
  if [ -f "$PIDFILE" ]
  then
    # fichier pid existant
    ps faux | grep -v grep | grep $DAEMON | grep `cat $PIDFILE` > /dev/null
    if [ $? -eq 0 ]
    then
      echo "$PROJECT_NAME django website running"
    else
      echo "WARN !! pid file present but $PROJECT_NAME django website stopped"
    fi
  else
    ps faux | grep -v grep | grep $DAEMON > /dev/null
    if [ $? -eq 0 ]
    then
      echo "WARN !! $PROJECT_NAME django website apear to be running but don't have a PID FILE"
    else
      echo "$PROJECT_NAME django website stopped"
    fi
  fi
}

case "$1" in
  start)
    start
  ;;
  stop)
    stop
  ;;
  restart)
    stop
    sleep 2
    start
  ;;
  status)
    status
  ;;

  *)
  echo "Usage: "$1" {start|stop|restart|status}"
  exit 1
esac

exit 0 
```

# plugins - 用户在前端修改其个人资料和发布面板的任何插件？

> ID：15610190
> 
> 赞同：1
> 
> 时间：2013-03-25T08:04:45.797
> 
> 标签：plugins, wordpress

我想知道是否有用户首先注册为编辑器然后创建帖子或修改自己的帖子的任何插件。

用户可以管理他们的个人资料和发布面板。

我搜索了很多插件，但仍然没有找到足够的插件。

我是 wordpress 的新手。和一点关于wordpress的知识。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:12:43.393

[这里](http://digwp.com/2010/12/login-register-password-code/)有一个很好的教程。为我工作。这不是那么容易，但如果你想创建那一侧的克隆 - 你需要了解它。

# java - 使用jquery将值传递给隐藏字段的自动完成

> ID：15610192
> 
> 赞同：1
> 
> 时间：2013-03-25T08:04:55.990
> 
> 标签：java, javascript, jquery, jsp

我在 JSF 中有一个自动完成输入字段。

我的 JSP 代码

```
<h:form id="setupValue">
  <input type="text" id="department" name="department"/>

<script>
    $("#department").autocomplete("getdept.jsp",{minChars: 4});
</script>
        </h:form> 
```

在 getdept.jsp 中

```
DepartmentMB dept = new DepartmentMB ();
String query = request.getParameter("q");
List<String> dep = dept.getData(query);

Iterator<String> iterator = dep .iterator();
while(iterator.hasNext()) {
    String department = (String)iterator.next();
    String deptName=(String)it.next();
    out.println(deptName);

} 
```

如何发送`department`到隐藏字段并显示`deptName`到 inputText 字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:55:10.240

你试过这样吗？

```
$("#department").autocomplete({
    source: "getdept.jsp",
    minLength: 4,
    select: function(event, result) { 
        $("#hiddenfield").val(result)
    }
}); 
```

显然获得价值是 `$("#hiddenfield").val()`

# php - https响应中的奇数符号

> ID：15610193
> 
> 赞同：0
> 
> 时间：2013-03-25T08:05:00.897
> 
> 标签：php, javascript, jquery

我上周确实问过这个问题，但没有人回答我。

我在使用 jQuery AJAX 功能时遇到了一个奇怪的问题。奇怪的符号出现在服务器响应的开头：

这是一个屏幕截图。

![http://i.stack.imgur.com/RfEX9.png](../Images/24224d6f4c3632cac86ede3ac833ac32.png)

```
$.post('/ajax/', {email : $('#email').val(), language : $('#lng').val()}, function(data) {
        alert(data);
}); 
```

我用谷歌搜索了很多，但找不到任何类似的问题。可能是什么问题呢 ？

# android - 如何在活动中获取接收器实例（在 AndroidManifest.xml 中注册）

> ID：15610197
> 
> 赞同：2
> 
> 时间：2013-03-25T08:05:40.923
> 
> 标签：android

我已经像这样在 AndroidManifest.xml 中注册了一个接收器

```
<receiver android:name="com.sunrise.taximate.message.MessageRecevier"> 
        <intent-filter>
                <action android:name="xxx.xxxx.xxx.xxx" /> 
        </intent-filter>
</receiver> 
```

现在我想在我的一项活动（如 MainActivity）中获取接收者的实例，但我不知道如何去做。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:09:46.600

```
private BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver()
{

    @Override
    public void onReceive(Context context, Intent intent)
    {
        // Your code here to do what ever you want
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:13:42.757

接收器旨在对系统产生的事件采取行动，有时是对用户产生的事件。在某些特殊情况下，您可能希望自己获取这些实例，但这并不常见。拥有接收器的全部意义在于对系统事件做出反应并采取一些行动。除非您知道自己在做什么，否则我建议您不要在活动中自己创建接收器实例。

如果你真的想，你可以这样做

```
private BroadcastReceiver myReceiver = new BroadcastReceiver()
{

    @Override
    public void onReceive(Context context, Intent intent)
    {
        // do stuff
    }
} 
```

另请参阅此线程以获取相关信息： [BroadcastReceiver as inner class](https://stackoverflow.com/questions/4854807/broadcastreceiver-as-inner-class)

# php - Symfony2：在css中包含图像的麻烦

> ID：15610198
> 
> 赞同：3
> 
> 时间：2013-03-25T08:05:41.140
> 
> 标签：php, css, symfony

我无法在 symfony2 项目中从我的 .css 文件中引用图像。我有一个 main.css `app/Resources/public/css`，我的图像目录是`app/Resources/public/images`.

我像这样包含css表：

```
{% stylesheets '../app/Resources/public/css/*' %}
        <link href="{{ asset_url }}" type="text/css" rel="stylesheet" />
{% endstylesheets %} 
```

我将如何在我的 css 文件中引用图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:07:59.260

使用`../`转到上一个目录 ( `app/Respirces/public/`)，然后继续 URL 的其余部分。

```
selector {
    background-image: url(../images/image.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:47:04.580

Inori 的回答帮助我解决了这个问题： [Symfony2 - Assetic - load images in CSS](https://stackoverflow.com/questions/7044631/symfony2-assetic-load-images-in-css)

最后我不得不运行assetic:dump，然后像这样引用图像：

```
background-image: url('/images/background.jpg'); 
```

# ios - 如何实现轮询iphone sdk？

> ID：15610203
> 
> 赞同：0
> 
> 时间：2013-03-25T08:06:01.760
> 
> 标签：ios, long-polling

我想知道我们如何`uitableview`通过使用轮询来自动刷新 a。我有一个表，其中包含用户发送的消息。因此，当我加载视图时，我使用 AFTNetworking 来获取 JSOn 响应并将其显示在`uitableview`. 现在，如果用户停留在屏幕上并且我们收到一条新消息，它应该会自动刷新`uitableview`。到目前为止，我可以做些什么来以特定的时间间隔调用 url。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:22:58.647

以下计时器将在每 10 秒后调用“loadNewData”

```
NSTimer *refreshTimer = [NSTimer scheduledTimerWithTimeInterval:10.0f target:self selector:@selector(loadNewData) userInfo:nil repeats:YES]; 
```

用这个方法写你的加载代码

```
-(void)loadNewData
{
    // write code to fetch Data from Server
} 
```

# java - 对数组元素的奇数索引求和

> ID：15610204
> 
> 赞同：0
> 
> 时间：2013-03-25T08:06:17.490
> 
> 标签：java, arraylist

我有这个程序，它做了一大堆东西，但我遇到问题的部分是对数组列表中的奇数索引求和。

每 1、3、5、7 等。我需要求和并添加到一个变量。该变量是数据类型`BigFraction`，而**ArrayList-knowledge 仅采用 BigFractions**。

所以最初我有

```
 //Returns the combined probability (the odd indexes of the arraylist)
public BigFraction weight() {
    BigFraction sum;
    if (knowledge.indexOf(knowledge)%2 == 1)
        sum+ = no idea what to put in here
        return sum;
    }
} 
```

我真的不确定这是否是获取 Arraylist 索引的正确语法......我想你也可以使用 .add 或其他东西，但如果有人能阐明这将是很棒的。

干杯，

辛

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:14:30.283

试试这个：

```
// Returns the combined probability (the odd indexes of the arraylist)
public BigFraction weight() {
    BigFraction sum;
    for (int index = 1; index < knowledge.size(); index = index + 2) {
        sum = sum.add(knowledge.get(index));
    }

    System.out.println("Sum is  " + sum);

    return sum;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:08:09.777

这里有一个提示：你已经知道奇数索引是什么。你已经在你的问题中列出了它们。您所要做的就是找到一种方法来*遍历*它们。

一旦你弄清楚了，你需要找到一种方法来*获取*给定索引处的元素。

其余的，我敢肯定，会很容易。

# winapi - WinAPI ZOrder 问题

> ID：15610206
> 
> 赞同：0
> 
> 时间：2013-03-25T08:06:20.710
> 
> 标签：winapi, z-order

我有两扇窗户，一扇较小，另一扇较大。首先创建的窗口将始终位于顶部。`BringWindowToTop(hWnd)`不做也不做`SetWindowPos(hWnd, HWND_TOP, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE);`！我也一直在尝试`HWND_TOPMOST`和`HWND_BOTTOM`。

似乎使一个窗口在另一个窗口之上的唯一方法是正确的创建顺序。但这不是我需要的，我需要即时更改订单。有谁知道这可能是什么原因？这些只是旧的普通`CreateWindow()`实例，它们都有相同的父级。互联网上的任何搜索都不会产生任何结果。需要一些专家的帮助！

```
#include <windows.h>

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

HWND make_child(HWND Parent, int x, int y, int color) {
    HINSTANCE hInstance = 0;
    MSG msg          = {0};
    WNDCLASS wc      = {0}; 
    wc.lpfnWndProc   = WndProc;
    wc.hInstance     = hInstance;
    wc.hbrBackground = CreateSolidBrush(color);//(HBRUSH)(COLOR_WINDOWFRAME);
    wc.lpszClassName = (LPCSTR)L"mychildwin";
    RegisterClass(&wc);
    return CreateWindow("edit",(LPCSTR)"child", WS_BORDER|WS_CHILD|WS_VISIBLE, x,y,100,100,Parent,0,hInstance,NULL);
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow){
    MSG msg          = {0};
    WNDCLASS wc      = {0}; 
    wc.lpfnWndProc   = WndProc;
    wc.hInstance     = hInstance;
    wc.hbrBackground = CreateSolidBrush(0xff8080);
    wc.lpszClassName = (LPCSTR)L"minwindowsapp";
    if (!RegisterClass(&wc))  return 1;
    HWND W = CreateWindow(wc.lpszClassName,(LPCSTR)L"Minimal Windows Application", WS_OVERLAPPEDWINDOW|WS_VISIBLE, 0,0,640,480,0,0,hInstance,NULL);
    HWND A = make_child(W, 10, 10, 0x88ff00);
    HWND B = make_child(W, 70, 70, 0x8888ff);
    BringWindowToTop(B);
    SetWindowPos(B, HWND_TOP, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE);

    //REAL PROBLEM WAS HERE: A second call to SetWindowPos
     SetWindowPos(handle, 0, 0, 0, new_width, new_height,
      SWP_FRAMECHANGED | SWP_NOMOVE | SWP_NOOWNERZORDER | SWP_NOACTIVATE);
    // adding SWP_NOZORDER fixed it..

    while(GetMessage(&msg, NULL, 0, 0) > 0) DispatchMessage(&msg);
    return 0;
}

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {
    switch(message) {
        case WM_CLOSE: PostQuitMessage(0); break;
        default: return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:11:09.733

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)文档，还可以将窗口句柄传递给您希望在之后插入窗口的窗口。

```
BOOL WINAPI SetWindowPos(
  _In_      HWND hWnd,
  _In_opt_  HWND hWndInsertAfter,
  _In_      int X,
  _In_      int Y,
  _In_      int cx,
  _In_      int cy,
  _In_      UINT uFlags
); 
```

窗口的句柄在哪里`hWndInsertAfter`，您的窗口应位于**AFTER 之后**。你试过这个吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:15:05.833

好吧，也许有人会发现它真的很有用。因为真正的问题是，`SetWindowPos`两者`BringWindowToTo`都运行良好，但后来在我的真实应用程序中，我`SetWindowPos`再次调用以稍微移动组件，它再次搞砸了*ZOrder*！

所以我`SWP_NOZORDER`在第二次调用中添加了`SetWindowPos`.

# python - dnspython - 一次查询获取 AAAA、A、NS 等记录

> ID：15610214
> 
> 赞同：6
> 
> 时间：2013-03-25T08:07:06.497
> 
> 标签：python, dns, dnspython

我正在尝试构建用于解析单个域名的所有 DNS 记录的快速脚本。'ANY' 命令似乎可以解决问题，但我对 TTL 有奇怪的问题。当使用这样的任何

```
domain = dns.name.from_text(domain)
nameserver = '127.0.0.1'
query = dns.message.make_query(domain, dns.rdatatype.ANY)
response = dns.query.udp(query, nameserver, timeout = 2)
print response 
```

返回的数据是我需要的，但是当 TTL 过期时，脚本不会返回过期的记录。'DIG domain ANY' 命令似乎也有这个问题。

所以我的问题是获取单个域的所有 DNS 记录的最快方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T10:29:03.283

ANY 查询的 TTL 问题是 DNS 协议中固有的。一旦缓存有一个给定名称的 RRtype，它将返回它所拥有的内容以响应 ANY 查询，而不是查询源以查看是否还有更多。[RFC 2181](http://www.ietf.org/rfc/rfc2181.txt)对此进行了简短讨论：

> 5.2\. RRSet中RR的TTL
> 
> 资源记录也有生存时间 (TTL)。RRSet 中的 RR 可以有不同的 TTL。没有发现无法以其他方式更好地实现此功能的用途。但是，这可能会导致来自缓存服务器的部分回复（未标记为“截断”），其中 RRSet 中某些但不是所有 RR 的 TTL 已过期。

它实际上并没有说不鼓励在具有不同 TTL 的 RRset 中使用 RR，但作者显然不赞成这样做。

所以简短的回答是，鉴于 ANY 不能很好地工作，除了为您感兴趣的每个 RR 类型发出一个查询之外，没有其他解决方案。您可以通过并行执行所有这些查询来节省时间，这很有帮助（但 Python 库可能不会让这变得容易）。

# paypal - 沙盒测试和重定向问题

> ID：15610215
> 
> 赞同：2
> 
> 时间：2013-03-25T08:07:08.207
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

为了使用新沙箱（Developer.Paypal.com）测试我的自适应 api 支付，我已将沙箱帐户导入实时贝宝帐户。但是在测试付款时，我没有重定向到 PayPal 商店页面。相反，它要求我登录我已经登录的[http://developer.paypal.com](http://developer.paypal.com)。即使我确实登录了，它也不会向我显示付款的商店页面，而只会向我显示开发者网站的主页。

[https://www.sandbox.paypal.com/webscr?cmd=_ap-preapproval&preapprovalkey=PA-30G61643G7253031W](https://www.sandbox.paypal.com/webscr?cmd=_ap-preapproval&preapprovalkey=PA-30G61643G7253031W)

以上是我从我的网站测试付款得到的 URL 以及批准密钥。但我只是在这个新的贝宝过渡的圈子里移动。因为我也尝试过删除我在 Mozila 上的 cookie。我正在使用 iMac。

当我尝试从真实帐户内部访问沙盒站点时也会发生同样的情况，它会将我发送到沙盒站点，在该站点我收到消息以登录到 developer.paypal 站点

请告知如何摆脱这些 PayPal 错误以测试工作流程，该工作流程之前运行顺利，直到 PayPal 决定推出新的更改（测试所需的真实帐户）。

寻求有关此问题的指导。

# html - Outlook 电子邮件中的动态内容

> ID：15610216
> 
> 赞同：1
> 
> 时间：2013-03-25T08:07:08.940
> 
> 标签：html, dynamic, outlook, message

我需要在我的 Outlook 消息中有一个按钮，单击该按钮会显示图像（在消息本身内部）。我尝试使用 Javascript 处理 onclick 事件放置 HTML，但脚本无法在 Outlook 电子邮件中运行。我能做些什么来完成它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:12:05.570

JavaScript 不能在电子邮件中运行，这将是一个安全风险（和烦恼）。实际上，您对大多数客户都非常严格，当我为客户设计时事通讯时，我不得不求助于表格布局。

您可以做的最好的事情是在电子邮件中放置一个链接，该链接会将用户重定向到网页。

# ios - iOS 基于磁盘访问的恢复功能

> ID：15610218
> 
> 赞同：0
> 
> 时间：2013-03-25T08:07:22.227
> 
> 标签：ios, objective-c, xcode, data-recovery

我正在尝试将基于硬盘的恢复功能编码到适用于 iOS 设备的现有演示照片应用程序中。这个想法是允许用户恢复最后应用的效果和所有效果，即使在重新启动应用程序/意外崩溃等之后也是如此。

我将一个图像文件（应用到它的最新效果）保存到 NSCachesDirectory 中：

```
 NSData* data = UIImagePNGRepresentation(image);
    [data writeToFile:[self getFileAtIndex:getPath] atomically:YES]; 
```

转到恢复选项时，使用以下方法恢复保存在此路径的文件：

```
 image = [[UIImage imageWithContentsOfFile:[self getFileAtIndex:getPath]]retain]; 
```

该代码在我的测试设备（iPhone 4s）中运行良好。但不知何故，我怀疑这是否是编码恢复功能的最佳实践。

进入现实世界的应用程序，如果内容存储在 NSCachesDirectory 中，您认为它会备份到 iCloud 中吗？是否有可能与其他应用程序发生冲突？

NSCachesDirectory 目录是如何为同时访问的多个应用程序管理的？

我想知道这样做的最佳做法。

请帮助/评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:52:28.010

正如 Bonjour 先生在评论中提到的，在 iOS 上，每个应用程序都有其独立的文件系统，因此永远不会与其他应用程序发生任何冲突。

缓存目录未在 iCloud 上备份，您不应依赖缓存目录中的文件在启动时保留。您应该仅将缓存目录用于临时文件。如果您只允许在一个会话期间恢复，那么使用 caches 目录就可以了，但是如果您想允许跨多个启动恢复，您应该将它们存储在 library/documents 目录中。但请注意，Apple 对在 Documents 目录中存储文件有严格的审查政策，因为它会占用用户的云存储空间。

# logic - 从真值表创建简化有序二元决策图 (ROBDD)

> ID：15610219
> 
> 赞同：4
> 
> 时间：2013-03-25T08:07:24.430
> 
> 标签：logic, solver, truthtable, binary-decision-diagram

是否有一个软件包（最好是应用程序，而不是库）可以从给定的真值表（以某种文本格式）创建归约有序二进制决策图（ROBDD）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-10T14:48:39.107

You can also try this: [http://formal.cs.utah.edu:8080/pbl/BDD.php](http://formal.cs.utah.edu:8080/pbl/BDD.php)

It is the best tool for BDDs I used so far.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T13:42:45.553

BDD 是一种内存受限的数据结构，因为它严重依赖于检测重复的子真值表。您会发现大多数 BDD 包并不完全适合大型通用*真值表*，而是针对非常稀疏或高度重复的*表达式*进行了优化。

使用标准 BDD 包，您可以使用对变量进行操作的表达式。所以你必须遍历你的真值表，为表中的 1 构造类似于和的乘积表达式。在此过程中，大多数库会动态地重新排序变量以适应内存限制，从而导致另一个巨大的减速。在大约 24 个变量之后，即使真值表非常稀疏，这些库也将开始在现代系统上运行。

如果您只是在给定一个已隐式定义其变量顺序的真值表寻找最终的 BDD 节点，您可以跳过外部库和可怕的运行时的许多复杂性，只需使用一些 Unix 文本处理工具。

关于 BDD 的一个很好的资源，Knuth 的 TAOCP v4.1b，显示了 BDD 节点及其“珠”的等价性，即非方字符串的子真值表。我将讨论一个更简单的版本，ZDD，它具有类似的结构，称为“zeads”：不完全为零的**正**部分子真值表。为了概括回 BDD，将管道中的 sed+grep 替换为过滤方形字符串的程序，而不是保留正部分非零字符串。

要打印真值表的所有 zead（作为 ascii '1' 和 '0' 的单行文件，最后换行），请在设置变量数和文件名后运行以下命令：

```
MAX=8; FILENAME="8_vars_truthtable.txt"; for (( ITER=0; ITER<=${MAX}; ITER++ )) ; do INTERVAL=$((2 ** ${ITER})); fold -w ${INTERVAL} ${FILENAME} | sed -n '1~2!p' | grep -v "^0*$" | sort -u ; done 
```

这比 BDD 包有很多好处：

*   简单，基本上没有多余的依赖。
*   与内存中的哈希表不同，外部排序意味着没有颠簸。
*   如果您在 for 循环中分叉时了解行缓冲和磁盘缓存，则可以轻松实现并行化和可扩展。
*   如果写入中间文件排序也将并行化。

我经常将它用于最大 32 个变量的真值表，而使用 BDD 库是不可能实现的。它根本不会对内存系统征税，几乎不使用几 MB。但是，如果您有大量可用的 RAM，像 Linux 这样的体面的操作系统会很乐意将其全部用于缓存磁盘以使其更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:27:06.710

使用任何 BDD 库，您都可以做您想做的事。当然，你必须自己写一段代码。

如果你正在寻找一个轻量级的工具，我经常使用这样的小程序来快速查看一个函数的 BDD：

[http://tams-www.informatik.uni-hamburg.de/applets/java-bdd/](http://tams-www.informatik.uni-hamburg.de/applets/java-bdd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-25T13:42:18.480

我也搜索了类似的东西，但找不到 javascript 实现。

我现在创建了自己的模块，该模块能够从真值表中创建、最小化和排序优化 bdd。

[https://github.com/pubkey/binary-decision-diagram](https://github.com/pubkey/binary-decision-diagram)

# java - 更改在 FTP 中上传文件的目录

> ID：15610220
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:07:24.340
> 
> 标签：java, ftp

我需要更改要上传文件的 Java 程序中的工作目录，但我无法更改工作目录。目前我正在使用以下代码，请看看这里出了什么问题。

```
 import java.io.FileInputStream;
import java.io.IOException;

import org.apache.commons.net.ftp.FTPClient;

public class FileUploadDemo {
    public static void main(String[] args) {
        FTPClient client = new FTPClient();
        FileInputStream fis = null;

        try {
            client.connect("36.109.60.40");
            client.login("XYZ", "SYSTEM");

            client.enterLocalPassiveMode();
            boolean changeWorkingDirectory = client.changeWorkingDirectory("ABC\\QSRC");

            if (changeWorkingDirectory)//this is false here
            {

              String filename = "ATR.CBL";

              fis = new FileInputStream("C:\\Users\\RATSYA\\Desktop\\backup\\DINAKE\\ATR.CBL");
              boolean storeFile = client.storeFile(filename, fis);
              if(storeFile)
                 System.out.println("file stored");
              else
                 System.out.println("file can not be stored");

              client.logout();
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fis != null) {
                    fis.close();
                }
                client.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T01:41:13.390

我想我知道你怎么能做到这一点。您可能应该将您的目录存储在`String`这样的位置：`String dir = "/Server/FTP/OtherDir/";`并且每当您想要更改目录时，您都会更改该值。`String`当您想通过执行以下操作上传/下载文件时，您可以使用存储目录：

```
dir ="/Server/FTP/OtherDir/";
yourFileWriter.write(dir + file); 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:39:19.403

试过“ABC/QSRC”吗？

从未使用过，但有一些一般性的想法：

*   ABC\QSRC 是否存在于用户 XYZ 的 ftp 目录中？
*   您是否尝试与其他客户端相同的登录和操作并且它有效？
*   也许你的意思是/ABC/QSRC

# vim - 如何在vim中全选并复制？

> ID：15610222
> 
> 赞同：38
> 
> 时间：2013-03-25T08:07:38.290
> 
> 标签：vim

如何在vim插入模式下全选并复制？在正常模式下还有另一种方法吗？

我已经尝试了可视模式和 gg 和 shift + gg 来全选然后猛拉，但是这并没有将其传输到剪贴板以便能够将其粘贴到其他应用程序中，例如 Skype 或 chrome 浏览器。

我相信这是一项常见的任务，比我更聪明的人有很多品种，请随时分享你的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-25T08:20:34.680

在正常模式下：

`g``g``"``+``y``G`

在 ex 模式下：

`:%y+`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-25T08:19:11.090

您的问题中缺少一些重要信息：

*   的输出`$ vim --version`？
*   操作系统？
*   CLI 还是图形用户界面？
*   本地还是远程？
*   你用 tmux 吗？屏幕？

如果你的 Vim 是用剪贴板支持构建的，你应该像这样在正常模式下使用剪贴板寄存器：

```
gg"+yG 
```

如果您的 Vim 不支持剪贴板，您可以通过其他程序将文本从 Vim 复制到您的操作系统剪贴板。这在很大程度上取决于您的操作系统，但*您没有说它是什么，*所以我们无法提供帮助。

但是，如果您的 Vim 瘫痪了，最好的办法是安装一个支持剪贴板的正确版本，但我也不能告诉您怎么做，因为*我不知道您使用什么操作系统。*

***编辑***

在基于 debian 的系统上，以下命令将安装具有剪贴板、ruby、python 支持的适当 Vim。

```
$ sudo apt-get install vim-gnome 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-03T11:37:43.483

[@swpd 的](https://stackoverflow.com/a/15610380/1766716)回答得到改善

我**`,`**用作领导键，**`,a`**快捷方式可以解决问题

如果您喜欢**`,a`**快捷方式，请添加此行

```
map <Leader>a :%y+<CR> 
```

* * *

我使用**`Ctrl y`**快捷方式复制

```
vmap <C-y> y:call system("xclip -i -selection clipboard", getreg("\""))<CR>:call system("xclip -i", getreg("\""))<CR> 
```

并**`,v`**粘贴

```
nmap <Leader>v :call setreg("\"",system("xclip -o -selection clipboard"))<CR>p 
```

在使用它之前，**您必须安装** `xclip`

```
$ sudo apt-get install xclip 
```

编辑：使用时`:%y+`，只能粘贴到 Vim vim`Ctrl+Insert`快捷方式。和

```
map <C-a> :%y+<Esc> 
```

不会与我的 Vimrc 中的任何设置发生冲突。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-07T15:14:00.997

```
ggVG 
```

会从头到尾选择

# playframework - 播放框架 2 承诺状态

> ID：15610224
> 
> 赞同：1
> 
> 时间：2013-03-25T08:08:08.010
> 
> 标签：playframework, playframework-2.1

在 play 2.1 中，我可以使用 Akka 异步执行一段代码，如下所示：

```
Promise<Integer> promiseOfInt = Akka.future(
  new Callable<Integer>() {
    public Integer call() {
      return intensiveComputation();
    }
  }
); 
```

如何获取此操作的状态？例如：开始、执行、完成等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:49:43.873

您可以使用三个回调`onSuccess`，`onFailure`和`onComplete`。

请参阅此处的“回调”部分：http: [//doc.akka.io/docs/akka/2.1.0/scala/futures.html](http://doc.akka.io/docs/akka/2.1.0/scala/futures.html)

# ios - 如何在 ios 中将日夜模式添加到 AepubReader

> ID：15610229
> 
> 赞同：1
> 
> 时间：2013-03-25T08:08:22.497
> 
> 标签：ios, xcode, epub

目前我正在使用 AepubReader 读取 epub 文件，但我想在其中实现日夜模式？你知道我该如何实现这些模式吗？目前我正在使用以下代码，但问题是

1.夜间模式仅影响特定章节。2.Day模式将字体颜色更改为黑色。

```
 NSUserDefaults *userDefaults2 = [NSUserDefaults standardUserDefaults];
  [userDefaults2 setBool:NO forKey:@"cc"];
  [userDefaults2 synchronize];

  [webView setOpaque:NO];
  [webView setBackgroundColor:[UIColor blackColor]];
  //    for(int i=0;i<10;i++)
  //    {
  NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('html')[0].style.webkitTextFillColor= 'white'"];

  [webView stringByEvaluatingJavaScriptFromString:jsString];
  //    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:38:35.063

这段代码对我有用

```
-(IBAction)night:(id)sender{

NSUserDefaults *userDefaults2 = [NSUserDefaults standardUserDefaults];
[userDefaults2 setBool:NO forKey:@"btnM1"];
[userDefaults2 synchronize];

[_webview setOpaque:NO];
[_webview setBackgroundColor:[UIColor blackColor]];
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextFillColor= 'white'"];
[_webview stringByEvaluatingJavaScriptFromString:jsString];}

-(IBAction)day:(id)sender{

NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setBool:YES forKey:@"btnM1"];
[userDefaults synchronize];

[_webview setOpaque:NO];
[_webview setBackgroundColor:[UIColor whiteColor]];
NSString *jsString2 = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextFillColor= 'black'"];
[_webview stringByEvaluatingJavaScriptFromString:jsString2];}

- (void)webViewDidFinishLoad:(UIWebView *)webView{
NSUserDefaults *menuUserDefaults = [NSUserDefaults standardUserDefaults];

if([menuUserDefaults boolForKey:@"btnM1"]){
    [_webview setOpaque:NO];
    [_webview setBackgroundColor:[UIColor whiteColor]];
    NSString *jsString2 = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextFillColor= 'black'"];
    [_webview stringByEvaluatingJavaScriptFromString:jsString2];

}

else{
    [_webview setOpaque:NO];
    [_webview setBackgroundColor:[UIColor blackColor]];
    NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('body')[0].style.webkitTextFillColor= 'white'"];
    [_webview stringByEvaluatingJavaScriptFromString:jsString];

}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-31T10:11:30.483

*   您也可以将此代码用于日夜模式。此代码可能会根据您的需要工作。

*   这将适用于`UIWebView`.

代码是：

```
BOOL isNightMode;

- (IBAction)nightModeBtn_click:(id)sender {
    isNightMode = YES;
    [self.webView reload];
}
- (IBAction)dayModeBtn_click:(id)sender {
    isNightMode = NO;
    [self.webView reload];
}

- (void)webViewDidFinishLoad:(UIWebView *)_webView{
  if(isNightMode == YES){
    [self.webView setOpaque:NO];
    NSString *setJavaScript = [[NSString alloc] initWithFormat:@" document.getElementsByTagName('body')[0].style.webkitFilter='grayscale(100%%)';document.getElementsByTagName('div')[0].style.webkitFilter='grayscale(100%%)'; DOMReady();"];
    [self.webView stringByEvaluatingJavaScriptFromString:setJavaScript];
  }
} 
```

# c# - 使用 Windows Phone 套接字接收大文件

> ID：15610230
> 
> 赞同：0
> 
> 时间：2013-03-25T08:08:22.510
> 
> 标签：c#, windows-phone-7, asyncsocket, socketasynceventargs

我正在使用套接字处理从桌面应用程序到 Windows 手机应用程序的 sendig 文件。

我已经开发了桌面套接字服务器应用程序和 Windows Phone 应用程序（套接字客户端），两者都适用于小于 1MB 的文件，这意味着我可以将小于 1MB 的文件从桌面应用程序传输到 Windows Phone 应用程序。

现在我的问题是发送大文件导致应用程序崩溃，我已经调试了应用程序，但它会在一些迭代后挂起。

请检查以下代码片段以了解 Windows Phone 端的文件接收逻辑。

代码 ：

```
 public string Receive()
    {
        string response = "Operation Timeout";
        int bytestrn = 0;
        int cnt = 0;
        byte[] data = new byte[2048 * 5000];
        if (socketClient != null)
        {                
            SocketAsyncEventArgs socketAsyncEventArgs = new SocketAsyncEventArgs();
            socketAsyncEventArgs.RemoteEndPoint = socketClient.RemoteEndPoint;
            socketAsyncEventArgs.SetBuffer(new Byte[MAX_BUFFER_SIZE*20000], 0, MAX_BUFFER_SIZE*20000);

            socketAsyncEventArgs.Completed += new EventHandler<SocketAsyncEventArgs>(delegate(object sender, SocketAsyncEventArgs e)
            {
                cnt++;
                if (e.SocketError == SocketError.Success)
                {                      

                    try
                    {
                        bytestrn += e.BytesTransferred;
                        if (e.BytesTransferred > 0)
                        {

                            if (bytestrn >= 2501829)                                
                            {
                                Buffer.BlockCopy(e.Buffer, 0, data, bytestrn - e.BytesTransferred, e.BytesTransferred);                                    
                                int fileNameLen = BitConverter.ToInt32(data, 0);
                                string fileName = Encoding.UTF8.GetString(data, 4, fileNameLen);
                                IsoFileName = fileName;
                                IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication();

                                using (BinaryWriter writeFile = new BinaryWriter(new IsolatedStorageFileStream(IsoFileName, FileMode.Create, FileAccess.Write, myIsolatedStorage)))
                                {
                                    writeFile.Write(data, 4 + fileNameLen, bytestrn - 4 - fileNameLen);                                        
                                    writeFile.Close();
                                }
                                clientDone.Set();
                            }
                            else
                            {
                                if (cnt == 1)
                                {
                                    Buffer.BlockCopy(e.Buffer, 0, data, 0, e.BytesTransferred);
                                    //e.Buffer.CopyTo(data, 0);
                                }
                                else
                                {
                                    Buffer.BlockCopy(e.Buffer, 0, data, bytestrn - e.BytesTransferred, e.BytesTransferred);
                                    //e.Buffer.CopyTo(data, bytestrn - e.BytesTransferred);
                                }

                                clientDone.Reset();
                                socketClient.ReceiveAsync(e);
                                clientDone.WaitOne();
                            }
                            string test = "if";
                        }
                        else
                        {
                            clientDone.Set();
                            string test = "else";
                        }
                        //clientDone.Set();
                    }
                    catch (Exception exp)
                    {
                        string hi = "hi";
                    }                        
                }
                else
                {
                    response = e.SocketError.ToString();
                }

                clientDone.Set();
            });

            clientDone.Reset();
            socketClient.ReceiveAsync(socketAsyncEventArgs);
            clientDone.WaitOne();
        }
        else
        {
            response = "Socket is not initialized";
        }  // end of: if (socketClient != null)

        return response;
    } 
```

请尽快回复...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:01:14.140

每次传输以chuck wise [4096]字节发送数据。为此，您需要在客户端和服务器上进行握手。

# python - 在打开的 ERP 7 Web 客户端错误中添加新员工记录时出现错误：邮件传递失败

> ID：15610231
> 
> 赞同：0
> 
> 时间：2013-03-25T08:08:32.127
> 
> 标签：python, ubuntu-12.04, openerp, erp, window.opener

在打开的 ERP 7 Web 客户端中创建新员工时出现这些错误。

请尽快回复此问题

邮件投递失败

通过 SMTP 服务器“imap.googlemail.com”发送邮件失败。SMTPSenderRefused：530 5.5.1 需要身份验证。

[在 5.5.1](http://support.google.com/mail/bin/answer.py?answer=14257)了解更多信息

f47sm17280432eep.13 - gsmtp xyz@gmail.com

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T12:41:48.873

您在从服务器发送邮件时遇到问题。尝试在不同的服务器上安装 OpenERP，导入数据库并从该服务器发送电子邮件。您也可以尝试在您的服务器中安装 smtp 服务器（例如 sendmail），然后尝试发送电子邮件。那应该行得通。

简而言之，您的 smtp 服务器未在您的 openerp 服务器中正确配置

# java - 运行 MIFOS 时出错

> ID：15610235
> 
> 赞同：0
> 
> 时间：2013-03-25T08:08:50.707
> 
> 标签：java

尝试运行`mvn compile`时遇到以下错误

[信息] Mifos - 报告 .................... 成功 [28.443s]

[信息] Mifos - 应用程序..........................失败 [44.243s]

[信息] Mifos - 战争 ......................................... 跳过

[信息] Mifos - 验收测试 ...................... 跳过

[信息] Mifos - 基础服务器（码头）.......................跳过

[信息] Mifos - 工作区服务器 ...................... 跳过

[信息] 构建失败

## [错误] 未能在项目 mifos-webapp 上执行目标 org.codehaus.mojo:native2ascii-maven-plugin:1.0-alpha-1:native2ascii (native2ascii)：

## 原因：org.apache.maven.project.DependencyResolutionException：无法解析项目 org.mifos:mifos-webapp:jar:1.12-SNAPSHOT 的依赖项：找不到 org.mifos:mifos-db:jar:1.12

在[http://maven.mifos.org/nexus/content/groups/public/](http://maven.mifos.org/nexus/content/groups/public/)被缓存在本地存储库中，直到 maven-repository.mifos.org 的更新间隔已经过去或强制更新时才会重新尝试解析org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:189)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T04:05:55.990

You are using the old codebase of mifos please refer to the [new mifos wiki](https://github.com/openMF/mifosx/wiki) to get started

You can find the new repository [here](https://github.com/openMF/mifosx)

# c# - 如何将一组非托管内存复制到同一个非托管内存中

> ID：15610236
> 
> 赞同：4
> 
> 时间：2013-03-25T08:08:53.263
> 
> 标签：c#, memory, copy, unmanaged

我保留了内存 10 个 128 字节的项目

```
IntPtr dst = Marshal.AllocHGlobal (10 * 128);

IntPtr src1 = Marshal.AllocHGlobal (128);
// .... init scr1 from DLL
IntPtr src2 = Marshal.AllocHGlobal (128);
// .... init scr2 from DLL 
```

我需要将 128 字节的元素复制到`src1`指定的偏移量。`src2``dst`

**Marshal.Copy**不适合此类用途。由于`src`和`dst`在非托管内存区。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T08:15:38.133

Window 的 API 函数[`memcopy`](http://www.pinvoke.net/default.aspx/msvcrt.memcpy)应该可以解决问题。

```
[DllImport("msvcrt.dll", EntryPoint = "memcpy",
    CallingConvention = CallingConvention.Cdecl, 
    SetLastError = false)]
public static extern IntPtr memcpy(IntPtr dest, IntPtr src, UIntPtr count); 
```

另外，检查一下：

[https://stackoverflow.com/a/2658394/558018](https://stackoverflow.com/a/2658394/558018)

正如它声称的那样，您可以使用`unsafe`上下文手动传输必要的字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T08:49:15.097

如果要使用 Windows API 执行此操作，请使用[MoveMemory](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366788%28v=vs.85%29.aspx)。

```
[DllImport("Kernel32.dll", EntryPoint="RtlMoveMemory", SetLastError=false)]
static extern void MoveMemory(IntPtr dest, IntPtr src, int size); 
```

# web-services - 如何从调用 web 服务的模型提供者获取数据

> ID：15610237
> 
> 赞同：0
> 
> 时间：2013-03-25T08:08:58.853
> 
> 标签：web-services, angularjs

我想从模型提供者那里检索数据，但我得到的只是控制器中的“未定义”。

这是代码：

**控制器**：

```
pdmAtWeb.controller('SearchCtrl', function($scope, ItemModel){
$scope.updateTableFromSearch = function(){
        $scope.myData = ItemModel.findAllItems();
        console.log($scope.myData);
};}); 
```

**提供者**

```
pdmAtWeb.provider('ItemModel', function () {
this.defaultEndpoint = '/item';
this.defaultServiceUrl = 'http://localhost:8080/webservice';

this.setDefaultEndpoint = function (newEndpoint) {
    this.defaultEndpoint = newEndpoint;
};

this.setDefaultServiceUrl = function (newServiceUrl) {
    this.defaultServiceUrl = newServiceUrl;
}

this.$get = function ($http) {
    var endpoint = this.endpoint;
    var serviceUrl = this.serviceUrl;

    var refreshConnection = function () {
        // reconnect
    }
    return{
        findAllItems: function () {
            $http({method: 'GET', url: serviceUrl + endpoint}).
                success(function (data, status, headers, config) {
                    console.log(data);
                    return data;

                }).
                error(function (data, status, headers, config) {

                });
        }
    }
}}); 
```

提供者“ItemModel”从 Web 服务接收正确的数据。也许这是一个异步问题，但我不确定。

**更新**

添加延迟/承诺实现后，它按预期工作。这是最终代码：

**控制器**：

```
pdmAtWeb.controller('SearchCtrl', function($scope, ItemModel){
$scope.updateTableFromSearch = function(){
       ItemModel.findAllItems().then(function(data){
          console.log(data);
           $scope.myData = data;
       });
};
}); 
```

**提供者**

```
pdmAtWeb.provider('ItemModel', function () {
    this.defaultEndpoint = '/item';
    this.defaultServiceUrl = 'http://localhost:8080/webservice';

    this.setDefaultEndpoint = function (newEndpoint) {
        this.defaultEndpoint = newEndpoint;
    };

    this.setDefaultServiceUrl = function (newServiceUrl) {
        this.defaultServiceUrl = newServiceUrl;
    }

    this.$get = function ($http, $q) {
        var endpoint = this.defaultEndpoint;
        var serviceUrl = this.defaultServiceUrl;

        var refreshConnection = function () {
            // reconnect
        }
        return{
            findAllItems: function () {
                var deferred = $q.defer();

                 $http({method: 'GET', url: serviceUrl + endpoint}).
                    success(function (data, status, headers, config) {
                     deferred.resolve(data);
                    }).
                    error(function (data, status, headers, config) {
                      deferred.reject();
                    });
                return deferred.promise;
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:10:29.617

您不需要延迟来完成此操作。你`$http`已经返回了一个承诺。在您的第一个示例中，您得到未定义的原因是因为您没有返回任何内容。检查您的`findAllItems`. 它没有返回任何东西。

如果你做`return $http.get(.....)`所有事情都应该在不显式使用 deferred 的情况下工作。

这是更正的版本：

```
pdmAtWeb.provider('ItemModel', function () {
this.defaultEndpoint = '/item';
this.defaultServiceUrl = 'http://localhost:8080/webservice';

this.setDefaultEndpoint = function (newEndpoint) {
    this.defaultEndpoint = newEndpoint;
};

this.setDefaultServiceUrl = function (newServiceUrl) {
    this.defaultServiceUrl = newServiceUrl;
}

this.$get = function ($http) {
    var endpoint = this.endpoint;
    var serviceUrl = this.serviceUrl;

    var refreshConnection = function () {
        // reconnect
    }
    return{
        findAllItems: function () {
            //NOTE addition of return below.
            return $http({method: 'GET', url: serviceUrl + endpoint}).
                success(function (data, status, headers, config) {
                    console.log(data);
                    //NOTE: YOU SHOULD ALSO return data here for it to work.  
                    return data;

                }).
                error(function (data, status, headers, config) {

                });
        }
    }
}}); 
```

# mysql - 将连接与聚合一起使用，并在不存在聚合时检索行

> ID：15610238
> 
> 赞同：0
> 
> 时间：2013-03-25T08:09:10.750
> 
> 标签：mysql, join, aggregate-functions

我的 MySQL 表上的以下查询从 purchaseorder 表中返回在 deliveryorder 表中具有相应条目的行。如何构造此查询，以便即使在 deliveryorder 表中不存在相应的行，我也可以从 purchaseorder 表中获取行？如果用户想查看 sql table CREATE 语句，我可以发布这些，但我现在不发布，因为它确实使问题太大了。

```
SELECT
    `purchaseorder`.`id` AS `po_id`,
    `purchaseorder`.`order_quantity` AS `po_order_quantity`,
    `purchaseorder`.`applicable_approved_unit_rate` AS `po_unit_rate`,
    `purchaseorder`.`applicable_sales_tax_rate` AS `po_tax_rate`,
    `purchaseorder`.`order_date` AS `po_order_date`,
    `purchaseorder`.`remarks` AS `po_remarks`,
    `purchaseorder`.`is_open` AS `po_is_open`,
    `purchaseorder`.`is_active` AS `po_is_active`,
    `purchaseorder`.`approved_rate_id` AS `po_app_rate_id`,

    `supplier`.`name` AS `sup_name`,

    SUM(`deliveryorder`.`quantity`) AS `total_ordered`

    FROM `purchaseorder`
    LEFT JOIN `deliveryorder` ON (`deliveryorder`.`purchase_order_id` = `purchaseorder`.`id`)
    INNER JOIN `approvedrate` ON (`purchaseorder`.`approved_rate_id` = `approvedrate`.`id`)
    INNER JOIN `supplier` ON (`approvedrate`.`supplier_id` = `supplier`.`id`)

    WHERE (
            `purchaseorder`.`is_active` = 1
            AND `purchaseorder`.`is_open` = 1
            AND `deliveryorder`.`is_active` = 1
            AND `approvedrate`.`material_id` = 2
           )
    HAVING `purchaseorder`.`order_quantity` >= `total_ordered` + 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:05:05.847

你有一个聚合函数，但没有 GROUP BY 子句，这很奇怪，但无论如何 - 像这样？哎呀 - 编辑...

```
SELECT po.id po_id
     , po.order_quantity po_order_quantity
     , po.applicable_approved_unit_rate po_unit_rate
     , po.applicable_sales_tax_rate po_tax_rate
     , po.order_date po_order_date
     , po.remarks po_remarks
     , po.is_open po_is_open
     , po.is_active po_is_active
     , po.approved_rate_id po_app_rate_id
     , s.name sup_name
     , SUM(do.quantity) total_ordered
  FROM purchaseorder po
  LEFT 
  JOIN deliveryorder do 
    ON do.purchase_order_id = po.  
   AND do.is_active = 1
  LEFT
  JOIN approvedrate ar
    ON ar.id = po.approved_rate_id 
   AND ar.material_id = 2
  LEFT
  JOIN supplier s
    ON s.id = ar.supplier_id 
 WHERE po.is_active = 1
   AND po.is_open = 1
HAVING po.order_quantity >= total_ordered + 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T04:23:47.673

我无法弄清楚如何在一个查询中获得所需的结果，但最终使用以下两个查询来满足我的要求：-

第一次查询

```
 SELECT
            pot.`id` AS `po_id`,
            pot.`order_quantity` AS `po_order_quantity`,
            pot.`applicable_approved_unit_rate` AS `po_unit_rate`,
            pot.`applicable_sales_tax_rate` AS `po_tax_rate`,
            pot.`is_open` AS `po_is_open`,
            pot.`is_active` AS `po_is_active`,

            st.`id` AS `sup_id`,
            st.`name` AS `sup_name`,

            SUM(dot.`quantity`) AS `total_ordered`
        FROM `purchaseorder` pot
            INNER JOIN `deliveryorder` dot ON (dot.`purchase_order_id` = pot.`id`)
            INNER JOIN `approvedrate` art ON (pot.`approved_rate_id` = art.`id`)
            INNER JOIN `supplier` st ON (art.`supplier_id` = st.`id`)
        WHERE (
                pot.`is_active` = 1
                AND pot.`is_open` = 1
                AND art.`material_id` = @materialid
                AND art.`in_effect` = 1
                AND art.`is_active` = 1
                AND dot.`is_active` = 1
                AND st.`is_active` = 1
               )
        HAVING pot.`order_quantity` >= `total_ordered` + @materialquantity 
```

第二次查询

```
 SELECT
            pot.`id` AS `po_id`,
            pot.`order_quantity` AS `po_order_quantity`,
            pot.`applicable_approved_unit_rate` AS `po_unit_rate`,
            pot.`applicable_sales_tax_rate` AS `po_tax_rate`,
            pot.`is_open` AS `po_is_open`,
            pot.`is_active` AS `po_is_active`,

            st.`id` AS `sup_id`,
            st.`name` AS `sup_name`,

            0 AS `total_ordered`
        FROM `purchaseorder` pot
            INNER JOIN `approvedrate` art ON (pot.`approved_rate_id` = art.`id`)
            INNER JOIN `supplier` st ON (art.`supplier_id` = st.`id`)
        WHERE (
                pot.`is_active` = 1
                AND pot.`is_open` = 1
                AND art.`material_id` = @materialid
                AND art.`in_effect` = 1
                AND art.`is_active` = 1
                AND st.`is_active` = 1
                AND pot.`order_quantity` >= @materialquantity
                AND pot.`id` NOT IN
                    (
                      SELECT dot.`purchase_order_id`
                      FROM `deliveryorder` dot
                      WHERE dot.is_active = 1
                    )
               ) 
```

# c# - 如何在多用户环境中使用 VistaDB

> ID：15610239
> 
> 赞同：1
> 
> 时间：2013-03-25T08:09:13.670
> 
> 标签：c#, .net, entity-framework, remobjects, vistadb

我的要求如下所示： 我有一个使用 VistaDB 作为数据库的 DotNet(c#) winform 应用程序。因此，为了支持多用户环境（因为 VistaDB 是无服务器数据库），我决定实施 Remobjects SDK 来构建一个服务器，该服务器将为所有数据库查询提供服务，而客户端将只调用该服务。我正在使用实体框架作为 ORM。现在如何在服务器和客户端之间传递实体？是否有其他可用的解决方案。我不想使用 WCF。

# java - 我们可以在 ASCII 和 Unicode 之间切换吗

> ID：15610247
> 
> 赞同：6
> 
> 时间：2013-03-25T08:10:02.217
> 
> 标签：java, unicode, ascii

我遇到了“char 变量是 Unicode 格式，但也很好地采用 / 映射到 ASCII”。这有什么必要提的？当然 ASCII 是 1 个字节，Unicode 是 2 个字节。Unicode 本身包含 ASCII 代码（默认情况下 - 它是标准）。那么是否有一些语言中的`char`变量支持 UNICODE 但不支持 ASCII？

另外，字符格式（Unicode/ASCII）是由我们使用的平台决定的，对吧？（UNIX、Linux、Windows 等）。那么假设我的平台使用 ASCII，是否不能切换到 Unicode，反之亦然？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T08:19:48.020

Java 在内部使用 Unicode。总是。[实际上，它大部分时间都使用 UTF-16，但现在这太详细了。]

它不能**在**内部使用 ASCII（`String`例如）。您*可以*表示任何可以用 Unicode 中的 ASCII 表示的字符串，所以这应该不是问题。

平台发挥作用的*唯一*地方是当您没有指定编码时，Java 必须选择一种编码。例如，当您创建一个`FileWriter`将`String`值写入字符串时：此时 Java 需要使用编码来指定特定字符应如何映射到字节。如果您不指定一个，则使用平台的默认编码。该默认编码**几乎从不 ASCII**。大多数 Linux 平台使用 UTF-8，Windows*经常*使用一些 ISO-8859-* 衍生物（或其他特定于文化的 8 位编码），但当前的操作系统没有使用 ASCII（仅仅是因为 ASCII 不能表示很多重要字符） .

事实上，现在纯 ASCII 几乎是无关紧要的：没有人使用它。ASCII*仅*作为大多数 8 位编码（包括 UTF-8）映射的公共子集很重要：较低的 128 个 Unicode 代码点以 1:1 映射到许多编码中的数值 0-127。但是纯 ASCII（其中值 128-255*未定义*）不再有效使用。

作为旁注，Java 9 有一个称为“紧凑字符串”的内部优化，其中仅包含可在 Latin-1 中表示的字符的字符串使用每个字符而不是 2 个字节。这种优化对于各种“计算机语言”非常有用像 XML 和类似协议，其中大部分文本都在 ASCII 范围内。但它对开发人员也是完全透明的，因为所有处理都是在`String`类内部完成的，从外部看不到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:14:19.767

# java - 在 sqlite 数据库中保存 TimePicker 数据

> ID：15610248
> 
> 赞同：0
> 
> 时间：2013-03-25T08:10:05.273
> 
> 标签：java, android, eclipse, sqlite, timepicker

好的 - 所以我现在真的迷路了......

我有一个 xml 布局，用户可以在其中输入多个设置。我的目标是能够保存这些设置并在以后检索它们 - 到目前为止我已经成功完成了。我有 sqlite 数据库，它存储了几个值，包括来自 timepicker 的 currentHour 以及另一个输出保存在数据库中的设置的 xml 布局。

目前 - timePicker 仅将 currentHour 保存到数据库，然后保存到我用来在 view_country XML 文件中显示它的字符串。

我想要做的是显示整个时间 - 而不仅仅是 currentHour（例如 currentHour : currentMinute 为了显示完整时间 4:00AM）作为我可以用来在另一个 xml 布局中显示时间的字符串。

附言

我真的需要一个关于如何做到这一点的直截了当的答案（假设我什么都不知道）我已经尝试了好几天了，但我仍然需要帮助才能将 currentMinute 显示在我的 currentHour 旁边。

我已经对此进行了几次尝试，但是此时我觉得最好恢复到我上次已知的工作状态（在尝试连接两个字段的不同方法时，我遇到了强制关闭问题）并寻求帮助。（我知道从 TimePicker 存储和显示时间值不会太难 - 特别是对于你们中的一些更熟练的 StackOverflow 忍者）

add_country.xml（TimePicker 按钮所在的位置）

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent" 
   android:layout_height="wrap_content" android:layout_weight="1">

   <LinearLayout android:id="@+id/linearLayout"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:orientation="vertical" 
      android:padding="5dp">

      <EditText android:id="@+id/nameEdit"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/name_hint"
         android:inputType="textPersonName|textCapWords"/>

      <EditText android:id="@+id/capEdit"
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content" 
         android:imeOptions="actionNext" 
         android:hint="@string/cap_hint"
         android:inputType="textPersonName|textCapWords"/>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Data Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10MB" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="right"
            android:textColor="#ffffff"
            android:text="Unlimited Data" />
    </LinearLayout>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Bandwidth Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <SeekBar
        android:id="@+id/seekBar1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:gravity="left"
            android:textColor="#ffffff"
            android:text="10kbs" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.0"
            android:textColor="#ffffff"
            android:gravity="right"
            android:text="Unlimited Bandwidth" />
    </LinearLayout>

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:textAppearanceSmall" />

    <TextView
        android:id="@+id/TextView02"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="WiFi Time Limit"
        android:textColor="#ffffff"
        android:textAppearance="?android:textAppearanceMedium" />

    <TimePicker
        android:id="@+id/timeEdit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:layout_weight="1.0" />

    <EditText
        android:id="@+id/codeEdit"
        android:inputType="textUri"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:lines="1"
        android:hint="@string/code_hint"
        android:imeOptions="actionNext" />

      <Button android:id="@+id/saveBtn" 
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_marginTop="15dp"
         android:layout_gravity="center_horizontal"
         android:text="@string/save_btn"/>
   </LinearLayout>
</ScrollView> 
```

AddEditCountry.java（包含 TimePicker 按钮的布局的 Java 文件）

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

     private long rowID; 
     private EditText nameEt;
     private EditText capEt;
     private EditText codeEt;
     private TimePicker timeEt;

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState); 
          setContentView(R.layout.add_country);

          nameEt = (EditText) findViewById(R.id.nameEdit);
          capEt = (EditText) findViewById(R.id.capEdit);
          codeEt = (EditText) findViewById(R.id.codeEdit);
          timeEt = (TimePicker) findViewById(R.id.timeEdit);

          Bundle extras = getIntent().getExtras(); 

          if (extras != null)
          {
             rowID = extras.getLong("row_id");
             nameEt.setText(extras.getString("name"));  
             capEt.setText(extras.getString("cap"));  
             codeEt.setText(extras.getString("code"));    
             String time = extras.getInt("time");
             String[] parts = time.split(":");
             timeEt.setCurrentHour(parts[0]);
             timeEt.setCurrentMinute(parts[1]);
          }

          Button saveButton =(Button) findViewById(R.id.saveBtn);
          saveButton.setOnClickListener(new OnClickListener() {

              public void onClick(View v) 
              {
                 if (nameEt.getText().length() != 0)
                 {
                    AsyncTask<Object, Object, Object> saveContactTask = 
                       new AsyncTask<Object, Object, Object>() 
                       {
                          @Override
                          protected Object doInBackground(Object... params) 
                          {
                             saveContact();
                             return null;
                          }

                          @Override
                          protected void onPostExecute(Object result) 
                          {
                             finish();
                          }
                       }; 

                    saveContactTask.execute((Object[]) null); 
                 }

                 else
                 {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                 }
              } 
         });
       }

           private void saveContact() 
           {
              DatabaseConnector dbConnector = new DatabaseConnector(this);

              if (getIntent().getExtras() == null)
              {
                  dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString() + ":"
                              + timeEt.getCurrentMinute().toString(),
                          codeEt.getText().toString());
              }
              else
              {
                 dbConnector.updateContact(rowID,
                         capEt.getText().toString(),
                         timeEt.getCurrentHour().toString() + ":"
                             + timeEt.getCurrentMinute().toString(),
                         codeEt.getText().toString());
              }
           }
} 
```

数据库连接器.java

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

    private static final String DB_NAME = "WorldCountries";
    private SQLiteDatabase database;
    private DatabaseOpenHelper dbOpenHelper;

    public DatabaseConnector(Context context) {
        dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

       public void open() throws SQLException 
       {
          //open database in reading/writing mode
          database = dbOpenHelper.getWritableDatabase();
       } 

       public void close() 
       {
          if (database != null)
             database.close();
       }       

       public void insertContact(String name, String cap, String code, String time) 
               {
                  ContentValues newCon = new ContentValues();
                  newCon.put("name", name);
                  newCon.put("cap", cap);
                  newCon.put("time", time);
                  newCon.put("code", code);

                  open();
                  database.insert("country", null, newCon);
                  close();
               }

               public void updateContact(long id, String name, String cap,String code, String time) 
               {
                  ContentValues editCon = new ContentValues();
                  editCon.put("name", name);
                  editCon.put("cap", cap);
                  editCon.put("time", time);
                  editCon.put("code", code);

                  open();
                  database.update("country", editCon, "_id=" + id, null);
                  close();
               }

               public Cursor getAllContacts() 
               {
                  return database.query("country", new String[] {"_id", "name"}, 
                     null, null, null, null, "name");
               }

               public Cursor getOneContact(long id) 
               {
                  return database.query("country", null, "_id=" + id, null, null, null, null);
               }

               public void deleteContact(long id) 
               {
                  open(); 
                  database.delete("country", "_id=" + id, null);
                  close();
               }
} 
```

view_country.xml （此时显示 currentHour - 但需要将 currentHour 和 currentMinute 一起显示为一个字符串，我可以显示为时间）

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:stretchColumns="1" 
android:layout_margin="5dp">
<TableRow>         
  <TextView 
    style="@style/StyleLabel"
    android:text="@string/name_lbl"/>
 <TextView 
    android:id="@+id/nameText" 
    style="@style/StyleText"/>         
 </TableRow>

 <TableRow>         
 <TextView 
    style="@style/StyleLabel"
    android:text="@string/cap_lbl"/>         
 <TextView 
    android:id="@+id/capText"
    style="@style/StyleText"/>         
 </TableRow>

  <TableRow>       
  <TextView 
    style="@style/StyleLabel"
    android:text="Time Limit"/>                    
 <TextView 
    android:id="@+id/codeText"
    style="@style/StyleText"/>         
 </TableRow>
 <TableRow>         
 <TextView 
    style="@style/StyleLabel"
    android:text="Linked Users"/>         
 <TextView 
android:id="@+id/codeText"
    style="@style/StyleText"/>         
 </TableRow>
 <TableRow>         
 <TextView 
    style="@style/StyleLabel"
    android:text="@string/code_lbl"/>         
 <TextView 
    android:id="@+id/timeEdit"
    style="@style/StyleText"/>  

</TableRow>

</TableLayout> 
```

日志猫：

```
03-25 12:50:45.175: D/Activity(10602): Activity.onPause(), editTextTapSensorList size: 0
03-25 12:50:45.265: I/Adreno200-EGLSUB(10602): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-25 12:50:45.276: D/memalloc(10602): ion: Mapped buffer base:0x5ca42000 size:614400 offset:0 fd:57
03-25 12:50:45.276: E/(10602): Can't open file for reading
03-25 12:50:45.276: E/(10602): Can't open file for reading
03-25 12:50:45.316: D/memalloc(10602): ion: Mapped buffer base:0x5d12f000 size:614400 offset:0 fd:61
03-25 12:50:45.326: W/IInputConnectionWrapper(10602): showStatusIcon on inactive InputConnection
03-25 12:50:45.326: W/IInputConnectionWrapper(10602): getExtractedText on inactive InputConnection
03-25 12:50:47.248: D/memalloc(10602): ion: Unmapping buffer  base:0x5ca42000 size:614400
03-25 12:50:47.248: D/memalloc(10602): ion: Unmapping buffer  base:0x5d12f000 size:614400
03-25 12:50:47.288: D/Activity(10602): Activity.onPause(), editTextTapSensorList size: 0
03-25 12:50:47.318: I/Adreno200-EGLSUB(10602): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-25 12:50:47.318: D/memalloc(10602): ion: Mapped buffer base:0x5cd67000 size:614400 offset:0 fd:58
03-25 12:50:47.388: D/memalloc(10602): ion: Mapped buffer base:0x5d05f000 size:614400 offset:0 fd:63
03-25 12:50:47.388: W/IInputConnectionWrapper(10602): getExtractedText on inactive InputConnection
03-25 12:50:48.549: D/memalloc(10602): ion: Mapped buffer base:0x5d12f000 size:614400 offset:0 fd:66 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:25:00.567

您可以通过在数据库中保留一列和一个字符串来添加分钟。然后你必须拆分`time`字符串，当设置`TimePicker`

```
String time = extras.getString("time");
String[] parts = time.split(":");
timeEt.setCurrentHour(Integer.valueOf(parts[0]));
timeEt.setCurrentMinute(Integer.valueOf(parts[1])); 
```

并在插入或更新时连接它

```
dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString() + ":"
                              + timeEt.getCurrentMinute().toString(),
                          codeEt.getText().toString()); 
```

或者保留一个单独的`hour`and `minute`。这意味着扩展数据库模式并`DatabaseConnector`处理额外的参数，但避免在需要部分时拆分​​字符串。

# android - 了解greenDao中的删除和删除关系

> ID：15610250
> 
> 赞同：8
> 
> 时间：2013-03-25T08:10:11.260
> 
> 标签：android, orm, greendao

第一个问题是，greenDao 什么时候为实体生成删除函数？`entity.delete()`调用 the和 the 有什么区别`session.getEntityDao.delete(entity)`？

其次，如果我删除一个父实体，其子实体与父实体具有 ToOne 关系，我必须自己删除子实体，不是吗？实际上没有完成自动依赖“清理”，对吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-18T14:16:56.710

`entity.delete()`要求实体“活跃”，`dao.delete(entity)`适用于所有实体。

greenDAO 中没有级联删除，您必须单独删除实体。

# javascript - 为什么 `pattern.test(name)` 连续调用的结果相反

> ID：15610251
> 
> 赞同：12
> 
> 时间：2013-03-25T08:10:13.550
> 
> 标签：javascript, regex

为什么这段代码先返回真，然后返回假

```
var pattern = new RegExp("mstea", 'gi'), name = "Amanda Olmstead";

console.log('1', pattern.test(name));
console.log('1', pattern.test(name)); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/zNkFv/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T08:14:19.987

`g`用于重复搜索。它将正则表达式对象更改为迭代器。如果您想使用该`test`函数根据您的模式检查您的字符串是否有效，请删除此修饰符：

```
var pattern = new RegExp("mstea", 'i'), name = "Amanda Olmstead"; 
```

该`test`函数与`replace`或`match`不消耗整个迭代相反，这使其处于“坏”状态。`test`使用该函数 时，您可能永远不应该使用此修饰符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-25T08:15:27.057

您不想将 gi 与 pattern.test 结合使用。g 标志意味着它会跟踪您正在运行的位置，以便可以重复使用。因此，您应该使用：

```
var pattern = new RegExp("mstea", 'i'), name = "Amanda Olmstead";

console.log('1', pattern.test(name));
console.log('1', pattern.test(name)); 
```

此外，您可以对正则表达式使用 /.../[flags] 语法，如下所示：

```
var pattern = /mstea/i; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T08:15:17.837

因为你设置了`g`修饰符。

为您的情况将其删除。

```
var pattern = new RegExp("mstea", 'i'), name = "Amanda Olmstead"; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-25T08:16:31.967

**这不是一个错误。**

导致它在第**一次匹配之后对子字符串**`g`执行下一次尝试匹配。这就是为什么它在每次偶数尝试中都返回 false 的原因。

 **```
First attempt: 
It is testing "Amanda Olmstead"

Second attempt:
It is testing "d" //match found in previous attempt (performs substring there)

Third attempt:
It is testing "Amanda Olmstead" again //no match found in previous attempt

... so on 
```

[`Regexp.exec`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec#Description)各州的 MDN 页面：

> 如果您的正则表达式使用“g”标志，您可以多次使用 exec 方法在同一字符串中查找连续匹配项。当您这样做时，搜索将从正则表达式的 lastIndex 属性指定的 str的**子字符串开始**

[`test`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)各州的 MDN 页面：

> **与 exec （或与它结合使用）一样，在同一个全局**正则表达式实例上多次调用 test将超过上一次匹配。**

# php - PHP Youtube Embed 无法滚动

> ID：15610252
> 
> 赞同：0
> 
> 时间：2013-03-25T08:10:19.587
> 
> 标签：php, video, youtube, scroll, embed

我有一个网站，人们可以在其中发布视频和图像。但是当我点击视频查看时，即使我停止视频，我也无法再滚动。我只使用 Firefox 我想知道是我的问题还是我需要在网站上进行一些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:20:38.453

我一直在你的页面源代码中寻找一点，你有几个`scrolling="no"`。
您还有一些与滚动相关的其他语句，例如
`$.scrollTo('.gag-link:eq('+(j)+')');`
显然，我无法分析您的所有代码，因为它很多，但请尝试查看您涉及 scolling 的语句

# sinatra - 使用捆绑器编写 sinatra 助手时的 LoadError

> ID：15610255
> 
> 赞同：0
> 
> 时间：2013-03-25T08:10:31.757
> 
> 标签：sinatra, bundler, helpers, modular

按照 Sinatra 编写扩展文档，我编写了一个`./lib/sinatra/test_helper.rb`包含我的 TestHelper 的文件，但是使用`rackup`start 我得到了这个错误：

```
/...PATH.../vendor/cache/ruby/1.9.1/gems/backports-3.1.1/lib/backports/tools.rb:328:in `require': cannot load such file -- sinatra/testhelper (LoadError) 
```

似乎 Bundler 可以找到我的自定义助手扩展。如何在我的 Gemfile 中声明它？

# c# - sql休眠和或限制

> ID：15610256
> 
> 赞同：0
> 
> 时间：2013-03-25T08:10:33.393
> 
> 标签：c#, sql, hibernate, restrictions

我的 sql 应该是这样的：

```
select cell1 from table
where cell2 = 1
and (cell3 = '' or cell3 is null) 
```

但是如何用hibernate做“and（x or y）”限制呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:34:33.220

[逻辑表达式](http://docs.jboss.org/hibernate/orm/3.2/api/org/hibernate/criterion/LogicalExpression.html)怎么样

试试这个**AND**条件：

```
Criteria cr = session.createCriteria(table.class);

// To get records matching with AND condistions
LogicalExpression andExp = Restrictions.and(cell2, cell3);
cr.add( andExp ); 
```

对于**OR**条件，请使用此

```
 // To get records matching with OR condistions
  LogicalExpression orExp = Restrictions.or(cell2, cell3);
  cr.add( orExp );

 List results = cr.list(); 
```

# c# - 异步 Web 服务集成 - 回调方法

> ID：15610261
> 
> 赞同：0
> 
> 时间：2013-03-25T08:10:57.867
> 
> 标签：c#, web-services

我有我的 Web 服务 Web 服务 A，它异步调用第 3 方 Web 服务 B。Web 服务 B 可以成功也可以失败。它用成功或失败信息回调 A。在这种情况下，最佳做法是什么？在 A 中创建 2 个回调端点（成功和失败），或者只创建一个可以同时处理成功和错误场景的回调。

谢谢，

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:05:21.263

我决定使用单个回调，我发现它更简单，并且最符合我的要求（因为成功和错误回调非常相似）。我还注意到，使用单个回调可以更清晰地处理部分成功。

# windows-phone-7 - 隔离存储窗口电话 7

> ID：15610262
> 
> 赞同：0
> 
> 时间：2013-03-25T08:11:01.100
> 
> 标签：windows-phone-7

我有两个文件`Name`并`Image`在我的页面上。我想将这两件事保存在数据库中，并查看所有保存的数据。

我曾经`PhotoChooserTask`选择图像并将该图像保存在隔离存储中，并使用以下代码将图像路径保存在数据库中。

```
CategoryVO newCategory = new CategoryVO()
{
    Name = txtCategoryName.Text,
    ImagePath = txtCategoryName.Text.Trim() + ".jpg"
};
Expdb.Category.InsertOnSubmit(newCategory);
Expdb.SubmitChanges(); 
```

我不知道如何在数据库表中保存图像路径意味着我保存在隔离存储中的图像路径是什么以及如何将图像从这些路径绑定到数据网格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:57:36.877

您保存在隔离存储isostore中的文件路径：/您的文件名

这取决于您将图像保存在哪个文件夹中。如果您直接保存文件而不创建文件夹，那么 isostore:/your 文件名足以引用您的图像文件。

[IsoStore 示例](http://dotnet.dzone.com/articles/new-uri-schemes-windows-phone)

# jquery - JQuery 对话框：选择确认选项后在对话框中显示消息

> ID：15610265
> 
> 赞同：1
> 
> 时间：2013-03-25T08:11:10.767
> 
> 标签：jquery, jquery-ui, jquery-dialog

我正在使用 JQuery 对话框 UI 让用户确认页面上的操作。如果是，将进行 API 调用，然后窗口将重定向。如果否，则对话框关闭。

在重定向之前，我想在实际对话框中显示“成功”消息，例如“执行此操作”。关于如何实现这一点的任何想法？

这是我的代码：

```
$( "#dialog-confirm" ).dialog({
    resizable: false,
    height:140,
    modal: true,
    buttons: 
    {
        "Yes": function() 
        {

                    var request = '123';
            var url = '<?= $this->baseURL; ?>?rn=' + request;
                $.getJSON(url, function(data) {});  
            }

            var msg = 'Action performed';

                    //?   How do I display this message in the modal dialog window???

                    $( this ).dialog( "close" );
            var url = '<?= $this->moduleURL; ?>/cancel';        
            window.location.href = url; 

        },

        "Nevermind": function() {
                $( this ).dialog( "close" );
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:15:28.800

这可能是一种方式，您清空对话框 div 并附加新文本并设置一个超时，3 秒后 diloge 关闭并发生重定向

```
$( "#dialog-confirm" ).dialog({
resizable: false,
height:140,
modal: true,
buttons: 
{
    "Yes": function() 
    {

                var request = '123';
        var url = '<?= $this->baseURL; ?>?rn=' + request;
            $.getJSON(url, function(data) {});  
        }

        var msg = 'Action performed';

        $( "#dialog-confirm" ).empty();

        $( "#dialog-confirm" ).text(msg);

 setTimeout(function() {
     $( this ).dialog( "close" );
       var url = '<?= $this->moduleURL; ?>/cancel';        
        window.location.href = url; 
}, 3000);

    },

    "Nevermind": function() {
            $( this ).dialog( "close" );
    }
}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:16:08.373

使用 AJAX 方法，并将 async 设置为 false。这将确保在继续重定向之前请求已返回。

要设置对话框内容，您可以使用`.html()`.

```
$("#dialog-confirm").dialog({
    resizable: false,
    height: 140,
    modal: true,
    buttons: {
        "Yes": function () {
            var request = '123';
            var url = '<?= $this->baseURL; ?>?rn=' + request;
            var msg = 'Action performed';
            $("#dialog-confirm").html(msg);

            $.ajax({
                dataType: "json",
                url: url,
                async: false,
                success: function (data) {
                    $("#dialog-confirm").dialog("close");
                    var url = '<?= $this->moduleURL; ?>/cancel';
                    window.location.href = url;
                }
            });
        },
        "Nevermind": function () {
            $(this).dialog("close");
        }
    }
}); 
```

# java - Arquillian 中的多个容器错误

> ID：15610267
> 
> 赞同：2
> 
> 时间：2013-03-25T08:11:17.147
> 
> 标签：java, jakarta-ee, jpa, jboss-weld, jboss-arquillian

我在一个使用焊接 CDI 和 JPA 的项目中安装 Arquillian，我正在尝试使用嵌入式 GlassFish 容器（我读到 Weld 嵌入式容器不支持 JPA）。

我在其中添加了 GlassFishContainer，`pom.xml`但是在运行测试用例时收到一条错误消息。这里 id 错误消息：

```
 Multiple service implementations found for interface 
org.jboss.arquillian.container.spi.client.container.DeployableContainer. 
org.jboss.arquillian.container.glassfish.embedded_3_1.GlassFishContainer,    
org.jboss.arquillian.container.weld.ee.embedded_1_1.WeldEEMockContainer 
```

看来我有 Weld 嵌入式容器和 glassFilsh。我仔细检查了我的`pom.xml`，我刚刚嵌入了 glassfish。我找不到任何 Weld 嵌入式容器的迹象。任何想法？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-04-26T08:41:05.043

我在使用 Maven 在 IntelliJ 中使用嵌入式 Tomcat-8 设置 Arquillian 时也遇到了这个错误。

这是我的工作（对于一个示例项目）POM：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>arquillilan.tomcat.test</groupId>
<artifactId>arquillianTest</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>jar</packaging>

<name>arquillianTest</name>
<url>http://maven.apache.org</url>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <version.org.eclipse.jdt.core.compiler>3.7</version.org.eclipse.jdt.core.compiler>
    <version.weld_servlet>1.1.9.Final</version.weld_servlet>
    <version.arquillian>1.1.5.Final</version.arquillian>
    <version.tomcat>8.5.57</version.tomcat>
</properties>

<dependencies>
    <!-- org.jboss.arquillian -->
    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-container-spi</artifactId>
        <version>${version.arquillian}</version>
    </dependency>
    <!-- https://mvnrepository.com/artifact/org.jboss.arquillian.container/arquillian-container-test-spi -->
    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-container-test-spi</artifactId>
        <version>${version.arquillian}</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.protocol</groupId>
        <artifactId>arquillian-protocol-servlet</artifactId>
        <version>${version.arquillian}</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.testenricher</groupId>
        <artifactId>arquillian-testenricher-cdi</artifactId>
        <version>${version.arquillian}</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.testenricher</groupId>
        <artifactId>arquillian-testenricher-resource</artifactId>
        <version>${version.arquillian}</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.testenricher</groupId>
        <artifactId>arquillian-testenricher-initialcontext</artifactId>
        <version>${version.arquillian}</version>

    </dependency>

    <!-- org.apache.tomcat -->
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-core</artifactId>
        <version>${version.tomcat}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-jasper</artifactId>
        <version>${version.tomcat}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat.embed</groupId>
        <artifactId>tomcat-embed-logging-juli</artifactId>
        <version>8.5.2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.eclipse.jdt.core.compiler</groupId>
        <artifactId>ecj</artifactId>
        <version>${version.org.eclipse.jdt.core.compiler}</version>
        <scope>provided</scope>
    </dependency>

    <!-- testing -->
    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <version>${version.arquillian}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
        <version>1.0.0-beta-6</version>
        <!--  2.0.0-beta-4 is not working  ** we are using old version -->
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.shrinkwrap.descriptors</groupId>
        <artifactId>shrinkwrap-descriptors-impl-javaee</artifactId>
        <version>2.0.0-alpha-5</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-api-maven</artifactId>
        <version>1.0.0-beta-6</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>

    <!-- org.jboss.weld.resources.ManagerObjectFactory -->
    <dependency>
        <groupId>org.jboss.weld.servlet</groupId>
        <artifactId>weld-servlet</artifactId>
        <version>${version.weld_servlet}</version>
        <scope>test</scope>
    </dependency>

    <!-- Hibernate dependencies -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.6.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.0.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.2.2.Final</version>
    </dependency>

    <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <version>1.3.171</version>
    </dependency>

    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-dbcp</artifactId>
        <version>7.0.40</version>
    </dependency>

    <!-- https://mvnrepository.com/artifact/org.jboss.arquillian.container/arquillian-tomcat-embedded-8 -->
    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-tomcat-embedded-8</artifactId>
        <version>1.0.1.Final</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.arquillian.container</groupId>
        <artifactId>arquillian-tomcat-common</artifactId>
        <scope>test</scope>
        <version>1.0.1.Final</version>
    </dependency>

</dependencies>

</project> 
```

我正在使用 Intellij 并配置了“Tomcat Embedded 8.x: AruillianTest”。开始测试后，我得到了异常：

> 原因：java.lang.IllegalStateException：无法将默认容器添加到注册表，因为在类路径上找到了 org.jboss.arquillian.container.spi.client.container.DeployableContainer 的多个实例（候选者是：org.jboss.arquillian.container .tomcat.embedded.TomcatEmbeddedConfiguration, org.jboss.arquillian.container.tomcat.embedded_8.TomcatConfiguration)

该问题是由 Intellij 进行的自动配置引起的。[intellij_arquillian_configuration](https://i.stack.imgur.com/PeSR1.png)显示了解决错误所必须采取的路径。

1 - 点击“编辑配置” -> 它将打开 2

2 - 选择您要使用的嵌入式 Tomcat（在我的情况下为 Tomcat 8），然后单击 3 将打开 4

4 - 依赖项 (5) 是可点击的。双击打开 6.

6 - 选择与您的 pom.xml 完全相同的版本。我在我的 pom 中使用 1.0.1.Final 但我的测试容器配置了 1.0.0.CR7 （为此屏幕截图制作；通常是“RELEASE”）。将此更改为 1.0.1.FINAL 解决了错误并且可以运行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T08:00:54.307

从 Maven 本地存储库中删除一个容器。Maven 本地存储库的默认位置是`$HOME/.m2/repository/`.

`org/jboss/arquillian/container/glassfish.embedded_3_1`如果您想使用 Weld Embedded Server 运行测试，请尝试删除else delete `org/jboss/arquillian/container/weld.ee.embedded_1_1`。

原因是，两个罐子都实现了相同的接口，而 arquillian 无法决定使用哪一个。

# macos - 如何在 MAC 中运行使用 Visual Studio 2010 开发的 Windows 应用程序？

> ID：15610274
> 
> 赞同：-3
> 
> 时间：2013-03-25T08:12:35.203
> 
> 标签：macos

在 Visual Studio 2010 中开发了一个 windows 应用程序，使用的数据库是 MS Access。MAC可以直接运行吗？即使用EXE 或者我必须做一些设置还是根本不可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:31:07.403

你不能。

EXE 是一种 Windows 可执行文件格式，因此不适用于 OS X、linux 或任何其他基于 Unix 的操作系统。如前所述，您可以使用花费金钱的类比。有一个名为 VirtualBox 的免费替代品。这不提供相同的功能，但您必须自己决定。

[https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)

[http://www.parallels.com/eu/](http://www.parallels.com/eu/)

这是如何在 MAC 上设置 VirtualBox 的指南 -> [http://www.makeuseof.com/tag/virtualbox-running-windows-on-a-mac-for-free-sort-of/](http://www.makeuseof.com/tag/virtualbox-running-windows-on-a-mac-for-free-sort-of/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:11:10.290

您根本无法在 MAC OS 中直接运行 Windows 应用程序！但是有这样一个环境，比如 - `mono`，它允许`C#`为其他操作系统编译和 .NET 平台解决方案。随意使用 google 查询 - `Mono develop`。

根据我的经验 - Mono 不稳定，也没有 Visual Studio 那样好用。

# objective-c - 单步执行程序时的不同输出

> ID：15610278
> 
> 赞同：0
> 
> 时间：2013-03-25T08:12:42.720
> 
> 标签：objective-c, pointers, struct

**编辑：** [这是](https://gist.github.com/chrissphinx/843cc29e07b8e8e989e9)程序的要点

我对此完全感到困惑，这是我的主要程序：

```
 NSString* binPath = [NSHomeDirectory() stringByAppendingString:@"/Documents/BPlusTree/BinaryCodeIndex.bin"];
    CMCodeIndex* index = [[CMCodeIndex alloc] initWithFile:binPath];

    header* h = [index header];

    NSLog(@"%hd, %hd, %hd, %hd, %hd", h->m, h->r, h->e, h->f, h->k); 
```

CMCodeIndex 类所做的只是从二进制文件中读取 5 个短值。它存储在类内部的结构中。然后我得到一个指向结构的指针并打印出值。

如果我正常运行程序，我会得到意外的输出：27728、29557、29268、25957、26157

不是标题值。但是当我在行中断`header* h = [index header];`并使用 lldb 直到打印语句时，我得到正确的值：7、56、58、11、239

这里发生了什么？我认为问题在于返回指向结构的指针和被覆盖的内存中的相关区域，但我不确定。我该如何解决它并且仍然继续返回指针而不是结构的副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:32:54.190

正如您所怀疑的，您应该使用 malloc，您的代码将变成这样：

```
header *head=(header*)malloc(sizeof(header));
head->m=( *(short*)[[binHandle readDataOfLength:2] bytes] );
head->f=( *(short*)[[binHandle readDataOfLength:2] bytes] );
head->k=( *(short*)[[binHandle readDataOfLength:2] bytes] );
head->r=( *(short*)[[binHandle readDataOfLength:2] bytes] );
head->e=( *(short*)[[binHandle readDataOfLength:2] bytes] );
h = head; 
```

原因是您将引用分配给仅存在于方法范围内的局部变量。在外面它将返回未定义。

# delphi - Firebird：模拟创建表为？

> ID：15610282
> 
> 赞同：1
> 
> 时间：2013-03-25T08:12:56.213
> 
> 标签：delphi, stored-procedures, firebird, temp-tables, create-table

我正在寻找一种方法来模拟 SP 中的 Firebird 中的“创建表作为选择”。

我们在另一个产品中经常使用这个语句，因为它很容易制作更小的、可索引的集合，并在服务器端提供非常快速的结果。

```
create temp table a select * from xxx where ...
create indexes on a ...
create temp table b select * from xxx where ...
create indexes on b ...

select * from a
union
select * from b 
```

或者避免子查询中的三个或更多级别。

```
select * 
from a where id in (select id 
                    from b 
                    where ... and id in (select id from c where)) 
```

“create table as select”非常好，因为它提供了正确的字段类型和名称，所以我不需要预定义它们。

我可以用 Delphi 在 Firebird 中模拟“创建表为”：

选择不带行，获取表字段类型，将它们转换为创建表 SQL，运行它，然后“插入临时表”+ 带行的 selectsql（无排序依据）。没关系。

但是我可以在一个通用的存储过程中创建相同的东西来获取一个选择 sql，并用结果创建一个新的临时表吗？

那么：我可以获取查询结果的字段类型，我可以从它们创建字段创建者 SQL 吗？

我只是问是否有办法（然后我必须指定列）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:06:02.920

Firebird 不支持在存储过程中执行 DDL。您可以使用[EXECUTE STATEMENT](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-psql-execstat.html)执行此操作，但不建议这样做（请参阅“未[返回数据](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-psql-execstat.html#langrefupd25-psql-execstat-nooutput)”主题末尾的警告）。

拥有“临时集”的一种方法是使用（事务级）[Global Temporary Table](http://www.firebirdsql.org/file/documentation/reference_manuals/reference_material/html/langrefupd25-ddl-table.html)。创建 GTT 作为数据库的一部分，使用正确的数据类型但没有约束（当您只填充一些列而不是全部时，这些可能会进入方式） - 然后每个事务只能看到它自己的表和数据版本......

# javascript - 使用 JavaScript 的文本框自动完成功能

> ID：15610288
> 
> 赞同：0
> 
> 时间：2013-03-25T08:13:21.603
> 
> 标签：javascript, jpa, spring-mvc

我在我们的 Web 应用程序中使用带有 JPA 和 JavaScript 的 Spring MVC (3.x)。这里有一个关于使用 javascript 的文本框自动完成功能的问题...

1 - 在 DAOImpl 层我有

```
public List<String> getProjectServiceList() 
   {
    Query query = getEntityManager().createQuery("Select DISTINCT  
    req.projectServiceName from Request req where req.activeInd=1");
    List<String> projectServiceList = query.getResultList();
    return projectServiceList;

} 
```

2 - 在 RequestController.java 我设置了模型属性 projectServiceList

```
List<String> projectServiceList = getRequestService().getProjectServiceList();
    model.addAttribute("projectServiceList", projectServiceList); 
```

3 - 现在在 JSP 中，我已经在带有 foreach 标记的选择框中列出了所有结果

```
<tr>
<td>Project/Service Name</td>
<td><select name="searchBean.projectServiceName" id="searchBean.projectServiceName" >
<option value="">All</option>
    <c:forEach items="${projectServiceList}" var="entry">
    <option value="${entry}" ${entry == baseBean.searchBean.projectServiceName  
? 'selected' : ''}>${entry}</option>
    </c:forEach>
    </select>
</td>
</tr> 
```

但我的问题是如何使用java脚本对自动完成文本框做同样的事情（我在jsb中有模型属性'projectServiceList'有所有列表）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:52:49.273

你有两个选择：

*   您可以使用其所有选项呈现您选择的 html 组件，并找到一个可以将其转换为自动完成字段的自动完成组件
*   您呈现自动完成组件并有一个外部请求，该请求将要求您的控制器发回一些数据（xml/json）。

这两种解决方案都包含几个可以解决问题的自动完成组件。想到的两个是：

*   [http://nicolasbize.github.com/magicsuggest/](http://nicolasbize.github.com/magicsuggest/)
*   [http://ivaynberg.github.com/select2/](http://ivaynberg.github.com/select2/)

# jquery - 如何使用 AJAX 调用 Rails Create 动作

> ID：15610292
> 
> 赞同：0
> 
> 时间：2013-03-25T08:13:46.327
> 
> 标签：jquery, ruby-on-rails-3.2, youtube-api

我正在使用 Youtube UploadWidget API，我想将 Youtube 返回的数据发送到控制器中的创建操作。我目前正在这样做，但它不起作用

```
$.get('/posts/create?param1=blah&param2=blahblah') 
```

在控制台中，url 看起来是正确的，但不是调用 create 而是调用 show

```
Started GET "/posts/create?title=dsd&video=true&content=32OwWeyqXsc&event=[object%20Object]" for 128.12.174.98 at 2013-03-25 07:48:06 +0000 
```

PostsController 处理#show as */*

我应该怎么做才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T16:46:42.797

您需要使用 POST http-verb。看看[rails 路线](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)。

```
$.post('/posts?param1=blah&param2=blahblah') 
```

我不知道这是否像写的那样工作，因为上面的代码没有回调：[http](http://api.jquery.com/jQuery.post/) ://api.jquery.com/jQuery.post/ 另请注意，“创建”不是 url 的一部分。

我建议使用这样的表格，我在我的项目中使用过：

```
paramObj = {param1: "blah", param2: "blahblah"};
callback = function(data){/*...*/};
url = "/posts";
$.post(url,paramObj,callback); 
```

# c - 是否有可能克隆 xmlTextReader（或多遍阅读）？

> ID：15610303
> 
> 赞同：1
> 
> 时间：2013-03-25T08:14:23.250
> 
> 标签：c, xml, xml-parsing, libxml2, xmlreader

我目前必须修复现有应用程序以使用[libxml2的](http://www.xmlsoft.org/index.html)[DOM 接口](http://xmlsoft.org/html/libxml-tree.html)以外的其他东西，因为事实证明它传递的 XML 文件太大以至于无法加载到内存中。

我已经重写了数据加载，从遍历 DOM 树到现在大部分都使用[xmlTextReader](http://www.xmlsoft.org/html/libxml-xmlreader.html)，没有太多问题。（我`xmlNewTextReaderFilename`用来打开本地文件。）

然而事实证明，大数据所在的子树必须不按顺序读取，但我必须先收集一些（少量）数据。（而问题正是这个子树包含大量数据，因此仅将这个子树加载到内存中也没有多大意义。）

最简单的方法是“克隆”/“复制”我当前的阅读器，提前阅读，然后返回到原始实例继续阅读。（似乎我[不是第一个](http://p2p.wrox.com/xml/40493-cloning-xmltextreader.html)......甚至在 C# 端实现了一些东西：[XML Reader with Bookmarks](http://msdn.microsoft.com/en-us/library/aa302292.aspx)。）

但是似乎没有任何方法可以“复制” xmlTextReader 的状态。

如果我不能重新读取文件的*一部分*，我也可以重新读取*整个*文件，虽然很浪费，但在这里还可以，但我仍然需要记住我之前在哪里？

是否有一种简单的方法可以记住 xmlTextReader 它在当前文档中的位置，以便我以后可以在第二次读取文档/文件时再次找到该位置？

这是一个问题示例：

```
<root>
  <cat1>
    <data attrib="x1">
      ... here goes up to one GB in stuff ...
    </data>
    <data attrib="y2"> <!-- <<< Want to remember this position without having to re-read the stuff before -->
      ... even more stuff ...
    </data>
    <data attrib="z3">
       <!-- I need (part of) the data here to meaningfully interpret the data in [y2] that 
            came before. The best approach would seem to first skip all that data
            and then start back there at <data attrib="y2"> ... not having to re-read
            the whole [x1] data would be a big plus! -->
    </data>
  </cat1>
  ...
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:42:14.823

我想根据我[在 XML 邮件列表中学](https://mail.gnome.org/archives/xml/2013-March/msg00050.html)到的内容给出一个解决方法：

没有简单的方法可以“克隆” xmlReader 上的状态，但是应该可能并且也应该很容易的是计算对文档所做的读取。

也就是说，要使用 xmlReader 读取文档，您可能必须调用以下命令：

```
// looping ...
status = ::xmlTextReaderRead(pReader); 
```

如果您以结构化的方式执行此操作（例如，我最终编写了一个小包装类来封装我对 xmlReader 的使用模式），那么添加一个计数器相对容易：

```
// looping ...
status = ::xmlTextReaderRead(pReader);
if (1 == status) { // success
  ++m_ReadCounter;
} 
```

对于重新阅读文档（到达某个位置），您只需调用`xmlTextReaderRead`多次`m_ReadCounter`，丢弃结果，直到您到达要重新开始的位置。

是的，您必须重新解析整个文档，但这可能已经足够快了。（实际上可能比缓存文档的很大一部分更好/更快。）

# mysql - 使用嵌入式选择的 SQL 语句

> ID：15610306
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:14:31.743
> 
> 标签：mysql, sql, select

好的，这有效：

```
SELECT DISTINCT(USER), COUNT(DISTINCT (USER)) AS numrows 
FROM `sometable` 
GROUP BY USER 
ORDER BY USER asc 
LIMIT 0, 20 
```

我现在需要做的是将结果限制为 numrows > X。使用嵌入式选择尝试了许多解决方案，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:15:53.057

```
SELECT
    DISTINCT(USER),
    COUNT(DISTINCT (USER)) AS numrows
FROM
    `sometable`
GROUP BY
    USER
HAVING
    COUNT(DISTINCT (USER)) > 10
ORDER BY
    USER asc
LIMIT 0, 20 
```

`HAVING`类似于`WHERE`，但应用于已经分组的数据。您可以使用它来过滤掉一些不符合您要求的组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:15:38.150

您可以省略`DISTINCT`关键字，因为您已经对其进行了分组。要从聚合列中过滤掉结果，请使用`HAVING`：

```
SELECT  USER, 
        COUNT(DISTINCT USER) AS numrows 
FROM    sometable 
GROUP   BY USER 
HAVING  COUNT(DISTINCT USER) > ???  -- << define the value here
ORDER   BY USER asc 
LIMIT   0, 20 
```

`HAVING`并且`WHERE`是过滤关键字，但它们的区别在于`HAVING`支持使用将被过滤而不能被过滤的聚合函数`WHERE`。

# c# - 更改为 UTF-8 的代码

> ID：15610310
> 
> 赞同：0
> 
> 时间：2013-03-25T08:15:00.380
> 
> 标签：c#, csv

我有一个用于将数据表转换为 csv 的 C# 代码。我的代码是

```
foreach (DataRow row in dt.Rows)
    {
        IEnumerable<string> fields = row.ItemArray.Select(field => field.ToString());
        foreach (var item in fields)
        {
            sb.AppendFormat("\"{0}\",", item.Replace("\"", "\"\""));
        }
        sb = sb.Remove(sb.Length - 1, 1);
        sb.Append("\n");

    }

    string attachment = "attachment; filename=mycsvfile.csv";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.ContentType = "application/csv";

    Response.Write(sb.ToString());
    Response.End(); 
```

有人知道如何将 csv 更改为 utf-8 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:22:48.390

我不知道你到底在做什么，但是有一个名为的类`System.Text.Encoding`有一个`static property`被调用的`UTF8`。使用它，您可以将字符串编码为`UTF-8`

```
System.Text.Encoder utf8enc = System.Text.Encoding.UTF8.GetEncoder(); 
```

编码器提供了对文本进行编码的方法。`System.Text.Decoder`-class也是如此。

请参阅[MSDN](http://msdn.microsoft.com/de-de/library/system.text.encoding.utf8.aspx)以供参考。

# java - 属性文件可以有任何文件扩展名

> ID：15610312
> 
> 赞同：3
> 
> 时间：2013-03-25T08:15:16.427
> 
> 标签：java, file-extension, properties-file

属性文件可以有任何文件扩展名，比如`.txt`？或者他们只会正常工作`.properties`？我可以使用自定义文件扩展名`.foo`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:18:32.867

是的，您可以给属性文件起任何名称。

使用可识别文件类型的好处是人类和计算机无需查看实际内容即可了解内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:18:12.740

它可以有任何扩展名，扩展名无关紧要。但是随后就很难识别该文件。许多操作系统根据其扩展名识别文件的类型，因此最好坚持使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:21:01.123

使用 Properties.load(InputStream inStream) 方法将属性文件加载到 Properties 对象中。我们可以从任何文件或其他来源将任何字节流传递给此方法。当然，这些字节应该代表有效的属性数据。

# c++ - 错误 C2064：术语不计算为采用 1 个参数和递归问题的函数

> ID：15610322
> 
> 赞同：0
> 
> 时间：2013-03-25T08:15:40.920
> 
> 标签：c++

首先，我已将我的代码上传到粘贴 bin，下面的链接供任何感兴趣的人使用。我遇到的问题正如标题所说，但更多的是我如何将本地字符串变量从函数传递到全局变量对象的问题。我在网上搜索了好几个小时的解决方案是通过引用传递，这很好，但实际上将它应用到我的代码是我窒息和花费大量时间感到困惑的地方。这总结了我的第一个问题，我的第二个问题与我创建的构造函数有关，尽管事实上我没有在函数中调用任何函数，但由于某种原因它们是递归的。这个错误完全让我陷入了循环（没有双关语）。不管，

[http://pastebin.com/Mm1K4d2t](http://pastebin.com/Mm1K4d2t)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:27:58.507

这是一个递归构造函数

```
Date::Date()
{
    Date Date;
    Date.year=0;
    Date.day=0;
    Date.month="";
} 
```

构造对象时调用构造函数。你在这个构造函数中做的第一件事是什么？构造一个对象！因此递归。你想写的是

```
Date::Date()
{
    year=0;
    day=0;
    month="";
} 
```

您还犯了一些其他类似的错误，这些错误似乎都与对成员变量如何工作的误解有关。例如这个

```
 static string Date::getMonth(); 
```

应该是这个

```
 string getMonth(); 
```

和这个

```
string Date::getMonth()
{
        Date Date;
        return Date.month;
} 
```

应该是这个

```
string Date::getMonth()
{
        return month;
} 
```

setMonth 需要进行类似的更改。

恐怕我不明白你关于全局对象和本地对象的问题，但考虑到你的误解，我很确定这是假的。进行上述更改（和 setMonth），然后查看您的位置。重读 C++ 书中有关对象的相应章节也是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:36:17.593

当你写例如

```
return Date.month; 
```

您尝试访问`month`成员，而不是*对象*，而是直接在*类*中。这不起作用，因为成员在类中*声明*，但存在于*object*中。

如果要访问当前对象中的成员，则无需为其添加前缀，只需使用它：

```
return month; 
```

# java - 在保留 IV 的同时更改 Cipher 加密/解密模式

> ID：15610329
> 
> 赞同：0
> 
> 时间：2013-03-25T08:16:13.403
> 
> 标签：java, cryptography, mifare

与 DESfire EV1 标签交互时，AES-CBC 用于保护通信。加密并发送消息后，需要使用加密产生的 IV 对响应进行解密：

```
Cipher c = Cipher.getInstance("AES/CBC/NoPadding");
c.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(zeroBytes));

byte[] encrypted_response = transceive(c.doFinal(message));

// TODO: cipher needs to be re-set to DECRYPT_MODE while retaining the IV
c.init(Cipher.DECRYPT_MODE, ...?);

byte[] response = c.doFinal(encrypted_response); 
```

不幸的是，Cipher.getIV() 返回初始 IV（全为零），似乎没有办法让 IV 缺少手动实现整个 CBC 部分。在[加密字节后从密码获取更新的 IV](https://stackoverflow.com/questions/7642871/get-updated-iv-from-cipher-after-encrypting-bytes)中提出了一个类似的问题，但是只提供了特定于 CTR 的解决方案，这些解决方案不适用于 CBC 模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:25:17.817

您在此处将 encrypt IV 设置为全零：

```
new IvParameterSpec(zeroBytes) 
```

因此，如果您使用随机字节，然后将这些随机字节作为您的 iv，请自己跟踪它们。

*更新*

从您的评论看来，您可能正在尝试重新开始解密中游或中块，使用 CBC 模式，您可以使用前一个密文块作为您的 IV，只要您在流或块中块对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:00:47.250

您可以`Cipher`通过调用从对象中获取 IV `c.getIV()`，这将返回一个包含 IV 数据的字节数组。然后，您可以将其插入解密端的 IVParametersSpec

也就是说，您`init`错误地使用了 Cipher 的方法。如果您在调用中提供 IVParameterSpec，它将不会生成内部 IV（正如您在对另一个答案的评论中所说）`init`。相反，它将使用全零的 IV，因为这就是该版本 `init`告诉它要做的事情。相反，使用 init 调用，`c.init(Cipher.ENCRYPT_MODE, secretKey)`然后使用上面`c.getIV()`的方法将 IV 取出。[在此处](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html#init%28int,%20java.security.Key%29)查看Cipher 的 javadocs以了解我的意思。

# php - 带有自定义实时域的 PHP 邮件程序 (hotmail/outlook)

> ID：15610332
> 
> 赞同：3
> 
> 时间：2013-03-25T08:16:28.073
> 
> 标签：php, outlook, live, phpmailer

我正在尝试使用自定义 Live 域通过 phpmailer 发送邮件。

我想知道`$mail->host`和`$mail->Port`我使用的是正确的。

以下是错误：

> 邮件程序错误：以下发件人地址失败：yyy@xxxx.com ：在未连接的情况下调用 Mail()

这是我的代码：

```
require("../PHPMailer_5.2.4/class.phpmailer.php");

$mail = new PHPMailer();
$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "mail.live.com"; // SMTP server
$mail->SMTPDebug  = 0;                     // enables SMTP debug information (for testing)
// 1 = errors and messages
// 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.live.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:15:48.523

我记得 PHP Mailer 已经过时并且不再被开发/支持，看看[Swift Mailer](http://swiftmailer.org/)

# mod-rewrite - mod_rewrite 重复内容

> ID：15610339
> 
> 赞同：0
> 
> 时间：2013-03-25T08:17:19.220
> 
> 标签：mod-rewrite

我喜欢摆脱重复的内容。无论有没有 www，我的网站都可以访问。所以我做了一个这样的modrewrite：

```
rewritecond %{http_host} ^example.com [nc]
rewriterule ^(.*)$ http://www.example.com [r=301,nc] 
```

我的问题是我仍然可以在最后有和没有 /index 的情况下访问该站点。有无.html

我喜欢在 URL 中显示索引。example.com www.example.com 全部重定向到 www.example.com/index

有和没有 html 适用于我的所有子页面。有没有办法总是删除html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T19:02:17.830

我不确定我是否理解您要执行的操作，但也许就是这样：

```
RewriteCond ${HTTP_HOST} !^www.mydomain.com$
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [L,R=permanent]
RewriteRule ^/?$ /index [L,R=permanent]
RewriteRule ^index$ index.html [L] 
```

这将强制“www”。出现在域的开头，重定向对裸域的请求或“/”重定向到/index，然后静默地重写对/index的请求，以便它们实际获取/index.html的内容。

# asp.net-mvc - KendoUI ForeignKey Column的自定义编辑器模板

> ID：15610340
> 
> 赞同：0
> 
> 时间：2013-03-25T08:17:19.020
> 
> 标签：asp.net-mvc, entity-framework, razor, kendo-ui, kendo-grid

我正在使用 KendoUI ASP Wrapper，我需要帮助将“ActivityCodeID”的默认外键编辑器更改为自动完成。我该如何改变它？

```
@(Html.Kendo().Grid<TimeEntry>()
    .Name("grid-timeentry-project")
    .DataSource(datasource => datasource.Ajax()
        .Model(model =>
                    {
                        model.Id(record => record.TimeEntryID);
                        model.Field(f => f.TimeSheetID).DefaultValue(0);
                        model.Field(f => f.TimeEntryTypeID).DefaultValue(ViewBag.ProjectTimeEntryTypeId);
                        model.Field(f => f.ActivityCodeID);
                        model.Field(f => f.Description);
                        model.Field(f => f.Duration);
                        model.Field(f => f.DateAdded);                     
                    })
        .Read(read => read.Action("GetProjectTimeEntries", "TimeEntry"))
    )
    .Columns(columns =>
                 {
                     columns.Bound(r => r.TimeEntryID).Hidden(true);
                     columns.Bound(r => r.TimeSheetID).Hidden(true);
                     columns.Bound(r => r.TimeEntryTypeID).Hidden(true);
                     columns.ForeignKey(r => r.ActivityCodeID, (System.Collections.IEnumerable)ViewData["AllActivityCodes"], "ActivityCodeID", "ActivityCode1").Title("ActivityCode");                                         
                     columns.Bound(r => r.Description);
                     columns.Bound(r => r.Duration).Title("Duration (s)");
                     columns.Command(command => { command.Edit(); command.Destroy(); }).Width(170);
                 })
      ) 
```

我尝试修改我的 EF 模型的 DataAnnotation 并声明了 EditorTemplate，但它仍在使用默认的“GridForeignKey”编辑器模板。

这是我的 EF。

```
[MetadataType(typeof(TimeEntryMetaData))]
public partial class TimeEntry
{
}

public class TimeEntryMetaData
{
    [UIHint("ActivityCodeIDEditor")]
    public int ActivityCodeID { get; set; }
} 
```

这是我的“ActivityCodeIDEditor”编辑器模板。我无法获得“asdf”，因此假设不考虑编辑器模板。

```
 @model object
<span>asdf</span>
@*@(
 Html.Kendo().DropDownListFor(m => m)        
        .BindTo((SelectList)ViewData[ViewData.TemplateInfo.GetFullHtmlFieldName("") + "_Data"]) 
```

请帮忙。谢谢！)*@

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T20:56:10.877

有一种特殊的列方法可以让您指定编辑器模板的名称。尝试

```
columns.bound(x=>x.some).EditorTemplateName("foo"); 
```

# siebel - 我想通过单击按钮刷新 siebel 中的视图

> ID：15610342
> 
> 赞同：1
> 
> 时间：2013-03-25T08:17:22.247
> 
> 标签：siebel, escript

我正在使用 siebel v 8.0。

单击小程序中的按钮时，我想刷新视图。

单击按钮时，我需要浏览器脚本中的一些代码来刷新视图。

我努力了

```
1\. this.BusComp().InvokeMethod("RefreshRecord");
2\. this.BusComp().InvokeMethod("RefreshBusComp");
3\. theApplication().InvokeMethod("RefreshBusComp"); 
4\. theApplication().GetService("FINS Teller UI Navigation").InvokeMethod ("RefreshCurrentApplet", theApplication(). NewPropertySet(), theApplication().NewPropertySet()); 
```

但他们都没有工作。但我需要刷新整个视图而不是当前的小程序。请帮忙。.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T02:42:58.553

在使用 BS:FINS Teller UI Navigation 时，尝试将参数“Refresh All”传递为 true。

```
var svcUI = TheApplication().GetService("FINS Teller UI Navigation");
var psIn = TheApplication().NewPropertySet();
var psOut = TheApplication().NewPropertySet();
psIn.SetProperty("Refresh All","Y");
svcUI.InvokeMethod("RefreshCurrentApplet",psIn,psOut); 
```

如果这仍然对您不起作用，您可以尝试使用 javascript 刷新视图，假设您的应用程序处于高交互性状态。在 javascript 中使用 window.location.reload() 来刷新整个视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T09:29:16.580

在 Applet 上拦截 Browser Side Script 上的按钮单击事件，并从 Browser Side Script 调用自定义业务服务。业务服务使用的服务器端脚本

```
TheApplication().GoToView("Name Of View to Refresh"); 
```

将“视图名称”和其他参数从浏览器传递到服务器端以维护上下文，这将使其通用且可重用。最后，您将刷新视图。

# vbscript - 从 txt 文件中删除特定行和一个符号

> ID：15610344
> 
> 赞同：0
> 
> 时间：2013-03-25T08:17:25.873
> 
> 标签：vbscript

嘿伙计们，我写了一个小 vbs 来打开一个 txt 文件并删除一些行和`\`每一行。一切正常，但我的源文件的最后一行被多次写入目标文件。它只有最后一行，所有其他行都写一次。那么我的代码有什么问题？这就是我所做的：

```
Option Explicit
Dim strLine 
Dim strNewLine 
Dim strRawPath
Dim strRawPathW
Dim WshShell
Dim f
Dim w
Dim fs
Dim fsw
Dim x

x = 0

strRawPath = "C:\xampp_neu\xampp\htdocs\tc_backup\stasknoheader.txt"
strRawPathW = "C:\xampp_neu\xampp\htdocs\tc_backup\stask.txt"

Set WSHShell = WScript.CreateObject("WScript.Shell") 
Set fs = CreateObject("Scripting.FileSystemObject")
Set fsw = CreateObject("Scripting.FileSystemObject")

        ' 2 = ForWriting
        Set f = fs.OpenTextFile(strRawPath,1)
        Set w = fsw.OpenTextFile(strRawPathW,2)

            Do While f.AtEndOfStream <> True
                x = x+1
                ReDim Preserve myArray(x)
                strLine = f.Readline
                myArray(x) = strLine

                 If InStr(strLine, "Microsoft") = 0 Then
                    If InStr(strLine, "TaskName") = 0 Then
                        If InStr(strLine, "Restart System") = 0 Then
                            IfInStr(strLine,"SchedulerHSMmigTC11TDrive") = 0 Then

                        strNewLine = strLine
                        strNewLine =(Replace(strLine,"\","",1,1))
                            End If
                        End If
                    End If
                End If                  

                w.write strNewLine & VbCrLf

            Loop 

        f.Close
        w.Close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:38:54.743

You need just move `w.write strNewLine & VbCrLf` inside `IF` statetment, after `strNewLine =(Replace(strLine,"\","",1,1))` string.

# bash - 在 ls 命令输出的最后一个字段中添加双引号

> ID：15610346
> 
> 赞同：0
> 
> 时间：2013-03-25T08:17:46.797
> 
> 标签：bash, unix, scripting, sed, awk

我正在编写一个shell脚本，它将使用ls命令在目录中查找文件（ZIP）并将它们解压缩到目的地，问题是文件名之间有空格，所以当脚本扫描它时只考虑名称之后空间

示例：如果文件名是 "ab c.zip" ，只有 c.zip 被认为是文件名，然后它说文件未找到。

所以请让我知道如何处理这个

我想如果我可以用双引号将文件名括起来，它应该可以工作。所以我正在寻找如何将双引号添加到 ls 命令的最后一个字段。我需要 ls 命令的所有字段，因为我在解压缩之前也在检查文件大小和时间戳，所以我只需要用双引号将文件名括起来，这是 ls 命令的最后一个字段。

问候， 沙迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:32:26.813

我建议你使用 Bash 的*通配符模式*（它会为你处理空格）来获取文件列表，然后使用`stat`命令来获取有关特定文件的信息。例如：

```
$ ls -l
total 1
-rw-r--r-- 1 root root 0 2013-03-25 16:27 a b c.txt
-rw-r--r-- 1 root root 0 2013-03-25 16:27 d e f.txt
$ for file in *.txt; do stat "$file"; done
  File: `a b c.txt'
  Size: 0               Blocks: 1          IO Block: 131072 regular empty file
Device: 3dd0002h/64815106d      Inode: 455629      Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2013-03-25 16:27:35.388291856 +0800
Modify: 2013-03-25 16:27:35.388291856 +0800
Change: 2013-03-25 16:27:35.388310939 +0800
  File: `d e f.txt'
  Size: 0               Blocks: 1          IO Block: 131072 regular empty file
Device: 3dd0002h/64815106d      Inode: 455630      Links: 1
Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)
Access: 2013-03-25 16:27:35.388401772 +0800
Modify: 2013-03-25 16:27:35.388401772 +0800
Change: 2013-03-25 16:27:35.388412772 +0800
$ 
```

请注意，它`stat`有一个`--format`选项，因此您可以告诉它只为您提供您对文件感兴趣的信息。

# asp.net - 在实体框架中，如何删除具有外键约束的记录？

> ID：15610347
> 
> 赞同：1
> 
> 时间：2013-03-25T08:17:49.833
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我有一种方法可以删除数据库中的“项目”记录，以及与之关联的所有“选项”。

```
public bool DeleteProjectById(int id)
{
    using (DbContext db = new DbContext(ConfigHelper.Instance().ConnectionString))
    {
        try
        {
            foreach (var entity in db.ProjectOptionItems.Where(o => o.ProjectId == id))
                db.ProjectOptionItems.DeleteObject(entity);

            db.SaveChanges();

            var project = db.Projects.SingleOrDefault(o => o.Id == id);
            db.Projects.DeleteObject(project);

            db.SaveChanges();
            return true;
        }
        catch (Exception e)
        {
            ErrorLoggingService.Log(this, e);
            return false;
        }
    }
} 
```

这工作正常。但是，如果我注释掉对**db.SaveChanges**的第一次调用，这就是我希望代码的方式，这将导致 SQL 异常（*DELETE 语句与 REFERENCE 约束冲突*）。

对 SaveChanges() 进行两次调用是可行的，但肯定不是这样做的。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T08:24:51.783

就像 AliRiza 所说，将它设置在您的 SQL 服务器中。另外在你的`DbContext`课堂上使用它：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<ProjectOptionItems>().WillCascadeOnDelete();
} 
```

# android - Android 应用程序在 3G 下运行良好，但在 WIFI 下无法正常运行

> ID：15610348
> 
> 赞同：0
> 
> 时间：2013-03-25T08:18:01.130
> 
> 标签：android, android-wifi, 3g

这是我的播放视频应用程序它在 3G 中运行良好，但它通过 WIFI 强制关闭这是代码：

```
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.widget.MediaController;
import android.widget.VideoView;

public class Video extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video);

        String path="http://commonsware.com/misc/test2.3gp";

        Uri uri=Uri.parse(path);
        MediaController mc = new MediaController(this);

        VideoView video=(VideoView)findViewById(R.id.videoView);
        mc.setAnchorView(video);
        mc.setMediaPlayer(video);
        video.setMediaController(mc);
        video.setVideoURI(uri);
        video.start();
    }

} 
```

这是清单

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

这是 logCat

```
03-25 09:25:27.019: W/IInputConnectionWrapper(20221): showStatusIcon on inactive InputConnection
03-25 09:25:32.359: I/MediaPlayer(20221): uri is:http://commonsware.com/misc/test2.3gp
03-25 09:25:32.359: I/MediaPlayer(20221): path is null
03-25 09:25:32.359: D/MediaPlayer(20221): Couldn't open file on client side, trying server side
03-25 09:25:32.489: D/VideoView(20221): onMeasure()
03-25 09:25:32.489: I/VideoView(20221):     Setting size: 320x240
03-25 09:25:32.569: D/VideoView(20221): onMeasure()
03-25 09:25:32.569: I/VideoView(20221):     Setting size: 320x240
03-25 09:25:32.699: E/MediaPlayer(20221): error (1, -2147483648)
03-25 09:25:32.699: E/MediaPlayer(20221): Error (1,-2147483648)
03-25 09:25:32.699: D/VideoView(20221): Error: 1,-2147483648 
```

在屏幕上出现：“无法播放此视频”任何线索？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:32:45.177

我犯了一个错误，通过 wifi 我必须通过防火墙，但我忘了在那个设备上这样做，这是我的失败。

感谢大家

# django - django 基于函数的通用视图迁移到基于类的视图

> ID：15610352
> 
> 赞同：1
> 
> 时间：2013-03-25T08:18:08.570
> 
> 标签：django, django-views

我最近从 django 1.4 迁移到 django 1.5，我收到了这个错误

```
ViewDoesNotExist: Could not import django.views.generic.date_based.archive_index. Parent module django.views.generic.date_based does not exist. 
```

谷歌搜索给了我基于功能的视图已被贬低。我正在尝试迁移到基于类的视图，但发现它很困难。这是我的意见.py

```
from app.models import Season
from django.conf.urls import *
from cms.models import News, File

def get_extra_context():
    past_seasons = Season.objects.filter(in_progress = False)
    try:
        current_season = Season.objects.get(in_progress = True)
    except Season.DoesNotExist:
        current_season = None
    files = File.objects.all().order_by('-id')[:5]
    output = {
        'current_season': current_season,
        'past_seasons': past_seasons,
        'files': files,
        }
    return output

dictionary = {
    'queryset': News.objects.all(),
    'date_field': 'date',
    'extra_context': get_extra_context(),
}

urlpatterns= patterns(
    'django.views.generic.date_based',
    url(
        r'(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$',
        'object_detail',
        dict(dictionary, slug_field = 'slug', template_name = 'cms/news/object.html'),
        name='object'
    ),
    url(
        r'^$',
        'archive_index',
        dict(dictionary, template_name = 'cms/news/list.html'),
        name='list'
    )
) 
```

我无法将其转换为基于类的视图。任何身体都可以提供帮助。字典是我想放入上下文的对象。

提前致谢。

//鼠

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:29:42.347

我是这样做的。

```
urlpatterns = patterns(
    '',
    url(
        r'(?P<year>\d{4})/(?P<month>\w{3})/(?P<day>\d{2})/(?P<slug>[-\w]+)/$',
        DateDetailView.as_view(
            model = News,
            date_field = 'date',
            slug_field = 'slug',
            template_name = 'cms/news/object.html',
            #dict = dictionary,
        ),
        name='object'
    ),
) 
```

# paypal - 网站的应用程序提交阶段

> ID：15610357
> 
> 赞同：0
> 
> 时间：2013-03-25T08:18:27.287
> 
> 标签：paypal, paypal-adaptive-payments

我一直在为一个 PHP 驱动的网站实现几个自适应 API 调用。在[Going Live with Your Application](https://www.x.com/developers/paypal/documentation-tools/going-live-with-your-application)中多次提到“提交您的应用程序以供批准”作为获取应用程序 ID 并被允许使用生产环境的强制性步骤。

我知道网站可以使用 API，因为一些文档明确说明了这一点，但本指南似乎假设您正在为移动设备编写应用程序。

当我们谈论一个网站时，它究竟是如何工作的？我应该压缩并上传包含资产和所有内容的完整网站源，还是发送处理 PayPal 部分的 PHP 类就足够了？

[1.*是的，我们几天前曾询问过 PayPal，但从未得到答复。
2\. 这是[常见问题解答](https://stackoverflow.com/faq)的主题：«程序员常用的软件工具 [...] 编程专业特有的实用、可回答的问题»*]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:13:56.083

当您提交应用程序时，系统会要求您提供网站的 URL 和测试用户/密码（如果适用），以便审核您的应用程序的人可以在需要时测试功能。您不需要上传实际的 PHP 代码。关于“是的，我们几天前问过 PayPal 但从未得到答复”，您是如何联系 PayPal 的？#有票吗？我想跟进看看你为什么没有得到答复。

# excel - excel宏执行多个查询和获取记录

> ID：15610367
> 
> 赞同：0
> 
> 时间：2013-03-25T08:19:14.717
> 
> 标签：excel, vba

到目前为止，我只有一个工作正常的标准数据库连接（通过菜单或工具栏）。但是我想获取三个不同时期的记录（每张纸可以有不同的查询）。在提出这个之前，我做了各种尝试，但我无法通过宏获取任何记录。我正在寻找建议或方向来实现我的要求。

单元格 A1 =“名称”。

对于，sheet1：从 testDB 中选择“名称”

for，sheet2：从 testDB 中选择“名称”，其中数据 >= abc & 日期 <=xyz

对于，sheet3：从 testDB wehre 数据中选择“名称”> = xyx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:01:15.723

使用“开发人员”选项卡中的“记录宏”按钮记录您在使用所需参数创建此类连接时执行的所有操作。

然后停止录制并转到您的 VBA 屏幕，查看代码的外观，然后根据自己的喜好将其更改为您想要的位置，或者以这种方式录制所有三个版本。

现在将这些 VBA 代码集成到您的 VBA 脚本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:58:28.190

尝试使用 ADODB 在代码中完成所有操作。

首先，在每张纸上，在单元格 A1（可能）中创建一个新的命名范围，称为：

**“查询”和 xsheet.name**

在该单元格中放置特定于该工作表的查询

然后在 VBA 代码模块中使用此代码：

```
sub getData()

dim cn as new adodb.connection
dim rs as new adodb.recordset

dim connStr as string ' connection string
dim sUDLFile as string ' path and name of Microsoft Data Link File (UDL FILE)
dim xSheet as worksheet

connStr="File Name=" & sUDLFile

cn.open connstr

'loop through all the worksheets
for each xSheet in thisworkbook.worksheets

    with rs
        ' open the connection to the db...
        .activeconnection=cn

        'get the query from the range on the worksheet!
        sQry=xsheet.range("Query" & xsheet.name).text

        ' open the query from the DB
        .open sQry

        ' dump the dataset onto the worksheet with one line of code in B5 cell!
        xsheet.range(B5).copyfromrecordset rs
        .close
    end with
next

' clean up and release memory
cn.close
set cn=nothing
set rs=nothing
'
end sub 
```

在 MS Windows 资源管理器中创建连接字符串（UDL 文件）：

1.  导航到工作簿所在的目录
2.  右键单击并选择新建...>Microsoft 数据链接。
3.  将名称更改为好名称（可能是 name.udl）
4.  双击新文件并设置设置以创建和测试与数据库的连接

有什么问题就问吧！

菲利普

# specman - 在 specman 中创建类似 VPD 的文件

> ID：15610371
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:19:44.900
> 
> 标签：specman

我想在 Specman 模拟期间转储关于我的测试环境（如结构和变量）的数据。我知道 vcs 运行中存在这样的选项（创建 VPD 文件），但我在 specman 中找不到类似的选项。你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:47:33.723

查看 Specman 参考手册中的“wave”命令。它们允许您将 Specman 信息（结构、原始类型、事件等）转储到波形上。Specman 支持不同的波形工具 - Simvision 具有本地和最广泛的支持，但 Specman 还可以与 Synopsys DVE、MTI Modelsim 和 Novas Verdi 一起使用。

# c# - 在 Windows 窗体应用程序中处理连接字符串的最佳方法是什么？

> ID：15610374
> 
> 赞同：6
> 
> 时间：2013-03-25T08:19:51.580
> 
> 标签：c#, sql-server, app-config

我的 C# 应用程序使用`DataSet`和`TableAdapters`. 它们是从 VS2008 GUI 工具生成的。

例子：

> 右键项目->添加新项目->数据集

此方法自动将连接字符串添加到`app.config`.

但这是连接字符串的硬线方法。我想以一种简单的方式更改连接字符串。但是当我使用数据集时，连接字符串会从应用程序属性中获取。这种情况有什么解决办法吗？

![在此处输入图像描述](../Images/f8ea7dffc377bfd263057b524ebae97c.png)

**这是我在Settings.Designer.cs**文件中存储的连接字符串

```
 namespace WindowsFormsApplication2.Properties {

    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "9.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default {
            get {
                return defaultInstance;
            }
        }

        [global::System.Configuration.ApplicationScopedSettingAttribute()]
        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [global::System.Configuration.SpecialSettingAttribute(global::System.Configuration.SpecialSetting.ConnectionString)]
        [global::System.Configuration.DefaultSettingValueAttribute("Data Source=SLCERT\\SQLEMK;Initial Catalog=TestDataBase;Integrated Security=True")]
        public string TestDataBaseConnectionString {
            get {
                return ((string)(this["TestDataBaseConnectionString"])); // this is the connection string get from the dataset's
            }
        }
    }
} 
```

app.config 包含

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
    </configSections>
    <connectionStrings>
        <add name="WindowsFormsApplication2.Properties.Settings.TestDataBaseConnectionString"
            connectionString="Data Source=SLCERT\SQLEMK;Initial Catalog=TestDataBase;Integrated Security=True"
            providerName="System.Data.SqlClient" />
    </connectionStrings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:24:35.820

我相信您会问这个问题，这样您就不必在本地测试和生产/测试服务器之间手动切换。

您可能想查看[如何：在部署 Web 应用程序项目时转换 Web.config](http://msdn.microsoft.com/en-us/library/dd465318%28v=vs.100%29.aspx)

它是关于 web.config 而不是 app.config 但它是相同的想法。

附言。仅适用于 VS 2010 及更高版本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T08:29:55.413

除了 JP Hellemons 提供的进行配置转换的建议之外，您还可以做其他事情，因为只有 .NET 4.0 （本机）支持。您可以将任意数量的连接字符串添加到`<connectionStrings/>`配置文件的部分，因此添加“DebugConnectionString”和“ReleaseConnectionString”或类似内容。

现在，为了在每次更改环境时无需干预即可使用这些，您可以使用跟踪常量。在 Visual Studio 中的本地说，您正在使用`DEBUG`常量集进行编译，并且在部署发布时它不存在，那么您可以执行以下操作：

```
#if DEBUG 
    return ConfigurationManager.ConnectionStrings["DebugConnectionString"];
#else
    return ConfigurationManager.ConnectionStrings["ReleaseConnectionString"];
#endif 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T08:34:05.630

在 app.config 中

```
<configuration>
<configSections>
</configSections>
<connectionStrings>
    <add name="DBCS" connectionString="Data Source=|DataDirectory|\Database.sdf;password=Password" 
        providerName="Microsoft.SqlServerCe.Client.3.5" /> 
</connectionStrings> 
```

并像这样访问它

```
static string CS = ConfigurationManager.ConnectionStrings["DBCS"].ConnectionString.ToString(); 
```

包括

```
System.Configuration; 
```

命名空间

# java - JUnit RunNotifier 和 fireTestRunFinished

> ID：15610379
> 
> 赞同：4
> 
> 时间：2013-03-25T08:20:31.123
> 
> 标签：java, ant, junit, jboss-arquillian

我正在尝试从 Ant（1.8.2，支持 junit4）执行一些 Arquillian 测试，但似乎 Ant 任务没有调用 RunNotifier.fireTestRunFinished() 并且 Arquillian 测试运行器依靠此来取消部署 arquillian-jmx 战争从容器中。JUnit 的 Eclipse 集成调用 fireRestRunFinished 方法，一切都从那里正常工作。

我环顾了junit javadoc并在RunNotifier中看到了这个：

```
public void fireTestRunFinished(Result result)
Do not invoke. 
```

此外，类 javadoc 描述是这样说的：

> 此类的未来发展可能会将 fireTestRunStarted(Description) 和 fireTestRunFinished(Result) 移至单独的类，因为它们每次运行只能调用一次。

但它没有指定它将被移动到哪里。

查看junit的源代码，我看到调用fireTestRunFinished的唯一地方是这个方法内部：

```
/**
 * Do not use. Testing purposes only.
 */
public Result run(Runner runner) {
    Result result= new Result();
    RunListener listener= result.createListener();
    fNotifier.addFirstListener(listener);
    try {
        fNotifier.fireTestRunStarted(runner.getDescription());
        runner.run(fNotifier);
        fNotifier.fireTestRunFinished(result);
    } finally {
        removeListener(listener);
    }
    return result;
} 
```

如您所见，它说...不要调用。

我的问题是，当所有测试完成运行时，JUnit 计划如何通知自定义运行器？如果不使用当前的 API，是否还有其他可用的 API？现在我的选择是修改 Arquillian runner 以不再依赖 RunListener 或调用 RunNotifier.fireTestRunFinished 的 ant 任务。无论哪种方式，我都必须更改我不拥有的代码……这显然不是我的第一选择。

...或者我可以扩展 Arquillian 运行器，覆盖 run() 方法并执行 RunListener 在 super.run() 之后执行的操作。

有没有人看到任何其他方式解决这个问题？

# mongodb - 流星：意外的mongo退出代码100

> ID：15610385
> 
> 赞同：55
> 
> 时间：2013-03-25T08:20:47.207
> 
> 标签：mongodb, permissions, centos, meteor, samba

我刚刚将 Meteor 版本 0.5.9 (45fef52095) 安装到我的 CentOS 版本 6.3 (Final) 服务器 (Linux 版本 2.6.32-279.19.1.el6.i686 (mockbuild@c6b8.bsys.dev.centos.org) (gcc版本 4.4.6 20120305 (Red Hat 4.4.6-4) (GCC) ) #1 SMP Wed Dec 19 04:30:58 UTC 2012)

我在 apache 用户下作为 /mnt/apshared 安装了 Windows SBS 服务器的 samba 共享。我在其中创建了一个名为“webmeteor”的目录。我在“webmeteor”目录中创建了一个名为“myapp”的应用程序，所以我的目录是这样的：/mnt/apshared/webmeteor/myapp。

我以 root 身份登录。当我尝试使用该`meteor`命令运行应用程序时，我收到以下错误消息：

```
Unexpected mongo exit code 100\. Restarting.
Unexpected mongo exit code 100\. Restarting.
Unexpected mongo exit code 100\. Restarting.
Can't start mongod

MongoDB had an unspecified uncaught exception.
Check to make sure that MongoDB is able to write to its database directory. 
```

我的第一个问题是这个 StackOverflow 问题：[Creating a new meteor.js file and get error 100, MongoDB not able to write](https://stackoverflow.com/questions/14496190/creating-a-new-meteor-js-file-and-get-error-100-mongodb-not-able-to-write) - 然而，遵循这些建议（sudo'ing the meteor 命令，并检查我的磁盘空间有 70GB 可用空间）没有奏效。我很确定这些问题与许可有关。

我尝试`chown`递归到 root:root （因为我以 root 身份登录），并`chmod`递归到 777，但无济于事。

我在问你，接下来我应该尝试什么来让我的 Meteor 应用程序启动？

提前致谢。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-25T08:33:27.710

使用`meteor reset`会清除数据库中的所有数据。如果您对此感到担心，请导航到您的项目文件夹。

`cd /path/to/my/project`

在这里，您需要删除`mongodb.lock`文件。

`rm .meteor/local/db/mongodb.lock`

现在你可以使用命令运行 Meteor，

`meteor`

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-09-13T19:44:36.160

删除此文件和文件夹对我有用：

```
rm -rf .meteor/local/db/mongod.lock .meteor/local/db/journal/ 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-03-31T21:51:40.523

最后通过运行 export 修复了我的问题`LC_ALL=C`。通过本文建议的调试步骤发现错误：[https ://stackoverflow.com/a/15752736/1820510](https://stackoverflow.com/a/15752736/1820510)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-04-17T03:40:53.587

看起来可以通过从不在挂载中的目录运行流星来找到临时解决方案。Mongodb 似乎对共享不太友好，因此您需要设置 rsync 以定期将文件从共享复制到运行流星的目录。

资料来源：[在 Meteor 中运行示例的问题](https://stackoverflow.com/questions/10103830/problems-to-run-examples-in-meteor#comment17269454_10231719)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-03-03T11:58:06.820

正如其他地方所建议的那样，运行`meteor reset`解决了我在 OS X 上的问题。

**警告：`meteor reset`删除本地数据库中的所有内容。**

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-14T04:34:43.233

这对我有帮助。

1.  我删除了 .meteor/local/db/mongod.lock
2.  我杀死了mongod进程。您可以使用“ps -ef | grep mongo”找到它

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-07-03T21:43:14.640

确保该分区上有足够的可用空间。如果没有，你会得到这个错误。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-07-13T12:28:51.700

我在 Vagrant 下运行流星并遇到了这个问题，在找到这个线程之前我删除了我的 MongoDB 文件，`/var/lib/mongodb`因为那里也有一个`.lock`，这可能需要也可能不需要，但值得看看 MongoDB 可能的其他区域位于`.meteor`文件夹旁边。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-10-17T15:47:32.443

每次我重新启动流星时都会发生这个错误

```
rm .meteor/local/db/mongod.lock 
```

对我不起作用（我正在使用 cloud9 在线 IDE）

我现在做

```
rm .meteor/local/db/mongod.lock .meteor/local/db/local.* 
```

一切都恢复正常**而不会**删除我的数据库

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-11-11T12:47:09.587

我在 Windows 8.1 x64 上遇到了同样的问题：*“意外的 mongo 退出代码 100。重新启动。”* . 而“流星重置”或“删除 mongod.lock”并没有解决它。为了在启动*mongod*时显示错误详细信息，我在 run-mongo.js 文件中添加了*proc.stdout.on函数：*

```
// Let's not actually start a process if we yielded (eg during
// findMongoAndKillItDead) and we decided to stop in the middle (eg, because
// we're in multiple mode and another process exited).
if (stopped) return;

proc = spawnMongod(mongod_path, port, dbPath, replSetName);

// added this 3 lines just to debug 'Unexpected mongo exit code 100\. Restarting.'
proc.stdout.on('data', function (data) {
  console.log('stdout: ' + data);
}); 
```

然后我得到了明确的错误：

```
*********************************************************************
ERROR: dbpath (C:\Users\Pierre-André\Desktop\Pal\Meteor\simple-todos\.meteor\local\db) does not exist.
Create this directory or give existing directory in --dbpath.
See http://dochub.mongodb.org/core/startingandstoppingmongo
********************************************************************* 
```

该错误表明 db 目录不存在。然而，它存在。问题是我在路径中有一个特殊字符（我名字中的重音 é）。我将我的流星项目文件夹移动到磁盘中的另一个位置，该路径没有重音，并且工作正常。

希望这会有所帮助。

*run-mongo.js*文件位于我的电脑中：C:\Users\Pierre-André\AppData\Local\.meteor\packages\meteor-tool\1.1.10\mt-os.windows.x86_32\tools \跑步者

解决问题后不要忘记删除这3行，否则每次加载项目时都会有很多控制台日志。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-04-12T14:34:36.710

我的机器意外关机，导致了同样的问题。这些选项都没有帮助，即删除 .lock 文件或运行 export LC_ALL=C 等。
我在 Ubuntu 15.04 上。我使用指向 myApp/.meteor/local/db 的 --dbpath 选项启动 mongo，并且 mongo 启动日志清楚地表明 mongo 正在尝试从 journal 文件夹中的 journal/s 恢复数据库。它正在寻找不存在的 local.1 文件。

所以我尝试了 mongo --recovery ，它进一步指出在我拥有日志文件夹之前它不会工作。
这就是我所做的
1\. 删除了日志文件夹（将其移动到另一个位置 - 以防万一）
2\. 运行 mongo --recovery （不是 100% 确定这是否真的做了什么）
3\. 启动了流星
它开始时没有任何故障，猜猜我的所有数据都符合预期

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-04-17T06:21:07.497

第一的

> $ rm .meteor/local/db/mongodb.lock

如果这不起作用

尽可能备份

> .meteor/local/db/meteor*

和

> $流星重置

并恢复

> .meteor/local/db/meteor*

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-04-15T18:46:54.807

如果您收到类似的通知

```
Local folder has run out of space 
```

试着去

```
cd .meteor/local/bundler-cache/ 
```

并删除该目录中的所有内容。它是一个缓存，所以它不应该影响太多。它有时似乎不受控制地增长。

**编辑**

结合所有其他答案尝试

```
rm -rf .meteor/local/db/mongod.lock .meteor/local/db/local.* .meteor/local/db/journal .meteor/local/bundler-cache/linker/ 
```

如果这仍然不起作用，您可能需要释放磁盘上的一些空间。通过检查来做到这一点

```
free -m 
```

或查看您的 inode 以及通过

```
df -h 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-06-26T17:04:14.670

当我第一次在我的新笔记本电脑（Windows 10）中安装节点和流星时，我偶然发现了这个问题。我没有对默认安装进行任何更改。

Meteor 重置或从 .meteor/local/db 中删除文件对我不起作用，因为我正在创建新的应用程序以在本地运行并且目录为空。所以，我可以创建它们，但它们没有运行。还尝试使用较旧的流星版本创建应用程序，也失败了。

**在**我的情况下通过将目录更改为 c:\

> CDC：\
> 
> 流星创建testApp

这个目录也适用于我从我的电脑转移的预先存在的应用程序。我想这与 NFS 文件系统有关，我对这一切都很陌生，所以如果有人能解释更多关于它的信息，我很想了解更多。我无法使用所有可能的目录来存储我的应用程序已经令人沮丧

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-04-04T11:04:42.823

解决了！就我而言`deleting meteor/local/db/mongodb.lock`并`meteor reset`解决问题。

谢谢大家！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-03-19T14:18:28.590

我遇到了同样的问题，我解决了更改 .meteor 文件夹（MongoDB 所在的位置）的所有权

```
cd path-to-meteor-app
sudo chown -R youruser:yourgruop .meteor 
```

希望能帮助到某人！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-02-13T19:09:37.513

我可以通过删除本地 Mogo 数据库锁来恢复错误。

**删除数据库锁的步骤：**

1.  导航到你的应用程序目录（你有 Meteor 应用程序文件的地方）
2.  删除文件 $ **rm .meteor/local/db/mongod.lock**

如果 Meteor 应用程序仍在后台运行，则会发生错误。正在运行的应用程序或由于不正确的系统/应用程序关闭以及同一应用程序的第二个实例无法释放数据库锁。所以每次都要小心退出应用程序。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-09-17T20:08:41.910

我有一个类似的问题。这是因为我的项目目录是我的 Dropbox 的一部分，并且 .meteor/local/db 目录中有一些冲突的文件。删除这些解决了问题。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-08-05T13:21:27.170

我能够通过导出 LC_ALL 来修复它，我使用的是 Ubuntu

> 导出 LC_ALL="en_US.UTF-8"

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-31T18:48:21.507

我在 Windows 10 上使用 Meteor 1.4 时遇到了这个问题。但是，我正在 Ubuntu 安装上开发相同的流星应用程序。对我来说，问题是由于在 Windows 和 Ubuntu 上实现 Mongo 3.2 的方式不同造成的。我的 64 位 Ubuntu 安装使用 WiredTiger。但是，正如 Meteor[文档](https://guide.meteor.com/1.4-migration.html#update-to-mongo-3_2)中所说：

```
If you are using Windows or 32bit Linux, you can update your development
database to 3.2, however it will continue to use the MMAPv1 storage 
engine, as the 32bit MongoDB binary does not support WiredTiger. 
```

在 Windows 上使用`meteor reset`从 Ubuntu 中删除了 WiredTiger 格式的数据库，然后使用旧的 MMAPV1 引擎对其进行了重建。这解决了退出代码 100 错误。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-06-26T17:09:13.720

当我第一次在我的新笔记本电脑（Windows 10）中安装节点和流星时，我偶然发现了这个问题。我没有对默认安装进行任何更改。

Meteor 重置或从 .meteor/local/db 中删除文件对我不起作用，因为我正在创建新的应用程序以在本地运行并且目录为空。所以，我可以创建它们，但它们没有运行。还尝试使用较旧的流星版本创建应用程序，也失败了。

**在**我的情况下通过将目录更改为 c:\

`cd c:\`

```
meteor create testApp 
```

这个目录也适用于我从我的电脑转移的预先存在的应用程序。我想这与 NFS 文件系统有关，我对这一切都很陌生，所以如果有人能解释更多关于它的信息，我很想了解更多。我无法使用所有可能的目录来存储我的应用程序已经令人沮丧

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-05-30T21:55:38.267

为我工作：我将项目移动到另一个目录，因为我有 Windows 8.1。我在桌面目录中有项目，将项目更改为`C:\meteor\project`

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-10-10T12:52:05.883

对于那些在 Windows（Linux/WSL 的 Windows 子系统）上使用 bash 的人，我发现在 /mnt 目录之外创建流星应用程序可以解决问题。

当我将它安装在 /mnt/c/Workspace 的工作区中时，它每次都失败。但是，一旦我将它安装在主目录 (~) 中，它就会第一次运行。 [这是图像。](https://i.stack.imgur.com/v7Acv.png)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-04-06T06:26:22.263

如果你已经全局安装了 Mongo，那么一定要删除 /db/journal 文件夹中的所有 prealloc 文件。

对于 Ubuntu，/db/ 文件夹通常位于 /data，因此完整路径是 /data/db/journal。对于其他操作系统，这可能会有所不同。

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2016-05-07T20:58:47.727

我有同样的错误，我解决了它只是更改了 companeros 目录的名称...我知道这对初学者来说是一个错误，但我必须告诉这个以帮助人们。C:\nube\MEGA\cursos\coursera\CursowebResposivaEjemplos\compañeros\meteor_portfolio_website 不工作 C:\nube\MEGA\cursos\coursera\CursowebResposivaEjemplos\companeros\meteor_portfolio_website 工作正常。

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2016-05-12T02:32:48.933

我通过修改 /usr/local/lib/meteor 文件解决了这个问题。

在这个 bash 脚本中添加“export LC_ALL=C LANG=C”

* * *

#!/usr/bin/env bash

**导出 LC_ALL=C LANG=C**

BUNDLE_VERSION=0.5.16

* * *

# php - PHP从android应用程序的sqlite数据库中获取数据并将它们放入服务器的数据库中

> ID：15610387
> 
> 赞同：0
> 
> 时间：2013-03-25T08:20:49.813
> 
> 标签：php, android, sql

```
 public function storeLog($uuid, $log) {
    $result = mysql_query("INSERT INTO logs(unique_id, thelog) VALUES('$uuid', '$log')");
    $json = json_decode($log);

    foreach($json as $item) {
        $type = $item->type;
        if($type == "out_sms") {
            $number = $item->number;
            //$time = $item->time;
            //$time = date("Y-m-d H:i:s", $time);
            //jebna kel shi la hay el sms
            $result = mysql_query("INSERT INTO sms(UUID, TYPE, NUMBER) VALUES('$uuid', '$type', '$number')");
        }
            else if($type == "in_sms") {
            $number = $item->number;
            //$time = $item->time;
            //$time = date("Y-m-d H:i:s", $time);
            //jebna kel shi la hay el sms
            $result = mysql_query("INSERT INTO sms(UUID, TYPE, NUMBER) VALUES('$uuid', '$type', '$number')");
        }
            else if($type == "in_call") {
            $number = $item->number;
            $time_answered = $item->time_answered;
    $time_ended = $item->time_ended;
            $time_ended = date("Y-m-d H:i:s", $time_ended);
    $time_started = $item->time_started;
           $time_started = date("Y-m-d H:i:s", $time_started);
           $result = mysql_query("INSERT INTO call(UUID, TYPE, NUMBER, TIME_ANSWERED, TIME_ENDED, TIME_STARTED) VALUES('$uuid', '$type', '$number','$time_amswered', `$time_ended`, `$time_started`)");
       }
            else if($type == "out_call") {
            $number = $item->number;
            $time_ended = $item->time_ended;
            //$time_ended = date("Y-m-d H:i:s", $time_ended);
            $time_started = $item->time_started;
            //$time_started = date("Y-m-d H:i:s", $time_started); 
            $result = mysql_query("INSERT INTO call(UUID, TYPE, NUMBER, TIME_ENDED, TIME_STARTED) VALUES('$uuid', '$type', '$number', `$time_ended`, `$time_started`)");
        }
            else if($type == "data") {
            $mobile_sent = $item->mobile_sent;
            //$time = $item->time;
            $network_received = $item->network_received;
            $network_sent = $item->network_sent;
            $mobile_received = $item->mobile_received;
            $result = mysql_query("INSERT INTO data(UUID, TYPE, MOBILE_SENT, NETWORK_RECEIVED, NETWORK_SENT, MOBILE_RECEIVED) VALUES('$uuid', '$type', '$mobile_sent', '$network_received', '$network_sent', '$mobile_received')"); 
```

我是 php 语言的新手，正在我的大学期末项目中工作。问题是每个函数都可以正常工作，除了两个 in_call 和 out_call 它没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:45:35.193

您可以创建一个插入服务器并与服务器通信的 php 文件。然后你的应用程序将调用这个 php 文件，就是这样！希望这对您有所帮助。

# excel - 即使在对密码进行编码后，Excel VBA 仍会提示输入密码

> ID：15610388
> 
> 赞同：2
> 
> 时间：2013-03-25T08:20:52.450
> 
> 标签：excel, excel-2010, vba

这是我的代码示例。

```
Set book = app.Workbooks.Open(wb.Path + "/" + Excel_Name, , , , "r@w51mt35t") 
```

虽然我已经说明了打开受密码保护的 excel 文件的密码，但它仍然提示我输入受保护的 excel 文件的密码。

为了清楚起见，我正在尝试从当前活动工作簿的宏中打开另一个 excel 文件。我通过互联网搜索过，似乎没有人和我有同样的问题。

注意：受密码保护的 excel 文件也是我使用下面的代码创建的。

```
wb.SaveAs wb.path & "\" + thirdtitle + "- TestPad", FileFormat:=51, Password:="r@w51mt35t" 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:12:56.497

我认为在使用密码保护保存时，您为打开和更改设置了 2 级保护。如果是这样，您需要执行以下操作：

```
Set book = app.Workbooks.Open(wb.Path + "/" + Excel_Name, , , , "r@w51mt35t", "r@w51mt35t") 
```

因为下一个参数负责下一级保护。当然，如果两者设置相同，请检查密码。

# freebase - notable_for 和 notable_types 属性有什么区别？

> ID：15610389
> 
> 赞同：4
> 
> 时间：2013-03-25T08:20:56.270
> 
> 标签：freebase, mql

我看到 Freebase 的主题转储中有`/common/topic/notable_types`和`/common/topic/notable_for`属性。

这两者有什么区别？我假设两者都提供了值得注意的主题类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:19:31.353

你的假设是不正确的。`notable_for`可以是类型以外的东西——例如贾斯汀·比伯 ( `/m/06w2sn5`) 是著名的歌手兼词曲作者 ( `/m/016z4k`)，这是一种职业而不是类型。此外，`notable_types`是多值的，`notable_for`而是单值的。

# c++ - mfc - 使用自定义参数发送消息/发布消息

> ID：15610390
> 
> 赞同：0
> 
> 时间：2013-03-25T08:20:58.313
> 
> 标签：c++, mfc, sendmessage

我想在 MFC 中有一个消息处理程序，它接受我在消息映射中定义的任何参数。

例如，

```
static UINT UWM_STATUS_MSG = RegisterWindowMessage("Status message");
static UINT UWM_GOT_RESULT= RegisterWindowMessage("Result has been obtained");

//{{AFX_MSG(MyClass)
    afx_msg void OnCustomStringMessage(LPCTSTR);
    afx_msg void OnStatusMessage();
//}}AFX_MSG

BEGIN_MESSAGE_MAP(MyClass, CDialog)
    //{{AFX_MSG_MAP(MyClass)
        ON_REGISTERED_MESSAGE(UWM_STATUS_MSG, OnStatusMessage)
        ON_REGISTERED_MESSAGE(UWM_GOT_RESULT, OnCustomStringMessage)
    //}}AFX_MSG_MAP
END_MESSAGE_MAP()

void MyClass::OnCustomStringMessage(LPCTSTR result)
{
    m_result.SetWindowText(result);
}

void MyClass::OnStatusMessage()
{
    // Do something
}

DWORD WINAPI MyClass::thread(LPVOID lParam)
{
    char result[256] = { 0 };
    SendMessage(UWM_STATUS_MSG);

    // Do some stuff and store the result

    PostMessage(UWM_GOT_RESULT, result);
} 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:03:45.420

通过 ON_MESSAGE 或 ON_REGISTERED_MESSAGE 调用的成员函数的签名必须是：

afx_msg LRESULT OnMyFunction（WPARAM p1，LPARAM p2）；

您必须使用强制转换运算符来处理这个问题。

因此你应该这样写：

```
...
afx_msg LRESULT OnCustomStringMessage(WPARAM p1, LPARAM p2);
...

LRESULT MyClass::OnCustomStringMessage(WPARAM p1, LPARAM p2)
{
  LPCTSTR result = (LPCTSTR)p1 ;
   m_result.SetWindowText(result);
}

DWORD WINAPI MyClass::thread(LPVOID lParam)
{
    static char result[256] = { 0 };   // we need a static here
                                       // (see explanations from previous answers)
    SendMessage(UWM_STATUS_MSG);

    // Do some stuff and store the result

    PostMessage(UWM_GOT_RESULT, (WPARAM)result);
} 
```

如果 MyClass::thread 打算从几个不同的线程调用，您需要以更复杂的方式处理*结果*数组，只需将其声明为静态，例如在 MyClass::thread 中分配数组并按照建议在 OnCustomStringMessage 中删除它通过user2173190的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:33:44.290

尝试使用 WM_USER 消息作为您的自定义消息，并通过覆盖它在 OnMessage 方法中处理它。要了解 WM_USER 消息，请参阅[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644931%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:01:51.220

如果向异步消息函数（PostMessage、SendNotifyMessage 和 SendMessageCallback）发送 WM_USER 以下范围内的消息，则其消息参数不能包含指针。否则，操作将失败。这些函数将在接收线程有机会处理消息之前返回，并且发送者将在使用之前释放内存。

PostMessage 的消息参数可以包含指针 您可以包含指针作为参数。将它们转换为整数，不要在触发 PostMessage 的线程或函数上释放或释放它们，而是在接收线程或函数上释放或释放它们。只需确保在使用指针时，您只对一条消息使用一种指针类型，不要将指向不同对象的指针与相同的消息混合。

[http://msdn.microsoft.com/zh-cn/library/windows/desktop/ms644944(v=vs.85).aspx](http://msdn.microsoft.com/zh-cn/library/windows/desktop/ms644944(v=vs.85).aspx)

# mysql - 如何使用来自先前 SELECT 的 MySQL 值

> ID：15610393
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:21:02.243
> 
> 标签：mysql

我想要这样的 SQL 命令：

```
SELECT ID, SenderNumber, TextDecoded,
(SELECT DISTINCT A.Username, A.ProspectCellPhone, B.CellPhone, A.WebsiteURL
FROM Prospects A 
INNER JOIN User B ON A.Username = B.Username
WHERE A.ProspectCellPhone = '*****') AS NumSite
FROM inbox 
WHERE Processed = 'false' 
```

问题是*****部分实际上是来自先前 SELECT 的 SenderNumber。如何将先前 SELECT 中的 SenderNumber 的值用于 SELECT DISTINCT。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:23:59.467

看起来你指的是这样的查询：

```
SELECT ID, SenderNumber, TextDecoded,
(SELECT DISTINCT A.Username, A.ProspectCellPhone, B.CellPhone, A.WebsiteURL
FROM Prospects A 
INNER JOIN User B ON A.Username = B.Username
WHERE A.ProspectCellPhone = inbox.SenderNumber
) AS NumSite
FROM inbox 
WHERE Processed = 'false' 
```

这可能会返回一个错误（子查询返回超过 1 行），但是如果您可以提供有关您的问题的更多详细信息，那会更好，这样我就可以更正我的答案。

# php - find_in_set() 没有找到所有值

> ID：15610394
> 
> 赞同：1
> 
> 时间：2013-03-25T08:21:10.090
> 
> 标签：php, mysql, sql, hashtag

我的数据库中有以下记录：

```
hashtag -   description -   tags -  location -  time -  day

#social -  description - social media, facebook, social networking sites, social media, smartphone - usa - Tuesday

#php -  description - programming language, coding, open source - usa - Tuesday

#iphone -  description - smartphone, apple, iphone apps, costly phone, touch screen - usa - Tuesday 
```

这里的标签是逗号分隔的值。

现在，如果用户搜索`programming`- 结果将是`2nd row`.

```
"coding"  - 2nd row
"smartphone" - 3rd & 1st row.
"iphone" - 3rd row 
```

所以，这就像搜索标签或直接哈希关键字。第一列是`hashkeyword`。标签以逗号分隔存储在数据库中。

我正在使用`find_in_set()`它，但它似乎无法正常工作。

```
SELECT * FROM `hash`WHERE `hashtag` LIKE 'smartphone' OR find_in_set('smartphone', tags) 
```

它只返回第一行，即

```
iphone -    iphone description - smartphone, apple, apps, touchscreen - India   - tuesday 
```

但是“智能手机”值也在第三行，所以它应该返回第一行和第三行。

我哪里错了？或者有什么不同的方法可以像这样搜索而不是`find_in_set()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:42:00.247

如果逗号后有空格，则`FIND_IN_SET`无法正常工作。

它会找到 in`smartphone, apple, apps, touchscreen`但它不会找到 in `apple, smartphone, apps, touchscreen`。

对于替代解决方案，请尝试[***mysql full text search***](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:31:20.137

[find_in_set()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)的正确语法是：

```
SELECT *
FROM `tablename`
WHERE FIND_IN_SET( `column`, 'val1,val2' ) 
```

编辑：

您可以使用 LIKE 进行文本搜索：

```
SELECT *
FROM `tablename`
WHERE tags LIKE '%TAG%' 
```

# vba - 基于命名单元格范围值隐藏行？

> ID：15610396
> 
> 赞同：0
> 
> 时间：2013-03-25T08:21:17.800
> 
> 标签：vba, excel

我想创建一个宏来查看命名单元格范围的值，并根据该命名单元格中的值隐藏/取消隐藏单元格。我有一个数据验证列表，可以从中选择（a）是和（b）否，如果用户选择命名单元格“选择”（单元格“A1”），那么（a）是，那么必须隐藏第 5-10 行，否则它们必须是未隐藏的。宏不需要看和整个单元格的值，如“（a）是”，它必须只看“（a）”

到目前为止，这是我的代码，但它会产生一个错误，上面写着

> 未设置对象变量或 With 块变量

```
Private Sub Worksheet_Change(ByVal Target As Range)

Dim Cell As Range

Cell = Range("Select")

If Target.Address = Cell Then
    Select Case Left$(Cell.Value, 3)
        Case "(a)"
            Rows("5:10").Hidden = True
    End Select
Else 
    Rows ("5:10").Hidden = False
End If
End Sub 
```

怎么会做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:17:44.307

更改以下内容：

```
Cell = Range("Select") 
```

进入：

```
Set Cell = Range("Select") 
```

此外，如果你比较，你不会得到预期的结果：

```
Target.Address = Cell 
```

永远不会满足。尝试以下操作：

```
Target.Address = Cell.Address 
```

还有一个建议。您可以将两者`if`和`select`条件合二为一：

```
If Target.Address = Cell.Address And Left$(Cell.Value, 3) = "(a)" Then 
```

最后，由于 VBA 区分大小写，请记住 "(a)" <> "(A)"。

# android - 允许在调用 stopForeground(false) 后取消通知

> ID：15610399
> 
> 赞同：21
> 
> 时间：2013-03-25T08:21:26.477
> 
> 标签：android, android-service, android-notifications, android-notification-bar

我有一个媒体服务，它使用 startForeground() 在播放开始时显示通知。播放时有暂停/停止按钮，暂停时有播放/停止按钮。

```
NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(this);
// setup...

Notification n = mBuilder.build();

if (state == State.Playing) {
    startForeground(mId, n);
}
else {
    stopForeground(false);
    mNotificationManager.notify(mId, n);        
} 
```

这里的问题是当我显示/更新处于暂停状态的通知时，应该允许您将其删除。`mBuilder.setOngoing(false)`似乎没有效果，因为以前的`startForeground`覆盖它。

`stopForeground(true);`使用相同的代码调用按预期工作，但通知会在它被销毁和重新创建时闪烁。有没有办法“更新”从 startForeground 创建的通知以允许在调用 stop 后将其删除？

**编辑：**根据要求，这是创建通知的完整代码。每当播放或暂停服务时都会调用 createNotification。

```
private void createNotification() {
    NotificationCompat.Builder mBuilder = 
            new NotificationCompat.Builder(this)
    .setSmallIcon(R.drawable.ic_launcher)
    .setContentTitle("No Agenda")
    .setContentText("Live stream");

    if (android.os.Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN)
    {
        if (state == State.Playing) {
            Intent pauseIntent = new Intent(this, MusicService.class);
            pauseIntent.setAction(ACTION_PAUSE);
            PendingIntent pausePendingIntent =     PendingIntent.getService(MusicService.this, 0, pauseIntent, 0);              

            mBuilder.addAction(R.drawable.pause, "Pause", pausePendingIntent);
            //mBuilder.setOngoing(true);
        }
        else if (state == State.Paused) {
            Intent pauseIntent = new Intent(this, MusicService.class);
            pauseIntent.setAction(ACTION_PAUSE);
            PendingIntent pausePendingIntent =  PendingIntent.getService(MusicService.this, 0, pauseIntent, 0);

            mBuilder.addAction(R.drawable.play, "Play", pausePendingIntent);
            mBuilder.setOngoing(false);
        }

        Intent stopIntent = new Intent(this, MusicService.class);
        stopIntent.setAction(ACTION_STOP);
        PendingIntent stopPendingIntent = PendingIntent.getService(MusicService.this, 0, stopIntent, 0);

        setNotificationPendingIntent(mBuilder);
        mBuilder.addAction(R.drawable.stop, "Stop", stopPendingIntent);
    }
    else
    {
        Intent resultIntent = new Intent(this, MainActivity.class);
        PendingIntent intent = PendingIntent.getActivity(this, 0, resultIntent, 0);

        mBuilder.setContentIntent(intent);
    }

    Notification n = mBuilder.build();

    if (state == State.Playing) {
        startForeground(mId, n);
    }
    else {
        stopForeground(true);
        mNotificationManager.notify(mId, n);
    }
}

@TargetApi(Build.VERSION_CODES.JELLY_BEAN)
private void setNotificationPendingIntent(NotificationCompat.Builder mBuilder) {
    Intent resultIntent = new Intent(this, MainActivity.class);

    TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
    stackBuilder.addParentStack(MainActivity.class);
    stackBuilder.addNextIntent(resultIntent);

    PendingIntent resultPendingIntent =
            stackBuilder.getPendingIntent(
                0,
                PendingIntent.FLAG_UPDATE_CURRENT
            );

    mBuilder.setContentIntent(resultPendingIntent);
} 
```

**后续编辑：**

下面的评论之一提到答案可能是“脆弱的”，而随着 Android 4.3 的发布，背后的行为`startForeground`已经发生了变化。startForeground 将强制您的应用程序在前台显示通知，并且应该只调用该方法并显示通知。我尚未测试，但接受的答案可能不再按预期工作。

在调用时停止闪烁方面`stopForeground`，我认为不值得为框架而战。

这里有一些[关于 Android 4.3 通知更改的附加信息](http://www.androidpolice.com/2013/07/29/android-engineer-explains-why-some-apps-suddenly-have-persistent-notifications-after-you-upgrade-to-android-4-3/)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T13:41:39.943

您可以考虑使用不同的方法。
由于您**应该**将前台服务用于此类任务（媒体播放），我建议您继续这样做`start foreground()`，但不要将通知传递给它，只需像这样设置 id 0 和通知 null `startForeground(0, null);`。

这样前台服务就不会显示任何通知。

现在，为了您的目的，您可以使用常规通知并更新它们的状态（正在进行、布局、文本等），这样您就不必依赖前台服务的通知行为。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-05T17:17:25.367

而不是`stopService(true)`，调用`stopService(false)`将保留通知原样（没有正在进行的状态），除非它被用户解除/以编程方式删除或服务停止。因此只需调用 stopService(false) 并更新通知以显示暂停状态，现在通知可以被用户关闭。这也可以防止闪烁，因为我们没有重新创建通知。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-20T00:51:29.760

根据[文档](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#LOLLIPOP)，这种行为是在 Lollipop 之前设计的

> 针对此版本或更高版本的应用程序将获得这些新的行为变化：
> 
> ...
> 
> *   使用 removeNotification false 调用 Service.stopForeground 将修改仍然发布的通知，使其不再被迫持续。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-24T21:20:23.280

在 N 之前，当 stopForeground 和 startForeground 依次调用时，通知必须重新出现。您需要再次显示通知，暂停后不要将其设为前台通知。我建议您不要添加解决方法或破解来解决此问题。（有解决方法，但可能会引入其他错误）。

在 N+ 上，添加了一个标志，ServiceCompat.STOP_FOREGROUND_DETACH。这将传递给 stopForeground 并让您将当前通知保留在通知托盘中。

也不要忘记终止服务（stopSelf() 或其他）。因为如果用户滑动应用程序，您的应用程序主进程可能会保留。

# android - android中的用户不活动？

> ID：15610403
> 
> 赞同：4
> 
> 时间：2013-03-25T08:21:43.897
> 
> 标签：android

我想在我的 android 应用程序中查看用户不活动情况。如果用户在 1 分钟内没有执行任何活动，那么应用程序应该离开屏幕，这意味着它应该显示一个对话框，询问密码（以前存储在 sharedpreferences 中）。如果密码匹配活动应该重新开始。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-23T07:17:42.583

在我的 Serach 期间，我找到了很多答案，但这是我得到的最佳答案。但此代码的局限性在于它仅适用于活动而不适用于整个应用程序。以此为参考[。](https://stackoverflow.com/questions/25883311/android-detect-user-inactivity-after-key-pressed)

```
myHandler = new Handler();
myRunnable = new Runnable() {
    @Override
    public void run() {
        //task to do if user is inactive

    }
};
@Override
public void onUserInteraction() {
    super.onUserInteraction();
    myHandler.removeCallbacks(myRunnable);
    myHandler.postDelayed(serviceRunnable, /*time in milliseconds for user inactivity*/);
} 
```

例如，您使用了 8000，任务将在用户不活动 8 秒后完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:38:17.927

```
private CountDownTimer mCountDown = new CountDownTimer(your desire time here, same as first param)
{

    @Override
    public void onTick(long millisUntilFinished)
    {

    }

    @Override
    public void onFinish()
    {
        //show your dialog here
    }
};  

@Override
protected void onResume()
{
    super.onResume();

    mCountDown.start();
}  
@Override
protected void onPause()
{
    super.onPause();

    mCountDown.cancel();
}  
@Override
public void onUserInteraction()
{
    super.onUserInteraction();

    // user interact cancel the timer and restart to countdown to next interaction
    mCountDown.cancel();
    mCountDown.start();
} 
```

使用上面的代码，将捕获所有用户交互。当用户按 HOME 或 SEARCH 键离开您的应用程序时，当他们回来时，您想要做什么则是另一回事。此外，当电话进入 onUserInteraction 时不会被呼叫，因此如果您想在用户从呼叫回来并且时间到期后显示对话框，那么它会变得更加复杂。您必须覆盖 onKeyDown 并设置一个标志才能知道您的应用程序何时因来电而暂停。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:31:33.793

使用`BroadcastReceiver`with `Intent.ACTION_SCREEN_OFF`来识别应用程序中的用户不活动。您可以使用`Intent.ACTION_SCREEN_ON`来处理屏幕上的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T09:18:50.590

我认为这可以帮助你

公共无效 onUserInteraction ()

在 API 级别 3 中添加 每当将键、触摸或轨迹球事件分派到 Activity 时调用。如果您希望知道用户在您的活动运行时以某种方式与设备进行了交互，请实施此方法。

[http://developer.android.com/reference/android/app/Activity.html#onUserInteraction()](http://developer.android.com/reference/android/app/Activity.html#onUserInteraction())

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-13T09:09:48.277

在您的 BaseActivity 中，覆盖[dispatchTouchEvent](https://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent(android.view.MotionEvent))并返回 false。

```
long lastTimeStamp;
@Override
public boolean dispatchTouchEvent (MotionEvent ev) {
  if(lastTimeStamp + 5*60*1000 < System.getCurrentTimeMilis()) {
     //your lasttimestamp was 5 mins ago. Expire user session.
    }
   lastTimeStamp = System.getCurrentTimeMilis();
   return false; // return false to indicate that the event hasn't been handled yet
} 
```

# c++ - 从 64 位转换为 32 位时，gcc 不给出任何警告

> ID：15610404
> 
> 赞同：5
> 
> 时间：2013-03-25T08:21:46.157
> 
> 标签：c++, gcc, casting

这是我的代码：

```
int main()
{
    uint64_t a = 100;
    uint32_t b = a;
    return 0;
} 
```

gcc 命令：

```
~$ gcc -o 1 1.c -Wall
~$ 
```

任何人都可以给我一些帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:26:40.957

使用 -Wconversion 选项。

> -Wconversion 对可能改变值的隐式转换发出警告。这包括实数和整数之间的转换，例如 x 为 double 时的 abs(x)；有符号和无符号之间的转换，如无符号 ui = -1；并转换为更小的类型，例如 sqrtf (M_PI)。不要警告像 abs ((int) x) 和 ui = (unsigned) -1 这样的显式强制转换，或者如果值没有被 abs (2.0) 中的转换更改。可以使用 -Wno-sign-conversion 禁用有关有符号和无符号整数之间转换的警告。
> 
> 对于 C++，还警告用户定义转换的重载解析混乱；以及从不使用类型转换运算符的转换：转换为 void、相同类型、基类或对它们的引用。在 C++ 中默认禁用有关有符号和无符号整数之间转换的警告，除非显式启用 -Wsign-conversion。

在您的代码上：

从 «uint64_t {aka long long unsigned int}» 转换为 «uint32_t {aka unsigned int}» 可能会改变其值 [-Wconversion]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:30:38.947

`-Wall`打开所有警告是一种常见的误解。

它打开“*所有关于一些用户认为有问题的结构的警告，这些警告很容易避免（或修改以防止警告），即使与宏一起使用*”（引用 GCC 手册）。

甚至`-Wextra`只有“*启用一些 -Wall 未启用的额外警告标志*”（再次来自 GCC 手册）。

还有`-pedantic`, 在编译器清楚代码含义但标准要求符合标准的编译器发出消息的情况下会生成警告。（GCC 的默认设置是静默继续编译）。

**即使启用了所有三个，您也不会得到编译器能够给出的所有警告。查看编译器手册以获取更多详细信息。**

# php - 在前端如何获取打开购物车中安装的不同语言中哪种语言处于活动状态？

> ID：15610405
> 
> 赞同：1
> 
> 时间：2013-03-25T08:21:46.417
> 
> 标签：php, e-commerce, opencart

我已经在实时服务器上安装了 Opencart 1.5.4x 并以多种语言（英语、荷兰语、德语）为主题。Opencart 应用程序可以与这些语言一起正常工作。

当我点击语言链接并浏览整个网站时，网站的内容被翻译成这种语言，**但是如何以编程方式找出哪种语言处于活动状态？**

我需要向用户显示当前处于活动状态的语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:59:59.723

我想您应该`$this->config->get('config_language_id');`在控制器或模型中调用以获取当前活动语言的 ID。

这意味着，如果您已经实现了自己的语言切换器，请在您的控制器中将语言设置为模板：

```
$this->data['active_language_id'] = $this->config->get('config_language_id'); 
```

然后在您的模板中执行以下操作：

```
<?php foreach($languages as $language) { ?>
<a href="..." class="lang-select <?php if $language['language_id'] == $active_language_id) echo ' active'; ?>"><?php echo $language['code']; ?></a>
<?php } ?> 
```

我希望这是您需要解决的问题，并且会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T09:04:53.037

opencart中的简单语言选择代码

```
<?php $lang = $this->config->get('config_language');
if($lang == 'ru'){
    $locale = 'ru_RU';
} elseif($lang == 'en'){
    $locale = 'en_US';
} ?> 
```

和

```
<?php if ($locale) { echo $locale; } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T07:59:29.107

在你前面使用`$language_code`，它是由catalog/controller/module/language.php设置的：

```
$this->data['language_code'] = $this->session->data['language']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-25T15:19:52.223

我有一个类似的问题：我想在产品页面上获取当前选择的语言，这样我就可以在产品页面上为不同的语言显示不同的“社交分享代码”。

1) 之后转到 /catalog/controller/product/product.php

```
 $data['heading_title'] = $product_info['name']; 
```

添加

```
$data['clanguage']  = $this->session->data['language']; 
```

转到 /catalog/view/theme/default/template/product/product.tpl

将以下代码添加到您希望它显示的位置。

```
<?php echo $clanguage; ?> 
```

现在选择“English”会显示“en-gb”，如果选择“简体中文”会显示“zh-cn”。

然后我可以使用“if”和“this value”为不同的语言显示不同的“社交分享代码”。

希望它会有所帮助，因为它适用于 opencart 2.3.02，我认为它适用于 opencart2+,3+。

# javascript - Android HighChart（语法错误：ParseError）

> ID：15610406
> 
> 赞同：0
> 
> 时间：2013-03-25T08:21:57.720
> 
> 标签：javascript, android, html, webview, highcharts

我是 html 和 highchart 的新手，我想问是什么导致了这个错误？我正在为android开发这个，我被困在这里。任何意见和答案将不胜感激。

```
03-25 08:15:49.827: E/Web Console(692): SyntaxError: Parse error at file:///android_asset/www/index.html:35 
```

下面是我的html文件

**html**

```
<!DOCTYPE HTML>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
<script src="http://code.highcharts.com/highcharts.js" type="text/javascript"></script>
<script src="http://code.highcharts.com/modules/exporting.js" type="text/javascript">   </script>
<title>My HTML</title>
</head>
<body>
<script type="text/javascript" charset="utf-8">
    $(function () { 
        $('#container').highcharts({
            chart: {
                type: 'bar'
            },
            title: {
                text: 'Fruit Consumption'
            },
            xAxis: {
                categories: ['Apples', 'Bananas', 'Oranges']
        },
        yAxis: {
            title: {
                text: 'Fruit eaten'
            }
        },
        series: [{
            name: 'Jane',
            data: [1, 0, 4]
        }, {
            name: 'John',
            data: [5, 7, 3]
        }]
    });
});​  <---------------Line 35
</script>   
<div id="container" style="height: 300px"></div>
</body>
</html> 
```

**活动**

```
 webView = (WebView)findViewById(R.id.webView);
    WebSettings webSettings = webView.getSettings();  
    webSettings.setJavaScriptEnabled(true);
    webView.loadUrl("file:///android_asset/www/index.html");
    webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    webSettings.setRenderPriority(WebSettings.RenderPriority.HIGH); 
```

# sql - 恢复数据后数据类型 LVARCHAR 损坏

> ID：15610409
> 
> 赞同：1
> 
> 时间：2013-03-25T08:22:08.460
> 
> 标签：sql, encoding, informix, sqldatatypes

我面临以下问题：

我（错误地）删除了表中的一个键，然后通过这种方式恢复了整个表：

```
LOAD FROM 'C:\db\rqrequesttrans.dat' delimiter '~' insert into rqrequesttrans 
```

* * *

几乎一切正常，但我在某个`LVARCHAR`字段中损坏了数据：

例如：

`<p>ääÊãÑå ÈÇäÊæÈ ÈÇääÇÒå.</p>`代替`<p>للتكرم بالتنبيه باللازم.</p>`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T16:31:33.490

这不是一个真正的答案。这是一些分析，并要求提供更多信息。

### 分析

阿拉伯语数据在我的浏览器中显示为 UTF-8：

```
0x3C = U+003C
0x70 = U+0070
0x3E = U+003E
0xD9 0x84 = U+0644
0xD9 0x84 = U+0644
0xD8 0xAA = U+062A
0xD9 0x83 = U+0643
0xD8 0xB1 = U+0631
0xD9 0x85 = U+0645
0x20 = U+0020
0xD8 0xA8 = U+0628
0xD8 0xA7 = U+0627
0xD9 0x84 = U+0644
0xD8 0xAA = U+062A
0xD9 0x86 = U+0646
0xD8 0xA8 = U+0628
0xD9 0x8A = U+064A
0xD9 0x87 = U+0647
0x20 = U+0020
0xD8 0xA8 = U+0628
0xD8 0xA7 = U+0627
0xD9 0x84 = U+0644
0xD9 0x84 = U+0644
0xD8 0xA7 = U+0627
0xD8 0xB2 = U+0632
0xD9 0x85 = U+0645
0x2E = U+002E
0x3C = U+003C
0x2F = U+002F
0x70 = U+0070
0x3E = U+003E 
```

其他数据显示为来自 ISO 8859-1（或 8859-15）的 UTF8 编码字符：

```
0x3C = U+003C
0x70 = U+0070
0x3E = U+003E
0xC3 0xA4 = U+00E4
0xC3 0xA4 = U+00E4
0xC3 0x8A = U+00CA
0xC3 0xA3 = U+00E3
0xC3 0x91 = U+00D1
0xC3 0xA5 = U+00E5
0x20 = U+0020
0xC3 0x88 = U+00C8
0xC3 0x87 = U+00C7
0xC3 0xA4 = U+00E4
0xC3 0x8A = U+00CA
0xC3 0xA6 = U+00E6
0xC3 0x88 = U+00C8
0x20 = U+0020
0xC3 0x88 = U+00C8
0xC3 0x87 = U+00C7
0xC3 0xA4 = U+00E4
0xC3 0xA4 = U+00E4
0xC3 0x87 = U+00C7
0xC3 0x92 = U+00D2
0xC3 0xA5 = U+00E5
0x2E = U+002E
0x3C = U+003C
0x2F = U+002F
0x70 = U+0070
0x3E = U+003E 
```

我们可以看到`<p>`and`.</p>`数据是常见的，空白 U+0020 出现在相同的地方。

对齐数据块，我们可以有些一致性和不一致性：

```
0xD9 0x84 = U+0644  :  0xC3 0xA4 = U+00E4   Delta = 0x0560
0xD9 0x84 = U+0644  :  0xC3 0xA4 = U+00E4   Delta = 0x0560
0xD8 0xAA = U+062A  :  0xC3 0x8A = U+00CA   Delta = 0x0560
0xD9 0x83 = U+0643  :  0xC3 0xA3 = U+00E3   Delta = 0x0560
0xD8 0xB1 = U+0631  :  0xC3 0x91 = U+00D1   Delta = 0x0560
0xD9 0x85 = U+0645  :  0xC3 0xA5 = U+00E5   Delta = 0x0560
0x20      = U+0020  :  0x20      = U+0020

0xD8 0xA8 = U+0628  :  0xC3 0x88 = U+00C8   Delta = 0x0560
0xD8 0xA7 = U+0627  :  0xC3 0x87 = U+00C7   Delta = 0x0560
0xD9 0x84 = U+0644  :  0xC3 0xA4 = U+00E4   Delta = 0x0560
0xD8 0xAA = U+062A  :  0xC3 0x8A = U+00CA   Delta = 0x0560
0xD9 0x86 = U+0646  :  0xC3 0xA6 = U+00E6   Delta = 0x0560
0xD8 0xA8 = U+0628  :  0xC3 0x88 = U+00C8   Delta = 0x0560
0xD9 0x8A = U+064A
0xD9 0x87 = U+0647
0x20      = U+0020  :  0x20      = U+0020

0xD8 0xA8 = U+0628  :  0xC3 0x88 = U+00C8   Delta = 0x0560
0xD8 0xA7 = U+0627  :  0xC3 0x87 = U+00C7   Delta = 0x0560
0xD9 0x84 = U+0644  :  0xC3 0xA4 = U+00E4   Delta = 0x0560
0xD9 0x84 = U+0644  :  0xC3 0xA4 = U+00E4   Delta = 0x0560
0xD8 0xA7 = U+0627  :  0xC3 0x87 = U+00C7   Delta = 0x0560
0xD8 0xB2 = U+0632  :  0xC3 0x92 = U+00D2   Delta = 0x0560
0xD9 0x85 = U+0645  :  0xC3 0xA5 = U+00E5   Delta = 0x0560 
```

因此，很明显，沿线某处存在问题。很可能存在代码集问题。我所知道的常量 0x0560 并不重要，除了字符代码正确和不正确的事实之外，这就是幻数。

### 问题

没有很多问题的很多答案，没有人能给你很多帮助。当然，某些答案很可能会使某些问题变得毫无意义。

1.  你在哪个平台上运行？（O/S 名称和版本；CPU 类型。）给定加载文件名，您很可能正在运行某个版本的 Windows。是Win32还是Win64？哪个版本的 Windows？
2.  您使用的是哪个版本的 Informix？（例如，Informix 11.70.FC7W2。）
3.  您正在使用的数据库的语言环境 (DB_LOCALE) 是什么？（例如：en_us.8859-1。）
4.  什么是客户端语言环境 (CLIENT_LOCALE)？
5.  数据文件是如何`C:\db\rqrequesttrans.dat`创建的？区域设置是否相同？
6.  示例数据来自该文件中的哪些字节？
7.  您是否在 DB-Access 或其他地方执行了 LOAD 命令？如果是别的，什么？
8.  数据文件有多大？
9.  表的架构是什么？
10.  表中有多少行？
11.  LVARCHAR 字段中的损坏是否跨行一致？
12.  您是否能够为包含该表的数据页进行页面转储？（`oncheck -pp`或者`oncheck -pP`，可能）
13.  您是否与 IBM 签订了支持合同？如果是这样，请使用它 - 到目前为止它会更快。

理想情况下，您将在一个小表中演示损坏 — 一个包含完整数据列的一小部分（2 或 3 列，其中之一是 LVARCHAR 列）和少量行（10 以下） . 我们可能没有那么幸运能够创造它。列出的问题可能是最先被问到的问题（也许`oncheck`信息除外）。

# eclipse - Jade 的 Eclipse 插件（Node.js 模板引擎）

> ID：15610410
> 
> 赞同：5
> 
> 时间：2013-03-25T08:22:10.443
> 
> 标签：eclipse, node.js, plugins, express, pug

我想做[基于 Eclipse 的 Node.js IDE](https://github.com/PaulVI/eclipse-node-ide/)

**如何在 Eclipse 中编辑玉文件？**

*   在 Eclipse IDE 中编辑 *.jade 文件（带有语法支持）的工具是什么？

Jade（Node.js 的模板引擎）是否有基于 Eclipse 的编辑器或插件？

已经看过（
[eclipse 的玉模板语法支持？](https://stackoverflow.com/questions/7528252/jade-templating-syntax-support-for-eclipse)
[使用 Haml & Sass 和 Eclipse](https://stackoverflow.com/questions/1474096/using-haml-sass-with-eclipse)
）

*   或者是否有 Eclipse 支持 Textmate 语法定义文件
    [https://stackoverflow.com/questions/22881458/textmate-bundles-for-eclipse](https://stackoverflow.com/questions/22881458/textmate-bundles-for-eclipse)

[Sublime Text 2 中 Jade 的](https://stackoverflow.com/questions/7666977/syntax-highlighting-for-jade-in-sublime-text-2)相关 语法高亮显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:26:20.370

我还发现了[Eclipse XTEXT](http://www.eclipse.org/Xtext/)，但没有发现 Jade 的现成可用语言定义。

[Eclipse 插件：为 Eclipse 不支持的语言创建新的文件扩展名](https://stackoverflow.com/questions/3838558/eclipse-plug-in-create-a-new-file-extension-for-a-language-not-supported-by-ecl)
[如何设置新语言 IDE](https://stackoverflow.com/questions/13603829/how-to-setup-a-new-language-ide)

请参阅[Eclipse 社区论坛上的问题“我想构建一个类似于玉 (jade-lang.com) 的 DSL”](http://www.eclipse.org/forums/index.php/t/428664/)

# mysql - 在mysql中将多行变成多列

> ID：15610411
> 
> 赞同：0
> 
> 时间：2013-03-25T08:22:28.900
> 
> 标签：mysql, sql, pivot

考虑下表

```
Name                                      Null?    Type
----------------------------------------- -------- --------------
PRODID                                             NUMBER
PRODNAME                                           VARCHAR2(50)

 Name                                      Null?    Type
 ----------------------------------------- -------- --------------
 PRODID                                             NUMBER
 PROPID                                             NUMBER
 PRONAME                                            VARCHAR2(100)
 PROVALUE                                           VARCHAR2(100) 
```

样本数据如下

```
 select * from prodmas;
    PRODID PRODNAME
---------- --------------
       101 Surf
       102 Ariel
 select * from prodprop
 /

PRODID     PROPID PRONAME   PROVALUE                     
------ ---------- -----------------------------------------------
   101       1001 Price     100
   101       1002 color     Blue
   101       1003 Agent     AV
   102       1001 Price     95
   102       1002 Color     Orange
..... 
```

像这样的普通连接查询

```
 select prodname,provalue
 from prodmas pm
 inner join prodprop pp
 on pm.prodid = pp.prodid
 /
PRODNAME                                           PROVALUE
-------------------------------------------------- -----------
Surf                                               100
Surf                                               Blue
Surf                                               AV
Ariel                                              95
Ariel                                              Orange 
```

但是预期的输出应该是这样的

```
Surf    100   Blue   AV 
Ariel    95   Orange AV
....... 
```

希望我更清楚

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:27:26.043

```
SELECT  a.ProdID,
        a.ProdName,
        MAX(CASE WHEN b.ProName = 'Price' THEN b.ProValue ELSE NULL END) Price,
        MAX(CASE WHEN b.ProName = 'Color' THEN b.ProValue ELSE NULL END) Color,
        MAX(CASE WHEN b.ProName = 'Agent' THEN b.ProValue ELSE NULL END) Agent
FROM    prodmas a
        LEFT JOIN prodprop b
            ON .prodID = b.prodID
GROUP   BY a.ProdID, a.ProdName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/2798a/1)

如果您有*未知*数量的值`PRONAME`，则更倾向于使用动态 SQL，因此查询不需要其他更改。

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(case when PRONAME = ''',
      PRONAME,
      ''' then PROVALUE end) AS ',
      PRONAME
    )
  ) INTO @sql
FROM prodprop;

SET @sql = CONCAT('SELECT   a.ProdID,
                            a.ProdName, ', @sql, ' 
                  FROM    prodmas a
                          LEFT JOIN prodprop b
                              ON a.prodID = b.prodID
                  GROUP   BY a.ProdID, a.ProdName');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/879e0/4)

上述查询的输出是相同的：

```
╔════════╦══════════╦═══════╦════════╦════════╗
║ PRODID ║ PRODNAME ║ PRICE ║ COLOR  ║ AGENT  ║
╠════════╬══════════╬═══════╬════════╬════════╣
║    101 ║ Surf     ║   100 ║ Blue   ║ AV     ║
║    102 ║ Ariel    ║    95 ║ Orange ║ (null) ║
╚════════╩══════════╩═══════╩════════╩════════╝ 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-25T08:27:21.060

如果您可以静态指定所有内容，则可以通过加入`prodprop`要检索的每个属性来执行此操作：

```
SELECT p.prodname, 
    prop1001.provalue AS Price, 
    prop1002.provalue AS Color, 
    prop1003.provalue AS Agent
FROM prodmas p
LEFT OUTER JOIN prodprop prop1001 ON p.prodid = prop1001.prodid 
    AND prop1001.propid=1001
LEFT OUTER JOIN prodprop prop1002 ON p.prodid = prop1002.prodid
    AND prop1002.propid=1002
LEFT OUTER JOIN prodprop prop1003 ON p.prodid = prop1003.prodid
    AND prop1003.propid=1003 
```

否则，您将不得不求助于动态 SQL 来创建自定义查询，或者按原样返回属性表，并在前端进行格式化。

# php - 在iphone应用程序中解析json数据

> ID：15610412
> 
> 赞同：1
> 
> 时间：2013-03-25T08:22:40.623
> 
> 标签：php, iphone, mysql, json

我正在解析来自 json 中服务器的数据以在 iphone 应用程序中使用，然后它需要任何搜索文本字段并将其发布到服务器然后匹配文本并返回下面的数据是我的 iphone 代码

```
 NSString*searchText=searchTextField.text;

NSString *post =[[NSString alloc] initWithFormat:@"searchCode=%@",searchText];

NSURL *url=[NSURL URLWithString:@"http://www.celeritas-solutions.com/pah_brd_v1/productivo/searchCatalog.php?"];

NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

    NSError *error;
    NSURLResponse *response;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

    NSData* myData=[data dataUsingEncoding:NSUTF8StringEncoding];

    NSString *json_string = [[NSString alloc] initWithData:myData encoding:NSUTF8StringEncoding];
    NSArray *dataArr=[json_string JSONValue];

    for (int i=0; i<[dataArr count]; i++) {

        if (!dataArr || !dataArr.count){

            if(resultArray!=nil){
                resultArray=nil;
                resultArray=[[NSMutableArray alloc]init];
            }

        }

        NSDictionary *dict=[dataArr objectAtIndex:i];

        ObjectData *theObject =[[ObjectData alloc] init];

        [theObject setCategory:[dict objectForKey:@"category"]];
        [theObject setSub_Category:[dict objectForKey:@"sub_Category"]];    
        [theObject setContent_Type:[dict objectForKey:@"content_Type"]];
        [theObject setContent_Title:[dict objectForKey:@"content_Title"]];
        [theObject setPublisher:[dict objectForKey:@"publisher"]];
        [theObject setContent_Description:[dict objectForKey:@"content_Description"]];
        [theObject setContent_ID:[dict objectForKey:@"content_ID"]];
        [theObject setContent_Source:[dict objectForKey:@"content_Source"]];

        [resultArray addObject:theObject];
        [theObject release];
        theObject=nil;

    NSLog(@"%@", json_string); 
```

这是 JSOn 字符串的结果

```
 ProductivoApp[2087:c203] -JSONValue failed. Error trace is: (
"Error Domain=org.brautaset.JSON.ErrorDomain Code=3 \"Unrecognised leading character\" UserInfo=0x57b5a10 {NSLocalizedDescription=Unrecognised leading character} 
```

我的 url 的 PHP 代码

```
 $flu=$_POST['searchCode'];

       $query =mysql_query("SELECT * From catalog_Master WHERE category_Title LIKE '%$flu%'");

    $rows = array();
    while($row = mysql_fetch_assoc($query)) {
    $rows[] = $row;
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:55:48.057

根据您的最新评论，原因是您的查询失败。

首先，您不应该使用`mysql_*`函数。[看这里](http://php.net/manual/en/function.mysql-query.php)的大红框。考虑改用[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。

其次，看起来您可能对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)持开放态度。你应该[逃避你的查询](http://php.net/manual/en/function.mysql-real-escape-string.php)。

第三，您应该对查询执行错误检查。类似于：

```
if(!$query) {
   die('Query failed. ' . mysql_error()');
} 
```

这应该让您了解查询失败的原因。

您还没有发布[mysql_connect()](http://php.net/manual/en/function.mysql-connect.php)的代码，您也应该对此进行错误检查。类似于：

```
$link = mysql_connect('localhost', 'user', 'pass');
if(!$link) {
   // Handle it
} 
```

# javascript - 如何在不使用选项卡索引的情况下在选项卡容器中设置活动选项卡？

> ID：15610414
> 
> 赞同：0
> 
> 时间：2013-03-25T08:22:50.537
> 
> 标签：javascript, asp.net, tabpanel, tabcontainer

我有一个标签容器，称之为 tbcSP。它有三个面板，每个面板都有 id，分别是 Iss、workIss 和 katIss。

现在，我使用一个链接转到保存选项卡容器的页面，使用查询字符串。我没有问题。我可以从链接/查询字符串中获取面板的 ID（例如：单击 default.aspx 上的厨房链接并获取查询字符串 ../staff.aspx?id=katIss）。我可以得到 katIss

现在，我已经阅读并仅看到了有关如何使用选项卡索引设置活动选项卡的示例。但是，如果我有标签的 id，我该怎么做呢？

如果 id 相同，有没有办法制作一个数组并找到索引？或者，我已经尝试过了，是否有另一种说法： $find("tbcSP")._tabs[--what here--]._show()

到目前为止，这是我的脚本语言：

```
<script type="text/javascript">
        function pageLoad() {
            var surl = unescape(window.location);
            var con = surl.substr(surl.indexOf("id=")+3, surl.length);
            findTab(con);
        }

        function findTab(con) {
            alert(con);
            if (con != "") {
               $find("tbcSP")._tabs[0]._show();

            }
        }
    </script> 
```

正如我所说，这让我得到了 katIss 或我点击的任何链接。但是假设我不知道索引，如何设置活动选项卡？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:29:27.803

如果您有`id`选项卡，您可以简单地在具有 id 的元素上设置一个类。

```
var id; // assume has a value
document.getElementById(id).className = 'active'; 
```

然后使用 CSS 为您的活动选项卡和非活动选项卡设置样式。

```
.tab {
    /* CSS for inactive tabs */
    color:gray;
}
.tab.active {
    color:black;
} 
```

# javascript - 获取 chrome.tabs.captureVisibleTab 的图片文件

> ID：15610417
> 
> 赞同：1
> 
> 时间：2013-03-25T08:23:08.573
> 
> 标签：javascript, google-chrome-extension

我想在 Chrome 扩展程序中捕获 Chrome 的当前页面。然后我发现

```
chrome.tabs.captureVisibleTab(integer windowId, object options, function callback) 
```

回调函数就像

```
function(string dataUrl) {...}; 
```

当我尝试使用这个 API 时，我得到的 dataUrl 就像

```
data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwME…OdiCJJMxdVYyueT/tGodJ0nTdBsks9Ogt7G0RmZYIAFRcnJwOw9B0AwBgAUUV9AZFeiiigD//Z... 
```

但我想使用此图像文件位置或将其保存到另一个位置。那么我该如何实现呢？
或者有没有其他方法可以捕获网页截图，然后将此页面保存为 chrome 扩展名中的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T19:54:13.847

您可以将 base64 编码的 jpeg 发送到运行 php 的服务器以保存文件。 *此示例忽略安全性以简化示例*

```
<?php
$screenshot = $_POST['screenshot'];
$screenshot = str_replace('data:image/jpeg;base64,', '', $screenshot);
$screenshot = str_replace(' ', '+', $screenshot);
$data = base64_decode($screenshot);
$file = uniqid() . '.jpeg';
$success = file_put_contents($file, $data); 
```

然后，您可以让服务器返回对要下载的图像的引用。

# java - Java Client/Server - 我们可以将服务器作为另一台服务器的客户端吗？

> ID：15610418
> 
> 赞同：0
> 
> 时间：2013-03-25T08:23:08.843
> 
> 标签：java, multithreading, sockets, client-server

我正在网站上寻找我的问题，但似乎我还没有找到解决方案。我有运行良好的 Java 非阻塞客户端服务器程序。我从[这里举了一个例子](http://kramasundar.blogspot.com/2009/06/java-supports-nonblocking-io-since-java.html)

我的问题是，如何使服务器也成为另一台服务器的客户端？现在，我的服务器将有 2 个监听端口来等待来自客户端的连接请求，这已经实现。现在，我想让服务器在同一时间可以使用不同的端口连接到另一台服务器。我不知道我怎么能做到这一点。希望有人能给出一些想法。非常感谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:25:36.117

从您的服务器代码向另一台服务器运行客户端。就如此容易。在这个场景中，你尝试过什么但没能完成的事情？您可能希望为此使用 Apache HTTP（它有同步和异步版本）客户端或[Netty](http://netty.io/)异步 HTTP 客户端。Apache http客户端教程[在这里](http://www.vogella.com/articles/ApacheHttpClient/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:07:09.060

Yes, you can put client code into a server. Just like you could download an HTML page from within a Java Servlet.

Your server should have a "handler" component that processes incoming requests from your client. Inside this handler code, you can put your client code which connects to a different server.

I guess what confuses you is, that the incoming connection and the outgoing connection are now both handled in the same poll-the-selector loop, or? You can attach objects to the selector key, as far as I remember. Use that to signal that this is not an incoming connection, but an outgoing connection, and handle all outgoing connections differently from incoming connections. You may even have to connect these incoming and outgoing connections somehow, so you know which outgoing connection matches which incoming connections.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:33:23.143

我认为代理应该解决您的问题。更多[在这里](http://www.dwgold.com/Projects/Networking/Proxyserver/Default.aspx)

# iphone - 圆形遮罩效果

> ID：15610419
> 
> 赞同：1
> 
> 时间：2013-03-25T08:23:18.623
> 
> 标签：iphone, ios, mask, geometry, cgcontext

我使用此代码制作了圆形蒙版效果：

```
CGContextRef context = CGBitmapContextCreate(NULL, self.bounds.size.width, self.bounds.size.height, 8, 4 * self.bounds.size.width, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedFirst);
CGContextAddArc(context, 1024/2, 768/2, size, 0, 6.3, 0);
CGContextClosePath(context);
CGContextClip(context);
CGContextDrawImage(context, self.bounds, imageView.image.CGImage);
CGImageRef imageMasked = CGBitmapContextCreateImage(context);
CGContextRelease(context);
UIImage *newImage = [UIImage imageWithCGImage:imageMasked];
CGImageRelease(imageMasked);

[imageView setImage:newImage];
UIGraphicsEndImageContext(); 
```

当我设置时`size--`，圆圈缩小了值，但是当我设置`size++`圆圈时没有放大值。这是怎么回事？ ![在此处输入图像描述](../Images/40aa5641df1f5ed3f2181c1446cb7704.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:13:50.377

I think not setting the original image first is your problem. I tested your code a little, and made it work two ways:

```
- (IBAction)minus:(id)sender {
    self.radius = @([self.radius floatValue]+10.0f);
    [self redrawImage];
}

- (IBAction)plus:(id)sender {
    self.radius = @([self.radius floatValue]-10.0f);
    [self redrawImage];
}

-(void)redrawImage
{
    //set the original image first
    [_imageView setImage:[UIImage imageNamed:@"your image goes here"]];

    CGFloat size = [self.radius floatValue];
    CGContextRef context = CGBitmapContextCreate(NULL, self.view.bounds.size.width, self.view.bounds.size.height, 8, 4 * self.view.bounds.size.width, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedFirst);
    CGContextAddArc(context, 320/2, 460/2, size, 0, 2*M_PI, 0);
    CGContextClosePath(context);
    CGContextClip(context);
    CGContextDrawImage(context, self.view.bounds, _imageView.image.CGImage);
    CGImageRef imageMasked = CGBitmapContextCreateImage(context);
    CGContextRelease(context);
    UIImage *newImage = [UIImage imageWithCGImage:imageMasked];
    CGImageRelease(imageMasked);

    [_imageView setImage:newImage];
    UIGraphicsEndImageContext();
} 
```

Also instead of setting 6.3, it's easier to use 2 * M_PI for the angle.

# php - 如何在 jqgrid 中将 add/edit/form 中的数据库数据显示为标签

> ID：15610422
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:23:29.613
> 
> 标签：php, mysql, forms, jqgrid, jqgrid-php

我想在 jqgrid 的添加/编辑表单中将数据库中的数据显示为标签。

参见例如：要向 jqgrid 添加数据，我们将单击 + 图标。将打开一个弹出窗口进行数据输入。文本框或复选框可以显示在给定的 jqgrid 示例中。但我想在那个添加/编辑弹出表单中显示一个标签。

jqgrid中是否有任何内置功能，例如

要在添加/编辑弹出表单中显示复选框，我们将指定以下代码。

```
$col = array();
$col["title"] = "Closed";
$col["name"] = "closed";
$col["width"] = "50";
$col["editable"] = true;
$col["edittype"] = "checkbox"; // render as checkbox
$col["editoptions"] = array("value"=>"Yes:No"); // with these values "checked_value:unchecked_value"
$cols[] = $col; 
```

上面的 col 选项将显示复选框...就像我想在标签中显示数据一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:06:42.197

尝试这个：

```
$col = array();
$col["title"] = "cname";
$col["name"] = "cname";
$col["width"] = "50";
$col["editable"] = false;
$col["edittype"] = "textbox"; 

$cols[] = $col; 
```

# python - python中zope.interface.registry中的导入错误

> ID：15610423
> 
> 赞同：5
> 
> 时间：2013-03-25T08:23:31.757
> 
> 标签：python, importerror, zope.interface

我正在虚拟环境中安装一个项目。我收到错误

```
from zope.interface.registry import Components
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ImportError: No module named registry 
```

此模块的版本为 4.0.5

```
>>> import pkg_resources
>>> pkg_resources.get_distribution("zope.interface").version
'4.0.5' 
```

我在我的机器上尝试了同样的方法（不是虚拟环境），

```
>>> import pkg_resources
>>> pkg_resources.get_distribution("zope.interface").version
'4.0.1'
>>> from zope.interface.registry import Components 
```

这里`from zope.interface.registry import Components`没有给出任何错误。据此[_](https://pypi.python.org/pypi/zope.interface/3.8.0)

```
QUOTE: 3.8.0 (2011-09-22) 
New module zope.interface.registry. This is code moved from 
zope.component.registry which implements a basic nonperistent component registry 
as zope.interface.registry.Components. 
```

，它不应该给出任何错误。任何建议我在这里缺少什么或如何解决这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-14T22:27:14.073

我有类似的错误 - 我试图在没有站点包的情况下创建新的虚拟环境。它创造一切都很好。但是我的 ubuntu 已经安装`zope.interface`了供自己使用，所以它不想将它安装到我的 venv 之外。

这种碰撞导致我的 venv 在 mod_wsgi 下的简单测试应用程序中抛出错误：

```
 from zope.interface.registry import Components
ImportError: No module named registry 
```

所以我试图`zope.interface`从基础 python 中删除。但是 unistall 命令没有删除它（我在 google 中发现，这是已知问题）。

`zope.interface`比我找到的解决方案：我刚刚切换到我的 venv 并从那里发出“升级”命令：

```
(env)user@ubuntu:~/env$ sudo pip install --upgrade zope.interface 
```

在此之后我的`zope.interface`解雇问题。

你的问题很相似，所以我的解决方案可能会有所帮助。无论如何，这个答案对 ubuntu 桌面用户非常有用。

# c - dup2() 函数的 max_fd 数是多少？

> ID：15610427
> 
> 赞同：0
> 
> 时间：2013-03-25T08:23:40.767
> 
> 标签：c, linux, operating-system

```
int main()
{
    int err1, err2;
    struct rlimit rlim;

    err = getrlimit(RLIMIT_NOFILE, &rlim);
    printf("max_fds: %d\n", rlim.rlim_max); // 4096

    err1 = dup2(1, 1023);  // OK
    err2 = dup2(2, 4090);  // error: EBADF

    return 0;
} 
```

像上面的代码一样，我使用 getrlimit 来获取每个进程的最大打开文件数，并打印 4096。但是，当我将大于 1023 的 newfd 传递到 dup2() 时，它总是返回错误 EBADF。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:30:03.790

你的平台有`getdtablesize()`吗？如果是这样，那就是看的地方。这可能是你对 fd 的真正限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:37:00.267

`getrlimit()`返回一个`rlimit`包含两个值的结构：

*   当前限制，称为，这是内核为相应资源强制执行的值**。**`rlim_cur`
*   **最大**限制，称为，它是无特权用户可以设置的`rlim_max`上限`rlim_cur`。

tl;博士，使用`rlim_cur`！

```
printf("max_fds: %d\n", rlim.rlim_cur); // probably 1024 by default on most distribs 
```

# xcode - OpenGL 函数在 XCode 4.6 中不可用

> ID：15610428
> 
> 赞同：1
> 
> 时间：2013-03-25T08:23:52.173
> 
> 标签：xcode, opengl

我最近将我的 XCode 更新到版本 4.6.1 现在，当我尝试运行 OpenGL 项目时，它会为我使用过的每个 OpenGL 函数提供编译错误，例如“使用未声明的标识符 GL_PROJECTION”和“使用未声明的标识符 glLoadIdentity()”它对每个 gl 函数都这样做。我在 XCode 4.6.1 上创建了一个新项目，添加了 OpenGL.framework，包括头文件 OpenGL/OpenGL.h

我打开了 OpenGL/OpenGL.h 头文件，令我惊讶的是，其中没有任何 OpenGL 函数。有一堆 CGL 函数。如果是这样，那么OpenGL函数在哪里？

我刚刚发现的另一个奇怪的事情是我能够在 .mm 文件中使用 OpenGL 函数，但不能在 .hpp 文件中使用（我正在使用模板，所以我创建了 hpp 文件）

谁能让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:39:24.087

你试过`<OpenGL/gl.h>`吗？

# android - 尝试在没有用户交互的情况下发送邮件：java.lang.NoClassDefFoundError: javax.activation.DataHandler

> ID：15610429
> 
> 赞同：1
> 
> 时间：2013-03-25T08:23:52.317
> 
> 标签：android, jakarta-mail, javax.activation

我正在尝试在没有用户交互的情况下发送邮件。我创建了以下类：

```
import java.util.Calendar;
import java.util.Properties;

import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.internet.AddressException;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMultipart;

public class MailService {
    // public static final String MAIL_SERVER = "localhost";

    private String toList;
    private String ccList;
    private String bccList;
    private String subject;
    final private static String SMTP_SERVER = "smtp.gmail.com";
    final private static String SMTP_TLSENABLE = "true";
    final private static String SMTP_AUTH = "true";
    final private static String SMTP_PORT = "587";
    final private static String SMTP_USERNAME = "mymail@gmail.com";
    final private static String SMTP_PASSWORD = "Password";

    private String from;
    private String txtBody;
    private String htmlBody;
    private String replyToList;
    private boolean authenticationRequired = false;

    public MailService(String from, String toList, String subject, String txtBody, String htmlBody) {
        this.txtBody = txtBody;
        this.htmlBody = htmlBody;
        this.subject = subject;
        this.from = from;
        this.toList = toList;
        this.ccList = null;
        this.bccList = null;
        this.replyToList = null;
        this.authenticationRequired = true;

    }

    public void sendAuthenticated() throws AddressException, MessagingException {
        authenticationRequired = true;
        send();
    }

    /**
     * Send an e-mail
     * 
     * @throws MessagingException
     * @throws AddressException
     */
    public void send() throws AddressException, MessagingException {
        Properties props = new Properties();

        // set the host smtp address
        props.put("mail.smtp.host", SMTP_SERVER);
        props.put("mail.user", from);

        props.put("mail.smtp.starttls.enable", SMTP_TLSENABLE);  // needed for gmail
        props.put("mail.smtp.auth", SMTP_AUTH); // needed for gmail
        props.put("mail.smtp.port", SMTP_PORT);  // gmail smtp port

        /*Authenticator auth = new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication("mobile@mydomain.com", "mypassword");
            }
        };*/

        Session session;

        if (authenticationRequired) {
            Authenticator auth = new SMTPAuthenticator();
            props.put("mail.smtp.auth", SMTP_AUTH);
            session = Session.getDefaultInstance(props, auth);
        } else {
            session = Session.getDefaultInstance(props, null);          
        }

        // get the default session
        session.setDebug(true);

        // create message
        Message msg = new javax.mail.internet.MimeMessage(session);

        // set from and to address
        try {
            msg.setFrom(new InternetAddress(from, from));
            msg.setReplyTo(new InternetAddress[]{new InternetAddress(from,from)});
        } catch (Exception e) {
            msg.setFrom(new InternetAddress(from));
            msg.setReplyTo(new InternetAddress[]{new InternetAddress(from)});
        }

        // set send date
        msg.setSentDate(Calendar.getInstance().getTime());

        // parse the recipients TO address
        java.util.StringTokenizer st = new java.util.StringTokenizer(toList, ",");
        int numberOfRecipients = st.countTokens();

        javax.mail.internet.InternetAddress[] addressTo = new javax.mail.internet.InternetAddress[numberOfRecipients];

        int i = 0;
        while (st.hasMoreTokens()) {
            addressTo[i++] = new javax.mail.internet.InternetAddress(st
                    .nextToken());
        }
        msg.setRecipients(javax.mail.Message.RecipientType.TO, addressTo);

        // parse the replyTo addresses
        if (replyToList != null && !"".equals(replyToList)) {
            st = new java.util.StringTokenizer(replyToList, ",");
            int numberOfReplyTos = st.countTokens();
            javax.mail.internet.InternetAddress[] addressReplyTo = new javax.mail.internet.InternetAddress[numberOfReplyTos];
            i = 0;
            while (st.hasMoreTokens()) {
                addressReplyTo[i++] = new javax.mail.internet.InternetAddress(
                        st.nextToken());
            }
            msg.setReplyTo(addressReplyTo);
        }

        // parse the recipients CC address
        if (ccList != null && !"".equals(ccList)) {
            st = new java.util.StringTokenizer(ccList, ",");
            int numberOfCCRecipients = st.countTokens();

            javax.mail.internet.InternetAddress[] addressCC = new javax.mail.internet.InternetAddress[numberOfCCRecipients];

            i = 0;
            while (st.hasMoreTokens()) {
                addressCC[i++] = new javax.mail.internet.InternetAddress(st
                        .nextToken());
            }

            msg.setRecipients(javax.mail.Message.RecipientType.CC, addressCC);
        }

        // parse the recipients BCC address
        if (bccList != null && !"".equals(bccList)) {
            st = new java.util.StringTokenizer(bccList, ",");
            int numberOfBCCRecipients = st.countTokens();

            javax.mail.internet.InternetAddress[] addressBCC = new javax.mail.internet.InternetAddress[numberOfBCCRecipients];

            i = 0;
            while (st.hasMoreTokens()) {
                addressBCC[i++] = new javax.mail.internet.InternetAddress(st
                        .nextToken());
            }

            msg.setRecipients(javax.mail.Message.RecipientType.BCC, addressBCC);
        }

        // set header
        msg.addHeader("X-Mailer", "MyMailer");
        msg.addHeader("Precedence", "bulk");
        // setting the subject and content type
        msg.setSubject(subject);

        Multipart mp = new MimeMultipart("related");

        // set body message
        MimeBodyPart bodyMsg = new MimeBodyPart();
        bodyMsg.setText(txtBody, "iso-8859-1"); *THIS IS THE ERROR LINE*
        bodyMsg.setContent(htmlBody, "text/html");
        mp.addBodyPart(bodyMsg);
        msg.setContent(mp);

        // send it
        try {
            javax.mail.Transport.send(msg);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    /**
     * SimpleAuthenticator is used to do simple authentication when the SMTP
     * server requires it.
     */
    private static class SMTPAuthenticator extends javax.mail.Authenticator {

        @Override
        protected PasswordAuthentication getPasswordAuthentication() {

            String username = SMTP_USERNAME;
            String password = SMTP_PASSWORD;

            return new PasswordAuthentication(username, password);
        }
    }

    public String getToList() {
        return toList;
    }

    public void setToList(String toList) {
        this.toList = toList;
    }

    public String getCcList() {
        return ccList;
    }

    public void setCcList(String ccList) {
        this.ccList = ccList;
    }

    public String getBccList() {
        return bccList;
    }

    public void setBccList(String bccList) {
        this.bccList = bccList;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public void setFrom(String from) {
        this.from = from;
    }

    public void setTxtBody(String body) {
        this.txtBody = body;
    }

    public void setHtmlBody(String body) {
        this.htmlBody = body;
    }

    public String getReplyToList() {
        return replyToList;
    }

    public void setReplyToList(String replyToList) {
        this.replyToList = replyToList;
    }

    public boolean isAuthenticationRequired() {
        return authenticationRequired;
    }

    public void setAuthenticationRequired(boolean authenticationRequired) {
        this.authenticationRequired = authenticationRequired;
    }

} 
```

我下载了 JavaMail [http://www.oracle.com/technetwork/java/javamail/index-138643.html](http://www.oracle.com/technetwork/java/javamail/index-138643.html) 和 Activation.jar：[http://www.oracle.com/technetwork/java/jaf11-139815。 html#下载](http://www.oracle.com/technetwork/java/jaf11-139815.html#download)

将 mail.jar 和 activation.jar 添加到 lib 文件夹。

但是，一旦我调用了以下活动：

```
MailService mailer = new MailService("somemail@somemail.com","somemail@somemail.com","Subject","TextBody", "<b>HtmlBody</b>");
            try {
                mailer.sendAuthenticated();
            } catch (Exception e) {
                Log.e("MAIL", "Failed sending email.", e);
            } 
```

我收到以下错误：

```
03-25 09:18:37.999: E/dalvikvm(12922): Could not find class 'javax.activation.DataHandler', referenced from method javax.mail.internet.MimeBodyPart.updateHeaders
03-25 09:18:37.999: W/dalvikvm(12922): VFY: unable to resolve new-instance 1138 (Ljavax/activation/DataHandler;) in Ljavax/mail/internet/MimeBodyPart;
03-25 09:18:37.999: D/AndroidRuntime(12922): Shutting down VM
03-25 09:18:37.999: W/dalvikvm(12922): threadid=1: thread exiting with uncaught exception (group=0x40018578)
03-25 09:18:38.009: E/AndroidRuntime(12922): FATAL EXCEPTION: main
03-25 09:18:38.009: E/AndroidRuntime(12922): java.lang.NoClassDefFoundError: javax.activation.DataHandler 
```

我尝试将 jar 文件添加到构建路径，但仍然相同。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T14:53:27.493

澄清一下 - activation.jar 依赖于核心 Java rt.jar 库中的类，这些类在 Android 运行时中没有提供，因此失败。

[javamail-android](http://code.google.com/p/javamail-android/)库由第三方开发人员精心整理，并提供所需的 JavaMail 功能，而无需此依赖项。它们现在可能有点老了（2009 年），但它们足以胜任大多数功能。

# sql - 嵌入式选择：在行中连接查询

> ID：15610431
> 
> 赞同：0
> 
> 时间：2013-03-25T08:23:56.503
> 
> 标签：sql, sql-server-2008, powerbuilder

我可以以某种方式仅在 mssql 查询中执行此操作，没有 SP 或声明吗？因为我要将这个选择嵌入到我的 Powerbuilder 中。

```
ID      text
1       a
1       b
1       c
2       a
2       d
3       e

into

ID      text
1       abc
2       ad
3       e 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:38:29.127

我不确定我是否理解您的问题，但请查看此[**演示**](http://sqlfiddle.com/#!3/ef308/11)：

```
SELECT DISTINCT
   ID,
   (SELECT ''+text FROM Test WHERE ID=A.ID FOR XML PATH('')) AS text
FROM 
   Test A 
```

结果：

```
ID  TEXT
1   abc
2   ad
3   e 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:40:49.227

尝试如下查询

```
 SELECT
   ID, 
   text= 
   replace(
   STUFF((SELECT ','+text FROM test WHERE ID=A.ID FOR XML PATH('')) , 1 , 1 , '' )
   ,',','')
   FROM 
   test A group by ID 
```

[SQLFiddle 演示在这里](http://www.sqlfiddle.com/#!3/ef1de/6)

# javascript - 检测移动设备

> ID：15610433
> 
> 赞同：3
> 
> 时间：2013-03-25T08:23:58.560
> 
> 标签：javascript, mobile, detection

我有一个 Javascript 代码，我可以在其中检测是否从移动设备查看我的网站。下面是我的代码：

```
(function() {
    if (navigator.userAgent.match(/Android/i)
            || navigator.userAgent.match(/webOS/i)
            || navigator.userAgent.match(/iPhone/i)
            || navigator.userAgent.match(/iPad/i)
            || navigator.userAgent.match(/iPod/i)
            || navigator.userAgent.match(/BlackBerry/i)
            || navigator.userAgent.match(/Windows Phone/i)
            || navigator.userAgent.match(/Opera Mini/i)
            || navigator.userAgent.match(/IEMobile/i)
            ) {
        isMobile = true;
    }
})(); 
```

此代码是否涵盖所有可能的情况，或者某些设备是否有可能绕过此检查？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-25T08:33:14.003

这是迄今为止我发现的最好的：

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)并且是免费的。

例如 jQuery：1）从上面的站点下载文件 2）下面的完整列表

```
/**
 * jQuery.browser.mobile (http://detectmobilebrowser.com/)
 *
 * jQuery.browser.mobile will be true if the browser is a mobile device
 *
 **/
(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera); 
```

3）使用以下内容：

/** * jQuery.browser.mobile ( [http://detectmobilebrowser.com/](http://detectmobilebrowser.com/) ) * * 如果浏览器是移动设备，jQuery.browser.mobile 将为真 * **/

基本上，如果您编写警报：`alert(jQuery.browser.mobile);`在上述代码之后，弹出窗口将根据您的移动设备显示 true 或 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:30:10.527

1.  基于 Java 的移动设备（如三星 BADA 等）

2.  MODU 是另一个将通过此脚本的另一个，因为它在“Qualcomm 的 Brew 操作系统”上运行

这两个知识我有，不知道还有没有。。

# objective-c - 根据自定义对象值对数组进行排序

> ID：15610434
> 
> 赞同：0
> 
> 时间：2013-03-25T08:23:59.017
> 
> 标签：objective-c, nsarray, nssortdescriptor

我需要`Sort`一个`array`自定义对象。

很简单，`object`它存储一个 x 和 y 坐标，例如：

```
XYPointObject.xCoordinate = [NSNumber];
XYPointObject.yCoordinate = [NSNumber]; 
```

我有一个`array`可以存储多达 676 个这样的对象，我需要将它们`sort`按数字顺序存储在 x 值中，并且 y 值也按顺序连接到 x 值。例如，如果输入坐标是：

```
23,5 | 
5,7 | 
1,4 | 
1,7 | 
21,8 | 
9,12 | 
16,19 
```

排序后的数组将具有顺序

```
1,4 | 1,7 | 5,7 | 9,12 | 16,19 | 23,5 
```

请记住，最大 x,y 坐标为 25 (25,25)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:02:16.027

利用：

```
NSSortDescriptor *xSorter = [[NSSortDescriptor alloc] initWithKey:@"xCoordinate" ascending:YES];
NSSortDescriptor *ySorter = [[NSSortDescriptor alloc] initWithKey:@"yCoordinate" ascending:YES];
NSArray *sortedArray=[array sortedArrayUsingDescriptors:@[xSorter,ySorter]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:28:05.503

你有没有看过[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)？

这是您需要的方法：

```
-[NSArray sortedArrayUsingComparator:] 
```

# android - Android 启动服务永远不会启动

> ID：15610437
> 
> 赞同：5
> 
> 时间：2013-03-25T08:24:19.830
> 
> 标签：android, service, broadcastreceiver, startup

我是 Android 编程新手。我有一个在启动时启动服务的接收器，但它似乎从未启动。你能告诉我我做错了什么吗？我不知道如何调试它。您能解释一下如何调试 Android 启动服务吗？

这是我的代码。先感谢您

Recibidor.java：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class Recibidor extends BroadcastReceiver {

   @Override
   public void onReceive(Context context, Intent intent) {
      Toast.makeText(context, "Iniciando Recibidor", Toast.LENGTH_LONG).show();
      final String TAG = "Recibidor";
      Log.i(TAG, "Iniciando Recibidor");

      if (intent.getAction().equalsIgnoreCase("android.intent.action.BOOT_COMPLETED")) {
         Toast.makeText(context, "Iniciando Intent", Toast.LENGTH_LONG).show();
         Log.i(TAG, "Iniciando Intent");

         Intent servicio = new Intent();
         servicio.setAction("com.pruebas.Servicio");
         context.startService(servicio);

         Log.i(TAG, "Iniciando Servicio");
         Toast.makeText(context, "Iniciando Servicio", Toast.LENGTH_LONG).show();
       }

   }
} 
```

Servicio.java

```
package com.pruebas;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class Servicio extends Service {
   private final String TAG = "Servicio";

   @Override
   public IBinder onBind(Intent arg0) {
      return null;
   }

   @Override
   public void onCreate() {
      super.onCreate();
      Log.i(TAG, "ON CREATE");
      Toast.makeText(this, "ON CREATE", Toast.LENGTH_LONG).show();
   }

   @Override
   public void onDestroy() {
      super.onDestroy();
      Log.i(TAG, "ON DESTROY");
      Toast.makeText(this, "ON DESTROY", Toast.LENGTH_LONG).show();
   }

   @Override
   public int onStartCommand(Intent intent, int flags, int startId) {
      startForeground(0, null);
      Log.i(TAG, "ON START COMMAND");
      Toast.makeText(this, "ON START COMMAND", Toast.LENGTH_LONG).show();
      return START_STICKY;
   }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pruebas"
    android:versionCode="1"
    android:versionName="1.0"
    android:installLocation="internalOnly" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

   <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <application>
        <service android:name=".Servicio">
            <intent-filter>
                <action android:name="com.pruebas.Servicio"/>
            </intent-filter>
        </service> 

        <receiver android:name=".Recibidor" android:enabled="true" android:exported="true" 
android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </receiver>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:59:32.967

您发布的代码将永远无法在更高版本的 Android 上运行。为了防止恶意软件，在更高版本的 Android 中，无法`BroadcastReceiver`在清单中自动注册 a，*直到*用户从应用启动器手动启动您的应用。

您将需要`Activity`使用 MAIN/LAUNCHER`<intent-filter>`条目创建一个。一旦用户手动启动应用程序一次，您的清单注册`BroadcastReceiver`就会发生，并且它将保持注册状态，除非用户使用“设置”的“管理应用程序”部分中的“强制停止”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:30:33.870

应用程序需要安装在内部存储中才能接收 BOOT_COMPLETED 意图。看到这个问题：[我的 BroadcastReceiver 在我的 N1 启动后没有收到 BOOT_COMPLETED 意图。请帮忙！](https://stackoverflow.com/questions/3935321/my-broadcastreceiver-is-not-receiving-the-boot-completed-intent-after-my-n1-boot)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:34:26.967

尝试移动

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

超出“接收者”标签。

[http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms](http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms)

# git - 如何将所有内容放在一个 HEAD_FETCH HEAD 和 ORIG_HEAD 中

> ID：15610438
> 
> 赞同：1
> 
> 时间：2013-03-25T08:24:20.710
> 
> 标签：git, branching-and-merging

我是使用 Git 的新手，更具体地说是 egit 进入 eclipse。

我正在尝试将所有提交合并到一个分支中，但我得到的是我不能这样做，因为cherry-pick 不允许两个不同的父母。

从我的遥控器获取后，我不知道出了什么问题。在历史树中，我可以看到 Origin/Master 和 FETCH_HEAD 似乎在过去的某个地方丢失了。我怎样才能将这些更改合并到主分支中以继续进行？

![历史树](../Images/cb92b7d6cff268738f3c401c7dd79257.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:32:53.427

首先，樱桃采摘不会合并！它接受变更集并应用它们——作为补丁，因此不记录祖先信息。

其次，“将所有提交合并到一个分支”这句话是什么意思？您可以将一个或多个分支合并到另一个分支中，而不是特定的提交，更不用说“所有”提交了。

那么你真正想做的是什么？并入? `origin/master`_ `master`然后就

```
$ git checkout master
$ git merge origin/master 
```

此时您可能会遇到冲突；在这种情况下，您需要解决它们中的每一个（用于`git status`查看哪些路径处于冲突状态；`git add`在解决特定文件中的冲突后使用以暂存其更新内容以进行新提交，从而将该文件的冲突标记为已解决） ，然后`git commit`是结果。

不要试图`FETCH_HEAD`手动弄乱 - 它是一个管道级别的参考，主要用于将它调用`git pull`的结果传达给它之后的调用。`git fetch``git merge`

# matlab - 从matlab中的文本文件中读取日期时间

> ID：15610441
> 
> 赞同：1
> 
> 时间：2013-03-25T08:24:28.610
> 
> 标签：matlab, datetime

我在第一列中有以下带有日期时间的文本文件。该文件是：

```
23/7/1998 20:00;"   1.8 "
23/7/1998 21:00;"   1.7 "
23/7/1998 22:00;"   2.2 "
23/7/1998 23:00;"   2.5 "
24/7/1998 0:00;"    2.2 "
24/7/1998 1:00;"    2.3 "
24/7/1998 2:00;"    2.4 "
24/7/1998 3:00;"    1.8 "
24/7/1998 4:00;"    1.9 " 
```

我想将第一列（日期时间）作为字符串。我尝试了该功能`datenum`，但没有成功。有什么帮助吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:58:14.263

您可以简单地逐行读取文件并将所需数据存储到元胞数组中，如下所示：

```
f_read = fopen('testcase.txt','r');    %The file 'testcase.txt' would contain the data of interest.
pat = '(?<datetime>[^;]*)(.*)';    %Regular expression to extract required field.
datetime = cell(0,1);
line = fgets(f_read);
while(line ~= -1)    %Till the end of file.
    line = regexp(line, pat, 'names');    %Extracts first column from input line.
    datetime = [datetime;line.datetime];    %Append result as next row.
    line = fgets(f_read);
end 
```

对于您的输入，结果将是：

```
>> datetime

datetime = 

    '23/7/1998 20:00'
    '23/7/1998 21:00'
    '23/7/1998 22:00'
    '23/7/1998 23:00'
    '24/7/1998 0:00'
    '24/7/1998 1:00'
    '24/7/1998 2:00'
    '24/7/1998 3:00'
    '24/7/1998 4:00' 
```

可以按如下方式访问每个单独的记录：

```
>> datetime{1}

ans =

23/7/1998 20:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:18:56.040

您需要手动读取字符串：

```
fid = fopen('yourfile.txt','r');
aux_cell  = textscan(fid,'%s');
date_cell = aux_cell{1}(1:4:end);
fclose(fid); 
```

# objective-c - xcode中的metaio sdk错误

> ID：15610445
> 
> 赞同：0
> 
> 时间：2013-03-25T08:24:43.353
> 
> 标签：objective-c, xcode, metaio

我正在制作应用程序并使用 metaio sdk，但是当我使用此[链接使用此 sdk 创建新项目时](https://dev.metaio.com/sdk/getting-started/ios/creating-new-ar-application/)

我收到很多错误，例如架构 armv7 的未定义符号：

```
 "_deflateReset", referenced from:
  _pno_write_finish_row in metaioSDK(pngwutil.o)
  _pno_write_compressed_data_out in metaioSDK(pngwutil.o)
 "_glGetUniformLocation", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJzgGyrIMDmdkaJiaJYeaJVgNLXEPKcPKfi in metaioSDK(COpenGLSLESMaterialRenderer.o)
"_glUniform1fv", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJzgGyrIMDmdkaJiaJYeaJVgNLXEPKcPKfi in metaioSDK(COpenGLSLESMaterialRenderer.o)
"_glUniformMatrix2fv", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJzgGyrIMDmdkaJiaJYeaJVgNLXEPKcPKfi in metaioSDK(COpenGLSLESMaterialRenderer.o)
   "_glUniformMatrix4fv", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJzgGyrIMDmdkaJiaJYeaJVgNLXEPKcPKfi in metaioSDK(COpenGLSLESMaterialRenderer.o)
 "_glBindAttribLocation", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJznCKmZPBLmyHOpEv in metaioSDK(COpenGLSLESMaterialRenderer.o)
  "_glLinkProgram", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJznCKmZPBLmyHOpEv in metaioSDK(COpenGLSLESMaterialRenderer.o)
  "_glGetProgramiv", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJznCKmZPBLmyHOpEv in metaioSDK(COpenGLSLESMaterialRenderer.o)
  "_glShaderSource", referenced from:
   __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJzPVbSoUAGLmjSuQEjPKc in metaioSDK(COpenGLSLESMaterialRenderer.o)
 "_glGetShaderiv", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJzPVbSoUAGLmjSuQEjPKc in metaioSDK(COpenGLSLESMaterialRenderer.o)
  "_glAttachShader", referenced from:
  __ZN3m3d5videoKVJwAPrNICbLRWPbkQEhGudKNJzPVbSoUAGLmjSuQEjPKc in metaioSDK(COpenGLSLESMaterialRenderer.o)
  "_glGetShaderInfoLog", referenced from: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T06:07:33.997

看来您需要将 OpenGLES.framework 添加到您的项目中。在 Xcode 中，选择您的目标，然后选择 Summary 选项卡。向下滚动到**链接框架和库**部分。单击该部分底部的 + 符号并选择 OpenGLES.framework。

# apache - 如何设置 htaccess 正确（重定向）

> ID：15610446
> 
> 赞同：1
> 
> 时间：2013-03-25T08:24:46.360
> 
> 标签：apache, .htaccess, redirect

我所有的网址都有以下架构：

```
domain.de/LANGUAGE/CATEGORY/PAGE.html 
```

此网址将通过以下方式处理：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)/([^/]*)/([^/]*)\.html$ /?lang=$1&subid=$2&id=$3 [L,QSA] 
```

所以我想要的是以下重定向：

```
#Start page:
domain.de -> www.domain.de/de/abc/index.html
domain.de/LANG/ -> www.domain.de/LANG/abc/index.html
www.domain.de -> www.domain.de/de/abc/index.html
wwww.domain.de/LANG/ -> www.domain.de/LANG/abc/index.html

#In general:
all pages without www should be redirected to page with www 

#subdomain
subdomain.domain.de -> www.domain.de/de/abc/xy.html 
```

我的开始：

```
RewriteEngine On
# domain.de -> www.domain.de/de/abc/index.html
RewriteCond %{HTTP_HOST} ^(domain\.(de))$
RewriteRule .+ http://www.%1/%2/abc/index.html$0 [L,R=301]

# www.domain.de/de -> www.domain.de/de/abc/index.html
RewriteCond %{HTTP_HOST} ^www\.domain\.(de)$
RewriteRule ^%1/?$/abc index.html [L,R=301]

# subdomain.domain.de to http://www.domain.de/de/abc/xy.html
RewriteCond %{HTTP_HOST} ^subdomain\.(domain\.(de))$
RewriteRule .+ http://www.%1/%2/abc/xy.html [L,R=301] 
```

但现在我不知道如何继续。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:03:21.440

您可以使用以下代码：

```
RewriteEngine On
RewriteBase /

# domain.de -> www.domain.de/de/abc/index.html
RewriteCond %{HTTP_HOST} ^domain\.de$ [NC]
RRewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# subdomain.domain.de to http://www.domain.de/de/abc/xy.html
RewriteCond %{HTTP_HOST} ^subdomain\.(domain\.de)$ [NC]
RewriteRule ^$ http://www.%1/de/abc/xy.html [L,R=301]

# www.domain.de/de -> www.domain.de/de/abc/index.html
RewriteCond %{HTTP_HOST} ^www\.domain\.de$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{ENV:REDIRECT_STATUS} !200
RewriteRule ^(de|nl|en)/?$ /$1/de/abc/index.html [L] 
```

# hadoop - 覆盖 RecordReader 以立即读取段落而不是行

> ID：15610449
> 
> 赞同：6
> 
> 时间：2013-03-25T08:24:51.587
> 
> 标签：hadoop

我正在重写 RecordReader 类的方法“next”和 TextInputFormat 类的“getRecordReader”，以便将整个段落发送到映射器而不是逐行发送。（我使用的是旧的 api，并且我的段落的定义是附加的，直到我的文本文件中有一个空行。）
下面是我的代码：

```
public class NLinesInputFormat extends TextInputFormat  
{  
   @Override
   public RecordReader<LongWritable, Text> getRecordReader(InputSplit split, JobConf conf, Reporter reporter)throws IOException     {   
        reporter.setStatus(split.toString());  
        return new ParagraphRecordReader(conf, (FileSplit)split);
    }
}

public class ParagraphRecordReader implements RecordReader<LongWritable, Text> 
{
        private LineRecordReader lineRecord;
        private LongWritable lineKey;
        private Text lineValue;
        public ParagraphRecordReader(JobConf conf, FileSplit split) throws IOException {
            lineRecord = new LineRecordReader(conf, split);
            lineKey = lineRecord.createKey();
            lineValue = lineRecord.createValue();
        }

        @Override
        public void close() throws IOException {
            lineRecord.close();
        }

        @Override
        public LongWritable createKey() {
            return new LongWritable();

        }

        @Override
        public Text createValue() {
            return new Text("");

        }

        @Override
        public float getProgress() throws IOException {
            return lineRecord.getPos();

        }

        @Override
        public synchronized boolean next(LongWritable key, Text value) throws IOException {
            boolean appended, gotsomething;
            boolean retval;
            byte space[] = {' '};
            value.clear();
            gotsomething = false;
            do {
                appended = false;
                retval = lineRecord.next(lineKey, lineValue);
                if (retval) {
                    if (lineValue.toString().length() > 0) {
                        byte[] rawline = lineValue.getBytes();
                        int rawlinelen = lineValue.getLength();
                        value.append(rawline, 0, rawlinelen);
                        value.append(space, 0, 1);
                        appended = true;
                    }
                    gotsomething = true;
                }
            } while (appended);

            //System.out.println("ParagraphRecordReader::next() returns "+gotsomething+" after setting value to: ["+value.toString()+"]");
            return gotsomething;
        }

        @Override
        public long getPos() throws IOException {
            return lineRecord.getPos();
        }
    } 
```

问题：
1\. 我没有找到任何关于如何做到这一点的具体指南，所以可能是我做错了什么，请评论任何建议？
2\. 我能够正确编译它，但是当我运行我的工作时，我的映射器一直在运行，我无法弄清楚问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:18:42.370

你的代码对我来说非常好。我所做的唯一更改是将这些类作为内部类并使它们成为静态的。

输入文件如下：

```
This is awesome.
WTF is this.

This is just a test. 
```

映射器代码如下所示：

```
@Override
public void map(LongWritable key, Text value, OutputCollector<Text, Text> output, Reporter reporter)
    throws IOException {

    System.out.println(key+" : "+value);
} 
```

**输出**是：

```
0 : This is awesome. WTF is this. 
0 : This is just a test. 
```

我相信你不会忘记设置输入格式，但以防万一，设置如下：

```
conf.setInputFormat(NLinesInputFormat.class); 
```

# java - 根据网页请求在服务器上动态创建 3d 图像

> ID：15610450
> 
> 赞同：0
> 
> 时间：2013-03-25T08:25:08.840
> 
> 标签：java, web, 3d, jpeg, render

嗨，这是我在这里的第一个问题，我希望得到一些答案。我有一个项目，用于根据网页的请求动态创建 jpeg（3d 渲染图像）。我试图描述的最好的例子是[www.shoesofprey.com](http://www.shoesofprey.com) 。所以我需要服务器上的部分——3d 渲染的东西。到目前为止，我发现这可以通过 java 3d 和一些 python 应用程序完成，但我会感谢任何好的建议或一些例子。请仅针对我知道如何继续并执行从网页形成的一些控制台级别命令的 3d 内容给出您的答案，但 3d 部分对我来说是个大问题。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:31:49.230

也许我有点太直率了，但您似乎正在寻找一种解决方案，您几乎可以在其中插入一些参数并获得 3D 渲染。

我真的不知道您将如何实现它，但我认为不同的 3D 软件包（例如 AutoCAD）具有可用于渲染模型的命令行提示。

[http://www.cadforum.cz/cadforum_en/render-max-files-from-dos-commandline-tip6825](http://www.cadforum.cz/cadforum_en/render-max-files-from-dos-commandline-tip6825)

然后通过您使用的任何语言调用此命令。

这是特定于 CAD 的，但也许您可以在 google 上搜索并找到与您要使用的包相关的内容。

# forms - RestEasy：是否可以发布两个复杂的对象？

> ID：15610453
> 
> 赞同：0
> 
> 时间：2013-03-25T08:25:43.103
> 
> 标签：forms, post, resteasy

我正在尝试使用带有 @POST 注释的 RestEasy 将两个复杂对象作为参数传输。

```
@POST
@Path("/save")
@Consumes("application/json")
public void save(ComplexeObjectAleph objectAleph, ComplexeObjectBeth objectBeth); 
```

只有一个参数是可以的，但有两个 - 我得到异常：

```
Caused by: java.io.EOFException: No content to map to Object due to end of input
    at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2775)
    at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2691)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1315)
    at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:419)
    at org.jboss.resteasy.core.interception.MessageBodyReaderContextImpl.proceed(MessageBodyReaderContextImpl.java:105)
    at org.jboss.resteasy.plugins.interceptors.encoding.GZIPDecodingInterceptor.read(GZIPDecodingInterceptor.java:63)
    at org.jboss.resteasy.core.interception.MessageBodyReaderContextImpl.proceed(MessageBodyReaderContextImpl.java:108)
    at org.jboss.resteasy.core.MessageBodyParameterInjector.inject(MessageBodyParameterInjector.java:169)
    at org.jboss.resteasy.core.MethodInjectorImpl.injectArguments(MethodInjectorImpl.java:136)
    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:159)
    at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257)
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222)
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211)
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:542)
    ... 22 more 
```

示例：[https ://github.com/markstein/de.mosst/tree/master/PlayareaRestEasy](https://github.com/markstein/de.mosst/tree/master/PlayareaRestEasy)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:37:33.837

这是可能的，但要小心。

这两个参数必须用 注释`@Form`。

```
@Path("playarea")
public interface PlayareaRsInterface {

    @POST
    @Path("save")
    @Produces(MediaType.APPLICATION_JSON)
    public void save(@Form ComplexeObjectAleph objectAleph, @Form ComplexeObjectBeth objectBeth);

} 
```

并且这两个类的属性必须有`@FormParam(...)`注解：

```
public class ComplexeObjectAleph {

    @FormParam("aleph")
    public String aleph;

}

public class ComplexeObjectBeth {

    @FormParam("beth")
    public String beth;

} 
```

但要注意， 的值`@FormParam(...)`必须不相等，否则 RestEasy 无法正确解析数据。可能是 RestEasy 的错误。

# web - 如何添加注册并允许注册用户在我的博客上发帖？

> ID：15610454
> 
> 赞同：0
> 
> 时间：2013-03-25T08:25:48.537
> 
> 标签：web, blogs, blogger

如何添加注册并允许注册用户在我的博客上发帖？

我有一个博客，我想在我的博客中添加注册功能，并允许注册用户在我的博客上发布文章。

请有人告诉我如何完成这项任务。

我从 Google 博客创建了新博客，它是“ [http://ollmobileapps.blogspot.com/](http://ollmobileapps.blogspot.com/) ”

我没有任何代码，这就是为什么我要问 b.coz 我看过一些博客，其中我找到了注册并提交文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:07:26.807

使用 Blogger 是不可能的。试试 Wordpress

# vb.net - 禁用时保持按钮颜色不变

> ID：15610460
> 
> 赞同：2
> 
> 时间：2013-03-25T08:26:05.367
> 
> 标签：vb.net, winforms, button

当我禁用它时，我想保持按钮颜色不会变为灰色。我使用图像作为背景颜色，并将其设置`ForeColor`为白色。当按钮被禁用时，我想保持原样，而不是将其更改为灰色。我的代码是：

```
Private Sub btnItemNonTaxable_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnItemNonTaxable.Click
    If Shift = 0 Then
        MessageBox2("Please Begin the Shift before you start the transaction.", MessageBoxButtons.OK, MessageBoxIcon.Exclamation)
        Exit Sub
    End If
    txtNonInventoryQuantity.Text = "1"
    pnlOpenItem.Visible = True
    LabelNonInventory.Text = "Non-Inventory Non-Taxable"
    isOpenItem = True
    chkTax1.Visible = False
    chkTax1.Checked = False
    txtPrice.Focus()
    btnCashDrop.Enabled = False
    If Not btnCashDrop.Enabled Then
        btnCashDrop.Image = My.Resources.small_green
btnCash.ForeColor = Color.White
    End If 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:03:35.670

实际上，在其模式更改期间，我们必须手动`redraw`使用所需的 。试试下面的代码来满足你的需要。`text``button``color``enable`

[**注意：**代码测试用`IDE`]

```
Private Sub Button1_EnabledChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.EnabledChanged
        Button1.ForeColor = If(sender.enabled = False, Color.Blue, Color.Red)
End Sub

Private Sub Button1_Paint(ByVal sender As Object, ByVal e As System.Windows.Forms.PaintEventArgs) Handles Button1.Paint

    Dim btn = DirectCast(sender, Button)
    Dim drawBrush = New SolidBrush(btn.ForeColor)
    Dim sf = New StringFormat With {.Alignment = StringAlignment.Center, .LineAlignment = StringAlignment.Center}
    Button1.Text = String.Empty
    e.Graphics.DrawString("Button1", btn.Font, drawBrush, e.ClipRectangle, sf)
    drawBrush.Dispose()
    sf.Dispose()

End Sub 
```

# javascript - 使用 JavaScript 的 Tumblr 箭头键导航

> ID：15610462
> 
> 赞同：0
> 
> 时间：2013-03-25T08:26:10.520
> 
> 标签：javascript, navigation, tumblr

如何使用 JavaScript 为 Tumblr 主题创建箭头键导航？

我正在尝试编写一些 JavaScript 以允许 Tumblr 主题的用户使用`left`和`right`箭头键来导航页面。

我已经设法使基本概念起作用：

```
document.onkeydown = function(event) {
    event = event || window.event;
    var key = event.keyCode;
    var currentPage = {CurrentPage};
    // left arrow key
    if (key == 37) {
        var previousPage = currentPage - 1;
        window.location.href = "/page/" + previousPage;
    }
    // right arrow key
    if (key == 39) {
        var nextPage = currentPage + 1;
        window.location.href = "/page/" + nextPage;
    }
}; 
```

这遇到了用户能够超越最后一页并且可能（我不确定）在永久链接页面上工作的问题。`{PreviousPage}`但是，对 URL 使用和变量会容易得多`{NextPage}`，但由于某种原因，我无法让它们在 JavaScript 中工作。即使我在它们前面加上 JS（即`{JSPreviousPage}`和`{JSNextPage}`），尽管变量在 HTML 中工作正常，但它们仍然没有解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:15:12.357

将下一个和上一个 ID 添加到您的分页锚链接。然后试试这个：

```
$(document).keydown(function(e) {
var url = false;
    // Left arrow key code
    if (e.which == 37) {  
        url = $('#prev').attr('href');
    }
    // Right arrow key code
    else if (e.which == 39) {  
        url = $('#next').attr('href');
    }

    if (url) {
        window.location = url;
  } 
```

});

# jquery - jquery的Chrome扩展外部ajax调用不起作用

> ID：15610463
> 
> 赞同：1
> 
> 时间：2013-03-25T08:26:10.997
> 
> 标签：jquery, google-chrome-extension, cross-domain

我真的用谷歌搜索了很多，但没有找到涵盖我的问题的答案。

我正在开发一个 chrome 扩展，我想通过 jquery 进行 ajax 调用。
我是这样写的：
**popup.js**

```
$(function()
{
    $('#btn').click(function()
    {
        $('#wait').html('loading...');
        jQuery.getJSON("http://domain.com/extension_php_files/generate.php?callback=?",
        {id:25}, 
        function(data) 
        {
            $('#wait').html('');
            console.log( JSON.stringify(data) ) 
            $.each(data, function(key, val) 
            {
                alert(key + '  ' + val);
            });
        });
    });
}); 
```

这是我的**popup.html**

```
<!doctype html>
<html>
  <head>
    <title></title>
    <script src="jquery.js"></script>
    <script src="popup.js"></script>
  </head>
  <body>
  <a href="#" id="btn">SEND</a><br /><br /><br /><br />
  <span id="wait"></span>
  </body>
</html> 
```

和 **manifest.json**

```
{
  "manifest_version": 2,

  "name": "black",
  "description": "black here",
  "version": "1.0",

  "permissions": [
    "http://domain.com/*"
  ],
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  }
} 
```

当我单击`SEND`按钮时，我看到`Loading...`但它永远不会进入成功功能。我用谷歌搜索但无法找出问题所在。
我究竟做错了什么？

PS：我的服务器端代码工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:54:00.973

我有时也很难处理 jquery ajax 请求，我最好的解决方案就是用本机 javascript Ajax 代码替换该代码。尝试使用 XMLHttpRequest 发出请求，如下所示：

```
var xhr = new XMLHttpRequest();
     xhr.open("GET", "http://domain.com/", true);
     xhr.onreadystatechange = function() {
      if (xhr.readyState == 4) {

          // paste your code here 
       }
     }
     xhr.send(); 
```

用您的完整网址替换[http://domain.com/](http://domain.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:51:48.590

感谢[**Rob W**](https://stackoverflow.com/users/938089/rob-w)的帮助。

我删除`?callback=?`了网址的末尾。在服务器端页面上，我做了这样的事情：

```
$id = $_GET['$id'];
$arr = array ("id"=>$id,"name"=>"Siamak","lname"=>"Aghaeipour","age"=>"24");
$jsonData =  json_encode($arr);
echo $jsonData; 
```

它工作正常。

# php - 根据用户 ID 重定向

> ID：15610465
> 
> 赞同：0
> 
> 时间：2013-03-25T08:26:14.413
> 
> 标签：php, mysql, redirect

所以我有这个登录页面

```
<?php
    require("common.php"); 
    $submitted_username = '';
    if(!empty($_POST))
    {
        $query = "
            SELECT
                id,
                username,
                password,
                salt,
                email
            FROM users
            WHERE
                username = :username
        ";
        $query_params = array(
            ':username' => $_POST['username']
        );

        try
        {
            $stmt = $db->prepare($query);
            $result = $stmt->execute($query_params);
        }
        catch(PDOException $ex)
        {
            die("Failed to run query: " . $ex->getMessage());
        }
        $login_ok = false;
        $row = $stmt->fetch();
        if($row)
        {
            $check_password = hash('sha256', $_POST['password'] . $row['salt']);
            for($round = 0; $round < 65536; $round++)
            {
                $check_password = hash('sha256', $check_password . $row['salt']);
            }

            if($check_password === $row['password'])
            {
                $login_ok = true;
            }
        }
        if($login_ok)
        {
            unset($row['salt']);
            unset($row['password']);
            $_SESSION['user'] = $row;
            header("Location: private.php");
            die("Redirecting to: private.php");
        }
        else
        {
            print("Login Failed.");
            $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8');
        }
    }

?>
<h1>Login</h1>
<form action="login.php" method="post">
    Username:<br />
    <input type="text" name="username" value="<?php echo $submitted_username; ?>" />
    <br /><br />
    Password:<br />
    <input type="password" name="password" value="" />
    <br /><br />
    <input type="submit" value="Login" />
</form> 
```

会话（common.php）

```
<?php

    // These variables define the connection information for your MySQL database
    $username = "root";
    $password = "";
    $host = "localhost";
    $dbname = "phplogin";

    $options = array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8');
    try
    {
        $db = new PDO("mysql:host={$host};dbname={$dbname};charset=utf8", $username, $password, $options);
    }
    catch(PDOException $ex)
    {
        die("Failed to connect to the database: " . $ex->getMessage());
    }
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_ASSOC);

    if(function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc())
    {
        function undo_magic_quotes_gpc(&$array)
        {
            foreach($array as &$value)
            {
                if(is_array($value))
                {
                    undo_magic_quotes_gpc($value);
                }
                else
                {
                    $value = stripslashes($value);
                }
            }
        }

        undo_magic_quotes_gpc($_POST);
        undo_magic_quotes_gpc($_GET);
        undo_magic_quotes_gpc($_COOKIE);
    }

    header('Content-Type: text/html; charset=utf-8');
    session_start();
?> 
```

我想要做的是，当登录用户的“id”为“5”时，它将被重定向到与代码中所述的 private.php 不同的另一个页面。如果它发现“id”等于五，我可以将它重定向到另一个页面吗？它有点像管理页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:31:49.170

是的，你可以做到。在你写的地方试试这个

```
 if($login_ok)
        {
            unset($row['salt']);
            unset($row['password']);
            $_SESSION['user'] = $row;
            if($row['id']==5)
             header("Location: yourpage.php");
            else
            header("Location: private.php");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:33:28.347

1.  不要比较用户是管理员还是非管理员 using `id`，在你的数据库中添加一个字段say `type`，如果用户是`admin`let `type`be `admin`，如果不是 let it be`user`

2.  用户登录后，检查该`type`特定用户的数据库中的字段并根据该字段进行重定向。

考虑到这是重定向的代码：

```
 if($login_ok)
    {
        unset($row['salt']);
        unset($row['password']);
        $_SESSION['user'] = $row;
        if($row['type'] == "admin"){
           header("Location: private.php");
           die("Redirecting to: private.php");
        }
        else{
            header("Location: otherpage.php");
            die("Redirecting to: private.php");
        }

    } 
```

优势 ：

1.  如果您删除用户或添加新用户，它不会影响您的编码部分。
2.  您可以有多个管理员，但您仍然只需要检查一个条件（无需检查每个用户 ID）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:36:03.383

```
if($_SESSION['id']==5)
    header("Location: yourpage.php");
else
    header("Location: private.php");
exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T08:31:14.420

你需要存储`id`然后`session`总是检查`session`

```
if(isset($_SESSION['id'])
{
    //retrieve data of user 5 from database 
}
else
{
    //redirect to login page
} 
```

# android - 精灵碰撞检测精灵的中心区域

> ID：15610468
> 
> 赞同：1
> 
> 时间：2013-03-25T08:26:17.377
> 
> 标签：android, andengine

我正在处理精灵碰撞。有一个球和一个桶，直到球碰到桶的中间，不计点。如果碰到桶的把手，它应该反弹回来。

知道如何实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:24:06.943

您还可以采用自定义 Bucket 类。然后将一个矩形附加到存储桶的中心。然后不可见矩形。矩形应该是这个桶的孩子。

```
public class Bucket extends Sprite {

private Rectangle checkRectangle;

public Bucket(float pX, float pY, float pWidth, float pHeight,
        ITextureRegion pTextureRegion,
        ISpriteVertexBufferObject pSpriteVertexBufferObject) {
    super(pX, pY, pWidth, pHeight, pTextureRegion,
            pSpriteVertexBufferObject);
    // Declare rectangle object
    checkRectangle = new Rectangle(41, 54, 4, 4,
            getVertexBufferObjectManager());
    // set invisible
    checkRectangle.setVisible(false);
}

@Override
public void onAttached() {
    super.onAttached();
    super.onAttached();
    if (hasParent()) {
        attachChild(checkRectangle);
    }
} 
```

}

当球接触到桶中心的矩形时，您可以计算点数。为此，您需要检查您的游戏场景，例如：

```
if (aBucketObj.checkRectangle.collidesWith(aBallSprite)) {

        // do What you want
    } 
```

最后，您可以仅检查存储桶本身的碰撞。

```
if (aBucketObj.collidesWith(aBallSprite)) {

        // // do What you want 
    } 
```

希望，它对你有用。:)

# wpf - Caliburn Micro - 如何在单个视图模型上使用多个视图？

> ID：15610472
> 
> 赞同：0
> 
> 时间：2013-03-25T08:26:37.087
> 
> 标签：wpf, mvvm, caliburn.micro

我正在尝试使用几个不同的视图来引用相同的视图模型，具体取决于上下文。

这就是我所拥有的：

*   ModuleViewModel.cs（包含“类 ViewModels.ModuleViewModel”）
*   Model.Overview.xaml（包含“x:Class="Views.Module.Overview"）

但是调用（我需要从我的实用程序库中手动完成）`ViewLocator.LocateForModel(*viewModel*, null, "Overview")`不会返回任何内容。

我究竟做错了什么？我阅读了 CM 文档，似乎没问题...

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:08:38.217

假设您实际上`Overview`在`Views.Module`命名空间中有一个用户控件，CM 不会找到它

CM 将通过删除`Model`原始 VM 命名空间/类型名称的一部分进行搜索。我不记得确切的规则，但你可以自定义它们

对于默认规则，正确的命名空间应该是`Views.Model.Overview`

您可能想查看名称转换的文档：

[https://caliburnmicro.codeplex.com/wikipage?title=View%2fViewModel%20Naming%20Conventions&referringTitle=Documentation](https://caliburnmicro.codeplex.com/wikipage?title=View%2fViewModel%20Naming%20Conventions&referringTitle=Documentation)

还：

既然你已经调用了你的 VM `ModelViewModel`，我只能冒险猜测 nametransformer 也可能会`Model`从你的 VM 名称的开头剥离（尽管我**认为**正则表达式只检查字符串的结尾，所以你可能没问题！）

因此，假设上述命名空间更改不起作用，您最终可能会得到一个目标视图名称......我不知道是什么！

最后 - 可能值得实现一个调试记录器 - CM 针对日志接口写入大量信息，您只需要提供一种`GetLog`提供实现的方法`ILog`（写入`Debug`流的方法通常足以进行故障排除）

您可以在`Bootstrapper.Configure`（或任何其他足够早的地方）通过提供自己`Func`的`LogManager.GetLog`

```
LogManager.GetLog = (type) => { return new DebugLogger(); }; 
```

并实施`ILog`（`DebugLogger`把那个留给你！）

编辑：尝试`LocateForModel`在您的引导程序代码中重新实现 func：

```
 ViewLocator.LocateForModel = (model, displayLocation, context) =>
        {
            var viewAware = model as IViewAware;
            if (viewAware != null)
            {
                var view = viewAware.GetView(context) as UIElement;
                if (view != null)
                {
                    LogManager.GetLog(typeof(ViewLocator)).Info("Using cached view for {0}.", model);
                    return view;
                }
            }

            return ViewLocator.LocateForModelType(model.GetType(), displayLocation, context);
        }; 
```

然后您可以调试（这是我从 v1.4 的源代码中提取的内容，因此您可能需要再次查看源代码，因为 1.5 已经发布，具体取决于您使用的内容）

[https://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae616b841924#src/Caliburn.Micro.Silverlight/ViewLocator.cs](https://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae616b841924#src/Caliburn.Micro.Silverlight/ViewLocator.cs)

编辑：它也是 Silverlight 版本（我刚刚删除了一些编译器条件），所以你确实想从源代码中获取最新版本！

# c# - 事件聚合器的 GetEvent<>.Subscribe 给出异常

> ID：15610474
> 
> 赞同：0
> 
> 时间：2013-03-25T08:26:46.253
> 
> 标签：c#, prism, eventaggregator

我正在使用反射加载 dll，然后尝试在该 dll 中执行一个方法。该方法具有订阅事件的这一行。我在这条线上有一个例外

此行位于我使用反射动态调用的 dll 中

```
evntAgg.GetEvent<ExceptionEvent>().Subscribe(Message); 
```

例外是这样的：

> IDelegateReference 的目标应该是 System.Action`1[[CustomType, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] 类型。参数名称：actionReference

这是事件处理方法，并且在我动态调用的同一个 dll 中

```
public void Message(ExceptionEvent exception)
{
//Do something
} 
```

任何帮助，将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:44:27.677

使用 Prism 的`EventAggregator`-class 时，您需要满足以下要求：

1.  定义一个派生自 的事件`CompositePresentationEvent<TEventArgs>`，其中`TEventArgs`派生自`System.EventArgs`

2.  定义一个处理您的事件的**公共**方法，将 的实例`TEventArgs`作为参数；例如：

    ```
    public void HandleExceptionEvent(ExceptionEventArgs eventArgs)
    {
    } 
    ```

    该方法需要公开，否则`EventAggregator`将无法调用该方法。

3.  订阅您的活动：

    ```
    evntAgg.GetEvent<ExceptionEvent>.Subscribe(HandleExceptionEvent); 
    ```

    鉴于您已经按照描述实施了第 2 步，应该可以毫无问题地工作。

# php - 如何在 osticket 系统上根据人员部门设置默认部门

> ID：15610475
> 
> 赞同：0
> 
> 时间：2013-03-25T08:26:47.697
> 
> 标签：php, selection, default

根据 osticket 系统上的人员部门在人员界面中创建新工单时，是否有一种简单的方法将部门设置为默认值？

这是newticket.php的原始代码

```
<td align="left"><b>Departement</b></td>
    <td>
        <select name="deptId">
            <option value="" selected >Select Department</option>
            <?
             $services= db_query('SELECT dept_id,dept_name FROM '.DEPT_TABLE.' ORDER BY dept_name');
             while (list($deptId,$dept) = db_fetch_row($services)){

                $selected = ($info['deptId']==$deptId)?'selected':''; ?>
                <option value="<?=$deptId?>"<?=$selected?>><?=$dept?></option>
            <?
            }?>
        </select>
        &nbsp;<font class="error"><b>*</b>&nbsp;<?=$errors['deptId']?></font>
    </td> 
```

任何帮助将不胜感激

澄清：创建新工单时osticket系统的原始代码，工作人员可以选择部门甚至不是他们的部门。这是[屏幕截图](http://i.stack.imgur.com/OX3ms.jpg)

我的问题是否可以在创建新工单时自动设置部门？例如会计部门的员工A，所以当员工A打开新票时，他们不再需要选择部门。它将自动存储为会计部门..我希望这更清楚......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:45:57.333

请参阅此链接：

[<? ?> 标签在 php 5.3.1 中不起作用](https://stackoverflow.com/questions/2476072/tags-not-working-in-php-5-3-1)

“默认情况下禁用短标签。我不建议您使用短标签（或）。您应该使用全长标签（）。但是要启用短标签，请启用 php.ini 文件中名为 short_open_tag 的设置。”

1).enable "short_open_tag" 这可能对您有所帮助.. 并在值之前使用"echo or ="。

2). 或将此代码与全长 php 标签一起使用。

```
<td align="left"><b>Departement</b></td>
    <td>
        <select name="deptId">
            <option value="" selected >Select Department</option>
            <?php
             $services= db_query('SELECT dept_id,dept_name FROM '.DEPT_TABLE.' ORDER BY dept_name');
             while (list($deptId,$dept) = db_fetch_row($services)){

                $selected = ($info['deptId']==$deptId)?'selected':''; ?>
                <option value="<?php echo $deptId;?>" <?php echo $selected;?> > <?php echo $dept;?> </option>
            <?php
            }?>
        </select>
        &nbsp;<font class="error"><b>*</b>&nbsp;<?php echo $errors['deptId'];?></font>
    </td> 
```

# simulation - OpenFOAM 中的 GAMG Preconditioner 是如何工作的？

> ID：15610476
> 
> 赞同：2
> 
> 时间：2013-03-25T08:27:00.827
> 
> 标签：simulation, fluid-dynamics

我使用 OpenFOAM 进行 CFD 模拟。一个非常流行的预处理器是[GAMG](http://www.openfoam.com/features/linear-solvers.php)，它在用于模拟流体流动的 SIMPLE 或 PISO 求解器中每个时间步需要少量迭代。

我想了解 GAMG 如何准备内部结构。

**它是否在几何的基础上在一次迭代中只**创建一次 GAMG 中使用的内部数据结构，然后只更新这些数据结构中的条目？

或者

它是否在一次迭代中多次创建内部数据结构？[我在这里](http://www.tfd.chalmers.se/~hani/kurser/OS_CFD_2008/TimBehrens/tibeh-report-fin.pdf)阅读了文档，但没有答案。

感谢您的回答。

# flash - 流畅的流媒体支持闪存？

> ID：15610480
> 
> 赞同：-2
> 
> 时间：2013-03-25T08:27:37.470
> 
> 标签：flash, azure, asp.net-mvc-4, smooth-streaming, azure-media-services

我使用带有平滑流的 Azure 媒体服务`*.mp4 file`。我想在 Asp.net MVC4 上使用 Flash Player

有人建议我，Flash 播放器支持平滑流吗？如果是，请给我发送代码。

谢谢

请：我不会使用 Silverlight，它是最后的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:45:45.437

[这是一个完整的指南，如何实现 Flash Player for Smooth Streaming](http://www.windowsazure.com/en-us/develop/Media-Services/how-to-guides/smooth-streaming-plugin-for-open-source-media-framework/)。但是，您必须知道，单曲`.mp4 file` **不是**一个`smooth streaming source`，而是一个`progressive download`来源。确保您了解其中的区别（互联网上有大量资源，您可以在其中阅读不同格式的媒体流）

作为附加资源，这里是如何从您的：[如何：交付流媒体内容](http://www.windowsazure.com/en-us/develop/Media-Services/how-to-guides/media-services-dotnet/#stream-asset)中生成`smooth streaming`源的指南；[Windows Azure Media Packager 的任务预设，用于将 MP4 转换为平滑流源](http://msdn.microsoft.com/en-us/library/windowsazure/hh973635.aspx)。`single mp4 file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:57:42.633

我们的团队今天刚刚为 OSMF 发布了 Smooth Streaming 插件 - [http://www.microsoft.com/en-us/download/details.aspx?id=36057](http://www.microsoft.com/en-us/download/details.aspx?id=36057)。

使用 Smooth Streaming OSMF 插件，您可以向现有的 Adob​​e Strobe Media Playback 播放器添加实时和点播 Smooth Streaming 播放功能，还可以使用您现在使用的相同后端基础架构为 Adob​​e Flash Player 端点构建丰富的媒体体验以瞄准 Smooth流式播放到其他设备，如 Win8 商店应用程序、浏览器、Xbox、Windows Phone、机顶盒、其他移动设备等。

干杯，Vishal，Azure 媒体服务团队

# java - 如何使用jsp在mysql数据库中插入当前日期？

> ID：15610482
> 
> 赞同：0
> 
> 时间：2013-03-25T08:27:46.940
> 
> 标签：java

我正在尝试使用以下代码插入日期：

```
java.sql.Timestamp sqlNow=new java.sql.Timestamp(new java.util.Date().getTime());
pstTimestamp(1,sqlNow); 
```

运行代码，结果成功，但数据库中没有显示日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T08:48:07.843

您应该使用`PreparedStatement`并使用它来设置`date`如下：-

```
PreparedStatement pstmt = con.prepareStatement("INSERT INTO table_name (col_name) VALUES (?)");
pstmt.setTimestamp(1, new java.sql.Timestamp(new java.util.Date().getTime()));
pstmt.executeUpdate(); 
```

[在这里](http://www.mkyong.com/jdbc/jdbc-preparestatement-example-insert-a-record/)阅读更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:04:35.020

尝试这个

```
PreparedStatement ps = con.prepareStatement("INSERT INTO table_name (col_name) VALUES (now())");
ps.executeUpdate(); 
```

使用`now()`，以便它仅以 db 格式获取日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:37:22.480

确保在运行命令后提交。或者确保在连接上启用了自动提交。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:22:42.377

只需要将`java.sql.Timestamp`类对象提供给`PreparedStatement`对象，其余工作将由驱动程序完成。我认为在设置占位符的值（参数）时您的代码存在问题。现在使用`pstmnt.setTimestamp(int index, java.sql.Timestamp timestamp_object);` 执行您的查询： pstmnt.executeUpdate();

# javascript - 带有引导下拉菜单的上下文菜单在 Firefox 中不起作用

> ID：15610488
> 
> 赞同：1
> 
> 时间：2013-03-25T08:28:34.010
> 
> 标签：javascript, jquery, twitter-bootstrap, contextmenu

我试图在右键单击元素时显示 Twitter Bootstrap 下拉菜单。这是我写的代码：

### Javascript

```
var toggle = $('.dropdown-toggle');
toggle.on('contextmenu',function(e){
  toggle.dropdown('toggle');
  return false;
}); 
```

### HTML

```
<div class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
    <ul class="dropdown-menu">
        <li>Hello</li>
        <li>World</li>
    </ul>
</div> 
```

这段代码在 Chrome 中运行良好，当我右键单击菜单时，菜单会正确显示，但在 Firefox 上，当我右键单击时，菜单会显示一秒钟然后消失。还有其他我需要处理的事件吗？

JSFiddle：http: [//jsfiddle.net/Serff/3/](http://jsfiddle.net/Serff/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:43:58.353

消除

```
data-toggle="dropdown" 
```

最终的 html 标记：

```
<div class="dropdown">
   <a class="dropdown-toggle" href="#">Dropdown trigger</a>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    <li>Hello</li>
    <li>World</li>
  </ul>
</div> 
```

这应该有效。

使用这个脚本：

```
var toggle = $('.dropdown-toggle');
toggle.on('contextmenu',function(e){
  e.preventDefault();
  toggle.dropdown('toggle');
}); 
```

# c# - 无法通过 MS 构建将我的 Web 应用程序部署到远程位置。每次都会出现这个错误

> ID：15610491
> 
> 赞同：0
> 
> 时间：2013-03-25T08:28:53.287
> 
> 标签：c#, asp.net-mvc, msbuild, tfsbuild

我正在一个大型企业环境中工作。当我尝试使用 ms build 将我的解决方案部署到远程服务器时，每次尝试部署应用程序时都会出现此错误。

根据错误消息它说它无法连接但我可以ping到IP。我什至在两台机器的主机文件中都添加了主机 ip 和名称。我不知道我是否做错了什么以前有没有人遇到过这个问题。你是如何克服这个问题的？

注意：我已将我的 ip 替换为 myip.com... 并将站点名称作为我在此问题中的站点名称。（我的应用是 Asp.net MVC 4 Application）

`C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets (3847): Web deployment task failed.(Could not complete the request to remote agent URL '[https://myip.com/msdeploy.axd?site=my](https://myip.com/msdeploy.axd?site=my) site name'.) This error indicates that you cannot connect to the server. Make sure the service URL is correct, firewall and network settings on this computer and on the server computer are configured properly, and the appropriate services have been started on the server. Error details: Could not complete the request to remote agent URL '[https://myip.com/msdeploy.axd?site=my](https://myip.com/msdeploy.axd?site=my) site name'. Unable to connect to the remote server A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond myip.com`

任何帮助都会得到真正的认可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:34:08.367

真正的错误信息隐藏在报告中，但内容如下：

> “无法连接到远程服务器连接尝试失败，因为连接方在一段时间后没有正确响应，或者由于连接的主机未能响应myip.com，建立连接失败”

这是一个 TCP 连接问题，这意味着可能有一个简单的解决方案。

它应该很简单：这意味着您指定的服务器无法运行。如果您确定您的网站当前正在运行（即您可以从您的网络浏览器访问它），那么这意味着您输入了错误的服务器名称或其他连接详细信息。这并不意味着`msdeploy.axd`有问题，因为如果是这样，您的客户端至少能够连接。

检查服务器的防火墙规则，并确保 Web 服务器 (IIS) 正在运行并且正在主动侦听您想要的 IP 地址（检查站点绑定以及服务器的网络配置，转储`ipconfig /all`也很有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T19:58:48.650

这是 IIS 的问题，它不允许远程连接。通过允许远程连接来修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T10:34:52.810

在我的情况下，这是由于主机的防火墙设置。关闭本地网络的防火墙解决了问题

# android - 如何在 TabHost 中将 KeyEvent 调度到 currentView

> ID：15610499
> 
> 赞同：0
> 
> 时间：2013-03-25T08:29:17.430
> 
> 标签：android

我需要更改 TabActivity 中的 KeyEvent 调度。如果当前选项卡内容活动/视图可以处理 KeyEvent.KEYCODE_Back，则让它处理它。如果没有，显示对话框提示如下：“你想退出吗？”。怎么能做到这一点？

我已经在我的 TabActivity 中尝试过这段代码：（无法实现我的需求）

```
@Override
public boolean dispatchKeyEvent(Event event){
    if(event.getKeyCode() == KeyEvent.KEYCODE_BACK){
        if(!mTabHost.getCurrentView.dispatchKeyEvent(event)){
            showDialog(0);
            return true;
        }
    }
    return super.dispatchKeyEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T02:45:41.003

我认为[这个链接](https://stackoverflow.com/a/12230251/1294681 "onKey()、OnKeyDown() 和 dispatchKeyEvent() 方法的区别")可以让你清楚。

您应该重写**onKeyDown**方法，直接调用**mTab​​Host.onKeyDown(...)**方法，检查它的返回结果，如果为 false，则表示您应该向用户显示退出消息。希望能帮到你。

# javascript - 在 Angular 中，我需要在数组中搜索对象

> ID：15610501
> 
> 赞同：116
> 
> 时间：2013-03-25T08:29:23.940
> 
> 标签：javascript, angularjs

在 Angular 中，我在范围内有一个返回大量对象的对象。每个都有一个 ID（它存储在一个平面文件中，所以没有数据库，我似乎无法使用`ng-resource`）

在我的控制器中：

```
$scope.fish = [
    {category:'freshwater', id:'1', name: 'trout', more:'false'},
    {category:'freshwater', id:'2', name:'bass', more:'false'}
]; 
```

在我看来，我有更多关于默认隐藏的鱼的附加信息`ng-show`，但是当我单击简单的显示更多选项卡时，我想调用该函数`showdetails(fish.fish_id)`。我的函数看起来像：

```
$scope.showdetails = function(fish_id) {  
    var fish = $scope.fish.get({id: fish_id});
    fish.more = true;
} 
```

现在在视图中显示了更多详细信息。但是，在搜索完文档后，我无法弄清楚如何搜索该`fish`数组。

那么如何查询数组呢？在控制台中我如何调用调试器以便我有`$scope`对象可以玩？

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2013-09-27T06:29:30.337

您可以使用现有的 $filter 服务。我更新了上面的小提琴[http://jsfiddle.net/gbW8Z/12/](http://jsfiddle.net/gbW8Z/12/)

```
 $scope.showdetails = function(fish_id) {
     var found = $filter('filter')($scope.fish, {id: fish_id}, true);
     if (found.length) {
         $scope.selected = JSON.stringify(found[0]);
     } else {
         $scope.selected = 'Not found';
     }
 } 
```

Angular 文档在这里[http://docs.angularjs.org/api/ng.filter:filter](http://docs.angularjs.org/api/ng.filter:filter)

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2013-03-25T09:01:54.793

我知道这是否可以帮助你一点。

这是我试图为你模拟的东西。

签出 jsFiddle ;)

[http://jsfiddle.net/migontech/gbW8Z/5/](http://jsfiddle.net/migontech/gbW8Z/5/)

创建了一个您也可以在“ng-repeat”中使用的过滤器

```
app.filter('getById', function() {
  return function(input, id) {
    var i=0, len=input.length;
    for (; i<len; i++) {
      if (+input[i].id == +id) {
        return input[i];
      }
    }
    return null;
  }
}); 
```

在控制器中的用法：

```
app.controller('SomeController', ['$scope', '$filter', function($scope, $filter) {
     $scope.fish = [{category:'freshwater', id:'1', name: 'trout', more:'false'},  {category:'freshwater', id:'2', name:'bass', more:'false'}]

     $scope.showdetails = function(fish_id){
         var found = $filter('getById')($scope.fish, fish_id);
         console.log(found);
         $scope.selected = JSON.stringify(found);
     }
}]); 
```

如果有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-10-03T21:33:21.913

要添加到@migontech 的答案以及他的地址，他的评论是您可以“可能使其更通用”，这是一种方法。下面将允许您按任何属性进行搜索：

```
.filter('getByProperty', function() {
    return function(propertyName, propertyValue, collection) {
        var i=0, len=collection.length;
        for (; i<len; i++) {
            if (collection[i][propertyName] == +propertyValue) {
                return collection[i];
            }
        }
        return null;
    }
}); 
```

然后对过滤器的调用将变为：

```
var found = $filter('getByProperty')('id', fish_id, $scope.fish); 
```

请注意，我删除了一元（+）运算符以允许基于字符串的匹配...

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-25T09:09:41.607

一个肮脏而简单的解决方案可能看起来像

```
$scope.showdetails = function(fish_id) {
    angular.forEach($scope.fish, function(fish, key) {
        fish.more = fish.id == fish_id;
    });
}; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-03-08T09:16:27.287

Angularjs 已经有过滤选项来做到这一点， [https: //docs.angularjs.org/api/ng/filter/filter](https://docs.angularjs.org/api/ng/filter/filter)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-07-20T14:45:47.647

您的解决方案是正确的，但不必要的复杂。您可以使用**纯 javascript 过滤功能**。这是你的模型：

```
 $scope.fishes = [{category:'freshwater', id:'1', name: 'trout', more:'false'},  {category:'freshwater', id:'2', name:'bass', more:'false'}]; 
```

这是你的功能：

```
 $scope.showdetails = function(fish_id){
         var found = $scope.fishes.filter({id : fish_id});
         return found;
     }; 
```

您还可以使用表达式：

```
 $scope.showdetails = function(fish_id){
         var found = $scope.fishes.filter(function(fish){ return fish.id === fish_id });
         return found;
     }; 
```

有关此功能的更多信息：[LINK](http://www.w3schools.com/jsref/jsref_filter.asp)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-09-19T11:14:59.393

看到这个帖子，但我想搜索与我的搜索不匹配的 ID。执行此操作的代码：

```
found = $filter('filter')($scope.fish, {id: '!fish_id'}, false); 
```

# html - 设置 Kendo Grid JSP 以占用剩余空间

> ID：15610504
> 
> 赞同：0
> 
> 时间：2013-03-25T08:29:51.087
> 
> 标签：html, css, jsp, kendo-ui, kendo-grid

我正在使用 JSP Wrapper 版本的 Kendo UI。

目前，我的网格有一个固定的高度：

```
<kendo:grid name="SUBUL_02_GRID" pageable="true" resizable="true" 
            sortable="true" height="800"> 
```

我希望网格占据页面的剩余空间，但设置 height="100%" 不起作用。高度设置为小于页面 50% 的任意值。

我不确定这是否重要，但我也启用了虚拟滚动

```
<kendo:grid-scrollable virtual="true" /> 
```

如何让网格占据剩余空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:52:54.483

尝试使用 Grid 的**dataBound**事件并使用 JavaScript 以编程方式设置高度，例如

```
function onGridDataBound() {

        this.element.find('.k-grid-content').height(this.tbody.height());
        this.virtualScrollable.refresh();

} 
```

# c - 可以用空字符来表示零字符吗？

> ID：15610506
> 
> 赞同：1
> 
> 时间：2013-03-25T08:29:58.677
> 
> 标签：c

该`C99`标准要求“`null character`在基本执行字符集中应存在一个所有位都设置为 0 的字节，称为 ，它用于终止字符串。” (5.2.1.2) 然后继续列出必须在执行集中的其他 99 个字符。可以使用空字符是这 99 个字符之一的字符集吗？特别是，是否允许这样做`'0' == '\0'`？

**编辑：**每个人都指出，在 ASCII 中，`'0'`是`0x30`. 确实如此，但该标准并未强制要求使用 ASCII。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:48:42.810

无论您使用 ASCII、EBCDIC 还是“自制”的东西，`'0'`都必须区别于`'\0'`，因为您提到自己的原因：

> 一个所有位都设置为 0 的字节，称为`null character`，应存在于基本执行字符集中；它用于终止一个字符串。(5.2.1.2)

如果空字符终止一个字符串，则它不能包含在该字符串中。它是唯一不能包含在字符串中的字符；所有其他字符都可以使用，因此必须不同于 0。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T09:26:06.053

我不认为标准规定它列出的每个字符（包括空字符）都有不同的值，除了数字。但是，包含一个`0`据称代表 100 个必需字符中的 91 个值的“字符集”显然不是真正包含必需 100 个字符的字符集。所以这是：

*   “字符集”的英文定义的一部分，
*   从上下文中显而易见，
*   标准文本中的一个非常小的缺陷，应将其拼写出来以防止不忠实的实施者故意误解。

任你选。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T08:32:02.013

在这种情况下，`'0'='\0'`您将无法区分字符串和`'0'`值的结尾。

因此使用“0_any_string”之类的东西会有点困难，因为它已经从`'0'`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T08:50:54.410

不，它不能。字符集必须用单射函数来描述，即将每个字符映射到一个完全不同的二进制值的函数。将 2 个字符映射到相同的值将使字符集不确定，即计算机将无法将数据解释为匹配的字符，因为有多个匹配。

C99 标准通过强制将`null`字符映射到特定的二进制值来提出另一个限制。鉴于上述段落，这意味着没有其他字符可以具有与 相同的值`null`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T08:34:01.430

> 整数常量文字 0 具有不同的含义，具体取决于使用它的上下文。在所有情况下，它仍然是一个值为 0 的整数常量，只是以不同的方式描述。
> 
> 如果将指针与常量文字 0 进行比较，则检查该指针是否为空指针。然后这个 0 被称为空指针常量。C 标准定义 0 类型转换为 void * 既是空指针又是空指针常量。

[NULL, '\0' 和 0 有什么区别](https://stackoverflow.com/questions/1296843/what-is-the-difference-between-null-0-and-0)

# ruby-on-rails - 在 Rails 中提交单页测验答案

> ID：15610509
> 
> 赞同：2
> 
> 时间：2013-03-25T08:30:06.363
> 
> 标签：ruby-on-rails

我正在尝试构建一个单页测验，该测验通过一个按钮提交，并根据我的数据库中的值进行自我评分。目前，我可以渲染考试，结果视图似乎在控制器中显示了正确的逻辑；但是，我只能从所有问题的所有答案中选择一个答案（我相信这是由于 radio_button 的使用），但即使我将其切换到 check_box 它仍然只能对一个答案评分。我真的很想弄清楚这一点，这令人难以置信（我对此完全陌生，这可能无济于事）。这就是我所拥有的。

```
<h1><%= @exam.name %></h1>
 <%= form_tag({:controller => "exams", :action => "grading"}) do %>
  <ol class="questions">
   <% @exam.questions.each do |question| %>
   <li>
   <%= question.content %>
     <ol class="answers">
     <% question.answers.each do |answer| %>
      <li>
        <%= radio_button_tag(:answer, answer.id) %>
        <%= label("answer_".concat(answer.id.to_s).to_sym, answer.content) %>
      </li>
     <% end %>
     </ol>
   </li>
   <% end %>
  </ol>

  <div><%= submit_tag("Submit", :class => "submit") %></div> 
```

在考试控制器中：

```
def grading
 @exam ||= Exam.find(session[:exam_id]) if session[:exam_id]
 total = @exam.questions.count.to_i

 session[:total]   = total
 session[:correct] = 0
 @total   = session[:total]

 answerid = params[:answer]
 @answer = answerid ? Answer.find(answerid) : nil

 if @answer and @answer.correct
   @correct = true
   session[:correct] += 1
 else
  @correct = false
 end

 redirect_to results_url
end

def results
  @correct = session[:correct]
  @total   = session[:total]

  @score = @correct * 100 / @total
end 
```

如果事情看起来有点拼凑而且相当基本，我深表歉意......他们是。我很欣赏任何关于如何实现我的目标的想法。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:01:03.183

问题在于这一行：

```
<%= radio_button_tag(:answer, answer.id) %> 
```

由于现在已设置所有单选按钮属于同一组，因此您需要将第一个属性更改为我认为的每个问题的不同内容。也许是这样的：

```
<%= radio_button_tag("answer_for_#{question.id}", answer.id) %> 
```

然后每个问题都会有自己的答案批次，您可以找到它属于哪个问题。

### 更新

我没有尝试以下，所以不确定它是否会起作用，但尝试将其更改为：

```
radio_button_tag("answer[#{question.id}]", answer.id) 
```

然后查看是否`params[:answer]`返回一个哈希值，您可以对其进行迭代并从中提取所有答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T18:29:39.873

对于以后搜索此内容的任何人，我在控制器中都做了上述更新的答案：

```
h = params[:answer]

h.values.each do |answer|
  @answer = answer ? Answer.find(answer) : nil

  if @answer and @answer.correct
    @correct = true
    session[:correct] += 1
  else
    @correct = false
  end
end 
```

# iphone - 从 safari 中的 Web 应用程序中的链接打开 iphone 应用程序

> ID：15610512
> 
> 赞同：4
> 
> 时间：2013-03-25T08:30:14.917
> 
> 标签：iphone, ios, mobile-safari

我正在尝试从 Safari 中的链接打开我的原生 iPhone 应用程序。我已经按照[这个链接](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)创建了一个 url 架构。我`appgo://`在 URL 类型下添加了我的 url 架构和 com.xxxx.appgo 作为标识符。以下是我在 safari 网页中的链接：打开 iPhone 应用程序但是当我单击该链接时，应用程序无法打开，并且 safari 会产生错误警报：Safari 无法进入页面，因为地址无效。

我的包标识符：com.xxxxx.abc 注意：我的包标识符与 URL 类型中的标识符不同。这会是个问题吗？

**编辑：** 我已经使包标识符和 url 标识符相同。我还在我的应用程序委托中添加了以下代码：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url{
NSLog(@"application");
BOOL returnValue = NO;
NSString *urlString = [url absoluteString];
if([urlString hasPrefix:@"com.xxxx.appgo"]){
    returnValue = YES;
}
return returnValue; 
```

}

我正在我的 iPad 上测试它。我首先从 xcode 安装最新版本的应用程序，然后按主页按钮，然后在 safari 中打开链接。但我仍然收到警告说 Safari 无法进入页面，因为地址无效。我在 Safari 中的链接：

```
<a href="appgo://">Open iPhone App</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T08:47:32.970

在应用程序委托中实现

```
 - (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
        BOOL returnValue = NO;
        NSString *urlString = [url absoluteString];
        if([urlString hasPrefix:@"appgo://"]){  
             returnValue = YES;
        }
       return returnValue;
    } 
```

编辑：添加你的 info.plist 文件

```
<key>CFBundleURLTypes</key>
    <array>
        <dict>
            <key>CFBundleURLName</key>
            <string>com.xxxx.appgo</string>
            <key>CFBundleURLSchemes</key>
            <array>
                <string>appgo</string>
                <string>yourSecondScheme</string>
            </array>
        </dict>
    </array> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:33:57.630

是的。您的包标识符必须与 plis 文件中的 URL 类型相同。

更多你可以参考[这个链接](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)。

# java - 如何在不使用调试插件/框架的情况下从 Eclipse 获取断点

> ID：15610519
> 
> 赞同：1
> 
> 时间：2013-03-25T08:30:55.640
> 
> 标签：java, eclipse-rcp, eclipse-plugin

假设我想在用户添加或删除断点时执行一些自定义 Java 代码。我知道正常的方法是在 eclipse 的 org.eclipse.debug.core 框架中处理这个问题，但我目前没有这样做。我有一个自定义调试器，目前不使用任何一个。有没有办法（1）监听添加和删除的换行符事件，以及（2）在 eclipse 启动时收集所有当前的换行符标记（将它们同步到自定义调试器）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T18:40:15.673

一种方法是获取 BreakpointsView 并使用反射从那里获取它

# android - 从 contentProvider.update() 更改 uri 的 notifyChange

> ID：15610527
> 
> 赞同：7
> 
> 时间：2013-03-25T08:31:35.603
> 
> 标签：android, sqlite, android-contentprovider, contentobserver

我已经实施`update()`并`ContentProvider`通知观察者使用`getContext().getContentResolver().notifyChange(uri, null);`

我明显的需要是，每当只影响一行时，我想用行特定的 uri 通知，但找不到这样做的方法。像这样的附加查询`"select id where selectionArgs"`可以做到这一点，但这将是一种愚蠢的方式。

`onchange(boolean, uri)`获取完整的uri而不是特定的行，很容易理解这是因为`ContentProvider.update()`发送相同。

```
some code for more clarity 
```

MyContentProvider 的 update() 方法

```
 @Override
    public int update(Uri uri, ContentValues values, String selection, String[] selectionArgs) {

        Log.d("TAG", "update " + uri.getPath());

        int count = 0;
        switch (uriMatcher.match(uri)) {
        case BOOKS:
            count = booksDB.update(DATABASE_TABLE, values, selection, selectionArgs);
            break;
        case BOOK_ID:
            count = booksDB.update(DATABASE_TABLE, values,
                    _ID + " = " + uri.getPathSegments().get(1)
                            + (!TextUtils.isEmpty(selection) ? " AND (" + selection + ')' : ""),
                    selectionArgs);
            break;
        default:
            throw new IllegalArgumentException("Unknown URI " + uri);
        }

        if (count == 1) {
            Cursor c = query(uri, new String[] { _ID }, selection, selectionArgs, null);
            long rowId = Long.valueOf(c.getString(c.getColumnIndex(_ID)));
            uri = ContentUris.withAppendedId(CONTENT_URI, rowId);
        }
        getContext().getContentResolver().notifyChange(uri, null);
        return count;

    } 
```

**我会更新一些表格**

```
getContentResolver().update(MyContentProvider.CONTENT_URI, values1, MyContentProvider._ID+"<?", new String[]{"3"})); 
```

坦率地说，代码与问题几乎没有关系，只是想给你一些上下文

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-23T18:31:51.907

在您的提供者方法中，只需返回附加了 id 的 uri

```
@Override
public Uri insert(Uri uri, ContentValues values) {
    Log.i(TAG, "insert " + uri);
    final SQLiteDatabase db = mOpenHelper.getWritableDatabase();
    final int match = URI_MATCHER.match(uri);

    Uri returnUri;
    switch (match) {
        case MESSAGE: {
            long _id = db.insert(MessageContract.MessageEntry.TABLE_NAME, null, values);
            if (_id > 0)
                returnUri = ContentUris.withAppendedId(MessageContract.MessageEntry.CONTENT_URI, _id);
            else
                throw new android.database.SQLException("Failed to insert row into " + uri);
            break;
        }

        default:
            throw new UnsupportedOperationException("Unknown uri: " + uri);
    }

    getContext().getContentResolver().notifyChange(returnUri, null);

    return returnUri;
} 
```

并为后代注册你的观察者。

```
getContentResolver().registerContentObserver(MessageContract.MessageEntry.CONTENT_URI, true, mContentObserver); 
```

要从 Uri 获取 id，您可以使用`ContentUris.parseId(uri)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:47:53.843

不幸的是，我无法建议简单的解决方案（因为我不知道您需要运行的完整代码和更新），我们可以尝试一些方法（其中一些我已经在我的应用程序中实现了）：

*   提供 ids `ContentValues`- 这种方式看起来不适用于您的案例，它需要循环调用`notifyChange()`;
*   为请求提供特定`Uri`的查询（只有某些特定的应用程序需要选择多种查询，通常在 中包含查询参数要容易得多`Uri`）。在程序的另一部分收到特定通知后，`Uri`它将能够检查它的“当前项目”是否已更新并采取适当的行动（例如，最简单的情况是文章列表和一篇文章在单独的活动中打开；然后您更新文章列表在服务器后台您可能还需要更新当前打开的文章，因此需要知道它是否已更新）。您应该能够使用 just received 来检查观察者一侧的特定项目`Uri`，因为它（Uri）将包含您用于查询的参数；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-28T00:01:55.140

您可以通过 ContentValues 传递 ID，并将其附加到通知 url。这样您就不必进行单独的查询。

```
@Override
public int update(@NonNull Uri uri, ContentValues values, String selection, String[] selectionArgs) {
    int rows = _database.update(getTableName(), values, selection, selectionArgs);
    if (rows > 0) {
        Uri itemUri = ContentUris.withAppendedId(uri, values.getAsLong(DatabaseModel.COLUMN_ID)); // DatabaseModel.COLUMN_ID is "_id"

        getContext().getContentResolver().notifyChange(itemUri, null);
    }
    return rows;
} 
```

# hadoop - Hive：无法通过两个分区条件选择一个分区

> ID：15610532
> 
> 赞同：0
> 
> 时间：2013-03-25T08:31:50.580
> 
> 标签：hadoop, hive

1.  创建外部表 wwwlogs (...) 分区 (logdate string, nodeip string, tag string) ...
2.  alter table wwwlogs 添加分区(logdate='2013-01-21', nodeip='192.168.1.101', tag='error');
3.  alter table wwwlogs 添加分区(logdate='2013-01-20', nodeip='192.168.1.102', tag='access');
4.  添加其他分区。

问题是： 1\. show partitions wwwlogs partition (logdate='2013-01-21') 会列出所有分区。2\. select count(1) from wwwlogs where logdate='2013-01-21' and tag='error': Hadoop job information for Stage-1: number of mappers: 0; 减速机数量：1

由于映射器的数量为 0，因此选择结果为 0。

# registry - 使用 Reg Query 获取系统信息

> ID：15610537
> 
> 赞同：1
> 
> 时间：2013-03-25T08:32:18.703
> 
> 标签：registry

如何使用 Reg Query 命令获取以下详细信息？

1.  操作系统详细信息，例如名称、服务包、版本和操作系统架构。
2.  系统详细信息，例如制造商名称和型号名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:35:31.870

这些可能会起作用。操作系统信息：-

```
 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion 
```

对于硬件：-

```
HKEY_LOCAL_MACHINE\HARDWARE\DESCRIPTION\System 
```

# c++ - C++：“错误 C4430：缺少类型说明符 - 假定为 int”对于构造函数和析构函数的无效声明

> ID：15610538
> 
> 赞同：1
> 
> 时间：2013-03-25T08:32:22.357
> 
> 标签：c++, windows, class, constructor, destructor

我有这个 CResources 类声明，我得到这个错误

> “错误 C4430：缺少类型说明符 - 假定为 int”

```
#include <set>
#include <unordered_set>

const int R_NUMBER = 5;

typedef enum {
    M,

} OBJECT_ENUM;

typedef enum {
    FILE_O,

} RESOURCE_ENUM;

typedef struct _resourcesMapping {
    CBuffer apiBuffer;
    int ObjectIndex;
};
    class CResources {
        int rCount;
        int* resources;

    public:
        CResources(int);
        ~CResources();
        int getCount();
        int getObjectsCount();
        int rOrder[R_NUMBER];
        std::set<int> ObjectsSet;
    }; 
```

我究竟做错了什么？

在减速之前添加代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:36:18.513

你忘了`#include <set>`。

**编辑后**

在第 18 行：`CBuffer apiBuffer;`，标识符`CBuffer`未知。此外，`typedef`on`typedef struct _resourcesMapping`被忽略，因为您没有声明任何内容。

此外，以下划线开头的标识符保留在全局命名空间中，不应使用`_resourcesMapping`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:50:50.663

```
typedef struct _resourcesMapping {
    CBuffer apiBuffer;
    int ObjectIndex;
}; //missing typedef name 
```

它应该是这样的：

```
typedef struct _resourcesMapping {
    CBuffer apiBuffer;
    int ObjectIndex;
}ResourcesMapping; 
```

除此之外，我认为没有任何错误。您的错误似乎在其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T03:51:09.280

我认为你只需要：

```
using namespace std; 
```

无论如何它对我有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-17T11:44:11.787

一般使用“using namespace xxx;” 是个坏主意。以后可能会出现问题。下面显示了一个会导致问题的示例。

```
void functionX();

namespace mynamespace { 
  void functionX();
}; 
```

我建议使用前缀，例如

```
mynamespace::functionX();
functionX(); 
```

Hth

# javascript - 作为参数传递的函数，有自己的未定义参数，仍然有值

> ID：15610545
> 
> 赞同：0
> 
> 时间：2013-03-25T08:32:46.157
> 
> 标签：javascript

我正在使用将关键字转换为此处另一个问题中提供的链接的略微修改版本。

代码如下，有一些遗漏：

```
$(".keyword_search").each(function() {
    var targetword = 'TEST';
    var explanation = 'Is something you do to find out if stuff works';
    //targetword and explanation actually defined in a loop, but omitted here  
    var content = $(this)[0];
    var re = new RegExp("(\\b"+targetword+"\\b)", "gi");
    content.innerHTML = content.innerHTML.replace(re,keywordconvert);
}

function keywordconvert(str, p1, offset, s ) {
     return '<a href="#" data-toggle="tooltip" title="'+p1+'">'+p1+'</a>';
} 
```

我对这段代码有几个问题。

**1） keywordconvert**的参数在哪里定义？*str*和*p1*都包含要替换的字符串，*offset*包含内容中单词的起点，*s*包含*内容*。

2）如何将解释字符串添加到**关键字转换**函数中链接的*标题*类？换句话说，我怎样才能给这个函数添加参数？

 **任何帮助将不胜感激，我已经在网上搜索答案太久了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:39:06.933

> 1）keywordconvert的参数在哪里定义？

根据[`String#replace`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.5.4.11)定义。当您`replace`使用正则表达式作为搜索并使用函数作为替换调用时，它会使用匹配的字符串、定义的任何捕获组、匹配发生的偏移量以及最后是字符串本身来调用函数。由于传入的正则表达式定义了一个捕获组，这意味着`str`它将是匹配的子字符串，`p1`将是捕获组的内容，`offset`将是字符串中的索引（偏移量），并且`s`将是整个`replace`字符串叫。

> 2）如何将解释字符串添加到关键字转换函数中链接的标题类？

您可能必须在`each`迭代器函数中创建自己的函数，这并不理想，例如：

```
$(".keyword_search").each(function() {
    var targetword = 'TEST';
    var explanation = 'Is something you do to find out if stuff works';
    //targetword and explanation actually defined in a loop, but omitted here  
    var content = $(this)[0];
    var re = new RegExp("(\\b"+targetword+"\\b)", "gi");
    content.innerHTML = content.innerHTML.replace(re,function(str, p1, offset, s) {
        return keywordconvert(str, p1 + explanation, offset, s);
    });
}); 
```

请注意，`p1 + explanation`我假设你想做一些更有趣的事情，但它`p1`设置了`title`.**

# xml - 使用 XSLT 从 XML 中获取值并存储在变量中

> ID：15610547
> 
> 赞同：5
> 
> 时间：2013-03-25T08:32:57.577
> 
> 标签：xml, xslt, xslt-1.0

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
<Result>
  <resultDetails>
    <resultDetailsData>
      <itemProperties>
        <ID>1</ID>
        <type>LEVEL</type> 
        <value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema" xsi:type="xs:int">5</value> 
      </itemProperties>
    </resultDetailsData>
  </resultDetails>
</Result> 
```

我有上面描述的xml。我想使用类型标签的值（即本例中的 LEVEL）获取值标签的值（在本例中为“5”）并使用 XSLT 将其存储在变量中，以便我可以使用该变量之后。

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T08:45:23.213

你可以这样做：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
version="1.0">

<xsl:template match="/">
    <xsl:variable name="myVar" select="Result/resultDetails/resultDetailsData/itemProperties/value"/>
<varoutput>
    <xsl:value-of select="$myVar"/>
</varoutput>
</xsl:template> 

</xsl:stylesheet> 
```

应用于您的输入 XML，您将获得以下输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<varoutput>5</varoutput> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-02T06:28:01.667

如果要使用读取变量来设置属性（即行的颜色），您需要使用**{** $variable **}**如下

```
<xsl:variable name="rColor" select="rowColor"/> 
```

然后

```
<fo:table-row background-color="{$rColor}"> 
```

# javascript - 如何在 jQuery Mobile 中动态创建选择菜单？

> ID：15610550
> 
> 赞同：3
> 
> 时间：2013-03-25T08:32:58.813
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在尝试动态创建一个`select`元素，但它不是由 jQuery Mobile 设计的。实现这一目标的正确方法是什么？

[JSFiddle](http://jsfiddle.net/vgulaev/qagHz/4/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T09:08:48.153

这是一个工作**`jsFiddle`**示例：http: [//jsfiddle.net/Gajotres/dEXac/](http://jsfiddle.net/Gajotres/dEXac/)

```
$(document).on('pagebeforeshow', '#index', function(){    
    // Add a new select element    
    $('<select>').attr({'name':'select-choice-1','id':'select-choice-1'}).appendTo('[data-role="content"]');
    $('<option>').attr({'value':'1'}).html('Value 1').appendTo('#select-choice-1');
    $('<option>').attr({'value':'2'}).html('Value 2').appendTo('#select-choice-1');    
    // Enhance new select element
    $('select').selectmenu();
}); 
```

也看看这篇**[文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**，在那里你会发现增强 jQuery 元素标记的不同方法，或者可以在**[这里](https://stackoverflow.com/questions/14550396/jquery-mobile-markup-enhancement-of-dynamically-added-content/14550417#14550417)**找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T00:03:53.567

值得注意的是，这也应该有效：（示例附加两个选项以显示如何添加选项。

```
$('<select name="sl" id="sl" data-native-menu="false"><option value="clear">That I got</option></select>').appendTo("#output");
$('<option value="clear2">Another That I got</option>').appendTo("#sl");
$('select').selectmenu(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-24T09:41:21.240

这个对我有用

```
$(document).on('change', "body", function(){
    $( ".ui-selectmenu" ).selectmenu();
}); 
```

# c# - 查找双记录

> ID：15610551
> 
> 赞同：1
> 
> 时间：2013-03-25T08:33:00.270
> 
> 标签：c#, sql, database, join

我有以下结构：

```
TradeNo | OrderNo | Buy_Sell | 
1001        2001     Buy
1002        2002     Buy
1001        2001     Sell 
```

在这个特定的结构中，我想找出 TradeNo 和 OrderNo 的独特组合的双重记录。

我尝试了以下查询：

```
SELECT t1.tradeno,
       t1.orderno,
       t2.tradeno,
       t2.orderno,
       t1.Buy_sell,
       t2.Buy_sell
FROM tradeFile t1,
     tradeFile t2
WHERE t1.TradeNo=t2.TradeNo
  AND t1.Orderno=t2.orderno 
```

这个查询，返回我两个单条记录的副本。但我想重复记录查找。与上表一样，第一条和第二条记录重复使用 tradeno 和 orderno 的唯一组合作为 [1001 和 2001]。

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T08:35:56.733

```
select TradeNo, OrderNo
from TradeFile 
group by TradeNo, OrderNo
having count(*) > 1 
```

# linux - 带有sftp的linux新用户到特定文件夹

> ID：15610559
> 
> 赞同：0
> 
> 时间：2013-03-25T08:33:25.460
> 
> 标签：linux, tomcat, ssh

嗨，我有 ssh 连接到我的服务器机智的 root 帐户。我想创建名为的用户`pizza4yu`并`winscp`仅授予对这个位置的访问权限`/home/pi/apache-tomcat-7.0.35` 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:38:46.557

将用户主文件夹设置为该路径。

```
Usermod -d /home/pi/apache-tomcat pizza4yu 
```

全部小写然后`chown -R pizza4yu /new/path`或将新用户添加到该文件夹​​的现有组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:23:35.877

```
chsh -s /bin/bash pizza4yu
usermod -d /home/pi/apache-tomcat pizza4yu
chown -R pizza4yu:pizza4yu /home/pi/apache-tomcat 
```

您也可以使用 chroot：[http ://chrootssh.sourceforge.net/](http://chrootssh.sourceforge.net/)

# sql - 如何通过其他 3 个表的每个可能组合对表中的一组行进行分组？

> ID：15610561
> 
> 赞同：0
> 
> 时间：2013-03-25T08:33:27.860
> 
> 标签：sql, postgresql, grouping, cross-join

这是表结构

```
Table A (id, name)
Table B (id, A-id)
Table C (id, quantity, B-id, D-id)
Table D (id, E-id, F-id)
Table E (id, name)
Table F (id, name) 
```

我想得到这样的结果

```
A.name | E.name | F.name | SUM(C.quantity) 
-------------------------------------------
foo    | aaa    | zzz    | 50
-------------------------------------------
foo    | aaa    | xxx    | 0
-------------------------------------------
foo    | bbb    | www    | 10
-------------------------------------------
bar    | aaa    | zzz    | 12
-------------------------------------------
bar    | aaa    | xxx    | 1
-------------------------------------------
bar    | bbb    | www    | 30
------------------------------------------- 
```

我必须在 、 和 中显示所有条目，`A`即使在 C 中没有与它们相关的条目。`E``F`

所以基本上我必须按, 和`C`的所有可能组合对所有数据进行分组`A`，`E`并`F`显示.`0``C`

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:40:52.297

利用[**`CROSS JOIN`**,**`LEFT [OUTER] JOIN`**](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)和[**`COALESCE`**](http://www.postgresql.org/docs/current/interactive/functions-conditional.html#FUNCTIONS-COALESCE-NVL-IFNULL):

如果你想要一个`CROSS JOIN`非常不寻常并且可能产生**很多**行的 ，它可能看起来像这样。**更新**后更加激进：`b`现在`d`也是可选的。

```
SELECT a.name AS a_name, e.name AS e_name, f.name AS f_name
      ,COALESCE(sum(c.quantity), 0) As sum_quantity
FROM   a
CROSS  JOIN e
CROSS  JOIN f
LEFT   JOIN b ON b.a_id = a.id
LEFT   JOIN d ON d.e_id = e.id
             AND d.f_id = f.id
LEFT   JOIN c ON c.b_id = b.id
             AND c.d_id = d.id
GROUP  BY 1,2,3; 
```

由于缺乏规范，我`c`只有在两者`b_id` **都** `d_id`匹配时才加入。

### 评论中的附加 Q

> 在您的最后一个答案中，您在交叉连接后加了一个括号，这是做什么的？

我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)：

> 必要时使用括号来确定嵌套顺序。在没有括号的情况下，JOIN 从左到右嵌套。在任何情况下，JOIN 比分隔 FROM 项的逗号绑定得更紧密。

# c++ - 构造函数在 C++ 上的 if 语句上初始化后删除的字符串

> ID：15610565
> 
> 赞同：4
> 
> 时间：2013-03-25T08:33:54.147
> 
> 标签：c++, string, constructor, scope, initialization

在构造函数上初始化一个名为 ManageRenderListenerCommand 的类时，我在 C++（MVS 2010）上遇到了异常行为。这是作为命令设计模式实现的，其中 ManageRenderListenerCommand 命令是具体命令之一。

我称之为 ManageRenderListenerCommand 的地方

```
void Mediator::change(Negotiator* negotiator, NegotiatorEvent& negotiatorEvent){
    ICommand* command = NULL;
    if(negotiatorEvent.matchEvent("addToViewport")){
        command = static_cast<ICommand*> (&AddToViewportCommand(mCameraManager, mSceneCreator, mEngine));
    }else if (negotiatorEvent.matchEvent("manageRenderListener")){
        command = static_cast<ICommand*> (&ManageRenderListenerCommand(mObserverRegistry, mEngine, negotiatorEvent.getMessage()));
    }

    //Execute the created command
    if (command) command->execute();
} 
```

`negotiatorEvent.getMessage()`正如您在代码中看到的，ManageRenderListener 接收一个字符串，在这种情况下，该字符串包含 NegotiatorEvent 类 ( )中包含的单词 add 。

问题是，在构造函数上，我将字符串放在私有成员上，但是在分配和强制转换之后我可以看到调试被删除并重新初始化为“”。我试过static_cast、dynamic_cast。为了提供线索，我认为这是一个可见性问题，但我不知道如何管理它。

```
}else if (negotiatorEvent.matchEvent("manageRenderListener")){
    //Here mMessage = ""
    command = static_cast<ICommand*> (&ManageRenderListenerCommand(mObserverRegistry, mEngine, negotiatorEvent.getMessage()));
    //Here mMessage is again "" instead of add
} 
```

管理渲染监听器.cpp

```
#include "ManageRenderListenerCommand.h"

ManageRenderListenerCommand::ManageRenderListenerCommand(
    OgreRenderObserverRegistry* observerRegistry, 
    OgreEngine* engine,
    string message):
        mObserverRegistry(observerRegistry),
        mEngine(engine),
        mMessage(message){
}

void ManageRenderListenerCommand::execute(){
    if (mMessage.compare("add") == 0){
        mEngine->addRenderListener(mObserverRegistry->getCachedObserver());
    }else if (mMessage.compare("detach") == 0){
        mEngine->detachRenderListener(mObserverRegistry->getCachedObserver());
    }
} 
```

如果您需要更多详细信息，请索取。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T08:43:33.377

你正在使用一个悬空指针。您正在使用的对象构造会创建一个临时对象，该对象在完整表达式 (the `static_cast`) 结束时被销毁。你仍然有一个指向它所在位置的指针（in `command`），但对象本身已经被销毁了。

您需要以某种方式创建命令，使其持续到调用`execute()`. 如果代码如您所示，您可以简单地执行以下操作：

```
if(negotiatorEvent.matchEvent("addToViewport")){
    AddToViewportCommand(mCameraManager, mSceneCreator, mEngine).execute();
}else if (negotiatorEvent.matchEvent("manageRenderListener")){
    ManageRenderListenerCommand(mObserverRegistry, mEngine, negotiatorEvent.getMessage()).execute();
} 
```

如果在创建和调用之间有更多步骤`execute()`，您可能必须动态创建命令：

```
void Mediator::change(Negotiator* negotiator, NegotiatorEvent& negotiatorEvent){
    ICommand* command = NULL;
    if(negotiatorEvent.matchEvent("addToViewport")){
        command = new AddToViewportCommand(mCameraManager, mSceneCreator, mEngine);
    }else if (negotiatorEvent.matchEvent("manageRenderListener")){
        command = new ManageRenderListenerCommand(mObserverRegistry, mEngine, negotiatorEvent.getMessage());
    }

    //Execute the created command
    if (command) command->execute();

    delete command;
} 
```

如果您有权访问 C++11，请使用`std::unique_ptr<ICommand>`for`command`而不是原始指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:42:45.953

我认为您要做的是初始化一个在 c'tor 中接受字符串的命令；您实际上所做的是强制命令成为字符串本身的地址。您需要使用运算符“new”创建一个新对象，如果您已经匹配了命令的类型，您应该能够启动特定的命令，并在 c'tor 中给它一个字符串，如：

```
command = new SomeICommand(ManageRenderListenerCommand(mObserverRegistry, mEngine, negotiatorEvent.getMessage()); 
```

# php - 大型 HTML 文件的 DomPDF 渲染导致 500 错误

> ID：15610567
> 
> 赞同：5
> 
> 时间：2013-03-25T08:33:56.473
> 
> 标签：php, dompdf

我正在使用最新版本的 DomPDF (0.6.0 beta 3)。

PHP 版本是 5.2.17。

不幸的是，我使用的是共享主机帐户，无法升级 PHP 和类似操作。我也无权访问 apache 错误日志，无论如何我认为这不会很有帮助。

我已将`memory_limit`PHP设置为`2048M`和。虽然不知道有没有生效。我认为它们实际上并不重要，因为我觉得 DomPDF 没有超时或内存不足。500 错误似乎在请求页面后仅 10 秒发生，当我尝试生成页面较少的 PDF 时，脚本需要更长的时间（12-15 秒）但成功结束。`max_execution_time``999`

我有一个 72.3kb 大的 HTML 文件，只有一个小的 HTML 表格。（事实上​​，删除带有表格的页面对解决问题没有任何帮助。）PDF 应该会产生大约 35 页。

经过大量挖掘后，我发现错误发生在第 30 - 31 页，在函数`page_frame_reflower.cls.php`内部的以下代码行中`reflow`：

```
 // Render the page
  $this->_frame->get_renderer()->render($child); 
```

在每个循环（页面）上`echo`ing`memory_get_usage`时，该值似乎保持一致，低于可用内存的 5%。

使用`get_class`on`$this->_frame->get_renderer()`我能够确定问题函数是`Renderer::render()`.

不幸的是，我没有简单的方法来继续使用我当前的方法进行调试。该方法`Renderer::render()`不允许我将计数器变量添加到参数中，因为它需要与其父函数兼容。

任何人都对我有任何帮助，你有没有看到我遗漏的任何东西 - 你能指出我修复这 500 个错误的正确方向吗？

**编辑：**我已经从 HTML 文档中删除了所有内联 PHP 的使用，它似乎没有改变任何东西。

**编辑 2：**文档太大，无法完全通过 Tidy，但最多 50000 字节没有错误。

**编辑 3：** PHP 错误日志记录已打开。我可以通过调用错误的方法名称和其他东西来产生错误。这些错误出现在屏幕上。事实上，即使我在问题方法之前导致无限循环，我也会将 PHP 最大执行时间达到错误打印到屏幕上。但是，问题区域显示 500 Internal Server Error 页面。

**编辑 4：**我去掉了所有的 CSS，生成的 PDF 没有样式。现在我们正在取得进展。我会慢慢添加 CSS，然后我可以缩小问题代码的范围。谢谢，@Liv。

**编辑 5：**我将 CSS 缩小到问题的萌芽：h1 规则。我在 h1 标签上使用了背景图片。因此，从我最初的问题来看，我所要做的就是从 h1 标签中删除背景图像，以使 PDF 正常工作。处理大量带有背景图像的元素对 DomPDF 来说是个问题吗？

**编辑 6：**这是 HTML 文件：[http](http://www.pickering-mcaloon.com/wp-content/uploads/2013/03/test2.html) ://www.pickering-mcaloon.com/wp-content/uploads/2013/03/test2.html我必须删除内容（不是我的）。我用 DomPDF 测试了这个版本的 HTML，得到了 500 服务器错误。我的标题图片是 25.1 kb。需要注意的是，每页的页脚也使用了背景图片，效果很好。在此 HTML 副本中，删除 1 个“章节”部分允许 DomPDF 完成 PDF 的生成。

**编辑 7：**当我第一次遇到我使用过的问题`memory_get_usage`并且在循环顶部`Renderer::render()`被调用时，每次它显示的用法略有不同，但低于最大值的 6%，设置为`2048M`. 我不相信这个问题是超时错误或内存错误，因为我可以在调用之前产生这些类型的错误`render`并将 PHP 错误打印到屏幕上。此外，运行大约 10 秒后会出现 500 错误 - 当 PDF 工作时，大约需要 15-20 秒。所以超时是不可能的。内存错误，也许是这样，但如果是这样，为什么不打印错误，因为如果在调用`render`.

**编辑 8：**我将用作 h1 标签的背景图像的图像从 PNG 转换为 JPG，从而将其大小从 25.1kb 减小到 2.6kb，并且 PDF 生成正确。这很可能是内存问题。PHP 应该生成一个错误并显示给我，但它没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-25T13:28:07.117

我面临同样的问题并且仍在努力。我正在使用 Dompdf 并尝试转换只有 33KB 的 HTML 页面，但我收到 500 内部服务器错误。

我的 html 页面在 head 部分下有多个外部样式表，包括引导 css。但是当我删除 bootstrap css 时， dompdf 工作正常。

删除这一行可能会对您有所帮助 --> link type="text/css" rel="stylesheet" href="/bootstrap.css"

但我不知道应该怎么做才能将 Bootstrap.css 包含到 dompdf 以及为什么 bootstrap 样式会导致 dompdf 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-24T07:46:45.980

通常，当内存限制低于所需的内存时，通常会发生此问题。

这些是增加的，例如： ini_set("memory_limit", "800M"); ini_set("max_execution_time", "800");

**注意：在实例化类之前执行此操作，$dompdf = new DOMPDF();**

无论您需要什么，这里都设置了 memory_limit 或 max_execution_time。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-23T11:17:53.540

只是我的两美分（不能在 OP 中发表评论，因为我的代表少于 50，抱歉）。经过几个小时的痛苦，检查了 Apache 日志（doh！），令我惊讶的是：

```
PHP Fatal error:  Uncaught exception 'Exception' with message 'The PHP GD extension 
is required, but is not installed.' in \\wwwroot\\app\\dompdf070\\lib\\Cpdf.php:4965 
```

启用 GD 扩展解决了我的问题。

您可以在 PHP.INI 中取消注释该行 

```
extension=php_gd2.dll 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-24T08:08:41.140

我过去曾使用 DOMPDF 从 HTML 代码生成 PDF。我也面临同样的问题。经过多天的挣扎，我开始知道 dompdf 仅适用于像 3 到 4 页这样的小文档，这是粗略的数字。Dompdf 非常适合基于 CSS 2 的样式，并且呈现接近现实。但它不支持大页面转换，如果你转换大页面 pdf 会花费太多时间并卡住或抛出 500 错误。如果您的 html 中有简单的渲染数据，我建议您使用 TCPDF。另一种选择是使用 wkhtmltopdf 扩展，它可以安装在 linux 服务器上并转换，只需告诉 url，它就会为您转换完全相同的 PDF。

以下是一些链接：

```
https://tcpdf.org/
https://wkhtmltopdf.org/
https://github.com/mikehaertl/phpwkhtmltopdf
https://stackoverflow.com/questions/5663814/how-do-i-get-wkhtmltopdf-to-execute-via-php 
```

# c - Linux 平台驱动程序和普通设备驱动程序有什么区别？

> ID：15610570
> 
> 赞同：63
> 
> 时间：2013-03-25T08:34:01.853
> 
> 标签：c, linux, linux-kernel, linux-device-driver

早些时候我假设：

*   平台驱动程序适用于芯片上的那些设备。
*   普通设备驱动程序适用于与处理器芯片连接的设备驱动程序。

在遇到一个 i2c 驱动程序之前......但是在这里，我正在阅读定义为平台驱动程序的多功能 i2c 驱动程序。我已经浏览了[https://www.kernel.org/doc/Documentation/driver-model/platform.txt](https://www.kernel.org/doc/Documentation/driver-model/platform.txt)。但是仍然无法清楚地得出关于如何定义驱动程序的结论，例如片上设备和接口设备。

请有人解释一下。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-04-02T19:33:01.557

您的参考资料很好，但缺乏对**平台设备**的定义。[LWN](http://lwn.net/Articles/448499/)上有一个。我们可以从这个页面学到什么：

1.  平台设备**本质上是不可发现**的，即硬件不能说*“嘿！我在场！”* 到软件。典型的例子是 i2c 设备，`kernel/Documentation/i2c/instantiating-devices`状态：

    > 与 PCI 或 USB 设备不同，I2C 设备不在硬件级别（在运行时）枚举。相反，软件必须知道（在编译时）每个 I2C 总线段上连接了哪些设备。所以 USB 和 PCI*不是*平台设备。

2.  平台设备**通过匹配名称**绑定到驱动程序，

3.  平台设备应在系统引导期间**尽早注册。**因为它们通常对系统的其余部分（平台）及其驱动程序至关重要。

所以基本上，“*它是平台设备还是标准设备？* ”**的问题更多的是它使用哪种总线的问题**。要使用特定平台设备，您必须：

1.  **注册**将管理此设备的平台驱动程序。它应该定义一个*唯一的*名称，
2.  **注册您的平台设备**，定义与驱动程序相同的名称。

> 平台驱动程序适用于芯片上的那些设备。

不正确（理论上，但在实践中是正确的）。i2c 设备不是片上设备，而是平台设备，因为它们是不可发现的。我们也可以认为是*普通*设备的 onChip设备。示例：现代 x86 处理器上的集成 PCI GPU 芯片。它是可发现的，因此不是平台设备。

> 普通设备驱动程序适用于与处理器芯片连接的设备驱动程序。在遇到一个 i2c 驱动程序之前。

不对。许多*普通*设备与处理器连接，但不通过 i2c 总线。示例：USB 鼠标。

**[编辑]**在您的情况下，请查看`drivers/usb/host/ohci-pnx4008.c`，这是一个 USB 主机控制器平台设备（此处 USB 主机控制器是不可发现的，而将连接到它的 USB 设备是）。它是由*板文件*（`arch/arm/mach-pnx4008/core.c:pnx4008_init`）注册的平台设备。在它的探测函数中，它将它的 i2c 设备注册到总线上`i2c_register_driver`。我们可以推断出 USB 主机控制器芯片组通过 i2c 总线与 CPU 通信*。*

为什么是那种架构？因为一方面，这个设备可以被认为是一个为系统提供一些功能的裸 i2c 设备。另一方面，它是一个支持 USB 主机的设备。它需要注册到 USB 堆栈 ( `usb_create_hcd`)。所以只探测 i2c 是不够的。看看`Documentation/i2c/instantiating-devices`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-07-09T09:04:50.477

**最小模块代码示例**

也许通过一些具体的例子，差异也会变得更加清晰。

**平台设备示例**

代码：

*   [上游司机](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/1cd55ebf53542208f7a614a856066123b93d303d/kernel_module/platform_device.c)
*   [最小的 QEMU 虚拟设备驱动](https://github.com/cirosantilli/qemu/blob/144ea94d710c666babd06ed733007377e132ed4a/hw/misc/lkmc_platform_device.c)。
*   [Linux内核上的DTS入口修改](https://github.com/cirosantilli/linux/blob/361bb623671a52a36a077a6dd45843389a687a33/arch/arm/boot/dts/versatile-pb.dts#L42)

进一步的集成说明：[https ://stackoverflow.com/a/44612957/895245](https://stackoverflow.com/a/44612957/895245)

怎么看：

*   寄存器和中断地址在设备树中被硬编码并匹配 QEMU`-M versatilepb`机器描述，它代表 SoC
*   无法移除设备硬件（因为它是 SoC 的一部分）
*   正确的驱动程序由驱动程序中匹配的设备`compatible`树属性选择`platform_driver.name`
*   `platform_driver_register`是主要的寄存器界面

```
#include <linux/init.h>
#include <linux/interrupt.h>
#include <linux/io.h>
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/of_address.h>
#include <linux/of_device.h>
#include <linux/of_irq.h>
#include <linux/platform_device.h>

MODULE_LICENSE("GPL");

static struct resource res;
static unsigned int irq;
static void __iomem *map;

static irqreturn_t lkmc_irq_handler(int irq, void *dev)
{
    /* TODO this 34 and not 18 as in the DTS, likely the interrupt controller moves it around.
     * Understand precisely. 34 = 18 + 16\. */
    pr_info("lkmc_irq_handler irq = %d dev = %llx\n", irq, *(unsigned long long *)dev);
    /* ACK the IRQ. */
    iowrite32(0x9ABCDEF0, map + 4);
    return IRQ_HANDLED;
}

static int lkmc_platform_device_probe(struct platform_device *pdev)
{
    int asdf;
    struct device *dev = &pdev->dev;
    struct device_node *np = dev->of_node;

    dev_info(dev, "probe\n");

    /* Play with our custom poperty. */
    if (of_property_read_u32(np, "lkmc-asdf", &asdf) ) {
        dev_err(dev, "of_property_read_u32\n");
        return -EINVAL;
    }
    if (asdf != 0x12345678) {
        dev_err(dev, "asdf = %llx\n", (unsigned long long)asdf);
        return -EINVAL;
    }

    /* IRQ. */
    irq = irq_of_parse_and_map(dev->of_node, 0);
    if (request_irq(irq, lkmc_irq_handler, 0, "lkmc_platform_device", dev) < 0) {
        dev_err(dev, "request_irq");
        return -EINVAL;
    }
    dev_info(dev, "irq = %u\n", irq);

    /* MMIO. */
    if (of_address_to_resource(pdev->dev.of_node, 0, &res)) {
        dev_err(dev, "of_address_to_resource");
        return -EINVAL;
    }
    if  (!request_mem_region(res.start, resource_size(&res), "lkmc_platform_device")) {
        dev_err(dev, "request_mem_region");
        return -EINVAL;
    }
    map = of_iomap(pdev->dev.of_node, 0);
    if (!map) {
        dev_err(dev, "of_iomap");
        return -EINVAL;
    }
    dev_info(dev, "res.start = %llx resource_size = %llx\n",
            (unsigned long long)res.start, (unsigned long long)resource_size(&res));

    /* Test MMIO and IRQ. */
    iowrite32(0x12345678, map);

    return 0;
}

static int lkmc_platform_device_remove(struct platform_device *pdev)
{
    dev_info(&pdev->dev, "remove\n");
    free_irq(irq, &pdev->dev);
    iounmap(map);
    release_mem_region(res.start, resource_size(&res));
    return 0;
}

static const struct of_device_id of_lkmc_platform_device_match[] = {
    { .compatible = "lkmc_platform_device", },
    {},
};

MODULE_DEVICE_TABLE(of, of_lkmc_platform_device_match);

static struct platform_driver lkmc_plaform_driver = {
    .probe      = lkmc_platform_device_probe,
    .remove     = lkmc_platform_device_remove,
    .driver     = {
        .name   = "lkmc_platform_device",
        .of_match_table = of_lkmc_platform_device_match,
        .owner = THIS_MODULE,
    },
};

static int lkmc_platform_device_init(void)
{
    pr_info("lkmc_platform_device_init\n");
    return platform_driver_register(&lkmc_plaform_driver);
}

static void lkmc_platform_device_exit(void)
{
    pr_info("lkmc_platform_device_exit\n");
    platform_driver_unregister(&lkmc_plaform_driver);
}

module_init(lkmc_platform_device_init)
module_exit(lkmc_platform_device_exit) 
```

**PCI 非平台设备示例**

*   [上游司机](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/1cd55ebf53542208f7a614a856066123b93d303d/kernel_module/pci_min.c)
*   [最小的 QEMU 虚拟设备驱动](https://github.com/cirosantilli/qemu/blob/144ea94d710c666babd06ed733007377e132ed4a/hw/misc/lkmc_pci_min.c)

怎么看：

*   寄存器和中断地址由 PCI 系统动态分配，不使用设备树
*   `vendor:device`PCI ID选择了正确的驱动程序（`QEMU_VENDOR_ID, EDU_DEVICE_ID`例如）。这已融入每台设备，供应商必须确保其唯一性。
*   我们可以像在现实生活中那样`device_add edu`插入和移除 PCI 设备。`device_del edu`探测不是自动的，但可以在启动后使用`echo 1 > /sys/bus/pci/rescan`. 另请参阅：[除了 init 之外，为什么 Linux 设备驱动程序中还需要探测方法？](https://stackoverflow.com/questions/5059501/why-is-the-probe-method-needed-in-linux-device-drivers-in-addition-to-init/44739823#44739823)

```
#include <asm/uaccess.h>
#include <linux/cdev.h>
#include <linux/fs.h>
#include <linux/init.h>
#include <linux/interrupt.h>
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/pci.h>

#define BAR 0
#define CDEV_NAME "lkmc_hw_pci_min"
#define EDU_DEVICE_ID 0x11e9
#define QEMU_VENDOR_ID 0x1234

MODULE_LICENSE("GPL");

static struct pci_device_id id_table[] = {
    { PCI_DEVICE(QEMU_VENDOR_ID, EDU_DEVICE_ID), },
    { 0, }
};
MODULE_DEVICE_TABLE(pci, id_table);
static int major;
static struct pci_dev *pdev;
static void __iomem *mmio;
static struct file_operations fops = {
    .owner   = THIS_MODULE,
};

static irqreturn_t irq_handler(int irq, void *dev)
{
    pr_info("irq_handler irq = %d dev = %d\n", irq, *(int *)dev);
    iowrite32(0, mmio + 4);
    return IRQ_HANDLED;
}

static int probe(struct pci_dev *dev, const struct pci_device_id *id)
{
    pr_info("probe\n");
    major = register_chrdev(0, CDEV_NAME, &fops);
    pdev = dev;
    if (pci_enable_device(dev) < 0) {
        dev_err(&(pdev->dev), "pci_enable_device\n");
        goto error;
    }
    if (pci_request_region(dev, BAR, "myregion0")) {
        dev_err(&(pdev->dev), "pci_request_region\n");
        goto error;
    }
    mmio = pci_iomap(pdev, BAR, pci_resource_len(pdev, BAR));
    pr_info("dev->irq = %u\n", dev->irq);
    if (request_irq(dev->irq, irq_handler, IRQF_SHARED, "pci_irq_handler0", &major) < 0) {
        dev_err(&(dev->dev), "request_irq\n");
        goto error;
    }
    iowrite32(0x12345678, mmio);
    return 0;
error:
    return 1;
}

static void remove(struct pci_dev *dev)
{
    pr_info("remove\n");
    free_irq(dev->irq, &major);
    pci_release_region(dev, BAR);
    unregister_chrdev(major, CDEV_NAME);
}

static struct pci_driver pci_driver = {
    .name     = CDEV_NAME,
    .id_table = id_table,
    .probe    = probe,
    .remove   = remove,
};

static int myinit(void)
{
    if (pci_register_driver(&pci_driver) < 0) {
        return 1;
    }
    return 0;
}

static void myexit(void)
{
    pci_unregister_driver(&pci_driver);
}

module_init(myinit);
module_exit(myexit); 
```

# symfony - FOSRestBundle 路由

> ID：15610571
> 
> 赞同：3
> 
> 时间：2013-03-25T08:34:02.943
> 
> 标签：symfony, fosrestbundle

我使用 Symfony2.2 和 FOSRestBundle

我设置

```
#app/config/config/yml
myapp_rest:
    resource: "@MyappRestBundle/Resources/config/routing.yml"
    type: rest
    prefix:   /v1 
```

和

```
#src/Myapp/RestBundle/Resources/config/routing.yml
user:
    resource: Myapp\RestBundle\Controller\UserController
    type:     rest 
```

我的 UserController 扩展了 FOSRestController 并具有方法`cgetAction()`和`newAction()`. 当我尝试路由器：调试时，路由显示：

.. symfony 路线 ..

```
get                       GET    ANY  /v1/{id}.{_format}
new                       GET    ANY  /v1/new.{_format} 
```

根据文档，我所期望的类似于

```
"get_users"     [GET] /users 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:16:54.440

我建议你阅读路由文档。如果你想要 /users，你必须使用 getUsersAction：

> public function getUsersAction() {} // "get_users" [GET] /users

否则请阅读隐式资源名称定义部分。

[FOS 休息路由](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/5-automatic-route-generation_single-restful-controller.md)

# python - 通过网络在搅拌机中发送矢量对象

> ID：15610574
> 
> 赞同：1
> 
> 时间：2013-03-25T08:34:17.777
> 
> 标签：python, sockets, networking, blender

如何发送矢量对象。我正在尝试通过 udp 套接字连接以矢量格式发送对象的位置。

```
socket.sendto(self.cube.worldPosition,server_addr) 
```

但我收到以下错误：TypeError: 'Vector' does not support the buffer interface

我怎样才能做到这一点，或者有没有其他方法可以发送对象的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:07:23.290

只需访问向量的值，形成一个列表并使用 pickle 模块发送

```
 ##player.worldPosition is the vector        
    x = player.worldPosition[0]
    y = player.worldPosition[1]
    z = player.worldPosition[2]                      
    xyz = [x,y,z] #forming the list
    ddd = pickle.dumps(xyz) #serialize the list
    self.socket.sendto(ddd,self.server_address) #off it goes 
```

这对我有用

# vb.net - vb .net 使用 excel 自动化将数据粘贴到打开的工作簿中

> ID：15610575
> 
> 赞同：0
> 
> 时间：2013-03-25T08:34:19.897
> 
> 标签：vb.net, ms-office, office-automation

是否可以使用 vb.net 的办公自动化将数据粘贴到已打开的工作表中？（我使用 oledb 完成，但速度很慢。）

```
 Dim Folder As String = "C:\Users\gm1\Desktop\"
        Dim Filename As String = "Raw2Eng.xlsx"
        Dim ConnectionString As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & Folder & "\" & Filename & ";Extended Properties=""Excel 12.0;HDR=YES;"""
        Dim MyConnection As New OleDbConnection(ConnectionString)

        MyConnection.Open()
        Dim cmd1 As New OleDbCommand
        cmd1.Connection = MyConnection
        cmd1.CommandText = "DROP TABLE [Sheet2$A1:E1027]"
        cmd1.ExecuteNonQuery()

        cmd1.CommandText = "CREATE TABLE [Sheet2$A1:E1027] (HiResAngle FLOAT, CH2 FLOAT, CH4 FLOAT, CH5 FLOAT, CH6 FLOAT)"
        cmd1.ExecuteNonQuery()

        For j As Integer = 0 To TrimmedSegmentSize - 1
            sb = New StringBuilder
            sb.Append("INSERT INTO [Sheet2$A" & 1 & ":E" & j + 1 & "] (HiResAngle, CH2, CH4, CH5, CH6) values ( '")
            sb.Append(eng(i, j, 0)) : sb.Append("' , '")
            sb.Append(eng(i, j, 1)) : sb.Append("' , '")
            sb.Append(eng(i, j, 2)) : sb.Append("' , '")
            sb.Append(eng(i, j, 3)) : sb.Append("' , '")
            sb.Append(eng(i, j, 4)) : sb.Append("' )")
            cmd1.CommandText = sb.ToString
            cmd1.ExecuteNonQuery()
        Next
        MyConnection.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:38:31.307

OleDb 比自动化快得多。向我们展示您的代码，可能还有其他问题。

[编辑] 如果你真的想使用自动化（因为你想保持工作簿打开），你可以阅读这篇文章：[如何使用 Visual Basic .NET 将数据传输到 Excel 工作簿](http://support.microsoft.com/kb/306022/en-us)

# querydsl - QueryDSL - 从时间戳列中选择带有日期的行

> ID：15610576
> 
> 赞同：5
> 
> 时间：2013-03-25T08:34:21.837
> 
> 标签：querydsl

使用 QueryDSL - 除了使用 .between 之外，有没有办法从时间戳中按日期选择行？像这样的查询：

> 其中转换（日期，mytimestamp）='2013-02-28'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T09:57:12.667

如果使用 Querydsl SQL，则可以使用 between 或自定义表达式

像这样的东西

```
DateExpression<Date> converted = DateTemplate.create(Date.class, "convert(date, {0})", mytimestamp); 
```

# jquery - jQuery UI Tooltip 仅在使用键盘切换时显示一次

> ID：15610578
> 
> 赞同：0
> 
> 时间：2013-03-25T08:34:28.007
> 
> 标签：jquery, jquery-ui, accessibility, keyboard-events, jquery-ui-tooltip

我已经使用 jquery ui 创建了一个工具提示，但是当我使用键盘导航时，工具提示内容只出现一次，并且再也不会出现。

任何想法为什么会发生这种情况？

```
$('.test').tooltip({
    tooltipClass: "tip-style",
    position: {
        my: "left center",
        at: "right center"
    },
    content: function() {
        return $('#tip-content').html();
    }
}); 
```

我的工作示例：http: [//jsfiddle.net/WQpGE/](http://jsfiddle.net/WQpGE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T23:36:55.173

我认为这是因为工具提示文档说该`content:`方法应该是回调或字符串

> 支持多种类型：

```
Function: A callback which can either return the content directly, 
          or call the first argument, passing in the content, e.g., 
          for Ajax content.

String: A string of HTML to use for the tooltip content. 
```

我通过创建一个命名函数并在内容方法中引用它来编辑您的代码。它似乎按预期工作。

[http://jsfiddle.net/WQpGE/3/](http://jsfiddle.net/WQpGE/3/)

# python - openerp中的python函数参数

> ID：15610581
> 
> 赞同：0
> 
> 时间：2013-03-25T08:34:30.460
> 
> 标签：python, openerp

谁能向我解释这些论点代表什么以及它们做了​​什么**（self，cr，uid，obj，name，type，args，context）**。我找不到任何关于它们的好文档。

```
def _do_something(self, cr, uid, obj, name, type, args, context=None): 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:44:50.110

从[6.0 方法文档](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/methods.html)-

> *cr* – 数据库游标
> 
> *uid* - 当前用户 id
> 
> *context* – 上下文参数，如语言、时区

来自[6.0 field_type 文档](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/field_type.html)-

> *obj*与 self 相同
> 
> *name*接收字段名称
> 
> *args*是包含该字段搜索条件的 3 部分元组的列表，尽管可以为每个元组单独调用搜索函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:51:40.037

OpenERP 中的大多数函数都需要参数，这些函数是**self、cr、uid、ids、context**

1.  self: Self 是你当前的对象。
2.  cr：它是连接到 OpenERP 的 postgress 数据库的游标
3.  uid：它包含当前登录用户的**ID**。
4.  ids：记录的 ID 列表。
5.  上下文：包含一些键和值的字典，如语言、时区等。

如果要为 定义函数`fields.function`，则需要一些额外的参数。您可以参考[功能字段](http://doc.openerp.com/v6.0/developer/2_5_Objects_Fields_Methods/field_type.html#functional-fields)。

# php - 在 onMessage() 上收到推送通知时执行一些代码

> ID：15610584
> 
> 赞同：1
> 
> 时间：2013-03-25T08:34:40.820
> 
> 标签：php, android, android-asynctask, push-notification, android-service

这是我的代码，当收到推送通知时，我必须在 AsyncTask 中执行一些 http 请求。据我了解，如果我需要在推送通知到达时执行某些操作，我必须在 OnMessage() 方法中执行此操作。但是，应用程序在收到通知时崩溃并且不执行我需要它执行的操作：代码：

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = intent.getExtras().getString("price");
    //sends info to the server

    new PostAsyncTask().execute();

    displayMessage(context, message);
    // notifies user
    generateNotification(context, message);
} 
```

非常感谢！（如果您需要整个班级，请直接说出来。但是我可以告诉您 PostAsyncTask 执行一些 httpRequest 代码。）

日志猫：

[http://pastebin.com/LggC0uFq](http://pastebin.com/LggC0uFq)

AsyncTask：（它只是调用一个执行一些http请求的函数）

```
class PostAsyncTask extends AsyncTask<String, Integer, Boolean> {
     protected Boolean doInBackground(String... params) {
        ReNewCoordinates();
         postData(lat, lon);
            return true;

     }

     protected void onPreExecute() {
         // show progress dialog
     }

         protected void onPostExecute(Long result) {
             // hide  progress dialog
         }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:10:14.753

我想，您不应该使用推送通知的 onMessage 方法中的 AsyncTask。您应该调用一个服务来完成建立 http 连接的任务。如果您使用 Service 类，请记住使用单独的线程，因为它仅在 UI 线程上运行。我希望这能够帮到你。

# python - 如何读取包含在 gz 文件中的文件名

> ID：15610587
> 
> 赞同：7
> 
> 时间：2013-03-25T08:35:11.120
> 
> 标签：python, gzip, compression

我试图读取一个 gz 文件：

```
with open(os.path.join(storage_path,file), "rb") as gzipfile:
        with gzip.GzipFile(fileobj=gzipfile) as datafile:
            data = datafile.read() 
```

它有效，但我需要包含在我的 gz 文件中的每个文件的文件名和大小。此代码将包含文件的内容打印到存档中。

如何读取此 gz 文件中包含的文件名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T08:47:10.900

Python`gzip`模块不提供对该信息的访问。

源代码跳过它而不存储它：

```
if flag & FNAME:
    # Read and discard a null-terminated string containing the filename
    while True:
        s = self.fileobj.read(1)
        if not s or s=='\000':
            break 
```

文件名组件是可选的，不保证存在（我认为，在这种情况下，命令行`gzip -c`解压缩选项将使用原始文件名 sans ）。`.gz`未压缩的文件大小不存储在标头中；您可以在最后四个字节中找到它。

要自己从标题中读取文件名，您需要重新创建文件标题读取代码，并*保留*文件名字节。以下函数返回它，*加上*解压缩后的大小：

```
import struct
from gzip import FEXTRA, FNAME

def read_gzip_info(gzipfile):
    gf = gzipfile.fileobj
    pos = gf.tell()

    # Read archive size
    gf.seek(-4, 2)
    size = struct.unpack('<I', gf.read())[0]

    gf.seek(0)
    magic = gf.read(2)
    if magic != '\037\213':
        raise IOError('Not a gzipped file')

    method, flag, mtime = struct.unpack("<BBIxx", gf.read(8))

    if not flag & FNAME:
        # Not stored in the header, use the filename sans .gz
        gf.seek(pos)
        fname = gzipfile.name
        if fname.endswith('.gz'):
            fname = fname[:-3]
        return fname, size

    if flag & FEXTRA:
        # Read & discard the extra field, if present
        gf.read(struct.unpack("<H", gf.read(2)))

    # Read a null-terminated string containing the filename
    fname = []
    while True:
        s = gf.read(1)
        if not s or s=='\000':
            break
        fname.append(s)

    gf.seek(pos)
    return ''.join(fname), size 
```

将上述函数与已创建的`gzip.GzipFile`对象一起使用：

```
filename, size = read_gzip_info(gzipfileobj) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T08:48:02.187

GzipFile 本身没有这些信息，但是：

1.  文件名（通常）是存档的名称减去`.gz`
2.  如果未压缩文件小于 4G，则存档的最后四个字节包含未压缩大小：

```
In [14]: f = open('fuse-ext2-0.0.7.tar.gz')

In [15]: f.seek(-4, 2)

In [16]: import struct

In [17]: r = f.read()

In [18]: struct.unpack('<I', r)[0]
Out[18]: 7106560

In [19]: len(gzip.open('fuse-ext2-0.0.7.tar.gz').read())
Out[19]: 7106560 
```

（从技术上讲，最后四个字节是原始（未压缩）输入数据模 2 ^(32)的大小（成员预告片中的 ISIZE 字段，[http:](http://www.gzip.org/zlib/rfc-gzip.html) //www.gzip.org/zlib/rfc-gzip.html ））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:36:46.670

我已经在这种模式下解决了：

```
fl = search_files(storage_path)     
for f in fl:
    with open(os.path.join(storage_path,f), "rb") as gzipfile:
        with gzip.GzipFile(fileobj=gzipfile) as datafile:
            data = datafile.read()
        print str(storage_path) + "/" + str(f[:-3]) +  " : " + str(len(data)) + " bytes" #pcap file size 
```

我不知道这是否正确。

有什么建议吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:47:15.193

新代码：

```
fl = search_files(storage_path)     
for f in fl:
    with open(os.path.join(storage_path,f), "rb") as gzipfile:
        #try with module 2^32
        gzipfile.seek(-4,2)
        r = gzipfile.read()
        print str(storage_path) + "/" + str(f[:-3]) +  " : " + str(struct.unpack('<I' ,r)[0]) + " bytes" #dimensione del file pcap 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-19T17:21:54.903

Martjin的解决方案真的很不错，我已经为Python 3.6+打包了：[https ://github.com/PierreSelim/gzinfo](https://github.com/PierreSelim/gzinfo)

只是需要`pip install gzinfo`

在你的代码中

```
import gzinfo

info = gzinfo.read_gz_info('bar.txt.gz')

# info.name is 'foo.txt'
print(info.fname) 
```

# c# - 以编程方式复制 exe 文件后更改管理员权限

> ID：15610588
> 
> 赞同：1
> 
> 时间：2013-03-25T08:35:23.230
> 
> 标签：c#, admin, privileges

我用 C# 编程已经有一段时间了。在过去的几天里，我从你那里得到了很多帮助。但我被困在这里...

我已经构建了一个 .exe 文件并更改了清单，以便在执行时需要管理权限。我在清单中更改了以下内容

```
requestedExecutionLevel level="requireAdministrator" uiAccess="false" 
```

这将提示一个 UAC 窗口，通知用户 .exe 文件需要管理员权限。

现在，我已将我的 .exe 文件复制到本地计算机上的另一个位置。但问题是，复制的文件在我运行时也需要管理员权限。我想编辑该复制文件的权限。我希望复制的文件没有这样的管理员权限限制。我想让它正常运行。

我需要这样做，因为我已经制作了 .exe 文件来更改在每次启动时调用复制的 .exe 文件的注册表。我注意到复制的 .exe 文件具有管理员权限，注册表调整不起作用。虽然当 .exe 文件不需要任何管理员权限时它可以完美运行。

有没有办法解决这个问题？

# jboss - 如何在同一台机器上运行 2 个 JBoss EPP（企业门户平台）实例

> ID：15610593
> 
> 赞同：1
> 
> 时间：2013-03-25T08:35:50.987
> 
> 标签：jboss, portlet, jboss5.x

是否可以在同一台机器上的不同端口上运行 2 个 JBoss EPP（企业门户平台）实例？JBoss Enterprise Portal Platform 版本为 5.2.2，基于 JBoss AS 5.2.0

我正在学习 portlet，我需要通过 WSRP 在运行在 2 个不同 JBoss EPP 实例上的 2 个 portlet 之间建立通信。

作为最后的手段，我最终可能会在虚拟机上安装第二个 JBoss EPP 实例。

任何提示将不胜感激。

**更新：**

有2个选项：

1.  修改 bindings-jboss-beans.xml 并设置 `<parameter>${jboss.service.binding.set:ports-01}</parameter>`
2.  修改 jboss 启动脚本（run.conf, run.bat.conf）：将
    -Djboss.service.binding.set=ports-01 添加到 $JAVA_OPTS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:00:49.927

是的，您可以通过使用不同的端口在同一台机器上运行 2 个 JBoss EPP 实例（例如，在第二个实例上使用“run -Djboss.service.binding.set=ports-01”）。

你在做的时候遇到问题了吗？

# .net - Dictionary<,>.SetCapacity(int newCapacity) 在哪里？

> ID：15610595
> 
> 赞同：11
> 
> 时间：2013-03-25T08:35:57.810
> 
> 标签：.net, dictionary

如果我想`Dictionary`一次将大量项目添加到 a 并且我提前知道（粗略）数字，那么如果我使用适当的构造函数重载设置初始容量，它在内存和 cpu 方面会更快更高效。

在我测试的情况下，使用 300.000 个条目，如果我将 Dictionary 的容量设置为 300.000，它比未初始化时快大约 25%。

现在，如果我有一个**已经构建的空字典**，我需要填充很多项目，我该怎么办？假设这是一个`readonly`我不能用新的 Dictionary 实例重新分配的变量。我在文档中看不到任何影响已经构建的 Dictionary 容量的东西。像 a这样的东西`Clear(int newInitialCapacity)`会很好。

我运气不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:03:58.157

看起来答案是：**是的，我不走运。已经构建的字典的容量不能改变**，当然除了通过逐个添加元素来递增。

如果 .net`Dictionary`有一个`AddAll(..)`类似于**Java 的[putAll](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html#putAll%28java.util.Map%29)**的方法，那么我可以把它留给`Dictionary`实现者的聪明才智。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T13:29:18.807

您声明“在文档中看不到任何影响已构建字典容量的内容”。

根据文档，容量不会在清除时重置。

[Dictionary.Clear 方法](http://msdn.microsoft.com/en-us/library/b5txwy7s.aspx)

> Count 属性设置为 0，同时释放集合元素对其他对象的引用。容量保持不变。

您有一本词典，其中包含超过 300,000 个项目和性能调整，但您没有新词典的选项？

可能值得检查 KeyCollection，因为您可以覆盖 ClearItems。

[KeyedCollection.ClearItems 方法](http://msdn.microsoft.com/en-us/library/ms132450.aspx)

在 HashSet 上有一个 TrimExcess。

[HashSet.TrimExcess 方法](http://msdn.microsoft.com/en-us/library/bb468758.aspx)

# wix - WiX 3.7 使用 Microsoft 引导程序

> ID：15610597
> 
> 赞同：1
> 
> 时间：2013-03-25T08:36:01.783
> 
> 标签：wix, wix3.7

我是 WiX 的新手。我在 wix 设置项目中找到了直接包含 Microsoft Bootsrappers 的教程。不幸的是，wix3.7 无法做到这一点，因为它希望使用 WiX 引导程序项目来检查先决条件。

如何在我的 WiX 3.7 引导程序项目中使用 Microsoft 提供的引导程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T16:59:16.977

如果您已经构建了一个想要包含在 WiX Bootstrapper 项目中的 Microsoft Bootstrapper，则在 Wix/Bundle/Chain 下为它创建一个 ExePackage 元素（通常在一个名为 Bundle.wxs 的文件中）。列出 ExePackage 下 Payload 元素中所需的每个文件。

该列表很容易使用文本模板 (.tt) 生成。不幸的是，WiX 项目 (.wixproj) 不提供添加或构建此类文件的功能。简单的解决方法是创建一个空的 C# 项目，在其中添加一个文本模板文件，然后将生成的 WiX 文件添加到您的 WiX 项目中。

这是一个示例文本模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".wxs" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.IO" #>
    <!-- 
    Generated file list for a WixBootstrapper project
    <#=DateTime.Now.ToString("s")#>
-->
<#
// Assumes all projects are in sibling folders so relative paths can be used
  var thisProjectDir = new FileInfo(this.Host.TemplateFile).Directory;
  var appProjectDir = Path.GetFullPath(thisProjectDir + @"\..\DemoApplication");
  var sourceFiles = Directory
      .GetFiles(appProjectDir + @"\publish", "*.*",  SearchOption.AllDirectories)
      .Select(s => s.Replace(appProjectDir, @"..\DemoApplication"));
  var payloads = sourceFiles
      .Select(s => String.Format("<Payload SourceFile='{0}' Name='{1}' />", s, s.Replace(@"..\DemoApplication\publish\", "")));
  #>
  <Fragment>
    <PackageGroup Id="DemoApplicationBootstrapper">
      <ExePackage InstallCommand="Setup.exe" SourceFile="<#=sourceFiles.FirstOrDefault(s=>s.Contains("setup.exe"))#>">
<# foreach (var payload in payloads) { #>
        <#=payload#>
<# } #>
      </ExePackage>
    </PackageGroup>
  </Fragment>
</Wix> 
```

它在 .wxs 文件中生成一个 WiX 片段。在 Bundle.wsx 中使用 PackageGroupRef 而不是 ExePackage。

*VS 提示：要将现有文件添加到项目而不复制它，请单击“添加”按钮旁边的下拉箭头，然后选择“添加为链接”。*

*构建提示：通常，文本转换仅在保存模板时执行。当输出依赖于其他文件时，这不起作用。要在每个构建上进行转换，请使用 [TransformOnBuild](http://msdn.microsoft.com/en-us/library/ee847423%28v=vs.100%29.aspx "构建过程中的代码生成")。*

## 选择

另一方面，您可能更愿意不使用 Microsoft Bootstrapper。然后，您必须将每个引用的包重新创建为一个或多个 Wix Bootstrapper ExePackage 或 MsiPacakges 元素。例如，如果您依赖于 SQL Server Compact Edition 4.0，您可以查看`C:\Program Files\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\SQL Server Compact Edition 4.0\EN\package.xml`、查看所需的安装文件和命令，并根据该信息编写一个 ExePackage 元素。

# wix - MsiPackage - 属性“缓存”的含义

> ID：15610599
> 
> 赞同：4
> 
> 时间：2013-03-25T08:36:14.490
> 
> 标签：wix, wix3.7

我正在搜索描述，即 MsiPackage 中的属性“缓存”代表什么。当我查看[http://wix.sourceforge.net/manual-wix3/wix_xsd_msipackage.htm](http://wix.sourceforge.net/manual-wix3/wix_xsd_msipackage.htm)时，我无法获得一些额外的信息。是否有另一个链接描述了这个属性，或者有人可以解释一下这个属性吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T14:22:19.193

WiX 工具集 boostrapper/chainer，Burn，能够获取（复制或下载）和缓存它安装的包。`%WINDIR%`如果由于某种原因它的缓存（在 下）无效，包缓存对于为 Windows Installer 提供获取原始包的位置非常有用。Windows Installer 不信任其缓存的原因有很多，其中许多原因会在最不合时宜的时候命中。特别是，较小的升级和修补可能需要原始源。

无论如何，可以使用`MsiPackage`element属性来强制 Burn 引擎缓存或不缓存包。`Cache`默认值将提供最佳的用户体验，因此除非您有明确的理由更改它，否则我建议不要使用该`Cache`属性。

# javascript - 如何使用 :after css 属性插入标签？

> ID：15610600
> 
> 赞同：1
> 
> 时间：2013-03-25T08:36:16.880
> 
> 标签：javascript, jquery, html, css

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:40:32.063

您不能插入带有 CSS 伪元素的标签。然而，使用 jQuery 是微不足道的：

```
$(aElement).insertAfter(spanElement); 
```

其中 aElement 是您的新 a 元素，而 spanElement 是您要在其后插入的元素。见[http://api.jquery.com/insertAfter/](http://api.jquery.com/insertAfter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:47:27.440

您可以使用`.insertAfter()`.

> **描述：**在目标之后插入匹配元素集中的每个元素。

```
$('<a>').insertAfter('tr#TR_Select_Color select'); 
```

**或者**

您可以使用`.after()`.

> **说明：**在匹配元素集中的每个元素之后插入由参数指定的内容。

```
$('tr#TR_Select_Color select').after('<a>'); 
```

**或者**

您也可以使用`.append()`.

> **说明：**将参数指定的内容插入到匹配元素集中每个元素的末尾。

```
$('tr#TR_Select_Color select').append('<a>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:48:58.340

您可以在此处添加任何事件，例如按钮的单击事件

```
$("button").click(function(){
       $("<a href="yourlink">Hello world!</a>").insertAfter("select");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T08:49:48.747

您可以[在之后](http://api.jquery.com/after/)使用：

```
$("#ctl01_Select_Color").after("<a href='example.com'>This is an anchor</a>"); 
```

# jquery - Jquery中的键位

> ID：15610603
> 
> 赞同：0
> 
> 时间：2013-03-25T08:36:26.000
> 
> 标签：jquery

我想在一个字段中写入，然后由以下内容打开。如果我在一个字段中输入文本，然后其他字段正在打开但其他字段未打开，我想要它。请帮我

```
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
<script>

    $(document).ready(function() {
        $('#name').keyup(function() {
            if($('#name' == '')){
                $('#version').attr( 'disabled', 'disabled' );
            }
            else {
                $('#version').removeAttr( 'disabled', 'disabled');  
            }   

        });
    });

</script>
</head>
<body>
    <div>
        <form>
        Name: <input type="text" name="name" id="name" />
        Version: <input type="text" name="version" id="version"/>
        Build: <input type="text" name="build" id="build"/>
        <input type="submit" value="Submit" id="submit"/></br>
        <input type="text">
        </form>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:38:23.417

您需要测试该`#name`字段的值，因为您可以使用`$(this).val()`.

您的测试将始终失败，因为这两个字符串`'#name' == ''`永远不会相等。

此外，最好使用[prop()](http://api.jquery.com/prop/)来更改运行时 dom 属性`disabled`，例如`checked`等

```
$(document).ready(function() {
    $('#name').keyup(function() {
        $('#version').prop( 'disabled', !!$(this).val());  
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/mZhYY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:38:54.980

您需要考虑条件`val`中的`name`输入。我还认为将事件处理程序绑定到`blur`事件会更合适。

```
$(document).ready(function() {
    $('#name').blur(function() {
        if($('#name').val() == ''){
            $('#version').attr( 'disabled', 'disabled' );
        }
        else {
            $('#version').removeAttr( 'disabled', 'disabled');  
        }   

    });
}); 
```

**工作示例** [http://jsfiddle.net/C9297/](http://jsfiddle.net/C9297/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:38:08.053

你错过了插入*`val`*你的 div 来检查是否为空试试这个：

```
 $(document).ready(function() {
        $('#name').keyup(function() {
             $('#version').prop( 'disabled', false);  
        }
        else {
            $('#version').attr( 'disabled', true);
        }   

        });
    }); 
```

[**演示**](http://jsfiddle.net/wCMBV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T08:47:41.883

试试这个：

### [工作演示](http://jsfiddle.net/CpSyE/)

```
$(document).ready(function() {
    $('#version').prop( 'disabled', true); // <--page load you have to dissble

    $('#name').keyup(function() {
        if($(this).val() == '')){
            $('#version').prop( 'disabled', true);
        }else {
            $('#version').prop( 'disabled', false);  
        }   

    });
}); 
```

这是错误的做法：

```
$('#name' == '') 
```

这应该是：

```
$('#name').val() == '' 
```

或者更好地表示它，`$(this).val()`因为我们在`$('#name')`elem 函数的上下文中。

# android - 使用 RandomAcessFile 直接从文件中读取时音频样本的变化？

> ID：15610605
> 
> 赞同：1
> 
> 时间：2013-03-25T08:36:40.793
> 
> 标签：android, audio, sampling

我正在尝试绘制声音文件的图表。我这样做的方式是使用 Fileinputstream 获取声音文件的字节并将其更改为短裤并获取声音样本并根据该注释绘制图形：前 45 个字节是标题所以我跳过这些字节。我成功地做到了。

```
File-->skip header(44)-->Bytes-->to shorts-->seek to point-->take samples in Shorts-->DRAW THE GRAPH 
```

但问题是，我无法将大音频文件（2GB）的字节存储到内存中。发生内存崩溃。

所以尝试使用 RandomAcessfile 直接从文件中读取短裤。但是当我这样做时，我没有得到正确的图表。我希望正在阅读的样本有一些变化。

```
File-->skip header(44)-->seek to point-->take samples in Shorts-->DRAW THE GRAPH 
```

我的疑问是，当我们直接从文件中读取时，音频数据的短样本会发生任何变化吗？RandomAcessFile 是一个好方法吗？有没有办法在不改变样本的情况下获取 2GB 音频文件的样本。

注意：我跳过了标题的前 44 个字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:43:10.367

```
 double mPerwidth = (double) iPixel / 960;
                    int SampletoDraw;
                    long totalLen = mRfs.length() - 44;
                    SampletoDraw = (int) (totalLen * mPerwidth) * 2;
                    System.out.println(iPixel);

                    // val=mRfs.readShort()/2;
                    mRfs.seek(SampletoDraw);
                    bData[0] = mRfs.readByte();
                    mRfs.seek(SampletoDraw + 1);
                    bData[1] = mRfs.readByte();

                    val = (short) ((bData[1] & 0xff) << 8 | (bData

                                    [0] & 0xff)); 
```

# android - 如何将图像转换为纹身？

> ID：15610609
> 
> 赞同：4
> 
> 时间：2013-03-25T08:36:54.377
> 
> 标签：android, image

我正在为纹身后的应用程序工作，因为我需要将图像（从相机拍摄或从画廊中选择）转换为纹身......

我的要求如下

![在此处输入图像描述](../Images/46ad0cbb04b3ab4bcf2307490fac8d2b.png) 我从 github 找到了一个示例代码 `https://github.com/DrewDahlman/ImageFilter/tree/master/Android/project`

它用于图像过滤..

我不知道将图像转换为纹身的正确过程是否正确

如果有人知道这个纹身在 android 请建议我我用谷歌搜索了很多

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:55:51.577

你需要一个差分过滤器：

1）你计算水平差异（这里你会有垂直段）

2）你计算垂直差（这里是水平段）

3）你或两张地图，找到轮廓

4）重新创建一个位图对象，如果你想这样做

类似（已编辑）：

```
int[] pixels;
int width = yourbitmap.getWidth();
int height = yourbitmap.getHeight();
yourbitmap.getPixels(pixels, 0, width, 0, 0, width, height);

// transform grayscale
int[] image = new int[width*height];
for (int y=0; y<height; y++)
    for (int x=0; x<width; x++)
    {
        int pixel = image[y*width + x];
        image[y*width + x] = (Color.red(pixel) + Color.green(pixel) + Color.blue(pixel))/3;
    }

// calculate diff_x (vertical segments)
int[] dx = new int[width*height];

for (int y=0; y<height; y++)
    for (int x=0; x<width; x++)
        dx[y*width + x] = (x==0 || y== 0 ? 0 : Math.abs(image[y*width + x] - image[y*width + x-1]));

// calculate diff_y (horizontal segments)
int[] dy = new int[width*height];

for (int y=0; y<height; y++)
    for (int x=0; x<width; x++)
        dy[y*width + x] = (x==0 || y== 0 ? 0 : Math.abs(image[y*width+x] - image[(y-1)*width+x])); 

// when the color intensity is higher than THRESHOLD, accept segment
// you'll want a slider to change THRESHOLD values
bool[] result = new bool[width*height];
const int THRESHOLD = 60; // adjust this value

for (int y=0; y<height; y++)
    for (int x=0; x<width; x++)
        result[y*width + x] = (dx[y*width + x] > THRESHOLD || dy[y*width + x] > THRESHOLD);

Bitmap result = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
for (int y=0; y<height; y++)
    for (int x=0; x<width; x++)
               result.setPixel(x, y, result[y*width+x]? Color.Black : Color.White); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:58:44.437

你可以使用这个：

```
 public static Bitmap ConvertToBlackAndWhite(Bitmap sampleBitmap) {
        ColorMatrix bwMatrix = new ColorMatrix();
        bwMatrix.setSaturation(0);
        final ColorMatrixColorFilter colorFilter = new ColorMatrixColorFilter(
                bwMatrix);
        Bitmap rBitmap = sampleBitmap.copy(Bitmap.Config.ARGB_8888, true);
        Paint paint = new Paint();
        paint.setColorFilter(colorFilter);
        Canvas myCanvas = new Canvas(rBitmap);
        myCanvas.drawBitmap(rBitmap, 0, 0, paint);
        return doBlackWhiteImage(rBitmap);
    }

public static BlackWhiteImage doBlackWhiteImage(Bitmap myBitmap) {
        int[] allpixels = new int[myBitmap.getHeight() * myBitmap.getWidth()];
        myBitmap.getPixels(allpixels, 0, myBitmap.getWidth(), 0, 0,
                myBitmap.getWidth(), myBitmap.getHeight());
        for (int i = 0; i < myBitmap.getHeight() * myBitmap.getWidth(); i++) {
            if (allpixels[i] == Color.BLACK)
                // do something
            else if (allpixels[i] == Color.TRANSPARENT)
                // do something
            else if (allpixels[i] == Color.WHITE)
                // do something
            else {
                allpixels[i] = Color.WHITE;
            }
        }
        myBitmap.setPixels(allpixels, 0, myBitmap.getWidth(), 0, 0,
                myBitmap.getWidth(), myBitmap.getHeight());
        return myBitmap;
    } 
```

# actionscript-3 - 如何在父母的孩子中停止父母影片剪辑的功能？

> ID：15610611
> 
> 赞同：0
> 
> 时间：2013-03-25T08:37:10.473
> 
> 标签：actionscript-3, flash

帮助！！

我在 mc 上有一段代码，当鼠标被拖动时，它会播放该影片剪辑，从而实现产品的 360 度旋转。

在这个关于 360 度旋转的不同增量的影片剪辑中，我有与产品的每个角度相关的各种其他动画的子影片剪辑。

经验..

场景 1 > spinY_mc > AWComplete_mc

我的旋转代码是在scene1 中的动作中编写并控制spinY_mc 但是一旦我进入AWComplete_mc 我不希望你能够拖动鼠标并旋转？

我确定这很简单，但我对这一切都是个菜鸟，并且正在承担一个庞大的项目！

这是影片剪辑 (spinY_mc) 上使用的代码，我不希望此代码在其子 mc (AWComplete_mc) 内工作。

```
 // Rotation of Control Body Y

spin_Y.stop();
spin_Y.buttonMode = true;

var spin_Y:MovieClip;
var offsetFrame:int = spin_Y.currentFrame;
var offsetY:Number = 0;
var percent:Number = 0;

spin_Y.addEventListener(MouseEvent.MOUSE_DOWN, startDragging);
spin_Y.addEventListener(MouseEvent.MOUSE_UP, stopDragging);

function startDragging(e:MouseEvent):void
{
    // start listening for mouse movement
    spin_Y.addEventListener(MouseEvent.MOUSE_MOVE,drag);
    offsetY = stage.mouseY;
}

function stopDragging(e:MouseEvent):void
{
    // STOP listening for mouse movement
    spin_Y.removeEventListener(MouseEvent.MOUSE_MOVE,drag);
    // save the current frame number;
    offsetFrame = spin_Y.currentFrame;
}

// this function is called continuously while the mouse is being dragged

function drag(e:MouseEvent):void
{
    // work out how far the mouse has been dragged, relative to the width of the spin_Y
    // value between -1 and +1
    percent = (mouseY - offsetY) / spin_Y.height;
    // trace(percent);

    // work out which frame to go to. offsetFrame is the frame we started from
    var frame:int = Math.round(percent * spin_Y.totalFrames) + offsetFrame;

    // reset when hitting the END of the spin_Y timeline
    while (frame > spin_Y.totalFrames)
    {
        frame -=  spin_Y.totalFrames;
    }
    // reset when hitting the START of the spin_Y timeline
    while (frame <= 0)
    {
        frame +=  spin_Y.totalFrames;
    }

    // go to the correct frame
    spin_Y.gotoAndStop(frame);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:45:35.733

我很确定您只是想停止从孩子传播事件，这样它就不会传播给父母。如果您为要阻止的事件添加侦听器（假设您要阻止的是 mouseDown）。

```
child_mc.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownBlocker);

private function mouseDownBlocker(event:MouseEvent):void
{
    event.stopImmediatePropagation();
} 
```

事件的工作方式是它们从鼠标发生命中事件的“最深”的孩子开始，然后它们“冒泡”通过所有的父母。通过停止传播，您可以阻止冒泡的发生，因此父母永远不会得到事件。

# prolog - 在 Prolog 解释器中更改目标执行顺序

> ID：15610612
> 
> 赞同：0
> 
> 时间：2013-03-25T08:37:15.317
> 
> 标签：prolog, metaprogramming

我正在尝试编写一个 Prolog 元解释器来选择目标执行的顺序，例如首先使用最少数量的参数执行所有目标。

我从原版元解释器开始：

```
solve2(true).
solve2(A) :- builtin(A), !, A.
solve2((A,B)) :- solve2(A), solve2(B).
solve2(A) :- clause(A,B), solve2(B). 
```

然后我去了类似的东西

```
solve2(true).
solve2(A) :- builtin(A), !, A.
solve2((A,B)) :- count(A,Args), count(B,Args2), Args<Args2, solve2(A), solve2(B).
solve2((A,B)) :- count(A,Args), count(B,Args2), Args>Args2, solve2(B), solve2(A).
solve2(A) :- clause(A,B), solve2(B). 
```

但是如果执行第 4 行，那么**整个**块 B 在 A 之前执行，这是错误的。

前任。A=a(x,y), B=(b(x,y,z), c(x)) 我想执行 c，然后是 a，然后是 b。- 在这种方法中，我会得到 c，b，然后是 a。我正在考虑改变列表中的目标，但我不太确定。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:46:41.820

这是一个（未经测试的）原版元解释器，更改了连词顺序。如果您可以尝试使用您的数据，我会很高兴。

```
solve2(true).
solve2(A) :- builtin(A), !, A.
solve2((A,B)) :- ordering(A,B, C,D), ! /* needed */, solve2(C), solve2(D).
solve2(A) :- clause(A,B), solve2(B).

ordering(A,B, C,D) :-
    minargs(A, NA),
    minargs(B, NB),
    ( NA =< NB -> C/D=A/B ; C/D=B/A ).

minargs((A,B), N) :-
    minargs(A, NA),
    minargs(B, NB),
    !, ( NA =< NB -> N=NA ; N=NB ).
minargs(T, N) :-
    functor(T, _, N). 
```

*编辑*我用这个设置测试过：

```
builtin(writeln(_)).

a(1):-writeln(1).
b(1,2):-writeln(2).
c(1,2,3):-writeln(3).

test :-
    solve2((c(A,B,_),a(A),b(A,B))). 
```

并得到了预期的输出：

```
?- test.
1
2
3
true . 
```

*编辑我不得不求助于列表表示，但是**预处理*子句并在之前获得正确的顺序是有意义的，然后坚持使用普通的香草解释器：

```
test :-
    sortjoin((b(A,B),a(A),c(A,B,_)), X),
    solve2(X).

sortjoin(J, R) :-
    findall(C-P, (pred(J, P), functor(P,_,C)), L),
    sort(L, T),
    pairs_values(T, V),
    join(V, R).

join([C], C).
join([H|T], (H,R)) :- join(T, R).

pred((A, _), C) :-
    pred(A, C).
pred((_, B), C) :-
    !, pred(B, C).
pred(C, C). 
```

`solve2((A,B)) :- ...`原版在哪里`solve2(A),solve2(B)`

# bison - 如何修复“行：1：错误：语法错误！”

> ID：15610617
> 
> 赞同：0
> 
> 时间：2013-03-25T08:37:58.947
> 
> 标签：bison, yacc, lex, flex-lexer

我正在尝试使用 flex 和 bison 编写解析器。但是，无论我如何修改文件，总是会出现错误“第 1 行中的语法错误”。这是 yyinput 的 test.vm 文件：

```
$asfdfsdf
sdfsdfs
sdfsdfsd
sdfsdfsd
sfsdfd 
```

这是 vtl4.l 文件：

```
%{
#include<stdio.h>
#include<string.h>
#include "context.h"
#include "bool.h"
#include "vtl4.tab.h"
%}
%%
(.|\n)* {yylval.string = yytext;return CONTENT;}
<<EOF>> {return FINAL;}
%% 
```

这是 vtl4.y 文件：

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "bool.h"
#include "parser.h"
#include "context.h"
#include "vtl4.tab.h"

extern FILE * yyin;
extern FILE * yyout;
extern int yylex();
extern int yywrap();
%}

%union {
struct simpleNode *ast;
double d;
int i;
bool b;
char* string;
struct symbol *sym;
}

%type <ast> root stmts stmt

%token <string> CONTENT

%token FINAL

%%

root:stmts FINAL {printf("root\n");$$ = process($1);traverse($$);}
;

stmts: {printf("stmts:stmt\n");$$ = 0;}
|stmts stmt {printf("stmts:stmts stmt\n");$$ = add_ybrother($1,$2);}
;

stmt:CONTENT {printf("stmt\n");$$ = text($1);}
;

%%
int main(){
FILE *src;
src = fopen("test.vm","r");
yyin = src;
yyparse();
fclose(src);
return 1;
}

int yywrap(){
return 1;
} 
```

生成文件：

```
CC=cc

FLEX=vtl4.l

BISON=vtl4.y

parse:vtl4.tab.c lex.yy.c
       $(CC) -o out *.c -ll

vtl4.tab.c:$(BISON)
      bison -d $(BISON) --report=all

lex.yy.c:$(FLEX)
        flex $(FLEX) 
```

当我运行 ./out 时，它会打印正确的结果，但最后总是说“line:1: error: syntax error”！我不知道为什么？

当我编辑 lex 规则时效果很好

```
<<EOF>> {return FINAL;} 
```

至

```
<<EOF>> {yyterminate();} 
```

并修改yacc规则

```
root:stmts FINAL {printf("root\n");$$ = process($1);traverse($$);} 
```

至

```
root:stmts {printf("root\n");$$ = process($1);traverse($$);} 
```

但我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T22:06:25.427

通过`return FINAL`在`<<EOF>>`规则中使用，标记器将继续`FINAL`在文件结束时返回。当与您`flex`结合使用时，`bison`您不必（也不应该）使用显式的文件结束标记。只需依赖将在`yylex`文件结束时返回的 0，只要`yywrap`返回 1。这`yyterminate`也对您有用，这就是为什么它可以正常工作的原因。

在这种情况下，语法面临着`FINAL`它无法处理的无穷无尽的标记流。当然，您不应该在语法中容纳这种无穷无尽的流，因为语法将是“正确的”，但永远不会终止。

我假设您知道您的标记器将匹配单个`CONTENT`标记中的完整文件，因此即使您的语法支持`CONTENT`标记列表，它也总是只能看到一个。

PS：我通过使用向解析器添加调试跟踪的`-t`选项发现了问题`bison`，它表明它在第二次出现`FINAL`.

P.S2：在`Makefile`您`*.c`在编译器调用中使用的`parse`. 这是非常危险的，因为一些随机`.c`文件可能会挂在您的目录中。更好地`$^`用于引用规则所依赖的所有文件。

P.S3：正如您已经定义了自己的那样`yywrap`，`main`您可能会丢失`-ll`.

# java - 为什么我的 HTML 验证器总是报告与页面不同的编码？

> ID：15610618
> 
> 赞同：3
> 
> 时间：2013-03-25T08:38:03.660
> 
> 标签：java, jsp, tomcat, encoding

我正在使用[本地 validator.nu](http://about.validator.nu)实例来验证站点，但是它一直告诉我编码不匹配：

> 内部编码声明“iso-8859-1”与文档的实际编码（“utf-8”）不一致。

我已尽一切努力尝试将编码强制为 iso-8859-1，因为我们正在使用需要此编码的旧版数据库。

1.  启动力量的过程`LANG='iso-8859-1'`
2.  强制`file.encoding`启动 tomcat `-Dfile.encoding=iso-8859-1`，这可以通过检查`Charset.defaultCharset()`哪些报告来确认`ISO-8859-1`。
3.  Maven 项目资源通过以下方式复制`iso-8859-1`：`<project.build.sourceEncoding>iso-8859-1</project.build.sourceEncoding>`
4.  JSP`page`指令指定编码：`<%@page contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1" %>`
5.  `Content-Type`已在页眉中设置：`<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">`
6.  雄猫`URIEncoding`套装：`<Connector port="80" protocol="HTTP/1.1" connectionTimeout="20000" URIEncoding="iso-8859-1" redirectPort="8443" />`

我还能错过什么导致页面返回的原因`utf-8`？

有趣的是，它正确地呈现了像 © 这样的字符，如果将 © 放置在文本输入中，它会使用 8859-1 代码页正确保存到数据库中。

**更新**：我刚刚决定使用 cURL 从服务器下载一个页面并上传到成功验证[的 w3 检查器。](http://validator.w3.org/check)唯一的问题是`iso-8859-1`应该的命名，`windows-1252`尽管我认为这两个字符集略有不同，[但这个 w3 邮件列表条目](http://lists.w3.org/Archives/Public/www-validator/2013Mar/0054.html)却说不然，我需要研究一下。

这看起来越来越像[validator.nu](http://about.validator.nu)中的一个错误，我也会对此进行研究。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:19:23.787

我发现问题了！

文档很好，服务器很好，验证器 - 实际上验证很好。[Firefox 插件](https://github.com/rogerjohansson/html5validator)在发送到验证器之前更改了页面编码并给了我一个错误的错误。

[我从help@lists.whatwg.org 邮件列表](http://lists.whatwg.org/listinfo.cgi/help-whatwg.org)的帮助中得出了这个结论，并将[Fx html5validator 插件](https://github.com/rogerjohansson/html5validator)更改为[Fx Web 开发人员插件](http://chrispederick.com/work/web-developer/)，该插件现在可以正确验证我的文档。使用本地验证器实例现在可以很好地验证。

我原来的firefox插件有[这个问题。](https://github.com/rogerjohansson/html5validator/issues/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:47:07.117

尝试添加一个过滤器（web.xml 中`javax.servlet.Filter`声明的带有`<filter>`和`<filter-mapping>`标签的实例），它将设置所需的字符编码，`ServletRequest`并将实例作为参数`ServletResponse`进入方法。`doFilter()`

[请参阅此处](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#setCharacterEncoding%28java.lang.String%29)和[此处](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletResponse.html#setCharacterEncoding%28java.lang.String%29)的javadoc 。

# iphone - iOS 应用内购买和网络服务

> ID：15610620
> 
> 赞同：1
> 
> 时间：2013-03-25T08:38:09.443
> 
> 标签：iphone, app-store, appstore-approval

Apple 会允许通过应用内购买来访问网络应用或在线服务吗？例如，如果我构建了一个在线服务的原生 iOS 应用程序版本（例如，类似于 Readability、Squarespace 等的付费服务），Apple 是否允许我使用应用内购买来允许用户购买订阅，这将允许用户访问 iOS 和 Web 版本的服务？

我问这个是因为，在最初认为这是允许的之后，我发现[https://developer.apple.com/in-app-purchase/In-App-Purchase-Guidelines.pdf](https://developer.apple.com/in-app-purchase/In-App-Purchase-Guidelines.pdf)包含：“In-App购买项目不能跨应用程序或平台共享。” 这似乎不允许这样做。然而，在同一个 pdf 中，Apple 明确表示允许在应用内购买中处理诸如购买 VoIP 分钟数之类的服务。此外，过去 Readability 因不提供应用内购买而被拒绝，似乎暗示这是允许的。

简而言之，Apple 是否允许在对应用内服务进行应用内购买后，通过 Web 版本的 iOS 应用程序提供相同的服务访问权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:45:33.673

我认为提供的服务主要是通过 iOS 应用程序本身来使用的。订阅可以按照您建议的方式工作，但前提是您还可以在应用程序中提供与网络上相同的服务。

# php - Magento media.phtml 产品有 style="top:"？

> ID：15610630
> 
> 赞同：0
> 
> 时间：2013-03-25T08:38:48.917
> 
> 标签：php, css, magento, templates

我想从所有产品视图的左栏中移动`product.info.media`块。`catalog.xml`

为了实现这一点，我在`local.xml`文件中添加了两行：

```
<catalog_product_view>
    <reference name="left">
        <block type="catalog/product_view_media" name="product.info.media" as="media" template="catalog/product/view/media.phtml"/>
    </reference>
    <reference name="product.info">
        <action method="unsetChild"><child>media</child></action>
    </reference>
</catalog_product_view> 
```

media.phtml 是二进制文件，与 1.7.0.2 版本的 magento 中的默认文件相同。

奇怪的是，网页上的产品图片有这样的代码：

```
<img id="image" src="path/to/image.jpg" alt="" title="" style="position: relative; left: 0px; width: 220px; top: 215px;"> 
```

为什么要为 top 定义样式？！由于这种样式是在元素内部定义的，我什至无法用 css 更改它。谁能解释magento的这种行为？

media.phtml 中创建此内容的行如下所示：

```
 $_img = '<img id="image" src="'.$this->helper('catalog/image')->init($_product, 'image').'" alt="'.$this->htmlEscape($this->getImageLabel()).'" title="'.$this->htmlEscape($this->getImageLabel()).'" />';
    echo $_helper->productAttribute($_product, $_img, 'image'); 
```

他们将我带到`app/code/core/Mage/Catalog/Helper/Output.php`了 productAttribute 函数的定义位置。但为什么看在上帝的份上是顶级风格呢？这根本没有意义。如果我想设置它，我会使用 css。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T20:51:16.463

我刚刚花了 3 个小时来解决这个问题……解决方案？元素样式（包括 'top'）在 (drumroll) **/js/product.js**中设置。这是默认图像缩放操作的一部分。希望这可以帮助那些像我一样通过谷歌看到这篇文章的人。

在 magento 1.7.2 中，/ js/ **product.js**的第 263 行显示：

```
this.imageEl.style.top = this.imageY+'px'; 
```

作为一种快速破解，您可以将其注释掉，但我强烈建议您调整适合您需求的缩放 JavaScript 功能。

# ios - 在合适的视图中重复使用的单元格的附件类型

> ID：15610641
> 
> 赞同：1
> 
> 时间：2013-03-25T08:39:49.757
> 
> 标签：ios, uitableview

我想将复选标记作为附件类型应用于适用视图中的选定项目。但是所有重复使用的单元格都会出现复选标记。我们怎样才能避免这个问题？代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        if ([[[data objectAtIndex:indexPath.row] ringtone_id] isEqualToString:selId] ) {
            cell.accessoryType = UITableViewCellAccessoryCheckmark;
        }

    }

    // Configure the cell...

    cell.textLabel.text = [[[data objectAtIndex:indexPath.row] ringtone_name] stringByDeletingPathExtension];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:42:01.857

尝试这个 ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

    }

    // Configure the cell...

     if ([[[data objectAtIndex:indexPath.row] ringtone_id] isEqualToString:selId] ) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
     } else {
       cell.accessoryType = UITableViewCellAccessoryNone;
     }

    cell.textLabel.text = [[[data objectAtIndex:indexPath.row] ringtone_name] stringByDeletingPathExtension];
    return cell; } 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:41:51.583

您必须添加`else`案例以取消标记您不想标记的单元格，如下所示：

```
if ([[[data objectAtIndex:indexPath.row] ringtone_id] isEqualToString:selId] ) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
} else {
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:42:03.183

试试这种方式：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    // Configure the cell...

        if ([[[data objectAtIndex:indexPath.row] ringtone_id] isEqualToString:selId] ) {
            cell.accessoryType = UITableViewCellAccessoryCheckmark;
        } else {
            cell.accessoryType = UITableViewCellAccessoryNone;
        }

    cell.textLabel.text = [[[data objectAtIndex:indexPath.row] ringtone_name] stringByDeletingPathExtension];
    return cell;
} 
```

# python - 从 python 运行 bash 脚本

> ID：15610644
> 
> 赞同：2
> 
> 时间：2013-03-25T08:40:02.283
> 
> 标签：python, bash, sh

我遇到以下问题：

我有这个简单的脚本，叫做 test.sh：

```
#!/bin/bash

function hello() {
    echo "hello world"
}
hello 
```

当我从 shell 运行它时，我得到了预期的结果：

```
$ ./test2.sh
hello world 
```

但是，当我尝试从 Python (2.7.?) 运行它时，我得到以下信息：

```
>>> import commands
>>> cmd="./test2.sh"
>>> commands.getoutput(cmd)
'./test2.sh: 3: ./test2.sh: Syntax error: "(" unexpected' 
```

我相信它以某种方式从“sh”而不是 bash 运行脚本。我是这么认为的，因为当我使用 sh 运行它时，我会收到相同的错误消息：

```
$ sh ./test2.sh
./test2.sh: 3: ./test2.sh: Syntax error: "(" unexpected 
```

此外，当我从 python 运行带有前面“bash”的命令时，它可以工作：

```
>>> cmd="bash ./test2.sh"
>>> commands.getoutput(cmd)
'hello world' 
```

我的问题是：为什么 python 选择使用 sh 而不是 bash 运行脚本，尽管我`#!/bin/bash`在脚本的开头添加了这一行？我怎样才能使它正确（我不想在python中使用前面的'bash'，因为我的脚本是由我无法控制的远程机器从python运行的）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:05:25.193

似乎还有其他问题 - shbang 和 commands.getoutput 应该像您在此处显示的那样正常工作。将 shell 脚本更改为：

```
#!/bin/bash
sleep 100 
```

并再次运行该应用程序。检查`ps f`实际的进程树是什么。确实 getoutput 调用`sh -c ...`，但这不应该改变哪个 shell 执行脚本本身。

从问题中描述的最小测试中，我看到以下流程树：

```
11500 pts/5    Ss     0:00 zsh
15983 pts/5    S+     0:00  \_ python2 ./c.py
15984 pts/5    S+     0:00      \_ sh -c { ./c.sh; } 2>&1
15985 pts/5    S+     0:00          \_ /bin/bash ./c.sh
15986 pts/5    S+     0:00              \_ sleep 100 
```

`sh -c { ./c.sh; }`因此，单独来看，这可以按预期工作 -由第一行（bash）中指定的 shell 执行的python 调用。

确保您正在执行正确的脚本 - 因为您正在使用`./test2.sh`，请仔细检查您是否在正确的目录中并执行正确的文件。（`print open('./test2.sh').read()`返回你所期望的吗？）

# command-line - 在另一个目录中搜索一个目录的文件

> ID：15610645
> 
> 赞同：0
> 
> 时间：2013-03-25T08:40:08.580
> 
> 标签：command-line, batch-file, cmd

一步一步需要的东西：

1.  列出目录/子目录中的所有文件/项目。（例如列出 DirA 的文件/项目）
2.  在另一个目录中搜索所有列出的文件（例如在 DirB 中搜索 DirA 的文件/项目）
3.  使用 windows 搜索输出结果。（例如，每个文件/项目都在 DirB 中单独搜索，结果显示在单独的搜索窗口中）

在 .bat 文件（命令行脚本）中是必需的，或者建议一个可以帮助我执行此操作的工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:55:47.180

您可以像这样从另一个文件夹中的一个文件夹中检查文件和子文件夹名称（如果这就是“在另一个目录中搜索所有列出的文件”的意思）：

```
for %%f in ("C:\folder1\*") do (
  if exist "C:\folder2\%%~nxf" echo %%~nxf exists in C:\folder2
) 
```

不过，我不清楚“使用 Windows Search 输出结果”是什么意思。

# scala - 错误 ： ';' 预期但发现“其他”

> ID：15610648
> 
> 赞同：3
> 
> 时间：2013-03-25T08:40:37.570
> 
> 标签：scala

我写了以下简单的代码：

```
def Commas(n: Long) = {
  if (n >= 1000)
    Commas(n/1000)
    print(","+ n%1000/100 + n%100/10 + n%10)
  else
    print(n%1000/100 + n%100/10 + n%10)
} 
```

虽然这对我来说似乎是正确的，但有一个错误。上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:14:44.647

`If...else...`语法需要一个语句。您可以使用周围的代码块来确保您的代码按预期工作。类似的东西（另请注意，您必须指定返回类型`Unit`或仅删除`=`符号）：

```
def Commas(n: Long) {
  if (n >= 1000) {
    Commas(n/1000)
    print(","+ n%1000/100 + n%100/10 + n%10)
  }
  else 
    print(n%1000/100 + n%100/10 + n%10)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:45:59.207

尝试这个：

```
def Commas(n: Long) = {
if (n >= 1000) {
    Commas(n/1000)
    print(","+ n%1000/100 + n%100/10 + n%10);
}
 else {
    print(n%1000/100 + n%100/10 + n%10);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:01:12.380

虽然，您有两种解决方法来解决它，但这就是为什么它不能按预期工作的原因：scala中的[条件表达式](http://iainmcgin.github.com/scala-ref-markdown/#conditional-expressions)期望它们的and块中的[表达式。](http://iainmcgin.github.com/scala-ref-markdown/#expressions)有几种方法可以将多个表达式（就像您在那里一样）制作成一个复合表达式（您可以在问题的其他答案中看到这些示例）。`if``else`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T20:07:35.427

*免责声明：此解决方案适用于类似错误但不完全相同的情况。*

我遇到了同样的错误。我犯的错误是，我将命令提示符代码复制粘贴到文件中，但忘记删除函数行中的竖线 (|) 字符并得到相同的错误。如果你因为这个原因来到这个页面，现在你可以修复它。享受。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-25T08:50:57.193

或者试试这个：

```
def Commas(n: Long) = {
    if (n >= 1000)
        Commas(n/1000); print(","+ n%1000/100 + n%100/10 + n%10)
     else 
        print(n%1000/100 + n%100/10 + n%10)
} 
```

# android - 微调器不会显示项目（切换情况：一个且只有一个微调器的不同项目列表 - 内部代码）

> ID：15610651
> 
> 赞同：2
> 
> 时间：2013-03-25T08:40:44.757
> 
> 标签：android, spinner, android-spinner

我的应用程序是这样工作的：有一个带有不同按钮（“Category 1”、“Category 2”等）的菜单，所有这些按钮都打开了同一个名为“ResultListViewActivity”的活动，它显示了一个包含数据库内容的 ListView，取决于您之前单击的按钮。

因此，有一个活动显示了一个内容不同的列表视图。我正在尝试为此列表视图添加“过滤模式”。我有一个“过滤器按钮”打开一个警报对话框窗口，这个警报对话框里面有一个微调器。我正在研究一种在此微调器中显示不同内容的方法，然后为每个项目分配不同的侦听器。例如，如果在主菜单上单击“Category 1”按钮，它会将变量“filterVariable”设置为值 1，如果单击“Category 2”，它将设置为值 2，依此类推。
我用 switch 属性编写了这个，但它使我的应用程序因指针空异常而崩溃。这是我的代码：

```
 OnClickListener filter_listener = new OnClickListener() {

    @Override
    public void onClick(View v) {

        LayoutInflater li = LayoutInflater.from(context);
        View dialogView = li.inflate(R.layout.alertdialog_filter, null);

        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context);

        Bundle bundle = getIntent().getExtras();
        int filterVariable = bundle.getInt("filterVariable");

        switch (filterVariable) {

      // if you click on button "category 1" in main menu
        case 1: 
            ArrayAdapter<?> adapter = ArrayAdapter.createFromResource(ResultListViewActivity.this, R.array.spinner_category1, R.id.alertdialog_spinner);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinner.setAdapter(adapter);

            break;
      // if you click on button "category 2" in main menu        
        case 12: 
            ArrayAdapter<?> adapter1 = ArrayAdapter.createFromResource(ResultListViewActivity.this, R.array.spinner_category2, R.id.alertdialog_spinner);
            adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            spinner.setAdapter(adapter1);

            break;

        }

        alertDialogBuilder.setPositiveButton("OK",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {

                    }
                });

        alertDialogBuilder.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        // Lorsque l'on cliquera sur annuler on quittera
                        // l'application
                        finish();
                    }
                });

        // set alertdialog_filter.xml to alertdialog builder
        alertDialogBuilder.setView(dialogView);

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    }
}; } 
```

这真的让我发疯，我已经设法在弹出菜单的情况下做到了（我的代码在这里供那些可能感兴趣的人使用：[如何为不同的弹出菜单设置特定的侦听器？（内部代码）](https://stackoverflow.com/questions/15517779/how-to-set-specific-listeners-for-varying-popup-menus-code-inside/15518026?noredirect=1#comment22019174_15518026)）但现在不是弹出菜单不再是微调器，一切都不同了，我为弹出菜单所做的一切都没用。

# php - 查询 Sql 日期和时间（已关闭）

> ID：15610653
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:40:52.300
> 
> 标签：php, sql, date

请帮我。我有表 A。日期格式是 dd/mm/yy，时间格式是 hh:mm:ss am/pm

```
╔══════════╦═════════════╦═════════════╦═════════╗
║   DATE   ║    TIME     ║    PHONE    ║ MESSAGE ║
╠══════════╬═════════════╬═════════════╬═════════╣
║ 25/09/07 ║ 01:57:55 PM ║ 62856979898 ║ Tes a   ║
║ 25/09/07 ║ 04:56:51 PM ║ 62856123467 ║ Tes B   ║
╚══════════╩═════════════╩═════════════╩═════════╝ 
```

如何查询以查找时间之间日期的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:46:35.557

这是未在数据库中正确存储数据类型的缺点之一。日期应存储为`DATE`或`DATETIME`。

如果您正在使用`MySQL`，您可以使用`STR_TO_DATE`which 将字符串转换为日期，

```
SELECT  *
FROM    tableName
WHERE   STR_TO_DATE(CONCAT(date, ' ', time), '%d/%m/%y %h:%i:%s %p') 
        BETWEEN '2007-09-25 13:00:00' AND '2007-09-25 14:00:00' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c0e62/2)
*   [STR_TO_DATE()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)

输出

```
╔══════════╦═════════════╦═════════════╦═════════╗
║   DATE   ║    TIME     ║    PHONE    ║ MESSAGE ║
╠══════════╬═════════════╬═════════════╬═════════╣
║ 25/09/07 ║ 01:57:55 PM ║ 62856979898 ║ Tes a   ║
╚══════════╩═════════════╩═════════════╩═════════╝ 
```

您当前设计的一些缺点：

*   不能直接比较日期和时间
*   不能使用索引
*   ETC ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:49:21.097

使用`BETWEEN`关键字

```
 "SELECT * FROM table_A WHERE date BETWEEN '" . $from_date . "' AND  '" . $to_date . "'" 
```

# javascript - 如何使用window.onbeforeunload？

> ID：15610656
> 
> 赞同：0
> 
> 时间：2013-03-25T08:41:03.897
> 
> 标签：javascript, onbeforeunload

我有一个小网页。我需要在浏览器关闭时激活我的 ajax 功能

我在下面的 JavaScript 中使用`<head>`

```
<script language="JavaScript" type="text/javascript">
 window.onbeforeunload = confirmExit;
  function confirmExit()
  {    
    my ajax_function();
    return "";
  }
</script> 
```

但是这个功能在**后退按钮、前进按钮、ALT+f5、CTL+f5、提交等中都可以工作……**但我只有在浏览器关闭时才需要这个功能

但我尝试在我的网页中像下面这样阻止事件，如**后退按钮、前进按钮、ALT+f5、CTL+f5、提交**等...

```
<script type="text/javascript">
$(function () { 

$('a').click(function(){window.onbeforeunload = null;});
$(window).keydown(function(event) { 
  if (event.keyCode == 116) { // User presses F5 to refresh
     window.onbeforeunload = null;
   }});
$('form').submit(function() {

   window.onbeforeunload = null;
});

});

</script> 
```

但这仅适用于超链接、刷新和提交。

我需要的是，`window.onbeforeunload`功能只适用`when browser is closed`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:44:49.263

JavaScript 不区分这些事件，它们都是因为用户离开页面而触发的。

# java - Java混淆：删除异常消息

> ID：15610657
> 
> 赞同：1
> 
> 时间：2013-03-25T08:41:15.693
> 
> 标签：java, exception, obfuscation

我在交付之前对我的 Java 代码进行了混淆（目前使用 ProGuard）。

当我“反编译”混淆的字节码时，显然所有字符串都没有被混淆。对于异常中的消息也是如此。这些异常消息为读者提供了大量信息来理解代码。喜欢：

```
if(a == null){
  throw new IllegalArgumentException("SuperSecretObject cannot be null");
} 
```

是否可以在删除所有异常消息字符串的同时使用 ProGuard 或其他工具进行编译？

否则，您能否推荐其他方法来隐藏功能上不需要的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:47:23.600

例如你可以使用

```
throw new IllegalArgumentException(SuperSecretObject.class.getName() + " cannot be null"); 
```

然后混淆器也可以用混淆的类名替换类名。

# ruby-on-rails - Rails：当用户下订单时，如何向用户发送订单邮件？

> ID：15610660
> 
> 赞同：0
> 
> 时间：2013-03-25T08:41:42.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, e-commerce

我正在第一次构建基于 Rails 的电子商务应用程序。我想在用户提交订单时向他发送一封电子邮件，就像我们在 mealnut.com 或 fab.com 上下订单时通过电子邮件收到收据的方式一样。我正在寻找教程，但与订单提交电子邮件无关。用户注册或重置等的每个地方。

有没有人实施过？或者知道rails中的任何资源/教程？

您的指导/帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:00:09.687

首先生成用于编写所需操作的邮件程序。

```
rails g mailer UserMailer 
```

然后在**app/mailers/user_mailer.rb**文件中

```
class UserMailer < ActionMailer::Base
  default from: 'notifications@example.com'

  def order_confirmation(user, order)
    @user = user
    @order = order
    mail(to: user.email, subject: 'Order has been received')
  end
end 
```

并且电子邮件的查看内容将是这样的`app/views/user_mailer/order_confirmation.html.erb`

```
Hi <%= @user.name %>

You have successfully placed an order with us.
Please find the details of order....
#............. 
```

然后在控制器操作中，您将在其中创建订单，在创建订单后放置以下行以发送电子邮件

```
UserMailer.order_confirmation(user, order).deliver 
```

阅读[动作邮件教程](http://guides.rubyonrails.org/action_mailer_basics.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:59:41.497

恐怕发送电子邮件是一个相当标准的程序。您找到的教程可能适用。您需要了解触发要发送的消息可以通过任何控制器操作来完成。在您的情况下，您需要订单创建操作。

阅读以下内容后：

[http://railscasts.com/episodes/61-sending-email-revised?view=asciicast](http://railscasts.com/episodes/61-sending-email-revised?view=asciicast)

您可以进行必要的更改并从您的订单创建操作中调用邮件程序：

```
class OrdersController < ApplicationController
  def create
    @order = Order.new(params[:order])
    if @order.save
      UserMailer.order_confirmation(@order, @user).deliver
      redirect_to @user, notice: "Order Completed Successfully."
    else
      render :new
    end
  end
end 
```

我在上面使用 UserMailer 的原因是因为您可能希望设置一个向用户发送消息的邮件程序，但如果您愿意，可以将其称为 OrderMailer。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T09:47:56.513

您不能/不适合使用设计邮件程序（因为设计邮件程序用于用户身份验证）。你可以做的是，你可以使用观察者类来发送电子邮件

前任：

```
class Order < ActiveRecord::Base
   #your standard order code
end

class OrderObserver < ActiveRecord::Observer

  def after_create(order)
    #Email sending code  
  end

end 
```

当 Order#create 完成时，此 OrderObserver 会发送一封电子邮件。[阅读更多关于观察者类](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)

关于使用 rails3 发送电子邮件，[请检查 this](http://asciicasts.com/episodes/206-action-mailer-in-rails-3)，它与发送忘记密码/注册等的电子邮件相同，只是内容不同。

# javascript - MVC项目经常js改后重新编译，不知道为什么，导致问题

> ID：15610662
> 
> 赞同：1
> 
> 时间：2013-03-25T08:41:51.017
> 
> 标签：javascript, asp.net-mvc, compilation

我有一个带有大量 Javascript（单页应用程序）的中型 ASP.NET MVC 项目。很多时候（一天几十次），当我编辑 Javascript 文件并刷新它时，我在 VS 的输出中看到它经历了整个 Application_Start 过程（如（重新）启动应用程序）。

这会导致开发过程中出现不必要的延迟，并且在 2-4 次此类重启后，我收到 InvalidOperationException “未在托管服务或 Development Fabric 中运行。”。由于我确实在模拟器中运行它，似乎在几次应用程序重新启动后，它失去了与模拟器的连接。除此之外，我什至得到（虽然非常罕见）OutOfMemoryExceptions，我无法找出它们来自哪里，因为 Web 应用程序中的任何内容都不应分配太多内存，而我的工作站确实有很多（32 GiB）。

它与 IIS (Express) 工作进程的空闲超时无关，因为 JS 更改通常只需要几秒钟。我试图通过在 JS 文件中添加空格并保存它来重现它，重复几次然后尝试刷新。奇怪的是，我无法以这种方式重现它。

我没有想法，非常感谢您的帮助:)

[编辑] 还没有答案，但有可能。似乎 Web Essentials 每次保存它们时都会编译我的 LESS 文件（即使在我特别禁用它之后，因为 ASP.NET Bundling and Minification 已经处理了它），这会导致很多额外的写入，因为我有保存 VERY 的习惯经常。已经联系了开发者，可能是bug。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:16:48.683

这实际上是由于 IIS 行为造成的。如果其文件结构中的文件发生任何更改，IIS 将回收任何应用程序。

我有类似的经历并在这里详细说明了我的理解：http: [//www.geekays.net/post/2008/10/14/ASPNET-webdomain-recycle-on-subfolder-changes.aspx](http://www.geekays.net/post/2008/10/14/ASPNET-webdomain-recycle-on-subfolder-changes.aspx)

# php - Codeigniter 模板引擎

> ID：15610674
> 
> 赞同：1
> 
> 时间：2013-03-25T08:42:25.430
> 
> 标签：php, codeigniter, templates

假设我有一个类名为“ **google** ”的控制器，它包含一些数据示例

// 应用程序/控制器/google.php

```
$data = array(
    'target' => 'earth',
    'percentage' => 70
); 
```

它的视图文件是 ' **google_view.php** ' // application/view/google_view.php

在第二个名为“ **msn** ”的控制器中，我想获取“ **google** ”控制器数据..或者我只想包含“ **google_view** ”文件而不`$data`再次传递变量

我听说使用 setflash .. 但问题是如果用户访问 msn 页面而不访问谷歌怎么办

那么有没有办法获取**谷歌**控制器数据？

我还检查了 opencart cms 及其控制器中的 MVC 框架，我们可以调用另一个控制器，如下所示。在下面的代码中，我们可以调用标头控制器。

```
$this->children = array(
    'common/column_left',
    'common/column_right',
    'common/content_top',
    'common/content_bottom',
    'common/footer',
    'common/header'
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:19:14.217

您正在寻找 HMVC 功能，而 CodeIgniter 并没有真正做到。看看这个在 CI 中实现它的库：[https](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc) ://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc 。网上有很多资源可以更详细地解释 HMVC 与 MVC。

如果您在任何规模上做这种事情，CodeIgniter 可能不是您的应用程序的最佳框架 - 值得看看其他一些框架。我现在使用了很多[Laravel](http://laravel.com/)，如果你只是想获取另一个控制器的输出（例如，在 Laravel 中你只是去`$second_controller_output = Route::forward('GET','other/controller');`），它会非常好用。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:50:40.860

嗯......我不认为你在 CI 中这样做，但我会提出一个想法......

扩展 Controller 核心类，然后确保在应用程序控制器的构造函数中扩展新类。例如

```
class MY_Controller extends CI_Controller {

    public function __construct() {
        parent::__construct();

        $this->default_data_google = array(
            'target' => 'earth',
            'percentage' => 70
        );
    }

}

class Google extends MY_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function index() {
        $data = $this->default_data_google;
        $this->load->view('google_view', $data);
    }

}

// 
```

..

```
class Msn extends MY_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function index() {
        $data = $this->default_data_google;
        $this->load->view('google_view', $data);
    }

} 
```

# c - 我可以设置工作队列的优先级吗？

> ID：15610680
> 
> 赞同：4
> 
> 时间：2013-03-25T08:42:50.293
> 
> 标签：c, kernel-module, task-queue, spi

我可以设置工作队列的优先级吗？

我正在修改 SPI 内核模块“spidev”，以便它可以更快地与我的硬件通信。外部硬件是一个带有非常小的缓冲区的 CAN 控制器，因此我必须快速读取任何传入数据以避免丢失数据。我已经配置了一个 GPIO 中断来通知我新数据，但我无法在中断处理程序中读取 SPI 硬件。我的中断处理程序基本上设置了一个将读取 SPI 数据的工作队列。当内核中只有一个活动进程时，它可以正常工作。一旦我同时打开任何其他进程（甚至是进程查看器顶部），我就会开始丢失成串的数据，也就是说，我可能会毫无问题地收到 1000 个数据包，然后连续丢失 15 个数据包，依此类推. 我怀疑我的问题的原因是当其他进程（顶部，在这种情况下）可以控制中断处理程序运行的 cpu，但工作队列中的工作直到再次调用调度程序才开始。我试图提高我的流程的优先级，但没有成功。

我想知道是否有办法告诉内核在中断处理函数之后立即执行工作队列中的工作。欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T12:00:58.873

作为替代方案，您可以考虑使用 tasklet，它会告诉内核执行得更快，但请注意您无法在 tasklet 中休眠

一篇关于在内核中延迟工作的好 ibm 文章

[http://www.ibm.com/developerworks/linux/library/l-tasklets/](http://www.ibm.com/developerworks/linux/library/l-tasklets/)

[http://www.makelinux.net/ldd3/chp-7-sect-5](http://www.makelinux.net/ldd3/chp-7-sect-5)

只要 CPU 忙于运行进程，tasklet 就会在下一个计时器滴答时运行，但当 CPU 空闲时它会立即运行。内核提供了一组 ksoftirqd 内核线程，每个 CPU 一个，只是为了运行“软中断”处理程序，例如 tasklet_action 函数。因此，tasklet 的最后三个运行发生在与 CPU 0 关联的 ksoftirqd 内核线程的上下文中。jitasklethi 实现使用高优先级的 tasklet，在即将发布的函数列表中进行了解释。

# javascript - 滑动、向左滑动、向右滑动事件不会在图像上触发

> ID：15610682
> 
> 赞同：0
> 
> 时间：2013-03-25T08:42:52.813
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我想将 jQuery mobile 的[swiperight 事件](http://api.jquerymobile.com/swiperight/)与似乎不起作用的图像结合使用。

HTML：

```
<div id="one"><img src="http://jquerymobile.com/wp-content/uploads/2012/09/jquery-mobile-logo-03.png"/></div>
<div id="two">works</div> 
```

JS：

```
$("#one").on("swiperight", function() {
    alert("does not work");
});
$("#two").on("swiperight", function() {
    alert("works");
}); 
```

[JSFiddle](http://jsfiddle.net/4CbEQ/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:55:03.647

我很确定只有桌面浏览器有这个问题，因为移动浏览器通常不会在滑动时拖动图像。

[此处](https://stackoverflow.com/a/4211930/1140682)建议的解决方案可防止在所有浏览器中拖动您的图像：

```
$('img').on('dragstart', function(event) {
    event.preventDefault();
}); 
```

所以这是你的新工作小提琴：http: [//jsfiddle.net/4CbEQ/1/](http://jsfiddle.net/4CbEQ/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T09:02:16.947

您需要防止图像拖动，这是一个工作示例：http: [//jsfiddle.net/Gajotres/SgUZK/](http://jsfiddle.net/Gajotres/SgUZK/)

```
$(document).on('pagebeforeshow', '#index', function(){   
    $('img').on('dragstart', function(event) { event.preventDefault(); });

    $("#one").on("swiperight", function() {
        alert("does not work");
    });
    $("#two").on("swiperight", function() {
        alert("works");
    });
}); 
```

# git - 错误地删除了Git中的目录

> ID：15610686
> 
> 赞同：6
> 
> 时间：2013-03-25T08:43:21.620
> 
> 标签：git

我错误地删除了我的 git repo 中的一个目录，并提交了它。

我已经做好了

```
git checkout LONG_SHA_ID 
```

其中 LONG_SHA_ID 是上一次提交的 ID，我已经取回了目录，但我也取回了我在最新提交中修复的某些文件的早期版本。

如何使用其他文件的最新版本找回已删除的目录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T09:02:13.243

做这个：

```
git checkout LONG_SHA_ID -- /path/of/directory/you/deleted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:53:55.817

使用固定文件签出分支，然后执行`git reset --mixed HEAD^`. 这将撤消提交，因此您可以在不删除文件夹的情况下重试。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T08:47:23.000

只需通过

```
git revert HEAD 
```

这将退出最近的提交。然后把它推上去。您可以替换`HEAD`为您想要的版本。

有关撤消 git 提交的更多详细信息，请查看[此处](https://stackoverflow.com/questions/927358/how-to-undo-the-last-git-commit)

# python - Pysvn:propset() 显示路径在版本 0 中不存在错误

> ID：15610687
> 
> 赞同：4
> 
> 时间：2013-03-25T08:43:24.207
> 
> 标签：python, pysvn

蟒蛇脚本，

```
 root = "..."

   commit_info = svncl.propset( "myprop",
                                "Test",                                       
                                root,
                                revision=pysvn.Revision(pysvn.opt_revision_kind.head)) 
```

显示错误， **pysvn._pysvn_2_7.ClientError：路径“...”在修订版 0 中不存在。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-28T13:20:44.650

您需要设置 base_revision_for_url：

```
commit_info = svncl.propset(
    "myprop", "Test", root,
    base_revision_for_url=svncl.revpropget("revision", root)[0].number
) 
```

请参阅此错误报告以供参考：[http ://pysvn.tigris.org/issues/show_bug.cgi?id=146](http://pysvn.tigris.org/issues/show_bug.cgi?id=146)

# eclipse - apache ant 和 eclipse 中的远程调试

> ID：15610693
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:43:43.073
> 
> 标签：eclipse, apache, ant

ant的远程调试命令是什么？我正在使用日食。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:55:46.513

在要调试 Ant 进程的机器上将 jpda 设置添加到 ANT_OPTS。

在 Linux 中，您只需执行

```
export ANT_OPTS=$ANT_OPTS -agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=y 
```

并且以下 Ant 构建将在调试模式下运行，并在执行前等待调试器连接。

在 Windows 中，你也可以做类似的事情，也许`set ANT_OPTS=%ANT_OPTS`或者什么。

然后，使用调试器连接到 ip 地址和端口 8000（这是您在 jpda 设置中设置的值：`address=8000`，您可以将其设置为任何可用端口）。

我没有使用 Eclipse，所以我无法告诉您在哪里可以找到连接到 ant 进程的位置。

# c# - 配置方法

> ID：15610702
> 
> 赞同：0
> 
> 时间：2013-03-25T08:44:22.767
> 
> 标签：c#, .net, configuration

我有一个包含 13 个项目的解决方案。该解决方案配置为启动多个项目。很多这些项目需要去共享数据库和网络服务。

我的`app.config`和`web.config`文件现在包含很多重复。例如，当我想更改数据库时，我需要更改`app.config`访问该数据库的项目中的所有配置文件。

我想知道解决这个问题的最佳方法是什么？有没有办法在 .NET 中定义解决方案范围的配置设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:48:47.533

我会考虑使用您的其他项目引用的类库项目，仅用于配置目的（如果解决方案中已有的其他库都没有被所有项目共享），它具有关联的共享/中央 app.config 文件它。

该库需要公开配置设置，以便它们可以在解决方案中的其他地方使用。

我工作的团队有一个常用助手类库，其中一个是如上所述的配置助手。这对我们很有效，因为这个库包含在我们的所有项目中（好吧 - 除非不适合这样做），所以似乎是存储这些共享设置的“自然”位置。

# ios - ios语音转文字

> ID：15610703
> 
> 赞同：-5
> 
> 时间：2013-03-25T08:44:25.473
> 
> 标签：ios, speech-recognition, speech-to-text

我想将口语转换为文本，以便可以在我的应用程序中使用 nslinguistictagger。如何将语音转换为文本？有什么选择？openears 支持语音转文字吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:46:47.907

OpenEars 开发人员在这里。是的，OpenEars 可以进行语音识别和文本转语音。你需要为它定义一个包含你的词汇表的语言模型或语法，但它可以从单词或短语 NSStrings 的 NSArray 或文本语料库中自动完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T09:02:02.227

[**Openears**](http://www.politepix.com/openears/)将支持离线模式下的免费语音识别和文本转语音功能。

他们有`FliteController`Class Reference，用于控制 OpenEars 中的语音合成 (TTS)。

他们在语音识别领域做得很好。

但是请注意，它只会检测您在词汇文件中提到的单词。最好作为离线模式工作以获得更好的性能。

**@Halle**：如果我错了，请纠正我。

您有一个付费选项，即作为在线引擎工作的**[Dragon Dictation 。](http://www.nuance.com/for-business/by-product/dragon-dictation-iphone/index.htm)**

或使用[**VocalKit** : Shim for Speech Recognition on iPhone](http://cmusphinx.sourceforge.net/2010/05/vocalkit-shim-for-speech-recognition-on-iphone/)

我想指出的是，没有一个比 Siri 更准确（Siri SDK 尚不可用）。

# php - 如何从单个表单编辑和插入数据

> ID：15610706
> 
> 赞同：0
> 
> 时间：2013-03-25T08:44:31.797
> 
> 标签：php, codeigniter

这是我的控制器。这里的函数`add_post()`是用于添加和更新数据的函数。问题是，如果我想编辑表单，那么我可以将数据库中的值获取到相应区域的表单中，但是当我想使用相同的功能添加数据时，我不能。我搜索了很多，但找不到解决方案。

```
 <?php
    class Blog_controller extends CI_Controller {

        public function index() {
            $this->get_post();
        }

        public function __construct() {
            parent::__construct();
            $this->load->helper('form');
            $this->load->helper('url'); 
            $this->load->model('blog_model');
        }

        function add_post($id) {
            if($id==NULL) {
                return $this->load->view('admin/add_post');
            } else {
                $data['query']=$this->blog_model->get_single_post($id);
                $this->load->view('admin/add_post',$data);
            }
        }

        function do_upload() {
            $config['upload_path'] = './uploads/';
            $config['allowed_types'] = 'gif|jpg|png';
            $config['max_size'] = '100';
            $config['max_width']  = '1024';
            $config['max_height']  = '768';
            $this->load->library('upload', $config);

            if ( ! $this->upload->do_upload())
            {
                $error = array('error' => $this->upload->display_errors());
                $this->load->view('premium/main', $error);
            } else {
                $this->upload->do_upload();
                $data=$this->upload->data();
                $filename=$data['file_name'];
                $this->blog_model->insert_post($filename);
            }
        }

        function get_post() {
            $data['query']=$this->blog_model->get_post();
            $this->load->view('premium/main',$data);
        }

        function view_table() {
            $data['query']=$this->blog_model->get_post(); $this->load->view('admin/view_table',$data);
        }   
    }
    ?>

MODEL 
```

这是我项目的模型。我想使用单个函数插入和更新数据，即 insert_post()。

```
 <?php 
Class Blog_model extends CI_Model
{

function __construct()
{
parent::__construct();
$this->load->database();
}

 function insert_post($filename)
 {
 $data=array(
 'title'=>$this->input->post('title'),
'description'=>$this->input->post('description'),
'publish'=>$this->input->post('publish'),
'image'=>$filename,
);

$this->db->insert('post',$data);
 redirect('blog_controller');

}

function get_post()
{
$query = $this->db->get_where('post');
return $query->result();
}
function get_single_post($id)
{
$query = $this->db->get_where('post',array('id'=>$id));
return $query->row($id);
}
}
?> 
```

这是我的看法。在这种形式中，我想在用户想要插入数据并且用户想要编辑时添加数据，那么数据应该在表单的相应字段中检索并应该更新......

```
 <html>
    <body>
    <h1>Add Blog Title</h1>
    <?php function add_post($id);?>
    <?php echo form_open_multipart('blog_controller/do_upload');?>
    <p>Title : <input type="text" name="title" value="<?php if($id==0){echo $query->title;}?>"></br></p>
    <p>Description : <textarea name="description" rows="5"> <?php echo $query->title;?></textarea></br/></p>
    <p>Current Image : <img src="<?php echo base_url();?>/uploads/<?php echo $query->image;?>"</b></p>
    <p>Image : <?php echo form_upload('userfile');?></b></p>
    <p>Publish ?: <input type="checkbox" name="publish" value="1" <?php if($query->publish == 1) echo 'checked="checked"';?>></br></p>
    <input type="submit" value="submit"> 

    </form>
    </body>
    </html> 
```

这是我的表，从中传递了相应的编辑字段 ID，因此我们可以查看表单中的数据，并且可以知道我们要编辑哪个数据的哪个字段..

```
<html>
<body>

<table border="2px">

<tr>
<td>ID</td>
<td>Title</td>
<td>Description</td>
<td>image</td>
<td>Action</td>
</tr>
<?php foreach($query as $a):?>
<tr>
<td><?php echo $a->id;?></td>
<td><?php echo $a->title;?></td>
<td><?php echo $a->description;?></td>
<td><img src="<?php echo base_url();?>/uploads/<?php echo $a->image?>" height="100px" width="100px"></td>
<td><?php echo anchor('blog_controller/add_post/'.$a->id,"Edit");?></td>
<td><?php echo anchor('blog_controler/delete_post/'.$a->id,"Delete");?></td>

<?php endforeach;?>
</tr>

</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:03:06.837

您需要验证发送到控制器的表单数据，然后将这些值发送回视图：这是一个示例：

```
function add_post() 
{
   if ($this->input->post())
   {
      $this->form_validation->set_rules('text', 'Text', 'trim|required|min_length[8]');
   }

   if ($this->form_validation->run() == FALSE)
   {
      // VALIDATION ERROR
   }
   else 
   {
      // SUCCESS
      // code to save title in db ...
      // and redirect to success page
      redirect('admin/posts');
   ]

   $this->load->view('admin/add_post', $data);

} 
```

因此，如果在文本字段中没有发送任何内容并且最小长度不是至少 8 个字符，它将重新加载视图。

如果没问题，这部分的代码将被执行（你需要自己的保存到数据库功能，现在我没有在那里添加它）并重定向到管理员/帖子。

并以您的形式代替：

```
<input type="text" name="text" value=""/> 
```

你需要做一些事情，例如：

```
<input type="text" name="username" value="<?php echo set_value('text'); ?>"/> 
```

# javascript - 根据单选按钮的选择显示/隐藏文本文件

> ID：15610708
> 
> 赞同：5
> 
> 时间：2013-03-25T08:44:34.750
> 
> 标签：javascript, jquery, ruby-on-rails-3

我知道这是一个重复的问题，但我无法让它运行。我尝试了我在 SO 和谷歌搜索中找到的所有解决方案......

我的页面中有这个单选按钮表单。我想要的是，当用户选择“*只有一个与会者*”选项时，一个文本字段只出现在这个选项中。如果用户选择另一个它消失。

![正常形式](../Images/e92a9135e740cff1596c95decee983dd.png)

一旦用户*只选择一个*选项，就会出现文本框。

![扩展形式](../Images/71b8ab92758b74b4a8cca6308688976c.png)

我一直在尝试使用 javascript。我使用这段代码

```
<script>
    $(document).ready(function()
        $("#send_to_one").hide();
        $("input:radio[name="people"]").change(function(){  
          if(this.checked){
            if(this.value =='one'){
              $("#send_to_one").show()
            }else{
              $("#send_to_one").hide();
            }
         }
    }
  });
</script> 
```

表格的代码是

```
 <div id="send_to">
    <input type="radio" id="send_poll" name="people" value="all" checked="checked">all the attendees</br>      
    <input type="radio" id="send_poll" name="people" value="one" >only one attendee<br/>
    <div id="send_to_one">
      <label>Write the attendee's name: </label><input type="text" id="attendeename"><br/><br/>
    </div>
    <input type="radio" id="send_poll" name="people" value="group">a group of attendees</br>              
  </div> 
```

我已经检查了 javascript 文件是否已加载。我还尝试将 javascript 代码放在表单所在的 html.erb 文件中，在单独的 .js 文件和 application.htm.erb`<head></head>`部分中，但没有运气。**为了工作，我需要将代码的每一部分准确地放在哪里？**

使用 Rails 3.0.4、Ruby 1.8.9。我也在使用 JQuery

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:51:04.753

`**[LIVE DEMO](http://jsbin.com/umefaz/2/edit)**`

HTML：

```
<div id="send_to">
  <input type="radio" id="send_poll" name="people" value="all" checked="checked" />all the attendees<br/>      
  <input type="radio" id="send_poll" name="people" value="one" />only one attendee<br/>
  <div id="send_to_one">
      <label>Write the attendee's name: </label><input type="text" id="attendeename" /><br/><br/>
  </div>
  <input type="radio" id="send_poll" name="people" value="group" />a group of attendees<br/>              
</div> 
```

问：

```
$(document).ready(function(){

    $("#send_to_one").hide();

    $("input:radio[name='people']").change(function(){  

            if(this.value == 'one' && this.checked){
              $("#send_to_one").show();
            }else{
              $("#send_to_one").hide();
            }

    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:50:27.017

```
$(document).ready(function() {
    $("#send_to_one").hide();
    $("input:radio[name='people']").change(function(){  
         if(this.checked){
            if(this.value =='one'){
              $("#send_to_one").show()
            }else{
              $("#send_to_one").hide();
            }
         } 
    });
}); 
```

您的代码是正确的，但缺少一些大括号、方括号和未转义的引号。您是否使用任何形式的智能 javascript 编辑器？因为你真的应该...

[http://jsfiddle.net/7yt2A/](http://jsfiddle.net/7yt2A/)

# android - 是否可以在 ViewGroup 上使用 android.graphics.Camera？

> ID：15610709
> 
> 赞同：0
> 
> 时间：2013-03-25T08:44:45.477
> 
> 标签：android, 3d, transform

**我的目的：**我有一个 RelativeLayout，就像一个按钮（可点击），它里面有多个视图：TextView、Image。我想在 3D 坐标中一起转换这个 RelativeLayout（好像它就像一个单独的对象）。

**我所知道的：**我知道通过使用相机和修改矩阵，我真的可以在 3d 中转换图像视图。但是，我不能在像 RelativeLayout 这样的 ViewGroup 上执行此操作，因为我无法修改它的矩阵。

**问题：**有可能吗？如果有，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:56:50.463

好吧，android 不是为那样工作而构建的，android 中的每个视图都负责自己绘制它，因此您不能只是将某个渲染逻辑放在父视图中并期望子视图来处理它。

我能想到的最简单的事情是创建自己的大视图并在其中手动绘制子视图，然后我相信您可以通过在画布上使用相机对象来达到预期的效果。

或者您可以使用 openGL，但这只有在上述方法中存在性能问题时才有意义

# c - 为什么选择会导致高 cpu sys 负载？

> ID：15610712
> 
> 赞同：0
> 
> 时间：2013-03-25T08:44:58.940
> 
> 标签：c, linux, performance, unix, network-programming

1.  top：进程的cpu负载为100%，sys为90%
2.  strace：所有系统调用都是**select**
3.  select: **select(11, [8, 10], NULL, NULL, {0, 10}) = 0 (Timeout)** , fd 8 和 fd 10 都是先进先出
4.  vmstat -n 5：系统cs和system in很低
5.  linux：2.6.16.60
6.  cpu: 4 核, Intel(R) Xeon(R) CPU E5504 @ 2.00GHz

怎么解释？我把select的超时时间改成了1s，cpu sys负载改成了85%，为什么？

**已将select的nfds更改为最高fd加一，cpu sys负载仍然很高**

**编辑 - 问题已解决**

该错误与**select**无关， pthread_mutex_timedwait 的第三个参数 abstime 是**绝对时间**，但我错误地使用了**相对时间**，这导致了高 cpu sys 负载。

**为什么 pthread_mutex_timedwait 会导致高 cpu sys 负载，而不是高 cpu usr 负载？**
**strace：只看到 select 系统调用，没有其他的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:18:59.380

您可能有一个错误的（断开连接的）描述符。通常这是 read 负载如此大的主要原因`select`。

您可能有可用的数据，但从不阅读。同样的情况。

`select`您可能会在通话之间做一些非常重要的事情。

如果您`select`总是返回`0`，那么问题不在`select`呼叫中。它**在别处**。

# ruby-on-rails - 如何将 Ruby 应用程序 1.8.7 转换为 1.9.2

> ID：15610715
> 
> 赞同：0
> 
> 时间：2013-03-25T08:45:18.600
> 
> 标签：ruby-on-rails

嗨，我在 ruby​​ 中有一个应用程序，但是在 ruby​​ 1.8.7 开发的那个应用程序中，现在我正在使用 ruby​​ 1.9.2 任何可能将我的应用程序 1.8.2 更改为 1.9.2 或 1.9.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:11:27.480

希望本[教程](http://nerds.airbnb.com/upgrading-from-ree-187-to-ruby-193)对开始将您的应用程序升级到 Ruby-1.9.3 有所帮助

他很好地解释了如何从 Ruby-1.8.7 升级到 Ruby-1.9.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:37:32.827

鉴于您的 rails 应用程序正在使用日常的 ruby​​ 功能，升级到 ruby​​ 1.9 应该不是问题，但是请阅读这个从 ruby​​ 1.8 到 1.9.x 的[重大更改说明](http://svn.ruby-lang.org/repos/ruby/tags/v1_9_1_0/NEWS)，看看您是否使用了提到的任何方法那里。但实际上在大多数情况下，您的 rails 应用程序应该无需任何修改即可运行。

当您安装 ruby​​1.9.x 时，请使用[RVM (Ruby Version Manager)](https://rvm.io/)，让您的 ruby​​ 1.8.7 和 1.9 版本并排。

如果你有一个好的测试套件，这根本不应该是一个问题:)

祝你好运

# jakarta-ee - com.cybersource.ws.client.ClientException：com.ibm.jsse2.util.h：找不到受信任的证书

> ID：15610719
> 
> 赞同：3
> 
> 时间：2013-03-25T08:45:26.993
> 
> 标签：jakarta-ee, websphere, ssl-certificate

我对 SSL 很陌生，所以如果我问了任何愚蠢的问题，请裸露。

我正在开发一个处理信用卡交易的 Java EE Web 应用程序。在这里，我尝试使用来自网络资源的 p12 证书。

我有一个在 Windows 中运行的本地开发环境，我使用 tomcat 作为我的应用服务器。在我当地的环境中一切正常。当我将相同的应用程序移动到 Unix/Websphere 环境时，即使提供了正确的证书路径，我也会得到“com.cybersource.ws.client.ClientException：com.ibm.jsse2.util.h：未找到受信任的证书”在 UNIX 框中。

我就这个问题咨询了我的 UNIX 管理员团队，他们要求我将 p12 文件转换为 JKS 并放在 WEB_INF/Classes 文件夹中。我已经使用 keytool 完成了它并将 p12 证书转换为 JKS。我的 WebSphere 仍然无法识别证书位置。

这里的文件类型如何相关？为什么我不能使用 p12 文件而不是 JKS。我的 UNIX 团队说，我必须处理我的代码。一个星期以来，我一直被这个问题困扰。

如果您需要进一步说明，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T18:38:19.433

WebSphere 为您管理这些文件。

您需要将签署者证书添加到信任库。真的很简单，只要按照IBM文档：

1.  登录到 WebSphere 控制台（通常是 https://:9043/ibm/console）单击安全性 > SSL 证书和密钥管理 > 密钥库和证书。
2.  项目清单
3.  单击 CellDefaultTrustStore。
4.  单击签名者证书。
5.  单击从端口检索。输入 Web 服务器的主机名、SSL 端口和别名。别名通常是一个任意字符串，它将成为凭证的名称。单击检索签名者信息，然后单击确定。根证书被添加到签名者证书列表中。
6.  重新启动您的 WebSphere 服务器并再次尝试使用您的应用程序，如果仍然失败，您应该注意导入签名者证书而不仅仅是签名证书。

希望这可以帮助

# libgdx - 修复 pngcrush 以在 iOS 中编译 libgdx

> ID：15610723
> 
> 赞同：0
> 
> 时间：2013-03-25T08:45:35.720
> 
> 标签：libgdx

我正在尝试为 iOS 编译 hello world 示例（使用 gdx-setup-ui 生成）。按照修复 pngcrush ( [https://code.google.com/p/libgdx/wiki/IOSWIP](https://code.google.com/p/libgdx/wiki/IOSWIP) ) 的演练后，我在 Xamarin Studio 中收到以下错误：“找不到 pngcrush 实用程序..”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:10:34.247

我的问题是，在创建“假”pngcrush 文件时，我必须为该文件提供正确的权限。遵循[如何通过双击使此 file.sh 可执行？](https://stackoverflow.com/questions/8409946/how-do-i-make-this-file-sh-executable-via-double-click)解决了这个问题。

# python - 基于单个列表的排序在python中对多个列表进行排序

> ID：15610724
> 
> 赞同：3
> 
> 时间：2013-03-25T08:45:47.673
> 
> 标签：python, itertools

我是这里的python新手，我遇到了一个相当简单的问题——我正在寻找解决这个问题的最有效方法。所以，我有 5 个列表如下：

```
a,b,c,d,score 
```

上面的列表都具有相同的大小（在我的情况下为 500）。`a,b,c,d`是字符串列表并且`score`是一个`int`列表。

我想做的是`a,b,c,d`基于`score`. 因此，我首先要`score`根据降序模式进行排序，然后`a,b,c,d`根据排序的分数列表（以相同的顺序）对相应的元素进行排序。

我正在考虑`enumerate`实现这一目标，但我想知道是否`itertools`可以在这里使用它来使其更快、更高效。

如果这是一个 101 问题，任何有关如何实现这一目标的指导将不胜感激&& 抱歉。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T09:03:10.663

```
sorted_lists = sorted(izip(a, b, c, d, score), reverse=True, key=lambda x: x[4])
a, b, c, d, score = [[x[i] for x in sorted_lists] for i in range(5)] 
```

在这第一步中，`zip`将列表放在一起。这从每个列表中获取第一个元素并将它们放入一个元组中，将该元组附加到一个新列表中，然后对每个列表中的第二个元素执行相同的操作，依此类推。然后我们按第五个元素对这个元组列表进行排序（这是来自传递给`key`参数的匿名函数）。我们设置`reverse=True`为使列表降序。

在第二步中，我们使用一些嵌套列表推导和元组解包来拆分列表。我们创建了一个新的列表列表，其中每个内部列表是 中每个元组的所有第一个元素`sorted_lists`。您可以在如下一行中执行此操作，但我认为将其分成两部分可能会更清晰一些：

```
a, b, c, d, score = izip(*sorted(izip(a, b, c, d, score), reverse=True,
                         key=lambda x: x[4])) 
```

这是一个返回元组列表的通用函数，其中元组是已排序的列表：

```
def sort_lists_by(lists, key_list=0, desc=False):
    return izip(*sorted(izip(*lists), reverse=desc,
                 key=lambda x: x[key_list])) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T17:21:29.467

如果您正在进行大量数值工作或数组操作，则可能值得考虑使用`numpy`. 这个问题很容易用 numpy 数组解决：

```
In [1]: import numpy as np
In [2]: a = ['hi','hello']
In [3]: b = ['alice','bob']
In [4]: c = ['foo','bar']
In [5]: d = ['spam','eggs']
In [6]: score = [42,17] 
```

从这里，以格式制作一个元组列表`(a,b,c,d,score)`并用 dtype 存储每个元组`(str,str,str,str,int)`，您甚至可以给它们命名`('a','b','c','d','score')`以便以后访问它们：

```
In [7]: data = np.array(zip(a,b,c,d,score),
   ...:         dtype = [('a','S5'),('b','S5'),('c','S5'),('d','S5'),('score',int)]
   ...:     )

In [8]: data
Out[8]: 
array([('hi', 'alice', 'foo', 'spam', 42),
       ('hello', 'bob', 'bar', 'eggs', 17)], 
      dtype=[('a', 'S5'), ('b', 'S5'), ('c', 'S5'), ('d', 'S5'), ('score', '<i8')]) 
```

该数组的优点是您可以通过名称访问所有“列表”（字段）：

```
In [9]: data['a']
Out[9]: 
array(['hi', 'hello'], 
      dtype='|S5')

In [10]: data['score']
Out[10]: array([42, 17]) 
```

要对它们进行排序，只需给出要排序的字段名称：

```
In [11]: sdata = np.sort(data, order='score')

In [12]: sdata
Out[12]: 
array([('hello', 'bob', 'bar', 'eggs', 17),
       ('hi', 'alice', 'foo', 'spam', 42)], 
      dtype=[('a', 'S5'), ('b', 'S5'), ('c', 'S5'), ('d', 'S5'), ('score', '<i8')])

In [13]: sdata['b']
Out[13]: 
array(['bob', 'alice'], 
      dtype='|S5') 
```

# css - 使用 CSS 使子 DIV 的宽度大于父 div

> ID：15610728
> 
> 赞同：1
> 
> 时间：2013-03-25T08:46:03.280
> 
> 标签：css, html, width

是否可以使**子 DIV的“****宽度**”大于父 DIV 的“宽度”...（**仅使用 css**）

 ****有关详细信息，请参阅以下示例：

> [http://jsfiddle.net/6UFs4/](http://jsfiddle.net/6UFs4/)

```
 <div id="main">
  <div id="sidebar">DIV1
        <div id="sidebar_2">DIV1 Sub</div>
  </div>
  <div id="page-wrap">DIV2</div>
</div>

#main
{ 
    display: block;
    width: 100%;
}
#sidebar    
{
    background-color: Aqua;
    float: left;
    width: 80%;
}

#sidebar_2    
{
    background-color: Lime;
}

#page-wrap  
{
    background-color: Gray;
} 
```

**DIV1 Sub**的大小应该是浏览器窗口的 100%，并且不受父 DIV 的限制。我尝试使用**溢出：可见**但它不起作用......

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:53:43.990

您可以使用`position:absolute`and`width:100%;`来满足您的要求，但您必须注意元素的位置（相对于页面的 x 和 y 轴），以便在所需位置显示图像

见例子：http: [//jsfiddle.net/6UFs4/2/](http://jsfiddle.net/6UFs4/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:54:58.980

只需将此 css 添加到您的子 div 中：

```
#sidebar_2 {
    position:absolute;
    left:0;
    right:0;
} 
```

演示：http: [//jsfiddle.net/6UFs4/4/](http://jsfiddle.net/6UFs4/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:54:02.170

是的，你可以通过改变它的定位。

[jsFiddle](http://jsfiddle.net/NPV3M/)

![在此处输入图像描述](../Images/8d12201919e1342b9243dabb8ef4be99.png)

```
#sidebar_2    
{
    background-color: Lime;
    position:absolute;
    left:0;
    right:0;
} 
```****

# java - 如何使用jsp在mysql中插入日期？

> ID：15610734
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:46:26.327
> 
> 标签：java

这是我编辑的代码...

```
 java.sql.Timestamp sqlNow = new java.sql.Timestamp(new java.util.Date().getTime());

                stmt = con.createStatement();
    //stmt.executeUpdate("INSERT INTO cregn values('"+appno+"','"+usname+"','"+upwd +"','"+fname+"','"+mname+"','"+lname+"','"+dob+"','"+gend+"','"+faname+"','"+saddr+"','"+caddr+"','"+staddr +"','"+pin+"','"+cno+"','"+email+"','"+occ+"','"+secques+"','"+answer+"','Processing','"+sqlNow+"')");
                pst = con.prepareStatement("INSERT INTO cregn (aplno, username, pwd, firstname,middlename,lastname, dob,gender, fathername, street,city,state, pincode, phone, email,occupation,secques,answer,dor)  VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)");

                pst.setInt(1, appno);
                pst.setString(2, usname);
                pst.setString(3, upwd);
                pst.setString(4, fname);
                pst.setString(5, mname);
                pst.setString(6, lname);
                pst.setString(7, dob);
                pst.setString(8, gend);
                pst.setString(9, faname);
                pst.setString(10, saddr);
                pst.setString(11, caddr);
                pst.setString(12, staddr);
                pst.setString(13, pin);
                pst.setString(14, cno);
                pst.setString(15, email);
                pst.setString(16, occ);
                // pst.setString(17,ph);
                pst.setString(17, secques);
                pst.setString(18, answer);

                pst.setTimestamp(19, sqlNow);

                pst.executeUpdate();

                out.println("Registration Successful for application " + appno);
            } catch (Exception ee) {
                out.println("Invalid Data! All fields are mandatory..." + ee.getMessage());
            }

%> 
```

执行此代码错误后显示“无效数据！所有字段都是强制性的..数据截断”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:50:15.720

您没有执行该语句。

您需要调用 executeUpdate

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T08:48:52.273

你必须打电话[`execute`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#execute%28%29)或[`executeUpdate`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)打开`pst`才能真正完成这项工作。例如，最后：

```
pst.executeUpdate(); 
```

您显示的代码所做的只是*准备*执行语句，它不会执行它。`PreparedStatement`这是和之间的主要区别之一`Statement`。在`Statement`中，您将 SQL 传递给直接执行`executeUpdate`（如使用 注释掉的行中所见`stmt`）。使用 a `PreparedStatement`，您可以按照您的方式提供 SQL `?`，设置这些参数，*然后*调用`executeUpdate`(或`execute`)，您还没有这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:48:57.167

没有`executeUpdate()`被召唤`pst`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:00:47.110

用于`pst.executeUpdate();`执行查询并确保`setAutoCommit(true)`必须调用事务中的使用。

# jsf - 从 JSF 1.1 迁移到 JSF 1.2？

> ID：15610736
> 
> 赞同：0
> 
> 时间：2013-03-25T08:46:26.787
> 
> 标签：jsf

我们有一个使用 JSF 1.1 的旧 Web 应用程序。

我们现在需要将 JSF 版本从 1.1 升级到 JSF 1.2。为此需要付出多少努力？

应用程序中需要进行哪些更改？

# actionscript-3 - Flex 将组件大小调整为将元素包装在自定义布局中

> ID：15610738
> 
> 赞同：0
> 
> 时间：2013-03-25T08:46:36.070
> 
> 标签：actionscript-3, apache-flex, flex4, flex3, flex4.5

我有一个名为 NewsLayout 的自定义布局：

```
 override public function updateDisplayList(width:Number, height:Number)
        : void
    {
        super.updateDisplayList( width, height );

        var layoutTarget:GroupBase = target;

        var element:ILayoutElement;

        for( var i:int = 0; i < layoutTarget.numElements; i++ )
        {
            element = layoutTarget.getElementAt( i );

            if(i==0){
                element.setLayoutBoundsSize( NaN, NaN );
                element.setLayoutBoundsPosition( 0, 0 );
            }
            else if(i==1)
            {
                var refEl = layoutTarget.getElementAt( 0 );
                element.setLayoutBoundsSize( NaN, NaN );
                element.setLayoutBoundsPosition( 0, refEl.height+5);
            }
            else if(i==2)
            {
                var refEl = layoutTarget.getElementAt( 0 );
                var refEl2 = layoutTarget.getElementAt( 1 );
                element.setLayoutBoundsSize( NaN, NaN );                    
                element.setLayoutBoundsPosition( Math.max(refEl2.width,refEl.width)+5, 0);

            }
        }
    } 
```

我的自定义组件使用了这个布局和另外三个。它的布局可能会即时改变。无论它使用哪种布局，我的组件都应该将所有元素包装在其中。

为此，我尝试覆盖 measure 方法以根据其中的组件调整组件的大小。我正在尝试像这样计算其中所有项目的底点。没想到所有元素的 y 位置都是 0，但正如你所见，我在布局类中设置了它们的坐标。

```
 override protected function measure():void {

            super.measure(); var max= 0;
            for(var i=0 ; i < this.numElements;i++)
            {
                if((this.getElementAt(i).height +this.getElementAt(i).y) > max)
                    max = this.getElementAt(i).height + this.getElementAt(i).y;// here y position is 0
            }
            //this.height =this.measuredHeight;
            this.measuredHeight = max;
            this.height = max;
            trace("maxheight:"+max); 
```

不管它使用什么布局，让组件将所有元素包装在其中的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:25:32.083

在 flex 组件生命周期中 measure() 调用一次并且在 updateDisplayList() 之前调用；因此，您的组件的 y 位置为 0；尝试对 updateDisplayList() 中的所有元素使用 setActualSize(width, height)。

# python - 通过 python oauth2 库访问 Github api v3 - 重定向问题

> ID：15610749
> 
> 赞同：3
> 
> 时间：2013-03-25T08:47:08.043
> 
> 标签：python, github, web.py

环境 - Python 2.7.3，webpy。

我正在尝试使用 Python web.py 对 github 进行简单的 oauth 3 方式身份验证。根据 github 上的基本 oauth 指南，我正在做这样的事情：

```
import web,requests
import oauth2,pymongo,json
from oauth2client.client import OAuth2WebServerFlow
urls=('/', 'githublogin',
      '/session','session',
      '/githubcallback','githubCallback');
class githublogin:
  def GET(self):
    new_url = 'https://github.com/login/oauth/authorize'
    pay_load = {'client_id': '',
                'client_secret':'',
                'scope':'gist'
               }
    headers = {'content-type': 'application/json'}
    r = requests.get(new_url, params=pay_load, headers=headers)
    return r.content 
```

这将我发送到 GH 登录页面。一旦我登录 - GH 不会将我重定向到回调。redirect_uri 参数在 github 应用程序中配置。我已经仔细检查以确保这是正确的。

```
 class githubCallback:
   def POST(self):
     data =  web.data()
     print data
   def GET(self):
     print "callback called" 
```

相反，我在浏览器中看到 `http://<hostname>:8080/session` 了 404 消息，因为我没有配置会话 URL。那是第 1 个问题。第 2 个问题 - 如果我配置会话 URL 并打印出帖子消息

```
class session:
  def POST(self):
    data =  web.data()
      print data
    def GET(self):
      print "callback called" 
```

我可以看到一些带有“authenticity_token”的数据发布到 URL。

我尝试使用 python_oauth2 库，但无法通过 authentication_url 调用。所以我尝试了这个更简单的请求库。有人可以向我指出这里出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:18:57.800

所以这就是我解决这个问题的方法。感谢 @Ivanzuzak 提供 requestb.in 提示。

我正在使用 Python webpy。

```
import web,requests
import oauth2,json
urls=('/', 'githublogin',
      '/githubcallback','githubCallback');
render = web.template.render('templates/')
class githublogin:
  def GET(self):
    client_id = ''
    url_string = "https://github.com/login/oauth/authorize?client_id=" + client_id
    return render.index(url_string)

class githubCallback:
  def GET(self):
    data =  json.loads(json.dumps(web.input()))
    print data['code']
    headers = {'content-type': 'application/json'}
    pay_load = {'client_id': '',
                'client_secret':'',
                'code' : data['code'] }
    r = requests.post('https://github.com/login/oauth/access_token',  data=json.dumps(pay_load), headers=headers)
    token_temp = r.text.split('&')
    token = token_temp[0].split('=')
    access_token = token[1]
    repo_url = 'https://api.github.com/user?access_token=' + access_token
    response = requests.get(repo_url)
    final_data = response.content
    print final_data

app = web.application(urls,globals())
if __name__ == "__main__":
  app.run() 
```

我之前没有使用 html 文件，而是直接从 githublogin 类发送请求。那没有用。在这里，我使用 html 来引导用户首先从他将登录到 gh 的位置。有了这个，我添加了一个 html 并使用模板渲染它。

```
def with (parameter)
<html>
  <head>
  </head>
  <body>
    <p>Well, hello there!</p>
    <p>We're going to now talk to the GitHub API. Ready? <a href=$parameter>Click here</a> to begin!</a></p>
    <p>If that link doesn't work, remember to provide your own <a href="http://developer.github.com/v3/oauth/#web-application-flow">Client ID</a>!</p>
  </body>
</html> 
```

该文件直接取自开发指南，仅更改了 client_id 参数。

另一点需要注意的是，在 requests.post 方法中 - 直接传递 pay_load 是行不通的。它必须使用 json.dumps 进行序列化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:52:48.403

我不确定您的最终问题是什么，但请尝试在下面重现此流程，首先手动使用浏览器，然后使用您的 python 库。它将帮助您调试问题。

1.  [在http://requestb.in/](http://requestb.in/)上创建一个请求箱。请求箱基本上是一个记录所有发送给它的 HTTP 请求的服务。您将使用它而不是回调来记录发送到回调的内容。复制请求 bin 的 URL，类似于[http://requestb.in/123a546b](http://requestb.in/123a546b)

2.  转到您在 GitHub 上的 OAuth 应用程序设置 ( [https://github.com/settings/applications](https://github.com/settings/applications) )，输入您的特定应用程序的设置，并将回调 URL 设置为您刚刚创建的请求 bin 的 URL。

3.  向 GitHub OAuth 页面发出请求，并定义了 client_id。只需在浏览器中输入以下 URL，但将 YOUR_CLIENT_ID_HERE 更改为 OAuth 应用程序的客户端 ID：

    `https://github.com/login/oauth/authorize?client_id=YOUR_CLIENT_ID_HERE`

4.  输入您的用户名和密码，然后单击授权。然后 GitHub 应用程序会将您重定向到您创建的请求 bin 服务，浏览器中的 URL 应该类似于（注意 code 查询参数）：

    `http://requestb.in/YOUR_REQUEST_BIN_ID?code=GITHUB_CODE`

    （例如，`http://requestb.in/abc1def2?code=123a456b789cdef`）

    此外，浏览器中页面的内容应该是“ok”（这是请求 bin 服务返回的内容）。

5.  转到您创建的请求 bin 页面并刷新它。您现在将看到 GitHub OAuth 服务器向您发送的 HTTP GET 请求的日志条目，以及所有 HTTP 标头。基本上，您将看到与您被重定向到的 URL 中相同的代码参数。如果您获得此参数，您现在可以使用此代码和您的客户端密码发出 POST 请求，如您正在使用的指南的第 2 步所述：http: [//developer.github.com/v3/oauth/#网络应用程序流](http://developer.github.com/v3/oauth/#web-application-flow)

让我知道这些步骤是否对您造成了问题。

# javascript - 将特定天数添加到已选择的日期（当前日期选择器文本框中的日期）

> ID：15610750
> 
> 赞同：0
> 
> 时间：2013-03-25T08:47:09.927
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

我已经查看了有关 stackoveflow 的几个问题，但似乎没有人回答我的问题。

在我的应用程序中，用户通常需要从当前选择的日期到 +1 或 -1 天。为此，我想通过在右侧和左侧分别添加两个用于 +1 和 -1 操作的图像按钮来加快此过程。

我试过这个：

```
$('#date').datepicker('setDate', '-1'); 
```

但它总是从当前日期设置 +1 日期（即今天 -1，而不是所选日期的 -1）。

我怎样才能做到这一点..？
任何帮助都是不言而喻的。

### 后来试过：

```
function AddDays(arg) {
    var d = $('#date').datepicker('getDate');
    var d = new Date(d.getYear(), d.getMonth(), d.getDay() + arg);
    $('#date').datepicker('setDate', d);
} 
```

`AddDays(1)`并`AddDays(-1)`在`onclick`事件中调用此函数，`image`但它会产生非常奇怪的结果。
例如，如果我将当前日期设置`25-03-13`为`dd-mm-y`格式，则单击 -1 按钮将日期设置为`28-02-0-87`. 再次单击它不会导致任何变化。第三次点击它会产生结果`01-02-0-87`。

我不明白这一点。这是什么行为..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:24:04.803

最后我写了我的解决方案。这是代码

```
function AddDays(arg) {
    var d = $('#date').datepicker('getDate');
    d.setDate(d.getDate() + arg);
    $('#date').datepicker('setDate', d);
} 
```

我`date`的在哪里。`id``jquery-ui datepicker`

我仍在寻找可以直接放入`onclick`我的`next`和`previous`按钮的任何内联代码（单行）。

# c# - 在 MSChart 图表中卡住 x 轴滚动条

> ID：15610752
> 
> 赞同：2
> 
> 时间：2013-03-25T08:47:19.200
> 
> 标签：c#, .net, winforms, scrollbar, mschart

[编辑]

经过大量的试验和错误，我意识到我的工具提示代码的一个版本可以滚动，而其余代码则保持不变。两种工具提示用法之间的唯一区别是 pos.x 值发生了偏移，而不是鼠标所在的位置。

这意味着而不是

```
/*X-axis Tooltip*/
tooltip.Show(Math.Truncate(xValue * 1000) / 1000 + unit_Converter(), this.chart1, pos.X, pos.Y - 15); 
```

我做了这个

```
/*X-axis Tooltip*/
tooltip.Show(Math.Truncate(xValue * 1000) / 1000 + unit_Converter(), this.chart1, pos.X - 70, pos.Y - 15); 
```

这就是所有的区别。现在我可以单击并拖动 X 轴滚动条。我想我总是可以滚动我的 Y 轴的原因是它从一开始就移动了 15。

因此，如果您将工具提示位置设置在鼠标位置的确切位置，那么显然您将在尝试滚动时单击工具提示本身，而不是滚动条。

Josh W 提供的答案同样有效，因为仅使用“this”而不是“this.chart”会出于某种原因自动将工具提示移动一点。谢谢您的帮助！

* * *

[原始问题]

我有一个带有 Y 轴和 X 轴滚动条的图表。有一段时间，我的两个滚动条都起作用了。随着我的代码增长，X 轴滚动条现在不会移动，而 Y 轴滚动条移动得很好。我很困惑。任何帮助，将不胜感激。

我参考了其他答案，例如

[c#图表控件，垂直滚动缩放问题["Stuck Scroll bar"]](https://stackoverflow.com/questions/8837228/c-sharp-chart-control-vertical-scrolling-problems-with-zoom-stuck-scroll-bar)

但是X轴滚动条还是卡住了......

[编辑]：我意识到我的鼠标移动代码工具提示导致了这种情况。如果我禁用对鼠标移动代码的调用，X 轴滚动条将再次起作用。但是我怎样才能让两者都能发挥作用呢？我真的不知道十字线工具提示如何仅禁用 X 轴上的滚动，而不是 Y 轴上的滚动......

```
 void chart1_MouseMove(object sender, MouseEventArgs e)
    {
        var pos = e.Location;
        _point.X = e.Location.X;
        _point.Y = e.Location.Y;

        try
        {
            if ((chart1.ChartAreas[0].AxisX.PixelPositionToValue(e.X) >= 0) && (chart1.ChartAreas[0].AxisX.PixelPositionToValue(e.X) <= max))
            {
                //Crossair
                chart1.ChartAreas[0].CursorX.SetCursorPixelPosition(_point, true);

                //Tooltips                    
                double xValue = chart1.ChartAreas[0].AxisX.PixelPositionToValue(e.X);

                /*X-axis Tooltip*/
                tooltip.Show(Math.Truncate(xValue * 1000) / 1000 + unit_Converter(), this.chart1, pos.X, pos.Y - 15);
            }
        }
        catch (Exception exception)
        {

        }
} 
```

我设置系列设置的代码：

```
var series = chart1.ChartAreas[chart1.Series[iname].ChartArea];

//Line thickness
chart1.Series[iname].BorderWidth = 2;

series.AxisX.Minimum = 0;
series.AxisX.Maximum = max;
series.AxisY.Minimum = 0;
series.AxisY.Maximum = checkedListBox1.CheckedItems.Count * 3 - 2;
series.AxisX.MajorGrid.Interval = time_of_cycle;
series.AxisX.MajorGrid.LineDashStyle = ChartDashStyle.DashDotDot;
series.AxisY.MajorGrid.Interval = 2;
series.CursorX.Interval = 0;
series.CursorY.Interval = 0;

series.AxisX.ScaleView.SmallScrollSize = time_of_cycle /100 ;
series.AxisY.ScaleView.SmallScrollSize = 1;

//Disables Y axis lable
series.AxisY.LabelStyle.Enabled = false;

series.AxisX.LabelStyle.ForeColor = Color.White;
series.AxisY.LabelStyle.ForeColor = Color.White;
series.AxisX.LabelStyle.Format = label_Style_Converter();

series.AxisX.LabelStyle.Interval = time_of_cycle * 2;
series.AxisX.MajorGrid.LineColor = Color.DimGray;
series.AxisY.MajorGrid.LineColor = Color.DimGray;
series.AxisX.ScrollBar.BackColor = Color.LightGray;
series.AxisY.ScrollBar.BackColor = Color.LightGray;
series.AxisX.ScrollBar.ButtonColor = Color.LightGray;
series.AxisY.ScrollBar.ButtonColor = Color.LightGray;
series.AxisX.ScrollBar.ButtonStyle = ScrollBarButtonStyles.SmallScroll;
series.AxisY.ScrollBar.ButtonStyle = ScrollBarButtonStyles.SmallScroll;
series.AxisX.ScrollBar.Enabled = true;
series.AxisY.ScrollBar.Enabled = true;
series.AxisX.ScrollBar.IsPositionedInside = false;
series.AxisY.ScrollBar.IsPositionedInside = false;
series.AxisX.IsMarginVisible = true;
series.AxisY.IsMarginVisible = false;
series.AxisX.Name = "µs";
series.AxisX.ScaleView.Size = max - time_of_cycle / 100;
series.AxisY.ScaleView.Size = (checkedListBox1.CheckedItems.Count * 3 - 2) + 1 ;
series.BackColor = Color.Black;

//crosshair
var cursor_Y = chart1.ChartAreas["ChartArea1"].CursorY;
var cursor_X = chart1.ChartAreas["ChartArea1"].CursorX;
cursor_Y.LineWidth = 1;
cursor_Y.LineDashStyle = ChartDashStyle.Solid;
cursor_Y.LineColor = Color.DarkRed;
cursor_Y.SelectionColor = Color.LightGray;

cursor_X.LineWidth = 1;
cursor_X.LineDashStyle = ChartDashStyle.Solid;
cursor_X.LineColor = Color.DarkRed;

chart1.MouseMove += new MouseEventHandler(chart1_MouseMove); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:11:43.957

起初我以为您的调用可能`.Show()`阻塞了 GUI 线程，但一些快速而肮脏的代码似乎没有这个问题。不过，我确实注意到工具提示的一件奇怪的事情是，当您的 Chart 之类的东西订阅了 MouseMove 事件，并且您的工具提示被赋予 'this.chart1' 引用而不是 just`this`时，那么如果工具提示在您的下方鼠标，它会继续触发事件。

也就是说，即使工具提示从图表上移开。

这是我刚刚使用面板而不是图表玩过的一些测试代码。

```
 private int Counter = 0;
    private void panel1_MouseMove(object sender, MouseEventArgs e)
    {
        Console.WriteLine(string.Format("X{0}, Y{1}\t Count = {2}", e.X, e.Y, Counter));
        Counter++;

        toolTip1.Show(
            string.Format("X{0}, Y{1}\t Count = {2}", e.X, e.Y, Counter),
            this.panel1,
            e.X - 75,
            e.Y -5);
    } 
```

![表格1](../Images/99831b325b69c4bdff73dbe2752f1b31.png)

首先，您还应该摆脱该 try/catch 语句，因为您没有对错误做任何事情......要么处理错误，要么让它们冒泡导致崩溃（这样您就可以“修复”它）。您现在拥有的可能会引发错误，但您永远不会知道，因为您正在捕获它并忽略它。

其次，MouseMove 事件经常发生......也许使用 MouseHover 来显示工具提示？

除此之外......它似乎不是您的代码中断的地方，尽管它可能在`unit_Converter()`调用内部，甚至在数学函数中......您的 try/catch 可能在该行隐藏了一个异常。

# java - 标记字符串位置

> ID：15610755
> 
> 赞同：0
> 
> 时间：2013-03-25T08:47:28.063
> 
> 标签：java

我应该如何标记字符串的字符位置？

例如，我有一个字符串 'string' 并将 'str' 更改为 'flam' 以成为 'flaming'。我想标记已被替换的“火焰”部分。在java中执行此操作的最佳方法是什么？

进一步的例子：

该字符串开始时没有标记，这意味着没有任何内容被替换。然后将 r 标记为之前替换的那些。

字符串 -> 燃烧

------ -> rrrr---

如果我继续改变

燃烧的-> flamiche

rrrr--- -> rrrr-rrr

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:52:01.463

我认为..

使用 int position = String.indexOf() 方法获取字符串位置。

和 flam + String.SubString(position)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:53:36.963

```
HashMap<String, int[]> tagDetails = new HashMao<String, int[]>(); 
```

数组的长度可以为 2，字符串`tag`中的开始和结束索引为 。`key`

但是，它并不能解决重复密钥问题。

或者

您可以创建类似于以下的自定义对象：

```
class TaggedObject
{
    int objId;
    String theString;
    int startIndex;
    int endIndex;
} 
```

# perl - 如何在 Mojolicious Lite 应用程序中查看所有活动会话？

> ID：15610764
> 
> 赞同：1
> 
> 时间：2013-03-25T08:48:02.540
> 
> 标签：perl, mojolicious

我正在使用 Mojolicious Lite 构建一个应用程序，并且我正在寻找一种方法来查看有关活动会话的所有数据。我这样做主要是因为这是我第一次尝试使用 Mojolicious Lite 会话，我想看看幕后发生了什么。

几点注意事项：我对 Mojolicious 还是很陌生，正如您可能猜到的那样，我使用的是 Mojolicious Lite。我之前编写的任何 Mojolicious Lite 应用程序都非常琐碎，所以我对它的熟悉程度并不深。就此而言，我仍然是 perl 的“早期中级，充其量”，因此在 perl 中探索任何 OO 的内部工作原理对我来说在很大程度上是陌生的领域。

也就是说，我给自己做了几条这样的小路线：

```
get '/firstpage' => sub{
    my $self = shift;
    my $usr = $self->session(user => 'first_user');
    $self->render(text => $usr);
};

get '/secondpage' => sub{
    my $self = shift;
    my $usr = $self->session(user => 'second_user');
    $self->render(text => $usr);
};

get '/sessions' => sub{
    my $self = shift;
    $self->render(text => Dumper(app->sessions));
}; 
```

我正在假设，在我访问前两个 url 之后，Mojolicious 将在某处拥有“一些”数据，以确认它知道 first_user 和 second_user。（我对如何使用 Mojolicious Lite 会话的理解也可能完全偏离基础......老实说，从文档中，我不太确定。）

可悲的是， /sessions 只是向我展示了 Mojolicious::Sessions 对象的内容：

> $VAR1 = bless( { 'cookie_path' => '/', 'secure' => 0, 'cookie_name' => 'mojolicious', 'default_expiration' => 3600 }, 'Mojolicious::Sessions' );

但我假设，在某个地方，我可以得到 Mojolicious 拥有的所有与会话相关的数据的哈希值。我一直在寻找文档一段时间，但我还没有找到任何线索。

有什么见解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T12:36:09.073

> 我正在假设，在我访问前两个 url 之后，Mojolicious 将在某处拥有“一些”数据，以确认它知道 first_user 和 second_user。（我也可能完全不了解如何使用 Mojolicious Lite 会话......老实说，从文档中，我不太确定。）

是的，我认为你错过了会议的重点。服务器/应用程序不会记住每个访问用户的状态。为了让它看起来好像确实如此，我们有 cookie。会话是每个客户端的持久性事物。

会话信息只是一个哈希引用，编码为 JSON 并存储在客户端的 cookie 中。这对于记住您已登录很有用，例如用户名，可能是购物车中事物的数组引用。当您请求页面时，此 cookie 会被发送回服务器，服务器可以访问数据并准备响应，以便您了解会话的状态。

因此，没有“活动会话”的记录。所有这些信息都分布在所有客户之间。

如果您想更好地了解正在发生的事情，我可以推荐 tempire 的插件[Mojolicious::Plugin::ConsoleLogger](https://metacpan.org/module/Mojolicious%3a%3aPlugin%3a%3aConsoleLogger)，它**对于当前请求**在浏览器的 javascript 控制台中显示所有相关信息（会话、存储等）。

这是一个例子。

```
#!/usr/bin/env perl

use Mojolicious::Lite;

#plugin 'ConsoleLogger'; # if desired

any '/' => sub {
  my $self = shift;
  my $name = $self->session('name') || 'Unknown'; # get the name from the session
  $self->render( text => "Hello $name" );
};

any '/name/:name' => sub {
  my $self = shift;
  my $name = $self->stash('name'); # get name from path
  $self->session( name => $name ); # and store it in the session
  $self->redirect_to('/');
};

any '/logout' => sub {
  my $self = shift;
  $self->session( expires => 1 );
  $self->redirect_to('/');
}; 

app->start; 
```

如果您访问`/name/ghorahn`它，它会将您的姓名存储在 cookie 中。从那时起，每次您访问`/`它都会向您打招呼，直到：

1.  您的会话到期（默认为您上次访问后的 1 小时）
2.  您通过以下方式更改姓名`/name/whatever`
3.  您访问`/logout`手动使会话过期

您会注意到另一个用户（在另一台计算机上，甚至在同一台计算机上的不同浏览器上）可能有不同的名称，但两者都是持久的。这就是会话的用途。:-)

# java - 如何在 android Media Recorder 上更改视频大小

> ID：15610765
> 
> 赞同：3
> 
> 时间：2013-03-25T08:48:05.103
> 
> 标签：java, android, android-video-player, android-mediarecorder

我需要在我的 android 应用程序中捕获 480 * 480 的视频，但似乎 MediaRecorder 只能支持有限的内置尺寸，例如 1980*1080、960*720 等，几乎都在 4:3 或 16:9 .

有什么方法可以捕获该大小的视频，还是应该捕获 640 * 480 视频，然后使用一些视频库将其处理为 480 * 480？

# soapui - 在 SoapUI 中返回某个响应

> ID：15610771
> 
> 赞同：1
> 
> 时间：2013-03-25T08:48:29.460
> 
> 标签：soapui

我在 SoapUI 中创建了一个模拟服务。默认情况下，它会在模拟服务中为您创建一个`Request 1`和一个对应项。`Response 1`

我也可以*克隆* `Response 1`并调用它`Response 2`。但是当我在 SoapUI 中执行新的测试请求时`Request 1`，它总是会返回`Response 1`。

那么克隆***Responses***有什么用呢？反正有没有告诉 SoapUI，如果一个请求带有`<ID> == 100`，则返回`Response 1`，否则返回`Response 2`。

这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:28:38.053

双击您的模拟服务的操作。在左下角，您将看到一个名为**Dispatch**的属性。在那里，您可以选择如何发送您的模拟响应。

如果您想为请求中的某个值返回某个响应，您可以设置一个 XPath 表达式或 Groovy 脚本来分析您的请求。

看看soapUI主页上的以下教程：http: [//www.soapui.org/Service-Mocking/simulating-complex-behaviour.html](http://www.soapui.org/Service-Mocking/simulating-complex-behaviour.html)

# c# - 如何在不破坏单词的情况下在 c# 中破坏长字符串

> ID：15610776
> 
> 赞同：1
> 
> 时间：2013-03-25T08:48:44.487
> 
> 标签：c#

我想在 C# 中打破一个长字符串而不打破一个单词
示例：`S AAA BBBBBBB CC DDDDDD V` Breaking Character on 7 Count：

```
S AAA
BBBBBBB
CC 
DDDDDD 
V 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:49:57.360

```
string inputStr = "S AAA BBBBBBB CC DDDDDD V ";
int maxWordLength = 7;
char separator = ' ';

string[] splitted = inputStr.Split(new[]{separator}, StringSplitOptions.RemoveEmptyEntries);

var joined = new Stack<string>();
joined.Push(splitted[0]);

foreach (var str in splitted.Skip(1))
{
    var strFromStack = joined.Pop();
    var joindedStr = strFromStack + separator + str;
    if(joindedStr.Length > maxWordLength)
    {
        joined.Push(strFromStack);
        joined.Push(str);
    }
    else
    {
        joined.Push(joindedStr);
    }
}   
var result = joined.Reverse().ToArray();

Console.WriteLine ("number of words: {0}", result.Length);

Console.WriteLine( string.Join(Environment.NewLine, result) ); 
```

印刷：

```
number of words: 5
S AAA
BBBBBBB
CC
DDDDDD
V 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T09:44:51.140

这是一个利用正则表达式功能的更短的解决方案。

```
string input = "S AAA BBBBBBB CC DDDDDD V";

// Match up to 7 characters with optional trailing whitespace, but only on word boundaries
string pattern = @"\b.{1,7}\s*\b";

var matches = Regex.Matches(input, pattern);

foreach (var match in matches)
{
    Debug.WriteLine(match.ToString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T09:26:08.587

如果我正确理解了您的问题，这可以解决问题。递归实现会更酷，但尾递归在 C# 中太糟糕了:)

也可以使用 yield 和`IEnumerable<string>`.

```
string[] splitSpecial(string words, int lenght)
{
  // The new result, will be turned into string[]
  var newSplit = new List<string>();
  // Split on normal chars, ie newline, space etc
  var splitted = words.Split();
  // Start out with null
  string word = null;

  for (int i = 0; i < splitted.Length; i++)
  {
      // If first word, add
      if (word == null)
      {
          word = splitted[i];
      }
      // If too long, add
      else if (splitted[i].Length + 1 + word.Length > lenght)
      {
          newSplit.Add(word);
          word = splitted[i];
      }
      // Else, concatenate and go again
      else
      {
          word += " " + splitted[i];
      }
  }
  // Flush what we have left, ie the last word
  newSplit.Add(word);

  // Convert into string[] (a requirement?)
  return newSplit.ToArray();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T09:45:10.613

为什么不尝试正则表达式？

```
(?:^|\s)(?:(.{1,7}|\S{7,}))(?=\s|$) 
```

并使用所有捕获。

C#代码：

```
var text = "S AAA BBBBBBB CC DDDDDD V";
var matches = new Regex(@"(?:^|\s)(?:(.{1,7}|\S{7,}))(?=\s|$)").Matches(text).Cast<Match>().Select(x => x.Groups[1].Value).ToArray();
foreach (var match in matches)
{
    Console.WriteLine(match);
} 
```

输出：

```
S AAA
BBBBBBB
CC
DDDDDD
V 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T09:08:23.763

```
 string str = "S AAA BBBBBBB CC DDDDDD V";
        var words = str.Split(new char[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
        StringBuilder sb = new StringBuilder();
        List<string> result = new List<string>();
        for (int i = 0; i < words.Length; ++i)
        {
            if (sb.Length == 0)
            {
                sb.Append(words[i]);
            }
            else if (sb.Length + words[i].Length < 7)
            {
                sb.Append(' ');
                sb.Append(words[i]);
            }
            else
            {
                result.Add(sb.ToString());
                sb.Clear();
                sb.Append(words[i]);
            }
        }
        if (sb.Length > 0)
        {
            result.Add(sb.ToString());
        } 
```

结果将包含：

```
S AAA
BBBBBBB
CC
DDDDDD
V 
```

可以根据单词之间的分隔符是否应包含在 7 个字符中来调整谓词。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-03T10:45:42.653

这是向 HTML 文本添加换行符的方法：

SplitLongText（字符串_SourceText，int _MaxRowLength）{

```
 if (_SourceText.Length < _MaxRowLength)
        {
            return _SourceText;
        }
        else 
        {
            string _RowBreakText="";
            int _CurrentPlace = 0;
            while (_CurrentPlace < _SourceText.Length)
            {
                if (_SourceText.Length - _CurrentPlace < _MaxRowLength)
                {
                    _RowBreakText += _SourceText.Substring(_CurrentPlace);
                    _CurrentPlace = _SourceText.Length; 

                }
                else
                {
                    string _PartString = _SourceText.Substring(_CurrentPlace, _MaxRowLength);
                    int _LastSpace = _PartString.LastIndexOf(" ");
                    if (_LastSpace > 0)
                    {
                        _RowBreakText += _PartString.Substring(0, _LastSpace) + "<br/>" + _PartString.Substring(_LastSpace, (_PartString.Length - _LastSpace));
                    }
                    else
                    {
                        _RowBreakText += _PartString + "<br/>";
                    }
                    _CurrentPlace += _MaxRowLength;
                }

            }
            return _RowBreakText;

        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-03T15:05:09.137

**2021**

看看这个扩展方法，它使用递归

```
public static string SubstringDontBreakWords(this string str, int maxLength)
{
    return str.Length <= maxLength ? str : str.Substring(0, str.LastIndexOf(" ")).Trim().SubstringDontBreakWords(maxLength);
} 
```

像这样使用它

```
string text = "Hello friends";
text.SubstringDontBreakWords(10) 
```

# java - 如何使用 Struts 2 验证 HTML 标签

> ID：15610788
> 
> 赞同：0
> 
> 时间：2013-03-25T08:49:20.137
> 
> 标签：java, html, jsp, validation, struts2

我有一个 JSP 页面

```
<form action="passData" method="post">
  <input type="text" name="username" />
  <input type="submit"/>
</form> 
```

我有`UserData.java`配置 Struts2 的动作类

我`UserData-validation.xml`用于验证

```
<field name="username">
  <field-validator type="requiredstring">
  <message>Name is required</message>           
  </field-validator>
</field> 
```

但如果我使用它就行不通

```
<s:textfield name="username"/> 
```

它工作正常。但我想使用简单的 HTML 标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:52:30.787

您必须使用一些 Struts2 标签。如果您不想使用`<s:textfield>`标签`<s:fielderror>`，请使用呈现字段错误的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T12:11:09.543

验证在 html 标记上工作正常，即`<form` `<input`如果 name 属性`fieldName`与`validation.xml`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T12:15:25.247

无需更改任何内容。只需将所有 Struts`<s:form>`标签更改为 html 标签`<form>`，然后只添加`<s:fielderror> </s:fielderror>`您的代码。这是完美的工作。

# sql - 使用 dbms_assert.noop

> ID：15610791
> 
> 赞同：3
> 
> 时间：2013-03-25T08:49:30.013
> 
> 标签：sql, oracle, plsql

dbms_assert.noop 的实际用途是什么？由于此函数不执行错误检查并在输入时返回输入字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:35:40.070

在 Pete Finnigan 的博客上阅读[这里](http://www.petefinnigan.com/weblog/archives/00001154.htm)，他讨论了这个`dbms_assert.noop`函数。它提到：

> 我们现在可以澄清这个（dbms_assery.noop）用于标记一段不被自动化测试工具（可能是 Fortify）测试的代码，因为这个函数除了返回传递的字符串不变之外什么都不做。

据我所知，我可以在通过变量传递实际代码的情况下使用此函数，并且我不希望检查它是否存在 SQL 注入攻击。

这是此功能的众多用途之一。

# bash - Bash 编码约定

> ID：15610794
> 
> 赞同：19
> 
> 时间：2013-03-25T08:49:43.363
> 
> 标签：bash

我正在尝试学习一些 Bash，以便有一天能找到一份使用计算机的工作。

为了提高我的清晰度和门徒编写我的自学代码，我试图坚持一套一致的“指导原则”。

当我推出自己的“指南”时，我显然会问自己：我不应该使用既定标准吗？

我找不到一个这样的 Bash“权威”参考，类似于这些其他语言的参考：

*   Java ( [http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html) ) 如何为 Javadoc 工具编写文档注释
*   Java ( [http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html) ) Java 编程语言的代码约定
*   Java ( [https://code.google.com/p/java-coding-standards/wiki/Introduction](https://code.google.com/p/java-coding-standards/wiki/Introduction) ) Google Java 编码标准
*   Python ( [http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/) ) PEP 8 -- Python 代码风格指南
*   Python ( [http://google-styleguide.googlecode.com/svn/trunk/pyguide.html](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html) ) 谷歌 Python 风格指南

### 是否有与 Bash 的类似文档的链接，它有充分的理由被使用？

这是我自己整理的那种东西……但我认为，尤其是作为初学者，我应该使用专家编写的指南，而不是试图提出自己的指南，因为它们不会基于丰富的经验、洞察力、实用性、常见模式/反模式知识等。

一般而言，您可能会质疑此类文件的有效性，但*有些*人必须喜欢它们才能让网络在网上有我在上面的项目符号列表中提到的那些突出的例子。

* * *

```
################################################################################    
# Coding conventions                                                                
#                                                                                   
# - Prefer lines of 80 characters of length or less                                 
#                                                                                   
# - Perform arithmetic operations and numeric comparisons within "(( ))" blocks     
#   e.g. if ((42<=24+24)), ((3**3==27))                                             
#                                                                                   
# - Reference variables by name, not expansion, within arithmetic evaluation        
#   e.g. ((i++)) rather than (($i++)), ((v+=42)) rathern than v=$(($v+42))          
#                                                                                   
# - Prefer "[[" to "[" for conditional expressions                                  
#                                                                                   
# - Prefer "[[ $s ]]" to "[[ -n $s ]]" when checking for empty strings              
#                                                                                   
# - Document each function with at least a summary sentence. This should not        
#   exceed the preferred line length, be written in third person, end with a        
#   period and concisely describe the general utility of the function   
#
# ...
# ...
# ...
#            
################################################################################ 
```

* * *

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-26T04:00:51.523

像往常一样，谷歌是你的朋友。我遇到的最好的 bash 风格指南[来自 Google](https://google.github.io/styleguide/shell.xml)。

[Chromium 项目](https://chromium.googlesource.com/chromiumos/docs/+/master/styleguide/shell.md)还有一些额外的建议。

对于学习 bash，[Apple Developer Shell Scripting 入门](https://developer.apple.com/library/archive/documentation/OpenSource/Conceptual/ShellScripting/Introduction/Introduction.html)非常好。

使用 bash 的风格指南是相当明智的，因为它充满了技巧和意想不到且难以诊断的怪癖。因此，如果您一直遵循相同的风格，那么您应该只为这些技巧中的每一个上当一次。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-26T03:43:01.663

# 我的 shell 脚本标准

1.  更喜欢可移植性，但不要为此牺牲安全性和空白意识。
2.  首选内置命令而不是外部命令。
3.  但是，使用快速的外部命令来处理非常大的输入。
4.  避免不必要的子外壳和管道。
5.  不要预先优化。
6.  学习引用规则。然后，使用引号。
7.  使用函数来提高可读性和控制范围。
8.  不要给脚本愚蠢的文件扩展名。
9.  切勿在未检查其是否有效的情况下更改目录。
10.  避开大地精

> 愚蠢的一致性是小头脑的妖精，受到小政治家、哲学家和神学家的崇拜。
> 
> ——拉尔夫·沃尔多·爱默生

## 何时忽略可移植性规则

1.  `-execdir`适当时与 一起使用`find`。
2.  `null`当工具集允许避免在空格上意外分词时，请使用分隔符。
3.  了解所有 glob 扩展并使用它们。
4.  如果您的目标系统都具有 BASH，请不要向后弯腰成为 POSIXLY_STRICT。
5.  在这里使用字符串。

# java - 我如何从 github 运行 PageTurner 项目？

> ID：15610799
> 
> 赞同：0
> 
> 时间：2013-03-25T08:49:50.763
> 
> 标签：java, android

我是新的 android 开发人员。我想运行 Page Turner 的项目（来自 git-hub 项目）。我无法运行这个项目。这里只显示一个错误。这个错误是“类型 org.htmlcleaner.TagNode 不能已解决。它是从所需的 .class 文件中间接引用的“。我也添加了这个项目

1)ActionBarSherlock 库项目。

2)daisy-htmlcleaner-1.4.1.jar 文件。

3)epublib-core-latest.jar 文件。

4)htmlspanner-0.3-SNAPSHOT.jar 文件。

5) maven-site-1.0-site.jar 文件。

请帮助我，我怎样才能在没有这个错误的情况下运行这个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:44:00.853

嗯，看报错信息，好像是你的htmlcleaner版本不对。

您是否使用 Maven 构建 PageTurner？这应该会自动为您下载正确的依赖项。

如果您尝试在 Eclipse 中构建 PageTurner，请查看我所做的截屏视频：[http ://www.youtube.com/watch?v=jhSvwpwPFoY](http://www.youtube.com/watch?v=jhSvwpwPFoY)

# asp.net - 考虑到 Azure 上的可扩展性，ASP.NET 网站是否已经多线程？

> ID：15610800
> 
> 赞同：0
> 
> 时间：2013-03-25T08:49:54.507
> 
> 标签：asp.net, azure

这是参考另一个问题[Windows azure 平台如何为我的应用程序扩展？](https://stackoverflow.com/questions/2850714/how-does-windows-azure-platform-scale-for-my-app)声明只有多线程应用程序才能从多核架构中受益。

我的问题是，由于 ASP.NET/IIS（或任何其他 Web 应用程序和 Web 服务器）基本上是多线程的，它不会利用多核吗？

假设该站点是一个简单的 Web 应用程序，具有在页面显示上执行的一些逻辑，而没有显式的多线程实现。

我相信它仅适用于需要实现多线程编程以利用多核的控制台应用程序或时间表，请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:32:05.763

IIS 的设计实现充分利用了所有可用的操作系统 CPU 内核。然而，决定选择哪种 VM 大小实际上是特定于应用程序的。我几乎看不到任何比 Medium 更大的东西被用于**Web 角色**！

最常见的情况是使用小型虚拟机作为 Web 角色，并在不需要时横向扩展至多个实例。我总是建议客户从小型 VM 开始，进行一些性能/负载测试，同时密切监视 VM 以评估是否需要更大的 VM（如果有的话）。从弹性的角度来看，以及持久性，在许多情况下甚至是性能，依赖 4 个 Small VM 而不是 1 个 Large 要好得多！

请记住，以更小的步长（一次 1 或 2 个 CPU 内核，意味着小型或中型 VM）进行扩展总是更容易且成本明智。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:06:58.750

这个世界上存在许多业务需求，需要 Web 应用程序上的多线程，例如生成数据并将其插入数据库，通过 AJAX 导出 excel ......如果你不使用小型 VM 和具有强大核心的最小 RAM，如果不能很好地管理您的逻辑并利用硬件，您的 RAM 很快就会用完。

# mysql - mysql查询的优化

> ID：15610803
> 
> 赞同：4
> 
> 时间：2013-03-25T08:50:06.900
> 
> 标签：mysql, sql, query-optimization

我正在使用 MySQL 并有一个`user_data`这样的表：

```
user_id         int(10) unsigned
reg_date        int(10) unsigned
carrier         char(1) 
```

reg_data 是注册时间的 unix 时间戳（可以是一天中的任何一秒），运营商是运营商的类型，其可能值只能是“D”、“A”或“V”。

我需要编写一个sql语句来选择从2013/01/01到2013/01/31的每一天不同运营商的注册用户数。所以理想的结果可能是：

```
2013/01/01   D   10
2013/01/01   A   31
2013/01/01   V   24
2013/01/02   D    9
2013/01/02   A   23
2013/01/02   V   14
....
2013/01/31   D   11
2013/01/31   A   34
2013/01/31   V   22 
```

谁能帮我解决这个问题？我需要给出最好的答案，这意味着我可以在必要时添加索引，但我需要保持查询的效率。

目前，我在 (reg_date,carrier) 上创建了一个索引并使用以下查询：

```
select FROM_UNIXTIME(reg_date, "%M %D %Y") as reg_day, carrier, count(carrier) as user_count
from user_data
where reg_date >= UNIX_TIMESTAMP('2013-01-01 00:00:00') and reg_date < UNIX_TIMESTAMP('2013-02-01 00:00:00')
group by reg_day, carrier
order by reg_date; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:21:42.677

如果您无法更改表格（存储单个日期会有所帮助），则只能使用索引，然后：

创建一个复合索引：`carrier, reg_date`，然后按 分组`carrier, reg_date`和排序`reg_date, carrier`。

您可以仅为时间戳创建其他索引（它可能更适合 WHERE 原因，具体取决于您在范围之外的记录数）。

此外，您可以使用完全 unix 时间戳，然后将其嵌入为子查询，外部可以将时间戳转换为人类可读的日期（这样转换是在组**之后**完成的，而不是针对每个单独的记录）。

创建索引：

```
CREATE INDEX bytime ON user_data (reg_date);
CREATE INDEX daily_group ON user_data (carrier, reg_date); 
```

询问：

```
SELECT FROM_UNIXTIME(reg_day, "%M %D %Y") AS reg_day
    , carrier
    , user_count
FROM (
    SELECT FLOOR(reg_date / (60 * 60 * 24)) AS reg_day
        , carrier
        , count(carrier) AS user_count
    FROM user_data
    WHERE reg_date >= UNIX_TIMESTAMP('2013-01-01 00:00:00')
        AND reg_date < UNIX_TIMESTAMP('2013-02-01 00:00:00')
    GROUP BY carrier, reg_day
    ORDER BY reg_day, carrier
    ) AS a; 
```

# pandas - 使用 Apply 访问 Pandas 数据框中前一天的行

> ID：15610805
> 
> 赞同：2
> 
> 时间：2013-03-25T08:50:10.157
> 
> 标签：pandas

我是 pandas 的新手，我正在尝试使用**昨天**的收盘价和**今天**的价格对每一行进行计算。IE：

```
for 2011-07-26:
    new_column = max(df.high['2011-07-25'], df.close['2011-07-26']) 
```

我考虑过使用遍历所有行，但认为使用 df.apply 函数会更有效。但是，我无法弄清楚如何从我的函数中访问前几天的收盘价。

这是我的数据框的片段。

```
 open    high     low   close
date                                      
2011-07-22  1597.6  1607.7  1597.5  1601.5
2011-07-25  1618.2  1620.3  1609.4  1612.2
2011-07-26  1610.7  1617.5  1608.0  1616.8 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:31:27.487

你可以先做一个[`shift`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.shift.html)：

```
In [8]: df['yesterday_high'] = df['high'].shift()

In [9]: df
Out[9]: 
              open    high     low   close  yesterday_high
date                                                      
2011-07-22  1597.6  1607.7  1597.5  1601.5             NaN
2011-07-25  1618.2  1620.3  1609.4  1612.2          1607.7
2011-07-26  1610.7  1617.5  1608.0  1616.8          1620.3 
```

然后你可以取昨天_high 和 close 列的最大值：

```
In [11]: df[['yesterday_high', 'close']].max(axis=1)
Out[11]: 
date
2011-07-22    1601.5
2011-07-25    1612.2
2011-07-26    1620.3

In [12] df['new_col'] = df[['yesterday_high', 'close']].max(axis=1) 
```

或者：

```
In [13]: df.apply(lambda x: max(x['yesterday_high'], x['close']), axis=1)
Out[13]: 
date
2011-07-22    1601.5
2011-07-25    1612.2
2011-07-26    1620.3 
```

# android - 在 ListView 中预填充 CheckedTextViews

> ID：15610807
> 
> 赞同：1
> 
> 时间：2013-03-25T08:50:11.507
> 
> 标签：android, android-listview, android-cursor, checkedtextview

这是我在 StackOverFlow 上的第一个问题，我通常总是自己找到答案，但我真的陷入了一个奇怪的问题，我将在这里解释：

我在片段活动中实现了一个 ListView，这个 listview 包含一个与我从 SQLLite 数据库获得的当前记录相关的类别列表。

一切正常，我创建了一个 SimpleCursorAdapter 来从数据库中检索数据，并在 ListView 中正确显示类别。问题与复选框的预填充有关（它是一个多选列表），这取决于我如何尝试预先检查复选框，我得到 2 种情况：

首先，复选框已预先选中，但我无法再通过单击它们来切换复选框。其次，单击可以很好地切换复选框，但是不再预先检查它们...

这是我遇到问题的代码部分：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    //super.onCreate(savedInstanceState);
    View v = inflater.inflate(R.layout.rate_fragment, container,false);

    dbCategories = "";
    displayCategories = resources.getText(R.string.no_categories).toString();

    /** INITIALIZATION */
    mViewSwitcher = (ViewSwitcher)v.findViewById(R.id.profileSwitcher);

    /** Edition view */
    rateGroup = (RadioGroup)v.findViewById(R.id.rate_group);
    rateOne = (RadioButton)v.findViewById(R.id.one_button);
    rateOne.setTag(1);
    rateTwo = (RadioButton)v.findViewById(R.id.two_button);
    rateTwo.setTag(2);
    rateThree = (RadioButton)v.findViewById(R.id.three_button);
    rateThree.setTag(3);
    rateFour = (RadioButton)v.findViewById(R.id.four_button);
    rateFour.setTag(4);
    rateFive = (RadioButton)v.findViewById(R.id.five_button);
    rateFive.setTag(5);

    descET = (EditText)v.findViewById(R.id.editdescription);
    descTextSize = descET.getTextSize();
    descET.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {

        }
    });

    categoriesTV_edit = (TextView)v.findViewById(R.id.edit_categories);
    categoriesBT = (Button) v.findViewById(R.id.select_categories);
    categoriesBT.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

            View categoriesListTitle = getActivity().getLayoutInflater().inflate(R.layout.category_list_title, null);
            AlertDialog.Builder alt_bld = new AlertDialog.Builder(v.getContext()).setCustomTitle(categoriesListTitle);

            categories = db.getAllCategoriesByRate(currentRate);
            categoriesList = new ListView(getActivity());
            categoriesList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);                
            categoriesList.setClickable(true);

            String[] fromColumns = new String[] {
                    DatabaseHandler.CATEGORY_NAME
            };
            int[] toViews = new int[]{
                    R.id.cat_checked
            };

            //mAdapter = new SimpleCursorAdapter(getActivity(), android.R.layout.simple_list_item_multiple_choice, categories, fromColumns, toViews, 0);
            mAdapter = new SimpleCursorAdapter(getActivity(), R.layout.category_item, categories, fromColumns, toViews, 0);

            mAdapter.setViewBinder(new ViewBinder() {
                public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

                    if (columnIndex == 1) {                     

                        CheckedTextView categRow = (CheckedTextView) view;

                        String catName = cursor.getString(1);
                        mAdapter.setViewText((TextView) view, catName);

                        int catChecked = cursor.getInt(2);
                        //boolean checkedCat = catChecked==1;
                        //categoriesList.setItemChecked(cursor.getPosition(),checkedCat);
                        categRow.setChecked(catChecked==1);

                        int catID = cursor.getInt(0);
                        categRow.setTag(catID);
                        return true;
                    }
                    else {
                        return false;
                    }
                }
            });

            categoriesList.setAdapter(mAdapter);

            alt_bld.setView(categoriesList); 
```

有一种情况或另一种情况，都取决于这两条线：

```
//boolean checkedCat = catChecked==1;
//categoriesList.setItemChecked(cursor.getPosition(),checkedCat); 
```

如果它们被评论，则不会预先选中复选框，但点击的切换是有效的。但是，如果我将这些行注释掉，则切换将不再起作用，但会预先检查类别。

我也不明白的是这条线不起作用：

```
 categRow.setChecked(catChecked==1); 
```

但是这个运行良好（我成功检索了标签）：

```
 categRow.setTag(catID); 
```

所以我希望有人能成功地向我解释我做错了什么，我想我在这里误解了一些东西......

**注意**：我从光标“类别”中得到 3 列，第一列是类别的 ID，第二列是名称，第三列是状态：检查与否（1 或 0）。

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T06:22:21.557

最后我最终创建了自己的自定义适配器，这样我至少可以更容易地理解正在发生的事情。

实际上，我必须创建几个多选列表，其中一些填充了数据库中的数据，另一些填充了共享首选项。

对于这个显示来自数据库的数据，我创建了以下适配器（我注释掉了有关图标的行，因为我还没有设置它们）：

```
public class CategoriesLVAdapter extends BaseAdapter {
private Context mContext;
private LayoutInflater mInflater;
private List<Category> categoriesList;

// Constructor
public CategoriesLVAdapter(Context c, List<Category> categories_list){
    mContext = c;
    mInflater = LayoutInflater.from(c);
    categoriesList = categories_list;
}

public List<Category> getCategoriesList(){
    return categoriesList;
}

@Override
public int getCount() {
    return categoriesList.size();
}

@Override
public Object getItem(int position) {
    return categoriesList.get(position);
}

@Override
public long getItemId(int position) {
    return categoriesList.get(position).getID();
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder = null;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.categories_list_row, null);
        //convertView.setLayoutParams(new ListView.LayoutParams(200, 90));
        holder = new ViewHolder();
        holder.title = (TextView) convertView.findViewById(R.id.categories_list_row_tv);
        //holder.icon = (ImageView) convertView.findViewById(R.id.categories_list_row_iv);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();         
    }

    //holder.icon.setImageResource(categoriesList.get(position).getDrawableID());
    //holder.icon.setAdjustViewBounds(true);  
    //holder.icon.setScaleType(ImageView.ScaleType.CENTER_CROP);        
    holder.title.setText(categoriesList.get(position).getName());

    return convertView;
}

static class ViewHolder {
    TextView title;
    //ImageView icon;
} 
```

}

在我的活动中，当调用 AlertDialog 来填充 ListView 时，我使用此适配器，然后我使用共享首选项中保存的最后一个类别预先选择类别：

```
private void categoriesFilter(){
    AlertDialog.Builder alt_bld = new AlertDialog.Builder(this);
    alt_bld.setTitle(resources.getText(R.string.select_categories).toString());

    LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);   
    View layout = inflater.inflate(R.layout.categories_list,(ViewGroup) findViewById(R.id.categories_layout_root));
    categoriesLV = (ListView) layout.findViewById(R.id.categories_list);

    alt_bld.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            String selectedCategoriesString = getSelectedValues(categoriesLV);

            //Update the shared preferences
            prefs.edit().putString(RateDayApplication.PREF_KEY_CATEGORIES, selectedCategoriesString).commit();

            updateFilterDisplay(resources.getText(R.string.cat_title).toString(), selectedCategoriesString, searchedCategoriesTV, "Category");
        }
    });

    alt_bld.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            dialog.cancel();
        }
    });

    String selectedCategoriesString = prefs.getString(RateDayApplication.PREF_KEY_CATEGORIES, new String());
    categoriesLV.setAdapter(new CategoriesLVAdapter(this, categoriesList));

    String[] selectedCategoriesArray = selectedCategoriesString.split(",");

    int categoriesLVLength = categoriesLV.getCount();
    for(int i = 0; i < categoriesLVLength; i++){
        int categoryID = ((Category) categoriesLV.getItemAtPosition(i)).getID();
        if(Arrays.asList(selectedCategoriesArray).contains(String.valueOf(categoryID))){
            categoriesLV.setItemChecked(i, true);
        }
    }

    alt_bld.setView(layout);

    AlertDialog alert = alt_bld.create();   
    alert.show();
} 
```

最后，这是我从数据库处理程序中调用以获取类别列表的函数：

```
// Getting All Categories By ID desc
    public List<Category> getCategoriesList() {
        String selectQuery = "SELECT " + CATEGORY_ID + ", " + CATEGORY_NAME + " FROM " + CATEGORY_TABLE + " ORDER BY " + CATEGORY_ID + " ASC";
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null); 

        List<Category> categoriesList = new ArrayList<Category>();//String[] categoriesList = {};

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Category category = new Category(cursor.getInt(0), cursor.getString(1), false);
                categoriesList.add(category);
            } while (cursor.moveToNext());
        }

        cursor.close();
        db.close();
        return categoriesList;
    } 
```

我认为我之前的问题是因为“setItemChecked”函数有点误导，因为这并不意味着一定要检查任何东西。当您使用“setItemChecked”功能时，列表视图中的项目会被选中，有或没有复选框（我的行只包含文本视图）。

在我的列表中选择的行以不同的颜色显示，我认为这对于简单的多选列表来说已经足够了。

我使用的布局非常简单，“categories_list”在 LinearLayout 中包含 ListView，“categories_list_row”在 LinearLayout 中包含 TextView。

希望它可以指导某人！

# ssas - 使用 2 个艺术属性来命名层次结构中的 1 个属性

> ID：15610815
> 
> 赞同：0
> 
> 时间：2013-03-25T08:50:35.080
> 
> 标签：ssas, hierarchy

我正在 ssas 中处理维度层次结构。

## 方面：

Dim_Account

ID

Account_Code

Account_Desc

Account_Group_Code

Account_Group_Desc

## 假设层次结构中有 2 个级别：

Account_Group_Code

Account_Code

我希望将显示的名称是“代码”，后跟“描述”（描述）。

## 例如：

101-组1

.....10111-账户1

.....10112-Account2

102-Group2

.....10211-帐号3

.....10212-Account4

我只能将其更改为代码或描述例如：

101

.....10111

.....10112

或者

第 2 组

.....帐号3

.....帐户4

我可以使用什么属性来完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:42:52.083

最简单的方法是更改​​构建维度的 SQL 视图（或命名查询）。添加一个用于连接代码和描述的字段。在您的维度中使用这个新字段。

# c++ - 带数组索引的函数调用

> ID：15610818
> 
> 赞同：0
> 
> 时间：2013-03-25T08:50:47.743
> 
> 标签：c++

我在下面提到的那种代码中遇到了一个带有函数调用和数组索引的语句。在这个语句中，s=o.init()[-1] 的返回值是 a1[0]。我不清楚它是如何工作的，这个语句 o.init()[-1] 会做什么？我知道 0.init() 会调用函数但是 [-1] 指定了什么? 请帮忙解决这个问题？

```
#include<iostream>
using namespace std;

class a
{
  char a1[1000];

  public:
  a()
 {
    a1[0]='a';
 }
  char* init()
  {
     cout<<"value of a1 is"<<a1<<endl;
     return a1+1;
  }
};

int main()
{
   a o;
  char s;
  s=o.init()[-1];

cout<<"value of s  is"<<s<<endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:54:12.180

`init()`返回指向 的指针`a1[1]`。`o.init()[-1];`从该指针中减去 1（因此，你得到一个指向 的指针`a1[0]`）并取消引用它，你得到`a1[0]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:53:49.957

init 返回一个 char* 所以 init()[-1] 只会在内存中将指针向后取一个字符。

想象一下：

```
char* arr = o.init(); 
```

接着：

```
arr--; 
```

如您所见，您的函数返回数组+1，因此为了获取“a”，或者更确切地说是第一个值，您必须后退一步

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T08:53:56.897

该*方法*的返回值为`char*`. 所以索引运算符从地址中减一，并取消引用它。

# python - 在pandas MultiIndex中重命名一个级别的一个项目

> ID：15610819
> 
> 赞同：5
> 
> 时间：2013-03-25T08:50:49.690
> 
> 标签：python, pandas

我有一个类似于以下结构的 pandas DataFrame：

```
Name    Location    Position   Data1    Data2
Foo     loc1        12345      present  absent
Foo2    loc2        67890      absent   present 
```

其中`Name`和是 MultiIndex 级别`Location`。`Position`但是我需要重命名索引的一个级别：对于这个例子，我需要更改`Foo2`为`Bar`.

我认为`DataFrame.rename()`会做这项工作，但是如果我指定

```
new_df = old_df.rename(index={"Foo2": "Bar"}) 
```

它并没有真正改变索引，更糟糕的是，它使索引变平。

我想做的事可能吗？还是我遇到了熊猫虫？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T19:16:42.713

该`rename`函数应将字典转换为映射器并将其应用于每个索引。但是，对于这种`MultiIndex`情况，它只遍历每个元组而不是每个索引。我已经修复它并提出了[拉取请求](https://github.com/pydata/pandas/pull/3175)。

# java - 如何为以下地图指定比较器

> ID：15610828
> 
> 赞同：2
> 
> 时间：2013-03-25T08:51:17.100
> 
> 标签：java

如何为以下地图指定比较器

```
ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], Object>>> myIndex; 
```

以下声明是否正确

```
myIndex = new ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], ConcurrentSkipListMap<byte[], Object>>>(new MyCustomComparator) 
```

此比较器是否适用于内部 ConcurrentSkipListMap

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:00:07.320

不，它不适用于内部 ConcurrentSkipListMap。当您创建内部地图的实例时，您必须将其传递给内部 ConcurrentSkipListMap() 的构造函数。

# android - 如何将按钮添加到列表视图？

> ID：15610829
> 
> 赞同：0
> 
> 时间：2013-03-25T08:51:19.463
> 
> 标签：android, listview

`ListActivity`我使用and创建了一个列表视图`Adapter`，我想做的是添加按钮。按钮的个数是动态的，实际上在之前的activity中用户可以设置要添加的按钮个数。所以我不能使用布局。下面给出了创建我的 listView 的代码

```
public class AppList extends ListActivity {

    private String[] mStrings = (String[]) GridViewAppInfoAdapter.lApplication
            .toArray(new String[GridViewAppInfoAdapter.lApplication.size()]);

    public void setApplication() {
        for (int i = 0; i < GridViewAppInfoAdapter.lApplication.size(); i++) {
            mStrings[i] = GridViewAppInfoAdapter.lApplication.get(i).toString();

        }

    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.d("toto", "la valeur de app" + GridViewAppInfoAdapter.lApplication);
        //setContentView(R.layout.listview);
        // setApplication();
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_multiple_choice, mStrings);

        setListAdapter(adapter);
        ListView listView = getListView();
          listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:03:25.920

使用自定义适配器在android中动态地将按钮设置为所有列表值

主文件

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
    android:layout_width="fill_parent"
            android:layout_height="fill_parent">

            <ListView android:layout_height="wrap_content"
                            android:layout_below="@+id/EditText01"
     android:layout_width="wrap_content"
                            android:id="@+id/ListView01">
     </ListView>

    </RelativeLayout> 
```

listview.xml //自定义布局以动态添加按钮和文本到ListView

```
 <?xml version="1.0" encoding="utf-8"?>

     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_height="wrap_content"
      android:gravity="left|center"
            android:layout_width="fill_parent"
       android:paddingBottom="5px"
            android:background="#fff200"
            android:paddingTop="5px"
         android:paddingLeft="5px">

            <Button android:id="@+id/Button01"
                            android:layout_width="wrap_content"
         android:layout_height="wrap_content">
            </ImageView>

                <TextView android:id="@+id/TextView01"
                            android:layout_width="wrap_content"
        android:layout_height="wrap_content"
                            android:textSize="20px"
                            android:textStyle="bold"
                            android:layout_marginLeft="10px"
            android:textColor="#0099CC">
            </TextView>

             </LinearLayout> 
```

MainActivity.java

```
 public class CustomListViewSearchOnButtonClick extends Activity
      {
            EditText edittext;
            ListView listview;
            Button search;

            String[] text = { "One", "Two", "Three", "Four", "Five", "Six", "Seven",
                                                            "Eight", "Nine", "Ten" };

            int textlength = 0;
            ArrayList<String> text_sort = new ArrayList<String>();

            public void onCreate(Bundle savedInstanceState)
        {

                            super.onCreate(savedInstanceState);
                            setContentView(R.layout.main);

                            listview = (ListView) findViewById(R.id.ListView01);
                            listview.setAdapter(new MyCustomAdapter(text, image));

       listview.setAdapter(new MyCustomAdapter(text_sort));

                                            }

                            });

            } 
```

MyCustomAdapter.java

```
 class MyCustomAdapter extends BaseAdapter
       {

                            String[] data_text;

                            MyCustomAdapter()
                     {

                            }

                            MyCustomAdapter(String[] text)
                             {
                                            data_text = text;

                            }

                                               MyCustomAdapter(ArrayList<String>text,
       ArrayList<Integer>image)
               {
                                            data_text = new String[text.size()];

                                            for (int i = 0; i < text.size(); i++) {
                                                            data_text[i] = text.get(i);

                                            }

                            }

                            public int getCount()
        {
                                            return data_text.length;
                            }

                            public String getItem(int position)
           {
                                            return null;
                            }

                            public long getItemId(int position)
            {
                                            return position;
                            }

                            public View getView(int position, View convertView, ViewGroup parent)
      {

                                            LayoutInflater inflater = getLayoutInflater();
                                            View row;

                                            row = inflater.inflate(R.layout.listview, parent, false);

                                            TextView textview = (TextView) row.findViewById(R.id.TextView01);
                                            Button button= (ImageView) row
                                                                            .findViewById(R.id.Button01);

                                            textview.setText(data_text[position]);
                                            imageview.setImageResource(data_image[position]);

                                            return (row);

                            }
            }
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:59:11.807

使用自定义适配器，您可以轻松地在布局中添加按钮。您也可以参考本教程。

[教程](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# javascript - 使用 jQuery 处理鼠标左键和右键的点击

> ID：15610833
> 
> 赞同：3
> 
> 时间：2013-03-25T08:51:30.600
> 
> 标签：javascript, jquery, event-handling

我想用 jQuery 计算链接的点击次数。如果用鼠标左键单击链接，它可以正常工作。但如果使用右键，它也应该可以工作。这是代码：

```
<a href="http://example.com" class="itemLink" data-count-url="/239/klicks">

$(".itemLink").on("click", function(event) {
   $.ajax({
     type: 'POST',
     url: $(event.target).attr("data-count-url")
   })
}); 
```

据我所知`click`，应该使用左右按钮。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:54:31.890

使用`mousedown`事件而不是`click`事件并实现所有需要的行为

[jQuery如何区分鼠标左键单击和右键单击](https://stackoverflow.com/questions/1206203/how-to-distinguish-between-left-and-right-mouse-click-with-jquery)

```
$('.itemLink').mousedown(function(event) {
    switch (event.which) {
        case 1:
            alert('Left mouse button pressed');
            break;
        case 2:
            alert('Middle mouse button pressed');
            break;
        case 3:
            alert('Right mouse button pressed');
            break;
        default:
            alert('You have a strange mouse');
    }
}); 
```

# visual-studio-2012 - 如何更改 Metro 应用程序 WINJS Sqlite 数据库路径

> ID：15610837
> 
> 赞同：0
> 
> 时间：2013-03-25T08:51:47.583
> 
> 标签：visual-studio-2012, sqlite, microsoft-metro, windows-runtime, winjs

我正在使用 HTML5 和 Javascript 开发 windows8 应用程序。我正在使用由 GIT HUB [https://github.com/doo/SQLite3-WinRT](https://github.com/doo/SQLite3-WinRT)提供的 SQLite3-WinRT 数据库插件。

我已经成功地将插件集成到我的应用程序中，并且它的工作方式很迷人，现在的问题是我想更改数据库路径

```
var dbPath = Windows.Storage.ApplicationData.current.localFolder.path + '\\database.sqlite'; 
```

至

```
var dbPath = \pages\js\ + '\\database.sqlite'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:04:24.687

那么这条路将是`Windows.ApplicationModel.Package.current.installedLocation.path + "\\pages\\js\\database.sqlite"`

但是，您应该知道您不能写入此位置，只需将其用作只读数据库即可。[`ATTACH`](http://www.sqlite.org/lang_attach.html)如果除了拥有读写数据库之外，还想从预配置数据库中读取数据，请查看该命令。

# java - IE9 中的 SelectInputDate 和 inputFile 问题

> ID：15610838
> 
> 赞同：0
> 
> 时间：2013-03-25T08:51:50.837
> 
> 标签：java, icefaces

我是 Java 和 IceFaces 的新手。我有一个使用 icefaces 的网站，它`selectInputDate()`不适`inputfile`用于`IE9`除我之外的任何用户。唯一可观察到的区别是我们位于不同的国家。

是否还有其他与上述两个相同的组件？或者有人知道`IE9`可能导致这种情况的任何设置吗？

我在谷歌上研究过这个问题没有任何成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:11:48.650

将 f:convertDatTime 添加为 selectInputDate 的子项： `<f:convertDateTime pattern="#{dateFormat}" timeZone="#{timeZone}" locale=#{locale} />`

# mediawiki - 如何提供指向特定命名空间的“创建页面”链接？

> ID：15610839
> 
> 赞同：0
> 
> 时间：2013-03-25T08:51:54.507
> 
> 标签：mediawiki

对于大多数“普通”人来说，要理解 MediaWiki 中的整个“命名空间”是什么并不容易。我想为他们提供一个链接，以便在特定命名空间中创建页面，而无需担心他们了解正在发生的事情。

一些喜欢：

> 如果您想为您的项目创建一个页面，请单击此处：**MySpecialNamespace-Create-Link**

然后应该有一个页面，他们可以填写页面名称，并且它会自动位于正确的命名空间中。这很容易吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:55:20.857

你可以简单地使用`<inputbox>`来实现这一点。请参阅MediaWiki 上的[扩展描述](http://www.mediawiki.org/wiki/Extension%3aInputBox)页面。

这是一个例子。单击“创建页面”按钮会将您带到`Namespace:DefaultPageName`. [在这里](https://en.wikipedia.org/wiki/User%3aBencmq/sandbox)查看它的实际应用。

```
<inputbox>
type=create
default=DefaultPageName
prefix=Namespace:
buttonlabel=create page
bgcolor=#f0f0ff
width=50
break=no
</inputbox> 
```

您可以使用更多参数来使其变得更好。MediaWiki 上的文档非常简单。

# sql - 将 varchar 值“SELECT”转换为数据类型 tinyint 时转换失败

> ID：15610841
> 
> 赞同：0
> 
> 时间：2013-03-25T08:52:01.490
> 
> 标签：sql, sql-server-2008-r2

我正在尝试获取特定行的列的值，但出现以下错误。我不知道有什么问题。这是我的sql查询：

```
declare @Service_Table varchar(30),
        @Ser_Id tinyint,
        @sql  nvarchar(100), 
        @Service_State tinyint

SET @Service_Table='Third_Party_Assistance'
set @Ser_Id = 2
SET @sql = 'SELECT ' + @Service_State + '=  Service_State_Id FROM dbo.' + 
          quotename(@Service_Table) + ' WHERE Service_Id = ' + 
          convert(varchar,@Ser_Id) + 'AND Service_State_Id <> 4'
EXEC sp_executesql @sql 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T08:58:22.850

您没有为 @Service_State 变量分配任何值！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:22:36.557

使用带 OUTPUT 参数的[sp_executesql系统存储过程](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

```
declare @Service_Table varchar(30),
        @Ser_Id tinyint,
        @sql  nvarchar(4000), 
        @Service_State tinyint

SET @Service_Table='Third_Party_Assistance'
SET @Ser_Id = 2
SET @sql = 'SELECT @Service_State =  Service_State_Id FROM dbo.' + 
            quotename(@Service_Table) + ' WHERE Service_Id = ' +
            '@Ser_Id AND Service_State_Id <> 4'
EXEC sp_executesql @sql, N'@Ser_Id tinyint, @Service_State tinyint OUTPUT', @Ser_Id, @Service_State OUTPUT
SELECT @Service_State 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T08:54:56.260

你不是已经问过这个问题了吗？声明在哪里？

尝试投射@Service_State：`cast(@Service_State) as varchar(255))`

```
declare @Service_Table varchar(30),
        @Ser_Id tinyint,
        @sql  nvarchar(30), 
        @Service_State tinyint

SET @Service_Table='Third_Party_Assistance'
set @Ser_Id = 2
SET @sql = 'SELECT ' + cast(@Service_State as varchar(255))+ '=  Service_State_Id FROM dbo.' + 
          quotename(@Service_Table) + ' WHERE Service_Id = ' + 
          convert(varchar,@Ser_Id) + 'AND Service_State_Id <> 4)' 
```

# jquery - 将 css 运行时添加到表行和数据绑定行

> ID：15610845
> 
> 赞同：1
> 
> 时间：2013-03-25T08:52:13.323
> 
> 标签：jquery, css, knockout.js

我真的不知道如何解决。但是，我非常接近解决方案，现在只需要您专家的一点帮助。我的工作小提琴在[这里](http://jsfiddle.net/Jq3ru/81/)。当页面加载时，选中了 2 个复选框。我的视图绑定如下

```
 <tbody data-bind="foreach: dataOne">
    <tr  data-bind="css: { 'makeBold': $root.duplicates.indexOf(name1) !== -1 }" >
        <td data-bind="text: id"></td><td >&nbsp;&nbsp;&nbsp;</td>
        <td data-bind="text: display"></td><td >&nbsp;&nbsp;&nbsp;</td>
        <td>&nbsp;</td>
        <td>
            <input type="checkbox" data-bind="checked: $root.duplicates.indexOf(name1) !== -1" />
        </td>
    </tr>
</tbody> 
```

我的视图模型如下

```
var data1 = [{
name1: "one",
id: 1,
display: "Test1"
}, {
 name1: "two",
id: 2,
 display: "Test2"
}, {
name1: "three",
id: 3,
 display: "Test3"
}];
var data2 = [{
name2: "five"
}, {
name2: "two"
}, {
name2: "three"
}];

var viewModel = {
dataOne: ko.observableArray(data1),
dataTwo: ko.observableArray(data2),
duplicates: ko.observableArray()

};

 viewModel.dataTwo.push({
  name: "four"
  }); //add one on the end

  var flattenedOne = ko.utils.arrayMap(viewModel.dataOne(), function (item) {

     return item.name1;
   });

  var flattenedTwo = ko.utils.arrayMap(viewModel.dataTwo(), function (item) {

   return item.name2;
  });

  var differences = ko.utils.compareArrays(flattenedOne, flattenedTwo);
    //return a flat list of differences
  ko.utils.arrayForEach(differences, function (difference) {
   if (difference.status === 'retained') {
      viewModel.duplicates.push(difference.value);
    }
   }); 
```

现在，当用户单击更新按钮时，它再次加载数据，现在选中了 3 个复选框。我想要实现的是

1.  当用户单击更新按钮时，它应该将 css 添加到表行并且只将该行加粗。

2.  当用户单击更新按钮时，它不应该选中复选框。

因此，在我们的示例中，当用户单击更新按钮时，它应该将行设置为粗体，但不应选中复选框。因此，单击更新按钮时，只有第一行会是粗体。目前，当页面加载时，它会将 2 行加粗并检查哪个是错误的。它应该使行粗体只单击更新按钮。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:29:34.350

希望这能解决您的问题。

检查这个[小提琴](http://jsfiddle.net/naveenkumarm/TaF8W/2/)

```
I have given separate condition using another observable . 
```

html:-

```
<table>
<tbody data-bind="foreach: dataOne">
    <tr  data-bind="css: { 'makeBold': $root.duplicates.indexOf(name1) !== -1 }" >
        <td data-bind="text: id"></td><td >&nbsp;&nbsp;&nbsp;</td>
        <td data-bind="text: display"></td><td >&nbsp;&nbsp;&nbsp;</td>
        <td>&nbsp;</td>
        <td>
            <input type="checkbox" data-bind="checked: $root.checkDuplicate.indexOf(name1) !== -1" />
        </td>
    </tr>
</tbody>
</table>
<button class="btn" data-bind="click: $root.UpdateData"> Update </button> 
```

脚本：-

```
 var data1 = [{
  name1: "one",
  id: 1,
  display: "Test1"
 }, {
  name1: "two",
  id: 2,
  display: "Test2"
 }, {
  name1: "three",
  id: 3,
  display: "Test3"
 }];
var data2 = [{
  name2: "five"
 }, {
 name2: "two"
 }, {
  name2: "three"
 }];

var viewModel = {
 dataOne: ko.observableArray(data1),
 dataTwo: ko.observableArray(data2),
 duplicates: ko.observableArray(),
 checkDuplicate : ko.observableArray() // new observable to handle condition

};

viewModel.UpdateData = function(){
  data2 = [{
     name2: "one"
  }, {
     name2: "two"
  }, {
     name2: "three"
  }];

 viewModel.dataTwo(data2);

 var flattenedOne = ko.utils.arrayMap(viewModel.dataOne(), function (item) {

   return item.name1;
 });

 var flattenedTwo = ko.utils.arrayMap(viewModel.dataTwo(), function (item) {
   return item.name2;
 });

 var differences = ko.utils.compareArrays(flattenedOne, flattenedTwo);
//return a flat list of differences
ko.utils.arrayForEach(differences, function (difference) {

  if (difference.status === 'retained' && viewModel.checkDuplicate().indexOf(difference.value) == -1 ) {
     viewModel.duplicates.push(difference.value);
  }
  });

};   

viewModel.dataTwo.push({
  name: "four"
 }); //add one on the end

 var flattenedOne = ko.utils.arrayMap(viewModel.dataOne(), function (item) {
  return item.name1;
 });

 var flattenedTwo = ko.utils.arrayMap(viewModel.dataTwo(), function (item) {
  return item.name2;
 });

  var differences = ko.utils.compareArrays(flattenedOne, flattenedTwo);
   //return a flat list of differences
  ko.utils.arrayForEach(differences, function (difference) {
    if (difference.status === 'retained') {
      viewModel.checkDuplicate.push(difference.value);
    }
  });

 ko.applyBindings(viewModel); 
```

# android - 安卓手机中的时钟刻度

> ID：15610850
> 
> 赞同：0
> 
> 时间：2013-03-25T08:52:42.743
> 
> 标签：android, android-service, system-clock

我们正在开发一个分布式系统数据库同步，它依赖于实时。

由于用户或网络故障可以更改设备的时间，因此很容易损坏整个数据库。所以我们决定从Master服务器获取时间，存储起来，通过计算时钟滴答数来计算经过的时间间隔，计算出实时时间。我们如何才能访问硬件的时钟滴答。我们是否必须为此运行一些服务？我们希望即使在设备处于待机/睡眠/关闭状态时也能计算滴答声。就像显示的实际时钟一样。我们希望它是一种并行时钟，只是只有主服务器才能在其上设置时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:08:21.397

> 我们如何才能访问硬件的时钟滴答。

你没有。

> 我们希望即使在设备处于待机/睡眠/关闭状态时也能计算滴答声。

您的用户没有。您的用户希望他们的设备能够正常运行，而不是让一些软件保持 CPU 通电并占用 RAM，只是看着时钟滴答作响，因为那样会很快耗尽电池电量。

也许在您附近的“偏远地区和村庄”情况有所不同。在宇宙的大多数已知部分中，即使您的应用程序没有运行，时间也会流逝。

因此，您不需要“计算滴答声”来确定时间是否过去。相反，当您“从主服务器获取时间”并“存储它”时，您*还*存储了 的当前值`SystemClock.elapsedRealtime()`，即自手机上次重新启动以来的毫秒数。然后，当您需要确定相对于“主服务器”的时间时，计算存储`elapsedRealtime()`值与当前`elapsedRealtime()`值之间的差异，并将该毫秒数与“主服务器的时间”相加得到当前时间正如“主服务器”所见。

# java - 如何使用 Spring Form 标签中的超链接发送表单？

> ID：15610851
> 
> 赞同：1
> 
> 时间：2013-03-25T08:52:47.007
> 
> 标签：java, spring, jsp

实际上我的jsp有弹簧标签，当点击超链接时我正在发送表单。

我的 Jsp 页面是简单的登录页面，当用户在输入用户名（电子邮件）时忘记密码并单击`Forgot password?`邮件将发送目标帐户。

问题是当我们单击`submit`按钮表单将发送但当我单击`forgot password?`超链接表单值时未发送它显示为空。

听到的是我的 Jsp：

```
 <form:form action="login" modelAttribute="LOGIN">

    </form:form>
</fieldset>
<script>
    $('#LOGIN').ajaxForm({
        target : '#body',
        success : function(responseText, statusText, xhr, $form) {
            alert(responseText);
        },
        beforeSubmit : function() {
            $.blockUI({
                message : '<h1> Just a moment...</h1>'
            });
        }
    });
    function submitUserName() {
        $('#LOGIN').submit();
    }
</script> 
```

实际上在我的jsp中我正在编写onclick函数但也没有工作......我的jsp代码有什么错误吗？

请给我建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:12:04.100

在您的情况下，当您单击**忘记密码时，超链接提供标准行为？**浏览器后跟链接。如果你想提交用户名，你应该这样做：

```
<head>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#resend_password_link").click(function(event){
                event.preventDefault(); // interrupt default hyperlink behavior
                $("#LOGIN").attr("action",$(this).attr("href"));
                $("#LOGIN").submit();
            });
        });
    </script>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:36:05.340

将 id 属性添加到此表单标签 - id="loginForm"

```
 <form:form action="login/processLogin" id="loginForm" modelAttribute="LOGIN"> 
```

然后在你的函数中使用 id 提交这个表单

```
function submitUserName() {
    $('#loginForm').submit();
} 
```

发出警报（123）；在函数内部查看它是否出现。如果它没有出现，您确实在页面加载时遇到了 javascript 问题。你需要先解决它们。

我希望这会奏效。

# android - 我的 xml 中的错误

> ID：15610853
> 
> 赞同：0
> 
> 时间：2013-03-25T08:53:06.807
> 
> 标签：android

创建xml文件并报错

渲染期间引发异常：com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup 异常详细信息记录在 Window > Show View > Error Log 找不到以下类：

```
<linearlayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/buttonlayout" android:orientation="horizontal" android:layout_width="fill_parent" android:layout_height="wrap_content" android:height="32dp" android:gravity="left|top" android:background="#2B60DE" android:paddingtop="2dp" android:paddingbottom="2dp">

    <linearlayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/buttonlayout2" android:orientation="horizontal" android:layout_height="wrap_content" android:gravity="left|center_vertical" android:layout_gravity="left" android:layout_width="wrap_content">

        <textview android:id="@+id/txtTest" android:layout_width="fill_parent" android:layout_height="fill_parent" android:textstyle="bold" android:textcolor="#FFFFFF" android:text="@string/app_header" android:textsize="15sp" android:gravity="center_vertical" android:paddingleft="5dp">

    </textview></linearlayout>
    <linearlayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/buttonlayout2" android:orientation="horizontal" android:layout_height="wrap_content" android:gravity="right" android:layout_gravity="right" android:layout_width="fill_parent">

    </linearlayout>

</linearlayout>

<tablelayout android:id="@+id/TableLayout01" android:layout_width="fill_parent" android:layout_height="fill_parent" android:stretchcolumns="*">
    <tablerow android:layout_width="wrap_content" android:layout_height="wrap_content" android:paddingtop="50dp">
    <button android:id="@+id/btnSimple" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="ListView From DB" android:textsize="25sp" android:layout_marginleft="10px" android:layout_marginright="10px" android:layout_marginbottom="5px" android:layout_margintop="5px" android:height="50dp" android:width="50dp"></button>

</tablerow>
<tablerow android:layout_width="wrap_content" android:layout_height="wrap_content" android:paddingtop="50dp">

</tablerow>

</tablelayout> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T08:55:21.783

> 是的，因为标签错误

`linearlayout`这应该是`LinearLayout`

`textview` 这应该是`TextView`

`tablerow`这应该是`TableRow`

`tablelayout`这应该是`TableLayout`

> 尝试了解有关布局的 Android 基础知识

并且还删除第二个 LinearLayout 的命名空间，即为`xmlns:android="http://schemas.android.com/apk/res/android"`孩子删除这个`LinearLayout`

# http - Netty - 访问分块 HTTP 请求的内容 (LittleProxy)

> ID：15610862
> 
> 赞同：1
> 
> 时间：2013-03-25T08:53:44.450
> 
> 标签：http, netty, chunked-encoding, transfer-encoding, http-chunked

我正在使用使用 Netty的[LittleProxy](https://github.com/adamfisk/LittleProxy)拦截 HTTP 请求。但是，现在我想拦截一个显然使用分块传输编码的 Web 服务请求。

HTTP 标头看起来像这样

```
Content-Type -> text/xml; charset=UTF-8
Host -> 192.168.56.1:7897
SOAPAction -> "getSymbols"
Transfer-Encoding -> chunked
User-Agent -> Axis2
Via -> 1.1.tvmbp 
```

如何访问内容？我尝试将 httpChunkAggregator 添加到 littleproxy 代码中的某个管道中，但没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-18T02:15:21.843

您需要在 HttpFiltersSourceAdapter 中覆盖这两个方法。返回非零缓冲区大小。LittleProxy 会自动聚合 httpRequest 和 httpContent 并包装成一个 AggregatedFullHttpRequest，它允许转换为 httpContent。

```
@Override
public int getMaximumRequestBufferSizeInBytes() {
    return 1024 * 1024;
}

@Override
public int getMaximumResponseBufferSizeInBytes() {
    return 1024 * 1024 * 2;
} 
```

然后你可以克隆和读取 HTTP 包中的内容：

```
String cloneAndExtractContent(HttpObject httpObject, Charset charset){
    List<Byte> bytes = new ArrayList<Byte>();
    HttpContent httpContent = (HttpContent) httpObject;
    ByteBuf buf = httpContent.content();
    byte[] buffer = new byte[buf.readableBytes()];
    if(buf.readableBytes() > 0) {
        int readerIndex = buf.readerIndex();
        buf.getBytes(readerIndex, buffer);
    }
    for(byte b : buffer){
        bytes.add(b);
    }
    return new String(Bytes.toArray(bytes), charset);
}

@Override
public HttpResponse clientToProxyRequest(HttpObject httpObject) {
     System.out.println("clientToProxyRequest - to -> "+getRequestUrl());
     System.out.println(cloneAndExtractContent(httpObject, StandardCharsets.UTF_8));

     return null;
}

@Override
public HttpObject serverToProxyResponse(HttpObject httpObject)
{
      System.out.println("serverToProxyResponse <- from - "+getRequestUrl());
      System.out.println(cloneAndExtractContent(httpObject, StandardCharsets.UTF_8));

      return httpObject;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T21:40:13.307

您可以使用 HttpRequestFilter，如下所示：

```
 final HttpProxyServer plain = 
        new DefaultHttpProxyServer(8888, new HttpRequestFilter() {
            @Override
            public void filter(HttpRequest httpRequest) {
                System.out.println("Request went through proxy: "+httpRequest);
            }
        },
        new HttpResponseFilters() {
            public HttpFilter getFilter(String hostAndPort) {
                return null;
            }
        }); 
```

LittleProxy 0.5.3 就是这样。GitHub master 更新为使用 Netty 4，语义会有点不同。

# javascript - 如何在我的选择器中引用 SharePoint 属性？

> ID：15610870
> 
> 赞同：1
> 
> 时间：2013-03-25T08:54:03.263
> 
> 标签：javascript, jquery, sharepoint-2010

我目前在一个页面上显示了 500 个 SharePoint 列表项。有分配给这些列表项的属性，例如“电子邮件”。（在浏览器开发工具中查看列表项时可以看到这些）

当我单击一个按钮时，我想从页面上的可见列表项中提取“电子邮件”详细信息。

目前我有：

```
$('.container:visible').each(function() {
                    emailString += $(this).text() + "; ";
                }); 
```

这实际上将通过可见文本从可见容器中提取数据。

如何仅通过可见容器 EMail 属性提取，以便当我单击按钮时，它会显示所有列表项的电子邮件？

（我已经对点击事件进行了排序，我只需要提取）

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:13:08.620

您必须像这样更改`each`函数内部的选择器：

```
$('.container:visible').each(function() {
    emailString += $(this).attr("EMail") + "; ";
}); 
```

# c++ - 使用 boost::asio 计时器进行线程安全工作

> ID：15610872
> 
> 赞同：0
> 
> 时间：2013-03-25T08:54:11.077
> 
> 标签：c++, boost, boost-asio

我有一个关于 boost asio 计时器和安全线程工作的问题。假设，我有以下课程：

CTest.h：

```
class CTest
{
    boost::asio::io_service io;
    boost::asio::deadline_timer timer;

    void Check();
    CTest ();

    ~CTest ();
}; 
```

和 CTest.cpp：

```
CTest::CTest():
timer (io, boost::posix_time::seconds(0))
{
    timer.async_wait(boost::bind(&CTest::Check, this));
    boost::thread t(boost::bind(&boost::asio::io_service::run, &io));
}

void CTest::Check()
{
    //some work

    m_timer.expires_from_now(boost::posix_time::seconds(10));
    m_timer.async_wait(boost::bind(&CTest::Check, this));

}

CTest::~CTest()
{
     io.stop();
} 
```

那么，问题是如何完成检查线程安全？我的意思是，这个 Check 函数可以在析构函数之后调用，我们会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:43:36.247

使用 io_service::stop() 很少是您想要做的。

几点：

*   保留线程对象，并调用 thread.join() 以确保它是完整的。
*   不要调用 io.stop()，调用 m_timer.cancel() 再调用 m_thread.join() 来清理。
*   考虑使用 shared_ptr 和 weak_ptr 来更干净地管理对象生存期（即：将 weak_ptr 实例绑定到您的 async_wait 回调中而不是裸`this`. 在回调函数中，将 weak_ptr 转换为 shared_ptr ，如果有效则调用该方法。
*   m_timer 将从多个线程中使用，您需要使用互斥锁来管理访问。

只是几点。不会为您重写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:08:17.807

您的析构函数应该停止所有计时器，因此在对象被销毁后不会调用它们：`m_timer.cancel()`。此外，如果您想防止同时调用同一对象的方法，请将您的**boost::bind**包装为**boost::asio::strand::wrap**。查看 asio 文档以获取示例。

# c# - DateTimePicker 控件冻结

> ID：15610874
> 
> 赞同：0
> 
> 时间：2013-03-25T08:54:14.033
> 
> 标签：c#, datetimepicker

我有个问题。我已将 DateTimePicker 的 maxdate 值设置为 31/12/2030。当我实时单击 DateTimePicker 的左上角图标时，控件会自行冻结一段时间，并且在将页面更改为预览月份后，它会自动将日期设置为其 maxdate 值。如果我将最大日期设置为更大的日期（例如 31/12/2100），控制冻结 5-6 秒。怎么了？

*PS：我正在研究 C# WinForms。*

*编辑：*

DateTimePicker 对象称为“dela”。我为这个对象编写的代码是......

```
private void dela_KeyDown(object sender, KeyEventArgs e)
{
    switch(e.KeyCode)
    {
        case Keys.Up:
            KeyUpDown = true;
            break;
        case Keys.Down:
            KeyUpDown = true;
            break;
     }
}
private void dela_ValueChanged(object sender, EventArgs e)
{
    if (KeyUpDown == false)
    {
        SendKeys.Send("Right");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:42:37.390

只是在这里猜测，但可能是您的`dela_ValueChanged`函数在没有设置 KeyUpDown 的情况下被重复调用。所以这意味着它会重复做`SendKeys.Send("Right")`（假设这会改变日期前 1 天？）直到它到达最终日期，当它试图改变它不能改变的最终日期时，它不会改变它的值，从而退出循环.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T05:23:23.200

datetimepicker 的 valuechanged 事件中的 "Sendkeys.send("/")"。

# javascript - 用 JQuery 调用 python 脚本

> ID：15610882
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:54:38.820
> 
> 标签：javascript, jquery, python

有人可以给出一个简短的代码示例，说明如何使用 JQuery 从 Javascript 调用 python 脚本并解析结果，即 Python dict？低于我到目前为止所拥有的，但不起作用。

Python代码（script.py）：

```
def pythonFuntion():
dict = {"val1":"this is x", "val2":True}
return json.dumps(dict) 
```

中级 PHP (intermediate.php)：

```
<?php
  exec("python script.py", $output);
  echo $output;
?> 
```

Javascript：

```
 <script type="text/javascript" src="jquery-1.8.3.js"></script>
  <script type="text/javascript">
   $.ajax({
    url: 'intermediate.php',
    type: 'POST',
    dataType: "json",
    success: function(data){
         alert(obj.val1);
    }
   });
  </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:00:48.993

你的 PHP 看起来不错。问题可能出在您的 JavaScript 代码中。您的*obj*变量未定义。您必须提醒*data.val1*而不是*obj.val1*。

```
<script type="text/javascript" src="jquery-1.8.3.js"></script>
  <script type="text/javascript">
   $.ajax({
    url: 'intermediate.php',
    type: 'POST',
    dataType: "json",
    success: function(data){
         alert(data.val1);
    }
   });
  </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T09:27:19.947

将python文件更改为：

```
import json
def pythonFuntion():
    dict = {"val1":"this is x", "val2":True};
    return json.dumps(dict);
print( pythonFuntion() ); 
```

然后，在 PHP 中；用这个：

```
<?php
  exec("python script.py", $output);
  echo $output[0];
?> 
```

你的 jQuery 就可以了。（刚刚在我的系统上测试过）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T09:01:34.940

可能是success函数出了什么问题，把obj改成data：

```
success: function(data){
     alert(data.val1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:12:17.650

你不能`echo`在 PHP 中使用数组，它只是打印“Array”（如你所见）。你需要这样的东西来打印存储在数组中的每一行：

```
exec("python script.py", $output);
echo implode( "\n", $output ); 
```

此外，正如评论中所确定的，Python 脚本必须实际输出您想要传递给 PHP 的内容，以便`exec()`可以收集它。您不能使用`return`将数据从 Python 传递到 PHP。

# linq - LINQ Join / Union两个对象列表优先于第二个

> ID：15610885
> 
> 赞同：3
> 
> 时间：2013-03-25T08:54:58.293
> 
> 标签：linq, linq-to-sql

我有两个 ActionItem 对象列表：

```
ListA<ActionItem>;
ListB<ActionItem>;

public class ActionItem
{
    #region Public Properties

    public string ConnectionId { get; set; }

    public int MachineId { get; set; }

    public OperationType OperationType { get; set; }

    public MachineOperationStatus OperationStatus { get; set; }

    public string PackageId { get; set; }

    public DateTime StartTime { get; set; }

    public TabType TabType { get; set; }

    public PageType PageType { get; set; }

    #endregion
} 
```

我想加入两个列表 ListA 和 ListB，仅考虑 MachineId 和 PackageId。

```
IEnumerable<ActionItem> collection = this.ListA .Union(this.ListB); 
```

问题是 ListA 可能没有填写所有对象的数据。例如：

```
ListA will have machineId = 19, packageId = "abc" 
```

其余的将是默认值。

```
ListB will have machineId = 19, packageId = "abc", StartTime = "2/3/2012". 
```

所以我想得到 1 行的结果，如下所示：machineId = 19，packageId = "abc"，StartTime = "2/3/2012"。

由于 ListA 缺少信息，因此执行联合操作会返回 2 行而不是 1 行。我希望结果从 ListB 返回信息（因为 ListB 将始终有更多信息，除非 ListB 没有该项目（machineId，packageId））仅在 machineId 和 packageId 上进行加工。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:16:57.320

你可以尝试这样的事情：

```
 //Create one list list containing all records
  var test = listA.Union(listB);

  //Group items based off the MachineId
  var lookup = test.ToLookup(t => new {t.MachineId, t.PackageId});

  //Final List
  var listC = new List<ActionItem>();

  foreach (var item in lookup)
  {
    var newItem = new ActionItem();

    newItem.MachineId = item.Key.MachineId;
    newItem.PackageId = item.Key.PackageId;

    newItem.ConnectionId = item.Max(i => i.ConnectionId);
    newItem.OperationStatus = item.Max(i => i.OperationStatus);
    newItem.OperationType = item.Max(i => i.OperationType);
    newItem.PageType = item.Max(i => i.PageType);
    newItem.StartTime = item.Max(i => i.StartTime);
    newItem.TabType = item.Max(i => i.TabType);

    listC.Add(newItem);
  } 
```

listC 将具有每个项目的组合信息。

# c# - 绑定到对象的属性

> ID：15610887
> 
> 赞同：18
> 
> 时间：2013-03-25T08:54:59.233
> 
> 标签：c#, wpf, mvvm, binding

我想将网格中的**一系列文本框****绑定到****对象的属性中，该对象**本身就是我的 ViewModel（DataContext）中的另一个属性。

 ****`CurrentPerson`由`Name`和`Age`属性组成

**在 ViewModel 内部：**

```
public Person CurrentPerson { get; set ... (with OnPropertyChanged)} 
```

xml:

```
<TextBox Text="{Binding Name}" >
<TextBox Text="{Binding Age}" > 
```

我不确定使用方法，我在网格范围内设置了另一个 DataContext，没有任何结果，还尝试再次设置源和路径，如 Source=CurrentPerson，Path=Age 没有任何结果，这些是试用版，看看是否会有任何变化。

我应该如何做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-25T11:09:01.937

你们`Person`班的成员`Name`和`Age`自己养INPC吗？

如果要更新其中一个`Name`或其中`Age`的值并将其反映在视图中，则需要它们在类中`ViewModel`单独更改属性。`Person`

绑定很好，但视图不会收到来自视图模型的更改通知。还请记住`UpdateSourceTrigger`a`TextBox`默认为`LostFocus`，因此将其设置为将在您键入`PropertyChanged`时更新您的字符串。`ViewModel`

简单的例子：

```
public class Person : INotifyPropertyChanged {
  private string _name;
  public string Name {
    get {
      return _name;
    }

    set {
      if (value == _name)
        return;

      _name = value;
      OnPropertyChanged(() => Name);
    }
  }

  // Similarly for Age ...
} 
```

现在您的 xaml 将是：

```
<StackPanel DataContext="{Binding CurrentPerson}">
  <TextBox Text="{Binding Name}" />
  <TextBox Margin="15"
            Text="{Binding Age}" />
</StackPanel> 
```

或者您也可以按照@Kshitij 的建议进行绑定：

```
<StackPanel>
  <TextBox Text="{Binding CurrentPerson.Name}" />
  <TextBox Margin="15"
            Text="{Binding CurrentPerson.Age}" />
</StackPanel> 
```

并在您输入时更新视图模型：

```
<StackPanel DataContext="{Binding CurrentPerson}">
  <TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" />
  <TextBox Margin="15"
            Text="{Binding Age, UpdateSourceTrigger=PropertyChanged}" />
</StackPanel> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-25T08:57:26.553

尝试这个：

```
<TextBox Text="{Binding CurrentPerson.Name}" />
<TextBox Text="{Binding CurrentPerson.Age}" /> 
```

`.`本质上，您可以使用分隔符深入了解属性。

为了将来参考，如果您想深入了解集合，您可以`MyCollection[x]`像在代码中一样使用（其中 x 将替换为硬编码数字，*而不是变量*）。****

# c# - Action 的通用约束未按预期工作

> ID：15610892
> 
> 赞同：9
> 
> 时间：2013-03-25T08:55:13.007
> 
> 标签：c#, .net, generics, covariance, contravariance

我无法理解为什么以下代码段没有给我错误

```
public void SomeMethod<T>(T arg) where T : MyInterface
{
  MyInterface e = arg;
} 
```

但是这个，由于泛型类型约束，我希望它可以工作

```
private readonly IList<Action<MyInterface>> myActionList = new List<Action<MyInterface>>();

public IDisposable Subscribe<T>(Action<T> callback) where T: MyInterface
{
  myActionList.Add(callback); // doesn't compile
  return null
} 
```

给出这个错误

```
cannot convert from 'System.Action<T>' to 'System.Action<MyInterface>' 
```

我正在使用 VS2012 sp1 和 .NET 4.5。

谁能解释为什么约束不允许编译？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:12:06.913

这是一个逆变问题 - an`Action<MyInterface>`应该能够将任何`MyInterface`实例作为参数，但是您正在尝试存储`Action<T>`where`T`是 的某个子类型`MyInterface`，这是不安全的。

例如，如果您有：

```
public class SomeImpl : MyInterface { }
public class SomeOtherImpl : MyInterface { }
List<Action<MyInterface>> list;

list.Add(new Action<SomeImpl>(i => { }));
ActionMyInterface act = list[0];
act(new SomeOtherImpl()); 
```

如果 type比 type '小'，你只能分配`Action<T>`给 some 。例如`Action<U>``T``U`

```
Action<string> act = new Action<object>(o => { }); 
```

是安全的，因为字符串参数在对象参数所在的位置始终有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T09:12:55.080

Classes and delegates are not the same thing. `System.Action<MyInterface>` represents a function with a single parameter of type `MyInterface` whilst `System.Action<T>` represents a method with a parameter of type `T : MyInterface`. The function signatures are not compatible, it is not relevent that `T` is a derivative of `MyInterface`, the signature would only be compatible if `T` was exactly `MyInterface`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T09:19:29.887

`where T: MyInterface`约束意味着“实现 MyInterface的**任何**类或结构的**任何**实例”。

 **因此，您尝试做的事情可以简化为：

```
Action<IList> listAction = null;
Action<IEnumerable> enumAction = listAction; 
```

哪个不应该工作，而仍然`IList : IEnumerable`. 更多详情可在这找到：

[http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx) [http://msdn.microsoft.com/en-us/library/dd799517.aspx](http://msdn.microsoft.com/en-us/library/dd799517.aspx)

因此，如果您**真的**需要使用泛型而不仅仅是接口 - 您可以这样做，尽管它会增加复杂性和较小的性能问题：

```
public static IDisposable Subscribe<T>(Action<T> callback) where T : MyInterface
{
    myActionList.Add(t => callback((T)t)); // this compiles and work
    return null;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T14:52:22.453

I find it helpful in these situations to consider what goes wrong if you allow the behaviour. So let's consider that.

```
interface IAnimal { void Eat(); }
class Tiger : IAnimal 
{ 
  public void Eat() { ... }
  public void Pounce() { ... } 
}
class Giraffe : IAnimal 
...
public void Subscribe<T>(Action<T> callback) where T: IAnimal
{
   Action<IAnimal> myAction = callback; // doesn't compile but pretend it does.
   myAction(new Giraffe()); // Obviously legal; Giraffe implements IAnimal
}
...
Subscribe<Tiger>((Tiger t)=>{ t.Pounce(); }); 
```

So what happens? We create a delegate that takes a tiger and pounces, pass that to `Subscribe<Tiger>`, convert that to `Action<IAnimal>`, and pass a giraffe, which then pounces.

Obviously that has to be illegal. The only place where it is sensible to make it illegal is the conversion from `Action<Tiger>` to `Action<IAnimal>`. So that's where it is illegal.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T09:39:32.973

类和委托的行为略有不同。让我们看一个简单的例子：

```
public void SomeMethod<T>(T arg) where T : MyInterface
{
  MyInterface e = arg;
} 
```

在这种方法中，您可以假设 T 至少为`MyInterface`，因此您可以执行类似的操作，`MyInterface e = arg;`因为 args 始终可以转换为`MyInterface`。

现在让我们看看代表的行为：

```
public class BaseClass { };
public class DerivedClass : BaseClass { };
private readonly IList<Action<BaseClass >> myActionList = new List<Action<BaseClass>>();

public void Subscribe<T>(Action<T> callback) where T: BaseClass
{
  myActionList.Add(callback); // so you could add more 'derived' callback here Action<DerivedClass>
  return null;
} 
```

现在我们向 myActionList 添加 DerivedClass 回调，然后在某个地方调用委托：

```
foreach( var action in myActionList ) {
   action(new BaseClass);
} 
```

但是你不能这样做，因为如果你有 DerivedClass 回调，你必须将它作为参数传递 DerivedClass。

这个问题是指[Covariance and contravariance](http://en.wikipedia.org/wiki/Covariance_and_contravariance_%28computer_science%29)。你可以从[这篇](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)文章中了解方差，Eric Lippert 也有关于方差的非常有趣的文章，[这](http://blogs.msdn.com/b/ericlippert/archive/2007/10/16/covariance-and-contravariance-in-c-part-one.aspx)是第一篇文章，你可以在他的博客中找到其余的文章。

PS 根据李的评论编辑。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T09:10:21.987

如果`T`无论如何仅限于某个接口，您可以只使用该接口来代替：

```
public void SomeMethod(MyInterface arg)
{
  MyInterface e = arg;
}

private readonly IList<Action<MyInterface>> myActionList = new IList<Action<MyInterface>>();

public IDisposable Subscribe(Action<MyInterface> callback)
{
  myActionList.Add(callback); // does compile
  return null
} 
```

将工作和编译，实际上与您现在拥有的相同。

如果您想对类型进行相同的操作，则泛型很有用，如果您将类型限制为某个接口，则您已经破坏了泛型的目的，并且可能应该只使用该接口。**

# asp.net-mvc-4 - IGenericRepository ：其中 T ：类不工作

> ID：15610894
> 
> 赞同：2
> 
> 时间：2013-03-25T08:55:19.410
> 
> 标签：asp.net-mvc-4

这是我在 mvc4 中的课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;
using System.Web;

namespace xxx.Areas.admin.Models
{
    public interface IGenericRepository<T> : where T : class
    {
        IQueryable<T> AsQueryable();

        IEnumerable<T> GetAll();
        IEnumerable<T> Find(Expression<Func<T, bool>> predicate);
        T Single(Expression<Func<T, bool>>  predicate);
        T SingleOrDefault(Expression<Func<T, bool>> predicate);
        T First(Expression<Func<T, bool>> predicate);
        T GetById(int id);

        void Add(T entity);
        void Delete(T entity);
        void Attach(T entity);
    }
} 
```

但有一些错误：

> *   找不到类型或命名空间名称“where”（您是否缺少 using 指令或程序集引用？）
> *   找不到类型或命名空间名称“T”（您是否缺少 using 指令或程序集引用？）

如何解决？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T09:01:30.593

根据 where generic constraint 中的[msdn 文档](http://msdn.microsoft.com/en-us/library/bb384067.aspx)，您必须这样做：

```
public interface IGenericRepository<T> where T : class 
```

在 IGenericRepository<T> 和 where 之间不能有 :。

# .net - 执行 Excel 宏时出现“类型不匹配”错误

> ID：15610896
> 
> 赞同：0
> 
> 时间：2013-03-25T08:55:29.633
> 
> 标签：.net, excel, excel-2010, vba

我创建了一个宏来从我的 excel 文件中的空行中删除所有边框。这是米格代码：

```
Sub RemoveRows()
'
' RemoveRows Macro
'

'
    Range("A8").Select

    Dim checkval

    Dim RowAmount
    RowAmount = 93

    Do
        checkval = ActiveCell.Value
        If (checkval = "" Or checkval = Null) Then
            ActiveCell.EntireRow.Delete
        Else
            ActiveCell.Offset(1, 0).Select
        End If
        RowAmount = RowAmount - 1
    Loop While RowAmount > 0

End Sub 
```

运行宏的方法：

```
public void RemoveRows_Macro(string fileName)
{
    Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
    Microsoft.Office.Interop.Excel.Workbook xlWorkBook;
    xlWorkBook = xlApp.Workbooks.Open(fileName);
    xlApp.DisplayAlerts = true;

    //Run the macro
    xlApp.Run("RemoveRows", Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
        Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);

    xlWorkBook.Save();

    xlWorkBook.Close(false);
    xlApp.Quit();
    releaseObject(xlApp);
    releaseObject(xlWorkBook);
} 
```

我的问题是我可以从我的 C# 应用程序运行此宏而不会出现此错误，但是当其他人使用我的 C# 应用程序时，他们会收到此错误：**运行时错误“13”：类型不匹配**

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:45:25.433

试试这个版本

它处理

*   可能的条目显示*为*空单元格但不是（删除它们）
*   返回的公式`""`（离开他们）
*   大大提高运行时间

* * *

```
Sub RemoveRows()
    Dim dat As Variant
    Dim i As Long
    Dim rng As Range, rngDel As Range
    Dim str As String

    Set rng = Range("A8:A100")
    dat = rng.Formula

    For i = 1 To UBound(dat, 1)
        str = Replace$(dat(i, 1), Chr(160), "")
        str = Replace$(str, vbCr, "")
        str = Replace$(str, vbLf, "")
        str = Replace$(str, vbTab, "")
        If Len(Trim$(str)) = 0 Then
            If rngDel Is Nothing Then
                Set rngDel = rng.Cells(i, 1)
            Else
                Set rngDel = Application.Union(rngDel, rng.Cells(i, 1))
            End If
        End If
    Next

    If Not rngDel Is Nothing Then
        rngDel.EntireRow.Delete
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:51:55.233

要远离单元格格式，请始终使用`Value2`.

总是标注变量类型，只在需要的时候使用，checkval 不是很有用，可以直接 check for`ActiveCell.Value2 = ""`或 check `IsEmpty(ActiveCell)`。

如果你真的想使用这个变量而不是维度它作为`Variant`.

Excel 单元格值不是 NULL，它们至少为空或等于空字符串 ("")，因此在 VBA 中执行`IsNull`或`= NULL`检查没有意义。跳过对 Null 的检查，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-25T09:39:26.447

有几件事可以尝试：

1.  声明变量类型是一种很好的做法，在这种情况下是`string`or`variant`或`range`。
2.  尝试使用该`IsNull(checkval)`功能而不是`checkval = Null`.
    *   正如@Chris 所说，一个单元格确实`Empty`不是`null`，使用`isempty(a)`.
    *   **在对此进行了一些处理之后，这似乎是一个常见问题，我遇到了一个很好的解决方案，它似乎是万无一失的，`len(trim(a)) = 0`用作检查。**
3.  无需通过选择单元格来循环访问它们：

代码：

```
Sub RemoveRows() 
'
' RemoveRows Macro 
'

' 

    Dim checkval as long, RowAmount as long
    checkval = 8
    RowAmount = 93

    Do 

        'If trim(range("A" & checkval)) = "" Or _
        '       isempty(range("A" & checkval)) Then 'thanks chris
        If Len(Trim(range("A" & checkval))) = 0 then 
            range("A" & checkval).EntireRow.Delete 
        Else 
            checkval  = checkval + 1
        End if
        RowAmount = RowAmount - 1 

    Loop While RowAmount > 0

End Sub 
```

# asp.net-mvc-3 - DropDownFor 更改 SelectedList 的选定值

> ID：15610897
> 
> 赞同：0
> 
> 时间：2013-03-25T08:55:41.540
> 
> 标签：asp.net-mvc-3

我对 DropDownListFor 有一个奇怪的问题。我需要在页面中动态创建一些选定的列表，所以，我写了这段代码

```
 for (int i = 0; i < this.Model.RolePermissions.Count(); i++ )
            {
                var item = this.Model.PermissionsList.First(m => m.Text == this.Model.RolePermissions.ElementAt(i).Name.ToString());
                item.Selected = true;

                <div class="row">
                    <div class="holder">
                        <div class="col with-button">
                           @this.Html.DropDownListFor(m => m.ListId, this.Model.PermissionsList, new { @class = "select2" }) 
                        </div>
                    </div>

                    @{ 
                        item.Selected = false;
                    }
                </div>
            } 
```

RolePermissions - 是 IEnumerable，具有必须在 SelectedList 中选择的值 PermissionList - 是 IEnumerable，具有所有需要的值。

因此，当页面呈现时 - 选择总是在 1 个选定的索引中。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:46:23.370

所以...我需要做

```
ModelState.Clear() 
```

在控制器中。

# jquery - 根据jquery中的H2文字切换图片

> ID：15610898
> 
> 赞同：0
> 
> 时间：2013-03-25T08:55:44.287
> 
> 标签：jquery, kentico

我是整个 jQuery 的新手。我正在尝试在 kentico CMS 中创建一个网站，我想要的是根据`h2`标题内容更改标题图像。所以每个不同的页面都会得到不同的图像。

我试过了`.addClass`，`.css`但`.attr`似乎没有任何效果。我试过的jQuery如下：

```
$(document).ready (function() {
{

var title = $('h2').text(); 

switch(title)
{
    case 'About us':
        $('.contentHeader').addClass('contentAbout')
        break;
    case 'Education':
        $('.contentHeader').css('background-image','url(/edu.png)')
        break;
    case 'Projects':
        $('.contentHeader').attr('src','/projects.png')
        break;
    case 'Benefits':
        $('.contentHeader').attr('src','/benefits.png')
        break;
    default:

}

)}; 
```

所以基本上我想将标题更改为`edu.png`if the `h2`text = Education.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:00:43.483

尝试更改`)};`到`});`最后一行，如果不需要`default:`，请不要使用它。

也`{`从第 2 行删除（感谢彼得）

```
$(function() { // DOM ready (shorthand)

    var title = $('h2').text(); 

    switch(title){
        case 'About us':
            $('.contentHeader').addClass('contentAbout');
            break;
        case 'Education':
            $('.contentHeader').css('background-image','url(/edu.png)');
            break;
        case 'Projects':
            $('.contentHeader').attr('src','/projects.png');
            break;
        case 'Benefits':
            $('.contentHeader').attr('src','/benefits.png');
            break;
    }

}); 
```

你也可以这样做：

```
$(function(){ 

  var title = $('h2').text(); 

  var changes = {
    'About us'  : ['addClass', 'contentAbout'],
    'Education' : ['css',      {backgroundImage: "url(/edu.png)"}],
    'Projects'  : ['attr',     {src: "/projects.png"}],
    'Benefits'  : ['attr',     {src: "/benefits.png"}]
  };

  var method = changes[title][0];
  var valu   = changes[title][1];

  $('.contentHeader')[method](valu);

}); 
```

# android - dropboxSync 中的错误：findlibrary 返回 null

> ID：15610906
> 
> 赞同：3
> 
> 时间：2013-03-25T08:56:20.343
> 
> 标签：android, dropbox, unsatisfiedlinkerror

错误日志：

```
03-25 09:46:59.022: I/com.dropbox.sync.android.CoreAccountManager(2217): Prepared cache dir '/data/data/com.company.testapp/app_DropboxSyncCache/my-dropxbox-key'.
03-25 09:46:59.022: W/dalvikvm(2217): Exception Ljava/lang/UnsatisfiedLinkError; thrown while initializing Lcom/dropbox/sync/android/NativeHttp;
03-25 09:46:59.022: W/dalvikvm(2217): Exception Ljava/lang/ExceptionInInitializerError; thrown while initializing Lcom/dropbox/sync/android/NativeLib;
03-25 09:46:59.034: D/Updater(2217): java.lang.ExceptionInInitializerError
03-25 09:46:59.034: D/Updater(2217):    at com.dropbox.sync.android.CoreAccountManager.initNativeLib(CoreAccountManager.java:107)
03-25 09:46:59.034: D/Updater(2217):    at com.dropbox.sync.android.CoreAccountManager.<init>(CoreAccountManager.java:87)
03-25 09:46:59.034: D/Updater(2217):    at com.dropbox.sync.android.DbxAccountManager.getInstance(DbxAccountManager.java:112)
03-25 09:46:59.034: D/Updater(2217):    at com.dropbox.sync.android.DbxAccountManager.getInstance(DbxAccountManager.java:99)
03-25 09:46:59.034: D/Updater(2217):    at com.company.testapp.ui.LoginActivity.notificationPosted(LoginActivity.java:1100)
03-25 09:46:59.034: D/Updater(2217):    at com.company.testapp.io.NotificationCenter.postNotification(NotificationCenter.java:79)
03-25 09:46:59.034: D/Updater(2217):    at com.company.testapp.io.Updater.processFinishedOperation(Updater.java:4044)
03-25 09:46:59.034: D/Updater(2217):    at com.company.testapp.io.Updater.operationSuccess(Updater.java:3115)
03-25 09:46:59.034: D/Updater(2217):    at com.company.testapp.io.Updater.access$5(Updater.java:3046)
03-25 09:46:59.034: D/Updater(2217):    at com.company.testapp.io.Updater$1.run(Updater.java:2999)
03-25 09:46:59.034: D/Updater(2217):    at android.os.Handler.handleCallback(Handler.java:615)
03-25 09:46:59.034: D/Updater(2217):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-25 09:46:59.034: D/Updater(2217):    at android.os.Looper.loop(Looper.java:137)
03-25 09:46:59.034: D/Updater(2217):    at android.app.ActivityThread.main(ActivityThread.java:4745)
03-25 09:46:59.034: D/Updater(2217):    at java.lang.reflect.Method.invokeNative(Native Method)
03-25 09:46:59.034: D/Updater(2217):    at java.lang.reflect.Method.invoke(Method.java:511)
03-25 09:46:59.034: D/Updater(2217):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-25 09:46:59.034: D/Updater(2217):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-25 09:46:59.034: D/Updater(2217):    at dalvik.system.NativeStart.main(Native Method)
03-25 09:46:59.034: D/Updater(2217): Caused by: java.lang.ExceptionInInitializerError
03-25 09:46:59.034: D/Updater(2217):    at com.dropbox.sync.android.NativeLib.<init>(NativeLib.java:33)
03-25 09:46:59.034: D/Updater(2217):    at com.dropbox.sync.android.NativeLib.<clinit>(NativeLib.java:11)
03-25 09:46:59.034: D/Updater(2217):    ... 19 more
03-25 09:46:59.034: D/Updater(2217): Caused by: java.lang.UnsatisfiedLinkError: Couldnt load DropboxSync: findLibrary returned null
03-25 09:46:59.034: D/Updater(2217):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
03-25 09:46:59.034: D/Updater(2217):    at java.lang.System.loadLibrary(System.java:535)
03-25 09:46:59.034: D/Updater(2217):    at com.dropbox.sync.android.NativeHttp.<clinit>(NativeHttp.java:364)
03-25 09:46:59.034: D/Updater(2217):    ... 21 more 
```

调用函数：

```
DbxAccountManager mDbxAcctMgr = DbxAccountManager.getInstance(this.getApplicationContext(), Constants.DROPBOX_APP_KEY, Constants.DROPBOX_APP_SECRET); //error is here
toolbox.setmDbxAcctMgr(mDbxAcctMgr); 
```

我在项目中获得了库 v13、dropboxsync-sdk，以及清单上的所有权限和内容。对此有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T09:44:16.450

我有问题。我没有 armeabi 库。将它添加到 libs 文件夹解决了我的问题。

从 d3mon 的回答：将 .so 添加到 libs 文件夹后：右键单击项目 -> 属性 -> Java 构建路径 ->“库”选项卡 -> 展开“Android 私有库”并编辑“本机库位置”。指向您的“libs”文件夹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T18:48:20.753

将 .so 添加到 libs 文件夹后：右键单击项目 -> 属性 -> Java 构建路径 ->“库”选项卡 -> 展开“Android 私有库”并编辑“本机库位置”。指向您的“libs”文件夹。

# objective-c - uitabbarcontroller 从 uitabbarcontroller 类中获取 NSString

> ID：15610907
> 
> 赞同：0
> 
> 时间：2013-03-25T08:56:23.473
> 
> 标签：objective-c, uitabbarcontroller

我的项目中有一个 uitabbarcontroller，我将数据传递给他（到 NSString），我想从我的选项卡控制器中获取这些数据，

我该怎么做？

天呐！

# java - Java，这是一个深拷贝吗？

> ID：15610909
> 
> 赞同：7
> 
> 时间：2013-03-25T08:56:35.357
> 
> 标签：java, deep-copy

通过阅读任何类似的问题，我似乎都无法得到明确的答案，我正在尝试使用复制构造函数在 Java 中深度克隆一个对象，这是一个深度副本：

```
public class Tile{
    Image sprite = null;
    int x = 0;
    int y = 0;
    public Tile(Image setImage, int sX, int sY){
         this.sprite = setImage;
         this.x = sX;
         this.y = sY;
    }
    public Tile(Tile copyTile){
         this.sprite = copyTile.sprite;
         this.x = copyTile.x;
         this.y = copyTile.y;
    }
    public void setNewLocation(int sX, int sY){
         this.x = sX;
         this.y = sY;
    }
} 
```

然后当我创建我的瓦片地图时，我可以做这样的事情

```
List<Tile> tileList = new List<Tile>();
Tile masterGrassTile = new Tile(grassImage, 0,0);
tileList.set(0,new Tile(masterGrassTile));
tileList.set(1,new Tile(masterGrassTile));
tileList.get(0).setNewLocation(0,32);
tileList.get(1).setNewLocation(0,64); 
```

如果我要在各自的位置渲染两个图块，那会起作用吗？或者是分配 tileList.get(1).setNewLocation(0,64); 像参考一样影响，并且它们都与最后一个分配具有相同的位置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T09:02:15.427

> 这是深拷贝吗？

不，这不是因为 的`this.sprite = copyTile.sprite;`两个对象`Tile`都引用 的同一个对象`Image`。

> 如果我要在各自的位置渲染两个图块，那会起作用吗？或者是分配 tileList.get(1).setNewLocation(0,64); 像参考一样影响，并且它们都与最后一个分配具有相同的位置。

不，x 和 y 的值在 的两个对象中是独立的，`Tiles`并且代码应该可以工作，并且两个对象将具有不同的 x 和 y 值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T09:10:43.040

首先，让我们回顾一下深拷贝和浅拷贝之间的区别。

浅拷贝指向与源相同的引用。因此，如果复制一个`A`名为实例的副本，`B`对包含对象的字段进行任何更改`B`都会修改这些字段，`A`因为它们指向相同的引用。

深层副本具有独立的字段/引用，它不指向源的引用。对副本上的字段/属性的更改不会影响源的字段/属性。

在你的情况下，我相信你已经做了一个浅拷贝，因为你将 sprite 字段的引用从源分配给了副本的 sprite 字段。

为了说明这一点，我修改了`Tile`类源以公开`Image`并模拟了一个`Image`类。

**概念证明的修改**

```
class Tile{
        /* Rest of Class*/
        //Additions
    public Image getSprite() {
        return sprite;
    }
    public void setSprite(Image sprite) {
        this.sprite = sprite;
    }

}

//Mock
class Image{
    public String name;
    public Image(String name){
        this.name = name;
    }
} 
```

**概念证明**

```
public static void main(String[] args) {
    List<Tile> tileList = new ArrayList<Tile>();
    Tile masterGrassTile = new Tile(new Image("grass.png"), 0,0);

    Tile copyTile = new Tile(masterGrassTile);
    copyTile.getSprite().name = "water.png";

    System.out.println(masterGrassTile.getSprite().name); //Prints water.png
} 
```

请注意更改复制实例的 sprite 属性如何影响原始实例的 sprite 属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T09:05:26.253

在java中有两种数据类型：

*   没有深/浅复制概念的原语（float、int、double、boolean ...），因为它们与分配一起使用。
*   浅拷贝意味着传递引用的对象。而深拷贝意味着拥有一个与源具有相同值的新对象。

`Image`在传递对象时，给出上面的代码不满足深度复制。如果您使用该对象进行渲染，则该对象只能有一个位置。这将导致您的代码在同一位置呈现两个图块。

要解决此问题，您应该克隆您的`Image`对象。

```
 public Tile(Tile copyTile){
     this.sprite = copyTile.sprite.clone();
     this.x = copyTile.x;
     this.y = copyTile.y;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-25T09:05:41.667

不，这不是深拷贝，因为相同的 Image 对象在 Tile 的所有对象之间共享。

查看您的示例，尽管此副本似乎足以满足您的需求，因为它允许您在不同位置重用相同的 Image 对象（这可能更有效）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-25T09:06:05.273

[http://www.oracle.com/technetwork/java/seccodeguide-139067.html#6](http://www.oracle.com/technetwork/java/seccodeguide-139067.html#6)

*如果方法返回对内部可变对象的引用，则客户端代码可能会修改实例的内部状态。除非打算共享状态，否则复制可变对象并返回副本。*

因此，您实际上必须从`Image`.

```
public Tile(Tile copyTile){
     this.sprite = new Image();
     //Then copy the image to the newly instantiated sprite
     this.x = copyTile.x;
     this.y = copyTile.y;
} 
```

# html - div 没有正确浮动

> ID：15610911
> 
> 赞同：-1
> 
> 时间：2013-03-25T08:56:50.277
> 
> 标签：html, css, css-float

所以我有三个div。我希望它们像这样浮动：1st /2nd /3rd 所以都在同一行。使用我的代码它不起作用。你能帮助我吗？

这是我的代码：html：

```
 <div id="holder"><h5>something</h5></div>
 <div id="visual_holder">something2</div>
 <div id="invest"><h2>something3</h2></div>

 css:
 #holder{
         width:200px;
          padding-right:48px;
          padding-left:32px;
         padding-top:32px;
        display:inline-block;
           }

    #visual_holder{
    font-family: "Times New Roman";
    font-size:7.5em;
    text-transform:uppercase;
    line-height:60%;
     float:right;
    padding-top:32px;
     }

    #invest{float:right;} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T11:44:53.747

只需交换您的 div 的位置，如下所示

```
 <div id="holder"><h5>something</h5></div>   
 <div id="invest"><h2>something3</h2></div>      
 <div id="visual_holder">something2</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:59:38.577

他们不应该都向左浮动吗？

请参阅此处的示例并根据需要进行更新：http: [//jsfiddle.net/tRNpQ/](http://jsfiddle.net/tRNpQ/)

```
#holder{
         width:200px;
          padding-right:48px;
          padding-left:32px;
         padding-top:32px;
       float:left;
           }

    #visual_holder{
    font-family: "Times New Roman";
    font-size:1.5em;
    text-transform:uppercase;
    line-height:60%;
     float:left;
    padding-top:32px;
     }

    #invest{float:left;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:09:08.830

尝试只交换`visual_holder`和`invest`div：

```
<div id="holder"><h5>something</h5></div>
<div id="invest"><h2>something3</h2></div>
<div id="visual_holder">something2</div> 
```

看来你必须先放最右边的div。参见此处：[CSS 浮动多个左浮动元素和一个右浮动元素](https://stackoverflow.com/questions/7243390/css-float-multiple-left-floated-elements-and-one-right-floated)

# javascript - setTimeout 中的匿名函数不起作用

> ID：15610913
> 
> 赞同：4
> 
> 时间：2013-03-25T08:57:11.897
> 
> 标签：javascript, jquery

我正在尝试在 nivo 滑块的两个循环之间创建延迟。

没有`setTimeout`一切工作正常（但没有延迟）。所以下面的例子有效：

```
$('#slider').nivoSlider({
        lastSlide: function(){ 
                $('#slider').data('nivo:vars').stop = true;
//              setTimeout(function() {
                        $('#slider').data('nivo:vars').stop = false;
//              }, 2000);
        },
}); 
```

如果我取消注释 setTimeout-lines，滑块会停止但不会重新开始？任何想法为什么？

更新：http: [//jsfiddle.net/kgYNX/](http://jsfiddle.net/kgYNX/)

第二次更新：也尝试了包装功能。该函数被调用，但如果我在新函数中使用 setTimeout 它将停止工作：http: [//jsfiddle.net/kgYNX/1/](http://jsfiddle.net/kgYNX/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:35:13.497

解决它略有不同：

```
beforeChange: function(){ 
        $('#slider').data('nivo:vars').stop = true;
        var delay = 0;
        if ($('#slider').data('nivo:vars').currentSlide == $('#slider').data('nivo:vars').totalSlides - 2) {
                delay = 2000;
        }
        setTimeout(function() {
                $('#slider').data('nivo:vars').stop = false;
        }, delay);
} 
```

我不知道为什么“totalSlides - 2”，但它有效：http: [//jsfiddle.net/kgYNX/15/](http://jsfiddle.net/kgYNX/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:53:26.187

作为一种变体，您可以向滑块变量集合添加自定义选项，以防止在超时重新启用滑块时停止在 lastSlide 处理程序上执行：

```
lastSlide: function () {
    var dontStop = $('#slider').data('nivo:vars').dontStopOnLast;
    if (!dontStop) {
        $('#slider').data("nivoslider").stop();
        setTimeout(function () {
            $('#slider').data("nivoslider").start();
        }, 2000);
    }
    $('#slider').data('nivo:vars').dontStopOnLast = !dontStop;
} 
```

# math - 获取向量坐标后矩阵乘法

> ID：15610918
> 
> 赞同：0
> 
> 时间：2013-03-25T08:57:42.500
> 
> 标签：math, graphics, 3d, opengl-es-2.0, transformation

我进行了一系列转换，将我的对象放到其他地方。我正在为 GL/ES 中的可编程管道手动乘以这些转换。我正在围绕遥远的任意点旋转并进行平移，虽然我可以毫不费力地让我的对象最终定位到我想要的位置，但我想知道**如何在这些转换之后提取其位置的最终 3D 矢量坐标.** ?

[这个问题](https://stackoverflow.com/questions/9912357/find-final-world-coordinates-from-model-matrix-or-quaternion)建议的一个选项是简单地将您的起始位置乘以最终矩阵并将该结果向量保持为最终坐标。如果是这样，在这些转换之前我用来表示对象原点的向量是什么？因为将矩阵乘以我的原点 (0,0,0) 只会产生一个零向量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:47:12.333

解决方案非常简单。

如果我有一个矩阵`M`，它是由所有矩阵乘法创建的最终转换，那么我可以通过以下方式找到转换的对象的中心`M`：

```
M * vector(0,0,0,1) // creates a 4D vector, where the first three, x,y,z are the coordinates 
```

这很容易在代码中[手动完成。](http://www.facstaff.bucknell.edu/mastascu/elessonsHTML/Circuit/MatVecMultiply.htm)

该问题缺少的关键部分是用于此乘法的确切向量。

# c# - Web 视图组件显示 windows 开始屏幕背景颜色 b4 加载 webview 组件一瞬间

> ID：15610923
> 
> 赞同：1
> 
> 时间：2013-03-25T08:58:14.130
> 
> 标签：c#

我的应用程序具有白色背景，但在将 HTML 字符串加载到 WebView 之前，WebView 控件的区域会闪烁 Windows 8 开始屏幕的背景颜色。对此的任何修复

# sql - 左连接过滤器

> ID：15610924
> 
> 赞同：1
> 
> 时间：2013-03-25T08:58:15.157
> 
> 标签：sql, teradata

如果我有两个表 -`Table_A`并且`Table_B`- 如果我`LEFT JOIN`用来连接它们，我如何只过滤那些与多次 `Table_B`连接的行？数据库风格：Teradata`Table_A`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:32:20.313

如果我没记错的话，Teradata 支持窗口函数，所以这可能有效：

```
select *
from (
  select a.*, 
         b.*
         count(*) over (partition by a.MyCol) as cnt
  from Table_A a
     left join Table_B b ON a.MyCol = b.MyCol 
  where ... -- Conditions
) t
where cnt > 1 
```

（未测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:32:37.480

这是您接受的答案的特定于 Teradata 的版本：

```
select a.*, 
       b.*
from Table_A a
left join Table_B b 
ON a.MyCol = b.MyCol 
where ... -- Conditions
QUALIFY count(*) over (partition by a.MyCol) > 1 
```

请注意，这`QUALIFY`是对 ANSI 标准的 Teradata 扩展（也是一个方便的扩展）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:07:53.350

```
Select a.*,b.* from Table_A a
left join Table_B b on condition
HAVING COUNT(DISTINCT a.value)>1 
```

进行必要的编辑和检查

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:06:51.393

可能对你有帮助

```
1) you can used INNER JOIN .
2) you can also check joind row is not null or blank . 
```

# wix - WiX - 如何仅定义功能树 UI

> ID：15610931
> 
> 赞同：0
> 
> 时间：2013-03-25T08:58:51.990
> 
> 标签：wix

我使用了 WixUI_FeatureTree 对话框集，但我真正需要的是带有功能选择对话框的 UI，仅此而已。WixUI 对话框库包含我理解为功能选择的 CustomizeDlg 对话框。我找不到任何有关使用单个库对话框的文档。尝试将 WixUI_FeatureTree.wxs 片段复制到我的 WXS 并对其进行修改，但我缺少声明或引用（`The Windows Installer XML variable !(wix.WixUICostingPopupOptOut) is unknown.`）。我在 VS2010 上使用 WiX v3.7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T14:29:03.900

尝试添加行

```
<UIRef Id="WixUI_Common" /> 
```

到产品元素（最好在 </UI> 之后）。这将解决 ... 变量 ... 未知错误。然后尝试遵循此页面的“更改内置对话框集的 UI 序列”示例：[http ://wix.sourceforge.net/manual-wix3/WixUI_customizations.htm](http://wix.sourceforge.net/manual-wix3/WixUI_customizations.htm)

# php - 如何从mysql记录中获取最后一个值

> ID：15610934
> 
> 赞同：4
> 
> 时间：2013-03-25T08:58:58.193
> 
> 标签：php, mysql

我是php初学者请帮助我..

我有如下的mysql记录

```
id   name     value_1   value_2
 1   rakesh   100      50
 2   david    150      10
 3   richard   0       0
 4   michael   0       0 
```

我想要最后一条记录 value_1 做一些数学但是如果最后一条记录 value_1==0 意味着我想去获取上最高 value_1 (value_1=150)

我使用波纹管代码，但我只得到最后一个值

```
$get=mysql_query("SELECT MAX(id) FROM table_name ");
$got = mysql_fetch_array($get);
$next_id = $got['MAX(id)']; 
```

这里得到 3d 理查德 value_1==0 但我想要第二个大卫 value_1 150

请帮助我提前谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:01:00.120

您的查询给了您最后一行，因为您总是选择最大的 id。

试试看：

```
SELECT * FROM table_name WHERE value_1 > 0 ORDER BY value_1 DESC LIMIT 1 
```

*   它将选择整行，因此您无需进行其他查询。
*   `WHERE value_1`> 0 将仅选择`value_1`大于 0 的行。它假定存在此类记录。如果这不是你的情况，请告诉我。
*   `ORDER BY value_1 DESC`告诉查询按`value_1`降序对行进行排序，因此所需的行将位于顶部。
*   `LIMIT 1`仅选择第一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T09:01:24.147

听起来像你想要的：

```
SELECT MAX(id) FROM table_name WHERE value_1 <> 0 
```

将选择`value_1`不为0的最大ID

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T09:01:46.443

尝试这个 ：

```
$get=mysql_query("SELECT value_1 FROM table_name 
                  WHERE  value_1 != 0 
                  ORDER BY id DESC 
                  LIMIT 1"); 
```

我实际上没有理解这个问题，这是另一个答案，它会给你不同的结果：

```
$get=mysql_query("SELECT value_1 FROM table_name 
                  WHERE  value_1 != 0 
                  ORDER BY value_1 DESC 
                  LIMIT 1"); 
```

这两个查询的区别在于一个是`ORDER BY id DESC`，另一个是`ORDER BY value_1 DESC`

# c# - Telerik 报告图表百分比

> ID：15610935
> 
> 赞同：1
> 
> 时间：2013-03-25T08:59:02.580
> 
> 标签：c#, visual-studio, telerik-reporting

我怎样才能在 Telerik Report 上获得类似的结果，显示百分比而不是默认显示的计数值。

我在我的应用程序中使用 C#。

谢谢

![在此处输入图像描述](../Images/822fd71b51f60840a81ea62f078be9c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:49:42.783

这就是它在我的应用程序中的外观

```
<telerik:PieSeriesDefinition AxisName="YourName"
                             ShowItemLabels="True"
                             ItemLabelFormat="#%{P0}" 
                             RadiusFactor="0.7"> 
```

这里的关键是`ItemLabelFormat`你`RadiusFactor`可以把它从中心移到你想要的任何地方

也忘记将其添加到答案中。里面`ChartDefaultView.ChartArea`加这个

```
 <telerik:ChartArea.AxisY>
     <telerik:AxisY AxisName="YourName" DefaultLabelFormat="#VAL{p}"/>
 </telerik:ChartArea.AxisY> 
```

# android - 如何将 Android 应用程序与库合并

> ID：15610936
> 
> 赞同：0
> 
> 时间：2013-03-25T08:59:07.057
> 
> 标签：android, merge, android-library

我的问题是：如何将 Android 应用程序与库合并？我只剩下一个引用该库的应用程序，因此我想将它们组合起来并摆脱该库。

有没有我可以使用的“工具”？还是可以“手动”合并它们？

Android 开发者网站和谷歌无法帮助我，我手动修复它的各种尝试也失败了，所以我感谢任何建议或提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:01:43.557

创建`jar`此库的一个并将其放入`libs/`应用程序的文件夹中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:11:39.823

看看你是否要创建库右键单击该项目-> 属性-> android 并勾选是库并单击应用按钮。然后在您的主android应用程序中右键单击项目=>属性->android->添加并选择该库项目并转到java构建路径转到项目并添加库项目->确定。现在库项目与您的项目合并。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:25:06.183

右键单击项目。选择属性-> Android。在其中转到“库”部分并单击“添加”。它将显示可用库的列表。选择要合并的库。

# c - 构建 C 应用程序？

> ID：15610939
> 
> 赞同：9
> 
> 时间：2013-03-25T08:59:18.393
> 
> 标签：c, architecture

我打算用 C 开发一个应用程序。我的编程经验一直是面向对象的语言。因此，在设计应用程序时，我总是从类、接口、继承、多态等方面考虑。

我看过的所有 C 书籍都涉及如何用 C 编程或专注于特定主题，我找不到任何谈论 C 应用程序架构的书籍。那么，当 OOP 特性存在时，如何构建 C 应用程序？无法使用？你如何保持一切模块化和组织良好并避免代码重复（没有 OOP 似乎会有很多代码重复）？

**编辑：** 我不是在寻找关于“如何在 C 中编写 OOP 代码”的答案。我正在寻找构建 C 应用程序的标准实践方法，因此它们是模块化的并且组织良好。如果标准的做法是破解一些 OOP 特性，那么这很公平，但如果不是，那么告诉我走这条路就没有意义了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T09:13:21.127

It is a different way of thinking. The core philosophy of C can be summarised as:

```
data + algorithms = programs 
```

So to design an application in C:

1.  You need to think carefully about what the data is, and define `struct`s which reflect that well, and facilitate the relationships between different views on the data.

2.  You need to think about what algorhythms are going to operate on what data, and what data they produce. This helps to clarify the `struct`s you should have, and help to show what should be blocked together to create reusable blocks of code.

3.  One way of moving to this approach from an OOP approach is to imagine that one `struct` + one .c file = a class, and to put in the .h file the struct definition and the externally accessible functions (public methods).

4.  You have to write a lot of code to do boring things like memory allocation and freeing and all that jazz. It's not as bad as it sounds, but factor this into your design.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T09:03:23.110

您可以将 C 项目设计为面向对象项目，然后按结构替换类。[这是在本主题](https://stackoverflow.com/questions/8180466/using-uml-for-c-programming)和本[主题](https://stackoverflow.com/questions/2042608/uml-for-c-programming-language)中向我推荐的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T10:20:04.790

首先，您将识别组件及其相互作用以解决问题。然后在每个组件内部，可以使用以下做法。

1.  首先设计公共功能。
2.  设计数据结构（即结构）功能将要工作
3.  修改公共函数以将相应的结构作为指针参数。[ c 中没有实例变量的概念。您需要定义一个结构并在函数之间传递结构]。
4.  将具有相关数据结构的函数分组到头文件中。
5.  在包含您定义的头文件的单独 c 文件中提供公共函数的实现。
6.  将所有私有/辅助方法设为静态，因此其他 c 文件将看不到它们。
7.  由于 C 中没有命名空间概念，请确保您的公共函数与现有库函数不冲突。有些人正在使用名称修饰，例如{头文件的短名称}_{函数名称}
8.  分配和释放内存是开发人员的责任。最好有初始化和释放函数来分配和清除内存以及设计的公共函数。
9.  遵循您喜欢的编码风格。
10.  将每个组件设计为共享库，这样您就不需要每次都编译它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T09:06:30.353

此外，要创建可重用的 C 软件，请阅读 David R. Hanson 的这本书

[https://sites.google.com/site/cinterfacesimplementations/](https://sites.google.com/site/cinterfacesimplementations/)

基本 OOP 最好使用 Alex Schriner 的[OOC.pdf](http://www.cs.rit.edu/~ats/books/ooc.pdf)书中提到的技术

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T11:39:01.123

可以使用 C 来练习 TDD，请参阅[C 编程和 TDD](https://stackoverflow.com/questions/2574139/c-programming-and-tdd)。

如果您习惯于练习 TDD，您就会知道它会帮助您保持代码的良好组织和模块化。

# c# - 在 WPF 中显示 RichTextBox 中的 LineNumbers

> ID：15610940
> 
> 赞同：10
> 
> 时间：2013-03-25T08:59:18.573
> 
> 标签：c#, wpf, richtextbox, line-numbers

我找到了一个示例，如何`RichTextBox`在 Windows 窗体中显示 LineNumbers。 [http://www.codeproject.com/Articles/38858/Line-Numbers-for-RichText-Control-in-C](http://www.codeproject.com/Articles/38858/Line-Numbers-for-RichText-Control-in-C)

有人在**WPF**中有一个例子吗？

编辑：

有人使用 AvalonEdit，因为他想在他的程序中显示 LineNumbers 并且可以通过我的问题帮助我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T11:47:53.183

我想只是添加一个简单的解决方案......

`Avalon`([下载](https://github.com/icsharpcode/SharpDevelop/wiki/AvalonEdit)) 已经提到，这里是如何用它来做行：

```
<avalon:TextEditor ShowLineNumbers="True" Width="500" Height="500"
                    Text="some more test&#10; some more test&#10; some more test&#10; some more test&#10; some more test&#10; some more test&#10; some more test&#10; some more test&#10; some more test&#10; ">
</avalon:TextEditor> 
```

这是一个非常强大的编辑器——我已经在它和生产环境中做了很多工作（自定义语言编译器等）。它是免费的，所以它有它的“怪癖”，但它允许你做几乎任何你需要的事情。我不确定您在谈论哪种格式的文本 - 但是您需要的任何事情都可以完成，并且不需要太多的代码行，如果您知道如何注入，在哪里注入（您可以添加自己的生成器，转换器，几乎任何视觉效果，代码完成等 - 我对它没有既得利益:)

### 编辑

语法高亮的小样本：

```
<avalon:TextEditor 
  ShowLineNumbers="True" 
  SyntaxHighlighting="C#" Width="500" Height="500"
  Text="void Test(int id, string name)&#10;{&#10;&#09;name = name + id.ToString();}" /> 
```

`"XmlDoc", "C#", "JavaScript", "HTML", "ASP/XHTML", "Boo", "Coco", "CSS", "C+", "Java", "Patch", "PHP", "TeX", "VBNET", "XML"`据我从代码中可以看出， 支持。

如果您想实现自己的自定义`syntax highlighting`（Avalon 编辑器是高度可扩展的 - 有关详细信息，请参阅提到的[代码项目文章](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)）...

您需要定义自己的`IHighlightingDefinition`，然后用`HighlightingManager`代码中的 注册它 - 然后添加更多的东西来补充。但这本身就是一个漫长的故事。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T06:59:20.420

只需为您的文本框使用自定义模板；以下答案可能对您有所帮助：

[TextBlock 的可见行数](https://stackoverflow.com/questions/1105982/visible-line-count-of-a-textblock)

**更新**

* * *

更改答案以按 OP 预期工作。

```
<Style x:Key="Local_TextBox" TargetType="{x:Type TextBoxBase}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TextBoxBase}">
                <Border Name="Border" Background="{TemplateBinding Background}">
                    <ScrollViewer x:Name="PART_ContentHost" />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

设计师，

```
<DockPanel>
    <TextBlock Text="{Binding ElementName=uiTextBox, Path=(local:AttachedProperties.BindableLineCount)}"/>
    <TextBox x:Name="uiTextBox" TextWrapping="Wrap" local:AttachedProperties.HasBindableLineCount="True"
            AcceptsReturn="True" Text="{Binding LongText}" Style="{StaticResource Local_TextBox}" />
</DockPanel> 
```

附属财产，

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;

namespace Cmsn.Software.Tutorials.numberedTextBox
{
    public class AttachedProperties
    {
        #region BindableLineCount AttachedProperty
        public static string GetBindableLineCount(DependencyObject obj)
        {
            return (string)obj.GetValue(BindableLineCountProperty);
        }

        public static void SetBindableLineCount(DependencyObject obj, string value)
        {
            obj.SetValue(BindableLineCountProperty, value);
        }

        // Using a DependencyProperty as the backing store for BindableLineCount.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty BindableLineCountProperty =
            DependencyProperty.RegisterAttached(
            "BindableLineCount",
            typeof(string),
            typeof(AttachedProperties),
            new UIPropertyMetadata("1"));

        #endregion // BindableLineCount AttachedProperty

        #region HasBindableLineCount AttachedProperty
        public static bool GetHasBindableLineCount(DependencyObject obj)
        {
            return (bool)obj.GetValue(HasBindableLineCountProperty);
        }

        public static void SetHasBindableLineCount(DependencyObject obj, bool value)
        {
            obj.SetValue(HasBindableLineCountProperty, value);
        }

        // Using a DependencyProperty as the backing store for HasBindableLineCount.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty HasBindableLineCountProperty =
            DependencyProperty.RegisterAttached(
            "HasBindableLineCount",
            typeof(bool),
            typeof(AttachedProperties),
            new UIPropertyMetadata(
                false,
                new PropertyChangedCallback(OnHasBindableLineCountChanged)));

        private static void OnHasBindableLineCountChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
        {
            var textBox = (TextBox)o;
            if ((e.NewValue as bool?) == true)
            {
                textBox.SizeChanged += new SizeChangedEventHandler(box_SizeChanged);
                textBox.SetValue(BindableLineCountProperty, textBox.LineCount.ToString());
            }
            else
            {
                textBox.SizeChanged -= new SizeChangedEventHandler(box_SizeChanged);
            }
        }

        static void box_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            var textBox = (TextBox)sender;
            string x = string.Empty;
            for (int i = 0; i < textBox.LineCount; i++)
            {
                x += i + 1 + "\n";
            }
            textBox.SetValue(BindableLineCountProperty, x);
        }
        #endregion // HasBindableLineCount AttachedProperty
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T13:19:21.380

[ScintillaNET](http://scintillanet.codeplex.com/)是一个很好的尝试组件。它是 .NET 版本的 Scintilla，它是[Notepad++](http://notepad-plus-plus.org/)编辑器（以及其他）中的关键组件。我不知道它与 AvalonEdit 相比如何，但我发现在我的代码中实现它相当容易，并且它具有您需要的功能（以及更多功能）。

[安装组件](http://scintillanet.codeplex.com/wikipage?title=Installation)并将其添加到表单后，您可以通过转到控件的属性并设置 Margins>Margin0>Width来[显示行号。](http://scintillanet.codeplex.com/wikipage?title=HowToLineNumber)您也可以通过编程方式进行设置：

```
scintilla1.Margins.Margin0.Width = 20; 
```

如果您打算采用这条路线，您可能会发现[ScintillaNet 文档](http://scintillanet.codeplex.com/documentation)很有用 - 我在开始时发现它非常有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T07:05:10.960

你能找到的最好的[例子是在 AvalonEdit 中](https://github.com/icsharpcode/SharpDevelop/wiki/AvalonEdit)。反正除了行号还有很多，但是你可以研究一下它是怎么做的，代码很清楚。查看我们正在谈论的内容的一个起点可以是[这篇 CodeProject 文章](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-19T15:13:15.203

这是一篇不错的[CodeProject 文章](http://www.codeproject.com/Articles/35413/CodeBox-An-Extended-and-Improved-Version-of-the)，展示了在 TextBox 控件中实现行号和其他一些不错的代码编辑功能的详细方法。如果您不关心它是如何构建的，只需下载示例文件并使用包含已编译控件的包含 dll。

# android-listview - 单击一行时将文本从 Listview 设置为另一个 Activity 的 EditText？

> ID：15610950
> 
> 赞同：0
> 
> 时间：2013-03-25T08:59:49.227
> 
> 标签：android-listview

我有一个列表视图，我想将列表视图的文本传递给另一个活动的编辑文本。你能帮忙吗？

```
 public class MainActivity extends Activity {

    private ListView listView1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Weather weather_data[] = new Weather[]
        {
            new Weather(R.drawable.weather_cloudy, "Cloudy"),
            new Weather(R.drawable.weather_showers, "Showers"),
            new Weather(R.drawable.weather_snow, "Snow"),
            new Weather(R.drawable.weather_storm, "Storm"),
            new Weather(R.drawable.weather_sunny, "Sunny")
        };

        WeatherAdapter adapter = new WeatherAdapter(this, 
      R.layout.listview_item_row, weather_data);

        listView1 = (ListView)findViewById(R.id.listView1);

        View header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);
        listView1.addHeaderView(header);

        listView1.setAdapter(adapter);
} 
```

当我单击第一行时，下一个活动将在编辑文本中显示“多云”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:39:20.110

You can create a listview onItemClickListener for ur listview and when user clicks on list item/row u can get the text from that row and u can pass it to next Activity that u r going to call and u r passing data via bundle and Intent like below

```
listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
        String text= arg0.getItemAtPosition(position)

        Bundle bundle = new Bundle();

        bundle.putString("URTEXT", text);

        Intent intent = new Intent(MainActivity.this,
                        NextActivity.class);

        intent.putExtras(bundle);
        startActivity(intent);
    }
}); 
```

In Next Activity U can get that data that u passed through bundle like this

```
Intent intent = getIntent();
String tEXT = intent.getIntExtra("URTEXT", 0);
EditText et= (EditText)findViewById(editTextID);
et.setText(tEXT, TextView.BufferType EDITABLE); 
```

# iphone - 数据发送到服务器，但请求在 iPhone 上返回失败

> ID：15610953
> 
> 赞同：1
> 
> 时间：2013-03-25T09:00:01.623
> 
> 标签：iphone, ios, objective-c, nsurlconnection

我有一个应用程序，我使用`NSURLConnection`.. 将数据发送到服务器，但有一种特殊情况，一旦我点击服务并锁定 iPhone。数据由服务器接收，但`connectionDidFail`在应用程序内部调用该方法.. 有什么解决方法吗..？

感谢您的任何意见。

# ruby-on-rails - Ruby-on-Rails 中的跨控制器变量

> ID：15610954
> 
> 赞同：0
> 
> 时间：2013-03-25T09:00:02.953
> 
> 标签：ruby-on-rails, variables

我有一个代码视图：

```
 <section>
  <h1>
    <%= render @client %>
  </h1>
  <h2>
    <%= render @client.telnumbers %>
  </h2>
  <h3>
    <%= link_to 'New Tel', new_telnumber_path, :locals => { :client => @client }, :remote => true %>
  </h3>
</section> 
```

但是在我的 Telnumbers 控制器中 - 变量 @client - nil 我可以看到我的 @client 什么？

我的电话号码控制器：

```
class TelnumbersController < ApplicationController
  def new
    @telnumber = Telnumber.new
    @telnumber.client_id = @client.id 
  end

  def create
    @telnumber = Telnumber.new(params[:telnumber])
    render :action => :new unless @telnumber.save
  end
end 
```

所以我有 Error Called id for nil ...

我通过将变量添加到 new_telnumber_path 来解决它

### <%= link_to '新电话', new_telnumber_path(:client_id => @client.id ), :remote => true, :class => 'btn btn-small' %>

在控制器中：

```
 def new
    @telnumber = Telnumber.new
    @client = Client.find(params[:client_id]) 
    @telnumber.client_id = @client.id 
  end 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T09:04:16.040

默认情况下，您的每个控制器都继承自您的`ApplicationController`. 您可以在`before_filter`那里放置一个分配要在许多（或每个）控制器中使用的变量。

这是一个例子：

```
class ApplicationController < ActionController::Base
  before_filter :set_client

  private

  def set_client
    # set the @client variable: load client from session or whatever your app logic is
  end
end 
```

您可以在此处阅读有关 Rails 中控制器过滤器的更多信息：http: [//guides.rubyonrails.org/action_controller_overview.html#filters](http://guides.rubyonrails.org/action_controller_overview.html#filters)

# wpf - 在 WPF 中禁用 TabControl 的 Ctrl+TAB 导航

> ID：15610956
> 
> 赞同：1
> 
> 时间：2013-03-25T09:00:06.187
> 
> 标签：wpf, c#-4.0, tabcontrol

我需要在我的 WPF 应用程序的 TabControl 中禁用 ctrl + 选项卡导航。

我尝试用

```
protected override void OnKeyDown(KeyEventArgs e)
{
    if (Keyboard.Modifiers == ModifierKeys.Control && e.Key == Key.Tab)
    {
        e.Handled = true;
    }
} 
```

但这不起作用

# sql-server - 如何在 SQL Server 触发器中获取更新行 ID

> ID：15610966
> 
> 赞同：2
> 
> 时间：2013-03-25T09:00:47.753
> 
> 标签：sql-server, sql-server-2008

我有一张桌子`Employee`

```
 Emp_Id  Name
  1       XYZ
  2       ABC 
```

和另一张桌子`DivisionInfo`

```
 DivisionID  Division  Emp_Id
       1       mmm          1
       2       nnnn         1
       3       oooo         1 
```

`Employee`如果表`Emp_Id`中存在，我需要编写一个触发器来回滚表的更新`DivisionInfo`。在这种情况下`Emp_Id = 1`。

如何获取 SQL 触发器中正在更新的行的行 ID？

这是我的触发代码：

```
ALTER TRIGGER [dbo].[EmployeeTrigger]
ON [dbo].[Employee]
FOR UPDATE 
AS
   IF((SELECT COUNT([DivisionID ]) 
       FROM [DivisionInfo] AS D 
       INNER JOIN Employee AS E ON D.[Emp_Id] = E.Emp_Id
       WHERE D.[Emp_Id] = E.Emp_Id) > 0)
   BEGIN
      RAISERROR ('Testing', 10, 1); 
      ROLLBACK TRANSACTION
      RETURN
   END 
```

这里永远是真的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:29:23.603

尝试这个：

```
ALTER TRIGGER [dbo].[EmployeeTrigger]
ON [dbo].[Employee]
FOR UPDATE 
AS
IF((
    SELECT COUNT([DivisionID ])
    FROM [DivisionInfo] D
    JOIN INSERTED I ON I.[Emp_Id] = D.[Emp_Id])>0)
BEGIN
        RAISERROR ('Testing', 10, 1); 
     ROLLBACK TRANSACTION
     RETURN
END 
```

# api - 使用 Get Statuses API 1.1 时在推文中呈现链接

> ID：15610968
> 
> 赞同：5
> 
> 时间：2013-03-25T09:00:52.087
> 
> 标签：api, twitter, hyperlink, status

我正在使用 Twitter API 1.1 Get statuses 方法从客户网站上的帐户返回最新推文。这工作正常，但我找不到任何关于如何将任何可能包含的链接（包含的用户名和包含的链接）呈现为可点击链接的明确文档？

我可以在 JSON 响应中看到任何包含的链接都在 XML 中，但我不清楚如何将可点击链接添加到呈现的输出中。围绕新 API 的文档似乎缺乏实际示例。

任何人都可以建议吗？

我正在使用拉出最新推文的代码如下：

```
$token = 'TOKEN HERE';
$token_secret = 'TOKEN SECRET HERE';
$consumer_key = 'CONSUMER KEY HERE';
$consumer_secret = 'CONSUMER SECRET HERE';

$host = 'api.twitter.com';
$method = 'GET';
$path = '/1.1/statuses/user_timeline.json'; // api call path

$query = array( // query parameters
'screen_name' => 'SCREEN NAME HERE',
'count' => '1'
);

$oauth = array(
'oauth_consumer_key' => $consumer_key,
'oauth_token' => $token,
'oauth_nonce' => (string)mt_rand(), // a stronger nonce is recommended
'oauth_timestamp' => time(),
'oauth_signature_method' => 'HMAC-SHA1',
'oauth_version' => '1.0'
);

$oauth = array_map("rawurlencode", $oauth); // must be encoded before sorting
$query = array_map("rawurlencode", $query);

$arr = array_merge($oauth, $query); // combine the values THEN sort

asort($arr); // secondary sort (value)
ksort($arr); // primary sort (key)

// http_build_query automatically encodes, but our parameters
// are already encoded, and must be by this point, so we undo
// the encoding step
$querystring = urldecode(http_build_query($arr, '', '&'));

$url = "https://$host$path";

// mash everything together for the text to hash
$base_string = $method."&".rawurlencode($url)."&".rawurlencode($querystring);

// same with the key
$key = rawurlencode($consumer_secret)."&".rawurlencode($token_secret);

// generate the hash
$signature = rawurlencode(base64_encode(hash_hmac('sha1', $base_string, $key, true)));

// this time we're using a normal GET query, and we're only encoding the query params
// (without the oauth params)
$url .= "?".http_build_query($query);

$oauth['oauth_signature'] = $signature; // don't want to abandon all that work!
ksort($oauth); // probably not necessary, but twitter's demo does it

// also not necessary, but twitter's demo does this too
function add_quotes($str) { return '"'.$str.'"'; }
$oauth = array_map("add_quotes", $oauth);

// this is the full value of the Authorization line
$auth = "OAuth " . urldecode(http_build_query($oauth, '', ', '));

// if you're doing post, you need to skip the GET building above
// and instead supply query parameters to CURLOPT_POSTFIELDS
$options = array( CURLOPT_HTTPHEADER => array("Authorization: $auth"),
//CURLOPT_POSTFIELDS => $postfields,
CURLOPT_HEADER => false,
CURLOPT_URL => $url,
CURLOPT_RETURNTRANSFER => true,
CURLOPT_SSL_VERIFYPEER => false);

// do our business
$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);

$twitter_data = json_decode($json); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T09:44:00.803

非常感谢您的回复。由于阿什维尔的人的这篇博客文章，我实际上找到了一个解决方案 - [http://www.appliedtns.com/blog/tag/twitter/](http://www.appliedtns.com/blog/tag/twitter/)

这对我来说可以。

```
// Parse any links found in our tweet
$formatted_text = preg_replace('/(\b(www\.|http\:\/\/)\S+\b)/', "<a target='_blank' href='$1'>$1</a>", $post->text);
$formatted_text = preg_replace('/\#(\w+)/', "<a target='_blank' href='http://search.twitter.com/search?q=$1'>#$1</a>", $formatted_text);
$formatted_text = preg_replace('/\@(\w+)/', "<a target='_blank' href='http://twitter.com/$1'>@$1</a>", $formatted_text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:25:32.977

不确定这是否正是您需要的，但我正在为我的应用程序使用 tmhOAuth 库，请参阅[https://github.com/themattharris/tmhOAuth-examples](https://github.com/themattharris/tmhOAuth-examples)。使用 Matt Harris 的示例中的代码，我遍历响应并构建输出，如下面的代码所示。推文中的链接由库函数创建`entify_with_options($tweet)`。

```
// Decode response
$timeline = json_decode($this->tmhOAuth->response['response'], true);

if(!$timeline){
throw new Exception('Error: No response was found.');
}
else{
//  Start building the output
foreach ($timeline as $tweet) :

         ... start of response processing

         // Format and set tweet text 
     $tw_entified_tweet = tmhUtilities::entify_with_options($tweet);

         //  Format and set creation date for permalink
     $tw_created_at_formatted = is_twitterlist_format_date($tweet['created_at']);

         //  Format and set permalink
     $tw_permalink = str_replace(
    array(
        '%screen_name%',
        '%id%',
        '%created_at%'
    ),
    array(
        $tweet['user']['screen_name'],
        $tweet['id_str'],
        $tw_created_at_formatted,
        ),
        '<a href="https://twitter.com/%screen_name%/status/%id%" target="_blank">%created_at%</a>'
     );

         ... end response processing

    endforeach;
} 
```

日期格式函数为：

```
function is_twitterlist_format_date($created_date)
{
    if ( is_null($created_date)) {
        return '';
    }
    else{
        // Format: March 4th, 9:19 am
        return date('F jS, g:i a', strtotime($created_date));
    }
} 
```

希望这是有用的。

# android - 注销通过清单注册的广播接收器

> ID：15610970
> 
> 赞同：7
> 
> 时间：2013-03-25T09:00:55.177
> 
> 标签：android, broadcastreceiver, android-manifest

是否可以取消注册`BroadcastReceiver`已通过清单注册的？另外请让我知道是否可以忽略`BroadcastReceiver`，而不进行任何代码更改，因为这`BroadcastReceiver`对我现在没有用。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T09:34:12.510

您可以使用以下代码禁用接收器：

```
PackageManager pm = getPackageManager();
   ComponentName compName = 
        new ComponentName(getApplicationContext(), 
            MyReceiver.class);
   pm.setComponentEnabledSetting(
        compName,
        PackageManager.COMPONENT_ENABLED_STATE_DISABLED, 
        PackageManager.DONT_KILL_APP); 
```

您也可以使用`COMPONENT_ENABLED_STATE_ENABLED`启用接收器。

# jsf - JSF 2.0 自定义异常处理程序在 handleNavigation 上抛出 IllegalStateException

> ID：15610974
> 
> 赞同：3
> 
> 时间：2013-03-25T09:01:09.360
> 
> 标签：jsf, illegalstateexception

我为 JSF 编写了一个自定义异常处理程序来记录异常并导航到要向用户显示的错误页面。不幸的是，在处理程序中调用“handleNavigation”时，我得到一个 IllegalStateException“在提交响应后无法调用 sendRedirect()”。任何想法，我做错了什么？

我的处理程序：

```
public class MyExceptionHandler extends ExceptionHandlerWrapper {
    private Logger           log            = ...;
    public  ExceptionHandler wrappedHandler = null;

    public MyExceptionHandler (ExceptionHandler wrappedHandler) {
        this.wrappedHandler = wrappedHandler;
    }

    @Override
    public ExceptionHandler getWrapped() {
        return wrappedHandler;
    }   

    @Override
    public void handle() throws FacesException {
        Iterator<ExceptionQueuedEvent> iter         = null;
        ExceptionQueuedEvent           event        = null;
        ExceptionQueuedEventContext    eventContext = null;
        FacesContext                   facesContext = null;       

        iter = getUnhandledExceptionQueuedEvents().iterator();      

        while (iter.hasNext()) {
            try {
                event        = iter.next();
                eventContext = (ExceptionQueuedEventContext) event.getSource(); 

                log.error("JSF Exception aufgetreten", eventContext.getException());          

                facesContext = FacesContext.getCurrentInstance();                    

                // !!!!!!!! Exception occurs here !!!!!!!!!!!
                facesContext
                   .getApplication()
                   .getNavigationHandler()
                   .handleNavigation(facesContext, null, "error");

                facesContext.renderResponse();        

            } catch (RuntimeException ex) {
                throw ex; // just to set break point
            } finally {
                iter.remove();
            }
          }
          getWrapped().handle();       
    }
} 
```

faces-config.xml 中的导航定义

```
<navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
        <from-outcome>error</from-outcome>
        <to-view-id>/faces/error.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T10:13:21.813

正在处理的异常显然是在渲染响应阶段抛出的，此时 HTTP 响应已经提交。提交的响应意味着 HTTP 响应的第一部分（包括标头）已经发送到客户端。这是一个不归路。您不能从客户端取回已经发送的字节。

当写入的内容超出通常默认为 ~2KB 的缓冲区大小时，通常会自动提交响应，具体取决于 servletcontainer 和 Facelets 配置。平均 HTML`<head>`已占用 1~2KB。所以变化很大，响应在 JSF 开始渲染之前就已经提交了，`<body>`或者只是其中的一小部分。

然而，在*您的特定*情况下，还有一个原因：当您收到多个未处理的异常时，您也会遇到麻烦，因为您在`while`导航后并没有中止循环，而是继续处理下一个异常。您不能对单个请求返回多个响应（错误页面）。您应该收集所有异常并仅导航一次，或者在第一个异常之后中止循环。

在任何情况下，只要响应不是（自动）提交的，就可以处理在渲染响应期间抛出的异常。您可以尝试几种方法来防止响应过早自动提交：

1.  将 Facelets 缓冲区大小设置为最大 HTML 响应的大小。例如 64KB：

    ```
    <context-param>
        <param-name>javax.faces.FACELETS_BUFFER_SIZE</param-name>
        <param-value>65535</param-value><!-- 64KB -->
    </context-param> 
    ```

2.  在呈现视图之前执行异常敏感的业务工作（即不要在 GET 请求期间构造的 bean 的（后）构造函数中执行它）：

    ```
    <f:event type="preRenderView" listener="#{bean.init}" /> 
    ```

至于在 JSF 中处理异常，您可能会发现[OmniFaces](http://omnifaces.org) [`FullAjaxExceptionHandler`](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)很有帮助。[你可以在这里](https://github.com/omnifaces/omnifaces/blob/1.8.1/src/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.java)找到它的源代码。

### 也可以看看：

*   [@PostConstruct 中抛出的异常导致 JSF 2.1 中的 IllegalStateException](https://stackoverflow.com/questions/9845163/exception-thrown-in-postconstruct-causes-illegalstateexception-in-jsf-2-1/9846123#9846123)
*   [web.xml 中定义的错误页面嵌入在部分呈现的 JSF 页面中](https://stackoverflow.com/questions/11768021/error-page-defined-in-web-xml-is-embedded-in-partially-rendered-jsf-page/11784576#11784576)

# php - 如何将对象转换为数组？

> ID：15610980
> 
> 赞同：0
> 
> 时间：2013-03-25T09:01:28.097
> 
> 标签：php, joomla

我需要创建 Joomla 数据库配置的自定义数组，所以我这样做：

```
$config =& JFactory::getConfig();
$db['default']['hostname'] = $config->getValue('config.host'); 
```

但得到一个错误：`Fatal error: Cannot use object of type JDatabaseMySQLi as array in /Sites/joomla/administrator/components/com_***** on line 217`。

我也试过这样：

```
die(var_dump($config->getValue('config.host')));
//string(9) "localhost"

$temp_var = $config->getValue('config.host');
die(var_dump($temp_var));
//string(9) "localhost" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:13:50.683

在 Joomla 3.0 中

您可以像这样获取每个值：

```
$config = JFactory::getConfig();
$db['default']['hostname'] = $config->get('host');
// Show them
var_dump($config);
var_dump($config->get('host'));
var_dump($db); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:12:58.027

您的错误消息非常清楚 - 您正在尝试使用和调用`$db`类的对象`JDatabaseMySQLi`作为数组。如果您创建`$db`如下：

```
$db = JFactory::getDBO();
// N.B. $db is already setup for the Joomla! database. 
```

您有 Joomla! 的数据库连接器`object`（使用 MySQLi 适配器）！安装本地数据库（即您的一个设置`configuration.php`）。这不是`array`- 但您的代码行正试图将其用作`array`

```
$db['default']['hostname'] = $config->getValue('config.host'); 
```

***注意：**上面这行是错误的*

如果您想使用存储在您（例如远程数据库）中的凭据以外的凭据设置与数据库的连接，`configuration.php`则可以使用以下方法：

```
$options = array(
    'host'      => 'remote_host',
    'user'      => 'remote_user',
    'password'  => 'remote_password',
    'database'  => 'remote_name',
    'prefix'    => 'remote_table_prefix',
);

$rDBC = JDatabase::getInstance($options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:11:45.900

问题是 $db 部分，而不是 $config。您正试图将 $db 对象（可能由创建`JFactory::getDbo()`）作为数组进行威胁。

如果这是您要用于某事的自己的变量，请尝试将其重命名为其他变量以避免与显然已经存在的 $db 对象发生冲突。

或使用此处描述的 JDatabase 类：http: [//docs.joomla.org/Accessing_the_database_using_JDatabase](http://docs.joomla.org/Accessing_the_database_using_JDatabase)

# django - Django 模板和视图解析表单

> ID：15610982
> 
> 赞同：0
> 
> 时间：2013-03-25T09:01:29.303
> 
> 标签：django, django-templates, django-views

```
<form action="" method="post" id='editing_form'>{% csrf_token %}
            <label for='first_name'> First name: </label>
            <input type='text' id='first_name' value='{{user.first_name}}'/> <br/>
            <label for='first_name'> Last name: </label>
            <input type='text' id='last_name' value='{{user.last_name}}'/> <br/>
            <label for='first_name'> Email: </label>
            <input type='text' id='email' value='{{user.email}}'/> <br/>

            {% for key,value in prefs.items %}
                <label for='prefs_{{ key }}'> {{ key }}: </label>
                <input type='text' name = 'prefs' id='prefs_{{ key }}' value='{{value}}'/> <br/>
            {% endfor %}
        <input type="submit" value="Submit">
</form> 
```

我想从我的视图中获取这些输入的值和 ID

```
{% for key,value in prefs.items %}
                <label for='prefs_{{ key }}'> {{ key }}: </label>
                <input type='text' name = 'prefs' id='prefs_{{ key }}' value='{{value}}'/> <br/>
{% endfor %} 
```

我该怎么做？

PS我不允许使用表格。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:13:51.720

我会将您的偏好更改为`pre_`

```
[........]

{% for key,value in prefs.items %}
    <label for='pre_{{ key }}'> {{ key }}: </label>
    <input type='text' name = 'pre_{{ key }}' 
        id='pre_{{ key }}' value='{{value}}'/> <br/>
{% endfor %}

[.........] 
```

获取值和 ID

```
def view_name(request):
    if request.method == 'POST':
        for val in request.POST:
            if val[0:4] == "pre_":
                id = int(val[4:])
                value = request.POST[val]

                #do save action here

    [..........] 
```

# ios - 如何从 ccsprite 中的 URL 加载图像

> ID：15610987
> 
> 赞同：0
> 
> 时间：2013-03-25T09:01:35.147
> 
> 标签：ios, xcode, cocos2d-iphone, ccsprite

我在 CCSprite 中显示来自 URL 的图像。有很多图像，因此我需要非常快速地加载图像。我编写了在模拟器中运行良好但在 iPad 上崩溃的代码。现在我无法从设备日志中理解任何内容。

我的代码：

```
NSData *d = [NSData dataWithContentsOfURL:[NSURL URLWithString:[Data valueForKey:[NSString   stringWithFormat:@"%d", idx]]]];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@ %@", documentsDirectory, string];
BOOL didWrite = [d writeToFile:filePath atomically:YES];
CCSprite * facebookImage = [[CCSprite alloc] initWithFile:filePath] ; 
```

在这里，我将图像保存在文件中并将这些内容提供给 CCSprite。

现在来自 URL 的图像在模拟器中正确获取，但在设备上此代码崩溃。PS：还有其他方法，但它们效果不佳，所以我更喜欢这种方法而不是 NSRequest 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:17:56.863

设置断点，单步执行代码。写入可能会失败，因为您的路径在文件名（格式字符串：）之前包含一个空格`"%@ %@"`，或者因为字符串为 nil。

编写故障安全代码：你已经有一个`didWrite`标志，你应该有一个 if 子句，当写入（和下载）成功时创建精灵，否则记录错误并可能创建一个占位符精灵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:53:16.983

为了在 CCSprite 中显示来自 URL 的图像，我现在改变了我的方法。

```
UIImage *uiimage2 = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:urlString]];
CCSprite * facebookImage = [[CCSprite alloc]initWithCGImage:uiimage2.CGImage key:string]; 
```

希望这个答案对某人有所帮助。

# visual-c++ - 如何更改某些文件类型的文件的图标？

> ID：15610991
> 
> 赞同：3
> 
> 时间：2013-03-25T09:01:46.227
> 
> 标签：visual-c++, explorer, windows-shell, shell-extensions

我有 IconHandler 来更改某些文件的图标。但其他文件图标变为空白。如何保留其他文件的默认图标？

```
 HRESULT CSimpleShlExt::GetIconLocation(UINT uFlags,
  PTSTR pszIconFile,
  UINT cchMax,
  int *piIndex,
  UINT *pwFlags)
 { 
    if (condition)){
        // works well
        lstrcpyn(pszIconFile, L"C:\\Windows\\System32\\shell32.dll", cchMax);
        *piIndex = 5;
        *pwFlags = 0;
    } else {
        // blank icon :(
        *pwFlags = GIL_PERINSTANCE | GIL_NOTFILENAME;// | GIL_DONTCACHE ;
    }
    return S_OK;
 } 
```

这是我的 .rgs 文件：

```
HKCR  
{
    NoRemove CLSID
{
    ForceRemove {B70B7A24-5180-4092-B3BA-6266F914C053} = s 'My Shell Extension'
    {
        InprocServer32 = s '%MODULE%'
        {
            val ThreadingModel = s 'Apartment'
        }
        TypeLib = s '{62C6D1EB-C172-4E05-BFD2-5F9313832CC3}'
        Version = s '1.0'
    }
}
    NoRemove txtfile
    {
        NoRemove ShellEx
        {
            ForceRemove IconHandler = s '{B70B7A24-5180-4092-B3BA-6266F914C053}'
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:58:05.747

此代码有效：

```
 HRESULT CSimpleShlExt::GetIconLocation(UINT uFlags,
 PTSTR pszIconFile,
 UINT cchMax,
 int *piIndex,
 UINT *pwFlags)
 { 

    if (condition))
    {
        lstrcpyn(pszIconFile, L"C:\\Windows\\System32\\Test.dll", cchMax);

        *piIndex = 0;
    } 
    else 
    {
        *piIndex = 1;

    }

    *pwFlags = 0;
    return S_OK;

 }

HRESULT CSimpleShlExt::Extract(
LPCTSTR pszFile,
UINT nIconIndex,
HICON *phiconLarge,
HICON *phiconSmall,
UINT nIconSize)
{
    return S_FALSE;
} 
```

更改 .rgs 文件：

```
HKCR  
{
    NoRemove CLSID
{
    ForceRemove {B70B7A24-5180-4092-B3BA-6266F914C053} = s 'My Shell Extension'
    {
        InprocServer32 = s '%MODULE%'
        {
            val ThreadingModel = s 'Apartment'
        }
        TypeLib = s '{62C6D1EB-C172-4E05-BFD2-5F9313832CC3}'
        Version = s '1.0'
    }
}
    NoRemove txtfile
    {
        NoRemove DefaultIcon = s '%%1'
        NoRemove ShellEx
        {
            ForceRemove IconHandler = s '{B70B7A24-5180-4092-B3BA-6266F914C053}'
        }
    }
} 
```

来自“MSDN” -[如何创建图标处理程序](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144122%28v=vs.85%29.aspx)：

> 注册图标处理程序
> 
> 当您静态注册一个文件类型的图标时，您会在该文件类型的 ProgID 下创建一个 DefaultIcon 子项。其默认值设置为包含图标的文件。要注册图标处理程序，您仍必须拥有 DefaultIcon 子项，但其默认值必须设置为“%1”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:36:38.233

您可以通过将虚拟名称传递给`SHGetFileInfo`. 例如，

```
 HRESULT CSimpleShlExt::GetIconLocation(UINT uFlags,
  PTSTR pszIconFile,
  UINT cchMax,
  int *piIndex,
  UINT *pwFlags)
 { 
    if (condition){
        // works well
        lstrcpyn(pszIconFile, L"C:\\Windows\\System32\\shell32.dll", cchMax);
        *piIndex = 5;
        *pwFlags = 0;
    } else {
        SHFILEINFO sfi;
        SHGetFileInfo(L"dummy", FILE_ATTRIBUTE_NORMAL, &sfi, sizeof(sfi),
            SHGFI_ICONLOCATION | SHGFI_USEFILEATTRIBUTES);
        StringCchCopy(pszIconFile, cchMax, sfi.szDisplayName);
        *piIndex = sfi.iIcon;
        *pwFlags = 0;
    }
    return S_OK;
 } 
```

关键是传递`SHGFI_USEFILEATTRIBUTES`标志，这意味着您提供的文件名不需要引用真实文件。提供不带文件扩展名的文件名（如上例所示）意味着您将获得系统的默认文件图标。最后`SHGFI_ICONLOCATION`标志返回结构字段中的图标路径和索引`SHFILEINFO`。

# php - 字符串作为php中的计算

> ID：15610993
> 
> 赞同：3
> 
> 时间：2013-03-25T09:01:49.117
> 
> 标签：php

我的数据库中有一个字段，其中包含类似`21;48;33;22;31`. 然后我想把它转换成数学计算`21+48+33+22+31`。

```
$points = "21;48;33;22;31";
$points = str_replace(";","+",$points );
$points = preg_replace('/[^0-9\+\-\*\/\s]+/', '', $points);
echo $points; 
```

但这根本行不通。我有相同的字符串“21+48+33+22+31”而不是总和。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T09:06:13.850

```
$points = "21;48;33;22;31";
$points = explode(';',$points );
$points = array_sum($points);
echo $points; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T09:05:33.327

```
$points = "21;48;33;22;31";
$arr = explode(";", $points);
$points = 0;
foreach($arr as $key => $rows){
    $points += $rows[$key];
}
echo $points; 
```

试试上面的代码，它会给你正确的结果。

或者你也可以试试：

```
$points = "21;48;33;22;31";
$arr = explode(";", $points);
echo $points = array_sum($arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:06:02.267

最简单的方法是[爆炸](http://php.net/manual/de/function.explode.php)字符串。

然后你可以用 foreach 遍历结果数组并计算它们。

```
$points = "21;48;33;22;31";
$points = explode(";", $points);
$calc = 0;

forearch($points as $point) {
    $calc += $point;
} 
```

或者您可以使用[array_sum](http://php.net/manual/de/function.array-sum.php)：

```
$points = "21;48;33;22;31";
$points = explode(";", $points);
$calc = array_sum($points); 
```

类似的东西。也许有一些更短的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T09:06:28.763

```
$string = "21;48;33;22;31";

$string = explode(";" , "21;48;33;22;31");

$point = 0;
foreach($string as $num)
{       // by using (int) you can convert string to int.
    $point = (int)$num + $point;

}

print($point);
// output 
155 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T09:11:35.950

爆炸它然后循环求和...

```
 <?php
        $total = 0; // for getting the total
        $points = "21;48;33;22;31";
        $points = explode(';',$points);
     for($i=0;$i<count($points);$i++){
        $total+= $points[$i];
    }
    echo $total;
    ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T09:20:44.017

```
<?php
eval('$sum = ' . str_replace(';','+','21;48;33;22;31').';');
echo $sum; 
```

# c++ - QString::toStdString() 在 std::string 析构函数上崩溃

> ID：15610994
> 
> 赞同：14
> 
> 时间：2013-03-25T09:01:49.710
> 
> 标签：c++, visual-studio, qt, crash

我已经调试了 2 个小时了，归结为这一点。如果我打电话`QString::toStdString`

```
QString s = "testtesttesttesttesttest";
const std::string &temp = s.toStdString(); 
```

该程序后来在 std::string 析构函数上崩溃

```
__CLR_OR_THIS_CALL ~basic_string()
    {   // destroy the string
    _Tidy(true); // <---- It crashes on this line.
    } 
```

起初我以为是内存损坏，但即使`main()`只包含那 2 行也会发生这种情况。有谁知道为什么会发生这种情况，以及我该如何解决？

我的 Qt 版本是`4.8.1`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T09:23:40.517

您的 Qt DLL 需要使用 STL 支持和与您的代码完全相同的 C-Runtime 库进行编译。看起来好像您同时使用了两个不同的 CRT，这会将 Qt 在一个堆上创建的对象销毁到您的程序使用的堆中。

使用 Dependency Walker 检查 DLL 使用情况！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T20:36:17.643

最可能的原因可能是您的运行时库是“多线程 (/MT)”，您需要将其更改为“多线程 DLL (/MD)”（如果您使用的是发行版）

如果您正在调试版本，请从“多线程调试 (/MTd)”更改为“多线程调试 DLL (/MDd)”

如果你有一个奇怪的 Qt 编译，解决方案应该是相反的。

您会在“配置属性->C/C++->代码生成->运行时库”中找到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T08:55:12.197

我尝试以不同的方式解决问题。我从 Visual Studio 创建了一个新项目，并且测试代码没有在那里崩溃。在使用 WinMerge 检查 *.vcproj 文件之间的差异后，我发现崩溃是由项目中的一些自定义更改引起的 - 你猜对了 - 运行时库。这是 WinMerge 创建的补丁，其中包含导致崩溃重现的最小差异：

```
112c112
<               RuntimeLibrary="3"
---
>               RuntimeLibrary="1"
126a127,128
>               LinkLibraryDependencies="true"
>               UseLibraryDependencyInputs="false"
127a130,131
>               IgnoreAllDefaultLibraries="false"
>               IgnoreDefaultLibraryNames="msvcrtd.lib" 
```