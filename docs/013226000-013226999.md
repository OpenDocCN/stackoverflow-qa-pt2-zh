# StackOverflow 问答 13226000-13226999

# jquery - MVC Razor 局部视图中 webGrid.GetHtml 的分页

> ID：13226000
> 
> 赞同：2
> 
> 时间：2012-11-05T04:39:46.530
> 
> 标签：jquery, ajax, asp.net-mvc-3, razor

我的页面上有两个选项卡...对于第一个选项卡，我在页面加载时加载网格；第二，点击时，我使用`Ajax.ActionLink`部分视图加载网格。

我正在使用`webGrid.GetHtml()`在两个选项卡中使用默认分页来渲染网格。第一个选项卡的分页工作非常顺利。但是对于第二个选项卡下的网格，如果我点击页码，它将在一个新窗口中打开整个部分视图，并选择第二个页面。

任何建议/解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:56:35.910

我搜索了整个网络，但忘记为 WebGrid 方法添加属性 ajaxUpdateContainerId。它就像一个魅力。页面不刷新，分页工作非常顺利。ajaxUpdateContainerId 用于用刷新的数据更新一些标签内容；应使用 ajax 调用加载提供的网格。所以我在我的 grid.gethtml 周围使用了一个 div 标签，并在 ajaxUpdateContainerId 属性中给出了 div 标签的 id。

任何其他解决方案也将被接受....!!!!!!

更多信息 [http://galratner.com/blogs/net/archive/2011/12/02/reloading-a-razor-webgrid-after-ajax-calls-using-a-partial-view.aspx](http://galratner.com/blogs/net/archive/2011/12/02/reloading-a-razor-webgrid-after-ajax-calls-using-a-partial-view.aspx)

# c# - Notepad++ 的比较插件算法

> ID：13226002
> 
> 赞同：2
> 
> 时间：2012-11-05T04:39:57.313
> 
> 标签：c#, .net, algorithm, notepad++, string-comparison

我需要在 C#.Net 中创建一个具有与 Notepad++ 比较插件完全相同的功能的工具，你知道我该怎么做吗？

现在我正在使用这个算法： http: [//www.codeproject.com/Articles/6943/A-Generic-Reusable-Diff-Algorithm-in-C-II](http://www.codeproject.com/Articles/6943/A-Generic-Reusable-Diff-Algorithm-in-C-II)

但我的客户想强调 Notepad++ 比较插件中的差异。

感谢您的任何想法！

-JRC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:52:30.633

您可能找不到可以使用的确切算法。但是您可以做的是，您可以轻松地自定义[C# - II 中的 A Generic, Reusable Diff Algorithm](http://www.codeproject.com/Articles/6943/A-Generic-Reusable-Diff-Algorithm-in-C-II)的逻辑，通过将`Line`列替换为图像列，在比较时显示*添加*和*删除*图像`Notepad++`。

或者

您还可以查看此[Diff.NET](http://www.menees.com/index.html)，它可能很有用。

*截图：*

1.  [文件差异](http://www.menees.com/Images/FileDiffScreen.jpg)
2.  [目录差异](http://www.menees.com/Images/FileDiffScreen.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T04:47:07.237

我在我的一个项目中使用了它：http: [//diffplex.codeplex.com/](http://diffplex.codeplex.com/)

# java - 如何每 2.5 小时执行一次 cron 表达式？

> ID：13226003
> 
> 赞同：1
> 
> 时间：2012-11-05T04:40:00.120
> 
> 标签：java, cron, quartz-scheduler, crontab, cronexpression

我们正在使用石英调度程序进行调度，我有一个要求，我需要每 2.5 小时执行一次作业。请为此构建一个 cron 表达式。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T04:52:50.347

这意味着您必须在以下时间执行脚本 0.00, 2.30,5.00,7.30,10.00,12.30,15.00,17.30,20.00,22.30
我不确定您是否可以在单个 cron 命令中编写此脚本。您可以按照以下步骤操作。
你可以把它分成两半。0.00,5.00,10.00,15.00,20.00 和
2.30,7.30,12.30,17.30,22.30 可以在 cron 中添加 2 个条目
0 */5 * * * CMD
和
30 2,7,12,17,22 * * * CMD

希望这可以帮助你..

# c++ - 添加两个分数

> ID：13226012
> 
> 赞同：0
> 
> 时间：2012-11-05T04:40:58.437
> 
> 标签：c++, visual-c++

```
#include <iostream>
using namespace std;

class Fraction {
private:
    int num;    
    int denom;

public:
    Fraction() {  
        int num = 0;
        int denom = 1;
    }

    Fraction(const Fraction& ref) { 
        num = ref.num;
        denom = ref.denom;
    }

    Fraction(int arg) {

        num = arg;

        denom = 1;
    }

    Fraction(int arg, int arg2) {
        num = arg;
        if (arg2 == 0)
            denom = 1;
        else 
            denom = arg2; 
    } 

    ~Fraction() {     
    }

    void setnum(int arg) {
        num = arg;
        return;
    }

    void setdenom(int arg) {
        if(arg) {
            denom = arg;
        } else {
            denom = 1;
            }
        return;
    }

    int getnum() const {
        return num;
    }

    int getdenom() const {
        return denom;
    }
};

Fraction addition(Fraction&, Fraction&);
Fraction init(void);
void print(Fraction&);
void menu(void);

int main() {

    menu();

    return 0;
}

void menu() {
    int option;
    Fraction e;
    Fraction f;
    Fraction g;

    cout << "option: ";
    cin >> option;

    do {
        switch(option) {
        case 1:
            cout << "For init: " << endl;
            e = init();
            f = init();
            menu();
            break;
        case 2:
            cout << "For add: " << endl;
            g = addition(e,f);
            break;
        case 3:
            cout << "For print: " << endl;
            print(g);
            break;
        case 4:
            cout << "bb" << endl;
            break;
        default:
            cout << "Wrong" << endl;
        }

    }while(option != 4);

    return;
}
Fraction addition(Fraction& arg1, Fraction& arg2) {

    Fraction temp;

    temp.setnum((arg1.getnum() * arg2.getdenom()) + (arg1.getdenom() * arg2.getnum()));

    temp.setdenom(arg1.getdenom() * arg2.getdenom());

    return temp;

}

Fraction init() {
    int num;
    int denom;

    cout << "num: ";
    cin >> num;

    cout << "denom: ";
    cin >> denom; 

    Fraction info(num, denom);

    return info;
}

void print(Fraction& info) {
    cout << "num: " << info.getnum() << endl;
    cout << "denom: " << info.getdenom() << endl;
    return;
} 
```

我正在制作一个添加两个分数的程序

我有 3 个选项的菜单：初始化、添加和打印

我的计划是：

首先我选择选项 init，并输入两个分数

然后我将返回菜单并选择添加选项以将两个分数相加

最后我选择选项 print 打印结果

但是从上面的程序中，我总是从 init 选项中遇到麻烦

实际上我可以输入，但是当我回到菜单并进行添加时，

添加将不起作用

我认为它不起作用，因为加法功能没有得到输入

所以我想问我该如何解决这个问题？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:00:05.357

`menu`功能坏了。它只读取一次输入，然后永远循环（除非它是`1`or `4`）。您应该读取`option`循环内的值。并删除选项 1 中不必要的递归。

```
void menu() {
    int option;
    Fraction e;
    Fraction f;
    Fraction g;

    do {
        cout << "option: ";
        cin >> option;

        switch(option) {
        case 1:
            cout << "For init: " << endl;
            e = init();
            f = init();
    //      menu();  <-- Remove this
            break;
            case 2:
            cout << "For add: " << endl;
            g = addition(e,f);
            break;
        case 3:
            cout << "For print: " << endl;
            print(g);
            break;
        case 4:
            cout << "bb" << endl;
            break;
        default:
            cout << "Wrong" << endl;
        }

    }while(option != 4);

    return;
} 
```

# php - 数组中的嵌入对象

> ID：13226017
> 
> 赞同：0
> 
> 时间：2012-11-05T04:42:13.447
> 
> 标签：php, arrays, object

我有一个名为 $result 的数组，**print_r($result)**的输出如下所示。

```
Array
(

[0] => Profile Object
    (
        [id] => 3
        [name] => alvis
        [parentLink] => ProfileLink Object
            (
                [href] => web
                [type] => data
            )
    )

[1] => Profile Object
    (
        [id] => 3
        [name] => gorgia
        [parentLink] => ProfileLink Object
            (
                [href] => text
                [type] => values
            )
    )

[2] => Profile Object
    (
        [id] => 4 
        [name] => text
        [parentLink] => ProfileLink Object
            (
                [href] => text
                [type] => values
            )
    )

 ) 
```

我尝试使用以下方法仅显示名称：

```
foreach ($results[name] as $key => $value) {
            echo $key . ": " . $value."<br>";
            } 
```

但我得到一个错误不能使用 Profile 类型的对象作为数组。

当我尝试

```
foreach ($results->name as $key => $value) {
            echo $key . ": " . $value."<br>";
            } 
```

我遇到另一个错误：为 foreach() 提供的参数无效
是否可以显示 ID 和名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:47:30.760

您可以使用`foreach`遍历数组中的每个配置文件对象，然后使用`->`. 下面的代码忽略了数组的数字索引，只使用了配置文件对象中的`id`and 。`name`

```
foreach ($result as $profile) {
    echo $profile->id .": ".$profile->name . " <br>";
} 
```

如果您还想包含数组的数字索引：

```
foreach ($result as $index=>$profile) {
    echo "(index ". $index .") ".$profile->id.": ".$profile->name." <br>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:49:44.987

您需要使用 foreach 遍历 $result 数组，然后使用“->”表示法访问“name”属性。

```
 foreach ($result as $profile) {
            print $profile->name;
     } 
```

如果要获取配置文件对象的所有属性，则必须使用 get_object_vars()。

```
 foreach ($result as $profile) {
           $vars = get_object_vars($profile);
           foreach ($vars as $key => $var) {
                 echo $key . ": " . $var."<br>";
                 // add suitable looping for the ProfileLink object too
           }
     } 
```

# asp.net - url 路由到根 URL 和表单身份验证 asp.net 3.5

> ID：13226018
> 
> 赞同：0
> 
> 时间：2012-11-05T04:42:38.387
> 
> 标签：asp.net, routing, forms-authentication

我在 asp.net 3.5（不是 MVC）中遇到 URL 路由问题，我正在使用 FORMS 身份验证。问题是当我将我的网站 URL 作为[www.example.com](http://example.com)访问时，默认页面没有显示。因为我是使用表单身份验证我的登录 url 和默认 url 是不同的。所以如果有人点击 url，它会显示登录 URL 为[http://www.example.com/login.aspx?returnurl=%2f](http://www.example.com/login.aspx?returnurl=%2f)应该显示 www。例子.com。我无法理解如何处理这个问题。

但是当我从 web.config 中删除以下标签时，它工作正常。

```
 <authorization>
    <deny users="?" />
    <allow users="*" />
    </authorization> 
```

对于任何其他路线，我都没有遇到这个问题。即，如果有人点击 www.example.com/abc/def 它工作正常。如果有人可以帮助我处理 returnURL 问题。我会很感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:40:31.780

您提到的标签用于授权

通常，在实施授权之前，您不需要 web.config 中的这些标签。

所以你可以删除它。

# git - 如何从不同的远程分支签出标签

> ID：13226021
> 
> 赞同：0
> 
> 时间：2012-11-05T04:42:56.313
> 
> 标签：git, version-control, git-tag

我有一个包含生产配置的分支（现在称为 prod-conf），它遵循一个远程分支（功能名称分支）。从远程拉取执行更新时，运行以下命令是否正确？

```
git pull origin feature-name-branch tag v1.0.0 
```

我想签出远程分支上的特定标签并将该标签上的代码与我的生产配置合并。我不想发生的是在标签进来之后提交。

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:14:29.350

```
 git checkout prod-conf
 git merge v1.0.0 
```

标签是静态标记。除非您通过删除和重新创建来移动标签，否则它不会为您提供任何更新。事实上，常规分支的合并也会做同样的事情。除非您明确地进行另一次合并，否则您将不会获得任何更新。

# android - Facebook 事件只能通过我的 android 应用程序编辑

> ID：13226027
> 
> 赞同：0
> 
> 时间：2012-11-05T04:43:35.907
> 
> 标签：android, facebook, events

是否有任何特定权限可以使我的 Facebook 事件只能通过创建它的应用程序进行编辑？到目前为止，我已经设置了事件类型“OPEN”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:54:45.610

根据我在 facebook 开发者页面中阅读的内容，我们无法这样做以供进一步参考，请阅读 -> [https://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

# java - 如何从文本文件中读取 x 个字符

> ID：13226028
> 
> 赞同：0
> 
> 时间：2012-11-05T04:43:43.597
> 
> 标签：java

如何逐步读取文本文件的 20 个字符，例如，如果我有一个函数 read_next，第一次调用它会返回字符串中的前 20 个字符，第二次调用它会返回接下来的 20 个字符文件。请注意，我不想将整个文件读入数组然后将其分解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:50:30.693

基本上，你想使用[`InputStream#read(byte[])`](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html#read%28byte%5b%5d%29)

> 从输入流中读取一些字节并将它们存储到缓冲区数组 b. 实际读取的字节数以整数形式返回

```
public int read(InputStream is, byte[] bytes) throws IOException {
    return is.read(bytes);
} 
```

然后你基本上想调用这个方法......

```
byte[] bytes = new byte[20];
int bytesRead = -1;
while ((bytesRead = read(is, bytes)) != -1) {
    // Process the bytes..
    // Note, while bytes.length will always == 20
    // there will only ever be bytesRead worth of 
    // values in the array
} 
```

**更新**

在一些不错的反馈之后，您还可以使用相同的想法将相同的想法应用于 UFT-8 编码文件`Reader`

```
public int read(Reader reader, char[] chars) throws IOException {
    return reader.read(chars);
} 
```

并调用该方法......

```
Reader reader = new InputStreamReader(new FileInputStream("file"), "UTF-8");
char[] chars = new char[20];
int charsRead = -1;
while ((charsRead = read(reader, chars)) != -1) {
    // Process chars, the same caveats apply as above...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:51:18.950

我会用 BufferedReader 读一行。它可以是整个文件:(希望不是。

您可以读取指定数量的字节，但这些可以超过字符（utf-8）

# python - panda的多索引的好处？

> ID：13226029
> 
> 赞同：38
> 
> 时间：2012-11-05T04:43:47.433
> 
> 标签：python, pandas, multi-index

所以我了解到我可以使用 DataFrame.groupby 而不需要 MultiIndex 来进行子采样/横截面。

另一方面，当我在 DataFrame 上有一个 MultiIndex 时，我仍然需要使用 DataFrame.groupby 来进行子采样/横截面。

那么除了打印时层次结构的非常有用和漂亮的显示之外，MultiIndex 还有什么好处呢？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-05T05:22:05.390

在 pandas 0.4 版本中引入了分层索引（也称为“多级”索引）。

这为一些非常复杂的数据分析和操作打开了大门，特别是对于处理更高维度的数据。从本质上讲，它使您能够在二维表格结构 (DataFrame) 中有效地存储和操作任意高维数据。

想象一下使用`MultiIndex`这样的构造数据框：-

```
import pandas as pd
import numpy as np

np.arrays = [['one','one','one','two','two','two'],[1,2,3,1,2,3]]

df = pd.DataFrame(np.random.randn(6,2),index=pd.MultiIndex.from_tuples(list(zip(*np.arrays))),columns=['A','B'])

df  # This is the dataframe we have generated

          A         B
one 1 -0.732470 -0.313871
    2 -0.031109 -2.068794
    3  1.520652  0.471764
two 1 -0.101713 -1.204458
    2  0.958008 -0.455419
    3 -0.191702 -0.915983 
```

这`df`只是一个二维的数据结构

```
df.ndim

2 
```

但是我们可以把它想象成一个 3 维数据结构。

*   `one`与`1`数据`-0.732470 -0.313871`。
*   `one`与`2`数据`-0.031109 -2.068794`。
*   `one`与`3`数据`1.520652 0.471764`。

又名：“在二维表格结构中有效地存储和操作任意高维数据”

这不仅仅是一个“漂亮的展示”。由于我们现在有一个层次索引，因此它具有易于检索数据的好处。

例如。

```
In [44]: df.ix["one"]
Out[44]: 
          A         B
1 -0.732470 -0.313871
2 -0.031109 -2.068794
3  1.520652  0.471764 
```

只会为属于“一个”的数据组给我们一个新的数据框。

我们可以通过这样做进一步缩小我们的数据选择范围：-

```
In [45]: df.ix["one"].ix[1]
Out[45]: 
A   -0.732470
B   -0.313871
Name: 1 
```

当然，如果我们想要一个特定的值，这里有一个例子：-

```
In [46]: df.ix["one"].ix[1]["A"]
Out[46]: -0.73247029752040727 
```

因此，如果我们有更多索引（除了上面示例中显示的 2 个索引），我们基本上可以向下钻取并选择我们真正感兴趣的数据集，而无需`groupby`.

我们甚至可以从数据框中获取横截面（行或列）...

按行：-

```
In [47]: df.xs('one')
Out[47]: 
          A         B
1 -0.732470 -0.313871
2 -0.031109 -2.068794
3  1.520652  0.471764 
```

按列：-

```
In [48]: df.xs('B', axis=1)
Out[48]: 
one  1   -0.313871
     2   -2.068794
     3    0.471764
two  1   -1.204458
     2   -0.455419
     3   -0.915983
Name: B 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-08-09T21:13:42.000

@Calvin Cheng 的好帖子，但我想我也会尝试一下。

何时使用 MultiIndex：

1.  当单个列的值不足以唯一标识一行时。
2.  当数据在逻辑上是分层的 - 这意味着它具有多个维度或“级别”。</li>

为什么（您的核心问题）- 至少这些是 IMO 的最大好处：

1.  通过 stack() 和 unstack() 轻松操作
2.  有多个列级别时的简单数学
3.  用于切片/过滤的语法糖

例子：

```
 Dollars  Units
Date       Store   Category Subcategory UPC EAN
2018-07-10 Store 1 Alcohol  Liqour      80480280024    154.77      7
           Store 2 Alcohol  Liqour      80480280024     82.08      4
           Store 3 Alcohol  Liqour      80480280024    259.38      9
           Store 1 Alcohol  Liquor      80432400630    477.68     14
                                        674545000001   139.68      4
           Store 2 Alcohol  Liquor      80432400630    203.88      6
                                        674545000001   377.13     13
           Store 3 Alcohol  Liquor      80432400630    239.19      7
                                        674545000001   432.32     14
           Store 1 Beer     Ales        94922755711     65.17      7
                                        702770082018   174.44     14
                                        736920111112    50.70      5
           Store 2 Beer     Ales        94922755711    129.60     12
                                        702770082018   107.40     10
                                        736920111112    59.65      5
           Store 3 Beer     Ales        94922755711    154.00     14
                                        702770082018   137.40     10
                                        736920111112   107.88     12
           Store 1 Beer     Lagers      702770081011   156.24     12
           Store 2 Beer     Lagers      702770081011   137.06     11
           Store 3 Beer     Lagers      702770081011   119.52      8 
```

1) 如果我们想轻松比较不同商店的销售额，我们可以使用`df.unstack('Store')`并排排列所有内容：

```
 Dollars                   Units
Store                                        Store 1 Store 2 Store 3 Store 1 Store 2 Store 3
Date       Category Subcategory UPC EAN
2018-07-10 Alcohol  Liqour      80480280024   154.77   82.08  259.38       7       4       9
                    Liquor      80432400630   477.68  203.88  239.19      14       6       7
                                674545000001  139.68  377.13  432.32       4      13      14
           Beer     Ales        94922755711    65.17  129.60  154.00       7      12      14
                                702770082018  174.44  107.40  137.40      14      10      10
                                736920111112   50.70   59.65  107.88       5       5      12
                    Lagers      702770081011  156.24  137.06  119.52      12      11       8 
```

2）我们还可以轻松地对多列进行数学运算。例如，`df['Dollars'] / df['Units']`然后将每个商店的美元除以其单位，对于没有多重操作的每个商店：

```
Store                                         Store 1  Store 2  Store 3
Date       Category Subcategory UPC EAN
2018-07-10 Alcohol  Liqour      80480280024     22.11    20.52    28.82
                    Liquor      80432400630     34.12    33.98    34.17
                                674545000001    34.92    29.01    30.88
           Beer     Ales        94922755711      9.31    10.80    11.00
                                702770082018    12.46    10.74    13.74
                                736920111112    10.14    11.93     8.99
                    Lagers      702770081011    13.02    12.46    14.94 
```

3）如果我们想要过滤到特定的行，而不是使用

```
df[(df[col1] == val1) and (df[col2] == val2) and (df[col3] == val3)] 
```

格式，我们可以改为 .xs 或 .query （是的，这些适用于常规 dfs，但它不是很有用）。语法将改为：

```
df.xs((val1, val2, val3), level=(col1, col2, col3)) 
```

更多示例可以在我整理的本[教程笔记本中找到。](http://www.zaxrosenberg.com/pandas-multiindex-tutorial/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-23T17:18:33.687

使用多索引的替代方法是使用数据框的多列存储数据。人们会期望多索引能够提供比原始列存储更高的性能，但从 Pandas v 1.1.4 开始，情况似乎并非如此。

# 计时码表

```
import numpy as np
import pandas as pd

np.random.seed(2020)
inv = pd.DataFrame({
    'store_id': np.random.choice(10000, size=10**7),
    'product_id': np.random.choice(1000, size=10**7),
    'stock': np.random.choice(100, size=10**7),
}) 
```

```
# Create a DataFrame with a multiindex
inv_multi = inv.groupby(['store_id', 'product_id'])[['stock']].agg('sum')
print(inv_multi)
                     stock
store_id product_id       
0        2              48
         4              18
         5              58
         7             149
         8             158
...                    ...
9999     992           132
         995           121
         996           105
         998            99
         999            16

[6321869 rows x 1 columns] 
```

```
# Create a DataFrame without a multiindex
inv_cols = inv_multi.reset_index()
print(inv_cols)
         store_id  product_id  stock
0               0           2     48
1               0           4     18
2               0           5     58
3               0           7    149
4               0           8    158
...           ...         ...    ...
6321864      9999         992    132
6321865      9999         995    121
6321866      9999         996    105
6321867      9999         998     99
6321868      9999         999     16

[6321869 rows x 3 columns] 
```

```
%%timeit
inv_multi.xs(key=100, level='store_id')
10 loops, best of 3: 20.2 ms per loop

%%timeit
inv_cols.loc[inv_cols.store_id == 100]
The slowest run took 8.79 times longer than the fastest. This could mean that an intermediate result is being cached.
100 loops, best of 3: 11.5 ms per loop

%%timeit
inv_multi.xs(key=100, level='product_id')
100 loops, best of 3: 9.08 ms per loop

%%timeit
inv_cols.loc[inv_cols.product_id == 100]
100 loops, best of 3: 12.2 ms per loop

%%timeit
inv_multi.xs(key=(100, 100), level=('store_id', 'product_id'))
10 loops, best of 3: 29.8 ms per loop

%%timeit
inv_cols.loc[(inv_cols.store_id == 100) & (inv_cols.product_id == 100)]
10 loops, best of 3: 28.8 ms per loop 
```

# 结论

使用 MultiIndex 的好处在于语法糖、自记录数据以及来自`unstack()`@ZaxR 回答中提到的功能的小便利；性能**不是**好处，这似乎是一个真正错失的机会。

# java - Java程序反转一个数字并确定它是否是回文

> ID：13226032
> 
> 赞同：1
> 
> 时间：2012-11-05T04:44:10.287
> 
> 标签：java, methods, return, reverse, palindrome

作为作业，我要写两种方法；一种是使用 public static int(int number) 的反转方法，而另一种是使用 public static boolean isPalindrome(int number) 的回文方法。我已经为此工作了几个小时，老实说，我很难过。我不是要求为我完成我的作业，只是帮助了解从这里去哪里。谢谢。我当前的代码如下；

```
public class Exercise
{
    public static void main(String[] args)
    {

        System.out.println("Please enter an integer. ");
        Scanner input = new Scanner(System.in);
        int number = input.nextInt();
        boolean Final = isPalindrome(number);
        System.out.println(Final);

    }

    public static int reverse(int number)
    { // missing return?
        int y;
        int n;
        for (n = 0; n <= number; n++)
        { // parameters
            y = number % 10; // remainder
            number = number / 10; // gets rid of last digit
            n = n * 10 + y; // sets reverse values

            return n; // returns reversed number
        }
    }

    public static boolean isPalindrome(int number)
    {
        int n = reverse(number); // call reverse method
        boolean result; // declare result
        if (n = number)
        { // incompatible types?
            result = true;
            System.out.println("The number " + number + " is a " + "Palindrome" + ".");
        }
        else if (n != number)
        {
            result = false;
            System.out.println("The number " + number + " is a Palindrome" + ".");
        }
        return result; // not initialized?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T04:47:34.273

你`return n;`在`for`循环中。只需将花括号移到其上方即可。

另外，将`for`循环更改为`while (number > 0) {`

并更改`(n = number)`为`(n == number)`

另外，删除中的第二个`if`条件`isPalindrome`，您不需要它。放`else`. 这将使编译器告诉您这`return result;`是无法访问的……只需将其删除即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:14:04.347

使用回文 IMO 的字符串更容易。

来源帖子： [你如何确定一个字符串是否是回文？](https://stackoverflow.com/questions/3421499/string-palindrome)

```
int someNumber = 12321;
String palindrome = someNumber+"";
boolean isPalindrome = palindrome.equals(new StringBuilder(palindrome).reverse().toString()); 
```

使用您的代码，它将是：

```
public static void main(String[] args)
{

    System.out.println("Please enter an integer. ");
    Scanner input = new Scanner(System.in);
    int number = input.nextInt();
    String palindrome = number+"";
    boolean result = palindrome.equals(new StringBuilder(palindrome).reverse().toString());
    System.out.println(result);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T16:55:32.477

/* 使用方法和接口的回文程序 */

```
 import java.util.Scanner;

 interface Test    //  All methods inside interface are treated "Public"
    {                 //  and abstract in nature by default   
String getInput();
boolean IsPalindrome(String s);
void displayInput();
         }

  abstract class Sub_Test  implements Test
       {
   public String getInput()
   {
       Scanner scan = new Scanner(System.in);
       System.out.println("Enter a String ");
       String str = scan.nextLine();
       return str;
   }
   public boolean IsPalindrome(String s)
       { 
       int limit = s.length() - 1;
       char st1 [] = s.toCharArray();
   Inner:for( int i = 0,j = limit; i < j ; i++,j--)
       {
           if(st1[i] == st1[j])
               return true;
           else 
               break Inner;
       }
              return false;
   }
          public void displayInput()
            {
      String input = getInput();
      boolean word = IsPalindrome(input);
      if(word)
        System.out.println("Given String "+input+" is palindrome ");
      else
        System.out.println("Given String "+input+" is NOT palindrome ");
                }   // End of displayInput() method

             }  // End of Sub_test abstract class

    public class String_Session1 extends Sub_Test {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    String_Session1 object = new String_Session1();
    object.displayInput();
}
          }  // End of String-Session1 Main class 
```

/* 输出如下 */

```
 Enter a String 
   Race CAR

   Given String Race CAR is palindrome 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T04:56:31.577

逆向逻辑问题。

尝试这个

```
 public static int reverse(int number)
        {  
            int result = 0;
            int remainder;
            while (number > 0)
            {
                remainder = number % 10;
                number = number / 10;
                result = result * 10 + remainder;
            }

            return result;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-17T07:51:24.013

只需通过数学函数获取数字的位数，然后使用 '/' 和 '%' 操作进行迭代，如下所示。在 x = (x % 除数) / 10 之后，我们应该将除数除以 100，因为我们进行了 2 次零操作。

```
public static boolean isPalindrome(int x) {
        if (x < 0) return false;
        if (x < 10) return true;

        int numDigits = (int)(Math.log10(x)+1);
        int divider = (int) (Math.pow(10, numDigits - 1));
        for (int i = 0; i < numDigits / 2; i++) {
            if (x / divider != x % 10)
                return false;
            x = (x % divider) / 10;
            divider /= 100;
        }
        return true;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-22T01:06:11.020

如果您正在为数字回文写作。这是提示：

布尔方法

```
public static boolean ispalindrome(int number)
    {
        int num=reverse(number);
        boolean res;
        if (num == number){
            res=true;
        System.out.println("The Entered number "+number+ " is a palindrome");}
        else {
            res=false;
            System.out.println("The Entered number "+number+" is not a palindrome");}
        return res;
    } 
```

* * *

在你的主要方法中，

```
boolean Res=ispallindrome(number); 
```

可以用来检查情况。

# c# - 混合模式程序集是针对版本“v2.0.50727”C# 企业架构师插件构建的

> ID：13226033
> 
> 赞同：1
> 
> 时间：2012-11-05T04:44:27.650
> 
> 标签：c#, .net-4.0, enterprise, sharpsvn

我正在使用 C# 构建 Enterprise Architect 加载项。我必须与 SVN 存储库交互。我使用 VS2010 和 SharpSVN 作为库来与 SVN 存储库进行交互。当我将其更改为 .NET 3.5 时，我的加载项工作正常。但现在我不得不询问另一个插件，而另一个插件只与 4.0 兼容。

但是当我将我的加载项代码更改为 .NET 4.0 时，它会给出著名的错误

“混合模式程序集是针对运行时版本‘v2.0.50727’构建的，无法在 4.0 运行时加载，需要一些配置等”

我在这里阅读了有关该问题的不同主题，建议添加 app.config 文件。带有标签

```
<Configuration>
<startup useLegacyV2RuntimeActivationPolicy="true">
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
</startup>
<runtime>
  <NetFx40_LegacySecurityPolicy enabled="true"/>
</runtime>
</Configuration> 
```

同样喜欢从不同的帖子中标记这个。我已经尝试了所有人，但问题仍然存在。我已经检查了VS2010会自动在Debug文件夹中自动生成文件名的配置文件。

谁能建议我解决方案？例如，我的加载项名称是 MyAddIn，因此`VS2010`生成带有上述标签的 MyAddIn.dll 和 MyAddIn.dll.config。

但问题仍然存在。我正在使用 Windows 7 64 位。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:58:39.750

*.dll.config 中的设置是无用的，这就是为什么你不能得到你想要的。由于您的 dll 由 Enterprise Architect 加载，您必须修改其 *.app.config 文件以包含此类设置。通常，这是不可能的，因为您的 dll 只是一个加载项。

一种解决方法是执行完全迁移到 .NET 4，它不仅针对 .NET 4 编译您的 dll，而且针对 .NET 4 编译其所有依赖项。

# java - 我的 onPostExecute 方法没有被调用

> ID：13226034
> 
> 赞同：0
> 
> 时间：2012-11-05T04:44:42.860
> 
> 标签：java, android, android-asynctask

出于某种原因，我的 doinbackground 方法执行但 onPost 执行没有我放置覆盖注释并匹配参数，我也在做 task.execute 而不是仅仅调用 doinbackground 但它仍然没有执行。这就是我的代码的样子：

安卓活动：

```
package com.Keb3mr.workoutscheduler;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.StringBody;

import com.Keb3mr.workoutscheduler.MyApp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity implements HttpCallback, OnClickListener{

    private EditText user_;
    private EditText pass_;
    private Button login_;
    private Button signUp_;
    private MyApp appState_;
    private String url_ = "http://192.168.1.110:8888/vshare/account/create";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        setTitle("Workout Scheduler");
        MyApp appState = ((MyApp)getApplicationContext());
        appState_ = appState;
        user_ = (EditText) findViewById(R.id.userText);
        pass_ = (EditText) findViewById(R.id.passwordText);
        login_ = (Button) findViewById(R.id.loginButton);
        signUp_ = (Button) findViewById(R.id.signupButton);
        appState_.setUser("default");
        appState_.setPass("default");
        login_.setOnClickListener(this);
        signUp_.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(v.getId() == R.id.loginButton){
            Log.i("amre", "button pushed");
            appState_.setUser(user_.getText().toString());
            appState_.setPass(pass_.getText().toString());
            try {
                login(url_);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Intent i = new Intent(this, ViewCreate.class);
            startActivity(i);
        }
        else if(v.getId() == R.id.signupButton){
            appState_.setUser(user_.getText().toString());
            appState_.setPass(pass_.getText().toString());
        }

    }

    public void login(String server) throws Exception{
        Log.i("button", "login");
        MultipartEntity entity = new MultipartEntity();
        entity.addPart("user", new StringBody(appState_.getUser()));
        entity.addPart("pass", new StringBody(appState_.getPass()));
        LoginTask t = new LoginTask(entity, url_, this);
        t.execute();
        Log.i("Task", "Executed");
    }

    public void onResponse(HttpResponse resp) {

        String line = null;
        InputStream is = null;
        try {
            is = resp.getEntity().getContent();
        } catch (IllegalStateException e1) {

            e1.printStackTrace();
        } catch (IOException e1) {

            e1.printStackTrace();
        }

        BufferedReader reader = new BufferedReader(new InputStreamReader(is));

        StringBuilder sb = new StringBuilder();

        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e1) {

            e1.printStackTrace();
        }
        String result = sb.toString();
        Log.i("reuslt:", result);
    }

    public void onError(Exception e) {
        // TODO Auto-generated method stub

    }
} 
```

我在调用 t.execute 的 onclick 方法中调用 login。这就是我的异步任务的样子：

```
package com.Keb3mr.workoutscheduler;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import android.os.AsyncTask;
import android.util.Log;

public class LoginTask extends AsyncTask<Void, Void, HttpResponse> {

    private HttpEntity entity_;

    private String url_;

    private HttpCallback callback_;

    public LoginTask(HttpEntity entity, String url, HttpCallback callback){
        super();
        entity_ = entity;
        url_ = url;
        callback_ = callback;
    }

    @Override
    protected void onPostExecute(HttpResponse result) {
        // TODO Auto-generated method stub
        Log.i("onPost", "executing");
        super.onPostExecute(result);
        callback_.onResponse(result);

    }

    @Override
    protected HttpResponse doInBackground(Void... params) {
        // TODO Auto-generated method stub
        Log.i("doinbackground", "executing");
        HttpResponse resp = null;
        try{
            HttpPost post = new HttpPost(url_);
            Log.i("doinbackground", "httppst");
            post.setEntity(entity_);
            Log.i("doinbackground", "setentity");
            HttpClient client = new DefaultHttpClient();
            Log.i("doinbackground", "client");
            resp = client.execute(post);
            Log.i("doinbackground", "resp");
        }
        catch(Exception e){
            Log.i("doinbackground", "error");
            e.printStackTrace();

        }
        return resp;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:53:42.643

请检查您是否在清单中授予互联网权限..如果互联网工作正常，请检查您的下载网址是否有效..如果您的下载网址无效，它会在 doInBackground 方法中引发异常，因此 onPostExecute 方法不会调用

# system-verilog - 如何在 SystemVerilog 中将字节与字符串连接起来

> ID：13226035
> 
> 赞同：1
> 
> 时间：2012-11-05T04:45:01.757
> 
> 标签：system-verilog

在 ModelSim 中，以下代码可以正常工作：

```
string r;
string s;
// ...assign some string to s...
integer i;
r = "";
for (i=s.len()-1; i>=0; i=i-1) begin
    if (s[i] != "\n") begin
        r = {s[i], r};
    end
end 
```

在 Aldec Riviera 中，这会导致编译错误`Incompatible types at assignment: .r<string> <- s[i]<byte>`。

阅读 SystemVerilog LRM，我可以看到花括号似乎只支持连接字符串，而不是字节。因此，要么 ModelSim 对 LRM 不那么严格，要么它隐式地将`s[i]`字节转换为一个字符的字符串（这在这种情况下似乎是明智的）。在里维埃拉，看起来我必须`s[i]`手动将字节转换为一个字符的字符串。什么是最有效和最简洁的解决方案（如果可能，不必引入临时变量）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:33:40.287

你是对的，ModelSim 正在接受无效代码。该规范明确定义了索引和分配所涉及的类型。

> 字符串变量的单个字符是字节类型。

...

> 整数类型的值可以分配给字符串变量，但需要强制转换。

该规范进一步详细说明了基于操作数的连接运算符的结果：

> 每个操作数可以是字符串文字或字符串类型的表达式。

使用演员表：

```
string r;
string s;
// ...assign some string to s...
integer i;
r = "";
for (i=s.len()-1; i>=0; i=i-1) begin
    if (s[i] != "\n") begin
        r = {string'(s[i]), r};
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:01:37.543

我不确定以下代码在模拟器中是否 100% OK `Aldec Riviera`，因为我尝试你和我的都可以`VCS`。如果需要返回s的字符串类型，可以试试string方法`substr()`。

```
for (i=s.len()-1; i>=0; i=i-1) begin
    if (s[i] != "\n") begin
        r = {s.substr(i,i), r};
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-30T10:16:18.387

使用 atobin()/bintoa() 函数在 ASCII 和二进制之间进行转换。然后，您可以将连接运算符“{}”与字符串/二进制值一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T07:44:50.387

这是一个小代码示例：

首先，一个从字符串创建字节动态数组的示例。动态字节数组包含每个字符的 ASCII 代码数字表示。优点是这可以是例如随机的，但字符串不能是随机的。

（创建做例如

```
for(i=0;i<stringvar.len(); i++) begin 
byte_din_array = {byte_din_array ,stringvar[i]}; //stringvar[i] will return empty byte if  the index would be beyond the string length
//The advantage of using stringvar[i] instead of stringvar.atoi(i) is that 
//the string can have all ASCII characters and not just numbers.
//Disadvantage is that the byte contains the ASCII CODE "number" 
//representation of the character and that is not human readable
end 
```

）。

这是将动态字节数组转换回连接字符串的示例。您可能已经使用以前的动态数组在 xfer 中部分随机化（带有约束）或在 post_randomize 中更改。

```
function string convert_byte_array2string(byte stringdescriptionholder[]);
    automatic string temp_str="";
    automatic byte byte_temp;
    automatic string str_test;
    for ( int unsigned i = 0; i<stringdescriptionholder.size(); i++)  begin
        i=i;//debug breakpoint
        byte_temp = stringdescriptionholder[i];
        str_test = string'(byte_temp); //the "string cast" will convert the numeric ASCII representation in a string character
        temp_str = {temp_str,str_test};
    end
    return temp_str;
endfunction 
```

# php - 错误：在 php(jqgrid) 中发生错误？我需要这个参考吗？

> ID：13226036
> 
> 赞同：-2
> 
> 时间：2012-11-05T04:45:05.250
> 
> 标签：php, jqgrid

```
TypeError: b(e.target).closest is not a function
[Break On This Error]   

Q=b(e.target).closest("tr.jqgrow"); 
```

这个错误发生在我的过程中。

发生此错误的原因是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:00:34.827

最接近（）是一个jQuery函数。你有没有包括jquery？

另请注意，这不是 php 问题，而是 javascript 或 jquery。

# python - 在python中计算两个向量之间的角度

> ID：13226038
> 
> 赞同：9
> 
> 时间：2012-11-05T04:45:28.423
> 
> 标签：python, math

我正在尝试计算python中两条线之间的角度。我在互联网上搜索并找到了如何做到这一点的方程式。但我并不总是得到准确的结果。有些结果显然是错误的，而其他结果似乎是正确的。我的代码如下：

```
def angle(pt1,pt2):
    m1 = (pt1.getY() - pt1.getY())/1
    m2 = (pt2.getY() - pt1.getY())/(pt2.getX()-pt1.getX())

    tnAngle = (m1-m2)/(1+(m1*m2))
    return math.atan(tnAngle)

def calculate(pt,ls):
    i=2
    for x in ls:
        pt2 = point(x,i)
        i=i+1
        ang = angle(pt,pt2)*180/math.pi
        ang = ang * (-1)
        print ang

pt = point(3,1)
ls = [1,7,0,4,9,6,150]

calculate(pt,ls) 
```

它产生的结果是：

```
45.0
0.0
45.0
-75.9637565321
0.0
-63.4349488229
0.0 
```

问题是我不明白为什么第二个结果，第五个和最后一个结果为零，它们相交，因为它们共享一个点，而另一个点不重复，因为数组中的值不同。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-05T04:56:23.823

如果您的角度公式将失败

```
pt2.getX() == pt1.getX() 
```

（也就是说，如果 pt1 和 pt2 位于一条垂直线上）因为你不能除以零。( `m2`，斜率，将是无限的。)

还

```
m1 = (pt1.getY() - pt1.getY())/1 
```

将永远为零。所以至少，你的公式可以简化为斜率的反正切。但是，我不会打扰，因为该公式不适用于所有可能的点。

相反，用于计算两个向量（有向线段）之间角度的更稳健的方法（实际上是标准方法）是使用[点积公式](http://en.wikipedia.org/wiki/Dot_product#Geometric_interpretation)：

![在此处输入图像描述](../Images/f6a2b28f07e255b99524efadd238b1ad.png)

其中 if `a = (x1, y1)`, `b = (x2, y2)`, then`<a,b>`等于`x1*x2 + y1*y2`, `||a||`是向量 的长度`a`, 即`sqrt(x1**2 + y1**2)`.

* * *

```
import math

def angle(vector1, vector2):
    x1, y1 = vector1
    x2, y2 = vector2
    inner_product = x1*x2 + y1*y2
    len1 = math.hypot(x1, y1)
    len2 = math.hypot(x2, y2)
    return math.acos(inner_product/(len1*len2))

def calculate(pt, ls):
    i = 2
    for x in ls:
        pt2 = (x, i)
        i += 1
        ang = math.degrees(angle(pt, pt2))
        ang = ang * (-1)
        print(ang)

pt = (3, 1)
ls = [1,7,0,4,9,6,150]

calculate(pt, ls) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-10-15T21:45:00.203

这是我最终使用的，全部使用 numpy 并且范围介于 - 到

```
import numpy as np
def get_angle(p0, p1=np.array([0,0]), p2=None):
    ''' compute angle (in degrees) for p0p1p2 corner
    Inputs:
        p0,p1,p2 - points in the form of [x,y]
    '''
    if p2 is None:
        p2 = p1 + np.array([1, 0])
    v0 = np.array(p0) - np.array(p1)
    v1 = np.array(p2) - np.array(p1)

    angle = np.math.atan2(np.linalg.det([v0,v1]),np.dot(v0,v1))
    return np.degrees(angle) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-05T04:55:55.730

看起来您正在使用 Python2，`/`如果两个参数都是 int，它将在哪里进行整数除法。要获得 Python3 的行为，您可以将其放在文件的顶部

```
from __future__ import division 
```

# cuda - 评估 cuda 中的所有组合

> ID：13226042
> 
> 赞同：0
> 
> 时间：2012-11-05T04:45:41.177
> 
> 标签：cuda

全部。我有 3 个不同长度的数组，比如 x、y、z。我想计算`f(x)*f(y)*f(z)*f(x,y,z)`f 是不同函数的总和。目前，我在 C 中使用递归循环。因为数字非常大，C 代码非常慢。我只是想知道在 CUDA 中最好的方法是什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:58:23.647

你问的问题有点含糊。

首先，将数组 x,y,z 传输到 GPU 全局内存中。如果 x+y+z< 512，则可以使用共享内存的概念（无需循环的帮助）。如果不满意，可以使用循环。您分别评估 f(x),f(y),f(z),f(x,y,z) 并将它们相乘（每次乘法一个线程）。此外，长度 x,y,z 应与数组乘法属性一致。

# javascript - 创建一个 JS 类：IIFE vs 返回原型

> ID：13226043
> 
> 赞同：19
> 
> 时间：2012-11-05T04:45:45.127
> 
> 标签：javascript, class, prototype, iife

让我们看两个示例，我将在其中尝试解释我想要理解的内容。

```
var Car = function(){
  // Init class
  function Car() { };
  // Private func/vars
  var private = { color:'red' };
  // Public func/vars
  Car.prototype = {
    newColor: function(color) { private.color = color },
    getColor: function() { return private.color }
  };

  return Car.prototype; // return with prototype
};

var myCar = new Car(); 
```

和：

```
var Car = (function(){
  // Init class
  function Car() { };
  // Private func/vars
  var private = { color:'red' };
  // Public func/vars
  Car.prototype = {
    newColor: function(color) { private.color = color },
    getColor: function() { return private.color }
  };

  return Car; // avoid prototype adding parentheses on next line;
})();

var myCar = new Car(); 
```

让我们看看！，这两个类都是作为函数表达式创建的，并且都同样工作。它们之间的唯一区别是： 第一个返回 Car 函数及其原型属性。第二个工作返回 Car 函数，避免原型属性，而是使用 IIFE。

`return Car.prototype;`使用和避免 IIFE 和使用`return Car;`使用 IIFE （类声明末尾的括号）有什么区别。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T05:19:32.817

第二个代码示例是实现您正在寻找的正确方法。您创建一个立即执行的函数，在其中创建一个新函数，添加到它的原型，然后返回它。

第一个示例有点奇怪，并没有完全正确地创建构造函数。线

```
return Car.prototype; // return with prototype 
```

使您的 Car 函数始终简单地返回您之前分配给的对象文字`Car.prototype`。这会覆盖调用的函数的正常行为`new`

* * *

只需要注意一件事，这一行：

```
Car.prototype = {
   newColor: function(color) { private.color = color },
   getColor: function() { return private.color }
}; 
```

将导致`constructor`新创建对象的属性不再指向您的 Car 函数。如果这对您很重要，有两种简单的方法可以解决此问题。

```
Car.prototype = {
   newColor: function(color) { private.color = color },
   getColor: function() { return private.color }
};
Car.prototype.constructor = Car;   // <-------- add this line 
```

或者把上面的改成

```
Car.prototype.newColor = function(color) { private.color = color };
Car.prototype.getColor = function() { return private.color }; 
```

# javascript - 如何在 jquery mobile 中保持部分页面静态

> ID：13226047
> 
> 赞同：1
> 
> 时间：2012-11-05T04:46:24.230
> 
> 标签：javascript, jquery-mobile

我想使用 jquery mobile 开发一个单页应用程序，并希望在侧面有一个菜单（类似于 iphone 的 facebook 应用程序）。这个侧边菜单需要在页面上保持静态，点击链接时只有页面的主要内容发生变化。

即我想要一个`<div>`外部`data-role="page"`仍然有jquery 移动控件，但不随页面内容而改变。

如果我尝试这样做，我找不到任何方法将 jquery 移动样式应用于侧菜单中的控件。

我在这里整理了我的例子：http: [//jsfiddle.net/ka6pz/5/](http://jsfiddle.net/ka6pz/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:37:06.840

有人在另一个论坛上回答了这个问题：[https ://forum.jquery.com/topic/jquery-mobile-elements-outside-page](https://forum.jquery.com/topic/jquery-mobile-elements-outside-page)

# java - 设置链表Java

> ID：13226049
> 
> 赞同：0
> 
> 时间：2012-11-05T04:46:51.757
> 
> 标签：java, linked-list

我正在研究一些基本的链接列表的东西，比如插入、删除、转到列表的前面或末尾，基本上我理解了所有这些东西的概念，一旦我有了我想的列表，但我在设置时遇到了麻烦名单。我想知道你们能告诉我我是否朝着正确的方向前进。（主要是设置）这是我到目前为止所拥有的：

```
public class List {

private int size;
private List linkedList;
List head;
List cur;
List next;

/**
 * Creates an empty list.
 * @pre 
 * @post
 */
public List(){
    linkedList = new List();
    this.head = null;
    cur = head; 
}

/**
 * Delete the current element from this list. The element after the deleted element becomes the new current. 
 * If that's not possible, then the element before the deleted element becomes the new current. 
 * If that is also not possible, then you need to recognize what state the list is in and define current accordingly.
 * Nothing should be done if a delete is not possible.
 * @pre
 * @post
 */ 
public void delete(){

}

/**
 * Get the value of the current element. If this is not possible, throw an IllegalArgumentException.
 * @pre the list is not empty
 * @post
 * @return value of the current element.
 */
public char get(){
    return getItem(cur);
}

/**
 * Go to the last element of the list. If this is not possible, don't change the cursor.
 * @pre
 * @post
 */
public void goLast(){
    while (cur.next != null){
        cur = cur.next;
    }
}

/**
 * Advance the cursor to the next element. If this is not possible, don't change the cursor.
 * @pre
 * @post
 */
public void goNext(){
    if(cur.next != null){
        cur = cur.next;}
    //else do nothing
}

/**
 * Retreat the cursor to the previous element. If this is not possible, don't change the cursor.
 * @pre
 * @post
 */
public void goPrev(){

}

/**
 * Go to top of the list. This is the position before the first element.
 * @pre
 * @post
 */
public void goTop(){

}

/**
 * Go to first element of the list. If this is not possible, don't change the cursor.
 * @pre
 * @post
 */
public void goFirst(){

}

/**
 * Insert the given parameter after the current element. The newly inserted element becomes the current element.
 * @pre
 * @post
 * @param newVal : value to insert after the current element.
 */
public void insert(char newVal){
    cur.setItem(newVal);
    size++;
}

/**
 * Determines if this list is empty. Empty means this list has no elements.
 * @pre
 * @post
 * @return true if the list is empty.
 */
public boolean isEmpty(){
    return head == null;
}

/**
 * Determines the size of the list. The size of the list is the number of elements in the list.
 * @pre
 * @post
 * @return size which is the number of elements in the list.
 */
public int size(){
    return size;
}

public class Node {

    private char item;
    private Node next;

    public Node() {
    }

    public Node(char item) {
            this.item = item;
    }

    public Node(char item, Node next) {
        this.item = item;
        this.next = next;
    }

    public char getItem() {
        return this.item;
    }

    public void setItem(char item) {
        this.item = item;
    }

    public Node getNext() {
        return this.next;
    }

    public void setNext(Node next) {
        this.next = next;
    }
} 
```

}

我的节点类没问题（我认为它工作正常），但是有必要拥​​有那个类吗？或者我可以不使用它就去做吗（只是好奇）。例如，在列表类中的方法 get() 上，我不能从节点类调用 getItem() 方法，因为即使我认为这是节点类的重点，它也会出错。

底线我只是想确保即时设置列表正确。

感谢您的帮助，我是链表的新手，所以请多多包涵！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:00:59.483

我认为你遗漏了一些非常重要的东西——更多的评论。特别是，我认为你应该写一个注释块来解释列表是如何表示的，包括它在空时应该是什么样子，有一个元素，有多个元素。用纸和铅笔完成几个场景。

当你**知道**一个空列表应该是什么样子，并确定表示可以满足你的需要时，构造函数将非常容易编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:02:42.497

据我所理解。你正在制作一个链表，所以 List 对象应该以某种方式使用 Node 对象，对吗？您希望列表由头（节点）、当前（节点）、下一个（也是一个节点）以及大小（int）表示。

我不相信拥有`private List linkedList;`. 为了更好地理解它为什么不起作用，尝试手动初始化一个列表，你会发现自己正在初始化一个新列表，这将导致初始化一个新列表，......等等。这就是你得到一个无论我在设计本身中告诉您的其他问题如何，都会出错。

继续努力。您还需要增强删除的实现。要从列表中删除节点，您不仅要减小大小，还应使其上一个节点引用其下一个节点。类似的东西`prev.next = node.next`。但是继续努力，你会在这个练习中学到很多东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:58:46.787

`head`，`cur`并且`last`应该是`Node`s，而不是`List`s。

您还应该声明`Node`为`Node<T>`，然后它可以包含任何类型的对象（而不仅仅是 a `char`）。您必须将所有单词替换为`char`，因此`T`您的课程`List`也应该是`List<T>`。

`delete`实际上需要删除一个元素，现在不需要。

此外，您已经提供了`List`迭代器功能（使用`cur`）......您最好将该功能分离到一个单独的类中（或将您的列表重命名为“IteratedList”）或其他东西。

否则一个相当不错的开始！

# notepad++ - 有什么方法可以在任何文本编辑器中做到这一点？

> ID：13226054
> 
> 赞同：5
> 
> 时间：2012-11-05T04:47:05.373
> 
> 标签：notepad++, notepad

我有一个文件，就像

```
email = myemail@gmail.com
email = myemail@gmail.com
email = myemail@gmail.com 
```

我能做到这样吗？

```
email = myemail1@gmail.com
email = myemail2@gmail.com
email = myemail3@gmail.com 
```

我可以在任何文本编辑器中执行此操作吗？或者还有其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:03:48.613

我会说使用[Vim](http://www.vim.org/about.php)，但对于 Notepad++：

> 按住 Alt 并选择要更改的数字列。然后转到 Edit->Column Editor 并在出现的窗口中选择 Number to Insert 单选按钮。然后指定您的初始数字和增量，然后单击“确定”。它应该写出递增的数字。

[从这里](https://stackoverflow.com/questions/7602816/notepad-incrementally-replace)复制。

要应用它，请执行一次，`@gmail.com`然后是`1,2,3`，最后是前缀`email = myemail`。

我真的很喜欢（再次）推荐 vim，你可以用单行做很多这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:50:30.853

将其敲入excel并编写一个公式以在@符号之前插入行号。=Substitute(YourCell, "@", Row() & "@")

编辑：

假设您的电子邮件位于单元格 A1 中，则公式为

```
=SUBSTITUTE(A1,"@",ROW()&"@") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:07:07.520

SlickEdit 可以进行块选择，然后进行枚举插入。

基本上，在“@”之前选择一个垂直块，高 3 行。

然后插入一个从 1 开始的枚举。

# macros - Racket 与 Scheme 宏

> ID：13226058
> 
> 赞同：23
> 
> 时间：2012-11-05T04:47:19.650
> 
> 标签：macros, scheme, racket

球拍宏是否具有比 Scheme 或 Common Lisp 中的功能更高级的功能？我怀疑是这样，特别是关于模块、名称空间和范围等，但我很感激 Racket 宏可以做什么的简单概述，如果有的话，其他 lisps 不能。

此外，Scheme/CL 还向开发人员公开了阅读器层，使用它，在那些 lisps 中是否不可能像在 Racket 中那样创建全新的语言（不仅仅是 s-expr 宏），例如 Scribble？

换句话说，Racket 仅仅是一种围绕“面向语言的编程”的哲学/约定，并为此提供了方便的句法包装器，还是从根本上扩展了 Scheme 以完成该语言在技术上不可能完成的事情？

非常感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T14:33:20.353

使“面向语言的编程”在 Racket 中工作的两个关键特性是：

*   模块系统允许指定基础语言
*   上下文相关的宏

第一个子弹基本上是做什么`#lang`的。让模块系统负责设置阅读器，并且给定模块中可用的绑定允许轻松使用不同的语言。如果没有这个，使用像 Scribble 或`at-exp`.

第二个是 Racket 提供了可覆盖的上下文相关宏，例如`#%app`、`#%module-begin`等，允许自定义模块内的*每个*功能应用程序或整个模块。例如，这允许在整个模块上添加类型检查通道。

这不是帮助在 Racket 中构建语言的功能的详尽列表。如果您有兴趣阅读有关它的更多信息，[“Languages as Libraries”](http://blog.racket-lang.org/2011/03/languages-as-libraries-pldi-2011.html)论文值得一读。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-05T10:48:49.660

我建议阅读论文[“可组合和可编译的宏 - 你什么时候想要它？”](http://www.cs.utah.edu/plt/publications/macromod.pdf) 马修·弗拉特。

它解释了宏和模块如何在 Racket 中协同工作。

然后在 Racket 中实现一种小语言——比如 TinyBasic。然后与其他语言进行比较。

更新

[http://www.cs.utah.edu/plt/publications/jfp12-draft-fcdf.pdf](http://www.cs.utah.edu/plt/publications/jfp12-draft-fcdf.pdf)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-11T19:27:48.663

在@Scott 将其发布到列表后，另请参阅[Matthew 对同一问题的回复，以及更新的概述论文。](http://lists.racket-lang.org/users/archive/2012-November/054731.html)

# php - 如何通过其标签名称从 DOMElement 在 php 中获取标签值

> ID：13226064
> 
> 赞同：0
> 
> 时间：2012-11-05T04:48:33.350
> 
> 标签：php, dom

```
<?xml version="1.0" encoding="utf-8"?>
<info>
   <report id="1">
      <book>
          <title>A</title>
          <price>10</price>
      </book>
      <author>
          <name>xyz</name>
          <mail>m.m@m</mail>
      </author>
   </report>
   <report id="2">
       <book>
           <title>B</title>
           <price>11</price>
       </book>
       <author>
           <name>xyz</name>
           <mail>m.m@m</mail>
       </author>
   </report>
   <report id="3">
       <book>
           <title>C</title>
           <price>13</price>
       </book>
       <author>
           <name>xyz</name>
           <mail>m.m@m</mail>           
       </author>
  </report>
</info> 
```

`"title="A",price="10" and name="xyz",mail="m.m@m"`这是我的 xml，我想在这里使用它的标记名（如）检索每个报告及其标记值

```
$reportList = $document->getElementsByTagName('report');
foreach($reportList  as $reportNode)
{
    $books = $reportNode->getElementsByTagName('book');
    foreach($books as $book)
    {
        return $book->nodeValues;
    } 
```

它返回“ `A 10`”但我想要`"title="A",price="10"`

# asp.net - IIS 7 中的 asp.net mvc3 应用程序主机

> ID：13226069
> 
> 赞同：0
> 
> 时间：2012-11-05T04:49:02.533
> 
> 标签：asp.net, asp.net-mvc-3, iis

我有两个 Web 应用程序第一个是：ApplicationA 由 asp.net 开发 第二个是：ApplicationB 由 asp.net mvc3 开发

我的第一个应用程序“ApplicationA”主机作为默认网站并且运行良好 //www.appliocationa.com

现在我想将我的第二个应用程序“applicationB”作为子应用程序托管

喜欢 //www.appliocationa.com/applicationb

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:14:54.220

从你的评论

> 面临以下错误：403 - 禁止访问：访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

您遇到的此错误与托管两个 Web 应用程序无关。

确保您的网站运行的帐户可以访问本地文件系统。II 还建议检查您的 IIS 站点是否指向错误的应用程序池。

直接来自msdn .....

> 默认情况下，网络服务帐户对 IIS 服务器根文件夹具有读取和执行权限。IIS 服务器根文件夹名为 WWWroot。这意味着部署在根文件夹中的 ASP.NET 应用程序已经对其应用程序文件夹具有读取和执行权限。但是，如果您的 ASP.NET 应用程序需要使用其他位置的文件或文件夹，则必须专门启用访问权限。

授予对特定文件的读取、写入和修改权限

*   在 Windows 资源管理器中，找到并选择所需的文件。
*   右键单击该文件，然后单击“属性”。
*   在“属性”对话框中，单击“安全”选项卡。
*   在安全选项卡上，检查用户列表。如果网络服务
*   帐号未列出，请添加。
*   在“属性”对话框中，单击“网络服务”用户名，然后在“网络服务的权限”部分中，选择“读取”、“写入”和“修改”权限。
*   单击应用，然后单击确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:55:32.233

1.  使用 .NET4.0 为您的 MVC3 站点创建一个新的应用程序池。例如 AppB

2.  在 IIS 中右键单击您的应用程序A

3.  添加应用，选择应用到AppB

应该没问题，没有 web.config 更改。

# sql - SQL 选择销售额最低的员工的所有订单

> ID：13226070
> 
> 赞同：0
> 
> 时间：2012-11-05T04:49:08.450
> 
> 标签：sql, oracle, oracle10g

我正在尝试从以下数据库模式中选择所有销售额最低的员工：

> 员工（eno、ename、zip、hdate）
> 
> 零件（pno、pname、qoh、价格、级别）
> 
> 客户（cno、cname、street、zip、电话）
> 
> 订单（ono、cno、eno、收货、发货）
> 
> Odetails(ono, pno, qty)
> 
> 邮政编码（邮编，城市）

我无法获得我正在处理的查询每位员工的总销售额而没有错误。我的问题是获取与员工相关的每个订单的数量 * 价格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:08:19.113

会不会是这样的：

```
SELECT Employees.eno, Employees.ename, SUM(Odetails.qty * Parts.price) AS Sales
FROM Employees JOIN
 Orders ON Employees.eno = Orders.eno JOIN
 Odetails ON Orders.ono = Odetails.ono JOIN
 Parts ON Parts.pno = Odetails.pno
GROUP BY Employees.eno, Employees.ename 
```

上面的选择查询（SQL Server）将返回一个员工列表及其各自的 eno（猜测员工编号）和 ename 以及他们的数量的总和乘以零件的价格，然后您将能够确定员工以最低销售额。您可以将上面的选择用作派生表，然后按销售额列排序，以查看销售额最少、第二少、第三等的顺序。我将联接简单地保留为“JOIN”，因为我不知道您的数据库，因为它可能是 INNER JOIN 或 OUTER JOIN。

希望这有助于交配。

# android - 无法在 Android 中实现 WifiDirectDemo 示例

> ID：13226072
> 
> 赞同：1
> 
> 时间：2012-11-05T04:49:17.230
> 
> 标签：android, android-layout

我正在尝试实现 android 文档中给出的 WifiDirectDemo 示例。此处提供指南

[http://developer.android.com/guide/topics/connectivity/wifip2p.html](http://developer.android.com/guide/topics/connectivity/wifip2p.html)

以及文档示例目录中的完整代码。

WiFiDirectBroadcastReceiver 类给出了一个错误，即具有 ids frag_list 和 frag_detail 的片段不存在，尽管我已经检查了它在 main.xml 中的存在。

这是错误日志：

正在生成资源 ID...

处理 BuildConfig 类...

生成 BuildConfig 类。

编译7个源文件到C:\Users\HP\Documents\NetBeansProjects\AndroidApplication11\bin\classes

C:\Users\HP\Documents\NetBeansProjects\AndroidApplication11\src\com\example\android\wifidirect\WiFiDirectBroadcastReceiver.java:79: 错误：找不到符号 manager.requestPeers(channel, (PeerListListener) activity.getFragmentManager().findFragmentById (R.id.frag_list));

符号：变量 frag_list

位置：班级ID

提前感谢您的任何帮助！

# string - 有没有办法为此目的使用字符串修剪

> ID：13226075
> 
> 赞同：1
> 
> 时间：2012-11-05T04:49:24.550
> 
> 标签：string, tcl, trim

我有一个像“aab”这样的随机表达式，我需要从这个表达式中修剪“ab”。有没有办法为此目的使用“string trimright”？（我想要第一个字符“a”）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:01:19.203

不，你不能使用`string trimright`. 正如手册页所说，`string trimright`删除属于第二个参数的*任何尾随字符。*因此，如果你这样做

```
string trimright a.a.b a.b 
```

它从末尾开始`a.a.b`并删除任何`a`,`.`或`b`, 留下空字符串。

要执行您需要的操作，您可以在`regsub`命令中使用正则表达式：

```
regsub {a\.b$} a.a.b "" 
```

给你正确的字符串

```
a. 
```

正则表达式（第一个参数）表示：取一个`a`字符，后跟一个文字`.`字符（用反斜杠转义，因为`.`表示*任何*字符），然后是`b`字符串末尾的 a （`$`）。

这样，您不仅限于`a`and`b`字符，还可以使其更通用：

```
regsub {.\..$} $string "" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T11:51:58.180

要在末尾删除特定字符串，请不要使用`string trimright`（它的第二个参数实际上是一个*字符集*，只是碰巧写成一个字符串）。相反，您应该使用`regsub`如下代码：

```
proc removeIfLast {mainString toRemove} {
    set r [string length $toRemove]
    if {$toRemove eq [string range $mainString end-[expr {$r-1}] end]} {
        return [string range $mainString 0 end-$r]
    }
    return $mainString
} 
```

这将执行此操作（来自交互式会话）：

```
% removeIfLast "a.a.b" "a.b"
a. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T13:52:22.133

如果字符模式始终是*“<something>* .*<something>...*”，并且如果第一个*<something> 是你想要的，*那么你最好选择：

```
lindex [split $input .] 0 
```

这将在句点上拆分输入，然后为您提供第一个元素。

# magento-1.7 - 致命错误：调用未定义函数 curl_setopt()

> ID：13226076
> 
> 赞同：5
> 
> 时间：2012-11-05T04:49:27.220
> 
> 标签：magento-1.7, magento-1.6, magento

每件事都在我的本地主机上运行良好，但是当我将它上传到服务器之后，每当我尝试登录我的管理面板时，它就会出现以下错误。

> 致命错误：在第 87 行调用 D:\INETPUB\VHOSTS\lostandfound.co.in\nityapusta\magento\jewellery\lib\Varien\Http\Adapter\Curl.php 中的未定义函数 curl_setopt()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T11:27:20.687

您必须启用 CURL 并重新启动 XAMPP/WAMP/MAMP。

1.  转到 php.ini 文件。
2.  通过取消注释“extension=php_curl.dll”之前的分号来启用 Curl。
3.  重新启动您的服务器 - XAMPP/WAMP/MAMP。

如果您使用的是实时服务器，请联系您的托管服务提供商支持以获得这方面的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-04T02:16:38.137

您可能使用的是 Windows 7/8 64 位，有一个解决方案：用此文件替换您的扩展 php_curl.dll：[http://www.mediafire.com/download/qwgdzgccthzwc15/php_curl-5.3.13-VC9-x64。压缩](http://www.mediafire.com/download/qwgdzgccthzwc15/php_curl-5.3.13-VC9-x64.zip)

这个对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T17:03:51.450

通过取消注释 php.ini 文件中“extension=php_curl.dll”之前的分号来启用 Curl，您需要重新启动 Apache 服务器才能使更改生效。我有类似的问题，我必须重新启动 Apache 才能使其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T05:31:13.697

```
After so many hours of trying finally i found it's solution and which are given below .
Step1-Navigate to your php folder in XAMPP or WAMP or In WebHost Control panel.
Step2-Find the php.ini file.
step3-Find ";extension=php_curl.dll".
Step4-Remove ";" from ";extension=php_curl.dll".
Step5-look like this extension=php_curl.dll.
Step6-Save it.

That's it... 
```

# javascript - 为什么浏览器会泄漏内存？

> ID：13226078
> 
> 赞同：3
> 
> 时间：2012-11-05T04:49:28.157
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, browser

我和一位同事正在谈论浏览器（在项目中使用浏览器控件），并且所有浏览器（Firefox、Chrome、IE、Opera）都显示出相同的特性或使用它们的副作用，并且是'泄漏内存'。

有人可以解释为什么会这样吗？当然，与任何形式的代码一样，应该有适当的垃圾收集吗？

*   PS。我已经阅读了一些关于为什么从开发人员的角度会发生这种情况的防御模式。我知道 Crockford 在 IE 上写的一篇文章；但为什么每个浏览器都有问题的症状？

谢谢

# javascript - JayData 与 WebAPI

> ID：13226079
> 
> 赞同：3
> 
> 时间：2012-11-05T04:49:32.163
> 
> 标签：javascript, asp.net-web-api, jaydata

有没有将 JayData 与 WebAPI 结合使用的示例？它不是 OData，而只是一组端点：

/api/项目 /api/users /api/something

我只是在寻找一个简单的解决方案来将我的 webapi 数据发送给客户端，并在更改以更新后端时将其发回。如果有其他工具可以更好地与 WebAPI 配合使用，那我很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:11:02.577

我们即将发布 JayData ItemStore API，让您无需实际的 OData 元数据服务即可连接到 OData 端点，非常适合 WebAPI。

我今天尝试在这里向您提交一个示例...

更新：嗯，一个月过去了，但最后，这是一个例子：[WebAPI with JayData - 1st session](http://jaydata.org/blog/how-to-use-jaydata-with-asp.net-web-api---i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:10:14.223

web api odata 包增加了对构建您自己的 $metadata 的支持。请从 Install-Package Microsoft.Data.OData.Contrib -Pre 安装包。

ODataModelBuilder 可以显式构建模型，而 ODataConventionModelBuilder 提供了一种更便捷的方式来构建基于模型的约定，例如识别 DataMember 属性。

请查看[博客](http://blogs.msdn.com/b/alexj/archive/2012/11/02/odata-in-webapi-microsoft-asp-net-web-api-odata-0-2-0-alpha-release.aspx)和[示例](http://aspnet.codeplex.com/SourceControl/changeset/view/24eb37621fac#Samples/Net4/CS/WebApi/ODataServiceSample/ReadMe.txt)

# java - 如何关闭 IO？

> ID：13226083
> 
> 赞同：3
> 
> 时间：2012-11-05T04:50:14.107
> 
> 标签：java, io

当我管理 IO 时，我发现了一个问题。我曾经像这样关闭它：

```
try {
        // my code
    } catch (Exception e) {
        // my code
    } finally{
        if (is != null) {
            is.close();
        }
    } 
```

但是 close 方法也会抛出异常。如果我有多个 IO，我必须关闭所有 IO。所以代码可能是这样的：

```
try {
    // my code
} catch (Exception e) {
    // my code
} finally{
    if (is1 != null) {
        is1.close();
    }
    if(is2 != null{
        is2.close();
    }
    // many IOs
} 
```

如果 is1.close() 抛出异常，is2, is3 不会自行关闭。所以我必须输入许多 try-catch-finally 来控制它们。还有其他方法可以解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:04:16.683

`closeQuietly(...)`您可以使用Apache [IOUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)中的方法，而不是重新发明轮子。这些方法会压制任何`IOException`来自 的`close()`，并且还会处理参数所在的情况`null`。

您应该注意的唯一一件事是不要在具有未刷新数据的输出流上调用它。如果您这样做并且冲洗失败，您将不会听到它。如果您正在写入的数据很重要，那么不知道刷新失败将是一件坏事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:56:59.180

我使用这个小的静态实用程序类，其原则是如果你真的必须做一些（任何事情）冗长的错误处理或最终阻塞，那么至少撕掉它并实现一次该死的东西，而不是乱扔你的应用程序代码分心手头的任务：

```
package krc.utilz.io;

import java.io.Closeable;
import krc.utilz.reflectionz.Invoker;

public abstract class Clozer
{
  /**
   * close these "streams"
   * @param Closeable... "streams" to close.
   */
  public static void close(Closeable... streams) {
    Exception x = null;
    for(Closeable stream : streams) {
      if(stream==null) continue;
      try {
        stream.close();
      } catch (Exception e) {
        if(x!=null)x.printStackTrace();
        x = e;
      }
    }
    if(x!=null) throw new RuntimeIOException(x.getMessage(), x);
  }

  /**
   * Close all the given objects, regardless of any errors.
   * <ul>
   * <li>If a given object exposes a close method then it will be called. 
   * <li>If a given object does NOT expose a close method then a warning is 
   *   printed to stderr, and that object is otherwise ignored.
   * <li>If any invocation of object.close() throws an IOException then
   *     <ul>
   *     <li>we immediately printStackTrace
   *     <li>we continue to close all given objects
   *     <li>then at the end we throw an unchecked RuntimeIOException
   *     </ul>
   * </ul>
   * @param Object... objects to close.
   */
  public static void close(Object... objects) {
    Exception x = null;
    for(Object object : objects) {
      if(object==null) continue;
      try {
        Invoker.invoke(object, "close", new Object[]{} );
      } catch (NoSuchMethodException eaten) {
        // do nothing
      } catch (Exception e) {
        e.printStackTrace();
        x = e;
      }
    }
    if(x!=null) throw new RuntimeIOException(x.getMessage(), x);
  }

} 
```

`try{stream1.close();}catch{} try{stream2.close();}catch{}`请注意，与常见的cop-out不同，最后一个关闭异常（如果有）仍然被抛出。

干杯。基思。

# java - 我应该如何使用 Java 保存自定义游戏文件？

> ID：13226086
> 
> 赞同：2
> 
> 时间：2012-11-05T04:50:21.843
> 
> 标签：java, netbeans, save

我想创建一个类似于 Pokemon 的游戏，其中包含一些基本对象，例如人、咒语、药水和不同的地图，这实际上只是一个网格，每个正方形包含一个人或一个图像（如草）。由于通过逐行编码来创建所有这些对象会很乏味、难以可视化（尤其是地图）并且难以修改，我计划使用 Net Beans IDE 创建一个允许用户创建对象的 GUI前面提到过。

这是我的问题：一旦我弄清楚如何获取用户使用 GUI 输入的地图信息，我应该如何将其保存为类似 Pokemon 的应用程序可以读取的形式？是否有某种标准方法可以将对象保存到文件中，然后再在另一个应用程序中读取？还是我在这里采取了错误的方法？

我正在使用这个项目来学习更多关于 Java 编程的知识，并且刚刚开始使用 Net Beans；如果听起来我不知道我在说什么，请原谅我，因为我可能不知道。抱歉，这个问题太含糊了，但我不知道在以有组织的方式将大量对象保存到文件时从哪里开始，只是希望获得有关如何执行此操作的一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:55:08.647

听起来，Java 序列化将非常适合您的问题。唯一要注意的是，您要序列化的图形中的所有对象都需要实现`Serializable`接口......而某些库类没有实现它。（例如，您不能序列化线程或 GUI 对象。）解决方法是使用`transient`修饰符将不可序列化的对象排除在要序列化的对象图中。

以下是 Java 序列化的文档索引：

*   [http://docs.oracle.com/javase/7/docs/technotes/guides/serialization/index.html](http://docs.oracle.com/javase/7/docs/technotes/guides/serialization/index.html)

这是关于该主题的 Java 教程部分......如果您是 Java 新手，这可能是一个更好的起点。

*   [http://docs.oracle.com/javase/tutorial/essential/io/objectstreams.html](http://docs.oracle.com/javase/tutorial/essential/io/objectstreams.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:55:33.603

从这里的文档中查看 java 中的基本文件 i/o：http: [//docs.oracle.com/javase/1.5.0/docs/guide/io/index.html](http://docs.oracle.com/javase/1.5.0/docs/guide/io/index.html)并且最好使用序列化存储大量对象：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/io/Serializable.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/Serializable.html)

# silverlight - SL5 + Prism 4.1 动态 XAP 下载需要太多时间来加载

> ID：13226089
> 
> 赞同：1
> 
> 时间：2012-11-05T04:50:53.437
> 
> 标签：silverlight, prism, mef

我正在为我的应用程序使用 SL5、Telerik SL5 DLL、Prism4.1 和 MEF，并且我已将我的主应用程序拆分为更小的模块。而且，我启用了“通过启用应用程序库缓存来减少 XAP 大小”，这将我的主 xap 文件的大小从 1.5MB 减少到 700 KB（而且，module1.xap 和 module2.xap 文件大小减少到 91 KB 和145 KB）。

问题：当我尝试通过互联网浏览我的应用程序时，我的主 xap 文件会立即下载（它显示 100% 加载在 5 - 10 秒内）但问题是，它需要更多时间（有时，它需要更多比 main.xap 加载所用的时间）从 module1.xap 加载和显示第一个屏幕。我无法找出问题的根本原因。有人可以帮助我解决这个问题吗？

仅供参考，请参阅以下我的 clienbin 内容：

![在此处输入图像描述](../Images/962f0dcc8c082f20da2aea40f552906a.png)

Main.xap 文件内容：

![在此处输入图像描述](../Images/c954ef3ee2421b85f078c665f684c057.png)

Module1.xap 文件内容：

![在此处输入图像描述](../Images/1591ceb6d163fed62221d7044cedbbfc.png)

Module2.xzp 文件内容：

![在此处输入图像描述](../Images/4f0691a47a31d4b742c9f4283d425ebc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:39:37.380

尝试使用[Fiddler](http://www.fiddler2.com/fiddler2/)或您喜欢的浏览器的开发人员工具来查看您的应用程序加载模块和外部部件的内容和时间。

我认为您会遇到延迟，因为当您导航到模块 1 的第一个屏幕时会加载 Telerik 拉链（外部部件）。

为了减少加载时间，您可以使用更好的压缩工具重新压缩所有 .zip 文件。我正在使用带有压缩功能的[7zip](http://www.7-zip.org/)`Ultra`来减小 zip 文件的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:00:05.697

如果要按顺序加载模块，则应将模块相互依赖。您可以像这样在 modulecatalog.xaml 中执行此操作

```
<Modularity:ModuleInfo Ref="Main.xap" ModuleName="Main" ModuleType="Project.Main, Module, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" >
        <Modularity:ModuleInfo.DependsOn>
            <sys:String>Module1</sys:String>
        </Modularity:ModuleInfo.DependsOn> 
```

# android - 配置更改后的异步任务

> ID：13226097
> 
> 赞同：0
> 
> 时间：2012-11-05T04:51:55.603
> 
> 标签：android, android-asynctask, audiorecord

我是 Android 编程的相对论新手。

从我的活动中，我触发了执行此操作的 Asynctask：

onPreExecute()：设置 AudioRecord 并准备好录制

做背景（）：

```
while (!isCancelled())    {
    try
    {     
        shortsRead = recorder.read(intputbuffer,0,size);
        if (shortsRead <= 0)  {
            Log.e("AudioRead", "Audioread failed buffersize tried:" + " Sizeread:" + shortsRead);

           recorder.stop();
           recorder.release();
           Thread.sleep(500); 
           int bufferSizeInBytes = 4096 * 2;
           recorder = new AudioRecord(AudioSource.MIC, sampleRate, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, bufferSizeInBytes);
           recorder.startRecording();

        }
    }
    catch(Throwable x)
    { 
         Log.w("Audio", "Error reading voice audio", x);
    }

}
recorder.stop();
recorder.release();
Log.i("Audio", "Killed Audio Thread"); 
```

当我更改配置（切换方向）时，它将运行 onDestroy（取消异步任务），然后快速连续运行 onCreate。

我相信发生的是以前的 Asynctask 仍在运行并且无法及时取消并且 onCreate 会创建一个新的。新的无法拿到麦克风，因为它已经被我之前的异步任务占用了。

我可以做些什么来干净地做到这一点吗？

我尝试`android:configChanges="keyboardHidden|orientation"`在 AndroidManifest.xml 中使用，但从我读到的问题仍然存在......它只是在方向变化时被掩盖了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:05:21.103

当方向改变时 onCreate 将被触发。因此，如果您的应用支持方向，请不要在 onCreate 中启动任何 AsyncTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:06:05.647

[如何在屏幕旋转期间处理 AsyncTask？](https://stackoverflow.com/questions/2620917/how-to-handle-an-asynctask-during-screen-rotation). 看看 Romain Guy 的评论。也看看这个链接。[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/4dW4-KMUKJI](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/4dW4-KMUKJI)。这应该可以帮助你。

# iphone - 当 UIScrollview 停止滚动动画时获取标签的值

> ID：13226099
> 
> 赞同：0
> 
> 时间：2012-11-05T04:52:01.140
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我正在开发一个无限水平滚动视图来获取我的应用程序的月份和年份值。我找到了一种无限滚动的方法，但我不知道在滚动停止动画或拖动时如何获取标签的值。 ![我想在滚动结束时获取 March 标签的值](../Images/4aefb1ee613572ef90ad6371d17ab24c.png)

1.  当滚动结束动画/拖动或者我需要更改我的组件时，有什么方法可以使用我上面的组件获取月份值？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:29:28.140

有解决办法

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{

//some logics go here..........

    CGPoint point = scrollView.center; 

        for (UIView *myView in scrollView.subviews)
        {

            if(CGPointEqualToPoint(myView.center, point) == YES )
            {
                   if([myView isKindOfClass:[UILabel class]]) 
                  {
                    UILabel *label = (UILabel *)myView;
                    NSLog(@"Month is %@", label.text);
                  }
            }
        }
} 
```

上面的代码将返回滚动视图中心的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:25:17.210

这是一些从主视图中检索子视图的代码。

**- 在您的滚动委托 scrolldidEnd 方法中：**

```
UIView v = nil;
for(v in yourscroll.subviews){
 if ([v isKindOfClass:UILabel]){
      UILabel * lbl = v(UILabel *);
     if (lbl.tag == yourSelectedLabelTag){
       NSLog(lbl.text);
             }
      }
} 
```

注意：您必须在滚动视图中创建带有**标签**视图的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:55:42.707

这取决于您的 scrollView 实现，通常您可以在中心点获取子视图

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event 
```

检查[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)以获取详细信息。理想情况下，您的 scrollView 知道哪个视图被移动到中心，并且能够通过您的一些自定义方法返回它。

# mysql - 通过几列查找 MySQL 中的唯一值

> ID：13226101
> 
> 赞同：0
> 
> 时间：2012-11-05T04:52:28.690
> 
> 标签：mysql, count, unique-values

所以，我的表结构如下：

```
id user_agent user_ip
---------------------
18 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko)     Chrome/22.0.1229.94 Safari/537.4 4.3.2.1
13 Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4 1.2.3.4 
```

我如何才能仅基于两列（user_agent 和 user_ip）找到唯一值并对其进行计数？我刚刚尝试了以下解决方案：

```
SELECT user_agent, COUNT(*) c FROM statistics GROUP BY user_agent, user_ip HAVING c > 1; 
```

但它不会像我想要的那样工作。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:55:31.880

一个可能的原因可能是，用户代理和用户 ip 的组合在表中是唯一的，因此计数始终为 1。

去掉Having by 子句，看看结果。

# c# - 远程服务器返回错误：(403) Forbidden in Youtube api

> ID：13226103
> 
> 赞同：1
> 
> 时间：2012-11-05T04:52:33.000
> 
> 标签：c#, youtube-api

我正在使用 Youtube API 上传视频。它在我的本地机器上工作正常，但是在我将代码实现到服务器后它会抛出异常。

```
The remote server returned an error: (403) Forbidden. 
```

我已经正确地提到了用户名、developerkey、密码。你能请任何人帮助我，我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:26:47.707

HTTP 403 响应可能与许多不同的错误相关联，查看实际响应 HTTP 正文（或在 exception.Response 属性中报告的序列化版本）是确定确切原因的唯一方法。

但是，执行上传时出现 403 的一个非常常见的原因是配额错误。以下是更多详细信息： http: [//apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html](http://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html)

# c++ - 如何使用 C++ Win32 API 在组合框中显示域值是默认值？

> ID：13226107
> 
> 赞同：1
> 
> 时间：2012-11-05T04:52:50.853
> 
> 标签：c++, winapi, dialog, window

我正在使用 C++ Win32 API。

我有一个登录对话框。它有一个用户名文本框、密码文本框、域名组合框。

当我启动系统时，如何在默认组合框中显示域名？

例如：

raja 是系统名 techserve 是域名

我已经试过了

`ComboBox_SetCurSel(GetDlgItem(_hwnd, IDC_COMBO), 1);`

但在其他用户喜欢的情况下，

udhay 是系统名 techserve 是域名

它显示系统名称，即 udhay。

那么，如何显示 techserve(domainname) 是 Combobox 的默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:28:16.007

改用 ComboBox_SelectString ，它将更新编辑控件以显示项目已被选中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:16:38.453

嗯，可能是索引问题？第一项具有索引*0*，而不是*1*。

# r - 在 iGraph 中组合图形时如何保留顶点名称？

> ID：13226109
> 
> 赞同：2
> 
> 时间：2012-11-05T04:53:08.193
> 
> 标签：r, union, igraph

我正在尝试将图形与`graph.union`iGraph 结合起来，但是当我这样做时，生成的图形不会保留其顶点标签。

```
testGraph1 = barabasi.game(3, 
    m = 5,
    power = 0.6, 
    out.pref = TRUE,
    zero.appeal = 0.5,
    directed = TRUE)
V(testGraph1)$name = c('one', 'two', 'three')   

testGraph2 = barabasi.game(5, 
    m = 5,
    power = 0.6, 
    out.pref = TRUE,
    zero.appeal = 0.5,
    directed = TRUE)    
V(testGraph2)$name = c('one', 'two', 'three', 'four', 'five')   

combine = graph.union(testGraph1, testGraph2)
V(combine)$name #Is NULL 
```

我也尝试过使用`graph.union.by.name`，但我认为有一个错误，因为两个测试图都是有方向的，但我遇到了一个奇怪的错误。

```
combine = graph.union.by.name(testGraph1, testGraph2)
#Error: !is.directed(g1) & !is.directed(g2) is not TRUE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:37:35.450

graph.union.by.name 的开头似乎有一个与文档不匹配的检查。如果你删除它，并在最后一行添加一个定向选项，我认为你确实得到了你想要的：

```
gubm = function (g1, g2, dir=FALSE) 
{
  #stopifnot(!is.directed(g1) & !is.directed(g2))
    dv1 = igraph:::get.vertices.as.data.frame(g1)
    dv2 = igraph:::get.vertices.as.data.frame(g2)
    de1 = igraph:::get.edges.as.data.frame(g1)
    de2 = igraph:::get.edges.as.data.frame(g2)
    dv = igraph:::safer.merge(dv1, dv2, all = TRUE)
    de = igraph:::safer.merge(de1, de2, all = TRUE)
    g = igraph:::graph.data.frame(de, directed = dir, vertices = dv)
    return(g)
}

> combine=gubm(testGraph1,testGraph2,TRUE)
> V(combine)$name
[1] "one"   "three" "two"   "five"  "four" 
```

但是请检查大量示例以确保其行为正常。我怀疑 igraph 开发人员会在这里发现这一点，但您应该在[igraph 邮件列表](http://igraph.sourceforge.net)或[igraph 错误跟踪器](https://bugs.launchpad.net/igraph)中将其报告为错误。

我认为`graph.union`不保留名称的原因是因为不能保证调用中的所有图在它们的节点上都具有相同的属性，而且检查起来太麻烦了......

# php - 将 www.example.com 重定向到 example.com 的最佳方式是什么

> ID：13226110
> 
> 赞同：2
> 
> 时间：2012-11-05T04:53:14.933
> 
> 标签：php, .htaccess

希望你们做得好！将 www.example.com 重定向到 example.com 的最佳方式是什么。

我使用过 .htaccess ，但它在 Jquery POST 调用中给我带来了问题..

所以现在我很困惑我可以使用哪种方法来重定向 www

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T05:40:57.827

您不能在不丢失请求正文的情况下 301 重定向 POST 请求，这可能就是您收到 jquery 错误的原因。您可以确保 jquery 请求具有“www”。在主机名中删除，或者您只重定向`GET`或`HEAD`请求：

```
RewriteCond %{REQUEST_METHOD} (GET|HEAD)
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [L,R] 
```

# r - 向量化 for 循环

> ID：13226111
> 
> 赞同：1
> 
> 时间：2012-11-05T04:53:18.750
> 
> 标签：r, parallel-processing, data.table, vectorization

是否可以对以下函数 ( `f`) 进行矢量化？

我有一个向量`x`，我想`f`通过改变来最大化函数的输出值`p`。

但是这个函数很慢，因为它无论如何都没有向量化，并且想知道是否有一个好的方法来做到这一点。这个想法是在未来将其并行化，并可能用于`data.table`加速它

我的真实数据要大得多……所以我提供了一个模拟示例……

```
# My mock data 
x <- data.frame(x=rep(c(rep(c(0.2,-0.2),4),0.2,0.2,-0.2,0.2),20))

# The function to optimise for
f <- function(p,x){
    # Generate columns before filling
    x$multiplier <- NA
    x$cumulative <- NA

    for(i in 1:nrow(x)){
        # Going through each row systematically
        if(i==1){
            # If first row do a slightly different set of commands
            x[i,'multiplier'] <- 1 * p
            x[i,'cumulative'] <- (x[i,'multiplier'] * x[i,'x']) + 1
        } else {
            # For the rest of the rows carry out these commands
            x[i,'multiplier'] <- x[i-1,'cumulative'] * p
            x[i,'cumulative'] <- (x[i,'multiplier'] * x[i,'x']) + x[i-1,'cumulative']
        }
    }

# output the final row's output for the cumulative column
as.numeric(x[nrow(x),'cumulative'])
}

# Checking the function works by putting in a test value of p = 0.5
f(0.5,x)

# Now optimise the function between the interval of p between 0 and 1
optim.p <- optimise(f=f, interval=c(0,1),x, maximum=TRUE)

# Viewing the output of optim.p
optim.p 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T05:33:03.077

（编辑-忘记了我写的帖子的第一部分，现在放上去）。

您的问题可以通过检查您的函数`f`实际*执行*的操作来简化。由于我很懒惰，所以我将写`x[i, 'multiplier']`为 m [i]、`x[i, 'cumulative']`y [i]和`x[i, 'x']`x [i]。

让我们看看你的方程式`f`。我们`i > 1`先来看这个案例：

> m [i] = y [i-1] * p
> y [i] = m [i] * x [i] + y [i-1]

替换上面的 m_i：

> y [i] = (y [i-1] * p) * x [i] + y [i-1] // 让我们分解..
> y [i] = y [i-1] * (p * x [i] + 1)

这省去了计算`multipler`列的需要。

现在仔细看看你的`i == 1`情况，我们看到如果我们将 y [0]设置为 1，则以下适用于所有 i = 1, ..., `nrow(x)`：

> y [i] = y [i-1] (px [i] + 1) ---------- (1)

查看您的函数`f`，您要计算的是 y [n]：

> y [n] = y [n-1] (px [n] + 1)

如果我们使用 (1) 将上述公式替换为 y [n-1会发生什么？]

> y [n] = y [n-2] (px [n-1] + 1)(px [n] + 1)

现在我们代入上述 y [n-2]的公式：

> y [n] = y [n-3] (px [n-2] + 1)(px [n-1] + 1)(px [n] + 1)

你明白模式，对吧？我们一直替换到 y [1]：

> y [n] = y [0] (px [1] + 1)(px [2] + 1)...(px [n-1] + 1)(px [n] + 1)

但请记住，y [0]只是 1。因此，要计算 的值`f(x, p)`，我们只需：

> f(x, p) = (px [1] + 1)(px [2] + 1)...(px [n-1] + 1)(px [n] + 1)

`n`在哪里`nrow(x)`。也就是说，计算`p * x[i, 'x'] + 1`每个`i`并将它们相乘。

* * *

要将 R 中的数字向量相乘，请使用`prod`. 所以，如果`x`只是一个向量：

```
f_version2 <- function(p, x) {                                              
    return(prod(p * x + 1))                                                 
} 
```

让我们在几件事上对其进行测试：

```
x <- rep(c(rep(c(0.2,-0.2),4),0.2,0.2,-0.2,0.2),20)                         

> f(0.5, x)                                                                 
[1] 16.56635                                                                
> f_version2(0.5, x)                                                        
[1] 16.56635 
```

总之，有时您可以通过分析问题的*数学*以及/反对数值实现来实现加速。

# php - php代码在被javascript调用之前工作

> ID：13226112
> 
> 赞同：0
> 
> 时间：2012-11-05T04:53:24.623
> 
> 标签：php, javascript, html, function

我有一个简单的 php 代码，我嵌入在我的 html 代码中。我希望代码仅在单击按钮时运行。但是当页面自动加载时，该函数被调用。该代码将清楚地向您解释。

```
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<script>
function exportcsv()
{
<?php exportcsv(); ?>;
}
</script>
<?php 
 function exportcsv()
 {
 $File = "YourFile.txt"; 
 $Handle = fopen($File, 'w');
 $Data = "Visual BI Solutions\n"; 
 fwrite($Handle, $Data); 
 $Data = "ajay,praveen,musthafa,sanjay"; 
 fwrite($Handle, $Data); 
 fclose($Handle); 
 }
 ?>
 <button onClick="exporttxt()">Export</button> 
```

如何使其仅在单击按钮时运行。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:18:17.310

你可以使用 AJAX 来获得你想要的东西。PHP 函数在你的浏览器加载页面之前运行，因为它的服务器端和任何用户操作都是用户端，你可以使用 javascript-ajax 调用来添加你需要的东西。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

这是 jQuery ajax ..（您需要添加 jquery 库以便使用它）。（在你的 html HEAD 一个带有源 jquery 库的脚本标签）..

当您的用户单击按钮并将响应加载到他的浏览器时，它将在您的浏览器中发出请求。例子..

```
<script>
$(document).ready(function(){
    $("#buttonID").click(function(){
        $.ajax({
           url: "script.php",
           type: "POST",
           data: {action : 'exportcsv'},
           dataType: "text",
           success: function(responde){
               alert(responde); /*This will show to user as message the responde*/
           }
        });
    });
});
</script> 
```

在您的 php 中，您必须进行 PAGE（在我的情况下为 script.php）或页面的一部分将仅响应该 ajax 调用..这意味着它不会显示除该调用的答案之外的任何其他信息..

```
function exportcsv()
 {
 $File = "YourFile.txt"; 
 $Handle = fopen($File, 'w');
 $Data = "Visual BI Solutions\n"; 
 fwrite($Handle, $Data); 
 $Data = "ajay,praveen,musthafa,sanjay"; 
 fwrite($Handle, $Data); 
 fclose($Handle); 
 }
if(isset($_POST['action']) && $_POST['action']=='exportcsv'){
    exportcsv(); 
    echo "SUCCESS";
    exit(); /*To prevent outputing other data..*/
} 
```

您可以在主 php 文件中设置它，但它必须位于页面的第一行，因此在它之前没有其他输出。exit() 将阻止所有下一个 php 代码处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:18:28.823

如果您不想使用 AJAX，您可以将按钮发布到同一页面。您将获得页面刷新，但在按下按钮之前该功能不会启动。

```
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<?php 
 function exportcsv()
 {  
 $File = "YourFile.txt"; 
 $Handle = fopen($File, 'w');
 $Data = "Visual BI Solutions\n"; 
 fwrite($Handle, $Data); 
 $Data = "ajay,praveen,musthafa,sanjay"; 
 fwrite($Handle, $Data); 
 fclose($Handle); 
 }
 if(isset($_POST['export'])) exportcsv();
 ?>
 <form method="post">
 <input type="submit" name="export" value="Export" />
 </form> 
```

# android - 轮询登录服务

> ID：13226114
> 
> 赞同：0
> 
> 时间：2012-11-05T04:53:32.267
> 
> 标签：android

您好，我成功创建了一个服务

```
public class Securityservice extends Service {

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        Log.d("Service","I Am Security Service Created");
    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }
} 
```

我在 onCreate() 中收到了该日志消息 ..

但问题是我在创建服务时只收到一次该消息

我需要继续打印日志，直到我销毁服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:01:11.090

启动一个线程并一次又一次地循环它

```
new Thread(new Runnable() {
           public void run() {
               while (true) {
                   try {
                       Thread.sleep(10000);
                   } catch (InterruptedException e) {
                       // TODO Auto-generated catch block
                       e.printStackTrace();
                   }
                   // Your code
               }
           }                        
        }).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:44:33.927

服务是一个后台任务，它一直运行到您停止，其中包含自己的生命周期。其中 Thread 也是一个新任务，它一直运行到您停止或结束代码，其中包含自己的生命周期。

虽然创建 Service onCreate 方法只会调用一次.. 我认为您在**Loop**和**Thread**之间有些混淆..

必须启动一个循环（for 或 while）以连续打印该日志..

或者您可以使用这种类型的递归方法

```
 public void onCreate() {
 super.onCreate();
 doLog() 
 }

void doLog(){
  Log.d("Service","I Am Security Service Created");
doLog();
} 
```

# android - 如何处理系统进程中的致命异常：ActivityManager 和 java.lang.OutOfMemoryError：[内存耗尽]

> ID：13226116
> 
> 赞同：0
> 
> 时间：2012-11-05T04:53:39.387
> 
> 标签：android

我有一个设备（三​​星 Galaxy Fit）。当我打开设备时，我无法进入主屏幕，它一直在加载。当我连接设备并看到 logcat 时，我的 logcat 错误显示 -

```
"FATAL EXCEPTION IN SYSTEM PROCESS: ActivityManager and java.lang.OutOfMemoryError: [memory exhausted]" 
```

如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:57:12.017

有一些方法可以解决内存不足错误

首先像这样回收位图

```
bmp.recycle();
bmp = null; 
```

第二次使用垃圾收集器

```
System.runFinalization();
Runtime.getRuntime().gc();
System.gc(); 
```

但是如果您在这里发布一些代码会更好，这样我和其他人可以为您提供更多帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:11:38.577

使用以下代码，您必须检查 OutOfMemory 错误

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{

    if (requestCode == REQUEST_CODE && resultCode == Activity.RESULT_OK)
    try 
    {
        // We need to recyle unused bitmaps
         if (Main_bitmap != null) 
         {
                    Main_bitmap.recycle();
         }

      Uri selectedImage = data.getData();
      String[] filePathColumn = {MediaStore.Images.Media.DATA};
      Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);

       if (cursor.moveToFirst()) 
      {
                        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                        filePath = cursor.getString(columnIndex);

                        BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
                      bmpFactoryOptions.inJustDecodeBounds=true;
                      BitmapFactory.decodeFile(filePath,bmpFactoryOptions);

         if ( checkBitmapFitsInMemory(bmpFactoryOptions.outWidth,bmpFactoryOptions.outHeight, 2)) 
        {
                            BitmapFactory.Options options4 = new BitmapFactory.Options();
                            options4.inSampleSize = 1;
                            Main_bitmap = BitmapFactory.decodeFile(filePath, options4);
                        iv_set_image.setImageBitmap(Main_bitmap);

        }
        else
        {

             Toast.makeText(this,"java.lang.OutOfMemoryError:", 1).show();             

         }
                    cursor.close();
     } 
     catch (Exception e)
    {
             e.printStackTrace();
     }
       super.onActivityResult(requestCode, resultCode, data);
}    

    public static boolean checkBitmapFitsInMemory(long bmpwidth,long bmpheight, int bmpdensity )
    {
        long reqsize=bmpwidth*bmpheight*bmpdensity;
        long allocNativeHeap = Debug.getNativeHeapAllocatedSize();

        final long heapPad=(long) Math.max(4*1024*1024,Runtime.getRuntime().maxMemory()*0.1);
        if ((reqsize + allocNativeHeap + heapPad) >= Runtime.getRuntime().maxMemory())
        {
            return false;
        }
        return true;

    } 
```

# php - 限制图像循环显示

> ID：13226122
> 
> 赞同：0
> 
> 时间：2012-11-05T04:54:02.463
> 
> 标签：php, javascript, function

建议使用以下代码，但功能不完整:-(。我想在单击时显示一组图像 (var imgs)，并在数组末尾返回第一个 img = 1。任何帮助将不胜感激。谢谢。限制图像显示

```
 var imgs = ["'pic1lg.jpg","pic2lg.jpg","pic3lg.jpg","pic4lg.jpg","pic5lg.jpg"];
 var baseURL = 'images/art_contests/2005/';

 var x=imgs.length;
 function change(){
 if (x>0) { document.getElementById("bob").src=baseURL+imgs[--x]; } 
 }
 window.onload = function() { change(); }
 </script>
 </head>
 <body>
 <img src="" id="bob" alt="" onmousedown="change()">
 </body> 
```

顺便说一句，什么是“鲍勃”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:04:30.030

```
<script>

var imgs = ["pic1lg.jpg","pic2lg.jpg","pic3lg.jpg","pic4lg.jpg","pic5lg.jpg"];
 var baseURL = 'images/art_contests/2005/';

 var imagesLength= imgs.length;
 var current = imgs.length;
 function change(img){
    if(current <= 0)
        current = imagesLength;
    img.src=baseURL+imgs[--current];
 }
 window.onload = function() { change(); }
;
 </script>
 </head>
 <body>
 <img src="" id="bob" alt="" onmousedown="change(this)">
 </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:59:58.677

如果你想让它回滚到开始，你必须在`x`它小于 0 时重新设置它的值。

```
if (x < 0) {
  x = imgs.length - 1;
}
document.getElementById("bob").src = baseURL+imgs[x--]; 
```

这样做是`x`在更改图像之前检查的值，如果它小于 0（0 是第一个图像），则将其设置为比数组长度小一（数组索引基于 0，因此最后一项的索引为`length-1`）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T05:04:43.870

试试这个
我为当前选择的数组添加了一个国家。

```
<script>
var imgs = ["'pic1lg.jpg","pic2lg.jpg","pic3lg.jpg","pic4lg.jpg","pic5lg.jpg"];
var baseURL = 'images/art_contests/2005/';

 var x=imgs.length;
 var latest = 0;
 function change(){

    if (x>0) { 
        if(latest < x){
            document.getElementById("bob").src=baseURL+imgs[latest];
            latest++;
        }else{
         latest = 0;    
        }
    } 
 }

 </script>
 </head>
 <body>
 <input type="button" onclick="change()"/>
 <img src="" id="bob" alt="" onclick="change()">
 </body> 
```

# python - Python读取目录中的文件并连接

> ID：13226123
> 
> 赞同：1
> 
> 时间：2012-11-05T04:54:08.380
> 
> 标签：python, file

我想编写一个 Python 脚本来搜索当前目录中的所有文件夹，查找所有`.txt`文件，并创建一个文件，该文件是当前目录中所有这些文件（以任何顺序）的串联。如果文件夹有子文件夹，则不应搜索这些子文件夹。一个例子是

```
main_folder
  folder_1
    sub_folder
      file1.txt
    file2.txt
  folder_2
    file3.txt 
```

脚本放置在`main_folder`. 它应该创建一个文件，该文件是`file2.txt`和`file3.txt`（以任何顺序）在`main_folder`.

我的问题是：如何告诉 Python 遍历文件夹、查找`.txt`文件而不进入子文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:04:59.233

使用[glob](http://docs.python.org/2/library/glob.html)：

```
>>> import glob
>>> glob.glob('main_folder/*/*.txt')
['main_folder/folder_1/file2.txt', 'main_folder/folder_2/file3.txt'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T04:58:16.630

从[文档](http://docs.python.org/2/library/os.html#os.walk)：

> 当*topdown*为`True`时，调用者可以就地修改*dirnames*列表（可能使用`del`或切片赋值），并且`walk()`只会递归到名称保留在*dirnames*中的子目录；这可以用来修剪搜索，强制执行特定的访问顺序，甚至可以在调用者再次`walk()`恢复之前通知调用者创建或重命名的目录`walk()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T05:06:25.993

使用选项设置为 True的[os.walk()](http://docs.python.org/2/library/os.html#os.walk)函数。`topdown`删除`dirnames`返回元组中的所有内容：

```
for root, dirs, files in os.walk('/base/dir', topdown=True):
    del dirs[:]
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T05:24:51.660

如果您使用的是基于 Unix 的系统.. 我认为最简单的方法是使用`find`和`cat`使用 python`subprocess`模块，就像这样。使用`find`该`-depth`选项确实有帮助，例如，用于`-depth +3`查找深度 >= 3 的所有文件

```
>>> import subprocess
>>> lst = subprocess.check_output('find . -name "*.txt" -depth 2', shell=True)
>>> print lst
./folder_1/f1.txt
./folder_2/f2.txt 
>>> out_f = subprocess.check_output('cat '+lst.replace('\n', ' '), shell=True)
>>> print out_f
inside Folder_1
inside Folder 2 
```

`shell=True`您可以通过单独提供每个参数来避免。

# c - 在 C 中使用逻辑运算符切换大小写

> ID：13226124
> 
> 赞同：6
> 
> 时间：2012-11-05T04:54:11.320
> 
> 标签：c, switch-statement, or-operator

我是 C 新手，需要帮助。我的代码如下。

```
 #include<stdio.h>  
 #include<conio.h>  
 void main()
 {

  int suite=2;  

  switch(suite)
     {           
      case 1||2:
      printf("hi");

      case 3:
      printf("byee");

      default:
      printf("hello");
     }

  printf("I thought somebody");
  getche();
  } 
```

我在 Turbo C 工作，输出是`helloI thought somebody`. 没有错误信息。

请让我知道这是如何工作的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T04:59:58.567

```
case 1||2: 
```

变成`true`. 所以它变成`case 1:`但传递的值是2。所以默认情况下执行。在那之后你`printf("I thought somebody");`被处决了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-05T04:57:24.570

做这个：

```
switch(suite){
  case 1:/*fall through*/
  case 2: 
    printf("Hi");
...
} 
```

这将是一种更清洁的方法。表达式的`1||2`计算结果为`1`，因为`suite`是 2，它既不匹配 1 也不匹配 3，并跳转到`default`case。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T05:02:55.397

```
case 1||2: 
```

结果是

```
case 1: 
```

因为`1 || 2`计算结果为`1`（并记住；`case`语句中只允许使用常量整数表达式，因此您不能在一个中检查多个值`case`）。

你想使用：

```
case 1:
  // fallthrough
case 2: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T05:01:18.757

You `switch`on value `2`，它与语句中`default`的大小写匹配`switch`，因此它打印“hello”，然后最后一行打印“I think someone”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-08T21:52:35.153

请记住，C 中的 switch 语句会将您的输入参数与指定的每个 case 进行比较，并从该 case 输入 switch。**然后它会继续运行，直到遇到一个不包含在您的代码片段中的 break 语句。**我有一种感觉，使用下面的代码和输入 2，您希望看到像“hiI think someone”这样的输出：

```
 switch(suite)
 {           
  case 1||2:
  printf("hi");

  case 3:
  printf("byee");

  default:
  printf("hello");
 } 
```

把逻辑运算符问题放在一边（上面有很多很好的答案），即使这段代码在 case 1||2 处输入了开关，你的输出也会是“hibyeehelloI think someone”。要修复，只需在您希望代码执行某些操作的每个案例的末尾添加一个中断：

```
 switch(suite)
 {           
  case 1:
  //fallthrough
  case 2:
  printf("hi");
  break;

  case 3:
  printf("byee");
  break;

  default:
  printf("hello");
  break;
 } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-20T21:20:51.013

```
case (1||2):
  printf("hi"); 
```

只需放括号，看看魔术。

在您的代码中，程序只检查第一个值并关闭。因为，它没有找到 2 之后它进入默认情况。

但是，当您使用括号指定两个术语（即 1 和 2）在一起时，它会按需要运行。

# php - 在多模块配置中，模块方法是如何被调用的？

> ID：13226130
> 
> 赞同：1
> 
> 时间：2012-11-05T04:55:08.840
> 
> 标签：php, phalcon

在**public/index.php**中：

```
public function main()
{

    $this->_registerServices();

    //Register the installed modules
    $this->registerModules(array(
        'frontend' => array(
            'className' => 'Multiple\Frontend\Module',
            'path' => '../apps/frontend/Module.php'
        ),
        'backend' => array(
            'className' => 'Multiple\Backend\Module',
            'path' => '../apps/backend/Module.php'
        )
    ));

    echo $this->handle()->getContent();
} 
```

* * *

在**module.php**中：

```
class Module
{
    public function registerAutoloaders()
    {

        $loader = new \Phalcon\Loader();

        $loader->registerNamespaces(array(
            'Multiple\Frontend\Controllers' => '../apps/frontend/controllers/',
            'Multiple\Frontend\Models' => '../apps/frontend/models/',
        ));

        $loader->register();
    }

    /**
     * Register the services here to make them general or register in the ModuleDefinition to make them module-specific
     */
    public function registerServices($di)
    {

        //Registering a dispatcher
        $di->set('dispatcher', function () {
            $dispatcher = new \Phalcon\Mvc\Dispatcher();

            //Attach a event listener to the dispatcher
            $eventManager = new \Phalcon\Events\Manager();
            $eventManager->attach('dispatch', new \Acl('frontend'));

            $dispatcher->setEventsManager($eventManager);
            $dispatcher->setDefaultNamespace("Multiple\Frontend\Controllers\\");
            return $dispatcher;
        });

        //Registering the view component
        $di->set('view', function () {
            $view = new \Phalcon\Mvc\View();
            $view->setViewsDir('../apps/frontend/views/');
            $view->registerEngines(array(".phtml" => 'volt'));
            return $view;
        });
    }
} 
```

我想知道如何调用模块中的方法`registerServices`&& `registerAutoloaders`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:21:33.777

您可以在 github 中查看 MVC 存储库：

[https://github.com/phalcon/mvc/tree/master/multiple](https://github.com/phalcon/mvc/tree/master/multiple)

这个想法是您的应用程序有一个入口点`public\index.php`。在该文件中，您有：

```
public function main()
{
    $this->_registerServices();

    //Register the installed modules
    $this->registerModules(
        array(
            'frontend' => array(
                'className' => 'Multiple\Frontend\Module',
                'path' => '../apps/frontend/Module.php'
            ),
            'backend' => array(
                'className' => 'Multiple\Backend\Module',
                'path' => '../apps/backend/Module.php'
            )
        )
    );

    echo $this->handle()->getContent();
} 
```

[在此处](https://github.com/phalcon/mvc/blob/master/multiple/public/index.php)查看完整文件。

现在在`public\index.php`文件中，您已指示 Phalcon 您有两个模块，一个是前端，一个是后端，以及各个`Module.php`文件的位置/类。

在这些`Module.php`文件之一（比如前端）中，您会发现：

```
namespace Multiple\Frontend;

class Module
{

    public function registerAutoloaders()
    {

        $loader = new \Phalcon\Loader();

        $loader->registerNamespaces(
            array(
                'Multiple\Frontend\Controllers' => '../apps/frontend/controllers/',
                'Multiple\Frontend\Models'      => '../apps/frontend/models/',
            )
        );

        $loader->register();
    }

    public function registerServices($di)
    {

        //Registering a dispatcher
        $di->set(
            'dispatcher', 
            function () 
            {
                $dispatcher = new \Phalcon\Mvc\Dispatcher();

                //Attach a event listener to the dispatcher
                $eventManager = new \Phalcon\Events\Manager();
                $eventManager->attach('dispatch', new \Acl('frontend'));

                $dispatcher->setEventsManager($eventManager);
                $dispatcher->setDefaultNamespace("Multiple\Frontend\Controllers\\");
                return $dispatcher;
            }
        );

        //Registering the view component
        $di->set(
            'view', 
            function () 
            {
                $view = new \Phalcon\Mvc\View();
                $view->setViewsDir('../apps/frontend/views/');
                return $view;
            }
        );

        $di->set(
            'db', 
            function () 
            {
                return new \Phalcon\Db\Adapter\Pdo\Mysql(
                    array(
                        "host"     => "localhost",
                        "username" => "root",
                        "password" => "secret",
                        "dbname"   => "invo"
                    )
                );
            }
        );

    }

} 
```

一旦模块被注册，这些函数就会被自动调用（`registerModules`在`public\index.php`. 在这个模块中，`registerAutoloaders`并`registerServices`进一步自定义模块，让您更好地控制正在发生的事情。例如，您可能在一个模块中有一个与另一个模块不同的自动加载器，或者让一个模块访问不同的数据库。您可以在特定的`Module.php`.

我知道有人谈论制作一套全新的单/多配置教程，但它还没有实现。

# c# - 下拉列表值重复

> ID：13226131
> 
> 赞同：2
> 
> 时间：2012-11-05T04:55:26.773
> 
> 标签：c#, asp.net, data-binding

我的数据库中有 4 个对象，例如 zen、maruthi 和 scorpio ..将值绑定到下拉列表后，我只能看到 scorpio 重复 3 次..

而不是把它当作

```
zen
maruthi
scorpio 
```

..我得到天蝎座

```
scorpio 
scorpio.. 
```

代码

```
List<Cab> CabTypeList = new List<Cab>();
using (DataTable table = SqlDBConnector.ExecuteSelectCommand("GetCabType", CommandType.StoredProcedure))
{
    //check if any record exist or not
    if (table.Rows.Count > 0)
    {
        //Lets go ahead and create the list of cab

        foreach (DataRow row in table.Rows)
        {
            cab.CabType =  row["CabType"].ToString();
            cab.CabId = Convert.ToInt32(row["Cab_Id"]);
            CabTypeList.Add(cab);
        }
    }
} 
```

ASPX 页面

```
if (!IsPostBack)
{
    CabDbAccess cabdbaccess = new CabDbAccess();
    DropDownList1.DataSource = cabdbaccess.GetCabType();
    DropDownList1.DataTextField = "CabType"; // the items to be displayed in the list items
    DropDownList1.DataValueField = "CabId"; // the id of the items displayed
    DropDownList1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:01:51.020

`cab`来自哪里？确保在`foreach`循环中添加新项目。

```
public List<Cab> GetCabType()
{  
   List<Cab> CabTypeList = new List<Cab>();
   // to do : get your data in the data table. 
   foreach (DataRow row in table.Rows)
   {
     var cab= new Cab();
     cab.CabType =  row["CabType"].ToString();
     cab.CabId = Convert.ToInt32(row["Cab_Id"]);
     CabTypeList.Add(cab);
   }
   return CabTypeList;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:04:40.793

不管`cab`是什么，你都加了三遍。您最终在列表中有三个项目都是相同的对象。您可能想 `Cab cab = new Cab();`在循环顶部添加类似的内容。然后，您将每次添加一个不同的。

# java - 在 JXDatePicker/JXMonthView 中禁用日期

> ID：13226138
> 
> 赞同：2
> 
> 时间：2012-11-05T04:55:56.167
> 
> 标签：java, swing, swingx

我正在编写的程序允许用户单击 JXDatePicker 上的日期来设置任务完成的日期。我想在 JXDatePicker 中禁用对未来日期的选择，因为在我的程序中选择未来日期是无效的。

我发现 JXDatePickers 包含一个 JXMonthView，日期选择器或月份视图似乎不允许您禁用单个/日期范围。我可以更改单个日期和日期范围的背景颜色，这应该允许我将未来的日期设置为单独的颜色。然后，每当用户单击日历以禁止未来日期时，我都可以添加一些验证。但是，如果我能说诸如 calendar.setMaxDate(today); 之类的话，那就更清楚了。

有谁知道是否有比手动编码功能更简单的方法？也许另一个日期选择器组件可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T05:21:46.433

如果您想将日期选择限制在一个范围内，您可以指定上限和下限

```
JXDatePicker picker = new JXDatePicker();
Calendar calendar = picker.getMonthView().getCalendar();
// starting today if we are in a hurry
calendar.setTime(new Date());
picker.getMonthView().setLowerBound(calendar.getTime());
// end of next week
CalendarUtils.endOfWeek(calendar);
calendar.add(Calendar.WEEK_OF_YEAR);
picker.getMonthView().setUpperBound(calendar.getTime()); 
```

（取自 JavaDocs）

这基本上会限制从今天到周末的有效、可选日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T06:04:03.290

```
package org.chillies.validator;
import java.util.Date;
@SuppressWarnings("deprecation")
public class DateValidator {
public Date getlowerBoundDate(){
    String date;
    Date date1=new Date();
    Integer year=1900+date1.getYear();
    date="01-Apr-"+year;
    return new Date(date);
}
public Date getupperBoundDate(){
    String date;
    Date date1=new Date();
    Integer year=1900+date1.getYear();
    date="31-Mar-"+(year+1);//you can set date as you wish over here
    return new Date(date);
 }
} 
```

其余的代码是这样来应用这个类的

```
datePicker.setBorder(null);
    DateValidator datevalidator=new DateValidator();
    datePicker.getMonthView().setLowerBound(datevalidator.getlowerBoundDate());
    datePicker.getMonthView().setUpperBound(datevalidator.getupperBoundDate()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:06:59.953

经过几分钟的研究，看起来 JDatePicker 可以在这里工作 - 请参阅[http://jdatepicker.com/tour-date-restriction.html](http://jdatepicker.com/tour-date-restriction.html)

不过，如果有人知道这样做的简单方法，仍然愿意接受有关使用 JXDatePickers 完成此任务的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-08T15:30:29.793

```
 Callback<DatePicker, DateCell> callB = new Callback<DatePicker, DateCell>() {
            @Override
            public DateCell call(final DatePicker param) {
                return new DateCell() {
                    @Override
                    public void updateItem(LocalDate item, boolean empty) {
                        super.updateItem(item, empty); //To change body of generated methods, choose Tools | Templates.
                        LocalDate today = LocalDate.now();
                        setDisable(empty || item.compareTo(today) < 0);
                    }

                };
            }

        };
        selectedDate.setDayCellFactory(callB); 
```

日期禁用.......

# android - LinkedInApiClientException：java.lang.IllegalArgumentException：移动

> ID：13226139
> 
> 赞同：0
> 
> 时间：2012-11-05T04:56:09.383
> 
> 标签：android, linkedin, linkedin-j

我正在使用linkedin-j-android.jar 进行linkedinIn 连接并成功完成了我的要求。但是对于某些用户，当我尝试获取用户更新时，我遇到了异常。

```
com.google.code.linkedinapi.client.LinkedInApiClientException: java.lang.IllegalArgumentException: MOBILE 
```

或者

```
com.google.code.linkedinapi.client.LinkedInApiClientException: java.lang.IllegalArgumentException: SKYPE 
```

下面是堆栈跟踪：

```
com.google.code.linkedinapi.client.LinkedInApiClientException: java.lang.IllegalArgumentException: MOBILE
10-18 11:35:23.166: W/System.err(5813):     at com.google.code.linkedinapi.client.impl.LinkedInApiXppClient.unmarshallObject(LinkedInApiXppClient.java:119)
10-18 11:35:23.166: W/System.err(5813):     at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.readResponse(BaseLinkedInApiClient.java:1905)
10-18 11:35:23.166: W/System.err(5813):     at com.google.code.linkedinapi.client.impl.BaseLinkedInApiClient.getUserUpdates(BaseLinkedInApiClient.java:920)
10-18 11:35:23.166: W/System.err(5813):     at com.tekriti.ice.util.LinkedinUtil.getUserUpdate(LinkedinUtil.java:205)
10-18 11:35:23.166: W/System.err(5813):     at com.tekriti.ice.util.SocialUtil.getAllSocialData(SocialUtil.java:534)
10-18 11:35:23.166: W/System.err(5813):     at com.tekriti.ice.util.SocialUtil$UpdateData.doInBackground(SocialUtil.java:648)
10-18 11:35:23.174: W/System.err(5813):     at com.tekriti.ice.util.SocialUtil$UpdateData.doInBackground(SocialUtil.java:1)
10-18 11:35:23.174: W/System.err(5813):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
10-18 11:35:23.174: W/System.err(5813):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
10-18 11:35:23.174: W/System.err(5813):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
10-18 11:35:23.174: W/System.err(5813):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
10-18 11:35:23.174: W/System.err(5813):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
10-18 11:35:23.174: W/System.err(5813):     at java.lang.Thread.run(Thread.java:856)
10-18 11:35:23.174: W/System.err(5813): Caused by: java.lang.IllegalArgumentException: MOBILE
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.schema.PhoneType.fromValue(PhoneType.java:58)
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.schema.xpp.PhoneNumberImpl.init(PhoneNumberImpl.java:64)
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.schema.xpp.PhoneNumbersImpl.init(PhoneNumbersImpl.java:66)
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.schema.xpp.PersonImpl.init(PersonImpl.java:595)
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.schema.xpp.UpdateContentImpl.init(UpdateContentImpl.java:128)
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.schema.xpp.UpdateImpl.init(UpdateImpl.java:155)
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.schema.xpp.UpdatesImpl.init(UpdatesImpl.java:89)
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.schema.xpp.NetworkImpl.init(NetworkImpl.java:71)
10-18 11:35:23.174: W/System.err(5813):     at com.google.code.linkedinapi.client.impl.LinkedInApiXppClient.unmarshallObject(LinkedInApiXppClient.java:115) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T06:04:19.030

在 LinkedIn 上创建新的 API 密钥后，错误得到解决。新 API 创建遵循使用用户数据的范围。有关更多详细信息，请参见下面的链接 [http://developer.linkedin.com/documents/authentication](http://developer.linkedin.com/documents/authentication)

因此，您需要在身份验证请求中添加范围参数，例如

[https://api.linkedin.com/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress](https://api.linkedin.com/uas/oauth/requestToken?scope=r_basicprofile+r_emailaddress)

# c# - 从 WebServices 获取对象类到 Asp.Net

> ID：13226140
> 
> 赞同：0
> 
> 时间：2012-11-05T04:56:18.270
> 
> 标签：c#, asp.net, web-services, asp.net-web-api

从 webservices 接收对象到 asp.net 时出现问题。我的问题不能使用 AddWebReference。它不能在我的项目中使用。因为用户必须输入有关网络服务的信息，例如：IPAddress、Port。然后，客户端将使用此信息来访问 Web 服务。

它在 Webservices 中的功能：

```
 [SoapRpcMethod("", RequestNamespace = "urn:ALBAPI", ResponseNamespace = "urn:ALBAPI")]
        public ResponseInfo getAdvCertExport(out AdvCertExportValues values);
        public void getAdvCertExportAsync();
        public void getAdvCertExportAsync(object userState); 
```

客户：

```
public void call()
        {
            string WebserviceUrl = "http://192.168.2.19:3333/ALBAPI.wsdl";
            string serviceName = "ALBAPI";
            string methodName = "getSetupLicenseRows";
            object[] args=new object[1];
            object sSessionID = CallWebService(WebserviceUrl, serviceName, methodName,args);
            foreach (PropertyInfo property in sSessionID.GetType().GetProperties())
            {
                object value = property.GetValue(sSessionID, null);

                Console.WriteLine("{0} = {1}", property.Name, value);
            }

        }

        public object CallWebService(string webServiceAsmxUrl, string serviceName, string methodName, object[] args)
        {
            System.Net.WebClient client = new System.Net.WebClient();
            //-Connect To the web service
            using (System.IO.Stream stream = client.OpenRead(webServiceAsmxUrl + "?wsdl"))
            {
                //--Now read the WSDL file describing a service.
                ServiceDescription description = ServiceDescription.Read(stream);
                ///// LOAD THE DOM /////////
                //--Initialize a service description importer.
                ServiceDescriptionImporter importer = new ServiceDescriptionImporter();
                importer.ProtocolName = "Soap12"; // Use SOAP 1.2.
                importer.AddServiceDescription(description, null, null);
                //--Generate a proxy client. importer.Style = ServiceDescriptionImportStyle.Client;
                //--Generate properties to represent primitive values.
                importer.CodeGenerationOptions = System.Xml.Serialization.CodeGenerationOptions.GenerateProperties;
                //--Initialize a Code-DOM tree into which we will import the service.
                CodeNamespace nmspace = new CodeNamespace();
                CodeCompileUnit unit1 = new CodeCompileUnit();
                unit1.Namespaces.Add(nmspace);
                //--Import the service into the Code-DOM tree. This creates proxy code
                //--that uses the service.
                ServiceDescriptionImportWarnings warning = importer.Import(nmspace, unit1);
                if (warning == 0) //--If zero then we are good to go
                {
                    //--Generate the proxy code 
                    CodeDomProvider provider1 = CodeDomProvider.CreateProvider("CSharp");
                    //--Compile the assembly proxy with the appropriate references
                    string[] assemblyReferences = new string[5] { "System.dll", "System.Web.Services.dll", "System.Web.dll", "System.Xml.dll", "System.Data.dll" };
                    CompilerParameters parms = new CompilerParameters(assemblyReferences);
                    CompilerResults results = provider1.CompileAssemblyFromDom(parms, unit1);
                    //-Check For Errors
                    if (results.Errors.Count > 0)
                    {
                        StringBuilder sb = new StringBuilder();
                        foreach (CompilerError oops in results.Errors)
                        {
                            sb.AppendLine("========Compiler error============");
                            sb.AppendLine(oops.ErrorText);
                        }
                        throw new System.ApplicationException("Compile Error Occured calling webservice. " + sb.ToString());
                    }
                    //--Finally, Invoke the web service method 
                    Type foundType = null;
                    Type[] types = results.CompiledAssembly.GetTypes();
                    foreach (Type type in types)
                    {
                        if (type.BaseType == typeof(System.Web.Services.Protocols.SoapHttpClientProtocol))
                        {
                            Console.WriteLine(type.ToString());
                            foundType = type;
                        }
                    }

                    object wsvcClass = results.CompiledAssembly.CreateInstance(foundType.ToString());
                    MethodInfo mi = wsvcClass.GetType().GetMethod("getSetupLicenseRows");
                    object o = new object();                    
                    Line 100:o = mi.Invoke(wsvcClass, args);
                    return o;
                }
                else
                {
                    return null;
                }
            } 
```

它显示错误。“参数计数不匹配。” 在第 100 行：o = mi.Invoke(wsvcClass, args); 无论如何，提前感谢您的帮助。

# if-statement - 判断（如果）中的零值的更简单方法？

> ID：13226150
> 
> 赞同：2
> 
> 时间：2012-11-05T04:57:30.237
> 
> 标签：if-statement, clojure

我经常这样写：

```
(if (nil? a-value) another-value a-value) 
```

是否有更简单的功能，例如：

```
(if-nil? a-value another-value) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:01:02.790

如果要使用默认值，则通常的习惯用法是使用`or`宏：

```
(or foo default-value) 
```

`default-value`当`foo`为假（nil 或假）或`foo`当ener`foo`为真（即除 之外的任何非零值）时，哪个将返回`false`。

您通常也可以[`if-not`](http://clojuredocs.org/clojure_core/clojure.core/if-not)在这种情况下使用，因为 nil 被认为是错误的。当然，您需要注意实际`false`值，因为这些值将被视为与 nil 相同。

作为最后的选择，您始终可以使用宏来准确获取`if-nil?`您正在寻找的行为：

```
(defmacro if-nil? 
  ([a b] (if-nil? a b nil))
  ([a b c]
    `(if (nil? ~a) ~b ~c))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T05:46:36.173

为什么不简单地定义一个`if-nil?`宏：

```
(defmacro if-nil? [expr body] 
  `(let [e# ~expr] 
    (if (nil? e#) ~body e#))) 
```

# web-applications - 主干 js 或淘汰 js 作为带有 jquery mobile 的 Web 框架

> ID：13226153
> 
> 赞同：3
> 
> 时间：2012-11-05T04:57:41.843
> 
> 标签：web-applications, jquery-mobile, backbone.js, frameworks, knockout.js

在不试图引起大规模讨论的情况下，我想从堆栈溢出的其他用户那里得到一些建议。

我即将开始构建一个移动网站，该网站从来自 PHP REST api 的 JSON 获取数据。

我研究了不同的移动框架，觉得 JQM 最适合我们，因为我们有 jQuery 的知识，虽然有点大。

目前在工作中，但是我们在所有网站上都使用 jQuery，并意识到现在我们正在构建一个移动网站结构到这个移动网站和我们可能带来的未来网络应用程序。

我制作了一个比较表，我设法将选择降低到 2 - 骨干和淘汰赛。

我一直在浏览网络，似乎总体上对骨干网有更多的支持，甚至可能对 JQM 的骨干网有更多的支持。

[http://jquerymobile.com/test/docs/pages/backbone-require.html](http://jquerymobile.com/test/docs/pages/backbone-require.html)

然而，我注意到的一件事是主干不支持视图绑定（声明性方法），而淘汰赛支持 - 这是一个巨大的好处吗？

为我们使用 mv* 的主要原因之一是为了获得更多的结构 - 所以我想使用能够与 jQuery 尤其是 jQuery mobile 最佳集成的库。他们似乎都没有类似的语法......

谢谢

# java - 如何每秒移动jlabel？

> ID：13226164
> 
> 赞同：1
> 
> 时间：2012-11-05T04:59:01.863
> 
> 标签：java, multithreading, swing, jlabel

我尝试每秒钟将其向右移动（x++）

我尝试用线程移动它..

1.  怎么做？（并且可以看到它每秒都在移动）
2.  还有另一种不使用线程的方法吗？
3.  我应该使用什么布局管理器？

继承人我试试..

```
public class help {
    JFrame frame = new JFrame();
    JLabel label = new JLabel("target");

    public help() {
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setSize(800,600);
        frame.setLayout(new GridLayout());
        frame.add(label);
        label.setPreferredSize(new Dimension(100,100));
        label.setLocation(400, 300);

        frame.getContentPane().validate();
        frame.repaint();
        frame.setVisible(true);

        mysterious();
    }

    void mysterious(){
     ////////////////////////////////
     // part of edit responding David kroukamp  
    Thread t = new Thread(new Runnable() {
    @Override
    public void run() {
         try{

            for (int z=0; z<10; z++){
            label.setLocation((label.getLocationOnScreen().x+10), label.getLocationOnScreen().y);
            Thread.sleep(1000);  
            } 
        }catch(Exception ae){

    }
    }
});
t.start();
    //////////////////////////////

    }
    public static void main(String[]args){
        new help();  
        }
} 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T05:23:54.733

*   类名以大写字母开头，即`Help`
*   Swing 组件应该在[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   `Thread`像这样创建一个新的：

    ```
    Thread t = new Thread(new Runnable() {
        @Override
        public void run() {
            //work here
        }
    });
    t.start();//start thread 
    ```

但是我建议在`Timer`运行时使用 Swing `EDT`：

*   [如何使用摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

**编辑：**

根据您的问题，我建议使用`Timer`创建线程点是为了获得一般知识。

问题是线程未在您的摇摆 GUI 的 EDT 线程上运行，其中`Timer`：

```
 int delay = 1000; //milliseconds
  ActionListener taskPerformer = new ActionListener() {
      int count=0;
      public void actionPerformed(ActionEvent evt) {
           if(count==10) {//we did the task 10 times
                 ((Timer)evt.getSource()).stop();
            }

            label.setLocation((label.getLocationOnScreen().x+10), label.getLocationOnScreen().y);
            System.out.println(SwingUtilities.isEventDispatchThread());
           count++;
      }
  };
  new Timer(delay, taskPerformer).start(); 
```

**参考：**

*   [http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T05:31:47.460

这是`Swing`一个简单的益智游戏的例子。

[Java Swing 随机播放游戏](http://www.javabeginner.com/java-swing/java-swing-shuffle-game)

当您按下`Pause`按钮时，标题将变为动画，直到您释放暂停。同样，您可以将其用于`JLabel`. 源代码也附上。

希望对你有很大帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T05:16:27.503

如果您将构造函数的那部分放在一个线程中，那么您可以调用`thread.sleep(1000);`（1000 毫秒延迟 1 秒）然后刷新，这应该会在屏幕上移动目标。

# ruby-on-rails - 检查 Cookie 是否在 ruby on rails 中被禁用或未启用

> ID：13226167
> 
> 赞同：2
> 
> 时间：2012-11-05T04:59:22.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Ruby on Rails 开发 Web 应用程序。我想检查是否启用了 cookie。如果不是，那么我会显示一条错误消息，并且用户无法继续进行。

在 application_controller 我这样做了..

```
before_filter :cookies_required
def cookies_required
    return true unless cookies["_no_app"].blank?        
    render :template => "shared/cookies_required", :layout => "login"
end 
```

shared/cookies_required.html.erb 中的代码是...

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<%= stylesheet_link_tag "login.css"%>
<head>
    <style type="text/css">
        body { background-color: #fff; color: #666; text-align: center; font-family: arial, sans-serif; }
        div.dialog {
            width: 25em;
            padding: 0 4em;
            margin: 4em auto 0 auto;
            }
        h1 { font-size: 100%; color: #f00; line-height: 1.5em; }
    </style>
</head>
<body>

<div class="dialog">
<p><font size="4">Cookies are disabled. First enable it.</font> </p>
</div>
</body>
</html> 
```

此代码正在运行...但问题是当浏览器首次加载页面时，显示错误消息 tht cookie 已禁用，即使它已启用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-02-06T10:29:05.427

将您的方法更改为以下内容：

```
def cookies_required
   return true unless request.cookies.blank?  
   render :template => "shared/cookies_required", :layout => "login"
end 
```

# iphone - 导航时出错

> ID：13226179
> 
> 赞同：0
> 
> 时间：2012-11-05T05:00:34.570
> 
> 标签：iphone, ios, ipad, uinavigationcontroller

当我使用 y=this 两行导航到另一个视图控制器时，它可以正常工作。

```
 Inventory *obj = [[Inventory alloc] initWithNibName:@"Inventory" bundle:nil]; 
  [self.navigationController pushViewController:obj animated:YES]; 
```

但是如果我写这行[我们必须写的]

```
[obj release]; 
```

它给了我糟糕的访问错误。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:32:47.947

```
Inventory *obj = [[[Inventory alloc] initWithNibName:@"Inventory" bundle:nil] autorelease] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:06:55.550

您的类对象已发布，然后它再次访问已发布的对象，因此您遇到了这个错误的访问错误。请阅读以下链接文章以[了解 EXC_BAD_ACCESS](http://loufranco.com/blog/files/Understanding-EXC_BAD_ACCESS.html)

# php - 数组中的 CURL 数据

> ID：13226185
> 
> 赞同：0
> 
> 时间：2012-11-05T05:01:14.540
> 
> 标签：php, curl

我正在使用 cURL 从另一个站点将数据提取到我的应用程序中。我得到的数据格式与浏览器上显示的格式完全相同。

我需要的是以数组的形式获取数据。

我什至尝试过使用`file_get_contents`，但它也没有给我数组中的数据（因为它在数组中输出）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:08:05.897

获取 cookie 数据和标头的位置，我使用此代码，希望对您有所帮助。

您可以尝试使用标题可以为您提供的任何其他信息。

```
...
$result = curl_exec($ch);
curl_close($ch);

$var = explode("\n", $result);
$header = array();

foreach( $var as $row ) {
    if( strpos( strtolower($row), "set-cookie: " ) !== false ) {
        $header['set-cookie'] = str_ireplace("Set-Cookie: ", "", $row);
    } else if( strpos( strtolower($row), "location: " ) !== false ) {
        $header['location'] = str_ireplace("Location: ", "", $row);
    }
} 
```

**PS：**我错了，我认为这是关于 Header 而不是 HTML 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:08:38.670

您应该使用 xpath。检查[PHP & xPath Question](https://stackoverflow.com/questions/548744/php-xpath-question)或尝试使用 xpath 搜索。

# jsp - jsp中的文件下载警报

> ID：13226187
> 
> 赞同：1
> 
> 时间：2012-11-05T05:01:31.440
> 
> 标签：jsp, struts2, struts, struts-1

我在 jsp 中使用以下代码从服务器下载文件。我正在使用struts框架。如果文件不存在，我想显示一条警报消息（使用以下代码，如果文件不存在，则以不可读的格式下载）。我不确定如何实施。如果有人对此提供帮助，我将不胜感激。

jsp内容：

```
<a href='<%=url%>/download.jsp?Path=<%=filePath%>&fileName=${CustomerRegistrationForm.customerId}_certificate.pdf' style="text-decoration:none"><font color="#0000FF">Click Here</font></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:58:05.967

单击 url 而不是 href 发送 ajax 请求。并检查响应状态是否为 200，这意味着文件在那里并且可以下载。如果该文件不存在，您将收到 404 错误状态。在这种情况下，您可以提醒消息。

```
<body>
    <script language="javascript" type="text/javascript">
        function ajaxFunction(){
            var ajaxRequest;  // The variable that makes Ajax possible!
            try{
                // Opera 8.0+, Firefox, Safari
                ajaxRequest = new XMLHttpRequest();
            } catch (e){
                // Internet Explorer Browsers
                try{
                    ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e) {
                    try{
                        ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (e){
                        // Something went wrong
                        alert("Your browser broke!");
                        return false;
                    }
                }
            }
            // Create a function that will receive data sent from the server
            ajaxRequest.onreadystatechange = function(){
                if(ajaxRequest.readyState == 4){
                    if(ajaxRequest.status == 200)   {
                    alert("File Found");
                    document.getElementById("downloadIframe").src = "abc.csv";
                    }
                    else    
                        alert("File Not Found");

                }
            }
            ajaxRequest.open("GET", "abc.csv", true);
            ajaxRequest.send(null); 
        }

    </script>
    <input type = "button" onclick = "ajaxFunction()" value =  "Download"/>
    <iframe id =  "downloadIframe" src =""  style="display:none;"></iframe>
</body> 
```

# soap - 我如何在肥皂消息中签署 BinarySecurityToken

> ID：13226188
> 
> 赞同：4
> 
> 时间：2012-11-05T05:01:42.157
> 
> 标签：soap, wcf-security, signing

我有以下 C# 代码来调用 Web 服务。

```
System.ServiceModel.Channels.AsymmetricSecurityBindingElement asbe = new AsymmetricSecurityBindingElement();
asbe.MessageSecurityVersion = MessageSecurityVersion.WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10;

asbe.InitiatorTokenParameters = new System.ServiceModel.Security.Tokens.X509SecurityTokenParameters();
asbe.RecipientTokenParameters = new  System.ServiceModel.Security.Tokens.X509SecurityTokenParameters();
asbe.ProtectTokens = true;
asbe.MessageProtectionOrder = System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt;

asbe.SecurityHeaderLayout = SecurityHeaderLayout.Strict;
asbe.EnableUnsecuredResponse = true;
asbe.IncludeTimestamp = false;
asbe.SetKeyDerivation(false);
asbe.DefaultAlgorithmSuite = System.ServiceModel.Security.SecurityAlgorithmSuite.Basic128Rsa15;
asbe.EndpointSupportingTokenParameters.Signed.Add(new UserNameSecurityTokenParameters());

CustomBinding myBinding = new CustomBinding();
myBinding.Elements.Add(asbe);
myBinding.Elements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap11, Encoding.UTF8));

HttpsTransportBindingElement httpsBindingElement = new HttpsTransportBindingElement();
httpsBindingElement.RequireClientCertificate = true;
myBinding.Elements.Add(httpsBindingElement);

ServiceReference1.ConnectionTestType testType = new WindowsFormsApplication9.ServiceReference1.ConnectionTestType();
testType.Message = "Bonjour";

var c = new ServiceReference1.ConnectionTestServiceClient(myBinding, new EndpointAddress(new Uri("https://(IP of server)/ConnectionTest"), new DnsEndpointIdentity("(XXX)"), new AddressHeaderCollection()));

c.Endpoint.Contract.ProtectionLevel = System.Net.Security.ProtectionLevel.Sign;
c.ClientCredentials.UserName.UserName = "pts";
c.ClientCredentials.UserName.Password = "test";
c.ClientCredentials.ServiceCertificate.Authentication.CertificateValidationMode = System.ServiceModel.Security.X509CertificateValidationMode.None;
c.ClientCredentials.ServiceCertificate.DefaultCertificate = new X509Certificate2(Application.StartupPath + "\\" + "Certs\\ca-crt");
c.ClientCredentials.ClientCertificate.Certificate = new X509Certificate2(Application.StartupPath + "\\" + "Certs\\sign-and-enc.p12", "ThePassword");

c.Open();
ServiceReference1.ConnectionTestType t = c.ConnectionTest(testType);
c.Close(); 
```

这将创建以下消息，该消息非常接近于 usernameToken 和消息正文签名所需的消息。

```
<?xml version="1.0"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<s:Header>
<o:Security xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" s:mustUnderstand="1">
<o:BinarySecurityToken u:Id="uuid-5c84e7b3-53ee-4262-8621-edd24e69253f-3" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">(binary data)</o:BinarySecurityToken>
<o:UsernameToken u:Id="uuid-5c84e7b3-53ee-4262-8621-edd24e69253f-1">
    <o:Username>pts</o:Username>
    <o:Password o:Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">test</o:Password>
</o:UsernameToken>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
    <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
    <Reference URI="#_1">
        <Transforms>
            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>FNjRLXvhojvaLY/4MhdtsK1cicE=</DigestValue>
    </Reference>
    <Reference URI="#uuid-5c84e7b3-53ee-4262-8621-edd24e69253f-1">
        <Transforms>
            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>EpYurWbP+j2aXiuzO5/pswx/rQ8=</DigestValue>
    </Reference>
</SignedInfo>
<SignatureValue>(binary data)</SignatureValue>
<KeyInfo>
    <o:SecurityTokenReference>
        <o:Reference ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" URI="#uuid-5c84e7b3-53ee-4262-8621-edd24e69253f-3"/>
    </o:SecurityTokenReference>
</KeyInfo>
</Signature>
</o:Security>
</s:Header>
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" u:Id="_1">
<ConnectionTest xmlns="xxx:xxx:xxx:ConnectionTest">
<Message xmlns="">Bonjour</Message>
</ConnectionTest>
</s:Body>
</s:Envelope> 
```

我的规范声明 BinarySecurityToken 也将被签名。即在SignedInfo 部分中应该有一个Reference 块，它具有BinarySecurityToken 的ID 和digestValue。

是否可以指定标头的哪些部分得到签名？

我找到了这个链接[http://msdn.microsoft.com/en-us/library/aa528813.aspx](http://msdn.microsoft.com/en-us/library/aa528813.aspx)但它似乎已经过时了，依赖于 Microsoft.Web.Services3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T07:06:26.983

是的，例如此代码将签署 BinarySecurityToken：

```
asbe.EndpointSupportingTokenParameters.Signed.Add(new X509SecurityTokenParameters()); 
```

# java - Mongo jackson mapper 按 id 结果删除

> ID：13226190
> 
> 赞同：1
> 
> 时间：2012-11-05T05:01:52.357
> 
> 标签：java, mongodb

我正在使用 mongo jackson mapper 通过其 id 删除一个对象：

```
WriteResult<Restaurant, String> writeResult = restaurantCollection.removeById(restaurantIdToDelete);
String restaurantId = writeResult.getSavedId(); 
```

我得到

```
com.mongodb.MongoException: No objects to return 
```

由于该对象不再存在，系统无法检索其 id 和/或 getSavedId() 方法仅用于保存操作。

我怎么知道删除操作是否顺利？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:50:32.197

I found this workaround:

```
public String removeRestaurant(String restaurantIdToDelete){

    String restaurantId = null;

    WriteResult<Restaurant, String> writeResult = restaurantCollection.removeById(restaurantIdToDelete);

    if(writeResult != null)
        restaurantId = restaurantIdToDelete; 

    return restaurantId;

} 
```

So in theory if something goes wrong either WriteResult should be null or a MongoException would have been thrown... not sure 100% though.

# arrays - Scala 中快速打包的结构数组

> ID：13226192
> 
> 赞同：4
> 
> 时间：2012-11-05T05:01:59.967
> 
> 标签：arrays, performance, scala

我正在研究如何将现有的混合 Python/C++ 数字代码库转换为混合 Scala/C++（从长远来看，最好是 Scala）。我预计最大的问题是结构的打包数组。例如，在 C++ 中，我们有如下类型

```
Array<Vector<double,3>> # analogous to double [][3]
Array<Frame<Vector<double,3>>> # a bunch of translation,quaternion pairs 
```

借助 Numpy，这些可以在 Python 和 C++ 之间来回转换而无需复制。

在 JVM 上，由于未装箱的数组只能有几种类型，我能想象的唯一方法是为每个结构创建（1）一个装箱的 Scala 类型，例如`Vector<double,3>`（2）一个类型化的瘦包装器，`Array[Double]`它知道什么结构它应该是并根据需要创建/使用盒装单例。

是否有任何现有的库可以做这样的事情，或者为结构的打包数组实现任何替代方案？有没有人有关于性能特征可能是什么的经验，以及现有的编译器和 JVM 是否能够至少在非多态、密封的情况下优化这些盒子？

请注意，打包和漂亮的类型不是可选的：如果不打包，我会很快耗尽内存，如果我只有 Array[Double] C++ 的类型系统（不幸的是）获胜。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T08:17:16.027

问题实际上是那里除了数字之外是否还有其他东西。如果它只是一堆双打，你可以在 Scala 中编写一个包装器，但你不应该指望避免装箱。相反，请考虑编写可变包装器：

```
trait Vec3 {
  def x: Double
  def y: Double
  def z: Double
}
class ArrayedVec3(array: Array[Double]) extends Vec3 {
  private[this] var index = 0
  def goto(i: Int) = { index = i*3; this }
  def x = array(index)
  def y = array(index+1)
  def z = array(index+2)
} 
```

您可以让 ArrayedVec3 实现`Iterator`、将自身返回为`next`，或者在您想要易用性而不是效率的情况下进行各种其他操作。

但关键是，如果您愿意自己管理这些适配器的创建和移动，则无需担心装箱问题。您只需创建一次“盒子”，然后它就会跳到您需要的任何地方。

如果您对 C++ 约 2 倍的性能感到满意，并且目标是单线程使用，那么这应该可以解决问题。（过去它对我有用。）

# android - android - 内存不足异常

> ID：13226195
> 
> 赞同：4
> 
> 时间：2012-11-05T05:02:40.893
> 
> 标签：android, bitmap, out-of-memory

我开发了一个用于读书的安卓应用程序。书籍页面和音频是从 Amazon Bucket 下载的。下载后存储在 SD 卡上。

我为下一页和上一页放置了两个按钮。当我显示页面时，它给了我内存不足异常。

```
11-03 10:59:39.199: E/AndroidRuntime(13566): FATAL EXCEPTION: main
11-03 10:59:39.199: E/AndroidRuntime(13566): java.lang.OutOfMemoryError
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at  android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:299)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:324)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.graphics.drawable.Drawable.createFromPath(Drawable.java:880)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at org.Infoware.childrenbible.GeneralHelper.setImgfromSDCard(GeneralHelper.java:608)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at org.Infoware.childrenbible.CoverPageActivity.onCreate(CoverPageActivity.java:205)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.app.Activity.performCreate(Activity.java:4465)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.os.Looper.loop(Looper.java:137)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at android.app.ActivityThread.main(ActivityThread.java:4424)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at java.lang.reflect.Method.invokeNative(Native Method)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at  java.lang.reflect.Method.invoke(Method.java:511)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-03 10:59:39.199: E/AndroidRuntime(13566):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我的Java代码：

```
public class PageReadActivity extends Activity 
{
    Bitmap bitmap;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
        super.onCreate(savedInstanceState);
    try 
    {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.pageread_layout);
     } 
    catch (Exception ex) 
    {
        ex.printStackTrace();
        Log.d(TAG, "Error in onCreate");
    }
}

  @Override
  protected void onStart() {
    // TODO Auto-generated method stub
    super.onStart();
    displayPage(product_code, page_Index);

      btnNext.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                          page_Index = page_Index + 1;
                 displayPage(product_code, page_Index);

            }
        });

       btnPrevious.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
             page_Index = page_Index - 1;
    displayPage(product_code, page_Index);

            }
        });

   }

      private void displayPage(String product_code, int ind) 
{
    try 
    {
        String imageName = product_code + ind + ".jpg";

        String imgFilePath = objHelper.getFullFilePath(imageName);

        File imageFile = new File(imgFilePath);

        imgViewPage = new ImageView(myContext);

        if(imageFile.exists())
        {   

            bitmap = objHelper.decodeSampledBitmapFromResource(imageName,objHelper.screenWidth,objHelper.screenHeight);             

            imgViewPage.setImageBitmap(bitmap);
            bitmap = null;

            String audioName = product_code+"_audio" + ind + ".mp3";
            String audioFilePath = objHelper.getFullFilePath(audioName);

            File audioFile = new File(audioFilePath);

            if(audioFile.exists())
            {   
                progressBarWaiting.setVisibility(View.INVISIBLE);
                stopAudio();
                playAudio(ind);
            }

        }
        else
        {
            System.out.println("Image not exists.....");
        }           
    } 
    catch (Exception ex) 
    {
        ex.printStackTrace();
        Log.e(TAG, "ERROR in displayPage");
    }
}

    @Override
protected void onDestroy() 
{
    super.onDestroy();
    objHelper.unbindDrawables(findViewById(R.id.pageReadLayout));
    System.gc();
}

    public void unbindDrawables(View view) 
{
    if(view.getBackground() != null)
    {
        view.getBackground().setCallback(null);
    }

    if(view instanceof ViewGroup && !(view instanceof AdapterView))
    {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) 
        {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
        }

        ((ViewGroup) view).removeAllViews();
    }
}

    public Bitmap decodeSampledBitmapFromResource(String fileName,int reqWidth, int reqHeight) 
{

    String imagePath = getFullFilePath(fileName);

    @SuppressWarnings("unused")
    File imgFile = new File(imagePath);

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(imagePath,options);

    // Calculate inSampleSize
    options.inSampleSize = 1;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

    return BitmapFactory.decodeFile(imagePath,options);
}
   } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T05:09:33.113

位图将图像的原始大小转换为 4。因此它占用了更多由 android 指定给您的应用程序的堆。

当不再需要您的位图时使用它

```
bitmap.recycle();
bitmap = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T05:10:12.323

我的猜测是位图没有正确处理，这正在创建 OutofMemoryException。位图在不使用时应回收。看看[这里。](https://stackoverflow.com/questions/2928002/outofmemoryerror-bitmap-size-exceeds-vm-budget-android). 还[可以查看如何](http://www.youtube.com/watch?v=_CruQY55HOk.)使用 MAT Analyzer 在此处查找内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:26:41.707

只需更改`inSampleSize = 4`，如果它不起作用，则将其增加 2 的 sequre

# python - 如何在子节点内循环

> ID：13226200
> 
> 赞同：0
> 
> 时间：2012-11-05T05:03:20.033
> 
> 标签：python

```
<person>
<user name="david" password="super"><groups>meganfox</groups></user>
<user name="alen" password="boss"><groups>marvik</groups></user>
</person> 
```

我喜欢获取 "groups" 的文本值。但它总是没有。

```
import xml.etree.ElementTree as ET

doc    = ET.parse("users.xml")
root = doc.getroot() #Returns the root element for this tree.
root_new  = ET.Element("person") 
for child in root:
    name                = child.attrib['name']
    password             = child.attrib['password']
for groups in child.findall('groups'): #this is not working for me :(
    gpvalue =  groups.text 

    user  = ET.SubElement(root_new, "user") # create subelement in cycle! 
    group = ET.SubElement(user, "groups")
    user.set("name",name)               
    user.set("password",password) 
    group.text = gpvalue

tree = ET.ElementTree(root_new)
tree.write("new.xml")

import sys
tree.write(sys.stdout) 
```

输出得到:(

```
<person>
    <user name="david" password="super"></groups></user>
    <user name="alen" password="boss"></groups></user>
  </person> 
```

没有组文本值。它的打印只有一个封闭的组。请检查输出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:19:13.953

`for groups`1) from to的整个块`user.set("password"`需要再缩进一级。Python 的控制流程都是关于缩进的，所以这会将它移到第一个循环中。

2）您是否尝试在新文件中保留组？一旦你拥有了 groups 的价值，你就不会对它做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:13:14.077

在你的第二个 for 循环中替换`child.`为！`root.`这应该做！

或者第二次看它，您似乎想要创建一个嵌套循环，但是您的代码没有正确缩进！;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T05:15:39.250

如果您想在`groups`不通过用户的情况下获取值，可以使用路径：

```
>>> root.findall("user")
[<Element 'user' at 0x1004d9f90>, <Element 'user' at 0x1004df0d0>]
>>> root.findall("groups")
[]
>>> root.findall("*/groups")
[<Element 'groups' at 0x1004d9fd0>, <Element 'groups' at 0x1004df190>]
>>> [g.text for g in root.findall("*/groups")]
['meganfox', 'marvik'] 
```

但循环似乎对我有用：

```
>>> for child in root:
...     print child.attrib['name'], child.attrib['password'], 
...     for groups in child.findall("groups"):
...         print groups.text,
...     print
... 
david super meganfox
alen boss marvik 
```

# ruby-on-rails-3 - 如何告诉 Rails 在哪里寻找特定模板？

> ID：13226230
> 
> 赞同：0
> 
> 时间：2012-11-05T05:07:48.447
> 
> 标签：ruby-on-rails-3, paperclip

我有一个名为 Purchase.rb 的模型。每次购买都是通过如下表格创建的。

```
<%= form_for(@purchase) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_field :content, placeholder: "Describe something you are interested in buying.", :maxlength=>"254" %>
    <%= f.file_field :photo %>

  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

当它们被创建时，它们的显示部分存储在 app/views/purchases/_purchase.html.erb 中。要添加照片，我已经放

```
<%= form_for(@purchase) do |f| %>
    <%= f.file_field :photo %>
    <%= f.submit "Post", class: "btn btn-large btn-primary" %>
  <% end %> 
```

在购买本身。我正在使用回形针。所以这个想法是人们可以点击作为购买一部分的字段并将照片添加到视图中。

我得到的错误说

```
Missing template purchases/users#show, application/users#show with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "/home/alex/rails_projects/tradespring!/app/views" 
```

我希望它查看 app/views/users#show，而不是 app/views/purchases/users#show

编辑：

这是用户控制器的显示操作：

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
    @purchases= @user.purchases
    @sales= @user.sales
    @purchase=Purchase.new
    @sale=Sale.new
  end 
```

这是 routes.rb

```
Tradespring::Application.routes.draw do
  resources :users do
    resources :pcomments
    resources :scomments
  end
  resources :sessions, only: [:new, :create, :destroy]
  resources :purchases do
    resources :pcomments
  end
  resources :sales do
    resources :scomments
  end

  get "static_pages/home"

  get "static_pages/about"

  match '/signup',  to: 'users#new'
  match '/signin',  to: 'sessions#new' 
  match '/about',   to: 'static_pages#about'
  match '/signout', to: 'sessions#destroy', via: :delete

  root to: 'static_pages#home' 
```

最后，这是我提交图片表单时想要发生的事情。我不是 100% 确定它应该在更新中。

```
class PurchasesController < ApplicationController
 def update
    @purchase = Purchase.find(params[:id])
    if @purchase.update_attributes(params[:purchase])
      flash[:success] = "Picture added"

      redirect_to :back
    else
      render 'users/show'
    end
  end 
```

这里也是 app/views/user/show.html.erb

```
<% provide(:title, @user.name) %>
<p>
<%= mail_to(@user.email, name="email this user", :encode => "javascript") %>
</p>

<div id="purchases">

<%= form_for(@purchase) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_field :content, placeholder: "Describe something you are interested in buying.", :maxlength=>"254" %>
    <%= f.file_field :photo %>
    <p1> Note: There is a 254 character limit. Be sure to include useful information such as product specifications, how much you are willing to pay, and shipping info (where you live, if you want to pick it up locally, ect.). Further detail is best left to email.</p1>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %>

<% if @user.purchases.any? %>
      <h3>Purchases (<%= @user.purchases.count %>)</h3>
      <ol class="purchases">
        <%= render @purchases %>
      </ol>
<% end %>
</div>

<div id="sales">

<%= form_for(@sale) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_field :content, placeholder: "Describe something you are interested in selling.", :maxlength=>"254" %>
    <p1> Note: There is a 254 character limit. Be sure to include useful information such as product specifications, price, payment methods accepted, and shipping info (where you live, if you are willing to ship it, ect.). Further detail is best left to email. </p1>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %>

<% if @user.sales.any? %>
      <h3>Sales (<%= @user.sales.count %>)</h3>
      <ol class="sales">
        <%= render @sales %>
      </ol>
<% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:20:31.667

问题是我需要定义第二种形式的动作。我猜默认情况下，表单假定您想要创建操作。在这种情况下，我希望它使用更新操作，因此我需要将其更改为 <%= form_for((@purchase), :url => { :action => "update" }) do |f| %>

# perl - 尝试在 perl 中迭代散列的散列。这种方法有什么问题？

> ID：13226232
> 
> 赞同：1
> 
> 时间：2012-11-05T05:07:56.430
> 
> 标签：perl, hash, foreach

我正在尝试迭代使用嵌套哈希的数据结构中的项目。为此，我想看看里面有什么键。

以下是我尝试过的。但我收到一个错误

```
 my %tgs = (
        'articles' =>  {
                           'vim' => 'about vim',
                           'awk' => 'about awk',
                           'sed' => 'about sed'
                       },
        'ebooks'   =>  {
                           'linux 101'    => 'about linux',
                       }
    );

    foreach my $k (keys %tgs){
        print $k;
        print "\n";
        foreach my $k2 (keys %$tgs{$k}){ #<-----this is where perl is having a problem
            print $k2;
            print "\n";
        }
    }

syntax error at PATH line #, near "$tgs{"
syntax error at PATH line #, near "}"
Execution of PATH aborted due to compilation errors. 
```

我的方法有什么问题？我的理由是因为 $tgs{$k} 返回哈希的引用，我可以在每个循环中取消引用它，但我猜不是？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T05:10:07.537

你需要大括号`$tgs{$k}`：

```
foreach my $k2 (keys %{$tgs{$k}}){ #<-----this is where perl is having a problem 
```

完整的代码是：

```
foreach my $k1 (keys %tgs){
    print "Key level 1: $k1\n";
    foreach my $k2 (keys %{$tgs{$k1}}) {
        print "    Key level 2: $k2\n";
    }
} 
```

# java - java应用程序无法打开URL地址0.0.0.0

> ID：13226236
> 
> 赞同：0
> 
> 时间：2012-11-05T05:08:09.143
> 
> 标签：java, jboss, jvm, centos, routes

我有一个 jboss 服务器正在运行，并且在 webapplication 里面有下面的代码。问题是我无法连接到服务器。有趣的是，如果我写 127.0.0.1 而不是 0.0.0.0 一切都可以。

我正在使用以下命令运行 jboss 服务器：

```
#!/bin/sh
nohup sh run.sh -b 0.0.0.0 -c crm & 
```

这是示例代码

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.net.URL;

public class Test{
        public static void main(String []args){
                System.out.println("TEST");
                System.setProperty("java.net.preferIPv4Stack" , "true");
                String url="http://0.0.0.0:8080/webapp/vacancies?rabota=rabota&area=7232&speciality=Стораж&email=&phone=77019813144";
                System.out.println("START");
                try{
                        URL yahoo = new URL(url);
                        BufferedReader in = new BufferedReader(new InputStreamReader(yahoo.openStream()));
                        String inputLine;
                        while ((inputLine = in.readLine()) != null) {
                                System.out.println(inputLine);
                        }
                        System.out.println("FINISH!");
                        in.close();
                    }
                    catch (Exception e)
                    {
                      System.out.println("ERROR opening jobs servlet: " + e.getLocalizedMessage());
                    }
        }
} 
```

所以最后我得到了连接超时异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:10:59.767

`0.0.0.0`不是有效的 IP。它用于表示未知/无效。在某些应用程序中，它用于表示“绑定到特定接口上的所有地址”。在您的情况下，它根本无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:31:21.940

关于为什么 0.0.0.0 不能在[Is 0.0.0.0 是有效的 IP 地址有一个完整的线程？](https://stackoverflow.com/questions/3655723/is-0-0-0-0-a-valid-ip-addres);.

[https://serverfault.com/questions/78048/whats-the-difference-between-ip-address-0-0-0-0-and-127](https://serverfault.com/questions/78048/whats-the-difference-between-ip-address-0-0-0-0-and-127-0-0-1)详细介绍了 0.0.0.0 和 127.0.0.1 之间的区别[-0-0-1](https://serverfault.com/questions/78048/whats-the-difference-between-ip-address-0-0-0-0-and-127-0-0-1)。

如果你想让你的代码工作，你必须将 http:// **0.0.0.0** :8080 更改为 http:// **127.0.0.1** :8080 或使用系统接口（正确的 IP 地址）。

# java - 线程“主”java.lang.Error 中的异常：未解决的编译

> ID：13226238
> 
> 赞同：0
> 
> 时间：2012-11-05T05:08:17.020
> 
> 标签：java, eclipse, import

`The declared package "" does not match the expected package "src"` 我正在尝试编译该程序，但出现上述错误。我从下载文件夹中导入了项目并将其复制到我的工作区。我需要创建一个新包吗？ ![截屏](../Images/e6354e510ea1e9fad2753c2989b4bf39.png)

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:21:01.647

有一个

> 默认包

在 src 下，如果您在其下放置类，它将正常工作。另一种解决方案是手动创建一个项目并添加一个类并单独复制粘贴，这不太令人愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:21:48.967

我认为您必须为项目配置源位置。执行下图中所述的以下操作。单击“添加文件夹”和源文件夹的位置

![在此处输入图像描述](../Images/da3ca552f26270a11f91c5d3f6246683.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:12:02.150

我不确定你到底做了什么。但看起来你没有正确地将它导入工作区。

如果这是您下载的项目，只需使用 import-> existing projects into workspace。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T17:39:45.540

发生这种情况是因为您的课程不在正确的包中，您应该将您的课程放在默认包下，然后您的问题就可以了；否则你应该写在你的班级顶部，你的包名，例如“mohsen package;”

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-03-05T23:03:22.343

确保您的“S”是 System.out.println() 中的大写字母；

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2019-08-19T12:58:31.757

您会错误地删除任何类中的包名称。检查所有类以获取正确的包名称。

# objective-c - 在 UITableView 中附加以前的数据

> ID：13226242
> 
> 赞同：0
> 
> 时间：2012-11-05T05:08:48.017
> 
> 标签：objective-c, ios, xcode, uitableview

我正在将数据解析为表格视图，但服务器页面中有十万个名称。

首先，我在服务器端的不同页面中编写了所有服务器数据，并在表格视图下放置了一个“查看更多”按钮。当用户单击它时，页码将增加一并且第二页上的数据显示在表格视图中。问题是我在表格视图中丢失了第一页的数据。单击“查看更多”时，如何将新数据附加到以前的数据？

这是`viewDidLoad`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    sharedClass=[SharedClass sharedInstance];
    [self.navigationController setNavigationBarHidden:YES];

    Noresult.hidden = YES;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    // NSString *userid = [defaults objectForKey:@"userid"];
    NSString *userid = @"3";

    NSString *search_key = @"";
    NSString *type=@"user";

    page = 1;

    ServerRequests *ser_req = [[ServerRequests alloc] init];
    ser_req.server_req_proces = self;
    NSString *postdata = [[NSString alloc] initWithFormat:@"{\"function\":\"search\",   \"parameters\": {\"user_id\": \"%@\",\"search_key\": \"%@\",\"type\": \"%@\",\"page\": \"%d\"},\"token\":\"\"}",userid,search_key,type,page];

    [ser_req sendServerRequests:postdata];

    NSLog(@"array=========>>%@",postdata);
    sharedClass.oprtn = @"load table";

} 
```

这是`viewMore`按钮内的代码

```
-(IBAction)Viewmore:(id)sender
{

    NSString *userid = @"3";

    NSString *search_key = searchBaar.text;
    NSString *type=@"user";

    page = page + 1 ;

    ServerRequests *ser_req = [[ServerRequests alloc] init];
    ser_req.server_req_proces = self;
    NSString *postdata = [[NSString alloc] initWithFormat:@"{\"function\":\"search\",  \"parameters\": {\"user_id\": \"%@\",\"search_key\": \"%@\",\"type\": \"%@\",\"page\": \"%d\"},\"token\":\"\"}",userid,search_key,type,page];

    [ser_req sendServerRequests:postdata];

    sharedClass.oprtn = @"load table";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:25:25.867

您正在使用一个`NSMutableArray`来保存数据。当您按下查看更多按钮时，可能会存储以下数据：

```
yourDataArray = //getting data from server; 
```

我建议不要**删除**或**重新分配**相同的`NSMutableArray`.

使用临时数组代替并将临时数组中的新数据附加到`dataArray`喜欢：

```
NSMutableArray *tempArray = //getting data from server;

for(int loop = 0; loop < [tempArray count]; loop++)
{
   [yourDataArray addObject:[tempArray objectAtIndex:loop]];
} 
```

# java - 如何使用 webclient 在 Apache CXF JAX-RS 中发送带有正文的 DELETE 请求？

> ID：13226243
> 
> 赞同：2
> 
> 时间：2012-11-05T05:09:01.447
> 
> 标签：java, jax-rs, cxf, http-delete

我想调用`webclient.delete(deleteBody)`类似于 POST 的方法。

```
WebClient client = WebClient.create(getUrl());
client = client.type("application/json").accept("application/json");
HTTPConduit conduit = WebClient.getConfig(client).getHttpConduit();
conduit.getClient().setReceiveTimeout(getApiTimeout());
Response resp = client.post(postData); 
```

但是没有采用deleteBody的方法。

我什至使用`webclient.invoke("DELETE", deletBody)`，但这会引发 500 HTTP 错误。

这是我的删除正文：

```
{"password":"1ad1ad","username":11111111} 
```

但我尝试使用`curl`命令删除它的工作：

```
curl -q -H "Accept: application/json" -H "Content-type: application/json" -X DELETE -d @del.json http://d.eze.cc/api/pd/xxxxx/DEL001234/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:54:52.150

您说得对，CXF`WebClient`不支持在`DELETE`请求中发送正文。

1.  这没关系，因为发送带有`DELETE`请求的正文是没有意义的。请参阅此问题： [HTTP DELETE 请求是否允许实体主体？](https://stackoverflow.com/q/299628/647772)
2.  对于`500`您收到的错误，请查看服务器日志。服务端 REST 是如何实现的？

# wso2 - WSO2 BAM 2.0.1 中的错误：尝试关闭已关闭的数据库

> ID：13226247
> 
> 赞同：1
> 
> 时间：2012-11-05T05:09:36.413
> 
> 标签：wso2, wso2esb, wso2carbon, wso2bam

在使用来自 AS 和 ESB 的数据运行 WSO2 BAM 2.0.1 一段时间后，我会不时看到此错误。我使用默认配置，我只是将 AS 和 ESB 的工具箱放在 BAM 中。即使出现此错误，BAM 也可以正常工作，我可以毫无问题地看到统计数据：

```
TID: [0] [BAM] [2012-11-04 22:22:08,613] ERROR {org.apache.hadoop.mapred.MapTask} -  IO error in map input file file:/var/BAM/wso2bam-2.0.1/repository/data/hive/warehouse-1234/appserverstatsperdaydatafetcher {org.apache.hadoop.mapred.MapTask}
TID: [0] [BAM] [2012-11-04 22:22:08,613] ERROR {org.apache.hadoop.mapred.MapTask} -  IO error in map input file file:/var/BAM/wso2bam-2.0.1/repository/data/hive/warehouse-1234/appserverstatsperdaydatafetcher {org.apache.hadoop.mapred.MapTask}
TID: [0] [BAM] [2012-11-04 22:22:08,650] ERROR {org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBRecordReader} -  Failed to close {org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBRecordReader}
org.h2.jdbc.JdbcSQLException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-140]
        at org.h2.message.DbException.getJdbcSQLException(DbException.java:327)
        at org.h2.message.DbException.get(DbException.java:167)
        at org.h2.message.DbException.get(DbException.java:144)
        at org.h2.message.DbException.get(DbException.java:133)
        at org.h2.jdbc.JdbcConnection.checkClosed(JdbcConnection.java:1348)
        at org.h2.jdbc.JdbcConnection.checkClosedForWrite(JdbcConnection.java:1333)
        at org.h2.jdbc.JdbcConnection.commit(JdbcConnection.java:413)
        at org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBRecordReader.close(DBRecordReader.java:175)
        at org.apache.hadoop.hive.ql.io.HiveRecordReader.doClose(HiveRecordReader.java:50)
        at org.apache.hadoop.hive.ql.io.HiveContextAwareRecordReader.close(HiveContextAwareRecordReader.java:96)
        at org.apache.hadoop.mapred.MapTask$TrackedRecordReader.close(MapTask.java:254)
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:439)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:371)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:210)
TID: [0] [BAM] [2012-11-04 22:22:08,880] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Ended Job = job_local_0001 with errors {org.apache.hadoop.hive.ql.exec.ExecDriver}
TID: [0] [BAM] [2012-11-04 22:22:08,880] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Ended Job = job_local_0001 with errors {org.apache.hadoop.hive.ql.exec.ExecDriver}
TID: [0] [BAM] [2012-11-04 22:22:08,884] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Error during job, obtaining debugging information... {org.apache.hadoop.hive.ql.exec.ExecDriver}
TID: [0] [BAM] [2012-11-04 22:22:08,884] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Error during job, obtaining debugging information... {org.apache.hadoop.hive.ql.exec.ExecDriver}
adoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:189)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:325)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:225)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
TID: [0] [BAM] [2012-11-04 22:22:09,557] ERROR {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Error while executing script : service_stats_848 {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}
org.wso2.carbon.analytics.hive.exception.HiveExecutionException: Error while executing Hive script.Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl.execute(HiveExecutorServiceImpl.java:110)
        at org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask.execute(HiveScriptExecutorTask.java:60)
        at org.wso2.carbon.ntask.core.impl.TaskQuartzJobAdapter.execute(TaskQuartzJobAdapter.java:56)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
TID: [0] [BAM] [2012-11-04 22:24:00,003]  INFO {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Running script executor task for script esb_stats_0\. [Sun Nov 04 22:24:00 CST 2012] {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}

TID: [0] [BAM] [2012-11-04 22:24:00,009]  INFO {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Running script executor task for script service_stats_848\. [Sun Nov 04 22:24:00 CST 2012] {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}
TID: [0] [BAM] [2012-11-04 22:24:07,697]  INFO {org.wso2.carbon.cassandra.server.CarbonCassandraAuthenticator} -  The key is not present in the cache... {org.wso2.carbon.cassandra.server.CarbonCassandraAuthenticator}
TID: [0] [BAM] [2012-11-04 22:25:15,219] ERROR {org.apache.hadoop.mapred.MapTask} -  IO error in map input file file:/var/BAM/wso2bam-2.0.1/repository/data/hive/warehouse-1234/esbmediationstatsperdaydatafetcher {org.apache.hadoop.mapred.MapTask}
TID: [0] [BAM] [2012-11-04 22:25:15,219] ERROR {org.apache.hadoop.mapred.MapTask} -  IO error in map input file file:/var/BAM/wso2bam-2.0.1/repository/data/hive/warehouse-1234/esbmediationstatsperdaydatafetcher {org.apache.hadoop.mapred.MapTask}
TID: [0] [BAM] [2012-11-04 22:25:15,224] ERROR {org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBRecordReader} -  Failed to close {org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBRecordReader}
org.h2.jdbc.JdbcSQLException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-140]
        at org.h2.message.DbException.getJdbcSQLException(DbException.java:327)
        at org.h2.message.DbException.get(DbException.java:167)
        at org.h2.message.DbException.get(DbException.java:144)
        at org.h2.message.DbException.get(DbException.java:133)
        at org.h2.jdbc.JdbcConnection.checkClosed(JdbcConnection.java:1348)
        at org.h2.jdbc.JdbcConnection.checkClosedForWrite(JdbcConnection.java:1333)
        at org.h2.jdbc.JdbcConnection.commit(JdbcConnection.java:413)
        at org.wso2.carbon.hadoop.hive.jdbc.storage.db.DBRecordReader.close(DBRecordReader.java:175)
        at org.apache.hadoop.hive.ql.io.HiveRecordReader.doClose(HiveRecordReader.java:50)
        at org.apache.hadoop.hive.ql.io.HiveContextAwareRecordReader.close(HiveContextAwareRecordReader.java:96)
        at org.apache.hadoop.mapred.MapTask$TrackedRecordReader.close(MapTask.java:254)
        at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:439)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:371)
        at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:210)
TID: [0] [BAM] [2012-11-04 22:25:15,606] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Ended Job = job_local_0001 with errors {org.apache.hadoop.hive.ql.exec.ExecDriver}
TID: [0] [BAM] [2012-11-04 22:25:15,606] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Ended Job = job_local_0001 with errors {org.apache.hadoop.hive.ql.exec.ExecDriver}
TID: [0] [BAM] [2012-11-04 22:25:15,610] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Error during job, obtaining debugging information... {org.apache.hadoop.hive.ql.exec.ExecDriver}
TID: [0] [BAM] [2012-11-04 22:25:15,610] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Error during job, obtaining debugging information... {org.apache.hadoop.hive.ql.exec.ExecDriver}
hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:189)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:325)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:225)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
TID: [0] [BAM] [2012-11-04 22:25:16,271] ERROR {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Error while executing script : esb_stats_0 {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}
org.wso2.carbon.analytics.hive.exception.HiveExecutionException: Error while executing Hive script.Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl.execute(HiveExecutorServiceImpl.java:110)
        at org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask.execute(HiveScriptExecutorTask.java:60)
        at org.wso2.carbon.ntask.core.impl.TaskQuartzJobAdapter.execute(TaskQuartzJobAdapter.java:56)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
       at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
TID: [0] [BAM] [2012-11-04 22:27:00,007]  INFO {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Running script executor task for script esb_stats_0\. [Sun Nov 04 22:27:00 CST 2012] {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}

TID: [0] [BAM] [2012-11-04 22:27:00,009]  INFO {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Running script executor task for script service_stats_848\. [Sun Nov 04 22:27:00 CST 2012] {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}
TID: [0] [BAM] [2012-11-04 22:27:07,936]  INFO {org.wso2.carbon.cassandra.server.CarbonCassandraAuthenticator} -  The key is not present in the cache... {org.wso2.carbon.cassandra.server.CarbonCassandraAuthenticator} 
```

我也看到这个错误：

```
TID: [0] [BAM] [2012-11-04 23:42:00,013]  INFO {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Running script executor task for script esb_stats_0\. [Sun Nov 04 23:42:00 CST 2012] {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}
TID: [0] [BAM] [2012-11-04 23:42:00,022]  INFO {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Running script executor task for script service_stats_848\. [Sun Nov 04 23:42:00 CST 2012] {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}
TID: [0] [BAM] [2012-11-04 23:42:08,261]  INFO {org.wso2.carbon.cassandra.server.CarbonCassandraAuthenticator} -  The key is not present in the cache... {org.wso2.carbon.cassandra.server.CarbonCassandraAuthenticator}
TID: [0] [BAM] [2012-11-04 23:42:55,866] ERROR {org.apache.hadoop.hive.ql.exec.Task} -  Execution failed with exit status: 2 {org.apache.hadoop.hive.ql.exec.Task}
TID: [0] [BAM] [2012-11-04 23:42:55,866] ERROR {org.apache.hadoop.hive.ql.exec.Task} -  Execution failed with exit status: 2 {org.apache.hadoop.hive.ql.exec.Task}
TID: [0] [BAM] [2012-11-04 23:42:55,867] ERROR {org.apache.hadoop.hive.ql.exec.Task} -  Obtaining error information {org.apache.hadoop.hive.ql.exec.Task}
TID: [0] [BAM] [2012-11-04 23:42:55,867] ERROR {org.apache.hadoop.hive.ql.exec.Task} -  Obtaining error information {org.apache.hadoop.hive.ql.exec.Task}
TID: [0] [BAM] [2012-11-04 23:42:55,867] ERROR {org.apache.hadoop.hive.ql.exec.Task} -
Task failed!
Task ID:
  Stage-0

Logs:
 {org.apache.hadoop.hive.ql.exec.Task}
TID: [0] [BAM] [2012-11-04 23:42:55,867] ERROR {org.apache.hadoop.hive.ql.exec.Task} -
Task failed!
Task ID:
  Stage-0

Logs:
 {org.apache.hadoop.hive.ql.exec.Task}
TID: [0] [BAM] [2012-11-04 23:42:55,868] ERROR {org.apache.hadoop.hive.ql.exec.Task} -  /var/BAM/wso2bam-2.0.1/repository/logs//wso2carbon.log {org.apache.hadoop.hive.ql.exec.Task}
TID: [0] [BAM] [2012-11-04 23:42:55,868] ERROR {org.apache.hadoop.hive.ql.exec.Task} -  /var/BAM/wso2bam-2.0.1/repository/logs//wso2carbon.log {org.apache.hadoop.hive.ql.exec.Task}
TID: [0] [BAM] [2012-11-04 23:42:55,868] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Execution failed with exit status: 2 {org.apache.hadoop.hive.ql.exec.ExecDriver}
TID: [0] [BAM] [2012-11-04 23:42:55,868] ERROR {org.apache.hadoop.hive.ql.exec.ExecDriver} -  Execution failed with exit status: 2 {org.apache.hadoop.hive.ql.exec.ExecDriver}
TID: [0] [BAM] [2012-11-04 23:42:55,868] ERROR {org.apache.hadoop.hive.ql.Driver} -  FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask {org.apache.hadoop.hive.ql.Driver}
TID: [0] [BAM] [2012-11-04 23:42:55,868] ERROR {org.apache.hadoop.hive.ql.Driver} -  FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask {org.apache.hadoop.hive.ql.Driver}
TID: [0] [BAM] [2012-11-04 23:42:55,869] ERROR {org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl} -  Error while executing Hive script.
Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask {org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl}
java.sql.SQLException: Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
        at org.apache.hadoop.hive.jdbc.HiveStatement.executeQuery(HiveStatement.java:189)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:325)
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl$ScriptCallable.call(HiveExecutorServiceImpl.java:225)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
TID: [0] [BAM] [2012-11-04 23:42:55,872] ERROR {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask} -  Error while executing script : service_stats_848 {org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask}
org.wso2.carbon.analytics.hive.exception.HiveExecutionException: Error while executing Hive script.Query returned non-zero code: 9, cause: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
        at org.wso2.carbon.analytics.hive.impl.HiveExecutorServiceImpl.execute(HiveExecutorServiceImpl.java:110)
        at org.wso2.carbon.analytics.hive.task.HiveScriptExecutorTask.execute(HiveScriptExecutorTask.java:60)
        at org.wso2.carbon.ntask.core.impl.TaskQuartzJobAdapter.execute(TaskQuartzJobAdapter.java:56)
        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:44:12.423

在定义 jdbc url 的 hive 脚本中，您能否尝试添加“;DB_CLOSE_ON_EXIT=FALSE”并查看异常是否消失。

# java - 如果没有从中导入任何内容，为什么库需要成为构建路径的一部分？

> ID：13226249
> 
> 赞同：2
> 
> 时间：2012-11-05T05:10:00.033
> 
> 标签：java, reflection, buildpath

考虑这个（半伪）代码：

```
private static final File file = new File("./archive.jar");
private static URLClassLoader classLoader;

public static void main(final String[] args) {
    try {
        classLoader = new URLClassLoader(new URL[] { file.toURI().toURL() });
        Method mainMethod = classLoader.loadClass("main class").getDeclaredMethod("main", String[].class);
        mainMethod.setAccessible(true);
        mainMethod.invoke(null, (Object) new String[] { "-arguments" });
    } catch(Exception e) {
        e.printStackTrace();
    }
} 
```

...以及 Eclipse IDE 中的这两个项目设置：

![第一个项目设置。](../Images/ac378f992d0dac9067dc61ccdf60d4b8.png) ![第二个项目设置。](../Images/279fb7f7ca0ff23aa3dd416cdca7c86e.png)

提供的代码不会从 JAR 文件中导入任何内容，但行为不同。它有什么不同？好吧，在使用第一个项目设置时，本网站的主题会引发错误：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
Caused by: java.lang.StackOverflowError
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

该行发生的错误：

```
mainMethod.invoke(null, (Object) new String[] { "-arguments" }); 
```

但是，在使用第二个项目设置（其中 JAR 是构建路径的一部分）时不会发生错误。除此之外，代码在使用第一个项目设置时根本不起作用。我知道当它正常工作时会发生什么，第一个项目设置不会发生这种情况，但第二个项目设置会发生这种情况。另一件值得一提的事情是，只有当 JAR 文件位于 Eclipse 中的 Order 和 Exports 列表的顶部时，代码才会起作用：

![订单和出口清单。](../Images/3c5b66709db8175f1d6cbbd95eb70bc6.png)

为什么会这样？如果没有从 JAR 导入，为什么它需要成为构建路径的一部分才能工作？类加载器根据实际文件使用它，因此它是否与项目的构建路径相关联无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:24:23.903

StackOverflowError 通常表示调用循环。在这种情况下，我认为 JVM 可能会四处寻找它需要的东西，例如检查它试图链接的类是否有效。

链接是运行方法所必需的，并且涉及符号引用的验证和解析。

要进一步了解在没有库的情况下出了什么问题，有必要查看主类的代码以了解它引用的内容。

在 Java 中不要太重视 import。它只允许您使用类名而不完全限定它们：ArrayList，而不是 java.util.ArrayList。

# jakarta-ee - 如何将 http 请求重定向到安装在 Amazon ElasticBeanstalk 上的 java 应用程序上的 https

> ID：13226254
> 
> 赞同：2
> 
> 时间：2012-11-05T05:10:29.713
> 
> 标签：jakarta-ee, https, amazon-web-services, amazon-elb

我将 Amazon ElasticBeanstalk 用于我的 Java EE Web 应用程序部署。我希望我的应用程序应该只是 https，所以我已经在 ElasticLoadbalancer 上配置了 SSL 证书。我也将 web.xml 文件配置为

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>HTTPSOnly</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>      
    <user-data-constraint>      
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
  </security-constraint> 
```

但问题是当我点击[http://www.myweb.com](http://www.myweb.com)然后它重定向到[http://www.myweb.com:8443](http://www.myweb.com:8443)所以我想从 url 中删除端口 Amazon EBS & 负载均衡器的工作解释如下 ![在此处输入图像描述](../Images/b062a1a3f22c9f2a1f5239cb9e5e11a1.png)

![在此处输入图像描述](../Images/63b11e8e5e6d0137575f4e658dabaae1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-08T22:23:57.420

我还在我的 web.xml 中添加了 securityConstraint。使用 EB 与您的应用程序一起部署的库存 server.xml，您可以重定向到端口 8443。您可以手动编辑此文件，但它会在您的下一次部署中被吹走。研究建议在部署战争中包含一个 .ebextensions 文件，该文件将覆盖 server.xml 文件，但这会冒 AWS 将来更改 server.xml 中其他内容的风险。另一个问题是我希望相同的应用程序版本（从 jenkins 构建）在我的开发环境以及其他不一定需要/启用 ssl 的 EB 环境中工作。

所以我改变了路线并实现了一个 servlet 过滤器，它使用负载均衡器提供的两个标头

*   X-Forwarded-Proto
*   x-转发主机

如果 X-Forward-Proto == http 那么你知道你需要转发，需要 x-forward-host 来构造完整的 url 以进行重定向（至少我最终是这样做的）。这是使用客户 PropertiesHelper 对其进行环境特定控制的过滤器

```
public class RedirectFilter implements Filter {
    boolean firstTime = true;
    boolean redirect = false;

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException
    {
        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;

        if (firstTime) {
            PropertiesHelper propertiesHelper = SpringApplicationContext.getPropertiesHelper();
            redirect = propertiesHelper.getBooleanProperty("redirectHttp");
            firstTime = false;
        }

        if (!redirect) {
            chain.doFilter(request, response);
            return;
        }

        String protocol = req.getHeader("X-Forwarded-Proto");
        if (null != protocol && protocol.equals("http")) {
            String host = req.getHeader("x-forwarded-host");
            String requestURI = req.getRequestURI();
            String redirectUrl = "https://" + host + requestURI;

            res.sendRedirect(redirectUrl);
            return;
        }
        chain.doFilter(req, response);
    }

    @Override
    public void destroy() {
        // TODO Auto-generated method stub

    }
} 
```

您使用 web.xml 中的条目启用过滤器，确保它与您拥有的其他过滤器的顺序正确

```
<filter>
    <filter-name>httpsRedirectFilter</filter-name>
    <filter-class>com.cars.platform.util.RedirectFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>httpsRedirectFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

最后，您需要在负载均衡器上同时启用 http 和 https（端口 443）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:19:16.053

如果我理解正确，您只希望[弹性负载均衡器](http://aws.amazon.com/elasticloadbalancing/)使用标准 HTTPS 端口 443，而不是额外配置端口 8443？

这很容易通过单击您提供的第一个图像的侦听器表中的*Action*列中的*Remove*按钮来实现。整个过程，包括通过不同方式实现相同目标的选项，也在[从负载均衡器中删除侦听器中进行了](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/us-delete-listener.html)详细说明：

 *> 以下部分包含使用 AWS 管理控制台、命令行界面 (CLI) 或查询 API 从现有负载均衡器的指定端口删除侦听器的说明。在此示例中，您从负载均衡器 MyLoadBalancer 的端口 80 中删除了一个侦听器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T14:46:45.410

我遇到了同样的问题，尝试谷歌搜索但没有运气，最后我得到了答案。

在一切顺利之前，我有以下端口重定向设置：

```
redirect 192.168.1.177:80 to 127.0.0.1:8080  
redirect 192.168.1.177:443 to 127.0.0.1:8443 
```

在 web.xml 中有这样一段代码：

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>SecuredResources</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

当我访问`http://192.168.1.177/`时，Tomcat 将请求重定向到`https://192.168.1.177:8443/`与`https://192.168.1.177/`我预期不同的请求。

我发现server.xml中有一个`redirectPort`元素的属性，当我尝试设置HTTP连接器的to时，`<Connector/>``redirectPort``443`

从

```
<Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443"/> 
```

至

```
<Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="443"/> 
```

然后在重新启动 Tomcat 后，瞧，它可以工作了。*

# objective-c - Objective-c 从文本文件创建对象

> ID：13226255
> 
> 赞同：1
> 
> 时间：2012-11-05T05:10:36.527
> 
> 标签：objective-c, cocoa, object, text, nsstring

我刚刚成功加载了一个文件：

假设它现在有这个：

地图1

地图2

下面是获取字符串的代码：

```
NSURL *fileURL=[NSURL fileURLWithPath:@"/Users/Maze.txt"];

NSString *contents =[NSString stringWithContentsOfURL:fileURL encoding:NSUTF8StringEncoding error:nil];
NSArray *lines = [[NSArray alloc]init];
lines= [contents componentsSeparatedByString:@"\n"];
for (NSString *s in lines){
    NSLog(@"The content is: %@ \n", s);
} 
```

但是，我只想问，如何根据这些字符串创建对象？假设我已经有一个地图类，并且我想根据该文本文件上的数据创建一个对象，所以现在我将有 2 个对象，Map1 和 Map2.. 是否可以使用 NSString 作为对象名称？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:23:30.790

NSDictionary 提供了一种类似的从文件读取的方法：[https](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html) ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html 同样对于 NSArray 你可以获得类似的方法：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:23:41.767

假设您有一个这样的 Map 类：

```
@interface Map : NSObject
@property ( nonatomic, strong ) NSString * name ;
@property ( nonatomic, strong ) NSNumber * latitude ;
@property ( nonatomic, strong ) NSNumber * longitude ;
@end 
```

你可能有一个这样的 JSON 文件：

```
[
    { "name":"Map1"; "latitude":41.881944; "longitude":-87.627778 },
    { "name":"Map2"; "latitude":48.8567; "longitude":2.3508 },
] 
```

您可以像这样获得 2 个 Map 实例：

```
NSArray * CreateMapsWithContentsOfFileAtURL( NSURL * url )
{
    NSData * data = [ NSData dataWithContentsOfURL:fileURL ] ;
    NSError * error = nil ;
    NSArray * array = [ NSJSONSerialization JSONObjectWithData:data options:0 error:&error ] ;
    NSArray * maps = [ array collect:^(NSDictionary * dict){
        Map * map = [ [ Map alloc ] init ] ;
        [ map setValuesForKeysWithDictionary:dict ] ;
        return map ;
    }] ;
    return maps ;
} 
```

由哪里`-[NSArray collect:]`提供

```
@implementation NSArray (Collect)

-(NSArray*)collect:(id (^)(id object))block
{
    if ( !block ) { return nil ; }
    NSMutableArray * result = [ NSMutableArray array ] ;
    for( id object in self )
    {
        id newObject = block( object ) ;
        if ( newObject ) { [ result addObject:newObject ] ; }
    }
    return result ;
}

@end 
```

# ruby-on-rails - Rails 存在验证在值 0 上失败

> ID：13226260
> 
> 赞同：10
> 
> 时间：2012-11-05T05:11:01.483
> 
> 标签：ruby-on-rails, validation

我有一个类似于以下的模型，

```
class Activity < ActiveRecord::Base
    attr_accessible :name, :admin

    validates :name, :presence => true
    validates :admin, :presence => true
end 
```

name 属性是一个字符串，而 admin 属性在迁移中定义为布尔值。

如果我尝试在控制台中使用创建模型的实例，

```
a = Activity.create(:name => 'Test', :admin => 0) 
```

然后验证失败，说我需要为管理员提供一个值。为什么？我提供了一个值。

如果我根本没有提供值，或者我提供了 nil，我可以理解。但是为什么像 0 （或者甚至是 false ）这样的值会导致验证失败？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-05T05:23:27.607

`validates :presence`用于`blank?`确定值是否存在。但是`false.blank?`=> 是的。所以验证失败，因为`blank?`告诉 ActiveRecord 没有值存在。

您可以将其重写为：

`validates :field_name, :inclusion => { :in => [true, false] }`

正如[Rails 指南中所推荐的：ActiveRecord Validations](http://guides.rubyonrails.org/active_record_validations.html#presence)

另见[Ruby on Rails 中 nil v.empty v.blank 的简明解释](https://stackoverflow.com/questions/885414/a-concise-explanation-of-nil-v-empty-v-blank-in-ruby-on-rails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-27T17:09:19.803

导轨 4/5

```
validates :name, absence: true 
```

# android - 我想将图像从一项活动转移到另一项活动

> ID：13226263
> 
> 赞同：11
> 
> 时间：2012-11-05T05:11:09.783
> 
> 标签：android, imageview, android-activity

我必须将图像从一项活动转移到另一项活动。在第一个活动中，用户从滚动视图的几个图像中选择图像，并且该图像必须显示在下一个活动的图像视图中。需要帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T05:14:07.483

在您的第一个活动中

将 ImageView 转换为位图

```
 imageView.buildDrawingCache();
    Bitmap bitmap = imageView.getDrawingCache();

    Intent intent = new Intent(this, NewActivity.class);
    intent.putExtra("BitmapImage", bitmap); 
```

在第二个活动中

```
 Bitmap bitmap = (Bitmap) intent.getParcelableExtra("BitmapImage"); 
```

然后在 ImageView 中显示位图。

注意：不建议这样做。实际上应该将图像保存在某处并传递路径并从第二个活动中检索。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T05:20:31.767

您可以将其作为字节数组传递并构建位图以在下一个活动中显示。例如：

在您的第一个活动中：

```
Intent i = new Intent(this, NextActivity.class);
Bitmap b; // your bitmap
ByteArrayOutputStream bs = new ByteArrayOutputStream();
b.compress(Bitmap.CompressFormat.PNG, 50, bs);
i.putExtra("byteArray", bs.toByteArray());
startActivity(i); 
```

在你的第二个活动中

```
if(getIntent().hasExtra("byteArray")) {
    ImageView previewThumbnail = new ImageView(this);
    Bitmap b = BitmapFactory.decodeByteArray(
        getIntent().getByteArrayExtra("byteArray"),0,getIntent().getByteArrayExtra("byteArray").length);        
    previewThumbnail.setImageBitmap(b);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T05:26:42.200

您可以通过多种方式做到这一点。简单是有目的的。但它可能会挂起您的设备，并且在 Galaxy S3 等许多设备中也会出现内存不足异常。

所以我会给你一个非常简单的方法，见下文。

`static`您可以在一个类中创建变量，例如：

```
public class ABC{

public static Bitmap PHOTO = null;

} 
```

现在，当您从图库或任何其他方式获取位图时，您必须将位图保存在此 PHOTO 变量中。（这仅在 onActivityResult 中可行，对吗？）

如果您从相机中获取照片，那么代码就是。

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(intent, CAMERA_PIC_REQUEST); 
```

和，

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == Activity.RESULT_OK) {

            switch (requestCode) {
                case CAMERA_PIC_REQUEST:
                    Bitmap b = (Bitmap) data.getExtras().get("data");
                    if (b != null) {
                        ABC.PHOTO = b;
                    }
                    break;
}
} 
```

并在任何其他活动中使用此 PHOTO 变量。

从图库中挑选照片时，您可以使用相同的方式。

* * *

嗨，这是编辑过的。

这只是网格视图的示例。在这里，您了解如何将图像从一项活动传递到另一项活动。

这是您的主要活动课程：

```
package com.GridViewDemo;

import java.io.InputStream;
import java.net.URL;
import java.util.GregorianCalendar;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class GridViewDemoActivity extends Activity {
    /** Called when the activity is first created. */

    // String[] mArr =
    // {"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"};
    String[] mArr = {
            "http://www.xda-developers.com/wp-content/uploads/2012/10/androidfigure.jpg?f39ce1",
            "http://1.bp.blogspot.com/-Ramp-o0Cp8s/T0VafXkE4uI/AAAAAAAAAQU/i703zg5MBgI/s1600/android-wallpaper5_1024x768.jpg",
            "http://www.thebiblescholar.com/android_awesome.jpg",
            "http://blogs-images.forbes.com/rogerkay/files/2011/07/Android1.jpg" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        GridView gridView = (GridView) findViewById(R.id.gridView1);
        gridView.setAdapter(new ImageAdapter(this));

        gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub

                /** if you have bitmap here then you can use this way
                 * Bitmap bitmap = getBitmap();
                 * test.PHOTO = bitmap; 
                 * 
                 * */
                Intent i = new Intent(GridViewDemoActivity.this, newActiivty.class);
                i.putExtra("Image_Path", ""+mArr[arg2]);
                startActivity(i);
            }
        });
    }

    public class ImageAdapter extends BaseAdapter {

        private Context mContext;

        public ImageAdapter(Context c) {
            mContext = c;
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return mArr.length;
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            ImageView imgView;
            if (convertView == null) {
                imgView = new ImageView(mContext);
                imgView.setLayoutParams(new GridView.LayoutParams(85, 85));
                imgView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imgView.setPadding(8, 8, 8, 8);
            } else {
                imgView = (ImageView) convertView;
            }

            Drawable d = LoadImageFromWebOperations(mArr[position]);
            if (d == null) {
                imgView.setImageResource(R.drawable.icon);
            } else {
                imgView.setImageDrawable(d);
            }
            return imgView;
        }

    }

    public static Drawable LoadImageFromWebOperations(String url) {
        try {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        } catch (Exception e) {
            return null;
        }
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <GridView android:id="@+id/gridView1" android:layout_height="wrap_content"
        android:layout_width="fill_parent" android:numColumns="4"></GridView>
</LinearLayout> 
```

newActivity.class

```
package com.GridViewDemo;

import java.io.InputStream;
import java.net.URL;

import android.app.Activity;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.ImageView;

public class newActiivty extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_layout);

        String image_path = getIntent().getStringExtra("Image_Path");

        ImageView imageview = (ImageView) findViewById(R.id.imageView1);

        Drawable d = LoadImageFromWebOperations(image_path);
        if (d != null) {
            imageview.setImageDrawable(d);
        } else {
            imageview.setImageResource(R.drawable.icon);
        }

        /** if you have bitmap then
         * imageview.setImageBitmap(test.PHOTO);
         * */
    }

    public static Drawable LoadImageFromWebOperations(String url) {
        try {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        } catch (Exception e) {
            return null;
        }
    }

} 
```

new_layout.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout android:id="@+id/linearLayout1"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <ImageView android:src="@drawable/icon" android:id="@+id/imageView1"
        android:layout_width="fill_parent" android:layout_height="320dp"></ImageView>
</LinearLayout> 
```

清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.GridViewDemo"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="3" />
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".GridViewDemoActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".newActiivty"></activity>

    </application>
</manifest> 
```

这是额外的类：如果你有位图，那么使用这种方式：

```
package com.GridViewDemo;

import android.graphics.Bitmap;

public class test {

    public static Bitmap PHOTO = null;

} 
```

我在代码中评论所以，检查它，如果你有查询，然后在这个答案下面评论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-01T09:08:02.920

在第一个活动中首先确保你在顶部实例化位图，如位图位图；

然后在第一个活动中使用这个：-

```
ByteArrayOutputStream bs = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 100, bs);
byte[] byteArray = bs.toByteArray();
intent.putExtra("PICTURE", byteArray);
startActivity(intent); 
```

在第二个活动中：-

```
byte[] byteArray = extras.getByteArray("PICTURE");
bitmap = BitmapFactory.decodeByteArray(byteArray,0,byteArray.length);
imgViewResult.setImageBitmap(bitmap); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T05:16:25.227

您可以将图像的 URI 传递给下一个 Activity。

您从 onActivityResult() 获得的 URI

并在下一个 Activity 的 onCreate() 中。

再次解码Bitmap并将其设置为ImageView

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T05:20:34.403

看到[这个](https://stackoverflow.com/questions/4352172/how-do-you-pass-images-bitmaps-between-android-activities-using-bundles)帖子。

启动第二个 Activity 时，在第一个 Activity 中使用 putExtra。在第二个 Activity 中使用 getExtra() 如下：

在第一个活动中

```
Intent intent = new Intent(Activity1.this,Activity2.class);
intent.putExtra("bmp",selectedImage);
startActivity(intent); 
```

在第二个活动

```
Bitmap bmp = this.getIntent().getParcelableExtra("bmp"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-05T05:27:06.027

将您的图像转换为`base64`字符串格式并将其传递给下一个活动，然后再次将其解码为位图。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-25T09:27:06.213

在第一个活动中：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(requestCode == REQUEST_IMAGE_CAPTURE && resultCode == RESULT_OK){
        Intent showImageIntent = new Intent(this, ShowCameraPicture.class);
        showImageIntent.fillIn(data,Intent.FILL_IN_DATA);
        startActivity(showImageIntent);
    }
} 
```

在第二个活动中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle bundle = getIntent().getExtras();
    if(bundle!=null){
        Bitmap image = (Bitmap)bundle.get("data");
        //do whatever you need to do with the bitmap here ...
    }       
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-01T09:04:50.007

/////////firstActivity.xml

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.app.myapp.com.app44sendinginfofromoneactivitytoanother.MainActivity">

    <RelativeLayout
        android:layout_width="368dp"
        android:layout_height="495dp"
        tools:layout_editor_absoluteX="8dp"
        tools:layout_editor_absoluteY="8dp">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:orientation="vertical">

            <EditText
                android:id="@+id/edtName"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="Enter NAme"
                android:inputType="textPersonName" />

            <EditText
                android:id="@+id/edtLastName"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="Enter LastName"
                android:inputType="textPersonName" />

            <EditText
                android:id="@+id/edtEmail"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="Enter Email"
                android:inputType="textPersonName" />

            <EditText
                android:id="@+id/edtPassword"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:ems="10"
                android:hint="Enter Password"
                android:inputType="textPassword" />

            <ImageView
                android:id="@+id/imgView"
                android:layout_width="match_parent"
                android:layout_height="200dp"
                app:srcCompat="@android:drawable/ic_menu_report_image" />

            <RadioGroup
                android:id="@+id/rdoGroup"
                android:layout_width="match_parent"
                android:layout_height="50dp">

                <RadioButton
                    android:id="@+id/rdoMale"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Male" />

                <RadioButton
                    android:id="@+id/rdoFemale"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="Female" />
            </RadioGroup>

            <Button
                android:id="@+id/btnSend"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:text="Send" />
        </LinearLayout>
    </RelativeLayout>

</android.support.constraint.ConstraintLayout> 
```

///////////// MainActivity.java

```
 public class MainActivity extends AppCompatActivity implements View.OnClickListener,CompoundButton.OnCheckedChangeListener{

    EditText edtName,edtLastName,edtEmail,edtPassword;
    ImageView imgView;
    RadioButton rdoMale,rdoFemale;
    Button btnSend;
    String genderType = "";
    int CAMERA_PIC_REQUEST = 99;
    Bitmap bitmap; // your bitmap

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        edtName = (EditText) findViewById(R.id.edtName);
        edtLastName = (EditText) findViewById(R.id.edtLastName);
        edtEmail = (EditText) findViewById(R.id.edtEmail);
        edtPassword = (EditText) findViewById(R.id.edtPassword);
        btnSend = (Button) findViewById(R.id.btnSend);
        imgView = (ImageView) findViewById(R.id.imgView);
        rdoMale = (RadioButton) findViewById(R.id.rdoMale);
        rdoFemale = (RadioButton) findViewById(R.id.rdoFemale);
        btnSend.setOnClickListener(MainActivity.this);
        imgView.setOnClickListener(MainActivity.this);
        rdoMale.setOnCheckedChangeListener(MainActivity.this);
        rdoFemale.setOnCheckedChangeListener(MainActivity.this);

    }

    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        switch (buttonView.getId()){
            case R.id.rdoMale:
                if (isChecked){
                    genderType = "Male";
                }else{

                    buttonView.setChecked(false);
                }

                break;
            case R.id.rdoFemale:
                if (isChecked){
                    genderType = "Female";
                }else{

                    buttonView.setChecked(false);
                }
                break;
        }
    }

    @Override
    public void onClick(View v) {
        switch(v.getId()){
            case R.id.btnSend:

                    Intent intent = new Intent(MainActivity.this,SecondActivity.class);
                    intent.putExtra("NAME",edtName.getText().toString());
                    intent.putExtra("LASTNAME",edtLastName.getText().toString());
                    intent.putExtra("EMAIL",edtEmail.getText().toString());
                    intent.putExtra("PASSWORD",edtPassword.getText().toString());
                    intent.putExtra("GENDER",genderType);

                     //below is the code which you are looking for 

              -->    ByteArrayOutputStream bs = new ByteArrayOutputStream();
              -->    bitmap.compress(Bitmap.CompressFormat.PNG, 100, bs);
                     byte[] byteArray = bs.toByteArray();
                     intent.putExtra("PICTURE", byteArray);
                     startActivity(intent);
            break;
            case R.id.imgView:
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
                break;
        }
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode,resultCode,data);
        if (requestCode == CAMERA_PIC_REQUEST) {
            bitmap = (Bitmap) data.getExtras().get("data");
            imgView.setImageBitmap(bitmap);

        }
    }

} 
```

////////////////// SecondActivity.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.app.myapp.com.app44sendinginfofromoneactivitytoanother.ResultActivity">

    <RelativeLayout
        android:layout_width="368dp"
        android:layout_height="495dp"
        tools:layout_editor_absoluteX="8dp"
        tools:layout_editor_absoluteY="8dp">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:orientation="vertical">

            <TextView
                android:id="@+id/txtName"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:text="FirstName:"
                android:textSize="24sp" />

            <TextView
                android:id="@+id/txtLast"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:text="LastName:"
                android:textSize="24sp" />

            <TextView
                android:id="@+id/txtEmail"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:text="Email:"
                android:textSize="24sp" />

            <TextView
                android:id="@+id/txtPassword"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:text="Password:"
                android:textSize="24sp" />

            <TextView
                android:id="@+id/txtGender"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="10dp"
                android:text="Gender:"
                android:textSize="24sp" />

            <ImageView
                android:id="@+id/imgViewResult"
                android:layout_width="match_parent"
                android:layout_height="200dp"
                app:srcCompat="@android:drawable/ic_menu_report_image" />

        </LinearLayout>
    </RelativeLayout>
</android.support.constraint.ConstraintLayout> 
```

///////// SecondActivity.Java

```
 public class SecondActivity extends AppCompatActivity {

    Context ctx ;
    TextView txtName,txtLast,txtEmail,txtPassword,txtGender;
    ImageView imgViewResult;
    Bitmap bitmap;

    @Override
    protected void onCreate(Bundle bundle) {
        super.onCreate(bundle);
        ctx = this;
        setContentView(R.layout.activity_result);

        txtName = (TextView) findViewById(R.id.txtName);
        txtLast = (TextView) findViewById(R.id.txtLast);
        txtEmail = (TextView) findViewById(R.id.txtEmail);
        txtPassword = (TextView) findViewById(R.id.txtPassword);
        txtGender = (TextView) findViewById(R.id.txtGender);
        imgViewResult = (ImageView) findViewById(R.id.imgViewResult);

        Bundle extras = getIntent().getExtras();
        String Name = extras.getString("NAME");
        String LastName = extras.getString("LASTNAME");
        String Email = extras.getString("EMAIL");
        String Password = extras.getString("PASSWORD");
        String Gender = extras.getString("GENDER");

        txtName.setText("Name: "+Name);
        txtLast.setText("LastName: "+LastName);
        txtEmail.setText("Email: "+Email);
        txtPassword.setText("Password: "+Password);
        txtGender.setText("Gender: "+Gender);

        byte[] byteArray = extras.getByteArray("PICTURE");
        bitmap = BitmapFactory.decodeByteArray(byteArray,0,byteArray.length);
        imgViewResult.setImageBitmap(bitmap);

   }

} 
```

快乐编码 :)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-29T17:59:06.590

第一个活动：

```
Intent intent = new Intent(CurrentActivity, secondActivity.class);

intent.putExtra("resId", R.drawable.your image);
startActivity(intent); 
```

然后你的目标活动：

```
Bundle bundle = getIntent().getExtras();

if(bundle!=null){
    int image = bundle.getInt("resId");
    ImageId.setImageResource(image);
} 
```

# json - 使用 Dojo 的 dgrid、JsonRest 和子行/数组

> ID：13226264
> 
> 赞同：1
> 
> 时间：2012-11-05T05:11:15.023
> 
> 标签：json, dojo, dgrid

我有一个网格，我正在创建一个格式如下的 JSON 数据源：

```
{"recordsReturned":10,
        "totalRecords":471,
        "startIndex":0,
        "sort":"num",
        "dir":"asc",
        "pageSize":100,
        "visitors":[
            {"num":1, "uid": "1", "ipaddress": "24.217.129.98", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14", "date":1352086661000},
            {"num":2, "uid": "0", "ipaddress": "100.43.83.157", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (compatible; YandexBot/3.0; +http://yandex.com/bots)", "date":1351761442000},
            {"num":3, "uid": "0", "ipaddress": "100.43.83.157", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (compatible; YandexBot/3.0; +http://yandex.com/bots)", "date":1351718948000},
            {"num":4, "uid": "0", "ipaddress": "100.43.83.157", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (compatible; YandexBot/3.0; +http://yandex.com/bots)", "date":1350349829000},
            {"num":5, "uid": "0", "ipaddress": "70.36.100.148", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (compatible; MJ12bot/v1.4.3; http://www.majestic12.co.uk/bot.php?+)", "date":1349718631000},
            {"num":6, "uid": "0", "ipaddress": "180.76.5.153", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)", "date":1349396285000},
            {"num":7, "uid": "0", "ipaddress": "76.72.166.150", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (compatible; MJ12bot/v1.4.3; http://www.majestic12.co.uk/bot.php?+)", "date":1349090589000},
            {"num":8, "uid": "0", "ipaddress": "65.55.52.115", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)", "date":1348417348000},
            {"num":9, "uid": "0", "ipaddress": "66.249.72.195", "hostname": "", "referer": "", "useragent": "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)", "date":1348353989000}, 
```

等等。我为 YUI 2 DataTable 创建了这种 JSON 格式，它运行良好，因为它包含我需要理解记录的所有内容。我对 YUI 所做的我无法弄清楚如何处理 dgrid 是告诉它使用访问者数组的内容来填充 dgrid。这是我的 dgrid 代码：

```
// Create a new constructor by mixing in the components
var CustomGrid = declare([ OnDemandGrid, Keyboard, Selection ]);

var grid = new declare([OnDemandGrid, Keyboard, Selection])({
    store: store,
    columns: {
        num: "ID",
        uid: "visitorsUID"
    },
    /*selectionMode: "single", // for Selection; only select a single row at a time
    cellNavigation: false // for Keyboard; allow only row-level keyboard navigation*/
}, "grid");

grid.setQuery({aid: "1604", sort: "num", dir: "asc", startIndex: "0", results: "100"}); 
```

有没有一种简单的方法可以告诉 dgrid 从该子行/数组中绘制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:21:05.377

我可以在这里看到多个选项，但最直接的方法是编写自己的 Store 以满足接口`dojo/store/api/Store`或只是破解​​它和子类`dojo/store/JsonStore`：

```
var CustomStore = declare(JsonRest, {
    query: function(query, options) {
        var dataProperty = this.dataProperty;
        var results = this.inherited(arguments);
        var deferred = results.then(function(result) {
            return result[dataProperty];
        });
        return QueryResults(deferred);
    }           
}); 
```

那么您将需要在实例化时再添加一个属性 - `dataProperty`：

```
var store = new CustomStore({
    target: "/visitors/",
    idProperty: "num",
    dataProperty: "visitors"
}); 
```

在 jsFiddle 上查看它的实际效果：http: [//jsfiddle.net/phusick/MG9jB/](http://jsfiddle.net/phusick/MG9jB/)

其他选择是在响应到达之前更改响应`dojo/store/JsonRest`，从而`JsonRest`获得它所期望的数组。Dojo 1.8 提供了[`dojo/request`](http://livedocs.dojotoolkit.org/dojo/request)使用 XHR2 的版本，因此很遗憾它不能与 . 一起使用`JsonRest`，只是为了优雅：

```
// var request = require("dojo/request/registry");
// var xhr = require("dojo/request/xhr");

var handle = request.register(/(.*)\/visitors.json$/, function(url, options) {
    // if any XHR request url ends with `visitors.json` then return
    // `visitors` property
    return xhr.get(url, options).then(function(results) {
        return results["visitors"];
    });
});

request.get("app/visitors.json", {handleAs: "json"}).then(function(visitors) {
    console.log(visitors);
}); 
```

在[介绍 dojo/request](http://www.sitepen.com/blog/2012/08/21/introducing-dojorequest/)一文中，可以找到一个参考，`dojox/io/xhrPlugins`该参考应该提供与遗留代码类似的功能。即使没有，您也可以使用[`dojo/aspect`](http://livedocs.dojotoolkit.org/dojo/aspect)或可能编写自己的[*内容处理程序*](http://livedocs.dojotoolkit.org/dojo/contentHandlers)来实现相同的目的。

# ios - iOS 中的内存泄漏与 CGContextRef

> ID：13226268
> 
> 赞同：2
> 
> 时间：2012-11-05T05:12:15.410
> 
> 标签：ios, memory-management, memory-leaks, core-foundation, cgcontextref

我有一组代码获取存储在 UIImageView 中的图像并修改其内容以复制到不同 UIImageView 的新图像中。问题是当我分析项目时，这段代码总是从我的编译器收到内存警告。我尝试以多种方式实现此代码，但我总是收到不同类型的内存警告。编译器的输出显示“调用函数 'CGBitMapContextCreateImage' 返回一个具有 +1 保留计数的核心基础对象”，这导致图像对象的保留计数为 +1。如果我自动释放图像对象，编译器会发出内存警告，自动释放被调用多次，并且图像对象最初的保留计数为 0。

这两个编译器警告不是矛盾的吗？如何修复此代码以确保不会发生内存泄漏？

```
-(UIImage *) makeImageLight{

UIImage * image = self.masterImage.image;

NSUInteger width = image.size.width;
NSUInteger height = image.size.height;
NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = width * bytesPerPixel;

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

CGContextRef bmContext = CGBitmapContextCreate(NULL, width, height, 8, bytesPerRow, colorSpace, kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst);

CGColorSpaceRelease(colorSpace);

CGContextDrawImage(bmContext, (CGRect){.origin.x = 0.0f, .origin.y = 0.0f, .size.width = width, .size.height = height}, image.CGImage);

UInt8* data = (UInt8*)CGBitmapContextGetData(bmContext);

for (size_t i = 0; i < CGBitmapContextGetWidth(bmContext); i++)
{
    for (size_t j = 0; j < CGBitmapContextGetHeight(bmContext); j++)
    {
        int pixel = j * CGBitmapContextGetWidth(bmContext) + i;

        pixel = pixel * 4;

        UInt8 red = data[pixel + 1];         // If you need this info, enable it
        UInt8 green = data[pixel + 2]; // If you need this info, enable it
        UInt8 blue = data[pixel + 3];    // If you need this info, enable it

        red = ((255 - red) * .3) + red;
        green = ((255 - green) * .3) + green;

        data[pixel + 1] = red;
        data[pixel + 2] = green;
        data[pixel + 3] = blue;

    }
}

// memory warning occurs in the following line:

image = [UIImage imageWithCGImage:CGBitmapContextCreateImage(bmContext)];

CGContextRelease(bmContext);

return image;

} 
```

没关系，我通过添加以下代码来修复它以释放从上下文创建的 CGImage：

```
CGImageRef imageRef = CGBitmapContextCreateImage(bmContext);

image = [UIImage imageWithCGImage:imageRef];

CGImageRelease(imageRef); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T08:50:21.780

您使用 CGBitmapContextCreateImage() 创建一个 CGImage，但您还没有发布该 CGImage

您需要`UIImage`按如下方式拆分创建行：

```
CGImageRef cgimage = CGBitmapContextCreateImage(bmContext);
image = [UIImage imageWithCGImage:cgimage];
CGImageRelease(cgimage); 
```

# objective-c - UITableView（可以添加或删除行）：使偶数/奇数行具有不同的颜色？

> ID：13226270
> 
> 赞同：-1
> 
> 时间：2012-11-05T05:12:24.587
> 
> 标签：objective-c, ios, uitableview

我需要为偶数行设置白色背景，为奇数行设置黑色背景，我在想：

方法一：给单元格添加一个属性，表示呈现时单元格的位置，这样单元格就可以切换颜色，或者我返回单元格的时候，可以查看它的位置并切换它的颜色

*   这应该可以正常工作
*   删除/添加行时需要重新加载整个表

方法2：添加一个可拉伸的背景图片，有反复的黑白条纹，既然行高是固定的，那么就让它随着表格滚动

*   这听起来比方法 1 更聪明
*   如果表格视图很大，这可能需要有一个非常大的背景图像

有没有其他方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T05:22:33.373

为什么不通过检查行是奇数还是偶数来设置背景。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
        {
    ........
    if (indexPath.row % 2 == 0)  //even
    {
    cell.backgroundView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"Black"]];

    }
    else
    {
    cell.backgroundView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"White"]];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:42:06.390

到目前为止，所有其他答案似乎都忽略了与插入和删除行相关的问题。

我认为最简单的方法是当您插入或删除一行时，重新加载插入/删除点下方的所有可见行。无需处理可见范围以下的行。

假设您有 100 行，并且您正在查看第 20-30 行。如您所说，偶数行是白色的。现在，如果在第 35 行插入/删除一行，则无需执行任何操作，因为所有受影响的行都在屏幕外。如果在第 25 行插入/删除一行，它将立即以正确的颜色显示。您现在需要重新加载第 26-30 行，以便它们使用正确的新颜色进行更新。如果在第 15 行插入/删除一行，则需要重新加载第 20-30 行（所有可见行）。

如果需要，您可以进行一些优化。例如，如果添加了两行（例如在 15 和 16 处，则无需执行任何操作。

`[tableView indexPathsForVisibleRows]`基本算法是在插入/删除之后调用。如果路径在插入/删除的索引路径之后，则重新加载这些路径中的每一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:23:05.440

是的，您可以检查 indexpath`indexpath%3 == 0`并为方法 1 的单元格添加背景颜色，例如 `cell.backroundcolor = [UIColor bluecolor];`

并为方法2添加单元格的背景图像
`cell.bakgroundView = [UIImageview alloc]inithWitImage:[UIImage imagenamed@"cellBG.png"]];`

# html - Youtube嵌入在Firefox中不起作用

> ID：13226272
> 
> 赞同：9
> 
> 时间：2012-11-05T05:12:28.800
> 
> 标签：html, youtube, embed

我嵌入了三个 Youtube 视频，它们在除 Firefox 之外的所有浏览器中都能完美运行。

尝试在服务器端清除缓存，在本地清除 cookie 和缓存，尝试了 18 台不同的计算机，尝试了 Windows 7、Windows 8、Linux Ubuntu 12.10、Fedora 16、Mac OSX、iOS、Android 4.0.3。试过 Firefox 版本 7 到 15。

甚至尝试从头开始重做网站。
到处都是同样的问题...视频仅在 Firefox 和 Firefox 中不加载。

**我究竟做错了什么？**

我已经翻遍了，在 IRC 上四处询问，在论坛上发布了问题，但没有运气。

我什至尝试过*旧*的youtube 嵌入代码。Vimeo 嵌入 iframe 工作得非常好！

我的代码如下： http: [//pastebin.com/T3w09bqW](http://pastebin.com/T3w09bqW)
--*注意：中间视频使用的是旧的 youtube 嵌入代码*.--

[这是一张图片。](http://i.stack.imgur.com/rJjyu.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T05:26:54.357

在一个网站上找到这个希望它有帮助：

似乎只有当 youtube 显示视频的 flash 版本时才会出现问题，而使用 html5 则可以。您可以强制 YT 提供视频的 html5 版本，并将其添加到 iframe 嵌入代码中：html5=1

```
<iframe src="http://www.youtube.com/embed/_VIDEO_ID_?html5=1" [...]></iframe> 
```

另请考虑，如果 Firefox 视频的 html5 版本不存在，YT 会提供 Flash 视频作为后备。所以这个问题肯定与闪存有关。

//编辑将 &html5=1 更改为 ?html5=1

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T00:18:36.743

检查父元素以查看是否应用了 CSS3 转换。我们的视频在 FireFox 24-26 中停止工作，直到我们从父包装元素中提取以下代码：

```
 transform: translate3d(0,0,0); 
```

在这种特定情况下，应用了 3d 变换以使 Chrome 中的内容看起来更好（因此是 (0,0,0)，但如果您通过 CSS 搜索变换并找到一个条目，请尝试拉动它。或者首先在 FireBug 中进行测试。

# c# - 如何使用 XElement.Parse 解析 XML 而无需查看/将实体更改为字符？

> ID：13226273
> 
> 赞同：2
> 
> 时间：2012-11-05T05:12:29.743
> 
> 标签：c#, xml, xml-parsing, linq-to-xml, xelement

有没有一种方法可以使用不会将实体转换为字符的 XElement.Parse 来解析 XML？

*例子：*

```
var xmlText = "<name><firstname>Willi&aacute;ms</firstname></name>"; 
```

如果我使用以下方法解析它：

```
var element = XElement.Parse(xmlText);
var firstname = element.Element("firstname"); 
```

解析后，`firstname`值现在是“Williáms”

我怎样才能忽略那些实体来改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:24:02.380

字符“&”在 XML 元素中是非法的。"&" 将产生错误，因为解析器将其解释为字符实体的开始。

为了更正，您的 Xml 应该使用 CDATA：

```
var xmlText = "<name><firstname><![CDATA[Willi&aacute;ms]]></firstname></name>"; 
```

# sql-server-2008 - 如何在 dbo.fnSplit 函数中使用 SQL 选择语句的结果作为输入

> ID：13226276
> 
> 赞同：1
> 
> 时间：2012-11-05T05:12:38.543
> 
> 标签：sql-server-2008

我需要在 SQL 语句（SQL server 2008）的“IN”子句中使用逗号分隔的字符串（它是表列中的值）为此，我使用下面的拆分函数将字符串设为表格格式并在 SQL 查询的“IN”子句中使用它。

```
ALTER FUNCTION dbo.fnSplit(
@sInputList VARCHAR(8000) -- List of delimited items
 , @sDelimiter VARCHAR(8000) = ',' -- delimiter that separates items
 ) RETURNS @List TABLE (item VARCHAR(8000))

BEGIN
 DECLARE @sItem VARCHAR(8000)
 WHILE CHARINDEX(@sDelimiter,@sInputList,0) <> 0
  BEGIN
    SELECT
     @sItem=RTRIM(LTRIM(SUBSTRING(@sInputList,1,CHARINDEX
      (@sDelimiter,@sInputList,0)-1))),  @sInputList=RTRIM(LTRIM(SUBSTRING(@sInputList,CHARINDEX
      (@sDelimiter,@sInputList,0)+LEN(@sDelimiter),LEN(@sInputList))))

  IF LEN(@sItem) > 0
    INSERT INTO @List SELECT @sItem
  END

 IF LEN(@sInputList) > 0
     INSERT INTO @List SELECT @sInputList -- Put the last item in
     RETURN
  END
GO

select * from dbo.fnSplit('aaa,bbb,ccc', ',') 
```

上面的 select 语句给出的结果为：

```
Item
aaa
bbb
ccc 
```

现在我需要使用我的 SQL 语句，它在 fnSplit 函数中返回字符串 aaa,bbb,ccc，如下所示

```
 select * from dbo.fnSplit((SELECT Prefix2Include FROM dbo.vw_PrefixToInclude), ',') 
```

**笔记：** `SELECT Prefix2Include FROM dbo.vw_PrefixToInclude returns aaa,bbb,ccc`

但这给了我一些语法错误，如下所示：

```
Msg 102, Level 15, State 1, Line 4
  Incorrect syntax near '('.
  Msg 102, Level 15, State 1, Line 4
  Incorrect syntax near ', 
```

请指导我。

谢谢， 苏米亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:17:51.490

为什么不这样尝试

```
declare @Prefix2Include as Varchar(500)

SELECT  @Prefix2Include = Prefix2Include FROM dbo.vw_PrefixToInclude

select * from dbo.fnSplit(@Prefix2Include , ',') 
```

## 更新

```
Select * From @t v 
Where v.EmpPrefix IN 
(select * from dbo.fnSplit(@Prefix2Include, ',')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-16T21:07:10.897

CROSS JOIN 指定两个表的叉积。返回与在旧式非 SQL-92 式联接中未指定 WHERE 子句时相同的行。

```
SELECT item FROM dbo.vw_PrefixToInclude CROSS APPLY dbo.fnSplit(Prefix2Include, ',') 
```

用于 sql 2016 或更高版本

```
SELECT value FROM dbo.vw_PrefixToInclude CROSS APPLY STRING_SPLIT(Prefix2Include, ',') 
```

要更改数据库的兼容级别，请参阅查看或更改数据库的兼容级别。 [https://docs.microsoft.com/en-us/sql/relational-databases/databases/view-or-change-the-compatibility-level-of-a-database?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/relational-databases/databases/view-or-change-the-compatibility-level-of-a-database?view=sql-server-ver15)

# jquery-plugins - 了解 JavaScript 函数和插件设置

> ID：13226280
> 
> 赞同：2
> 
> 时间：2012-11-05T05:13:54.613
> 
> 标签：jquery-plugins, javascript

一段时间后我刚刚开始编写 JavaScript，我对插件构造函数的设置感到困惑。我通过这个链接寻求建议。

[函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

我有兴趣了解此功能设置..

我见过下面三个这样的例子：

```
(function(parameterOne, parameterTwo) {

    functionOne = function(...) {
       ...
   },

   functionTwo: new function() {
   },

   this.functionThree = function(...) {
   }

})() 
```

我的问题如下：

1.  什么时候使用给定的函数一、函数二和函数三的构造？我如何能够显式调用 functionOne、functionTwo 或 functionThree？

2.  我见过这样的功能：

    ```
    (function(parameter) {

        functionFour = function(..) {
       },
       ....
    })(document) 
    ```

这个例子中的**文档说明了什么？**很长一段时间以来，我一直对此感到困惑。

3.  我见过遵循这种结构的 jQuery 插件吗？

    ```
    (function($) {

      $.fn.myCustomPlugin: function(...) {
      }
    })(jQuery) 
    ```

为什么**$**传递给函数而**jQuery**最后传递？我很抱歉，因为这对你们中的一些人来说可能是基本的问题，但这些问题已经困扰了我几个星期，我迫切希望得到任何答案。

谢谢，

卡提克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:33:31.310

`(function(parameterOne, parameterTwo) {`

没有意义，因为您最终没有传递这些参数。此外，看起来您正在立即尝试创建匿名代码块 - 在某些情况下是有意义的，但您不需要这样做，除非您试图保护全局范围免受此代码块内发生的任何事情的影响。

```
 functionOne = function(...) {
       ...
   }, 
```

这是一个命名函数，类似于`var functionOne`仅在父函数或构造函数内部有用。

```
 functionTwo: new function() {
   }, 
```

**更新：**当您尝试在这里创建实例时，这真的没有意义。您绝对可以立即实例化您在该函数声明中拥有的内容（这与先声明 func. 然后使用 operator 相同`new`），但在这种情况下，您得到的是对象而不是函数。尝试：

```
var f = function() {};
console.log(f); // "function"
var f = new function() {}
console.log(f); // "objest" 
```

该对象是您的构造函数的实例。

```
 this.functionThree = function(...) {
   } 
```

这是一个类的方法。使用 operator 实例化类`new`后，您可以从实例外部访问它。此外，当您`this.`在类中使用时，请记住，每次实例化一个类时，它都会为该值保留内存。当这些实例的变量不同时，没关系，但如果它是一个方法，你最好将它添加到构造函数原型中，这样它只声明一次并且不会为它保留新的内存块。

```
})() 
```

在这里，您通常会在内部传递您请求的参数，例如`parameterOne, parameterTwo`

```
(function(parameter) {

    functionFour = function(..) {
   },
   ....
})(document) 
```

这是一种将上下文或任何对象传递给此匿名代码块的方法。在这种情况下，它看起来像一个接受 window.document 的插件，但它也可以接受 DOM 的任何其他部分。例如，如果您想选择所有标签`a`并`document`作为参数接收，它将遍历 window.document 中的所有链接，但如果您通过`$('#somediv')`，此插件将仅遍历具有此 ID 的 div 内的链接。

```
(function($) {

  $.fn.myCustomPlugin: function(...) {
  }
})(jQuery) 
```

这是确保 $ 内的代码是一个 jQuery 对象的好方法。问题是，例如在 Chrome 中已经有一个原生函数`$`，或者在某些生产站点`$`中可能是一个 Prototype JS 函数。但是在里面的例子中，你要确保 var`$`不是原生的`$`或者不是 Prototype。

In general, you should not use `(function() {...})()` liberally -- this is only used in specific cases when you're protecting global environment as I mentioned above.

# git - 如何从 HEAD 获取 Git 日志？

> ID：13226281
> 
> 赞同：8
> 
> 时间：2012-11-05T05:14:02.163
> 
> 标签：git

我原来是一个SVN用户。

在 Git 中，`git log`仅显示当前提交的日志。

如何从中获取日志`HEAD`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T05:19:58.833

要从服务器端 HEAD 获取日志，您需要先从服务器获取更改。不像`pull`,`fetch`不会影响您的工作树。所以，是安全的。

1.  `git fetch origin`

    这`origin`是你的远程仓库。此命令从远程仓库获取最新数据。

2.  `git log origin\master`

    这`origin\master`意味着`master`远程仓库中的分支`origin`。此命令显示来自`origin\master`.

其他有用的`git log`选项：

一世）`git log HEAD..origin\master`

显示在“origin/master”分支中但尚未在“HEAD”中的提交。

ii)`git log -p HEAD..origin\master`

将提交显示为补丁。

iii)`git log -5`

显示最近的 5 次提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T06:08:02.317

```
git log 
```

暗示

```
git log HEAD 
```

`HEAD`不发出引用时，其他命令中也隐含。`HEAD`意思是“当前提交”——不管你在哪个分支上——或者即使你不在任何分支上。如果您想查看所有参考资料，您可以这样做

```
git log --all --decorate 
```

`all`将向您显示所有参考资料（任何分支的提示）及其祖先。`decorate`将使用指向它们的任何引用标记输出提交。您可以使用 将其设为当前用户的默认行为`git config --global log.decorate true`。

有了上面的配置，我通常会这样做`git log --all --graph`。`graph`将每个提交与 ASCII 艺术行链接以查看它们的关系。如果我想同时查看更多信息，`--oneline`也很有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T05:28:59.820

由于您只需要一个修订版，请运行

`git log -n 1`

或者

`git log -n 1 HEAD`

# ios - 找不到与应用程序标识符匹配的有效配置文件

> ID：13226284
> 
> 赞同：22
> 
> 时间：2012-11-05T05:14:27.333
> 
> 标签：ios, provisioning, ios-provisioning, provisioning-profile

我正在尝试在我的设备上测试我的应用程序并遇到错误，指出“找不到与应用程序标识符‘com.mycompany.MyApp’匹配的有效配置文件”。我在这里阅读了许多类似的帖子，但没有一个能够提供帮助。

到目前为止我所做的：

*   在供应门户上创建了一个有效的供应配置文件。当我查看配置文件的 App ID 时，它是 10CHARSEED.com.mycompany.MyApp（其中 10CHARSEED 显然是 Apple 生成的种子 ID）

*   在设备名称下下载并安装了 XCode Organizer 中的配置文件。XCode 有绿色勾号，告诉我这是一个有效的配置文件。

*   检查 Info.plist Bundle Identifier 是否与此匹配。确实如此。

*   手动查看 project.pbxproj 文件中对“PROVISION”的引用，但没有（我在 SO 上找到的一些其他解决方案说要删除这些行，但显然我没有任何要删除的内容）。

*   退出 Xcode 并重新启动。

*   在管理器中删除并重新添加了配置文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-05T06:09:50.613

好的，解决了。问题与权限有关。我终于在管理器中找到了显示从开发人员门户刷新的菜单选项（这很奇怪，因为我刚刚安装的省配置文件**来自**门户，所以我不确定为什么会有所不同）。无论如何，我点击它并询问我的 Apple ID，然后一分钟后它回来说我无权添加 App ID 并让我的团队的管理员来做这件事。考虑到我可以在我的帐户下手动安装它们，所以不合逻辑。无论如何，我刚刚让我的管理员让我的会员资格也成为管理员，他很乐意这样做，因为在配置过程中我整天都在骚扰他。之后，我再次从门户刷新，它没有给出错误，

![从开发人员门户选项刷新](../Images/34473860e7300ac59992bfdb15dd0eb0.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-17T16:53:33.157

为了完整起见，我将其传递。

我曾尝试过“bobsmells”（并且，很遗憾听到 Bob 的建议），但仍然遇到同样的错误。我的猜测是检查 Xcode 中的构建设置，看看是否有任何突出的可能是危险信号......

由于我已经创建并且可以在 Apple 的配置门户以及 Xcode 的 Organizer Devices 选项卡中看到我的配置配置文件，因此我知道配置文件存在，并且位于正确的位置（Xcode 和门户）。

我只是去了 Project Navigator > Targets (your_target_name) > Build Settings > Code Signing，并注意到“自动配置文件选择器（推荐）”标题下的值是“iPhone Developer”。

解决方案是简单地选择位于“iOS Team Provisioning Profile: * (for bundle itendifiers '*') 标题下的“iPhone Developer: (your_name_here)”。

换句话说，*使用*我刚刚创建的配置文件。执行清理、构建，然后运行它。那成功了。

希望这可以帮助某人...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T06:07:53.480

我遇到了类似的问题，我这样解决了，转到管理器并选择您要使用的配置文件，然后从应用标识符复制 .in 中的部分（例如，“.in.appstute.abcd”）。之后转到项目（蓝色），单击目标（​​您的项目名称），转到摘要 - 捆绑标识符粘贴您在此处复制的内容并运行。它对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T20:54:09.067

我一直在处理这个问题，同样地，退出并重新打开 xcode，然后从开发人员门户刷新就可以了。有趣的是，我想因为我使用的是通配符应用程序 ID，所以我不必手动更改 xcode 项目目标中的包 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-11T12:28:05.740

如果您将 .developerprofile 文件保存在项目根目录之外，只需将其移回 Finder 中，然后将文件拖到 XCode 的“项目导航器”中。确保选中复制到目标复选框。

# asp.net-mvc - 如何使用 HTTP 方法路由真正的 CRUD RESTful API

> ID：13226287
> 
> 赞同：0
> 
> 时间：2012-11-05T05:14:47.223
> 
> 标签：asp.net-mvc, rest, asp.net-mvc-4, asp.net-mvc-routing

我正在使用 Asp.NET MVC 4 控制器（不是 WebAPI）来实现真正的 RESTful API，其中单个 URL 需要基于 HTTP 方法类型指向不同的操作方法。

因此，诸如 mysite.com/Widget/1 之类的 URL 可以转到以下三种操作方法中的任何一种：

```
[HttpPut]
public JSONResult Update(int widgetId) {}

[HttpDelete]
public JSONResult Delete(int widgetId) {}

[HttpGet]
public JSONResult Get(int widgetId) {} 
```

将一个 URL 路由到这些不同的操作方法的最佳方法是什么？

我遇到了**ActionName**过滤器，我可以将每个操作方法设置为相同。然后，我的 RouteConfig 类将始终指向相同的 ActionName，并且 MVC 将根据 HTTP 方法类型属性选择正确的操作方法。

```
[HttpPut]
[ActionName("CRUD")]
public JSONResult Update(int widgetId) {}

[HttpDelete]
[ActionName("CRUD")]
public JSONResult Delete(int widgetId) {}

[HttpGet]
[ActionName("CRUD")]
public JSONResult Get(int widgetId) {}

routes.MapRoute(
       name: "Default",
       url: "{controller}/{action}/{id}",
       defaults: new { controller = "Widget", action = "CRUD", id = UrlParameter.Optional }
        ); 
```

不过有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:24:50.610

> 因此，诸如 mysite.com/Widget/1 之类的 URL 可以转到以下三种操作方法中的任何一种：

默认情况下，喜欢的电话`mysite.com/Widget/1`会转到

```
[HttpGet]
public JSONResult Get(int widgetId) {} 
```

除非您另外指定，否则如果您正在进行 ajax 调用，您可以使用`TYPE`属性指定它。例如：`TYPE:DELETE`

> 将一个 URL 路由到这些不同的操作方法的最佳方法是什么？

我个人认为您不需要指定`[HttpPut]\Delete\Get`或`[ActionName("CRUD")]`属性。在您的用例中，只需简单地使用该`TYPE`属性，就可以有效地实现所有操作。

例子 ：

要调用`public JSONResult Update(int widgetId) {}`，请使用

```
$.ajax({
    url: mysite.com/Widget/1,
    type: "UPDATE",
    success: function (result) {},
    error: function () {}
}); 
```

要调用`public JSONResult Get(int widgetId) {}`，请使用

```
$.ajax({
    url: mysite.com/Widget/1,
    type: "GET",
    success: function (result) {},
    error: function () {}
}); 
```

要调用`public JSONResult Delete(int widgetId) {}`，请使用

```
$.ajax({
    url: mysite.com/Widget/1,
    type: "DELETE",
    success: function (result) {},
    error: function () {}
}); 
```

[必读](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

# java - iFrame 身份验证

> ID：13226288
> 
> 赞同：0
> 
> 时间：2012-11-05T05:14:51.553
> 
> 标签：java, security, authentication, iframe, salesforce

我正在**通过 iFrame 链接将 salesforce.com 与遗留系统**集成，该链接由**orgId**作为请求参数和遗留系统（Java 应用程序）在获取 orgId 作为遗留系统的请求参数检查数据库时是否该 orgId 已经存在（之前存在意味着 Salesforce 用户有权访问旧系统应用程序），因此仍未回答的问题是，**如果入侵者以某种方式捕获了 orgId，那么他们可以**轻松访问旧系统应用程序，因此挑战是阻止任何此类攻击。仅供参考，iFrame 链接和 salesforce 站点都在 https 协议上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:20:40.870

除了 Org Id，您还可以在查询字符串中传递活动的 Salesforce SessionId 和 ServerURL。然后，旧应用程序可以使用这些来建立与 Salesforce 的 SOAP API 会话，并验证 OrgId 是否与会话详细信息匹配。

然后入侵者需要对当前用户 Salesforce 会话具有完全访问权限，才能通过 iframe 访问旧版应用程序。如果他们这样做了，那么您的安全性已经受到了充分的威胁，以至于您遇到了更大的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:14:28.403

与其使用静态 orgId，不如使用动态令牌。有几种方法可以实现它，例如，您可以设计要加密的令牌并包含 orgId 和时间戳，然后在 salesforce 中动态生成时间戳，并且只允许在 X 分钟/秒内有效的令牌（取决于您的用户如何使用旧版应用程序）。

如果入侵者有权访问 salesforce 帐户（保存 orgId 的位置），这不会阻止入侵者访问旧版应用程序，以防止您需要停止使用 orgId 而是使用某种注册并生成如果有人滥用它，您可以在以后撤销它。
那是当 legacyapp 的用户注册时（或您必须在 salesforce 中最初保存 orgId 的任何过程），而不是保留 orgId，调用 legacy 应用程序并生成令牌（保存在 legacy 应用程序的数据库中），稍后可以在 iFrame 中使用。

# php - 来自javascript的php 5变量未设置

> ID：13226290
> 
> 赞同：0
> 
> 时间：2012-11-05T05:14:57.647
> 
> 标签：php, unset

[注意：单击http://communitychessclub.com/rabren/index.php?clear=1](http://communitychessclub.com/rabren/index.php?clear=1)上的左侧棋子应该取消设置 $choice 并重新加载页面。但它只是重新加载页面。

我想检查在 javascript 中设置的变量状态。

```
 onclick="window.location='index.php?clear=1' 
```

`if clear == "1"`我想重置`$choice_1`：

```
if ($_GET['clear']=="1") {empty($_SESSION['choice_1']);} 
```

并重建阵列并生成新的图像参考。

但是我所拥有的不起作用；它永远不会重置或清空`$choice_1`

我有一张带有主页链接的图片：

```
<img onclick="window.location='index.php?clear=1'; return false;" 
src="images/WL<?php echo $_SESSION['choice_1'];?>.png" alt="pieces" width=128 height=128> 
```

我在 index.php 的顶部：

图片集：

```
<?php 

if ($_GET['clear']=="1") {empty($_SESSION['choice_1']);}

if(!isset($_SESSION['choice_1'])) {
$chessmen = array("N","Q","R","B","K","P"); 

$random_piece = array_rand($chessmen); 
$_SESSION['choice_1'] = $chessmen[$random_piece];

unset($chessmen[$random_piece]);

$random_piece = array_rand($chessmen); 
$_SESSION['choice_2'] = $chessmen[$random_piece];
} 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:20:04.607

Empty 只判断一个变量是否为空，使用 unset。

```
if ($_GET['clear']=="1") {unset($_SESSION['choice_1']);} 
```

# javascript - 跨度的“ScrollWidth”属性是否在 Chrome 上不起作用？

> ID：13226296
> 
> 赞同：2
> 
> 时间：2012-11-05T05:16:24.693
> 
> 标签：javascript, css, google-chrome, html

我有一个跨度，里面有一些文字。

```
document.getElementById('span1').scrollWidth; 
```

在 Firefox 上返回“100”作为滚动宽度，但 Chrome 只返回“0”。Chrome 不支持这个“scrollWidth”属性吗？任何其他不支持相同的浏览器？

如果我需要以像素为单位获取句子的长度，还有什么办法解决这个问题？（我一直使用“innerHTML”属性填充“span1”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:02:09.343

Firefox 和 Chrome 对 css 和 js 的响应方式有很大不同。[ff=Firefox，c=Chrome，sw=scrollWidth]

关键点：

1.  sw 仅在元素的`display`is not`inline`和时有效`none`。
    ff 默认将 设置`display`为`block`，而 c 将其设置为`inline`。所以你不会在c中得到sw。如果您无论如何都需要隐藏元素，只需使用：
    `visibility:hidden`而不`display`为 ff 和 c 设置。
2.  如果你`visibility`在 c 中设置了，使用`style.width`元素而不是 sc。这行得通。

如果您仍然想在 chrome 上使用 sc 也可以隐藏`span`，您可以使用@AnthonyWJones 回答

[了解用于自动换行和其他应用程序的 HTML 文本行的宽度](https://stackoverflow.com/questions/1216759/knowing-how-wide-a-text-line-will-be-in-html-for-word-wrap-and-other-application)

适用于 IE7、8、9、FF、Chrome。

# android - 在 0 到 105 度之间获取错误的设备角度 onSensorChanged

> ID：13226300
> 
> 赞同：0
> 
> 时间：2012-11-05T05:16:34.007
> 
> 标签：android

我只想获得 0 到 90 度之间的角度，当我的设备处于 90 度时，我的传感器角度错误，然后我得到 105 度，所以请帮助我获得正确的角度，我已经在设备 samsung galaxy s duos 和micromax 并且还会冻结 UI。

```
private void init() {
        oldBitmap = BitmapFactory.decodeResource(getResources(),
                R.drawable.clock1);
        w = oldBitmap.getWidth();
        h = oldBitmap.getHeight();
        mtx = new Matrix();
        degrees = Integer.parseInt(x.toString());
        mtx.postRotate(-degrees);
        oldBitmap = Bitmap.createBitmap(oldBitmap, 0, 0, w, h, mtx, true);
        img.setScaleType(ScaleType.CENTER);
        img.setImageBitmap(oldBitmap);
    }
    @Override
    protected void onResume() {
        super.onResume();
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
                SensorManager.SENSOR_DELAY_NORMAL);
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION),
                SensorManager.SENSOR_DELAY_NORMAL);
    }
    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {                  
            //x = (int) Math.pow(event.values[0], 2);  // is for the right to left or left to right side angle
            //x = (int) Math.pow(event.values[2], 2); // this is for the bottom to top or top to bottom side angle
            x = (int) Math.pow(event.values[1], 2); // this is for both side angle

            try {
                Log.i("my x is..", "my degree is..."+x);    
                    txtanglex.setText(x.toString());            
                    init();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    } 
```

从上面的代码我得到0到105之间的设备角度

![在此处输入图像描述](../Images/a1034eb06fb3c46d856fc4a0583c2440.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:30:25.510

这是使用传感器获取角度的示例代码

```
private float[] mGravity;
private float[] mMagnetic;
private float angle_value;

private float getDirection()
{

    float[] temp = new float[9];
    float[] R = new float[9];
    //Load rotation matrix into R
    SensorManager.getRotationMatrix(temp, null,
            mGravity, mMagnetic);

    //Remap to camera's point-of-view
    SensorManager.remapCoordinateSystem(temp,
            SensorManager.AXIS_X,
            SensorManager.AXIS_Z, R);

    //Return the orientation values
    float[] values = new float[3];
    SensorManager.getOrientation(R, values);

    //Convert to degrees
    for (int i=0; i < values.length; i++) {
        Double degrees = (values[i] * 180) / Math.PI;
        values[i] = degrees.floatValue();
    }

    return values[0];

}

@Override
public void onSensorChanged(SensorEvent event) {
    switch(event.sensor.getType()) {

    case Sensor.TYPE_ACCELEROMETER:
        mGravity = event.values.clone();
        break;
    case Sensor.TYPE_MAGNETIC_FIELD:
        mMagnetic = event.values.clone();
        break;
    default:
        return;
    }
    if(mGravity != null && mMagnetic != null) {
        angle_value = getDirection();
    }
} 
```

如果您只想使用这样的逻辑，`angle_value`则必须这样做。`0-180``0-90`

```
if(angle_value>90)
{
   angle_value=angle_value-90;
} 
```

# java - 随机字符生成器 Java

> ID：13226303
> 
> 赞同：-1
> 
> 时间：2012-11-05T05:17:06.377
> 
> 标签：java, javascript, arrays, object, ascii

我需要创建一个`keyMaker`函数来随机生成一个正好为 23 个字符长的字符串。它们必须是小写字母，并分组为五个一组，每组五个之间有一个连字符。（例如 fdior-fhwkd-ruwka-qozsm）。

我需要使用将字符编号转换为字符的字符串函数（a=97,z=122...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:23:54.827

```
private static Random rnd = new Random();

public static String makeRandomString() {
    char nextChar;
    StringBuilder sb = new StringBuilder();

    for(int i = 0; i < 20; i++) {
        // lowercase characters go from 97 to 122
        nextChar = (char) (rnd.nextInt(26) + 97);
        sb.append(nextChar);
        if ((i + 1) % 5 == 0 && i != 19) sb.append('-');
    }

    return sb.toString();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:29:58.787

这是Javascript中的解决方案：

```
function generateKeyString() {
    var key = "", random;
    var letters = "abcdefghijklmnopqrstuvwxyz";
    for (var i = 0; i < 20; i++) {
        if (i !== 0 && i % 5 === 0) {
            key += "-";
        }
        random = Math.floor(Math.random() * letters.length);
        key += letters.charAt(random);
    }
    return(key);
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/9mFb5/](http://jsfiddle.net/jfriend00/9mFb5/)

# tortoisehg - 我正在尝试将我的代码推送到公司的存储库

> ID：13226304
> 
> 赞同：1
> 
> 时间：2012-11-05T05:17:28.213
> 
> 标签：tortoisehg

我正在对远程存储库使用乌龟客户端。我可以拉取和合并，但是当我尝试推送我的更改时，我收到了这个错误：

```
abort: push creates new remote head fd3cfa09ec66!
hint: did you forget to merge? use push -f to force 
```

![在此处输入图像描述](../Images/20c4a9f4ba4cb6aab324cdde1d79e695.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:19:56.010

似乎有什么东西是从另一部分推过来的。尝试“拉”和“合并”他们的更改，然后“推送”你的代码

# java - 使用 Java 进行 USB 设备检测

> ID：13226307
> 
> 赞同：3
> 
> 时间：2012-11-05T05:17:48.073
> 
> 标签：java, usb

有没有一种方法可以检测通过 USB 连接到使用 Java 编程语言的 PC 的设备类型，例如安卓或 iPhone？

# .net - 在循环期间获得客户确认

> ID：13226309
> 
> 赞同：0
> 
> 时间：2012-11-05T05:17:54.030
> 
> 标签：.net, httpwebrequest, client-side, confirmation

我正在为我的客户开发一个应用程序，它将使用服务器端 HttpWebRequest/Response 自动在网络上下订单。客户希望查看队列中每个订单的最后一步（结帐），以便他可以决定是否下订单。

注意：有人可能会认为

> 为什么不让客户在放入队列之前决定要处理哪个订单？

但是在下单的过程中有很多与订单相关的操作，所以客户在最后一步只能做出选择。

操作流程如下：

客户从 gridview 中选择订单并按下购买按钮，这将调用一个自动下订单的功能。

脚步：

1.  应用程序在客户希望下订单的网站上获得身份验证。
2.  找到物品并填写交货单。
3.  继续处理帐单信息并完成订单。

以上都是通过 HttpWebRequest/Response 自动进行的，所以如果在操作过程中出现任何问题，客户端无法控制订单流程以停止。为此，客户希望在第 3 步得到确认，以便他可以选择是否处理此特定订单？

**其余的事情都做完了。我的问题是如何显示确认框，如果客户单击是/否，下一步如何继续。**

伪代码可能如下：

```
Dim orderArray(5) as string 

orderArray(0) = "Order 1" 
orderArray(1) = "Order 2" 
orderArray(2) = "Order 3" 
orderArray(3) = "Order 4" 
orderArray(4) = "Order 5" 

    Step 1: Get Authenticated.

    For i=0 to orderArray.Length -1 

       'Step 2: Item Found for orderArray(i) and form filled

       Get confirmation from client ( a client side msg box etc)

       if client-confirmed then 

         'Step 3: Billing Info and place Order

       else

           'Cancel this order and proceed for next order 
        end if 

   Next 
```

# c++ - 查找并启动与字符串匹配的程序

> ID：13226310
> 
> 赞同：0
> 
> 时间：2012-11-05T05:17:56.017
> 
> 标签：c++, file, vector, launcher

为我的程序的下一步寻找一些帮助。

该程序现在所做的是询问用户他们正在寻找哪种类型的文件。一旦用户回答它，然后搜索程序所在的文件夹并找到扩展名与请求类型匹配的所有文件。然后，它会列出所有匹配的文件，旁边有一个随着搜索迭代的数字。

我想要做的是让用户只需输入与他们要打开的文件相对应的数字，然后打开它。

我现在拥有的是：

```
#include <iostream>
#include <filesystem>
#include <vector>
#include <string>
#include <algorithm>
using namespace std;
using namespace std::tr2::sys;

    //Checks for matching extensions
bool ends_with(std::string& file, std::string& ext)
{
    return file.size() >= ext.size() && // file must be at least as long as ext
        // check strings are equal starting at the end
        std::equal(ext.rbegin(), ext.rend(), file.rbegin());
}
    //Checks for matching programs
bool program_match(std::string& file, std::string& reqFile)
{
    return std::equal(reqFile.begin(), reqFile.end(), file.begin());
}

void wScan( path f, unsigned i = 0 )
{
    directory_iterator d( f );
    directory_iterator e;
    vector<string>::iterator it2;
    std::vector<string> extMatch;
    std::vector<string> testMatch;

            //loop that populates the vector of matches
    for( ; d != e; ++d )
    {
        string file = d->path();
        string ext = ".docx";
        if(ends_with(file, ext))
        {
            extMatch.push_back(file);
        }

    }
    int preI = -1;
    for(it2 = extMatch.begin(); it2 != extMatch.end(); it2++)
    {
        preI += 1;
        cout << preI << ". " << *it2 << endl;
    }
    cout << "Enter the number of your choice (or quit): ";
    int fSelection;
    cin >> fSelection;
                    //test match for full file match
        for( ; d != e; ++d )
    {
        string file = d->path();
        string reqFile = extMatch[fSelection];
        if(program_match(file, reqFile))
        {
            testMatch.push_back(file);
        }
    }
        for(it2 = extMatch.begin(); it2 != extMatch.end(); it2++)
    {
        cout << *it2 << endl;
    }

}
int main()
{

    string selection;
cout << "0\. Microsoft word \n1\. Microsoft Excel \n2\. Visual Studio 11 \n3\. 7Zip \n4\. Notepad \n Enter the number of your choice (or quit): ";

cin >> selection;

path folder = "..";

    if (selection == "0")
{
    wScan ( folder );
}

    else if...
} 
```

我现在拥有的是另一个 for 循环，它再次遍历文件并提取所有与请求匹配的文件。然后它打印出该文件的名称。没有理由这样做，这只是一个测试，看看我的搜索方法是否会找到我正在寻找的文件。

我想知道找到文件后如何打开文件。我已经阅读了有关 system() 的一些内容，但似乎建议不要这样做，并且无论如何我尝试它的方式都对我不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:43:07.390

假设您的代码将仅在 Windows 上运行（基于列出的程序），您可以使用该`ShellExecute`功能。要使用它，`Windows.h`请将要打开的程序和文件包含并传递给函数：

```
#include <Windows.h>

int main()
{
    char program[] = "VCExpress.exe";
    char file[] = "main.cpp";
    // opens file in program
    ShellExecuteA(NULL, "open", program, file, NULL, SW_SHOWDEFAULT);
} 
```

`ShellExecute`还允许您在与文件扩展名关联的默认软件中打开文件。对我来说，以下内容也在 Visual C++ 中打开：

```
#include <Windows.h>

int main()
{
    char file[] = "main.cpp";
    // opens file in default program
    ShellExecuteA(NULL, "open", file, NULL, NULL, SW_SHOWDEFAULT);
} 
```

`ShellExecute`可以执行具有更多选项的程序；查看文档：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)

# string - 从字符串 C# 中解析多个数字

> ID：13226317
> 
> 赞同：3
> 
> 时间：2012-11-05T05:19:17.813
> 
> 标签：string, parsing, numbers

如何在 C# 中从字符串中解析多个数字？例如，如何从该字符串中获取所有数字：<3, 4, 4>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:21:35.333

对捕获组使用**正则表达式**。

```
\<(\d+), (\d+), (\d+)\>/ 
```

可能类似于以下内容：

```
Regex regex = new Regex(@"\<(\d+), (\d+), (\d+)\>/");
Match match = regex.Match(myString);
if (match.Success){
   //Take matches from each capturing group here. match.Groups[n].Value;
}
else{
   //No match
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:44:57.820

似乎你的字符串中有数字，`,`所以你可以试试这个

```
 string st = "3, 4, 4";
        st = System.Text.RegularExpressions.Regex.Replace(st, " ", "");
        //MessageBox.Show(st);
        string[] ans = st.Split(',');
        for (int i = 0; i < ans.Length; i++)
        {
            int num_At_i = Convert.ToInt32(ans[i]);
            MessageBox.Show(num_At_i + "");
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:22:24.317

你试过这个吗？基本正则表达式： `[0-9]+`

# ios - ios 我怎么知道控制器是“push”还是“pop”返回

> ID：13226318
> 
> 赞同：1
> 
> 时间：2012-11-05T05:19:22.993
> 
> 标签：ios, pushviewcontroller, viewdidappear, popviewcontroller

我有三个控制器，我想知道控制器是推送还是弹出

控制器：

```
{
    if(!b)
     b = [B alloc] init];
    [self.navigationController pushViewController:b animated:YES];
} 
```

B控制器：

```
- (void) viewDidAppear:(BOOL)animated 
{
     [super viewDidAppear:animated];
     //I want here to judge, from the "A" push over, or to return from the "C" "pop"

     //if it is push from A 
     //dosomething.....

     //if it is pop from C
     //dosomething
}
-(void)testAction:(id)sender
{
    C *c = [[C alloc] init];
    [self.navigationController pushViewController:b animated:YES];
    [c release];
} 
```

C控制器：

```
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T05:29:57.663

看一下 UIViewController 方法，isMovingToParentViewController。如果视图控制器因为被推送而被显示，这将返回 YES，但如果因为另一个视图控制器从堆栈中弹出而显示它，则返回 NO。

```
-(void)viewDidAppear:(BOOL)animated { //Code in view controller B
    [super viewDidAppear:animated];
    NSLog(@"isMovingToParentViewController: %d",self.isMovingToParentViewController);
    // this will log 1 if pushing from A but 0 if C is popped
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:27:38.597

**编辑**：

```
Add UINavigationControllerDelegate in .h file 
```

也这样做：

```
[self.yournavController setDelegate:self]; 
```

下面的方法`navigation controller delegate`是当导航控制器通过`shows`一个新的时调用的，或者。`top view controller``push``pop``setting``view controller stack`

添加这个方法

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:36:25.147

嗯，我认为为此您需要跟踪一个全局变量，该变量知道它是从 A 推送还是从 C 弹出。我要做的是：

1.  在 appDelegate 或一些外部 .h 文件中声明一个`BOOL`变量并合成它。`isPush`

2.  当您从 A 到 B 时，即这是一个推，在 A 中使其等于“是”。

```
yourAppDelegate *myDelegate = (yourAppDelegate*) [[UIApplication SharedApplication] delegate];

myDelegate.isPush = YES; 
```

同样，在从 C 中弹出之前，为`isPush = NO`;赋值

1.  在 B's`viewDidLoad`中，查看变量的值。

```
yourAppDelegate *myDelegate = (yourAppDelegate*) [[UIApplication SharedApplication] delegate];

if(myDelegate.isPush)
//means A was pushed

else
//means C was popped 
```

# java - java.lang.ClassCastException: org.ksoap2.serialization.SoapObject 在 android

> ID：13226321
> 
> 赞同：0
> 
> 时间：2012-11-05T05:19:48.427
> 
> 标签：java, android, mysql, ksoap2, android-ksoap2

嗨，我开发了一个 android 应用程序。

该应用程序的目的是从 mysql 数据库中检索数据并显示在 android 设备中。

这是我的安卓代码：

```
public class RetailerActivity extends Activity {
 private final String NAMESPACE = "http://ws.testprops.com";
    private final String URL = "http://krish.jelastic.servint.net/Retrieve/services/Fetch?wsdl";
    private final String SOAP_ACTION = "http://ws.testprops.com/customerData";
    private final String METHOD_NAME = "customerData";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");//Result string will split & store in an array

        TextView tv = new TextView(this);

        for(int i = 0; i<resultArr.length;i++){
        tv.append(resultArr[i]+"\n\n");
       }
        setContentView(tv);

    } catch (Exception e) {
        e.printStackTrace();
    }
}} 
```

如果我必须运行该应用程序意味着只显示空白屏幕。它花费了近 1 小时的时间太长，我的 android 控制台窗口上也出现以下错误：

```
 11-05 10:38:27.868: W/System.err(837): java.lang.ClassCastException: org.ksoap2.serialization.SoapObject
  11-05 10:38:27.878: W/System.err(837):   at com.retailer.client.RetailerActivity.onCreate(RetailerActivity.java:29)
  11-05 10:38:27.878: W/System.err(837):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
  11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
  11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread.access$2300(ActivityThread.java:125)
  11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
  11-05 10:38:27.878: W/System.err(837):   at android.os.Handler.dispatchMessage(Handler.java:99)
 11-05 10:38:27.878: W/System.err(837):   at android.os.Looper.loop(Looper.java:123)
 11-05 10:38:27.878: W/System.err(837):   at android.app.ActivityThread.main(ActivityThread.java:4627)
 11-05 10:38:27.878: W/System.err(837):   at java.lang.reflect.Method.invokeNative(Native Method)
 11-05 10:38:27.878: W/System.err(837):   at java.lang.reflect.Method.invoke(Method.java:521)
 11-05 10:38:27.878: W/System.err(837):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 11-05 10:38:27.878: W/System.err(837):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 11-05 10:38:27.888: W/System.err(837):   at dalvik.system.NativeStart.main(Native Method) 
```

请帮助我。我该如何解决这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T05:31:11.220

改变

```
SoapPrimitive response = (SoapPrimitive)envelope.getResponse(); 
```

至

```
SoapObject response = (SoapObject)envelope.getResponse(); 
```

# c++ - 删除指针后，它仍然在 Mac OS X 中使用 Xcode 在 C++ 中工作

> ID：13226322
> 
> 赞同：2
> 
> 时间：2012-11-05T05:19:54.310
> 
> 标签：c++, xcode, macos, delete-operator

> **可能重复：**
> [C++ 删除 - 它删除了我的对象但我仍然可以访问数据？](https://stackoverflow.com/questions/1930459/c-delete-it-deletes-my-objects-but-i-can-still-access-the-data)

考虑以下代码：-

```
#include <iostream>
class Test
{
public:
    int k=10;
};

int main(int argc, const char * argv[])
{
    Test *t = new Test();
    delete t;
    //t1 = NULL;
    t->k=50;
    printf("\n%d",t->k);
    return 0;
} 
```

它的输出是`50`虽然`t`被删除了。为什么不崩溃？我在 Mac OS x 中使用 Xcode。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:42:19.567

“删除”只会通知（除了调用析构函数之外）堆管理器，之前使用 new 分配的 sizeof(Test) 的内存块将不再使用，并且堆管理器可以自由地对该内存块做任何事情.

让我试着给你一个场景，说明相同的代码何时会导致异常。

假设内存块是由堆管理器在一个新的内存页面上分配的，而堆管理器从虚拟内存管理器获得了新的内存页面，因为它无法在先前分配的页面中的其他任何地方找到空闲空间。现在，当删除完成时，堆管理器会发现在内存页面上分配的唯一块已被释放，因此它可能决定将内存页面释放回虚拟内存管理器。然后，当您的代码访问虚拟内存中甚至不存在页面的内存时，您会收到错误消息。

当然，通过对堆管理实现的深入了解，还可以提出其他方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:24:09.653

因为你（不）幸运。您正在调用未定义的行为。一种可能的未定义行为是“按预期工作”。但是，您的期望值得怀疑。在删除和该函数分配内存的使用之间添加一个函数调用等等，您可能会因为判断错误而完全破坏其他一些数据。

未定义的行为不必崩溃……或者不必立即崩溃。但是从长远来看，调用它通常会导致问题，尤其是在更大的程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:23:29.167

这是一个未定义的行为，你不应该期待任何事情。但是，内存可能还没有被写入，它只是被标记为空闲，它最终会被覆盖，这可能就是它工作的原因。将指针设置为 是一个好习惯`NULL`，为避免此类陷阱，请参阅[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)问题。

# ruby-on-rails - Rails 嵌套模型创建不尊重验证约束

> ID：13226328
> 
> 赞同：0
> 
> 时间：2012-11-05T05:20:17.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, rspec

我有一个具有多个多态地址对象的客户模型，如下所示：

客户型号：

```
class Customer < ActiveRecord::Base
  has_many :mailing_addresses, :as => :addressable, :class_name => 'Address', dependent => :destroy
  accepts_nested_attributes_for :mailing_addresses

  validates :mailing_addresses, :presence => true
  validates_associated :mailing_addresses
end 
```

地址型号：

```
class Address < ActiveRecord::Base
  belongs_to :addressable, :polymorphic => true

  validate  :validate_quota
  private
  def validate_quota
    case addressable_type
  when "Customer"
    customer = Customer.find(addressable_id)
    if customer.mailing_addresses.size >= 3
      puts "Adding too many records"
      errors.add(:addressable, "Too many records")
    end
  end
end 
```

我还使用 RSpec 来测试配额约束是否得到遵守。所以这个规范通过了，例如：

```
it "observes quota limit" do
  customer = FactoryGirl.create(:customer, :number_of_mailing_addresses => 3)
  expect {
    address = FactoryGirl.create(:mailing_address, :addressable => customer)
  }.to raise_error
  customer.mailing_addresses.count.should eq(3)
end 
```

哪个好。但是，这非常失败：

```
it "fails add if already 3 addresses" do
  customer = FactoryGirl.create(:customer, :number_of_mailing_addresses => 3)
  expect {
    customer.mailing_addresses.create( FactoryGirl.attributes_for(:mailing_address).except(:addressable) )            
  }.to raise_error
end 
```

我什至可以在规范输出中看到地址验证失败，但由于某种原因，它不会在“customer.mailing_addresses.create()”中引发错误，验证失败也不会阻止第四地址模型保存到数据库。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:54:25.783

啊，我终于想通了！为了使失败的验证实际上引发错误，我需要更改`create`为我的上一个规范。`create!`

# php - 限制免费用户可以查看的个人资料数量？

> ID：13226335
> 
> 赞同：1
> 
> 时间：2012-11-05T05:20:35.463
> 
> 标签：php, sql, limit

有没有一种方法可以让我限制用户每天可以在我的网站上查看的个人资料数量。因此，例如，每个用户都有一个 id 1、2、3 等，如果一个用户在一天内同时查看了 5 个个人资料，那么它会阻止他们再查看并将他们重定向到注册页面以成为他们的付费会员可以查看无限的个人资料？

我对 php 和 sql 很陌生，但如果有办法做到这一点，这主要是我正在从事的工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:27:31.713

在您的数据库中创建 1 个名为 user_views 的表，其中包含 3 个字段 id（自动增量）、user_id（正在访问的用户）、visited_user_id（被访问的用户 id）。

在用户看到其他用户的 user_details 页面上，在您的代码集 1 函数开始时，该函数会将视图添加到该表中，如果用户已经访问过该用户，则必须忽略它，如果用户进行了所有允许的访问，则该函数将重定向他...

并且 db 表必须在每天 00:00:00 截断..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:42:49.830

我认为简单地使用 SESSION 变量和计数机制就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:23:59.850

是的。每次用户查看配置文件时，存储该信息`(viewer, who they viewed, a time stamp)`。

每次他们去查看个人资料时，检查他们今天查看了多少个人资料。如果超过**限制**，`redirect them`.

您可能还需要考虑其他逻辑，例如，如果他们 5 次返回相同的配置文件，是否每次都计算在内？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T05:31:30.800

是的，您可以限制他们观看，

1.  您可以将其保存在数据库中，每次他们查看每个配置文件然后将其保存到您的数据库中，您可以制作一个表格，
    tbl_user_view
    字段：user_id，view_count

    每个配置文件视图都会生成一个更新功能
    `UPDATE tble_user_view set view_count = view_count + 1 WHERE user_id = user_id`

这里有一些转折，如果用户两次查看相同的配置文件，您需要将其记录为 1，因此保存他们在 COOKIES 中查看的配置文件的 ID，或者如果您不关心数据库负载，您可以将其保存在那里。

# sql - 在 xquery 插入的 If 条件中使用 varchar 存储过程参数

> ID：13226336
> 
> 赞同：0
> 
> 时间：2012-11-05T05:20:42.717
> 
> 标签：sql, xml, sql-server-2008, tsql, xquery

是否可以在存储过程中的 xquery insert 语句中使用 nvarchar 类型的 sproc 变量？我的意思是这样的，其中仅当存在具有所寻求值的子元素时才插入元素：

```
DECLARE @profiles_xml xml
DECLARE @profile_id int
DECLARE @user_id nvarchar(50)
SET @profile_id = 20
SET @user_id ='BC4A18CA-AFB5-4268-BDA9-C990DAFE7783'
SET @profiles_xml = (SELECT profiles from tbl_applied_profiles WHERE profiles.value('(Profile/ID)[1]','int')= @profile_id)
SET @profiles_xml.modify('
insert
if(/Profile/User/ID="user_id")
then <Activity>activity_name5</Activity>
else()
as first
into (/Profile/User/Activities)[1]') 
```

@profiles_xml 包含的 xml 如下所示：

```
<Profile>
  <ID>20</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>somename</Name>
    <Activities>
      <Activity>activity_name2</Activity>
    </Activities>
  </User>
</Profile> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:28:37.600

你需要使用`sql:variable("@user_id")`，即

```
SET @profiles_xml.modify('
insert
if(/Profile/User/ID=sql:variable("@user_id"))
then <Activity>activity_name5</Activity>
else()
as first
into (/Profile/User/Activities)[1]');
select @profiles_xml; 
```

# linux - 如何在 linux 启动时覆盖文件？

> ID：13226337
> 
> 赞同：1
> 
> 时间：2012-11-05T05:20:47.673
> 
> 标签：linux, io-redirection

我正在将启动日志从多个位置重定向到一个文本文件。我在重定向时使用 ( `>>`) 附加，以便在连续记录期间不会覆盖现有内容。如何确保文件*被*覆盖并在启动期间提供干净的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:22:53.723

正如你所说，`>>`是为了追加。

用于`>`用新内容覆盖文件。

* * *

如果您想在开始追加*之前*`echo "" > mylogfile`简单地清除日志文件，请使用将其截断为空字符串。

# asp.net-mvc-3 - EF 代码优先和 mvc 3.0 关系有问题

> ID：13226349
> 
> 赞同：1
> 
> 时间：2012-11-05T05:21:53.210
> 
> 标签：asp.net-mvc-3, ef-code-first, many-to-many, datacontext, circular-reference

运行我的应用程序时出现以下错误。我正在强制应用程序为我的上下文执行 DropCreateDatabaseAlways，所以我不确定为什么它会说我正在尝试使用相同的键插入多个实体。

用户和消息的链接方式可能存在问题。我不得不补充：

```
 modelBuilder.Entity<Message>()
                    .HasRequired(m => m.UserSentFrom)
                    .WithRequiredDependent()
                    .WillCascadeOnDelete(false); 
```

仅仅因为我收到有关循环引用的警告并且不得不将 willcascadeondelete 设置为 false。

如果我的设计有问题，请告诉我，但这就是我想要做的：用户有很多消息，消息有一个 FromUser 消息有很多 ToUser

任何帮助将不胜感激，因为这让我发疯。

{“检测到冲突更改。尝试插入具有相同键的多个实体时可能会发生这种情况。”}

```
 public class User
        {
            public int Id { get; set; }
            [Required(ErrorMessage="Username is required")]
            public string Username { get; set; }
            [Required(ErrorMessage = "Password is required")]
            [DataType(DataType.Password)]
            public string Password { get; set; }
            [Required(ErrorMessage="Email Address is required")]
            [DataType(DataType.EmailAddress)]
            public string UserEmailAddress { get; set; }
            [DisplayFormat(DataFormatString="{0:d}",ApplyFormatInEditMode=true)]
            public DateTime DateCreated { get; set; }
            [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
            public DateTime LastUpdated { get; set; }
            public virtual ICollection<Message> Messages { get; set; }
            public User()
            {
                Messages = new List<Message>();
            }
        }  

    public class Message
        {
            public int Id { get; set; }
            public DateTime DateSent { get; set; }
            public virtual ICollection<User> UserSentTo { get; set; }
            public string Title { get; set; }
            public string Body { get; set; }
            public int UserSentFromId { get; set; }
            public virtual User UserSentFrom { get; set; }
        }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
            {
                modelBuilder.Entity<Message>()
                     .HasMany(m => m.UserSentTo).WithMany(u => u.Messages)
                     .Map(t => t.MapLeftKey("MessageId")
                         .MapRightKey("UserId")
                         .ToTable("MessagesUserSentTo"));
                modelBuilder.Entity<Message>()
                    .HasRequired(m => m.UserSentFrom)
                    .WithRequiredDependent()
                    .WillCascadeOnDelete(false);
            }

    protected override void Seed(WebsiteGameContext context)
            {
                var users = new List<User>
                {
                    new User { Username = "Admin", UserEmailAddress="admin@temp.com", DateCreated = DateTime.Now, LastUpdated = DateTime.Now},
                    new User { Username = "Member", UserEmailAddress="member@temp.com",DateCreated = DateTime.Now, LastUpdated = DateTime.Now}
                };
                users.ForEach(u => context.Users.Add(u));
                context.SaveChanges();

                var messages = new List<Message>
                {
                    new Message { DateSent=DateTime.Now, Title="Sent From Admin", Body="There should be 2 users that this was sent to", UserSentFromId=users[0].Id,UserSentTo= new List<User>()},
                    new Message { DateSent=DateTime.Now, Title="Sent From Member", Body="There should be 1 user that this was sent to", UserSentFromId=users[1].Id,UserSentTo= new List<User>()}
                };
                messages.ForEach(m => context.Messages.Add(m));
                context.SaveChanges();

                messages[0].UserSentTo.Add(users[0]);
                messages[0].UserSentTo.Add(users[1]);
                messages[1].UserSentTo.Add(users[0]);
                context.SaveChanges();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:47:01.517

为了让它工作改变两件事。首先删除 Users 中的 messages 属性，并创建 MessagesSend 和 MessagesReceived 属性。然后像这样进行映射：

```
 modelBuilder.Entity<Message>().HasMany(t => t.UserSentTo)
            .WithMany(t => t.MessagesReceived)
            .Map(m =>
            {
                m.ToTable("MessagesUserSentTo");
                m.MapLeftKey("MessageId");
                m.MapRightKey("UserId");
            });

        modelBuilder.Entity<Message>().HasRequired(t => t.UserSentFrom)
            .WithMany(t => t.MessagesSend)
            .HasForeignKey(d => d.UserSentFromId)
            .WillCascadeOnDelete(false); 
```

# php - 如果语句不起作用，但有点工作

> ID：13226350
> 
> 赞同：0
> 
> 时间：2012-11-05T05:21:55.113
> 
> 标签：php, file-io, if-statement

我制作了一个 php 脚本来查看 txt 文件的内容是否与用户输入的内容相同。我写了一个 if 语句，看看它是否正确，如果它不发送给 else。如果我不发送任何变量，那么它可以工作并显示

`a is b is file is 1`

但如果我输入文件和它显示的正确内容

`a is test.txt b is hello file is hello 0`

这是我的代码

```
<?php
session_destroy();
$a=htmlspecialchars($_REQUEST['a']);
$b=htmlspecialchars($_REQUEST['b']);
$my_file = file_get_contents($a);
echo "a is $a\n";
echo "b is $b\n";
echo "file is $my_file\n";
if ( $my_file == $b ) {
echo "1";
}else {
echo "0";
}
?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:27:24.340

这些是未初始化的变量，所以如果你什么都不输入，那么你得到的 if (false == false) 是真的。

这是因为 php 将 null 解释为 false。这很奇怪，我承认。

检查您的变量是否已设置，或使用默认值初始化它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T09:24:56.877

尝试对从文件中读取的内容使用 htmlspecialchars 函数，以确保安全，然后对从文件中读取的输入和用户输入使用 trim

# sql - 如何根据公式检索列值

> ID：13226351
> 
> 赞同：0
> 
> 时间：2012-11-05T05:21:55.490
> 
> 标签：sql, sql-server, sql-server-2000

在 SQL Server 2000 中使用视图

`Table1`：

```
id  z1      z2      z3      z4   type
--------------------------------------
01A 300     400     300     400  01
2B  300     400     300     400  02
3C  500     300     400     300  01
04A 500     400     500     400  01
05B 400     300     400     300  02
06  150     200     200     150  03
.... 
```

`Table2`：

```
type  Formula1           Formula2
------------------------------------    
01    ((Z1+Z2)/1000)*2   null
02    null               ((Z3+Z4)/1000)*2
03    ((Z1+Z2)/1000)*2   ((Z3+Z4)/1000)*2 
```

我想`table1`根据`table2`公式选择行：

*   在 table2 类型中 - 01 (z1 and z2 found) 然后我想考虑 table1 z1 z2 列
*   在 table2 类型中 - 02（找到 z3 和 z4）然后我想考虑 table1 z3 z4 列
*   在 table2 类型中 - 03（找到 z1、z2、z3 和 z4）然后我想考虑 table1 z1、z2、z3 z4 列

预期产出

`Table1`：

```
id   z1     z2     z3     z4    type
-------------------------------------    
01A  300    400    null   null  01
2B   null   null   300    400   02
3C   500    300    null   null  01
04A  500    400    null   null  01
05B  null   null   400    300   02
06   150    200    200    150   03 
```

目前我正在使用一个视图，我不想更改为存储过程，因为大多数报告都在使用这个视图。

如何在 sql.. 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:52:54.847

这是你需要的吗？查询在 SQL Sever 2005 中工作，donno 大约 2000，请检查：

```
select a.ID,
  (CASE WHEN PATINDEX('%Z1%', ISNULL(b.Formula1,'')+ISNULL(b.Formula2,''))<>0 THEN a.Z1 ELSE NULL END) Z1,
  (CASE WHEN PATINDEX('%Z2%', ISNULL(b.Formula1,'')+ISNULL(b.Formula2,''))<>0 THEN a.Z2 ELSE NULL END) Z2,
  (CASE WHEN PATINDEX('%Z3%', ISNULL(b.Formula1,'')+ISNULL(b.Formula2,''))<>0 THEN a.Z3 ELSE NULL END) Z3,
  (CASE WHEN PATINDEX('%Z4%', ISNULL(b.Formula1,'')+ISNULL(b.Formula2,''))<>0 THEN a.Z4 ELSE NULL END) Z4, 
  b.* 
From TABLE1 a inner join TABLE2 b on a.type=b.type 
```

# android - android复选框动态

> ID：13226353
> 
> 赞同：5
> 
> 时间：2012-11-05T05:22:21.370
> 
> 标签：android, checkbox

我正在尝试将复选框动态添加到 LinearLayout。我使用了以下代码，

```
private class ListAdapters extends ArrayAdapter<ApplicationBean> {
private ArrayList<ApplicationBean> items;
private int position;

public ListAdapters(Context context, int textViewResourceId,
        ArrayList<ApplicationBean> mTitleList) {
    super(context, textViewResourceId, mTitleList);
    this.items = mTitleList;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View v = convertView;
    this.position = position;
    if (v == null) {
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.applicationlistitem, null);
    }

    final ApplicationBean o = (ApplicationBean) items.get(position);

    if (o != null) {

        txtAppName = (TextView) v.findViewById(R.id.app_name);
        txtAppName.setText("" + o.getAppName());
        launchButton = (Button) v.findViewById(R.id.launch_btn);
        launchButton.setTag(position);
        launchButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                final PackageManager pm = mContext.getPackageManager();
                Intent LaunchIntent = pm
                        .getLaunchIntentForPackage(items
                                .get(Integer.parseInt(v.getTag()
                                        .toString())).getPname());
                mContext.startActivity(LaunchIntent);

            }
        });

        rdgPassFail = (RadioGroup) v.findViewById(R.id.status_group);
        rdgPassFail.setTag(position);

        RadioButton passBtn = (RadioButton) v
                .findViewById(R.id.pass_btn);
        passBtn.setTag(position);
        RadioButton failbtn = (RadioButton) v
                .findViewById(R.id.fail_btn);
        failbtn.setTag(position);

        rdgPassFail
                .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    @Override
                    public void onCheckedChanged(RadioGroup group,
                            int checkedId) {
                        ApplicationBean o = (ApplicationBean) items
                                .get(Integer.parseInt(group.getTag()
                                        .toString()));

                        switch (checkedId) {
                        case R.id.fail_btn:
                            Log.e("Fail button", "Clicked");
                            o.setFailState(true);
                            o.setPassState(false);
                            numOptions = 0;
                            Log.e("Fail button--1", "Clicked");

                            break;
                        case R.id.pass_btn:
                            Log.e("Pass button", "Clicked");

                            o.setFailState(false);
                            o.setPassState(true);
                            Log.e("Pass button-----1", "Clicked");

                            break;
                        }
                        items.set(Integer.parseInt(group.getTag()
                                .toString()), o);
                    }

                });

            Log.i("checkBoxFlag", "checkBoxFlag not true " + position);
            LinearLayout featuresTable = (LinearLayout) v
                    .findViewById(R.id.failure_reasonslist);

            for (int i = 0; i <= 5; i++) {
                CheckBox feature1 = new CheckBox(this.getContext());
                featuresTable.addView(feature1);
                Log.i("Inside for loop", "creating check box " + position);
            }
            checkBoxFlag = true;

        txtDescription = (EditText) v
                .findViewById(R.id.description_text);
        txtDescription.setTag(position);
        if (txtDescription.isFocused()) {
            InputMethodManager inputManager = (InputMethodManager) mContext
                    .getSystemService(INPUT_METHOD_SERVICE);
            inputManager.restartInput(txtDescription);
        }

        txtDescription
                .setOnFocusChangeListener(new View.OnFocusChangeListener() {

                    @Override
                    public void onFocusChange(View v, boolean hasFocus) {
                        if (!hasFocus) {

                            final EditText Caption = (EditText) v;
                            o.setDescription(Caption.getText()
                                    .toString());

                        }

                    }
                });
        uninstallButton = (Button) v.findViewById(R.id.uninstall_btn);
        uninstallButton.setTag(position);
        // uninstallButton.setVisibility(View.INVISIBLE);
        o.setUninstallVisible(false);
        uninstallButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Uri packageUri = Uri.parse("package:"
                        + items.get(
                                Integer.parseInt(v.getTag().toString()))
                                .getPname());
                Intent uninstallIntent = new Intent(
                        Intent.ACTION_DELETE, packageUri);
                uninstallIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(uninstallIntent);
                mTitleList.remove(items.get((Integer) v.getTag()));

                mListView.setAdapter(new ListAdapters(mContext,
                        R.id.app_name, mTitleList));
                ((BaseAdapter) mListView.getAdapter())
                        .notifyDataSetChanged();
                isUninstallclicked = true;

            }
        });

        submitButton = (Button) v.findViewById(R.id.submit_btn);
        submitButton.setTag(txtDescription);
        submitButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                EditText tv = (EditText) v.getTag(); // get edittext
                                                        // object

                txtDescription = tv;
                if (txtTesterName.getText().toString().equals("")) {
                    showDialog("Please enter the name of tester",
                            mContext);
                } else if (numOptions == 0) {
                    showDialog("Please select failure reason", mContext);
                } else if (tv.getText().toString().equals("")) {
                    showDialog("Please enter the description", mContext);
                } else if (!isNetworkAvailable()) {

                    showDialog(
                            "No network connection.Report won't be submitted",
                            mContext);
                } else {

                    if (!o.isUninstallVisible()) {
                        uninstallButton.setVisibility(View.VISIBLE);
                        o.setUninstallVisible(true);
                        mListView.invalidate();
                    }
                    PostRequest p = new PostRequest(Integer.parseInt(tv
                            .getTag().toString()));
                    p.execute();

                }
            }

        });

    }
    return v;
}

@Override
public int getItemViewType(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public int getViewTypeCount() {
    // TODO Auto-generated method stub
    return items.size();
}

} 
```

根据代码，视图中应该有六个复选框。但是当我检查它的六个以上复选框时。请在下面找到日志（从 logcat 复制）。日志也来了两次。我在列表视图中有一些其他控件。这些是在布局 xml 中定义的。但是我不能在设计时限制这些复选框的数量。所以我试图动态加载。有人可以帮忙吗？

```
10:40:23.163: I/Inside for loop(440): creating check box 0
10:40:23.223: I/Inside for loop(440): creating check box 0
10:40:23.223: I/Inside for loop(440): creating check box 0
10:40:23.273: I/Inside for loop(440): creating check box 0
10:40:23.273: I/Inside for loop(440): creating check box 0
10:40:23.303: I/Inside for loop(440): creating check box 0
10:40:23.393: I/c
10:40:23.393: I/Inside for loop(440): creating check box 0
10:40:23.423: I/Inside for loop(440): creating check box 0
10:40:23.423: I/Inside for loop(440): creating check box 0
10:40:23.503: I/Inside for loop(440): creating check box 0
10:40:23.503: I/Inside for loop(440): creating check box 0
10:40:23.553: I/Inside for loop(440): creating check box 0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T05:53:56.790

您必须尝试以下代码来创建动态复选框

```
int Array_Count=0;
String[] Str_Array;

Array_Count=Str_Array.length;

LinearLayout my_layout = (LinearLayout)findViewById(R.id.my_layout);

for (int i = 0; i < Array_Count; i++) 
{
    TableRow row =new TableRow(this);
    row.setId(i);
    row.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    CheckBox checkBox = new CheckBox(this);
    checkBox.setOnCheckedChangeListener(this);
    checkBox.setId(i);
    checkBox.setText(Str_Array[i]);
    row.addView(checkBox);  
    my_layout.addView(row);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T05:29:59.020

这样做

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    LinearLayout ll = (LinearLayout)findViewById(R.id.linearLayout2);

    //add checkboxes
            for(int i = 0; i < 6; i++) {
                CheckBox cb = new CheckBox(this);
                cb.setText("Dynamic Checkbox " + i);
                cb.setId(i+6);
                ll.addView(cb);
            }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T15:17:47.170

用这个：

```
LinearLayout ll = (LinearLayout) findViewById(R.id.ll);

        CheckBox[] cb = new CheckBox[6];
        for (int i = 0; i < 6; i++) {
            cb[i] = new CheckBox(this);
            ll.addView(cb[i]);
            cb[i].setText("Dynamic Checkbox " + i);
            cb[i].setId(i + 6);

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T05:29:25.680

您清楚发布的代码仅添加了 6 个复选框。这意味着调用这些函数的方法被调用了两次。

您正在某处记录 I/c。该方法的第二次调用是在该调用之后进行的，这为您提供了一个开始查找的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T05:46:55.660

尝试这个： -

```
CheckBox[] cb=new CheckBox[6];
for(int i = 0; i < 6; i++) {
cb[i].setText("Dynamic Checkbox " + i);
cb[i].setId(i+6);
linearLayout.addView(cb[i]);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-24T10:45:07.717

**在科特林**

```
 fun createCheckbox() {
    var arr_cb = arrayOfNulls<CheckBox>(checkbox_size)
    val layout = findViewById<View>(R.id.layout_checkbox) as ViewGroup
    val ll = LinearLayout(this)
    ll.orientation = LinearLayout.VERTICAL

    for (i in 0 until arr_cb.size) {
        arr_cb[i] = CheckBox(this)
        arr_cb[i]?.text = health_status.get(i).toString()
        arr_cb[i]?.setPadding(25, 0, 0, 0)
        arr_cb[i]?.id = i
        arr_cb[i]?.tag = health_status[i]
        arr_cb[i]?.setTextColor(resources.getColor(R.color.title_color))
        arr_cb[i]?.setOnCheckedChangeListener(
            arr_cb[i]?.let {
                handleCheck(it)
            })

        arr_cb[i]?.buttonTintList =
            ColorStateList.valueOf(resources.getColor(R.color.theme_color))
        ll.addView(arr_cb[i])
    }
    layout.addView(ll)
} 
```

**OnCheckedChangeListener 的 handleCheck 方法**

```
 private fun handleCheck(chk: CheckBox): CompoundButton.OnCheckedChangeListener? {
    return object : CompoundButton.OnCheckedChangeListener {
        override fun onCheckedChanged(buttonView: CompoundButton?, isChecked: Boolean) {
            if (!isChecked) {
                //uncheck
            } else {
                //check
            }
        }
    }
} 
```

# php - Jquery没有提交我的表单

> ID：13226361
> 
> 赞同：0
> 
> 时间：2012-11-05T05:23:07.717
> 
> 标签：php, jquery

嗨，我想使用 JQuery 提交我的表单，但我不知道为什么它对我不起作用。这是代码：

```
$("#search_result_fake_div2").live("click", function () {
        $("#search_result_present_list2").show("fast");
        $('body').one('click',function() {
            $("#search_result_present_list2").hide();
              });
             event.stopPropagation();

    });

 $(".search_result_list_item2").live("click", function () {
            $("#search_result_fake2").val($(this).html());
            $("#getattendees").submit();
            $("#search_result_present_list2").hide();
        }); 
```

和我的 HTML 代码：

```
<div>
    <div id="search_result_fake_container">
    <div id="search_result_fake_div2"></div>

    <form method="GET" id="getattendees">
    <input type="text" id="search_result_fake2" value="<?php if(!empty($city)){echo $city;} else{echo "Select Event";}?>" name="event_name">
    </form>

    </div>

    <div id="search_result_present_list2">

        <?php foreach ($events as $events1): ?>
        <div class="search_result_list_item2" id="search_result_item_12" style="text-align:center;"><?php echo $events1['event_name']; ?></div>
        <?php endforeach ?>

    </div>
    </div> 
```

这是一个使用 div 的下拉菜单，它来自我的另一个问题。我想要发生的一件事是，一旦我从下拉选择中单击了内容，就提交表单。我尝试`onchange="javascript: document.getattendees.submit();"`在我的输入框上使用，但没有任何反应，所以我正在考虑使用 jQuery，但问题仍然存在。我只是 jQuery 的新手，事实上我对这个不是很精通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:19:14.407

尝试这个：

```
 $('form#getattendees').trigger('submit'); 
```

# jquery - Ajax 未正确加载：Jquery、Php

> ID：13226384
> 
> 赞同：-1
> 
> 时间：2012-11-05T05:25:08.647
> 
> 标签：jquery, html

以下代码中的所有内容都有效，只是它在 processfeed.php 执行时不显示任何内容。我需要帮助理解原因。关于这方面的一些背景..它在 580 x 130 Iframe 中执行.. 并且 processfeed.php 有一个 javascript 重定向回它所有开始的地方，这是一个基本上带有发布按钮的文本区域.. 就像我说的那样，一切正常，除了加载gif..

```
 <body onLoad="loadingAjax('myDiv');">

    <script>
    function loadingAjax(div_id)
    {
        $("#"+div_id).html('<center><img src="images/ajax_loader.gif"></center>');
        $.ajax({
            type: "POST",
            url: "processfeed.php?<? echo   "loggedinuser=$loggedinuser&message=$message&private=$private&userto=$userto&feedpic=$feedpic&  feedpictmp=$feedpictmp";?>",
            data: "loggedinuser=" + loggedinuser,
            success: function(msg){
                $("#"+div_id).html(msg);
    }
});
}
</script>

<div id="myDiv"></div> 
```

大声笑，无论谁刚刚注册了一个帐户并评论了我的帖子，当你删除你的帐户时它就消失了。我没有阅读所有内容。

此外，我最终会设法检测电话号码形式的数字字符串，这些帖子将被自动删除。我已经为其他事情准备好了一些东西。

我一直都错了。它实际上没有传递变量。在我纠正了我的愚蠢错误后，加载 gif 现在显示，但数据没有被传递，所以我再次重试您的所有建议。非常感谢，伙计们，说真的，你们已经做了很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:28:27.793

您没有在其中使用 jquery。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
        function loadingAjax(div_id)
        {
            $("#"+div_id).html('<center><img src="images/ajax_loader.gif"></center>');
            $.ajax({
                type: "POST",
                url: "processfeed.php?<? echo   "loggedinuser=$loggedinuser&message=$message&private=$private&userto=$userto&feedpic=$feedpic&  feedpictmp=$feedpictmp";?>",
                data: "loggedinuser=" + loggedinuser,
                success: function(msg){
                    $("#"+div_id).html(msg);
        }
    });
    }
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:37:48.437

您需要执行一些步骤：

1.  验证 Jquery 库是否已添加到您的代码中。

2.  检查 firebug 或其他工具以查看任何客户端脚本错误。

3.  插入一些警报或调试您的代码以查看它在哪里引发错误。

4.  提醒 ajax 调用的 url 并验证它是否正确？

并更改您的脚本代码：

```
<head>
<style>
.dvLoader
{
    right:0px;
    bottom:36px;            
    left: 234px;
    position: absolute;
    display:none;   
    top: 85px;   
    z-index: 999;  
}
.dvLoader #overlay
{
    height: 100%;
    width: 100%;   
    background-color: Black;        
    opacity: 0.5; 
    filter: alpha(opacity=50);/*IE*/
    /*position: fixed;        */
    z-index: 1000;
    bottom:0;
}
.dvLoader #loaderContent
{
    background-image:url(../images/loading_box.png);      
    background-repeat:no-repeat;
    height: 50px;
    left: 50%;
    margin: 0;
    padding: 5px;
    position: fixed;
    text-align: center;
    top: 40%;
    width: 220px;
    z-index: 1001;
}
.dvLoader #loaderContent label
{
    color: #666666;
    font-size:13px;
    margin-left:5px;
    font-weight:bold;
}
</style>
     <script>
        function loadingAjax(div_id)
        {
            $('#dvLoader').show();       
            $.ajax({
                type: "POST",
                url: "processfeed.php?<? echo   "loggedinuser=$loggedinuser&message=$message&private=$private&userto=$userto&feedpic=$feedpic&  feedpictmp=$feedpictmp";?>",
                data: "loggedinuser=" + loggedinuser,
                success: function(msg){
                    $("#"+div_id).html(msg);
                    $('#dvLoader').hide();
        }
    </script>
</head>
<body>
 <div class="dvLoader" id="dvLoader">
      <div id="overlay">
      </div>
      <div id="loaderContent">
          <div>
              <label>Loading...</label>
          </div>
          <img src="@Url.Content("~/images/loader.gif")" alt="" />
      </div>
</div>
<div id="myDiv"/>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:48:04.823

像这样试试

消除

```
 <?php echo .... 
```

在您的代码和广告中，如下所示

将所有变量传递给 AJAX 函数并像这样创建 url。

```
function loadingAjax(div_id,loggedinuser,message,private,userto,feedpic,feedpictmp)
{

   document.getElementById("'"+div_id+"'").innerHTML = '<center><img src="images/ajax_loader.gif"></center>';
    $.ajax({
        type: "POST",
        url: "processfeed.php?loggedinuser="+loggedinuser+"&message="+message+"&private="+private+"&userto="+userto+"&feedpic="+feedpic+"&feedpictmp="+feedpictmp,
        data: "loggedinuser=" + loggedinuser,
        success: function(msg){
            $("#"+div_id).html(msg);
}
});
} 
```

# html - @media 查询不适用于 Android 手机 (Chrome)

> ID：13226392
> 
> 赞同：1
> 
> 时间：2012-11-05T05:26:22.390
> 
> 标签：html, css, web, twitter-bootstrap, responsive-design

**更新** 我解决了我自己的问题。见下文。

* * *

我用引导程序和其他@media 查询创建了一个网站来设置网站的样式。在桌面上，当我调整浏览器大小时，它会显示移动布局，但在我的手机上，它仍然会加载全宽网站。我在 Nexus S 上使用 Chrome。

[**http://conversing.ca**](http://conversing.ca)

我看过有类似问题的帖子。检查了 HTML 中的视口元标记、手持媒体标记。

```
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="bootstrap.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" media="screen,handheld" href="bootstrap-responsive.css" />
<link rel="stylesheet" type="text/css" media="screen,handheld" href="style.css" /> 
```

CSS (样式.css)

我添加了从另一篇文章中看到的#wrapper 行，但这也不起作用。希望有一种方法可以在移动设备上查看开发工具。

```
@media handheld, screen and (max-width: 767px){

#wrapper{width: 767px;}

body {
padding-right: 0px;
padding-left: 0px;
}

.hero-unit {
margin-top:0px;
padding-left: 12%;
}

.iphone {
top: auto;
left: 0;
position: relative;
}

input,button{
width: 90%;
margin: 0 auto;
}

#footer {
margin-left: 0px;
margin-right: 0px;
padding-left: 20px;
padding-right: 20px;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T22:28:39.167

我解决了我自己的问题。错误是带有“noresize”标签的域屏蔽中的 iframe。我无法为此编辑 HTML，因此我禁用了该功能，现在您应该可以在手机上看到移动布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:40:07.040

我最初的“猜测”是删除“手持设备”。“手持”查询并没有得到很好的支持。

# c# - 显示之前隐藏的相同表格

> ID：13226393
> 
> 赞同：1
> 
> 时间：2012-11-05T05:26:26.250
> 
> 标签：c#, winforms

在我的项目中，有两种形式`frmLogin`和`frmMain`. 成功登录后，`frmLogin`我`frmMain`通过执行以下操作向用户显示表单：

在`frmLogin`表单`button_click`事件中：

```
frmMain main = new frmMain();
main.Show();
this.Hide(); 
```

在`frmMain`用户注销时，我想显示相同的`frmLogin`表单（而不是实例）。这该怎么做？

我试过这段代码：（创建另一个*我不想要**的实例`frmLogin`*）

在`frmMain`表单`button_click`事件中：

```
if (MessageBox.Show("Do you really want to log out?", "Alert", MessageBoxButtons.YesNo).Equals(DialogResult.Yes))
{
    this.FormClosing -= frmMain_FormClosing;
    //
    Process p = new Process();
    p.StartInfo.FileName = Application.ExecutablePath;
    p.Start();
    //
    this.Dispose();
} 
```

我也尝试过使用`internal`说明符但没有用。

编辑：作为实习生，我不允许使用`Static`关键字和更改`program.cs`. 如果上述方法需要受限制的方法（我已经提到过），那么请建议我另一种方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T05:34:35.543

将 frmLogin 引用传递给 frmMain。然后，就在你处理 frmMain 之前，显示 frmLogin。

```
frmMain main = new frmMain();
main.LoginForm = this;
main.Show();
this.Hide(); 
```

然后在按钮单击事件中：

```
if (MessageBox.Show("Do you really want to log out?", "Alert", MessageBoxButtons.YesNo).Equals(DialogResult.Yes))
{
    this.FormClosing -= frmMain_FormClosing;
    LoginForm.Show();
    this.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T06:13:35.693

您所要做的就是将登录页面指定为`owner of nextform to be opened`

在您要打开 nextForm 的登录页面调用以下函数

```
void openNextForm()
{
    Form f2 = new YourForm();    
    f2.owner=this;
    f2.Show();
    this.Hide();
} 
```

在你的 nextForm（例如 mainForm）中写下你的按钮点击

```
void ButtonLogOut_Click(object sender, EventArgs e)
{
     this.Owner.Show();
     this.Hide();
     this.Dispose();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T05:41:51.913

我认为处理多个表单时最简洁的方法是在 Program.cs 中创建它们，并保留所有管理它们的方法，然后从事件处理程序中调用这些方法。有点像这样：

```
static class Program
{
    public static MainForm mainForm = new MainForm();
    public static LoginForm loginForm = new LoginForm();

    [STAThread]
    static void Main()
    {
        mainForm.Hide();
        loginForm.Hide();
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(loginForm);
    }

    public static void Login()
    {
        loginForm.Hide();
        mainForm.Show();
        // probably do more here
    }

    public static void Logout()
    {
        if (MessageBox.Show("Do you really want to log out?", "Alert", MessageBoxButtons.YesNo).Equals(DialogResult.Yes)))
        {
            mainForm.Hide();
            loginForm.Show();
            // probably do more here
        } 
    }
} 
```

然后在事件处理程序中，您只需调用 Program.Login() 或 Program.Logout()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T06:15:01.570

我不明白你为什么不使用 ShowDialog() 方法？

```
 frmMain main = new frmMain();
 this.Hide();
 main.ShowDialog();
 this.Show(); 
```

登录表单将被隐藏，主表单关闭后，登录表单将继续执行并自动显示...

# image-processing - 如何用负值归一化高斯图像像素的差异？

> ID：13226394
> 
> 赞同：0
> 
> 时间：2012-11-05T05:26:28.393
> 
> 标签：image-processing, gaussian, sift

在边缘检测的图像处理的上下文中，或者在我的情况下，基本的 SIFT 实现：

当取 2 个高斯模糊图像的“差异”时，你一定会得到差异为负的像素（它们最初在 0 - 255 之间，减去它们时可能在 -255 - 255 之间）。“解决”这个问题的正常方法是什么？在这种情况下，我认为绝对值并不是非常正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:30:03.717

根据您要对输出执行的操作，有两种不同的方法。

第一种是将输出偏移 128，以便您的 -128 到 127 的计算范围映射到 0 到 255。

第二个是钳制负值，使它们都等于零。

# silverlight - DevExpress 文本编辑

> ID：13226395
> 
> 赞同：0
> 
> 时间：2012-11-05T05:26:37.493
> 
> 标签：silverlight, devexpress, textedit

我有一个在 Silverlight 中使用的 Dev Express TextEdit，由于某种原因，除非我的鼠标悬停在文本编辑上，否则我无法在此文本编辑中输入数据。

即使文本编辑中的插入符号闪烁，我也无法输入数据，除非我将鼠标移到该控件上。

只要文本编辑中的插入符号闪烁，我就想输入数据。

任何想法可能是错误的或解决方法？

# python - 通过 XML 文件标签读取数据并在输出到 Outlook 时插入换行符

> ID：13226398
> 
> 赞同：0
> 
> 时间：2012-11-05T05:26:46.043
> 
> 标签：python

我在一个 XML 文件中有以下数据，我正在使用下面提到的 python 代码读取这些数据，然后将其写入 Outlook，当它写入 Outlook 时，我看到所有数据都打印在一行中。我想在之后打印一行另外，我尝试在每行末尾的 xml 文件中使用“br”标签，将每一行包裹在“br”和“/br”周围，但似乎没有任何效果，有什么建议吗？XML

```
<rel_notes>
    1.)Please move to this build for all further test and development 
    activities .
    2.)Please use this as a basebuild to verify 
    compilation and sanity
    3.)Any CL that nees to be integrated must 
    have a CL
</rel_notes> 
```

Python代码

```
from xml.etree import cElementTree as etree
tree = etree.parse(file)
Releasenotes = ('\n'.join(elem.text for elem in tree.iter('rel_notes'))) 
```

输出

```
Release notes: 1.)Please move to this build for all further test and development activities 2.)Please use this as a basebuild to verify compilation and sanity 3.)Any CL that nees to be integrated must have a CL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:50:49.457

我不使用标准的 XML Python 库，但[`lxml`](http://lxml.de/)它更强大（支持 XPath 等）。看起来它基本上可以按您的意愿工作：

```
>>> s = """<rel_notes>
    1.)Please move to this build for all further test and development 
    activities .
    2.)Please use this as a basebuild to verify 
    compilation and sanity
    3.)Any CL that nees to be integrated must 
    have a CL
</rel_notes>"""
>>> from lxml import etree
>>> root = etree.fromstring(s)
>>> root.text
'\n    1.)Please move to this build for all further test and development \n    activities .\n    2.)Please use this as a basebuild to verify \n    compilation and sanity\n    3.)Any CL that nees to be integrated must \n    have a CL\n'
>>> print root.text

    1.)Please move to this build for all further test and development 
    activities .
    2.)Please use this as a basebuild to verify 
    compilation and sanity
    3.)Any CL that nees to be integrated must 
    have a CL

>>> 
```

# sql - 如何编写返回“介于”的查询以返回字母数据，而不仅仅是数字？

> ID：13226399
> 
> 赞同：2
> 
> 时间：2012-11-05T05:26:51.717
> 
> 标签：sql, sql-server

我有一张`Daily_account`桌子：

```
customer_id    account_id            current_balance

1                 D1                       200
2                 d2                       300
3                 d10                      400
4                 d100                     500
5                 d101                     600 
```

现在我有一个查询：

```
select customer_id,account_id,current_balance
from daily_account
where account_id between 'D1' and'D100' 
```

它给了我 D1、D10、D100 账号的输出，但我想得到每个账号的输出。如何获得 D1 和 d100 之间的每个帐户的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:36:11.020

经过更多研究后，我发现一个函数是 cast 函数，它给了我答案....

```
select  customer_id, account_id,current_balance  from daily_account 
where cast(right(Account_id,(length(account_id)-1)) AS unsigned) 
between '1' and'100' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:37:40.657

上述代码段中的 between 语句使用的是字符串，这与数字排序不同。

如果 account_id 总是以“D”开头，我们可以将其删除并将其转换为一个数字：

```
SELECT *
, REPLACE(account_id, 'd','0') // just replace
, CAST( REPLACE(account_id, 'd','0') as int) // now convert to int
FROM daily_account 
```

并在两者之间使用它，像这样使用它

```
SELECT customer_id,account_id,current_balance
FROM daily_account
WHERE 
CAST( REPLACE(account_id, 'd','0') as int) between 1 and 100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T05:38:05.520

如果一切都以一个字符开始，您可以执行以下操作：

```
SELECT * FROM (
SELECT customer_id
     , CAST(REPLACE(account_id,'d','') AS int) account_id
     , current_balance
FROM daily_account) tbl
WHERE account_id between '1' and'100' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T05:38:12.127

一个技巧是像这样删除 account_id 中的非数字：

```
SELECT * FROM Daily_account WHERE CAST(REPLACE(account_id,'D','') AS INT) BETWEEN 1 AND 10 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T05:39:06.220

```
select customer_id,account_id,current_balance
from daily_account
where CAST(replace(account_id, 'D', '') as int) between 1 and 100 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T06:40:51.887

您的回答似乎暗示您希望解决方案可以使用各种前缀，而不仅仅是`'D'`. 如果是这种情况，请考虑以下替代方案：

```
SELECT customer_id, account_id, current_balance
FROM daily_account
WHERE STUFF(account_id, 1, 1, '') between 1 and 100
; 
```

以上是 SQL Server，但由于您的回答似乎也暗示您正在使用 MySQL，因此这里有一个 MySQL 等价物：

```
SELECT customer_id, account_id, current_balance
FROM daily_account
WHERE INSERT(account_id, 1, 1, '') between 1 and 100
; 
```

# php - 从 $_POST 中提取数组数据

> ID：13226402
> 
> 赞同：0
> 
> 时间：2012-11-05T05:26:58.543
> 
> 标签：php, arrays, loops, foreach, merge

我有两个 MYSQL 表 'Piece' 和 'Order1'

在 PHP 中，我想遍历 $_POST 数组中的每个订单（以及其中的部分）并将其存储在我的数据库中。

我试图做一个while循环来存储每个单独的订单，但无法获取每个订单下的碎片。我在想也许这不是要走的路。

如果有人给我一个例子或建议，那就太好了。

```
 [order] => Array
            (
                [details] => Array
                    (
                        [0] => Array
                            (
                                [order1_itemcode] => 
                                [order1_description] => 
                                [order1_itemprice] => 
                                [order1_packagetype] => 0
                                [pieces] => Array
                                    (
                                        [0] => Array
                                            (
                                                [piece_length] => 235
                                                [piece_width] => 235
                                                [piece_height] => 235
                                                [piece_unittype] => cm
                                                [piece_actualweight] => 
                                                [piece_weighttype] => kg
                                            )

                                        [1] => Array
                                            (
                                                [piece_length] => 346
                                                [piece_width] => 346
                                                [piece_height] => 346
                                                [piece_unittype] => cm
                                                [piece_actualweight] => 
                                                [piece_weighttype] => kg
                                            )

                                    )

                            )

                        [1] => Array
                            (
                                [order1_itemcode] => 
                                [order1_description] => 
                                [order1_itemprice] => 
                                [order1_packagetype] => 0
                                [pieces] => Array
                                    (
                                        [0] => Array
                                            (
                                                [piece_length] => 46
                                                [piece_width] => 346
                                                [piece_height] => 346
                                                [piece_unittype] => cm
                                                [piece_actualweight] => 
                                                [piece_weighttype] => kg
                                            )

                                        [1] => Array
                                            (
                                                [piece_length] => 346
                                                [piece_width] => 223
                                                [piece_height] => 235
                                                [piece_unittype] => cm
                                                [piece_actualweight] => 
                                                [piece_weighttype] => kg
                                            )

                                    )

                            )

                    )

            ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:33:20.287

尝试这个 ：

```
 foreach ($_POST['order']['details'] as $detail)
   {
       foreach($detail['pieces'] as $pieces)
       {
          //store($pieces['piece_length']);
          //store($pieces['piece_width']);
          //store($pieces['piece_height']);
          //store($pieces['piece_unittype']);
          //store($pieces['piece_actualweight']);
          //store($pieces['piece_weighttype']);
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:36:35.713

试试[array_walk_recursive()](http://www.php.net/manual/en/function.array-walk-recursive.php)函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:47:07.057

使用会更好

```
 foreach($_POST['order']['details'] as $key=>$order)
 {
    if(is_array($order['pieces']) && $key=='pieces')
    {
      foreach($order['pieces']) as $pices)
      $insert[]=implode(',',$pices);//array for later insert,you should do necessary validation and should deal with mysql injection
    }

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T05:47:30.613

尝试这个

```
foreach($orders as $order)
{
   //store($order)

   $pieces = $order['pieces'];
   foreach($pieces as $a_pieces)
   {
      //store($a_pieces);
   }
} 
```

# python - 如何在 PyQt4 中使用 QInputMask 和 QDoubleValidator？

> ID：13226408
> 
> 赞同：2
> 
> 时间：2012-11-05T05:27:39.067
> 
> 标签：python, pyqt4, qlineedit, maskedinput

我在 PyQt4 中创建了一个 QLineEdit lineEdit_X_Position 输入。

我用 self.ui.lineEdit_X_Position.setInputMask("00,000.00;_") 创建了一个输入掩码。

我将 lineEdit 设置为默认值 self.ui.lineEdit_X_Position.setText( format('6543.21', ",.2f") )。

当我查看 UI 时，它显示 X_Position 为“6_,543.21”而不是“_6,543.21”。我尝试使用 self.ui.lineEdit_X_Position.setText( format('6543.21', "9.2f") ) 设置默认值，但结果 = "65,43_.21"。

当默认值为“543.21”时，情况会变得最差。我得到的结果为“54,3__.21”。

这是 QInputMask 中的错误吗？如何使用我想要的 QInputMask 格式获得正确的结果，用户只能输入数字？

另外，如果我想验证双重结果，如何使用 QDoubleValidator？有效范围是 0.00 到 10,000.00。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:05:10.330

中没有错误`QInpuMask`。

您设置的掩码允许以多种不同方式输入某些值——*所有这些方式都同样有效*。例如，用户可以将值“543.2”输入为`5_,_4_3._2`or `__,543.2_`、 or`_5,4__3._2`等​​。

当以编程方式输入这样的值时，Qt 无法猜测各种可能性中的哪一种是“首选”的，而只是按照它们通常键入的方向填充空白。因此，您看到的输出是正确的，并且完全符合预期。

但是，鉴于您试图将值限制*为某个范围内的数字*而不是*固定模式中的字符，*那么输入掩码真的是正确的选择吗？

A[`QDoubleSpinBox`](http://doc.qt.nokia.com/4.8-snapshot/qdoublespinbox.html)似乎更合适：

```
self.spinXPosition = QtGui.QDoubleSpinBox(self)
self.spinXPosition.setRange(0, 10000)
self.spinXPosition.setDecimals(2) 
```

# drupal-6 - 如何在drupal6的页脚中添加js文件？

> ID：13226410
> 
> 赞同：0
> 
> 时间：2012-11-05T05:27:48.707
> 
> 标签：drupal-6

我想在页脚中包含一个 javascript 文件？我尝试这样，但它不包括在页脚中。

```
drupal_add_js(drupal_get_path('module','book') . '/js/visitsChart.js', array(
'scope' => 'footer')); 
```

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:25:37.480

它应该是

```
drupal_add_js(drupal_get_path('module','book') . '/js/visitsChart.js','module','footer'); 
```

# loops - 内部带有 if 语句的 for 循环语法

> ID：13226416
> 
> 赞同：2
> 
> 时间：2012-11-05T05:28:51.393
> 
> 标签：loops, syntax, if-statement, for-loop, coding-style

使用这样的 if 语句编写 for 循环的普遍共识是：

```
for (int i = 0; i < hi; i++) {
    if (some invalid condition) {
        continue;
    }

    if (another invalid condition) {
        continue;
    }

    //do stuff here after passing all the invalid conditions
} 
```

与

```
for (int i = 0; i < hi; i++) {
    if (valid condition1 && valid condition 2 && ...) {
        //do stuff
} 
```

在我看来，第一种编写方式更简洁，更便于调试，尽管它占用了更多行。我的主要问题是，以第二种方式编写它是否有任何优势。即使只有一个 if 语句，似乎以第一种方式编写它会更好，以便将来更容易维护/调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:54:01.507

循环中的“CONTINUE”非常罕见。在大多数情况下，在循环中遇到无效情况自然会导致“BREAK”。但是，您的示例没有任何问题，如果这符合您的业务逻辑，它可能确实更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:07:47.203

有些人不喜欢`continue`，因为它实际上是一个`goto`. 例如，考虑：

```
for (int i = 0; i < hi; i++) {
    ....
    do_this_for_each_full_iteration();
} 
```

如果`....`包含任何`continue`语句，`do_this_after_each_full_iteration()`将被绕过。

这些人往往是不喜欢`return`某个功能中间的人。

# php - 如何在php中检查url是否存在

> ID：13226417
> 
> 赞同：4
> 
> 时间：2012-11-05T05:28:55.470
> 
> 标签：php, url, file-exists

我想检查 url `http://example.com/file.txt` 在 php 中是否存在。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T05:30:51.607

```
if(! @ file_get_contents('http://www.domain.com/file.txt')){
  echo 'path doesn't exist';
} 
```

这是最简单的方法。如果您不熟悉`@`，那将指示函数返回 false 否则它会抛出错误

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T05:31:41.067

将使用 PHP curl 扩展：

```
$ch = curl_init();                                  // set up curl
curl_setopt( $ch, CURLOPT_URL, $url );              // the url to request
if ( false===( $response = curl_exec( $ch ) ) ){    // fetch remote contents
    $error = curl_error( $ch );                  
    // doesn't exist
}
curl_close( $ch );                                  // close the resource 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:32:17.690

```
$filename="http://example.com/file.txt";    

if (file_exists($filename)) {
   echo "The file $filename exists";
} else {
   echo "The file $filename does not exist";
} 
```

或者

```
if (fopen($filename, "r"))
{
   echo "File Exists"; 
}
else
{
   echo "Can't Connect to File";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T05:33:33.977

[在Ping 站点](https://stackoverflow.com/questions/1239068/ping-site-and-return-result-in-php)上尝试此功能并以 PHP 形式返回结果。

```
function urlExists($url=NULL)  
    {  
        if($url == NULL) return false;  
        $ch = curl_init($url);  
        curl_setopt($ch, CURLOPT_TIMEOUT, 5);  
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 5);  
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  
        $data = curl_exec($ch);  
        $httpcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);  
        curl_close($ch);  
        if($httpcode>=200 && $httpcode<300){  
            return true;  
        } else {  
            return false;  
        }  
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-21T09:57:20.577

我同意回复，我通过这样做获得了成功

```
$url = "http://example.com/file.txt";       
if(! @(file_get_contents($url))){
    return false;
}
$content = file_get_contents($url);
return $content; 
```

您可以按照代码检查文件是否存在于该位置。

# javascript - 我使用 jQuery 从我的数据库中检索了一个日期。检索到的值为“2012-01-10 00:00:00”（包括引号）

> ID：13226422
> 
> 赞同：0
> 
> 时间：2012-11-05T05:29:45.313
> 
> 标签：javascript, jquery

我无法执行日期比较操作，因为它是作为字符串检索的。我怎样才能做到这一点。我尝试使用以下语法，但没有奏效。

```
DateUtils.convertFormat(emp_date_start,"MM/dd/yyyy","yyyy-MM-dd"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:40:29.917

首先将您的字符串转换为日期格式，然后进行比较：-

```
 var dateCon=new Date(emp_date_start);
 //Now Compare :-
 if(dateCon > new_date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:51:22.620

JSON.stringify() 并不是从数据库中获取它的全部要求。

只是我用过

```
 var new_date = consultantInfo['0']['date_start']; 
```

从我用来从数据库中检索的 ajax 对象中获取。

# java - 在 eclipseIndigo 中运行 Web 应用程序时出错

> ID：13226426
> 
> 赞同：1
> 
> 时间：2012-11-05T05:29:58.370
> 
> 标签：java

当我在 eclipse indigo 中运行 servlet Web 应用程序时，tomcat apache 服务器未启动，它将在控制台中打印以下错误。

```
 Nov 5, 2012 10:51:11 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre1.7.0\bin;.;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre1.7.0/bin/client;C:/Program Files/Java/jre1.7.0/bin;C:/Program Files/Java/jre1.7.0/lib/i386;C:\oraclexe\app\oracle\product\11.2.0\server\bin;;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Java\jdk1.7.0\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files\Common Files\Nero\Lib\;D:\eclipseIndigo;
Nov 5, 2012 10:51:11 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:ServletDemo' did not find a matching property.
Nov 5, 2012 10:51:11 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:DemoPro' did not find a matching property.
Nov 5, 2012 10:51:12 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8085"]
Nov 5, 2012 10:51:12 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Nov 5, 2012 10:51:12 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 2253 ms
Nov 5, 2012 10:51:12 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Nov 5, 2012 10:51:12 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.21
Nov 5, 2012 10:51:13 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:621)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148)
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:41:44.467

您剪切/粘贴了很多错误消息...但我认为您跳过了重要的部分:)

看看这个链接：

*   [tomcat 和 netbeans 部署错误](https://stackoverflow.com/questions/8152999/tomcat-and-netbeans-deployment-errors)

1）他们正在使用 NetBeans（您正在使用 Eclipse——但这可能并不重要）

2）他们得到了与你上面显示的完全相同的回溯：

```
...
16 Νοε 2011 4:02:16 μμ org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:152)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
    .... 
```

3）但他们也展示了回溯的重要部分：

```
Caused by: java.lang.NoSuchMethodError: javax.servlet.ServletContext.getSessionCookieConfig()Ljavax/servlet/SessionCookieConfig;
    at org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1308)
    at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1343)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896) 
```

4) 这个例子的根本原因是使用的代码`getSessionCookieConfig()`是在 Java 6 中引入的，但他们无意中部署了一个旧的、Java6 之前的 servlet.jar 版本。解决方案是仔细检查他们的所有部署，确保部署了正确的 .jar。

'希望有帮助..

# c# - 使用包含 MySQL 数据库表的 c# 填充下拉列表

> ID：13226432
> 
> 赞同：0
> 
> 时间：2012-11-05T05:31:16.603
> 
> 标签：c#, asp.net, mysql, drop-down-menu

我正在尝试使用 MySQL 数据库中的信息填充以下下拉列表。

```
<asp:DropDownList ID="DeleteUsersList" runat="server" AutoPostBack="True" 
    onselectedindexchanged="DeleteUsersList_SelectedIndexChanged"></asp:DropDownList> 
```

我正在为包含下拉列表的 html 使用 .aspx 源文件。我还有 .aspx.cs 文件，其中包含 C# 代码，并且我正在使用 MySQL 服务器作为数据库。

基本上，我试图在页面加载时使用 ac# 连接到 MySQL 数据库来填充下拉列表。我无法找到有关此信息的任何具体信息，因此如果有人可以帮助我，将不胜感激。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:21:44.343

您可以将 DropDownList 绑定到从 MYSQL 数据库获得的数据源（DataTable、List、DataSet、SqlDataSource 等）。

例如，如果您想使用 DataTable：

```
private string GetConnection()
 {
     return "DRIVER={MySQL ODBC 3.51 Driver};Server=localhost;Database=testdatabase";
 }

    private void LoadUsers()
    {

     DataTable rt = new DataTable();
     DataSet ds = new DataSet();
     OdbcDataAdapter da = new OdbcDataAdapter();
     OdbcConnection con = new OdbcConnection(GetConnection());
     OdbcCommand cmd = new OdbcCommand(sql, con);
     da.SelectCommand = cmd;
     da.Fill(ds);         
     rt = ds.Tables[0];

      DeleteUsersList.DataSource = rt;
      DeleteUsersList.DataTextField = "UserName";
      DeleteUsersList.DataValueField = "UserID";
      DeleteUsersList.DataBind();

     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:01:39.567

您好，请查看以下链接以了解 asp.net 中的下拉示例

[下拉列表 asp.net](http://www.aspdotnet-suresh.com/2012/05/aspnet-dropdownlist-control-examples-in.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:49:02.790

针对您的 MySQL 连接执行“显示表”。这将为您提供可用表的列表。

# android - Android - 如何隐藏/显示进度条 onclick

> ID：13226436
> 
> 赞同：0
> 
> 时间：2012-11-05T05:31:36.443
> 
> 标签：android, eclipse, sdk

我试图在单击按钮时显示进度条。当我测试应用程序时，它会强制关闭/停止。在添加进度条代码之前，我的应用程序运行良好。

如果这很重要，我也正在使用切换按钮，并且我希望旋转进度条不是对话框。

有什么帮助吗？

这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    button = (Button) findViewById(R.id.buttonFlashlight);
    Context context = this;
    PackageManager pm = context.getPackageManager();

    if (!pm.hasSystemFeature(PackageManager.FEATURE_CAMERA)) {
        Log.e("err", "Device has no camera!");
        return;
    }

    camera = Camera.open();
    final Parameters p = camera.getParameters();

    button.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {

            if (isLighOn) {

                progressBar1.setVisibility(View.INVISIBLE);

                final MediaPlayer mp1=MediaPlayer.create(getBaseContext(), R.drawable.click);  
                mp1.start(); 

                Log.i("info", "torch is turn off!");
                p.setFlashMode(Parameters.FLASH_MODE_OFF);
                camera.setParameters(p);
                camera.stopPreview();
                isLighOn = false;

                WindowManager.LayoutParams params = getWindow().getAttributes();
                params.screenBrightness = 1.0f;
                getWindow().setAttributes(params);

            } else {

                progressBar1.setVisibility(View.VISIBLE);

                final MediaPlayer mp1=MediaPlayer.create(getBaseContext(), R.drawable.click);  
                mp1.start(); 

                Log.i("info", "torch is turn on!");
                p.setFlashMode(Parameters.FLASH_MODE_TORCH);
                camera.setParameters(p);
                camera.startPreview();
                isLighOn = true;

                WindowManager.LayoutParams params = getWindow().getAttributes();
                params.screenBrightness = 0.05f;
                getWindow().setAttributes(params);
            }
        }
    });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:54:11.720

```
 ProgressDialog progressDialog = new ProgressDialog(this);
    progressDialog.setProgressStyle(R.style.NewDialog);
    progressDialog.setMessage("Loading..."); 
```

将以下内容粘贴到您的 styles.xml 新对话框中：

```
<style name="NewDialog">
<item name="android:windowFrame">@null</item>
<item name="android:windowBackground">@android:color/transparent</item>
<item name="android:windowIsFloating">true</item>
<item name="android:windowContentOverlay">@null</item>
<item name="android:windowTitleStyle">@null</item>
<item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
<item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
<item name="android:backgroundDimEnabled">false</item>
<item name="android:background">@android:color/transparent</item>
</style> 
```

当你想显示时，你可以使用progressDialog.show()，隐藏你可以使用progressDialog.dismiss()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:41:07.517

试试这个方法，我不确定它是否对你有帮助

```
b1.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        final ProgressDialog progress = ProgressDialog.show(THENAMEOFYOURACTIVITYCLASS.this,
                ProgressTitle, ProgressMessage, true, false);

        new Thread(new Runnable() {
            public void run() {
            loadFeed();
            progress.cancel();
            }
        }).start();
    }
});

Be careful about what loadFeed(statutory); do. Because now is working inside a THREAD and Threads con not modify UI, If this is the case then you should do something like this:

b1.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        final ProgressDialog progress = ProgressDialog.show(THENAMEOFYOURACTIVITYCLASS.this,
                ProgressTitle, ProgressMessage, true, false);

        new Thread(new Runnable() {
            public void run() {
            loadFeed(); //just load data and prepare the model
            runOnUiThread(new Runnable() {
                             @Override public void run() {
                               //here you can modify UI here
                               //modifiying UI element happen here and at the end you cancel the progress dialog
                               progress.cancel();
                         }
                    }); // runOnUIthread

            }
        }).start();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:03:34.463

尝试以下代码...

```
handler1 = new Handler()
{
            @Override
            public void handleMessage(Message msg) 
            {
                switch(msg.what)
                {
                case 1:
                    static_class.digi_pd = ProgressDialog.show(Create_Digitizing_Job.this, "Loading...", "Please Wait..", true,false);
                    static_class.digi_pd.setCancelable(false);
                    break;
                case 2:
                    static_class.digi_pd.dismiss();
                    break;

                }
            }
        };

        thread1 = new Thread()
          {
                @Override
                public void run()
                {   
                       try
                        {  

                          handler1.sendEmptyMessage(1);

                    // write your code here....

                         handler1.sendEmptyMessage(3);
                         handler1.sendEmptyMessage(2);

                        } 
                       catch (Exception e) 
                       {
                           Log.w("thread error...",""+e);
                           //e.printStackTrace();
                       }   

             }

         };
        thread1.start(); 
```

# c++ - 将我的代码拆分为函数

> ID：13226439
> 
> 赞同：0
> 
> 时间：2012-11-05T05:31:43.667
> 
> 标签：c++, arrays, function, multidimensional-array

我需要用 X 标记用户输入的座位，然后用标记的座位再次显示飞机布局（数组）并每次都重复。这是我的代码，我有点卡住了。如果可以的话，请帮我把它分成两个函数：第一个函数应该打印出数组，第二个函数应该接受用户输入并标记座位，然后调用前一个函数来刷新显示。

我的输出应该是这样的：

> ```
> 1 X B C D
> 
> 2 A X C D
> 
> 3 A B C D
> 
> 4 A B X D
> 
> 5 A B C D
> 
> 6 A B C D
> 
> 7 A B C D 
> ```

我的代码是：

```
 #include <iostream>

    using namespace std;

    int main ()
    {
        int rowNumber=-1, columnNumber=-1;
        char columnLetter;
        char airplane[7][4] = {{'A', 'B', 'C', 'D'},
         {'A', 'B', 'C', 'D'},
         {'A', 'B', 'C', 'D'},
         {'A', 'B', 'C', 'D'},
         {'A', 'B', 'C', 'D'},
         {'A', 'B', 'C', 'D'},
         {'A', 'B', 'C', 'D'}};

         for (int i=0; i<7; i++)
         { 
             cout<<i+1<<"\t";

             for (int j=0; j<4; j++)
             {
                 cout<<airplane[i][j]<<"\t";   
             }

             cout<<"\n";
         }

       do
       {
       cout<<"Enter row number:"<<endl;
       cin>>rowNumber;
       }while ((rowNumber<1)||(rowNumber>7));

       do
       {
       cout<<"Enter column letter:"<<endl;
       cin>>columnLetter;
       }while (columnLetter!='A'&&columnLetter!='B'&&columnLetter!='C'&&columnLetter!='D');

       if (columnLetter=='A')
       {
          columnNumber=0;
       }
       else if (columnLetter=='B')
       {
          columnNumber=1;
       }
       if (columnLetter=='C')
       {
          columnNumber=2;
       }
       else if (columnLetter=='D')
       {
          columnNumber=3;
       }

       airplane[rowNumber][columnNumber]='X';

           system ("PAUSE");
           return 0;
    } 
```

我试过了，但它没有编译，所以我不能移动到下一个打印标记座位的函数：

```
#include <iostream>

using namespace std;
void fillArray (char array[][4]);

int main ()
{
   char airplane[7][4] = {{'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'}};

fillArray (airplane[][4]);     

       system ("PAUSE");
       return 0;
}

void fillArray (char array[][4])
{

     for (int i=0; i<7; i++)
     { 
         cout<<i+1<<"\t";

         for (int j=0; j<4; j++)
         {
             cout<<array[i][j]<<"\t";   
         }

         cout<<"\n";
     }
     return;
}

    enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:55:49.137

第 16 行应`fillArray (airplane);`改为`fillArray (airplane[][4]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:10:08.170

```
#include <iostream>

using namespace std;

void fillArray (char array[][4]);
void getSeat (char array[][4]);

int main ()
{
   char airplane[7][4] = {{'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'},
     {'A', 'B', 'C', 'D'}};

     fillArray (airplane);
     getSeat (airplane);
     fillArray (airplane);

       system ("PAUSE");
       return 0;
}

void fillArray (char array[][4])
{

     for (int i=0; i<7; i++)
     { 
         cout<<i+1<<"\t";

         for (int j=0; j<4; j++)
         {
             cout<<array[i][j]<<"\t";   
         }

         cout<<"\n";
     }
     return;
}

void getSeat (char array[][4])
{
     int rowNumber=-1, columnNumber=-1;
    char columnLetter;
  do
   {
      cout<<"Enter row number:"<<endl;
      cin>>rowNumber;
      rowNumber=rowNumber-1;
   }while ((rowNumber<1)||(rowNumber>7));

   do
   {
      cout<<"Enter column letter:"<<endl;
      cin>>columnLetter;
   }while (columnLetter!='A'&&columnLetter!='B'&&columnLetter!='C'&&columnLetter!='D');

   if (columnLetter=='A')
   {
      columnNumber=0;
   }
   else if (columnLetter=='B')
   {
      columnNumber=1;
   }
   if (columnLetter=='C')
   {
      columnNumber=2;
   }
   else if (columnLetter=='D')
   {
      columnNumber=3;
   }

   array[rowNumber][columnNumber]='X';
   return;
} 
```

# java - pushMatrix() / popMatrix() 是否能够堆叠？

> ID：13226442
> 
> 赞同：-1
> 
> 时间：2012-11-05T05:31:55.930
> 
> 标签：java, opengl

如果你不明白我在问什么，我的意思是——

```
glPushMatrix();
glPushMatrix();
glPushMatrix();
glPushMatrix(); // push matrix 4 times
glTranslatef(...);
//do stuff
glPopMatrix(); // pull it up 1, so we can do more stuff
glTranslatef(...);
// do stuff
glPopMatrix(); // and again, and again, etc
glTranslatef(...);
// do stuff
glPopMatrix();
glTranslatef(...);
// do stuff
glPopMatrix(); 
```

一切还会顺利吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:52:10.123

是的，`glPushMatrix`将当前矩阵模式 ( `GL_PROJECTION`,`GL_MODELVIEW`等) 的当前矩阵推入矩阵堆栈，`glPopMatrix`将第一个矩阵弹回。每个矩阵模式都有单独的堆栈。

看起来没有足够旧的官方 OpenGL 手册页来提供有关此方法的文档，但该站点是第一个结果之一，并且包含相同的文本： http: [//www.manpagez.com/man/ 3/glPushMatrix/](http://www.manpagez.com/man/3/glPushMatrix/)

根据该页面，看起来`GL_MODELVIEW`堆栈保证至少有 32 个矩阵深度，而所有其他矩阵至少有 2 个深度。在现代卡片上，它们可能要高得多。`glGet`您可以通过使用适当的堆栈深度参数（即`GL_MODELVIEW_STACK_DEPTH`or`GL_PROJECTION_STACK_DEPTH`等​​）调用来轮询确切的数字。

此外，矩阵堆栈很久以前就被弃用了，取而代之的是用户管理的矩阵。如果您正在编写一个小程序或只是学习，使用已弃用的 OpenGL 完全没问题。只是觉得为了 OpenGL 矩阵的完整性，我应该提到它。

# sql - 获取最新更新的记录

> ID：13226450
> 
> 赞同：1
> 
> 时间：2012-11-05T05:32:36.040
> 
> 标签：sql, sql-server-2008

我在 SQL Server 2008 中有一个“观察”表。该表有一个 locationId 列用于一组地理位置、几列用于观察详细信息和一个用于最新更新日期的列。

每周都会为每个位置添加新的观察记录。所以一个位置在表中出现了很多次。

我想要实现的是能够获得每个位置的最新观察记录。

任何人都可以提供任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T05:38:16.393

```
 select * from observation where date=(select max(date) from observation) 
```

或者

```
select top 1 * from observation order by date desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:26:24.753

```
select a.* from observations a inner join 
(select locationid ,max(updateddate) dates  from observations
group by locationid) b
on a.locationid=b.locationid
and a.updateddate=b.dates 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:36:53.797

运行查询

```
select * from Observation 
group by location 
order by viewdate desc 
```

还请提供有关表格的完整详细信息以及您想要获得的内容。

**编辑：**反引号已删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-03T11:17:40.760

使用如下所示的 Getdate 函数。

```
select * from TBL_MP_QC_CustomerWiseCOA_Master  order by getdate() desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-30T05:32:01.677

将数据类型为 [timestamp] 的列添加到表中，执行以下代码：

```
select top(10) * from yourtablename order by columanname desc 
```

**注意**：columanname 应该是您添加的带有时间戳类型的列

# iphone - 保存 UIScrollView 位置和缩放

> ID：13226453
> 
> 赞同：0
> 
> 时间：2012-11-05T05:32:54.447
> 
> 标签：iphone, ios, ipad, uiscrollview

我有一个`UIScrollView`显示大地图的。我已经能够确定如何保存当前地图位置的内容偏移量，但是，它仅在地图完全放大时才有效。这对我来说很有意义，因为内容偏移量将完全不同zoomLevel 是。

我曾希望解决方案就像设置 zoomLevel 然后`contentOffset`在加载时一样简单，但是我无法完成这项工作。该应用程序正确地将 contentOffset 和 zoomLevel 保存到`NSUSerDefaults`，但是当应用程序加载时我无法`scrollView`缩放到这些值。

有没有人成功地做到这一点？

# javascript - iframe 加载 utf16 文本文件时无法在 IE 上触发 window.onload 事件

> ID：13226462
> 
> 赞同：0
> 
> 时间：2012-11-05T05:33:41.327
> 
> 标签：javascript, html, iframe

我目前遇到一个问题，即当网页包含 iframe 加载 utf16 文本文件时。该页面无法在 IE7 和 8 上触发 window.onload 事件。我也尝试了 jQuery 方法 $(document).ready()，但它也无法正常工作。Firefox 和 chrome 运行良好。

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=utf-16" />
<script>
window.onload = function () {
  alert("test");
};
</script></head>
<body>
<iframe src="http://localhost:8080/test/utf16.txt"  ></iframe>
</body></html> 
```

未触发 window.onload 事件。在这种情况下，如何在 IE 上触发“onload”事件。谢谢你。

# android - 从 Android 平板电脑访问硬盘内容

> ID：13226463
> 
> 赞同：0
> 
> 时间：2012-11-05T05:33:42.747
> 
> 标签：android, usb, storage

我的外置硬盘中有超过 500GB 的音乐内容。我需要从我的 android 应用程序中访问它，我该怎么做。
1.我可以将USB硬盘直接连接到平板电脑吗？和访问？或者
2.如果我在本地网络中共享内容，我可以像访问 windows 中的共享文件夹一样从 Wifi 访问它吗？
或任何其他建议请..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:52:49.960

您应该能够将其直接连接到平板电脑（必要时使用 USB OTG 适配器）。它应该自动安装在`/sdcard/usbStorage`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:57:51.487

如果您的平板电脑缺少 USB 主机端口并且由于某些特定于平板电脑的限制（我遇到过这种情况）而导致 OTG 适配器无法工作，那么免费的 ES File Explorer 应用程序将允许您[访问网络共享](http://www.techrepublic.com/blog/tablets/connect-android-to-windows-and-samba-shared-directories/1262)。

# blackberry - 无法为 eclipse helios 安装 blackberry webworks 插件

> ID：13226468
> 
> 赞同：0
> 
> 时间：2012-11-05T05:34:31.700
> 
> 标签：blackberry, blackberry-webworks

在 eclipse helios 中安装 blackberry webworks 插件时出现以下错误：

> 无法完成安装，因为找不到一项或多项所需项目。
> 
> **正在安装的软件**：BlackBerry WebWorks SDK 2.0.0.201103231828-18 (net.rim.browser.tools.wcpc.feature.feature.group 2.0.0.201103231828-18)
> 
> **缺少要求**：BlackBerry Web Plug-in 2.5.1.201010291444-2 (net.rim.browser.tools.debug 2.5.1.201010291444-2) 需要 'bundle org.eclipse.emf.mapping.ecore2xml [2.5.0,2.6.0) '但找不到
> 
> **不能满足依赖**：
> 
> **来自**：BlackBerry WebWorks SDK Plug-in 2.0.0.201103231828-18 (net.rim.browser.tools.wcpc 2.0.0.201103231828-18)
> 
> **至**：捆绑 net.rim.browser.tools.debug 0.0.0
> 
> **不能满足依赖**：
> 
> **来自**：BlackBerry WebWorks SDK 2.0.0.201103231828-18 (net.rim.browser.tools.wcpc.feature.feature.group 2.0.0.201103231828-18)
> 
> **至**：net.rim.browser.tools.wcpc [2.0.0.201103231828-18]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T01:56:37.657

不再支持 Eclipse 的 BlackBerry 插件（去年已停止使用）。鼓励开发人员继续使用他们最喜欢的 IDE（包括 Eclipse）以及 BlackBerry WebWorks SDK（用于打包）和 Ripple Mobile 模拟器（用于预览和测试）来编辑文件：

[https://developer.blackberry.com/html5/download/](https://developer.blackberry.com/html5/download/)

最后，发布了一个 Ant 构建脚本，可以帮助使事情变得更容易：

[https://github.com/blackberry/BB10-WebWorks-Community-Samples/tree/master/Ant-Build-Script](https://github.com/blackberry/BB10-WebWorks-Community-Samples/tree/master/Ant-Build-Script)

# java - java中的观察者模式，更好的方法？

> ID：13226469
> 
> 赞同：2
> 
> 时间：2012-11-05T05:34:31.760
> 
> 标签：java

下面的代码取自另一篇 SO 帖子，我想知道是否有更好的方法来编写此代码，因为在每个实现的方法结束时有一个通知所有侦听器的循环有点难看。如果这很愚蠢，请原谅我，我是新手`Java`。

注意：我将在接口中实现多个方法，我将实现 5 个方法：

```
import java.util.*;

interface HelloListener {
    public void someoneSaidHello();
}

class Initiater {
    List<HelloListener> listeners = new ArrayList<HelloListener>();

    public void addListener(HelloListener toAdd) {
        listeners.add(toAdd);
    }

    public void sayHello() {
        System.out.println("Hello!!");

        // Notify everybody that may be interested.
        for (HelloListener hl : listeners)
            hl.someoneSaidHello();
    }
}

class Responder implements HelloListener {
    @Override
    public void someoneSaidHello() {
        System.out.println("Hello there...");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:44:19.043

如果有多个方法需要通知所有侦听器，则可以将循环重构为可以从每个通知方法调用的自己的方法。

例如，javax.swing.AbstractButton 的源代码有一个 firestateChanged() 方法，用于通知监听器状态变化等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T05:46:04.893

当我作为学生实现观察者模式时，我将其作为一个抽象类：

```
import java.util.ArrayList;

/**
 * The observer pattern.
 * @author jiman 
 */
public abstract class Observed {

    private ArrayList<Observer> observers;

    public Observed() { views = new ArrayList<Observer>(); }

    public void registerObserver(Observer o) { observers.add(o); }

    public void removeObserver(Observer o) { observers.remove(o); }

    // call this method upon a mutation of the state of this object
    public void notifyObservers() { for (Observer o : observers) o.update(); }

} 
```

观察者将从这个接口继承并编写自己的更新方法。

```
public interface Observer {

    public void update();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T05:39:53.987

JDK 中存在两个类来帮助您执行此操作。

[观察者](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Observer.html)（接口）和[可](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Observable.html)观察者（类）

关于如何使用它们的一个小例子：

```
 class MyView implements Observer {

    public void update(Observable obs, Object x) {
      System.out.println("update(" + obs + "," + x + ");");
    }
  }

  /** The Observable normally maintains the data */
  class MyModel extends Observable {

    public void changeSomething() {
      // Notify observers of change
      setChanged(); // THIS IS IMPORTANT DON'T FORGET IT!
      notifyObservers();
    }
  } 
```

# c# - ASP.NET Ajax Accordion 标头事件

> ID：13226471
> 
> 赞同：3
> 
> 时间：2012-11-05T05:34:38.090
> 
> 标签：c#, asp.net, asp.net-ajax, ajaxcontroltoolkit

在 ASP.NET 4 网站中

当单击 ajax 手风琴标头时，我需要触发服务器端 C# 函数，将标头数据值传递给函数。手风琴是从数据库中填充的。如何创建事件以调用 C# 函数？

```
<ajaxToolkit:Accordion ID="acc1" runat="server" Width="300px" 
     HeaderCssClass="accHeader" ContentCssClass="accContent" CssClass="accMain"
     FadeTransitions="true" SuppressHeaderPostbacks="false" TransitionDuration="250" RequireOpenedPane="false"
     HeaderSelectedCssClass="accSelHeader" FramesPerSecond="40">
        <HeaderTemplate><b><%#DataBinder.Eval(Container.DataItem, "CompanyName") %></b></HeaderTemplate>
        <ContentTemplate>
        <%#DataBinder.Eval(Container.DataItem, "CompanyName") %><br />
        <%#DataBinder.Eval(Container.DataItem, "Street")%><br />
        <%#DataBinder.Eval(Container.DataItem, "City")%><br />
        <%#DataBinder.Eval(Container.DataItem, "StateOfFacility")%><br />
        <%#DataBinder.Eval(Container.DataItem, "ZipCode")%><br />
        <%#DataBinder.Eval(Container.DataItem, "Phone")%><br />
        <%#DataBinder.Eval(Container.DataItem, "URL")%><br />
        </ContentTemplate>
 </ajaxToolkit:Accordion> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:28:36.927

在标题中使用 LinkBut​​ton 并处理 Accordion 的 ItemCommand 事件，如下所示：

```
 <HeaderTemplate>
      <asp:LinkButton runat="server" Text='<%# Eval("CompanyName") %>'  
           CommandName="Select" CommandArgument='<%# (int)Eval("Id")  %>' />
 </HeaderTemplate>

void acc1_ItemCommand(object sender, CommandEventArgs e)
{
    if (e.CommandName == "Select")
    {
        var companyId = e.CommandArgument;
    }
} 
```

请注意，您需要提供公司唯一标识符以区分单击的公司窗格。

# database - 当通过 VBA 在 Access 2007 中的表单上未提及记录的 ID 时，如何获取该记录的 ID？

> ID：13226472
> 
> 赞同：1
> 
> 时间：2012-11-05T05:35:01.697
> 
> 标签：database, forms, ms-access, vba, ms-access-2007

我有一个多项目表格，其中没有提及记录的 ID。我对每一行都有一个按钮，单击该按钮会打开一个包含更多详细信息的新表单。

过去，我为 ID 添加了一个字段，但使其不可见，但这似乎很愚蠢 - ID 是原始查询的唯一字段，所以我应该能够以某种方式纯粹使用代码进行访问。

有人知道怎么做这个吗？如果您需要更多说明，请告诉我。

**更新**

我这样做的最快方法是在表单中为查询中的字段添加一个字段，将其称为查询字段名称，将其全部保存并关闭，然后删除该字段。虽然我当然宁愿能够在没有任何事先废话的情况下做 Me.ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:52:25.563

如果表单的记录源包含一个名为“ID”的字段，您可以访问该字段的值作为表单的属性：

```
Debug.Print Me.ID 
```

这在没有绑定到该字段的控件的情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T00:02:51.517

在某些情况下，您可能必须引用 Me!ID，而不是 Me.ID，因为该字段尚未添加为表单的属性（讨论：[http ://tek-tips.com/viewthread.cfm?qid =1127364](http://tek-tips.com/viewthread.cfm?qid=1127364) )

当您将 ID 添加为控件然后将其删除时，它会成为表单的属性，这就是您的变通方法起作用的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:50:31.913

您可能需要编辑记录源/查询..并将该列添加为可用字段。

# c - 虽然循环总是在它完成之前冻结

> ID：13226474
> 
> 赞同：2
> 
> 时间：2012-11-05T05:35:07.553
> 
> 标签：c

我有这个嵌套的while循环，从文件中读取行并创建一个邻接列表。问题似乎不在于内部循环，因为它通过了那个循环，但它在将文件中的最后一个点保存到邻接列表之前就停止了运行。我已经用几个不同的文件（不同大小）进行了测试，它总是在最后一点之前。我一生都无法弄清楚为什么会这样做，但也许其他人可以帮助我？

文件中的行很好地存储到 current->next 数组中，它只是我遇到问题的 newPt 邻接列表的最后一个。事实上，这是最后一次进入 while 循环，它似乎无法执行最后几行。

```
while(fscanf(fptr, "%d %d %d", &u, &v, &w) != EOF) { //read from file
    current->next=malloc(sizeof(struct line));
    current=current->next;
    current->u=u;
    current->v=v;
    current->w=w;
    current->useful=0;
    //add point to adjacency list
    currentPt=aList[u];
    while((currentPt->adj)!=NULL) {
        currentPt=currentPt->adj;
    }
    newPt=malloc(sizeof(struct adjacent));
    newPt->x=v;
    newPt->adj=NULL;
    currentPt->adj=newPt;
} 
```

这些是我正在使用的结构，如果有帮助的话：

```
 struct line {
        int u;
        int v;
        int w;
        int useful;
        struct line *next;
    };
    struct adjacent {
        int x;
        int onqueue;
        struct adjacent *adj;
    };
    struct adjacent *aList[num+1];
    struct line *current;
    struct adjacent *currentPt; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:52:29.460

您需要`fscanf`更仔细地检查返回值。`EOF`如果它在文件末尾，它将返回。但您需要它返回 3，表示 3 次成功转换。`0`例如，如果您的文件以空行结尾，它可能会返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:03:49.450

为了调试，您可以添加用于打印中间状态的行：

添加

```
printf("%d %d %d %p &p\n", u, v, w, current, currentPt); 
```

在外部 while 循环的末尾。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T06:27:12.097

你可以尝试以下方法..

```
while(!feof(fptr))
{
fscanf(fptr, "%d %d %d", &u, &v, &w);
//Rest of your code in while loop
} 
```

让我知道这个是否奏效。

# javascript - Ajax 返回 Partial View 丢失的 Javascript

> ID：13226479
> 
> 赞同：1
> 
> 时间：2012-11-05T05:35:24.633
> 
> 标签：javascript, jquery, ajax, partial-views

我有一个主视图，其主布局包含所有 javascript，即 jQuery DatePicker 控件等。

在这个主视图中，我使用了包含部分视图的 Ajax.BeginForm(.....)。在我的控制器中，如果验证失败，它将返回该部分视图。（Ajax 中的 UpdateTargetId 也已设置为包含该部分视图的部分的 Id。）

我的错误项目符号正确显示。但是我发现在那之后我似乎失去了javascript。例如，我的日历/日期选择器停止工作，它带有一个正常的输入框。

可能是什么原因？

非常感谢！！

**这是代码：**

我的主视图包含一个 Ajax 表单。里面有2个局部视图。第二个有日期选择器输入。

```
@using (Ajax.BeginForm("ActionXXX", "ControllerYYY", new AjaxOptions
{
    HttpMethod = "POST",
    UpdateTargetId = "main"        
}))
{
     <section id="main" class="....." data-section="....." data-step="">  

            @Html.Partial("ValidationSummary") 

            @Html.Partial("SharedPartialView", Model, new ViewDataDictionary {.....})          

     </section> 

} 
```

并且 JS 包含在主文件中。（主视图对此有布局）

```
<script type="text/javascript">   

    $('input.date').watermark('dd/mm/yyyy');

    $('input.date').datepicker({
        dateFormat: "dd/mm/yy",
        maxDate: 0, 
        onClose: function () { $(this).valid(); } 
    });    

    $('input.time').watermark('hh:mm');
    $('input.time').timeEntry();

</script> 
```

控制器只是：当验证失败时，返回部分视图（“SharedPartialView”）

```
if (Request.IsAjaxRequest())
    return PartialView("SharedPartialView", ciShareModel); //model 
```

这些 datepicker 和 watermark jquery 在页面最初加载时确实有效....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:58:32.130

加载局部视图后，您是否再次运行 javascript？- 脚本块仅在页面加载时运行，因此母版页中的 仅在加载主页面时运行。当您进行 ajax 调用时，您需要为局部视图单独运行任何 javascript。

将此代码放在您的局部视图中：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('input.date').datepicker({
            dateFormat: "dd/mm/yy",
            maxDate: 0, 
            onClose: function () { $(this).valid(); } 
        });
    }); 
</script> 
```

虽然 - 我建议不要使用`$('input.date')`, 给您的输入元素一个唯一的 ID/类，否则您将重置用户可能在页面上的其他“input.date”字段中输入的任何数据。用于 ex:`$('input.partialView_Date)`并在局部视图中调用您的输入字段：`<input type="text" class="partialView_Date" />`

# c++ - 只是一些简单的错误

> ID：13226486
> 
> 赞同：0
> 
> 时间：2012-11-05T05:36:15.503
> 
> 标签：c++, binary-search-tree

我遇到了一些我不知道的错误，并且花了很多时间把我的头发拉出来。这是我的标题：

```
#ifndef MYBSTREE_H
#define MYBSTREE_H

#include "abstractbstree.h"
#include "MyBSTreeFunc.h"
using namespace std;

template<typename T>
class TreeNode
{
  public:
    T m_data;
    TreeNode* m_right;
    TreeNode* m_left;
};

template<typename T>
class MyBSTree:public AbstractBSTree<T>       //LINE 18
{
  private:

    TreeNode<T>* m_root;

  public:

    void MyBSTree();

    int size() const;

    bool isEmpty() const;

    int height() const;

    const T& findMax() const;

    const T& findMin() const;

    int contains(const T& x) const;

    void clear();

    void insert(const T& x);

    void remove(const T& x);

    void printPreOrder() const;

    void printPostOrder() const;

    void print() const;     
};

#endif 
```

还有我的实现文件：

1-6 号线

```
void MyBSTree()
{
  m_root -> m_data = NULL;
  m_root -> m_right = NULL;
  m_root -> m_left = NULL;
} 
```

13-21 号线

```
template<typename T>
bool MyBSTree<T>::isEmpty() const
{
  if (m_root== NULL)
    return true;

  else
    return false;
} 
```

28-35 号线

```
template < typename T >
const T& MyBSTree<T>::findMax() const
{
  TreeNode* p = m_root;
  while(p -> m_right != NULL)
    p = p -> m_right;
  return p;
} 
```

实现中第 3 行的错误说 'm_root' 未在此范围内声明。但是第 4 行和第 5 行很酷。我猜是因为 m_data 不是指针？我不知道。

接下来，第 14 行和第 21 行以及许多其他人说它期望在 '<' 标记之前有一个初始化程序。我认为它们都是同一个问题，所以我在这里只放了一些。

最后，它在标题中的第 18 行说：“模板结构 MyBSTree 重新声明为另一种符号。” 然后它说我的实现的第 1 行是先前声明的“void MyBSTree”。我假设它们在一起。

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:44:20.807

您需要修复构造函数声明：

```
template < typename T >
classMyBSTree
{
  ... // some stuff
public:
  MyBSTree(); // no return type
  ... // some stuff
}; 
```

您还需要修复您的构造函数：

```
template < typename T >
MyBSTree::MyBSTree() // proper ctor definition
{
  m_root -> m_data = T(); // use the initializer for that data type
  m_root -> m_right = NULL;
  m_root -> m_left = NULL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:45:12.030

第 1-6 行：您在名为 .cpp 的文件中定义了一个独立函数`void MyBSTree()`。这不是课程的一部分。将函数命名为与类相同也很糟糕。看起来您希望 this 成为您的构造函数，在这种情况下您需要它（我不会包含模板内容，因为这不是问题）：

```
// in .h
class MyBSTree {
  public:
    MyBSTree(); // No void
}
// in .cpp
// Uses MyBSTree namespace.
MyBSTree::MyBSTree() { /* initialize your pointers etc */ } 
```

这似乎是您的主要问题，也可能解决其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:46:50.027

*   编译器找不到 m_roots 的原因是因为您的函数不是该类的一部分。`myBSTree::myBSTree(){};`您可以通过使用 operator :: (eg )将您的函数放入类范围来解决此问题
*   模板函数不能放在与其类不同的文件中，您需要在**同一个**文件中定义所有模板类和函数。将函数的实现移到头文件中。

# xcode - 相对于在同一 Picker 的组件 0 中所做的选择填充 Picker 视图的组件 1

> ID：13226489
> 
> 赞同：2
> 
> 时间：2012-11-05T05:36:36.803
> 
> 标签：xcode, uipickerview

我是 XCode 的新手。我正在使用 Picker VIew 并卡在一个地方。我有一个带有两个组件的选取器视图。我有三个数组。数组，数组 1，数组 2。

现在我想要完成的是。当在组件 0 中选择 Array 的第一个对象时，第二个组件由 Array 1 填充。当从第一个组件的 Array 中选择第二个对象时。第二个组件被重新加载并由 Array2 填充。

我对如何做到这一点感到非常困惑。

```
- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
  {
return [Array count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView
         titleForRow:(NSInteger)row
        forComponent:(NSInteger)component
{
if (component == 0)
return [Array objectAtIndex:row];
else 
    return [[ArraysOFArrays objectAtIndex:row]objectAtIndex:0 ]; 
 //ArraysOFArrays = Array1 & Array2
[technologyPicker reloadComponent:1];
}

-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{   
    if ((component == 0) && (row ==0))
    { 
    if (component == 1)
    {
        [Array1 objectAtIndex:0];

    }
    selectTechnology.text = [technologyData objectAtIndex:row];
   [technologyPicker reloadComponent:1]; 
}

if ((component == 0) && (row ==1))
{ 
    if (component == 1)
    {
    [Array2 objectAtIndex:0];

    }

    [technologyPicker reloadComponent:1]; 
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:07:21.157

我已经修改了你的代码试试这个。取一个 int 类型的全局变量“selected”并将其值初始化为 0 。顺便说一句，这个“技术数据”是什么？

组件数量

```
- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
return 2;
} 
```

组件中的行数

```
- (NSInteger)pickerView:(UIPickerView *)pickerView
numberOfRowsInComponent:(NSInteger)component
  {
     if (component==0)
         return [Array count];
     else
     {
          if(selected==0)
              [[ArraysOFArrays objectAtIndex:0]count];
          else
              [[ArraysOFArrays objectAtIndex:1]count];   
     }
} 
```

行标题

```
- (NSString *)pickerView:(UIPickerView *)pickerView
         titleForRow:(NSInteger)row
        forComponent:(NSInteger)component
{
if (component == 0)
    return [Array objectAtIndex:row];
else 
    return [[ArraysOFArrays objectAtIndex:selected]objectAtIndex:row]; 
 //ArraysOFArrays = Array1 & Array2
} 
```

在组件中选择行

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{   
    if (component == 0)
    { 
        if (row == 0)
        {
            selected=0;
            [technologyPicker reloadComponent:1];
        }
        else
        {
             selected=1;
            [technologyPicker reloadComponent:1];
        }
     }
     else
        **selectTechnology.text = [[ArraysOFArrays objectAtIndex:selected]objectAtIndex:row];**

} 
```

# java - 如何使用名为cage的静态方法创建一个java类，将X置于监狱栏形状？

> ID：13226490
> 
> 赞同：6
> 
> 时间：2012-11-05T05:36:49.487
> 
> 标签：java, shape

这是我的作业：如何创建一个名为cage(char[][] arr) 的公共方法，它返回一个char[][]。该方法应将 Xs 放置在由 2D 数组表示的网格的边界上。此外，它应该沿着数组的列放置“条”，每个条跳过一列。例如，如果 arr 有 8 列，则返回数组如下所示：

```
 X X X X X X X
 X   X   X   X
 X   X   X   X
 X X X X X X X 
```

我的另一个形状是：使用下面指定的静态方法创建一个 java 类 ArrayArt：一个名为 frame(char[][] arr) 的公共方法，它返回一个 char[][]。该方法应该将 Xs 放在由 2D 数组表示的网格的边界上，然后它应该返回该数组。例如，如果 arr 有 4 列和 4 行，则结果数组应为：

```
 ----jGRASP exec: java ArrayArt

  X X X X
  X     X
  X     X
  X X X X

 ----jGRASP: operation complete. 
```

接下来是框架打印的源代码：

```
 public class  ArrayArt{
    public static void main(String[] args){ 
        printArray(frame(4,4));

}

// frame printing
public static char[][] frame(int n, int m ){
    char[][] x=new char[n][m];

    for(int row=0;row<x.length;row++)
        for(int col=0;col<x[row].length;col++)
            if( row == 0 || row == n-1 || row == col+row || row == (row+col)-(m-1) )
                x[row][col]= 'X';
            else
                x[row][col]= ' ';

    return x;       
}

//printArray        
public static void printArray(char[][] arr){
    for(int row=0;row<arr.length;row++){
            for (int col=0;col<arr[row].length;col++)
                System.out.print(" "+arr[row][col]);
            System.out.println();

}
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T11:17:44.277

只需在 else 条件后添加此代码：

```
for(int i=1;i<x[row].length;i++)if(col == i*2)x[row][col]= 'X'; 
```

那该做的！祝你好运！

# django - IE中iframe中的Django，未保存/检索会话数据

> ID：13226492
> 
> 赞同：2
> 
> 时间：2012-11-05T05:36:56.863
> 
> 标签：django, internet-explorer, iframe

我在 IE 中遇到问题（在 chrome 和 FF 中工作），我的网站位于 iframe 中，并且根据请求，我的代码通过执行以下操作在会话中保存了一些内容：

request.session["KEY"] = "VALUE"

但是，发生的下一个请求没有保存会话数据。或者更确切地说，当我做 request.session.get("KEY") ......我没有得到。

我已经对响应进行了 P3P 更改，因为这是我在 CSRF 验证中遇到的另一个问题。这是我用于 P3P 设置的内容：

```
response["P3P"] = 'CP="CAO IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"' 
```

感谢您提供的任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T22:13:51.087

这是IE问题。它与 Django 无关。

你试过[P3P土豆](https://stackoverflow.com/a/16475093/969451)吗？对我来说效果很好。

# css - css 垂直对齐溢出标头

> ID：13226504
> 
> 赞同：0
> 
> 时间：2012-11-05T05:38:20.637
> 
> 标签：css, wordpress, html, alignment

好的，所以我在页面中有一个部分（wordpress）

```
<header id="masthead" role="banner">
    <div id="header_fix"></div>
</header> 
```

和CSS

```
#masthead {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    background-repeat:no-repeat;
    background-size:cover;
    padding: 70px 0;
} 
#header_fix {
    margin: 0 auto;
    width: 1355px;
    height: 164px;  
    text-align: center;
    background-image:url(images/Banner_SF.png);
    /*background-size: contain;*/
} 
```

我想让 header_fix div 溢出父标题（head_fix fiv 图像是一个非常长的横幅，如 1800px），并且始终将 div 的中心（因此 bg-image 的中心）与窗口的中心对齐.

```
 ______________________________________
    |    masthead always window width     |
____|_____________________________________|___
|   |     header_fix always centered      |   |
|___|_____________________________________|___|
    |                                     |
    |_____________________________________| 
```

尝试了各种各样的东西……是不是跟亲子关系有关？like 是 header 只是不被视为 div，或者至少需要 display:block; 或者其他的东西？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:10:56.397

您不需要额外的元素。您可以只使用`background-position`将背景图像居中。它已经与源图像的大小相同。

这是简写​​：

```
#masthead {
    width: 100%;
    margin: auto;
    background: url(images/Banner_SF.png) no-repeat center top;
} 
```

要回答您的其他问题：*不*，该`<header>`元素的呈现方式与普通`<div>`元素没有什么不同，除了[某些浏览器不支持](http://caniuse.com/#feat=html5semantic)它。默认情况下它仍然是块级元素。

# c# - 在 Azure 上访问自定义 STS（WCF 服务）时出错

> ID：13226508
> 
> 赞同：1
> 
> 时间：2012-11-05T05:38:32.163
> 
> 标签：c#, .net, wcf, azure, wif

我有一个自定义 STS，它具有在本地机器上运行良好的活动联合端点。本地 URL 是“https://localhost/CustomIDP/Service.svc”

在获取 SAML 令牌的最后一步在 Azure 上托管后，我在从 STS 获取令牌时收到以下错误：

*[System.ServiceModel.CommunicationException] {“接收对“https:// mysts* .cloudapp.net/Service.svc”的 HTTP 响应时发生错误。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。"}

InnerException：[System.Net.WebException]：{“底层连接已关闭：接收时发生意外错误。”}

InnerException: [System.IO.IOException]:{"无法从传输连接中读取数据：现有连接被远程主机强行关闭。"}

InnerException：[System.Net.Sockets.SocketException]：{“现有连接被远程主机强制关闭”}：在 System.Net.Sockets.Socket.Receive(Byte[] 缓冲区，Int32 偏移量，Int32 大小，SocketFlags socketFlags）在 System.Net.Sockets.NetworkStream.Read（字节 [] 缓冲区，Int32 偏移量，Int32 大小）

感谢任何输入。请在下面找到用于调用 STS 以获取 SAML 令牌的代码片段。错误发生在 channel.Issue 语句中。

```
 using (var factory = new WSTrustChannelFactory(
            new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential),
            new EndpointAddress(new Uri(stsEndpoint))))
        {
            factory.Credentials.UserName.UserName = username;
            factory.Credentials.UserName.Password = password;
            factory.TrustVersion = TrustVersion.WSTrust13;

            WSTrustChannel channel = null;

            try
            {
                var rst = new RequestSecurityToken
                              {
                                  RequestType = WSTrust13Constants.RequestTypes.Issue,
                                  AppliesTo = new EndpointAddress(realm),
                                  KeyType = KeyTypes.Bearer,
                              };

                channel = (WSTrustChannel)factory.CreateChannel();

                return channel.Issue(rst);
            }
            finally
            {
                if (channel != null)
                {
                    channel.Abort();
                }

                factory.Abort();
            }
        } 
```

Azure 上托管的 STS 服务的服务配置：

```
<system.serviceModel>
    <services>
      <service name="Microsoft.IdentityModel.Protocols.WSTrust.WSTrustServiceContract" behaviorConfiguration="ServiceBehavior">
        <endpoint address="" binding="ws2007HttpBinding" contract="Microsoft.IdentityModel.Protocols.WSTrust.IWSTrust13SyncContract"  bindingConfiguration="ws2007HttpBindingConfiguration"/>
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <bindings>
      <ws2007HttpBinding>
        <binding name="ws2007HttpBindingConfiguration">
          <security mode="TransportWithMessageCredential">
            <message clientCredentialType="UserName" establishSecurityContext="false" />
          </security>
        </binding>
      </ws2007HttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
          <serviceCredentials>
            <serviceCertificate x509FindType="FindByThumbprint" findValue="[thumbprint]" storeLocation="LocalMachine" storeName="My" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

  <microsoft.identityModel>
    <service>
      <!-- User name and password are not authenticated by windows authentication but a custom verification is done -->
      <securityTokenHandlers>
        <remove type="Microsoft.IdentityModel.Tokens.WindowsUserNameSecurityTokenHandler, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add type="ActiveIdPSite.CustomUserNameSecurityTokenHandler, ActiveIdPSite" />
      </securityTokenHandlers>
      <serviceCertificate>
        <certificateReference x509FindType="FindByThumbprint" findValue="[thumbprint]" storeLocation="LocalMachine" storeName="My" />
      </serviceCertificate>
      <certificateValidation certificateValidationMode="None" />
    </service>
  </microsoft.identityModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:12:15.247

问题解决了。根本原因与证书有关。

1.在部署时启用 WCF 诊断。2.获取 svclog 文件并使用 Microsoft Service Trace viewer 打开。

这是 svclog 的摘录。

回复操作引发异常：System.NotSupportedException - X.509 证书中不存在私钥

由于证书没有可导出格式的私钥，因此无法读取私钥。

使用了这里提到的修复：http: [//social.msdn.microsoft.com/Forums/en/Geneva/thread/2b2681af-838e-4f22-84fa-b5494b9dcc02](http://social.msdn.microsoft.com/Forums/en/Geneva/thread/2b2681af-838e-4f22-84fa-b5494b9dcc02)

# delphi - 如何弹出“连接到”对话框？

> ID：13226510
> 
> 赞同：4
> 
> 时间：2012-11-05T05:39:35.487
> 
> 标签：delphi, winapi

![在此处输入图像描述](../Images/d26ca4ab891c9ddc6c62ac144134a171.png)

如何使用 delphi 弹出这个表单？是`ShellExecuteEx`或`ShellExecute` 可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:48:23.987

您可以从命令行执行此操作。（至少，对我来说，在 Win7 上......（）

```
 rundll32.exe van.dll,RunVAN 
```

因此，只需将其包装在合适`ShellExecute`或类似的电话中即可。

请注意，该对话框设计为在系统托盘中弹出。我不知道你如何让它出现在更明显的地方。

另外，看看这个线程。这里提到了另一种方法，描述了如何以一种可能更有用的方式做到这一点：

[https://groups.google.com/forum/?hl=en&fromgroups=#!topic/microsoft.public.development.device.drivers/nPn-PH3g_2Q](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/microsoft.public.development.device.drivers/nPn-PH3g_2Q)

* * *

如果你想从你的程序中调用它，跳过`rundll32`调用会更简单。您可以自己加载 DLL 并调用该函数。例如：

```
procedure RunVANW(hwnd: HWND; hinst: HINST; lpszCmdLine: LPSTR; 
    nCmdShow: Integer); stdcall; external 'van.dll';

procedure ShowViewAvailableNetworksDialog;
begin
  RunVANW(0, 0, nil, 0);
end; 
```

我希望此功能在旧版本的 Windows 上不可用，并且几乎可以肯定会在未来版本的 Windows 上进行修改。因此，您可能更喜欢使用`LoadLibrary`和编写 DLL 导入`GetProcAddress`，并在运行时根据`RunVANW`函数是否可用来切换行为。

# php - php在时间开始和时间结束之间的累积时间

> ID：13226511
> 
> 赞同：-2
> 
> 时间：2012-11-05T05:39:41.353
> 
> 标签：php, cumulative-sum

谁能解决我的问题。我有带有 time_start 'hour:minute' 和 time_end 'hour:minute' 的 mysql 表，如何获得 time_start 和 time_end 之间的累积持续时间。谢谢，

```
$sel = $db->query("SELECT * FROM logbook WHERE date = '$date' ");

while($sel_row = mysqli_fetch_array($sel))
{
  $duration = (strtotime($sel_row['time_end'])-strtotime($sel_row['time_start']))/(60*60);        
  $hour = floor($duration);
  $minute = ($duration - $hour)*60;
  echo $hour.":".$minute;
  ? HERE HOW CAN I CUMULATE THE $hour:$minute       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:24:29.573

在计算持续时间的地方进行求和

```
$duration = 0;
while($sel_row = mysqli_fetch_array($sel))
{
  $duration += (strtotime($sel_row['time_end'])-strtotime($sel_row['time_start']))/(60*60);        
}
$hour = floor($duration);
$minute = ($duration - $hour)*60;
echo $hour.":".$minute; 
```

或者更好的是，让 MySQL 进行计算：

```
SELECT (SUM(time_end) - SUM(time_start)) / 3600 FROM logbook WHERE date = '$date'; 
```

# terminology - 包含常量和变量但不包含文字或类的词？

> ID：13226512
> 
> 赞同：0
> 
> 时间：2012-11-05T05:39:42.743
> 
> 标签：terminology

是否有一个词表示具有名称、类型和值的标记（即可以在表达式中使用）？

变量和常量符合定义，但文字不符合定义，因为它们没有名称，类也不符合定义，因为它们没有值。C# 中的属性也符合定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:46:23.037

尽管我认为 C# 属性不适合，但它在 C/C++ 中接近左值。

# jquery - 如何在运行时将值传递给 jquery 函数？

> ID：13226514
> 
> 赞同：-2
> 
> 时间：2012-11-05T05:39:54.223
> 
> 标签：jquery, asp.net-mvc-3

场景是，我有一个表单来登录用户，它将调用一个操作方法。操作方法将根据有效/无效的用户名返回真/假。如果它返回 false，我想要一个 jquery 方法来显示一条消息。我可以将该值作为模型视图传递，但问题是当页面第一次被请求时，该值为 null，因为那时没有调用 post 的操作方法，因此它显示一个错误，如对象引用为 null。如何处理这种情况。我没有给出代码，因为编码不是我的问题，我需要知道处理这个问题的最佳实践。谢谢。

好的，这是我尝试过的 Jquery 方法。

```
<script type="text/javascript">

        $(document).ready(function () {
            (' #SignIn').click(function () {
                if (@Model.test === null) //Error is showing here, on the @Model.test call
                {
                $(' #Message').text("Null")
                }
                if(@Model.test===false)
                 {
                    $(' #Message').text("Invalid");
                }
            });
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:36:25.437

如果您从模型中的操作返回结果，那么您需要在 POST 调用之后执行 java-script 操作。试试这个。

```
//In your Controller 

[HttpGet]
public ActionResult SomeAction()
{
    var model = new ModelView();
    model.test = false;
    return (model)
}   

[HttpPost]
public ActionResult SomeAction(ModelView model)
{
    if(ModelState.IsValid)
    {
        // write your logic here for validating user 
         model.test = true;
         return View(model);
    }
    model.test = false;
    return (model)
}  

// In View 

@model ViewModel 

@if (model.test == true)
{
    <script type="text/javascript">
        $(document).ready(function () {
            $(' #Message').text("Null")

        });

    </script>
}
else
{
 <script type="text/javascript">
    $(document).ready(function () {
         $(' #Message').text("Invalid");

    });

</script>
 } 
```

我已根据您的情况为您提供解决方案，但我建议您使用**Ajax.BeginForm 或 javascript**提交表单并从操作中返回**JSON 。**

# c++ - main.cpp 中的代码可以工作，但是当我把它放在一个类中时它没有

> ID：13226515
> 
> 赞同：0
> 
> 时间：2012-11-05T05:39:59.060
> 
> 标签：c++, class, opengl

我有一些简单的代码可以在屏幕上绘制一个 30x30 的球。当它全部在 main.cpp 中时它工作得很好，但是当我把它放到它自己单独的类中时，我得到一个非常微弱的灰色框，而不是占据屏幕的右上角。当我将我在 Ball 类中的确切代码粘贴到 main.cpp 中时，它再次完美运行。

当代码在 Ball 类中时： ![](../Images/39e40daaf6520df15dfd4dbd7f05d145.png)

当我将 Ball 类中的所有代码粘贴到 main 中时（以及 Ball 类之前的情况）： ![在此处输入图像描述](../Images/d98bdfd02f5c589de5ee81f5919c0dfc.png)

代码可以在[这里找到。](https://github.com/Bumrang/PongOut/tree/master/src)

[主文件](https://github.com/Bumrang/PongOut/blob/master/src/main.cpp)

```
#include "Includes.hpp"

static unsigned int Width = 800;
static unsigned int Height = 600;

int main()
{   

bool CursorEnabled = true;
bool PolygonMode = false;

//Camera.CameraInit(45.0f , Width , Height , Model);   use ortho instead \/
Camera.CameraInit (Width, Height, glm::mat4 (1.0f));

GLuint vao;
glGenVertexArrays (1 , &vao);
glBindVertexArray(vao);

Ball ball;

float LastTime = glfwGetTime(); // (for deltatime)

while (true)
{
    float DeltaTime = glfwGetTime() - LastTime; // Deltatime init
    LastTime = glfwGetTime(); // update for deltatime

    glClearColor (0.0f , 0.0f , 0.0f , 1.0f);
    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    ball.Draw();

    glfwSwapBuffers();

    if (glfwGetKey (GLFW_KEY_ESC) || !glfwGetWindowParam(GLFW_OPENED))
    {
        std::cout << "\nShutdown command. Exiting...\n" << std::flush;
        return 0;
    }

} 
```

}

[球.hpp](https://github.com/Bumrang/PongOut/blob/master/src/Ball.hpp)

```
#ifndef BALL
#define BALL

class Ball
{
private:
//Vertices and UV coordiantes.
std::vector <glm::vec2> ballVert;
std::vector <glm::vec2> ballUV;

//Buffers
GLuint vertBuf;
GLuint uvBuf;

//Image
GLuint ballTex;

//IDs for the shader.
GLuint shader;
GLuint MVPid;
GLuint sampler;
GLuint coord;
GLuint uv;

public:
//Constructor
Ball();

void Draw();

};

#endif 
```

[球.cpp](https://github.com/Bumrang/PongOut/blob/master/src/Ball.cpp)

```
#include "Includes.hpp"

Ball::Ball()
{
//Create ball vertices and UV coords
ballVert.push_back(glm::vec2(0 , 0));                                       /*left      /\*/
ballVert.push_back(glm::vec2(0 , 30));                                      /*right    /  \*/
ballVert.push_back(glm::vec2(30 , 0));                                      /*top     ------*/

ballVert.push_back(glm::vec2(0 , 30));                                       /*left      /\*/
ballVert.push_back(glm::vec2(30 , 30));                                      /*right    /  \*/
ballVert.push_back(glm::vec2(30 , 0));                                       /*top     ------*/

ballUV.push_back(glm::vec2(0 , 1));
ballUV.push_back(glm::vec2(0 , 0));
ballUV.push_back(glm::vec2(1 , 1));

ballUV.push_back(glm::vec2(0 , 0));
ballUV.push_back(glm::vec2(1 , 0));
ballUV.push_back(glm::vec2(1 , 1));

//Load the image
ballTex = SOIL_load_OGL_texture (
"img/ball.png",
SOIL_LOAD_AUTO,
SOIL_CREATE_NEW_ID, SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT);

//Generate buffers
glGenBuffers (1 , &vertBuf);
glBindBuffer (GL_ARRAY_BUFFER , vertBuf);
glBufferData (GL_ARRAY_BUFFER , ballVert.size() * sizeof(glm::vec2) , &ballVert[0] , GL_STATIC_DRAW);

glGenBuffers (1 , &uvBuf);
glBindBuffer (GL_ARRAY_BUFFER , uvBuf);
glBufferData (GL_ARRAY_BUFFER , ballUV.size() * sizeof (glm::vec2) , &ballUV[0] , GL_STATIC_DRAW);

shader = Game.LoadShaders ("src/glsl/ball.vert" , "src/glsl/ball.frag");
MVPid = glGetUniformLocation (shader , "MVP");
sampler = glGetUniformLocation (shader, "sampler");
coord = glGetAttribLocation(shader, "coord");
uv = glGetAttribLocation (shader, "uv");

}

void Ball::Draw()
{
glUseProgram (shader);
    glUniformMatrix4fv(MVPid, 1, GL_FALSE, &Camera.GetMVP()[0][0]); // Send MVP     to shader

    glActiveTexture (GL_TEXTURE0); // bind the ball texture
    glBindTexture (GL_TEXTURE_2D, ballTex);
    glUniform1i (sampler , 0);
        glEnableVertexAttribArray (coord); // sending the vertex data
            glBindBuffer(GL_ARRAY_BUFFER, vertBuf);
                glVertexAttribPointer(
                    coord, // The attribute we want to configure
                    2,                  // size
                    GL_FLOAT,           // type
                    GL_FALSE,           // normalized?
                    0,                  // stride
                    (void*)0            // array buffer offset
                    );

        glEnableVertexAttribArray (uv);
            glBindBuffer (GL_ARRAY_BUFFER , uvBuf);
                glVertexAttribPointer (uv, 2, GL_FLOAT, GL_FALSE, 0,     (void*)0);

    // Draw the triangle !
            glDrawArrays(GL_TRIANGLES, 0, ballVert.size()); 

        glDisableVertexAttribArray(coord);
        glDisableVertexAttribArray(uv);
} 
```

# mysql - 有条件地选择 MYSQL 列

> ID：13226520
> 
> 赞同：9
> 
> 时间：2012-11-05T05:40:44.413
> 
> 标签：mysql, sql, phpmyadmin

[SQLFiddle](http://sqlfiddle.com/#!2/bbe5b)给出了我的问题的示例架构，如下所示：

```
CREATE TABLE `players` (
  `player1id` int(11) NOT NULL,
  `player2id` int(11) NOT NULL,
  PRIMARY KEY (`player1id`,`player2id`)
) ENGINE=InnoDB;

INSERT INTO `players` values
(1,5),
(1,7),
(5,3),
(5,4),
(2,1); 
```

在在线游戏中，我想选择对手，可以在玩家`player1id`或`player2id`.

示例 需要输入/输出

```
Input 1: Output 5, 7, 2
Input 5: Output 1, 3 ,4
& so on. 
```

也就是说，所需的数据可以在任何列中，但我需要有条件或以任何其他方式在单列中输出。我听说过 MySQL 条件列，但无法创建查询来获取所需的输出。有人可以帮助解决所需的查询。

**编辑**

基于[此链接](http://forums.mysql.com/read.php?10,6639,6677#msg-6677)，我运行以下查询但失败。

```
SELECT IF(PLAYER1ID IS 1,PLAYER2ID as opponent,PLAYER1ID as opponent) 
FROM players
WHERE PLAYER1ID = 1 OR PLAYER2ID = 1; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-05T05:51:22.143

我认为您可以使用`case when then`如下语法：

```
SELECT CASE WHEN player1id = 1 THEN player2id ELSE player1id  END
FROM players WHERE player1id =1 OR player2id=1; 
```

或者：

```
SELECT CASE WHEN player1id = 1 THEN player2id WHEN player2id =1 THEN player1id  END
FROM players WHERE player1id =1 OR player2id=1; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T05:46:10.603

```
select player1id from players where player2id=1
union
select player2id from players where player1id=1 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/bbe5b/7)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T05:57:06.323

这应该给你你正在寻找的东西：

```
SET @PlayerId = 1;
SELECT `player2id` AS 'Other Player ID'
  FROM `players`
 WHERE `player1id` = @PlayerId
   AND `player2id` != @PlayerId

 UNION
 SELECT `player1id`
  FROM `players`
 WHERE `player2id` = @PlayerId
   AND `player1id` != @PlayerId;

SET @PlayerId = 5;
SELECT `player2id` AS 'Other Player ID'
  FROM `players`
 WHERE `player1id` = @PlayerId
   AND `player2id` != @PlayerId

 UNION
SELECT `player1id`
  FROM `players`
 WHERE `player2id` = @PlayerId
   AND `player1id` != @PlayerId; 
```

# php - sql查询错误 - 逻辑或语法

> ID：13226529
> 
> 赞同：2
> 
> 时间：2012-11-05T05:41:42.960
> 
> 标签：php, sql

目前我正在运行一个正在运行的更新查询，但是它允许插入我不想要的空值。

```
mysql_query('UPDATE community_table SET 
age = "'.$age.'", 
gender = "'.$gender.'", 
pregnant = "'.$pregnant.'", 
diet = "'.$diet.'",
smoker = "'.$smoker.'",
alcohol = "'.$alcohol.'",
exercise = "'.$exercise.'",
bmi = "'.$bmi.'",
sleeping = "'.$sleeping.'",
stress = "'.$stress.'", 
education = "'.$education.'"
WHERE username = "' . $_SESSION['user'] . '" '); 
```

我尝试了这个查询，它似乎可以防止输入空值，但是它也可以防止在变量不为空时输入值。

```
age = "'.$age.'", 
gender = "'.$gender.'", 
pregnant = "'.$pregnant.'", 
diet = "'.$diet.'",
smoker = "'.$smoker.'",
alcohol = "'.$alcohol.'",
exercise = "'.$exercise.'",
bmi = "'.$bmi.'",
sleeping = "'.$sleeping.'",
stress = "'.$stress.'", 
education = "'.$education.'"

WHERE age IS NOT NULL,
gender     IS NOT NULL,
pregnant   IS NOT NULL,
diet       IS NOT NULL,
smoker     IS NOT NULL, 
alcohol    IS NOT NULL,
exercise   IS NOT NULL,
bmi        IS NOT NULL,
sleeping   IS NOT NULL,
stress     IS NOT NULL,
education  IS NOT NULL and where
username = "' . $_SESSION['user'] . '" '); 
```

上述查询是否有问题，或者我的输入中是否有空值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:52:29.913

您可以防止从您的脚本发送空字符串或试试这个

```
UPDATE community_table SET
    education = IFNULL($education, education) -- if null, maintain previous value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:52:07.547

只需在插入之前检查值 -

```
UPDATE community_table SET
    education = ifnull($education, education) 
```

# opengl - 如何在 OpenGL 4.3 中进行矩阵乘法？

> ID：13226531
> 
> 赞同：1
> 
> 时间：2012-11-05T05:41:50.190
> 
> 标签：opengl, 3d

OpenGL 4.3 中是否已弃用`glmatrixmode()`、`gltranslate()`、`glrotate()`和等函数？`glscale()`

如果它们已被弃用，Core OpenGL 配置文件中执行矩阵操作的新函数是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T05:54:24.017

它们没有被弃用。它们被*删除*。有区别。

弃用的意思是“可用，但以后可能会被删除”。删除意味着“不可用”。

您应该使用向量/矩阵库。要么是你写的，要么[是别人写](http://www.opengl.org/wiki/Related_toolkits_and_APIs#Math_Libraries)的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T05:45:56.967

是的，它们都已被弃用。

您应该在 OpenGL 之外本地管理您的矩阵，然后将它们作为统一变量上传[`glUniformMatrix*`](http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml)

# heroku - Heroku PHP 自定义 Buildpack Gettext 扩展

> ID：13226533
> 
> 赞同：0
> 
> 时间：2012-11-05T05:42:01.937
> 
> 标签：heroku, gettext, buildpack

我最近定制了 Heroku PHP buildpack： [https ://github.com/KerryJones/heroku-buildpack-php](https://github.com/KerryJones/heroku-buildpack-php)

我添加了配置变量，每当我推送到 Heroku 时，它都会说它正在构建。但是，gettext 仍然无法正常工作（并且不会显示在 PHPInfo 页面上）。

知道从这里去哪里吗？

# ios - 如何在 Mobile Safari 日期输入中获取上一个/下一个/完成按钮？

> ID：13226536
> 
> 赞同：1
> 
> 时间：2012-11-05T05:42:07.897
> 
> 标签：ios, html, datepicker, mobile-safari

我知道我以前见过带有“上一个”、“下一个”和“完成”按钮的 iOS 日期选择器，但由于某种原因，我看到的只是移动 Safari 中标准日期输入上的“清除”按钮。只是想知道是否有办法以某种方式启用这些其他按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:23:38.780

According to my testing the Next, Prev and Done buttons appear only on iPhone devices, on iPad there's only Clear button for `<input type="date"></input>` control.

# iphone - 未找到 AVFoundation/AVFoundation.h 文件

> ID：13226543
> 
> 赞同：6
> 
> 时间：2012-11-05T05:42:34.987
> 
> 标签：iphone, ios, objective-c, avfoundation, file-not-found

当我创建一个 iOS 项目并“构建阶段 -> 将二进制文件与库链接”时，我添加了 AVFoundation.framework 库并使用`#import "<AVFoundation/AVFoundation.h>"`. 我得到一个编译错误：

> “未找到 AVFoundation/AVFoundation.h 文件”。

这是我的代码：

```
#import <UIKit/UIKit.h>
#import "<AVFoundation/AVFoundation.h>" 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-05T05:51:24.560

利用

```
#import <AVFoundation/AVFoundation.h> 
```

只有两种类型的`#import`语句：

```
#import <file.h> 
```

和

```
#import "file.h" 
```

没有像这样的类型：`#import "<file.h>"`你在这里犯了错误： `#import "<AVFoundation/AVFoundation.h>"`

> 一般来说，#import "QuartzCore/QuartzCore.h" 表单是“找到我自己的头文件，如果你找不到它则查找系统头文件”，表单是“查找系统头文件”。理论上，这些位置是编译器定义的，它们可以在给定平台上以不同的方式实现，但我还没有遇到过任何不同的 C 编译器。

参考：[SO](https://stackoverflow.com/questions/8424188/what-is-the-difference-between-import-xxx-and-import-xxx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-05T05:50:28.073

你有额外的报价。

利用

```
#import <AVFoundation/AVFoundation.h> 
```

不是

```
#import "<AVFoundation/AVFoundation.h>" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T05:37:03.840

please do not use

```
#import "<AVFoundation/AVFoundation.h>" 
```

use this

```
#import <AVFoundation/AVFoundation.h> 
```

we can import two type of library

first one is System Library which are developed by Apple developer

are imported as

```
 #import <Library.h> 
```

Second one is Classes implemented by Application developer

like as

```
#import "Library.h" 
```

# iframe - 捕获 iframe 的内容以上传到网络服务器

> ID：13226544
> 
> 赞同：2
> 
> 时间：2012-11-05T05:42:49.073
> 
> 标签：iframe, printing, upload, screen-capture

我试图找到一种方法让我们的客户捕获 iframe 窗口的内容并上传到我们的网站。本质上，我们需要能够让他们登录到几个不同的网站之一（嵌入在我们网站的 iframe 中），查找请求的文档，然后捕获 iframe 的内容并将其上传到我们的 webserver\SQLDB . 我已经研究过使用 usersnap 工具，它可以通过电子邮件来解决问题，但我没有看到让它捕获完整的 iframe 窗口并自动发送的方法。该工具需要进行硬编码才能进行全帧捕获并直接上传（用户无法更改或编辑文档）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:41:32.897

通过隐藏按钮，您几乎可以在没有用户交互的情况下使用 Usersnap 工具：http://usersnap.com/support/docs/javascriptext#nobutton [，](http://usersnap.com/support/docs/javascriptext#nobutton)但是：用户必须自己发送屏幕截图。

您可以联系 Usersnap 开发人员（完全披露：包括我），也许一个简单的想法可以帮助您。

# android - 在 Android 中使用 CalendarView 的提醒应用程序

> ID：13226547
> 
> 赞同：0
> 
> 时间：2012-11-05T05:43:07.440
> 
> 标签：android, android-alarms, android-calendar

我已经为我的应用程序使用普通的 GregorianCalendar 开发了提醒应用程序。我使用 DatePicker 和 TimePicker 创建提醒。

达到提醒时间时，将启动警报并弹出一条警报消息。我在这个过程中使用了以下代码..

```
Intent i = new Intent("android.intent.action.DA");
operation = PendingIntent.getActivity(getBaseContext(),0,i,Intent.FLAG_ACTIVITY_NEW_TASK);
alarmManager = (AlarmManager) getBaseContext().getSystemService(ALARM_SERVICE);
calendar = new GregorianCalendar(y, m, d,hr, mi);
alarm_time = calendar.getTimeInMillis();
alarmManager.set(AlarmManager.RTC_WAKEUP,alarm_time,operation); 
```

在此我为警报过程创建了一个意图..

通过使用这`alarmManager.set(AlarmManager.RTC_WAKEUP,alarm_time,operation);`条线，我可以捕捉到当前的警报/提醒..

当我关闭平板电脑并在很长一段时间后重新打开时，我无法获得任何过去时间的提醒。

我没有看到那个时间段的提醒。我怎样才能纠正这个问题...

并建议通过使用 CalendarView 选项而不是使用 DatePicker 和 TimePicker 来进行此操作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:59:41.180

关闭手机后，您的所有自定义警报将被删除，要解决此问题，您需要在应用程序中添加启动权限，每当您的手机重新启动时，BroadCastReciever 将从那里执行，您可以再次设置保存的警报，如果警报时间已过，则所有未决警报将自动继续。

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<receiver android:name=".YourReceiver">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

# javascript - 检索 dom 元素时出现奇怪的延迟

> ID：13226548
> 
> 赞同：0
> 
> 时间：2012-11-05T05:43:15.407
> 
> 标签：javascript, jquery, ajax

我创建了一个加载屏幕插件。场景是我正在使用 ajax 加载进行页面导航。因此，在使用 ajax 加载页面之前，我将使用代码显示加载屏幕`$('body).loadingMask('show')`，一旦页面加载完全加载，我将使用代码删除加载屏幕`$('body').loadingMask('hide)`。

问题是，在插件中检索目标 dom 元素时存在一些延迟。

这是代码的一般结构

```
$('body').loadingMask('show');
$.ajax({
url : 'views/next.html',
    async : false,
success : function(content, textStatus, jqXHR) {
$('body').append(content);
},
error : function(content, textStatus, jqXHR) {
throw "Unable to load template. Please check the path and name of the template"
}
});
$('body').loadingMask('hide'); 
```

问题是，在loadingMask插件的show函数内部，检索目标dom元素（即body）存在延迟。因此，实际上，代码`$('body).loadingMask('show')`仅在 ajax 页面加载完成后运行。

为了使它工作，我添加了一个时间延迟。这似乎工作正常。

这是修改后的代码

```
$('body').loadingMask('show');
setTimeout(function(){
$.ajax({
url : 'views/next.html',
    async : false,
success : function(content, textStatus, jqXHR) {
$('body').append(content);
},
error : function(content, textStatus, jqXHR) {
throw "Unable to load template. Please check the path and name of the template"
}
});
},500);
$('body').loadingMask('hide'); 
```

现在我可以在页面加载时看到加载屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:56:00.643

如果您删除`async:false`，您可以在添加内容后立即使用 ajax 成功调用您的插件。

`async:false`已弃用并且经常导致无法预料的问题

```
$('body').loadingMask('show');
$.ajax({
    url: 'views/next.html',
    success: function(content, textStatus, jqXHR) {
        $('body').append(content).loadingMask('hide');
    },
    error: function(content, textStatus, jqXHR) {
           /* likely need to remove maske here and add something to content to advise user*/
        throw "Unable to load template. Please check the path and name of the template"
    }
}); 
```

# c++ - C++ 实现不使用全局声明的函数

> ID：13226549
> 
> 赞同：0
> 
> 时间：2012-11-05T05:43:32.100
> 
> 标签：c++, function, vector

我的代码已经在工作了，在这里看到：http: [//pastebin.com/mekKRQkG](http://pastebin.com/mekKRQkG)

现在，我的函数可以工作，但`globally`我猜想使用我声明的信息，并且我想将它们转换为如上所示的格式`lines 11-15`，但我不确定如何将它们转换为这样做。简而言之，我正在尝试将我的功能转换为

`"void add_county_election_file"`

格式为

`"void add_county_election_file(const string, const vector &, const vector &, const vector &, const vector &)"`

我不知道从哪里开始，甚至不知道如何开始。

有人可以帮助我并向我展示如何为第一个功能执行此操作，以便我可以全面实施它吗？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:02:09.407

您的函数声明应如下所示：

```
void add_county_election_file(const string, vector<int>&, vector<string>..); 
```

确保你的向量模板的参数列表是正确的（这是你放在 <> 之间的类型）

然后将您的函数的实现与声明相匹配：

```
 void add_county_election_file(const string, vector<int>&, vector<string>..){...} 
```

现在在 main 中使用适当的 argumentmtns 调用您的函数：

```
string s;
vector<int> arg;
vector<string> sv;
void someFunction (s, arg, sv ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:06:49.627

我认为您在声明的功能方面做得正确 `void add_county_election_file(const string, vector<int>&, vector<int>&,..);`

所以您只需要使用所需的参数调用上述函数，因为现在您没有传递参数并且您当前的定义不接受任何参数。

作为一个很好的做法，在你的`int main()`函数中你可以使用`switch`而不是使用`if else`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:57:59.820

*   将变量和函数存储在一个类中，重载运算符并创建函数来访问这些变量。
*   声明所有变量`int main()`并设置要传递给每个函数的参数，例如

    `void print_results()` 被修改为

    `void print_results(std::vector<int> vec, int nCount, etc..)`

*   与第一个类似，创建一个结构来保存所有数据成员，然后将结构（通过引用）传递给每个函数。

> ```
>  struct CountryTracker
>     {
>         std::vector<int> ID;
>         std::string name;
>         //etc...
>     } 
> ```

```
`void print_results(CountryTracker& Obj) //pass single struct into functions` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:04:46.833

执行此操作的 OOP 方法是创建一个名为 maybe 的类`ElectionInfo`，其中：

这些将是它的成员字段：

```
vector <string> countyNameVector;
vector <int> countyNCount;
vector <int> countyFCount;
vector <int> countyOCount;
int NCount;
int FCount;
int OCount;
int NTotal;
int FTotal;
int OTotal; 
```

这些将是它的成员函数：

```
void add_county_election_file(const string);
void search_county(const string);
void print_results(); 
```

这样，您根本不必将引用传递给向量，而是您可以这样做：

```
ElectionInfo an_elect_info;
char selection = get_menu_choice();

// some if-statements to decide which of the following to call:

an_elect_info.add_county_election_file(county_name);
an_elect_info.search_county(county_name);
an_elect_info.print_results(); 
```

但是，如果您更愿意使用当前的功能方法：

在 main 方法中声明并初始化以下内容：

```
vector <string> countyNameVector;
vector <int> countyNCount;
vector <int> countyFCount;
vector <int> countyOCount;
int NCount;
int FCount;
int OCount;
int NTotal;
int FTotal;
int OTotal; 
```

注释掉的函数声明的语法应调整为如下所示：

```
void add_county_election_file(const string, vector<string>&, vector<int>&, vector<int&, vector<int>&); 
```

（当然定义也要跟上）

你会像这样调用它：

```
add_county_election_file(countyname, countyNameVector, countyNCount, countyFCount, countyOCount); 
```

对象自动通过引用传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T06:08:56.573

重构的基本过程首先应该只涉及代码分组和放置，并且应该只涉及编写新逻辑的最低限度。以此为原则，您可以首先按以下方式修改代码。

```
string ReadInputString(const char* title)
{
    string s

    cout << title;
    cin >> s;

}

void add_county_election_file(const std::string& filename
    , std::vector<string>& countyNameVector
    , std::vector<int>& countyNCount
    , std::vector<int>& countyFCount
    , std::vector<int>& countyOCount
    )
{
        int NCount = 0;
        int FCount = 0;
        int OCount = 0;
        int NTotal = 0;
        int FTotal = 0;
        int OTotal = 0;
        char vote;
    std::ifstream input((filename).c_str());
    string countyName;
    if(input.is_open())
        {
        input >> countyName;
        countyNameVector.push_back(countyName);
        while(input >> vote)
                        {
                        if(vote == 'N' || vote == 'n')
                                {
                NCount = NCount + 1;
                }
                                else if(vote == 'F' || vote == 'f')
                                        {
                                        FCount = FCount + 1;
                                        }
                                        else
                                                {
                                                OCount = OCount + 1;
                                                }
                        }
            countyNCount.push_back(NCount);
            countyFCount.push_back(FCount);
            countyOCount.push_back(OCount);
        }
        cout << countyName << endl;
}

void add_county_election_file()
{
  string fn = ReadInputString("Enter the county file to process: ");
  add_county_election_file(fn,g_countyNameVector,g_countyNCount,g_countyFCount,g_countyOCount);
} 
```

如您所见，我刚刚提取了您的代码并将它们移动到单独的函数中并更改了名称以具有一定的意义。就像函数 ReadInputString 一样——“cin >> s”行最初是“cin >> filename”。抽象名称“s”表示 ReadInputString 不知道或不关心它从控制台读取的字符串的语义含义。

为了不更改您的主要功能 - 我添加了一个重载的 add_county_election_file ，它调用一个函数，然后调用另一个函数。这个想法是你应该保持一些不变并改变其他的（永远），然后在需要时交替。而且我已经更改了全局变量的名称，以使用“g_”将它们与局部变量区分开来——关键是“g_”只能在代码中的极少数地方找到。

# computer-vision - 与 SIFT 相比，BRIEF 和 ORB 的优缺点

> ID：13226554
> 
> 赞同：16
> 
> 时间：2012-11-05T05:44:03.020
> 
> 标签：computer-vision, sift, feature-detection

我正在对局部特征表示进行一些研究，例如 SIFT、SURF 等。

现在，这里有人尝试过[Brief](http://www.cs.ubc.ca/~lowe/525/papers/calonder_eccv10.pdf)和[ORB](https://willowgarage.com/sites/default/files/orb_final.pdf)吗？如果是这样，您能否讨论一下与 SIFT 相关的优点和缺点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T16:00:35.770

[这](https://computer-vision-talks.com/2011-07-13-comparison-of-the-opencv-feature-detection-algorithms/)是我发现有帮助的一个比较。本质上，BRIEF 和 ORB 更快。那里没有很好的尺度不变性比较，但我个人发现 SURF/SIFT 比 BRIEF 和 ORB 更具尺度不变性。如果您要将这些用于特定用例，我建议您尝试两者，看看哪个最能满足您的需求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-17T17:17:34.430

SURF/SIFT 使用需要以某种方式支付的专利。我不是最新的，但成本可能很大。所以如果可能的话，我会选择 ORB - 当然，如果你不关心钱的话:)

SIFT：算法在美国获得专利；所有者是不列颠哥伦比亚大学。（[http://en.wikipedia.org/wiki/Scale-invariant_feature_transform](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)）

SURF：该算法的一个应用程序在美国获得了专利。（[http://en.wikipedia.org/wiki/SURF](http://en.wikipedia.org/wiki/SURF)）

# php - 会话变量泄漏到全局命名空间

> ID：13226567
> 
> 赞同：1
> 
> 时间：2012-11-05T05:45:10.493
> 
> 标签：php, session, global, memory-leaks

索引.php

```
session_start();
$_SESSION['a']='test';
echo $a;
die(); 
```

当我运行上述程序时，我第一次得到一个没有错误的空白屏幕。页面刷新后输出单词`test`

它不在我的开发服务器上执行此操作，仅在生产（在 Hostgator 上共享）。

这是服务器故障吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:49:41.270

`register_globals`不幸的是，您的 Hostgator 托管已打开。如果他们允许您访问它，您需要在您的 php.ini 中将其关闭。

# javascript - Android 4.1.2 上的 HTTP 文件上传（multipart/form-data）总是超时到任何服务器

> ID：13226569
> 
> 赞同：0
> 
> 时间：2012-11-05T05:45:22.717
> 
> 标签：javascript, android, html, google-chrome, multipartform-data

我们发现 Android 4.1.2 上的所有常规 HTTP POST 文件上传都超时了，包括普通浏览器和 Chrome。我们已经在多个网站上确认了这一点：我们正在调试[capn.me](http://capn.me/)，但它也发生在[imgur](http://imgur.com)上。在检查页面的网络选项卡时，可以看到请求，但是（待处理）直到超时（在我们的服务器上为 20 秒，似乎从未在 imgur 上）。

我们的测试浏览器 UA 是“Mozilla/5.0 (Linux; Android 4.1.2; Nexus 7 Build/JZO54K) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Safari/535.19”，在 Nexus 平板电脑上，但它发生在Nexus手机也是。很多谷歌搜索并没有显示其他人有这个问题，但对我们来说，这似乎是一个已确认的错误。有没有人能够阐明这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:26:27.897

Although I don't have an answer for you. We're experiencing a similar issue posting multipart/form-data. It works as long as the file is very small. A 43 byte gif works for us while a 1000 byte text file fails. Our UA is: Mozilla/5.0 (Android; Tablet; rv:16.0) Gecko/16.0 Firefox/16.0

# c++ - C 与 C++ 中的指针

> ID：13226575
> 
> 赞同：4
> 
> 时间：2012-11-05T05:46:18.760
> 
> 标签：c++, c, pointers

> **可能重复：**
> [为什么 C++ 需要对 malloc() 进行强制转换，而 C 不需要？](https://stackoverflow.com/questions/3477741/why-does-c-require-a-cast-for-malloc-but-c-doesnt)

这段特定的代码在 C 中运行良好，但在编译为 C++ 程序时会出现编译错误。

```
#include<stdio.h>
#include<stdlib.h>
int main(){
    int (*b)[10];
    b = calloc(20, sizeof(int));
    return 0;
} 
```

C++编译的错误是：

```
test.cpp: In function ‘int main()’:
test.cpp:9:28: error: invalid conversion from ‘void*’ to ‘int (*)[10]’ [-fpermissive] 
```

知道可能是什么原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T05:48:22.647

虽然在 C 中你可以隐式地从/到 void 指针转换为其他指针类型，但在 C++ 中是不允许的，你需要显式地转换它：

```
b = (int (*)[10])calloc(20, sizeof(int)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:01:50.290

`C++`是比 . 更严格的类型检查语言`C`。因此，您需要手动对其进行类型转换，但在 C 中它会自动进行类型转换。

这里 calloc 返回`void*`并且`b`是类型的，`int(*)[]`因此类型转换是强制性的。

在 C++ 中，您还需要记住其他类型的种姓

```
<static_cast>
<const_cast>
<reinterpret_cast>
<dynamic_cast> 
```

有关更多信息，请参阅 [何时应使用 static_cast、dynamic_cast、const_cast 和 reinterpret_cast？](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:51:23.967

C 在强制转换方面更为宽松，C++ 要求您在强制转换时明确。您也应该将其转换为 C 版本。

# oracle - 检测字符串的一部分是否与另一个字符串匹配

> ID：13226580
> 
> 赞同：0
> 
> 时间：2012-11-05T05:46:31.147
> 
> 标签：oracle

大家好，这是个问题：

显示电子邮件地址中包含全名的员工的员工 ID 和电子邮件。

你觉得我可以用什么？我可以使用 substr 吗？如果没有，还有其他建议吗？谢谢各位平安！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:26:19.127

例如，我会使用正则表达式

```
CREATE TABLE employees (
  emp_id     NUMBER PRIMARY KEY,
  first_name VARCHAR2(30),
  last_name  VARCHAR2(30),
  email      VARCHAR2(255)
);

INSERT INTO employees VALUES (1, 'Joseph', 'Ratzinger', 'benedictxvi@vatican.va');
INSERT INTO employees VALUES (2, 'Tim', 'Cook', 'tcook@apple.com');
INSERT INTO employees VALUES (3, 'Larry', 'Ellison', 'Ellison@oracle.com');
INSERT INTO employees VALUES (4, 'Michael', 'Dell', 'Michael@dell.com');

SELECT emp_id, email FROM employees WHERE regexp_like(email, last_name);
3 Ellison@oracle.com 
```

要包括与案例无关的结果，请使用：

```
SELECT emp_id, email FROM employees WHERE regexp_like(email, last_name, 'i');
2 tcook@apple.com
3 Ellison@oracle.com
4 Michael@dell.com 
```

如果您需要排除主机名，请将“@”附加到模式...

```
SELECT emp_id, email FROM employees WHERE regexp_like(email, last_name||'@', 'i');
2 tcook@apple.com
3 Ellison@oracle.com 
```

...或从电子邮件中提取主机名：

```
SELECT emp_id, email 
  FROM employees 
 WHERE regexp_like(regexp_substr(email,'.*@'), last_name, 'i'); 
```

# spring - jboss中的Spring部署错误

> ID：13226582
> 
> 赞同：0
> 
> 时间：2012-11-05T05:46:37.323
> 
> 标签：spring, spring-mvc

我只是想将spring框架添加到我的项目中，但是当我尝试在jboss 6.1.0 Final中部署我的war文件时，它给出了一个错误。我收到以下错误，

```
 11:01:46,556 INFO  [STDOUT] ERROR: org.springframework.web.context.ContextLoader - Context initializ
ation failed
11:01:46,557 INFO  [STDOUT] org.springframework.beans.factory.BeanCreationException: Error creating
bean with name 'com.tapgift.merchant.integration.spring.DaoFactoryPostProcessor#0' defined in class
path resource [config/dao-defs.xml]: Cannot resolve reference to bean 'DAOFactory' while setting bea
n property 'daoFactory'; nested exception is org.springframework.beans.factory.BeanCreationException
: Error creating bean with name 'DAOFactory' defined in class path resource [config/dao-defs.xml]: I
nvocation of init method failed; nested exception is java.lang.NullPointerException 
```

这是 dao-def.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

    <!-- All DAO bean definitions goes here -->
    <bean id="DAOFactory"
        class="com.tapgift.merchant.integration.db.dao.jdbc.JdbcDaoFactoryImpl" />

    <bean class="com.tapgift.merchant.integration.spring.DaoFactoryPostProcessor">
        <property name="daoFactory" ref="DAOFactory" />
    </bean>

     <bean id="merchantDao"
        class="com.tapgift.merchant.integration.db.dao.jdbc.JdbcMerchantDao">
        <property name="dataSource" ref="dataSource" />     
        <property name="queryFactory" ref="QueryFactory" />         
    </bean>

</beans> 
```

这是 application-context.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:annotation-config />
    <context:component-scan base-package="com.tapgift.merchant" />

    <import resource="classpath:config/spring-integration.xml" />
    <import resource="classpath:config/dao-defs.xml" /> 
    <import resource="classpath:config/query-defs.xml" />   
    <import resource="classpath:config/spring-support.xml" />

</beans> 
```

最后这是 web.xml

```
<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:config/application-context.xml
                /WEB-INF/spring/root-context.xml</param-value>
</context-param> 
```

哎呀，差点错过了pom，

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.tapgift</groupId>
    <artifactId>merchant</artifactId>
    <name>merchant-server</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.7</java-version>
        <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.9</org.aspectj-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>               
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <dependency>
                   <groupId>commons-collections</groupId>
                   <artifactId>commons-collections</artifactId>
                   <version>3.2.1</version>
                   <scope>compile</scope>
            </dependency>
            <dependency>
                  <groupId>commons-lang</groupId>
                  <artifactId>commons-lang</artifactId>
                  <version>2.6</version>
                  <scope>compile</scope>
            </dependency>
            <dependency>
                 <groupId>commons-io</groupId>
                 <artifactId>commons-io</artifactId>
                 <version>2.0.1</version>
                 <scope>compile</scope>
            </dependency>
            <dependency>
                 <groupId>commons-dbcp</groupId>
                 <artifactId>commons-dbcp</artifactId>
                 <version>1.4</version>
                 <scope>compile</scope>
            </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>   

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>           
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>compile</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- JSON view resolver -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.9.2</version>
        </dependency>

        <!-- Test -->
        <!-- <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>  -->       
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

我可以看到所有编译和组装到 war 文件的文件。感谢，如果弹簧大师可以指出我这个部署错误的原因。

编辑：添加 DaoFactoryImpl

```
package com.tapgift.merchant.integration.db.dao.jdbc;

import java.lang.reflect.ParameterizedType;
import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.BeansException;
import org.springframework.beans.factory.InitializingBean;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;

import com.tapgift.merchant.integration.db.dao.BaseDao;
import com.tapgift.merchant.integration.db.dao.DaoFactory;
import com.tapgift.merchant.integration.db.dao.EntityBaseDao;

/**
 * Class <code>CaseServiceImpl</code> is an implementation of the <tt>DaoFactory</tt> interface.
 */
public class JdbcDaoFactoryImpl implements DaoFactory, InitializingBean, ApplicationContextAware
{
    private ApplicationContext m_appCtx;
    private Map<String, EntityBaseDao<?>> m_daoMap = new HashMap<String, EntityBaseDao<?>>();

    /**
     * {@inheritDoc}.
     */
    @Override
    @SuppressWarnings("rawtypes")
    public void afterPropertiesSet() throws Exception
    {
        Map<String, BaseDao> beanMap = m_appCtx.getBeansOfType(BaseDao.class);
        for (final BaseDao dao : beanMap.values())
        {
            m_daoMap.put(((EntityBaseDao) dao).getEntityType().getName(), (EntityBaseDao) dao);
        }
    }

    /**
     * {@inheritDoc}.
     */
    @Override
    public BaseDao getDao(String name)
    {
        return this.m_daoMap.get(name);
    }

    /**
     * {@inheritDoc}.
     */
    @Override
    public <T> T getEntityDao(Class<T> clazz)
    {
        String entityName = ((Class) ((ParameterizedType) clazz.getGenericInterfaces()[0]).getActualTypeArguments()[0])
            .getSimpleName().toUpperCase();
        return clazz.cast(this.m_daoMap.get(entityName));
    }

    /**
     * Set method for m_appCtx
     */
    @Override
    public void setApplicationContext(ApplicationContext appCtx) throws BeansException
    {
        this.m_appCtx = appCtx;
    }

} 
```

**更新 2** 问题似乎是创建 JdbbcDaoFactoryimpl 实例，当我删除 `<bean id="DAOFactory" class="com.tapgift.merchant.integration.db.dao.jdbc.JdbcDaoFactoryImpl" />`它的依赖项时，我可以毫无问题地部署它。我检查了war文件，所有spring jar都属于同一版本。迫切需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:46:05.690

问题：

> 设置 bean 属性 'daoFactory' 时无法解析对 bean 'DAOFactory' 的引用；

原因：

> 在类路径资源 [config/dao-defs.xml] 中创建名称为“DAOFactory”的 bean 时出错：**调用 init 方法失败**；嵌套异常是 java.lang.NullPointerException

Spring 无法创建`DAOFactory`ie的对象，因为它在初始化对象`JdbcDaoFactoryImpl`时遇到。 添加一些相关代码，这将有助于找出确切的原因。**`NullPointerException`**

* * *

更新：看起来下面一行是导致问题的原因

```
Map<String, BaseDao> beanMap = m_appCtx.getBeansOfType(BaseDao.class); 
```

Spring 找不到 bean 类型`BaseDao`。确保你已经定义了一个 bean 类型`BaseDao`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:40:32.210

没关系，我能够修复它，与 Ajinkya 展示的内容略有相关。问题`m_daoMap.put(((EntityBaseDao) dao).getEntityType().getName()`出在 JdbcDaoFactoryImpl 的这段代码上。`((EntityBaseDao) dao).getEntityType()`没有返回任何值，但为空。我忘了覆盖/删除实际 dao 实现类的特定方法。一旦我删除了该方法，我就可以部署它而不会遇到任何问题。

无论如何感谢您的支持。

# wordpress - 致命错误：调用未定义函数 wp_headers()

> ID：13226585
> 
> 赞同：1
> 
> 时间：2012-11-05T05:46:59.167
> 
> 标签：wordpress

我收到错误，例如在我的主题文件夹中的 wp_content 中调用未定义的函数 wp_headers()。如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:17:15.320

您应该更具体地说明您的错误消息，但可能您的意思是使用`wp_head()`而不是`wp_headers()`在您的`header.php`文件中。

开始学习主题开发的好地方是：http: [//codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development)

# c++ - 使用 boost::future/boost::promise 的异常未在线程间正确传播

> ID：13226589
> 
> 赞同：2
> 
> 时间：2012-11-05T05:47:36.140
> 
> 标签：c++, multithreading, exception, boost, future

我简化了以下代码：

线程二：

```
 boost::unique_future<void> future;
  TaskPtr task(new task::ReloadConfig(future));
  Listener::PushTask(task);
  future.wait();

  try
  {
    future.get();
  }
  catch (const cfg::ConfigError& e)
  {
    return cmd::Result::Okay;
  } 
```

线程二：

```
 try
  {
    cfg::UpdateShared(std::shared_ptr<cfg::Config>(new cfg::Config(configFile)));
  }
  catch (...) // should be cfg::ConfigError
  {
    promise.set_exception(boost::current_exception());
    return;
  }

  promise.set_value(); 
```

我得到以下信息，而不是 Cfg::ConfigError 异常或其派生异常之一从线程二传播到线程一：

> 在抛出 'boost::exception_detail::clone_impl'
> what(): std::exception的实例后调用终止

似乎这个其他人有类似的麻烦，没有答案：

[https://stackoverflow.com/questions/10857834/how-to-use-boostfuture-get-to-get-user-defined-exception](https://stackoverflow.com/questions/10857834/how-to-use-boostfuture-get-to-get-user-defined-exception)

如果我尝试使用 boost::enable_current_exception，我也会收到以下错误：

> /usr/local/include/boost/exception/exception.hpp:419:20: 错误：没有匹配函数调用'std::runtime_error::runtime_error()'

通过只返回一个布尔值，我可以让代码正常工作，没有例外，但这是一种妥协。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:15:02.743

我会尝试在你的线程二中做类似的事情：

```
catch (const cfg::ConfigError& e)
{
    promise.set_exception(boost::make_exception_ptr(e));
} 
```

否则，如果你想让它`current_exception()`工作，你必须搞砸以下事情：

```
throw boost::enable_current_exception(cfg::ConfigError("meh")); 
```

# ios - 另一个uiview中的动画隐藏uiview？

> ID：13226590
> 
> 赞同：0
> 
> 时间：2012-11-05T05:47:54.923
> 
> 标签：ios, animation

我有 2 个视图，A 和 B。

```
A(Aframe)--------------->B(Bframe)------>C(cFrame) 
```

我想执行一个动画。A 将从 Aframe 移动到 Cframe。但在 B，A 将被隐藏

```
A(Aframe)------(non-hidden area)---------->B(Bframe)------(hidden area)-------->C(Cframe) 
```

怎么做？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:55:18.843

```
// I suppose viewA, viewB, viewC is subviews of self.view
UIView *viewA = ..., *viewB = ..., *viewC = ...;
[self.view bringSubviewToFront:viewA];
[UIView animateWithDuration:0.5 animations:^{
    viewA.frame = viewC.frame;
} completion:^(BOOL finished) {
    [self.view sendSubviewToBack:viewA];
}]; 
```

# python - 获取 URL 时如何删除 Google App Engine 默认标头？

> ID：13226598
> 
> 赞同：1
> 
> 时间：2012-11-05T05:48:50.187
> 
> 标签：python, google-app-engine, http-headers, craigslist

我正在尝试在 GAE 上构建一个小型应用程序，以帮助我管理我感兴趣的 craigslist 列表。我想从我的应用程序中从这些列表中获取一些数据，但每次我这样做时，我都会从 craigslist 获得 404。

经过一番调查，事实证明我的代码不是罪魁祸首：craigslist 查看 HTTP 标头并在用户代理标头中找到“AppEngine-Google”时系统地返回 404！

你可以用 curl 看到：

```
curl http://sfbay.craigslist.org/ 
```

工作（返回页面）。

```
curl http://sfbay.craigslist.org/ --header "User-Agent: AppEngine-Google" 
```

什么都不给。

知道如何删除 GAE 默认设置的标头吗？或者解决这个问题的另一个想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T08:00:18.633

发出传出请求时，无法阻止 App Engine 识别自身。这是为了防止滥用。

如果 Craigslist 选择将 App Engine 列入黑名单，您需要与他们讨论这件事，而不是试图回避它。

# vba - 如何使用 Excel 宏处理 Microsoft Excel 中的弹出窗口

> ID：13226604
> 
> 赞同：0
> 
> 时间：2012-11-05T05:49:12.167
> 
> 标签：vba, excel

我想编写一个 excel 宏来处理来自 microsoft excel 的一些弹出窗口（单击“确定”按钮或填写一些空白字段）。我做了很多谷歌搜索，但仍然找不到这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:23:58.537

Excel 无法监视弹出模式窗口，同时无法执行代码以“关闭”这些模式窗口。您可以让另一个外部应用程序等待弹出窗口出现，然后“单击”或“发送密钥”给它们。

这是一个类似的问题

[从vbscript自动填充Excel文件中的Excel用户表单](https://stackoverflow.com/questions/13228146/filling-excel-userform-in-excel-file-automatically-from-vbscript/13228214#13228214)

# java - 无法让我的子类将数据发送回主方法进行输出

> ID：13226605
> 
> 赞同：0
> 
> 时间：2012-11-05T05:49:15.217
> 
> 标签：java, subclass

```
 import java.text.DecimalFormat; // For proper currency     
 import java.util.Arrays;
 import java.util.Comparator;

 public class Inventory {

public static void main( String args[] )

{

// Start array of software titles

Software[] aSoftware = new Software[4];

aSoftware[0]= new Software("Command and Conquer ", 6, 29.99, 10122); 
aSoftware[1]= new Software("Alice in Wonderland", 1, 10.99,10233);
aSoftware[2]= new Software("Doom", 1, 10.99, 10344);
aSoftware[3]= new Software("Walking Dead", 6, 9.99, 10455);

//Set currency format
DecimalFormat money = new DecimalFormat("$0.00");

// Sort in order of Software Name

Arrays.sort(aSoftware, new Comparator<Software>() {
public int compare(Software s1, Software s2) {
return s1.getSoftwareTitle().compareTo(s2.getSoftwareTitle());

}
});

// Display software title, number of units, cost, item number and total inventory

for (int i = 0; i < aSoftware.length; i++){ 

System.out.println("Software Title is "+ aSoftware[i].getSoftwareTitle() );

System.out.println("The number of units in stock is "+ aSoftware[i].getSoftwareStock() );

System.out.println("The price of the Software Title is "+ (money.format(aSoftware[i].getSoftwarePrice() )));

System.out.println( "The item number is "+ aSoftware[i].getSoftwareNum());

System.out.println( "The year of copyright is "+ aSoftware[i].getYear());

System.out.println( "The restocking fee is "+ aSoftware[i].getRestockingFee());

System.out.println( "The value of the Software Inventory is "+ (money.format(aSoftware[i].Softwarevalue() )));

System.out.println();   
            }

//output total inventory value

    double total = 0.0;
 for (int i = 0; i < 3; i++){ 
total +=  aSoftware[i].getCalculateInventory();            
            }
    System.out.printf("Total Value of Software Inventory is: \t$%.2f\n", total);

//end output total inventory value

 }
 } //end main

   public class Software

 {
// Declare variables

String SoftwareTitle;
int SoftwareStock;
double SoftwarePrice;
int SoftwareNum;
double CalculateInventory;
double SoftwareValue;
double value;   

Software( String softtitle, int softstock, double softprice, int softitemnum )

{
    // Create object constructor

    SoftwareTitle = softtitle;
    SoftwareStock = softstock;
    SoftwarePrice = softprice;
    SoftwareNum = softitemnum;

    } 

    // Set Software Title

    public void setSoftwareTitle( String softtitle )
    {
        SoftwareTitle = softtitle;
    } 

    // Return Software Title

    public String getSoftwareTitle()
    {
        return SoftwareTitle;
    } 

    // Set software inventory
    public void setSoftwareStock( int softstock)
    {
        SoftwareStock = softstock;
    } 

    // Return software inventory
    public int getSoftwareStock()
    {
        return SoftwareStock;
    }

    // Set software price

    public void setSoftwarePrice( double softprice )
    {
        SoftwarePrice = softprice;
    }

    // Return software price
    public double getSoftwarePrice()
    {
        return SoftwarePrice;

    }

    // Set item number

    public void setSoftwareNum( int softitemnum )
    {
        SoftwareNum = softitemnum;
  }         //

    //return software item number

    public int getSoftwareNum()
    {
        return SoftwareNum;
    } //

    // calculate inventory value

    public double Softwarevalue()
    {
        return SoftwarePrice * SoftwareStock;

    } 

    public void setCalculateInventory (double value){
        this.CalculateInventory = value;
    }

    public double getCalculateInventory(){
        double value = 0;
        for(int i = 0; i < 3; i++){
            value = Softwarevalue();
        }
        return value;
    }

 }//end method value

 //

public class Project3 extends Software 

 {
// Unique feature
private int year = 2012;

// Default Constructor
public Project3(String softtitle, int softstock, double softprice,int softitemnum,    int year) {
    super(softtitle, softstock, softprice, softitemnum);
    this.year = year;
}

 // Retuen Year
 public int getYear()
 {
    return year;
 }

 // Set year
 public void setYear(int year)
 {
    this.year = year;
 }

 // Calculate 5% restocking fee
 public double getRestockingFee()
 {
    return getSoftwarePrice() * getSoftwareStock() * 0.05;
 }

 public double getCalculateInventory()
 {
        double value = 0;
    for(int i = 0; i < 3; i++){
        value = Softwarevalue();
    }
    return value;
  }
  } 
```

我的程序运行良好，但我无法让我的系统退出我的 Project 3 子类中的 getYear 方法和 getRestockingFee 网络。我可以向正确的方向轻推，我必须错过一些疯狂的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:15:00.800

当给定一个`Software`对象时，Java 编译器无法知道它真的是一个`Project3`. 在现实生活中，如果我把一个史密斯奶奶的苹果放在一个盒子里，我告诉你盒子里有一个苹果，你能告诉我是不是`boolean isGreen()`吗？Java也有同样的问题！

有可能的3种解决方案：

1.  构造对象时，将其存储在`Project3`变量中（并确保构造的类型是`Project3`!

2.  告诉 JVM：“嘿，这真是一个 Project3！” 您可以通过将对象*投射*到正确的时间来做到这一点。句法`((Project3) mySoftware).getYear()`

3.  `getYear`在 *super* 类中定义方法的含义。这就像告诉你“嘿，假设所有的苹果都不是绿色的（`isGreen()`返回`false`）”......但如果我知道这是一个 Granny Smith 子类苹果，现在就`isGreen`返回`true`！

您选择的解决方案取决于您希望系统执行的操作。

# android - 如何在 android 中为 2 位图设置单独的 toast 消息？

> ID：13226606
> 
> 赞同：0
> 
> 时间：2012-11-05T05:49:28.510
> 
> 标签：android

```
public class Sample2 extends Activity  {

private SampleView sView;
private static int displayWidth = 100;    //movement area
private static int displayHeight = 100;
float angle = 0;

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    sView = new SampleView(this);
    setContentView(sView);

     }//oncreate

private class SampleView extends View {
    Context con;
    private Rect displayRect = null; //rect we display to
    private int scrollRectX = 0; //current left location of scroll rect
    private int scrollRectY = 0; //current top location of scroll rect
    private float scrollByX = 0; //scroll by amounts
    private float scrollByY = 0;
    private float startX = 0;   //track x from one ACTION_MOVE to the next
    private float startY = 0;   //track y from one ACTION_MOVE to the next
    private int state = 0;

    Bitmap bitmap2;

    public SampleView(Context context) {
        super(context);
        displayRect = new Rect(0, 0, displayWidth, displayHeight);
        }//constructor

  public boolean onTouchEvent(MotionEvent event) {
    float x;
    float y;

       switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN: 
                    //Initial down event location.
                        startX = event.getRawX();
                        startY = event.getRawY()-50;
                       // Log.e("TOUCHED",startY+" "+(scrollRectY+displayHeight));
                        if (((startX>scrollRectX)&(startX<(scrollRectX+displayWidth)))&
                           ((startY>scrollRectY)&(startY<(scrollRectY+displayHeight)))) state = 1;
                        //Log.e("TOUCHED","State "+state);
                        break;
                case MotionEvent.ACTION_MOVE:
                        x = event.getRawX();
                        y = event.getRawY()-50;                            
                        scrollByX = x - startX;
                        scrollByY = y - startY;
                        startX = x; 
                        startY = y;
                        if (state != 0) invalidate(); //move it
                        break;
                case MotionEvent.ACTION_UP:
                        x = event.getRawX();
                        y = event.getRawY()-50;
                        scrollByX = x - startX;
                        scrollByY = y - startY;
                        startX = x; 
                        startY = y;
                        state = 0;
                        invalidate();
                       break;
        }//switch
        return true;
    }//ontouch

protected void onDraw(Canvas canvas) {
   scrollRectX = scrollRectX+(int)scrollByX;
   scrollRectY = scrollRectY+(int)scrollByY;
   displayRect.set(scrollRectX,scrollRectY,scrollRectX+displayWidth,
                   scrollRectY+displayHeight);
   Paint paint = new Paint();
   Bitmap bitmap1 = BitmapFactory.decodeResource(getResources(),R.drawable.ic_launcher);
   bitmap2= BitmapFactory.decodeResource(getResources(),R.drawable.ic_launcher).copy(Config.RGB_565, true);
   canvas.drawBitmap(bitmap2, null, displayRect, paint);

//TODO: Fill In Methods Etc.
}
}
} 
```

我已经使用了这段代码....现在我的问题是如何在android中为2个位图设置单独的toast消息？....如果我在背景矩形中触摸它会显示toast消息，如果我触摸图像它会显示另一个toast通过在 ontouchevents 上使用 if 条件发送消息....请 any1 可以这样说....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:31:19.707

你可以这样做，

**演示.java**

```
public class Demo extends Activity  implements OnClickListener{
 @Override
  protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.demo_layout);
    final LinearLayout lin_layout = (LinearLayout) findViewById(R.id.lin_layout);
    final ImageView img_view = (EditText) findViewById(R.id.img_view);

     // call your touch event 
    l_l.setOnClickListener(this);
    imageView1.setOnClickListener(this);

 @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.l_l: // if you touch on layout
      // do your task
      Toast.makeText(getApplicationContext(), "You Touch on: Linear_Layout",
          Toast.LENGTH_LONG).show();
      break;

    case R.id.imageView1:  // if you touch on Image
      // do your task
      Toast.makeText(getApplicationContext(), "You Touch on : Image ", Toast.LENGTH_LONG)
          .show();
      break;
    default:
      break;
    }

  }

} 
```

# c# - 如何在iTextSharp生成的pdf中设置表格的起始位置？

> ID：13226609
> 
> 赞同：1
> 
> 时间：2012-11-05T05:49:52.987
> 
> 标签：c#, asp.net, pdf, itextsharp

我正在使用 iTextSharp 和 CSharp 创建 pdf。我正在创建许多表。所以我需要将每个表放置在不同的位置。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:21:56.170

我使用此代码是因为原始 pdfptable 会自动定位它：

```
 Private mywriter As PdfWriter
        Dim Theight = Table.CalculateHeights
        Dim DirectC As PdfContentByte = mywriter.DirectContent
        Dim templ = DirectC.CreateTemplate(Table.TotalWidth, Theight)
        Table.WriteSelectedRows(0, -1, 0.0F, Theight, templ)
        Dim myimage = Image.GetInstance(templ)

        Dim CenterH = (Doc.Top + Doc.BottomMargin) / 2

        Dim NewPosH = CenterH - myimage.Height / 2

        Dim CenterW = mywriter.PageSize.Width / 2
        Dim NewPosW = CenterW - myimage.Width / 2

        myimage.SetAbsolutePosition(NewPosW, NewPosH)
        DirectC.AddImage(myimage) 
```

此代码将表格置于页面中间。注意：坐标系从左下角开始，而不是从左上角开始。它的vb.net代码，不过适配应该不会太难。

# php - 从 PHP 数组创建一个随机数据表

> ID：13226612
> 
> 赞同：-2
> 
> 时间：2012-11-05T05:50:04.350
> 
> 标签：php

我正在尝试模拟一个工作产品并创建了一个 PHP 信息数组，我希望将其插入到一个包含 20-100 个值的表中（每个页面加载时随机）？

因此，从某种意义上说，该数组充当某种“数据库”，并生成一个包含 20-100 个值的随机表。

对于某些数组，例如`$facilities`and `$room`，我希望选择三个不同的值并将其插入表中。

我该怎么做呢？

这是我的数组：

```
<?php
// module code array
$moduleCode = array("XXX101","XXX107","XXX122","XXX123","XXX124","XXX201","XXX220","XXX256","ZZZ101","ZZZ106","ZZZ107","ZZZ108","ZZZ120","ZZZ150","ZZZ201","ZZZ231","ZZZ232","ZZZ249","ZZZ251","ZZZ290","ZZZ295","ZZZ301","YYY001","YYY003","YYY101","YYY102","YYY104","YYY104","YYY106","YYY107","YYY131","YYY140","YYY170","YYY180","YYY190","YYY201","YYY202","YYY220","YYY221","YYY251","YYY253","YYY255","YYY257","YYY259","YYY281","YYY800","YYY801","YYY802","NNN280","NNN290");
// random no of students between 20 and 400
$noStudents = rand(20, 400);
// day of the week
$day = array("1 - Mon","2 - Tues","3 - Wed","4 - Thu","5 - Fri");
// period of the day
$period = array("1 - 09:00","2 - 10:00","3 - 11:00","4 - 12:00","5 - 13:00","6 - 14:00","7 - 15:00","8 - 16:00","9 - 17:00");
// length of lecture
$lecture = rand(1, 7);
// weeks
$weeks = array("1","2","3","4","5","6","7","8","9","10","11","12","13","14","15");
// facilities
$facilities = array("Blu-ray DVD Player","Chalk board","Computer","Data projector","Dual data projector","DVD/Video","Glass board","Induction loop","Interactive PC monitor","Loop system","Microphone","OHP","PA","PC & laptop audio","Plasma screen","Radio mic","Review","Twin data projector","Video/DVD","Visualizer","Wheelchair access","White board",
"White/green board");
// room preferences
$room = array("J110","CC011","U020","CC012","CC013","J001","A201","J002","GGB01","A001","J104","B111","U011","A203","K108","D002","D102","D109","D201","D202","G006","G007","CC014","K105","CC109","CC110","U012","K109","U112","CC111","K106","G002","G003","G004","CC113","K107","U013","U014","N326","BE025","SMB014","SMB017","SMB103","SMB104","SMB008","SMB010","SMB102","SMB105","SMB109","SMB108","Cope","HE010","JB021","XX019","JJ004","ZZ106","HE023","HE021","HE026","63.1.07","JJ018","NN006","ZZ105","ZZ103","63.1.08","JJ017","XX031","XX031a","T003","RT037","W001","S004","W004","RT033","RT040","W003","S174","S173","W002","RT027","X401","W005A","W005B","W005C","S177","W005D","W005E","W005F","S006","T210","KG107","KG109","KG111","KG112");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:06:08.633

您可以创建一个表并使用循环来填充行。[array_rand()](http://php.net/manual/en/function.array-rand.php)可用于生成随机密钥。

只需添加更多`<td>`以获得您想要的所有字段。

```
<table>
<?php
for($i=0; $i<10;++$i){
echo '<tr>';
echo '<td>' . array_rand($moduleCode) .'</td>;
echo '</tr>';
}
?>
</table> 
```

# java - MS Access ODBC：语法错误 .. LIKE 'thomas%'

> ID：13226613
> 
> 赞同：3
> 
> 时间：2012-11-05T05:50:06.700
> 
> 标签：java, sql, ms-access

我正在开发一个迷你应用程序，我必须检索 USER_ID 并将其保存在表中。

它是这样工作的；我输入用户的电子邮件地址，然后语句必须检索 USER_ID 并将其保存到表中。

我的 SQL Like 语句有问题。只是我只需要插入电子邮件地址的第一部分。例如，“thomas@yahoo.com”。我只插入“托马斯”；不是剩余部分。

以下是我在 Java 控制台中收到的语句示例和结果消息：

**代码：**

```
String ea = txt_email.getText();
String lid = "SELECT USER_ID FROM user WHERE email_address Like  '"+ea+"%' "; 
```

**错误信息：**

> 错误：java.sql.SQLException：[Microsoft][ODBC Microsoft Access Driver] 查询表达式“SELECT USER_ID FROM user WHERE email_address Like 'thomas%'''中的语法错误（缺少运算符）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:54:08.833

尝试使用`*`而不是`%`. MS ACCESS 使用`*`而不是`%`for`LIKE`语句。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:53:15.980

使用**[PreparedStatement](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)**

```
PreparedStatement _query = con.prepareStatement(
        "SELECT USER_ID FROM user WHERE email_address Like ?");
_query.setString(1, ea + "*");  // <== use *
_query.executeQuery(); 
```

`con`您的活动连接对象在哪里。

使用的一个优点`PreparedStatement`是防止`SQL Injection`

# java - 如何在 Clojure REPL 中需要一个 jar 文件？

> ID：13226617
> 
> 赞同：9
> 
> 时间：2012-11-05T05:50:28.047
> 
> 标签：java, clojure

`require`从clojure打包很容易：

```
user=> (require 'clojure.core)
nil 
```

但是我怎样才能`.jar`在 Clojure 中需要一个文件呢？

（我正在努力学习`lein`。Leiningen 对大型项目而不是小型脚本很有用。所以我想弄清楚`jar`在我的 Clojure 脚本和 REPL 中使用包的最佳方法是什么。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T21:08:55.897

尽管可以借助[Pomegranate](https://github.com/cemerick/pomegranate)库在运行时将 jar 添加到应用程序，但强烈建议不要这样做：

1.  它从外部隐藏了依赖关系，最终用户不会知道他们需要它来运行代码。
2.  jar 本身可以依赖于其他 jar 文件（因此会给最终用户带来压力来弄清楚）

我想我在重复其他受访者，但我想我会添加要点来验证他们的建议。

事实上，lein2 在幕后使用了 pomegranate，只是为了在需要依赖后不必重新启动 REPL。它仅用于开发目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T06:08:44.617

我不认为你可以。REPL 必须使用类路径上的 JAR 启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T10:10:25.083

看看[石榴](https://github.com/cemerick/pomegranate)图书馆。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-22T15:10:26.673

因此，`man clojure`在 Ubuntu 14.04 上检查我的 REPL 让我有了`-cp`选择（这是 的缩写`-classpath`）：

```
clojure -cp ./path/to/package.jar
user=> (require `clojure.package) 
```

* * *

事实上，作为参考，我想分享一个使用`jar`库的示例。因为它可能对不熟悉 Java（以及所有机器）但想将这个漂亮的 lisp 用于脚本/简短的小程序的人有用，因此不需要 leiningen。

示例是：您想解析一些具有 CSV 内容的文件并以某种方式使用它。

*   文件系统上的文件使用标准访问`clojure.java.io`，
*   CSV 内容用外部[包解析`data.csv`](https://github.com/clojure/data.csv)

`data.csv.jar`按照[自述文件中的链接](http://search.maven.org/#search|ga|1|g%3A)下载：[http ://search.maven.org/remotecontent?filepath=org/clojure/data.csv/0.1.4/data.csv-0.1.4.jar](http://search.maven.org/remotecontent?filepath=org/clojure/data.csv/0.1.4/data.csv-0.1.4.jar)

将它放在您当前的工作目录中并打开 REPL 添加路径`classpath`：

```
clojure -cp ./data.csv-0.1.4.jar
Clojure 1.4.0
user=> ; now you have it
user=> (require '[clojure.data.csv :as csv])
nil
user=> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T13:27:04.350

您可以使用此[解决方案](http://blog.japila.pl/2011/01/dynamically-redefining-classpath-in-clojure-repl/)。

在回复中：

```
user=>(def cl (-> (Thread/currentThread) (.getContextClassLoader)))
;; need load dependicies before, using the same method
user=>(-> cl (.addURL (java.net.URL. "file:///c:/Users/dev/m2/repository/cheshire/cheshire/5.3.1/cheshire-5.3.1.jar")))
user=>(require '[cheshire.core :as json]) 
```

# android - 在后端使用 C++ 进行跨平台移动开发

> ID：13226620
> 
> 赞同：1
> 
> 时间：2012-11-05T05:51:01.540
> 
> 标签：android, ios, mobile, blackberry

我们正在为我们的网站构建一个移动应用程序，它是一种社交网络。因此移动应用程序的功能将接近 Facebook 应用程序。

我们的目标是 Android、BlackBerry 和 iOS。

我们尝试使用 phonegap 和其他 HTML、javascript 解决方案，但这些应用程序的性能非常缓慢。这与我们的预期相差甚远。

我们现在正在考虑一条中间道路。每个平台的前端都是原生的。我们将用 C++ 编写在服务器和前端之间进行通信的后端。经过一些研究，我发现，C++ 代码代码可以通过以下方式在不同平台上使用

**iOS**：objective c 支持使用 c++。

**Android** :[使用 Android NDK 工具包](http://developer.android.com/tools/sdk/ndk/index.html)

**黑莓**：[黑莓提供了一个原生 sdk](https://developer.blackberry.com/develop/platform_choice/ndk.html)，不知道是不是我需要的。

我有3个问题：

1.  这是正确的方向吗？还是存在一些基本缺陷？

2.  这样做是否可以节省大量时间？还是在本机中做后端要快得多？

3.  性能上是否有明显差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:51:20.050

Android 和 Objective-C 之间的 API 完全不同。您可能无法在很大程度上共享通信 API。

一种可行的选择是在 Mono 上进行标准化。Xamarin 开箱即用地支持 iOS 和 Android，并且有一个名为[MonoBerry](http://burningsoda.com/software/monoberry/) for Playbook 和 Blackberry 10 的东西。对于 Mono，我建议您标准化 SignalR 以进行后端通信。众所周知，它适用于 Android 的 MonoTouch 和 Mono，但您必须对 MonoBerry 进行一些研究。

我不知道你是否可以让所有必要的部分在所有三个平台上一起工作。几乎可以肯定，最初会有相当多的头撞砖墙。但是如果你这样做了，你会比使用 C++ 更愉快。

# qt - C++ Qt - QPixmap 不使用 Qt Creator 加载，但在通过终端运行时加载

> ID：13226625
> 
> 赞同：1
> 
> 时间：2012-11-05T05:51:21.753
> 
> 标签：qt, qt-creator, qpixmap

我正在使用 Qt 编写 GUI。当我使用 运行应用程序时`QtCreator`，我的图像没有加载，并且我收到以下错误：

```
QPixmap::scaled: Pixmap is a null pixmap 
```

然而，当我通过命令行运行应用程序时，一切都完美显示。

为什么这样？我怎样才能`QtCreator`正确加载我的图像？

注意：这些图像每个都只有 20ko，所以我读到的关于图像太大的内容不适用。

编辑：一个典型的文件名是`'Images/Cards/Base/card01.jpg'`，其中`Images`是我的项目目录的子目录（代码位于根目录）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:08:15.017

如果您正在处理应该与应用程序捆绑在一起的图像，例如图标，那么您应该尝试使用[Qt 资源系统](http://doc.qt.digia.com/qt/resources.html)。

这允许您将资源构建到实际项目中，并以独立于文件系统的语法引用它们。IE：`:/icons/myIcon.png`

很可能您在 Qt Creator 中文件的相对位置与命令行之间存在差异。

# wordnet - WordNet，查询扩展，一步一步

> ID：13226629
> 
> 赞同：3
> 
> 时间：2012-11-05T05:51:26.483
> 
> 标签：wordnet, expansion

我想用WordNet做一个关于查询扩展的项目，但是很难找到一步一步的方法来做。

基于[这篇文章](http://www.codeproject.com/Articles/11835/WordNet-based-semantic-similarity-measurement)，我应该采取以下步骤（假设一个句子作为程序的输入）：

1.  代币化
2.  标注词性
3.  词干
4.  词义消歧
5.  两个同义词集之间的语义相似性（仍然令人困惑）

...然后我们可以得出结论，得分较大的单词是输入的查询扩展。但是，我仍然对如何执行这些步骤感到困惑。有没有更详细的资料来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:00:14.543

查询扩展本身就是 IR（信息检索）下的一个巨大领域。

此外，WordNet 本身就很大，因此很难找到单一的逐步方向。但是，有大量非常好的资源。我从几个网络示例开始自己尝试。

您会发现对入门很有用的资源。

1.  [wordnet 网站](http://wordnet.princeton.edu/)本身（带有示例）
2.  [WordNet](http://en.wikipedia.org/wiki/Wordnet)维基百科页面
3.  Python Programming.net 有一个[WordNet 教程页面](https://pythonprogramming.net/wordnet-nltk-tutorial/)
4.  即使您不了解 Python，我也强烈推荐 O'Reilly 的书“ **Natural Language Processing with Python** ”。它的[网站上](http://nltk.org/book/)有大量示例可以帮助您入门。

希望这可以帮助您继续前进。

# php - yii : 如何获取表的所有记录

> ID：13226630
> 
> 赞同：2
> 
> 时间：2012-11-05T05:51:33.547
> 
> 标签：php, yii

Q：如何获取表的所有记录？

状态：我想导出表的所有记录。现在，我可以导出表的前 10 条记录。我能怎么做？

这是我的模型

```
public function dashboard()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;
        $criteria->select = 't.*';

        if (Yii::app()->user->checkAccess('Reviewer') || Yii::app()->user->checkAccess('Implementer'))
            $criteria->join   = "JOIN users u ON (t.creator = u.id)";
            if($this->creator):
                $criteria->compare('u.username',$this->creator);
            else:
                if (Yii::app()->user->checkAccess('Creator')):
                    $criteria->compare('t.creator',Yii::app()->user->id);           
            endif;
        endif;

        $criteria->compare('t.request_no',$this->request_no);       
        $criteria->compare('t.description',$this->description,'true');

        if(isset($this->status)):
            $criteria->addSearchCondition('t.status',$this->status, false);
        endif;      

        if (Yii::app()->user->checkAccess('Reviewer')):
            $criteria->addSearchCondition('t.reviewers',Yii::app()->user->id,true, 'OR');
        endif;

        if (Yii::app()->user->checkAccess('Implementer')):
            $criteria->addSearchCondition('t.implementers',Yii::app()->user->id,true, 'OR');
        endif;

        //$criteria->order = ' created_date DESC';

        $all = new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));

        $_SESSION['all'] = $all;

        $data = new CActiveDataProvider(get_class($this), array(
            'pagination'=>array('pageSize'=> Yii::app()->user->getState('pageSize',
                                    Yii::app()->params['defaultPageSize']),),
            'criteria'=>$criteria,
        ));

        $_SESSION['limited'] = $data; // get all data and filtered data :)

        return $data;   
    } 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T06:35:36.047

您必须为 dataprovider 设置禁用分页。对于那个 set`pagination`属性为 false

```
$all = new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
            'pagination'=>false,
        )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:36:10.630

我找到了解决方案。

```
$all = new CActiveDataProvider(get_class($this), array(
            'criteria'=>$criteria,
        )); 
```

**get_class($this)**是解决这个问题的关键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T17:13:59.937

在 Yii2 中，以下仍然有效。

```
 // query
    $queryMessages = Messages::find()->where([
        'user_id' => Yii::$app->user->identity->patient->id,
    ]);

    // data provider
    $messagesDataProvider = new ActiveDataProvider([
        'query' => $queryMessages,
        'pagination' => false,
    ]); 
```

# iphone - 在 tableView 中洗牌单元格

> ID：13226632
> 
> 赞同：1
> 
> 时间：2012-11-05T05:52:07.200
> 
> 标签：iphone, objective-c, ios, xcode

我发布此问题是为了获得有关问题的建议。仅供参考...我已经尝试过方法 1 和 2，但我对编程（以及部分 UX）视角的结果不满意。

我有一张有 2 个部分的桌子。每个部分有 4 个单元格。每个单元格包含一个文本字段。当用户按下`Edit`按钮（位于 上`navigationBar`）时，用户可以更改单元格的位置，即 - 他/她可以将单元格从一个部分移动到另一个部分。简单的！

到目前为止，我一直在考虑三种方法。

1.  `UIButton`在每个单元格中包含一个对象。按钮可以有 + 或 - 的图像。- 将单元格从第二部分移动到第一部分，+ 将单元格从第一部分移动到第二部分。但是一旦进行了更改，按钮的图像应该从 + 变为 - 或反之亦然。但我意识到我无法以编程方式更改按钮的图像。所以我将不得不为每个单元格制作两组按钮 => 16 个按钮 + 16 个按钮来`@property`改变to和相反。我个人认为这不是最好的方法。更糟糕的是，当单元格从一个部分转换到另一个部分时，我将不得不跟踪该单元格应该出现的索引。`hidden``YES``NO`

2.  在第 1 节和第 2 节中有 8 个单元格。第二节的 4 个单元格在第一节中显示为隐藏，反之亦然。当用户在 A 部分中按下 + 时，其属性应在 A 部分中设置为隐藏，在 B 部分中应使其可见。但是，当单元格的属性设置为隐藏时，会在其位置创建一个空白，看起来非常难看。有没有办法填补空白？此外，如果我使用分组单元格，则部分末尾的剩余单元格将没有圆角底角。

3.  用户可以将单元格从一个部分拖到另一个部分。（仅供参考..拖动由三条水平线表示。）问题：拖动功能有多受欢迎？用户会在没有应用程序建议的情况下解释它吗？如果这是最好的方法，我该如何实施？

如果您能帮我选择最佳选择，我会很高兴。

谢谢！

干杯!

**编辑1：**

如果有三个部分，是否可以在 2 和 3 之间更改/移动字段，而不对第 1 部分进行任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:56:06.697

选项 3 是标准方法，已`UITableView`由其数据源和委托方法实现。用户习惯使用这个标准接口。

您需要做的就是实现与移动行有关的适当数据源和委托方法——总共三个。

如果您对实现这三种方法有任何疑问，请参阅*iOS 的 Table View Programming Guide*了解详细信息。

# php - 应用重定向到 Facebook 主页

> ID：13226639
> 
> 赞同：0
> 
> 时间：2012-11-05T05:52:46.743
> 
> 标签：php, facebook, facebook-graph-api

**这是我的 Facebook 应用程序源**

```
<?php

require 'facebook.php';
require 'config.php';

if (isset($_GET['code'])){
  header("Location: " . $canvasPage);
  exit;
}

$fb = new Facebook(array(
                'appId' => 'xxx',
                'secret' => 'xxxx',
                'cookie' => true,
                                'fileUpload' => true,

));

$me = null;

$user = $fb->getUser();

if($user) {
    try {

            $me = $fb->api('/me'); 
    } catch(FacebookApiException $e) {
            error_log($e);
    }
}
//edit the permissions needed
$permsneeded='publish_stream,user_photos';

if ($me){}
else {
    $loginUrl = $fb->getLoginUrl(array(
                'scope' => $permsneeded,
                ));

    echo "
        <script type='text/javascript'>
        window.top.location.href = '$loginUrl';
        </script>
    ";

    exit;
}

if(isset($_GET['signed_request'])) {
    $fb_args="signed_request=". $_REQUEST
    ['signed_request']; }

$signed_request = $_REQUEST["signed_request"];

list($encoded_sig, $payload) = explode(".", $signed_request, 2); 
$data = json_decode(base64_decode(strtr($payload, "-_", "+/")), true); 
if (empty($data["user_id"])) 
{
    echo("");
} 
$access_token   = $data["oauth_token"]; 

try {
$my = $fb->api('/me');
}catch(FacebookApiException $e) {
            error_log($e);
    }

$nam = $my['name'];
    $images = array(
        0 => 'celeb/1.jpg',
        1 => 'celeb/1.jpg',
        3 => 'celeb/1.jpg',
        4 => 'celeb/1.jpg',
        5 => 'celeb/1.jpg',
        6 => 'celeb/1.jpg',

    );
$image = $images[ rand(0,(count($images)-1)) ];

Some other php code

?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" >

My Code . 

</html> 
```

**我有 2 个问题。**

1.  它被重定向到 Facebook 主页。见演示：[https ://apps.facebook.com/246435698815637/](https://apps.facebook.com/246435698815637/)
2.  这是“$image = $images[rand(0,(count($images)-1))];” 有一段时间不工作了。它没有为 imagecreatefromjpeg 获取图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:47:54.180

尝试这样，请避免使用空白语句。

```
if(!($me)) 
{
    echo '<script> top.location.href="'.$facebook->getLoginUrl(array(
                    'req_perms' => $permsneeded,
                    'next' =>'https://apps.facebook.com/246435698815637/',
                    )). '";
          </script>';
    exit();
} 
```

第二个是正确的，它应该可以工作，但我不明白你的意思，`imagecreatefromjpeg`因为你没有提供任何关于它的信息。将你的代码粘贴到你使用该功能的地方。

# c# - RequestValidationMode 2.0 配置错误

> ID：13226648
> 
> 赞同：1
> 
> 时间：2012-11-05T05:53:30.333
> 
> 标签：c#, asp.net, asp.net-4.0

我必须使用

```
 <httpRuntime requestValidationMode="2.0" />
    <pages validateRequest="false" /> 
```

但是，当我在 web.config 文件中使用上述元素时，会出现以下错误：

```
<pages enableViewStateMac="false" viewStateEncryptionMode="Never" enableEventValidation="false" controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/> 
```

[问题截图](http://i.stack.imgur.com/E69bJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:16:25.183

我在我的错误中使用了两个`<page/>`标签`Wb.config`感谢@dash 纠正我。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T08:38:43.710

试试下面的配置：

```
<system.web>
<compilation debug="true" targetFramework="3.5" />
<httpRuntime requestValidationMode="2.0" />
<pages validateRequest="false" /> 
```

# iphone - 肥皂网络服务在 iPhone 中不起作用

> ID：13226650
> 
> 赞同：1
> 
> 时间：2012-11-05T05:53:48.280
> 
> 标签：iphone, ios, xcode, soap

我正在尝试以下代码，肥皂网络服务。它不工作。

请帮帮我。

[关联](http://www.simpleupc.com/api/methods/FetchProductByUPC.php)

[服务](http://www.searchupc.com/service/UPCSearch.asmx)

```
NSString *soapMessage = [NSString stringWithFormat:
@"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
"<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
"<soap:Body>\n"
"<request xmlns=\"http://searchupc.com/GenerateBarcode\">\n"
"<auth>5ggpf54TRghbnIvqS2XVGQQ0q6qCNuJ</auth>\n"
"<method>FetchProductByUPC</method>"
"<params>"
"<upc>026274920257</upc>"
"</params>"
"</request>\n"

"</soap:Body>\n"
"</soap:Envelope>\n"
];
NSLog(soapMessage);

NSURL *url = [NSURL URLWithString:@"http://www.simpleupc.com/api/"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];

[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest addValue: @"http://searchupc.com/GenerateBarcode/" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
NSLog(@"SOAP CONNECTED qqq%@",theRequest);
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:06:59.217

检查[http://sudzc.com/](http://sudzc.com/)。它将为您生成 xcode 项目。

1：键入要转换的 WSDL 的网址（如果受保护，则输入用户名和密码）

2：选择要创建的代码包类型（目标c）并下载。

只需将“Generated”文件夹拖放到您的项目中并访问所有 SOAP 消息。

尝试这个。它真的很容易和简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:09:44.577

我发现 wsdlToObjc 非常好。它从 WSDL 为您生成客户端 ObjC 绑定。您可以在[http://code.google.com/p/wsdl2objc/](http://code.google.com/p/wsdl2objc/)下载它。链接[http://www.priyaontech.com/2012/10/soap-based-webservices-integration-in-an-ios-app/](http://www.priyaontech.com/2012/10/soap-based-webservices-integration-in-an-ios-app/)通过示例项目解释了它的用法。

# mysql - Idiorm 是否从没有参数数组的数据库中获取原始查询？

> ID：13226655
> 
> 赞同：0
> 
> 时间：2012-11-05T05:54:02.617
> 
> 标签：mysql, idiorm

我正在尝试从数据库中获取查询以使其与 Idiorm 一起运行，但我注意到为了使用原始查询，我必须使用数组指定变量。我可以从数据库中获取一个查询并将其分配给一个变量并将其放入原始查询而不指定数组中的现有变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:34:51.247

我是 Idiorm 项目的维护者。如果我正确理解您的问题：

最近在 Idiorm`raw_execute`的分支中添加了一个名为的新方法。`develop`我认为这应该满足您的要求。见：[https ://github.com/j4mie/idiorm/issues/93](https://github.com/j4mie/idiorm/issues/93)

# mysql - 在 mysql 字段的每一行中插入文本

> ID：13226657
> 
> 赞同：0
> 
> 时间：2012-11-05T05:54:10.463
> 
> 标签：mysql, sql, sql-update

我有一个具有这种结构的表：

```
ID | IMG
_____________
1  | img.jpg
2  | otherimg.png
3  | img2.png 
4  | someimg.gif
5  | otherelseimg.jpg
6  | dummy.jpg
7  | jusimg.jpg 
```

我怎样才能修改每一行变成这样：

```
ID | IMG
_____________
1  | folder/img.jpg
2  | folder/otherimg.png
3  | folder/img2.png 
4  | folder/someimg.gif
5  | folder/otherelseimg.jpg
6  | folder/dummy.jpg
7  | folder/jusimg.jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:56:56.217

您可以在 mysql 中使用 CONCAT() 函数。用于连接两个或多个字符串

```
update <table>
set IMG=concat('folder/',IMG) 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!2/3c413/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T05:57:00.610

使用**[`CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)**，因为您正在使用`MySQL`.

```
UPDATE tableName
SET    IMG = CONCAT('folder/', IMG) 
```

# .htaccess - 我想显示一个仅对特定国家/地区可见的网页

> ID：13226665
> 
> 赞同：1
> 
> 时间：2012-11-05T05:54:38.820
> 
> 标签：.htaccess, drupal, drupal-7, drupal-modules

我想显示一个仅在印度可见的网页，对于世界其他地方，它应该重定向到另一个页面，有人能告诉我如何使用 Drupal 7 添加此功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:44:27.747

您需要检测用户的 IP 并基于此重定向。要检测 IP，您可以使用 GeoIP、SmartIP 等 Drupal 模块。所有这些模块仅提供 API，即您需要在模块/主题中编写逻辑。选择您需要最少维护的一种。对于geoIp，您需要在3~4个月内手动更新County List DAT文件一次，我不确定其他人。一旦你选择了你的模块，你必须为你的场景编写逻辑，像这样（这将只从首页重定向用户，即 www.example.com，如果你愿意，你可以添加它，`hook_init()`以便它在所有页面中检查。

```
$cc = geoip_country_code();
if($cc == "IN"){
  drupal_goto(MY_INDIAN_SITE_URL);
}
else{
  drupal_goto(REST_OF_WORLD_PAGE);
} 
```

您可以使用[page--front.tpl.php](http://drupal.org/node/1089656)或使用 page.tpl.php 中的[drupal_is_front_page()](http://api.drupal.org/api/drupal/includes!path.inc/function/drupal_is_front_page/7)来编写自己的逻辑。

# objective-c - 如何从表格视图控制器中删除分隔符

> ID：13226666
> 
> 赞同：1
> 
> 时间：2012-11-05T05:55:00.950
> 
> 标签：objective-c, ios, uitableview

我正在处理要从中删除分隔符的代码`UITableViewController`。我可以使用普通`viewcontroller`并添加表格视图来做到这一点，但在我使用`UITableViewController`. 界面`Builder`不会更改分隔符值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:03:18.990

如果您从 Xid 中删除分隔符，请查看图像并使用 ![在此处输入图像描述](../Images/e7d2673663a785c16dd68a230cafbb51.png)

并清理背景

![在此处输入图像描述](../Images/6a704b39cbdd68202a65d3a2bd0016f9.png)

如果您想更改代码，请使用

```
self.tblview.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:02:29.633

您可以删除它的编码

```
self.tableview.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

或在xib中选择tableview并更改分隔符样式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:38:08.143

```
my_tableView.separatorStyle = UITableViewCellSeparatorStyleNone; 
```

要不然

在**tableview属性的****Xib**中，在**STYLE**属性中选择**NONE**。

 ******* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:46:59.793

我尝试在`viewDidLoad.`其中使用它，它对我有用。

```
[self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone]; 
```

如果它不适合您，您能否检查您是否已`UITableViewControler`在 Xib 中正确创建。******

# javascript - 替换空格的javascript函数

> ID：13226667
> 
> 赞同：-2
> 
> 时间：2012-11-05T05:55:12.717
> 
> 标签：javascript, html, encode, space

嗨，你能给我一个 javascript 函数来替换空格吗`&nbsp;`

我用谷歌搜索，无法让他们工作。我目前正在使用这个功能：

```
 function escapeHTMLEncode(str) 
        {
            var div = document.createElement('div');
            var text = document.createTextNode(str);
            div.appendChild(text);
            return div.innerHTML;
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T05:57:44.597

查看[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)：

```
return str.replace(/\s+/g, '&nbsp;'); 
```

但是，您的函数名称`escapeHTMLEncode`表明您要做的不仅仅是替换空格。你能澄清你的问题吗？另请参阅[Convert special characters to HTML in Javascript](https://stackoverflow.com/questions/784586/convert-special-characters-to-html-in-javascript)，这似乎是您想要做的。

请注意，该`\s+`模式将匹配任何连续空白序列。如果您只想替换空格字符 ( `)，并将*每个*字符替换为`&nbsp;`，请使用`

 ````
return str.replace(/ /g, '&nbsp;'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:20:28.087

```
function escapeHTMLEncode(str) 
 {
   var reg = new RegExp(" ","g");//remove only space 
   return   str.replace(reg,"&nbsp;");//replace space with &nbsp;
  } 
````

# php - 在后台运行群发邮件功能

> ID：13226668
> 
> 赞同：2
> 
> 时间：2012-11-05T05:55:28.450
> 
> 标签：php, zend-framework, cron

我在我的站点中使用 zend 使用群发邮件功能，目前我正在使用 cron 作业在后台发送邮件，但它占用了服务器中的一些空间并且它不必要地每 3 分钟运行一次

**我的疑问是：**

1）有没有可能运行cron only mail send button click

2）有没有其他方法可以解决这个问题

# java - Java JDBC - 使用合并排序为批量插入准备好的语句

> ID：13226672
> 
> 赞同：0
> 
> 时间：2012-11-05T05:55:43.187
> 
> 标签：java, jdbc, prepared-statement, mergesort

我正在使用 JDBC 准备语句进行批量插入。我正在调用`ps.execute()`方法。如果失败，那么我将调用一个方法，在该方法中传递参数列表和准备好的语句。我正在使用`merge sort technique to divide the list`然后尝试插入记录，但没有成功。

这是我的代码；

从我正在调用的 executePrepareStatement 方法

```
this.executeInsertStatement(query, myCollection, 0, myCollection.size()); 
```

// 执行插入语句方法

```
public void executeInsertStatement1(String query, List myCollection, int sIndx, int eIndx) throws DBException,SQLException {

        int startIndx = sIndx, endIndx =  eIndx, mid = 0;

        try {
            try{
                if(conn.isClosed())
                    new DataService(CoreConstants.TARGET);
            } catch (Exception e) { }           
            if(startIndx >= endIndx) {
                return;
            }           
            conn.setAutoCommit(false);
            if (query != null) {
                mid = (startIndx + endIndx) / 2;
                ps = conn.prepareStatement(query);
                executeInsertStatement(query, myCollection, startIndx, mid);
                executeInsertStatement(query, myCollection, mid+1, endIndx);
                //int end_low = mid;
                //int start_high = mid + 1;
                if(mid < endIndx)
                    endIndx = mid;
                for (int i = 0; i < endIndx; i++) {
                    List list = (List) myCollection.get(i);
                    int count = 1;      
                    for (int j = 0; j < list.size(); j++) {
                        if(list.get(j) instanceof Timestamp) {
                            ps.setTimestamp(count,  (Timestamp) list.get(j));       
                        } else if(list.get(j) instanceof java.lang.Character) {
                            ps.setString(count, String.valueOf(list.get(j)));
                        }
                        else {
                            ps.setObject(count, list.get(j));
                        }
                        count++;
                    }
                    try {
                        ps.execute();   
                    } catch (Exception e) {
                        rollback();
                    }                   
                }
            }
        } catch (Exception e) {
            rollback();
        } finally{ 
            try {
                if (ps != null) {
                    ps.close();
                    ps = null;
                }
            } catch (Exception ex) {
            }
        }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:47:54.620

我不认为您使用合并排序走在正确的轨道上。我了解您正在尝试使用分而治之的概念来实现您的解决方案，但我认为您使问题变得比实际需要的更难（*并且更令人困惑/复杂）。*

如果我理解正确，您有一个数据集，您想插入到您的数据库中。你会想批量做。PreparedStatement 让您使用几个简洁的方法来做到这一点：[`addBatch()`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#addBatch%28%29)和[`executeBatch()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeBatch%28%29)

以下是我将如何尝试实现您的要求的概述：

*   当我想执行批处理时，我会设置*批处理限制，即批处理中的语句数。*除非我达到这个限制（*我可以通过使用计数器很好地跟踪*），否则我会继续添加到批次中

*   一旦达到限制，我执行批处理，重置计数器，清除批处理并重做步骤 #1

*   这将一直持续到我完成整个数据集为止。最后，根据我的要求，我将通过将数据提交到数据库甚至执行回滚来结束。

[看看这个答案](https://stackoverflow.com/a/12100587/1168372)，看看你如何着手和实施这个例子。

# java - 构造函数有很多元素。如何重构（工厂模式）

> ID：13226676
> 
> 赞同：0
> 
> 时间：2012-11-05T05:55:55.713
> 
> 标签：java, constructor, factory-pattern

我有一个工厂模式的构造函数。我正在传递许多参数。如何重构它。

```
ServerFactory serverFactory = new ServerFactory();
CalendarResults calResults= serverFactory.getResults(serverName,locale, Day, week,     
                            month,vdate,results,uri, EmailShare, inc, upperLimit, 
                            endLimit,exchWD, YearMonthDay,WeekMonthDate);
results=calResults.serverNameDay(serverName,locale, Day, week, month,vdate,
        results,uri, EmailShare, inc, upperLimit, endLimit, exchWD, YearMonthDay);

public class ServerFactory {
    public CalendarResults getResults(String serverName,String locale, String day,    
                     String week, String month, 
             boolean vdate, ArrayList<CalendarOutput> results, String uri, 
                     List<String> emailShare, int inc, int upperLimit, 
             int endLimit, NexWebDav exchWD, String yearMonth, boolean 
                     weekMonthDate){

        CalendarResults calresults=null;
        if(serverName.equals("www.google.com")){
            calresults=new Google();
        }else{
            calresults=new Exchange();
        }
        return calresults;
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:08:37.777

您可以有多个 setter 方法，`serverFactory`并且必须在调用之前调用这些方法`getResults`。

如果那些没有被调用，`getResults`应该抛出一个异常。

顺序可能如下：

```
serverFactory.setServerDetails(servername, locale);
serverFactory.setCalendarDetails(day, week, month, vdate, yearmonthday, weekmonthday);
...
...
serverFactory.getResults(results); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:19:59.933

很难说，因为您没有显示使用所有这些参数的所有代码（我假设）。

但这里有一些事情需要考虑：

*   用值对象替换原始类型的参数，这使得在什么位置期望什么参数更清楚。

*   将多个相关参数组合到值对象。一个看起来很明显的例子是upperLimit、endLimit（也可能是inc），它们最终可能会出现在一个名为Intervall 的对象中。

*   用不同的方法替换布尔值。通常布尔值用于执行不同的算法。如果是这种情况，请删除布尔值并改为使用单独的方法。

*   如果您仍然有很多且令人困惑的论点，您可能想要使用构建器模式。这和以下博客文章可能会有所帮助：http: [//blog.schauderhaft.de/2012/07/29/named-parameters-in-java/](http://blog.schauderhaft.de/2012/07/29/named-parameters-in-java/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:12:58.403

另一种代码方式是对所有`String`类型参数使用 String[]，在它们的位置几乎没有交换，如下所示：

```
public CalendarResults getResults(boolean vdate, ArrayList<CalendarOutput> results,
                 List<String> emailShare, int inc, int upperLimit, 
                 int endLimit, NexWebDav exchWD, boolean weekMonthDate,
                 String... stringParams){
          //You may get your string params as
          //stringParams[0] -> serverName
          //stringParams[1] -> locale
          //stringParams[2] -> day
          //stringParams[3] -> week
          //stringParams[4] -> month
          //stringParams[5] -> uri
          //stringParams[6] -> yearMonth
          .... 
```

虽然您现在可以使用工厂模式，但只需将所有字符串类型参数都移到最后，例如

```
 CalendarResults calResults= serverFactory.getResults(vdate,results, 
                   EmailShare, inc, upperLimit, endLimit,exchWD, WeekMonthDate,
                   serverName, locale, Day, week, month, uri,YearMonthDay); 
```

某种程度的简化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:00:05.587

将所有 String 参数字符串化并将它们拆分到构造函数中。但我推荐你目前的做法。它更具可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T06:06:57.143

与其发送这么多参数，不如考虑创建一个[值对象](http://en.wikipedia.org/wiki/Value_object)类，将其实例化并将该实例作为参数发送。

# python - Python - 在列表列表中出现子字符串

> ID：13226680
> 
> 赞同：0
> 
> 时间：2012-11-05T05:56:06.680
> 
> 标签：python, python-3.x

我正在使用一个函数，该函数将在列表列表中搜索子字符串，作为列表中每个项目的前三个字符。例如，如果子字符串是`'aaa'`并且列表列表是`[['aaa111', 'aba123', 'aaa123'], ['aaa302', 'cad222']]`，我希望函数返回百分比列表`[66, 50]`，因为`'aaa'`出现在第一个列表中 2/3 次，在第二个列表中出现 1/2 次。到目前为止，我有：

```
def percentage(list_of_lists, substring):
    count = 0
    percentage = []
    for item in list_of_lists:
        for i in item:
            if substring == i[0:3]:
                count += 1
        percentage.append(int(count / len(item) * 100))
    return percentage 
```

我知道我的代码可能过多，但我只是了解 Python 的要点，所以我并不担心。

```
>>> percentage([['aaa111', 'aba123', 'aaa123'], ['aaa302', 'cad222']], 'aaa')
[66, 150] 
```

如何在我的 list_of_lists 中逐个列表计算它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T06:02:04.393

两件事情...

1.  重置你`count`的每个循环
2.  使用 float 进行除法（仅适用于 python 2.x）

我改变了`count`->`0.0`

```
def percentage(list_of_lists, substring):
    percentage = []
    for item in list_of_lists:
        count = 0.0
        for i in item:
            if substring == i[0:3]:
                count += 1
        percentage.append(int(count / len(item) * 100))
    return percentage

# Test
In [17]: l = [['aaa111', 'aba123', 'aaa123'], ['aaa302', 'cad222']]
In [18]: s = 'aaa'
In [19]: percentage(l,s)
Out[19]: [66, 50] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:32:45.900

解决方案使用`lambda`和`map`功能：

```
>>> [(sum(map(lambda z: "aaa" in z,z))*100/len(z)) for z in [y for y in [['aaa111', 'aba123', 'aaa123'], ['aaa302', 'cad222']]]]
[66, 50] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:05:37.550

这个修改后的代码对我有用：

```
def percentage(list_of_lists, substring):
    count = 0
    percentage = []
    for item in list_of_lists:
        for i in item:
            if substring == i[0:3]:
                count += 1
        percentage.append(int(count / len(item) * 100))
        count = 0
    return percentage 
```

# php - 如何在php中查找2个日期之间的时差

> ID：13226681
> 
> 赞同：0
> 
> 时间：2012-11-05T05:56:07.743
> 
> 标签：php

我想以分钟为单位获取两个日期之间的时差。2个日期的格式如下

```
date1='05-11-2012 11:25:00'
date2='06-11-2012 17:45:00' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:57:17.000

```
$datetime1 = new DateTime('05-11-2012 11:25:00');
$datetime2 = new DateTime('06-11-2012 17:45:00');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); //return +1 days
//or
$datetime1 = date_create('05-11-2012 11:25:00');
$datetime2 = date_create('06-11-2012 17:45:00');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%R%a days'); //return +1 days 
```

对于 php <5.3

```
$date1 = '05-11-2012 11:25:00';
$date2 = '06-11-2012 17:45:00';
$diff = floor(abs( strtotime( $date1 ) - strtotime( $date2 ) )/(60*60*24));
printf("%d days\n", $diff); //return 1 days 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:00:32.510

```
<?php
$datetime1 = date_create('2009-10-11');
$datetime2 = date_create('2009-10-13');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%R%a days');
?> 
```

**如需进一步参考，请访问以下链接** [http://php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:01:07.190

您忽略了说明您希望用什么格式表示时差。如果您愿意以秒为单位工作（很容易转换），您可以简单地将每个日期转换为时间戳，然后使用基本数学计算绝对差. 例如，给出 $date1 = '05-11-2012 11:25:00' 和 $date2 = '06-11-2012 17:45:00'：

```
$diff_seconds = abs( strtotime( $date1 ) - strtotime( $date2 ) ); 
```

你可以对结果做任何你喜欢的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:16:39.967

**$start_time = strtotime("2012-10-12 11:35:00");**

**$end_time = strtotime("2012-10-13 12:42:50");**

**回声回合（ abs( $end_time - $start_time ) / 60,2 )。“ 分钟”;**

这在 MINUTES 中的两个日期之间是不同的。

# c# - 使用 basicHttpBinding 和自定义 UserNamePasswordValidator 的 WCF 身份验证？

> ID：13226682
> 
> 赞同：0
> 
> 时间：2012-11-05T05:56:15.813
> 
> 标签：c#, wcf, wcf-security, basichttpbinding

在这里，我在 WCF RESTfull 服务中实现自定义 usernamepasswordvalidator。我需要的是在`http://localhost:12229/RestServiceImpl.svc/GetStudentObj`通过 Chrome REST 客户端调用这个时，它没有验证用户名密码。它直接调用这个方法并获取结果。我在这里做错了什么？

我的界面

```
 [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetStudentObj", RequestFormat = WebMessageFormat.Json,
           ResponseFormat = WebMessageFormat.Json)]
        Student GetStudent();
    } 
```

SVC

```
public class RestServiceImpl : IRestServiceImpl
    {
        public Student GetStudent()
        {
                Student stdObj = new Student
                {
                    StudentName = "Foo",
                    Age = 29,
                    Mark = 95
                };
                return stdObj;

        }

        public class CustomUserNameValidator : UserNamePasswordValidator
        {
           public override void Validate(string userName, string password)
            {

                if (null == userName || null == password)
                {
                    throw new ArgumentNullException("You must provide both the username and password to access this service");
                }

                if (!(userName == "user1" && password == "test") && !(userName == "user2" && password == "test"))
                {

                     throw new SecurityTokenException("Unknown Username or Incorrect Password");
                }
            }
        }

    } 
```

和 Web.Config

```
 <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpTransportSecurity">
          <security mode="Transport">
            <transport clientCredentialType="Basic"></transport>
          </security>
        </binding>
      </webHttpBinding>
    </bindings>
    <protocolMapping>
      <add scheme="http" binding="webHttpBinding"/>
    </protocolMapping>
    <services>
      <service name="RestService.RestServiceImpl" >
        <endpoint address="" binding="webHttpBinding" contract="RestService.IRestServiceImpl"></endpoint>
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior>
          <webHttp />
        </behavior >
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="SecureRESTSvcTestBehavior">
<serviceMetadata httpGetEnabled="false" httpsGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <serviceCredentials>
            <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="RESTfulSecuritySH.CustomUserNameValidator, RESTfulSecuritySH" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:37:02.723

您似乎没有为您的服务设置自定义行为。

您需要使用 behaviorConfiguration 属性告诉服务您的**SecureRESTSvcTestBehavior行为：**

```
<service name="RestService.RestServiceImpl" behaviorConfiguration="SecureRESTSvcTestBehavior">
    <endpoint address="" binding="webHttpBinding" contract="RestService.IRestServiceImpl"></endpoint>
</service> 
```

# android - 显示全屏图像

> ID：13226687
> 
> 赞同：0
> 
> 时间：2012-11-05T05:56:49.443
> 
> 标签：android, gridview

我有图像存储在 sdcard 中，我在 gridview 中显示它，现在我想在 gridview OnItemCLick Listener 上显示全屏图像。我没有在下一个屏幕上获得全屏图像。只有空白屏幕显示。

```
 public class MyMenu extends Activity{
    public class ImageAdapter extends BaseAdapter {
        private Context mContext;
        ArrayList<String> itemList = new ArrayList<String>();
        public ImageAdapter(Context c) {
            mContext = c; 
        }
        void add(String path){
            itemList.add(path); 
        }
        public int getCount() {
            return itemList.size();
        }
        public Object getItem(int arg0) {

            return null;
        }
        public long getItemId(int position) {

            return position;
        }
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView;
            if (convertView == null) {  // if it's not recycled, initialize some attributes
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(90, 70));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(8, 8, 8, 8);
            } else {
                imageView = (ImageView) convertView;
            }

            Bitmap bm = decodeSampledBitmapFromUri(itemList.get(position), 90, 70);
            imageView.setImageBitmap(bm);
            return imageView;
        }
        public Bitmap decodeSampledBitmapFromUri(String path, int reqWidth, int reqHeight) {

            Bitmap bm = null;
            // First decode with inJustDecodeBounds=true to check dimensions
            final BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeFile(path, options);
            // Calculate inSampleSize
            options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);
            // Decode bitmap with inSampleSize set
            options.inJustDecodeBounds = false;
            bm = BitmapFactory.decodeFile(path, options); 
            return bm;   
        }

        public int calculateInSampleSize(

                BitmapFactory.Options options, int reqWidth, int reqHeight) {
            // Raw height and width of image
            final int height = options.outHeight;
            final int width = options.outWidth;
            int inSampleSize = 1;

            if (height > reqHeight || width > reqWidth) {
                if (width > height) {
                    inSampleSize = Math.round((float)height / (float)reqHeight);    
                } else {
                    inSampleSize = Math.round((float)width / (float)reqWidth);    
                }   
            }
            return inSampleSize;    
        }
    }
    ImageAdapter myImageAdapter;
    private static final int CAMERA_REQUEST = 1888; 
    ImageButton camera,lib,baby,info;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.mymenu);
        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View v, int position,
                    long id) {
                Intent i5=new Intent(getApplicationContext(),FullScreenSd.class);
                i5.putExtra("id", position);
                startActivity(i5);
            }
        });
        myImageAdapter = new ImageAdapter(this);
        gridview.setAdapter(myImageAdapter);
        File folder = new File(Environment.getExternalStorageDirectory() + "/temp/");
        if (folder.exists()) {
            String ExternalStorageDirectoryPath = Environment
                    .getExternalStorageDirectory()
                    .getAbsolutePath();
            String targetPath = ExternalStorageDirectoryPath + "/temp/";
            File targetDirector = new File(targetPath);
            File[] files = targetDirector.listFiles();
            for (File file : files){
                myImageAdapter.add(file.getAbsolutePath());
            } 
        } 
```

接收类是，

```
image=(ImageView)findViewById(R.id.image);
        Intent i = getIntent();
        int resId = i.getExtras().getInt("id");
        image.setImageResource(resId); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:12:53.997

```
i5.putExtra("id", position); 
```

和

```
image.setImageResource(resId); 
```

你到底在这里做什么？位置是它在网格视图中的位置。你为什么把它当作身份证？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:55:37.933

这个问题有四个解决方案，但前两个解决方案是正确的。

1）将位图转换为字节数组，然后传递到活动中。

将位图转换为字节数组：-

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组传递给意图：-

```
Intent intent = new Intent(this, NextActivity.class);
intent.putExtra("picture", byteArray);
startActivity(intent); 
```

从 Bundle 中获取字节数组并转换为位图图像：-

```
Bundle extras = getIntent().getExtras();
byte[] byteArray = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

2）首先将所选图像保存到内部或外部存储器中，然后将图像放入下一个活动并全屏显示。

3）将图像网址传递给下一个活动，然后在全屏活动中再次下载图像，然后在图像视图中显示。

4）将位图传递给活动。（但如果你的图像尺寸太大，那么这个解决方案不起作用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:20:58.143

您所做的`i5.putExtra("id", position);`部分是被点击的元素的位置。这不是您需要的，您需要单击项目的 resId。假设您将 resIds 存储在某个数组中，您应该通过`i5.putExtra("id", resIdArray[position]);`

# scala - 使用 def/val/var 以及如何在链表中定义空元素

> ID：13226688
> 
> 赞同：2
> 
> 时间：2012-11-05T05:56:50.020
> 
> 标签：scala

我想实现某种简单的链表。

我定义了一个抽象的 No，接下来是一个字段，它的类型是 Node。然后我有一堆其他的特定节点，继承抽象节点。

我这样写：

```
abstract class Node {
  def next: Node   
}

case class SpecificNode(nxt: Node) extends Node {
  val next = nxt
}

object NullNode extends Node{
  val next = new Exception("no more node")
} 
```

但是，我发现我需要稍后在SpecificNode中更改该字段，所以我制作

```
case class SpecificNode(nxt: Node) extends Node {
  var next = nxt
} 
```

但是，我不能分配给`next`某个特定节点的实例的字段，例如`sn.next = ...`，因为编译器抱怨`next_`不是节点的成员。

然后我改为`var`在抽象类 Node 中使用该`next`字段。

但是当我新建一个 NullNode 时，会抛出异常（因为我是这么定义的..）

那么我应该如何在这里使用`var`, `def`,`val`呢？我应该如何定义 NullNode，它表示不再有节点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:25:33.890

您需要在界面中明确定义 getter/setter。在我们的例子中（不改变结构和想法）：

```
trait Node {
    def next: Node
    def next_=(node: Node)
}

// `var next: Node` generates implementations for `def next: Node` and `def next_=(node: Node)`
case class SpecificNode(var next: Node) extends Node

object NullNode extends Node {
    def next = throw new Exception("no more node")
    def next_=(node: Node) { throw new Exception("can't change next on null node") }
}

val n1 = SpecificNode(NullNode)
val n2 = SpecificNode(SpecificNode(NullNode))
val n3: Node = SpecificNode(n1)

// some function to test our structure:
def length(n: Node, prev: Int = 0): Int = if (n == NullNode) prev else length(n.next, prev + 1)

println(length(n3))
n3.next = n2
println(length(n3)) 
```

旁注：这是可变链表，我建议你检查不可变列表是如何在标准 scala 库中实现的

# kernel - 托管内核和虚拟机之间的差异

> ID：13226693
> 
> 赞同：7
> 
> 时间：2012-11-05T05:57:11.643
> 
> 标签：kernel, virtual-machine, microkernel, amiga

我一直在阅读 AROS，尤其是托管版本。AROS 说如下。

> ```
> kernel.resource contains AROS microkernel. It's the lowest level component,
> which is responsible for handling CPU and motherboard. For
> hosted ports kernel.resource contains a virtual machine. 
> ```

根据我对虚拟机的了解，有两种类型的系统虚拟机和进程虚拟机。我知道 AROS 不是系统虚拟机，但所有进程虚拟机都类似于 Java JVM、Mono、Python、Ruby 等。它们都与特定语言接缝。AROS 似乎是一个在用户模式下运行的完整系统/平台，类​​似于用户模式 ​​Linux。

> AROS 托管：操作系统中的操作系统？
> 
> AROS 最初是在基于 Intel 的计算机上运行的 Linux 上开发的。不过，它可以在更多的机器和操作系统上运行。这听起来可能很奇怪：一个运行在另一个操作系统之上的操作系统，这就是仿真，对吧？
> 
> AROS 托管的一个很好的术语是“API 仿真”。API 是 Application Programmer's Interface 的三个字母的首字母缩写词。简而言之：API 提供程序员可以使用的（C 语言）函数。AmigaOS API 包含大量库调用，Amiga 程序员可以使用这些库调用来制作 Amiga 程序。AROS 模拟 AmigaOS API：它尝试提供与 AmigaOS 相同的库调用。Amiga 模拟器，例如阿联酋；模拟 Amiga 计算机：处理器、连接的硬件，一切。这有它的优点，比如能够在不同的硬件上玩二进制 Amiga 游戏，也有它的缺点，比如不能在“真实”处理器上将模拟器用作“真实”操作系统。AROS 托管在“真实”处理器上运行。但这不是“真实的” 操作系统，除非您以不需要 Linux 的方式运行。这称为“本机”AROS。
> 
> AROS 可以在 Intel 和 Amiga 计算机上本地运行，但不如在 Linux 上运行。AROS 库函数首先在 Linux 下运行，内部使用 Linux 内核和库调用。这样，程序员就有机会先操心整个系统的实现，再操心以后体育场的技术细节。人们目前正在努力使“原生”AROS 更加可用。结果非常令人印象深刻，完全有可能将 AROS-native 用作 IBM PC 兼容机器上的真实（且唯一）操作系统。
> 
> 当然，AROS 不仅仅是一个 API 模拟器。它还尝试为所有 AmigaOS 3.1 系统软件提供替代品，您还会发现一些演示和游戏随 AROS 一起提供，只是为了证明它们可以工作 - 我们可能只占整个系统的 77%，但我们已经有 Quake 运行了！

从这些信息中，我觉得 AROS kernel.resource 在用作虚拟机时只是简单地包装了 Linux 内核的系统调用接口？还是我错过了什么

另外还有像AROS这样的系统吗？

我想做这样的东西，可以在许多操作系统上托管。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-08T14:23:45.417

（编者注：这个问题征求意见，因为我固执己见......）：

内核架构的分类不像物种甚至头发颜色那样严格。像（微|单片|虚拟）内核这样的术语比分类分区更模糊的描述。这有助于将啤酒卖给有争议的极客。

所有内核都呈现某种虚拟机。在 UNIX 中，它通常是用户模式指令集 + 解释一组系统调用以执行各种操作 + 一些 CPU 作为线程。这个抽象机器可以强制执行其他规则，例如内存类型（堆栈、堆、文本）的位置和范围。在虚拟化内核中，它通常是整个指令集、一组 CPU、内存和设备。在大多数情况下，对内存的访问由虚拟化内核（常见：管理程序）仲裁，设备通过解释对它的访问在管理程序内实现，系统指令由管理程序模拟。

但是这两个（UNIX，管理程序）都呈现虚拟机，只是具有不同的抽象。UNIX 虚拟机可能有一个优先级的概念，即一个进程确定它应该或多或少地优先使用 CPU 或内存资源；而纯虚拟计算机（管理程序）将无法传达这样的概念。

无论环境如何，在我的执行单元（进程、虚拟机）中，我可能会选择制定我自己的线程、进程、设备和交互的运行时概念。gvisor项目提供了这个*概念*的相当完整的实现，但即使是 golang 运行时也将 golang 程序与底层内核分离。对于倾向于将内核视为特权共享库的 C 程序员来说，这是一个相当陌生的概念。

所以，是的，您可以在内核下运行内核，直到满足您的心愿。使用 linux 很有趣，如果你在周围搜索一下，你可以弄清楚如何构建一个使用 qemu-* 作为加载器的容器，这样你的分区就可以在 x86 机器上运行 arm bash 并无缝运行 arm 和 x86 二进制文件。当你向他们展示这个时，你的朋友会取笑你。

实际问题：

..还是我错过了什么..？AROS 可以将自己嵌套在 Linux 环境中，不会将 Linux 环境泄露给它的客人。在这种模式下运行内核通常称为*托管*。请参阅 gvisor 示例，了解您可以如何做到这一点，甚至无需成为 root。

有没有其他类似 AROS 的系统？无数。

# java - 使用 Java 在 Excel 中创建数据透视图的设计 API

> ID：13226694
> 
> 赞同：2
> 
> 时间：2012-11-05T05:57:14.750
> 
> 标签：java, excel, apache-poi, pivot-table, smartxls

我是 Java 开发人员，我想设计用于在 Excel 中创建数据透视表的 Java API。但是，我被困住了，我将如何创建一个？有没有人知道如何设计用于在 Excel 中创建数据透视表的 Java API。我熟悉 POI、SmartXLS API，但 POI 没有提供在 Excel 中创建数据透视表的任何方法，SmartXLS 是要花钱的。所以请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:03:46.320

您可以使用[ZK Pivottable](http://www.zkoss.org/product/zkpivottable)进行数据透视表相关的开发。ZK 是一个开源框架看看[这里](http://en.wikipedia.org/wiki/ZK_Framework)

# sharepoint - 使用 ADFS 2.0 在基于声明的 SharePoint 2010 站点中以不同用户身份登录的问题

> ID：13226698
> 
> 赞同：1
> 
> 时间：2012-11-05T05:57:40.470
> 
> 标签：sharepoint, sharepoint-2010, adfs2.0

我们有一个使用 ADFS 2.0 配置的基于声明的身份验证的 SharePoint 2010 网站。

我们在 Welcome.acx 中自定义了 SignOut 选项，以将 SignOut 链接指向 ADFS SignOut URL，即`https://myadfsserver/adfs/ls/?wa=wsignoutcleanup1.0` 负责从所有依赖方注销用户。但是，如果由于某种原因未完成完全注销，并且用户尝试浏览他无权访问的网站，在这种情况下，用户将被重定向到 SharePoint 的 OOB AccessDenind.aspx 页面。

此页面为用户提供了以不同用户身份登录的链接，但由于某种原因，单击此链接不会将用户带到 ADFS 登录页面，而是仅将用户带回相同的 AccessDenied 页面。有人可以告诉我如何让这个登录作为不同的用户功能工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T18:33:48.993

SharePoint 创建一个存储在本地磁盘上的 cookie，您必须强制它使用基于会话的 cookie。

[http://www.shailensukul.com/2010/05/adfs-2-sharepoint-2010-signout.html](http://www.shailensukul.com/2010/05/adfs-2-sharepoint-2010-signout.html)

# fullcalendar - 在 jquery 完整日历中为特定事件日添加颜色

> ID：13226709
> 
> 赞同：0
> 
> 时间：2012-11-05T05:58:30.573
> 
> 标签：fullcalendar, jquery, background-color

我正在使用 jQuery 完整日历来显示来自我的一个数据库表的人所拍摄的叶子。
有不同类型的叶子。我需要在特定的一天以不同的颜色显示每种休假类型。

假设我在 11 月 1 日休年假，在 11 月 3 日休休假。所以我需要在同一个日历中以两种不同的颜色显示这两种不同的休假类型。

请你帮助我好吗。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:33:17.243

尝试`className`在事件中使用参数。那应该有帮助。

示例 json

```
{
    title     : 'Some title',
    start     : '2012-11-05',
    className : 'casual_leave',
} 
```

示例 CSS

```
.casual_leave{
    background-color: #F00;
    color: #FFF;
} 
```

同样，您可以在 css中有许多不同的类和 assign`background-color`和`color`（如果我没记错的话）详细信息`border`

# perl - 如何在 Devel::Cover 的报告中列出未发现的 pm/pl 文件

> ID：13226710
> 
> 赞同：4
> 
> 时间：2012-11-05T05:58:56.790
> 
> 标签：perl, devel-cover

我的目录/文件是这样的：

```
/lib/a.pm
/lib/b.pm
/lib/c.pm
..
/lib/n.pm

/lib/start.pl 
```

start.pl 是一个交互式程序，它会根据我的选择调用不同的 pm。

当我运行 start.pl 时

```
Devel::Cover :  PERL5OPT=-MDevel::Cover /lib/start.pl 
```

输出 html 报告将列出所有调用的 pms start.pl。我想列出所有 pms。所有，包括那些被调用的 pms start.pl 和那些没有被调用的。这将帮助我获得在当前测试期间未使用的 pm。

这可以由 Devel::Cover 完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T20:26:21.987

不幸的是没有。如果没有执行模块的任何部分，则 Devel::Cover 不知道该模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:10:30.627

如果我是正确的，则 Devel::Cover 与证明一起使用来检测测试的覆盖率。

你应该编写测试然后你可以使用Devel::Cover。

简短教程（基于 Windows）： http: [//perl-node-interface.blogspot.co.uk/2011/06/how-to-use-develcover.html](http://perl-node-interface.blogspot.co.uk/2011/06/how-to-use-develcover.html)

官方教程：[http ://search.cpan.org/dist/Devel-Cover/lib/Devel/Cover/Tutorial.pod](http://search.cpan.org/dist/Devel-Cover/lib/Devel/Cover/Tutorial.pod)

# c# - 在配置文件中创建自定义部分

> ID：13226711
> 
> 赞同：1
> 
> 时间：2012-11-05T05:58:59.743
> 
> 标签：c#, web-config, app-config

我正在尝试在 app.config 文件中创建自定义部分

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="BlogSettings" type="ConsoleApplication1.BlogSettings,   
      ConsoleApplication1" />
  </configSections>
  <BlogSettings
    Price="10"
    title="BLACKswastik" />
</configuration> 
```

C#代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Configuration;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string title = BlogSettings.Settings.Title;

            Console.WriteLine(title);
            Console.ReadKey();
        }
    }

    public class BlogSettings : ConfigurationSection
    {
        private static BlogSettings settings
          = ConfigurationManager.GetSection("BlogSettings") as BlogSettings;

        public static BlogSettings Settings
        {
            get
            {
                return settings;
            }
        }

        [ConfigurationProperty("Price"
          , DefaultValue = 20
          , IsRequired = false)]
        [IntegerValidator(MinValue = 1
          , MaxValue = 100)]
        public int Price
        {
            get { return (int)this["Price"]; }
            set { this["Price"] = value; }
        }

        [ConfigurationProperty("title"
          , IsRequired = true)]
        [StringValidator(InvalidCharacters = "  ~!@#$%^&*()[]{}/;’\"|\\"
          , MinLength = 1
          , MaxLength = 256)]
        public string Title
        {
            get { return (string)this["title"]; }
            set { this["title"] = value; }
        }
    }
} 
```

但是当我运行这段代码时，我收到了这个错误：

> *'ConsoleApplication1.BlogSettings' 的类型初始化程序引发了异常。*

请告诉我我在做什么错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:09:57.010

您应该在 CodeProject 上查看 Jon Rista 关于 .NET 2.0 配置的三部分系列。

*   [揭开 .NET 2.0 配置的奥秘](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration.aspx)
*   [解读 .NET 2.0 配置的奥秘](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration2.aspx)
*   [破解 .NET 2.0 配置的奥秘](http://www.codeproject.com/KB/dotnet/mysteriesofconfiguration3.aspx)

强烈推荐，写得很好，非常有帮助！这将使您对 .NET 配置系统有一个透彻的了解。

Phil Haack 也有一篇很棒的博客文章[自定义配置部分的三个简单步骤](http://haacked.com/archive/2007/03/12/custom-configuration-sections-in-3-easy-steps.aspx)，它将让您快速开始构建自己的自定义配置部分。

[要设计您自己的自定义部分，还有一个名为Configuration Section Designer](http://csd.codeplex.com/)的便捷工具（Visual Studio 插件），它可以让您轻松轻松地创建您自己的自定义部分，并让它构建处理该自定义部分所需的所有代码部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:02:52.153

将其移出配置部分

```
 <BlogSettings
    Price="10"
    title="BLACKswastik" /> 
```

您创建了一个新的配置参考，因此它现在可以成为自己的节点。

# cuda - Cuda中的运算符重载

> ID：13226712
> 
> 赞同：3
> 
> 时间：2012-11-05T05:59:01.547
> 
> 标签：cuda, pycuda

我通过执行以下操作成功地在两个 float4 之间创建了一个 operator+：

```
__device__ float4 operator+(float4 a, float4 b) {
 // ...
} 
```

但是，如果另外，我想为 uchar4 提供一个 operator+，通过对 uchar4 执行相同的操作，我会收到以下错误：“错误：多个重载函数“operator+”实例具有“C”链接“”

当我声明多个具有相同名称但参数不同的函数时，我会收到类似的错误消息。所以，两个问题：

*   **多态性**：在 Cuda 中是否可以有多个具有相同名称和不同参数的函数？如果是这样，为什么我会收到此错误消息？
*   **operator+ for float4**：似乎这个特性已经包含在“cutil_math.h”中，但是当我包含那个（`#include <cutil_math.h>`）时，它抱怨没有这样的文件或目录......我应该做些什么特别的事情？注意：我使用的是 pycuda，它是 python 的 cuda。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T07:57:17.380

请注意错误中的“具有“C”链接”。您正在使用 C 链接编译代码（pyCUDA 默认执行此操作以规避符号修饰问题）。C++ 不能使用 C 链接支持同一函数名的多个定义。

解决方案是在不自动生成“extern C”的情况下编译代码，并仅为内核明确指定 C 链接。所以你的代码看起来像：

```
__device__ float4 operator+(float4 a, float4 b) { ... };

extern "C"
__global__ void kernel() { }; 
```

而不是发出的标准pyCUDA：

```
extern "C" 
{
     __device__ float4 operator+(float4 a, float4 b) { ... };

     __global__ void kernel() { };
} 
```

`pycuda.compiler.SourceModule`有一个选项`no_extern_c` 可用于控制是否`extern "C"`由即时编译系统发出。

# pagination - Magento 1.7：从顶部删除分页并在底部保留分页

> ID：13226713
> 
> 赞同：4
> 
> 时间：2012-11-05T05:59:05.073
> 
> 标签：pagination, magento-1.7, magento

我正在使用magento 1.7。在我的主页中，每个类别都有分页，分页出现在每个类别的顶部和底部。我想从顶部删除分页并将分页保持在底部。

为了包括分页，我使用了以下代码，

CMS > 页面 > 设计 > 布局更新 XML

```
<reference name="content">
  <block type="catalog/product_list" name="home" template="catalog/product/list.phtml">
    <action method="setCategoryId"><category_id>137</category_id></action>
    <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
    <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
      <block type="page/html_pager" name="product_list_toolbar_pager"/>
    </block>
    <action method="setToolbarBlockName"><name>product_list_toolbar</name><count>5</count></action>
  </block>
</reference> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T07:03:30.363

您好，分页使用 gettoolbarhtml() 检查以下文件

**`/app/design/frontend/default/your_theme/template/catalog/product/list.phtml`**

在下面的行评论

> // 回显 $this->getToolbarHtml()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:00:24.293

您可以通过以下方式实现您的目标：

```
<reference name="your_parent_block_name">
    <remove name="block_name_you_want_to_remove"/>
</reference> 
```

# matlab - matlab：GUI，自定义图例

> ID：13226716
> 
> 赞同：0
> 
> 时间：2012-11-05T05:59:41.670
> 
> 标签：matlab, user-interface, plot, axes

在一张图表上，我有几个线图和一个点图，如下所示：

```
for i = 1:10
    plot(x_1(i, :), y_1(i, :), '-k');
end

plot(x_2, y_2, '.r')' 
```

现在我想要一个简单的 2 元素图例，显示线（只有一个，不是全部）和点的描述。怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:10:38.457

使用手柄：

```
for i = 1:10
    h_line(i) = plot(x_1(i, :), y_1(i, :), '-k');
end

h_dots = plot(x_2, y_2, '.r');

legend([h_line(1) h_dots],{'line','dots'}) 
```

# c# - 通过 Twitter API 阅读推文？

> ID：13226717
> 
> 赞同：0
> 
> 时间：2012-11-05T05:59:42.927
> 
> 标签：c#, twitter, twitter-oauth

如果 Alice、Bob 和 cat 授予您的应用访问权限

应用程序能否从授予您应用程序的所有用户那里获得全局提要？

您的应用将如何收到新推文的通知？我们是否能够一次从每个用户那里获取用户推文内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:36:05.133

> 应用程序能否从授予您应用程序的所有用户那里获得全局提要？

不，您仍然需要令牌。检索令牌需要用户交互

> 您的应用将如何收到新推文的通知？

它不会。您可以定期请求推文列表

# android - 使用谷歌地图上的密码获取经纬度

> ID：13226721
> 
> 赞同：1
> 
> 时间：2012-11-05T06:00:09.257
> 
> 标签：android, google-maps, geolocation, latitude-longitude, google-maps-mobile

我需要在给定 PIN 码或区号的情况下加载 Google 地图位置。我尝试使用 Geocoder 方法使用给定地址查找纬度和经度。这在给出位置或区域时有效，但不适用于密码（特别是印度）。是否有任何方法或方法可以使用密码查找给定区域的纬度和经度。

这是特定于要在 android 上加载的地图，使用 mapview。

我写的代码如下：

```
package com.example.geocodingexample;

import java.io.IOException;
import java.util.List;
import java.util.Locale;
import android.location.Address;
import android.location.Geocoder;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.LinearLayout;
import android.widget.Toast;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class MainActivity extends MapActivity {
MapView mapView;
MapController mapController;
GeoPoint p;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mapView = (MapView) findViewById(R.id.mapview);
    mapController = mapView.getController();
    mapView.setBuiltInZoomControls(true);
    mapController = mapView.getController();
    mapController.setZoom(14);
    Geocoder geoCoder = new Geocoder(this, Locale.getDefault());
    try {
        List<Address> addresses = geoCoder.getFromLocationName("karnataka",
                1);
        String add = "";
        if (addresses.size() > 0) {
            p = new GeoPoint((int) (addresses.get(0).getLatitude() *    1E6),
                    (int) (addresses.get(0).getLongitude() * 1E6));
            mapController.animateTo(p);
            mapView.invalidate();
            Log.i("latitude obtained", String.valueOf(p.getLatitudeE6()));
            Log.i("longitude obtained", String.valueOf(p.getLongitudeE6()));
            Toast.makeText(this, "lat obtained", Toast.LENGTH_SHORT).show();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:03:35.320

对于印度，它不能通过 Pincode 工作。

但是尝试这种替代方法。您可以添加其他参数，例如“Near=”，也许您可​​以将印度州添加到查询中并使其工作。

这可能有效，但我不确定。玩得开心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:52:06.797

当您增加方法签名中的位置数量时，它会起作用。

```
 getFromLocationName("karnataka",
                        5); 
```

它会给你纬度和经度。前任： -

```
 public void  findLocationName()
        {
     try {
    Geocoder gcd = new Geocoder(this, Locale.getDefault());
    List<Address> addresses;

    addresses = gcd.getFromLocationName("110002",5);

    for(int i=0;i<addresses.size();i++){
    Log.e("","in loop");
    Log.e("","lat :,,,,,,,,,,,,,"+addresses.get(i).getLatitude()+"  long............"+addresses.get(i).getLongitude());     
Toast.makeText(this, "lat : "+addresses.get(i).getLatitude(),1).show();
 Toast.makeText(this, "long : "+addresses.get(i).getLongitude(),1).show();
  }

     }
  catch (IOException e) {e.printStackTrace();}
    } 
```

# php - 解析对象数组

> ID：13226726
> 
> 赞同：0
> 
> 时间：2012-11-05T06:00:49.777
> 
> 标签：php, arrays, object, mixed

在打印名为`$userStatistic`.

```
OnApp_User_BillingStatistics Object
        (
            [_tagRoot] => vm_stat
            [_resource] => vm_stats
            [fields:protected] => 
            [dynamicFields:protected] => Array
                (
                    [] => stdClass Object
                        (
                            [created_at] => 2012-11-01T00:00:22Z
                            [currency_code] => AUD
                            [id] => 1459 
```

我怎样才能解析这个并获得`created_at`其他东西的价值。？我曾尝试使用`$userStatistic->created_a`t。但它没有返回任何东西。然后我尝试使用`$userStatistic[0]->created_at`. 但它抛出致命错误

> 致命错误：不能使用 OnApp_User_BillingStatistics 类型的对象作为数组

如何解析这个混合变量？

注意：对于在 Array in 之后没有此方括号的其他响应`dynamicFieldsm`，我可以使用`$userStatistic->created_at`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:09:06.480

它不是对象数组，而是包含数组的对象。对对象变量使用 ->，对数组使用 []，创建于 is `$userStatistic->dynamicFields[0]->created_at`

# python - 我如何在谷歌应用引擎中进行单元测试？

> ID：13226727
> 
> 赞同：3
> 
> 时间：2012-11-05T06:00:53.733
> 
> 标签：python, google-app-engine

在搜索甚至阅读有关应用程序引擎单元测试的文档后，我仍然无法使其在我的项目中运行。

任务很简单，我在 main.py 中有我的模型和请求处理程序。我已经安装了[gaetestbed](https://github.com/jgeewax/gaetestbed/)并将其包含在我的测试类中。

我的测试类看起来像这样；

```
from main import CloudDocument   # My model
class TestCloudDocument(DataStoreTestCase, unittest.TestCase):
    def test_find_document(self):
        self.assertEqual(CloudDocument.all().count(), 0) 
```

当我运行上述测试时，它返回 True 但我的数据存储区有记录，我预计此测试会失败。

似乎测试类没有看到我的应用程序的数据存储区。我怎样才能让它看到并访问我的本地数据存储？

加思

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:59:09.210

单元测试在独立的环境中运行，具有自己的本地数据存储。只有您在测试或`setUp`函数中添加的记录才会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T18:24:04.630

无耻插件：如果你想从 setUp 方法中加载很多对象，你可以使用[appengine-fixture-loader](https://github.com/rbanffy/appengine-fixture-loader)包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T18:41:03.170

我建议使用 ext.testbed（[Python 的本地单元测试](https://developers.google.com/appengine/docs/python/tools/localunittesting)）而不是 gaetestbed。正如 JJ（gaetestbed 的维护者）所指出的，它被 ext.testbed 所取代

如果您这样做并且想要测试现有和填充的数据存储，您可以这样做

```
 def init_datastore_v3_stub(self, enable=True, datastore_file=None,
                             use_sqlite=False, **stub_kw_args):
    """Enable the datastore stub.

    The 'datastore_file' argument can be the path to an existing
    datastore file, or None (default) to use an in-memory datastore
    that is initially empty.  If you use the sqlite stub and have
    'datastore_file' defined, changes you apply in a test will be
    written to the file.  If you use the default datastore stub,
    changes are _not_ saved to disk unless you set save_changes=True.

    Note that you can only access those entities of the datastore file
    which have the same application ID associated with them as the
    test run. You can change the application ID for a test with
    setup_env().

    Args:
      enable: True if the fake service should be enabled, False if real
        service should be disabled.
      datastore_file: Filename of a dev_appserver datastore file.
      use_sqlite: True to use the Sqlite stub, False (default) for file stub.
      stub_kw_args: Keyword arguments passed on to the service stub.
    """ 
```

[http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/testbed/__init__.py#431](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/testbed/__init__.py#431)

# javascript - 自定义地图类型：重复地图和标记。如何为地图添加填充？

> ID：13226728
> 
> 赞同：12
> 
> 时间：2012-11-05T06:00:57.810
> 
> 标签：javascript, google-maps, google-maps-api-3

使用 Google Maps API (v3)，我为虚构的游戏世界创建了自定义地图类型。默认情况下，地图，甚至自定义地图类型，水平重复（见下图）。

* * *

![在此处输入图像描述](../Images/6f4718198af9b6ed61b402be7042e407.png) [大图在这里](https://i.imgur.com/RUVMo.jpg)

* * *

*是否可以防止地图水平重复？*对于我的地图，它并不代表行星或球形世界，因此让它永远水平重复根本没有意义。我已经想出了如何简单地不为左右重复的地图加载图块，如下所示：

![在此处输入图像描述](../Images/05ffeaa66c790ba1a07fdd4fbc112ad0.png) [大图在这里](https://i.imgur.com/GYWfx.jpg)

* * *

但是，当您创建标记时，标记仍会显示在所有重复的地图中：

![在此处输入图像描述](../Images/f0528be07cf0a4fa72e63519a504f074.png) [大图在这里](https://i.imgur.com/bplQP.jpg)

*是否可以防止标记重复？*或者有没有可能让地图完全不重复？这样我就不必处理重复的标记？

* * *

**变通方法：将平移限制在地图边界之外** 我已经阅读了各种变通方法，这些变通方法仅讨论了限制用户可以向左或向右平移的距离。这对我不起作用，因为我必须允许用户一直放大并立即查看整个地图。如果它们一直放大，重复的标记仍然可见，这是不可接受的。

* * *

*是否可以在地图上添加一堆填充？*这样地图之间就有很大的空间：

![在此处输入图像描述](../Images/6596f923388194a17c532180b888aadc.png) [大图在这里](https://i.imgur.com/KnxXh.jpg)

如果我能够添加足够的填充，那么限制平移将对我有用，因为任何重复的标记都可能被填充推得足够远，以至于用户永远看不到它们。

* * *

最后是我的代码，非常简单：

（注意：我使用的地图瓦片图像尚未在线提供）

```
<!DOCTYPE html>
<html style='height: 100%'>
    <head>
        <link rel="stylesheet" type="text/css" href="normalize.css" />
        <style>
            html, body { height: 100%;}
            #map_canvas { height: 1000px;}
        </style>

    </head>
    <body style='height: 100%'>
        <div id="map_canvas"></div>

        <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script type='text/javascript'>

            var options =
            {
                getTileUrl: function(coord, zoom)
                {
                    // Don't load tiles for repeated maps
                    var tileRange = 1 << zoom;
                    if ( coord.y < 0 || coord.y >= tileRange || coord.x < 0 || coord.x >= tileRange )
                        return null;

                    // Load the tile for the requested coordinate
                    var file = 'images/zoom' + zoom + '/tile_' + zoom + '_' + (coord.x) + '_' + (coord.y) + '.jpg';

                    return file;
                },
                tileSize: new google.maps.Size(256, 256),
                minZoom: 1,
                maxZoom: 9,
                radius: 1738000, // I got this from an example in the api, I have no idea what this does
                name: 'Map',
            };

            var mapOptions =
            {
                center: new google.maps.LatLng(0,0),
                zoom: 2,
                backgroundColor: '#000',
                streetViewControl: false,
                mapTypeControl: false
            };

            var map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);
            var mapType = new google.maps.ImageMapType(options);
            map.mapTypes.set('map', mapType);
            map.setMapTypeId('map');

            var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(0,0),
                    map: map,
                    title: "Test"
            });

            </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-30T16:08:46.370

回答这个问题：*是否可以防止标记重复？*

是的。

在 Google Maps JavaScript API V3 参考 (3.19) 中，如果您将标记的 markerOptions 属性**优化**为**false**，它不会重复，而只会显示在中心地图上。

请参阅：[https ://developers.google.com/maps/documentation/javascript/reference#MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

因此，在您的代码中，我会这样修改*var 标记*（添加**优化： false**）：

`var marker = new google.maps.Marker({ position: new google.maps.LatLng(0,0), map: map, title: "Test" optimized: false });`

根据谷歌的文档（我添加了粗体），

> 优化将许多标记呈现为单个静态元素。**默认情况下启用**优化渲染。禁用动画 GIF 或 PNG 的优化呈现，或者当每个标记必须呈现为单独的 DOM 元素时（仅限高级用法）。

我将优化设置为 false，然后浏览页面以找到与我的标记关联的 id（或至少是类）。我打算让“额外”标记不可见。事实证明，元素在那里，但没有 id 或类。就在我考虑使用 jQuery 识别它们的其他方法时，我碰巧查看了我的“地图”，并意识到“额外”的标记不见了！☺</p>

提醒一句：根据谷歌的文档，我怀疑这种行为（“额外”标记没有出现）可能是一个意外的“功能”。

干杯，布鲁斯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T15:51:26.373

在我看来，您只需要更改起始缩放和最小缩放限制。

当您处于缩放级别 1 时，即使谷歌也会遇到重复，但它不会让您缩小到低于该级别。

只需将 minZoom 和 maxZoom 属性添加到您的选项对象以限制缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:31:17.800

您可以尝试在重复区域戴上口罩，但我没有尝试过。这看起来可以解决您的问题：[Apply mask to Google Map](https://stackoverflow.com/questions/9555499/apply-mask-to-google-map)。更新：仅在需要时应用蒙版，即缩放最低时。我认为调整浏览器窗口大小不会影响地图中的任何内容。它也与问题无关，问题是面具是否放在标记的顶部。更新 2：v2 似乎可行，但 v3 不行。在 v2 中，您可以禁用投影类中的水平复制：[具有自定义地图图像的 Google Maps API v3 - 水平重复标记](https://stackoverflow.com/questions/10675268/google-maps-api-v3-with-custom-map-image-markers-repeating-horizontally?rq=1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T07:26:58.567

对于那些仍然有这个问题的人，看看我的解决方案。

1-将地图缩放设置为（2）并添加标记位置（纬度，经度），即

```
 var minZoomLevel = 2;
  map.setZoom(minZoomLevel);

  var bounds = new google.maps.LatLngBounds();
  for (var i = 0; i < result.length; i++){
        var latlng = new google.maps.LatLng(result[i].Lat, result[i].Lng);
        bounds.extend(latlng);
    }); 
```

2-在缩放更改时附加事件侦听器，即

```
google.maps.event.addListener(map, 'zoom_changed', function() {
        if (map.getZoom() < minZoomLevel) map.setZoom(minZoomLevel);
    }); 
```

3-附加一个中心更改的侦听器（这成功了），即

```
google.maps.event.addListener(map, 'center_changed', function() 
{ 
   checkBounds(bounds);
}

 function checkBounds(allowedBounds) {
    if(allowedBounds.contains(map.getCenter())) {
        return;
    }
    var mapCenter = map.getCenter();
    var X = mapCenter.lng();
    var Y = mapCenter.lat();

    var AmaxX = allowedBounds.getNorthEast().lng();
    var AmaxY = allowedBounds.getNorthEast().lat();
    var AminX = allowedBounds.getSouthWest().lng();
    var AminY = allowedBounds.getSouthWest().lat();

    if (X < AminX) {X = AminX;}
    if (X > AmaxX) {X = AmaxX;}
    if (Y < AminY) {Y = AminY;}
    if (Y > AmaxY) {Y = AmaxY;}

    map.setCenter(new google.maps.LatLng(Y,X));
} 
```

每次更改中心时，它都会检查您的点并将地图限制在某个区域。设置缩放将只显示一个世界图块，并且检查绑定将限制水平滚动！

# ruby-on-rails - 使用 Devise 和 devise_ldap_authenticable 时如何捕获 Ldap 错误并重定向到指定页面

> ID：13226733
> 
> 赞同：2
> 
> 时间：2012-11-05T06:01:47.460
> 
> 标签：ruby-on-rails, devise, ldap

当登录过程中出现 ldap 错误时，我想向我的登录页面显示错误消息，例如“系统此时无法让您登录。请稍后再试”。

目前，我使用了 [https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-中所述的 custom_failure.rb 方法未经过身份验证](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated) ，它能够捕获诸如无效的用户名/密码之类的错误，并且我已将其重定向到登录页面，根据需要显示错误消息而没有问题。但是这种方法无法捕获 ldap 错误。

这些 ldap 错误显示为一个非常原始的 html 页面，如下所示：

Devise::SessionsController#create 中的 Errno::ETIMEDOUT

连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。- 连接（2）

Rails.root: C:/extratxt/2.2.0/source/ruby/messaging 应用程序跟踪 | 框架跟踪 | 全跟踪

要求

参数：

```
{"utf8"=>"✓",
 "user"=>{"username"=>"administrator",
 "password"=>"[FILTERED]",
 "remember_me"=>"0"},
 "commit"=>"Sign in"} 
```

显示会话转储

显示环境转储响应

标题：

没有任何

我怎样才能防止这种情况，而是显示我指定的页面（例如带有我自己的错误消息的登录页面）？任何的想法 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:18:50.313

一种方法是覆盖创建会话操作，但需要几个步骤才能使其正常工作。首先，复制设计视图（如果您还没有这样做）

```
rails g devise:views 
```

然后你需要创建一个扩展 Devise::SessionsController 的 sessions_controller.rb 文件：

```
# /app/controllers/sessions_controller.rb
class SessionsController < Devise::SessionsController

  # copied from [...]/gems/devise-1.4.5/app/controllers/sessions_controller.rb
  # To find the path to your gem, use 'bundle show devise' 
  def create

    begin
      resource = warden.authenticate!(:scope => resource_name, :recall => "#{controller_path}#new")
      set_flash_message(:notice, :signed_in) if is_navigational_format?
      sign_in(resource_name, resource)
      respond_with resource, :location => redirect_location(resource_name, resource)
    rescue Net::LDAP::LdapError
      # handle your error
      respond_to do |format|
        format.html { redirect_to new_user_session_path, :notice => $!.to_s }
        format.json { render json: $!.to_s }
      end
    end

  end
end 
```

最后，在您的 config/routes.rb 中，您需要告诉 devise 使用您的自定义控制器：

```
devise_for :users, :controllers => { :sessions => :sessions } 
```

# android - getIntent.getExtras() 不返回 null 但没有值。

> ID：13226740
> 
> 赞同：2
> 
> 时间：2012-11-05T06:02:12.403
> 
> 标签：android, android-intent

问题很简单，我对 Android 并不完全陌生，但在我的一生中，我无法检索通过意图从 Activity A 传递到 Activity B 的额外内容。

参见 Activity A：这实际上是一个 ListFragment，它实现了 onListItemClick() 以通过一个意图启动另一个 Activity。

```
@Override 
public void onListItemClick(ListView l, View v, int position, long id) {
    Log.i("FragmentList", "Item clicked: " + id); 
    Intent i = new Intent(getActivity(), ExpandedTweetView.class);
    twitter4j.Status status = adapter.getItem(position);

    Bundle extras = new Bundle();
    extras.putString(KEY_TEXT, status.getText());
    extras.putString(KEY_HANDLE, status.getUser().getScreenName());
    extras.putString(KEY_NAME, status.getUser().getName());
    extras.putString(KEY_TIMESTAMPS, status.getCreatedAt().toString());
    extras.putLong(KEY_RETWEETS, status.getRetweetCount());

    i.putExtra(KEY_EXTRAS, extras);
    startActivity(i);
} 
```

这部分工作正常，我使用 Log.v(TAG, "status.getText()" 对其进行了测试，以确保错误不是来自**适配器**通过 getItem() 传递一个空项目。

这是活动B的代码：

```
public class ExpandedTweetView extends Activity {

TextView text;
TextView name;
TextView handle;
TextView createdAt;
TextView retweets;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.expanded_list_item);

    Bundle extras = getIntent().getExtras();

    ActionBar actionBar = getActionBar();
    actionBar.setHomeButtonEnabled(true);
    actionBar.setDisplayHomeAsUpEnabled(true);

    text = (TextView) findViewById(R.id.h_content);
    name = (TextView) findViewById(R.id.h_name);
    handle = (TextView) findViewById(R.id.h_handle);
    createdAt = (TextView) findViewById(R.id.h_timestamp);
    retweets = (TextView) findViewById(R.id.h_retweet_count);

    if(extras != null) {
        text.setText(extras.getString(TimelineFragment.KEY_TEXT));
        name.setText(extras.getString(TimelineFragment.KEY_NAME));
        handle.setText(extras.getString(TimelineFragment.KEY_HANDLE));
        createdAt.setText(extras.getString(TimelineFragment.KEY_TIMESTAMPS));
        retweets.setText(String.valueOf(extras.getLong(TimelineFragment.KEY_RETWEETS)));
    }
} 
```

如您所见，我相信我使用正确的代码来获取附加功能，在其他应用程序上使用相同的代码。不知道为什么，当通过意图创建 ExpandedTweetView 时，所有的 textView 都是空的。请参阅：[https ://www.dropbox.com/s/pso6jbyn6rpks9n/empty_activity.png](https://www.dropbox.com/s/pso6jbyn6rpks9n/empty_activity.png)

更奇怪的是，我最初尝试通过调用以下命令来检查捆绑包是否为空：

```
if (extras == null) {
Log.v(TAG, "Extras are empty :(");
} 
```

但是该行从未执行过，这意味着捆绑包不为空。我还认为可能用于从包中检索单个字符串的键不匹配；然而，为了解决这个问题，我决定创建可以在双方使用的常量。正如您在代码中看到的，设置 Extra 的密钥和检索 Extra 的密钥是相同的。

关于到底发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:11:45.227

```
Bundle extras = getIntent().getExtras();
        if (extras != null) {
            extras = extras.getBundle("KEY_EXTRAS");
            String status = extras.getString("KEY_TEXT");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:50:19.137

In Activity A:

```
 Intent i = new Intent(MainActivity.this, AnotherActivity.class);
    Bundle b = new Bundle();
    b.putString("thisc", "my name");
    i.putExtra("bundle", b);
    startActivity(i); 
```

In Activity B:

**Bundle bun = getIntent().getBundleExtra("bundle");

if (bun.containsKey("thisc")) {

```
Log.i("TAG", bun.getString("thisc")); 
```

} else {

```
Log.i("TAG", "no thisc"); 
```

}**

Check the first line of code in Activity B, that's the **main difference** actually!!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:16:04.840

尝试将额外变量添加到意图而不是 Bundle Ex 中：

```
 i.putExtra(KEY_1, a);
 i.putExtra(KEY_2, b);
 i.putExtra(KEY_3, c); 
```

然后从意图 Ex 的其他活动中检索它：

```
 getIntent().getStringExtra(KEY_1) ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:32:30.847

如果您希望从一个 Activity 共享到其他 Activity 的数据数量，则很难保持 Bundle 和 Bundle to Intent 的意图。

只需简单地将 Intent`PuExtra()` 与不同的参数一起使用。

您可以在意图中传递大量数据，例如：

**发送方：**

**创建你的意图。**

```
Intent My_Intent = new Intent(FromClass.this,ToClass.class); 
```

**添加您想与其他活动分享的价值。**

```
My_Intent.putExtra("VAR_A",a_value);
My_Intent.putExtra("VAR_B",b_value);
My_Intent.putExtra("VAR_C",c_value); 
```

**打电话给你的意图。**

```
StartActivity(My_Intent); 
```

**接收方：**

```
Intent My_Intent = getIntent(); 
First_Value=My_Intent.getStringExtra("VAR_A");
Sec_Value=My_Intent.getStringExtra("VAR_B");
Thred_Value=My_Intent.getStringExtra("VAR_C"); 
```

我认为您可以轻松地将数据从一个 Activity 处理到另一个 Activity 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T06:22:33.143

```
//put value
    Intent inatent = new Intent(this,text.class);
    inatent_logo.putExtra("message","hello");
    startActivity(inatent);

//get vale
    String msg  = getIntent().getStringExtra("message").toString(); 
```

# perl - 如何解析具有格式GMT [+/-] hh：mm时区的perl中的字符串？

> ID：13226744
> 
> 赞同：0
> 
> 时间：2012-11-05T06:02:28.893
> 
> 标签：perl

我有一个格式的日期和时间字符串： Day, Month DAY_OF_MONTH, Year HH:MM:SS AM/PM GMT[+/-]hh:mm 。

但我无法解析它。我用过这个：

```
Time::Piece->strftime($string, "%A, %B %d, %Y %I:%M:%S %p %Z%z"); 
```

我已将字符串转换为以下格式：Day, Month DAY_OF_MONTH, Year HH:MM:SS AM/PM [+/-]hhmm。但它仍然不适合我

```
Time::Piece->strftime($string, "%A, %B %d, %Y %I:%M:%S %p %z"); 
```

正在解析字符串，但 Time::Piece 对象中不考虑时区，因为 tzoffset 为 0000，并且日期的 HH 与字符串中的值相同。请任何人帮助。

例如：要解析的字符串：2008 年 7 月 25 日星期五 12:15:57 PM GMT-0700

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:39:04.727

也许以下内容会有所帮助：

```
use strict;
use warnings;
use Time::Piece;

my $string = 'Sunday, November 4, 2012 10:25:15 PM -0000';
my $t = Time::Piece->strptime( $string, "%A, %B %d, %Y %I:%M:%S %p %z" );
print $t; 
```

输出：

```
Sun Nov  4 22:25:15 2012 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:15:08.833

如果 Time::Piece 不起作用，请尝试使用[Date::Parse](http://search.cpan.org/perldoc?Date%3A%3AParse)。

正如前面提到的那样，请在您的问题中包含一个实际的日期字符串示例。

# mysql - MySQL中以下变量初始化样式有什么区别？

> ID：13226745
> 
> 赞同：6
> 
> 时间：2012-11-05T06:02:30.797
> 
> 标签：mysql, sql, select, variable-declaration, variable-initialization

我对涉及 MySQL 中变量声明的查询相当陌生。我见过各种风格，但我并不完全清楚它们的实际作用。我对这些实际上做了什么有疑问。

1)

```
set @row:=0;
SELECT name, @row:=@row + 1 AS rownum
FROM animal 
```

2)

```
SELECT name, @row:=@row + 1 AS rownum
FROM (SELECT @row:= 0) c, animal 
```

两者返回相同：

```
 name rownum
|| cat || 1 ||
|| cat || 2 ||
|| dog || 3 ||
|| dog || 4 ||
|| dog || 5 ||
|| ant || 6 || 
```

**上述两个查询有什么区别？两者在范围、效率、编码习惯、用例方面有什么区别？**

3）现在如果我这样做：

```
set @row:=0;
SELECT name, @row:=@row + 1 AS rownum
FROM (SELECT @row:= 123) c, animal 
```

我明白了

```
 name  rownum
|| cat || 124 ||
|| cat || 125 ||
|| dog || 126 ||
|| dog || 127 ||
|| dog || 128 ||
|| ant || 129 || 
```

**那么这是否意味着内部变量初始化会覆盖外部初始化并因此使后者变得多余（因此在 a 中进行初始化总是更好的做法`SELECT`？**

4）如果我只是这样做：

```
SELECT name, @row:=@row + 1 AS rownum
FROM animal 
```

我明白了

```
 name  rownum
|| cat || NULL ||
|| cat || NULL ||
|| dog || NULL ||
|| dog || NULL ||
|| dog || NULL ||
|| ant || NULL || 
```

我可以理解，因为`row`没有初始化。但是，如果我运行任何其他查询（可能是变量`row`正在初始化？）我看到`row`每次运行上述查询时变量都会递增。那就是它在第一次运行时给了我结果：

```
 name rownum
|| cat || 1 ||
|| cat || 2 ||
|| dog || 3 ||
|| dog || 4 ||
|| dog || 5 ||
|| ant || 6 || 
```

然后在重新运行时产生

```
 name rownum
|| cat || 7  ||
|| cat || 8  ||
|| dog || 9  ||
|| dog || 10 ||
|| dog || 11 ||
|| ant || 12 || 
```

**那么是`row`存储在某个地方吗？它的范围和寿命是多少？**

5）如果我有这样的查询：

```
SELECT (CASE WHEN @name <> name THEN @row:=1 ELSE @row:=@row + 1 END) AS rownum, 
       @name:=name AS name
FROM animal 
```

这总是产生正确的结果：

```
rownum  name
|| 1 || cat ||
|| 2 || cat ||
|| 1 || dog ||
|| 2 || dog ||
|| 3 || dog ||
|| 1 || ant || 
```

**那么这是否意味着它并不总是需要在顶部或`SELECT`根据查询初始化变量？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T23:18:53.470

请务必阅读[有关用户变量的手册部分](http://dev.mysql.com/doc/refman/5.6/en/user-variables.html)。

> **上述两个查询有什么区别？两者在范围、效率、编码习惯、用例方面有什么区别？**

查询 1) 使用多个语句。因此，它可以依赖这些语句的执行顺序，确保变量在递增之前设置。
另一方面，查询 2) 在嵌套子查询中进行初始化。这会将整个事情变成一个查询。您不会冒险忘记初始化。但是代码更多地依赖于 mysql 服务器的内部工作，特别是它会在开始计算外部查询的结果之前执行子查询这一事实。

> **那么这是否意味着内部变量初始化会覆盖外部初始化并因此使后者变得多余（因此在 a 中进行初始化总是更好的做法`SELECT`？**

这不是关于内部和外部，而是关于顺序：子查询在 之后执行`SET`，因此它会简单地覆盖旧值。

> **那么行是否存储在某个地方？它的范围和寿命是多少？**

用户变量是服务器连接的本地变量。因此任何其他过程都不会受到设置的影响。即使是同一个进程也可能维护多个连接，并具有独立的用户变量设置。一旦连接关闭，所有变量设置都将丢失。

> **那么这是否意味着它并不总是需要根据查询在顶部或 SELECT 中初始化变量？**

引用[手册](http://dev.mysql.com/doc/refman/5.6/en/user-variables.html)：

> 如果你引用一个没有被初始化的变量，它的值`NULL`和类型是字符串。

所以你可以在初始化之前使用一个变量，但是你必须小心你实际上可以`NULL`以合理的方式处理结果值。但是请注意，您的查询 5) 遇到手册中明确说明的另一个问题：

> 作为一般规则，您永远不应为用户变量赋值并在同一语句中读取该值。您可能会得到预期的结果，但这不能保证。涉及用户变量的表达式的求值顺序是未定义的，并且可能会根据给定语句中包含的元素而改变；此外，不保证此顺序在 MySQL 服务器的版本之间是相同的。在`SELECT @a, @a:=@a+1, ...`中，您可能认为 MySQL 会`@a`先评估，然后再进行赋值。但是，更改语句（例如，通过添加`GROUP BY`、`HAVING`或`ORDER BY`子句）可能会导致 MySQL 选择具有不同评估顺序的执行计划。

因此，在您的情况下，该`@name:=name`部分可能会在`@name <> name`检查之前执行，从而导致您的所有`rownum`值都相同。因此，即使它现在确实有效，也不能保证它将来会有效。

*请注意*，我一直对以这种方式使用用户变量持怀疑态度。我已经在对几个答案的评论中引用了手册中的上述警告。[在使用用户变量对行数进行编号时，](https://stackoverflow.com/q/12728949/1468366)我还提出了一些问题，例如关于Guarantees 的问题。其他用户更务实，因此更愿意使用看似可以正常工作的代码，但没有明确保证事情将继续按预期工作。

# c# - 如何将 HTML 绑定到 DataTemplate 的 WebView？

> ID：13226747
> 
> 赞同：0
> 
> 时间：2012-11-05T06:02:32.800
> 
> 标签：c#, xaml, data-binding, windows-8

> **可能重复：**
> [如何在 ListView 中访问 WebView 的 NavigateToString 属性](https://stackoverflow.com/questions/12676520/how-to-access-navigatetostring-property-of-a-webview-in-a-listview)

我有一个项目列表，这些项目对呈现的每个项目都使用 DataTemplate。在这个模板中，我有一个从 API 调用中获取的静态 HTML 的 Web 视图。DataTemplate 类似如下：

```
<DataTemplate x:Name="DetailedPostTemplate">
        <Grid Height="600" Width="600">
            <Grid.RowDefinitions>
                <RowDefinition Height="2*"/>
                <RowDefinition Height="6*"/>
            </Grid.RowDefinitions>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="2*"/>
                </Grid.ColumnDefinitions>

                <StackPanel>
                    <TextBlock Text="{Binding Score}"/>
                    <TextBlock Text="Votes" />
                </StackPanel>

                <Grid Grid.Column="1">
                    <TextBlock Text="{Binding OwnerName}" />
                </Grid>
            </Grid>

            <!-- HTML Content Row -->

            <Grid Grid.Row="1">
                <WebView DataContext="{Binding Body}"/> <!-- What do I do HERE? -->
            </Grid>

        </Grid>
    </DataTemplate> 
```

我所能找到的，将数据“传递”到 Webview 就是使用该`NavigateToString`方法，但由于我不知道列表中的项目数量，而且我使用的是模板，所以我可以t 从 C# 方面调用它。如何使用 XAML 模板将此 HTML 连接到 WebView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:36:29.820

`WebView`没有支持这一点的可绑定属性。有很多人编写了附加属性，允许您绑定到 WPF 和 Silverlight`WebView`控件，这些应该可以在 Windows 8 中进行一些小的更改。参见例如[这个解决方案](http://compiledexperience.com/blog/posts/binding-html-to-the-web-browser-control)。

# iphone - 如何在 iOS 中发送 NTLM 请求

> ID：13226750
> 
> 赞同：1
> 
> 时间：2012-11-05T06:02:36.350
> 
> 标签：iphone, ios, ios5, nsurlconnection, ntlm

我使用 json(NSJSONSerialization) 和 NSURL 进行服务器客户端通信。到目前为止，它工作正常，但现在 NTLM 安全性已在服务器上实施。

谁能告诉我如何在 iOS 中使用 NTLM 发送请求？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:12:12.773

如果可以使用[NSURLProtectionSpace](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLProtectionSpace_Class/Reference/Reference.html)，它提供[NSString *NSURLAuthenticationMethodNTLM;](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLProtectionSpace_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSURLAuthenticationMethodNTLM) 身份验证方法。

线上的东西：

```
NSURLProtectionSpace *protectionSpace = [[NSURLProtectionSpace alloc]
    initWithHost: _host
    port: 80
    protocol: @"http"
    realm: _host
    authenticationMethod:NSURLAuthenticationMethodNTLM]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:10:55.333

此代码将有所帮助

```
NSMutableString *nodeContent = [[NSMutableString alloc]init];

    NSString *soapFormat = [NSString stringWithFormat:@"<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"
                            "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n"
                            "<soap:Body>\n"
                            "<GetListCollection xmlns=\"http://schemas.microsoft.com/sharepoint/soap/\" />\n"
                            "</soap:Body>\n"
                            "</soap:Envelope>\n"];

    NSLog(@"The request format is %@",soapFormat);

    NSURL *locationOfWebService = [NSURL URLWithString:@"http://localhost/_vti_bin/lists.asmx"];

    NSLog(@"web url = %@",locationOfWebService);

    NSMutableURLRequest *theRequest = [[NSMutableURLRequest alloc]initWithURL:locationOfWebService];

    NSString *msgLength = [NSString stringWithFormat:@"%d",[soapFormat length]];

    [theRequest addValue:@"text/xml" forHTTPHeaderField:@"Content-Type"];
    [theRequest addValue:@"http://schemas.microsoft.com/sharepoint/soap/GetListCollection" forHTTPHeaderField:@"SOAPAction"];
    [theRequest addValue:msgLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPMethod:@"POST"];
    //the below encoding is used to send data over the net
    [theRequest setHTTPBody:[soapFormat dataUsingEncoding:NSUTF8StringEncoding]];

    NSURLConnection *connect = [[NSURLConnection alloc]initWithRequest:theRequest delegate:self];

    if (connect) {
        webData = [[NSMutableData alloc]init];
    }
    else {
        NSLog(@"No Connection established");
    } 
```

请参阅[教程和示例代码](http://www.robertkuzma.com/2011/07/making-a-post-in-objective-c-xcode-to-sharepoint-webservice-requiring-windows-ntlm-authenticaton-for-iphone-or-ipad/)

用于 iOS 的 NTLM 请求。我用过这个。

# objective-c - 如何在目标 C 中找到文件的 32 位 CRC

> ID：13226756
> 
> 赞同：0
> 
> 时间：2012-11-05T06:03:25.763
> 
> 标签：objective-c, ios, cocoa

我想在我的 iOS 应用程序中找出 bin 文件的 CRC。是否已经有一个函数可以接受文件名作为输入并返回 32 位 CRC 值？如果有可用的代码，请与我分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T12:01:12.813

你可以使用这个我在 ios 通用加密库函数上建模的文件：

**crc32.h**

```
#ifndef sessionTest_crc32_h
#define sessionTest_crc32_h

// Standard library
#include <stdint.h>
#include <stdio.h>

#define CC_CRC32_DIGEST_LENGTH      4

typedef struct {
    uint32_t crc;
} CC_CRC32_CTX;

static uint32_t crc32_tbl[256] =
{
    0x00000000L, 0x77073096L, 0xEE0E612CL, 0x990951BAL, 0x076DC419L,
    0x706AF48FL, 0xE963A535L, 0x9E6495A3L, 0x0EDB8832L, 0x79DCB8A4L,
    0xE0D5E91EL, 0x97D2D988L, 0x09B64C2BL, 0x7EB17CBDL, 0xE7B82D07L,
    0x90BF1D91L, 0x1DB71064L, 0x6AB020F2L, 0xF3B97148L, 0x84BE41DEL,
    0x1ADAD47DL, 0x6DDDE4EBL, 0xF4D4B551L, 0x83D385C7L, 0x136C9856L,
    0x646BA8C0L, 0xFD62F97AL, 0x8A65C9ECL, 0x14015C4FL, 0x63066CD9L,
    0xFA0F3D63L, 0x8D080DF5L, 0x3B6E20C8L, 0x4C69105EL, 0xD56041E4L,
    0xA2677172L, 0x3C03E4D1L, 0x4B04D447L, 0xD20D85FDL, 0xA50AB56BL,
    0x35B5A8FAL, 0x42B2986CL, 0xDBBBC9D6L, 0xACBCF940L, 0x32D86CE3L,
    0x45DF5C75L, 0xDCD60DCFL, 0xABD13D59L, 0x26D930ACL, 0x51DE003AL,
    0xC8D75180L, 0xBFD06116L, 0x21B4F4B5L, 0x56B3C423L, 0xCFBA9599L,
    0xB8BDA50FL, 0x2802B89EL, 0x5F058808L, 0xC60CD9B2L, 0xB10BE924L,
    0x2F6F7C87L, 0x58684C11L, 0xC1611DABL, 0xB6662D3DL, 0x76DC4190L,
    0x01DB7106L, 0x98D220BCL, 0xEFD5102AL, 0x71B18589L, 0x06B6B51FL,
    0x9FBFE4A5L, 0xE8B8D433L, 0x7807C9A2L, 0x0F00F934L, 0x9609A88EL,
    0xE10E9818L, 0x7F6A0DBBL, 0x086D3D2DL, 0x91646C97L, 0xE6635C01L,
    0x6B6B51F4L, 0x1C6C6162L, 0x856530D8L, 0xF262004EL, 0x6C0695EDL,
    0x1B01A57BL, 0x8208F4C1L, 0xF50FC457L, 0x65B0D9C6L, 0x12B7E950L,
    0x8BBEB8EAL, 0xFCB9887CL, 0x62DD1DDFL, 0x15DA2D49L, 0x8CD37CF3L,
    0xFBD44C65L, 0x4DB26158L, 0x3AB551CEL, 0xA3BC0074L, 0xD4BB30E2L,
    0x4ADFA541L, 0x3DD895D7L, 0xA4D1C46DL, 0xD3D6F4FBL, 0x4369E96AL,
    0x346ED9FCL, 0xAD678846L, 0xDA60B8D0L, 0x44042D73L, 0x33031DE5L,
    0xAA0A4C5FL, 0xDD0D7CC9L, 0x5005713CL, 0x270241AAL, 0xBE0B1010L,
    0xC90C2086L, 0x5768B525L, 0x206F85B3L, 0xB966D409L, 0xCE61E49FL,
    0x5EDEF90EL, 0x29D9C998L, 0xB0D09822L, 0xC7D7A8B4L, 0x59B33D17L,
    0x2EB40D81L, 0xB7BD5C3BL, 0xC0BA6CADL, 0xEDB88320L, 0x9ABFB3B6L,
    0x03B6E20CL, 0x74B1D29AL, 0xEAD54739L, 0x9DD277AFL, 0x04DB2615L,
    0x73DC1683L, 0xE3630B12L, 0x94643B84L, 0x0D6D6A3EL, 0x7A6A5AA8L,
    0xE40ECF0BL, 0x9309FF9DL, 0x0A00AE27L, 0x7D079EB1L, 0xF00F9344L,
    0x8708A3D2L, 0x1E01F268L, 0x6906C2FEL, 0xF762575DL, 0x806567CBL,
    0x196C3671L, 0x6E6B06E7L, 0xFED41B76L, 0x89D32BE0L, 0x10DA7A5AL,
    0x67DD4ACCL, 0xF9B9DF6FL, 0x8EBEEFF9L, 0x17B7BE43L, 0x60B08ED5L,
    0xD6D6A3E8L, 0xA1D1937EL, 0x38D8C2C4L, 0x4FDFF252L, 0xD1BB67F1L,
    0xA6BC5767L, 0x3FB506DDL, 0x48B2364BL, 0xD80D2BDAL, 0xAF0A1B4CL,
    0x36034AF6L, 0x41047A60L, 0xDF60EFC3L, 0xA867DF55L, 0x316E8EEFL,
    0x4669BE79L, 0xCB61B38CL, 0xBC66831AL, 0x256FD2A0L, 0x5268E236L,
    0xCC0C7795L, 0xBB0B4703L, 0x220216B9L, 0x5505262FL, 0xC5BA3BBEL,
    0xB2BD0B28L, 0x2BB45A92L, 0x5CB36A04L, 0xC2D7FFA7L, 0xB5D0CF31L,
    0x2CD99E8BL, 0x5BDEAE1DL, 0x9B64C2B0L, 0xEC63F226L, 0x756AA39CL,
    0x026D930AL, 0x9C0906A9L, 0xEB0E363FL, 0x72076785L, 0x05005713L,
    0x95BF4A82L, 0xE2B87A14L, 0x7BB12BAEL, 0x0CB61B38L, 0x92D28E9BL,
    0xE5D5BE0DL, 0x7CDCEFB7L, 0x0BDBDF21L, 0x86D3D2D4L, 0xF1D4E242L,
    0x68DDB3F8L, 0x1FDA836EL, 0x81BE16CDL, 0xF6B9265BL, 0x6FB077E1L,
    0x18B74777L, 0x88085AE6L, 0xFF0F6A70L, 0x66063BCAL, 0x11010B5CL,
    0x8F659EFFL, 0xF862AE69L, 0x616BFFD3L, 0x166CCF45L, 0xA00AE278L,
    0xD70DD2EEL, 0x4E048354L, 0x3903B3C2L, 0xA7672661L, 0xD06016F7L,
    0x4969474DL, 0x3E6E77DBL, 0xAED16A4AL, 0xD9D65ADCL, 0x40DF0B66L,
    0x37D83BF0L, 0xA9BCAE53L, 0xDEBB9EC5L, 0x47B2CF7FL, 0x30B5FFE9L,
    0xBDBDF21CL, 0xCABAC28AL, 0x53B39330L, 0x24B4A3A6L, 0xBAD03605L,
    0xCDD70693L, 0x54DE5729L, 0x23D967BFL, 0xB3667A2EL, 0xC4614AB8L,
    0x5D681B02L, 0x2A6F2B94L, 0xB40BBE37L, 0xC30C8EA1L, 0x5A05DF1BL,
    0x2D02EF8DL
};

static inline int CC_CRC32_Init(CC_CRC32_CTX *c) {
    c->crc =  0xFFFFFFFFL;
    return 1;
}

static inline int CC_CRC32_Update(CC_CRC32_CTX *c, const uint8_t *data, uint32_t len) {
    for(uint32_t i=0; i<len;i++)
        c->crc = (c->crc>>8) ^ crc32_tbl[(c->crc&0xFF) ^ *data++];
    return 1;
}

static inline int CC_CRC32_Final(unsigned char *md, CC_CRC32_CTX *c) {
    c->crc = c->crc ^ 0xFFFFFFFFL;

    md[0] = (c->crc & 0xff000000UL) >> 24;
    md[1] = (c->crc & 0x00ff0000UL) >> 16;
    md[2] = (c->crc & 0x0000ff00UL) >>  8;
    md[3] = (c->crc & 0x000000ffUL)      ;

    return 1;
}

#endif 
```

还有一个使用它的例子：

```
// Declare needed variables and buffers
CFStringRef result = NULL;
CFReadStreamRef readStream = NULL;
unsigned char digest[CC_CRC32_DIGEST_LENGTH];
char hash[2 * CC_CRC32_DIGEST_LENGTH + 1];
int chunkSizeForReadingData = 4096;

CC_CRC32_CTX ctx;

// Get the file URL
CFURLRef fileURL = //something...

// Create and open the read stream
readStream = CFReadStreamCreateWithFile(kCFAllocatorDefault, 
                                        (CFURLRef)fileURL);

bool didSucceed = (bool)CFReadStreamOpen(readStream);

// Initialize the hash object
CC_CRC32_Init(&ctx);

// Feed the data 
bool hasMoreData = true;
while (hasMoreData) {
    uint8_t buffer[chunkSizeForReadingData];
    CFIndex readBytesCount = CFReadStreamRead(readStream, 
                                              (UInt8 *)buffer, 
                                              (CFIndex)sizeof(buffer));
    if (readBytesCount == -1) break;
    if (readBytesCount == 0) {
        hasMoreData = false;
        continue;
    }
    CC_CRC32_Update(&ctx, (const void*)buffer, (CC_LONG)readBytesCount);
}

// Compute the digest
CC_CRC32_Final(digest, &c);

// Compute the string result
for (size_t i = 0; i < chunkSizeForReadingData; ++i) {
    snprintf(hash + (2 * i), 3, "%02x", (int)(digest[i]));
}

result = CFStringCreateWithCString(kCFAllocatorDefault, 
                                   (const char *)hash, 
                                   kCFStringEncodingUTF8); 
```

但我主要推荐你使用这个 Gist：

[https://gist.github.com/paul-delange/6808278](https://gist.github.com/paul-delange/6808278)

# sql-server - 如何在过程中使用 ROW_NUMBER() 对数据进行分页

> ID：13226758
> 
> 赞同：1
> 
> 时间：2012-11-05T06:03:27.497
> 
> 标签：sql-server, paging

我是 sql server 的初学者，我写了这个查询

```
ALTER PROCEDURE [dbo].[SPSelectReport3] (@StringWhereParameter nvarchar(4000)=null)
AS
BEGIN

    SET NOCOUNT ON;

-- َ Begin Of Transaction
begin tran

declare @Query nvarchar(max)
set @Query='
((SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[ST_CODE]
      ,[PlanCode]
      ,[Min]
      ,[Max]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[PartNo]
      ,[TranQty]
      ,[TypeRequest]
      ,[HeaderId]
  FROM [MyMaterialDB].[dbo].[Report3]
  WHERE headerid IN(SELECT HeaderId FROM [MyMaterialDB].[dbo].[Report3] WHERE line=''H'''+ @StringWhereParameter+'))
  UNION
  (
    (SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[ST_CODE]
      ,[PlanCode]
      ,[Min]
      ,[Max]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[PartNo]
      ,[TranQty]
      ,[TypeRequest]
      ,[HeaderId]
  FROM [MyMaterialDB].[dbo].[Report3]
  WHERE mesc IN(SELECT mesc FROM [MyMaterialDB].[dbo].[Report3] WHERE line=''I''' +@StringWhereParameter+'))
  UNION
  (SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[ST_CODE]
      ,[PlanCode]
      ,[Min]
      ,[Max]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[PartNo]
      ,[TranQty]
      ,[TypeRequest]
      ,[HeaderId]
  FROM [MyMaterialDB].[dbo].[Report3]
  WHERE mesc IN(SELECT HeaderId FROM [MyMaterialDB].[dbo].[Report3] WHERE line=''I'''+@StringWhereParameter+')
  )))
  Order by Mesc,Line,unit'

  exec(@Query)

 if @@error = 0    
 Commit Tran    
 Else   
 rollback tran
End 
```

我写了这个字符串 Query 和 Get Where 参数和 concat Query 以及之后运行 Query 的地方。我想要分页结果数据，但我不知道如何进行分页。
请帮我。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:31:11.673

将整个事物（减去 ORDER BY）用作派生表并在外部查询中应用 ROW_NUMBER() （然后在最外面的查询中按分配的行号进行过滤）应该没有问题。但我可能会先重写这个查询，可能是这样的：

```
'SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[ST_CODE]
      ,[PlanCode]
      ,[Min]
      ,[Max]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[PartNo]
      ,[TranQty]
      ,[TypeRequest]
      ,[HeaderId]
FROM [MyMaterialDB].[dbo].[Report3] t
WHERE EXISTS (
  SELECT *
  FROM [MyMaterialDB].[dbo].[Report3]
  WHERE (Line = ''H'' AND HeaderId = t.HeaderId
      OR Line = ''I'' AND t.Mesc IN (Mesc, HeaderId)
  ) ' + @StringWhereParameter + '
)' 
```

现在应该很容易添加行号列：

```
'SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[ST_CODE]
      ,[PlanCode]
      ,[Min]
      ,[Max]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[PartNo]
      ,[TranQty]
      ,[TypeRequest]
      ,[HeaderId]
      **,ROW_NUMBER() OVER (ORDER BY  Mesc, Line, Unit) AS rn**
FROM [MyMaterialDB].[dbo].[Report3] t
WHERE EXISTS (
  SELECT *
  FROM [MyMaterialDB].[dbo].[Report3]
  WHERE (Line = ''H'' AND HeaderId = t.HeaderId
      OR Line = ''I'' AND t.Mesc IN (Mesc, HeaderId)
  ) ' + @StringWhereParameter + '
)' 
```

然后过滤它

```
'**SELECT Id,[Mesc]
      ,[Line]
      ,[Unit]
      ,[Discription]
      ,[InvQty]
      ,[LastDateNil]
      ,[ST_CODE]
      ,[PlanCode]
      ,[Min]
      ,[Max]
      ,[PbsNo]
      ,[PbsDate]
      ,[PbsQty]
      ,[PbsQtyRec]
      ,[DateDelay]
      ,[PartNo]
      ,[TranQty]
      ,[TypeRequest]
      ,[HeaderId]
FROM (**
      SELECT Id,[Mesc]
            ,[Line]
            ,[Unit]
            ,[Discription]
            ,[InvQty]
            ,[LastDateNil]
            ,[ST_CODE]
            ,[PlanCode]
            ,[Min]
            ,[Max]
            ,[PbsNo]
            ,[PbsDate]
            ,[PbsQty]
            ,[PbsQtyRec]
            ,[DateDelay]
            ,[PartNo]
            ,[TranQty]
            ,[TypeRequest]
            ,[HeaderId]
            ,ROW_NUMBER() OVER (ORDER BY  Mesc, Line, Unit) AS rn
      FROM [MyMaterialDB].[dbo].[Report3] t
      WHERE EXISTS (
        SELECT *
        FROM [MyMaterialDB].[dbo].[Report3]
        WHERE (Line = ''H'' AND HeaderId = t.HeaderId
            OR Line = ''I'' AND t.Mesc IN (Mesc, HeaderId)
        ) ' + @StringWhereParameter + '
      )
**) s
WHERE rn BETWEEN @offset + 1 AND @offset + @pagesize**
;' 
```

# sql - 在实体框架中执行 SQL 脚本并将结果转换为 JSON

> ID：13226760
> 
> 赞同：0
> 
> 时间：2012-11-05T06:03:29.190
> 
> 标签：sql, json, entity-framework

嘿伙计们，我想在实体框架中执行这个 SQL 脚本并以`JSONResult`格式返回结果以在 jQuery 中访问。请帮助！！！

我的实体框架模型包含 SQL 脚本中提到的表和数据库

谢谢 ：-）

```
DECLARE @listCol VARCHAR(2000)
DECLARE @query VARCHAR(4000)
SELECT  @listCol = STUFF(( SELECT distinct  '], [' + [PSize]
                           FROM     Pattern
                         FOR
                           XML PATH('')
                         ), 1, 2, '') + ']'
SET @query = 'SELECT * FROM
      (SELECT PColour as Colour_Size_Matrix, PSize, PCode
            FROM Pattern
            ) src
PIVOT (Count(PCode) FOR PSize
IN (' + @listCol + ')) AS pvt'
EXECUTE ( @query ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:38:40.047

您需要在模型列表中获取查询结果并像 Json 一样返回：

```
var context = new YourContext(); 
var results = (from c in context.PCoulor select c).Contains(yourValue).ToList();
return Json(results , JsonRequestBehavior.AllowGet); 
```

# c++ - 快速 I/O 功能实现

> ID：13226761
> 
> 赞同：-4
> 
> 时间：2012-11-05T06:03:30.903
> 
> 标签：c++, performance

我在网上搜索关于 c++ 中快速 i/o 的各种竞赛，我发现了一个快速输入功能。但我只是 C++ 的初学者，无法将其实现为使用该函数输入的简单程序。因此，如果有人可以给出一个示例代码，比如使用该函数输入一个变量，那对我来说真的很有帮助。这是我找到的功能：-

```
inline void fastRead(int *a)
{
 register char c=0;
 while (c<33) c=getchar_unlocked();
 *a=0;
 while (c>33)
 {
     *a=*a*10+c-'0';
     c=getchar_unlocked();
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:10:54.973

在您的 I/O 速度成为您的程序遇到的问题之前，不要担心您的 I/O 速度。做未成熟的优化，特别是如果你不明白为什么要执行优化，可能会导致程序运行*速度变慢*，或者找到优化所花费的时间比节省的总时间长优化会在程序的整个生命周期内进行，因为您*认为*需要优化的并不是导致程序运行缓慢的原因。

坚持使用易于阅读和可维护的代码，并**在分析完完整的应用程序并发现 I/O 成为真正的瓶颈后返回并执行优化 I/O 之类的事情**

# jquery - 如何在 jqm 或 phonegap 中创建一个通用的 base_url() 或 site_url()？

> ID：13226770
> 
> 赞同：0
> 
> 时间：2012-11-05T06:04:23.090
> 
> 标签：jquery, url, jquery-mobile, cordova

我已经为网站创建了一个 android 应用程序。该应用程序由许多 html 页面组成，我还在应用程序中多次使用网站 url 进行 ajax 调用来获取数据。所以，如果我想更改网站 url，我必须在所有移动应用程序页面中执行此操作。

那么如何为 url 创建一个变量或对象并在我的所有应用程序页面中普遍使用它？--使用 phonegap 和 jqm 创建应用程序。

# cakephp - CakePHP 的翻译行为不适用于 Containable

> ID：13226771
> 
> 赞同：1
> 
> 时间：2012-11-05T06:04:27.853
> 
> 标签：cakephp, behavior, translate, containable, cakephp-2.3

我已经实现了 CakePHP 的 Translate Behavior，一切都相当顺利，但我现在注意到，当我的模型应该被翻译时，我从`i18n`表中翻译的数据不存在。`contain()`

翻译行为是否不适用于包含的模型？如果是这样，那不是几乎完全消除了这种行为的任何用处吗？（或者也许只是我 - 但我几乎所有事情都使用 Containable）。

如果我打算大量使用 Containable，是否有不同的“CakePHP 方式”可以相当轻松地进行翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:24:40.627

显然这是一个普遍的问题。CakePHP Cookbook 有一些关于如何处理它的提示：

[http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:24:38.947

我遇到过类似的问题，从谷歌阅读了几十页，但找不到解决我问题的简单方法。经过一些调试后，我创建了这个解决方法片段。请考虑到这只是一个黑客行为。它主要是为 Croogo 编写的，因此相关模型将出现在现场翻译。但我已经浏览了翻译行为，它也应该适用。基本上将其粘贴到您的 AppModel 类中。适用于 Cake 2.x

```
// DIRTY LITTLE HACKS, FORCING TRANSLATE BEHAVIOR AFTERFIND CALLBACK
    /**
     * Hacking the afterFind so it will call the afterFind() from 
     * behavior
     * Pase this in your AppModel Class
     * 
     * @param array $results
     * @param bool $primary
     * @return array 
     */
    public function afterFind(array $results, $primary = false) {
        parent::afterFind($results, $primary);
        # calling only if not primary model, as they get translated pretty well
        if (!$primary) {
            # iterating behaviors to look for one that has something to do
            # with translations ( Translate for cake general behavior, CroogoTranslate for Croogo based apps )        
            foreach ($this->Behaviors->enabled() as $behavior) {
                if (preg_match('/(.*)[T|t]ranslate(.*)/', $behavior)) {
                    # setting locale, not sure if it gets set on secondary models
                    $this->locale = Configure::read('Config.language');
                    # hacking the result set to match behaviours requirments
                    # so basically creating the result set to look like called from originated model
                    # $k => array('ModelAlias' => array $results)        
                    $results_tmp = array(
                        0 => array(
                            $this->alias => $results,
                        )
                    );
                    # if we find such behavior we force it's afterFind with prepared data
                    $results = $this->Behaviors->{$behavior}->afterFind($this, $results_tmp, true); # forcing true on primary - CroogoTranslate requires that
                    # restoring orginal structure like nothing ever happened     
                    $results = $results[0][$this->alias];
                    # not sure if should break or not ?
                    # on one hand what's the point of having multiple translate behaviors in one app ?
                    # on the other i've seen more weird stuff that multiple translate behaviors
                    break;
                }
            }
        }
        return $results;
    } 
```

# perl - /usr/bin/perl : 符号查找错误；未定义符号：Perl_Istack_sp_ptr

> ID：13226772
> 
> 赞同：1
> 
> 时间：2012-11-05T06:04:30.110
> 
> 标签：perl, lookup, symbols, lcov

每当我对编译的对象和相应的文件使用`lcov`命令 (lcov-1.9) 时，都会出现错误。`gcc 3.4``.gcda`

我执行的命令：

```
lcov -c -d . --gcov-tool /usr/bin/gcov34  -o datafile 
```

错误：

```
/usr/bin/perl: symbol lookup error: /u01/R122_EBS/fs1/FMW_Home/webtier/perl/lib/5.10.0/x86_64-linux-thread-multi/auto/Cwd/Cwd.so: undefined symbol: Perl_Istack_sp_ptr 
```

是因为 Perl 出了问题吗？（但是，我们开发服务器上的 Perl 应该没问题。）还是因为 lcov 和 GCC 之间的某些版本不匹配或其他原因？

有什么线索吗？

# php - 招摇服务器php

> ID：13226775
> 
> 赞同：0
> 
> 时间：2012-11-05T06:04:51.077
> 
> 标签：php, swagger

![在此处输入图像描述](../Images/940be4612a159d1cd680e86630ff867f.png)

使用swagger-ui，但是我不知道如何在php中构建服务器。为什么响应体不响应“sd”和“s”，如何将swagger-ui与php一起使用？我正在尝试很难，有没有人可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T04:23:47.053

看看restler [https://github.com/Luracast/Restler/tree/v3](https://github.com/Luracast/Restler/tree/v3)

或者，您可以手动构建 swagger 文档，如下所示：

[https://github.com/wordnik/swagger-core/tree/master/samples/no-server](https://github.com/wordnik/swagger-core/tree/master/samples/no-server)

# mysql - 复杂查询运行时间过长

> ID：13226777
> 
> 赞同：0
> 
> 时间：2012-11-05T06:05:28.693
> 
> 标签：mysql, sql, relational

我有一个完美的查询（[原始问题也有表结构](https://stackoverflow.com/questions/11336651/adding-a-sub-query-to-an-already-giant-query)），但它创建了一个临时表，不幸的是，由于数据量，它需要 12 秒。（1 个表有 95k 记录，另外 155k 和另外 21k）。

有没有办法绕过临时表解决方案或让它运行得更快？也许建议应该索引哪些字段？我有 ID 字段、日期字段等...已编入索引，但这根本没有帮助。

```
SELECT
    (
        CASE
            WHEN a.winner = a.f_a THEN "Win"
            WHEN a.winner = a.f_b THEN "Loss"
            WHEN a.winner IS NULL THEN a.method
        END
    ) AS result,
    SUM(a.f_a IN (d.fighter_a, d.fighter_b) AND d.winner <=> a.f_a) AS fighter_wincount,
    SUM(a.f_a IN (d.fighter_a, d.fighter_b) AND d.winner IS NOT NULL AND d.winner <> a.f_a) AS fighter_losscount,
    SUM(a.f_a IN (d.fighter_a, d.fighter_b) AND d.method = "Draw") AS fighter_drawcount,
    SUM(a.f_a IN (d.fighter_a, d.fighter_b) AND d.method = "No Contest") AS fighter_nocontestcount,
    b.name AS opponent,
    SUM(a.f_b IN (d.fighter_a, d.fighter_b) AND d.winner <=> a.f_b) AS opponent_wincount,
    SUM(a.f_b IN (d.fighter_a, d.fighter_b) AND d.winner IS NOT NULL AND d.winner <> a.f_b) AS opponent_losscount,
    SUM(a.f_b IN (d.fighter_a, d.fighter_b) AND d.method = "Draw") AS opponent_drawcount,
    SUM(a.f_b IN (d.fighter_a, d.fighter_b) AND d.method = "No Contest") AS opponent_nocontestcount,
    b.fighter_id AS opponent_id,
    b.fighting_out_of_country AS opponent_country,
    a.method AS method,
    a.method_type AS method_type,
    a.round AS round,
    a.time AS time,
    c.event_id AS event_id,
    c.event_name AS event,
    c.event_date AS date,
    c.event_city AS event_city,
    c.event_state AS event_state,
    c.event_country AS event_country
FROM
    (
        SELECT 
            fight_id,
            IF(fighter_b = :fighter_id_3, fighter_b, fighter_a) AS f_a,
            IF(fighter_b = :fighter_id_4, fighter_a, fighter_b) AS f_b,
            winner,
            method,
            method_type,
            round,
            time,
            event
        FROM 
            fights
        WHERE
            :fighter_id_5 IN (fighter_a, fighter_b)
    ) a
INNER JOIN
    fighters b ON a.f_b = b.fighter_id
INNER JOIN
    events c ON a.event = c.event_id
LEFT JOIN
    (
        SELECT 
            a.fighter_a,
            a.fighter_b,
            a.winner,
            a.method,
            b.event_date
        FROM
            fights a
        INNER JOIN
            events b ON a.event = b.event_id
    ) d ON 
        (a.f_a IN (d.fighter_a, d.fighter_b) OR a.f_b IN (d.fighter_a, d.fighter_b)) AND
        d.event_date <= c.event_date
GROUP BY
    a.fight_id
ORDER BY
    date DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:19:49.123

使用`a.id IN (b.a_id, b.b_id)`永远*不会*高效，您将无法创建适合查询的索引。你应该规范你结构的那个方面。

我建议对您的架构进行以下更改：

*   添加`fight_date_time`到您的`fights`表
*   移动`fighter_a`并`fighter_b`移出参与者表

    *   `fight_id`, `fighter_id`- 标准化 - 每场战斗两行

下面将为每场战斗创建两个记录*（每个战士一个）*，但也会列出他们的对手，以及他们参加战斗的两个记录。

```
SELECT
  event.event_name,
  event.event_date,

  MAX(CASE WHEN participant.fighter_id = fighter.id THEN fighter.name   END) AS fighter,
  MAX(CASE WHEN participant.fighter_id = fighter.id THEN record.wins    END) AS wins,
  MAX(CASE WHEN participant.fighter_id = fighter.id THEN record.draws   END) AS draws,
  MAX(CASE WHEN participant.fighter_id = fighter.id THEN record.losses  END) AS losses,

  CASE WHEN fight.winner = participant.fighter_id THEN 'Win'
       WHEN fight.winner IS NULL                  THEN 'Draw'
                                                  ELSE 'Loss' END            AS result,
  fight.method,

  MAX(CASE WHEN participant.fighter_id <> fighter.id THEN fighter.name  END) AS Opp,
  MAX(CASE WHEN participant.fighter_id <> fighter.id THEN record.wins   END) AS Opp_wins,
  MAX(CASE WHEN participant.fighter_id <> fighter.id THEN record.draws  END) AS Opp_draws,
  MAX(CASE WHEN participant.fighter_id <> fighter.id THEN record.losses END) AS Opp_losses      
FROM
  event
INNER JOIN
  fight
     ON event.id = fight.event_id
INNER JOIN
  participant
    ON participant.fight_id = fight.id
INNER JOIN
(
  SELECT
    participant.fighter_id,
    participant.fight_id,
    SUM(CASE WHEN prevFight.winner  = participant.fighter_id THEN 1 ELSE 0 END) AS wins,
    SUM(CASE WHEN prevFight.winner IS NULL)                                     AS draws,
    SUM(CASE WHEN prevFight.winner <> participant.fighter_id THEN 1 ELSE 0 END) AS losses
  FROM
    participant
  INNER JOIN
    fight
      ON  participant.fight_id = fight.id
  INNER JOIN
    participant        AS prevParticipant
      ON  prevParticipant.fighter_id = participant.fighter_id
  INNER JOIN
    fight              AS prevFight
      ON  prevFight.id              = prevParticipant.fight_id
      AND prevFight.fight_date_time < fight.fight_date_time
  GROUP BY
    participant.fighter_id,
    participant.fight_id
)
  AS record
    ON record.fight_id = participant.fight_id
INNER JOIN
  fighter
    ON fighter.id = record.fighter_id
GROUP BY
  event.id,
  fight.id,
  participant.fighter_id 
```

如果您只想查看一名战斗机的结果，请添加：
-`WHERE participant.fighter_id = :fighter_id`

更好的是，使用触发器使此类数据保持最新。这样你就不需要一次又一次地计算它。

# ruby - 如何引用 gem 中的类？

> ID：13226786
> 
> 赞同：0
> 
> 时间：2012-11-05T06:06:13.027
> 
> 标签：ruby, gem

真的是新手问题...

我项目中的许多应用程序在 gem 中有很多共享代码。我正在尝试在该 gem 中添加一个例程，该例程将由多个应用程序中的 rake 任务共享。

所以在 gem lib/utilities 目录中我有 cleanup.rb：

```
module Utilities
  class Cleanup

    def self.perform
      puts "Performing cleanup"
    end

  end
end 
```

然后在应用程序中，在 lib/tasks 中，我有 cleanup.rake：

```
require "utilities/cleanup"

namespace :mynamespace do
  task :do_cleanup => :environment do
    Utilities::Cleanup.perform
  end
end 
```

我从 rake mynamespace:do_cleanup 得到的只是“未初始化的常量 Utilities::Cleanup”。

我已经尝试了上述几种变体。我的 gem 是用 bundler 管理的，但是“bundle exec rake ...”给出了相同的结果。我尝试使用`gem "utilities/cleanup"`而不是要求。

（我发誓，我想弄清楚如何在模块和类之间进行通信比用这种语言更重要！它总是“我在这里引用哪个代码？”和“为什么它找不到我的类写的？”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:01:06.370

您可能需要编写`::Utilities::Cleanup.perform`以显式使用顶级命名空间。

# linux - 如何使用 CentOS5.8 在 XFS 中保留连续块？

> ID：13226790
> 
> 赞同：0
> 
> 时间：2012-11-05T06:06:53.867
> 
> 标签：linux, allocation, diskspace, xfs

我正在使用*CentOS5.8*，带有*XFS*文件系统扩展存储磁盘。我想要做的是，预先分配许多文件，在文件系统中具有连续块，包括单个文件和交叉文件。

我可以通过**posix_allocate()**进行分配，问题是 API 将所有磁盘空间归零，我不能浪费时间。然后我尝试了 XFS 指定 API [**xfsctl()**](http://linux.die.net/man/3/xfsctl)，带有**XFS_IOC_RESVSP"**标志，我可以更快地保留空间。

**xfsctl()**的问题是，它可以使单个文件的块连续，但文件上的块*不*连续。比如10个文件，a/b/c/d/e/f...保留。在我对这些文件进行真正的写入之后，事实证明文件'b'不在文件'a'旁边，并且某些文件可能与前一个文件和下一个文件都相距甚远，尽管其他文件可能与每个文件相邻其他，很少。

我使用以下代码进行预分配：

```
ftruncate(fd, FILE_SIZE);

xfs_flock_t flag = {0};
flag.l_whence = SEEK_SET;
flag.l_start  = 0;
flag.l_len    = 512*1024*1024;
xfsctl(fileName, fd, XFS_IOC_RESVSP64, &flag); 
```

我的问题是，如何保证文件系统连续阻塞文件？感谢您的宝贵时间并感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:19:09.417

从 XFS 邮件列表中得到答案，原来是默认 inode 分配器的问题。使用 inode64 挂载，如果 AG 中有足够的可用磁盘空间，则文件在内部和外部都是连续的。由于默认的 inode32 分配器，请始终尝试在每次分配的 AG 之间轮换。

# objective-c - ios中的哈希和漩涡？

> ID：13226794
> 
> 赞同：2
> 
> 时间：2012-11-05T06:07:39.983
> 
> 标签：objective-c, ios, hash, passwords, whirlpool

我有一个应用程序可以发布登录数据并检查密码是否与我的数据库中的密码匹配。我的数据库中的密码是使用散列、漩涡函数存储的。如何在 ios obj-c 中使用哈希、漩涡密码？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:32:44.717

作者提供了 C 语言的[参考实现](http://www.larc.usp.br/~pbarreto/WhirlpoolPage.html)。

# jquery - $(selector).each() 函数不起作用

> ID：13226795
> 
> 赞同：1
> 
> 时间：2012-11-05T06:07:40.537
> 
> 标签：jquery

我在我的 jquery 代码中使用以下函数

```
$('#columns').each(function (index) {
alert('here');
}); 
```

我很确定我的 aspx 代码中有一个带有 Id 列的 div，但问题是在运行代码时这个循环没有被执行。不仅如此..我的代码中还有其他一些 .each 循环，但它们都没有工作。有什么帮助吗？

即使我使用

```
$('p').each(function (index) { .... 
```

或者

```
$('div').each(function (index) { .... 
```

或者

```
$('.column').each(function (index) { .... 
```

仍然无法正常工作。

更新：以下是我的 jquery 的结构

```
var iWidget = {

    jQuery: $,

    settings: {....},
...Code goes here
init: function () {

        this.func1();
        this.func2();
    },....
}
.
iWidget.init(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:10:05.613

函数应该有两个参数：

```
function(index,next) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T06:10:48.937

因为您在 id 元素上添加了“**每个”方法。**不在类元素上。

# c# - 使用 C# 与 Amazon EC2 中的 MySQL 的桌面连接（操作方法）

> ID：13226800
> 
> 赞同：1
> 
> 时间：2012-11-05T06:08:11.910
> 
> 标签：c#, mysql, amazon-ec2

在我的桌面应用程序中，我需要连接到 Amazon EC2 中的 MySQL 数据库。我尝试构建连接字符串，但对于我需要包含哪些参数以及连接字符串的外观以及需要调用哪些命令感到非常困惑。任何有这方面经验的人都可以为我提供示例清单，以便我可以关注吗？非常感激你的帮助。

我在 EC2 上拥有的信息，用于使用 Workbench 成功连接：

*   SSH 主机名
*   SSH 用户名
*   SSH 密钥文件（位于我的 PC 中）
*   MySQL 主机名（即 127.0.0.1）
*   MySQL 服务器端口（即 3306）
*   用户密码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:40:14.960

经过互联网的一些研究，我找到了这个看似简单的问题的答案。我真正需要做的就是在项目中添加 MySQL /net 连接器并引用它。然后我使用了以下连接字符串：-

例如：myConnStr = "host=ec2-xxx-xx-xx-xxx.compute-1.amazonaws.com" + ";Port=3306;UserName=your_db_username" + ";Password=your_db_password;Database=your_db;";

谢谢！

# c# - 如何使用c#随时连接http服务器？

> ID：13226803
> 
> 赞同：-1
> 
> 时间：2012-11-05T06:08:22.157
> 
> 标签：c#, asp.net

文件正在上传到 http 服务器，然后我需要连接到该服务器需要检查是否有新文件需要解析该文件。请告诉我如何使用 c# 连接到 http 服务器？以及如何检查它是新文件还是旧文件?

上传的网址如

```
http://uploadfiles.com/upload.php 
```

这不是 FTP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:34:46.140

我在我的一个项目中使用的东西连接到 http 并下载一些东西。上传方式相同

```
public string DLWindowUser(string caption, string caption2, string remote, string local, string user, string password)
        {
            FStatus = new SZOKZZ.FrmStatus();
            FStatus.InitProc(100);
            FStatus.SetCaption(caption, caption2);
            _DlError = null;
            string ret = "";
            using (WebClient webClient = new WebClient())
            {
                NetworkCredential c = new NetworkCredential();
                c.UserName = user;
                c.Password = password;
                webClient.Credentials = c;
                webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(DLDone);
                webClient.DownloadProgressChanged += new DownloadProgressChangedEventHandler(DLSetProc);
                webClient.DownloadFileAsync(new Uri(remote), local);
                FStatus.ShowDialog();
                if (_DlError != null)
                    ret = _DlError.Message;
            }
            return ret;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:32:36.563

将文件上传到服务器是第一步，但下载它们将取决于该服务器存储文件的位置以及是否可以通过某种协议访问它们。例如，如果文件存储在可通过 HTTP 协议访问的位置，您可以使用 a[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)下载远程 url 的内容。

例如：

```
using (var client = new WebClient())
{
    byte[] data = client.DownloadData("http://uploadfiles.com/myfile.txt");
    // TODO: process the data
} 
```

您还可以检查 WebClient 的其他方法，例如[`DownloadString`](http://msdn.microsoft.com/en-us/library/fhd1f0sw.aspx)和[`DownloadFile`](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)。所有方法也具有异步非阻塞等价物。

或者，如果它是您需要下载和解析的 XML 文件，您可以直接使用[XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)类：

```
var doc = XDocument.Load("http://uploadfiles.com/myfile.xml"); 
```

# oracle - 如何确定此 SELECT 查询是否成功执行？

> ID：13226805
> 
> 赞同：0
> 
> 时间：2012-11-05T06:08:24.490
> 
> 标签：oracle, stored-procedures, plsql, oracle10g, oracle11g

```
 CREATE PROCEDURE Pname(in_empno IN NUMBER out_name OUT VARCHAR2)
 AS
 BEGIN
 select EmpName into out_name from emptable where Empno = in_empno;
 END Pname; 
```

在上述过程中，如何检查 SELECT 查询是否在给定条件下成功执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:20:09.857

如果您想查看 out_name 参数的输出，请尝试如下

```
CREATE OR REPLACE PROCEDURE pname (in_empno IN NUMBER, out_name OUT VARCHAR2)
IS
BEGIN
    SELECT  empName 
      INTO  out_name
      FROM  emptable
     WHERE  empno = in_empno;
EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        raise_application_error (
            -20000,
            'Unable to execute procedure because of: ' || SQLERRM
        );
END pname; 
```

此过程可以从 sql plus as 执行

```
var ret varchar2(512);

exec pname(2345,:ret);

print ret; 
```

更新 1

如果您想在 sql 查询成功执行的情况下返回一个值，并且如果出现错误，则返回另一个值，然后执行

```
CREATE OR REPLACE PROCEDURE pname (in_empno   IN        VARCHAR2,
                                              out_name        OUT VARCHAR2,
                                              returnval   IN OUT NUMBER
                                             )
IS
BEGIN
    SELECT  employee_name
      INTO  out_name
      FROM  employees
     WHERE  emp_number = in_empno;

    returnval := 0;
EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        returnval := 1;

END pname; 
```

并从 sql plus 调用该过程为

```
var ret varchar2(512);
var ret2 number;

exec pname(2346,:ret,:ret2);

print ret;
print ret2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:14:05.350

在这个例子中，我可以停止使用另一个输出变量来返回，对吗？并检查我的前端中的条件，例如“out_name”是否以某种方式返回 null 错误句柄，如果它返回值，它将以其他方式处理，哪一个是有效的?????使用另一个 out 变量Retvalue，或者这样做

```
CREATE OR REPLACE PROCEDURE pname (in_empno   IN   VARCHAR2, out_name OUT VARCHAR2)
IS
BEGIN
SELECT  employee_name
  INTO  out_name
  FROM  employees
 WHERE  emp_number = in_empno;

EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        out_name := NULL;
  END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:25:04.377

您可以使用该`EXCEPTION`块来确定是否返回了行或是否发生了其他一些异常。尝试这个

```
BEGIN
 SELECT EmpName into out_name from emptable where Empno = in_empno
 EXCEPTION
     WHEN NO_DATA_FOUND THEN
         out_name := NULL;
END; 
```

# objective-c - 错误消息无法启动 + IOS/cordova

> ID：13226810
> 
> 赞同：0
> 
> 时间：2012-11-05T06:08:57.957
> 
> 标签：objective-c, ios, xcode, cordova

我正在使用 cordova(phonegap) 2.1.0 进行 IOS 应用程序开发。当我通过 xcode 执行我的代码时，我收到以下错误消息：

```
failed to launch '/Users/blah/Library/Developer/Xcode/DerivedData/testapp1-gpcoqhtpqjazwsbkyzcvoxwukjmy/Build/Products/Debug-iphoneos/testapp1.app/testapp1 
```

我无法弄清楚为什么会出现这个错误，因为我没有进行任何代码更改并且在它没有出现之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:26:39.070

尝试：

1 - 从 iPhone 模拟器中删除应用程序

2 - 删除 DerivedData 文件夹的内容

3 - 清理并构建项目，重新启动 Xcode，然后重新启动您的设备。

# iphone - 如何将徽章添加到类似于 Fab Apps 的 UIButton 并在用户单击按钮时增加它

> ID：13226812
> 
> 赞同：0
> 
> 时间：2012-11-05T06:09:10.233
> 
> 标签：iphone, objective-c

我需要添加一条消息，如徽章，`UIButton`以及如何在点击时增加徽章`UIButton`。有人可以帮助我。现在如何自定义类似于具有 36 的徽章的形状。他们使用什么控件。

[https://itunes.apple.com/us/app/fab.com/id469422050?mt=8](https://itunes.apple.com/us/app/fab.com/id469422050?mt=8)

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:54:28.057

具有 36 的徽章是添加的 UIView。您可以添加具有类似背景形状的 UIImage 并更新现在为 36 的 UILabel。

有关 uibutton 上的徽章，请参阅此[链接](https://stackoverflow.com/questions/4722669/how-can-i-add-a-badge-to-a-standard-uibutton)

# node.js - 节点js发送json正文作为响应

> ID：13226815
> 
> 赞同：1
> 
> 时间：2012-11-05T06:09:50.917
> 
> 标签：node.js

用不同的信息重新发布这个问题。

我有3个参数。

```
 response.writeHead(200, 
        {       
         'Content-Type': 'text/json'            
        });      
      response.end({ID:'bufid',Name: bufname,address: bufaddrss});

    } 
```

这是行不通的。在这里，我想在 200 Ok 中向最终用户发送 JSON 正文：

```
{'ID; :'123',
  'Name': 'alice',
   'address': 'xxxxx'} 
```

这里 bufid、bufname 和 bufaddrss 是由函数确定的值，可以在任何地方访问（它们是全局的）

我怎样才能发送该信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:20:44.250

首先，您必须意识到以下几点：

```
{ID:'bufid',Name: bufname,address: bufaddrss} 
```

不是 JSON。JSON 是一种协议。它是一个字符串，它使用类似于 javascript 对象文字语法的语法对 javascript 对象进行编码（因此大多数人对术语“JSON”有混淆和混淆）。

您首先需要将该对象转换为 JSON 格式的字符串。幸运的是 node 带有一个内置方法：`JSON.stringify()`.

```
response.end(
    JSON.stringify({ID: bufid,Name: bufname,address: bufaddrss})
); 
```

# c# - 从 Web API 方法获取原始 POST 数据

> ID：13226817
> 
> 赞同：54
> 
> 时间：2012-11-05T06:09:52.450
> 
> 标签：c#, asp.net-web-api

我在 ApiController 类中有以下 Web API 方法：

```
public HttpResponseMessage Post([FromBody]byte[] incomingData)
{
  ...
} 
```

我想`incomingData`成为 POST 的原始内容。但似乎 Web API 堆栈尝试使用 JSON 格式化程序解析传入数据，这会导致客户端的以下代码失败：

```
new WebClient().UploadData("http://localhost:15134/api/Foo", new byte[] { 1, 2, 3 }); 
```

有一个简单的解决方法吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-06T09:51:08.817

对于遇到此问题的其他任何人，解决方案是定义不带参数的 POST 方法，并通过以下方式访问原始数据`Request.Content`：

```
public HttpResponseMessage Post()
{
  Request.Content.ReadAsByteArrayAsync()...
  ... 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-07-11T10:18:06.367

If you need the raw input in addition to the model parameter for easier access, you can use the following:

```
using (var contentStream = await this.Request.Content.ReadAsStreamAsync())
{
    contentStream.Seek(0, SeekOrigin.Begin);
    using (var sr = new StreamReader(contentStream))
    {
        string rawContent = sr.ReadToEnd();
        // use raw content here
    }
} 
```

The secret is using `stream.Seek(0, SeekOrigin.Begin)` to reset the stream before trying to read the data.

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-07-20T03:39:35.953

其他答案建议删除输入参数，但这会破坏您现有的所有代码。为了正确回答这个问题，一个更简单的解决方案是创建一个如下所示的函数（感谢下面的 Christoph 提供此代码）：

```
private async Task<String> getRawPostData()
{
    using (var contentStream = await this.Request.Content.ReadAsStreamAsync())
    {
        contentStream.Seek(0, SeekOrigin.Begin);
        using (var sr = new StreamReader(contentStream))
        {
            return sr.ReadToEnd();
        }
    }
} 
```

然后在你的 web api 调用中获取原始发布的数据，如下所示：

```
public HttpResponseMessage Post ([FromBody]byte[] incomingData)
{
    string rawData = getRawPostData().Result;

    // log it or whatever

    return Request.CreateResponse(HttpStatusCode.OK);
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-03-17T02:23:21.520

在 MVC 6 中，请求似乎没有“内容”属性。这就是我最终做的事情：

```
[HttpPost]
public async Task<string> Post()
{
    string content = await new StreamReader(Request.Body).ReadToEndAsync();
    return "SUCCESS";
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-11-15T21:22:28.063

我接受了 LachlanB 的回答，并将它放在一个实用程序类中，其中包含一个可以在所有控制器中使用的静态方法。

```
public class RawContentReader
{
    public static async Task<string> Read(HttpRequestMessage req)
    {
        using (var contentStream = await req.Content.ReadAsStreamAsync())
        {
            contentStream.Seek(0, SeekOrigin.Begin);
            using (var sr = new StreamReader(contentStream))
            {
                return sr.ReadToEnd();
            }
        }
    }
} 
```

然后我可以通过这种方式从我的任何 ApiController 方法中调用它：

```
string raw = await RawContentReader.Read(this.Request); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-22T09:02:59.610

或者干脆

```
string rawContent = await Request.Content.ReadAsStringAsync(); 
```

确保在处理原始请求之前在 THE SAME THREAD 上运行上述行

注意：这是针对 ASP.NET MVC 5

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-15T19:09:58.953

在代码块下面的控制器中获取请求正文原始有效负载

```
 string requestBody = string.Empty;
        using (StreamReader reader = new StreamReader(Request.Body, Encoding.UTF8))
        {
            requestBody = await reader.ReadToEndAsync();
        } 
```

# c# - CLR 的类加载服务

> ID：13226819
> 
> 赞同：1
> 
> 时间：2012-11-05T06:10:01.050
> 
> 标签：c#, clr-hosting

我从谷歌阅读主题，我明白这一点：

1.  Windows 加载程序加载 .net 应用程序的 exe 或 dll。
2.  然后 Windows 加载程序为该进程创建 clr。
3.  然后它找到应用程序的入口点并调用它。
4.  但是在 clr 的类加载器服务来加载包含 Main 方法的类之前。
5.  然后进行 jit 编译。
6.  clr 向我们的应用程序提供诸如 gc、异常处理、类加载等服务。

我的问题是：

现在，当我们运行 .net app 时，clr 会找到入口点并开始执行。但是当它遇到

```
Class1 ob = new Class1(); 
```

那个时候我们的进程如何调用CLR的服务，称为类加载器？MSIL 代码相当于是 newobj 在内部调用 clr 的类加载器服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:48:39.293

理解CLR的内部工作需要付出很多努力。但是，如果您有兴趣，请阅读此[CLR Internal Workings](http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)

该站点对 CLR 的工作进行了广泛而详细的解释。

具体来说，您的答案来自站点的 ObjectInstance 部分。他们使用过

SmallClass obj = new SmallClass();

来解释功能。

希望能帮助到你。

# ruby-on-rails-3 - 仅在该用户登录时显示编辑用户链接

> ID：13226832
> 
> 赞同：2
> 
> 时间：2012-11-05T06:11:02.433
> 
> 标签：ruby-on-rails-3, authentication

我有一个用户资源，我想仅在该用户登录时在 show.html.erb 文件中显示“编辑”链接。请参阅屏幕截图。

![这是用户列表。 请注意右上角的 Roger Sterling 已登录。](../Images/0b3223c6d7fb605fc0df1acffa4915c8.png)

这是用户列表。请注意右上角的 Roger Sterling 已登录。

![但是如果我点击 Don Draper，show.html.erb 文件会显示](../Images/ba0635fc3e4bfe81a809bb9cfd4d15bf.png)

但是如果我点击 Don Draper，show.html.erb 文件会显示“编辑”按钮。在这种情况下，我只希望出现在 Roger Sterling 身上。

我正在使用设计进行身份验证。关于如何做到这一点的任何想法？如果您需要查看任何可用代码，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:01:45.793

您可以检查 current_user 和显示的用户，如果它们相同，将显示链接“编辑”。你可以像这样定义一个辅助方法：

```
def correct_user?(user)
  user == current_user
end 
```

在您的 UsersController 的显示操作中将具有：

```
def show
  @user = User.find(params[:id])
  ...
end 
```

在您看来，您可以检查：

```
<% if correct_user?(@user) %>
  <%= link_to 'Edit', @user %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:02:55.103

哈。好，我知道了。

这是 show.html.erb 文件中的循环：

```
<% if (@user.name == current_user.name) %>
    <%= link_to 'Edit', edit_user_registration_path(@user) %> 
<% end %> 
```

和辅助方法：

```
def correct_user
    user == current_user
end 
```

感谢您朝着正确的方向推动！

# php - 在 echos 中编写 HTML VS 在 PHP 标签之间编写 HTML

> ID：13226833
> 
> 赞同：4
> 
> 时间：2012-11-05T06:11:02.743
> 
> 标签：php, html, echo

**在 PHP 标签之间**

```
if(condition){

?>

<!-- HTML here -->

<?

} 
```

**在回声**

```
if(condition){

echo "HTML here";

} 
```

我在我的代码中使用了以上两种方法。但我想知道哪一个是行业标准并且对性能有好处？以上方法有优缺点吗？我应该使用哪种方法？为什么？

由于我是 PHP 新手，我希望你们能帮助我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:14:58.350

最佳行业实践通常是将 HTML 和 PHP 完全分开（参见[http://www.smarty.net/](http://www.smarty.net/)作为模板系统的示例）

但是，如果您不将 HTML 放在 echos 中，您可能会发现您的编辑器会更好地突出显示语法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:13:32.063

基于可读性的个人偏好。选择哪个更容易让其他人阅读您的代码（或将来的您）更容易理解。

不过通常来说，如果它是*大量*的 HTML，你不会想把它放在 PHP 回显中，如果它很短，你会。将前者视为模板，将后者视为返回 HTML 片段的方法。

# php - 如何解决错误“android Error parsing data org.json.JSONException: End of input at character 0 of”？

> ID：13226834
> 
> 赞同：0
> 
> 时间：2012-11-05T06:11:15.770
> 
> 标签：php, android, getjson

我正在使用 AsyncTask 从服务器解析 JSON。但是，当我运行我的应用程序时遇到了问题。在我的 logcat 中，我的 JSON 看起来不错，但之后出现错误消息`android Error parsing data org.json.JSONException: End of input at character 0 of`。我已经尝试了来自论坛的一些建议，但我仍然没有找到解决这个问题的最佳方法。这是我的代码：

```
@Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        List<NameValuePair> params = new ArrayList<NameValuePair>();

        JSONObject json = jParser.makeHttpRequest(url_level_detaildatamerchant, "GET", params);
        Log.d("Get List :", json.toString());

        try {
            int success = json.getInt(TAG_SUCCESS);
            if (success == 1) {
                data = json.getJSONArray(TAG_DATA);
                for (int i=0; i<data.length(); i++) {
                    JSONObject c = data.getJSONObject(i);
                    Pk_Merchant_ID = c.getString(TAG_Pk_Merchant_ID);
                    Fk_Ms_DataLevel2_ID = c.getString(TAG_Fk_Ms_DataLevel2_ID);
                    Fk_Ms_City_ID = c.getString(TAG_Fk_Ms_City_ID);
                    Fk_Ms_Sales_ID_CreatedBy = c.getString(TAG_Fk_Ms_Sales_ID_CreatedBy);
                    Fk_Ms_Sales_ID_LastUpdateBy = c.getString(TAG_Fk_Ms_Sales_ID_LastUpdateBy);
                    CreatedDated = c.getString(TAG_CreatedDated);
                    LastUpdateDated = c.getString(TAG_LastUpdateDated);
                    Descriptions = c.getString(TAG_Descriptions);
                    Address = c.getString(TAG_Address);
                    Telpon = c.getString(TAG_Telpon);
                    Handphone = c.getString(TAG_Handphone);
                    BB_PIN = c.getString(TAG_BB_PIN);
                    email = c.getString(TAG_email);
                    Longitude = c.getString(TAG_Longitude);
                    Latitude = c.getString(TAG_Latitude);
                    Path_PhotoProfile = c.getString(TAG_Path_PhotoProfile);
                    Is_Deleted = c.getString(TAG_Is_Deleted);

                    HashMap<String, String> map = new HashMap<String, String>();
                        map.put(TAG_Pk_Merchant_ID, Pk_Merchant_ID);
                        map.put(TAG_Fk_Ms_DataLevel2_ID, Fk_Ms_DataLevel2_ID);
                        map.put(TAG_Fk_Ms_City_ID, Fk_Ms_City_ID);
                        map.put(TAG_Fk_Ms_Sales_ID_CreatedBy, Fk_Ms_Sales_ID_CreatedBy);
                        map.put(TAG_Fk_Ms_Sales_ID_LastUpdateBy, Fk_Ms_Sales_ID_LastUpdateBy);
                        map.put(TAG_CreatedDated, CreatedDated);
                        map.put(TAG_LastUpdateDated, LastUpdateDated);
                        map.put(TAG_Descriptions, Descriptions);
                        map.put(TAG_Address, Address);
                        map.put(TAG_Telpon, Telpon);
                        map.put(TAG_Handphone, Handphone);
                        map.put(TAG_BB_PIN, BB_PIN);
                        map.put(TAG_email, email);
                        map.put(TAG_Longitude, Longitude);
                        map.put(TAG_Latitude, Latitude);
                        map.put(TAG_Path_PhotoProfile, Path_PhotoProfile);
                        map.put(TAG_Is_Deleted, Is_Deleted);
                    listData.add(map);
                }
            }
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
            Log.d("Error", e.toString());
        }
        return null;
    } 
```

这是我的 php：

```
 <?php
    $response = array();

    $dsn='sqlserver';
    $username='street'; 
    $password='keymaker';

    $koneksi= odbc_connect($dsn,$username,$password);

    if (isset($_POST['Fk_Ms_DataLevel2_ID'])) {

    $Fk_Ms_DataLevel2_ID = $_POST['Fk_Ms_DataLevel2_ID'];

    $query = "select * from Ms_Merchant where Fk_Ms_DataLevel2_ID = '$Fk_Ms_DataLevel2_ID' ";

    $result = odbc_exec($koneksi, $query);

        $response ["Ms_Merchant"] = array();
        WHILE  ($row = odbc_fetch_array($result)) {
            $Ms_Merchant = array();
                $Ms_Merchant["Pk_Merchant_ID"] = $row ["Pk_Merchant_ID"];
                $Ms_Merchant["Fk_Ms_DataLevel2_ID"] = $row ["Fk_Ms_DataLevel2_ID"];
                $Ms_Merchant["Fk_Ms_City_ID"] = $row ["Fk_Ms_City_ID"];
                $Ms_Merchant["Fk_Ms_Sales_ID_CreatedBy"] = $row ["Fk_Ms_Sales_ID_CreatedBy"];
                $Ms_Merchant["Fk_Ms_Sales_ID_LastUpdateBy"] = $row ["Fk_Ms_Sales_ID_LastUpdateBy"];
                $Ms_Merchant["CreatedDated"] = $row ["CreatedDated"];
                $Ms_Merchant["LastUpdateDated"] = $row ["LastUpdateDated"];
                $Ms_Merchant["Descriptions"] = $row ["Descriptions"];
                $Ms_Merchant["Address"] = $row ["Address"];
                $Ms_Merchant["Telpon"] = $row ["Telpon"];
                $Ms_Merchant["Handphone"] = $row ["Handphone"];
                $Ms_Merchant["BB_PIN"] = $row ["BB_PIN"];
                $Ms_Merchant["email"] = $row ["email"];
                $Ms_Merchant["Longitude"] = $row ["Longitude"];
                $Ms_Merchant["Latitude"] = $row ["Latitude"];
                $Ms_Merchant["Path_PhotoProfile"] = $row ["Path_PhotoProfile"];
                $Ms_Merchant["Is_Deleted"] = $row ["Is_Deleted"];
            array_push($response["Ms_Merchant"], $Ms_Merchant);
        }
        $response["success"] = 1;
        echo json_encode($response);
    }
    odbc_close($koneksi);
    ?> 
```

我需要你的所有帮助。谢谢你提前。

# android - 下载带有进度条的图像并在网格视图中显示它们

> ID：13226837
> 
> 赞同：1
> 
> 时间：2012-11-05T06:11:25.007
> 
> 标签：android, download, android-asynctask, progress-bar, android-gridview

我是 Android 和 Java 的新手。我有 36 张图片的 URL。我想下载所有这些图像并在网格视图中显示它们。我指的是下面的代码，所以请如果有人可以编辑此代码以**下载多个图像。**并**在网格视图中显示。** 下面的代码只是获取一个 URL 并从该 URL 下载图像。

```
package com.example.androidhive;

import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class AndroidDownloadFileByProgressBarActivity extends Activity {

// button to show progress dialog
Button btnShowProgress;

// Progress Dialog
private ProgressDialog pDialog;
ImageView my_image;
// Progress dialog type (0 - for Horizontal progress bar)
public static final int progress_bar_type = 0; 

// File url to download
private static String file_url = "http://api.androidhive.info/progressdialog/hive.jpg";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // show progress bar button
    btnShowProgress = (Button) findViewById(R.id.btnProgressBar);
    // Image view to show image after downloading
    my_image = (ImageView) findViewById(R.id.my_image);
    /**
     * Show Progress bar click event
     * */
    btnShowProgress.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // starting new Async Task
            new DownloadFileFromURL().execute(file_url);
        }
    });
}

/**
 * Showing Dialog
 * */
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case progress_bar_type: // we set this to 0
        pDialog = new ProgressDialog(this);
        pDialog.setMessage("Downloading file. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setMax(100);
        pDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pDialog.setCancelable(true);
        pDialog.show();
        return pDialog;
    default:
        return null;
    }
}

/**
 * Background Async Task to download file
 * */
class DownloadFileFromURL extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread
     * Show Progress Bar Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        showDialog(progress_bar_type);
    }

    /**
     * Downloading file in background thread
     * */
    @Override
    protected String doInBackground(String... f_url) {
        int count;
        try {
            URL url = new URL(f_url[0]);
            URLConnection conection = url.openConnection();
            conection.connect();
            // this will be useful so that you can show a tipical 0-100% progress bar
            int lenghtOfFile = conection.getContentLength();

            // download the file
            InputStream input = new BufferedInputStream(url.openStream(), 8192);

            // Output stream
            OutputStream output = new FileOutputStream("/sdcard/downloadedfile.jpg");

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;
                // publishing the progress....
                // After this onProgressUpdate will be called
                publishProgress(""+(int)((total*100)/lenghtOfFile));

                // writing data to file
                output.write(data, 0, count);
            }

            // flushing output
            output.flush();

            // closing streams
            output.close();
            input.close();

        } catch (Exception e) {
            Log.e("Error: ", e.getMessage());
        }

        return null;
    }

    /**
     * Updating progress bar
     * */
    protected void onProgressUpdate(String... progress) {
        // setting progress percentage
        pDialog.setProgress(Integer.parseInt(progress[0]));
   }

    /**
     * After completing background task
     * Dismiss the progress dialog
     * **/
    @Override
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after the file was downloaded
        dismissDialog(progress_bar_type);

        // Displaying downloaded image into image view
        // Reading image path from sdcard
        String imagePath = Environment.getExternalStorageDirectory().toString() + "/downloadedfile.jpg";
        // setting downloaded into image view
        my_image.setImageDrawable(Drawable.createFromPath(imagePath));
    }

}
} 
```

**请帮忙**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:15:28.060

我认为你应该使用[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)在 gridview 中显示图像。它完美无缺！！！

# sql - 关系索引数据库包装器

> ID：13226840
> 
> 赞同：3
> 
> 时间：2012-11-05T06:11:49.480
> 
> 标签：sql, html, relational-database, indexeddb

我计划使用 IndexedDB 来支持离线数据库，但在执行查询和理解它的底层机制时遇到了麻烦。是否有一个 indexeddb 包装器可以让我使用 SQL 查询对 indexeddb 进行查询？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:12:44.103

查看我的包装库[https://bitbucket.org/ytkyaw/ydn-db](https://bitbucket.org/ytkyaw/ydn-db)它将支持有限的 SQL，如 appengine GQL。

IndexedDB API 没有关系概念，也没有 SQL 处理器，但关系基本上是通过一对各自的字段来关联两个对象存储。在 javascript 使用中，直接处理关系通常比声明式 SQL 更有效。使用声明性 SQL 语言，您可以说出您想要的一切并等待结果。适合后端，不适合前端。

使用 IndexedDB，您无需等待，只需打开记录流（光标）并决定每次迭代下一步做什么。它更灵活，**速度**更快。看看`ydn.db.ICursor`这些概念。

目前，图书馆处于非常活跃的阶段，还没有准备好思考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:27:36.680

据我所知，没有。但我有一个使用 LINQ 接口查询 indexeddb 的包装器：[linq2indexeddb](http://linq2indexeddb.codeplex.com)。

# cocoa - 如何使用 Quartz 绘制质量与默认实现相当的贝塞尔曲线？

> ID：13226843
> 
> 赞同：1
> 
> 时间：2012-11-05T06:12:00.123
> 
> 标签：cocoa, quartz-graphics, bezier

我正在用自己的代码绘制贝塞尔曲线。基本上，我正在计算与 CGPath 连接的大量点。但即使线宽相同，我也无法达到与默认实现相同的质量。由于抗锯齿，笔触的边缘有点模糊。中风看起来不错，但我注意到在 Apple 渲染中，抗锯齿看起来不同；抗锯齿区域的宽度（像素既不是笔划的颜色，也不是背景的颜色）更小。

用 Instruments 稍微窥探一下，发现 UIBezierPath 的笔画在 libRIP 中花费了一些时间，但我找不到它到底是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:48:52.167

我自己画了一个椭圆，使用 sin 和 cos 运算。我的椭圆看起来和原来的一样好。

我知道在绘制渐变时存在问题。你的情况是这样吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T23:49:14.810

如果要绘制大量点，则可能会因为过度绘制而变得更暗的抗锯齿边缘。我在网上找不到一个好的图像来描述它，但是如果你从 A -> B 然后再从 A -> B 绘制，两条线可能会生成，比如说，30% 的灰色部分像素，然后将它们混合在一起，结果60% 灰色。

你可能不认为你正在这样做，但如果你有高密度的点，那么你可能会得到重叠的组件（特别是如果你正在绘制单独的线段，你的上限等会重叠）。

可能值得发布一些使用 Pixie 或 xScope 拍摄的示例代码和屏幕截图，以便我们了解发生了什么。

# iphone - 在 [viewcontroller release] 的情况下在 dealloc 中崩溃。EXC_BAD_ACCESS

> ID：13226846
> 
> 赞同：0
> 
> 时间：2012-11-05T06:12:29.293
> 
> 标签：iphone, exc-bad-access

我被困住了。我不知道为什么它在 dealloc 范围内崩溃？伙计们请查看屏幕截图，让我知道您的想法应该是什么问题。我在 dealloc 范围内收到“EXC_BAD_ACCESS”信号。![在此处输入图像描述](../Images/897cb64815a84bfa6476ad63f4594e73.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:57:36.577

这是使用已释放对象的问题，首先转到“编辑方案”和 Objective-C 诊断中的“启用僵尸对象”

然后在“配置文件”模式下运行您的应用程序，这将在此处打开“仪器”，选择 Zombies 并按“配置文件”

并在模拟器或设备中运行您的应用程序，当您的应用程序崩溃时，它将显示您的完美辞职和崩溃位置

它只是你犯了释放对象的小错误。

感谢和问候，

# python - 重用特定的代码行

> ID：13226848
> 
> 赞同：2
> 
> 时间：2012-11-05T06:12:47.780
> 
> 标签：python

假设我在我的 Python 文件中经常使用这个代码块

```
if x == 1:
  x += 1
else:
  x -= 1 
```

有没有办法“复制”这段代码，这样我就不必在整个文件中重复输入这四行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:14:56.267

是的，为它定义一个函数：

```
def flip_member(x):
    if x == 1:
        x += 1
    else:
        x -= 1
    return x 
```

然后，您可以从代码中的任何位置调用该函数，而不是重写相同的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:26:53.413

正如其他答案中所建议的，您可以编写 x 的函数并将 x 设置为等于函数的结果。

一些替代方法是以更简单的形式编写表达式：

```
x = x+1 if x==1 else x-1 
```

上面计算的 x 的新值与问题中的四行代码相同。但是如果你只是想在值 1 和 2 之间来回切换 x，请注意 3-1 是 2，而 3-2 是 1，所以你可以说——在 1 和 2 之间切换——</p>

```
x = 3-x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:19:55.750

```
def manipulate(x):
    return x+1 if x==1 else x-1

myVal = 10
myVal = manipulate(myVal)
print myVal
>>> 9 
```

或者：

```
manipulate = lambda x: x+1 if x==1 else x-1
myVal = manipulate(myVal)
print myVal
>>> 9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:54:39.937

或者更短的单行：

```
x = x - 1 + (x==1) * 2 
```

# hlsl - DirectX 9 HLSL 发光效果

> ID：13226849
> 
> 赞同：0
> 
> 时间：2012-11-05T06:12:49.857
> 
> 标签：hlsl, directx-9

如图所示，屏幕上有多个响铃。![在此处输入图像描述](../Images/d56d4c75f33e442a5eef80e20a06b37b.png)要求说用户可以选择任何一个环，并且选择的环应该有发光效果（发光几秒钟然后变成绿色）。![在此处输入图像描述](../Images/f449d952912ac47b7d81949a025c2874.png)所有图形渲染都将使用 DirectX 9 + HLSL 完成。我面临的问题：

*   如何在着色器代码中将选定的环与其他环区分开来，以便只能将发光效果应用于该环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:12:07.827

您应该使用不同的渲染目标（[SetRenderTarget 的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174455%28v=vs.85%29.aspx)）。首先，您将所有未选择的环渲染到后缓冲区。然后将选定的环绘制到一个额外的纹理作为渲染目标。你的光晕着色器使这个纹理发光，最后你将纹理渲染到后台缓冲区。所以你的绿色环是发光的，而其他环不受发光着色器的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:21:41.233

如果您想要有发光的线条并且不使用发光着色器进行其他任何操作，您可以使用“粗”线条和适当的纹理使线条发光，如下图所示：

![方法](../Images/6f0804b3670a405a4db0f7e5886347c0.png)

这将比其他方法更容易实现并且更快:)

# php - 关于 if 语句的 PHP 语法帮助

> ID：13226854
> 
> 赞同：0
> 
> 时间：2012-11-05T06:13:00.233
> 
> 标签：php, mysql, if-statement

我试图从我试图用 MySQL 做的事情中确定正确的语法。我基本上是说，如果表中某一行的某个列中的值等于某些会话变量，我想回显信息。

我有一张桌子，里面有`subject`,`description`和`user`。`User`通过获取当前用户的名字和姓氏并将其插入到`user`. 这是通过以下代码完成的：

```
$sql="INSERT INTO tbl_name (subject, description, user)
VALUES
('$_POST[subject]','$_POST[description]','$_SESSION[firstname] $_SESSION[lastname]')"; 
```

然后，一旦我将这些数据调出，我想基本上允许用户删除他们自己提交的内容。对我来说，第一步是能够在表格中显示它。我相信这只是语法错误，但我现在对事情的设置方式感到困惑：

```
$sql = "SELECT * FROM tbl_name ORDER BY subject, description 
  LIMIT {$startpoint},{$limit}";
$result = $mysqli->query($sql);
$num_rows = mysqli_num_rows($result);

if($num_rows>0){
$field_num = $mysqli->field_count;
echo "<h1>HERE ARE SOME EXAMPLES:</h1>";
echo "<table border='0'><tr>";

for($i=0; $i<$fields_num; $i++)
    {
        $field = mysql_fetch_field($result);
        echo "<td>{$field->subject}</td>";
        echo "<td>{$field->description}</td>";
        echo "<td>{$field->user}</td>";
        if('$field->user' == '$_SESSION[firstname] $_SESSION[lastname]'){
          echo '<td>You can delete this</td>';
        }
    } 
```

我认为`$field->user`将等于`$_SESSION[firstname] $_SESSION[lastname]`，因为这就是它最初提交到表格的方式（没有“。”用于连接）。

任何帮助，将不胜感激。谢谢！

## 编辑

这是我的表格输出代码的结果。结果实际上是用 $cell 显示的，而不是我相信的 for 循环中的显示。我在之后添加了 if 语句，但它似乎没有认识到`echo "<td>".$field->user."</td>";`这让我认为这就是问题所在。我想要做的是能够在 `echo {$field->user}"; 之后立即添加 if 语句，以保持代码干净。我想我已经彻底混淆了自己：

```
if($num_rows>0){
$field_num = $mysqli->field_count;
echo "<h1>HERE ARE SOME JOBS:</h1>";
echo "<table border='0'><tr>";

for($i=0; $i<$fields_num; $i++)
{
    $field = mysql_fetch_field($result);
    echo "<td>{$field->subject}</td>";
    echo "<td>{$field->description}</td>";
    echo "<td>{$field->user}</td>";

    if($field->user == $_SESSION[firstname]." ".$_SESSION[lastname]){
    echo '<td>You can delete this</td>';
    }
    else{
    echo "<td>".$field->user."</td>";
    echo "<td>".$_SESSION[firstname]." ".$_SESSION[lastname]."</td>";
    }
}

echo "</tr>\n";
while($row = mysqli_fetch_row($result))
{
    echo"<tr>";

    foreach($row as $cell)
        echo "<td>$cell</td>";
        echo "</tr>\n";
}
mysqli_free_result($result);
}
else{
echo 'There are no jobs!';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:01:08.120

我以一种更容易理解的方式重新编写了代码（尽管可能不是最短的方法）：

```
while($row = mysqli_fetch_array($result))
{
    echo"<tr>";
    echo"<td>".$row['subject']."</td>";
    echo"<td>".$row['description']."</td>";
    echo"<td>".$row['user']."</td>";
    if($row['user'] == $_SESSION['firstname']." ".$_SESSION['lastname']){
    echo"<td>You can delete this</td>";
    }
    else{
    echo"<td>Code didn't work</td>";
    }
    echo "</tr>\n";
} 
```

它最终以这种方式工作。如果有办法缩短此时间，请随时在此处发布，否则感谢您的帮助！

# c# - 将 WSE 2.0 迁移到 3.0 的问题

> ID：13226855
> 
> 赞同：2
> 
> 时间：2012-11-05T06:13:14.523
> 
> 标签：c#, web-services, windows-services, wse

我正在尝试将 WSE 2.0 迁移到 3.0（这是一个将使用 WSDL 的 Windows 服务）

为此，我创建了一个自定义策略 PolicyAssertion，但在“ **ProcessMessage** ”信封中我没有得到任何安全信息。我正在使用用户名密码身份验证。

没有安全标签，我的服务无法正常工作。如何解决这个问题？

# jquery - twitter bootstrap 框架中的相等跨度高度

> ID：13226862
> 
> 赞同：0
> 
> 时间：2012-11-05T06:13:41.043
> 
> 标签：jquery, css, twitter-bootstrap

我已经尝试对获得相等的高度跨度进行大量研究，尤其是对于引导程序。我遇到了灯丝组的插件，但我不知道为什么它没有按预期工作。参考[http://filamentgroup.com/lab/setting_equal_heights_with_jquery](http://filamentgroup.com/lab/setting_equal_heights_with_jquery)

在[这个小提琴](http://jsfiddle.net/chou_one/vbAD6/10/)中，我希望所有跨度都具有相同的高度。我已经`equalHeights()`正确调用了方法插件，但没有运气。

请问有什么指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:38:45.243

您的代码不起作用，因为您没有包含等高插件。如果您不必使用该插件，请尝试此代码

```
 $(function() {
   var maxHeight=0;
   $('.span4').each(function(){
      if($(this).height()>maxHeight) {
       maxHeight=$(this).height();
      }
   });

    $('.span4').height(maxHeight);
}); 
```

检查这个工作[小提琴](http://jsfiddle.net/KgCQK/)

** 注意：你的元素 id 应该是唯一的，检查我已经完成的小提琴。

# javascript - 如何使用 html5 视频重播棋盘游戏

> ID：13226864
> 
> 赞同：0
> 
> 时间：2012-11-05T06:13:44.160
> 
> 标签：javascript, html, browser, html5-video

是否可以将棋盘游戏（例如国际象棋）动作重播为 html5 视频，并在两个动作之间具有可配置的延迟。

由于这是几乎所有游戏的共同要求，我希望应该有一个标准的方法来做到这一点。

一种方法是使用 JavaScript 和 DOM 操作绘制动作，但我试图为其提供原生 html5 视频用户体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:10:17.150

html5视频支持的视频格式有OGG、H.264、Theora和WebM

[http://en.wikipedia.org/wiki/HTML5_video#Supported_video_formats](http://en.wikipedia.org/wiki/HTML5_video#Supported_video_formats)

*   如果您可以将您的游戏玩法编码为其中一种格式（但最好是为了兼容性），您可以在 html5`video`对象中播放它

*   如果您希望在 html 页面上绘制和操作图形，您可以使用该`canvas`对象

*   如果您只满足于移动图形，您可以使用`Javascript`和`CSS`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T12:58:31.957

尝试在视频再次完成播放后为您的视频标签添加循环属性，它从开始形式开始。

循环=“循环”

# php - 在sql文本表中插入撇号？

> ID：13226866
> 
> 赞同：0
> 
> 时间：2012-11-05T06:13:55.797
> 
> 标签：php, sql

我有一个 sql 插入脚本，当用户在文本区域中键入文本时，它会更新数据库中的 sql 表，但是如果用户在其文本中使用撇号，则不会将信息插入表中。这是因为 sql 将撇号读取为结束语句或其他任何内容。但是有没有办法使用允许用户输入撇号的语句，即告诉 sql 使用 '%s%' 或其他任何表示撇号的语句？

这是我正在使用的 sql 更新代码：

```
 <?php 

session_start();

include '_config/connection.php'; 

$status = $_POST['status'];

$result = mysql_query("SELECT status FROM ptb_profiles WHERE id=".$_SESSION['user_id']."");

if(!$result) 
{ 
echo "The username you entered does not exist"; 
} 
else 
if($status!= mysql_result($result, 0)) 
{ 
echo ""; 

    $sql=mysql_query("UPDATE ptb_profiles SET status ='$status' WHERE id=".$_SESSION['user_id'].""); 
}
    if($sql) 
    { 

}
header('Location: http://localhost/ptb1/profile.php?id=' . $_SESSION['user_id'] );
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:16:33.660

你就不能避开撇号吗？[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)这是将数据推送到`mysql_query()`s时使用的标准做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:16:16.960

小改动，改写一行代码——

```
$sql=mysql_query('UPDATE ptb_profiles SET status ="'. mysql_real_escape_string($status) .'" WHERE id='.$_SESSION['user_id']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:18:52.917

改变这个：

`$sql=mysql_query("UPDATE ptb_profiles SET status ='$status' WHERE id=".$_SESSION['user_id']."");`

对此：

`$sql=mysql_query('UPDATE ptb_profiles SET status ="'. mysql_real_escape_string($status) .'" WHERE id='.$_SESSION['user_id']);`

PS 永远不要直接将来自 $_POST 或 $_GET 或 $_REQUEST 的变量直接插入到您的 SQL 中，否则您最终会遇到 SQL 注入漏洞。

# javascript - 为 FileDrop 动态添加 dropzone

> ID：13226869
> 
> 赞同：1
> 
> 时间：2012-11-05T06:14:17.170
> 
> 标签：javascript, jquery, jquery-plugins, drag-and-drop

我正在使用[jquery-filedrop](https://github.com/weixiyen/jquery-filedrop)将文件拖放到我的站点，但是我遇到了动态放置区的问题。代码的设置方式有问题吗？该脚本适用于页面加载时存在的元素，但不适用于动态创建的元素。

这是我的模拟设置。 [http://jsfiddle.net/seesoe/4qcfK/](http://jsfiddle.net/seesoe/4qcfK/)

这是js代码

```
$(document).ready(function() {
    $('.cloneMeButton').live('click', function() {
        $('.cloneMaster').clone().attr('class', 'dropzone').text("Dynamic Dropzone Clone").show().appendTo('body');
    });

    var dropzone = $('.dropzone');

    dropzone.filedrop({
        dragOver: function() {
            $(this).removeClass('dropzone').addClass('dropzone_on');
        },
        dragLeave: function() {
            $(this).removeClass('dropzone_on').addClass('dropzone');
        },
        drop: function() {
            $(this).removeClass('dropzone_on').addClass('dropzone');
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:26:03.300

简单被忽略的解决方案，将filedrop包装在一个函数中并在每个函数中调用它，添加事件

[http://jsfiddle.net/4qcfK/3/](http://jsfiddle.net/4qcfK/3/)

```
$(document).ready(function() {
    $('body').on('click', '.cloneMeButton', function() {
        $clone = $('.cloneMaster').clone();
        $clone.text("Dynamic Dropzone Clone").addClass('dropzone').show().appendTo('body');
        fileDropIt($clone);
    });

    fileDropIt($('.dropzone'));

});​ 
```

# java - 使用 Java 的系统性能

> ID：13226875
> 
> 赞同：1
> 
> 时间：2012-11-05T06:14:38.420
> 
> 标签：java

我想使用 Java 查找系统中每个可用处理器的使用情况。我使用以下方法获得了系统中可用处理器的数量：

```
com.sun.management.OperatingSystemMXBean) ManagementFactory().getOperatingSystemMXBean().getAvailableProcessors(); 
```

但无法找到每个可用处理器的使用情况。
请提出一些解决方案。我还需要在系统中使用硬盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:17:34.940

您可以为此使用[SIGAR API](http://support.hyperic.com/display/SIGAR/Home)

或者你可以试试这个来找出 CPU 和 RAM 的使用情况。

```
 import java.lang.management.ManagementFactory;
  import java.lang.management.OperatingSystemMXBean;
  import java.lang.reflect.Method;
  import java.lang.reflect.Modifier;

  private static void printUsage() {
   OperatingSystemMXBean operatingSystemMXBean = ManagementFactory.getOperatingSystemMXBean();
   for (Method method : operatingSystemMXBean.getClass().getDeclaredMethods()) {
   method.setAccessible(true);
  if (method.getName().startsWith("get") 
    && Modifier.isPublic(method.getModifiers())) {
        Object value;
    try {
        value = method.invoke(operatingSystemMXBean);
    } catch (Exception e) {
        value = e;
    }
    System.out.println(method.getName() + " = " + value);
    } 
 }
} 
```

看看这个[线程](https://stackoverflow.com/questions/47177/how-to-monitor-the-computers-cpu-memory-and-disk-usage-in-java)

# android - Android 无法将新创建的位图流写入 WCF 服务

> ID：13226876
> 
> 赞同：1
> 
> 时间：2012-11-05T06:14:41.180
> 
> 标签：android, wcf, inputstream

我在将位图流写入 WCF DataOutputStream 请求时遇到了一个奇怪的问题。我正进入（状态：

> IOException: 预期字节 XXX 但收到 XXX

我已经使用 FileInputStream 对其进行了测试，并且可以完美上传，但是当我将位图转换为 InputStream 时，它会抛出一个`IOException`. 任何帮助将不胜感激。

下面是我调用 AsyncTask 的函数：

```
public static Boolean AddAdItemImage(int AdItemId,File ThisFile)
{
    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    DataInputStream inStream = null;
    InputStream fileInputStream = null;
    ByteArrayOutputStream stream = null;

    try 
    {    
        if (ThisFile.isFile()) 
        {
            Bitmap Bm = Utility.decodeSampledBitmapFromResource(ThisFile.getPath(), 640, 480);
            stream = new ByteArrayOutputStream();
            Bm.compress(CompressFormat.JPEG, 100, stream);
            fileInputStream = new ByteArrayInputStream(stream.toByteArray());

            //fileInputStream = new FileInputStream(ThisFile);

            conn = (HttpURLConnection) new URL(Params.GetServiceUrl()+"/AddAdImage?AdItemId="+String.valueOf(AdItemId)+"&ContentType="+Utility.GetFileMimeType(ThisFile)+"&apikey="+Params.GetApiKey()).openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");

            conn.setFixedLengthStreamingMode((int) ThisFile.length());// works fine till 24 mb file
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type","application/stream");

            dos = new DataOutputStream(conn.getOutputStream());

            int maxBufferSize =  1 * 1024 * 1024;
            int bytesAvailable = fileInputStream.available();
            int bufferSize = Math.min(bytesAvailable,maxBufferSize);

            byte[] buffer = new byte[bufferSize];

            Log.i("Upload Ad Image", "Writing Stream");

            while ((bufferSize = fileInputStream.read(buffer)) > 0)
            {
                dos.write(buffer, 0, bufferSize);
            }

            Log.i("Upload Ad Image", "Stream Written");

            //dos.write(stream.toByteArray());

            String lineEnd = "";

            dos.writeBytes(lineEnd);

            Log.i("Upload Ad Image", "Line Written");

            // read the SERVER RESPONSE
            inStream = new DataInputStream(conn.getInputStream());
            String str = new String();
            String strResponse = new String();

            while ((str = inStream.readLine()) != null) 
            {
                strResponse += str;
            }

            inStream.close();

            dos.flush();
            dos.close();

            return Boolean.valueOf(strResponse);
        } 
    }
    catch (MalformedURLException ex)
    {
        Log.e("AddAdItemImage", "MalformedURLException: " + ex.getMessage(),ex);
    } 
    catch (IOException ioe)
    {
        Log.e("AddAdItemImage", "IOException: " + ioe.getMessage(),ioe);
    }
    catch (IllegalStateException e)
    {
        Log.e("AddAdItemImage", "IllegalStateException: " + e.getMessage(),e);
    }
    catch (Exception e)
    {
        Log.e("AddAdItemImage", "Exception: " + e.getMessage(),e);
    }
    finally
    {
        try
        {
            if(fileInputStream != null)
                fileInputStream.close();
        }
        catch (IOException e){} 

        try 
        {   
            if(stream!=null)
                stream.close();
        }
        catch (IOException e) {}
    }   

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T11:36:13.193

我解决了这个问题，就是这一行：

```
conn.setFixedLengthStreamingMode((int) ThisFile.length()); 
```

文件内容长度与新创建的位图不同后。我想知道我怎么能花将近两天的时间来找到解决方案；我想有时你只需要开箱即用：D

# javascript - 如何执行 setfocus(); 到下拉列表

> ID：13226888
> 
> 赞同：3
> 
> 时间：2012-11-05T06:15:29.280
> 
> 标签：javascript, drop-down-menu, setfocus

我有一个下拉列表，它在 OnLoad() 事件上从 DB 加载记录，我想在页面加载时将焦点设置在下拉框上。我尝试了很多方法来设置焦点，但它不起作用。请看下面的代码。

HTML 代码如下，

```
 <body onLoad="getDataSourceList()">
<div class="wrapper">   

    <form id="myUploadForm" name="myUploadForm">

    <table width="100%">
            <tr> <td align="right"><label for="dataSourceId" style=" font-family: serif; font-size: small;">DataSource Type<b style="color: red">*</b>: </label> </td> 
                 <td><select name="dataSourceType" id="dataSourceId">
                        <option value="Select"> Select</option>
                    </select>
                 </td> 
            </tr>

        </table>

    </form> 
```

* * *

我的ajax代码如下：

```
function getDataSourceList() {
    $.ajax({
        url : '/DataWeb/getAllDataSources',
        type : 'post',
        dataType : 'json',
        contentType : 'application/json',

        success : function(map) {
            console.log(map);
            var select = document.getElementById("dataSourceId");
            for (index in map) {
                select.options[select.options.length] = new Option(
                        map[index], index);
            }
        },

        error : function(map) {
            console.log(map);
            console.log("error occured!!!");
        },

    });
    document.getElementById('dataSourceId').focus();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:35:07.457

```
$(document).ready(function(){
 $("#myid").focus();
}); 
```

这对我有用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:22:10.897

尝试将选项卡索引添加到 dataSourceId 元素。请参阅[哪些 HTML 元素可以接收焦点？](https://stackoverflow.com/questions/1599660/which-html-elements-can-receive-focus)有关 focus() 应用的元素的详细信息。

# sql - 无法删除临时表 SQL

> ID：13226890
> 
> 赞同：6
> 
> 时间：2012-11-05T06:15:43.153
> 
> 标签：sql

您好我正在创建一个临时表并将数据插入到表中。我将使用 Temp 表将其加入特定用户。

```
CREATE TABLE #MyTempTable
(
    UsersId int,
    ValautionCount int 
)

    SELECT
        U.UserId, 
        COUNT(*) AS ValautionCount
    INTO  #MyTempTable
    FROM 
        Users U
        Right JOIN Valuation V ON V.ValuationUser = U.UserId
    GROUP BY 
        U.UserId

DROP TABLE #MyTempTable 
```

当我运行这个查询时，我得到这个错误：数据库中已经有一个名为“#Temp”的对象。

但是当我运行此查询时，`DROP TABLE #MyTempTable`我收到此错误：无法删除表“#Temp”，因为它不存在或您没有权限。我正在使用 SQL 2012

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T06:24:48.697

SELECT ... INTO ... 语句本身创建#Temp 表。这里不需要 CREATE TABLE 语句。删除“CREATE TABLE”语句并尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:19:04.383

您的数据库中已经有一个名为“Temp”的实体。由于访问权限，您无法删除该实体。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T06:25:09.833

无需删除临时表，因为它仅在会话之前可见。

```
Create PROCEDURE proctemptable
BEGIN

IF object_id('tempdb..#Temp') is not null  // Try this hope this will work
BEGIN
  DROP TABLE #Temp
END

CREATE TABLE #Temp
(
    UsersId int,
    ValautionCount int 
)

SELECT
    U.UserId, 
    COUNT(*) AS ValautionCount
INTO  #Temp
FROM 
    Users U
    Right JOIN Valuation V ON V.ValuationUser = U.UserId
GROUP BY 
    U.UserId

//DROP TABLE #Temp 

END 
```

#Temp表不需要删除，存储过程执行完成后会自动删除

或者

请参阅此链接以获取 sql server 中的更多临时表

[http://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/](http://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-18T19:53:07.480

您可能会在代码中两次创建同一个表。

我遇到了同样的问题，我将一段我想重用（修改）的代码复制到同一个过程中，包括一条`CREATE TABLE`语句——我实际上是*两次*创建表——即使这些`CREATE TABLE`语句在单独的`BEGIN`和`END`标记之间，并且有是`DROP TABLE`在第二个语句之前删除第一个“实例”的`CREATE`语句，我遇到了这个确切的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-24T09:54:53.263

[微软页面上关于如何删除临时表的](https://docs.microsoft.com/en-us/sql/t-sql/statements/drop-table-transact-sql?view=sql-server-2017)官方回答帮助了我。简而言之，我使用了它并且效果很好。

```
use tempdb
go

IF OBJECT_ID(N'tempdb..#yourtemptable', N'U') IS NOT NULL   
DROP TABLE #yourtemptable;  
GO 
```

使用 MS SQL 2017

# asp.net - 在 jqgrid 搜索工具栏中按日期搜索不起作用

> ID：13226897
> 
> 赞同：0
> 
> 时间：2012-11-05T06:16:33.213
> 
> 标签：asp.net, json, search, jqgrid

我正在使用`Jqgrid`Asp.net。我正在尝试实现 Toolbar Search 。每个字段都是可搜索的，但日期搜索不起作用。我看到了一些示例，它们正在工作，因为它们使用本地数据和源中的日期格式是`2012/02/02`. 但是我直接从数据库中获取数据，所以请帮我解决这个问题。

这是我的 Date Col 模块

```
 name:'Date',
               index:'Date',                                                                                  
               align:"center",
               formatter:'date',                                                                 
               formatoptions: {newformat:'m/d/Y'},                               
               searchoptions: 
               {sopt: ['eq','ne'],
               dataInit : function (elem) {
$(elem).datepicker({ changeYear: true, changeMonth: true,  showButtonPanel: true});
                                        }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:49:07.840

`sorttype: "date"`您应该在列的定义中使用附加属性`'Date'`。此外，您应该验证服务器是否以正确的格式返回日期值。

如果您仅使用jqGrid`newformat`的属性，`formatoptions`请尝试以 ISO 8601 格式读取数据：“Ymd”。如果服务器以另一种格式返回日期，则应`srcformat`针对`formatoptions`. 例如`srcformat: "m/d/Y"`.

# qml - 如何使用 QML 实现带有列表视图的搜索输入框以从列表视图中搜索项目

> ID：13226901
> 
> 赞同：1
> 
> 时间：2012-11-05T06:16:50.570
> 
> 标签：qml

我正在尝试使用列表视图实现搜索输入框，以使用 QML 从列表视图中搜索任何项目。我已经实现了TextInput框和ListBox，现在我需要实现InputBox和listbox之间通信的代码，这样当我在InputBox中写一个字母时，listBox中的项目就会出现。

对此实施的任何建议都将受到高度赞赏。请提供您对此的看法。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:55:39.917

您可能应该在 Item 中公开一个`text`字符串属性`TextInput`，并通过更新`ListBox`.

像这样的东西：

```
TextInput {
  id: textInput

  onTextChanged: {
    // Update the filter for the ListBox
    listBox.filter(text)
  }

}

ListBox {
  id: listBox
} 
```

# android - 位图变大

> ID：13226907
> 
> 赞同：2
> 
> 时间：2012-11-05T06:17:20.150
> 
> 标签：android, bitmap

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T06:20:57.057

试试这个

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
        try {
            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //The new size we want to scale to
            final int REQUIRED_WIDTH=WIDTH;
            final int REQUIRED_HIGHT=HIGHT;
            //Find the correct scale value. It should be the power of 2.
            int scale=1;
            while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
                scale*=2;

            //Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        }
            catch (FileNotFoundException e) {}
        return null;
    } 
```

这将根据您传递的宽度和高度缩放位图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:25:09.617

在将位图应用到图像视图之前，使用此类将位图缩小到所需的较小尺寸。

```
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

class BitmapLoader
{
    public static int getScale(int originalWidth,int originalHeight,
    final int requiredWidth,final int requiredHeight)
    {
       //a scale of 1 means the original dimensions 
       //of the image are maintained
      int scale=1;

//calculate scale only if the height or width of 
//the image exceeds the required value. 
if((originalWidth>requiredWidth) || (originalHeight>requiredHeight)) 
{
    //calculate scale with respect to
    //the smaller dimension
    if(originalWidth<originalHeight)
        scale=Math.round((float)originalWidth/requiredWidth);
    else
      scale=Math.round((float)originalHeight/requiredHeight);

}

return scale;
}

public static BitmapFactory.Options getOptions(String filePath,
    int requiredWidth,int requiredHeight)
{

BitmapFactory.Options options=new BitmapFactory.Options();
//setting inJustDecodeBounds to true
//ensures that we are able to measure
//the dimensions of the image,without
//actually allocating it memory
options.inJustDecodeBounds=true;

//decode the file for measurement
BitmapFactory.decodeFile(filePath,options);

//obtain the inSampleSize for loading a 
//scaled down version of the image.
//options.outWidth and options.outHeight 
//are the measured dimensions of the 
//original image
options.inSampleSize=getScale(options.outWidth,
        options.outHeight, requiredWidth, requiredHeight);

//set inJustDecodeBounds to false again
//so that we can now actually allocate the
//bitmap some memory
options.inJustDecodeBounds=false;

return options;

}

public static Bitmap loadBitmap(String filePath,
    int requiredWidth,int requiredHeight){

BitmapFactory.Options options= getOptions(filePath,
        requiredWidth, requiredHeight);

return BitmapFactory.decodeFile(filePath,options);
}
} 
```

然后从您的活动中调用

```
Bitmap reqBitmap = loadBitmap(String filePath,int requiredWidth,int requiredHeight) 
```

此类的方法提供从 sd 卡获取的位图的文件路径，并将 requiredWidth 和 requiredHeight 设置为您希望将位图缩放到的尺寸。现在使用 reqBitmap。

# ruby-on-rails - 如何选择具有超过 n 个子记录的所有记录

> ID：13226913
> 
> 赞同：8
> 
> 时间：2012-11-05T06:18:05.253
> 
> 标签：ruby-on-rails, activerecord

对于这种情况`Employee has_many Clients`，我正在尝试编写一个 ActiveRecord 查询，该查询将返回所有拥有 n 个或更多客户的员工。编写一个连接查询来查找至少有 1 个客户的所有员工很简单，但是将我的查询扩展到这个更一般的情况让我很困惑。

编辑 - 我应该补充一点，我正在尝试完全在数据库级别执行此操作。我想避免在 Ruby 中迭代集合。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-06T11:10:18.753

感谢 mu 和 vijikumar，这就是我想出的

```
Employee.select("employees.*").joins(:clients).group("employees.id").having("count(clients.id) > ?", n) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T07:00:29.447

```
@employees=Employee.select{|e|e.clients.length > n } 
```

相同的活动记录查询..

```
@employees=Employee.find(:all, :joins=>"as emp inner join clients as c on c.employee_id=emp.id", :select=>"emp.id", :group=>'emp.id having count(c) > n') 
```

它将提供所有拥有超过 n 个客户的员工 ID。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-05T07:12:01.310

试试这个，

```
@emp_client = []
@emp = Employee.all
@emp.each do |e|
  if @emp.clients.present?
    @emp_clinet << @emp
  end
end 
```

# c# - 对所有数据库的通用 odbc 类支持

> ID：13226920
> 
> 赞同：0
> 
> 时间：2012-11-05T06:18:35.030
> 
> 标签：c#, c++, .net, database, odbc

在过去的几天里，我根据我之前关于...的问题使用 odbc 连接器处理各种数据库。

[为任何数据库支持编写通用驱动程序类](https://stackoverflow.com/questions/13133804/writing-driver-class-generic-for-any-database-support)

我发现所有驱动类都实现了**IDBDriver.cpp**并编写了自己的连接类以通过 odbc 支持

我的问题是...

1.  我可以写自己的课吗？
2.  如果仅通过更改 web.config 文件中的名称并将 dll 放置到该项目中成功，我就可以处理各种连接。
3.  有没有别的办法……？
4.  我是否以正确的方式进行？

等待您的宝贵回复

# xquery - 如何在 XQUERY 子序列中使用 order by 子句？

> ID：13226922
> 
> 赞同：0
> 
> 时间：2012-11-05T06:18:51.663
> 
> 标签：xquery

我有一个名为 TBTASK 的表结构如下

```
PRIID CHARACTER(15) NOT NULL,
BID CHARACTER(10) NOT NULL,
REF CHARACTER(15) NOT NULL,
TIME TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP,
XMLREC XML NOT NULL 
```

存储在 DB XMLREC 列中的 XML 如下

```
<Root><Code>6</Code><Id>4</Id><Number>999</Number></Root>
<Root><Code>6</Code><Id>4</Id><Number>1001</Number></Root>
<Root><Code>6</Code><Id>4</Id><Number>1002</Number></Root>
<Root><Code>6</Code><Id>4</Id><Number>998</Number></Root> 
```

我使用下面的 XQUERY 来获取数据：

```
XQUERY
let $str:= subsequence((db2-fn:sqlquery( 'SELECT XMLREC FROM LIS.TBTASK WHERE BID=1') 
    /Root[Code='6']),1,5)    
order by $str/Root/Number
return ($str) 
```

但我没有得到按 NUMBER 列排序的结果（order by 应用于 NUMBER.

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:55:28.337

这应该有效：

```
for $str in (db2-fn:sqlquery( 'SELECT XMLREC FROM LIS.TBTASK WHERE BID=1')/Root[Code='6']),1,5)    
order by xs:int($str/Number)
return ($str) 
```

请注意，您至少需要一个 for 语句才能使 order by 有用。此外，您的路径 ($str/Root/Number) 错误，因为 $str 已经在根节点。此外，我假设您想以数字方式而不是字符串对其进行排序，因此我添加了显式类型转换以使其工作。

# android - 在可扩展列表视图上添加了双子

> ID：13226923
> 
> 赞同：3
> 
> 时间：2012-11-05T06:19:02.620
> 
> 标签：android, duplicates, expandablelistview, expandablelistadapter

我在添加孩子时遇到问题，当我添加一个孩子然后在 ui 上两个孩子出现相同的孩子位置..我的问题类似于以下问题中提到的问题

[子布局在 ExpandableListView 中重复多次](https://stackoverflow.com/questions/10339777/child-layout-is-repeating-many-times-in-expandablelistview)

[https://stackoverflow.com/questions/10938763/double-child-entries-in-expandablelistview](https://stackoverflow.com/questions/10938763/double-child-entries-in-expandablelistview)

但无法找到解决方案..请[在此处查看我的代码](http://pastie.org/5187677)

使用这个双维数组给孩子的价值..

```
String[][] child = {
         mContext.getResources().getStringArray(R.array.alerts),
         mContext.getResources().getStringArray(R.array.alerts),
         mContext.getResources().getStringArray(R.array.alerts),
         mContext.getResources().getStringArray(R.array.alerts),
         mContext.getResources().getStringArray(R.array.alerts) }; 
```

我用这个：

```
@Override
  public int getChildrenCount(int groupPosition) {
    return child.length;
  } 
```

但是对于这个，孩子的数量也是 5，它显示了 10 个项目..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-02T08:03:33.333

我遇到了完全相同的问题，原来是因为我在 OnGroupClickListener 的 onGroupClick 方法中返回了 false。这是一个解决方案：

```
@Override
public boolean onGroupClick(ExpandableListView parent, View v, int position, long id) {
    // ... do stuff //
    return true; // make sure you return true.
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T06:48:01.913

看来您是硬编码的子位置，例如，

```
 @Override
  public int getChildrenCount(int groupPosition) {
    return 1;
  } 
```

应该在哪里`your_data_collection_size`

此外，您有硬编码的 childId，例如，

```
 @Override
  public long getChildId(int groupPosition, int childPosition) {
    return 0;
  } 
```

`childPosition`不应该`0`

如果您还有任何疑问/问题，您可以下载并检查我[`demo example from you github`](https://github.com/lalit3686/ExandableListViewDemo)的，如果您有任何疑问，可以将您的问题与我联系。

# java - 如何将数据从一个jsp传递到另一个

> ID：13226925
> 
> 赞同：-1
> 
> 时间：2012-11-05T06:19:02.787
> 
> 标签：java, jsp, servlets

我有一个 jsp 页面，其中显示了如下所示的 DB 表记录，其中 resultset_values--此对象包含我从 servlet 传递的所有 ResultSet 值。

```
 <%Iterator itr;%>
    <% ArrayList data= 
    (ArrayList)request.getAttribute("resultset_values");                        
    for (itr=data.iterator(); itr.hasNext(); )
     {
    %>

    <tr>
     <td width="119"><a href="files.jsp"><%= itr.next()%></a></td>
     <td width="168"

    ><%=itr.next()%></td>
    <td width="200"><%=itr.next()%></td>            
    </tr>
    <%}%> 
```

在迭代时，它以表格格式打印所有值。首先`<%= itr.next()%>`将打印表 id。单击​​该 id 时，我将提供指向另一个 jsp 页面（files.jsp）的链接。现在我如何将这个 id（我点击的）发送到 files.jsp。我试图通过请求和会话（`request.setAttribute()`和）设置值，但我没有得到`getAttribute()`那个 id 得到错误。`itr.next()``NoSuchElementException`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:29:54.997

这是我从你的问题中了解到的。
itr.next() 打印 id，当用户单击链接时，您必须将此 id 传递给 files.jsp。如果这是您想要的，请执行以下操作

```
<a href = "files.jsp?id=<%=itr.next().toString()%>" >  <%= itr.next()%>  </a> 
```

在 files.jsp 中执行以下操作。
request.getParameter("id");

希望这可以帮助你..

# mysql - 如何根据单独行中另一个字段的值显示一行？

> ID：13226927
> 
> 赞同：0
> 
> 时间：2012-11-05T06:19:06.247
> 
> 标签：mysql, wordpress

在下表中，元键`logo_ID`和基于字段`show_logo`相互关联。`post_id`如何获得仅使用**mysql**`logo_ID`的行`show_logo`的 值？`1`

 **```
post_id  meta_key     meta_value
-------  -----------  ----------
262      logo_ID      263       
262      show_logo    0         
260      logo_ID      261       
260      show_logo    1         
258      logo_ID      259       
258      show_logo    1 
```

如果它看起来很熟悉，那是因为它来自 WP`postmeta`表。我`$wpdb`用来查询数据库，所以一切都必须在 mysql 中（任何地方都没有 WP 功能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:23:51.153

您可以将表连接到自身，在子句`wp_postmeta`中指定您想要的值。`WHERE`

```
SELECT pm2.post_id, pm2.meta_key
FROM wp_postmeta pm1 
JOIN wp_postmeta pm2 
    ON pm2.post_id = pm1.post_id AND pm2.meta_key = 'logo_ID'
WHERE pm1.meta_key = 'show_logo' AND pm1.meta_value = 1 
```

如果您正在处理大量数据，这会相当快，因为​​它将使用`wp_postmeta`表上的索引。如果您还想获取其他值作为标准，或者获取其他帖子字段的表格，`JOIN`您可以更多。`wp_postmeta``wp_posts`

[**SQL小提琴**](http://sqlfiddle.com/#!2/7fa5e/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:23:33.320

`CASE`使用基于值的语句对行进行透视，`meta_key`以便您可以显示`post_id`一行中的值，然后将其包装在子查询中。

```
SELECT *
FROM
(
    SELECT  post_id,
            MAX(CASE WHEN meta_key = 'logo_ID' THEN meta_value ELSE NULL END) logo_ID,
            MAX(CASE WHEN meta_key = 'show_logo' THEN meta_value ELSE NULL END) show_logo
    FROM    tableName
    GROUP BY post_ID
) a
WHERE show_logo = 1 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/f6dd3/3)**

# javascript - Handlebars 的模板继承

> ID：13226930
> 
> 赞同：11
> 
> 时间：2012-11-05T06:19:32.800
> 
> 标签：javascript, templates, handlebars.js

我正在尝试使用把手从 base.html 模板继承到其他模板。但我没有为此获得灵魂。

拜托，任何人都可以通过简单的演示帮助我。与 base.html ， extend.html

例如，Base.html

```
<html><head></head>
<body>
{% block content %}{% endblock %}
</body>
</html> 
```

扩展.html

```
{% extends "base.html" %}
{% block content %}<h1>Foobar!</h1>{% endblock %} 
```

我需要在 base.html 中包含哪些文件......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-16T01:40:38.200

Handlebars 不提供开箱即用的模板继承。

但是，有些库提供了进行模板继承所需的帮助程序。我最喜欢的是[Wax On](https://www.npmjs.com/package/wax-on)，因为它基于 Pug 和 Django 中的模板继承，并且可以按预期工作。

还有一些[车把布局](https://www.npmjs.com/package/handlebars-layouts)，其工作方式略有不同，但如果需要，它也可以在客户端运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T17:49:09.393

可以扩展部分以支持“块”，请参阅[此要点](https://gist.github.com/Wilfred/715ae4e22642cfff1dbd)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T02:40:15.963

```
// in my node server: using express and hbs 
hbs.registerPartials(__dirname + '/built/development/templates');
app.get('/', function (req, res) {
  res.render('_base', {
    "STATIC_URL": app.get('STATIC_URL')
  });
});

// This is in my base template 
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" itemscope itemtype="http://schema.org/Article" xmlns:fb="http://ogp.me/ns/fb#"> <!--<![endif]-->
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# blog: http://ogp.me/ns/blog#">
    {{> _config_logged_out }}
    {{> _scripts }}
</head> 
```

# android - 如何在不使用任何本机 api 的情况下在 Android 中进行音频时间拉伸

> ID：13226934
> 
> 赞同：4
> 
> 时间：2012-11-05T06:19:58.760
> 
> 标签：android, audio

我一直试图在互联网上找到一种方法来在 Android 中进行音频时间拉伸，但不幸的是一无所获。有一些 API，如 Sonic，SoundStrech 用 C/C++ 编写，但是要使用它们，需要大量的 C\C++ 理解。我也不确定这些是否可以在付费应用程序中使用。好吧，我的问题是；真的没有办法在不使用任何原生 API 的情况下在 Android 中进行声音拉伸吗？如果有的话，你能提一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:24:44.763

这不是给你的答案，而是提醒你不要犯我的错误。我对 android 和 java 很陌生，我也很惊讶，在纯 java 中似乎没有通过使用 soundpool 或 audiotrack 的解决方案。

我以为我已经找到了使用 aocate presto 声音库的解决方案。很容易实现，但是有两个问题：

*   除了应用程序的费用外，您应用程序的用户还必须为使用声音库支付 6 美元。

*   据我了解评论（或者我可能没有正确理解），它需要验证每次使用的许可证，这意味着它只适用于互联网连接。

我现在正在尝试遵循本教程： http: [//mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/)并希望它能帮助菜鸟用 ndk 弄湿他的脚使用 SoundTouch：[http](http://www.surina.net/soundtouch/) ://www.surina.net/soundtouch/ 。正如一些人所提到的，这也有它的局限性，即它在 ICS 中不受支持。我已经读到，OpenSL ES 对 Jelly Bean 进行了更新，因此它可能会再次运行。有人可以验证或纠正我吗？

# python - 用于从 s3 存储桶下载最新文件的 Boto 脚本

> ID：13226940
> 
> 赞同：8
> 
> 时间：2012-11-05T06:20:21.240
> 
> 标签：python, amazon-s3, boto

我喜欢编写一个 boto python 脚本来从 s3 存储桶下载最新的文件，例如，我在 s3 存储桶中有 100 个文件，我需要在其中下载最近上传的文件。

有没有办法使用 python boto 从 S3 下载最近修改过的文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T20:31:16.433

您可以列出存储桶中的所有文件并找到最新的文件（使用 last_modified 属性）。

```
>>> import boto
>>> c = boto.connect_s3()
>>> bucket = c.lookup('mybucketname')
>>> l = [(k.last_modified, k) for k in bucket]
>>> key_to_download = sorted(l, cmp=lambda x,y: cmp(x[0], y[0]))[-1][1]
>>> key_to_download.get_contents_to_filename('myfile') 
```

但是请注意，如果存储桶中有很多文件，这将非常低效。在这种情况下，您可能需要考虑使用数据库来跟踪文件和日期，以提高查询效率。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-02T16:39:20.777

要添加到@garnaat 的答案，您可以通过`prefix`减少匹配文件来解决效率低下的问题。而不是`c.lookup`，此示例将仅搜索子存储`subdir`桶中以 开头的文件`file_2014_`：

```
>>> import boto
>>> c = boto.connect_s3()
>>> bucket = c.get_bucket('mybucketname')
>>> bucket_files = bucket.list('subdir/file_2014_')
>>> l = [(k.last_modified, k) for k in bucket_files]
>>> key_to_download = sorted(l, cmp=lambda x,y: cmp(x[0], y[0]))[-1][1]
>>> key_to_download.get_contents_to_filename('target_filename') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-13T00:14:41.153

S3 启动了存储桶[http://docs.aws.amazon.com/AmazonS3/latest/dev/Versioning.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/Versioning.html)中文件的版本控制功能。

您可以通过调用 s3client.listVersions(request) 并根据需要指定 n 来获取最新的 n 个文件。请参阅[http://docs.aws.amazon.com/AmazonS3/latest/dev/list-obj-version-enabled-bucket。 html](http://docs.aws.amazon.com/AmazonS3/latest/dev/list-obj-version-enabled-bucket.html)

示例是在 java 中。不确定 boto 是否添加了用于版本控制的 API。

# c++ - 函数指针的 Type(f)(Type) 和 Type(*f)(Type) 之间的区别？

> ID：13226942
> 
> 赞同：3
> 
> 时间：2012-11-05T06:20:29.167
> 
> 标签：c++, function-pointers

这两个函数原型有什么区别？

```
void apply1(double(f)(double));
void apply2(double(*f)(double)); 
```

如果目标是将提供的函数应用于数组，是否有比另一个更快的版本？

编辑：实施示例：

```
#include <iostream>
#include <vector>
#include <cmath>

// First version
template<typename Type> void apply1(std::vector<Type>& v, Type(f)(Type))
{
    for (unsigned int i = 0; i < v.size(); ++i) {
        v[i] = f(v[i]);
    }
}

// Second version
template<typename Type> void apply2(std::vector<Type>& v, Type(*f)(Type))
{
    for (unsigned int i = 0; i < v.size(); ++i) {
        v[i] = f(v[i]);
    }
}

// Main
int main()
{
   std::vector<double> v = {1., 2., 3., 4., 5.};
   apply1(v, std::sin);
   apply2(v, std::sin);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T06:51:03.817

First, the speed of the template wrapper instantiation is going to be almost entirely at the mercy of your optimizer.

That said, I've reduced your samples to the most basic code I can think of, specifically to check the invoke of the function parameters. You can read on, but you'll see they invoke exactly the same. There is no benefit for one declaration vs another. Further, I included the one you left out, (reference-decl)

```
#include <cstdio>

int hello(int x)
{
    return x;
}

template<typename Type> 
void apply1(Type x, Type (f)(Type))
{
    f(x);
}

template<typename Type> 
void apply2(Type x, Type (*f)(Type))
{
    f(x);
}

template<typename Type> 
void apply3(Type x, Type (&f)(Type))
{
    f(x);
}

int main(int argc, char *argv[])
{
    apply1(1,hello);
    apply2(2,hello);
    apply3(3,hello);
    return 0;
} 
```

The actual asm generated from the deductions is:

**apply1**

```
__Z6apply1IiEvT_PFS0_S0_E:
Leh_func_begin2:
    pushq   %rbp
Ltmp2:
    movq    %rsp, %rbp
Ltmp3:
    subq    $16, %rsp
Ltmp4:
    movl    %edi, -4(%rbp)
    movq    %rsi, -16(%rbp)
    movq    -16(%rbp), %rax
    movl    -4(%rbp), %ecx
    movl    %ecx, %edi
    callq   *%rax
    addq    $16, %rsp
    popq    %rbp
    ret
Leh_func_end2: 
```

**apply2**

```
__Z6apply2IiEvT_PFS0_S0_E:
Leh_func_begin3:
    pushq   %rbp
Ltmp5:
    movq    %rsp, %rbp
Ltmp6:
    subq    $16, %rsp
Ltmp7:
    movl    %edi, -4(%rbp)
    movq    %rsi, -16(%rbp)
    movq    -16(%rbp), %rax
    movl    -4(%rbp), %ecx
    movl    %ecx, %edi
    callq   *%rax
    addq    $16, %rsp
    popq    %rbp
    ret
Leh_func_end3: 
```

**apply3**

```
__Z6apply3IiEvT_RFS0_S0_E:
Leh_func_begin4:
    pushq   %rbp
Ltmp8:
    movq    %rsp, %rbp
Ltmp9:
    subq    $16, %rsp
Ltmp10:
    movl    %edi, -4(%rbp)
    movq    %rsi, -16(%rbp)
    movq    -16(%rbp), %rax
    movl    -4(%rbp), %ecx
    movl    %ecx, %edi
    callq   *%rax
    addq    $16, %rsp
    popq    %rbp
    ret
Leh_func_end4: 
```

They are **identical** (as I suspected they would be). There is no difference that I can see *whatsoever*.

Note: it is worth mentioning the way the compiler *saw* these declarations by name mangling examination:

```
apply1: __Z6apply1IiEvT_PFS0_S0_E
apply2: __Z6apply2IiEvT_PFS0_S0_E
apply3: __Z6apply3IiEvT_RFS0_S0_E 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T07:28:40.083

```
void apply1(double(f)(double));
void apply2(double(*f)(double)); 
```

这两个函数具有相同的签名，因此应该没有区别。它们都采用指向函数参数的指针。

ISO/IEC 14882:2011 8.3.5 [dcl.fct] / 5：

> 在确定每个参数的类型后，将“T的数组”或“返回T的函数”类型的任何参数分别调整为“指向T的指针”或“返回T的函数的指针”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:02:51.697

我会尽量让你更简单。假设有一个小程序：

```
#include <stdio.h>
void my_int_func(int x)
{
    printf( "%d\n", x );
}

int main()
{
    void (*foo)(int);
    // the ampersand is actually optional
    foo = &my_int_func;

    return 0;
} 
```

正如你在上面看到的，有一个函数接受一个整数并返回一个 void。在 main 内部，我正在使用 my_int_func 初始化函数指针 foo。请仔细查看注释“& 符号是可选的”。实际上它说明了一切。用 & 号初始化和没有 & 号初始化没有区别。

所以你的两个陈述没有区别。

# android - 当用户单击通知消息时，我想在主屏幕上打开一个弹出窗口

> ID：13226945
> 
> 赞同：2
> 
> 时间：2012-11-05T06:20:53.267
> 
> 标签：android, android-layout

我的应用程序正在发送通知。我想在用户检查通知并单击通知时实现我想在我的应用程序主屏幕上打开一个弹出窗口。这有点像我的主屏幕保持原样但弹出up会在它面前打开。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:16:50.233

你需要一个`Broadcast a intent`和一个`Intent Receiver`

下面是我的`create Notification`代码。当用户单击通知图标时，您将需要广播意图。

```
 // create NotificationManager..
    NotificationManager mNotificationManager = (NotificationManager) this
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Notification notification = new Notification(R.drawable.icon, null,
            System.currentTimeMillis());

    // create intent that will be broadcast.
    Intent i = new Intent();
    i.setClassName(this, BReceiver.class.getName());    
    i.setAction("Test");

    PendingIntent contentIntent = PendingIntent.getBroadcast(this, 0, 
            i, 0);
    notification.setLatestEventInfo(this, null, null, contentIntent);
    mNotificationManager.notify(0, notification); 
```

下面是我的`BroadCast Receiver`

```
public class BReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        Log.d("Test", "########## intent action "+ intent.getAction());
        Toast.makeText(context, "Hi", Toast.LENGTH_LONG).show();

    }

} 
```

当您单击通知图标时，将显示吐司。无论您在哪个屏幕上，只要用户单击通知图标，都会显示吐司。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:41:41.290

把这个

```
 android:theme="@android:style/Theme.Dialog" 
```

意味着你的目标活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:52:56.600

If you're basically asking about HOW to open the dialog (which I'm assuming you've created as an activity) upon clicking the notification, then check out the Notification docs regarding the [addAction](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html#addAction%28int,%20java.lang.CharSequence,%20android.app.PendingIntent%29) method in the Notification.Builder class. It allows you to launch any intent you specify upon clicking the notification.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T06:31:33.157

尝试使用 Alert Builder，这是一段代码片段，

```
new AlertDialog.Builder(this).
            setCancelable(false).
            setTitle("Title for popup").
            setMessage("Show Message here").
            setNeutralButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    System.exit(0);
                }
            }).create().show(); 
```

# java - struts2中如何在没有动作类的情况下从一个动作转发到另一个动作

> ID：13226949
> 
> 赞同：0
> 
> 时间：2012-11-05T06:21:20.013
> 
> 标签：java, struts2

我是 struts 2 的新手。我正在将我的 struts 1 代码移动到 struts 2。请参阅下面的操作。

```
<action name ="formName" path="/abc.xyz.action" scope="request" type="org.apache.struts.actions.ForwardAction" parameter="/pqr.rst.do">
</action> 
```

所以基本上 JSP 调用动作 abc.xyz.action.do 并且不去任何动作类（JAVA 类）它转发这个动作到 pqr.rst.do

如何在 struts 2 中迁移此操作映射。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T06:28:41.820

转发：

```
<action name="formName" >
    <result type="redirect">/pqr.rst.do</result>
</action> 
```

# html - 如何在新行中制作

> ID：13226953
> 
> 赞同：3
> 
> 时间：2012-11-05T06:22:12.190
> 
> 标签：html, html-table

我用一个`<tr>`和两个创建了动态表，`<td>`并希望将每个表保持`<td>`在新行中。

IE

```
<table>
    <tr>
      <td>Name:</td>
      <td>XYZ</td>
    </tr>
  </table> 
```

这将显示如下内容

1）名称： - 这应该在一行

2）XYZ - 这应该在新行

有可能吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:47:21.337

你不能通过使用来做到这一点`<td>`。A`<tr>`表示表行，在它关闭之前，您在其中定义的内容将出现在该行中。

所以，如果你需要一个新的线路，你应该使用一个新的`<tr>`

或明智地使用`<ul>`并`<li>`获得结果，而不是使用表格

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T06:24:14.477

添加一个 tr：

```
<table> 
<tr>
  <td>Name:</td>
</tr>
 <tr>
   <td>XYZ</td>
 </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T06:25:47.050

制作两个表格行 ( `<tr>`)...

```
<table>
    <tr>
        <td>a</td>
    </tr>
    <tr>
        <td>b</td>
    </tr>
</table> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T06:24:50.963

比使用 TR Not TD

```
<table>
    <tr>
      <td>Name:</td>
    </tr>
    <tr>
       <td>XYZ</td>
    </tr>
  </table> 
```

# jquery - jquery替换图像上的图像点击

> ID：13226955
> 
> 赞同：0
> 
> 时间：2012-11-05T06:22:17.027
> 
> 标签：jquery

我在一个 div 中有一个图像映射，我想在单击热点时替换另一个 div 中的图像。

这是地图...

```
<div id="vtright">
<img src="vt_map.jpg" usemap="#vtmap" border="0">
<map name="vtmap">
<area shape="circle" coords="313,105,15" href="map01.jpg">
<area shape="circle" coords="320,140,15" href="map02.jpg">
<area shape="circle" coords="265,308,15" href="map03.jpg">
<area shape="circle" coords="323,301,15" href="map04.jpg">
<area shape="circle" coords="250,377,15" href="map05.jpg">
<area shape="circle" coords="310,350,15" href="map06.jpg">
<area shape="circle" coords="284,451,15" href="map07.jpg">
<area shape="circle" coords="208,485,15" href="map08.jpg">
</map>
</div>
</div> 
```

...这是我要替换的图像...

```
<div id="vtleft">
<div id="vtimg">
<img id = "vtimage" src="map01.jpg" width="255" height="180" class="vtimage">
</div>
</div> 
```

如果图像交叉淡入淡出或者只是淡入/淡出，如果这不会延长友谊，那就太好了！

我已经尝试了一堆菜鸟级别的功能，我不会因为发布而让自己尴尬，可能只会让事情变得混乱。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:58:46.653

试试这个 ：

```
var rePlace;
$(document).ready(function(){
  $('map[name="vtmap"] area').each(function() {
    $(this).on("click", function(e) {
      e.preventDefault();
      rePlace = '<img id="vtimage" src="' + this.href + '" width="255" height="180" class="vtimage" />';
      $("#vtimg").html(rePlace).hide().fadeIn();
    }); // on
  }); // each​
}); // ready 
```

**注意**为了使用`.on()`jQuery v1.7+ 是必需的

# plugins - id3demux 支持 mp4 和 id3demux 的其他用例

> ID：13226958
> 
> 赞同：1
> 
> 时间：2012-11-05T06:22:43.807
> 
> 标签：plugins, gstreamer

我想将 id3demux 插件集成到我们的堆栈中。但我对此有一些疑问。

1.  id3demux 也可以支持 mp4 文件吗？我知道它可以支持mp3。
2.  除了阅读 TAG 信息，id3demux 还有其他用例吗？
3.  可以从任何其他解复用器（如 qtdemux 或 mpeg2/ts 解复用器）完成对 TAG 的解析。id3demux 是强制性的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:20:03.673

1.  没有。id3tags 与 mp3 文件相关联。mp3 文件可能在 mp4 中。因此，如果您从 mp4 内部对 mp3 进行 demux 并将其提供给 id3demux，是的，它可以使用它。
2.  不是我能想到的。
3.  不。这就像说 mpeg2 解码器可以解码 mpeg4 视频。不。

# java - Scala/Jerkson：如何反序列化为泛型类型

> ID：13226963
> 
> 赞同：2
> 
> 时间：2012-11-05T06:23:12.323
> 
> 标签：java, json, scala, jackson

我正在尝试用 Jerkson 做这样的事情：

```
parse[Collection[OrderResource]](orderCollectionJson) 
```

它一直告诉我 java.lang.ClassNotFoundException: A，所以我猜这是从集合中删除我的“OrderResource”的类型擦除。

如果我子类化为类似的东西

```
case class OrderCollection(...) extends Collection[OrderResource] 
```

我可以：

```
parse[OrderCollection](orderCollectionJson) 
```

但这很糟糕，因为我必须为每种类型的集合创建一个新的子类型。另一方面，做

```
parse[List[Foo]](aListOfFooAsJson) 
```

似乎工作。那么为什么 Jerkson 可以反序列化成泛型 List，却不能反序列化成我自己的泛型类型呢？

我可以使用任何隐式/显式魔法来反序列化我的通用集合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T03:20:22.103

看起来像 jerkson[特殊情况](https://github.com/codahale/jerkson/blob/master/src/main/scala/com/codahale/jerkson/deser/SeqDeserializer.scala)序列。

# javascript - 在 jquery 或 javascript 问题中验证家庭地址

> ID：13226964
> 
> 赞同：0
> 
> 时间：2012-11-05T06:23:12.657
> 
> 标签：javascript, jquery, regex

我正在尝试验证家庭住址是街道地址。但它每次都返回false。这是我的代码

```
validateAddress: function (val) {
            console.log('val: ' + val);
            var streetregex = /^[a-zA-Z0-9-\/] ?([a-zA-Z0-9-\/]|[a-zA-Z0-9-\/] )*[a-zA-Z0-9-\/]$/;
            if ( streetregex.test(val) ) {
                console.log('true');
            } else {
                console.log('false');
            }

        } 
```

val 有这种格式的街道地址`street name streetnumber, city`。

我该如何解决它才能正确验证我的地址？

**更新**

这是我的[DEMO](http://jsfiddle.net/cEnS2/)

如果你给这样的地址`Street name 18, Helsinki`。它返回 false 而我希望它为这些地址返回 true。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T06:33:01.523

这个正则表达式可以满足您的要求，但我怀疑它对任何实际应用程序都有用：

```
var regexp = /^[\w\s.-]+\d+,\s*[\w\s.-]+$/;
console.log(regexp.test('Main St. 123, New York'));
console.log(regexp.test('123 Wall St., New York')); 
```

​ 小提琴[http://jsfiddle.net/dandv/fxxTK/5/](http://jsfiddle.net/dandv/fxxTK/5/)

它的工作方式是：

```
match a sequence of alphanumeric characters, spaces, period or dash, e.g. "Abel-Johnson St."
followed by a number
followed by a comma
followed by another sequence of alphanumeric characters, spaces, period or dash (e.g. "St. Mary-Helen") 
```

但是，这非常脆弱，您可能根本不应该尝试验证街道地址。

# windows - 在应用程序 xap 包中找不到文件“TracingConfig.xml”| WP7

> ID：13226969
> 
> 赞同：0
> 
> 时间：2012-11-05T06:24:03.773
> 
> 标签：windows, windows-phone-7, exception

我正在开发一个流媒体应用程序，它从服务器流式传输视频。我使用 SMF 播放器流式传输视频。流从 IIS 服务器中的 SMIL 文件发生。

播放视频时出现异常“在应用程序 xap 包中找不到文件 'TracingConfig.xml'”。

请帮助我摆脱这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T00:06:47.987

如果您正在从 IsolatedStorage 区域读取 xml，请确保使用 IsolatedStorageFileStream 而不是一般的 IOStream 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T00:01:02.443

[在https://social.msdn.microsoft.com/Forums/windowsapps/en-US/7e1fa914-c062-41de-8712-b50eca31b2d9/cannot-find-file-tracingconfigxml-in-the-application-xap-](https://social.msdn.microsoft.com/Forums/windowsapps/en-US/7e1fa914-c062-41de-8712-b50eca31b2d9/cannot-find-file-tracingconfigxml-in-the-application-xap-package?forum=wpdevelop)查看解决方法[package?forum=wpdevelop](https://social.msdn.microsoft.com/Forums/windowsapps/en-US/7e1fa914-c062-41de-8712-b50eca31b2d9/cannot-find-file-tracingconfigxml-in-the-application-xap-package?forum=wpdevelop)在 TracingConfig.xml 上，您可以添加到应用程序 XAP 的根目录（通过为该文件设置 Build Action=Content 并将其放在应用程序项目的根目录中）

# ida - 在 IDA 中自动将未探索区域标记为代码

> ID：13226970
> 
> 赞同：0
> 
> 时间：2012-11-05T06:24:04.327
> 
> 标签：ida

我有一个要在 IDA 中反汇编的二进制文件。因为 IDA 无法找到每一个单独的代码路径，所以我需要手动遍历并找到二进制文件中未探索的区域，然后通过基本重复 Ctrl+U 和 C 将它们转换为代码。这显然非常耗时。

有没有办法自动找到未探索的区域并尝试将它们转换为代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T09:23:02.883

最后，我选择将二进制映像转换为 ELF 文件，并将二进制代码标记为可执行。

当我将这个 ELF 文件加载到 IDA 中时，ELF 文件头告诉 IDA 这是一个代码段，IDA 开始使用自己的启发式方法尽可能多地自动反汇编代码。

这是我用来实现这一目标[的简短脚本。](https://gist.github.com/4030336)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:33:26.317

您可以自动找到未开发的区域并将它们转换为代码，但这样做时您应该小心，因为我相信您知道，许多未开发的区域将不是有效的代码。

根据二进制文件，首先打印 .text 部分中所有未探索区域的列表可能很有用。IDAPython 可以做到这一点，例如：

```
addr = SegByName(".text")
end = SegEnd(addr)
while addr < end and addr != BADADDR:
    if isUnknown(GetFlags(addr)):
        print "0x%08x" % addr
        addr = NextHead(addr, BADADDR)
    else:
        addr = NextAddr(addr)
print "Done." 
```

如果你安装了 IDAPython，你可以通过选择 File > Python command... 并粘贴上面的代码来运行它。它将结果打印到输出窗口，您可以单击任何打印的地址跳转到反汇编中的相应区域。

如果您发现应该定义为代码的类似未探索地址的大量重复部分，您可以修改上述脚本以将这些地址转换为代码。将地址定义为代码的函数是 MakeCode()。

有关上述所有功能的粗略参考，您可以查看[此处](http://www.hex-rays.com/products/ida/support/idapython_docs/)。帮助索引有时也很有用。它的参考适用于 IDA 的原始内置脚本语言 IDC，但所有 IDC 函数的 IDAPython 等效项实际上应该是相同的。

# iphone - 运行项目时弹出警告，无法在选定的目标 xcode 4.5.1 上运行

> ID：13226974
> 
> 赞同：-3
> 
> 时间：2012-11-05T06:24:28.710
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [xCode 无法在选定目标上运行](https://stackoverflow.com/questions/11767945/xcode-cannot-run-on-the-selected-destination)

我遇到了一个奇怪的问题，当我运行我的项目时，我收到了一个弹出警告**无法在选定的目标上运行，**如下图所示：

![在此处输入图像描述](../Images/665def681192501d9399feaa398ccee2.png)

我正在尝试`Architectures`从构建设置中设置我的，例如：

![在此处输入图像描述](../Images/a1fe13134d028a91422117ffa1fdf7d0.png)

但我无法修复它。

请指导我如何解决这个奇怪的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:53:13.677

Xcode 4.5 放弃了对 armv6 二进制文件的支持，它只能生成 armv7 和 armv7s 二进制文件，因此请确保您尝试在 armv7 设备上运行您的应用程序（即一切 >= iPhone 3GS）

# jsf-2 - 在 Tomcat 中找不到 javax.el.CompositeELResolver 类

> ID：13226978
> 
> 赞同：0
> 
> 时间：2012-11-05T06:24:50.380
> 
> 标签：jsf-2, tomcat7

当我在 Tomcat 7 中开发 JSF 项目时，服务器一直在争论找不到此类。我可以知道我错过了哪个罐子吗？

```
Caused by: java.lang.ClassNotFoundException: javax.el.CompositeELResolver 
```

我已经把这个 jar 放在了 Tomcat lib 文件夹中：

1.  jsf-api-2.0.1.jar
2.  jsf-impl-2.0.1.jar
3.  javax.servlet-api-3.0.1.jar

除此之外，我还有`servlet-api-2.5.jar`和`servlet-api.jar`，不确定Tomcat 7当前正在使用哪个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:15:37.747

Tomcat 7 是一个 Servlet 3.0 容器。它本身**已经**与 JSP/Servlet/EL 库一起提供。`/lib`您可以在默认（且未更改）Tomcat 安装的文件夹中找到它们。

您不应该**在**其中添加不同 servletcontainer make/version 的库。您应该只添加 Tomcat 本身尚未提供的库。所以下面的语句

> *   javax.servlet-api-3.0.1.jar
> 
> 除此之外，我还有`servlet-api-2.5.jar`and `servlet-api.jar`,

并不是你理解它的好迹象。您应该删除您自己显式添加的所有 Servlet API 库。这只会与Tomcat自己的冲突并导致这种类路径问题。

### 也可以看看

*   [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project)

# wpf - 如何访问 DataGridTemplateColumn 中的控件以获取值？

> ID：13226985
> 
> 赞同：5
> 
> 时间：2012-11-05T06:25:17.697
> 
> 标签：wpf, c#-4.0

如何访问 DataGridTemplateColumn 中的控件以获取值？

我正在使用这段代码：

```
 <DataGrid HeadersVisibility="None"  Name="dgUser" Grid.Row="0" Grid.Column="0" AutoGenerateColumns="False" ItemsSource="{Binding}"
 CanUserAddRows="False" CanUserDeleteRows="False" CanUserSortColumns="False">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="*" Header="" IsReadOnly="True">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal"  Margin="10,0,0,0" Grid.Column="0"  Name="partcount">
                                                    <TextBlock Margin="0,0,5,0" Text="Count"/>
                                                    <TextBox Margin="0,0,5,0" MinWidth="50" Width="Auto" Name="txtcount" Text="{Binding Count}"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
       </DataGrid.Columns>
                            </DataGrid> 
```

如何访问 txtcount ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:33:21.607

您必须导航可视化树才能找到此元素。不久前我写了一个实用程序类，使这更容易一些，使用[Linq-to-VisualTree](http://blog.scottlogic.com/2010/03/04/linq-to-visual-tree.html)你可以找到它，如下所示：

```
TextBox tb = dgUser.Descendants<TextBox>()
                   .OfType<TextBox>()
                   .Where(t => t.Name == "txtcount")
                   .Single(); 
```

# webdriver - 如何通过 WebDriver 验证加载页面中存在的文本

> ID：13226986
> 
> 赞同：12
> 
> 时间：2012-11-05T06:25:29.897
> 
> 标签：webdriver, selenium-webdriver, assertion

我需要通过 WebDriver 验证页面中存在的文本。我喜欢将结果视为布尔值（真或假）。任何人都可以通过提供 WebDriver 代码来帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-18T14:53:54.433

由于 zmorris 点`driver.getPageSource().contains("input");`不是正确的解决方案，因为它搜索所有 html，而不仅仅是它上面的文本。我建议检查这个问题：[如何检查页面中是否存在某些文本？](https://stackoverflow.com/questions/11454798/how-can-i-check-if-some-text-exist-or-not-in-the-page) 以及 Slanec 解释的推荐方式：

```
String bodyText = driver.findElement(By.tagName("body")).getText();
Assert.assertTrue("Text not found!", bodyText.contains(text)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T07:32:44.810

是的，您可以执行返回布尔值的操作。带有 TestNG 或 JUnit 的 WebDriver 中的以下 java 代码可以执行以下操作：

```
protected boolean isTextPresent(String text){
    try{
        boolean b = driver.getPageSource().contains(text);
        return b;
    }
    catch(Exception e){
        return false;
    }
  } 
```

现在调用上述方法如下：

```
assertTrue(isTextPresent("Your text")); 
```

或者，还有另一种方式。我认为，这是更好的方法：

```
private StringBuffer verificationErrors = new StringBuffer();
try {
                  assertTrue(driver.findElement(By.cssSelector("BODY")).getText().matches("^[\\s\\S]*    Your text here\r\n\r\n[\\s\\S]*$"));
  } catch (Error e) {
     verificationErrors.append(e.toString());
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T07:13:25.427

如果您不关心文本的位置，那么您可以使用 Driver.PageSource 属性，如下所示：

Driver.PageSource.Contains("预期消息");

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-13T18:59:28.017

Driver.getPageSource() 是验证文本存在的不好方法。假设您说，`driver.getPageSource().contains("input");`这并不能验证屏幕上是否存在“输入”，只有“输入”存在于 html 中，就像输入标签一样。

我通常使用 xpath 验证元素上的文本：

```
boolean textFound = false;  
try {
    driver.findElement(By.xpath("//*[contains(text(),'someText')]"));
    textFound = true;
} catch (Exception e) {
    textFound = false;
} 
```

如果您想要精确的文本匹配，只需删除 contains 函数：

```
driver.findElement(By.xpath("//*[text()='someText'])); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T18:11:03.317

注意：不是布尔值

```
WebDriver driver=new FirefoxDriver();
driver.get("http://www.gmail.com");

if(driver.getPageSource().contains("Ur message"))
  {
    System.out.println("Pass");
  }
else
  {
    System.out.println("Fail");
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-13T20:54:57.297

**对于 Ruby 程序员，这里是您可以断言的方法。** **必须包含 Minitest 才能获得断言**

```
 assert(@driver.find_element(:tag_name => "body").text.include?("Name")) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-20T01:37:35.733

如果您只想检查显示的对象（**C#**）：

```
 public bool TextPresent(string text, int expectedNumberOfOccurrences)
    {
        var elements = Driver.FindElements(By.XPath(".//*[text()[contains(.,'" + text + "')]]"));
        var dispayedElements = 0;
        foreach (var webElement in elements)
        {
            if (webElement.Displayed)
            {
                dispayedElements++;
            }
        }
        var allExpectedElementsDisplayed = dispayedElements == expectedNumberOfOccurrences;
        return allExpectedElementsDisplayed;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-19T13:33:23.483

下面的代码是验证页面文本的最合适方法。您可以根据自己的方便使用 8 个定位器中的任何一个。

String Verifytext= driver.findElement(By.tagName("body")).getText().trim(); Assert.assertEquals(Verifytext, "在此处粘贴需要验证的文本");

# xcode - 如何在 Xcode 中使用 LLDB 打印时间戳？

> ID：13226988
> 
> 赞同：4
> 
> 时间：2012-11-05T06:25:41.457
> 
> 标签：xcode, profiling, timestamp, lldb

我正在尝试分析一些代码，并且我需要查看运行某些命令的时间戳。我可以通过在我的代码中插入`NSLog()`语句来做到这一点，但出于多种原因，我更喜欢使用调试器。

我已经在每个重要事件上设置了一个断点，我可以在断点上使用“日志消息”操作打印出一条消息，但我希望它打印出一个`NSLog()`样式时间戳（以毫秒为精度）。

是否有 LLDB 命令来执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T06:32:48.660

这种技术有效，但似乎有点老套（肯定有更好的方法吗？）：

`NSLog()`从调试器命令调用：

```
call (void) NSLog(@"An Important Event Occurred") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-19T10:33:30.000

在消息行中写入： [YOUR MESSAGE] @Date().timeIntervalSince1970 * 1000@ 这将为您提供以毫秒为单位的时间戳打印

# iphone - Cocos2d 按钮被点击后，定时器增加 3 秒

> ID：13226991
> 
> 赞同：1
> 
> 时间：2012-11-05T06:26:03.757
> 
> 标签：iphone, ios, objective-c, timer, cocos2d-iphone

抱歉，这可能是一个愚蠢的问题，但我已经为此苦苦挣扎了一段时间。我是 Cocos2d 的新手，但我有一个时间表计时器设置为 3 秒以使精灵消失，每次他们单击按钮时，它都会为计时器增加 3 秒，我遇到的问题是当他们单击按钮它不会给计时器增加 3 秒，计时器刚刚结束，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:31:37.733

在 cocos2d 中，最好使用调度程序而不是 NSTimer，您可以使用以下 api 更改触发间隔时间。

```
[self schedule: @selector(tick:) interval:0.03f];

[self unschedule:@selector(tick:)];

[self schedule: @selector(tick:) interval:0.05f]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:30:17.977

```
[_timer setFireDate:[[_timer fireDate] dateByAddingTimeInterval:600]]; 
```

这会给我的 _timer 增加 10 分钟（600 秒）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:40:49.437

你也可以使用

```
[self performSelector:@selector(tick:)withObject:nil afterDelay:3.0]; 
```

# javascript - Facebook 按钮未显示在 GWT Element.setInnerHTML() 中。未显示样式的推文按钮

> ID：13226992
> 
> 赞同：1
> 
> 时间：2012-11-05T06:26:28.493
> 
> 标签：javascript, html, gwt, twitter

我在 GWT 上使用此元素成功地在我的 Web 应用程序上添加和显示 HTML 代码。

但是，当我尝试添加“Facebook like button”代码时，它根本不显示：

```
Element adContainerDiv = getView().getFooter().getElement(); 
adContainerDiv.setInnerHTML("<div class='fb-like' data-href='http://www.example.com' data-send='false' data-layout='button_count' data-width='100' data-show-faces='false' data-action='recommend' data-font='arial'></div>"); 
```

此代码位于以下代码的开头`<body>`：

```
 <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=1265448483273";
      fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
    <!-- END Facebook button function --> 
```

“Tweet button”代码也会发生类似的情况，其中显示的是纯文本链接，没有任何样式：

```
Element adContainerDiv = getView().getFooter().getElement();
adContainerDiv.setInnerHTML("<a href=\"https://twitter.com/share\" class=\"twitter-share-button\">Tweet</a>"); 
```

在`<body>`我有了这段代码之后（我也在 setInnerHTML 上尝试过，但仍然无法正常工作：

```
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

这是它在**DOM**中查找 Tweet 按钮的方式`<body></body>`：

```
<script>(function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) return;
          js = d.createElement(s); js.id = id;
          js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=13592647473";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>

<div style="top:0PX;height:60PX;width:1000PX;position: relative;" id="ur39jgf03kd">
<a href="https://twitter.com/share" class="twitter-share-button" 
data-via="example_com">Tweet</a></div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T00:53:46.267

我不工作的原因很明显 - 默认情况下，facebook/twitter 按钮期望所有按钮都是在加载 facebook/twitter 脚本之前创建的。因此，您应该在**创建新按钮并将它们附加到 dom**后通知这些外部库。

快速搜索[“使用 javascript 动态添加 twitter 按钮”](https://www.google.com/search?q=Dynamically%20add%20twitter%20button%20using%20javascript)为我们提供了如何为 twitter 执行此操作的[方法：](https://stackoverflow.com/questions/6981905/how-can-i-dynamically-create-a-tweet-button)

```
twttr.widgets.load(); 
```

因此，我们需要将其包装到本地方法中并放入您的一些 GWT 类中（这称为[JSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)）：

```
 public static native void refreshTwitterButtons()/*-{
     $wnd.twttr.widgets.load();
  }-*/; 
```

剩下的就是在您创建并附加到 DOM twitter 按钮 html 代码之后调用此函数。对于 facebook at 基本上是相同的工作流程，你[谷歌“使用 javascript 动态添加 facebook 按钮”](https://www.google.com/search?q=Dynamically%20add%20facebook%20button%20using%20javascript)，你找出你必须调用的[API](https://stackoverflow.com/questions/4219729/how-to-add-a-facebook-like-button-to-an-ajax-driven-page)，你为它创建适当的本地方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T22:06:29.477

这是解决您问题的简单方法：

*   在您的 HTML 中，包含以下内容

```
 <script>
        window.fbAsyncInit = function() {
            FB.init({
                appId      : 'YOUR_APP_ID', // App ID
                status     : true, // check login status
                cookie     : true, // enable cookies to allow the server to access the session
                xfbml      : true  // parse XFBML
    });

  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

*   创建可以扩展的 FBWidget 类，如下所示：

    公共类 FBWidget 扩展 HTML{

    ```
    protected String id;

    public FBWidget(String string)
    {
        super(string);
        id=null;
    }

    @Override
    protected void onLoad() {
        try {
            if(id==null)
            {
                parseFBXML();
            }
            else
            {
                parseFBXML(id);
            }
        } catch (JavaScriptException e) {
            System.err.println(e);
        }
    }

    protected native void parseFBXML()
    /*-{
        $wnd.FB.XFBML.parse();
    }-*/;

    protected native void parseFBXML(String id)
    /*-{
        $wnd.FB.XFBML.parse(document.getElementById(id));
    }-*/; 
    ```

    }

*   现在，例如，如果您想添加一个 FBLike 小部件，只需像这样扩展类：

公共类 FBlike 扩展 FBWidget {

```
public FBLike(String url) {
    super(getCode(url));
}

private static String getCode(String url) {
    return "<fb:like id=\""+"PUT_AN_ID_HERE"+"\" href=\""+url+"\" send=\"true\" width=\"500\" show_faces=\"false\" ></fb:like> ";
} 
```

}

*   为了提高 fb.parse 的速度，您可以为 FBLike 方法包含一个 id，这不会解析整个页面，只解析具有指定 id 的元素；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:22:21.357

抱歉，如果这太明显了，但是您在哪里定义了 CSS 类“fb-like”？

顺便说一句，有很多 JS/JQuery 库可以添加这样的按钮。使用 JSNI 进行 GWT/JS 集成相当容易。它也可以通过使用 CSS 类名从 GWT 触发。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-16T15:45:50.423

你可以试试这个：

```
HTML fbLikeButton = new HTML("<div class='fb-like' data-href='http://www.example.com' data-send='false' data-layout='button_count' data-width='100' data-show-faces='false' data-action='recommend' data-font='arial'></div>");
containerForSocialMediaButtons.add(fbLikeButton); 
```

其中 containerForSocialMediaButtons 是您在适当位置添加的 GWT 面板。尝试将原始 HTML 添加到您的页面时，请始终使用 HTML 类。但请注意，如果您放入 HTML 中的字符串是不安全的，您可能会遇到安全问题。

# java - java tomcat6 - 添加数据时如何自动刷新页面？

> ID：13226994
> 
> 赞同：0
> 
> 时间：2012-11-05T06:26:51.067
> 
> 标签：java, spring, hibernate, tomcat6

首先让我解释一下我想做什么。我试图创建一个非常简单的基于网络的聊天程序。在我的开发中，我有 2 台电脑只使用 1 个 IP 地址。正在使用的 ip 地址是运行 tomcat6 服务器的 ip 地址。简单的聊天连接到数据库。当其他电脑在数据库中输入数据（消息）而不重新加载页面时，如何使网页自动更新。

如果我的问题听起来很愚蠢，请原谅我。我没有聊天程序的经验。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:42:18.233

那里使用的网络技术是什么。如果您使用的是 JSF，您可以使用 icefaces 的 AJAX 推送功能。您可以从此链接阅读更多内容。[http://www.icesoft.org/java/projects/ICEfaces/ajax-push.jsf](http://www.icesoft.org/java/projects/ICEfaces/ajax-push.jsf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:42:49.200

您可能想要查看的技术：

*   阿贾克斯
*   [网络套接字](http://en.wikipedia.org/wiki/WebSocket)
*   [彗星](http://wiki.apache.org/tomcat/WhatIsComet)
*   [DWR](http://directwebremoting.org/dwr/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T06:48:08.870

你可以试试 webSockets。它是 html5 中的一个新功能。它允许您进行全双工通信。它非常简单。你将不得不做客户端和服务器端。对于服务器端，您将需要 tomcat 7.0.32。它包含一个新的 WebSocketServlet。这些链接可以帮助你..

[http://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html)

[http://svn.apache.org/viewvc/tomcat/trunk/webapps/examples/websocket/](http://svn.apache.org/viewvc/tomcat/trunk/webapps/examples/websocket/)

[http://svn.apache.org/viewvc/tomcat/trunk/webapps/examples/WEB-INF/classes/websocket/](http://svn.apache.org/viewvc/tomcat/trunk/webapps/examples/WEB-INF/classes/websocket/)

# c# - Linq to Sql 内连接

> ID：13226996
> 
> 赞同：1
> 
> 时间：2012-11-05T06:26:54.903
> 
> 标签：c#, .net, linq, linq-to-sql, inner-join

我正在使用连接编写 linq to sql 语句。通过搜索，我找到了以下链接： [LINQ to SQL 中的内部联接的语法是什么？](https://stackoverflow.com/questions/37324/what-is-the-syntax-for-an-inner-join-in-linq-to-sql) 在这个问题中，答案是这样的：

```
var dealercontacts = from contact in DealerContact
                     join dealer in Dealer on contact.DealerId equals dealer.ID
                     select contact; 
```

在这个语句中，inner join 用于单个比较语句 ie`on contact.DealerId equals dealer.ID`但是当我尝试做时`on contact.DealerId equals dealer.ID && contact.Branch equals dealer.Branch`，它不接受第二个比较语句。请指导我如何才能拥有这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:41:44.413

您的模型在实体级别没有真正的关联吗？

意思是，`DealerContact`有一个属性来表示关联`Dealer`而不是只处理 id。

您甚至可能不需要手动指定该连接。怎么样：

```
var dealercontacts = from contact in DealerContact
                     where contact.Branch equals contact.Dealer.Branch
                     select contact; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T06:34:57.037

在 Linq to SQL 中加入多个列有点不同。

```
var query =
    from t1 in myTABLE1List // List<TABLE_1>
    join t2 in myTABLE1List
      on new { t1.ColumnA, t1.ColumnB } equals new { t2.ColumnA, t2.ColumnB } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T14:49:11.997

Linq to Sql Joins 可以通过以下代码在多个条件下实现：

```
var q = (from l1 in lst
         join l2 in lst1 on new { prop1 = l1.Property1, prop2 = l1.Property2 } 
          equals new { prop1 = l2.Property1, prop2 = l2.Property2 }
                     select l1); 
```

为属性提供别名是一种很好的做法（如 prop1 = l1.Property1,"prop1" 是 Property1 的别名），因为有时我们会加入具有不同属性名称的属性，因此它会产生编译时错误。

另外请确保加入属性应该是相同的类型，如 int 和 int？不一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T06:35:30.237

我想你可以从 [这里得到答案](http://www.deepakkapoor.net/linq-to-sql-join-on-multiple-conditions/)

从链接复制和粘贴

```
var query = from s in context.ShoppingMalls
        join h in context.Houses
        on
        new { s.CouncilCode, s.PostCode }
        equals
         new { h.CouncilCode, h.PostCode }
        select s; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T06:41:30.480

您需要在两个键之间为`Id`和`Branch`为创建匿名对象：`EqualityComparer`

linq 语法方法：

```
 var dealercontacts = from contact in contacts
                             join dealer in dealers 
                             on new { Id = contact.DealerId, contact.Branch }
                             equals new { Id = dealer.ID, dealer.Branch }
                             select contact; 
```

拉姆达方法：

```
 var dealercontacts = contacts.Join(dealers, 
                      contact => new { Id = contact.DealerId, contact.Branch },
                      dealer => new { Id = dealer.ID, dealer.Branch },
                      (contact, dealer) => contact); 
```

# drupal-7 - Drupal 匿名帖子链接到用户

> ID：13226997
> 
> 赞同：1
> 
> 时间：2012-11-05T06:26:57.543
> 
> 标签：drupal-7, drupal-views, relation

我有一种情况，匿名用户可以使用实体表单填写应用程序并发送而无需在网站上注册。稍后匿名用户将注册一个帐户。现在匿名用户将在实体表单中提交一个名为电子邮件地址的字段。

现在我想使用该字段与当前用户的电子邮件地址进行比较，如果找到匹配项，则在以前的提交和用户之间创建一个链接。

我尝试过的两个选项是视图，通过电子邮件字段在用户和实体表单之间创建关系，但这不起作用

还尝试了在实体表单电子邮件字段和当前用户电子邮件字段之间进行数据比较的规则，我知道商务人员在他们的商务模块上做了同样的事情，以允许匿名购物者提交购物车。

另一种解决方案可能是使用 cookie 数据填充隐藏字段，然后在帖子上的会话 ID 和用户会话 ID 之间创建关系。

有人可以阐明最好的方法，如果可能的话，一些示例解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:38:39.937

我会通过规则来做

1.  将电子邮件添加到实体表单类型
2.  创建一个查找实体表单提交的 VBO 视图。它应该具有电子邮件字段的上下文过滤器
3.  为正在创建的用户添加反应规则
4.  将操作添加到规则以使用用户电子邮件从 VBO 加载列表以发送视图
5.  遍历列表并将 Entityforms 的 uid 属性设置为 user->uid

顺便说一句 entityforms 是我的模块。感谢您使用它。

# c++ - c++中的浮点数到字符串的转换

> ID：13226998
> 
> 赞同：-5
> 
> 时间：2012-11-05T06:27:05.870
> 
> 标签：c++, microprocessors

我在 LPC 1769 微处理器上编程，但我无法弄清楚如何将浮点数转换为字符串，以便可以在我的 Display 上打印它。我正在使用该`sprintf`命令，但我的程序仍然显示内存错误。如何将a`float`转换为字符串？我需要在不使用标准库的情况下执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T06:51:43.293

In C++11 you can use [std::to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string) to convert a numerical value to an `std::string`, which you can turn into a C-style string with the `c_str()` method.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T06:49:33.383

这也将起作用：

```
#include <stdio.h>
#define MAXIMUM_TEXT_SIZE 64U
float value = 3.14159f;
char text_array[MAXIMUM_TEXT_SIZE];
snprintf(text_array, MAXIMUM_TEXT_SIZE, "%4.2f", value); 
```

浮点值的字符串形式为`text_array`.

在`std::string`内存受限的嵌入式系统上使用之前，请验证您是否设置了合适的内存分配和垃圾回收。如果没有，请使用*分配器*从固定大小的内存池中分配字符串。搜索“碎片”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T06:45:17.623

此代码将为您执行此操作：

```
#include <iostream>
#include <sstream>
#include <string>

int main()
{
    float val =3.456;
    std::stringstream stream;
    stream << val;
    std::string test = stream.str();
    std::cout << test << std::endl;
} 
```

test 将包含`val`3.456 中的浮点数。

看起来你正在尝试做的是 use `sprintf`，在这种情况下你可以这样做：

```
char buffer[40]
float val =3.456;

sprintf(buffer, "%f", val);
std::string out(buffer);
std::cout << out << std::endl; 
```

希望有帮助。