# StackOverflow 问答 15080000-15080999

# codeigniter - 如何使用 boostrap 和 codeigniter 使页眉和页脚静态并移动内容？

> ID：15080003
> 
> 赞同：-2
> 
> 时间：2013-02-26T01:51:20.753
> 
> 标签：codeigniter, twitter-bootstrap

我正在使用 boostrap 和 codeigniter 以及...如何使页脚和页眉静态并且只更改内容？

```
HEADER

   <div id="content">

   </div>

FOOTER 
```

这里 [是 http://i.imgur.com/bXs5IRQ.png](http://i.imgur.com/bXs5IRQ.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:14:34.090

创建`header.php`并放置在`/application/views`

```
<!DOCTYPE html>
<html lang="en">
    <head>
    ......
    do you header stuffs here 
```

创建`footer.php`并放置在`/application/views`

```
 <div class="footer">
        ....
        footer stuff here
        </div>
    </body>
<html> 
```

现在在您的每个视图文件中，您可以包含`header`和`footer`文件

```
<?php $this->load->view('header'); ?>

<div id="content">
    ... rest of the dynamic stuffs
</div>

<?php $this->load->view('footer'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:56:00.667

ci 有它自己的模板，您可以使用它或在基本控制器中编写自己的输出方法。我认为引导程序是一个 CSS 和 JS 库。所以如果你想使用风格，你可以包含引导程序，但如果你想格式化输出，你应该阅读 ci_user_guide。

# python - Python程序和画一个正方形

> ID：15080004
> 
> 赞同：0
> 
> 时间：2013-02-26T01:51:40.950
> 
> 标签：python, turtle-graphics, logo-lang

我的程序

```
import turtle
i = "input()"
while i == "input()":
    if i == "exit":
        input()
    if i == "fd":
        turtle.fd(1)
    if i == "bk": 
        turtle.bk(1)
    if i == "lt":
        turtle.lt(90)
    if i == "rt":
        turtle.rt(90)
    if i == "pu":
        turtle.pu()
    if i == "pd":
        turtle.pd() 
```

现在我输入的文件是 (fd,fd,fd,bk,bk,lt,rt 等) 它应该画一个正方形但没有显示我做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:04:10.317

该行`while i == input():`（即使在删除引号之后）没有为`i`. 它正在比较`input()`to的结果`i`，这可能不是您想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T01:55:54.893

在 Python 中有一个可以调用的函数，`input()`. 但你没有调用它。你在它周围加上引号，所以你只是引用一个包含字母'i'、'n'、'p'、'u'、't'、'('、')'的字符串。

删除引号，以便您实际调用该`input()`函数。

编辑：从您下面的评论看来，您使用的是 Python 2.x；所以你应该使用`raw_input()`. `raw_input()`只返回用户输入的任何字符串；`input()`试图将其评估为一个值。

```
x = input()  # if user types "2", x is set to the number 2
x = raw_input()  # if user types "2", x is set to the string "2" 
```

编辑：您需要确保笔向下，您可能希望乌龟在前进或后退时不仅仅是 1，并且您需要使屏幕出现。

我建议您阅读 Python 中海龟图形的基本介绍。

[http://www.blog.pythonlibrary.org/2012/08/06/python-using-turtles-for-drawing/](http://www.blog.pythonlibrary.org/2012/08/06/python-using-turtles-for-drawing/)

在 while 循环开始之前，试着把这个：

```
screen = turtle.getscreen() 
```

这应该足以使图形屏幕弹出。

祝好运并玩得开心点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:12:59.363

正如其他人所说，你想去掉函数周围的引号，而不是每一个引号：

```
import turtle
while True:
    i = input()
    if i == "exit":
        break # stops the loop
    if i == "fd":
        turtle.fd(1)
    if i == "bk": 
        turtle.bk(1)
    if i == "lt":
        turtle.lt(90)
    if i == "rt":
        turtle.rt(90)
    if i == "pu":
        turtle.pu()
    if i == "pd":
        turtle.pd() 
```

你得到了，`NameError`因为如果你把引号去掉`"fd"`，你有一个变量，，`fd`而不是一个字符串。但是，该变量`fd`尚未定义，因此您会收到错误消息。

但是，如果您使用的是 Python 2.x（不是 3.x），您应该使用`raw_input()`（这会返回一个字符串）：

```
import turtle
while True:
    i = raw_input()
    if i == "exit":
        break
    if i == "fd":
        turtle.fd(1)
    if i == "bk": 
        turtle.bk(1)
    if i == "lt":
        turtle.lt(90)
    if i == "rt":
        turtle.rt(90)
    if i == "pu":
        turtle.pu()
    if i == "pd":
        turtle.pd() 
```

# android - 在 Android 通用图像加载器中实现带有文本的 GridView

> ID：15080007
> 
> 赞同：2
> 
> 时间：2013-02-26T01:52:02.890
> 
> 标签：android, universal-image-loader

我已经使用 Android Universal Image Loader 实现了我的 gridview，但我需要在每张照片下方放置一个标签。这是我的 ac_image_grid.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gridview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:horizontalSpacing="4dip"
android:numColumns="3"
android:stretchMode="columnWidth"
android:verticalSpacing="4dip"
android:padding="4dip" /> 
```

这是我的 item_grid_image.xml ：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget44"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_x="201px"
android:layout_y="165px"
android:gravity="center_horizontal"
>
<ImageView 
android:id="@+id/image"
android:layout_width="fill_parent"
android:layout_height="120dip"
android:adjustViewBounds="true"
android:contentDescription="@string/descr_image"
android:scaleType="centerCrop" />
<TextView
android:id="@+id/icon_text"
android:typeface="serif"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:textStyle="bold"
android:lines="2">
</TextView>
</LinearLayout> 
```

我知道我必须在这个函数中实现它，但我不知道如何：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ImageView imageView;
        if (convertView == null) {
            imageView = (ImageView) getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
        } else {
            imageView = (ImageView) convertView;
        }

        imageLoader.displayImage(imageUrlsSmall.get(position), imageView, options);

        return imageView;
    } 
```

更新：最后我用这段代码做到了。

```
 public View getView(final int position, View convertView, ViewGroup parent) {
        View view = convertView;
        final ViewHolder holder;
        if (convertView == null) {
            view = getLayoutInflater().inflate(R.layout.item_grid_image, parent, false);
            holder = new ViewHolder();
            holder.text = (TextView) view.findViewById(R.id.icon_text);
            holder.image = (ImageView) view.findViewById(R.id.image);
            view.setTag(holder);
        } else {
            holder = (ViewHolder) view.getTag();
        }

        holder.text.setText(album[position].getName());

        imageLoader.displayImage(albumsPhoto[position], holder.image, options, animateFirstListener);

        return view;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:14:43.680

也许是这样的；

```
 private TextView mInfoView; 
```

`OnCreate()`：

```
 mInfoView = (TextView) findViewById(R.id.icon_text); 
```

`getView()`：

```
 // after imageLoader.displayImage
 mInfoView.setBackgroundColor(Color.TRANSPARENT);
 mInfoView.setText("Some description"); 
```

# haskell - 在 Haskell 中如何打印一个漂亮的递归深度？

> ID：15080008
> 
> 赞同：1
> 
> 时间：2013-02-26T01:52:03.900
> 
> 标签：haskell, pretty-print

假设我有一棵二叉树。

```
main = putStrLn $ printTree tree                                                                                                                                                                                

data Tree = Empty | Node Int (Tree) (Tree) deriving (Show)                                                                                                                                                      

tree = Node 4 (Node 3 Empty (Node 2 Empty Empty)) Empty                                                                                                                                                         

printTree :: Tree -> String                                                                                                                                                                                     
printTree x = case x of                                                                                                                                                                                         
  Node num treeA treeB -> show num ++ "\n" ++ printTree treeA ++ "\n" ++ printTree treeB                                                                                                                        
  Empty -> "Empty" 
```

输出

```
*Main> main                                                                                                                                                                                                     
4                                                                                                                                                                                                               
3                                                                                                                                                                                                               
Empty                                                                                                                                                                                                           
2                                                                                                                                                                                                               
Empty                                                                                                                                                                                                           
Empty                                                                                                                                                                                                           
Empty 
```

所需的输出（由制表符或双空格分隔即可）

```
*Main> main                                                                                                                                                                                                     
    4                                                                                                                                                                                                               
      3                                                                                                                                                                                                               
        Empty                                                                                                                                                                                                           
        2                                                                                                                                                                                                               
          Empty                                                                                                                                                                                                           
          Empty                                                                                                                                                                                                           
      Empty 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:05:25.933

您可以使用累加器（此处为`depth`）来跟踪您当前在树中的深度 - 然后创建与行所在深度相对应的多个空间：

```
main = putStrLn $ printTree tree
data Tree = Empty | Node Int (Tree) (Tree) deriving (Show)
tree = Node 4 (Node 3 Empty (Node 2 Empty Empty)) Empty

printTree :: Tree -> String
printTree x = printTree' x 0 
  where 
    printTree' x depth = case x of
      Node num treeA treeB -> (replicate (2 * depth) ' ') ++ show num ++ "\n" ++ (printTree' treeA (depth + 1)) ++ "\n" ++ (printTree' treeB (depth + 1))
      Empty -> (replicate (2 * depth) ' ') ++ "Empty" 
```

输出：

```
*Main> main
4
  3
    Empty
    2
      Empty
      Empty
  Empty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:42:45.667

这是在 GHC 中使用 -XImplicitParams 的解决方案

```
{-# LANGUAGE ImplicitParams #-}
module ImplicitTabs where

data Tree = Empty | Node Int (Tree) (Tree) deriving (Show)
tree = Node 4 (Node 3 Empty (Node 2 Empty Empty)) Empty                                         

tab :: (?tab_level :: Int) => String
tab = replicate (2 * ?tab_level) ' '

printTree :: (?tab_level :: Int) => Tree -> String
printTree x = let 
    ?tab_level = ?tab_level + 1
  in case x of
    Node num treeA treeB -> tab ++ show num ++ "\n" ++ tab ++ printTree treeA ++ "\n" ++ tab ++ printTree treeB
    Empty -> tab ++ "Empty" 

main = let ?tab_level = -1 in putStrLn $ printTree tree

> runhaskell implicit-tabulation.hs 
4
  3
      Empty
      2
          Empty
          Empty
  Empty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:28:54.647

如果您转换为 a [`Data.Tree`](http://hackage.haskell.org/packages/archive/containers/0.2.0.0/doc/html/Data-Tree.html)，那么您可以使用库函数`drawTree`，它几乎可以满足您的需求（它还使用 ASCII 艺术绘制分支）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:16:57.237

好的，我想我已经开始工作了。

```
printTree :: Tree -> String                                                                                                                                                                                     
printTree x = printT 0 x                                                                                                                                                                                                                   

space x = take x $ cycle " "                                                                                                                                                                                    

printT :: Int -> Tree -> String                                                                                                                                                                                 
printT num x =                                                                                                                                                                                                  
  case x of                                                                                                                                                                                                     
    (Node o treeA treeB) -> show o ++                                                                                                                                                                           
                          "\n" ++                                                                                                                                                                               
                          space num ++                                                                                                                                                                          
                          printT (num+1) treeA ++                                                                                                                                                               
                          "\n" ++                                                                                                                                                                               
                          space num ++                                                                                                                                                                          
                          printT (num+1) treeB                                                                                                                                                                  
    Empty -> "Empty" 
```

# silverlight - 在整个 MVVM Silverlight 应用程序中持久化 FormsAuthentication 用户

> ID：15080013
> 
> 赞同：0
> 
> 时间：2013-02-26T01:52:22.783
> 
> 标签：silverlight, authentication, cookies, mvvm, formsauthentication

我需要退后一步并重新开始...我想根据登录的用户通过我的 ViewModel 在组合框中加载值。我正在使用 FA 这是最好的方法吗？我可以直接从 ViewModel 访问 cookie 吗？

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
user,
DateTime.Now,
DateTime.Now.AddDays(30),
false,
"Role One",
FormsAuthentication.FormsCookiePath);
// Encrypt the ticket.
string encTicket = FormsAuthentication.Encrypt(ticket);

// Create the cookie.
Response.Cookies.Add(new HttpCookie(FormsAuthentication.FormsCookieName,
encTicket));
// Show the Silverlight control
Response.Redirect("Default.aspx"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:25:17.227

答案很简单。只需参考

```
string[] cookies = System.Windows.Browser.HtmlPage.Document.Cookies.Split(';'); 
```

# c++ - 带有指向数据成员的指针的 std::thread

> ID：15080015
> 
> 赞同：5
> 
> 时间：2013-02-26T01:52:45.373
> 
> 标签：c++, c++11, std

我正在阅读[cppreference 的 std::thread 文档](http://en.cppreference.com/w/cpp/thread/thread/thread)（我知道，并不总是 100% 准确），并注意到以下关于`std::thread`传递“指向数据成员的指针”（而不是“指向数据的指针”的行为的定义） member-function") 作为它的第一个参数 ( `f`) 和所需类的对象作为它的第二个参数（`t1`在复制到 thread-local-storage 之后）：

> 如果 N == 1 并且 f 是指向类的成员数据对象的指针，则访问它。对象的值被忽略。有效地执行以下代码： t1.*f 如果 t1 的类型是 T，则引用 T 或引用派生自 T. (*t1).*f 的类型，否则。

现在，我不打算`std::thread`以这种方式使用，但我对这个定义感到困惑。显然，唯一发生的事情是访问了数据成员并且忽略了该值，这似乎根本不会有任何可观察到的副作用，这意味着（据我所知）它也可能是一个无操作。（我可能遗漏了一些明显的东西......？）

起初，我认为这可能是印刷错误，意思是访问数据成员然后调用（因为它可能是可调用对象，即使它不是函数）但我在 GCC 中使用以下代码对其进行了测试-4.7 并且确实没有调用：

```
#include <iostream>
#include <thread>

struct S 
{
    void f() {
        std::cout << "Calling f()" << std::endl;
    }

    struct {
        void operator()() {
            std::cout << "Calling g()" << std::endl;
        }
    } g;
};

int main(int, char**)
{
    S s;
    s.f(); // prints "Calling f()"
    s.g(); // prints "Calling g()"

    std::cout << "----" << std::endl;

    auto x = &S::f; // ptr-to-mem-func
    auto y = &S::g; // ptr-to-data-mem

    (s.*x)(); // prints "Calling f()"
    (s.*y)(); // prints "Calling g()"

    std::cout << "----" << std::endl;

    std::thread t(x, &s);
    t.join();
    // "Calling f()" printed by now
    std::thread u(y, &s);
    u.join();
    // "Calling g()" not printed

    return 0;
} 
```

这个定义是否有任何目的似乎没有完成任何事情？为什么不让传递“指向数据成员可调用的指针”就像传递“指向成员函数的指针”一样，而让传递“指向数据成员不可调用的指针”成为错误？事实上，这似乎是实现它的最简单方法，因为调用“pointer-to-data-member-callable”与在其他上下文中调用“pointer-to-member-function”具有等效的语法（除非模板专业化和 SFINAE 规则的杂乱无章使得难以同等对待它们......？）

这不是我实际代码所需要的东西，但是这个定义存在的事实让我怀疑我错过了一些基本的东西，这让我很担心......有人能告诉我这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:37:06.007

这是因为 C++11 标准不仅定义了线程如何启动，还定义了如何启动`std::bind`和`std::function`工作的通用绑定工具。

事实上，C++11 标准的第 30.3.1.2/3 段规定了 class 的可变参数构造函数`std::thread`：

> `template <class F, class ...Args> explicit thread(F&& f, Args&&... args);`
> 
> *效果*：构造一个线程类型的对象。新的执行线程与在构造线程中被评估**`INVOKE (DECAY_- COPY ( std::forward<F>(f)), DECAY_COPY (std::forward<Args>(args))...)`**的调用一起 执行。`DECAY_COPY`此调用的任何返回值都将被忽略。[...]

忽略什么`DECAY_COPY`（与问题无关），这就是第 20.8.2 段定义`INVOKE`伪函数的方式：

> 定义**INVOKE (f, t1, t2, ..., tN)**如下：
> 
> — (t1.*f)(t2, ..., tN) 当 f 是指向类 T 的成员函数的指针且 t1 是类型 T 的对象或对类型 T 的对象的引用或对从 T 派生的类型的对象；
> 
> — ((*t1).*f)(t2, ..., tN) 当 f 是指向类 T 的成员函数的指针且 t1 不是上一项中描述的类型之一时；
> 
> — t1.*f 当 N == 1 且 f 是指向类 T 的成员数据的指针且 t1 是类型 T 的对象或对类型 T 的对象的引用或对派生于的类型的对象的引用T;
> 
> — **(*t1).*f 当 N == 1 且 f 是指向类 T 的成员数据且 t1 不是上一项中描述的类型之一时；**
> 
> — f(t1, t2, ..., tN) 在所有其他情况下。

现在问题变成了：

> 为什么 C++11 标准以`INVOKE`这种方式定义工具？

答案就**[在这里](https://stackoverflow.com/questions/12638393/why-does-invoke-facility-in-the-c11-standard-refer-to-data-members)**。

# javascript - PHP/Javascript 项目不断调用 your-meme-site.com

> ID：15080021
> 
> 赞同：1
> 
> 时间：2013-02-26T01:53:26.420
> 
> 标签：javascript, jquery

我正在开发一个 localhost 项目，该项目不断向 your-mime-site.com 发送请求。

我已经包含了这些 jquery 插件：

1.  jQuery
2.  jQuery.form
3.  jQuery.验证
4.  jQuery.ui

我自己编写的所有其他内容。

我尝试使用 NetBeans 在项目中搜索字符串“your-meme-site”，但它说有些行太长而无法搜索。

有人知道为什么或如何发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:53:09.850

我发现了我的问题。它是 Firefox 中的一个扩展。我在安全模式下启动了Firefox，问题就消失了。然后一次禁用插件和扩展，直到我发现它是我安装的下载 Flash 视频扩展。卸载扩展程序，它就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:40:59.207

我禁用了 Garmin Communicator Plugin、BitComet Video Player、Youtube Video Replay 和 Java Console，请求消失了。

我确实重新启用了 Avast 插件，它不是罪魁祸首，对于其他可能遇到这个问题的人来说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T02:02:51.023

尝试查看 Chrome 检查器的“网络”选项卡中的“启动器”列，找出触发它的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T01:57:09.437

我能想到的一件事是您的 PC / 网络已被病毒感染，该病毒会更改 DNS 条目，从而将对任意站点的请求重定向到 your-mime-site.com

在 Windows 上，DNS 主机文件存在于 C:\windows\system32\etc\hosts 上。在 UNIX 上，它位于 /etc/hosts 上。确保那里没有 your-mime-site.com 条目。

# javascript - jquery 移动 javascript 计算器

> ID：15080022
> 
> 赞同：0
> 
> 时间：2013-02-26T01:53:30.497
> 
> 标签：javascript, jquery, jquery-mobile

我对 javascript 很陌生，我正在尝试使用 Jquery Mobile 构建一个移动应用程序。我希望用户在每个页面上输入一个值，然后在最后一页上，他们将单击提交，它将在最后一页上显示该值。我已经为此工作了 4 个小时，我可以让计算在与提交按钮相同的页面上工作，但不能在下一页上工作。

```
 <script>

        function sum()
{

    var item1num = document.getElementById('item1num').value;
    var item2num = document.getElementById('item2num').value;

        {result = parseInt(item1num)*parseInt(item2num);

        document.getElementById("showResult").innerHTML = (result);}}

    </script>

</head>
<body>
    <!-- Home -->
    <div data-role="page" id="page1">
        <div data-role="content">
            <div data-role="fieldcontain" id="item1">
                <fieldset data-role="controlgroup">
                    <label for="item1">
                        item1
                    </label>
                    <input name="item1num" id="item1num" placeholder="" value="" type="number" />
                </fieldset>
            </div>
            <a data-role="button" data-transition="slidefade" href="#page2" data-theme="b">
                Next
            </a>
        </div>
    </div>
    <div data-role="page" id="page2">
        <div data-role="content">
            <div data-role="fieldcontain" id="item1">
                <fieldset data-role="controlgroup">
                    <label for="item2">
                        item2
                    </label>
                    <input name="item2num" id="item2num" placeholder="" value="" type="number" />
                </fieldset>
            </div>
            <input id="btnAdd" type="submit" value="Submit" onclick="sum();" data-theme="b" />
            <span id="showResult"></span>
        </div>
    </div>
    <div data-role="page" id="page3">
        <div data-role="content">
            <span id="showResult"></span>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:02:58.133

您需要将值传递给提交表单的页面

```
// page1

<form action="page2" method="post">
    <input type="text" name="value1"/>
    <input type="text" name="value2"/>
    <input type="submit" />
</form> 
```

所以在另一个页面中，您可以同时获得并使用

```
// page2

<input type="hidden" name="value1" value="value from page 1"/>
<input type="hidden" name="value2" value="other value from page 1"/> 
```

用 jQuery 得到这个你可以做

```
var val1 = jQuery('input[name=value1]');
var val2 = jQuery('input[name=value2]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:08:45.830

请尝试下面的代码。它在最后一页显示结果。

```
<!DOCTYPE html>
    <html>
    <head>
        <title>Page Title</title> 

        <meta name="viewport" content="width=device-width, initial-scale=1"> 

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
        <script>
        function sum()
    {

        var item1num = document.getElementById('item1num').value;
        var item2num = document.getElementById('item2num').value;

            {result = parseInt(item1num)*parseInt(item2num);
            document.getElementById("showResult").innerHTML = "Result is: "+(result);}
    }

        </script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-role="content">
                <div data-role="fieldcontain" id="item1">
                    <fieldset data-role="controlgroup">
                        <label for="item1">
                            item1
                        </label>
                        <input name="item1num" id="item1num" placeholder="" value="" type="number" />
                    </fieldset>
                </div>
                <a data-role="button" data-transition="slidefade" href="#page2" data-theme="b">
                    Next
                </a>
            </div>
        </div>
        <div data-role="page" id="page2">
            <div data-role="content">
                <div data-role="fieldcontain" id="item1">
                    <fieldset data-role="controlgroup">
                        <label for="item2">
                            item2
                        </label>
                        <input name="item2num" id="item2num" placeholder="" value="" type="number" />
                    </fieldset>
                </div>
                <a href="#page3" data-role="button" data-theme="b" data-transirion="slidefade" onclick="sum();">B</a>
            </div>
        </div>
        <div data-role="page" id="page3">
            <div data-role="content">
                <span id="showResult"></span>
            </div>
        </div>
    </body>
    </html> 
```

# sql - 查找每天最大并发打开寄存器

> ID：15080028
> 
> 赞同：0
> 
> 时间：2013-02-26T01:54:20.030
> 
> 标签：sql, sqlanywhere

我在 Sybase SQL Anywhere 数据库中有一个表，该表具有以下结构（已删除非必要字段），该表由在工作日期间打开和关闭的零售商店寄存器填充。许多天的历史记录都保存在表中，并且在一天开始时，寄存器的状态被假定为关闭。“OPENTILL”表示打开业务登记簿，“CLOSETILL”表示关闭它：

```
Register   Transaction_Date      Transaction_Time     Transaction_Type
1          2013-02-25            08:00:00.000         OPENTILL
2          2013-02-25            08:01:00.000         OPENTILL
3          2013-02-25            08:02:00.000         OPENTILL
2          2013-02-25            09:00:00.000         CLOSETILL
3          2013-02-25            09:01:00.000         CLOSETILL
2          2013-02-25            10:00:00.000         OPENTILL
4          2013-02-25            11:00:00.000         OPENTILL
3          2013-02-25            12:00:00.000         OPENTILL
2          2013-02-25            13:00:00.000         CLOSETILL
1          2013-02-25            14:00:00.000         CLOSETILL
3          2013-02-25            15:00:00.000         CLOSETILL
4          2013-02-25            20:00:00.000         CLOSETILL 
```

这只是样本数据，实际寄存器数量超过 4 个。我要提取的数据是每天同时打开的寄存器的最大数量，即这样的表：

```
Date             Max_Concurrent_Registers
2013-02-25       14
2013-02-24       9
2013-02-23       12
2013-02-22       8 
```

仅使用相当基本的 Sybase SQL 就可以做到这一点——即聚合函数、“WIT​​H x AS (...)”、子选择，但没有游标或存储过程？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:45:00.147

有趣的是，前几天参与了一个类似问题的讨论:)

```
SELECT transaction_date, MAX(concurrent_count)
  FROM ( SELECT transaction_date, Transaction_Time, Transaction_Type
               ,SUM( CASE WHEN transaction_type = 'OPENTILL' THEN 1 ELSE -1 END )
                OVER( PARTITION BY transaction_date
                      ORDER BY Transaction_Time ) AS concurrent_count
           FROM myTable
       ) x
   GROUP BY transaction_date 
```

在 Postgres 中运行的示例：

```
postgres=# SELECT transaction_date, Transaction_Time, Transaction_Type
postgres-#                ,SUM( CASE WHEN transaction_type = 'OPENTILL' THEN 1 ELSE -1 END )
postgres-#                 OVER( PARTITION BY transaction_date ORDER BY Transaction_Time ) AS concurrent_count
postgres-#            FROM myTable;
 transaction_date | transaction_time | transaction_type | concurrent_count
------------------+------------------+------------------+------------------
 2013-02-25       | 08:00:00         | OPENTILL         |                1
 2013-02-25       | 08:01:00         | OPENTILL         |                2
 2013-02-25       | 08:02:00         | OPENTILL         |                3
 2013-02-25       | 09:00:00         | CLOSETILL        |                2
 2013-02-25       | 09:01:00         | CLOSETILL        |                1
 2013-02-25       | 10:00:00         | OPENTILL         |                2
 2013-02-25       | 11:00:00         | OPENTILL         |                3
 2013-02-25       | 12:00:00         | OPENTILL         |                4
 2013-02-25       | 13:00:00         | CLOSETILL        |                3
 2013-02-25       | 14:00:00         | CLOSETILL        |                2
 2013-02-25       | 15:00:00         | CLOSETILL        |                1
 2013-02-25       | 20:00:00         | CLOSETILL        |                0
(12 rows)

postgres=# SELECT transaction_date, MAX(concurrent_count)
postgres-#   FROM ( SELECT transaction_date, Transaction_Time, Transaction_Type
postgres(#                ,SUM( CASE WHEN transaction_type = 'OPENTILL' THEN 1 ELSE -1 END )
postgres(#                 OVER( PARTITION BY transaction_date ORDER BY Transaction_Time ) AS concurrent_count
postgres(#            FROM myTable
postgres(#        ) x
postgres-#    GROUP BY transaction_date;
 transaction_date | max
------------------+-----
 2013-02-25       |   4
(1 row) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:00:53.377

最佳解决方案涉及累积和，但 Sybase 不支持这些。

您可以对相关子查询执行等效操作。其基本思想是，任何时候的开放收银台数量是开放收银台数量之和减去关闭收银台数量之和。最后一步就是找到最大值：

```
select transaction_date, max(opentills)
from (select t.*,
             (select (sum(case when transaction_type = 'opentill' then 1 else 0 end) -
                      sum(case when transaction_type = 'closetill' then 1 else 0 end)
                     ) as NetOPens
              from transactions t2
              where t.transaction_date = t2.transaction_date
                    t2.transaction_time <= t.transaction_time
             ) as OpenTills
      from transactions t
    ) t
group by transaction_date
order by 1 
```

# ios - AVAudioRecorder 和 AirPlay 镜像

> ID：15080029
> 
> 赞同：2
> 
> 时间：2013-02-26T01:54:26.977
> 
> 标签：ios, objective-c, cocoa-touch, avaudiorecorder, airplay

当我激活 AVAudioRecorder 会话时 - （当我录制音频时）我无法在设备上激活 AirPlay 镜像。Airplay 镜像只是在应用程序运行时停用，并在应用程序退出时重新打开。这篇文章似乎暗示[没有办法解决这个问题](https://stackoverflow.com/questions/5892022/avaudioplayer-and-airplay-possible)。

我的想法是尝试：

*   使用较低级别的记录框架
*   ~~或[将单独的窗口输出到外部显示器](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/WindowAndScreenGuide/UsingExternalDisplay/UsingExternalDisplay.html)，而不是镜像~~（我试过这个，它不起作用）。

有没有其他方法可以解决这个问题，或者你知道这些方法中的任何一种是否有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:42:35.913

使用 AudioQueue 进行录制（如 Apple 的 Sample Code [Speak Here](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)）而不是 AVRecorder 工作。需要更多的工作来实现，但在 Airplay 镜像上或关闭时继续录制。

# java - 一个数字的位数？

> ID：15080031
> 
> 赞同：-5
> 
> 时间：2013-02-26T01:54:56.473
> 
> 标签：java, time-complexity

我编写了一个程序来找出java中给定数字中的位数。这是一个好方法吗？程序的时间复杂度是多少：

```
import java.util.*;

public class Inst {
     /**
     * @param args
     */
    public static void main(String[] args) {

            Scanner sc = new Scanner(System.in);
             double a = sc.nextDouble();
            for(int n=0;n<200000;n++)
            {
             double b=Math.pow(10, n);

             double d=a/b; 
            if(d>=0 & d<=9)
            {
                System.out.println("The number has "+(n+1)+" DIGITS");
                break;
            }
            }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T01:59:28.370

这个怎么样？

```
double input = Input;
int length = (input + "").length(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T01:58:11.437

```
import java.util.*;

public class JavaLength {
  public static void main(String[] args){ 
   Scanner sc = new Scanner(System.in);
   Double d = sc.nextDouble();
   String dString = d.toString();
   System.out.println(d);
   if(dString.contains(".")){
      System.out.println("Total Characters: " + (dString.length() -1 ));
   }else{
      System.out.println("Total Characters: " + (dString.length()));
   } /*-1 for the '.' in between, if it exists!*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:31:30.007

使用 pow / log 通常不是一个好的解决方案，因为可能有一个接近 10 次方的数字会四舍五入到下一个整数。在双精度中，应该能够精确存储 log10 绝对小于 15 的所有 15 位数字。实际上 log10(10^15 - 100) 仍然四舍五入为 15。

人们会坚持使用相同的算法，这些算法在内部用于十进制到字符串的转换：

*审判师*：

```
while (i > 0) { i=i/10;  count++; } 
```

*试乘法*：

```
j=10; while (i >= j) { j*=10; count++; } 
```

*从 msb 到 lsb 的试除法*转换为字符串；

```
j=10000000; while (i>0) { 
                 while (i>=j) { digit++;i-=j;}; 
                 j/=10; *str++=digit+'0'; digit=0:
            } 
```

[使用double dabble 算法](http://en.wikipedia.org/wiki/Double_dabble)进行二进制到 bcd 转换，其中每个数字由一组减少的十六进制数字表示（省略 af）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T03:09:11.773

FWIW，测试表示整数所需的（十进制）位数的最有效方法是 if / else 测试树。复杂性将是`O(1)`，但代码会很丑（但可移植）；例如

```
int num = ...

if (num >= 0)
    if (num < 1000000)
        if (num < 10000)
            if (num < 100)
                if (num < 10)
                    return 1
                else
                    return 2
            else 
                ...
        else
            ...
    else 
        ...
else 
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-09T19:15:08.753

这个逻辑最初是用 C++ 编写的，但我相信这是查找位数、以相反顺序存储并找到位数总和的最佳方法。

```
int n;
int count=0, sum=0;
int j=0;
int ar[10];    //array to store digits

cin>> n;      //input number
do{
    if((n/10)==0){
        count++;
        ar[j]=n;
        break;
    }

    else{
        count++;
        ar[j]= (n%10);
        j++;
        n=int(n/10);
    }
}

`
while((n/10)!=0||(n%10)!=0);

cout<<"The number of digits is: "<<count<<"\n"<<"The reverse number is: ";

for(int u=0;u<count;u++){
    cout<<ar[u];
    sum+=ar[u];
}
cout<<"\n"<< "Sum of digits is: "<< sum;
}` 
```

# c# - 按钮单击后刷新 Gridview

> ID：15080032
> 
> 赞同：3
> 
> 时间：2013-02-26T01:54:58.767
> 
> 标签：c#, asp.net, sql

在我的 asp.net 项目中，如何在单击按钮后立即刷新我的 gridview。我的按钮有更新代码。这是代码；

```
protected void Button3_Click(object sender, EventArgs e)
    {
        string strSQL = "UPDATE [bilgiler3] SET [HAM_FM] = ISNULL(MON,0)+ISNULL(TUE,0)+ISNULL(WED,0)+ISNULL(THU,0)+ISNULL(FRI,0)+ISNULL(SAT,0)+ISNULL(SUN,0) WHERE [DATE] BETWEEN @DATE1 AND @DATE2 AND WORK_TYPE='OUT'";
        string connStr = WebConfigurationManager.ConnectionStrings["asgdb01ConnectionString"].ConnectionString;
        using (SqlConnection conn = new SqlConnection(connStr))
        {
            using (SqlCommand comm = new SqlCommand())
            {
                comm.Connection = conn;
                comm.CommandText = strSQL;
                comm.CommandType = CommandType.Text;

                comm.Parameters.AddWithValue("@DATE1", Convert.ToDateTime(TextBox1.Text));
                comm.Parameters.AddWithValue("@DATE2", Convert.ToDateTime(TextBox2.Text));
                try
                {
                    conn.Open();
                    int i = comm.ExecuteNonQuery();
                    conn.Close();
                    if (i > 0)
                    {
                        Response.Write(" SUCCESS ");
                    }
                    else
                    {
                        Response.Write(" ERROR ! ");
                    }
                }
                catch (SqlException ex)
                {
                    Response.Write(ex.ToString());
                }
            }
        }
    } 
```

你可能会说“你需要绑定你的gridview的数据”，但我不明白这个方法。你能帮帮我吗？

非常感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:08:23.980

我会做以下事情：

```
DataSet ds = new DataSet();
SqlDataAdapter sda = new SqlDataAdapter();
 SqlConnection sc = new SqlConnection("you connection string here Security=True");

private void loadData()
        {
            try
            {
                ds.Clear();
                SqlCommand sCmd= new SqlCommand("Load your database", sc);
                sda.SelectCommand = sCmd;
                sda.Fill(ds, "sCmd");

                datagrid.DataSource = ds.Tables["sCmd"];
            }

            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
                Application.ExitThread();
            }

        } 
```

适合 c# 初学者的东西[Youtube](http://www.youtube.com/user/breakPointed)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T04:26:40.060

在您的按钮单击上添加此代码

```
SqlConnection con = new SqlConnection("Connection string from web config");
    DataSet ds = new DataSet();
    SqlDataAdapter sda = new SqlDataAdapter("select * from EmployeeTable", con);
    con.Open();
    sda.Fill(ds ,"Data");
gridview1.datasource=ds.tables[0];
gridview1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T05:38:36.930

DataBind 你控制成功。

```
if (i > 0)
      {
          yourGridView.DataSource=YourDataSource;
          yourGridView.DataBind();
          Response.Write(" SUCCESS ");
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:00:24.773

```
 private SqlConnection con;
 private SqlConnectionStringBuilder str;

private void Form8_Load(object sender, EventArgs e)
        {
            loadData();
        }

        private void loadData()
        {
            str = new SqlConnectionStringBuilder();
            str.Provider = "";
            str.DataSource = @"source.accdb";
            con = new SqlConnection(str.ConnectionString);
            dataGridView1.DataSource = fillTable("Select* from yourTable");
        }

        private DataTable fillTable(string sql)
        {
            DataTable datatable = new DataTable();
            using (SqlDataAdapter da = new SqlDataAdapter(sql, con))
            {
                da.Fill(datatable);
            }

            return datatable;
        } 
```

那么如果你想刷新你`loaddata();`在事件中放置的表`button_Click`希望这有帮助，

# javascript - CSS矩阵计算

> ID：15080039
> 
> 赞同：0
> 
> 时间：2013-02-26T01:55:29.923
> 
> 标签：javascript, css, matrix

几天来一直试图解决这个问题，但我不确定 CSS 矩阵是否与标准图形矩阵不同，或者我是否有问题（可能我有问题）。

我主要想弄清楚如何在 X 和 Y 轴上旋转。当我使用“变换：rotateX(2deg) rotateY(2deg) translate3d(0px, -100px, 0px);” 我使用 javascript 来获取矩阵样式，这就是我能够输出的。

```
0.9993908270190958,  -0.001217974870087876, -0.03487823687206265, 0,
0,                    0.9993908270190958,   -0.03489949670250097, 0,
0.03489949670250097,  0.03487823687206265,   0.9987820251299122,  0,
0,                  -99.93908270190957,      3.489949670250097,   1 
```

但是，如果我尝试使用 javascript 计算矩阵（X 和 Y 均为 2 度），我会得到

```
 0.9993908270190958,    0,                   -0.03489949670250097, 0, 
-0.001217974870087876,  0.9993908270190958,  -0.03487823687206265, 0, 
 0.03487823687206265,   0.03489949670250097,  0.9987820251299122,  0, 
 0.1217974870087876,  -99.93908270190957,     3.487823687206265,   1 
```

现在，虽然第二个数字中有几个不同的数字，但我相信一个数字会导致问题。请注意两个矩阵的第 1 行/第 2 列和第 2 行/第 1 列中的数字。“-0.001217974870087876”看起来被切换了。如果我了解一切是如何计算的，那么这可能会抛弃所有其他数字。

这是我用来创建第二个矩阵的代码

```
var basematrix = [
    [1, 0, 0, 0],
    [0, 1, 0, 0],
    [0, 0, 1, 0], 
    [0, -100, 0, 1]
];
function RotateWorld(y, x)
{
    var halfrot = Math.PI / 180;

    var xcos = Math.cos(x * halfrot);
    var xsin = Math.sin(x * halfrot);

    var ycos = Math.cos(y * halfrot);
    var ysin = Math.sin(y * halfrot);

    var ymatrix = [
        [ycos, 0, -ysin, 0],
        [0, 1, 0, 0],
        [ysin, 0, ycos, 0], 
        [0, 0, 0, 1]
    ];

    var xmatrix = [
        [1, 0, 0, 0],
        [0, xcos, xsin, 0],
        [0, -xsin, xcos, 0], 
        [0, 0, 0, 1]
    ];

    var calcmatrix = MatrixMultiply(ymatrix, basematrix);

    calcmatrix = MatrixMultiply(xmatrix, calcmatrix);

    calcmatrix = TransMultiply(calcmatrix);

    for (var i = 0; i < 4; i++)
    {
        for (var j = 0; j < 4; j++)
        {
            document.getElementById('info').innerHTML += calcmatrix[i][j] + ', ';
        }
    }
}

function MatrixMultiply(matrixa, matrixb)
{
    var newmatrix = [];
    for (var i = 0; i < 4; ++i)
    {
        newmatrix[i] = [];
        for (var j = 0; j < 4; ++j)
        {
            newmatrix[i][j] = matrixa[i][0] * matrixb[0][j] 
                    + matrixa[i][1] * matrixb[1][j] 
                    + matrixa[i][2] * matrixb[2][j] 
                    + matrixa[i][3] * matrixb[3][j];
        }
    }

    return newmatrix;
}
function TransMultiply(matrix)
{
    var newmatrix = matrix;
    var x = matrix[3][0];
    var y = matrix[3][1];
    var z = matrix[3][2];
    var w = matrix[3][3];

    newmatrix[3][0] = x * matrix[0][0] + y * matrix[1][0] + z * matrix[2][0];
    newmatrix[3][1] = x * matrix[0][1] + y * matrix[1][1] + z * matrix[2][1];
    newmatrix[3][2] = x * matrix[0][2] + y * matrix[1][2] + z * matrix[2][2];
    newmatrix[3][3] = x * matrix[0][3] + y * matrix[1][3] + z * matrix[2][3] + newmatrix[3][3];
    if (newmatrix[3][3] != 1 && newmatrix[3][3] != 0)
    {
        newmatrix[3][0] = x / w;
        newmatrix[3][1] = y / w;
        newmatrix[3][2] = z / w;
    }
    return newmatrix;
} 
```

我的代码有点冗长，因为我只是想学习如何使用 CSS 矩阵。但希望有人能帮我把那个号码放到正确的位置。

**编辑** 我讨厌发帖，但我已经没有地方可以问了，所以我希望更多的人会看到它并有机会得到答案。我已经尝试了所有可能的搜索来解决这个问题（独特的问题在谷歌中的排名并不高）。我可能已经阅读了 20 多篇关于使用矩阵的文章，但它们一无所获。如果我需要添加更多信息，请告诉我。另外，如果有更好的地方可以问，请告诉我。我假设现在有几个人已经看过代码并且代码一定没问题，也许我认为 CSS 是罪魁祸首的假设是可能的，如果是这样，如何追踪呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T16:47:03.000

看看[这个页面](http://9elements.com/html5demos/matrix3d/)，它解释了 css 3dmatrix 是如何工作的。同样[在这里，](https://github.com/arian/CSSMatrix)您在 JS 中实现了 CSSMatrix 对象，与 WebKitCSSMatrix 非常相似，WebKitCSSMatrix 已经包含在您的（webkit）浏览器中供您使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T18:09:58.587

您的实施中有一个错误`function TransMultiply(matrix) { .. }`

```
var newmatrix = matrix; 
```

那不是克隆您的矩阵，而是设置`newmatrix`为引用您的原始矩阵！任何使用这种方法的东西都会把原始矩阵和新矩阵弄乱。您可能希望使用创建新 4x4 矩阵的方法，例如：

```
function new4x4matrix(){
    return  [[0, 0, 0, 0],
             [0, 0, 0, 0],
             [0, 0, 0, 0], 
             [0, 0, 0, 0]];
} 
```

然后在需要新矩阵的任何地方，执行：

 ~~~~```
var newmatrix = new4x4matrix(); 
```~~  ~~编辑：错误，但您实际上可能需要一个克隆方法：很好。

```
function cloneMatrix(matrixa)
{
    var newmatrix = [];
    for (var i = 0; i < 4; ++i)
    {
        newmatrix[i] = [];
        for (var j = 0; j < 4; ++j)
        {
            newmatrix[i][j] = matrixa[i][j];
        }
    }

    return newmatrix;
} 
```

相反，对于 TransMultiply 做：

```
var newmatrix = cloneMatrix(matrix); 
```~~~~

# ruby-on-rails-3 - 如何在保存我的用户模型之前使用acts-as-taggable-on gem 格式化标签？

> ID：15080044
> 
> 赞同：1
> 
> 时间：2013-02-26T01:56:21.937
> 
> 标签：ruby-on-rails-3, acts-as-taggable-on, before-save

如何在保存模型之前使用acts-as-taggable-on 格式化标签？

我在我的 ruby​​ on rails 项目中使用以下 gem

```
gem 'acts-as-taggable-on', '~> 2.3.1' 
```

我已将兴趣标签添加到我的用户模型中。

用户.rb

```
class User < ActiveRecord::Base
  acts_as_ordered_taggable_on :interests
  scope :by_join_date, order("created_at DESC")

  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :interest_list

  # this does not work
  before_save :clean_my_tags

  # this also does not work
  # before_validation :clean_my_tags

  def clean_my_tags
    if @interest_list
      # it appears that at this point, @interest_list is no longer a string, but an
      # array of strings corresponding to the tags
      @interest_list = @interest_list.map {|x| x.titleize}
    end
  end
end 
```

假设最后一个用户已经有兴趣标签：篮球，高尔夫，足球如果我改变兴趣喜欢

```
u = User.last
u.interest_list = "cats, dogs, rabbits"
u.save 
```

那么 u.interest_list 将是 ["cats", "dogs", "rabbits"]

但是，u.interests 将保留与篮球、高尔夫、足球相关的标签对象数组

如何确保在保存标签之前对标签进行格式化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:09:41.470

由于某种原因，您的`before_save`回调需要`acts_as_taggable_on`在您的模型中出现，正如 Dave 在这里指出的那样：[https ://github.com/mbleigh/acts-as-taggable-on/issues/147](https://github.com/mbleigh/acts-as-taggable-on/issues/147)

我确认这适用于rails（3.2）并作为可标记（2.3.3）：

```
class User < ActiveRecord::Base

  before_save :clean_my_tags

  acts_as_ordered_taggable_on :interests

  def clean_my_tags
    if interest_list
      interest_list = interest_list.map {|x| x.titleize}
    end
  end
end 
```

# php - Zend Wurfl 移动服务器错误

> ID：15080052
> 
> 赞同：0
> 
> 时间：2013-02-26T01:57:24.883
> 
> 标签：php, zend-framework, user-agent, wurfl

嗨，我尝试将移动模板添加到当前的 zend 应用程序中，但它返回服务器错误。以下是我在几个站点上关注的配置。

应用程序.in

```
resources.frontController.plugins[] = "Rate_Application_Mobile"
resources.useragent.wurflapi.wurfl_api_version = "1.1"
resources.useragent.wurflapi.wurfl_lib_dir = APPLICATION_PATH "/../library/wurfl/WURFL/"
resources.useragent.wurflapi.wurfl_config_file = APPLICATION_PATH "/configs/wurfl-config.php" 
```

wurfl-config.php

```
<?php
$resourcesDir            = dirname(__FILE__) . '/../../data/wurfl/';

$wurfl['main-file']      = $resourcesDir  . 'wurfl-2.0.27.zip';
$wurfl['patches']        = array($resourcesDir . 'web_browsers_patch.xml');

$persistence['provider'] = 'file';
$persistence['dir']      = $resourcesDir . 'cache/';

$cache['provider']       = null;

$configuration['wurfl']       = $wurfl;
$configuration['persistence'] = $persistence;
$configuration['cache']       = $cache; 
```

移动插件 /var/www/library/Rate/Application/Mobile.php

```
class Rate_Application_Mobile extends Zend_Controller_Plugin_Abstract
{

    public function dispatchLoopStartup(Zend_Controller_Request_Abstract $req)
    {

        $front = Zend_Controller_Front::getInstance();
        $bootstrap = $front->getParam("bootstrap");

        $userAgent = $bootstrap->getResource('useragent');

        $device = $userAgent->getDevice();  --> this part return server error when switching to mobile browser, otherwise it return desktop when view as desktop browser

    }
} 
```

谢谢！！

更新：错误返回如下

```
Warning: include(/var/www/library/wurfl/WURFL/Storage/.php): failed to open stream: No such file or directory in /var/www/library/wurfl/WURFL/ClassLoader.php on line 42

Warning: include(): Failed opening '/var/www/library/wurfl/WURFL/Storage/.php' for inclusion (include_path='/var/www/application/../library:/var/www/library:.:/usr/share/php:/usr/local/Zend/library') in /var/www/library/wurfl/WURFL/ClassLoader.php on line 42

Fatal error: Class 'WURFL_Storage_' not found in /var/www/library/wurfl/WURFL/Storage/Factory.php on line 43 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:31:36.057

**这是我在上面的评论中给出的答案，只是为了支持和接受而复制和粘贴。**

这是 PHP 错误，说明找不到类文件。您包含空名称 PHP 文件，因此 WURFL 可能无法检测到它需要加载的内容。请在 ClassLoader.php:42（第一个错误）中的错误行之前执行 debug_backtrace()，并检查它尝试/需要在 Factory.php:43 中加载的存储。如果是这个文件：[Factory.php](https://github.com/knnktr-labs/wurfl/blob/master/WURFL/Storage/Factory.php)，您正在尝试加载应该在您提供的提供程序配置树中指定的文件提供程序，但它没有被读取。

现在请清除 ZF 缓存，并检查是否

```
$persistence['provider'] = 'file';
$cache['provider'] = null;
$configuration['persistence'] = $persistence; 
```

不要干扰。

# javascript - .focus() 在 Javascript 函数中不起作用

> ID：15080054
> 
> 赞同：2
> 
> 时间：2013-02-26T01:58:14.970
> 
> 标签：javascript, html, forms

我有一个简单的表格，其中包含名字和姓氏以及称呼的字段。我有一个 javascript 函数，它应该验证字段是否为空或超过 25 个字符。该功能主要适用于 .focus(); 页面只是重新加载。不知道我做错了什么，请指教。提前致谢。

```
function validate(){
//alert ("TEST!!!");
var first = document.getElementById('firstname').value;

if (first.length == 0 || first.length > 25){

        alert ("Please enter your first name, no longer than 25 chracters.");

        document.getElementById('firstname').focus();

        return false;

        }

var last = document.getElementById('lastname').value;
if (last.length == 0 || last.length > 25){

    alert ("Please enter your last name, no longer than 25 characters.");

    document.getElementsByName('lastname').focus();

    return false;

   }

var title = document.getElementById('title').value;   
if (document.getElementById('title').selectedIndex == 0){

    alert ("Please select your salutation");

    document.getElementById('title').focus();

    return false;
}

return true; 
```

}

在 html 中，表单是：

```
<form name="name" form id="name" method="post" onsubmit="validate();"> 
        Salutation: <select name="title" select id="title">
            <option selected="Please Select">Please select</option>
            <option value="Mr.">Mr.</option>
            <option value="Mrs.">Mrs.</option>
            <option value="Miss">Miss</option>
        </select><br><br>
        First Name : <input type="text" input id="firstname" name="firstname">
        Last Name : <input type="text" input id="lastname" name="lastname"><br><br>
        <input type="submit" value="Submit"><br><br>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T01:59:20.257

改变：

```
onsubmit="validate();"> 
```

到：

```
onsubmit="return validate();"> 
```

# c# - 使用条件搜索并仅返回 1 个最新结果的 Lambda 表达式

> ID：15080056
> 
> 赞同：1
> 
> 时间：2013-02-26T01:58:26.887
> 
> 标签：c#, .net, linq, lambda

我有一个包含`Supplier`数据的列表，我想通过使用`SupplierID`非活动供应商和只有 1 个最新结果来搜索它。

所以我有：

```
List<Supplier> filteredList = this.toList();    
filteredList.OrderByDescending(m => m.ModifiedDatetime).FirstOrDefault();    
filteredList.Where(f => (f.Active == false && f.FieldId == SupplierFieldID))
            .ToList<Supplier>(); 
```

但我无法完成这项工作；请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:01:39.023

您需要链接您的 LINQ 表达式，如下所示：

```
var filteredList = unfilteredData
    .Where(f => f.Active == false && f.FieldId == SupplierFieldID)
    .OrderByDescending(m => m.ModifiedDatetime)
    .FirstOrDefault(); 
```

您不需要 a `ToList()`，因为您需要单个项目，而不是列表；这就是这样`FirstOrDefault()`做的。如果您需要最后一件商品，您需要按原订购条件的相反顺序订购。例如，如果您想要具有最新修改日期的条目，则需要按降序排序（就像您所做的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:01:12.403

您可以在一个语句中执行此操作，将 LINQ 运算符链接在一起：

```
var filteredList = myList.Where(f => f.Active == false && f.FieldId == SupplierFieldID)
                         .OrderByDescending(m => m.ModifiedDatetime)
                         .Take(1); 
```

或者正如@Preston Guillot 建议的那样，更短的形式：

```
var filteredList = unfilteredData
            .OrderByDescending(m => m.ModifiedDatetime)
            .FirstOrDefault(f => f.Active == false && f.FieldId == SupplierFieldID); 
```

# java - 常量 java:comp 未在此上下文中绑定错误 tomcat6

> ID：15080065
> 
> 赞同：0
> 
> 时间：2013-02-26T01:59:14.353
> 
> 标签：java, tomcat, jdbc

我不断收到此错误，并尝试了许多网上传闻的修复方法，但均无济于事。

这是一个例外：

```
javax.naming.NameNotFoundException: Name java:comp is not bound in this Context
    at org.apache.naming.NamingContext.lookup(NamingContext.java:770)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:153)
    at javax.naming.InitialContext.lookup(InitialContext.java:411)
    at my.app.database.DatabaseManager.connect(DatabaseManager.java:44)
    at my.app.database.DatabaseManager.return(DatabaseManager.java:133)
    at my.app.GenParse.GeneratePastPositions.updateSatHistory(GeneratePastPositions.java:89)
    at my.app.updateHistory.run(SatelliteEclipseServer.java:72)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:351)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:178)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我的资源声明`context.xml`如下：

```
<?xml version='1.0' encoding='utf-8'?>

<!-- The contents of this file will be loaded for each web application -->
<Context reloadable="true">

    <!-- Default set of monitored resources -->
    <WatchedResource>WEB-INF/web.xml</WatchedResource>

    <!-- Uncomment this to disable session persistence across Tomcat restarts -->
    <!--
    <Manager pathname="" />
    -->

    <!-- Uncomment this to enable Comet connection tacking (provides events
         on session expiration as well as webapp lifecycle) -->
    <!--
    <Valve className="org.apache.catalina.valves.CometConnectionManagerValve" />
    -->
     <Resource name="jdbc/TestDB" auth="Container" type="javax.sql.DataSource"
               maxActive="100" maxIdle="30" maxWait="10000"
               username="myUsername" password="myPassword" driverClassName="com.mysql.jdbc.Driver"
               url="jdbc:mysql://mysql.myServer.com:3306/myUserName"/>

</Context> 
```

我的java代码中的连接：

```
public void connect() throws SQLException, NamingException{
    initCtx = new InitialContext();
    envCtx = (Context) initCtx.lookup("java:comp/env");
    ds = (DataSource) envCtx.lookup("jdbc/TestDB");         
} 
```

我认为也正因为如此，它没有像应有的那样关闭连接。除了错误消息之外，它都可以正常工作，但我认为这个错误会随着时间的推移而复杂化并耗尽所有可用的连接。

我真的很感激这方面的一些帮助，因为它让我烦恼了好几个星期！

# javascript - Mocha 不在 after() 函数中调用 rmdir

> ID：15080068
> 
> 赞同：2
> 
> 时间：2013-02-26T01:59:21.847
> 
> 标签：javascript, testing, bdd, mocha.js, rmdir

我尝试在测试之前创建一些目录树并将其删除：

```
require('should');
var fs = require('fs');
var rmdir = require('rmdir');

describe('FsWatcher', function() {
  before(function(done) {
    console.log("before");
    fs.mkdir('tmp');
    fs.mkdir('tmp/css');
    fs.mkdir('tmp/js');
    fs.mkdir('tmp/lib');
    fs.open('tmp/index.htm', 'w');
    // (...)
    console.log("after_before");
    done();
  });

  describe('single file', function() {
    it('should succed', function(done) {
      (1).should.equal(1);
      done();
    });
  });

  after(function() {
    console.log("after");
    rmdir('tmp', function() {
        console.log("rmdir!");
    });
    console.log("after_end");
  });
}); 
```

s的顺序`console.log`没问题：

```
mocha `find tests -name '*.js'`

  before
after_before
․after
after_end

  ✔ 1 test complete (6 ms) 
```

但它不调用 rmdir()。当它位于末尾时，相同的 rmdir 起作用`before()`：

```
describe('FsWatcher', function() {
  before(function(done) {
    console.log("before");
    fs.mkdir('tmp');
    fs.mkdir('tmp/css');
    fs.mkdir('tmp/js');
    fs.mkdir('tmp/lib');
    fs.open('tmp/index.htm', 'w');
    // (...)
    console.log("after_before");
    rmdir('tmp', function(){
        console.log("rmdir!");
    });
    done();
  });
}); 
```

安慰：

```
mocha `find tests -name '*.js'`

  before
after_before
 rmdir!
after
after_end 
```

为什么它在中不起作用`after()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T04:01:18.827

测试完成太快。您需要使用 after 的异步版本。

```
after(function(done) {
    console.log("after");
    rmdir('tmp', function() {
        console.log("rmdir!");
        done();
    });
    console.log("after_end");
}); 
```

哪个应该输出：

```
 after
 after_end
 rmdir! 
```

当您从 调用它时它似乎工作的原因`before()`是因为发生了很多其他事情，所以 rmdir 将被调用，但稍后当 node 回到事件循环时。

# yii - 无法通过 yii 中的 clientScript->registerScript 注册普通函数

> ID：15080070
> 
> 赞同：4
> 
> 时间：2013-02-26T01:59:28.523
> 
> 标签：yii

我通过调用一个简单的javascript函数`onchange`

```
echo $form->dropDownList($model, 'job_title', $jobTypes, array('onchange'=>'jobTitle(this);')); ?> 
```

尝试通过`jobTitle`注册`clientScript->registerScript`

```
Yii::app()->clientScript->registerScript('jobTitle', "
    function jobTitle(e) {
        alert('e');
    }
"); 
```

然而，我收到了一个`jobTitle`未定义的错误......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T02:48:19.143

**原因：**

[默认位置](http://www.yiiframework.com/doc/api/1.1/CClientScript#defaultScriptPosition-detail "http://www.yiiframework.com/doc/api/1.1/CClientScript#defaultScriptPosition-detail")为，`CClientScript::POS_READY`生成的js为：

```
jQuery(function($) {
    // ... there could be some other yii scriptlets too ...
    function jobTitle(e) {
        alert('e');
    }
}); 
```

这意味着您的函数`jobTitle`仅在`jQuery();`函数范围内可用，而不是在函数范围外可用，这就是您收到未定义错误的原因。

**解决方案1：**

如果您使用职位 :`CClientScript::POS_HEAD`或`CClientScript::POS_BEGIN`or`CClientScript::POS_END`与您的`registerScript`电话，即：

```
Yii::app()->clientScript->registerScript('jobTitle', "
    function jobTitle(e) {
        alert('e');
    }
", CClientScript::POS_END); 
```

该函数将在外部和全局范围内定义，然后您将能够使用该函数。

**解决方案2：**

或者，如果您需要函数 within [`ready()`](http://api.jquery.com/ready/ "http://api.jquery.com/ready/")，即 within `jQuery(function($){});`，您可以在全局窗口对象中定义该函数，并且仍然可以从外部访问它：

```
Yii::app()->clientScript->registerScript('jobTitle', "
    window.jobTitle = function jobTitle(e) {
        alert('e');
    }
"); 
```

**解决方案3：**

或者您可以简单地从 jQuery 本身添加一个事件处理程序，而不是在 html 中内联：

```
Yii::app()->clientScript->registerScript('jobTitle', "
    $('body').on('change', 'id-of-job-title-input', function(e){
        console.log(e);
    });
"); 
```

# jquery - 以窗口位置 href 作为我的案例的 switch case 语句

> ID：15080072
> 
> 赞同：1
> 
> 时间：2013-02-26T01:59:41.067
> 
> 标签：jquery, switch-statement, window.location

我希望在位置 href 中针对我的不同条件使用 switch case 语句。我试图避免继续写 if 语句

```
if (/red/.test(self.location.href)){
   //do this red
 }

if (/blue/.test(self.location.href)){
   //do this blue
}

if (/yello/.test(self.location.href)){
  //do this yellow
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:05:02.240

```
var _url = window.location.href;
swith(true){
    case /red/.test(_url):
    //do red
    break;
    case /blue/.test(_url):
    //do blue
    break;
    case /yellow/.test(_url):
      // do yellow
    break;
 } 
```

# numbers - 从特定图像中提取数字

> ID：15080074
> 
> 赞同：0
> 
> 时间：2013-02-26T01:59:52.877
> 
> 标签：numbers, ocr, detect, image-recognition

我参与了一个我认为你可以帮助我的项目。我有多个图像，您可以在此处看到[要识别的图像](https://www.dropbox.com/sh/kcybs1i04w3ao97/u33YGH_Kv6)。这里的目标是提取虚线之间的数字。最好的方法是什么？我一开始的想法是找到虚线的坐标并做裁剪功能，然后只是运行OCR软件。但是找到那些坐标并不容易，你能帮帮我吗？或者如果你有更好的方法告诉我。

最好的问候，佩德罗·皮门塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:08:53.037

您可以从查看图像中更明显（更大）的对象开始。在某些图像中，虚线太小了。搜索“euros milhoes”标志和条形码会更容易，它会帮助您了解所涉及的比例和旋转。

[要在不使用匹配模板](http://docs.opencv.org/doc/tutorials/imgproc/histograms/template_matching/template_matching.html)的情况下找到这些对象，您可以对图像进行二值化（注意背景纹理）并使用轮廓/斑点上的 Hu 矩。

不要期望数字小于 8-10 像素的图像具有良好的 OCR 精度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:48:05.447

您可以使用 python-tesseract [https://code.google.com/p/python-tesseract/](https://code.google.com/p/python-tesseract/)，它适用于您的图像。您需要做的是拆分结果字符串。我使用您的[https://www。 dropbox.com/sh/kcybs1i04w3ao97/u33YGH_Kv6#f:euro9.jpg](https://www.dropbox.com/sh/kcybs1i04w3ao97/u33YGH_Kv6#f:euro9.jpg)进行测试。源代码如下。**更新**

```
# -*- coding: utf-8 -*-
from PIL import Image
from PIL import ImageEnhance
import tesseract

im = Image.open('test.jpg')
enhancer = ImageEnhance.Contrast(im)
im = enhancer.enhance(4)
im = im.convert('1')
w, h = im.size

im = im.resize((w * (416 / h), 416))

pix = im.load()

LINE_CR = 0.01
WHITE_HEIGHT_CR = int(h * (20 / 416.0))

status = 0
white_line = []

for i in xrange(h):
    line = []
    for j in xrange(w):
        line.append(pix[(j, i)])
    p = line.count(0) / float(w)
    if not p > LINE_CR:
        white_line.append(i)

wp = None
for i in range(10, len(white_line) - WHITE_HEIGHT_CR):
    k = white_line[i]
    if white_line[i + WHITE_HEIGHT_CR] == k + WHITE_HEIGHT_CR:
        wp = k
        break

result = []
flag = 0

while 1:
    if wp < 0:
        result.append(wp)
        break

    line = []
    for i in xrange(w):
        line.append(pix[(i, wp)])
    p = line.count(0) / float(w)

    if flag == 0 and p > LINE_CR:

        l = []

        for xx in xrange(20):
            l.append(pix[(xx, wp)])
        if l.count(0) > 5:
            break

        l = []
        for xx in xrange(416-1, 416-100-1, -1):
            l.append(pix[(xx, wp)])
        if l.count(0) > 17:
            break

        result.append(wp)
        wp -= 1
        flag = 1
        continue

    if flag == 1 and p < LINE_CR:
        result.append(wp)
        wp -= 1
        flag = 0
        continue

    wp -= 1

result.reverse()
for i in range(1, len(result)):
    if result[i] - result[i - 1] < 15:
        result[i - 1] = -1
result = filter(lambda x: x >= 0, result)
im = im.crop((0, result[0], w, result[-1]))
im.save('test_converted.jpg')

api = tesseract.TessBaseAPI()
api.Init(".","eng",tesseract.OEM_DEFAULT)
api.SetVariable("tessedit_char_whitelist", "0123456789abcdefghijklmnopqrstuvwxyz")
api.SetPageSegMode(tesseract.PSM_AUTO)

mImgFile = "test_converted.jpg"
mBuffer=open(mImgFile,"rb").read()
result = tesseract.ProcessPagesBuffer(mBuffer,len(mBuffer),api)
print "result(ProcessPagesBuffer)=",result 
```

依赖于 python 2.7 python-tesseract-win32 python-opencv numpy PIL，请务必遵循 python-tesseract 的**记住**。

# php - PHP 类：不插入数据：第二个查询

> ID：15080075
> 
> 赞同：0
> 
> 时间：2013-02-26T01:59:58.487
> 
> 标签：php, class, pdo

我有一个叫做联系人的类。在这个类中，我有一个名为 addContact() 的方法。第一条语句执行正确，但似乎没有得到 $db->lastInsertId()。需要一些帮助。这是我的代码：

```
 public function addContact($addcontactfirstname,$addcontactmiddlename,$addcontactlastname,$addcontactstreetnumber, $addcontactstreetname, $addcontactsuburb, $addcontactcity, $addcontactemailhome, $addcontactemailwork,$addcontacthomephone, $addcontactcellphone, $addcontactworkphone){
        $addsuccessfully = true;
        $addcontact_id = 0;

        try {
            $db = database::databaseConnect();

            $stmt1 = $db->prepare('INSERT INTO personalinfo (firstname, middlename, lastname) VALUES (:addcontactfirstname, :addcontactmiddlename, :addcontactlastname)');
            $stmt1->bindParam(':addcontactfirstname', $addcontactfirstname, PDO::PARAM_STR);
            $stmt1->bindParam(':addcontactmiddlename', $addcontactmiddlename, PDO::PARAM_STR);
            $stmt1->bindParam(':addcontactlastname', $addcontactlastname, PDO::PARAM_STR);

            $successful1 = $stmt1->execute();
            $addcontact_id = $db->lastInsertId();

            if($successful1){
                //$addcontact_id = $db->lastInsertId();
                $successful1 = true;

                $stmt2 = $db->prepare('INSERT INTO contactinfo (contact_id, streetnumber, streetname, suburbname, cityname, emailhome, emailwork, homephone, cellphone, workphone) VALUES (:addcontact_id, :addcontactstreetnumber, addcontactstreetname, :addcontactsuburb, :addcontactcity, :addcontactemailhome, :addcontactemailwork,:addcontacthomephone, :addcontactcellphone, :addcontactworkphone)');
                $stmt2->bindParam(':addcontact_id', $addcontact_id, PDO::PARAM_INT);
                $stmt2->bindParam(':addcontactstreetnumber', $addcontactstreetnumber, PDO::PARAM_STR);
                $stmt2->bindParam(':addcontactstreetname', $addcontactstreetname, PDO::PARAM_STR);
                $stmt2->bindParam(':addcontactsuburb', $addcontactsuburb, PDO::PARAM_STR);
                $stmt2->bindParam(':addcontactcity', $addcontactcity, PDO::PARAM_STR);
                $stmt2->bindParam(':addcontactemailhome', $addcontactemailhome, PDO::PARAM_STR);
                $stmt2->bindParam(':addcontactemailwork', $addcontactemailwork, PDO::PARAM_STR);
                $stmt2->bindParam(':addcontacthomephone', $addcontacthomephone, PDO::PARAM_STR);
                $stmt2->bindParam(':addcontactcellphone', $addcontactcellphone, PDO::PARAM_STR);
                $stmt2->bindParam(':addcontacthomephone', $addcontactworkphone, PDO::PARAM_STR);

                $successful2 = $stmt2->execute();

                if($successful2){
                    $successful2 = true;
                }

                if(!$successful1 && !$successful2){
                    $addsuccessfully = false;
                }

            }

            if($successful1 === true && $successful2 === true){
                $addsuccessfully = true;
            }
        } 

        catch (PDOException $e) {
            $addsuccessfully = false;
        }

        return $addsuccessfully;
    } 
```

我有一个从我的视图页面调用的函数。这是我的功能：

```
 function addContact($addcontactfirstname,$addcontactmiddlename,$addcontactlastname,$addcontactstreetnumber, $addcontactstreetname, $addcontactsuburb, $addcontactcity, $addcontactemailhome, $addcontactemailwork,$addcontacthomephone, $addcontactcellphone, $addcontactworkphone){
     global $addsuccessfully;
     contacts::addContact($addcontactfirstname,$addcontactmiddlename,$addcontactlastname,$addcontactstreetnumber, $addcontactstreetname, $addcontactsuburb, $addcontactcity, $addcontactemailhome, $addcontactemailwork,$addcontacthomephone, $addcontactcellphone, $addcontactworkphone);
     return $addsuccessfully;
 } 
```

这是我调用该函数的页面。该页面确实显示无法添加联系人。我知道第一个查询的工作原理是联系人在数据库中显示，但它没有将第二位添加到数据库的联系人信息表中。这是我的查看页面：

```
<?php
/*The first thing that need to take place on this page is to ensure that the $admin value = 1.
 * If the value is not 1 the user will get redirected to the home page.  If the value of
 * $admin = null, it then indicates that the user is not logged in.  The system will then tell the
 * user that he need to logon first, but also warn the user that if he is not an admin user he won't be
 * allowed access to this page.  This is to ensure that the user don't type the url address in 
 * his browser to try and access this page.  This means that only admin users will be able to 
 * view this page while logged on and will be able to add new users.  This will be an admin
 * protected page.  Protcted so the user must be logged in and and admin user.
 */
ini_set('display_errors', 1);
error_reporting(E_ALL);

require_once 'functions/functions.php';
checkLoggedIn(page::ADDCONTACT); 

echo $message;

if ($pageID == 1){
    require_once 'includes/adminmenu.php';

    if($_POST){
        $addcontactfirstname = $_POST['addcontactfirstname'];
        $addcontactmiddlename = $_POST['addcontactmiddlename'];
        $addcontactlastname = $_POST['addcontactlastname'];
        $addcontactstreetnumber = $_POST['addcontactstreetnumber'];
        $addcontactstreetname = $_POST['addcontactstreetname'];
        $addcontactsuburb = $_POST['addcontactsuburb'];
        $addcontactcity = $_POST['addcontactcity'];
        $addcontactemailhome = $_POST['addcontactemailhome'];
        $addcontactemailwork = $_POST['addcontactemailwork'];
        $addcontacthomephone = $_POST['addcontacthomephone'];
        $addcontactcellphone = $_POST['addcontactcellphone'];
        $addcontactworkphone = $_POST['addcontactworkphone'];
        $errors = array();
        $homephonelength = false;
        $cellphonelength = false;
        $workphonelength = false;
        //$addsuccessfully = true;

        stripUserInput($addcontactfirstname,$addcontactmiddlename,$addcontactlastname,$addcontactstreetnumber,$addcontactstreetname,$addcontactsuburb,$addcontactcity,$addcontactemailhome,$addcontactemailwork,$addcontacthomephone,$addcontactcellphone,$addcontactworkphone);

        if(empty($addcontactfirstname)){
            $errors[] = 'First name can\'t be empty!';
        }

        if(empty($addcontacthomephone) && empty($addcontactcellphone) && empty($addcontactworkphone)){
            $errors[] = 'You must enter at least one telephone number!';
        }             

        if(!empty($addcontacthomephone)){
            //$phonenumber = $addcontacthomephone;
            $homephonelength = chechPhoneLenght($addcontacthomephone);

            if($homephonelength === true){
                $errors[] = 'The home phone number you entered is too short!';
            }
        }

        if(!empty($addcontactcellphone)){
            //$phonenumber = $addcontactcellphone;
            $cellphonelength = chechPhoneLenght($addcontactcellphone);

            if($cellphonelength === true){
                $errors[] = 'The mobile phone number you entered is too short!';
            }
        }

        if(!empty($addcontactworkphone)){
            //$phonenumber = $addcontactworkphone;
            $workphonelength = chechPhoneLenght($addcontactworkphone);

            if($workphonelength === true){
                $errors[] = 'The work phone number you entered is too short!';
            }
        }            

        if(!empty($addcontactemailhome)){
            $email = $addcontactemailhome;
            is_valid_email($email);

            if (is_valid_email($email) === false){
                $errors[] = 'You have entered an invalid home email address!';
            }
        }

        if(!empty($addcontactemailwork)){
            $email = $addcontactemailwork;
            is_valid_email($email);

            if(is_valid_email($email) === false){
                $errors[] = 'You have entered an invalid work email address!';
            }
        }

        if(empty($errors)){
            //Add the contact
            $addsuccessfully = addContact($addcontactfirstname,$addcontactmiddlename,$addcontactlastname,$addcontactstreetnumber, $addcontactstreetname, $addcontactsuburb, $addcontactcity, $addcontactemailhome, $addcontactemailwork,$addcontacthomephone, $addcontactcellphone, $addcontactworkphone);

            if($addsuccessfully === true){
                echo 'New contact added successfully!';
            }else{

                echo 'New contact could not be add.  Please go <a href="addcontact.php">back</a> and try again!';
            }
        }else{
            echo '<b>Please fix the following errors and try again!</b><br>';
            foreach ($errors as $key => $error_message){
                echo '<font color="red"><em>' . $error_message . '</font></em><br>';
            }
            ?>

            <h1>Add new contact</h1>
            <p><em>Fields marked with <font color="red">*</font> must be completed.</em></p>
            <form action="addcontact.php" method="post">
                <table cellpadding="5">
                    <tr>
                        <td>
                            <b>First name:</b> <font color="red">*</font>
                        </td>
                        <td>
                            <input type="text" name="addcontactfirstname" value="<?php echo $addcontactfirstname; ?>" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Middle name:</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactmiddlename" value="<?php echo $addcontactmiddlename; ?>" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Last name:</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactlastname" value="<?php echo $addcontactlastname; ?>" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Street number:</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactstreetnumber" value="<?php echo $addcontactstreetnumber; ?>" />
                        </td>
                    </tr> 
                    <tr>
                        <td>
                            <b>Street name:</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactstreetname" value="<?php echo $addcontactstreetname; ?>" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Suburb:</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactsuburb" value="<?php echo $addcontactsuburb; ?>" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>City:</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactcity" value="<?php echo $addcontactcity; ?>" />
                        </td>              
                    </tr>
                    <tr>
                        <td>
                            <b>Email (H):</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactemailhome" value="<?php echo $addcontactemailhome; ?>" />
                        </td>
                    </tr>    
                    <tr>
                        <td>
                            <b>Email (W):</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactemailwork" value="<?php echo $addcontactemailwork; ?>" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <font color="blue"><em><b>NOTE:</b> You must enter at least one telephone number.</em><br>  The number must include the area code e.g 065553322!</font>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Phone (H):</b>
                        </td>
                        <td>
                            <input type="text" name="addcontacthomephone" value="<?php echo $addcontacthomephone; ?>" />
                        </td>
                    </tr> 
                    <tr>
                        <td>
                            <b>Mobile:</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactcellphone" value="<?php echo $addcontactcellphone; ?>" />
                        </td>
                    </tr> 
                    <tr>
                        <td>
                            <b>Phone (W):</b>
                        </td>
                        <td>
                            <input type="text" name="addcontactworkphone" value="<?php echo $addcontactworkphone; ?>" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" align="right">
                            <input type="submit" value="Add contact" value="<?php echo $addcontactfirstname; ?>" />
                        </td>
                    </tr>
                </table>
            </form>

            <?php
        }

    }else{

    ?>

    <h1>Add new contact</h1>
    <p><em>Fields marked with <font color="red">*</font> must be completed.</em></p>
    <form action="addcontact.php" method="post">
        <table cellpadding="5">
            <tr>
                <td>
                    <b>First name:</b> <font color="red">*</font>
                </td>
                <td>
                    <input type="text" name="addcontactfirstname" />
                </td>
            </tr>
            <tr>
                <td>
                    <b>Middle name:</b>
                </td>
                <td>
                    <input type="text" name="addcontactmiddlename" />
                </td>
            </tr>
            <tr>
                <td>
                    <b>Last name:</b>
                </td>
                <td>
                    <input type="text" name="addcontactlastname" />
                </td>
            </tr>
            <tr>
                <td>
                    <b>Street number:</b>
                </td>
                <td>
                    <input type="text" name="addcontactstreetnumber" />
                </td>
            </tr> 
            <tr>
                <td>
                    <b>Street name:</b>
                </td>
                <td>
                    <input type="text" name="addcontactstreetname" />
                </td>
            </tr>
            <tr>
                <td>
                    <b>Suburb:</b>
                </td>
                <td>
                    <input type="text" name="addcontactsuburb" />
                </td>
            </tr>
            <tr>
                <td>
                    <b>City:</b>
                </td>
                <td>
                    <input type="text" name="addcontactcity" />
                </td>              
            </tr>
            <tr>
                <td>
                    <b>Email (H):</b>
                </td>
                <td>
                    <input type="text" name="addcontactemailhome" />
                </td>
            </tr>    
            <tr>
                <td>
                    <b>Email (W):</b>
                </td>
                <td>
                    <input type="text" name="addcontactemailwork" />
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <font color="blue"><em><b>NOTE:</b> You must enter at least one telephone number.</em><br>  The number must include the area code e.g 065553322!</font>
                </td>
            </tr>
            <tr>
                <td>
                    <b>Phone (H):</b>
                </td>
                <td>
                    <input type="text" name="addcontacthomephone" />
                </td>
            </tr> 
            <tr>
                <td>
                    <b>Mobile:</b>
                </td>
                <td>
                    <input type="text" name="addcontactcellphone" />
                </td>
            </tr> 
            <tr>
                <td>
                    <b>Phone (W):</b>
                </td>
                <td>
                    <input type="text" name="addcontactworkphone" />
                </td>
            </tr>
            <tr>
                <td colspan="2" align="right">
                    <input type="submit" value="Add contact" />
                </td>
            </tr>
        </table>
    </form>
    <?php
    }
}

if ($pageID == 0){
    return header('Location: ./');
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:07:01.707

来自 PDO 上的文档

> string PDO::lastInsertId ([ string $name = NULL ] ) 返回最后插入行的 ID，或来自序列对象的最后一个值，具体取决于底层驱动程序。例如，PDO_PGSQL() 要求您为 name 参数指定序列对象的名称。
> 
> 笔记：
> 
> 此方法可能不会在不同的 PDO 驱动程序之间返回有意义或一致的结果，因为底层数据库甚至可能不支持自增字段或序列的概念。

如果不查看架构，则无法知道，但您的数据库中可能没有自动增量字段，因此不会返回插入 ID。在这种情况下，您的第二个代码块会失败，但第一个会成功。

# python - “NoneType”对象没有属性“组”

> ID：15080078
> 
> 赞同：22
> 
> 时间：2013-02-26T02:00:23.027
> 
> 标签：python, youtube, download

有人可以帮我处理这段代码吗？我正在尝试制作一个可以播放视频的 python 脚本，我发现这个文件可以下载 Youtube 视频。我不完全确定发生了什么，我无法弄清楚这个错误。

错误：

```
AttributeError: 'NoneType' object has no attribute 'group' 
```

追溯：

```
Traceback (most recent call last):
  File "youtube.py", line 67, in <module>
    videoUrl = getVideoUrl(content)
  File "youtube.py", line 11, in getVideoUrl
    grps = fmtre.group(0).split('&amp;') 
```

代码片段：

（第 66-71 行）

```
content = resp.read()
videoUrl = getVideoUrl(content)

if videoUrl is not None:
    print('Video URL cannot be found')
    exit(1) 
```

（第 9-17 行）

```
def getVideoUrl(content):
    fmtre = re.search('(?<=fmt_url_map=).*', content)
    grps = fmtre.group(0).split('&amp;')
    vurls = urllib2.unquote(grps[0])
    videoUrl = None
    for vurl in vurls.split('|'):
        if vurl.find('itag=5') > 0:
            return vurl
    return None 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-26T02:02:20.843

错误在您的第 11 行，您`re.search`没有返回任何结果，即`None`，然后您尝试调用`fmtre.group`but `fmtre`is `None`，因此`AttributeError`.

你可以试试：

```
def getVideoUrl(content):
    fmtre = re.search('(?<=fmt_url_map=).*', content)
    if fmtre is None:
        return None
    grps = fmtre.group(0).split('&amp;')
    vurls = urllib2.unquote(grps[0])
    videoUrl = None
    for vurl in vurls.split('|'):
        if vurl.find('itag=5') > 0:
            return vurl
    return None 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T02:04:35.703

你`regex`用来匹配url，但是匹配不上，所以结果是`None`

并且`None`类型没有`group`属性

您应该`detect`在结果中添加一些代码

如果它不能匹配规则，它不应该在代码下继续

```
def getVideoUrl(content):
    fmtre = re.search('(?<=fmt_url_map=).*', content)
    if fmtre is None:
        return None         # if fmtre is None, it prove there is no match url, and return None to tell the calling function 
    grps = fmtre.group(0).split('&amp;')
    vurls = urllib2.unquote(grps[0])
    videoUrl = None
    for vurl in vurls.split('|'):
        if vurl.find('itag=5') > 0:
            return vurl
    return None 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-22T11:03:53.717

只是想在这种情况下提到新的[**`walrus`运营商**](https://www.python.org/dev/peps/pep-0572/)，因为这个问题经常被标记为重复，运营商可以很容易地解决这个问题。

* * *

在`Python 3.8`我们需要之前：

```
match = re.search(pattern, string, flags)
if match:
    # do sth. useful here 
```

我们`Python 3.8`可以这样写：

```
if (match := re.search(pattern, string, flags)) is not None:
    # do sth. with match 
```

其他语言以前也有这个（想想`C`or `PHP`），但 imo 它使代码更清晰。

* * *

对于上面的代码，这可能是

```
def getVideoUrl(content):
    if (fmtre := re.search('(?<=fmt_url_map=).*', content)) is None:
        return None
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-13T13:46:59.883

只是想补充一下答案，一组数据应该是一个序列，所以你可以匹配分组数据的每个部分而不会跳过一个数据，因为如果从一个句子中跳过一个单词，我们可能不会参考该句子不再是一组，请参阅下面的示例以获得更多说明，但是不推荐使用 compile 方法。

```
msg = "Malcolm reads lots of books"

#The below code will return an error.

book = re.compile('lots books')
book = re.search(book, msg)
print (book.group(0))

#The below codes works as expected

book = re.compile ('of books')
book = re.search(book, msg)
print (book.group(0))

#Understanding this concept will help in your further 
#researchers. Cheers. 
```

# java - 如何从尚未加载到内存中的 jar 中读取属性文件？

> ID：15080082
> 
> 赞同：0
> 
> 时间：2013-02-26T02:00:53.503
> 
> 标签：java, properties, jar, zip

我想动态加载一个 jar 文件，但是在加载它之前我想在它的根目录中读取一个属性文件。有没有办法在不加载 jar 的情况下从 jar 中读取属性文件？

我试过这个，但后来意识到这是我在加载 jar 后要做的事情。

```
 InputStream inputStream = this.getClass().getClassLoader()
            .getResourceAsStream("jdscfg.properties"); 
```

我是否需要考虑将文件视为 zip 并提取文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:20:45.937

这是我的解决方案

```
public static InputStream getInputStreamFromZip(File f, String fileEntry) {
    try {
        ZipFile zf = new ZipFile(f);
        Enumeration entries = zf.entries();
        while (entries.hasMoreElements()) {
            ZipEntry ze = (ZipEntry) entries.nextElement();
            System.out.println("Read " + ze.getName() + "?");
            if (ze.getName().equalsIgnoreCase(fileEntry)) {
                return zf.getInputStream(ze);
            }
        }
    } catch (IOException e) {
        System.err.println("io error accessing zip file");
    }
    return null;
} 
```

# django - Django Url，详细页面的 Slug

> ID：15080083
> 
> 赞同：13
> 
> 时间：2013-02-26T02:00:57.540
> 
> 标签：django, slug, urlconf

我在配置我的 url 以显示详细视图时遇到问题。单击此链接：`<a href='{% url blog_detail blog.slug %}'>{{ blog.name }}</a>`显示`blog.html`，当我认为它会显示时`blog-detail.html`。没有错误，浏览器栏显示：`example.com/blog/the-slug`，但仍显示来自 的 html `blog.html`，而不是`blog-detail.html`。任何想法为什么？谢谢你的想法。

网址：

```
url(r'^blog/', 'myapp.views.blog', name='blog'),
url(r'^blog/(?P<slug>[\w-]+)/$', 'myapp.views.blog_detail', name='blog_detail'), 
```

意见：

```
def blog(request):
    blog_list = Blog.objects.all()
    return render(request, 'blog.html', {'blog_list':blog_list})

def blog_detail(request, slug):
    blog = get_object_or_404(Blog, slug=slug)
    return render(request, 'blog-detail.html', {'blog':blog}) 
```

* * *

编辑：@omouse 要求的输出

这是单击链接的输出。它与 完全相同`blog.html`，但应该如此`blog-detail.html`。

```
<div id='content-wrapper'>
<section>
<div class='blog-name'><h2><a href='/blog/test/'>Test</a></h2></div>
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a ...

<div class='blog-name'><h2><a href='/blog/second-test/'>Second Test</a></h2></div>
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a ...
</section>
</div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-26T02:41:35.530

网址是问题，第一个将匹配所有内容（`/blog/`, `/blog/test/`, ），您需要它末尾`/blog/awdlawdjaawld`的美元符号*才能*匹配。`$`*`/blog/`*

 *```
url(r'^blog/$', 'myapp.views.blog', name='blog'),
url(r'^blog/(?P<slug>[\w-]+)/$', 'myapp.views.blog_detail', name='blog_detail'), 
```

以上应该可以正常工作。

[这是正则表达式的一个很好的参考](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-08T23:32:24.267

鲁道夫完全正确

停止的`/$`博客捕获所有由 slug 调用的子页面，因此如果您有子页面，您需要添加`/$`到文件夹级别，如下所示：

```
re_path('brands/$', AllBrands.as_view(), name="brands"),
re_path(r'^brands/(?P<slug>[\w-]+)/$', BrandDetail.as_view(), name = 'brandetail'), 
```

这是 django 2.2

没有`/$`品牌之后，slug 页面显示的是品牌列表页面。*

# google-app-engine - GAE 上的 JDO - @Unowned 字段返回为空值

> ID：15080085
> 
> 赞同：2
> 
> 时间：2013-02-26T02:01:17.083
> 
> 标签：google-app-engine, gwt, google-cloud-datastore, jdo

假设我有一个非常简单的经典设置：GAE(1.7.4) + GWT(2.5.0) 应用程序，在本地 Jetty（开发服务器）上运行，使用 JDO 进行持久化。

假设我只有 2 个@PersistenceCapable 类：Person 和 Color。每个人都有一个最喜欢的颜色，但这并不意味着这个人拥有这个颜色 - 许多不同的人可以有相同的最喜欢的颜色。众所周知的颜色数量有限，即使不是任何人最喜欢的颜色也可能存在。

为了对此建模，我应该使用@Unowned 关系——如果我错了，请纠正我：

```
@PersistenceCapable
public class Color { // just the most regular Entity class

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

    @Persistent
    String rgb;

    // getter, setter, no constructor
}

@PersistenceCapable
public class Person {

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

    @Persistent
    String surname;

    @Persistent
    @Unowned // here is the tricky part
    Color color;

    // getters, setters, no constructor
} 
```

通过一些简单的、众所周知的、基于 PersistentManager 的代码，我能够成功地创建和持久化 Color 类的实例。我在 GAE 开发控制台 -> 数据存储查看器中看到它，具有很好的生成密钥和 ID/名称 (13)，以及我分配的 RGB。

使用非常相似的代码，我能够创建 Person 类的实例（在另一个请求中），将预先存在的 Color 分配为他最喜欢的颜色（它预先存在，我通过 pm.getObjectById() 获得它）并将其持久化. 我在 Datastore Viewer 中看到它，我生成的密钥和 ID/名称为 (15)，我分配的姓氏和 color_key_OID 为 (13)。这看起来很有希望。

但是，当我从数据库中取回 Person(15) 时（简单的 pm.getObjectById()，没有事务），它正确地分配了我的姓氏，但有 null 而不是 Color(13)！对 - 数据存储查看器可以正常工作，但我的代码没有。

哦，有问题的代码？“人 p = pm.getObjectById(Person.class, key);”。

（旁注：@Unowned 集合也有同样的问题（数据存储查看器中的值列表很好，但我的代码中的集合字段为空。）我在类路径上的 JDO jar 是“datanucleus-api-jdo-3.1.1\. jar”和“jdo-api-3.0.1.jar”，所以我假设它们支持@Unowned。not-@Unowned 字段没有问题。在持久化或获取时我没有遇到任何异常，只是将纯空值作为字段值。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T21:55:19.793

要么将颜色标记为“急切地获取”

```
@Persistent(defaultFetchGroup="true")
@Unowned
Color color 
```

或像这样定义自己的 fetchgroup：

```
@FetchGroup(name="eager", members={@Persistent(name="color")})
@PersistenceCapable
public class Person { 
```

并在需要时通过指定要获取的组来使用它：

```
PersistenceManager pm = pmf.getPersistenceManager();
pm.getFetchPlan().addGroup("eager"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T13:14:40.870

我在我的一个@Unowned 列表中遇到了同样的问题。我还有另外两个，数组被完美地提取了。

为我解决这个问题的方法是将属性名称更改为更大的名称。在您的情况下，就像将属性名称从“color”更改为更大的名称，例如“myfavoritecolor”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:31:54.240

我有你描述的同样的问题。DataNucleus 如何说您需要描述对象的整个生命周期。在我的情况下，问题已解决，强制在使用 close() 函数关闭 PersistenceManager 之前从 person 对象中获取颜色。

请记住 JDO 使用延迟加载技术来获取对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-09T16:15:02.813

我能够通过将获取组添加到查询而不是持久管理器来解决这个问题。

```
 PersistenceManager pm = PMF.get().getPersistenceManager();
    logger.info("EVENTS FETCH GROUPS : " + pm.getFetchPlan().getGroups());
    /*pm.getFetchPlan().addGroup("eventFetchGroup");
    pm.getFetchPlan().setMaxFetchDepth(2);*/
    Query q = pm.newQuery(Event.class);
    q.getFetchPlan().addGroup("eventFetchGroup");
    logger.info("EVENTS FETCH GROUPS : " +q.getFetchPlan().getGroups());
    q.setFilter("date >= fromDate && date <= toDate");
    q.declareParameters("java.util.Date fromDate, java.util.Date toDate"); 
```

# uml - 我应该把 id 属性放在 UML 类图中吗？

> ID：15080090
> 
> 赞同：5
> 
> 时间：2013-02-26T02:02:09.740
> 
> 标签：uml, class-diagram

我在这里画了一些类图。我想知道我是否应该在 User 表中包含自动递增的属性，例如主键 user_id？我应该在我的课程中包含这些主/外键 id 属性吗？看起来我当然应该，例如，orderId 是 Order 表中订单的关键标识符，即使它“只是”一个任意自动递增的整数......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T05:29:24.097

类图可以在不同的层次上用于不同的目的。三种常见用途是设计、分析和数据建模。

**1-分析**类图显示实体及其关系并为您的问题域建模（不涉及解决方案或技术）

**2- 设计**类图为您的解决方案建模，并且可能包含结构类。它们非常接近您的代码。

**3-数据建模**类图类似于实体关系图（ERD）。它们用于对数据库表进行建模；它们包含主键、外键等。

因此，如果您使用类图对数据库进行建模，答案是**yes**，否则**no**。

您在类中拥有主键字段的唯一原因是您的类是一种对象关系映射器。在这种情况下**yes**，包括 id 属性。

如果您使用的是**Enterprise Architect**，它有一个特殊的类图模板，用于数据建模，具有所有必需的构造型，如主键和外键。

# forms - MS 访问表格 - 介于

> ID：15080092
> 
> 赞同：1
> 
> 时间：2013-02-26T02:02:20.287
> 
> 标签：forms, ms-access

我已经创建了一个表格，需要制作它，以便它在 2 年内搜索。因此，例如，如果用户输入 1980 年和 2000 年，我需要列出这两年之间的所有条目。有什么帮助吗？！ [http://imgur.com/bqdFWFB](http://imgur.com/bqdFWFB)

长度也是如此。提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:08:56.137

当然，

假设您的表单绑定到您正在过滤的日期字段的表，您可以在该表单的标题部分实现您的搜索。

使用设计视图，添加两个未绑定的文本框（将它们的输入掩码设置为日期/时间，以便在需要时使用日期选择器）。我们称它们为 txtDateStart 和 txtDateEnd。

在表单上的 txtDateEnd 控件的更新后，添加一些 vb 代码。

```
 Me.Filter = "[dateField] BETWEEN " & me.txtDateStart & " AND " &  me.txtdateEnd 
    me.filteron = true 
```

这应该就是你所需要的。

# ruby - 为什么匹配和扫描对同一个正则表达式返回不同的结果？

> ID：15080094
> 
> 赞同：-1
> 
> 时间：2013-02-26T02:02:26.883
> 
> 标签：ruby, regex

我尝试了几个在 Ruby 中进行匹配的选项，结果被结果弄糊涂了，因为返回的结果`match`不同`scan`。这是一个例子：

```
s ="C:\Users\rdo\AppData\Local\Temp/ccqZSpeQ.o: In function `main':\r\nmain.c:(.text+0x8): undefined reference to `some_function'"

%r[([\w\.\/]+):(.+)].match(s)
# => #<MatchData "C:Users\rdoAppDataLocalTemp/ccqZSpeQ.o: In function `main':\r" 1:"C" 2:"Users\rdoAppDataLocalTemp/ccqZSpeQ.o: In function `main':\r">

s.scan(/([\w\.\/]+):(.+)/)
# => [["C", "Users\rdoAppDataLocalTemp/ccqZSpeQ.o: In function `main':\r"], ["main.c", "(.text+0x8): undefined reference to `some_function'"]] 
```

我预计`match`会返回类似的结果，`scan`但事实并非如此。谁能解释为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:03:50.427

`match`并且`scan`是完全不同的方法，它们做完全不同的事情并返回完全不同的结果。

`match`告诉您将正则表达式应用于字符串的结果、匹配的内容、它们的开始和长度以及匹配的模式部分。

`scan`将正则表达式应用于字符串并返回所有捕获结果的字符串数组。

# linux - 关于 SSH：是否与默认登录名相关？

> ID：15080095
> 
> 赞同：0
> 
> 时间：2013-02-26T02:02:36.167
> 
> 标签：linux, ssh

`Xshell:\> ssh 61.47.35.220`登录失败，

`Xshell:\> ssh myname@61.47.35.220`登录成功，不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:11:29.007

默认情况下，SSH 使用与当前登录用户对应的用户名的值作为您尝试 ssh 进入的远程主机的用户名。

您需要使用**user@remotehost或使用****-l**选项指定用户名。

另一种方法是使用 $HOME/.ssh/config 文件，您可以在其中指定要使用的用户名，甚至可以设置快捷方式别名，如下所示：

```
Host host-alias
Hostname myhostname
User myloginname 
```

下次运行时：

```
ssh host-alias 
```

它会自动使用**myloginname**作为远程用户。

**如果您运行man ssh_config**，则可以获得有关 .ssh/config 的更多信息

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:06:04.043

基本上，当您省略用户名时，SSH 会使用您当前用户的名称。考虑到您使用的是 Windows（根据`Xshell:\>`提示判断？），它将采用您的 Windows 用户名。如果那个不匹配您需要在服务器上拥有的那个，您将无法登录。您可以通过 2 种方式为 SSH 指定要在远程服务器上使用的用户名：`ssh user@hostname`或`ssh hostname -l user`.**

# makefile - GNU Make - 提取作业参数并将其传递给另一个进程

> ID：15080096
> 
> 赞同：1
> 
> 时间：2013-02-26T02:02:36.033
> 
> 标签：makefile

这就是我在 Makefile 中尝试做的事情：

```
MAKE_381 := $(TOOLS)/bin/make-381

default:
    cd proj && $(MAKE_381) 
```

`MAKE_381`指的是`make v3.81`二进制的版本。这是必需的，因为该`proj`目录包含`Makefiles`仅兼容`v3.81`且没有更新或更新的目录。

我需要让这个 Makefile 始终用于`make v3.81`构建`proj`独立于开发人员在他/她的系统上安装的 GNU 版本。

调用`MAKE_381`有效，但需要注意的是，任何额外的参数（如并行作业的数量）都不会传递给`MAKE_381`. 我找不到任何有关如何提取此信息的文档。

我知道`MAKEFLAGS`GNU make 中的变量，我知道它应该包含从命令行传递给 make 的任何额外参数，但不知何故我发现这个值是空的。

我不希望硬编码传递给的作业数量`MAKE_381`，而是应该根据初始`Makefile`调用传递参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:35:08.623

您所要做的就是在命令行前加上一个`+`字符，因此 make 知道您正在调用另一个子 make 过程：

```
default:
        + cd proj && $(MAKE_381) 
```

如果您的命令`MAKE`直接使用该变量，那么这将是自动的，但由于您使用的是不同的变量名称 ( `MAKE_381`)，因此您必须明确地执行此操作。

# javascript - Javascript RegEx 替换以有条件地删除字符串的一部分

> ID：15080102
> 
> 赞同：2
> 
> 时间：2013-02-26T02:03:00.027
> 
> 标签：javascript, regex

我正在尝试提出一个 Javascript RegEx 命令，它将这些输入转换为以下输出：

```
INPUT                      DESIRED OUTPUT
mydomain.com          -->  mydomain.com
foo.mydomain.com      -->  mydomain.com
dev.mydomain.com      -->  dev.mydomain.com
dev-foo.mydomain.com  -->  dev.mydomain.com 
```

这是规则：

*   从域中删除子域，除非子域以字符“dev”开头
*   如果子域以“dev”开头，则输出“dev.domain.com”
*   保留在域末尾指定的任何端口

我的正则表达式技能让我失望。这是我到目前为止所拥有的：

```
'mydomain.com'.replace(/^(dev)?(-.*)?(mydomain.com)/,'$1.$3'); 
// .mydomain.com

'foo.mydomain.com'.replace(/^(dev)?(-.*)?(mydomain.com)/,'$1.$3'); 
// foo.mydomain.com

'dev-foo.mydomain.com'.replace(/^(dev)?(-.*)?(mydomain.com)/,'$1.$3'); 
// dev.mydomain.com

'dev.mydomain.com'.replace(/^(dev)?(-.*)?(mydomain.com)/,'$1.$3'); 
// dev.mydomain.com 
```

前两个失败，后两个工作。有什么建议么？

这是有效的javascript，但我希望将它组合成一个正则表达式替换命令。请注意，我还想保留在 dmain 末尾指定的任何端口。

```
var getHost = function () {
  var host = window.location.host;
  if (host.substring(0,3) === 'dev') {
    return host.replace(/^(dev)?(-.*)?(mydomain\.com.*)/,'$1.$3');
  }
  else {
    return 'mydomain.com';
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T02:50:45.423

只是为了表明可以在单个正则表达式中执行：

```
'string'.replace(/(?:(^dev).*(\.)|^.*)(mydomain\.com)/, '$1$2$3'); 
```

工作示例：http: [//jsfiddle.net/gz2tX/](http://jsfiddle.net/gz2tX/)

这是细分：它要么匹配`dev`*something*`.`，要么匹配*任何东西*。如果它与包含“dev”的模式匹配，`$1`则将包含“dev”并`$2`包含“.”。如果它与包含“dev”的模式不匹配，则为`$1`空`$2`。（`$3`在任何一种情况下都将包含“mydomain.com”。）

所以这是可能的，但它很复杂。

我的建议是做一些比这更具可读性和可维护性的事情。在我看来，花在弄清楚这一行上的时间和痛苦不值得节省一两行代码长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T02:26:27.417

您可以在替换中使用函数在 JS 中通过更多控制来修改值。

```
var value = "dev-foo.mydomain.com".replace(/^(dev)?[^\.]+\./, function (match, p1) {
    return p1 ? p1 + '.' : '';
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:10:46.613

很难说出你想要什么...

但是...根据您的示例输入/输出，您可以执行以下操作：

1.  在第一个周期拆分输入。
2.  如果第一部分包含单词“dev”，则将其替换为“dev”。
3.  如果第一部分不**包含**单词 dev，请将其删除。

*如果这实际上*是您想要的，则不需要正则表达式：

```
function trimInput(s) {
    var n = s.indexOf('.');
    if (n === -1) {
        return s;
    }
    var head = s.substring(0, n);
    if (head.indexOf("dev") !== -1) {
        return "dev." + s.substring(n);
    }
    else {
        return s.substring(n);
    }
} 
```

如果这**不是**您想要的，请更新您的问题以指定您想要的内容。

# html - 溢出：可见在 IE 7,8 中不起作用

> ID：15080107
> 
> 赞同：0
> 
> 时间：2013-02-26T02:03:22.717
> 
> 标签：html, css

我无法让 IE 将图像溢出到 . 我将图像的上边距设置为负值，并将溢出设置为可见：

```
#th_id img {
    margin-top: -25px;
}

#th_id {
    overflow: visible;
} 
```

我还尝试将 tr、tbody、table 和 table 的 div 容器设置为溢出：可见，但我仍然看到截断的图像，而不是溢出到表格边框上的图像。Firefox 似乎显示正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:53:15.070

我让它在 IE 7 中工作。

> 尝试添加位置：相对。
> 我的代码看起来像这样。

```
#th_id img {
    position: relative;
    margin-top: -25px;
}

#th_id {
    position: relative;
    overflow: visible;
} 
```

> 希望能帮助到你..

# c++ - 如果第二个参数为“0”，C++ 中的 strcmp 是否会检查字符串中的每个值？

> ID：15080109
> 
> 赞同：-2
> 
> 时间：2013-02-26T02:03:28.170
> 
> 标签：c++

如果我的字符串`input`是`1234567890`，并且我执行以下操作：

```
(strcmp(input,"0")) 
```

`1`如果`0`我的字符数组中有 a`1234567890`和 0 如果没有，那会返回吗？

我知道我可以对此进行测试，并且我做到了，答案是肯定的，但我不确定为什么而且我找不到关于 strcmp 的绝对细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:05:47.107

No.`strcmp`如果两个字符串相同则返回 0，否则返回非 0。看起来你甚至没有费心去谷歌！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:06:11.393

不，它比较两个字符串。

`strcmp()`仅当两个字符串相同时才返回 0。否则，返回值会说明第一个不匹配的字符。

在您的情况下，这与“1”和“0”之间的比较有关。另一个字符串末尾有一个“0”没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T02:13:12.327

> 如果第二个参数为“0”，C++ 中的 strcmp 是否检查字符串中的每个值</p>

不，它不是，`strcmp()`是一个字符串比较函数，它检查一个字符串是否等于另一个。如果是，则返回`0`如果一个字符串通常大于另一个字符串，则返回`1`，`-1`否则返回。

要检查它*是否*存在，我建议您为此编写自己的函数。

```
//return 1 if if the character exists, 0 otherwise
int DoesCharExist(const char *pData, char character)
{
   char *data = pData;
   while(*data++){
     if(*data == character) return 1;
   } 
   return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:12:45.710

`strcmp()`通常会检查从第一个字符到最后一个字符的所有字符，或者直到两个字符串不匹配。

的确切内部实现`strcmp()`，如果您要问的话，语言标准中没有指定。理论上，它可以找到两个字符串的长度，如果它们相等，则使用大于的单位比较字符串`char`，甚至反向进行。

`strcmp()`比较字符串，而不是在另一个中搜索。如果字符串相同，则返回 0。否则，它返回正值或负值，表示第一个不匹配字符之间的差异符号（字符的值被视为无符号）。

# java - 我应该将哪种 HTTP 方法用于我的 REST 服务方法进行 READ & WRITE？

> ID：15080112
> 
> 赞同：0
> 
> 时间：2013-02-26T02:03:55.450
> 
> 标签：java, web-services, rest, restful-architecture

根据 RESTful 服务指南，我们应该使用 GET 读取资源，使用 POST 创建新资源，使用 DELETE 删除现有资源等。

但是假设我正在开发一个 RESTFul 网络服务，比如 OrderProcessing。在 placeOrder(Order) 方法中，我必须读取一些表格，如库存、产品详细信息等，将一些新行插入到订单和订单详细信息等表格中，并进行更新，如降低库存水平等。那么我应该为 placeOrder 使用什么 HTTP 方法（ ） 方法。

在非常高的层次上，我们正在创建一个新资源（订单），所以我认为 POST 是正确的 HTTP 方法。

但一般来说，在同一方法中读取/创建/更新数据的方法应该使用什么动词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:22:05.097

我同意你认为 POST 在这里是合适的想法。即使您正在执行多项操作，您也可以将其视为您的订单资源的一次创建。至于其他操作，我会将它们视为您不会向服务使用者公开的内部细节。

编辑 - 更进一步，假设您已将 Order 定义为您的资源，并且 POST 正文包含此资源的表示。为了完全 RESTful，如果 POST 导致创建新订单，则 HTTP 201 是适当的响应代码。有关详细信息，请参阅[http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)的第 9.5 节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:35:51.247

绝对是 POST。出于显而易见的原因，您可以排除 GET 和 DELETE，并且您只想将 PUT 用于幂等操作。由于您正在减少库存，因此您可以安全地排除 PUT 作为一个可行的选项。

# javascript - 在站点上单击三个链接后提示用户？

> ID：15080113
> 
> 赞同：0
> 
> 时间：2013-02-26T02:03:56.523
> 
> 标签：javascript, user-interface, client-side, server-side, user-experience

我想在用户点击网站某个部分的 3 个以上链接时提示他们。我想知道解决这个问题的最佳方法。

我可以使用严格的客户端 Javascript 来做到这一点吗？或者这需要一些服务器端代码吗？

我已经在几个房地产网站上看到过这种方法，并想尝试一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:11:27.593

```
function UpdateCount() {
  if (localStorage.clickcount) {
    if (Number(localStorage.clickcount) > 3) {alert();}
    localStorage.clickcount = Number(localStorage.clickcount) + 1;
  }
  else {
    localStorage.clickcount=1;
  }
} 
```

然后为链接上的 onclick 事件调用 UpdateCount()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:38:32.237

基于 CJ 答案中的代码的扩展示例。假设您有三个文件和其中的相互链接：

```
<!-- test1.htm -->
<a href="test2.htm">Test2</a>
<a href="test3.htm">Test3</a>

<!-- test2.htm -->
<a href="test1.htm">Test1</a>
<a href="test3.htm">Test3</a>  

<!-- test3.htm -->
<a href="test1.htm">Test1</a>
<a href="test2.htm">Test2</a> 
```

在每个文件中，您还包含了负责计算这些链接的点击次数的相同脚本。脚本内容如下：

```
var links = document.getElementsByTagName('a');

for(var i = 0, ii = links.length; i < ii; i++) {
   links[i].addEventListener('click',ClickCounter,false);
}
function ClickCounter(e) {
  if(localStorage.clickCount) {
    if(+localStorage.clickCount === 3) {
      alert("Three links visited already!");
      e.preventDefault();
    } else {
      localStorage.clickCount = +localStorage.clickCount + 1;
    }
  } else {
    localStorage.clickCount = 1;
  }
} 
```

这将允许用户访问三个链接。之后，用户会收到一个关于已经访问过三个页面的警告框，并且`e.preventDefault()`会将用户保持在当前页面上。

当然，用户可以通过简单地删除适当的 localStorage 条目来绕过这种限制，因此，如果您的目标是进行某种阻塞或限制，则应该在服务器端进行，以防止用户轻易篡改。但是，如果您的目标是做一些“无害”的事情（例如，用户通常认为该功能是有益的），那么在客户端完成整个事情可能就可以了。

# android - Android中的自定义键盘无法正确处理后退键

> ID：15080116
> 
> 赞同：1
> 
> 时间：2013-02-26T02:04:12.123
> 
> 标签：android, android-softkeyboard

我在 v4 支持片段中创建了一个软键盘，但我认为我做错了。键盘显示正常，但我无法隐藏它（后退按钮关闭程序）。否则它工作正常。我希望硬件后退按钮能够仅关闭键盘。

```
myKeyboard = new Keyboard(getActivity(), R.xml.my_keyboard);
myKeyboardView = (MyKeyboardView) getActivity().findViewById(R.id.my_keyboard_view);
myKeyboardView.setKeyboard(myKeyboard);
// this is a custom class to receive soft keyboard events
// just passes on the events to the Activity as normal
keyboardView.setOnKeyboardActionListener(new MyKeyboardListener(getActivity())); 
```

为了让键盘显示出来，我`OnClickListener`在目标`EditText`上使用了动画并将 设置`Visibility`为`VISIBLE`。

我应该使用这种方法吗？我寻找了一种将键盘放在后堆栈上的方法，但这并不明显。

# django - 如何在 Django 中使用 Pillow

> ID：15080121
> 
> 赞同：21
> 
> 时间：2013-02-26T02:04:54.900
> 
> 标签：django, django-admin, python-imaging-library, django-models, pillow

我安装了[Pillow](https://pypi.python.org/pypi/Pillow "枕头")，现在想在我的 Django 站点上使用它来允许通过我的管理页面上传图像。请参阅上一个[问题](https://stackoverflow.com/questions/15079105/uploading-an-image-through-admin-in-django)。

我需要在我的设置文件或其他地方进行哪些更改才能让 Django 识别 Pillow 并允许 ImageField 正确上传图像？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-03T15:56:23.763

问题是导入现在与 Pillow 和 PIL 的工作方式略有不同。此处描述了差异：http: [//pillow.readthedocs.org/en/latest/porting-pil-to-pillow.html](http://pillow.readthedocs.org/en/latest/porting-pil-to-pillow.html)

通过这张票（ [https://code.djangoproject.com/ticket/19934），Django](https://code.djangoproject.com/ticket/19934)现在也已更改为更喜欢 Pillow 而不是 PIL

此提交存在于新的 Django 1.6a1 版本中，因此新行为将存在于 Django 1.6 版本中。然而，目前看来，您可以使用一个名为 Pillow-PIL 的新库（最初于 2013 年 5 月 20 日发布），它将提供一个兼容层。这可以通过 pip 轻松安装：`pip install --pre Pillow-PIL`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-13T16:02:44.657

首先，安装枕头（最好激活 virtualenv）：

```
pip install pillow 
```

你应该在 Django 项目中导入它：

```
from PIL import Image 
```

之后，您无需更改设置或其他任何内容。所有模块都应该工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-14T04:39:58.160

在绘制绘图的 Python 模块中，我简单地输入以下内容。

```
import PIL.Image as Image 
```

ImageDraw 和 ImageFont 也是如此。这些是常规 PIP 安装后唯一需要的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:48:08.177

您不必对 settings.py 进行任何更改或以其他方式使用 Pillow 而不是 PIL。它是一个替代品，只需在您的 PYTHONPATH 上可用。

# haskell - Haskell中的运算符优先级

> ID：15080128
> 
> 赞同：7
> 
> 时间：2013-02-26T02:05:09.627
> 
> 标签：haskell

我对 Haskell 中运算符优先级的规则感到困惑。
更具体地说，为什么会这样：

```
*Main> 2 * 3 `mod` 2
0 
```

与此不同？

```
*Main> 2 * mod 3 2
2 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T02:12:18.337

函数调用绑定最紧密，所以

```
2 * mod 3 2 
```

是相同的

```
2 * (mod 3 2) 
```

请记住，`mod`这里没有用作运算符，因为没有反引号。

现在，当`mod`以中缀形式使用时，它的优先级为 7，它`(*)`也有。因为它们具有相同的优先级，并且是左结合的，所以它们只是从左到右解析：

```
(2 * 3) `mod` 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T02:09:49.577

2*3 = 6 然后`mod 2`= 3 没有余数......`6 mod 2 = 0`你的答案也是如此。在第二种情况下，您正在执行 2 *，其结果`mod 3 2`是`2 * 1 = 2`. 因此，您的答案是`2`……。您的运算符优先级保持不变，您只是对其进行了排列，因此相应地表达了答案。

# c++ - Win32 API 窗口不会打开

> ID：15080129
> 
> 赞同：0
> 
> 时间：2013-02-26T02:05:10.727
> 
> 标签：c++, windows, winapi, window

好的，所以我已经花时间学习了与打开窗口有关的 Win32 API，而我最后想出的代码我认为可以工作，但没有。我注册了窗口类，做了我必须做的所有事情，但是当我运行它时，什么都没有发生......如果有人能指出我做错了什么/遗漏了什么，那将是一个很大的帮助。

```
#include <stdlib.h>
#include <iostream>
#include <Windows.h>
#pragma comment (lib, "wsock32.lib")
#define WNDCLASSNAME "wndclass"

bool quit = false;

LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch(msg)
    {
        case WM_CLOSE:
            DestroyWindow(hwnd);
            break;

        case WM_DESTROY:
            PostQuitMessage(0);
            break;

        default:
            return DefWindowProc(hwnd, msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hinstance, HINSTANCE hprevinstance, LPSTR lpcmdline, int nshowcmd)
{
    WNDCLASSEX WCE;
    WCE.cbSize = sizeof(WNDCLASSEX);
    WCE.style = CS_HREDRAW|CS_VREDRAW|CS_OWNDC|CS_DBLCLKS;
    WCE.lpfnWndProc = WndProc;
    WCE.cbClsExtra = 0;
    WCE.cbWndExtra = 0;
    WCE.hInstance = hinstance;
    WCE.hIcon = NULL;//LoadImage()
    WCE.hCursor = NULL;//LoadCursor(NULL, IDC_CROSS);
    WCE.hbrBackground = (HBRUSH) COLOR_BACKGROUND;
    WCE.lpszMenuName = NULL;
    WCE.lpszClassName = "KyleWindow";
    WCE.hIconSm = NULL;

    RegisterClassEx(&WCE);

    HWND WindowHandle;

    WindowHandle = CreateWindowEx(WS_OVERLAPPEDWINDOW, "KyleWindow", "Xerus", WS_OVERLAPPEDWINDOW, 0, 0, 500, 500, NULL, NULL, hinstance, NULL);

    ShowWindow(WindowHandle, SW_SHOWNORMAL);
    UpdateWindow(WindowHandle);

    std::cout<<"'Opened' Window"<<std::endl;

    MSG msg;

    while(!quit)
    {
        if(PeekMessage(&msg, NULL, NULL, NULL, PM_REMOVE))
        {
            if(msg.message == WM_QUIT)
                quit = true;
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
    }
    return msg.lParam;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:00:17.213

用作函数`WS_EX_OVERLAPPEDWINDOW`的第一个参数`CreateWindowEx`（而不是`WS_OVERLAPPEDWINDOW`，它不是有效的*扩展*窗口样式）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-26T08:44:16.370

而不是使用`WNDCLASSEX`使用`WNDCLASS`

改变：

`WNDCLASSEX WCE;`到`WNDCLASS WCE;`

删除行：

```
WCE.cbSize = sizeof(WNDCLASSEX); 
```

改变：

`RegisterClassEx(&WCE);`到`RegisterClass(&WCE);`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-05-09T01:28:09.593

函数 int WINAPI WinMain 必须在函数 LRESULT CALLBACK WndProc 之前。编译器按顺序读取。

# c++ - C++ 重载：operator+ 用于按元素添加矩阵

> ID：15080135
> 
> 赞同：1
> 
> 时间：2013-02-26T02:05:49.567
> 
> 标签：c++, matrix, operators, operator-overloading, addition

我正在尝试为 Matrix 程序重载“+”运算符。这是我的代码，对我来说看起来不错。但是当我在我的主函数中添加两个矩阵时，什么也没有发生。有人可以帮忙吗？谢谢 ：）

顺便提一句：

- 程序编译并运行得很好，直到它应该添加到矩阵中。

- 我认为在我的 operator+() 函数的实现中存在问题，因为我已将代码复制到 add(Mtrx,Mtrx) 函数中进行测试，但它也不起作用。

//Mtrx.h

```
#ifndef MTRX_H_
#define MTRX_H_
#include <iostream>
#include <string>

using namespace std;
using std::ostream;

class Mtrx {
    int lines,cols;
    float **p;
public:

    Mtrx();
    Mtrx(int,int);
    int getLines();
    int getCols();
    float getElement(int,int);
    void setLines(int);
    void setCols(int);
    void setElement(int,int,float);

    Mtrx operator+(Mtrx&);

        ~Mtrx();
};

ostream& operator<<(ostream& os, Mtrx& m);

#endif /* MTRX_H_ */ 
```

//mtrx.cpp

```
//...
//...
Mtrx::~Mtrx(){
delete p;
p = NULL;
}

Mtrx Mtrx::operator+(Mtrx& m){
if(this->getLines() == m.getLines() && this->getCols() == m.getCols()){
    Mtrx res(getLines(),getCols());

    for (int i = 1; i <= this->getLines(); i++){
        for(int j = 1; j <= this->getCols(); j++){
            res.setElement(i,j,(this->getElement(i,j)+m.getElement(i,j)));
        }
    }

    return res;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:10:13.600

您有一个析构函数，但缺少一个复制构造函数和一个赋值运算符。根据经验，如果您拥有其中任何一个，则应该拥有所有这些。

```
Mtrx(const Mtrx&);
Mtrx& operator=(const Mtrx&);
~Mtrx(); 
```

如果没有显式的复制构造函数，编译器将为您生成一个。但是，它并不聪明，因此它不知道`p`在复制矩阵时分配新内存。它只是复制指针，导致原始矩阵和副本都引用相同的内存。当他们的析构函数运行时，他们两个都会调用`delete p`，这对第二个人来说是个坏消息。

这正是`operator+`返回和`res`复制时发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:14:05.097

检查你的牙套。您要么缺少一个，要么您的 if(false) 控制路径没有返回。

```
Mtrx Mtrx::operator+(Mtrx& m){
if(this->getLines() == m.getLines() && this->getCols() == m.getCols()){
    Mtrx res(getLines(),getCols());

    for (int i = 1; i <= this->getLines(); i++){
        for(int j = 1; j <= this->getCols(); j++){
            res.setElement(i,j,(this->getElement(i,j)+m.getElement(i,j)));
        }
    }

    return res;
} 
```

# multithreading - NSOperationQueue 调用 performSelectorOnMainThread 使应用程序崩溃

> ID：15080139
> 
> 赞同：0
> 
> 时间：2013-02-26T02:05:54.450
> 
> 标签：multithreading, memory, crash, nsthread

我正在使用以下代码从服务器下载一些图片，

```
-(void)viewDidLoad
{
     for (int i = 0 ; i < picsNames.count ; i++) {

         UIImageView *imageView = [[UIImageView alloc] initWithFrame: CGRectMake(i * 320.0, 0.0, 320.0, self.view.frame.size.height)];
         imageView.backgroundColor = [UIColor blackColor];
         imageView.tag = IMAGE_VIEWS_TAG + i;

         [scrollView addSubview:imageView];

         //getting the image
         NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(getImage:) object:imageView];
         [queue addOperation:operation];
     }
}

-(void)getImage:(UIImageView *)imageView
{
     //getting the "image" from the server .....
     [self performSelectorOnMainThread:@selector(loadPic:) withObject:[NSArray arrayWithObjects:imageView, image,nil] waitUntilDone:YES];
}

-(void)loadPic:(NSArray *)imageAndImageViewArray
{
    //loading the image to imageview
    UIImageView *imageView = (UIImageView *)[imageAndImageViewArray objectAtIndex:0];
    imageView.image = (UIImage *)[imageAndImageViewArray objectAtIndex:1];
} 
```

加载一些图片后，以下行会发出内存警告并使应用程序崩溃。

```
[self performSelectorOnMainThread:@selector(loadPic:) withObject:[NSArray arrayWithObjects:imageView, image,nil] waitUntilDone:YES]; 
```

我不知道如何解决这个问题。谢谢大家 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T23:58:02.063

因此，在花了太多时间之后，我意识到错误是由于同时分配了太多 UIImage 对象而没有主 NSTread 的 NSQueue。

所以只是改为代码，所以我当时只有 10 个 UIImage 对象。

# python - 通过 .tsv 文件创建字典并消除值低于特定数字的键

> ID：15080143
> 
> 赞同：1
> 
> 时间：2013-02-26T02:06:22.187
> 
> 标签：python, csv, tsv

我得到了一个名为“population.tsv”的 .tsv 文件，它告诉了许多城市的人口。我必须创建一个字典，其中城市是关键，人口是它的值。创建字典后，我必须消除人口少于 10,000 的城市。怎么了？

```
def Dictionary():
    d={}
    with open("population.tsv") as f:
        for line in f:
            (key, value)=line.split()
            d[int(key)]=val
    return {}
list=Dictionary()
print(list) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:09:46.387

你的程序有两个问题

1.  它返回一个空字典`{}`而不是您创建的字典
2.  你还没有加入过滤功能`I have to eliminate the cities which have less than 10,000 people.`
3.  您不应该将变量命名为内置

固定代码

```
def Dictionary():
    d={}
    with open("population.tsv") as f:
        for line in f:
            (key, value)=line.split()
            key = int(val)
            #I have to eliminate the cities which have less than 10,000 people
            if key < 10000: 
                d[int(key)]=val
    #return {}
    #You want to return the created dictionary
    return d
#list=Dictionary()
# You do not wan't to name a variable to a built-in
lst = Dictionary()

print(lst) 
```

请注意，您还可以`dict`通过传递生成器表达式或直接的 dict 理解来使用内置函数（如果使用 Py 2.7）

```
def Dictionary():
    with open("population.tsv") as f:
        {k: v for k,v in (map(int, line.split()) for line in f) if k < 10000}
        #If using Py < Py 2.7
        #dict((k, v) for k,v in (map(int, line.split()) for line in f) if k < 10000) 
```

# css - 在 Yii 单选按钮单击中显示/隐藏 div

> ID：15080144
> 
> 赞同：0
> 
> 时间：2013-02-26T02:06:24.253
> 
> 标签：css, yii, radio-button, radiobuttonlist, yii-events

我试图根据 Yii 表单中的单选按钮单击来显示/隐藏 div。但是 onclick 事件对我不起作用。请帮我解决这个问题，因为我是 Yii 的新手。我正在将此代码用于单选按钮

```
 <?php echo $form->radioButtonList($model,'service_type',array(
                    '0'=>'Yes',
                    '1'=>'No',
                    'separator'=>'',
                    'onclick'=>"setVisible('Yes_box',true);setVisible('No_box', false)"));     ?>

  <div id="Yes_box" style="visibility: hidden"> contents of Yes type </div>
   <div id="No_box" style="visibility: hidden"> contents of No type </div> 
```

这是我的脚本：

```
<script>
  $(document).ready(function () {
    $("input[name$='type']").click(function () {
      var value = $(this).val();
      if (value == 'Yes') {
        $("#Yes_box").show();
        $("#No_box").hide();
      } else if (value == 'No') {
        $("#No_box").show();
        $("#Yes_box").hide();
      }
    });
    $("#Yes_box").show();
    $("#No_box").hide();
  });
</script> 
```

当我使用此代码时，只有最后一个条件有效，即 Yes_box 正在显示。我认为 onclick 值没有在这里传递。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:33:46.497

我认为您的代码编写正确。只有很少的变化/可能会起作用。

我已经编辑了你的代码。检查一下：

```
<script>
  $(document).ready(function () {
    $("input[name=type]").click(function () {
      var value = $(this).val();
      if (value == 'Yes') {
        $("#Yes_box").show();
        $("#No_box").hide();
      } else if (value == 'No') {
        $("#No_box").show();
        $("#Yes_box").hide();
      }
    });
  });
</script> 
```

`NOTE :-`如果您能够将数据放入 value 变量中，还请检查警报。

# jquery - CORS Header Access-Control-Allow-Origin 通配符在连续后失败

> ID：15080148
> 
> 赞同：3
> 
> 时间：2013-02-26T02:06:58.303
> 
> 标签：jquery, wildcard, cors

我有两个端点，一个 www 和一个 api。API 驱动backbone.js 集合，到目前为止运行顺利。一个新的 RPC 端点未能通过 Access-Control-Allow-Origin CORS 检查，但我不知道如何调试。来自网站的几个预检 OPTIONS 调用成功地返回了结果集，但是这个新的调用完全失败了。通过单击按钮手动触发失败的新 RPC。它不存在于 iframe 或任何具有奇怪安全范围的容器中。所有这些都发生在同一个网页中。

我对某些集合有 3 次调用，请求/响应如下：

**要求**：

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:accept, authorization, origin
Access-Control-Request-Method:GET 
```

**回应**：

```
Access-Control-Allow-Headers:X-Requested-With,Authorization,Accept,Origin,Content-Type
Access-Control-Allow-Methods:GET,POST,PUT,DELETE,OPTIONS
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Length:2
Content-Type:text/plain
Date:Tue, 26 Feb 2013 01:53:33 GMT
Server:nginx/1.1.19
X-Frame-Options:DENY
X-Powered-By:Express 
```

^^ 胜利！所有集合都在填充。我可以不受惩罚地在这些集合中获取/发布/放置/删除模型。

失败的呼叫：

## 选项（预检）

**要求**：

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:accept, origin, authorization, content-type
Access-Control-Request-Method:GET
Cache-Control:no-cache
Connection:keep-alive
Host:api.bip.io
Origin:https://bip.io
Pragma:no-cache
Referer:https://bip.io/dash/account
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko Chrome/24.0.1312.52 Safari/537.17 
```

**回应**：

```
Access-Control-Allow-Headers:X-Requested-With,Authorization,Accept,Origin,Content-Type
Access-Control-Allow-Methods:GET,POST,PUT,DELETE,OPTIONS
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Length:2
Content-Type:text/plain
Date:Tue, 26 Feb 2013 01:55:26 GMT
Server:nginx/1.1.19
X-Frame-Options:DENY
X-Powered-By:Express 
```

## 获取请求

```
GET /rpc/domain/confirm/55e648b5-1098-41e8-9d76-bd020ebe6d37

Request URL:https://api.bip.io/rpc/domain/confirm/55e648b5-1098-41e8-9d76-bd020ebe6d37
Accept:application/json, text/javascript, */*; q=0.01
Authorization:Basic {XX-OBFUSCATED}
Cache-Control:no-cache
Content-Type:application/json
Origin:https://bip.io
Pragma:no-cache
Referer:https://bip.io/dash/account
User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.52 Safari/537.17 
```

最后一个请求的 Chrome 错误是：

```
XMLHttpRequest cannot load https://api.bip.io/rpc/domain/confirm/55e648b5-1098-41e8-9d76-bd020ebe6d37\. 
Origin https://bip.io is not allowed by Access-Control-Allow-Origin. 
```

所有这些调用都通过这个 jQuery v1.8.2 方法汇集：

```
//  request handler
    _request : function(payload, methodAPI, methodHTTP, onSuccess, onFail) {
        var self = this;
        var payload = null == payload ? payload : JSON.stringify(payload);

        var reqStruct = {
            type: methodHTTP,
            contentType: 'application/json',
            dataType: 'json',
            url: methodAPI,
            success: function(resData, status, xhr) {
                if (undefined != onSuccess) {
                    onSuccess(resData, payload);
                }
            },
            error: function(xhr, status, errText) {
                if (undefined !== onFail) {
                    onFail(xhr.status, status, errText, payload);
                }
            }
        };

        if (null !== payload) {
            reqStruct.data = payload;
        }

        $.ajax(reqStruct);
    } 
```

怎么调试？？谢谢！

# c - 动态分配指向 C 中结构的指针数组

> ID：15080152
> 
> 赞同：1
> 
> 时间：2013-02-26T02:07:08.340
> 
> 标签：c, arrays, pointers, allocation, structure

我在这里有这个结构：

```
typedef struct _open {
    int x;
    struct _open *next;
} *NODE; 
```

在我的 main 函数中，我声明了这个指针：

```
NODE open = initOpen(size); 
```

这是 initOpen 函数：

```
NODE initOpen(int size) {
    return (NODE)malloc(sizeof(struct _open)*size);
} 
```

我这个对吗？我可以在主函数中访问我的数组，例如： open[0] 到 open[9] 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:28:08.980

首先，你做*动态分配数组*的方式是错误的。
我不确定您是否真的想要您写的东西，即*链表*，或者您所说的东西，即*动态分配的数组*。

下面是你应该如何做*动态分配的数组*。希望能帮助到你。通过这样做，您可以在内存不足之前将任意数量的整数添加到数组中。您可以使用数组表示法访问数组，但首先使用指针：**darray->array[0]**

但是，无法使用此语法访问您的*链接列表。*

```
#include <stdio.h>
#include <stdlib.h>

#define INITSIZE 8

typedef struct dyarr{
    int num;
    int max;
    int *array;
}arr;

arr* makeArr();
void add( arr*, int );

int main( int argc, char const *argv[] ){
    int t;
    arr* darray = makeArr();
    while( scanf( "%d", &t ) != EOF ){
        add( darray, t );
    }
    int i;
    for( i = 0; i<darray->num; i++ ){
        printf( "%d\n", darray->array[i] );
    }
    getchar();
    return 0;
}

arr* makeArr(){
    arr* A = malloc( sizeof( arr ) );
    A->max = MAXSIZE;
    A->num = 0;
    A->array = malloc( sizeof( int )*A->max );
    return A;
}

void add( arr* a, int i ){
    if( a->num == a->max ){
        a->max *= 2;
        a->array = realloc( a->array, a->max );
    }
    a->array[a->num++] = i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:15:40.143

首先，您应该尊重一些约定：

```
typedef struct node {
    int x;
    struct node *next;
} *nodePtr; 
```

二、参数 size 的用途是什么？根据我的说法，分配新 nodePtr 的正确方法是：

```
nodePtr initNodePtr() {
    return (nodePtr)malloc(sizeof(struct node));
} 
```

也不要忘记在使用后释放内存：

```
nodePtr node = initNodePtr();
...
...
free(node); //should be wrapped in a function to respect design. 
```

要创建结构数组，您应该执行以下操作：

```
typedef struct {
    int x;
    node* next;
} node;

int main() {
    node* nodeArray = (node*)malloc(sizeof(node)*50); // 50 = size of your array
    ...
    // do whatever you want
    ...
    free(nodeArray);   
} 
```

未测试，如有错误请告知。

# iphone - 基于 TabBar 的应用程序中的注销问题

> ID：15080153
> 
> 赞同：1
> 
> 时间：2013-02-26T02:07:33.670
> 
> 标签：iphone, ios, objective-c, uitabbarcontroller, uitabbar

这是一个很常见的问题，但是在尝试了很多解决问题之后，我最终决定将它发布在 StackOverFlow.com 上

我有一个基于标签栏的应用程序。标签栏在 AppDelegate.m 中加载如下：

```
 self.tabBarController.viewControllers = @[viewController1, viewController2 , viewController3 , viewController4 , viewController5]; 
```

我的第 5 个选项卡有一个注销按钮。当用户单击注销时，我想清除/重置整个应用程序并转到登录页面，这是一个 modalviewcontroller。

我在注销时尝试了以下操作：

```
 NSMutableArray * vcs = [NSMutableArray
                        arrayWithArray:[self.tabBarController viewControllers]];
[vcs removeAllObjects ];//ObjectAtIndex:4];
[self.tabBarController setViewControllers:vcs]; 
```

这会从标签栏中删除所有视图。但是当我再次登录时，什么都没有显示。我想显示我的主屏幕，即默认选择的选项卡项目 1。

我已经读过再次手动调用 didFinishLaunchingWithOptions 不是一个好习惯。

有没有办法可以重置所有标签栏并重新初始化它们？

这将帮助我解决与这种情况相关的另一个问题。当用户注销并再次登录，并且视图控制器没有被清除时，登录后再次显示注销页面。而不是主视图控制器。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:31:00.260

如果你真的想重新开始，你应该放一个方法，让我们在应用程序委托中调用它 -(void)setupTabBarController，并在启动时从 application:didFinishLaunchingWithOptions: 调用它。稍后当您想要重置时，请从登录页面再次调用该方法。此方法将在其中创建所有标签栏控制器的视图控制器，并将标签栏控制器设置为窗口的根视图控制器。

但是，您是否需要这样做并不是很清楚，这取决于所有这些控制器在注销时处于什么状态。您的注销页面再次显示的问题可能会以更简单的方式解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:20:00.203

我知道，这并不是您问题的真正答案，但这也可能对您有所帮助（因为我无法对帖子发表评论，但我必须像这样发布它:)）。

当用户在我的标签栏应用程序中注销时，我在“重置”导航堆栈时遇到了一些问题。一开始，我将我的标签栏控制器作为根控制器，并以模态方式显示登录屏幕，但是一旦用户注销，它就会安静地硬重置导航堆栈。我最终做了什么，它对我来说很安静，我将登录控制器设置为根控制器，登录后以模态方式显示选项卡导航。在注销时，我只是再次关闭标签栏控制器 - 一切都从头开始。也许你可以试试这个，看看它是否更容易处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:28:09.790

好吧，什么都没有显示，因为您删除了视图并且从未将它们添加回。

注销后无需从选项卡栏中删除视图控制器。您可以编写一个方法来重置每个视图控制器中的所有数据，然后将选定的选项卡设置为您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T04:17:12.150

您应该在第二个视图控制器上添加 tabBar 控制器。主视图控制器显示主屏幕。当您导航第二个视图控制器时，您会在此处添加 tabBar。

# ruby - 让厨师食谱只运行一次

> ID：15080156
> 
> 赞同：4
> 
> 时间：2013-02-26T02:08:01.610
> 
> 标签：ruby, chef-infra, vagrant, chef-recipe

所以我使用以下配方：

```
include_recipe "build-essential"

node_packages = value_for_platform(
  [ "debian", "ubuntu" ]                      => { "default" => [ "libssl-dev" ] },
  [ "amazon", "centos", "fedora", "centos" ]  => { "default" => [ "openssl-devel" ] },
  "default"   => [ "libssl-dev" ]
)

node_packages.each do |node_package|
  package node_package do
    action :install
  end
end

bash "install-node" do
  cwd Chef::Config[:file_cache_path]
  code <<-EOH
    tar -xzf node-v#{node["nodejs"]["version"]}.tar.gz
    (cd node-v#{node["nodejs"]["version"]} && ./configure --prefix=#{node["nodejs"]["dir"]} && make && make install)
  EOH
  action :nothing
  not_if "#{node["nodejs"]["dir"]}/bin/node --version 2>&1 | grep #{node["nodejs"]["version"]}"
end

remote_file "#{Chef::Config[:file_cache_path]}/node-v#{node["nodejs"]["version"]}.tar.gz" do
  source node["nodejs"]["url"]
  checksum node["nodejs"]["checksum"]
  notifies :run, resources(:bash => "install-node"), :immediately
end 
```

它在我的 Vagrant VM 上成功安装了 nodejs，但在重新启动时它又被执行了。我该如何防止这种情况？我不擅长阅读 ruby​​ 代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T19:54:47.413

要使`remote_file`资源具有幂等性（即不再下载已经存在的文件），您必须正确指定文件的校验和。您可以使用该`node["nodejs"]["checksum"]`属性在代码中执行此操作。但是，这仅适用，如果校验和被正确指定为下载文件的 SHA256 哈希，则不支持其他算法（尤其是不支持 MD5）。

如果校验和不正确，您的配方仍然有效。但是，在下一次运行时，Chef 会注意到现有文件的校验和与您指定的不同，并将再次下载文件，从而通知`install node`资源并执行整个编译工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T02:11:00.170

对于厨师来说，食谱是幂等的很重要。这意味着他们应该能够在不改变结果的情况下一遍又一遍地奔跑。Chef 希望能够定期在节点上运行所有食谱，这应该没问题。

您是否有办法知道该配方中的哪个资源导致您出现问题？remote_file 是唯一一个我怀疑是非幂等的，但我不确定。

查看 Chef wiki，我发现：

> 弃用行为 在 Chef 0.8.x 及更早版本中，远程文件还用于从说明书中的 files/ 目录中获取文件。此行为现​​在由 #Cookbook File 提供，并且在 Chef 0.9.0 及更高版本中已弃用（尽管仍然有效）为此目的使用远程文件。

无论如何，厨师倾向于工作的方式，它将查看是否存在任何`"#{Chef::Config[:file_cache_path]}/node-v#{node["nodejs"]["version"]}.tar.gz"`解决方案，如果存在，它应该跳过该资源。安装完成后是否可以`install-node`删除该文件？如果是这样，厨师将每次重新获取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:33:22.563

根据我的经验，即使目标文件已经存在，也`remote_file`总是在执行时运行。`chef-client`不过，我不确定为什么（还没有深入研究 Chef 代码以找到错误的确切原因）。

你总是可以写一个`not_if`or`only_if`来控制`remote_file`资源的执行，但通常让它每次都运行是无害的。

您的其余代码看起来已经是幂等的，因此重复运行客户端并没有什么坏处。

您可以指定一个操作`remote_file`，使其有条件地运行：

```
remote_file 'target' do
  source 'wherever'
  action :create_if_missing
end 
```

请参阅[文档](https://docs.chef.io/resource_remote_file.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-27T14:01:08.157

您只能在使用*-o*修饰符覆盖运行列表时运行配方。

```
sudo chef-client -o "recipe[cookbook::recipe]" 
```

> -o RunlistItem,RunlistItem..., 用指定项目替换当前运行列表
> 
> --覆盖运行列表

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-19T11:40:41.000

如果您想测试您的食谱是否是幂等的，您可能会对 ToASTER 感兴趣，这是一个用于系统测试 Chef 脚本的框架。

[http://cloud-toaster.github.io/](http://cloud-toaster.github.io/)

Chef 配方在隔离的容器环境 (Docker VM) 中以不同的配置执行，ToASTER 报告各种指标，例如系统状态变化、收敛属性和幂等性问题。

# jquery - 向下滚动 - 反向

> ID：15080164
> 
> 赞同：1
> 
> 时间：2013-02-26T02:09:16.847
> 
> 标签：jquery, html, css

你好我有这个html代码：

```
 <style type="text/css">
    .container{
        width: 450;
        height: 400;
        border:1px solid;
        border-radius: 6px;
        background: #000;
    }
    .name{
        border-bottom:1px solid;
        background: #FFF;
    }
    .div_lines{
        max-height: 360px;
        background: #000;
        color:#FFF;
        overflow: auto;
        vertical-align: top;
    }
    </style>
    <div class="container">
    <div class="name">show</div>
    <div class="div_lines">
    <code class="lines">
        <div class="line">1</div>
        <div class="line">2</div>
        <div class="line">3</div>
        <div class="line">4</div>
        <div class="line">5</div>
        <div class="line">6</div>
        <div class="line">7</div>
        <div class="line">8</div>
        <div class="line">9</div>
        <div class="line">10</div>
        <div class="line">11</div>
        <div class="line">12</div>
        <div class="line">13</div>
        <div class="line">14</div>
        <div class="line">15</div>
        <div class="line">16</div>
        <div class="line">17</div>
        <div class="line">18</div>
        <div class="line">19</div>
        <div class="line">20</div>
        <div class="line">21</div>
        <div class="line">22</div>
        <div class="line">23</div>
        <div class="line">24</div>
        <div class="line">25</div>
        <div class="line">26</div>
        <div class="line">27</div>
        <div class="line">28</div>
    </code>
    </div>
    </div> 
```

但我想知道的是，有没有办法改变向下滚动，这样当我到达显示滚动条的地步时，我需要向上滚动以查看过去的数据而不是向下滚动？就像命令提示符一样，它将显示最后插入的行，您需要向上滚动才能查看预览信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:13:12.780

每当插入另一行时，让这段 javascript 代码运行：

```
var lines=document.getElementsByClassName('line');
lines[lines.length-1].scrollIntoView(); 
```

# vlcj - VLCJ 无需安装 VLC

> ID：15080165
> 
> 赞同：6
> 
> 时间：2013-02-26T02:09:28.773
> 
> 标签：vlcj

我想使用 vlcj 发布一个独立的 Java 应用程序并阅读 SAQ（[http://code.google.com/p/vlcj/wiki/SAQ](http://code.google.com/p/vlcj/wiki/SAQ)），这表明如果一个人发布所有共享对象，这是可能的或用于 libvlc 的 DLL 和所需的 vlc 插件。有人可以帮忙解决这个问题吗？感谢：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:10:24.033

我已经做到了。我所做的是将 dll 和插件的目录与应用程序打包在一起。我把它放在lib目录下。

然后我将 VLCj 库的路径添加到命令行参数 `-Djna.library.path={Application Location}/lib`

目录内容

```
lib
-- libblc.dll
-- libvlc5.dll
-- {etc}
/plugins
   /3dnow
   /access
   {etc} 
```

诀窍是你必须小心你正在拍摄的目标操作系统。我将应用程序限制为仅使用 Windows。要使用多个操作系统，您必须仔细选择正确的本机库。

希望有帮助。

# php - AJAX 使用 $_POST 方法传输大量数据

> ID：15080170
> 
> 赞同：0
> 
> 时间：2013-02-26T02:09:46.183
> 
> 标签：php, javascript, ajax, post

我想使用 AJAX 将大量文本传输到服务器。我想使用 POST 方法附加此文本，但出现以下错误：

请求失败：URI 太长（超过 8190）

我的 JavaScript 代码：

```
function loadXMLDoc(data) {
  var xmlhttp;
  if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
  }
  xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
      document.getElementById("myDiv").innerHTML = xmlhttp.responseText;
    }
  }
  xmlhttp.open("POST", "http://www.mydomain.com/test2.php?blob=" + data, true);
  xmlhttp.send();
} 
```

我的PHP代码：

```
$dataraw = $_GET["blob"];

file_put_contents('/path/to/my/file/newfile.txt', $dataraw);

echo 'file saved'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:13:57.153

你应该改变这个

```
xmlhttp.open("POST","http://www.mydomain.com/test2.php?blob=" + data,true);  
xmlhttp.send(); 
```

对此：

```
xmlhttp.open("POST", "http://www.mydomain.com/test2.php", true);   
var payload = "blob=" + data;
xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
xmlhttp.setRequestHeader("Connection", "close");  
xmlhttp.setRequestHeader("Content-length", payload.length);
xmlhttp.send(payload); 
```

在 POST 中，参数应该放在消息的正文中，而不是 URL。

同时，您应该期望 $​​_POST 中的服务器端参数 - 这就是 PHP 中 body 参数的最终位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T02:15:03.300

您不会将发布数据添加到 URL。请检查此链接以查找后请求的示例：

[http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp](http://www.w3schools.com/ajax/ajax_xmlhttprequest_send.asp)

```
xmlhttp.open("POST","ajax_test.asp",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("fname=Henry&lname=Ford"); 
```

# java - 如何在读取记录时访问 MySQL 字段名称

> ID：15080172
> 
> 赞同：0
> 
> 时间：2013-02-26T02:09:48.040
> 
> 标签：java, mysql

我正在使用此代码从 mysql 数据库中获取数据：

```
ResultSet rs= statement.executeQuery(" select id, email from table ");
System.out.println( rs.getInt(1) );
System.out.println( rs.getString(2) ); 
```

我想通过名称而不是数值来访问字段名称，如上所示。像这样的东西是否可能/可用：

```
rs.getValue("id"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:13:40.780

我认为`rs.getInt("id")`会像你期望的那样工作。

另请参阅[ResultSetMetaData](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSetMetaData.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:14:40.747

`getInt(String columnLabel)`接口中的方法`ResultSet`将接受一个带有列名的字符串，所以在你的情况下它会是`getInt("id");`，是的，它会起作用。

干杯。

# excel - Excel 动态超链接工作表导航

> ID：15080181
> 
> 赞同：0
> 
> 时间：2013-02-26T02:11:12.387
> 
> 标签：excel, hyperlink

我有一个动态超链接，它选择工作表中指定列中的最后一个单元格，而不管该列中的项目数。因此，如果我在一列中有 22 个项目，则链接将选择第 23 行，依此类推。

我要做的是让它选择最后一个单元格（以相同的方式），但在同一工作簿的不同工作表中 - 前提是我的参考单元格设置为适当的数字（即我有一个下拉选择器设置此参考单元格的值并更改超链接。

我使用 IF 和 COUNTA 语句实现了这一点，但我不知道如何使链接公式计算不同工作表列中的项目数。这是功能：

```
=IF(J6=1, HYPERLINK("#Parts!b"&COUNTA(B:B)+3, "Add New Entry"), HYPERLINK("#Employees!b"&COUNTA(B:B)+3, "Add New Entry")) 
```

如何更改公式以便在适当的工作表中执行 COUNTA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:42:32.010

只需在`sheet name!`您定义的列范围前添加您的`counta()`. 例如，如果您的工作表名称是 sheet1，您将执行以下操作：

```
=IF(J6=1, HYPERLINK("#Parts!b"&COUNTA(sheet1!B:B)+3, "Add New Entry"), HYPERLINK("#Employees!b"&COUNTA(sheet1!B:B)+3, "Add New Entry")) 
```

# cygwin - Cygwin 意外令牌 `(' 在 cd 上

> ID：15080184
> 
> 赞同：9
> 
> 时间：2013-02-26T02:11:44.103
> 
> 标签：cygwin

我有`Program Files`和`Program Files (x86)`目录`C`。我可以从 Windows 8访问`Program Files`使用，但此命令返回以下错误：`$ cd Program\ Files\``$ cd Program\ Files\ (x86)`

```
sadaf2605@Sadaf /cygdrive/c
$ cd Program\ Files\ (x86)
-bash: syntax error near unexpected token `(' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T02:13:31.420

您还必须转义括号：

```
$ cd Program\ Files\ \(x86\) 
```

或者只使用引号：

```
$ cd "Program Files (x86)" 
```

# c# - SSMS 可扩展性项目 - 如何研究/调试

> ID：15080185
> 
> 赞同：2
> 
> 时间：2013-02-26T02:11:44.693
> 
> 标签：c#, extensibility, ssms-2012, ssms-addin

在这个关于创建 SSMS 扩展的[答案中：](https://dba.stackexchange.com/a/25396/653)

```
namespace SSMSAddin
{
    using System;
    using System.IO;
    using Extensibility;
    using EnvDTE;
    using EnvDTE80;
    using Microsoft.VisualStudio.CommandBars;
    using Microsoft.SqlServer.Management.UI.VSIntegration;
    using System.Windows.Forms;

    public class Connect : IDTExtensibility2, IDTCommandTarget
    {
        private DTE2 applicationObject;
        private CommandEvents executeSqlEvents;
        private AddIn addInInstance;

        public Connect() { }

        public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
        {
            this.applicationObject = (DTE2)application;
            this.addInInstance = (AddIn)addInInst;

            this.applicationObject = (DTE2)application;
            this.executeSqlEvents = this.applicationObject.Events.CommandEvents["{52692960-56BC-4989-B5D3-94C47A513E8D}", 1];
            this.executeSqlEvents.BeforeExecute += this.ExecuteSqlEventsBeforeExecute;

            if (connectMode == ext_ConnectMode.ext_cm_UISetup)
            {
                var contextGUIDS = new object[] { };
                var commands = (Commands2)this.applicationObject.Commands;
                string toolsMenuName = "Tools";

                //Place the command on the tools menu.
                //Find the MenuBar command bar, which is the top-level command bar holding all the main menu items:
                CommandBar menuBarCommandBar = ((CommandBars)this.applicationObject.CommandBars)["MenuBar"];

                //Find the Tools command bar on the MenuBar command bar:
                CommandBarControl toolsControl = menuBarCommandBar.Controls[toolsMenuName];
                CommandBarPopup toolsPopup = (CommandBarPopup)toolsControl;

                //This try/catch block can be duplicated if you wish to add multiple commands to be handled by your Add-in,
                //  just make sure you also update the QueryStatus/Exec method to include the new command names.
                try
                {
                    //Add a command to the Commands collection:
                    Command command = commands.AddNamedCommand2(this.addInInstance, "SSMSAddin", "SSMSAddin", "Executes the command for SSMSAddin", true, 59, ref contextGUIDS, (int)vsCommandStatus.vsCommandStatusSupported + (int)vsCommandStatus.vsCommandStatusEnabled, (int)vsCommandStyle.vsCommandStylePictAndText, vsCommandControlType.vsCommandControlTypeButton);

                    //Add a control for the command to the tools menu:
                    if ((command != null) && (toolsPopup != null))
                    {
                        command.AddControl(toolsPopup.CommandBar, 1);
                    }
                }
                catch (ArgumentException)
                {
                    //If we are here, then the exception is probably because a command with that name
                    //  already exists. If so there is no need to recreate the command and we can 
                    //  safely ignore the exception.
                }
            }
        }

        private void ExecuteSqlEventsBeforeExecute(string guid, int id, object customin, object customout, ref bool canceldefault)
        {
            try
            {
                Document document = ((DTE2)ServiceCache.ExtensibilityModel).ActiveDocument;
                var textDocument = (TextDocument)document.Object("TextDocument");

                string queryText = textDocument.Selection.Text;

                if (string.IsNullOrEmpty(queryText))
                {
                    EditPoint startPoint = textDocument.StartPoint.CreateEditPoint();
                    queryText = startPoint.GetText(textDocument.EndPoint);
                }

                DateTime now = DateTime.Now;
                // string server = 
                string folderPath = string.Format(@"B:\SSMS Queries\{0}", now.ToString("yyyyMMdd"));
                string fileName = now.ToString("yyyyMMdd-HHmmss") + ".sql";
                Directory.CreateDirectory(folderPath);
                string fullPath = Path.Combine(folderPath, fileName);
                File.WriteAllText(fullPath, queryText);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }

        public void OnDisconnection(ext_DisconnectMode disconnectMode, ref Array custom) { }

        public void OnAddInsUpdate(ref Array custom) { }

        public void OnStartupComplete(ref Array custom) { }

        public void OnBeginShutdown(ref Array custom) { }

        public void QueryStatus(string commandName, vsCommandStatusTextWanted neededText, ref vsCommandStatus status, ref object commandText)
        {
            if (neededText == vsCommandStatusTextWanted.vsCommandStatusTextWantedNone)
            {
                if (commandName == "SSMSAddin.Connect.SSMSAddin")
                {
                    status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported | vsCommandStatus.vsCommandStatusEnabled;
                    return;
                }
            }
        }

        public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
        {
            handled = false;
            if (executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
            {
                if (commandName == "SSMSAddin.Connect.SSMSAddin")
                {
                    var document = ((DTE2)ServiceCache.ExtensibilityModel).ActiveDocument;
                    if (document != null)
                    {
                        //replace currently selected text
                        var selection = (TextSelection)document.Selection;
                        selection.Insert(
@"Welcome to SSMS. This sample is brought to you by

SSMSBoost add-in team

Check www.ssmsboost.com for updates.",
(Int32)EnvDTE.vsInsertFlags.vsInsertFlagsContainNewText);
                    }

                    handled = true;
                    return;
                }
            }
        }
    }
} 
```

该代码添加了一个事件，该事件在 SSMS 2012 中的每个 SQL 执行之前触发......我按 F5，sql 查询运行，但在它运行之前它将查询的副本保存到`B:\SSMS Queries\20130225\083000.sql`.

这缺少什么？我想为使用的连接/数据库添加选项，例如`B:\SSMS Queries\Localhost\Northwind\20130225\083000.sql`（只是一个例子）。

我通常会做什么......断点，单步执行，检查对象等......虽然这是一个插件。类库。您不能断点/单步执行库...

如何将断点放入加载到 SSMS/Visual Studio 的类库中以便我可以研究？或者什么是这种修补的好资源？某处`object customin, object customout`是我想要修补的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-06T02:36:42.353

问题的第二部分找到与当前数据库的连接..

添加对 Microsoft.SqlServer.RegSrvrEnum.dll 和 SqlWorkBench.Interfaces 的引用（位于 C:\ProgramFiles..\SQL Server.. - 中的某处）。确保您已安装工具的 SDK。

那么下面的代码应该可以解决问题（欢迎您！）

```
IScriptFactory scriptFactory = ServiceCache.ScriptFactory;
CurrentlyActiveWndConnectionInfo connectionIfno = scriptFactory.CurrentlyActiveWndConnectionInfo;
UIConnectionInfo conn = connectionIfno.UIConnectionInfo;
Debug.WriteLine("{0}::{1}", conn.ServerName, conn.AdvancedOptions["DATABASE"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T20:20:58.997

实际上记录了我的答案（在多次忘记之后）。[在SSMSBoost](http://www.ssmsboost.com/create-own-ssms-2012-add-in-sample-code-with-download)和[TSQLTidy.Blogspot](http://tsqltidy.blogspot.com/2011/08/how-to-write-sql-server-management_17.html)（和 Martin Smith 评论）的组合中找到了我的答案

```
1) Set SSMS as the startup project inside Debug Profile. File location for SSMS2012:
    C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\SSMS.exe
2) I've created 2 Addin files:
    MyAddin.Debug.Addin
    MyAddin.Release.Addin
    (Contents updated as listed below)
3) Add postbuild event to create directory if not exists
4) Add postbuild event to copy Addin from ProjectDir to MSeventShared
5) Turn off P-Invoke warnings. Press CRLT + ALT + E - In Managed Debugging Assistants, find PInvokeStackImbalance, untick it. 
```

插件文件（Release 将 DLL 位置从 Project 目录更改为 MSEnvShared\Admin 文件夹）：

```
<?xml version="1.0" encoding="UTF-16" standalone="no"?>
<Extensibility xmlns="http://schemas.microsoft.com/AutomationExtensibility">
    <HostApplication>
        <Name>Microsoft SQL Server Management Studio</Name>
        <Version>*</Version>
    </HostApplication>
    <Addin>
        <FriendlyName>MyAddin.</FriendlyName>
        <Description>MyAddin Description.</Description>
        <Assembly>C:\Projects\MyAddin\bin\Debug\MyAddin.dll</Assembly>
        <FullClassName>SSMSAddin.Connect</FullClassName>
        <LoadBehavior>0</LoadBehavior>
    <CommandPreload>1</CommandPreload>
    <CommandLineSafe>0</CommandLineSafe>
     </Addin>
</Extensibility> 
```

构建后事件：

```
cmd /x /c mkdir "C:\ProgramData\Microsoft\MSEnvShared\Addins\"
cmd /C copy "$(ProjectDir)MyAddin.$(ConfigurationName).Addin" "C:\C:\ProgramData\Microsoft\MSEnvShared\Addins\MyAddin.Addin" 
```

# fortran90 - gfortran中.f源代码的编译错误；将文本文件读入二维数组

> ID：15080190
> 
> 赞同：0
> 
> 时间：2013-02-26T02:12:20.160
> 
> 标签：fortran90

我对以下来源有疑问。当它在 gfortran 中编译时，它不能正常工作，然后出现两条错误消息。我该如何解决这个问题？任何评论都会非常有帮助。提前致谢。

```
 program driver
  integer i,ln,n,e,count,x,a,b,total
  character driverid*12,var*12,ch*12
  parameter (n=720321) 
```

c 参数 (n=55062) 维度 var(n),a(n),b(n)

```
 write(*,*) 'input run id(text)'
  read(*,55) driverid 
```

55 格式（一）

```
 ln=index(driverid,' ')-1
  open(6,file=driverid(1:ln)//'.out',form='formatted'
 +,status='unknown')
  open(1,file=driverid(1:ln)//'.txt',status='old')

  do i=1,2
  read(1,*)
  end do

  read(1,*) (var(i),i=1,n)

  close(1)

  total=0      
  count=1
  do i=1,n
  b(i)=0
  read(var(i),*,iostat=e) x    
  if (e .eq. 0) then
    a(count)=x
    count=count+1
  else
    ln=index(var(i),' ')-1
    if (var(i)(ln-1:ln-1) .eq. 'r') then
     var(i)=var(i)(1:ln-2)
    else
     var(i)=var(i)(1:ln-1)
    end if
    read(var(i),'(i)') b(count-1)
  end if
  end do

  do i=1,count
   total=total+1+b(i)
  end do

  do i=1,total
   write(6,'(10i)') (a(i),j=1,b(i))
  end do

  close(6)

  end 
```

错误消息如下

$ gfortran driver.f driver.f:43.23:

```
 read(var(i),'(i)') b(count-1)
                   1 
```

错误： (1) driver.f:53.20 的格式字符串中需要非负宽度：

```
 write(6,'(10i)') (a(i),j=1,b(i))
                1 
```

错误：(1) 处的格式字符串中需要非负宽度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:49:03.310

指定整数格式时，*必须*指定字段宽度。如果你想让它灵活，你可以将它设置为零：

```
write(6, "(10I0)") ... 
```

# excel - 如何将行和列复制到另一个工作簿上的另一个工作表

> ID：15080191
> 
> 赞同：1
> 
> 时间：2013-02-26T02:12:28.550
> 
> 标签：excel, vba

我有几本从一个主工作簿中获取副本的工作簿。我想要做的是当我将数据输入主工作簿时，我想根据我从 Combobox1.Value 获得的产品类型将其复制到另一个工作簿中。更清楚地说，我要复制数据的工作簿取决于 ComboBox1.value。即，如果 ComboBox1.value 等于“Penofix”，那么我想将数据复制到工作簿“Penofix.xlsm”中。我已经完成了关于如何根据某些条件将数据输入特定行的主输入编码，但面临将数据复制到另一个工作簿的问题。

```
Private Sub CmdEnter_Click()

Dim CountRow As Long
Dim i As Long
Dim prod as string
Dim j As Long
Dim Ws As Worksheet
Dim Count1 as Long

'CountRow is number of row in master workbook
CountRow = Worksheets("Input").Range("B" & Rows.Count).End(xlUp).Row
'assign variable prod with combobox1 value
prod = ComboBox1.Value
'i=32 because my row start at 32
For i = 32 To countRow + 31

While ComboBox1.Value = Worksheets("Input").Cells(i, 2).Value
    Rows(i).Select
    Selection.Insert shift = xlDown

    With Worksheets("Input")
    'insert data into master workbook
    .Range("B" & i) = ComboBox1.Text
    .Range("C" & i) = TextBox1.Text
    .Range("D" & i) = TextBox2.Text
    .Range("E" & i) = TextBox3.Text
    .Range("F" & i) = TextBox4.Text
    .Range("G" & i) = TextBox5.Text
    .Range("H" & i) = ComboBox2.Text
    .Range("I" & i) = TextBox6.Text
    .Range("J" & i) = TextBox7.Text
    .Range("K" & i) = TextBox8.Text

    End With
   'activate other workbook to copy data,if prod = Penofix,the workbook will be "Penofix.xlsm"
   workbooks(prod & ".xlsm").Activate
   'count the number of row in workbooks(prod & ".xlsm").
   ' i specified  cell (31,3) to calculate the number of row used
   Count1  = Workbooks(prod & ".xlsm").Worksheets("Sheet1").Cells(31,3).Value
   Count1  = Count1  + 31

   'copy data into workbooks(prod & ".xlsm")
   'THIS IS THE LINE WHICH ERROR
    Workbooks(prod & ".xlsm").Worksheets("Input").Range(Cells(Count1,  2), Cells(Count1 , 11)).Value = Workbooks("Master.xlsm").Worksheets("Input").Range(Cells(i, 2), Cells(i, 11)).Value   

    If MsgBox("One record written to Input. Do you want to continue entering data?", vbYesNo)=     vbYes Then
     ComboBox1.Text = ""
     TextBox1.Text = ""
     TextBox2.Text = ""
     TextBox3.Text = ""
     TextBox4.Text = ""
     TextBox5.Text = ""
     ComboBox2.Text = ""
     TextBox6.Text = ""
     TextBox7.Text = ""
     TextBox8.Text = ""

        Else
            Unload Me
    End If

    Exit Sub
 Wend
Next
End Sub 
```

我尝试更换

```
 Workbooks(prod & ".xlsm").Worksheets("Input").Range(Cells(Count1,  2), Cells(Count1 , 11)).Value = Workbooks("Master.xlsm").Worksheets("Input").Range(Cells(i, 2), Cells(i, 11)).Value 
```

有了这个

```
 Workbooks(prod & ".xlsm").Worksheets("Input").Cells(Count1, 2).Value = Workbooks("Master.xlsm").Worksheets("Input").Cells(i, 2).Value 
```

是的，它的工作，但它只适用于一个单细胞。所以我认为错误在于语法：

```
 Range(Cells(Count1,2), Cells(Count1,11)) 
```

但我不知道如何让它复制整行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:04:28.130

```
Workbooks("Master.xlsm").Worksheets("Input").Range(cells(i,B).cells(i,K)).Value = _
    Workbooks(prod & ".xlsm").).Worksheets("Sheet1").Range(Cells(CountRow, B). Cells(CountRow, K)).Value 
```

这段代码将更新主工作簿，我怀疑你想要这个。还有`.).` 一些语法错误。

我认为这是你需要的：

```
Dim sht1 As Worksheet, sht2 As Worksheet
Set sht1 = Workbooks(prod & ".xlsm").Worksheets("Sheet1")
Set sht2 = Workbooks("Master.xlsm").Worksheets("Input")

sht1.Range(sht1.Cells(CountRow, 2), sht1.Cells(CountRow, 11)).Value = _
    sht2.Range(sht2.Cells(i, 2), sht2.Cells(i, 11)).Value 
```

* * *

**改进的代码：**使用`resize(<row>, <column>)`

```
Workbooks(prod & ".xlsm").Worksheets("Sheet1").Cells(CountRow, 2).resize(, 11).Value = _
    Workbooks("Master.xlsm").Worksheets("Input").Cells(i, 2).resize(, 11).Value 
```

**对于一些添加的信息**，`Cells(<Row>, <Column>)`将只为`<Row>`和取整数`<Column>`。因此，该列`B`表示为`2`。

# maven - 无法从 OSGi 包中的 JRuby jar 文件加载 gem

> ID：15080193
> 
> 赞同：4
> 
> 时间：2013-02-26T02:12:40.713
> 
> 标签：maven, rubygems, osgi, jruby

我无法加载捆绑在 jar 中的 gem，然后将其作为 OSGi 包加载。我是一名 Ruby 程序员，所以我对 OSGi、Maven 或 JRuby 不是很熟悉。

我们的目的是将 gems 添加到正确的`META-INF/jruby.home`子目录并重建`jruby-complete.jar`文件，然后该文件是该项目的依赖项。

例如，`cartesian`gem 安装在此处`jruby-complete-gems-1.6.8.1.jar`（我们正在更改文件名以避免与原始 JRuby jar 混淆）：

```
META-INF/jruby.home/lib/ruby/gems/1.8/gems/cartesian-0.6.7 
```

我已经验证了路径存在于 jar 中。我们还在 JUnit 中运行了所有通过的测试，并且我向通过以下方式执行的 Ruby 代码添加了一些调试输出`ScriptingContainer.runScriptlet()`：

```
DEBUG: Gem.path: ["file:/home/brandanl/.m2/repository/org/jruby/jruby-complete-gems/1.6.8.1/jruby-complete-gems-1.6.8.1.jar!/META-INF/jruby.home/lib/ruby/gems/1.8", "/home/brandanl/.gem/jruby/1.9"] 
```

所以这看起来像设计的那样工作，直到它被加载到 OSGi 中并且我开始收到这个错误：

```
org.jruby.embed.EvalFailedException: (LoadError) no such file to load -- cartesian
  at org.jruby.embed.internal.EmbedEvalUnitImpl.run(EmbedEvalUnitImpl.java:136)
  at org.jruby.embed.ScriptingContainer.runUnit(ScriptingContainer.java:1263)
  at org.jruby.embed.ScriptingContainer.runScriptlet(ScriptingContainer.java:1256)
  at com.raritan.polaris.plugins.dynamic.DynamicPluginManager.setPluginLoadPath(DynamicPluginManager.java:123)
  at com.raritan.polaris.plugins.dynamic.Activator.start(Activator.java:54) 
```

Ruby 代码本质上就是这样的：

```
require 'cartesian' 
```

我的调试输出如下所示：

```
DEBUG: Gem.path: ["classpath:/META-INF/jruby.home/lib/ruby/gems/1.8", "/root/.gem/jruby/1.9"] 
```

我见过几种不同的加载 gem 的方法，比如构建仅包含 gem 的 jar 或将 gem 安装到文件系统并更改`jruby.home`，但我想了解这种方法有什么问题，因为它在测试期间有效。我们的项目 jar 肯定包含`jruby-complete-gems-1.6.8.1.jar`，并且它的`MANIFEST.MF`文件包含正确的`Bundle-Classpath`指令：

```
Bundle-ClassPath: .,scripts,lib/jruby-complete-gems-1.6.8.1.jar 
```

我已经尝试加载默认与 JRuby 1.6.8 捆绑的 gem——即`rake`和`sources`——它们以同样的方式失败，所以我认为这是我们环境的问题，而不是 JRuby*本身*的问题。

我不确定在此处包含其他内容会有所帮助，因此非常感谢您的建议。

# c++ - GCC 4.7.2：带有指向成员函数的指针的 std::thread

> ID：15080200
> 
> 赞同：4
> 
> 时间：2013-02-26T02:13:19.450
> 
> 标签：c++, gcc, c++11, std, libstdc++

[在为这个问题](https://stackoverflow.com/questions/15080015/stdthread-with-pointer-to-data-member)编写测试代码时，我发现下面的注释行不能在 GCC 4.7.2 上编译：

```
#include <thread>
#include <iostream>

struct S {
    void f() {
        std::cout << "Calling f()" << std::endl;
    }
};

int main()
{
    S s;
    // std::thread t(&S::f, s); // does not compile?
    std::thread t(&S::f, &s);
    t.join();
} 
```

但是 cppreference 似乎声称“this”参数可以等效地作为对象、对对象的引用或指向对象的指针传递：

> 如果 f 是指向类 T 的成员函数的指针，则调用它。返回值被忽略。实际上，执行以下代码： (t1.*f)(t2, ..., tN) 如果 t1 的类型是 T，则引用 T 或引用派生自 T 的类型。 ((*t1).* f)(t2, ..., tN) 否则。

我实际上认为这听起来很糟糕，并且宁愿`std::thread`只允许指针或引用语义而不是互换地接受它们，但鉴于它似乎应该这样做，以上是 GCC/libstdc++ 错误（还是我误解了 cppreference）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:53:59.580

好像今晚是[GCC 错误派对](https://stackoverflow.com/questions/15079947/obviously-ambiguous-call-does-not-cause-a-compilation-error-on-gcc#comment21209484_15079947):-)

除了笑话，这肯定是一个**错误**。[我对链接问题的回答](https://stackoverflow.com/questions/15080015/stdthread-with-pointer-to-data-member/15080378#15080378)实际上包含了证明，但由于没有强调，我将在此重复。

这就是C++11 标准中定义的构造函数`INVOKE`的行为（参见链接的答案）的设施的方式`std::thread`

> 定义**INVOKE (f, t1, t2, ..., tN)**如下：
> 
> — **(t1.*f)(t2, ..., tN) 当 f 是指向类 T 的成员函数的指针并且 t1 是类型 T 的对象或对类型 T 的对象的引用或对从 T 派生的类型的对象；**
> 
> — ((*t1).*f)(t2, ..., tN) 当 f 是指向类 T 的成员函数的指针且 t1 不是上一项中描述的类型之一时；
> 
> — t1.*f 当 N == 1 且 f 是指向类 T 的成员数据的指针且 t1 是类型 T 的对象或对类型 T 的对象的引用或对派生于的类型的对象的引用T;
> 
> — (*t1).*f 当 N == 1 且 f 是指向类 T 的成员数据且 t1 不是上一项中描述的类型之一时；
> 
> — f(t1, t2, ..., tN) 在所有其他情况下。

粗体的句子有效地指定了以下行：

> std::thread t(&S::f, s);

应该编译。因此，这被称为**错误**。

此外，这确实在 GCC 4.8.0 (beta) 和 Clang 3.2 上编译。

# java - 动态定义图标的绘制方式

> ID：15080203
> 
> 赞同：1
> 
> 时间：2013-02-26T02:13:38.967
> 
> 标签：java, android

我想在我的 Android 电子阅读器应用程序上有一个“评论”按钮，显示图标内当前发布的评论数量......所以基本上我想要一个里面有一个数字的评论气泡。

`int number_of_comments`我可以有多个可绘制对象，每个都是内部具有不同数字的气泡，并使用 switch 语句根据正在显示的元素的字段选择每次加载哪个 。不过，这种方法似乎有点浪费，而且无论如何我觉得有一种更优雅的方法可以做到这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:24:02.287

你可以做得更好。您可以在图像视图顶部有一个文本视图，并在每次添加新评论时不断更新其值。您可以像下面这样在 xml 中定义重叠，并相应地调整代码逻辑以增加评论数。现在我刚刚设置了一个虚拟文本 Hello 显示在 ImageView 的顶部。您可以使用 TextView 的 setText 方法添加您的评论数。

```
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativelayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ImageView
    android:id="@+id/myImageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/myImageSouce" />

<TextView
    android:id="@+id/myImageViewText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/myImageView"
    android:layout_alignTop="@+id/myImageView"
    android:layout_alignRight="@+id/myImageView"
    android:layout_alignBottom="@+id/myImageView"
    android:layout_margin="1dp"
    android:gravity="center"
    android:text="Hello"
    android:textColor="#000000" />

</RelativeLayout> 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T02:26:18.030

看看这个第 3 方创建的小部件

[Android ViewBadger](https://github.com/jgilfelt/android-viewbadger)

我认为您可以使用它来创建您正在寻找的小数字气泡。这给您带来的好处是无需过多地修改布局来实现您想要获得的效果。

这是应用“徽章”的示例代码

```
View target = findViewById(R.id.target_view);
BadgeView badge = new BadgeView(this, target);
badge.setText("1");
badge.show(); 
```

# php - 在数组中搜索值并获取数组

> ID：15080212
> 
> 赞同：1
> 
> 时间：2013-02-26T02:14:12.867
> 
> 标签：php, arrays, search

我正在尝试使用数组来搜索数组内部的值，然后获取该值所在的完整数组并将其添加到数组中。下面是从中获取值的数组：

```
Array (
    [0] => Array ( [ID] => 138 [dimmer] => 5 [order] => 1 [double] => 0 [location1] => DSR [location2] => Stage Pockets ) 
    [1] => Array ( [ID] => 139 [dimmer] => 6 [order] => 1 [double] => 0 [location1] => DSR [location2] => Stage Pockets )
    [2] => Array ( [ID] => 140 [dimmer] => 7 [order] => 2 [double] => 0 [location1] => DSR [location2] => Stage Pockets )
    [3] => Array ( [ID] => 141 [dimmer] => 8 [order] => 2 [double] => 0 [location1] => DSR [location2] => Stage Pockets )
) 
```

我正在尝试`dimmer`使用以下搜索功能获取 的值：

```
function search($array, $key, $value)
{
  $results = array();

  if (is_array($array))
  {
      if (isset($array[$key]) && $array[$key] == $value)
          $results[] = $array;

      foreach ($array as $subarray)
          $results = array_merge($results, search($subarray, $key, $value));
  }

  return $results;
} 
```

下面它使用`$chan`整数值来使用上面的函数来搜索数组。然后`foreach`应该遍历数组`$patch`并从上面的数组中选择数组（仅返回一个空数组），尽管除非您`$patch_single['dimmer']`使用诸如`"7"`.

```
 $patch = search($patch, 'Channel', $chan);
  foreach ($patch as $patch_single) {
    print_r($patch_single);
    $dim_single = intval($patch_single['dimmer']);
    echo $dim_single;
    $dimmers = search($dimmers, 'dimmer', $dim_single);
  } 
```

用于获取的数组`$patch_single['dimmer']`是，当在`foreach`:

```
Array ( [ID] => 241 [Channel] => 100 [dimmer] => 7 )
Array ( [ID] => 242 [Channel] => 100 [dimmer] => 25 ) 
```

感谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:11:47.893

嗯，我看到你有二维数组。为什么你不使用这个？

```
foreach($array as $row) { 
    if ($row['dimmer'] == $myValue) { $newArray[] = $row; } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:44:30.730

尝试这个 ：

```
$arr       = Array (Array ( "ID" => 138, "dimmer" => 5, "order" => 1, "double" => 0, "location1" => "DSR", "location2" => "Stage Pockets" ), 
                    Array ( "ID" => 139, "dimmer" => 6, "order" => 1, "double" => 0, "location1" => "DSR", "location2" => "Stage Pockets" ),
                    Array ( "ID" => 140, "dimmer" => 7, "order" => 2, "double" => 0, "location1" => "DSR", "location2" => "Stage Pockets" ),
                    Array ( "ID" => 141, "dimmer" => 8, "order" => 2, "double" => 0, "location1" => "DSR", "location2" => "Stage Pockets" ));

$arr       = array_filter($arr, function($ar) {
   return ($ar['dimmer'] == '7' );
});
echo "<pre>";
print_r($arr); 
```

输出 ：

```
Array
(
    [2] => Array
        (
            [ID] => 140
            [dimmer] => 7
            [order] => 2
            [double] => 0
            [location1] => DSR
            [location2] => Stage Pockets
        )

) 
```

参考： http: [//php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)

# php - 复制字段并向其中添加一些文本

> ID：15080213
> 
> 赞同：0
> 
> 时间：2013-02-26T02:14:25.317
> 
> 标签：php, mysql, copy, field

嗨，我正在尝试获取该`gamename`字段并将其放入该`customTitle`字段，但在其周围添加一些文本。例如游戏名称是**Balloon Pop** in gamename 我想要**Play Balloon Pop Now - FlameGame.net**

如果您需要更多信息，请对此问题发表评论。任何帮助是极大的赞赏。

- 编辑 -

这是我的代码

```
<?php
if(isset($_POST['title'])) {
    $query = "SELECT * FROM games";
    $result = mysql_query($query) or die ("no query");

    mysql_query("UPDATE games SET gameKeywords=tags");

    $title = array();
    $id = array();
    while($row = mysql_fetch_assoc($result)){
        $title[] = $row['gamename'];
        $id[] = $row['gameid'];
    }
    foreach($title as $Stitle){
        foreach($id as $Sid){
    mysql_query("UPDATE games SET customTitle = 'Play ".$Stitle." Now - FlameGame.net' WHERE gameid LIKE '".$Sid."'");

        }
    }

}
?> 
```

在`db`它取代了所有的`customTitles`第一场比赛的名字。

- 编辑 -

我想出了一个 mysql 命令，它完全符合这个程序应该做的事情。这里是：

```
UPDATE games SET customTitle = concat('Play ',gamename,' Now – FlameGame.net'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:29:55.657

```
mysql_query("UPDATE games SET customTitle = 'Play ".$Stitle." Now - FlameGame.net' WHERE gameid LIKE '".$Sid."'"); 
```

# javascript - 将点击事件添加到 iframe

> ID：15080222
> 
> 赞同：17
> 
> 时间：2013-02-26T02:15:38.293
> 
> 标签：javascript, jquery, iframe

我想将点击事件添加到`iframe`. 我使用了[这个例子](https://stackoverflow.com/questions/1609741/how-to-add-click-event-to-a-iframe-with-jquery)并得到了这个：

```
$(document).ready(function () {
   $('#left').bind('click', function(event) { alert('test'); });
});

<iframe src="left.html" id="left">
</iframe> 
```

但不幸的是，什么也没发生。
当我用另一个元素（例如按钮）测试它时，它可以工作：

```
<input type="button" id="left" value="test"> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-26T03:02:01.460

您可以将点击附加到 iframe 内容：

```
$('iframe').load(function(){
  $(this).contents().find("body").on('click', function(event) { alert('test'); });
}); 
```

注意：这只有在两个页面都在同一个域中时才有效。

现场演示：http: [//jsfiddle.net/4HQc4/](http://jsfiddle.net/4HQc4/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-26T02:19:17.750

两种解决方案：

1.  `:after`在`.iframeWrapper`元素上使用
2.  使用`pointer-events:none;`一个 iframe

## 1.使用`:after`

很简单。iframe 包装器有一个具有**更高 z-index**`:after`的（透明）伪元素- 这将有助于包装器注册点击：

 **```
jQuery(function ($) { // DOM ready

   $('.iframeWrapper').on('click', function(e) {
     e.preventDefault();
     alert('test');
   });

});
```

```
.iframeWrapper{
  display:inline-block;
  position:relative;
}
.iframeWrapper:after{ /* I have higher Z-index so I can catch the click! Yey */
  content:"";
  position:absolute;
  z-index:1;
  width:100%;
  height:100%;
  left:0;
  top:0;
}

.iframeWrapper iframe{
  vertical-align:top;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div class="iframeWrapper">
  <iframe src="http://www.reuters.tv/" frameBorder="0"></iframe>
</div>
```

## 2.使用`pointer-events:none;`

**来自外部资源**的 iframe 外部的点击无法处理（如果 iframe 不在您的域中）。
您只能在*“调用 iframe”*页面中创建该函数，而不是在*iframe 托管*页面中创建该函数。

**怎么做**：

*   您可以将您的**包装**`iframe`成一个 div
*   使点击“通过”您`iframe`使用 CSS`pointer-events:none;`
*   目标点击`jQuery`您的包装`DIV`（`iframe`父元素）

```
jQuery(function ($) { // DOM ready

   $('.iframeWrapper').on('click', function(e) {
     e.preventDefault();
     alert('test');
   });

});
```

```
.iframeWrapper{
  display:inline-block;
  position:relative;
}

.iframeWrapper iframe{
  vertical-align:top;
  pointer-events: none; /* let any clicks go trough me */
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div class="iframeWrapper">
  <iframe src="http://www.reuters.tv/" frameBorder="0"></iframe>
</div>
```

**通知：**

*   iframe 元素不会注册任何点击，因此一个用例是 ie：如果通过单击 iframe 您想将其放大全屏......等等......
*   另外（@Christophe 建议）IE8 对`pointer-events`:\

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:58:42.373

我让它工作，但只有在将它上传到主机之后。我想 localhost 也可以正常工作。

**外**

```
<html>
   <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        $(document).ready(function() {
            var myFrame = document.getElementById("myFrame");
            $(myFrame.contentWindow.document).find("div").on("click", function () { alert("clicked"); });
        });
    </script>
    <body>
        <iframe id="myFrame" src="inner.htm"></iframe>
    </body>
</html> 
```

**内**

```
<html>
    <head>
        <style>
            div {
                padding:2px;
                border:1px solid black;
                display:inline-block;
            }
        </style>
    </head>
    <body>
        <div>Click Me</div>
    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:32:17.017

```
$(document).ready(function () {
 $('#left').click(function(event) { alert('test'); });
});

<iframe src="left.html" id="left">Your Browser Does Not Support iframes</iframe> 
```

该脚本必须完全从 iframe 运行。我会推荐另一种调用内容的方法，例如 php。

iframe 真的不值得麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T02:35:39.083

实际的问题是，click 事件没有绑定到 iframe 的 DOM 并且 bind() 已被弃用，用于`.on()`绑定事件。尝试使用以下代码，您会发现 iframe 的可点击边框会收到该警报。

```
$('#left').on('click', function(event) { alert('test'); }); 
```

[该问题的演示](http://jsfiddle.net/HtUvG/)

> ### 那么如何完成呢？

您应该怎么做，在 iframe 页面上创建一个函数，然后从该 iframe 页面调用该函数。**

# java - Java，使方法静态

> ID：15080224
> 
> 赞同：0
> 
> 时间：2013-02-26T02:15:44.657
> 
> 标签：java, methods, static

我试图让 main 调用我的方法`getArtist()`，但是当我这样做时，它告诉我我不能从静态上下文中引用非静态方法。我读了一遍，但我仍然不明白，我如何制作`getArtist()`一个静态方法，而不命名它`public static String getArtist()`？

```
public static void main(String[] args) {
    String mainArtist;
    String mainTitle;
    CD myCD = new CD("Awesomeguy", "AwesomeCDName");
    mainArtist = getArtist();
    System.out.println(mainArtist);
}

public String getArtist(){
    String person;
    person = artist;
    return person;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T02:18:24.973

如果这是来自您的`CD`类的代码，并且您不想将其设为`getArtist()`静态，那么另一种方法是在`CD`实例上调用它。

```
CD myCD = new CD("Awesomeguy", "AwesomeCDName");
mainArtist = myCD.getArtist(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T02:29:30.567

静态意味着该方法是类而不是对象的一部分。这方面的一个例子是数学类，您可以直接在类名上调用方法。

```
Math.round(4); 
```

实例意味着它是对象的一部分，每个实例都有自己的方法版本。要使用实例方法，您需要先创建一个实例。

```
Scanner scan = new Scanner();
scan.next(); 
```

如果您尝试从静态上下文调用实例方法，那么它不知道要针对哪个实例运行它，这就是您收到错误的原因。

由于主方法必须是静态的，因此您有两个选择，首先，如果您希望该`getArtist`方法作为类的一部分，则将其设为静态：

```
public static String getArtist(){ 
```

然后你可以在你的代码中调用它：

```
mainArtist = getArtist(); 
```

但是由于您的 CD 类正在存储数据，因此`getArtist`作为您当前拥有的实例方法可能会更好。这意味着您要在实例上调用该方法：

```
CD myCD = new CD("Awesomeguy", "AwesomeCDName");
mainArtist = myCD.getArtist(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:19:10.363

使用 static 关键字或在 main 中，创建定义 getArtist 函数的类的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T05:39:26.840

```
public static void main(String[] args) {
    String mainArtist;
    String mainTitle;
    CD myCD = new CD("Awesomeguy", "AwesomeCDName");
    mainArtist = myCD.getArtist(); 
    System.out.println(mainArtist);
}

public String getArtist(){
    String person;
    person = artist;
    return person;
}
if you change the method public String getArtist() to public static String getArtist() 
then call mainArtist = getArtist(); 
```

# c++ - C ++：变量'std :: ifstream ifs'具有初始化程序但类型不完整

> ID：15080231
> 
> 赞同：164
> 
> 时间：2013-02-26T02:17:55.270
> 
> 标签：c++, fstream, return-type

对不起，如果这很无聊，但我对 C++ 很陌生。我正在尝试打开一个文件并使用`ifstream`：

```
vector<string> load_f(string file) {
  vector<string> text;

  ifstream ifs(file);
  string buffer, str_line;

  int brackets = 0;
  str_line = "";

  while ( getline(ifs, buffer) ) {
    buffer = Trim( buffer );
    size_t s = buffer.find_first_of("()");

    if (s == string::npos) str_line += "" + buffer;
    else {
      while ( s != string::npos ) {
        str_line += "" + buffer.substr(0, s + 1);
        brackets += (buffer[s] == '(' ? 1 : -1);

        if ( brackets == 0 ) {
          text.push_back( str_line );
          str_line = "";
        }

        buffer = buffer.substr(s + 1);
        s = buffer.find_first_of("()");
      }
    }
  }

  return text;
} 
```

但是，我收到以下错误，我不太确定如何解决：

```
variable 'std::ifstream ifs' has initializer but incomplete type 
```

答案非常感谢。请注意，我从来没有忘记`#include <fstream>`，因为许多人因为忘记包含标题而得到错误。

**编辑：**

原来我确实忘记了 include `fstream`，但由于将函数移动到另一个文件而我忘记了。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2015-09-18T14:26:02.867

This seems to be answered - `#include <fstream>`.

The message means :-

`incomplete type` - the class has not been defined with a full class. The compiler has seen statements such as `class ifstream;` which allow it to understand that a class exists, but does not know how much memory the class takes up.

The forward declaration allows the compiler to make more sense of :-

```
void BindInput( ifstream & inputChannel ); 
```

It understands the class exists, and can send pointers and references through code without being able to create the class, see any data within the class, or call any methods of the class.

The `has initializer` seems a bit extraneous, but is saying that the incomplete object is being created.

# objective-c - iPhone 通话信息

> ID：15080232
> 
> 赞同：-4
> 
> 时间：2013-02-26T02:17:57.323
> 
> 标签：objective-c, ios5, ios6, phonegap-plugins

我正在尝试通过单击应用程序来编写 PhoneGap 插件。我只想获取电话号码和通话时间。有没有人有任何在跨平台或本机 Objective-C 中编码的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T03:56:45.433

在未越狱设备上的任何版本的 iOS 下，这是不可能的，并且应用商店不接受任何类型的操作来获取此信息。

# javascript - 应用程序socket.io中的结构和使用

> ID：15080233
> 
> 赞同：0
> 
> 时间：2013-02-26T02:18:12.853
> 
> 标签：javascript, node.js, express, socket.io

我想为我的应用程序创建一个结构，但不知道如何从子路由器调用 socket.io 并将其附加到服务器 express

//app.js

```
var express = require('express')
 , http = require('http')
 , path = require('path'):
 , i18n = require("i18n");

var app = express();
.
.
app.use(app.router);
require('./routes')(app);
http.createServer(app).listen(app.get('port'), function(){
   console.log("Express port " + app.get('port'));
}); 
```

//routes.js

```
module.exports = function (app) {
 var rou_admin = require('./routers/admin')
 ,   rou_login = require('./routers/login')
 ,   rou_page  = require('./routers/page')
 ,   rou_logou = require('./routers/logout');

function restrict(req, res, next) {
  if (req.session.user){
    next();
  } else {
    res.redirect('/login');
  }
}

//General
app.get('/', rou_page.page); 

//Admin
app.get('/admin', rou_admin.admin);
//xxxx
app.get('/xxxx', rou_admin.xxxx);
//ssss
app.get('/ssss', rou_admin.ssss);
.
.
}; 
```

//路由/admin.js

```
 exports.admin = function(req, res){
  res.render('index',{title: 'Chat Room'})
  var io = require('socket.io').listen(app);

  io.sockets.on('connection', function(socket) {
          ...code...
  }
}; 
```

我怎么能这样做，如果你有更好的主意。var io = require('socket.io').listen(app);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:02:16.183

您已经获得了大部分解决方案。只需进行一些更改：

路由.js

```
module.exports = function (app) {
var rou_admin = require('./routers/admin')(app),  //pass app to routes/admin.js itself 
```

路线/admin.js

```
function admin(app)
{

  admin.start= function(req, res){
  res.render('index',{title: 'Chat Room'})
  var io = require('socket.io').listen(app);

          ...code...
  };
}
module.exports = admin; 
```

这里它只是定义了函数，你可以使用 admin.start() 来执行你的代码。

# c# - 使用反射动态加载程序集和实例化类型

> ID：15080235
> 
> 赞同：-1
> 
> 时间：2013-02-26T02:18:20.650
> 
> 标签：c#, .net, reflection, abstract-class

我需要使用需求动态加载类的实例并将其转换为各种基本类型。现在，在阅读并尝试一些示例时，我发现在运行时处理类时，我可能不了解我需要了解的所有内容。

我有一种情况，抽象类 B 实现接口 A。现在 B 类是 C 类的基类。当我在运行时动态加载包含所有 3 种类型的程序集时，我希望我应该能够使用 Load从上下文中，加载程序集，创建类 C 的实例，并将其转换为接口 A 的类型。但这似乎根本没有发生，我希望能解释一下原因。提前致谢。

[http://msdn.microsoft.com/en-us/library/2xkww633.aspx](http://msdn.microsoft.com/en-us/library/2xkww633.aspx)

[http://msdn.microsoft.com/en-us/library/1009fa28.aspx](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)

```
public interface ICaseOutputGenerator
{
    String SampleProperty { get; set; }
    void Process();

}

public abstract class CaseOutputGeneratorBase : ICaseOutputGenerator
{
    public String SecondSampleProperty { get; set; }

    public virtual void SecondProcessMethod()
    {
    }

    public abstract void ThirdSampleProcessMethod();

    public string SampleProperty
    {
        get;
        set;
    }

    public void Process()
    {
        Console.WriteLine("Process in CaseOutputGeneratorBase Called");
    }
}

public class TestCaseOutputGenerator : CaseOutputGeneratorBase
{
    public override void ThirdSampleProcessMethod()
    {
        throw new NotImplementedException();
    }
}

////////////////////////////////////////////////////////////////////////////// 
```

公共类 TestSandBoxManager {

```
 public TestSandBoxManager()
    {

    }

    public String ProcessAssemblyByFullDisplayName(String assemblyFullDisplayName)
    {
        String temp = String.Empty;
        var casecust = GetAssemblyByFullDisplayName(assemblyFullDisplayName);
        if (casecust != null)
            temp = ("Cast Passed");
        else
            temp = ("Cast Failed");

        return temp;

    }

    public String ProcessFile(String assemblyName, String className)
    {
        String temp = String.Empty;
        var casecust = GetCaseOutputGeneratorObject(assemblyName, className);
        if (casecust != null)
            temp=("Cast Passed");
        else
            temp=("Cast Failed");

        return temp;

    }

    private static object GetAssemblyByFullDisplayName(string fullName)
    {
        try
        {
            Type caseOutputGen = null;
            String fullQualifiedName = String.Empty;
            var localAssembly = Assembly.LoadFrom(fullName);

            foreach (var testType in localAssembly.GetTypes())
            {

                if ( testType.FullName != fullName)
                    continue; 
                fullQualifiedName = testType.FullName;
                break;
            }
            if (fullQualifiedName == null)
                return null;

            var obj = Activator.CreateInstance(Type.GetType(fullQualifiedName));
            return obj;
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

    public String ProcessFile2(String assemblyName, String className)
    {
        String temp = String.Empty;
        var casecust = GetCaseOutputGeneratorObjectLoadFrom(assemblyName, className);
        if (casecust != null)
            temp = ("Cast Passed");
        else
            temp = ("Cast Failed");

        return temp;

    }

    public static ICaseOutputGenerator GetCaseOutputGeneratorObject(string assemblyName, string className)
    {
        ICaseOutputGenerator caseOutputGen = null;

        var obj = GetObject(assemblyName, className);
        if (obj != null)
            caseOutputGen = (ICaseOutputGenerator)obj; // FAILS HERE
        return caseOutputGen;
    }

    public static ICaseOutputGenerator GetCaseOutputGeneratorObjectLoadFrom(string assemblyName, string className)
    {
        ICaseOutputGenerator caseOutputGen = null;

        try
        {
            var obj = GetObject2(assemblyName, className);
            if (obj != null)
                caseOutputGen = (ICaseOutputGenerator)obj; // FAILS HERE
        }
        catch (Exception ex)
        { 
            throw ex;
        }
        return caseOutputGen; 
    }

    private static object GetObject2(string fullName, string className)
    {
        try
        {
            Type caseOutputGen = null;
            String fullQualifiedName = String.Empty;
            var localAssembly = Assembly.LoadFrom(fullName);

            foreach (var testType in localAssembly.GetTypes())
            {

                if (!testType.FullName.EndsWith(className, StringComparison.InvariantCultureIgnoreCase)) 
                continue;
                caseOutputGen = testType;
                fullQualifiedName = testType.FullName;
                break;
            }
            if (caseOutputGen == null) 
                return null;

            var obj = Activator.CreateInstanceFrom(fullName, fullQualifiedName);
            return obj.Unwrap();
        } 
        catch (Exception ex)
        {
            throw ex;
        }
    }

    private static object GetObject(string fullName, string className)
    {
        try
        {
            Type caseOutputGen = null;
            var localAssembly = Assembly.LoadFrom(fullName);
            foreach (var testType in localAssembly.GetTypes())
            {
                if (!testType.FullName.EndsWith(className, StringComparison.InvariantCultureIgnoreCase)) continue;
                caseOutputGen = testType;
                break;
            }
            if (caseOutputGen == null) return null;

            var obj = Activator.CreateInstance(caseOutputGen);
            return obj;
        }
        catch (FileNotFoundException ex)
        {
            throw new Exception("Failed to load assembly: " + Environment.NewLine + fullName, ex);
        }
        catch (Exception ex)
        {
            throw new Exception("Failed to load assembly: " + Environment.NewLine + fullName, ex);
        }
    }
}

//////////////////////////////////////////////////////////////////////////////

public Boolean testReflection2()
    {
        try
        {
            //create an instance of the testsandboxmanager
            TestSandBoxManager t = new TestSandBoxManager();
            String ret = t.ProcessFile2(@"...\Documents\visual studio 2012\Projects\TestSandBox\TestSandBox\bin\Debug\TestSandBox.dll", "TestCaseOutputGenerator");
            Console.WriteLine(ret);
            Console.ReadLine();

            return true;
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

![我的解决方案的图像，以帮助那些到目前为止理解问题的人](../Images/27a177599288e76ff65f7abf607fbd6c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:54:44.690

很可能您`ICaseOutputGenerator`在每个程序集中有 2 个 - 一个。即使代码相同，您也不能将对象/接口转换为另一个程序集中类似命名的接口。`ICaseOutputGenerator`您可以通过查看调试器中创建的对象来检查创建对象从其自己的程序集中实现的事实。

如果是这种情况，您需要确定要放置`ICaseOutputGenerator`接口的位置，以便它来自“自定义加载程序集”和主应用程序的相同程序集。通常共享接口在单独的程序集中实现并链接到所有“插件”程序集以及应用程序程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:04:43.423

我认为阿列克谢列文科夫是正确的。你加载你的 TestSandBox.dll 两次。一次作为对您的项目的引用，第二次通过 Assembly.LoadFrom。根据[您自己链接的文档，](http://msdn.microsoft.com/en-us/library/1009fa28.aspx)这可能会导致意外行为。这是一个报价供您参考：

> 如果使用 LoadFrom 加载程序集，并且探测路径包括具有相同标识但位置不同的程序集，则可能会发生 InvalidCastException、MissingMethodException 或其他意外行为。

这正是您的情况。如果将加载程序集的路径更改为指向与主可执行文件相同的文件夹，它将正常工作。

# jquery - 更改放置引导工具提示

> ID：15080237
> 
> 赞同：2
> 
> 时间：2013-02-26T02:18:33.297
> 
> 标签：jquery, twitter-bootstrap, tooltip

我想从Boostrap制作工具提示，当输入选择已选择已选择时，请在Element HTML中显示ToolTip。我已经在 javascipt/jquery 中编写了该代码。这是代码：

```
 $('#pembayaran').on('change', function(){
        if($(this).val()=='GRATIS' && $('#keterangan').val()==''){
            $('#keterangan').attr('title', 'Keterangan wajib disi!').tooltip('show');
        }
    }); 
```

我想在右侧制作工具提示位置。

我尝试代码

```
 $('#pembayaran').on('change', function(){
        if($(this).val()=='GRATIS' && $('#keterangan').val()==''){
            $('#keterangan').attr('title', 'Keterangan wajib disi!').tooltip('show', {
               placement: 'right'
            });
        }
    }); 
```

但这段代码不起作用。你能帮助我吗。请

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T03:03:30.217

引导插件方法采用一个参数，而不是两个。此方法调用：

```
$('#keterangan').attr('title', 'Keterangan wajib disi!').tooltip('show', {
    placement: 'right'
}); 
```

是不正确的。相反，您应该保持原来的 on change 功能，并调用：

```
$('#keterangan').tooltip({ placement: 'right' }); 
```

更早地设置工具提示选项（例如文档准备就绪时）。

另一种可能更简单的替代方法是添加`data-position="right"`到显示弹出窗口的元素中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T07:35:48.763

在 html 中：

```
<a href="sample.html" data-placement="right" rel="tooltip" title="This is a tooltip">Hover me!</a> 
```

在jQuery中：

```
$(function(){
    $("[rel='tooltip']").tooltip();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-07T11:52:34.267

这对我有用

```
 $('.mytooltip').tooltip('destroy');
    $('.mytooltip').tooltip({ placement: 'right' }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-30T21:00:38.250

对于我的情况，我需要根据屏幕尺寸更改工具提示的位置，作为一种解决方案，我会监听分辨率更改事件，然后在事件处理程序中我销毁旧的工具提示并添加一个新的工具提示，其位置根据新的宽度尺寸：

```
$(document).ready(function() {
    var enablePasswordTooltip = function() {
        var passwordTooltipContent = $('#PasswordTooltipContent').html();
        var isMobileResolution =  ($(window).width() < 700);
        $('input.password-tooltip').tooltip({
            'trigger': 'focus',
            'placement': isMobileResolution ? 'top' : 'right',
            'html': true,
            'title': passwordTooltipContent
        });
    };

    // Enable the Password tooltip when the page is loaded
    enablePasswordTooltip();

    $(window).resize(function() {
        // After the resolution changes, destroy the tooltip and add it again in order to adjust to the new resolution
        $('input.password-tooltip').tooltip('destroy'); 
        setTimeout(function(){
            enablePasswordTooltip();
        }) 
    });
}); 
```

# c - (C) 如何修复 z827 ASCII 压缩算法？

> ID：15080239
> 
> 赞同：1
> 
> 时间：2013-02-26T02:18:49.497
> 
> 标签：c, algorithm, compression, bit-manipulation

菜鸟警告。

我正在尝试创建一个压缩程序。它将带有 ASCII 字符的 .txt 作为参数，并切断每个字符的二进制表示的前导 0。

它通过使用两个不同整数的最后 2 个字节来做到这一点。带前导零的字符被放入整数“write”的第 4 个字节，下一个字符被放入整数“temp”的第 3 个字节。然后将'temp' int 向右移动一次，然后与'write' 进行或运算，这样前导零槽就被我们需要的数据填充了。这重复，移位计数器在每个字符后增加。第一种情况有点奇怪。如果写在纸上，算法并不是很复杂。

我觉得我什么都试过了。我已经研究过算法很多次了。我很确定问题出在 shift_counter 达到 8 .. 但它应该可以正常工作。它只是没有。我可以在这里告诉你为什么（代码在下面）：

这是我的输出的十六进制转储：

```
0000000    3f  00  00  00  41  10  68  9e  6e  c3  d9  65  10  88  5e  c6
0000020    d3  41  e6  74  9a  5d  06  d1  df  a0  7a  7d  5e  06  a5  dd
0000040    20  3a  bd  3c  a7  a7  dd  67  10  e8  5d  a7  83  e8  e8  72
0000060    19  a4  c7  c9  6e  a0  f1  f8  dd  86  cb  cb  f3  f9  3c    
0000077 
```

和正确的输出：

```
0000000    3f  00  00  00  41  d0  3c  dd  86  b3  cb  20  7a  19  4f  07
0000020    99  d3  ec  32  88  fe  06  d5  e7  65  50  da  0d  a2  97  e7
0000040    f4  b4  fb  0c  7a  d7  e9  20  3a  ba  0c  d2  e3  64  37  d0
0000060    f8  dd  86  cb  cb  f3  79  fa  ed  76  29  00  0a  0a        
0000076 
```

代码：

```
int compress(char *filename_ptr){

    int in_fd;
    in_fd = open(filename_ptr, O_RDONLY);

    //set pointer to the end of the file, find file size, then reset position 
    //by closing/opening
    unsigned int file_bytes = lseek(in_fd, 0, SEEK_END);
    close(in_fd);
    in_fd = open(filename_ptr, O_RDONLY);

    //store file contents in buffer
    unsigned char read_buffer[file_bytes];
    read(in_fd, read_buffer, file_bytes);

    //file where the output will be stored
    int out_fd;
    creat("output.txt", 0644);
    out_fd = open("output.txt", O_WRONLY);

    //sets file size in header (needed for decompression, this is the size of the
    //file before compression. everything after this we write this 4-byte int
    //is a 1 byte char
    write(out_fd, &file_bytes, 4);

    unsigned int writer;
    unsigned int temp;
    unsigned char out_char;

    int i;
    int shift_count = 8;
    for(i = 0; i < file_bytes; i++){

      if(shift_count == 8){
          writer = read_buffer[i];
          temp = temp & 0x00000000;
          temp = read_buffer[i+1] << 8;
          shift_count = 1;
      }else{

        //moves the next char's bits to the left, for the purpose of filling the
        //8 bit buffer (writer) via OR operation
        temp = read_buffer[i] << 8;
      }
      temp = temp >> shift_count;
      writer = writer | temp;

      //output right byte of writer
      unsigned int right_byte = writer & 0x000000ff;

      //output right_byte as a char
      out_char = (char) right_byte;

      //write_buffer[i] = out_char;
      write(out_fd, &out_char, 1);

      //clear right side of writer
      writer = writer & 0x0000ff00;

      //shift left side of writer to the right by 8
      writer = writer >> 8;        

      shift_count++;

    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T00:11:37.293

在我看来，输入和输出耦合太强了。

在某些时候，程序*应该*从输入中读取（大致）第 80 个八位字节，并将第 70 个八位字节写入（大致）到输出，因为您希望（平均）为您读取的每 8 位写入 7 位，正确的？

什么循环

```
for(i = 0; i < file_bytes; i++){
    ...
    ... = read_buffer[i];
    ...
    write(out_fd, &out_char, 1);
    ...
} 
```

实际上似乎正在做的是：在第 70 次通过循环时——当 70==i 时——它从输入读取第 70 个八位字节并将第 70 个八位字节写入输出。在第 80 次通过循环时——当 80==i 时——它从输入读取第 80 个八位字节并将第 80 个八位字节写入输出。

您必须决定：您希望“i”代表处理的*输入*字符数，还是处理的*输出*字符数？因为不可能两者都做——不可能有 70 等于 80。

也许这样的事情更接近你想要的：

```
/* test.c
http://stackoverflow.com/questions/15080239/c-how-to-fix-this-algorithm-for-z827-ascii-compression
WARNING: untested code.
*/

int compress(char *filename_ptr){

    int in_fd;
    in_fd = open(filename_ptr, O_RDONLY);

    //set pointer to the end of the file, find file size, then reset position 
    //by closing/opening
    unsigned int file_bytes = lseek(in_fd, 0, SEEK_END);
    close(in_fd);
    in_fd = open(filename_ptr, O_RDONLY);

    //store file contents in buffer
    unsigned char read_buffer[file_bytes];
    read(in_fd, read_buffer, file_bytes);

    //file where the output will be stored
    int out_fd;
    creat("output.txt", 0644);
    out_fd = open("output.txt", O_WRONLY);

    //sets file size in header (needed for decompression, this is the size of the
    //file before compression. everything after this we write this 4-byte int
    //is a 1 byte char
    write(out_fd, &file_bytes, 4);

    unsigned int writer;
    unsigned int temp;
    unsigned char out_char;

    int i;
    int writer_bits = 0; // 0 bits of data in writer so far
    for(i = 0; i < file_bytes; i++){
      // i is the number of (7 bit ASCII) characters
      // read from the input so far.

      // add 7 more bits to the writer
      temp = read_buffer[i];
      //moves the next char's bits to the left, for the purpose of filling the
      //8 bit buffer (writer) via OR operation
      //(avoid overwriting the "writer_bits" of good bits
      //already in the buffer).
      temp = read_buffer[i] << writer_bits;
      writer = writer | temp;
      writer_bits = writer_bits + 7;

      //output right byte of writer
      unsigned int right_byte = writer & 0x000000ff;

      //output right_byte as a char
      out_char = (unsigned char) right_byte;

      // output 8 bits of data whenever
      // we have *at least* 8 bits of data in the writer buffer.
      if(writer_bits >= 8){

          //write_buffer[i] = out_char;
          write(out_fd, &out_char, 1);

          //shift left side of writer to the right by 8
          writer = writer >> 8;

          writer_bits = writer_bits - 8;
      }else{
          // 7 or fewer bits in writer --
      // skip writing until next time.
      }
    }

    // is there any leftover bits still in writer?
    if(writer_bits > 0){
          //write_buffer[i] = out_char;
          write(out_fd, &out_char, 1);
    }
    return 0;
} 
```

（目前程序将整个输入文件读入RAM，然后写入整个输出文件。有些程序员喜欢一次读一点，然后一次写一点。两种方法都有优点和缺点）。

# php - 单击后，Div 内容在 jQuery 选项卡中消失？

> ID：15080241
> 
> 赞同：0
> 
> 时间：2013-02-26T02:19:02.743
> 
> 标签：php, jquery, css, html

因此，我尝试`<div>`在此 jQuery 选项卡中使用 's，并在刷新页面后 div 内容显示正常。但是当我从一个选项卡切换到另一个选项卡并返回时，内容消失了。我不确定为什么会这样。

```
<script type="text/javascript">

$(document).ready(function(){
$('#tabs > div').hide();    
$('#tabs div:first').show();
$('#tabs ul li:first').addClass('active');
$('#tabs ul li a').click(function(){ 
$('#tabs ul li').removeClass('active');
$(this).parent().addClass('active'); 
var currentTab = $(this).attr('href'); 
$('#tabs div').hide();
$(currentTab).show();
return false;
});
});
</script>
<style type="text/css">
* {
margin: 0;
padding: 0;
}
#tabs {
font-size: 80%;
margin: 10px 0;
}
#tabs ul {
width: 600px;
padding-top: 2px;
}
#tabs li {
margin-left: 30px;
list-style: none;
}
* html #tabs li {
display: inline;
}
#tabs li, #tabs li a {
float:left;
}
#tabs ul li.active {
border-top:2px #8B6914 solid;
background-color: #a09069;
}
#tabs div {
background: #a09069;
clear: both;
padding: 8px;
min-height: 720px;
}
#tabs div h3 {
margin-bottom: 20px;
}
#tabs div p {
line-height: 150%;
}
#tabs ul li a {
text-decoration: none;
padding: 8px;
color: #000;
font-weight: bold;
    font-size: 22;
}

-->
</style>
</head>
<body>
<div id="container">
<div id="tabs">
<ul>
  <li><a href="#tab-1">DC Boards</a></li>
  <li><a href="#tab-2">RP Boards</a></li>
</ul>

<div id="tab-1">
  <br><br><center><font size="17">Title 1</font></center><hr>
  <div>Test</div>
</div>

<div id="tab-2">
  <br><br><center><h1>Title 2</h1></center><hr><br>
  <div>Test</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:26:48.697

你有一个`$('#tabs div').hide();`而不是`$('#tabs > div').hide();`你的`.click function`

```
<script type="text/javascript">

$(document).ready(function(){
    $('#tabs > div').hide();    
    $('#tabs div:first').show();
    $('#tabs ul li:first').addClass('active');
    $('#tabs ul li a').click(function(){ 
        $('#tabs ul li').removeClass('active');
        $(this).parent().addClass('active'); 
        var currentTab = $(this).attr('href'); 
        $('#tabs > div').hide();
            // a > were missing
        $(currentTab).show();
        return false;
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:26:56.267

它消失了，因为您隐藏了所有 div

```
$('#tabs div').hide(); 
```

相反，您应该只隐藏第一级：

```
$('#tabs')children('div').hide(); 
```

# java - JFrame 上特定扩展名的 Java Drag-n-Drop 文件

> ID：15080244
> 
> 赞同：5
> 
> 时间：2013-02-26T02:19:19.820
> 
> 标签：java, swing, drag-and-drop, jframe

我想为我的应用程序实现 DnD 以仅接受特定扩展名的文件（例如 wrl）。如果文件将被接受，我想将光标更改为拖动光标，并在拖放错误扩展名的文件时恢复为正常光标。

[我一直在关注http://docs.oracle.com/javase/tutorial/uiswing/dnd/toplevel.html](http://docs.oracle.com/javase/tutorial/uiswing/dnd/toplevel.html)中的以下教程/示例

我所做的更改在 canImport 函数中

```
 public boolean canImport(TransferHandler.TransferSupport support) 
    {
        if (!support.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) 
        {
            return false;
        }

        Transferable t = support.getTransferable();

        try 
        {
          java.util.List<File> l = (java.util.List<File>)t.getTransferData(DataFlavor.javaFileListFlavor);
          if (l.size() != 1)
          {
            return false;
          }

          File f = l.get(0);

          String extension = f.getName().substring(f.getName().lastIndexOf("."));

          return extension.equalsIgnoreCase(".wrl");
        } 

        catch (UnsupportedFlavorException e) 
        {
            return false;
        } 
        catch (IOException e) 
        {
            return false;
        }
    } 
```

当我在不同的文件中拖动时，这行为正确。但是，当我删除文件时，出现以下异常

```
Exception in thread "AWT-EventQueue-0" java.awt.dnd.InvalidDnDOperationException: No drop current
    at sun.awt.dnd.SunDropTargetContextPeer.getTransferData(SunDropTargetContextPeer.java:227)
    at sun.awt.datatransfer.TransferableProxy.getTransferData(TransferableProxy.java:56)
    at java.awt.dnd.DropTargetContext$TransferableProxy.getTransferData(DropTargetContext.java:359)
    at appl.TopLevelTransferHandlerDemo$1.canImport(TopLevelTransferHandlerDemo.java:207)
    at javax.swing.TransferHandler$DropHandler.drop(TransferHandler.java:1454)
    at java.awt.dnd.DropTarget.drop(DropTarget.java:434)
    at javax.swing.TransferHandler$SwingDropTarget.drop(TransferHandler.java:1193)
    at sun.awt.dnd.SunDropTargetContextPeer.processDropMessage(SunDropTargetContextPeer.java:519)
    at sun.awt.dnd.SunDropTargetContextPeer$EventDispatcher.dispatchDropEvent(SunDropTargetContextPeer.java:832)
    at sun.awt.dnd.SunDropTargetContextPeer$EventDispatcher.dispatchEvent(SunDropTargetContextPeer.java:756)
    at sun.awt.dnd.SunDropTargetEvent.dispatch(SunDropTargetEvent.java:30)
    at java.awt.Component.dispatchEventImpl(Component.java:4487)
    at java.awt.Container.dispatchEventImpl(Container.java:2099)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4577)
    at java.awt.LightweightDispatcher.processDropTargetEvent(Container.java:4312)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4163)
    at java.awt.Container.dispatchEventImpl(Container.java:2085)
    at java.awt.Window.dispatchEventImpl(Window.java:2478)
    at java.awt.Component.dispatchEvent(Component.java:4460)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T03:06:18.230

上次我检查时，这在 Mac 上不起作用，但 Java 7 可能已经改变了......

![在此处输入图像描述](../Images/d3a163affdf1ded98d555cea02ce639a.png)![在此处输入图像描述](../Images/3d1284746d3be08b6667d5e9418dd102.png)![在此处输入图像描述](../Images/f002abc1fb5dc708a2a70f6fbbd9efee.png)

现在，请记住，当谈到拖放时，没有简单的答案可以解决所有问题。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DropTarget;
import java.awt.dnd.DropTargetDragEvent;
import java.awt.dnd.DropTargetDropEvent;
import java.awt.dnd.DropTargetEvent;
import java.awt.dnd.DropTargetListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.List;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestDragNDrop {

    public static void main(String[] args) {
        new TestDragNDrop();
    }

    public TestDragNDrop() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class TestPane extends JPanel implements DropTargetListener {

        public enum DragState {

            Waiting,
            Accept,
            Reject
        }
        private DragState state = DragState.Waiting;
        private BufferedImage happy;
        private BufferedImage wait;
        private BufferedImage sad;

        public TestPane() {
            DropTarget dt = new DropTarget(
                    this,
                    DnDConstants.ACTION_COPY_OR_MOVE,
                    this,
                    true);

            setBackground(Color.BLACK);
            try {
                happy = ImageIO.read(getClass().getResource("/Happy.png"));
                wait = ImageIO.read(getClass().getResource("/Wait.png"));
                sad = ImageIO.read(getClass().getResource("/Sad.png"));
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(300, 300);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            BufferedImage bg = null;
            switch (state) {
                case Waiting:
                    bg = wait;
                    break;
                case Accept:
                    bg = happy;
                    break;
                case Reject:
                    bg = sad;
                    break;
            }
            if (bg != null) {
                int x = (getWidth() - bg.getWidth()) / 2;
                int y = (getHeight() - bg.getHeight()) / 2;
                g.drawImage(bg, x, y, this);
            }
        }

        @Override
        public void dragEnter(DropTargetDragEvent dtde) {
            state = DragState.Reject;
            Transferable t = dtde.getTransferable();
            if (t.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
                try {
                    Object td = t.getTransferData(DataFlavor.javaFileListFlavor);
                    if (td instanceof List) {
                        state = DragState.Accept;
                        for (Object value : ((List) td)) {
                            if (value instanceof File) {
                                File file = (File) value;
                                String name = file.getName().toLowerCase();
                                if (!name.endsWith(".png")) {
                                    state = DragState.Reject;
                                    break;
                                }
                            }
                        }
                    }
                } catch (UnsupportedFlavorException | IOException ex) {
                    ex.printStackTrace();
                }
            }
            if (state == DragState.Accept) {
                dtde.acceptDrag(DnDConstants.ACTION_COPY);
            } else {
                dtde.rejectDrag();
            }
            repaint();
        }

        @Override
        public void dragOver(DropTargetDragEvent dtde) {
        }

        @Override
        public void dropActionChanged(DropTargetDragEvent dtde) {
        }

        @Override
        public void dragExit(DropTargetEvent dte) {
            state = DragState.Waiting;
            repaint();
        }

        @Override
        public void drop(DropTargetDropEvent dtde) {
            state = DragState.Waiting;
            repaint();
        }
    }
} 
```

# php - 正则表达式查找所有被调用的函数

> ID：15080245
> 
> 赞同：1
> 
> 时间：2013-02-26T02:19:23.280
> 
> 标签：php, regex, parsing, preg-match-all

我正在尝试构建一个正则表达式来查找字符串中的所有函数调用。例如：

```
 No No       No       No         Yes       Yes        No DOT YES   NO    YES
 |  |        |        |           |         |         |   |   |     |      |
(1, 2, 3 * (1/4), 'somestr()', findme(), andme ( ), 'and' . me(), NTME, me(0) ) 
```

* * *

```
 No        No          No
   |         |           |
(CONST, 'some"q()', "nop\"no()") 
```

字符串将始终采用参数列表 eq => 的格式`(a,b,c...)`

请注意，在`'and' . me()`它的情​​况下应该只匹配`me()`部分

到目前为止，我能够使用[**它**](https://stackoverflow.com/a/5696141/465546)来创建一个匹配引号*内任何内容的正则表达式：*

```
'/' . 
    '(?:\'[^\'\\\\]*(?:\\\\.[^\'\\\\]*)*\')' .      // single quoted string
        '|' .                                       //   or
    '(?:"[^"\\\\]*(?:\\\\.[^"\\\\]*)*")' .          // double quoted string
'/s'; 
```

我需要的是一个正则表达式，它将匹配上述正则表达式中**没有的任何内容**`\w\s*\(`

为了澄清我正在尝试匹配上面有 Yes 的任何东西

我将如何编写这样的正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:10:11.563

我同意上面关于标记器的评论，但这里是你可以如何使用正则表达式来实现这一点。

首先，php允许环视，所以你可以匹配`\w\s*\(`前面*没有*'或"的：

```
(?<!["'])\b\w+\s*\( 
```

（请参阅[此处的交互式正则表达式](http://regexr.com?33tje)）

The`(?<!["'])`表示“前面没有`"`or `'`”。这`\b`意味着我们应该匹配整个函数名而不是从中间开始。

要将其转换为 php 语法，我认为您将反斜杠加倍（额外的反斜杠转义总是让我感到困惑）：

```
'/(?<!["\'])\\b(\\w+)\\s*\\(/s' 
```

另外，请注意，因为`\w`is `[0-9a-zA-Z_]`，这将匹配`2()`。它也将匹配`no`in `"asdf no()"`which is inside 引号，因为没有`'`或`"`紧接在`no`.

在这种情况下，您可以另外指定右括号*后*没有引号，如下所示：

```
(?<!["'])\b\w+\s*\([^)]+\)(?!'") 
```

其中`(?!'")`“不跟随`'`或`"`”。

这引入了一组新问题，例如，如果您的函数调用中有嵌套括号（`matchme('(asdf)')`不匹配）。对于此类情况，您可以继续调整和调整正则表达式，但总会有一些东西会破坏正则表达式，最后，**使用标记器或解析器更容易**。

# cuda - cuda占用计算器

> ID：15080248
> 
> 赞同：1
> 
> 时间：2013-02-26T02:19:33.437
> 
> 标签：cuda

我在编译我的 .cu 代码时使用了 --ptax-options=-v ，它给出了以下内容：

```
ptxas info: Used 74 registers, 124 bytes smem, 16 bytes cmem[1] 
```

我的卡的 devQuery 返回以下内容：

```
rev:  2.0
name: tesla c2050
total shared memory per block: 49152
total reg. per block: 32768 
```

现在，我将这些数据输入到 cuda 占用计算器中，如下所示：

```
1.) 2.0
1.b) 49152
2.) threads per block: x
    registers per thread: 74
    shared memory per block (bytes): 124 
```

我正在改变 x（每个块的线程数），以便 x*74<=32768。例如，我输入 128（或 256）代替 x。我是否通过占用计算器正确输入了所有必需的值？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:57:06.827

`ptxas-options=--verbose`（或 -v）产生格式的输出

```
ptxas : info : Compiling entry function '_Z13matrixMulCUDAILi16EEvPfS0_S0_ii' for 'sm_10'
ptxas : info : Used 15 registers, 2084 bytes smem, 12 bytes cmem[1] 
```

关键信息是

*   第一行有目标架构
*   第二行有`<Registers Per Thread>, <Static Shared Memory Per Block>, <Constant Memory Per Kernel>`

当您填写入住计算器时

*   设置字段 1。）在上面的示例中选择 Compute Capability 为“sm_10”
*   设置字段 2。）将每个线程注册到
*   设置字段 2.) 每块共享内存为 + DynamicSharedMemoryPerBlock 作为第三个参数传递给`<<<GridDim, BlockDim, DynamicSharedMemoryPerBlock, Stream>>>`

占用计算器帮助选项卡包含附加信息。

在您的示例中，我认为您没有正确设置字段 1，因为 Fermi 架构限制为每线程 63 个寄存器。sm_1* 支持每个线程 124 个寄存器的限制。

# regex - vim 语法折叠（无意）创建嵌套折叠

> ID：15080254
> 
> 赞同：1
> 
> 时间：2013-02-26T02:20:30.237
> 
> 标签：regex, vim, folding, vim-syntax-highlighting

我正在尝试将 vim 折叠到现有的喷泉.io 标记语言的语法文件中。现有的语法文件在这里：[http ://www.vim.org/scripts/script.php?script_id=3880](http://www.vim.org/scripts/script.php?script_id=3880)

但无论我做什么，我的折叠区域都不会在我期望的地方结束。当我在搜索中测试它们时，正则表达式工作得很好。但是当在语法区域中使用时，它们会创建一系列嵌套折叠。折叠从适当的行开始，然后在现有折叠内创建下一个折叠。本质上，我尝试执行以下操作，以便折叠从任何以 INT 或 EXT 开头的行开始，并在一行以 TO: 结尾或以 > 开头的行结束后结束：

```
syn region fountainScene start="^\(INT\|EXT\)" end="^\(\(\L\)* TO:\|\s*>\(.*\)\)$" fold transparent contains=fountainCharacter,fountainDialogue,fountainParenthetical,fountainSceneHeading,fountainTransition 
```

更奇怪的是，如果我在我的 'end' 参数上使用 \ze 来获取匹配行之前的行，它会按您的预期工作。它在匹配上方的线上停止折叠，将最后一行留在折叠之外。以下内容将停止折叠到“CUT TO:”行上方

```
\n\ze\(\L\)* TO:\n 
```

为了排除故障，我基本上是从头开始重建语法文件。这是到目前为止文件中的内容（减去 hi 命令）我已经广泛修改了正则表达式以防止它们相互重叠。原来的正则表达式有这个问题，我认为这可能是原因：

```
syn match fountainCharacter "^\(\s\)*\n\zs\(INT\|EXT\)\@!\(\L\)*[^:]$"
syn region fountainDialogue matchgroup=fountainCharacter start="^\(\s\)*\n\zs\(INT\|EXT\)\@!\(\L\)*[^:]$" end="^\s*$" contains=fountainCharacter,fountainParenthetical
syn match fountainParenthetical "^\s*\((.*)\)$"
syn region fountainSceneHeading start="^\(INT\|EXT\)" end="$" contains=fountainSceneNumber,fountainBoneyard,fountainNotes
syn match fountainTransition "^\(\L\)* TO:$" 
syn region fountainScene start="^\(INT\|EXT\)" end="\n\ze\(\L\)* TO:\n" fold transparent contains=fountainCharacter,fountainDialogue,fountainParenthetical,fountainSceneHeading 
```

感谢您提供的任何帮助，如果我有任何不清楚的地方，请告诉我。我正在使用带有 python 支持的自定义编译的 MacVim 版本 7.3.646。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:06:47.877

我终于想通了。我的元素之一是超出了“结束”的论点。我不得不在我的 syn 区域中使用“keeppend”参数。

这条线修复了一切：

```
syn region fountainScene start="^\s*\(\.\|INT\. \|EXT\. \|INT\./EXT\. \|INT/EXT\. \|INT \|EXT \|INT/EXT \|I/E \|int\. \|ext\. \|int\./ext\. \|int/ext\. \|int \|ext \|int/ext \|i/e \)" end="^\(\(\L\)* TO:\|\s*>[^<]*\)$" fold transparent keepend 
```

有关更多详细信息，请参阅`:he keepend`

# windows-phone - 在windows phone中，如何实现一个类似android的tabview？

> ID：15080255
> 
> 赞同：0
> 
> 时间：2013-02-26T02:20:46.487
> 
> 标签：windows-phone

![这张图是android的tabview](../Images/02151567cec7cefe150ec477c0f81238.png)![这是在枢轴控件中的类似 android 的 tabview](../Images/81b79eed71ac9c08a1fca2a124e19711.png)

**第一张图片**是android的tabview
**第二张图片**是android-like tabview，在pivot control
tabview在*pivot page*的**网格**
中我想要一个结果就像第二张图片
任何建议都会很棒！！！！ ！
谢谢

```
<phone:PhoneApplicationPage 
    x:Class="ewlan.PivotMainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    mc:Ignorable="d" 
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait"  Orientation="Portrait"
    shell:SystemTray.IsVisible="False">

    <Grid x:Name="LayoutRoot" Background="Transparent">

//what's in here?
//i know pivot
//what i need to know is what in the pivot.item
//hope u can know my meanings,any suggestions will be great

    </Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:12:00.493

好吧，如果您创建一个新应用程序并添加一个 Pivot 页面，它将在 Pivot 控件中生成一些页面。我建议您看一下并添加必要的控件。查看[MSDN 参考](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941098%28v=vs.105%29.aspx)以获取更多信息。你会得到这样的东西：

```
<!--LayoutRoot is the root grid where all page content is placed.-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <!--Pivot Control-->
    <controls:Pivot Title="MY APPLICATION">
        <!--Pivot item one-->
        <controls:PivotItem Header="item1">
            <Grid/>
        </controls:PivotItem>

        <!--Pivot item two-->
        <controls:PivotItem Header="item2">
            <Grid/>
        </controls:PivotItem>
    </controls:Pivot>
</Grid> 
```

Pivot 包含 PivotItems，而 PivotItems 又包含您的 UI 元素。

# java - 清除 Java 中的一组单选按钮

> ID：15080256
> 
> 赞同：3
> 
> 时间：2013-02-26T02:21:01.287
> 
> 标签：java, swing, jradiobutton, buttongroup

我有一个程序，它提示用户从四个选项中选择一个（从一组 RadioButtons 中）。

一旦用户做出选择，他/她点击一个按钮，然后收到一条消息。关闭窗口后，用户将返回第一个窗口并根据需要进行新的选择。我想要的是使单选按钮完全清晰。

到目前为止，我已经实现了一种方法来实际取消选择单选按钮并且效果很好（清除变量的值），它没有做的是从先前选择的单选按钮中删除黑点。另一方面，同样的方法适用于取消选择和取消选中复选框。

有什么技巧可以解决这个小问题吗？

这是我的代码：

```
public void clean() {
    jRadioButton1.setSelected(false);
    jRadioButton2.setSelected(false);
    jRadioButton3.setSelected(false);
    jRadioButton4.setSelected(false);
    jCheckBox1.setSelected(false);
    jCheckBox2.setSelected(false);
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-26T02:26:11.570

使它们成为一组按钮，然后`buttonGroup1.clearSelection();`

# python - Django - 由被测代码创建的对象不会出现在测试数据库中

> ID：15080257
> 
> 赞同：0
> 
> 时间：2013-02-26T02:21:01.783
> 
> 标签：python, django

不要浪费你的时间阅读这个问题。下面已经回答了。

我的 settings.py 包含：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'foo.db',
        'TEST_NAME': 'thetest.db'
    }
} 
```

在测试代​​码中是这一行：

```
allShoes = models.Shoe.objects.filter() 
```

allShoes 应该包含对象，因为该表是由 views.py 填充的，但在代码中它是空的。我还在测试代码中放置了一个 set_trace() 来暂停它，并使用 sqlite3 程序验证 foo.db 包含对象，而不是 test.db。

我交替尝试从 django.test.TestCase 和 django.test.TransactionTestCase 派生我的模型类 Shoe。都没有奏效。

我在用着：

```
>>> django.VERSION
(1, 4, 3, 'final', 0) 
```

和

```
(venv)bmac:ol b$ python
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin 
```

对我做错了什么有任何想法吗？

编辑：澄清一下， foo.db 是空的，只是在运行测试之前由 syncdb 创建并且 test.db 不存在。我的测试是一个 Selenium 测试，它会调用一个视图（被测代码的一部分），然后在页面上单击两次。每次点击都有一个调用另一个视图的 AJAX 处理程序；该视图（更多正在测试的代码）在数据库中创建一个条目。因此，最后，在 DB 被测试运行程序销毁之前，应该在 DB 中单击两次。

编辑：我从 DATABASES 中删除了 TEST_NAME 以使问题更简单，尽管我没有看到行为上的差异。在运行测试时，从我的视图代码中我可以运行：

```
models.Shoe.objects.using('default').all() 
```

并查看对象。但是，在我的测试例程中，相同的语句会生成一个空列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:51:53.103

当 Django 测试运行器执行时，不会触及生产数据库。在我们的问题中，`foo.db`您的生产数据库和 Django 是否确保在您运行单元测试时不会触及这一点。相反，它将创建一个**新**数据库，仅用于运行测试。通常这将是一个用于 sqlite 的内存数据库，但由于您已在 中指定`TEST_NAME`，`settings.py`因此测试数据库将是一个名为 的磁盘数据库`thetest.db`。

除非您在测试中调用视图代码以在测试期间填充记录，否则`thetest.db`.

测试用例可能看起来像这样。

```
from django.test import TestCase

class MyTest(TestCase):

    def test_something(self):
        # Simulate a browser POST which would populate an object in Shoes.
        # When the test starts, the db is empty.
        response = self.client.post('/shoe/add/', {
            # Post data here.
        })

        self.assertEqual(
            1,
            models.Shoe.objects.count()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:47:33.670

我还没有确认这个解决方案，但不希望人们花时间阅读这个问题。我相信问题的出现是因为我从我的测试代码中运行 Django 开发服务器，以便我可以模拟连接不稳定。这导致使用生产数据库，并解释了为什么测试数据库为空。哦。

# disqus - 如何获取 Disqus 的所有评论？

> ID：15080258
> 
> 赞同：7
> 
> 时间：2013-02-26T02:21:19.323
> 
> 标签：disqus

我想获取评论系统为 Disqus 的 CNN 上的所有评论。例如，[http ://edition.cnn.com/2013/02/25/tech/innovation/google-glass-privacy-andrew-keen/index.html?hpt=hp_c1](http://edition.cnn.com/2013/02/25/tech/innovation/google-glass-privacy-andrew-keen/index.html?hpt=hp_c1)

评论系统要求我们点击“加载更多”，这样我们才能看到更多评论。我曾尝试使用 php 来解析 html，但由于使用了 javascript，因此无法加载所有评论。所以我想知道是否有人有更方便的方法来从特定的 cnn url 检索所有评论。

有人成功过吗？提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T07:16:19.943

Disqus API 包含一个使用在 JSON 响应中返回的游标的分页方法。有关游标的信息，请参见此处：http: [//disqus.com/api/docs/cursors/](http://disqus.com/api/docs/cursors/)

既然你提到了 PHP，这样的事情应该让你开始：

```
<?php
$apikey = '<your key here>'; // get keys at http://disqus.com/api/ — can be public or secret for this endpoint
$shortname = '<the disqus forum shortname>'; // defined in the var disqus_shortname = '...';
$thread = 'link:<URL of thread>'; // IMPORTANT the URL that you're viewing isn't necessarily the one stored with the thread of comments
//$thread = 'ident:<identifier of thread>'; Use this if 'link:' has no results. Defined in 'var disqus_identifier = '...';
$limit = '100'; // max is 100 for this endpoint. 25 is default

$endpoint = 'https://disqus.com/api/3.0/threads/listPosts.json?api_key='.$apikey.'&forum='.$shortname.'&limit='.$limit.'&cursor='.$cursor;

$j=0;
listcomments($endpoint,$cursor,$j);

function listcomments($endpoint,$cursor,$j) {

    // Standard CURL
    $session = curl_init($endpoint.$cursor);
    curl_setopt($session, CURLOPT_RETURNTRANSFER, 1); // instead of just returning true on success, return the result on success
    $data = curl_exec($session);
    curl_close($session);

    // Decode JSON data
    $results = json_decode($data);
    if ($results === NULL) die('Error parsing json');

    // Comment response
    $comments = $results->response;

    // Cursor for pagination
    $cursor = $results->cursor;

    $i=0;
    foreach ($comments as $comment) {
        $name = $comment->author->name;
        $comment = $comment->message;
        $created = $comment->createdAt;
        // Get more data...

        echo "<p>".$name." wrote:<br/>";
        echo $comment."<br/>";
        echo $created."</p>";
        $i++;
    }

    // cursor through until today
    if ($i == 100) {
        $cursor = $cursor->next;
        $i = 0;
        listcomments($endpoint,$cursor);
        /* uncomment to only run $j number of iterations
        $j++;
        if ($j < 10) {
            listcomments($endpoint,$cursor,$j);
        }*/
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-10T11:09:19.413

只是一个补充：要在找到的任何页面上获取 disqus 评论的 url，请在 Web 浏览器控制台中运行此 JavaScript 代码：

```
var visit = function () {
var url = document.querySelector('div#disqus_thread iframe').src;

String.prototype.startsWith = function (check) {
    return(this.indexOf(check) == 0);
};

if (!url.startsWith('https://')) return url.slice(0, 4) + "s" + url.slice(4);

return url;
}(); 
```

由于变量现在处于“访问”状态

```
console.log(visit); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T09:30:51.393

没有 api：

```
#disqus_thread {
  position: relative;
  height: 300px;
  background-color: #fff;
  overflow: hidden;
}
#disqus_thread:after {
  content: "";
  display: block;
  height: 10px;
  width: 100%;
  position: absolute;
  bottom: 0;
  background: white;
}
#disqus_thread.loaded {
  height: auto;
}
#disqus_thread.loaded:after{
    height:55px;
}
#disqus-load {
  text-align: center;
  color: #fff;
  padding: 11px 14px;
  font-size: 13px;
  font-weight: 500;
  display: block;
  text-align: center;
  border: none;
  background: rgba(29,47,58,.6);
  line-height: 1.1;
  border-radius: 3px;
  font-weight: 500;
  transition: background .2s;
  text-shadow: none;
  cursor:pointer;
}

<div class="disqus-comments">
    <div id='disqus_thread'></div>
    <div id='disqus-load'>Load comments</div>
</div>

<script type="text/javascript">

 $(document).ready(function() {
    var disqus_shortname = 'testare-123';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
        $('#disqus-load').on('click', function(){ 

        $.ajax({
            type: "GET",
            url: "http://" + disqus_shortname + ".disqus.com/embed.js",
            dataType: "script",
            cache: true
        });

        $(this).fadeOut();
        $('#disqus_thread').addClass('loaded');
    });
});
    /* * * CONFIGURATION VARIABLES * * */
    // var disqus_shortname = 'testare-123';

    // /* * * DON'T EDIT BELOW THIS LINE * * */
    // (function() {
    //  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    //  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    //  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    // })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> 
```

# vim - 为什么我的 vim 零宽度正向后向存储反向引用？

> ID：15080259
> 
> 赞同：2
> 
> 时间：2013-02-26T02:21:28.933
> 
> 标签：vim, backreference, regex-lookarounds

我正在使用 Vim，我有以下代码：

```
print "Number 1 = $no1\n";
print "Number 2 = $no2\n"; 
```

当我应用以下替代命令时

```
$s/.*\(\d\\n\)\@<=\(";\)/\1 
```

结果是

```
1\n
2\n 
```

当我用反向引用 \2 代替时

```
$s/.*\(\d\\n\)\@<=\(";\)/\2 
```

结果是

```
";
"; 
```

我认为我在正则表达式中只有一个反向引用（“;） 存储在 \1 中的内容似乎是我在零宽度正向后视中使用的正则表达式，我认为它不会存储在反向引用中。

我弄错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:56:24.807

我认为`\(`始终是一个捕获的反向参考。从我从几次尝试中可以看出，你想要的是 a `\%(`，它是一个非捕获的反向引用。

所以基本上，将你的替代品重写为：

```
$s/.*\%(\d\\n\)\@<=\(";\)/\1 
```

会放

```
"; 
```

反向引用`\1`，而不是`\2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:55:58.920

当您应用以下替代命令时：

```
:%s/.*\(\d\\n\)\@<=\(";\)/\1 
```

...结果是：

```
1\n
2\n 
```

正如所料，因为您在`\1`捕获组中捕获了以下表达式：

```
\(\d\\n\) 
```

...当你用反向引用`\2`代替时

```
:%s/.*\(\d\\n\)\@<=\(";\)/\2 
```

...结果是：

```
";
"; 
```

正如所料，因为您在第二个捕获组中捕获了以下表达式：

```
\(";\) 
```

我不清楚你想做什么。您期望从上述替换中得到什么输出？

# jquery - jQuery ajax 超时功能？

> ID：15080261
> 
> 赞同：1
> 
> 时间：2013-02-26T02:21:37.470
> 
> 标签：jquery

我使用 ajax 发出一个 GET 请求，并期望返回一个 JSON 值。

但是，我的主机安装了防火墙。它每秒只需要 2 个请求，否则会阻塞连接并显示错误页面。（空白页。）因此，如果我在第二个请求中发出 3 个请求，则第三个请求永远不会检索 JSON 响应。因此，loading.gif 不断转动。

如何在 jQuery 中设置超时，比如说 5 秒，所以它会回调超时函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:25:35.113

尝试这个：

```
$.ajax({
    url: YourUrl,
    async: true,
    timeout: 5000,       //5 seconds
    success: function(args) { 

                     // on success code
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:46:34.353

您可以使用超时函数作为参数创建自定义 GET 请求：

```
$.getWithTimeOut = function(url, params, datatype, onsuccessfunction, aftertimeoutfunction, timeout){
     $.get(url, params, function(data) {
          onsuccessfunction(data);
          setTimeout(aftertimeoutfunction, timeout);
     }, datatype);
}; 
```

然后你只需调用：

```
$.getWithTimeOut('url/url', { param1: value1 }, 'json', function(data){
     //success code here
}, function(/*params*/){
   //timeout code here
}, 5000); 
```

# c - “char”类型的参数与 char* 类型的参数不兼容

> ID：15080270
> 
> 赞同：0
> 
> 时间：2013-02-26T02:22:34.340
> 
> 标签：c, visual-studio-2010

我不断收到此错误，不确定如何解决。我是 C 编程的新手，尝试通过书籍/互联网搜索，但找不到太多帮助。我正在尝试创建一个程序，该程序将使用循环和结构打印成绩报告

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct Grades
{
    char Name[20];
    char Hrs;
    int ID;
    char ClassName[20];
    char Grade;
    char ClassID[6];
};

int main ()
{
    struct Grades Transcript[6];
    int classCnt = 0;
    int vHrs=0;
    char vGrade[2];
    char vName[20], vCID[6], vClassName[20];

    printf("Enter Students Name: ");
    fgets(vName, 20, stdin);

    do
    {   printf("Enter Class ID; ");
        fgets(vCID, 6, stdin);
        strcpy_s(Transcript[classCnt].ClassID, vCID);
        printf("Enter Class Name: ");
        fgets(vClassName, 20, stdin);
        strcpy_s(Transcript[classCnt].ClassName, vClassName);
        printf("Enter Class Hours: ");
        scanf("%d", &vHrs);
        strcpy(Transcript[classCnt].Hrs, vHrs);         //Problem occurs here
        printf("Enter Class Grade: ");
        scanf("%c", vGrade);
        strcpy(Transcript[classCnt].Grade, vGrade);     //Problem occurs here
        classCnt++;
    }while(classCnt<=6);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:35:58.127

您实际上在这里遇到了许多问题：

首先，[`strcpy()`](http://linux.die.net/man/3/strcpy)用于复制一个字符串，如果你有一个字符并且你想要它分配它，你可以简单地用`=`操作符分配它。[`strcpy()`](http://linux.die.net/man/3/strcpy)当您有要分配的字符数组时使用该函数。

所以你的第一个问题

```
strcpy(Transcript[classCnt].Hrs, vHrs); 
```

`Hrs`from 你的结构只是一种`char`类型，而且`vHrs`是一种`int`类型。您可以像这样简单地分配它：

```
Transcript[classCnt].Hrs = vHrs; 
```

然而，一个`int`罐子比罐子容纳更多的数据`char`，这会给你一个关于溢出的警告，你应该听它（取决于实现`char`持有 -128 到 127，其中`int`持有 -2,147,483,648 到 2,147,483,647）。在此处确定您真正想要的数据类型，然后进行`Hrs`赋值`int`或赋值。`vHrs``char`

第二个问题：

```
scanf("%c", vGrade); 
```

`vGrade`作为一个字符数组（它由多个字符组成），这意味着您应该使用字符串格式运算符对其进行分配`"%s"`，但是当您执行字符串时，您应该使数组足够长以容纳所需的字符数 + 1 (对于 NULL 终止符）。

第三个问题：

```
strcpy(Transcript[classCnt].Grade, vGrade); 
```

`Grade`是一个`char`while`vGrade`是一个数组。同样，您必须决定类型，如果您想要一个“字符串”字符，那么您需要将它们都设为数组，如果您只想要一个字符，则更改类型`vGrade`并使用运算符进行简单赋值`=`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:33:17.423

您在这里遇到的是数据输入错误。

结构成员`.Hrs`的类型为`"char"`。的参数`strcpy`是一个`"char *"`。可以这样想：A`char`是一个 8 字节的数字，表示 ASCII 中的一个值。A`"char *"`是指向字符数组（或 C 语言中的字符串）的指针。

以上传统上是正确的，但是，今天它也可能是一个 unicode 或多字节字符串。无论哪种情况，您需要的是赋值运算符 ( `=`)，而不是`strcpy`.

因此，您要`strcpy`查看单个值 ( )，而不是期望作为参数`char`的值字符串 ( )。`char *`在这种情况下，您可以直接复制您扫描的整数的值`scanf`。

```
Transcript[classCnt].Hrs = vHrs; 
```

和

```
Transcript[classCnt].Grade = vGrade; 
```

如果您正在寻找有史以来最好的书，无论如何我认为 :-)，关于 C 语言，请查看：C 编程语言（第 2 版）- 看起来它可以在亚马逊上找到（或者在您最喜欢使用的地方）书商）约 21 美元（美元）。

# asp.net - updatepanel - 使页面上的其他控件可见或不可见

> ID：15080275
> 
> 赞同：0
> 
> 时间：2013-02-26T02:23:34.630
> 
> 标签：asp.net, asp.net-ajax

我正在使用更新面板在页面上显示一些结果，它工作正常，没有问题。

如果虽然没有返回结果，但我希望显示一条消息 - 说没有找到记录。

问题是让 asp:panel(pnlNoUsers) 可见选项为真或假（其中包含未找到记录消息是我遇到的问题

我的更新面板代码是：

```
 <asp:UpdatePanel ID="pnlCust" runat="server">
                    <ContentTemplate>
                        <asp:Panel ID="pnlNoUsers" runat="server" visible="false">
                            <div class="inner-page-title">
                                <h2>
                                    No records found.</h2>
                            </div>
                        </asp:Panel>
                        <%=show_cust()%>
                    </ContentTemplate>
                    <Triggers>
                        <asp:AsyncPostBackTrigger ControlID="btnRefresh" />
                    </Triggers>
                </asp:UpdatePanel> 
```

show_cust() 函数只返回一个字符串，该字符串将显示在页面上：

```
 If bHasUsers = False Then
        pnlNoUsers.Visible = True
        Return ""
    End If
    pnlNoUsers.Visible = False
    Return strUsers & "</ul>" 
```

面板“pnlNoUsers”的可见性属性没有改变吗？

有谁知道我该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:35:23.350

我不知道您的要求的复杂性，但您可以通过使用数据控件完全跳过条件逻辑。您可以使用具有

> 您可以使用的 EmptyDataText 属性。 [MSDN：Gridview EmptyDataText 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.emptydatatext.aspx)

您可以使用 DataSource 和 dataBind 属性手动将 gridview 控件与数据绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:43:37.727

为什么要使用函数 show_cust()。您可以在按钮单击操作中添加功能。因为最初面板是不可见的。它需要在根据条件单击按钮时可见。所以添加功能性`

```
If bHasUsers = False Then
        pnlNoUsers.Visible = True
        Return ""
    End If
    pnlNoUsers.Visible = False
    Return strUsers & "</ul>" 
```

在 btnRefresh 点击事件上。它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:47:27.773

如果没有您的按钮单击事件，就很难确定您可能出错的地方。不过有几个想法：将 UpdateMode 设置为 Conditional，这是一个包含更新面板的正常模式，摆脱您的内联响应写入，这不是处理 ASP.NET 数据显示的好方法，并添加一个 Literal 标签可以渲染用户的列表。正如 Damien 所提到的，我会使用 ListView、Repeater 或 GridView（按此顺序）来呈现您的用户列表，而不是在代码中生成无序列表并将其写入浏览器。

```
<asp:UpdatePanel ID="pnlCust" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Panel ID="pnlNoUsers" runat="server" Visible="false">
            <div class="inner-page-title">
                <h2>No records found.</h2>
            </div>
        </asp:Panel>
        <asp:Literal ID="CustomerListLiteral" runat="server" />
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnRefresh" />
    </Triggers>
</asp:UpdatePanel>
<asp:Button ID="btnRefresh" runat="server" OnClick="btnRefresh_Click" /> 
```

在按钮单击事件中处理您的更新面板工作。我敢打赌，您内联的响应写入不会触发更新面板工作。这应该做你想要的。

```
Protected Sub btnRefresh_Click(sender As Object, e As EventArgs)
    Dim bHasUsers As Boolean = False
    Dim strUsers As String = String.Empty

    If bHasUsers = False Then
        pnlNoUsers.Visible = True
    Else
        pnlNoUsers.Visible = False
        CustomerListLiteral.Text = strUsers & "</ul>"
    End If

    ' Force an update refresh if necessary, but this shouldn't be needed
    pnlCust.Update()
End Sub 
```

# ios - UIButton 不响应 UIScrollview 分页

> ID：15080276
> 
> 赞同：0
> 
> 时间：2013-02-26T02:23:50.097
> 
> 标签：ios, xcode, uiscrollview, uibutton

我遇到了 uiscrollview 的问题。当我将它作为常规滚动视图时，所有 UIButton 都按预期工作。当我向它添加分页时，按钮不再响应。我有一个顶部边缘伸出来，他们确实接受了那里的压力。它们肯定在滚动视图的后面，但是当它像我想要的那样移动时，它们会在页面上下滚动。我已经阅读了很多不同的回复，但除非您使用手势控制器，否则大多数人不会提供答案。我附上了创建分页的代码。你能告诉我我可能会错过什么吗？

```
-(void)scollPagingSetup:(float)frameSize {
float numberOfPages;
int maxheight;

[self.view setPagingEnabled:YES];
[self.view setBounces:YES];

UIView *first = [[UIView alloc]initWithFrame:self.view.frame];
[self.view addSubview:first];

maxheight = [UIScreen mainScreen].bounds.size.height;
numberOfPages = ceil(frameSize/maxheight);
for (int i = 1; i < numberOfPages; i++) {
    CGRect frame;
    frame.origin.x = 0;
    frame.origin.y = self.view.frame.size.height * i;
    frame.size = self.view.frame.size;

    UIView *subview = [[UIView alloc] initWithFrame:frame];
    [self.view addSubview:subview];

}

self.view.contentSize = CGSizeMake(self.view.frame.size.width, self.view.frame.size.height *numberOfPages);
} 
```

提前感谢您查看。我找到了可以解决这个问题的方法，但我无法理解问题的真正解决方案是什么。这是该问题的链接：

[iPhone UIButton 在 UIScrollView 中没有响应](https://stackoverflow.com/q/4776768/2108963)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:29:39.313

问题是内容大小设置不正确，因此“可点击区域”（内容区域的大小）也没有设置......在您的最后一行代码（最后一个“}”之前的行）您正在设置滚动视图的 contentSize框架到自身，这将只是 0... 试试这个（我使用“first”（嵌套视图）而不是“self”（滚动视图本身）。

```
self.view.contentSize = CGSizeMake(firstframe.origin.x, (firstframe.origin.y - 20) * numberOfPages); 
```

关于已编辑答案的问题海报的注释：
*我对答案进行了更改。在我使用该应用程序之后，我没有完全滚动。我进行了更改以反映我为解决此问题所做的工作并导致整页滚动。由于 uiscrollview 的偏移，需要 -20 偏移。这个偏移量可以在界面生成器中看到。*

# php - 在 1.3.1 版中找不到 simplepie.inc

> ID：15080281
> 
> 赞同：0
> 
> 时间：2013-02-26T02:24:07.080
> 
> 标签：php, rss, simplepie

我第一次尝试 Simple Pie，但遇到了问题。我下载了新的 1.3.1 版本并解压。我按照说明设置了所有内容（在我的根目录中创建了 php 和 cache 文件夹，将库和 php auto-loader.php 文件加载到 php 文件夹中，并将缓存文件夹的权限设置为 755）。但是，尽管查看了 Simple-pie 文件夹中的每个文件，但我找不到 simplepie.inc 文件。我已经在 Google 上搜索了某个地方以找到它，但我找不到任何东西，我在这里搜索了解决方案，但我什么也没看到。有人可以告诉我在哪里可以得到 simple-pie.inc 文件吗？

如果版本 1.3.1 不包含它，下载该版本的人如何使用该程序？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:42:46.997

确实如此。它存在于库文件夹中。

但是，您不应包含 autoloader.php（如果您使用的是库存下载而不是您自己的构建）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:15:13.027

SimplePie 的一些文档可能需要更新，许多示例使用旧版本并且可能不适用于最新版本，我知道我必须做大量繁重的工作才能让 News Blocks 2.0 演示工作。它仍然不能完成 POPURLS 所做的一切，SimplePie 是一个开始不一定是结束，但它确实有效，前提是你给它提供了良好的提要。格式不正确的提要（即不符合 RSS 或 Atom 标准的提要）可能会使您的游戏室崩溃。

[我的新闻聚合器](http://news.muschamp.ca)index.php中有这个：

```
require_once('../news/php/autoloader.php'); 
```

最终他们更新了他们的文档和默认下载。

# c++ - 如何在块内使用 std::fstream？

> ID：15080282
> 
> 赞同：0
> 
> 时间：2013-02-26T02:24:07.557
> 
> 标签：c++, objective-c-blocks, objective-c++, ifstream

我在尝试`ifstream`在一个块内使用 from 时遇到问题。（这是一个更大、更复杂的项目的一部分，所以我快速制作了一个只包含相关部分的小源文件。）

```
// foo.cpp, in its entirety:

#include <iostream>
#include <fstream>
#include <Block.h>

int main() {
    __block std::ifstream file("/tmp/bar") ;
    // ^ tried this with and without the __block
    void (^block)() = ^{
        file.rdbuf() ;
        file.close() ;
        file.open("/tmp/bar") ;
    } ;
    block() ;
} 
```

如果我声明`ifstream`with `__block`，我会得到：

```
foo.cpp:6:24: error: call to implicitly-deleted copy constructor of
      'std::ifstream' (aka 'basic_ifstream<char>')
        __block std::ifstream file("/tmp/bar") ;
                              ^~~~ 
```

如果我在没有 的情况下声明它`__block`，我会得到：

```
foo.cpp:8:3: error: call to implicitly-deleted copy constructor of
      'const std::ifstream' (aka 'const basic_ifstream<char>')
                file.rdbuf() ;
                ^~~~
                // rdbuf() and (presumably) other const functions

foo.cpp:9:3: error: member function 'close' not viable: 'this' argument has
      type 'const std::ifstream' (aka 'const basic_ifstream<char>'), but
      function is not marked const
                file.close() ;
                ^~~~
                // open(), close(), and (presumably) other non-const functions 
```

`fstream`在块内使用 s 的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:08:39.003

从[块实现规范](http://clang.llvm.org/docs/Block-ABI-Apple.html#c-support)

> 如果在块中使用基于堆栈的 C++ 对象（如果它没有复制构造函数），则会出现错误。

这是第一个错误[`ifstream`块复制](http://en.cppreference.com/w/cpp/io/basic_ifstream/basic_ifstream)。`__block`需要副本。

正如引用所说，一种选择是在堆上声明 ifstream( `new`/ `delete`).. 但这很麻烦。

其余的错误是简单的 const 正确性错误。不声明`__block`将对象导入为 const 副本，这是两个错误中的第一个，它不能用于调用非 const 函数，例如`close`.

尝试切换到[lamda 表达式`C++11`](https://stackoverflow.com/q/7627098/1561811)，看看它们是否能缓解这些问题。

# asp.net-mvc - db驱动/程序验证asp.net mvc？

> ID：15080285
> 
> 赞同：0
> 
> 时间：2013-02-26T02:25:11.087
> 
> 标签：asp.net-mvc, forms, asp.net-mvc-4, validation

我想创建一个系统，用户可以通过 UI 创建表单，并将字段列表存储在数据库中。然后，用户可以为表单选择验证，这些验证也存储在数据库中。当用户访问表单时，会显示正确的字段，当他们提交表单时，将从数据库中提取正确的验证并针对提交的数据运行。是否已经有任何类型的系统可以做到这一点（理想情况下是开源的）。

我知道那里有表单和调查服务，但我不想要 SaaS 解决方案，因为我需要能够自定义大多数方面（前端、服务器端和数据库）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:50:23.743

在搜索引擎中输入“开源调查软件”，您会发现[LimeSurvey](http://www.limesurvey.org/)，这是一个具有可行调查系统的活跃项目，您可以在自己的服务器上进行管理和自定义。它支持许多常见的 SQL 实现。

它与您问题中的特定语言和环境标签不一致，但在其他方面似乎很合适。

# css - Less Css 在 IE8 和 IE7 上不起作用

> ID：15080286
> 
> 赞同：0
> 
> 时间：2013-02-26T02:25:16.140
> 
> 标签：css, internet-explorer, internet-explorer-8, less

我有疑问，为什么在这两个浏览器上，Less Css 都不起作用（没有应用样式表的页面）？在 IE9+ 上，它看起来像在 Chrome、FF 和 Opera 上一样。查看屏幕：

**源** ![资源](../Images/51f64743c8da9467f714093e480a3e8d.png) **代码：**

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mansion</title>

    <link rel="stylesheet" href="/Content/normalize.css" media="all"/>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,700,900,300' rel='stylesheet' type='text/css' />
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'/>
    <link rel="stylesheet/less" href="/Content/siteHD.less"  media="screen and (max-width: 1920px)" />
    <link rel="stylesheet/less" href="/Content/site1024.less"  media="screen and (max-width: 1024px)" />
    <link rel="stylesheet/less" href="/Content/site768.less"  media="screen and (max-width: 768px)" />
    <link rel="stylesheet/less" href="/Content/site640.less"  media="screen and (max-width: 640px)" />
    <link rel="stylesheet/less" href="/Content/site320.less"  media="screen and (max-width: 320px)" />
</head>
<body>...</body>
</html> 
```

**IE10（IE9 看起来像这里）** ![IE10](../Images/763283c8acae899e21e0c3a014a77bf6.png)

**IE8**（看看最后一个跳过头部分的样式） ![IE8](../Images/74d4bbea04c8fd1007672e87b6130618.png)

## 你在这里看到我看不到的东西有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-15T08:47:27.877

您似乎正在尝试在您的网站上使用 LESS 文件而不包括`less.js`库，这是将您的 LESS 代码转换为浏览器可以理解的 CSS 所必需的。

[从lesscss.org](http://www.lesscss.org)`less.js`页面顶部下载，然后将其包含在您的标签之前：`</head>`

```
<script src="less.js" type="text/javascript"></script> 
```

显然，您需要将路径更改为您在网站上存储 JS 文件的任何位置。请注意，此文件将包含*在*您的样式表之后。

您发布的代码示例：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mansion</title>

    <link rel="stylesheet" href="/Content/normalize.css" media="all"/>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,700,900,300' rel='stylesheet' type='text/css' />
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700' rel='stylesheet' type='text/css'/>
    <link rel="stylesheet/less" href="/Content/siteHD.less"  media="screen and (max-width: 1920px)" />
    <link rel="stylesheet/less" href="/Content/site1024.less"  media="screen and (max-width: 1024px)" />
    <link rel="stylesheet/less" href="/Content/site768.less"  media="screen and (max-width: 768px)" />
    <link rel="stylesheet/less" href="/Content/site640.less"  media="screen and (max-width: 640px)" />
    <link rel="stylesheet/less" href="/Content/site320.less"  media="screen and (max-width: 320px)" />
    <script src="less.js" type="text/javascript"></script>
  </head>
  <body>...</body>
</html> 
```

另一方面，您可能应该看看使用一个可用的编译器将您的 LESS 代码编译为一个或多个 CSS 文件。查看[使用 LESS 的可用 GUI 编译器](https://github.com/less/less.js/wiki/GUI-compilers-that-use-LESS.js)列表。

# find - 猫鼬：myModel.find 总是返回子文档

> ID：15080287
> 
> 赞同：0
> 
> 时间：2013-02-26T02:25:18.837
> 
> 标签：find, mongoose

```
 var myschema  = new Schema({
      name: {type:String, default:'fullname'},
      subdoc: {
          day1: {type:Array, default:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
          day2: {type:Array, default:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}
      }
  });
  var mymodel = Mongoose.model('mytest',myschema);
  //mongoose 3.5.6: find
  mymodel.find({},{'name'}, function(err,docs){
      logger.info("---> " + docs);
  }); 
```

结果：

```
---> { _id: 512da190ba48050f2e000001, **subdoc: {}**, name: 'fullname' } 
```

仅`name`请求返回字段，但此函数始终返回`subdoc: {}`。有人可以解释一下吗？

使用 mongodb shell，它看起来不错

```
db.mytests.find({},{"name":1})
{ "_id" : ObjectId("512da190ba48050f2e000001"), "name" : "fullname" } 
```

然后我将模型更改为：

```
var myschema  = new Schema({
          name: {type:String, default:'fullname'},
          subdoc: [
              day1: {type:Array, default:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},
              day2: {type:Array, default:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}
          ] // **note: not {} here**
      }) 
```

使用相同的 mongoose api 查找，结果正是我所期望的：

```
--->{ _id: 512da46fffebd24b30000002, name: 'fullname' } 
```

我的问题是：为什么字段“subdoc”与以前的模式一起返回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:42:48.393

根据[docs](http://mongoosejs.com/docs/api.html#model_Model.find)，您似乎有点偏离了。

例子：

> // name LIKE john 并且只选择 "name" 和 "friends" 字段，立即执行 MyModel.find({ name: /john/i }, 'name friends', function (err, docs) { })

有了这个，我会做这样的事情：

> myModel.find( {}, 'name', 回调);

**编辑**

解决您的意见：在 mongodb 控制台中，格式化它的正确方法是 {'name':1, 'friend':1}。使用：

> db.collection.find({}, {'namefriend'})

会抛出错误。要正确执行此操作，您将执行以下操作：

> db.collection.find({}, {'name':1, 'friend':1})

但是，如果您更喜欢这种字段选择方式，猫鼬也允许您这样做。

> myModel.find({}, {'name':1, 'friend': 1}, 回调);

请参阅：[API 文档](http://mongoosejs.com/docs/api.html#query_Query-select)

# json - 使用 Core Data 一对多关系从 JSON 数组填充 sqlite 数据库

> ID：15080296
> 
> 赞同：2
> 
> 时间：2013-02-26T02:26:51.590
> 
> 标签：json, sqlite, core-data

我正在尝试从 JSON 文件中读取数据并将其存储到 sqlite 中。我正在获取“简单”数据，但我无法弄清楚如何将一对多关系项从我的数组中获取到 sqlite。

这是我的数据模型：

（对不起 - 他们不让我在这里做屏幕截图......所以这里是数据模型的描述：）

```
 Entity: SeasonInfo 
    Attributes:
    year
    coach
    wins
    losses
    ties
        Relationship: players
        Destination: PlayerInfo
        Inverse seasonInfo

    Entity: PlayerInfo
    Attributes:
    name
    number
       Relationship: seasonInfo
       Destination: SeasonInfo
       Inverse: players 
```

这是我的 JSON：

```
 [
       { "year": 2012, "wins": 8,  "losses": 8, "ties": 0, "coach": "Garrett",
          "players": [ { "name": "Tony Romo",  "number": 9},
                      { "name": "Dez Bryant",   "number": 88} ],
       },
       { "year": 2011, "wins": 8,  "losses": 8, "ties": 0, "coach": "Garrett",
         "players": [ { "name": "DeMarcu Ware",  "number": 94},
                       { "name": "Felix Jones ",  "number": 28},
                       { "name": "Miles Austin",  "number": 19} ],
        },
        { "year": 2010, "wins": 6,  "losses": 10, "ties": 0, "coach": "Garrett/Phillips",
          "players": [ { "name": "Sean Lee",      "number": 50},
                       { "name": "Jason Witten",  "number": 82} ],
        }
     ] 
```

这是我的代码：

```
 // Load JSON data into Array
    NSError* err = nil;
    NSString* dataPath = [[NSBundle mainBundle] pathForResource:@"CowboySeason" ofType:@"json"];
    NSArray* cowboySeasonsArray = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfFile:dataPath]
                                                                  options:kNilOptions
                                                                    error:&err];
    NSLog(@"Imported Seasons: %@", cowboySeasonsArray);

    // Export data from the array into the database

    // Store the SeasonInfo 
    [cowboySeasonsArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        SeasonInfo *seasonInfo = [NSEntityDescription
                                          insertNewObjectForEntityForName:@"SeasonInfo"
                                          inManagedObjectContext:context];

        seasonInfo.year = [obj objectForKey:@"year"];
        seasonInfo.wins = [obj objectForKey:@"wins"];
        seasonInfo.losses = [obj objectForKey:@"losses"];
        seasonInfo.ties = [obj objectForKey:@"ties"];
        seasonInfo.coach = [obj objectForKey:@"coach"];

        seasonInfo.players = [obj objectForKey:@"players"];

        NSError *error;
        if (![context save:&error]) {
            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
        }
    }]; 
```

cowboySeasonArray 在日志中如下所示：

```
 2013-02-25 20:39:05.025 SeasonTestLoader[369:503] Imported Seasons: (
    {
    coach = Garrett;
    losses = 8;
    players =         (
                    {
            name = "Tony Romo";
            number = 9;
        },
                    {
            name = "Dez Bryant";
            number = 88;
        }
    );
    ties = 0;
    wins = 8;
    year = 2012;
},
    {
    coach = Garrett;
    losses = 8;
    players =         (
                    {
            name = "DeMarcu Ware";
            number = 94;
        },
                    {
            name = "Felix Jones ";
            number = 28;
        },
                    {
            name = "Miles Austin";
            number = 19;
        }
    );
    ties = 0;
    wins = 8;
    year = 2011;
},
    {
    coach = "Garrett/Phillips";
    losses = 10;
    players =         (
                    {
            name = "Sean Lee";
            number = 50;
        },
                    {
            name = "Jason Witten";
            number = 82;
        }
    );
    ties = 0;
    wins = 6;
    year = 2010;
} 
```

)

所以看起来JSON解析器工作......但我不知道如何将一对多的PlayerInfo放入sqlite。

我知道 seasonInfo.players = [obj objectForKey:@"players"]; 线是错误的......只是不知道在这里做什么。

温柔点……我是 iOS 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T04:16:22.993

看起来你已经让团队的“外循环”工作了，现在你只需要在每个团队中添加一个玩家的“内循环”。

从您用于创建团队的代码开始，并在您的循环中：

```
// Other stuff from your code here, omitted for brevity
seasonInfo.ties = [obj objectForKey:@"ties"];
seasonInfo.coach = [obj objectForKey:@"coach"];

// Loop through each player, creating a new PlayerInfo entity for each one:
NSArray *playerArray = [obj objectForKey:@"players"]
[playerArray enumerateObjectsUsingBlock:^(id playerObj, NSUInteger playerIdx, BOOL *playerStop) {
    PlayerInfo *playerInfo = [NSEntityDescription
                                      insertNewObjectForEntityForName:@"PlayerInfo"
                                      inManagedObjectContext:context];

    playerInfo.seasonInfo = seasonInfo;
    playerInfo.name = [playerObj objectForKey:@"name"];
    playerInfo.number = [playerObj objectForKey:@"number"];
}];

NSError *error;
if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
} 
```

因为您在 PlayerInfo 和 SeasonInfo 之间设置了反向关系，所以您可以从关系的任何一端建立连接，而另一端将被自动处理。在这种情况下，您将创建新的 PlayerInfo 实体，并通过设置每个实体的 seasonInfo 值，将填充 SeasonInfo 端的一对多关系。

您还可以将单个 PlayerInfo 对象添加到 SeasonInfo 的玩家关系集中，但我发现这更令人困惑，只是将多个实体中的每个实体的关系添加回一个实体。

# database - 在 VB.Net 中插入 Microsoft Access 数据库

> ID：15080301
> 
> 赞同：-1
> 
> 时间：2013-02-26T02:27:38.203
> 
> 标签：database, vb.net, datagridviewcolumn

我正在尝试开发一个系统，管理部门将使用该系统来键入讲师和学生数据。![例子](../Images/9de61813cce94a2a2693ff750c3c4a40.png)

栏目会有很多变化，学生可能会注册其他科目，例如科目 10、科目 11 等。讲师可以是讲师B、讲师C等。

您能否建议我应该如何创建数据库，以便用户可以根据需要更改列的标题和数据键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:43:57.963

[http://www.codeproject.com/Articles/177388/Best-Practices-for-Database-Schema-Design](http://www.codeproject.com/Articles/177388/Best-Practices-for-Database-Schema-Design) 您可以在此处下载示例。此外，这里提到了关于自动更新 id 的事情。看一看 ：）

# ruby-on-rails - 将旧 SSL 域重定向到 Heroku 上的新域（使用 Rails 3）

> ID：15080305
> 
> 赞同：1
> 
> 时间：2013-02-26T02:28:15.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ssl, heroku, dns

在过去的一个小时里，我一直在谷歌上搜索，但不能完全确定它。也许你们可以在这里提供帮助！

这是我正在尝试做的事情：

旧网站是：

旧的.tld

新网站是：

新的.tld

一群人通过 SSL 访问旧网站上的一个特定旧网址，即：

[https://www.old.tld/old_url](https://www.old.tld/old_url)

我刚刚在 Heroku 上建立了一个全新的站点，在新域上运行 Rails 3。

我还安装了 Heroku 的 SSL 端点插件，并且正在使用一个新的安全子域：

安全的.new.tld

我的 Rails routes.rb 中有一堆重定向和约束来重定向 old -> new 并传递适当的请求。一切都适用于非 SSL 的东西。

我似乎无法正常工作的唯一一件事是重定向

[https://www.old.tld/old_url](https://www.old.tld/old_url) -> [https://secure.new.tld/new_url](https://secure.new.tld/new_url)

Safari 似乎并不介意，但 Chrome 会抛出“这可能不是您要查找的网站！” 错误。它说（仅在通过 SSL 尝试时）：

“您试图访问 www.old.tld，但实际上您访问了一个将自己标识为 secure.new.tld 的服务器”等。

（这正是我想要的，但 Chrome 似乎不同意；）

关于如何正确配置的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:18:52.347

无缝解决方案是获得既有旧名称又有新名称的 SAN（主题备用名称）证书。

另一种方法是在两个安全请求之间插入一个非安全请求：从[https://www.old.tld](https://www.old.tld) -> [http://secure.new.tld](http://secure.new.tld) -> [https://secure.new.tld 重定向](https://secure.new.tld). 我还没有实际测试过这个，但它应该在理论上有效。如果它不能“正常工作”，那么您可以尝试在[http://secure.new.tld](http://secure.new.tld)添加一个带有消息和指向[https://secure.new.tld](https://secure.new.tld)的链接的实际页面。

# python - 多行的正则表达式

> ID：15080306
> 
> 赞同：1
> 
> 时间：2013-02-26T02:28:27.200
> 
> 标签：python, regex, python-2.7

我做了这个正则表达式`((\s\s\s.*\s)*)`。这意味着 3 个空格或制表符，之后是多个字符和一个空格或制表符或行尾。如何将我得到的每一行存储到一个列表中？

所以，如果我有这样的事情：

```
___The rabbit caught the lion\n
___The tiger got the giraffe\n
___The owl hit the man\n 
```

输出是这样的：

```
list=[The rabbit caught the lion, The tiger got the giraffe, The owl hit the man] 
```

顺便提一下，我对我拥有的每个其他模式都使用了组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:00:55.867

看起来您只想匹配一整行，从三个空格（或制表符）开始；这可以通过和`re.MULTILINE`使用锚点来完成。`^``$`

```
matches = re.findall('^\s{3}(.*)$', contents, re.MULTILINE) 
```

如果您不关心三个空格之前的字符，您可以将表达式简化为：

```
matches = re.findall('\s{3}(.*)', contents) 
```

这是因为`.`会将所有内容匹配到换行符（默认情况下）。

# python - 为什么这个正则表达式在 python 上不起作用

> ID：15080307
> 
> 赞同：2
> 
> 时间：2013-02-26T02:28:38.523
> 
> 标签：python, regex

我正在尝试从二进制文件中提取一些字符串。当我在 linux 中将此正则表达式与字符串一起使用时，它可以正常工作，但在 python 中不起作用。

在**字符串**中：

```
strings -n 3 mke2fs | grep -E '^([0-9][0-9]*(\.[0-9]+)+)' 
```

结果：**1.41.11**

在**蟒蛇**：

```
import re

f = open("mke2fs","rb").read()
for c in re.finditer('^([0-9][0-9]*(\.[0-9]+)+)',f):
 print c.group(1) 
```

结果是空的。我该如何解决这个问题？是因为我的 Python 版本（我使用的是 Python 2.7）吗？我尝试使用正则表达式（另一种替代方法）仍然没有结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T02:37:29.653

您需要`re.MULTILINE`标志 for`^`才能像 grep 一样处理您的文本。

顺便说一句，使用起来更具可读性`\d`：

```
for c in re.finditer(r'^(\d+(\.\d+)+)', f, re.MULTILINE):
    print c.group(1) 
```

# mysql - 创建一个表，其中一些列是 MySQL 中其他表的视图？

> ID：15080313
> 
> 赞同：0
> 
> 时间：2013-02-26T02:29:10.710
> 
> 标签：mysql, view

我想创建一个包含数据的表，但我希望其中一个列是另一个表中的数据（如外键），但我不需要这种数据库完整性，我只想获得表中的值b 如表 a 所示。

**问题：有没有办法像我上面描述的那样创建局部视图？**

提前致谢。

SQL 代码：

```
CREATE TABLE table1 (
data_column_1 int(10)
data_column_2 int(10)
data_column_3 int(10)
view_column_2 varchar(250)
/* from on table 2
   updated with a trigger? that reads data_column_2
   and based on the value in data_column_2, updates the value in view_column_2
   (like a vlookup like in excel)]
*/
view_column_3 varchar(250)
/* from on table 3
   updated with a trigger? that reads data_column_3
   and based on the value in data_column_3, updates the value in view_column_3
   (like a vlookup like in excel)
*/
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:09:16.480

如果我理解正确，您只需要两个参考表和一个`SELECT`with `JOIN`。您`CREATE TABLE`对三个表的语句可能如下所示

```
CREATE TABLE table1 (
    data_column_1 int(10),
    data_column_2 int(10),
    data_column_3 int(10)
);
CREATE TABLE table2 (
    data_column_2 int(10),
    view_column_2 varchar(250)
);
CREATE TABLE table3 (
    data_column_3 int,
    view_column_3 varchar(250)
); 
```

假设我们有以下样本数据

```
table 1
------------
10    1    3
20    2    2
30    3    1

table2
------------
1    Apple
2    Banana
3    Orange

table3
------------
1    Red
2    Green
3    Yellow 
```

然后这`SELECT`会给你想要的

```
SELECT t1.data_column_1,
       t1.data_column_2,
       t1.data_column_3,
       t2.view_column_2,
       t3.view_column_3
  FROM table1 t1 LEFT JOIN
       table2 t2 ON t1.data_column_2 = t2.data_column_2 LEFT JOIN
       table3 t3 ON t1.data_column_3 = t3.data_column_3 
```

我们`LEFT JOIN`假设并非 data_column_2 和 data_column_3 中的所有值都分别在 table2.view_column_2 和 table3.view_column3 中有参考值。如果您总是在参考表中有相应的值，或者您想从结果集中过滤掉那些没有它们的值，那么请`INNER JOIN`改用。

输出：

```
+---------------+---------------+---------------+---------------+---------------+
| data_column_1 | data_column_2 | data_column_3 | view_column_2 | view_column_3 |
+---------------+---------------+---------------+---------------+---------------+
|            10 |             1 |             3 | Apple         | Yellow        |
|            20 |             2 |             2 | Banana        | Green         |
|            30 |             3 |             1 | Orange        | Red           |
+---------------+---------------+---------------+---------------+---------------+ 
```

如果你愿意，你可以把它包在一个视图中

```
CREATE VIEW consolidated_table
AS
SELECT t1.data_column_1,
       t1.data_column_2,
       t1.data_column_3,
       t2.view_column_2,
       t3.view_column_3
  FROM table1 t1 LEFT JOIN
       table2 t2 ON t1.data_column_2 = t2.data_column_2 LEFT JOIN
       table3 t3 ON t1.data_column_3 = t3.data_column_3 
```

然后像这样使用它

```
SELECT * 
  FROM consolidated_table
 WHERE data_column_1 < 20 
```

输出：

```
+---------------+---------------+---------------+---------------+---------------+
| data_column_1 | data_column_2 | data_column_3 | view_column_2 | view_column_3 |
+---------------+---------------+---------------+---------------+---------------+
|            10 |             1 |             3 | Apple         | Yellow        |
+---------------+---------------+---------------+---------------+---------------+ 
```

# dynamics-crm-2011 - 如何为在 CRM 2011 中自动分配给案例的电子邮件创建活动源规则

> ID：15080316
> 
> 赞同：1
> 
> 时间：2013-02-26T02:29:15.500
> 
> 标签：dynamics-crm-2011

当*电子邮件*由于其跟踪令牌而自动分配（相关）到该案例时，如何创建一个活动提要规则，该规则在案例的**记录墙上写入****自动帖子？**

 ***我们的用户很难意识到这个案例中有一些新的东西可以看，这将大大有助于防止他们错过一个重要事件。

编辑：

已经考虑过这些解决方案

1.  他们不想要后续任务。
2.  电子邮件已显示在案例的网格中
3.  他们不想检查更多的队列。
4.  他们不想处理更多的电子邮件。

这个用户至少可以说是顽固的......他们只希望在案件的记录墙上出现一张便条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T20:16:23.257

要通过很少/没有编码来完成此任务，您可以：

1）创建将显示在活动提要上的任务或其他活动。这可以通过工作流轻松完成。

2) 在案例的网格中显示电子邮件/其他活动。

3）还设置队列来处理这个。

4) 当一个活动被附加到它时，向案例的所有者发送一封电子邮件。

有很多选项可以解决通知用户他们的案例有其他信息的问题。

编辑：您的评论是准确的，深受好评。你不能做一些简单的事情，比如创建一个工作流，在创建电子邮件和/或设置有关字段更改时创建一个帖子。然后，您可以在工作流中检查该集合是否适用于案例，或者取消工作流。在帖子记录中，将类型设置为自动，将相关设置为与电子邮件相同的相关。（我无法让记录墙部分在我的本地 VM 中工作，所以我认为任何关于该案例的帖子记录都应该出现在案例中，但我无法测试）。***

# html - 英雄单元中 100% 宽度的图像

> ID：15080318
> 
> 赞同：2
> 
> 时间：2013-02-26T02:29:44.060
> 
> 标签：html, css, twitter-bootstrap

我希望在 .hero-unit 中放置一个图像，该图像占该单元的 100%。这意味着它将根据整体窗口大小进行缩放。

现在我在那里，但看起来图像右侧有 100px 的填充。如果我将图像 max-width: 100% 调整为更大的值，它不会相应地缩放。

```
<div class="hero-unit">
    <img src="images/landscape.png">
</div> 
```

有谁知道如何删除右侧的填充，同时保留引导程序的自动调整大小功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:03:51.650

如前所述，使用以下选择器：

```
 .hero-unit img {
 width: 100%; height: auto;   
} 

```

工作样本：http: [//jsfiddle.net/basarat/MgcDU/2145/](http://jsfiddle.net/basarat/MgcDU/2145/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:40:12.190

您可以执行以下操作：

这是一个 jsfiddle [http://jsfiddle.net/shail/5YD2J/1/](http://jsfiddle.net/shail/5YD2J/1/)

```
<div class="container">
<div class="hero-unit">
    <img src="http://placehold.it/1500x400">
 </div>
</div>

.hero-unit {
     padding:6px;
  } 
```

您需要让您的图像具有良好的分辨率，缩放具有小宽度和高度的图像会导致不良的拉伸尺寸并且不会看起来很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T02:31:21.563

`width: 100%; height: auto;`应该可以工作，只要容器 div 根据窗口宽度调整大小是正确的。

# django - Django '关键字 arg 之后的非关键字 arg',

> ID：15080321
> 
> 赞同：1
> 
> 时间：2013-02-26T02:30:02.620
> 
> 标签：django

我正在设计一个学生数据库，我收到了这个错误'str' object is not callable。我找不到错误的位置，所以我将粘贴我的小应用程序。谢谢。

```
 TypeError at /school/
 'str' object is not callableRequest Method: GET 
 Request URL: http://tafe.pythonanywhere.com/school/ 
 Django Version: 1.3.5 
 Exception Type: TypeError 
 Exception Value: 'str' object is not callable 
 Traceback Switch to copy-and-paste view
 /usr/local/lib/python2.7/site-packages/django/core/handlers/base.py in get_response 
 1\.                    for middleware_method in self._view_middleware:1\.                        response = middleware_method(request, callback, callback_args, callback_kwargs)1\.                        if response:1\.                            break1.1\.                if response is None:1\.                    try:
  111\.                        response = callback(request, *callback_args, **callback_kwargs) ... 
```

我的模型.py

```
 from django.db import models
  from django.contrib import admin
  class Student(models.Model):
          first_name = models.CharField(max_length=30)
          last_name = models.CharField(max_length=30)
      age = models.BigIntegerField()
      body = models.TextField()

      def __unicode__(self):
          return self.first_name 
```

我的观点.py

```
 from mysite.school.models import student
  from django.shortcut import render_to_response
  from django.http import HttpResponse

  def index(request):
          students = Student.objects.all()
          render_to_response('index.html',{'students':students}) 
```

我的 index.html

```
Student Database
{% if students %}
<ul>
    {% for student in students %}
    <li>{{ student }}</li>
{% endfor %}
</ul>
{% endif %} 
```

我的网址

```
 from django.conf.urls import patterns,include , url 
  from django.contrib import admin
  from mysite.school.views import index
  admin.autodiscover()
  urlpatterns = patterns ('',
url(r'^$','index'),
  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:54:00.670

问题在于您的 urls.py。它应该是：

```
from django.conf.urls import patterns, include, url 
from django.contrib import admin
from mysite.school.views import index

admin.autodiscover()

urlpatterns = patterns ('',
    url(r'^$', index),
) 
```

为了节省一些打字，我会这样做：

```
urlpatterns = patterns ('mysite.school.views',
    url(r'^$', 'index'),
) 
```

这就是我认为您首先尝试做的事情。因此错误'str'对象是不可调用的。

# ios - 如何观察表格视图中的对象数量？

> ID：15080323
> 
> 赞同：1
> 
> 时间：2013-02-26T02:30:23.700
> 
> 标签：ios, core-data, nsfetchedresultscontroller, key-value-observing

我需要观察表格视图中的对象数量并用徽章显示。我在项目中使用 Core Data 和 NSFetchedResultsController。我应该使用 KVO 还是其他机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:46:18.340

是的，当然你可以`KVO`用来观察物体的数量。

但是，如果模型（假设这部分中的对象数量发生变化）代码是您的编码，或者您可以修改模型代码。我认为您应该更好地使用`NSNotifaction`or `delegate`or `block`，它只是您更改对象计数时的回调。

`KVO`最好观察标准库或您无法修改的类中的 var

# ruby-on-rails-3.2 - 了解 Rake Routes 输出

> ID：15080329
> 
> 赞同：0
> 
> 时间：2013-02-26T02:31:20.533
> 
> 标签：ruby-on-rails-3.2

如果我执行 rake 路线，这就是我得到的：

```
population_management GET /population_management/:id(.:format)          population_management#show
                      GET /providers/:provider_id/scorecards(.:format)  scorecard#show
                      GET /patients/:id/summary(.:format)               patients#show 
```

请注意，最左边的第一个确实有一个额外的列，其值为 population_managment 但第二个和第三个没有，它们只是以`GET`.

第一个和其他两个有什么区别？哪个更专业更好做？Rail 开发人员是否遵循某种经验法则或约定来确定其中哪一个更好？

```
 resources :population_management, only: [:show]

  match 'providers/:provider_id/scorecards', to: 'scorecard#show', via: :get
  match 'patients/:id/summary', to: 'patients#show', via: :get 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:43:51.643

第一列是路线的名称，这对于设置链接（例如，您可以在其中使用，`population_management_path(id)`而不必硬编码`/population_management/id`.

如果你想命名你自己的自定义路由，你可以使用`:as`，例如。

```
match 'patients/:id/summary', to: 'patients#show', via: :get, as: "patient_summary"
# or slightly simpler
get 'patients/:id/summary', to: 'patients#show', as: "patient_summary" 
```

（你需要在 Rails 4 中使用后者，因为`match`它已被弃用）。

任何一种方法都可以，尽管`resources`(and `resource`) 在您设置标准 RESTful 资源并且不想单独定义所有路由时更方便。

与往常一样，[Rails 路由指南](http://guides.rubyonrails.org/routing.html)也是该主题的好读物，值得一试。

# android - 我会得到什么 java.io.IOException: Operation not allowed with my Android Bluetooth application？

> ID：15080332
> 
> 赞同：0
> 
> 时间：2013-02-26T02:31:41.937
> 
> 标签：android, bluetooth

当我尝试使用 BluetoothSocket 类在我的 Android 应用程序中创建套接字时，我收到以下错误：

> java.io.IOException：android.bluetooth.BluetoothSocket.initSocketNative（本机方法）不允许操作

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T02:31:41.937

您的[权限](http://developer.android.com/guide/topics/connectivity/bluetooth.html#Permissions)设置不正确。您需要确保在 AndroidManifest 文件中允许蓝牙连接。

您可以通过以下方式修改清单文件来做到这一点：

```
<manifest ... >
  <uses-permission android:name="android.permission.BLUETOOTH" />
  ...
</manifest> 
```

这会将蓝牙添加到您的应用程序权限中，并允许您创建蓝牙连接。

# c - C 中的类型声明（概念）

> ID：15080334
> 
> 赞同：0
> 
> 时间：2013-02-26T02:31:59.643
> 
> 标签：c, struct, type-declaration

这个问题通常更多是一个概念问题，而不是本质上的编码问题。当我遇到这些代码时，我很好奇，想知道它们是否有效。或者为什么基本上，如果有人可以给我一个解释？

以下是 C 中的一些类型声明：

```
typedef struct Rec1 * Ptr1;
typedef struct Rec2 * Ptr2;

struct Rec1
{
    int data;
    Ptr2 next;
};

struct Rec2
{
    double data;
    Ptr2 next;
}; 
```

这些应该被允许吗？他们被允许吗？为什么或者为什么不？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:37:55.093

> 它们有效吗？

# 是的，它们是有效的

原因：

1.  前两行创建`Ptr1`and`Ptr2`作为 a`struct Rec1 *`和的类型定义`struct Rec2 *`。

2.  由于它们是指针，而不是结构本身，因此它们将`struct Rec1`and`struct Rec2`作为不完整的类型，并且它们只是`Rec2`作为递归类型（通常用于创建数据结构）并`Rec1`具有指向`Rec2`对象的指针。

> 他们应该被允许吗？

您还能如何创建自引用结构？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:16:03.620

根据语言标准，它们是有效的，因此应该被允许。

现在，如果你问这一切是如何运作的，这很容易。

通常，指针只是内存地址。如果对象由整数字节表示（每个字节都有唯一的地址），则您可以拥有指向内存中任何对象的指针。我在这里说“整数”是因为你不能有一个指向结构位字段的指针（至少，你不能有一个指向那些不在字节边界开始并占据整数字节的指针） .

因此，`Ptr2`它只是一个预先知道大小的指针类型（如果您的 CPU 的地址空间是从 0 到 4 GB，则 32 位地址足以寻址每个字节，而 32 位将是该 CPU 上的本机指针大小）并且您可以为这样的指针分配空间，`struct Rec1`即使`struct Rec2`该指针指向的内容尚不知道，这就是我们在相关代码中所拥有的。`Ptr1`并且`Ptr2`被定义为不完整的类型，这是它的正式名称。

在语言中实现这种不完整指针类型的基本原理是非常实用的。如果要创建链接列表或树，它们的元素或节点必须以某种方式指向与它们链接的其他元素或节点。理论上，您可以为最后一个元素（或叶节点）创建不同的元素/节点类型，然后为指向它的元素创建不同的元素/节点类型，然后为指向该元素的元素创建不同的元素/节点类型，依此类推。但这不能很好地扩展，如果您有多个元素或节点。如果你想要一百万个呢？定义一百万个几乎相同的类型充其量是不切实际的。因此，该语言为您提供了避免这种情况的捷径。您也可以将`next`指针声明为只是`void*`指针，但随后您需要将它们强制转换为`struct Rect1*`或`struct Rect2*`并且此类代码的维护和调试将容易出错。所以，在那里，语言可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:39:01.410

简短版本：

*   应该允许吗？是的

*   它们是（前向类型定义）吗？是的。

*   为什么或者为什么不？

这是进行前向类型声明的普遍接受的方式。它允许人们声明一个不完整的类型并在以后定义它。在这样的简单情况下这没什么大不了的，但在更复杂的情况下可能是绝对必要的。

Linux 或 Darwin 内核都相当广泛地使用这种技术来声明内部内核结构，这种方式允许在其自己的头文件中定义数据类型，但允许在完全定义之前使用数据类型。

如果没有这种复杂的、相互依赖的机制，数据类型的定义将是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:39:22.037

typedef 只是它所引用的实际类型的别名。您可以将其视为宏，但它不是在编译的预处理阶段被替代的东西。

只需将所有出现的**Ptr1 替换**为**struct Rec1 * 即可**生成有效代码，这是确认代码是否有效的最简单方法；）

# wix - 如何使用 WiX 预处理器编译指示？

> ID：15080337
> 
> 赞同：1
> 
> 时间：2013-02-26T02:32:13.750
> 
> 标签：wix, preprocessor, wix-extension

我目前正在做一个测试 WiX 项目，看看我能用它做什么。

最近，我偶然发现了这样一个事实，即我可以`ProcessPragma`在我的预处理器扩展中覆盖该方法以在编译时编写 WiX 源代码。有一个预处理器函数可以返回一个 xml 字符串，而编译器不会发疯，这听起来很不错。所以我调查了它，但是[这个 wix-users 线程](http://sourceforge.net/mailarchive/message.php?msg_id=27552185)中的响应非常简短，并没有解释太多。除此之外，谷歌不会返回任何有趣的东西。因此，我挖掘了 WiX 源代码以了解更多信息。

该方法的xml文档如下：

```
/// <summary>
/// Processes a pragma defined in the extension.
/// </summary>
/// <param name="sourceLineNumbers">The location of this pragma's PI.</param>
/// <param name="prefix">The prefix of the pragma to be processed by the extension.</param>
/// <param name="pragma">The name of the pragma.</param>
/// <param name="args">The pragma's arguments.</param>
/// <param name="writer">The xml writer.</param>
/// <returns>false if the pragma is not defined.</returns>
/// <comments>Don't return false for any condition except for unrecognized pragmas. 
    Throw errors that are fatal to the compile. use core.OnMessage for warnings and messages.</comments> 
```

因此，作为测试，我让`XmlWriter`生成了一个虚拟属性，然后返回 true。

现在，在我的 WiX 项目中实际调用它。在`Preprocessor.cs`中，我发现了以下内容：

```
switch (reader.NodeType)
{
    case XmlNodeType.ProcessingInstruction:
        switch (reader.LocalName)
        {
            // other cases such as define, include, foreach, 
            // and other preprocessor directives                
            case "pragma":
                this.PreprocessPragma(reader.Value, writer);
                break;
        }
        break; 
```

这暗示使用编译指示的语法是：`<?pragma prefix.name?>`

但这给了我以下警告：`The pragma 'prefix.name' is unknown. Please ensure you have referenced the extension that defines this pragma.`

我有一种感觉，我在正确的轨道上，因为它给了我一个与 pragma 相关的警告，但老实说，我不知道我在这里做什么。这似乎是一个未知的领域。

有谁知道我做错了什么，或者指出我正确的方向？

**更新**

似乎我的项目是问题所在。我在另一个项目中使用了我的扩展，它就像一个魅力。

对于将来阅读本文的任何人，语法就是`<?pragma prefix.name args?>`参数只是一个字符串的地方。作为旁注，您不会关闭`XmlWriter`覆盖方法中的 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:55:03.333

首先，确保您正在传递`-ext path\to\YourPragmaExtensionAssembly.dll`to `candle.exe`。Candle 将加载您的扩展，查找`AssemblyDefaultWixExtension`指向从 WixExtension 继承的类的属性，然后`PreprocessorExtension`在您覆盖该`PreprocessorExtension`属性时询问您的类。

在 WiX 工具集的未来版本（如 v4.0）中可以简化一些接线。但是在 WiX v3.x 工具集中有一个示例：`src\ext\PreProcExampleExtension\wixext`那应该可以说明问题。

# angularjs - 路由控制器解决混淆

> ID：15080341
> 
> 赞同：2
> 
> 时间：2013-02-26T02:33:03.250
> 
> 标签：angularjs

我有 2 个解决方案的问题，每个控制器一个解决方案。

[http://jsfiddle.net/pvivera/RhAHy/](http://jsfiddle.net/pvivera/RhAHy/)

```
var app = angular.module('testApp', [], function($routeProvider){
    $routeProvider.when('/', {
        template: 'Home {{model}}',
        controller: 'HomeCtrl',
        resolve: HomeCtrl.resolve
    })
    .when('/About', {
        template: 'About {{model}}',
        controller: 'AboutCtrl',
        resolve: AboutCtrl.resolve
    });
});

var HomeCtrl = app.controller('HomeCtrl', function($scope, HomeCtrlData){
    $scope.model = HomeCtrlData;
});

HomeCtrl.resolve = {
    HomeCtrlData: function($q, $timeout){
        var deferred = $q.defer();
        $timeout(function(){
            return deferred.resolve('AboutCtrlResolver');
        }, 2000);
        return deferred.promise;
    }
};

var AboutCtrl = app.controller('AboutCtrl', function($scope, AboutCtrlData){
    $scope.model = AboutCtrlData;
});

AboutCtrl.resolve = {
    AboutCtrlData: function($q, $timeout){
        var deferred = $q.defer();
        $timeout(function(){
            return deferred.resolve('AboutCtrlResolver');
        }, 2000);
        return deferred.promise;
    }
}; 
```

在 jsfiddler 脚本中，当 HomeCtrl 想要解析 HomeCtrlData 我收到此错误 Unknown provider: HomeCtrlDataProvider <- HomeCtrlData

如果我在 HomeCtrl 中将 HomeCtrlData 更改为 AboutCtrlData 一切正常，似乎分配的唯一解析是 AboutCtrl.resolve

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:33:16.843

这里的问题是它`app.controller()`不返回控制器，而是返回您的应用程序模块。所以你分配`app.resolve`了两次，这就是为什么它对其中一个不起作用。

我建议您像这样内联解析函数：

```
var app = angular.module('testApp', [], function($routeProvider){
    $routeProvider.when('/', {
        template: 'Home {{model}}',
        controller: 'HomeCtrl',
        resolve: {
            HomeCtrlData: function($q, $timeout) {
                var deferred = $q.defer();
                $timeout(function(){
                    return deferred.resolve('HomeCtrlData');
                }, 2000);
                return deferred.promise;
            }
        }
    })
    .when('/About', {
        template: 'About {{model}}',
        controller: 'AboutCtrl',
        resolve: {
            AboutCtrlData: function($q, $timeout) {
                var deferred = $q.defer();
                $timeout(function(){
                    return deferred.resolve('AboutCtrlData');
                }, 2000);
                return deferred.promise;
            }
        }
    });
}); 
```

# mongodb - 在 MongoDB 中查询空值

> ID：15080343
> 
> 赞同：6
> 
> 时间：2013-02-26T02:33:12.013
> 
> 标签：mongodb, pymongo

使用**pymongo**我正在尝试检索集合中`SmallUrl`与`null`. 我试图得到`names`钥匙和`SmallUrl`钥匙。

如果我寻找`Name`唯一的，查询运行良好。但是，由于我想从结果中过滤掉具有`null`值的文档，因此`SmallUrl`当我在查询中包含 this 时，查询不会返回任何内容。

这是 MongoDB 结构：

```
{u'Images': {u'LargeUrl': u'http://somelink.com/images/7960/53.jpg',
             u'SmallUrl': u'http://somelink.com/images/7960/41.jpg'}
 u'Name': u'Some Name',
 u'_id': ObjectId('512b90f157dd5920ee87049e')}

{u'Images': {u'LargeUrl': u'http://somelink.com/images/8001/53.jpg',
             u'SmallUrl': null}
 u'Name': u'Some Name Variation',
 u'_id': ObjectId('512b90f157dd5820ee87781e')} 
```

这是查询的功能：

```
def search_title(search_title):
$ne
    ''' Returns a tuple with cursor (results) and the size of the cursor'''

    query = {'Name': {'$regex': search_title, '$options': 'i'}, 'SmallUrl': {'$exists': True}}

    projection = {'Name': 1, 'Images': 1}

    try:
        results = movies.find(query, projection)

    except:
        print "Unexpected error: ", sys.exc_info()[0]
$ne
    return results, results.count() 
```

我是 MongoDB 的新手，我已经尝试过不同的查询。我用过`$and`, `$not`, `{'$ne': 'null'}`}。我还在 mongoShell 中运行了查询，但结果相同。这是我在 shell 中查询的示例：

```
db.myCollection.find({'Name': {'$regex': 'luis', '$options': 'i'}, 'SmallUrl': {'$ne': null}}) 
```

我想知道我做错了什么。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-26T03:13:59.317

pymongo 版本`null`是 Python `None`。所以`query`应该看起来像：

```
query = {
    'Name': {'$regex': search_title, '$options': 'i'}, 
    'Images.SmallUrl': {'$ne': None}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:04:59.417

您的查询不起作用，因为您应该使用“Images.SmallUrl”而不是“SmallUrl”作为查询键。我的测试集合：

```
> db.t.find()
{ "_id" : ObjectId("512cdbb365fa12a0db9d8c35"), "Images" : { "LargeUrl" : "http://aaa.com", "SmallUrl" : "http://bb.com" }, "Name" : "yy" }
{ "_id" : ObjectId("512cdc1765fa12a0db9d8c36"), "Images" : { "LargeUrl" : "http://aaa.com", "SmallUrl" : null }, "Name" : "yy" } 
```

和我的测试查询：

```
> db.t.find({'Images.SmallUrl': {$ne: null}})
{ "_id" : ObjectId("512cdbb365fa12a0db9d8c35"), "Images" : { "LargeUrl" : "http://aaa.com", "SmallUrl" : "http://bb.com" }, "Name" : "yy" } 
```

希望有所帮助^_^

# ios - 使用约束根据内部视图高度设置 UIView 高度

> ID：15080344
> 
> 赞同：0
> 
> 时间：2013-02-26T02:33:12.043
> 
> 标签：ios, interface-builder

我有一个`UIView`，在里面，*N* `UILabels`是相对于彼此布置的。

包含`UIView`有背景颜色，我想将其扩展`UIView`到足够高以覆盖其中的所有标签，因此背景颜色在它们后面。

（我将它们嵌入到 UIView 中，这样我就可以从视图边缘插入标签。）

是否可以使`UIView`' 的高度扩展以填充其内容？我无法从约束选项中计算出来，它似乎都与超级视图相关。

通常我只是以编程方式计算出帧大小，`viewDidAppear`但这些会被约束系统 AFAIK 重置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:46:35.610

我想我实际上已经解决了。

我从拖放和调整大小时手动设置了标签高度。删除 UILabel 上的高度约束使其大小适合内容，这会导致其超级视图也调整大小。至少我认为是这样，我对约束不熟悉。

会留下问题，因为它可能也会咬别人。

# iphone - 如何将后置摄像头实时视频源显示到 UIImageView？

> ID：15080349
> 
> 赞同：0
> 
> 时间：2013-02-26T02:33:42.230
> 
> 标签：iphone, ios, xcode, avfoundation

我一直在搞乱 iPhone 的 AVFoundation 框架，但我似乎无法从后置摄像机获取信息以显示在界面构建器中的 UIImageView 上。

这是一个单视图应用程序。

我只想获取后置摄像头在 UIImageView 上看到的内容。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:40:36.087

你不需要 UIImageView，只需要一个 UIView。

看看 AVFoundation 中的 AVCaptureSession 和 AVCaptureDeviceInput。有了这些，您可以访问相机。

AVCaptureVideoPreviewLayer 可用于将相机输入绘制到 UIView。

[http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureVideoPreviewLayer_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:39:06.867

希望这能回答您的问题： http: [//www.ios-developer.net/iphone-ipad-programmer/development/camera/camera-preview-on-a-view-controller](http://www.ios-developer.net/iphone-ipad-programmer/development/camera/camera-preview-on-a-view-controller)

如果您想了解更多信息，请告诉我！

# asp.net-mvc - asp.net MVC 4 - Htmlhelper 扩展

> ID：15080356
> 
> 赞同：0
> 
> 时间：2013-02-26T02:35:19.207
> 
> 标签：asp.net-mvc, asp.net-mvc-4, authorization

我正在为 Html.RenderAction 创建一个自定义 HtmlHelper 扩展。我的父视图将包含许多不同的局部视图，这些视图将通过调用 Html.Renderaction 来呈现。但是管理员可以对角色的部分视图进行排序，或者他可以完全停用整个应用程序的操作所以我计划为 Html.RenderAction 提供一个扩展方法，该方法将依次检查角色并查看是否角色有权访问特定操作。这个角色到动作的映射是在 xml 中用餐的，我打算只在内存数据结构中加载这个 xml 一次。并让 html 帮助程序扩展查看该数据结构。这是一个好方法吗？还有更好的方法吗？

```
 @section column2 {
        @{Html.RenderActionIfIfAllowed("DashboardItem_Users", "DashBoard",User);}
        }

        @section column3 {
        @{Html.RenderActionIfIfAllowed("DashboardItem_Orders", "DashBoard", User);}
        } 
```

我必须渲染上述部分视图。所以我创建了一个名为 Html.RenderActionIfIfAllowed 的 html 帮助程序扩展。

```
public static class HtmlHelperExtensions 
{
   public static void RenderActionIfIfAllowed<TModel>(this HtmlHelper<TModel> htmlHelper, string actionName, string controllerName, IPrincipal user)
    {
       //We can use the layour manager class to check if a particular role has access to an action and also if the action is active.
       //Hard coding here just for demo purpose
        if (user.IsInRole("Admin") && actionName != "DashboardItem_Users")
        {
            System.Web.Mvc.Html.ChildActionExtensions.RenderAction(htmlHelper, actionName, controllerName);
        }
        else if (user.Identity.IsAuthenticated && !user.IsInRole("Admin"))
        {
            System.Web.Mvc.Html.ChildActionExtensions.RenderAction(htmlHelper, actionName, controllerName);
        }
    }

} 
```

这样做的原因是因为我们希望根据视图是否处于活动状态来动态地向用户显示或不向用户显示 aprtial 视图。我们将读取一个 xml 文件，该文件将说明视图是否对用户处于活动状态并相应地呈现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:29:12.977

我曾经为此创建 ViewModel 并设置 bool 属性

```
public class DashBoardViewModel{

public DashBoard dashBoard{get;set;}

bool showItemDashBoard{get;set;}

bool showOrderDashBoard{get;set;}

} 
```

> 在控制器中，我验证用户角色并设置这些布尔属性。

在视图中

```
if(Model.showItemDashBoard){
  @Html.RenderAction("Action","Controller")
} 
```

# xcode - 是否由于 Xcode 4.6 构建设置而导致崩溃？

> ID：15080362
> 
> 赞同：1
> 
> 时间：2013-02-26T02:35:54.317
> 
> 标签：xcode, deployment, xcode4

用户在 OS X 10.5.8 上拥有 mini，在 10.6.8 上拥有 iMac。我的应用程序在启动时立即崩溃并出现 SIGSEGV 错误。在试图找出崩溃原因时，我发现一篇帖子说 XCode 4.6 无法为这些操作系统编译。

我可以支持的最古老的操作系统是什么？

是否有我可以使用的构建设置，或者我必须尝试加载早期版本的 Xcode？这是我的第一个 Mac 应用程序，所以我还在苦苦挣扎。

![我的构建设置](../Images/766aef1adda46d6ba91a0c2760035344.png)

# python - 通过命令行的条件按键

> ID：15080365
> 
> 赞同：1
> 
> 时间：2013-02-26T02:36:02.417
> 
> 标签：python, macos, command-line, python-2.7, osx-lion

我有一个正在构建的测试用例，我想通过按键启动或停止计时器，但我不知道如何让我的例程保持活力......'g'应该启动计时器（并不断重复)，并且 's' 应该停止计时器。然后'g' 可以启动计时器，等等。相反，'g' 启动计时器而's' 什么都不做。我究竟做错了什么？

代码：

```
#!/usr/bin/env python

import time, sys 

def print_something(status):
    while(status):
        print 'the time: ' , time.ctime()
        time.sleep(1);

def main():
    result = 1 
    print 'starting time: ' , time.ctime()

    result = raw_input('press g to start timer, s to stop.\n')
    while(result is 'g'):
        print_something(True)
        result = ''

    result = None
    time.stop()

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:00:57.920

您的主要问题是您正在尝试读取`stdin`但控制流卡在`print_something`函数中（在这种情况下是无限循环）并且根本不会从那里离开。换句话说，您想在用户输入时读取“s”，但在循环完成之前，这部分代码不会被执行。

你需要**打断**一下。下面的代码完成了你想要的，但是，用户必须按“Ctrl+C”来停止计时器。

```
#!/usr/bin/env python

import time, sys 

def main():
    result = 1 
    print 'starting time: ' , time.ctime()

    while(result):
        result = raw_input('press g to start timer, ctrl+c to stop.\n')

        if result is 'g':
            print_something()
            result = ''
        else:
            result = None
            time.stop()
            sys.exit()

def print_something():
    while 1:
        try:
            print 'the time: ' , time.ctime()
            time.sleep(1);
        except KeyboardInterrupt:            
            break
main() 
```

* * *

**编辑：**

> 这就是我想要的： 1\. 启动程序 2\. 按 g，计时器启动 3\. 按 s，计时器停止 4\. 按 g，计时器启动等。CTRL-C 不应该是停止计时器的方式，而是要杀死该程序。

然后编程范式必须改变。您正在考虑一个[事件驱动程序](http://en.wikipedia.org/wiki/Event-driven_programming)，它响应诸如按键之类的事件。也许您需要创建一个**线程**来检索按下了哪个键并在另一个线程打印时间时相应地执行`s`或被按下。`g`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T02:40:24.987

尝试将`while`循环移动到`main`函数内部。

```
def main():
result = 1
print 'starting time: ' , time.ctime()
while(result):
result = raw_input('press g to start timer, s to stop.\n')

if result is 'g':
    print_something()
    result = ''
elif result is 's':
    result = None
    time.stop()
    sys.exit() 
```

更新：你试过测试`while(result != 's')`吗？

# c++ - vc.net：无法设置双变量的值

> ID：15080368
> 
> 赞同：0
> 
> 时间：2013-02-26T02:36:25.180
> 
> 标签：c++, visual-studio-2005, double

开发环境：Visual Studio 2005 语言：c++

运行此行后：

```
g_Frm->streamValue[0].dayAvgValue[0] = 1 
```

我已经设置`g_Frm->streamValue[0].dayAvgValue[0] = 1;`
( `g_Frm->streamValue[0].dayAvgValue[0] is type of double`)

但是在监视窗口中，它仍然显示为-6.2774...e+066，因为变量被初始化了。

需要帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T02:46:09.073

两个想法：

*   检查您所引用的构造中的变量是否已定义。

即 g_Frm 是否有效？g_Frm->streamValue 是一个有效的数组吗？g_Frm->streamValue[0] 是有效的数组和索引值吗？g_Frm->streamValue[0]->dayAvgValue 是有效数组吗？

如果您尝试获取的变量链中的任何变量未初始化，您将获得一些未定义的行为。确保您已经分配了内存和有效的索引值（通常，在第 0 个元素的情况下，只要那里有元素，您就可能很好）。

*   如果其他一切都有效，请检查是否有关于隐式类型转换的警告。“1”的 32 位或 64 位整数值与“1.0”的浮点/双精度值有很大不同。这意味着在 int 世界中，您的 LSB（最低有效位）为 1，但在浮点世界中，它代表一个极小的小数值。

# java - Apache Tiles - 无法访问 Spring MVC 中自定义 ViewPreparer 中的 bean

> ID：15080375
> 
> 赞同：5
> 
> 时间：2013-02-26T02:36:48.570
> 
> 标签：java, spring, spring-mvc, javabeans, apache-tiles

我正在使用带有 Apache Tiles 的 Spring 3.2。我使用 Roo 生成了很多服务类。我正在尝试一个简单的过程，将变量注入到 jsp 模板中。这部分工作正常，但我被困在需要引用服务 bean 的地方。

```
@Component
public class CustomViewPreparer implements ViewPreparer {

@Autowired
UserProfileService ups;

@Override
public void execute(TilesRequestContext tilesContext,
                    AttributeContext attributeContext) {

       Authentication a = SecurityContextHolder.getContext().getAuthentication();
       String name = a.getName(); //get logged in username

       UserProfile up = ups.findByUsername(name);
       //request.setAttribute("isLoggedIn", up!=null);

    }
} 
```

UserProfileService“ups”始终为空。我发现了这个：http: [//forum.springsource.org/showthread.php?48950-ViewPreparer-is-triggered-before-Session-starts](http://forum.springsource.org/showthread.php?48950-ViewPreparer-is-triggered-before-Session-starts)

但我不明白回应。我可以通过每次返回视图时注入我的变量来解决这个问题，但我很好奇其他人是如何解决这个问题的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-03T09:30:22.933

我遇到了同样的问题，原因是你必须对 Tiles 说从 Spring bean 获取 UserProfileService 实例。

因此，您必须在 TilesConfigurer 中明确要求使用 spring bean 进行注入：

```
<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
  <property name="definitions">
    <list>
     .....
    </list>
  </property>

  <!-- resolving preparer names as Spring bean definition names -->
  <property name="preparerFactoryClass"
       value="org.springframework.web.servlet.view.tiles2.SimpleSpringPreparerFactory "/>

</bean> 
```

转到此处以获取有关配置的更多信息：http: [//static.springsource.org/spring/docs/2.5.x/reference/view.html](http://static.springsource.org/spring/docs/2.5.x/reference/view.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-06T10:03:37.023

对于带有注释配置的 SpringBoot 2，您可以通过列出的方式解决此问题

```
 @Configuration
       public class TilesConfiguration implements WebMvcConfigurer {    
          @Override
          public void configureViewResolvers(ViewResolverRegistry registry) {
            TilesViewResolver teilsViewResolver=new TilesViewResolver();
            registry.viewResolver(teilsViewResolver);
          }
          @Bean
          public TilesConfigurer tilesConfigurer() {
             TilesConfigurer tilesConfigurer = new TilesConfigurer();
             tilesConfigurer.setDefinitions(new String[] {"/WEB-INF/tiles/tiles.xml" });    
              tilesConfigurer.setPreparerFactoryClass(SimpleSpringPreparerFactory.class);
             return tilesConfigurer;
          } 
   } 
```

如果不添加 Preparer，您将无法在自定义 ViewPreparer 中自动装配任何应用程序依赖项

# java - java.nio.channels.DatagramChannel 基本 UDP RX 客户端连接

> ID：15080379
> 
> 赞同：1
> 
> 时间：2013-02-26T02:37:19.103
> 
> 标签：java, udp, nio

尝试使用 java.nio.channels.DatagramChannel 做一个基本的 UDP 客户端接收器。我将以下内容放在一起：

```
DatagramChannel dc = DatagramChannel.open();
dc.setOption(StandardSocketOptions.SO_RCVBUF, Integer.MAX_VALUE);
dc.configureBlocking(true);
int listeningPort = 4445;
dc.connect(new InetSocketAddress(listeningPort));
ByteBuffer byteBuffer = ByteBuffer.allocateDirect(2048);
dc.read(byteBuffer); 
```

我在调用连接时遇到绑定异常：

```
 Exception in thread "main" java.net.BindException: Cannot assign requested address: connect
    at sun.nio.ch.Net.connect0(Native Method)
    at sun.nio.ch.Net.connect(Unknown Source)
    at sun.nio.ch.DatagramChannelImpl.connect(Unknown Source) 
```

我试过在没有运气的情况下切换端口......有什么想法吗？

我一直在关注： [http ://tutorials.jenkov.com/java-nio/datagram-channel.html](http://tutorials.jenkov.com/java-nio/datagram-channel.html)

如果我这样做：

```
dc.socket().bind(new InetSocketAddress(listeningPort)); 
```

而不是连接，我得到：

```
Exception in thread "main" java.nio.channels.NotYetConnectedException
at sun.nio.ch.DatagramChannelImpl.read(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:42:45.320

我以前做过类似的事情，这就是我的代码：

```
 DatagramChannel datagramChannel = DatagramChannel.open();
    DatagramSocket datagramSocket = datagramChannel.socket();
    datagramSocket.setReuseAddress(true);
    datagramSocket.bind(new InetSocketAddress(HOST, PORT));
    datagramSocket.connect(address);
    datagramChannel.configureBlocking(false);

    datagramChannel.register(selector, SelectionKey.OP_READ); 
```

我的`HOST = "localhost"` 和`PORT = 19000`

# twitter-bootstrap - twitter bootstrap 2.3.0 模态转换未显示

> ID：15080382
> 
> 赞同：0
> 
> 时间：2013-02-26T02:37:31.200
> 
> 标签：twitter-bootstrap

```
.modal-confirm.modal.hide.fade
div.modal-header
    button.close(data-dismiss='modal') x
    h3
div.modal-body
    p
div.modal-footer
    button(data-dismiss="modal").cancel.btn Cancel
    button.submit.btn Ok 
```

javascript:

```
$('#login-form #forgot-password').click(function(){ $('#get-credentials').modal('show');}); 
```

这曾经工作得很好，但我升级到 twitter-bootstrap 2.3.0 并且模态不再出现在窗口中间，它卡在窗口顶部。jquery 1.8.0 版本

![在此处输入图像描述](../Images/692c269f2e64e1b4fe97eca4f55a8e6e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T19:50:01.607

我查看了 bootstrap-min.css、v2.0.4 和 v2.3.0 的差异：

```
modal.fade.in{top:10%} in 2.3.0 
and 
modal.fade.in{top:50%} in 2.0.4 
```

# java - hibernate - 在没有会话的情况下获取命名查询字符串

> ID：15080386
> 
> 赞同：1
> 
> 时间：2013-02-26T02:38:03.580
> 
> 标签：java, hibernate, session

使用 Session 可以检索命名查询，如下所示：

```
Query query = session.getNamedQuery(queryName); 
```

但是如何在不使用会话的情况下检索命名查询呢？

我正在动态修改查询字符串，此时不需要会话。

*定义的命名查询没有改变*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:07:47.790

```
SessionFactoryImplementor sesionFactoryImplementor=(SessionFactoryImplementor)sessionFactory;

sesionFactoryImplementor.getNamedQuery("test").getQueryString(); 
```

与 Hibernate 4 一起使用。正如 Nayan Wadekar 所说，您不能在运行时对其进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T15:04:49.047

这对我很有效：

```
Query query = em.createNamedQuery(namedQuery);
String hql = query.unwrap(org.hibernate.Query.class).getQueryString(); 
```

希望这可以帮助！

# mysql - 从转储中恢复 mysql 数据库时忽略特定表的数据

> ID：15080388
> 
> 赞同：2
> 
> 时间：2013-02-26T02:38:12.517
> 
> 标签：mysql, mysqldump

我有一个巨大的转储文件，其中包含大约 200 个表和其中一些表的数百万条记录。我知道当我这样做时可以忽略特定的表`mysqldump`。

从转储中“恢复”数据库时是否可以忽略某些表或仅忽略这些表的插入查询？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:46:42.377

mysql客户端无法做到这一点。转储文件基本上是 CREATE TABLE 和 INSERT 语句（以及其他一些语句）的大集合，并且 mysql 客户端没有任何方式执行此类 SQL 脚本的*一部分*。

但是，我在必要时通过对`sed`. 例如，如果我想排除表“do_not_want”的创建和数据，我可以这样做：

```
cat mydumpfile.sql |
sed -e '/^-- Table structure for table .do_not_want./,/^UNLOCK TABLES;/d' |
mysql 
```

这假设我们用于边界的模式不会出现在数据本身中。

# javascript - 包装器功能无法正常工作（Javascript）

> ID：15080389
> 
> 赞同：0
> 
> 时间：2013-02-26T02:38:27.633
> 
> 标签：javascript, html, forms

我有两个功能：一个是验证表单名称字段中的信息，另一个是获取这些字段中的信息并将它们打印在警报框中。这些功能分别工作正常。我必须同时调用它们，所以我创建了一个包装函数。该函数运行，但它刷新而不是聚焦。奇怪的是，如果我检查第一个字段，一切都很好，包括 .focus();，但是当我尝试验证第二个字段时，.focus(); 不起作用，页面刷新。任何帮助，将不胜感激。（我试图修改我的第一个问题以添加它，但是当我去保存它时，什么也没发生。）

```
function main() {
  var test = validate();
  if (test == true) {
    concatinate();
    return true;
  }
}

function validate() {
  //alert ("TEST!!!");
  var first = document.getElementById('firstname').value;
  if (first.length == 0 || first.length > 25) {
    alert("Please enter your first name, no longer than 25 chracters.");
    document.getElementById('firstname').focus();
    return false;
  }
  var last = document.getElementById('lastname').value;
  if (last.length == 0 || last.length > 25) {
    alert("Please enter your last name, no longer than 25 characters.");
    document.getElementsByName('lastname').focus();
    return false;
  }
  var title = document.getElementById('title').value;
  if (document.getElementById('title').selectedIndex == 0) {
    alert("Please select your salutation");
    document.getElementById('title').focus();
    return false;
  }
  return true;
}

function concatinate() {
  var first = document.getElementById('firstname').value;
  var last = document.getElementById('lastname').value;
  var title = document.getElementById('title').value;
  var fullname = title + " " + first + " " + last;
  var printFull = "Welcome,  " + fullname;
  alert(printFull);
}

<form name="name" form id="name" method="post" onsubmit="return main();"> 
        Salutation: <select name="title" select id="title">
            <option selected="Please Select">Please select</option>
            <option value="Mr.">Mr.</option>
            <option value="Mrs.">Mrs.</option>
            <option value="Miss">Miss</option>
        </select><br><br>
        First Name : <input type="text" input id="firstname" name="firstname">
        Last Name : <input type="text" input id="lastname" name="lastname"><br><br>
        <input type="submit" value="Submit"><br><br>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:45:16.873

在您的表单中，您的、标签`<form>`中间的“选择”和`<select>`标签中的“输入”有一个错误的属性“form” `<input>`。我不确定它们的用途，或者它们是否给你带来麻烦，但你还是应该摆脱它们。

另外，您的问题是这一行：

```
document.getElementsByName('lastname').focus(); 
```

`document.getElementsByName()`返回一个数组，并且数组上没有`focus()`方法。这导致您在验证姓氏时出现问题。

更改它以匹配您的其他`focus()`呼叫：

```
document.getElementById('lastname').focus(); 
```

`main()`我还删除了您方法中的临时变量：

```
function main(form) {
    if (validate()) {
        concatinate();
        return true;
    }
    return false;
} 
```

**工作演示：http: [//jsfiddle.net/cFsp5/4/](http://jsfiddle.net/cFsp5/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:04:40.240

如果验证未通过，您的`main`函数**必须**返回。`false`否则，它将返回`undefined`，并且表单将无论如何提交（这就是您所描述的）。所以一个简单的解决方法是：

```
function main() {
  var test = validate();
  if (test == true) {
    concatinate();
    return true;
  }
  return false;
} 
```

[http://jsfiddle.net/LhXy4/](http://jsfiddle.net/LhXy4/)

# sitecore - 关于 Sitecore 备份

> ID：15080392
> 
> 赞同：3
> 
> 时间：2013-02-26T02:38:52.007
> 
> 标签：sitecore, sitecore6

我正在尝试备份`a whole Sitecore website`。
我知道`package designer`可以完成部分工作，但不能完全完成。
当站点意外损坏时，备份始终是一个好方法。
`Is there a way or a tool to backup the whole Sitecore website?`
我是 Sitecore 的新手，因此欢迎任何建议。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:07:49.127

我们运行了一个 SQL 作业来每晚备份数据库。除此之外，当我部署代码时，我通常只备份我要替换的部分。如果这是一个大代码部署，我只需在部署代码包之前备份整个网站（无论如何都是代码）。

除此之外，我们还运行代码的预定备份（虽然我不知道间隔），当然，如果其他一切都失败了，我们有源代码控制。

如果你有一个自动化的部署工具，你当然也可以自动化上面的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:11:09.510

我不知道可以为您执行此操作的工具，但有几种方法可以轻松处理此问题：

1）您可以创建主数据库的数据库备份，但这仅包含内容，不包含保存在磁盘上的媒体文件或您的完整和构建解决方案等文件。每天晚上安排数据库备份并将备份保存至少一周或更长时间总是一个好主意。

2) 当您使用包设计器时，您可以创建动态包，其中可以包含磁盘上的所有内容、媒体文件和解决方案文件。这是一次将站点部署到新的 Sitecore 安装的简单方法，但每次都需要手动备份。

3) 您可以使用的另一种方法是从 Developer 选项卡将整个内容树序列化为磁盘上的 xml 格式。序列化后，您可以将它们还原回内容树。 ![序列化选项卡](../Images/19df23bfebb37ada63022db5048eefe3.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T03:12:26.407

在内容或代码的主要部署之前，我通常会备份主数据库并将网站目录中的所有内容压缩，减去`App_Data`和`temp`目录。这样，如果部署出错，我可以相当快地恢复代码和数据库并恢复到以前的状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:22:01.693

进一步扩展[Trayek](https://stackoverflow.com/users/2064919/trayek)所说的内容，我的建议是使用[持续集成 (CI)](http://www.martinfowler.com/articles/continuousIntegration.html)并使用[Team City](http://www.jetbrains.com/teamcity/)进行自动部署。

Stack Overflow 上也给出[了一个很好的答案。](https://stackoverflow.com/questions/1987507/how-to-deploy-after-a-build-with-teamcity)

基本上，在您的情况下，Teamcity 会自动 1\. 备份当前网站（即代码）并在其上部署新代码。2\. 如果需要，还可以编写脚本来对 SQL 数据库进行差异备份。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T19:30:31.453

我建议分两部分考虑这一点，第一部分是备份应用程序，这很简单，就像确保您的应用程序在某个 SCM 系统中一样。

为此，您可以使用 Sitecore 的团队开发。它的一项功能允许您将 Visual Studio 项目连接到您的 Sitecore 实例。

您可以选择要存储在解决方案中的 Sitecore 项目，它将对其进行序列化并将它们放入您的解决方案中。

然后，您可以将它们签入您的 SCM 系统并更轻松地入睡。

需要注意的是决定将哪个项目放置在源代码管理中，通常您可以认为 Sitecore 项目拥有开发人员和内容编辑器。您将放置在解决方案中的项目是开发人员拥有的项目；网站运行所需的模板、子布局、布局和内容项目就是很好的例子。

这样，如果出现问题，基础恢复既快速又简单。

第二部分是自部署以来添加的 Sitecore 中内容的备份。对于像 Trayek 上面所说的那样，使用 SQL 作业以您喜欢的任何时间间隔进行备份。

如果您觉得无聊，我有一篇关于使用 TDS（Sitecore 团队开发）的帖子，您可以查看[使用 Sitecore，第 9 部分：TDS](http://www.joshuwa.com/2013/02/working-with-sitecore-part-nine-tds.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-19T00:59:46.793

看看[Sitecore Instance Manager](https://marketplace.sitecore.net/en/Modules/Sitecore_Instance_Manager.aspx)模块。非常适合打包整个 Sitecore 实例。

# drupal - 多站点 Drupal 的 Varnish VCL 配置？

> ID：15080393
> 
> 赞同：1
> 
> 时间：2013-02-26T02:38:53.133
> 
> 标签：drupal, varnish, varnish-vcl, drupal-multi-domain

我目前的设置是：

*   Varnish at`:80`和 Drupal at`:8080`在同一个盒子上
*   Drupal 作为多站点运行，例如`site1.xx.com`，`site2.xx.com`
*   多站点域由 Apache V.Hosts 解决

在这种 Drupal 设置上是否有任何标准/通用 VCL 配置？或者，Default VCL 文件是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:54:00.833

您需要在 settings.php 中设置 cookie 域并使用[本指南](http://www.lullabot.com/articles/varnish-multiple-web-servers-drupal)为您的 Varnish 版本添加 drupal.vcl。

# haskell - 记忆乘法

> ID：15080399
> 
> 赞同：10
> 
> 时间：2013-02-26T02:39:04.417
> 
> 标签：haskell, memoization, currying

我的应用程序在使用 FFT 进行（昂贵的）转换后将向量相乘。结果，当我写

```
f :: (Num a) => a -> [a] -> [a]
f c xs = map (c*) xs 
```

我只想计算`c`一次的 FFT，而不是计算`xs`. 真的不需要`c`为整个程序存储 FFT，只需在本地范围内即可。

我试图定义我的`Num`实例，如：

```
data Foo = Scalar c
         | Vec Bool v -- the bool indicates which domain v is in

instance Num Foo where
    (*) (Scalar c) = \x -> case x of
                         Scalar d -> Scalar (c*d)
                         Vec b v-> Vec b $ map (c*) v
    (*) v1 = let Vec True v = fft v1
             in \x -> case x of
                    Scalar d -> Vec True $ map (c*) v
                    v2 -> Vec True $ zipWith (*) v (fft v2) 
```

然后，在一个应用程序中，我调用了一个类似于`f`（适用于任意`Num`s） where的函数`c=Vec False v`，我希望这会像我破解一样快`f`：

```
g :: Foo -> [Foo] -> [Foo]
g c xs = let c' = fft c
         in map (c'*) xs 
```

该函数`g`使记忆`fft c`发生，并且比调用快得多`f`（无论我如何定义`(*)`）。我不明白出了什么问题`f`。这是我`(*)`在`Num`实例中的定义吗？它是否与`f`处理所有 Nums 有关，因此 GHC 无法弄清楚如何部分计算`(*)`？

*注意*：我检查了我的 Num 实例的核心输出，并且 (*) 确实表示为嵌套 lambda，在顶层 lambda 中进行了 FFT 转换。所以看起来这至少可以被记忆。我还尝试过明智地和鲁莽地使用 bang 模式来试图强制评估无效。

附带说明一下，即使我能弄清楚如何让`(*)`memoize 成为它的第一个参数，它的定义方式还有另一个问题：想要*使用*Foo 数据类型的程序员必须了解这种 memoize 功能。如果她写

```
map (*c) xs 
```

不会发生记忆。（它必须写成`(map (c*) xs))`现在我想起来了，我不完全确定 GHC 将如何重写`(*c)`版本，因为我已经 curried `(*)`。但我做了一个快速测试来验证两者`(*c)`并按`(c*)`预期工作：`(c*)`将`c`第一个 arg 设为`*`, 而`(*c)`将`c`第二个 arg 设为`*`. 所以问题在于如何编写乘法以确保记忆并不明显. 这只是中缀符号的固有缺点（以及参数`*`是对称的隐含假设）吗？

第二个不太紧迫的问题是我们将 (v*) 映射到*标量*列表的情况。在这种情况下，（希望）v 的 fft 将被计算和存储，即使它是不必要的，因为另一个被乘数是标量。有没有办法解决？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:11:24.093

我相信[stable-memo](http://hackage.haskell.org/package/stable-memo)包可以解决你的问题。它不使用相等而是通过引用标识来记住值：

> 大多数 memo 组合器基于相等性进行 memoize，而 stable-memo 则基于之前是否已将完全相同的参数传递给函数（即，内存中的参数相同）。

当它们的键被垃圾收集时，它会自动删除记忆值：

> stable-memo 不会保留它迄今为止看到的密钥，如果它们不再被使用，这将允许它们被垃圾收集。如果发生这种情况，将放置终结器以从备忘录表中删除相应的条目。

所以如果你定义类似的东西

```
fft = memo fft'
  where fft' = ... -- your old definition 
```

你会得到你需要的东西：调用`map (c *) xs`将记住 fft 在第一次调用中的计算，`(*)`并在后续调用中重用`(c *)`. 如果`c`是垃圾收集，那么`fft' c`.

另请参阅[如何添加仅将某些内容缓存到 ADT 的字段的](https://stackoverflow.com/q/13098448/1333025)答案[？](https://stackoverflow.com/a/13311867/1333025)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:57:48.253

我可以看到两个可能会阻止记忆的问题：

首先，`f`具有重载类型并适用于所有`Num`实例。所以`f`不能使用 memoization，除非它是专门的（通常需要一个`SPECIALIZE`pragma）或内联的（这可能会自动发生，但使用 pragma 更可靠`INLINE`）。

其次， for 的定义`(*)`对`Foo`第一个参数执行模式匹配，但`f`与 unknown 相乘`c`。所以在 内`f`，即使是专门的，也不会发生记忆。再一次，它在很大程度上取决于`f`被内联，并提供一个具体的参数`c`，这样内联才能真正出现。

所以我认为看看你打电话的准确程度会有所帮助`f`。请注意，如果`f`使用两个参数定义，则必须给它两个参数，否则不能内联。此外，查看 的实际定义会有所帮助`Foo`，因为您提到的`c`定义`v`不在范围内。

# qt - 在 Qt 中为按钮着色

> ID：15080404
> 
> 赞同：0
> 
> 时间：2013-02-26T02:39:28.097
> 
> 标签：qt, qt-creator

我正在尝试设计一个简单的按钮（QPushButton 或 QToolButton，两者都可以），它本质上是它所代表的颜色的矩形。单击它会打开一个 QColorDialog，然后在其中选择一种颜色会重新绘制按钮。

所以，基本上，看起来像其中之一的东西：

![在此处输入图像描述](../Images/5b1a7e58ee9ff635b4ae3d47ac8d4ff0.png)

我做了一些尝试，但都没有给我带来我想要的功能。

投币口：

```
void MainWindow::OnButtonColorClick()
{
    QColor initialColor = ui->buttonColor->palette().color(QPalette::Background);

    QColor colorSelected = QColorDialog::getColor(initialColor, this);

    if(colorSelected.isValid())
    {
        ui->buttonColor->setPalette(QPalette(colorSelected));
        ui->buttonColor->setAutoFillBackground(true);
    }
} 
```

* * *

尝试#1：

在构造函数中设置 Palette：

```
ui->buttonCoulor->setPalette(QPalette(Qt::black)); 
```

结果：单击前的普通按钮，选择后的细彩色轮廓。

![在此处输入图像描述](../Images/7f158a62713bb40e3683ed60ffb60525.png)

* * *

尝试#2：

添加样式表：

```
background-color: rgb(0, 0, 0); 
```

结果：点击前黑色矩形，选择后黑色矩形。

![在此处输入图像描述](../Images/edcd5798e41389748d28519b707e3731.png)

* * *

我觉得我在绕着下水道转。本质上，我如何实现：

![在此处输入图像描述](../Images/ec666fdc1cf92b21f3c8980948352498.png)

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T04:09:07.987

这是实现预期效果的一种方法：

```
// Slot for the button
void MainWindow::on_button()
{
    QColor color = QColorDialog::getColor();

    QString s("background: #"
                          + QString(color.red() < 16? "0" : "") + QString::number(color.red(),16)
                          + QString(color.green() < 16? "0" : "") + QString::number(color.green(),16)
                          + QString(color.blue() < 16? "0" : "") + QString::number(color.blue(),16) + ";");
    button->setStyleSheet(s);
    button->update();
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T18:04:47.747

将此样式表与 setStyleSheet 一起使用：

```
border: 1px solid black;
background-color: #XXXXXX; 
```

其中 XXXXXX 是返回的值`QString::number(myColor.rgb(), 16).toUpper();`

无需在按钮上设置任何其他属性。将它们全部保留为默认值，这将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:41:25.093

这对我来说似乎工作得很好：

```
if(colorSelected.isValid())
{
    ui->buttonColor->setPalette(QPalette(colorSelected));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-25T17:53:10.030

作为 phyatt 回答的后续，有一个快捷方式可以生成 XML 格式的颜色字符串：

```
QString s("background: " + color.name + ";");
button->setStyleSheet(s); 
```

# filesystems - 9P过时了吗？

> ID：15080405
> 
> 赞同：19
> 
> 时间：2013-02-26T02:39:36.320
> 
> 标签：filesystems, plan-9

我有兴趣研究 9P FS，目前正在阅读这些实现的可用源：http: [//9p.cat-v.org/implementations](http://9p.cat-v.org/implementations)

9P过时了吗？您是否将其用于某些应用程序？

（我也发现了这一点，9P 和 NFS 之间的一些性能测试：http: [//graverobbers.blogspot.com/2007/08/v9fs-performance-versus-nfs.html](http://graverobbers.blogspot.com/2007/08/v9fs-performance-versus-nfs.html)）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-09-29T23:05:55.573

不，9P 并没有过时；我不知道有一个协议能做什么，并且干净且定义明确，几乎可以在任何存在的语言中正确实现。

9P 用于多种系统。最近在**arm-js**（[一个 ARM 仿真器](https://github.com/ozaki-r/arm-js)）和**9webdraw**（[一个实现 Plan 9 /dev/draw 的 GSoC 项目](https://bitbucket.org/dhoskin/9webdraw)）中的一些用途。两者都是 HTML5 Javascript 实现。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-30T12:13:03.177

只是补充一点，Linux 客户端实现和几个服务器都在积极开发中，所以我认为这是一个非常明显的迹象，人们仍然可以使用它。它最近被大量使用的领域之一是 virtio-9P（又名 virtfs），它是 qemu/kvm 的一部分，可用于直接来宾到主机的文件访问。它还被用于多个实验性操作系统项目（Libra、PROSE、FusedOS），并被整合到其他操作系统（BSD、MacOSX、Windows、Linux）和管理程序中（除了上面的 KVM 实例，它还以各种方式被整合成 Xen）。9P 实际上用于超级计算部署（对于 Plan 9 和 Linux，请参阅 Sourceforge 上的 diod 项目）。

我认为原因是协议非常简单，因此实现也往往非常简单并且易于在其他地方集成（Plan 9 世界内外有几个应用程序使用 9P 作为应用程序的接口，在很多情况下）与一些 Web 开发人员使用 RESTful 接口的方式相同）。

该协议有几个不同的变体，包括专门为更好地匹配 Linux VFS API 而开发的 9P.L 变体。它在添加操作时给协议增加了一点复杂性，但消除了映射 Linux VFS API -> 9P 的一些复杂性，反之亦然。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-04T03:13:32.387

它在 Erlang-on-Xen 中用作 goofs [http://erlangonxen.org/blog/goofs-simple-filesystem的存储协议](http://erlangonxen.org/blog/goofs-simple-filesystem)

这也是 erlang 在 xen 实例上的其他方式，请参见此处：

[http://erlangonxen.org/more/9p2000e](http://erlangonxen.org/more/9p2000e)

此外，它还被带有 QEMU 的 libvirt 使用。

[http://wiki.qemu.org/Documentation/9psetup](http://wiki.qemu.org/Documentation/9psetup)

9p，对我来说，就像网络协议的方案。在大多数情况下，它非常简单，但人们认为需要对其进行扩展以适应他们的环境。幸运的是，这是以通常向后兼容的方式完成的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-09-07T20:57:31.680

除了其他答案中提到的所有内容之外，[微软还使用 9P](https://devblogs.microsoft.com/commandline/a-deep-dive-into-how-wsl-allows-windows-to-access-linux-files/)作为其 Windows 子系统的一部分。

他们为每个作为来宾运行的 Linux 发行版添加了一个 9P 服务器，以便 Windows 可以通过 9P 挂载 Linux 文件系统，并且 Windows 进程可以透明地访问 Linux ext4 分区上的文件。

# php - 如何修复 $_GET 错误？

> ID：15080415
> 
> 赞同：1
> 
> 时间：2013-02-26T02:40:55.190
> 
> 标签：php, get

我将表单数据从一页传递到另一页。

下面是表单动作的代码，verify.php：

```
<?php  

header("Location: http://domain.com/rd/r.php?&email=<?php echo $_GET['email']; ?>"); 

?> 
```

但是，我不断收到以下错误：

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING in /home/thanksfo/public_html/LP/x/verify.php on line 3 
```

知道如何解决吗？它说意外的空白或 t_encapsed。真的不知道怎么了……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T02:42:01.623

双引号字符串的正确语法是：

```
header("Location: http://domain.com/rd/r.php?&email=$_GET[email]"); 
```

您不能`<?php`在字符串中包含代码，特别是关闭`?>`会破坏您的语法。

*   无引号的数组语法仅在此上下文中有效，在普通 PHP 代码中无效。

*   正如@Aarolama Bluenk 指出的那样，[`urlencode()`](http://php.net/manual/en/function.urlencode.php)建议这样做：

    `$formatted = urlencode($_GET['email']);`
    `header("Location: http://domain.com/rd/r.php?&email=$formatted");`

[如果还没有这样做，清理](http://php.net/manual/en/filter.examples.sanitization.php)电子邮件地址也是明智之举。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T02:49:00.797

正如其他人所指出的，`<?php ?>`在字符串中使用语法是行不通的。最重要的是，您还应该确保生成的 URL 有效：

```
header("Location: http://domain.com/rd/r.php?" . http_build_query(array(
    'email' => $_GET['email'],
))); 
```

*我还`"?&"`简单地替换了 URL 的一部分`"?"`*

也可以看看：[`http_build_query()`](http://www.php.net/http_build_query)

或者，您可以[过滤](http://www.php.net/filter)电子邮件地址：

```
$email = filter_input(INPUT_GET, 'email', FILTER_VALIDATE_EMAIL); 
```

使用它，`$email`可以是：

*   `null`- 值未通过
*   `false`- 这不是一个有效的电子邮件
*   电子邮件地址作为字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:46:39.540

或尝试，我认为也可以

```
<?php  

header("Location: http://domain.com/rd/r.php?&email=".$_GET['email']); 

?> 
```

# php - 模板引擎在 PHP 中创建 XML 和 Json

> ID：15080421
> 
> 赞同：1
> 
> 时间：2013-02-26T02:41:36.530
> 
> 标签：php, xml, json, template-engine

我正在寻找是否有任何模板引擎可以将任何给定数据呈现为 XML 和 Json。数据将来自 SQL 查询和计算/添加字段的组合。数据不一定会使用所有 SQL 数据，因为其中的某些部分将用于计算。我需要一些通用的东西，可以用来指向为该特定输出制作的模板。将有几个页面使用它们自己的输出。

我知道 PHP 有自己的模板引擎，但我从来没有让它很好地与 json 一起工作，尤其是在属性集合方面。

# spring - 具有多个作业和 xml 文件的 Spring Batch

> ID：15080422
> 
> 赞同：3
> 
> 时间：2013-02-26T02:41:57.467
> 
> 标签：spring, spring-batch

Spring Batch 中是否可以有多个作业定义？例如，jobA.xml 和 jobB.xml 都包含格式良好的作业。我想在某些条件下执行jobA，在其他条件下执行jobB。我似乎无法找到一种方法来识别具有特定预定义工作的工作或工作启动器。

也许我误解了这项技术。如果你有时间，请帮忙。

谢谢！b

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T22:03:12.380

嵌套作业可以很容易地在 xml 中定义，比如你有一个子作业......

```
<job id="childJob" .....
</job> 
```

您可以让父作业引用 childJob ...

```
<job id="parentJob" ...>
  <step id="step1" ..>
   <job ref="childJob" />
  </step>
</job> 
```

如果您不想将所有作业都放在一个 xml 中，则可以适当地将作业分区为多个 xml，并在父作业 xml 中使用如下导入。

```
<import resource="child-jobs.xml" /> 
```

# java - Spring中基于令牌的身份验证

> ID：15080425
> 
> 赞同：0
> 
> 时间：2013-02-26T02:42:22.587
> 
> 标签：java, spring, spring-security

我们有一个 Spring Web 应用程序，它已经使用 Spring 安全性来验证用户并授予对一组受限页面的访问权限。然而，我们还有另一组我们希望获得的资源。对于第二组，我们不需要用户身份验证，而是希望用户进入页面：/access.html 并输入访问代码（之前通过电子邮件发送给他们），然后他们将被授予访问这些资源的权限而无需登录。访问代码（令牌）仅在有限的时间段内有效，然后过期。

我可以以某种方式使用 spring security 来实现这个与我们已经存在的用户身份验证设置并行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:51:32.567

当然，有几种方法可以做到这一点。听起来您需要做的就是创建一个过滤器，该过滤器可以在会话/请求中检查您的令牌，并创建/更新 Spring Security 上下文以获得所需的角色。然后授权正常进行。

特别是，您将为[Spring Security Context添加](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/context/SecurityContext.html)[GrantedAuthories](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/GrantedAuthority.html)到您的[Authentication](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/Authentication.html)对象。这个过程有很多细节，我承认我的答案并不完整，但完整的答案会非常广泛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:29:56.510

我用 cookie 做过类似的事情。

您可以实现自己的过滤器扩展`GenericFilterBean`

然后使用 spring-security 设置配置，如下所示

```
<security:http ... >
    ....
    <sec:custom-filter position="FORM_LOGIN_FILTER" ref="cookieAuthenticationFilter" />                                         
</security:http> 
```

看看源代码`BasicAuthenticationFilter`可能会有所帮助。

# java - 基于不同版本的java启动url

> ID：15080432
> 
> 赞同：1
> 
> 时间：2013-02-26T02:42:59.073
> 
> 标签：java, url, cross-browser, launcher

我处于需要创建一个简单的启动器的情况，它允许我选择使用不同版本的 java 启动的网址。我研究了几个网站。让用户更改 Windows 设置不是一种选择，因为它会产生过多的支持电话或用户没有权限。我想要的是一种编程方式来设置或更改用于启动 url 的 java 版本。我见过专有系统制作带有 gui 的启动器，允许您更改地址和 java 版本，然后在浏览器中启动它。我是开发新手，显然无法理解使用哪些技术。

请你指出我正确的方向。我很乐意编写 guis（在 c# 或 java 中）我只需要知道如何编写启动按钮的函数？

```
function launchbutton(url, javaversion)

{

If (javaversionselect == 1.3)
{
open url in default browser running java version 1.3
}

If (javaversionselect == 1.4)
{
open url in default browser running java version 1.4
}

If (javaversionselect == 1.5)
{
open url in default browser running java version 1.5
}

If (javaversionselect == 1.6)
{
open url in default browser running java version 1.6}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:55:20.070

您可以编写一个小程序来完成它。编译这样的东西，使用`javac -target 1.3`：

```
public class Redirector
extends Applet {
    @Override
    public void start() {
        String newURL;

        Package pkg = Object.class.getPackage();
        if (pkg.isCompatibleWith("1.7")) {
            newURL = "java17.html";
        } else if (pkg.isCompatibleWith("1.6")) {
            newURL = "java16.html";
        } else if (pkg.isCompatibleWith("1.5")) {
            newURL = "java15.html";
        } else if (pkg.isCompatibleWith("1.4")) {
            newURL = "java14.html";
        } else {
            newURL = "java13.html";
        }

        try {
            getAppletContext().showDocument(new URL(newURL));
        } catch (MalformedURLException e) {
            showStatus(e.toString());
        }
    }
} 
```

如果你真的想让用户自己选择 Java 版本，你可以在你的小程序中为此创建 UI 元素：

```
public class Redirector
extends Applet
implements ActionListener {
    private Choice list;

    @Override
    public void init() {
        try {
            EventQueue.invokeAndWait(new Runnable() {
                public void run() {
                    list = new Choice();
                    list.add("1.7");
                    list.add("1.6");
                    list.add("1.5");
                    list.add("1.4");
                    list.add("1.3");

                    Button button = new Button("Launch");
                    button.addAtionListener(Redirector.this);

                    add(new Label("Java version:"));
                    add(list);
                    add(button);
                }
            });
        } catch (InvocationTargetException e) {
            throw new RuntimeException(e);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    public void actionPeformed(ActionEvent event) {
        String newURL;
        String version = list.getSelectedItem();
        if (version.equals("1.7")) {
            newURL = "java17.html";
        } else if (version.equals("1.6")) {
            newURL = "java16.html";
        } else if (version.equals("1.5")) {
            newURL = "java15.html";
        } else if (version.equals("1.4")) {
            newURL = "java14.html";
        } else {
            newURL = "java13.html";
        }

        try {
            getAppletContext().showDocument(new URL(newURL));
        } catch (MalformedURLException e) {
            showStatus(e.toString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:39:47.297

您无法更改应用程序中使用的 Java 版本，例如“IE”或“Chrome”，您唯一的解决方案是使用某种嵌入式浏览器

*   浏览器
*   来自 Mozilla 的 XPCOM
*   浏览源代码并了解 Eclipse 如何嵌入他们的浏览器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T02:47:12.477

Bare Bones Browser Launcher 将检测 java 版本并使用适当的调用。

[http://www.centerkey.com/java/browser/](http://www.centerkey.com/java/browser/)

# python - 关于在 python CGI 中获取客户端 IP 地址

> ID：15080433
> 
> 赞同：2
> 
> 时间：2013-02-26T02:43:06.223
> 
> 标签：python, proxy, client, cgi, ip-address

我正在尝试在 python cgi 脚本中获取原始客户端 IP 地址。客户端使用代理连接到 Web 服务器。以下代码始终返回代理 IP 地址。我测试了所有 env 变量，HTTP_CLIENT_IP 和 HTTP_X_FORWARDED_FOR 都返回 None。有没有其他方法可以让客户端 IP 在代理后面？像我可以在 python cgi 中读取 http 标头吗？

```
ipaddr = (getenv("HTTP_CLIENT_IP") or
getenv("HTTP_X_FORWARDED_FOR") or
getenv("REMOTE_ADDR") or
"UNKNOWN") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T20:49:27.973

你想要_____吗：

*   在标头中找到客户端的 IP 地址

*   使用某种 javascript 来告诉你？

对于前者，您需要代理为您提供客户端地址。
您是否尝试过 cgi.print_environ_usage() 并查找 IP 地址？

# ruby-on-rails - 如何在 Firefox 中显示 Font Awesome 图标？

> ID：15080434
> 
> 赞同：2
> 
> 时间：2013-02-26T02:43:15.457
> 
> 标签：ruby-on-rails, nginx, sass, font-face, amazon-cloudfront

我将 Font-Awesome-Sass-Rails gem 用于图标字体，它们在除 Firefox 之外的所有浏览器中都能正常显示。我目前正在使用 Cloudfront 和 Nginx。这是我的 CORS 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-24T10:43:15.913

如果上面的答案不能解决任何人的问题，那么这是我的有效解决方案：

```
# Cross domain webfont access
location ~* \.(?:ttf|ttc|otf|eot|woff|font.css)$ {
add_header "Access-Control-Allow-Origin" "*";
expires 1M;
access_log off;
add_header Cache-Control "public";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:45:27.637

当我遇到同样的问题时，我发现唯一对我有用的解决方案是在 nginx 本身中设置一个标头。

```
location ~* \.(eot|otf|ttf|woff)$ {
    add_header  Access-Control-Allow-Origin *;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T22:13:31.230

上面的例子不起作用，这个起作用了。在 nginx 配置中，将 if 块放在 /assets/ 规则中

```
 location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;

    if ($request_filename ~* ^.*?\.(eot)|(ttf)|(woff)|(svg)|(otf)$) {
       add_header Access-Control-Allow-Origin *;
    }
  } 
```

# android - 单击按钮后如何使 ListView 中选择的项目执行？

> ID：15080435
> 
> 赞同：0
> 
> 时间：2013-02-26T02:43:34.360
> 
> 标签：android, android-listview, android-event

我有一个`ListView`，我想先选择（突出显示）一个项目，然后在它进入另一个活动之前单击一个按钮。

这是我想做的一个例子：

[![](../Images/758a99cb822a8419f83ec76bbda6b3e4.png)](https://i.stack.imgur.com/whioO.png)

这就是我制作 ListView 的方式（我从数据库中获取它的条目）

```
 ListView lv = (ListView) findViewById(R.id.lvListOfCustomers);

    String strDBName = "db_customers.s3db";
    File fileDB = new File(
            Environment
                    .getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS),
            strDBName);
    SQLiteDatabase dbLibrary = SQLiteDatabase.openOrCreateDatabase(fileDB,
            null);

    // Start - Cursor and Queries of List of Customers(ListView)
    String sqlQuery = "select _id, customer_name as cName, customer_address as cAddress, customer_status as cStatus from tbl_customers";
    Cursor cur = (Cursor) dbLibrary.rawQuery(sqlQuery, null);

    @SuppressWarnings("deprecation")
    SimpleCursorAdapter sca = new SimpleCursorAdapter(
            this.getApplicationContext(),
            R.layout.lv_list_of_customers_txtview, cur, new String[] {
                    "cName", "cAddress", "cStatus" }, new int[] {
                    R.id.tvCustomersName, R.id.tvCustomersAddress,
                    R.id.tvCustomersId }, CursorAdapter.FLAG_AUTO_REQUERY);
    lv.setAdapter(sca);

    // End - Cursor and Queries of List of Customers(ListView)

    // Start - Make the items highlighted
    int selectedListItem = getIntent().getIntExtra("PositionInList", -1);
    lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    lv.setSelection(selectedListItem); 
    // End - Make the items highlighted 
```

这就是我为我的 Button 所做的

```
 case R.id.bCallRemarks:
        // TODO Auto-generated method stub
        Button bCRemarks = (Button) findViewById(R.id.bCallRemarks);
        bCRemarks.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                ListView.OnItemClickListener oicl = new ListView.OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> av, View view,
                            int pos, long id) {
                        // TODO Auto-generated method stub
                        Cursor c = (Cursor) av.getItemAtPosition(pos);
                        String cName = c.getString(c
                                .getColumnIndexOrThrow("cName"));
                        Intent intent = new Intent(getApplication(),
                                CallRemarks.class);
                        intent.putExtra("CustomerName", cName);

                        Toast.makeText(av.getContext(), cName,
                                Toast.LENGTH_SHORT).show();

                         Intent CallRemarksScreen = new Intent(
                         getApplicationContext(), CallRemarks.class);
                         startActivity(CallRemarksScreen);
                    }

                };

            }

        }); 
```

我问这个是因为`ListView`底部有一个和多个按钮。所以我必须在选择功能（按钮）之前选择第一项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:53:20.430

我把ListView的onItemClick放在Button的onClick外面

```
 @Override
        public void onItemClick(AdapterView<?> av, View view, int pos,
                long id) {
            // TODO Auto-generated method stub
            selectedItem = true;
            Cursor c = (Cursor) av.getItemAtPosition(pos);
            String cName = c.getString(c.getColumnIndexOrThrow("cName"));
            intent = new Intent(getApplication(), CallRemarks.class);
            intent.putExtra("CustomerId", id);

            Toast.makeText(av.getContext(), "id: " + id, Toast.LENGTH_SHORT)
                    .show();

        }
    });

and then here is my button

    case R.id.bCallRemarks:
        // TODO Auto-generated method stub
        Button bCRemarks = (Button) findViewById(R.id.bCallRemarks);
        bCRemarks.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (selectedItem == false) {
                    Toast.makeText(getApplicationContext(),
                            "No Customer Selected", Toast.LENGTH_SHORT)
                            .show();
                } else {
                    // Intent intent = new Intent(
                    // getApplicationContext(), CallRemarks.class);
                    startActivity(intent);
                }
            }

        });
        break; 
```

我初始化了一个布尔标志来检查是否选择了一个项目，以防我单击了一个按钮而没有在 ListView 中选择一个项目。

```
private boolean selectedItem = false; 
```

# ios - Flurry 横幅广告在关闭后重新打开

> ID：15080441
> 
> 赞同：0
> 
> 时间：2013-02-26T02:44:09.620
> 
> 标签：ios, flurry

我的游戏需要在特定意义上显示广告，所以我调用了Flurry的Api `displayAdForSpace`，当退出这个意义上，我需要关闭广告横幅，我打电话`removeAdFromSpace`，横幅消失。但是当我打电话时`displayAdForSpace`，广告无法显示。所以任何人都可以帮助我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T07:09:28.607

感谢您将此问题发送至 support@flurry.com。有人会很快回复您的请求。

（全面披露：我在 Flurry 的支持团队工作）

# sql - Oracle11g 查询中的 STUFF 和 For XML 路径

> ID：15080448
> 
> 赞同：1
> 
> 时间：2013-02-26T02:45:02.627
> 
> 标签：sql, oracle, oracle11g

这是一个示例数据：从该表中，使用 stringvalue 检查 ID，如果 stringvalue 包含或等于 ID，它会根据满足的条件获取代码。如果至少有 1 个满足条件，则查询将连接代码的任何值并将其放在 newcode 下。

```
 Scenario 1
    ID            CODE     VALUE               Newcode
    4           42                              44,45
    4           43                              44,45
    4           44         2,4,6                44,45
    4           45         2,4,6                44,45

Scenario 2

ID        CODE         VALUE                Newcode
4           42                     44
4           43                     44
4           44         4           44
4           45         3           44 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:32:54.780

根据您的更新，您应该能够使用子查询来获取列表数据，然后将其连接回您的表：

```
SELECT DISTINCT
  ID,
  CODE,
  ATTRSTRINGVALUE,
  SUB.Newcode
FROM Table1 A
INNER JOIN tabel2 b 
  ON a.MainID = b.mainID
LEFT JOIN
(
  SELECT SUB.MainID, 
    list_agg(cast(SUB.CODE as nvarchar2(50)), ',') as Newcode
  FROM ENPTREEATTRS SUB 
  WHERE SUB.CODE in ('42','43','44','45')
    AND SUB.STRINGVALUE LIKE '%'||cast(ID as nvarchar2(50))||'%'
  GROUP BY SUB.MainID
) SUB
  ON SUB.MainID = A.MainID 
```

在您发布的新查询之后编辑#1，您可以使用：

```
SELECT DISTINCT
  ID,
  CODE,
  ATTRSTRINGVALUE,
  SUB.Newcode
FROM ENPBATREE A
LEFT OUTER JOIN enptreeattrs B on A.MainID = B.MainID 
LEFT OUTER JOIN ENPTREEATTRS B1 on B.MainID = B1.MainID 
LEFT OUTER JOIN ENPTREEATTRS B2 on B1.MainID = B2.MainID 
LEFT OUTER JOIN ENPENTRYACCESSUSERSROLES D on B2.MainID = D.MainID 
LEFT OUTER JOIN ENPENTRYACCESSLIST F on D.USERNAME = F.USERNAME
LEFT JOIN
(
  SELECT SUB.MainID, 
    list_agg(cast(SUB.CODE as nvarchar2(50)), ',') as Newcode
  FROM ENPTREEATTRS SUB 
  WHERE SUB.CODE in ('42','43','44','45')
    AND SUB.STRINGVALUE LIKE '%'||cast(ID as nvarchar2(50))||'%'
  GROUP BY SUB.MainID
) SUB
  ON SUB.MainID = A.MainID 
```

您可能可以在没有子查询的情况下执行此操作：

```
SELECT
  A.TREEENTRYID,
  F.accessid,
  b1.ATTRID,
  b1.attrstringvalue,
  list_agg(cast(SUB.ATTRID as nvarchar2(50)), ',') as Newcode
FROM ENPBATREE A
LEFT OUTER JOIN enptreeattrs B on A.TREEENTRYID  = B.TREEENTRYID 
LEFT OUTER JOIN ENPTREEATTRS B1 on B.TREEENTRYID = B1.TREEENTRYID
LEFT OUTER JOIN ENPTREEATTRS B2 on B1.TREEENTRYID = B2.TREEENTRYID
LEFT OUTER JOIN ENPENTRYACCESSUSERSROLES D on B2.TREEENTRYID = D.TREEENTRYID
LEFT OUTER JOIN ENPENTRYACCESSLIST F on D.USERNAME = F.USERNAME
LEFT JOIN enptreeattrs SUB 
  ON SUB.MainID = A.MainID
WHERE SUB.ATTRID in ('42','43','44','45')
  AND SUB.ATTRSTRINGVALUE LIKE '%'||cast(F.ACCESSID as nvarchar2(50))||'%'
GROUP BY A.TREEENTRYID, F.ACCESSID, 
  b1.ATTRID, b1.attrstringvalue; 
```

 ~~```
SELECT 
  ID,
  CODE,
  ATTRSTRINGVALUE,
  list_agg(cast(SUB.CODE as nvarchar2(50)), ',') as Newcode
FROM ENPBATREE A
LEFT OUTER JOIN enptreeattrs B on A.MainID = B.MainID 
LEFT OUTER JOIN ENPTREEATTRS B1 on B.MainID = B1.MainID 
LEFT OUTER JOIN ENPTREEATTRS B2 on B1.MainID = B2.MainID 
LEFT OUTER JOIN ENPENTRYACCESSUSERSROLES D on B2.MainID = D.MainID 
LEFT OUTER JOIN ENPENTRYACCESSLIST F on D.USERNAME = F.USERNAME
LEFT JOIN ENPTREEATTRS SUB 
  ON SUB.MainID = A.MainID
WHERE SUB.CODE in ('42','43','44','45')
  AND SUB.STRINGVALUE LIKE '%'||cast(ID as nvarchar2(50))||'%'
GROUP BY ID, CODE, ATTRSTRINGVALUE 
```~~  ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:52:21.260

只需使用`list_agg`：

```
select sub.mainid, list_agg(cast(sub_code as nvarchar(100)), ',')
from ENPTREEATTRS SUB 
WHERE SUB.CODE in ('42','43','44','45') and
      SUB.STRINGVALUE LIKE '%'||cast(id as nvarchar(100))||'%'
group by sub.mainid 
```

顺便说一句，您不应该`convert(nvarchar, id)`在 SQL Server 中使用。您应该始终提供一个长度，例如`convert(nvarchar(100), id)`.~~

# drupal-7 - 如何在drupal 7中创建子菜单

> ID：15080452
> 
> 赞同：0
> 
> 时间：2013-02-26T02:45:17.503
> 
> 标签：drupal-7, submenu

我有一个添加主菜单链接的模块。当我单击该链接时，请求的页面会被加载（一个 .js 和 .html 文件）。

我的主菜单如下所示：

*   我的链接

我的代码如下所示：

```
<?php

/**                                                                                                                                           
 * Implements hook_menu()                                                                                                                     
 */
function kl_menu(){
  $items = array();

  $items['simple_link'] = array(
   'title'            => t('my link'),
   'page callback'    => 'build_page',
   'access arguments' => array('access content'),
   'menu_name' => 'main-menu',
   'type' => MENU_NORMAL_ITEM,
  );

/*                                                                                                                                            
 * build_page                                                                                                                   
 */
function build_page() {
  drupal_add_js(drupal_get_path('module', 'kl') . '/mypage.js', 'file');
   return  ( file_get_contents( drupal_get_path('module', 'kl').'/mypage.html') );
} 
```

现在我想添加一个子菜单而不是简单的普通链接，以便我的主菜单如下所示：

*   我的子菜单
    *   我的子链接1
    *   我的子链接2

我希望当我点击“我的子菜单”时，这个子菜单会展开并显示更多链接。然后，当我重新单击我的子菜单时，我希望它崩溃。

我对drupal php等很陌生。

我怎样才能做到这一点。我正在使用花环主题。

谢谢

爸爸

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:19:56.753

```
/**
 * Implements hook_menu().
 */
function kl_menu() {
  $items['simple_link'] = array(
    'title'            => t('my link'),
    'page callback'    => 'kl_build_page',
    'access arguments' => array('access content'),
    'menu_name' => 'main-menu',
    'type' => MENU_NORMAL_ITEM,
  );
  $items['simple_link/my_sublink_1'] = array(
    'title'            => t('my sub link 1'),
    'page callback'    => 'mymodule_sub_page_1',
    'access arguments' => array('access content'),
    'type' => MENU_NORMAL_ITEM,
  );
  $items['simple_link/my_sublink_2'] = array(
    'title'            => t('my sub link 2'),
    'page callback'    => 'mymodule_sub_page_1',
    'access arguments' => array('access content'),
    'type' => MENU_NORMAL_ITEM,
  );
  return $items;
}

/**
 * Implements hook_theme().
 */
function kl_theme() {
  $template_path = drupal_get_path('module', 'kl') . '/templates';

  return array(
    // File would be <module path>/templates/kl-build-page.tpl.php
    'kl_build_page' => array(
      'path' => $template_path,
      'template' => 'kl-build-page')
    ),
    // File would be <module path>/templates/kl-sub-page-1.tpl.php
    'sub_page_1' => array(
      'path' => $template_path,
      'template' => 'kl-sub-page-1')
    ),
    // File would be <module path>/templates/kl-sub-page-2.tpl.php
    'sub_page_2' => array(
      'path' => $template_path,
      'template' => 'kl-sub-page-2')
    ),
  );
}

/**
 * Callback for main build page.
 */
function kl_build_page() {
  drupal_add_js(drupal_get_path('module', 'kl') . '/mypage.js', 'file');
  return  theme('kl_build_page');
}

/**
 * Page callback for sub page 1
 */
function kl_sub_page_1() {
  return theme('kl_sub_page_1');
}

/**
 * Page callback for sub page 2
 */
function kl_sub_page_2() {
  return theme('kl_sub_page_2');
} 
```

# postscript - 在 Postcript 中使用可执行数组将多个值压入堆栈

> ID：15080453
> 
> 赞同：1
> 
> 时间：2013-02-26T02:45:20.493
> 
> 标签：postscript

我在 Postscript 中做一些表格，有时我需要将当前点保存到一个变量中，所以以后我可以方便地将 xy 值放在堆栈上进行移动。这不是那么简单。我正在寻找一个将 x 和 y 都存储到单个变量中的过程。

假设你在 72 720。我想要一个变量，比如 CP，能够存储两者。当然，如果你想存储

```
/cp {72 720} def 
```

并且您将创建一个过程，该过程在调用时会离开包含 72 720 的堆栈。但是，如果您想在执行期间存储任意位置怎么办？以下代码不起作用。

```
/cp {currentpoint} def
72 720 moveto
cp 
100 100 moveto
cp 
```

该代码每次只调用 currentpoint，将 72 720 100 100 留在堆栈上。

如何创建一个将当前点捕获到一个变量中的过程，该变量将两个值放在运行时确定的堆栈上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:45:20.493

以下将在运行时创建一个过程，该过程将在调用时将两个值放入堆栈：

```
72 720 moveto
/cp [ currentpoint ] cvx def
cp
100 100 moveto
cp 
```

这将在堆栈上留下 72 720 72 720。发生的情况是 cp 的定义首先用两个值填充了一个数组。它是可执行的，因此当调用 cp 时，每次调用时都会将两个存储的值压入堆栈，而不管当前点位置的变化。

当然，这样做的用处不仅仅是到达一个明确的点，而是在执行期间捕获一个点。如果代码片段是

```
72 720 moveto
(Begin with, end with) show
/cp [ currentpoint ] cvx def

% intervening code ...

cp moveto
(, whatever!) show 
```

那么这个的用处就更加明显了。

请注意，要使其正常工作，需要存在当前点。在问题部分，可以创建过程 {currentpoint}，因为执行被延迟。但是，如果在没有当前点的情况下调用 currentpoint，则会导致 postscript 错误。下面是一个简短的后记程序来探索这一点。

```
%!
/fontsize 14 def
/lineheight 16 def

/Times-Roman findfont fontsize scalefont setfont

/newline 
   {72 currentpoint exch pop lineheight sub
    dup 72 lt {showpage pop 720} if
    moveto
    } def

/cp2 { currentpoint } def

72 720 moveto
/cp1 [ currentpoint ] cvx def
cp1
cp2
(Test line) show
cp1
cp2

144 500 moveto
cp1
cp2
/cp1 [ currentpoint ] cvx def
cp1
cp2

(Test line) stringwidth

newline 
(-top of stack-) show 
newline
count {30 string cvs show newline} repeat
(-bottom of stack-) show newline

showpage 
```

我在互联网上搜索了许多参考资料以弄清楚这一点，但没有看到任何东西。我曾求助于将 x 和 y 值存储在单独的变量中，但这种方法的不雅性让我想出了这种方法。如果有人知道这是某个关键字下的主题，请告诉我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T05:44:31.253

你可以做这样的事情。如果您打算定义自己的函数，则应首先定义自己的字典，然后将其放在字典堆栈的顶部

在字典中定义一个 2 元素数组`cpa`来保存 x,y 定义`/cp`以将当前点存储到数组中。定义`/CP`从数组中恢复当前点

```
 /mydict 100 dict def
    mydict begin

    /cpa {2 array} def
    /cp {/cpa currentpoint cpa astore def}  def
    /CP { cpa aload pop moveto } def

%test out the functions
    123 456 moveto %move to a point
    cp             %save that point

    986 654 moveto %move to a different point
    CP             %restore the saved point
    (Currentpoint ) == currentpoint exch == ==  %print out the current 
```

您可能还想阅读 gsave/grestore 和 save/restore。这些也许是你真正追求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T07:16:18.183

虽然我喜欢（并赞成）这里的其他两个答案，但我对相同的想法略有不同，这说明了一些有趣的小角落，IMO。

您可以定义相同的数组两次，使一个引用文字和另一个可执行。重用相同的数组而不是丢弃和分配新数组稍微优雅一些​​。

```
/cpa 2 array def           % literal array for storing
/cpx cpa cvx def           % executable version of same array for spilling on the stack

currentpoint cpa astore pop  % save currentpoint

cpx moveto                 % return to currentpoint 
```

现在，如果您使用缩放、旋转、平移中的任何一种更改了当前的变换矩阵 (CTM)，这将不起作用。对于更通用的解决方案，您需要`transform`设备坐标（相对于用户空间是*稳定*的），然后`itransform`使用。这导致以下情况。

```
/cpa 2 array def           % literal array for storing
/cpx cpa cvx def           % executable version of same array
/cps { currentpoint transform cpa astore pop } def   % save currentpoint
/cpr { cpx itransform moveto } def                   % return to currentpoint 
```

即使 CTM 已更改，这也会将您返回到相同的设备位置。

# java - 如何找出文件是否在文件类型的变量中？

> ID：15080456
> 
> 赞同：0
> 
> 时间：2013-02-26T02:45:27.670
> 
> 标签：java

如何找出文件是否在变量中，我有一个文件类型的变量，如何确定上传的文件是否在其中。我使用了以下但遇到了 java.lang.NullPointerException。

```
import java.io.File;

public void checkFile(File file){
1>> if (file.isFile)
2>> if (file != null)
....
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:47:59.837

如下使用，

```
if (file != null && file.isFile()) {

} 
```

# tortoisesvn - 如何在 TortoiseSVN 的两个版本之间创建补丁文件？

> ID：15080457
> 
> 赞同：2
> 
> 时间：2013-02-26T02:45:29.510
> 
> 标签：tortoisesvn, patch, revision, unified-diff

我正在使用 TortoiseSVN 1.7 并希望在两个版本之间创建补丁文件。

我已经搜索过了，但是这些线程[如何使用 TortoiseSVN 从修订之间的差异创建补丁？](https://stackoverflow.com/questions/4009434/how-do-i-create-a-patch-from-diff-between-revisions-using-tortoisesvn) [在两个修订之间创建补丁](http://svn.haxx.se/tsvnusers/archive-2010-01/0425.shtml)对我来说不起作用，因为会`Show changes as unified diff`生成非常简单的文件（不是补丁文件）。就像是

> 索引：myfile.txt
> 
> ==================================================== ==================

我在[查看差异](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-dug-diff.html)中读到

> 如果您想在一个视图中查看对特定修订中的所有文件所做的更改，您可以使用 Unified-Diff 输出（GNU 补丁格式）。这仅显示**了几行**上下文的差异。它比视觉文件比较更难阅读，但会一起显示所有更改。从 Revision Log 对话框中选择感兴趣的版本，然后从上下文菜单中选择 Show Differences as Unified-Diff。

我想创建一个包含有用差异信息的单个补丁文件（或根据修改后的文件的多个补丁文件）（如菜单上下文 TortoiseSVN -> 创建补丁...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-26T19:12:23.343

如果您使用“将更改显示为统一差异”命令，那么 TortoiseSVN 会在单个文件中显示所选修订的所有更改。

现在只需使用“文件/另存为”命令将更改保存到“.patch”或“.diff”文件，您就有了补丁文件。

# javascript - 如何将匿名函数作为参数从javascript传递到webkit上的c++？

> ID：15080460
> 
> 赞同：3
> 
> 时间：2013-02-26T02:45:40.040
> 
> 标签：javascript, c++, webkit

如何在 webkit 平台上将匿名函数作为参数从 javascript 传递到 C++

例子：

```
window.test('helloworld', function(){
    alert('ye');
}); 
```

“测试”是C++注入web for javascript，javascript传递两个参数给C++

当 C++ 异步执行时，我希望 C++ 调用第二个参数，它是匿名函数？

还是 C++ 只接收参数类型是字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:48:51.473

1.  将自定义方法添加到 DOMWindow 接口（WebKit/Source/WebCore/page/DOMWindow.idl）：

    ```
    ...
    interface DOMWindow{
      ...
      [Custom] void test();
      ...
    };
    ... 
    ```

2.  在 WebKit/Source/WebCore/bindings/v8/custom/V8DOMWindowCustom.cpp 中，在命名空间 WebCore 中添加一个方法：

    ```
    ...
    v8::Handle<v8::Value> V8DOMWindow::testCallback(const v8::Arguments& args){
      v8::Local<v8::String> str;
      v8::Local<v8::Function> jsFn;
      if(!args[0]->IsString() || !args[1]->IsFunction())
            return v8::Undefined();
      str = args[0]->ToString();
      jsFn = v8::Local<v8::Function>::Cast(args[1]);

      v8::Persistent<v8::Function> pFn = v8::Persistent<v8::Function>::New(jsFn);
      pFn->Call(v8::Context::GetCurrent()->Global(), 0, NULL); // Execute the passed in js function
      return v8::Undefined();
     } 
    ```

# javascript - 动态按钮单击在 Jquery 中不起作用

> ID：15080466
> 
> 赞同：0
> 
> 时间：2013-02-26T02:46:20.913
> 
> 标签：javascript, jquery, html

我想在 HTML5 演示文稿中开发动态演示文稿内容

> [http://www.script-tutorials.com/creating-an-attractive-presentation-with-html5/](http://www.script-tutorials.com/creating-an-attractive-presentation-with-html5/)

本教程适用于静态内容。但我想用 jquery 编写动态内容，如下所示：

```
$(document).ready(function(){

            $.getJSON(url, function (data) {

                   for(var i in data)
                       {                             
                        output=" <button title='Next' id='nav-next' class='nav-next'>Click</button>";                      
                       }

                    $("#placeholder").append(output);
                });
 }); 
```

单击按钮时，我想转到下一张幻灯片。但是这个事件不起作用。我想在 javascript 文件上调用下一个函数。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:43:19.667

您说“单击按钮时”，这就是答案使用`jQuery.on()`方法。

```
$('#nav-next').on('click',(function () {
     // click code.
}); 
```

然后当您`DOM`使用定义的 id创建时，`.on`将动态附加点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:59:11.367

您没有将事件附加到新按钮，这可以使用 jQuery`click`方法完成。

还有一些其他问题：

*   循环似乎是多余的，你实际上并没有在`data`.
*   `output`在您的示例中被定义为全局变量，用于`var`将其保持在函数范围内。

代码：

```
$(document).ready(function() {
    $.getJSON(url, function (data) {

        // use var, your output was a global variable
        var output = " <button title='Next' id='nav-next' class='nav-next'>Click</button>";                      

        $("#placeholder").append(output);

        // attach the click event to the new button
        $('#nav-next').click(function () {
            // TODO: Implement click method
        });
    });
}); 
```

由于您没有使用数据，因此您`getJSON`当前可以安全地删除对的调用。我想你把它放进去是出于某种原因。

# c++ - 迭代器的意义何在？

> ID：15080475
> 
> 赞同：3
> 
> 时间：2013-02-26T02:47:14.490
> 
> 标签：c++, c++11, iterator

为什么要使用迭代器？

例如，如果我有这样的代码：

```
for (int i = 0; i < vec.size(); i++)
   cout << vec[i]; 
```

写作有什么好处

```
for (vector<int>::iterator it != vec.begin(); it != n.end(); ++it)
   cout << *it; 
```

另外，为什么在第一个示例中写作`i < vec.size()`and更常见，而在第二个示例中更常见？增加它的方式有什么区别，为什么不总是使用等号？`i++``it != begin()``++it`

我知道迭代器在 C++11 基于范围的 for 循环和一些 STD 算法中很有用，但是为什么我应该在普通代码中这样做，因为它更冗长？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:50:54.043

并不是所有的容器都具有随机访问权限，因此您可以在索引上进行查找，因此标准化接口迭代器非常有用。考虑`std::list`。它不支持通过`[]`运营商进行随机访问。

考虑到这一点，为了跨多种异构类型的容器工作，许多 STL 函数（如 std::copy ）采用迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:51:34.710

关键是迭代器允许您以通用方式*迭代*任何支持迭代器的东西。

至于它更冗长，额外的冗长并不可怕（使用`auto`或使用基于 C++11 范围的 for 循环可以稍微改进您的示例）但这确实是一个文体问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T02:53:59.773

假设我们有这个代码：

```
typedef std::vector<std::string> strings;

strings strs;
for( strings::const_iterator it = strs.begin(); it != strs.end(); ++it ) {
} 
```

后来出于水的原因，我们决定切换到 std::list。所以我们只需替换 typedef 和代码：

```
typedef std::list<std::string> strings;

strings strs;
for( strings::const_iterator it = strs.begin(); it != strs.end(); ++it ) {
} 
```

将像以前一样工作。但是带有索引变量的代码会失败。想象一下，如果您需要编写模板代码会怎样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:55:55.470

tl;dr 是迭代器在不同类型的对象的一般情况下工作得更好（例如，当 size() 方法可能很慢时）。

如果您想了解更多信息：

[为什么使用迭代器而不是数组索引？](https://stackoverflow.com/questions/131241/why-use-iterators-instead-of-array-indices)

[迭代器..为什么要使用它们？](https://stackoverflow.com/questions/178934/iterators-why-use-them)

# r - 自述文件链接到不存在 (CRAN) 的软件包二进制文件的操作系统

> ID：15080477
> 
> 赞同：2
> 
> 时间：2013-02-26T02:47:39.917
> 
> 标签：r, package

我有一个包，它不会在 Mac 上作为二进制文件构建，但如果使用源代码完成，仍然可以构建。这个包的目标受众可能不熟悉命令行，我想让他们尽可能简单。我有一个网页解释如何从源代码构建，但希望它在 CRAN 上更加突出，就像没有 Windows 二进制文件的[RCurl 包一样。](http://cran.r-project.org/web/packages/RCurl/index.html)

我怎样才能做这个到自述文件的链接，或者这可以为 RCurl 做，因为它是维护它的 R 核心成员之一？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T06:29:49.350

将一个名为的文件放在`INSTALL`与该文件相同的目录中，`DESCRIPTION`它将自动链接到 CRAN。例如，请参阅sqldf 包的[CRAN 页面](http://cran.r-project.org/web/packages/sqldf/index.html)`Materials:`——它的链接就行了。

编辑：

网页格式已更改，INSTALL 文件现在列`Materials:`在行上（`Installation:`之前是行）。

# powershell - 格式表输出空白？

> ID：15080484
> 
> 赞同：0
> 
> 时间：2013-02-26T02:48:23.447
> 
> 标签：powershell

我正在尝试做的是查看一些进程并获取这些进程的用户列表。下面的代码对我来说很好。

```
get-wmiobject win32_process |
where{$_.name -like "*notepad*"}|sort {$_.CommandLine}|
select @{n="User";e={$_.getowner().user}},@{n="ProcessID";e={$_.ProcessID}},{$_.CommandLine} |ft -AutoSize |Out-String -Width 300 >> C:\ListUsers.txt 
```

不知何故，我想在中间拆分 $_.CommandLine 字符串，并输出一些拆分数组（请参阅以下代码以获得更好的想法，尽管代码是错误的）。但是更新后的代码不会在文本文件中输出任何内容。我想我一定是错误地使用了 select-object 或 fommat-object，但我不知道如何修复它。

```
get-wmiobject win32_process |
where{$_.name -like "*notepad*"}|sort {$_.CommandLine}|
%{
$split = $_.CommandLine.split("\")    
select @{n="User";e={$_.getowner().user}},@{n="ProcessID";e={$_.ProcessID}},@{n="Ihub";e=$split[3]},@{n="version";e=$split[3]},@{n="version";e=$split[3]} |
ft -AutoSize |Out-String -Width 300 >> C:\ListUsers.txt
} 
```

任何人都可以建议吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:50:47.493

你不需要使用`select`then `format-table`。`Format-table`也可以创建计算属性。此外，您忘记将 包装`$split[3]`在脚本块中。我删除了两个“版本”属性，因为它们与“Ihub”相同。

试试这个（未经测试）：

```
get-wmiobject win32_process |
where{$_.name -like "*notepad*"}|sort {$_.CommandLine} | 
Format-Table -Property @{n="User";e={$_.getowner().user}},@{n="ProcessID";e={$_.ProcessID}},@{n="Ihub";e={($_.CommandLine.split("\"))[3]}} -AutoSize | 
Out-String -Width 300 >> ListUsers.txt 
```

# javascript - 从循环中的输入字段获取值 onblur

> ID：15080488
> 
> 赞同：0
> 
> 时间：2013-02-26T02:48:43.190
> 
> 标签：javascript, loops, onblur

下面是我如何使用 onblur 发出警报，显示“动态”ID。我有一个带有输入字段的 while 循环，因此 id 是从数据库中的唯一 id 中提取的。

我也将如何获得价值？通常我会像往常一样设置一个变量，但它在一个循环中，所以我不明白如何。

```
<script type="text/javascript">
    function doUpdateEntries(clicked_id) {
        alert(clicked_id);
        // how do I get the value AND id?
    }
</script>

while ($row = mysql_fetch_assoc($result)) {
    <input onblur="doUpdateEntries(this.id);" id=".$row['entry_id']." name=".$row['entry_id']." type="text" value=".$row['reviews'].">
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:59:53.097

`doUpdateEntries`您可以简单地将值作为另一个参数传递给函数。

```
<script type="text/javascript">
    function doUpdateEntries(id, value) {
        alert(id);
        alert(value);
    }
</script>

while ($row = mysql_fetch_assoc($result)) {
    <input onblur="doUpdateEntries(this.id, this.value);" id=".$row['entry_id']." name=".$row['entry_id']." type="text" value=".$row['reviews'].">
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:00:04.757

正如 Ankit 提到的......只是通过`this`，à la

```
<input onblur="doUpdateEntries(this);" id=".$row['entry_id']." name=".$row['entry_id']." type="text" value=".$row['reviews']."> 
```

下面是我如何使用`onblur`. 我有一个`while`带有输入字段的循环，因此`id`从数据库中的唯一 ID 中提取。

我也将如何获得价值？通常我会像往常一样设置一个变量，但它在一个循环中，所以我不明白如何。

```
function doUpdateEntries(_this) {
    var _id = _this.id;
    var _name = _this.value;
} 
```

# wcf - 使用 makecert.exe 创建的证书在哪里？

> ID：15080491
> 
> 赞同：4
> 
> 时间：2013-02-26T02:49:01.537
> 
> 标签：wcf, netsh, makecert

我需要有一个启用“http* *s* *”的自托管 WCF 服务。鉴于需要一个证书才能启用服务“s”，我使用以下两个命令以相同的顺序创建了证书：

```
makecert.exe -sv SignRoot.pvk -cy authority -r signroot.cer -a sha1 -n "CN=AuthorityName" -ss my -sr localmachine 
```

进而

```
makecert.exe -iv SignRoot.pvk -ic signroot.cer -cy end -pe -n CN="localhost" -eku 1.3.6.1.5.5.7.3.1 -ss my -sr localmachine -sky exchange -sp "Microsoft RSA SChannel Cryptographic Provider" -sy 12 
```

现在要使用 SSL 配置端口，必须使用 netsh，它需要提供参数 certhash 和 appid。我最好的理解是我需要有证书才能获得这些值。但是我刚刚创建的证书在哪里！！！？？？

我确实尝试了 certmgr.msc，它显示根为“证书 - 当前用户”。如何使其显示由 -sr 选项标记的“本地机器”证书？

再说一次，我的证书在哪里！！？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:46:26.607

证书位于您在命令行中指定的 .CER 文件中。

要使用它们，您需要使用 MMC/Certificate 管理单元将它们导入证书存储区。

# java - 在主程序中调用方法

> ID：15080492
> 
> 赞同：1
> 
> 时间：2013-02-26T02:49:09.620
> 
> 标签：java, methods

我正在尝试访问我的程序不允许我访问的一些信息。在我的方法“addTrack”中，它无法识别 myTracklist 对象。如何使用主类中的方法调用 myTracklist.count？

```
public class CD {
    String art;
    String tit;
    public CD(String artist, String title){
        art = artist;
        tit = title;
        tracklist myTracklist = new tracklist(100);
    }

    public static void main(String[] args) {
        String mainArtist;
        String mainTitle;
        CD myCD = new CD("Awesomeguy", "AwesomeCDName");
        mainArtist = myCD.getArtist();
        System.out.println(mainArtist);
        mainTitle = myCD.getTitle();
        System.out.println(mainTitle);
        myCD.display();
    }

    public String getArtist(){
        String person;
        person = art;
        return person;
    }

    public String getTitle(){
        String name;
        name = tit;
        return name;
    }

    public boolean addTrack(String trackinfo){
        boolean result = false;
        if (myTracklist.count < 100){
            myTracklist.add(trackinfo);
            result = true;
        }
        return result;
    }

    public int numTracks(){
        int amount;
        amount = myTracklist.count();
        return amount;
    }

    public void display(){
        System.out.println("Artist = "+ art);
        System.out.println("Title = "+ tit);
        tracklist.display();
    }
} 
```

这是我的曲目列表课

```
public class tracklist {
    int length;
    int numUsed;
    String[] storage;

    public tracklist(int size){
    length = size;
    numUsed = 0;
    storage = new String[length];
    }

    public int count(){
        return numUsed;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T02:50:16.180

您遇到了范围问题，因为您在 CD 构造函数中声明了 tracklist，因此它只存在于构造函数内部，而没有其他地方存在。您必须使其成为在类中声明的字段，才能在类的所有方法中使用。

所以而不是

```
public class CD {
    String art;
    String tit;
    public CD(String artist, String title){
        art = artist;
        tit = title;
        tracklist myTracklist = new tracklist(100);
    } 
```

做

```
public class CD {
    private String art;
    private String tit;
    private tracklist myTracklist; // declared

    public CD(String artist, String title){
        art = artist;
        tit = title;
        myTracklist = new tracklist(100); // initialized
    }

    // getter and setter methods of course. 
```

这是一个微妙但重要的区别。

顺便说一句：您需要学习 Java 命名约定，以便其他人可以更容易地理解您的代码和您的问题。类名以大写字母开头。

顺便说一句：不要让外部类直接操作类字段。使用私有字段和公共 getter 和 setter，让类可以更好地控制可以看到的内容和可以执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:51:34.143

保留**构造函数**`myTrackList`外部的声明。像这样：-

 **```
String tit;
tracklist myTracklist;

public CD(String artist, String title){
    art = artist;
    tit = title;
    myTracklist = new tracklist(100);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T02:51:51.380

它应该在`myTracklist.count()`这里：

```
if (myTracklist.count < 100){ 
```

还：

```
String tit; // oh I love this object name!
tracklist myTracklist;
public CD(String artist, String title){
    art = artist;
    tit = title;
    myTracklist = new tracklist(100);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T02:52:55.673

由于您已在客户中声明它，因此“myTracklist”变量将仅在您的构造函数中可见。因此“addTrack”无法识别 myTracklist 对象。

在全球范围内声明，

```
public class CD {
    String art;
    String tit;
    tracklist myTracklist; 
```

并在构造函数中初始化如下。

```
myTracklist = new tracklist(100); 
```**

# ruby-on-rails - 如何在不使用 Devise 登录的情况下检查用户密码是否正确？

> ID：15080493
> 
> 赞同：6
> 
> 时间：2013-02-26T02:49:13.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2, ruby-on-rails-4

我正在编写一个时钟系统，用户通过输入他们的`username`和`password`在特定的计算机中有效地打他们的时钟。时钟用户将首先登录。`username`我只需要通过检查他们输入的`password`内容是否正确来注册用户出现。我怎样才能做到这一点`Devise`？

***我不想真正让他们登录***，只检查他们是否是他们所说的人。timeclock 用户是唯一始终登录的用户。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T03:08:11.377

如果您使用宝石设计。尝试

```
User.find(1).valid_password?('password123')  # returns true/false 
```

文件中的代码：devise/lib/devise/models/database_authenticable.rb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-04T22:42:14.617

## 使用设计方法

Devise 为您提供了两种[内置方法](https://github.com/plataformatec/devise/wiki/How-To:-Find-a-user-when-you-have-their-credentials)，可让您完全做到这一点：

```
user = User.find_for_authentication(username: params[:username])
user.valid_password?(params[:password]) 
```

# javascript - 计算器的一个输入有 3 个返回

> ID：15080495
> 
> 赞同：0
> 
> 时间：2013-02-26T02:49:31.030
> 
> 标签：javascript

我对编程很陌生，所以请原谅我可能愚蠢的问题。我已经构建了三个函数，它们根据相同的输入“金额”计算税率。我试图找出一种方法，让用户输入一次金额并从所有三个函数中获得回报。他们在下面。

```
//Function 1
var normalrtfCalculator = function (amount) {
  if (amount <= 150000) {
    return Math.ceil(amount / 500) * 2;
  } else if (amount <= 350000) {
    if ((amount - 150000) <= 50000) {
      return 600 + (Math.ceil((amount - 150000) / 500) * 3.35);
    } else {
      return 935 + (Math.ceil((amount - 200000) / 500) * 3.9);
    }
  } else {
    if ((amount - 200000) <= 350000) {
      return 2735 + (Math.ceil((amount - 200000) / 500) * 4.8);
    } else if ((amount - 550000) <= 300000) {
      return 4655 + (Math.ceil((amount - 555000) / 500) * 5.3);
    } else if ((amount - 850000) <= 150000) {
      return 7835 + (Math.ceil((amount - 850000) / 500) * 5.8);
    } else {
      return 9575 + (Math.ceil((amount - 1000000) / 500) * 6.05);
    }
  }
};
//Function 2
var mansionTax = function (amount) {
  if (amount > 1000000) {
    return amount * 0.01;
  }
};
//Function 3
var lowincomertfCalculator = function (amount) {
  if (amount <= 350000) {
    if (amount <= 150000) {
      return (Math.ceil(amount / 500)) * 0.5;
    } else {
      return 150 + (Math.ceil((amount - 150000) / 500)) * 1.25;
    }
  } else {
    if ((amount - 150000) <= 400000) {
      return 420 + (Math.ceil((amount - 150000) / 500) * 2.15);
    } else if ((amount - 550000) <= 300000) {
      return 2140 + (Math.ceil((amount - 550000) / 500) * 2.65);
    } else if ((amount - 850000) <= 150000) {
      return 3730 + (Math.ceil((amount - 850000) / 500) * 3.15);
    } else {
      return 4675 + (Math.ceil((amount - 1000000) / 500) * 3.4);
    }
  }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T02:52:32.210

只需有一个运行其他函数并返回结果对象的函数：

```
var calculateTax = function(amount){
  return {
    rtf : normalrtfCalculator(amount),
    mansion: mansionTax(amnount),
    lowincome: lowincomertfCalculator(amount)
  }
} 
```

那么你可以这样称呼它：

```
var tax = calculateTax(99999); 
```

要获得单独的结果，您只需访问属性：

`alert(tax.rtf)`,`alert(tax.mansion)`和`alert(tax.lowincome)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:55:12.313

所需的最小更改可能只是`()` 在分配给变量之前添加。

就像是 ：

```
 var amount = 100;

 //Function 2
 var mansionTax = (function () {
     if (amount > 1000000) {
         return amount * 0.01;
     }
 })(); 
```

这是一个工作[示例](http://jsfiddle.net/a3UKp/1/)。

这将消除定义任何附加功能的需要。

# jquery - 管使用超过 1 个视频

> ID：15080496
> 
> 赞同：3
> 
> 时间：2013-02-26T02:49:53.660
> 
> 标签：jquery, video-streaming, tubular

我正在使用[Tubular](http://www.seanmccambridge.com/tubular/)一个在后台显示 Youtube 视频的 JS 插件。目前，该功能仅允许一个视频，因此您无法循环播放一系列视频。这就是我想要实现的。

该功能是这样工作的

```
$('#wrapper').tubular({videoId: '0Bmhjf0rKe8'}); 
```

我想扩展它以包含多个视频 ID，这些 ID 将一个接一个地播放，就像这样。

```
$('#wrapper').tubular({videoId: '0Bmhjf0rKe8', 'uPZ8LZQMPys', 'zY49-LHyBk0'}); 
```

任何想法将不胜感激:)

# struts2 - 访问 Struts2 操作 - 不正确的命名空间

> ID：15080497
> 
> 赞同：1
> 
> 时间：2013-02-26T02:50:10.700
> 
> 标签：struts2

在 struts.xml 中：

```
<package namespace="/" extends="struts-default" ...>
    <action name="home" ... >

    </action>
</package> 
```

访问该操作将是`/home`. 还可以在什么中访问该操作`/user/home`？如何限制它？

谢谢

# python - 如何从 python 程序发送信号？

> ID：15080500
> 
> 赞同：29
> 
> 时间：2013-02-26T02:50:41.157
> 
> 标签：python, linux, signals

我有这个监听 USR1 信号的代码

```
import signal
import os
import time

def receive_signal(signum, stack):
    print 'Received:', signum

signal.signal(signal.SIGUSR1, receive_signal)
signal.signal(signal.SIGUSR2, receive_signal)

print 'My PID is:', os.getpid()

while True:
    print 'Waiting...'
    time.sleep(3) 
```

这在我发送信号时有效`kill -USR1 pid`

但是如何从上述 python 脚本中发送相同的信号，以便在 10 秒后自动发送`USR1`并接收它，而无需打开两个终端来检查它？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-01-07T13:00:18.543

您可以使用[os.kill()](https://docs.python.org/library/os.html#os.kill)：

```
os.kill(os.getpid(), signal.SIGUSR1) 
```

将其放在您要从中发送信号的代码中的任何位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T02:56:30.830

如果您愿意 catch`SIGALRM`而不是`SIGUSR1`，请尝试：

```
signal.alarm(10) 
```

否则，您将需要启动另一个线程：

```
import time, os, signal, threading
pid = os.getpid()
thread = threading.Thread(
  target=lambda: (
    time.sleep(10),
    os.kill(pid, signal.SIGUSR1)))
thread.start() 
```

因此，这个程序：

```
import signal
import os
import time

def receive_signal(signum, stack):
    print 'Received:', signum

signal.signal(signal.SIGUSR1, receive_signal)
signal.signal(signal.SIGUSR2, receive_signal)
signal.signal(signal.SIGALRM, receive_signal)  # <-- THIS LINE ADDED

print 'My PID is:', os.getpid()

signal.alarm(10)                               # <-- THIS LINE ADDED

while True:
    print 'Waiting...'
    time.sleep(3) 
```

产生这个输出：

```
$ python /tmp/x.py 
My PID is: 3029
Waiting...
Waiting...
Waiting...
Waiting...
Received: 14
Waiting...
Waiting... 
```

# java - Java：PriorityQueue 的 contains() 方法无法按预期工作

> ID：15080503
> 
> 赞同：1
> 
> 时间：2013-02-26T02:50:55.457
> 
> 标签：java, equals, contains, priority-queue

我正在为计算机类编写一个使用 A* 的程序，但似乎无法让 contains 方法按我的需要运行。我正在使用一对优先级队列来保存我定义的 Node 类的对象。我在 Node 类中编写了一个 equals 方法，它在单独的基础上工作得很好，而且，据我所知，当我自己调用它时，它也会覆盖 Object 类的基本 equals 方法。

但是，调用 contains 方法不会检测到“相同”的节点。我的印象是包含使用等于来确定队列是否确实包含有问题的对象。我已经搞砸了，并且对原因感到很困惑，这让我相信我对包含工作方式的理解是有缺陷的，但是，据我所知，Java 文档看起来应该工作。

任何正确方向的建议或指示将不胜感激，谢谢。

# facebook-graph-api - 为什么我的访问令牌不返回我的事件而 Graph API 资源管理器访问令牌却返回？

> ID：15080504
> 
> 赞同：1
> 
> 时间：2013-02-26T02:50:56.877
> 
> 标签：facebook-graph-api, facebook-fql

使用如下图 api explorer 访问令牌和范围`read_stream`，`user_events`它确实返回了我创建的事件。

```
应用 ID：145634995501895：图形 API 浏览器  
用户名：xxxx：xxxx  
发行：未知  
过期：1361847600（约一个小时）  
有效：真  
产地：未知  
范围：read_stream user_events  

```

但是当我使用我的应用程序并通过网络浏览器对其进行身份验证时，它不会返回任何事件。

```
应用编号：xxx：xxxx  
用户编号：xxx：xxxx  
发布：1361843644（大约一分钟前）  
过期：1367027644（约2个月）  
有效：真  
来源：网络  
范围：manage_pages read_friendlists read_stream user_events user_questions

```

这是我的fql：

```
fql?q={'posts':'SELECT post_id,target_id,actor_id,tagged_ids,with_tags, message,description,attachment, likes, comments,type, updated_time, created_time, action_links, attribution FROM stream WHERE source_id=me() order by updated_time desc LIMIT 25', 
       'options':'SELECT  id, question_id, votes,name FROM question_option where question_id in (SELECT attachment.fb_object_id FROM #posts)', 
       'voters':'SELECT option_id, voter_id FROM question_option_votes WHERE option_id IN (SELECT id FROM #options)', 
       'question':'SELECT id, owner, question FROM question WHERE id in (SELECT attachment.fb_object_id FROM #posts)',
       'profile':'SELECT id, pic_square, type, name, username, url FROM profile WHERE id IN (SELECT target_id,actor_id,tagged_ids,with_tags,comments.comment_list.fromid FROM #posts)  OR id in (SELECT voter_id FROM #voters)'
      } 
```

# java - CamelCasing时连字符拆分词是一个词还是多个词？

> ID：15080505
> 
> 赞同：0
> 
> 时间：2013-02-26T02:51:08.323
> 
> 标签：java, naming-conventions, camelcasing, hyphen

例如，`BuiltinStuff`或者`BuiltInStuff`，哪一个是 Java 中正确的类命名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:53:12.023

我的投票是`BuildInStuff`。

“建造”不是一个词。

# json - AngularJS 资源返回空 json

> ID：15080508
> 
> 赞同：0
> 
> 时间：2013-02-26T02:51:28.977
> 
> 标签：json, resources, angularjs

部分代码：

从服务部分：

```
$resource('/Serializer/community/V1/latestPost/:start/:end,{
},{
    query: {method:'GET', 
            params:{start:new Date().getTime(), end:1}, 
            isArray:true}
}) 
```

从控制器部分：

```
Post['latestPost_timestamp'].query({start: minTime,end:1},function (data) { 
    alert(JSON.stringify(data));
}); 
```

结果：

从控制台或浏览器上打开的链接：[3993,3983,3974,3964,3954,3944,3934,3926,3920,3910]

从控制器：[{},{},{},{},{},{},{},{},{},{}]

为什么它在控制器中返回空 {}？我希望它返回 [3993,3983,3974,3964,3954,3944,3934,3926,3920,3910] 但不是 [{},{},{},{},{},{}, {}、{}、{}、{}]。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:28:09.970

那是因为 $resource 应该是一个对象而不是原语，就像您的情况中的数字一样。如果资源可能是原始资源，那么您将无法同时执行此操作：

```
var posts = Post.query({start: minTime,end:1}, function() {
    for (var i = 0; i < posts.length; i++) {
        var post = posts[i];
        // If post here should be equal to for example 3993 in
        // your JSON, you wouldn't be able to call any methods
        // on it. The following two statements sort if illustrates it:
        assert(post === 3993);
        post.$save();
    }
}); 
```

因此，资源是一个对象，因此您可能应该更改服务器代码以返回类似的`[{id: 3993}, {id: 3983}, ...]`内容，以便您可以通过`post.id`.

# php - 从 jQuery 到 JSON 到 PHP

> ID：15080511
> 
> 赞同：0
> 
> 时间：2013-02-26T02:51:43.257
> 
> 标签：php, jquery, ajax, json, post

即使我正在回复，我的问题仍然被放弃，所以我将重新提出我的问题，希望有人能看到我的错误并帮助我。我会尽量做到彻底。

第 1 步：我有一个名为 DivisionsLarge 的数组，格式如下：

```
divisionsLarge = [{ "car":"Toyota", "color":"blue", "numberTires":"four" }, { "car":"Honda", "color":"red", "numberTires":"four"}, etc. etc. ... ] 
```

（这个数据是虚构的，但它是某个地方错误的过程（也忽略`numberTires`存储为字符串而不是 int 的事实，这是虚构的人：P）

无论如何，我有 92 个上述条目，它们都具有相同的键：car、color 和 numberTires。

现在，我使用以下~~函数~~循环遍历数组，以便仅使用 car & numberTires 键构建数组：

```
var divisions = [];
for (var i = 0; i < divisionsLarge.length; i++) {
    if(divisionsLarge[i].numberTires != "two"){
          var obj = { "car": divisionsLarge[i].car,
                      "numberTires": divisionsLarge[i].numberTires};
          divisions.push(obj);}
    } 
```

好的，在这一点上，我认为一切都很好。如果我在 FireBug 中使用控制台并输入，`divisions[0]`我会得到一个漂亮的对象，其中包括，例如，

```
Object { car = "Toyota", numberTires = "four"} 
```

（我认为`""`周围还有 car & numberTires 条目，这就是 FireBug 显示对象的方式，我可能错了）

现在这是我需要帮助的地方。我创建的 .ajax 查询数不胜数。我用过 JSON.stringified，我没有用过 JSON.stringified，我用过 json_decode()，我刚刚完成了 print_r($_POST)...我做了很多我完全无法做到的事情分析什么是影响什么，以诊断问题可能是什么。看来我的 .ajax POSTS 可能是错误的，似乎我的 PHP 可能是错误的。因此，我非常感谢您回答以下问题：

1)`divisions`由 javascript 创建的数组是否被视为 JSON，或者以易于转换为 JSON 的格式？

2) 我的 AJAX 调用需要是什么？我尝试了很多 AJAX 调用，以至于我不知道什么被认为是对/错。另外，请使用`divisions`而不是我上面提供的数组片段，因为`divisions`数组是由`divisionsLarge`.

3) 我的`divisions.php`PHP 文件需要是什么样的？现在它周围有一个 HTML 骨架，带有`<script></script>`引用的标签，`divisionsLarge.js`并且`divisions.js`[这些需要在一个`.js`文件中吗？] 我已经看到了空白页，而且`Array()`很长时间以来我什至怀疑 PHP 文件的其余部分。

4）我如何获得例如第一个索引的颜色值？这似乎很简陋，但我看到的大多数示例只是查询一个仅包含一个对象的数组，例如`echo $_POST["color"]`，但我有多个条目`color`，所以我不确定如何只询问第一个。我想知道这主要是因为我在测试阵列是否正常工作方面取得了如此糟糕的成功——我对`print_r($_POST)`和失去了所有信心`var_dump($json)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:09:42.267

好的，首先你的问题。然后代码：

1.- Divisions 不被视为 JSON，它只是一个对象数组。`JSON.stringify()`所有 javascript 对象都可以使用;轻松转换为 JSON 。看看下面的代码。

2.-看下面的代码。

3.- 我不确定你的 PHP 需要什么样的处理。下面的代码假设您将其发布到另一个页面，您将在其中进行一些处理并输出一些可以在`complete`函数中使用的内容。

4.-看下面的代码。

我认为这是你想要做的：

Javascript

```
divisionsLarge = [{ "car":"Toyota", "color":"blue", "numberTires":"four" }, { "car":"Honda", "color":"red", "numberTires":"four"}];

var divisions = [];

for (var i = 0; i < divisionsLarge.length; i++) {
    if(divisionsLarge[i].numberTires != "two"){
          var obj = { "car": divisionsLarge[i].car,
                      "numberTires": divisionsLarge[i].numberTires};
          divisions.push(obj);}
    }

//I am just going to send one of your array elements as a JSON object.
var postData = JSON.stringify(divisions[0]);
var url = "url where you want to post your data";

$.ajax(url, {
    type: "POST",
    data: { "jsonBeingSent" : postData },
    success: function(data) {
      //Do whatever you need to do with your PHP output here. 
      //If you are using something like my php sample then you will be receiving a JSON object(s)

    }
}); 
```

现在，在你的 PHP 上，你可能想要这样的东西：

```
<?php

   //You may want to do some checking about the sender, and so on.
   $receivedData = json_decode($_POST['jsonBeingSent']);

   //You should see something like this if you print_r $receivedData
   // object(stdClass) {
   //      [car] => ...
   //      [numberTires] => ...  
   // }

   //So you could access the car value like this
   echo $receivedData->{'car'};

   //Do your processing and then, if you are using an array or object you can use `json_encode()` to output your data.

?> 
```

希望有帮助。

# ios - 显示拖动的 MKAnnotationPin 的位置

> ID：15080512
> 
> 赞同：1
> 
> 时间：2013-02-26T02:51:45.707
> 
> 标签：ios, animation, mapkit, mkannotation

我正在尝试为拖动的 MKAnnotationPin 的位置添加某种指示器。

到目前为止，我想出了以下无效的解决方案：

```
- (void) showDragLoc{

UIView *cross = [[UIView alloc] initWithFrame:CGRectMake(dragPin.center.x, dragPin.center.y, 10, 10)];
[self.mapView addSubview:cross];
while(dragPin.dragState  == MKAnnotationViewDragStateDragging){

    [UIView beginAnimations:nil context:NULL]; // animate the following:
    cross.frame = CGRectMake(dragPin.center.x, dragPin.center.y, 10, 10); // move to new location
    [UIView setAnimationDuration:0.3];
    [UIView commitAnimations];
}
} 
```

ere dragPin 是在标题中声明的 MKAnnotationView。当 pin 的 dragState 转到 MKAnnotationViewDragStateDragging（来自委托方法）时，调用此函数。

我的目标是添加某种指示当前被拖动的针脚所在位置的指示器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:58:23.887

如果你想在标准中添加一个十字准线`MKPinAnnotationView`，你应该继承它，然后在你的实现中添加你的十字准线`setDragState:animated:`。

因此，要子类化，请创建一个新类，例如`PinWithCrosshairAnnotationView`. .h 公共接口不需要太多：

```
@interface PinWithCrosshairAnnotationView : MKPinAnnotationView

@end 
```

.m 实现只是实现了一个`setDragState:animated:`添加你的十字准线的实现，然后调用`super`实现来获取引脚拉拔和放下功能。如果旗子打开，我也在制作动画`animated`，但你不必这样做。您的`frame`坐标无疑会与我的不同，但我从您上面的代码示例中收集到您已经为十字准线图像找到了正确的值：

```
#import "PinWithCrosshairAnnotationView.h"

@interface PinWithCrosshairAnnotationView ()
@property (nonatomic, weak) UIImageView *crosshairImageView;
@end

@implementation PinWithCrosshairAnnotationView

- (void)setDragState:(MKAnnotationViewDragState)newDragState animated:(BOOL)animated
{
    if (newDragState == MKAnnotationViewDragStateStarting)
    {
        // create the crosshair imageview and add it as a subview

        UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(-1.5, 30, 17.5, 17.5)];
        imageView.image = [UIImage imageNamed:@"Crosshairs.png"];
        [self addSubview:imageView];

        // if the animated flag is on, we'll fade it to visible state

        if (animated)
        {
            imageView.alpha = 0.0;
            [UIView animateWithDuration:0.2
                             animations:^{
                                 imageView.alpha = 1.0;
                             }];
        }

        // save a reference to that imageview in a class property

        self.crosshairImageView = imageView;
    }
    else if (newDragState == MKAnnotationViewDragStateEnding || newDragState == MKAnnotationViewDragStateCanceling)
    {
        if (animated)
        {
            // if we're animating, let's quickly fade it to invisible
            // and in the completion block, we'll remove it

            [UIView animateWithDuration:0.2
                             animations:^{
                                 self.crosshairImageView.alpha = 0.0;
                             }
                             completion:^(BOOL finished) {
                                 [self.crosshairImageView removeFromSuperview];
                                 self.crosshairImageView = nil;
                             }];
        }
        else
        {
            // if we're not animating, just remove it

            [self.crosshairImageView removeFromSuperview];
            self.crosshairImageView = nil;
        }
    }

    // remember to call super so we get all the other wonderful superclass behavior

    [super setDragState:newDragState animated:animated];
}
@end 
```

显然，您将相应地`viewForAnnotation`在您的`MKMapView`委托中自定义。这是一个极简版本，但您显然会根据您的需要（标注、标题、副标题等）进行调整：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    MKAnnotationView *view = [[PinWithCrosshairAnnotationView alloc] initWithAnnotation:annotation
                                                                        reuseIdentifier:@"pinwithcrosshairannotation"];
    view.draggable = YES;
    view.canShowCallout = NO;

    return view;
} 
```

# c - 打印 MPI 的 unsigned int (base 10 / decimal) 值

> ID：15080516
> 
> 赞同：1
> 
> 时间：2013-02-26T02:52:05.490
> 
> 标签：c, encryption, libgcrypt

我正在尝试确认/获取十六进制 mpi 值的无符号整数（基数 10/十进制）值。我正在使用以下代码：

```
#include <gcrypt.h>
#include <stdio.h>

static gcry_mpi_t privkey = NULL;

int main(){

    char *parmstr = "48BFDA215C31A9F0B226B3DB11F862450A0F30DA";

    printf("starting program\n");

    gcry_mpi_scan(&privkey, GCRYMPI_FMT_HEX, (char *)parmstr, 0, NULL);

    printf("printing hashed (?) mpi\n");
    gcry_mpi_dump(privkey);
    printf("\n");

    size_t gablen;
    unsigned char *result;
    /* get length */
    gcry_mpi_print (GCRYMPI_FMT_USG, NULL, 0, &gablen, privkey);
    result = gcry_malloc_secure(gablen);
    /* get actual value */
    gcry_mpi_print (GCRYMPI_FMT_USG, result, gablen, NULL, privkey);

    /* print actual value */
    printf("result: %s\n", result);

    printf("finished\n");
} 
```

我得到以下结果：

```
 $ ./foo
    starting program
    printing hashed (?) mpi
     48BFDA215C31A9F0B226B3DB11F862450A0F30DA
    result: H¿Ú!\1©ð²&³ÛøbE
0Ú
    finished 
```

我会在“结果：”行打印实际的无符号整数（以 10 为基数/十进制）值。

私钥取自我正在尝试使用的 Off-The-Record Pidgin 插件。

*编辑*：

任何人都可以确认实际的无符号整数（基数 10/十进制）值应该是

> 415325779662433871844955547383752003988573073626

我可能会更新程序以使用此值在 gcrypt 中创建一个新的 mpi，并查看 HEX 值是否与我已有的相同。我今天晚些时候会这样做。

*编辑 2*：

所以我正在尝试执行以下操作来打印上述 int 值的 HEX 值。出了点问题：

```
gcry_mpi_t cript_prime;
char buffer[50] = {0};
char number[50] = {0};

cript_prime = gcry_mpi_new(50);

strcpy(number,"415325779662433871844955547383752003988573073626");
gcry_mpi_scan(&cript_prime,GCRYMPI_FMT_USG,number,sizeof(number),NULL);

gcry_mpi_print(GCRYMPI_FMT_USG,buffer,sizeof(buffer),NULL,cript_prime);

printf("The number tested is: %s\n",buffer);

printf("trying to convert to HEX\n");

/* get actual value */
gcry_mpi_print (GCRYMPI_FMT_HEX, buffer, sizeof(buffer), NULL, cript_prime);
/* print actual value */
printf("result: %s\n", buffer); 
```

输出是：

```
result: 48BFDA215C31A9F0B226B3DB11F862450A0F30DA
The number tested is: 415325779662433871844955547383752003988573073626
trying to convert to HEX
result: 415325779662433871844955547383752003988573073626 
```

*编辑 3*：

我稍微更新了帖子，基本上我正在尝试打印由 gcrypt 库生成的十六进制值的 base10 十进制值。我正在寻找这个值来确认我为读取这些值所做的实现。我正在寻找一个 gcrypt 函数来实现这一点。似乎 gcrypt 不支持这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:02:13.993

这是一个工作脚本，缓冲区太小

```
#include <gcrypt.h>
#include <stdio.h>

int main(){
    gcry_error_t err;
    gcry_mpi_t cript_prime;
    unsigned char buffer[401] = {0};
    char number[101] = {0};

    cript_prime = gcry_mpi_new(101);

    strcpy(number, "415325779662433871844955547383752003988573073626");
    gcry_mpi_scan(&cript_prime, GCRYMPI_FMT_USG, number, sizeof(number), NULL);

    err = gcry_mpi_print(GCRYMPI_FMT_USG, buffer, sizeof(buffer), NULL, cript_prime);

    if (err != 0){
      printf("error: %d\n", err);
      return -1;
    }

    printf("The number tested is: %s\n",buffer);

    printf("trying to convert to HEX\n");

    /* get actual value */
    err = gcry_mpi_print(GCRYMPI_FMT_HEX, buffer, sizeof(buffer), NULL, cript_prime);

    if (err != 0){
      gcry_err_code_t code = gcry_err_code(err);
      printf("error: %d\n", code);
      return -1;
    }

    /* print actual value */
    printf("result: %s\n", buffer);

    printf("finished\n");

    return 0;
} 
```

我还使用这个网站确认了我的想法：[http ://www.unitconversion.org/numbers/base-10-to-base-16-conversion.html](http://www.unitconversion.org/numbers/base-10-to-base-16-conversion.html)

这将显示十六进制（base-16）48BFDA215C31A9F0B226B3DB11F862450A0F30DA 实际为 415325779662433762080404206464628666084640806848（base-10）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:44:38.997

> ```
> result[1] = (gablen >> 24) & 0xff; 
> ```

这一行将一个 nul 字节放入偏移量 1 的字节中`result`。我看不到您曾经在哪里初始化偏移量为零的字节，但是偏移量 2 和更高版本的字节超出了您构造的字符串的末尾。它格式化的字符串从 result+5 开始，所以你应该在这里打印：

> ```
> gcry_mpi_print (GCRYMPI_FMT_USG, result + 5, gablen, NULL, privkey);
> ...
> printf("result: %s\n", result + 5); 
> ```

# c++ - 没有这样的运算符“[]”与这些操作数匹配

> ID：15080517
> 
> 赞同：0
> 
> 时间：2013-02-26T02:52:10.300
> 
> 标签：c++, templates, operator-overloading

我正在尝试制作一个程序来演示我的 CS 类使用模板和重载运算符。以下是相关代码：

主要的：

```
 ArrayTemplate<int> number(0);
            number[0] = 1;
            number[1] = 2;
            number[2] = 3;

    ArrayTemplate<string> word("na");
            word[0] = "One";
            word[1] = "Two";
            word[2] = "Three"; 
```

标题：

```
template<class T>
T& operator [](const int index) 
{ 
    if(index >= 0 && index < ARRAY_MAX_SIZE)
        return items[index];
    else
    {
        cerr << "INDEX OUT OF BOUNDS!!!";
        exit(1);
    }
} 
```

问题是，当我尝试使用重载的下标运算符时，我收到标题中显示的错误消息：“没有这样的运算符“[]”与这些操作数匹配”我不确定为什么。它适用于我的整数数组和我的字符串数组。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T02:57:19.957

您*确实*需要显示`ArrayTemplate`.

这可能是您希望它的外观：

```
template<class T>
class ArrayTemplate {
  public:

    // ...

    T& operator [](const int index) 
    { 
        if(index >= 0 && index < ARRAY_MAX_SIZE)
            return items[index];
        else
        {
            cerr << "INDEX OUT OF BOUNDS!!!";
            exit(1);
        }
    }

    // ...
}; 
```

注意`operator[]`不是模板化的；只有类是。

使用您当前的代码，您必须这样做：

```
number<int>[0] = 1;
number<int>[1] = 2;
number<int>[2] = 3; 
```

这显然违背了你的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T04:43:27.743

```
template<class T>
T& operator [](const int index) 
```

该声明将被称为例如 as `object.operator[] < type >( 5 )`。请注意，`type`需要作为模板参数提供。因为无法在 using 表达式中提供这样的参数`[]`，所以运算符重载不起作用。

可能你根本不想要`template< class T >`。摆脱它：

```
T& operator [](const int index) 
```

如果你在`class {}`范围之外定义函数，那么它看起来像这样：

```
template<class T>
T& ArrayTemplate<T>::operator [](const int index) 
```

在这种情况下，该`template<class T>`行重新引入参数以返回到类模板中。

# ruby-on-rails-3 - 访问非当前 state_machine 状态

> ID：15080521
> 
> 赞同：0
> 
> 时间：2013-02-26T02:52:27.760
> 
> 标签：ruby-on-rails-3, state-machine

我的`order.rb`档案中有六个州。我想访问每个非当前状态以填充下拉菜单，以便可以轻松更改状态。我想出了这个。显然，该功能不起作用，并且状态为`written_like_this`.

```
<% order.state_paths.to_states.each do |state| %>
    <%= link_to(state.to_s, order.adjust(state)) %>
<% end %> 
```

我也想编写一个包罗万象的方法来解释来自上述菜单的点击并将记录转换为选定状态。类似（伪代码）：

```
def adjust(state)
  @order = Order.find(params[:id])
  @order.state = state
end 
```

任何想法都会很棒。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T04:43:02.210

我已经想通了。

```
def adjust
  session[:return_to] ||= request.referer
  @doc = Doc.find(params[:id])
  state = params[:state]
  respond_to do |format|
    @doc.update_attribute(:state, state)
    @doc.create_activity state.to_sym, owner: current_user
    format.html { redirect_to root_url, notice: "#{@doc.title} has now been #{state}." }
    format.json { render json: @doc }
  end
end 
```

我做了这样的按钮：

```
<% activity.trackable.state_paths.events.each do |s| %>
  <%= link_to(s.to_s.titlecase, adjust_path(s, activity.trackable)) %>
<% end %> 
```

繁荣。

# freebase - 从免费基地获取人民的姓氏或基督教的名字？

> ID：15080523
> 
> 赞同：1
> 
> 时间：2013-02-26T02:52:42.707
> 
> 标签：freebase

是否可以从 freebase 查询中获取用户的名字或姓氏？例如，我有一个我有 id 的人员条目，但我只想提取他们的名字。

{ "id": "/en/paul_thomas_anderson", "name" : null }​</p>

我将如何修改这个查询，这是我通过谷歌搜索或在 SO 上搜索一无所获的东西？我知道对于大多数人的条目来说，这种事情在 dbpedia 中是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:48:44.680

不，这不可能直接。名称存储为一个单元。有给定名称和姓氏的主题（例如[http://www.freebase.com/view/base/givennames/given_name](http://www.freebase.com/view/base/givennames/given_name)），因此您可以拆分名称并查看它出现在哪些列表中，但这是间接的并且不会告诉您您要查询的具体人员。

# ios - 自定义“浮动”UITableViewCells

> ID：15080524
> 
> 赞同：1
> 
> 时间：2013-02-26T02:52:48.730
> 
> 标签：ios, uitableview

我一直在网上搜索这个问题的答案，我相信它有一个简单的答案。

我正在我的应用程序中创建一个 UITableView，我希望它在顶部具有“浮动”表格视图单元格和一个菜单。像这样：

![在此处输入图像描述](../Images/9f19fa7c6afc8ec0e166054dc51cf655.png)

我确定这些是自定义 UITableView 单元格，但我不确定如何像这样创建它们并根据内容使它们的大小动态变化，以及如何在顶部包含一个菜单，一旦用户向下滚动，该菜单就会消失/显示或向上。

对此的任何见解都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T04:41:10.960

这可以通过分组表视图中的子类 UITableViewCell 相当容易地完成。下图显示了我通过拖入各种 UI 元素并创建一个自定义类快速制作的一个，该类在 .h 文件中只有 IBOutlets。

![在此处输入图像描述](../Images/58dd42519c1a43f294ee2df7b0442e88.png)

带有乱码的标签与下面的灰色视图和单元格的顶部相关联，没有设置特定的高度，因此当单元格增长时，它会增长。这是我用来填充表格的代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.theData = @[@"One",@"Two",@"Three",@"Four",@"Five",@"Six",@"Seven",@"Eight",@"Nine"];
    [self.tableView reloadData];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
   return  self.theData.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 1;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *s = @"asdfhfl fl flfh sflhsalfjh fajlhf lf asldf fh asljfafh sjlfh ajf fljf fasjlfhjfhjfhjsf hsjfhsjfhajsfh the end";
    CGSize size = [s sizeWithFont:[UIFont systemFontOfSize:17] constrainedToSize:CGSizeMake(281, CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping];
    return size.height + 130;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    RDCell *cell = [tableView dequeueReusableCellWithIdentifier:@"RDCell" forIndexPath:indexPath];
    cell.lbl1.text = self.theData[indexPath.section];
    cell.lbl2.text = @"asdfhfl fl flfh sflhsalfjh fajlhf lf asldf fh asljfafh sjlfh ajf fljf fasjlfhjfhjfhjsf hsjfhsjfhajsfhajlfjafh";
    return cell;
} 
```

请注意，我将部分的数量设置为数组的计数，因此您将获得每个 1 行的单独部分。heightForRowAtIndexPath 中的代码是计算单元格高度的典型方式（除了您通常会使用索引路径并为每个单元格获取不同的字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T18:12:02.883

我认为这就是你要找的..

[IBScrollViewFloatingHeader](https://github.com/ivanbruel/IBScrollViewFloatingHeader)

# java - 哨兵值不退出while循环

> ID：15080526
> 
> 赞同：1
> 
> 时间：2013-02-26T02:53:03.213
> 
> 标签：java

// 在下面的程序中，最初当用户收到指令时，他可以简单地进入哨兵退出while循环，但是当你得到你想买的票的结果时，按999不会退出程序

```
import java.io.*;

public class ManyTickets
{

  public static void main (String [] args) throws IOException
  {
  String userInput;
  String userInput2;
  int intInput = 0;
  int intInput2 = 0;
  double total = 0.00;
  BufferedReader ageInput = new BufferedReader (new InputStreamReader (System.in));
  try{
    System.out.println("Please enter your age, or press '999' to exit.");
    userInput = ageInput.readLine();
    intInput = Integer.parseInt (userInput);
    while (intInput != 999)
    {
      if (intInput < 0 || intInput > 110)
        System.out.println("Invalid entry, or your age seems a bit too high to enter buy these tickets");
      else if (intInput <= 12)
      {
        total = total + 6;
        System.out.println("The ticket cost for 1 ticket is " + total);
      }
      else if (intInput <= 64)
      {
        total = total + 11;
        System.out.println("The ticket cost for 1 ticket is " + total);  
      }
      else
      {
        total = total + 8;
        System.out.println("The ticket cost for 1 ticket is $" + total);
      }
      System.out.println("So far, your tickets cost is: $" + total  );
      System.out.print("Would you like to buy more tickets? You can buy up to 1 more ticket per customer! If no press 999 to exit");
      userInput = ageInput.readLine();
      intInput2 = Integer.parseInt (userInput);  
      }
    }catch (NumberFormatException e){
       System.out.println("Please restart the program, and enter an integer instead!");
    }
  } 
  {
    double total = 0.0;
    System.out.println("Thank you,  The total cost for the ticket is: $" + total);
    System.out.println("Have a nice day!");
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:03:52.450

您正在使用两个不同的变量，`intInput`并且`intInput2`. 我不明白你为什么需要第二个（就在 catch 块之前）。只需重用`intInput`，这是在您的 while 循环中针对哨兵值检查的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T03:03:10.900

用户输入 999 后你什么也不做。当它的 999 如下所示时打破循环，

```
intInput2 = Integer.parseInt(userInput);

if (intInput2 == 999) {
 break;
} 
```

# java - JPanel从窗口消失

> ID：15080529
> 
> 赞同：1
> 
> 时间：2013-02-26T02:53:25.547
> 
> 标签：java, swing, jtable, jpanel, jdialog

下面的 SSCCE 是一个扩展`JPanel`. 是日历的`JPanel`基本轮廓（为简单起见，我将其剥离了），它由`JButton`组件 a`JLabel`和 a组成`JTable`。当我将此框架添加到窗口（即`JDialog`）时，它会正常显示。但是，当我用它添加另一个组件时，它就会消失。为什么会发生这种情况，我怎样才能不发生这种情况？

```
import javax.swing.*;
import javax.swing.table.*;
import java.awt.*;

public class CalendarPanel extends JPanel {

    private static JDialog dialog = new JDialog();

    public static void main(String[] args) {

    setDialogProperties();
    addComponentsToDialog();
    dialog.setVisible(true);
    }

    private static void setDialogProperties() {
    dialog.setModal(true);
    dialog.setResizable(false);
    dialog.setSize(new Dimension(330, 400));
    dialog.setDefaultCloseOperation(2);
    dialog.setLocationRelativeTo(null);
    }

    private static void addComponentsToDialog() {
    CalendarPanel calendar = new CalendarPanel();
    JPanel panel = new JPanel();
    panel.add(calendar);

    dialog.add(panel);
    //dialog.add(new JLabel("Hello"));
    }

    private static final long serialVersionUID = 1L;
    private JLabel lblMonth;
    private JButton btnPrev, btnNext;
    private JTable tblCalendar;
    private DefaultTableModel mtblCalendar;
    private JScrollPane stblCalendar;
    private static GridBagLayout gridBag = new GridBagLayout();
    private GridBagConstraints constraints = new GridBagConstraints();

    public CalendarPanel() {

    super(gridBag);

    createControls();
    addControlsToPanel();
    addHeaders();
    setTableProperties();
    }

    private void createControls() {
    lblMonth = new JLabel("January");
    btnPrev = new JButton("<");
    btnNext = new JButton(">");
    mtblCalendar = new DefaultTableModel() {

        public boolean isCellEditable(int rowIndex, int mColIndex) {
        return false;
        }
    };
    tblCalendar = new JTable(mtblCalendar);
    stblCalendar = new JScrollPane(tblCalendar);
    stblCalendar.setPreferredSize(new Dimension(300, 247));
    }

    private void addControlsToPanel() {
    GridBagLayout topGridBag = new GridBagLayout();

    JPanel topPanel = new JPanel(topGridBag);

    JPanel labelPanel = new JPanel();
    labelPanel.add(lblMonth);
    labelPanel.setPreferredSize(new Dimension(180, 20));

    constraints.gridx = 1;
    topGridBag.setConstraints(labelPanel, constraints);

    constraints.gridx = 2;
    topGridBag.setConstraints(btnNext, constraints);

    topPanel.add(btnPrev);
    topPanel.add(labelPanel);
    topPanel.add(btnNext);

    gridBag.setConstraints(topPanel, constraints);

    constraints.gridy = 1;
    gridBag.setConstraints(stblCalendar, constraints);

    this.add(topPanel);
    this.add(stblCalendar);
    }

    private void addHeaders() {
    String[] headers = { "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" };
    for (int i = 0; i < 7; i++) {
        mtblCalendar.addColumn(headers[i]);
    }
    }

    private void setTableProperties() {
    tblCalendar.getTableHeader().setReorderingAllowed(false);

    tblCalendar.setRowHeight(38);
    mtblCalendar.setColumnCount(7);
    mtblCalendar.setRowCount(6);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:58:00.583

JDialogs 和所有顶级窗口默认使用 BorderLayout。当您在未指定位置的情况下向其添加组件（实际上是其 contentPane）时，默认情况下将其添加到 BorderLayout.CENTER 位置。每当您添加一个新组件时，您就是在掩盖之前添加的组件。您将想要了解可供您使用的布局，然后充分利用它们。

例如，

```
 dialog.add(panel);
  dialog.add(new JLabel("Hello", SwingConstants.CENTER), BorderLayout.SOUTH);
} 
```

接下来，您将要避免设置任何内容的大小，并确保`pack()`您的顶级窗口允许这样做。

# java - 通过套接字连接在 Java 中处理字节流

> ID：15080530
> 
> 赞同：1
> 
> 时间：2013-02-26T02:53:41.213
> 
> 标签：java, sockets, network-programming

我不是 Java 套接字编程方面的专家，但我目前正在尝试用 Java 开发服务器/客户端应用程序。

客户端应该使用不同的参数（标题）和数据（正文）向服务器发送消息。在接收到的消息中，一些参数必须被删除，剩余的参数和数据应该被发送到另一个服务器。客户端发送数据包大小预定义为：

```
MAX_SOCKET_BYTE_LEN=24576 
```

对于我的情况，谁能给我一些想法如何通过套接字连接实现消息字节流处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:13:34.830

这里有一些例子，尝试使用缓冲区而不是字节，让我们看看这个例子[Nio Examples](http://javabeginershub.blogspot.in/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:17:17.283

除非您有充分的理由，否则我建议您学习并构建现有的非常好的通信框架之一，例如 Netty：

*   [http://netty.io/](http://netty.io/)

这将处理您在套接字通信中需要处理的许多复杂性。

# jquery - 添加元素以上传图片

> ID：15080540
> 
> 赞同：1
> 
> 时间：2013-02-26T02:54:25.030
> 
> 标签：jquery, joomla, joomla2.5

我尝试添加文件底部以在 joomla 3.0 后端添加图像

为此，我使用 Jquery 的 append() 函数

```
<div class="control-group">
            <div class="control-label"><?php echo $this->form->getLabel('imagenes'); ?></div>
            <div class="controls1"><?php echo $this->form->getInput('imagenes'); ?>
                <input type="button" id="boton_append_1" value="Add Imagen" />
            </div>
        </div> 
```

我的jquery函数是这样的

```
<script type="text/javascript">
                jQuery.noConflict();
                jQuery(document).ready(function(){
                    jQuery('#boton_append_1').click(function() {
                        jQuery('.controls1').append(

                        );
                    });
                });
            </script> 
```

但我不知道如何添加元素

任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:47:25.187

使用`insertBefore()`.

**官方文档**：[http ://api.jquery.com/insertBefore/](http://api.jquery.com/insertBefore/)

```
<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function()
    {
        jQuery('#boton_append_1').click(function()
        {
            jQuery('<input type="file" />').insertBefore(jQuery(this));
        });
    });
</script> 
```

# shell - csh 错误“设置：不匹配。”

> ID：15080544
> 
> 赞同：0
> 
> 时间：2013-02-26T02:55:09.130
> 
> 标签：shell, set, csh

所以我正在编写一个计算器 c shell 脚本，它从文件中读取数字，然后 shell 返回答案。例如，在数字文本文件中，我会：

```
1129 3100 + 
```

我的 csh 文件一旦运行就会返回

```
Input from line 1 : 1129 3100 +
ARG1: 1129
ARG2: 3100
ARG3: +
4229 
```

我的问题是，当我到达 28 行文件中的第 28 行时，输出为：

```
Input from line 28 : 7 4 *=
set: No match. 
```

根据我的代码，我应该返回：

```
Input from line 28 : 7 4 *=
ARG1: 7
ARG2: 4
ARG3: *=
Invalid Input in line 28 
```

这是我的代码：

```
#!/bin/csh
# Usage: Performs math operations

@ linenum=0

foreach line ( "`cat calc_input.txt`")
    @ linenum += 1
    echo "Input from line $linenum : $line"
    set argv = ( $line )
    set var1 = $1
    set var2 = $2
    set var3 = $3
    echo "ARG1: $var1"
    echo "ARG2: $var2"
    echo "ARG3: $var3"
    switch ($var3)
            case +:
                    @ ans = $var1 + $var2
                    echo $ans
            breaksw
            case -:
                    @ ans = $var1 - $var2
                    echo $ans
            breaksw
            case x:
                    @ ans = $var1 * $var2
                    echo $ans
            breaksw
            case /:
                    if ( $var2 == 0 ) then
                            echo "Error: Divide by Zero"
                            continue
                    endif
                    @ ans = $var1 / $var2
                    echo $ans
            breaksw
            case %:
                    @ ans = $var1 % $var2
                    echo $ans
            breaksw
            default:
                    echo "Invalid Input in line $linenum"
            breaksw
    endsw
end 
```

这是我必须阅读的数字文件

```
1129 3100 +
-19 6 +
9 3 -
-7 6 -
9 3 /
4 8 /
35 6 /
12 3 %
13 3 %
4 19 %
11 9 x
4294967296 1024 x
-9 7 x
1024 0 /
14 63 <<
1234 5678 >>
1 2 3 4 +
1 +
3 -
7 x
12 /
91 %
7 ++
3 1 +=
6 2 -=
4 6 *
-11 7 *
7 4 *= 
```

我只需要担心 +、-、x、/ 和 %。任何格式不正确的内容都会显示错误消息。

谢谢你的帮助！

是的，这是一个家庭作业问题，我知道 csh 是一个可怕的、可怕的东西，而且大多数人不使用它。告诉我的老师，而不是我。

更新：刚刚尝试将有问题的行移动到数字文件中的另一行。它仍然存在问题，但它只会在脚本遇到以下情况时发生：

```
7 4 *= 
```

所以在文本文件中的放置不是问题。这是表达的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:02:29.420

一个语法问题：您的默认子句中缺少一个字符。检查您的文档，您应该能够弄清楚。

有了这个，考虑一下`*`csh （通配符）的含义。有什么特别之处`*=`？想想你如何限制 csh 只把它当作一个角色。

```
Input from line 27 : -11 7 *
ARG1: -11
ARG2: 7
ARG3: calc_input.txt 
```

弄清楚为什么`ARG3`是文件名。

```
Input from line 28 : 7 4 *=
set: No match. 
```

该错误消息非常具体。查一下。

“这是表达的问题。” - 这是关于 csh 对`*`. 查看[globbing](http://www.grymoire.com/Unix/Csh.html#uh-13)。在您的脚本中添加一行以指示 csh 暂停 globbing 将使其正常工作。

# c++ - 为什么我的 mt19937 随机发生器给了我荒谬的结果？C++

> ID：15080549
> 
> 赞同：6
> 
> 时间：2013-02-26T02:55:53.393
> 
> 标签：c++, random, c++11

在另一个项目上工作，我们需要使用`mt19937`随机生成数字。我们应该让它根据网格的截面随机选择一个 x 和 y 坐标。例如，我的函数将`minX`, `maxX`, `minY`,传递`maxY`给一个函数。我的 x 坐标工作正常。在测试运行时，我不断地随机出错。有时它会运行 10 次没有问题，然后出现错误。我添加了一些自调试行来显示 mt 生成器实际生成的内容。就像我说的，x 工作正常，y 有时也可以。它会随机给我一个 -3437892 或 9743903。

这是我的代码：

```
void DungeonLevel::generateRoom(int minX,int maxX,int minY, int maxY){
    mt19937 mt;
    mt.seed( time(NULL) );

    // Calculate random width and height; these both range
    // from 4-13
    int iRandomWidth = 4 + (mt() % 10);
    int iRandomHeight = 4 + (mt() % 10);

    // Calculate the start points in both X and Y directions

    int iStartX;
    iStartX = mt() % (maxX - iRandomWidth);
    cout << "xStart: " << iStartX<<endl; //cout flag
    while ((iStartX > maxX) && (iStartX >= 0)){
            cout << "xStart: " << iStartX<<endl;//cout flag
            iStartX = mt() % (maxX - iRandomWidth);
    }
    int iStartY = 0;
    iStartY = mt() % (maxY - iRandomHeight);
    cout<<"yStart: " <<iStartY<<endl; //cout flag
    while ((iStartY > maxY)){
            cout<<"yStart: " <<iStartY<<endl;//cout flag
            iStartY = (mt() % (maxY - iRandomHeight));
    }

    // Iterate through both x and y coordinates, and
    // set the tiles to room tiles
    // SINGLE ROOM
    for( int x = iStartX; x <= iStartX + iRandomWidth; x++ ){
            for( int y = iStartY; y <= iStartY + iRandomHeight; y++ ){
                    if (y == iStartY){
                            dungeonGrid[y][x] = '-';
                    }
                    else if (iStartX == x){
                            dungeonGrid[y][x] = '|';
                    }
                    else if (y == (iStartY+iRandomHeight)){
                            dungeonGrid[y][x] = '-';
                    }
                    else if (x == (iStartX+iRandomWidth)){
                            dungeonGrid[y][x] = '|';
                    }
                    else {
                            dungeonGrid[y][x] = '.';
                    }

            }
    }

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T03:10:42.060

我认为您应该对 mt19937 使用随机分布。所以使用它

```
mt19937 mt;
mt.seed( time(nullptr) );
std::uniform_int_distribution<int> dist(4, 13);

int iRandomWidth = dist(mt);
int iRandomHeight = dist(mt); 
```

这样你就可以保证得到 4 到 13 之间的随机数。

**更新** 虽然我的答案解决了原始问题并且在我看来是代码可读性的改进，但它实际上并没有解决原始代码中的问题。另请参阅 jogojapan 的回答。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T03:34:38.353

问题的最终原因是您在代码中混合了有符号和无符号整数而没有采取必要的预防措施（并且不需要）。

具体来说，如果`minY`有时小于 13，它会时不时地发生，然后就会变成`iRandomHeight`负数。然后得到的效果类似于下面演示的效果：

```
#include <limits>
#include <iostream>

using namespace std;

int main()
{
  /* Unsigned integer larger than would fit into a signed one.
     This is the kind of thing mt199737 returns sometimes. */
  unsigned int i = ((unsigned int)std::numeric_limits<int>::max()) + 1000;
  cout << (i % 3) << endl;
  cout << (i % -3) << endl;
  cout << (signed)(i % -3) << endl;
  return 0;
} 
```

这首先会生成一个比有符号整数稍大的无符号整数。`mt19937`返回无符号，有时会给你`i`上面代码中的值。

上面代码的输出（参见[liveworkspace](http://liveworkspace.org/code/4gZPAF%2425)）如下：

```
2
2147484647
-2147482649 
```

第二行显示了带负数的模运算结果（例如`iRandomHeight`有时会），应用于大于适合相应有符号整数的无符号整数。第三行显示了当您将其转换回有符号整数时会发生什么（当您将其分配给您的一个有符号整数变量时，您会隐式执行此操作）。

尽管我同意 Haatschii 的观点，即您应该使用`std::uniform_int_distribution`它来使您的生活更轻松，但即使在那时，适当地使用已签名和未签名也很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:06:54.130

在@haatschii 的帮助下找出了我犯的业余错误。

现在这很有意义。iStartY 和 iStartX 没有限制设置为低于或等于零的数字。我觉得很愚蠢，因为没有抓住那个大声笑。我添加了另一个循环以确保该值大于 0。我还使 iStartX 和 iStartY 值以 maxX+1 和 maxY+1 开头，以便它们自动进入循环以生成大于 0 的解。

下面是解决方案代码：

```
void DungeonLevel::generateRoom(int minX,int maxX,int minY, int maxY){
    mt19937 mt;
    mt.seed( time(NULL) );

    // Calculate random width and height; these both range
    // from 4-13
    int iRandomWidth = 4 + (mt() % 10);
    int iRandomHeight = 4 + (mt() % 10);

    int iStartX = maxX+1; //automatically has to enter the second while loop        
    while ((iStartX > maxX) && (iStartX >= 0)){
            while ((maxX - iRandomWidth) <= 0){
                    iRandomHeight = 4 + (mt() % 10); //makes value > 0
            }
            iStartX = mt() % (maxX - iRandomWidth);
    }

    int iStartY = maxY+1; //automatically has to enter the second loop
    while ((iStartY > maxY)){
            while ((maxY - iRandomHeight) <= 0){
                    iRandomHeight = 4 + (mt() % 10); //sets to valid value
            }
            iStartY = mt() % (maxY - iRandomHeight);
    }
    // Iterate through both x and y coordinates, and
    // set the tiles to room tiles
    // SINGLE ROOM
    for( int x = iStartX; x <= iStartX + iRandomWidth; x++ ){
            for( int y = iStartY; y <= iStartY + iRandomHeight; y++ ){
                    if (y == iStartY){
                            dungeonGrid[y][x] = '-';
                    }
                    else if (iStartX == x){
                            dungeonGrid[y][x] = '|';
                    }
                    else if (y == (iStartY+iRandomHeight)){
                            dungeonGrid[y][x] = '-';
                    }
                    else if (x == (iStartX+iRandomWidth)){
                            dungeonGrid[y][x] = '|';
                    }
                    else {
                            dungeonGrid[y][x] = '.';
                    }

            }
    }

} 
```

* * *

谢谢提醒伙计！

# c# - 如何确定哪个 Windows Communication Foundation 服务正在使用给定端口？

> ID：15080554
> 
> 赞同：2
> 
> 时间：2013-02-26T02:56:12.180
> 
> 标签：c#, windows, wcf, tcplistener, netstat

理想情况下，我想在 C# 中执行此操作，因此我包含 C# 标记。

我有几个 Window Communication Foundation 服务正在运行并使用`System.ServiceModel.ServiceHost`. 我有一个正在使用的端口号列表，但我想使用正在运行的服务从端口号映射到可执行文件。

我曾尝试使用 netstat、TCPView 和其他一些我发现尝试搜索此解决方案但没有显示我的进程的类似工具，我能得到的最接近的是系统 (PID 4)。

所有这些都是 Windows WCF 服务，按预期运行，并且确实显示在 netstat 和 TCPView 中（按端口号），但只能提供“系统”作为进程。

代码由几个不同的部门管理，所以我不认为通用接口方法是有效的解决方案。我确实拥有这台机器的完全管理员权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T05:08:09.460

WCF 提供了一个[用于诊断的 WMI 接口](http://msdn.microsoft.com/en-us/library/ms735120.aspx)，您应该能够使用该接口将 WCF 服务端口与特定进程相关联。特别是[Service](http://msdn.microsoft.com/en-us/library/aa702588.aspx)类看起来很有希望。

（请随意在此处附上您的示例代码，或将其作为另一个答案发布。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T14:42:24.197

将我的示例代码添加到@HarryJohnston 的答案中：

```
String wcfNamespace = String.Format(@"\\{0}\Root\ServiceModel", "MachineName");

ConnectionOptions connection = new ConnectionOptions();
connection.Authentication = AuthenticationLevel.PacketPrivacy;
ManagementScope scope = new ManagementScope(wcfNamespace, connection);
scope.Connect();

ObjectQuery query = new ObjectQuery("Select * From Service");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);

ManagementObjectCollection queryCollection = searcher.Get();
ManagementObject[] listing = queryCollection.OfType<ManagementObject>().ToArray();

Dictionary<int, int> portToPID = new Dictionary<int, int>();

foreach (ManagementObject mo in queryCollection)
{
    //each of services only have one base address in my example
    Uri baseAddress = new Uri(((Array)mo.Properties["BaseAddresses"].Value).GetValue(0).ToString());
    int pid = Int32.Parse(mo.Properties["ProcessId"].Value.ToString());
    portToPID.Add(baseAddress.Port, pid);
} 
```

还需要将此添加到每个服务 .config，而不是 WMI 客户端

```
<system.serviceModel>
    …
    <diagnostics wmiProviderEnabled="true" />
    …
</system.serviceModel> 
```

# jpa - JPQL 等效于使用联合和选择常量的 SQL 查询

> ID：15080555
> 
> 赞同：3
> 
> 时间：2013-02-26T02:56:12.887
> 
> 标签：jpa, jpql

我编写了一个 SQL 查询，它基本上从多个表中进行选择，以确定哪些表具有自特定日期以来创建的行。我的 SQL 看起来像这样：

```
SELECT widget_type FROM(
  SELECT 'A' as widget_type
  FROM widget_a
  WHERE creation_timestamp > :cutoff
  UNION
  SELECT 'B' as widget_type
  FROM widget_b
  WHERE creation_timestamp > :cutoff
) types
GROUP BY widget_type
HAVING count(*)>0 
```

这在 SQL 中运行良好，但我最近发现，虽然 JPA 可能使用联合来执行“每类表”多态查询，[但 JPQL 不支持](https://stackoverflow.com/questions/15062501/jpa-only-executes-first-select-statement-in-union)查询中的联合。所以这让我想知道 JPA 是否有替代方案可以用来完成同样的事情。

实际上，我会查询十几个表，而不仅仅是两个，所以我想避免单独查询。出于可移植性的原因，我还想避免执行本机 SQL 查询。

在我上面链接的问题中，有人询问映射到 widget_a 和 widget_b 的实体是否属于同一继承树。是的，他们是。但是，如果我从他们的基类中选择，我不相信我会有办法为不同的子实体指定不同的字符串常量，对吗？如果我可以选择实体的类名而不是我提供的字符串，那也可能符合我的目的。但我也不知道这是否可能。想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-05T06:45:45.910

我进行了更多搜索，发现 JPA 的一个（看似晦涩难懂的）功能完美地满足了我的目的。我发现 JPA 2 有一个`type`关键字，允许您将多态查询限制为特定的子类，如下所示：

```
SELECT widget
FROM BaseWidget widget
WHERE TYPE(widget) in (WidgetB, WidgetC) 
```

我发现 JPA（或至少作为 JPA 实现的 Hibernate）`type`不仅允许您在约束中使用，而且还允许在选择列表中使用。这大约是我的查询最终的样子：

```
SELECT DISTINCT TYPE(widget)
FROM BaseWidget widget
WHERE widget.creationTimestamp > :cutoff 
```

该查询返回一个`Class`对象列表。我最初的查询是选择字符串文字，因为这最接近我在 SQL 中所做的。在我的情况下，选择`Class`实际上是更可取的。但是，如果我确实更喜欢根据实体的类型选择一个常量，那么这就是[Oracle 文档](http://docs.oracle.com/javaee/6/tutorial/doc/bnbuf.html#gjjnd)用来说明`case`语句的确切场景：

```
SELECT p.name
CASE TYPE(p)
  WHEN Student THEN 'kid'
  WHEN Guardian THEN 'adult'
  WHEN Staff THEN 'adult'
  ELSE 'unknown'
END
FROM Person p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:39:42.490

一些 JPA 提供者确实支持 UNION，

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#UNION](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#UNION)

但是您的查询似乎非常复杂，并且非面向对象，因此使用本机 SQL 查询可能是最好的。

# java - 从 Android 中的 ListView 中删除最后一项时出错

> ID：15080557
> 
> 赞同：1
> 
> 时间：2013-02-26T02:56:15.487
> 
> 标签：java, android, onclicklistener

我有一个带有 onListItemListener 的 ListView，我有它，所以如果你点击一个 ListView 项目，它会删除它，但由于某种原因，如果我从列表中删除最后一个项目，应用程序会崩溃并给我这个错误`(java.lang.IndexOutOfBoundsException: Invalid index 3, size is 3)`

有谁知道这意味着什么？

这是我的代码：

```
 @Override  
        protected void onListItemClick(ListView l, View v, int pos, long id) {  
            super.onListItemClick(l, v, pos, id);
            adapter.remove(adapter.getItem(pos));
            adapter.notifyDataSetChanged();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T02:59:35.867

我假设您将 pos = 3 作为参数值传递。因为列表的大小是 3，所以最后一个元素的位置应该是 2。

*编辑：

请记住，listview 和适配器的起始索引是不同的。ListView 项 pos 从“1”作为第一个位置开始，适配器（例如数组）从索引“0”作为第一个位置开始。

```
adapter.remove(adapter.getItem(pos-1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:26:44.310

我相信我已经弄清楚了，所有说`pos`变量是一个数字太高的答案似乎都是合乎逻辑的，但是我都尝试了它们，但它们都不起作用。

似乎出了什么问题，当我从列表中删除最后一项时，它会尝试刷新 ListView 但里面没有任何东西可以刷新，因此应用程序会崩溃，我稍微更改了代码位，现在效果很好！:) 我不完全理解它为什么有效，但它确实有效！

感谢所有的答案家伙！

```
@Override  
    protected void onListItemClick(ListView l, View v, int pos, long id) {  
        super.onListItemClick(l, v, pos, id);

        if (adapter.getCount() != adapter.getItemId(pos)) {
           adapter.remove(adapter.getItem(pos));
           adapter.notifyDataSetChanged();     
       }        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:06:29.240

根据[文档](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)，您应该一直使用 id 作为删除项目的值。

像这样：

```
adapter.remove(adapter.getItem(id)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T06:28:44.043

请尝试以下操作：如果 lsitview 中有 4 个项目，则 lat 项目将位于索引 3 处，第一个将位于索引 0 处。

```
@Override  
        protected void onListItemClick(ListView l, View v, int pos, long id) {  
            super.onListItemClick(l, v, pos, id);
            adapter.remove(adapter.getItem(pos-1));
            adapter.notifyDataSetChanged();
        } 
```

# sql-server-2008 - 在过程 SQL 中将结果作为浮点数

> ID：15080559
> 
> 赞同：0
> 
> 时间：2013-02-26T02:56:22.110
> 
> 标签：sql-server-2008, tsql

这里我有一个有点复杂的 SQL 命令。我怎样才能把它的结果作为浮点数？

我应该把`CAST`和放在哪里`AS FLOAT`？

```
update T1 set T1.fm_hour = T2.fm_hour
from T T1 join (Select distinct name,sum(fm) over (partition by name)/60 fm_hour
                from T) T2 on T1.name = T2.name
where T1.work_type = 'out' 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T02:59:40.237

有几种方法可以做到这一点。

您可以在更新中设置值时强制转换：

```
update T1 set T1.fm_hour = cast(T2.fm_hour as float)
from T T1 
join 
(
   Select distinct name, sum(fm) over (partition by name)/60 fm_hour
   from T
) T2 on T1.name = T2.name
where T1.work_type = 'out' 
```

或者可以投60：

```
update T1 set T1.fm_hour = T2.fm_hour
from T T1 
join 
(
   Select distinct name, sum(fm) over (partition by name)/ cast(60 as float) fm_hour
   from T
) T2 on T1.name = T2.name
where T1.work_type = 'out' 
```

或者你可以只除以 60.0：

```
update T1 set T1.fm_hour = T2.fm_hour
from T T1 
join 
(
   Select distinct name, sum(fm) over (partition by name)/ 60.0 fm_hour
   from T
) T2 on T1.name = T2.name
where T1.work_type = 'out' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T02:59:29.273

尝试这个 ：

```
update T1 set T1.fm_hour = T2.fm_hour
from T T1 join (Select distinct name,cast(sum(fm) over (partition by name)/60 as float) fm_hour
                from T) T2 on T1.name = T2.name
where T1.work_type = 'out' 
```

# python - TypeError：'float' 对象在遍历元组列表并检查每个元组的第一个 str 时不可下标

> ID：15080567
> 
> 赞同：1
> 
> 时间：2013-02-26T02:56:55.300
> 
> 标签：python

我正在编写我的第一个课堂程序 - 它有四个功能，其中一个`main()`。

第一个函数提示用户输入文件名并打开该文件。`main()`然后提示用户输入该文件中的列，以便它知道要使用哪些数据。

第二个函数生成一个元组列表-每个元组从该列中提取一行及其对应的日期（即文件中的第 0 列。第三个函数应该查看函数二的元组列表中的元组中的日期和平均每个月的数据（每个月有多个元组）。这是我遇到错误的地方：`TypeError: 'float' object is not subscriptable`

这是我的第三个功能：

```
def average_data(list_of_tuples):

    month_int = 2
    values_to_average_int = 0.0
    data_avg_int = 0.0
    average_divisor_int = 1
    list_of_month_average_tuples = []
    val = 0

    for val in list_of_tuples:
        #month_val = int(val[0][5:7])
        if val[0][5:7] == month_int:
        #if month_val == month_int:
            values_to_average_int += val[1]
            average_divisor_int += 1
            print(values_to_average_int)

        else:
            data_avg_float = float(values_to_average_int / average_divisor_int)
            month_yr_date_str = val[0][5:7] + '-' + val[0][:4]
            month_average_tuple = (data_avg_int, month_yr_date_str)
            list_of_month_average_tuples.append(month_average_tuple)
            #list_of_month_average_tuples(data_avg_int, month_yr_date_str) 
            month_int -= 1
            if month_int == 0:
                month_int = 12
            print(list_of_month_average_tuples)
    return list_of_month_average_tuples 
```

如何更正`TypeError`当前遇到的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:33:57.220

您正在遍历元组并将当前元组分配给`val`. 要访问其中的值，`val`只需使用一组括号，而不是两个，因为给定的元组不是二维的。`val[5:7]`不是`val[0][5:7]`。

此外，您还有`val=0`上述`for`循环。您不应该为它分配这样的值 - 它会变得`val`模棱两可。

[在此处](http://docs.python.org/2/tutorial/controlflow.html#for-statements)阅读 Python`for`循环。

# java - 如何在 java 中给出命令行参数并验证它

> ID：15080570
> 
> 赞同：-2
> 
> 时间：2013-02-26T02:57:10.970
> 
> 标签：java

我正在尝试为 2 个命令行参数编码，其中第一个是“u”或“l”，没有别的，第二个是 10 -20 个字母之间的 dna 序列（a，c，g，t），使用正则表达式进行验证两个参数并尝试在 arg 中以大写形式打印序列。是 u，如果 arg 是 l，则为小写。问题是我没有得到想要的输出。请指导我如何在java中执行此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:14:54.360

```
public class BioHomework {
  public static void main(String[] args) {
    if(args.length < 2) {
       throw new IllegalArgumentException("two args required");
    }
    String sequence = args[1];
    if (!sequence.toLowerCase().matches("[atgc]{10,20}")){
      throw new IllegalArgumentException("second arg should be 'atgc' string between 10 and 20 characters");
    }
    if ("u".equals(args[0])) {
      System.out.println(sequence.toUpperCase());
    } else if ("l".equals(args[0])) {
      System.out.println(sequence.toLowerCase());
    } else {
      throw new IllegalArgumentException("first argument must be either 'u' or 'l'");
    }

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:04:23.050

以这种方式调用您的应用`java app_name u a,c,g,t`

然后在主方法中（因为这些是命令行参数）你会得到类似的东西（我假设你的主方法参数名称是`args`）： -

```
 if(args.length < 2){
            System.err.println("No or invalid argument entered");
        }else{
           String _case = args[0], dna_sequence = args[1]
           if (_case.equalsIgnoreCase("u")) {
                System.out.println(dna_sequence.toUpperCase());
            } else {
                System.out.println(dna_sequence.toLowerCase());
            }
    } 
```

希望能帮助到你

# linux - yum 通过其他服务器安装

> ID：15080571
> 
> 赞同：4
> 
> 时间：2013-02-26T02:57:10.680
> 
> 标签：linux, centos, yum, rhel

我在同一个网络上有两台服务器（CentOS 6.2）。其中一个（server1）可以访问互联网，另一个（server2）没有。
我需要配置我的服务器，以便 server2 可以安装软件包！

请帮忙 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:08:25.053

您可以在具有 Internet 访问权限的服务器上配置 NAT。或者，您可以在支持 Internet 的服务器上设置 squid 代理。

这基本上意味着让现在没有它的机器可以访问互联网。

在可以访问 Internet 的机器上：

```
yum install squid 
```

现在编辑 /etc/squid/squid.conf。添加这样的一行：

```
acl internal_server src XXX.XXX.XXX.XXX/32 
```

其中 XXX.XXX.XXX.XXX 在服务器 ip 内

下一个添加：

```
http_access allow internal_server 
```

最后重启squid服务器：

```
/etc/init.d/squid restart 
```

现在，在内部服务器上：

编辑 /etc/yum.conf 并添加：

```
proxy=http://YYY.YYY.YYY.YYY:3128 
```

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:03:58.790

尝试在连接到 Internet 的服务器上配置 NAT。将该服务器默认网关设置为没有互联网的服务器。

# doctrine-orm - 标识符中的 Doctrine 2 ORM 日期时间字段

> ID：15080573
> 
> 赞同：22
> 
> 时间：2013-02-26T02:57:26.000
> 
> 标签：doctrine-orm

在我们的数据库表中，我们列`refID`和`date`是一个复合主键，标识符的一个字段被映射为`datetime`：

```
class corpWalletJournal
{
    /**
     * @ORM\Column(name="refID", type="bigint", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="NONE")
     */
    private $refID;

    /**
     * @ORM\Column(name="date", type="datetime", nullable=false)     
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="NONE")
     */
    private $date;

    public function setRefID($refID)
    {
        $this->refID = $refID;
    }

    public function setDate(\DateTime $date)
    {
        $this->date = $date;
    }
} 
```

如果我们在实体中将它们描述为@ORM\Id，则此代码将返回异常“无法将日期时间转换为字符串”...

```
$filter = array(
    'date' => $this->stringToDate($loopData['date']), 
    'refID' => $loopData['refID']
));

$oCorpWJ = $this->em->getRepository('EveDataBundle:corpWalletJournal')->findOneBy($filter);
// ...
$oCorpWJ->setDate($this->stringToDate($loopData['date']));
// ... 
```

如果我们将其描述`corpWalletJournal#date`为一个简单的列，则代码可以正常工作。为什么？

我们该如何应对？我们需要同时拥有`date`和`refID`在主键中。

**添加：**

所以我创建了新课程

```
use \DateTime;

class DateTimeEx extends DateTime
{

public function __toString()
{
    return $this->format('Y-m-d h:i:s');
}

} 
```

和它的新类型

```
use Doctrine\DBAL\Types\Type;
use Doctrine\DBAL\Platforms\AbstractPlatform;
use Eve\DataBundle\Entity\Type\DateTimeEx;

class DateTimeEx extends Type
{
    const DateTimeEx = 'datetime_ex';

    public function getSQLDeclaration(array $fieldDeclaration, AbstractPlatform $platform)
    {
        return 'my_datetime_ex';
    }

    public function convertToPHPValue($value, AbstractPlatform $platform)
    {
        return new DateTimeEx($value);
    }

    public function convertToDatabaseValue($value, AbstractPlatform $platform)
    {
        return $value->format('Y-m-d h:i:s');
    }

    public function getName()
    {
        return self::DateTimeEx;
    }

    public function canRequireSQLConversion()
    {
        return true;
    }

} 
```

我如何在实体中使用它们？

我的（编辑的）类型类

```
 use Doctrine\DBAL\Types\Type;
use Doctrine\DBAL\Platforms\AbstractPlatform;

class DateTimeEx extends Type
{
    const DateTimeEx = 'datetime_ex';

    public function getSQLDeclaration(array $fieldDeclaration, AbstractPlatform $platform)
    {
        return 'my_datetime_ex';
    }

    public function convertToPHPValue($value, AbstractPlatform $platform)
    {
        return $value;
    }

    public function convertToDatabaseValue($value, AbstractPlatform $platform)
    {
        return $value;
    }

    public function getName()
    {
        return self::DateTimeEx;
    }

} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-26T09:33:17.390

Doctrine 2 ORM 需要将标识符字段转换为[`UnitOfWork`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/UnitOfWork.php#L1328). 这是`EntityManager`能够跟踪对象更改所必需的。

由于 type 对象`DateTime`本身并不实现 method [`__toString`](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)，因此将它们转换为字符串并不像将它们转换为字符串那么简单。

`date`因此，不支持将默认`datetime`和`time`类型[作为标识符的一部分](https://github.com/doctrine/doctrine2/issues/2433)。

要处理它，您应该定义自己的[自定义字段类型](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html#custom-mapping-types) `mydatetime`，映射到您自己的`MyDateTime`实现`__toString`. 这样，ORM 也可以处理包含对象的标识符。

这是该类的外观示例：

```
class MyDateTime extends \DateTime 
{
    public function __toString()
    {
        return $this->format('U');
    }
} 
```

下面是自定义 DBAL 类型的示例：

```
use Doctrine\DBAL\Types\DateTimeType;
use Doctrine\DBAL\Platforms\AbstractPlatform;

class MyDateTimeType extends DateTimeType
{
    public function convertToPHPValue($value, AbstractPlatform $platform)
    {
        $dateTime = parent::convertToPHPValue($value, $platform);

        if ( ! $dateTime) {
            return $dateTime;
        }

        return new MyDateTime('@' . $dateTime->format('U'));
    }

    public function requiresSQLCommentHint(AbstractPlatform $platform)
    {
        return true;
    }

    public function getName()
    {
        return 'mydatetime';
    }
} 
```

然后在引导期间将其注册到您的 ORM 配置中（取决于您使用的框架）。在 symfony 中，它记录在[symfony 学说文档](http://symfony.com/doc/current/cookbook/doctrine/dbal.html#registering-custom-mapping-types)中。

之后，您可以在您的实体中使用它：

```
class corpWalletJournal
{
    // ...

    /**
     * @ORM\Column(name="date", type="mydatetime", nullable=false)     
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="NONE")
     */
    private $date; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-26T13:25:56.730

小心

```
return new DateTimeEx('@' . $dateTime->format('U')); 
```

时区不会很好。你应该做 ：

```
$val = new DateTimeEx('@' . $dateTime->format('U'));
$val->setTimezone($dateTime->getTimezone());

return $val; 
```

# c# - 好奇如何在 Windows 窗体中获取控制台

> ID：15080575
> 
> 赞同：0
> 
> 时间：2013-02-26T02:57:39.317
> 
> 标签：c#

这是一个例子

![在此处输入图像描述](../Images/93349ef0d62f833bb23ca98b1c336b02.png)

只是好奇，我是 C# 的新手，但我决定用它来为我的 Java 游戏开发服务器只是因为我想要一个漂亮的服务器 GUI，但我开始意识到这同样容易做到摇摆...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T03:06:19.273

周末我做了一个类似的项目，我使用这个[链接](http://saezndaree.wordpress.com/2009/03/29/how-to-redirect-the-consoles-output-to-a-textbox-in-c/)将所有控制台数据转发到一个文本框。您可以使用任何类似的控件并稍作调整。

```
public class TextBoxStreamWriter : TextWriter
{
    TextBox _output = null;

    public TextBoxStreamWriter(TextBox output)
    {
        _output = output;
    }

    public override void Write(char value)
    {
        base.Write(value);
        _output.AppendText(value.ToString()); // When character data is written, append it to the text box.
    }

    public override Encoding Encoding
    {
        get { return System.Text.Encoding.UTF8; }
    }
} 
```

所有的 Write(...) 和 WriteLine(...) 都流向 Write(char)，因此这是您需要覆盖的唯一方法。

我的示例要求表单还具有公共 TextBox 属性，该属性在表单内公开私有 TextBox。

```
TextWriter consoleRedirect = new Tools.TextBoxStreamWriter(consoleForm.TxtOuputDisplay);
Console.SetOut(consoleRedirect); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T03:30:34.320

好吧，在我看到之前的评论之前，我已经写了这个。但既然我花了时间，我还是会发布它。

```
public void WriteLog(TextBox tb ,string log)
    {
        tb.AppendText(log + "\n");
    }

    private void button1_Click(object sender, EventArgs e)
    {
        WriteLog(textBox1, "[App]: This is a log string");
        WriteLog(textBox1, "[App]: Another log string");
        WriteLog(textBox1, "[App]: Yet another etc etc.");
    } 
```

其中 textBox1 是具有黑色背景和蓝色前景文本的多行文本框。上面的评论是一个更优雅的解决方案，但如果你想要快速简单的东西，这会让你得到帮助。我没有足够的代表来内联发布图像，但这就是它的样子。[http://imageshack.us/photo/my-images/198/logwindow.jpg/](http://imageshack.us/photo/my-images/198/logwindow.jpg/)

# java - 未正确绘制自定义 Java 组件

> ID：15080576
> 
> 赞同：0
> 
> 时间：2013-02-26T02:57:56.230
> 
> 标签：java, swing, graphics2d, paintcomponent, jcomponent

我有一个未正确绘制的自定义按钮。它在左上角显示为一个点。我有三个班。一个用于按钮，一个用于菜单或几个按钮的绘制和一个调用菜单的主类。

1 类 - 按钮

```
@Override
protected void paintComponent(Graphics g) {
    g.setColor(Color.white);
    Graphics2D g2d = (Graphics2D) g;
    g2d.drawImage(img, this.x, this.y,this.getWidth(), this.getHeight(), null);
    g2d.setFont(this.font);
    g2d.drawString(this.label, x, y);
} 
```

第 2 类 - 菜单

```
public void draw(Graphics g, int width, int height) {
    int x, y;       
    for(int i = 0; i < buttons.length; i++) {
        x = (int) (width / 2 - buttons[i].getWidth() / 2);
        y = (int) (height / 2 - buttons[i].getHeight() / 2);

        buttons[i].setBounds(x, y + (i*60), buttons[i].getWidth(), buttons[i].getHeight());
        buttons[i].paintComponent(g);
    }       
} 
```

第 3 类 - 主要

```
if(gMenu != null) {
                gMenu.draw(g, gWindow.getWidth(), gWindow.getHeight());
            } 
```

编辑：为了澄清我想要做的是创建一个带有一些自定义按钮（组件）的弹出菜单。

编辑：我让他们画画，但鼠标监听器不起作用。

这是菜单类

```
public class Menu extends JComponent {

GameWindow window;

public Menu(GameWindow window) {
    this.window = window;
    this.setVisible(true);
}

public void addChildToPanel(JComponent child) {
    int width = (int) getWidth();
    if(child.getWidth() > width) {
        width = child.getWidth();
    }
    int height = (int) getHeight();
    height += child.getHeight();
    setSize(width, height);

    Dimension screen = new Dimension(window.getWidth(), window.getHeight());
    int x = (screen.width - width) / 2;
    int y = (screen.height - height) / 2;
    setBounds(x, y, width, height);
}
} 
```

这里是按钮类 public class MenuButton extends JComponent implements MouseListener {

```
private BufferedImage img;
private BufferedImage img_h;
private int x, y;
private String label;
private Font font;

private int state = 0;

// state 0 = normal
// state 1 = highlight
// state 2 = pressed

public MenuButton(BufferedImage img, BufferedImage img_h, String label, Font font) {
    this.setPreferredSize(new Dimension(img.getWidth(), img.getHeight()));
    this.img_h = img_h;
    this.img = img;
    this.label = label;
    this.font = font;
    setVisible(true);

    setBounds(0, 0, img.getWidth(), img.getHeight());
    this.addMouseListener(this);
}

@Override
protected void paintComponent(Graphics g) {
    g.setColor(Color.white);
    Graphics2D g2d = (Graphics2D) g;
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

    switch (state) {
    case 0:
        g2d.drawImage(img, this.getBounds().x, this.getBounds().y,this.getWidth(), this.getHeight(), null);
        break;
    case 1:
        g2d.drawImage(img_h, this.getBounds().x, this.getBounds().y,this.getWidth(), this.getHeight(), null);
        break;
    case 2:
        g2d.drawImage(img, this.x, this.y,this.getWidth(), this.getHeight(), null);
        break;
    }

    g2d.setFont(this.font);

    int size = g2d.getFontMetrics(font).stringWidth(this.label);
    int x = this.getBounds().x + this.getWidth() - 20 - size;
    int y = this.getBounds().y + 29;

    g2d.drawString(this.label,x, y);
}

public void setState(int state) {
    this.state = state;
}

@Override
public void mouseClicked(MouseEvent e) {
}

@Override
public void mouseEntered(MouseEvent e) {
    setState(1);
}

@Override
public void mouseExited(MouseEvent e) {
    setState(0);
}

@Override
public void mousePressed(MouseEvent e) {
    setState(2);
}

@Override
public void mouseReleased(MouseEvent e) {
    setState(1);
}

} 
```

我在公共类 PauseMenu 上调用的子类扩展 Menu {

```
private int width;
private int height;

private MenuButton[] buttons = new MenuButton[4];

public PauseMenu(GameWindow window) {
    super(window);
    Font font = null;
    BufferedImage img = null;
    BufferedImage img_h = null;
    try {
        InputStream is = getClass().getResourceAsStream("/fonts/ALDOPC.ttf");
        font = Font.createFont(Font.TRUETYPE_FONT, is).deriveFont(Font.PLAIN, 24f);
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        ge.registerFont(font);

        img = ImageIO.read(getClass().getResourceAsStream("/gui/bg_menu_button_round.png"));
        img_h = ImageIO.read(getClass().getResourceAsStream("/gui/bg_menu_button_round_highlight.png"));
    }
    catch(Exception e)
    {
        System.out.print("Failed to load resources");
        System.out.println();
    }

    MenuButton resume = new MenuButton(img, img_h, "CONTINUE", font);
    final MenuButton quit = new MenuButton(img, img_h, "QUIT", font);
    MenuButton vid = new MenuButton(img, img_h, "VIDEO", font);
    MenuButton sound = new MenuButton(img, img_h, "SOUND", font);

    buttons[0] = resume;
    buttons[1] = vid;
    buttons[2] = sound;
    buttons[3] = quit;

    for(int i = 0; i < buttons.length; i++) {
        int x = (window.getWidth() - img.getWidth()) / 2;
        int y = (window.getHeight() - img.getHeight()) / 2;
        buttons[i].setBounds(x, y + (i * img.getHeight()), img.getWidth(), img.getHeight());
        this.addChildToPanel(buttons[i]);
    }
}

public void draw(Graphics g) {
    for(int i = 0; i < buttons.length; i++)
        buttons[i].paintComponent(g);
}
} 
```

# php - ReCaptcha 和 php_self

> ID：15080583
> 
> 赞同：1
> 
> 时间：2013-02-26T02:59:01.157
> 
> 标签：php, forms, recaptcha

我有一个很好的表单设置。我正在尝试向其中添加recaptcha，但由于我的表单将其发布到php_self，因此不确定将服务器端验证放在哪里。代码以防万一：

```
 <form id='register' action='<?php echo $fgmembersite->GetSelfScript(); ?>' method='post' accept-charset='UTF-8'> 
```

在这里

```
function GetSelfScript()
{
    return htmlentities($_SERVER['PHP_SELF']);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:44:58.170

当`PHP_SELF`包含在 PHP 文件中时，该文件指向自身。例如，在 中`/file.php`，`$_SERVER['PHP_SELF']`指的是`/file.php`。因此，您应该将 reCAPTCHA 验证添加到包含`PHP_SELF`引用的任何文件。

# android - Android：Python：AndroidViewClient Noob 麻烦

> ID：15080584
> 
> 赞同：0
> 
> 时间：2013-02-26T02:59:03.637
> 
> 标签：android, python, view, androidviewclient

这是我当前项目的联盟屏幕：

![行动联盟](../Images/528b8b3f8776db8a2164a7e53f70edcc.png)

..这是使用monkeyrunner dump.py的视图读数：

```
android.widget.FrameLayout id/no_id/1
   android.widget.LinearLayout id/no_id/2
      android.widget.FrameLayout id/no_id/3
         android.view.View id/no_id/4
            android.widget.FrameLayout id/no_id/5
               android.widget.ImageView id/no_id/6
               android.widget.ImageView id/no_id/7
            android.widget.LinearLayout id/no_id/8
               android.widget.LinearLayout id/no_id/9
                  android.widget.TextView id/no_id/10 Alliances
            android.widget.LinearLayout id/no_id/11
               android.widget.TextView id/no_id/12
               android.widget.TextView id/no_id/13
      android.widget.FrameLayout id/no_id/14
         android.widget.TableLayout id/no_id/15
            android.widget.TableRow id/no_id/16
               android.widget.TextView id/no_id/17 Sector: NULL SECTOR
            android.widget.TableRow id/no_id/18
               android.widget.TextView id/no_id/19 Number of Alliances:
               android.widget.TextView id/no_id/20 1
            android.widget.TableRow id/no_id/21
               android.widget.TextView id/no_id/22 Row  Name  Power
            android.widget.TableRow id/no_id/23
               android.widget.ListView id/no_id/24
                  android.widget.RelativeLayout id/no_id/25
                     android.widget.TextView id/no_id/26 1
                     android.widget.TextView id/no_id/27 NULL ALLIANCE
                     android.widget.TextView id/no_id/28 Neutral
                     android.widget.TextView id/no_id/29 10000 
```

我的 avc_addallc.py 中的以下行按下了 ActionBar 中的 New ('+') 按钮：

```
add = vc.findViewById('id/no_id/12').touch() 
```

...然后打开 AddAlliance 对话框：

![添加联盟对话框](../Images/5992f9d7c97afdbb771195392c35391f.png)

...具有以下视图读数：

```
 android.widget.FrameLayout id/no_id/1
   android.widget.FrameLayout id/no_id/2
      android.widget.FrameLayout id/no_id/3
         android.widget.LinearLayout id/no_id/4
            android.widget.LinearLayout id/no_id/5
               android.widget.LinearLayout id/no_id/6
                  android.widget.TextView id/no_id/7 New Alliance
               android.view.View id/no_id/8
            android.widget.FrameLayout id/no_id/9
               android.widget.FrameLayout id/no_id/10
                  android.widget.ScrollView id/no_id/11
                     android.widget.RelativeLayout id/no_id/12
                        android.widget.TextView id/no_id/13 Sector: Helix
                        android.widget.TextView id/no_id/14 Alliance:
                        android.widget.EditText id/no_id/15 Alliance_Name
                        android.widget.TextView id/no_id/16 Leader:
                        android.widget.EditText id/no_id/17 Leader
                        android.widget.TextView id/no_id/18 Political Relation:
                        android.widget.Spinner id/no_id/19
                           android.widget.TextView id/no_id/20 Ally
                        android.widget.TextView id/no_id/21 Rank:   Power:
                        android.widget.EditText id/no_id/22 2500
                        android.widget.EditText id/no_id/23 1234567
                        android.widget.TextView id/no_id/24 No. Players:     Map Score:
                        android.widget.EditText id/no_id/25 100
                        android.widget.EditText id/no_id/26 123456789
                        android.widget.TextView id/no_id/27 No. Bases
                        android.widget.EditText id/no_id/28 8000
            android.widget.LinearLayout id/no_id/29
               android.widget.LinearLayout id/no_id/30
                  android.widget.Button id/no_id/31 Cancel
                  android.widget.Button id/no_id/32 Save 
```

我的 avc_addallc.py 中的下一行应该在第一个 EditText (Alliance_Name) 中放置文本：

```
etAllc = vc.findViewById('id/no_id/15').type('Legion of Anarchy') 
```

它什么也不做，但返回此错误：

```
130225 21:31:13.023:I [MainThread] [com.android.chimpchat.ChimpManager] Monkey Command: touch down 354 74.
130225 21:31:13.107:I [MainThread] [com.android.chimpchat.ChimpManager] Monkey Command: touch up 364 84.
130225 21:31:16.223:S [MainThread] [com.android.monkeyrunner.MonkeyRunnerOptions] Script terminated due to an exception
130225 21:31:16.223:S [MainThread] [com.android.monkeyrunner.MonkeyRunnerOptions]Traceback (most recent call last):
    File "c:\code\avc_addallc.py", line 44, in <module>
        etAllc = vc.findViewById('id/no_id/15').type('Legion of Anarchy')
    File "C:\adt-bundle-windows-x86\AndroidViewClient\src\com\dtmilano\android\viewclient.py", line 275, in __getattr__
        raise AttributeError, name
        AttributeError: type 
```

我哪里错了？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:43:50.860

首先，验证您使用的是[AndroidViewClient](https://github.com/dtmilano/AndroidViewClient) >= **2.3.8**。在以前的版本中，您必须以不同的方式发送带有空格的字符串。

然后，分割线

```
etAllc = vc.findViewById('id/no_id/15').type('Legion of Anarchy') 
```

进入

```
etAllc = vc.findViewByIdOrRaise('id/no_id/15')
etAllc.type('Legion of Anarchy') 
```

我想这是你的意图。否则，`etAllc`将永远`None`。

# facebook - 使沙盒模式下的 Facebook 应用程序可访问公司页面

> ID：15080588
> 
> 赞同：1
> 
> 时间：2013-02-26T02:59:27.340
> 
> 标签：facebook, facebook-graph-api, real-time

我有一个可能是晦涩难懂的场景，但无论如何这里是：

1) 我的总体目标是将我公司 Facebook 页面的 Facebook 更新流式传输到 Hadoop 2) 我知道如何为我的 FB 页面执行此操作：a) 需要 FB 应用程序 b) FB 实时订阅 c) 页面的回调 URL接收 GET/POST d) 一个 Flume HttpSource 从 FB 接收 Http Post

对于我的个人 FB 页面，所有这些都已成功完成。挑战是我希望我公司的页面添加应用程序，以便我可以将更新从他们的页面流式传输到我公司的 Hadoop 环境。我的营销部门想要捕获与页面关注者的交互以进行情绪分析。最后，我想在沙盒模式下使用我的 FB 应用程序。

是否可以在沙盒模式下拥有一个 FB 应用程序，并且它仍然对我公司的 FB 页面可见，以便页面管理员可以进入并添加我创建的仍处于沙盒模式的应用程序？

我尝试将公司添加为测试用户，这并不奇怪尝试失败。是否有我可以设置为测试用户的公司页面的代理用户？

# html - 想要在 IFrame 中下载内容的 IE

> ID：15080593
> 
> 赞同：0
> 
> 时间：2013-02-26T02:59:43.230
> 
> 标签：html, iframe, video, motion

我在让它工作时遇到问题，我希望有人能给我解决方案。下面的代码应该显示一个实时视频，`IFrame`因为您可以看到它从我的服务器上的一个开放端口拉视频。

这在 Chrome 和 Safari 中效果很好，但在 IE 中它要求下载视频。为什么要这样做？我怎样才能解决这个问题？

该视频正在从我的网络摄像头直播，该摄像头使用`Motion`. 我不确定它创建的视频类型我认为它可能是 MotionJPEG 但我可能是错的。

此外，如果我尝试在移动平台上查看它，它不起作用，它会在 Chrome 移动设备和 Safari 移动设备中不断吐出大量垃圾，它只会显示图片的一帧。有没有办法让它在移动设备上工作？

**更新**：在他们的网站上进行研究后，我发现它使用了它`multipart/x-mixed-replace`，经过一番挖掘，它说 IE 不支持这一点。有解决办法吗？

代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
  <head>
    <script type='text/javascript' src='script.js'></script>
    <title>Testing</title>
  </head>
  <body>
    <input type='button' onclick='MakeRequest();' value='Press to see something cool'/>
    <div id='ResponseDiv'>
    </div>

    <iframe id="video" src="http://192.168.0.11:8081" height="120" width="160"></iframe>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:46:10.457

IE 不支持 MotionJPEG 格式，因此您最好的选择是使用查看器（例如 Cambozola - 根据这些说明[http://www.lavrsen.dk/foswiki/bin/view/Motion/WebcamServer](http://www.lavrsen.dk/foswiki/bin/view/Motion/WebcamServer)）或者如果您是感觉更冒险，您可以让 MPlayer 或 Vlan 即时从 mjpeg 转换为 mp4，然后您可以更轻松地在多个平台上使用流

# md5 - 将 java 转换为 perl (md5)

> ID：15080595
> 
> 赞同：0
> 
> 时间：2013-02-26T02:59:55.033
> 
> 标签：md5

我正在尝试将 java 转换为 perl (md5) 程序。我该如何做以下两个程序相同的输出 MD5 总和。

爪哇

```
import java.security.MessageDigest;
import java.math.BigInteger; 

public class Hash 
{ 
   public static void main( String[] args ) throws Exception 
   { 
       MessageDigest md5    = MessageDigest.getInstance("MD5");
       String        plain  = "abcd1234"; 
       BigInteger    digest = new BigInteger(md5.digest(plain.getBytes("UTF-8"))); 
       System.out.println( digest.abs() ); 
   } 
} 
```

Perl

```
use Digest::MD5 'md5_hex'; 
use Math::BigInt; 

my $plain  = "abcd1234"; 
my $digest = Math::BigInt::->from_hex(md5_hex $plain); 
print $digest, "\n"; 
```

我认为，

爪哇：

```
BigInteger digest = new BigInteger(md5.digest(plain.getBytes("UTF-8"))); 
```

珀尔：

```
my $digest = Math::BigInt::->from_hex(md5_hex $plain); 
```

这是不同的输出 MD5 和。我想编辑 perl 源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:06:12.923

您的`BigInteger()`调用需要一个包含数字的二进制补码表示的字节数组。您需要使用符号幅度构造函数：

```
public BigInteger(int signum, byte[] magnitude) 
```

因此，您的 Java 代码应该是：

```
import java.security.MessageDigest;
import java.math.BigInteger; 

public class Hash 
{ 
    public static void main(String[] args) throws Exception 
    { 
        MessageDigest md5 = MessageDigest.getInstance("MD5");
        String plain = "abcd1234"; 
        BigInteger digest = new BigInteger(1, md5.digest(plain.getBytes("UTF-8"))); 
        System.out.println(digest.abs()); 
    } 
} 
```

你的 Perl 代码也不太适合我。我的版本`Math::BigInt`需要十六进制值的字符串表示形式，如下所示：

```
use Digest::MD5 'md5_hex'; 
use Math::BigInt; 

my $plain = "abcd1234"; 
my $digest = Math::BigInt::->from_hex('0x' . md5_hex($plain)); 
print $digest, "\n"; 
```

当我运行这两个命令时，会显示相同的摘要值。

# windows-phone-8 - GetGeopositionAsync 不返回

> ID：15080600
> 
> 赞同：15
> 
> 时间：2013-02-26T03:00:33.417
> 
> 标签：windows-phone-8

在我的 Windows Phone 8 应用程序中，我尝试在主页上使用 GetGeopositionAsync 来根据用户位置显示一些项目。

调用 GetGeopositionAsync 不会在指定的超时时间内返回，它根本不会返回。

我使用的代码很简单：

```
 Geolocator geolocator = new Geolocator();
            geolocator.DesiredAccuracyInMeters = 50;

            Geoposition geoposition = null;
            try
            {
                geoposition = await geolocator.GetGeopositionAsync(
                    maximumAge: TimeSpan.FromMinutes(5),
                    timeout: TimeSpan.FromSeconds(10));
            }
            catch (UnauthorizedAccessException ex)
           {

                // location services disabled or other error
                // user should setup his location

            } 
```

我能够找到的解决方案是为 GeoCoordinateWatcher 创建一个异步包装器，它似乎工作正常。但我对我的解决方案不太有信心，我更喜欢使用 GetGeopositionAsync，这看起来像是在 WP8 中获取设备位置的推荐方法。

更新：其他人报告相同的行为： [http ://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/ff166fac-b423-4428-abd8-610bf0102fc0](http://social.msdn.microsoft.com/forums/en-us/wpdevelop/thread/ff166fac-b423-4428-abd8-610bf0102fc0)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-14T17:07:33.307

你什么时候调用该方法来请求地理位置？当我在 ViewModel 中调用构造函数的一部分时，我发现我遇到了同样的问题。

我可以通过添加 OnLoadedCommand 并从那里调用方法来解决我的代码中的问题。从那以后我再也没有问题了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T06:25:08.897

这很奇怪，但 GetGeoPositionAsync 仅在使用 MovementThreshold 和/或 ReportInterval 初始化 Geolocator 时返回当前位置。

```
Geolocator geolocator = new Geolocator();
geolocator.DesiredAccuracyInMeters = 50;
geolocator.MovementThreshold = 5;
geolocator.ReportInterval = 500;

Geoposition geoposition = null;
try
{
    geoposition = await geolocator.GetGeopositionAsync(
        maximumAge: TimeSpan.FromMinutes(5),
        timeout: TimeSpan.FromSeconds(10));
}
catch (UnauthorizedAccessException ex)
{
    // location services disabled or other error
    // user should setup his location
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-02T00:07:32.830

我在设备上测试时遇到了这个问题。我必须禁用设备上的 WiFi 才能使其正常工作。我知道有些人在模拟器上工作时遇到了相反的问题。我不必做任何包装。希望能帮助到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-10T10:27:23.007

我发现了一件事。如果我将精度设置为更大，则地理定位器开始返回坐标。所以它不适用于 50 米，但适用于 500 米，因此请尝试使用下面的线。

```
 geolocator.DesiredAccuracyInMeters = 500; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-27T02:30:08.750

我发现如果您在本地创建地理定位器，该任务最终将被取消。当我创建一个永久的 Geolocator 实例时它可以工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-06T17:24:47.830

这种奇怪的行为发生`geolocator`在`NotInitialized`调用`GetGeopositionAsync()`.

`geolocator`仅在`Ready`两种情况下。一，当它订阅一个`PositionChanged`事件时。二，当 a`GetGeopositionAsync()`已经被调用时。

因此，您只需`geolocator`在`positionChanged`调用`GetGeopositionAsync()`.

希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-07T02:45:30.970

好吧，看起来每个人都被砍掉了，直到它起作用了……这对我有用：

```
/// <summary>
/// HACK: For some reason Geolocator.GetGeopositionAsync hangs indefinitely.
/// The workaround is to add a PositionChanged handler.
/// </summary>
private Geoposition GetGeoposition()
{
    var geolocator = new Geolocator();
    var semaphoreHeldUntilPositionReady = new SemaphoreSlim(initialCount: 0);
    Geoposition position = null;

    geolocator.ReportInterval = 1000;
    geolocator.PositionChanged += (sender, args) =>
    {
        position = args.Position;
        semaphoreHeldUntilPositionReady.Release();
    };

    semaphoreHeldUntilPositionReady.Wait();
    return position;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-10T13:23:47.670

请参阅我的示例： [http ://code.msdn.microsoft.com/windowsapps/How-to-use-Cimbalino-3888977e](http://code.msdn.microsoft.com/windowsapps/How-to-use-Cimbalino-3888977e)

它使用 MVVM 和 Cimbalino 工具包！

就我而言，我设置 ReportInterval = 5 来解决这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-11T02:25:21.550

我在上面遇到了一些相同的问题。当我连接到 geolocator.StatusChanged 事件时，我注意到事件序列是：

1.  StatusChanged -> 正在初始化
2.  我的等待电话
3.  状态已更改 -> 就绪

所以我在 await 调用之前添加了一个循环：

```
 while (geolocator.LocationStatus == PositionStatus.Initializing)
  {
      System.Threading.Thread.Sleep(100);
  } 
```

这是不优雅的，但确实有效。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-12-20T14:01:51.543

我知道这有点老了，但我希望其他搜索这个主题的人觉得这个答案有帮助。

在尝试访问位置服务之前，请务必征得用户的同意。

我遇到了这个问题，但通过在打开页面时调用 OnNavigatedTo 事件来解决它以获得他们的同意。

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    if (IsolatedStorageSettings.ApplicationSettings.Contains("LocationConsent"))
    {
        // User has opted in or out of Location
        return;
    }
    else
    {
        MessageBoxResult result = 
            MessageBox.Show("This app accesses your phone's location. Is that ok?", 
            "Location",
            MessageBoxButton.OKCancel);

        if (result == MessageBoxResult.OK)
        {
            IsolatedStorageSettings.ApplicationSettings["LocationConsent"] = true;
        }else
        {
            IsolatedStorageSettings.ApplicationSettings["LocationConsent"] = false;
        }

        IsolatedStorageSettings.ApplicationSettings.Save();
    }
} 
```

# c - 将不同的数据类型转换为char？在 c

> ID：15080601
> 
> 赞同：0
> 
> 时间：2013-02-26T03:00:36.233
> 
> 标签：c, casting

我有一堆不同的数据类型我想传递给 char 但是当我使用通常的格式来传递整数时：

```
 char number=(char)one; 
```

它仅适用于整数。对于其他数据类型，当我想要字符串表示时，它会给我数值。最简单的方法是什么？PS请彻底解释答案，因为当我尝试以这种方式投射时，我也遇到了指针大小问题。请只使用c语法谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:08:42.830

如果您正在寻找数据类型的字符串表示形式，我认为您想要的是[sprintf](http://linux.die.net/man/3/printf)函数。例如，对于浮点类型，您可以这样做：

```
float example = 3.6;
char temp[64]; // Allocate a string of size 64.
sprintf(temp, "%f", example); 
```

这将存储`example`in temp 的字符串表示形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:13:36.273

A`char`是整数类型，这意味着它可以转换为整数（小于`256`）。

> 对于其他数据类型，当我想要字符串表示时，它会给我数值。

从技术上讲，字符串不是`char`. 它是一个`char`数组，因此最终会衰减为一个指针。

对于每种类型，您都必须创建自己`toString()`的函数类型，并相应地返回格式化字符串。

最简单的方法：使用`sprintf()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:21:33.703

让我们一次一个字地复习这一行，以使概念正确。

```
char number=(char)one; 
```

*   第一个`char`是声明，这意味着我正在创建一个类型为 的变量`char`。 `char`是一个 1 字节（8 位）的数据类型，通常用于保存单个字符，但本质上它是一个字节；因此，它可以保存从 0x00（又名 0）到 0xFF（又名 255）的值。

*   `number`是类型变量的名称`char`

*   `=`是赋值运算符；你要设置的值`number`

*   `(char)`意思是“无论我后面的变量是什么类型，都将其解释为`char`”。这称为“投射到`char`”。（*不是*“传递给 char”）。

*   从您的代码中，我无法判断是什么`one`。但是，如果它是除 a`char`或 0 到 255 之间的整数之外的任何值，则分配没有意义。

总结是这`number`只是一个字符，它将保存一个字节的值，如果你给它分配别的东西，你可能会得到不希望的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T03:31:01.540

也许你在追求这样的事情：

```
char number = '0' + one; 
```

这适用于 one = [0, 9]

# security - 测试 Flash 8 应用程序中的安全设置问题

> ID：15080604
> 
> 赞同：0
> 
> 时间：2013-02-26T03:00:58.027
> 
> 标签：security, flash

我设计了一个多测验应用程序，它需要与远程（免费）服务器中的 php 文件通信，当尝试运行它（swf 文件）时，弹出窗口要求我设置安全设置并将我带到 Adob​​e 页面[http:// www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04a.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04a.html) 阅读后，我将我的 swf 文件的路径放在受信任的框中，然后刷新应用程序，但弹出消息相同！！！， 为什么？。我的应用程序是使用 Windows XP 中的 Macromedia Flash Professional 8 设计的。当我从 Macromedia Flash 8 运行代码时，没问题。

:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T06:09:30.917

我自动解决了我自己的问题，呵呵，我去控制面板---> Flash Player并添加了相应的文件，一切正常。我已经发布了我的 flash html 文件。顺便说一句，如果你想在谷歌网站上这样做，我认为闪存显然不允许与 php 文件通信，谷歌政策。

# c - 如何使用 makefile 来测试我的 shell 实现？

> ID：15080605
> 
> 赞同：0
> 
> 时间：2013-02-26T03:00:48.547
> 
> 标签：c, shell, testing, makefile

这是我当前的makefile，它没有正确运行测试：

```
shell2: shell2.o
shell2.o: shell2.c

clean:    
        rm -f *.o 

test: shell2
        ./shell2 
        pwd 
        ./shell2
        cd ..
        ./shell2
        jobs
        ./shell2
        sleep 100 &
        jobs
        ./shell2
        exit 
```

我的程序测试换行符以了解何时输入了命令。这是我自己手动编译程序时的输出：

```
$ pwd
/students/8/[redacted]/[redacted]/Shell2
$ cd ..
$ jobs
Jobs:
$ sleep 1000 &
To the background: 20203
$ jobs
Jobs:
20203
$ jobs
Jobs:
20203
$ killall sleep
sleep(17014): Operation not permitted
sleep(17305): Operation not permitted
sleep(17433): Operation not permitted
sleep(19741): Operation not permitted
sleep(19841): Operation not permitted
sleep(20041): Operation not permitted
sleep(20183): Operation not permitted
$ jobs
Jobs:
$ exit
now exiting... 
```

这是我运行 make test 时的输出：

```
make test
./shell2 
$ pwd
/students/8/[redacted]/[redacted]/Shell2
./shell2
$ cd ..
./shell2
$ jobs
make: jobs: Command not found
make: *** [test] Error 127 
```

此外，我每次都必须按 ctrl+D 才能在 make 测试期间执行新行。

我正在尝试为我的班级编写这个makefile，以便我可以提交我的作业，除了基本的./a.out [输入命令]之外，我的教授根本没有解释如何使用makefile

他从未解释过如何在程序像 shell 一样在连续循环上运行的情况下使用 makefile，等待用户按 [enter] 或换行以解析命令。

我检查了 GNU man for make 但它在“测试”部分没有解释太多。

谢谢你的帮助，我真的很感激。

**test_input.txt 的输出：**

```
./shell2 < test_input.txt
"Sending command: pwd"
/students/8/[redacted]/[redacted]/Shell2
"Sending command: cd .."
"Sending command: pwd"
/students/8/[redacted]/[redacted]
"Sending command: jobs"
$ $ $ $ $ $ $ $ Jobs:
$ 
"Sending command: sleep 1000 &"
$ $ To the background: 27199
"jobs"
$ $ Jobs:
27199
$ 
"Sending command: killall sleep"
$ $ $ $ Jobs:
"Sending command: jobs"
$ $ now exiting...
"exit" 
```

**test_input.txt：**

```
echo "Sending command: pwd"
pwd
echo "Sending command: cd .."
cd ..
echo "Sending command: pwd"
pwd
echo "Sending command: jobs"
jobs

echo "Sending command: sleep 1000 &"
sleep 1000 &
echo "jobs"
jobs

echo "Sending command: killall sleep"
killall sleep
echo "Sending command: jobs"
jobs
echo "exit"
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:06:04.140

看起来您正在尝试为您的程序提供输入。您不能使用 make （直接）执行此操作，因为 make 只需使用`/bin/sh -c COMMAND`.

你能做的是

```
test: shell2
    ./shell2 < test_input.txt 
```

将输入重定向到文件`test_input.txt`，该文件将包含您想要的命令。

# node.js - 猫鼬 findOneAndUpdate 并发

> ID：15080606
> 
> 赞同：0
> 
> 时间：2013-02-26T03:00:50.670
> 
> 标签：node.js, mongoose

我想使用

```
findAndUpdate 
```

mongo中的方法来生成一个序列。只要 mongodb/mongoose 只允许每个表/集合一次执行一个查询，这就可以正常工作。

# javascript - 路径 STRING 中的 Ember 对象找不到或已被破坏

> ID：15080607
> 
> 赞同：0
> 
> 时间：2013-02-26T03:01:12.620
> 
> 标签：javascript, ember.js

我有一个小型应用程序，我在其中获取语言环境的翻译 json 并更新 Ember.STRINGS。难道我做错了什么？

```
$.get("http://localhost:8000/translations.json", {locale : locale}, function (data) {
    Ember.set('STRINGS', data) ;
}); 
```

在 0.9.5 我在做

> ```
> Ember.STRINGS = data 
> ```

; 它似乎奏效了。当我将其更改为 1.0.0 时，很多事情开始崩溃。这两个都不行。

> ```
> Ember.STRINGS = data ;
> Ember.set('STRINGS', data) ; 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:52:41.517

这是我如何使其在 v1.0.0-rc.1 中工作的示例：

```
$.getJSON('mysql.php', { action: 'translate', lang_id: 2 }, function(data){
    var translation = {};
    $.each(data, function() {
        translation[this[0]] = this[1];
    })
    Ember.STRINGS = translation;
}) 
```

希望这可以帮助...

# windows - 使批处理文件将单词分隔到不同的行

> ID：15080608
> 
> 赞同：1
> 
> 时间：2013-02-26T03:01:26.780
> 
> 标签：windows, batch-file

我需要创建一个批处理文件来获取输入并将不同行中的内容分离到一个文件中。

例如：

```
Apple Banana Orange 
```

并使文件看起来像：

```
Apple
Banana
Orange 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:26:12.553

您可以根据以下内容创建一个脚本来请求输入并将不同的项目写入文件`result.txt`

```
@echo off
set /p fruit=Give input:

for %%f in (%fruit%) do (
  echo %%f >> result.txt
) 
```

如果`result.txt`已经存在，它会将新项目附加到现有文件中。如果您不希望这样做，则只需`result.txt`在脚本开头删除即可。

您可以手动输入输入，也可以使用类似的方式从文件中获取输入`fruit.bat < input.txt`

# jquery - Chrome 中的 CSS 右边框

> ID：15080610
> 
> 赞同：4
> 
> 时间：2013-02-26T03:01:59.967
> 
> 标签：jquery, html, css

我有以下代码，并且出于某种原因，在上一个版本的 chrome 中，仅当您突出显示右侧的列时，右边框才不会消失。只需复制代码，您就会看到。谢谢你。

```
<DOCTYPE! html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Highlighting</title>
<style type="text/css">
body {
background-color: rgba(0,0,0,1);
}
#decor-table {
  font-family: Calibri, "Times New Roman", Arial;
  font-size: 13px;
  text-align: left;
  border-collapse: collapse;
}
#decor-table th {
  font-size: 14px;
  padding: 10px 10px;
  color: rgba(153,153,153,1);
  text-transform: uppercase;
}
#decor-table td {
  padding: 3px 10px;
  color: #369;
  vertical-align: middle;
}
#oce-first {
  font-weight: bold !important;
  background-color: rgba(204,204,204,0.2);
  border-bottom: 1px solid rgba(204,204,204,0.5);
}
.hover_class {
  color: rgba(225,225,225,1) !important;
  background: rgba(204,204,204,0.2);
  border-left: 1px solid rgba(204,204,204,0.5);
  border-right: 1px solid rgba(204,204,204,0.5);

}
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function()
  {
  var cellClassName = false;
  $("td, th").hover
  (
      function()
      {
          cellClassName = $(this).attr("class");
          $("." + cellClassName).addClass("hover_class");
      },
      function()
      {
          $("." + cellClassName).removeClass("hover_class");
      }
  );
  });
</script>
</head>
<body>
<table width="900px" id="decor-table">
  <thead>
    <tr id="oce-first">
      <th width="17%" class="col1">test</th>
      <th width="18%" class="col2">test</th>
      <th width="13%" class="col3">test</th>
      <th width="11%" class="col4">test</th>
      <th class="col5">test</th>
      <th width="16%" class="col6">test</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="col1">test</td>
      <td class="col2">test</td>
      <td class="col3">test</td>
      <td class="col4">test</td>
      <td class="col5">test</td>
      <td class="col6">test</td>
    </tr>
    <tr>
      <td class="col1">test</td>
      <td class="col2">test</td>
      <td class="col3">test</td>
      <td class="col4">test</td>
      <td class="col5">test</td>
      <td class="col6">test</td>
    </tr>
    <tr>
      <td class="col1">test</td>
      <td class="col2">test</td>
      <td class="col3">test</td>
      <td class="col4">test</td>
      <td class="col5">test</td>
      <td class="col6">test</td>
    </tr>
    <tr>
      <td class="col1">test</td>
      <td class="col2">test</td>
      <td class="col3">test</td>
      <td class="col4">test</td>
      <td class="col5">test</td>
      <td class="col6">test</td>
    </tr>
    <tr>
      <td class="col1">test</td>
      <td class="col2">test</td>
      <td class="col3">test</td>
      <td class="col4">test</td>
      <td class="col5">test</td>
      <td class="col6">test</td>
    </tr>
    <tr>
      <td class="col1">test</td>
      <td class="col2">test</td>
      <td class="col3"></td>
      <td class="col4"></td>
      <td class="col5">test</td>
      <td class="col6"></td>
    </tr>
    <tr>
      <td class="col1">test</td>
      <td class="col2"></td>
      <td class="col3"></td>
      <td class="col4"></td>
      <td class="col5">test</td>
      <td class="col6"></td>
    </tr>
    <tr>
      <td class="col1"></td>
      <td class="col2"></td>
      <td class="col3"></td>
      <td class="col4"></td>
      <td class="col5">test</td>
      <td class="col6"></td>
    </tr>
  </tbody>
</table>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:11:56.353

众所周知`Chrome artifacts`

`**[LIVE DEMO](http://jsbin.com/iluqif/4/edit)**`

```
.hover_class {
  color: rgba(225,225,225,1) !important;  
  background-color: rgba(204,204,204,0.2);
  border-left: 1px solid rgba(204,204,204,0.5);
  border-right: 1px solid rgba(204,204,204,0.5);

  -webkit-transform: translate3d(0,0,0);    /* THIS WILL FIX IT */
} 
```

使用`%`（默认情况下，表格单元格在 中`%`）Chrome 玩起来很聪明，并使用某种`half-pixel-precision`，这会导致像素移动到下一个留下被称为“工件”的痕迹，因此您需要某种骇人听闻的“重绘”。

如果您使用严格的 PX 数学定位，您还将摆脱“问题”
此外，您可以使用`box-shadow`98% 摆脱这种不友好的线条。

如果我是你，我会在初始状态上使用透明边框，所以不会看到任何跳跃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:17:54.430

**[更新了演示](http://jsfiddle.net/r4Res/2/embedded/result/)**

我认为问题出在您的问题上，`table width`因为您为它们提供了`px`价值并以 % 给出了 th，所以我已完全更改为 %，如图所示

```
<tr id="oce-first">
  <th width="20%" class="col1">test</th>
  <th width="20%" class="col2">test</th>
  <th width="20%" class="col3">test</th>
  <th width="14%" class="col4">test</th>
  <th width="16%" class="col5">test</th>
  <th width="10%" class="col6">test</th>
</tr> 
```

# php - 试图理解为什么 Laravel 的许多静态方法不被认为是不好的做法

> ID：15080612
> 
> 赞同：11
> 
> 时间：2013-02-26T03:02:06.567
> 
> 标签：php, laravel

我很困惑。

我在 Reddit 上请了几位开发人员审查我的代码。它看起来像这样。

```
Template::load('register', array('error_message' => Language::translate('username_in_use')); 
```

所以它加载 register.php，用翻译替换 {error_message}。（对不起，这个用户名正在使用中。请选择另一个。）

他们说使用过多的静态调用是一种不好的做法。然而他们建议使用 Laravel 框架，它完全摆脱了 $this 并使用静态调用。

有人可以解释一下，如果这是一种不好的做法，Laravel 是一个优雅的框架，那是怎么回事？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-26T04:05:01.850

静态状态无处不在，并且完全破坏了可测试性，因为您不能只重置状态。此外，任何事情都可能以代码的其他方面无法预测的方式影响状态，从而导致发生不可预测的行为的可能性。

Laravel 4 通过使用静态“外观”来防止这种情况。这些外观是“IoC 解析的语法简写”。它们既提供语法糖，又防止紧密耦合的代码。

可以更改由外观解析的类，并允许您注入模拟系统或任何您想要的。

当然，这并不能真正解决静态访问的另一个方面。那就是你不能只注入不同的功能。但是，对于 Laravel 应用程序，您通常不会在您的域中使用外观。它更适用于 Web 传输层，它非常有用，因为 Web 传输层已经与您的框架紧密耦合，这只是通过为您的应用程序的该层创建类似于 DSL 的东西来充分利用这一事实。

我再说一遍，请考虑不要在你的领域层深处使用外观。

# mysql - 加速查询：ORDER BY with LIMIT（索引？）

> ID：15080613
> 
> 赞同：1
> 
> 时间：2013-02-26T03:02:08.357
> 
> 标签：mysql, performance, perl, sorting

我试图从基因表中找到最接近的基因，给定位置信息。这是一个例子：

> `SELECT chrom, txStart, txEnd, name2, strand FROM wgEncodeGencodeCompV12 WHERE chrom = 'chr1' AND txStart < 713885 AND strand = '+' ORDER BY txStart DESC LIMIT 1;`

我的测试运行非常缓慢，这是有问题的。

这是`EXPLAIN`带有默认索引的输出（按`chrom`）：

> `| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |`
> `| 1 | SIMPLE | wgEncodeGencodeCompV12 | ref | chrom | chrom | 257 | const | 15843 | Using where; Using filesort |`

使用了 Filesort 并且可能导致所有缓慢？

`(chrom, txStart, strand)`我尝试通过 indexing或单独来加快排序`txStart`，但它只会变慢（？）。我的理由是，`txStart`它的选择性不足以成为一个好的索引，而在这种情况下，全表扫描实际上更快？

这是`EXPLAIN`带有附加索引的输出：

> `| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |`
> `| 1 | SIMPLE | wgEncodeGencodeCompV12 | range | chrom,closest_gene_lookup | closest_gene_lookup | 261 | NULL | 57 | Using where |`
> 
> `| id | select_type | table | type | possible_keys | key | key_len | ref | rows | Extra |`
> `| 1 | SIMPLE | wgEncodeGencodeCompV12 | range | chrom,txStart | txStart | 4 | NULL | 1571 | Using where |`

**表结构**

> `CREATE TABLE`wgEncodeGencodeCompV12 bin名称chrom strand txStart txEnd cdsStart cdsEnd exonCount exonStarts exonEnds score name2 cdsStartStat cdsEndStat exonFrames chrom chrom bin名称name name2 name2`(` `smallint(5) unsigned NOT NULL,` `varchar(255) NOT NULL,` `varchar(255) NOT NULL,` `char(1) NOT NULL,` `int(10) unsigned NOT NULL,` `int(10) unsigned NOT NULL,` `int(10) unsigned NOT NULL,` `int(10) unsigned NOT NULL,` `int(10) unsigned NOT NULL,` `longblob NOT NULL,` `longblob NOT NULL,` `int(11) default NULL,` `varchar(255) NOT NULL,` `enum('none','unk','incmpl','cmpl') NOT NULL,` `enum('none','unk','incmpl','cmpl') NOT NULL,` `longblob NOT NULL,
> KEY``(``,``),
> KEY``(``),
> KEY``(``)
> )`

有没有办法让这更有效？我很感激你的时间！

**（更新）解决方案：** 结合两个评论者的建议显着提高了运行时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:16:06.990

您想要的索引是： `wgEncodeGencodeCompV12(chrom, strand, txstart)`。

通常，您希望将具有等式的字段作为索引中的第一列。然后添加一个不等式的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:59:37.183

在您的情况下（对单个表进行查询，没有连接，没有复杂的东西），了解每列中值的分布以及了解数据库服务器如何利用索引非常重要。当您有一个具有相当大范围不同值的字段时，应该使用该字段进行索引。（例如，一个索引`strand`只会将整个数据拆分为`+`or`-`并且下游过滤器必须处理`+`or 或`-`结果集的每一行，这接近最坏的情况）

到目前为止，我们知道`txStart`在您的查询的有趣列中具有最差异化的值分布。

因此，您的查询绝对应该在该列上使用索引查询！但是 btree 索引，而不是哈希索引（运算符`<`,`<=`等`>`在 btree 上很快，但在哈希上不快）。

仅使用单个（btree）索引再试一次`txStart`（我知道您已经尝试过，但请再试一次并避免所有二级索引等）。

多列索引很好，但它们的复杂性使它们不如普通的单列索引快，MySQLs 优化器在选择最佳索引时相当愚蠢；-)

另一个重要因素*可能*是动态行大小（因为使用`longblob`列）。但在这方面，我对 MySQL 的当前状态不是最新的。

# c# - Outlook 下载电子邮件正文

> ID：15080617
> 
> 赞同：0
> 
> 时间：2013-02-26T03:02:41.607
> 
> 标签：c#, com-interop, outlook-2010

我正在创建一个发送短信的程序，然后根据我想要执行特定操作的回复。无论如何，这是我的代码：

```
using Microsoft.Office.Interop.Outlook;
using Outlook = Microsoft.Office.Interop.Outlook;

static void Main()
{                        
    var outlook = new Microsoft.Office.Interop.Outlook.Application();

     // fire event when a new email arives
     outlook.NewMailEx += new ApplicationEvents_11_NewMailExEventHandler(oApp_NewMailEx);

     // etc
}

static void oApp_NewMailEx(string EntryIDCollection)
{
    var outlook = new Microsoft.Office.Interop.Outlook.Application();
    MailItem temp = (MailItem)outlook.Session.GetItemFromID(EntryIDCollection, Missing.Value);

    var body = temp.Body; // the body of the email is null! I tried waiting and it is null until I open it...
    Console.WriteLine(body);
} 
```

这部分并不重要，但我使用此功能发送“短信”：

```
// send text message "att.txt.net only works with at&t phones"
public static int SendEmail(string recipeint = "9546543930@att.txt.net")
{
        try
        {
            // Create the Outlook application by using inline initialization.
            Outlook.Application oApp = new Outlook.Application();

            //Create the new message by using the simplest approach.
            Outlook.MailItem oMsg = (Outlook.MailItem)oApp.CreateItem(Outlook.OlItemType.olMailItem);

            Outlook.Accounts accounts = oMsg.Session.Accounts;
            foreach (Outlook.Account account in accounts)
            {
                // When the e-mail address matches, send the mail.
                if ( account.SmtpAddress.Contains("gmail") )
                {
                        oMsg.SendUsingAccount = account;                            
                        break;
                }
            }

            // If you want to, display the message.
            oMsg.Display(true);  //modal

            //Add a recipient.                
            Outlook.Recipient oRecip = (Outlook.Recipient)oMsg.Recipients.Add(recipeint);
            oRecip.Resolve();

            //Set the basic properties.
            oMsg.Subject = "This is the subject of the test message";
            oMsg.Body = "This is the text in the message.";

            //Add an attachment.
            // TODO: change file path where appropriate
            //String sSource = "C:\\setupxlg.txt";
            //String sDisplayName = "MyFirstAttachment";
            //int iPosition = (int)oMsg.Body.Length + 1;
            //int iAttachType = (int)Outlook.OlAttachmentType.olByValue;
            //Outlook.Attachment oAttach = oMsg.Attachments.Add(sSource, iAttachType, iPosition, sDisplayName);

            //Send the message.
            oMsg.Save();
            oMsg.Send();

            //Explicitly release objects.
            oRecip = null;
            //oAttach = null;
            oMsg = null;
            oApp = null;
        }

            // Simple error handler.
        catch (System.Exception e)
        {
            Console.WriteLine("{0} Exception caught: ", e);
        }

        //Default return value.
        return 0;
} 
```

因此，我可以使用我的 gmail 帐户发送电子邮件，当我回复短信时，该功能`oApp_NewMailEx`会使用新电子邮件的 ID 执行。我能够获取主题，但在将鼠标悬停在电子邮件上或打开电子邮件之前，不会下载正文。我已经在另一个线程上等待了 2 分钟，然后尝试查看正文，但它仍然为空。

* * *

**编辑注释以使这项工作我有：**

![在此处输入图像描述](../Images/281a2c63af039929b9fe7327aaac41ce.png)

它看起来是灰色的，因为我没有以管理员身份运行 Outlook。如果您以管理员身份运行 Outlook，您将能够更新安全设置。

我还导入了 Microsoft Outlook 14.0 对象库作为参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:01:49.843

收到电子邮件后，我调用了发送和接收方法。稍等一下，然后我就可以阅读正文了。

```
 outlook.Session.SendAndReceive(false); 
```

# android - 当应用程序以 root 用户身份运行时 GPS 不工作

> ID：15080619
> 
> 赞同：1
> 
> 时间：2013-02-26T03:03:15.270
> 
> 标签：android, location, root

我正在开发与安全相关的应用程序。即使用户将设备重置为出厂设置，也无法删除应用程序。要做到这一点，设备必须植根。但是，当我尝试以用户身份获取位置时，出现`root`此错误`Android Jellybean (4.1.1)`

```
uncaughtException # Exception found!!
java.lang.SecurityException: invalid UID 0
at android.os.Parcel.readException(Parcel.java:1379)
at android.location.ILocationManager$Stub$Proxy.requestLocationUpdates(ILocationManager.java:659)
at android.location.LocationManager._requestLocationUpdates(LocationManager.java:664)
at android.location.LocationManager.requestLocationUpdates(LocationManager.java:486) 
```

[当我查看 Android 源代码时，我看到 Google 在这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/com/android/server/LocationManagerService.java)增加了额外的安全性`LocationManagerService.java`

在`requestLocationUpdates`函数中它调用

```
 checkPackageName(Binder.getCallingUid(), packageName); 
```

这是`checkPackageName`功能

```
 private void checkPackageName(int uid, String packageName) {
    if (packageName == null) {
        throw new SecurityException("packageName cannot be null");
    }
    String[] packages = mPackageManager.getPackagesForUid(uid);
    if (packages == null) {
        throw new SecurityException("invalid UID " + uid);
    }
    for (String pkg : packages) {
        if (packageName.equals(pkg)) return;
    }
    throw new SecurityException("invalid package name"); 
```

}

任何想法如何解决这个问题？如果您有类似的问题，请建议如何解决。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T20:58:09.687

在调用定位服务之前：

```
final long ident = Binder.clearCallingIdentity(); 
```

调用后：

```
Binder.restoreCallingIdentity(ident); 
```

# bash - 使用 bash 将文件传递到程序中

> ID：15080620
> 
> 赞同：0
> 
> 时间：2013-02-26T03:03:18.347
> 
> 标签：bash

我正在尝试将文件传递到使用 bash 进行数据处理的程序中，我想知道我是否有正确的语法

```
/home/mumps/CS3150/Script/HW1/textfiles/CardioAndPulmonary.txt | /home/mumps/Medline2012/getDocs.mps > /home/mumps/CS3150/Scripts/HW1/textfiles/Titles.txt 
```

我发送的文本文件都是有效且格式正确的，但我只是从 getDocs.mps 中返回一个文件错误（我应该注意 getDocs 确实可以正常工作，因为这是我的老师与 debian vdi 一起传递的东西并且其他人对此没有问题。）

但是，getDocs 确实调用了位于 Medline2012 中的文本文件，我相信这也是错误的来源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:07:00.323

```
/home/mumps/Medline2012/getDocs.mps < /home/mumps/CS3150/Script/HW1/textfiles/CardioAndPulmonary.txt > /home/mumps/CS3150/Scripts/HW1/textfiles/Titles.txt 
```

或者

```
~/Medline2012/getDocs.mps < ~/CS3150/Script/HW1/textfiles/CardioAndPulmonary.txt > ~/CS3150/Scripts/HW1/textfiles/Titles.txt 
```

甚至

```
< ~/CS3150/Script/HW1/textfiles/CardioAndPulmonary.txt ~/Medline2012/getDocs.mps > ~/CS3150/Scripts/HW1/textfiles/Titles.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T03:07:18.043

或者只是在没有 cat 的情况下使用 bash 重定向。

```
/home/mumps/Medline2012/getDocs.mps < /home/mumps/CS3150/Script/HW1/textfiles/CardioAndPulmonary.txt > /home/mumps/CS3150/Scripts/HW1/textfiles/Titles.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T03:07:06.870

你要么需要`cat`你的`.txt`文件，通过管道将它的内容传递给脚本，

```
cat /home/mumps/CS3150/Script/HW1/textfiles/CardioAndPulmonary.txt | /home/mumps/Medline2012/getDocs.mps > output 
```

或者，根据脚本中的内容，它可能需要作为命令行参数，即

```
 /home/mumps/Medline2012/getDocs.mps /home/mumps/CS3150/Script/HW1/textfiles/CardioAndPulmonary.txt > output 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T03:05:19.560

您正在尝试执行您的数据文件并将结果提供给您的脚本。

尝试

`cat /home/mumps/CS3150/Script/HW1/textfiles/CardioAndPulmonary.txt | /home/mumps/Medline2012/getDocs.mps > /home/mumps/CS3150/Scripts/HW1/textfiles/Titles.txt`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T22:51:25.837

如果您仍然遇到问题，请在执行 getDocs.mps 之前对 Medline2012 进行 cd。原因是当您访问 getDoc.mps 时，它会调用以打开 osu.medline 数据库。这将导致“文件错误”，因为 getDoc.mps 中的调用不包括 osu.medline 的路径。

编辑：很多人告诉你你需要“猫”这是错误的。getDoc.mps 有自己的打印。如果没有，它不会为您打印“文件错误”。我还看到您说它在循环后中断。您是否进行了测试以确保它不在文件的开头。您可以通过在“文件错误”的第一次打印中的引号之间添加和指示单词来检查。您可以将其更改为“文件错误 1”之类的内容。我知道你可能知道我只是喜欢彻底。

# php - PHP - 动态更改内容

> ID：15080624
> 
> 赞同：0
> 
> 时间：2013-02-26T03:03:31.073
> 
> 标签：php, arrays, variables, dynamic, reload

好的，所以我有一个 PHP 应用程序，它本质上是用对 XML 文件中元素的引用填充数组，在数组上执行 shuffle() 以随机化它，然后循环遍历数组，显示数组中的数据（以及 XML 文件）在屏幕上。

我当前的代码工作正常 - 它填充数组，打乱它，并显示第 0 个索引（这是随机的）。我的问题在于**我希望能够动态地重新加载页面上的内容，而不会丢失数组中的数据，但不会链接到不同的页面**。更具体地说，我希望能够通过单击按钮来循环遍历数组（无需完全重新加载页面，丢失数组中的有价值数据）。

我尝试使用一些隐藏的表单字段将数组的值加载到临时数组中，然后在页面重新加载时将它们反馈回，但无济于事。我以这种方式发现了很多错误，而且这显然是一种快速而肮脏的方式。

本质上，我希望代码做这样的事情：

```
$heaps_array = array(...); // Populated by, let's say 3 strings, for argument's sake
shuffle($heaps_array);
echo $heaps_array[0];
// User clicks the Next button...
// Get rid of the $heaps_array[0] from the page content, and...
echo $heaps_array[1];
// User clicks the Next button...
// Get rid of the $heaps_array[1] from the page content, and...
echo $heaps_array[2];
// User clicks the Next button...
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:02:00.717

您在这里有几个选择，但您需要了解 PHP 是一种服务器端语言，它在浏览器甚至看到页面内容之前运行和完成。要做动态内容，这就是 javascript 和 ajax 发挥作用的地方。我推荐一个 JavaScript 框架，比如 jQuery，它可以让 AJAX 调用变得简单。

一些方法来做到这一点：

1) 将整个 php 数组输出到页面上的 javascript 变量中。使用 javascript 进行所有数组排序。没有 AJAX。

2）使用php对数组进行排序，将其存储在会话变量中。使用 AJAX 从会话内存中的数组请求新数据，必要时使用数组并返回您需要的值。

3) 使用 AJAX 调用请求并返回整个排序的 PHP 数组。根据需要使用 javascript 来处理它。

根据您希望返回的数据大小，您可能希望通过 AJAX 和客户端处理最大限度地减少数据请求，只需使用 PHP 完成所有数组内容，然后返回您需要的确切值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:17:22.547

只是把 PHP 的会话管理扔在那里，因为没有人有。 [http://php.net/session_start](http://php.net/session_start)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:15:00.867

您不能将数组发送到客户端（肮脏的方式，而不是ajax）吗？然后用js显示值。

我的意思是：

```
echo 'var array = new Array('.implode(',', $array).');'; 
```

否则您将需要更复杂的方法，最好是构建一个迷你 Web 服务并通过 AJAX 查询获取值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T03:13:35.810

PHP 有一个 / 是基于请求的解释器语言，所以每次你需要来自服务器的东西时，你都需要运行一个脚本。如果不使用一些存储引擎（memcached，MySQL，你可以命名它），你不能让这些数组总是在内存中。

正如其他人所说，您可以将数组发送到前端并在 JavaScript 中对其进行操作。这样您就不会加载服务器并将所有数据都保存在内存中。

# spring - springMVC 集合和 hibrnate 3.3.2 GA java.lang.Integer 不能转换为 java.lang.Long

> ID：15080625
> 
> 赞同：0
> 
> 时间：2013-02-26T03:03:31.020
> 
> 标签：spring, hibernate, casting

我在转换时遇到了一个严重错误。我不知道如何解决它..请...帮助我摆脱这个。springMVC 集合和 hibrnate 3.3.2 GA java.lang.Integer 无法转换为 java。 lang.Long 这个异常没有给出任何错误......仍然没有运行............不知道......

```
HTTP Status 500 - 

--------------------------------------------------------------------------------

type Exception report

message 

description The server encountered an internal error () that prevented it from fulfilling this request.

exception 

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:656)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

root cause 

java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.Long
    com.os.springjpa.controller.BookController.listPaging(BookController.java:103)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

note The full stack trace of the root cause is available in the Apache Tomcat/6.0.20 logs.

--------------------------------------------------------------------------------

Apache Tomcat/6.0.20 
```

## ## BookController.java ##

```
package com.os.springjpa.controller;

import javax.validation.Valid;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.os.springjpa.dao.BookDao;
import com.os.springjpa.entity.Book;
import com.os.springjpa.utils.Utils;

/**
 * @author kris;
 *         This class is using Path Variable style as example like Rest
 *         Style. Path Variable will handling like url string but so simple then
 *         url string. I'm also still not found how to make url string as simple
 *         as posible in view layer.
 */
@Controller
@RequestMapping("/book")
public class BookController {

    @Autowired
    private BookDao bookDao;
    private final int PAGE_SIZE = 2;
    Logger logger = Logger.getLogger(BookController.class);

    @RequestMapping(method = RequestMethod.GET)
    public String form(Model model) {
    System.out.println(org.hibernate.Version.getVersionString());
        model.addAttribute(new Book());
        return "book/create";
    }

    @RequestMapping(method = RequestMethod.POST)
    public String create(@Valid Book book, BindingResult bindingResult) {
        if (bindingResult.hasErrors()) {
            logger.info("Error has been detect");
            return "book/create";
        }
        if (bookDao.saveOrUpdate(book)) {
            book = bookDao.getByIsbn(book.getIsbn());
            return "redirect:/book/" + book.getId();
        } else {
            return "/exception";
        }
    }

    @RequestMapping(method = RequestMethod.PUT)
    public String update(@Valid Book book, BindingResult bindingResult) {
        if (bindingResult.hasErrors()) {
            logger.info("Error has been detect");
            return "book/update";
        }
        if (bookDao.saveOrUpdate(book)) {
            return "redirect:/book/" + book.getId();
        } else {
            return "/exception";
        }
    }

    @RequestMapping(value = "/{id}", method = RequestMethod.DELETE)
    public String delete(@PathVariable Integer id) {
        logger.info("Delete Method Has Call");
        Book book = bookDao.getById(id);
        if (bookDao.delete(book)) {
            return "redirect:/book/list/1";
        } else {
            return "/exception";
        }
    }

    @RequestMapping(value = "/{id}", method = RequestMethod.GET)
    public String detail(@PathVariable Integer id, Model model) {
        Book book = bookDao.getById(id);
        if (book == null) {
            return "/exception";
        }
        model.addAttribute(book);
        return "book/detail";
    }

    @RequestMapping(value = "/edit/{id}", method = RequestMethod.GET)
    public String edit(@PathVariable Integer id, Model model) {
        Book book = bookDao.getById(id);
        if (book == null) {
            return "/exception";
        }
        model.addAttribute(book);
        return "book/update";
    }

    @RequestMapping(value = "/list/{page}", method = RequestMethod.GET)
    public String listPaging(@PathVariable Integer page, Model model) {
        // Create simple pagination
        model.addAttribute("books", bookDao.getAll((page - 1) * PAGE_SIZE, PAGE_SIZE));
       model.addAttribute("pageCount", Utils.getPageCount(PAGE_SIZE, (Long)bookDao.countAllBook().get(0)));
        return "book/list";
    }

} 
```

* * *

## 实用程序.java

* * *

```
package com.os.springjpa.utils;

public class Utils {

    public static int getPageCount(int pageSize, Long row) {
        int result = 0;
        if (row % pageSize == 0) {
            result = (int) (row / pageSize);
        } else {
            result = (int) (row / pageSize + 1);
        }
        return result;
    }
} 
```

* * *

请帮我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:21:41.870

在 BookController.java 第 103 行

```
 model.addAttribute("pageCount", Utils.getPageCount(PAGE_SIZE, 
                                 new Long(bookDao.countAllBook().get(0)))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:12:25.723

试试这个，

```
model.addAttribute("pageCount", Utils.getPageCount(PAGE_SIZE, Long.parseLong(bookDao.countAllBook().get(0).toString()))); 
```

# c# - 是否有必要在控制处置之前明确清除数据绑定？

> ID：15080626
> 
> 赞同：4
> 
> 时间：2013-02-26T03:03:43.453
> 
> 标签：c#, .net, winforms

[我刚刚在这里](http://msdn.microsoft.com/en-us/library/ms996446.aspx#databinding_winforms10_11_topic11)阅读了一篇旧博客文章，该文章建议`.databindings.Clear()`在处理之前调用以避免内存泄漏。这篇文章是在考虑 .Net 1.0/1.1 的情况下编写的，在 .Net > 1.1 中这仍然是必要的还是可取的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T05:33:44.873

专用方法是 Control.ResetBindings()。不，您不必自己调用它，它由 Control.Dispose() 方法自动调用。您可以从[参考源](http://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/Control.cs,d85b7dd334cd518d)代码、net/fx/src/Winforms/Managed/System/Winforms/Control.cs 源代码文件中亲自看到这一点。

# android - Android - 比较文本文件内容上的字符串输入

> ID：15080627
> 
> 赞同：1
> 
> 时间：2013-02-26T03:03:45.110
> 
> 标签：android, database, text-files, notepad

我可以请你指导我如何完成这个问题吗？我需要将 inputWord 与 .txt 文件中的字符串进行比较，如果找到，则返回整行，如果没有，则显示“找不到单词”。

例子：

```
inputWord: abacus

Text file content:
abaca - n. large herbaceous Asian plant of the banana family.
aback - adv. archaic towards or situated to the rear.
abacus - n. a frame with rows of wires or grooves along which beads are slid, used for calculating.
...
so on

Returns: abacus with its definition 
```

我想要做的是将我的 inputWord 与“ - ”（连字符作为分隔符）之前的单词进行比较，如果它们不匹配，则移至下一行。如果它们匹配，则复制整行。

我希望这看起来不像是我要求你“做我的功课”，但我尝试了围绕不同论坛和网站的教程。我也阅读了 java 文档，但我真的不能把它们放在一起来完成这个。

先感谢您！

更新：

这是我当前的代码：

```
if(enhancedStem.startsWith("a"))
                {
                    InputStream inputStream = getResources().openRawResource(R.raw.definitiona); 
                    try {
                        BufferedReader in = new BufferedReader(new InputStreamReader(inputStream));
                        String s = in.readLine();
                        String delimiter = " - ";
                        String del[];
                        while(s != null)
                        {
                            s = in.readLine();
                            del = s.split(delimiter);
                            if (enhancedStem.equals(del[0]))
                            {
                                in.close();
                                databaseOutput.setText(s);
                                break;
                            }
                        }
                        in.close();
                        }
                    catch (FileNotFoundException e) {
                        databaseOutput.setText("" + e);
                    }
                    catch (IOException e1) {
                        databaseOutput.setText("" + e1);
                    }
                } 
```

非常感谢！这就是我想出的，它正确地返回了输入的定义，但问题是，当我输入一个在文本文件中找不到的单词时，应用程序崩溃了。口号似乎不起作用。知道如何捕获它吗？Logcat 在第 4342 行说 NullPointerExcepetion

```
s = in.readLine(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:33:34.800

假设文本文件中每一行的格式是统一的。这可以通过以下方式完成：

1）逐行读取文件。

2）根据分隔符拆分每一行，并将拆分的字符串标记收集到一个临时字符串数组中。

3）临时令牌数组中的第一个条目将是“-”符号之前的单词。

4) 将临时数组中的第一个条目与搜索字符串进行比较，如果匹配则返回整行。

下面的代码可以放在一个函数中来完成这个：

```
String delimiter = "-";
String[] temp;
String searchString = "abacus";

BufferedReader in = new BufferedReader(new FileReader(file));

while (in.readLine() != null) {
    String s = in.readLine();

    temp = s.split(delimiter);

    if(searchString.equals(temp[0])) {
        in.close();
        return s;
    }
}

in.close();
return ("Word not found"); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:17:18.130

你可以试试：

```
myreader = new BufferedReader(new FileReader(file));
String text = "MyInput Word";

while(!((text.equals(reader.readLine())).equals("0"))); 
```

# nsstring - 不要笑，但我到底错过了什么？

> ID：15080633
> 
> 赞同：0
> 
> 时间：2013-02-26T03:04:01.397
> 
> 标签：nsstring

好的，我可能没有尝试学习 OOP 的事情，而且我在最简单的第一个小程序上遇到了麻烦。我收到一条消息，说我的实现不完整（我评论了下面给出 4 个错误的行）。怎么了？它需要一个类型说明符，但我不给它一个 NSString 吗？我确实注意到 NSString 不会像在界面中那样在实现中将颜色更改为 XCODE 中的绿色类型颜色。

另外，为什么我们需要在接口中声明方法并在实现中键入完全相同的内容？也就是说，为什么需要在两者中都输入 startDrinking: (NSString*) newBeverage？

```
#import <Foundation/Foundation.h>

@interface Drinks : NSObject {
    NSString *beverage;
}

- (void) startDrinking: (NSString*) newBeverage;  // setter
- (void) printDrink;

@end

@implementation Drinks
{

//THIS NEXT LINE IS WHERE I GET 4 ERRORS
    - (void) startDrinking: (NSString *) newBeverage {
        beverage = [[NSString alloc]initwithString:newBeverage]
        }

    -(void) printDrink {

                NSLog(@"How is your", beverage);
            }

        }

@end

int main (int argc, const char * argv[]) {

    Drinks *beverage = [[Drinks alloc] init];

    [beverage startDrinking:@"Lemonade"];

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:12:48.620

你的错误是`{`右下方`@implementation Drinks`。这就是对齐方式也混乱的原因。

一般来说，如果您在报告的行上找不到错误，只需检查任何多余或缺少的括号、括号或大括号。奇怪的排列是另一个线索。

希望这可以帮助。此外，正如其他人所说，如果您的主题更有意义，它会有所帮助。不仅为您自己，也为任何可能遇到类似问题的其他人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:06:49.540

*你的问题太啰嗦了。*

你错过了一个分号`beverage = [[NSString alloc]initwithString:newBeverage]`

该行应该是：

```
beverage = newBeverage; 
```

并且 NSLog 行应该是：

```
NSLog(@"How is your %@", beverage); 
```

对于 header 中方法签名的声明，后面是 C 和 C++ 。你可以想到，Compiler 需要先知道哪些函数是可用的。

# java - 插入时 ConcurrentHashMap 的线程安全问题

> ID：15080636
> 
> 赞同：0
> 
> 时间：2013-02-26T03:04:19.970
> 
> 标签：java, multithreading, thread-safety

我正在做一个项目，其中我在不同的数据库中有两个具有不同模式的表。所以这意味着我有两个不同的连接参数让这两个表使用 JDBC-

假设下面是 config.property 文件-

```
TABLES: table1 table2

#For Table1
table1.url: jdbc:mysql://localhost:3306/garden
table1.user: gardener
table1.password: shavel
table1.driver: jdbc-driver

#For Table2
table2.url: jdbc:mysql://otherhost:3306/forest
table2.user: forester
table2.password: axe
table2.driver: jdbc-driver 
```

下面的方法将读取上面的`config.properties`文件并`ReadTableConnectionInfo`为每个表创建一个对象。

```
 private static void readPropertyFile() throws IOException {

    prop.load(Read.class.getClassLoader().getResourceAsStream("config.properties"));

    tableNames = Arrays.asList(prop.getProperty("TABLES").split(" "));

    for (String arg : tableNames) {

        ReadTableConnectionInfo ci = new ReadTableConnectionInfo();

        String url = prop.getProperty(arg + ".url");
        String user = prop.getProperty(arg + ".user");
        String password = prop.getProperty(arg + ".password");
        String driver = prop.getProperty(arg + ".driver");

        ci.setUrl(url);
        ci.setUser(user);
        ci.setPassword(password);
        ci.setDriver(driver);

        tableList.put(arg, ci);

    }
} 
```

下面是一个特定表的`ReadTableConnectionInfo class`所有内容。`table connection info`

```
public class ReadTableConnectionInfo {

    public String url;
    public String user;
    public String password;
    public String driver;
    public String percentage;

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public String getUser() {
        return user;
    }

    public void setUser(String user) {
        this.user = user;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getDriver() {
        return driver;
    }

    public void setDriver(String driver) {
        this.driver = driver;
    }
} 
```

现在我正在创建`ExecutorService`指定数量的线程并将这个`tableList`对象（我通过阅读创建的`config.property file`）传递给`ReadTask class`-

```
// create thread pool with given size
ExecutorService service = Executors.newFixedThreadPool(10);

for (int i = 0; i < 10; i++) {
    service.submit(new ReadTask(tableList));
} 
```

下面是我`ReadTask`实现的类，`Runnable interface`其中每个线程将在开始时为每个表建立两个连接，然后再做任何有意义的事情。

```
class ReadTask implements Runnable {

    private Connection[] dbConnection = null;
    private ConcurrentHashMap<ReadTableConnectionInfo, Connection> tableStatement = new ConcurrentHashMap<ReadTableConnectionInfo, Connection>();

    public ReadTask(LinkedHashMap<String, XMPReadTableConnectionInfo> tableList) {
        this.tableLists = tableList;
    }

    @Override
    public void run() {

        try {

            int j = 0;
            dbConnection = new Connection[tableList.size()];

            //loop around the map values and make the connection list
            for (ReadTableConnectionInfo ci : tableList.values()) {

                dbConnection[j] = getDBConnection(ci.getUrl(), ci.getUser(), ci.getPassword(), ci.getDriver());
                tableStatement.putIfAbsent(ci, dbConnection[j]);

                j++;
            }

            //do other meaningful thing here
           }
       }
    } 
```

在我上面的 try 块中，我正在`dbConnection array`存储两个不同的数据库连接。然后我有一个`tableStatement`as ConcurrentHashMap ，我在其中存储`ReadTableConnectionInfo`对象`dbConnection`。例如 Table1 对象将在`tableStatement`ConcurrentHashMap 中有 Table1 连接。

**问题陈述：-**

我想看看`thread safety issues`在我的运行方法中是否有任何潜在的可能性，我在`tableStatement`ConcurrentHashMap 中插入的方式或任何其他线程安全问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:10:16.020

您的任务类不在线程之间共享（在您当前的示例中），因此在访问对象内部状态时没有并发问题。目前，您的任务的每个实例只能在执行程序分配给它的线程中访问：

```
service.submit(new ReadTask(tableList)); 
```

使用上面的代码行，您实例化了一个实例`ReadTask`并要求执行程序在单独的线程中运行它。如果您不在任何其他线程中访问该对象，那么您就没有并发问题。

实际上，在您的示例中，您不需要使用并发哈希映射（因为您没有为外部对象提供任何方式来修改该集合）。

如果您想做任何事情来修改您的代码，请考虑使`ReadTableConnectionInfo`对象不可变。您可以通过以下方式做到这一点：

*   将每个类实例变量声明为 final。
*   提供一个构造函数，该构造函数接受每个实例变量的值
*   删除类`setter`方法
*   `readPropertyFile`在您的方法中使用新的构造函数。

# google-maps-api-3 - 谷歌地图事件会触发谷歌地图重新加载吗？

> ID：15080637
> 
> 赞同：0
> 
> 时间：2013-02-26T03:04:20.713
> 
> 标签：google-maps-api-3

我最近创建了一个显示使用 Google 地图的网站。我想知道`google.maps.event.trigger(map, 'resize')`从谷歌重新加载地图的原因是什么？或者它只是从本地机器重新绘制的普通 UI 不会回调到 Google api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:53:50.953

从[文档](https://developers.google.com/maps/documentation/javascript/reference#Map)：

> resize - 无 - 当 div 更改大小时，开发人员应在地图上触发此事件：google.maps.event.trigger(map, 'resize')。

此事件通知 API 地图 DIV 已更改大小，它将执行所需的操作，这可能涉及从瓦片服务器获取其他瓦片，但不一定（如果地图变小，则不需要任何其他瓦片）。它不会导致 API 的额外负载。

# java - Activity 的某些部分如何存储在 Android 的外部类中？

> ID：15080638
> 
> 赞同：3
> 
> 时间：2013-02-26T03:04:22.477
> 
> 标签：java, android, class, methods, android-activity

假设我有一个名为`MainActivity.java`. 但是这个活动例如有大约 3000 行代码。

我想将此文件的代码部分分离到一个名为`NecessaryThings.java`. 但是，如果我在模拟器上运行我的项目，它会在此操作后自行停止。

有没有办法分开这个活动的一些行？

我写了一个更好的迷你例子..

还有你怎么想的；

**就性能而言，使用这种方法是有利还是有害？**

## 这是我的 MainActivity.java

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //I want to call these lines from NecessaryThings.java
    TextView genderResult = (TextView) findViewById(R.id.genderText);
    genderResult.setText("Cinsiyet:");
    TextView calorieResult = (TextView) findViewById(R.id.remainCalorie);

    String getGenderSTR = getIntent().getStringExtra("GENDER");
    genderResult.setText(getGenderSTR);

    String calorieResultSTR = getIntent().getStringExtra("CALORIECHOOSED");
    calorieResult.setText(calorieResultSTR);

            /*
              .....
              .....
            */

} 
```

* * *

## Aftet 我采用上面的代码，然后我想将它存储在`NecessaryThings.java`

像这样..

```
//All necessary imports here. There is no problem about those.

public class NecessaryThings extends Activity {

    public void myPersonalMethod() {
        TextView genderResult = (TextView) findViewById(R.id.genderText);
        genderResult.setText("Cinsiyet:");
        TextView calorieResult = (TextView) findViewById(R.id.remainCalorie);

        String getGenderSTR = getIntent().getStringExtra("GENDER");
        genderResult.setText(getGenderSTR);

        String calorieResultSTR = getIntent().getStringExtra("CALORIECHOOSED");
        calorieResult.setText(calorieResultSTR);
    }
} 
```

## 如果我重新排列我的 MainActivity.java 它将是这样的......

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    NecessaryThings showMyMethod = new NecassaryThings();
    showMyMethod.myPersonalMethod();

   /*
    the rest of the codes...
   */
} 
```

**但如果我分开代码，它就不起作用。为什么以及我该怎么做？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:11:03.203

```
public class MainActivity extends NecessaryThings {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    myPersonalMethod();
} 
```

NecessaryThings 扩展了 Activity，因此 MainActivity 不再需要从 Activity 扩展，它应该从 NecessaryThings 扩展。我需要指出的一件事是 super.onCreate(savedInstanceState); 将调用 onCreate(); 来自必要的东西。因为我的 myPersonalMethod(); 来自超类，你可以直接调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:11:04.867

所有活动都是常规的 Java 类，你可以 - 当然，有许多非 UI 类，比如`Application`，你可以有`helpers`等等。看看你的问题，我想告诉你 Activity 没有用户定义的构造函数，可以是只是通过调用`startActivity`方法间接创建的，但在其他方面它是一个普通的Java类。

因此，你要做的是，让你`NecessaryThings.java`成为一个普通的班级，你可以将你的上下文传递给它，`MainActivity`并做所有需要的事情。

希望这可以帮助。

# objective-c - 重用的滚动视图尝试应用尺寸错误的约束

> ID：15080640
> 
> 赞同：2
> 
> 时间：2013-02-26T03:04:39.573
> 
> 标签：objective-c, macos, cocoa

我正在使用基于视图的表格视图。每个单元格都是`NSView`具有自动布局约束的简单单元格，并且单元格包含多个视图，其中主要是一个`NSTableView`（包装在一个强制性的`NSScrollView`，而后者又被包装在一个简单的`NSView`）。

当我的`tableView:viewForTableColumn:row`委托方法被调用时，我`makeViewWithIdentifier`用来创建我的视图。

然后我设置了视图。在许多其他事情中，单元格的内部表格视图获取数据源。

但是，如果视图是一个正在被回收的视图，我会在日志中看到以下熟悉的错误：

```
Unable to simultaneously satisfy constraints:
(
    "<NSLayoutConstraint:0x10ab8a020 V:[NSView:0x100423720(132)]>",
    "<NSLayoutConstraint:0x1004581e0 NSScrollView:0x1004c82c0.bottom == NSView:0x100423720.bottom>",
    "<NSLayoutConstraint:0x100458340 V:|-(0)-[NSScrollView:0x1004c82c0]   (Names: '|':NSView:0x100423720 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x10138d730 h=-&- v=-&- V:[NSClipView:0x1004ca010]-(220)-|   (Names: '|':NSScrollView:0x1004c82c0 )>",
    "<NSAutoresizingMaskLayoutConstraint:0x10138d6d0 h=-&- v=-&- V:|-(0)-[NSClipView:0x1004ca010]   (Names: '|':NSScrollView:0x1004c82c0 )>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1004581e0 NSScrollView:0x1004c82c0.bottom == NSView:0x100423720.bottom> 
```

请注意内部剪辑视图在这种情况下如何将其约束设置为高度 220。这实际上是表格的*先前*高度。

不管我做什么，表格都不会刷新它的高度：我尝试过更改数据源、调用`tile`、强制布局、强制约束更新、删除表格视图并重新添加它等等。没有任何帮助。

奇怪的是布局约束首先存在，因为`translatesAutoresizingMaskIntoConstraints`我的所有视图都禁用了。其实我dump`tableView.constraints`到日志的话，一开始是没有约束的，但是*wham*，突然一大堆，其实是一堆奇怪的重复约束：

```
"<NSAutoresizingMaskLayoutConstraint:0x1013c2360 h=--& v=--& H:|-(-100)-[NSScroller:0x1030ea3c0]   (Names: '|':ScrollViewWithoutScrolling:0x1030e8c80 )>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c23c0 h=--& v=--& H:[NSScroller:0x1030ea3c0(15)]>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c2420 h=--& v=--& V:|-(-100)-[NSScroller:0x1030ea3c0]   (Names: '|':ScrollViewWithoutScrolling:0x1030e8c80 )>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c2290 h=--& v=--& V:[NSScroller:0x1030ea3c0(102)]>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c2de0 h=--& v=--& H:|-(-100)-[NSScroller:0x1030ea620]   (Names: '|':ScrollViewWithoutScrolling:0x1030e8c80 )>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c2e50 h=--& v=--& H:[NSScroller:0x1030ea620(223)]>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c2eb0 h=--& v=--& V:|-(-100)-[NSScroller:0x1030ea620]   (Names: '|':ScrollViewWithoutScrolling:0x1030e8c80 )>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c2f10 h=--& v=--& V:[NSScroller:0x1030ea620(15)]>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c4500 h=-&- v=-&- H:|-(0)-[NSClipView:0x1030ea880]   (Names: '|':ScrollViewWithoutScrolling:0x1030e8c80 )>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c4570 h=-&- v=-&- H:[NSClipView:0x1030ea880]-(0)-|   (Names: '|':ScrollViewWithoutScrolling:0x1030e8c80 )>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c45d0 h=-&- v=-&- V:|-(0)-[NSClipView:0x1030ea880]   (Names: '|':ScrollViewWithoutScrolling:0x1030e8c80 )>",
"<NSAutoresizingMaskLayoutConstraint:0x1013c4630 h=-&- v=-&- V:[NSClipView:0x1030ea880]-(110)-|   (Names: '|':ScrollViewWithoutScrolling:0x1030e8c80 )>" 
```

这对我来说很像一个错误。*有些东西*正在创造这些约束（并且做错了），但不是我。我已经尝试删除它们，只是想看看会发生什么，但要么`removeConstraint`不删除它们，要么`constraints` 正在重新创建它们。

只有一个视图已`translatesAutoresizingMaskIntoConstraints`启用：单元格视图本身。那是因为如果我禁用它，它会奇怪地变成完全空的。

一般来说，基于视图的表格中单元格视图的自动布局似乎是在自找麻烦，但我希望有一种方法可以让它工作。

# css - 如何让背景图像不重复并占据整个部分？

> ID：15080642
> 
> 赞同：0
> 
> 时间：2013-02-26T03:04:51.650
> 
> 标签：css, background-image

我的网站位于 avidest.com/test。我正在尝试使背景图像从页面顶部向下移动到“我们的在线服务”部分。由于某种原因，它提前结束了，并且有一段页面可以看到黑体背景。我不想显示这个黑色部分。这是CSS：

```
.header {
 /*background: #f0f7f7 url(images/header_bg.gif) top repeat-x;*/
    background: transparent;
    padding: 0;
    margin: 0 auto;
    height: 70px;
}

.block_header {
    margin: 0 auto;
    width: 980px;
    padding: 0;
    border: none;
}

.logo {
    float: left;
    padding: 0;
    margin: 0;
    width: 242px;
}

.uppercontain {
    background: url(images/slider_bg.gif) no-repeat;
    background-size: 100%;
    min-width: 1050px;
    min-height: 700px;
}

.slider {
/* background:url(images/slider_bg.gif) no-repeat; background-size: 100%; min-width: 1050px; */
    background: transparent;
    margin: 0 auto;
    padding: 0;
    height: 100%;
}

.slider .gallery {
    margin: 0 auto;
    width: 1050px;
    height: 383px;
    padding: 0;
} /*width was 880px*/
.slider .formbox {
    float: right;
} 
```

这是它在页面上的显示方式：

```
<body bgcolor="#000000">
    <div class="main">
         <div class="uppercontain">
            <div class="header">
                 <div class="block_header">
                      <div class="logo"><a href="index.html"><img src="images/logo.gif" width="242" height="94" border="0" alt="logo" /></a></div>
                 </div>
            </div>
            <div class="slider">
                 <div class="gallery">
                     <div class="form box"> Form is here </div>
                 </div>
            </div>
         </div>
    Rest of content
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:11:44.983

CSS3 添加了 background-size 属性：[http](http://www.w3schools.com/cssref/css3_pr_background-size.asp) ://www.w3schools.com/cssref/css3_pr_background-size.asp ，您可以在 IE9 及更高版本中使用它[http://caniuse.com/#feat=background-img-opts](http://caniuse.com/#feat=background-img-opts)

否则，您的选择是使用更大的背景图像或在内容后面使用带有图像的 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:13:15.103

simple. That fixes all your needs. Although I'm not sure if that works fine in IE but it definitely does in Firefox, Chrome and Safari

`background: url('image_Url_here') no-repeat scroll center top/cover transparent;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T04:10:00.800

包括 fallback 然后 css3 向后兼容不支持 css3 背景大小语法的浏览器。

```
background: url('image_Url_here') no-repeat scroll center center transparent;
background: url('image_Url_here') no-repeat scroll center top/cover transparent; 
```

经测试

```
firefox v12.0 (stuck on this version cuz mozilla dropped support for WinXP SP1)
Chrome v25.0(.1364 Ubuntu 12.04) 
```

# php - 如何运行外部 php 文件并将其输出放入字符串？

> ID：15080645
> 
> 赞同：0
> 
> 时间：2013-02-26T03:04:58.010
> 
> 标签：php

有一个抽象的操作方法问题，我还没有找到解决方案。假设您为诸如 wordpress 之类的 CMS 构建了一个插件，我正在使用一个名为 GetSimple 的 MCMS。现在在该插件中..当用户单击按钮时...两个外部 php 文件运行它们的代码并将它们的输出合并到一个静态文件中.. 比如说一个 html 或 css 文件。

那么在这种情况下......你如何（在插件中）运行外部php文件而不影响你所在的当前页面，然后获取该输出并将其作为字符串放入变量中..重复这个另一个php文件...然后将两个字符串输出，合并它们...然后将它们放入一个静态文件中？

事实证明，这对我来说是一项非常艰巨的任务。有关更多详细信息，您可以看到这个问题： [https ://stackoverflow.com/questions/15080163/how-to-create-a-file-with-php](https://stackoverflow.com/questions/15080163/how-to-create-a-file-with-php)

那么你会怎么做呢？我正在研究将每个文件的输出保存到单独的 xml 文件中然后合并这些 xml 文件的可能性......但问题仍然存在，即运行外部 php 并将该数据放在某处而不影响您所在的当前页面 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:09:16.950

如果您可以在服务器端生成响应，您可以简单地使用例如[shell_exec()](http://php.net/manual/en/function.shell-exec.php)或使用[Symfony2 Process Component](http://symfony.com/doc/master/components/process.html)`file()`运行这些 PHP 脚本，然后使用或`file_get_contents()`函数收集结果。

如果您需要在单击按钮时生成这些内容，则必须通知服务器处理该任务，为此您需要使用我在上面告诉您的方法调用该脚本进行 AJAX 调用。

# mysql - 在mysql的日历表中生成重复序列

> ID：15080650
> 
> 赞同：0
> 
> 时间：2013-02-26T03:05:36.617
> 
> 标签：mysql, sequence, repeat

我正在生成一个日历表，如何生成如下重复序列。谢谢。

```
dt                   |id_1|id_2  
2013-01-01 00:00:00       |1|              3            
2013-01-01 01:00:00       |1|              3         
2013-01-01 02:00:00       |1|              3    
2013-01-01 03:00:00       |2|              3       
2013-01-01 04:00:00       |2|              3          
2013-01-01 05:00:00       |2|              4         
2013-01-01 06:00:00       |3|              4 
```

id_1 的序列将是 1, 1, 1, 2, 2, 2, 3, 3, 3,....直到 6,6,6，然后在 1,1,1,.. 重新开始

id_2 的序列将从 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, ... 开始，直到 9, 9, 9, 9, 9，然后从 1, 1, 1 重新开始， 1, 1....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:13:54.603

好吧，你可以用基本的算术来做到这一点。答案是将日期和小时转换为自 2013 年 1 月 1 日午夜以来的小时数，然后使用整数除法和模运算符将这些转换为系列。结果是这样的：

```
select (((date(dt) - date('2013-01-01))*24 + hour(dt)) div 3) mod 5) + 1 as id_1,
       (2+(((date(dt) - date('2013-01-01))*24 + hour(dt)) div 5) mod 9) + 1 as id_2 
```

# c++ - c++获取txt文件中的一行数据

> ID：15080652
> 
> 赞同：0
> 
> 时间：2013-02-26T03:06:10.240
> 
> 标签：c++

我想从 txt 文件中读取数据，但我无法获取它。我是 C++ 新手。这是我的代码，但它不起作用。我用 getline(),

```
 ifstream inFile;
 string sPassWord;
 inFile.open("QdatPassWordconfig.config");
 inFile.seekg(0,ios::end);
 int length=inFile.tellg();

  if (inFile.is_open())
  {
      while (!inFile.eof())
      {
              getline(inFile,sPassWord);
               cout<<sPassWord<<endl;
      }

         cout<<"get data from txt file"<<endl;
         // here ,I cannot read data from file
         cout<<sPassWord<<endl;
  }

 if(!inFile.is_open() || length==0)
  {
      cout<<"file is create or write"<<endl;
      sPassWord="BdsWUjT26";
      ofstream outFile;
      outFile.open("QdatPassWordconfig.config");
      outFile<<sPassWord<<endl;
      outFile.close();
  }
   inFile.close();
  cout<<sPassWord<<endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:19:39.140

不清楚您是在尝试读取文件的第一行、文件的最后一行还是文件的所有行。这里是每种可能性的程序片段：

读取文件的第一行：

```
// UNTESTED
{
  ifstream inFile("QdatPassWordconfig.config");
  string sPassWord;
  if(std::getline(inFile, sPassWord)) {
    std::cout << "Password is: " << sPassWord << "\n";
  } else {
    std::cout << "No password available.\n"
  }
} 
```

要读取文件的所有行：

```
// TESTED
#include <iostream>
#include <fstream>
#include <string>

int main ()
{
  std::ifstream inFile("QdatPassWordconfig.config");
  std::string sPassWord;
  while(std::getline(inFile, sPassWord)) {
    std::cout << "Password is: " << sPassWord << "\n";
  }
} 
```

要读取文件的最后一行：

```
// UNTESTED
{
  ifstream inFile("QdatPassWordconfig.config");
  string sPassWord;
  int lineCount = 0;
  while(std::getline(inFile, sPassWord)) {
    lineCount++;
  }
  if(lineCount) {
    std::cout << "Password is: " << sPassWord << "\n";
  } else {
    std::cout << "No password available.\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T03:14:05.350

```
inFile.seekg(0,ios::end);
int length=inFile.tellg(); 
```

1.你忘了寻找回到起点。像这样：

```
inFile.seekg(0,ios::end);
int length=inFile.tellg();
inFile.seekg(0,ios::beg); 
```

2.你需要练习你的if和else语句。

3.不要使用std::ifstream::eof。使用 std::getline。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T03:23:25.277

做这样的事情：

```
// Declare local variables
std::ifstream inFile;
std::string sPassword = "";
::UINT length = 0;

// Attempt to open file
inFile.open( "QdatPassWordconfig.config" );

// Use your if and else statement like this:
// Is inFile open?
if( inFile.is_open( ) )
{
    // Read file line by line using std::getline
    while( std::getline( inFile, sPassword ) ) {
        // Print sPassword
        std::cout << sPassword << std::endl;
    }
    // Done with inFile, close it
    inFile.close( );
}
else
{
    // Do whatever if inFile can't be open
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T04:23:09.337

您的代码有很多错误，所以我决定向您展示我将如何做到这一点（请阅读评论）：

```
void Example( void )
{
    // DECLARATION
    bool bInputMode = true;
    std::fstream ioFile;
    ::UINT nFileSize = 0;
    std::string strPassword = "";

    // INITIALIZATION
    // *Open or create ioFile
    // ioFile can now do both input and output operations
    ioFile.open( "Passwords.pw",
                 std::fstream::in |std::fstream::out | std::fstream::app );

    // *Calculate/set the value of bInputMode
    // first, calculate the size of the file
    // if the size of the file is = 0,
    // bInputMode = false - which means to be in output mode
    ioFile.seekg( 0, std::ios::end );
    if( ( nFileSize = ioFile.tellg( ) ) = 0 )
        bInputMode = false;
    ioFile.seekg( 0, std::ios::beg );

    // DO WHATEVER
    // *Since bInputMode == true,
    // we shall read each line from ioFile by using std::getline
    if( bInputMode )
    {
    // *Get each line within ioFile and "copy" it to strPassword
    // and then print strPassword
    // *With std::getline, we could get the spaces
        while( std::getline( ioFile, strPassword ) )
            std::cout << strPassword << std::endl;
    }
    // *Since bInputMode == false,
    // we shall create a new from ioFile and then write to it
    else
    {
        std::cout << "Creating/writing a new file..." << std::endl;
        strPassword = "Password123";
        ioFile << strPassword << std::endl;
    }

    // CLEAN-UP
    // We are done with ioFile, close it.
    ioFile.close( );
}; 
```

请指出任何错误！一些反馈和建议也会很棒。

# javascript - 对象不支持在 jQuery 原型上定义的函数的此属性或方法

> ID：15080653
> 
> 赞同：0
> 
> 时间：2013-02-26T03:06:10.197
> 
> 标签：javascript, jquery

我正在为健全的浏览器提供的各种功能构建一个 IE shim（不幸的是，我处于必须支持 IE7 的位置）。

我在 jQuery 原型上定义了以下方法定义：

```
 $.fn.textWidth = function(){
         //some logic in here
    }

    shimSelect = function(selector){
       $(selector).on('focus', function(){
            $(this).each(function(index, element){
                   if(element.textWidth() > element.width){
                        //more logic
                   }
            }
        }
     }

     if (!$.support.leadingWhitespace) {
         $(function() {
             shimSelect("");
         });
     } 
```

通过明智地添加各种 console.logs，我已经确定直接在调用 textWidth 之前，在我的情况下，该元素是一个 HTMLElement（特别是 HTMLSelectElement）。

但是，它拒绝调用 textWidth()，`Object does not support this property or method`在 IE 和

```
 Uncaught TypeError: Object #<HTMLSelectElement> has no method 'textWidth' shim.js:104
        (anonymous function) togo_ie_shim.js:104
        jQuery.extend.each jquery.js:612
        jQuery.fn.jQuery.each jquery.js:242
        (anonymous function) togo_ie_shim.js:103
        jQuery.event.dispatch jquery.js:3064
        elemData.handle.eventHandle 
```

在 Chrome 上

我的问题是，我的代码有什么问题？为什么会失败？以及如何正确实施类似的垫片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:11:37.310

[each](http://api.jquery.com/jQuery.each/)函数不会给你 jquery 对象作为参数，它是一个 DOM 对象。

```
jQuery.each( collection, callback(indexInArray, valueOfElement) ) 
```

您已经扩展了 jquery 对象，因此，**元素**上没有定义函数 textWidth。

尝试使用 :`$(element)`代替。

# twitter-bootstrap - 是否有用于 Retina-Display 的 Twitter Bootstrap 扩展？

> ID：15080663
> 
> 赞同：9
> 
> 时间：2013-02-26T03:07:11.880
> 
> 标签：twitter-bootstrap, retina-display

尝试合并引导 CSS 和特定于视网膜显示的 CSS 非常令人头疼。

那么有没有一种简单的方法可以做到这一点。可能有人已经建立了关于它的扩展。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T04:10:24.143

[图片Retina JS](http://retinajs.com/)有一个扩展名。它在服务器上检查服务器上是否有更高质量的图像，如果存在，则替换完成。有关更多信息，您可以访问链接。

您还可以使用 HTML5 样板并将其与 bootstrap 结合使用。

[HTML5 移动样板](http://html5boilerplate.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T09:21:53.193

在 Bootstrap 3 中，有`img-retina`mixin。

# actionscript-3 - 调用可能未定义的方法 makelvl 1180

> ID：15080667
> 
> 赞同：0
> 
> 时间：2013-02-26T03:07:28.403
> 
> 标签：actionscript-3, flash

我正在制作一个破砖游戏，但不断收到 1180 错误。我找不到问题。有任何想法吗？

```
function checkLevel(event:Event):void{
    if(brickAmt == 0)
    {
        currentLvl ++;
        makeLvl();
        MrBall.x = 150;
        MrBall.y = 265;
        MrPaddle.x = 230;
        MrPaddle.removeEventListener(Event.ENTER_FRAME, movePaddle);
        MrBall.removeEventListener(Event.ENTER_FRAME, moveBall);
        removeEventListener(Event.ENTER_FRAME, checkLevel);
        stage.addEventListener(MouseEvent.CLICK, beginCode);
    }
}
stage.addEventListener(MouseEvent.CLICK, beginCode);
makeLvl(); 
```

# css - 使 div 向右延伸到无穷大

> ID：15080668
> 
> 赞同：0
> 
> 时间：2013-02-26T03:07:36.777
> 
> 标签：css

我需要一些 CSS 的帮助

我已经制作了一些示例网站[http://gidzior.99k.org/inter/](http://gidzior.99k.org/inter/)，我想将 [aside] 背景（带有“我们是谁”文本）拉伸到设置为 980px 的包装器之外，我想将 [aside] 展开到浏览器窗口的右端

如何实现这样的事情

HTML

```
<div id="main">
    <div class="wrapper clearfix">
        <section id="blog-posts">
            <h2 class="archerBold text-shadow-white pb20">from the blog</h2>
            <article class="blog-post"></article>
            <article class="blog-post"></article>
        </section>
        <aside>
            <section>
                <h2 class="archerBold text-shadow-white pb20">who we are</h2>
            </section>
            <section></section>
            <section></section>
        </aside>
    </div>
</div> 
```

CSS

```
#main {
    background: #f8eedf;
    width: 100%;
}
#blog-posts {
    float:left;
    width: 604px;
    padding: 50px 50px 50px 0;
}
aside {
    float:left;
    padding: 50px 0 50px 40px;
    width: 354px;
    height: 770px;
    background: #eeddc6;
    background: -moz-linear-gradient(top,  #eeddc6 0%, #f8edde 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#eeddc6), color-stop(100%,#f8edde));
    background: -webkit-linear-gradient(top,  #eeddc6 0%,#f8edde 100%);
    background: -o-linear-gradient(top,  #eeddc6 0%,#f8edde 100%);
    background: -ms-linear-gradient(top,  #eeddc6 0%,#f8edde 100%);
    background: linear-gradient(to bottom,  #eeddc6 0%,#f8edde 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#eeddc6', endColorstr='#f8edde',GradientType=0 );
}
.wrapper {
    width: 980px;
    padding: 0 10px;
    margin: 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:26:49.170

似乎您唯一的选择是将您放在一边`position: absolute;`然后设置`right: 0;`它..它显然会在页面的右侧，因此您需要根据您的需要和宽度调整正确的值。

# testing - 负载测试 - 运行负载测试时套接字连接中止

> ID：15080671
> 
> 赞同：1
> 
> 时间：2013-02-26T03:07:49.437
> 
> 标签：testing, load

我正在运行负载测试，以查看 WCF 服务在高峰时间（重负载）期间的性能。我正在使用 Step-Load，我们逐步推送虚拟用户。当我在前几分钟开始运行负载测试时，测试运行顺利，随着负载的增加，一段时间后突然触发以下错误，

“测试方法“XYZ”抛出异常：

```
System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. ---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host". 
```

我尝试了很多在网上找到的解决方案，但没有一个对我有用。我尝试在配置文件中更改默认超时、最大连接数、最大并发连接数等。我真的很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T12:14:58.753

我之前搬到 WCF 时遇到了类似的问题。它可能与 WCF 处理连接的方式有关。

对我来说，解决方案是将每个测试移到单独的 ApplicationDomain 中。

# python - 如何将json之类的数据结构发布到flask？

> ID：15080672
> 
> 赞同：14
> 
> 时间：2013-02-26T03:08:04.117
> 
> 标签：python, json, post, flask

我有一个这样的数据结构：

![在此处输入图像描述](../Images/9f8a753de15667ac079ac859ac60ad4c.png)

我尝试通过 $.ajax 将其发送到服务器：

```
$.ajax({
    type: 'POST',
    data: post_obj, //this is my json data
    dataType: 'json',
    url: '',
    success: function(e){
       console.log(e);
    }
}); 
```

我想通过烧瓶把它放在服务器上：`title = request.form['title']` 工作正常！

但我怎么得到`content`？

`request.form.getlist('content')`不起作用。

这是萤火虫中的帖子数据：

![在此处输入图像描述](../Images/38f324fc530f2039a860210af9fb8133.png)

非常感谢 :D

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T11:36:30.010

您正在发送编码为查询字符串而不是 JSON 的数据。Flask 能够处理 JSON 编码的数据，所以这样发送更有意义。以下是您需要在客户端执行的操作：

```
$.ajax({
    type: 'POST',
    // Provide correct Content-Type, so that Flask will know how to process it.
    contentType: 'application/json',
    // Encode your data as JSON.
    data: JSON.stringify(post_obj),
    // This is the type of data you're expecting back from the server.
    dataType: 'json',
    url: '/some/url',
    success: function (e) {
        console.log(e);
    }
}); 
```

在服务器端数据通过[`request.json`](http://flask.pocoo.org/docs/api/#flask.Request.json)（已经解码）访问：

```
content = request.json['content'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T03:33:33.020

如果您检查 jQuery 提交的 POST，您很可能会看到它`content`实际上是作为`content[]`. 要从 Flask 的`request`对象访问它，您需要使用`request.form.getlist('content[]')`.

如果您希望它通过 as `content`，您可以添加`traditional: true`到您的`$.ajax()`通话中。

[有关这方面的更多详细信息，请参见http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)的“数据”和“传统”部分。

# direct3d - HLSL 投影着色器

> ID：15080681
> 
> 赞同：2
> 
> 时间：2013-02-26T03:09:07.213
> 
> 标签：direct3d, hlsl

我正在将场景渲染到纹理，然后使用投影绘制具有该纹理的水平面。我在网上看到的大多数示例都在视图/投影矩阵中传递给顶点着色器并转换顶点，然后在像素着色器中进行：

```
projection.x = input.projectionCoords.x / input.projectionCoords.w / 2.0 + 0.5;
projection.y = input.projectionCoords.y / input.projectionCoords.w / 2.0 + 0.5; 
```

我有一个着色器，它可以执行以下操作，它也可以工作，但我不知道我在哪里找到了这个特定的代码，也不知道它如何与上面的代码给出相同的结果。这是我的代码

顶点着色器：（世界是一个身份矩阵，viewProj 是我的相机组合的 viewProjection 矩阵）：

```
output.position3D =  mul(float4(vsin.position,1.0), world).xyz;
output.position = mul(float4(output.position3D,1.0), viewProj);

output.reflectionTexCoord.x = 0.5 * (output.position.w + output.position.x);
output.reflectionTexCoord.y = 0.5 * (output.position.w - output.position.y);
output.reflectionTexCoord.z = output.position.w; 
```

像素着色器：

```
float2 projectedTexCoord = (input.reflectionTexCoord.xy / input.reflectionTexCoord.z); 
```

让我感到困惑的是`0.5 * (output.position.w + output.position.x)`and的用法`0.5 * (output.position.w - output.position.y)`。这如何产生相同的效果？ w 分量在这里是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:36:09.857

过了一会儿，我意识到它最终是同一件事：

```
0.5 * (output.position.w + output.position.x);

0.5 * output.position.w + 0.5 * output.position.x 
```

然后在像素着色器中：

```
(0.5 * output.position.w + 0.5 * output.position.x) / output.position.w

(0.5 * output.position.w)/output.position.w + (0.5 * output.position.x) / output.position.w 
```

第一部分变为 0.5 ：

```
0.5 + 0.5 * ( output.position.x / output.position.w) 
```

这等于：

```
(output.position.x / output.position.w) / 2 + 0.5 
```

我相信将此计算移至顶点着色器会更有效，因此我将把它留在那里。

要将计算完全移出着色器，可以在客户端计算矩阵：

```
XMMATRIX v = XMLoadFloat4x4(&view);
XMMATRIX p = XMLoadFloat4x4(&projection);

XMMATRIX t(
    0.5f, 0.0f, 0.0f, 0.0f,
    0.0f, -0.5f, 0.0f, 0.0f,
    0.0f, 0.0f, 1.0f, 0.0f,
    0.5f, 0.5f, 0.0f, 1.0f);

XMMATRIX reflectionTransform = v * p * t;
XMStoreFloat4x4(&_reflectionTransform, XMMatrixTranspose(reflectionTransform)); 
```

那么所有顶点着色器所要做的就是：

```
output.reflectionTexCoord = mul(float4(output.position3D,1.0), reflectionProjectionMatrix); 
```

# ios - iOS 6 w/PhoneGap 中的持久存储（WebSQL 和本地存储）

> ID：15080684
> 
> 赞同：7
> 
> 时间：2013-02-26T03:09:29.883
> 
> 标签：ios, sqlite, cordova, local-storage

iOS 不持久化 localStorage/WebSQL 数据库的问题已在此处和其他站点上经常讨论。我遇到的问题是变通办法如此多样，并且随着时间的推移而演变。我发现了 2 个使用本地 SQLite API 的不同 PhoneGap 插件，一个定期将 SQL 数据库复制到文档目录的插件，甚至在 Xcode .plist 文件中建议设置，可用于指定 SQL 数据库的位置。这很令人困惑，因为我不确定哪种解决方案最适用于当前时间点（iOS 6+ 和 Cordova 2.4+）。这是现在内置在 Cordova 中还是我仍然需要一个插件。如果是这样，哪个插件？在 Xcode 配置文件中设置数据库位置怎么样。任何帮助都深表感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T22:52:19.227

当前版本的 phonegap 不需要外部插件即可将 SQL 与 sqlite 数据库一起使用。当前代码与 iOS 兼容。您不需要编写/实现自己的解决方法，并且您可以确定 phonegap 将实现无论您需要让您的应用程序运行（这就是他们将填补 GAP 的名称 phone-gap 的原因）。

[http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.1.0/cordova_storage_storage.md.html#Storage)

# c# - 脑筋急转弯：带有 C# 类的自定义逻辑字符串

> ID：15080685
> 
> 赞同：3
> 
> 时间：2013-02-26T03:09:32.923
> 
> 标签：c#, inheritance, logic

所以，我的基本设置是这样的：我有项目，这些项目仅限于不同的类别。这些物品具有效果，也仅限于不同的类别。例如，我可能有一件只能由精灵使用的物品，而另一件物品可能是每个人都可以使用的，但会给精灵提供特定的奖励/效果。

这是一个限制类：

```
public class Restriction {
    private int _base_id = 0;
    private bool _qualify = true;
    public Restriction() { }
    // ... Base_ID and Qualify getters and setters here
    public virtual bool Check(int c) {
        if(_qualify) { return c == _base_id; }
        else { return c != _base_id; }
} 
```

Restriction 类的子类可能是 RaceRestriction，它只覆盖构造函数：

```
public RaceRestriction(reference.races r, bool qual) {
    Base_ID = (int)r; Qualify = qual;
} 
```

reference.races r 是参考文件中的枚举。这里的想法是我可以将这个“限制”语法扩展到我在参考文件中定义的任何类——所以我可以对种族、类、统计数据等任何我需要的东西进行限制。

所以，这一切都在稍后达到高潮，当我定义（例如）一个项目时，它对谁可以装备它有限制。

下面是 Equipment 类的一个片段，我在其中定义了一个设备供以后使用（希望它是可读的）：

```
public Equipment() { 
    ...
    _master_equipment_list[1] = new Equipment {
        Name = "Sword",
        Description = "It's just a sword for demonstration",
        Stats = {
            new Attribute {
                Stat_Modifier = new KeyValuePair<reference.stats, int>(reference.stats.ATTACK, 5),
                Restrictions = {
                    new RaceRestriction(reference.races.TROLL, false)
                }
            }
        },
        Restrictions = {
            new ClassRestriction(reference.class.WARRIOR, true)
        }
    } 
```

所以这背后的想法是，使用这个系统，我定义了一把只能由战士使用的剑（基础战士对物品的真正限制），它给予任何使用它的巨魔 5 攻击。

我让自己陷入困境的是，这仅适用于逻辑 AND 或逻辑 OR 的思想串。假设我的物品说“战士可以使用这个”，它说“精灵可以使用这个”。我的意思是“战士还是精灵”还是“战士精灵”？

我认为，这种区别将是必要的——所以我需要为每个限制附加一些逻辑，并从本质上说，我认为，将一组限制相互关联，将字符串与其他一组限制等联系起来.，但我觉得那会很快失控。

有没有更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T03:23:06.630

我不会定义特定的限制类，而是通过定义一个`IRestrictable`由类实现的接口来设计它`Equipment`。此接口将包含至少一个称为`CheckEligibility`（或类似）的方法，该方法将返回一个布尔值。然后，您的设备类可以根据您想要的任何输入以及该类当时可用的任何信息，自由使用它喜欢的任何逻辑表达式来得出答案。如果您需要检查不同情况下的限制，您可以在接口上使用多种方法。您可以自由地实现从`Equipment`具有复杂规则的特定类型设备派生的特定类。

# c - 没有双重调用的 C 和赋值中的 if 语句

> ID：15080687
> 
> 赞同：1
> 
> 时间：2013-02-26T03:10:03.353
> 
> 标签：c, if-statement

是否有可能实现一个 if 来检查 -1 并且如果不是负 -1 而不是分配值。但是不必调用该函数两次？或将返回值保存到局部变量。我知道这在汇编中是可能的，但是有交流实现吗？

```
int i, x = -10;
if( func1(x) != -1) i = func1(x); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:18:33.120

> 将返回值保存到局部变量

以我的经验，避免局部变量很少值得失去清晰度。大多数编译器（大部分时间）通常可以避免相应的加载/存储，而只为这些本地变量使用寄存器。所以不要逃避，拥抱它！被保留的维护者的理智可能是你自己的。

> 我知道这在汇编中是可能的，但是有交流实现吗？

如果事实证明您的情况是实际适合汇编的情况，请在头文件中声明并链接到汇编例程。

建议：

```
const int x = -10;
const int y = func1(x);
const int i = y != -1
            ? y
            : 0 /* You didn't really want an uninitialized value here, right? */ ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:10:53.970

这取决于 func1 是否产生任何副作用。以 rand() 或 getchar() 为例。连续两次调用这些函数可能会导致不同的返回值，因为它们会产生副作用；rand() 更改种子，getchar() 使用标准输入中的字符。也就是说，*通常会*`rand() == rand()`1^(评估)为假，并且无法可靠地预测。假设 func1 要产生副作用，对于具有相同输入的连续调用，返回值可能不同，因此可能评估为假。*^(`getchar() == getchar()``func1(x) == func1(x)`)*

 *如果 func1 没有产生任何副作用，并且输出仅基于输入是一致的，那么我看不出你为什么不解决`int i = func1(x);`，并且基于是否的逻辑`i == -1`。编写最少重复的代码可以提高易读性和可维护性。如果您担心这样做的效率，请不要担心。您的编译器很可能足够聪明，可以消除死代码，因此它可以很好地将其转换为相当有效的代码。

^(1\. ...至少在任何理智的标准库实现中。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:23:24.183

我能想到的最好的实现是：

```
int i = 0; // initialize to something
const int x = -10;
const int y = func1(x);

if (y != -1)
{
  i = y;
} 
```

const 会让编译器进行它认为最好的任何优化（可能是内联 func1）。注意 func 只被调用一次，这可能是最好的。const y 还允许将 y 保存在一个寄存器中（无论如何它都需要它来执行 if）。如果您想提供更多建议，您可以这样做：

```
register const int y = func1(x); 
```

但是，编译器不需要遵守您的 register 关键字建议，因此最好将其排除在外。

根据布莱恩的回答进行编辑：

```
int i = ((func1(x) + 1) ?:0) - 1; 
```

顺便说一句，我可能不建议使用它，但它确实回答了这个问题。这是基于[这里的 SO 问题](https://stackoverflow.com/questions/3319075/ternary-conditional-operator-behaviour-when-leaving-one-expression-empty)。对我来说，我仍然对这个问题的原因感到困惑，这似乎更像是一个谜题或工作面试问题，而不是在“真实”程序中遇到的问题？我当然想听听为什么需要这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T03:12:48.650

```
int c;
if((c = func1(x)) != -1) i = c; 
```*

# objective-c - 仅在可见窗口中更改时调用方法

> ID：15080691
> 
> 赞同：1
> 
> 时间：2013-02-26T03:10:21.343
> 
> 标签：objective-c, xcode, macos, cocoa

每次当前可查看的系统窗口发生可见变化时，我都需要调用一个方法。例如，我得到了完整的可见窗口列表：

```
CFArrayRef openWindows =(CGWindowListCreate(kCGWindowListOptionOnScreenOnly | kCGWindowListExcludeDesktopElements, kCGNullWindowID)); 
```

这将返回一个数组，例如：

```
{
        kCGWindowAlpha = 1;
        kCGWindowBounds =         {
            Height = 713;
            Width = 1279;
            X = 1;
            Y = 22;
        };
        kCGWindowIsOnscreen = 1;
        kCGWindowLayer = 0;
        kCGWindowMemoryUsage = 3772468;
        kCGWindowName = "Stack Overflow";
        kCGWindowNumber = 7138;
        kCGWindowOwnerName = "Google Chrome";
        kCGWindowOwnerPID = 49972;
        kCGWindowSharingState = 1;
        kCGWindowStoreType = 2;
    } 
```

由于 kCGWindowMemoryUsage 值不断变化，我不能简单地将以前存储的 CFArrayRef 与当前进行比较。

# ruby - ||= 运算符在 Ruby 中使用 require 时行为不正确

> ID：15080692
> 
> 赞同：0
> 
> 时间：2013-02-26T03:10:40.813
> 
> 标签：ruby

我是 Ruby 新手，很抱歉这个 Noobie 问题

```
#file1.rb

a = 1

#file2.rb

require './file1'

a ||= 2

puts a # show 2, not 1 as expected 
```

我不知道为什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:12:16.983

`a`在 file1 中是 file1 的本地文件。它在 file2 中不可见。行为是正确的。

您可以使用实例变量使变量在其他文件中可见。

```
#file1.rb

@a = 1

#file2.rb

require './file1'

@a ||= 2

puts @a # >> 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:13:02.870

尝试改用`@a`（实例变量）。`a`正如你所拥有的，它是一个局部变量，不能以这种方式访问​​。

# django - Django Admin 根据 URL 限制结果

> ID：15080694
> 
> 赞同：0
> 
> 时间：2013-02-26T03:10:57.430
> 
> 标签：django, django-admin

我正在处理会议注册页面。该系统可以允许注册和使用多个会议。

我正在使用管理员来管理会议，但我需要在管理系统中使用一种方法来仅查看为给定会议注册的人员。我知道我可以使用列表过滤器，但我想知道是否可以以某种方式使用 URL。

例如，是否有可能做这样的事情？/admin/appname/modelname/SomeConference 并且仅显示与该会议关联的该模型的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:54:28.873

这就是过滤器的专门用途。

如果您查看在 Admin 中激活过滤器时会发生什么，它只会更新 URI 以包含查找值：

[http://example.com/admin/core/model/?model_id__exact=1](http://example.com/admin/core/model/?model_id__exact=1)

所以“技术上”，是的，有一种方法可以使用 URL 来做到这一点。

因为这就是过滤器最初的工作方式。

# webview - Win 8 webview控件闪烁背景色一瞬间

> ID：15080695
> 
> 赞同：3
> 
> 时间：2013-02-26T03:11:02.353
> 
> 标签：webview

我的应用程序具有白色背景，但在将 HTML 字符串加载到 WebView 之前，以及当托管 WebView 的用户控件折叠时，WebView 控件的区域会闪烁 Windows 8 开始屏幕的背景颜色。有谁知道如何解决这个问题，以便在我加载/隐藏 WebView 时我的白色应用程序不会闪烁蓝色？

请注意，我尝试将 webview 的背景颜色设置为白色（通过将主体设置为白色背景颜色的短 html 字符串）以及将控件的高度和宽度设置为零，然后将其调整为正确的大小在它应该显示的 html 被传递给 webview 控件之后，但问题仍然存在*。*

我注意到这里有一个关于这个的问题（[来自 social.msdn.microsoft.com 上的某人的相同问题](http://social.msdn.microsoft.com/Forums/pl-PL/winappswithcsharp/thread/64be28ae-ff0f-4673-b729-9a9a63bd3882)）但那是旧的并且是在 Windows 8 正式发布之前。只是想知道它是否真的解决了？

# bash - Bash-如何将转义字符打包成字符串中的特殊字符（$）？

> ID：15080698
> 
> 赞同：0
> 
> 时间：2013-02-26T03:11:07.960
> 
> 标签：bash, sed

我在 bash 中有一个从函数调用 getpassword() 返回的变量，它返回“apple$123123”

```
FOO=`getpassword` 
```

我想使用内部包含 $ 的 FOO 变量并传递给期望程序

```
 expect -c "\
    set timeout 90
    set env(TERM)
    spawn rdesktop 192.168.11.1
    expect \"Password:\"
    send -- \"'${FOO}\n'\"
    interact
  "
} 
```

出现错误，因为 $FOO 包含美元符号

```
Password: can't read "123": no such variable
    while executing 
```

我该如何解决这种问题？我认为的方式是使用 sed 将转义字符打包到 FOO 中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:08:31.883

你可以试试这个：

```
# below is purposely on one line -- it sets the FOO env var
# only for the duration of the expect command.
FOO=$(getpassword) expect -c '
    set timeout 90
    set env(TERM) {are you missing something here?}
    spawn rdesktop 192.168.11.1
    expect "Password:"
    send -- "$env(FOO)\r"    # you send '\r' not '\n'
    interact
' 
```

使用单引号可以更容易地编写（和阅读）expect 脚本（没有所有的反斜杠）。测试：

```
$ getpassword() { echo 'abc$123'; }
$ FOO=$(getpassword) expect -c 'puts "pw=$env(FOO)"'
pw=abc$123
$ echo "> $FOO <"
>  < 
```

# sharepoint-2010 - 如何在 Sharepoint 2010 中自定义列表的语言视图

> ID：15080699
> 
> 赞同：3
> 
> 时间：2013-02-26T03:11:11.330
> 
> 标签：sharepoint-2010

我已将语言包安装到 SharePoint 2010。

我在 Visual Studio 中创建了项目 SharePoint 2010。在项目中，我创建了一个特性并添加了资源文件 RESX 和特性接收器方法：

```
public override void FeatureActivated(SPFeatureReceiverProperties properties) 
```

当我创建列表 RESX 文件时，更改语言时不应用翻译。这是我的代码示例，但它不起作用：

```
 var listView = new StringCollection();

               listView.Add("$Resources:lblAccountName");  // error

               listView.Add("$Resources:lblFullName");  // error

               list.Views.Add("view1", listView, string.Empty, 30, true, true);

               list.Update(); 
```

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:24:59.827

我总是会创建一个 ResourceManager 对象来从本地化资源文件中检索字符串。例如

```
public static ResourceManager rm = new ResourceManager("MyProject.SharePointRoot.Resources.LanguageLocalization", typeof(MyProject.SharePointRoot.Resources.LanguageLocalization).Assembly); 
```

注意：“LanguageLocalization”是我的资源 resx 文件的名称。

接着：

```
 var listView = new StringCollection();

           listView.Add(rm.GetString("lblAccountName"));

           listView.Add(rm.GetString("lblFullName"));

           list.Views.Add("view1", listView, string.Empty, 30, true, true);

           list.Update(); 
```

请参阅此处了解更多信息[http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx](http://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx)

# vb.net - 从 vb.net 中的 datagridview 中删除数据源后如何保留数据？

> ID：15080700
> 
> 赞同：3
> 
> 时间：2013-02-26T03:11:30.160
> 
> 标签：vb.net, datagridview

我正在通过 DataTable 或 DataSet 填充 DataGridView (grid1)。
我可以删除一组选定的行，然后将它们添加到另一个未绑定的 DataGridView (grid2)。
当我从 grid2 中取出一行然后将其添加到 grid1 时，就会出现问题。

> 当控件是数据绑定时，不能以编程方式将行添加到 DataGridView 的行集合。

发生这种情况是因为

```
grid1.DataSource = myDataTable
or
grid1.DataSource = myDataSet 
```

但是当我这样做时

```
grid1.DataSource = Nothing 
```

删除 grid1 中的所有行。

无论如何要从其数据源中分离 datagridview 但保留行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:57:09.390

我还没有尝试过，但是看看 Copy 方法：

```
grid1.DataSource = myDataTable.Copy 
```

MSDN 说*“复制此 DataTable 的结构和数据”。* 可能是复制它也会解除绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:31:44.963

我可以想到一个解决方案，其中我将添加另一个未绑定的 DataGridView (grid3)，
以编程方式将绑定的 datagridview (grid1) 的内容复制到 grid3，
然后从那里操作它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T20:28:31.770

如果您有一个数据绑定网格，您可能根本不应该使用网格中的行。更改您设置为数据源的表，然后网格将反映新行。

```
dim row as datarow = myDataTable.newrow()
row.item("Column1") = "new value"
myDataTable.rows.add(row) 
```

现在新行将显示在数据绑定网格上。您也可以通过从数据源数据表中删除行来从网格中删除行。

# java - 如何单击和取消单击以更改按钮的颜色？

> ID：15080702
> 
> 赞同：1
> 
> 时间：2013-02-26T03:11:39.993
> 
> 标签：java, click

我的 Netbeans GUI 已设置，因此原始按钮的颜色为绿色（修改了属性）。我为我的九个绿色按钮中的每一个都设置了代码，如果你点击它，它会变成灰色，因为它被“选中”。现在，我不知道如果再次单击它，它应该如何变回绿色作为“未选中”。我认为创建一个布尔方法效果最好，但我不是 100% 肯定的。

```
private void btnTwoActionPerformed(java.awt.event.ActionEvent evt) {
    btnTwo.setBackground( backgroundColor );
} 
```

到目前为止基本上就是这样，背景颜色是灰色，而我设置的原始颜色也是绿色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:54:39.570

到目前为止，您应该使用 setEnabled() 函数，如果它为真，则必须使用一种颜色，否则，如果它为假，则给出如下颜色：

```
 mybutton.setEnabled(true);

      mybutton.setEnabled(false); 
```

或者您可以使用 isEnabled() 方法来检查按钮是否启用，然后设置您想要玩得开心的适当颜色！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:07:53.763

只需使用 if 条件来检查按钮是否被选中。并根据该条件为按钮分配颜色。

# c# - 选择 TreeView 的所有已检查节点的 XPATH 表达式是什么？

> ID：15080704
> 
> 赞同：0
> 
> 时间：2013-02-26T03:11:46.933
> 
> 标签：c#, xml, xpath, treeview

这是我的 XML：

```
<Tree CheckBoxes="True" CheckChildNodes="True" TriStateCheckBoxes="True" MultipleSelect="True" EnableAjaxSkinRendering="False" BorderStyle="Inset" Height="100%"  Width="99%" RenderMode="Lightweight">
<Node Text="Consumer" Value="79" Expanded="True" Checked="True" >
  <Node Text="BASIC" Value="7983" Expanded="True" Checked="True" >
    <Node Text="RED" Value="7983BL" Checked="True" >
      <Node Text="E17" Value="906268" Checked="True"  />
      <Node Text="W57" Value="906390" />
    </Node>
    <Node Text="BLUE" Value="7983CG" >
      <Node Text="T2T" Value="906359"  />
    </Node>
    <Node Text="GREEN" Value="7983GO" >
      <Node Text="VCR" Value="906386"  />
    </Node>
    <Node Text="WHITE" Value="7983GP" Checked="True" >
      <Node Text="2B3" Value="906246" Checked="True"  />
    </Node>
  </Node>
  <Node Text="ENHANCED" Value="7984" Checked="True" >
    <Node Text="PURPLE" Value="7984CN" Checked="True" >
      <Node Text="V8Q" Value="906588" Checked="True"  />
      <Node Text="V8R" Value="906589"  />
      <Node Text="V8S" Value="906590" Checked="True"  />
    </Node>
    <Node Text="ORANGE" Value="7984CV" >
      <Node Text="3A5" Value="906408"  />
    </Node>
  </Node>
</Node> 
```

在此 XML 中，如果任何子节点具有属性 Checked="True"，则其父节点也将具有 Checked="True"。无论节点级别如何，我都希望 XPath 表达式排除所有没有属性 Checked="True" 的节点。

谢谢， 尼桑特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:30:36.540

```
XDocument xml = XDocument.Load(reader);
xml.Root.DescendantsAndSelf().Where(node =>
{
  try
  {
    return node.Attribute("Checked").Value.ToString() != "True";
  }
  catch
  {
    //no attribute @Checked 
    return true;
  }
}).Remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:11:17.450

鉴于此，我想删除根本不包含“已检查”属性的节点，我找到了一种更快的方法：

XDocument xml = XDocument.Load(阅读器); xml.Root.DescendantsAndSelf().Where(node => node.Attribute("Checked") = null).Remove();

# iphone - iOS UITableView 错误

> ID：15080712
> 
> 赞同：2
> 
> 时间：2013-02-26T03:12:30.487
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我正在练习子类 UItableView 单元格并在下面不断收到此错误，我还添加了 conditionCell 代码：

```
013-02-25 22:07:24.757 tableForms[52558:c07] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<conditionCell 0x715d930> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key title.'
*** First throw call stack:
(0x1c94012 0x10d1e7e 0x1d1cfb1 0xb7de41 0xaff5f8 0xaff0e7 0x65f23 0xb29b58 0x233019 0x10e5663 0x1c8f45a 0x231b1c 0xc733f 0xc7615 0xc7645 0x2d7e 0xd08fb 0xd09cf 0xb91bb 0xc9b4b 0x662dd 0x10e56b0 0x2290fc0 0x228533c 0x2290eaf 0x1052bd 0x4db56 0x4c66f 0x4c589 0x4b7e4 0x4b61e 0x4c3d9 0x4f2d2 0xf999c 0x46574 0x4676f 0x46905 0x4f917 0x1396c 0x1494b 0x25cb5 0x26beb 0x18698 0x1befdf9 0x1befad0 0x1c09bf5 0x1c09962 0x1c3abb6 0x1c39f44 0x1c39e1b 0x1417a 0x15ffc 0x238d 0x22b5)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

下面是我的条件单元格代码：

```
#import <UIKit/UIKit.h>

@interface conditionCell : UITableViewCell
@property (weak, nonatomic) IBOutlet UITextField *conditionCell;
@property (weak, nonatomic) IBOutlet UITextField *amountCell;
@property (weak, nonatomic) IBOutlet UILabel *dollarLabel;

@end

#import "conditionCell.h"

@implementation conditionCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

有人能帮助我吗？

这是标题代码：

```
#import <UIKit/UIKit.h>

@interface titleFieldCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UITextField *title;

@end

#import "titleFieldCell.h"

@implementation titleFieldCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

@end 
```

这是我的表格视图代码：

```
#import <UIKit/UIKit.h>

@interface TableView : UITableViewController

@end

#import "TableView.h"
#import "imageCell.h"
#import "titleFieldCell.h"
#import "descriptionCell.h"
#import "conditionCell.h"

@interface TableView ()

@end

@implementation TableView

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return 4;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{

    //for height
    if (indexPath.row == 0 ) {
        return 130;
    }

    return 50;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //static NSString *CellIdentifier = @"Cell";
    //UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];*/
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];

    if(indexPath.row == 0){
        imageCell *cell = [tableView dequeueReusableCellWithIdentifier:@"imageCell" forIndexPath:indexPath];
        if(!cell){

            cell = [[imageCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"imageCell"];
        }
        return cell;
    }
    else if (indexPath.row == 1) {
        descriptionCell *cell = [tableView dequeueReusableCellWithIdentifier:@"descriptionCell" forIndexPath:indexPath];
        if(!cell){

            cell = [[descriptionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"descriptionCell"];
        }
        return cell;

    }
    else if(indexPath.row == 2)
    {
        titleFieldCell  *cell = [tableView dequeueReusableCellWithIdentifier:@"titleCell" forIndexPath:indexPath];
        if(!cell){

            cell = [[titleFieldCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"titleCell"];
        }
        return cell;
    }
    else if(indexPath.row == 3)
    {
        conditionCell  *cell = [tableView dequeueReusableCellWithIdentifier:@"conditionCell" forIndexPath:indexPath];
        if(!cell){

            cell = [[conditionCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"conditionCell"];
        }
        return cell;
    }

    return cell;

}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:03:47.107

**根据我的经验：**

如果将`UIControl IBOutlet` Interface Builder 中的任何连接到`XIB's File's Owner`. 并且意外地（*或错误地*）`IBOutlet`被删除了，`File's Owner`但`UIControl` 可能仍然存在（*availabel*）的引用`XIB`，当时产生了以下错误

> “由于未捕获的异常‘NSUnknownKeyException’而终止应用程序：原因”

您应该根据上述问题找到您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:21:30.563

几天前我遇到了同样的问题。我不小心将故事板中的 UITableView 而不是 UITableViewController 子类化了。如果您通过情节提要执行此操作，请检查以确保您的子类化正确。可能就是这样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:25:34.033

如果您在连接到 xib 文件时更改了“title”属性的名称，则可能会发生这种情况。断开它并重新连接它，这可能会解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T04:59:37.917

如果您在 XIB 中使用 conditionCell 的出口连接，请删除它们并重新连接，尤其是标题属性（如果有）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T09:45:06.117

您已经创建了一个自定义单元格，并且与子视图的 IBOutlet 连接未正确建立。连接所有插座。

# database - 如何使用 node.js 获取特定行和列的值

> ID：15080713
> 
> 赞同：0
> 
> 时间：2013-02-26T03:12:34.713
> 
> 标签：database, node.js

我对 node.js 很陌生

对于我的应用程序，我目前正在使用下面的代码获取一组行，并遍历每一行以获取特定列的值...

```
 query = 'select ' + colName + 
            ' from ' + rows[0].tablename + 
            ' where ' + 
            'dictionaryid=' + rows[0].dictionaryid + 
            ' and id between ' + lower + ' and ' + upper;
    connection.query(query, function(err, rows1, fields) {
      if (err) {
        console.log(err);
        throw err;
      }

      var contents = [];
      rows1.forEach(function(elem) {
        for (var key in elem) {
            if (key == colName) {
                           contents.push(elem[key]);         
                }
         }
      }); 
```

因此，在上面的代码中，我在 rows1 中获取一组行，并使用 forEach 遍历所有行。

我想要做的是访问类似 rows1[i][key] 的东西，即像第 4 行的第 3 列。

我该怎么做。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:51:29.690

你可以使用[下划线 toArray](http://underscorejs.org/#toArray)来做这样的事情：

```
 var _ = require('underscore');

  var contents = [];
  rows1.forEach(function(elem) {
    contents.push(_.toArray(elem));
  });

  var someValue = contents[3][2]; //3rd column of 4th row. 
```

# sql - 基于 select SQL server 的更新语句

> ID：15080715
> 
> 赞同：1
> 
> 时间：2013-02-26T03:12:51.567
> 
> 标签：sql, sql-server, select, sql-update, updates

我选择了完美的选择。

```
update ClientS set StatusID=4
where ClientID= (select P.ClientID
   ,LastName+' '+FirstName as Name 
   ,Address
   ,max(p.PickupDate)as 'Last Pickup'
   ,DATEDIFF(month,max(p.PickupDate),GETDATE())as'last pickup was months ago'
from Pickup P
join Clients C on P.ClientID= C.ClientID
where WIC=0 and C.StatusID = 1 or WIC=0 and C.StatusID = 2
group by p.clientid, lastname + ' ' + firstname,address
order by 4) 
```

我需要基于`last pickup was months ago`此选择中的一个更新语句。我需要更新表中的客户`StatusID`，`Clients`并将其设置为 4，仅针对此选择中最后一次取货时间超过 2 个月的客户。到目前为止我有这个

```
create procedure pr_UpdateStatusHwoPickupMoreThanTwoM 
AS
update ClientS set StatusID=4
where ClientID= (select P.ClientID
   ,LastName+' '+FirstName as Name 
   ,Address
   ,max(p.PickupDate)as 'Last Pickup'
   ,DATEDIFF(month,max(p.PickupDate),GETDATE())as'last pickup was months ago'
from Pickup P
join Clients C on P.ClientID= C.ClientID
where WIC=0 and C.StatusID = 1 or WIC=0 and C.StatusID = 2
group by p.clientid, lastname + ' ' + firstname,address
order by 4) 
```

我知道这是不对的，我需要以某种方式指定最后一次取货是在 2 个多月前，但无法弄清楚如何`StatusID`只为那些取货和更改`ClientID`。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:33:30.210

试试这个查询

对于 SQL 服务器

```
update ClientS set StatusID=4
where ClientID= (select P.ClientID
from Pickup P
join Clients C on P.ClientID= C.ClientID
where WIC=0 and C.StatusID = 1 or WIC=0 and C.StatusID = 2
group by p.clientid 
having max(p.PickupDate) < DATEADD(month,-2,GETDATE())); 
```

您的内部查询返回 1 行的多个列，您仅将其与 clientId 进行比较，这就是您没有得到所需结果的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:37:55.320

尝试这个

```
update C
set StatusID=4
from (SELECT P.ClientID, MAX(p.PickupDate) MaxPickupDate
      FROM @Pickup P
      group by P.Clientid) P
     join @Clients C on P.ClientID= C.ClientID
where C.WIC=0 and C.StatusID in (1, 2)
      AND P.MaxPickupDate<DATEADD(month,-2,GETDATE()) 
```

另外，你这里有错误

```
where WIC=0 and C.StatusID = 1 or WIC=0 and C.StatusID = 2 
```

对于 WIC=0 的任何行，此条件都将成立，您可以通过这种方式进行更正

```
WHERE WIC=0 AND C.StatusID in (1,2) 
```

# c - 使用 C 的顺序搜索和释放数组

> ID：15080716
> 
> 赞同：0
> 
> 时间：2013-02-26T03:12:52.650
> 
> 标签：c

所以我试图使用顺序搜索来检查一个字符串在我的数组中出现了多少次。在我的程序中，我要求用户选择他们希望打开并处理的文件。

```
void search(char **table, int **frequency, int wordSize)
{
//  Local Declaration
int i, j;
int count = 1;
char target[25];

// Statement
for(i = 0; i < wordSize; i++)
{
    if(table[i] != NULL)
    {
        strcpy(target, table[i]);
        for(j = i + 1; j < wordSize; j++)
        {
            if(strcmp(target, table[j]) == 0 && target != table[i])
            {
                count++;
                free(table[j]);
                table[j] = NULL;
            }
        }
    }
    count = 1;
}

return;
} 
```

所以在这两个文件中，其中一个打开并处理没有任何问题，但是当我尝试打开第二个文件时它崩溃了。我试图了解导致我的程序崩溃的原因，因为这两个文件都只包含字符串，并且没有一个字符串超过 24 个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:16:47.120

```
if(table[j] != NULL && strcmp(target, table[j]) == 0 && target != table[i]) 
```

您可能正在访问您在上一次迭代`table`中编辑的变量。`NULL`

# python - Python ctypes.string_at 释放行为

> ID：15080717
> 
> 赞同：3
> 
> 时间：2013-02-26T03:12:55.163
> 
> 标签：python, memory-management, ctypes

我正在使用 ctypes 将一些 C 函数从 DLL 公开到 Python 脚本。其中一个函数返回一个动态大小的字符数组，我希望能够在 Python 中读取该数组的内容，还希望在我完成后释放数组内存的属性句柄。

示例 C 代码：

```
...

#ifdef __cplusplus
extern "C"
{
#endif
    __declspec(dllexport) char * WINAPI get_str()
    {
        int str_len = ... // figure out how long it is gonna be and set it here
        char *ary = (char *)malloc(sizeof(char) * str_len);

        // populate the array
        ...

        ary[str_len - 1] = '\0';

        return ary;
    }

#ifdef __cplusplus
}
#endif 
```

我构建了我的 DLL，将其复制到可以找到的位置，然后使用以下 Python 代码：

```
import ctypes

my_dll = ctypes.WinDLL("MyDLLName.dll")

some_str = ctypes.string_at(my_dll.get_str())

print some_str 
```

这段代码一切正常，正如您所期望的那样。我的问题是：因为 ctypes.string_at 在指定的内存位置创建一个字符串，当 some_str 在 Python 解释器中超出范围时，该内存会被垃圾收集，还是我需要手动释放它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T03:31:32.367

`string_at`在新的内存位置创建一个新的 Python 字符串，完全独立于调用它的内存位置。

Python 或 ctypes 无法猜测您的本机代码返回了什么 - 就它而言，它只是一个数字（在这种情况下恰好是一个有效的指针）。

因此，经验法则是：如果您编写分配内存的 C 代码，您还应该编写等效的 C 代码来取消分配它 - 并调用从您的 ctypes 使用 Python 代码中释放 C 代码。

对于像这样的快速脚本和示例，由于您知道它是一个简单的分配字符串，您可以通过使用 ctypes 调用系统`free`函数直接从 Python 端释放它。

也就是说，将返回的指针存储在 Python var 中：（您可能会将其转换为正确的 ctypes 指针类型，也可能不会），并在运行 string_at 之后，使用：

```
pointer = my_dll.get_str()
some_str = ctypes.string_at(pointer)
# This is windows specific - 
# on Posix, one have to load "libc.so" and use "free" from there:
ctypes.cdll.msvcrt.free(pointer) 
```

# php - 在 PHP / CodeIgniter 中捕获意外终止

> ID：15080719
> 
> 赞同：1
> 
> 时间：2013-02-26T03:13:15.137
> 
> 标签：php, api, codeigniter, rest

我正在使用 CodeIgniter 来托管 RESTful API，并且我想捕获任何不返回预期状态代码的 API 响应。这可能最容易用一个例子来解释。一般来说，我的代码如下所示：

```
function post_comment()
{
     $comment = $_POST['comment'];
     $result = do_something_with_comment($comment);

     if ($result === true)
     {
         return_json_response(200, 'OK!');
     }
     else
     {
         return_json_response(400, 'Something terrible happened...');
     }
} 
```

返回 200 或 400 是完全有效的。我的问题是：如何在 do_something_with_comment() 出现致命错误时捕获错误，或者如果我在 do_something_with_comment() 中留下打印调试。在前一种情况下，我永远不会到达 return_json_response()。在后一种情况下，我会处理它，但屏幕调试会破坏 JSON 响应。

有没有办法围绕它创建一个通用包装器来捕获任何意外的输出或终止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:48:27.620

一般来说，您可以：

尽可能使用异常/异常处理

注册一个自定义错误处理程序，将 PHP 错误转换为异常，例如将其放在 config/config.php 的顶部

```
function my_error_handler($errno, $errstr, $errfile, $errline)
{
    if (!(error_reporting() & $errno))
    {
        // This error code is not included in error_reporting
        return;
    }
    log_message('error', "$errstr @$errfile::$errline($errno)" );
    throw new ErrorException( $errstr, $errno, 0, $errfile, $errline );
}
set_error_handler("my_error_handler"); 
```

注册一个未捕获的异常处理程序，在你的 config/config.php 中添加这样的内容

```
function my_exception_handler($exception)
{
    echo '<pre>';
    print_r($exception);
    echo '</pre>';
    header( "HTTP/1.0 500 Internal Server Error" );
}
set_exception_handler("my_exception_handler"); 
```

**编辑**

设置终止处理程序：

```
function my_fatal_handler()
{
    $errfile = "unknown file";
    $errstr  = "Fatal error";
    $errno   = E_CORE_ERROR;
    $errline = 0;
    $error = error_get_last();
    if ( $error !== NULL )
    {
        echo '<pre>';
        print_r($error);
        echo '</pre>';
        header( "HTTP/1.0 500 Internal Server Error" );
    }
}
register_shutdown_function("my_fatal_handler"); 
```

设置一个自定义的断言处理程序，将断言转换为异常，在你的 config/config.php 中放置这样的内容：

```
function my_assert_handler($file, $line, $code)
{
    log_message('debug', "assertion failed @$file::$line($code)" );
    throw new Exception( "assertion failed @$file::$line($code)" );
}
assert_options(ASSERT_ACTIVE,     1);
assert_options(ASSERT_WARNING,    0);
assert_options(ASSERT_BAIL,       0);
assert_options(ASSERT_QUIET_EVAL, 0);
assert_options(ASSERT_CALLBACK, 'my_assert_handler'); 
```

然后，**这就是你的答案**，在你的控制器中使用这样的包装器

```
public function controller_method( )
{
    try
    {
        // normal flow
    }
    catch( Exception $e )
    {
        log_message( 'error', $e->getMessage( ) . ' in ' . $e->getFile() . ':' . $e->getLine() );
        // on error
    }
} 
```

您可以根据自己的喜好调整和定制整个事情！

希望这可以帮助。

**编辑**

您还需要拦截 CI show_error 方法。将它放在 application/core/MY_exceptions.php 中：

```
class MY_Exceptions extends CI_Exceptions
{
    function show_error($heading, $message, $template = 'error_general', $status_code = 500)
    {
        log_message( 'debug', print_r( $message, TRUE ) );
        throw new Exception(is_array($message) ? $message[1] : $message, $status_code );
    }
} 
```

并在 application/config/database.php 中将此设置保留为 FALSE，以便将数据库错误转换为异常。

```
$db['default']['db_debug'] = TRUE; 
```

CI 有一些（非常）弱点，例如异常处理，但这将大大有助于纠正这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:15:18.473

有一个函数[register_shutdown_function()](http://php.net/manual/en/function.register-shutdown-function.php)，您可以在其中为每个脚本设置自己的关闭处理程序。在那里做你需要的。

顺便说一句：尽可能使您的脚本防弹。您的脚本不应该出现致命错误、段错误或此类运行时错误。任何响应，即使对客户端无效，在请求处理的上下文中也是有效的。我鼓励你看一下 Symfony2 框架或简单地看一下它的[HttpKernel](https://github.com/symfony/HttpKernel) / HttpFoundation 组件，因为它们很好地将这个过程包装在一个友好的界面中。

# c# - 查询以仅包括不受保护的资源

> ID：15080721
> 
> 赞同：1
> 
> 时间：2013-02-26T03:13:29.770
> 
> 标签：c#, asp.net, linq, entity-framework, linq-to-entities

我正在使用实体框架从我的数据库中检索数据。您可以在此处查看数据库模型：

![edmx](../Images/ad84e471e059b43f0c73cc41f8127a1a.png)

我正在尝试构建一个转发器，仅在有资源时才显示资源类别`where IsProtected == false`。然后是显示资源本身的嵌套中继器。

这是一个缩写的中继器，以帮助澄清我在寻找什么

```
<asp:Repeater>
    <h2>Category Name</h2>
    <ol>
        <asp:Repeater DataSource="<%# ((ResourceCategory)Container.DataItem).Resource %>">
            <li>Resource Name</li>
        </asp:Repeater>
    </ol>
</asp:Repeater> 
```

我当前使用的查询确实提取了任何具有 的类别`Resource.Count() > 0`，但不确定如何编写我的`where`语句，因为它实际上与`Resource`表相关：

```
public List<Model.ResourceCategory> GetResourcesWithDocuments()
{
    using (var context = new SafetyInSightEntities())
    {
        return (from cat in context.ResourceCategory.Include("Resource")
                orderby cat.Name
                where cat.Resource.Count > 0
                select cat).ToList();
    }
} 
```

有人可以帮我重写我的 LINQ 查询，这样我的内部转发器只显示资源`IsProtected == false`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:22:04.973

我不确定你在问什么，但我会假设你想要这个？

```
public List<Model.ResourceCategory> GetResourcesWithDocuments()
{
    using (var context = new SafetyInSightEntities())
    {
        return (from cat in context.ResourceCategory
                orderby cat.Name
                where cat.Resource.Any()
                select new 
                {
                    CategoryName = cat.Name,
                    Resources = cat.Resource.Where(r => r.IsProtected == false).ToList()
                }).ToList();
    }
} 
```

您可能想使用`All`而不是`Any`，但根据问题不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:35:33.330

试试这个：

```
public IEnumerable<ResourceCategoryFacade> GetResourcesWithDocuments() // return weaker interface
{
    using (var context = new SafetyInSightEntities())
    {
        var q = from cat in context.ResourceCategory.Include(cat => cat.Resource)
                orderby cat.Name
                select new ResourceCategoryFacade // anonymous, or compiler-time type
                {
                    CategoryName = cat.Name,
                    Resources = cat.Resource.Where(r => !r.IsProtected).ToList() // or ToArray()
                };
        return q.ToList(); // or ToArray()
    }
} 
```

# twitter - 理解 Twitter v1.1 API

> ID：15080728
> 
> 赞同：2
> 
> 时间：2013-02-26T03:14:12.127
> 
> 标签：twitter, server-side

我完全糊涂了。我试图阅读有关 Twitter API v1.1 及其要求的信息。我感到困惑的是服务器端的要求。

如果我想通过 Twitter API使用*任何数据，我必须使用服务器端身份验证吗？*还是我仍然可以使用：

```
<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>

<script type="text/javascript" src="https://api.twitter.com/1.1/statuses/user_timeline/YOUR_USERNAME.json?callback=twitterCallback2&amp;count=2"></script> 
```

并显示用户时间表？我迷失了答案，浏览 Twitter 文档让我更加困惑！

基本上我在问这个：如果我想提取推文的 Twitter 时间线，我现在必须使用服务器端身份验证来执行此操作。如果不是在 2013 年 3 月到来，我的推特订阅将不再有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:05:16.667

是的，您现在需要对所有 twitter API 请求使用身份验证。以下教程非常有用：

[使用新的 Twitter API V1.1](http://www.paulund.co.uk/using-the-new-twitter-api-v1-1)

# jquery - MVC 4 创建可调整大小的列表框

> ID：15080729
> 
> 赞同：3
> 
> 时间：2013-02-26T03:14:13.123
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我有以下部分视图来创建列表框：

```
@model App.ValueObjects.DummyVo
@using App.Client.Mvc.Helpers.HtmlHelpers

@Html.ListBoxFor(model => model.SelectedContractIds, new MultiSelectList(ViewBag.Contracts, "Id", "ContractNo"), new { @class="ui-resizable ui-resizable-helper" }) 
```

该局部视图是使用 AJAX 命令动态调用的。

在主视图中，我有以下 div：

```
<div id="contractList">
</div> 
```

这用于包含动态创建的列表框。

然后，我还在主视图中应用了以下 javascript：

```
$(document).ready(function () {
   $('#contractList').resizable();
} 
```

“可调整大小”来自 JQuery-ui-1.9.2.js。问题是：

*   div 的“可调整大小”行为仅在 DIV 中没有任何内容时起作用，即当调用 AJAX 命令来创建列表框时，“可调整大小”不再起作用。

请给一些关于如何处理的建议，谢谢！（也欢迎其他替代品）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:27:17.620

一种解决方案可能是在将内容添加到目标 div 后的 ajax 成功回调中，重新调用可调整大小的

```
 success:function(data){
   $('#contractList').resizable();
  } 
```

# python - 按下按钮时调用函数

> ID：15080731
> 
> 赞同：19
> 
> 时间：2013-02-26T03:14:30.330
> 
> 标签：python, function, button, pyqt

`funcion`单击时我试图调用函数`btn_brow_3`。我怎么能做到这一点？

运行以下代码时，我收到此错误消息： `TypeError: connect() slot argument should be a callable or a signal not "nonetype"`

```
import atexit
import sys
from PyQt4 import QtGui
import os                           # Libreria para manejar directorios del sistema operativo

def funcion(a):
    print "Hola mundo" + str(a)

class Example(QtGui.QMainWindow):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):               

        exitAction = QtGui.QAction(QtGui.QIcon('c:/prueba gui/resource/logo.png'), 'Exit', self)
        exitAction.setShortcut('Ctrl+Q')
        exitAction.triggered.connect(QtGui.qApp.quit)

        btn_brow_1 = QtGui.QPushButton('Browser...', self)
        btn_brow_1.resize(btn_brow_1.sizeHint())
        btn_brow_1.move(300, 50)
        btn_brow_1.clicked.connect(self.showDialog_points)

        btn_brow_2 = QtGui.QPushButton('Dir browser', self)
        btn_brow_2.resize(btn_brow_2.sizeHint())
        btn_brow_2.move(300, 80)
        btn_brow_2.clicked.connect(self.showDialog_indir_stl)

        btn_brow_3 = QtGui.QPushButton('Dir browser', self)
        btn_brow_3.resize(btn_brow_3.sizeHint())
        btn_brow_3.move(300, 110)
        btn_brow_3.clicked.connect(self.showDialog_outdir_stl)

        btn_brow_4 = QtGui.QPushButton('Crear soportes', self)
        btn_brow_4.setGeometry(20, 145, 250, 25)
        #btn_brow_4.clicked.connect(support.main(fname_points, self.fname_stl_indir, self.fname_stl_outdir))
        btn_brow_4.clicked.connect(funcion(12))  # HERE IS THE PROBLEM!

        self.le1 = QtGui.QLineEdit(self)
        self.le1.setGeometry(20, 50, 250,21)

        self.le2 = QtGui.QLineEdit(self)
        self.le2.setGeometry(20, 80, 250,21)

        self.le3 = QtGui.QLineEdit(self)
        self.le3.setGeometry(20, 110, 250,21)

        self.statusBar().showMessage("Ready")

        self.toolbar = self.addToolBar('Exit')
        self.toolbar.addAction(exitAction)

        self.setGeometry(300, 300, 400, 200)
        self.setWindowTitle('Support from points generator')    
        self.show()

    def showDialog_points(self):

        self.fname_points = QtGui.QFileDialog.getOpenFileName(self, 'Open points file', '/home')
        self.statusBar().showMessage(str(self.fname_points))
        self.le1.setText(str(self.fname_points))
        self.fname_points = str(self.le1.text())
        print fname_points

    def showDialog_indir_stl(self):

        self.fname_stl_indir = QtGui.QFileDialog.getExistingDirectory(self, 'Select STL INPUT directory', '/home')
        self.statusBar().showMessage(str(self.fname_stl_indir))
        self.le2.setText(str(self.fname_stl_indir))
        self.fname_stl_indir = str(self.le2.text())
        print fname_stl_indir 

    def showDialog_outdir_stl(self):

        self.fname_stl_outdir = QtGui.QFileDialog.getExistingDirectory(self, 'Select STL OUTPUT directory', '/home')
        self.statusBar().showMessage(str(self.fname_stl_outdir))
        self.le3.setText(str(self.fname_stl_outdir))
        self.fname_stl_outdir = str(self.le3.text())
        print fname_stl_outdir 

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()

    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-26T09:12:41.723

Qt 信号可以有参数，这些参数将传递给它们所连接的插槽；一个例子是将新值作为信号中的参数`changed`。因此，虽然您*可以*有一个带参数的插槽，但您不能在将信号连接到插槽时定义这些参数的实际值，因为它们将在发出信号时定义。

为了在连接时定义一个参数，您可以使用一个附加函数，它只使用定义的参数调用原始函数：

```
def wrapper():
    funcion(12)

def funcion(a):
    print "Hola mundo" + str(a)

[...]
btn_brow_4.clicked.connect(wrapper) 
```

附带说明：`wrapper`此处不使用大括号：不调用该函数，而只是将其作为参数传递给该函数`connect`。在您的代码中，您*调用*了您的函数`funcion`，它什么都不返回 (= `None`)，它在您的原始代码中被传递`connect`，导致您收到错误消息。

为了使它更简洁，您还可以使用匿名函数：

```
btn_brow_4.clicked.connect(lambda: funcion(12)) 
```

请注意，Qt 也提供了执行此操作的方法，但是（至少对我而言）Python 变体更易于阅读。

**编辑：**更多信息：[http ://eli.thegreenplace.net/2011/04/25/passing-extra-arguments-to-pyqt-slot/](http://eli.thegreenplace.net/2011/04/25/passing-extra-arguments-to-pyqt-slot/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-20T05:42:06.527

尝试这个，

```
def funcion(a):
 print "Hola mundo" + str(a)

[...]
btn_brow_4.clicked.connect(lambda: funcion(12)) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T09:20:38.300

您可以使用以下方法访问相同的内容：

```
self.connect(btn_brow_4,Qt.SIGNAL("clicked()"),self.callingFunction)

def callingFunction():
    function(12) 
```

# c - 为postgresql连接C字符串

> ID：15080732
> 
> 赞同：0
> 
> 时间：2013-02-26T03:14:30.737
> 
> 标签：c, postgresql

所以我试图在 for 循环中构建我的 sql 语句。
但是在执行时，它在字符串的第一个点显示错误。
连接方法是否错误，因为我打印了 sql 语句并在 postgresql 中手动执行，它可以工作。

我也试过

```
char *sqlStatement = "INSERT INTO record()..VALUES();\
    INSERT INTO record()..VALUES();\
    INSERT INTO record()..VALUES();
" 
```

这样可行。

*请注意，为了简洁起见，我已将循环减少到仅一次并减少了列数。*

编码：

```
char sqlStatement[8000];
for(int i=0;i<1;i++) {
        sprintf(&sqlStatement[0] + strlen(sqlStatement), "INSERT INTO record (\"user_id\", \"filename\", \"ports\", \"timestamp\" ... )VALUES (1, 'example%d', 0, '123456789%d', ... );", i, i,);
}
pgResult = PQexec(pgConn, sqlStatement);
if (PQresultStatus(pgResult) != PGRES_COMMAND_OK) {
        printf("%s", PQresultErrorMessage(pgResult));
        PQclear(pgResult);
        closeSQL(pgConn);
        exit(-1);
} 
```

错误信息：

```
ERROR:  syntax error at or near ""
LINE 1: INSERT INTO captures ("user_id", "filename", "ports", "time...        
        ^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:21:50.170

您正在调用`strlen(sqlStatement)`，但`sqlStatement`此时尚未初始化。那是未定义的行为。

放

```
sqlStatement[0] = '\0'; 
```

在循环之前以空字符串开始。

顺便说一句，`exit(-1)`是错误的。唯一的标准 C 退出值是`0`/`EXIT_SUCCESS`和`EXIT_FAILURE`。在 Unix 上，您可以使用 和 之间`0`的任何值`255`。我不确定Windows，但可能类似。我不知道任何`-1`有效的操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:37:55.170

```
char sqlStatement[11111];
size_t_pos;

pos=0; 
pos += sprintf(sqlStatement+pos, "INSERT INTO record() VALUES(%s);\n" , "Argh!" );
pos += sprintf(sqlStatement+pos, "INSERT INTO record(...);\n" ... );
pos += sprintf(sqlStatement+pos, "INSERT INTO record(...);\n" ... );
... 
```

一个真正的程序当然应该首先检查 sprintf 的返回值，然后再使用它来增加`pos`位置。

# android - 应用程序的基于 Android Tile 的 UI

> ID：15080735
> 
> 赞同：4
> 
> 时间：2013-02-26T03:14:44.553
> 
> 标签：android, android-layout, user-interface

我想知道是否有人试图创造一种类似于 Windows 手机为 Android 应用程序提供（基于磁贴的 UI）的感觉。总的来说，我想要让某些“图块”显示某些信息。当磁贴有触摸事件时，磁贴将展开或启动另一个活动或向用户显示更多信息。如果有任何通往 API 的线索，那也很棒。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T03:28:53.013

您可以使用[StaggeredGridView](http://www.androidviews.net/2013/01/pinterest-like-adapterview/)或根据您的需要，您也可以使用[QuiltView](https://web.archive.org/web/20140310133520/http://www.androidviews.net/2013/01/quiltview-library/)

# c++ - 映射空指针值

> ID：15080742
> 
> 赞同：0
> 
> 时间：2013-02-26T03:15:28.340
> 
> 标签：c++, map

在我的代码中，我有一个`std::map`看起来像这样的：

```
std::map<std::string, A*> myMap; 
```

其中 A 是我的自定义类之一。

当我通过如下方式访问不存在的地图元素`operator[]`时：

```
std::string s("hello");
A* pA = myMap[s]; 
```

我知道将使用该键创建一个新元素，但我希望将指针初始化为 NULL。换句话说，如果`myMap[s]`存在，则应该返回一个有效的指针。如果不是，我希望在上述代码执行后 pA 为 NULL。

默认情况下，如果`myMap[s]`不退出，pA 会包含垃圾吗？如果元素不退出，我怎样才能使 pA 包含值 NULL ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:36:09.240

简短回答：是的，您的指针可以可靠地被视为`nullptr`在没有先前值的新键查找上。

长答案：

根据标准：

> **C++11 § 23.4.4.3,p5**
> 
> `T& operator[](key_type&& x);`
> 
> *效果*：如果地图中没有与 x 等效的键，则插入`value_type(std::move(x), T())`到地图中。

特别注意使用**`T()`**，`T`在这种情况下是您的指针类型。这将导致...

> **C++11 § 8.5,p10**
> 
> 初始值设定项为空括号集的对象，即**()**，应进行**值初始化**。

通过*值初始化*的定义：

> **C++11 § 8.5,p7**
> 
> 对 T 类型的对象进行值初始化意味着：
> 
> *   如果 T 是具有用户提供的构造函数 (12.1) 的（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化格式错误） ;
>     
>     
> *   如果 T 是没有用户提供的构造函数的（可能是 cv 限定的）非联合类类型，则该对象是**零初始化**的，并且如果 T 的隐式声明的默认构造函数是非平凡的，则调用该构造函数。
>     
>     
> *   如果 T 是一个数组类型，那么每个元素都是值初始化的；
>     
>     
> *   否则，对象被**零初始化。**

这给我们带来了零初始化的对象类型意味着什么：

> **C++11 § 8.5,p5**
> 
> 对 T 类型的对象或引用进行零初始化意味着：
> 
> *   **如果 T 是标量类型（3.9），则将对象设置为值 0（零），作为整数常量表达式，转换为 T [（103）]**
>     
>     
> *   如果 T 是（可能是 cv 限定的）非联合类类型，则每个非静态数据成员和每个基类子对象都被初始化为零并且填充被初始化为零位；
>     
>     
> *   如果 T 是（可能是 cv 限定的）联合类型，则对象的第一个非静态命名数据成员被零初始化，填充被初始化为零位；
>     
>     
> *   如果 T 是数组类型，则每个元素都初始化为零；
>     
>     
> *   如果 T 是引用类型，则不执行初始化。
>     
>     
> 
> 103) 如 4.10 所述，将值为 0 的整型常量表达式转换为指针类型会产生**空指针值**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T03:24:56.720

是的，映射中用于 int 或指针等嵌入式类型的新元素是零初始化的，因此您的指针将为 NULL。

# iphone - Videojs自动播放，iPhone上没有控件

> ID：15080743
> 
> 赞同：1
> 
> 时间：2013-02-26T03:15:54.260
> 
> 标签：iphone, html, html5-video, video.js

video.js 是否有一种可能的配置来隐藏 iPhone 上的本机控件？我也希望能够自动播放，但这并不重要。我主要关心的是能够使用我精心设计的 javascript 控件，而不是丑陋、笨重的原生控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T15:38:45.447

该`video`元素在 iPhone 上非常受限。如果你想播放 HTML5 视频，你必须使用原生全屏播放器。iPad 提供更多自由，但与桌面浏览器相比仍然有限。两种设备都不允许自动播放。[Apple 的文档](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW1)有更多详细信息。

# jsf - javax.naming.NameNotFoundException：找不到 admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote

> ID：15080747
> 
> 赞同：1
> 
> 时间：2013-02-26T03:16:09.687
> 
> 标签：jsf, jakarta-ee, jsf-2, jpa-2.0, ejb-3.1

我正在尝试在以下环境中创建一个企业应用程序（具有 Java EE、EJB 和 WAR 模块的环境）。我正在遵循[这些](http://netbeans.org/kb/docs/javaee/entappclient.html)说明（虽然这些说明与 Web 应用程序无关，但我找不到任何关于 Web 应用程序的文章）。

*   NetBeans 7.2.1
*   Glassfish Server 3.1.2（包含 Servlet 3.0 API）
*   EJB 3.1
*   JPA 2.0
*   JSF 2.1
*   甲骨文 10g

我创建了一个类库（新项目 -> Java -> Java 类库）来放置`javax.ejb.Remote`将由无状态会话 bean 实现的远程（）接口。类库已添加到两个模块（EJB 和 WAR）的类路径中。

当尝试运行此应用程序时，会导致以下异常。

```
com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean transporterBean
        at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:211)
        at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:103)
        at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
        at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
        at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:244)
        at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:116)
        at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
        at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
        at com.sun.el.parser.AstIdentifier.getValue(AstIdentifier.java:103)
        at com.sun.el.parser.AstValue.getValue(AstValue.java:179)
        at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
        at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
        at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
        at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
        at javax.faces.component.UIData.getValue(UIData.java:731)
        at javax.faces.component.UIData.getDataModel(UIData.java:1798)
        at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
        at javax.faces.component.UIData.setRowIndex(UIData.java:473)
        at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
        at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
        at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
        at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
        at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
        at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
        at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
        at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)
Caused by: com.sun.faces.spi.InjectionProviderException: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=managedbeans.TransporterBean/adminSessionBeanRemote,Remote 3.x interface =admin.sessionbeans.AdminSessionBeanRemote,ejb-link=null,lookup=,mappedName=,jndi-name=admin.sessionbeans.AdminSessionBeanRemote,refType=Session into class managedbeans.TransporterBean: Lookup failed for 'java:comp/env/managedbeans.TransporterBean/adminSessionBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
        at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:194)
        at com.sun.faces.mgbean.BeanBuilder.injectResources(BeanBuilder.java:205)
        ... 53 more
Caused by: com.sun.enterprise.container.common.spi.util.InjectionException: Exception attempting to inject Remote ejb-ref name=managedbeans.TransporterBean/adminSessionBeanRemote,Remote 3.x interface =admin.sessionbeans.AdminSessionBeanRemote,ejb-link=null,lookup=,mappedName=,jndi-name=admin.sessionbeans.AdminSessionBeanRemote,refType=Session into class managedbeans.TransporterBean: Lookup failed for 'java:comp/env/managedbeans.TransporterBean/adminSessionBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
        at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:703)
        at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.inject(InjectionManagerImpl.java:470)
        at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl.injectInstance(InjectionManagerImpl.java:171)
        at org.glassfish.faces.integration.GlassFishInjectionProvider.inject(GlassFishInjectionProvider.java:184)
        ... 54 more
Caused by: javax.naming.NamingException: Lookup failed for 'java:comp/env/managedbeans.TransporterBean/adminSessionBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=managedbeans.TransporterBean/adminSessionBeanRemote,Remote 3.x interface =admin.sessionbeans.AdminSessionBeanRemote,ejb-link=null,lookup=,mappedName=,jndi-name=admin.sessionbeans.AdminSessionBeanRemote,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote' [Root exception is javax.naming.NamingException: Lookup failed for 'admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote not found]]]
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at com.sun.enterprise.container.common.impl.util.InjectionManagerImpl._inject(InjectionManagerImpl.java:599)
        ... 57 more
Caused by: javax.naming.NamingException: Exception resolving Ejb for 'Remote ejb-ref name=managedbeans.TransporterBean/adminSessionBeanRemote,Remote 3.x interface =admin.sessionbeans.AdminSessionBeanRemote,ejb-link=null,lookup=,mappedName=,jndi-name=admin.sessionbeans.AdminSessionBeanRemote,refType=Session' .  Actual (possibly internal) Remote JNDI name used for lookup is 'admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote' [Root exception is javax.naming.NamingException: Lookup failed for 'admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote not found]]
        at com.sun.ejb.EjbNamingReferenceManagerImpl.resolveEjbReference(EjbNamingReferenceManagerImpl.java:191)
        at com.sun.enterprise.container.common.impl.ComponentEnvManagerImpl$EjbReferenceProxy.create(ComponentEnvManagerImpl.java:1109)
        at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:776)
        at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:744)
        at com.sun.enterprise.naming.impl.JavaURLContext.lookup(JavaURLContext.java:169)
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:498)
        ... 61 more
Caused by: javax.naming.NamingException: Lookup failed for 'admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote not found]
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at javax.naming.InitialContext.lookup(InitialContext.java:411)
        at com.sun.ejb.EjbNamingReferenceManagerImpl.resolveEjbReference(EjbNamingReferenceManagerImpl.java:186)
        ... 66 more
Caused by: javax.naming.NameNotFoundException: admin.sessionbeans.AdminSessionBeanRemote#admin.sessionbeans.AdminSessionBeanRemote not found
        at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248)
        at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:215)
        at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
        at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
        at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
        ... 70 more 
```

* * *

远程界面如下。

```
 package admin.sessionbeans;

import entities.Transporter;
import java.util.List;
import javax.ejb.Remote;

@Remote(AdminSessionBeanRemote.class)
public interface AdminSessionBeanRemote 
{
    public List<Transporter> getAllTransporters(); 
} 
```

无状态会话 bean。

```
package admin.sessionbeans;

import entities.Transporter;
import java.util.List;
import javax.ejb.Stateless;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

@Stateless//(mappedName="adminSessionBean")
public class AdminSessionBean implements AdminSessionBeanRemote {

    @PersistenceContext(unitName="wagafashion-ejbPU")
    private EntityManager entityManager;

    @Override
    public List<Transporter> getAllTransporters() 
    {
        return entityManager.createNamedQuery("Transporter.findAll").getResultList();
    }
} 
```

JSF 托管 bean。

```
package managedbeans;

import admin.sessionbeans.AdminSessionBeanRemote;
import entities.Transporter;
import java.util.List;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

@ManagedBean
@RequestScoped
public final class TransporterBean 
{
    @EJB
    private AdminSessionBeanRemote adminSessionBeanRemote;
    private List<Transporter>transporters;

    public TransporterBean() 
    {

    }

    public List<Transporter> getTransporters()
    {
        transporters=adminSessionBeanRemote.getAllTransporters();
        return transporters;
    }

    public void setTransporters(List<Transporter> transporters) 
    {
        this.transporters = transporters;
    }
} 
```

我已根据[此注释将所有](http://netbeans.org/bugzilla/show_bug.cgi?id=192634#c4)**实体类**添加到类库中。

> 客户端 jar 应包含远程接口以及这些接口所依赖的任何类

* * *

大约一年前，当我使用 NetBeans 6.9.1 时，我开发了一些这样的应用程序。该版本的 IDE 不要求将远程接口放在单独的类库中。

我的 PC 上仍然安装了 NetBeans IDE 6.9.1，我尝试创建相同的应用程序（没有单独的类库，远程接口位于同一个 EJB 模块中）并且它按预期工作。

最后一件事：当我从两个模块（EJB 和 WAR）中删除这个类库并只部署 Java EE 模块（在 NetBeans 中用三角形表示的那个）时，它会执行其预期功能，从数据库中检索数据并显示在 JSF 页面上。

所以，我对这个异常的原因非常困惑，不能确定是因为类库问题还是我可能缺少的其他必需配置（尽管可能有一些 JNDI 查找我不知道的问题）。

* * *

如果有人有关于如何在 NetBeans 7.x 中创建企业 Web 应用程序的链接，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:37:56.420

您的代码有一个问题是在您的 @Remote 注释中有一个类名。我很好奇，你为什么觉得有必要把它放在那里？

无论如何，当@Remote 用于标记远程接口时，它不应该存在，并且绝对应该被删除。

此外，在同一个 JVM 中注入时，您应该使用 @Local 接口或根本不使用接口（具有本地语义）。即，您现在每次调用方法并返回某些内容时都在编组（序列化/深度复制）返回值。如果不需要这些语义，那就太浪费了。

# html - wget从html复制文本

> ID：15080749
> 
> 赞同：1
> 
> 时间：2013-02-26T03:16:36.820
> 
> 标签：html, linux, unix

我对编程和 linux/unix 真的很陌生，所以我想知道我可以使用什么命令来仅复制网页的文本并将其保存在目录中的文件中。我想复制这样的文字

[http://cseweb.ucsd.edu/classes/wi12/cse130-a/pa5/words](http://cseweb.ucsd.edu/classes/wi12/cse130-a/pa5/words)

wget 会这样做吗？还有哪些特定命令将其保存到目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:20:20.617

另一个使用`wget`您想知道的选项是：

```
wget -O file.txt "http://cseweb.ucsd.edu/classes/wi12/cse130-a/pa5/words" 
```

该`-O`选项允许您指定要将其保存到哪个文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:18:47.157

一种选择是：

```
 curl -s http://cseweb.ucsd.edu/classes/wi12/cse130-a/pa5/words > file 
```

# javascript - javascript数组仅在内容不完全时才有效

> ID：15080756
> 
> 赞同：0
> 
> 时间：2013-02-26T03:17:04.117
> 
> 标签：javascript

我有一个充满引号的数组，并在加载时显示一个随机引号。我遇到的问题是，当我只加载 2 个引号时一切正常，但是当我添加整个列表时，它不再运行。

这是有效的代码-

```
<div id="quotes">Quotes</div>

<script type="text/javascript">

var quotes = [
    "<i>Some people feel the rain. Others just get wet.</i><br><b>Bob Marley</b>",
    "<i>Do not pray for an easy life, pray for the strength to endure a difficult one.       </i><br><b>Bruce Lee</b>"

];

document.getElementById('quotes').innerHTML = quotes[Math.floor(Math.random() * quotes.length)];
</script> 
```

上述工作按预期工作，但是当我添加其余引号（如下所示）时，脚本不再工作。

```
<div id="quotes"></div>

<script type="text/javascript">
var quotes = [
"<i>Some people feel the rain. Others just get wet.</i><br><b>Bob Marley/b>",
"<i>Do not pray for an easy life, pray for the strength to endure a difficult one.    </i><br><b>Bruce Lee</b>",
"<i>Success is not final, failure is not fatal: it is the courage to continue that     counts.</i><br><b>Winston
Churchill</b>",
"<i>If your dreams don’t scare you they’re not big enough.</i><br><b></b>",
"<i>It takes courage to grow up and become who you really are.</i><br><b>E.E. Cummings</b>",
"<i>All endings are also beginnings, we just don’t know it yet.</i><br><b></b>",
"<i>There are three kinds of people: Those who make it happen, those who watch it     happen, and
those who wonder what the heck happened.</i><br><b></b>",
"<i>There are people so poor, that the only thing they have is money.</i><br><b>    </b>",
"<i>Things do not happen. Things are made to happen.</i><br><b>John F.     Kennedy</b>",
"<i>Destiny is a name often given in retrospect to choices that had dramatic consequences.</i><br><b>J.K. Rowling</b>",
"<i>When I was 5 years old, my mother always told me that happiness was the key to life.
When I went to school, they asked me what I wanted to be when I grew up. I wrote
down ‘happy’. They told me I didn’t understand the assignment, and I told them they didn’t
understand life.</i><br><b>John Lennon</b>",
"<i>Not all those who wander are lost</i><br><b>JRR Tolkien</b>",
"<i>We all die. The goal isn’t to live forever, the goal is to create something   that will.</i><br><b></b>",
"<i>Strive for progress, not perfection.</i><br><b></b>",
"<i>What defines us is how well we rise after falling.</i><br><b></b>",
"<i>It’s not hard to make decisions once you know what your values are.</i><br><b>Roy E. Disney</b>",
"<i>Sorry’s not good enough.</i><br><b></b>",
"<i>I may not be there yet, but I’m closer than I was yesterday.
Every day is a new beginning. Stay away from what might have been and look at what can
be.</i><br><b></b>",
"<i>Who inspires you?</i><br><b></b>",
"<i>If you play by the rules long enough, then you can change the game.</i><br>    <b>Enders Game</b>"
];

document.getElementById('quotes').innerHTML = quotes[Math.floor(Math.random() *     quotes.length)];
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:22:49.310

JavaScript 字符串中不能有换行符。你需要改变这个：

```
"str part
 the rest" 
```

对此：

```
"str part\nthe rest" 
```

或者

```
"str part\n"
+ "the rest" 
```

您应该检查 JavaScript 控制台是否有错误；这可以帮助您调试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:36:00.887

此外，您可以像这样编写多行字符串：

```
var str = "beginning \
           continue \
           end."; 
```

换行前的反斜杠是另一种解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:28:56.243

字符串内的换行符导致了问题。这是完整的工作代码：http: [//jsfiddle.net/whizkid747/5tyrY/](http://jsfiddle.net/whizkid747/5tyrY/)

```
<div id="quotes">Quotes</div>

<script type="text/javascript">

var quotes = [
"<i>Some people feel the rain. Others just get wet.</i><br><b>Bob Marley</b>",
"<i>Do not pray for an easy life, pray for the strength to endure a difficult one.</i><br><b>Bruce Lee</b>",
"<i>Success is not final, failure is not fatal: it is the courage to continue that     counts.</i><br><b>WinstonChurchill</b>",
"<i>If your dreams don’t scare you they’re not big enough.</i><br><b></b>",
"<i>It takes courage to grow up and become who you really are.</i><br><b>E.E. Cummings</b>",
"<i>All endings are also beginnings, we just don’t know it yet.</i><br><b></b>",
"<i>There are three kinds of people: Those who make it happen, those who watch it     happen, and those who wonder what the heck happened.</i><br><b></b>",
"<i>There are people so poor, that the only thing they have is money.</i><br><b>    </b>",
"<i>Things do not happen. Things are made to happen.</i><br><b>John F.     Kennedy</b>",
"<i>Destiny is a name often given in retrospect to choices that had dramatic consequences.</i><br><b>J.K. Rowling</b>",
"<i>When I was 5 years old, my mother always told me that happiness was the key to life. When I went to school, they asked me what I wanted to be when I grew up. I wrote down ‘happy’. They told me I didn’t understand the assignment, and I told them they didn’t understand life.</i><br><b>John Lennon</b>",
"<i>Not all those who wander are lost</i><br><b>JRR Tolkien</b>",
"<i>We all die. The goal isn’t to live forever, the goal is to create something   that will.</i><br><b></b>",
"<i>Strive for progress, not perfection.</i><br><b></b>",
"<i>What defines us is how well we rise after falling.</i><br><b></b>",
"<i>It’s not hard to make decisions once you know what your values are.</i><br><b>Roy E. Disney</b>",
"<i>Sorry’s not good enough.</i><br><b></b>",
"<i>I may not be there yet, but I’m closer than I was yesterday. Every day is a new beginning. Stay away from what might have been and look at what can be.</i><br><b></b>",
"<i>Who inspires you?</i><br><b></b>",
"<i>If you play by the rules long enough, then you can change the game.</i><br>    <b>Enders Game</b>"
];

document.getElementById('quotes').innerHTML = quotes[Math.floor(Math.random() * quotes.length)];
</script> 
```

# java - Hashtable Java 中的 Long 问题

> ID：15080760
> 
> 赞同：0
> 
> 时间：2013-02-26T03:17:21.867
> 
> 标签：java, hashtable, long-integer

显然，我无法将 Long 值存储在哈希表中。

请看下面的代码：

```
//create a hashtable of type <String, Long>
Hashtable <String, Long> universalTable = new Hashtable <String, Long> ();

universalTable.put("HEADS", new Long(0)); // this works fine 
```

我在构造函数中传递了这个表`DoFlip`：

```
DoFlip doFlip = new DoFlip(100000000, universalTable); 
```

内部`DoFlip`：

```
Hashtable table; // pointer to hash map
long iterations = 0; // number of iterations

DoFlip(long iterations, Hashtable table){
    this.iterations = iterations;
    this.table = table;
} 
```

此类实现 Runnable。`run()`方法如下——</p >

```
public void run(){
    while(this.iterations > 0){
        // do some stuff
        this.heads ++;
        this.iterations --;
    }
    updateStats();
}

public void updateStats(){
    Long nHeads = (Long)this.table.get("HEADS");
    this.table.put("HEADS", nHeads); // ISSUE HERE
} 
```

我收到以下警告/错误。看起来像一个警告，但我不想要这个。

```
Note: File.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

当我重新编译时：

```
File.java:92: warning: [unchecked] unchecked call to put(K,V) as a member of the raw type java.util.Hashtable
            this.table.put("HEADS", nHeads);
                          ^
1 warning 
```

我不确定为什么会这样。首先，不需要输入 cast `nHeads`。但我仍然这样做，但它不起作用。

注意：我一点也不擅长 Java。：/

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:21:19.687

此警告表明您正在使用原始类型。代替

```
DoFlip(long iterations, Hashtable table){ 
```

和

```
DoFlip(long iterations, Hashtable<String, Long> table) { 
```

这样它包含类似于 的泛型`universalTable`。还要在初始声明中包含泛型。

边注：

*   `Hashtable`已经很老了`Collection`，已经被`HashMap`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T03:21:30.153

这只是一个警告，告诉您正在混合通用和非通用容器。这是允许的，但是如果您在代码中的任何地方都使用泛型，编译器可以在类型检查方面做得更好。

要修复此警告，您需要更改

```
Hashtable table; 
```

为了

```
Hashtable<String, Long> table; 
```

在声明里面`DoFlip`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T03:22:23.027

我的 2 美分：

首先，如果您正在构建一些对性能敏感的应用程序，并且希望避免 Long 和 long 原语之间的转换，请考虑使用[trove4j](http://trove.starlight-systems.com/)集合库。它是一种质量优良的原始产品。

其次，您的 DoFlip 应声明为

```
DoFlip(long iterations, Hashtable<String, Long> table){
    this.iterations = iterations;
    this.table = table;
} 
```

问题解决了。

享受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T03:24:47.450

您需要向编译器保证您的 HashMap 都是从 Strings 到 Longs。你在这里做了：

```
Hashtable <String, Long> universalTable = new Hashtable <String, Long> (); 
```

...但不在这里：

```
Hashtable table; // pointer to hash map
---
DoFlip(long iterations, Hashtable table){ 
```

这样做：

```
Hashtable<String, Long> table;
---
DoFlip(long iterations, Hashtable<String, Long> table){ 
```

...并且不会再出现您`table`在运行时将错误类型的对象放入其中的自动恐慌，因为现在编译器可以检查您是否始终使用您想要的对象（即括号中指定的对象）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T03:32:35.187

这只是来自编译器的警告，您是`mixing generic and non-generic containers`

您可以执行以下任一步骤使其消失

1）你需要改变

```
Hashtable table; 
```

为了

```
Hashtable<String, Long> table; 
```

或者

2）您可以使用 SuppressWarning 注释来抑制警告

```
@SuppressWarnings("unchecked")
public void updateStats(){
    Long nHeads = (Long)this.table.get("HEADS");
    this.table.put("HEADS", nHeads); // ISSUE HERE
} 
```

# linux - 在停止等待协议实现中使用 pthread 时的 SIGSEGV

> ID：15080765
> 
> 赞同：0
> 
> 时间：2013-02-26T03:17:53.760
> 
> 标签：linux, sockets, pthreads

我是一名大学生，作为网络作业的一部分，我需要执行停止等待协议。问题陈述需要使用 2 个线程。我是线程新手，但是在浏览了 pthreads API 的手册页之后，我编写了基本代码。但是，成功创建线程后（在执行作为参数传递给 pthread_create() 的函数的第一行时）出现分段错误。

```
typedef struct packet_generator_args
{
    int max_pkts;
    int pkt_len;
    int pkt_gen_rate;
} pktgen_args;

/* generates and buffers packets at a mean rate given by the
pkt_gen_rate field of its argument; runs in a separate thread  */
void *generate_packets(void *arg)
{
    pktgen_args *opts = (pktgen_args *)arg; // error occurs here
    buffer = (char **)calloc((size_t)opts->max_pkts, sizeof(char *));
    if (buffer == NULL)
        handle_error("Calloc Error");
    //front = back = buffer;
    ........

    return 0;
} 
```

主线程从此缓冲区读取数据包并运行停止等待算法。

```
pktgen_args thread_args;
thread_args.pkt_len = DEF_PKT_LEN;
thread_args.pkt_gen_rate = DEF_PKT_GEN_RATE;
thread_args.max_pkts = DEF_MAX_PKTS;

/* initialize sockets and other data structures */
.....
pthread_t packet_generator;
pktgen_args *thread_args1 = (pktgen_args *)malloc(sizeof(pktgen_args));
memcpy((void *)thread_args1, (void *)&thread_args, sizeof(pktgen_args));
retval = pthread_create(&packet_generator, NULL, &generate_packets, (void *)thread_args1);
if (retval != 0)
    handle_error_th(retval, "Thread Creation Error");
.....
/* send a fixed no of packets to the receiver wating for ack for each. If
the ack is not received till timeout occurs resend the pkt */
..... 
```

我尝试使用 gdb 进行调试，但无法理解为什么我的`generate_packets()`函数的第一行会出现分段错误。希望你们中的一个可以提供帮助。如果有人需要额外的上下文，可以在[http://pastebin.com/Z3QtEJpQ](http://pastebin.com/Z3QtEJpQ)获得整个代码。我在这里花了好几个小时才真正陷入困境。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:35:15.610

你初始化你的`buffer`as `NULL`：

```
 char **buffer = NULL; 
```

然后在`main()`没有进一步做的情况下，您尝试解决它：

```
while (!buffer[pkts_ackd]); /* wait as long as the next pkt has not 
```

基本上我的半受过教育的猜测是您的线程尚未生成任何数据包，并且您在尝试访问 NULL 中的元素时崩溃。

```
[162][04:34:17] vlazarenko@alluminium (~/tests) > cc -ggdb -o pthr pthr.c 2> /dev/null
[163][04:34:29] vlazarenko@alluminium (~/tests) > gdb pthr
GNU gdb 6.3.50-20050815 (Apple version gdb-1824) (Thu Nov 15 10:42:43 UTC 2012)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries .. done

(gdb) run
Starting program: /Users/vlazarenko/tests/pthr 
Reading symbols for shared libraries +............................. done

Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x0000000000000000
0x000000010000150d in main (argc=1, argv=0x7fff5fbffb10) at pthr.c:205
205         while (!buffer[pkts_ackd]); /* wait as long as the next pkt has not
(gdb) 
```

# highcharts - 为范围选择器和间隔设置最大数据点

> ID：15080768
> 
> 赞同：0
> 
> 时间：2013-02-26T03:18:07.287
> 
> 标签：highcharts, highstock

我有一个包含大量数据点的图表。我现在正在设置极端值，所以它只显示一个较小的数字——一次大约 100 个左右。我遇到的问题是我不想禁用范围选择器或日期的手动输入，但目前用户可以扩展范围选择器以包含整个数据集。有没有办法限制这一点，所以他们最多只能抢 X 点？

我也不想使用数据分组，我对不同的数据组有不同的数据，所以分组不会改变很重要。在此先感谢您对此的任何指示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T14:46:12.837

不幸的是，您不能为此目的禁用范围选择器，但您可以在用户更改极端值后覆盖它们，请参阅：

api.highcharts.com/highstock#xAxis.events.afterSetExtremes 例如，如果用户使用 4 天的范围，而您希望最长 2 天 - 获取最小值或最大值之一，并在极端情况下添加/删除两天（调用图表.xAxis.setExtremes() 具有新的极端）。当然，它会调用另一个 afterSetExtremes，所以这将是无限循环，但是现在极端情况是正确的（两天），所以它不会调用另一个 setExtremes()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-15T21:34:34.790

这是一个使用 afterSetExtremes （如 Dexter 描述的）从范围选择器创建最大范围的工作示例：

[http://jsfiddle.net/B7vCR/3/](http://jsfiddle.net/B7vCR/3/)

```
xAxis: {
            minRange:6 * 30 * 24 * 3600 * 1000,
            events: {
                afterSetExtremes: function(e) {
                    var maxDistance = 10 * 30 * 24 * 3600 * 1000; //8 months time
                    var xaxis = this;
                    if ((e.max - e.min) > maxDistance) {
                        var min = e.max - maxDistance;
                        var max = e.max;
                        window.setTimeout(function() {
                            xaxis.setExtremes(min, max);
                        }, 1);
                    }
                }
            }
        } 
```

从这个帖子

[http://forum.highcharts.com/viewtopic.php?f=12&t=21741](http://forum.highcharts.com/viewtopic.php?f=12&t=21741)

# c++ - For循环不断崩溃程序c ++

> ID：15080770
> 
> 赞同：0
> 
> 时间：2013-02-26T03:18:16.943
> 
> 标签：c++

我更长的程序中的这段特定代码不断崩溃。它编译得很好，但是 Windows 结束了它。

```
 out_stream_names.open("names.dat");
 for(int i = a.size(); i>0 ; i=i-1)
       {
             out_stream_names << a[i] << endl;
       }
 out_stream_names.close(); 
```

我想弄清楚为什么它总是崩溃。我不是要求复制代码。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T03:20:21.320

信息很少。但首先引起轰动的是`a.size()`

尝试：

```
 out_stream_names.open("names.dat");
 for(int i = a.size()-1; i>=0 ; i=i-1)
       {
             out_stream_names << a[i] << endl;
       }
 out_stream_names.close(); 
```

* * *

由于您只想在偶数索引中输出，在我们遍历的情况下是奇数索引，请使用：

```
if(i&1) out_stream_names << a[i] << endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T03:35:09.773

我建议通过使用以下顺序来避免此类问题：

```
std::copy(a.rbegin(), a.rend(), 
          std::ostream_iterator<a::value_type>(out_stream_names, "\n")); 
```

作为奖励，在这种情况下，您可能还会获得一些性能提升（通过替换`endl`为`\n`，避免在您编写的每个名称之间刷新流）。

[请注意，它`a::value_type`不会按原样编译——您需要指定实际类型]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T03:22:07.787

```
out_stream_names.open("names.dat");
for(int i = a.size() - 1; i >= 0; --i) 
{
   out_stream_names << a[i] << endl;
}
out_stream_names.close(); 
```

?? 试试看！

# java - Java 调用和等待？

> ID：15080772
> 
> 赞同：1
> 
> 时间：2013-02-26T03:18:46.863
> 
> 标签：java, swing, event-dispatch-thread, invokeandwait

这是一个关于 swing 实用程序的 invokeAndWait 的非常简单的问题。我听说它在单个线程上同步代码执行，但我不确定。如果是这样，我应该使用 invokeAndWait 来做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:21:51.010

`SwingUtilities.invokeAndWait(Runnable)`将`Runnable`在事件队列中排队。这将允许事件调度线程在事件调度线程的上下文中执行`run`方法。`Runnable`

`invokeAndWait``run`直到 EDT 完成执行该方法后才会返回。这意味着它是一个阻塞操作。

`invokeAndWait`用于将代码重新同步到 EDT，允许它在 Swing 工具包中执行对 UI 的更新。

除非你试图让你的代码在 EDT 上执行，否则你不应该将它用于线程同步。

# sql - 在 SQL Server 中复制 SQL 行

> ID：15080775
> 
> 赞同：0
> 
> 时间：2013-02-26T03:18:53.050
> 
> 标签：sql

我有一个表，其中有贷方和借方账户的列作为周期“1-12”的行，还有一个应该进入每个周期的期初余额。

桌子

```
Account  |Period   |Credit |Debits    |Opening Balance
1000       1          100     0           50          
1000       2           0      100         50          
.          .           .      .            .          
.          .           .      .            .          
1001       1          50      0           100         
1002       1          40      0           100 
```

但我的问题是我可以在账户 1001 和 1002 的每一行中复制或创建 12 行的期初余额吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:27:21.633

这是一种方法。它使用与数字列表的连接来获取期间和帐户的所有组合。然后，它使用相关子查询来选择余额的最新值。

此版本使用 MySQL 语法。相关的子查询可能使用`select top 1`or`where rownum = 1`或其他东西，具体取决于数据库：

```
select t.account, n.n, coalesce(t.credit, 0) as credit,
       coalesce(t.debit, 0) as debit,
       (select balance
        from t t2
        where t2.account = t.account and
              t2.period <= t.period
        order by period desc
        limit 1
       ) as balance
from (select 1 as n union all select 2 union all select 3 union all select 4 union all
      select 5 union all select 6 union all select 7 union all select 8 union all
      select 9 union all select 10 union all select 11 union all select 12
     ) n left outer join
     t
     on t.period = n.n 
```

# android - 安卓程序崩溃

> ID：15080776
> 
> 赞同：1
> 
> 时间：2013-02-26T03:19:11.717
> 
> 标签：android, debugging, crash, fragment

我的应用程序正常工作，但如果它在后台运行一段时间或使用任务杀手，如果在某个片段上停止，它会在启动时崩溃，在我的程序中称为 infofragment。以下是每次崩溃的 logcat 信息：

```
02-25 21:12:23.546: E/AndroidRuntime(20048): FATAL EXCEPTION: main
02-25 21:12:23.546: E/AndroidRuntime(20048): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.android.fragments/com.example.android.fragments.MainActivity}: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.android.fragments.InfoFragment: make sure class name exists, is public, and has an empty constructor that is public
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.app.ActivityThread.access$700(ActivityThread.java:139)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.os.Looper.loop(Looper.java:137)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.app.ActivityThread.main(ActivityThread.java:4918)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at java.lang.reflect.Method.invokeNative(Native Method)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at java.lang.reflect.Method.invoke(Method.java:511)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at dalvik.system.NativeStart.main(Native Method)
02-25 21:12:23.546: E/AndroidRuntime(20048): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.example.android.fragments.InfoFragment: make sure class name exists, is public, and has an empty constructor that is public
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.support.v4.app.Fragment.instantiate(Fragment.java:395)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.support.v4.app.FragmentState.instantiate(Fragment.java:96)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1726)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:198)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at com.example.android.fragments.MainActivity.onCreate(MainActivity.java:49)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.app.Activity.performCreate(Activity.java:5048)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
02-25 21:12:23.546: E/AndroidRuntime(20048):    ... 11 more
02-25 21:12:23.546: E/AndroidRuntime(20048): Caused by: java.lang.InstantiationException: can't instantiate class com.example.android.fragments.InfoFragment; no empty constructor
02-25 21:12:23.546: E/AndroidRuntime(20048):    at java.lang.Class.newInstanceImpl(Native Method)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at java.lang.Class.newInstance(Class.java:1319)
02-25 21:12:23.546: E/AndroidRuntime(20048):    at android.support.v4.app.Fragment.instantiate(Fragment.java:384)
02-25 21:12:23.546: E/AndroidRuntime(20048):    ... 18 more 
```

我看到它唯一指向的是主活动的 onCreate() 函数中的 super.onCreate() 。这是主要活动的代码：

```
public class MainActivity extends FragmentActivity 
        implements MainListFragment.OnListSelectedListener {

    MainListFragment tempmainfrag;
    InfoFragment infofrag;
    int mainPosition = -1;
    MenuItem menuItemAdd;   //plus button in ActionBar/options menu
    boolean menucreated = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainlayout);

        // Check whether the activity is using the layout version with
        // the fragment_container FrameLayout. If so, we must add the first fragment
        if (findViewById(R.id.fragment_container) != null) { //meaning, if using phone version

            // Create an instance of MainListFragment
            tempmainfrag = new MainListFragment();  //made a context parameter to pass the context

            // In case this activity was started with special instructions from an Intent,
            // pass the Intent's extras to the fragment as arguments
            tempmainfrag.setArguments(getIntent().getExtras());

            // Add the fragment to the 'fragment_container' FrameLayout
            getSupportFragmentManager().beginTransaction()
                    .replace(R.id.fragment_container, tempmainfrag).commit();

            Log.i("mydebug","TEMPMAINFRAG: " + tempmainfrag);
        }
    }

    @Override
    public void onResume()
    {       
        super.onResume();
    }

    @Override
    public void onStart()
    {

        Log.i("mydebug","1");
        if(menuItemAdd != null)     
            menuItemAdd.setVisible(true);   //turns on menu item 'add'

        super.onStart();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        menuItemAdd = menu.findItem(R.id.menu_add);
        menucreated = true;

        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_add:     //NEED TO IMPLEMENT: MAKES ICON PRESS FOR BACK GO BACK
                // Create fragment
                infofrag = new InfoFragment(menuItemAdd);
                Bundle args = new Bundle();
                args.putBoolean(infofrag.ARG_NEW, true);

                infofrag.setArguments(args);

                FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

                // Replace whatever is in the fragment_container view with this fragment,
                // and add the transaction to the back stack so the user can navigate back
                transaction.replace(R.id.fragment_container, infofrag);
                transaction.addToBackStack(null);

                // Commit the transaction
                transaction.commit();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }

    public void onItemSelected(int position, String schedulename, String[] ampm, boolean[] days, int[] times, boolean vibrate) {
        // The user selected a list item

        //////////////////////////////TWO PANE LAYOUT STUFF///////////////////////////////////
        // Capture the article fragment from the activity layout
//        InfoFragment articleFrag = (InfoFragment)
//                getSupportFragmentManager().findFragmentById(R.id.article_fragment);  //article_fragment exists in layout-large
//
//        if (articleFrag != null) {
//            // If article frag is available, we're in two-pane layout...
//
//            // Call a method in the ArticleFragment to update its content
//            articleFrag.updateArticleView(position);
//
//        } else {
            // phone layout - swap frags

            mainPosition = position;

            // Create fragment and give it an argument for the selected article
            infofrag = new InfoFragment(menuItemAdd);
            Bundle args = new Bundle();
            args.putInt(infofrag.ARG_POSITION, position);

            //new stuff to add info
            args.putString(infofrag.ARG_NAME, schedulename);    
            args.putBooleanArray(infofrag.ARG_DAYS, days);
            args.putIntArray(infofrag.ARG_TIMES, times);
            args.putBoolean(infofrag.ARG_VIBRATE, vibrate); 
            args.putStringArray(infofrag.ARG_AMPM, ampm);
            args.putBoolean(infofrag.ARG_NEW, false);

            infofrag.setArguments(args);
            FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

            // Replace whatever is in the fragment_container view with this fragment,
            // and add the transaction to the back stack so the user can navigate back
            transaction.replace(R.id.fragment_container, infofrag);
            transaction.addToBackStack(null);

            // Commit the transaction
            transaction.commit();

    }

    public void saveButtonClicked(View view) {  //pass the click to the mainlistfragment
//      MainListFragment tempmainfrag2 = (MainListFragment)getSupportFragmentManager().
//                findFragmentById(R.id.fragment_container);

        Log.i("mydebug","TEMPMAINFRAG: " + tempmainfrag);
        if(!infofrag.newsched)  //if existing schedule, so save
        {
            Log.i("mydebug","Saving schedule...");
            boolean redo = false;       //is set true every time info isnt correct when trying to save schedule
            //create toast
            Toast toast;

            //get title
            EditText titletext = (EditText)this.findViewById(R.id.titletext);

            //get checkboxes
            CheckBox check1 = (CheckBox)this.findViewById(R.id.monbox); //recreate checkboxes from view in activity (doesnt extend Activity 
            CheckBox check2 = (CheckBox)this.findViewById(R.id.tuebox); //so use getActivity())
            CheckBox check3 = (CheckBox)this.findViewById(R.id.wedbox);
            CheckBox check4 = (CheckBox)this.findViewById(R.id.thubox);
            CheckBox check5 = (CheckBox)this.findViewById(R.id.fribox);
            CheckBox check6 = (CheckBox)this.findViewById(R.id.satbox);
            CheckBox check7 = (CheckBox)this.findViewById(R.id.sunbox);
            CheckBox vibratebox = (CheckBox)this.findViewById(R.id.vibratecheckbox);

            //get times
            TimePicker startpicker = (TimePicker)this.findViewById(R.id.starttimepicker);
            TimePicker stoppicker = (TimePicker)this.findViewById(R.id.stoptimepicker);

            //check for input errors
            if(titletext.getText().toString().length() == 0) //if title is empty
            {
                redo = true;
                toast = Toast.makeText(view.getContext(), "Enter an event name", 4);
                toast.show();

                //some sick-ass shake animations!!!
                Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_big);
                this.findViewById(R.id.titletext).startAnimation(shake);
            }
            else if((!check1.isChecked()) && (!check2.isChecked()) && (!check3.isChecked()) && 
                    (!check4.isChecked()) && (!check5.isChecked()) && (!check6.isChecked()) && 
                    (!check7.isChecked()))  //if all checkboxes arent checked
            {
                redo = true;
                toast = Toast.makeText(view.getContext(), "At least one day of week must be checked", 4);
                toast.show();

                //more sick-ass shake animations!!!
                Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_small);
                this.findViewById(R.id.checkboxes).startAnimation(shake);
                this.findViewById(R.id.daysofweek).startAnimation(shake);
                this.findViewById(R.id.frequencytext).startAnimation(shake);
            }

            if(!redo)   //if all info is fine
            {
                //check to see if time goes into next day
                if((startpicker.getCurrentHour() > stoppicker.getCurrentHour())||
                        ((startpicker.getCurrentHour() == stoppicker.getCurrentHour())
                                && (startpicker.getCurrentMinute() >= stoppicker.getCurrentMinute())))
                {
                    toast = Toast.makeText(view.getContext(), "Note: Stop time is earlier than start time, so this schedule stops at next day", Toast.LENGTH_LONG);
                    toast.show();
                }

                toast = Toast.makeText(view.getContext(), "Schedule saved", Toast.LENGTH_LONG);
                toast.show();

                //changing old schedule to new one
                boolean[] tempdays = {check1.isChecked(), check2.isChecked(), check3.isChecked(), check4.isChecked(), 
                        check5.isChecked(), check6.isChecked(), check7.isChecked()};

                Log.i("mydebug","Time info read from counters: Start hour: " + startpicker.getCurrentHour() + "\nStop hour: " + stoppicker.getCurrentHour());

                tempmainfrag.mainObjectList.changeSchedule(mainPosition, titletext.getText().toString(), tempdays, vibratebox.isChecked(), 
                        startpicker.getCurrentHour(), startpicker.getCurrentMinute(), stoppicker.getCurrentHour(), stoppicker.getCurrentMinute());

                //used to hide keyboard in case its still open when displaying list
                InputMethodManager imm = (InputMethodManager)this.getSystemService(
                          Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(titletext.getWindowToken(), 0);

                this.onBackPressed();   //replicates backpress to go back to list
            }
        }
        else        //if new schedule needs to be created
        {
            Log.i("mydebug","Creating new schedule...");
            boolean redo = false;
            //create toast
            Toast toast;

            //get title
            EditText titletext = (EditText)this.findViewById(R.id.titletext);

            //get checkboxes
            CheckBox check1 = (CheckBox)this.findViewById(R.id.monbox); //recreate checkboxes from view in activity (doesnt extend Activity 
            CheckBox check2 = (CheckBox)this.findViewById(R.id.tuebox); //so use getActivity())
            CheckBox check3 = (CheckBox)this.findViewById(R.id.wedbox);
            CheckBox check4 = (CheckBox)this.findViewById(R.id.thubox);
            CheckBox check5 = (CheckBox)this.findViewById(R.id.fribox);
            CheckBox check6 = (CheckBox)this.findViewById(R.id.satbox);
            CheckBox check7 = (CheckBox)this.findViewById(R.id.sunbox);
            CheckBox vibratebox = (CheckBox)this.findViewById(R.id.vibratecheckbox);

            //get times
            TimePicker startpicker = (TimePicker)this.findViewById(R.id.starttimepicker);
            TimePicker stoppicker = (TimePicker)this.findViewById(R.id.stoptimepicker);

            EditText temppp = titletext;
            //check for input errors
            if(titletext.getText().toString().length() == 0) //if title is empty
            {
                redo = true;
                toast = Toast.makeText(view.getContext(), "Enter an event name", 4);
                toast.show();

                //some sick-ass shake animations!!!
                Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_big);
                this.findViewById(R.id.titletext).startAnimation(shake);
            }
            else if((!check1.isChecked()) && (!check2.isChecked()) && (!check3.isChecked()) && 
                    (!check4.isChecked()) && (!check5.isChecked()) && (!check6.isChecked()) && 
                    (!check7.isChecked()))  //if all checkboxes arent checked
            {
                redo = true;
                toast = Toast.makeText(view.getContext(), "At least one day of week must be checked", 4);
                toast.show();

                //more sick-ass shake animations!!!
                Animation shake = AnimationUtils.loadAnimation(titletext.getContext(), R.anim.shake_small);
                this.findViewById(R.id.checkboxes).startAnimation(shake);
                this.findViewById(R.id.daysofweek).startAnimation(shake);
                this.findViewById(R.id.frequencytext).startAnimation(shake);
            }

            if(!redo)   //if all info is fine
            {
                //check to see if time goes into next day
                if((startpicker.getCurrentHour() > stoppicker.getCurrentHour())||
                        ((startpicker.getCurrentHour() == stoppicker.getCurrentHour())
                                && (startpicker.getCurrentMinute() >= stoppicker.getCurrentMinute())))
                {
                    toast = Toast.makeText(view.getContext(), "Note: Stop time is earlier than start time, so this schedule stops at next day", Toast.LENGTH_LONG);
                    toast.show();
                }

                toast = Toast.makeText(view.getContext(), "Schedule created", Toast.LENGTH_LONG);
                toast.show();

                //changing old schedule to new one
                boolean[] tempdays = {check1.isChecked(), check2.isChecked(), check3.isChecked(), check4.isChecked(), 
                        check5.isChecked(), check6.isChecked(), check7.isChecked()};

                Log.i("mydebug","Time info read from counters: Start hour: " + startpicker.getCurrentHour() + "\nStop hour: " + stoppicker.getCurrentHour());

                tempmainfrag.mainObjectList.addSchedule(titletext.getText().toString(), tempdays, vibratebox.isChecked(), 
                        startpicker.getCurrentHour(), startpicker.getCurrentMinute(), stoppicker.getCurrentHour(), stoppicker.getCurrentMinute());

                //used to hide keyboard in case its still open when displaying list
                InputMethodManager imm = (InputMethodManager)this.getSystemService(
                          Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(titletext.getWindowToken(), 0);

                this.onBackPressed();   //replicates backpress to go back to list
            }
        }
    }

    public void deleteButtonClicked(View view)
    {
        //tempmainfrag = (MainListFragment)getSupportFragmentManager().
                //findFragmentById(R.id.fragment_container);

        if(!infofrag.newsched)  //if existing schedule, so ask to delete
        {
            //make a notification

            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Delete?");
            builder.setIcon(R.drawable.trash_icon);
            builder.setMessage("Are you sure you wish to delete this schedule?")
               .setCancelable(false)
               .setPositiveButton("Delete", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       tempmainfrag.mainObjectList.removeSchedule(mainPosition);

                       Toast toast;
                       toast = Toast.makeText(tempmainfrag.getActivity(), "Schedule deleted", 4);
                        toast.show();

                       tempmainfrag.exit();
                   }
               })
               .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                        dialog.dismiss();
                   }
               });
            AlertDialog alert = builder.create();
            alert.show();
        }
        else    //if new schedule, so just cancel
            tempmainfrag.exit();
    }

    public void hideKeyboard()  //hides keyboard, called whenever reverting back to list
    {
        InputMethodManager imm = (InputMethodManager)getSystemService(
                  Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(), 0);
    }
} 
```

以下是如果上次打开并使用任务杀手时使应用程序崩溃的片段的代码：

```
public class InfoFragment extends Fragment {
    //strings used to get info from MainListFragment
    public String ARG_POSITION = "position";
    public String ARG_NAME = "name";
    public String ARG_DAYS = "days";
    public String ARG_TIMES = "times";
    public String ARG_VIBRATE = "vibrate";
    public String ARG_AMPM = "ampm";
    public String ARG_NEW = "new";

    boolean newsched = false;
    int mCurrentPosition = -1;
    MenuItem menuItemAddInfo;

    public InfoFragment(MenuItem add)
    {
        menuItemAddInfo = add;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {

        // If activity recreated (such as from screen rotate), restore
        // the previous article selection set by onSaveInstanceState().
        // This is primarily necessary when in the two-pane layout.
        if (savedInstanceState != null) {
            mCurrentPosition = savedInstanceState.getInt(ARG_POSITION);
        }

        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.infolayout, container, false);
    }

    @Override
    public void onStart() {

        super.onStart();
        menuItemAddInfo.setVisible(false);

        // During startup, check if there are arguments passed to the fragment.
        // onStart is a good place to do this because the layout has already been
        // applied to the fragment at this point so we can safely call the method
        // below that sets the article text.
        Bundle args = getArguments();
        if (!args.getBoolean(ARG_NEW)) //if creating fragment with existing info i.e. not new schedule
        {
            newsched = false;
            Log.i("mydebug", "TYPE: Existing schedule");
            // if a list item is clicked and arguments are fed in
            updateInfoView(args.getInt(ARG_POSITION), args.getString(ARG_NAME), args.getStringArray(ARG_AMPM), args.getBooleanArray(ARG_DAYS), 
                    args.getIntArray(ARG_TIMES), args.getBoolean(ARG_VIBRATE));
        }
        else
        {
            Log.i("mydebug", "TYPE: New schedule");
            Button changesave = (Button)getActivity().findViewById(R.id.savebutton);
            changesave.setText("Create");
            Button changedelete = (Button)getActivity().findViewById(R.id.cancelbutton);
            changedelete.setText("Cancel");
            newsched = true;

            //set defaults
            TimePicker startpicker = (TimePicker)getActivity().findViewById(R.id.starttimepicker);
            TimePicker stoppicker = (TimePicker)getActivity().findViewById(R.id.stoptimepicker);
            startpicker.setCurrentHour(8);
            startpicker.setCurrentMinute(0);
            stoppicker.setCurrentHour(15);
            stoppicker.setCurrentMinute(0);
            CheckBox vibratebox = (CheckBox)getActivity().findViewById(R.id.vibratecheckbox);
            vibratebox.setChecked(true);
        }
        //set up custom font
        Typeface customfont = Typeface.createFromAsset(getActivity().getAssets(), "fonts/Roboto-Light.ttf");

        TextView frequency = (TextView)getActivity().findViewById(R.id.frequencytext);
        TextView start = (TextView)getActivity().findViewById(R.id.starttext);
        TextView stop = (TextView)getActivity().findViewById(R.id.stoptext);
        CheckBox vibratebox = (CheckBox)getActivity().findViewById(R.id.vibratecheckbox);
        TextView mon = (TextView)getActivity().findViewById(R.id.montext);
        TextView tue = (TextView)getActivity().findViewById(R.id.tuetext);
        TextView wed = (TextView)getActivity().findViewById(R.id.wedtext);
        TextView thu = (TextView)getActivity().findViewById(R.id.thutext);
        TextView fri = (TextView)getActivity().findViewById(R.id.fritext);
        TextView sat = (TextView)getActivity().findViewById(R.id.sattext);
        TextView sun = (TextView)getActivity().findViewById(R.id.suntext);
        EditText title = (EditText)getActivity().findViewById(R.id.titletext);

        frequency.setTypeface(customfont);
        start.setTypeface(customfont);
        stop.setTypeface(customfont);
        vibratebox.setTypeface(customfont);
        mon.setTypeface(customfont);
        tue.setTypeface(customfont);
        wed.setTypeface(customfont);
        thu.setTypeface(customfont);
        fri.setTypeface(customfont);
        sat.setTypeface(customfont);
        sun.setTypeface(customfont);
        title.setTypeface(customfont);
    }

    @Override
    public void onStop()
    {
        if(menuItemAddInfo != null)     
            menuItemAddInfo.setVisible(true);   //turns on menu item 'add'
        super.onStop();
    }
    public void updateInfoView(int position, String schedulename, String[] ampm,  boolean[] days, int[] times, boolean vibrate) {   //previously used to set which article

        mCurrentPosition = position;
        //debugging info
        String debugdays = String.valueOf(days[0]) + ", " + String.valueOf(days[1]) + ", " + String.valueOf(days[2]) + ", " + 
                String.valueOf(days[3]) + ", " + String.valueOf(days[4]) + ", " + String.valueOf(days[5]) + ", " + String.valueOf(days[6]);
        String debug = "LISTITEMCLICKED:\nPosition:" + position + "\nName:" + schedulename + "\nStart AM/PM:" + ampm[0] + "\nStop AM/PM:" + ampm[1]
                + "\nDays:" + debugdays + "\nStart time: " + times[0] + ":" + times[1] + "\nStop time: " + times[2] + ":" + times[3] + "\nVibrate: " + vibrate;
        Log.i("mydebug",debug);

        //set title
        EditText titletext = (EditText)getActivity().findViewById(R.id.titletext);
        titletext.setText(schedulename);
        titletext.setSelection(titletext.getText().length());   //just sets cursor at end to fulfill my OCD

        //set days
        CheckBox check1 = (CheckBox)getActivity().findViewById(R.id.monbox);    //recreate checkboxes from view in activity (doesnt extend Activity 
        CheckBox check2 = (CheckBox)getActivity().findViewById(R.id.tuebox);    //so use getActivity())
        CheckBox check3 = (CheckBox)getActivity().findViewById(R.id.wedbox);
        CheckBox check4 = (CheckBox)getActivity().findViewById(R.id.thubox);
        CheckBox check5 = (CheckBox)getActivity().findViewById(R.id.fribox);
        CheckBox check6 = (CheckBox)getActivity().findViewById(R.id.satbox);
        CheckBox check7 = (CheckBox)getActivity().findViewById(R.id.sunbox);
        CheckBox vibratebox = (CheckBox)getActivity().findViewById(R.id.vibratecheckbox);

        if (days[0])
            check1.setChecked(true);            //enable checkboxes to correct bool value
        if (days[1])
            check2.setChecked(true);
        if (days[2])
            check3.setChecked(true);
        if (days[3])
            check4.setChecked(true);
        if (days[4])
            check5.setChecked(true);
        if (days[5])
            check6.setChecked(true);
        if (days[6])
            check7.setChecked(true);
        if (vibrate)
            vibratebox.setChecked(true);

        //set times
        TimePicker startpicker = (TimePicker)getActivity().findViewById(R.id.starttimepicker);
        TimePicker stoppicker = (TimePicker)getActivity().findViewById(R.id.stoptimepicker);

        startpicker.setCurrentHour(times[0]);
        startpicker.setCurrentMinute(times[1]);
        stoppicker.setCurrentHour(times[2]);
        stoppicker.setCurrentMinute(times[3]);

    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        // Save the current article selection in case we need to recreate the fragment
        outState.putInt(ARG_POSITION, mCurrentPosition);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T03:21:54.340

确保类`InfoFragment`具有公共默认构造函数

```
public class InfoFragment extends Fragment {

    public InfoFragment()
    {
        // Do some stuff
    }

    public InfoFragment(MenuItem add)
    {
       menuItemAddInfo = add;
    }
} 
```

# cordova - Phonegap 代码作为 Web 应用程序

> ID：15080785
> 
> 赞同：4
> 
> 时间：2013-02-26T03:20:34.960
> 
> 标签：cordova, web-applications, mobile, porting

我正在考虑将我的 phonegap html、css 和 js 代码重新用作 Web 应用程序。我将经历并删除任何仅限移动设备的功能。

目的是拥有一个提供一些移动应用程序功能的网络应用程序，我目前使用的移动设备功能很少。但我猜想维护我的移动应用程序代码的每个版本都会很麻烦。

你们中有人试过这个吗？有小费吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T04:12:12.253

通过响应式设计，您的 phonegap 代码应该可以在几乎任何设备上运行。重要的是要知道它正在运行什么（设备和操作系统），以便您可以做出相应的响应。`window.deviceInfo`我使用以下信息预先构建了一个对象：

*   `window.deviceInfo.type`: `handheld`, `tablet`,`desktop`
*   `window.deviceInfo.brand`: `ios`, `android`, `microsoft`, `webos`,`blackberry`
*   `window.deviceInfo.mode`: `browser`, `standalone`,`webview`
*   `window.deviceInfo.mobile`: `true`,`false` 
*   `window.deviceInfo.phonegap`: `true`,`false`

我使用一个`<div>`名为的容器`viewport`来创建我的响应式容器并根据它所在的设备调整它的大小。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/z8BEU/)]]]

这是设置所有内容的初始化代码：

```
initializeEnvironment();
initializeDimensions();
initializePhoneGap( function () {
   //start app  
} ); 
```

首先我设置`window.deviceInfo`.

```
function initializeEnvironment() {
    //window.deviceInfo.type: handheld, tablet, desktop
    //window.deviceInfo.brand: ios, android, microsoft, webos, blackberry
    //window.deviceInfo.mode: browser, standalone, webview
    //window.deviceInfo.mobile: true, false 
    //window.deviceInfo.phonegap: true, false 

    var userAgent = window.navigator.userAgent.toLowerCase();
    window.deviceInfo = {};

    if ( /ipad/.test( userAgent ) || ( /android/.test( userAgent ) && !/mobile/.test( userAgent ) ) ) {
        window.deviceInfo.type = 'tablet';
    } else if ( /iphone|ipod|webos|blackberry|android/.test( userAgent ) ) {
        window.deviceInfo.type = 'handheld';
    } else {
        window.deviceInfo.type = 'desktop';
    };

    if ( /iphone|ipod|ipad/.test( userAgent ) ) {
        var safari = /safari/.test( userAgent );
        window.deviceInfo.brand = 'ios';
        if ( window.navigator.standalone ) {
            window.deviceInfo.mode = 'standalone';
        } else if ( safari ) {
            window.deviceInfo.mode = 'browser';
        } else if ( !safari ) {
            window.deviceInfo.mode = 'webview';
        };
    } else if ( /android/.test( userAgent ) ) {
        window.deviceInfo.brand = 'android';
        window.deviceInfo.mode = 'browser';
    } else if ( /webos/.test( userAgent ) ) {
        window.deviceInfo.brand = 'webos';
        window.deviceInfo.mode = 'browser';
    } else if ( /blackberry/.test( userAgent ) ) {
        window.deviceInfo.brand = 'blackberry';
        window.deviceInfo.mode = 'browser';
    } else {
        window.deviceInfo.brand = 'unknown';
        window.deviceInfo.mode = 'browser';
    };
    window.deviceInfo.mobile = ( window.deviceInfo.type == 'handheld' || window.deviceInfo.type == 'tablet' );
}; 
```

然后我调整大小`viewport`和其他任何需要它的东西。移动设备使用`window.innerWidth`并`window.innerHeight`占据全屏。

```
function initializeDimensions() {
    var viewport = document.getElementById( 'viewport' );
    if ( window.deviceInfo.mobile ) {
        viewport.style.width = window.innerWidth + 'px';
        viewport.style.height = window.innerHeight + 'px';
    } else {
        //requirements for your desktop layout may be different than full screen
        viewport.style.width = '300px';
        viewport.style.height = '300px';
    };
    //set individual ui element sizes here
}; 
```

最后，我使用`window.device`（注意这与`deviceInfo`我创建的对象不同）来验证 phonegap 是否可用且准备就绪。`deviceready`当我的代码在*应该*运行 phonegap的设备上运行时，我不依赖于挑剔的事件，而是轮询该对象。调用回调时`initializePhoneGap()`，应用程序已准备好启动。

在整个应用程序中，我将 phonegap 功能包装在`if( window.deviceInfo.phonegap ) {}`.

```
function initializePhoneGap( complete ) {
    if ( window.deviceInfo.brand == 'ios' && window.deviceInfo.mode != 'webview' ) {
        window.deviceInfo.phonegap = false;
        complete();
    } else if ( window.deviceInfo.mobile ) {
        var timer = window.setInterval( function () {
            if ( window.device ) {
                window.deviceInfo.phonegap = true;
                complete();
            };
        }, 100 );
        window.setTimeout( function () { //failsafe
            if ( !window.device ) { //in webview, not in phonegap or phonegap failed
                window.clearInterval( timer );
                window.deviceInfo.phonegap = false;
                complete();
            };
        }, 5000 ); //fail after 5 seconds
    } else {
        window.deviceInfo.phonegap = false;
        complete();
    };
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:34:39.010

我们正在开发一款 iPad 应用程序并将其部署为移动网站。每当进行 PhoneGap 特定调用时，使用称为 isRunningOnPhoneGap() 的通用方法（如果代码作为网站运行，则返回 false），我们决定是调用 PhoneGap 功能还是显示 Web 功能。这是我们决定应用程序是作为网站运行还是在移动设备上运行的方式。

```
var isRunningOnPhoneGap: function () {

        if ((document.URL.indexOf('http://') === -1) && (document.URL.indexOf('https://') === -1)) {
            if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
                return true;
            } else {

                return false;
            }
        } else {
            return false;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:24:40.417

是的，它会起作用。我已经尝试过你的要求，反之亦然。包括科尔多瓦 js 文件，但不支持某些功能。但你肯定会得到基本的。

# perl - perl 中 Singleton CGI 对象的多个实例

> ID：15080787
> 
> 赞同：0
> 
> 时间：2013-02-26T03:20:39.197
> 
> 标签：perl, mod-perl

我有一个 cgi 页面 index.cgi 和一个登录表单模板

索引.cgi

```
use Singleton::CGI;
use Singleton::Session;

$q = new Singleton::CGI();
$session = new Singleton::Session();
$template = HTML::Template->new(filename => 'login.tmpl');

print $q->header;
print $q->start_html("hello perl");
print $q;   # printing hash of CGI Object.
print $session;
print $template->output;
print $q->end_html;

if($q->param('submit')){

print $q->header;
print $q->start_html("hello user");
print $q;   # printing hash of CGI Object.
print $session;
print $q->param('text');
print $q->end_html;

} 
```

登录.tmpl：

```
<form action="/" method="post">
  <input type="text" name="text"/>
  <input type="submit" name="submit" value="submit"/>
  </form> 
```

这是我得到 index.cgi 时的输出

CGI=HASH(0xbe0510)
SingletonSession=HASH(0x1e67ee60)

连同表格

接下来，当我提交表单时，然后 CGI=HASH(0xe2ac500) 与表单输入值相匹配。SingletonSession=HASH(0x115dc7a0)

根据我的要求，我应该只获得一个会话对象。

我应该如何在整个应用程序中只维护一个查询和会话对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:28:42.143

您的 Web 服务器会针对它收到的每个请求执行您的脚本，因此您要求在两个甚至不同时运行的进程之间共享一个变量。不可能的。这就是为什么使用会话来提供信息的持久性。

# facebook - Facebook 应用程序在服务端工作，而不是作为“Facebook 上的应用程序”工作

> ID：15080788
> 
> 赞同：0
> 
> 时间：2013-02-26T03:20:56.163
> 
> 标签：facebook, facebook-php-sdk

我正在做一个 facebook 应用程序，它在我的服务器和 url 上运行良好，当我尝试将它集成为“Facebook 上的应用程序”时，它在注销后无法加载或登录。我相信权限范围会带来一些问题。

服务器的网址：http: [//veritas.betamass.com](http://veritas.betamass.com)

“Facebook 上的应用”端的网址：[https ://apps.facebook.com/orientacionveritas/](https://apps.facebook.com/orientacionveritas/)

**请注意，如果您在服务器上成功登录，您将能够看到“Favcebook 上的应用程序”，否则您将一无所获。**

连接到 facebook 的代码：

```
if(!isset($_SESSION['user']))
{
    //Application Configurations
    $app_id     = "148133482012457";
    $app_secret = "24d0088e17c1dcb33ac6bb424a5d2a5c";
    $site_url   = "http://veritas.betamass.com/";

    try{
        include_once "src/facebook.php";
    }catch(Exception $e){
        error_log($e);
    }
    // Create our application instance
    $facebook = new Facebook(array(
        'appId'     => $app_id,
        'secret'    => $app_secret,
        'cookie' => true,
        ));

    // Get User ID
    $user = $facebook->getUser();
    $access_token = $facebook->getAccessToken();
    $facebook->setAccessToken($access_token);

    // We may or may not have this data based 
    // on whether the user is logged in.
    // If we have a $user id here, it means we know 
    // the user is logged into
    // Facebook, but we don�t know if the access token is valid. An access
    // token is invalid if the user logged out of Facebook.
    //print_r($user);
    if($user){
        // Get logout URL

        $logoutUrl = $facebook->getLogoutUrl();

    }else{
        // Get login URL
        $params = array(
        'scope' => 'read_stream, publish_stream, email, user_about_me, user_hometown, user_education_history, user_interests',
        'redirect_uri'  => $site_url,
        );
        $loginUrl = $facebook->getLoginUrl($params);

        /*$loginUrl = $facebook->getLoginUrl(array(
            'scope' => 'read_stream, publish_stream, email, user_about_me, user_hometown, user_education_history',
            'redirect_uri'  => $site_url,
            ));*/
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:57:16.970

如果用户不存在或没有会话，则需要先让他们登录。您的代码没有考虑到这一点。

`$facebook->getLoginUrl()`如果会话 /`$facebook->getUser()`返回，请尝试将用户重定向到`false`。

# html - 标题上方令人讨厌的空间不会离开

> ID：15080790
> 
> 赞同：2
> 
> 时间：2013-02-26T03:21:16.570
> 
> 标签：html, css, header, space

我已经将边距和填充设置为 0，但无法获得。

我是 css 和 html 的初学者，我知道以前有人问过这个问题，但我已经看过这些问题，但没有一个有帮助。这是 JSfiddle。 [提琴手](http://jsfiddle.net/6j3nn/2/)

```
 ------< HTML Code---->

 <div id = "header">
        <h1>{Title}</h1>

        {block:Description}
            <p id="description">{Description}</p>
        {/block:Description}
</div>
        <ol id="posts">
            {block:Posts}
                {block:Text}
                    <li class="post text">
                        {block:Title}
                            <h3><a href="{Permalink}">{Title}</a></h3>
                        {/block:Title}

                        {Body}
                    </li>
                {/block:Text}

                {block:Photo}
                    <li class="post photo">
                        <img src="{PhotoURL-500}" alt="{PhotoAlt}"/>

                        {block:Caption}
                            <div class="caption">{Caption}</div>
                        {/block:Caption}
                    </li>
                {/block:Photo}

                {block:Panorama}
                    <li class="post panorama">
                        {LinkOpenTag}
                            <img src="{PhotoURL-Panorama}" alt="{PhotoAlt}"/>
                        {LinkCloseTag}

                        {block:Caption}
                            <div class="caption">{Caption}</div>
                        {/block:Caption}
                    </li>
                {/block:Panorama}

                {block:Photoset}
                    <li class="post photoset">
                        {Photoset-500}

                        {block:Caption}
                            <div class="caption">{Caption}</div>
                        {/block:Caption}
                    </li>
                {/block:Photoset}

                {block:Quote}
                    <li class="post quote">
                        "{Quote}"

                        {block:Source}
                            <div class="source">{Source}</div>
                        {/block:Source}
                    </li>
                {/block:Quote}

                {block:Link}
                    <li class="post link">
                        <a href="{URL}" class="link" {Target}>{Name}</a>

                        {block:Description}
                            <div class="description">{Description}</div>
                        {/block:Description}
                    </li>
                {/block:Link}

                {block:Chat}
                    <li class="post chat">
                        {block:Title}
                            <h3><a href="{Permalink}">{Title}</a></h3>
                        {/block:Title}

                        <ul class="chat">
                            {block:Lines}
                                <li class="{Alt} user_{UserNumber}">
                                    {block:Label}
                                        <span class="label">{Label}</span>
                                    {/block:Label}

                                    {Line}
                                </li>
                            {/block:Lines}
                        </ul>
                    </li>
                {/block:Chat}

                {block:Video}
                    <li class="post video">
                        {Video-500}

                        {block:Caption}
                            <div class="caption">{Caption}</div>
                        {/block:Caption}
                    </li>
                {/block:Video}

                {block:Audio}
                    <li class="post audio">
                        {AudioPlayerBlack}

                        {block:Caption}
                            <div class="caption">{Caption}</div>
                        {/block:Caption}
                    </li>
                {/block:Audio}
            {/block:Posts}
        </ol>

    <------CSS-----------> 
```

身体{边距：0px；填充：0px;}

```
#header {background-color:red;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:24:24.610

你的 h1 的上边距是原因。`#header h1 { margin-top: 0; }`会摆脱它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:23:54.590

您的标题一上有一个继承的边距。在你的 CSS 中：

```
#header H1 { margin: 0; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T04:34:47.593

在样式之前使用重置样式表总是有帮助的。我使用 Eric Meyer 的重置[http://www.cssreset.com/scripts/eric-meyer-reset-css/](http://www.cssreset.com/scripts/eric-meyer-reset-css/)。这样您就不必担心从未添加的边距和填充。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T05:09:10.197

您需要通过以下方式重置您的默认浏览器样式：

`html,body,head,a,h1,h2,h3,h4,h5,h6,h7,pre,sup,sub { margin: 0px; padding: 0px;}`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T03:20:41.177

```
body { margin: 0px; padding: 0px;}

#header h1 {background-color:red; 
```

边距：0px；填充：0px;}

# iphone - 我的二维码扫描仪无法扫描包含特殊字符的特定 URL

> ID：15080792
> 
> 赞同：1
> 
> 时间：2013-02-26T03:21:26.720
> 
> 标签：iphone, ios, nsstring, zbar-sdk

我可以扫描所有 qrcode 以获取 url，但是某些包含特殊字符（例如“%20”）的 url 没有被扫描，它会导致应用程序崩溃。我正在使用 ZBarSDK 进行扫描，而 ZBarReaderView 是扫描仪。

`http://www.winlogisticsmedia.com/images/bigkmr%20end%20sale.jpg`是在 qrcode 上创建的 URL，我的应用程序崩溃并显示以下窗口。

![崩溃窗口](../Images/9b63c0b909cb55413c5296906230c1f2.png)

PS：还有一件事是我认为我得到的扫描报告（文本）是一个nsstring。是否有任何机会将其作为一个字符串并且文本由数字和特殊字符组成？

![线程崩溃报告](../Images/66653d941f78a1b48dc317b2d40a15bf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-04T03:14:36.320

我遇到了同样的问题。当我记录`AVMetadataMachineReadableCodeObject`stringValue 时，我的应用程序会崩溃。

我会崩溃的原始代码：

```
NSLog("%@", [machineReadableCodeObject stringValue]); 
```

一旦我用它解码了 stringValue，`stringByReplacingPercentEscapesUsingEncoding`它就不会再崩溃了：

```
NSString* decodedValue = [[machineReadableCodeObject stringValue] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog("%@", decodedValue); 
```

# c++ - 虚拟类成员函数的多态性/继承问题

> ID：15080797
> 
> 赞同：0
> 
> 时间：2013-02-26T03:21:39.200
> 
> 标签：c++, class, function, inheritance, polymorphism

我可能对多态性与继承的确切概念有错误的想法，但基本上我要做的是让***classB***从***classA***派生，并创建一个覆盖***classA***的纯虚成员函数的***classB***，如下所示：

**A类：**

```
 /////////////////
 // CodeBlock.h //
/////////////////

typedef enum {
    CCBT_UNDEFINED,
    CCBT_FUNCTION,
    //...
} CODE_BLOCK_TYPE;

class CCodeBlock {
public:
    CCodeBlock::CCodeBlock();
    CCodeBlock::CCodeBlock(CString& source, DWORD startPos);
    CCodeBlock::~CCodeBlock();
    virtual CODE_BLOCK_TYPE CCodeBlock::GetType() = 0

    CString m_code;
    DWORD m_startPos;
    DWORD m_length;
    int m_numLines;
}

  ///////////////////
 // CodeBlock.cpp //
///////////////////

//...
CCodeBlock::CCodeBlock(CString& source, DWORD startPos) : m_code(source), m_startPos(startPos) {
    m_length = m_code.GetLength();
}

CODE_BLOCK_TYPE CCodeBlock::GetType() {
    return CCBT_UNDEFINED;
} 
```

**B类：**

```
 /////////////////////
 // FunctionBlock.h //
/////////////////////

#include "CodeBlock.h"

class CFunctionBlock : public CCodeBlock {
public:
    CFunctionBlock::CFunctionBlock();
    CFunctionBlock::CFunctionBlock(CString& source, DWORD startPos);
    CFunctionBlock::~CFunctionBlock();
    CODE_BLOCK_TYPE CFunctionBlock::GetType();
}

  ///////////////////////
 // FunctionBlock.cpp //
///////////////////////

//...
CFunctionBlock::CFunctionBlock(CString& source, DWORD startPos)
{
    m_code = source;
    m_startPos = startPos;
}

CFunctionBlock::~CFunctionBlock()
{
    CCodeBlock::~CCodeBlock();
}

CODE_BLOCK_TYPE CFunctionBlock::GetType()
{
    //////////////////////////////
    // >> NEVER GETS CALLED! << //
    //////////////////////////////
    return CCBT_FUNCTION;
} 
```

**主要的：**

```
CCodeBlock *block = new CFunctionBlock(L"function hello(){ print('hello') }", iPos)
CODE_BLOCK_TYPE type = block->GetType(); // ALWAYS RETURNS CCBT_UNDEFINED! 
```

如您所见，***GetType()***总是返回*CCBT_UNDEFINED*。请记住，CCodeBlock 是 CFunctionBlock 的“通用”版本（以及其他一些志同道合的类，其中一些包含 CCodeBlock 'm_parent' 成员变量），并且应该继承任何 CCodeBlock 成员变量& 成员函数，以及覆盖 CCodeBlock 中包含的特定函数列表。

如何做到这一点？我是否需要求助于使用模板（如果可能的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:32:40.727

将评论作为答案：

`CCodeBlock::`在类中声明成员函数时不需要`CCodeBlock`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:58:43.670

您的代码有几处问题。成员声明**不应**以类名作为限定（即`CCodeBlock::`应从声明中删除）。将其留在那里会使代码格式错误。

除此之外，派生类型的析构函数**会**隐式调用基类的析构函数，你不应该这样做。如果您手动调用它，则基础子对象将被销毁两次，可能会导致未定义的行为（如果基础析构函数不是微不足道的）。

现在，您的代码的特定问题`main`可能更像是这样：

```
CCodeBlock *block 
     = new CFunctionBlock(L"function hello(){ print('hello') }", iPos)
CODE_BLOCK_TYPE type = block->CCodeBlock::GetType();
//                            ^^^^^^^^^^^^ 
```

在 C++ 中，限定函数调用会禁用动态调度。表达式将被分派到指针指向`block->GetType()`的对象的动态类型的最终覆盖器。`block`但是，如果您添加限定条件：`block->CCodeBlock::GetType()`您要求编译器在该`CCodeBlock`级别调用覆盖程序。

# dojo - dojo 模板添加/删除子

> ID：15080809
> 
> 赞同：0
> 
> 时间：2013-02-26T03:22:10.423
> 
> 标签：dojo

我正在使用弹出框模板。我的模板 html 中有 3 个内容窗格。每个内容窗格都有小部件。我需要根据一些逻辑隐藏/显示内容窗格。在该`setValues`方法中，我可以删除选项卡，但我需要将它们重新添加到不工作的销毁方法中，即没有任何反应并且它们继续被删除。怎么做？可见性/样式在内容窗格中不起作用。我的代码：

```
setValues:
var tabContainer = dijit.byId(this.id + "_tab");
            var tab2 = dijit.byId(this.id + "_SQLID2");
            var tab3 = dijit.byId(this.id + "_SQLID3");
            // Removing it:
            tabContainer.removeChild(tab2);
            tabContainer.removeChild(tab3)

  destroy:
  var tabContainer = dijit.byId(this.id + "_tab");
            var tab2 = dijit.byId(this.id + "_SQLID2");
            var tab3 = dijit.byId(this.id + "_SQLID3");
            tabContainer.addChild(tab3);
            tabContainer.addChild(tab2)

html:
 <div dojoType="dijit.layout.TabContainer" persist="true" style="width: 410px;left:6px;   height:320px;" id="${id}_tab">
<!-- Tab 1-->
                            <label for="${id}_SQLID1"></label></td>
            <div dojoType="ContentPane" for="${id}_SQLID1"    id="${id}_SQLID1" name="${id}_SQLID1" value="11"class="xwtNotification" title="SQL 1">

<!-- Tab 2-->
<div dojoType="ContentPane" for="${id}_SQLID2" id="${id}_SQLID2" name="${id}_SQLID2" class="xwtNotification" title="SQL 2">

<!-- Tab 3-->
<div dojoType="ContentPane" for="${id}_SQLID3" id="${id}_SQLID3" name="${id}_SQLID3" class="xwtNotification" title="SQL 3"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T16:38:16.827

这也让我走了一段时间。这是我发现的：

您需要从它的 tabContainer 中删除选项卡 (ContentPane) 并**销毁**ContentPane - 否则尝试创建具有相同 ID 的新 ContentPane 将引发错误。

使用 dijit.removeChild() 从 tabContainer 中删除选项卡，如下所示：

```
dijit.byId("myTabContainer").removeChild(dijit.byId("myContentPane")); 
```

然后使用以下命令销毁孤立的 ContentPane：

```
dijit.byId("myContentPane").destroy(); 
```

# ios - AirPlay 镜像的欠扫描问题

> ID：15080815
> 
> 赞同：4
> 
> 时间：2013-02-26T03:22:52.780
> 
> 标签：ios, cocoa-touch, airplay

我在使用 AirPlay 时遇到了一些问题。问题是，我正在使用 ATV3 进行开发，而我的电视机支持 1080p。但是当我开始屏幕镜像并接收 UIScreen 的新实例时，边界和 applicationFrame 都给了我 720p 的分辨率。

但是当我实际上将子视图移动到负值时会变得很奇怪，并且整个屏幕都被覆盖了。因此，从技术上讲，我的 iPhone 以 1080p 流式传输，但 UIScreen 返回的边界扫描不足。

我已经尝试`overscanCompensation`在获取边界或 applicationFrame 之前修改 （尝试了所有 3 个`overscanCompensation`可用值），但我仍然得到相同的结果。

这是我得到的照片（对不起，这是地球上最糟糕的照片，我知道，但我用手机将图像流式传输到 ATV :)）

![红色视图是 bounds 属性报告的 720p。](../Images/58217663090c49e1aa61aec699bcfd8e.png) 红色视图是 720p 报告的`bounds`。

当我在我的 ATV2 中实际尝试这个时，它变得更加奇怪（即使它支持 1080p，它也应该限制为 720p），结果*完全一样*。

无论如何，如果有人知道获得***真实***屏幕显示以避免在我的应用程序中放置设置视图的方法，我将非常感激。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T18:06:15.257

当您提到您尝试了所有 3`overscanCompensation`种模式时，我认为您的意思是 3 种*记录*模式：

```
typedef enum {
UIScreenOverscanCompensationScale,
UIScreenOverscanCompensationInsetBounds,
UIScreenOverscanCompensationInsetApplicationFrame,
} UIScreenOverscanCompensation; 
```

但是，还有第四种模式，它不存在，但应该可以解决您的问题：只需将您的设置`overscanCompensation`为`3`.

另外，看看这个[SO question](https://stackoverflow.com/questions/9465712/ios-screen-mirroring-shows-overscan-borders-on-selected-apps)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T18:49:47.937

伊万的回答为我解决了同样的问题！但我在使用 AirPlay Mirroring 时也有边界。通过更改 Apple TV 上的设置，我在没有设置 overscanCompensation 属性的情况下摆脱了边框：尝试将“设置 > 音频和视频 > 调整 AirPlay Overscan”设置为关闭（默认打开）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T17:08:45.263

最适合大多数电视的设置是：

```
externalScreen.overscanCompensation = UIScreenOverscanCompensationInsetBounds | UIScreenOverscanCompensationInsetApplicationFrame; // this is the same as setting it to 3 
```

仅将其设置为 UIScreenOverscanCompensationInsetApplicationFrame 可能会导致 UIWindow 内容未对齐。

3 是 UIScreenOverscanCompensationInsetBounds(1) 和 UIScreenOverscanCompensationInsetApplicationFrame(2) 的位掩码，适用于那些想知道该数字来自何处以及它为什么起作用的人。

# java - 使用 Android x86 进行“USB 主机”调试

> ID：15080822
> 
> 赞同：1
> 
> 时间：2013-02-26T03:23:54.613
> 
> 标签：java, android, x86, usb, android-x86

我正在尝试开发一个充当 Android USB 主机的应用程序，但是我需要知道在 VirtualBox 或 Vmware 播放器中运行的 Android x86 是否可以用于此目的。

**更新：**

如果使用 live-android 作品我必须：

*   安装单独的 USB 主机驱动程序

为了能够运行这个简单的 USB 主机应用程序：

```
UsbManager manager = (UsbManager) getSystemService(Context.USB_SERVICE);
...  
HashMap<String, UsbDevice> deviceList = manager.getDeviceList();
UsbDevice device = deviceList.get("deviceName"); 
```

# jquery - 从json中的数组加载图像

> ID：15080824
> 
> 赞同：0
> 
> 时间：2013-02-26T03:24:10.320
> 
> 标签：jquery, json, load

不知道为什么这没有加载。任何帮助都会很棒。

//images.json

```
{  
 "images": [
  {"title": "Image One", "url": "image1.jpg"},
  {"title": "Image Two", "url": "image2.jpg"},
  {"title": "Image Three", "url": "image3.jpg"}
 ]
} 
```

//application.js

```
function loadImages(url, container) {
    //get the JSON object
    $.getJSON(url, function (data) {
        if (typeof data === 'object') {
            $.each(data['images'], function (key, image) {
                var mylist = '<li><img src="' + image['url'] + '" alt="' + image['title'] + '"></li>';
                $(body).append(mylist);
            });
        }
    });
};

 $(function(){
     loadImages('images.json', '#mylist');
  }); 
```

//html

```
 <ul id="mylist"></ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:29:02.477

它应该是：

```
$(container).append(mylist); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:31:56.820

你错过了这里的报价：

```
$(body).append(mylist); 
```

它应该是：

```
$('body').append(mylist); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:32:41.223

没有什么像`$(body)`，应该是`$('body')`。同样在您的情况下，它必须是`$(container)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T03:45:29.990

您需要多一层循环：

```
$.each(data, function (key, image) {
    $.each(image, function(i,val){
        var mylist = '<li><img src="' + val.url + '" alt="' + val.title + '"></li>';
        $('body').append(mylist);
    })
}); 
```

当然，如果你想附加到容器，将 $('body') 更改为 $(container)

# validation - 如何使选择输入的第一个选项给出一个空值，以便通过验证将其视为一个空的“必填”字段？

> ID：15080825
> 
> 赞同：1
> 
> 时间：2013-02-26T03:24:13.480
> 
> 标签：validation, drop-down-menu, field, option, required

我创建了一个表单，其中包含由 Jquery validate.js 验证的必填字段。

我正在寻找为第一个选择选项提供空值的最简单方法，以便当用户未从必填字段中选择选项时，由于必填字段留空，验证无法提交表单。

下面是如何对表单进行编码的示例。谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><head>

<meta name="google-site-verification" content="WJzOl7qm8SHqmzMTjrdQwqVgXRu-EUMnY3qYUdrcJhI" />
<meta name="keywords" content=" " />
<meta name=" " content=" " />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />

<title>Example Form</title>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
 $('#contactForm').submit(function() {
 return $('#contactForm').valid();
 });
  $("#contactForm").validate({
         debug: false,
   rules: {
    firstName: "required",

    email: {
     required: true,
     email: true
    }
   },
   messages: {
    firstName: "Enter name.",
    email: "Enter email address.",
   },

  });
 });

</script>

</head>

<body>
        <div id="wrapper"> 

<form class="contactForm" action="next.php" method="post" name="contactForm" id="contactForm">

      <h1>Contact Form</h1>

<label for="subject">Subject: </label>

<select name="subject" id="subject" class="required">

<option>- Please Select -</option>

<option>General</option>
<option>Products</option>
<option>Service</option>
<option>Complaint</option>
</select>
<br>
<br>

<label for="firstName">First Name:</label>

<br>

<input name="firstName" type="text" value="" id="firstName" class="required"/>

<br><br>

<label for="surname">Surname:</label>

<br>

<input name="surname" type="text" value="" id="surname" class="required"/>

<br><br>

<label for="email">Email:</label>

<br>

<input name="email" type="text" value="" id="email" class="required email" />

<br><br>

<label for="comments">Comments:</label>

<br>

<textarea name="comments" class="required" cols="40" rows="10" id="requirements"></textarea>
<br><br>

<input type="submit" value="Submit" />
</p>
</form>

        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:26:37.490

```
<option value="">- Please Select -</option> 
```

# macos - 在 Mac 终端中运行可执行文件

> ID：15080835
> 
> 赞同：52
> 
> 时间：2013-02-26T03:26:02.310
> 
> 标签：macos, terminal

我刚刚制作了一个 .c 文件，并在 OS X 10.8.2 的终端中使用 gcc 对其进行了编译。

我的语法是 gcc -o`<filename> <sourcefile>`这很好。现在我看到我有一个可执行文件和文件`<filename>`告诉我，但除了双击图标/lame 之外，我不确定如何实际运行它。当我尝试通过键入来运行可执行文件时，找不到命令，但我认为它是可执行的......？

谢谢你。

编辑：我太傻了，它只是打开的`<filename>`

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-02-26T03:38:50.227

如果命令在系统路径上可用，Unix 只会运行命令，您可以通过 $PATH 变量查看

```
echo $PATH 
```

除非您指定它们的完整位置，否则无法运行位于不在路径上的目录中的可执行文件。所以在你的情况下，假设可执行文件在你正在使用的当前目录中，那么你可以这样执行它

```
./my-exec 
```

`my-exec`您的程序的名称在哪里。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-08-26T06:36:03.163

在 mac 中运行可执行文件

1）。移动到文件的路径：

```
cd/PATH_OF_THE_FILE 
```

2）。运行以下命令以使用 chmod 命令设置文件的可执行位：

```
chmod +x ./NAME_OF_THE_FILE 
```

3）。运行以下命令来执行文件：

```
./NAME_OF_THE_FILE 
```

运行这些命令后，您只需在文件路径中运行命令 3。

# haskell - Haskell 打印语句

> ID：15080843
> 
> 赞同：2
> 
> 时间：2013-02-26T03:26:48.050
> 
> 标签：haskell, printing

我正在用 Haskell 编写，想在一个函数中打印一条语句并调用另一个函数，但我不知道为什么这不起作用。有人可以告诉我我做错了什么或提供更合乎逻辑的解决方案吗？

我的错误是：

```
Couldn't match expected type `[a0]' with actual type `IO ()'
In the return type of a call of `putStrLn'
In a stmt of a 'do' block: putStrLn "Missing closing bracket"
In the expression:
  do { putStrLn "Missing closing bracket";
       evaluate_input } 
```

编码：

```
 bracket_content [] 0 = []
bracket_content (first:rest) counter 
    | is_open_bracket first  = first : bracket_content rest (counter + 1)
    | is_close_bracket first = first : bracket_content rest (counter - 1)
    | counter == 0 = []
    | otherwise = first : bracket_content rest counter
bracket_content _ _ = do putStrLn "Missing closing bracket" --error here
                         evaluate_input

evaluate_input :: IO ()
evaluate_input = do
  putStrLn "Enter Expression or 'q' to exit calculator: "
  expression <- getLine
  case expression of
    a:as -> return a
  unless (expression == ['q']) $ evaluate_expression expression
 where evaluate_expression e  = do 
                                   putStrLn . show $ calculate e 
                                   evaluate_input 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:33:52.553

您的问题是您试图`bracket_content`返回两种不同的类型。前两个模式返回列表，而最后一个模式返回一个`IO ()`. 编译错误表明 GHC 推断（因为您`:`在递归调用中使用 cons ( ) ）或从您的类型签名中读取类型`bracket_content`为

```
bracket_content :: [a] -> Int -> [a] 
```

但你的最后一个模式返回一个`IO ()`. 我认为您可能正在尝试返回稍后可以打印的字符列表：您正在将一个左括号附加到递归调用返回的任何内容。

一种可能的解决方案是让每个模式都返回一个`IO ()`：

```
bracket_content _ 0 = return ()
bracket_content (first:rest) counter
    | is_open_bracket first = do putChar first
                                 bracket_content rest (counter + 1)
    | is_close_bracket first = do putChar first
                                  bracket_content rest (counter - 1)
    | otherwise = do putChar first
                     bracket_content rest counter
bracket_content _ _ = do putStrLn "Missing closing bracket"
                         evaluate_input 
```

我不确定这是否会完成你想要的，但至少它可以编译。你的版本和我的版本的区别在于，在我的版本中，每个模式都返回一个 IO()，给你的函数签名：

```
bracket_content :: [Char] -> Int -> IO () 
```

还要注意我移除了你的防护

```
| counter == 0 = [] 
```

因为我将它添加到第一个模式中，如果计数器为 0，它现在不打印任何内容，无论列表是否为空。

# ember.js - Ember 路由嵌套结构

> ID：15080847
> 
> 赞同：1
> 
> 时间：2013-02-26T03:26:54.480
> 
> 标签：ember.js

我正在做一个卡片应用程序，卡片集显示在左侧边栏中。在主面板中单击一组显示：

1.  一个按钮栏
2.  一张牌桌。

单击按钮栏中的学习按钮（链接）时，我想要一个学习面板来替换卡片表。

我已经尝试过各种方法来做到这一点，例如在集合或集合下嵌套研究，但都不起作用。目前嵌套在set下，问题是：

1.  无法使用设置 ID 填充学习链接。也许部分不是插座中的b / c按钮栏？
2.  您甚至可以在没有 id 的情况下单击链接（我尝试了一个硬编码的用于测试的链接），但显示的是设置表而不是学习页面。

相关代码如下。完整代码在[github 上](https://github.com/kagemusha/crambear)，可以在[heroku](http://crambear.herokuapp.com/)上查看。

感谢有关如何最好地进行设置的帮助。

**路由**

```
App.Router.map ->
  @resource 'sets', ->
    @resource 'set', { path: ':set_id' }, ->
      @route 'study', { path: 'study' }, ->

App.SetsRoute = Ember.Route.extend
  model: -> App.Set.find()

App.SetRoute = Ember.Route.extend
  setupController: (controller, model) ->
    controller.set 'content', model

App.SetStudyRoute = Ember.Route.extend
  model: ->  App.Set.find(params?.set_id)
  setupController: (controller, model) ->
    controller.set 'content', model 
```

**集.hbs**

```
<div id="sets" class="span2">
  <div class="well well-small sidebar-nav-fixed">
      {{partial "sets/set_list"}}
  </div>
</div>

<div class="span9">
  {{outlet}}
</div> 
```

**设置.hbs**

```
{{partial "sets/set_actions"}}
<h3>&nbsp;&nbsp;{{name}}&nbsp;(id: {{id}})</h3>
{{render "cards/table" cards}} 
```

**集/_set_action**

```
{{#linkTo set.study set class="btn btn-primary"}}Study!{{/linkTo}}
<button class="btn btn-primary" {{action addCard}}>Add Card</button>
<button class="btn btn-danger" {{action delete}}>Delete Set</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:58:14.803

原来 set_actions 中的学习链接必须引用控制器（指的是集合对象）。所以：

```
{{#linkTo sets.study controller class="btn btn-primary"}}Study!{{/linkTo}}. 
```

之后，只要正确指定路线等，似乎就可以工作。将在 git 上更新完整的解决方案。

# github - 如何克隆 GitHub wiki？

> ID：15080848
> 
> 赞同：174
> 
> 时间：2013-02-26T03:27:01.230
> 
> 标签：github, wiki, git-clone

如何克隆我的 GitHub 存储库的 wiki？我知道它被保存为一个单独的 Git 存储库，但我不记得路径了。

我试过`...reponame/wiki.git`and `...reponame.git/wiki`，但都不正确。

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2013-02-26T03:27:01.230

*将.wiki.git*附加到存储库名称。

也就是说，如果您的存储库名称是*foobar*：

`git clone git@github.com:myusername/foobar.git`将是克隆存储库的路径

和

`git clone git@github.com:myusername/foobar.wiki.git`将是克隆其 wiki 的路径。

注意：您必须至少拥有一页才能克隆 wiki 存储库。（通过@tobiasz-cudnik）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-04-27T19:37:05.970

您可以使用以下命令克隆 git wiki。

```
git clone https://github.com/<git-username>/<repo-name>.wiki.git 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-09T10:08:00.667

克隆 Github wiki 存储库的语法是：

```
git clone [RepositoryName].wiki.git 
```

如果它是私有存储库，则会提示您输入用户名/密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-08T08:55:46.613

Wiki 页面作为存储库进行管理。因此，单击您的存储库，然后在左侧单击**Wiki**。最后在右上角单击**Clone Repository**。在那里，您将清楚地说明如何正确克隆它。

# ruby - 读写 JSON 并维护 Ruby 中的格式

> ID：15080854
> 
> 赞同：-1
> 
> 时间：2013-02-26T03:27:26.143
> 
> 标签：ruby, json

我有一个结构良好的（人造）JSON 文件，我想以编程方式添加和更新值。

问题是 JSON 文件的当前结构对我和我的同事来说非常容易阅读，我们希望它保持相同（或非常相似）的缩进、行间距和键顺序等。

有没有办法用 Ruby 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:29:30.920

Ruby 的 JSON 支持[`pretty_generate`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/json/rdoc/JSON.html#method-i-pretty_generate)，这是一个“漂亮”的生成器，但它绝不会尝试记住您是如何构建特定 JSON 数据文件的，也不应该记住。

```
foo = {'a' => 1, 'b' => %w[2 3]}
放 JSON.generate(foo)
{"a":1,"b":["2","3"]}
放 JSON.pretty_generate(foo)
{
  “一”：1，
  “乙”：[
    "2",
    “3”
  ]
}

```

JSON 是一种数据序列化格式，与 YAML 和 XML 一起，它旨在准确地移动数据。在保持任意行距或前导空白的同时这样做不会为序列化程序增加任何价值。

请记住，在输出中添加“漂亮”会增加被移动数据的大小，而不会提高质量：

```
放 JSON.generate(foo).size
21

放 JSON.pretty_generate(foo).size
43

```

仅将那个小哈希值“相当”地增加一倍，随着时间的推移，这会降低浏览器的吞吐量或服务器之间的跨网络吞吐量。我建议在最初调试代码时只关心“漂亮”的输出，然后在对数据移动感到满意后放弃它，以提高速度和效率。数据将是相同的。

如果您担心能够修改某些数据，请编写一个简单的读取器和/或 JSON 生成器，该生成器使用标准 Ruby 数据对象，然后让 JSON 对其进行序列化，并将输出写入文件。

# ios - 在用户不知情的情况下强制旋转

> ID：15080855
> 
> 赞同：0
> 
> 时间：2013-02-26T03:27:28.150
> 
> 标签：ios, objective-c, uiview, uiimageview, uiinterfaceorientation

我的应用程序允许用户创建发票。数据可以横向或纵向输入。

然后，用户能够保存报价并在集合视图中查看保存的报价。类似于 iOS 上的 Pages。磁贴的大小是设备在纵向视图中的纵横比。

因此，如果用户保存报价，我会生成视图的屏幕截图并将其保存，以便可以在平铺视图中查看（如 iOS 页面）。如果用户在设备处于纵向时保存，这一切正常。如果他们在风景中保存它很糟糕。

所以我的问题是，有一种方法可以在幕后旋转视图，在用户不知道任何方向变化的情况下从中生成一个 UIImage。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:06:57.973

如果您正在运行旋转它并在同一个线程中截取屏幕截图的代码，那么只要您在线程完成运行之前将其旋转回来，设备的屏幕就不会更新。只需旋转所有内容（或者如果您有太多要旋转的对象，请对其进行截图然后旋转该截图）现在对您的新旋转视图进行截图（或者如果您截图并旋转它不会做任何事情，你完成了）然后旋转一切（再次除非你只是截图然后旋转）......如果你需要一个可以在 1 个线程中运行的截图方法，请使用 CGContext 代码。

（要回答你的问题，旋转总是在幕后，它只会在你的线程结束时变成场景的“前面”......所以如果你在线程结束之前将它旋转回来，用户将永远看不到它，因为设备的屏幕在旋转两次之后才会更新，然后再旋转一次......宾果游戏！）

# sql - 在两列（单独）上不同，在另一列上区分

> ID：15080861
> 
> 赞同：1
> 
> 时间：2013-02-26T03:28:43.063
> 
> 标签：sql, sql-server, tsql, distinct

我试图从根本上解决这个问题；我希望我仍然能够在原始查询中捕捉到我想要实现的本质！

*   可以在[此处](http://corley.co/sh.sql)找到生成表和数据的代码。
*   SQL 风格是**Microsoft SQL Server 2000**（尽管我一直在 MySQL 上运行这个精简的测试用例）

**原表**

```
+-----------+----------+----------+
| master_id | slave_id | distance |
+-----------+----------+----------+
|         1 |        1 | 0.1      |
|         1 |        3 | 10       |
|         2 |        2 | 3        |
|         3 |        2 | 2        |
+-----------+----------+----------+ 
```

**所需内容的描述**

我想选择没有*重复*的`slave_id` `master_id`对或。`MIN(distance)`*`master_id``slave_id`*

 ***期望结果表**

```
+-----------+----------+----------+
| master_id | slave_id | distance |
+-----------+----------+----------+
|         1 |        1 | 0.1      |
|         3 |        2 | 2        |
+-----------+----------+----------+ 
```

**我的尝试**

```
SELECT
        join_table.master_id,
        join_table.slave_id,
        join_table.distance
    FROM join_table
    INNER JOIN
        (
            SELECT
                slave_id,
                MIN(distance) AS distance
            FROM join_table
            GROUP BY slave_id
        ) AS self_join
    ON self_join.slave_id = join_table.slave_id
    AND self_join.distance = join_table.distance 
```

**我的尝试有什么问题**

此查询产生重复的`master_id`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:58:15.997

这应该给出正确的结果：

```
select distinct t.master_id,
  t.slave_id,
  t.distance
from join_table t
inner join
(
  SELECT ID, min(Distance) dist
  FROM 
  (
    SELECT master_ID ID, MIN(distance) AS Distance
    FROM join_table
    GROUP BY master_ID
    UNION
    SELECT slave_ID ID, MIN(distance) AS Distance
    FROM join_table
    GROUP BY slave_ID
  ) src
  GROUP BY ID
) md
  on t.distance = md.dist
  and (t.master_id = md.id or t.slave_id = md.id) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/1f839/16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:38:52.107

如果我说对了，我会这样做：

```
SELECT DISTINCT t.master_id
   ,t.slave_id
   ,t.distance
FROM your_table t
   INNER JOIN 
   (
      SELECT master_id id, min(distance) distance
      FROM your_table
      GROUP BY master_id

      UNION

      SELECT slave_id id, min(distance) distance
      FROM your_table
      GROUP BY slave_id

   ) sub
   ON (sub.id = t.master_id AND sub.distance = t.distance)
     OR (sub.id = t.slave_id AND sub.distance = t.distance) 
```*

# joomla - Virtuemart 中的自定义字段允许用户输入金额

> ID：15080864
> 
> 赞同：0
> 
> 时间：2013-02-26T03:28:56.860
> 
> 标签：joomla, virtuemart, custom-fields

我的问题对大多数人来说可能很简单，但它困扰着我，我已经在谷歌上搜索了一段时间。

我正在尝试在以下网站上为客户创建产品

[https://www.anigmabeauty.co.nz/index.php?option=com_virtuemart&view=category&virtuemart_category_id=1&Itemid=235](https://www.anigmabeauty.co.nz/index.php?option=com_virtuemart&view=category&virtuemart_category_id=1&Itemid=235)

我想创建另一个名为 $100+ Gift Voucher 的凭证，该凭证显然设置为 $100.00。当观众点击这个时，我想要一个“输入金额”框，观众可以在其中输入他们想要为礼券支付的金额。例如，如果他们想要 210.00 美元的礼券，他们只需输入 210.00 美元

我设法使用自定义字段做到这一点，但它随后将输入的金额（例如 210.00 美元）添加到我不想要的 100.00 美元上。如果可能的话，我希望将 100 美元以上的礼券设置为 0 美元，并且每当观众输入他们想要的价值（例如 210.00 美元）然后进入购物车时，总金额将为 210.00 美元

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T05:03:26.320

我认为如果不修改任何核心文件，尤其是购物车帮助程序和相关文件，您就无法在当前虚拟机上完全做到这一点。

但我认为您可以通过另一种方式实现这一点。就像您计划提供一个文本框用于在前端输入金额一样。取而代之的是，您可以提供具有预定义值的列表框。这可以通过使用 VM 自定义字段选项来实现。有一个选项可以制作自定义字段的值列表。

希望这可以帮助你..

# uiimageview - UIImageview 的“弹跳”样式动画？

> ID：15080866
> 
> 赞同：0
> 
> 时间：2013-02-26T03:29:05.637
> 
> 标签：uiimageview, uialertview, uianimation

我有一个图像，它是我的应用程序中表单的模板，我想在它打开时添加一个小反弹效果，类似于 UIAlertView 第一次显示时的效果（放大，然后“反弹”然后保持静止）

任何想法如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:37:55.200

这个问题已经问过了。请在下面找到它，

[模仿 UIAlertView 反弹？](https://stackoverflow.com/questions/2160150/mimic-uialertview-bounce)

快乐编码！！！

# mysql - 对将日期字段与文字进行比较感到困惑

> ID：15080867
> 
> 赞同：4
> 
> 时间：2013-02-26T03:29:10.487
> 
> 标签：mysql, sql

我对下面的行为感到困惑。为什么第一条`SELECT`语句返回 1 而第二条语句返回 0？我希望它们都返回 1 因为日期大于或等于文字。

为什么排序规则会影响日期比较？在将日期与文字进行比较时，将日期（或日期时间）表示为字符串是否错误？如果是这样，我应该如何进行日期与文字比较？

```
mysql> 创建数据库测试；
查询正常，1 行受影响（0.00 秒）

mysql> 使用测试；

mysql> 设置名称 utf8 整理 utf8_general_ci;
查询正常，0 行受影响（0.00 秒）

mysql> 创建表 foo (
  酒吧日期不为空
) 引擎=InnoDB 默认字符集=utf8 排序=utf8_unicode_ci;
查询正常，0 行受影响（0.15 秒）

mysql> INSERT INTO foo (bar) VALUES ('2013-01-01');
查询正常，1 行受影响（0.00 秒）

mysql> SELECT COUNT(*) FROM WHERE bar >= '2013-01-01 00:00:00';
+----------+
| 计数(*) |
+----------+
| 1 |
+----------+
一组中的 1 行（0.00 秒）

mysql> 设置名称 utf8 整理 utf8_unicode_ci;
查询正常，0 行受影响（0.00 秒）

mysql> SELECT COUNT(*) FROM WHERE bar >= '2013-01-01 00:00:00';
+----------+
| 计数(*) |
+----------+
| 0 |
+----------+
一组中的 1 行（0.00 秒）

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:25:40.007

您可能假设数据库正在将您的文字字符串进行隐式类型转换为日期并比较日期。看起来数据库正在将日期隐式类型转换为字符串并比较字符串。排序规则会影响此转换，从而影响您的结果。

尝试：

```
SET NAMES utf8 COLLATE utf8_general_ci;

SELECT * FROM foo;

SET NAMES utf8 COLLATE utf8_unicode_ci;

SELECT * FROM foo; 
```

这两个查询应该给出解释行为的不同结果。

在任何情况下，cha 的建议都会起作用，因为您告诉 db 将文字字符串显式转换为日期，然后比较日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:52:17.087

你有没有尝试过

```
SELECT COUNT(*) FROM foo WHERE bar >= _utf8'2013-01-01 00:00:00' 
```

解释在[这里](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)

# css - 仅在一台计算机上的每个浏览器中的菜单上的额外填充

> ID：15080868
> 
> 赞同：0
> 
> 时间：2013-02-26T03:29:11.783
> 
> 标签：css, browser, menu, padding, rollover

我对此感到很困惑。当我在我的主计算机上的 Chrome、FireFox、IE9、Opera 或 Safari 上查看我的网页时，我的菜单滚动时顶部有 3 像素的额外填充。

当我检查房子里的另外两台电脑时，在上面提到的所有浏览器（加上 IE8）上，菜单没有 3px 的额外填充。

我已经重置了我的主计算机上的浏览器，虽然我认为外部的东西一定会影响页面呈现，因为它发生在我所有的浏览器上......？这不会是监控条件吧？我对显示器校准没有做任何花哨的事情。我所有的浏览器都在缩放 100%。

主要版本：Windows 7 其他两个版本：Windows 7 和 Windows XP

任何关于为什么会这样的猜测都会非常有帮助。谢谢。

CSS：

```
#access {
clear: both;
display: block;
float: left;
margin: 0px 0 40px 0;
padding:0;
width: 100%;
text-align:left;
/* height:54px; */
background-image:url(images/menu-bar.gif);
background-repeat:no-repeat;
background-position:top center;
}

#access ul {
list-style: none;
margin: 0 0 0 20px;
padding: 0;
width:100%;
}

#access ul li { display:inline;padding:0;margin:0; }

#access li {
background-image:url(images/menu-bar-divider.gif); 
background-repeat:no-repeat;
background-position:top right;
}

#access ul li a {
color: #ffffff;
display:block;
float:left;
padding: 18px 39px 17px 39px;
text-decoration: none;
font-size:16px;
text-shadow: 0px 1px #c86209;
}

#access li a:link { }
#access li:last-child { background-image:none; }    
#access a:hover { text-shadow: none;background-image:url(images/menu-bar-hover.gif);background-repeat:repeat-x;background-position:bottom center;color:#000000!important;}
#access a:visited { color:#ffffff!important;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:46:05.387

可能的场景：

1.  这是 CMS 吗？你可能在另一台电脑上以管理员身份登录吗？我在使用 Wordpress 时遇到了同样的问题。[http://wordpress.org/support/topic/31-update-causing-28px-top-spacing-in-html-body](http://wordpress.org/support/topic/31-update-causing-28px-top-spacing-in-html-body)
2.  您是否安装了任何干扰您的布局的插件、插件、广告软件？
3.  您是否使用了 CSS 重置或标准化？（其中之一不是两者）这可以帮助您解决

类似的问题。

1.  [http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)
2.  [http://developer.yahoo.com/yui/reset/](http://developer.yahoo.com/yui/reset/)

您可以尝试在 JSFIDDLE 或[http://tinkerbin.com/](http://tinkerbin.com/)中复制您的案例吗？

# vba - 网址搜索栏，将网页另存为单独的文本文件

> ID：15080872
> 
> 赞同：1
> 
> 时间：2013-02-26T03:30:10.523
> 
> 标签：vba, excel

我这里的代码适用于硬编码的 url，它只适用于一个 url 和一个文本文件。

```
Sub saveUrl_Test()

Dim FileName As String
Dim FSO As Object
Dim ieApp As Object  
Dim Txt As String
Dim TxtFile As Object
Dim URL As String

    URL = "www.bing.com"
    FileName = "C:\mallet\bing.com.txt"

    Set FSO = CreateObject("Scripting.FileSystemObject")
    Set TxtFile = FSO.OpenTextFile(FileName, 2, True, -1)

    Set ieApp = CreateObject("InternetExplorer.Application")
    ieApp.Visible = True
    ieApp.Navigate URL

    While ieApp.Busy Or ieApp.ReadyState <> 4
        DoEvents
    Wend

    Txt = ieApp.Document.body.innerText
    TxtFile.Write Txt
    TxtFile.Close

    ieApp.Quit

    Set ieApp = Nothing
    Set FSO = Nothing
End Sub 
```

我想要它做的是在 B 列中搜索 url（可能使用 InStr(variable, "http://") 作为布尔值），然后将每个网页保存为单独的文本文件。有没有办法使用部分 URL 字符串来命名文本文件？另外，有没有办法让网页不打开，但仍保存为文本文件？打开网页会浪费很多时间。

我根据@MikeD 的建议创建了这个额外的子程序，但我得到了 wend 没有 while 错误。

```
Sub url_Test(URL As String, FileName As String)

Dim FSO As Object
Dim ieApp As Object
Dim Txt As String
Dim TxtFile As Object

    Set FSO = CreateObject("Scripting.FileSystemObject")
    Set TxtFile = FSO.OpenTextFile(FileName, 2, True, -1)

    Set ieApp = CreateObject("InternetExplorer.Application")
    ieApp.Visible = True
    ieApp.Navigate URL

    While ieApp.Busy Or ieApp.ReadyState <> 4
        DoEvents
    Wend

    Txt = ieApp.Document.body.innerText
    TxtFile.Write Txt
    TxtFile.Close

    ieApp.Quit

    Set ieApp = Nothing
    Set FSO = Nothing
End Sub

Sub LoopOverB()  
Dim myRow As Long

    myRow = 10

    While Cells(myRow, 2).Value <> ""

        If InStr(1, Cells(myRow, 2).Value, "http:\\", vbTextCompare) Then Call url_Test(Cells(myRow, 2).Value, "C:\mallet\test\" & Cells(myRow, 1).Value & ".txt")
        myRow = myRow + 1
    Wend 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:29:48.783

首先你可以参数化子

```
Sub saveUrl_param(URL as String, FileName as String)
    ....
End Sub 
```

并删除 and 的and`Dim`赋值语句`URL``FileName`

Secondly you write another Sub which loops through non-empty cells in column B, retrieving values and conditionally calling the `saveUrl_param()` routine.

example:

```
Sub LoopOverB()
Dim C As Range
    For Each C In Intersect(ActiveSheet.Columns("B"), ActiveSheet.UsedRange).SpecialCells(xlCellTypeConstants)
        ' If C = .... Then ' note: URL in [B], filename in [C]
        '     saveUrl_param(C, C(1,2))
        ' End If
    Next C
End Sub 
```

and no - you can't do it without opening the Web page; you somehow have to get the page from the server (or the proxy). This is done by

```
ieApp.Navigate URL 
```

and the following `While ... Wend` construct waits until the page is fully loaded into the browser object.

To speed up things you could skip

```
ieApp.Visible = True 
```

once you have confidence that your Sub is working correctly, and you could move

```
Dim ieApp As Object ' I would prefer As SHDocVw.InternetExplorer .... don't like late binding
Set ieApp = CreateObject("InternetExplorer.Application") 
```

to the calling sub and hand over the ieApp object to the subroutine as a parameter in order to not open/close the browser again & again.

# linux - Chef 中的 apt-get update 和 apt-get upgrade

> ID：15080876
> 
> 赞同：18
> 
> 时间：2013-02-26T03:30:44.433
> 
> 标签：linux, ubuntu, chef-infra, vagrant, apt-get

如果`package "nginx"`在 Chef 中被翻译成`apt-get install nginx`Ubuntu 节点，那么可以在 Chef 配方中写入的内容将翻译成：

```
apt-get -y update
apt-get -y upgrade 
```

无法从[`apt`食谱](https://github.com/opscode-cookbooks/apt)中弄清楚。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-26T15:51:22.217

[Opscode "apt" cookbook](https://github.com/opscode-cookbooks/apt)的默认配方将运行`apt-get update`以确保更新包缓存。我们建议将其放在节点的运行列表的早期，以便以后可以使用正确的版本安装软件包。

我们通常不建议用户`apt-get upgrade`在食谱中使用“”，原因有几个。

1.  `apt-get`如果不再次运行该命令或手动运行其他 apt/dpkg 命令，可能会升级具有冲突配置或其他无法解决的问题的软件包。
2.  系统上所有软件包的自动升级可能会对正在运行的系统产生意想不到的副作用（边缘情况很多而且可能很棘手，所以我不能全部介绍）。

相反，对应始终更新到最新版本的软件包使用“升级”操作。

```
package "nginx" do
  action :upgrade
end 
```

如果您正在重用定义说明书的说明书，则可以编写修改现有资源操作的配方，如下所示：

```
resources("package[nginx]").action(:upgrade) 
```

配方中的`#resources`方法将在资源集合中查找指定的资源（包 nginx）。然后发送`#action`带有参数的方法`:upgrade`将告诉 Chef 该操作应该是升级。

*编辑* **更新**：选择将以这种方式自动升级的软件包时要小心。包中的上游更改可能会对系统造成不利影响。如果此类软件包在安装后脚本期间重新启动其管理的服务，则尤其如此。了解您的基础架构，如果有疑问，请运行您自己的包存储库，其中包含应用程序堆栈所需的关键包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T18:22:27.367

Apt 厨师食谱不会随着每次厨师运行而更新。控制这一点的属性被调用`periodic_update_min_delay`并设置为 86400（该属性应称为 sec_delay）。如果以下文件存在并且超过 24 小时，apt 将更新缓存。

```
/var/lib/apt/periodic/update-success-stamp 
```

似乎 apt 配方 (default.rb) 包含一个指令来强制您的配方可以调用的更新。

```
# For other recipes to call to force an update
execute 'apt-get update' do 
```

但是，如果您这样做，您将需要一个 not_if 以避免过于频繁地运行它，此时您不妨自己手动调用它。我厌倦了这个，最后只是在我安装之前在一个节中调用了 apt-get update 。

```
execute "apt-get-update" do
  command "apt-get update"
end 
```

我怀疑安全更新的长期解决方案是将更新延迟设置为几个小时。

# git - 带有“--work-tree”标志的 git pull 失败

> ID：15080877
> 
> 赞同：1
> 
> 时间：2013-02-26T03:31:00.213
> 
> 标签：git, git-pull

我正在运行（在脚本中 - 试图避免使用 cd）：

```
git --git-dir=/test/.git --work-tree=/test/ pull 
```

并得到：

```
fatal: /usr/lib/git-core/git-pull cannot be used without a working tree. 
```

请注意，我已经运行了具有这种结构的其他命令（特别是 add、commit 和 pull），所以我认为这只是一个 pull 问题。

此处记录了一个类似的问题：[Git pull failed to parse syntax](https://stackoverflow.com/questions/7851967/git-pull-fails-to-parse-syntax)，但并不完全相同 - 它们得到不同的错误（并且它们在 Windows 上运行，所以谁知道......我在 Ubuntu 上）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:34:03.347

感谢 isbadawi 的回答。

原来这个问题之前已经回答过：[git pull while not in a git directory](https://stackoverflow.com/questions/5083224/git-pull-while-not-in-a-git-directory)。

简而言之，这是 git pull 的一个错误。但是，由于 pull 基本上是获取和合并的别名，因此以下内容等效于 pull（从上面的链接复制）：

```
cd /X
git --git-dir=/X/Y/.git fetch
git --git-dir=/X/Y/.git --work-tree=/X/Y merge origin/master 
```

# c# - 为什么我的枚举不能在另一个类中找到？

> ID：15080879
> 
> 赞同：1
> 
> 时间：2013-02-26T03:31:03.697
> 
> 标签：c#, visual-studio, enums, xamarin.android

尝试`enum`从另一个类访问一个名为 Monsters 的 .`using`在我的课堂上关联。

这是我的枚举代码：

```
namespace Zadify.Enums
{
    public enum Monsters
    {
        Zombie,
        Skeleton,
        Mummy,
        Robot,
        Demon
    }
} 
```

这是我的课程，我需要从以下位置访问它：

```
using System;
using System.Xml.Serialization;
using Zadify.Enums;

namespace Zadify
{
    [Serializable]
    public abstract class Goal
    {
        //Properties, Other methods

        public void AssignMonsterData(int rank)
        {
            var random = new Random();

            var monsterTypeValues = Enum.GetValues(typeof (Monsters)); //Gives the error on "Monsters" here
            var monster = (Monsters) monsterTypeValues.GetValue(random.Next(rank - 1)); //Also gives the error on this "Monsters"

            //Do other stuff
        } 
```

我后来做了一个`switch`on `monster`，每次我使用`Monsters.Zombie`,等时似乎都很好`Monsters.Skeleton`。我还有其他几个都可以正常工作，事实上，我在这个类中使用了完全相同的代码。`enums``Zadify.Enums`

到目前为止，我已经尝试更改枚举`namespace`并将 a 添加`using`到那个 new`namespace`中，复制`Monsters`到另一个文件中，清理项目并重建一百次。我正在使用 Visual Studio 2010 并为 Android 应用程序编写 Mono，尽管这些类中没有 Android 代码。

在我构建之前，Visual Studio 似乎没有问题。事先，智能感知工作正常，如果我取出该`using Zadify.Enums;`行，它会询问这是否是我想要引用的内容，然后 ctrl+单击它会将我带到正确的文件。

如果我应该提供任何其他代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:32:10.380

@ZAD-Man，检查您的客户资料设置。

1.  右键单击项目
2.  您应该在“应用程序”选项卡上
3.  查看 Target 框架下拉菜单

设置为`.Net Framework xx Client Profile`? 在 Visual Studio 将我的项目默认为该项目之前，我遇到了一些奇怪的问题……尝试将其更改为`.Net Framework 4`没有客户端配置文件部分，看看它是否有效。

您正在寻找的屏幕与此类似：

![在此处输入图像描述](../Images/3098ad164b254c9e5271e240e099bc6c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:49:21.593

它可能发生的原因是该类没有被添加到类库中。还要检查引用是否添加了这个类库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T22:33:27.713

所以事实证明我只是犯了一个愚蠢的错误。我`Goal.cs`在另一个项目中添加了链接，但忘记链接我的枚举。另一个没有问题的唯一原因是因为它被抓住了`Monsters`并且没有看其他人。由于它是一个链接，单击异常只是将我带到了真实的`Goal.cs`，所以我认为问题出在那个项目中，但如果我仔细观察，我会发现它是另一个项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-05T13:48:10.327

我有这个。问题是引用项目意外地将其目标更改为 x86，而枚举项目目标仍然是 Any CPU。

# python - 使用 lambda 验证列表中的所有元素

> ID：15080880
> 
> 赞同：1
> 
> 时间：2013-02-26T03:31:11.477
> 
> 标签：python, lambda

我有一份名为“my_foods”的食物清单。

我想使用 lambda 函数来验证列表“good_foods”中的所有元素是否出现在列表“my_foods”中，并验证列表“bad_foods”中的所有元素都没有出现在“my_foods”中。

我可以用嵌套的 for 循环和 if 语句来解决这个问题，但我很好奇 lambdas 是否更优雅。

如果“my_foods”同时具有“apple”和“carrot”，则以下成功执行：

```
good_foods = ['apple', 'carrot']
junk_foods = ['soda', 'burger']

my_foods = ['banana', 'carrot', 'bread', 'apple']

result = ( filter(lambda x: x in my_foods, good_foods) and
    not filter(lambda x: x in my_foods, junk_foods) )

print result
# True 
```

但是，如果“my_foods”只有“apple”或只有“carrot”，那么下面仍然返回 True，我不希望这样。我希望它返回 False。我想验证所有“good_foods”都在“my_foods”列表中：

```
good_foods = ['apple', 'carrot']
junk_foods = ['soda', 'burger']

my_foods = ['banana', 'carrot', 'bread']

result = ( filter(lambda x: x in my_foods, good_foods) and
    not filter(lambda x: x in my_foods, junk_foods) )

print result
# True 
```

另外，如果“my_foods”既没有“apple”也没有“carrot”，那么下面会返回一个空列表。我希望它返回 False 代替：

```
good_foods = ['apple', 'carrot']
junk_foods = ['soda', 'burger']

my_foods = ['banana', 'bread']

result = ( filter(lambda x: x in my_foods, good_foods) and
    not filter(lambda x: x in my_foods, junk_foods) )

print result
# [] 
```

最后，如果任何“bad_foods”在“my_foods”列表中，则以下成功执行并返回 False，这就是我在这种情况下想要的：

```
good_foods = ['apple', 'carrot']
junk_foods = ['soda', 'burger']

my_foods = ['banana', 'carrot', 'bread', 'apple', 'soda']

result = ( filter(lambda x: x in my_foods, good_foods) and
    not filter(lambda x: x in my_foods, junk_foods) )

print result
# False 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:47:45.903

我会使用这样的方法来解决这个`any()`问题`all()`：

```
result = (all(f in my_foods for f in good_foods) and
    not any(f in my_foods for f in junk_foods)) 
```

如果你真的想用`lambda`这个，你可以这样做：

```
lambda my f: f in my_foods
lambda bad f: f in junk_foods

result = all(my(f) for f in good_foods) and not any(bad(f) for f in my_foods) 
```

但我会用真正的功能做上面的事情：

```
def my(f):
    return f in my_foods

def bad(f):
    return f in junk_foods

result = all(my(f) for f in good_foods) and not any(bad(f) for f in my_foods) 
```

现在，如果您真的想`lambda`使用`map()`or来做到这一点`reduce()`，这是我的建议：

```
result = (reduce(lambda x, y: x and y, map(lambda f: f in my_foods, good_foods))
    and reduce(lambda x, y: x and y, map(lambda f: f not in junk_foods, my_foods))) 
```

`bool.__and__()`我认为如果我们利用实现逻辑和布尔值的内置函数，上述内容会略有改进，如下所示：

```
result = (reduce(bool.__and__, map(lambda f: f in my_foods, good_foods))
    and reduce(bool.__and__, map(lambda f: f not in junk_foods, my_foods))) 
```

`filter()`但是，如果您愿意，可以 使用这里的解决方案。`filter()`剔除未通过测试的元素，因此找出每个元素是否通过测试的最简单方法是查看结果列表是否与原始列表的长度相同。

```
result = (len(filter(lambda f: f in my_foods, good_foods)) == len(good_foods) and
    len(filter(lambda f: f not in junk_foods, my_foods)) == len(my_foods)) 
```

请注意，`any()`两者`all()`都有“短路”评估；它们将比`reduce()`并非列表中的每个元素都真正需要检查的情况更快。例如，如果列表中的第一项在列表中`junk_foods`，则`any()`测试将立即完成并且`not any(...)`将评估为`False`。`reduce()`答案仍然会贯穿整个列表`junk_foods`。

另请注意，对于大型列表，您将通过使用集合获得很大的速度提升。其他一些答案建议将列表转换为集合并使用集合功能；这可能是最好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T03:49:41.207

```
good_foods = ['apple', 'carrot']
junk_foods = ['soda', 'burger']

my_foods = ['banana', 'carrot', 'bread', 'apple', 'soda']

result = all( map( lambda x: x in my_foods, good_foods ) ) and 
         not( any( map( lambda x: x in junk_foods, my_foods ) ) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T03:37:41.623

您不能使用的任何原因：

```
bool(set(my_foods).difference(junk_foods).intersection(good_foods)) 
```

所以：

*   清除所有垃圾食品`my_foods`
*   确保非垃圾物品`good_foods`
*   将结果转换为布尔值，因此 [] 为 False，剩下的任何内容都为 True

会很快，而且很容易阅读。

常见的情况似乎是非垃圾食品......所以让我们这样做：

```
non_junk = set(my_foods).difference(junk_foods) 
```

所有好的食物都在非垃圾食品中：

```
set(good_foods).issubset(non_junk) 
```

不是垃圾的好食物

```
non_junk.intersection(good_foods) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T03:52:49.827

解释你的描述，给出

```
all(food in my_foods for food in good_foods) and \
not any(food in my_foods for food in junk_foods) 
```

如果您将 my_foods 设置为一组，效率会更高

```
>>> good_foods = ['apple', 'carrot']
>>> junk_foods = ['soda', 'burger']
>>> my_foods = {'banana', 'carrot', 'bread', 'apple'}
>>> all(food in my_foods for food in good_foods) and \
... not any(food in my_foods for food in junk_foods)
True
>>> my_foods = {'banana', 'carrot', 'bread'}
>>> all(food in my_foods for food in good_foods) and \
... not any(food in my_foods for food in junk_foods)
False
>>> my_foods = {'banana', 'bread'}
>>> all(food in my_foods for food in good_foods) and \
... not any(food in my_foods for food in junk_foods)
False
>>> my_foods = {'banana', 'carrot', 'bread', 'apple', 'soda'}
>>> all(food in my_foods for food in good_foods) and \
... not any(food in my_foods for food in junk_foods)
False 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T03:58:47.430

将所有列表转换为集合并执行以下操作：

```
result = my_foods >= good_foods and not my_foods & junk_foods 
```

所以你的食物必须包含所有好的食物而不是垃圾食物

为避免处理整个`junk_food`集合，您可以执行以下操作：

```
result = my_foods >= good_foods and my_foods.isdisjoint(junk_foods) 
```

# java - Swing - JEditorPane 加载本地 html 时不显示本地图像

> ID：15080881
> 
> 赞同：1
> 
> 时间：2013-02-26T03:31:15.480
> 
> 标签：java, swing

我正在写一些东西，它加载一个模板 html 文档，对其进行一些关键字替换，然后将其打印出来。除了模板中包含图像外，这很好用。如果我浏览到模板 .html 图像显示正常（所以我猜路径没问题），但它们在最终输出中显示为空白空间。

模板 html 类似于：

```
<html>
<body>
<img src="file://c:/temp/my-logo.png" width="50" height="50"/>
[[[some stuff I want to replace]]]
</body>
</html> 
```

很简单。并像这样加载这个模板：

```
public void test() {
   JEditorPane text = new JEditorPane("text/html", "default");
   HTMLEditorKit htmlEditorKit = new HTMLEditorKit();
   HTMLDocument htmlDocument = (HTMLDocument)htmlEditorKit.createDefaultDocument();

   text.setEditorKit(htmlEditorKit);
   // read the html template into the JEditorPane's text
   text.read(new BufferedReader(new InputStreamReader(new FileInputStream(new File("path to my template html")))), htmlDocument);

   // then do some replacements
   text.setText(magicReplacements(text.getText()));

   text.repaint();
   // and then print job stuff, fire off the job, check if it worked etc...
} 
```

文本显示和格式正确，只是图像从不显示。任何人都可以发现有什么问题吗？

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T04:06:16.153

我认为路径是错误的。

而不是`file://c:/temp/my-logo.png`你应该尝试`file:/c:/temp/my-logo.png`

在测试我的示例时，我同时使用了`//c:/`and`/c:/`并且第二个有效，而第一个失败了。

我能够让它工作......

![在此处输入图像描述](../Images/2406cd51337770021bc142c6aa9f2e44.png)

**HTML**

```
<html>
<body>
<img src="file:/c:/backgroundtext.png"/>
[[[some stuff I want to replace]]]
</body>
</html> 
```

**示例代码**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.io.File;
import java.io.FileReader;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestTextPane {

    public static void main(String[] args) {
        new TestTextPane();
    }

    public TestTextPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                FileReader fr = null;

                try {
                    fr = new FileReader(new File("c:/Test.html"));
                    JEditorPane editor = new JEditorPane();
                    editor.setContentType("text/html");
                    editor.read(fr, "Test");

                    JFrame frame = new JFrame("Testing");
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setLayout(new BorderLayout());
                    frame.add(new JScrollPane(editor));
                    frame.pack();
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);
                } catch (Exception exp) {
                    exp.printStackTrace();
                } finally {
                    try {
                        fr.close();
                    } catch (Exception e) {
                    }
                }
            }
        });
    }
} 
```

# javascript - 如何在javascript中自动生成数组？

> ID：15080882
> 
> 赞同：1
> 
> 时间：2013-02-26T03:31:16.430
> 
> 标签：javascript, arrays

我想创建一个自动生成数组并为其分配值的循环。问题是如何自动生成数组本身。

```
for(var attGetter=1; attGetter <= num; attGetter++){
    var catesArray1 = new Array();

    for(var atttGetterArray=1; atttGetterArray <= series; attGetterArray++){
        idOfInput  = "cate"+chartGetter+"_series"+attGetterArray;
        catesArray1.push($("#"+idOfInput).val());
    }
} 
```

我希望循环像 catesArray1 catesArray2 catesArray3 一样自动生成数组本身

等等..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:38:43.120

您需要一个对象或一个数组来保存您希望创建的多个数组。也许您正在寻找的东西如下所示？

```
var arrayHolder = new Array();

  for(var attGetter=1; attGetter <= num; attGetter++){
  var catesArray = new Array();

  for(var attGetterArray=1; atttGetterArray <= series; attGetterArray++){
    idOfInput  = "cate"+chartGetter+"_series"+attGetterArray;
    catesArray.push($("#"+idOfInput).val());
  }
  arrayHolder.push(catesArray);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:36:19.797

如果您希望数组位于全局命名空间中，您可以尝试

```
window['catesArray' + attGetter] = [];
...
window['catesArray' + attGetter].push(...) 
```

否则，您可以创建一个哈希对象并使用它来保存引用

```
var obj = {};
.....
obj['catesArray' + attGetter] = [];
.....
obj['catesArray' + attGetter].push(...) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T03:39:18.693

在这种情况下，您将必须创建一个新数组来保存第一个循环中的所有`cacatesArray`s`for`

```
var catesArrayContainer = new Array(); //<<<---------------------
for(var attGetter=1; attGetter <= num; attGetter++){
    var catesArray = new Array();

    for(var atttGetterArray=1; atttGetterArray <= series; attGetterArray++){
        idOfInput  = "cate"+chartGetter+"_series"+attGetterArray;
        catesArray.push($("#"+idOfInput).val());
    }
    catesArrayContainer.push(catesArray); //<<<--------------------
} 
```

**编辑 ：**

发生这种情况是因为变量的范围`catesArray1`受到限制。当循环进入下一次迭代时，`catesArray1`将重新初始化，从而丢失所有先前存储的值......现在在我发布的代码中，我们将每个实例存储`catesArray1`在另一个数组中，并且您的值在`for`循环之外持续存在

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T03:42:30.620

您可以为 4 个数组执行类似的操作，每个数组包含 5 个元素

```
yourarray=[];
for (i = 0; i <4; i++) {
     temparray=[];
    for (j = 0; j < 5; j++) {
        temparray.push($('#'+whateverID+'_'+i+'_'+j)) //your values here
    }
yourarray.push(temparray);
} 
```

[在这个 JSFiddle](http://jsfiddle.net/farrukhsubhani/KudTe/)上检查它。打开 chrome 控制台查看数组

**如果要在循环中从索引创建数组**

您可以使用 eval 从字符串评估 javascript，但除非没有其他方法，否则我不会使用它。[你可以在这个Fiddle](http://jsfiddle.net/farrukhsubhani/KudTe/2/)中看到 above 和 eval 方法。打开 Chrome 控制台以查看数组值 **只是比较使用 eval 和 2D 数组** 在运行此[jsFiddle](http://jsfiddle.net/farrukhsubhani/KudTe/4/)时在 chrome 中打开控制台，您将在此问题的上下文中看到 eval 和 2darray 的差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T03:39:18.143

您应该将它们分配给一个对象。在这种情况下，在第一个 for 循环之前创建一个对象变量来保存所有数组：

```
var allArrays = {};

for(var attGetter=1; attGetter <= num; attGetter++){
    var currentArray = allArrays['catesArray' + attGetter] = new Array();

    for(var atttGetterArray=1; atttGetterArray <= series; attGetterArray++){
        idOfInput  = "cate"+chartGetter+"_series"+attGetterArray;
        currentArray.push($("#"+idOfInput).val());
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T03:42:31.197

`array`如果你愿意的话，我不会尝试创建和分配动态命名的变量，而是更多地考虑这个`array`。换句话说，创建一个包含所有你想要的数组的数组：

```
var collections = []; // Literal notation for creating an array in JS 
```

从这里开始，将您在此数组中创建的每个值都设为自己的数组：

```
var n = 10; // Total amount of arrays you want
for (var i = 0; i < n; i++) {
    var values = [];
    // Have another loop that fills in the values array as expected
    collections.push(values); // Each element at collections[i] is its own array.
} 
```

如果你真的需要命名元素，你可以用一个对象来做一些非常相似的事情`{}`，并通过你创建的名称来引用每个元素。

```
var collections = {}; // Literal notation for an object in JS
var n = 10; // Total amount of arrays you want
for (var i = 0; i < n; i++) {
    var values = []; // Literal notation for an array in JS
    // Fill in the values array as desired

    var name = 'arr' + i; // How you'll refer to it in the object
    collections[name] = values;
} 
```

我建议使用前者，因为听起来您不需要在数组上有明确的名称，而只需要多层数组。

# c# - 如何使用配置节处理程序导入具有 App.config 的 .NET DLL？

> ID：15080883
> 
> 赞同：3
> 
> 时间：2013-02-26T03:31:30.480
> 
> 标签：c#, .net, powershell, exception-handling, app-config

我正在尝试使用我们内部 .net 应用程序中的 DLL。

DLL 有一个 App.config 文件，并且有一个配置部分，用于指定配置处理程序。

我无法让我的 PowerShell 脚本加载此 dll。

我已将问题归结为最简单的形式。

这是我正在尝试的 PowerShell 脚本：

```
[appdomain]::CurrentDomain.SetData("APP_CONFIG_FILE", "D:\CustomConfig\CustomConfig\CustomConfigTestHarness\bin\Debug\CustomConfigTestHarness.exe.config")
Add-Type -Path 'D:\CustomConfig\CustomConfig\CustomConfigTestHarness\bin\Debug\CustomConfig.dll'
$mainClass = New-Object CustomConfig.Main
$mainClass.TestConfig() 
```

这是配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="PrimarySqlServers" type="CustomConfig.ServerConfiguration, CustomConfig" />
    </configSections>
    <PrimarySqlServers>
        <Server name="data source=SQL\SQL2005; Initial Catalog=master;  Trusted_Connection=yes;"/>
    </PrimarySqlServers>
</configuration> 
```

这是DLL：

```
namespace CustomConfig
{
    public class Main
    {
        public string TestEcho(string message)
        {
            return message;
        }

        public string TestConfig()
        {
            Configuration configuration = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
            string sectionName = "PrimarySqlServers";
            ServerConfiguration serverConfiguration = configuration.GetSection(sectionName) as ServerConfiguration;
            if (serverConfiguration == null || serverConfiguration.ServerList.Count == 0)
            {
                throw new ConfigurationErrorsException(string.Format(CultureInfo.InvariantCulture, "ERR_MISSING_OR_EMPTY_SECTION", sectionName));
            }
            ServerConfigurationEntry entry = serverConfiguration.ServerList[0];
            {
                return entry.Name;
            }
        }
    }
} 
```

configClass.cs 文件内容如下：

```
using System;
using System.Configuration;
using System.Diagnostics;

namespace CustomConfig
{
    /// <summary>
    /// Contains individual configuration information about a site to be deployed
    /// </summary>
    public class ServerConfiguration : ConfigurationSection
    {
        /// <summary>
        /// Get the collection of assembly items
        /// </summary>
        [ConfigurationProperty("", IsDefaultCollection = true)]
        public ServerConfigurationCollection ServerList
        {
            get { return (ServerConfigurationCollection) base[""]; }
        }
    }

    /// <summary>
    /// ContextCollection - represents the collection of context nodes
    /// </summary>
    public class ServerConfigurationCollection : ConfigurationElementCollection
    {
        /// <summary>
        /// Get the assembly item element with the given name
        /// </summary>
        /// <param name="name">The name of the item you want</param>
        /// <returns>The item specified</returns>
        public new ServerConfigurationEntry this[string name]
        {
            get
            {
                if (IndexOf(name) < 0) return null;
                return (ServerConfigurationEntry) BaseGet(name);
            }
        }

        /// <summary>
        /// Get a assembly item element by index
        /// </summary>
        /// <param name="index">The index of the item to get</param>
        /// <returns>The item specified</returns>
        public ServerConfigurationEntry this[int index]
        {
            get { return (ServerConfigurationEntry) BaseGet(index); }
        }

        /// <summary>
        /// Clear the collection of items
        /// </summary>
        public void Clear()
        {
            BaseClear();
        }

        /// <summary>
        /// Add a new item to the collection
        /// </summary>
        /// <param name="name">The name of the site to add</param>
        public void AddItem(string name)
        {
            ServerConfigurationEntry newEntry = new ServerConfigurationEntry();
            newEntry.Name = name;
            this.BaseAdd(newEntry, true);
        }

        /// <summary>
        /// Get the index of a given assembly item
        /// </summary>
        /// <param name="name">The name of the item to get the index of</param>
        /// <returns>The index of the given item, or -1 if not found</returns>
        public int IndexOf(string name)
        {
            for (int index = 0; index < base.Count; index++)
            {
                if (string.Compare(this[index].Name, name, StringComparison.OrdinalIgnoreCase) == 0)
                    return index;
            }

            return -1;
        }

        /// <summary>
        /// Get the type of collection. BasicMap in this case.
        /// </summary>
        public override ConfigurationElementCollectionType CollectionType
        {
            get { return ConfigurationElementCollectionType.BasicMap; }
        }

        /// <summary>
        /// Factory up a new element
        /// </summary>
        /// <returns>A new element</returns>
        protected override ConfigurationElement CreateNewElement()
        {
            return new ServerConfigurationEntry();
        }

        /// <summary>
        /// Get the unique key for a assembly item element
        /// </summary>
        /// <param name="element">The element to get the key for</param>
        /// <returns>A unique identifier for the element</returns>
        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((ServerConfigurationEntry) element).Name;
        }

        /// <summary>
        /// Get the XML element name for elements of this type
        /// </summary>
        protected override string ElementName
        {
            get { return "Server"; }
        }
    }

    /// <summary>
    /// ContextElement - represents a single context element in the config
    /// </summary>
    [DebuggerDisplay("{Name}")]
    public class ServerConfigurationEntry : ConfigurationElement
    {
        private const string NAME = "name";

        /// <summary>
        /// Get or set the server name or connection string
        /// </summary>
        [ConfigurationProperty(NAME, DefaultValue = "", IsRequired = true, IsKey = true)]
        public string Name
        {
            [DebuggerStepThrough]
            get { return (string) this[NAME]; }
            [DebuggerStepThrough]
            set { this[NAME] = value; }
        }
    }
} 
```

当我尝试运行它时收到的错误消息是：

```
 Exception calling `"TestConfig" with "0" argument(s)`: 

 "An error occurred creating the configuration section handler for PrimarySqlServers:
 Could not load file or assembly 'CustomConfig' or one of its dependencies. The system cannot find the file specified. 
(D:\CustomConfig\CustomConfig\CustomConfigTestHarness\bin\Debug\CustomConfigTestHarness.exe.config line 4)"
    At C:\dll.ps1:15 char:1
    + $mainClass.TestConfig()
    + ~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ConfigurationErrorsException 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-09T16:47:52.153

您遇到的问题是程序集不在.net 的程序集搜索路径中。

您可以通过许多不同的方式来解决这个问题（包括将程序集放入 GAC 等）。

将有关程序集的其余信息添加到您的部分密钥（版本、文化、公钥令牌......类似这样的东西）可能就足够了：

```
<section name="PrimarySqlServers" type="CustomConfig.ServerConfiguration, CustomConfig, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" /> 
```

另一种方法是编写事件处理程序：

```
$configdll = 'D:\CustomConfig\CustomConfig\CustomConfigTestHarness\bin\Debug\CustomConfig.dll'

[System.AppDomain]::CurrentDomain.add_AssemblyResolve({
    param($source, $assembly)
    # Detect that they're looking for YOUR assembly specifically
    if($assembly.Name.Split(",")[0] -eq "CustomConfig") {
        # And load it for them: your path will be difference
        return [System.Reflection.Assembly]::LoadFile( $configdll  )
    }
}) 
```

另一种方法是将 dll 放在应用程序的主目录中。但在这种情况下，那是你的 Windows\System32\WindowsPowerShell\v1.0\ ...所以这可能不是一个好计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:23:54.843

好吧，我认为在您的自定义配置部分中，您的程序集名称不正确。

根据您的帖子，这应该是：

```
<section name="PrimarySqlServers" type="CustomConfig.ServerConfiguration, CustomConfigTestHarness.exe" /> 
```

第二个参数是包含 CustomConfig.ServerConfiguration 类型定义的程序集或可执行文件名称。

# ruby-on-rails - 在 Rails 中使用 Ajax 更新 Div 而无需重新加载页面

> ID：15080887
> 
> 赞同：3
> 
> 时间：2013-02-26T03:31:48.403
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的视图**中 af_form.html.erb**

我有一个用于触发 ajax 调用的按钮

```
 <%= button_to('update ', {:action => 'update', :thingyid => 314}, :method => :get, :remote => true , :'data-update-target' => 'af_stat' ) %>

    <div id="af_stat" >
    <h3>Tiltle : 
      <%= @kk %>
    </h3> 
```

有人说我应该有一个名为 _af_form.html.erb 的文件 _af_form.html.erb 应该是什么？

在我的控制器欢迎中，有一种方法

```
 def update

    @kk = @kk +1

    render :partial => 'af_form', :content_type => 'text/html'
  end 
```

我听到有人说……“和 af_form.js.erb 一样”？这不是愚蠢吗？复制两个相同的文件。并且不遵守 DRY 规则。

它不起作用。怎么了。任何人都可以帮助我。非常感谢你。

我只想更改视图 af_form.html.erb 而不是 _af_form.html.erb ，我为什么需要 _af_form.html.erb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T04:09:15.567

在你的里面试试这个`update.js.erb`

```
$('#af_stat h3').text('Title: <%= escape_javascript @kk %>'); 
```

# ruby-on-rails - 使用 PDFKit 开始新页面

> ID：15080891
> 
> 赞同：3
> 
> 时间：2013-02-26T03:32:17.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, pdfkit

我在 Rails 中使用 PDFKit 来显示我的数据库中的表。我希望每个表都有自己的单独页面。我怎样才能做到这一点？

```
html = "<p>HTML content here</p>"

kit = PDFKit.new(html, :page_size => 'Letter')
  output = kit.to_pdf

respond_to do |format|

format.pdf do
  send_data output, :filename => "trading_analysis.pdf",
                    :type => "application/pdf"
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T18:46:59.180

好的，不确定这是否可能是您正在寻找的东西，但它肯定是最值得考虑的。您也可以考虑使用 wickedpdf，然后`div`在您的 CSS 中包裹您的内容和以下内容。

```
div.page {
  width: 180mm;
  height: 277mm;
  overflow: hidden;
  page-break-before: always;
} 
```

*编辑：* `page-break-after: always;`有时添加一个空白页，所以我们应该使用`page-break-before: always;`

# garbage-collection - 关于实现垃圾收集器的一些要点

> ID：15080898
> 
> 赞同：2
> 
> 时间：2013-02-26T03:32:57.457
> 
> 标签：garbage-collection

我正在尝试实现一种简单的编程语言。我想让它的用户不必管理内存，所以我决定实现一个垃圾收集器。在检查了一些材料后，我能想到的最简单的方法是这样的：

有两种堆区域。第一个用于存储大对象（大于 85,000 字节），另一个用于存储小对象。下面我使用 BZ 作为第一个，SZ 作为第二个。

BZ 使用标记和扫描算法，因为移动大物体的成本很高。我不压缩，所以会有碎片。

SZ 使用带有标记紧凑的代。分三代：0、1、2。分配请求直接到0代，当0代满了，我会在上面做垃圾回收，存活的会提升到1代。1代和2代会满时也进行垃圾收集。

虚拟机启动时会从OS分配一块大内存作为虚拟机中的堆区BZ和SZ中的每一代都会占用固定的一部分内存，当分配请求不能满意，虚拟机会报错OTM（out of memory）。这有一个问题：当虚拟机启动时，即使让程序在其上运行也应该只需要一点内存，但它仍然使用很多。更好的方法是让虚拟机从操作系统获得少量内存，然后当程序需要更多内存时，虚拟机将从操作系统获得更多。我准备在SZ中给第2代分配一个更大的内存，然后把第2代的东西全部复制到新的内存区。并为 BZ 做同样的事情。

另一个问题发生在 BZ 已满而 SZ 为空时，即使我们实际上有足够的空闲堆大小用于 SZ 中的大对象，我也无法满足大对象分配请求。如何处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T17:46:07.063

我正在尝试了解您的方法。由于您没有完全提及您的策略，因此我有一些假设。

**注意**：以下是我的假设分析，实际上可能不太可能。因此，如果您没有时间，请跳过答案。

您正在尝试使用带有更改的 Generational GC；有2种分类

(1) 大尺寸物体**BZ**和

(2)小尺寸物体**SZ**。

**SZ**使用压缩（CMS）执行分代 GC

从上面的理解我们知道**SZG2**有长寿命的对象。我预计 szG2 中的 GC**不像****SZG1 或 SZG0**那样频繁，因为长寿命的对象通常寿命更长，所以更少的死收集和**SZG2**的大小会随着时间的推移而增加失效，因此 GC 需要花费大量时间遍历所有元素，因此与**SZG1 或 SZG0**相比，在**SZG2**上进行频繁的 GC 效率较低（长时间的 GC 峰值，因此对用户来说有明显的延迟） 。

 **同样，对于**BZ**，可能需要大量内存（因为大对象占用更多空间）。所以为了解决你的查询

`"The other problem occurs when the BZ is full and SZ is empty, I would be silly not be able to satisfy a big object allocation request even though we in fact have enough free heap size for the big object in SZ. How to deal with this problem?"`

既然您说“当程序需要更多内存时，虚拟机将从操作系统中获得更多”

我有一个小想法，可能没有生产力或可能无法实现，并且完全取决于您对 GCHeap 结构的实现。让您的虚拟机按如下方式分配内存

![在此处输入图像描述](../Images/a9a142c070889e3190d8a098fc295167.png)

下面的可能性（我从“程序的内存段”中借用了想法，如下所示）在低级别是可能的。

![在此处输入图像描述](../Images/1afb56ad3881f0c1d4bf3f0e3f8edbc5.png)

如上图所示，**必须以****SZG0**和**BZ**相互扩展的方式定义GCHeap 结构。为了实现**图 a**和**图 b**中提到的 GCHeap 结构，我们需要在区域**SZG[0 -2]**大小和**BZ** 。

因此，如果您想将应用程序的堆划分为多个堆，那么您可以将**图 A**堆放在**图 B**上以减少碎片（当我说碎片时`it means "when the BZ is full and SZ is empty, I would be silly not be able to satisfy a big object allocation request even though we in fact have enough free heap size for the big object in SZ."`）。

所以有效的结构将是

```
 B
            |
            B
            |
            B
            |
            B
            |
            A 
```

现在它完全取决于启发式来决定是在多个 GCHeap 结构中考虑 GCHeap 数据结构，如 GCHeapA、GCHeapB 还是根据需求将其作为单个堆。

如果您不想有多个堆，那么您可以使用图 A 并进行小幅修正`Setting base address of **SZG2** to top of heap`

图 a 背后的关键原因如下：我们知道**SZG0经常被 GC'ed，因此与****SZG1**和**SZG2** 相比，它可以有更多的空闲空间，因为死对象被删除，幸存对象被移动到**SZG1**和**SZG2**。所以如果分配**BZ**越多，它就可以向**SZG0**增长。

在**图中，** **SZG1**和**SZG2**的基地址是 连续的，因为**SZG2**更容易出现内存不足错误，因为老一代对象往往寿命更长，而且 GC 不会扫描太多（**注意**：这只是我的假设和意见）所以**SZG2**一直向外绑定。**

# ios - layoutSubview 重置UILabel的属性

> ID：15080899
> 
> 赞同：2
> 
> 时间：2013-02-26T03:33:23.033
> 
> 标签：ios, objective-c, uiscrollview, layoutsubviews

我有一个带有 UIScrollView 的 ViewController。在这个 VC 上，我以编程方式调整滚动视图内的 UILabel 的框架。这是在 viewDidLoad 上完成的。这个 UILabel 来自 VC 的 xib 文件，它不是以编程方式创建的，只是它的框架发生了变化。

当我从这个 VC 转换到另一个，然后返回时，UILabel 的帧被重置为 XIB 的状态。但是它的文本没有重置，它保持与我之前设置的文本相同。

我的调查告诉我这发生在 layoutSubviews 上，因为 UILabel 的属性在 willLayoutSubviews 上是正确的，然后在移回 VC 时在 didLayoutSubviews 上重置。

这是预期的行为吗？标签的文本仍然存在但框架被重置是否有原因？这是因为 UIScrollView 在滚动时会在其父视图上调用 layoutSubviews 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:10:17.983

我在您的描述中看到两个问题。首先，你是这么说的：

> 在这个 VC 上，我以编程方式调整滚动视图内的 UILabel 的框架。这是在 viewDidLoad 上完成的。

在 中修改视图框架通常是个坏主意`viewDidLoad`，因为系统的布局阶段（在此期间`layoutSubviews`发送消息）尚未发生。在`viewDidLoad`中，您的视图框架尚未针对当前设备的屏幕尺寸和界面方向进行调整。

其次，您说您正在使用自动布局。自动布局系统在布局阶段设置视图框架。布局阶段可以由许多不同的事件触发，包括（如您所见）视图的出现和消失。

为了对标签的框架“粘”进行调整，您需要修改控制标签框架的约束。一种方法是`NSLayoutConstraint`在视图控制器上为您需要修改的每个约束创建一个类型的插座，并将这些插座连接到您的 xib 中的约束。然后在您的视图控制器中`viewWillLayoutSubviews`，您可以根据需要修改`constant`每个约束的属性。（具有讽刺意味的是，`constant`是唯一可修改的属性`NSLayoutConstraint`。）

# windows-runtime - 具有多个值的 WinRT HttpClient 标头授权

> ID：15080908
> 
> 赞同：1
> 
> 时间：2013-02-26T03:34:37.770
> 
> 标签：windows-runtime, dotnet-httpclient

我需要为 Amazon SQS 设置 Authorization 标头，但它需要多个值。

设置标题时，我抛出异常：

> System.FormatException：无法添加值，因为标头“授权”不支持多个值。

如何使用逗号分隔的多个值设置标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T02:22:03.090

我解决了，解决方案是将其分配给 Authorization 属性。

```
string authorize = "Credential=.../sqs/aws4_request, SignedHeaders=host;user-agent;x-amz-date, Signature=...."; 
```

给定包含多个值的整个字符串：

```
client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("AWS4-HMAC-SHA256", authorize); 
```

将其分配给 Authorization 属性。

这解决了问题。

# android - 无法通过广播接收器调用方法

> ID：15080912
> 
> 赞同：0
> 
> 时间：2013-02-26T03:34:47.420
> 
> 标签：android, broadcastreceiver

我试图通过传递上下文通过广播接收器调用方法（postMessage），但不工作。

错误是什么？我尝试了很多东西，但仍然没有工作。

```
 public class AlarmReceiver extends BroadcastReceiver implements
            OnActivityResultListener {

        public void onReceive(Context context, Intent intent) {
            try {
         controler(context); 

            } catch (Exception e) {
                Toast.makeText(
                        context,
                        "There was an error somewhere",
                        Toast.LENGTH_SHORT).show();
                e.printStackTrace();
            }

        }

    public void controler(Context context) {
  String radioButtonName = MAinActivity.actionAlarmName(radioButtonName);

            if (radioButtonName.equals("1")) {
        //      TODO
            } else if (radioButtonName.equals("2")) {
    postMessage(context);
    }
    }

    public void postMessage(Context context) {

            DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    switch (which) {
                    case DialogInterface.BUTTON_POSITIVE:
                        // Yes button clicked

                        break;

                    case DialogInterface.BUTTON_NEGATIVE:
                        // No button clicked
                        break;
                    }
                }
            };
            AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setMessage("Are you sure?")
                    .setPositiveButton("Yes", dialogClickListener)
                    .setNegativeButton("No", dialogClickListener).show();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T04:30:33.913

`Context`您收到的`onReceive()`不是`BroadcastReceiver`Activity 上下文，而是它的应用程序上下文。您不能显示带有应用程序上下文的对话框。对话框应始终与`Activity`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T03:44:33.623

在 AndroidManifest 中添加您的接收器

```
<receiver android:name=".AlarmReceiver" android:process=":remote" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T04:46:43.520

如果你想在没有活动上下文的接收器中显示一个对话框，你可以这样做：

dialog.getWindow.setType(WindowManager.LayoutParams.TYPE_SYSTEM_ALERT)

不要忘记在 AndroidManifest.xml 中添加权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T06:23:52.557

如Android官方文档中所述，您无法在接收方法中显示对话框。

[http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context,android.content.Intent)](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context,android.content.Intent))

即使您想显示一个对话框，您也可以使用另一种方法来启动具有对话框样式的活动，或者您可以启动一个透明活动，该活动将在其 on create 方法中显示警报对话框。

希望这可以帮助：

# php - 从 MySQL 数据库获取日期范围

> ID：15080915
> 
> 赞同：0
> 
> 时间：2013-02-26T03:35:07.963
> 
> 标签：php, mysql

如何从 MySQL 数据库中获取数据的日期范围，例如月份和年份？例如，如果数据库中的表有 2012 年 2 月至 2013 年 1 月的数据记录，我如何知道存储数据记录的日期范围？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:39:49.257

使用查询

`select min(date_column), max(date_column) from your_table`

# sql-server - 带有选项的无限循环 CTE (maxrecursion 0)

> ID：15080922
> 
> 赞同：9
> 
> 时间：2013-02-26T03:35:37.910
> 
> 标签：sql-server, sql-server-2008, common-table-expression

我有 CTE 查询，上面有大量记录。以前它工作得很好。但是最近，它为某些成员抛出了错误

> 声明终止。在语句完成之前，最大递归 100 已用完。

所以我把`OPTION (maxrecursion 0)`或`OPTION (maxrecursion 32767)`放在我的查询上，因为我不想限制记录。但是，结果是查询需要永远加载。我该如何解决这个问题？

这是我的代码：

```
with cte as(
-- Anchor member definition
    SELECT  e.SponsorMemberID , e.MemberID, 1 AS Level
    FROM tblMember AS e 
    where e.memberid = @MemberID

union all

-- Recursive member definition
    select child.SponsorMemberID , child.MemberID, Level + 1
    from tblMember child 

join cte parent

on parent.MemberID = child.SponsorMemberID
)
-- Select the CTE result
    Select distinct a.* 
    from cte a
    option (maxrecursion 0) 
```

**编辑：**删除不必要的代码以便于理解

**已解决：**所以问题不是来自`maxrecursion`. 它来自 CTE。我不知道为什么，但它可能包含任何赞助商周期：A -> B -> C -> A -> ...（感谢@HABO）

我尝试了这种方法并且它有效。[解析自引用表时 CTE 中的无限循环](https://stackoverflow.com/questions/13718168/infinite-loop-in-cte-when-parsing-self-referencing-table)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T04:28:45.160

如果你达到了递归限制，你要么在赞助关系上有相当的深度，要么在数据中存在循环。如下查询将检测循环并终止递归：

```
declare @tblMember as Table ( MemberId Int, SponsorMemberId Int );
insert into @tblMember ( MemberId, SponsorMemberId ) values
  ( 1, 2 ), ( 2, 3 ), ( 3, 5 ), ( 4, 5 ), ( 5, 1 ), ( 3, 3 );
declare @MemberId as Int = 3;
declare @False as Bit = 0, @True as Bit = 1;

with Children as (
  select MemberId, SponsorMemberId,
    Convert( VarChar(4096), '>' + Convert( VarChar(10), MemberId ) + '>' ) as Path, @False as Loop
    from @tblMember
    where MemberId = @MemberId
  union all
  select Child.MemberId, Child.SponsorMemberId,
    Convert( VarChar(4096), Path + Convert( VarChar(10), Child.MemberId ) + '>' ),
    case when CharIndex( '>' + Convert( VarChar(10), Child.MemberId ) + '>', Path ) = 0 then @False else @True end
    from @tblMember as Child inner join
      Children as Parent on Parent.MemberId = Child.SponsorMemberId
    where Parent.Loop = 0 )
  select *
    from Children
    option ( MaxRecursion 0 ); 
```

# java - 如何从 Android webview 中加载的 HTML 中获取 DOM 的内容？

> ID：15080927
> 
> 赞同：0
> 
> 时间：2013-02-26T03:36:10.967
> 
> 标签：java, javascript, android, jquery, html

例如：**在 webview 中加载**的网页是

```
<script>
$(document).ready(
function(){
    $.get(
    '/my.url',
    function(data){
        $('#e').html(data);
    }
    );
}
);
</script>
<div id='e'></div> 
```

如何从 Java 代码中获取 DOM id 'e' 的内容或在“get”回调期间获取内容？

java部分 `final WebView browser = (WebView)findViewById(R.id.browser);`

我如何利用`browser`来提取 webview 中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T03:36:47.993

我发现的唯一方法是让 JS 通过 JS 接口将值发送到您的设备。看看[这里](http://developer.android.com/guide/webapps/webview.html)。

然后你有两个选择，要么从 $(document).ready 回调调用接口，要么使用 webView.loadUrl("javascript:XXXX") 调用 JS 函数，该函数将获取 DOM 中的值并传递它到你的界面。

在我的项目中，我需要在加载网页时从网页中获取一些值。我开发了一个 WebAppInfoLoader，它调用一个 JS 函数，该函数返回所询问的变量的值：

```
mWebView.loadUrl(String.format("javascript:sendValueToDeviceInterface(%s);", jsValue.getId())); 
```

然后，JS函数调用接口通知加载器已经收到值。当加载器收集所有值时，他自己通知调用对象。

谷歌没有想出一个更简单的系统，因为它存在于 iOS 上，这是非常复杂和非常不幸的。

# c# - 画布宽度和高度（以像素为单位）

> ID：15080930
> 
> 赞同：1
> 
> 时间：2013-02-26T03:36:30.800
> 
> 标签：c#, canvas, windows-8, winrt-xaml

我正在尝试以`Canvas`像素为单位获取 a 的宽度和高度。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:01:58.677

请使用加载的事件来获取实际宽度和`ActualHeight`.`Canvas`

```
private void Canvas_Loaded_1(object sender, RoutedEventArgs e)
    {
        var height = cnvMain.ActualHeight;
        var width = cnvMain.ActualWidth;
    } 
```

`ActualWidth`并将`ActualHeight`为您提供以像素为单位的宽度和高度，`Canvas`但除非画布在屏幕上加载/渲染，否则它将为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:55:34.933

[实际高度](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.actualheight.aspx)和[实际宽度](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.actualwidth.aspx)。收听[SizeChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement.sizechanged.aspx)以捕捉变化。

# c# - OwnerDrawVariable 组合框下拉空格

> ID：15080931
> 
> 赞同：0
> 
> 时间：2013-02-26T03:37:16.917
> 
> 标签：c#, winforms, combobox, custom-controls

我开发了以下自定义组合框来增加项目的高度。完成后，当有滚动条时，下拉菜单的末尾会出现一个空白区域。 ![在此处输入图像描述](../Images/780628fb9d68a512612caee77f65f378.png) 我该如何纠正这个问题？

```
class MyComboBoxXX : ComboBox
{
    public MyComboBoxXX():base()
    {
        this.DrawMode = DrawMode.OwnerDrawVariable;
        this.DropDownStyle = ComboBoxStyle.DropDownList;
        this.MaxDropDownItems = 5;
        this.IntegralHeight = false;         
    }

    protected override void OnMeasureItem(MeasureItemEventArgs e)
    {
        e.ItemHeight = 40;
        this.DropDownHeight = 40 * 5;        
    }
    protected override void OnDrawItem(DrawItemEventArgs e)
    {        
        e.DrawBackground();        
        var index = e.Index;    
        if (index < 0 || index >= Items.Count) return;    
        using (var brush = new SolidBrush(e.ForeColor))
        {            
            Rectangle rec = new Rectangle(e.Bounds.Left, e.Bounds.Top + ((e.Bounds.Height - ItemHeight) / 2), e.Bounds.Width, ItemHeight);
            e.Graphics.DrawString(this.Items[e.Index].ToString(), e.Font, new SolidBrush(this.ForeColor), rec);
        }
        e.DrawFocusRectangle();
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:54:10.370

如果仔细观察，DropDown 区域的顶部和底部似乎都有一个 1 像素的边框。您可以通过将 2 个像素添加到`DropDownHeight`.

```
protected override void OnMeasureItem(MeasureItemEventArgs e)
{
    e.ItemHeight = 40;
    this.DropDownHeight = (40 * 5) + 2; //add 2 pixels to include the border
} 
```

结果：
![最后没有空格的组合框](../Images/f84312350581db330e54f126a1b25239.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T13:53:37.847

需要存储默认的 ItemHeight，因为从 Normal 更改 DrawMode 会导致向项目高度添加 2 个像素的填充。在调用 ItemHeight 之前需要检索 Handle，因为它会创建句柄。没有这个，ItemHeight 属性的值是不正确的。 [http://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/ComboBox.cs](http://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/ComboBox.cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T04:00:09.547

我认为如果 DropDownHeight 值小于 OnMeasureItem 方法覆盖中的最大数量，您应该将其减少到适当的项目数。

# xml - 将数据存储在文本文件或 xml 中

> ID：15080933
> 
> 赞同：0
> 
> 时间：2013-02-26T03:37:40.030
> 
> 标签：xml, storage

如果我想存储一些简单的个人支出数据，包括类别（字符串）、日期（字符串）和金额（双精度），以生成一些汇总报告，哪种方法更好？我正在考虑使用流和txt文件并手动输出这些数据；我以前从未使用过xml。xml的优势是什么？

如果数据仅供我的程序使用，并且结构不复杂，是否意味着文本文件是更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:41:38.017

xml 的优点是它是一种标准化格式，其他程序可以根据需要读取它。如果您将内容存储在 txt 文件中，则约定由您决定（间距、分隔符、数字表示...）并且可能与其他代码不兼容。

我个人会考虑使用轻型嵌入式数据库，例如`sqlite`这项工作。

（`double`不是存储价格/薪水的合适格式。考虑使用定点表示，或者如果失败，作为一种解决方法，将美分数存储为`long`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:45:17.637

现有 XML API 的主要优点：为您处理转义（您可以在其中编写任何文本）和良好的 unicode 支持。

主要缺点：性能。如果您想快速处理大量数据，请执行其他操作。

# linux - 应该如何同步定制的内核补丁？

> ID：15080935
> 
> 赞同：0
> 
> 时间：2013-02-26T03:37:45.357
> 
> 标签：linux, kernel, patch

我维护了一个定制的内核，还提供了可以直接用于主要版本内核源代码的补丁，现在我遇到了一个经典问题，

我是基于`3.7.8`内核开发的补丁，随着新版本`3.7.9`的发布，我也必须开发补丁`3.7.9`，但是我应该如何快速做到这一点？

现在，我下载了 3.7.9 的全部源代码，手动将代码迁移到新版本的内核，并从较新的内核源生成补丁。这看起来愚蠢而低效。

```
-------------------          A    --------------------
| My 3.7.8 kernel |         --->  |  My 3.7.9 kernel |
-------------------                --------------------
      /|\                                 /|\
       | B                                 | C
       |                                   |
--------------------------   D    --------------------------
| Mainline 3.7.8 kernel  |  --->  |  Mainline 3.7.9 kernel |
--------------------------        -------------------------- 
```

我想要的是`A`直接程序，而不是先做`D`，那么`C`，你认为这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:35:47.070

使用 git 版本控制系统来创建它。获取内核的克隆，并将补丁添加到本地分支上。每当您需要移动到下一个版本时，`git pull`那个版本和`git rebase`您的补丁都在上面。这将解决*大部分*对下一个版本的调整，但内部 Linux API*不稳定*，所以要为随机后果做好准备。

# object - 带有独立 obj 的 avr-gcc 链接错误

> ID：15080947
> 
> 赞同：0
> 
> 时间：2013-02-26T03:39:48.537
> 
> 标签：object, vector, hyperlink, avr-gcc

一个avr的小项目，当我直接编译main.c时（所有其他c都包含在main.c中），一切正常。

```
 avr-gcc -Wall -mmcu=atmega8 -g -O1 $1 -o $1.out
    avr-objdump -dS $1.out>$1.asm 
```

使用 asm，我可以在这里看到所有矢量。

```
 main.c.out:     file format elf32-avr
    Disassembly of section .text:
    00000000 <__vectors>:
   0:       1d cd           rjmp    .-1478          ; 0xfffffa3c <__eeprom_end+0xff7efa3c>
   2:       37 cd           rjmp    .-1426          ; 0xfffffa72 <__eeprom_end+0xff7efa72> 
```

* * *

当我将每个 c 编译成 obj 时（只需添加一些头文件，代码几乎相同），然后链接它们，结果失败。当然MCU变得疯狂。

```
 for i in src/*.c; do j=`basename $i`; j=obj/${j%%.c}.o; avr-gcc -c $i -o $j -mmcu=atmega8 -g -O1 -Wall; done;
    avr-ld obj/*.o -o a.out;
    avr-objdump -dS a.out >a.asm; 
```

这是asm中的代码，这里不是向量跳转，而是我的rom数据。

```
 Disassembly of section .text:
    00000000 <tm_tone>:
           0:       00 00 e0 1d 9e 1a b5 17 62 16 ee 13 c1 11 d0 0f     ........b.......
    00000010 <tiger>:
          10:       31 32 33 31 31 32 33 31 33 34 35 30 33 34 35 30     1231123134503450 
```

有什么建议吗？谢谢。如果我在使用 avr-ld 时需要手动特殊的每个 obj 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:31:02.657

只有这样才可以，编译到obj之后。链接使用 avr-gcc。

```
 avr-gcc -Wall -mmcu=atmega8 -g -O1 -o main.o src/main.c obj/usart.o obj/irda.o obj/everybody.o obj/audio.o 
```

# c - 使用 strtok() 在 C 中标记字符串

> ID：15080951
> 
> 赞同：1
> 
> 时间：2013-02-26T03:40:10.770
> 
> 标签：c, string, token, strtok

我正在尝试编写一个接受 HTTP 请求并提取少量数据的函数。我的功能如下所示：

```
char* handle_request(char * req) {
    char * ftoken; // this will be a token that we pull out of the 'path' variable 
    // for example, in req (below), this will be "f=fib"
    char * atoken; // A token representing the argument to the function, i.e., "n=10"     
        ...

    // Need to set the 'ftoken' variable to the first arg of the path variable.
    // Use the strtok function to do this
    ftoken = strtok(req, "&");
    printf("ftoken = %s", ftoken);

    // TODO: set atoken to the n= argument;
    atoken = strtok(NULL, "");
    printf("atoken = %s", atoken);
   } 
```

`req`通常看起来像这样：`GET /?f=fib&n=10 HTTP/1.1`

目前，在调用 之后`strtok()`，`ftoken`打印出来`GET /?f=fibGET /favicon.ico HTTP/1.1`显然是错误的。理想情况下，它将是`f=fib`并且`atoken`将是`n=10`任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:45:46.513

输入->`GET /?f=fib&n=10 HTTP/1.1`

输出 -> ftoken`f=fib`和 atoken`10`

代码 ->

```
ftoken = strtok(req, "?"); // This tokenizes the string till ?
ftoken = strtok(NULL, "&"); // This tokenizes the string till & 
                            // and stores the results in ftoken
printf("ftoken = %s", ftoken); // Result should be -> 'f=fib'

atoken = strtok(NULL, "="); // This tokenizes the string till =.
atoken = strtok(NULL, " "); // This tokenizes the string till next space.
printf("atoken = %s", atoken); // Result should be -> 'n=10' 
```

# jquery - Jquery 突出显示活动菜单

> ID：15080953
> 
> 赞同：1
> 
> 时间：2013-02-26T03:40:15.183
> 
> 标签：jquery, menu, highlight

当用户浏览页面时，我想让我的站点菜单突出显示/激活，但是下面的代码不起作用。

有人可以检查发生了什么问题吗？谢谢。

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<script type="text/javascript">
$(function(){
// this will get the full URL at the address bar
var url = window.location.href; 

// passes on every "a" tag 
$("#nav_main a").each(function() {
    // checks if its the same on the address bar
    if(url == (this.href)) { 
        $(this).closest("li").addClass("active");
    }
});
});
</script>

<style type="text/css">
.active{
color:#f93;
}
</style>

<div id="nav_main">
<ul>
    <li><a href="index.php">Home</a></li>
    <li><a href="aboutFrontend.php">About</a></li>
    <li><a href="subscribeFrontend.php">Subscribe</a></li>
    <li><a href="newsFrontend.php">News</a></li>
    <li><a href="magFrontend.php">Mag</a></li>
    <li><a href="contactFrontend.php">Contact</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T04:29:52.780

这也应该有效：

```
<script>
$(document).ready(function(){
    var url = (window.location.href).split("/").pop();
    $('#nav_main a[href="'+url+'"]').addClass('active');
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:43:44.673

`window.location.url`将给出绝对 url like `http://zyx.com/<your-page>`，因此您的相等条件将失败。您需要用基于正则表达式的解决方案替换相等性测试，该解决方案将测试位置路径是否以菜单项的 href 之一结尾。

你需要改变

```
 if(url == (this.href)) { 
```

到

```
if(new RegExp('/' + this.href + '^').test(url)) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:53:37.387

好吧，我已经尝试了您的示例及其对我有用。如果我将一个链接的 URL 保留为空白，那么它会输入条件并应用样式。所以我建议你提醒这些 URL，看看你是否得到了正确的 URL。

您在 JSFiddle 的代码：[工作代码](http://jsfiddle.net/h5uUG/)

```
<div id="nav_main">
<ul>
    <li><a href="">Home</a></li>
    <li><a href="aboutFrontend.php">About</a></li>
    <li><a href="subscribeFrontend.php">Subscribe</a></li>
    <li><a href="newsFrontend.php">News</a></li>
    <li><a href="magFrontend.php">Mag</a></li>
    <li><a href="contactFrontend.php">Contact</a></li>
</ul> 
```

我只保留了一个链接空白。所以请检查网址。

我也离线尝试了您的代码。如果 URL 正确，它的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T08:02:13.823

这比公认的答案好得多：

```
$(document).ready(function () {
    $page = window.location.href;

    if (!$page) {
      $page = 'index.html';
    }

    $('.mainNav  li a').each(function () {

      var $href = this.href;

      if (($href == $page) || ($href == '')) {
        $(this).parent().addClass('active');
      } else {
        $(this).parent().removeClass('active');
      }

    });
    return false;

  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-20T14:44:31.030

您编码不起作用的原因是因为**var url = window.location.href**将返回一个完整的 url 链接，例如**[http://localhost/yousite/aboutFrontend.php](http://localhost/yousite/aboutFrontend.php)**然后您尝试与**aboutFrontend.php**匹配 所以您是这样做：

```
if('http://localhost/yousite/aboutFrontend.php' === 'aboutFrontend.php') { 
     //!!This will not give you a match!!
   } 
```

要使其正常工作，请使用您的链接上的完整网址。例如

a href="http://localhost/yousite/aboutFrontend.php"

最后做这样的事情，它会工作

```
 //Get the current page link
       current_page_link = document.location.href;

       //Search your menu for a linkURL that is similar to the active pageURL
       $(".navbar-nav a").each(function(){
           var link_loop = $(this).attr("href");
           if(link_loop === current_page_link){
               var found_url = $(this).attr("href");
               $('.navbar-nav a[href="'+found_url+'"]').addClass('active');
           }
       }); 
```

# c# - 跟踪访问的页面

> ID：15080955
> 
> 赞同：0
> 
> 时间：2013-02-26T03:41:04.090
> 
> 标签：c#, asp.net, random

我有一个测验应用程序，它使用以下方法随机选择 5 个页面之一：

```
protected void newWindow(object sender, EventArgs e)
    {
        int next = new Random().Next( 5 ) + 1;
        Response.Redirect(string.Format( "Question{0}.aspx", next ));
    } 
```

如何防止该方法访问已访问的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T03:57:44.763

像这样的东西（未经测试）

```
protected void newWindow(object sender, EventArgs e)
{
    List<int> questions = (List<int>)Session["Questions"];
    if (questions == null)
    {
        questions = new List<int>(new int[] { 1, 2, 3, 4, 5 });
    }

    int nextIndex = new Random().Next(questions.Count());
    int next = questions[nextIndex];
    questions.RemoveAt(nextIndex);
    Session["Questions"] = questions;

    Response.Redirect(string.Format( "Question{0}.aspx", next ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:51:14.387

使用 1、2、15、12 之类的 csv 维护会话变量，并根据这些值检查下一个变量。如果会话中存在它，则再次掷骰子，否则显示页面并将当前的旁边附加到会话变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T03:59:15.110

```
using System.Linq;

protected void newWindow(object sender, EventArgs e)
{
    var pagesVisited = (List<int>)Session["Visited"] ?? new List<int>() { 1, 2, 3, 4, 5 };

    if (!pagesVisited.Any())
        // the user has visited all quizes

    var index = new Random().Next(0, pagesVisited.Count)
    var next =  index + 1;

    pagesVisited.RemoveAt(index);

    Session["Visited"] = pagesVisited;

    Response.Redirect(string.Format( "Question{0}.aspx", next ));
} 
```

# php - XAMPP PHP OPENSSL openssl_pkey_get_details() 崩溃网页

> ID：15080957
> 
> 赞同：4
> 
> 时间：2013-02-26T03:41:14.253
> 
> 标签：php, apache, openssl, xampp

我目前在 Windows 上的 XAMPP 中配置了 OpenSSL。按照[本](http://3stepsbeyond.co.uk/2010/12/openssl-and-php-tutorial-part-one/)教程，我尝试使用以下代码：

```
$privateKey = openssl_pkey_new(array(
    'private_key_bits' => 1024,
    'private_key_type' => OPENSSL_KEYTYPE_RSA,
));
openssl_pkey_export_to_file($privateKey, 'private.key');
$a_key = openssl_pkey_get_details($privateKey);
file_put_contents('public.key', $a_key['key']);
openssl_free_key($privateKey); 
```

当我打开页面时，我收到“网页不可用”错误。我已经设法查明问题，`openssl_pkey_get_details()`因为如果我删除它，页面会成功加载。此外，在代码的第一部分生成了一个没有问题的*private.key 。*任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T02:32:55.850

这已在[bugs.php.net](https://bugs.php.net/bug.php?id=55470&edit=3)上报告。

如果您将**xampp/apache/bin**中的**libeay32.dll**和**ssleay32.dll替换为****xampp/php/**中的相同文件，那么它可以工作，但您不能使用 SSL。

 ****我已经尝试过了，它有效。我在 XAMPP(1.8.1) 上的 PHP(5.4.7) 中使用 OpenSSL 库。但是，我不得不禁用 SSL。****

# java - Java printf 指定可变宽度

> ID：15080958
> 
> 赞同：3
> 
> 时间：2013-02-26T03:41:25.033
> 
> 标签：java, printf

我有这个简化的代码：

```
System.out.printf("%-*s   Exam Percentage: %4.1f   Final Grade: %c\n", VAR, "fox"+", "+"jim",25.3225, 'C'); 
```

根据[这个](http://sharkysoft.com/archive/printf/docs/javadocs/lava/clib/stdio/doc-files/specification.htm)和其他资源，应该产生一个列“VAR”字符，其效果如下：

```
 fox, jim   Exam Percentage:  25.3    Final Grade: C 
```

它通过一个 for 循环运行，VAR 是第一个字符串的最大大小。

我重新调整方法：

```
System.out.printf("%-"+VAR+"s   Exam Percentage: %4.1f   Final Grade: %c\n", "fox"+", "+"jim",25.3225, 'C'); 
```

它有效，但我主要是好奇。此外，上述页面提到“argsize”的解释可能会提供一些见解。

PS我知道代码有文字。它是为了简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:55:57.210

java.io.PrintStream（如 System.out）的方法[printf的格式字符串被定义为](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#printf%28java.lang.String,%20java.lang.Object...%29)[Java 格式字符串](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#syntax)。它们与您链接的文档不同，后者用于称为 Lava 的文档。特别是 Java 中百分比转换的宽度是一个数字，不能用星号 (*) 代替。换句话说，正如您所注意到的，不可以写`%-*s`，但可以写`%-20s`或任何您喜欢的数字。

# java - 无效的 DER 编码 CRL 数据 java

> ID：15080962
> 
> 赞同：1
> 
> 时间：2013-02-26T03:42:02.640
> 
> 标签：java, x509, certificate-revocation

我正在尝试检查 x509 证书是否被吊销：

```
CertificateFactory cf = CertificateFactory.getInstance("X.509");
X509CRL crl = (X509CRL) cf.generateCRL(crlFile);
if (crl.isRevoked(certRSA)) {
    System.out.println("REVOKED");
} else {
    System.out.println("NOT REVOKED");
} 
```

并得到这个异常：

```
java.security.cert.CRLException: Invalid DER-encoded CRL data
    at sun.security.x509.X509CRLImpl.parse(X509CRLImpl.java:981)
    at sun.security.x509.X509CRLImpl.<init>(X509CRLImpl.java:144)
    .... 
```

如何将该 crl 文件转换为 DER 编码的 crl 文件？谢谢！

# service - ASMX 安全无身份验证

> ID：15080963
> 
> 赞同：1
> 
> 时间：2013-02-26T03:42:07.750
> 
> 标签：service, web, asmx

如果不强制用户进行身份验证，如何防止第三方使用 ASMX Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:49:05.550

最终，这将归结为他们是谁以及他们如何访问您的网络服务。以及他们提出的风险程度。

您可以使用简单的“通过默默无闻的安全”，您不会告诉人们有关该服务的信息。这通常是一个非常非常糟糕的解决方案。事实上，这可能是非常危险的，因为你不知道谁知道——所以这是一个真正的风险。

您可以对机器和流程进行身份验证，而不是对人员进行身份验证。比如说IP地址。

但在最后说你需要某种形式的身份验证来确定任何类型的过滤。

# php - Using PayPal IPN to verify payment amounts (USD + others) without shipping or tax

> ID：15080971
> 
> 赞同：1
> 
> 时间：2013-02-26T03:43:24.903
> 
> 标签：php, paypal, mysqli, paypal-ipn

Sorry for the longwinded title, but that pretty much sums up my issue here. I am using PayPal IPN to verify incoming payments against prices in my database. I am only selling one item at a time, no cart, and there is no shipping cost. Tax is only charged if the buyer is from one area.

All prices are stored in my database as `XX.XX` without any tax. When PayPal sends back data via IPN I thought I could use mc_gross to compare with my database prices but I have found two possible issues:

1.  If the buyer pays with non-usd funds, I read that mc_gross will not equal the price I sent to PayPal in the first place and therefore will not matchup with my database, is this true?

2.  If the buyer is within the taxable area, and tax is added to his total at PayPal.com will this be reflected in mc_gross? I found conflicting info in the PayPal docs and online about whether or not mc_gross includes tax price.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:56:13.367

> If the buyer pays with non-usd funds, I read that mc_gross will not equal the price I sent to PayPal in the first place and therefore will not matchup with my database, is this true?

You should be verifying how you are processing the payment in the first place, lock down the fund type or store an item id using the `custom` variable

> If the buyer is within the taxable area, and tax is added to his total at PayPal.com will this be reflected in mc_gross? I found conflicting info in the PayPal docs and online about whether or not mc_gross includes tax price.

`mc_gross` is the total amount paid so yes tax is included, you should be verifying what product was purchased using some sort of id not by the amount paid

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-17T09:38:50.803

> If the buyer is within the taxable area, and tax is added to his total at PayPal.com will this be reflected in mc_gross? I found conflicting info in the PayPal docs and online about whether or not mc_gross includes tax price.

As David Nguyen says mc_gross is the total amount paid so yes tax is included. but, you **must** use mc_gross to compare with your database prices to **secure** the transaction.

if you like to get the real price without the tax all you have to do is to check if the posted variable "tax" is numeric and if so decrease it from the posted variable "mc_gross".

```
e.g.
mc_gross = 142.68
tax = 19.68
mc_gross - tax = 123 
```

your database amount need to be 123\. If not there is a security error because the user change the price and bypass the system.

by the way you must also check the currency, create a post back and more, [click here for more details](http://www.paypalobjects.com/en_US/ebook/PP_OrderManagement_IntegrationGuide/ipn.html)

# javascript - Javascript模拟

> ID：15080973
> 
> 赞同：0
> 
> 时间：2013-02-26T03:43:37.093
> 
> 标签：javascript, scrape

我正在这个公共网站[http://www.windfinder.com](http://www.windfinder.com)上进行网络爬虫。

我正在尝试在[http://www.windfinder.com/settings](http://www.windfinder.com/settings)模拟“保存更改按钮”的作用，但无法弄清楚 javascript 是如何保存设置的。

我试过萤火虫和篡改数据，但我找不到！

任何帮助表示赞赏！

* * *

附加信息：

我使用 C# 应用程序尝试执行“保存更改按钮”正在执行的操作。就像可能将其设置在 http 标头或其他内容中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:46:19.130

点击事件在javascript中注册

```
 $('#settings-submit').click(function(e) {
      e.preventDefault();
      $('.alert').show();
      window.setTimeout(function(){
        var redirect = document.referrer ? document.referrer : '/';
        window.location.href = redirect;
      }, 1500);
    }); 
```

![饼干的截图](../Images/93d5a0e83f242e8cd70472b2d81a0cf1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T04:30:52.920

它在源代码中说。每当单击其中一个按钮时，它都会使用`storemanager`作为`UnitsManager`. `UnitsManager`来自 cloudfront 上的缩小源代码，它似乎使用 cookiename ( ) 将设置存储到兼容的浏览器`localStorage`中。`localStorage``wf_units`

您可以通过键入以下内容查看所有设置更改：`localStorage.getItem('wf_units');`

# cordova - 无法在 phonegap + 主干应用程序中呈现 jquery 移动样式

> ID：15080974
> 
> 赞同：3
> 
> 时间：2013-02-26T03:43:38.123
> 
> 标签：cordova, jquery-mobile, backbone.js, requirejs

我已经使用骨干在 phonegap 中开发了一个应用程序，需要 js。jquery mobile js 是从主 js 加载的。

据我所知，require js 会为我加载所有的 js。所以我不必`<script>`在我的`index.html`

我不想要什么？有没有一种特定的方法可以在 phonegap + 骨干中加载 jqm 我在这里加载了 jqueryMobile 库。

```
require.config( {
  paths: {
        "jquery": "libs/jquery",
        "jquerymobile": "libs/jquerymobile",
        "underscore": "libs/lodash",
        "backbone": "libs/backbone"
  },
  shim: {

        "backbone": {
              "deps": [ "underscore", "jquery" ],
              "exports": "Backbone"  //attaches "Backbone" to the window object
        }
  }} );
require([ "jquery", "backbone", "routers/mobileRouter" ], function( $, Backbone, Mobile ) {
$( document ).on( "mobileinit",
    function() {
        $.mobile.linkBindingEnabled = false;
        $.mobile.hashListeningEnabled = false;
    }
)
require( [ "jquerymobile" ], function() {
    this.router = new Mobile();
}); } ); 
```

这是我的 index.html `head`。因为我最初是在加载我的移动 js，所以我的标题中的样式不需要 jqm 脚本。

```
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<title>RideSmart App</title>
<script src="js/libs/require.js" data-main="js/mobile"></script>
<link rel="stylesheet" href="css/jqm1.3.0.min.css" />
<script type="text/javascript" charset="utf-8" src="jsLib/phonegap.js"></script>  
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:51:28.223

我认为您需要`'create'`在 Backbone 呈现页面后触发页面上的事件，正如[此处](http://jquerymobile.com/demos/1.2.0/docs/pages/page-scripting.html)文档的“增强新标记”部分中所建议的那样。

> 但是，如果您在客户端生成新的标记或通过 Ajax 加载内容并将其注入页面，则可以触发 create 事件来处理新标记中包含的所有插件的自动初始化。这可以在任何元素（甚至是页面 div 本身）上触发，从而为您节省手动初始化每个插件（listview 按钮、选择等）的任务。

```
$( ...new markup that contains widgets... ).appendTo( ".ui-page" ).trigger( "create" ); 
```

如果您使用的是[Marionette](https://github.com/marionettejs/backbone.marionette)，您可以覆盖`onRender`它提供的钩子以自动执行此操作。像这样的东西：

```
// Override Marionette onRender and onShow events so JQM 'create' event is
// triggered on view's element. This ensures dynamically created content
// is given the jQuery Mobile treatment
Marionette.View.prototype.onRender = Marionette.View.prototype.onShow = function() {
  this.$el.trigger('create');
  return this;
}; 
```

# javascript - 如何在动力学js中同时使用可拖动和双击？

> ID：15080975
> 
> 赞同：1
> 
> 时间：2013-02-26T03:43:39.363
> 
> 标签：javascript, jquery, kineticjs

如何在动力学js中同时使用可拖动和双击？使用可拖动时，双击将不起作用。这是我绘制图像的代码..

```
 function draw(images) {
       abcImg= new Kinetic.Rect({
       x: 50,
       y: 150,
       width: 50,
       height: 50,
       fillPatternImage: images.abc,
       name: "abc",
       draggable: true
   });
 } 
```

这里是双击时的代码..

```
 layer.on('dblclick', function(evt) {
    var shape = evt.shape;
    name = shape.getName();

    $( "#dialog-form" ).dialog( "open" );

  }); 
```

我正在使用 kineticjs 和 jquery .. 谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:12:46.693

**以下是如何在舞台的空白区域监听鼠标/触摸事件。**

要监听舞台上的鼠标/触摸事件（任何非对象区域），您需要添加一个包含填充舞台的矩形的新层。然后你可以在空白的舞台区域处理鼠标/触摸事件： eventLayer.on(“dblclick”,function(e) {//do doubleclick stuff}

该层代码如下所示：

```
 // Create a layer that will listen for mouse/touch events
  var eventLayer = new Kinetic.Layer();
  eventLayer.add(new Kinetic.Rect({
  x:0,
  y:0,
  width:400,
  height:300
  }));
  stage.add(eventLayer);

  // TEST--listen for "dblclick"
  eventLayer.on('dblclick', function(evt) {
    alert("2click");
  }); 
```

这是完整的代码和小提琴：http: [//jsfiddle.net/m1erickson/gNMRq/](http://jsfiddle.net/m1erickson/gNMRq/)

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.2-beta.js"></script>

  </head>
  <body>
    <div id="container"></div>

    <script>
      var stage = new Kinetic.Stage({
        container: 'container',
        width: 400,
        height: 300
      });
      var layer = new Kinetic.Layer();
      var rectX = stage.getWidth() / 2 - 50;
      var rectY = stage.getHeight() / 2 - 25;

      var box = new Kinetic.Rect({
        x: rectX,
        y: rectY,
        width: 100,
        height: 50,
        fill: '#00D2FF',
        stroke: 'black',
        strokeWidth: 4,
        draggable: true
      });

      // add cursor styling
      box.on('mouseover', function() {
        document.body.style.cursor = 'pointer';
      });
      box.on('mouseout', function() {
        document.body.style.cursor = 'default';
      });

      // Create a layer that will listen for mouse/touch events
      var eventLayer = new Kinetic.Layer();
      eventLayer.add(new Kinetic.Rect({
      x:0,
      y:0,
      width:400,
      height:300
      }));
      stage.add(eventLayer);

      // TEST--listen for "dblclick"
      eventLayer.on('dblclick', function(evt) {
        alert("2click");
      });

      layer.add(box);
      stage.add(layer);
    </script>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T05:53:06.610

它工作正常。看看这个，它使用了可拖动和 dblclick，两者都可以正常工作。

[http://jsbin.com/oruhif/1/edit](http://jsbin.com/oruhif/1/edit)

# json - Jetty Proxy servlet 未发送所有修改后的内容

> ID：15080980
> 
> 赞同：1
> 
> 时间：2013-02-26T03:44:30.627
> 
> 标签：json, servlets, jetty

我正在使用 Jetty 的代理 servlet 将请求从前端客户端路由到 Couch 数据库。除了代理之外，我还向 CouchDB 使用的传入请求注入了额外的细节。HTTP 请求通过扩展来修改[`HTTPServletRequestWrapper`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequestWrapper.html)。当我重写该`getContentLength`方法并重新计算 的大小时`inputStream`，只有原始请求的大小内容被发送到 CouchDB，并且由于输入 JSON 无效，Couch DB 发出错误请求（400 HTTP）代码。在 Jetty 记录器中，我看到了`contentWritten != contentLength`信息。一旦我完全删除 Content-Length 标头，Jetty 会按预期发送请求，将所有内容复制到代理请求。即使这种方法有效，我想知道是什么真正导致 Jetty 不发送修改后的请求内容，即使通过覆盖`getContentLength`.`ServletInputStream`

我使用的是 Jetty 8.1.3 版本，所有请求都是 JSON 请求/响应。我还对`ServletInputStream`类和`read()`方法进行了子类化，所以我认为这没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:07:36.747

这是最近在 Jetty 7.6.10-SNAPSHOT 和 8.1.10-SNAPSHOT 中修复的分块编码错误。 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=401382](https://bugs.eclipse.org/bugs/show_bug.cgi?id=401382)

在 Jetty-7 中修复（然后合并到 Jetty-8）

*   [提交 #1](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/commit/?h=jetty-7&id=27cad4960b06f2f5277bd35ef3dc677caedec844)
*   [提交 #2](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/commit/?h=jetty-7&id=bed3ea04f8fd9731a73b0d97c10b9f35fdb950b2)

[您可以使用来自oss.sonatype.org SNAPSHOTS 存储库](https://oss.sonatype.org/content/repositories/jetty-snapshots/)的 Jetty 7.6.10-SNAPSHOT 或 8.1.10-SNAPSHOT 。

7.6.10 和 8.1.10 版本可能会在 2013 年 3 月的第一周发布。

是的，Jetty-7 和 Jetty-8 是相同的代码库，并行开发，甚至并行发布，唯一的区别是各自支持的 servlet 规范。（Jetty-7 是 Servlet 2.5，Jetty-8 是 Servlet 3.0）

# c# - 在表单上的关闭 (X) 按钮上显示工具提示

> ID：15080984
> 
> 赞同：0
> 
> 时间：2013-02-26T03:44:45.923
> 
> 标签：c#, forms, notify

`Close (X)`我有一个表单，当用户单击按钮时，我禁止用户关闭它。`Close (X)`是否可以在单击按钮时在按钮上显示工具提示？我想这样做是为了通知用户为什么表单不会关闭。

我想到了一个消息框，但后来我认为每次单击`Close (X)`按钮时都关闭消息框太烦人了。

有没有比我想要做的更好的方法来通知用户？

编辑：

这是我的 FormClosing 事件代码

```
 private void InputForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        if (e.CloseReason == CloseReason.UserClosing)
        {
            e.Cancel = true;
            if (!mCloseReason)
            {
                e.Cancel = false;
            }
        }
    } 
```

我有一种方法可以将输入保存在表单中。一旦该方法完成，我需要自动关闭表单。一旦我调用*this.Close()*，*if 语句*就会为*真*，这意味着我无法关闭表单。这就是为什么我使用了一个名为*mCloseReason*的变量来自动关闭表单。现在，这就是为什么我问我是否可以在单击按钮后通过工具提示通知用户。**`Close (X)`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T05:02:27.103

我相信关闭（X）按钮的默认工具提示在没有一些黑客攻击的情况下是不可编辑的（这是不切实际的）。

也许您可以做的是在表单下方有一个状态字段，因此当用户单击关闭按钮时，它会在状态字段中显示“无法关闭表单（...）”

或者另一种想法是在表单的某个地方弹出一条消息，稍等片刻就消失了，表明表单无法关闭。

Roger 提到了另一个好主意......只是在表单上的某个地方有一个关闭按钮，上面有一个工具提示，然后隐藏表单的标题栏？**

# extjs3 - Extjs3.3.0 数字字段

> ID：15080988
> 
> 赞同：0
> 
> 时间：2013-02-26T03:45:04.280
> 
> 标签：extjs3

该窗口包含一个表单，其中包括`NumberField(allowBlank: false)`，一旦您打开窗口，`NumberField`就会以红色勾勒出。说该字段是必需的。但我们希望`NumberField`除非用户单击该字段并在未输入任何内容的情况下单击离开，否则不应以红色概述。如何配置这个`NumberField`。

extjs 库：3.3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:27:52.537

这就是我所做的。基本上我听'focus'/'blur'事件，如果值为空白，则调用markInvalid，否则调用clearInvalid。

```
 xtype : 'numberfield',
                        fieldLabel :'number',
                        markNumberInvalid : function(){
                            if(this.getValue() == ""){
                                this.markInvalid();
                            }else{
                                this.clearInvalid();
                            }   
                        },
                        listeners : {
                            'focus' : function(){
                                this.markNumberInvalid();
                            },
                            'blur' : function(){
                                this.markNumberInvalid();
                            }
                        } 
```

# amazon-ec2 - 安装 phpmyadmin 时重新启动 httpd 时出错

> ID：15080989
> 
> 赞同：2
> 
> 时间：2013-02-26T03:45:13.540
> 
> 标签：amazon-ec2, phpmyadmin, apache

调用后`sudo service httpd restart`出现以下错误：

```
Starting httpd: Syntax error on line 2 of /etc/httpd/conf.d/phpmyadmin.conf:
Invalid command '\xe2\x80\xb9Directory', perhaps misspelled or defined by a module not included in the server configuration 
```

这是我的/etc/httpd/conf.d/phpmyadmin.conf：

```
Alias /phpmyadmin /var/www/phpmyadmin
‹Directory "/var/www/phpmyadmin"›
Options FollowSymLinks
AllowOverride None
Order allow,deny
Allow from all
#SSLRequireSSL
‹/Directory› 
```

有什么想法吗？我的网站现在关闭了，似乎找不到问题。

FWIW 这是在 EC2 Linux 实例上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T04:27:38.137

# jquery - 在 jQuery 和 changeclass 中使用 on('click') 事件只会触发一次

> ID：15080992
> 
> 赞同：3
> 
> 时间：2013-02-26T03:45:22.043
> 
> 标签：jquery

在下面的脚本中，第一次单击“toggleExtras”跨度有效。但随后的点击什么也不做。我正在尝试使用 on('click') 方法和 toggleClass 来定义切换和未切换状态的事件。

```
 jQuery(document).ready(function()
    {
        jQuery('.toggleExtras').on('click', function(e)
        {
            //jQuery('.extras').slideToggle(); //This works but bounces twice.
            jQuery('.extras').show();
            jQuery('.toggleExtras').text('Hide Advanced Options');
            jQuery('.toggleExtras').toggleClass('toggleExtras toggleExtrasHide');
        });

        jQuery('.toggleExtrasHide').on('click', function(e)
        {
            jQuery('.extras').hide();
            jQuery('.toggleExtrasHide').text('Show Advanced Options');
            jQuery('.toggleExtrasHide').toggleClass('toggleExtrasHide toggleExtras');
        });
    }); 
```

HTML：

```
 <span class="toggleExtras">Show Advanced Options</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T03:49:01.783

这是因为`.toggleExtrasHide`在初始化时不存在...

我会像这样重写你的代码：

```
jQuery('.toggleExtras').on('click', function(e){
  jQuery('.extras').toggle();
  jQuery(this).text(function(el, currentValue){
    return currentValue == "Show Advanced Options" ? "Hide Advanced Options" : "Show Advanced Options";
  });
}); 
```

演示：http: [//jsfiddle.net/xbLc2/](http://jsfiddle.net/xbLc2/)

阅读更多关于`.toggle()`：[http](http://api.jquery.com/toggle/)
://api.jquery.com/toggle/ 阅读更多关于`.text()` ：[http ://api.jquery.com/text/](http://api.jquery.com/text/)

# css - 导航链接突然无法点击

> ID：15080996
> 
> 赞同：0
> 
> 时间：2013-02-26T03:45:30.957
> 
> 标签：css, html, navigation, hyperlink

我正在为一门课程制作一个页面，只是为了显示内容（您可以在正文中看到它们按章节排序），但我最初在左侧有一个列表，我最初使用的只是列出了所有内容，我想留着它。

问题是，一旦我开始添加更多的 CSS——我不知道具体在哪里——左边的区域就变得完全无法点击。您无法突出显示文本，也无法单击任何文本 - 什么都没有。我完全不知道是什么原因造成的。

链接到[这里的网站](http://student.ecc.iwcc.edu/~asmolinski598)

[这](http://pastebin.com/giUisBPb)是一个显示我所拥有的一切的 pastebin 链接。

谢谢你，我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:51:20.610

.content div 与整个正文区域重叠，因为“位置：绝对；”

添加`z-index: 9999;`到`#menu`您的 CSS 中，它应该是可点击的。

另一种方法是使用“位置：相对；浮动：左；” .content 和#menu，但你必须小心它们的宽度。它们的宽度总和（包括内边距、边距和边框）应小于或等于容器宽度。在您的情况下，它应该是正文标记（实际上是在您的 html 中看不到正文标记）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T03:50:47.857

那是因为你的`.content`div 正在使用`position: absolute;`，所以它被从页面流中取出并与你的侧边栏重叠，因为它没有设置宽度（块元素跨越你的视口的整个宽度，除非你给它一个固定的宽度）......只需添加一个`z-index`负值到您的`.content`div，它应该可以正常工作。

更多关于[z-index](http://css-tricks.com/video-screencasts/40-how-z-index-works/)